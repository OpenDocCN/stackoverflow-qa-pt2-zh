# StackOverflow 问答 15108000-15108999

# php - 禁用按钮，直到输入密码/访问代码（PHP）

> ID：15108006
> 
> 赞同：-1
> 
> 时间：2013-02-27T09:06:44.267
> 
> 标签：php, html

**编辑：抱歉措辞不好，更好的版本如下：** 当用户第一次访问他们看到 i.stack.imgur.com/7zbyv.png 的站点时。然后他们必须输入设置的密码（PHP 变量）并单击提交。如果正确，将显示 i.stack.imgur.com/E78wK.png。如果没有，什么都不会发生。

* * *

我正在我的开发站点上编写脚本。我正在寻找用文本框和提交按钮替换大绿色按钮。用户必须在框中输入正确的密码并单击提交按钮，然后才会显示绿色按钮。我在任何地方都找不到有关如何执行此操作的指南。谁能帮我？我在下面放了相关代码和截图：

绿色按钮：

![](../Images/b6c1899aaf703fb8b5ac738b57d264bb.png)

```
<?php
    if(($xx != null) || $log != null)
    {
    echo "<a rel=\"tooltip\" title=\"Login via Instagram using your username\" class=\"btn btn-success\" href=\"$loginUrl\">Login with Instagram</a>";
    } 
?> 
```

登录表单和按钮

![](../Images/637b03fd9d44cc7a58c078e3474b8d23.png)

```
<form>
        <br />
        <input type="password" class="input-small" placeholder="Enter Code...">
        <button type="submit" class="btn">Login</button>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:09:40.570

这很简单——当用户没有登录时，你输出表单和按钮。你使用 CSS 隐藏表单，只显示按钮。然后用户 jQuery `click()`（或简单的 javascript）处理程序用表单切换按钮。

这是使用 jQuery 进行上述技术的演示：http: [//jsfiddle.net/uHzfp/](http://jsfiddle.net/uHzfp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:22:57.513

```
<?php
    if(($xx != null) || $log != null)
    {
    echo "<a id="login_button" rel=\"tooltip\" title=\"Login via Instagram using your username\" class=\"btn btn-success\" href=\"$loginUrl\" >Login with Instagram</a>";
    } 
?>

<form id="myform" style="display:none;">
        <br />
        <input type="password" class="input-small" placeholder="Enter Code...">
        <button type="submit" class="btn">Login</button>
</form>

<script>
$("#login_button").click(function () {
$(this).css("display","none");
$('#myform').css("display","");
});
</script> 
```

# mysql - 将数据类型从 varchar 更改为 datetime 格式，并恢复以前的数据

> ID：15108025
> 
> 赞同：0
> 
> 时间：2013-02-27T09:07:37.000
> 
> 标签：mysql, database, datetime, timestamp, type-conversion

我有一个带有 time_stamp 列的表，其数据类型为 varchar 。**它以“2/28/2013 11:33:45 am”**的形式提供数据 我想将此数据类型更改为 datetime，因为我无法在 varchar 上应用任何 datetime 函数。

我在那个表里已经有很多数据了，我想改变它的数据类型并恢复所有的数据。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:12:22.957

您需要使用将其转换为日期时间`STR_TO_DATE`

```
SELECT *
FROM tablename
WHERE STR_TO_DATE(time_stamp, '%m/%d/%Y %h:%i:%s %p') = CURDATE() 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/8089)

# android - 如何在 Android 中以 raw 格式创建 PDF 文件

> ID：15108027
> 
> 赞同：1
> 
> 时间：2013-02-27T09:07:38.980
> 
> 标签：android, pdf

如何在原始文件中创建 PDF 文件 ..即使我使用的是 iText.jar 我收到一个错误，指定文件未找到错误并且还说文件无法打开。这里是代码

/** 在第一次创建活动时调用。*/

```
EditText editText;
Button button;
private static String FILE = "C:/FirstPdf.pdf";
String body ;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    editText = (EditText)findViewById(R.id.editText1);
    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            body = editText.getText().toString();

            Document document = new Document();
            try {
                PdfWriter.getInstance(document, new FileOutputStream(FILE));
                document.open();
                document.addSubject(body);
                document.close();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:16:52.460

```
EditText editText;
Button button;
private static String FILE = "";
 String body ;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
FILE=(Environment.getExternalStorageDirectory().getAbsolutePath());
editText = (EditText)findViewById(R.id.editText1);
button = (Button) findViewById(R.id.button1);
button.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        body = editText.getText().toString();

        Document document = new Document();
        try {
             File temp = new File(FILE.getAbsolutePath(),"abcd.pdf");   
            PdfWriter.getInstance(document, new FileOutputStream(temp));
            document.open();
            document.addSubject(body);
            document.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }
});

} 
```

没有 C: 在 android 中使用 Environment.getExternalStorageDirectory().getAbsolutePath() 来获取外部存储路径

在清单中添加写入外部存储的权限

# c# - 出于什么原因，我应该使用 Expression Blend 而不是 XAML Designer？

> ID：15108028
> 
> 赞同：9
> 
> 时间：2013-02-27T09:07:43.287
> 
> 标签：c#, wpf, expression-blend

如果这不是问的正确地方，请原谅我（如果不是，请相应地移动我的线程）。

我已经开发 WPF 应用程序大约一年左右，我基本上在 VS 中的 XAML 设计器中完成了我所有的设计。除了一些奇怪的东西之外，我对它感觉很舒服，并且从来没有觉得有必要为 WPF 应用程序寻找另一种设计工具。（除了 Kaxaml，但这仍然在 XAML 设计器的范围内）

我查看了演示 Expression Blend 功能的线程和视频，当然它很漂亮，但对于普通的旧 XAML 编辑器来说，没有什么是做不到的。

有人说 Expression Blend 是一个主要为设计师设计的工具，但我看不到这一点。即使您只是要进行设计，您也[需要具备软件开发知识才能正确开发 WPF 应用程序。](http://lunarfrog.com/blog/2011/12/15/blend5xaml/)

*   Expression Blend 可以做哪些 VS 中的 XAML Designer 不能做的事情？
*   出于什么其他原因，我应该在 Expression Blend 中设计 WPF 应用程序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T14:49:24.257

说*“[Expression Blend] 很漂亮，但它不是你不能用普通的旧 XAML 编辑器做的”*，就像问你为什么要使用 Photoshop，而你可以在 MS Paint 中做同样的事情。

当然**可以**，但你不会很有效率。

我总是使用 Blend 的一些东西（相对于 XAML 编辑器甚至 Visual Studio 设计器）：

*   刷子和颜色。Blend 的 UI 比 VS Designer 更好
*   动画和故事板。（我以后可能会在 XAML 中编辑它们，但如果它们是复杂的，那么在 Blend 中更容易和更快地完成初始的）
*   [视觉状态](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager%28v=vs.95%29.aspx)。VS 视觉设计器不支持这一点，手动操作起来很棘手
*   编辑样式和模板。特别方便的是在现有模板上使用 Blend 的“创建副本”
*   属性编辑器使用起来更愉快（例如，单击 + 向侧面拖动鼠标以增加/减少 int 值）并且通过属性的呈现和分组来思考更多

也就是说 - 我的大部分 XAML 工作都是在 Visual Studio 中的普通 XML 编辑器中完成的（我很少使用设计器）。但如果没有 Blend，我不会做任何严肃的 WPF 开发

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-27T13:08:42.273

我可以说 Blend 更面向 Graphic Designer，而 Visual Studio 更面向 Developper。

我的意思是在 Blend 中，您只需单击鼠标即可完成所有操作，只需单击几下鼠标即可轻松创建动画，也可以通过鼠标单击创建触发器。基本上，您大部分时间都不必进入代码。

出于其他原因，我真的很喜欢 Blend，您可以单击某些内容，然后编辑（编辑当前或副本）样式，您不必搜索位于何处...

在我们的团队中，我们的平面设计师只使用 Blend，我们的开发人员使用 VS 和 Blend。

# html - 使用溢出：滚动，隐藏 Firefox 中未使用的滚动条

> ID：15108029
> 
> 赞同：1
> 
> 时间：2013-02-27T09:07:48.427
> 
> 标签：html, css, firefox, scrollbar

我有一个 div `overflow:scroll`。

在 Chrome 中，如果一行文本过长，会出现滚动条。如果该行不太长，则不会出现滚动条。这是期望的行为。

然而，在 Firefox 中，无论 div 内容的长度如何，都会出现滚动条。如果行太短，滚动条根本无法使用。我该如何解决这个问题，以便 div 只有在其内容允许的情况下才能滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:13:13.907

尝试添加：

```
overflow-x: auto; 
```

看看这里： [如果不需要，在 pre 中隐藏滚动条](https://stackoverflow.com/questions/1675414/hide-scrollbar-in-pre-if-not-needed)

# encoding - 使用 owasp EnDe 工具了解 nibbles 和编码？

> ID：15108032
> 
> 赞同：0
> 
> 时间：2013-02-27T09:07:56.193
> 
> 标签：encoding, owasp

我正在使用基于 Web 的 owasp EnDe 工具来理解 nibbles 和一般编码。我正在测试一个样本输入，它是`abcd`.

现在，根据第一个半字节和第二个半字节对其进行编码的结果分别为`36,1,36,2,36,3,36,4,37,7,37,8,37,9,37,A`和`6,31,6,32,6,33,6,34,7,37,7,38,7,39,7,61`。

上述示例输入的十六进制简单表示是`61 62 63 64 77 78 79 7a`.

简单来说，半字节 1 和半字节 2 应该分别是 LSB 半字节和 MSB 半字节。有人可以解释它与该工具的使用有何关系吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:57:59.223

在查看执行编码的代码时，它似乎在 ASCII 代码的十六进制字符串上工作，而不是采用 ASCII 代码的半字节。因此，对于您的“abcd”示例和 1 个半字节编码，它的工作方式如下。

'a' -> 0x61 -> '61' '61' 的第一个半字节是 '6'，其中 '6' -> 0x36 -> '36' 所以 'a' 最终被编码为 %%361

'b' -> 0x62 -> '62' '62' 的第一个半字节是 '6'，然后又是 '36'。所以 'b' 最终被编码为 %%362

……

我不确定这种编码记录在哪里，也许你可以试试谷歌。

[您可以在https://github.com/EnDe/EnDe/blob/master/EnDe.js#L982](https://github.com/EnDe/EnDe/blob/master/EnDe.js#L982)找到执行编码的函数

# php - 我怎样才能从其他网站动态自动下载许多 csv 文件到我的电脑中的 php 本地主机

> ID：15108033
> 
> 赞同：0
> 
> 时间：2013-02-27T09:07:57.217
> 
> 标签：php, csv

我在网站上有很多 .csv 文件，基本上我想知道如何自动动态下载这个文件。在本地主机中有下载文件夹，在下载文件夹中将下载并自动保存，无需鼠标/键盘触摸，然后我想从下载文件夹自动导入，无需鼠标/键盘触摸。

真正的事实是，在那个网站上每天都会保存.csv 文件。但日常软件将自动下载并导入 MySQL 数据库，无需鼠标/键盘触摸。

我该如何解决，请详细说明。如果我能解决这个问题，我真的会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:47:14.290

在 localhost 服务器中使用以下 PHP 页面：

csvsaver.php：

```
<?php

    $saveLocation = 'files';
    $urls = array(
        'http://yourwebsite/folder/hello.csv',
        'http://yourwebsite/csv1.csv'
    );

    $now = date('Y-m-d_H-i');
    $dir = 'files' . '/' . $now;

    for ($i = 0; $i < count($urls); $i++){
        $url = $urls[$i];
        $file = $i . '_' . substr($url, strrpos($url,'/')+1 );
        $path = $dir . '/' . $file;

        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        $data = curl_exec($ch);
        curl_close($ch);

        if (!is_dir($dir)) mkdir($dir);
        file_put_contents($path, $data);
    }
?> 
```

例如，如果你把它放在'c:/wamp/www/csvSaver/csvsaver.php'中，你还需要在其中创建一个目录'files'：c:/wamp/www/csvSaver/files/

当您运行上述页面时，它将例如将两个文件保存到：

*   c:/wamp/www/csvSaver/2013-02-27_09-45/0_hello.csv
*   c:/wamp/www/csvSaver/2013-02-27_09-45/1_csv1.csv

您需要做的就是设置一些东西来每天运行 PHP 页面。如果您使用的是 linux，请设置一个 cron 作业。如果您使用的是 Windows，请设置运行 .bat 文件的计划任务。例如，[看这里。](http://www.abestweb.com/forums/programming-datafeeds-tools-188/connect-site-windows-scheduled-task-49121.html). 如果这看起来太复杂，那么只需每天手动访问您的 PHP 页面。

# android - 从Android maven中的url读取简单的json文件

> ID：15108036
> 
> 赞同：0
> 
> 时间：2013-02-27T09:08:10.097
> 
> 标签：android, json, spring, rest, maven

所以我想使用restTemplate.getForObject从一个url加载一个简单的JSON文件。我创建了一个只有一个字符串的简单 json 文件，但 android 无法加载它。但是，当我在模拟器的浏览器中输入 url 时，浏览器会显示我的 json 文件

知道为什么它不能与 restTemplate.getForObject 一起使用吗？

我的代码：

服务器调用者：

```
private static final String ipAddress = "192.168.56.1:8080";
private RestTemplate restTemplate = new RestTemplate();
private String test;

private List<HttpMessageConverter<?>> messageConverters;

private static ServerCaller instance = null;

private ServerCaller(){
    messageConverters = new ArrayList<HttpMessageConverter<?>>();
    messageConverters.add(new FormHttpMessageConverter());
    messageConverters.add(new StringHttpMessageConverter());
    messageConverters.add(new MappingJacksonHttpMessageConverter());
    restTemplate.setMessageConverters(messageConverters); 
}

private static void createMessageService(){
    if(instance == null){
        instance = new ServerCaller();
    }
}

public static ServerCaller getInstance(){
    if(instance == null){
        createMessageService();
    }
    return instance;
}

public ServerError getTest() {
        try {
         test = restTemplate.getForObject("http://" + ipAddress + "/ProjectTeamF-1.0/service/getTest.json", String.class);

        } catch (ResourceAccessException rae) {
            return ServerError.ServerNotFound;
        } catch (HttpServerErrorException hsee) {
            return ServerError.WrongData;
        } catch (Exception e) {
            return ServerError.OtherError;
        }
        return ServerError.NoError;
    }

public String pakTest(){
    return test;
} 
```

然后在我看来：

```
serverCaller.getTest();
ServerError se = serverCaller.getTest();                        

Toast.makeText(getApplicationContext(),serverCaller.pakTest(),Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:12:12.400

您必须使用 AsyncTasks 来获取带有 url 的对象，因为您不能在主线程中执行此操作。

# ruby-on-rails - rake db:create 命令在 ruby on rails 中出现错误

> ID：15108037
> 
> 赞同：-2
> 
> 时间：2013-02-27T09:08:11.163
> 
> 标签：ruby-on-rails, ruby, rake, bundler, activesupport

当我输入命令 rake db:create 时，终端上显示以下错误

```
rake aborted!
cannot load such file -- active_support/core_ext/class/inheritable_attributes
/home/shashikant/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385/gems/supermodel-0.1.4/lib/supermodel.rb:5:in `<top (required)>'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385@global/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
/home/shashikant/railsproject/online_exams_system/config/application.rb:7:in `<top (required)>'
/home/shashikant/railsproject/online_exams_system/Rakefile:5:in `require'
/home/shashikant/railsproject/online_exams_system/Rakefile:5:in `<top (required)>'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `eval'
/home/shashikant/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `<main>'
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:48:59.047

我得到了答案，刚刚从 github 下载了文件“inheritable_attributes.rb”，在您将文件添加到指定目录并运行命令 rake db:migrate 后，将显示其他文件名

# wcf - 我们可以从 WCF 方法返回 SqlDataReader 或 DataTable

> ID：15108042
> 
> 赞同：0
> 
> 时间：2013-02-27T09:08:28.840
> 
> 标签：wcf

我是 WCF 的新手。我对从 WCF 方法返回数据有疑问。

我们可以从 WCF 方法返回 SqlDataReader 或 DataTable 对象吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T07:38:23.233

是的，你可以 100% 使用 .net 支持的任何返回类型返回。但唯一的问题是 WCF 非常灵活，所以 WCF 的客户端并不是 100% 的 .net 框架。它也可以被java使用。并且 java returntype 不是 100% 等同于 .net returntype 所以你需要注意它。例如，默认情况下，通用列表在客户端转换为可观察集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:21:44.487

您应该创建一个新对象，然后返回这些对象的集合。像这样的东西。

```
public class Thing
{
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

然后使用您的数据表/阅读器，您可以使用 LINQ 或迭代来创建一个集合：

粗略的 sudo 代码：

```
Initialise List for Thing

foreach var v in DataTable
{
    List<Thing>.Add(new Thing(){ ID = v.ID, Name = v.Name });
}

return List 
```

或者，您可以使用 linq：

```
List<Thing> theList = DataTable.Select(x => new Thing { ID = x.ID, Name = x.Name });

return theList; 
```

我敢肯定，您可以弄清楚其余部分，如果您需要更多说明，我将扩展我的答案。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:12:02.577

是的，您可以，但是 DataTable 有很多开销，您可能会考虑将其写入实体列表并传递此列表

这样给我带来的麻烦少了很多

# orchardcms - 登录时如何隐藏菜单项，在 Orchard 1.6 中

> ID：15108048
> 
> 赞同：2
> 
> 时间：2013-02-27T09:08:45.443
> 
> 标签：orchardcms, orchardcms-1.6

我在自定义链接菜单项上使用内容权限模块来尝试在用户登录时隐藏它。

在菜单中，我有两个自定义链接项目，一个“我的页面”项目和一个“登录”项目，通过删除“匿名”用户的查看权限，我成功地向未经身份验证的用户隐藏了“我的页面”。但是，当我尝试执行相反的操作并删除除“匿名”用户之外的所有人的查看权限以在有人登录后将其隐藏时，它似乎不起作用。

我查看了安全代码，例如以下[http://orchard.codeplex.com/discussions/395052](http://orchard.codeplex.com/discussions/395052)帖子中指出的代码，但我无法理解它。

对此的任何想法或建议将不胜感激。

干杯。奥拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:40:07.707

您可能正在为“我的页面”链接使用内容项链接。这些将经过适当的权限检查。我只是猜测登录的链接是一个自定义链接，您可以直接在其中输入网址。据我所知，这些链接没有经过权限检查。

我能想到的几个选项是 1\. 将登录链接移动到一个单独的菜单，然后只有一个登录菜单和一个注销的菜单，每个菜单上都有正确的链接。然后，只需使用小部件层来隐藏/显示正确的菜单。2\. 制作您自己的菜单项类型，您可以编写自定义代码以根据您想要的任何内容隐藏/显示。

# php - 脚本在其他服务器上的行为不同

> ID：15108053
> 
> 赞同：0
> 
> 时间：2013-02-27T09:09:00.323
> 
> 标签：php, regex

我有一个非常简单的脚本，似乎在不同的服务器上表现不同！

这是脚本：

```
<?php
$list = file_get_contents("list.txt");
$list = str_replace(Array("\r\n", "\r", "\n", "\f"), "\n", $list);
$all = explode("\n\n", $list);

foreach($all as $k  => $v) {

    $b = preg_replace('/\s+/', '^', $v);
    echo $b."<br/><br/>";
     }
?> 
```

上面写着：

```
System:         Avro
Supplier:       ABC Inc

Quantity:       1
Type:             ICD
Key:              PA-658_ao8uY
For Clarity:  PA-658_AO8UY

Quantity:       10
Type:             PSTHG
Key:              tg675_0O09i8
For Clarity:  PA-658_AO8UY 
```

我有 3 台服务器要测试，我需要它在所有 3 台服务器上都能正常工作。它们是 php 4.3.10、5.2.13 和 5.3.5

该脚本在 PHP 5.2.13 上返回这个 - 这是我所期待的。

```
System:^Avro^Supplier:^ABC^Inc

Quantity:^1^Type:^ICD^Key:^PA-658_ao8uY^For^Clarity:^PA-658_AO8UY

Quantity:^10^Type:^PSTHG^Key:^tg675_0O09i8^For^Clarity:^PA-658_AO8UY 
```

然而在 4.3.10 和 5.3.5 我得到：

```
System:^ ^ ^ ^ ^Avro^Supplier:^ ^ ^ ^ABC^Inc

Quantity:^ ^ ^ ^1^Type:^ ^ ^ ^ ^ ^ ^ICD^Key:^ ^ ^ ^ ^ ^ ^ PA-658_ao8uY^For^Clarity:^ PA-658_AO8UY

Quantity:^ ^ ^ ^10^Type:^ ^ ^ ^ ^ ^ ^PSTHG^Key:^ ^ ^ ^ ^ ^ ^ tg675_0O09i8^For^Clarity:^ PA-658_AO8UY 
```

如何使所有输出都相同？

谢谢

更新：我已经通过更改：

`$b = preg_replace('/\s+/', '^', $v);`

到

`$b = preg_replace('/(\s|\xa0)+/', '^', $v);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:40:25.587

最佳猜测：您的输入数据采用允许多字节字符的字符编码，这会使 PHP 陷入循环。

您可能需要[`mb_ereg_replace`](http://php.net/manual/en/function.mb-ereg-replace.php)多字节版本。

出于调试目的，查看您收到的实际字符可能会有所帮助，例如[`ord`](http://php.net/manual/en/function.ord.php)用于查看每个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:26:46.460

通过更改，我已经完成了这项工作：

`$b = preg_replace('/\s+/', '^', $v);`

到

`$b = preg_replace('/(\s|\xa0)+/', '^', $v);`

# html - 用 display:table-cell 填充可用空间

> ID：15108054
> 
> 赞同：5
> 
> 时间：2013-02-27T09:09:00.283
> 
> 标签：html, css, displaytag, tablecell

是否可以在不指定手动宽度的情况下利用第二个 div 占用父 div 的可用空间？

这是试用演示的[**小提琴**](http://jsfiddle.net/JqHXJ/2/)。

```
.right_cnt {
    display: table-cell;
    background:#FFC;
} 
```

***注意*****：我需要黄色框来占用可用的正确空间。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T09:14:42.090

`display:table; width: 100%;`在父元素上设置，`float: left`从兄弟元素中移除。 [http://jsfiddle.net/byNpM/2/](http://jsfiddle.net/byNpM/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:19:34.867

可以使用表格布局来做到这一点，但这不一定是最简单的方法：[用你的小提琴来演示](http://jsfiddle.net/barney/8MyFv/).

更简单的方法是修改第二个单元格以删除所有表格显示属性并将第二个元素设置`overflow`为`hidden`：[另一个叉子演示这个](http://jsfiddle.net/barney/8MyFv/2/)。`zoom: 1`允许该技术在旧的 IE 中工作。如果您对`overflow`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:24:58.460

[这篇文章](https://stackoverflow.com/questions/1260122/expand-div-to-take-remaining-width)可能是您正在寻找的。

特别看看[Xanthir 的回答](https://stackoverflow.com/a/1767270/703717)：

> 解决这个问题其实很简单，但一点也不明显。你必须触发一个叫做“块格式化上下文”的东西，它以特定的方式与浮动交互。……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-08T22:02:41.097

在我看来，虽然`display:table-cell`在一行中的最后一个 div 上没有`width`将导致它拉伸以填充封闭的父`display:table`div，但表格单元格具有无法关闭的隐式“最小宽度”行为，强制它是它的孩子的宽度。

我不得不求助于将左单元格绝对定位在 100% 宽的右单元格上的宽填充之上。这样，当窗口变窄并且内容滚动时，100% 宽的内部 div 会根据需要缩小。

[http://jsfiddle.net/kmbro/cqkzbc4a/](http://jsfiddle.net/kmbro/cqkzbc4a/)

# reporting-services - MS Reporting Service 2008 R2 - 表非常慢

> ID：15108055
> 
> 赞同：1
> 
> 时间：2013-02-27T09:09:02.177
> 
> 标签：reporting-services, ssrs-2008

使用 Reporting Service 呈现 MDX 查询的结果非常慢（大约 8-10 秒）。MDX 速度很快，确实有一些条件渲染，但 8 秒对于 60x10 的表格来说听起来像是一个可怕的时间。

我们使用了 Can Grow/Shrink，但缓慢的性能仍然存在。

有人有同样的经历吗，性能是一个普遍的 SSRS 问题，还是我们添加了一些导致这个瓶颈的“功能”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:41:27.527

更多的一般性答案。我有一些降低性能的例子。

*   启用 CanGrow。
*   在 tablixes 中有公式，尤其是查找。
*   分组。
*   排序。

强烈建议使用查询对基本上任何数据操作进行排序、分组、求和等。

不太确定你的报告中有什么。

希望其中一些帮助？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:58:15.427

正如另一个答案中指出的那样，问题是canGrow。但这有点棘手。我们如何设法解决问题：

1) 使用浏览器调试器（IE 中的 F12）并分析 java 脚本代码。如果问题是一个增长问题，您会看到一个名称中带有增长的方法几乎一直在占用。

2）比直接在rdl文档中编辑所有单元格的属性替换更好。在我们的例子中，使用标准文本编辑器（例如 Notepad++）删除所有“真实”条目。

3）再次检查，在我们的示例中可能仍然存在一些cangrow，这是由于图标不太容易删除但改进很大。

# android - 从Django中的数据库内容为变量赋值

> ID：15108056
> 
> 赞同：0
> 
> 时间：2013-02-27T09:09:03.257
> 
> 标签：android, python, django, variables

嗨，我有一个函数，它可以从数据库中获取总共四个值中的一个值，在此基础上我需要根据值显示一些数据

```
update_grp = User_Groups.objects.get(user_id=request.user.id)
    showopen = update_grp.profilegroup
    if showopen == "trendy":
      slidercategory = Category.objects.get(id = 65)
    elif showopen == "Classic":
      slidercategory = Category.objects.get(id = 63)
    elif showopen == "Glam":
      slidercategory = Category.objects.get(id = 81)
    elif showopen == "Bohemian":
      slidercategory = Category.objects.get(id = 62)
    sliderproduct = slidercategory.product_set.all() 
```

但我收到以下错误

```
local variable 'slidercategory' referenced before assignment 
```

请建议我在哪里做错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:11:08.047

您的`showopen`变量不在代码提供的四个选项中。如果您没有调试器来查看变量实际上是什么，则在代码中添加一些打印语句，将变量打印到控制台。

```
update_grp = User_Groups.objects.get(user_id=request.user.id)
    showopen = update_grp.profilegroup
    print showopen
    #.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:17:23.570

您缺少“else”子句，因此解释器看到可能存在“slidercategory”在您的函数范围内不可用的情况（没有匹配的 if 语句）。

在函数顶部添加 else 子句或分配 sliderproduct = 'somedefaultvalue'，另一种解决方案是将返回栏移动到 if 子句的范围内，这将导致 None 在没有匹配的 if 时返回.

```
>>> def test(foo):
...     if foo == 2:
...        bar = 'hello'
...     elif foo == 3:
...        bar = 'goodbye'
...     return bar
>>> test(2)
>>> 'hello'
>>> test(1)
UnboundLocalError: local variable 'bar' referenced before assignment 
```

# php - Codeigniter 消息：未定义的变量：查询

> ID：15108057
> 
> 赞同：0
> 
> 时间：2013-02-27T09:09:03.430
> 
> 标签：php, mysql, database, codeigniter, show

解决了！

感谢 Fabio，我意识到我在控制器的索引功能中遗漏了一些东西。

* * *

我正在研究一个向我展示数据库数据的视图。

现在我得到错误：消息：未定义的变量：查询。

我的模型：

```
<?php
class categorieen_model extends CI_Model{

    function categorieen_getall()
    {
        $this->load->database();
        $query = $this->db->get('Categorieen');

        return $query->result();
    }
}

?> 
```

我的控制器

```
public function get_All()
{
    $this->load->model('categorieen_model');
    $data['query'] =
    $this->categorieen_model->categorieen_getall();

    $this->load->view('sidebar', $data);
} 
```

我的观点

```
<ul>
<?php foreach ($query as $row): ?>
    <?php echo $row->Categorie; ?>
<?php endforeach; ?>
</ul> 
```

上周我在我的控制器/视图中使用相同的数据库、另一个表以及其他数据和名称进行了尝试，并且它有效。当我今天将其更改为我的新表时，它不再起作用了。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:38:57.250

在您的控制器中使用它：

```
<?php 
if(is_array($query) && count($query)  > 0 ) { ?>
<ul>
<?php foreach ($query as $row): ?>
    <?php echo $row->Categorie; ?>
<?php endforeach; ?>
</ul>
<?php }?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:43:55.693

您没有将 index 方法上的任何数据传递给视图

```
<?php
  class Home extends CI_Controller{

    public function index() {
      //add this code
      $this->load->model('Categorieen_Model');
      $data['query'] = $this->Categorieen_Model->categorieen_getall();
      $this->load->vars($data);
      //end of new code
      $this->load->view('header');
      $this->load->view('navmenu');
      $this->load->view('sidebar');
      $this->load->view('home');
      $this->load->view('sidebar2');
      $this->load->view('sidebar3');
      $this->load->view('footer');
    }

    public function get_All(){
      $this->load->model('Categorieen_Model');
      $data['query'] = $this->Categorieen_Model->categorieen_getall();

      $this->load->view('sidebar', $data);
    }

  }
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T09:40:04.877

将您的控制器更改为此

```
public function get_All()
{
    $this->load->model('categorieen_model');
    $data['list'] =
    $this->categorieen_model->categorieen_getall();

    $this->load->view('sidebar', $data);
} 
```

并将视图更改为

```
<ul>
<?php foreach ($list as $row){?>
    <?php echo $row->Categorie; ?>
<?php } ?>
</ul> 
```

# php - 大量的 php.ini 文件

> ID：15108063
> 
> 赞同：1
> 
> 时间：2013-02-27T09:09:23.057
> 
> 标签：php

我在 Ubuntu 服务器上安装了 PHP，发现我的文件系统中有六个 php.ini 文件。

我想把这个做对，所以任何人都可以解释每个文件的不同目的是什么？

我的预感是`/etc/php5`PHP 使用的实际文件，并且`/usr/share/php5`是关于如何`etc`根据您的环境进行编辑的建议（因此您可以从 复制/粘贴内容`usr`，`etc`但我对此可能是错误的）。与相比，也不清楚什么`production-dist`和暗示。`production.cli``production`

```
/etc/php5/cgi/php.ini
/etc/php5/cli/php.ini
/usr/share/php5/php.ini-development
/usr/share/php5/php.ini-production
/usr/share/php5/php.ini-production-dist
/usr/share/php5/php.ini-production.cli 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:52:25.310

production-dist 很可能是作为默认生产 ini 文件的备份。cli 表示命令行。您可以使用 phpinfo() 检查哪个 php.ini 处于活动状态；

# jpa-2.0 - EntityManager.merge() 的意外行为

> ID：15108064
> 
> 赞同：0
> 
> 时间：2013-02-27T09:09:24.710
> 
> 标签：jpa-2.0, eclipselink, glassfish-embedded

我将嵌入式 glassfish (3.1.2.2) 与 junit (4.11) 和 JDK 1.7 一起使用，尽管我的源和目标设置为 1.6（maven-compiler-plugin 配置）。

以下是我的代码：

**人.java**

```
@Entity
public class Person implements Serializable {

    private static final long serialVersionUID = 81398385247591972L;

    @Id
    @GeneratedValue
    private Long id;
    @Version
    private Long version;
    @Column(length = 15, nullable = false, unique = true, updatable = false)
    private String username;
    @Column(length = 50)
    private String status;

    // Constructors

    // getters/setters

    // hashCode, equals, toString

} 
```

**服务.java**

```
@Stateless
public class Service {

    @PersistenceContext(unitName = "ExamplePU", type = PersistenceContextType.TRANSACTION)
    private EntityManager em;

    public Person add(Person person) {
        em.persist(person);
        return person;
    }

    public Person find(Long id) {
        return em.find(Person.class, id);
    }

    public Person modify(Person person) {
        return em.merge(person);
    }

    // some more code ...

} 
```

**服务测试.java**

```
public class ServiceTest {

    private static EJBContainer ejbContainer;
    private static Service service;

    // @BeforeClass, @AfterClass, @Before, @After

    @Test
    public void testMerge() {
        Person person;

        /* Step 1 */person = service.add(new Person("username", "status"));
        print("Added : " + person);

        person.setStatus("Away");
        /* Step 2 */person = service.modify(person);
        print("Merged (status change) : " + person);

        person.setUsername("UsErNaMe");
        /* Step 3 */person = service.modify(person);
        print("Merged (username change) : " + person);
    }

    // Some more tests

} 
```

**第 1 步**生成以下 SQL（如预期的那样）：

```
INSERT INTO PERSON (ID, STATUS, USERNAME, VERSION) VALUES (?, ?, ?, ?)
    bind => [1, status, username, 1] 
```

**第 2 步**生成以下 SQL（如预期的那样）：

```
UPDATE PERSON SET STATUS = ?, VERSION = ? WHERE ((ID = ?) AND (VERSION = ?))
    bind => [Away, 2, 1, 1] 
```

**第 3 步**不会生成任何 SQL，但不会引发任何异常，这是我所期待的，因为“用户名”被注释为**@Column(..., updatable = false)**。print(...) 方法打印以下输出：

> 合并（用户名更改）：人员 [id=1，版本=2，用户名=UserNaMe，状态=Away]

这次 merge() 操作更新了用户名，但没有更新版本。此外，现在数据库与 EntityManager 缓存不同步。

这是预期的，还是 EclipseLink 中的错误？

**更新**

预期结果是上述步骤 3 中的异常。

**更新**

[已在此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=402109)提交错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:15:21.663

您将该列标记为不可更新，并且 EclipseLink 检测到对您告诉它合并的人所做的唯一更改是用户名。但不得更新用户名。所以它不会发出任何 SQL 更新查询。

如果将列标记为不可更新，则不应更新它。

因此，为了清楚起见，您观察到的行为是预期的行为。

# linux - unix/linux shell 变量命名有什么规则吗？

> ID：15108065
> 
> 赞同：2
> 
> 时间：2013-02-27T09:09:27.283
> 
> 标签：linux, shell, variables, unix, syntax

unix/linux shell 变量命名有什么规则吗？

例如，像 Java 变量命名的通用规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:20:33.037

您必须非常小心，不要将任何 UNIX 命令用作变量。它会弄乱代码并产生意想不到的结果。另外，请记住保留字（`if`, `else`, `elif`, `do`, `done`...），并且大写变量保留供系统使用。

来自[命名变量名称的规则](http://bash.cyberciti.biz/guide/Rules_for_Naming_variable_name)：

> 变量名称必须以~~字母数字~~字母字符或下划线字符 (_) 开头，后跟一个或多个字母数字或下划线字符。有效的 shell 变量示例

或者在[The Open Group Base Specifications Issue 7](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_231)中看到：

> 在 shell 命令语言中，仅由可移植字符集中的下划线、数字和字母组成的单词。名称的第一个字符不是数字。

# c++ - 创建链接列表作为模板：我的实现是否正确？

> ID：15108078
> 
> 赞同：-1
> 
> 时间：2013-02-27T09:09:45.660
> 
> 标签：c++, visual-studio-2010, templates, linked-list

请看下图

![在此处输入图像描述](../Images/021a5939474dfdea1670524e47a5ef5b.png)

这就是我实现它的方式

```
template <typename T>

class LinkedList
{

    struct Link {
    T data;
    struct Link *next;

    public:
    T *first;
  };

LinkedList::LinkedList(void)
{
    first = 0;
}

LinkedList::~LinkedList(void)
{
}

bool LinkedList::IsEmpty()
{
    return (first==0);
}

void LinkedList::Insert(Link *newLink)
{
    newLink->next = first;
    first = newLink;
}

void LinkedList::Display()
{
    Link *current = first;

    while(current!=0)
    {
        current->Display();
        current = current->next;
    }
}

T *LinkedList::Find(int value)
{
    Link *current = first;

    while(current->GetData()!=value)
    {
        if(current->next==0)
        {
            return 0;
        }
        else
        {
            current = current->next;
        }
    }

    return current;
}

T *LinkedList::Delete(const int id)
{
    Link *current = first;
    Link *previous = first;

    while(current->GetData()!=id)
    {
        if(current->next==0)
        {
            return 0;
        }
        else
        {
            previous = current;
            current = current->next;
        }
    }

    if(current==first)
    {
        first = first->next;
    }
    else
    {
        previous->next = current->next;
    }

    return current;
}
}; 
```

我对我的实施感到不舒服。特别是，我不知道在`insert()`方法内部做什么，使用`T`类型。

下面是另一个类的图，它的`next`指针是 Weapons 代表链表中的链接。我怀疑这是否也是“链接”类。Next 是指向列表中下一个武器的指针。如果它影响上述代码，我将其发布在这里。

![在此处输入图像描述](../Images/4af52b693a6507e9ea40617f081b60bd.png)

方法里面怎么处理`insert()`？除此之外，我的链接列表是否正确？无论如何，第一次使用链接列表的模板。请帮忙！

**注意：不允许内置数据结构。这就是我发布课程图的原因。如果我需要内置数据结构支持，那么我不会问如何自己构建代码。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:51:05.230

**我宁愿回答的问题：**

我的特殊问题/练习是....

我如何使用`std::list`或其他一些标准库容器来解决我的问题，这些容器可能会使用更少的行，更容易理解，更有效率并帮助我作为程序员实现更多目标？

**我努力不回答的未说出口的问题：**

我的代码有什么问题？

**我认为您实际上在问的问题：**

如何修复我的`insert()`方法？

**只回答最后一个问题：**

您似乎正在尝试将新链接附加到列表的前面。从概念上讲，我会将它附加到列表的后面，但是，嘿，每个人都有自己的。

问题在于类型：在您的类中，您的类型`first`是`T *`，其中`T`可能是一些实现的自定义类`GetData()`。所以`first`指向 a `T`，它应该可能指向 a `Link`which 指向 a `T`。

然后你的`insert()`方法更有意义。

尽管如此，如果没有一段具有定义预测输出的可编译代码，真的很难知道你的代码是否正确。至少对于标准库，您总是可以假设如果有问题，它不在链表实现中。

你需要自己做，因为它是家庭作业吗？

# php - 将自定义 php 网站与贝宝集成？

> ID：15108079
> 
> 赞同：2
> 
> 时间：2013-02-27T09:09:47.300
> 
> 标签：php, paypal

我设法将自定义网站与贝宝集成...在此网站上创建帐户时，您需要通过贝宝支付费用...所以我在注册后将用户重定向到贝宝，在他付款后，他是重定向到我网站上的成功页面，并在 url 中使用令牌密钥作为参数（我从商家帐户输入了该成功页面）。唯一的问题是，我如何使用此令牌密钥从贝宝响应中获取刚刚注册并付款的客户的电子邮件。

如果我创建如下自定义表单：

```
 <form id="paypalForm" method="POST" action="https://www.paypal.com/cgi-bin/webscr">
        <input type="hidden" name="cmd" value="_notify-synch">
        <input type="hidden" name="tx" value="<?php echo $tokenKey; ?>">
        <input type="hidden" name="at" value="<?php echo $merchantPayPalltoken; ?>">
        <input type="submit">
     </form> 
```

如果我点击提交，我会被重定向到一个支付宝屏幕，在那里我可以得到我想要的信息，列出。

但我试图通过 jQuery.ajax 来调用这篇文章，如下所示：

```
 var postVars = jQuery('#paypalForm').serialize();
    var url = 'https://www.paypal.com/cgi-bin/webscr';
    jQuery.ajax({
        type: "POST",
        url: url,
        data: postVars,
        success: function(data){
              alert("success email = "+data.payer_email);

          },

      error:function(xhr, ajaxOptions, thrownError){

               alert('status = '+xhr.status+' thrownError = '+thrownError+ ' response = '+xhr.responseText);

          } 
    }); 
```

但它总是进入响应的错误部分，而不是成功。

在他付款后，我需要来自 pay-pal 的电子邮件信息才能在我的网站上激活该用户帐户。

或者我应该通过在将用户重定向到paypal进行付款之前使用用户电子邮件创建会话变量来完成这一部分，并且当用户被重定向回成功页面时，从会话中获取电子邮件。这是一种安全的方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:33:54.873

您可以通过两种不同的方式将该信息返回到您的站点。您可以使用 PDT 或 IPN。两者都会将信息返回到您的站点。无论买家是否退货，IPN 都会将信息发布回您的网站。这是一种更好的方法，可以用来防止买家不返回，例如他们的浏览器崩溃或他们关闭窗口。这样，您的系统仍将更新。另一种 PDT 方法，看起来像您尝试使用的方法，取决于买家返回您的网站。当它们被重定向回您的站点时，它们会被发送回一些信息。您回帖以使用 PayPal 验证信息，然后 PayPal 回复所有信息。

[您可以在https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNPDTAnAlternativetoIPN](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNPDTAnAlternativetoIPN)找到有关 PDT 的更多信息 。该页面上有文档和示例。您还可以在该页面上找到有关 IPN 的更多信息的链接，或者您可以访问[https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNOperations](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNOperations) 这取决于您你使用的方法。我通常将两者结合使用。我只是检查了 IPN 和 PDT 脚本，以确保在将其写入数据库之前我还没有收到来自其他脚本的帖子。如果我有，那么我忽略第二个帖子。我更多地使用 PDT 退货页面来创建动态收据，并且更多地依赖 IPN 在我的系统中进行更新。

IPN 的另一个好处是，如果由于某种原因最初收到帖子时出现错误或网络问题，您可以将帖子重新发送到您的系统。使用 PDT，您无法重新发送此信息。所以你必须手动更新你的数据库。

希望这可以帮助！！:)

# ios - 执行java脚本后如何获取HTML页面

> ID：15108081
> 
> 赞同：0
> 
> 时间：2013-02-27T09:09:50.000
> 
> 标签：ios, objective-c, ios5, ios6, ios4

我在用

```
[webView stringByEvaluatingJavaScriptFromString:@"validate(x);"] 
```

执行一个 java 脚本函数，我得到由“validate(x)”返回的返回值

但我想要在执行 java 脚本函数后显示的 HTML 页面（响应，即 WEB 页面）。

在目标 C 编程中有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:42:32.343

你可以试试打电话

```
NSString *htmlContents = [webView stringByEvaluatingJavaScriptFromString: @"document.body.innerHTML"]; 
```

一段时间后

```
[webView stringByEvaluatingJavaScriptFromString:@"validate(x)"]; 
```

也许你可以处理 UIWebView 委托的方法，`UIWebViewDelegate when`它完成加载页面，

```
- (void) webViewDidFinishLoad:(UIWebView *)webView 
```

但我不确定它是否适用于您的 JS。

# php - 在 Yii 中，将获取 date() 的函数以适合 MySQL 的存储格式放置在哪里是合适的位置

> ID：15108083
> 
> 赞同：0
> 
> 时间：2013-02-27T09:10:08.750
> 
> 标签：php, yii

我`$model->created = date("Y-m-d H:m:s");`经常使用 MySQL 友好格式获取当前日期时间，并希望将那一点点放入适合重用的地方。我意识到有很多方法可以做到这一点，但是“Yii”的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:16:28.597

我有一个 BaseModel，大多数模型都继承自它。`beforeSave()`如果没有设置，我在函数中执行 dateCreated 的设置。另外，我正在使用一个名为 LocalTime 的组件。见[http://www.yiiframework.com/wiki/197/local-time-zones-and-locales/](http://www.yiiframework.com/wiki/197/local-time-zones-and-locales/)

```
class BaseModel extends CActiveRecord {

    protected function beforeSave() {

        parent::beforeSave();

        if($this->hasAttribute('dateCreated') && $this->isNewRecord)
            $this->dateCreated = Yii::app()->localtime->getUTCNow();

        ...

        return $this;
    } 
```

如果您决定使用 LocalTime 组件，请确保在查找时从 UTC 转换回本地时间：

```
protected function afterFind() {

    parent::afterFind();

    if($this->hasAttribute('dateCreated'))
        $this->dateCreated = Yii::app()->localtime->fromUTC($this->dateCreated);

    ...

    return $this;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:30:54.080

你可以使用 yii 的内置行为，命名为[`CTimestampBehavior`](http://www.yiiframework.com/doc/api/1.1/CTimestampBehavior).

```
 class YourModel extends CActiveRecord 
   {
        public function behaviors()
        {
            return array(
                'CTimestampBehavior' => array(
                    'class' => 'zii.behaviors.CTimestampBehavior',
                    'createAttribute'=>'created',
                )
            );
        }

    } 
```

它是高度可定制的。您还可以指定[`updateAttribute`](http://www.yiiframework.com/doc/api/1.1/CTimestampBehavior#updateAttribute-detail)设置更新时间、[`timestampExpression`](http://www.yiiframework.com/doc/api/1.1/CTimestampBehavior#timestampExpression-detail)指定备用日期格式等。

# c# - iAmConfigurable 在抽象基类中具有派生类中任何类型的可配置选项

> ID：15108085
> 
> 赞同：1
> 
> 时间：2013-02-27T09:10:08.377
> 
> 标签：c#, generics, interface, abstract

我想要的是一个可以具有任何类型的可配置属性/变量的类。并且设置和获取这些配置的方式是在一个接口中定义的。它将成为某种插件架构。每个插件都有自己的未知类型的可配置参数（让它是字符串、双精度、整数等）。用户将能够在 GUI 中设置这些，这些将由插件的主机应用程序存储在数据库中。

问题是，在设置任何类型的这些配置时，我怎么不知道如何实现这种抽象形式。如果在配置类时不需要强制`Object`转换为例如 a那就太好了。`double`

我有这段`pseudo`代码让自己更清楚，见下文。

```
public class Configurable<T>
{
    string Name;
    T Value;
    string Description;
}

public interface iAmConfigurable
{
    void Set(Configurable<T>);
    Configurable<T> Get(string name);
}

public abstract class MyBaseClass : iAmConfigurable
{
    public abstract void Set(Configurable<T>);
    public abstract Configurable<T> Get(string name);
}

public class MyDerivedClass : MyBaseClass
{
    Configurable<int> MinimumSlope = new Configurable<int>
    {
        Name = "MinimumSlope",
        Value = 20,
        Description = "The lowest the slope of the trend may get before triggering the alarm"
    }

    public abstract void Set(string name, T value)
    {
        if(name == "MinimumSlope") MinimumSlope.Value = value;
    }

    public abstract Configurable<T> Get(string name)
    {
        if(name == "MinimumSlope") return MinimumSlope;
    }
} 
```

# java - 使用 Java.Thread 在 MySQL 数据库中插入数据是否安全？

> ID：15108086
> 
> 赞同：0
> 
> 时间：2013-02-27T09:10:14.210
> 
> 标签：java, mysql, multithreading

根据我上面的问题，我需要在我的数据库的一个表中插入超过 2000 万行。根据性能，我正在寻找一种方法来提高这个过程的效率。我的第一个想法是用 Java.Thread 实现这一点，但我不太确定这是否足够节省。有人对我有什么好的建议吗？

编辑：我已经使用`preparedStatement.addBatch()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:17:02.883

对我来说看起来很安全，前提是每个线程都使用不同的 Connection 对象，然后正确处理资源。

无论如何，请注意数据库本身对并发运行的请求有限制（ MySQL 中的[max_connections](http://dev.mysql.com/doc/refman/4.1/en/server-system-variables.html#sysvar_max_connections)），因此它无助于创建比此数量更多的线程。此外，请考虑其他优化，例如[批量插入](https://stackoverflow.com/questions/3784197/efficient-way-to-do-batch-inserts-with-jdbc)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:21:06.290

从不同的线程访问数据库并没有错。正如 Eyal 所写，只要确保像 Connections 这样的东西只能用于单个线程并正确处理。

另一个问题是，这是否真的有助于你的表现。我会确保您在使用多个线程之前完成了其他所有操作。特别是使用批处理语句似乎是您尚未研究的第一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:55:52.083

如果我理解正确，您需要一种将数千个查询写入数据库的方法。你知道你可以执行一批 MySQL 查询吗？在 Java的 Stackoverflow 上已经有一个关于此的问题 [：Insert multiple rows into MySQL with PreparedStatement](https://stackoverflow.com/questions/4355046/java-insert-multiple-rows-into-mysql-with-preparedstatement)

您可以使用： PreparedStatement#addBatch() [http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#addBatch%28%29](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#addBatch%28%29)

和 PreparedStatement#executeBatch() [http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeBatch%28%29](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeBatch%28%29)

在上面的链接中查看@BalusC 的答案以获取更多详细信息。

# c++ - 类模板：防止分配 类型

> ID：15108091
> 
> 赞同：0
> 
> 时间：2013-02-27T09:10:33.320
> 
> 标签：c++, templates, visual-c++, private

我有一个`CFixedLengthString`类模板，只有数据成员。数据成员的大小由模板类型参数确定。

```
template<size_t _Length>
class CFixedLengthString
{
private:
   char Buffer[_Length];

public:
   // Has constructors, conversion operators etc. 
   // Listing the important ones 
   operator const char*();
   operator = (const CFixedLengthString&);
   operator = (const char*);
}; 
```

自动转换是为了方便。例子：

```
CFixedLengthString<10> buf;
buf = "SomeString";

strlen(buf); 
```

但是这种便利也允许以下操作成功：

```
CFixedLengthString<10> buf1;
CFixedLengthString<20> buf2;
buf1 = buf2; 
```

这里通过隐式转换运算符`buf2`转换为，并用 . 调用。并因此转换为.`const char*``operator=``const char*``<20>``<10>`

**重要的东西在这里。** 为此，我编写了一个赋值运算符，它具有`CFixedLengthString`不同的大小。

```
template<size_t _TOtherSize>
void operator=(const CFixedLengthString<_TOtherSize>&); 
```

而且，当然，**将其设为 private**，因此如果`<20>`转换为`<non-20>`. 但是，令我惊讶的是，编译器并没有抱怨！它允许调用这个私人运营商！

如果`<N>`被复制到`<N>`，它调用正常的赋值操作符。如果`<N>`被复制（分配）给`<M>`编译器，则调用此专用操作符。

但是为什么编译器允许在这种情况下调用私有（以及受保护）？我正在使用 VC2008 编译器。我只为这个编译器寻找解决方案。

现在，我已经在这个专门的函数的主体中编写了一个静态断言（为了禁止这种错误的转换）。

**编辑：** 所有的回应都在欣赏。我唯一的问题是：

*   为什么我放在`private`区域的专用版本是**可调用**的？

我们都使用私有、仅声明函数、`delete`属性和其他方面进行防御性编程。我正在尝试做同样的事情。但是编译器**允许**调用私有函数！

**编辑2：** 示例代码：

```
template<size_t SIZE>
class FixedString
{
public:
    operator const char*();
    void operator =(const char*);

    void operator =(const FixedString&);

    // Disallow
private:
    template<size_t OTHERSIZE>
    void operator=(const FixedString<OTHERSIZE>&);
};

int main()
{
    FixedString<10> buf1;
    FixedString<20> buf2;

    buf2 = buf1;   // NO ERROR!!
} 
```

如果我删除 的专用版本`operator=`，它仍然可以工作。我想避免这种情况！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:17:25.097

对于您的情况，您可以删除有`operator const char*()`利于访问器函数的访问器函数，例如`c_ptr()`与 std::string 类似的解决方案，用于通过 c_str() 转换为 char*

另一种解决方案是将赋值设为`operator = (const char*);`私有，并从 char* 定义一个**显式构造函数**，以便您只能在需要时在类型之间显式转换：

```
class CFixedLengthString
{
public:
     explicit CFixedLengthString( char* str ) { *this = str );
private:
     operator = (const char*);
};

...
CFixedLengthString<10> buf1;
CFixedLengthString<20> buf2;
buf1 = CFixedLengthString<10>(buf2); 
```

当前的示例将限制您：

```
CFixedLengthString<10> buf1( "string" );
buf1 =  CFixedLengthString<10>("string"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:50:52.300

有几种方法可以实现这一点。

1.  您`operator const char*`可能在某些地方很方便，但显然它会在您不希望它的某些地方触发。考虑删除它，用类似于`std::string::c_str()`或制作它的函数替换它`explicit`（仅限 C++11）。
2.  您可以为其他不起作用的类型显式声明转换构造函数 - 因为它们是私有的（C++03）或已删除（仅限 C++11）。

    ```
    template <class T> 
    CFixedLengthString& operator=(T const&) = delete;

    //or delete just other FixedLengthStrings:
    template <size_t L> // _Length is a reserved identifier, do't use it!
    CFixedLengthString& operator=(CFixedLengthString<L> const&) = delete; 
    ```

在 VS2012 之前，在 Visual Studio 中声明运算符私有将不起作用，因为 VS 不尊重私有运算符（已知错误）： [http ://connect.microsoft.com/VisualStudio/feedback/details/649496/visual-c-doesnt-尊重访问修饰符for-operator-member-function-templates](http://connect.microsoft.com/VisualStudio/feedback/details/649496/visual-c-doesnt-respect-the-access-modifier-for-operator-member-function-templates) 然而，如果这些操作符没有实现（他们不应该） ，*链接器会抱怨。*

# asp.net - 在 ASP.NET 中下载检查的文件

> ID：15108092
> 
> 赞同：0
> 
> 时间：2013-02-27T09:10:34.517
> 
> 标签：asp.net, file, checkbox

我正在创建一个包含 DataList 的网页。DataList 中的所有项目前面都有复选框。用户检查一些文件，或所有文件，也许只是一个文件来下载它们。我怎样才能让它发生？我正在使用 ASP.NET 4.5 Web 窗体。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:15:09.093

有两种方法可以做到

1）。使用新名称的 javascript 打开多个窗口，在该新窗口中调用您的 aspx 页面。

2).首先压缩所有选定的文件，然后下载该单个 zip 文件

# javascript - Three.js 限制和缩放鼠标控件到画布大小

> ID：15108095
> 
> 赞同：1
> 
> 时间：2013-02-27T09:10:42.847
> 
> 标签：javascript, three.js, webgl

我一直在玩 Three.js 一段时间，我目前处理鼠标拖动的方式与 three.js 的可拖动立方体示例相同，使用轨迹球控件来操作相机，但是这些控件似乎都假设我将整个浏览器窗口用于我的应用程序。
有没有办法将这些鼠标控件缩放（和限制）到我的画布？

编辑：这是一个显示拖动对象的鼠标事件的代码示例（它实际上与 three.js 的示例目录中提供的示例几乎相同，但我应用了 uhura 的代码）

```
`//Called when cursor is moved, drags object if one is selected
        function onDocumentMouseMove( event ) {

            event.preventDefault();

            //mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
            //mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;

            mouse.x = cursorPositionInCanvas( renderer.domElement, event )[0];
            mouse.y = cursorPositionInCanvas( renderer.domElement, event )[1];

            var vector = new THREE.Vector3( mouse.x, mouse.y, 0.5 );
            projector.unprojectVector( vector, camera );
            var raycaster = new THREE.Raycaster( camera.position, vector.sub( camera.position ).normalize() );

            if ( SELECTED ) {
                var intersects = raycaster.intersectObject( plane );
                SELECTED.position.copy( intersects[ 0 ].point.sub( offset ) );
                return;
            }

            var intersects = raycaster.intersectObjects( objects );

            if ( intersects.length > 0 ) {
                if ( INTERSECTED != intersects[ 0 ].object ) {
                    INTERSECTED = intersects[ 0 ].object;
                    plane.position.copy( INTERSECTED.position );
                    plane.lookAt( camera.position );
                }
            } 
            else {
                INTERSECTED = null;
            }               

        }

        //Called when user clicks, selects object if mouse is over it and disables trackball controls
        function onDocumentMouseDown( event ) {

            event.preventDefault();

            var vector = new THREE.Vector3( mouse.x, mouse.y, 0.5 );
            projector.unprojectVector( vector, camera );
            var raycaster = new THREE.Raycaster( camera.position, vector.sub( camera.position ).normalize() );
            var intersects = raycaster.intersectObjects( objects );
            if ( intersects.length > 0 ) {
                controls.enabled = false;

                SELECTED = intersects[ 0 ].object;
                var intersects = raycaster.intersectObject( plane );
                offset.copy( intersects[ 0 ].point ).sub( plane.position );
            }

        }

        //Called when user releases mouse button, deselects any selected objects and re-enables trackball controls
        function onDocumentMouseUp( event ) {

            event.preventDefault();

            controls.enabled = true;
            if ( INTERSECTED ) {
                plane.position.copy( INTERSECTED.position );

                SELECTED = null;
            }

        }

        function cursorPositionInCanvas(canvas, event) {
            var x, y;

            canoffset = $(canvas).offset();
            x = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft - Math.floor(canoffset.left);
            y = event.clientY + document.body.scrollTop + document.documentElement.scrollTop - Math.floor(canoffset.top) + 1;
            return [x,y];
        }` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:51:25.653

使用 jQuery：

```
function cursorPositionInCanvas(canvas, event) {
                var x, y;

                canoffset = $(canvas).offset();
                x = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft - Math.floor(canoffset.left);
                y = event.clientY + document.body.scrollTop + document.documentElement.scrollTop - Math.floor(canoffset.top) + 1;

                return [x,y];
    } 
```

[Javascript 解决方案](https://stackoverflow.com/questions/9593734/mouse-position-in-canvas-without-a-library)

[其他](https://stackoverflow.com/search?q=mouse%20position%20canvas)

更新：

```
mouse.x = (cursorPositionInCanvas( renderer.domElement, event )[0]) / $(canvas).width()) * 2 - 1;
mouse.y = - (cursorPositionInCanvas( renderer.domElement, event )[1])/ $(canvas).height()) * 2 + 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-18T00:47:34.430

你的问题的答案其实很简单。不过，我花了一段时间才弄清楚这一点。通过向 TrackballControls 构造函数添加第二个参数，您可以控制控件处于活动状态的元素。

```
var controls = new THREE.TrackballControls(camera, renderer.domElement) 
```

# javascript - webservice调用第二次失败-backbone.js

> ID：15108106
> 
> 赞同：0
> 
> 时间：2013-02-27T09:11:02.900
> 
> 标签：javascript, backbone.js

它有点奇怪，第一次调用 web 服务调用，但从第二次开始我得到这个奇怪的错误。

```
this.save(requestObject, {
    success: function (response) {
        callback(response.toJSON());
    },

    error: function (res, result, xhr) {

    }
}); 
```

我第一次收到回调，为什么第二次就失败了？下面是错误日志。

```
HTTP Error (org.apache.http.client.HttpResponseException): 596
    [ERROR][TiHttpClient(  478)] org.apache.http.client.HttpResponseException: 596
    [ERROR][TiHttpClient(  478)]    at ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:240)
    [ERROR][TiHttpClient(  478)]    at ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:199)
    [ERROR][TiHttpClient(  478)]    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)
    [ERROR][TiHttpClient(  478)]    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:637)
    [ERROR][TiHttpClient(  478)]    at ti.modules.titanium.network.TiHTTPClient$ClientRunnable.run(TiHTTPClient.java:1217)
    [ERROR][TiHttpClient(  478)]    at java.lang.Thread.run(Thread.java:1020)
    [ERROR][V8Exception(  478)] Exception occurred at undefined:1: Uncaught SyntaxError: Unexpected token < 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:27:23.823

当您第一次运行`save`时，客户端将什么发送回服务器？POST 请求还是 PUT 请求？第二次，客户端请求是变化还是一样？

这可以帮助您识别问题。Backbone`save`方法委托给`Backbone.sync`决定它应该发出的请求类型的方法。例如，使用`isNew()`模型方法，`sync`如果模型是新的，则发出 POST（因为必须在服务器上保存新模型）请求，如果模型已经存在，则发出 PUT 请求（模型更新）。[您可以在主干主页](http://backbonejs.org/#Sync)查看有关该`sync`方法的更多信息。

您从服务器获得的错误可能正在发生，因为它不知道如何响应此请求之一。可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:26:02.710

[根据backbone.js 文档](http://backbonejs.org/#Model-save)：

`If the model isNew, the save will be a "create" (HTTP POST), if the model already exists on the server, the save will be an "update" (HTTP PUT).`

所以基本上第一个请求将是一个 POST 请求，之后的所有其他请求将是一个 PUT 请求。由于您的服务器端脚本似乎正在设置处理 PUT 请求，因此您可能希望像这样使用[emulateHTTP](http://backbonejs.org/#Sync-emulateHTTP)设置：

```
Backbone.emulateHTTP = true 
```

# alfresco - 以编程方式执行露天规则

> ID：15108113
> 
> 赞同：1
> 
> 时间：2013-02-27T09:11:29.780
> 
> 标签：alfresco

我在 Java 中以编程方式创建了一个规则并附加了一个空格，只要将新文档插入该空间，它就可以正常工作。但是如果我已经在空间中上传了一些文件并且我想运行规则怎么办。我知道我可以通过以下文章中定义的 Explorer 来做到这一点。

[http://docs.alfresco.com/4.0/index.jsp?topic=%2Fcom.alfresco.enterprise.doc%2Ftasks%2Flibrary-folder-rules-run.html](http://docs.alfresco.com/4.0/index.jsp?topic=%2Fcom.alfresco.enterprise.doc%2Ftasks%2Flibrary-folder-rules-run.html)

但我想使用 Java 代码实现相同的目标。

有没有人请提出一些解决方案。

:: 我正在使用 Alfresco 企业版 4.0.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:43:40.703

如果您使用 java，我建议您将行为绑定到策略：

[http://wiki.alfresco.com/wiki/Policy_Component#Binding_Behaviour_to_a_Policy](http://wiki.alfresco.com/wiki/Policy_Component#Binding_Behaviour_to_a_Policy)

我个人的经验是，作为开发人员，您可以使用行为（与规则相反）更好地控制存储库中的事件。但也许那只是我:)

# android - 地图覆盖不更新

> ID：15108117
> 
> 赞同：0
> 
> 时间：2013-02-27T09:11:35.957
> 
> 标签：android, google-maps, gps, overlay, android-maps

当农民在他的农场周围移动时，我正在尝试绘制路径以下是我的课程，我的问题是当我开始跟踪线路移动时，即使用户没有移动并且路径没有在他移动时更新

```
public class RouteOverlay extends Overlay {

private GeoPoint gp1;
private GeoPoint gp2;
private int mode = 1;

public RouteOverlay(GeoPoint paramGeoPoint1, GeoPoint paramGeoPoint2,int paramInt) 
{
    this.gp1 = paramGeoPoint1;
    this.gp2 = paramGeoPoint2;
    this.mode = paramInt;
}

public void draw(Canvas paramCanvas, MapView paramMapView,
        boolean paramShadow) 
{

    super.draw(paramCanvas, paramMapView, paramShadow);

    Projection projection = paramMapView.getProjection();
    Paint   mPaint = new Paint();
    mPaint.setDither(true);
   mPaint.setAntiAlias(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(3);
    mPaint.setAlpha(120);

    Point p1 = new Point();
    Point p2 = new Point();
    Path path = new Path();

    projection.toPixels(gp1, p1);
    projection.toPixels(gp2, p2);

    path.moveTo(p2.x,p2.y);
    path.lineTo(p1.x,p1.y);

    paramCanvas.drawPath(path, mPaint);
} 
```

主要活动：

```
public class MainActivity extends MapActivity {

public final LocationListener locationListener = new LocationListener() {

    public void onLocationChanged(Location location) {
        coordinates.add(location);
        mapView.getController().animateTo(getGeoByLocation(location));
        drawRoute(coordinates, mapView);

    }

};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_area_measurement);
    this.mapView = ((MapView) findViewById(R.id.mapview));
    this.mapView.setBuiltInZoomControls(false);
    this.mapView.getController().setZoom(17);
    this.coordinates = new ArrayList<Location>();

}

    protected boolean isRouteDisplayed() {
    return false;
}

private GeoPoint getGeoByLocation(Location location) {
    GeoPoint gp = null;

    try {
        if (location != null) {
            double geoLatitude = location.getLatitude() * 1E6;
            double geoLongitude = location.getLongitude() * 1E6;
            gp = new GeoPoint((int) geoLatitude, (int) geoLongitude);
        }

    } catch (Exception e) {
        e.printStackTrace(); 
    }
    return gp;
}

public String getLocationProvider(LocationManager paramLocationManager) {
    try {
        Criteria localCriteria = new Criteria();
        localCriteria.setAccuracy(1);
        localCriteria.setAltitudeRequired(false);
        localCriteria.setBearingRequired(false);
        localCriteria.setCostAllowed(true);
        localCriteria.setPowerRequirement(3);
        String str = paramLocationManager.getBestProvider(localCriteria,
                true);
        return str;
    } catch (Exception localException) {
        while (true) {
            localException.printStackTrace();
        }
    }
}

private void drawRoute(ArrayList<Location> paramArrayList,MapView paramMapView) {
    List<Overlay> overlays = paramMapView.getOverlays();
    //Changed for smooth rendering
        overlays.clear();
    for (int i = 1; i < paramArrayList.size(); i++) {
        overlays.add(new RouteOverlay(getGeoByLocation(paramArrayList.get(i - 1)), getGeoByLocation(paramArrayList.get(i)),2));
    }
}

public void startRecording() {
    this.isMeasuring = true;
    lm = (LocationManager) getSystemService(LOCATION_SERVICE);
    lm.requestLocationUpdates(getLocationProvider(lm),500,2,this.locationListener);
    /*if (lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
          gpsstatus.setText("Gps Is Enabled");
    }else
    { gpsstatus.setText("Gps Is disabled");}*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:17:57.160

你能确认你一直在使用 GPS 来追踪路线吗？否则，您可能会得到不正确的结果，并且您的补丁可能会像在 Apple 地图上一样绘制。对于这些情况，请始终尝试使用 GPS，我相信您不希望在地图上绘制不正确的路径。网络提供商可以对地图上的相对点进行三角测量，但在这种情况下，99% 的时间都是不正确的，因为该位置是相对的。

干杯

# c - 带有非阻塞套接字的recv

> ID：15108122
> 
> 赞同：5
> 
> 时间：2013-02-27T09:11:52.937
> 
> 标签：c, linux, sockets, nonblocking, recv

我正在尝试为套接字实现非阻塞，`recv`问题是当没有数据时我得到一个错误-1，但我希望得到`EAGAIN`错误。

套接字绝对设置为非阻塞状态，我检查`flags = fcntl(s, F_GETFL, 0)`了`O_NONBLOCK`标志。

提前非常感谢！

```
#include <arpa/inet.h>
#include <linux/if_packet.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/ioctl.h>
#include <sys/socket.h>
#include <net/if.h>
#include <netinet/ether.h>
#include <unistd.h>
#include <fcntl.h>
#include <asm-generic/errno-base.h>
#include <assert.h>

#define ETH_FRAME_LEN_MY 1400

void print(void *buf, int length)
{
    int i;
        for (i = 0; i < length; ++i)
            putchar(((char *)buf)[i]);
    printf("\n");
}

int main(){

    int flags, s, r, err; 

    struct sockaddr_ll socket_addr;
        char ifName[IFNAMSIZ] = "eth0";

        struct ifreq if_idx;
        struct ifreq if_mac;

    s = socket(PF_PACKET, SOCK_RAW, htons(0x88b6));
    if (s == -1) { perror("socket"); }

    flags = fcntl(s,F_GETFL,0);
    assert(flags != -1);
    fcntl(s, F_SETFL, flags | O_NONBLOCK);

    flags = fcntl(s, F_GETFL, 0);
        if ((flags & O_NONBLOCK) == O_NONBLOCK) {
            printf("it's nonblocking");
        }
        else {
            printf("it's blocking.");
        }

    /* Get the index of the interface to send on */
    memset(&if_idx, 0, sizeof(struct ifreq));
    strncpy(if_idx.ifr_name, ifName, IFNAMSIZ-1);
    if (ioctl(s, SIOCGIFINDEX, &if_idx) < 0)
        {perror("SIOCGIFINDEX");}

        memset(&socket_addr, 0, sizeof(socket_addr));
        socket_addr.sll_ifindex = if_idx.ifr_ifindex;
        socket_addr.sll_protocol = htons(0x88b5);
        socket_addr.sll_family = PF_PACKET;
        socket_addr.sll_pkttype = PACKET_OUTGOING;

        r = bind(s, (struct sockaddr*)&socket_addr,
                        sizeof(socket_addr));
    if ( r < 0) { perror("bind"); }

    void* buffer = (void*)malloc(ETH_FRAME_LEN_MY); /*Buffer for ethernet frame*/
    int length = 0; /*length of the received frame*/ 

    while(1){
        printf("1\n");
        length = recv(s, buffer, ETH_FRAME_LEN_MY, 0);
        printf("2\n");
        if (length < 0)
            {
            if (length == -EAGAIN)
                printf("non-blocking succeeded\n");
            else printf("error code %i\n", length);
            }           
        //printf ("buffer %s\n", buffer);
        print(buffer, length);
    }
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T09:34:20.043

> 当没有数据时我得到一个错误-1，但我希望得到 EAGAIN 错误。

-1 告诉你有一个错误。`errno`告诉你错误是什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T09:34:39.107

您需要检查`errno`，而不是长度值来获取套接字无法返回数据的原因。此外，`EWOULDBLOCK`除了`EAGAIN`. 改变你的while循环如下：

```
while(1)
{
    int err;
    printf("1\n");
    length = recv(s, buffer, ETH_FRAME_LEN_MY, 0);
    err = errno; // save off errno, because because the printf statement might reset it
    printf("2\n");
    if (length < 0)
    {
       if ((err == EAGAIN) || (err == EWOULDBLOCK))
       {
          printf("non-blocking operation returned EAGAIN or EWOULDBLOCK\n");
       }
       else
       {
          printf("recv returned unrecoverable error(errno=%d)\n", err);
          break;
       }
    }           
    //printf ("buffer %s\n", buffer);
    print(buffer, length);
} 
```

当然，这个无限循环会在等待数据时进入 CPU 浪费繁忙的循环。有多种方法可以通知数据到达套接字，而无需调用`recv()`自旋循环。这包括`select`和`poll`调用。

# java - 如果不为 null 或未在 Java 中设置，则赋值

> ID：15108126
> 
> 赞同：1
> 
> 时间：2013-02-27T09:12:03.023
> 
> 标签：java

我真的厌倦了做所有的*if null*检查，resp。我还想为此提供一个更可配置的场景。让我通过一个例子来解释这一点：

我有一个`getter()`可能返回`null`或`'0'`在两种情况下都返回的resp。`setter()`不应该被称为通过`getter()`。

所以实现是

```
if(getter() != null && !getter().equals('0')) setter(getter()); 
```

然而，这真的让我很烦恼，特别是如果`getter()`并且`setter()`是非常长的方法调用，我必须为此引入辅助变量。

我正在考虑一种带参数的方法

```
ifNotSet(getter(), setter(), new Object[null, '0']); 
```

它做同样的事情。ifNotSet 的参数在哪里

*   **getter** - 检查它是否不等于 **条件之一的方法**
*   **setter**`setter(getter)` -如果**条件**不适用则调用的方法
*   **conditions**`getter()` -对于要执行的方法，不得应用于评估的条件

乍一看，这似乎并不复杂，但它确实如此！有人知道这个问题的解决方案或任何类型的实现吗？

谢谢！

**更新**

在你们的反馈之后，我一直在研究这个问题，并发现了以下内容

```
 private boolean ns(Object[] condition, Object getter) {
    boolean ret = false;
    for (Object object : condition) {
        if(getter) equals or == ??
    }
    return true;
}

    Object[] cond = new Object[] { null, "0" };
    Object a;
if (ns(cond, a = getter()))setter(a); 
```

好吧，如果您有很多分配要做，这似乎至少是一个解决方案。但是，如果你看一下`ns()`方法......关于传入条件的问题是，是使用`==`还是`equals`进行比较！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:22:38.840

你可以使用这种方式

```
 public boolean checkNotNullOrZero(String s)
    {
    return (s!=null) && !s.equals("0");
    } 
```

基本用途：

```
if(checkNotNullOrZero(getter()))
{
setter(getter());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:20:50.180

你不能这样做，因为 Java 方法不是一等公民。您可以使用反射或匿名类，但这将是更多的工作。

如果 null 和 zero 总是等价的，`getter`那么是否可以将其更改为仅返回两者之一？

如果 null 和 zero 总是等价的，`setter`那么是否可以将其更改为将两者归一化？

你能创建一个方法`isNullOrZero(x)`然后你就可以拥有

```
if (!isNullOrZero(getter())) {
  setter(getter());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:30:00.017

在 Java 中这样做的丑陋方式：

```
public interface Getter {
    public Object get();
}

public interface Caller {
    public void call();
}

public void callIfNotNull(Getter getter, Caller caller, Object[] nullObjects) {
    Object value = getter.get();
    for(Object nullObject : nullObjects) {
        if(value==nullObject) {
            return;
        }
    }
    caller.call();
} 
```

用法：

```
callIfNotNull(new Getter() {
        @Override
        public Object get() {
            return getterMethod();
        }
    }, new Caller() {
            @Override
            public void call() {
                setter();
            }
        }, new Object[]{null, '0'});
    } 
```

您可能需要实施健全的方法来检查空对象并给出合理的名称。

就个人而言，我不会采用这种方法。我会尝试实现[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)来解决问题。

# android - 如何将数据从android应用程序发送到asp.net webservices

> ID：15108128
> 
> 赞同：1
> 
> 时间：2013-02-27T09:12:07.617
> 
> 标签：android, asp.net, send

我开发了一个 android 应用程序，现在我想通过单击提交按钮从我的 android 应用程序发送数据，该数据将在 asp.net 网站上打印

请为 android 应用程序和 asp.net 网站提供示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:15:40.407

在提出任何问题之前，您应该搜索一些示例……您可以通过这个示例[如何使用 SOAP 在 Android 中调用 Web 服务](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

您也可以使用 JSON 来完成，请参阅[示例](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

# php - 存储到数据库中 - 问题

> ID：15108129
> 
> 赞同：1
> 
> 时间：2013-02-27T09:12:10.123
> 
> 标签：php, mysql, image, pdo

我目前正在处理图像上传脚本，但是在尝试将图像的详细信息存储到数据库时遇到了一个小问题。上传表单抓取图像，检查其详细信息并获取图像的扩展名。这工作正常，但它不会将图像路径存储到数据库中。

这是有问题的代码的一部分：

```
 $file_path = 'images/profile/' . substr(md5(time()), 0, 10) . '.' . $file_extn;
        echo $file_path;

        try {
            $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
            $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
            $sql = "UPDATE user SET img=$file_path WHERE userID = $username";
            $stmt = $con->prepare( $sql );
            $stmt->bindValue( "file_path", $this->file_path, PDO::PARAM_STR );
            $stmt->execute();

            if ( $stmt->rowCount() > 0 ) {
            echo ('Complete');
            }
            else {
            echo ('Error');
            }
            }catch( PDOException $e ) {
            return $e->getMessage();
        }
 } 
```

现在我有“echo $file_path;”的原因 必须确保值正确传递，它们就是这样。

如果上传图像，它目前会回显：images/profile/f1b4edb293.jpg

所以一切都很好，只是在实际存储时失败了。

现在为了进一步测试，我什至从 file_path 变量中删除了字符串和路径详细信息，并在其中添加了一个虚拟值，例如：

```
 $test = "test";
    $file_path = $test; 
```

果然，它工作并将测试插入数据库。

所以这让我相信这种格式存在问题：

```
 $file_path = 'images/profile/' . substr(md5(time()), 0, 10) . '.' . $file_extn; 
```

关于其中哪一部分阻止它保存到数据库的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:15:27.017

使用此代码

```
$sql = "UPDATE user SET img=:file_path WHERE userID = :username";
$stmt = $con->prepare( $sql );
$stmt->bindValue( ":file_path", $file_path, PDO::PARAM_STR );
$stmt->bindValue( ":username", $username, PDO::PARAM_STR );
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:25:07.303

您正在将 PHP 字符串注入您的 SQL 代码，从而生成不带引号的 SQL 字符串（并打开您的脚本以进行 SQL 注入）：

```
$file_path = 'images/profile/' . substr(md5(time()), 0, 10) . '.' . $file_extn;
$sql = "UPDATE user SET img=$file_path WHERE userID = $username"; 
```

如果你`var_dump($sql)`，你会看到你正在生成无效的 SQL。（我想知道为什么没有抛出异常。）

但是，我们稍后会看到：

```
$stmt->bindValue( "file_path", $this->file_path, PDO::PARAM_STR ); 
```

所以我猜您*知道*准备好的语句，但是您将占位符语法（`:file_path`或`?`）与 PHP 的字符串插值（`$file_path`）混淆了。同样，您应该得到一个异常，因为您绑定了一个不存在的参数：-？

此外，您同时拥有`$file_path`和`$this->file_path`。其中一个可能是错字。

你需要替换这个：

```
$sql = "UPDATE user SET img=$file_path WHERE userID = $username";
$stmt = $con->prepare( $sql );
$stmt->bindValue( "file_path", $this->file_path, PDO::PARAM_STR ); 
```

... 有了这个：

```
$sql = "UPDATE user SET img=:file_path WHERE userID = :username";
$stmt = $con->prepare( $sql );
$stmt->bindValue("file_path", $file_path, PDO::PARAM_STR );
$stmt->bindValue("username", $username, PDO::PARAM_STR ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:48:20.937

你不需要像'$newfile'这样的文件路径吗？

```
 $sql = "UPDATE user SET img='$file_path' WHERE userID = '$username'"; 
```

值得一试 ？

# ruby-on-rails - 添加删除链接在复杂的嵌套形式中不起作用

> ID：15108130
> 
> 赞同：0
> 
> 时间：2013-02-27T09:12:12.657
> 
> 标签：ruby-on-rails, nested-forms

我正在尝试从嵌套模型轨道创建一个复杂的形式。项目和任务是我拥有的两种形式。任务属于项目。项目有很多任务。

我的表单创建成功，两个模型之间的关系显示正确​​。我可以销毁项目，它会删除与项目相关的任务。当我尝试使用 javascript 删除任务并将任务添加到项目时，就会出现我的问题。链接创建成功，表单成功加载到浏览器中，我可以毫无问题地提交表单，但是当我单击“删除”或“添加”链接时没有任何反应。

日志中没有任何内容，浏览器中没有错误消息。这是我的 application.js 和 application_helper.js 和表单。

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.all
//= require_tree .
function remove_fields(link) {
    $(link).previous("input[type=hidden]").value = "1";
    $(link).up(".fields").hide();
}
function add_fields(link, association, content) {
    var new_id = new Date().getTime();
    var regexp = new RegExp("new_" + association, "g")
    $(link).up().insert({
        before: content.replace(regexp, new_id)
    });
} 
```

application_helper.js

```
module ApplicationHelper
    def link_to_remove_fields(name, f)
        f.hidden_field(:_destroy) + link_to_function(name, "remove_fields(this)")
    end

    def link_to_add_fields(name, f, association)
        new_object = f.object.class.reflect_on_association(association).klass.new
        fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
            render(association.to_s.singularize, :f => builder)
        end
        #link_to_function(name, h("add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")"))
        link_to_function(name, "add_fields(this, '#{association}', '#{escape_javascript(fields)}'')")
    end
end 
```

_form.html.erb

```
 <p>
     <%= f.label :name, "Name" %>
     <%= f.text_field :name %> <br />
     <%= f.label :description, "Description" %>
     <%= f.text_field :description %> <br />
     <%= f.label :project_id, "Project ID" %>
     <%= f.text_field :project_id %> <br />
     <%= f.label :id, "ID" %>
     <%= f.text_field :id %>
  </p>

  <h3> Tasks for Project </h3>
    <%= f.fields_for :tasks do |builder| %>
      <%= render 'task', :f => builder %>
    <% end %>
    <p><%= link_to_add_fields "Add Task", f, :tasks %>
    <p><%= f.submit "Submit" %></p>

<% end %> 
```

_task.html.erb

```
<div class="fields"> 
    <%= f.label :name, "Name" %>
    <%= f.text_field :name %></br >
    <%= f.label :description, "description" %>
    <%= f.text_area :description, :rows => 3 %><br />
    <%= link_to_remove_fields "remove", f %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:53:19.080

当您使用 jquery 时，您应该使用原型函数来`parent()`代替，`up()`并将. 所以你的 javascript 代码看起来像：`insert()``append()`

```
function remove_fields(link) {
  $(link).previous("input[type=hidden]").val(1);
  $(link).parent(".fields").hide();
}
function add_fields(link, association, content) {
  var new_id = new Date().getTime();
  var regexp = new RegExp("new_" + association, "g")
  $(link).parent().append(content.replace(regexp, new_id));
} 
```

但是如果你不想自己写所有这些乱七八糟的东西，你可以使用[nested_form gem](https://github.com/ryanb/nested_form)。对于复杂的形式来说，它真的是很好的宝石。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:45:07.560

首先，您忘记在 link_to_add_fields 行中结束您的 < p >

然后，您的 jQuery 版本可能未正确执行以下行。

```
$(link).up().insert({
    before: content.replace(regexp, new_id)
}); 
```

为确保没有问题，请尝试将这一行写在 line_to_add_field 之前

并将前 3 行更改为

```
$('#task_attributes').append(content.replace(regexp, new_id)); 
```

如果这不起作用，请更新您的第一条消息以显示“link_to_add_field”rails 函数的生成代码。

# xml - xmlstarlet 更新值没有任何反应

> ID：15108132
> 
> 赞同：5
> 
> 时间：2013-02-27T09:12:14.347
> 
> 标签：xml, bash, xmlstarlet

我有一个xml文件

```
<?xml version="1.0"?>
<preferences>
    <!--General options-->
    <options>
            <dbHost>localhost</dbHost>
            <dbUser>bwserver</dbUser>
            <dbPass>bwserver</dbPass>
            <dbPort>3306</dbPort> 
```

如何更新值 dbUser？

当我输入

```
xmlstarlet edit --update '/preferences/options/dbUser/'  --value 123 preferences.xml 
```

什么都没发生。我只在终端中看到文件内容。xml文件没有被触及。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T11:29:36.883

你有两个错误：

1.  您的 XPath 表达式无效。删除尾部斜杠，使其变为`/preferences/options/dbUser`
2.  默认情况下 xmlstarlet 不会更改输入文件，而是在标准输出中输出结果。您可以通过将输出重定向到输入文件（或任何其他文件）来将原始文件替换为 xmlstarlet 输出，`xmlstarlet edit --update '/preferences/options/dbUser' --value 123 preferences.xml > preferences.xml`也可以使用全局选项`--inplace`将输入文件替换为输出（而不是将其打印到标准输入）。命令是`xmlstarlet edit --inplace --update '/preferences/options/dbUser' --value 123 preferences.xml`

键入`xmlstarlet edit --help`以获取更多信息

# facebook - Facebook Graph API：获取所有朋友的点赞

> ID：15108133
> 
> 赞同：2
> 
> 时间：2013-02-27T09:12:19.000
> 
> 标签：facebook, facebook-graph-api

我并不特别喜欢用“me/friends”获取朋友列表，然后遍历列表以获得“%id%/likes”的特定朋友的喜欢——这需要很长时间。

有没有办法在单个 API 调用中批量查询用户朋友的喜好？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:07:57.167

您可以使用 FQL 多查询一次获取所有信息，方法如下：

```
{
"friends":"SELECT name, uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())",
"friendsLikes":"SELECT uid, page_id FROM page_fan WHERE uid IN (SELECT uid FROM #friends)",
"pages":"SELECT page_id, name FROM page WHERE page_id IN (SELECT page_id FROM #friendsLikes)"
} 
```

您可以在[http://developers.facebook.com/tools/explorer/](http://developers.facebook.com/tools/explorer/)
中进行测试。 您将依次获得三个结果集、朋友列表、他们所有喜欢的列表以及页面名称列表。
（请注意，查询可能需要一段时间才能执行，因此您可能希望在第一行放置一个 LIMIT。在**uid1 = me()**之后放置一个**LIMIT 5**例如，用于测试...）

然后以您使用的任何语言/平台将其包含在您的代码中，例如在 iOS 上：http: [//developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/](http://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-22T15:14:42.353

您还可以使用 Graph API 执行相同的查询：

[https://graph.facebook.com/me/friends?fields=name,id,likes.limit(100).fields(id,name)&limit=100](https://graph.facebook.com/me/friends?fields=name,id,likes.limit(100).fields(id,name)&limit=100)

这将解决分组问题。

# image-processing - 查找图像每条线的斜率（角度）

> ID：15108138
> 
> 赞同：3
> 
> 时间：2013-02-27T09:12:25.270
> 
> 标签：image-processing, edge-detection, hough-transform

我必须计算图像每条可检测线的斜率（或角度）。如果可能的话，甚至可以检测线斜率的变化。我已经执行了 2D Fourier，并且我知道每个区域（64x64px 的集合）的邻域平均角度。我什至尝试了霍夫变换，但 sobel 和 prewitt 边缘检测似乎都不能正确检测到这些线。

请注意，有些线是相互交叉的，有些不是笔直的。

有没有一种方法可以检测每条线的斜率？或者检测这些线以执行有用的霍夫变换？

如果您需要完整的图像，我可以将其上传到某个地方。

[图片](http://i56.tinypic.com/2uohto8.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:50:34.090

问候阿达梅克，

我希望现在还不算晚。这里有一些快速的想法：

1）第一步使用 Hough trafo 检测线条是一个好主意 2）第二步将是某种标签，以真正知道有哪些线条。最难解决的问题可能是如何确定行的开始和结束并分离可能连接的行。在这种情况下搜索标签关键字，应该会给出一些结果。3) 之后，有了终点和起点，我会 a) 如果您在进一步分析中需要更准确的数据，我会为每条线计算一条回归线 b) 只需通过 f(x)=mx+n 计算斜率和截距，其中 m 是斜率和 n 截距。给定 2D 中的两个点，这很容易做到，如下所示：

```
slope = (yRight - yLeft)/(xRight - xLeft);
m_oIntercept = ((yLeft - slope*xLeft) + (yRight - slope*xRight))*0.5; 
```

并且不要忘记在之前测试 (xRight-xLeft) < eps 以避免零除法。

希望有帮助，G。

# sockets - socket编程和Http编程的区别

> ID：15108139
> 
> 赞同：131
> 
> 时间：2013-02-27T09:12:30.833
> 
> 标签：sockets, network-programming

socket编程和Http编程有什么区别？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-02-27T10:48:33.253

HTTP 是一种应用程序协议。这基本上意味着 HTTP 本身不能用于向/从远程端点传输信息。相反，它依赖于底层协议，在 HTTP 的情况下是 TCP。

![在此处输入图像描述](../Images/42c1f169934de304f6b4031f5266fc1f.png)

如果您有兴趣，可以阅读有关[OSI 层的更多信息。](http://en.wikipedia.org/wiki/OSI_model)

另一方面，套接字是大多数操作系统提供的能够与网络通信的 API。套接字 API 支持从传输层到下层的不同协议。

这意味着如果您想使用 TCP，您可以使用套接字。但是您也可以使用套接字通过 HTTP 进行通信，但是您必须根据 HTTP 规范 ( [RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html) ) 对消息进行解码/编码。由于这对于大多数开发人员来说可能是一项艰巨的任务，因此我们还在我们的开发人员框架（如 .NET）中准备好了客户端，例如类`WebClient`或`HttpWebRequest`类。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-27T09:18:00.223

使用 HTTP，您可以使用高级 HTTP 协议（​​在套接字之上工作）。它是无会话的，这意味着您`GET google.com`在连接关闭后发送文本请求并接收文本或二进制数据作为回报（在 HTTP 1.1 中持久连接可用）

MSDN 示例：

```
public static void Main (string[] args)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create (args[0]);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse ();

    Console.WriteLine ("Content length is {0}", response.ContentLength);
    Console.WriteLine ("Content type is {0}", response.ContentType);

    // Get the stream associated with the response.
    Stream receiveStream = response.GetResponseStream ();

    // Pipes the stream to a higher level stream reader with the required encoding format. 
    StreamReader readStream = new StreamReader (receiveStream, Encoding.UTF8);

    Console.WriteLine ("Response stream received.");
    Console.WriteLine (readStream.ReadToEnd ());
    response.Close ();
    readStream.Close ();
} 
```

使用套接字，您可以进入较低的级别并实际控制连接并发送/接收原始字节。

例子：

```
var remoteEndpoint=new IPEndPoint(IPAddress.Loopback, 2345);
var socket = new Socket(remoteEndpoint.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
socket.Connect(remoteEndpoint);
socket.Send(new byte[] {1, 2, 3, 4}); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-12-04T16:31:20.060

> **HTTP 连接**
> 
> *   HTTP 连接是在套接字上运行的协议。
> *   HTTP 连接是网络连接的更高层次的抽象。
> *   使用 HTTP 连接，实现会处理所有这些更高级别的细节，只需发送 HTTP 请求（一些标头信息）并从服务器接收 HTTP 响应。
> 
> **插座连接**
> 
> *   套接字用于在系统之间传输数据。它只是将两个系统连接在一起，IP 地址是机器在基于 IP 的网络上的地址。
> *   使用套接字连接，您可以为两个系统之间的网络连接设计自己的协议。
> *   使用 Socket 连接，您需要处理 TCP/IP 连接的所有底层细节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-23T07:42:48.117

为了使两个端点能够相互通信，它们都应该遵循一组规则。在计算机中，这些规则集称为协议。

例如，对于像浏览器这样的端点和像 Web 服务器这样的端点，它们都应该遵循一组称为 http 的规则或协议，以便能够通信和交易信息。所以在万维网和这种通信中，只有那些基于这个http协议的人才能成功地相互交谈。

套接字只是一个端点。它可以遵循 http 协议作为请求页面的客户端在 www 中进行通信，也可以充当侦听连接的服务器。或者它可以遵循另一组规则或协议，如 ssh、ftp 并以其他方式进行通信。

现在在套接字编程中，您可以创建一个套接字，将其绑定到一个 IP 地址和一个端口号以充当端口号，并根据您想要使用的通信告诉它遵循 http、ssh、ftp 或您想要的任何内容插座为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-13T05:42:22.010

HTTP 编程或 HTTP 请求用于松散耦合和**平台中立的语言技术** 通信，其中套接字编程用于系统具有**语言**规范协议的情况

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-12T17:18:10.417

Socket编程是一种中间件，位于应用层和TCP层之间。它能够承载应用层中存在的任何东西；甚至是 HTTP 数据。

# javascript - jquery验证复选框或输入字段

> ID：15108142
> 
> 赞同：0
> 
> 时间：2013-02-27T09:12:40.510
> 
> 标签：javascript, jquery, jquery-validate

我有一个可以发送消息的表单，用户需要从复选框中选择组或手动输入组名。现在我想验证这个表单，如果用户没有选中任何复选框或在文本字段中插入任​​何值，这个表单就不能提交。

下面是我的表单，这是我的[jsfiddle](http://jsfiddle.net/ruslyrossi/SNb2V/)（已经验证 textarea）。

```
<form action="" method="post" name="myform" id="myform">

   <input type="checkbox" name="group_list[]" value="1" />Group 1<br />
   <input type="checkbox" name="group_list[]" value="1" />Group 1<br />
   <input type="checkbox" name="group_list[]" value="1" />Group 1<br />
   <input type="checkbox" name="group_list[]" value="1" />Group 1<br />

   <input type="text" name="manual_group" value="" placeholder="Group Name" /><br />

   <textarea name="message" placeholder="Your Message"></textarea> <br />

   <input type="submit" name="submit" value="Send Message" />

</form> 
```

用户需要在提交前选中其中一个复选框或插入组名。所以问题是如何为该规则创建条件？

*请记住，如果我不选中其中一个复选框但在其中键入一些名称，则此表单仍然可以提交`manual_group`，如果我不键入任何名称但选中复选框，此表单也可以提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:37:04.450

您可以通过在文本框上设置一个规则来实现这一点，即只有在没有选中任何复选框时才需要它。这使用将[函数作为参数的所需规范](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-callback)的类型。

```
rules: {
    manual_group: {
        required: function () {
            return $('[name=group_list\\[\\]]:checked').length === 0;
        }
    }
} 
```

您需要做的另一件事是在更改复选框或文本框时强制重新验证。我已经这样做了，

```
$('form input').on('click focusin focusout keyup', function () {
    $('form').validate().form();
}); 
```

完整的脚本在下面，[在这个小提琴中](http://jsfiddle.net/wJnFn/)

```
$(function () {

    $("form").validate({
        rules: {
            manual_group: {
                required: function () {
                    return $('[name=group_list\\[\\]]:checked').length === 0;
                }
            }
        },
        messages: {
            manual_group: "Please check a checkbox or fill in this field"
        },
        submitHandler: function () {
            alert('form ok');
        }
    });

    $('form input').on('click focusin focusout keyup', function () {
        $('form').validate().form();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:18:40.967

参考你的小提琴

您可以以与您为消息添加的验证相同的方式添加它

例如

```
"group_list[]": {required:true}... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:22:13.563

可能这会奏效

```
 $("#submit").click(function(){
        if($('#myform input:checked').length >= 1 || $("#manual_group").val() !=""){
           return true  ;
        }
       return false;   
    } 
```

# php - 防止 SQL 注入和 XSS 攻击

> ID：15108143
> 
> 赞同：0
> 
> 时间：2013-02-27T09:12:41.543
> 
> 标签：php, codeigniter, xss, sql-injection

下面这个函数能防止**XSS攻击**和**sql注入**吗？

```
require_once('security.class.php');
function secure_data($data) {
    $data = mysql_real_escape_string($data);
    $filtered_data = filter_var($data, FILTER_SANITIZE_STRING);
    $secure_class = new security_class();
    $clean_data = $secure_class->xss_clean($filtered_data);         
    return $clean_data;
} 
```

***安全**类来自codeigniter 。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T09:19:01.950

您不应该像这样尝试“蛮力”安全性 - 在每条数据上一个接一个地分层所有这些不同的过滤器/转义是愚蠢的，实际上可能会使转义*无法*按预期工作。

这是因为为一种转义添加的字符类型可能会被另一种删除。你也可能会过度逃避。

相反，您应该使用特定于您实际尝试执行的转义函数：

*   在将值放入 SQL 查询之前，先运行它们`mysqli_real_escape_string()`（或者更好的是，通过 MySQLi/PDO 使用准备好的语句）。
*   在将值回显到 HTML 响应之前，请通过 HTML 转义和/或 XSS 清理运行它们。
*   等等。

# lucene - 在 lucene 4 中计算没有索引的术语向量

> ID：15108144
> 
> 赞同：1
> 
> 时间：2013-02-27T09:12:42.073
> 
> 标签：lucene, indexing

我正在将我的代码从 Lucene 3.5 迁移到 Lucene 4.1，但是在没有索引的情况下获取术语向量时遇到了一些问题。

问题是，给定一个文本字符串和一个`Analyzer`，我需要计算术语向量（从技术上讲，找到术语及其频率 tf）。显然，它可以通过编写索引（使用`IndexWriter`）然后读回（使用`IndexReader`）来实现，但我认为这会很昂贵。此外，我不需要文档频率（df）。因此，我认为无索引的解决方案是合适的。

在 Lucene 2 和 3 中，用于上述目的的一种简单技术是使用`QueryTermVector`which extends`TermFreqVector`并具有一个构造函数，该构造函数带有一个字符串和一个 Analyzer。不幸的是，`QueryTermVector`（连同`TermFreqVector`）已在 Lucene 4 中被删除，而且迁移文档似乎没有提到任何关于`QueryTermVector`.

您在 Lucene 4 中有解决此问题的方法吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:31:37.773

如果您只需要知道术语/频率，您可以直接从分析器中获取单个标记（您可以通过对它们进行计数来获取 TF，例如使用 Map 或 Multiset）。

这就是你在 Lucene 4.0 中的做法：

```
TokenStream ts = analyzer.tokenStream(field, new StringReader(text));
CharTermAttribute charTermAttribute = ts.addAttribute(CharTermAttribute.class);

while (ts.incrementToken()) {
    String term = charTermAttribute.toString();
    //term contains your token
} 
```

# scheme - 如何改进 Racket 中的这个辅助功能？

> ID：15108146
> 
> 赞同：0
> 
> 时间：2013-02-27T09:12:43.437
> 
> 标签：scheme, racket, htdp

我正在使用 BSL 语言在 HtDP 第 4 章中工作。

我正在处理的问题是：

> 练习 136：如果你运行 main，按下空格键（开枪），然后等待很长一段时间，镜头从画布上消失。但是，当您关闭世界画布时，结果是仍然包含这个不可见镜头的世界。
> 
> 设计一个替代的 tock 函数，它不仅在每个时钟周期移动一个像素，而且还消除了那些坐标将它们放在画布上方的镜头。提示：您可能希望考虑为递归 cond 子句设计一个辅助函数。

我想出的解决方案如下（在剧透中）。但是，我觉得我在做一些多余的事情。基本上我对辅助功能的应用不太正确。

```
(define (main w0)
  (big-bang w0
            (on-tick ticking)
            (on-key fire-key)
            (to-draw to-render)))

(define HEIGHT 100)
(define WIDTH 80)
(define TURRET-X-POS (/ WIDTH 2))
(define BKGRND (empty-scene WIDTH HEIGHT))
(define SHOT-IMG (triangle 4 "solid" "red"))

(define (to-render w0)
  (cond
    [(empty? w0) BKGRND]
    [else (place-image SHOT-IMG TURRET-X-POS (first w0) (to-render (rest w0)))]))

(define (fire-key w0 ke)
  (cond
    [(key=? ke " ") (cons HEIGHT w0)]
    [else w0]))

(define (ticking w0)
  (cond
   [(empty? w0) empty]
   [(empty? (only-inbound-shots w0)) empty]
   [else (cons (sub1    (first (only-inbound-shots w0))) 
               (ticking (rest  (only-inbound-shots w0))))]))

(define (only-inbound-shots w0)
  (cond      
    [(< (first w0) -4) (rest w0)]
    [else w0])) 
```

**更新：（**
这比以前干净多了）

```
(define HEIGHT 100) ;height of scene
(define WIDTH 80)   ;width of scene
(define TURRET-X-POS (/ WIDTH 2)) ;position of turret, ie. shot's x-coordinate
(define BKGRND (empty-scene WIDTH HEIGHT)) ; scene itself
(define SHOT-IMG (triangle 4 "solid" "red")) ;image representing the shot
(define Y-BOUNDARY -4) ;y-coordinate where shot is no longer visible in scene

;List-of-numbers -> List-of-numbers
;renders all shots fired
(define (to-render w0)
  (cond
    [(empty? w0) BKGRND]
    [else (place-image SHOT-IMG TURRET-X-POS (first w0) 
                       (to-render (rest w0)))]))

;List-of-numbers, key event -> List-of-numbers
;only allows the space bar to fire a shot
;one space bar event produces one shot
(define (fire-key w0 ke)
  (cond
    [(key=? ke " ") (cons HEIGHT w0)]
    [else w0]))

;List-of-numbers -> List-of-numbers
;during each clock tick, the y-coordinate each of the shot 
;                                      in List-of-numbers is updated
;each y-coordinate decreases by -1
(define (ticking w0)
  (cond
    [(empty? w0) w0]
    [else (only-inbound-shots (update-shots w0) Y-BOUNDARY)]))

;List-of-numbers -> List-of-numbers
;does the actual updating of the shots in List-of-numbers
;each shot's value is decreased by -1
(define (update-shots w0)
  (cond
    [(empty? w0) w0]
    [else (cons (sub1 (first w0)) (update-shots (rest w0)))]))

;List-of-numbers -> List-of-numbers
;checks to see if the first shot in the List-of-numbers has gone past the Y-BOUNDARY
;if so then remove shot from the List-of-numbers and return the rest of the List
;otherwise return the List without change
(define (only-inbound-shots w0 y-boundary)
  (cond
    [(empty? w0) w0]
    [(< (first w0) y-boundary) (rest w0)]
    [else w0]))

;List-of-numbers -> List-of-numbers
;creates the world of shots
;seed value is empty, additional values created by space bar
(define (main w0)
  (big-bang w0
            (on-tick ticking)
            (on-key fire-key)
            (to-draw to-render))) 
```

**TESTS**补充说：
我仍在进行测试。

```
(define test-shots
  (cons -6 (cons -5 (cons 10 empty))))

(define test-shots-2
  (cons -6 (cons 2 (cons 7 empty))))

(define test-shots-3
  (cons 4 (cons 9 (cons 10 empty))))

(check-expect (to-render test-shots) 
  (place-image SHOT-IMG TURRET-X-POS -6
    (place-image SHOT-IMG TURRET-X-POS -5
      (place-image SHOT-IMG TURRET-X-POS 10
        BKGRND))))

(check-expect (to-render test-shots-2) 
  (place-image SHOT-IMG TURRET-X-POS -6
    (place-image SHOT-IMG TURRET-X-POS 2
      (place-image SHOT-IMG TURRET-X-POS 7
        BKGRND)))) 
```

**添加了世界功能的**测试：****

 **```
(define HEIGHT 1) ; makes test a little faster

(check-expect
  (fire-key 
    (ticking 
      (ticking 
        (ticking 
          (ticking 
            (fire-key 
              (ticking 
                (ticking 
                  (ticking 
                    (ticking (fire-key empty " "))))) 
            " "))))) 
    " ")
  (cons -3 (cons 1 empty)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T09:55:01.397

*   关于缺失合同、目的声明和数据定义的常见评论适用于此。以及个别功能的测试；world.ss/universe.ss 是非常好的库的一个重要原因是它们使人们能够*测试*在概念上执行输入/输出的函数。

*   我从代码中推断出很多关于您的数据定义的内容，但是（1.）您不应该将责任推给读者，并且（2.）这可能会导致我的推理出现错误。

*   在我看来，您的定义明显偏离了模板`ticking`；它看起来不像我能想到的任何模板。类似的评论适用于`only-inbound-shots`

*   您可能希望分解`ticking`为多个子例程，然后组合它们。

    我的意思的一个例子：如果你要创建一个函数来取一个数字列表的平均值，一个简单的方法是创建两个新函数：第一个产生数字的总和，然后第二个产生列表的长度；这些通过设计配方编写起来很简单。然后`average`是：

    ```
    ;; average : [Listof Number] -> Number
    ;; produces average value of input (x_1 x_2 ... x_n
    (define (average l)
      (/ (sum-of-list l) (length-of-list l))) 
    ```

    但是，如果您尝试`average`在模板之后的单个定义中执行此操作，则在`[Listof Number]`获得正确答案时会遇到一些问题。（我认为不使用一两个蓄能器就无法正确完成。）

    *分解成非常简单的子程序，然后在最后组合它们以获得所需的效果，这就是我所说的分解*然后*`ticking`组合碎片的意思。（如果你不解构你的输入，函数组合是一个完全有效的设计过程：见[HtDP 3.1 节](http://htdp.org/2003-09-26/Book/curriculum-Z-H-6.html#node_sec_3.1)。）*

**   不过，更重要的是，我认为是对各个功能进行一些测试。特别是`only-inbound-shots`：我建议你自己考虑这个功能。

    *   假装你不知道谁会调用它，只知道他们会遵守它的契约（例如，他们只会传入一个 World，无论你定义为什么）。
    *   然后确保您为他们提供**的任何可能的法律意见**提供正确的答案。
    *   不要*考虑*如何在上面的其他代码中*自己*使用它，因为您不想同时将所有这些都放在脑海中。在这里概括起来实际上*更简单*`only-inbound-shots`，并考虑对任何可能的输入应该做什么。*

 *为了给您提供一些关于测试问题的具体思考，这里有一些假设的图片，描述了您可能在测试中尝试处理的输入：

![两个球 一个在上面](../Images/4a29c88cff1ba481a9f270669234b0e5.png), ![三球二低](../Images/f22ea53a42cffefb745dafa538d3d108.png),![三个球，两个高](../Images/f76f67fb4f071b00575cb2822f361349.png)

* * *

2013 年 2 月 28 日更新：

虽然我仍然建议为每个功能编写单独的单元测试，但端到端测试也很重要。在这种情况下，当前渲染的游戏不会告诉您是否有镜头位于场景之外（因为`place-image`与 say 不同`overlay`，它会自动从渲染中裁剪它们）。

因此，如果您想在游戏运行时对其进行调试，那么获取此类信息会很有用。就像在游戏顶部呈现的下拉文本一样（人们经常在视频游戏中看到这一点，以向您展示帧速率等内容）。因此，这是在游戏运行时获取该信息的一种策略：交换另一个渲染函数，该函数位于您现有的渲染函数之上，但会打印出有关 world`w0`参数的其他信息。

（在这种情况下，查看它的长度可能很有用，尽管可以想象提取其他信息。）

```
;; List-of-numbers -> Image
;; Renders w0 via to-render, with a printout of shot count in top left corner.
(define (to-render-with-count w0)
  (place-image/align (text (number->string (length w0)) 30 'blue)
                     0 0 "left" "top"
                     (to-render w0))) 
```

然后你加入`to-render-with-count`你的`big-bang`调用。减慢时钟滴答率也可能很有用，这样您就可以看到击键和时钟滴答混合时会发生什么，所以我也做了这个改变（在`on-tick`子句中）：

```
(define (main w0)
  (big-bang w0
            (on-tick ticking 0.1)
            (on-key fire-key)
            (to-draw to-render-with-count))) 
```

现在，我可以交互式地注意到有趣的趋势。产生这种情况的趋势：

![148 个球，但它们在哪里？](../Images/747bfb0e2d72bb3ad5afcafe3ac70494.png)

为什么屏幕上有 148 个球，但只显示了 4 个？什么样的世界会发生这样的事？（如果你关闭由 创建的窗口`big-bang`，它会将当前世界返回到交互窗口，所以你会在那里确切地看到什么样的世界会发生这种情况。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:36:08.987

我把最终答案放在这里是因为最初的问题已经发生了很多事情。

> ```
> (define HEIGHT 200) ;场景高度
>  (define WIDTH 80) ;场景宽度
>  (define TURRET-X-POS (/ WIDTH 2)) ;炮塔的位置，即。镜头的 x 坐标在哪里
>  (define BKGRND (empty-scene WIDTH HEIGHT)) ; 场景本身
>  (define SHOT-IMG (triangle 4 "solid" "red")) ;代表镜头的图像
>  (define Y-BOUNDARY -4) ;镜头在场景中不再可见的y坐标
>  
>  ;数字列表 -> 数字列表
>  ;渲染所有射击
>  （定义（渲染 w0）
>    （条件
>      [（空？w0）BKGRND]
>      [else (place-image SHOT-IMG TURRET-X-POS (first w0) (to-render (rest w0)))]))
>  
>  ;数字列表，关键事件 -> 数字列表
>  ;只允许空格键开枪
>  ;一个空格键事件产生一击
>  （定义（火键 w0 ke）
>    （条件
>      [(key=?ke " ") (cons HEIGHT w0)]
>      [否则 w0]))
>  
>  ;数字列表 -> 数字列表
>  ;每时钟滴答更新世界状态
>  （定义（勾选 w0）
>    （条件
>      [（空？w0）w0]
>      [else (remove-outbound-shots (update-shots w0) Y-BOUNDARY)]))
>  
>  ;数字列表 -> 数字列表
>  ;更新所有镜头
>  （定义（更新镜头 w0）
>    （条件
>      [（空？w0）w0]
>      [else (cons (sub1 (first w0)) (update-shots (rest w0)))]))
>  
>  ;数字列表 -> 数字列表
>  ;从列表中删除所有超出 y 边界的镜头
>  (define (remove-outbound-shots w0 y-boundary)
>    （条件
>      [（空？w0）w0]
> 
>      [(< (first w0) y-boundary) (remove-outbound-shots (rest w0) y-boundary)]
>      [else (cons (first w0) (remove-outbound-shots (rest w0) y-boundary))]))
>  
>  ;数字列表 -> 数字列表
>  ; 创造镜头世界
>  ;种子值为空，空格键创建的附加值
>  （定义（主 w0）
>    （大爆炸 w0
>              （滴答滴答）
>              (on-key fire-key)
>              （绘制到渲染）））
>  
> ```

**测试：**

```
(define test-shots-1
  (cons 1 (cons 4 (cons 10 (cons -6 (cons -5  (cons 1 (cons 4 (cons 10 (cons 10 (cons -6 (cons -9 empty))))))))))))

(define test-shots-4
  (cons 10 (cons -6 (cons -5  (cons 1 (cons 4 (cons 10 empty)))))))

(check-expect (remove-outbound-shots test-shots-4 -4) (list 10 1 4 10))
(check-expect (remove-outbound-shots test-shots-1 -4) (list 1 4 10 1 4 10 10)) 
```***

# php - 第一个表单未显示在循环中，而其他表单显示

> ID：15108147
> 
> 赞同：2
> 
> 时间：2013-02-27T09:12:45.540
> 
> 标签：php, html, forms, loops

我正在处理现有的应用程序。我遇到了一个奇怪的问题。这是我的循环。

```
<tbody>
<?php if($results->num_rows > 0 ): ?>
    <?php foreach ($results->result() as $row1): ?>            
        <tr>
            <td class="td_data"><a href="<?php echo site_url('campaign/search/customer_name/'.$row1->customer_name)?>"><?php echo $row1->customer_name; ?></a></td>
            <td class="td_data"><?php echo $row1->postcode; ?>&nbsp;</td>
            <td class="td_data"><a href="<?php echo site_url('campaign/search/company/'.$row1->company);?>"><?php echo $row1->company; ?></a></td>
            <td class="td_data"><?php echo $row1->enquiry_status; ?></td>                
            <td class="td_data"><?php echo $row1->form_source; ?></td>
            <td class="td_data"><?php echo anchor('customer/edit/' . $row1->customer_id, 'Edit'); ?></td>
            <td class="td_data">
                <a href="javascript:;" id="member_login_link<?php echo $row1->customer_id?>">Login</a>
                <?php $action   =   $this->config->item('front_site_url').'members/login';?>
                <form id="member_login<?php echo $row1->customer_id?>" action="<?php echo $action;?>" method="post" >
                    <input type="hidden" name="username" value="<?php echo $row1->username?>"/>
                    <input type="hidden" name="password" value="<?php echo $row1->password?>"/>
                    <input type="hidden" name="submitted" value="yes" />
                </form>
                <script type="text/javascript">
                    $('#member_login_link<?php echo $row1->customer_id?>').click(function(){
                        $('#member_login<?php echo $row1->customer_id?>').submit();
                    });
                </script>
            </td>
        </tr>
    <?php endforeach; ?>
<?php else: ?>
     <tr>
        <td class="td_data">No Record Found</td>
    </tr>
<?php endif; ?>
</tbody> 
```

这将创建一个列表。并检查元素显示这一点。

这是萤火虫的结果，除了第一个元素外，它在所有元素上都很好。

![在此处输入图像描述](../Images/e00ff64d5e7cb593ec4831e404a52e9b.png)

这是第一行结果

![在此处输入图像描述](../Images/f912bfa9a9e056996c028489f74d13fc.png)

我无法理解为什么会这样。我检查了不同的浏览器并且都有相同的问题。

编辑：

正在生成的这个列表在每一行都有表格。单击登录会打开一个选项卡并询问用户名和密码。但是第一行没有表单标签，所以它不是开始标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:11:38.313

I have found the issue. A form closing tag was not written in header for Search functionality. so it was picking the first form closing tag and the form opening tag in the list was left to be hanged so it was not working.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-11-01T08:57:59.503

在 foreach 循环内的主表单标签之前使用空表单标签，然后 foreach 循环将删除第一个空表单标签，并且功能将正常工作。例如：

```
<div>
    <form></form>
    <form id="member_login<?php echo $row1->customer_id?>" action="<?php echo $action;?>" method="post" >
        <input type="hidden" name="username" value="<?php echo $row1->username?>"/>
        <input type="hidden" name="password" value="<?php echo $row1->password?>"/>
        <input type="hidden" name="submitted" value="yes" />
    </form>
</div> 
```

# css - 文本未对齐中心，左

> ID：15108151
> 
> 赞同：0
> 
> 时间：2013-02-27T09:12:56.103
> 
> 标签：css

再会

我有一个糟糕的 CSS 日。我有 3 列 div（水平，这就是我使用浮点数的原因），但我想将我的文本对齐在中心，但在包含列 div 的左侧。

HTML：

```
 <div id="footer">
        <div class="footerColumn">
            <ul>
                <li><a>Contact Us</a></li>
                <li><a>Home</a></li>
                <li><a>Emergency Numbers</a></li>
            </ul>
        </div>
        <div class="footerColumn">
            <ul>
                <li><a>Support</a></li>
                <li><a>Privacy Policy</a></li>
                <li><a>Terms of Use</a></li>
                <li><a>Careers</a></li>
            </ul>
        </div>
        <div class="footerColumn">
            <ul>
                <li><p><a>login</a></p></li>
                <li><a>Sign Up</a></li>
            </ul>
        </div>
        <div style="clear: both;"></div>

 </div> 
```

CSS：

```
#footer {
    width: 960px;
    margin: 0 auto;
    padding: 10px;
    background: url('/images/bg2.png') repeat-x center;

    border-top: 6px solid #f3911f;
    background: #1b1d21;
}
    #footer div.footerColumn {
        position: relative;
        float: left;
        width: 33%;
        margin: 0 auto;
        text-align: justify;
    }
    #footer div.footerColumn ul li {

    }
    #footer ul li a{
        color: #fff;           
        font-family: Arial, sans-serif;
        font-size: 14px;
        text-decoration: none;
        cursor: pointer;       
    }
    #footer div.disclaimer {
        color: #ccc;
        font-family: verdana, Arial, sans-serif;
        font-size: 12px;

    } 
```

看我[的小提琴](http://jsfiddle.net/DvXzB/46/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:07:30.113

您无法`<ul>`在设计中将元素居中的原因是元素将父宽度`<li>`拉伸到 100%，因此无法使用。`<ul>``margin: 0 auto`

相反，我建议你使用`display: inline-block`你的`<ul>`- 允许它只拉伸到内部内容（子`<li>`元素）的宽度，而不是包含元素的 100% 宽度。

至于 children `<li>`，您可以将它们设置为显示为块元素，将它们浮动到左侧然后清除左侧浮动，因此强制每个浮动元素从新行开始（因为您清除了每个元素的左侧浮动） .

只需实现以下建议的样式：

```
#footer ul {
    display: inline-block;
    overflow: hidden;
}
#footer ul li {
    display: block;
    float: left;
    clear: left;
}
#footer ul li a{
    color: #fff;
    font-family: Arial, sans-serif;
    font-size: 14px;
    text-decoration: none;
    cursor: pointer;       
} 
```

在这里检查小提琴;）[http://jsfiddle.net/teddyrised/DvXzB/48/](http://jsfiddle.net/teddyrised/DvXzB/48/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:15:15.517

`text-align:center`在您的 footerColumn div 中使用。

```
 #footer div.footerColumn {
        position: relative;
        float: left;
        width: 33%;
        margin: 0 auto;
        text-align: center;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:18:45.527

```
#footer div.footerColumn {
    position: relative;
    float: left;
    width: 33%;
    margin: 0 auto;
    text-align: center; /*new here*/
}
#footer div.footerColumn ul {
float: left; /*new here*/
} 
```

# android - android - 解析来自服务器的 JSON 响应时出错

> ID：15108158
> 
> 赞同：0
> 
> 时间：2013-02-27T09:13:17.393
> 
> 标签：android, json

我会尽量简短，如果有不清楚的地方，请询问。我从 vk.com（一个大型社交网络，以防有人不知道）获取用户的音频列表。响应如下所示：

```
 {"response":[{
  "aid":"60830458","owner_id":"6492","artist":"Noname","title":"Bosco",
  "duration":"195","url":"http:\/\/cs40.vkontakte.ru\/u06492\/audio\/2ce49d2b88.mp3"},
  {"aid":"59317035","owner_id":"6492","artist":"Mestre Barrao","title":"Sinhazinha",
  "duration":"234","url":"http:\/\/cs510.vkontakte.ru\/u2082836\/audio\/
  d100f76cb84e.mp3"}]} 
```

通常它要长得多，因为用户可以在他的个人资料上拥有数百甚至数千首曲目。艺术家和标题也可以包含西里尔字母，这就是我在解析器中使用 UTF-8 的原因。我对 JSON 不是很熟悉，我正在尝试使用以下内容解析响应：

```
 public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

public JSONParser() {

}

public static JSONObject getJSONFromUrl(String url) {

    try {

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();          

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;

}
  } 
```

但是应用程序崩溃并出现 IllegalArgumentException 异常（索引 0 处的方案中的非法字符）：

```
02-27 10:37:35.870: E/AndroidRuntime(21038): FATAL EXCEPTION: main
02-27 10:37:35.870: E/AndroidRuntime(21038): java.lang.RuntimeException: Unable to resume activity {com.vadim.android.vk_player/com.vadim.android.vk_player.MainActivity}: java.lang.IllegalArgumentException: Illegal character in scheme at index 0: {"response":[{"aid":191819427,"owner_id":13590837,"artist":"Buena Vista Social Club","title":"El Cuarto de Tula","duration":445,"url":"http:\/\/cs548.userapi.com\/u361189\/audios\/b8c6a3bdb0bb.mp3","lyrics_id":"1133390"},{"aid":191477921,"owner_id":13590837,"artist":"Buena Vista Social Club","title":"Hasta Siempre Comandante Che Guevara","duration":193,"url":"http:\/\/cs4515.userapi.com\/u7198823\/audios\/5fafa2136e16.mp3","lyrics_id":"2876258"},{"aid":190900891,"owner_id":13590837,"artist":"Slade","title":"Oh la la in L.A.","duration":229,"url":"http:\/\/cs4962.userapi.com\/u9811745\/audios\/ed7445d38bef.mp3"},{"aid":188976833,"owner_id":13590837,"artist":"PR-MEX","title":"У Билли Гейтса","duration":126,"url":"http:\/\/cs5002.userapi.com\/u4693819\/audios\/a1899ebb7716.mp3","lyrics_id":"5201762"},{"aid":186998450,"owner_id":13590837,"artist":"The Best Latino Dance","title":"2Sweet-Bomba Latina","duration":213,"url":"http:\/\/cs4341.userapi.com\/u49441496\/audios\/788cd8243842.mp3"},{"aid":186486990,"owner_id":13590837,"artist":"001 Track No05 Latin music 9","title":"001 Track No05 Latin music 9","duration":226,"url":"http:\/\/cs4341.userapi.com\/u25293142\/audios\/277e46d451d4.mp3"},{"aid":185813300,"owner_id":13590837,"artist":"Латино ?? ","title":" Самбо","duration":190,"url":"http:\/\/cs4206.userapi.com\/u2183525\/audios\/678fe97a8700.mp3","lyrics_id":"4944025"},{"aid":185805191,"owner_id":13590837,"artist":"Дженифер Лопес","title":"Латино","duration":212,"url":"http:\/\/cs4220.userapi.com\/u33799853\/audios\/685f4bc7024d.mp3","lyrics_id":"3985793"},{"aid":185355131,"owner_id":13590837,"artist":"Latino","title":"Afa-Na-Na","duration":174,"url":"http:\/\/cs548.userapi.com\/u406078\/audios\/5e771c6958c4.mp3","lyrics_id":"8840070"},{"aid":185167860,"owner_id":13590837,"artist":"Batuka-Latino_StepMIX(137bpm)","title":"demo","duration":232,"url":"http:\/\/cs4863.userapi.com\/u43189860\/audios\/b6a08490146a.mp3","lyrics_id":"10200160"},{"aid":185143167,"owner_id":13590837,"artist":"Pr, Mex","title":"Ставил Windows программист","duration":130,"url":"http:\/\/cs4246.userapi.com\/u3476823\/audios\/75161ed38448.mp3","lyrics_id":"2012814"},{"aid":185141056,"owner_id":13590837,"artist":"Antony Melnyk, Sergiy Tykhanskyy ","title":"Debugging Song","duration":234,"url":"http:\/\/cs6126.userapi.com\/u42350435\/audios\/f83f20d8d754.mp3","lyrics_id":"36053942"},{"aid":185141033,"owner_id":13590837,"artist":"админ","title":"чистый дос","duration":173,"url":"http:\/\/cs4429.userapi.com\/u9853602\/audios\/2b77464f9193.mp3"},{"aid":184547392,"owner_id":13590837,"artist":"Geri Halliwell","title":"Mi chico latino (samba)","duration":194,"url":"http:\/\/cs5057.userapi.com\/u8186180\/audios\/67119f2af914.mp3"},{"aid":184022338,"owner_id":13590837,"artist":"Elena Paparizou","title":"My number one","duration":176,"url":"http:\/\/cs1092.userapi.com\/u830723\/audios\/25552d1f7e40.mp3","lyrics_id":"6640643"},{"aid":183519519,"owner_id":13590837,"artist":"Latino - Samba - Elena Paparizou","title":"Gigolo","duration":203,"url":"http:\/\/cs4405.userapi.com\/u3609345\/audios\/5255ecdda950.mp3","lyrics_id":"7216473"},{"aid":183219402,"owner_id":13590837,"artist":"David Bisbal ","title":" Llorare las penas (самба)","duration":260,"url":"http:\/\/cs5003.userapi.com\/u32245826\/audios\/fe718c40aed1.mp3"},{"aid":183110662,"owner_id":13590837,"artist":"Juanes","title":"La soledad","duration":193,"url":"http:\/\/cs4615.userapi.com\/u400878\/audios\/40abd9dcb4f5.mp3","lyrics_id":"7753114"},{"aid":180455728,"owner_id":13590837,"artist":"Guns N' Roses","title":"Sweet Child O' Mine","duration":356,"url":"http:\/\/cs5125.userapi.com\/u1412326\/audios\/1fc190388445.mp3","lyrics_id":"5582681"},{"aid":180317426,"owner_id":1359083 
```

任何想法我做错了什么以及解析给定格式响应的正确方法是什么？有很多应用程序使用相同的 API，所以 JSON 是正确的。不知道这里有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:56:01.347

```
Try to display the JSON response in JSONlint.com without this url part of :
"url": "http:\/\/cs510.vkontakte.ru\/u2082836\/audio\/
  d100f76cb84e.mp3"

You will find, the response will be validated properly.

I think there is some space characters present in the url part (between audio\/ and d100f76cb84e.mp3) which is coming from response:
"url": "http:\/\/cs510.vkontakte.ru\/u2082836\/audio\/
  d100f76cb84e.mp3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:39:24.737

非法参数异常在读取时出现在 JSON 案例中。由于这些网址，所以无效的 json。同样为下一次通信，将 logcat 作为文本 pls。

# android - android gcm推送通知是否有限制

> ID：15108159
> 
> 赞同：4
> 
> 时间：2013-02-27T09:13:23.643
> 
> 标签：android

android gcm推送通知有限制吗？

实际上，我收到消息说您的 GCM 订阅已过期，设备 ID：.......

我只发送了 1000 条消息。

现在如何使用相同的发件人和应用程序再次注册相同的设备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:44:34.577

不，正如@Pals 指出的那样没有限制，但[每封邮件的收件人数量是有限制的](http://developer.android.com/training/cloudsync/gcm.html#multicast)。您一次可以向 1000 个用户发送消息，因此如果您有更多用户，则必须从服务器多次发送消息，但每次发送给不同的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:53:05.670

你的第一个问题：没有限制。

您的第二个问题：与 IOS 不同，在 android 中，registration_id 会因某种原因过期。（例如重新安装应用程序）为了安全起见，您应该在每次应用程序启动时将 id 更新到您的推送服务器。

# tree - 树语法属性 $text 不起作用

> ID：15108161
> 
> 赞同：0
> 
> 时间：2013-02-27T09:13:27.300
> 
> 标签：tree, antlr, grammar

anltr 3.4 树语法属性$text问题

```
parser grammar:
additiveExpression 
    :   multiplicativeExpression
        (   
            (   '+'^
            |   '-'^
            )
            multiplicativeExpression
        )* 
    ;

tree grammar:
expression
@init 
{
    $start.setOriginalText($text);//try to record source code
}
    :   ^('+' e1=expression e2=expression)
        {
            //do something
        }
    |   ^('-' e1=expression e2=expression)
        {
            //do something
        }
    ; 
```

例子：

1+1+1+1；

```
AST:
   +             $text=1+1+1+1    correct
  + 1            $text=+          wrong
 + 1             $text=+          wrong
1 1 
```

我只得到根树的正确文本，但没有得到子树的任何文本。我该怎么办？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:25:09.400

ANTLR 3 只为规则生成的 AST 的根节点设置开始和停止标记。由于您的`additiveExpression`规则包含`^`闭包内的运算符，因此该规则会产生多个根。

如果您的语法没有*重新排序*出现在 AST 中的节点，那么您可以调用[`CommonTree.setUnknownTokenBoundaries()`](http://www.antlr3.org/api/Java/org/antlr/runtime/tree/CommonTree.html#setUnknownTokenBoundaries%28%29)整个解析操作返回的根树。此方法将重新计算整个树的开始和停止标记索引，但如果您使用重写规则（取决于它们的使用方式），可能会产生奇怪的结果。

# jquery - jquery 不会针对 Firefox 上正确动态创建的元素（在 IE8 和 IE9 中工作）

> ID：15108162
> 
> 赞同：0
> 
> 时间：2013-02-27T09:13:40.140
> 
> 标签：jquery, firefox

这是动态创建的元素：

```
$("<div><form id='frmUsers'>Enter the Users you want to select seperated by comma:<br/><textarea rows='4' cols='50' name='txtUsers' id='txtUsers' class='text ui-widget-content ui-corner-all' ></textarea></form></div>").dialog({
    autoOpen: true,
    modal: true,
    minWidth: 400,
    title: 'Users Selection',
    buttons: {
        "Ok": function () {
            }
            $(this).dialog("close");
        },
        "Cancel": function () {           
        }
    }
}); 
```

创建元素并成功选择它后，它的值保持为空。我可以设置它（虽然它不会显示在页面上）但我插入的输入不会反映在任何地方。

# c++ - C ++将未知类型传递给具有抽象基础的对象

> ID：15108166
> 
> 赞同：0
> 
> 时间：2013-02-27T09:13:51.733
> 
> 标签：c++, events, abstract-class, strategy-pattern

在我[之前](https://stackoverflow.com/questions/15073694/oo-design-in-c-decorating-a-parent-object-with-unknown-types-of-child)关于抽象的问题之后，我还有另一个问题，我还有一个与在事件中设置数据有关的问题，一旦它被创建。

就目前情况而言，我可以创建任何类型的事件并毫无问题地应用它们的数据（使用策略设计模式的修改版本）。问题是我目前必须在创建事件时将其数据传递给它。

```
IEvent* newEvent = new SpeedEvent( eventID, interpolation, 50.0f ); 
```

或者

```
IEvent* newEvent = new AnimationEvent( eventID, interpolation, &newAnimation ); 
```

当我知道创建对象时的数据是什么时，这种方法很好，但是在很多情况下我不知道实例化时的数据是什么。

理想的情况是创建一个这样的新事件：

```
IEvent* newEvent = new SpeedEvent( eventID, interpolation ); 
```

然后以这种方式为其分配数据：

```
eventManager->assignData( eventID, *unknown data type* ); 
```

这样，我会让对象以自己的方式处理数据。任何有关如何解决此问题的建议将不胜感激，但是如果可以的话，我真的想避免使用模板。

我当前的数据和对象结构与我上一个问题的答案中建议的非常相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:25:50.097

您可以使用[Boost.Any](http://www.boost.org/doc/libs/1_53_0/doc/html/any.html)传输未知数据。在源站点上，您只需使用分配，在接收器站点上，您使用 any_cast 来恢复您的价值。

*编辑*一个小代码：

只需使用 boost::any 作为*未知数据类型*并将您的值（使用您的具体类型）分配给它。在您需要使用any_cast 的具体类型的一侧。

```
class EventManager {
  //...
public:
  void asignData(std::size_t eventId, boost::any value);
  boost::any getData(std::size_t eventId) const;
};

eventManager->assignData( eventId, 12);  // assignes an int
eventManager->assignData( eventId, 12.0);  // assignes an double

int value1=boost::any_cast<int>(eventManager->getData(eventID)); // gets an int
double value2=boost::any_cast<double>(eventManager->getData(eventID)); // gets a double 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:23:53.630

如果您对数据没有限制，请使用 good old`void *`作为数据类型。在具体处理程序内部转换为处理程序内部已知的正确类型。

如果您想对数据施加限制，请定义概述数据规范的接口/基础，并为每种可能的具体数据类型从其继承。将派生类型的数据发送到您的通用处理程序（接受指向基类的指针）。在处理程序内部，您可以使用为数据定义的公共接口，也可以简单地转换为具体类型。

# jquery - 单击以使用 jquery 展开按钮

> ID：15108168
> 
> 赞同：-2
> 
> 时间：2013-02-27T09:14:07.760
> 
> 标签：jquery, css

我有一个 100% 宽度但 25% 高度的谷歌地图，我希望能够单击一个将高度调整为 100% 的按钮......我该如何做到这一点并添加一些缓和它的方法所以它没有只是跳到 100%？

该按钮需要说“单击以展开”，一旦单击它应该更改为“单击以收缩” - 然后 jquery 反向工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:26:48.493

您可以使用 JQuery 及其动画功能。请参阅此 jsfiddle 以获取快速示例

[http://jsfiddle.net/z5aXz/](http://jsfiddle.net/z5aXz/)

```
 $("#go").click(function(){
    $("#block").animate({
        height: "100px"
     }, 1500 );
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:18:35.660

您将需要该`$.animate(...)` [功能](http://api.jquery.com/animate/)。

您将`click()`在按钮的处理程序中调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:22:56.417

同样的故事： [动画 Gmap 调整大小](https://stackoverflow.com/questions/9210260/jquery-animate-height-of-google-map-container)

```
var timer;

    timer = setInterval(function(){ google.maps.event.trigger(map, 'resize')}, 100);
    $("#mapcontainer").animate({height: +=200px}, 500, "linear", function(){
        timerMap = clearInterval(timer);
    }); 
```

# java - Maven 安装 - 环境变量

> ID：15108173
> 
> 赞同：0
> 
> 时间：2013-02-27T09:14:37.187
> 
> 标签：java, windows, maven

我第一次在 Windows 7 上使用 Maven 并收到此错误：

`ERROR: JAVA_HOME`设置为无效目录。

```
JAVA_HOME = "C:\Program Files\Java\jdk1.7.0_03\bin" 
```

请`JAVA_HOME`在您的环境中设置变量以匹配您的 Java 安装位置

> Java 版本“1.6.0_29” Java(TM) SE 运行时环境（构建 1.6.0_29-b11） Java HotSpot(TM) 客户端 VM（构建 20.4-b02，混合模式）

我已经在网上到处阅读了有关如何在 Windows 中为 Maven 安装正确设置变量的信息，也在这个站点上，但是，我似乎无法让我的安装工作。

这是我的设置：

系统变量：

```
JAVA_HOME

C:\Program Files\Java\jdk1.7.0_03\bin 
```

小路

```
C:\apache-maven\src\bin 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:20:10.667

那是因为您的 JAVA_HOME 不正确

设置`JAVA_HOME`为`C:\Program Files\Java\jdk1.7.0_03`

还有一些系统，maven可能仍然会抛出错误，因为如果Java目录的路径有`space`即路径之间`Program`和`Files`路径中的空间

您不妨将 java 移动到没有空格的其他路径

代替

```
C:\Program Files\Java\jdk1.7.0_03 
```

至

```
C:\Java\jdk1.7.0_03 
```

编辑

* * *

双引号 JAVA_HOME 的值也会导致这个问题

```
set JAVA_HOME="C:\Program Files\Java\jdk1.6.0" 
```

对我不起作用，但这确实：

```
set JAVA_HOME=C:\Program Files\Java\jdk1.6.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:15:54.783

设置`JAVA_HOME`为 C:\Program Files\Java\jdk1.7.0_03（无 bin）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:40:25.930

似乎这是最新版本的 Maven 的问题。我使用具有相同设置的 Maven 2.2.1，它运行没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:17:13.447

对于 JAVA_HOME 的环境变量应该是这样的 "C:\Program Files\Java\jdk1.7.0_03\" 没有 bin。请注意，您可能安装了 2 个版本的 Java。确定您要使用哪一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-03T13:52:19.807

JAVA_HOME 应该是这样 C:\PROGRA~1\Java\jdk1.7.0_03

希望这会奏效！

# internet-explorer - 网站在 IE 中无法正确呈现，但在 Firefox 和 Chrome 中正常

> ID：15108178
> 
> 赞同：-1
> 
> 时间：2013-02-27T09:14:51.800
> 
> 标签：internet-explorer, google-chrome, firefox, rendering

希望有人可以提供帮助

我们有一个使用高级主题的新网站 www.bosworthsgc.co.uk。

当我在 Chrome 和 Firefox 中查看该网站时，该网站看起来不错

然而，当在各种版本的 Internet Explorer 中查看它时，它似乎正在“拉伸”页面或图像。

如果有人可以提供任何建议，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:22:15.980

我没有看到任何错误。只是时事通讯的形式是一个大晕。其他都可以。您可能希望减少页面调用的脚本数量。有很多你不需要的未使用的 js 文件和 css 文件。如果可能，请分享任何屏​​幕截图。

# wpf - 适合名称值对的数据类型

> ID：15108180
> 
> 赞同：0
> 
> 时间：2013-02-27T09:14:55.670
> 
> 标签：wpf, data-binding

我想在我的班级中存储名称值对。我尝试了以下方法并最终遇到了以下问题；

1.  使用`NameValeCollection`：这并不成功。因为我想将此 Collection 绑定到`DataTemplate`as `ItemsSource`。我成功绑定了**名称**，但没有绑定集合中的**值**。

**模板和 XAML**

```
 <DataTemplate x:Key="MyCollectionTemplate">
    <Grid>
        <TextBlock Text="{Binding Mode=OneWay}"/>
        <TextBox Name="CValue" Text="{Binding Path=Value}"/> //did not work this binding
    </Grid>
 </DataTemplate>     

 <ItemsControl ItemsSource="{Binding MyCollection}"  x:Name="MyCollectionControl" ItemTemplate="{DynamicResource MyCollectionTemplate}" /> 
```

`MyCollection`是个`NameValueCollection.`

1.  使用`List<KeyValuePair<string,string>>`：在这种情况下，我成功绑定了键值对。但不幸的是，这只支持`OneWay`绑定。所以我也不能使用它。

请建议我一种方法来处理这个问题。我也不能用`Dictionary`。因为在 Name Value Pair 中 Key 不是唯一的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:26:56.633

为什么不创建自己的自定义类？IE

```
public class MyClass
{
    public string Key { get; set; }
    public string Value { get; set; }
} 
```

然后只需要一个列表，或者该类的可观察集合。

```
ObservableCollection<MyClass> MyCollection
{
    get;
    set;
} 
```

请注意，如果您的集合值可能会更改，则需要在 MyClass 中实现 INotifyProperyChanged。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:27:16.493

对于收藏，我建议使用[`ObservableCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668604.aspx).

名称/值对听起来很简单，因此如果您想要更改该对的名称和值的通知，您可以实现一个具有这两个属性的类并自己更改通知（例如通过[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)）并在您的集合中使用它。

您可以在`INotifyPropertyChanged`此处找到有关如何在您的类上实现的示例：
[如何：实现属性更改通知](http://msdn.microsoft.com/en-us/library/ms743695.aspx)

如果您同时执行这两项操作，您将收到有关名称/值对的添加和删除以及名称/值对的`TwoWay`绑定的更改通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:51:01.603

您可以使用类[Tuple](http://msdn.microsoft.com/en-sg/library/system.tuple.aspx)。

像

```
Tuple<string,string> t = Tuple.Create("key", "value");
string key = t.Item1;
string value = t.Item2; 
```

# jquery - 如果语句依赖于整个 url，则使用 jquery 检查确切的 url

> ID：15108185
> 
> 赞同：0
> 
> 时间：2013-02-27T09:15:09.650
> 
> 标签：jquery

我正在使用以下代码

```
if(window.location.href.indexOf("6-girl") > -1){

$("#something").show();

}

if(window.location.href.indexOf("6m") > -1){

$("#else").show();

} 
```

两种情况的网址都不同，但两个页面上都显示#something。为什么？我面临很多网址的同样问题。我只想在“6-girl”网址中显示#something，而在“6m”中显示#else。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:20:22.043

试试这样

```
var urlTocheck = window.location.href; 

var patternTocheck= /^(6-g)/ ;
var patternTocheckforMen= /^(6m)/ ;

if(patternTocheck.test(urlTocheck))
{
  show 6-girls part
}
else if(patternTocheckforMen.test(urlTocheck))
{
 //show 6m part
}
else
{
  //nothing matched
} 
```

演示：[正则表达式演示](http://jsfiddle.net/PascX/)

# fonts - 网络字体疑难解答

> ID：15108193
> 
> 赞同：0
> 
> 时间：2013-02-27T09:15:23.673
> 
> 标签：fonts, font-face, webfonts

我正在开发一个网站，我遇到了一个不寻常的问题。

我正在与 fonts.com 合作为我的网站创建 @font-face 类型。

我一直在 Firefox 中测试/预览我的工作——一切正常。

虽然在移动设备 / ipad / safari / chrome 上时，我的字体无法加载。

该网站的预览位于：

[http://www.moneyworrier.com/about/team/kearsten-james.php](http://www.moneyworrier.com/about/team/kearsten-james.php)

我可以粘贴整个 CSS，但我认为没有任何不妥之处。例如

```
.base-menu { line-height: 18px; font-family:'Arial W01 Light'; font-size:12px;} 
```

有没有人有同样的麻烦？我做错了什么吗？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:26:16.377

你在使用这个语法吗：

```
@font-face {

font-family: 'MyFontFamily';
src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
     url('myfont-webfont.woff') format('woff'), 
     url('myfont-webfont.ttf')  format('truetype'),
     url('myfont-webfont.svg#svgFontName') format('svg');
} 
```

在这里阅读更多：[http ://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:54:26.667

有趣的是，Firefox 实际上允许您使用来自 fonts.com 的 Webfonts，即使您没有在管理系统中指定域。我刚刚去了“添加和编辑域”，并意识到我确实没有为 CSS 指定一个域。添加域解决了这个问题。

# configuration - 级联：如何在配置中定义每个 map-reduce 作业？

> ID：15108196
> 
> 赞同：3
> 
> 时间：2013-02-27T09:15:30.190
> 
> 标签：configuration, cascading

我的代码如下。这是级联代码。它有8个工作。我不知道如何配置每个作业。下面的代码一起配置了 8 个作业。但我想做的是让最后一项工作减少。我想问如何识别这8个工作，以及如何分别配置它们？谢谢。

```
private static void Demo(String[] args) {
/*      Tap sourceTap = new Hfs(new TextLine(), "D:/test/file");
        Tap finalResultTap = new Hfs(new TextLine(), "D:/test/result", true);
*/
        Tap sourceTap = new Hfs(new TextLine(), args[0], SinkMode.KEEP);
        Tap finalResultTap = new Hfs(new TextLine(), args[1], SinkMode.REPLACE);
        Tap trap = new Hfs(new TextLine(), args[2], SinkMode.REPLACE);

        Pipe sourcePipe = new Pipe("sourcePipe");
        sourcePipe = getFilterPipe(sourcePipe);

        Pipe vvResultPipe = new Pipe("vvResultPipe", sourcePipe);
        vvResultPipe = getVVResultPipe(sourcePipe);

        Pipe clickResultPipe = new Pipe("clickResultPipe", sourcePipe);
        clickResultPipe = getClickResultPipe(clickResultPipe);

        Pipe stClickResultPipe = new Pipe("stClickResultPipe", sourcePipe);
        stClickResultPipe = getStClickResultPipe(sourcePipe);

        //连接3个pipe的结果
        Pipe resultPipe = new Pipe("resultPipe");
        resultPipe = new CoGroup(vvResultPipe, new Fields("vid"), clickResultPipe, new Fields("referVid"), 
                new Fields("vid", "totalVV", "referVid", "totalClick"), new LeftJoin());
        resultPipe = new CoGroup(resultPipe, new Fields("vid"), stClickResultPipe, new Fields("referVid"), 
                new Fields("vid", "totalVV", "referVid", "totalClick", "referVid2", "st1","st2","st3", "st4","st6", "st8"), new LeftJoin());
        resultPipe = new Each(resultPipe, new Fields("vid", "totalVV", "totalClick", "st1","st2","st3", "st4","st6", "st8"),
                new Identity(Fields.ARGS));

        Fields sortClickFields = new Fields("totalVV"); 
        resultPipe = new GroupBy(resultPipe, Fields.NONE, sortClickFields );
        sortClickFields.setComparators(Collections.reverseOrder());

/*      Limit limit = new Limit(200);
        resultPipe = new Each(resultPipe, limit);
*/

        JobConf conf = new JobConf();
        conf.setJarByClass(Main.class);

        //Properties properties = new Properties();
        Properties properties = AppProps.appProps().buildProperties(conf);
        properties.setProperty("user.group", "d_sdo_data");
        properties.setProperty("mapred.job.queue.name", "cug_d_sdo_data");
        properties.setProperty("mapred.fairscheduler.pool", "cug_d_sdo_data");
        properties.setProperty("cascading.tmp.dir", "/home/hdfs/cluster-data/tmp/mapred/staging/recommend_user/tmp");
        properties.setProperty("mapreduce.job.complete.cancel.delegation.tokens", "false");
        properties.setProperty("mapred.reduce.tasks", "30");
        properties.setProperty("mapred.map.tasks", "200");

        //AppProps.setApplicationJarClass(properties, Main.class);
        FlowConnector flowConnector = new HadoopFlowConnector(properties);
        FlowDef flowDef = FlowDef.flowDef()
                 .setName( "tfidf" )
                 .addSource( sourcePipe, sourceTap )
                 .addTailSink( resultPipe, finalResultTap )
                 .addTrap( "assertions", trap );
        Flow flow = flowConnector.connect(flowDef);
        flow.complete();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-04T16:03:05.433

这个问题已经三年了，但我在寻找这个解决方案时遇到了它。这是我最终得出的结论： `pipe.getStepConfigDef().setProperty("mapreduce.job.reduces", "1");` 这是在您定义了要配置的步骤之后进行的。

请注意，这适用于 Hadoop 2.6.4 - 如果您使用的是`mapred.reduce.tasks`属性。看这里：

[https://hadoop.apache.org/docs/r2.6.4/hadoop-project-dist/hadoop-common/DeprecatedProperties.html](https://hadoop.apache.org/docs/r2.6.4/hadoop-project-dist/hadoop-common/DeprecatedProperties.html)

# ruby-on-rails-3 - Cloudmailin 在发送电子邮件时从 Heroku 获得 500

> ID：15108197
> 
> 赞同：0
> 
> 时间：2013-02-27T09:15:39.593
> 
> 标签：ruby-on-rails-3, heroku, cloudmailin

我正在使用 Cloudmailin 插件从我的 Heroku 应用程序接收电子邮件。但是，Cloudmailin 无法交付 - 或者更确切地说，它每次都从 Heroku 获得 500（因此地址是正确的）。

Heroku 日志中的错误是

```
Started POST "/incoming_mails" for 109.107.35.53 at 2013-02-27 08:54:22 +0000
2013-02-27T08:54:23+00:00 app[web.1]: Entering the controller! Controlling the e-mail!
2013-02-27T08:54:23+00:00 app[web.1]: 
2013-02-27T08:54:23+00:00 app[web.1]: NoMethodError (undefined method `[]' for nil:NilClass):
2013-02-27T08:54:23+00:00 app[web.1]:   app/controllers/incoming_mails_controller.rb:7:in `create' 
```

我的路由是正确的；“进入控制器！控制电子邮件！” 来自课程开始时的 put，因此课程肯定会进入。

```
# routes.rb
post '/incoming_mails' => 'incoming_mails#create' 
```

文件本身如下所示：

```
# /app/controllers/incoming_mails_controller.rb
class IncomingMailsController < ApplicationController
  skip_before_filter :verify_authenticity_token

  def create
    puts "Entering the controller! Controlling the e-mail!"
    Rails.logger.info params[:headers][:subject]
    Rails.logger.info params[:plain]
    Rails.logger.info params[:html]

    if User.all.map(&:email).include? params[:envelope][:from] # check if user is registered
      @thought = Thought.new
      @thought.body = params[:plain].split("\n").first
      @thought.user = User.where(:email => params[:envelope][:from])
      @thought.date = DateTime.now

      if @thought.save
        render :text => 'Success', :status => 200
      else
        render :text => 'Internal failure', :status => 501
      end
    else
      render :text => 'Unknown user', :status => 404 # 404 would reject the mail
    end
  end
end 
```

用户和思想是在其他地方使用的数据库资源，没有问题。保存过程与脚手架生成的思想控制器中的工作相同。[我从Cloudmailin Rails 3 示例](https://devcenter.heroku.com/articles/cloudmailin#receiving-email-in-ruby)中复制的`params`和`Rails.logger`逻辑。

我真的很困惑 - 我哪里错了？我真的很感激任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:46:21.040

事实证明，这就是为什么你不应该在睡眠不足的情况下编码。问题很简单：没有`params[:envelope][:from]`，只有`params[:from])`。我的假设`:from`可能`:envelope`是通过查看[第二个“Heroku 上 Rails 中的 Cloudmailin”示例中](https://devcenter.heroku.com/articles/cloudmailin#receiving-email-in-ruby)的模式形成的，其中用于记录主题的代码是`Rails.logger.log params[:envelope][:subject]`.

[在阅读“原始” Cloudmailin 格式的 API 文档](http://docs.cloudmailin.com/http_post_formats/original/)后，我意识到这是错误。我一开始就没有找到/寻找这个资源真是太愚蠢了。

修复此问题后，代码仍然无法正常工作，因为`User.where(:email => params[:from])`只返回了一个`Relation`对象，而`User`对象是预期的。Heroku 日志中的错误如下：

```
 ActiveRecord::AssociationTypeMismatch (User(#29025160) expected,
 got ActiveRecord::Relation(#12334440)): 
```

由于只能有一个用户使用一些电子邮件，因此该修复`User.where(:email => params[:from]).first`没有副作用并且会导致正确的行为。

# jquery - Chrome中的jqgrid水平滚动条问题

> ID：15108200
> 
> 赞同：0
> 
> 时间：2013-02-27T09:15:45.053
> 
> 标签：jquery, jqgrid

在我的 jqgrid（使用 4.2.0 版）中，使用 Chrome 和 Safari 会出现水平滚动条。我像这样更改CSS：

```
.ui-jqgrid .ui-jqgrid-bdiv {
position: relative;
margin: 0em;
padding: 0;
    //overflow:auto;
overflow-x:hidden; 
overflow-y: auto;
text-align: left; 
```

}

它适用于 Safari。它也适用于 Chrome，但最后一列被截断，如果我调整页面大小，最后一列消失。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:54:10.843

我想水平滚动条的原因是您使用的旧版本的 jqGrid 中的网格宽度计算错误。所有 jqGrid 版本 < 4.3.3 都有问题。我建议您将 jqGrid 更新到当前版本。或者，您可以通过[答案](https://stackoverflow.com/a/10621951/315935)`jquery.jqGrid.src`中描述的一种方式修改您使用的版本。您可以使用任何您喜欢的最小化器来获得最小化版本。例如[Microsoft Ajax Minifier](http://ajaxmin.codeplex.com/)、[UglifyJS2](http://lisperator.net/uglifyjs/)或[Closure Compiler](https://developers.google.com/closure/compiler/)。`jquery.jqGrid.min.js``jquery.jqGrid.src`

# javascript - 使用 javascript 的 websql 删除列

> ID：15108204
> 
> 赞同：1
> 
> 时间：2013-02-27T09:15:54.687
> 
> 标签：javascript, web-sql

我正在尝试使用 javascript 删除 websql 数据库中的列。我尝试了以下但没有成功：

```
db.transaction(
    function(transaction) {           
        transaction.executeSql('ALTER TABLE log_entries DROP COLUMN name;');
    }
); 
```

其中，name 是我要从表 log_entries 中删除的列。

有人可以告诉我如何使用javascript删除websql数据库中的列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:58:00.870

在 Web SQL 中没有实现删除字段。我目前正在解决这个问题。一种方式 - 数据转储并删除表。然后使用新字段恢复表。从转储中恢复数据

# iphone - 在我的 iPhone 应用程序中存储加密密钥的位置

> ID：15108209
> 
> 赞同：1
> 
> 时间：2013-02-27T09:16:12.980
> 
> 标签：iphone, ios, security, encryption

我需要在我的 iPhone 应用程序中实施加密。我将使用[FBEncrytor](https://github.com/dev5tec/FBEncryptor)来做到这一点。但是我需要知道在哪里存储加密密钥。我只是`#define`在标题中并直接使用它吗？或将其保存在钥匙串中？或者可能在静态属性中？

通常的存储方式是什么？

# ios - Objective-C中的双指针是什么意思？

> ID：15108210
> 
> 赞同：4
> 
> 时间：2013-02-27T09:16:14.130
> 
> 标签：ios, objective-c, pointers

经过 5 年的 Java 经验后，我开始学习 Objective-C，但不了解它的一些结构。这个 Some_Object** 是什么意思？例如在这里的方法定义中：

```
- (NSString *)checkLastUpdate:(NSUInteger)loggedId   
 returnMsgs:(NSMutableArray **)returnMsgs
 {
       ....
if (returnMsgs) 
 {
*returnMsgs = NewMsgs;
}
     } 
```

它是指向指针的指针还是什么？使用它的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T09:29:34.477

它是指**针对指针的****[类型](http://en.wikipedia.org/wiki/Pointer_%28computer_programming%29)**，在 C 语言中也是如此。

**除了错误回调**之外，我认为这不是一个好的行为。例如，我们调用一个函数并需要错误信息以防函数失败：

```
- (id)handleData:(NSData *)inData error:(NSError **)outError;
{
if (inData == NULL || [inData length] == 0)
    {
    if (outError)
        *outError = [NSError errorWithDomain:kDataErrorDomain code:-1 userInfo:NULL]; 
```

我们可以这样调用：

```
NSError *error = NULL;
[self handleData:data error:&error];

if (error) {
    // Handle error 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:24:57.103

NSMutableArray ** 表示它是一个容器，可以保存包含 NSMutableArray 的引用地址，例如

```
NSMutableArray * obj1; //obj1 can store reference of a mutable array
NSMutableArray ** obj2; // can contain address of obj1 that can store reference of a mutable array 
```

您可以在不同的场景中使用它最重要的是

*   如果要从函数返回多个对象（可以是错误对象或其他对象）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:24:59.337

这里函数将双指针 NSMutableArray 作为输出参数，并期望 NSMutableArray 实例将被初始化为 nil

我认为以下是在这里使用双指针的用例，

```
-(void)functionName{  
NSMutableArray *pArray = nil;  

NSString *update = [self checkLastUpdate:[self getLoggId] returnMsgs:&pArray ];

} 
```

# angularjs - Angular 代码找不到 $resourceProvider

> ID：15108217
> 
> 赞同：3
> 
> 时间：2013-02-27T09:16:38.220
> 
> 标签：angularjs

我正在尝试从与我的 js 代码位于同一文件夹中的文件 Json.json 中检索 JSON 数组。我收到了这个错误：

错误：未知提供者：$resourceProvider <- $resource <- members <- jsonservice

我的代码如下：

```
angular.module('rdfa',[]).config(['$routeProvider', function ($routeProvider) {
    $routeProvider.when('/', {controller: RdfaCtrl});
}])
.factory('members', function($resource){
    return $resource('Json.json', {}, { query: {method:'GET', params:{File:'Json'},       isArray:true} });
})
.service('jsonservice',function(members){
    this.events=members.query();
});
function RdfaCtrl($scope,jsonservice){
    $scope.members=jsonservice.events;
} 
```

请任何人帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:23:42.040

包含 angular-resource.js 并将其指定为 angular.module 调用中的依赖项：

```
angular.module('rdfa',['ngResource']).config(['$routeProvider', function ($routeProvider) {
  $routeProvider.when('/', {controller: RdfaCtrl});
}])
.factory('members', function($resource){
  return $resource('Json.json', {}, { query: {method:'GET', params:{File:'Json'},       isArray:true} });
}) 
```

看到这个[plnkr](http://embed.plnkr.co/83WiADg9JKJjzLpGHarH/index.html)

# grails - 带有条件的 Grails 可搜索插件

> ID：15108218
> 
> 赞同：0
> 
> 时间：2013-02-27T09:16:38.987
> 
> 标签：grails, criteria, searchable

我对可搜索插件有一些疑问：

我有两个域：

```
class Ads { 
        static searchable = true 
        String fromCity 
        String toCity 
        User user 
     static constraints = { 
    } 
} 
class User { 
     String username 
     String password 
} 
```

而且我开发了自己的搜索页面，其中包含两个字段 (fromCity,toCity)。有类似的东西：

```
def listResults =  searchableService.search("NewYork","Miami") 
```

所以我想知道如何将我的搜索方法提供给 Criteria Field。

```
def srchResults = searchableService.search(??????) 
```

如果有人可以帮助我做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:15:33.830

首先，您需要在域类中定义一个可搜索的闭包。例如

```
static searchable = {
        analyzer "simple"
        only = ['firstName','uuid']
        firstName boost: 5.0
    } 
```

然后你可以搜索如下。

```
def searchResults = SomeDomain.search(textToSearch + "*" + " -(firstName: ${myName})", params) 
```

`-(firstName: ${myName})`这会从搜索结果中删除我的名字，类似地，您可以根据您的逻辑或其他字段。

默认运算符是“and”，您可以在其中修改运算符，请参见以下示例

```
defaultOperator - Either "and" or "or". Default is to defer to the global Compass setting, which is "and" if not otherwise set by you.

search("mango chutney", defaultOperator: "or")
// ==> as if the query was "mango OR chutney"
//     without the option it would be like "mango AND chutney" 
```

有关更多详细信息，请参阅文档。 [可搜索的插件文档](http://grails.org/plugin/searchable)

如果您需要任何帮助，请告诉我。

[指南针的更多帮助](http://www.compass-project.org/docs/2.2.0/reference/html/core-workingwithobjects.html) 请参阅第 12.5.1 节。查询字符串语法

# php - php以不可读的格式返回解密的字符串

> ID：15108227
> 
> 赞同：1
> 
> 时间：2013-02-27T09:17:07.630
> 
> 标签：php, encryption

我有一个应用程序，我需要将用户名转换为加密格式，然后在 php 中解密。我的加密代码运行良好。但是在 php 端解密的字符串总是包含两到三个不可读格式的附加字符。我只是不明白它从哪里获取这些附加字符？它与填充有关吗？我正在发布 android 代码和 php 代码。

**安卓端代码**：

```
public String encryptStringWithAES(String Message) throws Exception {

    String key = "123456789abcdefg";

    String iv = "1234567890123456";

    String padding = "ZeroBytePadding";

    SecretKeySpec spec = new SecretKeySpec(key.getBytes("UTF8"), "AES");

    Cipher cipher = Cipher.getInstance("AES/CBC/" + padding);

    IvParameterSpec ivspec = new IvParameterSpec(iv.getBytes());

    cipher.init(Cipher.ENCRYPT_MODE, spec, ivspec);

    byte[] array = cipher.doFinal(Message.getBytes());

    System.out.println("encrypted ARRAY LENGHT:" + array.length);

    String encoded_string = android.util.Base64.encodeToString(array, 0,
    array.length, Base64.NO_PADDING);

    System.out.println("Requested encoded string: " + encoded_string);
    return encoded_string;

} 
```

**PHP端代码：**

```
$key_for_AES='123456789abcdefg';

$iv='1234567890123456';

$message=$_POST['msg'];

$decoded_string=base64_decode($message);

$decrypted_string=mcrypt_decrypt('rijndael-128',$key_for_AES, $decoded_string,'cbc',$iv); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:33:24.037

我想你可能有字符编码问题。Android 代码使用[UTF-8](https://en.wikipedia.org/wiki/UTF-8)进行字符串编码。因此，请确保从 android 到 php 的整个数据流都使用这种编码。

我对您的具体建议是检查 php 脚本文件的编码。您还必须确定 UTF-8 编码是否带有 BOM。

编辑：

当我说“编码”时，我想到的是“[字符编码](https://en.wikipedia.org/wiki/Character_encoding)”。android中负责字符编码的代码大概是这样的：

```
key.getBytes("UTF8") 
```

我不知道您使用的是哪个编辑器，但您应该检查为您使用的 php 脚本文件设置的字符编码。确保它是 UTF-8。并使用 BOM 和不使用 BOM 进行测试，因为我不确定 andorid 使用的是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:36:29.363

我最近在 C# 和 PHP 方面有过类似的编程经验。

可能是解密后的对象包含空字符。您可以尝试剥离它们。我还从字符串的末尾去掉了回车：

```
$decrypted_string = str_replace("\0", "", $Decrypted);
$decrypted_string = str_replace("\r", "", $Decrypted);
$decrypted_string = str_replace("\n", "", $Decrypted); 
```

# bash - 如何使用shell计算字符串中的单词数

> ID：15108229
> 
> 赞同：52
> 
> 时间：2013-02-27T09:17:16.140
> 
> 标签：bash

我想使用 Shell 计算字符串中的单词数。

假设字符串是：

```
input="Count from this String" 
```

这里的分隔符是空格`' '`，预期输出是 4。输入字符串中也可以有尾随空格字符，例如`"Count from this String "`.

如果字符串中有尾随空格，它应该产生相同的输出，即 4。我该怎么做？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-27T09:19:40.953

```
echo "$input" | wc -w 
```

使用 wc -w 计算单词的数量。

或者按照 dogbane 的建议，也可以消除回声：

```
wc -w <<< "$input" 
```

如果你的 shell 不支持 <<< 你可以试试这个变体：

```
wc -w << END_OF_INPUT
$input
END_OF_INPUT 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-02-27T09:35:09.250

您不需要像这样的外部命令，`wc`因为您可以以`bash`更有效的方式执行它。

将字符串转换为数组，然后对数组中的元素进行计数：

```
$ input="Count from this String   "
$ words=( $input )
$ echo ${#words[@]}
4 
```

或者，使用`set`设置位置参数，然后计算它们：

```
$ input="Count from this String   "
$ set -- $input
$ echo $#
4 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-06T19:45:40.600

要在纯 bash 中避免副作用，请在子 shell 中执行：

```
$ input="Count from this string "
$ echo $(IFS=' '; set -f -- $input; echo $#)
4 
```

它也适用于其他分隔符：

```
$ input="dog,cat,snake,billy goat,horse"
$ echo $(IFS=,; set -f -- $input; echo $#)
5
$ echo $(IFS=' '; set -f -- $input; echo $#)
2 
```

请注意“set -f”的使用，它会在子 shell 中禁用[bash 文件名扩展](https://www.gnu.org/software/bash/manual/html_node/Filename-Expansion.html)，因此如果调用者想要扩展它应该事先完成（帽子提示 @mkelement0）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-08T15:52:03.203

尝试以下单线：

```
echo $(c() { echo $#; }; c $input) 
```

它基本上定义了`c()`函数并作为参数传递`$input`，然后`$#`返回参数中由空格分隔的元素数。要更改分隔符，您可以更改[`IFS`](https://unix.stackexchange.com/q/184863/21471)（特殊变量）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-10-21T09:48:39.110

```
echo "$input" | awk '{print NF}' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-08T19:32:11.323

我将使用 perl 单行代码（避免“无用使用 echo”）：

```
perl -lane 'print scalar(@F)' <<< $input 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-07T11:40:10.857

它是高效的外部命令免费方式，如@dogbane 的。但它适用于星星。

```
$ input="Count from *"
$ IFS=" " read -r -a words <<< "${input}"
$ echo ${#words[@]}
3 
```

如果`input="Count from *"`then`words=( $input )`将调用 glob 扩展。因此，单词数组的大小将根据当前目录中的文件数而有所不同。所以我们`IFS=" " read -r -a words <<< "${input}"`改用它。

见[https://github.com/koalaman/shellcheck/wiki/SC2206](https://github.com/koalaman/shellcheck/wiki/SC2206)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-22T11:26:39.553

```
function count_item() {
   return $#
}
input="one two three"
count_item $input
n=$?
echo $n 
```

注意：函数参数传递将空格视为分隔参数，因此 $# 有效。美元？是最近调用函数的返回值。

# javascript - 如何从 json 创建子子菜单

> ID：15108230
> 
> 赞同：0
> 
> 时间：2013-02-27T09:17:17.813
> 
> 标签：javascript, jquery, html, json, css

我从 json 文件创建了一个水平菜单。但我无法创建孩子和子孩子。当我创建管理员的孩子时，它会转到家庭的孩子。我的 javascript 文件是

```
var data = [{
    "menu":[
        {
            "MenuId":1,
            "MenuName":"Home",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":1,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":2,
            "MenuName":"New Transaction",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":2,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":3,
            "MenuName":"Portfolio",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":3,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":4,
            "MenuName":"Analytics",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":4,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":5,
            "MenuName":"Instructions",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":5,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":6,
            "MenuName":"Data Upload",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":6,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":7,
            "MenuName":"Administration",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":7,
            "ModuleId":null,
            "Menus":[
                {
                    "MenuId":8,
                    "MenuName":"Masters",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":7,
                    "SortOrder":1,
                    "ModuleId":null,
                    "Menus":[
                        {
                            "MenuId":10,
                            "MenuName":"Currency",
                            "MenuLink":"/Currencies/Index",
                            "Action":"Index",
                            "Controller":"Currencies",
                            "ParentID":8,
                            "SortOrder":1,
                            "ModuleId":null,
                            "Menus":{
                            }
                        },
                        {
                            "MenuId":11,
                            "MenuName":"Country",
                            "MenuLink":"/Countries/Index",
                            "Action":"Index",
                            "Controller":"Countries",
                            "ParentID":8,
                            "SortOrder":2,
                            "ModuleId":null,
                            "Menus":{
                            }
                        }
                    ]
                },
                {
                    "MenuId":9,
                    "MenuName":"User Management",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":7,
                    "SortOrder":2,
                    "ModuleId":null,
                    "Menus":{
                    }
                }
            ]
        }
    ]
}
];
$(function() {
for(var i = 0, j = data[0].menu.length; i<j; i++) {
    var root_menu = data[0].menu[i];
    if(root_menu.hasOwnProperty("MenuId")) {
        $("#menu").append('<li><a href="#" class="parent-menu">' + root_menu.MenuName + '</a>');
        if(root_menu.hasOwnProperty("Menus") && root_menu.Menus.length > 0) {
            $("#menu li").append("<ul class='child-list' id='menu_" + root_menu.MenuId + "'>");
            for(var n = 0, m = root_menu.Menus.length; n<m; n++) {
                var sub_menu = root_menu.Menus[n];
                if(sub_menu.hasOwnProperty("MenuId")) {
                    $("#menu_" + root_menu.MenuId).append("<li class='menu-child'><a href='#'>" + sub_menu.MenuName + "</a></li>");

                }
            }

        }
 $("#menu").append("</ul></li>");

    }
}
}); 
```

[您可以从http://jsfiddle.net/JcU4G/9/](http://jsfiddle.net/JcU4G/9/)查看我的代码，这里的孩子也有一个子孩子。我如何从 json 文件中安排子项和子项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:28:52.620

由于您正在循环并将 li 元素添加到主菜单中，因此您可以简单地使用 .last()

```
$("#menu li").last().append("<ul class='child-list' id='menu_" + root_menu.MenuId + "'>"); 
```

这会将子菜单附加到右侧的主菜单项 =)

**编辑：** 要添加另一个子菜单，请添加以下内容：

```
if(sub_menu.hasOwnProperty("Menus") && sub_menu.Menus.length > 0){
                    $("#menu_" + root_menu.MenuId + " li").last().append("<ul class='child-list' id='menu_" + sub_menu.MenuId + "'>");
                    for(var oo = 0, pp = sub_menu.Menus.length; oo<pp; oo++){
                        var subsub_menu = sub_menu.Menus[oo];
                        $("#menu_" + sub_menu.MenuId).append("<li></li>")
                    }
                    $("#menu_" + root_menu.MenuId + " li").last().append("</ul>");
                } 
```

当然，您现在必须理顺样式...以正确显示 subsub_menu 项目。这是一个小提琴，我在其中分叉了您的示例并剥离了它的样式：[jsfiddle.net/HPNkq](http://jsfiddle.net/HPNkq)

考虑到您是编程新手，我不想重写您的整个代码，而只是按照您已经编码的方式添加了一点。但是，我会通过定义一个函数来解决这样的问题，该函数对菜单级别进行分类并在项目具有子菜单时再次递归调用自身。

# android - 无法构建 PlusClient

> ID：15108235
> 
> 赞同：11
> 
> 时间：2013-02-27T09:17:32.650
> 
> 标签：android, google-plus

```
 import com.google.android.gms.common.ConnectionResult;
    import com.google.android.gms.common.GooglePlayServicesClient.ConnectionCallbacks;
    import com.google.android.gms.common.GooglePlayServicesClient.OnConnectionFailedListener;
    import com.google.android.gms.plus.GooglePlusUtil;
    import com.google.android.gms.plus.PlusClient;
    import android.os.Bundle;
    import android.app.Activity;
    import android.app.ProgressDialog;
    import android.content.Intent;
    import android.content.IntentSender.SendIntentException;
    import android.util.Log;
    import android.view.Menu;
    import android.view.View;
    import android.widget.Button;
    import android.widget.Toast;

    public class MainActivity extends Activity implements ConnectionCallbacks,
            OnConnectionFailedListener {

        private static final int REQUEST_CODE_RESOLVE_ERR = 7;
        private ProgressDialog mConnectionProgressDialog;
        private PlusClient mPlusClient;
        private ConnectionResult mConnectionResult;
        private String TAG = "GmailLogin";

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            int errorCode = GooglePlusUtil.checkGooglePlusApp(this);
            if (errorCode != GooglePlusUtil.SUCCESS) {
                GooglePlusUtil.getErrorDialog(errorCode, this, 0).show();
            } else {

                 mPlusClient = new PlusClient.Builder(this, this, this)
                 .setVisibleActivities( "http://schemas.google.com/AddActivity",
                 "http://schemas.google.com/BuyActivity").build();

                mConnectionProgressDialog = new ProgressDialog(this);
                mConnectionProgressDialog.setMessage("Signing in...");

                Button signInButton = (Button) findViewById(R.id.sign_in_button);
                signInButton.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        if (mConnectionResult == null) {
                            mConnectionProgressDialog.show();
                        } else {
                            try {
                                mConnectionResult
                                        .startResolutionForResult(
                                                MainActivity.this,
                                                REQUEST_CODE_RESOLVE_ERR);
                            } catch (SendIntentException e) {
                                // Try connecting again.
                                mConnectionResult = null;
                                mPlusClient.connect();
                            }
                        }
                    }
                });
            }

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.main, menu);
            return true;
        }

        @Override
        public void onConnectionFailed(ConnectionResult result) {
            if (result.hasResolution()) {
                try {
                    result.startResolutionForResult(this, REQUEST_CODE_RESOLVE_ERR);
                } catch (SendIntentException e) {
                    mPlusClient.connect();
                }
            }
            // Save the result and resolve the connection failure upon a user click.
            mConnectionResult = result;
        }

        @Override
        protected void onActivityResult(int requestCode, int responseCode,
                Intent intent) {
            if (requestCode == REQUEST_CODE_RESOLVE_ERR
                    && responseCode == RESULT_OK) {
                mConnectionResult = null;
                mPlusClient.connect();
            }
        }

        @Override
        public void onConnected() {
            String accountName = mPlusClient.getAccountName();
            Toast.makeText(this, accountName + " is connected.", Toast.LENGTH_LONG)
                    .show();
        }

        @Override
        public void onDisconnected() {
            Log.d(TAG, "disconnected");
        }

        @Override
        protected void onStart() {
            super.onStart();
            mPlusClient.connect();
        }

        @Override
        protected void onStop() {
            super.onStop();
            mPlusClient.disconnect();
        }

        } 
```

我无法编译这段代码，因为它说：

> PlusClient.Builder 无法解析为类型

在

```
mPlusClient = new PlusClient.Builder(this, this, this)
        .setVisibleActivities( "http://schemas.google.com/AddActivity",
        "http://schemas.google.com/BuyActivity").build(); 
```

也在`onConnected()`

我`null`得到`accountName`

```
String accountName = mPlusClient.getAccountName(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-14T14:06:42.787

如果有人仍然有这个问题： PlayClient 现在已弃用。这里描述了“新”的方式：[http ://android-developers.blogspot.com/2014/02/new-client-api-model-in-google-play.html](http://android-developers.blogspot.com/2014/02/new-client-api-model-in-google-play.html)

```
mClient = new GoogleApiClient.Builder(this)
        .addApi(Drive.API)
        .addScope(Drive.SCOPE_FILE)
        .addApi(Plus.API, plusOptions)
        .addScope(Plus.SCOPE_PLUS_LOGIN)
        .addConnectionCallbacks(this)
        .addOnConnectionFailedListener(this)
        .build(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-02T17:41:48.070

正如 Luigi04 所述，该错误是因为 PlayClient 现在已被弃用。

作为一种解决方法，我通过将 gradle 依赖项中的播放服务版本降级为 来完成这项工作`'com.google.android.gms:play-services:6.1.71'`，如此处所述： [https ://stackoverflow.com/a/27637059/2161698](https://stackoverflow.com/a/27637059/2161698)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:29:48.763

我遇到了同样的问题，问题是我使用的是旧版本的 Google Play 服务。所以请更新到最新版本。请记住，新版本已下载到 sdk 文件夹中。如果您之前已将 google-play-services 导入到您的工作区，则必须将其删除并添加新版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-10T08:01:45.943

The jar by itself cannot be use. The entire google play services lib project needs to be imported ie copied from SDK.

See step 5 of [Google+ Quickstart](https://developers.google.com/+/quickstart/android):

```
5\. Import the Google Play Services library project.

Select File > Import > Android > Existing Android Code Into Workspace and click Next.
Select Browse.... Enter <android-sdk-folder>/extras/google/google_play_services/.
Select google-play-services_lib. Click Finish to import. 
```

# php - php合并2个数组

> ID：15108236
> 
> 赞同：0
> 
> 时间：2013-02-27T09:17:32.987
> 
> 标签：php, arrays

我有 2 x 2D 数组，其中包含从数据库返回的值。

目前我正在做一个 foreach 循环并将返回的值放到每个数组的单独表中：

例如：

```
 <table>
    <tr>
      <td>Auto Bavaria Midrand BMW</td>
      <td>63</td>
      <td>39</td>
    </tr>
    ...
</table>
<table>
<tr>
  <td>Auto Bavaria Midrand BMW</td>
  <td>40</td>
  <td>15</td>
  ...
</tr>
</table> 
```

但我需要以这种格式返回值，仅在 1 个表中：

```
<table>
  <tr>
    <td>Auto Bavaria Midrand BMW</td>
    //the name of the record does not need to be repeated, only the values
    <td>63</td>
    <td>39</td>
    <td>40</td> //values from 2nd array
    <td>15</td> // values from 2nd array
  </tr>
        ...//next record set
</table>

Array
(
    [0] => Array
        (
            [DealerName] => Auto Bavaria Midrand BMW
            [dealersContacted] => 63
            [DealerContact_Y] => 39
            [DealerContact_N] => 15
            [DealerShipId] => 21730
            [DataId] => 23527
        )
     //extra returned records 
)

Array
(
    [0] => Array
        (
            [DealerName] => Auto Bavaria Midrand BMW
            [dealersContacted] => 65
            [DealerContact_Y] => 40
            [DealerContact_N] => 15
            [DealerShipId] => 21730
            [DataId] => 23527
        )

   //extra returned records 
) 
```

我可以做它的 php 方面，我的问题是是否有一个数组函数可以只合并数组的所需位？我已经搜索过，只是变得越来越困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:22:33.390

您应该在从数据库中获取数据时更改构建数组的方式，以便获得有意义的键，而不是无意义的数字索引。在上面的示例中，您可能希望`DealerName`用作键。这样，当您检索项目时，您只需将它们添加到适当的位置。例子：

```
 while($rows = fetch_from_db($res)) {
    $output[$rows['DealerName']]['dealersContacted'] = $rows['dealersContacted'];
    $output[$rows['DealerName']]['DealerContact_Y']  = $rows['DealerContact_Y'];
    // Add more keys here
 } 
```

这样，当您完成检索两个结果集时，您就只剩下一个数组了。您还应该计划如何处理双重索引，例如您的示例中的 DealersContacted。

# c# - 是否有适用于 Java（Android）或 C#（Windows Phone）的好的视频分析（检测视频中的人）库

> ID：15108239
> 
> 赞同：0
> 
> 时间：2013-02-27T09:17:34.833
> 
> 标签：c#, java, android, windows-phone

我将创建一个程序来检测视频上的**移动**物体（在这种情况下是人）。我必须选择平台 Android 或 Windows Phone 我不知道在哪个平台上编写代码会更容易。

简单我的意思是有运行的免费库，它为我提供了简单的工具来分析视频。我对 Windows Phone 有更多的经验，但我很了解 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:25:07.757

JavaCV 库可以做到这一点 它是 OpenCV 的 Java 接口 它可以检测人脸并对图像和视频进行不同的处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:28:37.120

您可以尝试 EMGU CV，它是 OpenCV 库的免费 C# 包装器。几年前我将它用于一些使用网络摄像头的运动检测方法，因此它应该能够满足您的需求。

链接：www.emgu.com

# android - 从 Android 设备连接到嵌入式蓝牙设备

> ID：15108240
> 
> 赞同：7
> 
> 时间：2013-02-27T09:17:39.717
> 
> 标签：android

我刚刚开始通过我的 Android 手机连接到嵌入式 BT 设备。它连接正常，但是当我没有正确断开连接时我遇到了问题。我的意思是首先关闭套接字，然后打开任何 i/o 蒸汽。

但是当我在设备中突然关闭我的蓝牙时，我怎么知道蓝牙正在断开连接。有什么方法可以在APP中一直接收蓝牙断开监听。

有任何想法吗 ....？谢谢

```
mmSocket= device.createRfcommSocketToServiceRecord(uuidToTry);
try
{
    mmSocket.connect();
}
catch (IOException e)
{
    mmSocket.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:19:57.700

你可以这样做——在你的代码中创建一个广播接收器像这样：

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (action.equals(BluetoothAdapter.ACTION_STATE_CHANGED)) {
            BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
            if (!mBluetoothAdapter.isEnabled()) {
                // BT is turened off.
            }
            else{
                // BT is turened on.
              }
        }
 }
}; 
```

并为以下意图过滤器注册该广播接收器：

`IntentFilter filter = new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED); registerReceiver(mReceiver, filter);`

# c++ - 在 C++ 中，类指针销毁后，我可以使用 new 函数重新利用指针吗

> ID：15108242
> 
> 赞同：0
> 
> 时间：2013-02-27T09:17:51.090
> 
> 标签：c++, class, pointers, data-structures

我只是在试验数据结构的基础知识，我对某些东西感到好奇。正如您在我的代码中看到的那样，在弄乱了`p`指针后，我决定删除它。我删除了 p 指针，我认为它也会`delete p->proximo`（葡萄牙语中的“proximo”是“下一个”）但显然没有。Acesso 3（葡萄牙语中的 Access 3）的结果是 0 22。

那么首先，如果我删除了指针，为什么我仍然可以连接到`p->proximo`指针？好的，但既然没有，这是一件好事，这意味着我现在可以删除东西了。所以后来我决定把 22 的值放到第一个 Nod 上。所以我不会在列表中有损坏的节点。正如你在第 28 行中看到的那样，我尝试使用`p = p->proximo`它。但它没有用。当然没有。我删除了指针。有什么办法可以重新创建第一个指针，这样我就可以修复列表，所以第一个节点的值是 22？我试过了

```
p = new IntNode();
p = p->proximo; 
```

但它也失败了。可能是因为现有的以下节点可能？

我非常感谢你们任何人的帮助

代码：

```
#include <iostream>
using namespace std;

class IntNode{
public:
  IntNode(){
    proximo = 0;
  }
  IntNode(int file, IntNode *next = 0)
  {
    number = file;
    proximo = next;
  }
  int number;
  IntNode *proximo;
};

int main()
{
  IntNode *p = new IntNode(15);
  cout << "Acesso 1:  " << p->number;
  p->proximo = new IntNode(22);
  cout << endl << "Acesso 2:  " << p->number << "    " << p->proximo->number;
  delete p;
  cout << endl << "Acesso 3:  " << p->number << "     " << p->proximo->number << endl;
  p = new IntNode(5);
  cout << endl << "Acesso 4:  " << p->number << "     " << p->proximo->number << endl;
  p = p->proximo;
  cout << endl << "Acesso 5:  " << p->number << "     " << p->proximo->number << endl;
  delete p->proximo;
  cout << endl << "Acesso 6:  " << p->number << "     " << p->proximo->number << endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:19:58.973

> 为什么我仍然可以连接到 p->proximo 指针？

这是未定义的行为。碰巧在之后（参见@BoPersson 评论中的[酒店房间类比](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794)`p`），所指向的内容仍然存在。但你不能依赖它。如果您想增加出现运行时错误的机会，或者让自己能够检查 的有效性，请将其设置为或（在 C++11 中）：`delete``p``NULL``nullptr`

```
delete p;
p = nullptr; 
```

接下来，当你这样做时：

```
p = new IntNode(5); 
```

`p->proximo`设置为空。这是您自己编写的代码，因此您不会感到惊讶：

```
IntNode(int file, IntNode *next = 0)
{
  number = file;
  proximo = next;
} 
```

最后，回答标题中的问题，

> 在 C++ 中，在销毁指向类的指针后，我可以使用 new 函数重新利用指针吗

是的你可以。

```
delete p;
p = someOtherPointerToIntNode; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:20:14.973

删除将释放内存。如果你跳转到这个内存位置，数据仍然会在那里——除非它被覆盖。在删除后使用它被认为是不好的做法，因为它增加了难以找到错误的机会。

# javascript - 使用 underscore.js 将两个（或更多）数组映射为一个

> ID：15108250
> 
> 赞同：10
> 
> 时间：2013-02-27T09:18:04.930
> 
> 标签：javascript, underscore.js

我需要按元素添加几个数组。也就是说，我有几个长度相等的数组，我只需要一个具有相同数量的元素，即输入之和。Underscore 具有将所有元素折叠为一个并使用函数映射每个元素的方法，但我找不到任何方法将两个数组分段组合。

如果我原来的数组是`[1,2,3,4,5,6]`，`[1,1,1,1,1,1]`结果`[2,2,2,2,2,2]`应该是`[4,5,6,7,8,9]`。

我知道我可以通过遍历数组来做到这一点，但想知道使用 underscore.js 函数是否会更容易/更快。我可以做吗？如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T09:29:33.900

更容易是，更快不是。要模拟 a `zipWith`，您可以将 a[`zip`](http://underscorejs.org/#zip)与 sum-结合使用[`reduce`](http://underscorejs.org/#reduce)：

```
var arrays = [[1,2,3,4,5,6], [1,1,1,1,1,1], [2,2,2,2,2,2]];

_.map(_.zip.apply(_, arrays), function(pieces) {
     return _.reduce(pieces, function(m, p) {return m+p;}, 0);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T09:26:30.517

我认为使用下划线不会更容易。这里有两个选项：

```
var a = [1,2,3,4,5,6]
  , b = [1,1,1,1,1,1]
  , c = [2,2,2,2,2,2];

var result = a.map(function(_,i) {
  return a[i] + b[i] + c[i];
});

// OR

var result = [];
for (var i = 0; i < a.length; i++) {
  result.push(a[i] + b[i] + c[i]);
}

console.log(result); //=> [4,5,6,7,8,9] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-13T19:49:29.747

您可以使用 lodash ( [https://lodash.com/](https://lodash.com/) ) 而不是下划线，它有一个非常酷的 zipWith ( [https://lodash.com/docs#zipWith](https://lodash.com/docs#zipWith) ) 运算符，可以像下面的示例一样工作。（注意 _.add 也是一个 lodash 数学函数）

```
var a = [1,2,3,4,5,6]
  , b = [1,1,1,1,1,1]
  , c = [2,2,2,2,2,2];

var result = _.zipWith(a, b, c, _.add);

// result = [4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:29:49.033

您可以将 zip 与 map 和 reduce 结合使用：未经测试，但类似的方法可能有效

```
var result = _.map(_.zip(array1, array2, array3),function(zipped){return _.reduce(zipped,  function(memo, num){ return memo + num; }, 0)}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-14T13:37:40.820

使用[Lodash 4](https://lodash.com/docs/4.17.11#unzip)：

```
var arrays = [
  [1, 2, 3, 4, 5, 6],
  [1, 1, 1, 1, 1, 1],
  [2, 2, 2, 2, 2, 2]
];

var result = _.map(_.unzip(arrays), _.sum);
console.log(result);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.js"></script>
```

# iphone - FBLoginView : 点击登录按钮后抛出错误

> ID：15108253
> 
> 赞同：0
> 
> 时间：2013-02-27T09:18:19.203
> 
> 标签：iphone, objective-c, facebook, loginview

我在这里有一个堆栈跟踪，但不知道出了什么问题，并且控制台屏幕上没有明显的输出。

```
> #0    0x01e1f09b in objc_msgSend ()
#1  0x00096ebf in -[FBLoginView informDelegate:] at /Users/jacl/src/release/ios-sdk/src/FBLoginView.m:292
#2  0x00097104 in -[FBLoginView observeValueForKeyPath:ofObject:change:context:] at /Users/jacl/src/release/ios-sdk/src/FBLoginView.m:340
#3  0x01847ce7 in NSKeyValueNotifyObserver ()
#4  0x018613f4 in NSKeyValueDidChange ()
#5  0x01816630 in -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] ()
#6  0x018c335a in _NSSetIntValueAndNotify ()
#7  0x0007c9ef in -[FBSession transitionToState:andUpdateToken:andExpirationDate:shouldCache:loginType:] at /Users/jacl/src/release/ios-sdk/src/FBSession.m:767
#8  0x0007b792 in -[FBSession openWithBehavior:completionHandler:] at /Users/jacl/src/release/ios-sdk/src/FBSession.m:350
#9  0x0007f2a6 in +[FBSession openActiveSessionWithPermissions:allowLoginUI:allowSystemAccount:isRead:defaultAudience:completionHandler:] at /Users/jacl/src/release/ios-sdk/src/FBSession.m:1558
#10 0x0007bff1 in +[FBSession openActiveSessionWithPublishPermissions:defaultAudience:allowLoginUI:completionHandler:] at /Users/jacl/src/release/ios-sdk/src/FBSession.m:545
#11 0x000973f9 in -[FBLoginView buttonPressed:] at /Users/jacl/src/release/ios-sdk/src/FBLoginView.m:391 
```

有人以前见过这个错误吗？当我单击 FBLoginView 中的登录按钮时会发生这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T11:14:08.660

您的问题可能是 FBLoginView 对象在消息发送给它之前被释放。在您的方案中启用“僵尸对象”以获得更清晰的输出。

如果您想要更详细的答案，请将您的代码粘贴到使用 FBLoginView 的位置。

# php - 如何使用 PHP 检测安全连接（https）？

> ID：15108258
> 
> 赞同：0
> 
> 时间：2013-02-27T09:18:31.543
> 
> 标签：php, security, ssl, https

目前，我的服务器上包含 SSL。想要强制我的用户通过 https 使用登录页面登录。

```
<?php

  if (empty($_SERVER['https']) || $_SERVER['https'] != 'on') {
    header('location: https://my_login_page');
    exit();
    }

  # rest of code
  ... 
```

但是当没有 SSL 时，这是一个问题。

现在我有情况了。用户请求以下 URL

```
http://domain.com/login.php 
```

在这里，我无法访问`$_SERVER['https']`并希望确保可以将用户重定向到

```
https://domain.com/login.php 
```

例如，SSL 证书会在一段时间后过期，并希望让用户使用不带安全连接的登录。

我的目标是这样的例子：

```
if (ssl_installed() && (empty($_SERVER['https']) || $_SERVER[] != 'on')) {
  header('location: https://domain.com/login.php');
  exit();
  }

# when there's no SSL it continues using HTTP 
```

是的，想编写函数（例如：），它在可能使用安全连接时`ssl_installed()`返回`true`，否则`false`。

我试过使用`get_headers()`并意识到它总是对`https://`链接返回错误。

**可能的解决方案：**

我已经有工作解决方案。我的数据库中的配置表包含行`ssl=1`（或 0），在建立数据库连接后，我使用这个值来决定是否可以使用 SSL，上面提到的函数使用这个值来返回结果。

我的问题是：**有没有更简单的解决方案？**

需要明确的是：**我正在寻找仅限 PHP 的解决方案（自动检测）！**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:36:45.983

您可以在配置文件中执行类似的操作，而不是编辑每个脚本。

```
<?php

// will match /login.php and /checkout.php as examples
$force_ssl = preg_match('/\/(login|checkout)\.php(.+)?/', $_SERVER['REQUEST_URI']);
$using_ssl = (isset($_SERVER['HTTPS']) && !empty($_SERVER['HTTPS']) ? true : false;

$url = $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];

if ($force_ssl && !$using_ssl) {

    // redirect to SSL
    header('Location: https://' . $url);

} elseif (!$force_ssl && $using_ssl) {

    // redirect back to normal
    header('Location: http://' . $url);

} 
```

然后，如果您的证书过期，只需在您的配置文件中设置`$force_ssl`为`false`，它就会处理以前重定向的每个脚本。

* * *

现在问题已经澄清，您可以创建一个这样的 PHP 脚本（代码取自[https://stackoverflow.com/a/4741196/654678](https://stackoverflow.com/a/4741196/654678)）

```
<?php

// get and check certificate
$get = stream_context_create(array("ssl" => array("capture_peer_cert" => TRUE)));
$read = stream_socket_client("ssl://www.google.com:443", $errno, $errstr, 30, STREAM_CLIENT_CONNECT, $get);
$cert = stream_context_get_params($read);

$valid = ($cert["options"]["ssl"]["peer_certificate"] != NULL) ? true : false;

// save validity in database or somewhere else accessible 
```

然后设置一个 crontab，或每日任务或任何每天点击该 PHP 脚本的东西。如果没有证书，它将返回 NULL 并标记为无效。用你的脚本检查有效性，你就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:23:53.330

我认为您可以使用 htaccess 解决这个问题，这两个条件可能会有所帮助

*   RewriteCond %{HTTP:X-Forwarded-SSL} on
*   RewriteCond %{HTTPS} 开启

有关更多信息，请参阅此答案：[https ://stackoverflow.com/a/1128624/1712686](https://stackoverflow.com/a/1128624/1712686)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T09:42:13.547

```
/**
 * Return true if HTTPS enabled  otherwise return false
 */
function check_ssl() {
  if ( isset( $_SERVER['HTTPS'] ) ) {
    if ( 'on' == strtolower( $_SERVER['HTTPS'] ) ) {
      return true;
    } elseif ( '1' == $_SERVER['HTTPS'] ) {
      return true;
    }
  }

  if ( isset( $_SERVER['SERVER_PORT'] )
    && ( '443' == $_SERVER['SERVER_PORT'] ) 
  ) {
    return true;
  }

  return false;
} 
```

# java - android sax 解析器处理程序

> ID：15108262
> 
> 赞同：0
> 
> 时间：2013-02-27T09:18:39.797
> 
> 标签：java, android, saxparser

我必须使用 sax 解析器开发一个 xml 解析应用程序。

我在下面的 xml 提要中遵循：

```
<root>
  <Categories>
        <Category name="Photos">
             <article articleid="4537" title="Sonam-Steals-the-Mai-Show"/>
             <article articleid="4560" title="Big-B-Croons-For-World-Peace"/>
              <article articleid="4585" title="Yami-Paints-The-Town-Red"/>
         </Category>
       <Category name="Style">
             <article articleid="266" title="Dita wows us in a sari"/>
             <article articleid="268" title="Frieda is a natural"/>
             <article articleid="269" title="Demi finds love in Jodhpur"/>
       </Category>
    </Categories>
    </root> 
```

在这里，我必须为 getter 和 setter 创建一个类：

```
public class Laptop {
            private String brand;
            private List<String> model;
          public String getBrand() {
           return brand;
             }

       public void setBrand(String brand) {
               this.brand = brand;
                }
         public List<String> getModel() {
          return model;
           }
        public void setModel(List<String> string) {
          this.model = string;
         } 
```

我的 xml 处理程序如下代码所示：

```
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    current = true;
        if (localName.equals("Category")) {
        laptop = new Laptop();
        laptop.setBrand(attributes.getValue("name"));

    }

     else if (localName.equals("article")) {
           laptop.setModel(attributes.getValue("title"));
       } 
        }

public void characters(char[] ch, int start, int length)
        throws SAXException {
    if(current)
    {
        currentValue = new String(ch, start, length);
        current=false;
    }
         }

     public void endElement(String uri, String localName, String qName)
        throws SAXException {
          current = false;
      if (localName.equals("Category")) {
          // add it to the list
          laptops.add(laptop);

      } 
    if (localName.equals("article")) {
        laptop.getModel().add(currentValue);
        } 
```

在这些行上出现以下错误：

```
 laptop.setModel(attributes.getValue("title")); 
```

**膝上型计算机类型中的方法 setModel(List) 不适用于参数 (String)**

我该如何解决该错误。请给我解决这些问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:23:55.917

该错误表示您无法将`String`实例分配给`List`实例。这是相当合理的。自从

```
public void setModel(List<String> string) {
          this.model = string;
} 
```

将 List 作为参数。

如果您想为每个笔记本电脑实例保留一篇（文章），`List`您可以尝试以这种方式进行尽可能修复`String`

```
public void setModel(String string) {
      if (this.model == null)
           this.model = new List<String>();    
      this.model.add(string);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:38:04.047

正如@blackbelt 试图解释的那样，您只能分配方法接受的值。`TextView.setText(CharSequence)`接受 a`CharSequence`所以你应该提供一个字符串，而 getModel() 返回一个字符串列表`List<String>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-14T10:27:37.667

我不是在鼓励你这样编码，但你可以避免使用模型类并将你的数据类型转换到 Handler 类中，如下所示：

```
public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        currentElement = true;
        db = new DatabaseHelper(thecontext);
        if (qName.equals("Asa.Amms.Data.Entity.User")) {
            int length = attributes.getLength();
            for (int i = 0; i < length; i++) {
                String name = attributes.getQName(i);
                if (name.equals("Id")) {
                    id = Integer.parseInt(attributes.getValue(i));
                }
                if (name.equals("Login")) {
                    LoginID = attributes.getValue(i).toString();
                }
                if (name.equals("Name")) {
                    Name = attributes.getValue(i).toString();
                }
                if (name.equals("Password")) {
                    Password = attributes.getValue(i).toString();
                }
                if (name.equals("ProgramOfficerId")) {
                    user_ProgramOfficerId = Integer.parseInt(attributes.getValue(i).toString());
                }
            }    
            db.insertUser(id, LoginID, Name, Password, user_ProgramOfficerId);
        }
} 
```

# java - 如何使用 AliasToEntityMapResultTransformer 获取订单地图？

> ID：15108267
> 
> 赞同：1
> 
> 时间：2013-02-27T09:18:48.210
> 
> 标签：java, hibernate, jboss

我用这些东西来获得一个 List>，这对于像“resultSet”这样的数据操作非常有趣。我的方法是：requeteSQL.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);

当我用 sqldevelopper 执行这个查询时，我得到了示例 | 字段 1 | 字段 2 第 1 行 | 值 1 | 价值 2

但是我的地图顺序不对？如何解决此错误？为什么我的地图按这个顺序有 Field2 = Value2, Field1 = Value1 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-23T08:29:33.887

因为它是哈希映射，你怎么能期望订单检索，如果想要订单检索请实现你自己的 ResultTransformer 它将返回 LinkedHashMap 例如

```
public class AliasToEntityOrderedMapResultTransformer extends AliasedTupleSubsetResultTransformer {

public static final AliasToEntityOrderedMapResultTransformer INSTANCE = new AliasToEntityOrderedMapResultTransformer();

/**
 * Disallow instantiation of AliasToEntityOrderedMapResultTransformer .
 */
private AliasToEntityOrderedMapResultTransformer () {
}

/**
 * {@inheritDoc}
 */
public Object transformTuple(Object[] tuple, String[] aliases) {
            /* please note here LinkedHashMap is used so hopefully u ll get ordered key */
    Map result = new LinkedHashMap(tuple.length);
    for ( int i=0; i<tuple.length; i++ ) {
        String alias = aliases[i];
        if ( alias!=null ) {
            result.put( alias, tuple[i] );
        }
    }
    return result;
}

/**
 * {@inheritDoc}
 */
public boolean isTransformedValueATupleElement(String[] aliases, int tupleLength) {
    return false;
}

/**
 * Serialization hook for ensuring singleton uniqueing.
 *
 * @return The singleton instance : {@link #INSTANCE}
 */
private Object readResolve() {
    return INSTANCE;
}
} 
```

顺便说一句，您的逻辑不应该取决于它出现在结果映射中的键的顺序。

# jquery - 使复选框导致 jQuery 验证

> ID：15108268
> 
> 赞同：1
> 
> 时间：2013-02-27T09:18:51.823
> 
> 标签：jquery, jquery-validate

我的表单中有并引导 datetimepicker，这是填充页面其余部分的必填字段。

当我使用提交按钮时，我可以设法进行验证，但是我有一个复选框，它使用 datetimepicker 中的值填充字段。

我需要该复选框以在不提交的情况下对 datetimepicker 进行验证。

我的代码看起来像这样：

```
//My datepicker
<div id="dtpDate" class="input-append" >
    <input required data-format="yyyy-MM-dd" type="text" style="width: 75%;" />
    <span class="add-on">
        <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
    </span>
</div>

//Checkbox to cause validation
<div>
    <input type="checkbox" data-bind="checked: setdate, click: setdates"/>
</div>

//My Script
$(document).ready(function () {
    $("form").validate();
});

$(function () {
    $('#dtpDate').datetimepicker({
        pickTime: false
    })
}); 
```

如何使复选框导致验证？（不提交）

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:33:20.450

编辑：这是有效的，并且已经在 jsfiddle 中进行了测试。

```
<form>
<div>
    <input required type="text" />
</div>
<div>
    <input type="checkbox" class="checkBox" />
</div>
<div>
    <input type="submit" />
</div>
</form> 
```

javascript

```
//My Script
$(document).ready(function () {

    $('.checkBox').click(function(){
        if($(this).is(':checked')){
            $('form').valid();
        }
    });
});

$(function () {
    $('#dtpDate').datetimepicker({
        pickTime: false
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:48:57.097

在调用 validate()后验证日期时间字段调用**.valid( )**

```
$(document).ready(function () {
    // initialise validation
    $("form").validate();

    // validated the datetime field on checkbox click
    $('#your_checkbox_id').click(function()
      $('#your_datetime_field').valid();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:33:59.450

用于[`.valid()`](http://docs.jquery.com/Plugins/Validation/valid)在单击复选框时验证文本字段。

**jQuery** :

```
$(document).ready(function () {

    $("form").validate({
        // your options & rules
    });

    $('#mycheck').click(function () {
        $('#myfield').valid();
    });

}); 
```

**HTML**：

```
<form>
    <input required="required" type="text" name="myfield" id="myfield" />
    <input type="checkbox" name="mycheck" id="mycheck" />
    ...
</form> 
```

**工作演示：http: [//jsfiddle.net/rzjRM/](http://jsfiddle.net/rzjRM/)**

# mysql - 按年份获取帖子，元键返回空

> ID：15108270
> 
> 赞同：0
> 
> 时间：2013-02-27T09:18:58.687
> 
> 标签：mysql, wordpress

我正在构建一个投资组合网站的 index.php，我想在其中按年份和 meta_key 显示帖子。元键用作“特色项目”选项。

一开始，我制作了一个自定义分类法“年份”，其中包含不同的项目年份作为术语，并使用 foreach 来填充年份旁边的帖子。

```
<?php $years = get_terms('year', 'orderby=name&order=desc&hide_empty=1'); ?>

<?php foreach( $years as $year ) : ?>
<div class="front-index"><p><?php echo $year->name; ?></p></div>

    <?php
    $year_query = array( 
        'post_type' => 'works', 
        'meta_key' => 'post_h2_mask', 
        'meta_value' => '1', 
        'taxonomy' => 'year', 
        'term' => $year->slug );
    $year_posts = new WP_Query ($year_query);
    ?>

<?php while ( $year_posts->have_posts() ) : $year_posts->the_post(); ?>

… 
```

这没有成功，因为术语已经具有标记某些东西的值，并且元值不适用于术语（！？）因为它仍然输出年份，即使帖子没有元值。

…</p>

所以我认为解决方案可能是使用 WordPress 自己的“发布”日期来按年份填充帖子。为此，我找到了一个 mysql 片段并进行了一些操作。

```
<?php
$years = $wpdb->get_col("
            SELECT DISTINCT YEAR(post_date) 
            FROM $wpdb->posts 
            WHERE post_status = 'publish' 
            AND post_type = 'works' 
            ORDER BY post_date DESC");
?>

    <?php foreach( $years as $year ) : ?>
    <div class="front-index"><p><?php echo $year; ?></p></div>

        <?php
        $year_query = array( 
            'post_type' => 'works', 
            'meta_key' => 'post_h2_mask', 
            'meta_value' => '1',
            'year' => $year 
            );
        $year_posts = new WP_Query ($year_query);
        ?>

    <?php while ( $year_posts->have_posts() ) : $year_posts->the_post(); ?>
    <?php       
    $attachments = new Attachments( 'attachments' );
    if( $attachments->exist() ) :       
    ?>

    <div class="front-work">
    <div class="wraptocenter">
        <a href="<?php the_permalink() ?>" rel="bookmark">
        <?php the_post_thumbnail('front-thumbnail'); ?>
        <p><?php the_title(); ?><br /><span class="image-count">
        <?php 
        $project_cats = get_the_terms($post->ID, 'medium');
        $project_cats = array_values($project_cats);

        for($cat_count=0; $cat_count<count($project_cats); $cat_count++) {

            echo '<span>'.$project_cats[$cat_count]->name.'</span>';
            if ($cat_count<count($project_cats)-1){
                echo ', ';
            }
        }
        ?>,     
        <span><?php echo $attachments->total(); ?> images</span></span></p>
        </a>
    </div>  
    </div>  

<?php endif; endwhile; ?>
<?php endforeach ?> 
```

这在他们的 div 中得到了年份，但它只显示了一个带有链接的帖子，而且这只是 2006 年的一个帖子！？

如何使用 meta_key 在他们的年度财产旁边获取帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:41:22.473

好的。

我想我这次自己搞定了。第一个问题是：

> 上面的查询返回历史中特定日期的帖子，即“X 年 X 月 X 日的帖子”。他们无法从相对于现在的时间跨度中获取帖子，因此基本查询无法使用诸如“过去 30 天的帖子”或“去年的帖子”之类的查询，并且需要使用 posts_where 过滤器完全的。下面的示例使用 posts_where 过滤器，并且对于大多数时间相关查询应该是可修改的。

通过 WordPress 法典。因此，如果您想 WP_query 特定年份，您还需要一个月。

对于 MYSQL 查询部分，我使用了从 wordpress.org 论坛找到的代码并对其进行了修改。这可能不是最好的，但对我有用。

**按年份和元值获取 WordPress 帖子的代码：**

```
<?php
$years = $wpdb->get_col("
            SELECT DISTINCT YEAR(post_date) 
            FROM $wpdb->posts 
            LEFT JOIN wp_postmeta ON wp_posts.ID = wp_postmeta.post_id
            WHERE wp_postmeta.meta_key = 'your_meta_key'
            AND wp_postmeta.meta_value = 'your_meta_vaue' 
            AND post_status = 'publish' 
            AND post_type = 'your_post_type' 
            ORDER BY post_date DESC");

    foreach($years as $year) :      
?>
    <p><?php echo $year ?></p>

    <?php
    $months = $wpdb->get_col("
                SELECT DISTINCT MONTH(post_date) 
                FROM $wpdb->posts 
                WHERE post_status = 'publish' 
                AND post_type = 'your_post_type' 
                AND YEAR(post_date) = '".$year."' 
                ORDER BY post_date DESC");

        foreach($months as $month) :
    ?>
        <?php
        $posts = $wpdb->get_col("
                    SELECT $wpdb->posts.*
                    FROM $wpdb->posts
                    LEFT JOIN wp_postmeta ON wp_posts.ID = wp_postmeta.post_id
                    WHERE wp_postmeta.meta_key = 'your_meta_key'
                    AND wp_postmeta.meta_value = 'your_meta_value' 
                    AND post_status = 'publish' 
                    AND post_type = 'your_post_type' 
                    AND MONTH(post_date) = '".$month."' 
                    AND YEAR(post_date) = '".$year."' 
                    ORDER BY post_date DESC");

            foreach($posts as $post) :
        ?>

            <!-- your specific post html & php -->

        <?php endforeach;?>
    <?php endforeach;?>
<?php endforeach;?> 
```

# iphone - 使用 XML 字符串中的特殊字符发布请求

> ID：15108271
> 
> 赞同：1
> 
> 时间：2013-02-27T09:19:01.463
> 
> 标签：iphone, ios, ipad

我写下面的代码在soap webservices中发布请求：

```
NSString *newstr = [[NSString alloc] initWithFormat:@"%@/Enki_UpperWs.asmx",[WebServices RequestURL]];
NSString *soapMsg = [[NSString alloc] initWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n"
                         "<Generate_Facility_List xmlns=\"http://tempuri.org/\">\n"
                         "<UserID>%d</UserID>\n"
                         "<LicenseKey>%d</LicenseKey>\n"
                         "<token>%@</token>\n"
                         "</Generate_Facility_List>\n"
                         "</soap:Body>\n"
                         "</soap:Envelope>",UserId,OfficeKey,strUserToken];

    soapMsg=[self getcodeforkeys:soapMsg];

    NSString *msgLength = [NSString stringWithFormat:@"%i", [soapMsg length]];
    NSURL *myURL = [[NSURL alloc] initWithString:[newstr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSMutableURLRequest *myRequest = [NSMutableURLRequest requestWithURL:myURL cachePolicy:NSURLCacheStorageAllowed timeoutInterval:500];
    [myRequest setValue:@"text/xml; charset=UTF-8" forHTTPHeaderField:@"Content-type"];
    [myRequest addValue:@"http://tempuri.org/Generate_Facility_List" forHTTPHeaderField:@"SOAPAction"];
    [myRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
    [myRequest setHTTPMethod:@"POST"];
    [myRequest setHTTPBody:[soapMsg dataUsingEncoding:NSUTF8StringEncoding]];
    NSURLConnection *con = [[NSURLConnection alloc]initWithRequest:myRequest delegate:self];
    self.connection = con;
    [con release];
    [myURL release];
    [newstr release];
    [soapMsg release];
    return [self doParsing]; 
```

但是，如果任何参数具有特殊字符，如 < Or > Or & or ' or " 并且如果我使用以下函数替换它：

```
-(NSString*)getcodeforkeys:(NSString*)str_code{
    str_code = [str_code stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"];
    str_code = [str_code stringByReplacingOccurrencesOfString:@"<" withString:@"&lt;"];
    str_code = [str_code stringByReplacingOccurrencesOfString:@">" withString:@"&gt;"];
    str_code = [str_code stringByReplacingOccurrencesOfString:@"'" withString:@"&apos;"];
    str_code = [str_code stringByReplacingOccurrencesOfString:@"\"" withString:@"&quot;"];
    return str_code;
} 
```

它也替换了 XML 字符..由于我无法以 XML 格式发布请求。我只需要替换传递的对象并保持 XML 格式不变，但是如何？？？

例如，如果我将 strUserToken 作为 @"testing<&>" 传递，那么它将替换其特殊字符，但不会替换 XML 字符串。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:39:00.473

[XML 验证](http://www.w3schools.com/xml/xml_dtd.asp)：

> 针对 DTD 验证的 XML 是“有效的”XML。

您可能想尝试其中一种方法来确保最终的 XML 有效：

1.  使用[CDATA](http://www.w3schools.com/xml/xml_cdata.asp)部分作为文本内容。
2.  单独转义文本内容（即`UserId`,`OfficeKey`在`strUserToken`您的情况下）。

* * *

1.

```
NSString *soapMsg = [[NSString alloc] initWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n"
                         "<Generate_Facility_List xmlns=\"http://tempuri.org/\">\n"
                         "<UserID><![CDATA[%d]]></UserID>\n"
                         "<LicenseKey><![CDATA[%d]]></LicenseKey>\n"
                         "<token><![CDATA[%@]]></token>\n"
                         "</Generate_Facility_List>\n"
                         "</soap:Body>\n"
                         "</soap:Envelope>",UserId,OfficeKey,strUserToken]; // the text inside CDATA is not parsed as a part of XML, it might have special characters unescaped. The parser should support CDATA though

// do not escape complete document - remove the line soapMsg=[self getcodeforkeys:soapMsg]; 
```

2.

```
NSString *soapMsg = [[NSString alloc] initWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n"
                         "<Generate_Facility_List xmlns=\"http://tempuri.org/\">\n"
                         "<UserID>%d</UserID>\n"
                         "<LicenseKey>%d</LicenseKey>\n"
                         "<token>%@</token>\n"
                         "</Generate_Facility_List>\n"
                         "</soap:Body>\n"
                         "</soap:Envelope>",
                         [self getcodeforkeys:UserId],
                         [self getcodeforkeys:OfficeKey],
                         [self getcodeforkeys:strUserToken]]; // escape text separately

// do not escape complete document - remove the line soapMsg=[self getcodeforkeys:soapMsg]; 
```

# java - 如何使用文本客户端跟踪纯文本电子邮件或参与者？

> ID：15108273
> 
> 赞同：1
> 
> 时间：2013-02-27T09:19:02.800
> 
> 标签：java, servlets, jakarta-mail

我正在实现一个自定义电子邮件跟踪系统，我将在 HTML 电子邮件中嵌入图像，当用户加载图像时，基于特定电子邮件将被跟踪为已读/打开的请求发送到服务器。

问题：如果某人收到了这封电子邮件，那么拥有纯文本电子邮件客户端的情况如何，那么可以做些什么来跟踪它？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:23:23.097

您可能无能为力，因为纯文本电子邮件没有任何可用于跟踪的活动/动态部分。

即使是信标（隐藏的图像）也是有问题的，因为大多数电子邮件程序不会正是出于这个原因加载外部内容。

这将允许垃圾邮件发送者验证他们的批量邮件是否已被实际阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:22:44.677

据我所知，当收件人不允许加载图像或具有根本不显示 HTML 的纯文本客户端时，您无法跟踪电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:43:21.300

社会工程——诱骗用户加载图像或点击特殊形成的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-13T19:43:11.980

您可以在文本版本中放置唯一链接。您将无法跟踪打开情况，但您可以跟踪纯文本点击率，从而了解文本与 HTML 的参与人数。

我找不到任何关于纯文本打开率的统计数据。我只是不知道可以跟踪。

# json - 设计数据结构

> ID：15108275
> 
> 赞同：3
> 
> 时间：2013-02-27T09:19:11.977
> 
> 标签：json, data-structures, document-database

我正在编写一个爱好 Web 应用程序。它目前将 JSON 对象发送到客户端，然后客户端将它们创建为博客文章。目前 JSON 对象如下所示：

```
{"id1": {"title": "title1", "content": "content1", ...}, "id2": {...}, ...} 
```

有时顺序开始很重要。例如，如果我想为博客文章创建随机显示顺序。目前我使用一个单独的数组`post_ids`，它看起来像`["id1", "id2", ...]`，它的值用作上面 JSON 对象的键。

显然，我的对象可能如下所示：

```
[{"id": "id1", "title": "title1", "content": "content1"}, ...] 
```

但随后我将失去按 ID 索引的能力，并且每次都需要遍历我的数据。

有时我也有一个对象，我想获取它的 ID。我可以将 ID 包含到初始对象中：

```
{"id1": {"id": "id1", "title": "title1", ...}, ...} 
```

设计包含这些 CouchDB/MongoDB 样式文档的数据结构的规范方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:20:40.833

我不相信有一种规范的方式来设计这些文档，但我知道 CouchDB 和 MongoDB 都使用相同的方法：

{“_id”：123，“title”：“title1”，“content”：“content ...”}

实体的 id 在文档内部。要返回文档列表，您只需返回一个数组：

{“帖子”：[{“_id”：123，...}，{“_id”：124，...}]}

我看到 CouchDB 经常根据他们的观点来做这件事。您会看到一个包含数组的结果，然后是该数组中的文档，每个文档中都有一个 ID。id 永远不会出现在文档之外/旁边。

我还看到了很多像你提到的轻量级索引：

{“ID”：[123、124、125，...]}

根据我的经验，这也很常见。

# asp.net-mvc-4 - 如何将 Asp.net 网站订阅到外部 Java 网络服务

> ID：15108279
> 
> 赞同：0
> 
> 时间：2013-02-27T09:19:22.070
> 
> 标签：asp.net-mvc-4, signalr

我们正在寻找将数据从 Java 网络服务广播到 Asp.NET 网站（使用 MVC4 和 .Net 4.5）的解决方案。然后这个 ASP.NET 网站将接收到的数据广播到它的所有客户端浏览器（SignalR 似乎非常有能力处理后面的部分）。Jabbr 聊天（SignalR 聊天论坛）的人建议在我的网站中设置一个控制器方法来接受发布请求，并让 Java 网络服务调用该方法来发布数据。

请建议这是否是最佳方法，或者 asp.net 网站是否可以通过其他方式订阅 Java Web 服务。

PS Asp.Net 和 Java webservice 都由内部团队维护。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:24:34.627

如果您想要实时更新（如使用 SignalR 所建议的那样），那么 .NET 应用程序应该公开一个 Web 服务，Java 应用程序应该调用该 Web 服务来通知甚至已经发生。另一种选择是定期轮询，但随后您会丢失实时通知。

# sql - 比较字符串 - 从 C# 上的 SQL 转换为存储过程

> ID：15108282
> 
> 赞同：0
> 
> 时间：2013-02-27T09:19:32.463
> 
> 标签：sql, oracle, stored-procedures

我目前正在尝试将 sql 查询转换为存储过程，但在比较字符串时我很难转换。

下面是我的 C# 应用程序上的 SQL 代码：

```
String Query = @"select label
, marking
from
(
select count(equipment) as num_equipments
from CS_PM_EQUI_INFO
where " + Perspective + " = '" + Workcenter + @"'
) 
```

以下是我尝试转换为存储过程的内容：

```
begin  
    stmt := '
    select label
    , marking
          from
    ( 
    select count(equipment) as num_equipments         
    from CS_PM_EQUI_INFO         
    where '|| perspective ||' = '||' Workcenter '||'
    ) 
```

我做得对吗？我正在尝试比较透视图和工作中心，它们都是字符串参数。示例：工作中心值为 ABC，其中透视 = 'ABC'。

请帮我解决这个问题，因为返回的结果不是我们想要的。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:33:36.433

首先，您的现有代码中存在 SQL 注入漏洞：变量的值`Workcenter`嵌入在 SQL 语句中，而您应该使用绑定变量。还`Perspective`包含列的名称，您应该确保它不包含 SQL 注入尝试（该`dbms_assert`包对此很有用）。

其次，当您选择子查询中不存在的外部查询中的列时，我不确定您现有的查询是如何工作的。

至于实际的解决方案，在 Oracle 存储过程中，您可以执行以下操作：

```
function my_func(my_column in varchar2, my_value in varchar2) return varchar2 is
  q varchar2(1000);
  return_value varchar2(1000);
begin
  q := 'select other_column from my_table where ' || my_column || ' = :my_value';

  execute immediate q into return_value using my_value;

  return return_value;
end my_func; 
```

如果`my_column`可以由最终用户指定（即，不是来自代码中的常量），那么您应该使用`dbms_assert.simple_sql_name`来断言该字符串可以安全使用。

# css - 为什么 CSS calc() 函数对我不起作用？

> ID：15108285
> 
> 赞同：23
> 
> 时间：2013-02-27T09:19:38.007
> 
> 标签：css

我了解了 CSS 函数 calc() 及其真棒。我试着像这样使用它：

```
#abc{width:calc(100%-20px)} 
```

但是这个功能的问题是它不起作用。我测试了这段代码 IE9 和 Safari，但它没有工作。

为什么它不起作用？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-27T11:41:07.140

运算符`-`必须用空格包围：

```
#abc{width:calc(100% - 20px)} 
```

引用[MDN 信息`calc()`](https://developer.mozilla.org/en-US/docs/CSS/calc)：

> 注意：`+`and`-`运算符**必须用[空格](https://developer.mozilla.org/en-US/docs/Glossary/Whitespace)**包围。例如，`calc(50% -8px)`将被解析为一个百分比后跟一个负长度——一个无效的表达式——而`calc(50% - 8px)`一个百分比后跟一个减法运算符和一个长度。同样，`calc(8px + -50%)`被视为一个长度，后跟一个加法运算符和一个负百分比。
> 
> `*`and`/`运算符不需要空格，但为了一致性而添加它是允许和推荐的。

对此的正式声明在CSS 值和单位模块第 3 级规范的[第 8.1.1节中。](http://www.w3.org/TR/css3-values/#calc-syntax)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-22T12:25:05.060

除了 Android 的原生浏览器支持之外的所有现代浏览器`calc()`，这使得它更容易采用。但请注意，它可能会对布局产生重大影响，并因此在不受支持的浏览器上破坏您的设计。

您应该将它与后备声明一起使用，这样它就不会破坏不支持它的浏览器。

```
width: 500px; /** older browsers **/ 

width: -webkit-calc(50% - 20px); /** Safari 6, Chrome 19-25 **/

width: -moz-calc(50% - 20px); /** FF 4-15  **/

width: calc(50% - 20px); /** FF 16+, IE 9+, Opera 15, Chrome 26+, Safari 7 and future other browsers **/ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T09:21:32.233

它受 IE9、IE10 和 Safari 6.0 支持（*使用`-webkit-`前缀*）。您可以在此处查看整个支持表：http: [//caniuse.com/#feat=calc](http://caniuse.com/#feat=calc)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-22T18:56:58.307

IE9 的`calc()`方法实现不适用于`display: table`.

您可以通过在它周围包裹一个 div （即`display: block`）并在`display: table`内设置元素的宽度来解决此问题`width: 100%`。您将`calc`d 宽度应用于周围`div`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-06T12:43:50.800

为了使您的功能正常工作，您需要**在 operator sign 之间留有空格**。

例如：

```
#abc{
  width: calc(100% - 20px)
} 
```

[calc() 文章](https://kolosek.com/css-calc/)提供了对该问题的进一步详细解释。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-21T14:24:49.643

首先，`+`or前后应该有空格`-`。您也可以使用`*`,`/`和组合它们。参见示例：

```
.gen {
  height: 100px;
  background-color: blue;
  border: solid 1px black;
}

.nocalc {
  width: 50%;
}

.calc {
  width: calc(100% / 4 * 2 + 50px - 40px); 
  /* 50% + 10px */
}
```

```
<div class="gen nocalc"></div>
<div class="gen calc"></div>
```

**它适用**于`display: table`，但**不适**用于`display: table-row`（行占用整个空间）并且不适用于`display: table-cell`（如果一个单元格占用整个空间；如果有多个 -**每个单元格根据其内容占用空间**）。

```
.cont-1 {
  background-color: yellow;
}

.cont-2 {
 background-color: red;
 border: solid 1px black;
}

.width-m-50 {
  width: calc(100% - 20px);
  height: 100px;
}

.tab-simple {
  display: table;
}

.tab {
  display: table;
  border: solid 1px black;
  background-color: yellow;
  width: 100%;
}

.tab-row {
  display: table-row;
}

.tab-cell {
  display: table-cell;
}
```

```
<div class="cont-1"> 
  <div class="cont-2 width-m-50"> 
    div with width: calc(100% - 20px);
  </div>
</div>

<div class="cont-1"> 
  <div class="cont-2 tab-simple width-m-50"> 
    tab with width: calc(100% - 20px);
  </div>
</div>
<h3> tab with width 100% and two cells, 1-st with width calc(100% - 20px); 2-nd without: </h3>
<div class="tab">
  <div class="tab-row"> 
      <div class="cont-2 tab-cell width-m-50"> 
        cell
      </div>
      <div class="cont-2 tab-cell"> 
        cell 
      </div>
  </div>
</div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-22T09:53:49.300

使用最新版本的*Modernizr*，您可以检查 csscalc 支持。只需使用*Modernizr.csscalc*。如果支持，此函数将返回 true，如果不支持，则返回 false。在你的情况下，你会在你的 css 中有这个：

```
#abc {  width:calc(100% - 20px); } 
```

并在您的*javascript*中（我在这里使用*jQuery*）

```
if(!Modernizr.csscalc){
    $('#abc').width($(PARENT_EL).width() - 20)
} 
```

顺便提一句。最好用类名而不是 ID 来设置元素的样式。元素的 ID 只能用于通过*javascript*定位它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-20T19:56:13.253

您需要空格，并且如果您使用预处理器格式，它可能会像这样`calc(~"100% - 20px")`，否则它可能不起作用。

# ios - 可下载内容的正确目录

> ID：15108287
> 
> 赞同：0
> 
> 时间：2013-02-27T09:19:49.377
> 
> 标签：ios

在我的应用程序今天因未遵循 iOS 数据存储指南而被 Apple 拒绝后，我对我应该实际使用哪个目录感到有些困惑。

该应用程序是一个相当基本的新闻阅读器，它在用户设备上存储缩略图和 pdf，然后所有这些都存储在`NSDocumentDirectory`. 但现在我想知道我是否应该将所有这些数据存储在里面`NSCachesDirectory`或`/tmp`

我听说`NSCachesDirectory`更新应用程序时会被清除，我宁愿不要发生这种情况，这样用户就不必再次下载所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:24:34.207

在 NSCaches 目录中。

更新时不会删除。我可以从个人经验告诉你。我存储了大量嵌套在该目录结构中的资源，包括 plist、图像和 PDF。

# python - Python + Django + Virtualenv 导入 django.core 失败

> ID：15108289
> 
> 赞同：4
> 
> 时间：2013-02-27T09:19:49.510
> 
> 标签：python, django, path, virtualenv

我在 Windows 7 上使用 Python 2.7.3。我已将 PATH 设置为`C:\python27`原始 python 二进制路径。

首先，我制作了一个名为“django”的新 Virtualenv，没有任何选项，

```
virtualenv django 
```

二、激活Virtualenv，

```
c:\workspace\py-envs\django\Scripts\activate 
```

三、使用pip安装Django，

```
pip install django 
```

第四，`django-admin.py startproject SOME_NAME`就像下面那样执行。

`django.core`然后，我在导入包时遇到了问题。

失败的

```
(django) c:\workspace\python>django-admin.py startproject a
(django) c:\workspace\python>python django-admin.py startproject a
(django) c:\workspace\python>c:\py-envs\django\Scripts\python django-admin.py startproject a 
```

错误信息

```
Traceback (most recent call last):
  File "C:\workspace\py-envs\django\Scripts\django-admin.py", line 2, in <module>
    from django.core import management
ImportError: No module named django.core 
```

工作过

```
(django) c:\workspace\python>python c:\py-envs\django\Scripts\django-admin.py startproject a 
```

已选中

*   `django-admin.py`存在于`c:\py-envs\django\Scripts\`
*   virtualenv`C:\py-envs\django\Scripts\`在 PATH 中添加了一行（使用 echo %PATH% 检查）
*   `pip freeze`结果只显示 Django==1.5

我想使用第一个命令开始一个项目：

```
python django-admin.py startproject a 
```

我还能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T21:02:58.797

**在虚拟环境**（virtualenv）下，唯一的默认调用方式`django-admin`是通过`django-admin.py`.

以下作品：

*   `django-admin.py startproject PROJECT_NAME`,

以下没有：

*   `django-admin startproject PROJECT_NAME`,
*   `python django-admin startproject PROJECT_NAME`,
*   `python django-admin.py startproject PROJECT_NAME`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T12:53:52.747

这是因为 windows python 解释器总是使用全局解释器而不是当前的 python virtualenv 解释器。

示例：
C:\python27\python.exe # windows 总是使用它

而不是这个

C:\envs\my_env\Scripts\python.exe

在官方文档中，我发现： [http](http://docs.python.org/2/using/cmdline.html?highlight=#-m)
://docs.python.org/2/using/cmdline.html?highlight=# -m “当使用 -m module-name 调用时，给定的模块位于 Python 模块上路径并作为脚本执行。”

如果您在控制台中键入，echo %PATH%，将首先看到 virtualenv 路径。所以

```
(django) c:\workspace\python>python -m django-admin startproject my_new_project 
```

应该管用

# hibernate - 从其他 JAR 添加映射资源

> ID：15108295
> 
> 赞同：0
> 
> 时间：2013-02-27T09:20:09.613
> 
> 标签：hibernate, hibernate-mapping

我有一个 jar 文件，其中包含一些我想添加的映射文件，然后作为映射资源添加到 hibernate.cfg.xml 中，因为我在 org.hibernate.cfg.Configuration 中添加了 JAR。

```
 Configuration cfg=new Configuration();
    cfg.addJar(new File("C:\\Users\\amoghs\\.m2\\repository\\mkcl\\os\\personServiceBL\\1.0.1\\personServiceBL-1.0.1.jar"));
    cfg.configure("hibernate.cfg.xml");
    SchemaExport se=new SchemaExport(cfg);
    se.setDelimiter("\n#-----------------------------------------------------------------------------------");
    se.setOutputFile("E:\\ADFCreateScript.sql");
    se.create(true,true); 
```

在 hibernate.cfg.xml 我添加了..

```
<mapping resource="org/mkcl/personservices/models/Person.hbm.xml" /> 
```

Person.hbm.xml 这个 xml 文件在 jar 文件中。

当我执行java应用程序时，我得到了这个异常......

```
 Exception in thread "main" org.hibernate.InvalidMappingException: Could not parse mapping document from input stream
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXml(Configuration.java:3415)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXmlQueue(Configuration.java:3404)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processMetadata(Configuration.java:3392)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1341)
    at org.hibernate.cfg.Configuration.generateDropSchemaScript(Configuration.java:931)
    at org.hibernate.tool.hbm2ddl.SchemaExport.<init>(SchemaExport.java:188)
    at org.hibernate.tool.hbm2ddl.SchemaExport.<init>(SchemaExport.java:156)
    at mkcl.accreditation.model.GenrateSchema.main(GenrateSchema.java:34)
Caused by: org.hibernate.PropertyNotFoundException: field [countryCode] not found on java.util.List
    at org.hibernate.property.DirectPropertyAccessor.getField(DirectPropertyAccessor.java:182)
    at org.hibernate.property.DirectPropertyAccessor.getField(DirectPropertyAccessor.java:174)
    at org.hibernate.property.DirectPropertyAccessor.getGetter(DirectPropertyAccessor.java:197)
    at org.hibernate.internal.util.ReflectHelper.getter(ReflectHelper.java:253)
    at org.hibernate.internal.util.ReflectHelper.reflectedPropertyClass(ReflectHelper.java:229)
    at org.hibernate.mapping.SimpleValue.setTypeUsingReflection(SimpleValue.java:326)
    at org.hibernate.cfg.HbmBinder.createProperty(HbmBinder.java:2286)
    at org.hibernate.cfg.HbmBinder.bindComponent(HbmBinder.java:1994)
    at org.hibernate.cfg.HbmBinder.createClassProperties(HbmBinder.java:2191)
    at org.hibernate.cfg.HbmBinder.createClassProperties(HbmBinder.java:2141)
    at org.hibernate.cfg.HbmBinder.bindRootPersistentClassCommonValues(HbmBinder.java:407)
    at org.hibernate.cfg.HbmBinder.bindRootClass(HbmBinder.java:322)
    at org.hibernate.cfg.HbmBinder.bindRoot(HbmBinder.java:173)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXml(Configuration.java:3412) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:42:17.540

如果将整个 jar 添加到 Hibernate`Configuration`中，那么它包含的所有映射 (*.hbm.xml) 都会自动添加到`Configuration`. 无需在 hibernate.cfg.xml 文件中添加以下行：

```
<mapping resource="org/mkcl/personservices/models/Person.hbm.xml"/> 
```

# .net - 如何在 Neo4jClient 中检索路径？

> ID：15108301
> 
> 赞同：2
> 
> 时间：2013-02-27T09:20:15.317
> 
> 标签：.net, neo4jclient

我最近开始将 Neo4JClient 用于我的 .NET 集成，并且（最终）我已经弄清楚了大部分事情。然而，这个让我难过。

我有兴趣从 Cypher 查询中获取路径，最好是在 POCO 对象中，这样我就可以在前端处理这些查询。

所以我的问题本质上是如何在 Neo4JClient 中做到这一点？如果我不能，其他 Neo4J .NET 客户端是否支持这个？

示例密码查询：

```
start n = node:idx(id="{id}")

MATCH p=(n)-[:RELATED_TO*0..3]-()

RETURN p; 
```

所以，我希望特定节点周围的所有节点的传入和传出关系都达到 3 的深度。还有另一种类型的查询，但它使用 withs，我需要找出 Neo4JClient 是否/如何支持它（虽然还有另一个问题）。

到目前为止，我一直在使用 Gremlin 和开放集和封闭集来填充自定义对象及其子关系的信息。它绝不是有效的，因此为什么我想以某种方式使用路径。有问题的自定义对象看起来有点像这样。

```
public class ConnectedNode : BaseNode
{
    public List<NodeRelation> RelatedNodes { get; set; }

    public ConnectedNode()
    {
        RelatedNodes = new List<NodeRelation>();
    }
}

public class NodeRelation
{
    // ... various properties for relationship payload type stuff
    public ConnectedNode RelatedNode { get; set; }
    public RelationshipDirection Direction { get; set; }
} 
```

只要它有效，我很高兴能在我正在寻找的路径上拉回节点和关系数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:18:28.003

你有没有尝试过：

```
ICypherFluentQueryReturned<PathsResult> query
    = graphClient.Cypher
                    .StartWithNodeIndexLookup("n", "idx", "id", id)
                    .Match("p=(n)-[:RELATED_TO*0..2]-()")
                    .Return<PathsResult>("p");
IEnumerable<PathsResult> res = query.Results; 
```

每个结果都`res`应该是你所追求的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:12:20.223

我最终找到了这个问题的答案，并写了[一篇](http://craigbrettdevden.blogspot.co.uk/2013/03/retrieving-paths-in-neo4jclient.html)关于这个主题的博客文章。但是，因为您不必阅读该帖子的内容...

首先，使用 EXTRACT 函数提取路径的节点和关系。这将为您提供 2 列结果。将此 2 列结果包含在您自己选择的 POCO 中，该 POCO 包含节点和关系实例列表。然后使用投影将您的查询检索到这种对象中。瞧！

希望这有帮助，它帮助了我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-05T22:54:05.153

我从 Chris Skardon 的[代码](https://bitbucket.org/cskardon/neo4jclient.pathsexample/src/2cd5a7b116fa6c98307662b0ec0a663146ba99e0/Neo4JClient.PathsExample/Program.cs?at=default&fileviewer=file-view-default)（[http://geekswithblogs.net/cskardon/archive/2013/07/23/neo4jclient-ndash-getting-path-results.aspx](http://geekswithblogs.net/cskardon/archive/2013/07/23/neo4jclient-ndash-getting-path-results.aspx)）开始，然后开始删除关系类，看看它是否会工作。我喜欢 Chris 的解决方案，因为它一次性返回节点属性以及关系（包括 TypeKey）。事实证明，您不需要创建任何新类。

```
 var queryResults = graphClient.Cypher
                .Match("p=(n)-[:RELATED_TO|OTHER_RELATION*0..2]-()")
                .Return(p => new 
                {
                    Nodes = Return.As<IEnumerable<Node<**YOUR_NODE_CLASS**>>>("nodes(p)"),
                    Relationships = Return.As<IEnumerable<RelationshipInstance<Dictionary<string,string>>>>("rels(p)")
                })
                .Results; 
       resultsPath.Dump();//Use LINQPad to see the results 
```

我使用的关系对象是`Dictionary<string,string>`（您可以使用它来代替`**YOUR_NODE_CLASS**`） - 对我来说，该字段中没有数据`RelationshipReference.Data`，但我认为如果我的关系具有属性就会有。

# php - 在表单提交之前查看图像的预览

> ID：15108303
> 
> 赞同：1
> 
> 时间：2013-02-27T09:20:20.240
> 
> 标签：php, javascript, image-upload

我正在创建一个社交网站。在用户注册期间有存储图像的规定。我想在用户上传图像时显示图像的预览，然后再提交表单。请帮助我。

这是我在注册部分的代码

```
<form action="insert_scene.php" 
 method="post" id="sceneform" enctype="multipart/form-data">
<label for="image">Scene Flyer:</label>
<img src="" width="120" height="130" alt="Scene Pic" />
<a href="" onclick="return uploadimg()" > Upload</a></li>
 <input type="file" name="file" id="file" style="display:none;" />
 </form> 
```

javascript内容是

```
 function uploadimg()
{
    var uploader = document.getElementById('file');
    uploader.click();
    return false;
} 
```

这是中的代码段`insert_scene.php`（实际上以下代码段放在另一个文件中，该文件包含在 中`insert_scene.php`）

```
<?php 
ini_set('memory_limit','128M');
ini_set("post_max_size", "10M");
ini_set("upload_max_filesize", "10M");
echo "Upload: " . $_FILES["file"]["name"] . "<br />";
if ($_FILES["file"]["error"] > 0)
{
  $fileN = '';
 echo 'File Size:' .($_FILES["file"]["size"] / 1024);
}
else
{

$maxImgSize=($_FILES["file"]["size"] / 1024);

if($maxImgSize>=5121 || $maxImgSize==0){

  $fileN = '';
}
else{

move_uploaded_file($_FILES["file"]["tmp_name"],"upload/" . $_FILES["file"]["name"]);

  $fileN="upload/" . $_FILES["file"]["name"];

  while(file_exists($fileN)){
      $fileN="upload/" . md5($fileN).$_FILES["file"]["name"];
  }

  rename("upload/" . $_FILES["file"]["name"], $fileN);

      }
    } 
   ?>
   $scene_flyer = $fileN; 
```

发布表单后，`$scene_flyer`获取图像地址。但我想在第一页的表单提交之前显示预览。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:23:39.557

改进您的代码并使用 jQuery uploadify。

[http://www.uploadify.com/demos/](http://www.uploadify.com/demos/)

然后在 OnUploadSuccess 事件中编写一些简单的代码：

[http://www.uploadify.com/documentation/uploadify/onuploadsuccess/](http://www.uploadify.com/documentation/uploadify/onuploadsuccess/)

# git - git -i rebase 中的额外行

> ID：15108306
> 
> 赞同：0
> 
> 时间：2013-02-27T09:20:25.770
> 
> 标签：git

输出中的第 3 行和第 4 行是什么意思`git -i rebase`

```
pick adb6252 foo
fixup fc1386f fixup! adb62521234123412341234123421cb7df43ab7a
 f023b79b561bb071e18123456789abcde440cbb1 !
 ^f023b79b561bb071e189b367cba987654321cbb1 !
pick 0f440b5 bar
pick c4651ee foo bar
pick f023b79 fixup! ... 
```

变基`git log --oneline`之前的样子：

```
f023b79 fixup! ...
fc1386f fixup! adb6252
c4651ee foo bar
0f440b5 bar
adb6252 foo 
```

这是否与我命名它的事实有关`"fixup! ..."`。（我选择`"..."`记住自己重新排序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:24:24.800

我认为这是一个错误，因为您用作`...`笔记`fixup!`。这`git -i rebase`是一个复杂的脚本，在搜索匹配的第一个提交时可能会得到意外的输出`...`。

# jquery - 如何在第二级选择一个 div？

> ID：15108309
> 
> 赞同：0
> 
> 时间：2013-02-27T09:20:43.543
> 
> 标签：jquery, html

```
<div id="class" style="cursor: pointer">
    <label id="cost">@Html.DisplayFor(modelItem => item.Cost)</label>
    <div class="no" hidden="hidden">
        <input type="text" id='@item.PriceId' class="text" style="text-align:center;" onkeypress="if(event.keyCode==13)" value='@item.Cost.ToString()' />
    </div>
</div> 
```

我有这个 html 代码。我想要这个 jquery 代码：

```
 $(".text").live("keypress",function (event) {
        if (event.which == 13) {
            event.preventDefault();
            $.getJSON('/Price/AjaxPriceEdit', { id: $(this).attr("id"), cost: $(this).val() }, function (data) {
            });
            $(this).hide();
            //Here I want to show #cost
        }
    }); 
```

现在我想选择 div#class 中的#cost。如何在标记的地方选择它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:22:48.073

只需选择它：

```
$('#class #cost') 
```

正如其他人指出的那样，`$('#cost')`应该足够了，因为 id 在页面上应该是唯一的。但是，如果您的脚本位于可以包含在多个页面中的外部文件中，则`#id`选择器的这种嵌套允许在正确的页面上准确定位该 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:23:50.400

首先，如果您使用的是 ID，它在整个页面上应该是唯一的。因此，`#cost`不应出现在同一页面上的任何位置。

否则，您应该将其设为 a `class`，在这种情况下，您可以使用`$("#class .cost");`

如果您仍要使用 ID 本身，则只需使用`$("#cost")`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:23:52.967

您可以直接选择它，因为它有一个标识符：

```
$('#cost') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:44:35.467

#cost 是父div的前一个节点

.parent 将到父节点， .prev 将选择上一个节点

```
$(this).hide();
$(this).parent().prev().show(); 
```

并保持链接

```
$(this).hide().parent().prev().show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T09:27:08.970

```
 $(".text").live("keypress",function (event) {
        if (event.which == 13) {
            event.preventDefault();
            $.getJSON('/Price/AjaxPriceEdit', { id: $(this).attr("id"), cost: $(this).val() }, function (data) {
            });
            $(this).hide();
            var cost = $('#class #cost').html();
            alert(cost); //This will display the actual cost value in an alert, do with it what you please!
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T09:29:01.630

您可以直接访问具有 id 的元素，因为 id 是唯一的，如果您有重复的具有相同 id 的 html 块，您可以使用[prev](http://api.jquery.com/prev/)获取同级标签并且不需要 id。

```
alert($(this).prev('label').text()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T09:29:09.330

您可以直接选择它：

```
$(".text").live("keypress",function (event) {
        if (event.which == 13) {
            event.preventDefault();
            $.getJSON('/Price/AjaxPriceEdit', { id: $(this).attr("id"), cost: $(this).val() }, function (data) {
            });
            $(this).hide();
           $('#cost').show(); // or whatever you want to do with it
        }
    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-27T09:36:21.133

正如您已`id`分配给目标一样：

```
$("#cost") 
```

还有这些：

```
$('#class #cost')
$('#class').children('#cost')
$('#class').find('#cost') 
```

也是这样：

```
$(this).parent().siblings('#cost') 
```

# perl - 退出 perl 函数而不退出脚本

> ID：15108311
> 
> 赞同：1
> 
> 时间：2013-02-27T09:20:50.510
> 
> 标签：perl

我有一个使用线程的 Perl 脚本，如何在函数成功执行后退出函数而不退出脚本？

```
Perl exited with active threads:
        6 running and unjoined
        1 finished and unjoined
        0 running and detached 
```

我的原始脚本是单片的，没有任何功能，完成后它只是“退出”；

这就是我创建线程的方式：

```
for(0..$threads-1) {$trl[$_] = threads->create(\&mysub, $_);}
for(@trl) { $_->join; } 
```

和我的潜艇：

```
sub mysub {
# do something and if success
exit;
} 
```

**编辑**

我的完整脚本有问题：

```
#!/usr/bin/perl

use LWP::UserAgent;
use HTTP::Cookies;
use threads;
use threads::shared;

################################################## ######
$|=1;
my $myscript = '/alive.php';
my $h = 'http://';
my $good : shared = 0;
my $bad : shared = 0;
$threads = 10;
################################################## ######
open (MYLOG , "<myservers.log");
chomp (my @site : shared = <MYLOG>);
close MYLOG;
################################################## ######
$size_site = scalar @site;
print "Loaded sites: $size_site\n";
################################################## ######
my $browser = LWP::UserAgent->new;
$browser -> timeout (10);
$browser->agent("User-Agent=Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.8;" . $browser->agent);

################################################## ######
for(0..$threads-1) {$trl[$_] = threads->create(\&checkalive, $_);}
for(@trl) { $_->join; }
################################################## ######
sub checkalive {

while (@site){

{lock(@site);$url = shift @site;}
$request = $browser->get("$h$url$myscript")->as_string;
if ($request =~ /Server Alive/){open (GOOD , ">>alive.txt");print GOOD "$h$url$myscript\n"; $good++;} else {$bad++;}
print "Alive: $good Offline: $bad\r";
}
}
close GOOD;
print "Alive: $good Offline: $bad\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:32:35.397

如果您希望在退出之前完成所有线程，则需要在某个时候加入它们。

您可以在脚本结束之前添加类似这样的内容：

```
for my $thread (threads->list)                                                                                   
{                                                                                                                
      $thread->join();                                                                               
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:30:38.280

**更新：** Tim De Lange 加入线程的解决方案可能是您想要的。但在某些情况下，以下方法可能有用。

您可以实现一些等待逻辑，以确保在退出之前一切都已完成。这是一个简单的例子：

```
#!usr/bin/perl
use strict;
use warnings;
use threads;

sub threaded_task {
    threads->create(sub { sleep 5; print("Thread done\n"); threads->detach() });
}

sub main {
    #Get a count of the running threads.
    my $original_running_threads = threads->list(threads::running);

    threaded_task();

    print "Main logic done.  Waiting for threads to complete.\n";

    #block until the number of running threads is the same as when we started.
    sleep 1 while (threads->list(threads::running) > $original_running_threads);

    print "Finished waiting for threads.\n";
}

main(); 
```

**解释：**

1.  获取正在运行的线程数的计数。
2.  启动任何涉及线程的任务。
3.  在退出程序之前，等到线程数等于原始数（您启动的所有线程都已停止）。

# android - 需要一个开源的文本语言翻译api

> ID：15108313
> 
> 赞同：11
> 
> 时间：2013-02-27T09:21:03.663
> 
> 标签：android, api, cordova, open-source, google-translate

我已经阅读了与此相关的其他帖子，但我没有任何具体的内容。

我正在使用需要某种文本翻译的 phonegap 开发一个 android 应用程序。所以我搜索了谷歌翻译 api，但他们正在为此收费。他们还没有使其可用于测试。

所以我转向了必应翻译，但不确定我们是否可以将它用于 android。如果我们可以使用，那么我们如何使用 jQuery 来使用它。我搜索了很多，但没有得到任何具体信息。

所以有人请建议谷歌无论如何可以提供他们的翻译api进行测试

或者

一种将 bing translate api 用于 android 应用程序的方法，仅用于测试目的

或者

任何可以为我做这件事的开源 api。

**请举例说明**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T08:42:14.007

找到一个有用的链接：[**免费/开源机器翻译软件**](http://www.computing.dcu.ie/~mforcada/fosmt.html)

我认为您可以尝试一些基于规则的翻译器，例如[**Apertium**](http://www.apertium.org/)、[**Anusaaraka**](http://anusaaraka.iiit.ac.in/)、[**OpenLogos**](http://logos-os.dfki.de/)或[**Maxin**](http://matxin.sf.net/)。但我认为，如果得到足够的培训，统计机器翻译系统可以提供更好的翻译质量。[**Moses**](http://www.statmt.org/moses/)拥有最广泛的社区支持，并已被许多本地化公司和研究人员试用。您可以在[此处](http://matrix.statmt.org)根据不同的训练数据和语言查看其翻译质量。

其他选项（你必须依赖网络，它们不是开源的）：

[**Microsoft Translator APIs**](http://www.microsofttranslator.com/dev/)
Microsoft Translator APIs 提供 Ajax、SOAP、HTTP 访问，它需要注册。但它是免费的。我认为[必应翻译 API](http://www.microsoft.com/web/post/using-the-free-bing-translation-apis)依赖于它。

[**Mygengo Translation API Gengo**](http://mygengo.com/api/)
要求您先创建一个帐户。

[**WebServiceX Translate API**](http://www.webservicex.net/ws/wsdetails.aspx?wsid=63)
免费的网络服务。检查它的[wsdl](http://www.webservicex.net/TranslateService.asmx?WSDL)

[**Yandex API**](http://api.yandex.com/translate/doc/dg/reference/translate.xml)

# javascript - 谷歌：TypeError：google.maps.Geocoder 不是构造函数

> ID：15108316
> 
> 赞同：1
> 
> 时间：2013-02-27T09:21:06.180
> 
> 标签：javascript, google-maps, google-maps-api-3

以下代码抛出异常，如 Firefox 中的标题所示。

```
<script type="text/javascript">
$(function () {
initialize();
});
var geocoder;
function initialize() {
geocoder = new google.maps.Geocoder();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:29:42.277

我的猜测是您没有包含**Google Map's header**，因为您的代码似乎正确。

尝试按照[此处](https://developers.google.com/maps/documentation/javascript/tutorial)的步骤操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-06T12:01:06.873

如果没有加载谷歌地图脚本，并且你调用地图相关函数，那么你会得到这种错误。

# java - AES 加密在 16 个字符后发散

> ID：15108317
> 
> 赞同：3
> 
> 时间：2013-02-27T09:21:07.970
> 
> 标签：java, android, encryption, aes

在将数据发送到 .NET 服务器之前，我使用 AES 算法对 iPhone 和 Android 应用程序上的数据进行加密。

iPhone 加密工作正常（.NET 服务器代码解密它没问题）。

Android 加密适用于小于 16 个字符的明文字符串。对于 >= 16 字符的明文字符串，第一个加密的“块”与 iPhone 相同，第二个加密的块完全不同。我的密钥长度是 16 个字符。

这是 Android 代码（最多可以使用 16 个字符）：

```
byte[] valueData = value.getBytes();   
byte[] keyData = skey.getBytes();

SecretKeySpec skeySpec = new SecretKeySpec(keyData, "AES");
Cipher cipher = Cipher.getInstance("AES/ECB/PKCS7PADDING");
cipher.init(Cipher.ENCRYPT_MODE, skeySpec);

byte[] valueEncryptedData = cipher.doFinal(valueData);
String valueEncryptedString = Base64.encodeToString(valueEncryptedData, Base64.DEFAULT);

return valueEncryptedString; 
```

这是我的 iOS 代码，运行良好：

```
StringEncryption *crypto = [[StringEncryption alloc] init];
CCOptions padding = kCCOptionPKCS7Padding;

NSData *valueData = [value dataUsingEncoding:NSUTF8StringEncoding];
NSData *keyData = [skey dataUsingEncoding:NSUTF8StringEncoding];
NSData *valueEncryptedData = [crypto encrypt:valueData key:keyData padding:&padding];
NSString *valueEncryptedString = [valueEncryptedData base64EncodingWithLineLength:0]; 
```

我怀疑这个问题是微不足道的。例如，也许我使用了错误的密码初始化，我应该使用 CBC 而不是 ECB。但是，使用的输出`Cipher.getInstance("AES/CBC/PKCS7PADDING")`也不会产生预期的结果，（事实上，更糟糕的是，加密值与 iPhone 加密值完全不同，而不仅仅是在前 16 个字符之后发散）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:35:47.907

您很可能使用了不正确的密码模式。而且，最有可能的是，您应该使用 CBC 而不是 ECB。而且，它从第一次尝试就行不通，因为 CBC 需要 IV（初始向量），并且不同的加密方案可以使用不同的默认向量。

# perl - 如何将“哈希字符串”转换为哈希？

> ID：15108330
> 
> 赞同：3
> 
> 时间：2013-02-27T09:22:03.720
> 
> 标签：perl

我有哈希字符串存储在文件中`{"a"=>1,"b"=>2}`，我打开文件并将这个哈希字符串存储到`$hash_string`，我怎样才能将它转换`$hash_string`为`$hash_string_ref = {"a"=>1,"b"=>2}`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T09:27:12.123

简单的答案：

```
$ echo '{"a"=>1,"b"=>2}' > val.pl
$ perl -le 'my $foo = do "val.pl"; print $foo->{a}'
1 
```

更好的答案：考虑使用更好的数据序列化格式，例如[Storable](https://metacpan.org/module/Storable)或[YAML](https://metacpan.org/module/YAML)，甚至 JSON。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T09:28:09.970

使用[Perl 安全](https://metacpan.org/module/Safe)

该模块将运行任何 perl 代码（在沙箱中）并返回结果。包括解码例如转储到文件的结构。

代码示例：

```
use Safe;     
my $compartment = new Safe;
my $unsafe_code = '{"a"=>1,"b"=>2}';
my $result = $compartment->reval($unsafe_code);
print join(', ', %$result); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T10:44:56.050

您的数据格式似乎是“任意 Perl 表达式”，这是一种非常糟糕的数据格式。为什么不使用[JSON](http://search.cpan.org/perldoc?JSON%3a%3aXS)或功能更全面的[YAML](http://search.cpan.org/perldoc?YAML%3a%3aXS)？

```
use JSON::XS qw( encode_json decode_json );

sub save_struct {
   my ($qfn, $data) = @_;
   open(my $fh, '>:raw', $qfn)
      or die("Can't create JSON file \"$qfn\": $!\n");
   print($fh encode_json($data))
      or die("Can't write JSON to file \"$qfn\": $!\n");
   close($fh)
      or die("Can't write JSON to file \"$qfn\": $!\n");
}

sub load_struct {
   my ($qfn) = @_;
   open(my $fh, '>:raw', $qfn)
      or die("Can't create JSON file \"$qfn\": $!\n");
   my $json; { local $/; $json = <$fh>; }
   return decode_json($json);
}

my $data = {"a"=>1,"b"=>2};
save_struct('file.json', $data);

...

my $data = load_struct('file.json'); 
```

# javascript - 禁用指定日期。仅当此日期为“开始日期 + 5 天”和“结束日期 - 14 天”时，如何在日期选择器中显示日期？

> ID：15108333
> 
> 赞同：0
> 
> 时间：2013-02-27T09:22:13.160
> 
> 标签：javascript, jquery

仅当此日期在“开始日期 + 5 天”和“结束日期 - 14 天”中时，如何在 datepicker jQuery UI 中显示日期（在 #id_erinnerung_am 字段中）。只有这些日期，其他禁用。

```
$(function() {
    $( ".vDateField" ).datepicker({ dateFormat: 'dd.mm.yy' });
}); 
```

我的脚本 Js：

```
TIME_UNITS = {
    '1': 'days',
    '2': 'months',
    '3': 'years'
}

function get_date_from_string(strDate) {
    var dateParts = strDate.split('.');
    var date = new Date(dateParts[2], (dateParts[1] - 1), dateParts[0]);
    return date;
}

function recalculate_deadline() {
    var = startdate = $('#id_laufzeit_von').val(); #START DATE
    var enddate = $('#id_laufzeit_bis').val();     #ENDDATE
    if (!enddate) {
        return;
    }
    enddate = moment(new get_date_from_string(enddate));
    // get cancelling period and unit
    var timeunit_cancelling = TIME_UNITS[$('#id_kuendigungsfrist_type').val()];
    var cancelling_deadline = $('#id_kuendigungsfrist').val();

    if (!cancelling_deadline) {
        return;
    }
    cancelling_deadline = parseInt(cancelling_deadline, 10);
    enddate.subtract(timeunit_cancelling, cancelling_deadline);

    // show date in input field
    var $cancel_until = $('#id_kuendigung_moeglichbis');
    $cancel_until.val(enddate.format('DD.MM.YYYY'));
    $cancel_until.change();
}

function check_reminder_date() {
    var $reminder_date = $('#id_erinnerung_am');
    var $cancel_until = $('#id_kuendigung_moeglichbis');
    reminder_date = $reminder_date.val();

    cancel_until = $cancel_until.val();
    if (!cancel_until) {
        return;
    }

    cancel_until = get_date_from_string(cancel_until);

    // If reminder_date is set, check that it is earlier than cancelling date
    if (reminder_date) {

        reminder_date = get_date_from_string(reminder_date);

        if (reminder_date <= cancel_until) {
            // everything is fine, just return
            return;
        }
    }
    // correct or set date for reminder
    reminder_date = moment(cancel_until);

    reminder_date.subtract('months', 1);
    $reminder_date.val(reminder_date.format('DD.MM.YYYY'));
    $reminder_date;
    //alert(reminder_date); //Fri Mar 15 2013 00:00:00 GMT+0100 (CET)
    $reminder_date.datepicker(setValue(reminder_date));

}
$(document).ready(function(){
    $('#id_laufzeit_bis').datepicker().on('changeDate', recalculate_deadline);
    $('#id_kuendigungsfrist').change(recalculate_deadline);
    $('#id_kuendigungsfrist_type').change(recalculate_deadline);

    $('#id_kuendigung_moeglichbis').change(check_reminder_date);
    $('#id_erinnerung_am').datepicker('hide').on(check_reminder_date);

}); 
```

怎么做？我是 Java Script 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:42:28.210

查看 api 和示例。您可以限制日期并禁用某些日期

```
$( "#datepicker" ).datepicker({ minDate: -20, maxDate: "+1M +10D" }); 
```

# .net - 从 t4 预处理文本模板生成多个输出

> ID：15108336
> 
> 赞同：2
> 
> 时间：2013-02-27T09:22:24.967
> 
> 标签：.net, t4

我想知道是否有办法从我的预处理模板生成多个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:41:30.203

Preprocessed templates return the whole generated code as a string when you call the "TransformText()" method. It's up to you in what file(s) that result is saved.

You could render tokens into that generated code wherever you want to start a new file, split the returned string and save each part in a separate file.

For example - if this was your preprocessed template:

```
<#@ template #>

// This output text goes to the first file

NEW_FILE_TOKEN

// this output text goes to the next file 
```

And your calling code would be like this:

```
var myTemplateInstance = new MyTemplate();
var result = myTemplateInstance.TransformText();

var fileContents = result.Split("NEW_FILE_TOKEN");
for(int i = 0; i < fileContents.Count; i++)
{
    System.IO.File.WriteAllText("File" + i.ToString() + ".txt", fileContents[i]);
} 
```

You'd end up with two files (File0.txt, and File1.txt), one containing the first comment line and the other one the second.

# ruby-on-rails - 在环境之间移动（大量）数据

> ID：15108340
> 
> 赞同：0
> 
> 时间：2013-02-27T09:22:40.850
> 
> 标签：ruby-on-rails, database

我有一个 Rails 3 应用程序——它是一个研究各种项目的界面。我们不希望研究人员不小心将 duff 数据放入用户站点，因此我们使用`dataentry`研究人员使用的环境和`production`面向用户的环境将应用程序分开。研究人员将新数据放入`dataentry`数据库，由编辑检查并签字；数据涵盖了 30 多个模型，这些模型具有各种关联性`belongs_to`。`has_many`

我想做的是研究如何定期将数据从数据输入环境移动到实时环境。我真的不想每次都丢弃`production`数据库并转储`dataentry`到其中，因为我不想丢失例如在实时站点上注册的新用户的订阅。

我见过的在环境之间迁移数据的大多数解决方案都涉及 a) 将内容转储到 YAML 或类似的，或者 b) 将整个表加载到 Ruby 数组中，切换数据库连接，并`each`在数组上执行循环以加载它们回来。当表非常大时，这两种方法似乎都不是最理想的。

我可以（可以想象）`mysqldump`从所有相关表格中提取`dataentry`结果并将结果输入`mysql production`，但它看起来有点像一个钝器。

在 Rails 中管理这种“数据暂存”是否有任何最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:37:37.437

我最终[`pt-table-sync`](http://www.percona.com/doc/percona-toolkit/2.1/pt-table-sync.html)选择了一项 cron 工作。

# objective-c - 为什么 setAnimationDuration 没有效果，我的 Animation 太快了

> ID：15108341
> 
> 赞同：-2
> 
> 时间：2013-02-27T09:22:44.220
> 
> 标签：objective-c

方法 setAnimationDuration 对我的代码没有影响，我的 Animation 太快了。这是代码

```
[UIView beginAnimations:nil context:nil];      
image1.frame=CGRectMake(0, 0, 0,image1.frame.size.height);
image2.frame=CGRectMake(image2.frame.size.width, 0, 0,image2.frame.size.height);
[UIView setAnimationDuration:10];
[UIView setAnimationDelegate:self];
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T09:37:15.427

您需要在更改动画属性之前设置持续时间值。

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:10];
image1.frame=CGRectMake(0, 0, 0,image1.frame.size.height);
image2.frame=CGRectMake(image2.frame.size.width, 0, 0,image2.frame.size.height);
[UIView setAnimationDelegate:self];
[UIView commitAnimations]; 
```

Apples 类参考中关于 setAnimationDuration 方法的 UIView 状态的讨论：

> 您必须在更改视图的动画属性之前调用此方法。默认值为 0.2 秒。

这就是为什么你会得到非常快的动画。

ios4 不鼓励这种风格的动画，所以如果上述方法不起作用，请尝试使用新的动画块风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:35:27.637

使用以下方法将动画添加到您的视图：

```
[UIView animateWithDuration:2.0 animations:^()
 {
     //Your code here
 }]; 
```

或者使用这种方法：

```
[UIView transitionWithView:super.view duration:1.0 options:UIViewAnimationOptionTransitionCurlUp animations:^
     {
         //your code here
     }completion:NULL
    ]; 
```

# iphone - SubView 隐藏了我的一些标签

> ID：15108342
> 
> 赞同：0
> 
> 时间：2013-02-27T09:22:44.360
> 
> 标签：iphone, ios, objective-c, ipad

我的视图中有一个文本字段。当我编辑这个文本字段表视图应该只是为了创建智能感知。此表视图涵盖了我视图中的标签

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    txtcity.text = selectedCell.textLabel.text;

    [viewForautoCompleteTableView removeFromSuperview];
} 
```

**我的标签仍然不可见**

# php - 如何在 PHP 中的另一个页面上携带搜索参数值

> ID：15108345
> 
> 赞同：0
> 
> 时间：2013-02-27T09:22:49.440
> 
> 标签：php, mysql, search

我有一个高级参数化查询，用户设置参数并相应地构建查询。我将表单的操作指向结果页面，并在该页面上使用`$_POST`.

我正确地获得了这些值，但是当我刷新页面时，我失去了`$_POST`. 我需要为此使用`$_SESSION`吗？因为我不想要这么多会话，所以一旦用户使用了它们，我就不得不全部取消设置，那我该怎么做呢？

**形式**

```
<form action="result.php?script_id=3&sub_script_id=1">
<label for="search_for">Search For</label>
<select id="search_for" name="contact_first_name">
<?php
    while($throw_names = mysqli_fetch_array($fetch_advance_param_values)) {
?>
    <option value="<?php echo $throw_names['contact_first_name']; ?>"><?php echo $throw_names['contact_first_name']; ?></option>
<?php
    }
?>
</select>
<br />
</form> 
```

**结果.php**

```
<?php
$fetch_results = mysqli_query($running_db, 
"SELECT rec_num, record_locked, contact_first_name, contact_last_name,
contact_mobile_no, contact_office_no FROM tbl_contacts WHERE 
contact_first_name = '{$_POST['contact_first_name']}' 
AND group_id_entry={$_SESSION['user_group_id']} 
ORDER BY $sort_column_name $sort_order $limit_records");
?> 
```

不用担心，现在直接`$_POST['contact_first_name']`在我的查询中使用，这只是为了测试目的，稍后我会使用`mysqli_real_escape_string()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:36:06.440

我不明白您为什么担心使用会话或 GET 参数。无论如何，搜索表单通常都是用 GET 实现的。

但是还有*另*一种选择：将搜索本身保存在数据库中（然后一个 POST 表单实际上是有意义的）：

1.  搜索表单被提交
2.  `searches`将搜索查询另存为表中的新行
3.  重定向到类似的东西`/searches/?id=1234`
4.  在该页面上，从表中重建搜索查询`searches`并执行它

乍一看，这个解决方案看起来有点矫枉过正，但它提供了新的可能性，比如缓存搜索结果或让用户保存最喜欢的搜索。因此，在某些情况下，这种方法是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:25:43.903

在帖子发送到的第一页：

```
setcookie('searchquery','I want cookies'); 
```

在第 2 页

```
if(isset($_COOKIE['searchquery']))
    {
    $search = mysqli_real_escape_string($link,$_COOKIE['searchquery']);
    } 
```

# intellij-idea - IntelliJ Idea 12.0 - 显示不存在的 Javascript 错误

> ID：15108348
> 
> 赞同：1
> 
> 时间：2013-02-27T09:22:55.407
> 
> 标签：intellij-idea

我正在使用**IntelliJ Idea 12.0**，有时它会在不存在的 Javascript 文件中显示错误，如下图所示。我该如何解决这个问题？有没有办法再次重新验证源？在这些情况下，右上角的“眼睛”图标也始终显示。

![验证错误甚至没有问题](../Images/feef51c77a68453c5c86613ff6620809.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:34:15.110

你用的是什么版本的12？有一个与您在 12.1 中修复的内容相关的问题：

[IDEA-101395 好的代码是红色的：JavaScript 语言注入](http://youtrack.jetbrains.com/issue/IDEA-101395)

如果您不在 12.1 上，您应该尝试升级，看看是否能解决您的问题

# php - 任何像 dompdf 这样好的 html 到 excel 转换器

> ID：15108352
> 
> 赞同：1
> 
> 时间：2013-02-27T09:23:02.773
> 
> 标签：php, html, excel, dompdf, file-conversion

伙计们。您是否碰巧知道通过 php 将 html 转换为 excel 文件的任何好的转换器？我见过很多（PHPExcel 和 SimpleExcel），但没有什么能像 dompdf 那样运行。（dompdf 是通过 php 实现的 html 到 pdf 转换器）

在将html（包括它的属性，例如strong、i、u）转换为excel时，是否有类似dompdf的东西？请发帖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:20:14.030

过去，我只是按原样提供 HTML 文档。Excel 完全能够加载 HTML 文档并将其解析为电子表格。Excel 甚至可以理解许多 CSS 属性。您所要做的就是将 Excel mime 类型添加到 HTTP 标头，[例如](http://eclecticgeek.com/code/htmltable.php)：

```
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition:Attachment;Filename=htmltable.htm');
readfile('htmltable.html'); 
```

不幸的是，这不像以前那样吸引人。从 Excel 2007 开始，该程序[执行一些基本的文档类型确认](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx)。因为 HTML 不是 XLS（显然）你会收到警告。Excel 仍然可以打开文档并正确显示它，但实际上没有任何选项可以禁用警告。

你可以试试[PHPExcel](https://github.com/PHPOffice/PHPExcel)。我从未使用过它，但显然您可以使用它将[文档从 HTML 转换为 XLS](https://blog.mayflower.de/561-Import-and-export-data-using-PHPExcel.html)：

> 通过结合阅读器和编写器，只需 3 行代码就可以将文件从一种格式转换为另一种格式：
> 
> ```
> $objPHPExcel = PHPExcel_IOFactory::load("XMLTest.xml");
> $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
> $objWriter->save('covertedXml2Xlsx.xlsx'); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:58:45.237

我花了几个小时使用 PHPExcel 设置自动报告，发现它非常笨拙。我发现将数据写入 .csv (fputcsv) 更加用户友好和有效，然后使用 COM 运行 Excel 宏，该宏打开 .csv 并实现所有格式等。

您还可以从 VBScript 执行 Excel 宏并调用 PHP 的 exec 函数来运行 VBScript。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T01:51:51.457

[fputcsv](http://php.net/manual/en/function.fputcsv.php "fputcsv")是你所追求的。如果您在获取 html 之前有信息，这很容易。还可以添加花哨的东西，如跳过列/行，制作标题，制作页面。

# sql - 从多选列表框中删除多条选定记录 (Access)

> ID：15108356
> 
> 赞同：1
> 
> 时间：2013-02-27T09:23:15.577
> 
> 标签：sql, vba, ms-access

我需要删除从 Access 列表框中选择的多条记录。我有 SQL 和 VBA 可以从非多选列表框中删除一条选定的记录，但我似乎无法调整代码以从多选列表框中删除多条选定的记录。这是目前的代码；它附加到按钮 On_Click 事件，列表框称为列表框名称：

```
Private Sub DeleteSelected_Click()
    Dim lngID As Long
    Dim strSQL As String

    If IsNull(ListBoxName) Then
        Exit Sub
    End If

    With Me.ListBoxName

    lngID = ListBoxName.Value

    strSQL = "DELETE * FROM [tablename] WHERE [tablefieldname] =" & lngID

    CurrentDb.Execute strSQL

    ListBoxName.Requery

    End With
End Sub 
```

我试过设置

```
lngID = ListBoxName.Value 
```

至

```
lngID = ListBoxName.ItemsSelected(0) 
```

或者

```
lngID = ListBoxName.Columns(0) 
```

无济于事。似乎 SQL 一定有问题，但我不知道如何修复它。有任何想法吗？

编辑：这很酷 :) 干杯 Belial。这是更新的代码

```
 Private Sub DeleteSelected_Click()
    Dim strSQL As String
    Dim vItem As Variant
    Dim strSet As Long

    If IsNull(ListBoxName) Then
        Exit Sub
    End If

    With Me.ListBoxName
      For Each vItem In .ItemsSelected
                If Not IsNull(vItem) Then
                    strSet = strSet & "," & .ItemData(vItem)
                End If
            Next
        End With

    strSQL = "DELETE FROM Carers WHERE Carer_ID IN (" & strSet & ")"

    CurrentDb.Execute strSQL

    ListBoxName.Requery

    End Sub 
```

希望我做对了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:32:21.543

这是您的查询中的一个 SQL 错误：

```
strSQL = "DELETE FROM [tablename] WHERE [tablefieldname] =" & lngID 
```

没有必要`*`。

无论如何，这是您可以执行的另一种方法：

将所选项目放入以`,`逗号分隔的字符串中，然后使用`IN`运算符一次删除所有内容。

```
Dim vItem as Variant
Dim strSet as String
//Loop through the ItemsSelected in the list box    
    With Me.ListBoxName
        For Each vItem In .ItemsSelected
            If Not IsNull(vItem) Then
                strSet = strSet & "," & .ItemData(vItem) 
            End If
        Next
    End With
strSQL = "DELETE FROM [tablename] WHERE [tablefieldname] IN (" & strSet & ")" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:30:47.157

从 DELETE 语句中删除 *。

```
strSQL = "DELETE FROM [tablename] WHERE [tablefieldname] =" & lngID 
```

遍历选定的项目使用类似的东西

```
For i = 0 To ListBox1.ListCount - 1
      If ListBox1.Selected(i) Then
         Msg = Msg & ListBox1.List(i) & vbNewLine
     End If
Next i 
```

看

迭代：[http ://www.java2s.com/Code/VBA-Excel-Access-Word/Forms/GettheselecteditemsinaListBox.htm](http://www.java2s.com/Code/VBA-Excel-Access-Word/Forms/GettheselecteditemsinaListBox.htm)

删除声明： http: [//msdn.microsoft.com/en-us/library/office/ff845201 (v=office.14).aspx](http://msdn.microsoft.com/en-us/library/office/ff845201(v=office.14).aspx)

它现在有效吗？

**编辑**

我认为什么都没有发生，因为在我看来这总是正确的（尝试过）。

```
If IsNull(ListBoxName) Then
    Exit Sub
End If 
```

尝试这个

```
Dim strSQL As String
Dim vItem As Variant

With Me.ListBoxName
    For Each vItem In .ItemsSelected
        If Not IsNull(vItem) And Not CStr(vItem) = vbNullString Then
            strSQL = "DELETE FROM Carers WHERE Carer_ID = " & CLng(vItem)
            CurrentDb.Execute strSQL
        End If
    Next
End With

ListBoxName.Requery 
```

# php - 将二进制数据传递给 S3 PutObject

> ID：15108357
> 
> 赞同：2
> 
> 时间：2013-02-27T09:23:15.650
> 
> 标签：php, amazon-s3

我正在尝试将**许多**图像上传到 S3 存储桶。考虑到速度，我希望通过将数据保存在内存中来减少磁盘读取和写入的次数。为此，我想出了以下方案：

```
//fetch binary image data from remote URL
$contents = file_get_contents("http://somesite.com/image.jpg");
//trim the image as per: http://stackoverflow.com/a/15104071/568884
$out = shell_exec('echo ' . base64_encode($contents) . " | base64 -d | convert - -fuzz 10% -trim jpeg:-");
//create a temporary resource to pass to S3's inputResource() method.
$resource = fopen('php://temp', 'r+');
//write the binary data into the empty resource.
fwrite($resource, $out);
//pass the resource and length of binary data into inputResource()
$ir = $this->s3->inputResource($resource, strlen($out));
//finally transfer the resource from machine to S3.
$this->s3->putObject($ir, $bucket, $s3_path, S3::ACL_PUBLIC_READ); 
```

错误是：**S3::putObject(): [RequestTimeout] 您与服务器的套接字连接未在超时期限内读取或写入。空闲连接将被关闭**，数据不会写入 S3。

如果我将 $out 的分配简单地替换为一个空字符串：`$out = "";`然后，该库按预期成功地将 0 字节文件写入 S3。

我正在使用[CodeIgniter S3](https://github.com/psugand/CodeIgniter-S3)库......它只是 AWS S3 API afaik 的包装器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:21:05.560

您正在将文件句柄传递`$resource`给库，但是，您首先写入它，以便文件指针位于文件末尾。

该库可能无法处理这种极端情况（它的源代码表明）。

[`rewind($resource)`](http://php.net/rewind)您可以在写入文件后但在将其传递到 S3 库之前尝试访问该文件。

如果你想加快一点速度，你可以通过切换`php://temp`到 `php://memory`. [有关详细信息和选项，`php://`](http://php.net/wrappers.php.php)请参阅[包装器文档](http://php.net/wrappers.php.php)。

顺便说一句，S3 库。不是官方的。如果您启用通知和警告，您可能会看到报告的一些问题，因为它仍然包含 PHP 4 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:34:02.863

RequestTimeout 错误的可能来源可能是您对 putObject 的调用指定的 Content-Length 与发送的实际数据不同。[根据AWS 论坛](https://forums.aws.amazon.com/message.jspa?messageID=215955#215955)中的亚马逊代表：

> 触发 RequestTimeout 错误的一种方法是发送一个 PUT 请求，该请求指定 Content-Length 为 2，但在请求正文中仅包含 1 个字节的对象数据。在等待剩余字节到达 20 秒后，Amazon S3 将响应 RequestTimeour 错误。

因此，当您使用 strlen() 函数时，您的临时文件可能会报告错误的长度，并且此错误值导致 S3 响应异常。

根据对[strlen() 的 php 文档的](http://www.php.net/manual/en/function.strlen.php#54906)评论，该函数可能会报告文件中错误的字节数，因为它假定字符串始终是 ASCII：

> 如果是这种情况，它可能会将二进制数据视为 unocode 字符串并返回错误值

尝试用调用[mb_strlen() 替换 strlen()](http://www.php.net/manual/en/function.mb-strlen.php)，它应该总是报告正确的字节数。

# c# - 使用泛型类型的注入变体实现服务定位器

> ID：15108358
> 
> 赞同：4
> 
> 时间：2013-02-27T09:23:19.430
> 
> 标签：c#, generics, ninject, service-locator

我有以下内容：

```
public interface IConverter<TValue, TConverted>
{     
}

public interface IConverterProvider
{
    IConverter<TValue, TConverted> GetConverter<TValue, TConverted>();
} 
```

在设置中使用示例绑定：

```
Bind<IConverter<System.Int32, System.String>>().To<Int32ToStringConverter>();
Bind<IConverter<System.Guid, System.String>>().To<GuidToStringConverter>(); 
```

所以我有一组固定的转换器，没有重复的绑定。

**[问题]** 我的问题是如何实现 IConverterProvider 并注入映射到单例的可用绑定字典？或者换句话说，如何避免运行时服务定位器模式。

目前我只是每次都使用 NInject 内核来解析，但我相信这是一种反模式。我想要的是这样的：

```
public class ConverterProvider : IConverterProvider
{
    private Dictionary<Type, object> _converters;

    public ConverterProvider(Dictionary<Type, object> converters)
    {
        _converters = converters;
    }

    public IConverter<TValue, TConverted> GetConverter<TValue, TConverted>()
    {
        var fullTypeResolve = typeof (IConverter<,>).MakeGenericType(typeof (TValue), typeof (TConverted));

        return _converters.Where(x => x.Key == fullTypeResolve).Select(x=>x.Value).Cast<IConverter<TValue, TConverted>>().Single();
    }
} 
```

但这实际上要求我能够从依赖注入内核中解析并获取所有 IConverter<,> 的列表，而我之前从 NInject 执行此操作的尝试没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:53:46.240

这得到了支持[`Ninject.Extensions.Factory`](https://github.com/ninject/ninject.extensions.factory/wiki)

```
Bind<IConverter<System.Int32, System.String>>().To<Int32ToStringConverter>();
Bind<IConverter<System.Guid, System.String>>().To<GuidToStringConverter>();
Bind<IConverterProvider>().ToFactory(); 
```

无需实施

重命名`GetConverter`为`CreateConverter`或其他不以 Get 开头的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:35:19.523

我通常用这样的东西制作工厂（或你在这里的供应商）：

```
public class ConverterFactory : IConverterFactory
{
    private readonly IResolutionRoot resolutionRoot;

    public ConverterFactory(IResolutionRoot resolutionRoot)
    {
        this.resolutionRoot = resolutionRoot;
    }

    public IConverter<TValue, TConverted> CreateConverter()
    {
        Type converterType = typeof(IConverter<,>).MakeGenericType(typeof(TValue), typeof(TConverted));
        return this.resolutionRoot.Get(converterType);
    }
} 
```

我知道我们真的不应该使用 Ninject 在运行时创建东西，但实际上有时它是不可避免的。要获得单例行为，只需定义`InSingletonScope()`为正常。

如果类型不是通用的，那么您可以注入接口的所有实现，而不是`IResolutionRoot`在运行时选择一个。我有一个解析器工厂，有点像这样：

```
public class ParserFactory : IParserFactory
{
    private readonly IEnumerable<IParser> parsers;

    public ParserFactory(IEnumerable<IParser> parsers)
    {
        this.parsers = parsers;
    }

    public IParser CreateParser(string someInput)
    {
        foreach (var parser in this.parsers)
        {
            if (parser.CanParse(someInput))
            {
                return parser;
            }
        }
    }
} 
```

Ninject 会自动注入一个`IEnumerable`包含所有具体实现的接口，因此添加新实现就像添加映射一样简单。我不知道如何使用泛型类型来做到这一点，因为你不能说`IEnumerable<IConverter<,>>`.

# socketexception - WSAGetLastError() 返回 64？

> ID：15108362
> 
> 赞同：0
> 
> 时间：2013-02-27T09:23:31.193
> 
> 标签：socketexception

当我在我的应用程序中使用 WSAGetLastError() 时，它返回 64。谁能解释一下 64 是什么意思？当我们收到此错误时，客户端正在断开连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:12:36.430

套接字错误代码从 10000 开始。64 不是可以返回的记录套接字[错误代码。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668.aspx)`WSAGetLastError()`但是，Windows 错误代码 64 是`ERROR_NETNAME_DELETED`（“指定的网络名称不再可用。”）。

# view - 如何在 Eclipse RCP 中向窗口菜单添加视图？

> ID：15108364
> 
> 赞同：2
> 
> 时间：2013-02-27T09:23:36.400
> 
> 标签：view, menu, eclipse-plugin, eclipse-rcp

我想将我的自定义视图添加到“窗口”菜单。此代码仅添加打开的视图

```
 IMenuManager pencereler = new MenuManager("sample");
    pencereler.add(ContributionItemFactory.VIEWS_SHORTLIST.create(window));
    viewMenu.add(pencereler); 
```

如果我打开我的自定义视图，它会添加到此菜单中。但是，我想始终在此菜单中显示我的自定义视图，而不仅仅是在打开它之后。

那么我可以从视图中创建“ContributionItem”，还是有任何其他方式，比如将一些行添加到“plugin.xml”或将我的视图的 id 添加到任何扩展？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T13:09:28.757

假设您正确地包含了*Window*菜单，这就是它的工作方式。

# 添加命令

1.  在*plugin.xml*的选项卡*Extensions*中，添加扩展点`org.eclipse.ui.commands`。

2.  要`org.eclipse.ui.commands`，添加一个新**命令**（*右键单击扩展点 > 新建 > 命令*）。给命令一个**id**（例如，“ *myplugin.openCustomView* ”）和一个**名称**（例如，“ *Open Custom View* ”）。

## 为命令添加处理程序

对于新创建的命令“ *myplugin.openCustomView* ”，您必须创建一个处理程序，它将以编程方式打开视图。

1.  在*plugin.xml*的选项卡*Extensions*中，添加扩展点`org.eclipse.ui.handlers`。

2.  要`org.eclipse.ui.handlers`添加一个**处理程序**（*右键单击扩展点 > 新建 > 处理程序*）。对于处理程序的**commandId**，键入新创建的命令的名称 ( *myplugin.openCustomView* ) 或浏览它。在字段**类**中，输入要创建的处理程序类的名称（例如，“ *OpenCustomViewHandler* ”），然后单击超链接的字段名称*类*。这将打开新建类向导。

3.  让新类（名称已填写）扩展`org.eclipse.core.commands.AbstractHandler`。

4.  将打开视图逻辑添加到新创建的类的`execute()`方法中，这样该类将大致如下所示（当然使用您的视图 ID 而不是*myplugin.mycustomviewID*）。

    ```
    import org.eclipse.core.commands.AbstractHandler;
    import org.eclipse.core.commands.ExecutionEvent;
    import org.eclipse.core.commands.ExecutionException;
    import org.eclipse.ui.PartInitException;
    import org.eclipse.ui.handlers.HandlerUtil;

    public class OpenViewHandler extends AbstractHandler {

      @Override
      public Object execute(ExecutionEvent event) throws ExecutionException {
        try {
          HandlerUtil.getActiveWorkbenchWindowChecked(event).
            getActivePage().showView("myplugin.mycustomviewID");
        } catch (PartInitException e) {
          e.printStackTrace();
        }
        return null;
      }
    } 
    ```

# 将命令添加到菜单

1.  在*plugin.xml*的选项卡*Extensions*中，添加扩展点`org.eclipse.ui.menus`。

2.  `org.eclipse.ui.menus`添加一个新的**menuContribution**（右键*单击扩展点 > New > menuContribution*）。

3.  为*menuContribution*提供以下**locationURI**：*menu:window?after=additions* （如果您正确包含它，这会将贡献放置在*Window菜单中）。*

4.  在新创建的*menuContribution*中，添加一个**命令**（*右键单击 menuContribution > New > command*）。浏览**commandId**，或手动输入（*myplugin.openCustomView*）。给*menuContribution*一个**id**（例如，“ *myplugin.menu.openCustomView* ”），并将**样式**设置为“ *push* ”。

# spring - 针对数字的 Spring Validator

> ID：15108375
> 
> 赞同：0
> 
> 时间：2013-02-27T09:23:56.920
> 
> 标签：spring

我有一个包含整数字段的弹簧表单

```
<form:input tabindex="1" path="compAmount" id="compAmount" cssClass="controlStock"/> 
```

该**表单**对应的命令类包含绑定到上述文本框的整数字段**int compAmount**

我的问题是我们如何通过用户输入字符串而不是数字来验证此字段并警告用户 **数据无效**

如果我们给出错误标签，基本上spring不允许用户通过给出异常消息来提交字符串

```
<form:errors path="compAmount"/> 
```

开发人员可以识别异常消息。但它没有给出普通用户可识别的消息，例如。**数据无效**

如何使用**Spring Validator 接口**实现这一点，帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:04:03.893

添加

```
<form:errors path="compAmount" /> 
```

到你的jsp。

这将显示“附加”到该字段的错误。

# php - 脚本搜索路径

> ID：15108384
> 
> 赞同：0
> 
> 时间：2013-02-27T09:24:24.683
> 
> 标签：php, command-line

我使用一些命令行 PHP 脚本。作者为他们不使用shebang线。我将它们保存在`/opt/scripts`目录中。

目前，如果我想在该目录之外运行它们，我必须使用完整路径，例如

```
php /opt/scripts/foo.php 
```

我更喜欢使用

```
php foo.php 
```

不管当前目录。我可以修改`php.ini`或其他一些技巧来允许这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:16:08.137

这自然会由 include_path 指令处理，但不会被 CLI 的初始文件考虑在内；文件中使用的包含将使用includes_path。

看：

```
[root@host ~]# php -v
PHP 5.2.9 (cli) (built: Oct 17 2010 16:55:28)
Copyright (c) 1997-2009 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2009 Zend Technologies
[root@host ~]# php -i | grep include_path
include_path => .:/usr/lib/php:/usr/local/lib/php => .:/usr/lib/php:/usr/local/lib/php
[root@host ~]# ls /usr/lib/php
Archive  Console  HTML  Net  OS  PEAR  PEAR.php  PEAR5.php  Structures  System.php  XML  build  data  doc  pearcmd.php  peclcmd.php  test
[root@host ~]# php PEAR.php
Could not open input file: PEAR.php 
```

一种替代方法是使用编写一个读取 INI 文件、将其解析为 include_path 并调用`php ${INCLUDE_PATH_PREFIX}$1`. 您必须将该路径添加到 php.ini 文件中...例如：

```
#!/bin/sh    
INCLUDE_PATH_PREFIX=grep -Ei '^include_path.*:([^ ]+)' /usr/local/lib/php.ini | grep -oEi ":[^:]+" | grep -oEi "[^:\"]+" | tail -1
php ${INCLUDE_PATH_PREFIX}$1 -c $2 
```

用法：phpinc.sh file.php /path/to/custom/php.ini

我没有在 CLI 中广泛使用 grep（通常有 PCRE API 或包装器），因此可能有更好的方法来缩小最后一个包含路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:45:32.590

您可以通过添加“/opt/scripts/”目录路径在 php.ini 中设置包含路径。

# c++ - FlasCC 支持哪些版本的 C 和 C++ 标准？

> ID：15108386
> 
> 赞同：0
> 
> 时间：2013-02-27T09:24:32.690
> 
> 标签：c++, c, flascc

我听说过 FlasCC，它是一个针对 AVM2 的 C/C++ 编译器。而且我听说它是​​基于旧版本的 GCC。(4.2??)

FlasCC 支持哪些类型/版本的 C 和 C++ 标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:33:51.900

根据[http://www.adobe.com/devnet-docs/flascc/docs/Reference.html](http://www.adobe.com/devnet-docs/flascc/docs/Reference.html)它使用标准 GCC 4.2 [http://gcc.gnu.org/onlinedocs/gcc-4.2.1/gcc/](http://gcc.gnu.org/onlinedocs/gcc-4.2.1/gcc/)，其中应该回答你的问题！

您可以查看上述 GCC 链接的“简介”部分，了解此编译器支持的内容。

# java - 文件中的 Java 字符与 C++ 字符

> ID：15108391
> 
> 赞同：1
> 
> 时间：2013-02-27T09:24:46.637
> 
> 标签：java, string, file-io, encoding, ascii

我需要从 C++ 进程编写的文件中读取字符。
这些字符肯定在 ASCII 范围内，但由于 Java char 是 16 位，而 C++ char 是 8 位，那么读取文件的最佳方法是什么？

我只知道C++进程在ascii范围内写入chars如下：file<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:37:22.893

关键是指定文件编码。你可以使用：

```
File myFile = new File("file.txt");
BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(f),"ascii")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:37:29.953

尝试使用 Guavas[文件](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html)类。

```
public static void main(String[] args) {
        try {
            List<String> lines = Files.readLines(new File("filename"),
                    Charsets.UTF_8);
            //get characters from lines

        } catch (IOException e) {
            logger.error(e, e);
        }
    } 
```

您还可以尝试该类中的其他 Read 方法，看看它们是否能很好地为您服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:02:30.990

当您在 Java 中读取一个 ascii 文件时，它将在 java 中正确地表示为 16 位字符。当您将 java char 写入文本文件时，只要您保持在 ascii 字符范围内，它将作为 8 位 ASCII 字符写入磁盘。

逐行读取文件的代码：

```
File file = new File("file.txt");
br = new BufferedReader(new FileReader(file));
String line = br.readLine();
while (line != null) {
    // Do something with the line
    line = br.readLine();
} 
```

# iphone - 我可以将 tableview 添加到具有其他控件的视图中吗？

> ID：15108395
> 
> 赞同：0
> 
> 时间：2013-02-27T09:25:02.890
> 
> 标签：iphone, ios, xcode

我可以在界面生成器中将表格视图添加到现有视图吗？

我的接口构建器如下所示

![在此处输入图像描述](../Images/33bb3bb802c1a8adaea678bedb2d0a5b.png)

但是当我在模拟器中运行代码时，您可以看到该表没有显示在与界面生成器中相同的位置，因为它覆盖了底部的按钮？？？

![在此处输入图像描述](../Images/91e53489b17db9432995e5191019da8f.png)

**更新...**我有点进步，但底部的按钮被隐藏了？？

![在此处输入图像描述](../Images/1fa2f636c903400ed1027ab6fa3bda64.png)

**已修复...**按照建议使用以下代码:)

```
 - (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {

UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.frame.size.width, 40)];

view.backgroundColor = [UIColor whiteColor];

UIButton *buttonA = [UIButton buttonWithType:UIButtonTypeRoundedRect];
buttonA.frame = CGRectMake(101,5,118,29);
[buttonA setTitle:@"Save & Exit" forState:UIControlStateNormal];
buttonA.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;

[view addSubview:buttonA];

UIButton *buttonB = [UIButton buttonWithType:UIButtonTypeRoundedRect];
buttonB.frame = CGRectMake(254,5,56,29);
[buttonB setTitle:@"Next" forState:UIControlStateNormal];
buttonB.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;

[view addSubview:buttonB];

return view; 
```

}

```
 - (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
return 40; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:33:11.650

确保已将 tableview 的委托和数据源附加到文件所有者。您还必须至少实现这两种方法。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

// Row display. Implementers should *always* try to reuse cells by setting each cell's reuseIdentifier and querying for available reusable cells with dequeueReusableCellWithIdentifier:
// Cell gets various attributes set automatically based on table (separators) and data source (accessory views, editing controls)

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

[例如，检查此链接！](http://www.idev101.com/code/User_Interface/UITableView/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:39:49.680

将自动调整大小应用于 .xib 文件中的这些子视图，如下所示......

![在此处输入图像描述](../Images/ed6b2028660407fd28d67c35a6364486.png)

或者

您可以使用以下功能以编程方式更改..

```
UIViewAutoresizing
Specifies how a view is automatically resized.

enum {
   UIViewAutoresizingNone                 = 0,
   UIViewAutoresizingFlexibleLeftMargin   = 1 << 0,
   UIViewAutoresizingFlexibleWidth        = 1 << 1,
   UIViewAutoresizingFlexibleRightMargin  = 1 << 2,
   UIViewAutoresizingFlexibleTopMargin    = 1 << 3,
   UIViewAutoresizingFlexibleHeight       = 1 << 4,
   UIViewAutoresizingFlexibleBottomMargin = 1 << 5
}; 
```

例子是：

```
 [yourViews.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoResizingFlexibleWidth]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:41:05.737

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 
```

在数据源方法中返回页脚视图（包含“保存和编辑”和“下一步”UIButtons 的 UIView）。

# asp.net - 关于 Asp.net 会员资格的查询

> ID：15108400
> 
> 赞同：0
> 
> 时间：2013-02-27T09:25:08.083
> 
> 标签：asp.net, web-config, asp.net-membership, role

我的要求是 1）创建一个角色并将用户添加到该特定角色。2）我有一个目录 Admin，其中包含一个 aspx 页面，只能由管理员访问 3）所以如果他尝试将任何 aspx 页面访问到文件夹中，我想将用户重定向到登录页面。

实现这个

我使用 Asp.net 成员资格来创建用户和角色以及制作登录表单的各种功能。问题是每次我需要打开 asp.net 配置以创建新用户并将该用户分配给特定角色时。如果我在实时站点上部署我的网站。那么我现在如何添加用户。

我正在列出我的网络配置文件

```
<configuration>
  <connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=true;Initial Catalog=Web24;" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <authentication mode="Forms">
      <forms loginUrl="~/WebForm1.aspx" timeout="2880"/>
    </authentication>
    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
      </providers>
    </membership>
    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>
    <roleManager enabled="true">
      <providers>
        <clear/>
        <add connectionStringName="ApplicationServices" applicationName="/" name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider"/>
        <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider"/>
      </providers>
    </roleManager>

  </system.web>
  <location path="Admin">
    <system.web>
    <authorization>
      <deny users="?" />
      <!--Deny all Anonymous (not logged in) users-->
      <allow roles="Admin"/>
      <!--Permit users in these roles-->
      <deny users="*"/>
      <!--Deny all users-->
    </authorization>
    </system.web>
  </location>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

如果 Asp.net 会员资格不可能，那么我应该遵循什么其他方法来满足我的要求。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:35:35.223

您可以在创建用户表单中使用它。可以通过此代码添加用户名和密码

尝试一下。如果你有任何疑问，请写信给我。

```
Membership.CreateUser("Username", "Password");
            Roles.AddUserToRole("username", "RoleName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:44:08.620

您可以为管理员创建一个页面，他可以在其中添加用户，例如

aspx

```
 <tr>
        <td>
            Username:</td>
        <td>
            <asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            Password:</td>
        <td>
            <asp:TextBox ID="txtUserPass" runat="server" TextMode="Password"></asp:TextBox>
        </td>
    </tr>

  <tr>
        <td valign=top>
            Roles:</td>
        <td>
            <asp:CheckBoxList ID="cblRoles" runat="server">
                <asp:ListItem>Admin</asp:ListItem>
                <asp:ListItem>Role 1</asp:ListItem>
                <asp:ListItem>Role 2</asp:ListItem>
            </asp:CheckBoxList></td>
    </tr>
    <tr>
        <td>
            &nbsp;</td>
        <td>
            <asp:Button ID="btnSave" runat="server" Text="Save" onclick="btnSave_Click" />
        </td>
    </tr> 
```

aspx.cs

```
 protected void btnSave_Click(object sender, EventArgs e)
    {
        MembershipCreateStatus createStatus;
        MembershipUser newUser = Membership.CreateUser(txtUserName.Text, txtUserPass.Text, null, null, null, true, out createStatus);

        if (newUser != null)
        {
          foreach (ListItem li in cblRoles.Items)
            {
                if (li.Selected)
                {
                    Roles.AddUserToRole(txtUserName.Text, li.Value.ToString());
                }
            }
         }
    } 
```

# php - 使用预设变量提取列名，然后在查询中使用它

> ID：15108403
> 
> 赞同：0
> 
> 时间：2013-02-27T09:25:31.173
> 
> 标签：php, mysql

我正在尝试为预订公司创建定价系统，我有一个充满价格的数据库表。典型的行如下所示：

```
priceID  |  manufac  |  model  |  janDay  | janWeek  |  febDay  |  febWeek  |  etc etc
--------------------------------------------------------------------------------------
1        |Chevrolelt |  Matiz  |  40.00   |  133.00  |  40.00   |  133.00   |  etc etc 
```

基本上我有一个变量：

```
$startmonth 
```

这个变量是由我的代码确定月份设置的，并根据它的编号为其分配一个值。在这种情况下，让我们假设它已经完成并获得了值：

```
$startmonth = 'febWeek'; 
```

然后我有另一个查询来找出汽车的型号，我已经对此进行了测试，它返回了型号，所以我们知道：

```
$model = 'Matiz'; 
```

然后我执行另一个查询来获得价格：

```
$getprice = mysql_query("SELECT '".$startmonth."' FROM prices WHERE model = '".$model."' ");
while($ppdrow = mysql_fetch_assoc($getprice)) {

   $priceperday = $ppdrow;

} 
```

我已经尝试了很多方法这个查询，但我总是以错误或不受欢迎的结果告终。什么时候应该返回**133.00**。

它实际返回的内容：

```
( [2] => 2 ) 
```

我可能正在做一些非常愚蠢的事情，但是谁能告诉我什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:30:17.380

你可以试试这个

```
$getprice = mysql_query("SELECT ".$startmonth." FROM prices WHERE model ='".$model."'   ");
while($ppdrow = mysql_fetch_assoc($getprice)) {

 $priceperday = $ppdrow[$startmonth];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:28:36.257

试试这个查询：

```
$getprice = mysql_query("SELECT `".$startmonth."` FROM prices WHERE model = '".$model."' "); 
```

注意在单引号位置的反引号（列名周围）。

至于 while 循环，您正在尝试设置`$priceperday`equal to `$ppdrow`，这是一个数组。您想将其设置为数组中的正确值（列*）*：

```
while($ppdrow = mysql_fetch_assoc($getprice)) {
   $priceperday = $ppdrow[$startmonth];
} 
```

另请阅读[为什么不使用`mysql_*`](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

# java - 如何在 RCP 插件开发中关闭 MessageBox？

> ID：15108404
> 
> 赞同：0
> 
> 时间：2013-02-27T09:25:39.847
> 
> 标签：java, eclipse, eclipse-plugin

我在开发 Eclipse 插件时创建了一个 MessageBox，当您执行某些操作时会打开它......但是即使我在那个 messageBox 上说“OK”，对话框 MessageBox 也会一次又一次地出现......

任何人都可以告诉我如何在向用户显示 MessageBox 后关闭它。

要打开对话框，我编写了以下代码： MessageBox dialog = new MessageBox(new Shell(), SWT.OK); dialog.setMessage("一些消息"); dialog.setText("标题"); 对话框.open();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:26:38.670

您的问题与您发布的代码无关。请向我们提供更多信息。**还要考虑在MessageBox**构造函数中将当前活动小部件的外壳设置为父外壳（例如**new MessageBox(swtControl.getShell(), SWT.OK)**。否则对话框可能不是模态的。这取决于模态样式**壳牌**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:04:24.560

经过研究，我发现您需要处理完成特定操作后不再需要的组件。因此，一旦出现我的 MessageDialog 并且用户单击确定...我需要使用 Display.getCurrent().dispose() 处理我的 MessageDialog

# c# - 字符串到 byte[] 数组，反之亦然

> ID：15108413
> 
> 赞同：1
> 
> 时间：2013-02-27T09:26:05.940
> 
> 标签：c#, encryption, cryptography, aes

我正在实现自己的 AES 代码，但在解密过程中遇到了一些问题。

```
byte[] output;
output = Encrypt(EncryptBufferInput);//encrypt "12",output[] is 300532188151293E4ACA3BA529B821C1
str.Append(Encoding.ASCII.GetString(output) );

output = Decrypt(DecryptBufferInput);//in hex, DecryptBufferInput should be "300532188151293E4ACA3BA529B821C1"
str.Append(Encoding.ASCII.GetString(output));//does not decrypt back to "12" 
```

所以，如果我尝试加密“12”，它会给我一个十六进制形式的“300532188151293E4ACA3BA529B821C1”值。当我尝试将其解密回“12”时，它给了我一个错误的值，因为 DecryptBufferInput 不是“300532188151293E4ACA3BA529B821C1”而是其他一些值......只有前几个值是相同的。EncryptBufferInput 和 DecryptBufferInput 都是 byte[] 数组，我使用 Encoding.ASCII.GetBytes(string) 用相应的字符串（要加密的字符串或要解密的字符串）填充字节数组。我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:30:24.367

您从中获得的二进制文件`Encrypt`不代表文本数据，因此您不应**使用**`Encoding`. 改为使用`Convert.ToBase64String`并`Convert.FromBase64String`反转它。[另请参阅](http://marcgravell.blogspot.ru/2013/02/how-many-ways-can-you-mess-up-io.html)。

在解码步骤中，需要颠倒顺序；所以：如果你正在接受字符串输入，你将需要：

加密：

*   以字符串开头：`"12"`
*   使用`Encoding`(preferably `Encoding.UTF8`) 获取 a`byte[]`进行加密
*   `Encrypt`与未加密一起使用`byte[]`以获取加密`byte[]`
*   `Convert.ToBase64String`如果需要，可以将其表示为字符串
*   以加密字符串结尾

解密：

*   以加密字符串开头
*   用于`Convert.FromBase64String`获取加密`byte[]`
*   `Decrypt`与加密一起使用`byte[]`以获取未加密的`byte[]`
*   使用*相同* `Encoding`的获取字符串
*   以字符串结尾：`"12"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:30:16.507

你在哪里设置`EncryptBufferInput`和`DecryptBufferInput`？我认为你的`Encrypt`和`Decrypt`方法都带字符串，所以我会试试这个：

```
byte[] output = Encrypt(EncryptBufferInput);
string encryptedOutput = Convert.ToBas64String(output);
str.Append(encryptedOutput);

byte[] decrypted = Decrypt(Convert.FromBase64String(encryptedOutput));
string decryptedOutput = Encoding.ASCII.GetString(decrypted);
str.Append(decryptedOutput); 
```

如果他们采取`byte[]`：

```
byte[] output = Encrypt(EncryptBufferInput);
string encryptedOutput = Convert.ToBase64String(output);
str.Append(encryptedOutput);

byte[] decrypted = Decrypt(output);
string decryptedOutput = Encoding.ASCII.GetString(decrypted);
str.Append(decryptedOutput); 
```

请注意：ASCII 和泰语、德语、俄语、希腊语（以及许多其他语言）不能很好地结合使用——使用 Unicode 或至少 UTF8。

# c# - image.Save() 的默认压缩级别是多少？

> ID：15108416
> 
> 赞同：2
> 
> 时间：2013-02-27T09:26:13.383
> 
> 标签：c#, image-processing

什么是`Image.save()`默认压缩级别以及保存后输出图像的默认质量是多少？

# javascript - 把图标变成黑白

> ID：15108417
> 
> 赞同：1
> 
> 时间：2013-02-27T09:26:13.927
> 
> 标签：javascript, jquery, html, css, internet-explorer

我的代码中有以下图标：

HTML：

```
<a href="#" id="PickUp" class="PickUpIcon"></a> 
```

CSS：

```
width: 24px;
height: 24px;
background: url(../images/Icons/Answer.jpg) no-repeat;
cursor: pointer; 
```

它看起来像这样：![在此处输入图像描述](../Images/073ae535ce18102e942a83b3347b4265.png)

我想（使用 css、js 或 jQuery）把这个图标变成这样的东西：![在此处输入图像描述](../Images/e47228f7b30e9ddf86bdb94da7c05343.png)

意思是把彩色图标变成黑白的，有可能吗？

我正在使用 html 4、CSS2 和 IE 8（我不能使用 HTML5 或其他浏览器）

我知道我可以使用 2 个不同的图标，但我想知道是否还有另一种可能性，因为可以动态添加图标，我不希望每个人都需要提供 2 个图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:30:13.930

你可以用 SVG 做到这一点

检查这个答案[https://stackoverflow.com/a/8612047/1033200](https://stackoverflow.com/a/8612047/1033200)

```
<svg xmlns="http://www.w3.org/2000/svg">
 <filter id="grayscale">
  <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"/>
 </filter>
</svg> 
```

然后使用这个 CSS：- [**[演示](http://dl.dropbox.com/u/11137205/grayscale.html)**]

```
img {
    filter: url(filters.svg#grayscale); /* Firefox 3.5+ */
    filter: gray; /* IE6-9 */
    -webkit-filter: grayscale(1); /* Google Chrome & Safari 6+ */
} 
```

要在悬停时禁用灰度，您可以使用：-

```
img:hover {
    filter: none;
    -webkit-filter: grayscale(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:32:20.107

您可以使用`filter: grayscale(100%);`，尽管它目前仅受 Chrome 支持。

```
<a href="#" id="PickUp" class="PickUpIcon">
    <img src='http://i.stack.imgur.com/tVNmr.jpg' class="bw" />
</a>

img.bw {
    filter: grayscale(100%);
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    -o-filter: grayscale(100%);
    width: 24px;
    height: 24px;
    cursor: pointer;
} 
```

[http://jsfiddle.net/ruslans/ZK3dY/](http://jsfiddle.net/ruslans/ZK3dY/)

[来源](http://demosthenes.info/blog/532/Convert-Images-To-Black-And-White-With-CSS)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:30:56.313

```
 img { 
     filter: grayscale(100%);
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    -o-filter: grayscale(100%);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:34:42.573

我之前在一些网站上使用过它，它应该是完全跨浏览器兼容的：

```
element { 
    filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");
    filter:gray;
    -webkit-filter: grayscale(100%);
    -o-filter: grayscale(100%);
    filter: gray(1);
    filter: grayscale(100%);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T09:36:10.200

```
a { 
width: 24px;
height: 24px;
background: url(http://i.stack.imgur.com/tVNmr.jpg) no-repeat;
cursor: pointer;
display: block;
filter: grayscale(100%);
-webkit-filter: grayscale(100%);
-moz-filter: grayscale(100%);
-ms-filter: grayscale(100%);
-o-filter: grayscale(100%);
} 
```

**[样本](http://jsfiddle.net/ssszv/1/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T09:37:01.373

您可以使用[CSS 精灵](http://css-tricks.com/css-sprites/)。

无处不在，几乎在每个网站中都使用。

您可以使用两个图像并排的图标，并通过调整`background-position`和`width`和仅显示图像的`height`一部分`background-image`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T09:38:26.700

```
.PickUpIcon a:hover {
  width: 24px;
  height: 24px;
  background: url(../images/Icons/Answer_grey.jpg) no-repeat;
  cursor: pointer;
} 
```

Answer_grey.jpg 是您的灰色图像。这很简单，并且适用于所有浏览器。有更好的方法将两个图像（绿色和灰色）添加到一个图像并在悬停时更改您显示的图像的哪一部分。这更好，因为您加载了第 1 页图像并且当您在它上面时它没问题，但是如果您有 2 张图像然后在悬停时您会看到这个图像是如何加载的（如果这个图像很大）。

# ios - iOS GoogleMaps SDK 错误：“[__NSCFDictionary objectForKeyedSubscript:]: Unrecognized selector sent”

> ID：15108418
> 
> 赞同：2
> 
> 时间：2013-02-27T09:26:13.823
> 
> 标签：ios, google-maps, ios5.1, google-maps-sdk-ios

我遵循[开始](https://developers.google.com/maps/documentation/ios/start?hl=es)使用 google maps for ios 的每一步，我做的一切都很好，但是在我尝试的每个示例中，模拟器开始询问我是否要打开 GPS，然后，它会抛出错误：

```
2013-03-07 16:05:09.135 Cicerone4all[352:14e03] Google Maps SDK for iOS version: 1.1.0.2080
2013-03-07 16:05:09.750 Cicerone4all[352:10d03] -[__NSCFDictionary objectForKeyedSubscript:]: unrecognized selector sent to instance 0xcac9b40
2013-03-07 16:05:09.755 Cicerone4all[352:10d03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary objectForKeyedSubscript:]: unrecognized selector sent to instance 0xcac9b40'
*** First throw call stack:
(0x24a5022 0x2636d0a 0x24a6cbd 0x240bed0 0x240bcb2 0xc7d21 0x14ea9e 0x14dc05 0x15f0a6 0x15ce9e 0x1606d7 0xe5e64 0x132a43 0x131842 0x7f312f 0x7f3003 0x2479936 0x24793d7 0x23dc790 0x23dbd84 0x23dbc9b 0x2d3a7d8 0x2d3a88a 0x14dea16 0x270d 0x2675)
terminate called throwing an exception(lldb) 
```

应用委托：

```
#import "AppDelegate.h" 
#import "ViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [GMSServices provideAPIKey:@"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

@end 
```

视图控制器：

```
#import "ViewController.h"
#import <GoogleMaps/GoogleMaps.h>
@interface ViewController ()

@end

@implementation ViewController{
    GMSMapView *mapView_;
}

- (void)loadView {
    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683
                                                            longitude:151.2086
                                                                 zoom:6];
    mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];
    mapView_.myLocationEnabled = YES;
    self.view = mapView_;

    GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
    options.position = CLLocationCoordinate2DMake(-33.8683, 151.2086);
    options.title = @"Sydney";
    options.snippet = @"Australia";
    [mapView_ addMarkerWithOptions:options];
}

@end 
```

堆栈跟踪：

UIKit`UIApplicationMain:

```
0x14de58b:  pushl  %ebp
0x14de58c:  movl   %esp, %ebp
0x14de58e:  pushl  %ebx
0x14de58f:  pushl  %edi
0x14de590:  pushl  %esi
0x14de591:  subl   $44, %esp
0x14de594:  calll  0x014de599               ; UIApplicationMain + 14
0x14de599:  popl   %eax
0x14de59a:  movl   %eax, -16(%ebp)
0x14de59d:  movl   $1, (%esp)
0x14de5a4:  calll  0x014dbc6e               ; _UIApplicationLinkedOnOrAfter
0x14de5a9:  xorl   %ecx, %ecx
0x14de5ab:  testb  %al, %al
0x14de5ad:  je     0x014de5de               ; UIApplicationMain + 83
0x14de5af:  movl   -16(%ebp), %esi
0x14de5b2:  movl   6976791(%esi), %eax
0x14de5b8:  movl   6929119(%esi), %ecx
0x14de5be:  movl   %ecx, 4(%esp)
0x14de5c2:  movl   %eax, (%esp)
0x14de5c5:  calll  0x0198790a               ; objc_msgSend
0x14de5ca:  movl   6929295(%esi), %ecx
0x14de5d0:  movl   %ecx, 4(%esp)
0x14de5d4:  movl   %eax, (%esp)
0x14de5d7:  calll  0x0198790a               ; objc_msgSend
0x14de5dc:  movl   %eax, %ecx
0x14de5de:  movl   %ecx, -20(%ebp)
0x14de5e1:  movl   8(%ebp), %edi
0x14de5e4:  cmpl   $2, %edi
0x14de5e7:  jl     0x014de659               ; UIApplicationMain + 206
0x14de5e9:  movl   12(%ebp), %ebx
0x14de5ec:  addl   $4, %ebx
0x14de5ef:  decl   %edi
0x14de5f0:  movl   (%ebx), %esi
0x14de5f2:  movl   -16(%ebp), %eax
0x14de5f5:  leal   5455388(%eax), %eax
0x14de5fb:  movl   %eax, 4(%esp)
0x14de5ff:  movl   %esi, (%esp)
0x14de602:  calll  0x01987a3c               ; strcmp
0x14de607:  testl  %eax, %eax
0x14de609:  jne    0x014de617               ; UIApplicationMain + 140
0x14de60b:  movl   -16(%ebp), %eax
0x14de60e:  movb   $1, 7181316(%eax)
0x14de615:  jmp    0x014de653               ; UIApplicationMain + 200
0x14de617:  movl   -16(%ebp), %eax
0x14de61a:  leal   5450169(%eax), %eax
0x14de620:  movl   %eax, 4(%esp)
0x14de624:  movl   %esi, (%esp)
0x14de627:  calll  0x01987a3c               ; strcmp
0x14de62c:  testl  %eax, %eax
0x14de62e:  je     0x014de649               ; UIApplicationMain + 190
0x14de630:  movl   -16(%ebp), %eax
0x14de633:  leal   5450194(%eax), %eax
0x14de639:  movl   %eax, 4(%esp)
0x14de63d:  movl   %esi, (%esp)
0x14de640:  calll  0x01987a3c               ; strcmp
0x14de645:  testl  %eax, %eax
0x14de647:  jne    0x014de653               ; UIApplicationMain + 200
0x14de649:  movl   -16(%ebp), %eax
0x14de64c:  movb   $1, 7181319(%eax)
0x14de653:  addl   $4, %ebx
0x14de656:  decl   %edi
0x14de657:  jne    0x014de5f0               ; UIApplicationMain + 101
0x14de659:  movl   16(%ebp), %ebx
0x14de65c:  calll  0x014e1026               ; UIApplicationInitialize
0x14de661:  movl   -16(%ebp), %edx
0x14de664:  movl   6976747(%edx), %eax
0x14de66a:  movl   6928967(%edx), %ecx
0x14de670:  movl   %edx, %esi
0x14de672:  movl   %ecx, 4(%esp)
0x14de676:  movl   %eax, (%esp)
0x14de679:  calll  0x0198790a               ; objc_msgSend
0x14de67e:  movl   %eax, %edi
0x14de680:  testl  %ebx, %ebx
0x14de682:  jne    0x014de6cc               ; UIApplicationMain + 321
0x14de684:  movl   6976767(%esi), %eax
0x14de68a:  movl   6929687(%esi), %ecx
0x14de690:  movl   %ecx, 4(%esp)
0x14de694:  movl   %eax, (%esp)
0x14de697:  calll  0x0198790a               ; objc_msgSend
0x14de69c:  movl   6929695(%esi), %ecx
0x14de6a2:  movl   %ecx, 4(%esp)
0x14de6a6:  movl   %eax, (%esp)
0x14de6a9:  calll  0x0198790a               ; objc_msgSend
0x14de6ae:  movl   6929699(%esi), %ecx
0x14de6b4:  leal   7032327(%esi), %edx
0x14de6ba:  movl   %edx, 8(%esp)
0x14de6be:  movl   %ecx, 4(%esp)
0x14de6c2:  movl   %eax, (%esp)
0x14de6c5:  calll  0x0198790a               ; objc_msgSend
0x14de6ca:  movl   %eax, %ebx
0x14de6cc:  movl   6929707(%esi), %eax
0x14de6d2:  movl   %eax, 4(%esp)
0x14de6d6:  movl   %ebx, (%esp)
0x14de6d9:  calll  0x0198790a               ; objc_msgSend
0x14de6de:  testl  %eax, %eax
0x14de6e0:  je     0x014de78e               ; UIApplicationMain + 515
0x14de6e6:  movl   %ebx, (%esp)
0x14de6e9:  calll  0x01987214               ; NSClassFromString
0x14de6ee:  movl   %eax, %edi
0x14de6f0:  testl  %edi, %edi
0x14de6f2:  jne    0x014de78e               ; UIApplicationMain + 515
0x14de6f8:  movl   6976639(%esi), %eax
0x14de6fe:  movl   6928919(%esi), %ecx
0x14de704:  movl   %ecx, 4(%esp)
0x14de708:  movl   %eax, (%esp)
0x14de70b:  calll  0x0198790a               ; objc_msgSend
0x14de710:  movl   %eax, -16(%ebp)
0x14de713:  movl   6976643(%esi), %eax
0x14de719:  movl   6928923(%esi), %ecx
0x14de71f:  leal   5450237(%esi), %edx
0x14de725:  movl   %edx, 8(%esp)
0x14de729:  movl   %ecx, 4(%esp)
0x14de72d:  movl   %eax, (%esp)
0x14de730:  calll  0x0198790a               ; objc_msgSend
0x14de735:  movl   %eax, %edi
0x14de737:  movl   6976643(%esi), %eax
0x14de73d:  movl   6928923(%esi), %ecx
0x14de743:  leal   5448982(%esi), %edx
0x14de749:  movl   %edx, 8(%esp)
0x14de74d:  movl   %ecx, 4(%esp)
0x14de751:  movl   %eax, (%esp)
0x14de754:  calll  0x0198790a               ; objc_msgSend
0x14de759:  movl   6930011(%esi), %ecx
0x14de75f:  movl   %ebx, 24(%esp)
0x14de763:  leal   7032343(%esi), %edx
0x14de769:  movl   %edx, 20(%esp)
0x14de76d:  movl   %eax, 12(%esp)
0x14de771:  movl   %edi, 8(%esp)
0x14de775:  movl   %ecx, 4(%esp)
0x14de779:  movl   -16(%ebp), %eax
0x14de77c:  movl   %eax, (%esp)
0x14de77f:  movl   $1732, 16(%esp)
0x14de787:  calll  0x0198790a               ; objc_msgSend
0x14de78c:  xorl   %edi, %edi
0x14de78e:  leal   1159(%esi), %eax
0x14de794:  movl   %eax, (%esp)
0x14de797:  calll  0x019870be               ; GSEventRegisterEventCallBack
0x14de79c:  movl   6928967(%esi), %eax
0x14de7a2:  movl   %eax, 4(%esp)
0x14de7a6:  movl   %edi, (%esp)
0x14de7a9:  calll  0x0198790a               ; objc_msgSend
0x14de7ae:  movl   6929831(%esi), %ecx
0x14de7b4:  movl   %ecx, 4(%esp)
0x14de7b8:  movl   %eax, (%esp)
0x14de7bb:  calll  0x0198790a               ; objc_msgSend
0x14de7c0:  testb  %al, %al
0x14de7c2:  setne  %al
0x14de7c5:  movzbl %al, %eax
0x14de7c8:  movl   %eax, (%esp)
0x14de7cb:  calll  0x01987070               ; GSEventInitialize
0x14de7d0:  movl   6432387(%esi), %eax
0x14de7d6:  movl   (%eax), %eax
0x14de7d8:  movl   %eax, (%esp)
0x14de7db:  calll  0x019870ac               ; GSEventPushRunLoopMode
0x14de7e0:  calll  0x019873b2               ; SBSSpringBoardServerPort
0x14de7e5:  movl   6432211(%esi), %ecx
0x14de7eb:  movl   (%ecx), %ecx
0x14de7ed:  movl   %ecx, 4(%esp)
0x14de7f1:  movl   %eax, (%esp)
0x14de7f4:  calll  0x0198731c               ; SBCheckInTaskPort
0x14de7f9:  movl   6930015(%esi), %eax
0x14de7ff:  movl   %eax, 4(%esp)
0x14de803:  movl   %edi, (%esp)
0x14de806:  calll  0x0198790a               ; objc_msgSend
0x14de80b:  movl   %edi, (%esp)
0x14de80e:  calll  0x014de40d               ; UIApplicationInstantiateSingleton
0x14de813:  movl   6976647(%esi), %eax
0x14de819:  movl   6928943(%esi), %ecx
0x14de81f:  movl   %ecx, 4(%esp)
0x14de823:  movl   %eax, (%esp)
0x14de826:  calll  0x0198790a               ; objc_msgSend
0x14de82b:  movl   6928975(%esi), %ecx
0x14de831:  movl   %esi, %edi
0x14de833:  movl   %ecx, 4(%esp)
0x14de837:  movl   %eax, (%esp)
0x14de83a:  calll  0x0198790a               ; objc_msgSend
0x14de83f:  testb  %al, %al
0x14de841:  je     0x014de85b               ; UIApplicationMain + 720
0x14de843:  movl   6976831(%edi), %eax
0x14de849:  movl   6930019(%edi), %ecx
0x14de84f:  movl   %ecx, 4(%esp)
0x14de853:  movl   %eax, (%esp)
0x14de856:  calll  0x0198790a               ; objc_msgSend
0x14de85b:  movl   20(%ebp), %ebx
0x14de85e:  testl  %ebx, %ebx
0x14de860:  jne    0x014de8b2               ; UIApplicationMain + 807
0x14de862:  movl   6976767(%edi), %eax
0x14de868:  movl   6929687(%edi), %ecx
0x14de86e:  movl   %ecx, 4(%esp)
0x14de872:  movl   %eax, (%esp)
0x14de875:  calll  0x0198790a               ; objc_msgSend
0x14de87a:  movl   6929695(%edi), %ecx
0x14de880:  movl   %ecx, 4(%esp)
0x14de884:  movl   %eax, (%esp)
0x14de887:  calll  0x0198790a               ; objc_msgSend
0x14de88c:  movl   6929699(%edi), %ecx
0x14de892:  leal   7032359(%edi), %edx
0x14de898:  movl   %edx, 8(%esp)
0x14de89c:  movl   %ecx, 4(%esp)
0x14de8a0:  movl   %eax, (%esp)
0x14de8a3:  calll  0x0198790a               ; objc_msgSend
0x14de8a8:  movl   %eax, %ebx
0x14de8aa:  testl  %ebx, %ebx
0x14de8ac:  je     0x014de9e9               ; UIApplicationMain + 1118
0x14de8b2:  movl   %ebx, (%esp)
0x14de8b5:  calll  0x01987214               ; NSClassFromString
0x14de8ba:  testl  %eax, %eax
0x14de8bc:  movl   %eax, -16(%ebp)
0x14de8bf:  jne    0x014de959               ; UIApplicationMain + 974
0x14de8c5:  movl   6976639(%edi), %eax
0x14de8cb:  movl   6928919(%edi), %ecx
0x14de8d1:  movl   %ecx, 4(%esp)
0x14de8d5:  movl   %eax, (%esp)
0x14de8d8:  calll  0x0198790a               ; objc_msgSend
0x14de8dd:  movl   %eax, -24(%ebp)
0x14de8e0:  movl   6976643(%edi), %eax
0x14de8e6:  movl   6928923(%edi), %ecx
0x14de8ec:  leal   5450237(%edi), %edx
0x14de8f2:  movl   %edx, 8(%esp)
0x14de8f6:  movl   %ecx, 4(%esp)
0x14de8fa:  movl   %eax, (%esp)
0x14de8fd:  calll  0x0198790a               ; objc_msgSend
0x14de902:  movl   %eax, %esi
0x14de904:  movl   6976643(%edi), %eax
0x14de90a:  movl   6928923(%edi), %ecx
0x14de910:  leal   5448982(%edi), %edx
0x14de916:  movl   %edx, 8(%esp)
0x14de91a:  movl   %ecx, 4(%esp)
0x14de91e:  movl   %eax, (%esp)
0x14de921:  calll  0x0198790a               ; objc_msgSend
0x14de926:  movl   6930011(%edi), %ecx
0x14de92c:  movl   %ebx, 24(%esp)
0x14de930:  leal   7032375(%edi), %edx
0x14de936:  movl   %edx, 20(%esp)
0x14de93a:  movl   %eax, 12(%esp)
0x14de93e:  movl   %esi, 8(%esp)
0x14de942:  movl   %ecx, 4(%esp)
0x14de946:  movl   -24(%ebp), %eax
0x14de949:  movl   %eax, (%esp)
0x14de94c:  movl   $1765, 16(%esp)
0x14de954:  calll  0x0198790a               ; objc_msgSend
0x14de959:  movl   6976747(%edi), %eax
0x14de95f:  movl   6928967(%edi), %ecx
0x14de965:  movl   %ecx, 4(%esp)
0x14de969:  movl   %eax, (%esp)
0x14de96c:  calll  0x0198790a               ; objc_msgSend
0x14de971:  movl   6930023(%edi), %ecx
0x14de977:  movl   %eax, 8(%esp)
0x14de97b:  movl   %ecx, 4(%esp)
0x14de97f:  movl   -16(%ebp), %esi
0x14de982:  movl   %esi, (%esp)
0x14de985:  calll  0x0198790a               ; objc_msgSend
0x14de98a:  movl   7181311(%edi), %ebx
0x14de990:  testb  %al, %al
0x14de992:  je     0x014de9a7               ; UIApplicationMain + 1052
0x14de994:  movl   6929035(%edi), %eax
0x14de99a:  movl   %ebx, 8(%esp)
0x14de99e:  movl   %eax, 4(%esp)
0x14de9a2:  movl   %ebx, (%esp)
0x14de9a5:  jmp    0x014de9e4               ; UIApplicationMain + 1113
0x14de9a7:  movl   6929119(%edi), %eax
0x14de9ad:  movl   %eax, 4(%esp)
0x14de9b1:  movl   %esi, (%esp)
0x14de9b4:  calll  0x0198790a               ; objc_msgSend
0x14de9b9:  movl   6929295(%edi), %ecx
0x14de9bf:  movl   %ecx, 4(%esp)
0x14de9c3:  movl   %eax, (%esp)
0x14de9c6:  calll  0x0198790a               ; objc_msgSend
0x14de9cb:  movl   6930027(%edi), %ecx
0x14de9d1:  movl   %eax, 8(%esp)
0x14de9d5:  movl   %ecx, 4(%esp)
0x14de9d9:  movl   %ebx, (%esp)
0x14de9dc:  movl   $1, 12(%esp)
0x14de9e4:  calll  0x0198790a               ; objc_msgSend
0x14de9e9:  movl   6928887(%edi), %eax
0x14de9ef:  movl   %eax, 4(%esp)
0x14de9f3:  movl   -20(%ebp), %eax
0x14de9f6:  movl   %eax, (%esp)
0x14de9f9:  calll  0x0198790a               ; objc_msgSend
0x14de9fe:  movl   7181311(%edi), %eax
0x14dea04:  movl   6930031(%edi), %ecx
0x14dea0a:  movl   %ecx, 4(%esp)
0x14dea0e:  movl   %eax, (%esp)
0x14dea11:  calll  0x0198790a               ; objc_msgSend
0x14dea16:  xorl   %eax, %eax            <<<<<<<<<<<<<<<<<<<<<<<<<< Signal SIGABRT
0x14dea18:  addl   $44, %esp
0x14dea1b:  popl   %esi
0x14dea1c:  popl   %edi
0x14dea1d:  popl   %ebx
0x14dea1e:  popl   %ebp
0x14dea1f:  ret 
```

注意：在加载我的 ViewController 的 View 之前会引发错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:20:02.647

`-ObjC`您是否在说明的第 7 步中添加了标志？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T07:04:37.593

我有同样的期望，并通过将 -ObjC 添加到构建设置中的其他链接器标志来解决

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T15:35:51.850

其他人从谷歌的文档中提到了以下部分

> 选择您的项目，而不是特定目标，然后打开 Build Settings 选项卡。在其他链接器标志部分中，添加 -ObjC。如果这些设置不可见，请将 Build Settings 栏中的过滤器从 Basic 更改为 All。

但是，直到我将 -ObjC 标志添加到我的项目“其他链接器标志”部分，而不是目标“其他链接器标志”部分，我才能够解决无法识别的选择器错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T16:11:33.390

你可能想看看这个问题：[objectForKeyedSubscript: crash on iOS 5.1](https://stackoverflow.com/questions/13544629/objectforkeyedsubscript-crash-on-ios-5-1)

顺便问一下，您使用的是什么版本的 Xcode？您使用的 iOS SDK 版本是什么？

* * *

使用适用于 iOS 的 Google Maps SDK 开发应用程序需要满足以下条件：

*   Xcode 4.5 或更高版本。
*   iOS SDK 6.0 或更高版本。

使用 Google Maps SDK for iOS 的应用程序可以在 iOS 5.1 及更高版本上运行。

[https://developers.google.com/maps/documentation/ios/intro](https://developers.google.com/maps/documentation/ios/intro)

# ruby - Ruby MRI 1.8.7 - 文件写入线程安全

> ID：15108424
> 
> 赞同：4
> 
> 时间：2013-02-27T09:26:29.093
> 
> 标签：ruby, multithreading, file, concurrency

在我看来，在 Ruby MRI 1.8.7 中写入文件是完全线程安全的。

示例 1 - 完美的结果：

```
File.open("test.txt", "a") { |f|
  threads = []
  1_000_000.times do |n|
    threads << Thread.new do
      f << "#{n}content\n"
    end
  end
  threads.each { |t| t.join }
} 
```

示例 2 - 完美的结果（但速度较慢）：

```
threads = []
100_000.times do |n|
  threads << Thread.new do
    File.open("test2.txt", "a") { |f|
      f << "#{n}content\n"
    }
  end
end
threads.each { |t| t.join } 
```

所以，我无法重建我面临并发问题的场景，可以吗？

如果有人能向我解释为什么我仍然应该在这里使用 Mutex，我将不胜感激。

编辑：这是另一个更复杂的例子，它工作得很好并且没有显示并发问题：

```
def complicated(n)
  n.to_s(36).to_a.pack("m").strip * 100
end

items = (1..100_000).to_a

threads = []
10_000.times do |thread|
  threads << Thread.new do
    while item = items.pop

      sleep(rand(100) / 1000.0)
      File.open("test3.txt", "a") { |f|
        f << "#{item} --- #{complicated(item)}\n"
      }

    end
  end
end
threads.each { |t| t.join } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:23:54.183

我也无法产生错误。

您可能在这里遇到了文件锁。如果您希望多个线程写入同一个文件，它们应该都使用相同的文件对象，如下所示：

```
File.open("test.txt", "a") do |fp|
  threads = []

  500.times do |time|
    threads << Thread.new do
      fp.puts("#{time}: 1")
      sleep(rand(100) / 100.0)
      fp.puts("#{time}: 2")
    end
  end

  threads.each(&:join)
end 
```

在这个例子中，GIL 可能会让你避免任何真正的线程错误，但我不确定在使用真正线程的 JRuby 下会发生什么，并且两个写入可能同时发生。其他具有真正线程的 Ruby 引擎也是如此。

关于你应该在哪里用锁保护你的代码的问题归结为，如果你想依赖你正在使用的 Ruby 引擎应该拯救你，或者你想编写一个“应该”在所有 Ruby 引擎上工作的解决方案，无论它们是否具有使您免于并发问题的内置功能。

另一个问题是，您的操作系统和/或文件系统是否正在通过文件锁将您从线程错误中拯救出来，并且您的代码是否应该独立于操作系统和/或文件系统，这意味着您不会依赖文件-系统锁定以确保您的文件打开和写入被操作系统和/或文件系统正确同步。

我会冒昧地说，这似乎是一种很好的做法，你也可以在你身边实现锁，以确保你的代码继续工作，不管别人是哪个 Ruby 引擎、操作系统或文件系统即使大多数现代 Ruby 引擎、操作系统和文件系统都内置了这些功能，也会继续使用您的代码。

# php - PHP 两个文件模式匹配同一个文件

> ID：15108425
> 
> 赞同：0
> 
> 时间：2013-02-27T09:26:28.317
> 
> 标签：php, filepath

我有多个文件模式（由 使用`fnmatch`），但可能会出现多个文件模式匹配同一个文件。如何通过验证模式来避免它？例如文件是 example.csv，模式是`*.csv`, `example.csv`, `ex*.csv`, `ex*le.csv`, `example*`。

# xaml - 如何显示无法交互的项目集合？

> ID：15108427
> 
> 赞同：0
> 
> 时间：2013-02-27T09:26:32.957
> 
> 标签：xaml, winrt-xaml

我有一个列表，我想显示为 TextBlocks 的垂直列表。目前我正在使用 ListView，它工作正常，但我不希望用户能够与列表进行交互。目前他们可以点击它们，这会给出一个“按下”的动画。我怎样才能在没有任何交互性的情况下呈现它？我已经在使用 SelectionMode="None" 和 IsItemClickEnabled="false"。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:58:53.653

为了将来参考，您还可以使用基类**ItemsControl**代替 ListView。ListView 是 ItemsControl 的子类，具有选择项目的附加功能，当您想要一个不可选择的项目列表时，使 ItemsControl 成为一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:59:58.813

同意加里；ListBox 也比 ListView 轻得多，所以如果您不想创建自己的 ItemsControl，我建议使用 ListBox。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:43:13.963

看起来 IsHitTestVisible="False" 对我有用。

# android - JellyBean 中的通知 - 添加操作不起作用

> ID：15108431
> 
> 赞同：2
> 
> 时间：2013-02-27T09:26:46.267
> 
> 标签：android, notifications, broadcastreceiver, broadcast, android-4.2-jelly-bean

在使用自定义按钮（使用 addAction）构建 Jelly Bean 通知方面需要一些帮助。问题是，我不能让它工作。基本上，我想使用以下参数构建通知：在通知单击时，它必须启动我的一项活动，在按钮单击时 - 正在运行的播放暂停播放器，当显示通知时。我的代码是： 接收者：

```
private BroadcastReceiver onNotification = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("NOTIFICATION", "Received broadcast");
        Bundle extras = intent.getExtras();
        int state = extras.getInt("state");
        if (state == 1) {
            playPauseMethod();
        }

    }

}; 
```

在 onCreate 活动方法中，我添加了：

```
IntentFilter notif_iff = new IntentFilter(
                    MainService.NOTIF_BROADCAST);
LocalBroadcastManager.getInstance(getActivity()).registerReceiver(
                    onNotification, notif_iff); 
```

MainService 中的代码如下：

```
public static final String ACTION = "com.formatbce.mdrive.action.UPDATE_UI";
public static final String NOTIF_BROADCAST = "com.formatbce.mdrive.action.NOTIF_BRD";
Intent in = new Intent(ACTION);
Intent notifInt = new Intent(NOTIF_BROADCAST);
private NotificationManager mNM = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

private void showNotification(final int statusBarIconID,
        final int bigIconID, final int ppIconID, final String contentTitle,
        final String contentText, final boolean showIconOnly) {
    PendingIntent layoutIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, MediaFragmentActivity.class), 0);

        int state = 1;
        notifInt.setAction("blabla");
        notifInt.putExtra("state", state);
        PendingIntent mIntent = PendingIntent.getBroadcast(
                getApplicationContext(), 0, notifInt,
                PendingIntent.FLAG_UPDATE_CURRENT);
        notification = new Notification.Builder(this)
        .setContentTitle(contentTitle).setContentText(contentText)
        .setSmallIcon(bigIconID).setContentIntent(layoutIntent)
        .addAction(ppIconID, null, mIntent)
        .build();
            notification.flags |= Notification.FLAG_ONGOING_EVENT;
            mNM.notify(NOTIFICATION, notification);
} 
```

因此，当我调用 showNotification() 方法时，会显示通知，然后单击它的主体运行良好。但是当我单击一个按钮时，使用 addAction 设置，没有任何变化......我的意思是，即使 onReceive() 中的那一行也不起作用：

```
Log.d("NOTIFICATION", "Received broadcast"); 
```

这里有什么问题？我大量阅读手册，但无法得到它。有人可以解释一下，如何让它工作？谢谢！

PS当我将addAction PendingIntent更改为getActivity时，它工作正常，顺便说一句......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:08:47.653

我认为您在这里遇到的问题是 BroadcastReceiver 设置不正确。我实际上建议使用服务而不是广播接收器，只是由于广播接收器的延迟（同时，它应该很快发生，可能没什么大不了的）。

您的清单中是否正确设置了 BroadcastReceiver？

您是否能够创建一个仅调用 BroadcastReceiver 的活动（以验证它是否正常工作）？

# android - onPrepareOptionsMenu 是否与 ContextMenu 一起使用？

> ID：15108434
> 
> 赞同：1
> 
> 时间：2013-02-27T09:26:50.487
> 
> 标签：android

我`onCreateContextMenu`用来禁用其中一个菜单项，而不是`onPrepareOptionsMenu`用来启用菜单项。但由于某种原因，`onPrepareOptionMenu`系统永远不会启动。我在 2.3 版中运行我的代码。由于它不起作用，我想知道是否`onPrepareOptionsMenu`与 ContextMenu 一起工作？

有什么问题？帮助是preciated！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:49:46.973

`(OptionsMenu != ContextMenu)`

onPrepareOptions 菜单是在 3.0 中引入的，因为来自操作栏的菜单仅创建一次（在操作栏创建期间），并且仅在打开之前“准备好”。

对于上下文，您应该只使用`onCreateContextMenu`

# jquery - 使用 $.ajax 函数从 XML 文件中获取数据

> ID：15108435
> 
> 赞同：0
> 
> 时间：2013-02-27T09:26:53.977
> 
> 标签：jquery, ajax

你好朋友我是 jQuery 的新手，正在尝试开发一个 Ajax 函数来帮助我从 XML 文件获取数据到我的 html 文件下面是我的代码

**HTML**

```
<div id="myDiv"></div> <button>Get info</button> 
```

**XML**更新*

```
 <?xml version="1.0" encoding="utf-8"?>
<main><person>
    <name>Bhupesh</name>
    <last>Lohani</last>
</person>
<person>
<name>Kamal</name>
<last>Sandhu</last>
</person>

<person>
<name>Ravi</name>
<last>Kumar</last>
</person></main> 
```

**脚本**已更新*

```
 $(document).ready(function(e) {
   $("button").click(function(){
               var htmlStr = '';
               $.ajax({
                       type:'get',
                       url:"xml.xml",
                       cache: false,
                       dataType: "xml",
                       success:function(result){                          
                               var main = $(result).find('main');
                               $(main).each(function( index ) {
                                   var person = $(this).find('person')
                                       var name = $(person).find('name').text();
                                       var lastName = $(person).find('last').text();
                                       //console.log(name + ' | ' + lastName);
                                       htmlStr += '<p><b>' + name + '</b> - ' + lastName + '</p><br/>';
                               });
                               $("#myDiv").append(htmlStr);
                       }});
       });
}); 
```

当我点击我的按钮时它没有显示任何东西请帮助我

**更新**

朋友我对我的代码做了很少的修改，现在它就像

```
BhupeshKamalRavi - LohaniSandhuKumar 
```

我希望每个名字和姓氏都应该显示为

```
Bhupesh - Lohani
Kamal - Snadhu
Ravi - Kumar 
```

请帮助我的朋友

提前致谢..：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:51:17.533

检查 htmlStr 变量的范围。它仅在每个回调方法中。您需要在每个回调范围之外定义它。可以在主变量下定义它。

```
var main= ... ;
var htmlStr = ''; 
```

根据您更新的请求。我看到你不是在迭代人，你只是在迭代'main'。$(main).find('person') 将导致将两个 person 元素都分配给 'person' 变量。随后， $(person).find('name') 导致从两个 person 元素中获取名字。

您可以通过遍历 person 来快速解决这个问题。

```
 var main = $(result).find('main');
        var htmlStr = '';

        $('person', main).each(function (index) {
            var person = $(this);
            var name = $(person).find('name').text();
            var lastName = $(person).find('last').text();
            console.log(name + ' | ' + lastName);
            htmlStr += '<p><b>' + name + '</b> - ' + lastName + '</p><br/>';
        });
        $("#myDiv").append(htmlStr); 
```

# c++ - Skype 应用程序使用 SkypeKit SDK 使用 c++(vc++2010)

> ID：15108439
> 
> 赞同：-1
> 
> 时间：2013-02-27T09:27:01.907
> 
> 标签：c++, sdk, skype, skype4com

我想使用 skypeKit for c++ 开发 Skype 应用程序。如何获得适用于 c++ 的 skypeKit SDK，请指导我开始使用 skypeKit c++ 的步骤。我已经是 Skype 开发者计划的成员。有谁知道获得 SkypeKit 通常需要多长时间才能获得批准。我有一些好主意（至少我是这么认为的），我想尽快开始工作。

我在 2 月 26 日申请了 Skype 开发人员计划。我仍然没有收到关于我申请状态的回复。

由于天气不确定，我无法投入开发精力和时间，我的申请是否会被批准。所以请帮助我。等待您的回复。谢谢你的合作。问候万字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:05:15.833

在您获准加入 SkypeKit 计划之前，您不应开始开发您的解决方案。如果您的申请获得批准，那么您将获得完成项目所需的资源和文件的访问权限。

我们没有传达任何时间表，目前也没有可分享的。

谢谢

Allen Smith Skype 开发人员支持经理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:23:28.893

技术每天都在变化。即使在等待了 4 个月之后，获得 Skype 开发团队的批准现在也是一场噩梦。如果有人在等待构建某些东西，它会很长时间。从12月初开始我还在等。最后一个问题是我们不知道我们还需要等待几个月才能获得批准，因为没有任何时间表。

马库斯

# c++ - C ++函数与带有整数参数的模板？

> ID：15108444
> 
> 赞同：8
> 
> 时间：2013-02-27T09:27:22.717
> 
> 标签：c++, function, templates

阅读 Wikibook [Optimizing C++](http://en.wikibooks.org/wiki/Optimizing_C%2B%2B)，在[本段](http://en.wikibooks.org/wiki/Optimizing_C%2B%2B/Code_optimization/Instruction_count#Template_integer_parameters)中有以下建议：

> 如果整数值在应用程序代码中是常量，但在库代码中是变量，则将其设为模板参数。

所以如果我有一个像

```
void myfunction(int param)
{
     switch(param)
     {
          case 1:
              do_something_1();
          break;

          case 2:
              do_something_2();
          break; 

          ...

          case 100:                 // 100 is taken as example
              do_something_100();
          break;
     }
} 
```

换成下面这样方便吗？

```
template<int param> void myfunction()
{
     switch(param)
     {
          case 1:
              do_something_1();
          break;

          case 2:
              do_something_2();
          break; 

          ...

          case 100:                 // 100 is taken as example
              do_something_100();
          break;
     }
} 
```

还是完全没有必要？你能解释一下原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T09:34:10.560

只有在编译时知道参数时，您想到的调整才有效。在您的报价中，有一个关于您在编写库时无法做出的应用程序代码的假设。

如果您的应用程序代码中的函数调用曾经是

```
const int x = 3;
myfunction(1);
myfunction(2);
myfunction(x);
//etc... 
```

它们可以重写如下。

```
const int x = 3;
myfunction<1>();
myfunction<2>();
myfunction<x>();
//etc... 
```

但如果`x`是一个变量，这是不可能的：

```
int x = ...;      // unknown at compile-time!
myfunction<x>();  // will fail to compile! 
```

如上所述，在某些情况下，您不应该在编写库时对应用程序做出假设。有时你想要或需要做。让我们考虑一下您*希望*应用程序使用常量但您不想*强制*它这样做的情况。

您想**针对**将使用**常量**但**仍允许**使用**变量**的情况进行优化。为此，我建议两种选择：

*   做两种选择，一种带有模板参数，另一种带有函数参数。

*   **内联函数，因此在编译应用程序代码时，编译器可以看到函数的定义，***如果*参数为常量，则可以将其优化为单个`do_something_*()`调用。

 *请注意，这两个选项都需要将函数的定义暴露给应用程序的代码。我更喜欢使用第二个选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T09:34:36.837

这取决于你想如何使用`myfunction`. 例如，您的模板化函数不能与在运行时声明的变量一起使用：

```
int dosomethingmaybe = 1;
dosomethingmaybe += 2;
myfunction< dosomethingmaybe >(); // <--- Error, you cannot instantiate a template with a non-constant variable
myfunction( dosomethingmaybe ); // <--- Will call `do_something_3();`, according to your code 
```

当您可以**在编译时**提供不会在运行时更改的参数时，您可以使用模板。模板总是在编译时进行评估，因此它们的***输入和输出在程序运行之前就已经固定了***！

如果您知道有人可以提前修复输入并期望某个功能输出，请制作模板版本。否则，常规函数运行时版本就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:43:25.350

我怀疑您是否真的会在这里看到实际情况下的性能优势。如果调用是内联的，那么这两种方法之间没有区别——只要参数在编译时是已知的（它必须是），一个体面的编译器将在这两种情况下删除不必要的开关。您会看到差异的唯一情况是如果没有发生内联 - 在这种情况下，模板化方法将允许删除开关，而另一种则不会。但是，无论如何，在这种情况下，函数调用开销可能会使切换成本相形见绌。*

# function - Matlab-Splines 中的指示函数

> ID：15108450
> 
> 赞同：1
> 
> 时间：2013-02-27T09:27:56.573
> 
> 标签：function, matlab, splines

好吧，我遇到了一个愚蠢的问题，我自己的工作和互联网搜索都没有真正提供解决方案，所以我想问问有没有人有任何建议。我正在编写一个 Matlab 程序，该程序最终旨在绘制利率曲线，这是通过使用三次 B 样条，然后使用优化器来获得三次 B 样条基础中的系数，并使用此信息绘制图形来完成的。现在我在尝试绘制图表时遇到了一个棘手的小问题。我将在下面提供错误消息和相关代码，但总的来说，发生的事情是这样的：

要对给定度数的 B 样条进行编程，您可以从指标函数开始，然后递归地构建它们。这个指标是关于一些输入变量的（对我来说是时间，但变量实际上是什么并不是特别相关）。当我稍后针对这个变量绘制图表时，使用像 t = (0:1:30) 这样的范围，我收到一个错误，告诉我 || 的操作数 和 && 运算符必须可转换为逻辑标量值。

我进行了一些互联网搜索，发现 && 不适用于矢量输入（我知道我会在尝试绘制图形时将其传递给它），并建议使用 & 代替。我试过了，而是收到一个错误，说我的矩阵尺寸不同意，这对我来说没有意义，因为首先从来没有涉及任何矩阵。所以在这一点上，我不确定解决这个问题的好方法是什么。在 matlab 中是否有一种向量稳健的编程指标函数方法可以进行绘图？

以下是相关代码：

```
startvec = 0.007*ones(16,2);

%[x,fval] = fminsearch(@(x) FittingFunction(x, Rhat, today, startdays, enddays, fixedcoupondays, floatingcoupondays),startvec,optimset('Display','iter','MaxIter',50,'MaxFunEvals',50));

f0 = 0;
l0 = 0;
t = (0:1:30);

x = startvec;

for k=-3:1:12
    f0 = f0 + x(k+4,1).*Splines(3,k,t);
    l0 = l0 + x(k+4,2).*Splines(3,k,t);
end

h1 = figure('Name','OIS Curve','NumberTitle','off')
plot(t,f0);
title('OIS Curve as a Function of Time');
xlabel('time (years)');
ylabel('OIS Rate');
%hold off
print(h1,'-dpdf','OISCurve.pdf')

h2 = figure('Name','LIBOR Curve','NumberTitle','off')
plot(t,l0);
title('LIBOR Curve as a Function of Time');
xlabel('time (years)');
ylabel('LIBOR Rate');
%hold off
print(h2,'-dpdf','LIBORCurve.pdf') 
```

函数 Splines 写在这里：

```
function spline = Splines(n,k,t)

% The following code builds a B-spline function of any degree, using the
% recursive properties of B-splines.  Can be defined from k=-3 to k=12.

knots = [-1/4 -1/6 -1/12 0 1/12 1/4 1/2 3/4 1 3/2 2 4 7 11 21 31 41 51 61 71 81 91 101 111];

if (n==0)
    if (t>knots(k+4) && t<knots(k+5))
        spline = 1;
    else
        spline = 0;
    end
else
    spline = ((t-knots(k+4))/(knots(k+4+n)-knots(k+4)))*Splines(n-1,k,t) + ((knots(k+5+n)-t)/(knots(k+5+n)-knots(k+5)))*Splines(n-1,k+1,t);
end 
```

我使用 && 时收到的错误消息是：

|| 的操作数 和 && 运算符必须可转换为逻辑标量值。

如果 (t>knots(k+4) && t) 样条曲线错误（第 9 行）

样条线错误（第 15 行）样条线 = ((t-knots(k+4))/(knots(k+4+n)-knots(k+4)))*Splines(n-1,k,t) + ((结(k+5+n)-t)/(结(k+5+n)-结(k+5)))*样条(n-1,k+1,t);

样条线错误（第 15 行）样条线 = ((t-knots(k+4))/(knots(k+4+n)-knots(k+4)))*Splines(n-1,k,t) + ((结(k+5+n)-t)/(结(k+5+n)-结(k+5)))*样条(n-1,k+1,t);

样条线错误（第 15 行）样条线 = ((t-knots(k+4))/(knots(k+4+n)-knots(k+4)))*Splines(n-1,k,t) + ((结(k+5+n)-t)/(结(k+5+n)-结(k+5)))*样条(n-1,k+1,t);

InterestRatesHW1 错误（第 88 行） f0 = f0 + x(k+4,1).*Splines(3,k,t);

我只使用 & 时得到的错误是：

错误使用 * 内矩阵尺寸必须一致。

样条线错误（第 15 行）样条线 = ((t-knots(k+4))/(knots(k+4+n)-knots(k+4)))*Splines(n-1,k,t) + ((结(k+5+n)-t)/(结(k+5+n)-结(k+5)))*样条(n-1,k+1,t);

样条线错误（第 15 行）样条线 = ((t-knots(k+4))/(knots(k+4+n)-knots(k+4)))*Splines(n-1,k,t) + ((结(k+5+n)-t)/(结(k+5+n)-结(k+5)))*样条(n-1,k+1,t);

InterestRatesHW1 错误（第 88 行） f0 = f0 + x(k+4,1).*Splines(3,k,t);

我很抱歉问什么是我确定的基本问题，但这变得非常令人沮丧，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:36:05.060

如果要对向量执行与操作，则必须使用单`&`而不是双。将为where和where的每个元素返回一个逻辑向量。`&&``a & b``1``i``a(i) && b(i) == 1``0``a(i) && b(i) == 0`

# websocket - 在多个端口上使用 haproxy 将 websocket 路由到 socket.io

> ID：15108456
> 
> 赞同：2
> 
> 时间：2013-02-27T09:28:19.527
> 
> 标签：websocket, socket.io, haproxy

我在尝试配置的 ubuntu 服务器上使用 haproxy 正确路由 socket.io websocket 握手时遇到了很大的问题。我在这里和网上都读了很多，但我似乎找不到一个确凿的解决方案。我必须实现的目标非常复杂。我有不止一个 nodejs 在同一台服务器上运行，每个都在不同的端口上，但我必须能够从浏览器的端口 80 上访问所有这些（客户端防火墙问题）。我设法实现的是用 haproxy 重写

```
http://HOST/8081/ 
```

至

```
http://HOST:8081/ 
```

在后端，以便每个请求都将路由到正确的 nodejs istance。我现在遇到了套接字问题，因为要让 haproxy 重写每个请求，我必须使用 httpclose 作为选项，但这会使 websockets 失败。搜索我找到了一种解决方法，将以 /socket.io 或 /node 开头的请求路由到具有正确端口但具有不同选项的同一后端。这行得通，但是现在所有的 websockets 请求都链接到同一个 nodejs istance，这显然是一个问题，因为所有客户端现在都连接到一个服务器。我已经尽我所能创建和 acl 将 websockets 发送到正确的服务器，但我在请求中找不到任何东西来路由它们。这是我设法实现的最后一个配置，通过这个配置，websocket 请求被路由到正确的服务器，

> WebSocket 连接到 ws://HOST/socket.io/1/websocket/Wra1vIqoPcTqBNkRLTif' 失败：意外响应代码：503

```
global
    log 127.0.0.1 local0 debug
    maxconn 4096
    user haproxy
    group haproxy
    daemon

defaults
    log global
    mode http
    # httpclose is necessary otherwise haproxy will rewrite only the first request of     the session
    option httpclose
    option httplog
    option dontlognull
    retries 3
    option redispatch
    maxconn 2000
    contimeout 5000
    clitimeout 50000
    srvtimeout 50000

frontend http
    bind :80
    option  forwardfor
    acl is_socket_io path_beg /node
    acl is_socket_io path_beg /socket.io
    #use_backend socket_io if is_socket_io
    acl myacl_rewrite0 hdr(host) -i HOST
    acl myacl_path0 path_dir -i 8081
    acl myacl_referer0 hdr_beg(referer) http://HOST/8081/
    use_backend socket_io_8081 if is_socket_io myacl_referer0
    use_backend mysrv_rewrite0 if myacl_rewrite0 myacl_path0
    acl myacl_rewrite1 hdr(host) -i HOST
    acl myacl_path1 path_dir -i 8090
    acl myacl_referer0 hdr_beg(referer) http://HOST/8090/
    use_backend socket_io_8090 if is_socket_io myacl_referer0
    use_backend mysrv_rewrite1 if myacl_rewrite1 myacl_path1

backend mysrv_rewrite0
    reqirep ^([^\ :]*)\ /8081/(.*)     \1\ /\2
    server myorigin_rewrite0 127.0.0.1:8081

backend mysrv_rewrite1
    reqirep ^([^\ :]*)\ /8090/(.*)     \1\ /\2
    server myorigin_rewrite1 127.0.0.1:8090

backend socket_io_8081
    mode http
    option httplog
    # long timeout
    timeout server 86400000
    # check frequently to allow restarting
    # the node backend
    timeout check 1s
    # add X-Forwarded-For
    option forwardfor
    # Do not use httpclose (= client and server
    # connections get closed), since it will close
    # Websockets connections
    no option httpclose
    # Use "option http-server-close" to preserve
    # client persistent connections while handling
    # every incoming request individually, dispatching
    # them one after another to servers, in HTTP close mode
    option http-server-close
    option forceclose
    server node1 127.0.0.1:8081 maxconn 2000 check

backend socket_io_8090
    mode http
    option httplog
    # long timeout
    timeout server 86400000
    # check frequently to allow restarting
    # the node backend
    timeout check 1s
    # add X-Forwarded-For
    option forwardfor
    # Do not use httpclose (= client and server
    # connections get closed), since it will close
    # Websockets connections
    no option httpclose
    # Use "option http-server-close" to preserve
    # client persistent connections while handling
    # every incoming request individually, dispatching
    # them one after another to servers, in HTTP close mode
    option http-server-close
    option forceclose
    server node2 127.0.0.1:8090 maxconn 2000 check 
```

忘了说，我有

```
socket.io version 0.9.11
haproxy version 1.4.18 
```

# aspxgridview - Gridview中的交替行样式

> ID：15108458
> 
> 赞同：1
> 
> 时间：2013-02-27T09:28:27.350
> 
> 标签：aspxgridview

是否可以在 gridview 列级别应用交替行样式。如果值相等，我有 gridview 列的行跨度。我不会将交替行样式单独应用于前 2 列。任何人都可以帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:29:43.957

采用`ASPxGridView.Styles.AlternatingRow.Enabled`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T15:47:17.707

我`GridName.AlternatingRowStyle.CssClass = "grdViewAltRow";`之前在后面的c#代码中使用过

```
GridName.Datasource = dataTable;
GridName.DataBind(); 
```

和

```
<style>
.grdViewAltRow {
            background-color:#E8E8FF;
        }
</stye> 
```

# php - php中单个表单上的搜索和导出按钮

> ID：15108461
> 
> 赞同：0
> 
> 时间：2013-02-27T09:28:29.953
> 
> 标签：php, redirect, button, submit

我有一个带有 2 个按钮的表单。我希望它根据复选框选择结果中的发布操作将我的结果重定向到名为 data_results 的页面上。当我单击导出时，它使用该操作。我的问题是它没有重定向或取值。

```
<form name="search" action="" method="POST" enctype="multipart/form-data">
<input name="txtsearch" type="text" />
<select name="searchby" size="1">
<option>Search by</option>
<option value="rule">Rule Number</option>
<option value="pattern_num">Pattern Number</option>
</select>
<input type="submit" name="btnsearch" value="Search" />&nbsp;&nbsp;<input type="submit" name="btnexport" value="Export" /
<P></P>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="60"><span class="content"><strong>ID</strong></span></td>
    <td width="120" align="center"><strong><span class="content">STAMP</span></strong></td>
    <td width="83" align="center"><span class="content"><strong>RULE</strong></span></td>
    <td width="139"><span class="content"><strong>TEST</strong> <strong>STRING</strong></span></td>
    <td width="90" style="overflow:auto"><span class="content"><strong>TEST</strong> <strong>RESULT</strong></span></td>
    <td width="100%"><span class="content"><strong>TYPE</strong></span></td>
  </tr>
<?php global $database;
$sql="SELECT * FROM tbl ORDER BY id DESC";
    $result_set = $database->query($sql);
    while ($row=$database->fetch_array($result_set)){
 ?>
<tr><td>&nbsp;</td></tr>
<tr>
 <td width="60" valign="top"><span class="content"><?php echo $row['id']; ?></span></td>
    <td valign="top" width="120" align="right"><span class="content"><?php echo $row['stamp']; ?></span></td>
    <td valign="top" width="139" style="overflow:auto;"><span class="content"><?php echo $row['test_string']; ?></span></td>
    <td valign="top" width="90"><span class="content"><?php echo $row['test_result']; ?></span></td>
    <td valign="top" width="100%"><span class="content"><?php echo $row['type']; ?></span></td>
     <td valign="top" width="50"><span class="content"><input name="check_list[]" type="checkbox" id="check_list[]" value="<?php echo $row['id']; ?>" /></span></td>
  </tr><?php }  ?></form>

</table>
<?php
if(!empty($_POST['check_list'])) {
    foreach($_POST['check_list'] as $check) {
     $sql="SELECT * FROM tblrules WHERE id={$check}";
    $result_set = $database->query($sql);
    while ($row=$database->fetch_array($result_set)){
        echo "filter {"."<br>";
        echo "\t\t\t\t"."test {"."<br>";
        echo "\t\t\t\t"."type=>".$row['type']."<br>";
        echo "\t\t\t\t"."add_tag => sort_order"."<br>";
            echo "\t"."}"."<br>";
        echo "\t"."}"."<br>";
        }

    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:52:21.880

要提交重定向到 YourScriptDir/data_results.php，请修改导出按钮代码，如下所示：

```
<input type="submit" 
       name="btnexport" 
       onclick="document.location='http://YourScriptDir/data_results.php';"
       value="Export" /> 
```

如果启用了用户浏览器 javascript，这将起作用，这是当今的一般情况。

希望这可以帮助...

# extjs - Sencha - 登录后按需加载商店

> ID：15108464
> 
> 赞同：0
> 
> 时间：2013-02-27T09:28:47.203
> 
> 标签：extjs, sencha-touch-2

我有一个要在用户成功登录**后加载的 UserStore。**我不能让它工作，即找到一个模式来做到这一点。

我现在在 app.js 中有 UserStore，如下所示：

```
stores : ['UserStore'] 
```

**店铺**

```
Ext.define('MyApp.store.UserStore', {
extend : 'Ext.data.Store',
xtype : 'userstore',
config : {
    model : 'MyApp.model.User',
    autoLoad : true,
    proxy : {
        type : 'ajax',
        url : 'php/get_user.php',
        reader : {
            type : 'json',
            rootProperty : 'users'
        }
    },
    listeners : {
        beforeload : function() {
            console.log('Before load');
        },
        load : function(store) {
            console.log('load');
        }
    }
}
}); 
```

根据用户登录前未设置的 php $_SESSION['userid'] 检索用户。

启动应用程序时，商店已加载，但未找到任何数据。我需要回到开头再次登录，然后当然会话ID是在之前的登录中设置的。

我要完成的是延迟加载商店或仅在视图需要时自动加载。

我已经尝试过了，但我无法让它工作。

这就是我所做的：

**选项1**

我从 app.js 中删除了 UserStore 并向视图添加了一个 require 和 xtype 项目，但随后我得到 [WARN][Ext.dataview.DataView#applyStore] 找不到指定的商店

**风景**

```
Ext.define('MyApp.view.Profile', {
extend : 'Ext.Panel',
xtype : 'profileview',

requires : ['MyApp.store.UserStore', 'Ext.List', 'Ext.DataView', 'Ext.data.Store'],

config : {
    layout : 'fit',
    title : 'Profiel',
    iconCls : 'user3',
    cls : 'home',
    scrollable : true,
    styleHtmlContent : true,
    html : ['<h1>Mijn Profiel</h1>'].join(""),
    items : [Ext.create('Ext.DataView', {
        store : 'userstore',
        itemTpl : '<h2>{USERNAME}</h2><p>{EMAIL}</p>'
    })]
}
}); 
```

**选项 2**

尝试找出我是否可以将自动加载设置为 false 并通过某个侦听器按需加载。但我无法确切知道如何。

那么，如何实现这一点以及做到这一点的最佳模式是什么。

谢谢你的帮助！Ext.dataview.DataView#applyStore 找不到指定的Store

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:39:36.173

我实际上从来没有这样分配商店：`store : 'userstore'`. 更好的方法是创建商店的一个实例并自己加载它，在我的商店上使用 autoLoad: false，我不喜欢它们在应用程序启动时加载。试试这个（我无法测试它，因为我通常不编写触摸应用程序）。

```
Ext.define('MyApp.view.Profile', {
    extend: 'Ext.Panel',
    xtype: 'profileview',

    requires: ['MyApp.store.UserStore', 'Ext.List', 'Ext.DataView', 'Ext.data.Store'],

    config: {
        layout: 'fit',
        title: 'Profiel',
        iconCls: 'user3',
        cls: 'home',
        scrollable: true,
        styleHtmlContent: true,
        html: ['<h1>Mijn Profiel</h1>'].join("")
    },

    initialize: function () {
        var me = this;

        //Create the instance of the store and load it
        var userStore = Ext.create('MyApp.store.UserStore');
        userStore.load();

        //Create the dataview
        var view = Ext.create('Ext.DataView', {
            store: userStore,
            itemTpl: '<h2>{USERNAME}</h2><p>{EMAIL}</p>'
        });
        //Add the dataview to the panel
        me.add(view);
    }
}); 
```

我更喜欢这种工作方式。

# liferay - Ldap 与 Liferay 的集成

> ID：15108473
> 
> 赞同：1
> 
> 时间：2013-02-27T09:29:13.420
> 
> 标签：liferay, liferay-6

我正在使用 Liferay 6.1CE。

我可以将 ldap 服务器连接到我的门户。用户被导入，身份验证也完成。

但是当我在AD中添加一个用户时，它不会被导入到门户中。它只有在重新启动服务器后才会添加（启动时导入正在工作）。

我从未在 liferay 中看到启用此功能的选项。

所以我在portal-ext.properties 中设置了一个ldap.import.interval=360。但没有改变。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:36:27.370

不必担心总是将所有用户导入 Liferay：他们最迟会在他们尝试登录时单独导入 - 通常在此之前您不需要它们，并且您希望它们在那个时候是最新的。

# c# - '禁用幽灵属性获取的含义 因为它不支持实体级别的惰性'

> ID：15108480
> 
> 赞同：2
> 
> 时间：2013-02-27T09:29:28.627
> 
> 标签：c#, nhibernate, fluent-nhibernate, nhibernate-3

我在 NHibernate-DataAccess 中看到了这个警告：

> *'禁用实体*的幽灵属性获取，因为它不支持实体级别的惰性'

有人知道，这是什么意思？- 我必须改变什么来解决这个问题？

这是导致此警告的实体的映射：

```
public class BusinessTypeMap : ClassMap<BusinessType> {
    public BusinessTypeMap() {
        this.Table("BusinessType");

        this.Version(x => x.ObjectVersion);
        this.Id(x => x.Id).GeneratedBy.Assigned();

        this.Map(x => x.Key).Length(8).Nullable(); 
        this.Map(x => x.Name).Length(50).Not.Nullable(); 
        this.Map(x => x.Comment).Length(8000).Nullable(); 

        this.Map(x => x.Created).Not.Nullable().Not.OptimisticLock();
        this.Map(x => x.CreatedBy).Length(255).Not.Nullable().Not.OptimisticLock();
        this.Map(x => x.Changed).Nullable().Not.OptimisticLock();
        this.Map(x => x.ChangedBy).Length(255).Nullable().Not.OptimisticLock();

        this.HasMany(x => x.LocalizedProperties).AsSet().KeyColumn("EntityId").Where("LocalizedEntityClass = 'Prayon.Entities.BusinessType'").ForeignKeyConstraintName("none").Cascade.All();
        this.HasMany(x => x.Companys).AsSet().KeyColumn("BusinessTypeId").Fetch.Select().Inverse().Cascade.None();
        this.References(x => x.Client).Column("ClientId").Fetch.Select();
    }
} 
```

**更新类 BusinessTypeBase 的定义：**

```
[Serializable]
public abstract class BusinessTypeBase : AuditableEntityBase, ILocalizedEntity {

    #region Private Variables

    protected String key;
    protected String name;
    protected String comment;

    #endregion

    #region Constructors

    protected BusinessTypeBase() {
        this.LocalizedProperties = new HashSet<LocalizedProperty>();

        OnCreated();
    }

    protected BusinessTypeBase(Guid id, String key, String name, String comment) {
        this.LocalizedProperties = new HashSet<LocalizedProperty>();

        this.id = id;
        this.key = key;
        this.name = name;
        this.comment = comment;
        OnCreated();
    }

    protected BusinessTypeBase(Guid id, String name) {
        this.LocalizedProperties = new HashSet<LocalizedProperty>();

        this.id = id;
        this.name = name;
        OnCreated();
    }

    #endregion

    #region Puplic Properties

    public virtual String Key {
        get { return key; }
        set {
            if (this.key != value) {
                this.OnKeyChanging(value);
                this.key = value;
                this.OnKeyChanged();
            }
        }
    }

    /// <summary>
    /// @loc
    /// </summary>
    [Localize("Name")]
    public virtual String Name {
        get { return name; }
        set {
            if (this.name != value) {
                this.OnNameChanging(value);
                this.name = value;
                this.OnNameChanged();
            }
        }
    }

    public virtual String NameLocalized {
        get { return this.GetLocalized(x => x.Name); }
        set {
            if (this.NameLocalized != value) {
                this.OnNameLocalizedChanging(value);
                this.AddLocalizedProperty(x => x.Name, value);
                this.OnNameLocalizedChanged();
                if (string.IsNullOrEmpty(this.Name)) {
                    this.Name = value;
                }
            }
        }
    }

    protected virtual void OnNameLocalizedChanging(String value) {
    }

    protected virtual void OnNameLocalizedChanged() {
    }

    [IgnoreForDeleteSerialization]
    public virtual String Comment {
        get { return comment; }
        set {
            if (this.comment != value) {
                this.OnCommentChanging(value);
                this.comment = value;
                this.OnCommentChanged();
            }
        }
    }

    #endregion

    #region Version

    protected Int32 objectVersion;

    public virtual Int32 ObjectVersion {
        get { return objectVersion; }
        set {
            if (this.objectVersion != value) {
                this.objectVersion = value;
            }
        }
    }

    #endregion

    #region CollectionRules

    public override string[] CollectionRules {
        get { return collectionRules; }
    }

    private static readonly string[] collectionRules = new string[]
        {
            "Prayon.Entities.Client.BusinessTypes"
        };

    #endregion

    #region Company Association

    protected virtual void OnCompanysChanging(ICollection<Company> value) {
    }

    protected virtual void OnCompanysChanged() {
    }

    private ICollection<Company> companys = new HashSet<Company>();

    [IgnoreForDeleteSerialization]
    public virtual ICollection<Company> Companys {
        get { return companys; }
        set {
            if (this.companys != value) {
                this.OnCompanysChanging(value);
                this.companys = value;
                this.OnCompanysChanged();

            }

        }
    }

    #endregion

    #region Client Association

    public virtual Guid SerializableClient {
        get { return (this.Client == null ? (this.SerializationProxies.ContainsKey("ClientId") ? this.SerializationProxies["ClientId"] : Guid.Empty) : this.Client.Id); }
        set { this.SerializationProxies["ClientId"] = value; }
    }

    protected virtual void OnClientChanging(Client value) {
    }

    protected virtual void OnClientChanged() {
    }

    private Client client;

    [IgnoreForDeleteSerialization]
    public virtual Client Client {
        get { return client; }
        set {
            if (this.client != value) {
                this.OnClientChanging(value);
                this.client = value;
                this.OnClientChanged();
            }
        }
    }

    #endregion

    #region ICloneable Members

    ///<summary>
    ///  Returns a Typed Copy of BusinessType
    ///</summary>
    public virtual object Clone() {
        BusinessType copy = new BusinessType();
        copy.id = this.id;
        copy.key = this.key;
        copy.name = this.name;
        copy.comment = this.comment;
        return copy;
    }

    #endregion

    #region Check Equality

    /// <summary>
    /// Check if the Passed Parameter is value equaled to this Address.
    /// </summary>
    /// <param name="obj">The Object will ba compared to.</param>
    /// <returns>True if Equal else False</returns>
    public override bool Equals(object obj) {
        if (obj is BusinessTypeBase) {
            var entity = obj as BusinessTypeBase;
            if (entity.id != this.id)
                return false;
            if (entity.key != this.key)
                return false;
            if (entity.name != this.name)
                return false;
            if (entity.comment != this.comment)
                return false;
            return true;
        }
        return base.Equals(obj);
    }

    public override int GetHashCode() {
        int hash = 0;
        hash = hash ^ this.id.GetHashCode();
        if (this.key != null) {
            hash = hash ^ this.key.GetHashCode();
        }
        if (this.name != null) {
            hash = hash ^ this.name.GetHashCode();
        }
        if (this.comment != null) {
            hash = hash ^ this.comment.GetHashCode();
        }

        return hash;
    }

    public static bool operator ==(BusinessTypeBase obj1, BusinessTypeBase obj2) {
        if (object.ReferenceEquals(obj1, null) && object.ReferenceEquals(obj2, null)) {
            return true;
        }
        if (object.ReferenceEquals(obj1, null) || object.ReferenceEquals(obj2, null)) {
            return false;
        }
        return obj1.Equals(obj2);
    }

    public static bool operator !=(BusinessTypeBase obj1, BusinessTypeBase obj2) {
        return !(obj1 == obj2);
    }

    #endregion

    #region To String

    /// <summary>
    /// override ToString to produce XML format of the current object
    /// </summary>
    public override string ToString() {
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.AppendFormat("<Id>{0}</Id>{1}", this.id.ToString(), System.Environment.NewLine);
        if (this.key != null)
            stringBuilder.AppendFormat("<Key>{0}</Key>{1}", this.key.ToString(), System.Environment.NewLine);
        if (this.name != null)
            stringBuilder.AppendFormat("<Name>{0}</Name>{1}", this.name.ToString(), System.Environment.NewLine);
        if (this.comment != null)
            stringBuilder.AppendFormat("<Comment>{0}</Comment>{1}", this.comment.ToString(), System.Environment.NewLine);
        return stringBuilder.ToString();
    }

    #endregion

    #region Extensibility Method Definitions

    protected virtual void OnCreated() {
    }

    protected virtual void OnKeyChanging(String value) {
    }

    protected virtual void OnKeyChanged() {
    }

    protected virtual void OnNameChanging(String value) {
    }

    protected virtual void OnNameChanged() {
    }

    protected virtual void OnCommentChanging(String value) {
    }

    protected virtual void OnCommentChanged() {
    }

    #endregion

    #region Localization

    public virtual ICollection<LocalizedProperty> LocalizedProperties { get; set; }

    #endregion
} 
```

**更新类 BusinessType 的定义：**

```
[Serializable]
public partial class BusinessType : BusinessTypeBase {

    #region Constructors

    public BusinessType()
        : base() {
    }

    public BusinessType(Guid id, String key, String name, String comment)
        : base(id, key, name, comment) {
    }

    public BusinessType(Guid id, String name)
        : base(id, name) {
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:06:52.027

~~您是否尝试过使用`Iesi.Collections.Generic.ISet<Company>`而不是~~*) `ICollection<Company>`？IIRC、NHibernate 使用了与 EF 或其他典型库不同的接口集。一般的问题是 ICollection 在这里是非常糟糕的合同，因为它没有说明“SET”行为，实际上每个关系都是。

编辑：*）我刚刚发现我错了，NH可以配合ICollection接口（[https://stackoverflow.com/a/4673125/717732](https://stackoverflow.com/a/4673125/717732)）。您仍然可以尝试使用 ISet 或 HashSet，但我现在怀疑这是问题所在，抱歉：/

# c - 如何获取当前进程的用户

> ID：15108482
> 
> 赞同：0
> 
> 时间：2013-02-27T09:29:32.397
> 
> 标签：c, linux, linux-kernel

使用 struct task_struct [http://lxr.linux.no/linux+v2.6.30.5/include/linux/sched.h#L246](http://lxr.linux.no/linux+v2.6.30.5/include/linux/sched.h#L246)中定义的进程如何获取当前用户？我必须检查用户是否是root用户。我显然不能使用 getuid

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:35:27.263

您可以使用[`task_uid`](http://lxr.linux.no/#linux+v3.8/include/linux/cred.h#L323)来获取 的用户 ID `task_struct`，或者`task_euid`如果这正是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:40:19.713

试试`getlogin_r()`功能。它在 unistd.h 中定义并返回用户名。看看`man getlogin_r`其他选项。

```
int getlogin_r(char *buf, size_t bufsize); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:24:47.050

最终使用了一个成员变量 uid_t uid，我一开始没有看到。检查我使用的 linux 版本（旧）并在这里找到它：http: [//lxr.linux.no/linux+v2.6.18/include/linux/sched.h#L246](http://lxr.linux.no/linux+v2.6.18/include/linux/sched.h#L246)

抱歉，添麻烦了

# asp.net-mvc - 使用 @Html.PagedListPager 时附加第二个查询字符串的 URL

> ID：15108501
> 
> 赞同：0
> 
> 时间：2013-02-27T09:30:16.037
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

有谁知道如何解决这个问题，我有一个搜索框，当我输入搜索短语并提交表单时，网址是：

```
http://localhost:50435/Search-Results-For?q=hotels&Option=Web&Page=1 
```

返回结果后，我可以分页，网址为：

```
http://localhost:50435/Search-Results-For/hotels/web/2 
```

但是，如果我随后尝试进行另一次搜索，则该搜索将附加到上面的 url：

```
http://localhost:50435/Search-Results-For/hotels/web/2?q=poole&Option=web&Page=2 
```

我不知道如何解决这个问题，我尝试将寻呼机放在局部视图中，更改参数但似乎没有任何效果。

有没有人遇到过这个问题或者知道如何解决。

寻呼机：

```
<div id="dvPagePager">@Html.PagedListPager((IPagedList)ViewBag.SearchResults, page => Url.Action("Results", new { Page = page, q = @ViewBag.q, Option = @ViewBag.b}), PagedListRenderOptions.OnlyShowFivePagesAtATime)</div> 
```

形式：

```
@using (Html.BeginRouteForm("SearchEngine", FormMethod.Get, new { @id = "frmSearchEngine" }))
                                    {
                                   { Html.RenderAction("pvSearchForm", "Home"); }
                                   //Html.RenderPartial("~/Views/Shared/pvSearchForm.cshtml");
                                    } 
```

路线：

```
routes.MapRoute(
                name: "SearchEngine",
                url: "Search-Results-For/{q}/{Option}/{Page}",
                defaults: new { controller = "Search", action = "Results", q = UrlParameter.Optional, Option = UrlParameter.Optional, Page = UrlParameter.Optional }
            ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:55:43.310

通过使表单成为标准的 html 表单解决了这个问题，添加了一个带有 http 的 URL.Action，这会在做新帖子时强制刷新 url

# java - eclipse中远程调试tomcat

> ID：15108508
> 
> 赞同：0
> 
> 时间：2013-02-27T09:30:32.553
> 
> 标签：java, eclipse, debugging, tomcat

我想从我的窗口机器远程调试在其他 Windows 机器上运行的应用程序。在这样做时，我能够成功地与其他机器建立连接。我在 java 代码的某行放置了一个断点，但我的调试器没有出现在断点处。

有没有人有这个想法，可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:27:55.333

当您的项目中的源代码与用于生成已编译类的源不匹配时，通常会发生这种情况。验证您在源代码和编译的类中调试的版本是否相同。

# r - 如何在 R 中执行 rowttest？

> ID：15108517
> 
> 赞同：1
> 
> 时间：2013-02-27T09:31:05.210
> 
> 标签：r

我有一个包含 4 列和 679 行的数据框，我需要使用genefilter 包中的da 函数rowttest 执行测试。想要列出前两列和另外两列。

```
A_R1   A_R2   B_R1    B_R2  
1       2       7      7
4       5       8      7.5
5       5       9      NA
6       5       10     NA
... 
```

我使用了这段代码，但我不确定“fac”是什么意思。我以为是行数。

```
#t.test is the dataframe used
ttest2=na.omit(ttest)
rowttests(as.matrix(ttest2),fac=679,tstatOnly = FALSE) 
```

我有这个错误：

```
Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function ‘rowttests’ for signature ‘"matrix", "numeric"’ 
```

或者

```
Error in rowcoltt(x, factor(integer(ncol(x))), tstatOnly, 1L) : 
  Invalid argument 'x': must be a real matrix. 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:49:03.957

第二个参数是表示执行 t 检验的（列）组的因素。

```
> m=matrix(runif(80), 20)
> rowttests(m, factor(c("M", "M", "F", "F")))
      statistic           dm     p.value
1    1.15567467  0.297622456 0.367224496
2    0.81334422  0.328723537 0.501449912
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T19:53:53.563

数据不能是整数矩阵！！！

**前**

# x 是这里的 INTEGERS 的 data.frame ...

```
x <- read.table("HFLF.txt", header=TRUE, row.names=1)
g <- c("HF","HF","LF","LF")   
results<- rowttests(x, factor(g)) 
```

> （函数（类，fdef，mtable）中的错误：无法为签名'“data.frame”，“因子”'找到函数'rowttests'的继承方法</p>

# 尝试将 x 从数据帧转换为矩阵 ...

```
x <- as.matrix(read.table("HFLF.txt", header=TRUE, row.names=1))
g <- c("HF","HF","LF","LF")
results<- rowttests(x, factor(g)) 
```

> rowcoltt(x, fac, tstatOnly, 1L) 中的错误：无效参数“x”：必须是实数矩阵。

**后**

# x 在这里是实数的数据帧（带小数位）...

```
x <- read.table("HFLF.txt", header=TRUE, row.names=1)
g <- c("HF","HF","LF","LF")
results<- rowttests(x, factor(g)) 
```

> （函数（类，fdef，mtable）中的错误：无法为签名'“data.frame”，“因子”'找到函数'rowttests'的继承方法</p>

# 尝试将 x 从数据帧转换为矩阵 ...

```
results<- rowttests(as.matrix(x), factor(g))
head(results) 
```

我从“Joran”在这里发布的内容中弄清楚了： [http ://w3facility.org/question/conversion-of-data-frame-to-matrix-error/](http://w3facility.org/question/conversion-of-data-frame-to-matrix-error/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:45:56.700

看？`rowtests`

> rowttests(x, fac, tstatOnly = FALSE) x **数字矩阵** 和 fac 编码要测试的分组的**因子**

在这里，您给出一个矩阵和一个数字，您必须将数字强制转换为一个因子。所以改变

```
rowttests(as.matrix(ttest2),fac=679,tstatOnly = FALSE) 
```

至

```
rowttests(as.matrix(ttest2),fac=factor(679),tstatOnly = FALSE) 
```

# javascript - Magento 时事通讯成功消息在弹出窗口中

> ID：15108518
> 
> 赞同：1
> 
> 时间：2013-02-27T09:31:09.507
> 
> 标签：javascript, jquery, magento

我想在提交时事通讯表单后为成功消息创建良好的弹出窗口。我怎么能用 jquery js 做到这一点？如果我一开始的想法是正确的，我需要检查消息，如果 message = newsletter 成功消息，而不是在 popup 中显示这个消息。正确的？但我怎么能意识到这一点？=) 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:36:50.273

我找到了三种方法并将其应用到我的 Magento 中：

**方法一：**
在想要显示成功信息的页面顶部添加如下js脚本：

```
<script type=“text/javascript”&gt;
var message = '<?php echo strip_tags($this->getChildHtml('global_messages')) ?>';
if (message == $this->__('Thank you for your subscription')) alert("What ever you want to display!"); 
```

**方法2：**
简单的说明，感谢您的订阅。
登录 Magento Admin>CMS>Manage Pages>Add New Page
创建 Newsletter Policy CMS 页面，即 newsletter-promotions
打开位于以下位置的 SubscriberController.php 文件：

> MagentoStore\App\Code\Core\Mage\Newsletter\controllers\

改变

```
$session->addSuccess($this->__('Thank you for your subscription')); 
```

至

```
$session->addSuccess($this->__('Thank you for your subscription. For more info on our Newsletter Policy, please click <a href="newsletter-promotions" target="_self">here</a>.')); 
```

最好也这样做；请输入有效的电子邮件地址; 已发送确认请求；订阅和消息有问题。

**方法 3.**
重定向到只有订阅者才能购买的折扣产品的特殊页面，其中包含时事通讯政策。

```
Magento Admin>Catalog>Manage Products>Add New Product 
```

创建新的特殊折扣产品，并将 Visibilty 属性设置为“Nowhere”。记下产品 ID。

```
Magento Admin>CMS>Manage Pages>Add New Page 
```

创建 Newsletter Policy CMS 页面，即 newsletter-policy-and-promotions。在此页面中，您可以添加为新订阅者创建的特殊产品。（这不在本文的范围内，如何做）
在大约第 65 行更改：

```
$this->_redirectReferer(); 
```

至

```
$this->_redirectUrl(Mage::getBaseUrl().'newsletter-policy-and-promotions');
$this->_redirectUrl(Mage::getBaseUrl()); 
```

至

```
$this->_redirectUrl(Mage::getBaseUrl().'newsletter-policy-and-promotions'); 
```

现在订阅者将自动重定向到您的新页面，并且仍然会显示“感谢您的订阅”消息。
希望这对您有所帮助。

# android - Android - 从 URL 打开 PDF，文件名通过 Intent 的 HTTP 标头设置

> ID：15108521
> 
> 赞同：0
> 
> 时间：2013-02-27T09:31:15.030
> 
> 标签：android, android-intent

我编写了一个小型 android 应用程序，其中包含指向网络上 PDF 文件的链接。问题是，该链接是没有适当文件后缀的通用链接。然而，提供文件的网络服务器将发送一个带有适当后缀的真实文件名，并强制网络浏览器以一个好听的名称保存文件（文件下载的非常常见的做法）。这在任何桌面浏览器（如 FF 或 IE）上都可以正常工作，但是如果我在我的 Android 上启动 VIEW Intent，它会在原始文件下开始下载，从而生成一个没有后缀且不与任何程序关联的文件。

（安装了 Adob​​e Reader 并且手动重命名的下载打开就好了）

示例：“ [http://mysample.com/file/6dbfj73bdngdn3](http://mysample.com/file/6dbfj73bdngdn3) ”的链接将被标题更改为“mysamplefile.pdf”

这是服务器上的 PHP 片段，为下载的文件设置标题：

```
header("Expires: 0");
header("Pragma: public");
header("Cache-Control: private, must-revalidate, post-check=0, pre-check=0");
header("Content-length: 12345");
header("Content-type: application/force-download; filename=\"mysamplefile.pdf\"");
header("Content-type: application/octet-stream; filename=\"mysamplefile.pdf\"");
header("Content-type: application/download; filename=\"mysamplefile.pdf\""); 
```

我尝试了几种打开意图的方法，这是我目前的一种。如果我指定了一个 mime 类型，我会得到一个 ActivityNotFoundException，如果我不指定，我会在没有后缀的原始文件名下获得上述下载。

```
String url = "http://mysample.com/file/6dbfj73bdngdn3";
//Intent i = new Intent(Intent.ACTION_VIEW);
//i.setDataAndType(Uri.parse(url), "application/pdf");
Intent i = new Intent(Intent.ACTION_VIEW, URI.parse(url)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:12:26.823

我最终通过它的 Intent 在 Web 浏览器中打开了 URL。问题是这个浏览器对你发送的标题非常挑剔。如果每个元素之间的 Content-Type 标头中有空格，Android 将忽略它们。

错误的：

```
header("Content-type: application/download; filename=\"mysamplefile.pdf\";"); 
```

正确的：

```
header("Content-type: application/download;filename=\"mysamplefile.pdf\""); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T09:37:43.437

```
String url = "http://mysample.com/file/6dbfj73bdngdn3";
WebView mWebView=new WebView(MyPdfViewActivity.this);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setPluginsEnabled(true);
mWebView.loadUrl("https://docs.google.com/gview?embedded=true&url="+url );
setContentView(mWebView); 
```

这将在 google docs 内的 webview 中打开 pdf——Linkto 是您的 pdf 文件的 url

我不确定这是否是你想要的希望能以某种方式提供帮助

但是您的网址正在重新调整错误文档 dsnt 存在

# c# - 基于链接 MVC4 改变文化

> ID：15108524
> 
> 赞同：12
> 
> 时间：2013-02-27T09:31:23.957
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, cultureinfo

我对 MVC 中的文化变化有一种好奇心。我尝试了两种方式，但显然我在某个地方错了。

在我的 Web.config 中，我有：

```
 <globalization uiCulture="auto" culture="auto" /> 
```

这就是我试图改变线程文化的方式：

```
 <li>@Html.ActionLink("Eng", "ChangeCulture", "Home", new { lang="en-US"}, new { @class = "languageSelectorEnglish" })</li> 
```

**第一种方法**

我有以下控制器：

```
 public void ChangeCulture(string lang)
    {
        Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo(lang);
        Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo(lang);

        Response.Cookies.Remove("Language");
        var langCookie = new HttpCookie("Language");
        langCookie["Language"] = lang;
        langCookie.Value = lang;
        langCookie.Expires = System.DateTime.Now.AddDays(21);
        Response.Cookies.Add(langCookie);

        Response.Redirect(Request.UrlReferrer.ToString());
    } 
```

**第二种方法**

```
 public ActionResult ChangeCulture(string lang)
    {
        Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo(lang);
        Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo(lang);

        // Split the url to url + query string
        var fullUrl= Request.UrlReferrer.ToString();
        var questionMarkIndex = fullUrl.IndexOf('?');
        string queryString = null;
        string url = fullUrl;
        if (questionMarkIndex != -1) // There is a QueryString
        {
            url = fullUrl.Substring(0, questionMarkIndex);
            queryString = fullUrl.Substring(questionMarkIndex + 1);
        }

        // Arranges
        var request = new HttpRequest(null, url, queryString);
        var response = new HttpResponse(new StringWriter());
        var httpContext = new HttpContext(request, response);

        var routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(httpContext));

        // Extract the data    
        var values = routeData.Values;
        var controllerName = values["controller"];
        var actionName = values["action"];
        var areaName = values["area"];

        return RedirectToAction(actionName.ToString());
    } 
```

我哪里错了？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T10:20:17.740

看来我需要覆盖`culture`for my`resource strings`而不是`thread`. 所以我的最终方法是这样的：

```
 public void ChangeCulture(string lang)
    {
         Resources.Resources.Culture = new CultureInfo(lang);

         Response.Redirect(Request.UrlReferrer.ToString());
    } 
```

希望这可以帮助。

**更新 ：**

当您的应用程序被多个用户使用时，上面的代码并不好，因为它为每个用户设置了相同的文化，无论他们使用什么浏览器。

这样做的好方法是创建一个`cookie`在浏览器中设置 a 的方法：

```
 public void ChangeCulture(string lang)
    {
        Response.Cookies.Remove("Language");

        HttpCookie languageCookie = System.Web.HttpContext.Current.Request.Cookies["Language"];

        if (languageCookie == null) languageCookie = new HttpCookie("Language");

        languageCookie.Value = lang;

        languageCookie.Expires = DateTime.Now.AddDays(10);

        Response.SetCookie(languageCookie);

        Response.Redirect(Request.UrlReferrer.ToString());
    } 
```

在此之后（棘手的方法），您需要使每个控制器都从一个 BaseController 继承。这很棘手，因为您需要覆盖`Initialize`.

```
protected override void Initialize(System.Web.Routing.RequestContext requestContext)
    {

        HttpCookie languageCookie = System.Web.HttpContext.Current.Request.Cookies["Language"];
        if (languageCookie != null)
        {
            Thread.CurrentThread.CurrentCulture = new CultureInfo(languageCookie.Value);
            Thread.CurrentThread.CurrentUICulture = new CultureInfo(languageCookie.Value);
        }
        else
        {
        //other code here
        }

        base.Initialize(requestContext);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T09:41:57.397

删除 web.config 中的行：

```
<globalization uiCulture="auto" culture="auto" /> 
```

将这些设置为 auto 会将语言默认**为浏览器上设置的用户语言**。这是覆盖您的线程设置。

# c# - 在 SQL Server 的 NHibernate 查询中处理开方括号

> ID：15108525
> 
> 赞同：1
> 
> 时间：2013-02-27T09:31:28.807
> 
> 标签：c#, sql-server, nhibernate

我在 C# 中使用 NHibernate 查询有以下查询代码。

```
IQuery query = session.CreateQuery(String.Format(@"
                select
                r
                from
                Revision r
                where r.Code = :Code
                order by upper( r.Name ), r.SeqNo
                "))

query.SetParameter<string>("Code", CodeValue); 
```

如果变量 CodeValue 的值包含字符“[”（开方括号），我会遇到问题。每次作为值传递时，SQL Server 都不会返回任何结果。

求指教，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:34:01.527

试试这个

```
query.SetAnsiString("text", "%" + filter.Text.Replace("[", "[[]") + "%"); 
```

# android - 在 Drawable 中将图像源设置为位图

> ID：15108535
> 
> 赞同：4
> 
> 时间：2013-02-27T09:32:06.113
> 
> 标签：android, layout, bitmap, drawable, xml-drawable

我在 drawable 文件夹中创建了 XML 文件，如下代码：

XML 名称为：**background_bitmap_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
android:gravity="center"
android:src="@drawable/background"
android:tileMode="disabled" /> 
```

现在，我想[通过代码]动态地将图像设置为这个 xml 文件。

我正在制作一个应用程序，我必须在每个活动中设置不同的背景，并且这些图像来自在线。

我没有找到任何解决方案将图像 src 设置为此 xml 文件作为位图。

但是我有另一种方法可以将背景设置为根布局，如下所示：

`bitmap = BitmapFactory.decodeFile(FILE_PATH + "/" + SettingsScreen.BACKGROUND_IMAGE);
d = new BitmapDrawable(cntx.getResources(), bitmap);`

但是我需要将图像资源设置为上面的 XML 文件，这样如果尺寸非常小于设备尺寸，图像就不会被拉伸。

将图像资源设置为 xml 文件有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:20:24.980

你也可以试试这个，

```
URL url_value = new URL("your url");

ImageView img = (ImageView)v.findViewById(R.id.backgorundImage);
if (profile != null) {
    Bitmap mIcon1 =
        BitmapFactory.decodeStream(url_value.openConnection().getInputStream());
    img.setImageBitmap(mIcon1);
} 
```

您可以将 ImageView 设置为完整活动。在此示例中，图像从 Internet 下载并转换为位图并设置为 ImageView。

# yii - CButtonColumn 中的默认图标未显示

> ID：15108536
> 
> 赞同：0
> 
> 时间：2013-02-27T09:32:06.690
> 
> 标签：yii, icons, crud, cgridview, cbuttoncolumn

我使用 Yii 并使用 Gii 生成 CRUD 调用`Workers`模型。`admin`不知何故，在使用操作（管理工作人员）浏览记录时，我没有为默认操作（查看、更新、删除）内置图标。我认为这是由于 crud&model 在模块中但没有 - 对于我在主目录中制作相同模型和 crud 的测试 - 结果是相同的。

这怎么可能？我怎样才能让这些图标显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:36:25.510

`columns`of`CGridView`必须`CButtonColumn`包含：

```
'columns'=>array(
   array(
      'class'=>'CButtonColumn',
   ),
 ) 
```

但是你是对的，这应该是由 Gii 生成的。

# css - 如何更改gd评级星星颜色

> ID：15108537
> 
> 赞同：0
> 
> 时间：2013-02-27T08:50:33.360
> 
> 标签：css, wordpress

在 gd 星级评分插件中，他们采用 css sprite 图像来显示星星的状态，并调整其宽度以显示一个项目的评分星星数。

例如，他们在背景中使用图像“gd-star-rating/stars/oxygen/stars20.png”。

例如，我有 3 颗星，所以它需要 60px 宽度。

```
.starsbar.gdsr-size-20 a.s3 {
width: 60px;
} 
```

全局代码是：

```
.gdsr-oxygen .starsbar.gdsr-size-20 a:hover {
background: url('../stars/oxygen/stars20.png') repeat-x 0px -20px !important;
} 
```

我的问题是，如何使用自定义图像更改这些星星的颜色？我希望有

红色 - 1 星 黄色 - 2 星

逐渐地，绿色为 5 星。

这是可以实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:41:23.693

您可以在星号上添加或更改类，并使用更高的特异性应用基于该类的样式：

```
.gdsr-oxygen .starsbar.gdsr-size-20 a {
  background: url('../stars/oxygen/stars20.png') repeat-x 0px -20px !important;
}

.gdsr-oxygen .starsbar.gdsr-size-20 a.red {
  background: url('../stars/oxygen/stars20_red.png') repeat-x 0px -20px !important;
} 
```

您还可以扩展原始精灵并更改其位置以显示红色或黄色星星：

```
.gdsr-oxygen .starsbar.gdsr-size-20 a.red {
  background-position: 0px -40px !important;
} 
```

# database - Pentaho 中用于报告和分析的数据库

> ID：15108538
> 
> 赞同：0
> 
> 时间：2013-02-27T09:32:08.127
> 
> 标签：database, reporting, pentaho

我目前正在进行一个必须实施 BI 解决方案的项目。我将使用 Pentaho 套件和 saiku。

使用 PDI 提取和转换数据后，我会将它们放入 MySQL 数据库中。

我的问题是，我是否使用相同的数据库进行报告和分析？这个/这些数据库应该是星型模式吗？我知道，对于分析和 saiku，它必须是星型模式，但我想知道报告部分是否相同。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:56:51.580

报告部分并不重要，因为查询只是普通的 SQL 查询。然而，为了理智，我只会建立一个数据库，你是对的，它必须是一个星型模式。如果您有 2 个数据库，您最终会遇到同步问题和各种问题 - 没有什么比由于数据不一致而不受用户信任的 BI 系统更糟糕的了。

还; 在您的报告中，您也可以使用 MDX 以及 SQL - 这样会使事情变得更容易。

# c# - 如果我创建具有不同数量元素的数组，如何删除重复代码？

> ID：15108539
> 
> 赞同：-6
> 
> 时间：2013-02-27T09:32:12.650
> 
> 标签：c#, .net

我有一些重复的代码：

```
var client = new RSClient.RSClient();

var Params = new RsParameter[1];
Params[0] = new RsParameter {Key = "order_id", Value = orderId};
var result = client.GetPreparedReportSimple(login, password, "CREDO_ORDER", Params);

var client = new RSClient.RSClient();

var Params = new RsParameter[2];
Params[0] = new RsParameter {Key = "calculation_id", Value = calculationId};
Params[1] = new RsParameter {Key = "calculation_date", Value = calculationDate};
var result = client.GetPreparedReportSimpleExport(login, password, "CREDO_RSV_ACTIVE", Params, "XLS"); 
```

我怎样才能做得更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:34:18.697

您可以重构代码并提取方法。它会是这样的：

```
public __?___ Method(string login, string password, string something, string[] parameters, string extra = null) {
    var client = new RSClient.RSClient();

    if (extra == null)
        return client.GetPreparedReportSimple(login, password, something, parameters);
    else
        return client.GetPreparedReportSimple(login, password, something, parameters, extra);
} 
```

一旦你拥有它，你可以这样称呼它：

```
var Params = new [] 
    {
        new RsParameter {Key = "order_id", Value = orderId} 
    };
var result = Method(login, password, "CREDO_ORDER", Params);

....

var Params = new [] 
    {
        new RsParameter {Key = "calculation_id", Value = calculationId},
        new RsParameter {Key = "calculation_date", Value = calculationDate}
    };
var result = Method(login, password, "CREDO_ORDER", params, "XLS"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:36:00.573

第一件事，

```
 1- move the export and simple display functionality into 2 different methods.
 2- Create a Client Object exactly once by using Singleton Pattern. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:38:03.783

如果您有超过两种情况，您可以执行循环来迭代和跳过重复代码。只需为每次迭代使用不同的数据（字符串等）创建一个 var：

```
keys= new[]
{
    "order_id",
    "calculation_id",
    //etc
} 
```

# spring-security - Spring Data JPA 和 spring-security：数据库级别的过滤器（尤其是分页）

> ID：15108543
> 
> 赞同：11
> 
> 时间：2013-02-27T09:32:29.873
> 
> 标签：spring-security, spring-data, querydsl

我正在尝试使用注释和 spring-security 为我的开源项目添加方法级别的安全性。我现在面临的问题是 findAll 方法，尤其是用于分页的方法（例如返回页面）。

使用 @PostFilter 对列表有效（但我个人认为在应用程序而不是数据库中过滤不是一个好主意），但在分页查询上完全失败。

这是有问题的，因为我有一个包含`List<Compound>`. 复合有不同的实现，用户可能只有读取其中一个复合的权限。复合使用`TABLE_PER_CLASS`继承。存储库实现`QueryDslPredicateExecutor`.

我的想法是为每个查询添加一个谓词，根据当前用户限制返回结果。但是我有点迷失了a）用户和角色的数据模型应该如何看待以及b）然后如何创建谓词（一旦定义了模型，这可能很容易）。或者 querydsl 是否已经提供基于类型的过滤（在查询类中包含的元素上）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T09:19:16.500

目前没有这样的支持，但我们在路线图上有它。您可能想关注[DATACMNS-293](https://jira.springsource.org/browse/DATACMNS-293)以获得一般进展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:36:15.787

暂时想出了以下解决方案。由于我的项目相当简单，这可能不适用于更复杂的项目。

1.  用户可以读取某个类的所有实体或不读取任何实体

因此任何查询方法都可以用`@PreAuthorize`包含注释`hasRole`。

例外是`Container`我项目中的实体。它可以包含任何子类，`Compound`并且用户可能无权查看所有子类。它们必须是过滤器。

为此，我创建了一个`User`and`Role`实体。`Compound`具有 OneToOne 关系，`Role`并且该角色是 that 的“read_role” `Compound`。`User`并`Role`具有多对多关系。

```
@Entity
public abstract class Compound {    
    //...
    @OneToOne    
    private Role readRole;
    //...   
} 
```

我所有的存储库都实现`QueryDSLPredicateExecutor`了，这在这里变得非常有用。`repositry.findAll(predicate)`我们只在服务层创建它们并使用and ，而不是在存储库中创建自定义 findBy-methods `repository.findOne(predicate)`。谓词包含实际的用户输入+“安全过滤器”。

```
@PreAuthorize("hasRole('read_Container'")
public T getById(Long id) {        
    Predicate predicate = QCompoundContainer.compoundContainer.id.eq(id);
    predicate = addSecurityFilter(predicate);
    T container = getRepository().findOne(predicate);        
    return container;
}

private Predicate addSecurityFilter(Predicate predicate){        
    String userName = SecurityContextHolder.getContext().getAuthentication().getName();            
    predicate = QCompoundContainer.compoundContainer.compound.readRole
        .users.any().username.eq(userName).and(predicate);        
    return predicate;
} 
```

注意：`QCompoundContainer`是 QueryDSL 生成的“元模型”类。

最后，您可能需要将 QueryDSL 路径初始化`Container`为`User`：

```
@Entity
public abstract class CompoundContainer<T extends Compound> 
    //...
    @QueryInit("readRole.users") // INITIALIZE QUERY PATH
    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL,
            targetEntity=Compound.class)
    private T compound;
    //...
} 
```

省略这最后一步可能会导致`NullPointerException`.

进一步提示：`CompoundService`在保存时自动设置角色：

```
if (compound.getReadRole() == null) {
    Role role = roleRepository.findByRoleName("read_" + getCompoundClassSimpleName());
    if (role == null) {
        role = new Role("read_" + getCompoundClassSimpleName());
        role = roleRepository.save(role);
    }
    compound.setReadRole(role);
}
compound = getRepository().save(compound) 
```

这行得通。缺点有点明显。这与同一类实现`Role`的每个实例相关联。`Compound`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-25T17:20:24.447

8 年后，仍然没有开箱即用的解决方案。因此，我创建了支持将安全条件注入所有 JPA 存储库操作的库，包括：

*   基本操作 ( `findOne`, `findAll`, `save`, `delete`)
*   具有规范 ( `findAll(Specification, ...)`)的查找器
*   querydsl finders（与 Spring WEB 和 Spring Data REST 一起使用）
*   用户特定的查找器 ( `findByValue`)

[https://github.com/vlsergey/spring-data-entity-security](https://github.com/vlsergey/spring-data-entity-security)

# json - 如何从linkedin jsapi获取公司ID

> ID：15108544
> 
> 赞同：1
> 
> 时间：2013-02-27T09:32:30.853
> 
> 标签：json, linkedin, string-search, jsapi

我试图使用 jsapi 从linkedin 获取公司 ID，iam 使用下面的 url

"/company-search:(公司:(id,name))?keywords=ibm%20oracle%20infosys"

我有一些其他公司的身份证

```
{"companies": {
"_count": 10,
"_start": 0,
"_total": 1079,
"values": [
{
  "id": 6005,
  "name": "Sonata Software"
},
{
  "id": 5983,
  "name": "QLogic"
},
{
  "id": 39626,
  "name": "Prosoft Technology Group"
},
{
  "id": 6290,
  "name": "BCC"
},
{
  "id": 23367,
  "name": "Goldstone Technologies"
},
{
  "id": 36655,
  "name": "SoftwareONE"
},
{
  "id": 10951,
  "name": "Sirius Computer Solutions"
},
{
  "id": 10046,
  "name": "ITWorx"
},
{
  "id": 7833,
  "name": "SYSTIME"
},
{
  "id": 57561,
  "name": "ZSL Inc"
}
]
}} 
```

如何一次获取多个公司的公司 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T01:20:10.767

为此使用 JSON.stringify 加上一个正则表达式：

```
JSON.stringify({"companies": {
"_count": 10,
"_start": 0,
"_total": 1079,
"values": [
{
  "id": 6005,
  "name": "Sonata Software"
},
{
  "id": 5983,
  "name": "QLogic"
},
{
  "id": 39626,
  "name": "Prosoft Technology Group"
},
{
  "id": 6290,
  "name": "BCC"
},
{
  "id": 23367,
  "name": "Goldstone Technologies"
},
{
  "id": 36655,
  "name": "SoftwareONE"
},
{
  "id": 10951,
  "name": "Sirius Computer Solutions"
},
{
  "id": 10046,
  "name": "ITWorx"
},
{
  "id": 7833,
  "name": "SYSTIME"
},
{
  "id": 57561,
  "name": "ZSL Inc"
}
]
}}).match(/id..\d+/g) 

/* Returns:
["id":6005", "id":5983", "id":39626", "id":6290", "id":23367", "id":36655", "id":10951", "id":10046", "id":7833", "id":57561"] 
*/ 
```

# c# - 根据 StackPanel 中的属性显示控件

> ID：15108550
> 
> 赞同：0
> 
> 时间：2013-02-27T09:33:06.530
> 
> 标签：c#, windows-phone-8

我在一个 Windows Phone 应用程序中有一个`StackPanel`with three `TextBlock`s，在一个看起来像这样的页面上：

```
<StackPanel>
   <TextBlock></TextBlock>
   <TextBlock></TextBlock>
   <TextBlock></TextBlock>
</StackPanel> 
```

基于属性值，我想显示任何一个`TextBlock`s。假设如果我有一个名为“Name”的属性，并且如果该属性的值为“1”，我只想显示第一个`TextBlock`类似的 2 和 3。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:38:43.283

将 Visiblity 绑定到模型上的属性并使用转换器：http: [//windowsphonegeek.com/articles/talking-about-converters-in-wp7--coding4fun-toolkit-converters-in-depth](http://windowsphonegeek.com/articles/talking-about-converters-in-wp7--coding4fun-toolkit-converters-in-depth)

```
public class IntToVisibilityConverter : IValueConverter
    {

public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
   int intValue (int)value;

    if(intValue == 1)
return Visibility.Visible;
else
return Visibility.Collapsed;
}

public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
{
throw new NotImplementedException();
} 
```

}

# c++ - 远程进程的 WM_PAINT

> ID：15108554
> 
> 赞同：0
> 
> 时间：2013-02-27T09:33:19.350
> 
> 标签：c++, windows, winapi, dll-injection

我想“拦截”另一个进程聊天框的 WM_PAINT 消息。函数：GetMessage(msg, hwnd, 0, 0) 似乎很完美，但我没有收到任何消息（我尝试以超级用户身份）从现在我的 C++ 代码找到好的子窗口并尝试“getMessage”，什么我忘记了吗？我必须将这个代码注入到我的其他进程中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:54:20.207

消息队列是每个线程的，因此您不能为其他线程或进程获取消息。

你需要的是安装一个窗钩。请参阅带有 WH_CALLWNDPROC 挂钩类型的[SetWindowsHookEx 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)您的 dll 将被加载到所有进程并拦截所有窗口消息。

然后决定您需要忽略哪些消息/进程/窗口以及处理哪些。

# git - Git：显示未提交的更改不显示？

> ID：15108559
> 
> 赞同：0
> 
> 时间：2013-02-27T09:33:24.503
> 
> 标签：git, github

嗨，我在 git 上遇到了这个问题（都是关于问题的）

我今天早上尝试同步我的工作并得到了这个：

![愚蠢的 :(](../Images/3333ac5228e72fc23d0386e8fdb0afad.png)

当我单击“未提交的更改时，它不会显示除此之外的内容。但我也无法提交。这是一个分离的标题。

该怎么办？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:40:14.333

你可以点击`Tools -> Open a Shell Here`。

从外壳，您可以运行

*   ' `git checkout master`' （或您所在的任何其他分支名称）从[分离的 HEAD](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)切换。
*   ' `git pull`' 在 shell 中拉下任何新的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:46:26.913

您可能处于*分离的 HEAD*状态，因为在某些时候，您签出了任意提交。

那是您要提交更改的时间点吗？或者您是否想将它们提交到现有分支的尖端，例如 master？

要从当前点创建分支，请使用`git checkout -b <new branch name>`... 然后您可以将更改提交到该分支。

要提交其他分支的提示，您首先需要检查它（例如`git checkout master`）。但是，根据您在处于分离头状态后所做的更改，这可能会恢复这些更改（git 不会从其存储库中丢失您的更改，但它们会更难找到......这可能不是你想成为）。

对您来说最简单的选择可能是从当前点创建一个分支，将您的更改提交到该分支，然后检查您的预期分支并合并。例如：-

```
git checkout -b newbranch
git commit -am 'my new changes'
git checkout master
git merge newbranch 
```

# windows-7 - 编写 Win7 x64 过滤器驱动并寻找起点

> ID：15108565
> 
> 赞同：0
> 
> 时间：2013-02-27T09:33:53.143
> 
> 标签：windows-7, filter, 64-bit, driver

我正在寻找编写一个过滤器驱动程序来校准来自平板电脑 Wacom 数字转换器的输入。据我所知，数字化仪是通过内部串行端口连接的，协议很简单。所以我需要做的是，我认为，为串口编写一个低过滤器驱动程序，然后将它安装在Wacom驱动程序和串口设备之间。

但是真的很难上手。我下载了 DDK，我想我已经阅读了足够多的内容来编译一个 .sys 文件（除了我在 x64 驱动程序上发现的很少，但我假设它很像带有一些额外编译器开关的 x86 驱动程序？ ）但我仍然对安装过程感到迷茫。我知道你应该在注册表中注册驱动程序，但是 PNP 系统通过什么机制知道我的驱动程序想要附加到堆栈中的哪个位置？

此外，过滤器是否可以由用户模式应用程序临时安装而不成为驱动程序树的永久部分？

我知道这是一个很大的话题，所以我不是在寻找任何人来指导我完成整个过程，但是好的资源似乎很少而且相差甚远。DDK 几乎没有关于 x64 的文档，关于过滤器驱动程序的文档更少，而且它大多掩盖了将驱动程序实际植入堆栈的细节。网上有什么好的读物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:46:01.737

您可以从 Microsoft 在线找到免费示例，包括过滤器驱动程序以及安装文件：[http ://code.msdn.microsoft.com/windowshardware](http://code.msdn.microsoft.com/windowshardware)

x64 编译确实与 x86 非常相似，但请注意架构差异（例如不同的指针大小）。此外，需要对 Win7 x64 驱动程序进行签名，而不是 x86 驱动程序。

具体关于 PNP 的说明，信息确实应该在 Inf 文件中，从这里挖掘：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff549520(v=vs.85) .aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549520(v=vs.85).aspx)

关于您的安装问题，没有临时安装之类的东西。但是，如果操作系统无法将其绑定到所需的接口（例如，较低的驱动程序不可用），则不会加载驱动程序。您还可以禁用过滤器驱动程序以避免其加载。

# c# - 如何在 VS2012 上同时工作时保持 Azure Web 角色在 IIS 上运行？

> ID：15108566
> 
> 赞同：1
> 
> 时间：2013-02-27T09:33:54.363
> 
> 标签：c#, asp.net, iis, azure, azure-compute-emulator

我正在构建一个具有 Web 角色的 Azure 云项目。Web 角色包含 Web API，我的同事一直在通过远程机器测试这些 API。因此，当我在 VS 上运行项目时，模拟器启动并且 Web 角色托管在 IIS 上。但是一旦我在 VS 上停止项目，模拟器也会从 IIS 中删除 Web 角色。很明显为什么会发生这种情况，但是有什么方法可以让 Web 角色在模拟器上持续运行并同时处理我的 VS 中的代码。因为对我来说，每当我的同事想要测试 API 时，我都必须停止在 VS 上工作，这对我来说真的很困难。

有什么解决方法或解决方案吗？

谢谢

编辑：

服务配置.Local.cscfg

```
<ConfigurationSettings>     
  <Setting name="StorageConnectionString" value="UseDevelopmentStorage=true" />
<ConfigurationSettings> 
```

网络角色：

```
var cloudStorageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("StorageConnectionString")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:01:56.977

您可以采取几种方法：

1.  您可以让团队成员在测试部署上测试 API，而不是在您的开发机器上。例如，您可以使用在 Azure 上运行的超小型 Web 角色实例。在 Visual Studio 中，您可以使用 Web 部署功能使用新代码快速更新此实例。只需几秒钟即可使您的更改生效。这种方法的额外好处是，您在开发时所做的重大更改不会影响您同事的测试（例如，让您的项目处于未编译或无法正常工作的状态）。

2.  您可以在您的计算机上运行两个 Visual Studio 实例：一个在 Azure 模拟器上以调试模式运行 Web 角色，另一个在开发模式下运行。

3.  您可以在 Visual Studio 中配置项目以与 IIS 集成，以便可以通过计算机的 IIS 服务器（在 Azure 模拟器之外）执行它。只要 Azure 存储模拟器正在运行，您的代码仍然可以访问模拟表服务。事实上，即使是 WinForms 或控制台项目也可以使用存储模拟器的服务。客户端代码本身不需要在 Azure 计算模拟器（这是两个不同的独立模拟器）下运行。在这种情况下，您不会从 Web 角色配置中获取存储连接字符串，而是从 Web.config 或 App.config 等应用程序配置中获取。

我会推荐方法1，即拥有一个单独的测试环境。您甚至可以针对它运行自动化集成测试。您将获得在 Azure 本身而不是模拟器上运行的额外优势。存在一些行为差异，这样您就可以在生命周期的早期检测到它们。

如果您的团队想要更上一层楼，您可以设置持续交付，这样当您的任何项目有任何存储库提交时，都会进行构建、部署到 Azure 和一组自动化测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:15:49.730

考虑设置持续交付：[使用 Team Foundation Service 持续交付到 Windows Azure](http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)

好处：

*   每次签入（或每天...）后，您的应用程序将自动部署到您的云服务。这样，您的其他开发人员可以使用此版本来使用 API。
*   您可以毫不费力地继续在本地开发

# wordpress - 我如何将 css 应用于特定的联系表格 7？

> ID：15108567
> 
> 赞同：0
> 
> 时间：2013-02-27T09:33:54.913
> 
> 标签：wordpress

我正在使用联系表格 7 并从中制作了 5 个表格，现在我想将 css 应用于特定表格。请帮忙。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:43:44.190

修改您要操作的联系表单中特定 id 和 div 的名称，并在 css 中执行相同操作

例如

```
#contactFormIChanged {
list-style:none;
margin:0;
}
#contactFormIChanged li{
float: left;
    height: 60px;
    margin:0 0 20px;
    position: relative;
    width: 540px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:43:27.183

转到存在表单的页面并查看已将类和 ID 分配给该表单。然后使用这些类/ID 为您的表单设置样式。

# vim - gvimdiff：最大化时如何将两个窗口的宽度保持在 50%？

> ID：15108568
> 
> 赞同：0
> 
> 时间：2013-02-27T09:33:54.700
> 
> 标签：vim, vimdiff

当我启动 gvimdiff 时，两个窗口占据了窗口宽度的 50%。正是我想要的。

但是，当我通过窗口管理器最大化 gvimdiff 窗口时，左侧窗口的宽度保持不变，所有额外的宽度都分配给右侧窗口。*最大化时（或更一般地说，对于任何*水平调整大小操作）有没有办法保持窗口宽度为 50/50 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:53:03.083

我不认为有这个选择。您可以近距离接触`autocmd`事件`VimResized`：

```
autocmd VimResized * normal ^w= 
```

哪里`^w`是由`Ctrl-v`+产生的`w`。或者没有控制字符：

```
 autocmd VimResized * exec "normal \<C-w>=" 
```

# ms-access - 如何在 MS Access 数据库中保存换行符

> ID：15108573
> 
> 赞同：2
> 
> 时间：2013-02-27T09:34:02.330
> 
> 标签：ms-access, ms-access-2010

我想保存一些特殊格式的数据。例如：

*   **AAAA**
*   **BBBB**
*   **中国交建**
*   **DDDD**

我可以将这些信息保存在 Access 中，但是当我想将它们显示给用户时。它在文本框中显示如下： **AAAABBBBCCCCCDDDD** 没有任何换行符。我的问题是：如何在 MS Access DB 中保存换行符？

非常感谢您的帮助！

**编辑 1**

即我在 .txt 文件中有这个信息块：

```
KENNLINIE KLPRAIL 3
   LANGNAME "Kennlinie zur Umsetzung Raildrucksensorspannung in Raildruck" 
   FUNKTION GGDSKV 
   EINHEIT_X "V"
   EINHEIT_W "MPa"
   ST/X   0.4980468750000000   1.8002319335937500   5.0000000000000000   
   WERT   0.0000000000000000   4.5000000000000000   15.5600000000000000   
END 
```

我想将**KLPRAIL 3**保存在一列中

```
 EINHEIT_X "V"
   EINHEIT_W "MPa"
   ST/X   0.4980468750000000   1.8002319335937500   5.0000000000000000   
   WERT   0.0000000000000000   4.5000000000000000   15.5600000000000000 
```

在另一列

我可以用这段代码来完成这项工作：

```
Dim kennL As String
Dim kennLS As Boolean
Dim kennLvalue As String
Dim kennLwert As String
Dim keLx As String
Dim keLw As String
Dim kelwer As String

kennL = InStr(1, entireline, "KENNLINIE")
keLx = InStr(1, entireline, "EINHEIT_X")
keLw = InStr(1, entireline, "EINHEIT_W")
keLsx = InStr(1, entireline, "ST/X")
kelwer = InStr(1, entireline, "WERT")
keLend = InStr(1, entireline, "END")

If kennL = 1 Then
kennLvalue = Mid(entireline, 10)
kennLS = True
End If

If keLx = 4 And kennLS = True Then
kennLwert = kennLwert + Mid(entireline, 4) + vbNewLine
End If

If keLw = 4 And kennLS = True Then
kennLwert = kennLwert + Mid(entireline, 4) + vbNewLine
End If

If kennLS = True And (keLsx = 4 Or kelwer = 4) Then
kennLwert = kennLwert + Mid(entireline, 4) + vbNewLine
End If
If kennLS = True And keLend = 1 Then

DoCmd.RunSQL ("INSERT INTO Test_dcml (WertName,WertValue) VALUES ('" & kennLvalue & "','" & kennLwert & "');")
kennLS = False
End If 
```

但如果我向用户显示此信息。这些信息显示如下：

```
EINHEIT_X "V" EINHEIT_W "MPa" ST/X   0.4980468750000000   1.8002319335937500   5.0000000000000000   WERT   0.0000000000000000   4.5000000000000000   15.5600000000000000 
```

**编辑2**

```
I use this code to show this Information to user:
Dim rcst As Recordset
Set rcst = CurrentDb.OpenRecordset("Test_Wertquery")
rcst.MoveFirst
Text5.SetFocus
Me.Text5.Text = rcst.Fields("WertValue").Value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:41:01.960

由于您存储的文本值在 a 中正确显示`MsgBox`，这意味着换行符正确存储在您的表中。所以问题出在文本框上。

检查复选框属性表的数据选项卡上的文本格式属性。

![文本框文本格式属性](../Images/36ed20317a84d3e68a235d448b75e919.png)

如果尚未设置为“纯文本”，请将其更改为*“纯文本” 。*使用*“富文本”*作为格式，框内容中的换行符将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:23:23.430

我会这样做：

```
Dim rcst As DAO.Recordset
Set rcst = CurrentDb.OpenRecordset("Test_Wertquery")

If Not rcst.EOF Then
    rcst.MoveFirst
    Me.Text9 = rcst.Fields("WertValue").Value
    rcst.Close
End If

Set rcst = Nothing 
```

# ruby-on-rails - kaminari 按字母顺序分页

> ID：15108577
> 
> 赞同：2
> 
> 时间：2013-02-27T09:34:13.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, kaminari

我正在尝试按字母顺序分页 - 所以我的指南将按字母顺序列出（并分组），顶部的分页将是按字母顺序排列的列表。到目前为止，我有：

指南控制器.rb

```
def index
    if params[:search].present?
    @search = Sunspot.search(Guideline) do  
      fulltext params[:search]
    end
    @guidelines = @search.results
  else

    @guidelines = Guideline.order(:title).page(params[:page]).per(5).to_a.group_by{|u|u.title[0].upcase}

  end 
```

index.html 视图

```
<%= paginate @guidelines %>
<% @guidelines.keys.sort.each do |starting_letter| %>
            <h3>
            <%= link_to starting_letter, {:action => :browse, :controller =>:index, :letter => starting_letter } %>
</h3>

                <% @guidelines[starting_letter].each do |guideline| %> 
```

然后是视图的其余部分

这给了我错误

```
ActionView::Template::Error (undefined method `current_page' for #<Hash:0x007fd974700148>):
    1: <%= paginate @guidelines %>
    2: 
    3: <div class="page-header">
    4:  <% if @search %>
  app/views/guidelines/index.html.erb:1:in `_app_views_guidelines_index_html_erb___4442223584034894893_70285969096020'
  app/controllers/guidelines_controller.rb:25:in `index' 
```

我离解决方案很近吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T22:26:59.957

您可以使用 kaminaris 数组包装类：[https ://github.com/amatsuda/kaminari#paginating-a-generic-array-object](https://github.com/amatsuda/kaminari#paginating-a-generic-array-object)

所以这条线可能看起来像这样：

```
@guidelines = Kaminari.paginate_array(Guideline.order(:title).to_a.group_by{|u|u.title[0].upcase}).page(params[:page]).per(5) 
```

注意：这是完全未经测试的，并且不在我的脑海中。

# html - Internet Explorer 10 中的水平下拉菜单无法正确显示

> ID：15108578
> 
> 赞同：4
> 
> 时间：2013-02-27T09:34:17.733
> 
> 标签：html, css, drop-down-menu, internet-explorer-10

我的网站上的水平下拉菜单有问题：[http://zoztargowek.waw.pl](http://zoztargowek.waw.pl)我真的不知道如何让它在**Internet Explorer 10**上运行。

它在 IE 9 和所有其他浏览器上运行良好，但在我升级到**IE 10**后它停止运行。现在，当您将鼠标悬停在菜单项上时，例如*Promocja zdrowia*将不会显示下拉菜单项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:37:08.333

由于您没有设置文档类型，浏览器将以 Quirks 模式而不是 Standards 模式运行。您突然看到 IE10 出现问题的原因是因为他们改变了默认怪癖模式的工作方式。你有两个选择：

**选项1：**

在文档顶部添加一个 doctype，例如`<!DOCTYPE html>`然后检查所有的 css 和 html 以确保它正确显示。

**选项 2：**

[您可以通过添加此元标记http://blogs.msdn.com/b/ie/archive/2011/12/14/interoperable-html5-quirks](http://blogs.msdn.com/b/ie/archive/2011/12/14/interoperable-html5-quirks-mode-in-ie10.aspx)来强制 IE 以正确的怪癖模式显示的捷径`<meta http-equiv="X-UA-Compatible" content="IE=5">`
[-mode-in-ie10.aspx](http://blogs.msdn.com/b/ie/archive/2011/12/14/interoperable-html5-quirks-mode-in-ie10.aspx)

# jquery - jQuery IE 不会触发加载事件

> ID：15108582
> 
> 赞同：1
> 
> 时间：2013-02-27T09:34:21.850
> 
> 标签：jquery, load, internet-explorer-9

我在加载图像后显示图像时遇到问题。我想要的效果是在图像后面显示一个正在加载的 .gif，当它加载时淡入。以下代码适用于我通过 AJAX 加载的任何图像，但是在页面加载时我想要相同的效果。

```
$(function() {
    $("#products img").hide().bind("load", function() {
        $(this).fadeIn(300);
    });
}); 
```

请注意，这在除 IE 之外的所有浏览器中都能正常工作（仅测试 9）。据我了解，它不会触发`load`事件，因为图像已缓存或图像在事件绑定之前已加载。我**希望**浏览器缓存图像，因此在图像 src 的末尾添加日期/时间戳并不是一个真正的选择。

有什么办法可以说`If the image is already loaded in some form or another, show it. Otherwise hide it and fade it in once it's loaded.`吗？

编辑：我尝试设置一个小提琴，但它并不喜欢它。[无论如何，如果它有帮助的话](https://jsfiddle.net/R27Dz/1/)

## 编辑

如果有人感兴趣[，我已经](https://jsperf.com/show-images-after-they-have-loaded)对这两个答案进行了快速的 js 性能测试。 [（来源：][[grabilla.com](http://grabilla.com/0321b-92ca6469-c766-4d84-8109-b07ab1967850.png)][）][![在此处输入图像描述](../Images/1db183f336471e8c16818ee186b60d7c.png)](https://i.stack.imgur.com/jO5RU.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:43:39.883

我遇到了同样的问题并像这样解决了它：

```
 $("#products img").one('load.FadeIn', function () {
     $(this).fadeIn(300);
 });

 $("#products img").trigger('load.FadeIn'); 
```

要么图像已经加载并淡入，要么我们手动触发事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:49:26.980

您可以添加一个过滤器，它只通过尚未加载的图像：

```
$("#products img")
  .filter(function(i, img) { return ! img.complete })
  .hide()
  .bind("load", function() {
    $(this).fadeIn(800);
  }); 
```

[演示](http://jsfiddle.net/R27Dz/3/)

# ruby-on-rails - 为 Rails 应用程序设置 httpd.conf

> ID：15108583
> 
> 赞同：0
> 
> 时间：2013-02-27T09:34:27.237
> 
> 标签：ruby-on-rails, linux, ubuntu, apache2

我正在尝试将 Rails 应用程序从 Heroku 迁移到 Amazon EC2，而在此之前我从未在服务器上工作过，更不用说在 Linux 上或使用 Apache 了。除了 Apache，我还在使用 Thin gem。我尝试配置我的 httpd.conf，就像我在 [here] 中阅读的那样，但它只显示了一个“Index of /”页面，该页面显示了目录中的文件（我的静态错误页面和 favicon），这不是我通常的方式查看我的应用程序（根设置为另一个视图）。[1](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_tutorial_example_writing_and_deploying_a_hello_world_wsgi_application)

```
<VirtualHost *:80>
  DocumentRoot /opt/bitnami/apache2/myapp/public
  <Directory /opt/bitnami/apache2/myapp/public>
    Allow from all
    Options -MultiViews
  </Directory>
</VirtualHost> 
```

我是否在 httpd.conf 文件中错误地声明了我的应用程序？我意识到我直接指向公共目录，而我的正常根目录是 Pages#index，但是我在 httpd.conf 文件中看到的 Rails 配置似乎都指向公共目录。

我认为它必须与我配置文件的方式有关，因为我的应用程序在 Heroku 和本地的正确页面上启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:31:02.593

在配置 Apache conf 文件之前从这里开始。您需要乘客才能运行您的 Rails 应用程序。如果您安装了 Rails，您可以在 Ubuntu 上使用 rvmsudo 执行此操作，如下所示。

```
xyz@superGLTS:~$ rvmsudo gem install passenger
xyz@superGLTS:~$ rvmsudo passenger-install-apache2-module 
```

确保使用 rvmsudo，因为它会考虑所有 Rails 环境变量。

如果此操作失败，则发布错误输出，因为您可能需要安装其他支持库。

然后，一旦您拥有 Rails 应用程序的应用程序服务器，我们就可以返回您的 conf 文件。

EDIT1：如果乘客安装在较新的 Ubuntu 上失败，那么您可能需要安装 build-essential，如下所示：

```
xyz@spuerGLTS:~$ sudo apt-get install build-essential 
```

编辑2：

您现在遇到的错误是 tmp/cache 的权限问题。运行您的 Web 服务器的用户：组必须拥有或能够写入该目录结构 tmp/cache/.... 在您在 Git 上发布的 httpd.conf 中，您有 daemon:daemon 运行您的 Web 服务器。那是你的问题。您可能可以通过将 tmp/cache 更改为 daemon:daemon 来快速修复它，但这有点半生不熟。您应该为此唯一目的创建一个用户：组，然后正确配置 environment.rb，这已经有一段时间了，但是在乘客指南中应该有一个关于用户配置和设置权限的部分

# java - 仅具有 API 级别 15 的 Android 模拟器上的内存不足错误

> ID：15108584
> 
> 赞同：0
> 
> 时间：2013-02-27T09:34:33.910
> 
> 标签：java, android, memory, out-of-memory

尝试返回到 API 级别 15 的模拟器中的 Activity 时出现此错误。

```
02-27 09:20:54.282: E/dalvikvm-heap(629): Out of memory on a 17040400-byte allocation.
02-27 09:20:54.343: E/AndroidRuntime(629): FATAL EXCEPTION: main
02-27 09:20:54.343: E/AndroidRuntime(629): java.lang.OutOfMemoryError
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:374)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:404)
02-27 09:20:54.343: E/AndroidRuntime(629):  at com.visma.sandbox.rotatingmenu.v.BitmapResourceSet.loadBitmap(BitmapResourceSet.java:92)
02-27 09:20:54.343: E/AndroidRuntime(629):  at com.visma.sandbox.rotatingmenu.v.BitmapResourceSet.loadAndCacheBitmap(BitmapResourceSet.java:84)
02-27 09:20:54.343: E/AndroidRuntime(629):  at com.visma.sandbox.rotatingmenu.v.BitmapResourceSet.load(BitmapResourceSet.java:49)
02-27 09:20:54.343: E/AndroidRuntime(629):  at com.visma.sandbox.RotatingMenuSurface.loadBitmapResourceSet(RotatingMenuSurface.java:118)
02-27 09:20:54.343: E/AndroidRuntime(629):  at com.visma.sandbox.RotatingMenuSurface.surfaceCreated(RotatingMenuSurface.java:69)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.view.SurfaceView.updateWindow(SurfaceView.java:533)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:226)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.view.View.dispatchWindowVisibilityChanged(View.java:5839)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:945)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:945)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:945)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:965)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.os.Looper.loop(Looper.java:137)
02-27 09:20:54.343: E/AndroidRuntime(629):  at android.app.ActivityThread.main(ActivityThread.java:4424)
02-27 09:20:54.343: E/AndroidRuntime(629):  at java.lang.reflect.Method.invokeNative(Native Method)
02-27 09:20:54.343: E/AndroidRuntime(629):  at java.lang.reflect.Method.invoke(Method.java:511)
02-27 09:20:54.343: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-27 09:20:54.343: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-27 09:20:54.343: E/AndroidRuntime(629):  at dalvik.system.NativeStart.main(Native Method)
02-27 09:23:09.022: E/InputDispatcher(90): channel '41643028 com.visma.sandbox/com.visma.sandbox.IncomeInfoMenu (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

最大 VM 堆大小为 48，设备 ram 大小为 512，但奇怪的是，使用具有完全相同堆大小和内存大小的不同模拟器，但使用 API 级别 16，它工作得很好。它也适用于 API 级别 8、堆大小为 24 的模拟器和我的 API 级别 10 的真实设备。

API 级别 15 有什么特别之处，还是我应该将其作为模拟器错误忽略？

感谢您的回复。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T09:51:22.803

嗨，可能是位图大小或其他问题，或者堆大小增加，请查看这些帖子，这可能对您有帮助

[android模拟器上的内存不足错误，但在设备上没有](https://stackoverflow.com/questions/7427587/out-of-memory-error-on-android-emulator-but-not-on-device)

[从外部存储加载位图时出现 OutOfMemory 异常](https://stackoverflow.com/questions/4102758/outofmemory-exception-when-loading-bitmap-from-external-storage)

# opencv - OpenCV - 测量两条边之间的距离

> ID：15108585
> 
> 赞同：0
> 
> 时间：2013-02-27T09:34:35.130
> 
> 标签：opencv, image-processing

我想测量两条边之间的距离（以像素为单位）。以下是我使用的图像和我使用的代码的链接。

**图片**：

![在此处输入图像描述](../Images/b306e0ff260c8e1acb2cc565128d6f11.png)

![在此处输入图像描述](../Images/058e3373d7211b5d26fba8519a517751.png)

![在此处输入图像描述](../Images/ad5fb3b77b00efba0c536f8404d7605b.png)

![在此处输入图像描述](../Images/30f89728f4299355c5bd92e0100b5f7f.png)

在程序 1 中：程序[1](http://pastebin.com/VNdhyYuU)

`Mat`我从 0 到 cols扫描了图像的特定行。即沿着一条扫描线。在这种情况下，我正确地获得了白色像素（即边缘像素）的位置。

在程序 2 中：程序[2](http://pastebin.com/uJNwr4ka)

我从中间扫描图像的特定行`Mat`，即我从行的中间到右方向直到 cols，然后再从中间到行的第 0 列进行测量。在这种情况下，我在获取白色像素（即边缘像素）的位置时得到了错误的值。

您能否建议我代码中有什么问题或者是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T08:22:31.617

我没有通过你的代码。但是如果你想测量两个不平行的边缘之间的距离，我建议对每行取它们之间的距离并取平均值。也许你得到的错误值是由于多个边缘。所以这是你可以做的，

1.  从第 0 行第 0 列开始
2.  获取白色像素，存储当前列。(cur_loc = xxx)
3.  找到下一个白色像素（ new_loc = yyy ），测量差异，将其放入表格中。将此像素标记为起始像素 (cur_loc = new_loc) 并搜索下一个像素，直到到达列的末尾。
4.  重置 cur_loc 和 new_loc 并重新开始。

# google-maps - 骨干网、requireJS、Googlemaps - 地图未显示

> ID：15108586
> 
> 赞同：2
> 
> 时间：2013-02-27T09:34:36.113
> 
> 标签：google-maps, backbone.js, requirejs

我在让谷歌地图显示在我的页面上时遇到问题，我正在使用 RequireJS 和 Backbone，并且显然缺少一些简单的东西（我才刚刚开始使用骨干网），但地图永远不会在页面上呈现。没有错误， .map 属性看起来像一个谷歌地图对象。

得到一些指示真的很好

下面是尽可能简化的，但表现出以下行为：

标记摘录：

```
<style>
#mapCanvas img { width:auto, max-width: auto; display:inline; }
#mapCanvas {height:600px;}
</style>

<div class="span8">
    <div id="mapCanvas">

    </div>
</div> 
```

代码：

```
requirejs.config({
  baseUrl: '../resources/js',
  paths: {
        jquery: 'https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min',
        jqueryui: 'https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min',
        datatables: 'http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min',
        gmaps: 'http://maps.google.com/maps/api/js?sensor=false',
        backbone : 'libs/backbone.min',
        underscore: 'libs/underscore.min'
    },
  shim: {
    gmaps: {
        deps: ['jquery','async!http://maps.google.com/maps/api/js?sensor=false'],
        exports: 'google'
    },
    underscore: {
        exports: '_'
    },
    backbone: {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
    }
  }
});

 require(["domReady!","jquery","underscore","backbone", "gmaps"], function(doc, $, _, Backbone, google) {

    var siteMarkers = Backbone.View.extend({
        el: "#mapCanvas",
        initialize: function() {

            this.LatLng = new google.maps.LatLng(53.785948,-1.40728)
            var myOptions = {
                zoom: 8,
                center: this.LatLng,
                mapTypeControl: true,
                mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                navigationControl: true,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }

            this.map = new google.maps.Map(this.el, myOptions);
            this.render();
        },
        render: function() {
            return this;
        }
    });

     var markerView = new siteMarkers();

 }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:14:42.827

而不是填充谷歌地图，将其定义为一个模块：

```
define('gmaps', ['async!http://maps.googleapis.com/maps/api/js?key=xxx&sensor=false'], function() {
    return google.maps;
}); 
```

# android - Actionbar 徽标在展开的 ActionView 上打开应用程序图标

> ID：15108587
> 
> 赞同：5
> 
> 时间：2013-02-27T09:34:36.580
> 
> 标签：android, android-actionbar

我在造型上遇到了很多障碍`ActionBar`。

我现在遇到的问题`ActionView`是展开时的徽标/图标。出于某种原因，它在这里不使用可绘制的徽标，而是使用可绘制的应用程序图标。我希望它消失或设置为我自己的可绘制对象。我尝试直接在`onMenuItemActionCollapse()`使用`setIcon()`功能中设置图标`ActionBar`没有运气。还尝试在其中设置主页和徽标。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T11:49:41.463

我找到了它，虽然没有记录，但当我浏览源代码时，我看到它实际上使用的是图标而不是徽标。我还发现`icon`在`actionBarStyle`. 所以以下工作：

```
<style name="action_bar" parent="@android:style/Widget.ActionBar">
    <item name="android:logo">@drawable/logo</item>
    <item name="android:icon">@drawable/logo</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T16:44:47.983

所以，我遇到了同样的问题并以这种方式解决了它：

1.  确保您的徽标具有适当的可绘制对象。我使用 Android Asset Studio 来做到这一点。
2.  在您的清单中，请`application`确保您指定了您的图标和徽标。
3.  在您的活动（或者，在我的情况下，片段）中，将 ActionBar 的图标设置为使用`setIcon`.

当我处理这个问题时，#3 为我“工作”了，但图标最终成为 ActionBar 中使用的更小的版本，所以我确保我的应用程序中的大小合适（我没有在时间）。

# android - Android SearchView：按下望远镜键时再次搜索

> ID：15108590
> 
> 赞同：0
> 
> 时间：2013-02-27T09:34:40.230
> 
> 标签：android, searchview, key-events, android-virtual-keyboard

我正在使用 SearchView 小部件在 ListView 中搜索文本。
输入文本时，会打开一个虚拟键盘。当按下“望远镜键”时，我想重复搜索。
**如何拦截虚拟键盘按键事件？**

注意：不要将虚拟键盘中右下角的望远镜键与 SearchView 小部件中的望远镜图标混淆。

我会告诉你我尝试了什么，因此我知道它不起作用：

*   SearchView 上的 onQueryTextChange()
*   SearchView 上的 onKeyListener()
*   SearchView 上的 TextWatcher()
*   ListView 上的 dispatchKeyEvent()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:49:26.730

这是我想要的解决方案。
我还没有找到如何为“spyglass key”获取 KeyEVent（我认为它与 KEYCODE_ENTER 相同），所以我所做的是启用 SearchView 上的提交按钮“并且`onQueryTExtSubmit()`每次都会收到一个电话单击（onQueryTextListener 的方法）。

```
 sv = (SearchView) findViewById(R.id.viewer_search);
    sv.setOnQueryTextListener(searchListener);
    sv.setSubmitButtonEnabled(true);
    sv.setIconifiedByDefault(false); 
```

和

```
private OnQueryTextListener searchListener = new OnQueryTextListener() {

    @Override
    public boolean onQueryTextSubmit(String query) {
        // do my stuff
        return true; 
    }

    . . . 
```

# .net - 如何在 .Net 智能卡中管理/存储加密密钥？

> ID：15108591
> 
> 赞同：0
> 
> 时间：2013-02-27T09:34:41.913
> 
> 标签：.net, security, encryption, smartcard, secret-key

我一直在这里搜索并阅读了很多关于密钥的 Q，但不幸的是，没有人询问智能卡或任何便携式设备。

这是我的问题：

我有存储敏感医疗信息的**智能卡。**，我需要使用卡内的任何对称算法**加密**此信息。但我真的对**密钥**感到困惑。

*   我应该把它**存放**在哪里？
*   每次存储新信息时都必须生成它吗？
*   我应该选择一个强键并将其存储在某个地方而不更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:54:59.433

您的问题在这方面有点不清楚，您试图使用加密保护什么以及针对什么（爱好程序员，密码学专家，秘密服务）。由于智能卡及其操作系统可以充分保护自己，因此您不太可能希望防止未经授权的卡被提取。合法主机应用程序也不太可能以加密形式进行处理。所以很可能读取过程本身需要受到保护，这对于非接触式/NFC 来说是显而易见的，但对于基于接触的通信来说也是一个好主意。

这里的重要术语是**安全消息传递**。要么你有一个强大的静态密钥，它很少需要改变，这取决于使用的强度，或者更常见的是，你协商一个会话密钥，这也可能取决于一个（可能是固定的）秘密。两者都可以与序列计数器结合使用，因此即使在会话中读取相同的数据也会提供不同的密码。无论您选择哪种方式，都必须在两侧存储/计算密钥。部分机密需要自己进行安全存储，这取决于攻击的可能性，可能存储在磁盘上的加密文件（具有完全不同的密钥）中，或者在极端情况下，存储在称为**安全模块的特殊智能卡等设备上**，它可能具有防篡改的硬件抵抗力。（如果不能阻止攻击，至少显示出操纵，例如通过破坏的安全封条）。

# javascript - 如何在 javascript 中将 JSON 数据隐藏在单独的数组中？

> ID：15108593
> 
> 赞同：0
> 
> 时间：2013-02-27T09:34:46.813
> 
> 标签：javascript

我的`JSON`数据具有以下格式：

```
[{"Name":"A","Id":"1"},{"Name":"B","Id":"2"},{"Name":"C","Id":"3"}] 
```

如何将其转换为两个单独的数组 as`Name[]`和`Id[]`using `JavaScript`？我需要以下方式的数据：

```
Name[0] should be : "A"
Name[1] should be : "B" and so on ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:37:29.660

这应该工作， jsonArray 是你的 JSON

```
var name = [], ids = [];
jsonArray.forEach(function(item){
  name.push(item.Name);
  ids.push(item.Id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:16:34.310

如果您要处理大量不同来源的数据，则可以使用 miso 项目。

```
var ds = new Miso.Dataset({
  data: [ 
    { one : 1, two : 4, three : 7 },
    { one : 2, two : 5, three : 8 }
  ]
}).fetch({
  success: function() {
    log( this.column('one').data );
  }
}); 
```

[http://misoproject.com/dataset/api.html#misodataset_i_fetch](http://misoproject.com/dataset/api.html#misodataset_i_fetch)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:39:14.873

```
var data = [{"Name":"A","Id":"1"},{"Name":"B","Id":"2"},{"Name":"C","Id":"3"}];

var result = {};
for (var i=0; i<data.length; i++) {
    for (var key in data[i]) {
        var item = data[i][key];
        if (key in result)
            result[key].push(item);
        else
            result[key] = [item];
    }
}

result.Name // ["A","B","C"]
result.Id // ["1","2","3"] 
```

# c# - 基类与子类值的字典兼容性

> ID：15108599
> 
> 赞同：2
> 
> 时间：2013-02-27T09:34:56.003
> 
> 标签：c#, .net, generics, inheritance, dictionary

我有一个对象层次结构：

```
MyObject
+Variable
+etc. 
```

（所以 MyObject 是基类，Variable 是子类之一）。

我有特定类型的字典

```
private ConcurrentDictionary<string, Variable> variables 
    = new ConcurrentDictionary<string, Variable>(); 
```

等等

我想将所有各种列表放在一本高级词典中，在那里我可以找到所有特定列表：

```
private Dictionary<Type, ConcurrentDictionary<string, MyObject>> objects 
    = new Dictionary<Type, ConcurrentDictionary<string, MyObject>>(); 
```

但我无法将特定词典添加到高级词典：

```
objects.Add(typeof(Variable), variables); // DOES NOT COMPILE 
```

有没有办法做我想做的事？我不想将变量列表定义为

```
private ConcurrentDictionary<string, MyObject> variables 
    = new ConcurrentDictionary<string, MyObject>(); // WORKS, BUT NOT NICE TO USE 
```

所以我想使用特定的列表来执行特定于类型的操作，而且还可以通过“对象”字典对所有对象类型启用通用操作，这样我就不需要为每个子类型手动编写所有代码。

例如，我想定义一个这样的方法：

```
 public List<Variable> GetVariables()
    {
        return variables.Values.ToList();
    } 
```

所以当我知道它们都是变量时，我可以使用变量对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:08:38.843

正如您在示例中看到的那样，您尝试完成的操作是不可能的，因为您试图将类型`ConcurrentDictionary<string, Variable>`对象和类型对象添加`ConcurrentDictionary<string, MyObject>`到字典中，该字典具有强类型作为`ConcurrentDictionary<string, MyObject>`. 因此，您不能添加第一种类型的对象。就像您想添加`double`和`string`作为`Dictionary<int, string>`对象的第二个参数时一样，这是不可能的。

但是有一种解决方法可能是可行的。如果您的所有类型（`MyObject, Variable`等）都来自同一个接口，那么您可以执行以下操作：

```
public interface MyInterface
{          
}

public class MyObject:MyInterface
{
}

public class Variable:MyInterface
{
} 
```

您可以调用此代码，类似于您想要的代码。当您检索所需的字典时，您可以将对象转换为特定类型或使用常用方法，多态性将达到其目的。

```
ConcurrentDictionary<string, MyInterface> myClass1Dict = new ConcurrentDictionary<string, MyInterface>();
myClass1Dict.TryAdd("one", new MyObject());
myClass1Dict.TryAdd("two", new MyObject());
ConcurrentDictionary<string, MyInterface> myClass2Dict = new ConcurrentDictionary<string, MyInterface>();
myClass1Dict.TryAdd("one", new Variable());
myClass1Dict.TryAdd("two", new Variable());
ConcurrentDictionary<Type, ConcurrentDictionary<string, MyInterface>> objectDict = new ConcurrentDictionary<Type, ConcurrentDictionary<string, MyInterface>>();
objectDict.TryAdd(Type.GetType(MyObject), myClass1Dict);
objectDict.TryAdd(Type.GetType(Variable), myClass2Dict); 
```

# linux - 语法错误：shell 脚本中出现“do^M”意外

> ID：15108601
> 
> 赞同：0
> 
> 时间：2013-02-27T09:35:03.663
> 
> 标签：linux, bash, shell, unix

```
#!/bin/sh

BASE=/abc/def
DEST=/xyz/ijk
FILE1=fun.c
FILE2=hello.c

if [ ! -d $DEST ]
then
   echo "Directory $DEST not found!"
   mkdir -p $DEST
fi

for FILE in $FILE1 $FILE2
do
   SRC=$BASE/$FILE
   TRG=$DEST/$FILE
   if [ -e $SRC ]
   then
      if [ -e $TRG ]
      then
          rm -f $TRG
      fi
      ln $SRC $TRG
      echo "Creating link for $SRC file..."
   else
      echo "File $SRC does not exists!"
   fi
done 
```

我正进入（状态

> link.sh[15]: 语法错误: `do^M' 出乎意料

我运行工具`dos2unix`删除所有`^M`字符，但仍然出现相同的错误。我在只有`/bin/sh`和没有`bash`.

# angularjs - ng-list 中 contenteditable 项的两种方式绑定

> ID：15108602
> 
> 赞同：12
> 
> 时间：2013-02-27T09:35:04.413
> 
> 标签：angularjs, contenteditable, angularjs-ng-repeat

我正在寻找使用 contenteditable 属性更新电话列表中的电话名称。我曾尝试使用 ng-change，但没有被解雇。有什么办法可以做到这一点吗？

我有一个清单`Store.Phones`

```
<ul class="store">
  <li ng-repeat="Phone in Store.Phones">
     <strong contenteditable> {{Phone.Name}}</strong>
  </li>
<ul> 
```

所以现在当我编辑电话名称时，我需要在列表中更新它。

我已经尝试过这样的事情，模型指向元素。这是行不通的。

```
<strong ng-model='Store.Phones[$index].Name'> {{Phone.Name}}</strong> 
```

还

```
<strong ng-model='PhoneName' ng-change='PhoneNameChanged()'> {{Phone.Name}}</strong> 
```

但在这种情况下，该方法不会被解雇。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T09:40:06.370

*编辑*

这是一个基于 Angular 文档中示例的示例，该示例仅使用`ng-repeat`. 由于`ng-repeat`为每次迭代创建了一个新的范围，所以这应该不是问题。

```
<!doctype html>
<html ng-app="form-example2">
<head>
    <script src="http://code.angularjs.org/1.0.5/angular.min.js"></script>
    <script>
    angular.module('form-example2', []).directive('contenteditable', function() {
        return {
            require: 'ngModel',
            link: function(scope, elm, attrs, ctrl) {
                // view -> model
                elm.bind('blur', function() {
                    scope.$apply(function() {
                        ctrl.$setViewValue(elm.html());
                    });
                });

                // model -> view
                ctrl.$render = function() {
                    elm.html(ctrl.$viewValue);
                };

                // load init value from DOM
                ctrl.$setViewValue(elm.html());
            }
        };
    });
    </script>
</head>
<body>
    <div ng-repeat="i in [1, 2, 3]">
        <div contentEditable="true" ng-model="content" title="Click to edit">Some</div>
        <pre>model = {{content}}</pre>
    </div>
    <style type="text/css">
    div[contentEditable] {
        cursor: pointer;
        background-color: #D0D0D0;
    }
    </style>
</body>
</html> 
```

*原来的*

这里有一个例子说明你如何做到这一点：http: [//docs.angularjs.org/guide/forms](http://docs.angularjs.org/guide/forms)

它位于“实现自定义表单控件（使用 ngModel）”标题下。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-27T09:41:38.163

只需删除`ctrl.$setViewValue(elm.html());`

链接到[http://jsfiddle.net/blingz/B5UbE/12/](http://jsfiddle.net/blingz/B5UbE/12/)

# arrays - 将字节分配给字符串delphi xe2

> ID：15108604
> 
> 赞同：1
> 
> 时间：2013-02-27T09:35:07.187
> 
> 标签：arrays, string, delphi, byte, delphi-xe2

我有代码

```
procedure _UUEncode;
var
  Sg: string;
  Triple: string[3];
begin
  ...
  Byte(Sg[1]) := Byte(Sg[1]) + Length(Triple); // <- on this line I got error
  ...
end; 
```

我收到“无法分配左符号”错误，有人可以帮助我吗？我尝试从 Delphi 7 组件转换为 XE2 组件

感谢您的建议，我真的很感激，可能有人有我在将delphi7 vcl组件转换为xe2时必须注意的事项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:42:16.763

在所有版本的 Delphi 中，我都会这样写：

```
inc(Sg[1], Length(Triple)); 
```

如果可能，避免强制转换总是值得的。在这种情况下，您想要增加一个序数值，`inc`这就是这样做的。

您的类型转换失败的原因是对分配目标的转换是特殊的。这些类型转换称为*变量类型转换*，[文档](http://docwiki.embarcadero.com/RADStudio/en/Expressions_%28Delphi%29#Variable_Typecasts)说：

> 您可以将任何变量转换为任何类型，只要它们的大小相同并且您不要将整数与实数混合。

在您的情况下，失败是因为尺寸不匹配。那是因为`Char`在 Unicode Delphi 中是两个字节宽。因此，原始代码的最字面转换是：

```
Word(Sg[1]) := Word(Sg[1]) + Length(Triple); 
```

但是，使用它会更好更清晰`inc`。

也可以想象，您的 uuencode 函数应该可以使用，`AnsiString`因为 uuencode 将二进制数据映射到 ASCII 的子集。如果您确实切换到，`AnsiString`那么您的原始代码将保持不变。说了这么多，我还是觉得`inc`比较清楚！

# mysql - 错误代码 1292 Mysql 日期时间

> ID：15108606
> 
> 赞同：1
> 
> 时间：2013-02-27T09:35:07.437
> 
> 标签：mysql

我正在尝试将一个日期和时间格式化为一个名为 DATE 的列中的 DD/MM/YYYY (Varchar) 和另一个名为 TIME 作为 HH:MM:SS 的列中的一个变量以插入到另一列中（在 Datetime 数据中类型）。下面的代码是我的程序。

```
DROP PROCEDURE IF EXISTS TESTProc;

DELIMITER //

CREATE PROCEDURE TESTproc()

BEGIN

DECLARE LYEAR VARCHAR(45); 

DECLARE LMONTH VARCHAR(45);

DECLARE LDAY VARCHAR(45);

DECLARE LTIME VARCHAR(45);

DECLARE LDATETIME DATETIME; 

SELECT TIME FROM db.test_table INTO LTIME;

SELECT SUBSTRING(DATE,6,4) FROM db.test_table INTO LYEAR;

SELECT SUBSTRING(DATE,3,2) FROM db.test_table INTO LMONTH;

SELECT SUBSTRING(DATE,1,1) FROM db.test_table INTO LDAY;

SELECT CONCAT(LYEAR,'-', LMONTH,'-','0',LDAY,' ',LTIME) INTO LDATETIME;

INSERT INTO db.test_table(VC19) VALUES (LDATETIME);

END //

Call TESTProc; 
```

当我运行该过程时，我得到一个错误代码：

```
Call TESTProc;  Error Code: 1292\. Incorrect datetime value: '2013-31-01 16:00:40' for column 'LDATETIME' at row 2 
```

我在 db.test_table 中只有一行。我在表中没有名为“LDATETIME”的列，这只是我的局部变量。我可以从错误中看到我的格式对于 DateTime 'YYYY-MM-DD HH:MM:SS' 是正确的。

为什么我会收到此错误？

更新：这是我的代码现在的样子：

```
DROP PROCEDURE IF EXISTS DateProc;

DELIMITER //

CREATE PROCEDURE Dateproc()

BEGIN

DECLARE LTIME VARCHAR(45);

DECLARE LDATE VARCHAR(45);

DECLARE LDATETIME DATETIME; 

SELECT TIME FROM db.date_table INTO LTIME;

SELECT DATE FROM db.date_table INTO LDATE;

IF LENGTH(LDATE) = 9 AND SUBSTRING(LDATE,2,1) = '/'
THEN SET LDATETIME = CONCAT(SUBSTRING(LDATE,6,4),'-0',SUBSTRING(LDATE,1,1),'-',SUBSTRING(LDATE,3,2), ' ', LTIME);

ELSE IF LENGTH(LDATE) = 9 AND SUBSTRING(LDATE,3,1) = '/'
THEN SET LDATETIME = CONCAT(SUBSTRING(LDATE,6,4),'-',SUBSTRING(LDATE,1,2),'-0',SUBSTRING(LDATE,4,1), ' ', LTIME);

ELSE IF LENGTH(LDATE) = 10 
THEN SET LDATETIME = CONCAT(SUBSTRING(LDATE,7,4),'-',SUBSTRING(LDATE,1,2),'-',SUBSTRING(LDATE,4,2), ' ', LTIME);

ELSE IF LENGTH(LDATE) = 8 
THEN SET LDATETIME = CONCAT(SUBSTRING(LDATE,5,4),'-0',SUBSTRING(LDATE,1,1),'-0',SUBSTRING(LDATE,3,1), ' ', LTIME);

END IF;

END IF;

END IF; 

END IF;

INSERT INTO db.date_table(table_name) VALUES (LDATETIME);

END //

CALL DateProc; 
```

这似乎有效，并解释了可能最终出现在我的原始日期列中的任何可变日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:39:25.413

看价值：

```
'2013-31-01 16:00:40' 
```

那是尝试使用31*个月*。

目前尚不清楚这是否仅仅意味着您的测试数据错误，或者您是否需要更改这些行：

```
SELECT SUBSTRING(DATE,3,2) FROM db.test_table INTO LMONTH;
SELECT SUBSTRING(DATE,1,1) FROM db.test_table INTO LDAY; 
```

到：

```
SELECT SUBSTRING(DATE,1,2) FROM db.test_table INTO LMONTH;
SELECT SUBSTRING(DATE,4,2) FROM db.test_table INTO LDAY; 
```

注意从 1 开始的子字符串从 1 到 2 的变化，以及从 3 到 4 的第二个起始位置的变化。您想要两位数的月份和日期值，对吗？如果您的数据格式*实际上是*D/M/YYYY（即在需要时仅使用两位数），那么您将无法使用固定的子字符串位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:39:33.210

不知何故，您的 LMONTH 和 LDAY 值似乎被颠倒了，因为 LMONTH 被写为 31 而 LDAY 被写为 01 - 这显然是不正确的。检查源表中的数据。

# grid - Extjs4 过滤具有相同商店的网格

> ID：15108608
> 
> 赞同：1
> 
> 时间：2013-02-27T09:35:12.980
> 
> 标签：grid, extjs4, filtering, store

我有一个选项卡面板，其中包含两个选项卡`Tab1`和`Tab2`.
`Tab1`包含一个网格面板和一个用于根据特定字符过滤此网格的按钮。
`Tab2`包含相同的网格。
问题是当我过滤网格时`Tab1`，我不希望网格`Tab2`被过滤，因为它们是独立的！
发生的事情是逻辑，因为两个网格具有相同的存储，但是我可以将两个网格上的过滤效果分开。

**解决方案**

我需要创建商店的一个实例，我这样声明它：

```
{
     xtype: 'grid',
     store: 'theStore'
     // Rest of the properties
} 
```

我需要做的是：
创建商店的一个实例：`var My_Store = Ext.create('App.store.MyStore');`
然后：

```
{
    xtype: 'grid',
    store:My_Store
    //column definitions etc...   
}​ 
```

这将创建一个唯一的商店实例，如果我像这样引用商店： store: 'MyStore' 我只是得到同一个商店，当我排序、分页、过滤时……所有商店都做同样的事情。

# image - ckeditor 图像对齐

> ID：15108611
> 
> 赞同：1
> 
> 时间：2013-02-27T09:35:18.900
> 
> 标签：image, alignment, ckeditor, justify

我已经为 ckeditor 3.6.4 完成了自定义图像上传器。我为段落插入图像和按钮“中心”不适用于图像。在 fckeditor 中，我可以将图像与此按钮对齐。如何在 cekdtior 中使其工作。

[http://imageshack.us/photo/my-images/17/66892061.jpg/](http://imageshack.us/photo/my-images/17/66892061.jpg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:04:40.427

这是因为图像必须被包裹在一个（伪）块元素中，`text-align: center;`并且要居中。没有其他（有效）方法可以使图像居中，因此图像的“居中”按钮被禁用。事实上，您在 FCK 中看到的完全错误，至于这种情况：

```
<p>Foo<img src="path" />Bar</p> 
```

整个段落居中：

```
<p style="text-align: center;">Foo<img src="path" />Bar</p> 
```

总结一下：您必须手动执行此操作。

# c# - Windows Phone 8\. IP 配置

> ID：15108612
> 
> 赞同：1
> 
> 时间：2013-02-27T09:35:19.300
> 
> 标签：c#, windows-phone-8, network-protocols, ipconfig

如何获取所有可用接口的网络参数（ip4、ip6、掩码、网关）`WindowsPhone 8`？一样`ipconfig`。我找到了如何做到这一点`Iphlpapi`，但我找不到它`WP8`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:33:17.917

`HostName`您可以使用（MSDN 参考[此处](http://msdn.microsoft.com/en-us/library/windows/apps/br207113.aspx)）的属性来查找网络是在 WP8 上使用 IPv4 还是 v6 。的`IPInformation`属性`HostName`应该包含您要查找的内容。但是它不会告诉你我可以看到的网络网关。

您可以从中获取当前活动网络的列表`Windows.Networking.Connectivity.NetworkInformation.GetHostNames()`（请参见[此处](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkinformation.gethostnames.aspx)- 在两个参考之间导航有点痛苦）。

# php - 复制文件不复制但给出错误 php_network_getaddresses: getaddrinfo failed: -PHP

> ID：15108617
> 
> 赞同：1
> 
> 时间：2013-02-27T09:35:38.940
> 
> 标签：php

我正在尝试从 URL 复制图像，例如：`http://www.slate.com/content/dam/slate/articles/technology/technology/2013/01/130110_TECH_SamsungCES.jpg.CROP.rectangle3-large.jpg`可通过浏览器访问，但错误是：***Warning: copy() [function.copy]: php_network_getaddresses: getaddrinfo failed: Name or service not known in***

```
$file_name="http://www.slate.com/content/dam/slate/articles/technology/technology/2013/01/130110_TECH_SamsungCES.jpg.CROP.rectangle3-large.jpg";

copy($file_name,"uploads/"); 
```

我使用时没有返回错误`move_uploaded_file($file_name,"uploads/");`，文件也没有被复制。

这里有什么问题的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:45:35.893

```
<?php
$file_name="http://www.slate.com/content/dam/slate/articles/technology/technology/2013/01/130110_TECH_SamsungCES.jpg.CROP.rectangle3-large.jpg";

copy($file_name,"test.jpg");
?> 
```

这有效，请确保：

1.  您正在为复制命令指定目标文件名（不仅仅是目录）
2.  在你的 php.ini`allow_url_fopen = On`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:56:29.790

这里也可以，不过试试下面的代码，只是把域名改成解析的IP地址：

看起来服务器没有正确解析域。

```
<?php

$file_name="http://50.17.234.211/content/dam/slate/articles/technology/technology/2013/01/130110_TECH_SamsungCES.jpg.CROP.rectangle3-large.jpg";

copy($file_name,  "uploads/130110_TECH_SamsungCES.jpg.CROP.rectangle3-large.jpg");

?> 
```

# python - 并行文档转换 ODT > PDF Libreoffice

> ID：15108618
> 
> 赞同：12
> 
> 时间：2013-02-27T09:35:38.507
> 
> 标签：python, bash, libreoffice

我正在将数百个 ODT 文件转换为 PDF 文件，一个接一个需要很长时间。我有一个多核 CPU。是否可以使用 bash 或 python 编写脚本来并行执行这些操作？有没有办法从命令行使用 libreoffice 并行化（不确定我是否使用正确的词）批处理文档转换？我一直在 python/bash 中调用以下命令：

```
libreoffice --headless --convert-to pdf *appsmergeme.odt 
```

或者

```
subprocess.call(str('cd $HOME; libreoffice --headless --convert-to pdf *appsmergeme.odt'), shell=True); 
```

谢谢！

蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:12:34.517

您可以将 libreoffice 作为守护程序/服务运行。请检查以下链接，也许它对您也有帮助：[守护 LibreOffice 服务](http://www.linuxquestions.org/questions/blog/sag47-492023/headless-file-conversion-using-libreoffice-as-a-service-35310/ "有用的链接")

其他可能性是使用[unoconv](https://github.com/dagwieers/unoconv)。“unoconv 是一个命令行实用程序，可以将 OpenOffice 可以导入的任何文件格式转换为 OpenOffice 能够导出的任何文件格式。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-13T08:49:35.747

由于作者已经介绍了 Python 作为有效答案：

```
import subprocess
import os, glob
from multiprocessing.dummy import Pool    # wrapper around the threading module

def worker(fname, dstdir=os.path.expanduser("~")):
    subprocess.call(["libreoffice", "--headless", "--convert-to", "pdf", fname],
                    cwd=dstdir)

pool = Pool()
pool.map(worker, glob.iglob(
        os.path.join(os.path.expanduser("~"), "*appsmergeme.odt")
    )) 
```

使用线程池而不是进程池`multiprocessing.dummy`就足够了，因为`subprocess.call()`无论如何都会产生用于真正并行性的新进程。

我们可以直接设置命令以及当前工作目录`cwd`。无需`shell`为每个文件加载一个。此外，还`os.path`支持跨平台互操作性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-13T00:09:21.753

这个线程或答案是旧的。我测试了 libreoffice 4.4，我可以确认我可以同时运行 libreoffice。看我的剧本。

```
for odt in test*odt ; do
echo $odt
soffice --headless --convert-to pdf $odt & 
ps -ef|grep ffice 
done
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-05T09:01:19.737

我在 golang 中编写了一个程序来批量转换数千个 doc/xls 文件。

*   将“根”变量值定义为要转换的文档的路径
*   跳过已转换为pdf的文档（如果没有，请在 visit() 函数中注释检查条件）
*   这里我使用 4 个线程（我有一个 4 核的 Intel i3）。您可以修改 main() 函数中的值

有时可能会发生 Libreoffice 不转换某些文件的情况，因此您应该打开它并手动将它们转换为 PDF。幸运的是，在我需要转换的 16.000 个文档中，它们只有 10 个。

```
package main

import (
    "os/exec"
    "sync"
    "path/filepath"
    "os"
    "fmt"
    "strings"
)

// root dir of your documents to convert
root := "/.../conversion-from-office/"

var tasks = make(chan *exec.Cmd, 64)

func visit(path string, f os.FileInfo, err error) error {
    if (f.IsDir()) {
        // fmt.Printf("Entering %s\n", path)
    } else {
        ext := filepath.Ext(path)
        if (strings.ToLower (ext) == "pdf") {
        } else {

            outfile := path[0:len(path)-len(ext)] + ".pdf"

            if _, err := os.Stat(outfile); os.IsNotExist(err) {

                fmt.Printf("Converting %s\n", path)

                outdir := filepath.Dir(path)
                tasks <- exec.Command("soffice", "--headless", "--convert-to", "pdf", path, "--outdir", outdir)
            }
        }
    }
    return nil
} 

func main() {
    // spawn four worker goroutines
    var wg sync.WaitGroup

    // the  ...; i < 4;... indicates that I'm using 4 threads
    for i := 0; i < 4; i++ {
        wg.Add(1)
        go func() {
            for cmd := range tasks {
                cmd.Run()
            }
            wg.Done()
        }()
    }

    err := filepath.Walk(root, visit)
    fmt.Printf("filepath.Walk() returned %v\n", err)

    close(tasks)

    // wait for the workers to finish
    wg.Wait()
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-13T08:10:01.110

*我们对unoconv*也有类似的问题。*unoconv 在*内部使用*libreoffice*。我们通过一次调用将多个文件发送到 unoconv 来解决它。因此，我们不是遍历所有文件，而是将文件集划分为桶，每个桶代表 o/p 格式。然后我们拨打与桶一样多的电话。

我很确定*libreoffice*也有类似的模式。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-06T21:16:43.743

*未经测试*可能有效：

您/可能/能够：

*   以某种公平的方式将文件分成多个并行批次，例如将它们全部放在文件夹中；
*   创建一个不同的本地用户帐户来处理每个文件夹；
*   以每个用户的身份连续运行 Libreoffice

例如

```
 for paralleluser in timlev1 timlev2 timlev3 timlev4 ; do
      su - $paralleluser -c \
         "for file in /var/spool/pdfbatches/$paralleluser ; do \
            libreoffice --headless --convert-to pdf $file ; done" 
 done 
```

通过使用`su -`，您不会意外地从真实会话中继承任何环境变量，因此并行进程*不应*相互干扰（除了争夺资源）。

请记住，这些可能是 I/O 密集型任务，因此每个 CPU 内核运行 1 个可能*不会*让您加速很多。

# jquery - 附加内容后jQuery iframe消失

> ID：15108619
> 
> 赞同：0
> 
> 时间：2013-02-27T09:35:40.383
> 
> 标签：jquery, iframe, fancybox

在将我的内容注入fancybox 中的iframe 之后。框架可见 1 秒钟，然后消失。这发生在chrome和firefox中。

这是我的代码：

```
<script type="text/javascript">
$(document).ready(function() {

var f, txt, d, ifrmwin,edd;

var getContent = function(){
    return $("#iframe-content").contents().find("html").html();
};

$('.push_preview_lightbox_menu_iphone').fancybox({    

type: 'iframe',
  onComplete: function(){
     $('#fancybox-content iframe').removeAttr("src");
    var $iframeWrap = $("<div id=\"preview_smartphone\" style=\"margin: 0 auto; width: 550px;height:445px;\"></div>")
                  .append( 
                      $('<div style=\"width: 350px;height: 445px;overflow: hidden;cursor: pointer;margin-left: 45px;\"></div>') 
                      .append( 
                            $('<iframe></iframe>', {id: 'preview-iframe',width:"268px", height:"445px"})
                        )
               );
    eff = $('#fancybox-content iframe')[0].contentWindow.document;
    $("html", eff).append($iframeWrap);
    edd = $("#preview-iframe")[0].contentWindow.document;
    $("html", edd).append(getContent());
    },

});
});
</script> 
```

iFrame 是与页面其余部分相同的域。

有人有想法吗？

非常感谢和最好的问候！

**编辑：**

好的..这是解决方案：

```
<script type="text/javascript">
$(document).ready(function() {

var f, txt, d, ifrmwin,edd;

var getContent = function(){
    return $("#iframe-content").contents().find("html").html();
};

$('.push_preview_lightbox_menu_iphone').fancybox({    

'content': function() {
        return $('div#content').html() + '<div id="preview_smartphone" style="margin: 0 auto;">'
        + '<div style="width: 250px;height: 445px;overflow: hidden;cursor: pointer;margin-left: 45px;">'
        + '<iframe width="268px" height="445px" id="preview-iframe" frameborder="0">'
        + '</iframe></div></div>';
    },
  onComplete: function(){
    eff = $('#preview-iframe')[0].contentWindow.document;
    $("body", eff).append(getContent());
    },

});
});
</script> 
```

# javascript - 为什么我在通过 DOM 树时没有从文本节点获取值？

> ID：15108620
> 
> 赞同：2
> 
> 时间：2013-02-27T09:35:41.777
> 
> 标签：javascript, html, dom

在以下脚本中，我尝试在*DOM 树*中移动，但没有得到预期的输出。

这里面只有一小段*html*：

```
<p id="para">This is inside the <em>p</em> tag.</p> 
```

当我穿过树时，这就是我得到的：

```
Node Name : P
Node Type : 1
Node Value : null

Node Name : HTML
Node Type : 1
Node Value : null 
```

* * *

```
<html>
<head>
    <title>JavaScript</title>
</head>

<body> 
    <p id="para">This is inside the <em>p</em> tag.</p>

    <script type="text/javascript">
        function nodeStatus(node) {
            document.write("Node Name : " + node.nodeName + "<br />");
            document.write("Node Type : " + node.nodeType + "<br / >");
            document.write("Node Value : " + node.nodeValue + "<br / >");
            document.write("<br / > <br / >");
        }
        var curElement = document.getElementById("para");
        nodeStatus(curElement); // p tag
        curElement = document.firstChild; // This is inside the 
        nodeStatus(curElement);
        curElement = document.nextSibling; // em tag
        nodeStatus(curElement);
        curElement = document.firstChild; // p
        nodeStatus(curElement); 
    </script>
</body> 
```

为什么我不能从`text-node`?

我作为节点名称获得的***HTML***是什么？我没有将任何节点命名为*HTML*。

jsFiddle：http: [//jsfiddle.net/HmkJQ/](http://jsfiddle.net/HmkJQ/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:40:33.537

您正在做的是从每一行代码中的顶级文档开始。你开始：

```
var curElement = document.getElementById("para"); 
```

你得到了预期的 p 元素。但是随后您尝试获取 p 元素的子元素，但是使用此代码

```
curElement = document.firstChild; 
```

你得到的是**文档**本身的第一个孩子（这意味着根 html 元素！）。

相反，您应该按如下方式导航：

```
curElement = curElement.firstChild; 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:41:00.403

NodeName 的节点`HTML`是`<html>`元素，即`document.firstChild`。您没有得到任何文本节点，因为您正在遍历 HTML 元素，即 DOM 元素节点。[在 MDN 上有更多关于此的内容](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)。

您的代码本身处理一个名为 的变量`curElement`，这表明您希望这些是元素节点，而不是它们的内容。

要获取位于元素节点*内的*节点，您可能需要获取`childNodes`任何给定的`curElement`.

# vim - 如何拉出没有折叠内容的代码块？

> ID：15108622
> 
> 赞同：4
> 
> 时间：2013-02-27T09:35:42.833
> 
> 标签：vim, fold, yank

我写了一个描述 vim 折叠的博客。所以我需要这样的代码。

```
+-- 15 lines: set_up_socket_dir () {-------------------------------------------- 
```

但是当我拉线时，实际上拉了折叠的代码。我怎样才能从 vim 得到那条线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:36:45.213

您可能想查看一个 vim 函数：

```
:h foldclosed( 
```

你可以用这个函数写一个`:g`命令行：

```
:g/^/if line('.')==foldclosed('.') || foldclosed('.')==-1|y Z |endif 
```

所以你的工作流程是：

`qzq` 清除寄存器`z`

`...visual select lines...`

`'<,'>g/^/if line('.')==foldclosed('.') || foldclosed('.')==-1|y Z |endif`

`"zp`做粘贴

如果您经常使用它，您可以创建一个映射或命令。

它的工作原理如下：

![在此处输入图像描述](../Images/a705dd3bc99b5531921b3e434151f0ce.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T10:17:08.803

要呈现在 Vim 中看到的缓冲区/范围（包括语法高亮和折叠），可以使用内置`:TOhtml`命令。这将为您提供 HTML。对于整个窗口布局，有[ScreenShot 插件](http://www.vim.org/scripts/script.php?script_id=1552)。

如果你只想要纯文本，我会启动控制台 Vim，用鼠标选择整个内容，然后使用终端的复制功能将选择复制到系统的剪贴板。（我相信您也可以使用*screen*或*tmux*来做到这一点。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T10:19:02.707

IIUC，你想复制封闭的折叠文本标题。您可以通过无模式选择来做到这一点（请参阅 参考资料`:help modeless-selection`）。`Ctrl`用+标记文本`Shift`。

# twitter - 查找关注者数 = MAX_FOLLOWER 的 Twitter 用户

> ID：15108624
> 
> 赞同：3
> 
> 时间：2013-02-27T09:35:51.917
> 
> 标签：twitter

我一直在寻找追随者超过 MAX_FOLLOWER（程序员设置的任何数字）的 Twitter 用户。

我访问了 twitter API，发现我可以通过 q="keyword" 进行搜索，但找不到任何可以使用 follower_count >= MAX_FOLLOWER 在 API 中进行搜索的方法

[也尝试在https://dev.twitter.com/tags/finding-users](https://dev.twitter.com/tags/finding-users)上查看一些方法，但它们并没有真正的帮助，因为我找不到我正在寻找的确切内容。

即使对于 oAuth 的东西，我也尝试在创建签名后创建一个 URL，但仍然无法使用它。![在此处输入图像描述](../Images/8e89882d84972f1cfbc0302bf6bea6b2.png)

![在此处输入图像描述](../Images/1e9381a86e714c85d14d9ef3d0458bd2.png)

如果我复制 url 并将其解码为地址栏并发送它说页面不存在的请求，则从签名基本字符串。所以看起来我什至无法正确使用这些服务。

我的最终结果将是我想要一个粉丝数超过 MAX_FOLLOWER 的用户列表，然后我可以对这些用户进行新的查询。

我一直在尝试这些东西超过 4-5 个小时，完全不知道我在哪里做错了或如何继续。阅读了很多 twitter api 文档，但在我的案例中我找不到任何有用的东西。

# c++ - 如何避免程序上的 Windows“不回答”消息

> ID：15108625
> 
> 赞同：1
> 
> 时间：2013-02-27T09:35:54.737
> 
> 标签：c++, windows, qt

使用 Qt 编写程序时，我们可以有很长的递归过程，

如果是这样，一段时间后，窗口会在窗口标题旁边显示“不回答”消息。

此消息可能会导致用户认为程序不工作，这是不正确的。

如何避免在 Qt 中出现此消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T09:39:29.800

为了保持对系统和用户输入的响应，将长时间运行的任务放入它自己的线程中。您可能还想向用户提供反馈，例如进度条，以便他看到程序仍在执行他要求的某些工作。

有关在 Qt 中使用线程的介绍，另请参阅[线程基础知识和一些示例的](http://qt-project.org/doc/qt-5.0/qtcore/thread-basics.html)[线程和并发编程](http://qt-project.org/doc/qt-5.0/qtdoc/examples-threadandconcurrent.html)示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T09:46:27.350

如果您的流程由于循环（或递归函数）而需要很长时间，您可以在循环中调用 QCoreApplication::processEvents() 来要求您的应用程序处理事件。

如果你只有一条指令需要很长时间（比如复制一个大文件），你可以使用 QThread 或 QtConcurrent。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T09:47:21.707

虽然奥拉夫的回答很好，但更简单的方法是在代码中添加[QCoreApplication::processEvents()](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#processEvents)。

从文档：

> 根据指定的标志处理调用线程的所有挂起事件，直到没有更多事件要处理。当您的程序忙于执行长时间操作（例如复制文件）时，您可以偶尔调用此函数。

# jsf-2 - 将文本包装在primefaces的dataList中

> ID：15108630
> 
> 赞同：0
> 
> 时间：2013-02-27T09:36:05.440
> 
> 标签：jsf-2, primefaces

```
 <p:dataList value="#{testBean.students}" var="stud" rows="5" >
        <p:column>  
            <p:commandLink value="#{stud.name}" action="#{testBean.edit}" process="@this">    
            </p:commandLink>  
        </p:column>
  </p:dataList> 
```

我正在使用简单的数据列表并使用命令链接进行编辑。此数据列表是学生列表。

> 我的问题是 datlist 的学生姓名为“teststudent1234567890123456789012345678901234567890”。

如何将此名称包装在数据列表中，以便我只能显示 teststudent 并包装单词以使其适合数据列表。验证已完成，学生姓名最多可包含 50 个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:29:45.920

`#{fn:substring(name, begin, end)}`像这样使用`#{fn:substring(stud.name, 0, 10)}`。不要忘记在视图中包含命名空间，以使 jstl 函数可用于您的页面：`xmlns:fn="http://java.sun.com/jsp/jstl/functions"`. [这里有一个示例](http://www.tutorialspoint.com/jsp/jstl_function_substring.htm)以及[jstl 1.1 函数的规范](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/tld-summary.html)。

# android - android - 从广播发送一些数据到打开的活动

> ID：15108632
> 
> 赞同：1
> 
> 时间：2013-02-27T09:36:05.763
> 
> 标签：android

我打开了带有禁用按钮的活动，此活动在打开时会自动向我们的服务提供商发送 SMS 消息（查询消息）。（这就是本次活动的使命）。

现在，我让广播接收器在某些情况下收听我的查询消息的回复，我想在已打开的活动上启用按钮。

简而言之 - 我想在活动打开时根据广播接收器中收到的消息启用活动中的禁用按钮？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:42:41.877

如果您已经`BroadcastReceiver`在此活动中注册，而不仅仅是使用`setEnabled(true)`in`onReceive`方法：

```
@Override
public void onReceive(Context context, Intent intent) { 
     button.setEnabled(true);
} 
```

# oracle11g - 有什么方法可以在 64 位 Oracle 客户端上运行 TOAD？

> ID：15108638
> 
> 赞同：1
> 
> 时间：2013-02-27T09:36:22.183
> 
> 标签：oracle11g, windows-7-x64, toad

我在 Win 7 64 位操作系统上使用 Toad for Oracle Xpert 10.1.1.8。我已经安装了 Oracle 11g 64 位客户端。我收到此错误：**无法加载 OCI DLL: C:\oracle\product\11.1.0\oci.dll**。我用谷歌搜索了这个错误，发现 TOAD 只能在 32 位 Oracle 客户端上运行。有什么方法可以在 64 位 Oracle 客户端上运行 TOAD？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:19:54.350

根据关于 Quest Support 基础的[知识文章](https://support.quest.com/SolutionDetail.aspx?id=SOL33534)

> 由于某些 Toads 组件中使用的 Delphi 编程语言的限制，11.6 之前的 Toad for Oracle 版本不支持 64 位 Oracle 客户端。
> 
> 11.6 及以上版本完全兼容 64 位。现在有 64 位安装程序和 32 位安装程序。请注意，您应该为 64 位 Toad 安装安装 64 位 Oracle 客户端，为 32 位安装安装 32 位 Oracle 客户端。
> 
> 对于 11.5 及以下版本，必须安装 32 位 Oracle 客户端

# java - 限制公共可访问成员 - 解决方法

> ID：15108641
> 
> 赞同：1
> 
> 时间：2013-02-27T09:36:28.277
> 
> 标签：java, oop, visibility

我想在逻辑部分“数据”、“命令”和“引擎”中打破我的应用程序模型。应用程序之外的每个人都应该获得对数据的只读访问权和对命令的访问权。使用这些命令，他们可以操作数据。

其中，我在包中构建了我的应用程序：

```
myapp.model.data
myapp.model.commands
myapp.model.engines 
```

引擎和命令都需要对数据进行写访问。因此，我必须以公共接口的形式公开写访问权限。这导致了外部客户端也对我的数据有写访问权限的问题，这是不允许的。这样做的问题是，命令使用事件调用引擎来检查数据的一致性。客户端将在不调用引擎的情况下操作数据，从而破坏数据的一致性。

这个问题有没有常见的做法。请不要建议我必须等到 Java 8，因为我现在想编写我的应用程序。将所有类都放在一个包中也是没有选择的，因为我会失去对应用程序的概述。

**编辑**

我阅读了一些关于树和图的不变性的网站。我看到了一个名为 zipper 的好主意：http: [//scienceblogs.com/goodmath/2010/01/13/zippers-making-functional-upda/](http://scienceblogs.com/goodmath/2010/01/13/zippers-making-functional-upda/)。不幸的是，这似乎不适用于我的情况。

回想一下，我有一个复杂的对象图结构，它将随着时间的推移进行操作。目标是限制客户端仅使用我的命令来操作数据。因此，在我的情况下，我没有看到不变性的优势。

为此，我为数据类提供了两个公共接口，一个是只读的，一个是可写的。每当客户端使用只读实例调用命令时，我只需将其强制转换为可写实例。这种方法解决了我的问题，但有两个很大的缺点。首先，我假设每个只读实例同时是一个可写实例——这可能会导致一些丑陋的错误。其次，客户端可以做同样的事情并具有写访问权限。但我不能说这是他们自己的错。

有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:54:53.060

我认为这是文件夹的常见限制（树状结构）。解决方案：

1.  确保不应访问文档数据 (JavaDoc)。
2.  如果你想走极端，你可以检查呼叫来自哪里并拒绝它（有点矫枉过正）

作为补充，这里有一篇关于这个主题的博客文章：[一个从根本上改进你的包结构的简单建议](http://edmundkirwan.com/general/radial2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:56:55.510

对于这类问题，我采用了三种模式。按照我尝试它们的大致顺序：

1）不可变/无副作用。函数式编程语言强烈推荐的一种技术，java.lang.String 就是一个例子。这里单个实例是不可变的，并且调用 mutate 创建一个新实例。可能不适用于您如何设计命令和引擎的接口，但如果您有精力重新设计他们的接口，那么这是一种非常强大的方法，可以减少行数。

2) 可锁定对象模式。一个对象在首次创建时是可变的，但在共享之前它是“锁定的”。在被锁定后，对变异方法的任何调用都会出错。解锁对象涉及创建对象的新副本。

3) 为可变实例创建一个只读包装器。这使您可以控制谁可以变异，以及谁可以只读。java.util.Collections#unmodifiableList(List list) 是这种装饰器样式模式的 Java 运行时示例，它将 setter 方法保留在共享接口上。可以使用完全没有 setter 方法的不同接口。

我的偏好始终是 1，因为它会导致更简单的代码更容易扩展。但是，如果我对此有疑问，那么我倾向于退回到 2，因为它在方法之间提供了平衡，并且不允许另一个线程正在改变另一个线程后面的实例的可能性。它也不需要那么多额外的代码，但它确实需要纪律来确保对象被正确锁定并强制执行锁定语义。因此，这在实践中并不是很常见的模式。

# javascript - 使用ajax调用获取包含3个数组的json对象并将数组传递给javascript

> ID：15108656
> 
> 赞同：0
> 
> 时间：2013-02-27T09:37:17.697
> 
> 标签：javascript, ajax, arrays, json

我有一个创建以下输出的页面：

```
<script>
  var JSONObject = { "groups":['1210103','1210103','1210103','1210405'],
                     "prices":['279,00','399,00','628,00','129,00'],
                     "titles":['','','','']
                    }; 
</script> 
```

此页面由 ajax 调用调用：

```
$.ajax({url:plink,success: function(result) { } 
```

我现在需要接收 json 数组并将它们传递给普通的 javascript 数组。我怎么做？

我尝试过：

```
result = jQuery.parseJSON(data);
mygroups = result.groups;
myprices = result.prices;
mylabels = result.titles; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:39:22.427

更改您的页面，使其*只*生成 JSON：

```
{"groups":["1210103","1210103","1210103","1210405"],
 "prices":["279,00","399,00","628,00","129,00"],
 "titles":["","","",""]
} 
```

请注意，在 JSON 中，您**必须**使用`"`，而不是`'`，来引用字符串。

让它返回`Content-Type`一个`application/json`. 如果由于某种原因您无法在响应上设置正确的标头，您可以通过添加到您的调用`Content-Type`来强制 jQuery 将响应视为 JSON ，但最好使用正确的.`dataType: 'json'``ajax``content-Type`

然后在您的`ajax`调用`success`回调中，`result`将*已经*是一个具有三个属性（`groups`、`prices`、`titles`）的反序列化对象，这将是您可以使用的 JavaScript 数组。

[实例](http://jsbin.com/ixojuc/1)| [来源](http://jsbin.com/ixojuc/1/edit)

* * *

您在下面的评论中说过，该页面是一个带有嵌入`script`标签的完整 HTML 页面，除了标签的内容之外，您无法控制它`script`，因为您使用的是 CMS。

我**强烈**建议转向更灵活的 CMS。

直到/除非你能做到这一点，你可以简单地接收页面作为文本，然后提取 JSON。`script`将您的标签更改为以下内容：

```
<script>
var JSONObject = /*XXX_JSONSTART_XXX*/{"groups":["1210103","1210103","1210103","1210405"],
 "prices":["279,00","399,00","628,00","129,00"],
 "titles":["","","",""]
}/*XXX_JSONEND_XXX*/;
</script> 
```

注意标记。然后您可以提取标记之间的 JSON，并`$.parseJSON`在其上使用。例子：

```
(function($) {

  $.ajax({
    url: "http://jsbin.com/ecolok/1",
    dataType: "text",
    success: function(result) {
      var startMarker = "/*XXX_JSONSTART_XXX*/";
      var endMarker   = "/*XXX_JSONEND_XXX*/";
      var start, end;

      start = result.indexOf(startMarker);
      if (start === -1) {
        display("Start marker missing");
      }
      else {
        start += startMarker.length;
        end = result.indexOf(endMarker, start);
        if (end === -1) {
          display("End marker missing");
        }
        else {
          result = $.parseJSON(result.substring(start, end));
          display("result.groups.length = " + result.groups.length);
          display("result.prices.length = " + result.prices.length);
          display("result.titles.length = " + result.titles.length);
        }
      }
    }
  });

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }

})(jQuery); 
```

[实时复制](http://jsbin.com/ixojuc/2)| [来源](http://jsbin.com/ixojuc/2/edit)

# javascript - 跨浏览器跨操作系统获取 keyCode/字符按下 onkeydown 事件的方法

> ID：15108670
> 
> 赞同：11
> 
> 时间：2013-02-27T09:37:57.533
> 
> 标签：javascript, dom

例如，如果我有这个：

```
<input type='text' onkeydown='doSomething()' />

<script>
  function doSomething() {
    // ?
  }
</script> 
```

我需要以跨浏览器/操作系统的方式按下 keyCode/character.. 怎么做？我在 6 年前尝试过这个，我记得那个时候，这并不容易，有时我必须通过事件或其他东西才能让它在歌剧或 IE cmiiw 上工作

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-01-15T00:24:54.437

你很接近，但你的代码的问题是你正在执行`doSomething()`以响应`keyDown`事件......让我们仔细看看 - 你在执行时`doSomething` *没有在*. 即使您确实通过了参数，您也没有命名/接受参数。

对您的代码进行一些快速调整，一切就绪：

```
// Notice an `event` argument, containing the important data
function doSomething(event) {
  console.log('****** doSomething');
  console.log('event.keyCode: ', event.keyCode);
  console.log('event.which: ', event.which);
  console.log('event.key: ', event.key);
  console.log('event.code: ', event.code);
}
```

```
<!-- Notice: We pass the key `event` object into doSomething -->
<input type='text' onkeydown='doSomething(event)' placeholder="Type here..." />
```

# 如何确定按下了什么键

我对此也感到困惑，但让我们回顾一下这些选项。为 1995 年的浏览器差异做好准备！

首先，请记住，虽然最终目标可能是确定按下了哪个键，但不同的方法需要不同的步骤才能实现。事件可以是“系统和实现相关的数字代码”、Unicode 字符值、Ascii 值或实际键名（“ArrowUp”）。

## `event.key`（**TL;DR：尝试使用这个**）

根据[MDN `KeyboardEvent.key`Documentation](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)，`event.key`如果您正在寻找不被弃用的“未来”方式，这是推荐的方式。文档正在大量修改中，因此 MDN 上的细节很少。

查看[caniuse.com 支持表](http://caniuse.com/#search=event.key)，`event.key`IE11 以下或 Safari 上根本不支持（截至 2017 年 1 月）。这可能已经是一个交易破坏者，所以让我们继续寻找。

## `event.keyCode`

我一直使用`event.keyCode`，[MDN 说它现在已被弃用](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode)，并带有以下警告：

> 如果可能，您应该避免使用它；它已经被弃用了一段时间。相反，您应该使用`KeyboardEvent.code`，如果它已实施。不幸的是，有些浏览器仍然没有它，因此您必须小心确保使用所有目标浏览器都支持的浏览器。**谷歌 Chrome**和**Safari**已经实现`KeyboardEvent.keyIdentifier`了，这是在规范草案中定义的，但不是最终规范。

`keydown`好吧，很公平——浏览器和`keypress`事件之间有足够的差异（[不是同一件事！](https://stackoverflow.com/questions/3396754/onkeypress-vs-onkeyup-and-onkeydown)），这使得它不再值得使用。RIP `keyCode`，这是真的！

## `event.which`

来自[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/which)：

> 按下的特定键的数字代码，具体取决于按下的是字母数字键还是非字母数字键。有关详细信息，请参阅 KeyboardEvent.charCode** 和**KeyboardEvent.keyCode 。**

另一个正在弃用的——“这个特性已经从 Web 标准中删除。虽然一些浏览器可能仍然支持它，但它正在被删除。”

好的，`keyCode`我们已经知道它也被弃用了，那是怎么回事`charCode`？

## `event.charCode`

这将返回`keypress`事件的 Unicode 字符代码......[我们从 MDN 收到另一个警告](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/charCode)：

> 不再使用此属性，它已被弃用。改为使用`KeyboardEvent.key`。

在这里开始追逐我们自己的尾巴，`KeyboardEvent.key`是一种面向未来的方法，但还没有得到充分的支持......它也`0`一直返回`keydown`事件，你必须倾听`keypress`事件才能使其有价值。

## `event.code`

最后一个选项似乎很有希望......[`event.code`来自 MDN 的文档](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code)：

> 表示**键盘上的物理键**（与按键生成的字符相反）。换句话说，这个属性返回一个不会被键盘布局或修饰键状态改变的值。

这很方便，因为我们得到了类似`ShiftRight`vs的东西`ShiftLeft`，这对于游戏开发和非常具体的交互很有用。所有代码选项的文档底部都有一个很棒的图表。

问题：[还不是很好的支持](http://caniuse.com/#search=event.code)。IE、iOS Safari、Android 或 Opera 上没有任何内容。

# 那么......我应该使用什么？

TBH 我认为没有一刀切的解决方案。当前的情况似乎需要某种程度的 polyfill，或者至少支持旧的`event.keyCode`和`event.which`属性作为后备，用于在哪里使用`event.key`和`event.code`不能使用。

对于生产项目，我们只需要考虑浏览器和设备支持要求，然后从那里开始。

## Shift/Ctrl/Command/Windows/等

有一些额外的属性可以检查您是否关心与原始键组合按下的其他键：

*   [事件.altKey](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/altKey)
*   [事件.ctrlKey](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/ctrlKey)
*   [event.metaKey](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/metaKey)
*   [事件.shiftKey](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/shiftKey)

## 方便的工具：`keycode.info`

[http://keycode.info/](http://keycode.info)（由[v.cool Wes Bos](http://wesbos.com/)创建）是一个非常宝贵的工具，可以快速找出您需要围绕哪些 keyCode 编写逻辑

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T09:40:18.810

> ...我已经尝试过这个〜6年前...

在现代...

```
document.querySelector('input').addEventListener(function(e) {
  var key = e.keyCode || e.which;
  ...
}); 
```

**编辑：**在“现代”浏览器、IE9+ 和其他工作人员中工作。

# java - 尝试使用 tomcat 在 servlet 中加载 dll 时出现 NoClassDefFoundError

> ID：15108672
> 
> 赞同：0
> 
> 时间：2013-02-27T09:38:01.797
> 
> 标签：java, tomcat, servlets, dll, noclassdeffounderror

我正在尝试构建一个在我机器上的 tomcat 服务器中运行的简单 java servlet。

我的servlet代码是：

```
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class javaservlet
 */
@WebServlet(description = "java servlet", urlPatterns = { "/javaservlet" })
public class javaservlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public javaservlet() {
        super();

        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        PrintWriter writer = response.getWriter();
        calldll callingdll = new calldll();
        ServletContext context = getServletConfig().getServletContext();  
        String path = context.getContextPath(); 
        writer.println(path);
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

它工作正常（不是`calldll callingdll = new calldll();`我将在下面解释我遇到什么错误的部分）

我还有一个加载名为“calldll.dll”的dll文件的第二个类（使用javac，javah和其他东西完成了所有工作并且它工作）我的dll被放置在`C:\apache-tomcat-7.0.37\wtpwebapps\myServlet\WEB-INF\lib`我已经指出了本地的构建路径和我的类代码是

```
public class calldll {

    private native void print();

public static void main (String[] args){
    new calldll().print();
}

static {
System.loadLibrary("calldll");  
}

} 
```

我从中制作 dll 的 c 文件非常简单

```
#include<jni.h>
#include<stdio.h>
#include<windows.h>
#include "calldll.h"

JNIEXPORT void JNICALL
Java_calldll_print(JNIEnv*env,jobject obj)
{
printf("It Works!");
return;
} 
```

当我运行 javaservlet 时，我调用加载 dll 的调用 dll 类，我得到这个：

```
java.lang.NoClassDefFoundError: Could not initialize class calldll
    javaservlet.doGet(javaservlet.java:33)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

奇怪的是，当我单独运行 java 类时，出现“它可以工作”的消息，因此该类成功加载了 dll。但是，当我在 servlet 中创建类的实例时，它不是来自 servlet 的，这不是我的问题....

我添加到 calldll 类

catch(UnsatisfiedLinkError e) { System.err.println("本地代码库加载失败。\n" + e); }

看看它是否是静态问题，当我运行 servlet 时出现以下错误

```
Native code library failed to load.
java.lang.UnsatisfiedLinkError: no calldll in java.library.path 
```

但是我的 calldll 类如果我单独执行它仍然可以工作......所以在 servlet 中发生了什么我做错了：s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T09:05:49.727

如果您的 webapp 托管在 tomcat 应用服务器中，请将 dll 复制到 bin 文件夹，然后在您的 servlet 中使用：

```
System.load(System.getProperty("catalina.base")+"/bin/yourdll.dll"); 
```

# ruby - 使用 RVM 安装 Ruby 2.0.0

> ID：15108673
> 
> 赞同：32
> 
> 时间：2013-02-27T09:38:01.573
> 
> 标签：ruby

我试过安装`Ruby 2.0.0`使用`RVM`：

```
 rvm install 2.0.0 
```

一旦安装完成。我做到了`rvm list`。它如下所示：

```
rvm rubies

   jruby-1.6.5.1 [ i386 ]
   /home/username/.rvm/scripts/list: line 294: /home/username/.rvm/rubies/rbx-2.0.0/config: No such file or directory
rbx-2.0.0 [  ]
=* ree-1.8.7-2011.12 [ i686 ]
   ruby-1.9.3-p0 [ i686 ]

# => - current
# =* - current && default
#  * - default 
```

为什么要安装`Rubinius 2.0-rc1`？？有人遇到过这个问题吗？？有什么帮助吗？？

谢谢 ：）

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-27T09:54:18.340

您的 rvm 可能不是最新的，并且通过这样做，可安装的 rubies 列表也是如此。Rvm 可能是最好的匹配，那就是 Rubinius 2

当你这样做

```
rvm list known 
```

您获得[可以安装的已知红宝石列表](https://rvm.io/rubies/list/)

此[列表会在您更新 rvm 的同时更新](https://stackoverflow.com/questions/12650164/update-rvm-list-known)。然后你需要在安装 MRI Ruby 2.0.0 之前更新 rvm

```
rvm get stable 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-29T06:53:45.287

首先，确保您拥有最新的 RVM：

```
rvm get stable 
```

安装 RVM 后，`libyaml`为您的系统运行相关安装：

**基于 Debian 的系统：**

```
apt-get install libyaml-dev 
```

**Fedora/CentOS/RHEL 系统：**

```
yum install libyaml-devel 
```

**带有 Homebrew 的 Mac：**

```
brew install libyaml 
```

**最后：**

```
rvm pkg install openssl
rvm install 2.0.0 \ 
    --with-openssl-dir=$HOME/.rvm/usr \
    --verify-downloads 1
rvm use 2.0.0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-11T12:14:22.833

当你这样做

```
rvm list known 
```

您获得可以安装的已知红宝石列表

此列表会在您更新 rvm 的同时更新。然后你需要在安装 MRI Ruby 2.0.0 之前更新 rvm

更新 rvm 到最新版本

```
rvm get stable 
```

然后尝试安装ruby

```
rvm install 2.0.0 
```

如果有任何错误，例如缺少包，它将被列出。为基于 debian 的系统安装这些软件包，使用

分别对 Fedora/CentOS/RHEL 系统、Mac 和 Homebrew 使用 yum install / brew install

```
apt-get install "your missing packges"

eg:
sudo apt-get install libsigsegv2 gawk libgdbm-dev libffi-dev 
```

一旦安装了缺少的软件包。

尝试安装 ruby​​ 2.0.0

```
rvm install 2.0.0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:45:57.123

[https://coderwall.com/p/tptocq](https://coderwall.com/p/tptocq)上有一些很好的说明，包括设置 libyaml 和 openssl。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-03T00:07:47.323

你可以做到`rvm use 2.0.0`。

如果它告诉您尚未安装它，您只需执行以下操作：

`rvm install ruby-2.0.0-p598`

It will install everything that you need for you and then you can select which version of Ruby to use with `rvm use`

# c# - 覆盖 dll 配置

> ID：15108676
> 
> 赞同：1
> 
> 时间：2013-02-27T09:38:04.350
> 
> 标签：c#, app-config

我有一个类库，带有域对象（基于 linq 的对象，在 .net 4.0 中）。我想让这个库为它自己的 app.config 使用连接字符串。

有一些问题：遵循设置使用的模型：**ApplicationSettingsBase**，我创建了一个应该从 app.config 读取设置的包装器。

但是，与模型不同，我提供默认值。问题是应该从 app.config 加载数据的属性

```
 internal sealed class ApplicationSettings : ApplicationSettingsBase
    {
    // other properties

        [SpecialSetting( SpecialSetting.ConnectionString )]
       [global::System.Configuration.DefaultSettingValueAttribute("Server=.;Database=RFPLUSSTD;User Id=SYSADM;Password=SYSADM;")]
        public string MainConnectionString
    {
    get { return (string)this["MainConnectionString"]; }
    } 
```

// 其他属性 }

```
in app.config:
<connectionStrings>
<add name="MainConnectionString"
connectionString="..."
providerName="System.Data.SqlClient" />
</connectionStrings> 
```

现在，这不起作用...我尝试将 conn 字符串的名称设置为完全限定的名称，例如 namespace.class.property，但可以使用。

*   我不想使用 dbml 使用的默认设置类，因为它会编译设置：D 并且如果不重新编译就无法更改它们...
*   我已经在 1.1 的项目中使用了不同模型的应用程序设置类，但我认为 3.5 已经发展得足够好并且有自己的对象，那行得通..

那么，为什么不工作，我怎样才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:02:04.603

您需要确保您在文件系统中具有进行更改的权限。我希望你已经考虑过了。如果您确定更改了配置文件并且它只带来了默认设置，则可能是从输出 bin 文件夹中加载配置文件，而不是在项目根目录中。如果您确定修改失败，请发布错误消息。

**更新：**

嗨，杰克，我认为您的代码的主要问题是它每次都在创建 ApplicationSettings 类的新实例，如果设置在用户范围内，您将获得空值，然后每次都会导致默认值。

您可以使用内置的 Settings 类轻松完成此操作。默认情况下，只能在程序集中访问设置，**内部密封的部分类设置**（在**Settings.Designer.cs**中）。如果您将其更改为**公开密封**，您将能够从任何程序集访问设置，接下来您必须将设置保留为应用程序范围而不是用户范围。一旦你完成了这两个，你可以毫无问题地检索和保存。

# javascript - Ajax 请求特殊字符 Internet Explorer

> ID：15108680
> 
> 赞同：0
> 
> 时间：2013-02-27T09:38:21.087
> 
> 标签：javascript, ajax, internet-explorer, special-characters

我在 IE 中遇到了法语（或特殊）字符的问题。我正在尝试将 eform 加载到 iframe 中。我正在使用的工具（内部工具）添加了以下元标记：“meta http-equiv="x-ua-compatible" content="IE=edge"

该代码似乎在 chrome 和 firefox 中运行良好：

```
$.ajax({
    type: 'POST',
    url : 'therighturl', // correct url in real code
    dataType: 'text',
    contentType: "application/x-www-form-urlencoded; charset=ISO-8859-1",
    beforeSend : function(xhr) {
      xhr.overrideMimeType('text/html; charset=ISO-8859-1');
        },success : function(data){
        $('#eform').html('<br />' + data);
      }
    });
}); 
```

提前致谢！

# c - 对具有可变数量参数的函数中的复数求和

> ID：15108684
> 
> 赞同：0
> 
> 时间：2013-02-27T09:38:33.237
> 
> 标签：c, function, sum, complex-numbers

我想对 X 复数求和，但这段代码返回给我：

> -9.3e+61 + -1.9e+062i

```
typedef struct complex{
    double real;
    double imag;
} complex;

complex sum(int length, ...)
{
    va_list param;
    va_start(param, length);

    complex out = {0, 0};
    for(int i = 0;i<length;i++)
    {
        out.real += va_arg(param, complex).real;
        out.imag += va_arg(param, complex).imag;
    }
    va_end(param);
    return out;
} 
```

当我引用 real / imag 部分时，它会返回正确的 real / imag 结果。

主要的：

```
int main()
{
    complex result;
    complex a = {3.1,-2.3};
    complex b = {0.5,-3};
    complex c = {0,1.2};

    result = sum(3,a,b,c);
    printf("Sum is %.2g + %.2gi. \n", result.real, result.imag);

    return 0;
} 
```

我应该改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:58:26.340

问题是每次调用时`va_arg`，它都会取出一个完整的`complex`结构。由于您每个循环调用它两次，因此您取出了 2 个不同的`complex`结构，这是不正确的。

您需要缓存结果并稍后访问成员：

```
for (int i = 0; i < length; i++)
{
    complex currArg = va_arg(param, complex);
    out.real += currArg.real;
    out.imag += currArg.imag;
} 
```

# php - Ajax 程序没有像我预期的那样运行

> ID：15108688
> 
> 赞同：0
> 
> 时间：2013-02-27T09:38:51.427
> 
> 标签：php, javascript, html, ajax

Ajax 程序没有像我预期的那样运行。查看代码

```
$(document).ready(function(){
$("input").keyup(function() {
    for(var i=400;i<421;i++){
        (function(counter){
            counter=String(counter);
            $.ajax({
                type: "GET",
                url: "results/result_html.php?usn="+txt+counter+"&resultType="+resultType,
                dataType:"JSON",
                success:function(result){
                    $("#info").hide();
                    $("#result").html(result);              
                    $("#usn").attr("placeholder", "Class USN");
                }
            });
        })(i);
    }
    alert("hai");
});}); 
```

在此代码中，我想在完成该 for 循环中的所有 Ajax 请求后显示警报。但是当我运行此代码时，警报首先显示。我是 Ajax 的新手，请任何人帮助我按预期运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:41:36.120

Ajax 是异步的，这意味着它将继续并行运行代码。在 Ajax 请求完成后调用成功函数。你可以做的是：

```
$(document).ready(function(){
$("input").keyup(function() {
    var loopsToDo = 20, done=0;
    for(var i=400;i<421;i++){
            var counter=String(i);
            $.ajax({
                type: "GET",
                url: "results/result_html.php?usn="+txt+counter+"&resultType="+resultType,
                dataType:"JSON",
                success:function(result){
                    $("#info").hide();
                    $("#result").html(result);              
                    $("#usn").attr("placeholder", "Class USN");
                },
                complete : function(){
                    done++;
                    if( done == loopsToDo)
                    {
                        alert("DONE")
                    }
                }
            });
    }

});}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:42:21.497

你的代码很奇怪。为什么会走

```
for(var i=400;i<421;i++) 
```

此外，警报将在任何 Ajax 调用之前首先显示，因为 ajax 是异步的，这意味着它与其余代码分开运行。由于您正在运行 20 个 Ajax 请求，因此警报不会等待所有 20 个完成。您需要做的是在您的成功部分保留 Ajax 调用的计数，当它等于 20 时显示警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:41:31.960

因为AJAX调用是异步的，所以会设置AJAX调用，然后继续执行脚本。'success' 参数指定接收到响应后要使用的回调 - 这可能随时发生（因此是异步的）。

```
$(document).ready(function(){
    $("input").keyup(function() {
        for(var i=400;i<421;i++){
            (function(counter){
                counter=String(counter);
                $.ajax({
                    type: "GET",
                    url: "results/result_html.php?usn="+txt+counter+"&resultType="+resultType,
                    dataType:"JSON",
                    success:function(result){
                        $("#info").hide();
                        $("#result").html(result);              
                        $("#usn").attr("placeholder", "Class USN");
                        alert("hai");
                    }
                });
            })(i);
        }
    });
}); 
```

那应该可以解决您的问题。

# xml - 我们可以通过任何方式提高保存/加载 .xml 的性能，尤其是当 .xml 文件很大时

> ID：15108705
> 
> 赞同：0
> 
> 时间：2013-02-27T09:39:30.960
> 
> 标签：xml, performance, com, xml-parsing

我们有一个应用程序，所有数据都存储在一个 .xml 文件中。当用户继续工作时，.xml 文件会不断增长，通常会达到 10M KB，有时会增长到 80M KB。有什么办法可以提高 xml 文件的保存/加载性能？

现在，我们正在使用 Micorsoft MSXML.Document 加载 .xml，并使用 XPath 对其进行操作。我在想是否可以将 .xml 转换为二进制文件，那么它可以在加载时节省时间吗？或任何其他建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:47:09.033

从基于 DOM 的 API（例如`Msxml2.DOMDocument`使用 MSXML 时）切换到基于流的 API（例如`Msxml2.SAXXMLReader`）将避免解析整个 XML 文档并将其加载到内存中。它还将避免 DOM 对象图的高度链接特性（所有这些下一个/上一个/第一个子/…链接加起来会产生很大的开销）。

然而，这意味着没有 XPath 和非常不同的编程模型。

# android - 如何制作“吃掉”RAM内存的Android应用程序

> ID：15108709
> 
> 赞同：7
> 
> 时间：2013-02-27T09:39:48.890
> 
> 标签：android, memory, memory-management, ram

我知道这听起来很疯狂，但不是:)

我有一个应用程序在 RAM 内存低的手机上运行时被杀死。为了测试这个应用程序，我需要一些“吃掉”内存的东西，到目前为止，我通过启动很多游戏、打开应用程序、按下主页按钮来完成这项工作，只是为了吃掉内存......

所以我觉得浪费 10-20 分钟只是为了用“垃圾”填充 RAM 内存是愚蠢的，也许有办法用其他一些虚拟应用程序来做到这一点，我将用它来“吃掉”手机上的 RAM 内存，所以我的其他应用程序将被android系统杀死......

到目前为止有人有这个问题吗？是否可以使用一个应用程序来做到这一点？是否有可能仅从一个应用程序中消耗大量内存？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-25T12:33:46.190

面临同样的问题（需要在设备上填充 RAM 内存，直到我的应用程序死掉）偶然在谷歌市场上找到了一个程序：） [https://play.google.com/store/apps/details?id=me.empirical .android.application.fillmemory](https://play.google.com/store/apps/details?id=me.empirical.android.application.fillmemory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-05T09:51:07.923

我写了一个小的免费应用程序，它完全符合您的要求。而且它是免费的，没有广告或权限:)

[https://play.google.com/store/apps/details?id=com.fabsimilian.memorypump](https://play.google.com/store/apps/details?id=com.fabsimilian.memorypump)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T11:55:46.593

在命令提示符下，键入以下内容以获取所有进程的优先级（很好）

例如： cmd >adb shell ps -p

因此，采用一个进程并将其优先级降低到某个值（范围 -20 到 +20），较小的值具有更高的优先级。

例如： adb shell renice -20 782 [adb shell renice ] 通过这种方式，我们可以让该进程吃掉更多的内存，通过这种方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T12:09:25.963

如果需要，只需将巨大的位图循环加载到列表中或在视图中显示它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T10:34:58.290

这只是一个疯狂的猜测，但是创建一个具有一个活动类、一个抽象服务类和几个扩展抽象服务类的具体服务的应用程序。

抽象服务类会消耗内存，您可以做一些简单的事情，例如从资源中加载相同的位图并将其放入 LruCache，休眠几毫秒并重复。

然后，您将创建几个扩展抽象的服务类，但不需要进一步的代码，只需

```
public class MemoryEaterService_01 extends AbstractMemoryEaterService{} 
```

现在，从活动启动开始，您将执行触发服务的明显操作。

现在聪明的部分开始了，在清单上，您将在不同的进程中声明这些服务中的每一个（基本上在具有自己的堆内存的不同 VM 中启动每个服务），如下所示：

```
<service android:enabled="true"
     android:exported="true"
     android:name="memoryEater_01"
     android:process="com.yourpackage.memory_eater_01" >
</service> 
```

如果你尝试一下，请告诉我它是否有效，我很好奇。

# kineticjs - 动力学js中的旋转os形状

> ID：15108713
> 
> 赞同：0
> 
> 时间：2013-02-27T09:39:51.223
> 
> 标签：kineticjs

我想根据我移动鼠标的方向顺时针和逆时针旋转我的形状。这是我知道不完全完美的示例..如果可能的话，编辑我的偏移和旋转部分。这里是`[fiddle](http://jsfiddle.net/ratanparmar/ndCBv/)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:11:53.363

您可以通过执行以下操作来进行条件轮换：（伪代码和实际代码的混合）

```
 var currentRotation = shape.getRotation();
  var direction = ..stuff.. ; // your logic for mouse movement, result should be 1 or -1
  var rotationAmount = 0.5; 

  shape.setRotation(currentRotation + direction * rotationAmount); //get current rotation and add/subtract some arbitrary amount 
```

如果你需要一个偏移量，你可以这样做：

```
 shape.setOffset(x,y); 
```

# javascript - 如何将 DIV 的大小调整为小于其初始宽度和高度？

> ID：15108716
> 
> 赞同：4
> 
> 时间：2013-02-27T09:39:54.960
> 
> 标签：javascript, css, html, resize

我想让用户能够将 DIV 的大小调整为小于其声明的宽度和高度。如何 ？

代码在这里：http: [//jsfiddle.net/hW4nn/](http://jsfiddle.net/hW4nn/)

HTML

```
<div class="divClass"></div> 
```

CSS

```
.divClass {
    resize: both;
    overflow: auto;
    width: 200px;
    height: 200px;
    border: 1px dotted #000;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:44:42.893

看看[jQuery UI 的 Resizable](http://jqueryui.com/resizable/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:45:10.190

据我所知，浏览器不会让您调整任何小于初始大小的大小。我的解决方法是将初始 CSS 设置为最小宽度和高度（无论您认为应该是什么，例如 50 像素左右）；然后使用 javascript 更改 div onload 的 CSS，使其大小合适。

另请参阅[HTML5 resize only on 使项目大于原始大小，而不是更小](https://stackoverflow.com/questions/8771650/html5-resize-only-on-makes-items-larger-than-original-size-not-smaller)。

# c# - 是否可以通过 C# 执行 MDA 转换

> ID：15108717
> 
> 赞同：1
> 
> 时间：2013-02-27T09:39:55.240
> 
> 标签：c#, enterprise-architect, mda

我正在使用 Enterprise Architect 10.0.1006 从“平台独立模型”（PIM）创建“平台特定模型”（PSM）。PIM 是一种通用代码，它用通用描述声明数据类型。您可以将此通用模型转换为特定模型（Java、C++、Php 等）。

但要这样做，我必须打开项目并在我要转换的每个包上执行“转换当前包”选项卡。

它运行良好，但我想知道是否可以在 C# 中编写自动脚本来执行此任务。有一个 COM 可以更改项目浏览器中的几乎所有内容。我可以通过这个 COM 访问每个图表、元素或包。但是我没有找到任何方法来转换模型。

我的问题是：**我可以使用 C# 使用自动化脚本执行此转换吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:30:32.600

是的。查看对象模型 API，Project::TransformPackage()。

# android - Android：从路线开始地图

> ID：15108718
> 
> 赞同：0
> 
> 时间：2013-02-27T09:39:55.580
> 
> 标签：android, android-intent, navigation, maps, routes

我知道可以用 2 点的路线启动谷歌地图，但我真的需要从许多航点开始。如何才能做到这一点？

另一个大愿望是：（我真的怀疑这是可能的，但谁知道呢？）你能以某种方式将这些航点信息放入一个意图中，这样它就不一定适用于谷歌地图，而是适用于任何导航应用程序？以便用户可以选择自己的导航应用程序...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:10:55.133

好的，我找到了一种使用谷歌地图的方法：

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
    Uri.parse("https://maps.google.ch/maps?saddr=[address1]&daddr=[address2] to:[address3] to: [address4]"));
startActivity(intent); 
```

（将 [address#] 替换为航路点）

问题是谷歌地图应用程序没有显示所有航点，而只显示第一个和最后一个。我真的很想让所有航点都可见，并让导航实际上将你导航到这些点并告诉你何时到达一个，但谷歌似乎并不认为这是必要的......

# r - 根据其他列表中的缺失向表中添加额外的行

> ID：15108721
> 
> 赞同：0
> 
> 时间：2013-02-27T09:40:12.067
> 
> 标签：r, merge

我想知道是否可以根据另一个表中缺少某个值来向表中添加额外的行。这就是我的情况

包含 2 列的文本文件

```
V1 V2
1  100
1  101
1  102
1  103
2  230
2  231
2  232
... ... 
```

其他 5 列的文本文件

```
V1 V2 V3 V4 V5
1  100 a b c
1  101 a b c
1  103 a b c
2  231 a b c
2  232 a b c 
```

当第一个文本文件的 V1 和 V2 的值组合不存在于第二个文本文件中时（在示例中 1 102 和 2 230 不存在），我想在第二个文件中添加值为 V1 的额外行和来自第一个文件的 V2 & V3、V4 和 V5 等于 0

这样第二个文件就变成了这样：

```
V1 V2 V3 V4 V5
1  100 a b c
1  101 a b c
1  102 0 0 0
1  103 a b c
2  230 0 0 0
2  231 a b c
2  232 a b c 
```

我在 R 中找不到执行此操作的正确命令。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:43:52.837

假设这两个对象分别命名为“DF1”和“DF2”，可以`merge`如下使用：

```
DFM <- merge(DF1, DF2, all = TRUE)
DFM
#   V1  V2   V3   V4   V5
# 1  1 100    a    b    c
# 2  1 101    a    b    c
# 3  1 102 <NA> <NA> <NA>
# 4  1 103    a    b    c
# 5  2 230 <NA> <NA> <NA>
# 6  2 231    a    b    c
# 7  2 232    a    b    c 
```

如果您真的更喜欢`0`而不是`NA`，您可以执行以下操作：

```
# Convert the factors to characters
DFM[sapply(DFM, is.factor)] <- lapply(DFM[sapply(DFM, is.factor)], as.character)
# Identify the NA values and replace them with 0
DFM[is.na(DFM)] <- 0
DFM
#   V1  V2 V3 V4 V5
# 1  1 100  a  b  c
# 2  1 101  a  b  c
# 3  1 102  0  0  0
# 4  1 103  a  b  c
# 5  2 230  0  0  0
# 6  2 231  a  b  c
# 7  2 232  a  b  c 
```

# c# - 根据 XElement 的名称对 XDocument 进行排序

> ID：15108726
> 
> 赞同：1
> 
> 时间：2013-02-27T09:40:22.183
> 
> 标签：c#, xml, sorting, linq-to-xml, xelement

我有一个这样的 XML 文件：

```
 <file name="picture1.jpg"/>
 <file name="file1.txt"/>
 <folder name="subfolder">
      <file name="picture2.jpg"/>
      <file name="file2.txt"/>
      <folder name="anotherfolder">
           <file name="file3.txt"/>
      </folder>
 </folder>
 <folder name="anotherfolder">
 </folder> 
```

它需要像这样排序：

```
<folder name="anotherfolder">
 </folder>
 <file name="file1.txt"/>
 <file name="picture1.jpg"/>
 <folder name="subfolder">
      <folder name="anotherfolder">
           <file name="file3.txt"/>
      </folder>
      <file name="file2.txt"/>
      <file name="picture2.jpg"/>
 </folder> 
```

我必须排序的代码是：

```
public static XDocument Sort(XDocument file)
    {
        return new XDocument(Sort(file.Root));
    }
    private static XElement Sort(XElement element)
    {
        XElement newElement = new XElement(element.Name,
            from child in element.Elements()
            orderby child.Name.ToString()
            select Sort(child));
        if (element.HasAttributes)
        {
            foreach (XAttribute attrib in element.Attributes())
            {
                newElement.SetAttributeValue(attrib.Name, attrib.Value);
            }
        }
        return newElement;
    } 
```

它完成了这项工作......但只是部分。它根据与 FOLDER 分开的名称属性对 FILE 进行排序。我希望将它们一起考虑用于排序的 xml。应该做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:00:14.057

实际上，这段代码并*没有*按 name*属性*对子元素进行排序；*它按元素名称*排序：

```
orderby child.Name.ToString() 
```

您需要做的是获取“名称”属性的值（区分大小写！）。使用 可以做到这一点`child.Attribute("name")`，但是您需要`.Value`在注意`null`属性的同时获得它；内联编写代码会有些尴尬。

就我个人而言，我发现这个版本`child.Attributes`（返回一个集合）更方便：

```
orderby child.Attributes("name").Select(a => a.Value).FirstOrDefault() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:44:55.563

```
.OrderBy(e=>e.Attribute("name").Value) 
```

`IEnumerable`如果您想排序或仅在节点上使用此方法对它们进行排序，请在任何级别递归执行此操作

# c# - 按字符拆分字符串，但跳过某些字符组合

> ID：15108728
> 
> 赞同：4
> 
> 时间：2013-02-27T09:40:32.503
> 
> 标签：c#, javascript, string, split

假设我有一个类似于以下形式的字符串：

`"First/Second//Third/Fourth"``Second`（注意和之间的双斜线`Third`）

我希望能够将此字符串拆分为以下子字符串`"First", "Second//Third", "Fourth"`。基本上，我想要的是将字符串拆分为一个字符（在本例中`/`），而不是该字符的两倍（在本例中`//`）。我虽然以多种方式对此进行了思考，但无法使其正常工作。

我可以使用 C# 和/或 JavaScript 中的解决方案。

谢谢！

编辑：我想要一个简单的解决方案。我已经想过逐个字符地解析字符串，但这在我的实际使用中太复杂了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T09:49:54.977

尝试使用此 C# 解决方案，它使用正向后视和正向前瞻：

```
 string s = @"First/Second//Third/Fourth";
        var values = Regex.Split(s, @"(?<=[^/])/(?=[^/])", RegexOptions.None); 
```

它说：分隔符`/`前面是任何字符，除了`/`，后面是任何字符，除了`/`。

这是另一个使用负后瞻和前瞻的更短版本：

```
 var values = Regex.Split(s, @"(?<!/)/(?!/)", RegexOptions.None); 
```

这说：定界符是`/`没有前面`/`和后面没有的`/`

**[您可以在此处](http://www.regular-expressions.info/lookaround.html)**找到有关“环视”的更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T09:48:53.523

在 .NET Regex 中，您可以使用否定断言来实现。`(?<!/)/(?!/)`将工作。使用`Regex.Split`方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T09:47:17.487

好的，您可以做的一件事是根据`/`. 您返回的数组将包含所有`//`已使用位置的空分配。遍历数组并连接`i-1`和`i+1`分配哪里`i`是指向空分配的指针。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T09:46:48.527

这个怎么样：

```
var array = "First/Second//Third/Fourth".replace("//", "%%").split("/");

array.forEach(function(element, index) {
    array[index] = element.replace("%%", "//");
}); 
```

# ios - ALAssetGroup 海报图片大小

> ID：15108729
> 
> 赞同：2
> 
> 时间：2013-02-27T09:40:33.223
> 
> 标签：ios, objective-c, alassetslibrary, alasset

有人能解释一下 的大小是`posterImage`多少`AlassetGroup`吗？

我不明白专辑的图像和海报图像的依赖关系是什么。例如，我在 iPad 上测试的海报图像尺寸通常为 80x80，但有些图像有 90x90 甚至 110x110？它是如何计算的？

我需要知道在不同的 iOS 设备和 iOS 版本上我可以获得多大的最小海报图像？

# java - Java 应用程序中的 TTS 集成

> ID：15108730
> 
> 赞同：0
> 
> 时间：2013-02-27T09:40:33.957
> 
> 标签：java, text-to-speech

我正在开发一个 java 应用程序，它实际上是我的 iOS 应用程序（iPhone 和 iPad）的后台
我需要在我的应用程序中集成 TTS 以便阅读英文或法文的邮件内容
我搜索了网络我发现了很多 tts诸如 Festival 或 freeTTS 之类的引擎，但它不支持法语的问题
是否有任何其他 TTS 引擎（免费或商业）可以集成到我的应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:49:35.430

```
 private TextToSpeech mTts;
protected void onActivityResult
( int requestCode, int resultCode, Intent data) 
{    
    if (requestCode == MY_DATA_CHECK_CODE) 
    {        
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) 
        {            
            // success, create the TTS instance            
            mTts = new TextToSpeech(this, this);        
        } 
        else 
        {            
            // missing data, install it            
            Intent installIntent = new Intent();            
            installIntent.setAction( TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent);        
        }    
    }
}

mTts.isLanguageAvailable(Locale.FRANCE)) 
```

单击此链接 FREETTS[在此处输入链接描述](http://freetts.sourceforge.net/docs/index.php)

STACKOVERFLOW 已经描述了类似于这个问题[在此处输入链接描述](https://stackoverflow.com/questions/143390/java-text-to-speech-engines-overview)

# php - Symfony2，动态数据库连接/早期覆盖 Doctrine Service

> ID：15108732
> 
> 赞同：7
> 
> 时间：2013-02-27T09:40:39.547
> 
> 标签：php, symfony, doctrine-orm

我有一个核心配置数据库，每一行都是一个带有一些基本配置等的“应用程序”。
一旦你选择了你的应用程序，我想使用该行的属性（ID）连接到数据库，主机也可能会改变基于行。

我想要的是注册一个使用这些详细信息设置 Doctrine 服务的服务，如果你在网站上需要它的地方（我知道基于 URI）。

我正在使用实体管理器和各种 Doctrine Listeners/Event subs

我玩过 ConnectionFactory，但这似乎会导致订阅者出现问题。

连接可以透明地修改 Doctrine 服务的东西的最佳方法是什么，以便控制器可以在不知道它们连接到哪个数据库主机和数据库名称的情况下采取行动？

这种类型的每个数据库都将具有相同的结构，因此所有实体映射都是正确的。

我正在寻找一个非常干净的实现，希望使用服务容器来避免任何“黑客攻击”。

有没有人知道这样做的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-05T10:09:04.493

结合起来，这两个帖子帮助我解决了我自己非常相似的问题。这是我的解决方案，也许对其他人有用：

```
<?php

namespace Calitarus\CollaborationBundle\EventListener;

use Symfony\Component\HttpFoundation\Request;
use Doctrine\DBAL\Connection;
use Exception;
use Monolog\Logger;

class DatabaseSwitcherEventListener {

    private $request;
    private $connection;
    private $logger;

    public function __construct(Request $request, Connection $connection, Logger $logger) {
        $this->request = $request;
        $this->connection = $connection;
        $this->logger = $logger;
    }

    public function onKernelRequest() {
        if ($this->request->attributes->has('_site')) {
            $site = $this->request->attributes->get('_site');

            $connection = $this->connection;
            $params     = $this->connection->getParams();

            $db_name = 'br_'.$this->request->attributes->get('_site');
            // TODO: validate that this site exists
            if ($db_name != $params['dbname']) {
                $this->logger->debug('switching connection from '.$params['dbname'].' to '.$db_name);
                $params['dbname'] = $db_name;
                if ($connection->isConnected()) {
                    $connection->close();
                }
                $connection->__construct(
                    $params, $connection->getDriver(), $connection->getConfiguration(),
                    $connection->getEventManager()
                );

                try {
                    $connection->connect();
                } catch (Exception $e) {
                    // log and handle exception
                }
            }
        }
    }
} 
```

为了让它工作，我设置 services.yml 如下：

```
services:
    cc.database_switcher:
        class:      Calitarus\CollaborationBundle\EventListener\DatabaseSwitcherEventListener
        arguments:  [@request, @doctrine.dbal.default_connection, @logger]
        scope:      request
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

我有这个路由配置来获取 _site 参数，在我的情况下，它是 URL 的一部分，但您可能可以根据您的设置以其他方式获取它：

```
resource: "@CCollabBundle/Controller"
type:     annotation
prefix:   /{_site}
defaults:
 _site: default 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-27T11:23:19.703

这是新的和改进的非反射版本

```
#services.yml
acme_app.dynamic_connection:
    class: %acme.dynamic_doctrine_connection.class%
    calls:
        - [setDoctrineConnection, [@doctrine.dbal.default_connection]]

<?php

namespace Acme\Bundle\AppBundle;

use Doctrine\DBAL\Connection;
use Symfony\Component\HttpKernel\Exception\ServiceUnavailableHttpException;
use Exception;

class DynamicDoctrineConnection
{
    /**
     * @var Connection
     */
    private $connection;

    /**
     * Sets the DB Name prefix to use when selecting the database to connect to
     *
     * @param  Connection       $connection
     * @return SiteDbConnection $this
     */
    public function setDoctrineConnection(Connection $connection)
    {
        $this->connection = $connection;

        return $this;
    }

    public function setUpAppConnection()
    {
        if ($this->request->attributes->has('appId')) {
            $connection = $this->connection;
            $params     = $this->connection->getParams();

            // we also check if the current connection needs to be closed based on various things
            // have left that part in for information here
            // $appId changed from that in the connection?
            // if ($connection->isConnected()) {
            //     $connection->close();
            // }

            // Set default DB connection using appId
            //$params['host']   = $someHost;
            $params['dbname'] = 'Acme_App'.$this->request->attributes->get('appId');

            // Set up the parameters for the parent
            $connection->__construct(
                $params, $connection->getDriver(), $connection->getConfiguration(),
                $connection->getEventManager()
            );

            try {
                $connection->connect();
            } catch (Exception $e) {
                // log and handle exception
            }
        }

        return $this;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-02T00:27:33.817

在 symfony 4 中，你可以用一个包装类来完成它：

```
# doctrine.yaml
doctrine:
    dbal:
      connections:
        default:
          wrapper_class: App\Service\Database\DynamicConnection 
```

该类只是扩展了原始连接：

```
class DynamicConnection extends \Doctrine\DBAL\Connection
{

    public function changeDatabase(string $dbName)
    {
        $params = $this->getParams();

        if ($this->isConnected())
            $this->close();

        if (isset($params['url'])) {
            $params['url'] = preg_replace(
                sprintf("/(?<=\/)%s/", preg_quote($this->getDatabase())),
                $dbName,
                $params['url']
            );
        }

        if (isset($params['dbname']))
            $params['dbname'] = $dbName;

        parent::__construct(
            $params,
            $this->_driver,
            $this->_config,
            $this->_eventManager
        );

    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-09T12:01:35.957

Symfony 4

在服务定义中使用装饰器模式的最简洁方式：

首先创建一个像 App\Factory\Authentication\DatabaseConnectionFactory 这样的自定义类，然后这个类将实例化为一个 dictionary.dbal.connection_factory 的实例。

```
#services.xml
App\Factory\Authentication\DatabaseConnectionFactory:
        decorates: doctrine.dbal.connection_factory
        arguments:
            $wrappedConnectionFactory: '@App\Factory\Authentication\DatabaseConnectionFactory.inner' 
```

在我们的自定义连接工厂类中模拟 createConnection() 函数并通过调用 WrappedConnectionFactory 上的函数来执行原始的 createConnection() 逻辑（= 学说.dbal.connection_factory）。

```
/** App\Factory\Authentication\DatabaseConnectionFactory
 * @param array              $params
 * @param Configuration|null $config
 * @param EventManager|null  $eventManager
 * @param array              $mappingTypes
 *
 * @throws \DomainException
 *
 * @return mixed
 */
public function createConnection(array $params, Configuration $config = null, EventManager $eventManager = null, array $mappingTypes = [])
{
    $params['url'] = $this->databaseConnectionUrlService->getDatabaseConnectionUrlForApiUser($this->apiUser, $params['url'] );

    return $this->wrappedConnectionFactory->createConnection($params, $config, $eventManager, $mappingTypes);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-28T04:05:47.553

我查看了您的服务并尝试实现它，但看起来您缺少一些需要传递给构造函数的参数。这是一个应该可以工作的更新版本：

```
#services.yml
parameters:
    acme_page.dynamic_doctrine_connection.class: Acme\Bundle\PageBundle\DynamicDoctrineConnection

services:
    acme_page.dynamic_doctrine_connection:
        class:      %acme_page.dynamic_doctrine_connection.class%
        arguments:  [@request, @doctrine.dbal.client_connection, @doctrine]
        scope:      request
        calls:
            - [setContainer, [@service_container]]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }

//DynamicDoctrineConnection.php
<?php

namespace Acme\Bundle\PageBundle;

use Symfony\Component\HttpFoundation\Request;
use Doctrine\DBAL\Connection;
use Doctrine\Bundle\DoctrineBundle\Registry;

/**
 * Creates a Doctrine connection from attributes in the Request
 */
class DynamicDoctrineConnection
{
    private $request;
    private $defaultConnection;
    private $doctrine;

    public function __construct(Request $request, Connection $defaultConnection, Registry $doctrine)
    {
        $this->request           = $request;
        $this->defaultConnection = $defaultConnection;
        $this->doctrine          = $doctrine;
    }

    public function onKernelRequest()
    {
        if ($this->request->attributes->has('appId')) {

            $dbName             = 'Acme_App_'.$this->request->attributes->get('appId');

            $this->defaultConnection->close();

            $reflectionConn     = new \ReflectionObject($this->defaultConnection);
            $reflectionParams   = $reflectionConn->getProperty('_params');
            $reflectionParams->setAccessible(true);

            $params             = $reflectionParams->getValue($this->defaultConnection);
            $params['dbname']   = $dbName;

            $reflectionParams->setValue($this->defaultConnection, $params);
            $reflectionParams->setAccessible(false);

            $this->doctrine->resetEntityManager('default');
    }
} 
```

# php - 在数组中搜索值

> ID：15108733
> 
> 赞同：0
> 
> 时间：2013-02-27T09:40:42.163
> 
> 标签：php, arrays

我正在修改一个旧问题，不确定这是否正确。

这是我的代码

```
Array ( [0] => Gymnasium [1] => Mini market [2] => Jogging track ) 
```

我需要做的是在上述数组中搜索特定值，然后相应地选中复选框。

我试过这个

```
<input type="checkbox" id="facilities1" value="Swimming pool" name="et_er_facilities[]" <?php if (in_array('Swimming pool', $et_er_facilities)) {?>checked="checked"<?php }?>>
<input type="checkbox" id="facilities2" value="Gymnasium" name="et_er_facilities[]" <?php if (in_array('Gymnasium', $et_er_facilities)) {?>checked="checked"<?php }?>> 
```

因此，如果值存在于上述数组中并且该数组将具有更多值而不是我作为示例列出的 3 个值，则想法是标记复选框。

我遇到的问题是，如果它与第一个值匹配，它只会标记复选框。IE;

> 如果数组中有 Gymnasium 值并且它在第一个索引上，它将标记它。但是，如果第二个索引值也匹配，但它不会在第一个索引值之后标记它们中的任何一个。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:14:03.937

```
RewriteEngine on
RewriteBase /

# Makes sure existing files and directories are not rewritten
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Rewrites /video/2394943asdfsd0323 to /video/?key=2394943asdfsd0323
RewriteRule ^video/(.+)$ video/?key=$1 [L] 
```

# windows-8 - 如何确定用户是否取消了 CredentialsPicker？

> ID：15108734
> 
> 赞同：1
> 
> 时间：2013-02-27T09:40:42.697
> 
> 标签：windows-8

如何确定用户是否取消了`CredentialsPicker`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:08:24.427

[您可以在Credential Picker 示例](http://code.msdn.microsoft.com/windowsapps/Credential-picker-sample-30fcba2e)中尝试此操作。例如，使用场景 1，您将看到取消选择器将返回一个[CredentialPickerResults](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.ui.credentialpickerresults.aspx)对象（在 promise 结果中或来自 C# 中的 API），其中 ErrorCode 属性（JS 中的 errorCode）将包含 x800704c7，即Win32 错误代码 ERROR_CANCELLED。

如果由于某种原因无法显示凭证选择器，则会从凭证选择器本身产生错误（并由错误处理程序拾取到 promise.then）。您描述的情况是凭证选择器成功，但用户取消了。

# c# - 将 int 转换为布尔值的更好方法

> ID：15108738
> 
> 赞同：59
> 
> 时间：2013-02-27T09:40:59.540
> 
> 标签：c#, boolean, int

输入`int`值只有1或0。我可以通过写一个`if else`语句来解决这个问题。

没有办法将其`int`转换为 a`boolean`吗？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2013-02-27T09:42:55.310

```
int i = 0;
bool b = Convert.ToBoolean(i); 
```

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2013-02-27T09:43:51.097

我假设`0`手段`false`（在许多编程语言中都是如此）。这意味着`true`是`not 0`（某些语言使用`-1`另一些语言使用`1`; 兼容两者都没有坏处）。所以假设“更好”意味着更少的打字，你可以写：

```
bool boolValue = intValue != 0; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-27T09:51:27.450

开个玩笑，如果您只希望输入整数是零或一，那么您真的应该检查是否是这种情况。

```
int yourInteger = whatever;
bool yourBool;
switch (yourInteger)
{
    case 0: yourBool = false; break;
    case 1: yourBool = true;  break;
    default:
        throw new InvalidOperationException("Integer value is not valid");
} 
```

开箱即用`Convert`不会检查这个；也不会`yourInteger (==|!=) (0|1)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-02T15:38:53.110

我认为这是最简单的方法：

```
int i=0;
bool b=i==1; 
```

# c# - textarea 的 maxlength 属性而不使用 javascript

> ID：15108746
> 
> 赞同：2
> 
> 时间：2013-02-27T09:41:06.517
> 
> 标签：c#, html, asp.net, css

我想将 MaxLength 行为与多行文本框一起使用，它在渲染时成为文本区域。我需要在不使用 jquery 或 javascript 的情况下使用 Maxlength 行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:43:42.557

只需在`maxlength`上设置属性`textarea`，如下所示：

```
<textarea maxlength="5"></textarea> 
```

小提琴：http: [//jsfiddle.net/spaFS/](http://jsfiddle.net/spaFS/)

这仅适用于 HTML5 文档（以及支持它的浏览器）。在 HTML4 和更旧的浏览器中，如果没有 JavaScript，您将无法实现这一点。

或者对于 ASP.NET 文本框，只需执行以下操作：

```
<asp:TextBox MaxLength="5" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:44:30.703

```
<asp:TextBox id="tb6" rows="5" MaxLength="20" TextMode="multiline"
runat="server" /> 
```

# android - 从 sqlite 数据库中检索特定属性到列表视图

> ID：15108752
> 
> 赞同：-2
> 
> 时间：2013-02-27T09:41:37.170
> 
> 标签：android

我有这个数据库文件如下，还有我想在其中显示存储名称的活动文件

```
package a.vaccination;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class datahandler {

public static final String KEY_ROWID = "id";
public static final String KEY_name = "name";
public static final String KEY_dob = "dob";
public static final String KEY_contact = "contact";
public static final String KEY_email = "email";
private static final String TAG = "DBAdapter";

private static final String DATABASE_NAME = "profile";
private static final String DATABASE_TABLE = "baby";
private static final int DATABASE_VERSION = 2;

private static final String DATABASE_CREATE = "create table baby(id integer 
primary key autoincrement, "
        + "name VARCHAR not null, dob date, contact VARCHAR, email  
VARCHAR);";
private final Context context;

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public datahandler(Context ctx) {
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

protected static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        try {
            db.execSQL(DATABASE_CREATE);
            // db = DBHelper.getWritableDatabase();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old  
data");
        db.execSQL("DROP TABLE IF EXISTS contacts");
        onCreate(db);
    }
}

// ---opens the database---
public datahandler open() throws SQLException {
    db = DBHelper.getWritableDatabase();
    return this;
}

// ---closes the database---
public void close() {
    DBHelper.close();
}

// ---insert a record into the database---
public long insertRecord(String name, String dob, String contact,
        String email) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_name, name);
    initialValues.put(KEY_dob, dob);
    initialValues.put(KEY_contact, contact);
    initialValues.put(KEY_email, email);
    return db.insert(DATABASE_TABLE, null, initialValues);
}

// ---updates a record---
public boolean updateRecord(long rowId, String name, String dob,
        String contact, String email) {
    ContentValues args = new ContentValues();
    args.put(KEY_name, name);
    args.put(KEY_dob, dob);
    args.put(KEY_contact, contact);
    args.put(KEY_email, email);
    return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
}
public Cursor getAllTitles()
{
return db.query(DATABASE_TABLE, new String[] {
KEY_ROWID,
KEY_name,
KEY_dob,
KEY_contact,
KEY_email},
null,
null,
null,
null,
null,
null);
}
//---retrieves a particular title---
public Cursor getTitle(long rowId) throws SQLException
{
Cursor mCursor =
db.query(true, DATABASE_TABLE, new String[] {
KEY_ROWID,
KEY_name,
KEY_email,
KEY_dob,KEY_contact
},
KEY_ROWID + "=" + rowId,
null,
null,
null,
null,
null,null);
if (mCursor != null) {
mCursor.moveToFirst();
}
return mCursor;
}
} 
```

和活动文件，我想在其中检索名称表单数据库并在列表视图中显示它我做了一些编码但我卡住了请帮助我

```
package a.vaccination;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

//this shows profies of baby and option of add new one
public class profilelist extends Activity implements OnItemClickListener {

datahandler db = new datahandler(this);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.child);
    String nbaby[] = null;

    display();

    Button add = (Button) findViewById(R.id.button1);
    ListView names = (ListView) findViewById(R.id.listView1);

    ArrayAdapter<String> ad = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, nbaby);

    names.setAdapter(ad);
    names.setOnItemClickListener(this);

    add.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // navigate to create profile
            Intent it = new Intent(profilelist.this, 
createprofile.class);
            startActivity(it);

        }
    });

}

private void display() {
    // TODO Auto-generated method stub
    db.open();

    try {
        Cursor c = db.getAllTitles();
        if (c.moveToFirst()) {
            do {
                // System.out.println("bool2");
                DisplayTitle(c);
            } while (c.moveToNext());
        }
    } catch (Exception e) {
        // System.out.println(e);
    }
    db.close();
}

private void DisplayTitle(Cursor c) {
    // TODO Auto-generated method stub
//  System.out.println("bool");
    /*Toast.makeText(this,
    "id: " + c.getString(0) + "\n" +
    "ISBN: " + c.getString(1) + "\n" +
    "TITLE: " + c.getString(2) + "\n" +
    "PUBLISHER: " + c.getString(3),
    Toast.LENGTH_LONG).show();*/    

    nbaby[]=c.getString(0);

}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:10:31.177

试试下面的代码： 如果你还没有向数据库中插入任何数据，那么首先插入数据，然后将其绑定到列表视图中。为了方便起见，我尝试在 onCreate 中插入一些记录。如果您已经插入了记录，则从 onCreate() 中删除插入代码。

我已将光标的所有值存储到`ArrayList<String>`并将其绑定到列表视图中。您可以查看下面的代码。它的工作完美。

> ```
>  public class profilelist extends Activity implements OnItemClickListener
>     {
> datahandler db = new datahandler(this);
> String nbaby[] = null;
> ArrayList<String> m_arr=null;
> @Override
> protected void onCreate(Bundle savedInstanceState)
> {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.activity_main);
> 
>            db.open();
>     db.insertRecord("Texst", "10-1-1989","gaskudfgaskf", "teste@yahoo.com");
>     db.close(); 
> 
>     display();
>     Button add = (Button) findViewById(R.id.button1);
>     ListView names = (ListView) findViewById(R.id.listView1);
>     ArrayAdapter<String> ad =
>             new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, m_arr);
>     names.setAdapter(ad);
>     names.setOnItemClickListener(this);
>     add.setOnClickListener(new OnClickListener()
>     {
>         @Override
>         public void onClick(View v)
>         {
>             // navigate to create profile
>         Intent it = new Intent(profilelist.this, createprofile.class);
>             startActivity(it);
>         }
>     });
>       }
> private void display()
> {
>     // TODO Auto-generated method stub
>     db.open();
>     m_arr=new ArrayList<String>();
>     try
>     {
>         Cursor c = db.getAllTitles();
>             c.moveToFirst();
>             do
>             {
>                 m_arr.add(c.getString(1));
>                  System.out.println("bool2"+c.getString(1).toString());
>                 } while (c.moveToNext());
>     }
>     catch (Exception e)
>     {
>         // System.out.println(e);
>     }
>     db.close();
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:54:48.997

尝试这个，

```
if(cursor != null){
    cursor.moveToFirst();
    String label = cursor.getString(1);
} 
```

# c# - 将用户内容解析到存储库中。哪种方法更好？

> ID：15108753
> 
> 赞同：4
> 
> 时间：2013-02-27T09:41:40.290
> 
> 标签：c#, deserialization

在阅读了许多不同的设计模式后，我收到了一个关于我当前项目的问题，我希望有人能帮助我。

我的项目将不同的用户文件作为输入，并将它们转换为对象存储库以便于使用。

例如：

```
Userfile A with the content: 
"id:a" - "value1:contentA1" - "value2:contentB1" 
"id:b" - "value1:contentA2" - "value2:contentB2" 
"id:c" - "value1:contentA3" - "value2:contentB3" 
```

现在我看到了两种不同的方法来将此文件解析为对象（哪个更好？）：

**1)**

我们有一个实体类：

```
public class UserContent
{
    public int ID { get; set; }
    public string Value1 { get; set; }
    public string Value2 { get; set; }
} 
```

一项服务，它获取用户文件的一行并将其解析为对象：

```
public class UserContentParser
{
    public UserContent ParseUserContent(string content)
    {
        // ...
        // splitting the content
        // ...
        return new UserContent
                            { 
                                ID = id,
                                Value1 = value1,
                                Value2 = value2
                            };
    }
} 
```

解析控制器：

```
public class ParseController
{
    private Repository _repository = new Repository();
    private UserContentParser _userContentParser = new UserContentParser();

    public Repository StartParsing(File userFile)
    {
        // ...
        // reading file
        // ...
        foreach(var contentLine in userFileContent)
        {
            _repository.AddUserContent(_userContentParser.ParseUserContent(contentLine));
        }
    }
} 
```

我看到的另一种方法如下：

**2）** 这个方法只包含两个类（没有服务类）：

```
public class UserContent
{
    public UserContent(string content)
    {
        // ...
        // splitting the content
        // ...
        ID = id;
        Value1 = value1;
        Value2 = value2;
    }

    public int ID { get; set; }
    public string Value1 { get; set; }
    public string Value2 { get; set; }
}

public class ParseController
{
    private Repository _repository = new Repository();
    private UserContentParser _userContentParser = new UserContentParser();

    public Repository StartParsing(File userFile)
    {
        // ...
        // reading file
        // ...
        foreach(var contentLine in userFileContent)
        {
            _repository.NewUserContent(contentLine);
            // in this method the repository creates the 
            // new UserContent(contentLine)
        }
    }
} 
```

这些项目还包含一些插件，它们正在获取对存储库的引用以使用包含的对象。

这里哪种方法更好？有没有更好的选择？如果需要其他依赖项来解析用户内容，会发生什么？如果实体依赖于服务是否可以，或者在实体对象中没有依赖关系更好？还有一个问题，UserContent 类是否是 DTO，因为它用于将用户内容解析到其中并将其传递给其他插件？

我希望有人可以帮助我解决我的许多问题。

问候，格里特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:27:31.570

您确实有很多问题，而且很难回答，因为它们在很大程度上取决于您的上下文，这对您来说是暗示的，但对我们没有暗示。另外，我认为您在不应该的情况下过多地担心并过多地考虑“如果”。

但是，作为一般建议，您应该遵循[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)并将每个职责放在它自己的类中，因此将解析器作为一个单独的类是有意义的。将它放在一个单独的类中将允许您从中提取一个*Parser*接口并拥有多个实现并管理解析器的依赖关系（如果您有的话）。

*当他们来找你或者当你知道*他们会根据以前的经验而不是以前来找你时，你应该担心“假设”问题。

# algorithm - RSA 公共指数也在解密消息

> ID：15108754
> 
> 赞同：2
> 
> 时间：2013-02-27T09:41:47.437
> 
> 标签：algorithm, rsa

我正在尝试用我自己的数字制定一个非常简单的`RSA`算法，但我似乎遇到了问题。

我选择素数 13 和 17，给我一个模数 221。`φ(221)=12∗16=192` 然后我选择公共指数 r=19，并使用`extended euclidean algorithm`我发现私人指数 s=91。(19⋅91=1 模 192)

现在我将我的消息 42 加密为：`42^19 mod 221=172`. 使用解密`172^91 mod 221`确实返回了 42 的原始值。但是，如果我使用 19 作为指数 ( `172^19 mod 221`)，我也会得到 42，这显然不是应该发生的。我哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:11:11.160

19 次幂是 19×19 = 169 (mod 192) 的幂。问题是，为什么 x = 42 和许多其他 x 值时 x ^(169) = x (mod 221)？

让我们专注于[乘法群模 221](http://en.wikipedia.org/wiki/Multiplicative_group_of_integers_modulo_n)。由于 221=13×17，这个群有 12×16 = 192 个元素，它同构于 C [12] ×C [16]（其中 C [n]是 n 阶循环群）。

请注意，x ^(169) = x (mod 221) 等价于 x ^(168) = 1 (mod 221)。让我们定义 f(x) = x ^(168)。

*   由于 168 = 0 (mod 12)，f 将 C [12]中的每个元素映射到中性元素 1。
*   由于 168 = 8 (mod 16)，f 将 C [16]的所有偶数元素映射到中性元素 1，它是群的一半。

因此，对于乘法群的一半模 221，f(x) = 1 (mod 221)。

但是 x ^(169) = x·x ^(168)，所以对于乘法组的一半，我们有 x ^(169) = x (mod 221)。

检查不属于乘法组的 29 个模 221 的整数，我们看到其中 21 个也存在同余性。这可以进一步调查。所以**总的来说，所有消息的一半多一点（96+21 = 117）是使用指数 19 “解密”的。**

这是否意味着这个 RSA 系统坏了？我不这么认为；要看到公共指数可以解密一半的消息，您需要知道 221 的因式分解是 13×17。攻击者也可以选择一个随机指数。

**更新：**这个问题可以通过选择不同的公共指数来​​避免吗？

由于 192 = 2 ⁶ ×3 指数不能是 2 或 3 的倍数，所以它必须是 e = 6k±1。它的平方是 e² = (6k±1)² = 36k² ± 12k + 1 = 12k(3k ± 1) + 1。我们看到在调用案例中 e² = 1 (mod 12)。

*   如果 k = 4j，e² = 48j(12j ± 1) + 1 = 1 (mod 16)
*   如果 k = 4j+1，e² = (48j+12)(12j + 3 ± 1) + 1 = 48j(12j+3±1)+144j+36±12+1 = 5∓4 (mod 16)，所以对于 e = 6k+1 e² = 1 (16) 并且对于 e=6k-1 e²=9 (16)。
*   如果 k = 4j+2，e² = (48j+24)(12j + 6 ± 1) + 1 = 48j(12j+6±1)+288j+144±24+1 = 1±8 = 9 (mod 16)
*   如果 k = 4j+3，e² = (48j+36)(12j + 9 ± 1) + 1 = 48j(12j+9±1)+432j+324±36+1 = 5±4 (mod 16)，所以对于 e = 6k+1 e² = 9 (16) 并且对于 e=6k-1 e²=1 (16)。

因此，对于这个模数，没有选择比 19 更好的公共指数：使用公共指数解密将适用于至少一半的消息（当 e²=9 (16) 时），并且在许多情况下几乎适用于所有消息（当 e²=1 (16) 时）。

# sql - SQL Inject me add on not working

> ID：15108755
> 
> 赞同：1
> 
> 时间：2013-02-27T09:41:47.930
> 
> 标签：sql, extjs, sql-injection, browser-addons

**我对Sql Inject Me** Add-on有疑问。它不适用于我的网页以测试 SQLinjection。我的网页是使用创建的`extjs 4`

在**sql injection me**中显示了侧栏 `'Sorry,This page has no forms '`。实际上该网页包含表单。我怎样才能解决这个问题？这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:23:57.217

查看 ExtJS4 示例 - [http://cdn.sencha.com/ext-4.1.1a-gpl/examples/simple-tasks/index.html](http://cdn.sencha.com/ext-4.1.1a-gpl/examples/simple-tasks/index.html) - 看起来这个框架似乎完全在 JavaScript 中生成所有功能并检查生成的在生成这些 UI 元素时，它似乎根本没有使用普通的表单标签。

我认为 SQL Inject 正在查看源代码，没有看到任何标准的 HTML 表单，然后返回观察到的错误。

如果不知道更多关于这个框架的信息，我会冒险猜测你不能使用 SQL Inject 工具。

# google-cloud-datastore - ID的数据类型是什么？长的？

> ID：15108758
> 
> 赞同：1
> 
> 时间：2013-02-27T09:42:01.643
> 
> 标签：google-cloud-datastore

创建实体时自动生成的实体 ID。
它的数据类型是什么？
我实际上想知道最大值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:08:22.943

ID 的类型为**long**，该类型的 MAX 值为**2147483647**。

# css - HTML 和 CSS3 选择器

> ID：15108759
> 
> 赞同：1
> 
> 时间：2013-02-27T09:42:06.973
> 
> 标签：css

我的问题与之前提出的另一个问题有关[——CSS 语义；直接或通过顺序选择元素](https://stackoverflow.com/questions/2489452/css-semantics-selecting-elements-directly-or-via-order/15108325#comment21257637_15108325)

使用 CSS3 选择器将 CSS 与 HTML 文档紧密结合。由于选择器语义，您的 CSS 变得依赖于 HTML 文档中定义的结构。在我看来，这似乎是非常短视的。

如果我理解正确，那么这意味着如果 HTML 文档发生更改，那么您的样式将不再适用。此外，如果您想在其他地方重用该样式表，则不能。

有经验的人可以解释一下他们如何处理这些新语义并提供一个真实的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:52:14.560

正确的 CSS 选择器将您的演示文稿*绑定到您的 html 页面的**语义*。

如果您的语义发生变化，那么 CSS 选择器对于您的页面无效并且变得未绑定。

这是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:03:05.847

您可以使用（例如）[LESS](http://lesscss.org/)来指定可重用的 CSS。使用 LESS，您可以定义类

```
.bordered {
  border-top: dotted 1px black;
  border-bottom: solid 2px black;
} 
```

并在任何其他 css 中使用它们

```
#yourId a {
   color: #111;
   .bordered;
} 
```

并且可以做更多:)。

这不是圣杯，但它使开发更容易。您可以定义几乎所有未来网站都可以使用的类和变量。

我认为没有通用的方法，因为每个网站都有自己的颜色和样式（边框样式、字体……）。因此，您将始终需要更改大部分 CSS 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:17:06.803

也许我没有正确传达我的问题。英语不是我的母语，“意外”确实会发生。

我的感觉是在使用 HTML5/CSS3 时应该避免使用 id 或 class 属性。据说有更好的方式来开展您的业务。然后，我想指出，使用 CSS 选择器会使您的代码变得脆弱且难以维护。`<p>`当您从 更改为时，也许我或您从未想过要更改样式`<span>`。

无论哪种方式，我发现了一些我真的很想尝试（并分享）的有趣方法。

使用 ARIA，您可以为元素分配*角色*或*用途。*换句话说，你给它上下文。例如，页面顶部的标题与*其他*地方（例如`<article>`. 给出上下文正是我们试图通过使用 CSS 选择器 egpdog（在 的上下文中的狗`<p>`）来做的事情。

这里有一个链接供有兴趣查看它的人使用 - [ARIA Landmark Roles](http://adactio.com/journal/4267/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:01:56.707

这个问题没有一个确切的答案。由于许多“专业人士”采用不同的方法，因此很难一概而论。此外，选择器的使用可能真的取决于具体情况。

我总是保留模板（例如 html 和 css），然后我会重用很多......当然，当重用东西时你需要修复一些东西，但我认为我从来没有被你的问题“拧”过 1 或 2 = ) 但我也尝试保持选择器相对简单和灵活（作为对提供的 previos 问题链接的评论 - 这是相当极端的）。

# android - 双 gcm 通知

> ID：15108767
> 
> 赞同：7
> 
> 时间：2013-02-27T09:42:33.327
> 
> 标签：android

我今天正在测试如何使用 gcm。它工作正常，但我收到双重通知。

我所说的双重通知是在通知发出几分钟后，第二个通知的内容与第一个完全相同。

我正在使用[GCM 和 PHP (Google Cloud Messaging)测试通知](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)

我不知道我哪里出错了。我正在使用模拟器和真实设备进行测试这是 logcat 调试

```
02-27 16:05:36.192: V/GCMBroadcastReceiver(513): onReceive: com.google.android.c2dm.intent.RECEIVE
02-27 16:05:36.192: V/GCMBroadcastReceiver(513): GCM IntentService class: mypackage.GCMIntentService
02-27 16:05:36.201: V/GCMBaseIntentService(513): Acquiring wakelock
02-27 16:05:36.221: V/GCMBaseIntentService(513): Intent service name: GCMIntentService-DynamicSenderIds-2
02-27 16:05:36.312: V/GCMBaseIntentService(513): Releasing wakelock

.
.
.

02-27 16:11:14.282: V/GCMBroadcastReceiver(513): onReceive: com.google.android.c2dm.intent.RECEIVE
02-27 16:11:14.282: V/GCMBroadcastReceiver(513): GCM IntentService class: mypackage.GCMIntentService
02-27 16:11:14.291: V/GCMBaseIntentService(513): Acquiring wakelock
02-27 16:11:14.302: V/GCMBaseIntentService(513): Intent service name: GCMIntentService-DynamicSenderIds-3
02-27 16:11:14.402: V/GCMBaseIntentService(513): Releasing wakelock 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:17:45.743

验证您是否只注册了一次 BroadcastReceiver，因为它会在您每次注册 BroadcastReceiver 时触发。例如，如果您在您的方法中注册了它，但您没有在您的方法中取消注册，您将会`onResume`遇到`Activity`问题`onPause`。

# php - 在 PHP 中使用位

> ID：15108768
> 
> 赞同：3
> 
> 时间：2013-02-27T09:42:39.410
> 
> 标签：php, binary

假设我想在 PHP 中存储 8 个单词的序列，并且我不想使用压缩。

由于只有 8 个字，我可以为每个字分配一个二进制值，然后将这些二进制值存储在文件中，而不是 ascii 字。

可能的二进制值是：

```
000, 001, 010, 011, 100, 101, 110, 111 
```

这将更有效地解析，因为：（1）每个单词现在大小相同，并且，（2）它占用的空间更少。

我的问题是：

我怎样才能在 PHP 中做到这一点？如何将二进制值分配给某物，然后将其写入文件（以我想要的方式写入位），然后再次读取？

我想这样做的原因是创建一个高效的索引系统。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T04:33:32.733

*首先*，如果要压缩数据，请使用 php 内置函数，例如 gzip 扩展。

但正如您所要求的，我准备了一个如何在 PHP 中完成此操作的示例。它并不完美，只是一个微不足道的实现。如果我使用每个整数的第 30 位和第 32 位之间的间隙，压缩率可能会更好。也许会添加这个功能......但是我使用了 32 位无符号整数来支持字节，因为它们的损失是每 32 位 2 位而不是每字节 2 位。

首先我们准备包含关系词=>十进制数的查找表，它的编码表：

```
<?php

// coding table
$lookupTable = array (
//  'word0' => chr(0), // reserved for 0 byte gap in last byte
    'word1' => chr(1),
    'word2' => chr(2),
    'word3' => chr(3),
    'word4' => chr(4),
    'word5' => chr(5),
    'word6' => chr(6),
    // reserve one word for white space
    ' ' => chr(7)
); 
```

然后是压缩函数：

```
/**
 *
 */
function _3bit_compress($text, $lookupTable) {

    echo 'before compression                  : ' . strlen($text) . ' chars', PHP_EOL;

    // first step is one byte compression using the lookup table
    $text = strtr($text, $lookupTable);
    echo 'after one byte per word compression : ' . strlen($text) . ' chars', PHP_EOL;

    $bin = ''; // the result
    $carrier = 0; // 32 bit usingned int can 'carry' 10 words in 3 bit notation

    for($c = 0; $c < strlen($text); $c++) {
        $triplet = $c % 10;
        // every 30 bits we add the 4byte unsigned integer to $bin.
        // please read the manual of pack
        if($triplet === 0 && $carrier !== 0) {
            $bin .= pack('N', $carrier);
            $carrier = 0;
        }

        $char = $text[$c];
        $carrier  <<= 3; // make space for the the next 3 bits
        $carrier += ord($char); // add the next 3 bit pattern
        // echo $carrier, ' added ' . ord($char), PHP_EOL;
    }
    $bin .= pack('N', $carrier); // don't forget the remaining bits
    echo 'after 3 bit compression             : ' . strlen($bin) . ' chars', PHP_EOL;
    return $bin;
} 
```

以及解压功能：

```
/**
 *
 */
function _3_bit_uncompress($compressed, $lookupTable) {
    $len = strlen($compressed);
    echo 'compressed length:            : ' . $len . ' chars', PHP_EOL;

    $i = 0;
    $tmp = '';
    $text = '';
    // unpack string as 4byte unsigned integer
    foreach(unpack('N*', $compressed) as $carrier) {
        while($i < 10) {
            $code = $carrier & 7; // get the next code
            // echo $carrier . ' ' . $code, PHP_EOL;
            $tmp = chr($code) . $tmp;
            $i++;
            $carrier >>= 3; // shift forward to the next 3 bits
        }
        $i = 0;
        $text = $text . $tmp;
        $tmp = '';
    }
    // reverse translate from decimal codes to words
    return strtr($text, array_flip($lookupTable));
} 
```

现在是时候测试功能了:)

```
$original = <<<EOF
word1 word2 word3 word4 word5 word6 word1 word3 word3  word2
EOF;

$compressed = _3bit_compress($original, $lookupTable);
$restored = _3_bit_uncompress($compressed, $lookupTable);

echo 'compressed size: ' . round(strlen($compressed) * 100 / strlen($original), 2) . '%', PHP_EOL;

echo 'Message before compression  : ' . $original, PHP_EOL;
echo 'Message after decompression : ' . $restored, PHP_EOL; 
```

这个例子应该给你：

```
before compression                  : 60 chars
after one byte per word compression : 20 chars
after 3 bit compression             : 8 chars
compressed length:            : 8 chars
compressed size: 13,33%
Message before compression  : word1 word2 word3 word4 word5 word6 word1 word3 word3  word2
Message after decompression : word1 word2 word3 word4 word5 word6 word1 word3 word3  word2 
```

如果我们用 loooong 词进行测试，压缩率当然会变得更好：

```
before compression                  : 112 chars
after one byte per word compression : 16 chars
after 3 bit compression             : 8 chars
compressed length:            : 8 chars
compressed size: 7,14%
Message before compression  : wooooooooord1 wooooooooord2 wooooooooord2 wooooooooord3 wooooooooord1 wooooooooord2 wooooooooord2 wooooooooord3 
Message after decompression : wooooooooord1 wooooooooord2 wooooooooord2 wooooooooord3 wooooooooord1 wooooooooord2 wooooooooord2 wooooooooord3 
```

# php - PHPExcel 在 Zend 框架中不起作用

> ID：15108777
> 
> 赞同：0
> 
> 时间：2013-02-27T09:43:08.787
> 
> 标签：php, zend-framework, phpexcel

我点击了这个链接 - [PHPExcel integration into Zend Framework](https://stackoverflow.com/questions/4742706/phpexcel-integration-into-zend-framework)

如前所述复制文件/文件夹 -

```
> /library
>     /PHPExcel
>     /PHPExcel.php 
```

并添加到 application.ini 文件中-

```
autoloaderNamespaces[] = "PHPExcel_"
autoloaderNamespaces[] = "PHPExcel" 
```

现在`mysite\application\modules\admin\controllers`，`MysiteController.php`我正在以这种方式使用它-

```
public function getExcelDataAction() 
{
    $objPHPExcel = new PHPExcel();
    $objPHPExcel->setActiveSheetIndex(0)->mergeCells('A1:D1');
    $objPHPExcel->getActiveSheet()->setCellValue('A1', 'Swapnesh');
    $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
    $filename = "my-data-sheet".".xlsx";
    $objWriter->save($filename);    
} 
```

发生以下错误 -

```
Fatal error: Class 'PHPExcel' not found in C:\webserver\mysite\application\modules\admin\controllers\MysiteController.php on line 526 
```

让我知道我怎样才能让它工作`Zend`（zend初学者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:49:56.857

对于我的实现 PHPExcel 是最后触发的，所以在启动 PHPExcel 后我不再需要 Zends 自己的自动加载器，因此创建了我自己的解决方法。

//在控制器中，我调用了一个正常的 Zend 模型

```
$excelModel = new Application_Model_Excel(); 
```

//exelmodel（位于 Application/Models/Excel.php 中）看起来像这样

```
<?php
spl_autoload_unregister(array('Zend_Loader_Autoloader','autoload'));
require_once('PHPExcel/Classes/PHPExcel.php');
class Application_Model_Excel extends PHPExcel
{

}
?> 
```

这肯定不是最好的方法，但在我的应用程序中运行顺利

# r - 拟合线性模型

> ID：15108781
> 
> 赞同：1
> 
> 时间：2013-02-27T09:43:15.187
> 
> 标签：r, statistics, curve-fitting

我有一个看起来像的数据框

```
> t
          Institution Subject Class       ML1     ML1SD
aPhysics0           A Physics     0 0.8730469 0.3329205
aPhysics1           A Physics     1 0.8471074 0.3598839
aPhysics2           A Physics     2 0.8593750 0.3476343
aPhysics3           A Physics     3 0.8875000 0.3159806
aPhysics4           A Physics     4 0.7962963 0.4027512 
```

我想拟合一个线性函数来`ML1`反对`Class`，但是当我打电话时

```
> lm(ML1 ~ Class, data=t) 
```

我得到：

```
Call:
lm(formula = ML1 ~ Class, data = t)

Coefficients:
(Intercept)       Class1       Class2       Class3       Class4  
    0.87305     -0.02594     -0.01367      0.01445     -0.07675 
```

我不太明白，因为它看起来给我的每个值提供了多个梯度值`Class`，但是有 5 个`Class`值（0-4）。但我想要的是一个单一的截距和一个单一的梯度值。

此外，当我用它调用`lm`时，`weights = 1/ML1SD^2`它不会改变任何值。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:51:01.640

`Class`被视为一个`categorical variable`to `lm`。我想你`Class`是一个因素。

并且回归的结果是正确的，因为估计对应于 4 个类别。这是因为默认情况下，第一个级别（`0`在您的情况下为 ）被视为*参考*级别，并且您获得的所有估计都与参考有关。即，`mean(Class1) - mean(Class0)`等于`-0.02594`。

如果您不想要分类变量`Class`并且想要将其建模为连续变量，那么您必须通过执行以下操作转换`factor`为`numeric`（或`integer`）类型`df$Class <- as.numeric(as.character(df$Class))`：然后，你得到：

```
> lm(ML1 ~ Class, data=df)

Call:
lm(formula = ML1 ~ Class, data = df)

Coefficients:
(Intercept)        Class  
    0.87529     -0.01131 
```

但是你确定`Class`是一个连续变量吗？

**编辑：**参数`weights`确实有效果。它执行加权线性最小二乘回归。您可以在`categorical variable`执行以下操作时看到`summary(.)`：

```
summary( ML1 ~ factor(Class), data = df) 
```

但是在您的情况下，分类变量只有一个值。

让我用另一个例子来说明：

```
set.seed(45)
# meaningless data
df <- data.frame(x=runif(10), y=rep(1:3, c(4,3,3)))

summary(lm(x ~ factor(y), data=df))
# without weights 
# Coefficients:
#             Estimate Std. Error t value Pr(>|t|)   
# (Intercept)  0.39256    0.09481   4.141  0.00435 **
# factor(y)2  -0.09999    0.14482  -0.690  0.51216   
# factor(y)3  -0.14433    0.14482  -0.997  0.35214   

summary(lm(x ~ factor(y), data=df, weights=1/y))
# with weights
# Coefficients:
#             Estimate Std. Error t value Pr(>|t|)    
# (Intercept)  0.39256    0.07148   5.492 0.000914 ***
# factor(y)2  -0.09999    0.13687  -0.731 0.488798    
# factor(y)3  -0.14433    0.15983  -0.903 0.396528 
```

# objective-c - 如何在快速用户切换时处理多个实例？

> ID：15108784
> 
> 赞同：2
> 
> 时间：2013-02-27T09:43:25.647
> 
> 标签：objective-c, macos, launchd

我有一个 LaunchAgent 应用程序，它在用户登录系统时启动。

LaunchAgent 文件位于 /Library/LaunchAgents 中，因此应用程序会为登录到系统的所有用户启动。

这就是我真正想要的。

但问题是，**当我使用快速用户切换并登录到另一个用户时，活动监视器显示应用程序正在为两个用户运行。** 我想要的是只有当前用户的实例应该一直存在。并且一旦我切换用户，前一个实例就应该退出。

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T04:46:16.400

您可以使用 Carbon 或 Cocoa 监听用户切换 - 请参阅[多用户环境编程指南](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPMultipleUsers/Concepts/UserSwitchNotifications.html#//apple_ref/doc/uid/20002210-CJBJDAGF)中的**用户切换通知**。但是，如果您在收到用户切换通知时退出进程，那么当系统切换回时，launchd 不会为您重新启动它。

处理此问题的最简单方法是确保您的应用程序可以在系统从用户的登录会话切换时关闭需要由用户独占使用的任何资源，并在您收到系统通知时重新打开它们正在返回该会话。

如果这不可能，您可以将您的应用程序分成两个进程；一个由 launchd 启动的不露面的助手，它永远不会退出，它唯一的工作是运行你的完整应用程序，以及完整的应用程序本身。当系统切换离开当前用户时，您的整个应用程序可以退出，但助手可以继续运行；切换回来时，助手可以重新启动您的完整应用程序。

最后，当当前登录会话切换时，launchd 采取行动听起来像是有用的功能——考虑在 Apple 的错误跟踪器上提交功能请求。

# java - 通过 urlconnect 进行 Kerberos 凭据委托？

> ID：15108785
> 
> 赞同：0
> 
> 时间：2013-02-27T09:43:26.463
> 
> 标签：java, http, kerberos

我正在尝试设置一个基于 tomcat 的中间服务器，它将从 java 客户端获取委托票证并转发到 tomcat 服务器/java 服务器。

我有一个处理委托票证的 tomcat servlet。我的问题在于客户

[http://mydomain.example.com/examples/](http://mydomain.example.com/examples/)受远程机器上的 tomcat 实例保护。为了登录，我使用了：-

URL url = new URL(" [http://mydomain.example.com:8080/examples/](http://mydomain.example.com:8080/examples/) "); InputStream ins = url.openConnection().getInputStream(); 然后将流重定向到缓冲的阅读器。

但是，此方法不适用于委托凭证情况。

urlconnection 对象中是否有标志或设置？是否有另一个类（除了 SpnegoHttpURLConnection 可以实现这个？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:23:17.920

使用`Subject.doAs`并且您`URLConnection`将在您的委托凭证的安全上下文中运行。

# c# - typeof：如何从字符串中获取类型

> ID：15108786
> 
> 赞同：38
> 
> 时间：2013-02-27T09:43:26.867
> 
> 标签：c#, .net

我有很多对象，每个对象都有关于其类型的字符串信息。
像：

```
string stringObjectType = "DateTime"; 
```

跑步时，我自己没有对象。
所以我无法测试它`typeof (object)`

如何在运行对象类型时通过以下方式获取：

```
typeof (stringObjectType) 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-27T09:45:18.693

```
try
{
    // Get the type of a specified class.
    Type myType1 = Type.GetType("System.DateTime");
    Console.WriteLine("The full name is {myType1.FullName}.");

    // Since NoneSuch does not exist in this assembly, GetType throws a TypeLoadException.
    Type myType2 = Type.GetType("NoneSuch", true);
    Console.WriteLine("The full name is {myType2.FullName}.");
}
catch(TypeLoadException e)
{
    Console.WriteLine(e.Message);
}
catch(Exception e)
{
    Console.WriteLine(e.Message);
} 
```

见[`Type.GetType(string)`MSDN](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-27T09:58:02.083

您可以使用`Type.GetType()`从其字符串名称中获取类型。所以你可以这样做：

```
Type DateType = Type.GetType("System.DateTime"); 
```

您不能只使用“DateTime”，因为这不是类型的名称。如果您这样做并且名称错误（它不存在），那么它将引发异常。所以你需要尝试/解决这个问题。

您可以通过执行以下操作获得任何给定对象的正确类型名称：

```
string TypeName = SomeObject.GetType().FullName; 
```

如果您需要使用模糊或不完整的名称，那么您将在反思中玩得开心。不是不可能，但肯定很痛苦。

# javascript - 使用angularjs单击输入后运行textbox.blur

> ID：15108789
> 
> 赞同：5
> 
> 时间：2013-02-27T09:43:31.967
> 
> 标签：javascript, ipad, angularjs

我有一个仅为 iPad（Safari 浏览器）开发的小型 angularjs 应用程序。顶部有一个文本框，用作 ng-repeat 的过滤器。我想要实现的是一旦有人单击“GO”按钮就关闭 ipad 上的键盘。我看到关闭键盘的方法是模糊输入元素[Hide The iPad Keyboard By Hitting the Return Key](https://stackoverflow.com/questions/4810984/hide-the-ipad-keyboard-by-hitting-the-return-key)

我正在使用 AngularUI 库，所以我正在触发 onKeyUp 事件并检测回车键。

这是文本框的 html。我正在使用 ui-keypress 事件来调用 keypressCallback

```
<input ng-model="query" type="text" id="query" placeholder="product name or number" class="big radius" autocomplete="off" ui-keypress="{13:'keypressCallback($event)'}"> 
```

下面是 javascript 的缩减版本，其中仅包含 keypressCallback 函数

```
var GunnersenApp = angular.module( "GunnersenApp", ['ui'] );

GunnersenApp.controller(
'SwatchListCtrl',
function ($scope, $http) {      

    $scope.keypressCallback = function($event) {
        alert('enter');
        $event.preventDefault();
    };      

}
); 
```

我试图将焦点设置在文档和正文上，这会模糊文本框，但我没有成功。

我正在研究的开发版本位于以下网址： [http ://thejonesmobile.com/gunnersen/](http://thejonesmobile.com/gunnersen/)

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T11:34:32.003

你为什么不使用`input.blur()`？我已将您的代码更改为：

```
$scope.keypressCallback = function($event) {
    $event.target.blur();
}; 
```

它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T22:10:51.473

简单的解决方案：

```
document.formName.fieldName.blur(); 
```

# dynamics-crm-2011 - javascript如何获取选项集选中选项的名称

> ID：15108790
> 
> 赞同：1
> 
> 时间：2013-02-27T09:43:33.853
> 
> 标签：dynamics-crm-2011

如何使用 CRM JavaScript SDK 从字段中检索名称而不是值？
可以使用 SDK 检索该值：

```
SDK.REST.retrieveRecord(...);
    account.completePopulateAccountFields = function (account) {
    var type = account["optionsetname"].Value;
    if (type != null)
        //perform action 
```

此调用仅返回值。
OrganizationData.svc 中是否有可以使用检索到的值查询的选项集集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:24:09.537

您需要使用元数据服务来检索标签名称。检查代码：

C＃：

```
RetrieveAttributeRequest request = new RetrieveAttributeRequest {
   EntityLogicalName = entityName,
   LogicalName = attributeName,
   RetrieveAsIfPublished = true
};

RetrieveAttributeResponse response = (RetrieveAttributeResponse)service.Execute(request);

PicklistAttributeMetadata metadata = (PicklistAttributeMetadata)response.AttributeMetadata;

OptionMetadata[] optionList = metadata.OptionSet.Options.ToArray();

foreach (OptionMetadata option in optionList) {
    //option.Value - Value of option
    //option.Label.UserLocalizedLabel.Label - Label name of that value
} 
```

如果您想知道一个标签文本，您只知道该值并且您不在表单中，请在[Javascript](http://mahenderpal.wordpress.com/2012/06/19/get-optionset-label-based-on-optionset-value-using-javascript/)中使用它。

如果您处于想要获取选项集文本的表单中，您可以简单地执行以下操作：

```
Xrm.Page.getAttribute("optionsetfieldname").getText(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:30:14.313

我将相同的命名选项集添加到 Contact 并将其设为只读，并使用从父帐户获得的值填充它。
要求是在联系人上显示父帐户类型
我仍然不知道如何使用 JavaScript 获取选项集值的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T11:12:28.537

最近在 CRM 中发生了一些变化（？），因为直接调用 Xrm.Page.getAttribute("optionsetfieldname").getText() 会给你一个错误。使用两步方法：

```
var sOptionsetAttribute = Xrm.Page.getAttribute("optionsetfieldname");
var sOptionsetValueName = sOptionsetAttribute.getText(); 
```

# c - 将大的 .pdf/.jpg 文件上传到 jffs2 文件系统时，fwrite() 失败

> ID：15108792
> 
> 赞同：0
> 
> 时间：2013-02-27T09:43:38.627
> 
> 标签：c, jffs2

将大的 .pdf/.jpg 文件上传到 jffs2 文件系统时，`fwrite()`失败。

我的设备有 1024KB 空间，我正在上传 500KB 的 .pdf 文件。我的程序将上传流式传输到字节并写入 jffs2 文件系统。给定`fwrite()`的长度与返回的长度不同`fwrite()`（即写入的字节数）。它将错误号设置为 -11，表示“空间不足”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:50:26.923

JFFS2 是一个*压缩*文件系统，因此在您看来 1024 Kb 的空间很可能实际上是一个 512 Kb 的区域，设备**认为**可以压缩至少 2:1，这是一个典型值。

但由于 PDF 和 JPEG 都是压缩格式，不能再*压缩*；尝试这样做实际上会经常扩展它们。这就是 JFFS2 写入失败的时候。

要检查（如果您没有报告真实物理空间的设备规格），您可以尝试使用该`pdftk`工具获取*未压缩*的PDF。您可能会看到1024K 甚至更大的*未压缩PDF 将毫无问题地上传……但没有什么比 490-500 Kb**压缩*PDF 更大的了，因为物理空间不存在。

# jquery - 使用函数显示数据库值

> ID：15108800
> 
> 赞同：0
> 
> 时间：2013-02-27T09:43:55.017
> 
> 标签：jquery, ajax, asynchronous

我正在构建一个完全由 JavaScript 组成的网站（为了好玩）。我现在添加了选择一种语言的选项，该语言会将网站的某些部分更改为该语言（大多数硬编码的单词和句子）。

我现在正试图通过将一个值传递给一个函数来执行此操作，该函数然后执行 ajax 调用并根据该值和语言集检索单词/句子。

但是因为 ajax 是异步的，所以它不起作用。我找到了一个很好的例子，只有那种做我想做的事，但有一个问题。

这是小提琴代码：http: [//jsfiddle.net/6xhxT/5/](http://jsfiddle.net/6xhxT/5/)

```
$('#test').text(realData); 
```

当我使用这条线时（在示例中它被阻止）它工作得很好，但问题是我不知道我要放入数据的 div 的 id。

我这样用

```
<div class="whatever">getWord(1)</div> 
```

所以这个例子有效，但我现在需要我放入的 div 的 id，但我不想要那个。我希望它与我调用该函数的位置相同。

我知道我可以使用 async: false，但我不想使用它。

如果我想要什么是不可能的，那么我应该使用什么，我可以使用数组或 sessionStorage，但考虑到它可能需要加载数千个单词/句子这一事实是否明智。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:53:23.603

我无法真正掌握您的方法是什么，但在我看来，您可以循环遍历应该翻译并用于`$( this )`引用该元素的元素。

```
$( '.i18n' ).each( function() {
    var $this = $( this );
    $this.load( 'url/to/translator', { text: $this.text() } );
}); 
```

演示：http: [//jsfiddle.net/eNK9w/](http://jsfiddle.net/eNK9w/)

# shell - 需要以正确的格式对齐 csv 文件

> ID：15108803
> 
> 赞同：0
> 
> 时间：2013-02-27T09:44:00.293
> 
> 标签：shell, unix, scripting

我有一个脚本正在运行并以以下格式提供一个 csv 文件作为输出

```
25-02-2013          
RJ          
D204349194          
Pagamento Caixa                                                     0   
           256.31    -256.31 
```

但我需要按以下格式对齐：

```
25-02-2013  RJ  D244728244  Pagamento Banco Brasil  0   403.25  -403.25 
```

意味着像在excel中它应该分为列

请建议我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:10:44.463

如果您已`column`安装，请尝试以下行：

```
 awk '{printf $0}' file|column -t 
```

对于您的示例：

```
kent$  cat file
25-02-2013          
RJ          
D204349194          
Pagamento Caixa                                                     0   
           256.31    -256.31

kent$  awk '{printf $0}' file|column -t
25-02-2013  RJ  D204349194  Pagamento  Caixa  0  256.31  -256.31 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:08:52.307

首先用于`tr`将所有内容拉到单行上，然后用于`sed`根据字段拆分单行。尝试以下操作：

```
tr '\n' '\t' < file | sed -r 's/([0-9]{2}-[0-9]{2}-[0-9]{4})/\n\1/g' 
```

这假设：

*   您的文件是制表符分隔的
*   每条记录的第一个字段是表格的日期`dd-MM-yyyy`
*   除第一个字段外，记录中没有其他日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:44:32.373

```
awk '{$1=$1; printf $0 "  "}' input; echo 
```

`$1=$1`挤压每一行的空白，并`echo`发出一个终止换行符。

# jquery - Asp.net 和 Jquery 返回数据错误

> ID：15108806
> 
> 赞同：1
> 
> 时间：2013-02-27T09:44:07.207
> 
> 标签：jquery, asp.net

我有 Jquery 代码的行为很奇怪。我正在做一项复杂的任务，但我几乎完成了它。我唯一的问题是我在 C# 中触发了一个完美运行的 webmethod。该网络方法返回一个字符串值。我正在尝试使用该返回值设置一个 cookie，但它显示 [object Object]。如何正确显示返回值。

```
$.ajax({
type: "POST",
url: "InsertPost.aspx/insert_post_new_category",
data: "{'CategoryName':'" + user_cat + "','CategoryDescription':''}",
contentType: "application/json; charset=utf-8",
dataType: "json",
success: function (data, status) {
    if (user_cat.replace(/^\s+|\s+$/g, '') != '') {
        $("#demo-input-facebook-theme").tokenInput("add", { name: user_cat, id: data });
        $.session.set(encodeURIComponent('Kat_' + user_cat + '_x'), data);
    }
} 
```

});

我对上面的“数据”有问题。显示 [object Object]。我怎样才能解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:45:50.827

您使用`{dataType: "json"}`(在您的选项中 $.ajax()) ，因为通过使用`data.d`而不是仅数据来访问值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:47:00.380

那是因为`data`是一个`object`. 尝试使用正确的属性`object data`

# drupal - Drupal Views / Node Reference 获取父级关系

> ID：15108808
> 
> 赞同：0
> 
> 时间：2013-02-27T09:44:09.127
> 
> 标签：drupal, drupal-views, nodereference, drupal-views-relationship

好吧，对不起这个标题，很难描述。我的问题如下：我有内容类型“产品类别”（出于多种原因，不要使用分类法）和“产品”。产品使用[节点引用](http://drupal.org/project/references)引用到它们的类别。

我还有一个视图，它在类别页面上显示所有使用上下文过滤器 =>“来自 URL 的节点 ID”的所属产品。我现在的问题是，当我点击一个产品时，我需要保持关系。上下文过滤器当然不再知道产品类别的 NID，因为当前 NID 是来自我的产品的 NID。

作品：/category/xyz
作品不：/category/xyz/myproduct（因为我需要“xyz”的nid，而不是“myproduct”）

有谁知道我如何告诉上下文过滤器获取父类别的 NID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:52:01.110

由于缺乏更好的解决方案……对于产品页面，我添加了另一个视图显示并对其进行了一些更改：

*   我添加了一个关系并为该类别选择了我的节点参考字段
*   我将上下文过滤器更改为自定义 PHP，并提供了以下代码：

    ```
    $n = node_load(arg(1));
    return $n->field_product_product_category['und'][0]['nid']; 
    ```

我没有将此答案标记为已接受，因为我认为这不是正确的方法。我加载了无论如何都会加载的节点，所以我认为我正在产生不必要的数据库调用以及与正确获取节点对象相关的所有内容。

也许有一天有人对此有更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:53:59.363

不确定我是否完全理解，但是当您使用上下文过滤器（例如来自 URL 的节点 ID）时，您可以选择要使用的参数。

在此相对 URL /category/xyz/myproduct 的情况下，arg 1 指代“category”，arg 2 指代“xyz”

也许有一个 /category/* 和 /category/xyz/* 的视图设置，然后设置 URL 的哪些部分以不同的方式在上下文过滤器中使用。

这有帮助吗？

注意： arg 设置应该是上下文过滤器中“提供默认参数”的下拉设置。

# gitorious - Gitorious - “查看项目成员”权限存储在哪里？

> ID：15108809
> 
> 赞同：1
> 
> 时间：2013-02-27T09:44:11.793
> 
> 标签：gitorious

我有一个业主已经辞职的项目。我要为这个项目添加一个新成员。通过更改`owner_id`和`user_id`：

```
# script/console
>> project = Project.find_by_slug
>> project.owner_id = 
>> project.user_id =
>> project.save 
```

按 Ctrl+F5 后我可以看到附加链接：

*   添加存储库
*   编辑项目
*   经理访问

但是没有`View project members`链接到`Add new member`。`View project members`MySQL中存储的权限在哪里？或者我如何`Add new member`通过 Gitorious 控制台向自己授予权限？

PS：Gitorious 2.3.1版本

# python - 纸浆问题（python）

> ID：15108810
> 
> 赞同：0
> 
> 时间：2013-02-27T09:44:13.757
> 
> 标签：python, pulp

我对纸浆有疑问，我正在尝试转换此约束

```
∑_iϵN Xijkz+Vjkz+Ujkz = nsjk*sjz                     ∀ j ϵ J , ∀ z ϵ S , ∀ k ϵ K .

for i in N:
    prob += lpSum(X[(i,j,k,z) ]+V[(j,k,z)]+U[(j,k,z)]
    for j in J 
        for k in K 
            for z in S2)==(ns[k][j]*s1[k][j]) 
```

但我不确定这是否公平，我没有任何错误，但是，目标函数为 0

# cuda - 用于亥姆霍兹方程的 CUDA 中的一维有限差分时域 (FDTD)

> ID：15108811
> 
> 赞同：3
> 
> 时间：2013-02-27T09:44:23.883
> 
> 标签：cuda

当我在 CUDA 中实现一维波动方程时，它比在 C/C++ 中慢。谁能告诉我我做错了什么？这是我的代码：

```
__global__ void Solver1d(float* up, float* u, float* um)
{
    int id;
    float dx,dt;
    dx = (float)L/n;
    dt = (float)dx/c;
    float r= c*((float)dt/dx);
    float R = r*r;

    // index mapping between data and threads
    id = threadIdx.x + blockIdx.x*blockDim.x;

    // Allowing all threads in the range of valids data to execute
    if (id<n)
    {
        if(id==0)
        {
            up[id]=0;
        }
        else if(id==n-1)
        {
            up[n-1]=0;
        }
        else
        {
            up[id] = 2*u[id]-um[id]+R*(u[id+1]-2*u[id]+u[id-1]);    
        }   
    }
}

// main program
int main(int argc, char *argv[])
{        

    // declare all variables 
    int i;
    float inner,L2_exact,ue[n],dx,dt;
    dx = (float)L/n;
    dt = (float)(0.05*dx/c); // Max time step
    float r= c*((float)dt/dx);
    float R = r*r;

    // Allocate memory on host
    //float u=(float *)malloc((n)*sizeof(float));
    //float um=(float *)malloc((n)*sizeof(float));
    float up[n],um[n],u[n];

    //Pointers for device memory allocation
    float *dev_up, *dev_u, *dev_um;

    // Allocating memory to device (GPU)
    HANDLE_ERROR(cudaMalloc((void**)&dev_up, n*sizeof(float)));
    HANDLE_ERROR(cudaMalloc((void**)&dev_u, n*sizeof(float)));
    HANDLE_ERROR(cudaMalloc((void**)&dev_um, n*sizeof(float)));

    cudaEvent_t start, stop;
    float elapsedTime;

    // Start timer
    HANDLE_ERROR(cudaEventCreate( &start ));
    HANDLE_ERROR(cudaEventCreate( &stop ));
    HANDLE_ERROR(cudaEventRecord( start,0 ));

    //Initialize the stream
    cudaStream_t stream;
    HANDLE_ERROR(cudaStreamCreate( &stream ));
    //Initial condition
    for(i=0;i<n;i++)
    {
        u[i]=sin(2*PI*i*dx);
        //printf("Initialization ok\n");
    }

    // Enforcing special formula for t = -1
    for(i=1;i<n-1 ;i++)
    {
        um[0] = 0;
        um[n-1] = 0;
        um[i] = u[i]  + 0.5*R*(u[i-1] - 2*u[i] + u[i+1]); //+ 0.5*dt*dt*f(i*dx,t)
        //printf("um is runing fine\n");
    }

    // setting blocks and threads numbers
    int noThreads=128;
    dim3 dimBlock(noThreads,1,1);
    dim3 dimGrid(1+n/(noThreads-1),1,1);

    // move u and um to GPU
    HANDLE_ERROR(cudaMemcpy(dev_u, u, n*sizeof(float), cudaMemcpyHostToDevice));
    HANDLE_ERROR(cudaMemcpy(dev_um, um, n*sizeof(float), cudaMemcpyHostToDevice));

    float t=0;

    //int counter=0;
    while(t<=T)
    {
        //counter++;
        t += dt;

        Solver1d<<<dimGrid,dimBlock>>>(dev_up,dev_u,dev_um);
        // cudaDeviceSynchronize();
        for(i=0;i<n;i++)
        {
            um[i] = u[i];
            u[i]  = up[i];
        }

    }

    HANDLE_ERROR(cudaEventRecord( stop,0 ));
    HANDLE_ERROR(cudaEventSynchronize( stop ));
    HANDLE_ERROR(cudaEventElapsedTime( &elapsedTime,start,stop ));
    HANDLE_ERROR(cudaEventDestroy( start ));
    HANDLE_ERROR(cudaEventDestroy( stop ));     

    printf("elapsed time: %lf sec\n",elapsedTime/1000);
    // move the solution up from GPU to CPU
    HANDLE_ERROR(cudaMemcpy(up, dev_up, n*sizeof(float), cudaMemcpyDeviceToHost));
    HANDLE_ERROR(cudaMemcpy(u, dev_u, n*sizeof(float), cudaMemcpyDeviceToHost));
    HANDLE_ERROR(cudaMemcpy(um, dev_um, n*sizeof(float), cudaMemcpyDeviceToHost));

    int j;
    float L2cpuSolution=0.0;
    float L2gpuSolution=0.0;
    float ERROR_PERCENTAGE=0.0;

    // Verification with exact solution
    for(j=0;j<(n);j++)
    {
        //printf("up[%d]=%.12g\n",j,up[j]);
        ue[j]=0.5*(sin(2*PI*(j*dx+c*T))+sin(2*PI*(j*dx-c*T)));
        //printf("um[%d]=%.12g\n",j,um[j]);
        inner += (ue[j]-up[j])*(ue[j]-up[j]);
        L2cpuSolution += ue[j]*ue[j];
        L2gpuSolution += up[j]*up[j];

    }
    L2cpuSolution = sqrt(L2cpuSolution)/n;
    L2gpuSolution = sqrt(L2gpuSolution)/n;
    L2_exact = sqrt(inner/(n));
    ERROR_PERCENTAGE = 100*(L2_exact/L2cpuSolution);
    printf("L2_exact=%lf\n",L2_exact);
    printf("gpul2=%lf, and cpuL2=%lf \n",L2gpuSolution,L2cpuSolution);
    printf("ERROR_PERCENTAGE= %lf\n", ERROR_PERCENTAGE);

    // Free device memory
    cudaFree(dev_up);
    cudaFree(dev_u);
    cudaFree(dev_um);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:13:56.133

从本质上讲，我不认为你在这里做错了什么。但是，您不应该期望 CUDA 会为您带来魔法并且加载速度比 CPU 实现要快。尤其是相对微不足道的一维波动方程（实际上只是 CPU 实现中的单个 for 循环）对于现代计算机来说非常简单，几乎没有理由将其并行化。因为请记住：从主机到设备再返回的数据传输可能是 GPU 实现性能的瓶颈。因此，除非您的数据量很大（例如 n > 10^6 左右），否则我认为这不值得。

但是，改进内核代码的一种方法是预先计算一些变量。在整个模拟过程中，变量`dx`、`dt`、`r`和似乎是恒定的，但是您让每个小线程在每个时间步计算它们。`R`所以这可能是数以百万计的多余计算。此外，为数组的数据使用纹理内存有提高速度的潜力，因为您的大部分内存访问都发生在每个块的同一附近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-01T07:41:12.727

上述评论中的主要问题和讨论是，在实现 C/C++ 并在顺序机器上运行时，一维时域有限差分 (FDTD) 方法是否比在 CUDA 中实现并在并行 GPU 上运行时更快。

我试图用下面的代码回答这个问题。它包含在 C/C++ 和 CUDA 中用于电磁应用的一维 FDTD 方法的实现。理论和 C/C++ 实现取自[Understanding the Finite-Difference Time-Domain Method](http://www.eecs.wsu.edu/~schneidj/ufdtd/ufdtd.pdf)（参见程序 3.1）。CUDA 版本包含两种方法，一种仅使用全局内存，另一种使用共享内存。在后一种情况下，我通过启动两个不同的内核来强制磁场和电场更新之间的同步。

对于足够大的问题 ( `SIZE = 10000000`)，GPU 版本确实比 CPU 版本快。我在 Kepler K20c 卡上测试了代码，结果如下：

```
Shared Memory version
CPU elapsed time = 3980.763 ms
GPU elapsed time = 356.828 ms

Global Memory version
GPU elapsed time = 359.768 ms 
```

使用共享内存的版本并没有改善场景。

这是代码：

**内核.cu**

```
/* 1D FDTD simulation with an additive source. */

#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#include "TimingCPU.h"
#include "TimingGPU.cuh"

#define BLOCKSIZE   512
//#define DEBUG

/*******************/
/* iDivUp FUNCTION */
/*******************/
int iDivUp(int a, int b) { return ((a % b) != 0) ? (a / b + 1) : (a / b); }

/********************/
/* CUDA ERROR CHECK */
/********************/
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
   if (code != cudaSuccess)
   {
      fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
      if (abort) exit(code);
   }
}

/***********************************/
/* HOST-SIZE FIELD UPDATE FUNCTION */
/***********************************/
void updateHost(double *h_ez, double* h_hy, double imp0, double qTime, const int source, const int N) {

    /* update magnetic field */
    for (int mm = 0; mm < N - 1; mm++)
        h_hy[mm] = h_hy[mm] + (h_ez[mm + 1] - h_ez[mm]) / imp0;

    /* update electric field */
    for (int mm = 1; mm < N; mm++)
        h_ez[mm] = h_ez[mm] + (h_hy[mm] - h_hy[mm - 1]) * imp0;

    /* use additive source at node 50 */
    h_ez[source] += exp(-(qTime - 30.) * (qTime - 30.) / 100.);

}

/********************************************************/
/* DEVICE-SIZE FIELD UPDATE FUNCTION - NO SHARED MEMORY */
/********************************************************/
__global__ void updateDevice_v0(double *d_ez, double* d_hy, double imp0, double qTime, const int source, const int N) {

    const int tid = threadIdx.x + blockIdx.x * blockDim.x;

    /* update magnetic field */
    if (tid < N-1) d_hy[tid] = d_hy[tid] + (d_ez[tid + 1] - d_ez[tid]) / imp0;

    __threadfence();

    /* update electric field */
    if ((tid < N)&&(tid > 0)) d_ez[tid] = d_ez[tid] + (d_hy[tid] - d_hy[tid - 1]) * imp0;

    /* use additive source at node 50 */
    if (tid == source) d_ez[tid] += exp(-(qTime - 30.) * (qTime - 30.) / 100.);

}

/**************************************************************/
/* DEVICE-SIZE MAGNETIC FIELD UPDATE FUNCTION - SHARED MEMORY */
/**************************************************************/
__global__ void updateDevice_hy(double *d_ez, double* d_hy, double imp0, double qTime, const int source, const int N) {

    const int tid = threadIdx.x + blockIdx.x * blockDim.x;

    __shared__ double hy_temp[BLOCKSIZE+1], ez_temp[BLOCKSIZE+1];

    hy_temp[threadIdx.x] = d_hy[tid];
    ez_temp[threadIdx.x] = d_ez[tid];

    if ((threadIdx.x == 0)&&((tid + BLOCKSIZE) < N)) {
        ez_temp[BLOCKSIZE] = d_ez[tid + BLOCKSIZE];
        hy_temp[BLOCKSIZE] = d_hy[tid + BLOCKSIZE];
    }

    __syncthreads();

    /* update magnetic field */
    if (tid < N-1) d_hy[tid] = hy_temp[threadIdx.x] + (ez_temp[threadIdx.x + 1] - ez_temp[threadIdx.x]) / imp0;

}

/**************************************************************/
/* DEVICE-SIZE ELECTRIC FIELD UPDATE FUNCTION - SHARED MEMORY */
/**************************************************************/
__global__ void updateDevice_ez(double *d_ez, double* d_hy, double imp0, double qTime, const int source, const int N) {

    const int tid = threadIdx.x + blockIdx.x * blockDim.x;

    __shared__ double hy_temp[BLOCKSIZE+1], ez_temp[BLOCKSIZE+1];

    hy_temp[threadIdx.x + 1] = d_hy[tid];
    ez_temp[threadIdx.x + 1] = d_ez[tid];

    if ((threadIdx.x == 0)&&(tid >= 1)) {
        ez_temp[0] = d_ez[tid - 1];
        hy_temp[0] = d_hy[tid - 1];
    }

    __syncthreads();

    /* update electric field */
    ez_temp[threadIdx.x] = ez_temp[threadIdx.x + 1] + (hy_temp[threadIdx.x + 1] - hy_temp[threadIdx.x]) * imp0;

    /* use additive source at node 50 */
    if (tid == source) ez_temp[threadIdx.x] += exp(-(qTime - 30.) * (qTime - 30.) / 100.);

    if ((tid < N)&&(tid > 0)) d_ez[tid] = ez_temp[threadIdx.x];

}

/********/
/* MAIN */
/********/
int main() {

    // --- Problem size
    const int SIZE = 10000000;

    // --- Free-space wave impedance
    double imp0 = 377.0;

    // --- Maximum number of iterations (must be less than the problem size)
    int maxTime = 100;

    // --- Source location
    int source = SIZE / 2;

    // --- Host side memory allocations and initializations
    double *h_ez = (double*)calloc(SIZE, sizeof(double));
    double *h_hy = (double*)calloc(SIZE, sizeof(double));

    // --- Device side memory allocations and initializations
    double *d_ez; gpuErrchk(cudaMalloc((void**)&d_ez, SIZE * sizeof(double)));
    double *d_hy; gpuErrchk(cudaMalloc((void**)&d_hy, SIZE * sizeof(double)));
    gpuErrchk(cudaMemset(d_ez, 0, SIZE * sizeof(double)));
    gpuErrchk(cudaMemset(d_hy, 0, SIZE * sizeof(double)));

    // --- Host side memory allocations for debugging purposes
#ifdef DEBUG
    double *h_ez_temp = (double*)calloc(SIZE, sizeof(double));
    double *h_hy_temp = (double*)calloc(SIZE, sizeof(double));
#endif

    // --- Host-side time-steppings
#ifndef DEBUG
    TimingCPU timerCPU;
    timerCPU.StartCounter();
    for (int qTime = 0; qTime < maxTime; qTime++) {
        updateHost(h_ez, h_hy, imp0, qTime, source, SIZE);
    }
    printf("CPU elapsed time = %3.3f ms\n", timerCPU.GetCounter());
#endif

    TimingGPU timerGPU;
    timerGPU.StartCounter();
    // --- Device-side time-steppings
    for (int qTime = 0; qTime < maxTime; qTime++) {

        updateDevice_v0<<<iDivUp(SIZE, BLOCKSIZE), BLOCKSIZE>>>(d_ez, d_hy, imp0, qTime, source, SIZE);
//      updateDevice_hy<<<iDivUp(SIZE, BLOCKSIZE), BLOCKSIZE>>>(d_ez, d_hy, imp0, qTime, source, SIZE);
//      updateDevice_ez<<<iDivUp(SIZE, BLOCKSIZE), BLOCKSIZE>>>(d_ez, d_hy, imp0, qTime, source, SIZE);
#ifdef DEBUG
        gpuErrchk(cudaPeekAtLastError());
        gpuErrchk(cudaDeviceSynchronize());
        gpuErrchk(cudaMemcpy(h_ez_temp, d_ez, SIZE * sizeof(double), cudaMemcpyDeviceToHost));
        gpuErrchk(cudaMemcpy(h_hy_temp, d_hy, SIZE * sizeof(double), cudaMemcpyDeviceToHost));

        updateHost(h_ez, h_hy, imp0, qTime, source, SIZE);
        for (int i=0; i<SIZE; i++) {
            printf("%f %f %f %f\n",h_ez_temp[i], h_ez[i], h_hy_temp[i], h_hy[i]);
        }
        printf("\n");
#endif
    }
    printf("GPU elapsed time = %3.3f ms\n", timerGPU.GetCounter());

    return 0;
} 
```

**计时CPU.h**

```
#ifndef __TIMINGCPU_H__
#define __TIMINGCPU_H__

#ifdef __linux__

    class TimingCPU {

        private:
            long cur_time_;

        public:

            TimingCPU();

            ~TimingCPU();

            void StartCounter();

            double GetCounter();
    };

#elif _WIN32 || _WIN64

    struct PrivateTimingCPU;

    class TimingCPU
    {
        private:
            PrivateTimingCPU *privateTimingCPU;

        public:

            TimingCPU();

            ~TimingCPU();

            void StartCounter();

            double GetCounter();

    }; // TimingCPU class

#endif

#endif 
```

**计时CPU.cpp**

```
/**************/
/* TIMING CPU */
/**************/

#include "TimingCPU.h"

#ifdef __linux__

    #include <sys/time.h>
    #include <stdio.h>

    TimingCPU::TimingCPU(): cur_time_(0) { StartCounter(); }

    TimingCPU::~TimingCPU() { }

    void TimingCPU::StartCounter()
    {
        struct timeval time;
        if(gettimeofday( &time, 0 )) return;
        cur_time_ = 1000000 * time.tv_sec + time.tv_usec;
    }

    double TimingCPU::GetCounter()
    {
        struct timeval time;
        if(gettimeofday( &time, 0 )) return -1;

        long cur_time = 1000000 * time.tv_sec + time.tv_usec;
        double sec = (cur_time - cur_time_) / 1000000.0;
        if(sec < 0) sec += 86400;
        cur_time_ = cur_time;

        return 1000.*sec;
    }

#elif _WIN32 || _WIN64
    #include <windows.h>
    #include <iostream>

    struct PrivateTimingCPU {
        double  PCFreq;
        __int64 CounterStart;
    };

    // --- Default constructor
    TimingCPU::TimingCPU() { privateTimingCPU = new PrivateTimingCPU; (*privateTimingCPU).PCFreq = 0.0; (*privateTimingCPU).CounterStart = 0; }

    // --- Default destructor
    TimingCPU::~TimingCPU() { }

    // --- Starts the timing
    void TimingCPU::StartCounter()
    {
        LARGE_INTEGER li;
        if(!QueryPerformanceFrequency(&li)) std::cout << "QueryPerformanceFrequency failed!\n";

        (*privateTimingCPU).PCFreq = double(li.QuadPart)/1000.0;

        QueryPerformanceCounter(&li);
        (*privateTimingCPU).CounterStart = li.QuadPart;
    }

    // --- Gets the timing counter in ms
    double TimingCPU::GetCounter()
    {
        LARGE_INTEGER li;
        QueryPerformanceCounter(&li);
        return double(li.QuadPart-(*privateTimingCPU).CounterStart)/(*privateTimingCPU).PCFreq;
    }
#endif 
```

**TimingGPU.cuh**

```
#ifndef __TIMING_CUH__
#define __TIMING_CUH__

/**************/
/* TIMING GPU */
/**************/

// Events are a part of CUDA API and provide a system independent way to measure execution times on CUDA devices with approximately 0.5
// microsecond precision.

struct PrivateTimingGPU;

class TimingGPU
{
    private:
        PrivateTimingGPU *privateTimingGPU;

    public:

        TimingGPU();

        ~TimingGPU();

        void StartCounter();
        void StartCounterFlags();

        float GetCounter();

}; // TimingCPU class

#endif 
```

**时序GPU.cu**

```
/**************/
/* TIMING GPU */
/**************/

#include "TimingGPU.cuh"

#include <cuda.h>
#include <cuda_runtime.h>

struct PrivateTimingGPU {
    cudaEvent_t     start;
    cudaEvent_t     stop;
};

// default constructor
TimingGPU::TimingGPU() { privateTimingGPU = new PrivateTimingGPU; }

// default destructor
TimingGPU::~TimingGPU() { }

void TimingGPU::StartCounter()
{
    cudaEventCreate(&((*privateTimingGPU).start));
    cudaEventCreate(&((*privateTimingGPU).stop));
    cudaEventRecord((*privateTimingGPU).start,0);
}

void TimingGPU::StartCounterFlags()
{
    int eventflags = cudaEventBlockingSync;

    cudaEventCreateWithFlags(&((*privateTimingGPU).start),eventflags);
    cudaEventCreateWithFlags(&((*privateTimingGPU).stop),eventflags);
    cudaEventRecord((*privateTimingGPU).start,0);
}

// Gets the counter in ms
float TimingGPU::GetCounter()
{
    float   time;
    cudaEventRecord((*privateTimingGPU).stop, 0);
    cudaEventSynchronize((*privateTimingGPU).stop);
    cudaEventElapsedTime(&time,(*privateTimingGPU).start,(*privateTimingGPU).stop);
    return time;
} 
```

# iphone - 我正在重新制作一个小应用程序以更好地在 iOS 上使用 MVC 模式

> ID：15108815
> 
> 赞同：2
> 
> 时间：2013-02-27T09:44:29.847
> 
> 标签：iphone, ios, objective-c, model-view-controller

我知道有类似的问题，我已经阅读了很多，但我仍然有一些问题。

我有一个我之前制作的应用程序，没有为 MVC 设计它。结果，我的控制器中有很多逻辑。我现在的问题基本上是；什么去哪里？

这基本上是我的理解；

**视图**- 视图仅显示视图及其所有信息。它们接收用户触发的事件并将它们传递给`controller`. 这是 a 唯一做的事情`view`。

**控制器**- 控制器从其视图接收事件并决定如何处理它。如果它需要任何数据，它会询问它的`model`，它会返回所需的数据。然后`controller`将数据传递给`view`，由它呈现。`controller`不会对数据进行任何操作，当从`Model`. 控制器仅传递消息并将信息放入正确的元素中`view`，它们不包含任何业务逻辑。

**Models** -`model`负责处理与其相关的所有数据`controller`。它不直接与数据库对话，而是通过数据存储/dbhandler/etc。在这里操作数据的所有逻辑都发生了，当数据准备好呈现时，它被传递给`controller`. `loadStuff`和之类的方法`saveStuff`位于此处。

这是在 iPhone 中划分职责的正确方法吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:55:07.100

**根据[Cocoa 核心能力的模型-视图-控制器](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MVC.html)**

![MVC](../Images/d57079804fcb928c9df88c6ac5c99ab3.png)

模型-视图-控制器 (MVC) 设计模式为应用程序中的对象分配三个角色之一：模型、视图或控制器。该模式不仅定义了对象在应用程序中扮演的角色，还定义了对象相互通信的方式。这三种类型的对象中的每一种都通过抽象边界与其他类型的对象分开，并通过这些边界与其他类型的对象进行通信。应用程序中某种 MVC 类型的对象的集合有时被称为一个层——例如，模型层。

MVC 是 Cocoa 应用程序良好设计的核心。采用这种模式的好处很多。这些应用程序中的许多对象往往更易于重用，并且它们的接口往往被更好地定义。具有 MVC 设计的应用程序也比其他应用程序更容易扩展。此外，许多 Cocoa 技术和架构基于 MVC，并要求您的自定义对象扮演 MVC 角色之一。

**模型对象**

模型对象封装特定于应用程序的数据，并定义操作和处理该数据的逻辑和计算。例如，模型对象可能代表游戏中的角色或通讯录中的联系人。模型对象可以与其他模型对象具有一对一和一对多的关系，因此有时应用程序的模型层实际上是一个或多个对象图。在数据加载到应用程序后，作为应用程序持久状态一部分的大部分数据（无论该持久状态存储在文件还是数据库中）都应该驻留在模型对象中。因为模型对象代表与特定问题域相关的知识和专业知识，所以它们可以在类似的问题域中重用。理想情况下，

**通信：**视图层中创建或修改数据的用户操作通过控制器对象进行通信，并导致模型对象的创建或更新。当模型对象发生变化时（例如，通过网络连接接收到新数据），它会通知控制器对象，控制器对象会更新相应的视图对象。

**查看对象**

视图对象是应用程序中用户可以看到的对象。视图对象知道如何绘制自己并且可以响应用户操作。视图对象的一个​​主要目的是显示来自应用程序模型对象的数据并允许编辑该数据。尽管如此，视图对象通常与 MVC 应用程序中的模型对象分离。

因为您通常重用和重新配置它们，所以视图对象提供了应用程序之间的一致性。UIKit 和 AppKit 框架都提供了视图类的集合，而 Interface Builder 在其库中提供了数十个视图对象。

**通信：**视图对象通过应用程序的控制器对象了解模型数据的变化，并通过控制器对象将用户发起的更改（例如，在文本字段中输入的文本）传达给应用程序的模型对象。

**控制器对象**

控制器对象充当一个或多个应用程序的视图对象和一个或多个其模型对象之间的中介。因此，控制器对象是一个管道，视图对象通过它了解模型对象的变化，反之亦然。控制器对象还可以为应用程序执行设置和协调任务，并管理其他对象的生命周期。

**通信：**控制器对象解释用户在视图对象中所做的操作，并将新的或更改的数据传达给模型层。当模型对象发生变化时，控制器对象会将新的模型数据传递给视图对象，以便它们可以显示它。

# android - NFC 标签重定向到从 Play 商店下载应用程序

> ID：15108831
> 
> 赞同：1
> 
> 时间：2013-02-27T09:45:28.813
> 
> 标签：android, nfc, ndef

我在 android 中开发了一个 NFC 应用程序。如果我愿意，我该怎么做，一旦用户扫描标签，如果用户没有安装我的应用程序，标签会将用户重定向到 Playstore 以下载我的应用程序。如果用户已经安装了我的应用程序，它应该打开应用程序而不是重定向到 Play 商店。任何建议或链接都​​非常感谢。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:27:15.977

[此处](http://www.creativebloq.com/android/getting-started-nfc-android-5126313)提供了实现您请求的功能的应用程序演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:00:39.030

[在http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#aar](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#aar)查看 Android 应用程序记录

# php - Doctrine2：ReflectionException' 带有消息'Class Comment does not exist in ...'，同时尝试在 codeigniter 控制器中使用学说模型

> ID：15108835
> 
> 赞同：1
> 
> 时间：2013-02-27T09:45:35.313
> 
> 标签：php, codeigniter, doctrine-orm, doctrine, autoload

我在 CodeIgniter 控制器中尝试使用 Doctrine 模型时收到“消息：class_parents()：类注释不存在且无法加载”。

这是完整的堆栈跟踪致命错误：在 C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\Common\Persistence\Mapping\RuntimeReflectionService.php 中未捕获异常 'ReflectionException' 并带有消息 'Class Comment does not exist' :73 堆栈跟踪：#0 C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\Common\Persistence\Mapping\RuntimeReflectionService.php(73): ReflectionClass->__construct('Comment') #1 C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\Mapping\ClassMetadataInfo.php(769): Doctrine\Common\Persistence\Mapping\RuntimeReflectionService->getClass('Comment') #2 C :\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\Mapping\ClassMetadataFactory.php(591): Doctrine\ORM\Mapping\ClassMetadataInfo->initializeReflection(Object(Doctrine\Common\Persistence\Mapping\RuntimeReflectionService)) #3 C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\Mapping\ClassMetadataFactory.php(272): Doctrine\ORM \Mapping\ClassMetadataFactory->initializ in C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\Common\Persistence\Mapping\RuntimeReflectionService.php 在第 73 行

这是我在 /application/models/Entities/Comment.php 中的模型

```
 <?php

namespace Entities;

use Doctrine\ORM\Mapping as ORM;

/**
 * Entities\Comment
 */
class Comment
{
    /**
     * @var integer $id
     */
    private $id;

    /**
     * @var integer $parentid
     */
    private $parentid;

    /**
     * @var integer $isactive
     */
    private $isactive;

    /**
     * @var integer $isremoved
     */
    private $isremoved;

    /**
     * @var datetime $removaldate
     */
    private $removaldate;

    /**
     * @var string $user_name
     */
    private $user_name;

    /**
     * @var string $user_email
     */
    private $user_email;

    /**
     * @var string $user_avatar
     */
    private $user_avatar;

    /**
     * @var text $comment
     */
    private $comment;

    /**
     * @var datetime $creationdate
     */
    private $creationdate;

    /**
     * @var integer $rating
     */
    private $rating;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set parentid
     *
     * @param integer $parentid
     * @return Comment
     */
    public function setParentid($parentid)
    {
        $this->parentid = $parentid;
        return $this;
    }

    /**
     * Get parentid
     *
     * @return integer 
     */
    public function getParentid()
    {
        return $this->parentid;
    }

    /**
     * Set isactive
     *
     * @param integer $isactive
     * @return Comment
     */
    public function setIsactive($isactive)
    {
        $this->isactive = $isactive;
        return $this;
    }

    /**
     * Get isactive
     *
     * @return integer 
     */
    public function getIsactive()
    {
        return $this->isactive;
    }

    /**
     * Set isremoved
     *
     * @param integer $isremoved
     * @return Comment
     */
    public function setIsremoved($isremoved)
    {
        $this->isremoved = $isremoved;
        return $this;
    }

    /**
     * Get isremoved
     *
     * @return integer 
     */
    public function getIsremoved()
    {
        return $this->isremoved;
    }

    /**
     * Set removaldate
     *
     * @param datetime $removaldate
     * @return Comment
     */
    public function setRemovaldate($removaldate)
    {
        $this->removaldate = $removaldate;
        return $this;
    }

    /**
     * Get removaldate
     *
     * @return datetime 
     */
    public function getRemovaldate()
    {
        return $this->removaldate;
    }

    /**
     * Set user_name
     *
     * @param string $userName
     * @return Comment
     */
    public function setUserName($userName)
    {
        $this->user_name = $userName;
        return $this;
    }

    /**
     * Get user_name
     *
     * @return string 
     */
    public function getUserName()
    {
        return $this->user_name;
    }

    /**
     * Set user_email
     *
     * @param string $userEmail
     * @return Comment
     */
    public function setUserEmail($userEmail)
    {
        $this->user_email = $userEmail;
        return $this;
    }

    /**
     * Get user_email
     *
     * @return string 
     */
    public function getUserEmail()
    {
        return $this->user_email;
    }

    /**
     * Set user_avatar
     *
     * @param string $userAvatar
     * @return Comment
     */
    public function setUserAvatar($userAvatar)
    {
        $this->user_avatar = $userAvatar;
        return $this;
    }

    /**
     * Get user_avatar
     *
     * @return string 
     */
    public function getUserAvatar()
    {
        return $this->user_avatar;
    }

    /**
     * Set comment
     *
     * @param text $comment
     * @return Comment
     */
    public function setComment($comment)
    {
        $this->comment = $comment;
        return $this;
    }

    /**
     * Get comment
     *
     * @return text 
     */
    public function getComment()
    {
        return $this->comment;
    }

    /**
     * Set creationdate
     *
     * @param datetime $creationdate
     * @return Comment
     */
    public function setCreationdate($creationdate)
    {
        $this->creationdate = $creationdate;
        return $this;
    }

    /**
     * Get creationdate
     *
     * @return datetime 
     */
    public function getCreationdate()
    {
        return $this->creationdate;
    }

    /**
     * Set rating
     *
     * @param integer $rating
     * @return Comment
     */
    public function setRating($rating)
    {
        $this->rating = $rating;
        return $this;
    }

    /**
     * Get rating
     *
     * @return integer 
     */
    public function getRating()
    {
        return $this->rating;
    }
} 
```

这是控制器的代码

```
<?php
require APPPATH . 'models\Entities\Comment.php';

class CommentController extends CI_Controller{
    var $em;
    function __construct() {
        parent::__construct();
        $this->em = $this->doctrine->em;
    }
    public function index()
    {
        $comment = $this->em->find('Comment', 1);
        echo $comment->user_name . '<br/>' . $comment->comment;
    }
} 
```

这是教义.php

```
<?php

class Doctrine
{
    // the Doctrine entity manager
    public $em = null;

    public function __construct()
    {
        // include our CodeIgniter application's database configuration
        require_once APPPATH.'config/database.php';

        // include Doctrine's fancy ClassLoader class
        require_once APPPATH.'libraries/Doctrine/Common/ClassLoader.php';

        // load the Doctrine classes
        $doctrineClassLoader = new \Doctrine\Common\ClassLoader('Doctrine', APPPATH.'libraries');
        $doctrineClassLoader->register();

        // load Symfony2 helpers
        // Don't be alarmed, this is necessary for YAML mapping files
        $symfonyClassLoader = new \Doctrine\Common\ClassLoader('Symfony', APPPATH.'libraries/Doctrine');
        $symfonyClassLoader->register();

        // load the entities
        $entityClassLoader = new \Doctrine\Common\ClassLoader('Entities', APPPATH.'models');
        $entityClassLoader->register();

        // load the proxy entities
        $proxyClassLoader = new \Doctrine\Common\ClassLoader('Proxies', APPPATH.'models');
        $proxyClassLoader->register();

        // set up the configuration
        $config = new \Doctrine\ORM\Configuration;

        if(ENVIRONMENT == 'development')
            // set up simple array caching for development mode
            $cache = new \Doctrine\Common\Cache\ArrayCache;
        else
            // set up caching with APC for production mode
            $cache = new \Doctrine\Common\Cache\ApcCache;
        $config->setMetadataCacheImpl($cache);
        $config->setQueryCacheImpl($cache);

        // set up proxy configuration
        $config->setProxyDir(APPPATH.'models/Proxies');
        $config->setProxyNamespace('Proxies');

        // auto-generate proxy classes if we are in development mode
        $config->setAutoGenerateProxyClasses(ENVIRONMENT == 'development');

        // set up annotation driver
        $yamlDriver = new \Doctrine\ORM\Mapping\Driver\YamlDriver(APPPATH.'models\Mappings');
        $config->setMetadataDriverImpl($yamlDriver);

        // Database connection information
        $connectionOptions = array(
            'driver' => 'pdo_mysql',
            'user' => $db['default']['username'],
            'password' => $db['default']['password'],
            'host' => $db['default']['hostname'],
            'dbname' => $db['default']['database']
        );

        // create the EntityManager
        $em = \Doctrine\ORM\EntityManager::create($connectionOptions, $config);

        // store it as a member, for use in our CodeIgniter controllers.
        $this->em = $em;
    }
} 
```

不知道出了什么问题。我是 php 和它的技术的新手。请帮忙。任何有用的想法将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T10:00:34.803

在字符串中，您始终使用[完全限定的类名](http://php.net/manual/en/language.namespaces.rules.php)。

这条线必须从

```
$comment = $this->em->find('Comment', 1); 
```

到

```
$comment = $this->em->find('Entities\Comment', 1); 
```

# javascript - 如何通过ajax更新某一区域的数据？

> ID：15108837
> 
> 赞同：1
> 
> 时间：2013-02-27T09:45:36.733
> 
> 标签：javascript, ajax, jquery, cakephp

我想在四个链接的一个区域上传数据，当我单击链接1时，它将加载特定区域的数据，当我单击链接2时，它将在第一个链接打开的同一区域加载页面，怎么能我这样做？

```
 <div class="container">
    <div class="span-5">
        <ul>
            <li><?php echo $this->Manager->link('Ecommerce',array('controller'=>'associations','action'=>"view_report"),array('id'=> 'home','class'=>'nav'));?></li>
            <li><a href="#" id="home" class="nav">Home</a></li>
            <li><a href="#" id="about" class="nav">About</a></li>
            <li><a href="#" id="contact" class="nav">Contact Us</a></li>
        </ul>
    </div>
</div> 
```

我想从电子商务链接打开的数据是 int newfile.ctp 这样的

```
 <?php v_start($this);?>

<h1><?php echo __l('View Report');?></h1>

<div class="firsttable">
    <table width="100%" border="0" cellspacing="0" cellpadding="2">
        <thead>
          <tr class="heading">
            <td><?php  echo __l('Financials');?></td>
            <td><?php  echo __l('Payment Methods');?></td>
            <td><?php  echo __l('By Credit Card');?></td>
          </tr>
        </thead>
        <tbody>  

          <tr>
            <td>
                <?php 
                    echo __l("YTD \t ");
                    $ytd_total=0;
                    foreach ($YTD as $yearData)
                    {

                        $ytd_total +=$yearData['AssocPaymentDetail']['membership_fee'] - $yearData['AssociationDiscount']['amount'];

                    }
                    echo  $ytd_total."<br />";

                ?>
                <?php

                echo __l("Last 5days ");
                 $fda_total= 0;
                 foreach ($fiveDays as $fiveDaysData)
                    {

                        $fda_total += $fiveDaysData['AssocPaymentDetail']['membership_fee'] - $fiveDaysData['AssociationDiscount']['amount'];

                    }
                    echo $fda_total ."<br />";
                 ?> 
            </td>
            <td><?php  echo __l('creditcard');?>  <?php echo __l($ccSum) ?> </td>
            <td>
                <?php
        //       debug($paymentRecord);
        //      debug($ccIndex);
                    foreach($paymentRecord as $data =>$key){
                        foreach($ccIndex as $index){
                            if($data== $index)
                            {
                                echo "$data \t\t\t";
                                if(is_array($key))
                                    echo array_sum($key);
                                else 
                                    echo "\t\t $key";

                            }

                            echo "<br/>";
                        }   

                    }

                ?>
            </td>
          </tr>
        </tbody>  
    </table>
</div> 
```

请帮我这样做，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:46:18.377

好吧，我没有使用任何额外的 jquery 就做到了

```
<div class="container">
 <div class="span-5">
    <ul>
        <li><?php echo $this->Manager->link('Ecommerce',array('controller'=>'associations','action'=>"view_report"),array('update'=> '#testDiv'));?>li>
        <li><a href="#" id="home" class="nav">Home</a></li>
        <li><a href="#" id="about" class="nav">About</a></li>
        <li><a href="#" id="contact" class="nav">Contact Us</a></li>
    </ul>
   </div>
   </div>
 <div id = 'testdiv'></div> 
```

cake 将使用 cake 的属性更新，自行更新区域。非常感谢回答这个问题的人，无论答案是对还是错。谢谢大家

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:50:10.910

将链接放入 href 属性中，然后通过 jquery 处理它们，如下所示

```
$('a.nav').click(function(e){
 e.preventDefault();
 $.get($(this).attr('href'), function(data){
  $cont = $('[CONTAINERS SELECTOR]');
  $cont.html(data);
 })
}) 
```

评论后编辑

将您的 html 更改为这样的内容

```
<div class="container">
<div class="innerCont"></div>
    <div class="span-5">
        <ul>
            <li><?php echo $this->Manager->link('Ecommerce',array('controller'=>'associations','action'=>"view_report"),array('id'=> 'home','class'=>'nav'));?></li>
            <li><a href="#" id="home" class="nav">Home</a></li>
            <li><a href="#" id="about" class="nav">About</a></li>
            <li><a href="#" id="contact" class="nav">Contact Us</a></li>
        </ul>
    </div> 
```

并将内容选择器放到`div.innerCont`

```
$cont = $('div.innerCont'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:56:27.080

你没有在你的 html 中指定区域，这里我假设它就在你的 ul 节点之后

```
$uls = $("ul.span5"); // select all page ul.span5
$uls.each(function(){ // for all ul.span5 node
    $ul = $(this); // current ul to work
    $region = $("<div/>").insertAfter($ul); // dynamic create and insert the region, as a div
    $links = $ul.find("a.nav"); // select all sub links
    $links.click(function(e){ // click on links
        $a = $(this); // current link
        var href = $a.attr("href"); // i assume you work on the href
        $region.load("myajax.php",{href:href},function(data){ // do ajax and load it in the common region
            // here load is done, do next step here
        });
        e.preventDefault(); // no real click please
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T10:04:29.313

您可以将单个请求处理程序附加到具有`nav`类名的所有链接，然后将输出加载到容器

```
$(".nav").on('click', function() {
    $("#loadingdiv").load("linktoload.php"); // or other 

}); 
```

# php - 将 mysql_query 转换为 PDO

> ID：15108841
> 
> 赞同：2
> 
> 时间：2013-02-27T09:46:00.137
> 
> 标签：php, mysql, pdo

我正在尝试将所有查询重写为 PDO 格式。目前我正在尝试重写这个函数，但我似乎无法让它工作。

mysql_query 函数

```
 function checkLogin() {

    $this->sQuery = "SELECT * FROM users 
          WHERE gebruikersnaam='" . mysql_real_escape_string($_POST['gebruikersnaam']) . "'
          AND wachtwoord = '" . sha1($_POST['wachtwoord']) . "'";

    $this->rResult = mysql_query($this->sQuery)
            or die("Er is iets misgegaan " . mysql_error());

    if (mysql_num_rows($this->rResult) == 1) {  // login name was found            
        $this->aRow = mysql_fetch_assoc($this->rResult);
        $_SESSION['gebruiker'] = $this->aRow['voornaam'];

        header("location: dashboard.php");
    }
} 
```

这就是我对 PDO 的了解：

```
 function checkLoginPDO(){
    $connect = new PDO(host, username, password); // Database Connectie maken (De host, username & password zijn in de config.php aan te passen)
    $sql = "SELECT * FROM users 
          WHERE gebruikersnaam='" . mysql_real_escape_string($_POST['gebruikersnaam']) . "'
          AND wachtwoord = '" . sha1($_POST['wachtwoord']) . "'"; 
    $value = $connect->prepare($sql); //Een variabele aanmaken die de PDO vast houdt. Vervolgens word de code voorbereid door de prepare functie
    $value->execute(); 
    if(mysql_num_rows($value->fetch()) == 1){
        $_SESSION['gebruiker'] = $row['voornaam'];
        header("location: dashboard.php");
    }
} 
```

我在做什么错/忘记了？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:54:38.643

它应该是这样的：

```
function checkLoginPDO(){
    $connect = new PDO(host, username, password); // Database Connectie maken (De host, username & password zijn in de config.php aan te passen)
    // define sql query string with special placeholders in the form of ?
    $sql = "SELECT * FROM users 
      WHERE gebruikersnaam=?
      AND wachtwoord =?";
    // prepare statement based on sql query string
    $statement = $connect->prepare($sql);
    // bind first question mark with value from $_POST, first question mark will be replaced with that value
    $statement->bindParam(1, $_POST['gebruikersnaam']);
    // do the same for second question mark
    $statement->bindParam(2, sha1($_POST['wachtwoord']));
    // execute this prepared statement with binded values
    $statement->execute();
    // fetch row from the result in the form of associated array
    if(($row = $statement->fetch(PDO::FETCH_ASSOC))){
        $_SESSION['gebruiker'] = $row['voornaam'];
        header("location: dashboard.php");
    }
    // free statement memory
    $statement = null;
} 
```

注意：代码未经测试。

编辑，添加解释：使用 PDO 时，您应该使用它处理查询和数据库的方式。使用任何 mysql_* 函数都不是执行此操作的最佳方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:55:26.623

*   首先，确定您想要哪种类型的错误处理。PDO 默认为`PDO::ERRMODE_SILENT`这意味着您不会收到任何错误。我建议您使用`PDO::ERRMODE_EXCEPTION`这意味着您需要使用`try { ... } catch() { ... }`代码周围的块。

*   其次，在使用 PDO 时，不能使用`mysql_*`函数。所以使用`mysql_real_escape_string`是不正确的。此外，因为您使用的是准备好的语句，所以根本不需要任何 SQL 注入保护。但是你需要使用[param binding](http://php.net/manual/en/pdostatement.bindparam.php)。

*   7号线附近还有一些`mysql_query`...

*   PDO 没有内置`mysql_num_rows`功能。您应该`COUNT(*)`为此在查询中添加一条语句。另请参阅[此答案](https://stackoverflow.com/a/883382/1149495)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:58:11.900

```
function checkLoginPDO(){
$connect = new PDO(host, username, password); // Database Connectie maken (De host, username & password zijn in de config.php aan te passen)
$sql = "SELECT * FROM users 
      WHERE gebruikersnaam=:gebruikersnaam
      AND wachtwoord = :wachtwoord"; 
$value = $connect->prepare($sql);
$value->bind(':gebruikersnaam',$_POST['gebruikersnaam']);
$value->bind(':wachtwoord',sha1($_POST['wachtwoord']));
$value->execute();
$data = $value->fetchAll();
if(count($data) > 0){
    $_SESSION['gebruiker'] = $data[0]['voornaam'];
    header("location: dashboard.php");
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:22:18.967

登录功能现在可以创造奇迹！多谢你们！我刚刚完成了将文件名写入数据库的图像上传脚本。它有效，但它对 sql-injection 之类的东西安全吗？

我目前正在从事我的最后一个研究项目，其中安全性是一个大问题。如果我能够关闭一个通用的安全 CMS，我将获得程序员学位 :)

这是功能：

```
function uploadImage() {
    $dir = $_SERVER['DOCUMENT_ROOT'] . 'pvb/upload/';
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif")
            || ($_FILES["file"]["type"] == "image/jpeg")
            || ($_FILES["file"]["type"] == "image/png")
            || ($_FILES["file"]["type"] == "image/pjpeg"))
            && ($_FILES["file"]["size"] < 2000000)
            && in_array($extension, $allowedExts)) {
        if ($_FILES["file"]["error"] > 0) {
            echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
        } else {
            if (file_exists($dir . $_FILES["file"]["name"])) {
                echo $_FILES["file"]["name"] . " already exists. ";
            } else {
                move_uploaded_file($_FILES["file"]["tmp_name"], $dir . $_FILES["file"]["name"]);
                $this->createThumbs($dir, $dir . "thumbs/", 100);

                $connect = new PDO(host, username, password); // Database Connectie maken (De host, username & password zijn in de config.php aan te passen)
                $sql = "INSERT INTO afbeeldingen (img_naam) VALUES (:naam)";
                $value = $connect->prepare($sql);
                $value->bindValue(":naam", $_FILES['file']['name'], PDO::PARAM_STR);
                $value->execute();
                $connect = null;
            }
        }
    } else {
        echo "Invalid file";
    }
} 
```

# android - Listview中的字母索引..忽略部分索引

> ID：15108845
> 
> 赞同：4
> 
> 时间：2013-02-27T09:46:05.347
> 
> 标签：android, android-listview, listviewitem

我已经成功地实现了如下使用的索引。我知道节标题，所以需要。
[http://spinettaro.blogspot.in/2011/11/android-snippet-code-android-listview.html](http://spinettaro.blogspot.in/2011/11/android-snippet-code-android-listview.html)

![在此处输入图像描述](../Images/75e195964fdd582de16202d763345158.png)

我的要求是在 Android Jellybean 联系人列表中对其进行自定义，如下所示
![在此处输入图像描述](../Images/783cd72e09af947812a1be84a196290d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:55:13.807

这[是你想要的](http://eshyu.wordpress.com/2010/08/15/cursoradapter-with-alphabet-indexed-section-headers/)吗？我个人发现本教程非常有帮助！你也可以试试[这个](http://android.cyrilmottier.com/?p=440)。

***编辑***：
这个[GitHub 项目](https://github.com/ragunathjawahar/simple-section-adapter)也可以帮助您入门。

对于突出显示，你可以试试[这个](http://www.anddev.org/tutusing_alphabetindexer_for_fastscrolling_listview-t10282.html)。我没有尝试过，但它可能值得一试。

# android - 原生 Android VS Flex 移动文件系统速度

> ID：15108856
> 
> 赞同：0
> 
> 时间：2013-02-27T09:46:52.397
> 
> 标签：android, actionscript-3, apache-flex, benchmarking

因此，我正在为 android 构建几个基准应用程序，以评估不同的技术（`Flex`、、、`Native`等`Html5`）并根据我的方法确定哪个是最好的。

我遇到的问题是，虽然 Native 应用程序在简单的算术测试中是无与伦比的，但在读取或写入文件时却不一样。

更具体地说，该`Native`应用程序从 1 到 10m 的计数时间`Flex`为 92 毫秒，而相同的动作需要 13 秒的平均时间。

在阅读 10000 行文本时，该`Native`应用程序在`Flex`需要 450 时花费了 800 毫秒，而在编写本机应用程序时花费了 3560 毫秒，而 flex 仅花费了 860 毫秒。

第一次测试的唯一区别是本机应用程序在`flex`我使用`Filestream`. 这会导致这种不一致吗？有什么想法可以从这里开始吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:57:08.663

I am using java for my native. so here is my source:

Flex:

```
 loadingLbl.visible=true;
            var startTime:int = getTimer();     
            te1.text=""+startTime;
            var file:File = File.desktopDirectory.resolvePath("samples/test.txt");
            var pathFile:String = file.nativePath;
            var stream:FileStream = new FileStream()
            stream.open(file, FileMode.WRITE);

            for(i=0; i<=100000; i++)
            {
                //list.dataProvider.addItem(""+i);
                stream.writeUTFBytes("word"+i+"\n");                    
            }

            stream.close();
            results.text=""+file.nativePath;
            var currentTime:int = getTimer();
            var timeRunning:int = (currentTime - startTime);

            te0.text=""+currentTime;
            timerLabel.text= "Total time: "+timeRunning+" ms";
            loadingLbl.visible=false; 
```

Android Version:

{

```
 String temp="";
    TextView time = (TextView)findViewById(R.id.timerLbl);
    long start=System.nanoTime();

    File sdcard = Environment.getExternalStorageDirectory();

    //Get the text file
    File myfile = new File(sdcard,"myFile.txt");

    try {

        BufferedWriter writer = new BufferedWriter(new FileWriter(myfile));

        for(int i=0;i<100000;i++)
        {
            temp="word"+i;
            writer.write(temp);
            writer.newLine();
        }

        writer.flush();
        writer.close();
    } catch (FileNotFoundException e) {
        // handle exception
    } catch (IOException e) {
        // handle exception
    }
    TextView tv = (TextView)findViewById(R.id.result);

    //Set the text
    tv.setText("Last word was: "+temp);
    long end=System.nanoTime();
    time.setText("Took: " + ((end - start) / 1000000+"ms"));

} 
```

Can the difference of using bufferwriter be the source of getting different results?

# linux - install4j 保留布局权限

> ID：15108859
> 
> 赞同：1
> 
> 时间：2013-02-27T09:47:11.000
> 
> 标签：linux, install4j

有没有办法保留布局中已经设置的文件权限？我知道我可以在安装程序中为文件夹和文件设置默认权限，但这适用于全局，不是我想要的。

我想让特定的文件具有特定的权限。

# jquery - 使用来自 php 脚本的数据显示 Flot 条形图

> ID：15108864
> 
> 赞同：1
> 
> 时间：2013-02-27T09:47:18.057
> 
> 标签：jquery, plot, flot, bar-chart

我在正确显示这个 flot 条形图时遇到了一些麻烦，到目前为止，flot 文档还不能帮助我。我将首先提供上下文，然后解释我的问题是什么：

*   下面是提供数据的 php 脚本（我只提供了基本的代码行）：

    ```
    $sql = "select unix_timestamp(date(Date_Found))*1000 as day, count(Virus_Name) as nb from machine_virus_info where Virus_name!='NULL' group by unix_timestamp(date(Date_Found))*1000;";
    $result = mysql_query($sql);

    while ($row = mysql_fetch_array($result, MYSQL_ASSOC))               
    {
            $array[] = array ($row['day'], $row['nb']);

            #when echoed the array data looks like this using just date  date():
            #[["20130226000","2"],["20130227000","1"]]
    }

    echo json_encode( $array ); 
    ```

*   以下是我的 html 中的 JS：

```
<script  id="virus_scan" language="javascript" type="text/javascript">
$(function()
    {
        var options = {
            series:
            {
                lines:  { show: false },
                points: { show: false }, 
                bars:
                {
                    show: true,
                    lineWidth: 1,
                    fill: 1,
                    fillColor: null,
                    align: "left",
                    barWidth: 24 * 60 * 60 * 1000,
                    horizontal: false
                }
            },
            xaxis:  { mode: "time" ,timeformat: "%y/%m/%d" },
            legend: { position:"nw" }
        };

        $.getJSON("php_scripts/virus_scan.php",
            function(data)
                {
                    $.plot($("#virus_scan"),data,options);
                }
            );
    }
);
</script> 
```

*   鉴于上面的信息，这是我得到的条形图，使用 unix_timestamp(date())： ![注意：注意关闭的时间。 这是使用 unix_timestamp(date())](../Images/3a2d19d1323b2f5e0b5ea219d6801b57.png)

注意：当我们在使用 unix_timestamp(date(date)) 时回显 json_encode($array) 时，数组打印如下：

```
[["1361833200000","2"],["1361919600000","1"]] 
```

*   这是我只使用 date() 而不是 unix_timestamp(date()) 时得到的条形图： ![仅使用日期（）](../Images/e47313333c772e9025a65b85089f694b.png)

注意：当我们仅使用 date(date) 回显 json_encode($array) 时，数组打印如下：

```
[["20130226000","2"],["20130227000","1"]] 
```

# 理念：

*   我想在 x 轴上正确显示日期
*   我想在 y 轴上显示 nb 的最大值

*   下面的例子： ![在此处输入图像描述](../Images/3b27add2e27ef514ae6a2900c45f8dbf.png)

*   我的代码基于此条形图的代码，但显然结果不一样。

如果有人可以分享一些可能有助于我更好地理解并确定问题的信息，因为我不确定问题是来自 php 处理数据的方式还是条形图配置。

谢谢你，sSmacKk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:47:33.667

不要提供点数组，而是使用系列对象数组，如下所示：

```
[{
    data: [[timestamp, value], ...]
    label: "A"
}, {
    data: [[timestamp, value], ...]
    label: "B"
] 
```

请参阅文档的[数据格式](https://github.com/flot/flot/blob/master/API.md#data-format)部分，向下几段。

您还需要确保您的时间戳和值是整数，而不是示例中的字符串。

最后，您的时间戳必须是 JavaScript (UNIX * 1000) 时间戳；您仅使用“日期”的尝试肯定行不通。

# ios - 加载图像需要时间

> ID：15108868
> 
> 赞同：1
> 
> 时间：2013-02-27T09:47:24.547
> 
> 标签：ios, ios5, ios6, ios4, ios-simulator

我正在将图像从互联网加载到我的 TableView 单元格。

但是将其加载到 TableView 需要时间。

我的一位朋友建议使用线程，但我不知道它在 iOS 和目标 C 中如何工作。

谁能告诉我如何使用线程或类似线程的概念来加速进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:50:11.397

做这个教程：[http ://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

将回答您的问题，并且您可以了解线程和 Grand Central Dispatch (GCD)。

和你一样的场景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:52:45.657

我认为你需要使用 [https://github.com/nicklockwood/AsyncImageView](https://github.com/nicklockwood/AsyncImageView)。此实用程序可帮助您异步加载图像。

另请参阅演示示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:52:16.093

使用惰性图像下载技术。这样可以保证先显示可用的内容，然后随着时间的推移慢慢获取不可用的数据！！。但要小心，如果您的单元格是可重复使用的，那么旧图像将在那里显示。所以我会推荐一个占位符图像，直到原始图像准备好显示。

[延迟图像加载](https://stackoverflow.com/questions/9150275/ios-5-arc-lazy-image-loading-library)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T05:49:27.037

**问题**

这里的问题是图像尺寸很大，因此下载需要更多时间，因此在主线程中运行时会导致 UI 性能阻塞。

**解决方案**

实际上解决方案是异步下载图像（在单独的线程中），以便在主线程中运行的 UI 不会被阻塞

好吧，有一些不错的图书馆可以为您完成任务。只需进入并享受

1.  [异步图像视图](https://github.com/nicklockwood/AsyncImageView)
2.  [SDWeb图像视图](https://github.com/DavidBoyes/SDWebImageView-Example)
3.  [imageview 的AFNetworking](https://github.com/AFNetworking/AFNetworking)类扩展（如果您使用的是 AF，这是一个不错的选择）

# c++-cli - 如何找到枚举数的结束位置？

> ID：15108870
> 
> 赞同：0
> 
> 时间：2013-02-27T09:47:31.480
> 
> 标签：c++-cli

如何找到枚举数的结束位置？对于这个枚举器，我在文档中没有看到任何 atEnd 方法。

```
SortedSet<Button ^>::Enumerator^ enumer = btnSet->GetEnumerator();
enumer->atEnd(); 
```

我的错误

```
error 'atEnd' : is not a member of 'System::Collections::Generic::SortedSet<T>::Enumerator' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:55:34.720

您是否打算像`while (enumer != btnSet->end())`许多 C++ 迭代器一样编写类似的循环？

您可以通过检查 的返回值来检查枚举器是否尚未结束，[`MoveNext()`](http://msdn.microsoft.com/en-us/library/dd321013.aspx)因此循环将是这样的：

```
SortedSet<Button^>::Enumerator^  enumer = btnSet->GetEnumerator();
while (enumer->MoveNext()) {
    Button^ btn = enumer->Current;
    // do stuff 
} 
```

您还可以使用循环遍历集合[`for each`](http://msdn.microsoft.com/en-us/library/ms177202%28VS.80%29.aspx)，这看起来更简洁：

```
for each (Button^ btn in btnSet) {
    // do stuff
} 
```

# c# - 使用拆分函数创建二维数组列表并在asp.net c#中绑定到gridview

> ID：15108872
> 
> 赞同：2
> 
> 时间：2013-02-27T09:47:33.307
> 
> 标签：c#, asp.net, gridview

我有两个包含 id 列表和相应值的字符串。

我想将它们添加到 gridview 中，就像我们有带有 id 和适当值的表一样。

我已经尝试过这个只有“id”下面的代码只适用于“id”

```
 string id = "1,2,3,4,5";
    ArrayList list = new ArrayList();
    list.AddRange(id.Split(new char[] { ',' }));
    GridView1.DataSource = list;
    GridView1.DataBind(); 
```

在执行此代码时，我们在 gridview 中有一列和五行。

但我需要两列具有 id 和值。我们应该怎么做 ？

```
 string id = "1,2,3,4,5";
    string value = "abc,pqr,xyz,mno,qwe";
    ArrayList list = new ArrayList();
    list.AddRange(id.Split(new char[] { ',' }));
    list.AddRange(value.Split(new char[] { ',' }));
    GridView1.DataSource = list;
    GridView1.DataBind(); 
```

这给了我一个有 10 行的列，而不是这个我想要两列，每列都有各自的 id 和值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:27:56.020

您可以尝试：

```
string id = "1,2,3,4,5";
string value = "abc,pqr,xyz,mno,qwe";

var ids = id.Split(new char[] { ',' });
var values = value.Split(new char[] { ',' });

ArrayList list = new ArrayList();
for (int i = 0; i < ids.Length; i++)
    list.Add(new [] {ids[i], values[i]});
GridView1.DataSource = list;
GridView1.DataBind(); 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:08:18.177

你也可以试试这个：

```
string id = "1,2,3,4,5";
string value = "abc,pqr,xyz,mno,qwe";
var ids = id.Split(new char[] { ',' });
var values = value.Split(new char[] { ',' });

Dictionary<string, string> listDict = new Dictionary<string, string>();
for (int i = 0; i < ids.Length; i++)
{
    listDict.Add(ids[i], values[i]);
}

gridView1.DataSource = listDict;
gridView1.DataBind(); 
```

# pdf - 确认使用的加密类型

> ID：15108873
> 
> 赞同：0
> 
> 时间：2013-02-27T09:47:34.590
> 
> 标签：pdf, encryption, aes, group-policy

是否可以查看 PDF 并说明使用什么加密级别对其进行加密？我们建议在 Word 中按组策略设置 AES 加密级别，并希望确认这实际上已用于生成的文档。word 中使用的默认 AES 是 128，我们希望将其增加到 256。感谢您提供有关如何测试它的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:17:14.533

不。

使用 AES 无法检查加密数据并确定用于加密的密钥长度。AES 对于所有密钥大小都有一个恒定的块大小，因此您只会看到*n* x 16 字节的明显随机数据。

# android - 应用程序启动器从 Android 开始重新加载

> ID：15108874
> 
> 赞同：1
> 
> 时间：2013-02-27T09:47:35.297
> 
> 标签：android, android-launcher

我创建了应用程序来充当家庭启动器。因此，当用户单击主页按钮时，我会使用 Launcher 或我的应用程序名称来完成操作，例如“myhomelauncher”。

当我单击主页按钮并单击 myhomelauncher 时，我的应用程序从一开始就完美加载所有内容。现在，当我在我的应用程序的第二个屏幕中说我正在查看我的应用程序中的活动 2 时，现在我单击主页按钮并单击 myhomelauncher，我最终得到了相同的活动 2 窗口，它没有重新加载。（它应该重新加载并显示活动 1 而不是 2）

我见过很多应用程序每次点击启动器时都会重新加载。为什么不是我的？

这是我在 manifest.xml 中所做的

```
<activity
    android:name=".MyLauncher"
    android:label="@string/app_name"
    android:persistent="true"
    android:screenOrientation="landscape">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

我不确定错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:56:54.813

抬头看`[launchMode](https://developer.android.com/guide/topics/manifest/activity-element.html#lmode)`。但要小心，权力越大，责任越大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:57:53.657

这是似乎对我有用的清单中的相关部分。请注意，我已将**singleInstance**置于启动模式，因为我永远不想要一个以上的应用程序。

```
<application  android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".usbEffects" 
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"                
                android:windowSoftInputMode="stateAlwaysHidden" 
                android:screenOrientation="portrait"
                android:launchMode="singleInstance"
                android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T10:00:25.173

请查看文档 - 您的问题可能感兴趣的是以下设置：

*   [机器人：clearTaskOnLaunch](http://developer.android.com/guide/topics/manifest/activity-element.html#clear)
*   [安卓：启动模式](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

我怀疑设置`android:launchMode`为`singleTask`可以解决您的问题，但要小心这会导致哪些副作用。

所以：

```
<activity
    android:name=".MyLauncher"
    android:label="@string/app_name"
    android:persistent="true"
    android:screenOrientation="landscape"
    android:launchMode="singleTask">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

应该做的伎俩。

# php - 在没有表单提交的情况下在会话中存储输入字段值

> ID：15108877
> 
> 赞同：1
> 
> 时间：2013-02-27T09:47:52.533
> 
> 标签：php, html, session, input

如何在没有表单提交的情况下将输入字段值存储在会话中？

```
<input type="text" size="3" name="quantity" id="quantity" value="<?php echo $product_quantity; ?>" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:50:58.467

PHP 不直接与浏览器交互。您需要使用`javascript`来获取 的值，`textbox`然后将其附加到`url` **（GET 或 POST）。**

我不明白为什么你不能使用 a `form`- 它们在那里是为了将数据传递到页面。

**PHP 是服务器端，**一旦页面从服务器发送到浏览器，PHP 就没有用，也无法控制。PHP 可以处理表单、使用变量等。

`Javascript`是相反的。它仅在页面发送后才起作用，并且完全依赖于浏览器。它可用于自动填写表格，甚至为您提交表格。因为它依赖于浏览器，所以如果您的访问者关闭了 javascript，则根本无法工作。

AJAX 介于这些表单之间，所以它可以自动提交表单、处理变量等……它只是 javascript 的扩展，所以如果你知道 javascript，AJAX 就没有那么多工作了。

# c# - 比较两张表并更新第三张

> ID：15108878
> 
> 赞同：0
> 
> 时间：2013-02-27T09:47:54.450
> 
> 标签：c#, sql

假设我在 SQL **“abc”**中有一个表，其中有一列“数字”，该列包含 (1,2,3,4) 等。

在我的第二个表**“xyz”**中，我有一列“数字”，该列包含 (1,2,3,4,5,6,7,8,9)。

现在我想比较这两者并在第三个表中插入相等的数据。那么我该怎么做呢？

代码 ：

```
string str = "SELECT     Invoice_Details.PGI_ID, PARTY_BOOKING_DETAILS.PGI_ID AS abc ";
str += "FROM         PARTY_BOOKING_MAIN INNER JOIN ";
str += "    PARTY_BOOKING_DETAILS ON PARTY_BOOKING_MAIN.PBM_ID = PARTY_BOOKING_DETAILS.PBM_ID CROSS JOIN ";
str += "          Invoice_Details where PARTY_BOOKING_MAIN.PM_ID = 1 ";

SqlConnection con = new SqlConnection("data source = .; database = ePartyDatabase01; integrated security = true");
con.Open();
SqlCommand cmd1 = new SqlCommand("update Invoice_Details set [status] = @a", con);
SqlCommand cmd = new SqlCommand(str, con);
SqlDataReader dr = cmd.ExecuteReader();
while (dr.Read())
{
    if (dr["PGI_ID"].ToString() == dr["abc"].ToString())
    {

        cmd1.Parameters.AddWithValue("@a", 1);

    }
}

dr.Close();
cmd1.ExecuteNonQuery();

con.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:55:55.460

您可能想要使用某种这样的查询：

```
insert into table3 (number)
select 
    t1.number
from abc t1
inner join xyz t2
    on t1.number = t2.number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:56:08.413

我还没有测试过，但你可能甚至不需要 C#，试试这样的：

```
SELECT xyz.number
INTO third_table
FROM (
   SELECT t1.number
   FROM first_table t1 JOIN second_table t2 ON t1.number = t2.number
) AS xyz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:56:18.923

也许是这样的：

```
INSERT INTO table3(number)
SELECT
    number
FROM
    xyz
WHERE NOT EXISTS
    (
        SELECT
            NULL
        FROM
            abc
        WHERE
            abc.number=xyz.number
    ) 
```

# vim - 如何激活现有的 GVim 窗口

> ID：15108879
> 
> 赞同：3
> 
> 时间：2013-02-27T09:47:56.340
> 
> 标签：vim

我正在搜索的是类似于以下命令的命令：

```
gvim --remote-silent FILE 
```

但没有`FILE`部分。所以基本上：如果不存在，则启动一个新的 GVim 实例，否则激活/聚焦现有窗口。我不喜欢使用虚拟文件（例如 . `gvim --remote-silent ~/.vimrc`），因为那会弄乱我的缓冲区列表/MRU。

我正在寻找这样的东西的原因是我想为 GVim ( `Mod+8`) 配置一个快捷方式以在 Linux XFCE 窗口管理器中使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T10:24:56.433

您可以使用以下命令重新激活现有 GVIM 实例

```
$ gvim --remote-send ":call foreground()<CR>" 
```

当没有现有服务器时，它会失败。在这种情况下，只需生成一个新实例，或事先使用`gvim --serverlist`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-26T14:21:48.737

在 Ubuntu`gvim --remote-silent`中工作，但不激活编辑器窗口，只是在侧边栏中挥动其图标。要更改此行为[，请查看此处](https://askubuntu.com/questions/594294/how-to-automatically-bring-an-activated-window-to-the-foreground)。

> 可以从命令行更改此行为，打开终端并键入：
> 
> dconf 写入 /org/compiz/profiles/unity/plugins/core/focus-prevention-level 0
> 
> 要恢复默认值：
> 
> dconf 写入 /org/compiz/profiles/unity/plugins/core/focus-prevention-level 1

# django - Django 1.5：Python 2.7 或 Python 3

> ID：15108880
> 
> 赞同：1
> 
> 时间：2013-02-27T09:47:56.457
> 
> 标签：django, python-2.7, python-3.x

Django 刚刚发布了他们的 1.5 版本。

它现在支持 Python 3，我的问题确实很简单：有了这个 1.5 版本，我还应该使用 Python 2.7 还是 Python 3 ？我假设使用 Python 3 会有一些与 3rd 方应用程序有关的问题吗？

在你的情况下，你会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:55:44.207

发行说明明确指出 1.5 中的 Python 3 支持是*实验性*的。是的，第三方应用程序将是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:17:22.657

我仍然会使用 python 2.7，因为许多应用程序和库还没有为 python 3.x 做好准备

PIL 无法与 python 3 一起正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:01:17.607

如果我正在开始一个新的开发，我不希望在 1.6 版发布之后才能上线（当 Python 3 支持应该准备好生产时，希望第 3 方应用程序已经赶上），那么是的，我将与 Python 3 一起使用。它比 Python 2.7 干净得多。

但是，如果您希望您的网站在不久的将来启动并运行，请坚持使用 2.7。

# iphone - AVAudioPlayer 在 iOS 模拟器中播放，但在 iPhone 上不播放

> ID：15108881
> 
> 赞同：0
> 
> 时间：2013-02-27T09:47:57.930
> 
> 标签：iphone, ios, objective-c, avaudioplayer

我正在构建一个必须播放 mp3 文件的应用程序。对于那个问题，我正在使用 AVAudioPlayer 遵循我从其他帖子中阅读的指示。但我的问题是，代码（我附在下面）适用于 iOS 模拟器，但是当我尝试在我的 iPhone 中使用它时，它不起作用......我希望你们中的任何人都可以帮助我解决这个问题。

**文件.h：**

```
#import "UIKit/UIKit.h"
#import "AVFoundation/AVFoundation.h"

@interface ViewController : UIViewController <AVAudioPlayerDelegate>

@property (strong, nonatomic) AVAudioPlayer *player;

@end 
```

**文件.m：**

```
#import "ViewController.h"

@implementation ViewController
@synthesize player;

- (void)viewDidLoad
{
   [super viewDidLoad];

   NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"beep_7" ofType:@"mp3"];
    NSLog(@"Audio path: %@", soundFilePath);

    NSError *error;
    self.player =[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:soundFilePath] error:&error];

    if (error) {
        NSLog(@"Error in audioPlayer: %@",[error localizedDescription]);
    }
    else {
        [self.player setDelegate:self];
        [self.player setNumberOfLoops:3]; //just to make sure it is playing my file several times
        self.player.volume = 1.0f;

        if([self.player prepareToPlay]) //It is always ready to play
            NSLog(@"It is ready to play");
        else
            NSLog(@"It is NOT ready to play ");

        if([self.player play]) //It is always playing
            NSLog(@"It should be playing");
        else
            NSLog(@"An error happened");
    }
}

-(void)audioPlayerDecodeErrorDidOccur: (AVAudioPlayer *)player error:(NSError *)error {
    NSLog(@"audioPlayerDecodeErrorDidOccur -> Error in audioPlayer: %@",[error localizedDescription]);
}
-(void)audioPlayerDidFinishPlaying: (AVAudioPlayer *)player successfully:(BOOL)flag{
    NSLog(@"audioPlayerDidFinishPlaying");
}
-(void)audioPlayerBeginInterruption:(AVAudioPlayer *)player{
    NSLog(@"audioPlayerBeginInterruption");
}
-(void)audioPlayerEndInterruption:(AVAudioPlayer *)player{
    NSLog(@"audioPlayerEndInterruption");
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:02:31.333

检查音频（或图像）何时在模拟器中而不是在设备上工作（显示）的第一件事是您尝试访问的音频文件的拼写。

由于 Mac OSX 不区分大小写，但 iOS 是这意味着在您的代码中拼写`iMage.png`和访问的图像`image.png`将显示在模拟器中，但不会显示在您的 iPhone 上。

要检查的另一件事可能是您不小心按下了 iPhone 上的物理静音按钮。（上周发生在我身上）

希望能帮助到你！

# javascript - 如何倾斜/旋转带有图像的画布？

> ID：15108889
> 
> 赞同：0
> 
> 时间：2013-02-27T09:48:22.450
> 
> 标签：javascript, image, html5-canvas, mouseover, tilt

当谈到 Javascript 和画布和其他东西时，我是一个完整的新手，但我有这个图像 (1920x1080)，我想做的是当有人将鼠标悬停在它倾斜的图像上时。

因此，如果我将鼠标移动到图像的顶部，那么看起来图像的底部朝我伸出，顶部进入文档。如果我将鼠标向右移动，左侧会出现一点，而右侧会进入文档。

像这样，[http://www.simpleviewer.net/tiltviewer/app/](http://www.simpleviewer.net/tiltviewer/app/)只是更微妙而不是在 Flash 中。

这个例子是用 JavaScript 完成的，但我不知道怎么做，我不能完全阅读源代码，我不想撕掉源代码 [http://mrdoob.com/97/depth_of_field](http://mrdoob.com/97/depth_of_field)

我不知道从哪里开始，甚至不知道如何开始，我现在只是潜入 Javascript 的更高级部分，所以任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:02:36.837

这是我刚做的一个demo。您可以更改其中的值。

```
-webkit-transform:  skewX(30deg); 
```

至 40 度

尝试将鼠标悬停在猫图像上。

[http://jsfiddle.net/B8FSb/](http://jsfiddle.net/B8FSb/)

基本上，您需要了解 css 转换和 css 转换才能执行您提到的演示应用程序。

[https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)

# javascript - jQuery UI datepicker中的changeDate事件？

> ID：15108892
> 
> 赞同：0
> 
> 时间：2013-02-27T09:48:25.983
> 
> 标签：javascript, jquery

在这个日期选择器是事件`changeDate`- > [http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

jQuery UI datepicker 中的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:53:26.553

```
onSelect: function( String dateText, Object obj ) 
```

[http://api.jqueryui.com/datepicker/#option-onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)

> 选择日期选择器时调用。该函数接收选定的日期作为文本和 datepicker 实例作为参数。这指的是关联的输入字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:51:18.980

```
 $(".date").datepicker({
    onSelect: function() {
       .............
    }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:52:51.367

这相当于 Jquery UI 中的[onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)方法。

# android - ListView 部分加载网络 json 数据

> ID：15108894
> 
> 赞同：1
> 
> 时间：2013-02-27T09:48:40.827
> 
> 标签：android, json

我想在`ListView`.

上网查了一下，还是不知道怎么加载`json`部分网络数据`ListView`。

现在我发布我的代码并请求其他人帮助我。非常感谢！

```
public class MainActivity extends ListActivity{

    private ListView listView;
    File cache = null;
    private String path ="Here is the json file on the server address";

        Handler handler = new Handler(){
            public void handleMessage(Message msg) {
                 listView.setAdapter(new VideoFileAdapter(MainActivity.this, (List<VideoFile>)msg.obj, 
                         R.layout.listview_item, cache));
            } 
```

视频文件服务.java

```
 };
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            this.requestWindowFeature(Window.FEATURE_NO_TITLE);
            setContentView(R.layout.activity_main);
            listView = getListView();

            cache = new File(Environment.getExternalStorageDirectory(), "cache");
            if(!cache.exists()) cache.mkdirs();
            new Thread(new Runnable() {            
                public void run() {
                    try {
                        List<VideoFile> data = VideoFileService.getJSONVideoFile(path);
                        handler.sendMessage(handler.obtainMessage(22, data));
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            }).start();       
        }

        protected void onDestroy() {
            super.onDestroy();
        }

    } 
```

**视频文件适配器.java**

```
public class VideoFileAdapter extends BaseAdapter {
    public List<VideoFile> data;
    public int listviewItem;
    private File cache;
    LayoutInflater layoutInflater;

    public VideoFileAdapter(Context context, List<VideoFile> data, int listviewItem, File cache) {
        this.data = data;
        this.listviewItem = listviewItem;
        this.cache = cache;
        layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }
    public int getCount() {
        return data.size();    
    }
    public Object getItem(int position) {
        return data.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = null;
        TextView textView = null;

        if(convertView == null){
            convertView = layoutInflater.inflate(listviewItem, null);
            imageView = (ImageView) convertView.findViewById(R.id.image);
            textView = (TextView) convertView.findViewById(R.id.textView);
            convertView.setTag(new DataWrapper(imageView, textView));
        }else{
            DataWrapper dataWrapper = (DataWrapper) convertView.getTag();
            imageView = dataWrapper.imageView;
            textView = dataWrapper.textView;    
        }
        VideoFile videoFile = data.get(position);
        textView.setText(videoFile.name);
        asyncImageLoad(imageView, videoFile.image);
        return convertView;
    }

    private void asyncImageLoad(ImageView imageView, String path) {
        AsyncImageTask asyncImageTask = new AsyncImageTask(imageView);
        asyncImageTask.execute(path);
    }

    private final class AsyncImageTask extends AsyncTask<String, Integer, Uri>{
        private ImageView imageView;
        public AsyncImageTask(ImageView imageView) {
            this.imageView = imageView;
        }
        protected Uri doInBackground(String... params) {
            try {
                return VideoFileService.getImage(params[0], cache);
            } catch (Exception e) {
                e.printStackTrace();
            }
            return null;
        }
        protected void onPostExecute(Uri result) {
            if(result!=null && imageView!= null)
                imageView.setImageURI(result);
        }
    }

    private final class DataWrapper{
        public ImageView imageView;
        public TextView textView;
        public DataWrapper(ImageView imageView, TextView textView) {
            this.imageView = imageView;
            this.textView = textView;
        }
    }

    public void addItem(VideoFile item) {
        data.add(item);

    }
} 
```

# jsf - ExternalContext#dispatch() 不起作用

> ID：15108896
> 
> 赞同：0
> 
> 时间：2013-02-27T09:48:49.540
> 
> 标签：jsf

我有服务器端倒数计数器。当它 == 0 时，方法应该执行`ExternalContext#dispatch()`，但它没有这样做。方法`ExternalContext#redirect()`在这个地方正常工作。

```
....
        }else{
        try {
            FacesContext.getCurrentInstance().getExternalContext().dispatch("result.xhtml");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
.... 
```

我尝试了几种拼写url（`result,result.xhtml,\result.xhtml`等）的方法，结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:44:04.240

这不是让 JSF 导航到不同视图的正确方法。

如果您在操作方法中，则应该将其作为字符串返回。

```
public String submit() {
    // ...

    return "result.xhtml";
} 
```

或者，如果您不在操作方法中并且由于某些不清楚的原因无法将其更改为完全有价值的操作方法，那么请[`NavigationHandler#handleNavigation()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/NavigationHandler.html#handleNavigation%28javax.faces.context.FacesContext,%20java.lang.String,%20java.lang.String%29)改用。

```
FacesContext context = FacesContext.getCurrentInstance();
context.getApplication().getNavigationHandler().handleNavigation(context, null, "result.xhtml"); 
```

# javascript - 如何使用 jshint 忽略所有警告？

> ID：15108900
> 
> 赞同：4
> 
> 时间：2013-02-27T09:49:06.650
> 
> 标签：javascript, jshint

是否可以在不制作这样的配置文件的情况下使用 jshint 忽略所有警告：

```
{
        ...
    "-W039": false
    "-W040": false
    "-W041": false
    "-W042": false
        ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-07T15:53:05.203

在开发或调试期间，抑制文件的所有内容或部分内容可能很有用。

将要忽略的任何代码块包装在：

```
/* jshint ignore:start */
<code here>
/* jshint ignore:end */ 
```

不过不要忘记删除这个预生产！

# ios - 我可以通过内存字符串获取对象吗

> ID：15108901
> 
> 赞同：-2
> 
> 时间：2013-02-27T09:49:06.950
> 
> 标签：ios, objective-c

就像标题一样，我已将内存地址保存为字符串

```
MyClass *class = [[MyClass alloc] init];

NSString *pointerStr = [NSString stringWithFormat:@"%p", class]; 
```

“pointerStr”是类的地址字符串；

现在我的问题是我可以通过 pointerStr 获得类吗？非常感谢！

另一个问题如果类是dealloc

如何判断对象是否有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:53:03.063

鉴于 iOS 是 32 位系统，这将起作用，但它很危险，不应该这样做：

```
 MyClass *class = (MyClass *)[pointerStr intValue]; 
```

对于 64 位 Mac，请使用：

```
 MyClass *class = (MyClass *)[pointerStr longLongValue]; 
```

但是必须有更好的方法来存储对象指针......

# three.js - getimagedata() 到粒子纹理three.js

> ID：15108902
> 
> 赞同：0
> 
> 时间：2013-02-27T09:49:08.213
> 
> 标签：three.js, textures, getimagedata

我正在尝试这样做：从同一画布元素的不同位置获取图像数据（），并使每个图像数据块成为粒子系统中单个粒子的纹理。我不希望所有系统都具有相同的纹理，而是每个粒子的纹理必须对应于画布上的一大块图像。一旦我的 imgData[i] 数组填充了信息，如何将其每个元素分配给每个粒子的纹理值？（请记住，我希望每个粒子具有与 imgData[i] 数组中的每个元素对应的不同纹理）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:09:11.500

`ParticleSystem`仅支持系统中所有粒子的单个纹理，并且所有粒子共享该纹理。

# java - JtabbedPane 中的 JtabbedPane

> ID：15108904
> 
> 赞同：0
> 
> 时间：2013-02-27T09:49:17.550
> 
> 标签：java, swing, jtabbedpane

我编写了一个小程序，用于创建带有选项卡式窗格的简单 gui。目前它有两个选项卡。在其中一个选项卡中，我创建了一个按钮，在另一个选项卡中，我创建了两个按钮（基于第三类中的字符串）。我无法做的是在第二个选项卡内我想创建两个选项卡（“ te 代码中提到的一个”和“两个”），并且当前位于选项卡中的两个按钮应该出现在每个子选项卡中。有人可以告诉我如何实现这一点吗？

主类： **abc.java**

```
public class abc {
        JFrame frame;
        JTabbedPane tabPane;
        abc_export exp;
        bsm_import2 imp;
        public static void main(String[] args) {
                abc jtab = new abc();
                jtab.start();
        }
        public void start(){
        exp=new abc_export();
        imp=new bsm_import2();
        tabPane.addTab("bsm_export", exp.tab);
        tabPane.addTab("bsm_import2", imp.tab);
        }

        public abc() {
                //  Create a frame
                frame = new JFrame();
                //  Create the tabbed pane.
                tabPane = new JTabbedPane();
                //Adding into frame
                frame.add(tabPane, BorderLayout.CENTER);
                frame.setSize(300, 300);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
                }

} 
```

第二类：**abc_export.java**

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
public class abc_export {
        JPanel tab;
        public abc_export() {
                //Adding into frame
                tab = new JPanel();
                JButton btn=new JButton("run");
                tab.add(btn);
                tab.setOpaque(false);
                }
}; 
```

第三类：**bsm_import2.java**（这是我需要进行更改以创建子选项卡的地方）

```
import javax.swing.*;     
import java.awt.*;     
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.*;
import java.util.StringTokenizer;
import java.util.*;
import java.awt.event.*;

public class bsm_import2 {

    public static JPanel tab;
    public bsm_import2()
    {
    createAndShowGUI();
    } 
    private static void createAndShowGUI() {
           tab=new JPanel(); 
           tab.setLayout(new GridLayout(3,2));
           String line="tab1#one tab2#two";
           String strAry[] = line.split(" ");
           JButton Button[]=new JButton[100];
           final Map<String, String> map = new HashMap<String, String>();
           for(int i =0; i < strAry.length ; i++){
                    String[] parts = strAry[i].split("#");
                    map.put(parts[0],parts[1]);          
                    Button[i] = new JButton(parts[0]);
                    tab.add(Button[i]);
                    tab.setOpaque(false);
            }
                for ( String key : map.keySet() ) {
                System.out.println( key );
                } 
    }
} 
```

![在此处输入图像描述](../Images/70111d601e2ec4ed0b43a88ce0ade767.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:03:38.557

根据我对您的问题的理解，您可以做的是，在第二个选项卡的面板中添加一个新`JTabbedPane`选项卡，其中有 2 个选项卡，每个选项卡都有一个按钮，您将得到您想要的。一个小的演示代码将是：

```
JFrame frame = new JFrame();
frame.setSize(400, 400);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
JTabbedPane mainTabsPane = new JTabbedPane(); // main tabs pane

//first tab
JButton button = new JButton("Button in first tab");
JPanel jPanel = new JPanel();
jPanel.add(button);
mainTabsPane.addTab("First tab", jPanel);

//second tab
jPanel = new JPanel();
JTabbedPane secondaryTabsPane = new JTabbedPane(); // secondary tabs pane
button = new JButton("Button in second tab ---> first sub tab");
JPanel jPanel2 = new JPanel();
jPanel2.add(button);
secondaryTabsPane.addTab("First tab", jPanel2);
JPanel jPanel3 = new JPanel();
button = new JButton("Button in second tab ---> second sub tab");
jPanel3.add(button);
secondaryTabsPane.addTab("Second tab", jPanel3);
 // add secondary tabs pane to new panel of second tab
jPanel.add(secondaryTabsPane);
 // add new panel to main tabs pane
mainTabsPane.addTab("Second tab", jPanel);

frame.getContentPane().add(mainTabsPane);
frame.setVisible(true); 
```

除此之外，您在这里直接引用另一个类中的一个类的变量`tabPane.addTab("bsm_export", exp.tab);`。您不应该这样做，而是应该将其设为私有并提供 getter/setter 来访问它。另外，为什么您要为这么小的东西编写如此复杂的代码结构，在选项卡中显示按钮！！！？？也始终遵循[Java 编码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)，类名不应以小字符开头。

# php - php标记网格交叉点x / y坐标

> ID：15108907
> 
> 赞同：1
> 
> 时间：2013-02-27T09:49:29.660
> 
> 标签：php, arrays, crossword

我正在尝试获取包含 x/y 坐标和方向信息（横向或向下）的数据数组，并将共享单元格与递增的数字链接起来。这是一个填字游戏。这是原始数组：

```
Array
(
[0] => Array
    (
        [id] => 1
        [puzzle_id] => 1
        [word] => hello
        [hint] => 
        [direction] => across
        [grid_x] => 3
        [grid_y] => 1
    )

[1] => Array
    (
        [id] => 2
        [puzzle_id] => 1
        [word] => loot
        [hint] => 
        [direction] => down
        [grid_x] => 5
        [grid_y] => 1
    )

[2] => Array
    (
        [id] => 3
        [puzzle_id] => 1
        [word] => hellotest
        [hint] => 
        [direction] => down
        [grid_x] => 3
        [grid_y] => 1
    )

[3] => Array
    (
        [id] => 4
        [puzzle_id] => 1
        [word] => looking
        [hint] => 
        [direction] => across
        [grid_x] => 3
        [grid_y] => 3
    ) 
```

)

我想为每个名为“num”的条目添加一个新键，该键将从 1 开始并递增 1，但棘手的部分是如果它们共享一个起始单元格（共享一个 grid_x 和 grid_y ）。这是我现在拥有的代码，但它不会产生我正在寻找的正确数字。

```
$puzzle_data2 = $puzzle_data;

$across_counter = 1;
foreach($puzzle_data as $rkey=>$row)
{
    if($row['direction'] == 'across')
    {
        $puzzle_data[$rkey]['num'] = $across_counter++;

        foreach($puzzle_data2 as $rkey2=>$row2)
        {
            if($row['direction'] == 'down')
            {
                if($row['grid_x'] == $row2['grid_x'] && $row['grid_y'] == $row2['grid_y'])
                {
                    $puzzle_data[$rkey2]['num'] = $across_counter;
                    break;
                }
            }
        }
    }
}
foreach($puzzle_data as $rkey=>$row)
{
    if(!isset($row['num']))
    {
        $puzzle_data[$rkey]['num'] = $across_counter++;
    }
} 
```

我最终得到了这个结果：

```
Array
(
[0] => Array
    (
        [id] => 1
        [puzzle_id] => 1
        [word] => hello
        [hint] => 
        [direction] => across
        [grid_x] => 3
        [grid_y] => 1
        [num] => 1
    )

[1] => Array
    (
        [id] => 2
        [puzzle_id] => 1
        [word] => loot
        [hint] => 
        [direction] => down
        [grid_x] => 5
        [grid_y] => 1
        [num] => 3
    )

[2] => Array
    (
        [id] => 3
        [puzzle_id] => 1
        [word] => hellotest
        [hint] => 
        [direction] => down
        [grid_x] => 3
        [grid_y] => 1
        [num] => 4
    )

[3] => Array
    (
        [id] => 4
        [puzzle_id] => 1
        [word] => looking
        [hint] => 
        [direction] => across
        [grid_x] => 3
        [grid_y] => 3
        [num] => 2
    )

) 
```

我正在寻找 ID 1 和 3 都是“1”。如果您想到一个纵横字谜游戏，其中向下和横向共享相同的起始单元格，其在横向和向下键中标有相同的数字，这就是我试图用我的数据集完成的。

谢谢你的时间。

![在此处输入图像描述](../Images/54da4f4849fc9668e694e2114ff9b3cb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:31:11.390

您应该首先对数据进行排序，以便左上角的条目首先穿过该行，然后再向下移动到下一行。即我们阅读的方式。

我们可以取 grid_x 和 grid_y 并计算哪个是第一个。

然后我们可以使用这些对数据进行排序。

```
function cmp($a, $b)
{
    $a_index=($a['grid_y']*100)+$a['grid_x'];
    $b_index=($b['grid_y']*100)+$b['grid_x'];
    if ($a_index == $b_index)
    {
        return 0;
    }
    return ($a_index < $b_index) ? -1 : 1;
}
usort($puzzle_data, "cmp"); 
```

我在这里使用了 100 以使事情变得更容易，但您应该使用网格的宽度以获得更高的准确性。

x1,y1 将给出 101
x3,y1 将给出 103
x1,y3 将给出 301
y3,y3 将给出 303

所以顺序是 101, 103, 301, 303

然后使用 grid_x 和 grid_y 将数字应用于数据以测试是否已经完成。

```
$number=1;
$grid_numbers=array();
foreach($puzzle_data as $rkey=>$row)
{
    if(isset($grid_numbers[$row['grid_x']][$row['grid_y']]))
    {
        $puzzle_data[$rkey]['num'] = $grid_numbers[$row['grid_x']][$row['grid_y']];
    }
    else
    {
        $grid_numbers[$row['grid_x']][$row['grid_y']]=$number;
        $puzzle_data[$rkey]['num']=$number;
        $number++;
    }
} 
```

那应该就是一切

# facebook - Facebook 发送对话认证

> ID：15108908
> 
> 赞同：1
> 
> 时间：2013-02-27T09:49:34.157
> 
> 标签：facebook, facebook-javascript-sdk

我正在为 facebook 功能创建自定义共享，这比我最初想象的要复杂。

我必须创建一个 facebook 应用程序，然后使用它的 ID 来启动它。

如果您尝试在 facebook 上分享页面，它会让您登录到 facebook（如果未登录），然后它会请求访问您的个人资料（仅在您的第一次分享时），然后继续分享对话以让您分享它。

但是我注意到其他网站，包括 youtube 和 BBC，他们不请求访问在 facebook 上共享，而是直接将您带到共享对话。

有没有办法做到这一点？

使用代码如下：

```
<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
<script>
    FB.init({
        appId      : '*APP_ID*', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true,  // parse XFBML
        link       : '*LINK*'
    });
    $('.share-print .facebook > a').click(function(e){
        e.preventDefault();

        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                facebookSend();
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook, 
                // but has not authenticated your app
                FB.login(function(response) {
                    if (response.authResponse) {
                        console.log('Logged in');
                        facebookSend();
                    } else {
                        console.log('Not logged in');
                    }
                });
            } else {
                // the user isn't logged in to Facebook.
                FB.login(function(response) {
                    if (response.authResponse) {
                        console.log('Logged in');
                        facebookSend();
                    } else {
                        console.log('Not logged in');
                    }
                });
            }
        });

    });
    var facebookSend = function() {
        console.log('facebookSend started');
        FB.ui({ 
            method: 'feed',
            display: 'iframe',
            link: '*PAGE_LINK*'
        });
    }
</script> 
```

# crystal-reports - Crystal Reports 9中基于存储过程创建动态表

> ID：15108910
> 
> 赞同：1
> 
> 时间：2013-02-27T09:49:43.310
> 
> 标签：crystal-reports, report

我遇到了一个小问题。我有一个存储过程，可以为我提供一些数量（例如 1、3、5）。我怎样才能把它翻译成表格？更准确地说，对于这种输入，我选择最大数，即 5，然后我必须创建一个 3 列和 5 行的空表，如下所示：

1 1 1

0 1 1

0 1 1

0 0 1

0 0 1。

我可以在 CR 9 中执行此操作吗？

# matlab - x.docx 和 x.txt 非常大，无法打开

> ID：15108913
> 
> 赞同：1
> 
> 时间：2013-02-27T09:50:01.790
> 
> 标签：matlab

我有这个代码：

```
filename = 'x.docx';    
nc=2500;    
A=zeros(1,nc);    
matObj = fopen(filename,'w');    
n = 2500*50;    
for k=1:n    
    fprintf(matObj, '% f', A);    
    fprintf(matObj, '%\n', A);    
end 
```

但`x.docx`变得非常大（2.61G），打不开。

我能做些什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:07:09.047

几件事：

1.  如果您想将数据导出为 microsoft 格式的文件，何不试试[`xlswrite`](http://www.mathworks.com/help/matlab/ref/xlswrite.html)呢？

2.  你的`fprintf`命令有点奇怪，是什么`'%\n'`？
    格式中你想要多少个空格`'% f'`？
    尝试查看[字符串格式](http://www.mathworks.com/help/matlab/matlab_prog/formatting-strings.html)以获得更具体的示例。

3.  **完成后必须**关闭文件`fclose( matObj );`。

4.  您的代码写入`n`(125,000) 行，每行有 2500 个零，仅此一项就是约 1.25 亿个字符。因此，2.6 GB 文件与您实际编写的文件相差不远......

# android - 在 Google Play 之外分发 Android 应用并将其链接到该应用

> ID：15108914
> 
> 赞同：3
> 
> 时间：2013-02-27T09:50:02.487
> 
> 标签：android, apk, google-play, software-distribution

假设我有一个带有*围墙花园*的 wifi 网络，除非通过浏览器执行身份验证程序，否则用户无法访问 Internet。

假设我在 Google Play 上有一个应用程序可以为没有经验的人自动执行此过程。假设 95% 的用户缺乏经验并且不愿意在未针对移动设备优化的站点上执行 SMS-OTP 身份验证。

### 设想

有人问店员如何使用 Android 连接到互联网。店员建议该人下载 Android 应用程序，但该人回答说他无法访问互联网，因为他没有 3G 数据计划。

### 可能的解决方法

围墙花园门户通过用户代理检测到运行 Android 的设备并说：“你想从我们的内部网络下载一个 APK 而无需去 Google Play 吗？”。用户接受、解锁未知来源并安装应用程序。

### 问题

在这种情况下，如果用户在其设备上下载使用相同密钥签名的 Google Play 可用应用程序的 APK，**安装的应用程序是否会链接到 Play 并受到更新？**我的意思是**不使用市场链接器应用程序**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:58:53.733

这是我的旧答案，不要阅读，直接跳到编辑部分：

> 简短的回答是否定的！
> 
> 我敢肯定有一些令人讨厌的方法可以将应用程序链接到它的 Google Play 变体，但是我认为您的非极客客户场景最好的选择是对网络进行编程以允许 Android 移动访问（检查用户代理）到play.google.com（甚至可能从重定向网站自动启动直接指向该应用程序的 google play 链接）。

**编辑：**

我对这个问题想得更多，我想把我的答案改成“我不知道”（多么可怕的答案）。但我想提出一个你可以自己做的测试。

我改变答案的原因是因为我现在记得像 Titanium 这样的应用程序，并且在恢复备份时它们确实将应用程序链接到 Play。当然，Titanium 需要 root，但那是因为它会干扰其他应用程序，而不是它自己的应用程序。

因此，根据我所讨论的内容，我建议您进行一个简单的测试：

*   构建一个应用程序，任何东西，你好世界！
*   将此应用上传到 Google Play 并使其处于活动状态
*   等待几个小时让 Google 服务器使其可用
*   手动将相同的构建版本（具有完全相同的签名密钥等）刷入设备。
*   重新启动设备（以确保系统将读取已安装的应用程序并与 Google Play 进行通信）
*   转到设备上的 Google Play 并检查它是否显示应用程序

应用程序可能具有相同的包名称并使用相同的密钥签名，设备本身的 Google Play 将其识别为相同并链接它。

# iphone - 在 xcode 4.2 中找不到有效的签名身份，但在 xcode 4.5 中工作

> ID：15108915
> 
> 赞同：0
> 
> 时间：2013-02-27T09:50:03.337
> 
> 标签：iphone, ios, xcode4.2, xcode4.5, provisioning-profile

我有一组有效的配置文件和证书。这将在此版本中的最新 xcode 4.5 中工作我们可以将部署目标仅设置为 4.3，但我们还需要在 4.0 中部署，因为我试图在 ios 10.6 的 xcode 4.2 中使用相同的证书和配置文件运行相同的代码.1 系统，但我收到**“未找到有效歌唱身份错误”。**

请任何人帮助我需要知道原因。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:42:10.407

请确保您已安装 Development | 带有 xcode 4.0 的系统上的分发证书。您可以从运行项目的一台计算机的 KeyChain 导出证书和密钥，然后将这些证书和密钥安装到其他系统。如果仍然显示错误，您应该尝试退出 xcode 和钥匙串，在某些情况下可能必须重新启动系统。

# iphone - 如何从 iCloud 强行获取键值？

> ID：15108916
> 
> 赞同：1
> 
> 时间：2013-02-27T09:50:10.063
> 
> 标签：iphone, ipad, icloud

在我的应用程序中，我将用户名和密码存储在 iCloud 键值存储中。在第一次启动时，我调用 synchronize 从 iCLoud 获取数据，但存在延迟。有什么方法可以强制获取 iCloud 中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:11:15.440

我通过在初始化后立即设置一个假的 iCloud 键值来做到这一点，例如：

```
 NSUbiquitousKeyValueStore *kvStore = [NSUbiquitousKeyValueStore defaultStore];
    [kvStore setObject:@"th" forKey:@"KVTickle"]; 
```

# java - 使用 Java JSch 进行 SFTP 文件传输

> ID：15108923
> 
> 赞同：30
> 
> 时间：2013-02-27T09:50:17.373
> 
> 标签：java, ssh, sftp, file-transfer, jsch

这是我的代码，它在远程服务器上检索文件的内容并显示为输出。

```
package sshexample;

import com.jcraft.jsch.*;
import java.io.*;

public class SSHexample 
{
public static void main(String[] args) 
{
    String user = "user";
    String password = "password";
    String host = "192.168.100.103";
    int port=22;

    String remoteFile="sample.txt";

    try
    {
        JSch jsch = new JSch();
        Session session = jsch.getSession(user, host, port);
        session.setPassword(password);
        session.setConfig("StrictHostKeyChecking", "no");
        System.out.println("Establishing Connection...");
        session.connect();
        System.out.println("Connection established.");
        System.out.println("Creating SFTP Channel.");
        ChannelSftp sftpChannel = (ChannelSftp) session.openChannel("sftp");
        sftpChannel.connect();
        System.out.println("SFTP Channel created.");
        InputStream out= null;
        out= sftpChannel.get(remoteFile);
        BufferedReader br = new BufferedReader(new InputStreamReader(out));
        String line;
        while ((line = br.readLine()) != null) 
        {
            System.out.println(line);
        }
        br.close();
        sftpChannel.disconnect();
        session.disconnect();
    }
    catch(JSchException | SftpException | IOException e)
    {
        System.out.println(e);
    }
}
} 
```

现在如何实现将文件复制到本地主机的程序以及如何将文件从本地主机复制到服务器。

在这里如何使任何格式的文件的文件传输工作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-11-03T08:54:31.617

使用 JSch 通过 SFTP 上传文件的最简单的方法是：

```
JSch jsch = new JSch();
Session session = jsch.getSession(user, host);
session.setPassword(password);
session.connect();

ChannelSftp sftpChannel = (ChannelSftp) session.openChannel("sftp");
sftpChannel.connect();

sftpChannel.put("C:/source/local/path/file.zip", "/target/remote/path/file.zip"); 
```

类似的下载：

```
sftpChannel.get("/source/remote/path/file.zip", "C:/target/local/path/file.zip"); 
```

* * *

*您可能需要[处理`UnknownHostKey`异常](https://stackoverflow.com/q/32852906/850848#32858953)。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-28T12:37:27.233

用法：

```
sftp("file:/C:/home/file.txt", "ssh://user:pass@host/home");
sftp("ssh://user:pass@host/home/file.txt", "file:/C:/home"); 
```

[执行](https://stackoverflow.com/a/37067557/448078)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-30T08:08:18.267

下面的代码对我有用

```
 public static void sftpsript(String filepath) {

 try {
  String user ="demouser"; // username for remote host
  String password ="demo123"; // password of the remote host

   String host = "demo.net"; // remote host address
  JSch jsch = new JSch();
  Session session = jsch.getSession(user, host);
  session.setPassword(password);
  session.connect();

  ChannelSftp sftpChannel = (ChannelSftp) session.openChannel("sftp");
  sftpChannel.connect();

  sftpChannel.put("I:/demo/myOutFile.txt", "/tmp/QA_Auto/myOutFile.zip");
  sftpChannel.disconnect();
  session.disconnect();
 }catch(Exception ex){
     ex.printStackTrace();
 }
   } 
```

**或使用 StrictHostKeyChecking 作为“否”（安全后果）**

```
public static void sftpsript(String filepath) {

 try {
  String user ="demouser"; // username for remote host
  String password ="demo123"; // password of the remote host

   String host = "demo.net"; // remote host address
  JSch jsch = new JSch();
   Session session = jsch.getSession(user, host, 22);
   Properties config = new Properties();
   config.put("StrictHostKeyChecking", "no");
   session.setConfig(config);;
   session.setPassword(password);
   System.out.println("user=="+user+"\n host=="+host);
   session.connect();

  ChannelSftp sftpChannel = (ChannelSftp) session.openChannel("sftp");
  sftpChannel.connect();

  sftpChannel.put("I:/demo/myOutFile.txt", "/tmp/QA_Auto/myOutFile.zip");
  sftpChannel.disconnect();
  session.disconnect();
 }catch(Exception ex){
     ex.printStackTrace();
 }
   } 
```

# mvvmcross - 如何使用 Mvvmcross 定位 .NET 4.0？

> ID：15108924
> 
> 赞同：3
> 
> 时间：2013-02-27T09:50:27.163
> 
> 标签：mvvmcross, portable-class-library

我想使用 Mvvmcross 为多个平台制作应用程序。

我将 Profile 104 用于 Mvvmcross 等 PCL 库，但此配置文件针对 .NET 4.5。我想以 .NET 4.0 为目标，以便在 Windows XP 上使用我的应用程序。

为此，我添加了 xml 文件

> MonoAndroid，版本 = v1.6 +。xml

和

> VSMonoTouch，版本 = v1.0 +。xml

在允许我定位的配置文件 143 中。NET 框架 4.0.3。

但是，我有一个编译错误，因为它找不到 ICommand 接口。这个接口在 4.0 和 4.5 版本之间不在同一个库中，为什么它不起作用？或者我应该使用配置文件 143 重新编译所有 Mvvmcross 库吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:02:04.293

这是可移植类库的限制。

请参阅以下表格：http: [//msdn.microsoft.com/en-us/library/gg597391.aspx](http://msdn.microsoft.com/en-us/library/gg597391.aspx)

> 模型-视图-视图模型 (MVVM)
> 
> 只有 4.5

这意味着如果有人想在早期的 .Net 平台上使用 MvvmCross，则必须有人构建和维护非 PCL 版本。

由于 Mvx 的维护者（我！）决定只维护 MvvmCross 的 PCL 版本，因此任何非 PCL 支持都必须由社区创建。

对于 WPF，这不应该是太大或太难的工作 - 但它可能是......

* * *

或者，有人*可能*会做*一些时髦*的事情来获得`ICommand`工作......我已经重新标记了这个问题，`portable-class-library`试图吸引一些 MS 专家。

# java - 考虑线程安全的 JAXWS 与 Apache CXF 客户端？

> ID：15108926
> 
> 赞同：2
> 
> 时间：2013-02-27T09:50:34.640
> 
> 标签：java, web-services, thread-safety, jax-ws, cxf

我曾经使用 JAX-WS 来生成客户端存根。但是，我最近了解到 JAX-WS 不是线程安全的，而 Apache CXF 是线程安全的。[我在这里](http://cxf.apache.org/faq.html#FAQ-AreJAXWSclientproxiesthreadsafe?)读过它。每次需要时都创建一个新的代理实例不是一种选择，因为创建代理需要很长时间。另外，我没有 Apache CXF 的背景。

*   考虑到线程安全问题，在制作客户端存根时，您认为哪个更好？是 Apache CXF 还是 JAX-WS？为什么更好？
*   我应该考虑两者的区别和相似之处是什么？
*   我应该使用 Apache CXF 并屈服于它的线程安全特性而不是使用 JAX-WS 吗？这是考虑到用户量很可能会达到数十万。
*   向我建议的其他选项是使用 JAX-WS 并创建一个代理池。考虑到可能的用户数量，我对这个解决方案有些犹豫。这是一个好的解决方案吗？
*   有没有其他方法可以使 JAX-WS 线程中的代理安全？

# php - 使用 PHP 获取从一个页面传递到另一个页面的变量

> ID：15108928
> 
> 赞同：2
> 
> 时间：2013-02-27T09:50:43.300
> 
> 标签：php, jquery, jquery-mobile

我希望有人能帮助我。我试图在我的 jQuery 移动网站中将变量从一个页面传递到另一个页面，您可以在此处看到：http: [//www.muskermcintyre.co.uk/tablet](http://www.muskermcintyre.co.uk/tablet)。

我会这样做的通常方法如下：

*   在列表视图页面上有一个看起来像这样的链接：

> `<a href="#fullDetails?profileID=123456">View details</a>`

*   然后我需要在我的完整详细信息页面上使用 $_GET['profileID'] 从数据库中获取正确的属性，显然只是获取从上一页的链接传递的 profileID。看来这在 jQuery mobile 中是不可能的。

请任何人都可以建议最好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:54:29.833

您可以对 JavaScript 使用与 PHP 中相同的方法，唯一的区别是您没有将查询字符串变量作为名为 $_GET 的数组，您必须自己解析它们。请参阅此答案： [如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:01:55.590

PHP 是一种服务器端脚本语言。
一旦您的页面被加载（即生成 HTML）。您将不得不使用 JavaScript 或 JQuery。
或者您将不得不回发到服务器以呈现新的 HTML。

# permissions - 控制对 TFS 电动工具“团队成员”的修改权限

> ID：15108929
> 
> 赞同：0
> 
> 时间：2013-02-27T09:50:46.050
> 
> 标签：permissions

安装 TFS Power Tools 后，您会在“团队资源管理器”中获得一个额外的节点“团队成员”，它带来了一些非常方便的功能。在这里，您可以将所有用户安排到团队中，为您提供一个很好的概览。

问题是，当每个人都修改这些时，维护和保证团队和团队成员的正确性就变成了一场噩梦。

是否可以通过指定谁可以编辑团队来控制此处的访问/权限？

我在 Win7 上使用 TFS2010 和 Visual Studion 2010。

亲切的问候，莫内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:13:59.013

不，但在 TFS 2012 中，团队成为一等公民。

这些都可以得到充分保护和控制。

[有关MSDN](http://msdn.microsoft.com/en-us/library/vstudio/hh500417.aspx)的更多详细信息。

# python - python输出中的字体格式

> ID：15108930
> 
> 赞同：1
> 
> 时间：2013-02-27T09:50:46.727
> 
> 标签：python, rtf

我正在尝试更改 python 中的输出字体。我读过你可以使用 Tkinter 包，但它对我来说太复杂了。

我正在尝试解析两个文档，一个是纯文本，另一个是斜体。我希望输出从每个文档中交替显示，纯斜体和斜体。

目前，该程序显示第一行纯文本，第二行以斜体显示，然后全部以斜体显示。

我想知道是否有任何方法可以更改/重置控制台输出中的字体格式。

谢谢，

这是程序。基本上我不知道该怎么做才能获得不同格式的输出：一种是纯文本，另一种是斜体。我在 Windows 下的 Python 3 中运行它。

```
L1 = open ('vera.txt','r',-1,'utf-8')
L2 = open ('vera_en2.txt','r',-1,'utf-8')
O = open ('output.txt','w',-1,'utf-8')
for line in L1:
    line2 = L2.readline()
    print(line, end='')
    print(line2)
    O.write(line)
    O.write(line2)
    O.write("\n")
L1.close()
L2.close()
O.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:01:51.207

您 的字体中似乎有一个[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)`vera_en2.txt`将字体设置为斜体。打开文件或打印该文件`repr()`的第一行以验证这一点。

显然您已经在与 ANSI 兼容的终端中工作，否则您不会看到斜体文本。因此，您应该能够使用 重置字体`print("\033[0m")`，并使用 再次启用斜体`print("\033[3m")`。

如果这一切看起来太深奥，我建议使用[colorama](https://pypi.python.org/pypi/colorama)。

**编辑：**

啊，所以你想写一个带有一些斜体文本的 RTF 文件。而且您的 .txt 文件实际上并不是 .txt 文件。这和我上面解释的完全不同。

通过分析实际 rtf 的纯文本，我想出了这个小例子。它生成一个带有普通、斜体和粗体字的小 rtf 文件；\i 和 \b 用于切换这些格式。

```
# open file
myrtf = open('myrtf.rtf', 'w ')

# write some necessary header info
myrtf.write(r'{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fswiss\fcharset0 Arial;}}')

# write the actual text - notice I'm using raw strings (r'')
myrtf.write(r'normal \i italic \i0 \b bold \b0 normal\n')

# write end of file stuff
myrtf.write(r'}\n\x00')

# close file
myrtf.close() 
```

另外，回答另一个问题；在控制台中使用斜体可能很困难，大多数终端都不支持它。

要使上述代码示例适应您的问题：

```
L1 = open ('file1.txt','r')
L2 = open ('file2.txt','r')
O = open ('output.rtf','w')

# write header
O.write(r'{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fswiss\fcharset0 Arial;}}')

for line in L1:
    line2 = r"\i  " + L2.readline() + r" \i0\line\par" # make text from L2 italic
    print(line, end='')
    print(line2)
    O.write(line)
    O.write(line2)

# close rtf
O.write(r'}\n\x00')

L1.close()
L2.close()
O.close() 
```

**另一个补充：**

根据我们在评论中的讨论，这是通过编写 html 文件而不是 rtf 来实现的一种方法：

```
L1 = open ('file1.txt','r')
L2 = open ('file2.txt','r')
O = open ('output.html','w')

# write header
O.write(r'<html><head><title>Foobar</title></head><body><table>')

for line in L1:
    line2 = r"<i>" + L2.readline() + r"</i></br>" # make text from L2 italic
    O.write("<tr>")
    O.write("<td>%s</td>" % line)
    O.write("<td>%s</td>" % line2)
    O.write("</tr>\n")

# footer
O.write(r'</table></body></html>')

L1.close()
L2.close()
O.close() 
```

[**在这里**](http://jsfiddle.net/mYJTb/)，您可以看到当 file1.txt 和 file2.txt 是 Beowulf 诗句的古英语和现代版本时的结果。

# c - C - %x 格式说明符

> ID：15108932
> 
> 赞同：89
> 
> 时间：2013-02-27T09:50:53.190
> 
> 标签：c, string, security, format

我有一个小问题。我知道 %x 格式说明符可用于在格式字符串攻击中从堆栈中读取值。

我找到了以下代码：

```
%08x%08x%08x%08x 
```

08是什么意思？它到底在做什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-02-27T09:53:49.630

分解：

*   `8`表示要显示 8 位数字
*   `0`你想用`0`'s而不是空格作为前缀
*   `x`您想以小写十六进制打印。

快速示例（感谢 Grijesh Chauhan）：

```
#include <stdio.h>
int main() {
    int data = 29;
    printf("%x\n", data);    // just print data
    printf("%0x\n", data);   // just print data ('0' on its own has no effect)
    printf("%8x\n", data);   // print in 8 width and pad with blank spaces
    printf("%08x\n", data);  // print in 8 width and pad with 0's

    return 0;
} 
```

输出：

```
1d
1d
      1d
0000001d 
```

另请参阅[http://www.cplusplus.com/reference/cstdio/printf/](http://www.cplusplus.com/reference/cstdio/printf/)以供参考。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T09:53:41.440

`%08x`意味着每个数字都应打印至少 8 个字符宽，并用零填充所有缺失的数字，例如对于 '1' 输出将是`00000001`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-04T09:20:13.193

您提到的对 printf 的格式字符串攻击并非特定于“％x”格式 - 在任何情况下 printf 的格式参数多于传递的变量，它都会从堆栈中读取不属于它的值。例如，您将遇到与 %d 相同的问题。当您想将这些值视为十六进制时，%x 很有用。

如先前答案中所述， %08x 将生成一个 8 位十六进制数，并用前面的零填充。

在 printf 中使用代码示例中的格式，不带其他参数：

```
printf ("%08x %08x %08x %08x"); 
```

将从堆栈中获取 4 个参数并将它们显示为 8 位填充的十六进制数字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T09:52:29.883

这指定了您希望它显示多少位数。

> 指定最小字段宽度的整数值或 *。如果需要，结果会用空格字符（默认情况下）填充，右对齐时在左侧，如果左对齐，则在右侧。在使用 * 的情况下，宽度由 int 类型的附加参数指定。如果参数的值为负，则结果是指定的 - 标志和正的字段宽度。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-27T09:54:34.607

来自[http://en.wikipedia.org/wiki/Printf_format_string](http://en.wikipedia.org/wiki/Printf_format_string)

指定宽度选项时，使用 0 而不是空格来填充字段。例如，`printf("%2d", 3)`结果为“3”，而`printf("%02d", 3)`结果为“03”。

# java - Javaassists 和 Java Web Start：类标志与其他类标志不匹配是同一个包

> ID：15108936
> 
> 赞同：0
> 
> 时间：2013-02-27T09:51:05.223
> 
> 标签：java, securityexception, javassist

我正在使用 javaassists 在运行时修改类的行为。当我在我的计算机上运行该应用程序时，一切正常。

但是这个应用程序是由用户使用 Java Web Start 启动的，因此必须对应用程序的 .jar 进行签名。当类在运行时被 javaassists 修改并加载

```
CtClass.toClass() 
```

启动 SecurityException 的方法：

```
java.lang.SecurityException: class "com.sch.coberturas.db.CobDao"'s signer information does not match signer information of other classes in the same package 
```

我可以通过将修改后的类隔离在单个类包中来避免它，但这是一个奇怪的解决方案。还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:14:51.307

就像 OP 要求的那样，我正在为我的评论创建一个答案。

当您使用 SecurityManager 时，您必须始终提供正在使用的受保护域。有了这些信息，javassist 将能够生成具有相同签名信息的类。

这意味着`CtClass.toClass()`您应该使用`ClassPool.toClass(CtClass ct, java.lang.ClassLoader loader, java.security.ProtectionDomain domain)`.

javassist [javadoc中有关此方法的更多信息](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/ClassPool.html#toClass%28javassist.CtClass,%20java.lang.ClassLoader,%20java.security.ProtectionDomain%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-13T12:11:27.340

我想补充一点，如果您要更改的类在它所属的包上有更多类，它也可能引发签名者信息异常。我通过加载它们并将它们添加到我更改课程的同一位置来修复它。

**示例**：

```
ClassPool pool = ClassPool.getDefault();
pool.insertClassPath( new ClassClassPath( this.getClass() ));
ClassLoader loader = this.getClass().getClassLoader();
ProtectionDomain domain = this.getClass().getProtectionDomain();
CtClass class = pool.get("package1.myChangingClass");
// Here goes the code to change the class;
pool.toClass( class, loader, domain );
//
// Now insert code to pre-load other classes with same domain
CtClass otherClass1 = pool.get("package1.someOtherClass1"); // Gets
pool.toClass( otherClass1, loader, domain );                // Preloads
...
CtClass otherClassN = pool.get("package1.someOtherClassN");
pool.toClass( otherClassN, loader, domain );
//
// To be done for all other classes of the same package that throws
// the signer's information exception, after package1.myChangingClass
// is modified and built. 
```

亲切的问候。

# jquery - JCarousel 中的 CSS3Pie

> ID：15108937
> 
> 赞同：1
> 
> 时间：2013-02-27T09:51:07.827
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, jcarousel, css3pie

在将 CSS3PIE 应用于 Typo3 扩展[jcarousel时，我注意到以下奇怪的行为](http://typo3.org/extensions/repository/view/imagecarousel:)

（它基本上使用 jquery jcarousel 插件）。

当我在 IE 7 或 IE 8 中加载页面时，我没有看到 JCarousel 中的图像具有圆角边框（想在它们上应用边框半径）但是当我转到 IE 开发人员工具栏并通过取消选中更改任何 CSS 属性时它的图像得到圆形边框。

我现在的问题是：加载页面时如何让图像直接具有圆形边框？

我已经查看了[jQuery 循环插件分页 + CSS3PIE](https://stackoverflow.com/questions/6499258/jquery-cycle-plugin-paging-css3pie)，但我不知道在扩展使用的包含的 js 文件之一中在哪里搜索类似的位置。

此外，我认为一旦在 IE 开发工具栏中未选中 CSS 属性，它就会起作用。有谁知道 IE 是如何工作的，或者可以从这个事实中得出一个可能对我有帮助的结论。

我感谢您的任何回答，并期待它:)

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:05:48.520

我几乎找到了答案：

当取消选中 IE Developer 工具栏中的某些属性时，它再次呈现 CSS，我必须通过 JQuery 更改一些 CSS 来触发此 CSS 呈现，例如

```
$('.something').addClass('someClass'). 
```

将这样的调用放在 Typo3 JCarousel 扩展（在 jcarousel-1.2.1.min.js 中）的 initCallback 函数的最后一行会产生这样一个事实，即当我第二次调用该页面时它可以工作。剩下的任务就是在第一次调用浏览器时找到使浏览器显示圆角的方法。

顺便说一句：当一些 JS-CSS-Changing 附带（尤其是 CSS3Pie）时，您不应该依赖 IE 开发人员工具栏及其浏览器模式。为此，请使用更好的 IE Tester，因为我在 IE Dev Toolbar 中没有第二次调用浏览器时看到了圆角。我今天得到的另一个热门提示： [http ://www.modern.ie/en-us/virtualization-tools](http://www.modern.ie/en-us/virtualization-tools)

# javascript - 标记移动时防止地图刷新 - Google Maps API

> ID：15108939
> 
> 赞同：0
> 
> 时间：2013-02-27T09:51:12.570
> 
> 标签：javascript, google-maps-api-3

我有一个地理位置地图，用户可以在其中从下拉列表中选择一个位置，然后将该位置作为标记添加到地图中。但是，我刚刚实现了代码来更新人的地理位置（如果他们正在移动），在此功能更新中，它会刷新整个地图并删除该位置的标记。

有没有办法解决整个地图刷新，比如只更新标记位置而不刷新整个地图，或者只是在刷新之前抓取位置然后再将其添加回来的情况？尽管它每 3 秒更新一次，但这似乎对资源很浪费。

示例 Google Maps API 代码会很棒，因为我目前没有手头的示例来展示。

摘要：我希望能够在不刷新整个地图 div 的情况下更新用户位置标记，因为这样会删除任何以前添加的标记。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T12:41:54.217

我认为有很多不同的方法可以防止这种情况。查看 API 文档中的 google.maps.Map 类及其方法。

# javascript - 鼠标悬停div时chrome中的闪烁问题

> ID：15108943
> 
> 赞同：0
> 
> 时间：2013-02-27T09:51:21.743
> 
> 标签：javascript, jquery

我编写了一个 javascript，它根据提供给它的 JSON 数据生成动态元素。

```
 $(function () {
        var list = JSON.parse(@ViewBag.NomineeList);
        var counter = 1;
        var tr;
        $(list).each((function () {
            if (counter % 2 != 0) {
                tr = CreateElems('tr', null, null);
            }
            var td = CreateElems('td', null, null);
            var div = CreateElems('div', 'dvBorder', null);
            div.attr('empID', this.EmpId);
            div.attr('nomineeID', this.Id);
            RegisterEvents(div);
            div.append('<img alt="user" src=' + this.UserImagePath + ' style="padding: 5px;" />');
            div.append(CreateElems('span', 'EmpolyeeName', this.FirstName));
            div.append(CreateElems('span', 'EmployeeEmail', this.Email));
            td.append(div);
            tr.append(td);
            if (counter % 2 == 0) {
                $('#tblEmployee').append(tr);
                tr = "";
            }
            counter++;
        }));
    });

    function CreateElems(type,cssClass,value)
    {
        var elem = $(document.createElement(type));

        if(value != null)
            elem.text(value);

        if(cssClass!= null)
            elem.addClass(cssClass);

        return elem;
    } 
```

我为创建的动态元素注册了三个不同的事件。

```
 function RegisterEvents(crntDiv) {
        var url;
        $(crntDiv).click(function () {
            url = "/home/SaveVote?nomineeId=" + $(crntDiv).attr('nomineeID');
            AjaxCall(url, false, crntDiv);
        });

        $(crntDiv).mouseover(function () {
            RemoveToolTip();
            url = "/home/GetDescription?nomineeId=" + $(crntDiv).attr('nomineeID');
            AjaxCall(url, true, crntDiv);
        });

        $(crntDiv).mouseout(function () {
            $(crntDiv).children('div.RollOverTip').remove();
        });

    } 
```

当您将鼠标悬停在工具提示上时。在那个事件中，我正在检查 dom 中是否存在任何以前的工具提示，它应该被删除。

```
 function RemoveToolTip() {
            $('#tblEmployee').find('div.RollOverTip').remove();
        } 
```

但是有时浏览器上会出现两个以上的三个工具提示。这也可以优化一下。

html

```
<table border="0" cellpadding="5" cellspacing="0"  id="tblEmployee">
        </table> 
```

css 类。

```
.dvBorder
{
    background-image: url(/Images/screen2-button.png);
    background-repeat: no-repeat;
    height: 125px;
    width: 400px;
    cursor:pointer;
    position: relative;
}

.RollOverTip
{
    background-image: url("/Images/screen2-rollover-tooltip.png");
    background-repeat: no-repeat;
    color: #000000;
    font-family: Calibri Regular;
    font-size: 18pt;
    height: 199px;
    line-height: 20pt;
    margin-left: 385px;
    position: absolute;
    width: 474px;
    z-index: 90000;
    padding:34px;
} 
```

脚本中有哪些可能的优化，以及消除闪烁的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:54:07.320

尝试使用`mouseenter`和`mouseleave`停止闪烁

```
 $(crntDiv).mouseenter(function () {
        RemoveToolTip();
        url = "/home/GetDescription?nomineeId=" + $(crntDiv).attr('nomineeID');
        AjaxCall(url, true, crntDiv);
    });

    $(crntDiv).mouseleave(function () {
        $(crntDiv).children('div.RollOverTip').remove();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:54:56.483

尝试使用它可能会解决问题，而不是 mouseover 和`mouseenter`mouseout`mouseleave`

**编辑**

试试这个：改变

```
 $(crntDiv).mouseover(function () {...} 
```

至

```
$(document).on('mouseenter',$(crntDiv,'#tblEmployee div.RollOverTip'), function () {...} 
```

# windows-8 - 重复定时 BackgroundTask 的第一次出现何时运行？

> ID：15108945
> 
> 赞同：0
> 
> 时间：2013-02-27T09:51:25.150
> 
> 标签：windows-8

如果您将 a 注册为`BackgroundTask`重复`TimeTrigger`（`OneShot`设置为 false），那么第一次出现的时间是什么时候？在第一`FreshnessTime`分钟之后还是之前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:06:30.577

微软[文档](http://msdn.microsoft.com/en-gb/library/windows/apps/xaml/hh977059.aspx)指出：

> 如果 FreshnessTime 设置为 15 分钟且 OneShot 为 false，则任务将在其注册时间的 0 到 15 分钟之间每 15 分钟运行一次。

**编辑**
我对此进行了几次测试，它似乎在注册后的 15 分钟内随时运行第一次。然后，它会根据上一次运行开始时间的 15 分钟，以常规 15 分钟周期运行未来的事件。

我不确定操作系统如何在内部安排计时器周期，但您的问题的答案不是*after*，不是*before*而是*during*。

注意。您无法立即触发任何计时器后台任务。

# c# - 我在哪里把 overrideMode="Deny" 在 mt config

> ID：15108946
> 
> 赞同：1
> 
> 时间：2013-02-27T09:51:24.453
> 
> 标签：c#, asp.net, config

**我在下面收到此错误**

HTTP 错误 500.19 - 内部服务器错误 无法访问请求的页面，因为该页面的相关配置数据无效。

详细的错误信息

模块认证

通知 AuthenticateRequest

处理程序 ExtensionlessUrl

Handler-Integrated-4.0

错误代码 0x80070021

配置错误 此配置部分不能用于此路径。当该部分锁定在父级别时会发生这种情况。锁定是默认情况下 (overrideModeDefault="Deny") 或由具有 overrideMode="Deny" 或旧 allowOverride="false" 的位置标记显式设置的。

**这是我的配置文件**

```
<configuration>
<connectionStrings>
    <add name="DBConnection" connectionString="data source=12.12.16.117;Initial Catalog=web_prof_global; User ID=1111;Password=1111;persist security info=True;packet size=4096" providerName="System.Data.SqlClient" />
    <add name="DBConnectionSf" connectionString="data source=12.12.16.117;Initial Catalog=webCommon; User ID=1111;Password=1111;persist security info=True;packet size=4096" providerName="System.Data.SqlClient" />
</connectionStrings>
<system.web>
    <compilation debug="false" targetFramework="4.0" />
</system.web>
   <system.webServer>
    <security>
        <authentication>
            <basicAuthentication enabled="true" />
        </authentication>
    </security>
<modules runAllManagedModulesForAllRequests="true"  />

    <defaultDocument>
        <files>
            <add value="s-f.aspx" />
        </files>
    </defaultDocument>

</system.webServer>

</configuration> 
```

你能帮忙吗

# php - 与 Netbeans 进行团队合作的最佳方式

> ID：15108960
> 
> 赞同：-1
> 
> 时间：2013-02-27T09:52:19.500
> 
> 标签：php, netbeans, ftp, sync

到目前为止，我一直使用 Netbeans 提供的 FTP 传输。每次我写入和保存时，它都会将文件上传到服务器。

现在我有一个项目，我和我的同事必须开展工作。上面的方法不再是最好的了，因为如果我做一些更改并保存，所以我的同事，我们会覆盖彼此的修改。

在同一个 PHP/CSS/HTML 项目上合作的最佳方式是什么？你也可以提供一些指导吗？

谢谢。

PS：操作系统Win7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:17:14.377

我个人在与团队一起处理项目时使用[Mercurial (Hg) 。](http://mercurial.selenic.com/)

有一个[使用 Mercurial 和 NetBeans 的教程](http://netbeans.org/kb/docs/ide/mercurial.html)。

当您的团队很小时，您可以使用 bitbucket.org 来托管您的项目，因为它是免费且私有的（但我认为在免费版本中每个项目仅限 5 人）。否则，您可以轻松设置自己的 hg-server。在他们的网站上有很多关于如何使用 Mercurial 的指南

如果您不熟悉分布式版本控制系统。简而言之，它的工作原理如下：

1.  创建文件后，它会被推送到服务器
2.  当人们对该文件（或这些文件）的本地副本进行更改时，他们创建的更改集仅包含他们所做的更改。
3.  每个人都会不时将自己的变更集推送到服务器，并拉取其他人所做的变更。然后合并变更集以包含每个人的更改。
4.  您计算机上的文件会根据您提取的变更集进行更新，以便每个人的文件都是最新的。

只要您不编辑相同的代码行（因为自动合并失败，因为它不知道要保留什么以及要丢弃什么，您必须手动合并）并且您的文件不在二进制数据格式。但在你的情况下，HTML、PHP 和 CSS 都是基于文本的，所以你很高兴。

我希望这会有所帮助。如果您有任何问题随时问。抱歉，我无法发布更多链接，因为我的声誉太低。

# php - 如何在特定键下将元素添加到我的数组中？

> ID：15108963
> 
> 赞同：0
> 
> 时间：2013-02-27T09:52:27.547
> 
> 标签：php, arrays

如何在特定键下将元素添加到我的数组中？

这是我使用 foreach 之前的数组输出。如您所见，错误字段为空。我想填写。

```
Array (
  [0] => Array (
    [transactionid] => 2223
    [created] => 26-02-13 14:07:00
    [cardid] => 10102609
    [pricebefordiscount] => 68900
    [error] =>
  ) 
```

这是我的前锋。如您所见，我已经尝试通过实施来完成这项工作`$arrayname['index'] = $value;`。但这不起作用，当我吐出`print_r`. 为什么会这样？

```
foreach ($samlet as $key)
{
    if ($key['pricebefordiscount'] > '200000') 
    {
        $samlet['error'] = "O/2000";
    }
    if ($key['cardid'] === '88888888') 
    {
        $samlet['error'] = "Testscan";
    }
} 
```

这是所需的输出：

```
Array (
  [0] => Array (
    [transactionid] => 2223
    [created] => 26-02-13 14:07:00
    [cardid] => 10102609
    [pricebefordiscount] => 68900
    [error] => "Testscan"
  ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:55:29.087

更改您的`foreach`, 以便您拥有*“主”* `$samlet`数组中使用的索引：

```
foreach($samlet as $key => $array)
{
    if ($array['cardid'] === '88888888')
    {
        $samlet[$key]['error'] = '0/2000';
    }
} 
```

等等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:55:50.263

试试这个 ：

```
foreach ($samlet as &$key){

    if ($key['pricebefordiscount'] > '200000'){
         $key['error'] = "O/2000";
    }
    if ($key['cardid'] === '88888888'){
        $key['error'] = "Testscan";
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:56:09.430

根据[PHP 手册](http://php.net/manual/en/control-structures.foreach.php)：

> 为了能够直接修改循环内的数组元素，在 $value 之前加上 &。在这种情况下，该值将通过引用分配。

所以你的代码应该是这样的：

```
<?php
foreach ($samlet as &$key)
{

    if ($key['pricebefordiscount'] > '200000') 
    {
         $key['error'] = "O/2000";
    }
    if ($key['cardid'] === '88888888') 
    {
        $key['error'] = "Testscan";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:55:02.070

试试这个

```
foreach ($samlet as $key=>$value)
{

    if ($value['pricebefordiscount'] > '200000') 
    {
         $samlet[$key]['error'] = "O/2000";
    }
        if ($value['cardid'] === '88888888') 
    {
        $samlet[$key]['error'] = "Testscan";
    }
} 
```

# php - TYPO3 TCA，隐藏已翻译项目中的选项卡

> ID：15108966
> 
> 赞同：0
> 
> 时间：2013-02-27T09:52:39.247
> 
> 标签：php, typo3

在我的扩展中，我使用 --div-- 为后端创建了几个选项卡，代码如下所示：

```
 'types' => array(
      '0' => array('showitem' => 'sys_language_uid;;;;1-1-1, l10n_parent, l10n_diffsource, hidden;;1,--div--;My Tab, title, category,
    ), 
```

虽然有一种简单的方法可以使用：隐藏翻译项目中的单个字段，但`'displayCond' => 'FIELD:sys_language_uid:=:0',`我不知道如何隐藏整个选项卡。

有人知道我必须如何编写“类型”数组以在翻译记录中隐藏“我的标签”吗？先感谢您。

编辑（解决方案）：使用答案中所述的配置是可能的，但我偶然发现了另一种方法：如果隐藏与选项卡相关联的所有字段，选项`'displayCond' => 'FIELD:sys_language_uid:=:0',`卡也将被隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:07:06.353

我认为您可能需要使用 tsconfig。请查看此链接中的“新内容元素向导 (mod.wizards.newContentElement)”部分：http: [//typo3.org/documentation/document-library/core-documentation/doc_core_tsconfig/4.3.2/view/1/ 5/](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsconfig/4.3.2/view/1/5/)

# php - php ldap 搜索：没有这样的对象

> ID：15108969
> 
> 赞同：8
> 
> 时间：2013-02-27T09:52:49.177
> 
> 标签：php, active-directory, ldap

我是 LDAP 新手，所以我会尝试正确解释
我有一个主机名`"energia.sise"`

我需要获取位于`energia.sise/nej/users`

你能告诉我怎么做吗？

在这段代码中，我试图根据我的电子邮件获取我的记录，但它错误
**警告：ldap_search（）：搜索：没有这样的对象**

```
 $base_dn ="OU=users, OU=nej, DC=energia, DC=sise";
     $ds = ldap_connect("energia.sise") or die("Невозможно соединиться с $ldaphost");

     ldap_bind($ds, "login@energia", "password");

     $filter = '(&(objectClass=user)(CN=*)(mail=kosmos*))';

     $sr = ldap_search($ds, $base_dn, $filter);
     $info = ldap_get_entries($ds, $sr); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T00:32:40.307

除了不必要的过滤器组件 CN=*，正如 Terry Gardner 已经指出的那样，您的过滤器似乎是正确的。因此，我怀疑您的代码可能存在其他问题：

1.  您使用的用户名格式不正确。尝试使用**login@energia.sise**或**ENERGIA\login**绑定。
2.  容器*“OU=users, OU=nej, DC=energia, DC=sise”*不存在。尝试在整个域中搜索 - *“DC=energia, DC=sise”*，看看是否有任何结果。
3.  尽可能在 Active Directory 中使用**ldap v3协议。**这应该在绑定之前设置：

    `**ldap_set_option( $ds, LDAP_OPT_PROTOCOL_VERSION, 3 );**`

4.  我建议您也关闭 ldap v3 的引用处理，因为它有时会导致 AD 出现一些奇怪的行为：

    `**ldap_set_option( $ds, LDAP_OPT_REFERRALS, 0 );**`

在执行这样的搜索操作时，*“No such object”*错误通常是指基本 DN 不存在的事实。如果没有用户匹配您的过滤器，服务器将返回一个空结果集。

希望有帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T11:05:04.120

指定的基础对象`"OU=users, OU=nej, DC=energia, DC=sise"`不存在。基本对象是搜索开始的点 - 只有在基本对象或低于基本对象的条目才会在搜索结果中返回，除非在搜索的情况下`one-level`，在这种情况下不返回基本对象。

在编写代码之前，使用已知好的工具`ldapsearch`来确定所需的请求参数是否正确：

```
ldapsearch -h energia.sise -p port-number \
     -D login@energia -w password \
     -b ou=users,ou=nej,dc=energia,dc=sise -s sub \
     '(&)' 1.1 
```

如果上面显示错误表示基础对象不存在，则找到正确的基础对象并重试。

作为旁注，与不存在基础对象的问题无关，过滤器组件`cn=*`不是必需的，并且会导致搜索时间增加，因为`cn=*`是**现有**过滤器，这意味着包含`cn`属性的条目将匹配搜索条件。除非我弄错了，否则objectClass`cn`需要该属性，因此使用两者的过滤器只会导致服务器在搜索上花费更多时间。`User``&``objectClass=User``cn=*`

### 也可以看看

*   [LDAP：搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-09T17:34:42.607

# 更新

**更新：**使用 LDAP 浏览器免费版（在[此处查看](http://www.ldapadministrator.com/)）很好，因为您可以简单地浏览 LDAP 服务器，它可以帮助您了解是否可以绑定匿名等。但最大的好处是获得`DN`（复制和粘贴）。之后，我能够读取数据。

我遇到了以下问题，这就是我解决的方法：

## 问题 1

*   **问题 1：**即使我可以通过 LDAP 浏览器软件匿名连接，也无法绑定

*   **解决方案：**按照上面的建议在绑定之前添加以下行：

    ```
    ldap_set_option( $ldapconn, LDAP_OPT_PROTOCOL_VERSION, 3 );
    ldap_set_option( $ldapconn, LDAP_OPT_REFERRALS, 0 ); 
    ```

    在此之后，我能够绑定...

## 问题 2

*   **问题 2：**无法搜索...

*   **解决方案：**打开 LDAP 浏览器。检查连接以确保您可以连接到 LDAP 服务器。浏览示例记录。右键单击并转到属性并复制 DN 并在代码中替换它，就是这样！

* * *

# 原帖如下图：

我似乎无法搜索，我正在使用 LDAP Browser 4.5 免费版来确保一切正常...

这是我的代码：

```
function ldap_anon_connect($ein){

    $ldaphost = "ldap://link_to_ldap.com";

    //create a connection to ldap server
    $ldapconn = ldap_connect($ldaphost) or die("Couldn't connect to " .$ldaphost);
        if ($ldapconn) {

            ldap_set_option( $ldapconn, LDAP_OPT_PROTOCOL_VERSION, 3 );
            ldap_set_option( $ldapconn, LDAP_OPT_REFERRALS, 0 );

            $ldapbind = ldap_bind($ldapconn);
            if ($ldapbind) {

                // if binds, look some stuff up
                $info = ldap_annon_get_profile($ein, $ldapconn);
                return $info;
             } 
             else{
                echo "Invalid EIN. Please Try again";
                die();
             }

    }

}

function ldap_annon_get_profile($ein, $ldapconn){

        $filter = "(cn=".$ein.")";

    $justthese = array(
                                "cn","sn","givenName","displayName","mail","EmployeeClass","ManagerEIN",
                                "mobile","title","c","PersonalTitle"
                );

                $sr = ldap_search($ldapconn, "o=CO,ou=COplc,ou=people", $filter, $justthese);
                        $info = ldap_get_entries($ldapconn, $sr);

                        return $info;

    } 
```

我已经仔细检查了我的 DN=" `o=CO,ou=COplc,ou=people`" 这是正确的字符串，因为我可以在 LDAP 浏览器中查找这些内容...

有任何想法吗？

# objective-c - Apple Mach-0 链接器错误重复

> ID：15108975
> 
> 赞同：0
> 
> 时间：2013-02-27T09:53:08.707
> 
> 标签：objective-c, xcode, linker-errors, duplicate-symbol

我已经编写了一个简单的程序，但是出现重复的符号链接器错误（下面的错误）除了@interface Fraction 之外，.h 文件中没有任何其他内容：NSObject @end

我对xcode相当陌生。

```
//SAMPLE CODE

#import "JTViewController.h"

@interface Fraction ()

-(void) print;
-(void) setNumerator: (int) n;
-(void) setDenominator: (int) d;

@end

@implementation Fraction

{
    int numerator;
    int denominator;
}

-(void) print
{
    NSLog (@"%i/%i", numerator, denominator);
}

-(void) setNumerator:(int)n
{
    numerator = n;
}

-(void) setDenominator:(int)d
{
    denominator = d;
}

@end

int main (int argc, char * argv[])
{
    @autoreleasepool {

        // Create an instance of Fraction and initialise it

        Fraction *myFraction = [[Fraction alloc] init];

        //Set Fraction to 1/3

           [myFraction setNumerator: 1];
            [myFraction setDenominator: 3];

            //Display the fraction using the print method

            [myFraction print];
        }

        return 0;
    } 
```

这是错误

```
Ld /Users/jamesmurray/Library/Developer/Xcode/DerivedData/BrandNew-akqlirretjwoeuaqkrwlbqmlqxlc/Build/Products/Debug-iphonesimulator/BrandNew.app/BrandNew normal i386
    cd /Users/jamesmurray/AppsDev/BrandNew
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -L/Users/jamesmurray/Library/Developer/Xcode/DerivedData/BrandNew-akqlirretjwoeuaqkrwlbqmlqxlc/Build/Products/Debug-iphonesimulator -F/Users/jamesmurray/Library/Developer/Xcode/DerivedData/BrandNew-akqlirretjwoeuaqkrwlbqmlqxlc/Build/Products/Debug-iphonesimulator -filelist /Users/jamesmurray/Library/Developer/Xcode/DerivedData/BrandNew-akqlirretjwoeuaqkrwlbqmlqxlc/Build/Intermediates/BrandNew.build/Debug-iphonesimulator/BrandNew.build/Objects-normal/i386/BrandNew.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.1 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/jamesmurray/Library/Developer/Xcode/DerivedData/BrandNew-akqlirretjwoeuaqkrwlbqmlqxlc/Build/Products/Debug-iphonesimulator/BrandNew.app/BrandNew

duplicate symbol _main in:
    /Users/jamesmurray/Library/Developer/Xcode/DerivedData/BrandNew-akqlirretjwoeuaqkrwlbqmlqxlc/Build/Intermediates/BrandNew.build/Debug-iphonesimulator/BrandNew.build/Objects-normal/i386/main.o
    /Users/jamesmurray/Library/Developer/Xcode/DerivedData/BrandNew-akqlirretjwoeuaqkrwlbqmlqxlc/Build/Intermediates/BrandNew.build/Debug-iphonesimulator/BrandNew.build/Objects-normal/i386/JTViewController.o
ld: 1 duplicate symbol for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我不知道它是从哪里来的。任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:56:33.377

就像链接器错误所说的那样，您有两个`main()`功能；一进`main.m`一进`JTViewController.m`。

删除其中的一项`JTViewController.m`（将功能移至`main.m`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:42:24.607

这里没有什么特别的`main`。您的目标文件中只能有一个全局可见的非通用符号。非静态函数是全局可见且不常见的符号，因此您只能将具有特定名称的函数定义一次。例如：

`a.c`：

```
int func() { ... } 
```

`b.c`：

```
void func(int arg) { ... } 
```

当这两个文件都被编译时，它会创建两个全局可见的符号，名称为`func`（编译器可能对符号应用的任何修饰），尽管参数列表和返回类型有所不同。当链接器试图解析所有符号引用以生成最终的可执行文件时，它面临着选择正确版本的艰难选择`func`，因此它采用了最直接的方法——简单地给你一个关于重复符号定义的错误并退出。

这不是 C 语言独有的要求（Objective-C 基本上是 C 的运行时扩展），因为它是由系统链接器强加的。它还可以翻译成许多其他语言，如 Objective-C、C++、Fortran、Pascal 等。在 C++ 中，函数符号根据它们所在的命名空间和参数列表进行修饰（前者启用函数重载），但又是一个在不同源文件中定义的同一命名空间中不能有两个具有相同参数列表的函数。

通常 C 和 C++ 函数被编译为全局可见的符号，除非`static`应用了修饰符：

`a.c`：

```
static int func() { ... } 
```

`b.c`：

```
void func(int arg) { ... } 
```

这不会导致全局符号与`func`in`a.o`发生冲突，`b.o`链接器也不会抱怨。如果`func`in`b.c`给予`static`治疗或如果两个功能都是，它也将起作用`static`。

# javascript - Div 在窗口调整大小时调整大小

> ID：15108978
> 
> 赞同：0
> 
> 时间：2013-02-27T09:53:26.547
> 
> 标签：javascript, jquery, html

我遇到的问题是，当**加载内容时，所有 5 个 div 都适合，但是当我调整窗口大小时，容器的大小不再适合布局。**

为了使布局我使用同位素和这个脚本来使图像适合 .small_box div：

```
 // fittocontainer
    jQuery.fn.fittocontainer =
    function(){
        var div = this.parent();
        var img = this;
        var imAR = img.attr("height") / img.attr("width");
        var bgAR = div.height() / div.width();
        if(imAR >= bgAR){
            img.attr("width" , div.width());
            img.attr("height" , div.width() * imAR);
        }else{
            img.attr("height" , div.height());
            img.attr("width" , div.height() / imAR);
        }
        div.css({
            "overflow" : "hidden"
        });
        img.css({
            "left" : (div.width() - img.attr("width"))/2,
            "top" : (div.height() - img.attr("height"))/2
        });
        img.fadeIn();
    }; 
```

这个CSS：

```
 .layout_container{
        width: 100%;
        overflow: hidden;
        height: 100%;
        position: absolute;
        top: 0;
        .layout{
            width: 103%;
            height: 100%;
            position: absolute !important;
            top: 0;
            left: 0;
            z-index: 1;
            overflow: hidden;
            min-height: 100%;
            max-height: 100%;
            margin-left: -0.5%;
            .small_box{
                width: 32%;
                overflow: hidden;
                height: 49%;
                margin-right: 1%;
                margin-bottom: 1%;
                &.large_h{
                    height: 100%;
                }
            }
            img{
                display: none;
            }
            iframe{
                width: 100%;
            }
        }
    } 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:00:51.150

向浏览器添加一个调整大小事件，在调整窗口大小后再次对容器进行数学运算：

```
var globalResizeTimer = null;

$(window).resize(function() {
    if(globalResizeTimer != null) window.clearTimeout(globalResizeTimer);
    globalResizeTimer = window.setTimeout(function() {
        $.fittocontainer();
    }, 200);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:59:01.113

这可能是你的答案

[http://www.stackoverflow.com/questions/2720310/resize-div-on-browser-resize](http://www.stackoverflow.com/questions/2720310/resize-div-on-browser-resize)

# google-play - Google Play 的官方 API？

> ID：15108986
> 
> 赞同：3
> 
> 时间：2013-02-27T09:53:44.197
> 
> 标签：google-play

我想知道是否有官方的 Google Play API 可用？看过旧帖子后，似乎没有一个 2010/11 年左右的帖子，但情况可能发生了变化？

还是有非官方的：

[https://code.google.com/p/android-market-api/](https://code.google.com/p/android-market-api/)但这看起来并没有得到维护。我还遇到了[http://dev.appaware.com/](http://dev.appaware.com/)，它有一个 API，您可以使用它来查找通过他们的服务注册的应用程序。

然而，我想做的是检索一个类别中的应用程序并在网站上列出它们的详细信息。

任何指针等都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:47:02.287

不，目前没有。

# mysql - Mysql 获取多个前后行

> ID：15108987
> 
> 赞同：1
> 
> 时间：2013-02-27T09:53:45.813
> 
> 标签：mysql, sql

我很难创建一个 MySql 查询，它将逐行搜索一个表，然后在每一侧返回 5 个周围的行。

问题是行是按字母顺序排列的，我们不能使用 id 字段

基本上，重点是获得 11 行，当前行正好位于中间，同时按字母顺序排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:09:25.867

这真的很容易`union`。尝试这个：

```
(select t.* from t where t.col <= YOURNAME
 order by t.col desc
 limit 6
)
union all
(select t.* from t where t.col > YOURNAME
 order by t.col
 limit 5
)
order by t.col 
```

查询的第一部分返回之前的五个。第二个返回五个之后。

顺便说一句，如果你有重复，你可能想要这个：

```
(select t.* from t where t.col = YOURNAME)
union all
(select t.* from t where t.col < YOURNAME
 order by t.col desc
 limit 5
)
union all
(select t.* from t where t.col > YOURNAME
 order by t.col
 limit 5
)
order by t.col 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:15:21.850

所以你想选择一系列行，row_number 应该是你的朋友，因为你说你不能依赖 id。检查这个被广泛接受和详细的[SO answer](https://stackoverflow.com/a/3127004/1297603) about the use of `mySQL ROW_NUMBER`.

然后试试这个有效的[SQL Fiddle 代码](http://sqlfiddle.com/#!9/f8d0e/2)。但是我仍在对其进行一些调整，因为它确实通过设置行上的值来恢复您需要的`WHERE tt.row_number between 3 and 7`行数，但是这些行不在您以某种方式选择的行周围。棘手的事情。

测试数据：

```
id    col1
1    adfg
2    sg5r
3    34tdfgdf
4    ergdfd
5    ghjghghj
6    4gfhfrgfr
7    zxcxvfdf
8    sfdgd
9    s8545454
10    7jhgdfe45
11    fbvmso
12    sdfg9dj3
13    zjvjude89
14    _sdfdi3 
```

查询：

```
SELECT Table1.* 
  FROM Table1
 WHERE col1 IN (
              SELECT col1
                FROM (SELECT t.col1, 
                             @curRow := @curRow + 1 AS row_number
                        FROM Table1 t
                        JOIN (SELECT @curRow := 0) r
                      ) tt
               WHERE tt.row_number between 3 and 7
             )
ORDER BY col1; 
```

结果数据：

```
ID  COL1
3   34tdfgdf
6   4gfhfrgfr
4   ergdfd
5   ghjghghj
7   zxcxvfdf 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:21:47.730

如果您的表中没有太多记录，您可以使用临时表来解决它：

```
create temporary table temp_yourtable(
    id int auto_increment,
    ....,
    primary key(id)
)
select ... from yourtable;

select t.* from temp_yourtable t, temp_yourtable t1
    where t1.thealpabeticcolumn = your_key and t.id between t1.id - 5 and t1.id + 5 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T10:13:12.960

根据您的参数尝试如下：

```
SELECT * FROM table WHERE id < 5 LIMIT 10
UNION
SELECT * FROM table WHERE id = 5
UNION
SELECT * FROM table WHERE id > 5 LIMIT 10; 
```

# django - Django 模板标签与包含导航

> ID：15108991
> 
> 赞同：2
> 
> 时间：2013-02-27T09:53:50.503
> 
> 标签：django, django-templates

Django 新手，第一次使用模板引擎。我的问题是...

我的 base.html 中有一个导航 div。现在在其他语言中，我会为 html 的 nav 元素使用包含。在 Django 中，我看到我们有一个叫做模板标签的东西。那么我应该使用模板标签来显示导航或旧学校包含的演示元素（我相信 Django 也支持）？

为了让这个问题成为一个stackoverflow问题，一个例子会很有用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:11:41.870

模板标签实际上是为了应用特殊处理来实现您想要的输出。使用模板标签可以让您访问 Python 语言的所有功能。django 模板语言要简单得多。

我建议您坚持使用 include 而不是编写模板标签。它会更容易阅读。

请记住，您应该在视图中（或模板/模板标记之外的某个位置）生成变量列表。

```
def your_view(request):
    #...
    nav_items = Category.objects.filter(include_in_nav=True)
    return render(request, 'your_page.html', {'nav_items': nav_items}) 
```

然后在 your_page.html 你要做 -

```
{% include 'nav.html' %} 
```

然后`nav.html`会是这样的 -

```
<nav>
    {% for item in nav_items %}
        <a href="{% url cat_page item %}>{{ item.title }}</a>
    {% endfor %}
</nav> 
```

查看有关[模板](https://docs.djangoproject.com/en/1.11/topics/templates/)和[自定义模板标签](https://docs.djangoproject.com/en/1.11/howto/custom-template-tags/)的文档。

# actionscript-3 - ActionScript 3 条码生成器

> ID：15108993
> 
> 赞同：1
> 
> 时间：2013-02-27T09:53:54.840
> 
> 标签：actionscript-3, barcode

有人知道 AS3 的任何好的条形码生成器库吗？我真的很需要它。提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:01:19.033

这是zxing库端口[AS3 zxing](https://github.com/zxing/zxing/tree/master/actionscript)

> ZXing（读作“斑马线”）是一个开源的、多格式的一维/二维条码图像处理库，用 Java 实现，可移植到其他语言。我们的重点是使用手机上的内置摄像头扫描和解码设备上的条形码，而无需与服务器通信。但是，该项目也可用于对台式机和服务器上的条形码进行编码和解码。

原文见这里：[zxing googlecode](https://code.google.com/p/zxing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:58:59.630

见这里：[https ://code.google.com/p/actionscript-barcode-generator/](https://code.google.com/p/actionscript-barcode-generator/)

它是一个到 AS3 的 jQuery 插件端口。

应符合多项条码标准。

# javascript - 浏览器选项卡或应用程序开关？

> ID：15108994
> 
> 赞同：0
> 
> 时间：2013-02-27T09:53:59.317
> 
> 标签：javascript

是否可以区分这些浏览器事件？

*   用户单击了同一浏览器中的另一个选项卡，隐藏了我现在应该暂停的选项卡。
*   他们已切换到另一个应用程序。我的标签可能仍然可见，在这种情况下它应该保持运行。

AFAICS，在每种情况下都会引发相同的模糊/焦点 DOM 事件，因此它们对我没有帮助。

换句话说，是否可以确定选项卡是否实际显示给用户？

（顺便说一句，如果它有什么不同，我不需要它在 IE 或任何其他非 WebGL 浏览器中工作。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:00:23.483

您可以绑定事件`focus`并使其工作`blur`。`window`

这是示例

```
$(window).focus(function() {
   //play
});

$(window).blur(function() {
   //pause
}); 
```