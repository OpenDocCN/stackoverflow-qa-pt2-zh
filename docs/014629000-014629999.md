# StackOverflow 问答 14629000-14629999

# templates - 带有外部 js 库的 Angular 模板

> ID：14629008
> 
> 赞同：0
> 
> 时间：2013-01-31T15:13:52.297
> 
> 标签：templates, jquery-plugins, angularjs, digest, angularjs-directive

我已经制作了元素指令，它通过`templateUrl`参数与模板一起使用。该模板包含文件上传输入，大约需要 8 个外部 js 库（jquery 文件上传插件）。如果我在模板中有这些 js 库的链接（使用标准脚本元素），那么一切正常，但是在加载时浏览器控制台中出现错误：

```
Error: $digest already in progress 
```

如果我将 js 库的链接直接放到有我的指令的页面上，则没有错误，但这不是可重用性的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:23:38.457

您是否尝试`$digest`手动触发？

如果是这种情况，我强烈建议您更改方法，因为您应该让 Angular 决定`$digest`. 如果不可能改变，那么你应该确保你没有`$digest()/$apply()`在`$digest`循环中调用 a 。这样做的方法之一是确保`!scope.$$phase`.

# c# - Infopath Web 表单与 Outlook 邮件的集成

> ID：14629013
> 
> 赞同：0
> 
> 时间：2013-01-31T15:14:09.057
> 
> 标签：c#, .net, vb.net, infopath

您好，当用户单击提交按钮时，是否可以将 Infopath Web 表单与 Outlook 邮件集成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:59:45.263

我认为您不能直接将其与 Outlook 集成，您必须配置 Infopath 表单以通过 smtp 服务器发送电子邮件。

# java - OpenGL - 不需要的 z 轴相机旋转

> ID：14629015
> 
> 赞同：0
> 
> 时间：2013-01-31T15:14:20.040
> 
> 标签：java, opengl, lwjgl

当我在 X 轴上旋转我的相机而 Y 旋转 > 或 < 小于 0 时，它也会旋转 Z 轴。
为什么这样做？

```
if(Keyboard.isKeyDown(Keyboard.KEY_UP)){
    xRot-=speed_rotation;
    glRotatef(-speed_rotation, 1, 0, 0);
}
if(Keyboard.isKeyDown(Keyboard.KEY_DOWN)){
    xRot+=speed_rotation;
    glRotatef(speed_rotation, 1, 0, 0);
}
if(Keyboard.isKeyDown(Keyboard.KEY_LEFT)){
    yRot-=speed_rotation;
    glRotatef(-speed_rotation, 0, 1, 0);
}

if(Keyboard.isKeyDown(Keyboard.KEY_RIGHT)){
    yRot+=speed_rotation;
    glRotatef(speed_rotation, 0, 1, 0);
} 
```

我想我知道是什么原因造成的，但我不太确定......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:20:16.193

不要在键盘处理程序中，只需像您正在做的那样更新 x/y 旋转值并在您绘制之前`glRotate()`发出一*组*。`glRotate()s`

# iphone - 如果我使用 .xib 文件，如何提供 iPad 和 iPhone 5 版本？

> ID：14629017
> 
> 赞同：0
> 
> 时间：2013-01-31T15:14:25.290
> 
> 标签：iphone, ios, ipad, ipad-2

我有一个非常简单的应用程序，每次触摸屏幕时都会显示一段文本。我在文本后面有一个图形，它的基础知识。

我在 2010 年使用 .xib 文件创建了文本字段和图像。

我现在正试图让它既适合 iPhone 5 也适合 iPad 和 iPad Retina。

我不能简单地扩展现有的 .xib 布局，因为它只接受并呈现我所做的最后一个布局。（如果我拉伸到 iPhone 5 的分辨率，它会在 iPhone 4S 上消失）。

是否有基于 iOS 设备引用不同的 .xib 文件？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:16:48.603

根据文档，您可以使用：

1.  myNibName~ipad.xib 和

2.  myNibName~iphone.xib

并且将根据设备加载正确的 xib。

你可以阅读[iOS Supports Device-Specific Resources](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html)。

编辑：

> 你如何区分 iPhone 3.5" 和 iPhone 4.0"

没有特定于 iPhone 4" 的设备修饰符。您必须以可以垂直“拉伸”的方式定义您的笔尖。

唯一的机制是一个 iPhone 4" 特定的 Default-586@2x.png 文件。如果您提供它，那么整个屏幕区域将可供您的应用程序使用。

如果您不提供，则应用程序将以特殊模式运行，其内容显示在 3.5" 区域中。剩余区域由顶部和底部的黑色条带填充。

> iPad 与 iPad 视网膜？

这里没什么特别的，因为这两个设备共享相同的 768x1024 像素的“逻辑”分辨率。像往常一样，您可以使用`@2x`修饰符来提供特定的视网膜分辨率图像；并且，如果您需要它，您可以使用`~ipad@2x`修饰符来提供仅适用于 iPad 的视网膜图像。

例如：

```
iconImage.png          -> non-retina iPhone version
iconImage@2x.png       -> retina iPhone version (also retina iPad version if no ~iPad is given)
iconImage~iPad.png     -> non-retina iPad version
iconImage~iPad@2x.png  -> retina iPad version 
```

编辑：

要使您的 UI 伸展，请转到 IB 中的指标窗格并设置视图高度的垂直弹簧（这是下图中的内部垂直双箭头）。

您将不得不找到自己的方式，特别是如果您有很多子视图。

![在此处输入图像描述](../Images/14a803f8048bcf84a7310b2e37dc9126.png)

# php - 在类似博客的简单文章中缓存 JSON 而不是现成的 HTML 会慢多少

> ID：14629019
> 
> 赞同：0
> 
> 时间：2013-01-31T15:14:28.050
> 
> 标签：php, json, performance, caching

我有一个简单的缓存系统，它的工作原理如下：1\. 编辑器进入管理面板，2\. 输入数据，3\. 数据保存到 MySQL（为了更好地衡量）并放入 HTML 模板。

模板本身是我展示文章的页面的一部分（类似于`<article>...</article>`）。以 HTML 格式保存为 {id}.html

当用户进入页面 /articles/22/ 时，我只是`include()`主模板的相应 HTML 页面。超级简单。

但这有点原始的IMO。我开始怀疑，将 JSON 与标题、内容、标签和内容等字段一起存储，然后用 PHP 解析并放入模板会不会更好。它给了我一些好处（比如可以将数据放在模板中的其他位置），但我的首要任务是速度。

所以 - 我的问题是：获取 JSON（预先保存在文本文件中）、使用 PHP 解析它并放入模板中会比包含预先保存的 HTML 文件慢得多。我知道如果我们同时谈论 100 个请求，这里没什么好奇怪的，但是如果我们谈论更多呢？或者也许我的方法根本不成熟，我应该坚持流行的“用户访问页面，检查缓存文件是多久之前创建的，如果它过期，你包含它或从 SQL 获取”？我不喜欢那样。我只是认为用户没有任何理由参与创建缓存文件。它们唯一的变化是编辑器进行一些更改时，所以让他成为创建缓存文件的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:19:39.523

使用直读缓存将使您走得更远。基本上，如果缓存中不存在对象（可以呈现 HTML、json 或任何在您的流程中工作的内容），您将通读数据库以构建它，一旦构建，您会将其存储在缓存中。

如果对对象进行了更改，您可以删除缓存，并在下次请求时重建它。

至于缓存，您可能想要使用 memcached 之类的东西，尽管 apc 也可以很好地工作。

# javascript - phantomjs : 从其他函数或模块调用 page.evaluate

> ID：14629022
> 
> 赞同：4
> 
> 时间：2013-01-31T15:14:35.040
> 
> 标签：javascript, phantomjs

我正在使用 phantomjs 测试许多页面并试图使我的代码更干净。是否可以从其他功能或模块执行 page.open 并调用 page.evaluate。现在 ：

```
page.open(ADDRESS, function(status) {
           if (status == 'success') {
              page.evaluate(function() {
                return document.querySelector('.error');
                ...... do some more checks
              }):
              .....Run some other code
           } 
```

我想做什么：

```
file check.js : exports.check = function() {
                 page.evaluate(function() {
                return document.querySelector('.error');
                ...... do some more checks
              }): 
```

在 main.js 或其他文件中，我只是调用 check.js 的这个函数来进行检查。这可能需要通过引用调用此函数，但不确定如何执行此操作。如果可以做到这一点，我所有的文件大小都会减小，代码也会更易读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T16:16:31.920

```
exports.check = function(page){ page.evaluate(function() {
                return document.querySelector('.error');
                ...... do some more checks
              }); 
```

这就是我将 phantomJs 封装到脚本中的方式

更多示例 @ [https://github.com/ImaginaryDevelopment/javascript/tree/master/phantom](https://github.com/ImaginaryDevelopment/javascript/tree/master/phantom)

# svn - 如何查看何时发出“svn up”以更新到给定的修订版

> ID：14629024
> 
> 赞同：1
> 
> 时间：2013-01-31T15:14:37.443
> 
> 标签：svn, logging, history, svn-update

是否可以及时检查文件/工作副本何时在本地更新为特定版本（即，即使本地文件被进一步的修订更新覆盖）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:23:06.193

1.  `svn up`更新**工作副本**，而不是存储库
2.  不，你不能检查它（至少在 svn 内部），除了检查文件的时间戳（`use-commit-times`禁用）

# r - R readHTMLTable：错误无法加载外部实体

> ID：14629026
> 
> 赞同：2
> 
> 时间：2013-01-31T15:14:43.293
> 
> 标签：r

我正在尝试使用 XML 命令读取 HTML 表`readHTMLTable`。它是有关 Eurex 页面中的选项的信息。当我运行代码时：

```
info<-readHTMLTable("http://www.eurexchange.com/action/exchange-en/155392-31606/31608/quotesSingleViewOption.do?callPut=Call&maturityDate=201312",which=1) 
```

我收到此错误消息：

```
Error: failed to load external entity "http://www.eurexchange.com/action/exchange-en/155392-31606/31608/quotesSingleViewOption.do?callPut=Call&maturityDate=201312" 
```

我安装了正确的软件包和最新的 r 版本。

有谁知道可能是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T15:26:40.570

使用包 httr 的函数 GET 来检索 html 内容：

```
info<-readHTMLTable(rawToChar(GET("http://www.eurexchange.com/action/exchange-en/155392-31606/31608/quotesSingleViewOption.do?callPut=Call&maturityDate=201312")$content),which=1) 
```

# breeze - 将 Breeze 与来自另一个域的 WebApi 服务一起使用

> ID：14629027
> 
> 赞同：5
> 
> 时间：2013-01-31T15:14:43.683
> 
> 标签：breeze

如何使用现有的 webapi 服务和微风？请注意，我的 webapi 服务位于“server1/api”，而 Web 应用程序位于“server2”。我尝试更改数据服务中的服务名称，但得到一个 XMLHttpRequest 异常 101。这是一个跨域错误。是否可以将轻风与来自另一个域的 webapi 服务一起使用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T21:35:08.730

# 跨域微风应用

是的，可以从一台服务器获取 Breeze 客户端应用程序，并让 Breeze 应用程序与托管在不同服务器上的数据服务进行通信。

当为 CORS 配置服务时， Breeze 客户端应用程序可以在[支持 CORS 的](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing#Browser_support)浏览器上很好地跨域运行。

跨域问题和 CORS 解决方案属于更一般的 Web 安全问题类别。它们不是 Breeze 特定的。我们计划在 Breeze 网站的[“Cool Breeze”](http://www.breezejs.com/documentation/what-are-they)部分发布一个关于 CORS + Breeze 的主题。

* * *

# 更新：2013 年 12 月 10 日

此示例使用原始 CORS 实现，如果您已升级到 Web API2，我们将不再推荐该实现。请阅读这篇出色的文章[“ASP.NET Web API 2 中的 CORS 支持”](http://msdn.microsoft.com/en-us/magazine/dn532203.aspx)，它解释了基本的 CORS 以及如何使用 Web API2 CORS 支持。

这个答案的其余部分保持原样。

* * *

# 使用 CORS 的 Todo 示例

在此之前，请查看[Todo Sample](http://www.breezejs.com/samples/todo)的代码。[该示例的服务器是为 CORS 设置的，已部署到 todo.breezejs.com，您可以通过查看Breeze Todo 示例主题页面](http://www.breezejs.com/samples/todo)底部的 jsFiddle 来查看它的运行情况。

四个兴趣点：

*   *App_Start/ **BreezeSimpleCorsHandler.cs***完成工作

*   *App_Start/ **BreezeWebApiConfig.cs***开启

```
// 在此服务器上启用 CORS
GlobalConfiguration.Configuration.MessageHandlers.Add(new BreezeSimpleCorsHandler());

```

*   IIS7 需要的***Web.config*** 行（IIS8 或 VS2012 的 IIS Express 不需要）

*   *Scripts/app/ **dataservice.js***已准备好指向外部服务器；看到这一行：

    // *** 跨域服务示例 *** //var serviceName = ' [http://todo.breezejs.com/api/todos](http://todo.breezejs.com/api/todos) '; // 不同来源的控制器

希望这能让你暂时渡过难关。

# javascript - 向列表框添加值，但将它们逐行分隔，而不是一行

> ID：14629039
> 
> 赞同：0
> 
> 时间：2013-01-31T15:15:35.580
> 
> 标签：javascript

如何修改下面的代码，以便在单击添加按钮时允许新添加的值出现在单独的行上，而不是仅出现在同一行上？

预期结果：

```
Red
Blue
Green
Yellow 
```

当前结果：

```
RedBlueGreenYellow 
```

HTML：

```
<!DOCTYPE html>

<html>

<head>

<script type="text/javascript">

function add() {
  document.getElementById('list').value += " " + document.getElementById('input').value;
}

</script>

</head>

<body>
<input type="text" style="width: 154px;" id="input">
<input onclick="add()" type="button" style="width: 20px; height: 22px;" value="+" id="add"><br>
<textarea style="height: 75px;" id="list"></textarea>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:17:13.863

更改添加功能，例如，

```
function add() {
  document.getElementById('list').value += " " + document.getElementById('input').value;
} 
```

# apache-flex - BB10 模拟器相机支持

> ID：14629043
> 
> 赞同：0
> 
> 时间：2013-01-31T15:15:54.723
> 
> 标签：apache-flex, air, blackberry-simulator

BB10 Simulator 是否支持相机？

我需要移植现有的 Flex 应用程序并且没有物理设备，但捆绑的相机应用程序在单击时不执行任何操作，并且在 AIR 中启动相机对象时不显示任何内容。

我已将连接到 MBP 的内置摄像头和 USB 摄像头分配给 Fusion VM，但没有看到任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T15:27:38.077

您可以使用笔记本电脑的摄像头，但（不幸的是）只能使用 10.2 模拟器，似乎不支持 10.1，看看这篇文章：[http ://devblog.blackberry.com/2013/08/10-2-gold -模拟器/](http://devblog.blackberry.com/2013/08/10-2-gold-simulator/)。您可以在其中运行 10.1 应用程序，据我所知，没有任何与 AIR 相关的重大更改，因此对于您的情况可能已经*足够*了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T06:49:40.797

我不这么认为，我从developers.blackberry.com 下载了一个名为photobomber 的示例应用程序，我在WMware 上运行它，它无法访问我的笔记本电脑相机。虽然我们需要为您的计算机上的 cam 更改一些设置，但总有一种方法，我认为导入 API？我不确定

# ios - 使用 NSPredicate 搜索对象的 NSMutableArray

> ID：14629045
> 
> 赞同：5
> 
> 时间：2013-01-31T15:15:56.720
> 
> 标签：ios, objective-c, nspredicate

**问题已解决，这是我如何修复它以供像我这样的新手参考，** 我需要删除空格： `ship.countryOfbuild = [[elements objectAtIndex:0] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];`

我不得不像这样改变谓词： `NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"(countryOfBuild contains[cd] %@) OR (shipBuilder contains[cd] %@) OR (name contains[cd] %@) OR (owner contains[cd] %@)",searchText, searchText, searchText, searchText];`

*原始问题*

我正在使用[本教程](http://www.appcoda.com/how-to-add-search-bar-uitableview/)向我的项目添加搜索栏。我让 tableview 一切正常，但搜索功能使应用程序崩溃。我现在搜索的方式是：

```
-(void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
NSPredicate *resultPredicate = [NSPredicate
                                predicateWithFormat:@"SELF contains[cd] %@",
                                searchText];

searchResults = [searchContent filteredArrayUsingPredicate:resultPredicate];
} 
```

这`searchContent`是一个从 .csv 文件中读取的可变数组，如下所示：

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSString* pathToFile = [[NSBundle mainBundle] pathForResource:@"ships" ofType: @"csv"];

NSString *file = [[NSString alloc] initWithContentsOfFile:pathToFile encoding:  NSUTF8StringEncoding error:NULL];

NSArray *allLines = [file componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

searchContent           = [[NSMutableArray alloc] init];

for (NSString* line in allLines) {
    NSArray *elements = [line componentsSeparatedByString:@";"];

    CargoShips* ship = [[CargoShips alloc]init];
    ship.countryOfbuild =  [elements objectAtIndex:0];
    ship.shipBuilder =     [elements objectAtIndex:1];
    ship.hullHashtag =     [elements objectAtIndex:2];
    ship.name =            [elements objectAtIndex:3];
    ship.owner =           [elements objectAtIndex:4];
    ship.shipOperator =    [elements objectAtIndex:5];
    ship.shipDelivery =    [elements objectAtIndex:6];
    ship.shipFlag =        [elements objectAtIndex:7];
    ship.shipClass =       [elements objectAtIndex:8];
    ship.powerPlant =      [elements objectAtIndex:9];
    ship.HP =              [elements objectAtIndex:10];
    ship.speed =           [elements objectAtIndex:11];
    ship.cargoSystem =     [elements objectAtIndex:12];
    ship.numberOfTanks =   [elements objectAtIndex:13];
    ship.size =            [elements objectAtIndex:14];
    [self.searchContent   addObject:ship];
} 
```

我想搜索对象的所有 15 个部分（名称、大小、船级等）

目前，这会因错误而崩溃：

`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Can't use in/contains operator with collection <CargoShips: 0x714e1b0> (not a collection)'`

CargoShips 是我的 NSObject 类。

如何修复 NSPredicate 以在`NSMutableArray`不崩溃的情况下搜索对象？

这是完整的代码，如果这让事情变得更容易[http://pastebin.com/sw12GwHK](http://pastebin.com/sw12GwHK)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T16:06:07.977

您收到此错误是因为船舶不是集合，因此您不能使用包含——我认为您需要在船舶对象中搜索特定字段，并使用 LIKE not CONTAINS：

```
NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"SELF.shipBuilder LIKE[cd] %@",searchText]; 
```

使用 LIKE，您可以在搜索中使用通配符。您还可以使用 BEGINSWITH 或 ENDSWITH 来搜索单词的开头或结尾。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T15:53:29.560

不要`SELF`在您的谓词中使用，因为这将使用 CargoShip 的实际实例。在您的链接示例`SELF`中效果很好，因为它是一个`NSString`.

例如，您可以执行以下操作：

`@"(countryOfBuild contains[cd] %@) OR (shipBuilder contains[cd] %@)"`. 等等等等

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-05T15:35:51.913

我用：

```
NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"self.youProperty contains[c] %@", searchString];
searchArrayObjects = [arrayObjects filteredArrayUsingPredicate:resultPredicate]; 
```

[文档链接](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html "以供参考")

# function - 网格中特定列的 onChange 函数

> ID：14629047
> 
> 赞同：1
> 
> 时间：2013-01-31T15:16:00.557
> 
> 标签：function, grid, kendo-ui, onchange

好的，事情就是这样......我有 3 列的网格：场所顺序、名称和邮政编码

第一列前提顺序是可编辑的（数字）。我想要做的是：创建一个 onChange 函数来保存新插入的数字的值。我知道我需要一个程序，我只想知道如何捕获值（在控制台中），知道我拥有它，然后我将执行该程序。

这是代码

```
PremisesGrid2 = $("#assignedRoute").kendoGrid({
                dataSource: {
                    type: "application/jsonp",
                    transport: {
                        read:
                                {
                                    url: "http://" + servername + "/uBillingServices/Premise/Premise.svc/GetAllPremisesByRoute",
                                    dataType: "json",
                                    data: function () {
                                        return {

                                            Route_ID: selectedID,
                                            UserName: userName,
                                            WorkStation: workStation

                                        }
                                    }
                                }
                    }, pageSize: 10,
                    serverPaging: true,
                    schema: {
                        model: {
                            fields: {
                                ID: { type: "string", validation: { required: true },     editable: false },
                                PostalCode: { type: "string", validation: { required: true }, editable: false },
                                Latitude: { type: "string", validation: { required: true }, editable: false },
                                Longitude: { type: "string", validation: { required: true }, editable: false },
                                IsMember: { type: "string", validation: { required: true }, editable: false },
                                Name: { type: "string", validation: { required: true }, editable: false },
                                RouteOrderBy: { type: "number", validation: { required: true }, editable: true, nullable: false, format: "{0:n2}" }
                            }
                        },
                        data: function (result) {
                            return result.rows || result;
                        },
                        total: function (result) {
                            var data = this.data(result);
                            return result.totalRows || result.length || 0; ;
                        }
                    }
                },
change: onChange,
                dataBound: function (e) {
                    e.sender.select(e.sender.tbody.find(">tr:first"));
                },
                selectable: "multiple",
                scrollable: true,
                filterable: true,
                editable: true,
                groupable: false,
                pageable: {
                    numeric: true,
                    pageSizes: true,
                    previousNext: false
                },
                sortable: {
                    mode: "single",
                    allowUnsort: false
                },
                height: 400,
                columns: [
                { field: "RouteOrderBy", title: "Premise Order", headerAttributes: {
                    style: "font-size:small; text-align:center"
                }, attributes: { style: "text-align:right" }
                },
                    { field: "PostalCode", title: "Assigned Premises", headerAttributes: {
                        style: "font-size:small; text-align:center"
                    }
                    },
                    { field: "Name", title: "Customer", headerAttributes: {
                        style: "font-size:small; text-align:center"
                    }
                    }

                    ]
            }); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:33:49.590

而不是使用[`change`](http://docs.kendoui.com/api/web/grid#change)事件，你应该使用[`save`](http://docs.kendoui.com/api/web/grid#save). `change`当存在不在值中的行时发生变化时被触发。

为了显示编辑值、包含编辑值的 HTML 元素和模型中的项目，您可以使用：

```
save : function (e) {
    console.log("The values entered by the user.", e.values);
    console.log("The jQuery element which is in edit mode.", e.container);
    console.log("The edited model.", e.model);
}, 
```

# php - 注册php

> ID：14629050
> 
> 赞同：-1
> 
> 时间：2013-01-31T15:16:05.577
> 
> 标签：php, mysql, registration

我创建了一个注册表单，您可以在其中提交您的详细信息，并将它们保存在数据库中。我有一个名为“标题”的字段之一的下拉框，并且未提交此数据。我希望我能得到一些关于这个问题的反馈，也许可以解决这个问题。

```
 <!DOCTTYPE html>
<head><link rel="stylesheet" type="text/css" href="style/style.css"></head>
<title>Registration</title>
<body>  

    <form name="form1" method="post" action="register_ac.php">

        <li>Title<select name="title" id="title"><option value="MR">MR</option><option value="MRS">MRS</option></option><option value="MISS">MISS</option></select></li>
        <li>FirstName<input type="text" name="firstname" class="#" id="firstname"/></li>
        <li>Surname<input type="text" name="surname" class="#" id="surname"/></li>
        <li>Username<input type="text" name="username" class="#" id="username"/></li>
        <li>Password<input type="password" name="password" class="#" iid="password"/></li>
        <li>Email<input type="text" name="email" class="#" id="email"/></li>
        <li>Addressline1<input type="text" name="addressline1" class="#" id="addressline1"/></li>
        <li>Addressline2<input type="text" name="addressline2" class="#" id="addressline2"/></li>
        <li>City<input type="text" name="city" class="#"  id="city"/></li>
        <li>County<input type="text" name="county" class="#"  id="county"/></li>
        <li>Postcode<input type="text" name="postcode" class="#"  id="postcode"/></li>

        <input type="submit" id="textarea" name="submit" value="Submit" class="button"/>
    </form>

</body>
</html>

<?php

$host="localhost"; // Host name
$username="#####"; // Mysql username
$password="#####"; // Mysql password
$db_name="#####"; // Database name
$tbl_name="Register"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// Get values from form
$username=$_POST['username'];
$title=$_POST['title'];
$firstname=$_POST['firstname'];
$surname=$_POST['surname'];
$password=$_POST['password'];
$email=$_POST['email'];
$addressline1=$_POST['addressline1'];
$addressline2=$_POST['addressline2'];
$city=$_POST['city'];
$county=$_POST['county'];
$postcode=$_POST['postcode'];

// Insert data into mysql
$sql="INSERT INTO $tbl_name(username, title, firstname, surname, password, email, addressline1, addressline2, city, county, postcode)
VALUES('$username', '$title', '$firstname','$surname','$password','$email','$addressline1','$addressline2','$city','$county','$postcode')";
$result=mysql_query($sql);

// if successfully insert data into database, displays message "Successful".
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='index.php'>Back to main page</a>";
}

else {
echo "ERROR";
}
?>

<?php
// close connection
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:20:13.690

您在这一行有一个错误：

```
<li>Title<select name="title" id="title"><option value="MR">MR</option><option value="MRS">MRS</option></option><option value="MISS">MISS</option></select></li> 
```

一个太多的`</option>`标签。尝试：

```
<li>Title<select name="title" id="title"><option value="MR">MR</option><option value="MRS">MRS</option><option value="MISS">MISS</option></select></li> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T15:22:43.283

不确定是否相关，但你`</option></option>`有。

我在顶部使用诸如此类的东西来调试 POST 数据：

```
if ( !empty( $_POST ) )
    echo '<pre>' . print_r( $_POST, true ) . '</pre>'; 
```

多次使我免于头痛。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:27:27.990

正如 Oldskool 所说，您应该使用准备好的语句（有关信息，请参阅[http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)）来执行查询，或者至少转义值。也就是说，你有一个额外的笨拙`</option>`的东西挂在那里，它可能会让你的浏览器感到困惑。

# iphone - SQLitePersistence 类的 ARC 内存问题

> ID：14629053
> 
> 赞同：0
> 
> 时间：2013-01-31T15:16:13.230
> 
> 标签：iphone, objective-c, memory-leaks, automatic-ref-counting

我无法弄清楚为什么应用程序崩溃，同时使用 class.insert 将数据插入数据库`SQLitePersistence`。

从 webservice 下载产品 xml 数据后，我试图将所有产品详细信息插入到各种表中，例如，

```
Product 
Product_image
Product_option
Product_categories
Product_custom_option 
```

目前，我们有 800 个产品在 webservice 上可用，未来可能会增加 2000 个左右的产品。

**我的问题是**：插入 400 到 450 个产品后，应用程序经常崩溃。然后我使用`@autorelesepool`每个循环将数据插入数据库。它会增加 500 到 550 个产品，然后应用程序崩溃，接下来我该怎么做才能避免应用程序崩溃？

我的产品表文件的`SQLitePersistence`数据库类：`.h`

```
#import <Foundation/Foundation.h>
#import "SQLitePersistentObject.h"

@interface iMobDB : SQLitePersistentObject
{
    NSString *sku;
    NSString *name;
    .....
    .....
}
@property(nonatomic,retain) NSString *sku;
@property(nonatomic,retain) NSString *name;
.....
.....
@end 
```

`.m`文件

```
@implementation iMobDB

@synthesize sku;
@synthesize name;
    .....
    .....

-(void) dealloc
{
    for (NSString *one in [[self class] propertiesWithEncodedTypes])
    {
        [self removeObserver:self forKeyPath:one];
    }
    iMobReleaseNil(sku);
    iMobReleaseNil(name);
    .....
    .....
} 
```

`Appdelegate`我在课堂上在这里插入数据

```
 /*===================================== Save Product Information ===============================================*/

        iMobDB *imobdb = [[iMobDB alloc]init];
        imobdb.productId = [productid intValue];
        imobdb.sku = skukey;
        imobdb.name = namekey;
        imobdb.optionalOption = [NSString stringWithFormat:@"%d",options];
        imobdb.requriedOption = [NSString stringWithFormat:@"%d",requried];
        imobdb.productType = producttypekey;
        imobdb.price = pricekey;
        imobdb.specialprice = specialpricekey;
        imobdb.stock = [stock intValue];
        imobdb.manufacture = manukey;
        [imobdb save];
        imobdb=nil;

        /*==============================================================================================================*/

        /*==================================== Save Product Images =====================================================*/
       __unsafe_unretained NSDictionary  *imagearray=[[dict objectForKey:@"images"] objectForKey:@"url"];

        @autoreleasepool 
        {

        for (NSDictionary *dict in imagearray)
        {
            if ([dict  isKindOfClass:[NSArray class]])
            {
                NSString *imageurl=[dict objectForKey:@"text"];                
                ImageDB *imagedb = [[ImageDB alloc] init];
                imagedb.productId = [productid intValue];
                imagedb.imageurl = imageurl;
                [imagedb save];
                imagedb=nil;
            }
            else if([dict  isKindOfClass:[NSDictionary class]])
            {
                NSString *imageurl=[dict objectForKey:@"text"];              
                ImageDB *imagedb = [[ImageDB alloc] init];
                imagedb.productId = [productid intValue];
                imagedb.imageurl = imageurl;
                [imagedb save];
                imagedb=nil;
            }
        }

        }
        /*===============================================================================================================*/

        /*==================================== Save Category ============================================================*/
        @autoreleasepool 
        {

      __unsafe_unretained  NSDictionary *categorydict = [dict objectForKey:@"categories"];

                for (NSDictionary *dictt in catedict)
                {
                 __unsafe_unretained   NSString *categoryid=[[dictt objectForKey:@"categoryId"]objectForKey:@"text"];
                __unsafe_unretained    NSString *categoryname=[[dictt objectForKey:@"categoryName"]objectForKey:@"text"];                    
                    Categories *catdb  = [[Categories alloc] init];
                    catdb.categoryId = [categoryid intValue];
                    catdb.categoryname = categoryname;
                    catdb.productId = [productid intValue];
                    [catdb save];
                    catdb=nil;
                }
            } 
```

请注意：我在以下课程中禁用了 ARC

![在此处输入图像描述](../Images/cff728790b3028662a16960dbd282f18.png)

**错误日志截图**

![在此处输入图像描述](../Images/a6ce727b4f1af1de1a55f4eeea0cf27b.png)

**错误日志**

> 2 月 1 日 11:53:59 Innoppl-iPod backboardd[52]：iMob[2811] 有超过允许时间的活动断言：{（标识符：暂停进程：iMob[2811] allowedBackgroundDuration：10.000000 原因：暂停所有者 pid：52 preventSuspend preventThrottleDownCPU preventThrottleDownUI )} 2 月 1 日 11:53:59 Innoppl-iPod backboardd[52]：强制 iMob[2811] 的崩溃报告... 2 月 1 日 11:53:59 Innoppl-iPod backboardd[52]：完成崩溃报告。2 月 1 日 11:53:59 Innoppl-iPod ReportCrash [2819]：libMobileGestalt copySystemVersionDictionaryValue：无法从系统版本字典中查找 ReleaseType 2 月 1 日 11:53:59 Innoppl-iPod com.apple.launchd [1](https://i.stack.imgur.com/OjG70.png) (UIKitApplication:com.innoppl.Saletab[0xe1bf][2811]) : (UIKitApplication:com.innoppl.Saletab[0xe1bf]) 退出：杀死：2 月 1 日 11:53:59 Innoppl-iPod backboardd[52]：应用程序' UIKitApplication:com.innoppl.Saletab[0xe1bf]' 异常退出，信号 9：被杀死：9 Feb 1 11:53:59 Innoppl-iPod ReportCrash[2819] ：将 crashreport 保存到 /var/mobile/Library/Logs/CrashReporter/iMob_2013 -02-01-115359_Innoppl-iPod.plist 使用 uid：0 gid：0，synthetic_euid：501 egid：0

# google-api - Google Contacts API 不返回带有目录配置文件的联系人

> ID：14629057
> 
> 赞同：1
> 
> 时间：2013-01-31T15:16:15.863
> 
> 标签：google-api, google-contacts-api, google-profiles-api, google-shared-contacts

我正在尝试在我的谷歌帐户上搜索“我的联系人”。该帐户属于 Google for Business 域。我已经设法通过查询以下 url 来检索所有有效的联系人：

```
https://www.google.com/m8/feeds/contacts/{userEmail}/full 
```

或者

```
https://www.google.com/m8/feeds/contacts/default/full 
```

现在，当我使用`q=searchString`or `myQuery.setFullTextQuery(searchString);`（在 Java 中）进行搜索时。我只得到一些结果。特别是我创建的联系人与我不属于同一个域。

我认为这与谷歌没有为拥有目录配置文件的联系人存储名称条目有关。因此它只会在他们的电子邮件地址中搜索（如果我很幸运并且电子邮件地址只包含名称，那么它会找到它）。

作为一种解决方法，我还从域中获取所有配置文件（似乎不适用于全文搜索字符串），然后合并/解析它们以获得我需要的结果。

我现在的问题是，是否有一个电话可以检索所有联系人（来自我的联系人），这些联系人在 NAME（第一个和最后一个）、EMAIL 以及可能的字段标签中包含特定的搜索字符串？

当具有目录配置文件的联系人条目不包含任何名称时，我看不到使用全文搜索字符串的意义......（它存储在配置文件中）。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:14:06.070

您应该手动填写联系人条目中的所有字段（仅在目录配置文件和您的联系人之间共享的主要电子邮件和照片）。所以你无法在一个请求中找到你需要的所有东西

# php - 数据库类实现

> ID：14629058
> 
> 赞同：1
> 
> 时间：2013-01-31T15:16:15.873
> 
> 标签：php, oop, pdo, odbc

我创建了一个扩展 PDO 的连接类，使用诸如 modelize、get_tables、create、insert 等方法......它与 MySQL 配合得很好。

然后我创建了一个 History 类，它扩展 Connection 并在每次对 DB 执行操作时在日志文件或表中添加 CRUD 历史记录。它们都为所有与 CRUD 相关的方法实现了一个接口。它仍然适用于 MySQL。

现在，我需要使用 SQLite。

我在 Connection 中有很多必须重写的函数，所以我想我可以保留我的 Connection 类，使用这些特定于 DB 的函数创建一个接口（引擎），并为 MySQL 和 SQLite 开发特定的类，这些类将扩展 Connection。

但是现在如果我想使用历史 - 它没有特定于数据库的方法......我应该怎么做？

我想知道构建这些类的最佳方法是什么。

谢谢！

```
namespace bbn\db;

class connection extends \PDO implements actions, api, engines{
  public function __construct($cfg){
    ...
  }
  ...
}

interface api
{

    public function select($table, $fields, $where, $order, $limit, $start);

    public function insert($table, array $values, $ignore);

    public function insert_update($table, array $values);

    public function update($table, array $values, array $where);

    public function delete($table, array $where);

    public function insert_ignore($table, array $values);
}

interface engines
{

    public function __construct($cfg);

    public function change($db);

    public function get_full_name($table, $escaped=false);

    public function disable_keys();

    public function enable_keys();

    public function get_databases();

    public function get_tables();

    public function get_columns($table);

    public function get_keys($table);

    public function get_create($table);

    public function get_delete($table, array $where);

    public function get_select($table, array $fields = array(), array $where = array(), $order, $limit, $start, $php = false);

    public function get_insert($table, array $fields = array(), $ignore = false, $php = false);

    public function get_update($table, array $fields = array(), array $where = array(), $php = false);

    public function create_db_index($table, $column);

    public function delete_db_index($table, $column);

}

class history extends connection implements api
{
    ...
}

class mysql extends connection implements engines
{
  ...
}

class sqlite extends connection implements engines
{
  ...
} 
```

如果您想知道“操作”接口是由另一个扩展 PDOStatement 的类实现的（但这与我的问题无关）

# sql - 迭代表

> ID：14629064
> 
> 赞同：3
> 
> 时间：2013-01-31T15:16:27.217
> 
> 标签：sql, postgresql, plpgsql

我需要在几个表上执行相同的操作。现在查询看起来像这样：

```
create view foobar
as 
select this, that 
from here 
where this=1 
union all 
select this,that 
from there 
where this=1
..... ..... 
```

等等，对于几个表。所有结果都是联合版的。

有没有办法，而不是写这个很长的查询，很容易出错，写类似的东西

```
for table in here, there, upthere
 do
 select this, that from $table where this=1 
```

然后将它们结合起来。

我的查询现在正在运行，这需要一段时间，但这只是好奇，我不知道如何在 Google 上搜索它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:29:07.100

`VIEW`从您需要的所有表中创建一个`UNION`，然后`SELECT`从这个`VIEW`.

此外，您可以创建一个`VIEW`这样的：

```
CREATE OR REPLACE VIEW table_set AS
SELECT 'table1' as table_name, field1, field2 ...
FROM table1
UNION ALL
SELECT 'table2' as table_name, field1, field2 ...
FROM table2
UNION ALL
SELECT 'table3' as table_name, field1, field2 ...
FROM table3
UNION ALL
... 
```

从`SELECT`这个`VIEW`像：

```
SELECT field1, field3
FROM table_set
WHERE table_name IN ('table2','table4')
  AND field5 = 'abc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:54:09.030

[像@Igor desrcibes 这样](https://stackoverflow.com/a/14632660/939860)的**视图** 是一种选择。

如果性能至关重要并且您没有很多写入操作，则可以使用该视图来（重新）创建[**物化视图**](http://de.wikipedia.org/wiki/Materialized_View#Materialized_View)。

或者，对于更短的语法和源表的动态选择，您可以使用这样的**plpgsql 函数**：

```
CREATE OR REPLACE FUNCTION f_select_from_tbls(tables text[], cond int)
  RETURNS TABLE (this int, that text) AS
$BODY$
DECLARE
   tbl text; -- automatically avoids SQLi
BEGIN
   FOREACH tbl IN ARRAY tables LOOP
      RETURN QUERY EXECUTE format('
      SELECT this, that
      FROM   %I
      WHERE  this = $1', tbl)
      USING cond;
   END LOOP;
END
$BODY$
  LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM f_select_from_tbls('{t1,t2,nonStandard tablename}', 4); 
```

我假设许多表共享相同名称和类型的列`(this int, that text)`（您没有在问题中定义数据类型。）该函数将一个`array of text`作为表名和一个`integer`值作为条件。

[手册中有关循环数组](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-FOREACH-ARRAY)的更多信息。[手册中有关从函数返回的](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)
更多信息。

使用动态 SQL，您必须警惕**SQL 注入**。这种威胁在这里通过两种方式消除：

*   数组中的表名`tables`被注入了[`format()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)正确引用任何非标准表名的函数
*   参数中的值按`cond`原样通过 via 传递`USING`，从而使 SQLi 不可能。

### [带参数](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html#XFUNC-SQL-VARIADIC-FUNCTIONS)的变体[`VARIADIC`](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html#XFUNC-SQL-VARIADIC-FUNCTIONS)

目的是使函数调用更简单。您可以提交一个文本变量列表，而不是从它们构建一个数组（数组是从参数内部构建的）。就这样。

```
CREATE OR REPLACE FUNCTION f_select_from_tbls2(cond int, VARIADIC tables text[])
  RETURNS TABLE (this int, that text) AS
$BODY$
DECLARE
   tbl text; -- automatically avoids SQLi
BEGIN
   FOREACH tbl IN ARRAY tables LOOP
      RETURN QUERY EXECUTE format('
      SELECT this, that
      FROM   %I
      WHERE  this = $1', tbl)
      USING cond;
   END LOOP;
END
$BODY$
  LANGUAGE plpgsql; 
```

在这种情况下，我放在`tables`最后一个`VARIADIC`参数是开放的。称呼：

```
SELECT * FROM f_select_from_tbls2(4, 't1','t2','iLLegal name') 
```

# objective-c - Objective-C GLSL mix() 等效

> ID：14629067
> 
> 赞同：0
> 
> 时间：2013-01-31T15:16:35.563
> 
> 标签：objective-c, cocos2d-iphone, glsles

我试图弄清楚如何编写等效于 GLSL(ES) 的混合方法。我试图添加/划分 rgb 值，但还没有运气。任何指向 GLSL 方法如何工作的指针都将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:21:35.427

`mix`在 GLSL 中，基于 [0,1] 范围内的比例因子，对其两个输入进行线性组合。来自[GLSL 规范](http://www.opengl.org/documentation/glsl/)：

```
T mix ( T x, T y, T2 a )
{
    return (1-a)*x + a*y;
} 
```

其中`T`表示 GLSL 中能够被标量值调制的任何有效向量或标量类型（例如，vec2、mat4 等）。 `T2`是浮点类型（即，`float`或`double`），或匹配的类型`T`，在这种情况下，`a`按组件方式应用于`x`and的组件`y`。

# oop - 类方法：在私有方法中传递私有数据字段

> ID：14629075
> 
> 赞同：4
> 
> 时间：2013-01-31T15:16:56.547
> 
> 标签：oop, design-patterns

我想知道以下哪种模式被认为更“正确”。

第一个示例通过调用隐式接受参数的 void 成员函数来设置私有数据成员长度的值。第二个示例通过将其分配给显式接受参数的成员函数的返回值来设置长度值。

似乎第二种方法使代码更清晰，因为您知道何时以及如何设置私有成员，第一种方法需要跟踪代码以验证分配值的内容和方式。第二种方法似乎也可以在以后更好地重用，因为它可以在任何类/上下文中运行（因为参数和返回类型是显式的）。

第一种方法更快，如果在整个类中使用（对于私有成员函数）可以节省一些编码，但是我不确定这是否会咬我？

感谢您的洞察力并为我澄清了这一点。

```
class MyDataType
{
   private int length;
   private string content;
   private char[] buffer;

   public MyDataType(str) 
   {
      content = str;

      calculateLength();

      buffer = new char[length+1];

      for(int i=0; i < length; i++)
         buffer[i] = content[i];

      buffer[i] = NULL;
   }

   private void calculateLength()
   {
      int i = 0;

      while(content[i++] != NULL) {}  // i know, buffer overflow...

      length = i;
   }
} 
```

* * *

```
class MyDataType
{
   private int length;
   private string content;
   private char[] buffer;

   public MyDataType(str) 
   {
      content = str;

      length = calculateLength(content);

      buffer = new char[length+1];

      for(int i=0; i < length; i++)
         buffer[i] = content[i];

      buffer[i] = NULL;
   }

   private int calculateLength(string s)
   {
      int i = 0;

      while(s[i++] != NULL) {}

      return i;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:35:14.310

在可读性和灵活性方面，第二个示例胜出。

使用第二个示例的优势在于，您实际上只是将构造函数中的一些工作委派给一个方法。这很容易阅读，并且将来不会轻易中断，例如，如果有人调用私有`calculateLength()`方法而不期望实例变量发生变化。

在第一个示例中，该`calculateLength()`方法以对构造函数不透明的方式对成员变量进行操作，这使得它的可读性降低并且更容易以上述方式变得脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:28:18.193

我会说第二个更合适，但第一个有效。

通常 getter 是公共的，在类中的任何地方都可以访问私有变量，在同一个类中拥有一个获取私有或受保护变量的 getter 是没有意义的。如果它受到保护并且您可以将功能传递给您的类的子类。

这取决于你想对变量做什么。如果值不会改变，我只需将`private calculateLength()`方法移至构造函数。如果您必须重新计算它，那么我想我可以看到 void 或 private 做几乎相同的事情。我觉得第二个更清楚，因为您确切地知道该`calculateLength()`方法返回的位置，但在第一个中，它是否在做任何事情是模棱两可的。做第二个更好的风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:25:47.280

为什么不将`getLength()`函数内容嵌入到构造函数中，同时进行复制呢？您将为自己节省另一个循环。除此之外，我很确定这并不重要。顺其自然，从一个方法开始，然后在你认为合适的时候进行修改。

# ruby - 查找正在运行的 Capistrano 版本

> ID：14629080
> 
> 赞同：2
> 
> 时间：2013-01-31T15:17:14.197
> 
> 标签：ruby, gem, rvm, capistrano

我在一个共享的应用程序环境中，并且安装了几个 ruby​​ 版本和 gemsets（通过 RVM 管理）。我需要在我的部署中验证 Capistrano gem 版本和 ruby​​ 版本，例如，与 Capistrano 的 2.14.1 版本和 ree-1.8.7 不兼容。

有没有什么简单甚至骇人的方法可以做到这一点？我正在执行`cap _2.13.5_ production deploy`部署调用，但如果环境设置不正确，我想退出执行并向用户返回一条消息。看起来有点矫枉过正，但这是客户的要求。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-28T00:06:12.573

如果您询问运行 capistrano 时将运行哪个版本的 capistrano，请运行“cap -v”：

```
Capistrano Version: 3.10.0 (Rake Version: 12.3.0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:13:59.147

添加`capistrano`并`Gemfile`执行使用`bundle exec cap production deploy`

至于`production`- 将您的服务器配置放入`production`任务/阶段，capistrano 将无法部署，因为缺少服务器。

# php - Laravel 扩展类

> ID：14629083
> 
> 赞同：1
> 
> 时间：2013-01-31T15:17:21.660
> 
> 标签：php, namespaces, extend, laravel, laravel-3

在 Laravel 3 中扩展一个类还需要其他步骤吗？

我创建了`application/libraries/response.php`：

```
class Response extends Laravel\Response {

    public static function json($data, $status = 200, $headers = array(), $json_options = 0)
    {
        $headers['Content-Type'] = 'application/json; charset=utf-8';

        if(isset($data['error']))
        {
            $status = 400;
        }

        dd($data);

        return new static(json_encode($data, $json_options), $status, $headers);
    }

    public static function my_test()
    {
        return var_dump('expression');
    }

} 
```

但是由于某种原因，该`my_test()`功能或修改后的`json()`功能都不起作用。

在我的控制器中，我执行以下操作：

```
Response::my_test();
// or
$response['error']['type']    = 'existing_user';
Response::json($response); 
```

没有工作，我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:26:21.283

您应该首先添加一个名称空间 - 像这样：

文件：`application/libraries/extended/response.php`

```
<?php namespace Extended;

class Response extends \Laravel\Response {

  public static function json($data, $status = 200, $headers = array(), $json_options = 0)
  {
    $headers['Content-Type'] = 'application/json; charset=utf-8';

    if(isset($data['error']))
    {
        $status = 400;
    }

    dd($data);

    return new static(json_encode($data, $json_options), $status, $headers);
  }

  public static function my_test()
  {
    return var_dump('expression');
  }
} 
```

然后在 config/application.php 你需要更改别名

```
 'Response'     => 'Extended\\Response', 
```

然后在 start.php

```
Autoloader::map(array(
    'Extended\\Response' => APP_PATH.'libraries/extended/response.php',
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:57:48.477

实际上，扩展库的正确方法如下：

1.  创建`response.php`于`application/libraries/`
2.  在其中，通过以下方式扩展类：`class Response extends \Laravel\Response`
3.  评论`'Response' => 'Laravel\\Response'`_`application/config/application.php`

经过测试，它可以工作。我现在就是这样做的

# android - Phonegap 非调试模式和使用许可证密钥签名

> ID：14629085
> 
> 赞同：6
> 
> 时间：2013-01-31T15:17:32.413
> 
> 标签：android, cordova, apk

我已经在 phonegap 中完成了一个应用程序，并希望在谷歌应用商店上发布它。每次我下载 apk 文件时，它都处于调试模式。我如何使用密钥或密钥库对其进行签名以将其上传到 google play，因为 google 不会在调试模式下将其上传到我的帐户中。

我做错了什么，但看不到如何在 build.phonegap.com 中签署应用程序？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T15:34:20.867

从终端或命令提示符使用此命令生成密钥库文件：

```
keytool -genkey -v -keystore myAppKey.keystore -alias myAppKey -keyalg RSA -validity 10000 
```

这将生成`myAppKey.keystore`文件。

您必须在`build.phonegap.com`应用程序设置下的站点上传。在那里你会得到`signing settings`所以添加你的`keystore`然后为你的应用程序选择那个签名密钥。

通过这个 phonegap 将重新生成 android 版本，您将获得 APK，该 APK 将用于在 google play 市场上发布。

**参考 ：**

[Google 如何建议创建 Android 密钥库](http://developer.android.com/tools/publishing/app-signing.html#cert)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:00:01.897

也获得了非法选项 - 关于从上面的帖子中复制/粘贴的内容导致了这种情况。如果您删除“-”字符并使用键盘上的“-”手动键入它们，那么它可以工作:)

# php - 如何防止重复发帖？3个循环运行

> ID：14629090
> 
> 赞同：1
> 
> 时间：2013-01-31T15:17:58.370
> 
> 标签：php, wordpress

我需要把博客分成三栏。为此，我写道：

```
<?php $i = 0; ?>
<div class="onethird">
<?php if (have_posts()) : while(have_posts()) : $i++; if(($i % 3) == 0) : $wp_query->next_post(); else : the_post(); ?>
    <?php get_template_part( 'content', 'category' ); ?>
        <?php endif; endwhile; endif;  ?>
    </div>

    <?php $i = 0; rewind_posts(); ?>

<div class="onethird">
<?php if (have_posts()) : while(have_posts()) : $i++; if(($i % 3) == 1) : $wp_query->next_post(); else : the_post(); ?>
    <?php get_template_part( 'content', 'category' ); ?>
        <?php endif; endwhile; endif;  ?>
    </div>

<?php $i = 0; rewind_posts(); ?>

<div class="onethird last">
<?php if (have_posts()) : while(have_posts()) : $i++; if(($i % 3) == 2) : $wp_query->next_post(); else : the_post(); ?>
    <?php get_template_part( 'content', 'category' ); ?>
<?php endif; endwhile; endif; ?>
</div> 
```

我敢肯定这是非常糟糕的代码，但这是我能想到的最好的。然后，我注意到重复的帖子问题。再次，经过大量谷歌搜索，错误：

```
<?php $i = 0; $dupe = array(); ?>
<div class="onethird">
<?php if (have_posts()) : while(have_posts()) : $i++; if( (($i % 3) == 0) && (!in_array($post->ID, $dupe)) ) : $wp_query->next_post(); else : the_post(); ?>
<?php $dupe[] = $post->ID; echo $post->ID ?>
    <?php get_template_part( 'content', 'category' ); ?>
<?php endif; endwhile; endif;  ?>
</div>

<?php $i = 0; rewind_posts(); ?>

<div class="onethird">
<?php if (have_posts()) : while(have_posts()) : $i++; if( (($i % 3) == 1) && (!in_array($post->ID, $dupe)) ) : $wp_query->next_post(); else : the_post(); ?>
<?php $dupe[] = $post->ID; echo $post->ID ?>
    <?php get_template_part( 'content', 'category' ); ?>
<?php endif; endwhile; endif;  ?>
</div>

<?php $i = 0; rewind_posts(); ?>

<div class="onethird last">
<?php if (have_posts()) : while(have_posts()) : $i++; if( (($i % 3) == 2) && (!in_array($post->ID, $dupe)) ) : $wp_query->next_post(); else : the_post(); ?>
<?php $dupe[] = $post->ID; echo $post->ID ?>
    <?php get_template_part( 'content', 'category' ); ?>
<?php endif; endwhile; endif; ?>
</div> 
```

现在它只是忽略计数器和`in_array`, 并显示所有三列中的所有帖子。

如果有人有更好的解决方案来在三列中显示帖子，那也将受到欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:28:31.100

对于您要实现的目标，三个循环似乎有点复杂。

我会得到帖子的总数`wp_count_posts()`- 并将其除以 3（向上取整）以获得每列的帖子数。

然后你只需要循环一次，`</div><div class='onethird'>`只要你的计数器的剩余部分`$i`除以每列的帖子数是`0`.

就像是：

```
<div class="onethird">
<?php
$a_third = ceil(wp_count_posts() / 3);
$i = 0;
if (have_posts()) :
  while(have_posts()) :

    $i++;

    the_post();

    if( ($i % $a_third) === 0 ) :
      echo "</div><div class='onethird'>";
    endif;

  endwhile;
endif;
?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:12:35.120

我认为你可以使用你所拥有的：

```
<?php $i = 0; $dupe = array(); $third = ceil(wp_count_posts() / 3);?>
<?php if (have_posts()) : ?>
    <div class="onethird">
        <?php while(have_posts()) : the_post(); ?>
            <?php if (($i < $third) && (!in_array($post->ID, $dupe))) : ?>
                <?php $dupe[] = $post->ID; ?>
                <?php echo $post->ID; ?>
                <?php get_template_part( 'content', 'category' ); ?>
                <?php $i++; ?>
            <?php endif; ?>
        <?php endwhile; ?>
    </div>

    <?php $i = 0; rewind_posts(); ?>

    <div class="onethird">
        <!-- repeat same code as above -->
    </div>

    <?php $i = 0; rewind_posts(); ?>

    <div class="onethird">
        <!-- repeat same code as above -->
    </div>

<?php endif; ?> 
```

# ios - 对于 iOS UITableView，我可以使用 CUSTOMIZE CELL XIB 加载特定行吗？

> ID：14629093
> 
> 赞同：0
> 
> 时间：2013-01-31T15:18:16.983
> 
> 标签：ios, uitableview

这是我第一次发问题，谢谢大家。

现在，我想实现一个默认样式分组的 UITableView 包含多组数据。对于每一行，都会有一个详细信息披露按钮作为附件类型图标。当人们点击披露按钮时，我希望单元格展开所选行的详细信息。

我试图通过向选定行添加自定义单元格来完成此任务，但是，它非常复杂。所以目前，我正在尝试通过使用自定义单元格 xib 重新加载特定行来完成此任务。我知道 reloadRowsAtIndexPaths 有一个委托方法。但我可以用它来重新加载特定的单元格吗？谢谢

请建议！

太谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:28:27.730

你有没有尝试过这样的事情：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   if(indexPath.row == mySpecialSelectedCell)
   {
      //Load all your custom stuff here
   }
   else
   {
      UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];
   }
   if (cell == nil) 
   {

   }

   return cell;
} 
```

单击展开按钮时，您必须获取单元格的 indexPath。

或者你可以看看[这个答案](https://stackoverflow.com/a/764430/1671729)。然后，就像上面的代码一样，只需加载您使用该 NIB 指定的一个单元格，然后以正常方式加载其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:42:54.417

您可以实现 tableview 委托方法来设置需要扩展的单元格的高度。在 heightForRow 方法中添加一些条件检查，当用户点击按钮时，更改条件以增加高度。当表格重新加载时，它将调用此方法并重新加载具有更大高度的单元格。

# asp.net - Asp.net mvc dataannotation MaxLength 验证不起作用

> ID：14629095
> 
> 赞同：21
> 
> 时间：2013-01-31T15:18:31.917
> 
> 标签：asp.net, asp.net-mvc-4

我在我的模型中使用 asp.net mvc4 我正在使用 Maxlength 属性，但它不适用于字符串。只有 Stringlength 工作有人有同样的问题吗？如果有问题如何解决？它不适用于验证我的字段这是我的代码

（不工作）

```
[Required]
[MaxLength(80)]
[DisplayName("Contact Name:")]
public string ContactName { get; set; } 
```

（在职的）

```
[Required]
[StringLength(80)]
[DisplayName("Contact Name:")]
public string ContactName { get; set; } 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-28T17:57:24.667

两个属性都在`System.ComponentModel.DataAnnotations`命名空间中

根据 Entity Framework 中的 Microsoft Official Website`[MaxLength]`属性，因为 Entity Framework 知道在您的情况下数据库中列的最大长度是多少（例如**varchar(80)**）

> 指定属性中允许的数组或字符串数​​据的最大长度。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.maxlengthattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.maxlengthattribute.aspx)

正如您在其中一个评论中所说的那样，您没有使用实体框架来回复**@jackncoke**，因此`[MaxLength(80)]`将无法正常工作

但在第二种情况下`[StringLength(80)]`是有效的，因为它对实体框架没有任何依赖关系。

`[StringLength(80)]`如果您使用或不使用实体框架， SO将在这两种情况下工作

> 指定数据字段中允许的最小和最大字符长度。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.stringlengthattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.stringlengthattribute.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T15:21:42.270

`[MaxLength(80)]`改成，`[StringLength(80)]`但看起来你打败了我！

你不是唯一一个有这个问题的人

[MaxLength 属性不生成客户端验证属性](https://stackoverflow.com/questions/6801656/maxlength-attribute-not-generating-client-side-validation-attributes)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-18T09:58:02.833

在 MVC4 MaxLength 中正常工作，我必须检查它

```
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    [MaxLength(5)]  //MaxLength worked properly.
    public string UserName { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
} 
```

![在此处输入图像描述](../Images/c790291b29822f3a0fd9c952de596793.png)

# git - 如何更新 GIT 远程存储库？

> ID：14629101
> 
> 赞同：0
> 
> 时间：2013-01-31T15:18:58.620
> 
> 标签：git, commit, pull

我刚刚从 subversion 切换到 GIT，发现它要快得多。

我有一个问题 - 在一个位置/计算机上我更改文件，删除目录，......并提交它一切都很好（如果我在另一个文件夹上定义新的 GIT，一切都是正确的）。在另一个位置我拉，没有任何反应 - 删除的文件仍然存在，没有进行任何更改等......

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:23:57.563

`commit`仅提交到您的本地存储库。我认为您正在寻找`push`将其发送到主仓库？

请参阅：[“git commit”和“git push”有什么区别？](https://stackoverflow.com/questions/2745076/what-is-the-difference-between-git-commit-and-git-push)一个很好的图表来解释 Git 是如何工作的。

显然，这与您习惯的不同，即只有一个集中式存储库；现在你有了自己的本地仓库，因此 Git 是一个分布式系统……这也是它对你来说速度如此之快的部分原因！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:33:32.513

虽然这不是您特定问题的答案，但我建议您使用此链接：

[Git 教程](http://www.vogella.com/articles/Git/article.html)

供审查。该页面的作者 (Lars Vogel) 整理了一份非常好的 Git 初学者指南，当我不记得我想要做什么的特定选项/参数时，这就是我 99% 的时间参考求助。对于使用远程存储库，您需要通读第 11 和第 12 节，但是对于 Git 新手，我会建议您阅读整个文档。

我将不得不查看 NetBeans 以了解他们的 Git 插件是如何工作的；它可能不支持推送到远程存储库（仅限本地提交），但这会让我感到惊讶。我很少在支持 Git 的 IDE 中工作，所以我的提交通常是在命令行中完成的。

# c - 索引以获取结构的访问成员。C 编程

> ID：14629103
> 
> 赞同：1
> 
> 时间：2013-01-31T15:18:59.517
> 
> 标签：c, structure

假设我有一个结构

```
typedef struct  
{ 
   unsigned char mem1; 
   unsigned char *mem2
} MEMBERS; 
```

在哪里

```
 unsigned sample = 12
 MEMBERS memvalues = {  0x15 , &sample  }; 
```

当函数“GET_MEM”将结构“MEMBERS”的地址返回给 X_mem 时，我需要访问 mem1 和 mem2 这两个值。我的意思是：

```
unsigned char *X_mem = GET_MEM ( );    //function returns address of memvalues
unsigned value1 = *X-mem;
unsigned Value2 = *++X_mem; 
```

我希望 value1 给出 0x15，而 value2 给出 12。

我怎样才能使这项工作？

注意：请不要假设上面的代码示例在语法上是正确的。只是为了表达我的意图。谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:23:54.860

是的，让 GET_MEM() 返回结构的地址。

```
MEMBERS *X_mem = GET_MEM( );    //function returns address of memvalues
unsigned char value1 = X_men->mem1;
unsigned char Value2 = *(X_mem->mem2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:24:39.807

除非将 X_mem 声明为指向 MEMBERS 结构的指针，否则您无法让它像这样工作。依赖结构开头的地址偏移量是危险且不可移植的，因为编译器可以自由地在结构中添加任意数量的填充字节，在 mem1 之后的任何位置。因此，明智的解决方案是编写`MEMBERS *X_mem`然后通过 -> 运算符访问每个成员。

如果您出于某种原因需要编写依赖于这样的偏移量的代码，则需要确保“填充字节模式”符合预期，或者完全禁用填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:23:40.900

You need to cast the incorrectly typed pointer returned by `GET_MEM()`:

```
const MEMBERS *some_members = (MEMBERS *) GET_MEM();
unsigned value1 = some_members->mem1;
unsigned value2 = *some_members->mem2; 
```

# asp-classic - 使用经典 ASP 将 Base64 保存到图像

> ID：14629104
> 
> 赞同：2
> 
> 时间：2013-01-31T15:18:58.863
> 
> 标签：asp-classic

我一直在尝试使用经典的 ASP 将 base64 文件保存为服务器端的图像。我想要的是将文件自动保存到特定位置并给它一个文件名，现在我可以很好地编码它的这方面。但是，如果不先在浏览器上渲染，我无法获取保存图像的代码。这对我不起作用，因为我使用的脚本将是自动导出并且没有用户输入。

代码如下，在网页中呈现并询问用户将图像保存在哪里。只是重申我需要它来自动保存（没有用户输入）

```
base64String ="base64 code goes here - Wont add it as its huge amount of text"

Set tmpDoc = Server.CreateObject("MSXML2.DomDocument")
Set nodeB64 = tmpDoc.CreateElement("b64")
nodeB64.DataType = "bin.base64" ' stores binary as base64 string
nodeB64.Text = Mid(base64String, InStr(base64String, ",") + 1) ' append data text (all data after the comma)

vehicleAuditName= "Audit1"

With Response
   .Clear
   .ContentType = "image/png"
   .AddHeader "Content-Disposition", "attachment; filename=" & vehicleAuditName & ".png"
   .BinaryWrite nodeB64.NodeTypedValue 'get bytes and write
   .end
End With 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:23:45.533

使用 adodb.stream 对象将图像存储在服务器端，如下所示：

```
dim bStream : set bStream = server.CreateObject("ADODB.stream")

bStream.type = adTypeBinary

call bStream.Open()

call bStream.Write( binData )

call bStream.SaveToFile( FullName, adSaveCreateOverWrite)

call bStream.close()
set bStream = nothing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-19T13:27:47.667

接收 base64 字符串的服务器端代码如下，请注意，这是取自工作系统的代码，因此有一些变量（例如 carreg / auditdate）用作为创建的文件命名的唯一标识符：

```
function convBase64 (convVal, getCarReg, convType, AuditDate, AuditReference)
    base64String = convVal
    carReg = (UCase(getCarReg))
    carReg = (Replace(getCarReg," ",""))

    AuditDate= CDate(AuditDate) 
    ConvAuditDate = ((DatePart("d",AuditDate))& "_" & (DatePart("m",AuditDate)) & "_" & (DatePart("YYYY",AuditDate)))

    select case convType
        Case "Sig1"
        FileNameSuffix = "AuditorsSignature"
        Case "Sig2"
        FileNameSuffix = "BodyShopSignature"
        Case "Car"
        FileNameSuffix = "DamageCanvas"
    end select
    ImageFileName =  FileNameSuffix & "-" & carReg & "-" & ConvAuditDate & ".jpg"

        Set tmpDoc = Server.CreateObject("MSXML2.DomDocument")
        Set nodeB64 = tmpDoc.CreateElement("b64")
        nodeB64.DataType = "bin.base64" ' stores binary as base64 string
        nodeB64.Text = Mid(base64String, InStr(base64String, ",") + 1) ' append data text (all data after the comma)

        dim bStream : set bStream = server.CreateObject("ADODB.stream")
        bStream.type =  1
        call bStream.Open()
        call bStream.Write( nodeB64.NodeTypedValue )
        call bStream.SaveToFile(Server.Mappath("NoneVehicleImages/" & AuditReference & "/" &  ImageFileName), 2 )
        call bStream.close()
        set bStream = nothing
        convBase64 = "\\iis_fdg$\AuditExport\NoneVehicleImages\"  & AuditReference & "\" & ImageFileName
end function 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-31T15:22:04.683

由于安全原因，您不能这样做。如果网页可以在没有任何用户交互的情况下随机选择在我们的本地系统上存储文件的位置，就会出现混乱。

# angularjs - 带有 $httpProvider 和 promise 的 Angular.js 代码。它有什么作用？

> ID：14629105
> 
> 赞同：3
> 
> 时间：2013-01-31T15:19:02.420
> 
> 标签：angularjs, httpresponse, interceptor, promise

您能否大致解释一下这段代码的作用：

```
App.config(['$httpProvider', function ($httpProvider) {
  $httpProvider.responseInterceptors.push('HttpSpinnerInterceptor');
  $httpProvider.defaults.transformRequest.push(function (data, headersGetter) {
    angular.element('.brand img').attr("src","<%= asset_path('brand/brand.gif') %>");
    return data;
  });
}]);

App.factory('HttpSpinnerInterceptor', function ($q, $window) {
  return function (promise) {
    return promise.then(function (response) {
      angular.element('.brand img').attr("src","<%= asset_path('brand/brand.png') %>");
      return response;
    }, function (response) {
      angular.element('.brand img').attr("src","<%= asset_path('brand/brand.png') %>");
      return $q.reject(response);
    });
  };
}); 
```

除了一些猜测它拦截了一些响应并注入了图像的 src 属性外，我完全不了解。

我不明白如何以及何时调用 HttpSpinnerInterceptor 以及“promise”参数是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:35:13.630

1.  HttpSpinnerInterceptor 在 using service 发出的每个请求`$http`完成后（成功与否）被调用，但在 promise 被解析给调用者之前（因此您可以推迟结果）。实际上不需要转换请求，因为它与 HttpSpinnerInterceptor （或不需要 HttpSpinnerInterceptor ......）几乎相同，因为它不转换任何东西。

2.  `promise`参数是一个`$q`承诺，如果您需要在请求结果时执行一些异步操作，可以使用它，因为您可以稍后重新处理它，因此调用者稍后会得到结果。实际上，在您的代码中，您直接解决了这个承诺（或拒绝它），改变了图像的 src 属性。

以下是一些文档链接：

1.  使用`$http`服务：[http](http://docs.angularjs.org/api/ng.$http) ://docs.angularjs.org/api/ng.$http - 仔细查看“*响应拦截器*”和“*转换请求和响应*”
2.  AngularJS 中的承诺：http: [//docs.angularjs.org/api/ng.$q](http://docs.angularjs.org/api/ng.$q)

# linux - 如何输入密码到 git pull 命令？

> ID：14629107
> 
> 赞同：22
> 
> 时间：2013-01-31T15:19:13.390
> 
> 标签：linux, windows, git, batch-file

我已经为 Windows 和 Linux 编写了脚本，基本上用我们服务器上的所有 git 存储库设置了一个新的用户工作区。

我希望用户为我们的服务器输入一次密码，将其存储在本地变量中，将该变量传递给每个`git pull`命令，然后删除密码变量并退出。

`git pull`命令请求时如何输入密码？适用于 Windows 批处理文件和 Linux shell 脚本。

这是来自 Linux 脚本的代码：

```
#!/bin/bash

echo "Enter password: "
read pswd
clear #No screen peaking

#This is repeated for each repo
location=folderName
mkdir $location
cd $location
git init
git remote add origin git@<server>:$location.git
git pull origin master 
#Above prompts for password & is where I want to automatically input $pswd 
```

我已经尝试过在 SO 和其他地方推荐的各种东西，例如管道、从 .txt 文件读取等。我宁愿不需要任何东西，只需要普通的旧 Windows cmd 和 Linux 终端命令。由于此脚本仅用于设置目的，因此我不需要使用 ssh 代理之类的东西永久安全地存储密码。

我运行的是 Windows 7 和 Ubuntu 12.10，但是这个脚本是为设置新用户而设计的，所以它应该可以在大多数发行版上运行。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-09-14T06:35:34.683

**概要：**

```
git pull "https://<username>:<password>@github.com/<github_account>/<repository_name>.git" <branch_name> 
```

**例子：**

```
git pull "https://admin:12345@github.com/Jet/myProject.git" master 
```

*注意：这适用于我的 bash 脚本*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T15:31:49.077

我真的建议*不要*尝试管理该密码步骤，并将其（在 Linux 和 Windows 上）委托给**git credential helper**。
看：

*   “ [Git http - 安全地记住凭据](https://stackoverflow.com/a/12938677/6309)”
*   “[如何使用 git 与 gnome-keyring 集成](https://stackoverflow.com/a/13386417/6309)”

用户每次会话仅输入一次密码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-09-05T08:20:27.160

读取遥控器`url`，`git`然后插入`ID`密码 ( `PW`)`url`可能会起作用。

例如尝试以下操作：

```
cd ${REPOSITORY_DIR}
origin=$(git remote get-url origin)
origin_with_pass=${origin/"//"/"//${USER_ID}:${USER_PW}@"}
git pull ${origin_with_pass} master 
```

# javascript - Primefaces：自动完成面板通常不显示在 IE 中

> ID：14629109
> 
> 赞同：0
> 
> 时间：2013-01-31T15:19:20.923
> 
> 标签：javascript, internet-explorer, autocomplete, primefaces, frame

我们有**PrimeFaces 3.4应用程序，它在****firefox**下测试之前运行良好。但是，在去测试之后，问题就出现了：

*   应用程序将仅在 IE 中启动 (IE 9)
*   应用程序在**框架集中启动**

我们`p:autocomplete`在很多地方都在使用，包括对话框。在以下情况下，单击后通常不会显示这些自动完成的面板：

*   在框架集内运行（在正常模式下很少发生）
*   IE 开发者工具关闭（打开时很少发生，使得 bug 难以调试）
*   浏览器窗口未最大化

最后一点是我们观察的关键。解决方案是最大化浏览器（这可以工作，因为我们有大屏幕）或缩小内容。因此，我怀疑这是计算必须显示自动完成面板的位置的问题。该算法必须考虑几个条件，例如是否定位父级（对话框：位置固定），如果有滚动，偏移量是多少 - 这里的帧可能会搞砸一些事情。

但是，调试几乎不是一种选择，首先是因为没有官方的非最小化 primefaces.js，其次是因为打开 IE 开发人员工具以某种方式阻止了错误的发生。

在这种情况下，我想问自动完成如何表现得如此，以及它如何受到拼图的任何元素的影响：框架集、对话框、IE 开发工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:41:04.980

相关：[IE8 和 Primefaces p:selectOneMenu 在表单中有很多 p:selectOneMenu 时行为不端](https://stackoverflow.com/questions/8856704/ie8-and-primefaces-pselectonemenu-misbehave-when-having-a-lots-of-pselectoneme)

问题是**PrimeFaces**依赖于`visibility:hidden`进行大量的维度计算。当不可见的组件超出页面边界时，IE 并没有按预期计算尺寸。我没有详细介绍 PrimeFaces 渲染引擎，但只需激活**始终**滚动即可解决问题：

```
body { overflow-y:scroll; } 
```

这回答了为什么在使用框架集（较少的地方）时经常会出现问题或者为什么最大化浏览器会有所帮助的问题。

# gradle - 对哪些任务感到困惑——全部打印出来

> ID：14629113
> 
> 赞同：1
> 
> 时间：2013-01-31T15:19:36.750
> 
> 标签：gradle

当我执行“gradle tasks --all”时我有这个

```
assemble - Assembles the outputs of this project. [jar]
toneserver:assemble - Assembles the outputs of this project. [toneserver:jar, webserver:jar]
    toneserver:copyJars
    toneserver:zip
webserver:assemble - Assembles the outputs of this project. [webserver:jar]
    webserver:versionFile
    webserver:zip 
```

我真正真正没有得到的是我有toneserver：zip，取决于toneserver：jar，我有webserver：zip，取决于webserver：jar，但是这个任务--all 没有显示这些依赖关系。为什么是这样？以及如何让它真正显示依赖关系？

我的完整 gradle 文件在下面（是的，我需要将应用插件的东西仍然从所有项目中移到子项目部分和其他

```
allprojects {

   apply plugin: 'java'
   apply plugin: 'eclipse'

   //override gradle's default output directory(build) on every project as it conflicts with 
   //our build script called build causing failures.
   buildDir = 'output'

   repositories {
      mavenCentral()
   }

   if (project.hasProperty('myVersion')) {
     project.ext.realVersion = project.myVersion
     project.version = project.myVersion
   } else {
     project.ext.realVersion = 'Developer-Build'
     project.version = 'Developer-Build'
   }

    test {
        beforeTest { desc -> 
            println "Executing test ${desc.name} [${desc.className}]"
        }
    }

   task hello << { task -> println "I'm $task.project.name" }
   build << { task -> println "MASTER: I'm building now" } //"building with classpath=$sourceSets.main.compileClasspath.files"
}

project(':webserver') {
    //play does not follow maven/gradle standard of src/main/java and src/test/java :( :(
    //so we override the directories here...(we should put test in the sourceSets.test.java.srcDirs instead)
    sourceSets.main{
        java.srcDirs = ['app', 'test']
        resources.srcDirs = ['app']
    }

    dependencies {
        compile fileTree(dir: 'lib', include: '*.jar')
        compile fileTree(dir: 'play-1.2.4/framework/lib', include: '*.jar')
        compile fileTree(dir: 'play-1.2.4/framework', include: 'play-*.jar')
    }

    //MOVE this into allprojects to be run by both toneserver and webserver to put a file there...
    task versionFile() << {
        File f = new File('webserver/output/version');
        f.mkdirs()
        File v = new File(f, 'version'+project.ext.realVersion)
        println('output version file='+v.getAbsolutePath())
        v.createNewFile()
    }

    task zip(type: Zip) {
        archiveName 'dashboard-'+project.version+'.zip'
        from('output/version') {
            into('webserver')
        }
        from('..') {
            exclude '**/*.pyc'
            exclude '**/*.class'
            exclude '**/samples-and-tests/**'
            exclude '**/play-1.2.4/documentation/**'
            exclude 'webserver/conf/logback.xml'
            include 'webserver/run*.sh'
            include 'webserver/lib/**'
            include 'webserver/app/**'
            include 'webserver/conf/**'
            include 'webserver/play-1.2.4/**'
            include 'webserver/public/**'
        }
        rename 'prod.(.*)', '$1'
    }
    zip.dependsOn('versionFile')
    zip.dependsOn('jar')
    assemble.dependsOn('zip')

    //playframework has it's own generation of .classpath and .project fils so do not 
    //overwrite their versions.  NEED to call "play.bat eclipsify" here...
    task eclipse(overwrite: true) << {
        if (System.properties['os.name'].toLowerCase().contains('windows')) {
            println "*** WINDOWS "
            def result = exec {
                commandLine 'cmd', '/c', 'play-1.2.4\\play.bat eclipsify' 
            }
        } else {
            println "*** NOT WINDOWS "
            def result = exec {
                commandLine './play-1.2.4/play eclipsify'
            }
        }
    }
}

project(':toneserver') {
    project.ext.genLibDir = file('output/thirdpartylibs')

    configurations {
        all*.exclude module: 'log4j'
    }

    dependencies {
        compile 'com.google.inject:guice:3.0'
        compile 'com.google.protobuf:protobuf-java:2.4.1'

        //weird, why is their maven not working(we drop it in the directory instead)...
        //compile 'org.asteriskjava:asterisk-java:1.0.0.M3'   

        //to be erased as soon as we get the chance...(we should try this NOW and see if it is needed anymore)
        compile 'commons-configuration:commons-configuration:1.8'
        compile 'org.bouncycastle:bcpg-jdk16:1.46'

        compile project(':webserver')

        //gradle is not sucking in transitive dependencies when they exist in another project so we suck them
        //in ourselves here...
        compile fileTree(dir: '../webserver/play-1.2.4/framework/lib', include: '*.jar')
        compile fileTree(dir: '../webserver/lib', include: '*.jar')
        compile fileTree(dir: '../webserver/play-1.2.4/framework', include: 'play-*.jar')

        compile 'org.bouncycastle:bcpg-jdk16:1.46'

        testCompile 'junit:junit:4.11'
    }

    task generateSources {
        project.ext.outputDir = file("$buildDir/generated-src")
        outputDir.exists() || outputDir.mkdirs()
        if (System.properties['os.name'].toLowerCase().contains('windows')) {
            println "*** WINDOWS "
            def result = exec {
                commandLine 'cmd', '/c', '..\\tools\\protoc\\protoc.exe', '--java_out=output\\generated-src', 'src\\schemas\\agentbridge.proto'
            }
        } else {
            throw new RuntimeException("DARN, protoc only works on windows :( :( right now")
        }
    }
    compileJava.dependsOn("generateSources")
    sourceSets {
        main {
            java {
                srcDir 'output/generated-src'
            }
        }
    }

    tasks.eclipse.dependsOn("generateSources")

    task copyJars(type: Copy) {
        from(configurations.compile) {}
        into genLibDir
    }

task initconfig(type:Copy) {
   from('src/staging/toneserver') {
      include '**/*'
   }

   into 'output/staging'
}

    task zip(type: Zip) {
        archiveName 'toneserver-'+project.version+'.zip'
        from('src/staging') {
            include 'toneserver/**'
        }
        from('output/thirdpartylibs') {
            into('toneserver/lib')
        }
        from('output/version') {
            into('webserver')
        }
    }

    zip.dependsOn('copyJars')
    zip.dependsOn('jar')
    assemble.dependsOn('zip')
}

//overwrite the eclipse target so that no .classpath ends up in stserver directory
task eclipse(overwrite: true) {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:31:15.010

`gradle tasks --all`显示所有任务，但仅显示第一级任务依赖项。我同意拥有一种可视化整个任务图的方法会很有用，但这并不是 Gradle 目前提供的开箱即用的东西。

# php - wordpress wpdb显示图片错误

> ID：14629114
> 
> 赞同：0
> 
> 时间：2013-01-31T15:19:37.633
> 
> 标签：php, wordpress

我正在用用户照片创建插件然后图像用 BLOB 保存到数据库中

当我将图像获取到数据库时，它无法正常工作。

我的代码 user-management.php

```
<table cellpadding="5" cellspacing="0">
    <thead>
    <tr>
        <th>Username</th>
        <th>Email</th>
        <th>First Name</th>
        <th>Middle Name</th>
        <th>Last Name</th>
        <th>Status</th>
        <th>Photo</th>
        <th>Date</th>
        <th>Option</th>
     </tr>
    </thead>
    <tbody>
<?php
global $wpdb;
$myadmin = $wpdb->get_results( "SELECT * FROM jon_admin" );
$color1 = "#F8F8F8"; 
$color2 = "#FFFFFF"; 
$row_count = 0;
foreach ($myadmin as $admin) {
    $myadminphoto = $wpdb->get_row( "SELECT * FROM jon_admin_photo WHERE user_login = '".$admin->user_login."' " );
$row_color = ($row_count % 2) ? $color1 : $color2;
    ?>
        <tr>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $admin->user_login; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $admin->email; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $admin->fname; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $admin->mname; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $admin->lname; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $admin->user_status; ?></td>
            <td style="background-color:<? echo $row_color; ?>">
            <img src="<?php echo plugins_url( 'photo.php', __FILE__ ); ?>?pid=<?php echo $myadminphoto->apid; ?>&img=adminphoto" />                </td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $admin->date; ?></td>
            <td style="background-color:<? echo $row_color; ?>">edit view delete</td>
        </tr>
<?php
$row_count++;
}       
?>
    </tbody>
</table> 
```

如果您看到这一行`<img src="<?php echo plugins_url( 'photo.php', __FILE__ ); ?>?pid=<?php echo $myadminphoto->apid; ?>&img=adminphoto" />` ，我会通过另一个页面 photo.php 调用图像

那么 photo.php 的文件就是这个

```
if ( $_GET['img'] == 'adminphoto' ) {
    global $wpdb;
        ## VIEW ADMIN PHOTO
        $id = $_GET['pid'];
        $get_photo =  $wpdb->get_row( "SELECT * FROM jon_admin_photo WHERE apid = '".$id."'" );

            $content = $get_photo->image;
            $filetype = $get_photo->imgcode;
            header('Content-type: $filetype');
            echo $content;

    } 
```

你去，没有图像显示也没有错误显示。

但是当我做这样的事情时，我得到照片的网址然后右键单击打开到新标签，错误说 `Fatal error: Call to a member function get_row() on a non-object in C:\xampp\htdocs\web\advanced-nanny\wp-content\plugins\jon-user-management\photo.php on line 37`

我的代码有问题吗？

请告诉我谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:40:13.847

您需要在您的 php 文件中实例化 wordpress。

我认为在不破坏逻辑的情况下在 Wordpress 中执行此操作的最简单方法是在插件中定义一个这样的函数，以便像 ajax 调用一样使用它：

```
function MY_FUNCTION() {
    if ( $_GET['img'] == 'adminphoto' ) {
        global $wpdb;
        ## VIEW ADMIN PHOTO
        $id = $_GET['pid'];
        $get_photo =  $wpdb->get_row( "SELECT * FROM jon_admin_photo WHERE apid = '".$id."'" );

            $content = $get_photo->image;
            $filetype = $get_photo->imgcode;
            header('Content-type: $filetype');
            echo $content;

    }
    exit();
}
add_action('wp_ajax_MY_FUNCTION', 'MY_FUNCTION');
add_action('wp_ajax_nopriv_MY_FUNCTION', 'MY_FUNCTION');//for users that are not logged in 
```

然后你可以这样称呼它：

```
<img src="<?php echo admin_url('admin-ajax.php'); ?>?action=MY_FUNCTION&pid=<?php echo $myadminphoto->apid; ?>&img=adminphoto" /> 
```

# c# - 属性更改记录

> ID：14629120
> 
> 赞同：1
> 
> 时间：2013-01-31T15:19:54.550
> 
> 标签：c#, asp.net, object, logging, properties

目前在我的应用程序中，我正在记录用户更改的任何值，效果很好。我有一个类对象`MyObject`和`Logs`对象，并且在每个属性上我都会引发一个事件：

```
private string _occupation;
[FieldAlias("_occupation")]
public string Occupation
{
    get { return _occupation; }
    set
    {
        if (this.Occupation != value)
        {
            string oldValue = Occupation;
            _occupation = value;
            NotifyPropertyChanged("Occupation", oldValue, value);
        }
    }
} 
```

该类`MyObject`还实现`INotifyPropertyChanged`了，我有以下事件：

```
public event PropertyChangedEventHandler PropertyChanged;

private void NotifyPropertyChanged<T>(string propertyName, T oldValue, T newValue)
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new Helper.PropertyChangedExtendedEventArgs<T>(propertyName, oldValue, newValue));
    }

    this.Logs.Add(new Logs
    {
        CreatedDate = DateTime.Now,
        CreatedBy = this.ModifiedBy,
        PropertyName = propertyName,
        NewValue = (newValue != null) ? newValue.ToString() : "",
        OldValue = (oldValue != null) ? oldValue.ToString() : ""

    });
} 
```

`CreatedBy`除了上面的字段外，一切正常。由于它来自`MyObject's` `ModifiedBy`属性，更新不会立即发生，因为当时该字段将包含以前的用户名（希望它有意义）。

我如何反映发生的变化，我不能在`ModifiedBy`属性上引发事件，因为它将在`Logs`表中创建一个新行，那么还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:53:36.350

最终以这种方式使用缓存中的当前用户，它将正确更新它。

# string - bash 拆分字符串

> ID：14629121
> 
> 赞同：8
> 
> 时间：2013-01-31T15:19:56.190
> 
> 标签：string, bash, awk, split, cut

我在数组中有以下数据：

```
MY_ARR[0]="./path/path2/name.exe 'word1 word2' 'name1,name2'" 
MY_ARR[1]="./path/path2/name.exe 'word1 word2' 'name3,name4,name5'"
MY_ARR[2]=".name.exe 'word1 word2'"
MY_ARR[3]="name.exe"
MY_ARR[4]="./path/path2/name.exe 'word1 word2' 'name1'"
MY_ARR[5]="./path/path2/name.exe 'word1 word2' 'name.exe, name4.exe, name5.exe'" 
```

我想把它分成两个变量：`$file`和`$parameter`.

例子：

```
file="./path/path2/name.exe"
parameter="'word1 word2' 'name1,name2'" 
```

我可以用 awk 做到这一点：

```
parameter=$(echo "${MY_ARR[1]}" | awk -F\' '{print $2 $4}')
file=$(echo "${MY_ARR[1]}" | awk -F\' '{print $1}') 
```

这需要删除尾随空格并且看起来很复杂。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T15:25:05.800

看起来字段之间的分隔符是一个空格。因此，您可以使用`cut`拆分它们：

```
file=$(echo "${MY_ARR[1]}" | cut -d' ' -f1)
parameter=$(echo "${MY_ARR[1]}" | cut -d' ' -f2-) 
```

*   `-f1`表示第一个参数。
*   `-f2-`表示第二个参数的所有内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T15:26:32.880

您可以使用`read`：

```
$ read file parameter <<< ${MY_ARR[1]}
$ echo "$file"
./path/path2/name.exe
$ echo "$parameter"
'word1 word2' 'name3,name4,name5' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T14:55:45.693

给定这个数组：

```
 MY_ARR[0]="./path/path2/name.exe 'word1 word2' 'name1,name2'"
    MY_ARR[1]="./path/path2/name.exe 'word1 word2' 'name3,name4,name5'"
    MY_ARR[2]=".name.exe             'word1 word2'"
    MY_ARR[3]="name.exe"
    MY_ARR[4]="./path/path2/name.exe 'word1 word2' 'name1'"
    MY_ARR[5]="./path/path2/name.exe 'word1 word2' 'name.exe, name4.exe, name5.exe'" 
```

让我们创建 2 个新数组 MY_FILES 和 MY_PARAMETERS

```
 for  MY_ARR_INDEX in  ${!MY_ARR[*]}  ;  do

         ######
         # Set the current file in new array.

              MY_FILES[ ${MY_ARR_INDEX} ]=${MY_ARR[ ${MY_ARR_INDEX} ]// *}

         ######
         # Set the current parameters in new array

         MY_PARAMETERS[ ${MY_ARR_INDEX} ]=${MY_ARR[ ${MY_ARR_INDEX} ]#* }

         ######
         # Show the user whats happening
         # (from here until done is just printing info.)

         printf "MY_FILES[ ${MY_ARR_INDEX} ]=\"%s\"  ;  MY_PARAMETERS[ ${MY_ARR_INDEX} ]=\"%s\"\n" \
         \
          "${MY_ARR[ ${MY_ARR_INDEX} ]// *}"  "${MY_ARR[ ${MY_ARR_INDEX} ]#* }"

    done

    MY_FILES[ 0 ]="./path/path2/name.exe"  ;  MY_PARAMETERS[ 0 ]="'word1 word2' 'name1,name2'"
    MY_FILES[ 1 ]="./path/path2/name.exe"  ;  MY_PARAMETERS[ 1 ]="'word1 word2' 'name3,name4,name5'"
    MY_FILES[ 2 ]=".name.exe"  ;  MY_PARAMETERS[ 2 ]="            'word1 word2'"
    MY_FILES[ 3 ]="name.exe"  ;  MY_PARAMETERS[ 3 ]="name.exe"
    MY_FILES[ 4 ]="./path/path2/name.exe"  ;  MY_PARAMETERS[ 4 ]="'word1 word2' 'name1'"
    MY_FILES[ 5 ]="./path/path2/name.exe"  ;  MY_PARAMETERS[ 5 ]="'word1 word2' 'name.exe, name4.exe, name5.exe'" 
```

如何访问每个文件：

```
 for  MY_ARR_INDEX in  ${!MY_FILES[*]}  ;  do

         CUR_FILE=${MY_FILES[ ${MY_ARR_INDEX} ] }

         echo "# Do something with this file: ${CUR_FILE}"

    done 
```

输出：

```
 Do something with this file: ./path/path2/name.exe
    Do something with this file: ./path/path2/name.exe
    Do something with this file: .name.exe
    Do something with this file: name.exe
    Do something with this file: ./path/path2/name.exe
    Do something with this file: ./path/path2/name.exe 
```

如何访问每个参数：

```
 for  MY_ARR_INDEX in  ${!MY_PARAMETERS[*]}  ;  do

         CUR_FILE=${MY_FILES[ ${MY_ARR_INDEX} ]}

         echo "# Do something with this parameter: ${CUR_FILE}"

    done 
```

输出：

```
 Do something with this parameter: ./path/path2/name.exe
    Do something with this parameter: ./path/path2/name.exe
    Do something with this parameter: .name.exe
    Do something with this parameter: name.exe
    Do something with this parameter: ./path/path2/name.exe
    Do something with this parameter: ./path/path2/name.exe 
```

由于 ${!MY_FILES[ [*]} 导致数组 MY_FILES 的索引 NUMBERS，您也可以使用相同的索引号来访问其他数组。这样，您可以在同一个循环中访问多列数据。像这样：

```
 ################
    #
    # Print each file and matching parameter(s)
    #
    ################

    # Set a printf format string so we can print all things nicely.

    MY_PRINTF_FORMAT="#  %25s  %s\n"

    ################
    #
    # Print the column headings and use index numbers
    #
    #        to print adjacent array elements.
    #
    ################
    (

            printf   "${MY_PRINTF_FORMAT}"  "FILE" "PARAMETERS"    "----" "----------"

        for  MY_ARR_INDEX in  ${!MY_FILES[*]}  ;  do

             printf  "${MY_PRINTF_FORMAT}"  "${MY_FILES[ ${MY_ARR_INDEX} ]}"  "${MY_PARAMETERS[ ${MY_ARR_INDEX} ]}"

        done
    ) 
```

输出 ：

```
 FILE  PARAMETERS
                           ----  ----------
          ./path/path2/name.exe  'word1 word2' 'name1,name2'
          ./path/path2/name.exe  'word1 word2' 'name3,name4,name5'
                      .name.exe              'word1 word2'
                       name.exe  name.exe
          ./path/path2/name.exe  'word1 word2' 'name1'
          ./path/path2/name.exe  'word1 word2' 'name.exe, name4.exe, name5.exe' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-31T11:21:46.570

除非我遗漏了什么，否则最简单和最便携的方法就是为此使用两种[bash](/questions/tagged/bash "显示标记为“bash”的问题")扩展变体。

```
file="${MY_ARR[0]%%' '*}"
parameter="${MY_ARR[0]#*' '}" 
```

**解释**

*   `"${MY_ARR[0]%%' '*}"`- 这将删除第一个空格及其后的任何内容，并返回剩余部分
*   `"${MY_ARR[0]#*' '}"`- 这会删除第一个空格之前的所有内容，并返回剩余部分

有关更详细的说明，请参阅`Parameter Expansion`bash 手册页的部分

# vbscript - 如何知道 CScript.exe 的 //E:engine 选项的有效脚本引擎名称？

> ID：14629123
> 
> 赞同：4
> 
> 时间：2013-01-31T15:20:04.550
> 
> 标签：vbscript, jscript, wsh

当您通过 CScript.exe 执行具有 .VBS、.JS 或 .WSF 扩展名的文件时，它们会正确执行：

```
CScript vbsProg.vbs
CScript jsProg.js
CScript wshScript.wsf 
```

但是，我们可以使用 //E:engine 选项来运行具有不同扩展名的 VBS 或 JScript 文件：

```
CScript //E:VBS vbsProg.txt
CScript //E:JScript jsProg.txt 
```

**有没有办法用 WSF 文件做同样的事情？**

```
CScript //E:WhatGoesHere wshScript.txt 
```

有没有记录脚本引擎名称的地方？有没有办法知道所有已安装引擎的名称？

谢谢！

安东尼奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:23:26.910

[编辑] 在阅读了 Ekkehard Horner 的评论后，我决定删除我关于 //E 开关的第一句话。

WSF 本身是一个批处理作业文件，其中可能包含不同语言的脚本，例如：

```
<package>
  <job>
    <script language="VBScript">
      WScript.Echo "Echo from VBScript"
    </script>
    <script language="JScript">
      WScript.Echo("Echo from JScript");
    </script>
    <script language="XYZ">
      //where XYZ s`d be a valid name of installed language
    </script>
  </job>
</package> 
```

并且`//E`根本不适用于 WSF 文件。CScript 只能通过它们的扩展名识别它们，这意味着通过 CScript 运行 WSF 的唯一方法是：

```
CScript ScriptName.WSF 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-27T20:29:37.397

尽管无法知道已安装的`CScript //E:`命令引擎的名称，但有一种非常简单的方法可以执行具有任何扩展名为 .wsf 的文件：

```
CScript wshScript.txt?.wsf 
```

[这篇文章的](http://www.dostips.com/forum/viewtopic.php?p=33963#p33963)更多细节。

# java - 如何将点击弹出窗口添加到 iText 生成的 PDF？

> ID：14629124
> 
> 赞同：0
> 
> 时间：2013-01-31T15:20:05.250
> 
> 标签：java, pdf, itext

基本上，我希望在单击某个 Chunk 元素时在 PDF 文档中显示一个内置的弹出窗口。

显然这是可能的，但我运气不好找到解决方案。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:06:31.870

您需要该`setAction()`方法并定义一个操作。我知道这只是一半的答案，但话又说回来，你只发布了一半的问题。要回答您问题的后半部分，我们需要知道您想要什么类型的弹出窗口。您想要一个实际的弹出式注释（如“iText in Action - Second Edition”的第 7 章所述）还是 JavaScript 警报就足够了？“弹出窗口”的目的是什么？请注意，PDF 和 AcroJS 参考讨论了弹出注释、警报框等概念，但没有定义“弹出窗口”的概念。您需要更具体地使用 PDF 或 AcroJS 术语。

# java - HTTP 状态 500 空指针异常

> ID：14629125
> 
> 赞同：0
> 
> 时间：2013-01-31T15:20:06.473
> 
> 标签：java, hibernate, jsp, netbeans, mysql-workbench

我制作的一个jsp网站运行良好，直到我编写了数据库脚本，删除了数据库，将脚本更改为级联删除并重新运行数据库。现在，当我运行该网站时，我收到以下错误：S 可能是什么？（使用 Netbeans、JSP 和 Hibernate）

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: java.lang.NullPointerException
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
root cause

java.lang.NullPointerException
    org.apache.jsp.index_jsp._jspService(index_jsp.java:337)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.27 logs. 
```

# elasticsearch - 如何构建弹性搜索查询以匹配文档字段中的每个标记？

> ID：14629136
> 
> 赞同：5
> 
> 时间：2013-01-31T15:20:44.027
> 
> 标签：elasticsearch

**我需要确保字段的每个标记都与用户搜索中的至少一个标记匹配。**

为简化起见，这是一个通用示例。

让`Store_Name = "Square Steakhouse"`

当用户搜索 Square 或 Steakhouse 时，构建与此文档匹配的查询很简单。此外，通过将 kstem 过滤器附加到默认分析器，Steakhouses 也可能匹配。

```
{
  "size": 30,
  "query": {
    "match": {
      "Store_Name": {
        "query": "Square",
        "operator": "AND"
      }
    }
  }
} 
```

不幸的是，我需要匹配 Store_Name 字段的每个标记。我需要以下行为：

```
Query: Square Steakhouse    Result: Match
Query: Square Steakhouses   Result: Match
Query: Squared Steakhouse   Result: Match
Query: Square               Result: No Match
Query: Steakhouse           Result: No Match 
```

**总之**

*   使用 not_analyzed 不是一个选项，因为我确实需要利用分析器功能
*   我打算使用 kstem、自定义同义词、自定义 char_filter、小写过滤器以及标准标记器

但是，我需要确保字段的每个标记都匹配

这在弹性搜索中可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:21:19.627

**这是一个很好的方法。**

它并不完美，但在简单性、计算和存储方面是一个很好的折衷方案。

*   索引字段的令牌计数
*   获取搜索文本的token计数
*   执行过滤查询并强制结果之间的令牌数相等

您将需要使用分析 API 来获取令牌计数。确保使用与相关字段相同的分析器。这是一个获取令牌计数的 VB.NET 函数：

```
Private Function GetTokenCount(ByVal RawString As String, Optional ByVal Analyzer As String = "default") As Integer
    If Trim(RawString) = "" Then Return 0

    Dim client = New ElasticConnection()
    Dim result = client.Post("http://localhost:9200/myindex/_analyze?analyzer=" & Analyzer, RawString) 'Submit analyze request usign PlainElastic.NET API
    Dim J = JObject.Parse(result.ToString()) 'Populate JSON.NET JObject
    Return (From X In J("tokens")).Count() 'returns token count using a JSON.NET JObject

End Function 
```

您将希望在索引时使用它来存储相关字段的令牌计数。确保 TokenCount 的映射中有一个条目

这是一个很好的弹性搜索查询，用于利用这个新的令牌计数信息：

```
{
  "size": 30,
  "query": {
    "filtered": {
      "query": {
        "match": {
          "MyField": {
            "query": "[query]",
            "operator": "AND"
          }
        }
      },
      "filter": {
        "term": {
          "TokenCount": [tokencount]
        }
      }
    }
  }
} 
```

*   将 [query] 替换为搜索词
*   将 [tokencount] 替换为搜索词中的令牌数（使用上面的 GetTokenCount 函数

这确保所有匹配项至少与`MyField`.

以上有一些缺点。例如，如果我们正在匹配字段“blue red”，并且用户搜索“blue blue”，则上述将触发匹配。因此，您可能想要使用[唯一的令牌过滤器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/unique-tokenfilter.html)。您可能还希望调整过滤器，以便

**参考**

*   [Clinton Gormely 启发了解决方案](https://groups.google.com/forum/?fromgroups=#!topic/elasticsearch/ttJTE52hXf8)

# php - JMSSerializer 独立 - 注释不存在，或无法自动加载

> ID：14629137
> 
> 赞同：38
> 
> 时间：2013-01-31T15:20:44.680
> 
> 标签：php, jmsserializerbundle

我正在尝试使用 JMSSerializer 作为一个独立的库来将来自 API 的 JSON 响应映射到我的模型类，并且遇到了一些问题。

执行以下代码会导致异常：

```
<?php
require dirname(__DIR__) . '/vendor/autoload.php';

use JMS\Serializer\Annotation AS JMS;

class Trii {
    /**
     * User ID for this session
     * @JMS\SerializedName("userID")
     * @JMS\Annotation(getter="getUserId")
     * @JMS\Type("string")
     * @var string
     */
    private $userId;

    public function getUserId() {
        return $this->userId;
    }

    public function setUserId($userId) {
        $this->userId = $userId;
    }
}

$serializer = \JMS\Serializer\SerializerBuilder::create()->setDebug(true)->build();
$object = $serializer->deserialize('{"userID":"Trii"}', 'Trii', 'json');
var_dump($object);
?> 
```

这是例外

```
Doctrine\Common\Annotations\AnnotationException: [Semantical Error] The annotation "@JMS\Serializer\Annotation\SerializedName" in property Trii::$userId does not exist, or could not be auto-loaded. 
```

我通过作曲家为项目安装了以下库

```
{
    "require": {
        "jms/serializer": "1.0.*@dev"
    }
} 
```

因为我没有使用整个 Doctrine 2 解决方案，所以有什么明显的遗漏吗？

编辑：我的最终解决方案是创建一个包含以下内容的引导文件：

```
<?php
// standard composer install vendor autoload magic
require dirname(__DIR__) . '/vendor/autoload.php';

// Bootstrap the JMS custom annotations for Object to Json mapping
\Doctrine\Common\Annotations\AnnotationRegistry::registerAutoloadNamespace(
    'JMS\Serializer\Annotation',
    dirname(__DIR__).'/vendor/jms/serializer/src'
);
?> 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-02-04T09:39:09.020

可以肯定的是，这会启用静默自动加载，这比自己注册命名空间要方便得多。

```
AnnotationRegistry::registerLoader('class_exists'); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-01T12:37:23.563

我遇到了同样的问题，并通过谷歌找到了你的问题。不幸的是，您还没有收到任何答案，所以我不得不自己挖掘。:P

问题是，JMSSerializer Annotations 使用的 Doctrine Annotations[不使用普通的 PHP 自动加载](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html)。

> 这些注解是如何加载的？通过查看代码，您可以猜到 ORM 映射、断言验证和完全限定的注释可以使用定义的 PHP 自动加载器加载。然而情况并非如此：出于错误处理的原因，AnnotationReader 中的每次检查类是否存在都会将 class_exists($name, $autoload) 的第二个参数 $autoload 设置为 false。为了完美地工作，AnnotationReader 需要静音自动加载器，而许多自动加载器不需要。静默自动加载不是 PSR-0 自动加载规范的一部分。

这意味着您必须自己注册注释文件：

```
AnnotationRegistry::registerFile(
   <PROJECT ROOT> . 
   "/vendor/jms/serializer/src/JMS/Serializer/Annotation/SerializedName.php"); 
```

...或整个命名空间（首选方法）：

```
AnnotationRegistry::registerAutoloadNamespace(
    'JMS\Serializer\Annotation', 
    <PROJECT ROOT> . "/vendor/jms/serializer/src"); 
```

小心中的路径`registerAutoloadNamespace`。我首先尝试以相同的方式注册注释的整个路径`registerFile`：

```
<PROJECT ROOT> . "/vendor/jms/serializer/src/JMS/Serializer/Annotation 
```

但这惨败。:D

我希望这能让你更进一步。:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-15T15:53:17.173

@SirArturio 对这个自动加载难题有正确的答案，我只是想更清楚地回应@messified 或其他任何努力让它工作的人。正如他雄辩地解释的那样，composer 或 SPL 中的自动 PSR-0 处理程序不会为了加载这些注释而削减它，因为它们使用 Doctrine 的自动加载。

所以这里是一个完整的小例子。每当您创建 JMS Serializer 对象以开始序列化时，都是将注解命名空间添加到教义自动加载器的好时机。为了清楚起见，我假设没有 IoC 和完全限定的命名空间（提示提示，使用依赖注入）：

```
<?php
Doctrine\Common\Annotations\AnnotationRegistry::registerAutoloadNamespace(
'JMS\Serializer\Annotation', 
$your_app_basepath . "/vendor/jms/serializer/src");

$serializer = JMS\Serializer\SerializerBuilder::create()->build();
$json_output = $serializer->serialize('MyProject\MyClass', 'json'); 
```

然后在您的 MyProject\MyClass 中：

```
<?php
use JMS\Serializer\Annotation as JMS;

class MyClass{

    /** @JMS\Exclude */
    private $something_secret;
} 
```

那应该削减它，使用教义而不是作曲家自动加载正确的注释文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-26T14:14:56.187

检查注释的大小写。从 Windows 开发环境部署到 Ubuntu 服务器时，我遇到了类似的问题，这是由我的注释中的拼写错误引起的。Windows 文件不区分大小写，因此它可以在那里工作，但在 Linux 上失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-08T13:22:41.557

如果你使用 Composer，你可以通过在 require 中指定路径来获取 loader：

```
$loader = require(__DIR__ . '/../vendor/autoload.php');
AnnotationRegistry::registerLoader(array($loader, 'loadClass')); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-03-02T18:05:30.633

这是解决方案

1\. 进入 php 目录，然后安装 composer php composer-setup.php 2\. 进入项目 sdk 目录，例如

cd /Applications/XAMPP/xamppfiles/htdocs/streetreturn/adn_sdk-php-master

更新作曲家以安装依赖项 php /Users/zakir/composer.phar 更新

*注意：/Users/zakir/composer.phar 将在第 1 步安装 composer 时定位

# algorithm - 大括号表达式公式中的模式匹配

> ID：14629140
> 
> 赞同：2
> 
> 时间：2013-01-31T15:21:09.280
> 
> 标签：algorithm, tree, pattern-matching, expression, fsm

我有一长串 n (~50000) 行的列表，其中的公式如下所示：

```
A(1, 2) = 54353
A(1, 2, 3) = 89327
A(1, B(1, 2)) = 8372
A(7, B(1, 3, 5)) = 6311
A(7, B(C(1, 3, 7), 2, C(1, 3), 5)) = 28490
B(A(1, C(5, 3)), 3, 8, D(1, 2)) = 39783 
```

等等

这些公式包含文字（即`1`, `2`, `3`,`5`等）和函数调用（即`A(x, y)`or `A(x, y, z)`or `B(x, y)`），其中函数的参数也可以是文字或其他（嵌套）函数调用。函数（即`A`、`B`、`C`等）是固定的，它们的数量不会太多（可能有十几个）。

`*`现在我已经使用完整的公式或某种应该充当全局字符的模式运行查询，即：

```
A(1, 2) => [54353]
A(1, *) => [54353, 89327, 8372]
A(*, 3) => [89327]
A(*, B(*)) => [8372, 6311, 28490]
A(*, B(*, 3, *)) => [6311] 
```

基本上，我有两个问题：

1.  怎么做*：*事实上，我不知道这里有一个好的基本模式匹配算法。我尝试将带有 * 的表达式转换为正则表达式，它适用于简单的示例，但唉，对于更复杂的示例来说失败了，即：

    ```
    Converting:
    'A(*, B(*, 3, *))' => /^A\(.*, B\(.*, 3, .*\)\)$/

    True positive:
    'A(7, B(1, 3, 5))' =~ /^A\(.*, B\(.*, 3, .*\)\)$/

    False positive:
    'A(7, B(C(1, 3, 7), 2, C(1, 3), 5))' =~ /^A\(.*, B\(.*, 3, .*\)\)$/ 
    ```

    我觉得将这些大括号表达式转换为反向波兰符号，然后应用正常的正则表达式方法可能会有所帮助，但我不确定。

2.  如何*快速*完成：任何比为每个查询执行约 50000 次匹配更快的想法都非常受欢迎。是否可以在这里使用某种 FSM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:28:03.900

正则表达式（最初）是为[*正则语言设计的，而您正在描述*](http://en.wikipedia.org/wiki/Regular_language)[*Context Free Language*](http://en.wikipedia.org/wiki/Context-free_language)。

您的语言可以被 Deterministic [*Push-Down Automata*](http://en.wikipedia.org/wiki/Pushdown_automata)解析。

这个想法类似于 FSM，但除此之外，您还有一个可以使用的[*堆栈*](http://en.wikipedia.org/wiki/Stack_%28data_structure%29)`push()`和`pop()`元素。
更改 FSM 中的状态也取决于堆栈的头部。

# c# - 我的文本框验证事件中的代码导致错误“标准表达式中的数据类型不匹配”

> ID：14629143
> 
> 赞同：0
> 
> 时间：2013-01-31T15:21:22.037
> 
> 标签：c#, ms-access

Visual C# 2008 速成版。访问 2010 数据库。当我使用以下代码时，我收到一个错误“条件表达式中的数据类型不匹配”，但如果我取出 txt85x11bw_Validating 事件的代码，它就可以正常工作。我试图了解日期类型不匹配的原因。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace GISReciepts
{
public partial class GISReceipts : Form
{
    public GISReceipts()
    {
        InitializeComponent();
    }

    private void cmdExit_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void cmdAdd_Click(object sender, EventArgs e)
    {
        string strSQL = "INSERT INTO Table1(Name1, Date1, CollectedBy, 85x11BW) VALUES(@Name, @Date, @CollectedBy, @85x11BW)";

        //OleDbConnection is a class that represents an open connection to a data source
        OleDbConnection myConnection = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Temp\\GISTest.accdb");
        //OleDbCommand is a class that represents an SQL statement or stored procedure to execute against a data source.(takes care of passing queries to the database.
        OleDbCommand myCommand = new OleDbCommand(strSQL, myConnection);
        myCommand.Parameters.AddWithValue("@Name", txtName.Text);
        myCommand.Parameters.AddWithValue("@Date", maskedTextBoxDate.Text);
        myCommand.Parameters.AddWithValue("@CollectedBy", txtCollectedBy.Text);
        myCommand.Parameters.AddWithValue("@85x11BW", txt85x11bw.Text);

        try
        {
            myConnection.Open();
            myCommand.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            myConnection.Close();
           // MessageBox.Show("Entry Added");  //this is displaying even on errors & when no data is added to table
        }

    }

    private void GISReceipts_Load(object sender, EventArgs e)
    {
        maskedTextBoxDate.Text = DateTime.Today.ToString("MM/dd/yyyy");

        txt85x11bw.Validating += new CancelEventHandler(txt85x11bw_Validating);       
    }

    private void GISReceipts_FormClosing(object sender, FormClosingEventArgs e)
    {
        DateTime value;
        //DateTime.TryParse converts the srting representation of a date to its DateTime equivalent & returns a value that indicates whether the conversion succedded.
        if (!DateTime.TryParse(maskedTextBoxDate.Text, out value))
        {
            maskedTextBoxDate.Text = DateTime.Today.ToShortDateString();
        }

    }

    private void txt85x11bw_Validating(object sender, CancelEventArgs e)
    {
        if (string.IsNullOrEmpty(txt85x11bw.Text))
        {
            //do nothing
        }
        else
        {
            //initialize the variable numberEntered of type int
            int numberEntered;

            //int=integer TryParse=method that converts strings into integer (value, out result)
            if (int.TryParse(txt85x11bw.Text, out numberEntered))
            {
                //if number is less than 1 or more than 1,000
                if (numberEntered < 1 || numberEntered > 1000)
                    MessageBox.Show("You must enter a valid number");
                txt85x11bw.Clear();

            }
            //if conversion failed
            else
            {
                MessageBox.Show("You must enter a number");
                txt85x11bw.Clear();

            }
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:26:14.310

这一行添加了一个数据类型为 text 的参数，相反，我假设在您的数据库中，列 85x11BW 是数字类型（一个 int 查看您的验证代码）

```
 myCommand.Parameters.AddWithValue("@85x11BW", txt85x11bw.Text); 
```

尝试以这种方式更改线路

```
 myCommand.Parameters.AddWithValue("@85x11BW", Convert.ToInt32(txt85x11bw.Text)); 
```

通过这种方式，您可以强制 AddWithValue 方法添加一个参数，并将其`DbType`属性设置为`Int32`. `@Date`如果相对数据表列属于`DateTime`类型，则参数可能会遇到相同的问题。

**编辑**如果 txt85x11BW 为空，您需要决定为数据表中的该列接受哪个默认值。如果你接受一个 NULL 你可以写这样的东西

```
 int numberEntered = 0;
        int.TryParse(txt85x11bw.Text, out numberEntered);
        if (numberEntered >= 1 && numberEntered <= 1000)
             myCommand.Parameters.AddWithValue("@85x11BW", numberEntered);
        else
             myCommand.Parameters.AddWithValue("@85x11BW", DBNull.Value); 
```

**编辑 2** 在验证事件中，如果值正确，代码也会清除 maskedit 的内容。条件后需要大括号

```
if (int.TryParse(txt85x11bw.Text, out numberEntered))
{
    //if number is less than 1 or more than 1,000
    if (numberEntered < 1 || numberEntered > 1000)
    {
        MessageBox.Show("You must enter a valid number");
        txt85x11bw.Clear();
    }
} 
```

# android - 如何在 Android 2.3(Gingerbread) 中录制 mp4/m4a 格式的音频？

> ID：14629145
> 
> 赞同：4
> 
> 时间：2013-01-31T15:21:25.370
> 
> 标签：android, mp4, mediarecorder, aac, android-mediarecorder

我正在尝试在我的 Android 应用程序中录制音频，但我想要使用 AAC LC 编码的 .mp4 格式的音频文件；可以在我的桌面上播放。因此，使用以下代码，我尝试录制，并且能够在我的 android 上播放它。

```
mRecorder = new MediaRecorder();
mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
mRecorder.setOutputFile("/mnt/sdcard/abcapp/test.mp4");
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC); 
```

但是，当我尝试在我的电脑上播放它时，我无法播放 mp4 文件。我尝试使用所有媒体播放器，包括 VLC、KMPlayer 等，但无法播放。

最烦人的一点是，Play Store 上有像“Easy Voice Recorder”这样的应用程序，它以.mp4 格式录制，并且可以使用Windows Media Player 播放。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T15:54:56.507

找到了解决方案。实际上，还不如将其称为Android中的错误。

我没有停止使用音频，`mRecorder.stop()`而是设置了`mRecorder.setMaxDuration(10000)`. 因此，录音机自动停止并且没有将音频编码为 AAC 或没有应用适当的容器，因此无法获得正确的文件。

解决方案很简单，如果您正在使用`mRecorder.setMaxDuration()`，实现包含类，`MediaRecorder.OnInfoListener`并在发生超时回调时调用`mRecorder.stop()`

# ruby - 我可以使用 gollum 创建一个非 Github 托管的 wiki 吗？

> ID：14629149
> 
> 赞同：5
> 
> 时间：2013-01-31T15:21:45.937
> 
> 标签：ruby, gollum-wiki

我想用 gollum 创建一个 wiki 并将其推送到我自己的 git repo，这可能吗？

我创建了一个新的 git repo，安装 gollum 并启动它。我得到了“编辑/主页”页面。我添加了一些内容，保存了……一切看起来都很好。甚至“修订历史”也表明发生了修订。

然后我停止了 gollum，发现我的 git repo 中没有任何新内容，我什至检查了是否有东西没有被推送……什么都没有。我不确定它如何/在哪里存储我在运行时添加的内容。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-19T05:56:54.257

Gollum 不会与 git 远程同步。它永远不会执行`git pull`或`git push`。您必须*在远程服务器上*`git push`运行 gollum，或者您必须在您进行编辑`git pull`的机器上以及还想查看 wiki 的机器上手动运行。如果您在本地运行，这可能是 cron 作业的一部分。

在您的 Web 服务器上运行 gollum 进程要容易得多。请参阅下面的详细信息：

[http://www.nomachetejuggling.com/2012/05/15/personal-wiki-using-github-and-gollum-on-os-x/#toc-synchronization-with-github](http://www.nomachetejuggling.com/2012/05/15/personal-wiki-using-github-and-gollum-on-os-x/#toc-synchronization-with-github)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:07:44.210

可能是您检查了错误的存储库，默认是让 gollum 使用或在页面文件的根目录创建一个 git 存储库。可以使用选项`--page-file-dir`和`--base-path`(cf `gollum --help`)更改它

# google-analytics - 将 gclid 传递给 _trackEvent

> ID：14629150
> 
> 赞同：1
> 
> 时间：2013-01-31T15:21:57.487
> 
> 标签：google-analytics

我正在使用 _trackEvent 在 Google Analytics 中记录事件，它似乎工作正常。

我正在做这样的事情：

```
_gaq_push(['_trackEvent', 'Chat', 'Male',
        'www.somesite.co.uk/?gclid=CNHvuPiijrUCFQsGnQodpjsA9w']); 
```

现在，我看到 URL 和 gclid 出现在 Google Analytics 的标签字段中，但我真正想要的是让它解释 gclid 并填充 GA 中的关键字部分。

这可能吗？我如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:24:11.593

将您的 adwords 帐户链接到您的 google 分析帐户，gclid 将自动解析。无法手动解析 gclid。

更新：对不起，我刚刚看到你在谈论事件。所以不，这是不可能的 - 正确的方法是使用您的关键字构建细分并查看哪些事件适用于该细分（或相反，取决于您在做什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:35:05.653

我不确定你想在这里实现什么，但 gclid 是没有公开记录的东西。如果您真的想填写活动信息，您应该尝试使用[此处](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCampaigns#customCampaignTracking)描述的 API或执行类似[的](http://blog.kissmetrics.com/how-to-use-utm-parameters/)操作。

# php - 我需要使用 PHP 发送电子邮件，如何在我的 PC（windows XP）上安装 smtp 服务器？

> ID：14629153
> 
> 赞同：2
> 
> 时间：2013-01-31T15:22:07.547
> 
> 标签：php, smtp

我已经安装了 apache-5.4.2、PHP-5.4.11 和 Mysql-5.5.29 。我想使用 php 发送邮件。我意识到我需要在我的 PC 上安装一个 SMTP 服务器才能发送邮件。谁能告诉我有关如何安装 SMTP 服务器以发送邮件的详细信息。请给我详细信息，因为我是新手。仅供参考，我在 PHP 中使用以下代码。谢谢。

```
<?php
$to = "xyz@gmail.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "abc@gmail.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:32:25.290

假设您可以访问标准电子邮件地址，那么您的 PC 上不需要 SMTP 服务器，您只需在 php.ini 中设置您的详细信息。

如果你打开你的 php.ini 文件，找到这个部分；

```
[mail function]
SMTP = [Enter You Email SMTP address e.g. smtp.mymail.com]
smtp_port = 25

sendmail_from = [Enter your From Email Address e.g. me@mymail.com]

auth_username = [Enter your Email Address UserName e.g. me1234] 
auth_password = [Enter your Email Address Password e.g. password1234] 
```

如果您输入为您的常规电子邮件地址提供的值（不带方括号！），重新启动您的 WebServer 和 PHP，那么您应该可以启动并运行...

**编辑：**

似乎 GMAIL / Google Apps 需要 SSL 才能发送电子邮件。

因此，这里有一个 StackOverflow 问题。[如何通过 mail() 使用 Gmail 发送电子邮件？我把密码放在哪里？](https://stackoverflow.com/questions/10380051/how-do-i-send-email-using-gmail-through-mail-where-do-i-put-the-password)

完整的教程在这里... [http://www.web-development-blog.com/archives/send-e-mail-messages-via-smtp-with-phpmailer-and-gmail/](http://www.web-development-blog.com/archives/send-e-mail-messages-via-smtp-with-phpmailer-and-gmail/)

那有一个通过 gmail 和 PHPMailer 发送电子邮件的完整教程。摘录如下：

* * *

**1)**如果您没有，请注册一个 GMail 帐户或为 Google 应用程序设置您的域。

**2）**下载最新版本的PHPMailer（我使用的是5.02版本）

**3)**与您的网络托管服务提供商确认端口 465（TCP 输出）是否打开，如果没有请他打开该端口

**4)**包含 PHPMailer 类文件：

```
require_once('phpmailer/class.phpmailer.php'); 
```

**5)**创建这两个常量变量来存储您的 GMail 登录名和密码。如果您有 Google Apps 邮件帐户，请使用登录名。

```
define('GUSER', 'you@gmail.com'); // GMail username
define('GPWD', 'password'); // GMail password 
```

**6）**使用以下功能发送电子邮件（在您包含的文件之一中添加该功能）：

```
function smtpmailer($to, $from, $from_name, $subject, $body) { 
    global $error;
    $mail = new PHPMailer();  // create a new object
    $mail->IsSMTP(); // enable SMTP
    $mail->SMTPDebug = 0;  // debugging: 1 = errors and messages, 2 = messages only
    $mail->SMTPAuth = true;  // authentication enabled
    $mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for GMail
    $mail->Host = 'smtp.gmail.com';
    $mail->Port = 465; 
    $mail->Username = GUSER;  
    $mail->Password = GPWD;           
    $mail->SetFrom($from, $from_name);
    $mail->Subject = $subject;
    $mail->Body = $body;
    $mail->AddAddress($to);
    if(!$mail->Send()) {
        $error = 'Mail error: '.$mail->ErrorInfo; 
        return false;
    } else {
        $error = 'Message sent!';
        return true;
    }
} 
```

GMail 需要函数内部的大部分设置。在搜索 PHPmailer 教程时，我发现了具有不同端口和安全设置的文章。我的建议是使用本教程中的设置。

**7）**在您的代码中调用该函数：

```
smtpmailer('to@mail.com', '', 'from@mail.com', 'yourName', 'test mail message', 'Hello World!'); 
```

在您的应用程序中使用这种更“高级”的用法：

```
if (smtpmailer('to@mail.com', 'from@mail.com', 'yourName', 'test mail message', 'Hello World!')) {
    // do something
}
if (!empty($error)) echo $error; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:27:52.450

几年前，在 XP 上，我曾经安装[Argosoft Mini MailServer](http://www.argosoft.com/rootpages/Download.aspx)。

我更喜欢它而不是 gmail 或外部的，因为我可以看到 SMTP 日志。`localhost`只需在您的 PHP 代码中定义您的 smtp 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:34:00.157

您需要配置 php.ini 文件以通过 php 发送邮件功能发送电子邮件。

1.  打开 php.ini 文件。

默认 php.ini 文件设置

【邮件功能】；仅适用于 Win32。; [http://php.net/smtp](http://php.net/smtp) SMTP = 本地主机；[http://php.net/smtp-port](http://php.net/smtp-port) smtp_port = 25

; 仅适用于 Win32。; [http://php.net/sendmail-from](http://php.net/sendmail-from) sendmail_from = you@yourdomain

; 仅适用于 Unix。您也可以提供参数（默认值：“sendmail -t -i”）。; [http://php.net/sendmail-path](http://php.net/sendmail-path) ;sendmail_path =

这些条目是从邮件服务器向任何邮件客户端发送邮件所必需的。

2.以下两行不存在：

auth_username auth_password

您需要添加它们以从需要身份验证的服务器发送邮件。

1.  更改 SMTP 设置

smtp_server = mail.example.com ///您的 SMTP 服务器名称。smtp_port = 26 // SMTP 端口号 auth_username = username@example.com auth_password = 密码 sendmail_from = you@example.com // 来自电子邮件地址。

4.保存 php.ini 文件。

1.  重新启动服务器。

2.  完毕。

# ios - UIView 层次结构中的顶级视图

> ID：14629158
> 
> 赞同：0
> 
> 时间：2013-01-31T15:22:36.780
> 
> 标签：ios, objective-c

我有一个自定义 UIView 的单例实例，其方法`-(void)display`是在当前显示的任何屏幕上为自定义视图进出动画。（有点像 UIAlertView 中的 -show 方法）。

我的问题是如何确定哪个视图位于 UIView 层次结构的顶部并当前显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:27:14.390

视图层次结构的“顶部”是 UIWindow。并且应用程序中可以有（并且通常是）不止一个 UIWindow。如果您想在屏幕上的其他所有内容上显示某些内容，我建议您实现一个自定义 UIWindow。例如 UIAlertView 也是这样实现的。

# ruby - Ruby httpclient 网址

> ID：14629166
> 
> 赞同：0
> 
> 时间：2013-01-31T15:22:52.430
> 
> 标签：ruby, https, httpclient

我正在通过`HTTPClient`ruby​​ gem 调用网络服务。位置无关紧要，但假设它位于：`https://mywebservice.com/api/v1/accounts/login/`

当我发送一个帖子请求时：

```
url = "https://mywebservice.com/api/v1/accounts/login/"
client = HTTPClient.new
client.post url 
```

我收到 404 响应，表示找不到该页面。我设置了一个代理并检查了发送的确切内容，似乎 gem 正在弄乱 url，它实际上将请求发送到：

```
https://mywebservice.comhttps://mywebservice.com:443/api/v1/accounts/login/ 
```

我完全迷失了，我不知道为什么要这样做。它与它是 https 的事实有什么关系，我应该以不同的方式处理 https 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:20:18.543

是的，如果您要请求`https`网址，请执行以下操作：

```
require 'net/http'
require 'net/https'
require 'uri'

uri = URI.parse(url)

http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new(uri.request_uri)
#you need to set this field to true
http.use_ssl = true 
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
response = http.request(request) 
```

这是一个应该有帮助的链接：

[http://bibwild.wordpress.com/2012/04/30/httpclient-is-a-nice-http-client-forin-ruby/](http://bibwild.wordpress.com/2012/04/30/httpclient-is-a-nice-http-client-forin-ruby/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-31T15:35:15.423

您应该使用一组参数发布到 uri。就像是

```
client.post "http://mysite.com:8080", data 
```

其中 data 是具有页面所需参数的哈希值。

例如：

```
data = {"var" => "var"} 
```

# iphone - 奇怪的错误'无法识别的选择器发送到实例'

> ID：14629172
> 
> 赞同：0
> 
> 时间：2013-01-31T15:23:08.040
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我在尝试将一堆变量从一个类传递到另一个类时出错，我的第一个类控制一个视图，而我的另一个类是一个控制表视图的 tableviewcontroller，我有一个名为“shoplistSegue”的segue，当我单击一个按钮，它使用“prepareForSegue”方法执行 segue 并传递变量。但是当我单击该按钮时，它会冻结并出现错误“无法识别的选择器已发送到实例 0x74af950”。

类1.h

```
@interface CalcularViewController : UIViewController{

    int calcularIntHomens;
    int calcularIntMulheres;
    int calcularIntCriancas;

}
@property (strong, nonatomic) IBOutlet UILabel *calcularLabelHomens;
@property (strong, nonatomic) IBOutlet UILabel *calcularLabelMulheres;
@property (strong, nonatomic) IBOutlet UILabel *calcularLabelCriancas;
@property (strong, nonatomic) IBOutlet UILabel *calcularLabelFantasmas;
@property int calcularIntHomens;
@property int calcularIntMulheres;
@property int calcularIntCriancas;
- (IBAction)subtractHomens:(id)sender;
- (IBAction)subtractMulheres:(id)sender;
- (IBAction)subtractCriancas:(id)sender;
- (IBAction)addHomens:(id)sender;
- (IBAction)addMulheres:(id)sender;
- (IBAction)addCriancas:(id)sender;
- (IBAction)showResultsIfNotNull:(id)sender;

@end 
```

类1.m

```
#import "CalcularViewController.h"
#import "ResultadoViewController.h"

@interface CalcularViewController ()

@end

@implementation CalcularViewController
@synthesize calcularIntCriancas, calcularIntHomens, calcularIntMulheres, calcularLabelCriancas, calcularLabelHomens, calcularLabelMulheres, calcularLabelFantasmas;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)subtractHomens:(id)sender {

    if (calcularIntHomens > 0) {
    calcularIntHomens = calcularIntHomens -1;
    NSString *submen = [[NSString alloc] initWithFormat:@"%i", calcularIntHomens];
    calcularLabelHomens.text = submen;
    }

}
- (IBAction)subtractMulheres:(id)sender{

    if (calcularIntMulheres > 0) {
    calcularIntMulheres = calcularIntMulheres -1;
    NSString *subwoman = [[NSString alloc] initWithFormat:@"%i", calcularIntMulheres];
    calcularLabelMulheres.text = subwoman;
    }

}
- (IBAction)subtractCriancas:(id)sender{

    if (calcularIntCriancas > 0) {
    calcularIntCriancas = calcularIntCriancas -1;
    NSString *subchild = [[NSString alloc] initWithFormat:@"%i", calcularIntCriancas];
    calcularLabelCriancas.text = subchild;
    }
}
- (IBAction)addCriancas:(id)sender{

    calcularIntCriancas = calcularIntCriancas +1;
    NSString *addchild = [[NSString alloc] initWithFormat:@"%i", calcularIntCriancas];
    calcularLabelCriancas.text = addchild;
}
- (IBAction)addHomens:(id)sender{

    calcularIntHomens = calcularIntHomens +1;
    NSString *addmen = [[NSString alloc] initWithFormat:@"%i", calcularIntHomens];
    calcularLabelHomens.text = addmen;
}
- (IBAction)addMulheres:(id)sender{

    calcularIntMulheres = calcularIntMulheres +1;
    NSString *addwoman = [[NSString alloc] initWithFormat:@"%i", calcularIntMulheres];
    calcularLabelMulheres.text = addwoman;
}

-(IBAction)showResultsIfNotNull:(id)sender{

    if (calcularIntHomens == 0) {
        if (calcularIntMulheres == 0) {
            if (calcularIntCriancas == 0) {
                calcularLabelFantasmas.text = @"Você vai fazer um churrasco pra fantasmas?";
            } else {
                [self performSegueWithIdentifier:@"resultadoSegue" sender:self];
            }
        } else {
            [self performSegueWithIdentifier:@"resultadoSegue" sender:self];

        }
    } else {
        [self performSegueWithIdentifier:@"resultadoSegue" sender:self];

    }

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"resultadoSegue"]) {

        ResultadoViewController *resultados = [segue destinationViewController];

        resultados.resultadoIntCriancas = calcularIntCriancas;
        resultados.resultadoIntHomens = calcularIntHomens;
        resultados.resultadoIntMulheres = calcularIntMulheres;

    }
}
@end 
```

类2.h

```
#import <UIKit/UIKit.h>

@interface ResultadoViewController : UIViewController{

    int resultadoIntHomens;
    int resultadoIntMulheres;
    int resultadoIntCriancas;
    IBOutlet UIScrollView *scroller;
    float resultadoGado;
    float resultadoFrango;
    float resultadoPorco;
    float resultadoLinguica;
    float resultadoQueijo;
    float resultadoPaodealho;
    float resultadoAcompanhamento;
    float resultadoAbacaxiassado;
    float resultadoCebolaassada;
    float resultadoBebidas;
    float resultadoAlcool;
    int areThereBebidas;
    BOOL picanhaBOOL;
    BOOL alcatraBOOL;
    BOOL maminhaBOOL;
    BOOL contrafileBOOL;
    BOOL lombinhoBOOL;
    BOOL linguicaBOOL;
    BOOL coracaoBOOL;
    BOOL asaBOOL;
    BOOL coxaBOOL;
    BOOL queijoBOOL;
    BOOL paodealhoBOOL;
    BOOL arrozBOOL;
    BOOL farofaBOOL;
    BOOL vinagreteBOOL;
    BOOL maionesesaladaBOOL;
    BOOL saladaBOOL;
    BOOL abacaxiassadoBOOL;
    BOOL cebolaBOOL;
    BOOL cervejaBOOL;
    BOOL refriBOOL;
    BOOL aguaBOOL;
    BOOL vodkaBOOL;
    BOOL sucoBOOL;
    int gadoTotal;
    int frangoTotal;
    int acompanhamentoTotal;
    int bebidaTotal;
    int something;
    int alcoolTotal;

}
@property int alcoolTotal;
@property int areThereBebidas;
@property float resultadoAlcool;
@property int resultadoIntHomens;
@property int resultadoIntMulheres;
@property int resultadoIntCriancas;
@property float resultadoGado;
@property float resultadoFrango;
@property float resultadoPorco;
@property float resultadoLinguica;
@property float resultadoQueijo;
@property float resultadoPaodealho;
@property float resultadoAcompanhamento;
@property float resultadoAbacaxiassado;
@property float resultadoCebolaassada;
@property float resultadoBebidas;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelPicanha;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelAlcatra;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelMaminha;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelContrafile;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelLombinho;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelLinguica;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelCoracao;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelAsa;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelCoxa;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelQueijo;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelPaodealho;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelArroz;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelFarofa;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelVinagrete;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelSaladamaionese;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelSalada;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelAbacaxiassado;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelCebola;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelCerveja;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelRefri;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelAgua;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelVodka;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelSuco;
@property (strong, nonatomic) IBOutlet UILabel *resultadoLabelFome;
- (IBAction)addPicanha:(id)sender;
- (IBAction)addAlcatra:(id)sender;
- (IBAction)addMaminha:(id)sender;
- (IBAction)addContrafile:(id)sender;
- (IBAction)addLombinho:(id)sender;
- (IBAction)addLinguica:(id)sender;
- (IBAction)addCoracao:(id)sender;
- (IBAction)addAsa:(id)sender;
- (IBAction)addCoxa:(id)sender;
- (IBAction)addQueijo:(id)sender;
- (IBAction)addPaodealho:(id)sender;
- (IBAction)addArroz:(id)sender;
- (IBAction)addFarofa:(id)sender;
- (IBAction)addVinagrete:(id)sender;
- (IBAction)addSaladamaionese:(id)sender;
- (IBAction)addSalada:(id)sender;
- (IBAction)addAbacaxi:(id)sender;
- (IBAction)AddCebola:(id)sender;
- (IBAction)addCerveja:(id)sender;
- (IBAction)addRefri:(id)sender;
- (IBAction)addAgua:(id)sender;
- (IBAction)addVodka:(id)sender;
- (IBAction)addSuco:(id)sender;
- (IBAction)buttonBack:(id)sender;
- (IBAction)buttonNext:(id)sender;
@property BOOL picanhaBOOL;
@property BOOL alcatraBOOL;
@property BOOL maminhaBOOL;
@property BOOL contrafileBOOL;
@property BOOL lombinhoBOOL;
@property BOOL linguicaBOOL;
@property BOOL coracaoBOOL;
@property BOOL asaBOOL;
@property BOOL coxaBOOL;
@property BOOL queijoBOOL;
@property BOOL paodealhoBOOL;
@property BOOL arrozBOOL;
@property BOOL farofaBOOL;
@property BOOL vinagreteBOOL;
@property BOOL maionesesaladaBOOL;
@property BOOL saladaBOOL;
@property BOOL abacaxiassadoBOOL;
@property BOOL cebolaBOOL;
@property BOOL cervejaBOOL;
@property BOOL refriBOOL;
@property BOOL aguaBOOL;
@property BOOL vodkaBOOL;
@property BOOL sucoBOOL;
@property int gadoTotal;
@property int frangoTotal;
@property int acompanhamentoTotal;
@property int bebidaTotal;
@property int something;

@end 
```

类2.m

```
#import "ResultadoViewController.h"
#import "ShoplistViewController.h"

@interface ResultadoViewController ()

@end

@implementation ResultadoViewController
@synthesize resultadoIntCriancas, resultadoIntHomens, resultadoIntMulheres, resultadoAbacaxiassado, resultadoAcompanhamento, resultadoBebidas, resultadoCebolaassada, resultadoFrango, resultadoGado, resultadoLinguica, resultadoPaodealho, resultadoPorco, resultadoQueijo, resultadoLabelAbacaxiassado, resultadoLabelAgua, resultadoLabelAlcatra, resultadoLabelArroz, resultadoLabelAsa, resultadoLabelCebola, resultadoLabelCerveja, resultadoLabelContrafile, resultadoLabelCoracao, resultadoLabelCoxa, resultadoLabelFarofa, resultadoLabelFome, resultadoLabelLinguica, resultadoLabelLombinho, resultadoLabelMaminha, resultadoLabelPaodealho, resultadoLabelPicanha, resultadoLabelQueijo, resultadoLabelRefri, resultadoLabelSalada, resultadoLabelSaladamaionese, resultadoLabelSuco, resultadoLabelVinagrete, resultadoLabelVodka, picanhaBOOL, alcatraBOOL, lombinhoBOOL, contrafileBOOL, maminhaBOOL, linguicaBOOL, coracaoBOOL, queijoBOOL, asaBOOL, coxaBOOL, paodealhoBOOL, arrozBOOL, farofaBOOL, vinagreteBOOL, saladaBOOL, maionesesaladaBOOL, abacaxiassadoBOOL, cebolaBOOL, cervejaBOOL, refriBOOL, aguaBOOL, sucoBOOL, vodkaBOOL, gadoTotal, something, frangoTotal, acompanhamentoTotal, bebidaTotal, resultadoAlcool, areThereBebidas, alcoolTotal;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void)viewDidAppear:(BOOL)animated{

    [scroller setScrollEnabled:YES];
    [scroller setContentSize:CGSizeMake(320, 1035)];

    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    backButton.frame     = CGRectMake(20, 986, 108, 30);
    [backButton setTitle:@"Voltar" forState:UIControlStateNormal];
    [backButton addTarget:self action:@selector(buttonBack:) forControlEvents:UIControlEventTouchUpInside];
    [scroller addSubview:backButton];

    UIButton *nextButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    nextButton.frame     = CGRectMake(192, 986, 108, 30);
    [nextButton setTitle:@"Continuar..." forState:UIControlStateNormal];
    [nextButton addTarget:self action:@selector(buttonNext:) forControlEvents:UIControlEventTouchUpInside];
    [scroller addSubview:nextButton];

}

- (void)viewDidLoad
{

    gadoTotal = 0;

    something = 0;

    resultadoGado = resultadoIntHomens * 0.400 + resultadoIntMulheres * 0.355 + resultadoIntCriancas * 0.200;

    resultadoLinguica = resultadoIntHomens * 0.070 + resultadoIntMulheres * 0.050 + resultadoIntCriancas * 0.030;

    resultadoPorco = resultadoIntHomens * 0.060 + resultadoIntMulheres * 0.035 + resultadoIntCriancas * 0.030;

    resultadoFrango = resultadoIntHomens *  0.085 + resultadoIntMulheres * 0.055 + resultadoIntCriancas * 0.042;

    resultadoQueijo = resultadoIntHomens *  0.050 + resultadoIntMulheres * 0.040 + resultadoIntCriancas * 0.020;

    resultadoAcompanhamento = resultadoIntHomens *  0.225 + resultadoIntMulheres * 0.190 + resultadoIntCriancas * 0.100;

    resultadoAbacaxiassado = resultadoIntHomens *  0.040 + resultadoIntMulheres * 0.025 + resultadoIntCriancas * 0.020;

    resultadoCebolaassada = resultadoIntHomens *  0.050 + resultadoIntMulheres * 0.035 + resultadoIntCriancas * 0.020;

    resultadoPaodealho = resultadoIntHomens *  0.070 + resultadoIntMulheres * 0.045 + resultadoIntCriancas * 0.030;

    resultadoAlcool = resultadoIntHomens *  0.600 + resultadoIntMulheres * 0.350 + resultadoIntCriancas * 0.000;

    resultadoBebidas = resultadoIntHomens *  0.500 + resultadoIntMulheres * 0.650 + resultadoIntCriancas * 0.700;

    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)buttonBack:(id)sender{

    [self performSegueWithIdentifier:@"backtoCalcSegue" sender:self];

}

-(IBAction)buttonNext:(id)sender{

    if (gadoTotal > 0){
        [self performSegueWithIdentifier:@"shoplistSegue" sender:self];
}else { resultadoLabelFome.text = @"Assim as pessoas vão morrer de fome!";}

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"shoplistSegue"]) {

        ShoplistViewController *resultados = [segue destinationViewController];

        resultados.shoplistPicanha = [resultadoLabelPicanha.text floatValue];
        resultados.shoplistAlcatra = [resultadoLabelAlcatra.text floatValue];
        resultados.shoplistMaminha = [resultadoLabelMaminha.text floatValue];
        resultados.shoplistContrafile = [resultadoLabelContrafile.text floatValue];
        resultados.shoplistLombinho = [resultadoLabelLombinho.text floatValue];
        resultados.shoplistLinguica = [resultadoLabelLinguica.text floatValue];
        resultados.shoplistAsa = [resultadoLabelAsa.text floatValue];
        resultados.shoplistCoxa = [resultadoLabelCoxa.text floatValue];
        resultados.shoplistCoracao = [resultadoLabelCoracao.text floatValue];
        resultados.shoplistQueijo = [resultadoLabelQueijo.text floatValue];
        resultados.shoplistPaodealho = [resultadoLabelPaodealho.text floatValue];
        resultados.shoplistArroz = [resultadoLabelArroz.text floatValue];
        resultados.shoplistFarofa = [resultadoLabelFarofa.text floatValue];
        resultados.shoplistVinagrete = [resultadoLabelVinagrete.text floatValue];
        resultados.shoplistMaionese = [resultadoLabelSaladamaionese.text floatValue];
        resultados.shoplistSalada = [resultadoLabelSalada.text floatValue];
        resultados.shoplistAbacaxi = [resultadoLabelAbacaxiassado.text floatValue];
        resultados.shoplistCebola = [resultadoLabelCebola.text floatValue];
        resultados.shoplistAgua = [resultadoLabelAgua.text floatValue];
        resultados.shoplistCerveja = [resultadoLabelCerveja.text floatValue];
        resultados.shoplistRefri = [resultadoLabelRefri.text floatValue];
        resultados.shoplistVodka = [resultadoLabelVodka.text floatValue];
        resultados.shoplistSuco = [resultadoLabelSuco.text floatValue];

    }
}

@end 
```

编辑：

在我删除目标视图并将其再次放在那里之前，它工作正常，因为它在界面生成器上有一个小问题。当我把它放在那里时，我又把控制类和它之前的所有东西放在了检查员身上......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:51:37.923

这就是问题：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"shoplistSegue"]) {

    ShoplistViewController *resultados = [segue destinationViewController];

    resultados.shoplistPicanha = [resultadoLabelPicanha.text floatValue]; 
```

要么`ShoplistViewController`没有实现`-setShoplistPicanha:`/没有`@property (readwrite) shopListPicanha` ，要么你`[segue destinationViewController]`没有返回你认为它所做的（即不是 ShoplistViewController）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:41:59.227

你试着打电话

```
 UITableViewController  setShoplistPicanha: 
```

显然它没有定义（有一个论点）

# c++ - 通过发布者和消费者线程之间的堆栈共享数据

> ID：14629174
> 
> 赞同：0
> 
> 时间：2013-01-31T15:23:11.577
> 
> 标签：c++, multithreading, concurrency

我有一个发布者线程和一个消费者线程。他们通过`std::stack<Data *>`. 发布者只需 push() 指针，消费者只需 pop() 指针，使用它并在其上调用 delete。既然只有一个线程一次发布一个指针，一个线程消费指针，那还需要同步栈吗？请记住，堆栈仅存储指针。Publisher 仅在 Data() 完全构造时推送指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:32:31.477

未能`const`在命名空间中的容器的非方法上同步`std`是未定义的行为。

也不在`push`a的底层容器上。所以两个线程都在写入.`pop``const``stack``stack`

一种思考方式是，至少两者都将不得不争夺 中元素的数量`stack`：一个试图增加它，另一个试图减少它。（还有其他问题，但应该让你相信两者都在写入 的状态`stack`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:26:38.290

该`std::stack<Data*>`实例需要同步访问，因为多个线程可以修改它（通过`pop()`和`push()`），但其中包含的元素不会，因为任何时候只有一个线程可以对元素进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:26:43.377

是的，需要同步对堆栈的访问，因为`std::stack`类不保证任何操作都是原子的，并且可能`push()`会`top()`交错`pop()`。

# c# - Rule or code in InfoPath 2010 close the browser window

> ID：14629175
> 
> 赞同：1
> 
> 时间：2013-01-31T15:23:17.277
> 
> 标签：c#, c++, .net, sharepoint, infopath

When you close a browser form, either via the Close ribbon button, or via the Close action in rules, when the source parameter isn't specified, the page "The Form has been closed appears".

In Infopath web based forms the rules have execution preference over code. Also in UAT or Prod server the Active X controls are blocked because of security features.

How can close this browser window with some rules or code.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:41:24.050

检查以下帖子，我认为这是您正在寻找的。

[http://johnliu.net/blog/2011/6/17/infopath-2010-close-the-browser-window.html](http://johnliu.net/blog/2011/6/17/infopath-2010-close-the-browser-window.html)

干杯!

# php - 如何将自定义查询转换为 CDbCriteria

> ID：14629179
> 
> 赞同：1
> 
> 时间：2013-01-31T15:23:24.970
> 
> 标签：php, mysql, sql, yii

我有以下查询：

```
select 
    `t`.`id` AS `id`,
    `rm`.`role_id` AS `role_id`,
    `t`.`id` AS `sequence`,
    `t`.`parent_id` AS `parent_id`,
    `t`.`label` AS `label`,
    `t`.`order` AS `order`,
    (case
        when isnull(`rm`.`id`) then 0
        else 1
    end) AS `description`,
    `tb`.`label` AS `parent_label`
from
    ((`tbl_menu` `t`
    left join `tbl_menu` `tb` ON ((`t`.`parent_id` = `tb`.`id`)))
    left join `tbl_role_menu` `rm` ON ((`rm`.`menu_id` = `t`.`id`))) and rm.role_id = $role_id
where
    isnull(`tb`.`label`) 
union select 
    `t`.`id` AS `id`,
    `rm`.`role_id` AS `role_id`,
    `t`.`parent_id` AS `parent_id`,
    `t`.`parent_id` AS `sequence`,
    `t`.`label` AS `label`,
    `t`.`order` AS `order`,
    (case
        when isnull(`rm`.`id`) then 0
        else 1
    end) AS `description`,
    `tb`.`label` AS `parent_label`
from
    ((`tbl_menu` `t`
    left join `tbl_menu` `tb` ON ((`t`.`parent_id` = `tb`.`id`)))
    left join `tbl_role_menu` `rm` ON ((`rm`.`menu_id` = `t`.`id`))) and rm.role_id = $role_id
where
    (`tb`.`label` is not null)
order by `sequence` , `parent_id` , `label` 
```

在这两个查询中，在第二个左连接上，我必须传递一个变量 $role_id。目前，我在视图上有此查询，但如果尝试传递条件条件，则结果查询为

```
select * form menu_links where role_id = $role_id 
```

作为 menu_links 视图的名称。这并没有给我想要的结果。我需要一种方法将此参数添加到此查询并将其转换为 CDbCriteria 以便将其传递给 CGridView。有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:33:22.930

考虑使用[CArrayDataProvider](http://www.yiiframework.com/doc/api/1.1/CArrayDataProvider/)。

CArrayDataProvider 充当简单关联数组的包装器，CGridView 不会知道其中的区别。您甚至可以应用分页、排序等。可以在文档中找到展示这些功能的示例：

```
$rawData=Yii::app()->db->createCommand('SELECT * FROM tbl_user')->queryAll();

$dataProvider=new CArrayDataProvider($rawData, array(
    'id'=>'user',
    'sort'=>array(
        'attributes'=>array(
             'id', 'username', 'email',
        ),
    ),
    'pagination'=>array(
        'pageSize'=>10,
    ),
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:02:39.630

我给你一个简单的例子，你会弄清楚如何将它应用到你的案例中

```
$sql= "select * form menu_links where role_id = :role_id";
$role_id='Something you will get from your could';
$command = Yii::app()->db->createCommand($sql);

// And finally the command you can replace the role id with varibale is
$command->bindParam(":role_id", $role_id, PDO::PARAM_STR);

$result = $command->queryAll(); 
```

我希望这是你问的。

# objective-c - ObjectAtIndex 数组中的 Objective C 错误

> ID：14629181
> 
> 赞同：0
> 
> 时间：2013-01-31T15:23:27.413
> 
> 标签：objective-c

我的目标 C 代码有问题，我收到这些错误。

```
 2013-01-31 16:22:53.611 iSA-MP[541:c07] -[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 0x7465d70
2013-01-31 16:22:53.614 iSA-MP[541:c07] *** Terminating app due to uncaught exception               'NSInvalidArgumentException', reason: '-[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 0x7465d70'
*** First throw call stack:
(0x1c8c012 0x10c9e7e 0x1d174bd 0x1c7bbbc 0x1c7b94e 0x2163 0xf2817 0xf2882 0x41a25 0x41dbf             0x41f55 0x4af67 0xefcc 0xffab 0x21315 0x2224b 0x13cf8 0x1be7df9 0x1be7ad0 0x1c01bf5 0x1c01962 0x1c32bb6 0x1c31f44 0x1c31e1b 0xf7da 0x1165c 0x1dbd 0x1ce5) 
libc++abi.dylib: terminate called throwing an exception 
```

使用此代码：

```
 NSString *urlString = [NSString stringWithFormat:@"http://192.168.0.125:100/isa-mp/iSA-MP.php?serverIP=192.168.0.125&serverPort=7777"];
NSURL *url = [NSURL URLWithString:urlString];
NSData *data = [NSData dataWithContentsOfURL:url];
NSError *error;
NSMutableArray *array = (NSMutableArray*)[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

NSLog(@"%@", [array objectAtIndex:0]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:27:19.243

您将返回一个字典，如果您不知道收到的数据的内容，则 NSLog`[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]`并检查您想要成为数组的项目的键。

你可能想做这样的事情：

```
NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
NSMutableArray *array = dict[@"someKeyForArray"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:27:15.437

问题是您在 NSDictionary 上调用 objectAtIndex:...

看起来问题出在您正在解析的 JSON 中，JSON 将被格式化，以便解析它返回一个 NSDictionary。即使您正在投射到一个数组，它仍然是一个在幕后的字典。

# android - 如何将 Zxing View Finder Rectangle 设置为纵向模式

> ID：14629184
> 
> 赞同：2
> 
> 时间：2013-01-31T15:23:38.480
> 
> 标签：android, zxing

我使用的是zxing 2.1版本，我需要在竖屏模式下捕获二维码，我在CameraConfigurationManager中将displayOrientation设置为“90”​​。

修改方法，

```
CameraConfigurationManager->initFromCameraParameters(Camera camera)
                           -> setDesiredCameraParameters(Camera camera, boolean safeMode) 
```

但是在设置取景器以匹配纵向模式时出现问题，有人可以帮助我如何做到这一点..

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:40:21.937

不是那么简单，因为方向也必须设置正确，UI 方向必须设置，并且 UI 必须重写以具有横向版本。您还必须检测相机的方向，并考虑它可能在正面还是背面的事实。大约需要做 5 件事，而不是改变一行。试一试，然后就您在另一个 SO 问题中尝试过的内容提出具体问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:11:36.100

我发现以下 github 项目很有用， [https://github.com/pplante/zxing-android](https://github.com/pplante/zxing-android)

它使用 zxing 1.7 源作为基础。

在此链接中也有有用的信息 [http://code.google.com/p/zxing/issues/detail?id=178](http://code.google.com/p/zxing/issues/detail?id=178)

# linux - zip 文件的输出存档注释

> ID：14629186
> 
> 赞同：5
> 
> 时间：2013-01-31T15:23:40.927
> 
> 标签：linux, shell, command-line, zip

如何输出 zip 文件的评论存档？基本上我想将 zip 存档注释复制到剪贴板。

```
zip -z file 
```

提示我输入新的评论，我怎么能只输出它，没有提示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T15:38:04.353

你需要使用`unzip`而不是`zip`这样做。

```
unzip -z file 
```

将输出保存在 zip 文件中的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-03T15:19:28.137

在 android 中，busybox unzip 没有 -z 选项（假设甚至安装了busybox）。

`ZIP="/path/to/archive.zip"; X=$(echo . | zip -z "$ZIP" | head -2 | tail -1); echo $X | zip -z "$ZIP" >/dev/null; echo $X`

# html - 跨浏览器中心

> ID：14629190
> 
> 赞同：0
> 
> 时间：2013-01-31T15:23:53.037
> 
> 标签：html, css

我有一个元素，它是 div id 中的图像。我打算使这个页面成为一个正在建设的页面。我使用“margin：auto”css 命令制作了 div。我可以让 div 自动居中到该站点访问的任何浏览器的垂直方向是什么？

新手不知道如何做整个 JSFiddle 事情哈哈

这里也有一个网址：[http ://nerissagrigsby.com/?page_id=5](http://nerissagrigsby.com/?page_id=5)

我的 CSS：

```
#openpagesig {
width: 803px;
height: 283px;
margin: auto;
} 
```

我的 HTML：

```
<body>
<div id="openpagesig">
    <img src="img/LoginSignature.png" width="803" height="283" alt="Login Signature"
    />
</div>
<!-- Open Page Signature -->
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:28:11.873

您是否尝试过以下 CSS：

```
.inTheMiddle { /* or "#myImageId" (or just "img" if it's the only one) */
    position: absolute; /* or "fixed" */

    /* The element you want to place in the middle of the page
       center should have explicitly defined dimensions: */
    width: 100px;
    height: 100px;

    top: 50%;
    margin-top: -50px; /* offset back at exactly half height of the element */
    left: 50%;
    margin-left: -50px; /* offset back at exactly half width of the element */
} 
```

这是[一个工作示例](http://jsbin.com/usuren/1/edit)。

我需要提一下吗，**即使在 Internet Explorer 5.5 中也可以使用！**...但我怀疑这个浏览器是否仍然与任何人相关。

请参考下图了解负边距如何帮助：

![负边距如何抵消元素](../Images/07ffc278fc97ff0ac57f0590c7ecc623.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:27:56.027

尝试类似：

```
.centeredDiv {
    width:17em;
    height:9em;
    position:absolute;
    left:50%;
    top:50%;
    margin:-135px 0 0 -155px;
    padding:1em;
    background-color:#fffff7;
    opacity:0.67;
    filter:alpha(opacity=67); /* for IE8 and earlier */
    border:2px solid #191919;
} 
```

显然编辑测量和颜色以适应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:13:35.717

您遇到的问题与`div`页面上的垂直对齐元素有关。这是 HTML 和 CSS 编码中的常见问题。

一种解决方案是在外部`div`标签中包含一个容器元素。外部`div`应设置为100 %`display: table;`和100% 。使用属性设置内部。`position: fixed;``width``height``div``display: table-cell;``vertical-align: middle;`

此外，外部`div`应该具有`text-align: center;`以使其子元素居中。

这是您需要的代码：

```
.outer { 
  display: table;
  height: 100%;
  width: 100%;
  text-align: center;
  position: fixed;
}
.container {
  display: table-cell;
  vertical-align: middle;
} 
```

来自 jsbin 的示例：http: [//jsbin.com/otolot/1/](http://jsbin.com/otolot/1/)

尝试调整窗口大小以查看是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T16:00:30.293

我个人使用这样的东西：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  </head>
  <body>

    <div class="container">
        <div class="container-content">
            <div class="content">
              <img src="//placehold.it/803x283" />
            </div>
        </div>
    </div>
  </body>
</html>

<style>

  html, body {
    height: 100%;
  }

  .container {
    display: table;
    width: 100%;
    height: 100%;
    margin: auto;
  }

  .container-content {
    display: table-cell;
    width: 100%;
    vertical-align: middle;
  }

  .container-content > .content {
    max-width: 803px;
    width: 90%;
    margin-left: auto;
    margin-right: auto;
  }

</style> 
```

这个解决方案效果很好，因为它不仅将内容垂直居中，而且如果浏览器窗口高度太小而无法全部显示，您仍然可以滚动查看所有内容，这是使用其他内容的主要缺点之一方法。

例子：

[http://jsbin.com/owayec/2/](http://jsbin.com/owayec/2/)

# opengl - 更改片段着色器内部的变量

> ID：14629191
> 
> 赞同：2
> 
> 时间：2013-01-31T15:23:54.193
> 
> 标签：opengl, shader

是否禁止在片段着色器中更改不变量的值？当我尝试将新值设置为 "doseValue" 时，以下代码会崩溃：

```
const GLchar *point_fragment_shader =
"#version 420\n"
""
"/* Per Fragment Input Attributes */"
"in float doseValue;"
"in float alphaValue;"
"in vec2  displayUncertaintyByChangedColor;"
""
"/* Uniform Attributes */"
"uniform float minDisplayDoseValue;"
"uniform int   pointVisualizationMode;"
""
"/* Per Fragment Output Values */"
"out vec4 out_color;"
""
"void main()"
"{"
"   "
"   /* Discard all Points whose dose value is below the minimum */"
"   if(doseValue < minDisplayDoseValue)"
"   {"
"       discard;"
"   }"
"   else"
"   {"
"       if(displayUncertaintyByChangedColor.x == 1.0)"
"       {"
"           doseValue = 500.0;"
"       }"
" ..." 
```

在 vec2 内部，第一个分量是 0.0 或 1.0，第二个分量是一些浮点数。如果我设置一个新变量并在第二个 if 语句中使用任意值对其进行初始化，则不会出现错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:30:59.183

[GLSL 4.20 规范，第 38 页，第 4.3.4 节：输入变量](http://www.opengl.org/registry/doc/GLSLangSpec.4.20.11.clean.pdf)：

> 着色器输入变量**使用**. 它们形成了 OpenGL 流水线的先前阶段和声明着色器之间的输入接口。输入变量必须在全局范围内声明。在着色器执行开始时，来自前一个管道阶段的值被复制到输入变量中。**在着色器执行期间不能写入声明为输入的变量。**

# navigation - 页面滚动上的粘性导航

> ID：14629195
> 
> 赞同：0
> 
> 时间：2013-01-31T15:24:01.323
> 
> 标签：navigation, sticky

我一直在尝试实现粘性导航..类似于 mashable.com 的东西我在这方面取得了一定的成功，因为我的粘性导航突然变得不可见，然后当它到达顶部时重新出现。

你可以在这里看到它[http://tm.qlogixsolutions.com](http://tm.qlogixsolutions.com)

我的 js 看起来像这样：

```
var $document = $(document),
    $element = $('.column_title_container');

    $document.scroll(function() {
    if ($document.scrollTop() > 330)
    {
        jQuery('.fixed_column_title_container').css({'visibility': 'visible'});
    } else {
        jQuery('.fixed_column_title_container').css({'visibility': 'hidden'});
    }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:18:13.523

没关系，我通过将css可见性更改为位置来解决它

# emacs - 重新定义 AUCTeX 字体并编译键绑定

> ID：14629198
> 
> 赞同：3
> 
> 时间：2013-01-31T15:24:21.243
> 
> 标签：emacs, elisp, auctex

我想将字体绑定（例如 ）修改为`C-c C-f C-b`更快的内容，例如`C-b`. 为了获得所涉及的功能，我尝试使用`C-h k`，但我无法正确终止键序列：事实上，当我输入`C-c C-f`时，它会触发 TeX-font 命令的帮助页面。

其次，我想覆盖`C-c C-c`. 我不明白如何在一般情况下使用 OVERRIDE-CONFIRM 参数，特别是如何在不确认的情况下将所有内容关联到一个新的绑定，比如 F1。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T21:51:31.013

auctex 字体键绑定特别难以分类，因为您使用的命令使用带有“c”代码字母的[交互功能。](http://www.gnu.org/software/emacs/manual/html_node/elisp/Using-Interactive.html)因此，`C-c C-f`调用函数`TeX-font`，您键入的下一个字母将作为参数收集到传递给该函数。So`C-c C-f`绑定到一个函数，但作用类似于前缀。有关完整说明，请参阅链接的手册页。

这意味着通常作为评论提供的建议不足以得到你想要的。您需要调用的关键代码是`TeX-font`. 获得正确的参数需要深入研究源代码。我在我的 .emacs 中使用以下函数：

```
(defun TeX-typewriter()
  (interactive)
  (TeX-font nil ?\C-t))

(defun TeX-bold()
  (interactive)
  (TeX-font nil ?\C-b))

(defun TeX-emphasis()
  (interactive)
  (TeX-font nil ?\C-e))

(defun TeX-smallcaps()
  (interactive)
  (TeX-font nil ?\C-c)) 
```

定义了这些函数后，我在 LaTeX-mode-hook 中应用键绑定：

```
(defun my-LaTeX-hook ()
  (local-set-key "\C-ci" 'TeX-italics)
  (local-set-key "\C-cb" 'TeX-bold)
  (local-set-key "\C-ct" 'TeX-typewriter)
  (local-set-key "\C-ce" 'TeX-emphasis)
  (local-set-key "\C-cs" 'TeX-smallcaps))

(add-hook 'LaTeX-mode-hook 'my-LaTeX-hook) 
```

这将 TeX-bold 绑定到`C-c b`，但您可以在此处使用您喜欢的任何内容（例如`C-b`您要求的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:04:12.817

凭借我的“权力”，我无法修复 Tyler 代码中的一个小错误。在这里，我部分重写了它，并且我也为问题的第二部分提供了解决方案。

## 重新定义 AUCTeX 字体键绑定

假设我们要设置这些字体绑定（但您可以随意修改它们）：

```
斜体“\C-ci”
粗体“\C-cb”
打字机“\C-ct”
强调“\C-ce”
小型大写字母“\C-cs”
```

将这些行添加到您的`init.el`. 或 Emacs 初始化文件的任何名称中：

```
(defun TeX-italic()
  (interactive)
  (TeX-font nil ?\C-i))

(defun TeX-bold()
  (interactive)
  (TeX-font nil ?\C-b))

(defun TeX-typewriter()
  (interactive)
  (TeX-font nil ?\C-t))

(defun TeX-emphasis()
  (interactive)
  (TeX-font nil ?\C-e))

(defun TeX-smallcaps()
  (interactive)
  (TeX-font nil ?\C-c))

(defun latex-font-hook ()
  (local-set-key "\C-ci" 'TeX-italic)
  (local-set-key "\C-cb" 'TeX-bold)
  (local-set-key "\C-ct" 'TeX-typewriter)
  (local-set-key "\C-ce" 'TeX-emphasis)
  (local-set-key "\C-cs" 'TeX-smallcaps))

(add-hook 'LaTeX-mode-hook 'latex-font-hook) 
```

如果您对此处使用的键不满意，请随意更改第一个参数`local-set-key`，例如设置`(local-set-key "\C-b" 'TeX-bold)`为绑定到 Control-b。

## 重新定义 AUCTeX 编译键绑定

要修改`C-c C-c`键绑定并可能改善绑定的编译功能（`TeX-command-master`），请参阅我的帖子[Build & view](https://stackoverflow.com/a/14717941/1851270)。

# user-interface - N2CMS：如何添加弹出内容

> ID：14629199
> 
> 赞同：0
> 
> 时间：2013-01-31T15:24:23.087
> 
> 标签：user-interface, popup, editor, modal-dialog, n2cms

我有一个想要使用 N2CMS 创建的新闻类网站，但除了常规操作（能够查看日历、查看新闻列表、查看新闻详情等）外，网站中的部分内容也会显示出来在页面内的“模态”弹出窗口（类似于 AjaxToolkit 中的 ModalPopupExtender）中（例如，如果您单击登录，则会出现一个带有登录控件的弹出面板）。

我的问题是：有没有办法为链接添加处理程序，并在单击链接时显示“模态”弹出窗口？如果是这样，这可以从模板 GUI 编辑器中完成（以及如何）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T05:32:48.500

N2CMS 没有任何内置处理程序来为链接创建模式弹出窗口。但是，N2CMS 确实附带了 Jquery JavaScript 库。我的建议是在您的站点模板中使用 JavaScript 来选择和格式化带有模式对话框的所需链接——但这不能从 GUI 编辑器中完成，您需要直接在模板代码中完成。

# sql - Excel：关键字“SELECT”附近的语法不正确

> ID：14629200
> 
> 赞同：1
> 
> 时间：2013-01-31T15:24:23.267
> 
> 标签：sql, excel, ms-query

场景：我正在 Excel 中构建一个报告来计算佣金。这是基于上个月的发票。我创建了以下`tsql`查询并使用`MSQuery`. 我测试了查询，它运行良好，直到我将**Where**语句更改为使用参数`"?"`，所以我可以，然后我收到以下错误：

```
Incorrect Syntax near the keyword `'SELECT'` 
```

这是查询：

```
SELECT v_rpt_Invoices.Invoice_Number, v_rpt_Invoices.Territory, v_rpt_Company.Account_Nbr, v_rpt_Invoices.Company_Name, v_rpt_Invoices.Date_Invoice, 
                      v_rpt_Invoices.Location, v_rpt_Invoices.TicketNbr, v_rpt_Invoices.Project_ID, v_rpt_Invoices.Invoice_Type, v_rpt_Invoices.Status_Description, 
                      CASE WHEN TicketNbr <> 0 THEN 'Service Ticket' WHEN Project_ID IS NOT NULL THEN 'Project' ELSE 'Other' END AS Invoice_For, 
                      CASE WHEN ticketNbr <> 0 THEN
                          (SELECT     v_rpt_Service.Board_Name
                            FROM          v_rpt_Service
                            WHERE      v_rpt_Invoices.TicketNbr = v_rpt_Service.TicketNbr) WHEN Project_ID IS NOT NULL THEN Project_ID ELSE 'Other' END AS Service_Board_Project, 
                      CASE WHEN TicketNbr <> 0 THEN
                          (SELECT     Bill_Method
                            FROM          SR_Service
                            WHERE      v_rpt_Invoices.TicketNbr = SR_Service.SR_Service_RecID) WHEN project_id IS NOT NULL THEN
                          (SELECT     PM_Billing_Method_ID
                            FROM          PM_Project
                            WHERE      v_rpt_Invoices.PM_Project_RecID = PM_Project.PM_Project_RecID) ELSE 'NONE' END AS BillingMethod, v_rpt_Invoices.Invoice_Amount, 
                      CASE WHEN (TicketNbr <> 0 AND
                          (SELECT     Bill_Method
                            FROM          SR_Service
                            WHERE      v_rpt_Invoices.TicketNbr = SR_Service.SR_Service_RecID) = 'A') THEN Invoice_Amount * 0.7 WHEN (TicketNbr <> 0 AND
                          (SELECT     Bill_Method
                            FROM          SR_Service
                            WHERE      v_rpt_Invoices.TicketNbr = SR_Service.SR_Service_RecID) = 'F') THEN 0.01 WHEN (project_id IS NOT NULL AND
                          (SELECT     PM_Billing_Method_ID
                            FROM          PM_Project
                            WHERE      v_rpt_Invoices.PM_Project_RecID = PM_Project.PM_Project_RecID) = 'A') THEN Invoice_Amount * 0.7 WHEN (project_id IS NOT NULL AND
                          (SELECT     PM_Billing_Method_ID
                            FROM          PM_Project
                            WHERE      v_rpt_Invoices.PM_Project_RecID = PM_Project.PM_Project_RecID) = 'F') THEN 0.01 ELSE 0.00 END AS Cost
FROM         v_rpt_Invoices INNER JOIN
                      v_rpt_Company ON v_rpt_Invoices.Company_RecID = v_rpt_Company.Company_RecID
**WHERE     (v_rpt_Invoices.Date_Invoice >= ?)**
order by Territory, Invoice_For 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:28:25.470

删除此行

```
 **WHERE     (v_rpt_Invoices.Date_Invoice >= ?)** 
```

这不是有效的 SQL —— 看起来你想评论使用双破折号。

除非你只是把`**`显示你改变了什么。在这种情况下，您需要有一个`?`SQL 不起作用的值。

* * *

顺便说一句，这个查询可以变得更加清晰和快速。考虑将子查询合并到一个联接中。例如下面的子查询

```
SELECT     Bill_Method
FROM          SR_Service
WHERE      v_rpt_Invoices.TicketNbr = SR_Service.SR_Service_RecID 
```

必须为每一行调用——如果你把它变成一个连接，你会从 O(nm) 到 O(n+m) 其中 n 是 v_rpt_Invoices 的大小，m 是 SR_Service 的大小。

这只是您可以优化的潜在子查询之一。

这是将子查询滚动到您的示例的示例（我无法测试，因此可能有错误/错别字）

```
SELECT 
  v_rpt_Invoices.Invoice_Number,
       v_rpt_Invoices.Territory,
       v_rpt_Company.Account_Nbr,
       v_rpt_Invoices.Company_Name,
       v_rpt_Invoices.Date_Invoice, 
       v_rpt_Invoices.Location,
       v_rpt_Invoices.TicketNbr,
       v_rpt_Invoices.Project_ID,
       v_rpt_Invoices.Invoice_Type,
       v_rpt_Invoices.Status_Description, 
      CASE WHEN TicketNbr <> 0 THEN 'Service Ticket' 
           WHEN Project_ID IS NOT NULL THEN 'Project' 
           ELSE 'Other' 
      END AS Invoice_For, 
      CASE WHEN ticketNbr <> 0 THEN v_rpt_Service.Board_Name
           WHEN Project_ID IS NOT NULL THEN Project_ID 
           ELSE 'Other' 
      END AS Service_Board_Project, 
      CASE WHEN TicketNbr <> 0 THEN SR_Service.Bill_Method
           WHEN project_id IS NOT NULL THEN PM_Project.PM_Billing_Method_ID
           ELSE 'NONE' 
      END AS BillingMethod, v_rpt_Invoices.Invoice_Amount, 
      CASE WHEN (TicketNbr <> 0 AND SR_Service.Bill_Method ='A') THEN Invoice_Amount * 0.7 
           WHEN (TicketNbr <> 0 AND SR_Service.Bill_Method ='F') THEN 0.01 
           WHEN (project_id IS NOT NULL AND PM_Project.PM_Billing_Method_ID = 'A') THEN Invoice_Amount * 0.7 
           WHEN (project_id IS NOT NULL AND PM_Project.PM_Billing_Method_ID = 'F') THEN 0.01 
           ELSE 0.00 
      END AS Cost
FROM v_rpt_Invoices 
INNER JOIN v_rpt_Company ON v_rpt_Invoices.Company_RecID = v_rpt_Company.Company_RecID
LEFT JOIN   SR_Service ON v_rpt_Invoices.TicketNbr = SR_Service.SR_Service_RecID
LEFT JOIN   PM_Project ON v_rpt_Invoices.PM_Project_RecID = PM_Project.PM_Project_RecID
LEFT JOIN  v_rpt_Service ON  v_rpt_Invoices.TicketNbr = v_rpt_Service.TicketNbr
WHERE     (v_rpt_Invoices.Date_Invoice >= '1/1/2013')
order by Territory, Invoice_For 
```

# url-rewriting - Restlet“斜线”行为

> ID：14629203
> 
> 赞同：0
> 
> 时间：2013-01-31T15:24:42.207
> 
> 标签：url-rewriting, restlet, restlet-2.0

我有一个不错的 restlet 应用程序，其组件附加以下内容：

```
 cmp.getDefaultHost().attach("/mycmd",ProcessReq.class); 
```

当请求 URL 为 http://<my-host>/mycmd/ 时，ProcessReq 类返回一个 index.html，其中包含指向其他页面的链接。这些页面与 index.html 位于同一目录中，并在我的 index.html 中作为相对页面引用，如下例所示：

```
<a href="otherpage.html">Other Page</a> 
```

但是，我发现用户倾向于使用不带尾随“/”的 URL，例如： http://<my-host>/mycmd 。不幸的是，当他们这样做时，所有指向相关页面的链接都会搞砸。

当您使用 http://<my-host>/mycmd/ 显示 index.html，然后单击“其他页面”链接时，浏览器（正确）转到 http://<my-host>/mycmd/其他主机.html。不幸的是，当您执行 http://<my-host>/mycmd（没有尾部斜杠）时，指向其他页面的链接会将浏览器发送到 http://<my-host>/otherpage.html，这当然会返回404 错误。

我在 Internet 上进行了搜索，发现 Restlet 库被*设计*为在我默认执行的各种 URL 之后需要一个斜杠。但是，要求这样做会使我的用户发疯。

是否有某种方法可以配置或操作请求（或响应），以便我可以发送此类 URL 请求而无需尾部斜杠，并使返回页面中的相对链接指向正确的位置？

有人请指教...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:47:34.717

我推荐的解决方案是，如果用户忘记键入，则使用斜杠自动将客户端浏览器重定向到 URI。因此，您的相对 URI 将保持简单。

否则，您需要将目录名称再次添加到每个相对 URI，例如“mycmd/otherhost.html”

# xml - 使用 JBoss 5.1.0GA 中的 WSS 拦截器调用 CXF 客户端时出现 WRONG_DOCUMENT_ERR

> ID：14629204
> 
> 赞同：2
> 
> 时间：2013-01-31T15:24:50.623
> 
> 标签：xml, jboss, cxf, wss

我有带有 WSS 拦截器的 CXF Web 服务客户端，可以从控制台运行，但是当从 JBoss 运行时会抛出这样的异常：

发生意外的异常

```
Unexpected exception occured 
javax.xml.ws.soap.SOAPFaultException: WRONG_DOCUMENT_ERR: A node is
used in a different document
than the one that created
it.    
at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:156)   
at $Proxy1020.getAccountStatements(Unknown Source)  
at com.sru.statement.impl.cs.CSStatementGetter.getStatementFromBank(CSStatementGetter.java:164)   
at com.sru.statement.impl.cs.CSStatementGetter.getStatement(CSStatementGetter.java:90)   
at com.sru.hub.common.statement.CommonStatementImportExecutor.execute(CommonStatementImportExecutor.java:89)   
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)   
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)   
at java.lang.reflect.Method.invoke(Method.java:597)   
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)   
(...)
at org.jboss.util.threadpool.BasicTaskWrapper.run(BasicTaskWrapper.java:260)   
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)   
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)   
at java.lang.Thread.run(Thread.java:662)   
Caused by: org.w3c.dom.DOMException: WRONG_DOCUMENT_ERR: A
node is used in a
different document than the one
that created it.  
at org.apache.xerces.dom.ParentNode.internalInsertBefore(Unknown Source)  
at org.apache.xerces.dom.ParentNode.insertBefore(Unknown Source)  
at org.apache.xerces.dom.CoreDocumentImpl.insertBefore(Unknown Source)  
at org.apache.xerces.dom.NodeImpl.appendChild(Unknown Source)  
at org.jboss.ws.core.soap.SOAPDocument.appendChild(SOAPDocument.java:222)   
at org.jboss.ws.core.soap.SOAPPartImpl.appendChild(SOAPPartImpl.java:297)   
at org.apache.cxf.staxutils.W3CDOMStreamWriter.setChild(W3CDOMStreamWriter.java:119)   
at org.apache.cxf.staxutils.W3CDOMStreamWriter.newChild(W3CDOMStreamWriter.java:109)   
at org.apache.cxf.staxutils.W3CDOMStreamWriter.writeStartElement(W3CDOMStreamWriter.java:137)   
at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor.writeSoapEnvelopeStart(SoapOutInterceptor.java:122)   
at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor.handleMessage(SoapOutInterceptor.java:81)   
at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor.handleMessage(SoapOutInterceptor.java:61)   
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)   
at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:531)   
at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:462)   
at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:365)   
at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:318)   
at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:95)   
at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134)   
... 80 more 
```

它适用于这些库：

```
/org/apache/cxf/cxf-rt-frontend-jaxws/2.4.2/cxf-rt-frontend-jaxws-2.4.2.jar
/org/apache/cxf/cxf-api/2.4.2/cxf-api-2.4.2.jar
/org/apache/cxf/cxf-common-utilities/2.4.2/cxf-common-utilities-2.4.2.jar
/org/apache/cxf/cxf-rt-core/2.4.2/cxf-rt-core-2.4.2.jar
/org/apache/cxf/cxf-rt-frontend-simple/2.4.2/cxf-rt-frontend-simple-2.4.2.jar
/wsdl4j/wsdl4j/1.6.2/wsdl4j-1.6.2.jar
/org/apache/ws/xmlschema/xmlschema-core/2.0/xmlschema-core-2.0.jar
/org/apache/cxf/cxf-rt-bindings-soap/2.4.2/cxf-rt-bindings-soap-2.4.2.jar
/org/apache/cxf/cxf-tools-common/2.4.2/cxf-tools-common-2.4.2.jar
/org/apache/cxf/cxf-rt-databinding-jaxb/2.4.2/cxf-rt-databinding-jaxb-2.4.2.jar
/org/apache/cxf/cxf-rt-ws-addr/2.4.2/cxf-rt-ws-addr-2.4.2.jar
/org/apache/neethi/neethi/3.0.1/neethi-3.0.1.jar
/org/apache/cxf/cxf-rt-ws-security/2.4.2/cxf-rt-ws-security-2.4.2.jar
/org/apache/ws/security/wss4j/1.6.2/wss4j-1.6.2.jar
/commons-logging/commons-logging-api/1.1/commons-logging-api-1.1.jar
/org/apache/cxf/cxf-rt-transports-http/2.4.2/cxf-rt-transports-http-2.4.2.jar
/org/apache/xmlsec/1.4.2/xmlsec-1.4.2.jar
/commons-io/commons-io/2.4/commons-io-2.4.jar 
```

如果在没有 WSS 拦截器的情况下调用客户端，则一切正常。

WSS拦截器代码：

```
Client client = ClientProxy.getClient(port);
Endpoint cxfEndpoint = client.getEndpoint();
Map<String, Object> outProps = new HashMap<String, Object>();
outProps.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);
outProps.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);
outProps.put(WSHandlerConstants.USER, "username_alex");
outProps.put(WSHandlerConstants.ADD_UT_ELEMENTS, WSConstants.NONCE_LN + " " +WSConstants.CREATED_LN);
outProps.put(WSHandlerConstants.PW_CALLBACK_REF, this);
WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(outProps);
cxfEndpoint.getOutInterceptors().add(wssOut); 
```

有什么想法吗？

更新：

一些额外的提示。我希望它会有所帮助：

1.  我试图在 Tomcat 上运行该应用程序。有用，
2.  因为这张票：[https](https://issues.apache.org/jira/browse/CXF-4612?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel) ://issues.apache.org/jira/browse/CXF-4612?page= com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel 我用另外两个版本的 CXF 测试了应用程序：2.5.7 和 2.5.8。它失败了。
3.  在我的 JBoss 的 /lib/endorsed 中，我有两个 SAAJ 实现：axis-saaj.jar 和 jboss-native-saaj.jar。我尝试将这些库结合起来，发现如果没有它们，应用程序在使用 WSS 处理 Web 服务时会分发（应用程序可以工作，但什么也没发生：浏览器和日志中都没有错误），
4.  我还尝试将axis-saaj 和jboss-native-saaj（分别）添加到应用程序的WAR 文件中。结果与第 3 点类似：应用手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-12T17:54:01.997

不确定这个问题是否仍然相关，但是当我在 JBoss 6.1.0 上遇到这个问题时遇到了这个问题。所以我想我会发布一个解决方案。

JBoss 为创建和处理 SOAP 消息期间涉及的许多工厂设置默认值。在这里特别造成问题的一个是`javax.xml.soap.MessageFactory`.

Apache CXF 有一个名为`SAAJOutInterceptor`. 这是硬编码在`org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor`.

我不确定，但我认为这里的想法是将 SOAP 消息从 CXF 特定对象更改为平台特定对象。这样做时，初始化的 MessageFactory 是`org.jboss.ws.core.soap.MessageFactoryImpl`. 这个类来自 jar `common/lib/jbossws-native-core.jar`。

一种蛮力解决方案是摆脱这个罐子。它没有在我们的应用程序中产生任何问题。但更体面的解决方案是通过在`META-INF/services/javax.xml.soap.MessageFactory`应用程序的类路径上以这种精确结构定义文件来覆盖 JBoss MessageFactory。

对于 WAR 文件，它必须放在 WEB-INF/classes 下。该文件只有一行，如下所示：

```
com.sun.xml.internal.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1Impl 
```

进行此更改后重新启动 JBoss 进程。希望这对每个人都有效。

# html - 造型最后

> ID：14629205
> 
> 赞同：2
> 
> 时间：2013-01-31T15:24:52.050
> 
> 标签：html, css, styles

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:26:39.247

对于 id，您需要像这样制作 css：

```
nav ul ul li a#last 
```

注意到区别了吗？#last 与 a 结合使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T15:27:32.833

由于#last 是独一无二的，因此您只需要：

```
#last {
   ...your css..
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:28:27.847

`a #last`意思是“ID 为`"last"`that 的元素是`<a>`标签的子元素。

你不需要那里的空间。 `a#last`表示“ `<a>`ID 为`"last"`.

实际上，由于 ID 应该是唯一的，因此您可以只使用`#last`，而不使用`a`（甚至之前的其余元素）。

# jquery - 如何使外部css文件仅适用于一个元素

> ID：14629206
> 
> 赞同：1
> 
> 时间：2013-01-31T15:24:53.127
> 
> 标签：jquery, css

我的网站有一个名为“site.css”的默认 css 文件。

我正在使用 jquery 的 datepicker，它有自己的名为“jquery.css”的 css 文件。

当我将它们都导入页面的标题时，我发现布局混乱了。

我想知道是否可以使 jquery.css 样式仅可用于页面中的日历字段。

实际上，不是 jquery.css 弄乱了我的布局。这是我的 site.css 弄乱了弹出日历的布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:33:33.753

1.  给你的日历字段一个 id（如果它还没有）。
2.  进入 JQuery CSS 文件并取出日期选择器的样式。
3.  将此样式粘贴到您自己的“site.css”文件中，但在日历字段的 id 下（因此，如果您的日历字段具有 id `calendar`，则使用：

    `#calendar { // JQuery style code you want copied here }`

我认为为一个字段加载整个 CSS 样式表没有什么意义，更不用说编写一些代码来缩小其影响了。不妨去掉你需要的东西并重新使用它，把你认为合适的地方归功于 John Resig。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:21:34.463

我将类名“site”添加到 site.css 中的容器“div”。

并将 class="site" 添加到我页面上的 div 中。现在一切看起来都很好。

谢谢你们。

# backbone.js - 使用带有 Backbone Marionette 的现有渲染 HTML 显示视图

> ID：14629207
> 
> 赞同：4
> 
> 时间：2013-01-31T15:25:00.823
> 
> 标签：backbone.js, marionette, backbone-views

我有一个像附加的那样的应用程序布局。上面的面板已经到了页面（即在服务器的 HTML 响应中）。当用户与该面板中的元素交互时，下面的动态面板的内容会相应地发生变化。

我研究过 Backbone Marionette 的各种视图类型和区域管理器。但我仍然想不出一种方法来实现这一点。我需要从已经渲染的元素中捕获事件并相应地更改动态内容。据我了解，每次为`show`特定的 Marionette 视图创建一个区域时，该区域的内容都会被该视图的`el`. 因此，我无法`Layout`看到整个事物的容器。

那么无论如何使用 Marionette 可以做到这一点吗？

![样本布局](../Images/4cf159bb36a7167d61b9e8fcac392eb8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:30:07.527

您当然可以支持我所说的“预渲染”或部分视图。事实上，这是我经常使用的 Marionette View，因为我正在使用一个包含服务器端部分视图的应用程序：

```
My.PartialView = Backbone.Marionette.Layout.extend({
   render: function () {
      //noop
      if (this.onRender) {
         this.onRender();
      }
      return this;
   },
   onShow: function () {
       // make sure events are ready
       this.delegateEvents();
   }
}); 
```

使用简单：

```
My.NavBar = My.PartialView.extend({
    events: {
        "change #search-input": "searchRequested",
        "click #faq-link": "faqRequested",
        "click #home-link": "homeRequested",
    },
    searchRequested: function (e) {
        // search
    },
    faqRequested: function (e) {
        // show the faq
    },
    homeRequested:function () {
        // go home
    }
});

var navbar = new main.views.NavBar({ el: ".my-nav" });
someRegion.show();
// or, just wire up the events manually
navbar.delegateEvents(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T15:14:47.300

我认为更好的方法是使用构造函数。制作您的渲染布局类。

```
App.RenderedLayout = Marionette.Layout.extend({
    render: function () {
        if (this.onRender) {
            this.onRender();
        }
        return this;
    },
    constructor: function(){
        this._ensureElement();
        this.bindUIElements();
        Marionette.Layout.prototype.constructor.apply(this, slice(arguments));
    }
}); 
```

然后你就可以使用完整的 Marionette 功能了。

```
App.module('Some.Page', function (Mod, App, Backbone, Marionette, $, _) {

    Mod.SomeLayout = App.RenderedLayout.extend({
        el: '#renderedDiv',
        events: {
            'click .something': 'onSomethingClick'
        },
        regions: {
            'innerRegion': '#innerRegion'
        },
        ui: {
            something: '.something div'
        },
        initialize: function () {

        },
        onSomethingClick: function(e){
            return false;
        }
    });

    Mod.addInitializer(function(){
        App.addRegions({renderedRegion: '#renderedDiv'});
        Mod.someLayout = new Mod.SomeLayout();
        App.renderedRegion.attachView(Mod.someLayout);
    });

}); 
```

# c# - 关于 ASP.NET 的表单身份验证和会话的滑动到期

> ID：14629212
> 
> 赞同：16
> 
> 时间：2013-01-31T15:25:16.087
> 
> 标签：c#, asp.net, session, webforms, asp.net-web-api

我们有一个使用本机表单身份验证和会话功能的 ASP.NET 4.5 WebForms 应用程序。两者都有 20 分钟的超时时间和滑动到期。

想象以下场景。用户在我们的应用程序中工作了一段时间，然后继续做一些其他事情，让我们的应用程序空闲 20 分钟。然后用户返回到我们的应用程序以编写报告。但是，当用户尝试保存时，他/她会被视为登录屏幕，并且报告会丢失。

显然，这是不希望的。我们希望在身份验证或会话到期时将浏览器重定向到登录页面，而不是这种情况。为了实现这一点，我们构建了一个 Web Api 服务，可以调用它来检查是否是这种情况。

```
public class SessionIsActiveController : ApiController
{
    /// <summary>
    /// Gets a value defining whether the session that belongs with the current HTTP request is still active or not.
    /// </summary>
    /// <returns>True if the session, that belongs with the current HTTP request, is still active; false, otherwise./returns>
    public bool GetSessionIsActive()
    {
        CookieHeaderValue cookies = Request.Headers.GetCookies().FirstOrDefault();
        if (cookies != null && cookies["authTicket"] != null && !string.IsNullOrEmpty(cookies["authTicket"].Value) && cookies["sessionId"] != null && !string.IsNullOrEmpty(cookies["sessionId"].Value))
        {
            var authenticationTicket = FormsAuthentication.Decrypt(cookies["authTicket"].Value);
            if (authenticationTicket.Expired) return false;
            using (var asdc = new ASPStateDataContext()) // LINQ2SQL connection to the database where our session objects are stored
            {
                var expirationDate = SessionManager.FetchSessionExpirationDate(cookies["sessionId"].Value + ApplicationIdInHex, asdc);
                if (expirationDate == null || DateTime.Now.ToUniversalTime() > expirationDate.Value) return false;
            }
            return true;
        }
        return false;
    }
} 
```

客户端每 10 秒调用一次此 Web Api 服务，以检查身份验证或会话是否已过期。如果是这样，脚本会将浏览器重定向到登录页面。这就像一个魅力。

但是，调用此服务会触发身份验证和会话的滑动到期。因此，本质上，创建永无止境的身份验证和会话。我在服务开始时设置了一个断点，以检查它是否是我们自己的函数之一触发它。但事实并非如此，它似乎发生在 ASP.NET 更深处的某个地方，在服务执行之前。

1.  有没有办法为特定请求禁用触发 ASP.NET 的身份验证和会话滑动到期？
2.  如果没有，解决这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T16:08:07.583

1.  这似乎是不可能的。一旦启用了滑动到期，它总是会被触发。如果有一种方法可以在不扩展会话的情况下访问它，那么我们一直无法找到它。

2.  那么如何应对这种情况呢？对于问题中最初提出的解决方案，我们提出了以下替代解决方案。这个实际上更有效，因为它不使用网络服务每隔 x 秒给家里打电话。

因此，我们希望有一种方法可以知道 ASP.NET 的表单身份验证或会话何时过期，以便我们可以主动注销用户。每个页面上的简单 javascript 计时器（由 Khalid Abuhakmeh[提出](https://stackoverflow.com/a/15665174/241211)）是不够的，因为用户可以同时在多个浏览器窗口/选项卡中使用应用程序。

为了使这个问题更简单，我们做出的第一个决定是使会话的过期时间比表单身份验证的过期时间长几分钟。这样，会话将永远不会在表单身份验证之前过期。如果下次用户尝试登录时有一个挥之不去的旧会话，我们会放弃它以强制一个新的会话。

好的，所以现在我们只需要考虑表单身份验证过期。

接下来，我们决定禁用表单身份验证的自动滑动到期（在 web.config 中设置）并创建我们自己的版本。

```
public static void RenewAuthenticationTicket(HttpContext currentContext)
{
    var authenticationTicketCookie = currentContext.Request.Cookies["AuthTicketNameHere"];
    var oldAuthTicket = FormsAuthentication.Decrypt(authenticationTicketCookie.Value);
    var newAuthTicket = oldAuthTicket;
    newAuthTicket = FormsAuthentication.RenewTicketIfOld(oldAuthTicket); //This triggers the regular sliding expiration functionality.
    if (newAuthTicket != oldAuthTicket)
    {
        //Add the renewed authentication ticket cookie to the response.
        authenticationTicketCookie.Value = FormsAuthentication.Encrypt(newAuthTicket);
        authenticationTicketCookie.Domain = FormsAuthentication.CookieDomain;
        authenticationTicketCookie.Path = FormsAuthentication.FormsCookiePath;
        authenticationTicketCookie.HttpOnly = true;
        authenticationTicketCookie.Secure = FormsAuthentication.RequireSSL;
        currentContext.Response.Cookies.Add(authenticationTicketCookie);
        //Here we have the opportunity to do some extra stuff.
        SetAuthenticationExpirationTicket(currentContext);
    }
} 
```

`OnPreRenderComplete`我们从应用程序的 BasePage 类中的事件调用此方法，所有其他页面都从该类继承。它与正常的滑动到期功能完全相同，但我们有机会做一些额外的事情；比如调用我们的`SetAuthenticationExpirationTicket`方法。

```
public static void SetAuthenticationExpirationTicket(HttpContext currentContext)
{
    //Take the current time, in UTC, and add the forms authentication timeout (plus one second for some elbow room ;-)
    var expirationDateTimeInUtc = DateTime.UtcNow.AddMinutes(FormsAuthentication.Timeout.TotalMinutes).AddSeconds(1);
    var authenticationExpirationTicketCookie = new HttpCookie("AuthenticationExpirationTicket");
    //The value of the cookie will be the expiration date formatted as milliseconds since 01.01.1970.
    authenticationExpirationTicketCookie.Value = expirationDateTimeInUtc.Subtract(new DateTime(1970, 1, 1)).TotalMilliseconds.ToString("F0");
    authenticationExpirationTicketCookie.HttpOnly = false; //This is important, otherwise we cannot retrieve this cookie in javascript.
    authenticationExpirationTicketCookie.Secure = FormsAuthentication.RequireSSL;
    currentContext.Response.Cookies.Add(authenticationExpirationTicketCookie);
} 
```

现在我们有一个额外的 cookie 可供我们使用，它始终代表正确的表单身份验证过期时间，即使用户在不同的浏览器窗口/选项卡中工作。毕竟，cookie 的范围很广。现在唯一剩下的就是一个 javascript 函数来验证 cookie 的值。

```
function CheckAuthenticationExpiration() {
    var c = $.cookie("AuthenticationExpirationTicket");
    if (c != null && c != "" && !isNaN(c)) {
        var now = new Date();
        var ms = parseInt(c, 10);
        var expiration = new Date().setTime(ms);
        if (now > expiration) location.reload(true);
    }
} 
```

（请注意，我们使用[jQuery Cookie 插件](https://github.com/carhartl/jquery-cookie "jQuery Cookie 插件")来检索 cookie。）

将此功能放在一个间隔中，用户将在他或她的表单身份验证过期的那一刻被注销。Voilà :-) 这个实现的一个额外好处是您现在可以控制表单身份验证的到期时间延长。如果您想要一堆不延长过期时间的 Web 服务，请不要`RenewAuthenticationTicket`为它们调用方法。

如果您有什么要补充的，请发表评论！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T11:18:40.153

您的网站功能应该可以在没有 JavaScript 的情况下运行，或者您只需将一个问题替换为另一个问题。我也解决了这个问题，这是如何解决的：

当您对自己进行身份验证时，会创建会话 cookie，默认生命周期为 20 分钟。当此到期时，用户将被注销。

![饼干图像](../Images/3232364e67be84266849daa443c333da.png)

**当用户在登录**表单中选择“记住我”时，会在客户端和数据库中创建额外的持久性 cookie [AuthCookie]。此 cookie 的有效期为 1 个月。每当加载页面时，会话和持久性 cookie 数据都会以新的生命周期重新创建（通常您想要解密/加密票证）。

> 想象以下场景。用户在我们的应用程序中工作了一段时间，然后继续做一些其他事情，让我们的应用程序空闲 20 分钟。然后用户返回到我们的应用程序以编写报告。当用户尝试保存时，他的会话会在请求之前恢复。

一种方法是扩展 global.aspx 以处理预请求。类似的东西：

```
 void application_PreRequestHandlerExecute(object sender, EventArgs e){
        ...
        if (HttpContext.Current.Handler is IRequiresSessionState) {
            if (!context.User.Identity.IsAuthenticated)
                AuthService.DefaultProvider.AuthenticateUserFromExternalSource(); 
```

AuthenticateUserFromExternalSource 应该检查 cookie 数据是否与数据库匹配，因为存储在客户端的任何内容都可以更改。如果您拥有具有访问权限的付费服务，那么您需要检查用户是否仍然拥有这些权限，然后您可以重新创建会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:15:23.940

这一切都可以在客户端解决，无需返回服务器。

在 JavaScript 中这样做。

```
 var timeout = setTimeout(function () {
      window.location = "/login";
 }, twentyMinutesInMilliseconds + 1); 
```

每次页面刷新时，超时将设置为 20 分钟。这确保了用户需要在超时发生之前完成所有工作。很多站点都使用这种方法，它可以让您免于执行不必要的服务器请求。

# ios - UITableView，在选择时替换单元格视图

> ID：14629213
> 
> 赞同：7
> 
> 时间：2013-01-31T15:25:26.900
> 
> 标签：ios, cocoa-touch, uitableview

是否可以替换所选单元格的单元格视图？我已将我的控制器注册为数据源和委托。对单元格视图、行号、选择状态等的请求都很好。在单元格选择回调中，我试图让表格视图使用新视图（不是实际数据！）重新加载单元格。基本上，我希望单元格视图展开并显示更多的基础数据，如果它被选中的话。问题是我不知道如何让表格视图向我的控制器询问新视图。我可以看到视图正在请求单元格高度，但仅此而已。

在视图上调用 reloadData 是可行的，但它效率低下，并且会带来一系列问题（动画可能性、维护选择状态等）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T15:39:31.607

这是我将采取的方法。

```
@property (nonatomic, strong) NSIndexPath *selectedIndexPath; 
```

将 NSIndexPath 类型的属性设置为您的控制器以存储选择的索引路径。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    self.selectedIndexPath = indexPath;
    [tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation: UITableViewRowAnimationNone];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if ([indexPath compare:self.selectedIndexPath] == NSOrderedSame) {
        // Create your custom cell here and return it.
    }
    else {
        // Should create a normal cell and return it.
    }
} 
```

* * *

确切地。另请注意，您可能想要取消选择。这是 Swift 中的完整代码。根据需要在 cellForRowAtIndexPath 中使用 selectedIndexPath。

// 选择 TableViewController 导入 UIKit

类 SelectingTableViewController: UITableViewController
{ 内部变量 selectedIndexPath:NSIndexPath? = 无

```
override func viewDidLoad()
    {
    super.viewDidLoad()
    tableView.estimatedRowHeight = 68.0
    tableView.rowHeight = UITableViewAutomaticDimension

    self.clearsSelectionOnViewWillAppear = false;
    }

override func tableView
    (tableView:UITableView, didSelectRowAtIndexPath indexPath:NSIndexPath)
        {
        print("did select....")

        // in fact, was this very row selected,
        // and the user is clicking to deselect it...
        // if you don't want "click a selected row to deselect"
        // then on't include this clause.
        if selectedIndexPath == indexPath
            {
            print("(user clicked on selected to deselect)")
            selectedIndexPath = nil
            tableView.reloadRowsAtIndexPaths(
                [indexPath],
                withRowAnimation:UITableViewRowAnimation.None)

            tableView.deselectRowAtIndexPath(indexPath, animated:false)
            return
            }

        // in fact, was some other row selected??
        // user is changing to this row? if so, also deselect that row
        if selectedIndexPath != nil
            {
            let pleaseRedrawMe = selectedIndexPath!
            // (note that it will be drawn un-selected
            // since we're chaging the 'selectedIndexPath' global)
            selectedIndexPath = indexPath
            tableView.reloadRowsAtIndexPaths(
                [pleaseRedrawMe, indexPath],
                withRowAnimation:UITableViewRowAnimation.None)
            return;
            }

        // no previous selection.
        // simply select that new one the user just touched.
        // note that you can not use Apple's willDeselectRowAtIndexPath
        // functions ... because they are freaky
        selectedIndexPath = indexPath
        tableView.reloadRowsAtIndexPaths(
            [indexPath],
            withRowAnimation:UITableViewRowAnimation.None)

        }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:33:37.863

你有没有尝试过：

```
- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

然后，您可以只指定更新的单元格进行重新加载。您还可以告诉您的 tableview 在重新加载时记住或忘记选择状态：

```
tableViewController.clearsSelectionOnViewWillAppear = NO; 
```

然后你还必须处理里面的自定义视图

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# .net - 添加或删除列时避免表重建？

> ID：14629215
> 
> 赞同：2
> 
> 时间：2013-01-31T15:25:43.393
> 
> 标签：.net, sql-server, visual-studio-2010, sql-server-data-tools

使用 SQLPAckage (SSDT) 添加或删除列会导致重建表。有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T15:53:36.030

如果您在除表末尾之外的任何位置添加列，那肯定会触发表重建。否则，您不应该看到您的表重建。您可能想尝试 Schema Compare 以了解 SSDT 认为会发生什么变化。这将向您展示它看到的差异，并可以让您更深入地了解为什么要重建您的表。

通常情况并非如此。它可以由排序规则的更改触发，但应该只使用 ALTER TABLE 命令。

# windows - 通过 cmd 更新 Windows 7

> ID：14629220
> 
> 赞同：0
> 
> 时间：2013-01-31T15:26:05.577
> 
> 标签：windows, powershell, command, cmd

我需要在一些远程机器上自动更新/安装 MS 补丁。我不能使用 MDT，因为在所有工作站上已经有一个不同的子系统处理大量软件/补丁分发。

因此，最简单/最快的方法是将脚本连接到每台机器并运行一个命令（如果存在），该命令将开始更新系统，就像用户现在单击控制面板/Windows 更新/更新一样......

我搜索并找到了我尝试在机器上运行的 wuauclt 实用程序，并检查它是否有效，但它什么也没做。

我试着做

```
wuauclt /a /detectnow 
```

进而

```
wuauclt /r 
```

它没有报告“命令不存在”或类似的东西。它根本不输出任何东西，我看到后台没有安装任何更新。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:15:20.653

我昨天读[了这篇文章](http://www.ehow.com/how_8724332_use-powershell-run-windows-updates.html)，我想它可能对你有帮助。请看一下，如果有帮助，请告诉我。

```
http://www.ehow.com/how_8724332_use-powershell-run-windows-updates.html 
```

# c# - 取消不同异步操作的常用方法

> ID：14629229
> 
> 赞同：2
> 
> 时间：2013-01-31T15:26:34.140
> 
> 标签：c#, silverlight, windows-phone-7, design-patterns, windows-phone-8

我有一些不重要的任务，很高兴收到您的来信，如何更好地解决它。简而言之，这是关于管理不同性质的长期运行的任务。虽然我正在为 Windows Phone 执行此操作，但我觉得这里可以应用一些基于 C# 和 .NET 标准方法的一般原则。

我的应用程序主要围绕不同的服务类构建，这些服务类处理来自云端的数据、GPS、商业交易、身份验证等。所有服务都归我们团队所有。服务在视图模型内部使用，但不同服务中的 API 目前采用不同的方式。某处是异步/等待，某处是基于事件的（例如在定位中，我需要不断更新地理坐标）。

现在我已经开始研究应用程序激活/停用的问题，我想在我的所有视图模型中以一种通用的方式处理这个问题。主要的事情之一是当应用程序关闭或用户导航到另一个页面时取消当前的异步操作。我想将与此相关的代码放入 BaseViewModel 之类的东西中，以避免代码重复。然而，这意味着我需要统一处理所有视图模型中的取消。

挑战来了。例如，异步/等待的东西可以被 CancellationToken 取消。我可以收集 BaseViewModel 中的所有取消标记，并在需要时使用它们。但是，这不适用于基于事件的异步。当然，可以通过虚函数调用将具体的取消操作委托给子视图模型。但我想将尽可能多的代码移到 BaseViewModel。

那么，有没有办法统一取消Tasks和基于事件的异步呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:12:56.867

为什么基础设施*不适*`CancellationToken(Source)`用于事件驱动组件？您可以使用取消发生时调用的令牌注册回调。在该回调中，您可以取消订阅事件源。笼统地说，您可以执行*任何*必要的操作来使系统静止。只需将令牌分发给所有与取消有关的组件即可。

实际上，这就是`CancellationToken(Source)`基础设施的“美”。它是如此简单，但又如此普遍适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:44:10.427

基于事件的模式有些不统一，所以我认为如果不为每个操作编写一些个案代码，就不会存在完全干净的解决方案。一些选项可能是：

*   [将](http://msdn.microsoft.com/en-us/library/ee622454.aspx)基于非任务的异步操作封装在任务中，以提供统一的方法。需要相当多的无聊代码（由于 EAP 的不统一性）。

*   将您的任务和事件订阅都包含在一个简单的取消委托中，并让您的基类只知道这些取消操作（可能不仅仅是一个操作，但相对简单）

在我看来，无论如何您都需要编写每个事件的代码来取消，但是使用几个帮助方法来存储任务和基于事件的操作的信息，它可能非常轻量级。

# jar - 重新分发 ANTLR 的运行时类

> ID：14629232
> 
> 赞同：4
> 
> 时间：2013-01-31T15:26:40.457
> 
> 标签：jar, licensing, runtime, antlr

我正在构建一个打包为 jar 文件的 java 项目，它部分基于 ANTLR 生成的词法分析器/解析器。我的问题是，在 jar 文件中重新分发 ANTLR 的运行时类是标准做法，还是用户需要自己获取 ANTLR 运行时并确保它在类路径上正确设置？

ANTLR 的许可证 ( [http://www.antlr.org/license.html](http://www.antlr.org/license.html) ) 规定如下：

“以二进制形式重新分发必须在随分发提供的文档和/或其他材料中复制上述版权声明、此条件列表和以下免责声明。”

但是，运行时包似乎不包含许可证文件。这是否意味着只要添加了 ANTLR 许可证就可以重新分发二进制文件？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:51:18.457

是的，如果您正在销售或以其他方式分发打包的 jar 或可执行文件，则包含 ANTLR 运行时是标准做法。您可以在您的发行版中包含一个 README 文件，说明包含 ANTLR 运行时并提供许可证副本。

如果需要，ANTLR 许可证允许您将 ANTLR 运行时类与您自己的类一起压缩，这样您就可以拥有一个可执行的 jar 文件。

# php - 有没有办法改变 SwiftMailer 中标头的编码？

> ID：14629236
> 
> 赞同：4
> 
> 时间：2013-01-31T15:26:46.167
> 
> 标签：php, symfony, swiftmailer

我`SwiftMailer`用来发送电子邮件，但我有一些主题的编码问题`UTF-8`。Swiftmailer`QPHeaderEncoder`默认使用对电子邮件标头进行编码，而 safeMap 看起来在某些`UTF-8`法语字符方面存在一些问题。我使用的一个主题包含单词 trouvé（在法语中找到），当主题到达用户时，它会显示 trouv。

我想使用与`NativeQPContentEncoder`内容编码器类似的东西，但对于标题，只有`Base64`和`Quoted Printable`编码器。

有没有办法解决这个问题，也许我做错了什么所以我在这里粘贴我正在使用的代码

```
$message = Swift_Message::newInstance()

// set encoding in 8 bit
->setEncoder(Swift_Encoding::get8BitEncoding())

// Give the message a subject
->setSubject($subject)

// Set the From address with an associative array
->setFrom(array($from => $niceFrom))

// Set the To addresses with an associative array
->setTo(array($to)) ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-19T10:35:28.707

检查您的 PHP 配置`mbstring.func_overload`选项中是否有除`0`. 如果是，请将其更改为`0`，重新加载您的网络服务器并尝试再次发送消息。

`mbstring.func_overload` [覆盖](http://php.net/manual/mbstring.overload.php)一些字符串 PHP 函数，并可能导致 UTF-8 出现棘手的错误。

我个人通过禁用`mbstring.func_overload`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:23:15.343

首先，确保您知道您的主题字符串是如何编码的。如果它不是 UTF-8 则 utf8_encode() 它。

另外，请确保您 setCharset('utf-8') 您的消息。

# zend-framework - 如何在元素右侧呈现标签？

> ID：14629242
> 
> 赞同：0
> 
> 时间：2013-01-31T15:27:05.653
> 
> 标签：zend-framework, zend-form, zend-form-element

我正在向现有表单添加同意复选框。我无法将标签呈现在复选框的右侧。我究竟做错了什么？

请注意，复选框是使用创建的，`$this->addElement(`因为表单的其余部分都是以这种方式创建的。

我提前谢谢你。

```
$this->addElement('checkbox', 'isUserConsent', array(
        'options'   => array(array('placement' => 'APPEND')),
        'label' => 'Plz activate',
        'validators'    => array(
            array('InArray', false, array(
                'hay' => array(1),
                'messages' => 'Please check the consent box'),
           )
        ),
        'decorators'    => array('ViewHelper','Errors','Label'),
 )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:37:03.857

默认是添加标签，但您可以通过修改装饰器的 'placement' 选项来更改它：

```
$this->getElement('isUserConsent')->getDecorator('label')->setOption('placement', 'append'); 
```

**编辑**：我从不将这种语法用于装饰器，但它应该是这样的：

```
$this->addElement('checkbox', 'isUserConsent', array(
        'options'   => array(array('placement' => 'APPEND')),
        'label' => 'Plz activate',
        'validators'    => array(
            array('InArray', false, array(
                'hay' => array(1),
                'messages' => 'Please check the consent box'),
           )
        ),
        'decorators'    => array(
            'ViewHelper',
            'Errors',
            'Label' => array(
                'placement' => 'append'
            )
         ),
 )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:38:33.287

这是渲染表单元素标签的代码。

**$this->form->name->renderLabel() ;**

# java - 实现一个搜索算法android

> ID：14629244
> 
> 赞同：-2
> 
> 时间：2013-01-31T15:27:08.283
> 
> 标签：java, android, search

嗨，我想在我的 androids SD 卡上搜索文件。如果可能的话，最好不使用文件对象。是否可以在 MediaStore 中查询文件名。任何代码片段或正确方向的指针将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:44:50.323

Android Media Provider 已经有了所有的文件信息，所以最好直接查询 Media Provider。

如下所示：

```
 String where = FileColumns.DATA + " like " + "XYZ";

      cursor =    Context.getContentResolver().query(Files.getContentUri("external"),
                        projection, // Which columns you need
                        where, null
                        }, null); 
```

这只是给你一个想法；请根据您的需要进行修改。希望能帮助到你。

# java - 使用 testng 或 Jenkins 进行自动化测试报告

> ID：14629251
> 
> 赞同：0
> 
> 时间：2013-01-31T15:27:22.920
> 
> 标签：java, jenkins, testng, selenium-webdriver, jenkins-plugins

我正在使用 selenium、testng 和 jenkins 来自动化我的测试用例、运行测试并生成报告。我使用 jenkins 仪表板插件来查看测试状态和报告。此外，我有时会使用 testNG/reportNG 来查看我的测试状态报告。但我需要更多地自定义报告。我觉得修改 testNG 源或仪表板插件源很难。是否有任何其他想法来生成或自定义这些测试报告？或任何其他生成/与testNG集成的工具？请帮助我..谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T16:27:22.253

您可以使用 TestNG Reporter 对象将 HTML 写入测试输出。我用它来插入屏幕截图、错误链接、嵌入视频等。

或者，您创建一个 TestNG Reporter 侦听器[（文档）](http://testng.org/javadocs/org/testng/IReporter.html "文档")

这将允许您创建自己的报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T09:35:04.457

当我们使用 TestNG 执行测试时，它会生成一个包含基本信息的默认 html 报告。为了以您想要的方式自定义它（开始时间和执行时间、浏览器名称、异常信息等），您必须实现“IReporter”接口来生成自定义报告。它具有“generateReport()”方法，该方法将在所有套件完成执行后调用，并将报告提供到指定的输出目录。有关更多详细信息，请参阅链接： [https ://www.seleniumeasy.com/testng-tutorials/testng-customize-emailable-html-report-example](https://www.seleniumeasy.com/testng-tutorials/testng-customize-emailable-html-report-example)

# ios - 如何使用自动布局调整放置在其上的滚动视图和 UILabel 的大小

> ID：14629256
> 
> 赞同：1
> 
> 时间：2013-01-31T15:27:35.960
> 
> 标签：ios, autolayout

我的应用程序中有屏幕，它显示一些多行信息。在自动布局之前，我手动设置了 ScrollView 和 UILabel 的大小但是现在，我不能这样做，使用自动布局，我想保留自动布局。

我该如何解决？

谢谢。

# eclipse - 如何在 Eclipse 中使用创建单击事件搜索按钮？

> ID：14629259
> 
> 赞同：-1
> 
> 时间：2013-01-31T15:27:36.947
> 
> 标签：eclipse, sqlite

如何在 Eclipse 中创建点击事件搜索按钮？有人能帮我吗。这是我正在使用的代码。

```
protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_search);

      listContent1 = (ListView)findViewById(R.id.lFoodlist1);

      mySQLiteAdapter = new SQLiteAdapter(this);
      mySQLiteAdapter.openToRead();

      Cursor cursor = mySQLiteAdapter.queueAll();

      startManagingCursor(cursor);

      String[] from = new String[]{SQLiteAdapter.KEY_FOODNAME,SQLiteAdapter.KEY_CALORIES};
      int[] to = new int[]{R.id.tv1, R.id.tv2};

      SimpleCursorAdapter cursorAdapter =
      new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

      listContent1.setAdapter(cursorAdapter);
      //listContent.setOnItemClickListener(listContentOnItemClickListener);*/

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:38:47.257

这段代码取自[这里](https://stackoverflow.com/questions/5456854/java-swing-how-to-show-text-after-button-is-clicked)并被修改/评论以帮助他的场景。

您可以实现[swing](http://docs.oracle.com/javase/6/docs/technotes/guides/swing/reference.html)以帮助您的应用程序的 GUI 方面。其他人可能更喜欢[AWT](http://docs.oracle.com/javase/6/docs/api/java/awt/package-summary.html)

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class myTest {

    public static void main(String[] args) {

        //This will create the JFrame/JPanel/JButton
        final JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        JButton button1 = new JButton();

        //Add your panel and button and make them visable
        frame.add(panel);
        panel.add(button1);
        frame.setVisible(true);

        //This adds the actionListener to the Button
        button1.addActionListener(new ActionListener() {

            //When the button is clicked this action will be performed
            public void actionPerformed(ActionEvent arg0) {
                //Add your code here.
            }
        });

    }

} 
```

# css - SASS：将 RGB 转换为 RGBa

> ID：14629260
> 
> 赞同：12
> 
> 时间：2013-01-31T15:27:40.220
> 
> 标签：css, sass

我已经像这样设置了我的项目的颜色：

```
$blue: rgb(75, 179, 209); 
```

有没有办法使用这个变量并根据需要将值转换为其他地方的 RGBa？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-31T15:40:14.717

使用[rgba 实例方法](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#rgba-instance_method)

你可以

```
$blue: rgb(75, 179, 209);

body {
    background:rgba($blue, .5);
} 
```

可以在这里测试：http: [//sass-lang.com/try.html](http://sass-lang.com/try.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-01T07:57:37.103

也许更好的解决方案是创建您自己的函数，您可以在需要时调用它。Hampton Catlin（Sass 的作者）提出了一个很好的解决方案，基本上是这样的：

```
@function set-opacity ($color) {
    $lightness: lightness($color);
    $trans-value: transparentize($color, $lightness);
        @return $trans-value;
    } 
```

因此，本质上，您首先使用 Sass 函数 lightness（与 opacity 互补），然后使用 Sass 函数 transparentize - 第二个参数是透明化的结果。
然而，Catlin 表明这需要改进 - 因为 ligthness() 会产生百分比，但我们需要介于 0 和 1 之间的值。
因此，我们需要一个将百分比转换为所需值的附加函数。这是一个简单的函数，因为我们只是将百分比除以 100。

```
@function percent-to-number ($val) {
    @return $val / 100;
    } 
```

现在，我们准备好了——整个代码块是这样的：

```
 @function percent-to-number ($val) {
        @return $val / 100;
    }

    @function set-opacity ($color) {
        $lightness: lightness($color);
        $lightness-number: percent-to-number($lightness);
        $trans-value: transparentize($color, $lightness-number);
            @return $trans-value;
    } 
```

所以，例如，

```
color: set-opacity(#f00); 
```

给出这个 CSS 输出：

```
color: rgba(255, 0, 0, 0.5); 
```

希望这会有所帮助。看起来工作量太大了，但是如果你把这个函数放在 partials _functions 中，总会有帮助的。否则，您最终将为您想要 alpha 值的每种颜色编写一个变量。

# c# - 两个任务是否可以在 C# 的同一个线程上同时运行？

> ID：14629262
> 
> 赞同：1
> 
> 时间：2013-01-31T15:27:42.663
> 
> 标签：c#, multithreading, synchronization

我不确定在将任务分配给线程时 C# 是如何工作的。

我想验证一些东西。是否保证在任何时候，每个任务都由一个且只有一个线程处理，无论该任务正在做什么，即使它刚刚停止或执行了 Thread.currentThread().sleep()，该线程也不会去并服务于任何其他任务？那么它在线程和任务之间是 1:1 的吗？不管任务在做什么，即使它只是在睡觉，或者任务是通过 Task.Run 还是 await Task.Run 等调用的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:29:42.630

There are a couple of cases I'm aware of where tasks can be re-entrant. One is where one task is waiting for another task to complete, and that first task hasn't yet *started*. It makes sense for the new task to be started on the current thread in that case... sort of. It does raise some nasty worries about locking and any other thread-local context.

It's also possible (apparently) for `Task.Factory.StartNew` to execute a new task "inline", if the scheduler deems it appropriate - but the schedulers built into .NET don't do this.

See [this other Stack Overflow question](https://stackoverflow.com/questions/12245935/is-task-factory-startnew-guaranteed-to-use-another-thread-than-the-calling-thr) which includes more detailed response from Stephen Toub (on the PFX team).

# css - wordpress div 像画廊一样对齐

> ID：14629263
> 
> 赞同：0
> 
> 时间：2013-01-31T15:27:45.437
> 
> 标签：css, wordpress, html

我不确定我能做些什么来修复它，但我无法使用 css 来对齐第一行中的图像，然后像画廊一样对齐另一行。任何人都可以帮忙。我试图将 div 条目向左浮动，但仍然无法正确。

这是进入的css

```
 .entry {
clear: both;
margin: 0;
padding-top: 1px;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:52:46.007

添加

```
display:inline-block 
```

到您的 div 类 .wp 标题

请参阅这篇文章[http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/](http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/)因为跨浏览器可能存在一些问题，但我认为它只有 IE6，可能是 7

所以在你的情况下

```
.wp-caption {
 border: 1px solid #a87c31;
 text-align: center;
 background-color: #10050B;
 padding-top: 4px;
 margin: 10px;
 display: inline-block; 
 } 
```

# sql - SQL Server FileStream 的问题

> ID：14629266
> 
> 赞同：1
> 
> 时间：2013-01-31T15:27:55.523
> 
> 标签：sql, sql-server-2008-r2, win32exception

我们目前正在审查我们在其中一个实时环境中遇到的问题，其中 OpenFileStream（SqlFileStream C# 类中的私有方法）

```
System.ComponentModel.Win32Exception (0x80004005): The system cannot find the path specified at System.Data.SqlTypes.SqlFileStream.OpenSqlFileStream(String path, Byte[] transactionContext, FileAccess access, FileOptions options, Int64 allocationSize)at System.Data.SqlTypes.SqlFileStream..ctor(String path, Byte[] transactionContext, FileAccess access, FileOptions options, Int64 allocationSize)at System.Data.SqlTypes.SqlFileStream..ctor(String path, Byte[] transactionContext, FileAccess access) 
```

我们在另一个没有问题的环境中工作。我们用来调用的代码如下：

```
using (SqlCommand command = new SqlCommand(insertFileSql, conn, transaction))
                {
                    string path = null;
                    byte[] context = null;
                    using (SqlDataReader reader = command.ExecuteReader())
                    {
                        reader.Read();
                        path = reader.GetString(reader.GetOrdinal("PathName"));
                        fileID = reader.GetGuid(reader.GetOrdinal("FileId"));
                        context = (byte[])reader[reader.GetOrdinal("Context")];
                    }

                    richTextBox1.AppendText(
                        string.Format("Path: {0}, FileID:{1}, content: {2}", path, fileID, Convert.ToString(context)));

                    using (SqlFileStream strm = new SqlFileStream(path, context, FileAccess.ReadWrite))
                    {
                        // copy the user file to the Filestream
                        inputFileStream.CopyTo(strm);
                    } 
```

我们查看了端口/防火墙，甚至发现它是 NtCreateFile 在 .Net 源代码中失败（值为 3221225530），但我找不到关于该值或从*IOStatusBlock*返回的值的文档这是返回参数之一。

\\v02-A60EC2F8-2B24-11DF-9CC3-AF2E56D89593\dbFileStore\dbo\tblFile\DataFile\AC50B769-B6F8-43AA-B266-E4E837D78BA0\VolumeHint-HarddiskDmVolumes\\SQLData

有什么其他人可以建议看的吗，我和我的团队在两天的大部分时间里一直在研究这个。

干杯，J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-01T11:19:19.300

虽然已经过去了这么多时间，但我们使用 SQL Server 2012 时遇到了 ReadWrite 的问题。读没问题，写没问题，但只有读写。

在安装/卸载 SQL Server 更新期间似乎发生了一些事情 - 注册表设置被安装程序意外删除。使用 .reg 文件读取它：

```
 Windows Registry Editor Version 5.00

 [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters\FsctlAllowlist]
 "FSCTL_SQL_FILESTREAM_FETCH_OLD_CONTENT"=dword:00092560 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:44:22.533

发现是 Veritas Storage Foundation 无法与 SQL FileStream 一起使用，似乎在执行 Windows API 调用时 VSF 存在一些问题。

# django - 仅在 Django EXEMPT_URLs 中免除顶级文件

> ID：14629270
> 
> 赞同：0
> 
> 时间：2013-01-31T15:28:18.133
> 
> 标签：django

我只想让 /about/ 页面豁免——而不是 about/what_next。

如何在以下代码中执行此操作？

```
AUTHENTICATED_EXEMPT_URLS = [
    r"^/about",
    r"^/about/privacy/", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:31:30.200

只需`$`在 URL 的末尾添加一个来标记模式的结尾

```
AUTHENTICATED_EXEMPT_URLS = [
r"^/about/$", 
```

# text - 字符编码类型

> ID：14629272
> 
> 赞同：1
> 
> 时间：2013-01-31T15:28:20.517
> 
> 标签：text, encoding, character

当我查看某个网页时，字符在页面上正确显示为汉字。当我查看页面源时，它们看起来像这样：

```
<div>&#21448;&#35828;&#65306;&#12300;&#25105;</div> 
```

这是什么编码？

# elasticsearch - ElasticSearch "Match" with FullText Matches

> ID：14629278
> 
> 赞同：0
> 
> 时间：2013-01-31T15:28:36.090
> 
> 标签：elasticsearch

I'm working with ElasticSearch. When I do this query:

```
{query: "blackberry -q10"} 
```

I get exactly what I want (all results which have reference to BlackBerry but not Q10).

However, I want to restrict the fields which are searched to just the "title" field. Eg, the _source documents have titles, body, tags, etc. and I only want to search the title. The ElasticSearch "Match" seems right for me...

```
{query: {match: {title: "blackberry -q10"}}} 
```

While this succeeds in only searching the title, it still returns results with have Q10 in the title, unlike the search above.

I'm looking at [the match documentation](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html) but can't seem to figure it out.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:57:30.203

Match 查询不使用这样的否定语法。例如，您不能使用“减号”来否定一个术语。默认搜索分析器会将其解析为连字符。

在这种情况下，我会使用过滤查询。您可以在查询中添加否定...但是过滤器会快得多。

```
{
  "filtered":{
     "query":{
        "match":{
           "title":"blackberry"
        }
     },
     "filter":{
        "bool":{
           "must_not":{
               "term":{
                  "title":"q10"
              }
           }
        }
     }
  }
} 
```

请注意，您可能需要更改`term`过滤器，具体取决于您在索引时分析字段的方式。

编辑：根据您在下面的评论，如果您真的想保持“内联”否定的能力，您将使用`field`查询（更具体的版本`query_string`，也可以使用）。此查询使用 Lucene 语法，允许内联否定

```
{
   "field" : {
       "title" : "blackberry -q10"
   }
} 
```

不推荐使用它的原因`query_string`和它的衍生产品是因为它很容易射中自己的脚。或者更确切地说，您的用户很容易正面朝您的服务器开枪。Query_string 需要正确的语法，如果用户输入不正确，它就会死掉。它还允许您的用户进行一些可怕的低效查询，通常通过通配符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:37:06.093

您想匹配所有具有“blackberry”且没有 q10 的标题，而不是所有具有“blackberry”或没有 q10 的标题。

匹配的默认布尔运算符是（在大多数情况下）OR。尝试在查询中添加 "operator": "and" 子句。

# c# - how to implement Action<..> as Func<...>

> ID：14629280
> 
> 赞同：0
> 
> 时间：2013-01-31T15:28:42.260
> 
> 标签：c#, .net-4.0, delegates, func

I'd like to implement Action as func and get the error : could not use void in this context. Please advise

```
Action<string> someFunc_1 = Console.WriteLine;
someFunc_1("Test");

Func<string, void> someFunc_2 = Console.WriteLine; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:31:10.913

`Action<T1, T2, ...>`完成替换`Func<T1, T2, ..., void>`。

你不能`void`在泛型中使用。它不是 C# 中的类型。

然后在你的情况下，使用`Action<string>`而不是`Func<string, void>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:30:56.440

```
Func<string, bool> someFunc_2 = s =>
{
  Console.WriteLine(s);
  return true;
}; 
```

# c++ - c++ driver mongodb connection options

> ID：14629281
> 
> 赞同：3
> 
> 时间：2013-01-31T15:28:45.683
> 
> 标签：c++, mongodb, connection-string

It seems that c++ drivers doesn't accept mongodb connection uri format. There's no documentation on how i should create connection string, any guess?

I need to connect to a replica set with 3 servers, and set readPreference options.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-20T10:03:24.023

# 在 MongoDB C++ 客户端中创建到副本集的连接

在[@acm 的答案](https://stackoverflow.com/a/14651520/2577176)中解释的问题得到解决之前，我已经找到了 C++ 驱动程序的错误连接字符串的解决方法。`DBClientReplicaSet`您可以通过以下方式使用主机和端口向量创建一个：

```
//First create a vector of hosts
//( you can ignore port numbers if yours are default)  

    vector<HostAndPort> hosts;
    hosts.push_back(mongo::HostAndPort("YourHost1.com:portNumber1"));
    hosts.push_back(mongo::HostAndPort("YourHost2.com:portNumber2"));
    hosts.push_back(mongo::HostAndPort("YourHost3.com:portNumber3"));

//Then create a Replica Set DB Client:

    mongo::DBClientReplicaSet connection("YourReplicaSetName",hosts,0);

//Connect to it now:

    connection.connect();

//Authenticate to the database(s) if needed

    std::string errmsg;
    connection.auth("DB1Name","UserForDB1","pass1",errmsg);
    connection.auth("DB2Name","UserForDB2","pass2",errmsg); 
```

现在，您可以像使用`DBClientConnection`. 为了快速修复，您可以替换对`DBClientConnection`with的引用`DBClientBase`（它是`DBClientConnection`and的父级`DBClientReplicaSet`）

**最后一个陷阱：**如果您使用 getLastError()，则必须将其与目标数据库名称一起使用，如下所示：

```
connection.getLastError(std::string("DBName")); 
```

否则它将始终返回“命令失败：必须登录”，[如此 JIRA 票证](https://jira.mongodb.org/browse/SERVER-10318)中所述。

# 为每个请求设置读取首选项

你有两种方法可以做到这一点：

## SlaveOK 选项

它可以让您的读取查询被定向到辅助服务器。

它发生在查询选项中，位于`DBClientReplicaSet.query()`. [选项在Mongo 的官方文档](http://api.mongodb.org/cplusplus/2.1.0/namespacemongo.html#a7261673f7552ae9ee3a055f8f3962d8c)中列出

**您要查找的**是`mongo::QueryOption_SlaveOk`，这将允许您在辅助实例上进行读取。

这就是你应该如何调用 query();

```
connection.query("Database.Collection",
     QUERY("_id" << id),
     n,
     m,
     BSON("SomeField" << 1),
     QueryOption_SlaveOk); 
```

其中 n 是要返回的文档数（如果您不想要任何限制，则为 0），m 要跳过的数字（默认为 0），下一个字段是您的投影，最后一个是您的查询选项。

要使用多个查询选项，您可以`bitwise or |`像这样使用：

```
connection.query("Database.Collection",
     QUERY("_id" << id),
     n,
     m,
     BSON("SomeField" << 1),
     QueryOption_SlaveOk | QueryOption_NoCursorTimeout | QueryOption_Exhaust); 
```

## Query::readPref 选项

[Query 对象有一个 readPref](http://api.mongodb.org/cplusplus/current/classmongo_1_1_query.html#ab2c5a34d35460d795903d11d7a71824d)方法，它为特殊查询设置读取首选项。应该为每个查询调用它。

您可以传递不同的参数以获得更多控制。[它们在此处列出](http://api.mongodb.org/cplusplus/2.1.2/namespacemongo.html#a36e928fe9d92b2bcf9d7d1b6d9045e82)。

所以这就是你应该做的（我没有测试那个原因我现在不能，但它应该可以正常工作）

```
/* you should pass an array for the tags. Not sure if this is required.
Anyway, let's create an empty array using the builder. */

BSONArrayBuilder bab;

/* if any, add your tags here */

connection.query("Database.Collection",
     QUERY("_id" << id).readPref(ReadPreference_SecondaryPreferred, bab.arr()),
     n,
     m,
     BSON("SomeField" << 1),
     QueryOption_NoCursorTimeout | QueryOption_Exhaust); 
```

**注意**：如果使用了任何 readPref 选项，它应该覆盖 slaveOk 选项。

希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:12:07.907

有关连接字符串格式的详细信息，请参阅[连接字符串](http://docs.mongodb.org/manual/reference/connection-string/)文档。

（下面的代码链接是 2.2.3 文件）

要将连接字符串与 C++ 驱动程序一起使用，您应该使用[`ConnectionString`](https://github.com/mongodb/mongo/blob/f570771a5d8a3846eb7586eaffcf4c2f4a96bf08/src/mongo/client/dbclientinterface.h#L185)该类。您首先[`ConnectionString::parse`](https://github.com/mongodb/mongo/blob/f570771a5d8a3846eb7586eaffcf4c2f4a96bf08/src/mongo/client/dbclientinterface.h#L259)使用连接字符串调用静态方法以获取[`ConnectionString`](https://github.com/mongodb/mongo/blob/f570771a5d8a3846eb7586eaffcf4c2f4a96bf08/src/mongo/client/dbclientinterface.h#L185)对象。然后调用`ConnectionString::connect`以获取[DBClientBase](https://github.com/mongodb/mongo/blob/f570771a5d8a3846eb7586eaffcf4c2f4a96bf08/src/mongo/client/dbclientinterface.h#L931)对象，然后您可以使用该对象发送查询。

至于读取首选项，目前我看不到在 C++ 驱动程序的连接字符串中设置读取首选项的方法，这将排除每个连接的设置。

但是，通过使用标识副本集的字符串`DBClientBase`调用返回的实现将返回[DBClientReplicaSet](https://github.com/mongodb/mongo/blob/f570771a5d8a3846eb7586eaffcf4c2f4a96bf08/src/mongo/client/dbclient_rs.h#L412)的实例。该类在查询中获得荣誉，因此您可以在每个查询的基础上设置您的阅读偏好。`ConnectionString::parse``$readPreference`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T21:46:20.407

由于当前的 C++ 驱动程序仍然不接受标准的 mongodb 连接 URI，我已经打开了一张票： [https](https://jira.mongodb.org/browse/CXX-2) ://jira.mongodb.org/browse/CXX-2 请投票以帮助解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-02T10:45:07.773

似乎您可以通过调用 Query 对象的“readPref”方法在发送读取请求之前设置读取首选项。我还没有找到在 mongo 集合对象上设置读取首选项的方法。

# c# - 安装后 Windows 服务未自动启动

> ID：14629285
> 
> 赞同：0
> 
> 时间：2013-01-31T15:29:14.103
> 
> 标签：c#, windows-services

我创建了一个启用了自动启动的 Windows 服务。当我使用 installutil 安装该服务时，它没有自动启动。但是当我厌倦了手动启动它时，它正在工作。

当我检查事件查看器时，我找不到任何错误。这会是什么问题。我怎样才能找到错误？

我的启动功能是这样的

```
 protected override void OnStart(string[] args)
    {
        StartFetch();
    }

    private static void StartFetch()
    {
        try
        {

            FetchManager fetchManager = new FetchManager();
            fetchManager.Run();
        }
        catch (Exception ex)
        {
            throw ex;             
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:34:40.553

自动启动是指 Windows 重新启动时发生的情况。它不会在安装时自动启动服务。

为了解决这个问题，您当然可以添加一个安装后事件来启动服务，这就是我的做法。

当然也有90后的解决方案，要求用户重启完成安装;-)

# php - Do I need to modify links throughout my website once i change the URL structure?

> ID：14629287
> 
> 赞同：1
> 
> 时间：2013-01-31T15:29:27.400
> 
> 标签：php, .htaccess

I'm in process of cleaning my URLs.

Say I have a URL [http://www.example.com/index.php?id=12345&name=some-name](http://www.example.com/index.php?id=12345&name=some-name)

I just changed it to look better using mod_rewrite

[http://www.example.com/blog/12345/some-name](http://www.example.com/blog/12345/some-name)

Now the pain is the page index.php is not loading any images, css files and the anchor links are all broken.

Location of my image is [http://www.example.com/images/12345/some-image.jpg](http://www.example.com/images/12345/some-image.jpg)

I have used relative paths through out my site.

Now do I need to change links on all my pages ? Can .htaccess do some trick for me ? Please help.

Here is my .htaccess-

```
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d

RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^blog/(.*)/$ index.php?id=$1 [NC,L]

RewriteRule ^blog/(.*)/(.*)$ index.php?id=$1&name=$2 [NC,L] 
```

# php - 未找到学说迁移捆绑包 - symblog

> ID：14629289
> 
> 赞同：5
> 
> 时间：2013-01-31T15:29:34.197
> 
> 标签：php, symfony

作为 symfony 博客教程的一部分，我已经设法通过命令行安装了学说迁移。

[symblog 教程 part4](http://tutorial.symblog.co.uk/docs/extending-the-model-blog-comments.html)

但是我现在正在上课找不到错误？

```
Fatal error: Class 'Doctrine\Bundle\DoctrineMigrationsBundle\DoctrineMigrationsBundle' not found in /media/sf_projects/symBlog/app/AppKernel.php on line 24 
```

但是我不确定为什么我得到它路径对我来说看起来是正确的，请看下面的截图？ ![在此处输入图像描述](../Images/664139edac3c5bffee5009c54c8311e0.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T15:55:19.213

发现新版本的注册路径是

新的教义\捆绑\迁移捆绑\教义迁移捆绑（），

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T08:41:07.033

你应该改变这条路

```
new Symfony\Bundle\DoctrineMigrationsBundle\DoctrineMigrationsBundle() //old path 
```

有了这个

```
new Doctrine\Bundle\MigrationsBundle\DoctrineMigrationsBundle() 
```

它应该是正确的。

我在 Symfony2 标准版中遇到了同样的错误（我使用的是 2.2，但我认为它对 2.1 也有效）。如果它仍然不起作用，您应该安装 git 存储库。你可以通过官方 Symfony2 的教程来完成：

[http://symfony.com/doc/current/cookbook/workflow/new_project_git.html](http://symfony.com/doc/current/cookbook/workflow/new_project_git.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T05:18:11.790

我已经提交了带有此修复程序的 PR

[https://github.com/dsyph3r/symblog-docs/pull/43](https://github.com/dsyph3r/symblog-docs/pull/43)

但似乎作者不再对维护它感兴趣，而且他拥有的博客网站对于 git 中的内容也已经过时，即 git master 合并了一些修复，但网站没有重新生成。

所以你应该自己生成他的howto，否则你会卡在教程一步一步地使用最新版本的symfony2/doctrine

# objective-c - Creating IBOutlet to custom UIButton subclass from separate Phone and Pad storyboards?

> ID：14629294
> 
> 赞同：0
> 
> 时间：2013-01-31T15:29:45.013
> 
> 标签：objective-c, xcode, uibutton, interface-builder, subclass

I'm trying to drag connections from some UIButtons on my Storyboard to a subclass of `UIButton` (called `AGPiece` in my header file. I have two storyboards for iPhone and iPad.

I was able to drag the iPhone ones over and create new outlets (`@property (strong, nonatomic) IBOutlet AGPiece *piece1;`, but now I'm coming to want to link the iPad storyboard to those same lines of code, I can't drag onto those lines, it doesn't get the highlight and let me, it only allows me to create a new one above or below that line. Obviously if I'd created the iPad ones first, it would've created those and not the phone, the issue is dragging to an existing line of code, as opposed to dragging out and creating a new one. It seems that Xcode expects a `UIButton`, and doesn't know that my `AGPiece` inherits from `UIButton`.

Is there a way around this? It worked fine when I was linking to `UIButton` instances and had `UIButton` written in the header file, but now I'm coming to implement the custom class, it doesn't want anything to do with it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:39:25.800

试试这个...您会注意到 .h/.m 文件的行号列中有一个 BULLET，旁边是具有 IBACTION 或 IBOUTLET 的属性和方法。在一个视图中使用界面构建器，在另一个视图中使用您的 .h/.m 文件；您可以单击该项目符号并将其拖动到要链接的按钮/属性。

此外 - 您需要确保您的 ViewController 具有正确的“类”类型（与您的子类的名称匹配）。

您还可以控制从按钮/视图拖动到界面构建器中的“控制器”（橙色方块）。

*编辑* 根据上面的评论：如果您将按钮子类化，您可能需要在界面生成器中将按钮的“类”设置为按钮子类类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:44:58.873

你是如何创建 ipad 故事板的，我建议你使用这里解释的方法：[Converting Storyboard from iPhone to iPad](https://stackoverflow.com/questions/8465769/convert-storyboard-from-iphone-to-ipad) （在 finder 中复制 iphone 故事板文件，将目标运行时属性修改为 ipad 并重新启动 xcode）

当您像那里一样创建 ipad 故事板时，它还保留了 iphone 故事板的插座连接，非常方便为您节省了大量时间。

# c# - A Regex To Remove src Attributes With Dimensions In

> ID：14629296
> 
> 赞同：0
> 
> 时间：2013-01-31T15:29:48.440
> 
> 标签：c#, regex

This is probably a rather simple question to solve, butI'm trying to use a Regex on a string and have it remove any src attributes that contain dimensions, like this:

```
src="/some/path/here_000x000.jpg" 
```

so

```
<img src="/some/path/here_000x000.jpg"/> 
```

would become

```
<img /> 
```

after processing.

From researching I found that

```
\d{1,5}x\d{1,5} 
```

finds dimensions, and

```
src\s*=\s*"(.+?)" 
```

will find a src attribute, but how can I combine these both and have some simple c# code whereby all matching patterns in a given string are removed (ie. replaced with '')?

Many thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:32:48.673

```
src\s*=\s*"[^"]*?\d+x\d+.*?" 
```

从技术上讲，您不应该将数字限制为五位（即使不需要这样）。

这匹配`src`(1)、任意数量的空格 (2)、`=`(3)、任意数量的空格 (2)、`"`(4)、任意数量的任意字符（除了`"`）（非贪婪）(5)、任意正数位数 (6)、`x`(7)、任意正数位数 (6)、任意字符数（换行符除外）（非贪婪地）(8) 和`"`(3)。

1.  `src`
2.  `\s*`
3.  `=`
4.  `"`
5.  `[^"]*?`
6.  `\d+`
7.  `x`
8.  `.*?`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:33:17.233

你可以使用这个正则表达式

```
src\s*=\s*"[^"]*\d+x\d+[^"]*" 
```

逃脱`"`_`""`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:35:00.160

试试这个正则表达式：

```
src=".*?\d+x\d+\.\w+" 
```

它将匹配 1 个或多个数字

# c# - Thread must be STA-Thread, but it already is

> ID：14629298
> 
> 赞同：3
> 
> 时间：2013-01-31T15:30:04.993
> 
> 标签：c#, wpf, multithreading, dispatcher, sta

Im working on my thesis about an C# WPF program, but i ran into an error i dont understand.

Somewhere in my MainWindow Code im starting a new Thread like this:

```
Thread searchServer = new Thread(new ThreadStart(doSearchServer));
            searchServer.SetApartmentState(ApartmentState.STA);
            searchServer.Start(); 
```

The doSearchServer methods does the following:

```
 private void doSearchServer()
    {
        bool connected = ServerConnection.authentication();
        ServerConnection.getDeviceList();
        gotDataFromServer = connected;

        if (connected)
          ..
          ..
    } 
```

The ServerConnection class is static because i also need that class in some other Windows.

At ServerConnection.authentication() the client (my Program) tries to authenticate on my server. If a password is required, i wanted to open a new PasswordWindow as you can see here:

```
public static bool authentication()
    {
        UdpClient client = new UdpClient();
        IPEndPoint ip = new IPEndPoint(IPAddress.Broadcast, 55042);
        IPEndPoint ipRec = new IPEndPoint(IPAddress.Any, 0);

        byte[] bytes = Encoding.UTF8.GetBytes("authent|Username|Windows");
        client.Send(bytes, bytes.Length, ip);

        //Receive Answer
        byte[] recBuffer = client.Receive(ref ipRec);
        string recString = Encoding.UTF8.GetString(recBuffer);

        if (recString.Equals("authent|password"))
        {
            //Send Passwort
            Console.WriteLine("Password Required");

            Dispatcher.CurrentDispatcher.Invoke(new Action(() =>
            {
            PasswordWindow pw = new PasswordWindow();
            pw.ShowDialog();
            if (pw.ShowDialog() == true)
            {
                //send PW
            }
            else
            {
                //Dont send PW
            }
            }));

            client.Send(bytes, bytes.Length, ip);
            .
            .
            .
        } 
```

At the PasswordWindow Contructor it crashes. I tried STA + Dispatcher, MTA + Dispatcher, STA only.. anything i tried didnt work... i really dont get it.

Can someone please explain me why it still says that the Thread needs to be an STA Thread?

Thanks for any kind of help!!

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T15:35:39.020

改变`Dispatcher.CurrentDispatcher`

至

`System.Windows.Application.Current.Dispatcher`

因为当`Dispatcher.CurrentDispatcher`从不是“UI 线程”的线程（与`Dispatcher`首先启动应用程序的线程相关联的线程）访问属性时，会创建一个新`Dispatcher`的，这不是您在这里需要的。

# asp.net-mvc-4 - MVC 4 中的 HttpContext.Current.Request.IsAjaxRequest() 错误

> ID：14629304
> 
> 赞同：9
> 
> 时间：2013-01-31T15:30:25.560
> 
> 标签：asp.net-mvc-4

我在用

```
HttpContext.Current.Request.IsAjaxRequest() 
```

在 Application_Error 方法中检查 global.asax 中的 ajax 请求的条件，但我收到以下错误：

> “System.Web.HttpRequest”不包含“IsAjaxRequest”的定义，并且最佳扩展方法重载“System.Web.Mvc.AjaxRequestExtensions.IsAjaxRequest(System.Web.HttpRequestBase)”有一些无效参数

下面是代码：

```
void Application_Error(object sender, EventArgs e)
    {

        Exception exception = Server.GetLastError().GetBaseException();
        HttpException httpException = exception as HttpException;

        string ErrorMessage = "";
        ErrorMessage = "Application Level Error";

        logger.Error(ErrorMessage, exception);

        if (System.Web.HttpContext.Current.Request.IsAjaxRequest()) //if its an ajax do not redirect
        {
            return;
        }
    else
    {
      Server.ClearError();
      this.Response.RedirectToRoute("Default", new { controller = "Home", action = "Error" });
    }
  } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-31T18:30:36.320

猜猜它起作用了...发布为答案。

尝试

```
new HttpRequestWrapper(System.Web.HttpContext.Current.Request).IsAjaxRequest() 
```

`IsAjaxRequest()`接受与 an`HttpRequestBase`不同的 an `HttpRequest`（并且不相关，因此有点令人困惑）。我认为包装器将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T15:59:36.203

就我而言，我采用了静态方法（我在 IRouteConstraint 实现中）

`bool isAjax = AjaxRequestExtensions.IsAjaxRequest(httpContext.Request);`

为此，`include System.Web.Mvc`如果您还没有它，请不要忘记。

# c - 在 fortran 子例程中包含 ac/c++ 头文件

> ID：14629307
> 
> 赞同：2
> 
> 时间：2013-01-31T15:30:49.307
> 
> 标签：c, header, include, fortran

我有一个用 C/C++ 编写的库，它的开发人员声明它具有 Fortran 接口。该接口将被启用，包括一个头文件 *.h 并调用一个经典子例程。我想编译我的 Fortran 程序也链接那个库。该库已经过测试并且可以正常工作。

这是主程序：

```
! Main program
INCLUDE 'pastix_fortran.h'

Program TEST
IMPLICIT NONE
call GO_PASTIX
END PROGRAM TEST 
```

例程 GO_PASTIX 是

```
SUBROUTINE GO_PASTIX
IMPLICIT NONE

pastix_data_ptr_t :: pastix_data
integer :: pastix_comm
pastix_int_t :: n, rhs, ia(NCOLS+1), ja(NNZER)
pastix_float_t :: avals(NNZER), b(NROWS)
pastix_int_t :: perm(NROWS), invp(NROWS), iparm(64)
real*8 :: dparm(64)

call pastix_fortran(pastix_data,pastix_comm,n,ia,ja,avals,perm,invp,b,rhs,iparm,dparm)
END SUBROUTINE 
```

而在文件 pastix_fortran.h 中定义了子程序中使用的变量类型：

```
#define PASTIX_INT_KIND    4
#define pastix_int_t       INTEGER(kind=4)
#define pastix_uint_t      unsigned INTEGER(kind=4)
#define pastix_data_ptr_t  INTEGER(kind=4)
#define MPI_PASTIX_INT     MPI_INTEGER4
#define pastix_float_t     REAL(kind=8)
#define MPI_PASTIX_FLOAT   MPI_REAL8 
```

使用 VS2010，我添加了使用 /fpp 预处理文件的选项，并且我没有忘记添加所有包含目录和文件。但是编译器说：

对于标题行：“警告 1 警告 #5117：错误 # 预处理器行”

对于 fortran 子例程：“错误 #6404：此名称没有类型，并且必须具有显式类型。[PASTIX_DATA_PTR_T]”等等其余变量...

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:31:24.657

显然，`#define`类型的 未正确处理。我认为，可能的问题之一是您在 Fortran 中包含头文件的方式，因为您是通过*Fortran 语句*而不是*预处理器指令*来完成的。因此，可能仅在文件已经预处理之后才包含它。因此，`#define`.h 文件中的选项不会被预处理器解析。

`include()`将语句更改为`#include`预处理器指令可能会解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T16:26:13.777

这条线

```
#define pastix_uint_t      unsigned INTEGER(kind=4) 
```

将导致大多数 Fortran 编译器出现小问题，因为该语言从未支持使用此语法或任何其他语法的无符号整数。一些异常的实现可能已经支持它们，但它们绝对不是标准的。

# javascript - 如何在 JavaScript 三元运算符中打乱多个值

> ID：14629312
> 
> 赞同：0
> 
> 时间：2013-01-31T15:30:58.813
> 
> 标签：javascript, jquery, switch-statement, ternary-operator

我已经成功实现了多个条件三元运算符来在水平和垂直之间打乱类，如下所示：

jQuery：

```
<script type="text/javascript">
  $(document).ready(function() {
      $("#my_div")
     .removeClass("horizontal vertical")
     .addClass( ['red', 'blue', 'green', 'gray'].indexOf(my_color) != -1 ? 'horizontal' : 'vertical');
});
</script> 
```

my_color 可能同时具有红色、蓝色、绿色、灰白色和黑色中的一个值。如上所述，类`horizontal`设置为前 4 个`my_color`值和`vertical`其他值。现在我想添加和删除第三类`elliptical`，其中水平、垂直和椭圆设置仅为 my_color 的 2 个值。如何修改上面的脚本或使用 switch 语句实现相同的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:37:44.650

您可以使用带开关的[toggleClass轻松添加/删除类：](http://api.jquery.com/toggleClass/)

```
$(document).ready(function() {
   var colors = ['red', 'blue', 'green', 'gray'];
   $("#my_div")
      .toggleClass('horizontal', colors.indexOf(my_color) != -1)
      .toggleClass('vertical', colors.indexOf(my_color) == -1)
      .toggleClass('elliptical', [colors[0], colors[1]].indexOf(my_color) != -1);
}); 
```

如果颜色与数组匹配，则添加第一类，如果不匹配则删除，第二类相反，如果颜色与第一个或第二个数组值匹配，则添加第三类。并非所有浏览器都支持 array.indexOf，您可能应该使用 polyfill。

# c# - 用户输入中的 C# 转义字符

> ID：14629318
> 
> 赞同：0
> 
> 时间：2013-01-31T15:31:25.400
> 
> 标签：c#, .net

> **可能重复：**
> [我可以将 C# 字符串值转换为转义字符串文字吗](https://stackoverflow.com/questions/323640/can-i-convert-a-c-sharp-string-value-to-an-escaped-string-literal)

我有一个小程序，我希望用户能够输入转义字符，如“\n\r”“\t”等。我必须对这些进行替换还是有一种方法可以正常工作用户放入什么？

当用户在命令行中传递如下字符串（“这是一个 \r\n 测试”）时，它在程序中显示为 \r\n。我可以替换它，但我很好奇用户是否可以输入这些 C# 程序可以正确解释而无需我对其进行替换的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:36:41.127

您需要手动替换所有代码，例如：

```
text = text.Replace(@"\r\n", Environment.NewLine); 
```

[**演示**](http://ideone.com/jpT7Bk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:36:15.490

我认为，用户可以直接输入这些内容，但用户需要知道如何完成此操作。您可以编写任何代码来实现它，因此您应该执行以下操作：

```
input.Replace("\\r", "\r");
input.Replace("\\n", "\n"); 
```

只想确认一下。

# iphone - 如何自定义 Tapku 日历？

> ID：14629320
> 
> 赞同：0
> 
> 时间：2013-01-31T15:31:33.553
> 
> 标签：iphone, ios, objective-c, calendar, tapku

最后决定为我的培训日历应用程序使用日历库：

我正在尝试自定义 Tapku 日历...

只是想知道，如何在同一页面（日历下方）添加表格视图并更新其单元格？

一旦用户选择任何特定日期，特定日期的事件将显示在表格单元格中。

注意：我使用“DidSelectDate”方法来显示消息。

问题是，如果我在日历下方添加表格视图，它不可见。我该怎么做？我在做什么：检查是否删除了任何日期：

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d {
NSLog(@"calendarMonthView didSelectDate %@",d);
//[self papulateTable];
//[table reloadData];
[self performSelector:@selector(papulateTable) withObject:nil afterDelay:1.0];
//flagtoCheckSelectedCalendarDate = 1;
//[table reloadData]; 
```

}

通过调用重新加载数据用我的自定义方法填充表：

```
-(UITableViewCell*)papulateTable
{
listOfTrainings = [[NSMutableArray alloc] init];
[listOfTrainings addObject:@"Objective - C"];
[listOfTrainings addObject:@"C#.Net"];
[listOfTrainings addObject:@"ASP.Net"];
[listOfTrainings addObject:@"JAVA"];
[listOfTrainings addObject:@"Memory management"];
[listOfTrainings addObject:@"Multi Threading app"];

NSString *cellValue = [listOfTrainings objectAtIndex:tempIndexPath.row];
cell.textLabel.text = cellValue;
[table reloadData];
return cell; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:58:14.687

UITableView 有很多重要的方法。

您想要的一些方法：

```
//Get Visible Cells.
NSArray *cells = [tableview visibleCells];

//Get the index path row of a cell.
NSIndexPath * cellRow = [tableview indexPathForCell:cellPointer];

//Return all visible index row.
NSArray *indexVisibleRows = [tableview indexPathsForVisibleRows];

//Reload Data
[tableview reloadData]; 
```

此外，您有一些委托，可以轻松控制 tableview：

-ScrollView 代表。

-TableView 代表。

看一下苹果文档，你需要的东西都有，只需使用tableview中的exists方法制定策略即可。

[http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

# c# - 允许用户使用边框调整表单/dataGridView 的大小

> ID：14629321
> 
> 赞同：0
> 
> 时间：2013-01-31T15:31:36.987
> 
> 标签：c#, winforms, visual-studio-2010, datagridview, resize

我正在使用表单和 dataGridViews 制作程序。我想允许用户调整表单和 dataGridViews 的大小，就像一个人在他们的电脑上调整 web 浏览器或其他窗口的大小一样。通过单击并拖动窗口的边框。我目前正在使用一个简单的版本来执行此操作。我在面板的一角有一个小图片框，其中包含一个 datGridView，停靠栏设置为 full 并添加了代码：

```
private void pictureBox11_MouseDown(object sender, MouseEventArgs e)
    {
        resize = true;
    }

    private void pictureBox11_MouseUp(object sender, MouseEventArgs e)
    {
        resize = false;
    }

    //Resize the Ben. List dataGrid(dataGridView4)
    private void pictureBox11_MouseMove(object sender, MouseEventArgs e)
    {
        if (resize)
        {
            this.panel4.Height = pictureBox11.Top + e.Y;
            this.panel4.Width = pictureBox11.Left + e.X;
        }
    } 
```

这允许用户做我想做的事，但不是我希望他们怎么做。这种方式是可以接受的，但我非常想知道我是否可以用另一种方式来做。“其他方式”当然是指单击并拖动边框以调整大小的能力。我希望在这里提供一些新的有用信息，将来可以帮助我。那么有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:50:29.743

您可以使用 MouseMove 事件来执行此操作。检查 e.location 以查看鼠标是否靠近边缘或角落，然后显示适当的光标。如果鼠标按钮按下，请更改 datagridview.size 或 .location 以匹配鼠标移动。（您需要在 mousedown 事件中抓住拖动的开始。）

这类似于您概述的方式，但是您应该相对于拖动的开始进行移动，这样当按下按钮时您不会有几个像素的“跳跃”。而且，当然，有 8 个边/角需要处理。此外，对于用户来说，对光标更改有一些反馈也很重要。

使用内置锚定或对接更简单，但这种方法没有任何问题。

# regex - Perl 不匹配反斜杠

> ID：14629323
> 
> 赞同：0
> 
> 时间：2013-01-31T15:31:40.900
> 
> 标签：regex, perl, backslash

> **可能重复：**
> [在 Perl 的变量中用反斜杠替换文本](https://stackoverflow.com/questions/2969220/text-replacement-with-backslash-in-a-variable-in-perl)

为什么这段代码不起作用？

```
my $foo = '\aa\bb';
my $bar = '\aa\bb\ee\ss.txt';

say $bar =~ m/^$foo.*$/ ? 'OK' : 'BAD'; 
```

使用正斜杠就可以了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T15:33:22.690

在将您的正则表达式放在那里之前，您可能应该**[`quotemeta`](http://perldoc.perl.org/functions/quotemeta.html)**先使用。

```
my $foo = quotemeta('\aa\bb'); 
```

放入正则表达式时的反斜杠具有**特殊**含义。`quotemeta`将逃避它们，以便从字面上匹配它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T15:32:37.350

你必须引用特殊字符，

用这个：

```
say $bar =~ m/^\Q$foo\E.*$/ ? 'OK' : 'BAD';
             __^    __^ 
```

看看[quotemeta](http://perldoc.perl.org/functions/quotemeta.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T15:48:36.420

You are using

```
/^\aa\bb.*$/ 
```

*   `\a` matches the "alarm" character.

*   `\b` matches a word boundary.

You want to generate a pattern that matches a given string. For that, you can use [`quotemeta`](http://perldoc.perl.org/functions/quotemeta.html).

```
my $pat = quotemeta($foo);
/^$pat.*$/ 
```

`quotemeta` can also be called using `\Q..\E`.

```
/^\Q$pat\E.*$/ 
```

# sql - 根据一系列列车号选择不同的 RowId

> ID：14629325
> 
> 赞同：0
> 
> 时间：2013-01-31T15:31:51.383
> 
> 标签：sql, excel, vba

我有一个 excel(2010) 表，其中包含如下数据：

```
trainnumber RowId
2           0
2           1
2           3
4           4
4           5
4           6 
```

我想要一个这样的列表：

```
RowId
0
4 
```

表示每个 trainnumber 系列的第一个 RowId

我已经尝试构建一个 SELECT 语句，但它不起作用。（我很擅长 SQL 哈哈）

```
sSQL = "select " & _
              "RowId, " & _
              "(select top 1 trainnumber from @t t2 where t.RowId = t2.RowId order by RowId), " & _
              "from @t t " & _
              "group by RowId" 
```

它告诉我，子选择中有一个语法错误，所以我尝试使用工作表名称，但它给了我同样的错误：

```
sSQL = "select " & _
              "RowId, " & _
              "(select top 1 trainnumber from @[Conversion$] t2 where t.RowId = t2.RowId order by RowId), " & _
              "from @[Conversion$] t " & _
              "group by RowId" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:39:19.050

如果你想先为每个，你可以得到`min`：

```
Select min(rowID)
from youtable
group by trainer_number
; 
```

# php - 如何禁用目录列表的缓存？

> ID：14629326
> 
> 赞同：0
> 
> 时间：2013-01-31T15:31:52.540
> 
> 标签：php, javascript, ajax

如何每次都获得一个**新的（未缓存的）文件列表？**

我有一个简单的 php 脚本，它将目录的内容放入一个数组中。我第一次使用它时效果很好，但是当我在 8 分钟后再次调用它时，它仍然提供*以前*的文件列表。我知道每隔六七分钟就会将**新文件添加到目录中，我需要最新文件。**在我的代码片段中，您会看到我尝试了各种“无缓存”建议，但它们不起作用。

```
<?php 
//header(“Pragma: no-cache”);
//header(“cache-Control: no-cache, must-revalidate”); // HTTP/1.1
//header(“Expires: Mon, 26 Jul 1997 05:00:00 GMT”); // Date in the past

$mySite = ("http://mysite.com/mypath/mydirectory/");
$url = $radarSite;
$html = file_get_contents($url);
$count = preg_match_all('/<td><a href="([^"]+)">[^<]*<\/a><\/td>/i', $html, $files);

print json_encode($files[1]);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:05:44.040

问题：如何每次都获得一个新的（未缓存的）文件列表？

“伊恩”是正确的。这将“强制”返回一个新的文件列表。

一般来说，它看起来像这样：

```
$mySite = ("http://mysite.com/mypath/mydirectory/?v=".time()); 
```

# php - 在while循环内查询

> ID：14629337
> 
> 赞同：0
> 
> 时间：2013-01-31T15:32:42.850
> 
> 标签：php, mysql, sql, loops, while-loop

这段代码有/有什么问题吗？

```
while($qtytoAdd > 0) {
    if(($remBalance - $qtytoAdd) >= 0) {
        mysql_query('UPDATE `estimates` SET `qty_rec` = `qty_rec` + "'.$qtytoAdd.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"');
        mysql_query('UPDATE `requestdetails` SET `current_rec_qty` = `current_rec_qty` + "'.$qtytoAdd.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `req_id` = "'.$currid.'"');
    } else {
        mysql_query('UPDATE `estimates` SET `qty_rec` = "'.$remBalance.'" + "'.$currRec.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"');
        mysql_query('UPDATE `requestdetails` SET `current_rec_qty` = "'.$remBalance.'" + "'.$currRec.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `req_id` = "'.$currid.'"');
        $qtytoAdd = $qtytoAdd - $remBalance;
    }
    return $qtytoAdd;
} 
```

这两个条件似乎都有效，但我将为其分配新值的`$qtytoAdd`部分不是。我是否需要使用返回函数让它继续循环。我是新手。请帮忙。

```
foreach($mat_desc as $mat_key => $materials){
    $qtytoAdd = $rec_qty[$mat_key];
    $remBalance = mysql_result(mysql_query('SELECT `est_qty` - `qty_rec` as balance FROM `estimates` WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `qty_rec` <> `est_qty` ORDER BY `item_id` ASC'), 0);
    $balid = mysql_result(mysql_query('SELECT `est_id` FROM `estimates` WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `qty_rec` <> `est_qty` ORDER BY `item_id` ASC'), 0);
    $currRec = mysql_result(mysql_query('SELECT `qty_rec` FROM `estimates` WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `qty_rec` <> `est_qty`'), 0);
    $currid = mysql_result(mysql_query('SELECT `req_id` FROM `requestdetails` JOIN `request` USING(`req_id`) WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `req_qty` <> `current_rec_qty` ORDER BY `req_id` ASC'), 0);

    mysql_query('INSERT INTO `receivedetails` (`rec_id`,`mat_id`,`rec_qty`) VALUES ('.$rec_id.','.mat_id_from_mat_desc($materials).','.$qtytoAdd.')');

    while($qtytoAdd > 0) {
        if(($remBalance - $qtytoAdd) >= 0) {
            mysql_query('UPDATE `estimates` SET `qty_rec` = `qty_rec` + "'.$qtytoAdd.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"');
            mysql_query('UPDATE `requestdetails` SET `current_rec_qty` = `current_rec_qty` + "'.$qtytoAdd.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `req_id` = "'.$currid.'"');
            $qtytoAdd = 0;
        } else {
            mysql_query('UPDATE `estimates` SET `qty_rec` = "'.$remBalance.'" + "'.$currRec.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"');
            mysql_query('UPDATE `requestdetails` SET `current_rec_qty` = "'.$remBalance.'" + "'.$currRec.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `req_id` = "'.$currid.'"');
            $qtytoAdd = $qtytoAdd - $remBalance;
        }
    }

    mysql_query('UPDATE `estimates` SET `qty_onhand` = `qty_rec` - `qty_rel` WHERE `proj_id` = '.$proj_id.' AND `qty_rec` <> `est_qty` AND `mat_id` = '.mat_id_from_mat_desc($materials).' AND `est_id` = '.$balid.'');
} 
```

这实际上是整个代码。:]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:42:13.993

> 我需要使用返回函数让它继续循环吗

您无需返回即可继续循环。当您想从当前函数返回并返回时，您可以使用[return 。](http://php.net/manual/en/function.return.php)

> 如果从函数内部调用，return 语句会立即结束当前函数的执行，并将其参数作为函数调用的值返回。return 还将结束 eval() 语句或脚本文件的执行。

PHP & 查询

```
while($qtytoAdd > 0) {
    if(($remBalance - $qtytoAdd) >= 0) {
        mysql_query('UPDATE `estimates` SET `qty_rec` = `qty_rec` + "'.$qtytoAdd.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"');
        mysql_query('UPDATE `requestdetails` SET `current_rec_qty` = `current_rec_qty` + "'.$qtytoAdd.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `req_id` = "'.$currid.'"');
        $qtytoAdd = $qtytoAdd - $remBalance; // this part does not exist in your code.
        ^^^^^^^^^^^^^^^^^^^^^^-------- depends on your requirement. I added the same line.  
 } else {
        mysql_query('UPDATE `estimates` SET `qty_rec` = "'.$remBalance.'" + "'.$currRec.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"');
        mysql_query('UPDATE `requestdetails` SET `current_rec_qty` = "'.$remBalance.'" + "'.$currRec.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `req_id` = "'.$currid.'"');
        $qtytoAdd = $qtytoAdd - $remBalance;
    }
} 
```

你哪里出错了

根据您的代码，如果第一个 if 为真，您无需更改 $qtytoAdd。再加上你从函数中返回。所以while循环只会执行一次。

# cocos2d-iphone - 围绕自身旋转精灵？

> ID：14629340
> 
> 赞同：1
> 
> 时间：2013-01-31T15:32:54.527
> 
> 标签：cocos2d-iphone

我正在尝试在屏幕中间旋转一个圆圈，即在添加到主场景的图层上，但它不是围绕其中心旋转，而是以某种奇怪的方式上下旋转。似乎它围绕屏幕的左下角旋转。

```
 id rot1=[CCRotateBy actionWithDuration:0.4 angle:10];
    id rot2=[CCRotateBy actionWithDuration:0.4 angle:-20];
    id rot3=[CCRotateBy actionWithDuration:0.4 angle:+20];
    id rotB=[CCRotateTo actionWithDuration:0.2 angle:0];
    id seq=[CCSequence actions:rot1,rot2,rot3,rot2,rot3,rot2,rotB, nil];
    [mainButton runAction:seq]; 
```

这里有什么问题？谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:37:59.747

您应该尝试设置`anchorPoint`精灵的：

```
mainButton.anchorPoint = ccp(0.5, 0.5); 
```

锚点以相对比例（从 0 到 1）定义，它表示相对于应用任何变换的点；精灵纹理也以锚点为中心。

在上面的例子中，锚点正好设置在精灵的中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:11:07.403

你把你的圆圈设置在中心吗？如果没有，那么先设置它

```
 circle_Sprite.position = ccp( 240, 160 ); 
```

# sql - 如何制作过滤器，我可以在其中获得一系列员工

> ID：14629345
> 
> 赞同：-2
> 
> 时间：2013-01-31T15:33:01.520
> 
> 标签：sql, filter, group-by, db2, range

我们使用使用 SQL 查询的第三方软件。

我需要做一个过滤器（每次我运行这个过滤器都会触发一个 sql 语句）。我需要为不同的人设置不同的过滤器。我们所有的客户分为 3 组。组 1 名称从 AG 组 2 HP 组 3 Qz 开始

我需要以这样一种方式进行设置，即与第 1 组打交道的人只能看到名称从 A 到 G 的客户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:42:51.997

您需要创建视图，而不是一些 SQL 过滤器。我不知道您使用的是什么 SQL，但请尝试阅读有关视图及其用法的信息，其中一个是“通过限制对表的一组行或列的访问来提供额外级别的表安全性......”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:38:41.327

我认为这会起作用——无法在 DB2 中进行测试，但我相信它支持`LEFT`：

```
SELECT * FROM YOURTABLE WHERE LEFT(GROUP1NAME,1) <= 'G';
SELECT * FROM YOURTABLE WHERE LEFT(GROUP1NAME,1) >= 'H' AND LEFT(GROUP1NAME,1) <= 'P';
SELECT * FROM YOURTABLE WHERE LEFT(GROUP1NAME,1) >= 'Q'; 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/db217/2)。

祝你好运。

# c# - ASP .Net 中的手动访问控制

> ID：14629346
> 
> 赞同：0
> 
> 时间：2013-01-31T15:33:03.253
> 
> 标签：c#, asp.net, authentication, asp.net-membership, forms-authentication

有没有一种方法可以在没有基于角色的内置方式的情况下限制对页面的访问？

本质上，如果用户尝试访问 admin.aspx，那么它会重定向到`login.aspx&redirect_url=admin.aspx`

\然后，他们将用他们的凭据回发，我会给他们一个会话 cookie 等等。

有这样的例子吗？

谢谢

编辑：

我不能使用 ASP.NET 的方式，因为我的数据库有员工的用户名和密码。ASP 创建自己的角色等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:12:07.613

首先，您应该在登录时设置[FormsAuthentication](http://msdn.microsoft.com/en-us/library/twk5762b.aspx) cookie。因此，在您的代码中，成功登录后，您可以使用以下命令设置 cookie：

```
FormsAuthentication.SetAuthCookie(theUsername, true); 
```

或者更好的是，您可以使用它来处理 cookie 和重定向：

```
FormsAuthentication.RedirectFromLoginPage(theUsername, true); 
```

（如果你想让 cookie 持久化，则为真）

您可以通过将 web.config 文件放在该文件夹中来保护 admin 文件夹：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authorization>
            <allow users="adminusername1,adminusername2"/>
            <deny users="*"/>
        </authorization>
    </system.web>
</configuration> 
```

现在，当有人点击该管理文件夹并且他们没有登录时，它会自动将他们发送到`login.aspx?ReturnUrl=admin.aspx`

要考虑的另一件事是实现您自己的[RoleProvider](http://msdn.microsoft.com/en-us/library/8fw7xh74%28v=vs.100%29.aspx)。您可能认为这不那么令人生畏。如果您需要将人员分配到角色（如管理员），那么这是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:50:44.650

您可以使用`HttpContext.Session`来保留会话变量。

当您将某些内容放入会话时，例如：

```
HttpContext.Current.Session["IsAuthenticated"] = "true" 
```

Asp.Net 会为你创建 cookie，所以你不需要关心它。cookie 将在会话结束时过期。您可以使用您的自定义登录方法并存储用户已通过身份验证的会话变量。然后在受限页面上您只需检查会话变量，例如：

```
string isAuthenticated = HttpContext.Current.Session["IsAuthenticated"] 
```

编辑：

如果您想使用 Asp.Net 授权并根据用户名限制访问，则：

```
<authorization>
    <allow users="John"/>
    <deny users="*"/>
</authorization> 
```

看看[Asp.Net 站点导航](http://msdn.microsoft.com/en-us/library/e468hxky%28v=vs.90%29.aspx)，您可以在其中为用户使用相同的访问规则。

编辑：

如果您想针对您的凭据数据库进行身份验证，那么 MikeSmithDev 建议的方式就是要走的路。[创建自定义 MembershipProvider](http://www.codeproject.com/Articles/13032/Custom-MembershipProvider-and-RoleProvider-Impleme)或使用[FormsAuthentication 方法](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication_methods.aspx)。

# sql - 如何在 SQLite 中转换 Unix 纪元时间

> ID：14629347
> 
> 赞同：45
> 
> 时间：2013-01-31T15:33:04.033
> 
> 标签：sql, sqlite, unix, epoch

您能帮我将 UNIX 纪元时间转换为`yyyy-mm-dd hh:mm:ss`SQLite 中的格式（24 小时）吗？（格林威治标准时间 + 7 将不胜感激）。

示例：从`1319017136629`到`Wednesday, October 19, 2011 4:38:56 PM GMT+7`。

p/s: 刚刚环顾四周，找到了解决方案：

```
SELECT datetime(1319017136629, 'unixepoch', 'localtime'); 
```

但我仍在寻找一种在 SQLite 中批量转换 UNIX 纪元时间的方法。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-31T16:21:29.617

要更改数据库中的值，请使用以下`UPDATE`命令：

```
UPDATE MyTable SET MyColumn = datetime(MyColumn, 'unixepoch', 'localtime') 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-01-14T02:03:50.573

`1319017136629`是 中的一个值`milliseconds`，它不是`UNIX`纪元时间；因此它必须除以`1000`整数并四舍五入`seconds`；只有这样`DATE()`，`DATETIME()`才会转换。

```
SELECT DATETIME(ROUND(dateColumn / 1000), 'unixepoch') AS isodate FROM tableName 
```

将数据库值转换为`localtime`是不幸的；输出转换的问题较少。

Y2038[问题](https://en.wikipedia.org/wiki/Year_2038_problem)可能已经值得考虑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-20T12:45:37.753

选择日期（轮（1601272453000 / 1000），'unixepoch'）

# opengl - 深度组件的 Cuda 渲染缓冲区互操作

> ID：14629349
> 
> 赞同：5
> 
> 时间：2013-01-31T15:33:08.883
> 
> 标签：opengl, cuda, fbo, depth-buffer

我要做的是使用 OpenGL 执行一些渲染，然后使用 CUDA 直接对渲染的 RGB 和深度组件执行一些只读后处理（计算），而不将数据复制到 PBO。

为此，我创建了一个 FBO，并在其上附加了两个 RBO（一个用于 RGBA，一个用于 DEPTH）。

然后，我使用 GL_RENDERBUFFER 作为参数为每个 RBO 调用 cudaGraphicsGLRegisterImage。对于颜色 RBO，cudaGraphicsGLRegisterImage 返回 cudaSuccess，但对于深度 RBO，我收到一个 cudaErrorInvalidValue。

我在论坛的某处读到，nVidia 目前不支持深度组件的 CUDA 渲染缓冲区互操作，尽管它在文档中很好地呈现。

我正在使用 CUDA Toolkit 5.0 并且我有一个 Quadro 2000 卡。

有人成功地做到了这一点，以及如何做到的？

以下是一些代码摘录：

```
glGenRenderbuffers(1, &rbo_color);
glBindRenderbuffer(GL_RENDERBUFFER, rbo_color);
glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA, WIDTH, HEIGHT);
glBindRenderbuffer(GL_RENDERBUFFER, 0);

if (cudaGraphicsGLRegisterImage(&resource_color, rbo_color, GL_RENDERBUFFER, cudaGraphicsMapFlagsReadOnly) != cudaSuccess)
    fprintf(stderr, "Error in registering rbo color with cuda\n");

glGenRenderbuffers(1, &rbo_depth);
glBindRenderbuffer(GL_RENDERBUFFER, rbo_depth);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT32F, WIDTH, HEIGHT);
glBindRenderbuffer(GL_RENDERBUFFER, 0);

if (cudaGraphicsGLRegisterImage(&resource_depth, rbo_depth, GL_RENDERBUFFER, cudaGraphicsMapFlagsReadOnly) != cudaSuccess)
    fprintf(stderr, "Error in registering rbo depth with cuda\n"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:33:47.537

我没有成功绑定深度缓冲区本身。解决此问题的一种方法是将深度像素值渲染到颜色缓冲区并像您一样绑定颜色缓冲区。您将需要编写自己的着色器来完成此操作。

# php - str_replace 无法正常工作

> ID：14629350
> 
> 赞同：0
> 
> 时间：2013-01-31T15:33:15.347
> 
> 标签：php

为什么不给出正确的退出代码？

我的完整代码：

```
<?php

$numA_m = "2";
$res = '["110","2","1"]';
$numA_s = json_decode($res);
if ($numA_m == 1) {
    $A_num_s = array("1", "2", "3", "4","110");
    $A_nam_s = array("egh", "guide", "irl", "tic", "all");
}
if ($numA_m == 2) {
    $A_num_s = array("1", "2","110");
    $A_nam_s = array("sub", "forg","all");
}
$Rsp = str_replace($A_num_s, $A_nam_s, $numA_s);
$Rsp_In = str_replace($A_nam_s, $A_num_s, $Rsp);
echo '<pre>';
print_r($Rsp);

echo '<p>';

echo '<pre>';
print_r($Rsp_In);
?> 
```

输出应该是：

> 数组（
> [0] => all
> [1] => forg
> [2] => sub
> ）
> 
> 数组（
> [0] => 110
> [1] => 2
> [2] => 1
> ）

但它是这样的：

> 数组
> (
> [0] => subsub0
> [1] = > forg
> [2] => sub
> )
> 数组
> (
> [0] => 110
> [1] => 2
> [2] => 1
> )

我该怎么办？

**演示： http:** [//phpfiddle.org/main/code/srj-k3d](http://phpfiddle.org/main/code/srj-k3d)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:48:40.037

You can try to use [array_replace()](http://www.php.net/manual/en/function.array-replace.php) like that: Bit more difficult to understand perhaps, but works ;)

```
$numA_m = "2";
$res = '["110","2","1"]';
$numA_s = json_decode($res);
if ($numA_m == 1) {
    $A_num_s = array("1", "2", "3", "4","110");
    $A_nam_s = array("egh", "guide", "irl", "tic", "all");
}
if ($numA_m == 2) {
    $A_num_s = array("1", "2","110");
    $A_nam_s = array("sub", "forg","all");
}

$Rsp = array_replace($numA_s, $A_num_s, array_reverse($A_nam_s));
$Rsp_In = array_replace($Rsp, $A_nam_s, array_reverse($A_num_s));

echo '<pre>';
print_r($Rsp);

echo '<p>';

echo '<pre>';
print_r($Rsp_In);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:46:41.057

`str_replace`按顺序替换，按顺序检查每个替换值的整个替换主题，例如：

[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

```
// Outputs F because A is replaced with B, then B is replaced with C, and so on...
// Finally E is replaced with F, because of left to right replacements.
$search  = array('A', 'B', 'C', 'D', 'E');
$replace = array('B', 'C', 'D', 'E', 'F');
$subject = 'A';
echo str_replace($search, $replace, $subject); 
```

因此，您需要做的就是在 1 之前替换 110，否则首先替换 110 中的 1：

`$A_num_s = array("110", "2", "1");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:43:41.937

这将输出所需的结果

```
$numA_m = "2";
$res = '["110","2","1"]';
$numA_s = json_decode($res);
if ($numA_m == 1) {
    $A_num_s = array("1", "2", "3", "4", "110");
    $A_nam_s = array("egh", "guide", "irl", "tic", "all");
}
if ($numA_m == 2) {
    $A_num_s = array("110", "2", "1"); // changed order
    $A_nam_s = array("all", "forg", "sub");
}
$count = 1;
$Rsp = str_replace($A_num_s, $A_nam_s, $numA_s, $count);
$Rsp_In = str_replace($A_nam_s, $A_num_s, $Rsp, $count);
echo '<pre>';
print_r($Rsp);

echo '<p>';

echo '<pre>';
print_r($Rsp_In); 
```

**解释：**

str_replace 按照您发送它们的顺序搜索字符串。**因此，如果在您的情况**下您正在搜索`1`and then `110`，它将替换到达.**`1``110`**

 **如果您替换第`110`一个，它将按预期替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:44:23.623

首先，`str_replace`工作正常。
您可以做的是替换数组中的顺序：

```
$A_num_s = array("110", "1", "2");
$A_nam_s = array("all", "sub", "forg"); 
```

在您的版本中，str_replace 将“110”视为两个 1（和一个 0）并用“sub”（“subsub0”）替换两者。

更改后的顺序将首先匹配“110”，因为按照您提供的顺序`str_replace`搜索您的模式 ( `$A_num_s`)。**

# jquery - 如果屏幕尺寸是这个或那个，运行查询功能

> ID：14629352
> 
> 赞同：0
> 
> 时间：2013-01-31T15:33:18.647
> 
> 标签：jquery, media-queries, bxslider

希望有人能帮忙。

我正在创建我的网站的响应版本，并且在使用特色工作滑块时遇到问题。它使用 bxSlider 插件。

我有以下功能非常棒，但是当 iPhone 处于横向模式时，我需要能够更改 slideWidth 选项。我已经尝试了所有我可以通过 CSS 进行的操作，但无济于事。阅读文档，它还指出水平滑块需要 slideWidth - 这是我的。

任何帮助，将不胜感激...

```
 $('.bxslider').bxSlider({
  minSlides: 1,
  maxSlides: 3,
  slideWidth: 310,
  slideMargin: 20,
  useCSS: false,
  hideControlOnEnd: true,
  infiniteLoop: false,
  easing: 'easeOutBounce',
  speed: 1000,
  nextSelector: '#slider-next',
  prevSelector: '#slider-prev',
  nextText: '>',
  prevText: '<',
  pager: false
}); 
```

* * *

请注意：我尝试了以下方法：

```
jQuery(document).ready(function ($) {

// Variable to detect window width.
var windowWidth = $(window).width();

// Trigger function for a certain window width
if (windowWidth<568) {
$('.bxslider').bxSlider({
      minSlides: 1,
      maxSlides: 3,
      slideWidth: XXX,
      slideMargin: 20,
      useCSS: false,
      hideControlOnEnd: true,
      infiniteLoop: false,
      easing: 'easeOutBounce',
      speed: 1000,
      nextSelector: '#slider-next',
      prevSelector: '#slider-prev',
      nextText: '>',
      prevText: '<',
      pager: false
    }); 
     }
}); 
```

但主要问题是我仍然需要在所有屏幕尺寸上运行该功能，只是需要更改 slideWidth 属性。当然有一种方法可以改变它以使其成为某种变量？我不确定这是否是正确的术语，我仍在学习 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:57:59.470

```
$(function(){
  var w = $(window).width();
  var x = // calculate box Slider width depending on w
  $('.bxslider').bxSlider({
    ...
    slideWidth: x,
    ...
  });
  $(window).resize(function(){
    var w = $(window).width();
    // whatever function to resize your slider if the window is resized (will work if the phone is turned)
}); 
```

# php - 将php数组转换为JSON文件

> ID：14629354
> 
> 赞同：0
> 
> 时间：2013-01-31T15:33:31.453
> 
> 标签：php, sql, json

我想从 php 函数（或直接从我的 BDD）创建一个 json 文件。

我有一个写在我的数据库 sql 中的 php 函数

这是我在我的数据库中写入的函数（它是 magento，但它有效）：

```
$data = array('image'=>$my_upload->file_copy,'shopid'=>$customerid,'newsid'=>1);
$model = Mage::getModel('newsimagestable/newsimagestable')->setData($data); 
```

Md 表 db_activity

```
shopid      newsid          imgid                    image
   7           1              1                     1.jpg
   7           1              2                     2.jpg
   7           1              3                     3.jpg 
```

并且知道我使用此功能将其转换为 Json：

```
$actArray = array();
    $activityAll = Mage::helper(eventdemo)->getactivitytest(7); //get my table db_activity

        foreach ($activityAll as $data){                
            array_push($actArray, "images:".$data->getData('image'),"thumb:".$data->getData('image'));              
        };

    file_put_contents('data.json',  stripslashes(json_encode($actArray))); 
```

而且我只能以这种格式获取 json 文件：

```
["images:1.jpg","thumb:1_m.jpg","images:2.jpg","thumb:2_m.jpg","images:3.jpg","thumb:3_m.jpg"] 
```

但我想要这种格式（所以我认为是一个包含多个条目的数组）：

```
[
{ "thumb": "image1_m.jpg", "image": "image1.jpg" },
{ "thumb": "image2_m.jpg", "image": "image2.jpg" }  ] 
```

那可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:36:15.180

代替

```
foreach ($activityAll as $data){                
            array_push($actArray, "images:".$data->getData('image'),"thumb:".$data->getData('image'));              
        }; 
```

你应该做

```
foreach ($activityAll as $data){                
            array_push($actArray, array("images" => $data->getData('image'), "thumb" => $data->getData('image')));              
        }; 
```

# python - 应用于多个文件或文件夹的 Python 代码

> ID：14629362
> 
> 赞同：0
> 
> 时间：2013-01-31T15:33:45.263
> 
> 标签：python, email

我对 Python 很陌生，我创建了一些简单的 Python 代码（如下）来打印（或返回）.eml 文件的正文、主题和电子邮件地址。这工作正常。但是，如何将此代码应用于 .eml 文件的文件夹？

```
import email

fp = open('C:\emlfiles\TEST_00000.eml')

msg = email.message_from_file(fp)

subject = msg.get('subject')
subject = str(subject)
fromAdd = msg.get('from')
fromAdd = str(fromAdd)
payload = msg.get_payload()
if type(payload) == type(list()) :
    payload = payload[0] 
if type(payload) != type('') :
    payload = str(payload)

print subhec + fromAdd + payload 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:35:46.667

看看[`os.walk`](http://docs.python.org/2/library/os.html#os.walk)，它做你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:37:59.170

使用以下命令将所有内容放入 for 循环中`os.listdir`：

```
import email

infolder = "C:\\emlfiles\\"
for infile in os.listdir(infolder):
    fp = open(os.path.join(infolder, infile))
    msg = email.message_from_file(fp)
    # etc 
```

也许更好的是将该代码包装在一个函数中，然后调用它：

```
def process_email(infile):
    fp = open(infile)
    msg = email.message_from_file(fp)
    subject = msg.get('subject')

infolder = "C:\\emlfiles\\"
for infile in os.listdir(infolder):
    process_email(os.path.join(infolder, infile)) 
```

# ios - iOS 5 核心图形内存峰值

> ID：14629363
> 
> 赞同：0
> 
> 时间：2013-01-31T15:33:50.330
> 
> 标签：ios, ios5, memory-leaks, core-graphics

我最近调整了我的应用程序以提高内存效率，并在 iOS5 上遇到了一个奇怪的内存问题。请注意，我的应用程序没有打开自动引用计数。首先，我将实时内存从 15Mb 降低到 10Mb，它在任何 iOS6 设备和 iOS6 模拟器上都运行良好。当我在 iOS5（iPad 或模拟器）上运行经过调整的应用程序时，它在启动时会在一秒钟内达到 >100Mb 的峰值，并且通常会终止。激增的内存纯粹是在 iOS 代码中发生的。

我附上了两个仪器屏幕截图——第一个显示尖峰，第二个显示导致它的 malloc 调用——注意右侧的堆栈跟踪。所有这些大型 malloc 调用都在代码的同一点。

我不知道是什么原因造成的。我已经阅读了几篇关于 Core Graphics 泄漏的帖子，堆栈跟踪显示了这一点。对于正在发生的事情，我最好的猜测是，以某种方式使应用程序更高效的更改触发了 Core Graphics 中的某些东西，使其想要使用（并泄漏）更多内存，但仅限于 iOS5。

任何关于可能是什么原因以及如何解决它的想法或见解将不胜感激。

![在此处输入图像描述](../Images/c47d44e49129e5d680e9c1409315225b.png) ![在此处输入图像描述](../Images/74fa6ba8a994b5f5fc3459413fbf6ecc.png)

# mysql - 第 406 行的 MySQL 错误 2006 (HY000)：MySQL 服务器已消失 - 即使在增加转储文件大小设置后也是如此

> ID：14629364
> 
> 赞同：3
> 
> 时间：2013-01-31T15:33:51.927
> 
> 标签：mysql

我正在尝试将数据库从 serverA 移动到 serverB。我使用以下命令创建了一个 mysql 转储：

```
mysqldump -u root -p -c --add-drop-table --add-locks --quick --lock-tables mydatabase > /var/log/mydatabaseJan31.sql 
```

然后在 serverB 上，我尝试通过执行以下操作导入此数据：

```
mysql -u root -p mydatabase < /tmp/mydatabaseJan31.sql 
```

我几乎立即在第 408 行收到错误“ERROR 2006 (HY000): MySQL server has gone away”。我在 stackoverflow 上阅读了有关相同错误消息的其他帖子，并尝试了以下方法：

1.  修改 my.cnf 以包括：

    [mysqldump]
    快速
    max_allowed_pa​​cket = 64M

然后我重新启动了mysql。顺便说一下，文件大小实际上只有5.2mb

1.  尝试使用 phpmyadmin 创建转储文件。
2.  我认为这不是超时问题，因为它在导入过程中 2 秒后死亡。
3.  我打开了 mysql 转储文件并检查了它正在轰炸的行号，它是从第 43 行开始的大量插入语句的一部分。我不确定它是否相关，但第 406 行以不完整的开头细绳：

    第 402 行----> (341,1996,12,'

    第 403 行---->front'),(341,1996,12,'interior'),(341,1996,12,'rear'),(341,1996,13,'front'),(341, 1996,13,'内部'),(341,1996,13,'后部'),(341,1996,14,'前部')

但是话虽如此，所有前面插入的记录看起来都是一样的......所以我认为这也不是问题所在。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:45:54.003

`max_allowed_packet`需要在客户端（mysql）和服务器（mysqld）上都设置才能生效。由于处理转储时会出现问题，因此为 mysqldump 设置它不会有任何效果。

# c - 文件 IO 性能 C

> ID：14629369
> 
> 赞同：5
> 
> 时间：2013-01-31T15:34:22.637
> 
> 标签：c, io

我对文件 IO（C 语言）及其性能问题有疑问。

我有一个执行大量文件 I/O 的应用程序（在其生命周期内约 3-6 小时，大约 0.5-0.75TB，主要是文件输出）。目前，我的应用程序将`sprintf()`所有内容转换为 char 字符串，并在行`write()`s 的末尾转换为 file_descriptor。我的字符串长度为 1024 个字符，但可以在 64 到 1024 之间变化。无论如何。

**问题是：** 在执行
? 或者，假设缓冲由 处理，直接完全跳过文件是否更有意义？`sprintf()``write()``sprintf()``write()``write()`

我想到了一些东西，但不确定它是否真的会在性能方面完成任何事情：
如果我有一个结构来存储字符串、数字和字符串的各个部分，并改为执行结构的 mem_copy 怎么办？我猜类似于二进制写入？

我正在尝试实现“缓冲”方法或任何可以最大化性能的方法。后者是我需要使用该文件进行进一步处理。有什么建议么？

**编辑**
我做了一些简单的性能比较，`printf(); + redir`我`sprintf(); write();`
只是将~20GB复制到一个文件中。

```
char string[1024];

for(i=0;i<(1<<20)*20;i++)
  printf("%s",string);

~/tmp/tests$ time ./printf.out > testing
real   2m22.101s
user   0m28.214s
sys    0m29.294s 
```

相对于：

```
char string14[256]; ...etc
for(i=0;1<<(1<<20)*20;i++){
  sprintf(dst_string,"%s%s",dst_string, string14);
  sprintf(dst_string,"%s%s",dst_string, string24);
  sprintf(dst_string,"%s%s",dst_string, string34);
  sprintf(dst_string,"%s%s",dst_string, string44);
  write(fd, dst_string, 1024);
}

~/tmp/tests$ time ./write.out 

real   1m48.206s
user   0m58.544s
sys    0m41.079s 
```

多个sprintf()s的原因是模拟copy->buffer然后写buffer。时间（无论如何都是真实的）并不像某些评论所暗示的那样微不足道。当然这是一个简单的例子，也许在计算 + IO 的方案中可能不会。

在 printf 示例中我有点困惑，额外的时间去哪儿了？用户+系统不加起来是真实的，他们至少不应该在球场上吗？因为缺少一个完整的 1:30m。

该测试是否显示任何结论？sprintf + write > 简单地打印+redir？

无论如何，谢谢大家的意见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T16:36:12.487

当我在我的机器上进行一些测试时，我从不太现代的硬件中获得了大约 60MB/s 的速度。那是 3.6GB/分钟或每小时 216GB（所以 3 小时产生大约 640GB）。我希望在您的应用程序中花费的时间主要是“等待磁盘”，在这种情况下，您使用什么 IO 方法绝对没有区别。

但就像所有性能问题一样，这不是您可以通过在互联网上询问或在书中查找或其他任何方式找到的答案。它必须在您关注的系统上进行测量。将我的旧硬盘更换为一些配置良好的 RAID，你会获得更好的性能 [如果它是正确的 RAID 系统 - 有些比单个磁盘慢，因为目的不是加快访问速度，而是确保可靠性]。

您还可以进行一些比较： 1\. 将软件的输出重定向到 /dev/null - 检查现在运行代码需要多长时间。如果它比您写入文件时快 10-100 倍，那么您知道您现在的写入方式或其他方法根本不会产生任何影响。2\. 使用 (largenumber * 4KB = 典型文件大小) 创建类似大小的文件`dd if=/dev/zero of=yourfile bs=4k count=largenumber`- 如果您的应用程序正在写入多个文件，则编写一个脚本来写入多个类似的不同文件）。如果这比您的应用程序快得多，那么通过改变您从应用程序输出的方式可以获得一些好处。

如果上述两件事中的任何一件表明有可能获得收益，那么编写一些基准测试，以您希望应用程序工作的相同方式产生大量输出，看看有什么不同。一定要回来问问题。但我的猜测是，无论您对输出机制做什么，您的应用程序都不会运行得更快或更慢，因为这完全取决于“磁盘可以写入多快”。

# android - 放大和缩小 ImageView 留下空白区域并裁剪图像

> ID：14629375
> 
> 赞同：0
> 
> 时间：2013-01-31T15:34:41.080
> 
> 标签：android, android-imageview

我正在调整 ImageView 中的图像大小，但调整大小后 ImageView 大小保持不变，所以如果我缩小我会看到黑色区域，如果我放大图像会被裁剪。如何自动调整 ImageView 的大小来包装我的图像？问题是图像的大小也保持不变。我的图像位于可以滚动 X 和 Y 方向的自定义滚动视图中。请不要让我参考 ImageView 缩放示例，因为我看过它们。

```
ImageView map = (ImageView) findViewById(R.id.imageViewMap);
Bitmap mapIm = BitmapFactory.decodeResource(getResources(),R.drawable.myMap);
map.setImageBitmap(mapIm); 
final Matrix zoommatrix = new Matrix();

    zoomOut.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

             float[] centerpoint = {map.getWidth()/2.0f, map.getHeight()/2.0f};

             zoommatrix.postScale(0.9f, 0.9f, centerpoint[0], centerpoint[1]);
             map.setImageMatrix(zoommatrix);

        }
    });

    zoomIn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

             float[] centerpoint = {map.getWidth()/2.0f, map.getHeight()/2.0f};

             zoommatrix.postScale(1.1f, 1.1f, centerpoint[0], centerpoint[1]);
             map.setImageMatrix(zoommatrix);

             Log.d(TAG, "Width: "+map.getWidth()+" Height: "+map.getHeight()); //always the same
             Log.d(TAG, "Width: "+mapIm.getWidth()+" Height: "+mapIm.getHeight()); //always the same

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:38:58.100

图像处理后尝试 v.invalidate()

# c++ - 模拟执行时间的进度条

> ID：14629379
> 
> 赞同：0
> 
> 时间：2013-01-31T15:34:48.027
> 
> 标签：c++, qt, user-interface, progress-bar

> **可能重复：**
> [编码进度条建议](https://stackoverflow.com/questions/3658435/coding-progress-bar-advice)

我用 C++ 编写了一个可以编码和解码纯文本文件（压缩和解压缩）的应用程序。现在我正在使用 Qt 创建 gui，并希望在用户运行压缩时添加一个显示压缩进度的进度条，这类似于 winrar 或一般设置应用程序。是否可以创建表示当前执行时间/总执行时间百分比的进度条？或者我可以像显示下载状态的进度条一样做一个近似值。创建此类进度条的一般方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:38:17.477

一般的方法是让一个线程来完成工作，而另一个线程使 UI 保持最新。

然后，您必须定义一种机制（以最简单的形式，一个全局变量），使用该机制更新 UI 的线程可以了解已完成工作的百分比。然后，您可以绘制适当的小部件等。

通常，使用（至少）两个线程，您需要的不仅仅是共享变量。更新 UI 的线程必须能够完全理解正在发生的事情、可用的新信息、正在采取的操作等。请注意，实际上是*另一个线程*在做任何有用的事情。UI线程将是观察程序状态为用户绘制一些东西的人。

完成这项工作的线程应该能够估计其进度。在您的情况下，例如通过`number_of_bytes_decoded / total_file_size`. 有时，无法预测进度，因此您只需将进度更新为“flash”或其他任何内容，表明正在取得进展，但您无法给出百分比。例如，当您看到进度条内的某些东西向左和向右移动时，就会发生这种情况。

# ios - 在 UISplitView 中连接主视图和详细视图

> ID：14629380
> 
> 赞同：1
> 
> 时间：2013-01-31T15:34:51.033
> 
> 标签：ios, uisplitviewcontroller, uisplitview

我无法让我的拆分视图应用程序正常工作。当点击主视图中的一行时，我无法在详细视图中显示任何内容。这是我现在所拥有的。在这一点上我完全不知所措，因为我无法弄清楚这一点。我只需要指出正确的方向。

**应用委托.h**

```
//
//  KFBAppDelegate.h
//  KYFB
//
//  Created by KFB on 1/15/13.
//  Copyright (c) 2013 com.kfb. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface KFBAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) UISplitViewController *splitViewController;

@end 
```

**AppDelegate.m**

```
//
//  KFBAppDelegate.m
//  KYFB
//
//  Created by KFB on 1/15/13.
//  Copyright (c) 2013 com.kfb. All rights reserved.
//

#import "KFBAppDelegate.h"
#import "KFBMasterViewController.h"
#import "KFBDetailViewController.h"

@implementation KFBAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    KFBMasterViewController *masterViewController = [[KFBMasterViewController alloc] initWithNibName:@"KFBMasterViewController" bundle:nil];
    UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

    KFBDetailViewController *detailViewController = [[KFBDetailViewController alloc] initWithNibName:@"KFBDetailViewController" bundle:nil];
    UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

    masterViewController.detailViewController = detailViewController;

    self.splitViewController = [[UISplitViewController alloc] init];
    self.splitViewController.delegate = detailViewController;
    self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];
    self.window.rootViewController = self.splitViewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

**主视图控制器.h**

```
//
//  KFBMasterViewController.h
//  KYFB
//
//  Created by KFB on 1/15/13.
//  Copyright (c) 2013 com.kfb. All rights reserved.
//

#import <UIKit/UIKit.h>

@class KFBDetailViewController;

@interface KFBMasterViewController : UITableViewController

@property (strong, nonatomic) KFBDetailViewController *detailViewController;

@end 
```

**主视图控制器.m**

```
//
//  KFBMasterViewController.m
//  KYFB
//
//  Created by KFB on 1/15/13.
//  Copyright (c) 2013 com.kfb. All rights reserved.
//

#import "KFBMasterViewController.h"
#import "KFBDetailViewController.h"
#import "SocialNetworks.h"

@interface KFBMasterViewController () {
    NSMutableArray *_objects;
    NSMutableArray *menu;
}
@end

@implementation KFBMasterViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Master", @"Master");
        self.clearsSelectionOnViewWillAppear = NO;
        self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    // self.navigationItem.leftBarButtonItem = self.editButtonItem;

    // UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    // self.navigationItem.rightBarButtonItem = addButton;

    menu = [NSMutableArray arrayWithObjects:@"Home", @"Public Affairs", @"Action Alerts", @"Market Updates", @"Ag Stories", @"KFB News", @"Member Benefits", @"Monthly Video", @"Photos", @"Social Media", @"About Us", @"Contact Us", @"KYFB.com", nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)insertNewObject:(id)sender
{
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    }
    [_objects insertObject:[NSDate date] atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return menu.count;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // NSDate *object = _objects[indexPath.row];
    // cell.textLabel.text = [object description];
    cell.textLabel.text = [menu objectAtIndex:indexPath.row];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_objects removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // NSDate *object = _objects[indexPath.row];
    // self.detailViewController.detailItem = object;

    // KFBDetailViewController *detailViewController = (KFBDetailViewController*)self.splitViewController.delegate;

    // UIViewController <SubstitutableDetailViewController> *detailViewController = nil;

    if (indexPath.row == 9)
    {
        if (!self.detailViewController)
        {
            self.detailViewController = (KFBDetailViewController*)[[SocialNetworks alloc]initWithNibName:@"SocialNetworks" bundle:nil];
        }
        [self.navigationController pushViewController:self.detailViewController animated:YES];
    }
}

@end 
```

**社交网络.h**

```
//
//  SocialNetworks.h
//  KFBNewsroom
//
//  Created by Adam Rayborn on 10/18/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "KFBDetailViewController.h"

@interface SocialNetworks : UIViewController <UITableViewDelegate, UITableViewDataSource, UISplitViewControllerDelegate>

@end 
```

**社交网络.m**

```
//
//  SocialNetworks.m
//  KFBNewsroom
//
//  Created by Adam Rayborn on 10/18/12.
//  Copyright (c) 2012 com.kfb. All rights reserved.
//

#import "SocialNetworks.h"

@interface SocialNetworks ()

@end

@implementation SocialNetworks
{
    NSMutableArray *mbTableData;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    mbTableData = [NSMutableArray arrayWithObjects:@"Facebook", @"Twitter", @"YouTube", nil];
    self.title = @"Social Networks";
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [mbTableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *mbTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:mbTableIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:mbTableIdentifier];
        cell.textLabel.font=[UIFont systemFontOfSize:16.0];
    }

    // cell.backgroundView = [[CustomCellBackground alloc] init];
    // cell.selectedBackgroundView = [[CustomCellBackground alloc] init];
    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.textLabel.highlightedTextColor = [UIColor darkGrayColor];

    cell.textLabel.text = [mbTableData objectAtIndex:indexPath.row];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    /*
    if (indexPath.row == 0)
    {
        Facebook *facebook = [[Facebook alloc] initWithNibName:@"Facebook" bundle:[NSBundle  mainBundle]];
        [self.navigationController pushViewController:facebook animated:YES];
    }
    else if (indexPath.row == 1)
    {
        Twitter *twitter = [[Twitter alloc] initWithNibName:@"Twitter" bundle:[NSBundle  mainBundle]];
        [self.navigationController pushViewController:twitter animated:YES];
    }
    else if (indexPath.row == 2)
    {
        YouTube *youTube = [[YouTube alloc] initWithNibName:@"YouTube" bundle:[NSBundle  mainBundle]];
        [self.navigationController pushViewController:youTube animated:YES];
    }
    */

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:14:19.873

从我在您的代码中看到的内容来看，在您的`MasterViewController`课程中，您似乎正在将 推`DetailViewController`送到您`MasterViewController`的导航控制器。

我很确定这不是你想要做的。试试这个：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 9)
    {
        [((UINavigationController *)[self.splitViewController.viewControllers lastObject]) pushViewController:[[SocialNetworks alloc]initWithNibName:@"SocialNetworks" bundle:nil] animated:YES];
    }
} 
```

# html - @font-face 不加载字体

> ID：14629382
> 
> 赞同：13
> 
> 时间：2013-01-31T15:35:03.713
> 
> 标签：html, css, font-face

我正在尝试使用@font-face，但由于某种原因它无法工作（IE9、Chrome 和 Firefox）。我确保在加载字体时指向正确的目录，但它似乎仍然不起作用。

这是我的代码：

```
@font-face{
font-family: 'test';
src: url('../fonts/FontName.ttf'),
         url('../fonts/FontName.eot');
font-weight: normal;
font-style: normal;
} 
```

并称它为：

```
#header{
text-align:left;
padding: 10px;
font-family:test;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T21:04:45.040

Internet Explorer 使用您在代码中未使用的字体的 .woff 版本，而不是使用 .eot 版本。我使用[fontsquirrel的](http://www.fontsquirrel.com/)[@font-face 生成器](http://www.fontsquirrel.com/fontface/generator)工具来获取所有不同的字体变化

输出应如下所示：

```
@font-face{
font-family: 'test';
src: url('../fonts/FontName.eot'),
     url('../fonts/FontName.eot?#iefix') format('embedded-opentype'),
     url('../fonts/FontName.woff') format('woff'),
     url('../fonts/FontName.ttf') format('truetype');
font-weight: normal;
font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T21:09:05.957

除了人们一直在谈论不同类型的字体（以及将`format()`元素与. 由于您只指定了正常粗细/正常样式的字体，因此如果将其变为粗体，则该字体将不会显示。`url()``#header``font-weight: bold`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:42:36.943

通过 FontSquirrel 生成器运行您的字体，它将它们转换为不同浏览器支持的各种格式。

它还应该为您提供可以使用的 CSS 块，只需调整字体文件的路径即可。

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:36:36.927

试试这个：

```
@font-face{
font-family: 'test';
src: url('../fonts/Minecraft.ttf'),
         url('../fonts/minecraft.eot');
font-weight: normal;
font-style: normal;
} 
```

在您的代码中，您有两个文件夹：字体和字体，在我的示例中，我使用了字体

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2018-07-30T10:28:41.823

轻松的游戏。加载它时，您应该在“ ”之间输出名称：

字体系列：'测试'；

这肯定会奏效。

# java - 如何存储地图 > 使用 JPA

> ID：14629389
> 
> 赞同：5
> 
> 时间：2013-01-31T15:35:20.887
> 
> 标签：java, hibernate, jpa, map

我正在尝试存储一个`Map<String, List<String>>`；使用 JPA。

我的实体看起来像：

```
@Entity
@Table(name = "Profiles_table")
public class Profiles {

    @Id
    @Column(name = "profile_ID", updatable = false, nullable = false)
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;

    private final HashMap<String, List<String>> AllProfiles;
    ...
} 
```

我已经为地图尝试了很多设置，但它不起作用......

我尝试的最后一个：

```
@ElementCollection
@MapKeyColumn(name = "Profil")
@Column(name = "Permissions")
@CollectionTable(name = "Profiles_permissions", joinColumns = @JoinColumn(name = "profile_ID")) 
```

抛出以下异常：

```
org.hibernate.AnnotationException: Illegal attempt to map a non collection as a
@OneToMany, @ManyToMany or @CollectionOfElements: [...]Profiles.AllProfiles 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:01:03.990

字符串不是实体，因此您不应该使用@OneToMany 等...

你试过这个：

```
@CollectionOfElements
private Map<String, List<String>> allProfiles; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:13:09.873

不是一个真正的答案，但这是我做的方式。

我将第二级集合存储为 blob。

```
@Entity
@Table(name = "Profiles_table")
public class Profiles {

@Id
@Column(name = "profile_ID", updatable = false, nullable = false)
@GeneratedValue(strategy = GenerationType.AUTO)
private int                                 id;

@Column(length = 16777210)
private final HashMap<String, Set<String>>  AllProfiles; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:44:58.007

您是否尝试过将 AllProfiles 声明为接口类型（比如说 Map）？注释 ConcurrentHashMap 时，在休眠中检查[“非法尝试将非集合映射为 @OneToMany、@ManyToMany 或 @CollectionOfElements”](https://stackoverflow.com/questions/8169196/illegal-attempt-to-map-a-non-collection-as-a-onetomany-manytomany-or-collec)

# html - css 表格单元格的宽度太大

> ID：14629393
> 
> 赞同：1
> 
> 时间：2013-01-31T15:35:40.843
> 
> 标签：html, css

我有一个看起来像这样的表：

```
+------------+---------------------------------+-----------------------+
|BUTTON      |            Text                 |BUTTON BUTTON          |
+------------+---------------------------------+-----------------------+ 
```

我也希望它看起来像这样：

```
+------+---------------------------------+-------------+
|BUTTON|            Text                 |BUTTON BUTTON|
+------+---------------------------------+-------------+ 
```

即，我希望外列根据其内容尽可能宽。我希望内部内容（按钮）彼此相邻排列？

...到目前为止，我最好的想法是在外列上设置 1px 宽度。但由于按钮是浮动的，它最终看起来像这样：

```
+------+---------------------------------+------+
|BUTTON|            Text                 |BUTTON|
|      |                                 |BUTTON|
+------+---------------------------------+------+ 
```

在 jsbin 上看到这个尝试：http: [//jsbin.com/orayoy/1/edit](http://jsbin.com/orayoy/1/edit)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:48:43.423

```
<td style="white-space: nowrap; width: 1px;">...</td> 
```

On the 1st and 3rd columns. You MIGHT have to use a `&nbsp;` between the buttons in the 3rd col, not positive.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:46:19.220

如果将表格宽度设置为“自动”，则表格的宽度应基于内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:43:53.000

示例：http: [//jsbin.com/orayoy/8/edit](http://jsbin.com/orayoy/8/edit)

```
#box {
    display: table;
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
}
#a {
    display: table-cell;
    background-color: lime;
}
#b {
    display: table-cell;
    background-color: blue;
}
#c {
    width: 1px;
    white-space: nowrap;
    display: table-cell;
    background-color: red;
}
#c1 {
    display: inline-block;
    height: 100%;
    background-color: pink;
}
#c2 {
    display: inline-block;
    height: 100%;
    background-color: pink;

} 
```

# matlab - 如何从 fmincon 调用的函数返回多个输出？

> ID：14629394
> 
> 赞同：1
> 
> 时间：2013-01-31T15:35:41.467
> 
> 标签：matlab

我想通过以下方式最小化一个功能`fmincon`：

```
[param, fval]=fmincon(@(param) functionfile(param, additional inputs), ...); 
```

但是，除了最小的参数和函数值之外，我还想从调用的函数中取回一些其他的东西`fmincon`。

我不想使用全局变量。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:00:40.623

一个问题是`fmincon`在迭代过程中一遍又一遍地调用你的函数。所以你应该指定，当你想要你的东西返回时，特别是，如果它改变了`params`

如果您想要返回的东西是一个固定值 - 您应该在额外的函数调用之前或之后要求它。

如果你的东西只是固定数字，你可以将它们包含在函数的输出中，这样它们就会出现在`fval`. 但是，这样做会导致性能下降。

# jquery - jQuery Validate插件ignoreTitle在单个字段上？

> ID：14629395
> 
> 赞同：0
> 
> 时间：2013-01-31T15:35:43.013
> 
> 标签：jquery, html, jquery-validate

我知道您可以使用以下代码忽略标题属性作为表单的错误消息：

```
$("#myForm").validate({
  ignoreTitle:true
}); 
```

但是，我想知道这是否可以针对单个字段完成。我问的原因是因为我想让我的一个字段返回包含 HTML 的消息，而不仅仅是字符串消息。

有没有办法有条件地将 HTML 放入`title`属性中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:12:56.197

> Quote: 有什么方法可以有条件地将HTML 放在标题属性中？

不，那里没有。`messages`但是您可以在该字段的选项中指定自定义消息。

```
$(document).ready(function(){
    $('#myform').validate({
        //  your other rules and/or options
        messages: {
            myfieldname: {
                myrule: "this is my <b>custom</b> message"
            }
        }
    });
}); 
```

（是的，看起来 HTML 是允许的）

**工作演示：http:** [//jsfiddle.net/4KGjD/](http://jsfiddle.net/4KGjD/)

[请参阅文档。](http://docs.jquery.com/Plugins/Validation/validate#options)

> **messages** , *Options, Default：所用方法的默认消息*
> 
> 定义自定义消息的键/值对。键是元素的名称，值是要为该元素显示的消息。可以使用包含每个规则的特定消息的另一个映射来代替普通消息。覆盖元素的标题属性或方法的默认消息（按此顺序）。每条消息都可以是字符串或回调。回调在验证器的范围内被调用，规则的参数作为第一个参数，元素作为第二个参数，它必须返回一个字符串以显示为消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:19:01.160

**我意识到在我的情况下**，在验证之前删除`title`属性并在出现错误时将其添加回来可能更简单。

所以这是我使用的 Javascript 的总体思路：

```
//BEFORE validation, remove title attribute:
var password=$('#myForm).find('input[type=password]');
var title=password.attr('title');
password.removeAttr('title');

//If there is an error, add back the title attribute 
password.attr('title', title); 
```

这是HTML：

```
<input id="password" title='Password must be at least 8 characters, 1 number, 1 upper and 1 lower case letters'  placeholder='At least 8 chars, 1 num, 1 upper'
name="password" type="password" />
<div class='error'>
<ul id='passwordError' style='display:none'>
    <li>Password must be at least:</li>
    <li> 8 characters </li>
    <li> 1 upper, 1 lower case letter</li>
    <li> 1 number</li>  
</ul>               
</div> 
```

# c# - 使用基于接口作为合同的对象属性从/映射到字典的最佳方法是什么？

> ID：14629397
> 
> 赞同：1
> 
> 时间：2013-01-31T15:35:53.383
> 
> 标签：c#, silverlight, automapper, system.reflection, impromptu-interface

我正在开发一个非常动态的 Silverlight 应用程序，其中视图模型是动态模型。WCF 服务返回包含足够信息（TableName 属性和包含实体的 Dictionary[] 数组）的 Response 对象。

所以，假设我有一个实体（字典）和一些视图模型实例，它是任何类型的对象。字典的键作为属性名称，显然，该值将用于设置视图模型中的属性值。我需要将此字典中的值映射到动态视图模型的值，反之亦然。为了对这个映射有一些限制，我创建了接口来验证字典的值，所以如果值属性名在合同中定义，我只获取/设置值。

我知道鸭子类型、动态代理、对象映射器，并且知道如何使用反射。

我开始寻找一些可以使这项任务变得简单的工具或框架。所以我找到了[Impromptu-Interface](http://code.google.com/p/impromptu-interface)。我正在尝试使用 Impromptu-interface 来做到这一点：

```
 public static TContract MapFromDictionary<TContract>(object bindingModel, Dictionary<string, object> data) where TContract : class {
  var proxy = new ImpromptuDictionary(data).ActLike<TContract>();
  var properties = Impromptu.GetMemberNames(proxy);
  foreach (var propertyName in properties) {
    object value = Impromptu.InvokeGet(proxy, propertyName);
    Impromptu.InvokeSet(bindingModel, propertyName, value);
  }
  return bindingModel.ActLike<TContract>();
} 
```

奇迹般有效。

和反向映射：

```
 public static Dictionary<string, object> MapToDictionary<TContract>(object source) where TContract : class {
  var proxy = source.ActLike<TContract>();
  var result = new Dictionary<string, object>();
  var properties = Impromptu.GetMemberNames(proxy);

  foreach (var propertyName in properties) {
    object value = Impromptu.InvokeGet(proxy, propertyName);
    result.Add(propertyName, value);
  }

  return result;
} 
```

问题是：有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:48:39.897

You should be able to just use LINQs ToDictionary method instead of the foreach. For a collection, it just takes a lambda that shows it how to get a key.

# javascript - 当 dataType 设置为 JSONP 时读取 JSON 响应

> ID：14629399
> 
> 赞同：4
> 
> 时间：2013-01-31T15:35:59.680
> 
> 标签：javascript, jquery, ajax, cross-domain, jsonp

我正在尝试发出 JSONP 请求以允许跨域。情况是我的服务器不处理 JSONP 请求，它将此请求理解为 JSON 并以 JSON 对象作为响应：`{result: 1}`

这是我的ajax请求：

```
jQuery.ajax({
    type : 'POST',
    url : "https://example.com/addUser",
    data : {
        firstName : 'firstName',
        lastName : 'lastName',
        email : 'email@yopmail.com'
    },
    crossDomain : true,
    jsonpCallback: "jsonpCallback",
    success : function(data) {
        alert(data);
    },
    complete : function(jqXHR, textStatus) {
                //can do something here
    },
    error : function (xhr, textStatus, errorThrown) {
        if(errorThrown=="jsonpCallback was not called") {
                console.log('caught it!');
        }
            },
    dataType : 'jsonp'
}); 
```

来自窗口控制台的读数：

```
Resource interpreted as Script but transferred with MIME type text/json: "https://example.com/addUser…Name=firstName&lastName=lastName&email=email%40yopmail.com&_=1359646137496".

Uncaught SyntaxError: Unexpected token : 

caught it! 
```

正如预期的那样，它抛出 parseerror 异常，我尝试处理它。但我的问题是，既然浏览器实际上得到了响应`{result:1}`，有没有办法可以解析它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T06:29:09.527

使用数据类型：'json'

```
$.ajax({
 url: getinstruments,
  dataType: 'json',
  success: function(data) {
  alert (data.firstName);
}
}); 
```

# jquery - 通过 Ajax 加载的内容内部的 DOM 更改

> ID：14629400
> 
> 赞同：0
> 
> 时间：2013-01-31T15:36:02.967
> 
> 标签：jquery

我正在通过 jQuery Ajax 加载一堆内容，现在我想在这个加载的内容中更改一个 img src 属性。

使用`.click`显然不起作用，以针对我使用的 Ajax 加载的内容`.on`：

```
$("#user_list").on('click','.block_user', function(e) {
    e.preventDefault();
    $(this).attr("src", "path_to_img_and_name.png");
}); 
```

这工作得很好。图像被替换，当我把这个更改放在一个**新**的jquery ajax 调用中时，我的问题就出现了：

```
$("#user_list").on('click','.block_user', function(e) {
    e.preventDefault();

    var bstatus=$(this).attr("bstatus"),
    user_id=$(this).attr("user_id");

    $.ajax({
        url: 'main/change_user_status',
        data: {
            bstatus: bstatus,
            user_id: user_id
        },
        type:'POST',
        dataType: 'json',
        success: function(output){
            $(this).attr("src", "images/"+output+"_block_user.png");
            $(this).attr("bstatus", output);
        }
    });
}); 
```

这根本行不通。

*   AJAX 调用转成功。
*   范围是正确的，我的 img 的路径也是正确的。
*   仅当我的 click 函数有 AJAX 调用时才会发生这种情况

似乎原始内容正在以某种方式重新加载，有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:39:24.213

您的问题是 $(this) 选择器的范围。你可以使用这样的东西

```
$("#user_list").on('click','.block_user', function(e) {
e.preventDefault();

var bstatus=$(this).attr("bstatus"),
user_id=$(this).attr("user_id");

var elem = $(this)

$.ajax({
    url: 'main/change_user_status',
    data: {
        bstatus: bstatus,
        user_id: user_id
    },
    type:'POST',
    dataType: 'json',
    success: function(output){
        elem.attr("src", "images/"+output+"_block_user.png");
        elem.attr("bstatus", output);
    }
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:41:34.670

使用决定回调内部值的`context`属性：`$.ajax()``this``success`

```
$.ajax({
    url: 'main/change_user_status',
    context: this, // here 'this' refers to the #user_list that was clicked
    ...
    success: function(output) {
        // here 'this' refers to what we set as 'context'
        $(this).attr("src", "images/"+output+"_block_user.png");
        $(this).attr("bstatus", output);
    }
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) - 向下滚动一点阅读`context`

# octave - 如何将一组点转换为矩阵

> ID：14629404
> 
> 赞同：1
> 
> 时间：2013-01-31T15:36:26.347
> 
> 标签：octave

我有一个矩阵，所以每一列都包含一个点的坐标。说我有这些观点：

```
p1=(1,1)
p2=(1,2)
p3=(2,3) 
```

那么矩阵将如下所示：

```
1 1 0
0 0 1
0 0 0 
```

所有坐标都是非负的，但它们是无理的。我将坐标乘以 10^15 倍（倍频程的最大精度）并将矩阵传递给以下函数：

```
function MAT = transfer(pairs)
  for i = 1:length(pairs)
      x = round(pairs(i,1));
      y = round(pairs(i,2));
      MAT(x,y) = true;
  end
end 
```

不幸的是，我得到一个错误 - 下标索引必须是正整数或逻辑。我不知道问题出在哪里，因为我将它们四舍五入，它们是积极的。如果有人可以帮助我找到问题，或者提供另一种转换方式，我会很高兴，我将不胜感激。
沙约尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:42:21.600

您的某些坐标可能会四舍五入为零。这是您将得到该错误的一种方式。
我会检查四舍五入后是否有任何成对的值为零。

我看到的另一个问题是你可以生成一个 10^15 x 10^15 的密集矩阵。而不是 for 循环，我建议使用稀疏矩阵来生成 MAT。例如

```
MAT = sparse(round(pairs(:, 1)), round(pairs(:, 2)), true(rows(pairs), 1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:18:06.750

这里的问题很简单。Octave 的矩阵存储为向量。虽然您使用的一维索引在倍频程的最大精度范围内，但它是一个二维矩阵，最终条目的真实索引将是 10^30 的数量级，太大了。

尝试使用较小的乘数。也许是 10^7，而不是 10^15。不过，您可能仍然会用完空间，所以我还建议使用稀疏矩阵。

# c# - 如何在开始菜单顶部制作自己的应用程序？

> ID：14629406
> 
> 赞同：13
> 
> 时间：2013-01-31T15:36:30.837
> 
> 标签：c#, winforms, windows-8

我用 C# 语言 (.net) 编写了一个小型桌面应用程序（主窗体）。而且我想让我的应用程序位于开始菜单（Windows 8）的顶部，就像“camtasia studio screenrecoder”一样。

查看我想要的小应用程序的屏幕截图。

![在此处输入图像描述](../Images/528f7f9c4242cdbfd6b6dd49de5a29ad.png)

我必须在我的应用程序中添加什么代码？

注意：我尝试设置`topMost = true`, 但这不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T20:38:09.383

If you want a window on top of Metro, you need it to declare accessibility. Here are the key points:

1.  The application must demand uiAccess (app.manifest)

2.  The application must assert “topmost” window positioning (either in Win32/SetWindowPos or WinForms/WPF’s “Topmost” property, programmatically or otherwise)

3.  Without making changes to the group policy setting, it must be installed to some trusted location [C:\Windows, C:\Program Files, C:\Program Files (x86)].

a. Note: If you want to be able to run it out of an arbitrary location, you must disable the security setting: “User Account Control: Only elevate UIAccess applications that are installed in secure locations”.

b. Note2: This is the same as setting HKLM\Software\Microsoft\Windows\CurrentVersion\Policies\System\ValidateAdminCodeSignatures to 0

1.  Said application cannot be ran in the debugger

2.  If it’s a .NET application

a. The manifest must be embedded in a post-build step

b. The application must have “delayed signing” (meaning it cannot be ran from the built-in debugger, although you can build and attach – this is what Microsoft does)

1.  The application must be signed with a trusted certificate.

2.  Said trusted certificate must be installed to the Trusted Root Certificate Authority (this is important! It must not just simply installed)

For more info see: [http://msdn.microsoft.com/en-us/library/ms726294](http://msdn.microsoft.com/en-us/library/ms726294)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T23:21:27.513

为了强制您的应用程序高于 Metro 的用户界面，您需要执行以下操作：

1.  创建一个 Win32 项目
2.  完成向导而不做任何更改。
3.  更改`CreateWindowEX`和`set WS_EX_TOPMOST`
4.  转到`Project.Properties`并链接到清单文件。
5.  更改 UAC 以绕过 UI 保护；应该`/uiAccess = "true"`
6.  构建您的项目。
7.  使用`SignTool`对应用程序进行签名。
8.  确保应用程序存储在`Program Files`或`Program Files (x86)`
9.  运行您的应用程序。
10.  加载您`Start Menu`的应用程序，您的应用程序应该在 Metro 之上运行。

您的清单应如下所示：

```
<trustInfo xmlns="urn:0073chemas-microsoft-com:asm.v3">
    <security>
        <requestedPrivileges>
        <requestedExecutionLevel
            level="highestAvailable"
            UIAccess="true" />
        </requestedPrivileges>
    </security>
</trustInfo> 
```

默认情况下，`false`如果省略该属性，或者您的程序集不存在清单，则将其设置为。有了它，`false`您将无法访问`ProtectedUI`.

更多关于安全的信息可以在[这里](http://msdn.microsoft.com/en-us/library/ms742884.aspx)找到：

这是一个可以工作或允许修改以测试 UAC 的脚本：

```
class Elevated_Rights
{

    // Token Bool:
    private bool _level = false;

    #region Constructor:

    protected Elevated_Rights()
    {
         // Invoke Method On Creation:
         Elevate();
     }

     #endregion

     public void Elevate()
     {
         // Get Identity:
         WindowsIdentity user = WindowsIdentity.GetCurrent();

         // Set Principal
         WindowsPrincipal role = new WindowsPrincipal(user);

         #region Test Operating System for UAC:

         if (Environment.OSVersion.Platform != PlatformID.Win32NT || Environment.OSVersion.Version.Major < 6)
         {
              // False:
              _level = false;
         }
         #endregion

         else
         {
              #region Test Identity Not Null:

              if (user == null)
              {
                    // False:
                    _level = false;
              }
              #endregion

              else
              {
                    #region Ensure Security Role:

                    if (!(role.IsInRole(WindowsBuiltInRole.Administrator)))
                    {
                        // False:
                        _level = false;
                    }
                    else
                    {
                        // True:
                        _level = true;
                    }
                    #endregion
               }
          }
 } 
```

类似的东西可以确保您可以处理或至少提醒用户该功能可能无法正常工作。请注意，在上面我实际上保护了调用并调用了方法；这样我就可以随时访问该`_level`值以确保身份验证仍然存在。并且仅在需要时继承或使用它以避免不必要的调用。希望这会有所帮助。

* * *

更新评论：

这适用于您的 C# 项目，您可以调用以下代码：

`using System.Diagnostics;`

上述组件将为您提供该功能。然后在一个方法中调用以下内容。

```
Process command = new Process();
command.StartInfo.FileName = "notepad.exe";
command.Start(); 
```

正如您所看到的，它不是技术性的，但它允许您`batch`调用`msiexec`. 希望这会有所帮助。

# asp.net - 隐藏特定的下拉列表值

> ID：14629407
> 
> 赞同：0
> 
> 时间：2013-01-31T15:36:35.287
> 
> 标签：asp.net, html

我的 asp.net 页面中有一个下拉列表，其中包含 10 个项目。我想从下拉列表中隐藏其中一些项目，以便用户无法选择它们。但是，我想用这些隐藏项之一初始化下拉控件的值。如果用户没有触摸下拉菜单，那么该值将有效，即使它隐藏在下拉选项中。另一方面，如果用户打开下拉列表，则他无法选择隐藏的值。

你会怎么做？我尝试设置 ddl.Items[0].Enabled = false，但是我无法将控件初始化为这个隐藏值。即，如果它被隐藏，则无法以编程方式选择该项目...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:41:36.860

你可以试试这段代码：

```
ListItem i = myDropDownList.Items.FindByValue("1");
i.Attributes.Add("style", "color:gray;");
i.Attributes.Add("disabled", "true");
i.Value = "-1"; 
```

[http://forums.asp.net/t/1132654.aspx](http://forums.asp.net/t/1132654.aspx)

# android - 移动应用信用卡 SSL

> ID：14629410
> 
> 赞同：0
> 
> 时间：2013-01-31T15:36:37.680
> 
> 标签：android, ios, cordova, ssl, security

我是一名网络开发人员，但我偶尔会在这里和那里进行一些移动应用程序开发。一位客户最近要求我帮助他们开发一个非常简单的应用程序。该应用程序本质上只是一个 HTML / jQuery 表单，用户填写它以保留我的客户服务。听说过很多关于 phonegap 的信息，我决定第一次尝试它，以及 jQuery mobile。使用 phonegap 构建一切正常，并且在测试了 iOS/Android 工作之后。

虽然，表格的一部分要求用户输入他们的信用卡信息，所以我的客户可以使用他们自己的系统进行预订。该卡永远不会通过应用程序处理，信息只是被收集并（通过电子邮件）发送给使用自己的支付网关的客户。

由于我使用 phonegap 构建应用程序，因此我只是在表单上使用了 action="https://www.my-website-with-ssl.php"。就像我说的，iOS 和 Adroid 都可以很好地发送电子邮件（给我的客户）。但这甚至安全吗？

# excel - 如何以像素为单位设置图表的宽度和高度？

> ID：14629418
> 
> 赞同：6
> 
> 时间：2013-01-31T15:37:11.710
> 
> 标签：excel, vba, charts

设置宽度和高度`ChartObject`或它`Shape`不这样做。它们似乎都只是嵌入图表的那个白色矩形的内部部分。`ChartArea`似乎也不是我感兴趣的对象。

我希望以下示例中的导出文件具有 800x600 的尺寸（我并不是说重新缩放导出的图像或反复试验，直到尺寸意外适合）。图表周围一定有一些我忽略的对象。

```
Sub mwe()

Dim filepath As String
Dim sheet As Worksheet
Dim cObj As ChartObject
Dim c As Chart
Dim cShape As Shape
Dim cArea As chartArea

filepath = Left(ThisWorkbook.FullName, InStrRev(ThisWorkbook.FullName, "\"))
Set sheet = ActiveSheet
Set cObj = sheet.ChartObjects(1)
Set c = cObj.chart
Set cShape = sheet.Shapes(cObj.Name)
Set cArea = c.chartArea

cObj.Width = 800
cObj.Height = 400
MsgBox cArea.Width & " x " & cArea.Height  '793x393
c.Export filepath & "test1.png"            '1067x534, this is also the size on screen

cShape.Width = 800
cShape.Height = 400
MsgBox cArea.Width & " x " & cArea.Height  '794x393
c.Export filepath & "test2.png"            '1068x534, this is also the size on screen

End Sub 
```

更新：

事实证明，`ChartObject`和`Shape`属于相同的`Chart`已经有`Worksheet`父级，但是宽度和高度不是以像素为单位，而是以点为单位，其中 1 点 = 1/72 英寸，并且大多数情况下，Windows 似乎假设每个 96 像素英寸。

感谢史蒂夫的评论，我现在正在使用以下内容，这是非常可靠的。

在导出时未激活的A`ChartObject`似乎会生成一个宽度和高度比应有的高 1 的文件。

`px2ptH`还有待找出如何`px2ptV`自动确定这些因素。

```
Sub mwe()

Dim filepath As String
Dim sheet As Worksheet
Dim cObj As ChartObject
Dim c As Chart

Dim px2ptH As Double: px2ptH = 72 / 96
Dim px2ptV As Double: px2ptV = 72 / 96
Dim w As Double: w = 800 * px2ptH
Dim h As Double: h = 400 * px2ptV

filepath = Left(ThisWorkbook.FullName, InStrRev(ThisWorkbook.FullName, "\"))
Set sheet = ActiveSheet
Set cObj = sheet.ChartObjects(1)
Set c = cObj.Chart

'otherwise image size may deviate by 1x1
cObj.Activate

cObj.Width = w
cObj.Height = h

c.Export filepath & "test.png"

End Sub 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T16:48:14.527

尺寸以点为单位，而不是像素。72 磅为英寸。

800 像素 / 72 = 11.11111 .... 导出图像的大小将以英寸/计算机显示器的 dpi 为单位，通常为 96（就像您的情况一样，但您不能总是指望它。 .. 使用 WIN API 调用来查找当前值）

Randy Birch 发布了可用于访问 WinAPI 调用以获取屏幕分辨率等的代码。

转到[http://vbnet.mvps.org/index.html](http://vbnet.mvps.org/index.html)并使用左侧的搜索功能查找 GETDEVICECAPS

# javascript - Dojo：FilteringSelect 和 ItemFileWriteStore

> ID：14629420
> 
> 赞同：0
> 
> 时间：2013-01-31T15:37:15.223
> 
> 标签：javascript, dojo

我正在使用 Dojo 1.5 构建 Web 应用程序。目前，我正在尝试制作一个表单来填充数据库中的一些数据，并且这个表单需要一个带有一些预加载数据的 ComboBox 供用户选择。我要做的是将该组合声明`ItemFileWriteStore`为数据源和`FilteringSelect`小部件。`ItemFileWriteStore`事情是这样的：

```
<div dojoType="dojo.data.ItemFileWriteStore" jsId="itemsStore" url="rest/items">
</div> 
```

`rest/items`URI 返回：

```
{"items":[{"id":1003,"description":"And Item","name":"Items"}]} 
```

我的 Combo 小部件是这样的：

```
<input dojoType="dijit.form.FilteringSelect" name="item_edited" 
store="itemsStore" searchAttr="name" id="item_edited" required="true" /> 
```

当我加载表单时，我可以看到`FilteringSelect`来自 REST 服务的数据。但是，当我选择 Combo 中的唯一项目并发出 POST 请求以保留数据时，我在 Firebug 中看到了这一点：

```
Parameters (application/x-www-form-urlencoded)

form_item          123
another_form_item  foo
item_edited        1 
```

所以我希望`id`JSON 类型的 d 属性（返回的唯一项目是**1003**）被发送到服务器，但我得到的是子序号位置。如何告诉`FilteringSelect`使用`id`作为值返回的 JSON 的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:13:05.097

您可以在从 URI 返回的 JSON 中指定标识符属性：

```
{"identifier" : "id", "label" : "name", "items":[{"id":1003,"description":"And Item","name":"Items"}]} 
```

# java - 从 Dropbox 中的 txt 文件下载文本

> ID：14629421
> 
> 赞同：0
> 
> 时间：2013-01-31T15:37:16.990
> 
> 标签：java, android

我有一个 .txt 文件上传到 Dropbox 中的 Public 文件夹。如果您单击该文件，它会打开并且您可以看到文本，如果您检查 HTML 源代码，它只会显示文件内的文本（没有 HTML 标记，只有字符串）。有没有办法将该文本下载到字符串变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:45:44.653

*   首先通过 HttpUrlConnection 打开文件。
*   然后读取缓冲区中的文件。
*   做就是了`buffer.toString();`

这是代码：

```
URL url = new URL("Link to dropbox");
                HttpURLConnection.setFollowRedirects(true);
                HttpURLConnection con = (HttpURLConnection) url.openConnection();
                con.setDoOutput(false);
                con.setReadTimeout(20000);
                con.setRequestProperty("Connection", "keep-alive");

                con.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0");
                ((HttpURLConnection) con).setRequestMethod("GET");
                //System.out.println(con.getContentLength()) ;
                con.setConnectTimeout(5000);
                BufferedInputStream in = new BufferedInputStream(con.getInputStream());
                int responseCode = con.getResponseCode();
                if (responseCode == HttpURLConnection.HTTP_OK) {
                    System.out.println(responseCode);
                }
                StringBuffer buffer = new StringBuffer();
                int chars_read;
                //int total = 0;
                while ((chars_read = in.read()) != -1) 
                {
                    char g = (char) chars_read;
                    buffer.append(g);
                }
                final String page = buffer.toString(); 
```

将所有这些放在一个新线程和一个 try-catch 块中。

# c - 给定静态库列表和搜索目录（GCC/ld 格式），如何将它们组装成静态库

> ID：14629422
> 
> 赞同：1
> 
> 时间：2013-01-31T15:37:18.847
> 
> 标签：c, linker, makefile

我有一个特定的问题，但让我首先尝试以一般方式制定它：

我在 Linux 中工作（确切地说是 openSUSE 12.2）。工具链相当标准，使用make、OpenMPI mpicc（使用GCC）等。

我的问题本质上是在makefile中给了我一串链接命令作为宏（即“-lsomelib -L/some/path -lanotherlib”等）。我想创建一个使用这些库的库（我们称之为 libmine），我不希望 libmine 的消费者必须关心我使用的库（即，他们应该只需要执行 -lmine 而无需关心关于 -lsomelib 等等）。

* * *

具体来说，我正在处理[petsc](http://www.mcs.anl.gov/petsc)，这强烈建议我使用它的一个 makefile 作为模板，而不是尝试自己滚动。出于我的目的，一个最小的 makefile 将是：

```
include ${PETSC_DIR}/conf/variables                                             
include ${PETSC_DIR}/conf/rules                                                 

mine.o: mine.c chkopts                                                            
        ${CC} ${CFLAGS} ${PETSC_CCPPFLAGS} -o mine.o -c mine.c ${PETSC_KSP_LIB} 
```

这`mine.c`是我的库的源代码，`${PETSC_KSP_LIB}`是一个包含链接说明的字符串。在我的机器上，它具体是：

```
-L/usr/local/petsc/petsc-3.3-p5_user0/linux-gnu-user0/lib -lpetsc -lX11 -lpthread -Wl,-rpath,/usr/local/atlas -L/usr/local/atlas -llapack -lblas -L/usr/lib64/mpi/gcc/openmpi/lib64 -L/usr/lib64/gcc/x86_64-suse-linux/4.7 -L/usr/local/petsc/petsc-3.3-p5_user0 -L/opt/AMDAPP/lib/x86_64 -L/usr/x86_64-suse-linux/lib -lmpi_f90 -lmpi_f77 -lgfortran -lm -lgfortran -lm -lgfortran -lm -lm -lquadmath -lm -ldl -lmpi -lnsl -lutil -lgcc_s -lpthread -ldl 
```

这些库大多是静态库（尽管其中可能也有一些动态库）。

我正在寻找一种让 mine.o（或完成的库 libmine.a）包含所有必要信息的方法，以便在编译使用 libmine 的其他应用程序时，它只需要链接到 libmine，而不是整个中列出的库的主机`${PETSC_KSP_LIB}`。

我希望这很容易做到（？），但我对整个链接过程真的很不稳定。例如，如果所有库都是静态的或动态的，这样做会更容易吗？另请注意，我没有必要静态包含动态库，例如添加文件夹`LD_LIBRARY_PATH`根本不是问题。重要的部分是，当我在其他项目中使用该库时，我不必担心基于 petsc 的库使用的库列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:20:13.883

将共享库转换为静态库并[非易事](http://stackoverflow.com/questions/725472/static-link-of-shared-library-function-in-gcc)。

要将几个静态库合并为一个，只需解压缩它们，然后构建新的（粗略但有效）：

```
ar -xv somelib.a
ar -xv anotherlib.a
...

ar -r libmine.a *.o 
```

我听说过[一个更优雅的解决方案](http://stackoverflow.com/questions/12944718/trying-to-merge-two-static-libraries)，但我想在认可之前对其进行测试......

# java - 选择一个随机数

> ID：14629426
> 
> 赞同：-1
> 
> 时间：2013-01-31T15:37:29.583
> 
> 标签：java, arrays, random

如何从 Java 中的给定数字列表中随机选择一个数字？

我只有这 5 个数字：1000、2000、3000、4000、5000

现在我必须从这组数字中随机选择一个数字。

我的代码试试这个

```
int ar[] = new int[4];
ar[0] = 1000;
ar[1] = 2000;
ar[2] = 3000;
ar[4] = 4000;

int randomArrayIndex = num.nextInt(ar.length); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T15:39:15.520

```
int randomArrayIndex = new Random().nextInt(ar.length); 
int number = ar[randomArrayIndex]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:39:30.903

试试这个

```
public static int myRandom(int low, int high) {
    return (int) (Math.random() * (high - low) + low);
} 
```

并将低和高设置为 0 和 4。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:42:02.017

如果您不想重复原始数组中的数字：

```
 Integer [] array = {1000,2000,3000,4000};
 Collections.shuffle(Arrays.asList(array)); 
```

如果给定数组中只需要一个随机数。

```
int[] array = {1000,2000,3000,4000};

int randomNumber = array[(int)(Math.random()*array.length)]; 
```

# ms-access - MS Access、ASP、VBScript 缺少运算符错误

> ID：14629427
> 
> 赞同：1
> 
> 时间：2013-01-31T15:37:30.080
> 
> 标签：ms-access, asp-classic, vbscript

我使用 Access 作为 ASP 页面的后端。我正在使用保存的查询。该表如下所示：

```
 UCall  Zone  Band
    NF4L    2    B160
    NF4L    5    B40
    NF4L    7    NULL
    AB2AB   5    B10 
```

查询如下所示：

```
Select COUNT(*) as BCnt 
From tblScore 
Where Band IS NOT NULL and UCall=[in_call]; 
```

结果应该是给定调用的所有行的计数，其中有一个 Band 条目。以 NF4L 作为参数运行的查询应返回 2。

查询在 Access 本身中按预期工作，但是当 ASP 页面运行时，我得到

```
"Syntax error (missing operator) in query expression 'Band IS NOT NULL and UCall=[in_call]'. 
```

从 ASP 页面：

```
function GetBandTotals(in_call)
  conn2.BandSummary in_call, BRS
  GetBandTotals = BRS("BCnt")
end function 
```

conn2 是一个 adodb 连接

BRS 是一个 adodb 记录集

我已经验证 in_call 正在到达那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:23:40.607

`Band`是一个[保留字](http://allenbrowne.com/AppIssueBadWord.html#B)，所以将该名称括在方括号中。

还添加一个`PARAMETERS`子句来通知数据库引擎期望`in_call`参数的文本类型。我不知道这是否会有所帮助，但不会受到伤害。

```
PARAMETERS in_call Text ( 255 );
SELECT COUNT(*) AS BCnt 
FROM tblScore 
WHERE [Band] IS NOT NULL AND UCall=[in_call]; 
```

# c# - 使用 TextWriter 时如何截断流

> ID：14629429
> 
> 赞同：2
> 
> 时间：2013-01-31T15:37:36.007
> 
> 标签：c#, .net, stream

这个片段应该是不言自明的：

```
XDocument xd = ....
using (FileStream fs = new FileStream("test.txt", FileMode.Open, FileAccess.ReadWrite))
{
  using (TextWriter tw = new StreamWriter(fs))
  {
    xd.Save(tw);
  }
  fs.Flush();
  fs.SetLength(fs.Position);
} 
```

我想`XDocument`使用 a 将我的流序列化为流`TextWriter`，然后在流结束后截断流。不幸的是，该`Save()`操作似乎关闭了流，所以我的`Flush()`调用生成了一个异常。

在现实世界中，我实际上并没有序列化到文件，而是我无法控制的其他类型的流，所以这不仅仅是先删除文件那么简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:40:13.643

如果要刷新流，则需要执行此操作

```
using (FileStream fs = new FileStream("test.txt", FileMode.Open, FileAccess.ReadWrite))
{
  using (TextWriter tw = new StreamWriter(fs))
  {
    tw.Flush();
    xd.Save(tw);
    fs.SetLength(fs.Position);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:41:58.940

使用StreamWriter 构造函数的[这个重载](http://msdn.microsoft.com/en-us/library/gg712853.aspx)。注意最后一个参数：您可以告诉它让流保持打开状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:45:39.900

你确定`Save`关闭流吗？`TextWriter`正在结束时`using`关闭。也许这会起作用：

```
using (FileStream fs = new FileStream("test.txt", FileMode.Open, FileAccess.ReadWrite))
{
  var TextWriter tw = new StreamWriter(fs);
  try
  {
    xd.Save(tw);
    tw.Flush();
    fs.SetLength(fs.Position);
  }
  finally
  {
    tw.Dispose();
  }
} 
```

Note that I flush the `TextWriter`, which also causes a flush of the underlying stream. Just flushing the `FileStream` might not include the data that's still buffered in the `TextWriter`.

# regex - 是否可以在 vim 中替换匹配的模式？

> ID：14629433
> 
> 赞同：0
> 
> 时间：2013-01-31T15:37:59.890
> 
> 标签：regex, vim, pattern-matching, substitution

每次在替换为 之前`pattern1`，`pattern2`我通常使用`/pattern1`来确认正则表达式是正确的。但是，在进行实际替换时，我必须使用`:%s/pattern1/pattern2/g`（假设我需要进行全局替换）。这很烦人，并且可能由于拼写错误而失败。

那么有没有一种方便的方法来替换匹配的`pattern1`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:44:02.890

// 最后一次搜索 `:%s//replacement/g`会做你想做的事。

但是您也可以考虑`%s/pattern1/pattern2/gc`或`%s/p1/p2/gn`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:39:30.427

s 命令前半部分的空字符串默认为最后搜索的模式。

所以

```
g/fred/s//mary/g 
```

将 fred 的所有实例更改为 mary。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:39:57.427

只需使用一个空模式：

```
:%s//pattern2/g 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T15:41:09.753

我觉得：

:.,.+3s//repl/g

应该用 repl 替换接下来 3 行中当前模式的每次出现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T15:41:47.867

您可以使用类似的东西`:%s/pattern/replace/c`（注意尾随`c`），vim 会要求确认。

# c - 使用 Pthread (main) C 打印结果

> ID：14629437
> 
> 赞同：1
> 
> 时间：2013-01-31T15:38:24.447
> 
> 标签：c, pthreads

我正在尝试用 C 语言编写一个简单的程序，该程序将使用主线程来打印结果，但是当我在创建线程时检查线程 ID 和打印结果时，它有 2 个不同的 ID。这是我的代码：Cx

```
#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <time.h>
#include <sys/time.h>

void *Utskrift(void *simpleInt)
{
  int simple;

simple = (int)simpleInt;
/*Printing my result and thread id*/
printf(";Hello From Thread ! I got fed with
an int %d! AND it is THREAD    ::%d\n",simple,pthread_self());

 }

 main(){

pthread_t thread_id;
int test=2;
/*Using main thread to print test from method Utskrift*/
pthread_create (&thread_id, NULL,&Utskrift,(void *) test);
/*Taking look at my thread id*/
printf(" (pthread id %d) has started\n", pthread_self());
pthread_join(thread_id,NULL);

} 
```

我也是线程编程和 C 的新手。所以我可能误解了`pthread_create (&thread_id, NULL,&Utskrift,(void *) test);`。它是使用我的主线程调用方法`Utskrift`并打印结果，还是它为我的主线程创建一个新线程“子”然后子打印结果？如果是这样，您能否为我解释一下如何使用主线程来打印我的“测试”。

输出：

```
(pthread id -1215916352) has started ;Hello From Thread ! I got fed with an int 2! AND it is THREAD ::-1215919248 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:48:12.440

The `main()` is also a thread. So when you create a thread you basically fork from `main()` and process something else in the new thread. `pthread_join()` will wait till you new thread exits and then will continue with the main thread. Hope that makes some sense.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:05:16.327

`pthread_create`function( [spec](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_create.html) ) 创建一个新线程，它将执行您传递给它的函数（在本例中）`Utskrift`。传入的最后一个参数的值 value`pthread_create`被传递给函数。

如果您只是想`Utskrift`在主线程中调用该函数，则可以按正常方式进行：

```
Utskrift((void *)test)); 
```

如果要将数据从已完成的线程传递回另一个线程，则可以使用`pthread_join`which 将返回线程启动例程返回的值或线程传递给的值`pthread_exit`：

```
#include <pthread.h>
#include <stdio.h>

void *checker(void *arg) {
    int number = (int) arg;

    if (0 == number)
        return "number was zero";
    else
        return "number was not zero";
}

int main(void) {
    int test = 0;
    pthread_t thread_id;
    char *s;

    pthread_create (&thread_id, NULL, checker,(void *) test);
    pthread_join(thread_id, &s);
    printf("%s\n", s);

    test = 1;

    pthread_create (&thread_id, NULL, checker,(void *) test);
    pthread_join(thread_id, &s);
    printf("%s\n", s);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:51:12.087

这一行在`main`：

```
printf(" (pthread id %d) has started\n", pthread_self()); 
```

正在打印主线程的 pthread id，而不是您之前创建的那个。您在线程中获得的 id 应该与存储在`thread_id`. 你可能打算写：

```
printf(" (pthread id %d) has started\n", thread_id); 
```

* * *

旁注：`pthread_t`通常比 int 大。我建议这样打印：

```
printf("... %lu ...", ..., (unsigned long)thread_id, ...); 
```

# python - 隐藏/不可见 Matplotlib 图

> ID：14629438
> 
> 赞同：9
> 
> 时间：2013-01-31T15:38:26.240
> 
> 标签：python, matplotlib

我有一个问题，不确定它是否困难，但我试图用谷歌搜索答案。没有什么值得的。

我有数字作为全局，可以在所有线程中访问。

但它出现在程序的开头，

我想在脚本开始时隐藏或使其不可见，然后在代码中的某一点使其可用或可见。

是否有任何 Matplotlib 像可见的 False 或其他东西

我用这个：

```
plt.ion()

fig = plt.figure(visible=False)

ax =fig.add_subplot(111) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:50:20.487

Ideally, avoid using `plt.ion()` in scripts. It is meant to be used only in interactive sessions, where you want to see the result of matplotlib commands immediately.

In a script, the drawing is usually delayed until `plt.show` is called:

```
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111)

ax.plot(range(5))

plt.show()  # now the figure is shown 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:08:38.740

我必须按照您的要求做同样的事情，但我首先使用此过程将图形放在画布上（注意：这使用 matplotlib、pyplot 和 wxPython）：

```
#Define import and simplify how things are called
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas
import matplotlib.pyplot as plt

#Make a panel
panel = wx.Panel(self)

#Make a figure
self.figure = plt.figure("Name")
#The "Name" is not necessary, but can be useful if you have lots of plots

#Make a canvas
self.canvas = FigureCanvas(panel, -1, self.figure)

#Then use
self.canvas.Show(True)
#or
self.canvas.Show(False)

#You can also check the state of the canvas using (probably with an if statement)
self.canvas.IsShown() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T13:29:43.173

[在这个问题](https://stackoverflow.com/questions/28463479/how-to-toggle-visibility-of-matplotlib-figures?noredirect=1&lq=1)中有一个[很好的答案](https://stackoverflow.com/a/32576093/4124317)如何切换完整 matplotlib 图形的可见性。这个想法是使用图的方法。`.set_visible`

这里有一个完整的例子：

```
import matplotlib.pyplot as plt

plt.scatter([1,2,3], [2,3,1], s=40)

def toggle_plot(event):
  # This function is called by a keypress to hide/show the figure
  plt.gcf().set_visible(not plt.gcf().get_visible())
  plt.draw()

cid = plt.gcf().canvas.mpl_connect("key_press_event", toggle_plot)

plt.show() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-20T07:52:18.240

如果您想隐藏整个绘图窗口，并且您正在使用 tk 后端 - 您可以使用 tkinter 库中的 Toplevel() 小部件。

这是一个完整的例子：

```
from tkinter import *
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg

fig,(ax) = plt.subplots()
x = np.linspace(0, 2 * np.pi)
y = np.transpose([np.sin(x)])
ax.plot(y)

graph = Toplevel()
canvas = FigureCanvasTkAgg(fig, master=graph)
canvas.get_tk_widget().pack()
canvas.show()

toolbar = NavigationToolbar2TkAgg(canvas, graph)
toolbar.update() 
```

来电：

```
graph.withdraw() 
```

将隐藏绘图窗口，并且：

```
graph.deiconify() 
```

将再次显示。

# android - 如何在不使用对话框的情况下在操作栏上方显示视图？

> ID：14629439
> 
> 赞同：2
> 
> 时间：2013-01-31T15:38:26.953
> 
> 标签：android, android-actionbar, actionbarsherlock

我想在包括操作栏在内的内容上显示渐变视图。我不能为此使用对话框。

如何在不使用对话框的情况下在操作栏上方显示视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:40:27.417

如果您的意思是在操作栏的顶部。您可以尝试将 windowOverlay 属性添加到操作栏样式。然后您的布局将从屏幕顶部而不是操作栏下方放置。

# tfs - TFS 强制工作项自动创建？

> ID：14629442
> 
> 赞同：1
> 
> 时间：2013-01-31T15:38:33.790
> 
> 标签：tfs, scrum

我正在将我们的团队从 TFS 2005 升级到 2012。我们目前和一直在做的一件事是为每项工作制定一些强制性工作项目。我们正在沿着 SCRUM 路线前进，因此想象一下，对于每个 sprint，我希望将一组强制性工作项作为任务添加到 sprint。我们目前通过在 VS IDE 中手动创建或通过 Excel 手动创建这些。这些项目通常包括“更新寄存器”、“更新规范”、“更新用户指南”、“部署到 UAT”、“部署到实时”等。

这个过程对我们有用，我们打算继续这样做。有谁知道这些项目可以自动生成的方式（它们总是相同的，并且应该存在于每个 sprint 中）。理想情况下，我想将它们添加到 SCRUM 模板中，但如果失败了，我计划编写一个 Excel 加载项，它只是将数据添加到其中，以便我们可以发布到 TFS。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:00:52.440

以防万一其他人想知道。我通过使用 TFS 警报和 WCF Web 服务来创建我的工作项解决了我的问题。

我们现在正在使用敏捷过程模板，因为它更适合我们。我现在设置了它，以便在标题中使用文本“强制任务”创建新用户故事时，TFS 会触发警报并调用 WCF Web 服务。此 Web 服务接收事件并创建我的工作项，这些工作项保存在 Tfs_DefaultCollection 数据库中的一个单独的新表中。工作项是使用 TFS SDK 创建的，并且都链接到用户故事。有了这个，我可以指定所有其他信息，例如 AssignedTo、Priority、OriginalEstimate 等。

# javascript - 你如何在 Javascript 中抛出自定义错误类？

> ID：14629443
> 
> 赞同：4
> 
> 时间：2013-01-31T15:38:35.407
> 
> 标签：javascript, exception, throw

在 JS 中，你可以抛出一个“new Error(message)”，但是如果你想检测异常的类型并对消息做一些不同的事情，那就不是那么容易了。

这篇文章： [http ://www.nczonline.net/blog/2009/03/10/the-art-of-throwing-javascript-errors-part-2/](http://www.nczonline.net/blog/2009/03/10/the-art-of-throwing-javascript-errors-part-2/)

是说你可以这样做：

```
function MyError(message){
  this.message=messsage;
  this.name="MyError";
  this.poo="poo";
}
MyError.prototype = new Error();

try{
  alert("hello hal");
  throw new MyError("wibble");
} catch (er) {
  alert (er.poo);   // undefined.
  alert (er instanceof MyError);  // false
      alert (er.name);  // ReferenceError.
} 
```

但它不起作用（得到“未定义”和错误）

这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:45:07.007

Douglas Crockford 建议抛出这样的错误：

```
throw{

    name: "SomeErrorName", 
    message: "This is the error message", 
    poo: "this is poo?"

} 
```

然后你可以很容易地说：

```
try {
    throw{

        name: "SomeErrorName", 
        message: "This is the error message", 
        poo: "this is poo?"

    }

}
catch(e){
    //prints "this is poo?"
    console.log(e.poo)
} 
```

如果你真的想使用 MyError Function 方法，它应该看起来像这样：

```
function MyError(message){

    var message = message;
    var name = "MyError";
    var poo = "poo";

    return{

        message: message, 
        name: name, 
        poo: poo
    }

}; 
```

# android - 根据 OSMDroid 的一组位置确定合适的缩放级别

> ID：14629445
> 
> 赞同：2
> 
> 时间：2013-01-31T15:38:39.343
> 
> 标签：android, osmdroid

从 Google Maps Android API v2，我了解到这可以通过这种方法来完成：

```
LatLngBounds.Builder builder = new LatLngBounds.Builder();
for (Location loc : allLocations) {
    LatLng position = new LatLng(loc.getLatitude(), loc.getLongitude());
    builder.include(position);
}

CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(builder.build(), someMarginValue);
map.moveCamera(cu); 
```

但是我似乎找不到为 OSMDroid 执行此操作的方法。是否有解决方案/类来帮助根据一组位置确定缩放级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-15T00:21:25.780

这对我有用：

```
 mapController.setZoom(10.0);
    map.post(new Runnable() {
        @Override
        public void run() {
            mapController.setCenter(boundingBox.getCenterWithDateLine());
            mapController.zoomToSpan(boundingBox.getLatitudeSpan(), boundingBox.getLongitudeSpan());
            map.invalidate();
        }
    }); 
```

没有初始缩放级别，它根本不起作用。第二部分 map.post 可以删除，但我认为它有助于 zoomToSpan() 在计算时处于 isLayoutOccurred() 状态。您可以像这样获得boundingBox：

```
final BoundingBox boundingBox = BoundingBox.fromGeoPoints(geoPoints); 
```

geoPointes 只是 GeoPoint 对象的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T07:30:52.197

在 osmdroid 中，您可以从一组位置确定最小/最大坐标，然后调用

```
 Mapview.zoomToBoundingBox(...) 
```

设置缩放级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T06:13:01.263

这对我来说很好：

```
 ArrayList<GeoPoint> waypoints = new ArrayList<GeoPoint>();
    waypoints.add(new GeoPoint(35.37, -119.01));
    waypoints.add(new GeoPoint(35.35, -119.01));
    waypoints.add(new GeoPoint(35.11, -118.32));
    waypoints.add(new GeoPoint(35.10, -118.32));
    waypoints.add(new GeoPoint(35.10, -118.15));
    waypoints.add(new GeoPoint(35.09, -118.14));
    waypoints.add(new GeoPoint(35.63, -117.88));
    waypoints.add(new GeoPoint(35.65, -117.72));
    waypoints.add(new GeoPoint(35.62, -117.67));

    final BoundingBoxE6 boundingBoxE6 = BoundingBoxE6.fromGeoPoints(waypoints);
    mMapView.zoomToBoundingBox(boundingBoxE6,true); 
```

# jquery - 漂亮的滚动 - mac 上的两个手指滚动

> ID：14629446
> 
> 赞同：0
> 
> 时间：2013-01-31T15:38:40.050
> 
> 标签：jquery, macos, scroll

我正在创建具有平滑滚动效果的页面 - 插件不错的滚动[http://areaaperta.com/nicescroll/](http://areaaperta.com/nicescroll/)。

我的客户有mac（safari 6），他通过将两根手指放在触摸板上滚动我的页面。在这种情况下，页面会非常非常快速地滚动到页面末尾。

当然，当我们使用鼠标滚轮滚动时，一切正常 - 页面滚动顺畅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:43:20.833

我没有看到任何问题，但是如果您想在 Safari 中停用插件并且您能够使用 PHP，如果用户使用 Safari (6)，您可以使用此功能停用插件。

```
 <?php
function getBrowser()
{
    $u_agent = $_SERVER['HTTP_USER_AGENT'];
    $bname = 'Unknown';
    $platform = 'Unknown';
    $version= "";

    //First get the platform?
    if (preg_match('/linux/i', $u_agent)) {
        $platform = 'linux';
    }
    elseif (preg_match('/macintosh|mac os x/i', $u_agent)) {
        $platform = 'mac';
    }
    elseif (preg_match('/windows|win32/i', $u_agent)) {
        $platform = 'windows';
    }

    // Next get the name of the useragent yes seperately and for good reason
    if(preg_match('/MSIE/i',$u_agent) && !preg_match('/Opera/i',$u_agent))
    {
        $bname = 'Internet Explorer';
        $ub = "MSIE";
    }
    elseif(preg_match('/Firefox/i',$u_agent))
    {
        $bname = 'Mozilla Firefox';
        $ub = "Firefox";
    }
    elseif(preg_match('/Chrome/i',$u_agent))
    {
        $bname = 'Google Chrome';
        $ub = "Chrome";
    }
    elseif(preg_match('/Safari/i',$u_agent))
    {
        $bname = 'Apple Safari';
        $ub = "Safari";
    }
    elseif(preg_match('/Opera/i',$u_agent))
    {
        $bname = 'Opera';
        $ub = "Opera";
    }
    elseif(preg_match('/Netscape/i',$u_agent))
    {
        $bname = 'Netscape';
        $ub = "Netscape";
    }

    // finally get the correct version number
    $known = array('Version', $ub, 'other');
    $pattern = '#(?<browser>' . join('|', $known) .
    ')[/ ]+(?<version>[0-9.|a-zA-Z.]*)#';
    if (!preg_match_all($pattern, $u_agent, $matches)) {
        // we have no matching number just continue
    }

    // see how many we have
    $i = count($matches['browser']);
    if ($i != 1) {
        //we will have two since we are not using 'other' argument yet
        //see if version is before or after the name
        if (strripos($u_agent,"Version") < strripos($u_agent,$ub)){
            $version= $matches['version'][0];
        }
        else {
            $version= $matches['version'][1];
        }
    }
    else {
        $version= $matches['version'][0];
    }

    // check if we have a number
    if ($version==null || $version=="") {$version="?";}

    return array(
        'userAgent' => $u_agent,
        'name'      => $bname,
        'version'   => $version,
        'platform'  => $platform,
        'pattern'    => $pattern
    );
}   
    ?> 
```

像这样使用它：

```
 $ua=getBrowser();
    $yourbrowser= "Your browser: " . $ua['name'] . " " . $ua['version'] . " on " .$ua['platform'] . " reports: <br >" . $ua['userAgent'];
    print_r($yourbrowser); 
```

[http://php.net/manual/de/function.get-browser.php](http://php.net/manual/de/function.get-browser.php)

# java - Vector vs ArrayList 同步的例子

> ID：14629449
> 
> 赞同：2
> 
> 时间：2013-01-31T15:38:50.070
> 
> 标签：java, data-structures, vector, arraylist, synchronization

向量包含同步方法，而 ArrayLists 不包含。当数据被 >1 个线程访问和修改时，这些同步方法有助于防止数据损坏。

有人可以为我更详细地解释一下吗？Vectors 包含同步方法是什么意思？这些方法是否包含控制多线程访问数据的锁定和解锁的内部锁？有人可以提供一些使用向量（与 ArrayList 相比）可以防止数据损坏并进一步阐明问题或数据结构和同步问题的示例吗？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:56:13.847

> Vectors 包含同步方法是什么意思？

这些方法已标记为`synchronized`。

> 这些方法是否包含控制多线程访问数据的锁定和解锁的内部锁？

不，尽管关键字在方法上，但锁定的是*对象*，而不是方法。没有办法锁定这样的方法。

> 有人可以提供一些使用向量（与 ArrayList 相比）可以防止数据损坏并进一步阐明问题或数据结构和同步问题的示例吗？

有很多例子。最简单的就是增加一个数字。假设你有两个线程递增一个数字（例如集合的大小），你可以没有同步。

```
Thread1: read size e.g. 0
Thread1: increment size
Thread1: write size e.g. 1
Thread2: read size e.g. 1
Thread2: increment size
Thread2: write size e.g. 2 
```

但是，由于线程可以按任何顺序执行操作（因为这是线程的全部内容），您也可以拥有

```
Thread1: read size e.g. 0
Thread2: read size e.g. 0
Thread1: increment size
Thread2: increment size
Thread1: write size e.g. 1
Thread2: write size e.g. 1 
```

因此，即使两个线程增加了计数器，它也是不正确的，因为它们的动作不协调。这就是同步为您所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-15T16:21:51.330

哈哈。8岁的问题。我一直在寻找答案，但后来通过在线学习自己创建了一个 Demo。这就是我的理解：您可以在要成为线程安全的对象的方法上使用同步关键字，或者您可以在要使用该对象的任何地方编写同步的 objName。这是一个例子，以防它帮助任何人。这里的 SyncData 是我创建同步对象（数据）的类。

```
class SyncData {
    synchronized public void print() {
//      public void print() {
        for(int i=1; i<=5; i++) {
            System.out.println("SyncData: print() : "  + Thread.currentThread().getName() + " => " + i);
            try {
                Thread.sleep(1000);
            } catch(InterruptedException excep) {
                System.out.println(excep.getMessage());
            }
        }
    }
}

public class SynchronizedDemo {

    static class SyncChildThread extends Thread {
        SyncData data;
        public SyncChildThread(SyncData data) {
            this.data = data;
        }
        @Override
        public void run() {     
//          synchronized(data) { //alternative way
//              data.print();
//          }
            data.print();
        }
    }

    public static void main(String[] args) {
        //dummy data, which will be shared among multiple threads
        SyncData data = new SyncData();
        SyncChildThread threadOne, threadTwo;
        threadOne = new SyncChildThread(data);
        threadOne.setName("Thread-1");
        threadTwo = new SyncChildThread(data);
        threadTwo.setName("Thread-2");
        threadOne.start();
        threadTwo.start();
    }
} 
```

同步输出将是：

```
SyncData: print() : Thread-1 => 1
SyncData: print() : Thread-1 => 2
SyncData: print() : Thread-1 => 3
SyncData: print() : Thread-1 => 4
SyncData: print() : Thread-1 => 5
SyncData: print() : Thread-2 => 1
SyncData: print() : Thread-2 => 2
SyncData: print() : Thread-2 => 3
SyncData: print() : Thread-2 => 4
SyncData: print() : Thread-2 => 5 
```

如果您删除同步，那么任何线程都可以随时访问该对象（同时访问）。对象数据非同步访问的输出：

```
 AsyncData: print() : Thread-1 => 1
AsyncData: print() : Thread-2 => 1
AsyncData: print() : Thread-1 => 2
AsyncData: print() : Thread-2 => 2
AsyncData: print() : Thread-1 => 3
AsyncData: print() : Thread-2 => 3
AsyncData: print() : Thread-1 => 4
AsyncData: print() : Thread-2 => 4
AsyncData: print() : Thread-1 => 5
AsyncData: print() : Thread-2 => 5 
```

# ruby-on-rails - 自动定义的控制器方法覆盖内置的 Rails 方法

> ID：14629454
> 
> 赞同：1
> 
> 时间：2013-01-31T15:39:04.733
> 
> 标签：ruby-on-rails

当您有一个名为 的控制器时`image`，Rails 会自动定义辅助方法，例如`image_path`.

该行为导致隐藏 Rails builtin-method `ActionView::Helpers::AssetTagHelper::image_path`。这意味着当您拥有此类控制器时，您将无法调用这些助手。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:11:19.070

是的，有一个解决方案。您可以使用[`path_to_image`](https://github.com/rails/rails/blob/v3.2.11/actionpack/lib/action_view/helpers/asset_tag_helper.rb#L277)helper，因为它是`image_path`.

# php - jQuery mudle：加载一个表单的表单，然后加载另一个表单

> ID：14629455
> 
> 赞同：0
> 
> 时间：2013-01-31T15:39:09.417
> 
> 标签：php, javascript, jquery, html, ajax

我把自己弄得有点糊涂了，一个解决方案成功了一半。

基本上，我使用`.load()`附加到 a的基本功能`<select>`来拉另一个`<select>`通过 PHP/MySQL 填充的表格。然后我想要的是这个新加载`<select>`的然后加载另一个通过 PHP/MySQL 填充的表单。当用户更改其中任何一个时，可以`<select>`说，更改实际上需要向下移动堆栈。

在选择选项并且关闭A `.change()`OFF时，它在其工作时，工作完全正常。问题是第二个的初始加载`<select>`，我不知道如何触发`.load()`我想要的。

当前版本在这里： http: [//kick.hooplahosts.co.uk/fire/FireServiceProject/bag.php](http://kick.hooplahosts.co.uk/fire/FireServiceProject/bag.php)

并且违规表格在左侧（级别，编号和项目），您会看到首次加载或刷新的多选不加载，或者即使在更改包级别时，它也会在包号中进行实际选择做我想做的事。

我已经编辑了大部分不相关的 html，并且脚本有点“正在进行中”

## HTML

```
 <form action="php/bagCreate/newBag_bag.php" method="post" id="form1">
    <h2>Select Bag Level</h2>
    <select id="target" class="get" name="bagLevel">
      <option>Level 1</option>
      <option>Level 2</option>
      <option>Level 3</option>                                
    </select>        
 </form>            

<div id="upForm">
  <label>Bag Number</label>
  <form action="php/bagCreate/getContents_bag.php" method="post">
     <select id="target" class="getContents" name="bagNumber">
        <option>1</option>
        <option>2</option>
        <option>3</option>
     </select>        
  </form>

  <div id="upFormContents">
  <form>
  <label>Items in Bag</label>
     <select id="select2" class="input-large" multiple="multiple" size="20">
        <option>dsfgdsg</option>
        <option>dsfgdsgdfgfd</option>
    </select>        
  </form> 
```

## JS

```
$(document).on("change", "select.getContents", function(){
  var action = $('select.getContents').parent().attr('action');        
  fillContents(action)    
});

$(document).on("ready", "select.getContents", function(){
  var action = $('select.getContents').parent().attr('action');        
  fillContents(action)
});  

function fillContents(action){        
   $('#upFormContents').load(action,    
   $('select.getContents').parent().serializeArray());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:40:37.660

您可以在加载第二个时触发更改`<select>`事件`trigger('change');`

在您的情况下，例如：

```
$('.getContents').trigger('change'); 
```

当您更改第一个选择（包级别）时，请务必使用此代码触发第二个选择。

# javascript - 无法通过 Javascript 更改表格的 innerHTML 以添加行

> ID：14629457
> 
> 赞同：1
> 
> 时间：2013-01-31T15:39:14.307
> 
> 标签：javascript, vb.net, pagemethods

在我的应用程序中，我使用 Javascript 通过 PageMethods 调用 VB 端函数。当 onSuccess 函数被命中时，我试图将返回的字符串添加到表的内部 html 中。下面列出的是我试图用来执行此操作的 Javascript，但我不断收到：

> “Microsoft JScript 运行时错误：未知的运行时错误”

下面是表格（如果可能的话，我想保持它目前的状态，当我继承这个项目时，它已经到位）。

```
 <asp:Table id="tblResults" Runat="server" CssClass="detailTable" CellSpacing="0" CellPadding="4"
                Width="100%">
                <asp:TableRow CssClass="detailRow">
                    <asp:TableCell Width="1%">&nbsp;</asp:TableCell>
                    <asp:TableCell Width="10%">
                        <b>ID</b></asp:TableCell>
                    <asp:TableCell>
                        <b>Title</b></asp:TableCell>
                    <asp:TableCell>
                        <b>Manager</b></asp:TableCell>
                    <asp:TableCell>
                        <b>Start Date</b></asp:TableCell>
                    <asp:TableCell>
                        <b>End Date</b></asp:TableCell>
                    <asp:TableCell>
                        <b>Status</b></asp:TableCell>
                </asp:TableRow>
            </asp:Table> 
```

调用JS函数时表格的innerHTML：

```
<TBODY>
<TD style="WIDTH:1%">&nbsp;</TD>
<TD style="WIDTH:10%"><B>ID</B></TD>
<TD><B>Title</B></TD>
<TD><B>Manager</B></TD>
<TD><B>Start Date</B></TD>
<TD><B>End Date</B></TD>
<TD><B>Status</B></TD></TR></TBODY> 
```

这是成功函数的javascript - 我所做的是我切断了innerHTML的/ TBODY结尾，想要添加返回字符串（包含表格其他行的html的文本） - 然后添加/ TBODY回来关闭表格：

```
function saveSuccess(c) {
var oldInner = document.getElementById('tblResults').innerHTML;
var index = oldInner.indexOf("</TBODY>");
oldInner = oldInner.slice(0, index);
document.getElementById('tblResults').innerHTML = oldInner + c + '</TBODY>';
} 
```

谁能看到我为什么会收到这个错误以及为什么表格没有更新以显示返回的 html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:43:10.173

来自 MSDN：

> innerHTML 属性在 col、colGroup、frameSet、html、head、style、table、tBody、tFoot、tHead、title 和 tr 对象上是只读的。

您必须重建整个表，否则使用 DOM API 修改/添加内容。

# php - 在 WordPress 页面上运行自定义函数

> ID：14629465
> 
> 赞同：0
> 
> 时间：2013-01-31T15:39:27.643
> 
> 标签：php, arrays, wordpress, custom-fields

我的 WordPress 主题`functions.php`文件中有一个函数，代码如下：

```
function locations() {
    $locations_list = array();
    query_posts(array('orderby' => 'date', 'order' => 'DESC' , 'post_type' => 'location'));
    while(have_posts()) {
      $locations_list[the_slug()] = the_title();
    }
    wp_reset_query();
    return $locations_list;
} 
```

这个想法是我可以在我网站的任何地方运行这个函数，它将我所有的帖子存储在一个数组中。

但是，我不知道如何在公共端运行它:'(

完美世界，我想在我的`footer.php`脚本中运行它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:45:28.127

> 完美的世界，我想在我的 footer.php 脚本中运行它。

然后只需从您的主题中运行 footer.php 模板中的函数。

此外，避免使用`query_posts()`自定义查询，因为该功能会改变主查询。直接使用[`WP_Query`](http://codex.wordpress.org/Class_Reference/WP_Query)类：

```
$query = new WP_Query(array(...));
while($query->have_posts()) {
  $query->the_post();
  // $locations...
} 
```

仅供参考[`the_title()`](http://codex.wordpress.org/Function_Reference/the_title)在屏幕上打印帖子标题，因此您无需将其分配给变量，因为它不返回任何内容。

# c++ - 带有boost的python的c ++扩展不起作用

> ID：14629469
> 
> 赞同：0
> 
> 时间：2013-01-31T15:39:32.687
> 
> 标签：c++, python, boost

我有一个小的 c++ 模块：（这段代码很糟糕，但它只是原型）

librecv.cpp：

```
#include <boost/interprocess/managed_shared_memory.hpp>
#include <boost/interprocess/containers/vector.hpp>
#include <boost/interprocess/allocators/allocator.hpp>
#include <string>
#include <stdio.h>
#include <cstdlib>
typedef boost::interprocess::allocator<float, boost::interprocess::managed_shared_memory::segment_manager>  ShmemAllocator;
typedef boost::interprocess::vector<float, ShmemAllocator> DataVector;
void _init()
{
    printf("Initialization of shared object\n");
}
void _fini()
{
    printf("Clean-up of shared object\n");
}
void work()
{
    boost::interprocess::managed_shared_memory segment(boost::interprocess::open_only, "MySharedMemory");
    DataVector *myvector = segment.find<DataVector>("MyVector").first;
    for(int i = 0; i < 100; ++i)  //Insert data in the vector
    {
        printf("%f ", (float)myvector->at(i));
    }
}; 
```

我想在我的 python 代码中使用函数“work” 我尝试编译 C++ 库：（我可能错过了什么吗？）

```
g++ -fPIC -c librecv.cpp  -lboost_system -lrt 
g++ -shared -o libtest.so.1.0 -lc librecv.o 
```

Python代码：

```
from ctypes import *
libtest = cdll.LoadLibrary('./libtest.so.1.0') #python should call function "_init"  here, but nothing happens
libtest.work
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/ctypes/__init__.py", line 378, in __getattr__
    func = self.__getitem__(name)
  File "/usr/lib/python2.7/ctypes/__init__.py", line 383, in __getitem__
    func = self._FuncPtr((name_or_ordinal, self))
AttributeError: ./libtest.so.1.0: undefined symbol: work 
```

操作系统：Ubuntu 有出路吗？PS对不起我的写作错误。非我母语的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:41:39.683

C++ 破坏名称（函数、类、结构、联合等）（参见[此处](http://en.wikipedia.org/wiki/Name_mangling#Standardised_name_mangling_in_C.2B.2B)）。

您可以通过运行以下命令找到在共享对象中实际导出的名称：

```
/usr/bin/nm libtest.so.1.0 
```

在您的情况下，该`work()`功能可能被修改为`_Z4workv()`.

# android - 在 Android 上使用 setTypeface 设置字体后更新 TextView 高度

> ID：14629474
> 
> 赞同：6
> 
> 时间：2013-01-31T15:40:06.347
> 
> 标签：android, fonts, textview

我正在设置`TextView`使用`setTypeface()`方法的字体。

不幸的是，在文本视图的字体更改后，`TextView`通常保持与以前相同的大小。如果新字体比原来的字体稍宽，`TextView`可能会变长 1 行，但布局不会更新。在某些情况下，我看到 2 行文本视图因此从底部被裁剪。

如果`TextView`在 a 内`ScrollView`，则 2 行`TextView`可能会显示为带有滚动条的 1 行，即使有足够的空间仅将其显示为 2 行而不滚动。

显然，操作系统忘记更新字体的高度，`TextView`如果它在字体更改后变长了 1 行。

有什么解决方法吗？`TextView`我可以在设置新字体后立即手动触发高度更新吗？

谢谢！

我`txt.setTypeface(someFont);`马上打电话`setContentView()`

既没有`txt.requestLayout()`也没有`txt.forceLayout()`帮助。

# xpath - 如何计算给定节点之后的所有节点？

> ID：14629481
> 
> 赞同：2
> 
> 时间：2013-01-31T15:40:21.563
> 
> 标签：xpath

### 问题

我正在尝试计算网站显示价格的不同货币的数量。

该网站的主页允许用户从下拉列表中选择一种货币。

我试图找到一个 XPath 表达式来计算下拉列表中的不同货币。

该列表如下所示：

![在此处输入图像描述](../Images/3291b4ff39fe889d1dc46bbafad5a0a0.png)

列表中的前四种货币是用户最常选择的货币。

还会显示按货币代码排序的完整货币列表。完整列表包含前四种货币的重复项。

通过在下拉列表中放置一个禁用的空白选项，“流行”列表和“完整”列表在视觉上是分开的。

主页上用于创建列表的 HTML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<select id="selCurrency" tabindex="122">
  <option value="GBP" selected="selected">Select your currency</option>
  <option value="GBP">GBP - £</option>
  <option value="EUR">EUR - €&lt;/option>
  <option value="PLN">PLN - zł</option>
  <option value="USD">USD - $</option>
  <option value="" disabled="disabled"/>
  <option value="AED">AED - د.إ.‏&lt;/option>
  <option value="AFN">AFN</option>
  <option value="ARS">ARS - $</option>
  <option value="AUD">AUD - $</option>
  <option value="BDT">BDT</option>
  <option value="BGN">BGN - лв.</option>
  <option value="BOB">BOB - Bs.</option>
  <!-- ... -->
</select> 
```

为简洁起见，我删除了屏幕截图中不可见的元素。

### 尝试的解决方案

我的解决方案的想法是只选择空白分隔符之后的所有节点并将它们计数。

此 XPath 表达式仅选择分隔符：

```
//*[@id="selCurrency"]/option[@value=""] 
```

根据[XPath 轴上的 w3schools 页面](http://www.w3schools.com/xsl/xpath_axes.asp)，我可以使用以下兄弟轴来选择当前节点之后的所有兄弟姐妹。

按照示例，我尝试了以下表达式：

```
//*[@id="selCurrency"]/following-sibling::option[@value=""] 
```

但这要么不返回任何内容，要么是非法语法。我不确定是哪个。

如何选择完整币种列表的所有节点，然后进行统计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:34:30.507

您需要结合两次尝试来获得正确的项目：

```
//*[@id="selCurrency"]/option[@value=""]/following-sibling::option 
```

如果你想使用 XPath 来计算这些，这将是计算它们的公式：

```
count(//*[@id="selCurrency"]/option[@value=""]/following-sibling::option) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:17:53.993

JLRishe 已经回答了提出的问题。

隐藏在问题文本中的是对该问题的更一般的描述：

> 找到一个 XPath 表达式，它将计算下拉列表中的不同货币。

JLRishe 的答案解决了这个问题，但依赖于元素的顺序。对于习惯使用套装的人来说，这感觉太脆弱了。如果界面设计者删除了分隔行，或者选择停止复制“完整”列表中的“流行”元素，查询将产生误导性结果。

在[Dimitre Novatchev 的帮助下](https://stackoverflow.com/a/2812762/111424)，我想出了

```
count(/select/option/@value[not(. = '') and not(. = ../following-sibling::option/@value)]) 
```

它过滤掉分隔符值并计算剩余的不同值。当应用于我的示例时，输出为

```
7 
```

我相信这是我想要解决的问题的更强大的解决方案。

# android - 清除所有过去的活动

> ID：14629483
> 
> 赞同：1
> 
> 时间：2013-01-31T15:40:26.760
> 
> 标签：android, android-intent

我正在尝试从一些活动中向我的应用程序添加锁定功能，并且我想确保如果用户按下锁定按钮，用户将无法按回并转到任何过去的活动. 因此，锁定后返回用户手机会将用户带到手机的家中。

我尝试了 CLEAR_TOP 但这并没有奏效，有什么想法吗？

```
 Button lockButton = (Button) findViewById(R.id.lockButton);
lockButton.setOnClickListener(new Button.OnClickListener() {
    public void onClick(View v) {
        Intent intent = new Intent(AccountListActivity.this, LockActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        finish();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:19:58.883

```
 FLAG_ACTIVITY_CLEAR_TOP 
```

只有当您要重新启动第一个活动时，它才会清除堆栈，但在您的情况下，您正在启动一个新活动。所以它不会清除以前的活动。

您可以做一件事来实现您的要求 -

创建一个接口并在所有活动中实现。

然后当您要启动 LockActivity 时，在此之前调用接口的委托来完成所有活动。

# php - 如何获取 getElementsByTagNameNS 内容？

> ID：14629484
> 
> 赞同：0
> 
> 时间：2013-01-31T15:40:29.370
> 
> 标签：php, dom, rss

我正在尝试阅读和解析 RSS 提要。RSS 提要的标题如下：

```
<rss version="2.0" xmlns:content="http://www.mywebsite.com" xmlns:media="http://search.yahoo.com/mrss/" > 
```

我成功地从项目中检索`<title>`和检索，`<link>`但我似乎找不到检索`<content:encoded>`孩子的方法。这就是我到目前为止所尝试的：

```
<?php

//error_reporting(E_ALL);
//ini_set("display_errors", 1);

....

$x=$xmlDoc->getElementsByTagName('item');

foreach($x as $item) {
    $link = $item->getElementsByTagName('link')->item(0)->nodeValue;
    $title = $item->getElementsByTagName('title')->item(0)->nodeValue;
    $content = $item->getElementsByTagNameNS('http://www.mywebsite.com', 'encoded')->item(0);
    echo ("<p><a href='" . $link. "'>" . $title . "</a></p><p>" . $content . "</p>");
}

?> 
```

您可以想象`$content`即使我尝试获取`nodeValue`属性也是空的，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T05:29:38.240

**这里的标签名称是“编码的”。**

只需使用

```
$content => $node->getElementsByTagName('encoded')->item(0)->nodeValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:36:53.467

我最终使用了 SimpleXmlElement：

```
$x = new SimpleXmlElement($s);

foreach($x->channel->item as $entry) {

    $content = $entry->children("content", true);
    echo "<p>".$content->encoded."</p>";
} 
```

奇迹般有效。

# unix - 在 .bash_profile 中解析 Cygwin 或 Unix 别名命令

> ID：14629487
> 
> 赞同：0
> 
> 时间：2013-01-31T15:40:46.047
> 
> 标签：unix, command-line, cygwin

我试图完全理解 .bash_profile 中的 Cygwin 别名命令。它工作得很好。但是，我需要理解它，以便我可以在其他别名命令或一般其他命令行中使用它。命令是：

```
alias lf="ls -l | egrep -v '^d'" 
```

我了解除此处包含的 ^d 之外的所有命令。我知道如何使用别名、基本的 Unix 命令、管道、ls、egrep 和其他一般情况。我也了解替换的过程。我只是不明白 ^d 本身。

不仅仅是解释那个特定的结构，如果你能把我推荐给一个解释它的一般用法的网站，那真的很有帮助。谷歌和我似乎对我的搜索没有意见一致。

另外，您能否告诉我是否有某种方法可以“回显”这样的命令，以便您可以在处理它时看到它？这将有助于我将来诊断出这样的问题。

谢谢...RG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:48:47.853

ls -l 输出从 d 开始用于目录

'^d' 是一个正则表达式，匹配行首的符号 'd'

-v 开关告诉 egrep*排除*匹配正则表达式的行

因此，我们过滤掉“ls -l”输出以排除目录

# facebook - Facebook WordPress 插件无法提交 Opengraph 操作

> ID：14629489
> 
> 赞同：1
> 
> 时间：2013-01-31T15:40:54.050
> 
> 标签：facebook, wordpress, facebook-opengraph

我在这里逐步完成了 Facebook 提供的步骤：[https ://developers.facebook.com/wordpress/](https://developers.facebook.com/wordpress/)

如果您向下滚动到：启用发布到作者的时间轴这是我正在执行的步骤，并且似乎是一个问题。这是我的问题： **“为了公开发布到作者时间线的帖子，您需要先提交新创建的 Open Graph 操作以供批准，然后发布到作者时间线的帖子才会向公众显示。”** 当我按下操作旁边的提交链接时，我收到此错误：

```
Publish Actions
You must publish at least one action to your Timeline using this action type. Review the documentation. 
```

那么如果在批准之前无法从我的博客提交，我该如何提交呢？当我在 wordpress 中做一个测试博客时，没有任何帖子发布到 Facebook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:27:28.720

您只需使用注册为应用程序的“开发人员”或“测试人员”的用户帐户发布一些操作。您可以通过查看测试用户的活动日志来检查操作是否已成功发布。发布一些操作后，您可以提交操作。

但是：确保使用 App-Dashboard 中的 Auth-Test-Users 测试您的应用程序 - 这就是 Facebook 测试您的应用程序以获得批准的方式，所以如果您的应用程序在这里失败 - 运气不好！

# android - 没有gcm的Android推送消息可能吗？

> ID：14629490
> 
> 赞同：23
> 
> 时间：2013-01-31T15:40:59.417
> 
> 标签：android, push-notification

有没有可能在没有谷歌云消息的情况下实现向 android 推送消息？

我已经对 openmobster 有所了解，但它不能满足我的需求。

我需要：

*   创建推送消息到 android 设备
*   自托管

一个完整的 android 同步框架（带 REST）会更好:)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:43:24.403

您可以使用

[咄咄逼人的我](https://pushy.me/)

[Tokudu 通知](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:04:48.953

Rabbitmq 工作得很好，但我不知道有效性。CloudAMQP.com 的 Roaring Rabbit 仅支持 100 个并发连接，每月 229 美元。如果你有超过 100 部当前连接到 rabbit 的手机怎么办。我使用 cloudamqp.com 的 little lemure 推动了这一进程。可能你需要在 ec2 中有一个 rabbitmq 服务器。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-31T15:50:00.787

You can check with Parse library

[https://www.parse.com/docs/android_guide](https://www.parse.com/docs/android_guide)

You can also see userban airship.

[https://docs.urbanairship.com/display/DOCS/Home](https://docs.urbanairship.com/display/DOCS/Home)

# ruby-on-rails-3 - Capybara 测试：js=>true... 路由错误：没有路由匹配 [GET] "/assets"

> ID：14629491
> 
> 赞同：42
> 
> 时间：2013-01-31T15:41:02.017
> 
> 标签：ruby-on-rails-3, capybara, rspec-rails

当我向它们添加“：js => true”时，我在许多测试中都遇到了类似的错误。例如：

```
 An error occurred in an after hook
      ActionController::RoutingError: No route matches [GET] "/assets"
      occurred at /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/actionpack-3.2.5/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call' 
```

我之前没有在我的应用程序中测试支持 JavaScript 的东西，只是通过升级到 Capybara 2 并安装 Database Cleaner 来进行设置。config.use_transactional_fixtures = false，我已经在我的 spec_helper 文件中添加了一些之前/之后的钩子（钩子？），我直接从[此处](https://stackoverflow.com/questions/13071813/rspec-rails-capybara-different-failures-with-js-true-and-without)接受的答案复制了这些文件。

我在跑：

*   导轨 3.2.5
*   Rspec-rails 2.12.2。

谁能告诉我如何攻击这个？非常感谢！

```
 4) Event pages 'CREATE' submitting a valid form provides a success notification and displays new event's page 
    Failure/Error: Unable to find matching line from backtrace
    ActionController::RoutingError:
    No route matches [GET] "/assets"
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/actionpack-3.2.5/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/actionpack-3.2.5/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/railties-3.2.5/lib/rails/rack/logger.rb:26:in `call_app'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/railties-3.2.5/lib/rails/rack/logger.rb:16:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/actionpack-3.2.5/lib/action_dispatch/middleware/request_id.rb:22:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/activesupport-3.2.5/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/actionpack-3.2.5/lib/action_dispatch/middleware/static.rb:62:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/railties-3.2.5/lib/rails/engine.rb:479:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/railties-3.2.5/lib/rails/application.rb:220:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/rack-1.4.1/lib/rack/urlmap.rb:64:in `block in call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `each'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/bundler/gems/capybara-8368069cfd05/lib/capybara/server.rb:19:in `call'
    # /Users/appletart/.rvm/gems/ruby-1.9.3-p0@eventful2/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
    # /Users/appletart/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
    # /Users/appletart/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
    # /Users/appletart/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-18T20:48:28.883

您丢失的路线看起来像一些带有零输入的自动生成的资产路径。您确定您的资产在您的 css/sass 中或该路由的来源中正确指定了吗？

我一直在努力解决资产路径引发路由错误的类似问题

```
 1) user signup: [ JS ] : creates User on successful signup
     Failure/Error: Unable to find matching line from backtrace
     ActionController::RoutingError:
       No route matches [GET] "/assets/images/leftArrow.png" 
```

然后是与您的堆栈跟踪几乎相同的堆栈跟踪。在我的情况下，事实证明该资产实际上丢失了（直到最近我在我的 development.log 和我的测试环境中都没有注意到它在空闲几个月后鲁莽地“捆绑更新”了一个项目）

一路走来，我学到了很多关于 Capybara 的 app_host 和资产处理、不同环境中的资产预编译、Application.configure.assets.[debug|digest|...] 等，这可能是你应该首先搜索的地方. 或者在 sprockets/sass-rails url helper ...毕竟你丢失的路线仍然看起来像一些自动生成的资产路径，输入为空）

如果上述方法没有帮助，解决方法可能是在 environment/test.rb 中添加以下行：

```
config.action_dispatch.show_exceptions = true 
```

虽然没有直接解决问题，但在我的情况下它成功地抑制了它。

另一种解决方法可能在 spec_helper.rb 中：

```
 ActionController::Base.asset_host = "http://myapp.dev" 
```

其中 myapp.dev 是 myApp 在开发模式下的一个运行实例，它提供资产或至少不会命中资产的测试路由，但可能只有在完全绝望的情况下才应该这样做。它的灵感来自于避免资产编译的策略，如 [http://johnbintz.github.com/blog/2012/01/07/cucumber-capybara-asset-pipeline-debug-mode/中所述](http://johnbintz.github.com/blog/2012/01/07/cucumber-capybara-asset-pipeline-debug-mode/)

也可能有帮助： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html) [http://rubydoc.info/github/jnicklas/capybara/master/Capybara#configure-class_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara#configure-class_method)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-06-17T10:26:03.907

就我而言，添加：

```
config.assets.debug = true 
```

修复`config/environments/test.rb`它。

在[文档](http://guides.rubyonrails.org/asset_pipeline.html#upgrading-from-old-versions-of-rails)中，据说：

> 您不需要更改 test.rb。测试环境中的默认值是：config.assets.compile 为 true，config.assets.compress、config.assets.debug 和 config.assets.digest 为 false。

但是，至少在我的情况下，我需要改变它......如果有人能解释它为什么有效，我会很高兴......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T21:14:15.800

就我而言，我得到

```
 Failure/Error: Unable to find matching line from backtrace
 ActionController::RoutingError:
   No route matches [GET] "/favicon.ico" 
```

我已经在app/assets/images下放了一个空文件favicon.ico，所以开发服务器没问题。但是在这种情况下，测试环境不知道如何处理资产。我发现的解决方法是打开静态服务（而不是使用不同的服务器来服务静态资产）。惩罚当然是性能。

```
 in environments/test.rb, set
  config.serve_static_assets = true # default is false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-10T23:30:21.837

就我而言，默认的缺失图像设置为指向 s3。我真的不在乎图像是否已加载。`PhantomJs`可以通过命令行 arg 禁用图像加载`--load-images=no`。

在`Poltergeist`中，这可以在注册驱动程序时设置：

`Capybara.register_driver :poltergeist do |app| Capybara::Poltergeist::Driver.new(app, :phantomjs_options => ['--load-images=no']) end`

# php - ftp_delete 不起作用 -> “1 不是有效的 FTP 缓冲区资源...”

> ID：14629493
> 
> 赞同：0
> 
> 时间：2013-01-31T15:41:05.637
> 
> 标签：php, ftp

我已经按照代码通过 ftp 以 html 形式上传文件。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', true);
// $ftp_server = "xxx";
$ftp_server = 'xxx';
$ftp_username   = "xxx";
$ftp_password   =  "xxx";

//setup of connection
$conn_id = ftp_connect($ftp_server) or die("could not connect to $ftp_server");
//login
if(ftp_login($conn_id, $ftp_username, $ftp_password))
  {
  echo "conectd as $ftp_username@$ftp_server\n";
}
 else {
  echo "could not connect as $ftp_username\n";
}
$file = $_FILES["uploadedfile"]["name"];
$remote_file_path = "/import/".$file;
ftp_put($conn_id, $remote_file_path, $_FILES["uploadedfile"]["tmp_name"], FTP_ASCII);
ftp_close($conn_id);
echo "\n\nconnection closed";

include("writedb.php"); 

if (ftp_delete($conn_id, $file)) {
 echo "$file deltet successful.\n";
} else {
 echo "cant delete: $file\n";
}

?> 
```

除了删除上传的文件外，一切都有效。

错误是这样的：

```
Warning: ftp_delete(): 1 is not a valid FTP Buffer resource in   (correct path) on line 29
cant delete: daten.csv 
```

我的代码有什么问题？

谢谢你们 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:44:28.817

在尝试删除文件之前，您正在关闭连接；这显然行不通。这就是为什么它说它不是有效资源（不再是）。

先删除，然后关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:03:22.007

您必须更改 -> if (ftp_delete($conn_id, $file)) {

如果 (ftp_delete($conn_id, $remote_file_path)) {

因为您不在正确的目录中

我希望这有效！

# .net - 生成返回属性值的函数

> ID：14629494
> 
> 赞同：0
> 
> 时间：2013-01-31T15:41:09.537
> 
> 标签：.net, reflection.emit

我正在尝试发出以下内容：

这是一个结构，它将作为属性包含在动态发出的类中：

```
public struct GeoPoint
{
    public double? lat { get; set; }

    public double? lon { get; set; }
} 
```

我必须发出以下课程：

```
public class GeoPointOwner
{
    public GeoPoint GeoPoint{get; set;}
    public double? Getlat ()
    {
        return GeoPoint.lat;
    }
} 
```

我不知道如何正确发出方法 GeoPointOwner.Getlat

这是我的代码：

```
var mbGet = typeBuilder.DefineMethod("Getlat", MethodAttributes.Public, typeof(double?), Type.EmptyTypes);
var genGet = mbGet.GetILGenerator();
genGet.Emit(OpCodes.Ldarg_0);
//getMethodInfo below is MethodInfo of Getter of GeoPoint property
genGet.Emit(OpCodes.Call, getMethodInfo);
var getMethod = typeof(GeoPoint).GetProperty("lat").GetGetMethod(true);
//code emitted below fails when invoked
genGet.Emit(OpCodes.Callvirt, getMethod);
genGet.Emit(OpCodes.Stloc_0);
genGet.Emit(OpCodes.Ret); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:58:41.967

正如我在评论中建议的那样，如果出现这样的错误，最好在生成的程序集中使用 PEVerify。在您的代码上使用它将帮助您修复它。

如果我在生成的程序集上运行它，我会收到以下错误：

> [GeoPointOwner::Getlat][offset 0x00000006] 在值类型方法上调用virt。

您不能使用`callvirt`在值类型上调用方法（在您的情况下，这是 getter for `GeoPoint.lat`），`call`而是使用。

修复后，我收到两个新错误：

> [GeoPointOwner::Getlat][offset 0x00000006][found value 'ConsoleApplication1.GeoPoint'][expected address of value 'ConsoleApplication1.GeoPoint'] 堆栈上的意外类型。
> 
> [GeoPointOwner::Getlat][offset 0x0000000B] 无法识别的局部变量号。

我要先修复第二个。您正在使用`stloc_0`，它将堆栈顶部的值存储到局部变量#0。它失败了，因为您没有声明任何本地人。我不明白你为什么要这样做，因为你不需要任何当地人。您可以直接返回 的结果`call`，因此您可以删除`stloc_0`.

第一个错误更复杂。当你想调用一个值类型的方法时，你实际上需要一个对该类型变量的引用。我们现在没有变量，这意味着我们必须创建一个（使用`DeclareLocal()`），将值保存到本地（`stloc`），然后加载该本地的地址（`ldloca`）。有关更多信息，请参阅问题*[Method invocation on a struct？](https://stackoverflow.com/q/5895458/41071)*.

通过这些更改，您的代码将变为：

```
var getlatBuilder = type.DefineMethod("Getlat", MethodAttributes.Public, typeof(double?), Type.EmptyTypes);
var il = getlatBuilder.GetILGenerator();
var getPointLocal = il.DeclareLocal(typeof(GeoPoint));

il.Emit(OpCodes.Ldarg_0);
il.Emit(OpCodes.Call, geoPointGetter);

il.Emit(OpCodes.Stloc, getPointLocal);
il.Emit(OpCodes.Ldloca, getPointLocal);

var latGetter = typeof(GeoPoint).GetProperty("lat").GetGetMethod(true);
il.Emit(OpCodes.Call, latGetter);
il.Emit(OpCodes.Ret); 
```

# java - 如何在 Java 中拆分 HashMap

> ID：14629496
> 
> 赞同：9
> 
> 时间：2013-01-31T15:41:09.907
> 
> 标签：java, hashmap

我想知道是否可以将 HashMap 拆分为更小的子图。

在我的例子中，我有一个 100 个元素的 HashMap，我想从原始元素创建 2 个（或更多）更小的 HashMap，第一个包含从 0 到 49 的条目，第二个包含从 50 到 99 的条目。

```
Map <Integer, Integer> bigMap = new HashMap <Integer, Integer>();

//should contains entries from 0 to 49 of 'bigMap'
Map <Integer, Integer> smallMap1 = new HashMap <Integer, Integer>(); 

//should contains entries from 50 to 99 of 'bigMap'
Map <Integer, Integer> smallMap2 = new HashMap <Integer, Integer>(); 
```

有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T15:45:26.713

你必须使用`HashMap`吗？

`TreeMap`真的很适合这种事情。这是一个示例（请注意，0、50 和 99 是映射键，*而不是*索引）：

```
TreeMap<Integer, Integer> sorted = new TreeMap<Integer, Integer>(bigMap);

SortedMap<Integer, Integer> zeroToFortyNine = sorted.subMap(0, 50); // toKey inclusive, fromKey exclusive
SortedMap<Integer, Integer> fiftyToNinetyNine = sorted.subMap(50, true, 99, true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T15:42:07.620

您基本上需要遍历 中的条目`bigMap`，并决定是否应将它们添加到`smallMap1`或`smallMap2`中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T15:44:52.253

由于`HashMap`是无序的（条目可能以任何顺序出现），因此完全拆分它是没有意义的。我们可以简单地使用交替的布尔标志。

```
boolean b = false;
for (Map.Entry e: bigMap.entrySet()) {
  if (b)
    smallMap1.put(e.getKey(), e.getValue());
  else
    smallMap2.put(e.getKey(), e.getValue());
  b = !b;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T15:45:21.193

遍历`bigMap`with`for (Entry<Integer, Integer> entry : bigMap.entrySet())`并增加 an`i`以检查您是否必须在第一个小地图或第二个小地图中添加条目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-03T12:54:49.673

这是一个使用 SortedMap 的解决方案：

```
public static <K, V> List<SortedMap<K, V>> splitMap(final SortedMap<K, V> map, final int size) {
    List<K> keys = new ArrayList<>(map.keySet());
    List<SortedMap<K, V>> parts = new ArrayList<>();
    final int listSize = map.size();
    for (int i = 0; i < listSize; i += size) {
        if (i + size < listSize) {
            parts.add(map.subMap(keys.get(i), keys.get(i + size)));
        } else {
            parts.add(map.tailMap(keys.get(i)));
        }
    }
    return parts;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-04T14:03:40.470

这里有两种简单的方法来分割地图，

1.  分区的大小或

2.  分区数

    ```
     /**
      *
      * @param bulkyMap - your source map to be partitioned
      * @param batchSize - partition size
      * @return
      */
     public List<Map<String, Object>> getMiniMapsInFixedSizeBatches(Map<String, Object> bulkyMap, int batchSize) {
         if (batchSize >= bulkyMap.size() || batchSize <= 0) {
             return Arrays.asList(bulkyMap);
         }
         List<Map<String, Object>> batches = new ArrayList<>();
         int innerBatchcount = 1;
         int count = 1;
         Map<String, Object> tempMap = new HashMap<>();
         for (Map.Entry<String, Object> entry : bulkyMap.entrySet()) {
             tempMap.put(entry.getKey(), entry.getValue());
             innerBatchcount++;
             count++;
             if (innerBatchcount > batchSize || count > bulkyMap.size()) {
                 innerBatchcount = 1;
                 Map<String, Object> batchedMap = new HashMap<>();
                 batchedMap.putAll(tempMap);
                 batches.add(batchedMap);
                 tempMap.clear();
             }
         }
         return batches;
     }

     /**
      * the number of partitions is not always guaranteed as the algorithm tries to optimize the number of partitions
      * @param bulkyMap - your source map to be partitioned
      * @param numPartitions  - number of partitions (not guaranteed)
      * @return
      */
     public List<Map<String, Object>> getMiniPartitionedMaps(Map<String, Object> bulkyMap, int numPartitions) {
         int size = bulkyMap.size();
         int batchSize = Double.valueOf(Math.ceil(size * 1.0 / numPartitions)).intValue();
         return getMiniMapsInFixedSizeBatches(bulkyMap, batchSize);
     } 
    ```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-10T06:15:21.907

您可以使用 Guava Iterables 分区方法和 Java 流接口来解决它。

```
import com.google.common.collect.Iterables;
import com.google.common.collect.Lists;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

public static <K, V> List<Map<K, V>> split(Map<K, V> map, int size) {
    List<List<Map.Entry<K, V>>> list = Lists.newArrayList(Iterables.partition(map.entrySet(), size));

    return list.stream()
            .map(entries ->
                    entries.stream().collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue))
            )
            .collect(Collectors.toList());
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-31T15:44:09.377

```
for (Map.Entry<Integer,Integer> entry : bigMap.entrySet()) {
   // ...
} 
```

是迭代原始地图的最快方法。然后，您将使用[Map.Entry](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html)键来决定要填充哪个新地图。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-19T21:20:04.210

这是对我有用的功能之一，我希望它对其他人有帮助。无论存储为键的对象/原语如何，这个都可以工作。

上面建议的 TreeMap 方法只有在键是原始的、有序的和精确的索引序列时才有效。

```
 public List<Map<Integer, EnrichmentRecord>> splitMap(Map<Integer, EnrichmentRecord> enrichmentFieldsMap,
            int splitSize) {

        float mapSize = enrichmentFieldsMap.size();
        float splitFactorF = splitSize; 
        float actualNoOfBatches = (mapSize / splitFactorF);
        double noOfBatches = Math.ceil(actualNoOfBatches);

        List<Map<Integer, EnrichmentRecord>> listOfMaps = new ArrayList<>();

        List<List<Integer>> listOfListOfKeys = new ArrayList<>();

        int startIndex = 0;
        int endIndex = splitSize;

        Set<Integer> keys = enrichmentFieldsMap.keySet();
        List<Integer> keysAsList = new ArrayList<>();
        keysAsList.addAll(keys);

        /*
         * Split the keys as a list of keys,  
         * For each key sub list add to a Primary List - listOfListOfKeys
         */
        for (int i = 0; i < noOfBatches; i++) {
            listOfListOfKeys.add(keysAsList.subList(startIndex, endIndex));         
            startIndex = endIndex;
            endIndex = (int) (((endIndex + splitSize) > mapSize) ? mapSize : (endIndex + splitSize));
        }

         /**
         * For Each list of keys, prepare a map
         *
         **/
        for(List<Integer> keyList: listOfListOfKeys){
            Map<Integer,EnrichmentRecord> subMap = new HashMap<>();
            for(Integer key: keyList){
                subMap.put(key,enrichmentFieldsMap.get(key));
            }
            listOfMaps.add(subMap);
        }

        return listOfMaps;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-27T11:35:17.150

这可能是使用 headMap 和 tailMap 的另一种解决方案

```
SortedMap<Integer, String> map1 = new TreeMap<>();
    map1.put(2, "Abc");
    map1.put(3, "def");
    map1.put(1, "xyz");
    map1.put(5, "mddf");
    System.out.println(map1);

    SortedMap<Integer, String> sm1 = map1.headMap(4); // from 0 to x (key) from front
    SortedMap<Integer, String> sm2 = map1.tailMap(1); //tail starting from key
    System.out.println("Head Map"+ sm1);
    System.out.println("Tail Map"+sm2); 
```

输出是

```
{1=xyz, 2=Abc, 3=def, 5=mddf}
Head Map{1=xyz, 2=Abc, 3=def}
Tail Map{1=xyz, 2=Abc, 3=def, 5=mddf} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-18T20:41:49.873

从@Nizamudeen Karimudeen 的回答构建，如果没有大量的重写，我就无法开始工作......这个方法适用于其中包含任何类的任何 HashMap。

因此，假设您要拆分的 Map 定义如下：

```
Map<String, MyClass> myMap = new HashMap<>(); 
```

如果您希望将其拆分为 20 个单独的地图，您只需将其拆分为：

```
List<Map<String, MyClass>> splitMapList = splitMap(myMap, 20); 
```

然后要使用每个单独的地图，您可以像这样遍历它们：

```
for (Map<String, MyClass> mySplitMap : splitMapList) {
     for(String key : mySplitMap.keySet()) {
         MyClass myClass = mySplitMap.get(key);
     }
} 
```

或者您可以通过列表的索引等直接引用它们。

```
Map<String, MyClass> subMap = splitMapList.get(3); 
```

这是方法：

```
public static List<Map<KeyClass, ValueClass>> splitMap(Map<KeyClass, ValueClass> originalMap, int splitSize) {
    int mapSize = originalMap.size();
    int elementsPerNewMap = mapSize / splitSize;
    List<Map<KeyClass, ValueClass>> newListOfMaps = new ArrayList<>(); //Will be returned at the end after it's built in the final loop.
    List<List<KeyClass>> listOfMapKeysForIndexing = new ArrayList<>(); //Used as a reference in the final loop.
    List<KeyClass> listOfAllKeys = new ArrayList<>(originalMap.keySet());
    int maxIndex = listOfAllKeys.size() - 1; //We use this in the first loop to make sure that we never exceed this index number or we will get an index out of range.
    int startIndex = 0;
    int endIndex = elementsPerNewMap;
    for (int i = 0; i < splitSize; i++) { //Each loop creates a new list of keys which will be the entire set for a new subset of maps (total number set by splitSize.
        listOfMapKeysForIndexing.add(listOfAllKeys.subList(startIndex, endIndex));
        startIndex = Math.min((endIndex + 1), maxIndex);//Start at the next index, but don't ever go past the maxIndex or we get an IndexOutOfRange Exception
        endIndex = Math.min((endIndex + elementsPerNewMap), maxIndex);//Same thing for the end index.
    }
    /*
     * This is where we use the listOfMapKeysForIndexing to create each new Map that we add to the final list.
     */
    for(List<KeyClass> keyList: listOfMapKeysForIndexing){
        Map<KeyClass,ValueClass> subMap = new HashMap<>(); //This should create a quantity of these equal to the splitSize.
        for(KeyClass key: keyList){
            subMap.put(key,originalMap.get(key));
        }
        newListOfMaps.add(subMap);
    }
    return newListOfMaps;
} 
```

# c - struct 中间的可变长度数组 - 为什么这个 C 代码对 gcc 有效

> ID：14629504
> 
> 赞同：23
> 
> 时间：2013-01-31T15:41:43.490
> 
> 标签：c, gcc, c99, c11, variable-length-array

有一些使用 VLA（可变长度数组）的奇怪代码被 gcc 4.6 视为有效 C（C99，C11）：

```
$ cat a.c
int main(int argc,char**argv)
{
  struct args_t{
     int a;
     int params[argc];        // << Wat?
                        // VLA in the middle of some struct, between other fields
     int b;
  } args;

  args.b=0;

  for(args.a=0;args.a<argc;args.a++)
  {
    args.params[args.a]=argv[0][0];
    args.b++;
  }
  return args.b;
} 
```

此代码编译时没有警告：

```
$ gcc-4.6 -Wall -std=c99 a.c && echo $?
0
$ ./a.out ; echo $?
1
$ ./a.out 2; echo $?
2
$ ./a.out 2 3; echo $?
3 
```

同样适用于`-std=c1x`：

```
$ gcc-4.6 -Wall -std=c1x a.c && echo $?
0 
```

但这不适用于英特尔 C 编译器或 Clang+LLVM：

```
$ icc a.c -o a.icc
a.c(5): warning #1361: variable-length array field type will be treated as zero-length array field type
       int params[argc];
                  ^
$ ./a.icc; echo $?
47

$ clang a.c -o a.clang
a.c:5:10: error: fields must have a constant size: 'variable length array in structure' extension will never be supported
     int params[argc];
         ^
1 error generated. 
```

所以：

1.  为什么这被 GCC 认为是有效的？
2.  如果它是 GCC 的扩展，它在哪里描述？
3.  它在 C99 和 C11 ISO 标准中有效吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T15:48:26.607

GCC does not allow it, compile with `-std=c99 -pedantic-errors`. A VLA inside a struct is apparently a (poorly documented) non-standard GNU C feature. [See this](https://stackoverflow.com/questions/12058760/undocumented-gcc-extension-vla-in-struct).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T16:20:08.077

标准非常清楚，VLA 不允许在 a 中使用`struct`：

> ### 6.7.2.1 结构和联合说明符
> 
> 9 - 结构或联合的成员可以具有除可变修改类型之外的任何完整对象类型。[...]

可变修改类型是（如您所料）从可变长度数组派生的类型（例如，通过添加数组维度或 cv 限定符）：

> ### 6.7.6 声明符
> 
> 3 - [...] 如果在完整声明符的嵌套声明符序列中，有一个声明符指定了可变长度数组类型，则完整声明符指定的类型被称为可变修改。此外，通过声明符类型派生自可变修改类型的任何类型本身都是可变修改的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-03-06T18:04:23.693

C89 标准的作者认识到许多实现实现了在其他实现上可能不切实际的有用特性，并认为这是*一件好事*。该标准旨在作为实施的最低要求；它从来没有打算阻止实现提供除此之外的功能。

该标准要求，如果符合要求的实现允许在块范围内定义的结构内声明可变长度数组，则它必须将此类行为记录为扩展，或者在代码包含此类声明时发出诊断。由于在发出这样的诊断后，实现可以随意处理代码，*无论它是否记录了扩展*，因此对记录扩展的要求只能有意义地应用于不生成诊断的扩展。这反过来又表明这样的事情必须是允许的。

该标准确实要求扩展不会对任何严格符合程序的行为产生不利影响，但是由于没有这样的程序可以在结构中包含 VLA 声明，因此这里的要求不是问题。

# php - 如何在 PHP 中定位 HTML 字符串中的特定段落

> ID：14629514
> 
> 赞同：-1
> 
> 时间：2013-01-31T15:42:04.700
> 
> 标签：php

一个适合所有 PHP 人员的简单程序。我有一个字符串，它代表 HTML 的一部分。它看起来像这样：

```
<p>blablabla.....</p>
<p>blablabla.....</p>
<p>blablabla.....</p>
<p>blablabla.....</p>
<h3>hello</h3>
<p>blablabla.....</p>
<p>blablabla.....</p> etc etc 
```

我想做的是遍历节点，对每个节点应用一个类，直到我点击 h3。

谢谢，

编辑到目前为止我已经尝试过：

```
$dochtml = new DOMDocument();
$dochtml->loadHTML($strhtml); 

foreach ($dochtml->childNodes as $node)
{

    if($node->tagName == "p") {
    $node->setAttribute('class', 'someclass');
    } else {
    break;
}
} 
```

这根本行不通。

HTML 片段来自数据库，代表 CMS 中页面的可编辑部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:46:52.600

尝试：

```
$html = '<xml><p>blablabla.....</p>
         <p>blablabla.....</p>
         <p>blablabla.....</p>
         <p>blablabla.....</p>
         <h3>hello</h3>
         <p>blablabla.....</p>
         <p>blablabla.....</p></xml>';
$xml = new SimpleXMLElement($html);

foreach ($xml as $key => $value) {
    if ( $key == 'h3' ) {
        var_dump($value);
        break;
    }
} 
```

请注意，我添加了`<xml>`标签，因为应该有一些包含其他项目的根元素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T15:47:57.880

好：

```
<?php

$string = explode( '<h3>', $string );
$string[0] = str_replace( '<p>', '<p class="foo">', $string[0] );
$string = implode( '<h3>', $string ); 
```

# node.js - node.js是绘制线连接用户点时服务器端的功能？

> ID：14629518
> 
> 赞同：0
> 
> 时间：2013-01-31T15:42:10.440
> 
> 标签：node.js

我希望每个用户都有一个代表他们的鼠标的点，然后让画布在用户的点之间画线。

所以我想知道绘图线功能是否在服务器端？那么Eventemitter怎么写呢？

我是初学者，所以...请尽可能详细说明。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:45:08.520

不。将 node.js 视为服务器端技术，如果您使用 Ruby、Java、PHP 等，您的客户端方法将基本相同。

绘图只是客户端，您可以在客户端 JS 中使用诸如画布标签和 API 之类的东西。

希望这可以帮助。

哦，关于每个用户的鼠标，node.js 服务器负责接收每个用户的位置，然后将这些点发送给客户端。当每个客户端收到这些点更新时，您在本地 javascript 中重绘画布等（同样，不是节点 js）。这听起来像是[socket.io](http://socket.io/)的一个很好的用例（基于 WebSockets）

# jquery - JQuery/JSON 和 MVC 模型可以共存吗？

> ID：14629523
> 
> 赞同：0
> 
> 时间：2013-01-31T15:42:22.940
> 
> 标签：jquery, asp.net-mvc-4

我有一个页面（又名 PAGE1），它有一个复杂的网格（如 jqgrid），您可以对结果进行过滤/排序/分页。当您单击网格上的一行时，我想加载/获取我在不同视图（又名 PAGE2）中拥有的表单并将其加载到 PAGE1 上的 DIV 容器中。我想这样做而不是重定向到 PAGE2，因为我想保持 PAGE1 的状态（即：排序和分页结果）。

PAGE2 有一个加载页面的模型，允许用户编辑字段并提交更改。我真的很喜欢 MVC 的开箱即用功能，它可以验证字段并突出显示有问题的字段（除其他外），但 MVC（开箱即用）会进行回发。这会重新加载整个页面，所以现在浏览器在 PAGE2 上，而 PAGE1 消失了（连同它的状态）。

有没有办法以这样的方式加载 PAGE2（没有 iframe！）回发只会刷新它加载的 PAGE1 上的 DIV？

此外，当我 .get() PAGE2 进入 PAGE1 上的 DIV - 如果 PAGE2 中有任何插件，当我关闭 PAGE2 时，它似乎会破坏 PAGE1 ....不确定两者是否相关。

我希望这是有道理的-提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:00:54.310

当我需要做这样的事情时，我`Html.RenderPartial`在页面上使用一个`Ajax.BeginForm`- ajax 的 Razor 助手处理了很多，但是由于你正在进入杂草，我不确定你为什么不能只是设置ajax 自己调用（onSuccess，onFailure）。

# python - Python/Django 装饰器可以访问哪些信息？

> ID：14629528
> 
> 赞同：1
> 
> 时间：2013-01-31T15:42:49.550
> 
> 标签：python, django, http-headers, decorator

我在我们的代码中做了一些重构。`@render_to_json`装饰器在内部调用了一个方法`is_logged_in`。我将删除它以支持简单地添加另一个显式`@login_required`装饰器。

问题是我们的一些方法是通过 AJAX 调用的，并且期望得到一个 json 响应，`{"status": "logged_out"}`然后它们会对其进行操作。所以我需要改变我们的 login_required 方法以某种方式检查两件事之一。

*   此方法是否通过 AJAX 调用，可能检测到`XMLHttpRequest`标头
*   装饰师是否`render_to_json`也提出了这个要求。想法是，如果该`login_required`方法知道请求需要 json，那么它可以返回 json 数据包，否则正常重定向。

**更新**添加第三个选项。

*   在每种情况下，一个带有`@render_to_json`装饰器的方法，装饰`@login_required`器在它之前被引用。如果用户已注销，则该`@login_required`方法返回。`HttpResponseRedirect`在该`@render_to_json`方法中，我将如何检查 login_required 方法的返回类型并做出适当的响应？

想法？问题？

我应该补充一点，我对 Python 也很陌生，所以我可能会遗漏一些基本的东西。如果有，帮我学习一下？

**更新**

我将继续在此处添加两个装饰器以供参考。

```
def render_to_json(fn):

    @wraps(fn)
    def inner(request, *args, **kwargs):
        result = fn(request, *args, **kwargs)
        return HttpResponse(json.dumps(result), mimetype='application/json')

    return inner

def login_required(func):
    @wraps(func)
    def _decorator(request, *args, **kwargs):
        if not is_logged_in(request):
            from apps.core.extendedLogging import ExtendedLogging
            ExtendedLogging.log("In login req'd: it appears that the user is not logged in", request)
            request.session['login_referrer_uri'] = request.build_absolute_uri()
            return HttpResponseRedirect(settings.LOGIN_URL)
        return func(request, *args, **kwargs)
    return _decorator 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:43:35.250

装饰者可以访问“装饰者”正在接收的所有数据：

```
def method_decorator(operation):
    """
    On this case operation = view_method
    """
    def wrapper(*args, **kwargs):
        """
        Receives all arguments the requested operation would receive
        """
            request = args[0]
            param = args[1]
            more_param = args[2]

            return operation(request, param, more_param)
    return wrapper

@method_decorator
def view_method(request, param, more_param):
    #something 
```

所以，当你调用“view_method”时，首先你会抛出“method_decorator”，然后调用“view_method”。

现在，在装饰器中，您可以验证您需要的任何内容并传递新信息，例如：

```
def wrapper(*args, **kwargs):
        ...
        if some_condition:
            request.new_content = new_content
        return operation(request, param, more_param)
return wrapper 
```

这将允许您在请求的 view_method 上接收 new_content：

```
@method_decorator
def view_method(request, param, more_param):
    new_content = request.new_content 
```

而且，希望 view_method 现在知道该做什么。

您也可以使用相同的方法将数据从装饰器冒泡到装饰器。

# javascript - 验证表单中任意数量的输入字段

> ID：14629531
> 
> 赞同：0
> 
> 时间：2013-01-31T15:42:57.510
> 
> 标签：javascript, validation, input

我正在尝试为百分比输入字段创建验证，如提供的链接所示： [https ://tinker.io/f5c2c/1](https://tinker.io/f5c2c/1)

当您将值添加到 BOTH 字段时，这目前有效。我想要它，所以如果你只是为其中一个添加一个值，表单仍然有效。在 JS 中，您可以看到每个输入字段都需要单独的 id，当添加并添加到 100 时，它会验证。我需要它工作，这样您就可以显示许多空字段，但只需将数据输入其中任何一个并点击提交即可验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:53:52.603

在我看来，这就像你掉进了[XY](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)陷阱。

为什么不使用jqueryui 库中的[滑块？](http://jqueryui.com/slider/)这应该可以解决您的所有问题。

# mysql - 实现基于父 ID 关系的查询

> ID：14629533
> 
> 赞同：0
> 
> 时间：2013-01-31T15:43:02.970
> 
> 标签：mysql, sql, performance

我有一个简单的表，需要对信息进行半复杂的检索。表格是：

## 表 - 帖子

```
id        - bigint(20)
title     - varchar(250)
content   - longtext
parent_id - int(20)
type      - varchar(50) 
```

目前，我在帖子表中输入了三个不同的类型值 - 组、讨论和回复。数据的存储方式如下：

1.  回复有一个讨论 id 作为它的 parent_id。
2.  讨论有一个组 id（或 0）作为它的 parent_id。

该站点的成员可以加入一个组，我想将该组的讨论和回复包含在他们的电子邮件摘要中。目前，我正在使用 LEFT JOINS 来完成此操作，但它变得很重，因为我必须有很多连接才能完成它，并且随着表的快速增长，性能正在离题。

有人对更好的实施有任何建议吗？我已经研究了嵌套集模型，但我不相信它在这里对我有帮助，因为检索是基于顶级组条目上的操作，因此检索到的数据需要与之相关联。

非常感谢您的想法和回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:49:22.813

If your data model is replies are in discussions are in groups, then you should have three different tables for these entities. This gives more information to the SQL engine for optimizing the queries.

It may be too late for that. In that case, you need to be sure that you have appropriate indexes. For instance, to get all discussions in a group, there is a query like this:

```
select *
from posts p
where p.parent_id = XXX and p.type = 'Discussion' 
```

This suggests that you need an index on `type`, probably posts(type, id). To see what other indexes might be useful, you would need to modify your question to include some of the queries you are using.

# php - PHP 中的 JSON 发布（CSP 报告）

> ID：14629534
> 
> 赞同：2
> 
> 时间：2013-01-31T15:43:03.463
> 
> 标签：php, json, parsing, get

今天，我实现了[Content-Security-Policy (CSP)](https://developer.mozilla.org/en-US/docs/Security/CSP "内容安全策略 (CSP)")。我还包括了，`report-uri`所以它发送一个**POST**请求到`myserver.com/csp-report.php`. 正如 MDN 在他们的网站上解释的那样，**POST**请求是这样的：

```
{
  "csp-report": {
    "document-uri": "http://example.com/signup.html",
    "referrer": "http://evil.example.net/haxor.html",
    "blocked-uri": "http://evil.example.net/injected.png",
    "violated-directive": "img-src *.example.com",
    "original-policy": "default-src 'self'; img-src 'self' *.example.com; report-uri /_/csp-reports",
  }
} 
```

我想通过电子邮件将此信息发送至reports@myserver.com。目前，我有这个代码，但它只是通过电子邮件发送“Array() Array()”

```
<?php
$tars = Array("reports@myserver.com", "webm@myserver.com");
$from = "notify@myserver.com";
$subject = "CSP Report";
$text = print_r($_POST, true);
$text = (isSet($_GET["text"]) ? $_GET["text"] : $text);
foreach($tars as $tar){
    $e = mail($tar,$subject,$text,"From: $from");
}
if($e){
    header("Content-type: text/javascript"); 
    echo 'console.log("Email Sent");';
    exit();
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T17:16:02.260

```
<?php
#
# Set vars for mail sender and recipient
$sender  = $_SERVER['SERVER_ADMIN'];
$recipient = $_SERVER['SERVER_ADMIN'];
$subject = $_SERVER['SERVER_NAME'] . ' CSP Report';
$smtp_headers = 'From: ' . $_SERVER['SERVER_ADMIN'] . "\r\n" .
    'Reply-To: ' . $_SERVER['SERVER_ADMIN']  . "\r\n" .
    'X-Mailer: PHP/' . phpversion();
#
# Get the report content
$json = file_get_contents('php://input');
if ($json === false) {
    throw new Exception('Bad Request');
}
$message = 'The user agent "' . $_SERVER['HTTP_USER_AGENT'] . '" '
            . 'from ' . $_SERVER['REMOTE_HOST'] . ' '
            . '(IP ' . $_SERVER['REMOTE_ADDR'] . ') '
            . 'reported the following content security policy (CSP) violation:' . "\n\n";
$csp = json_decode($json, true);
if (is_null($csp)) {
    throw new Exception('Bad JSON Violation');
}

# Parse
foreach ($csp['csp-report'] as $key => $value) {
    $message .= '    ' . $key . ": " . $value ."\n";
}

#
# Send the report
$reported = mail( $recipient, $subject, $message, $smtp_headers );

#
# Log in client?
if ( $reported ) {
    header("Content-type: text/javascript"); 
    echo 'console.log("Email Sent");';
    exit();
}
?> 
```

# android - Actionbarsherlock 自定义布局可点击 imageview

> ID：14629540
> 
> 赞同：2
> 
> 时间：2013-01-31T15:43:21.767
> 
> 标签：android, imageview, actionbarsherlock, clickable

我正在尝试使我在 Actionbarsherlock 的自定义布局中定义的图像视图可点击。我的活动首先设置了一个布局：

```
setContentView(R.layout.myLayout); 
```

actionbar_layout 设置在同一个活动中，如下所示：

```
View cView = getLayoutInflater().inflate(R.layout.actionbar_layout,
            null);
    actionBar.setCustomView(cView); 
```

实际的 actionbar_layout 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="left"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/actionBarLogo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:paddingBottom="50dp"
    android:paddingLeft="10dp"
    android:paddingRight="50dp"
    android:paddingTop="50dp"
    android:scaleType="centerCrop"
    android:src="@drawable/logo" />

</LinearLayout> 
```

添加这个：

```
actionBarLogo.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            //code 
        }
    }); 
```

导致此行出现 Nullpointer 异常：

```
actionBarLogo.setOnClickListener(new View.OnClickListener() 
```

自定义布局工作正常，我只需要 imageview 是可点击的。任何想法如何解决这一问题？我的活动如何获得对我在 actionbar_layout.xml 中定义的 actionBarLogo id 的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:19:06.520

尝试这样的事情：

```
//your code
View cView = getLayoutInflater().inflate(R.layout.actionbar_layout,
        null);
actionBar.setCustomView(cView);

ImageView actionBarLogo = (ImageView) cView.findViewById(R.id.actionBarLogo);

actionBarLogo.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        //code 
    }
}); 
```

它应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T05:17:45.063

使用 ImageButton 而不是 ImageView

```
<ImageButton
    android:id="@+id/actionBarLogo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:paddingBottom="50dp"
    android:paddingLeft="10dp"
    android:paddingRight="50dp"
    android:paddingTop="50dp"
    android:scaleType="centerCrop"
    android:onClick="somemethod"
    android:src="@drawable/logo" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:20:03.547

据我了解您的问题，它无法访问所需的视图，因为它不是视图的一部分或窗口装饰的一部分。在此处查看此帖子，以找到解决方法：[https ://stackoverflow.com/a/10187801/1965084](https://stackoverflow.com/a/10187801/1965084)

# android - 带有重叠徽标的android自定义标题栏

> ID：14629545
> 
> 赞同：1
> 
> 时间：2013-01-31T15:43:38.973
> 
> 标签：android, android-layout

我想在我的 Android 应用程序中使用这种自定义标题栏：

![](../Images/fa59606163fbcf04a1aa3066e2634db5.png)

*   自定义标题栏
*   带有两个标准按钮，一个左对齐 (A)，一个右对齐 (C)
*   中间的可点击标志 (B)
*   此徽标超出标题栏并与内容重叠

单击 (A) 或 (C) 时，它将启动一个活动。当点击 (B) 时，它会显示一个小菜单，最终开始其他活动。

你知道如何在 Android 中实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:50:29.237

我不知道您是否可以直接在 ActionBar 中执行此操作，但您可以使用 RelativeLayout 并将栏绑定到顶部。

就像是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/myBar"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_alignParentTop="true"
        android:orientation="vertical" >

        <-- All the stuff to design the bar -->

    </RelativeLayout>

</RelativeLayout> 
```

另外，您可以删除标准标题栏并使用无标题主题。

```
<activity android:theme="@android:style/Theme.Black.NoTitleBar"> 
```

PS：画的不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:40:25.437

试试这个，我正在使用`Relative layout`and `Framelayout`。

![在此处输入图像描述](../Images/770eb7905458dda64e28d1f0c7e0334a.png)

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/parent_linear"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Button1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="Button2" />
</RelativeLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/parent_linear" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&apos;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book" />
</RelativeLayout>

<FrameLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true" >

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="80dip"
        android:background="@drawable/ic_launcher" />
</FrameLayout> 
```

# html - 删除菜单项上的文本

> ID：14629548
> 
> 赞同：0
> 
> 时间：2013-01-31T15:43:43.183
> 
> 标签：html, css

我有一个菜单结构：

```
<ul id="footer-nav">
    <li id="button1"><a href="#page-1">a</a></li>
    <li id="button2"><a href="#page-2">a</a></li>
    <li id="button3"><a href="#page-3">a</a></li>
    <li id="button4"><a href="#page-4">a</a></li>
    <li id="button5"><a href="#page-5">a</a></li>
    <li id="button6"><a href="#page-6">a</a></li>
    <li id="button7"><a href="#page-7">a</a></li>
    <li id="button8"><a href="#page-8">a</a></li>
</div> 
```

CSS：

```
ul#footer-nav {background:url(images/footer-nav_bg.png) no-repeat;height:52px;position:relative;left:50%;bottom:22px;width:272px;}
ul#footer-nav li {background: url(images/footer-nav-li_bg.png) no-repeat;height: 20px;width: 20px;top: 45%;float: left;position: relative;margin-right: 10px;left: 8%;} 
```

当我单击菜单项时，转到页面。没关系。但我想要，菜单项上没有文本，所以当我删除`a`结构上的文本时，我的菜单项无法点击。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:45:19.367

这是因为您在为`a`空时不占用任何空间 - 因此不可点击。

您可以添加以下 CSS 来解决此问题：

```
ul#footer-nav li a {
    display: inline-block; /* important for the width and height to take effect */
    width: 60px; /* or whatever */
    height: 20px; /* or whatever */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:46:44.173

如果删除文本，则将没有高度。更改您的 css 以包含锚标记的宽度和高度，它应该可以正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:49:12.877

试试这个

```
#footer-nav li a {
    display: inline-block;
    width: 50px; 
    height: 20px;
} 
```

# .net - F# 和“企业级”报告

> ID：14629549
> 
> 赞同：36
> 
> 时间：2013-01-31T15:43:43.200
> 
> 标签：.net, f#, reporting, etl

根据您的**实际经验**、**白皮书**或其他受人尊敬的可参考研究，F# 目前是否是企业级/企业级报告的可行工具？

^(**注意：在投票以“非建设性”结束此问题之前，请阅读底部的内容。**)

**背景**
我目前在一家大型公司工作，该公司大量使用许多不同的报告工具，包括（但不限于）SAS、Cognos、SSRS，甚至还有少量的 COBOL。每个工具都有其应有的地位，其中许多工具在大多数方面在功能集等方面是等效的。我们的大多数工具都能够相对轻松地输出到 PDF、Excel 和数据库，并且在这些情况下工作得非常好。

不幸的是，我的组织和许多人一样，使用 Excel 电子表格，无论喜欢还是讨厌它，我们都花了很多时间编写 .NET 控制台应用程序，以便从 Excel 电子表格中提取信息并将信息插入到 Excel 电子表格中。*（我对争论这种方法的优点或缺点不感兴趣。它就是这样，我无法改变它。）*

与上面列出的报告技术一样出色，但当涉及到电子表格的高级 ETL 时，它们却是平淡无奇。它们只是不是为此而设计的，虽然它们非常擅长将报告格式化为 Excel 电子表格，但它们并不擅长更新现有电子表格或以某种非常特定的方式提取数据（仅提取以红色突出显示的值，例如）。因此，我们最终编写了大量 .NET 控制台应用程序来完成这一点。*（再一次 - 对辩论这种方法不感兴趣。它就是这样。我知道 - 我也不喜欢它。）*

在我看来，.NET 是一个出色的框架，并且足够灵活，可以处理几乎所有的编程任务，因此理论上我们可以处理 .NET 中的所有报告。但是 - 尝试处理 .NET 中的所有报告需要很长时间。我们必须自己编写所有样板文件。我喜欢利用我们已经拥有的实际报告工具的强大功能、简单性和稳健性。

因此，我们最终为单个任务编写了两个应用程序 - 例如，一个 SAS 作业从多个数据源加载数据，进行转换并将结果存储在永久或临时位置，以及另一个 .NET 作业执行结果并将它们加载到电子表格中。*（我知道。）*

 **在过去的几年里我看到和听到了很多关于 F# 的观点，我自己也涉足了一点**。**我在大学学习了 OCAML，我喜欢函数式编程。当需要时，我很乐意在单一平台（如果不是单一语言）上完成特定报告的所有编程。不过，问题是 F# 语言和 .NET 框架是否已为企业级报告做好充分准备——我说的是**必须***准确**有效*地运行的报告。微软肯定[在卖力](http://www.tryfsharp.org/Explore)，但我想知道是否有人在其他报告技术方面有经验，是否真的在生产环境中尝试过。它与其他报告技术相比如何？能否轻松集成到企业环境中？你是如何解决安全问题的？做得对，F# 需要什么样的内存配置文件（我们说的是数百万条记录）？它能很好地处理表格数据吗？它有效率吗？维护起来有多容易（尤其是在代码增长的情况下）？需要什么样的第三方附加组件、插件等*才能*使某些东西正常工作（或者它可以开箱即用地完成大部分工作）？与其他报告系统（类似结果）相比，需要多少工作（编程时间等）？**

 **如果您没有使用 F# 的经验，或者如果您只使用 F#，那么我对您的意见并不特别感兴趣 - 我想听听那些实际上已经弥合了差距并且可以从经验中联系到机会和将 F# 用作大数据（数百万条记录，输出为各种格式）的报告引擎的缺陷。

我已经看到了一些已经涵盖了其中一些领域的问题：

*   [F#（或 .NET 库）的统计功能](https://stackoverflow.com/questions/1795540/statistical-functionalities-of-f-or-net-libraries)
*   [您使用 Matlab/F#/R 进行数据分析和建模算法的经验](https://stackoverflow.com/questions/1642201/your-experiences-with-matlab-f-r-for-data-analysis-and-modeling-algorithms)

但他们已经几岁了。之后的几个版本，F# 能胜任吗？还是我是一只在错误的树上吠叫的狗？

**编辑**

只是为了清楚起见，我对 F# 的新的[信息丰富的编程](http://research.microsoft.com/pubs/173076/information-rich-themes-v4.pdf)特别感兴趣。在 F# 3.0 之前，它只是一项有趣的技术，但 F#[最近添加](http://msdn.microsoft.com/en-us/library/vstudio/hh370982.aspx)的使用数据库类型提供程序及其查询表达式的功能使其看起来像是其他报表创作技术的可行替代方案。[微软当然暗示它是](http://www.tryfsharp.org/Explore)。

***一个可接受的答案***将包含实施 F# 中内置的企业级报告引擎的第一手资料（或对文档案例研究的参考），以及与其他报告技术的任何性能增益或损失等的比较。它没有不必太详细 - 足以让普通（称职的）经理相信 F# 是适合/不适合批量/批量数据处理的技术。**已经完成了吗？谁干的？结果如何？实现有多复杂（相对于类似技术）？它表现良好吗？**

* * *

**为什么我要问一个主观的问题？**
像大多数优秀的 stackoverflow 成员一样，我经常投票关闭主观问题。根据[常见问题解答](https://stackoverflow.com/faq#dontask)，应该避免主观问题，但不能完全禁止。常见问题解答链接到我试图遵循[的关于重大主观问题的六个指南。](https://blog.stackoverflow.com/2010/09/good-subjective-bad-subjective/)请在投票结束此问题之前阅读这些指南。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-01T00:40:30.593

> 它与其他报告技术相比如何？能否轻松集成到企业环境中？

我不知道 F# 与其他报告技术相比如何，但我已经将它部署在多个企业环境中，它与 C# 基本相同，即简单且健壮。

> 你是如何解决安全问题的？

与 C# 相同。

> 做得对，F# 需要什么样的内存配置文件（我们说的是数百万条记录）？

在 5 年的使用中，我[在 .NET 中发现了一个 GC 错误](http://flyingfrogblog.blogspot.co.uk/2010/10/can-you-repro-this-64-bit-net-gc-bug.html)，它并非特定于 F#。我在处理大型对象时遇到了几个问题（同样，不是特定于 F#），但总的来说，GC 是健壮和高效的，并且可以积极地收集。

我处理了数十亿条记录，发现 F# 非常快速且非常可靠。请注意，F# 用于 Microsoft 的 Bing AdCenter（用于广告投放）和 Microsoft 的 Halo 3，两者都需要处理 TB 数据集。

> 它能很好地处理表格数据吗？

是的，你有简单的并行性（见`Array.Parallel`模块），但它相对于其他工具的主要优势在于操纵结构化数据，如树和图表。

> 它有效率吗？

是的。

我们当前的客户是世界上最大的保险公司之一，从 C++ 到 F# 的转换实现了 10 倍的性能提升（代码大小减少了 10 倍）。

以前的客户看到将编译器从 OCaml 迁移到 F# 时性能得到了改进。这令人印象深刻，因为 OCaml 是专门为编写编译器而设计的，而且速度非常快。

一位前客户让我们重写他们的交易平台，即使我们从非 GC C++ 迁移到 GC'd F#，我们也看到了 100 倍的吞吐量和延迟改进。

> 维护起来有多容易（尤其是在代码增长的情况下）？

易于维护。在 ML 中，添加函数是一件轻而易举的事，当您扩展联合类型时，静态类型系统捕获会为您提供大量反馈。

我们当前的客户在去年 4 月上线了他们的第一个 F# 代码，尽管根本没有接受过任何 F#（或 OCaml）培训，但它的维护者没有遇到任何问题。

> 需要什么样的第三方附加组件、插件等才能使某些东西正常工作（或者它可以开箱即用地完成大部分工作）？

我们从未使用过任何（但我们卖了两个！）。我考虑过的唯一第三方是 WPF 控件，它们同样不是 F# 特定的。

> 与其他报告系统（类似结果）相比，需要多少工作（编程时间等）？

不知道，对不起。看起来我们已经完成了 Dialogue 和 HP Extreme 的一些工作，所以我很快就会发现...

> 实现有多复杂（相对于类似技术）？

F# 代码比 C++、C# 和 Java 等较早的主流语言简单得多。

我想强调的是，当您使用 F# 来解决使用更传统工具无法解决的过于复杂的问题时，它确实会带来好处，而不仅仅是在 F# 中重写旧代码。

例如，我们当前的客户一直在使用一个业务规则引擎，他们花了大约 1,000,000 英镑购买，但它并没有解决他们的业务问题（与大桌子的斗争，与数学的斗争）所以我给他们写了一个定制业务的演示一周内大约 1,000 行 F# 代码中的规则引擎。我无法用任何其他工具做到这一点。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-31T21:30:47.190

回答你的问题——你在正确的轨道上。我这样说是作为一个建立了许多报告和大数据系统的人。我用 Scala 和 R 构建了 eBay 使用的大数据分析平台之一。最近，我为 MSRC 构建了 Hadoop / Hive F# 类型提供程序。我可以说没有什么比 F# .net 堆栈更能达到这个目的了。出色的性能、易于使用的本机互操作、大量库、REPL、类型提供程序、用于图表的 WPF。自 MSRC 以来，我一直在构建一个功能齐全的 F# IDE，它可以嵌入到 Excel 中，您可以在其中使用类型提供程序与带有 Intelisense 的工作簿进行交互。如果你想看，给我发电子邮件。

编辑;

当然; 我使用内存数据和从头开始的查询引擎用 F# 替换了我的一个客户 Infobright 数据库。它将 10 GB 数据的查询时间从 30 分钟减少到 100 毫秒。整个过程花了我 6 个小时来构建，并且只有几百行代码。该数据库是基于 Web 的报告服务的后端，在升级后该服务变得更加灵敏。

在 eBay 时，我曾经在 R 中进行大数据（批量/批量）后处理。基本的平面文件是 10 GB，所以它们对于 Excel 来说太大了。R 在聚合过程中进行了大量不必要的内存分配；10GB 将变为 40GB，一旦开始访问页面文件，就会停止爬行。根据数据，它可能需要几分钟、几小时或永远不会完成。有付费的 R 库可以解决此问题，但它们在其他方面受到限制。在 F# 中进行聚合可以将其缩短到 100 毫秒且具有恒定空间。这些聚合是 10 行代码，与 R 大致相同，但更容易理解并且经过类型检查。由于拼写错误，R 作业在处理一个小时后失败是令人愤怒的。

我曾经使用 OLAP 多维数据集（例如 Microsoft Analysis Services），但这些系统已经完全被大数据集群和大内存机器所取代。现在可以很容易地使用 F# 和 .net 4.5 中的新垃圾收集器构建您自己的大内存机器。

希望有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-31T16:12:52.963

我不确定这有多大帮助，但微软网站上有一些关于 F# 的白皮书。我在下面链接的第一个特别提到了统计处理/数据库，因此它可能是三者中最有用的。

*   [Minitab -- 软件开发人员使用集成工具集来降低成本和简化开发](https://www.microsoft.com/casestudies/Microsoft-Visual-Studio-2010-Ultimate/Minitab/Software-Developer-Uses-Integrated-Tool-Set-to-Cut-Costs-and-Streamline-Development/4000006778)
*   [Grange Insurance——保险公司使用并行编程将评级引擎从大型机上移开](https://www.microsoft.com/casestudies/Microsoft-Visual-Studio-2010-Ultimate/Grange-Insurance/Insurance-Company-Uses-Parallel-Programming-to-Move-Rating-Engine-off-Mainframe/4000006894)
*   [金融服务公司——银行公司使用函数式语言将开发速度提高 50%](https://www.microsoft.com/casestudies/Microsoft-Visual-Studio-2010/Financial-Services-Firm/Banking-Firm-Uses-Functional-Language-to-Speed-Development-by-50-Percent/4000006794)

还有一个[用于 F# 的 R 类型提供程序](https://github.com/BlueMountainCapital/FSharpRProvider)，这使得 F# 和 R 之间的互操作变得容易。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-31T19:26:39.453

如果您希望创建一个“具有更好的 Excel 自动化的企业级报告系统”，我认为您正在寻找正确的树（即它是可行的），但是树上有一只熊（不是松鼠）。换句话说，它很少是值得的。现在，也许你的情况是个例外。非常需要需要非常措施。但是，我想知道是否有某种方法可以抽象出您的报告系统无法完成的部分内容，并专注于提高互操作性......而不是从头开始构建所有内容。我认为，正确的方法很大程度上取决于细节，你最了解这些细节，而且我想这些细节太多了，无法在此一一列举。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T01:17:56.993

我曾经测试过 F# 在大约 20 秒内聚合一个包含 890,000 条记录 (500mb) 的制表符分隔的文本文件。在带有 Win8 和 .Net 4.5 的较新硬件上，它应该会更快。我认为它相当快。

不确定您的报告要求是什么，但请查看 SQL Server Analysis Services (SSAS) 和 Reporting Services。

SSAS 现在带有一个内存中的“表格”引擎。我最近用 10 亿行测试了它。聚合超过 10 亿行的 Excel 数据透视表查询在大约 2 秒内发生。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-01T16:20:10.327

题外话，但您可能希望使用其他工具（例如[XLReport](http://xlreport.com/)或其更大的表亲[DBxtra](http://dbxtra.com/) ）稍微自动化您的 Excel 工作流程，它们都可以从 Excel 文件中读取，基于它们进行查询，并手动导出结果，或者在 DBxtra 的情况下自动，两者的好处是，如果 Excel 文件的结构没有改变，您只需要设计一次查询。**

# windows - Windows：GDI 句柄能否比创建它的进程更长寿？

> ID：14629556
> 
> 赞同：2
> 
> 时间：2013-01-31T15:44:01.963
> 
> 标签：windows, swt, gdi

我试图在我的 SWT 应用程序中查找仅 Windows 问题的原因，该问题有时会遇到以下错误：

```
org.eclipse.swt.SWTError: No more handles 
```

跟踪引发此错误的行表明它正在调用 CreateWindowEx Windows API 函数，如果没有可用的 GDI 句柄，该函数可能会失败。

当通过远程桌面对我们的 Windows Server 2008 构建服务器之一上的应用程序运行测试时，该错误会定期发生。

到目前为止，我已经发现并修复了许多 SWT Image 和 Font 对象的泄漏，其中一些导致每次调用应用程序都会泄漏数百个 GDI 句柄。

但是，我正在努力验证（使用故意使用大量句柄的测试应用程序）我已经解决了这个问题。我的测试应用程序达到了每进程 10,000 个 GDI 句柄的限制。连续运行它不会导致问题；同时运行两个或三个。

所以，我的问题终于来了：

**在任何情况下，Windows 上的 GDI 句柄是否有可能比创建它的进程寿命更长？**

如果是这样，是否有一个工具可以用来查看这些“泄露”的 GDI 句柄的数量？

# facebook-graph-api - 从 API 下载 Facebook 地理定位帖子

> ID：14629558
> 
> 赞同：1
> 
> 时间：2013-01-31T15:44:07.557
> 
> 标签：facebook-graph-api, geotagging

Facebook 的全球页面可以包含针对区域的内容。如果没有对页面的管理员访问权限，则针对 API 密钥注册地以外的区域的帖子不会显示在 API 响应中。

例如，通过英国帐户注册的 API 密钥，似乎无法在全球 Facebook 页面上下载针对法国的帖子。

除了在特定区域注册密钥并使用这些密钥访问 API 之外，还有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:16:35.100

只有在代表有权查看该内容的用户时，您才能通过 API 访问该内容。

如果主页帖子仅限于特定国家/地区的用户可见，则 API 只会在您使用来自该国家/地区用户的访问令牌时返回该帖子。

# ssrs-2008 - 检查 rdlc 上 Tablix 中的分页符

> ID：14629560
> 
> 赞同：2
> 
> 时间：2013-01-31T15:44:11.963
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

有没有办法检查 tablix 单元格中的分页符？我正在处理 rdlc 报告，我不想在每行之后显示网格线，我只想在有分页符时显示一行。我没有控制分页符。我知道您可以为单元格顶部和底部的边框颜色属性设置表达式，但我无法在网络上找到任何指示检查分页符的方法的内容。

这是我的报告目前的样子：

![当前分页符](../Images/f542b6f801476e01fcd727c20eed2e98.png)

这就是我希望它看起来的样子：

![建议的分页符](../Images/11ec75bbcec2af3cf4002eceb9c1d3f9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:50:18.990

您可以采取一些解决方法来解决此问题。

假设表格在 60 行后中断，那么您可以定义一个表达式来检查何时到达 60 的行并绘制边界线。

在表格的边框属性中，在边框样式下只需放置以下表达式

`=IIF(RowNumber("table1") Mod 60 , "Solid", "None")`

这样，当表格到达第 60K 行（K = 1,2,3...）时，边框将是实心的，否则 - 没有。

# c# - ServiceStack ORMLite 和 Dapper 一起工作的问题

> ID：14629563
> 
> 赞同：1
> 
> 时间：2013-01-31T15:44:40.640
> 
> 标签：c#, dapper, ormlite-servicestack

这是我使用 ServiceStack ORMLite 进行实验的第三天。我的示例项目曾经只与 Dapper 一起工作，现在它是 Dapper 和 ServiceStack ORMLite 的混合体，两全其美。

昨晚我正在为一个 Dapper 查询而苦苦挣扎。它基本上是一个选择加入 4 个表，在 ORMLite 的代码进来之前运行良好。现在它正在一遍又一遍地失败，因为表映射到对象。它不会破坏它只是为对象分配错误的值。

我不得不继续前进，作为一个临时解决方法，我所做的是执行 4 个选择中的每一个，而不使用 Dapper 的 QueryMultiple 进行 SQL 连接，然后在 C# 上一个一个地连接结果。

请不要开始笑。我知道这当然不是最好的解决方案。然而，它仍然会去 DB 一次，但感觉并不自然。当行数增加时，这很可能是一个性能问题。

今天早上我想我找到了问题的根源：我正在使用 ORMLite 删除和创建表，并注意到字段顺序与我预期的不太一样。在 ORMLite 代码之前，我只是手动运行 SQL 脚本，所以我决定了字段的顺序。由于我的项目需要根据最终用户的需要支持 MySql、Postgresql 和 SQL Server，因此保持此类脚本的三个版本同步会很痛苦。我想用 ORMLite 自动化这个过程，当然可以利用它。

现在让我解释一下我的理论，你们专家可能会决定我是对还是错。Dapper 使用连接的查询根据命名约定将每个表的结果拆分为映射到每个类。它期望“Id”或“id”字段是表中的第一个字段。

我知道 Dapper 有一个“SplitOn”选项来处理不遵循其命名约定的表（“IdProduct”作为 PK 而不是“Id”）但在我的情况下它不能像那样使用，因为我真的没有任何控制权ORMLite 的**CreateTable**函数中的字段是如何排序的。它可能最终以“id”在中间，因此导致我现在遇到的同样问题。

也许查看我的代码可以为您提供更多线索。这是在 ORMLite 之前运行良好的代码：

```
 using (var conn = this.ConnectionString.OpenDbConnection())
        {
            string sql = @"
                select  *
                from    insumo i
                join    unidadmedida um on um.id = i.idum
                join    lineainsumo l on l.id = i.idlinea
                left outer join archivo a on a.id = i.idimagen;";

            var insumos = conn.Query<Entities.Insumo, Entities.UnidadMedida,
                Entities.LineaInsumo, Entities.Archivo, Entities.Insumo>(sql, (i, um, l, a)
                    =>
                    {
                        i.UnidadMedida = um; i.Linea = l; i.Fotografia = a ?? new Entities.Archivo();
                        return i;
                    }).ToList(); //Dapper

            return insumos;
        } 
```

这是临时解决方法：

```
 using (var conn = this.ConnectionString.OpenDbConnection())
        {
            string sql = @"
                select * from insumo;
                select * from unidadmedida;
                select * from lineainsumo;
                select  a.*
                from    archivo a
                join    insumo i on i.idimagen = a.id;";

            var q = conn.QueryMultiple(sql); //Dapper
            var insumos = q.Read<Entities.Insumo>().ToList();
            var ums = q.Read<Entities.UnidadMedida>().ToList();
            var lineas = q.Read<Entities.LineaInsumo>().ToList();
            var archivos = q.Read<Entities.Archivo>().ToList();

            foreach (var i in insumos)
            {
                i.UnidadMedida = ums.FirstOrDefault(c => c.Id == i.IdUm);
                i.Linea = lineas.FirstOrDefault(c => c.Id == i.IdLinea);
                i.Fotografia = archivos.FirstOrDefault(c => c.Id == i.IdImagen) ?? new Entities.Archivo();
            }

            return insumos;
        } 
```

我正在研究 ORMLite 的代码，似乎**ToCreateTableStatement**函数可能是为了解决我的问题而修改的地方。也许在我的类定义中为每个字段添加一个属性来说明所需的字段创建顺序是否可行？

我正在考虑将其添加到**FieldDefinition**代码中：

```
public bool FirstField { get; set; } 
```

并添加一个属性来装饰 C# 字段，如下所示：

```
[Alias("name")]
public string Name { get; set; }

[Alias("id")]
[PrimaryKey]
[FirstField(true)]
public int Id { get; set; } 
```

然后在创建字段时，代码可以遵循此类属性的值，并允许控制最终字段在表格中的位置。

如果我走在正确的轨道上，请告诉我，或者，也许还有另一种比这个更优雅的选择。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:08:01.457

似乎更容易覆盖每个类的抽象 Id，而不是修改 ORMLite 的源代码。

该项目的时间表很窄，可以尝试另一种方法。也许对于下一个，我可以抽出时间尝试@mithz 的建议。

# tsql - 连接中的TSQL concat非常慢

> ID：14629564
> 
> 赞同：0
> 
> 时间：2013-01-31T15:44:49.800
> 
> 标签：tsql, sql-server-2012, concat

我们有这样的查询：

```
select X.id_x, A.id_a, B.id_b
from X
left join A on 'A|' + A.id_a = X.id_aOrB
left join B on 'B|' + B.id_b = X.id_aOrB 
```

X 链接到 A 或 B 并且 id 在 join 语句中计算。

*   X：8 000 行
*   答：36 000 行
*   B：3 000 行

这个查询很慢，像 10 秒。上没有索引`X.id_aOrb`。

然后使用 2 个由触发器更新的“连接”表，我们不需要连接`'A|' + id`和`'B|'+id`. 不到 1 秒即可获取结果。好的。

我的问题：为什么这个 concat 这么慢？当数据太多时，SQL Server 在“+”中效率不高吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:10:35.320

```
FROM X
LEFT JOIN A on 'A|' + A.id_a = X.id_aOrB 
```

不可搜索（SQL Server 不能使用索引）。

如果它使用嵌套循环连接，那么它必须`A`扫描`X`. 无法执行索引查找`A`来评估`'A|' + A.id_a = X.id_aOrB`谓词。

如果它使用合并连接，它必须先获取数据的副本并对其进行排序，而不是能够使用索引中的顺序。

当然，这同样适用于加入`B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:51:03.963

查看执行计划，看看它在哪里花费的时间最多。SQL 是否在进行表扫描？他们很慢。如果您在 X.id_aOrB 上没有索引，那么这将是一个很好的优化。这里有一些关于如何解释执行计划的[文章](http://blog.sqlauthority.com/2010/01/22/sql-server-execution-plan-estimated-io-cost-estimated-cpu-cost-no-unit/)。

如果您要经常运行此查询，您可以从中创建一个视图并对其进行索引，以便实现它（虽然维护成本...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:53:26.583

以下查询更快吗？

```
With t as
(
  select id_x,SUBSTRING(X.id_aOrB,3,1000) as id_a,null as id_b
  from x
  where X.id_aOrB like 'A|%'
  union all
  select id_x,NULL as id_a,SUBSTRING(X.id_aOrB,3,1000) as id_b
  from x
  where X.id_aOrB like 'B|%'
)
select t.id_x, A.id_a, B.id_b
from t
left join A on A.id_a = t.id_a
left join B on B.id_b = t.id_b 
```

# javascript - 我的情况没有读取选定的变量

> ID：14629567
> 
> 赞同：0
> 
> 时间：2013-01-31T15:44:51.637
> 
> 标签：javascript, jquery

所以我在一个搜索页面上工作，其中有一个块，显示列表中的下 10 个项目。我想做的是在到达列表末尾时隐藏此块。

```
function loadMore() {
    //Load the content
    var urlPortion = searchQuery.split("?");
    var urlString = "?hits=10&offset=";
    var offset = 0;
    var pageCounter = 1;

    $(".box-footer").click(function () {
        offset += 10;
        pageCounter++;
        var urlBuilder = urlPortion[0] + urlString + offset + "&" + urlPortion[1];

        $.get(urlBuilder, function (data) {
            var content = $(".search-result-list li", data);
            $('.search-result-list').append(content);
        });
    });

    //Visibility of "Show more"-bar
    var textString = $(".search-result-totalhits").html();
    var totalHitsString = /\d+/;
    var totalHits = textString.match(totalHitsString);
    var numberOfPages = (Math.ceil(totalHits/10));

    if ((totalHits > 10) && (pageCounter < numberOfPages)) {
        $(".p-sok .box-footer").show();
    }
    else {
        $(".p-sok .box-footer").hide();
    }
}; 
```

我的问题是，实际检查是否显示块的最后一个条件始终保持为真。我猜变量“pageCounter”在上面的点击函数之外不可用，但我不确定。我试图在第 18 行将变量输出到控制台，但它没有输出任何内容。

有人愿意给我一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:50:30.307

您是正确的，您遇到了变量范围的问题。click 事件的回调在不同的上下文中调用，然后是 LoadMore 函数。LoadMore 只是你声明它的地方，而不是它实际运行的地方。如果您希望能够在回调函数和 LoadMore 中访问变量，则需要将 pageCounter 声明为 LoadMore 函数之外的全局变量。所以像：

```
var pageCounter = 1;

function loadMore() {
    //Load the content 
```

也就是说，我实际上认为您想将“//“显示更多”-bar 的可见性之后的所有内容移动到单击处理程序中。我这么说是因为您想根据您在列表中的当前位置显示或隐藏标题。每次点击都会更新，对吧？如果是这样，请尝试以下操作：

```
var pageCounter = 1;

function loadMore() {
    //Load the content
    var urlPortion = searchQuery.split("?");
    var urlString = "?hits=10&offset=";
    var offset = 0;

    $(".box-footer").click(function () {
        offset += 10;
        pageCounter++;
        var urlBuilder = urlPortion[0] + urlString + offset + "&" + urlPortion[1];

        $.get(urlBuilder, function (data) {
            var content = $(".search-result-list li", data);
            $('.search-result-list').append(content);
        });

       //Visibility of "Show more"-bar
       var textString = $(".search-result-totalhits").html();
       var totalHitsString = /\d+/;
       var totalHits = textString.match(totalHitsString);
       var numberOfPages = (Math.ceil(totalHits/10));

       if ((totalHits > 10) && (pageCounter < numberOfPages)) {
           $(".p-sok .box-footer").show();
       }
       else {
           $(".p-sok .box-footer").hide();
       }
    });
}; 
```

# python - Pandas DatetimeIndex 截断错误

> ID：14629578
> 
> 赞同：5
> 
> 时间：2013-01-31T15:45:10.443
> 
> 标签：python, pandas, slice

我有一个熊猫数据框`df`：

```
Out[16]:
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 269850 entries, 2012-12-19 16:15:36 to 2012-12-20 14:36:55
Data columns:
X1    269850  non-null values
X2      269848  non-null values
X3      269848  non-null values
dtypes: float64(2), object(1) 
```

我想切片数据框以返回一个四小时的数据`2012-12-20 05:00:00`窗口`2012-12-20 09:00:00`

当我尝试：

```
Slicedf = df.truncate(before='12/20/2012 05:00:00',after='12/20/2012 09:00:00') 
```

出现以下错误：

```
KeyError: datetime.datetime(2012, 12, 20, 5, 0) 
```

我也尝试过（从[Pandas DataFrame 按天/小时/分钟切片](https://stackoverflow.com/questions/12910187/pandas-dataframe-slicing-by-day-hour-minute)）：

```
from datetime import datetime
x=datetime(2012,12,20,5,0,0)
y=datetime(2012,12,20,9,0,0)
Slicedf = df.ix[x:y] 
```

它返回完全相同的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-07-26T15:07:26.927

您可能需要将其更改为：

`df = df.sort_values()`或`df = df.sort_index()`在 truncate 函数之前，以修复更高版本的 Pandas 中的错误。

所以你的代码看起来像：`df = df.sort_index().truncate(before='12/20/2012 05:00:00', after='12/20/2012 09:00:00')`

`sort`已弃用 DataFrames 以支持需要使用`sort_values`or 或`sort_index`. [您可以分别在此处](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_values.html)和[此处](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_index.html)的文档中找到有关每个文档的更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T07:22:44.350

`df`是通过使用该函数将多个数据帧连接在一起创建的`concat`。

`df = df.sort()`在截断修复错误之前。

# objective-c - iPad - 在 iPad 中使用 drawRect 方法绘制旋转文本

> ID：14629583
> 
> 赞同：1
> 
> 时间：2013-01-31T15:45:21.357
> 
> 标签：objective-c, xcode, core-graphics, ios-simulator, cgaffinetransform

我正在开发一个 ipad 应用程序，在该应用程序中我试图渲染具有多个文本标签的图像。我正在使用 drawRect 方法在上下文中绘制文本。我想要一个如下图所示的输出：

[http://tinyurl.com/bypf9kq](http://tinyurl.com/bypf9kq)

但我得到如下图所示的输出

[http://tinyurl.com/acz4l9y](http://tinyurl.com/acz4l9y)

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:56:00.080

```
CGFloat DegreesToRadiansText(CGFloat degrees) {return degrees * M_PI / 180;};
CGContextSelectFont (context, "Helvetica", 60, kCGEncodingMacRoman);
CGContextSetCharacterSpacing (context, 10);
CGContextSetTextDrawingMode (context, kCGTextFill);
CGContextSetGrayFillColor(context, 0.0, 1.0);
CGAffineTransform myTextTransform = CGAffineTransformRotate(CGAffineTransformScale(CGAffineTransformIdentity, 1.f, -1.f ),(DegreesToRadiansText (-90));
CGContextSetTextMatrix (context, myTextTransform);
CGContextShowTextAtPoint (context, 100, 200, "Quartz 2D", 9); 
```

取自[这里。](https://discussions.apple.com/thread/1664196?start=0&tstart=0)

基本上，您将文本矩阵设置为自定义变换矩阵，然后进行绘制。您可能想要`CGContextSave`在转换之前和`CGContextRestore`完成绘制文本时进行。

# javascript - 如何替换“document.search1.s earch_text1.value;”中的 1 用javascript中的函数参数？

> ID：14629584
> 
> 赞同：0
> 
> 时间：2013-01-31T15:45:25.680
> 
> 标签：javascript

我已经浏览了我的代码以使其更易于阅读，但这基本上就是我所拥有的并且运行良好。

```
function findmatch() {

var value = document.search1.search_text1.value;

} 
```

但我想要做的是有一个参数 x 并用 x 替换 1 但我似乎做不到。我认为以下方法会起作用，但没有运气。

```
function findmatch(x) {

var value = document.'search'+x.'search_text'+x.value;

} 
```

任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:46:41.227

您需要使用方括号表示法：

```
function findmatch (x) {
    var value = document['search' + x]['search_text' + x].value;
} 
```

为了进一步解释，在 JS

```
document.search1 
```

是一样的

```
document['search1'] 
```

因此，使用后者，您可以动态构建名称

```
x = 1;
document['search' + x] 
```

# mercurial - 嵌套的 mercurial subrepos 有那么糟糕吗？

> ID：14629589
> 
> 赞同：0
> 
> 时间：2013-01-31T15:45:34.797
> 
> 标签：mercurial, mercurial-subrepos

在研究了 mercurial 并阅读了[http://thread.gmane.org/gmane.comp.version-control.mercurial.devel/40107](http://thread.gmane.org/gmane.comp.version-control.mercurial.devel/40107)之后，我已经充分警告过嵌套子存储库的危险。但是，我必须使用 mercurial，而 subrepos 似乎是一个有用的工具。我的问题类似于[Hg sub-repository dependencies](https://stackoverflow.com/questions/5621670/hg-sub-repository-dependencies)。我的基本问题是：我有一个被许多项目使用的实用程序存储库。其中一些项目依赖于公用事业。似乎很自然地有一个项目存储库，其中一个实用程序子存储库嵌套在主存储库下，而不是一个更大的存储库下的 2 个子存储库。如果项目需要不同的版本，这将很容易拉取实用程序子存储库的正确版本。

我不确定我是否完全理解嵌套子存储库的问题，因为尽管有所有警告，它似乎是最好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:42:26.170

嵌套的 suprepos本身**并不坏**，它们只是*不被 Bitbucket 支持*而没有技巧（也许其他 Mercurial 主机也支持）

# jquery - 从页面中删除所有 CSS 样式表

> ID：14629593
> 
> 赞同：4
> 
> 时间：2013-01-31T15:45:45.053
> 
> 标签：jquery, css

我想显示一个没有应用任何 CSS 的页面。是否可以在页面内添加一个 jquery 开关以禁用所有样式表？

原因：我想向客户展示设计的重要性，让他有机会禁用他网站的 css 样式。当他可以自己触发时，这更有说服力:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T15:50:16.043

如果您希望它在单击后触发：

```
$(".element").click(function(){
    $("link[rel='stylesheet']").remove();
}); 
```

或在开头：

```
 $(document).ready(function(){
        $("link[rel='stylesheet']").remove();
 }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T15:47:06.773

试试这个：

```
$('link[rel="stylesheet"]').remove(); 
```

这将从页面中删除所有样式表（所有样式都适用于这些样式表）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T15:54:39.930

只花了几分钟起草一份

```
 (function(f,a,s,x){
  x=$(a);x.map(function(i,o){o=$(o);o.data(s+s,o.attr(s));o.removeAttr(s)});
  $(s+',link[rel='+s+'sheet]').appendTo(f);
  setTimeout(function(){
   $(a,f).appendTo('head');
   x.map(function(i,o){o=$(o);o.attr(s,o.data(s+s))})
  },999);
 })($('<i>'),'*','style'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-30T16:17:09.050

禁用所有

```
StyleSheetList.prototype.forEach=Array.prototype.forEach; // *Note
document.styleSheets.forEach((ss)=>ss.disabled=true); 
```

或（全部禁用）

```
for(styleSheet of document.styleSheets){ styleSheet.disabled=true; } 
```

或（全部删除）

```
StyleSheetList.prototype.forEach=Array.prototype.forEach;
document.styleSheets.forEach((ss)=>ss.ownerNode.parentNode.removeChild(ss.ownerNode)); 
```

或（全部删除）

```
for(styleSheet of document.styleSheets){ styleSheet.ownerNode.parentNode.removeChild(styleSheet.ownerNode); } 
```

***注意**：如果你不想改变原型，你可以这样调用它：

```
Array.prototype.forEach.apply(document.styleSheets,[(ss)=>ss.disabled=true]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T15:52:13.380

试试这个

```
$('link[rel="stylesheet"]').remove(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T15:56:19.860

把它放在准备好的文件上：

```
$('link[rel=stylesheet]').remove(); 
```

或将其绑定到按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-09T16:23:22.300

一种粗暴、肮脏和粗暴的方法：

```
document.querySelector("head").remove(); 
```

可以粘贴为书签 URL 的相同代码的书签版本。

您也可以将其粘贴到地址栏中（出于安全原因，当您粘贴文本时，chrome/firefox 会删除`javascript:`开头的位，因此您需要手动输入）：

```
javascript:(function(){document.querySelector("head").remove();})() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-02T12:35:42.187

使用下面的代码删除各种样式，内联、内部、外部。

```
let elements=document.querySelectorAll("*");
elements.forEach(el=>{
    if(el.tagName==="LINK" || el.tagName==="STYLE") el.remove();
    else el.removeAttribute("style");
});
```

晚点再谢我！;)

# r - Win7 OS 上的 R 2.15.2 sqlFetch() 正在终止 R 会话

> ID：14629594
> 
> 赞同：-3
> 
> 时间：2013-01-31T15:45:46.007
> 
> 标签：r, finder-sql

Win7 OS 上的R 2.15.2`sqlFetch()`正在终止 R 会话。但是，`sqlQuery()`函数在终止时正确返回值。请帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:07:27.947

有很多地方可能会出错，因此您需要尝试找出问题所在。

您是否将相同的 SQL 传递给`sqlFetch`您`sqlQuery`？
连接句柄（来自`odbcConnect`）是否相同？
你能只检索一行吗？（传递`max = 1`给`sqlFetch`？）
你对你的数据库有正确的权限吗？
您可以从数据库的本地实例中检索数据吗？

# ajax - jQuery Mobile ajax 请求

> ID：14629595
> 
> 赞同：0
> 
> 时间：2013-01-31T15:45:48.003
> 
> 标签：ajax, jquery-mobile

我正在尝试从我的 jQuery 移动网站中的 javascript 文件中检索信息。默认情况下启用 Ajax，但是当我尝试使用 xmlHttpRequest.send() 时，responseText 是页面的源代码，而不是 json 结构。initialize() 函数在 pageinit 处运行，所以我的想法是它正在检索的 json 在调用时应该存在。此外，initialize() 在网站的非移动版本上也能正常工作，所以我认为它与 JQM 如何处理 ajax 请求有关。提前感谢您的任何帮助。

```
<!DOCTYPE html>
<html>
    <head>
        var xmlHttpRequest;
        var json;

        <script type="text/javascript">
            function initialize()
            {
                xmlHttpRequest = (window.XMLHttpRequest) ? new XMLHttpRequest() :
                                 new ActiveXObject("Msxml2.XMLHTTP");

                if (xmlHttpRequest == null)
                return;

                xmlHttpRequest.open("GET", "pick.js", false);
                xmlHttpRequest.send();
                json = eval('('+ xmlHttpRequest.responseText +')');
            }
        </script>
        ......
    </head>

    <body>
        <div data-role="page" id="map-page"> 
            <script type="text/javascript">
                $('#map-page').live('pageinit',function(){
                    initialize();
                });
            </script>
            .....
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:51:22.467

由于您使用的是 jQuery Mobile（因此是 jQuery），您应该考虑使用[jQuery.ajax——](http://api.jquery.com/jQuery.ajax/)它处理所有“困难的事情”，例如为您创建 XHR 对象。

对于您的情况，您的代码将如下所示：

```
function initialize() {

   $.get("pick.js", function(data, status, jqXHR) { 
       //when the call succeeds, do something with the 'data' param
       console.log(data);
   }, "script");
} 
```

# php - PHP上的向量变量值

> ID：14629596
> 
> 赞同：4
> 
> 时间：2013-01-31T15:45:48.140
> 
> 标签：php, variables, vector

嗯，这是一个非常新手的问题，但找不到合适的关键字来获得答案。

我有一个向量变量 $p。

我想实现这一点：

```
$n = 5;

$prev = $p[$n--];
$actual = $p[$n];
$next = $p[$n++]; 
```

我想要的值应该是：

```
$prev = 4;
$actual = 5;
$next = 6; 
```

取而代之的是，我得到：

```
$prev = 5;
$actual = 4;
$next = 4; 
```

我知道我错过了一些东西，但我无法弄清楚。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T15:47:36.310

自己算一下：

```
$prev   = $p[$n - 1];
$actual = $p[$n];
$next   = $p[$n + 1]; 
```

如果您必须使用递增/递减运算符（出于某种奇怪的原因），您可以使用：

```
$prev   = $p[--$n];
$actual = $p[++$n];
$next   = $p[++$n]; 
```

请注意，正如 jeremy 指出的那样，您的原始代码失败了，因为递增和递减运算符会修改变量的原始值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T15:50:43.880

在第一次搜索时：

```
$prev = $p[$n--] 
```

您正在为下一个操作更改 n 的值，将其减一。在

```
$next = $p[$n++]; 
```

您再次增加它，因此 n 值与开始时相同。你应该按照nickb所说的去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:51:51.423

您正在内联递增相同的变量，因此：

`$n`当您这样做时不会保持为 5`$n++`或`$n--`，您将值重新分配给`$n`

`$n--`= 4，所以现在 $n 是 4，而不是 5 所以`$n++`是 5，而不是 6

# c++ - 崩溃，施工前使用

> ID：14629600
> 
> 赞同：1
> 
> 时间：2013-01-31T15:45:56.223
> 
> 标签：c++

我有一个类，它的对象将被另一个类使用，如下所示

```
class A
{
public:
    void F() {...}
};

class B
{
public:
    void G() { m_a->F(); ...} // use A's function

private:
    A* m_a;
}; 
```

因此在分配指针 m_a 之前调用 B::G() 是错误的。这是可接受的设计吗？或者有更好的方法来做到这一点。

问题来自开发 GUI 应用程序。我在主窗口下面有一个窗口，用来显示当前操作的一些基本信息，比如发生了什么，需要多长时间等等。我把这个窗口作为一个单独的窗口，以便通过可能分散在任何地方的操作轻松访问，并在关闭 GUI 应用程序时发现代码崩溃。崩溃是由于删除GUI应用程序（如Qt中的qApp）后删除了窗口。然后我只是将窗口的引用指针放在单例中。并且在构建窗口时，我设置了引用指针。窗口的删除由主窗口控制。这样就解决了上面提到的崩溃问题。但是如果其他开发人员在窗口构建之前使用单例，代码也会崩溃。有什么好办法解决吗？或者我们可以接受它，因为在构建之前使用它是开发人员的错误？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:52:53.450

如果未初始化，调用函数`G()`可能会导致未定义的行为`m_a`，因此您要确保不会出现这种情况。您必须更改代码以使其看起来像这样：

```
class B
{

public:

    B() : m_a(nullptr) { } // m_a always initialized!

    bool G() 
    { 
        if (m_a == nullptr) return false; // No Undefined Behavior!
        m_a->F(); // This call is safe now
        ...
        return true;
    }

private:

    A* m_a;

}; 
```

顺便说一句，通常您应该使用智能指针（选择实现适当所有权语义的类型）而不是原始指针，除非您有充分的理由这样做。这甚至可以使您免于手动初始化（假设此处共享所有权）：

```
#include <memory>

class B
{

public:

    bool G() 
    { 
        if (m_a == nullptr) return false; // No Undefined Behavior!
        m_a->F(); // This call is safe now
        ...
        return true;
    }

private:

    std::shared_ptr<A> m_a; // Automatically initalized to nullptr

}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:47:35.723

您必须使用**[成员初始化器列表](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor/8523361#8523361)**来**初始化** `m_a`而不是**分配**它。`m_a`它确保您在调用其他函数之前不必担心被分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:53:36.990

根据您对类的预期用法，这可能是一种可接受的做法，但如果您这样做，您最好`B::G()`先更改为检查指针：

```
void G() { if (m_a) m_a->F(); ...} 
```

并确保`m_a`在所有构造函数中进行初始化，如果您当前没有实数指向，则至少初始化为空指针`A`。

# powershell-2.0 - 将 Windows 事件日志导出到 CSV - Powershell 2.0

> ID：14629601
> 
> 赞同：1
> 
> 时间：2013-01-31T15:45:56.933
> 
> 标签：powershell-2.0, event-log

我需要定期从我们的生产环境将 Windows 事件日志导出到 CSV。

我有一个简单的 XML 配置文件，其中包含我需要从中获取事件的机器列表，以及我需要检索的事件 ID 列表。

从这里我依次遍历每台机器名称，然后是每个事件 ID 以检索日志，然后导出到 CSV。我希望每台机器每次执行一个 CSV。

一旦我计算出所有变量，PS 命令就可以很简单地检索一个事件 ID 的日志

```
foreach ($machine in $config.Configuration.Machines.Machine)
{
    $csvname=$outputlocation + $machine.Value + "_" + $datestring + ".csv"

    foreach ($eventid in $config.Configuration.EventIds.EventId)
    {
        Get-WinEvent -ComputerName $machine.Value -ErrorAction SilentlyContinue -FilterHashTable @{Logname='Security';ID=$eventid.Value} | where {$_.TimeCreated -gt $lastexecutiondate} | export-csv -NoClobber -append $csvname
    }
} 
```

执行我每次都无法附加到 CSV，PS 2.0 显然不支持这一点。我曾尝试一次提取所有事件 ID，但这似乎有点冗长，现在可能允许使用配置文件，但我对 PowerShell 相当陌生，所以我没有太多运气。

我还需要指定多个 LogNames（系统、安全和应用程序），并且更愿意运行一个语句而不是同一个语句 3 次和应用，但我不确定如何执行此操作。

不幸的是，此时谷歌让我绕着圈子跑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T16:38:33.473

以下是我收集的内容，以便我可以导出之前 24 小时的事件以供选择事件日志 - 我将创建一个计划任务，以便每天执行一次。希望这对其他人有帮助...

```
$eventLogNames = "Application", "Security", "System", "Windows PowerShell"
$startDate = Get-Date
$startDate = $startDate.addDays(-1).addMinutes(-15)

function GetMilliseconds($date)
{
    $ts = New-TimeSpan -Start $date -End (Get-Date)
    [math]::Round($ts.TotalMilliseconds)
}

$serverName = get-content env:computername
$serverIP = gwmi Win32_NetworkAdapterConfiguration |
    Where { $_.IPAddress } | # filter the objects where an address actually exists
    Select -Expand IPAddress | # retrieve only the property *value*
    Where { $_ -notlike '*:*' }
$fileNameDate = Get-Date -format yyyyMMddhhmm
$endDate = Get-Date
$startTime = GetMilliseconds($startDate)
$endTime = GetMilliseconds($endDate)

foreach ($eventLogName in $eventLogNames)
{
    Write-Host "Processing Log: " $eventLogName

<# - Remove comment to create csv version of log files  
    $csvFile = $fileNameDate + "_" + $serverIP +"_" + $eventLogName + ".csv"
    Write-Host "Creating CSV Log: " $csvFile
    Get-EventLog -LogName $eventLogName -ComputerName $serverName -After $startDate -ErrorAction     SilentlyContinue | Sort MachineName, TimeWritten | Select MachineName, Source, TimeWritten, EventID, EntryType, Message | Export-CSV $csvFile #ConvertTo-CSV #Format-Table -Wrap -Property Source, TimeWritten, EventID, EntryType, Message -Autosize -NoTypeInformation
#>
    $evtxFile = $fileNameDate + "_" + $serverIP + "_" + $eventLogName + ".evtx"
    Write-Host "Creating EVTX Log: " $evtxFile
    wevtutil epl $eventLogName $evtxFile /q:"*[System[TimeCreated[timediff(@SystemTime) >=   $endTime] and TimeCreated[timediff(@SystemTime) <= $startTime]]]"
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-04T10:21:29.170

为什么我无法导出日志安全性。指定的查询无效。我为每种类型的事件日志（系统、应用程序等）都得到了这个。这只发生在 evtx 导出中。我得到了 csv 文件。

# r - R中的长向量图/覆盖图

> ID：14629607
> 
> 赞同：2
> 
> 时间：2013-01-31T15:46:13.167
> 
> 标签：r, vector, plot, ggplot2, bioinformatics

我真的需要你的 R 技能。几天来一直在处理这个情节。我是 R 新手，所以这可以解释它。

我有染色体的序列覆盖数据（基本上是每个染色体长度上每个位置的值，使向量的长度达到数百万）。我想为我的阅读制作一个很好的覆盖图。这是我到目前为止得到的： ![在此处输入图像描述](../Images/ada9832e7754bc5e2f93dc7e1d2e5515.png)

看起来不错，但我缺少 y 标签，所以我可以知道它是哪条染色体，而且我在修改 x 轴时遇到了麻烦，所以它在覆盖范围结束的地方结束。此外，我自己的数据要大得多，这使得这个情节特别需要很长时间。这就是我尝试这个 HilbertVis plotLongVector 的原因。它可以工作，但我不知道如何修改它、x 轴、标签、如何记录 y 轴以及向量在图上的长度都相同，即使它们的长度不一样。

```
source("http://bioconductor.org/biocLite.R")
biocLite("HilbertVis")
library(HilbertVis)
chr1 <- abs(makeRandomTestData(len=1.3e+07)) 
chr2 <- abs(makeRandomTestData(len=1e+07)) 

par(mfcol=c(8, 1), mar=c(1, 1, 1, 1), ylog=T)

# 1st way of trying with some code I found on stackoverflow
# Chr1
plotCoverage <- function(chr1, start, end) { # Defines coverage plotting function.
  plot.new()
  plot.window(c(start, length(chr1)), c(0, 10))
  axis(1, labels=F) 
  axis(4)
  lines(start:end, log(chr1[start:end]), type="l")
}
plotCoverage(chr1, start=1, end=length(chr1)) # Plots coverage result.

# Chr2
plotCoverage <- function(chr2, start, end) { # Defines coverage plotting function.
  plot.new()
  plot.window(c(start, length(chr1)), c(0, 10))
  axis(1, labels=F) 
  axis(4)
  lines(start:end, log(chr2[start:end]), type="l")
}
plotCoverage(chr2, start=1, end=length(chr2)) # Plots coverage result.

# 2nd way of trying with plotLongVector
plotLongVector(chr1, bty="n", ylab="Chr1") # ylab doesn't work
plotLongVector(chr2, bty="n") 
```

然后我有另一个特别感兴趣的称为基因的载体。它们与染色体向量的长度大致相同，但在我的数据中，它们包含的零比值多。

```
genes_chr1 <- abs(makeRandomTestData(len=1.3e+07)) 
genes_chr2 <- abs(makeRandomTestData(len=1e+07)) 
```

我想将这些基因载体绘制为染色体下方的一个红点！基本上，如果向量在那里有一个值 (>0)，它会在长矢量图下显示为一个点（或线）。这个我不知道如何添加！但这似乎相当简单。

请帮我！太感谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:38:15.513

**免责声明：**请不要**简单**地复制和粘贴此代码来运行**您染色体的整个位置**。请采样位置（例如，如@Gx1sptDTDa 所示）并绘制它们。否则，如果您的计算机在排水管中幸存下来，您可能会在许多小时后得到一个巨大的黑色填充矩形。

使用`ggplot2`，使用 确实很容易实现`geom_area`。在这里，我为 300 个位置的三个染色体生成了一些随机数据，只是为了展示一个例子。我希望你可以在此基础上再接再厉。

```
# construct a test data with 3 chromosomes and 100 positions
# and random coverage between 0 and 500
set.seed(45)
chr <- rep(paste0("chr", 1:3), each=100)
pos <- rep(1:100, 3)
cov <- sample(0:500, 300)
df  <- data.frame(chr, pos, cov)

require(ggplot2)
p <- ggplot(data = df, aes(x=pos, y=cov)) + geom_area(aes(fill=chr))
p + facet_wrap(~ chr, ncol=1) 
```

![ggplot2_geom_area_coverage_plot](../Images/600ef64e7ca11f4b52acea7f18eead4b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:38:51.340

您可以使用 ggplot2 包。

我不确定你到底想要什么，但这就是我所做的： ![在此处输入图像描述](../Images/1217b85fea94395cccdeb76dd1e28472.png) 这有 7000 个随机数据点（实际上是染色体 1 上基因数量的两倍）。我使用 alpha 来显示密集区域（这里不多，因为它是随机数据）。

```
library(ggplot2)
Chr1_cov <- sample(1.3e+07,7000)
Chr1 <- data.frame(Cov=Chr1_cov,fil=1)
pl <- qplot(Cov,fil,data=Chr1,geom="pointrange",ymin=0,ymax=1.1,xlab="Chromosome 1",ylab="-",alpha=I(1/50))
print(pl) 
```

就是这样。这运行不到一秒钟。ggplot2 有大量的[设置](http://docs.ggplot2.org/0.9.3/index.html)，所以尝试一下。使用构面创建多个图表。

* * *

下面的代码是一种移动平均线，然后绘制它的输出。它不是*真正的*移动平均线，因为真正的移动平均线将具有（几乎）与原始移动平均线相同数量的数据点 - 它只会使数据更平滑。但是，此代码对每 n 个点取平均值。它当然会运行得更快一些，但你会丢失很多详细信息。

```
VeryLongVector <- sample(500,1e+07,replace=TRUE)

movAv <- function(vector,n){
    chops <- as.integer(length(vector)/n)
    count <- 0
    pos <- 0
    Cov <-0
    pos[1:chops] <- 0
    Cov[1:chops] <- 0
    for(c in 1:chops){
        tmpcount <- count + n
        tmppos <- median(count:tmpcount)
        tmpCov <- mean(vector[count:tmpcount])
        pos[c] <- tmppos
        Cov[c] <- tmpCov
        count <- count + n
    }

    result <- data.frame(pos=pos,cov=Cov)
    return(result)
}

Chr1 <- movAv(VeryLongVector,10000)
qplot(pos,cov,data=Chr1,geom="line") 
```

![在此处输入图像描述](../Images/4a0476f557d7aa0ec8fc2e069cb2ed12.png)

# javascript - 为什么滚动条出现或消失时不会触发调整大小事件？

> ID：14629609
> 
> 赞同：4
> 
> 时间：2013-01-31T15:46:25.873
> 
> 标签：javascript, browser

当浏览器的垂直滚动条出现或消失时，视口或浏览器窗口的宽度会发生变化（可以使用 jQuery 的 $(window).width() 方法测试），但不会触发窗口的 resize 事件。怎么来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:52:16.540

Re-size 是由实际浏览器窗口更改大小驱动的事件。

如果我从页面中删除元素直到我的内容适合屏幕会怎样？这不是重新调整窗口大小。或者，如果我将页面的溢出更改为隐藏。滚动条将消失，但这又不是重新调整大小。

我得到的是：滚动条可见性并不一定意味着有一个调整大小的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T01:28:44.757

而不是调整大小，使用overflowchanged 事件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T03:35:07.233

浏览器不会将其识别为调整大小。然后，如果您需要“滚动条出现”和“滚动条消失”事件，请使用以下代码：

```
<div id="footerDiv" style="float: left; height: 1px; width: 100%;"></div>

bodywidth = 0;

$(document).ready(function () {

    bodywidth = $("#footerDiv").width();
    setInterval(scrollbarHelper, 100);

});

function scrollbarHelper() { 

    var newwidth = $("#footerDiv").width();

    if (bodywidth !== newwidth) {

        if (bodywidth > newwidth) {
            alert("Scrollbar Appeared");
            // Your code here
        }
        else if (bodywidth < newwidth) {
            alert("Scrollbar Disppeared");
            // Your code here
        }

        bodywidth = newwidth;
    }
} 
```

# azure - 从 Windows Azure 移动服务使用 SOAP 服务

> ID：14629610
> 
> 赞同：3
> 
> 时间：2013-01-31T15:46:32.133
> 
> 标签：azure, azure-mobile-services

我有一个 Windows Azure 移动服务启动并运行，但是，该服务需要使用通过外部 SOAP 服务公开的一些数据并将该信息存储在移动服务数据库中。

我想在移动服务中设置一个worker，这样对外部SOAP服务的调用是在固定的时间段内执行的。

我一直在寻找解决这个问题的方法，但还没有找到任何东西。因此，任何能让我朝着正确方向前进的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T01:15:28.320

不幸的是，没有一种简单的方法可以从您的移动服务后端与 SOAP 服务通信。后端基于 Node.js，尽管有一些用于与 SOAP 服务通信的 Node 模块，但它们目前在移动服务中不受支持。我们正在开发一种解决方案，使您能够在您的服务中使用任何 Node 模块，但它还没有推出。

如果您控制 SOAP 服务并且它是使用 WCF 编写的，那么您只需进行一些配置更改即可轻松地将 REST 端点添加到服务中，然后使用“请求”通过普通 HTTP 请求从您的移动服务中使用它模块。

# list - 在 Lisp 中进行柯里化：(list 1 2 3) 和 (1 2 3) 之间的区别？

> ID：14629619
> 
> 赞同：1
> 
> 时间：2013-01-31T15:46:53.907
> 
> 标签：list, lisp, currying

`(list f 1 2)`和有什么区别`(f 1 2)`吗？

如果是，那么就`(f 1 2)`相当于`((f 1) 2)`（currying）？

如果是，那么`(a b)`意思是“添加`b`到列表末尾`a`”？

如果是，那么`append`它的作用是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:59:06.253

> (list f 1 2) 和 (f 1 2) 之间有什么区别吗？

是：使用参数和`(list f 1 2)`调用函数，这将创建一个包含这些元素的列表。使用参数和调用函数，它执行任何定义的操作。`list``f``1``2``(f 1 2)``f``1``2``f`

> (f 1 2) 是否等同于 ((f 1) 2) （柯里化）？

不，Lisp 中的函数不会自动柯里化。如果你调用一个函数，因为`(f 1 2)`它必须是一个真正的二进制函数，而不是一个柯里化函数。

> (ab) 是指“将 b 添加到列表 a 的末尾”吗？

不，它的意思是“`a`用参数调用函数`b`”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T16:40:42.343

`(list 1 2 3)`是一种 Lisp 形式，它计算三个值的新列表，即`1`和`2`的值`3`。

`(1 2 3)`是一个列表并计算错误，因为第一个元素是一个数字，而不是一个函数。作为带引号的列表，它将是元素的文字列表`1`，`2`和`3`。

`(list f 1 2)`调用`list`评估结果的函数`f`，`1`并且`2`. `f`是一个变量，评估取其值。`1`并且`2`是对自己进行评估的数字。它返回三个元素的新列表。

`(f 1 2)``f`在评估`1`和的值上调用函数`2`，它们正在评估自己。

`((f 1) 2)`在 Lisp 中无效。一些 Lisp 方言，如 Scheme，允许这样做。在 Lisp 中，函数形式的第一个元素必须是函数名（或者在 Common Lisp 中是 lambda 形式）。

`(a b)``a`表示根据评估的值调用函数`b`，评估为变量的值`b`。

`append`用于附加列表。

也不，'Lisp' 不支持柯里化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T15:55:32.537

`(list f 1 2)`是的，和之间有明显的区别`(f 1 2)`：
* 第一个评估为`(#the value of <f># 1 2)`。
* 第二个评估`f`应用到`1`和的结果`2`。

Lisp 函数不会“开箱即用”地进行柯里化，但可以定义它们来这样做。

`(a b)`表示将函数`a`应用于（的值）`b`。

`append` *需要*附加列表。

# css - 仅为桌面布局设置最小宽度

> ID：14629622
> 
> 赞同：0
> 
> 时间：2013-01-31T15:47:03.097
> 
> 标签：css, twitter-bootstrap

我正在尝试使用 Twitter 引导程序创建响应式设计。一切顺利，但我无法弄清楚如何为桌面用户设置最小宽度。

当用户在桌面上时，我不希望他们能够将浏览器缩小到他们看到手机的响应功能（例如导航栏移动按钮）的程度。当浏览器变得太小时，我宁愿只有一个水平滚动条。如何在不影响移动布局的情况下获得此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:10:27.347

您可以使用媒体查询来解决这个问题。唯一的问题是您必须为此设置一个固定`width`值，`min-width`在这种情况下似乎不起作用（在 Firefox 和 Chrome 中测试）。如果这对您来说没问题，您可以尝试以下示例：

```
// Should be something > 1024
@media only screen and (min-device-width: 1300px) {
    body {
        width: 1300px;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:10:43.283

要复制 logicvault.com 的网站运行方式，您需要更改 Bootstrap CSS，以便您只有一个以 480 像素启动的媒体查询。

这是他们设置的媒体查询：

```
@media only screen and (max-width: 480px){
    // styles here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T19:10:53.460

通过使用 Frederic 的建议，我能够实现此功能：

```
// Should be something > 1024
@media only screen and (min-device-width: 1024px) {
    body {
        min-width: 1025px;
    }
} 
```

但是，我还需要调整引导响应文件，以便样式仅应用于触摸设备。我最终在我的页面上包含了 Modernizr 并寻找触摸类。

例如改变：

```
@media (min-width: 768px) and (max-width: 979px) {
    // Styles are here
} 
```

至：

```
@media (device-min-width: 768px) and (device-max-width: 979px) {

    .touch {
        // Styles go here
    } 
```

# forms - Zend 控制器无法从 Chrome 和 Safari 中的 Zend Form 检索 POST 值

> ID：14629629
> 
> 赞同：0
> 
> 时间：2013-01-31T15:47:30.157
> 
> 标签：forms, zend-framework, google-chrome, post

**编辑：自行解决。重新创建`LoginController`并且问题消失了。感谢您的回复！**

所以我对 Zend 还很陌生，所以也许我错过了一些非常简单的东西。场景非常简单。我有一个 Zend_Form on `index`submit to `/login`，我想在其中处理用户名和密码变量。我使用自定义装饰器来设置表单，生成的 HTML 如下所示：

```
<form id="loginForm" name="loginForm" enctype="application/x-www-form-urlencoded" method="post" action="/login">
    <div class="input-container" id="username-container">
        <input type="text" name="username" id="username" value="" helper="formText">  
        <div class="input-overlay">Username/Email</div>
    </div>
    <div class="input-container" id="password-container">
        <input type="password" name="password" id="password" value="" helper="formPassword">
        <div class="input-overlay">Password</div>
    </div>
    <div id="dropdown-checkbox-forgot-container">
        <div class="checkbox-container" id="checkbox-container-rememberMe">
            <input type="hidden" name="rememberMe" value="0">
            <input type="checkbox" name="rememberMe" id="rememberMe" value="1" checked="checked" helper="formCheckbox" text="Remember me" class="light">
            <div class="light checkbox-text" id="checkbox-text-rememberMe">Remember me</div>
        </div>
        <a href="/login/forgot" class="medium" id="dropdown-forgot-password">Forgot password?</a>
    </div>
    <input type="image" name="login" id="dropdown-login-submit" src="">
</form> 
```

伟大的！让我们提交吧！我在我的 LoginController 中放了一个简单的内容`var_dump`，以确认这些值已正确传输。 `var_dump($this->getRequest()->getPost())`. FF 和 IE 都显示应有的值。但是，Chrome 和 Safari 不显示`username`或`password`输入。POST 数组中只有一个`rememberMe`值。奇怪的...

现在我认为这可能是 Zend 对 POST 超全局的访问，所以我将代码更改为`var_dump($_POST)`. 同样的问题。沮丧中，我尝试`var_dump`了 $_POST 和`$this->getRequest()->getPost()`.... 并且它起作用了！？它转储了一份仅包含输入的副本和`rememberMe`一份包含所有内容（包括在内）的副本。不知道为什么或如何工作。任何有关问题可能是什么的见解将不胜感激！`username``password`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:34:55.567

通过 ZendTool 重新创建了我的 LoginController 并按预期工作。

# php - mysql_field_name 到新的 mysqli

> ID：14629636
> 
> 赞同：25
> 
> 时间：2013-01-31T15:47:47.070
> 
> 标签：php, mysqli

我有一种方法来获取表列的名称。它工作正常，但现在我想更新到新的 mysqli ？（我尝试了 mysqli_fetch_field 但我不知道如何应用于这种情况，我不确定它是否是 wright 选项）

如何用 mysqli 做同样的事情？：

```
$sql = "SELECT * from myTable";
$result = mysql_query($sql,$con);
$id = mysql_field_name($result, 0);
$a = mysql_field_name($result, 1);

echo $id;
echo $a; 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-12-10T09:32:47.523

这是实现这个缺失功能​​的方法：

```
function mysqli_field_name($result, $field_offset)
{
    $properties = mysqli_fetch_field_direct($result, $field_offset);
    return is_object($properties) ? $properties->name : null;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-10T12:07:18.793

我不确定是否有更好的方法来做到这一点，但我检查了这是否可以仅获取列的名称并且是新的 mysqli ：

```
$result = mysqli_query($con, 'SELECT * FROM myTable');
while ($property = mysqli_fetch_field($result)) {
    echo $property->name;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-12T14:43:18.943

您可以将函数替换`mysql_field_name`为`mysqli_fetch_field_direct`并使用它，如下所示：

```
$colObj = mysqli_fetch_field_direct($result,$i);                            
$col = $colObj->name;
echo "<br/>Coluna: ".$col; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-11T06:19:20.643

这是打印每个字段的名称、表格和最大长度的另一种简单方法

```
$sql="SELECT Lastname,Age FROM Persons ORDER BY Lastname";

if ($result=mysqli_query($con,$sql))
{
   // Get field information for all fields
   while ($fieldinfo=mysqli_fetch_field($result))
   {
      printf("Name: %s\n",$fieldinfo->name);
      printf("Table: %s\n",$fieldinfo->table);
      printf("max. Len: %d\n",$fieldinfo->max_length);
   }
   // Free result set
   mysqli_free_result($result);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T15:53:34.083

```
$sql = "SELECT * from myTable";
$res = mysqli_query($con,$sql);
$row = mysqli_fetch_assoc($res);
$fields = array_keys($row);
var_dump($fields); 
```

# python - Moving files to corresponding folder based on name

> ID：14629639
> 
> 赞同：0
> 
> 时间：2013-01-31T15:48:00.043
> 
> 标签：python, move

I am trying to move files to a corresponding folder based on their filename in Python. There are 3 identifiers, the genre i.e. "DRAMA", the director i.e. "von Trier", and the movie name i.e. "Melancholia". So the file "DRAMA von Trier Melancholia" would need to be moved to say, C:/shared/com/movies/DRAMA/Melancholia/von Trier. There are many files located that need to be moved, so I would rather not hard code the locations/do it 1 by 1\. Here is what I have so far which lists all the files I want moved, but does not actually move them.

```
import os
import shutil
import fnmatch

for dirpath, dirs, files in os.walk('C:/shared/com/movies/'):
    print dirpath
    print dirs
    print files
    for filename in files:
        if filename.endswith('*.mov'):
            shutil.move('') #not sure how to code this to have it move based on paramaters rather than hard coding it 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:01:24.350

您可以尝试使用 modul os.path 并使用 split 或 splittext 获取有关文件名的信息。之后，您可以使用 modul re 拆分文件名。使用部件和 mkdir，您可以创建必要的目录。你能举一个文件名的例子吗？

# c++ - 如何在 c++ 中返回一个本身在堆上分配空间的对象？

> ID：14629640
> 
> 赞同：0
> 
> 时间：2013-01-31T15:48:06.850
> 
> 标签：c++, function, object, return, heap-memory

**解决了**

解决方法：提供拷贝构造函数，遵循三者法则。

**原来的问题**

我正在实现一个作为间隔矩阵的类。我的 Intervall 类看起来像这样（缩短）：

```
class Intervall
{
friend std::ostream& operator<<(std::ostream& output, const Intervall& i);

public:
    Intervall();
    Intervall(double n);

private:
    double min_value;
    double max_value;
}; 
```

有了这个实现：

```
Intervall::Intervall(){
    min_value = 0;
    max_value = 0;
}

Intervall::Intervall(double n){
    min_value = n;
    max_value = n;
}

ostream& operator<<(ostream& output, const Intervall& i){
    output << "[" <<  i.min_value << ", " << i.max_value <<"]";
    return output;
} 
```

我的 Matrix 类如下所示：

```
class IntervallRMatrix
{
friend std::ostream& operator<<(std::ostream& output, const IntervallRMatrix& irm);

public:
   IntervallRMatrix();
   ~IntervallRMatrix();

   void setIdentity();

   IntervallRMatrix clone();

private:
   void initialize();

   Intervall* data;
   Intervall** cells;
}; 
```

通过以下实现：

```
IntervallRMatrix::IntervallRMatrix(){
    initialize();
}

IntervallRMatrix::~IntervallRMatrix(){
    delete cells;
    delete data;
}

ostream& operator<<(ostream& output, const IntervallRMatrix& irm){
    output << "3 x 3" << endl;
    for(int i=0; i<3; i++){
        for(int j=0; j<3; j++){
            output << irm.cells[i][j];
        }
        output << endl;
    }
    return output;
}

void IntervallRMatrix::setIdentity(){
    cells[0][0] = Intervall(1);
    cells[1][1] = Intervall(1);
    cells[2][2] = Intervall(1);
}

IntervallRMatrix IntervallRMatrix::clone(){
    IntervallRMatrix result;
    for(int i=0; i<3; i++){
        for(int j=0; j<3; j++){
            result.cells[i][j] = cells[i][j];
        }
    }
    return result;
}

void IntervallRMatrix::initialize(){
    data = new Intervall[9];
    for(int i=0; i<9; i++){
        data[i] = Intervall();
    }
    cells = new Intervall*[3];
    for(int i=0; i<3; i++){
        cells[i] = &data[3*i];
    }
} 
```

在我使用克隆功能之前，这一切都很好。此代码产生内存错误：

```
int main()
{
    IntervallRMatrix m1;
    m1.setIdentity();
    cout << "m1: " << m1 << endl;

    IntervallRMatrix m2 = m1.clone();
    cout << "m2: " << m2 << endl;
    return 0;
} 
```

第一个 cout 按预期工作。第二个 cout 没有。当程序试图读取时，错误就来了`m2.cells[0][0]`。

`cells and data`如果我不在析构函数中删除，则不会发生此错误。

我以我的方式声明单元格和数据，因为我想重载方括号，以便以后可以编写`Intervall = Matrix[i][j]`. 我还想重载算术运算符，以便我可以编写`Matrix m3 = m2*m1`. 事实上，我已经这样做了，这就是错误首先发生的地方。

现在，最后我的问题：如何实现一个函数，该函数返回一个不会导致内存错误的 IntervallRMatrix，同时仍然能够释放析构函数中分配的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:50:06.397

最好的解决方案是避免手动内存管理。使用适当的容器（例如`std::vector`）或智能指针。

如果您**必须**进行手动管理，请确保遵循[*“三法则”*](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:59:37.990

这里的问题是 clone 方法返回您刚刚在堆栈上创建并初始化的结果对象的副本。由于您没有实现任何复制构造函数（从我们所见），编译器提供了一个默认构造函数。这个默认实现基本上会将成员变量从一个实例复制到另一个实例（在这种情况下，是指向单元格和数据的指针）。内容根本不会重复。一旦你离开克隆函数范围，结果对象就会被删除（作为前析构函数代码），你最终会得到一个结果副本，其中单元格和数据指针仍然指向刚刚空闲的内存。这会导致未定义的行为（通常读作“它会崩溃”）

遵循 Oli Charlesworth 在他的回答中提出的三法则。

# android - How can I disable the action bar when text is selected in a DialogFragment?

> ID：14629641
> 
> 赞同：1
> 
> 时间：2013-01-31T15:48:07.397
> 
> 标签：android, android-actionbar, android-dialogfragment

I'm working on an ICS (4.0.3) tablet app where we're using `DialogFrament` extensively. When the user does a long press inside a text editor in a dialog fragment I need to prevent the copy/paste action bar from appearing at the top of the screen. Fortunately we have our own base class extending `DialogFragment` (call it `MyOrgDialogFragment`) that all our dialog fragments are based on, so I can modify that if required.

My first attempt has involved overriding `OnCreateDialog()` in `MyOrgDialogFragment`, then overriding `onWindowStartingActionMode()` inside that, i.e.:

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState)
{
    return new Dialog(getActivity()) {
        @Override
        public ActionMode onWindowStartingActionMode(ActionMode.Callback callback)
        {
            return new ActionMode()
            {
                // [ All overrides empty ]
            }
        }
    };
} 
```

This nearly works: it prevents the action bar from appearing, and the selection handles still appear when I long-press in an edit field (which is fine), but the selection handles aren't dismissed correctly when I move focus onto another edit field. I end up with "zombie" selection handles hovering over each edit field I've made a selection in.

Can anyone point me towards a better solution?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:42:26.470

查看可用于/的[setCustomSelectionActionModeCallback](http://developer.android.com/reference/android/widget/TextView.html#setCustomSelectionActionModeCallback%28android.view.ActionMode.Callback%29)方法。如果你使用这样的空：`TextView``EditText``ActionMode.Callback`

```
private ActionMode.Callback mModeCallback = new Callback() {

        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {
            // TODO Auto-generated method stub

        }

        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            // TODO Auto-generated method stub
            return false;
        }
    }; 
```

选择`ActionMode`将被阻止（切换字段时没有选择处理程序，实际上它们根本不会出现）。

# polymorphism - OCaml：具有通用键的地图上的多态函数

> ID：14629642
> 
> 赞同：3
> 
> 时间：2013-01-31T15:48:07.120
> 
> 标签：polymorphism, ocaml

在 OCaml 中，通用地图上有多态函数吗？IE：

你可以有：`f : 'a list -> bool`相当于`bool f<T> ([T] x)`

你也可以有类似`f : ('k,'v) map -> bool`的东西：相当于`bool f<K,V> (Map<K,V> x)`？

如果是这样，类型签名的正确语法是什么，以及如何实现这样的函数（我问，因为 map 是抽象类型，操作它的唯一方法是使用通过调用`Map.Make`具体类型获得的函数)?

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:06:17.383

这取决于您使用哪种类型的通用映射，并且您必须区分这两个参数（键的类型和值的类型）。如果你使用默认库的[Map.Make 仿](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Map.Make.html)函数，你可以在值的类型上通用，但是键的类型将是固定的（通过仿函数实例化）：对于给定的键模块`Key`，生成的映射`module MyMap = Map.Make(Key)`只有一个参数，`'v MyMap.t`，所以你可以有`f : 'v MyMap.t -> bool`。

还有其他库提供所谓的“多态”映射，其形式类型`('k, 'v) pmap`允许在键和值类型上都是多态的。然而，这通常是以较少的静态保证为代价的：如果您以`'k`一种不保留键顺序的方式进行更改，您将获得不一致的结果，而这种方式在编译时无法检测到。

当然，您可以通过增强`Map.Make`函子本身来实现适用于任何键类型的附加功能（代码未经测试）：

```
module MyMake(K : Map.OrderedType) = struct
  include Map.Make(K)
  (* after the "include", all the functions provided by `Map.Make`
     are available in the module *)
  let is_not_empty m = not (is_empty m)
end

module MyMap = MyMake(String)
let foo = MyMap.is_not_empty (...) 
```

（备注：如果您不需要持久性集合（不复制/共享/回溯值）并且您不关心最坏情况的复杂性（无用暴露于用户拒绝服务攻击），您可以也可以使用哈希表，使用提供类型的[Hashtbl](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Hashtbl.html)`('k, 'v) Hashtbl.t`模块。但是`'k`实际上并不存在多态性：您没有任何函数可以使该参数发生变化）。

# android - ORMLite 处理 uniqueCombo 约束失败异常

> ID：14629643
> 
> 赞同：3
> 
> 时间：2013-01-31T15:48:09.570
> 
> 标签：android, sql, sqlite, exception, ormlite

我的数据库中有几列被注释为 uniqueCombo=true

```
@DatabaseField(columnName = "COL1", uniqueCombo = true)
private Double col1;

@DatabaseField(columnName = "COL2", uniqueCombo = true)
private Double col2; 
```

根据 ormlite 文档，这两个字段的组合在表中应该是唯一的。为了测试这一点，我特意添加了相同的字段。我确实收到了 SQLException，但不确定如何处理此异常并要求用户进行更改。

```
try {
        mydao.create(myInfo);

     } catch (SQLException e) {
        // TODO Auto-generated catch block

       e.printStackTrace();
       /* Need to uniquely identify constraint failed error here
        * and ask user to make suitable change */
     } 
```

知道如何实现这一点。

- 更新 - -

SQLException getErrorCode 和 getSQLState 分别返回 0 和 null。

Logcat 堆栈跟踪：

```
Caused by: android.database.sqlite.SQLiteConstraintException: column NAME is not unique (code 19)
01-31 22:15:14.042: W/System.err(2586):         at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
01-31 22:15:14.042: W/System.err(2586):         at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:775)
01-31 22:15:14.042: W/System.err(2586):         at android.database.sqlite.SQLiteSession.executeForLastInsertedRowId(SQLiteSession.java:788)
01-31 22:15:14.042: W/System.err(2586):         at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:86)
01-31 22:15:14.042: W/System.err(2586):         at com.j256.ormlite.android.AndroidDatabaseConnection.insert(AndroidDatabaseConnection.java:122)
01-31 22:15:14.042: W/System.err(2586):         ... 15 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:22:44.330

> 我确实收到了 SQLException，但不确定如何处理此异常并要求用户进行更改。

您当然可以捕获异常并查看它是否存在，`instanceof SQLiteConstraintException`但我总是讨厌将异常视为常见事件。

我要做的是对用户的输入进行查询，以查看是否存在`MyInfo`具有相同字段的现有对象。类似于以下内容：

```
QueryBuilder<MyInfo, Integer> qb = mydao.queryBuilder();
qb.where().eq("COL1", myInfo.col1).and().eq("COL2", myInfo.col2);
if (qb.queryForFirst() != null) {
   // tell the user to enter unique values
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T21:12:20.213

这不是最好的方法，但这可以帮助某些人......

```
try {
        //insert to ORMLite
} catch (SQLException e) {
        validateException(e);
} 
```

在 validateException 方法中：

```
private void validateException(SQLException e) {
        try{
            if (e.getCause() == null)
                throw e;
            if (e.getCause().getCause() == null)
                throw e;
            if (e.getCause().getCause() instanceof SQLiteConstraintException)
                Log.d("Test", "Ignoring duplicate");
            else
                throw e;
        }catch(SQLException e1){
            //exception thrown by e;
        }
    } 
```

# javascript - How can I prevent a custom event from being triggered repeatedly – or can I "reset" the jQuery .one() function?

> ID：14629647
> 
> 赞同：1
> 
> 时间：2013-01-31T15:48:19.147
> 
> 标签：javascript, jquery, events

I have some code, that checks for the visibility of an element on the screen. As soon as it comes in sight by scrolling the page a custom event is triggered. This custom event starts an animation. To prevent this animation to be started over and over the function that starts it is only started once. For that I used the jQuery function .one().

The function to check if element is visible:

```
checkScrollPos = function() {
    if (objTopPos - scrollPos <= windowHeight / 2) {
        $(document).trigger('objVisible');
    }
} 
```

The function to listen for the event:

```
evtListener = function() {
    //startAnimation() should only be started once
    $(document).one(
        {
            'objVisible': function(event) {
                startAnimation();
            }
        }
    );
} 
```

Here it all happens:

```
$(document).ready(function() {
    evtListener();
    $(window).scroll(function () {
        scrollPos = $(document).scrollTop();
        checkScrollPos();
    }
} 
```

Now this all works fine but I extended the checkScrollPos() function to also check if the element gets out of sight again, to then stop the animation. That works fine to. Problem is, as the events trigger, the event-bound functions only are executed one time. So when you scroll teh element in sight, then out of sight and then in sight again the animation will not be executed again (what is the correct behaviour of course). Now I would like to have it that the events are triggered exactly one time but EVERYTIME the element gets in or out of sight and not just one time at all. So basicly I need some kind of reset for the

```
$(document).one() 
```

function – so that everytime the element gets out of sight, I can use the .one() function again. Is there any way to do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:56:26.070

`objVisible`每次元素消失时，您都必须绑定事件。

只需`evtListener()`在元素消失后调用，以便`objVisible`再次绑定事件。

您的代码将是这样的：

```
checkScrollPos = function() {
    if (objTopPos - scrollPos <= windowHeight / 2) {
        $(document).trigger('objVisible');
    }

    if (/* your condition to check if element is out of sight */) {
        evtListener();
    }
} 
```

# php - MySQL - 从多个表中选择，可能没有连接？

> ID：14629648
> 
> 赞同：2
> 
> 时间：2013-01-31T15:48:20.753
> 
> 标签：php, mysql, sql, join

我需要帮助已经有一段时间了，但今天我来这里基本上是从你的知识中获得帮助。我目前非常困扰一个非常烦人的 SQL 问题，如下所示。

我有两张桌子。Painteditems 和特殊物品。两个表都有唯一的列名（painteditemid、specialitemid 等），但两个表共享相似的值。我想从两个表中得到结果。

假设这是我的设置：

彩绘物品

*   绘制项目名称
*   彩绘项目颜色
*   可见的

特殊物品

*   特殊物品名称
*   特殊项目颜色
*   可见的

我使用了这个查询：

```
SELECT *
FROM `painteditems` AS pa,
     `specialitems` AS sp
WHERE (pa.`visible` = 1
       OR sp.`visible` = 1)
  AND (pa.`painteditemname` = 'itemname1'
       OR sp.`specialitemname` = 'itemname1')
  AND (pa.`painteditemcolor` = 'black'
       OR sp.`specialitemcolor` = 'black') 
```

结果是：

```
Showing rows 0 - 29 ( 259,040 total, Query took 39.4352 sec) 
```

即使两个表总共只包含 10.000 行。添加这个什么也没做：

```
GROUP BY pa.`painteditemid`, sp.`specialitemid` 
```

仍然是 260k 行。我应该如何处理这个？

先感谢您。

编辑：固定间距，代码块

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T15:52:39.747

当然听起来你想要`UNION`两张桌子之间的一个。现在，您得到的是笛卡尔积，这就是结果如此之大的原因：

```
select *, 'painted' Source
from painteditems
where visible = 1
    and painteditemname = 'itemname1'
    and painteditemcolor = 'black'
union all
select *, 'special' Source
from specialitems
where visible = 1
    and specialitemname = 'itemname1'
    and specialitemcolor = 'black' 
```

您需要将 替换为`SELECT *`您的列名。此外，两个查询中的列数和数据类型必须匹配。

`UNION ALL`将返回两个表中的所有行，如果您只想要`DISTINCT`行，那么您将要使用`UNION`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:57:28.177

[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)运算符用于组合两个或多个 SELECT 语句的结果集。挑衅如果您满足以下条件，您可以使用 UNION，如`@bluefeet's`答案所示。

*   UNION 中的 SELECT 语句必须具有相同的列数
*   列还必须具有相似的数据类型
*   每个 SELECT 语句中的列的顺序必须相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:59:52.217

我会`union all`在子查询中使用 a 来执行此操作：

```
select *
from ((select paintedItemName as ItemName, paintedItemColor as ItemColor, visible, 'Painted' as which
       from painteditems
      ) union all
      (select specialItemName, SpecialItemColor, visible, 'Special' as which
       from specialitems
      )
     ) t
where visible = 1 and itemname = 'itemname1' and itemcolor = 'black' 
```

这允许您只有一组结果。在 a`union`中，列名来自第一个子查询，这会将其重命名为更通用的名称。我喜欢这种方法的原因是该`where`子句不需要重复多次——这可能会导致错误和维护问题。

# javascript - 在客户端 javascript 代码中重用来自 Node.js 的 Web 模型

> ID：14629650
> 
> 赞同：0
> 
> 时间：2013-01-31T15:48:24.447
> 
> 标签：javascript, node.js

在我现在正在处理的一个项目中，我有一些网络模型来表示表单提交等。例如，登录表单（一个非常糟糕的例子）如下：

```
var revalidator = require('revalidator'); // A node.js module for validation

LoginForm = function(email, password) {
    this.Email = email;
    this.Password = password;
};

LoginForm.prototype.validate = function() {
  return revalidator.validate(this, {
    properties: {
        Email: {
          description: 'The email address provided is not valid',
          type: 'string',
          format: 'email',
          required: true
        },
        Password: {
          description: 'The password is not provided',
          type: 'string',
          required: true
        }
      }
  })
};

exports.LoginForm = LoginForm; 
```

这目前在我当前的 node.js 设置中效果很好，但我想知道是否有任何方法可以在客户端 javascript 代码上重用这些模型。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:17:40.657

Javascript就是Javascript，你可以分享代码。您必须记住，浏览器和 Node.js 之间存在一些差异。如果你想分享你的代码，你不能使用 require 并且必须在使用它之前检查导出对象是否存在：

```
if(typeof exports === 'object'){
    exports.LoginForm = LoginForm;
} else {
    // your browser export
} 
```

# java - libgdx 为什么相机不跟随角色？

> ID：14629653
> 
> 赞同：3
> 
> 时间：2013-01-31T15:48:33.100
> 
> 标签：java, android, libgdx

我是 libgdx 的新手，我已经阅读了教程（教程代码是我的基础）。我有一个可以移动的角色，但相机不会跟随角色:(

这是我的 WorldRenderer.java：

```
package com.evolutio.tee.view;

import com.evolutio.tee.model.Block;
import com.evolutio.tee.model.Tee;
import com.evolutio.tee.model.World;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.glutils.ShapeRenderer;
import com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
import com.badlogic.gdx.math.Rectangle;

public class WorldRenderer {

    private static final float CAMERA_WIDTH = 10f;
    private static final float CAMERA_HEIGHT = 7f;

    private World world;
    private OrthographicCamera cam;

    /** for debug rendering **/
    ShapeRenderer debugRenderer = new ShapeRenderer();

    /** Textures **/
    private Texture teeTexture;
    private Texture blockTexture;

    private SpriteBatch spriteBatch;
    private boolean debug = false;
    private int width;
    private int height;
    private float ppuX; // pixels per unit on the X axis
    private float ppuY; // pixels per unit on the Y axis

    public void setSize (int w, int h) {
        this.width = w;
        this.height = h;
        ppuX = (float)width / CAMERA_WIDTH;
        ppuY = (float)height / CAMERA_HEIGHT;
    }

    public WorldRenderer(World world, boolean debug) {
        Tee tee = world.getTee();
        this.world = world;
        cam = new OrthographicCamera(CAMERA_WIDTH, CAMERA_HEIGHT);
        cam.position.set(CAMERA_WIDTH / 2f, CAMERA_HEIGHT / 2f, 0);
        cam.update();
        this.debug = debug;
        spriteBatch = new SpriteBatch();
        loadTextures();
    }

    private void loadTextures() {
        teeTexture = new  Texture(Gdx.files.internal("tee/tee.png"));
        blockTexture = new Texture(Gdx.files.internal("world/dreck.png"));
    }

    public void render() {
        spriteBatch.begin();
            drawBlocks();
            drawTee();
        spriteBatch.end();
        //if (debug) drawDebug();
    }

    private void drawBlocks() {
        for (Block block : world.getBlocks()) {
            spriteBatch.draw(blockTexture, block.getPosition().x * ppuX, block.getPosition().y * ppuY, Block.SIZE * ppuX, Block.SIZE * ppuY);
        }
    }

    private void drawTee() {
        Tee tee = world.getTee();
        spriteBatch.draw(teeTexture, tee.getPosition().x * ppuX, tee.getPosition().y * ppuY, Tee.SIZE * ppuX, Tee.SIZE * ppuY);
        cam.position.set(tee.getPosition().x, tee.getPosition().y, 0);
    }

    private void drawDebug() {
        // render blocks
        debugRenderer.setProjectionMatrix(cam.combined);
        debugRenderer.begin(ShapeType.Rectangle);
        for (Block block : world.getBlocks()) {
            Rectangle rect = block.getBounds();
            float x1 = block.getPosition().x + rect.x;
            float y1 = block.getPosition().y + rect.y;
            debugRenderer.setColor(new Color(1, 0, 0, 1));
            debugRenderer.rect(x1, y1, rect.width, rect.height);
        }
        // render Tee
        Tee tee = world.getTee();
        Rectangle rect = tee.getBounds();
        float x1 = tee.getPosition().x + rect.x;
        float y1 = tee.getPosition().y + rect.y;
        debugRenderer.setColor(new Color(0, 1, 0, 1));
        debugRenderer.rect(x1, y1, rect.width, rect.height);
        debugRenderer.end();
    }
} 
```

在 drawTee() 我尝试让相机跟随 Tee。

```
cam.position.set(tee.getPosition().x, tee.getPosition().y, 0); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T16:09:38.917

试试这个

```
public class WorldRenderer {

private static final float CAMERA_WIDTH = 10f;
private static final float CAMERA_HEIGHT = 7f;

private World world;
private OrthographicCamera cam;

/** for debug rendering **/
ShapeRenderer debugRenderer = new ShapeRenderer();

/** Textures **/
private Texture teeTexture;
private Texture blockTexture;

private SpriteBatch spriteBatch;
private boolean debug = false;
private int width;
private int height;
private float ppuX; // pixels per unit on the X axis
private float ppuY; // pixels per unit on the Y axis

public void setSize (int w, int h) {
    this.width = w;
    this.height = h;
    ppuX = (float)width / CAMERA_WIDTH;
    ppuY = (float)height / CAMERA_HEIGHT;
}

public WorldRenderer(World world, boolean debug) {
    Tee tee = world.getTee();
    this.world = world;
    this.cam = new OrthographicCamera(CAMERA_WIDTH, CAMERA_HEIGHT);
    this.cam.setToOrtho(false,CAMERA_WIDTH,CAMERA_HEIGHT);
    this.cam.position.set(CAMERA_WIDTH / 2f, CAMERA_HEIGHT / 2f, 0);
    this.cam.update();
    this.debug = debug;
    spriteBatch = new SpriteBatch();
    loadTextures();
}

private void loadTextures() {
    teeTexture = new  Texture(Gdx.files.internal("tee/tee.png"));
    blockTexture = new Texture(Gdx.files.internal("world/dreck.png"));
}

public void render() {
    moveCamera(tee.getPosition().x, CAMERA_HEIGHT / 2);
    spriteBatch.setProjectionMatrix(cam.combined);
    spriteBatch.begin();
        drawBlocks();
        drawTee();
    spriteBatch.end();
    //if (debug) drawDebug();
}

public void moveCamera(float x,float y){
    if ((tee.getPosition().x > CAMERA_WIDTH / 2)) {
        cam.position.set(x, y, 0);
        cam.update();
    }

}

private void drawBlocks() {
    for (Block block : world.getBlocks()) {
        spriteBatch.draw(blockTexture, block.getPosition().x, block.getPosition().y, Block.SIZE, Block.SIZE);
    }
}

private void drawTee() {
    Tee tee = world.getTee();
    spriteBatch.draw(teeTexture, tee.getPosition().x, tee.getPosition().y, Tee.SIZE, Tee.SIZE);
} 
```

在 spriteBatch.begin() 之前使用 sprite.setProjectionMatrix(cam.combined) 是必需的，因为如果您不 spriteBatch 使用它自己的相机，因此您的更新对屏幕上显示的内容没有任何作用。你必须取出 ppuX、ppuY 的东西。我知道这是为不同设备调整屏幕大小，但它搞砸了相机，因此如果你保留它并调用 setProjectionMatrix，它将被放大（实际上所有图像的大小都会很大。）

# selenium - Need to change focus to another text box before buttons are activated

> ID：14629656
> 
> 赞同：1
> 
> 时间：2013-01-31T15:48:35.903
> 
> 标签：selenium, click

I am entering data into text fields in a browser via "type" command. In order for the `Save` and `Cancel` buttons to be activated (not grayed out), I need to click in another text field to change focus. This works manually, but I can't seem to figure out how to do it programmatically. I have tried click, `clickAt, doubleClick, mouseOver/click/mouseOUt, mouseDown/mouseUp, focus, fireEvent` ... all without luck. Thanks for any suggestions!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T16:25:26.397

跳出输入字段是否启用按钮？如果是这样，也许你可以这样做：

```
WebElement element = driver.findElement(By.id("your_input_field"));
element.sendKeys(Keys.TAB); 
```

# lua - lua 重复/直到似乎使用原始值

> ID：14629658
> 
> 赞同：0
> 
> 时间：2013-01-31T15:48:39.877
> 
> 标签：lua

所以仍在研究将数字转换为中文拼音的程序。完整代码（请原谅我的古怪，我真的很感谢所有对我糟糕编码的帮助）

```
local digitmap = {
   ["0"] = "ying2",
   ["1"] = "yi1",
   ["2"] = "er2",
   ["3"] = "san1",
   ["4"] = "si4",
   ["5"] = "wu3",
   ["6"] = "liu4",
   ["7"] = "qi1",
   ["8"] = "ba1",
   ["9"] = "jiu3",
}

print("Enter a number to be converted (up to 10 digits long):")

while true do
    number = tonumber(io.read("*line"))
    nlength = #(tostring(number))
    if number ~= nil and nlength <= 10 then
        break
    end
    print("Invalid input or too long. Please try again:")
end

if number == 0 then
fconvnumber = "ying2"
zero = true
end

local cwords = {}
for c in string.gmatch(number, "%d") do
cwords[#cwords + 1] = digitmap[c]
end

if nlength == 2 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
elseif nlength == 3 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
elseif nlength == 4 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
elseif nlength == 5 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
elseif nlength == 6 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
elseif nlength == 7 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
    cwords[nlength - 6] = cwords[nlength - 6] .. " bai3 "
elseif nlength == 8 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
    cwords[nlength - 6] = cwords[nlength - 6] .. " bai3 "
    cwords[nlength - 7] = cwords[nlength - 7] .. " qian1 "
elseif nlength == 9 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
    cwords[nlength - 6] = cwords[nlength - 6] .. " bai3 "
    cwords[nlength - 7] = cwords[nlength - 7] .. " qian1 "
    cwords[nlength - 8] = cwords[nlength - 8] .. " yi4 "
elseif nlength == 10 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
    cwords[nlength - 6] = cwords[nlength - 6] .. " bai3 "
    cwords[nlength - 7] = cwords[nlength - 7] .. " qian1 "
    cwords[nlength - 8] = cwords[nlength - 8] .. " yi4 "
    cwords[nlength - 9] = cwords[nlength - 9] .. " shi2 "
end

while cwords[nlength] == "ying2" and zero ~= true do
    cwords[nlength] = nil
    nlength = nlength - 1
end

fconvnumber = table.concat(cwords)

fconvnumber = string.gsub(fconvnumber, "ying2 %a+%d", "ying2")
for i=1,nlength do
    fconvnumber = string.gsub(fconvnumber, "ying2 ying2", "ying2")
end
fconvnumber = string.gsub(fconvnumber, "yi1 shi2", "shi2")

print(fconvnumber) 
```

因此，例如，如果我输入 100，nlength 为 3，cwords[nlength] == "ying2"，它会删除最后一个数组。但它不会再次循环并删除十位 0。我知道我一定是以某种方式错过了逻辑，但我只是看不到它。直到使用 nlength 的早期值吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:07:55.060

由于您没有提供完整的代码，因此很难说，但我怀疑您没有`cwords`正确填充，因为我在您发布的代码中没有看到问题。这对我有用：

```
cwords = {1, "ying2", "ying2"}
nlength = #cwords
print("started with", #cwords)
repeat
if cwords[nlength] == "ying2" then
    cwords[nlength] = nil
    nlength = nlength - 1
end
until cwords[nlength] ~= "ying2"
print("ended with", #cwords) 
```

您可能希望将其更改为`while`循环，因为逻辑更简单：

```
while nlength > 0 and cwords[nlength] == "ying2" do
    cwords[nlength] = nil
    nlength = nlength - 1
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:36:40.233

逻辑没有错。要么`cwords`或未`nlength`正确初始化。

不过，代码有点不稳定。您每个循环都进行两次相同的测试，这应该是[一个危险信号](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

你可以这样做：

```
while cwords[nlength] == "ying2" do
    cwords[nlength] = nil
    nlength = nlength - 1
end 
```

或者像这样：

```
while cwords[#cwords] == "ying2" do
    table.remove(cwords)
end 
```

但最有效的方法是在转换为拼音*之前从源数字中去除尾随零：*

```
while number % 10 == 0 do
    number = number / 10
end 
```

或者：

```
strnumber = strnumber:match('(.-)0*$') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T09:45:50.477

编辑：看到最后，我帮你解决你的实际问题......

关于更新代码的一些事情：

**1）您在数字上使用 gmatch，而不是字符串。**

它只是因为强制而起作用，这不是一个好主意。您可以通过使用 OO 风格的调用来确保：

```
for c in number:gmatch("%d") do 
```

它将因此错误而中断：

```
attempt to index global 'number' (a number value) 
```

您应该保留数字的字符串版本，如下所示：

```
while true do
    number = tonumber(io.read("*line"))
    str_number = tostring(number)
    nlength = #str_number
    if number ~= nil and nlength <= 10 then
        break
    end
    print("Invalid input or too long. Please try again:")
end

if number == 0 then
    fconvnumber = "ying2"
    zero = true
end

local cwords = {}
for c in str_number:gmatch("%d") do
    cwords[#cwords + 1] = digitmap[c]
end 
```

**2）这部分非常重复：**

```
if nlength == 2 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
elseif nlength == 3 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
elseif nlength == 4 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
elseif nlength == 5 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
elseif nlength == 6 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
elseif nlength == 7 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
    cwords[nlength - 6] = cwords[nlength - 6] .. " bai3 "
elseif nlength == 8 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
    cwords[nlength - 6] = cwords[nlength - 6] .. " bai3 "
    cwords[nlength - 7] = cwords[nlength - 7] .. " qian1 "
elseif nlength == 9 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
    cwords[nlength - 6] = cwords[nlength - 6] .. " bai3 "
    cwords[nlength - 7] = cwords[nlength - 7] .. " qian1 "
    cwords[nlength - 8] = cwords[nlength - 8] .. " yi4 "
elseif nlength == 10 then
    cwords[nlength - 1] = cwords[nlength - 1] .. " shi2 "
    cwords[nlength - 2] = cwords[nlength - 2] .. " bai3 "
    cwords[nlength - 3] = cwords[nlength - 3] .. " qian1 "
    cwords[nlength - 4] = cwords[nlength - 4] .. " wan2 "
    cwords[nlength - 5] = cwords[nlength - 5] .. " shi2 "
    cwords[nlength - 6] = cwords[nlength - 6] .. " bai3 "
    cwords[nlength - 7] = cwords[nlength - 7] .. " qian1 "
    cwords[nlength - 8] = cwords[nlength - 8] .. " yi4 "
    cwords[nlength - 9] = cwords[nlength - 9] .. " shi2 "
end 
```

您可以通过以下方式替换整个块：

```
local suffixes = {"shi2","bai3","qian1","wan2","shi2","bai3","qian1","yi4","shi2"}
for i=1,nlength-1 do
    cwords[nlength - i] = string.format("%s %s ", cwords[nlength - i], suffixes[i])
end 
```

**3）这是没用的：**

```
if number == 0 then
    fconvnumber = "ying2"
    zero = true
end 
```

您设置了 fconvnumber 但您稍后将在此行重新设置它：

```
fconvnumber = table.concat(cwords) 
```

稍后在 while 循环中只使用一次零测试：

```
while cwords[nlength] == "ying2" and zero ~= true do
    cwords[nlength] = nil
    nlength = nlength - 1
end 
```

此外，您在每次迭代时都在重复测试。您可以删除第一个块并编写：

```
if number ~= 0 then
    while cwords[nlength] == "ying2" do
        cwords[nlength] = nil
        nlength = nlength - 1
    end
end 
```

最终您的重构代码如下所示：

```
local digitmap = {
    ["0"] = "ying2",
    ["1"] = "yi1",
    ["2"] = "er2",
    ["3"] = "san1",
    ["4"] = "si4",
    ["5"] = "wu3",
    ["6"] = "liu4",
    ["7"] = "qi1",
    ["8"] = "ba1",
    ["9"] = "jiu3",
}

print("Enter a number to be converted (up to 10 digits long):")

while true do
    number = tonumber(io.read("*line"))
    str_number = tostring(number)
    nlength = #str_number
    if number ~= nil and nlength <= 10 then
        break
    end
    print("Invalid input or too long. Please try again:")
end

local cwords = {}
for c in str_number:gmatch("%d") do
    cwords[#cwords + 1] = digitmap[c]
end

local suffixes = {"shi2","bai3","qian1","wan2","shi2","bai3","qian1","yi4","shi2"}
for i=1,nlength-1 do
    cwords[nlength - i] = string.format("%s %s ", cwords[nlength - i], suffixes[i])
end

if number ~= 0 then
    while cwords[nlength] == "ying2" do
        cwords[nlength] = nil
        nlength = nlength - 1
    end
end

fconvnumber = table.concat(cwords)

fconvnumber = string.gsub(fconvnumber, "ying2 %a+%d", "ying2")
for i=1,nlength do
    fconvnumber = string.gsub(fconvnumber, "ying2 ying2", "ying2")
end
fconvnumber = string.gsub(fconvnumber, "yi1 shi2", "shi2")

print(fconvnumber) 
```

可能还有一些可以改进的地方，但这已经更简单了:)

**所以现在让我们解决真正的问题！**

你说：

> 因此，例如，如果我输入 100，nlength 为 3，cwords[nlength] == "ying2"，它会删除最后一个数组。但它不会再次循环并删除十位 0。我知道我一定是以某种方式错过了逻辑，但我只是看不到它。

那是因为第一次迭代后数组的最后一个元素不是“ying2”，而是“ying2 shi2”！想想看，你之前已经串联了“shi2”。

现在的问题是：您期望的结果是“yi1 bai3”还是“yi1”？

如果它是“yi1”，只需在连接之前消除零。如果是“yi1 bai3”，请执行以下操作：

```
local suffixes = {"shi2","bai3","qian1","wan2","shi2","bai3","qian1","yi4","shi2"}
cwords[nlength] = {cwords[nlength]}
for i=1,nlength-1 do
    cwords[nlength - i] = {cwords[nlength - i],string.format(" %s ",suffixes[i])}
end

if number ~= 0 then
    while cwords[nlength][1] == "ying2" do
        cwords[nlength] = nil
        nlength = nlength - 1
    end
end

for i=1,nlength do
    cwords[i] = table.concat(cwords[i])
end

fconvnumber = table.concat(cwords) 
```

# c# - Any difference between QueryAsyc and querying the table using lambda?

> ID：14629660
> 
> 赞同：3
> 
> 时间：2013-01-31T15:48:41.263
> 
> 标签：c#, sqlite, windows-8, lambda

I'm using SQLite in a Windows 8 application I'm running and was wondering if there was any sort of performance issue between using the following two lines of code:

```
conn.Table<Chemistry>().Where(ch => ch.case_id == CaseId).ToListAsync(); 
```

vs

```
conn.QueryAsync<Chemistry>("SELECT * FROM Chemistry WHERE Case_Id = ?", CaseId); 
```

They both work and I prefer to use the lambda expression as opposed to the string query. Just wondering if there are any repercussions when doing this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:10:41.957

见[这里](https://stackoverflow.com/questions/214500/which-linq-syntax-do-you-prefer-fluent-or-query-expression)和[这里](http://www.codeproject.com/Questions/389136/Difference-between-LINQ-and-Lambda-Expression-inte)。要点是，假设等效语句，它们产生相同的 IL，因此性能相同。有一些东西在查询表单中更容易表达。

# javascript - Cross-browser getClassName JavaScript function

> ID：14629665
> 
> 赞同：0
> 
> 时间：2013-01-31T15:48:52.233
> 
> 标签：javascript

I'm working on a small project that needs to get all elements by className, there is obviously the HTML5 .getElementsByClassName, but I'm trying to create a little function that provides a small polyfill for it, it's just not working. any help much appreciated. Or if there is an easier way of doing this.

```
function getClassName(element) {
if(!document.getElementsByClassName(element)) {
    var retnode = [];
    var myclass = new RegExp('\\b'+element+'\\b');
    var elem = this.getElementsByTagName('*');
    for (var i = 0; i < elem.length; i++) {
        var classes = elem[i].className;
        if (myclass.test(classes)) retnode.push(elem[i]);
    }
    return retnode;
} else {
    document.getElementsByClassName(element);
}
} 
```

Then calling it like so:

```
document.getClassName('active'){
active.className += 'new';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:11:28.133

你的功能是错误的。

*   这个名字意味着你得到的是一个类名，而不是一个元素。
*   `element`当您的意思是 className 时，您使用该变量
*   检查支持是错误的

    *   `if(!document.getElementsByClassName) {`
*   else 中缺少返回
    *   `return document.getElementsByClassName(element);`

我会推荐 sse 从[这里](https://gist.github.com/2299607)或[这里](http://robertnyman.com/2008/05/27/the-ultimate-getelementsbyclassname-anno-2008/)添加 polyfill

为自己获取一个 addClass 方法......类似于

```
function hasClass(elem,className) {
    return elem.className.match(new RegExp('(\\s|^)'+className+'(\\s|$)'));
}

function addClass(elem,className) {
    if (!hasClass(elem,cls)) elem.className += " "+className;
} 
```

比你会做的

```
var elems = document.getClassName('active');
for (var i=elems.length-1; i>=0; i--) {
    addClass(elems[i],"active");
} 
```

# sql - 添加 SELECT 语句输出中不存在的值

> ID：14629666
> 
> 赞同：0
> 
> 时间：2013-01-31T15:48:58.227
> 
> 标签：sql, plsql, oracle10g

由于我缺乏经验，我不知道如何问这个问题，所以请多多包涵。

我正在使用一个`SELECT`语句来提取待处理的申请（即没有完成的日期）并`count`计算他们的总数（加上其他一些计数）。我需要收集某些项目类型，其中 8 个，其中只有 4 个目前有待处理的申请。我仍然需要在计数列中显示其他项目类型为 0。如果我尝试与将提取所有数据的查询联合起来，无论是否挂起，对于当前挂起的应用程序的 4 种项目类型，我都会得到重复的行（减去计数列）。如果我离开连接到项目类型表，我会得到一个空行。也不是我想要的。有没有人有什么建议？

联合输出：

```
General Construction       0    0       90    0
General Coverage           0    0       90    0
General Coverage           1    740     90    90
General Renewal            0    0       90    0
Individual Construction    0    0       90    0
Individual Coverage        0    0       180   0
Individual Renewal         0    0       90    0
Individual Renewal         2    1027    90    180
Approval                   0    0       90    0
Approval                   22   565     90    1980
Other - Renewal            0    0       90    0
Other - Renewal            21   1119    90    1890 
```

没有必要的“0”行的输出：

```
General Coverage           1    740     90    90
Individual Renewal         2    1027    90    180
Other - Renewal            21   1119    90    1890
Approval                   22   566     90    1980 
```

我想看到的输出是：

```
 General Construction        0   0    90    0
    General Coverage            1   740  90    90
    General Renewal             0   0    90    0
    Individual Construction     0   0    90    0
    Individual Coverage         0   0    180   0
    Individual Renewal          2   1027 90    180
    Approval                    22  565  90    1980
    Other - Renewal             21  1119 90    1890 
```

请让我知道我还能提供什么来帮助您帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:54:10.120

您不提供列名或类似名称。

您需要的是一个包含所有有效值的驱动程序表。然后，您可以使用`left outer join`来获取所需的结果集：

```
select driver.val, coalesce(q.col2, 0), coalesce(q.col3, 0), coalesce(q.col4, 0)
from (select 'General Construction' as val from dual union all
      select 'General Coverage'  as val from dual union all
      select 'General Renewal'  as val from dual union all
      select 'Individual Construction' as val from dual union all
      select 'Individual Coverage'  as val from dual union all
      select 'Individual Renewal' as val from dual union all
      select 'Approval' as val from dual union all
      select 'Other - Renewal' as val from dual
     ) driver left outer join
     (query without 0 rows) q
     on driver.val = q.col1 
```

如果 NULL 可以代替 0，则`coalesce()`不需要 。

# freebase - 将 Freebase 完整转储文件加载到 Virtuoso

> ID：14629667
> 
> 赞同：4
> 
> 时间：2013-01-31T15:49:01.050
> 
> 标签：freebase, virtuoso

我已经从这个链接[http://download.freebaseapps.com/下载了完整的 RDF Freebase 转储文件 'freebase-rdf-2012-12-09-00-00.gz'(7.5GB)](http://download.freebaseapps.com/)

此数据转储使用此处定义的 Turtle RDF 语法[http://wiki.freebase.com/wiki/Data_dumps](http://wiki.freebase.com/wiki/Data_dumps)

如何将此文件加载到 Virtuoso (06.04.3132) 中？

我尝试使用此命令

```
 SQL> DB.DBA.TTLP_MT (file_to_string_output ('freebase-rdf-2012-12-09-00-00.gz'), '', 'http://freebase.com'); 
```

但它在短时间内完成。以下请求仅从源文件返回 2 行（三重），日志中没有异常。

```
 SELECT ?a ?b ?c from  <http://freebase.com> where {?a ?b ?c}

http://rdf.freebase.com/ns/american_football.football_historical_roster_position.number   
   http://rdf.freebase.com/ns/type.object.name  Number

  http://rdf.freebase.com/ns/american_football.football_historical_roster_position.number 
            http://rdf.freebase.com/ns/type.object.type  http://rdf.freebase.com/ns/type.property.

     2 Rows. -- 78 msec. 
```

顺便问一下，加载这么大的文件（8 GB RAM 或 24 GB RAM）需要多长时间？

这个转储文件是否可以不加修改地加载到 TDB（通过 tdbloader）、Sesame OpenRDF（通过加载）或 OWLIM SE 存储库中？
毕竟在合理的时间加载后，我会从我的 SELECT SPARQL 查询（不是很复杂）中得到响应吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:10:21.280

我收到了来自 [freebase-discuss] 邮件列表的回复：

这个 Freebase 转储应该被解压、拆分并通过修复脚本运行。更多细节在这里

```
 http://people.apache.org/~andy/Freebase20121223 
```

# java - IntelliJ 不刷新文件

> ID：14629669
> 
> 赞同：1
> 
> 时间：2013-01-31T15:49:16.903
> 
> 标签：java, intellij-idea

我有一个基于 Spring Maven 的项目，它运行良好。我刚刚通过直接右键单击 > 更新更新了我的 svn。现在我的文件夹中有新文件，但在 intelliJ IDE 中它仍然显示旧文件。

如何在 intelliJ 中刷新我的项目，以便它拥有文件夹中的最新文件。

我正在使用 IntelliJ 12 终极版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:51:26.243

您可以从项目窗口执行同步，但您不需要这样做。我会检查旧副本与您期望的位置不同。尝试使用项目窗口中的 (><) 按钮来查看它们的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:19:15.780

确保所有文件都是本地文件并且没有符号链接。如果您使用远程文件系统或符号链接，删除`bin/fsnotifier`二进制文件会有所帮助。无论如何，这是一个[应该报告](http://youtrack.jetbrains.net/issues/IDEA)的错误。

# windows-8 - 1.90 GHz，Turbo Boost 高达 3 GHz - 足以运行虚拟机

> ID：14629677
> 
> 赞同：0
> 
> 时间：2013-01-31T15:49:49.787
> 
> 标签：windows-8, virtualization, virtual-machine, hyper-v

[http://www.sony.co.uk/product/vn-duo/svd1121z9e](http://www.sony.co.uk/product/vn-duo/svd1121z9e)

我将把上面的笔记本电脑作为台式机的替代品，但我想知道它是否是一个足够好的处理器来使用windwos8通过hyper-v运行VM。

不确定高达 3 GHz 的 Turbo Boost 意味着什么，

收到任何意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:04:33.867

这是桌面更换的一个奇怪的选择，因为它不是设计的。

您首先想知道的是，它是 U 系列 CPU，这意味着它的功耗要低得多。这是有代价的，较低的基本 CPU 频率。是的，它可以运行到 3.0 GHz，但同样，更好的性能会消耗能源。

由于它为您提供 6.5 小时的电池续航时间，因此当您将 Turbo Boost 提升到 3.0 GHz 时，实际电池续航时间会大大降低。

对于您的另一个问题，什么是涡轮增压？Turbo Boost 是一种在需要时提高 CPU 性能的技术。就像智能电源控制一样，可以在需要时为您的 CPU 提供动力。

回到虚拟化。它有两个核心，我建议至少为虚拟机使用两个核心，这样您的系统就没有多余的核心，这是一个非常糟糕的主意。此外，对于内存需求更大的虚拟机，8 GB 内存可能还不够。

对于台式机的替代品，我会推荐四核笔记本电脑，特别是如果您需要运行对性能要求更高的虚拟机。

差点忘了一件大事，11" 的屏幕尺寸真的很小，尽管分辨率很高，但随着时间的推移，您的眼睛可能会发酸。我喜欢在功能更弱的 21" 台式机上编程，而不是 15" 笔记本电脑的更大屏幕。除非您要将它与外部显示器配对，否则我建议您考虑至少 13 英寸型号。

# python - python在给定索引的列表中查找项目

> ID：14629678
> 
> 赞同：3
> 
> 时间：2013-01-31T15:49:50.270
> 
> 标签：python, list

有没有其他更快的方法可以在索引位置找到项目。

```
items = ['aaa','sss','ddd','fff','gggg','hhhh']
indices = [1,3,4]

My way: 
[items[i] for i in indices] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T15:51:49.203

如果您一遍又一遍地使用相同的索引，您可能会做得更好`operator.itemgetter`：

```
getter = itemgetter(1,3,4)
desired = getter(items) 
```

根据我的简单基准，`itemgetter`大约快 2.5 倍（但我没有计算实际构造`getter`函数开始所需的时间）。

```
>>> items = ['aaa','sss','ddd','fff','gggg','hhhh']
>>> indices = [1,3,4]
>>> from operator import itemgetter
>>> import timeit
>>> getter = itemgetter(*indices)
>>> def list_comp(items=items,indices=indices):
...     return [items[i] for i in indices]
... 
>>> timeit.timeit('getter(items)','from __main__ import getter,items')
0.2926821708679199
>>> timeit.timeit('list_comp()','from __main__ import list_comp')
0.7736802101135254
>>> getter(items)
('sss', 'fff', 'gggg')
>>> list_comp()
['sss', 'fff', 'gggg'] 
```

# java - Android从eclipse安装应用程序不起作用

> ID：14629681
> 
> 赞同：0
> 
> 时间：2013-01-31T15:50:05.370
> 
> 标签：java, android, eclipse, installation, apk

从现在开始我一直使用模拟器，因为我没有测试设备。但是现在我有了一部手机（htc wildfire s），我已经启用了 USB 调试并从 sdk 管理器安装了 google usb 驱动程序。我已经阅读过，当您将 Eclipse 作为 Android 应用程序运行时，如果它连接到 USB，它应该会自动安装在手机上。当我将它作为 android 应用程序运行时，它仍然运行模拟器并且手机上没有安装任何新内容。

手机版本目前是：2.3.3 (API 10)

和应用：

```
android:minSdkVersion="8"
        android:targetSdkVersion="17" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:55:03.923

以下是解决此问题的方法：

1-从包资源管理器视图中右键单击您的项目。

2-在列表中有一个选项调试为。

3-调试为...调试配置。

4- 从窗口的提升部分选择 Android 应用程序。

5-在右侧有多个选项卡，选择目标。

6-在开发目标选择模式中..选择始终提示选择设备。

然后再次调试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:58:49.533

我以前也遇到过类似的问题。我用的是三星手机。当我安装 samsung Kies 时，eclipse（或我的电脑）识别出手机。

尝试在您的开发机器上安装 HTC Sync。 [http://www.htc.com/help/in/howto_iframe.aspx?id=109074&type=1&p_id=423](http://www.htc.com/help/in/howto_iframe.aspx?id=109074&type=1&p_id=423)

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:56:07.910

在 Eclipse 中，进入 Window>Show View>More 并选择 Devices。如果您的设备未显示，并且您确实在设备上启用了 USB 调试，则驱动程序未安装。在线检查您的手机型号并下载所需的驱动程序。

# r - 服务器上的 ff 包... read.table.ffdf“无法更改工作目录”

> ID：14629686
> 
> 赞同：7
> 
> 时间：2013-01-31T15:50:16.450
> 
> 标签：r, bigdata

这可能很简单，但我搜索了很多，但找不到解决方法。

我在服务器上使用 Rstudio 2.15.1，因为我们使用大数据集并且服务器有更多的内存来处理它。我想加载一个csv文件

```
x <- read.csv.ffdf(file=file.path(getwd(),"test.csv")) 
```

从“ff”包和电脑中它工作正常，但在服务器中我收到消息

> setwd(dfile) 中的错误：无法更改工作目录

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T16:49:34.537

我认为这与 ff 存储 ff 文件的位置有关。它将这些文件存储在 getOption("fftempdir") 中。您有权访问该目录吗？也许您在服务器上的权限不允许您访问该文件夹？在这种情况下，将 options(fftempdir = "path/to/your/folder") 设置为您有权访问的文件夹。

# c - C 宏：明显无用宏的优点/意图

> ID：14629693
> 
> 赞同：21
> 
> 时间：2013-01-31T15:50:26.833
> 
> 标签：c, macros

我有一些 C 编程经验，但我不敢称自己精通。最近，我遇到了以下宏：

```
#define CONST(x) (x) 
```

我发现它通常用于表达式中，例如：

```
double x, y;
x = CONST(2.0)*y; 
```

完全被这个宏的观点迷惑了，我广泛研究了宏的优点/缺点和属性，但我仍然无法弄清楚这个特定宏的用途是什么。我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T15:54:32.600

如问题中所述，宏什么都不做是对的。

这看起来像是编写该代码的人强加的某种人工结构，也许是为了清楚地说明常量在哪里，并能够搜索它们？我可以看到具有可搜索常量的优势，但这不是实现该目标的最佳方式。

这也有可能是其他一些宏方案的一部分，这些宏方案要么从未实现，要么仅被部分删除。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T16:18:42.587

一些（旧的）C 编译器不支持该`const`关键字，这个宏很可能是对处理不同编译器的更复杂的宏序列的回忆。尽管像 in 一样使用`x = CONST(2.0)*y;`是没有意义的。

您可以[从 Autoconf 文档中查看此部分以](http://www.gnu.org/software/autoconf/manual/autoconf-2.67/html_node/C-Compiler.html#index-AC_005fC_005fCONST-876)获取更多详细信息。

编辑：这个宏的另一个目的可能是自定义预处理（例如用于提取和/或替换某些常量），就像 Qt 框架的[元对象编译器](http://qt-project.org/doc/qt-4.8/moc.html)一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T15:54:11.853

该宏绝对没有任何好处，编写它的人一定会感到困惑。代码完全等同于`x = 2.0*y;`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T16:05:10.197

当需要解决宏扩展时，这种宏实际上可能很有用。
这种需求的一个典型例子是字符串化宏。请参阅以下问题以获取示例：[C Preprocessor, Stringify the result of a macro](https://stackoverflow.com/questions/3419332/c-preprocessor-stringify-the-result-of-a-macro)

现在，在您的特定情况下，我看不到极端文档或代码解析目的带来的好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T16:06:03.480

另一种用途可能是将这些值保留为将来的函数调用，如下所示：

```
 /* #define CONST(x) (x) */
 #define CONST(x) some_function(x)

 // ...

 double x, y;
 x = CONST(2.0)*y; // x = some_function(2.0)*y; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T20:14:18.410

这个宏的另一个好处是这样的

```
result=CONST(number+number)*2; 
```

或与比较有关的东西

```
result=CONST(number>0)*2; 
```

如果这个宏有问题，可能是名字。这个“CONST”事物与常量无关，而是与其他事物有关。查找其余代码以了解作者为何将其称为 CONST 会很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T19:08:32.097

该宏确实具有在宏扩展期间将括号括在 x 周围的效果。

我猜有人试图允许一些类似的东西

```
CONST(3+2)*y 
```

如果没有括号，它将变成

```
3+2*y 
```

但随着括号变成

```
(3+2)*y 
```

我似乎记得我们在以前的开发生命周期中需要这样的东西。

# java - Spring-cglib 代理类层次结构中的行为

> ID：14629697
> 
> 赞同：0
> 
> 时间：2013-01-31T15:50:37.387
> 
> 标签：java, spring, spring-mvc, proxy, cglib

我有 2 节课

```
 @Component
    @Scope(proxyMode=ScopedProxyMode.TARGET_CLASS,value="session")
    public class Child extends Base{
    }

    @Component
    @Scope(proxyMode=ScopedProxyMode.TARGET_CLASS,value="session")
    public class Base{
    private UserVO user;

    public UserVO getUser(){
    return user;
    }
    public void setUser(UserVO usr){
    this.user = usr;
    }
    }

    I call the following method
  public class SomeClass{
  @autowired
  private Child child;
    public void someMethod(){
    child.setUser(new UserVO());
    System.out.println(child.getUser());
    }
 } 
```

上面的 system.out 打印 null。我哪里出错了。请帮忙。这是 cglib 的工作方式吗？如果是这样，解决方法是什么谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:29:56.957

（非常）有可能你得到空值，因为你在调用 someMethod 时没有 HttpSession。

这是 aop-scoped-proxy 的预期行为。请注意，aop-scoped-proxy 实际上是一个单例，它尝试 **在每个方法调用中**从配置的范围中检索目标对象，或者如果没有找到则创建一个新的对象。

因此，如果 HttpSession 不存在，aop-scoped-proxy 会将所有调用重定向到新创建的对象。

IE：

```
aopScopedProxy.setUser -- > new User().setUser()
aopScopedProxy.getUser ---> new User().getUser() 
```

这似乎是你的问题。

# c# - 如何读取 XML 标记内的 HTML？

> ID：14629700
> 
> 赞同：0
> 
> 时间：2013-01-31T15:50:44.697
> 
> 标签：c#, html, .net, xml, xmldocument

我有一个 XML 会在某些时候返回：

```
<TESTO>
    <img src="../path/image.jpg" alt="" />
</TESTO> 
```

好吧，如果我这样做：

```
string TESTO = m_oNode.SelectSingleNode("TESTO").InnerText; 
```

TESTO 将是“空的”。为什么？如何阅读全文？使用其他没有 HTML 标签的标签，一切都很好......

我用`XmlDocument`

# 编辑 - 使用 InnerXml() 创建异常的代码：

```
<TESTO>
    <table style="width: 100%;" border="0" cellspacing="0" cellpadding="0">
    <tbody>
    <tr>
    <td>&nbsp;</td>
    <td width="700"><a href="http://www.my.it/"><img src="/testata.jpg" alt="mycaf.it" width="700" height="333" border="0" /></a></td>
    <td>&nbsp;</td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td style="text-align: center; background-color: #f5f5f5;" align="center" bgcolor="#f5f5f5"><br />
    <p style="color: #ee2e24; font-style: italic; font-size: 25px; font-family: Arial;">portale<br /> </p>
    </td>
    <td>&nbsp;</td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    </tr>
    </tbody>
    </table>
</TESTO> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:54:28.683

`InnerText`仅获取文本（用于混合内容或文本内容）。改为使用`InnerXml`。

例子：

```
<A>
    Some text in mixed content
    <B>OnlyText</B>
</A 
```

给出结果：

*   `InnerText = "Some text in mixed content\r\nOnlyText"`
*   `InnerXml = "Some text in mixed content\r\n<B>OnlyText</B>";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:59:26.060

要读取 html 元素的内容，您必须使用 yourElement.innerXml 而不是 yourElement.InnerText

Per leggere il contenuto di un elemento html devi usare yourElement.innerXml al posto di yourElement.InnerText :)

# mongodb - Mongo dbref 附加字段在 mongoshell 中是不可见的。如何显示它们？

> ID：14629701
> 
> 赞同：1
> 
> 时间：2013-01-31T15:50:44.977
> 
> 标签：mongodb, doctrine, hidden, invisible, dbref

背景：这个问题是由 Doctrine ODM 提出的，它在 DBRefs 中使用了一个 _doctrine_class_name 字段，该字段在 Mongo shell (2.2.2) 中是不可见的，并且当我们不得不手动更新记录时造成了相当大的罪魁祸首。

例子：

```
mongoshell> use testdb; // for safety
mongoshell> a = DBRef("layout_block", ObjectId("510a71fde1dc610965000005")); // create a dbref
mongoshell> a.hiddenfield = "whatever" // add a field that's normally not there like Doctrine does
mongoshell> a // view it's contents, you won't see hiddenfield
mongoshell> for (k in a) { var val = a[k]; print( k + "(" + typeof(val) + "): " + val ); } // you can see that there's more if you iterate through it
mongoshell> db.testcoll.save({ref: [ a ]}) // you can have it in a collection
mongoshell> db.testcoll.findOne(); // and normally you won't see it 
```

如果没有像下面的第三个命令（或 MongoVue）这样的迭代，如果您只使用 find()，您将永远不会知道 DBRef 中还有更多内容。我还没有为 find() 找到任何可用的修饰符（尝试过：toArray、tojson、printjson、toString、hex、base64、pretty、chatty、verbose ......）。

有没有人有办法在 mongo shell 中详细显示 DBRef 内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:27:24.907

Mongo shell 是[Mozilla SpiderMonkey](https://developer.mozilla.org/en-US/docs/SpiderMonkey) (1.7?) 的扩展，具有相当简单的功能。

[MongoDB blog post on the shell](http://blog.mongodb.org/post/27406586932/mongo-the-mongodb-shell)的建议是在你的主目录中定义以下`inspect`函数`.mongorc.js`

```
function inspect(o, i) {
    if (typeof i == "undefined") {
        i = "";
    }
    if (i.length > 50) {
        return "[MAX ITERATIONS]";
    }
    var r = [];
    for (var p in o) {
        var t = typeof o[p];
        r.push(i + "\"" + p + "\" (" + t + ") => " + 
              (t == "object" ? "object:" + inspect(o[p], i + "  ") : o[p] + ""));
    }
    return r.join(i + "\n");
} 
```

此外，您可以将 DBRef.toString 函数重新定义为：

```
DBRef.prototype.toString = function () {
    var r = ['"$ref": ' + tojson(this.$ref), '"$id": ' + tojson(this.$id)];
    var o = this;
    for (var p in o) {
        if (p !== '$ref' && p !== '$id') {
            var t = typeof o[p];
            r.push('"' + p + '" (' + t + ') : ' + 
                (t == 'object' ? 'object: {...}' : o[p] + ''));
        }
    }
    return 'DBRef(' + r.join(', ') + ')';
}; 
```

# winforms - Metro 和 Windows 窗体开发之间的差异

> ID：14629703
> 
> 赞同：1
> 
> 时间：2013-01-31T15:50:58.703
> 
> 标签：winforms, api, winapi, microsoft-metro, windows-runtime

也许是一个毫无意义的问题（是吗？）：可以在 Windows 窗体中转换 Metro 应用程序吗？我应该考虑哪些优点和缺点？

还有：就用于开发的技术/语言而言，这两种方式有什么区别？为 Metro 而不是 Windows Forms 开发更好只是因为我可以在更多的处置中运行我的软件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T16:34:14.603

请注意，以下答案来自 2013 年。由于 Windows 应用商店更名为 Microsoft 应用商店并且 Windows 运行时 (WinRT) 现在被命名为通用 Windows 平台 (UWP) - Windows 应用商店应用程序现在也更常被称为 UWP 应用程序 (UWA) 或只是Windows 应用程序。

* * *

Metro 是一种设计语言。以前称为 Metro 风格的应用程序现在称为 Windows 应用商店应用程序。

1.  Windows 应用商店应用程序使用 Windows 运行时或简称 WinRT 编写，而 Windows 窗体基于 WinAPI。WinRT 更现代，并且有很多改进，尤其是在异步 API 方面，使其更好地适用于新的和即将推出的解决方案——尤其是移动设备、平板电脑等。此外，还包括如何将语言混合在一起等等。

2.  WinRT 应用程序可以使用多种语言和 API 编写 - C#/VB.NET/C++ 与 WinRT-XAML、C++ 与 DirectX 或 HTML+JS+CSS 与 WinJS 以及这些的一些组合。

3.  Windows 应用商店应用程序为您提供了一种通过编写的应用程序赚钱的简单方法。

4.  开箱即用的 Windows 应用商店应用支持 Metro 设计语言（akhem，Microsoft 设计语言），而 Windows 窗体应用看起来已经过时，除非您高度自定义控件或使用第三方组件。

5.  Windows 窗体应用程序是用 .NET 语言编写的，而 Windows 应用商店应用程序可以用 C++ 或 JavaScript 编写。

6.  如果您来自 Windows Forms+C#/VB 世界，那么您很自然的下一步就是学习如何使用 WinRT-XAML+C#/VB，除非您想学习另一种语言。WinRT-XAML 派生自作为 Windows 窗体的继承者创建的 WPF 和 Silverlight。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T07:33:30.817

开发 Windows.Forms 应用程序和 Windows 应用商店应用程序就像在两个不同的世界中进行开发。顺便说一句，我不会将 Windows.Forms 用于桌面应用程序。使用 WPF。它更现代，并且 UI 设计语言 (XAML) 与 Windows 应用商店应用程序中的相同。尽管您可以在 WPF 和 Windows 应用商店应用程序之间交换大部分 UI 代码，但您仍然可以使用不同的库（WPF 中的完整 .NET 和 Windows 应用商店应用程序中的 Windows 运行时）。

Windows 应用商店应用程序既酷又现代。它们在个人电脑、平板电脑和手机上运行。WPF 应用程序只能在 PC 上运行。但 Windows 应用商店应用程序的功能相当有限。许多人认为 WPF 更适合商业应用程序。

因此，这取决于您要开发什么。如果您想构建一个消费者应用程序，Windows Store Apps 可能更适合。如果您构建业务应用程序，WPF 可能是更好的工具。对新手来说可悲的是，他们必须学习两个截然不同的库。

# linux - NTP 客户端 无纪律的本地时钟

> ID：14629704
> 
> 赞同：-1
> 
> 时间：2013-01-31T15:50:59.063
> 
> 标签：linux, vmware, ntp

我们有使用 ntp 客户端同步时间的虚拟机。以下是我的配置。我的问题是我需要`server 127.127.1.0 # local clock`在客户端 ntp.conf 文件中添加一行吗？如果是，那为什么？

```
# Permit time synchronization with our time source, but do not
# permit the source to query or modify the service on this system.
restrict default kod nomodify notrap nopeer noquery
restrict -6 default kod nomodify notrap nopeer noquery
# Permit all access over the loopback interface.
restrict 127.0.0.1
restrict -6 ::1
server ntp1.example.com
server ntp2.example.com
# Undisciplined Local Clock. This is a fake driver intended for backup
# and when no outside source of synchronized time is available.
server  127.127.1.0     # local clock
fudge   127.127.1.0 stratum 10
driftfile /var/lib/ntp/drift 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T20:53:52.680

**NTP 建议**

**注意：** VMware 建议您使用 NTP 而不是 VMware Tools 定期时间同步。NTP 是行业标准，可确保您的客人保持准确的时间。您可能必须打开防火墙 (UDP 123) 以允许 NTP 流量。

这是一个样本`/etc/ntp.conf`

```
tinker panic 0
restrict 127.0.0.1
restrict default kod nomodify notrap
server 0.vmware.pool.ntp.org
server 1.vmware.pool.ntp.org
server 2.vmware.pool.ntp.org
driftfile /var/lib/ntp/drift 
```

这是一个示例（特定于 RedHat）`/etc/ntp/step-tickers`：

```
0.vmware.pool.ntp.org
1.vmware.pool.ntp.org 
```

配置指令 tinker panic 0 指示 NTP 在看到时间大幅跳跃时不要放弃。这对于应对较大的时间漂移​​以及从暂停状态恢复虚拟机非常重要。

**注意：**该指令`tinker panic 0`必须位于`ntp.conf`文件的顶部。

不使用本地时钟作为时间源也很重要，通常称为无纪律本地时钟。当存在大量时间漂移时，NTP 倾向于回退到远程服务器而不是远程服务器。

这种配置的一个例子是：

```
server 127.127.1.0
fudge 127.127.1.0 stratum 10 
```

注释掉这两行。

更改 NTP 配置后，必须重新启动 NTP 守护程序。请参阅您的操作系统供应商的文档。

来源：[VMWare 知识库](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1006427)

# java - GetClassLoader weblogic 错误

> ID：14629705
> 
> 赞同：0
> 
> 时间：2013-01-31T15:51:00.837
> 
> 标签：java

我对 weblogic 12c 有任何问题。

我有一个 java web 应用程序，它与 TomCat 一起运行。

不，我必须在 weblogic 12c 服务器上传输此应用程序。我已经更改了任何文件并部署了应用程序。找到了，但我无法读取 file.jsp。（此文件在 TOMCAT 上正确找到）。

我有这个结构：

文件夹：

```
WebContent
- WEB-INF
  -- jsp
     --- errorIdent.jsp 
```

但是当我使用这个角色时

```
InputStream in = 
    this.getClass().getClassLoader().getResourceAsStream("../jsp/errorIdent.jsp"); 
```

inputStream 对象为空。

为此，我尝试了一些测试用例，只有当我将其放入 WEB-INF/classes 时才找到此文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:54:13.337

`WEB-INF`不在类路径上。

`WEB-INF/classes`是类路径的根。

中的库`WEB-INF/lib`也放在类路径中。

为什么你想要/需要从 Java 中读取 JSP 文件？

# mysql - mysql join/union 0 表示不存在

> ID：14629708
> 
> 赞同：0
> 
> 时间：2013-01-31T15:51:07.920
> 
> 标签：mysql, join, null

我正在尝试提取期权量的报告数据以创建摘要。我的查询目前是这样的：

```
select concat(contract, ',', group_concat(traded), ',', sum(traded))
from 
(
    select contract, put_call, sum(oov+gv+pv) as traded
    from report_data
    where contract <> "AO" and date = '2013-01-30'
    group by contract, put_call
    order by contract asc, put_call asc
) temp
group by contract 
```

它返回：

```
7A,9600,0,9600
BV,100,400,500
WA,0,900,900
WM,500,500
WZ,0,0 
```

最后两行缺少数字的原因是因为当天数据库中只有 WM、WZ 合约的看跌期权。这与 7A 或 WA 不同，后者有看跌和看涨的数据，但没有交易量（因此为零）。

我一直在尝试将表加入或联合到自身，以便在没有合约看跌（或看涨）的地方生成零，但我似乎无法弄清楚。

有什么建议么？

=====================================

更简单：

数据：

```
Contract    Put_call    Traded    OtherData
  A           P           10        blah
  A           C           5         blah
  B           P           10        blah
  B           C           0         blah
  C           P           10        blah 
```

我想要一个查询结果：

```
A, 5, 10, 15
B, 0, 10, 10
C, 0, 10, 10 
```

我的查询目前返回此：

```
A, 5, 10, 15
B, 0, 10, 10
C, 10, 10 
```

C 合约调用缺少零，因为根本没有数据，而不是交易的数据为零。

请让我知道这是否有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:40:21.740

这是一个典型的问题，您试图获得聚合结果，即使没有特定聚合的行。

解决方案是创建一个包含所有组合的驱动程序表，然后将其余的连接到此。

在这种情况下，创建驱动程序表相当容易，因此查询如下所示：

```
select concat(contract, ',', group_concat(coalesce(traded, 0)), ',', coalesce(sum(traded), 0))
from (select distinct contract, 'P' as put_call from report_data union all
      select distinct contract, 'C' as put_call from report_data
     ) driver left outer join
     (select contract, put_call, sum(oov+gv+pv) as traded
      from report_data
      where contract <> "AO" and date = '2013-01-30'
      group by contract, put_call
     ) temp
     on driver.contract = temp.contract and driver.put_call = temp.put_call
group by contract 
```

首先说明：我没有运行这个，所以可能有语法错误。

第二个注意事项：我`coalesce()`在外部`select`语句中使用以防止 NULL 值引起问题。

# python - python：从模块到模块设置属性

> ID：14629710
> 
> 赞同：0
> 
> 时间：2013-01-31T15:51:09.877
> 
> 标签：python, oop, class, module

我正在自学python，但在我正在从事的一个简单游戏项目中遇到了障碍。

我想将玩家统计数据保存在与游戏引擎运行的房间不同的模块中。问题是当我尝试`Player`从不同的模块设置属性时，它不会保存新属性并实例化原始属性。

这是模块中的`Player`类`entities`

```
class Player(object):

    def __init__(self):

        self.name = ' '
        self.hp = 0
        self.current_hp = 0
        self.strength = 0
        self.dexterity = 0
        self.constitution = 0 
```

这就是我如何尝试操作和测试`rooms`模块中的属性

```
class CharacterCreation(Scene):
    def enter(self):
        character = entities.Player()
        character.hp = 10
        print character.hp
        return 'barracks'

class Barracks(Scene):
    def enter(self):
        character = entities.Player()
        print character.hp
        return 'shop' 
```

当我用我的其余代码对此进行测试时，这就是我得到的。

```
-------------------------------------------------------------------------------

10
-------------------------------------------------------------------------------

0
------------------------------------------------------------------------------- 
```

那么我在这里错过了什么？我以为我可以使用设置该属性，`=`但似乎我弄错了？我第一次这样做时，它起作用了，但是我如何让 python 将新值设置`hp`为 10？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:57:43.713

您正在每个场景中创建一个新的 Player 对象，更改其属性，然后*将其丢弃*。

您应该明确地将一个玩家传递到每个场景中：

```
def enter(self, player):
   ... do something with player ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:56:45.007

看起来您正在为`Player`每个方法创建一个新实例`enter`......

如果你打算在游戏中只有一个玩家，你可以把它作为一个全局变量（通常不是很好的主意）或者更好，作为一个单例类： [http ://blog.amir.rachum.com/发布/21850841339/在 python 中实现单例模式](http://blog.amir.rachum.com/post/21850841339/implementing-the-singleton-pattern-in-python)

我对代码做了一些调整。它添加了`PlayerPool`类（实际上更像是一个缓存）。它可能会给你一些想法:)

```
#!/usr/bin/env python
#http://stackoverflow.com/questions/14629710/python-setting-attributes-from-module-to-module/14629838#14629838

class Player(object):
    def __init__(self):
        self.name = ' '
        self.hp = 0
        self.current_hp = 0
        self.strength = 0
        self.dexterity = 0
        self.constitution = 0

class PlayerPool(object):
    _players = dict()

    @classmethod
    def getPlayerByName(cls, name):
        if not name in cls._players:
            newPlayer = Player()
            newPlayer.name = name
            cls._players[newPlayer.name] = newPlayer
        return cls._players[name]

class Scene(object):
    pass

class CharacterCreation(Scene):
    def enter(self):
        character = PlayerPool.getPlayerByName("foobar-hero")
        character.hp = 10
        print "%s has %s points of hp" % (character.name, character.hp)
        return 'barracks'

class Barracks(Scene):
    def enter(self):
        character = PlayerPool.getPlayerByName("foobar-hero")
        print "%s has %s points of hp" % (character.name, character.hp)
        return 'shop'

if __name__ == "__main__":
    step1 = CharacterCreation()
    if step1.enter() == "barracks":
        step2 = Barracks()
        step2.enter() 
```

输出：

```
borrajax@borrajax-comp:~/Tests/Python/Stack Overflow$ python ./players.py 
foobar-hero has 10 points of hp
foobar-hero has 10 points of hp 
```

欢迎来到蟒蛇。我相信您会发现它具有非常酷的功能...例如返回函数的能力，或将函数作为参数传递，检查任何模块中定义的类...看起来您会发现有用的东西。

# c++ - 无法访问 IplImage 数据

> ID：14629719
> 
> 赞同：1
> 
> 时间：2013-01-31T15:51:32.277
> 
> 标签：c++, c, pointers, opencv, iplimage

我一直在尝试比较 IplImage 对象中的数据内容。

我有以下内容：

```
 IplImage img1 = IplImage(cv::imread("C:\\TestIm\\barrier_snapshot1.png"),            
                                                   CV_LOAD_IMAGE_GRAYSCALE);
   for (int i=0; i < img1.widthStep * img1.height; i++) {
       cout << img1.imageData[i] << endl;
   } 
```

但是当我尝试打印它时，它会导致异常，我什至无法捕获它来打印消息并查看我做错了什么。我的图像是灰度的，我相信如果我不使用 cvCreateImage() 可以吗？我知道这将是一些愚蠢的或与数组访问相关的事情，我似乎无法从 IplImage 文档中轻松获得。

**为什么我要在我的设计中混合使用 C 和 C++ 代码？**

不幸的是，我别无选择！我正在开发一个具有改进的运动检测应用程序的项目。我的遗留应用程序源代码使用大量的 BOOST 和 OpenCV 东西。特别是，它使用 IplImage*（我讨厌它，让生活变得困难并导致内存泄漏）来存储图像掩码之类的东西。我了解如果我长期保存 IplImage*，我将遇到非法引用和访问冲突。所以我保存了 IplImage* 指向的实际内容的副本。举例说明：

```
// getLongHistory() returns IplImage*
IplImage history_long = *(motionHistory.getLongHistory()); 
```

共有 6 个使用 IplImage* 制作的蒙版图像。此时此刻，我在谴责决定在 IplImage* 中这样做的程序员。当我尝试加载这些蒙版图像时会出现问题，这就是我的做法：

```
// Passing pointer to the address of the mask stored (alive in the memory)
motionHistory.setLongHistory(&(matcher.getCurrentSceneObject().getLongHistory())); 
```

我相信我对 IplImage 对象的深拷贝和浅拷贝有问题。**我相信将其保存为IplImage** * 中的 cv::Mat 并从 cv::Mat 将其加载为 IplImage* 可能会减轻负担，因为我怀疑它可能在高级函数下做了一些事情，以便复制数据和 ROI相应地完成。但是，作为一个新手，我可以假设任何事情。请帮忙！

***更新***

在我的代码中，我过去是这样做的：

```
/* I store all my mask images in a vector of pairs made of <int, IplImage>
 * __MASK_LONG__ etc. are predefined intergers
 * getMaskLong() etc. methods return IplImage* to the respective mask images.
 */

  myImages.clear(); // To make sure that I have no extra stuff
  myImages.push_back(std::make_pair<int, IplImage>(_MASK_LONG_, maskHistory.getMaskLong()));
  myImages.push_back(std::make_pair<int, IplImage>(_MASK_SHORT_, maskHistory.getMaskShort())); 
```

然而，在得到建议并做了一些基本的 R&A 之后，我现在这样做是为了防止浅拷贝：

```
 myImages.clear(); 
  myImages.push_back(std::make_pair<int, IplImage>(_MASK_LONG_, *cvCloneImage(maskHistory.getMaskLong())));
  myImages.push_back(std::make_pair<int, IplImage>(_MASK_SHORT_, *cvCloneImage(maskHistory.getMaskShort()))); 
```

我可以确认这是可行的，因为我可以看到 OpenCV 窗口上加载了最新的蒙版图像！而且我很确定在任何编程任务中至少进行 2/3 次深度复制是多么重要。所以感谢你让我走上正轨。但是现在我遇到了在实施这些更改时想到的问题 - 内存分配失败。并且遇到了消息：

```
OpenCV Error: Insufficient memory (Failed to allocate 3686404 bytes) in OutOfMemoryError, 
file /home/naresh/OpenCV-2.4.0/modules/core/src/alloc.cpp, line 52 
```

如果我对 C/C++ 有足够的了解，首先我犯了将它们混合在一起的罪行（我别无选择！！这是一个遗留应用程序！）。其次，存在不匹配，即 alloc.cpp 文件（产生问题的地方）中对 malloc/free 的调用不正确。或者可能只是堆已损坏或已满。我是不是很傻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:22:33.660

**不要将**OpenCV 的 C 接口与 C++ 接口混用。

理想情况下，您可以通过专门使用 C++ 接口来解决问题，如下所示：

```
cv::Mat gray = cv::imread("C:\\TestIm\\barrier_snapshot1.png", CV_LOAD_IMAGE_GRAYSCALE);

cv::Mat_<uchar>::iterator it = gray.begin<uchar>();
cv::Mat_<uchar>::iterator end = gray.end<uchar>();
for (; it != end; ++it)
{
    cout << *it << endl;        
} 
```

或者：

```
cv::Mat gray = cv::imread("C:\\TestIm\\barrier_snapshot1.png", CV_LOAD_IMAGE_GRAYSCALE);

for (int i = 0; i < gray.cols; i++)
{
    for (int j = 0; j < gray.rows; j++)
    {
        cout << gray[gray.cols * j + i] << endl;
    }
} 
```

是的，[`cv::imread()`](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imread#imread)也可以将输入图像加载为灰度。但如果你真的需要坚持使用 C 接口，那就放弃`cv::imread()`并`cvLoadImage()`改用。有几篇文章解释了如何做到这一点，请使用*搜索框*。

如果您决定继续混合接口（请不要），[请查看此线程](https://stackoverflow.com/a/8436517/176769)，因为它解释了如何转换`IplImage*`为`cv::Mat`.

# iphone - 如何将字符串中所有单词的第一个字母变成大写iphone

> ID：14629723
> 
> 赞同：1
> 
> 时间：2013-01-31T15:51:42.013
> 
> 标签：iphone, ios, objective-c

> **可能重复：**
> [将字符串的每个单词中的第一个字符更改为大写](https://stackoverflow.com/questions/2347786/change-the-first-character-in-each-word-of-a-string-to-uppercase)

我有一个字符串

**“这是一个字符串”**

如何将字符串的第一个单词转换为大写

**“这是一个字符串”**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T15:54:01.670

我假设你正在使用`NSString`

```
NSString *str=@"this is a string";
NSString *titleStr = [str capitalizedString];

NSLog(@"%@", titleStr); // Outputs: "This Is A String" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:09:45.013

您可以使用 capitalizedString ，只需锁定 [NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

```
NSString *newString = [yourStr capitalizedString]; 
```

# iphone - 从 iPhone 中的弹出窗口导航到另一个窗口

> ID：14629732
> 
> 赞同：0
> 
> 时间：2013-01-31T15:52:02.700
> 
> 标签：iphone, ios, objective-c, xcode, uipopovercontroller

我使用了这个[SampleCode](https://github.com/martinjuhasz/MJPopupViewController)并创建了两个弹出窗口，比如 pop-up1 和 pop-up2。如果按下按钮，则从弹出窗口 1 中将显示另一个弹出窗口 2。从 po-pup2 我需要去另一个视图。直到 pop-up2 很好，从 pop-up2 我不能去单独的视图？

我使用下面的代码删除了弹出视图。

```
[self dismissPopupViewControllerWithanimationType:MJPopupViewAnimationFade];
    imageShareSubViewController = nil; 
```

我使用下面的代码导航到另一个视图。

```
@autoreleasepool {
        ViewController *obj = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]autorelease];
        [self.navigationController pushViewController:obj animated:TRUE];
        obj = nil;
    } 
```

但上述工作不正常（即，我可以导航到另一个视图）。如何解决这个问题？我哪里错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:04:42.347

像这样创建你的 navigationController、setRootViewController：

```
//A view controller:
HomeScreen * homeScreen = [[HomeScreen alloc]initWithNibName:@"HomeScreen" bundle:nil];

UINavigationController* navigation = [[UINavigationController alloc]initWithRootViewController:homeScreen];

AppDelegate * delegate = (AppDelegate*)[[UIApplication sharedAplication]delegate];
delegate.window.rootviewcontroller = navigation;
[homeScreen release];

//add other views

HomeScreen * homeScreen2 = [[HomeScreen alloc]initWithNibName:@"HomeScreen" bundle:nil];

[navigation pushViewController: homeScreen2];
[homeScreen2 release]; 
```

# c# - Global.asax 和继承

> ID：14629733
> 
> 赞同：0
> 
> 时间：2013-01-31T15:52:06.927
> 
> 标签：c#, asp.net

我有一个父应用程序和一个子应用程序。目前有两个单独的 Global.asax 文件。我试图让这个子应用继承父应用的 Global.asax 文件。

所以我的 App_Code 文件夹中有一个文件，其中包含所有代码，如下所示：

```
namespace NsGlobalAsax
{
    public class GlobalAsax : System.Web.HttpApplication
    {
        public GlobalAsax()
        {
            //
            // TODO: Add constructor logic here
            //
        }

        void Session_Start(object sender, EventArgs e)
        {
            // add some data to the Session so permanent SessionId is assigned
            // otherwise new SessionId is assigned to the user until some data
            // is actually written to Session
            Session["Start"] = DateTime.Now;

            // get current context
            HttpContext currentContext = HttpContext.Current;

            if (currentContext != null)
            {
                if (!OnlineVisitorsUtility.Visitors.ContainsKey(currentContext.Session.SessionID))
                    OnlineVisitorsUtility.Visitors.Add(currentContext.Session.SessionID, new WebsiteVisitor(currentContext));
            }

        }

        void Session_End(object sender, EventArgs e)
        {
            // Code that runs when a session ends. 
            // Note: The Session_End event is raised only when the sessionstate mode
            // is set to InProc in the Web.config file. If session mode is set to StateServer 
            // or SQLServer, the event is not raised.

            if (this.Session != null)
                OnlineVisitorsUtility.Visitors.Remove(this.Session.SessionID);
        }

        public void Application_AuthenticateRequest(Object sender, EventArgs e)
        {
            String cookieName = FormsAuthentication.FormsCookieName;
            HttpCookie authCookie = Context.Request.Cookies[cookieName];

            if (null == authCookie)
            {//There is no authentication cookie.
                return;
            }

            FormsAuthenticationTicket authTicket = null;

            try
            {
                authTicket = FormsAuthentication.Decrypt(authCookie.Value);
            }
            catch (Exception ex)
            {
                //Write the exception to the Event Log.
                return;
            }

            if (null == authTicket)
            {//Cookie failed to decrypt.
                return;
            }

            //When the ticket was created, the UserData property was assigned a
            //pipe-delimited string of group names.
            String[] groups = authTicket.UserData.Split(new char[] { '|' });

            //Create an Identity.
            GenericIdentity id = new GenericIdentity(authTicket.Name, "LdapAuthentication");

            //This principal flows throughout the request.
            GenericPrincipal principal = new GenericPrincipal(id, groups);

            Context.User = principal;

        }
    }

} 
```

现在我有我的父 Global.asax 文件如下：

```
<%@ Application Language="C#" CodeBehind="Global.asax.cs" src="Global.asax.cs"  Inherits="RootAsax.BaseGlobal"    %> 
```

这是代码隐藏文件：

```
namespace RootAsax
{
    public class BaseGlobal : NsGlobalAsax.GlobalAsax
    {}
} 
```

现在这是我的子应用 Global.asax 文件：

```
<%@ Application Codebehind="Global.asax.cs" Inherits="FormsAuthAd.Global" Language="C#" %> 
```

这是代码隐藏文件：

```
namespace FormsAuthAd
{
    public class Global : NsGlobalAsax.GlobalAsax
    {
    }
} 
```

代码隐藏文件中的两个类都继承自 App_Code 文件夹中的源代码，但是，身份验证状态不会从一个应用程序传递到另一个应用程序。例如，如果我登录父应用程序，则身份验证不会转移到子应用程序。反之亦然。

我希望我给了你们足够的细节。

谢谢！

编辑：

Heinzi 在评论中表示，这不是继承问题。我需要弄清楚如何让子应用程序**使用**父级的 Global.asax 文件。如果我删除子应用程序的 Global.asax 文件身份验证对子应用程序根本不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:25:27.253

这不是与继承有关的问题。

如果您想对不同网站的用户进行身份验证，您应该实施单点登录策略[http://en.wikipedia.org/wiki/Single_sign-on](http://en.wikipedia.org/wiki/Single_sign-on)

有很多例子和方法来做到这一点。这是相当复杂的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:32:08.240

> 我认为每个应用程序都有自己的会话和状态.. 不可能传递应用程序对象。一种方法是由一个应用程序将数据持久保存在数据库中，另一个应用程序从公共共享数据库中读取数据并弄清楚如何理解它。

# asp.net-ajax - AjaxFileUpload 将图像保存到本地目录而不是服务器目录

> ID：14629735
> 
> 赞同：0
> 
> 时间：2013-01-31T15:52:12.450
> 
> 标签：asp.net-ajax

它不断将图像保存到本地目录或根本不保存。它没有给我任何错误。据我所知，我的本地驱动器和主机之间没有关系。我所有的页面都在主机上，它们工作正常。但在创建此页面之前，我将 bin 目录文件（AjaxControlToolkit.dll、Site.dll、site.pdb）从本地主机导入到 Web 服务器。

源文件：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolderIcerik" runat="server">
  <asp:ToolkitScriptManager runat="server"></asp:ToolkitScriptManager>

  <asp:AjaxFileUpload ID="AjaxFileUploadResimEkle" runat="server"  
    AllowedFileTypes="jpg,jpeg" 
    onuploadcomplete="AjaxFileUploadResimEkle_UploadComplete" />
</asp:Content 
```

>

代码隐藏：

```
 protected void AjaxFileUploadResimEkle_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
        {
          int PostID = Convert.ToInt32(Request.QueryString["PostID"]);
          var makale = (from p in db.Posts
                        where p.PostID == PostID
                        select new { p.PostID, p.Title }).Single();

          string uzanti = Path.GetExtension(e.FileName);
          if (e.ContentType.Contains("image"))
          {
            if (e.FileSize <41943040)
            {
              Guid benzersiz = Guid.NewGuid();

              string filePath =string.Format("~/images/blog/large_image/{0}_{1}{2}", makale.Title, benzersiz,uzanti);

              AjaxFileUploadResimEkle.SaveAs(Server.MapPath(filePath));

              System.Drawing.Image degisecekResim = System.Drawing.Image.FromFile(filePath));

              Bitmap kucukResim = ResimKucult(degisecekResim);
              string kucukResimYolu = string.Format("~/images/blog/medium_image/{0}_{1}{2}", makale.Title, benzersiz,uzanti);
              kucukResim.Save(Server.MapPath(kucukResimYolu));

              Resimler resim = new Resimler();

              resim.PostID = PostID;
              resim.FileName = filePath;
              resim.SmallFileName = kucukResimYolu;
              resim.IsActive = true;
              db.Resimlers.AddObject(resim);
              db.SaveChanges();

            }
          }
        }

    Bitmap ResimKucult(System.Drawing.Image resim)
    {
      int x = 225;
      int y = 165;

      Bitmap bmpOrji = new Bitmap(resim);
      if (bmpOrji.Width > bmpOrji.Height)
      {
        y = bmpOrji.Height * x / bmpOrji.Width;
      }
      else if (bmpOrji.Height > bmpOrji.Width)
      {
        x = bmpOrji.Width * y / bmpOrji.Height;
      }

      Bitmap yeniBmp = new Bitmap(bmpOrji, x, y);

      return yeniBmp;
    }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:27:49.633

问题出在域主机的文件夹选项上。当我授予文件夹写入权限时，问题就解决了。

我不知道我的主机有那种文件夹选项系统，默认情况下所有文件夹都是只读的。

在像我一样弄乱你的 asp 页面之前，最好先检查主机。

# javascript - 如何从nodejs aws s3 getObject回调数据中检索元数据？

> ID：14629737
> 
> 赞同：4
> 
> 时间：2013-01-31T15:52:13.273
> 
> 标签：javascript, node.js, amazon-web-services, amazon-s3

我正在尝试使用 AWS 节点 SDK 向 S3 上传/下载音频块文件。我已经尝试过 base64 方法，它工作正常。但是我无法取回作为上传参数的一部分捆绑的元数据。

以下是用于上传的代码片段以及元信息：

```
var myMetaInfo = "AdditionalInfo", dataToUpload = {Bucket: bucketName, Key:storageFolderFullPath , Body: myAudioFile.toString('base64'), Metadata: {metaInfo: myMetaInfo}};
s3.client.putObject(dataToUpload, function(err, data) {
    if (!err) {
        console.log("Successfully uploaded the file to ::" + dataToUpload.Bucket);            
    } else {
        console.log(" **** ERROR while uploading ::"+err);            
    }        
}); 
```

这是下载文件的片段。元数据不是回调数据的一部分。我尝试将回调“数据”打印到控制台，并注意到只有以下参数可用 LastModified、ContentType、ContentLength、ETag、Body、RequestId

```
var dataToDownload = {Bucket: bucketName, Key: storageFolderFullPath}, originalFile, myMetaInfo;
s3.client.getObject(dataToDownload, function(err, data) {
    if (!err) {            
        originalFile = new Buffer(data.Body, 'base64');
        myMetaInfo = data.Metadata.metaInfo;
        console.log(" Meta info:: " + myMetaInfo);
        fs.writeFile(fileStoragePath, originalFile, function(err) {
            if (!err) {
                console.log(" File written!! ");
            } else {
                console.log(" Error while writing the file !!" + err);
            }
        });
    } else {
        console.log(" **** ERROR while downloading ::"+err);            
    }
}); 
```

关于我的实现有什么问题的任何指示？我已遵循[此处提到的文档](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3/Client.html#putObject-property)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T22:57:18.023

你的`metaInfo`值是一个字符串吗？

引用[sdk api docs](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/frames.html)是`Metadata`一个字符串映射（ala ~ `Metadata: {metaInfo: "myMetaInfoString"}`。我已经使用字符串作为值测试了您的代码`metaInfo`，它确实在`data.Metadata.metaInfo`引用下正确返回。

# jasper-reports - 如何在组顶部显示子报表？

> ID：14629741
> 
> 赞同：0
> 
> 时间：2013-01-31T15:52:22.357
> 
> 标签：jasper-reports, ireport, subreport

我创建了一个子报告，并且在我的主报告中我的 custom_group 右侧有一个空白位置。我希望我的子报告处于这个位置（在主报告中 custom_group 的右侧）。

有谁知道如何在*iReport*中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:55:57.670

您只是想移动子报表吗？单击主报告中的子报告。在属性菜单中，设置左侧位置。

如果您想做的不仅仅是移动它，请发布您的 JRXML 文件，以便我们查看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:03:12.817

您需要修改子报表并将其边距设置为 0。为此，在 iReport 中打开您的子报表，在*报表检查器*中右键单击报表并单击*删除报表边距*。然后保存您的子报表并重新运行父报表（点击*报表设计器*顶部的*编译报表*图标以强制重新编译所有报表资源）：子报表的边距将消失，不会是左侧的任何空格。

# unit-testing - CakePHP Test Suite 2.2 中单元测试的奇怪行为

> ID：14629743
> 
> 赞同：0
> 
> 时间：2013-01-31T15:52:27.427
> 
> 标签：unit-testing, cakephp

我是我的开发团队中唯一一个在单元测试中遇到这个问题的人。调试器、google /stackoverflow 或我的同事都可以帮助我。在我的机器上，单元测试有 10% 的时间工作。剩下的时间他们一直运行，直到他们在很长一段时间后加载一个未找到的站点页面。我已经尝试了一切：

*   整个缓存被禁用
*   我用两个浏览器试了一下
*   重新启动 Apache 和 MySQL
*   登录应用程序
*   使用 Firebug 进行调试

没有什么帮助。我不知道问题是什么。我在训练营上运行 Windows 8 来工作。所以没有安装太多（这可能会导致副作用）。

如果我尝试几次，它会偶然工作并通过所有测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:08:08.313

> 剩下的时间他们一直运行，直到他们在很长一段时间后加载一个未找到的站点页面。

您是否在浏览器中执行测试？您应该在 Web 前端使用控制台。在浏览器中运行测试可能会出现问题。

# c# - jQuery allways Post null to Action in MVC 4

> ID：14629756
> 
> 赞同：2
> 
> 时间：2013-01-31T15:52:59.203
> 
> 标签：c#, asp.net-mvc, jquery

我有一个问题，我不知道是什么问题。
我正在构建一个 Json 对象，我想用`$.ajax`. 问题是我的操作总是为空。
这是 Ajax 部分：

```
 $("input[type=button]#ajax-editor-save").click(function() {

            var hotelPropertyAssignModel = new Object();
            hotelPropertyAssignModel.Hotel_Id = 1;
            hotelPropertyAssignModel.HotelProperties = new Array();

            $("input.ajax-editor[data-edited=true]").each(function() {
                var hotelPropertyValue = new Object();
                hotelPropertyValue.HotelProperty_Id = $(this).attr("data-hotelPropertyId");
                hotelPropertyValue.Language = $(this).attr("data-lang");
                hotelPropertyValue.Value = $(this).attr("value");
                hotelPropertyAssignModel.HotelProperties.push(hotelPropertyValue);
            });

            $.ajax({
                url: '@Url.Action( "SetProperties" )',
                type: 'POST',
                dataType: 'json',
                data: JSON.stringify(hotelPropertyAssignModel)
            });
        }); 
```

这是行动：

```
[AcceptVerbs( HttpVerbs.Post )]
[HttpPost]
public void SetProperties ( string hotelPropertyAssignModel )
{

} 
```

我将参数更改为字符串以验证 json 是如何到来的。当我用正确的模型替换它时，我也得到了 null！有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:55:53.423

确保设置正确的 contentType：

```
$.ajax({
    url: '@Url.Action( "SetProperties" )',
    type: 'POST',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify(hotelPropertyAssignModel)
}); 
```

您使用的`dataType`参数指示响应类型，而不是请求类型。如果您的控制器操作正确设置了 Content-Type 响应标头，则您不需要它，如果您返回例如 JsonResult，它通常会这样做。

但是从我可以看到您的控制器操作被声明为 void 这显然是错误的。控制器动作必须返回动作结果。如果您不关心内容，只需使用`EmptyResult`：

```
[AcceptVerbs( HttpVerbs.Post )]
[HttpPost]
public ActionResult SetProperties ( string hotelPropertyAssignModel )
{
    ...
    return new EmptyResult();
} 
```

您的控制器操作还有另一个非常严重的问题。它采用字符串参数而不是视图模型！！！我不知道您如何期望将 JSON 请求绑定到某个字符串。

因此，**立即**定义一个与您愿意发送的 JSON 结构相匹配的视图模型：

```
public class HotelAssignmentViewModel
{
    public int Hotel_Id { get; set; } 
    public HotelPropertyViewModel[] HotelProperties { get; set; }
}

public class HotelPropertyViewModel
{
    public int HotelProperty_Id { get; set; }
    public string Language { get; set; }
    public string Value  { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
[AcceptVerbs( HttpVerbs.Post )]
[HttpPost]
public ActionResult SetProperties ( HotelAssignmentViewModel model )
{
    ...
    return new EmptyResult();
} 
```

我还注意到您的代码存在另一个问题。您似乎订阅了某个 DOM 元素的 click 事件以触发 AJAX 请求，但您从未通过从该事件返回 false 来取消默认操作。因此，例如，如果这是一个提交按钮或锚点，它只会将浏览器重定向到远离页面的位置，而没有时间让您的 AJAX 请求执行。因此，请确保通过单击处理程序返回 false 来取消此默认操作：

```
$("input[type=button]#ajax-editor-save").click(function() {
    ...
    return false;
}); 
```

# .net - 自定义 Log4Net appender，指定在哪里可以找到用户名

> ID：14629758
> 
> 赞同：-1
> 
> 时间：2013-01-31T15:53:11.063
> 
> 标签：.net, log4net, appender

我有一个被各种项目（wpf、web 等）使用的自定义 WcfAppender。我想记录用户名，但是项目使用了不同的技术（Windows 身份验证、联合安全性等），我不想为特定的身份验证技术编写紧密耦合的代码。我可以通过设置操作或类似方法以某种方式告诉附加程序如何找到用户名吗？关于自定义 log4net 附加程序的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:45:18.497

大约一年前我问了一个类似的问题，但我不确定是否有一个很好的解决方案，除了使用`ThreadContext`和设置一个变量来存储每个 wcf 调用中的用户名，如下所示：

```
//You would need to get currentUserLoggedIn 
log4net.ThreadContext.Properties["user"] = currentUserLoggedIn; 
```

这是我的老问题，有一个答案，但这个解决方案对我不起作用。也许它会适合你：

[log4net 在 wcf PerSession 服务中使用 ThreadContext.Properties](https://stackoverflow.com/questions/9047889/log4net-using-threadcontext-properties-in-wcf-persession-service)

# c# - 使用 LockBits 访问像素数据时出现内存错误

> ID：14629759
> 
> 赞同：0
> 
> 时间：2013-01-31T15:53:15.957
> 
> 标签：c#, memory, bitmap, lockbits

使用下面的代码访问三个不同位图的像素数据时出现此错误：

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

C#代码：

```
var bmpDataA = bitmap.LockBits(bounds, ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);
var bmpDataB = bitmap2.LockBits(bounds, ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);
var bmpDataC = bitmap3.LockBits(bounds, ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);

const int width = 1280;
const int height = 720;
int npixels = width * height;

unsafe
{
    int* pPixelsA = (int*)bmpDataA.Scan0.ToPointer();
    int* pPixelsB = (int*)bmpDataB.Scan0.ToPointer();
    int* pPixelsC = (int*)bmpDataC.Scan0.ToPointer();

    for (int i = 0; i < npixels; ++i)
    {
        if (pPixelsA[i] == pPixelsB[i]) // <--- Error occurs on this line
        {
            pPixelsC[i] = Color.Black.ToArgb();
        }
    }
}
bitmap.UnlockBits(bmpDataA);
bitmap2.UnlockBits(bmpDataB);
bitmap3.UnlockBits(bmpDataC); 
```

使用调试器，我可以看到变量`npixels`= 921600，当错误发生时（for 循环）变量`i`= 691200。所以不确定问题出在哪里。如果我将像素格式更改为 32bppRgb，则没有问题，并且工作正常。只是不想使用 24bppRgb。有任何想法吗？谢谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:48:08.273

1.  PixelFormat.Format24bppRgb 表示每个像素 24 位 = 3 字节，因此，LockBits 方法锁定 1280 * 720 * 3 = 2764800 字节

2.  您将锁定数据上的指针转换为 int*。int 的大小 = 32 位 = 4 字节。

3.  因此，您尝试处理 1280 * 720 * 4 = 3686400 字节，而您有锁 2764800（参见 1）。不匹配。

# delphi - Delphi - 使用 Indy 使用 cookie 登录和下载文件

> ID：14629762
> 
> 赞同：2
> 
> 时间：2013-01-31T15:53:19.127
> 
> 标签：delphi, cookies, login, indy

我需要在我的 XE3 上使用 Indy (v10) 来做到这一点：

1.  项目清单
2.  使用用户名和密码登录网页“A”；
3.  捕获登录后网页发送的cookies；
4.  使用 cookie 加载新网页“B”（实际上我只有在登录后才能访问此网页）；
5.  通过解析html代码找到网页“B”中的所有文件链接；
6.  下载所有文件；

我的问题是：

1.  我不知道如何登录；
2.  我不知道如何捕获和使用cookie访问网页“B”；
3.  我不知道如何使用cookie来下载文件；

是否有可能有一段关于这些点的代码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:59:01.377

1.  登录通常是作为页面的帖子完成的，但这里没有法律或标准，因此您必须分析登录页面并检查它是如何工作的。请记住，在浏览器中所做的任何事情都可以用 INDY 来模仿，但您首先必须知道您想要的特定页面是如何工作的。

2.  INDY 为您管理 cookie，只需将 TIdCookieManager 实例分配给您的 HTTP 对象。

3.  与第 2 点相同，只需使用相同的 HTTP/CookieManager 对象，这对您来说是透明的。

没有代码，真的，根据第 1 点。

# diff - 我的两个代码库有何不同？

> ID：14629766
> 
> 赞同：1
> 
> 时间：2013-01-31T15:53:27.597
> 
> 标签：diff

我有两组应该非常相似的源代码。我需要找到它们不同的地方并解决这个问题。

这些文件不在任何 SCM 中。有没有办法得到这样的报告：

```
dir/file1 -- exists only in version A
dir/file2 -- exists only in version B
dir/file3 -- B includes 5 additions, 2 deletions
dir2 -- exists only in version A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:49:41.743

```
diff -ru -x '.DS_Store' dirA dirB | diffstat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:56:20.983

任何体面的差异工具（例如 WinMerge、DiffMerge 等）都能够报告两个文件夹结构之间的差异。

只需将版本 A 放在名为 的文件夹`VersionA`中，将版本 B 放在名为的文件夹中`Version B`并在它们上运行差异工具。

要在 WinMerge 中生成报告，请选择“工具”->“生成报告”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:56:33.120

[Meld](http://meldmerge.org)可以打开两个文件夹，然后为您提供丢失/添加/不同文件的概述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:15:44.150

我已经使用过这个工具，它对我们来说非常方便。

它也有额外的 PMD 扫描

看一下这个。

[http://sourceforge.net/projects/diffreport/](http://sourceforge.net/projects/diffreport/)

# ios - UITableView 图像上的缓慢滚动

> ID：14629769
> 
> 赞同：2
> 
> 时间：2013-01-31T15:53:29.720
> 
> 标签：ios, objective-c, image, performance, uitableview

我正在显示许多直接从我的应用程序加载的图像（未下载）。第一次滚动时，我的表格视图很慢。在我的所有单元格显示后它变得平滑。我真的不知道为什么。

我在 viewDidLoad 中加载了一组 UIImage。然后在我的 tableview 委托中，我只是在给定的索引路径处获取图像并将其设置为我的单元格的 UIImageView。

你知道我怎样才能提高表现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-30T07:59:39.377

只是为了分享我已经修复并且效果很好我遵循的步骤。

1) 使用 Cell 设置 performSelectorInBAckground 函数作为传递的参数，该函数保存滚动视图或 uiview 以放置许多 iamges。

2) 在后台函数中，使用文件的 imagewithContents 加载从应用程序包或本地文件中存储的图像。

3) 使用此代码将图像设置为 imageView。

```
 //// Start of optimisation - for iamges to load dynamically in cell with delay , make sure you call this function in performSelectorinBackground./////

    //Setting nil if any for safety
    imageViewItem.image = nil;

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

    dispatch_async(queue, ^{
        UIImage *image = // Load from file or Bundle as you want

        dispatch_sync(dispatch_get_main_queue(), ^{

            //Set the image to image view not, wither cell.imageview or [cell add subviw:imageview later ]
            [imageViewItem setImage:image];
            [imageViewItem setNeedsLayout];
        });
    });

    //// End of optimisation///// 
```

这将动态加载所有图像，并且比以前的缓慢和生涩的行为更平滑地滚动表格视图。

祝一切顺利

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:58:51.947

您可以在这里阅读我刚刚提交的答案：

[在 cellForRowAtIndexPath 从 CoreData 加载图像会减慢滚动速度](https://stackoverflow.com/questions/14623686/loading-image-from-coredata-at-cellforrowatindexpath-slows-down-scrolling/14624875#14624875)

基本思想是使用 Grand Central Despatch 将您的表格视图图像获取代码移动到一个单独的线程，当图像可用时将您的单元格填充回主线程。即使从文件系统将图像加载到内存中存在延迟，您的滚动也会非常流畅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:11:23.813

我从您的问题中了解到的是，您的图像都已准备就绪，并且它们已加载到 RAM 中（存储在 viewDidLoad 中填充的数组中）。在这种情况下，我想查看 cellForRowAtIndexPath 中的确切代码以提供帮助。我的直觉告诉我，那里正在做一些不应该在主线程上做的事情（正如他所暗示的那样）。问题是 - 如果它只是从 NSArray 中获取（最坏的情况是 O(log(n))），那么你不应该看到性能下降。

我知道您没有下载图像，但我仍然建议在后台线程上执行任何非 UI 操作。我写[了一些可以帮助你的东西](http://stavash.wordpress.com/2012/12/14/advanced-issues-asynchronous-uitableviewcell-content-loading-done-right/)。

# jquery - 如何创建一个 JQuery 插件

> ID：14629773
> 
> 赞同：2
> 
> 时间：2013-01-31T15:53:35.347
> 
> 标签：jquery, this, option

所以我想开始创建 JQuery 插件并且已经开始编写代码了。我在 JQuery com 上阅读了有关如何创建一个的完整文章，但我遇到了一个问题，我在互联网上的任何地方都找不到。该插件应该从外部脚本运行，并且应该从 HTML 文档中的脚本调用，如下所示：

```
<script type="text/javascript">
$(function() {
    $("#JwebImageGallery").JwebImageGallery({
        Delay: 1000
    })
})
</script> 
```

首先，我尝试从运行良好的选项中设置 ElementID（这使得 '("#JwebImageGallery")' 无用）。然而，这不是我想要的。我希望它使用 '("#JwebImageGallery")' 作为插件随后将操作的 ElementID。在 JQuery 网站上的教程中，他们说你应该使用“this”，这也是我的第一个想法，但是它不起作用。就像我说的那样，我从外部“.js”运行它。当我警告“this”时，它会返回：[ObjectHTMLDivElement]。Element 是一个 div，因此“this”似乎有效，但随后无效。

这是我的一些脚本：

```
(function( $ ) {
    $.fn.JwebImageGallery=function(o){
    o=$.extend({
        BoxID: 'JwebImageGallery',
        Delay: 5500,
        TransitionEffect: 'slide'},
    o||{});

    return this.each(function() { 

        var BoxID = this;
        window.alert(BoxID);

    // Script continues here
});

  };
})( jQuery ); 
```

我也尝试过使用但没有成功：

```
var BoxID = $(this); 
```

为什么“这个”不起作用？我已经在许多网站上检查过我可能犯的任何错误，但我就是想不通。

那么我怎么能看到它不起作用呢？我会把我的代码放在这里：

```
$(BoxID).css('overflow', 'hidden'); 
```

当在选项中设置 ElementID (BoxID) 时，此代码工作得很好，但是当我将其更改为“this”时，它就不再工作了......另外，如果我将 BoxID 设置为 'JwebDesignImageGallery' 这是ID 然后它工作。

我是 JQuery 的新手，所以如果你们中的任何人知道为什么这不起作用，那么您能否向我解释一下，也许其他人也可能有同样的问题？如果您需要更多信息，请告诉我！提前致谢！

注意：我已经包含了 JQuery 和 JQuery UI

## 编辑

我想获得的 ID 是这段代码中的 ID：

```
$(function() {
        $("#JwebImageGallery").JwebImageGallery({
            Delay: 1000
        })
    }) 
```

即“#JwebImageGallery”。这就是我认为“这个”会回归的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:28:46.450

你的困惑似乎来自于什么`this`。`this`表示一个 jQuery 元素。提示我的是您的代码中的以下几行。

```
var BoxID = this;
window.alert(BoxID); 
```

所以要超级清楚 -`this`不是传入元素的ID。来自他们的在线文档（实际上非​​常好）

> 现在我们有了 shell，我们可以开始编写实际的插件代码了。但在我们这样做之前，我想谈谈上下文。在插件函数的直接作用域中，this 关键字指的是调用插件的 jQuery 对象。这是一个常见的失误，因为在 jQuery 接受回调的其他实例中，this 关键字指的是本机 DOM 元素。这通常会导致开发人员不必要地将 this 关键字（再次）包装在 jQuery 函数中。

如果您想要传入元素的 id，那么您只需要使用以下内容。

```
var BoxID = this.prop('id');
window.alert(BoxID); 
```

如果你想操纵那个元素

```
this.animate({  }); //because this is already a jQuery object 
```

不是

```
$(this).animate({}); //like you might see in a typical jQuery callback 
```

# java - android bufferedwriter错误

> ID：14629777
> 
> 赞同：0
> 
> 时间：2013-01-31T15:53:50.633
> 
> 标签：java, android

我正在开发一个android应用程序，我需要创建一个文件并使用bufferedwrite和bufferedread对其进行写/读。该文件在活动中声明如下：

```
String string = "string";
File file = new File(this.getFilesDir(), string); 
```

但是，当我尝试使用此代码写入文件时：

```
 BufferedWriter out = new BufferedWriter(new FileWriter(new File(file)));
    out.write("I am a line of text written in" + file);
    out.close(); 
```

我不断收到“构造函数文件（文件）未定义”错误。我相信错误与文件声明有关，但我不知道为什么。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:59:39.143

```
String string = "string";
File file = new File(this.getFilesDir(), string);

BufferedWriter out = new BufferedWriter(new FileWriter(file));
out.write("I am a line of text written in" + file);
out.close(); 
```

# maven - Maven：创建包含项目外部文件的存档（zip 或 jar）文件？

> ID：14629779
> 
> 赞同：0
> 
> 时间：2013-01-31T15:53:56.203
> 
> 标签：maven, maven-3, maven-assembly-plugin

我目前正在开发一个基于 Maven 的项目，在该项目中我有生成 PDF 文件的单元测试，比如说“C:/result”目录（我绝对不希望在我的项目的任何目录中创建这些文件） .

使用 maven-assembly 插件，是否可以创建一个归档文件（最好是 zip 或 jar）来收集在“C:/result”中生成的文件？

基本上，我的目标是在每次部署项目的新版本时将此存档作为常规工件上传到 Nexus 服务器上。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:13:02.547

您需要定义类似于以下内容的程序集描述符：

```
<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
    <id>bin</id>
    <formats>
        <format>zip</format>
    </formats>
    <baseDirectory>C:/</baseDirectory>
    <includeBaseDirectory>false</includeBaseDirectory>
    <fileSets>
        <fileSet>
            <directory>results</directory>
            <outputDirectory>./doc</outputDirectory>
        </fileSet>
    </fileSets>
</assembly> 
```

另存为`src/assembly/bin.xml`，它将从 pom 中引用。pom 将包含在以下`build`部分中：

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <executions>
        <execution>
            <id>out</id>
            <configuration>
                <descriptors>
                    <descriptor>src/assembly/bin.xml</descriptor>
                </descriptors>
            </configuration>
            <phase>verify</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

有关更多信息，请参阅[Maven 程序集文档](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html)。

# jsf-2 - 嵌套复合组件内的输出构面

> ID：14629788
> 
> 赞同：2
> 
> 时间：2013-01-31T15:54:18.377
> 
> 标签：jsf-2, composite-component, facet

我有一个组件，用于在其子元素周围添加一个容器。该组件在其他组件中使用没有任何问题。但我希望能够使用这样的方面：

```
<!-- INTERFACE -->
<cc:interface>
    <cc:attribute name="detailTitle" />
    <cc:facet name="header"/>
</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>
    <li class="mvkcomp listItem listDetailToggle">
        <ezcomp:container>
            <div class="listItemBody">
                <div class="header">
                    <!-- Facet not being rendered -->
                    <cc:renderFacet name="header" />

                    <a href="#">Show/hide #{cc.attrs.detailTitle}</a>
                </div>
                <div class="detail">
                    <cc:insertChildren />
                </div>
            </div>
        </ezcomp:container>
    </li>
</cc:implementation> 
```

然而，这不会渲染任何东西。如果将`<cc:renderFacet>`移到 之外，它会按预期工作`<ezcomp:container>`。是否有我没有看到的替代方案，或者我只需移动组件的`li`外部`ezcomp:container`以使其工作？无论如何，这是首选的选择吗？

哦，`<cc:insertChildren>`按预期工作。对我来说似乎很奇怪，一个会失败，但另一个不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:38:34.277

我选择处理此问题的方法是将包装器元素实现为模板。然后我使用 ui:decorate 在复合组件内输出该模板。原来的包装器现在只在插入它的孩子之前输出模板。

# ios - 是否可以在不复制所有代码的情况下复制 iOS 应用程序？

> ID：14629789
> 
> 赞同：2
> 
> 时间：2013-01-31T15:54:18.107
> 
> 标签：ios, objective-c, xcode, cocoa-touch, cocoa

我有 3 个共享很多功能的应用程序。只是它们之间的内容和样式发生了变化。

不是简单地为每个应用程序复制项目，有没有办法制作一个“基础”应用程序，然后让 3 个应用程序扩展它？

简单地复制项目将难以维护，而扩展“基础”将允许它们同时更新。

我知道您可以创建项目，然后将旧项目中的所有文件复制到新项目中。这将使文件保持最新，但是如果添加或删除了任何文件，则必须手动执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T15:57:36.687

拥有一个使用多个目标的基础项目。每个目标都可以包含主项目中的文件子集，和/或添加自己的独立文件。每个目标还可以在构建配置中设置自己的一组预处理器定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:57:56.337

您可以在 Xcode 中为您的项目添加更多目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:11:12.940

创建一个为可重用组件构建静态库的项目。您可以使用 Aggregate 目标来打包任何关联的资源，例如 nib 文件、故事板、图像等。

然后，您的应用程序项目都可以使用静态库和资源。对静态库的任何更改都将可用于所有相关项目。

# jquery - jquery选择一个子集的文本框

> ID：14629795
> 
> 赞同：0
> 
> 时间：2013-01-31T15:54:46.203
> 
> 标签：jquery

我正在使用 asp.net 来呈现由大量文本框组成的页面。

组的数量取决于客户，因此不在我的控制范围内。

我想要的是，当组中的输入框中的值发生更改时，该组的结果框会更改为该组的总和，并更改背景颜色。

我已经为一组原型工作，如下所示。

```
function calculateSetColour(i) {
        var total = 0;

        $(".answer").each(function () {
            if (!isNaN(this.value) && this.value.length != 0) {
                total += parseFloat(this.value);           
            }
        });

        $(".result").val(total);
        $(".answer").addClass(calculateColour(total));
    } 
```

但我似乎无法让它为团体工作。我假设我需要添加第二个选择器，所以我可以使用

```
$(.answer .group" + i).each .. 
```

其中 i 是以编程方式添加到每个组的 id。但是在函数中放置一条警告语句表明它永远不会被命中，所以我怀疑我的语法错误并且选择器永远不会匹配。

那么我的方法是否正确，将变量合并到类选择器中的正确语法是什么？（类选择器是最安全的，因为 .net 可以破坏 id 和名称）

根据要求，html看起来像

```
 <div class="reportItem">
            TOTAL UNITS DELIVERED<BR />
        <span id="ctl00_ContentPlaceHolder1_rptdG_ctl01_Name">Site A</span>
        <div class="l1" >New</div><div class="l2"><input name="ctl00$ContentPlaceHolder1$rptdG$ctl01$tbNew" type="text" id="ctl00_ContentPlaceHolder1_rptdG_ctl01_tbNew" class="answer" onblur="calculateSetColour(1);" /></div> <br />
        <div class="l1" >Used</div> <div class="l2"><input name="ctl00$ContentPlaceHolder1$rptdG$ctl01$tbUsed" type="text" id="ctl00_ContentPlaceHolder1_rptdG_ctl01_tbUsed" class="answer"  onblur="calculateSetColour(1);" /></div>
        <div class="l1" >Compliance</div> <div class="l2"><input name="ctl00$ContentPlaceHolder1$rptdG$ctl01$tbCompliant" type="text" id="ctl00_ContentPlaceHolder1_rptdG_ctl01_tbCompliant" class="result" /></div>
            </div>

                    <div class="reportAltItem">
                        TOTAL UNITS DELIVERED<BR />
        <span id="ctl00_ContentPlaceHolder1_rptdG_ctl02_DlrName">Site 2</span>
    <div class="l1" >New</div><div class="l2"><input name="ctl00$ContentPlaceHolder1$rptdG$ctl02$tbNew" type="text" id="ctl00_ContentPlaceHolder1_rptdG_ctl02_tbNew" class="answer" onblur="calculateSetColour(2);"/></div>
    <div class="l1" >Used</div><div class="l2"><input name="ctl00$ContentPlaceHolder1$rptdG$ctl02$tbUsed" type="text" id="ctl00_ContentPlaceHolder1_rptdG_ctl02_tbUsed" class="answer" onblur="calculateSetColour(2);"/></div>
                        <div class="l1" >Compliance</div> <div class="l2"><input name="ctl00$ContentPlaceHolder1$rptdG$ctl02$tbCompliant" type="text" id="ctl00_ContentPlaceHolder1_rptdG_ctl02_tbCompliant" class="result" /></div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:07:57.223

为 Group 提供相同的类名并包括 group + id（例如 group 可能代表 10 个输入）。将 group + id 放在输入的 lang 属性中...

```
//example: <input class='group group1' lang='group1' />
//on blur get lang and pass that specific group. 
$(".group").blur(function () {
  var thisgroup = $(this).attr("lang");
calculateSetColour(thisgroup); 
```

});

将组名传递给函数。此时我们知道存在 group1 类。每个看起来像这样：

```
function calculateSetColour(group) {
    var total = 0;

    $("." + group).each(function () {
        if (!isNaN(this.value) && this.value.length != 0) {
            total += parseFloat(this.value);           
        }
    });

    $(".result").val(total);

    //update the color for this specific group...
    $("." + group).addClass(calculateColour(total));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:45:24.853

编辑：

```
function calculateSetColour(input) {
    var total = 0;

    var outerDiv = $(input).parent().parent();
    outerDiv.find(".answer").each(function () {
        if (!isNaN(this.value) && this.value.length != 0) {
            total += parseFloat(this.value);           
        }
    });

    outerDiv.find(".result").val(total);
    outerDiv.find(".result").addClass(calculateColour(total));
} 
```

然后调用它：

```
<div class="reportItem">
        TOTAL UNITS DELIVERED<BR />
    <span id="ctl00_ContentPlaceHolder1_rptdG_ctl01_Name">Site A</span>
    <div class="l1" >New</div><div class="l2"><input name="ctl00$ContentPlaceHolder1$rptdG$ctl01$tbNew" type="text" id="ctl00_ContentPlaceHolder1_rptdG_ctl01_tbNew" class="answer" onblur="calculateSetColour(this);" /></div> <br />
    <div class="l1" >Used</div> <div class="l2"><input name="ctl00$ContentPlaceHolder1$rptdG$ctl01$tbUsed" type="text" id="ctl00_ContentPlaceHolder1_rptdG_ctl01_tbUsed" class="answer"  onblur="calculateSetColour(this);" /></div>
    <div class="l1" >Compliance</div> <div class="l2"><input name="ctl00$ContentPlaceHolder1$rptdG$ctl01$tbCompliant" type="text" id="ctl00_ContentPlaceHolder1_rptdG_ctl01_tbCompliant" class="result" /></div>
        </div> 
```

# android - 如何将资产文件夹的所有子文件夹移动到android中的sdcard

> ID：14629802
> 
> 赞同：0
> 
> 时间：2013-01-31T15:55:12.990
> 
> 标签：android

我制作了一个应用程序，在其中使用了更多图像和视频，我已将所有资源放在资产的子文件夹中，而且我的数据库位于资产文件夹的子文件夹中，我想移动资产的整个子文件夹文件夹，包括 sdcard 中的文件。我的资产文件夹大小超过 30mb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:14:30.670

您可以访问asset的唯一方法是抛出assetManager以从它们那里获取输入。

所以你的代码必须看起来像这样。

```
 for (int i = 1; i < files.length ; i++) {
        try{
         InputStream is = aManager.open(files[i]);
         OutputStream os = new FileOutputStream(output[i]);
         read = 0;
         buffer = new byte[1024];
         while (read != -1) {
              read = is.read(buffer, 0, buffer.length);
               if (read == -1)
                    break;
               os.write(buffer, 0, read);
          }
       } finally {
              is.close();
              os.close();
    }} 
```

其中 files 是指向资产文件夹中路径的字符串数组，而 output 是指向“在 SD 卡上”的输出目录的路径字符串数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:18:44.537

试试下面的代码，将资产文件夹和文件复制到 sdcard 中。

```
private void copyAssets() {
    AssetManager assetManager = getAssets();
    String[] files = null;
    try {
        files = assetManager.list("");
    } catch (IOException e) {
        Log.e("tag", "Failed to get asset file list.", e);
    }
    for(String filename : files) {
        InputStream in = null;
        OutputStream out = null;
        try {
          in = assetManager.open(filename);
          out = new FileOutputStream("/sdcard/" + filename);
          copyFile(in, out);
          in.close();
          in = null;
          out.flush();
          out.close();
          out = null;
        } catch(IOException e) {
            Log.e("tag", "Failed to copy asset file: " + filename, e);
        }       
    }
}
private void copyFile(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
      out.write(buffer, 0, read);
    }
} 
```

参考：[使用 Java 移动文件](http://www.java2s.com/Code/Java/File-Input-Output/MoveaFile.htm)

# php - PHP simplexml_load_file vbulletin vaispy 权限重定向

> ID：14629805
> 
> 赞同：0
> 
> 时间：2013-01-31T15:55:20.450
> 
> 标签：php, simplexml, vbulletin

首先，我为标题的复杂性道歉。这真的是我可以解释这个问题的最佳方式。

基本上我正在尝试加载外部 xml。它是 vaispy vbulletin mod 的一部分。我尝试加载的网站设置了权限，如果您不是管理员，它会将您重定向到它显示的页面

> *您无权访问此页面的*用户名。*这可能是由于以下几个原因之一： 您的用户帐户可能没有足够的权限访问此页面。您是否正在尝试编辑其他人的帖子、访问管理功能或其他一些特权系统？如果您尝试发帖，管理员可能已禁用您的帐户，或者它可能正在等待激活*

 *我在上述论坛上有适当的权限，但是当我

> $url = " *URL 已删除*/vaispy-secret.php?do=xml";
> 
> $xml = simplexml_load_file($url);
> 
> print_r($xml);

我被重定向到通知我没有适当权限的页面。

如何通过我的 php 登录 vbulletin 论坛，以便能够正确解析 XML？

我的目的是创建一个 Web 应用程序来监控某些关键字，当它发现一个关键字时，会立即发出警报，以便对链接进行审核。*

# python - 循环遍历python代码

> ID：14629811
> 
> 赞同：0
> 
> 时间：2013-01-31T15:55:42.107
> 
> 标签：python, loops, nested, nested-loops

我有一个 python 脚本，可以搜索网页的信息。目前，我在运行程序“myscript.py searchterm”时将搜索词添加为参数。

我想做的是有一个包含我的搜索词的文件，让我的脚本依次循环遍历每个。

所以我会从这样的文件中填充我的列表....

```
with open('mylist.txt', 'r') as f:
    searchterms = f.readlines() 
```

我已经有了看起来像这样的代码……只是为了让您了解布局……

```
counter = 0
try:
    while counter <10:

    #do some other stuff here

    counter=counter+10

except IOError:
    print "No result found!"+"" 
```

我需要将其包装在另一个循环中以对列表中的每个项目执行此操作，但我失败了。

我知道如果计数器达到 10，我需要重置计数器，移动到我的下一个列表项并循环上面的内容，但我不知道如何。我发现 python 文档很难理解，我希望能得到一点帮助。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:13:21.533

如果您有一个搜索词列表，您可以轻松地遍历它们并将它们传递给您现有的循环，例如：

```
for searchterm in searchterms:   
    counter = 0
    try:
        while counter <10:

        #do some other stuff here with searchterm

        counter=counter+10

    except IOError:
        print "No result found!"+"" 
```

确保您的计数器在每个搜索词循环开始时正确重置。

# patch - 使用 xcode 维护 libpd 的纯数据

> ID：14629815
> 
> 赞同：2
> 
> 时间：2013-01-31T15:55:52.713
> 
> 标签：patch, sample, envelope, piano, puredata

我正在开发一个可以播放钢琴样本的补丁，它可以在 xcode 中为 ipad 构建钢琴应用程序。我正在尝试添加一个 adsr 来创建维持，但我似乎无法让它工作。有人能指出我正确的方向吗？谢谢！

补丁： [https ://docs.google.com/file/d/0B4-qHDgzbDB3VUlwM09FSEowZWM/edit](https://docs.google.com/file/d/0B4-qHDgzbDB3VUlwM09FSEowZWM/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:52:04.350

ADSR 只是一个用于将声音输出乘以的 evelope。然而，它意味着与声音的触发一起在时间轴上。当我查看您的补丁时，我注意到另一件事：为什么每次触发它们时都将样本重新加载到数组中？数组应在应用程序启动时填充，如下所示：

```
[loadbang]
|
[read -resize c1.wav c1Array(
|
[soundfiler] 
```

稍后，当您实际上只想回放时，您可以

```
[r c1]
|
[t b]
|
[tabplay~ c1Array]
|
[throw~] 
```

在你的补丁的一个中心点，你可以拥有

```
[catch~]
|
[dac~] 
```

（在那里添加主要音量）。请注意，这三个部分之间没有任何联系！

# python - 错误“ImportError：DLL 加载失败：%1 不是有效的 Win32 应用程序”

> ID：14629818
> 
> 赞同：34
> 
> 时间：2013-01-31T15:55:53.723
> 
> 标签：python, opencv, importerror

我有这个问题，我尝试`cv2`在 Python 上导入并收到以下错误消息。

```
>>> import cv2
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

我确实了解有很多关于此的帖子，其中建议包的位数与 Python 包不同。

但是，我正在运行的所有内容都是 64 位的。我在 Windows 7 64 位，我有[winpython](http://code.google.com/p/winpython/downloads/detail?name=WinPython-64bit-2.7.3.3.exe) 2.7.3.3，64 位分发，我用[此处](http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html)提供的指令编译了 64 位 OpenCV，并将 cv2.pyd DLL 文件放在 Lib/site-packages 文件夹中Python 解释器。

不幸的是，使用 32 位版本的 Python 的建议不再适用于我，因为我必须处理对于 32 位来说太大的 NumPy 数组。

* * *

唯一缺少的是将新的 NumPy 二进制文件路径 (C:\opencv\build\bin\Release) 添加到 Windows PATH 环境变量，重新启动 Python 解释器。

现在一切似乎都运行良好！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-23T21:06:49.007

由于对 Win32 的引用，ImportError 消息有点误导，而问题只是没有找到 OpenCV DLL。

通过将 OpenCV 二进制文件的路径添加到 Windows PATH 环境变量中解决了这个问题（例如，在我的计算机上，此路径为：*C:\opencv\build\bin\Release*）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-14T09:19:40.613

您可以尝试安装 32 位版本的 OpenCV。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-25T21:03:23.403

我刚刚遇到了这个问题，问题是该软件包曾一度安装在每个用户的软件包目录中。（在 Windows 上。）又名 %AppData%\Python。所以 Python 首先查找那里，找到 .pyd 文件的旧 32 位版本，但由于列出的错误而失败。不幸的是， pip uninstall 本身不足以清除它，此时 pip 10.0.1 似乎没有用于卸载的 --user 参数，仅用于安装。

tl;dr 从 %AppData%\python\python27\site-packages 中删除旧的 .pyd 为我解决了这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-20T04:05:53.447

或者您必须为 Windows 64 位重建 cv2 模块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-09T06:26:24.853

您所要做的就是将*cv2.pyd*文件从 x86 文件夹（例如**C:\opencv\build\python\2.7\x86\**）复制到**C:\Python27\Lib\site-packages\**，而不是从 x64文件夹。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-21T15:59:12.200

Python版本混用时也会出现这个错误：

例如，如果要加载的任何 DLL 文件是使用 Python 2.7.16 编译的，并且您尝试使用 Python 2.7.15 导入，`ImportError: DLL load failed: %1 is not a valid Win32 application.`则会引发错误。

这至少是我发现的问题所在。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-22T16:37:41.497

我遇到了与之前答案中提到的错误相同的错误，但仅在我使用`pyinstaller`.

我在我的[诗歌](https://python-poetry.org/) [venv](https://docs.python.org/3/library/venv.html)中做了以下事情：

`poetry run python -m pip install pypiwin32`

它对我有用。我在用

```
python                            3.8.10
pyinstaller                       4.7
# Those are the versions that worked for me
pypiwin32                         223
pywin32                           303
pywin32-ctypes                    0.2.0 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-08T03:01:54.120

当我遇到此错误时，在我的计算机崩溃并重新启动后它就消失了。尝试关闭并重新打开 IDE。如果这不起作用，请尝试重新启动计算机。当我收到此错误时，我刚刚安装了这些库而没有重新启动[PyCharm 。](https://en.wikipedia.org/wiki/PyCharm)

我从来没有先关闭 PyCharm 进行测试，因为我的破电脑总是随机崩溃......我正在研究那个，但它至少解决了这个问题......小胜利...... :)。

# java - 添加 JTextfield 后 Java 不呈现组件

> ID：14629826
> 
> 赞同：1
> 
> 时间：2013-01-31T15:56:07.753
> 
> 标签：java, swing, jframe, jlabel, jtextfield

我知道以前有人问过这个问题，但没有答案。

在 Java 中，当我向框架添加组件时，在应用程序初始化时，添加 JTextField 后的所有元素都不会呈现。它们在您刷新屏幕后呈现，例如最小化和最大化屏幕。以下仅呈现文本字段。它看起来像一些 Java 渲染问题。

我的代码如下：

```
private void initialize() {
    frame = new JFrame();
    frame.setVisible(true);
    frame.setBounds(100, 100, 569, 321);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(null);

    txtGenerationRate = new JTextField();
    txtGenerationRate.setBounds(322, 29, 86, 20);
    frame.getContentPane().add(txtGenerationRate);
    txtGenerationRate.setColumns(10);

    lblAmountOfSolarPanelsText = new JLabel("Amount of solar panels:");
    lblAmountOfSolarPanelsText.setBounds(10, 57, 159, 14);
    frame.getContentPane().add(lblAmountOfSolarPanelsText);

    frame.setVisible(true); // added it for the second time, just to make sure
} 
```

有人可以帮忙吗？

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:06:54.667

首先，您绝对应该阅读有关如何使用布局的信息：http: [//docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

第二件事，您应该在添加所有组件后将框架设置为可见，如果不这样做，则必须调用 repaint()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:02:07.797

试着把它放在初始化方法的底部

```
frame.setVisible(true);
frame.setBounds(100, 100, 569, 321);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:05:20.680

你也可以`frame.revalidate();`尝试`frame.repaint();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T16:06:54.703

这似乎对我有用，当窗口首次出现时，我会同时看到标签和文本字段。标签文本不适合标签，因此被截断，但除此之外一切看起来都符合预期。也许在尝试简化代码时已从代码中删除了错误的片段？

![在此处输入图像描述](../Images/2c6d9b93df865815fbd6ac64555eb6a6.png)

# python - 在 raw_input 提示下，我的 python 程序中的菜单出现意外输出

> ID：14629827
> 
> 赞同：0
> 
> 时间：2013-01-31T15:56:11.803
> 
> 标签：python

下面是我收到的输出，下面是我的代码。为什么我得到这个内存参考有什么原因？顺便说一句 - 缩进在我的程序中是正确的，但我很难在 stackoverflow 中发布它

```
>>>Welcome to the Main Menu, Richard.
>>>Please select from the following options:
    >>>(1)Punch In
    >>>(2)Punch Out
    >>>(3)Exit
>>>(type 1, 2, or 3)   
>>><__main__.PunchCard instance at 0x7f5c2b799ea8> 
```

和代码

```
import xlrd
import sys
data = xlrd.open_workbook('data.xls')
sheetname = data.sheet_names()
employee_sheet = data.sheet_by_index(0)

uid_list = [c.value for c in employee_sheet.col(0)]
last_list = [c.value for c in employee_sheet.col(1)]
first_list = [c.value for c in employee_sheet.col(2)]
username_list = [c.value for c in employee_sheet.col(3)]
password_list = [c.value for c in employee_sheet.col(4)]

class PunchCard:

    def idle_screen(self):
        sys.stderr.write("\x1b[2J\x1b[H")
        print "Press Enter to start PunchClock"
        raw_input()
        return self.user_login()

    def user_login(self):
        sys.stderr.write("\x1b[2J\x1b[H")
        userinput = raw_input("Please enter your username.\n> ")
        if userinput in username_list:
                user_index = username_list.index(userinput)
                self.user_first = first_list[user_index]
                user_password = raw_input("Welcome %s, please enter your password.\n> " % self.user_first)
        else:
                print "That is an incorrect username."
                raw_input("Press enter to re-enter your username.")
                return self.user_login()

        if user_password == password_list[user_index]:
                return self.main_menu()
        else:
                sys.stderr.write("\x1b[2J\x1b[H")
                print "You have entered an incorrect password.\nPress enter to try again, or type QUIT to return to previous menu."
                raw_input()
                return self.user_login()

    def main_menu(self):        
            sys.stderr.write("\x1b[2J\x1b[H")
            print "Welcome to the Main Menu, %s.\nPlease select from the following options:\n    (1)Punch In\n    (2)Punch Out\n    (3)Exit\n\n(type 1, 2, or 3)" % self.user_first 
            menu_input = raw_input(self)
            if menu_input == '1':
                print "punched in"
                raw_input("You clocked in at XX. Press enter to continue.")
                return self.main_menu()
            elif menu_input == '2':
                print "punched out"
                raw_input("You clocked out at XX. Press enter to continue.")
                return self.main_menu()
            elif menu_input == '3':
                return self.idle_screen()
            else:
                return self.main_menu()

s = PunchCard()
s.idle_screen() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:59:51.480

好的，根据您的评论，我会更详细地回答。但请注意，我提供了一个基于您的代码的示例（有更好的方法可以达到相同的结果，但您只需认真阅读文档）。

您的应用程序的高级流程是以下无限循环：空闲屏幕 -> 用户登录 -> 主菜单 -> 空闲屏幕。所以这应该直接表达：

```
s = PunchCard()
while True:
    s.idle_screen()
    s.user_login()
    s.main_menu() 
```

然后，`idle_screen`应该只是等待输入并返回（退出方法）：

```
def idle_screen(self):
    sys.stderr.write("\x1b[2J\x1b[H")
    print "Press Enter to start PunchClock"
    raw_input()
    # method returns to caller at this point 
```

`user_login()`应该循环直到发生有效登录并返回（退出方法）：

```
def user_login(self):
    While True:
        sys.stderr.write("\x1b[2J\x1b[H")
        userinput = raw_input("Please enter your username.\n> ")
        if userinput in username_list:
            user_index = username_list.index(userinput)
            self.user_first = first_list[user_index]
            user_password = raw_input("Welcome %s, please enter your password.\n> " % self.user_first)
    else:
            print "That is an incorrect username."
            raw_input("Press enter to re-enter your username.")
            continue # start of the beginning of the loop again

    if user_password == password_list[user_index]:
            return # exit method
    else:
            sys.stderr.write("\x1b[2J\x1b[H")
            print "You have entered an incorrect password.\nPress enter to try again, or type QUIT to return to previous menu."
            raw_input()
            # do nothing here (will loop again)
            # Note your prompt mentions "QUIT" but you don't handle it ;)
            # Current logic means the login loop continues until a valid login occurs 
```

最后，`main_menu`循环直到用户退出并且方法返回（一切都从顶层循环开始）：

```
def main_menu(self):        
    While True:
        sys.stderr.write("\x1b[2J\x1b[H")
        print "Welcome to the Main Menu, %s.\nPlease select from the following options:\n    (1)Punch In\n    (2)Punch Out\n    (3)Exit\n\n(type 1, 2, or 3)" % self.user_first 
        menu_input = raw_input(self)
        if menu_input == '1':
            print "punched in"
            raw_input("You clocked in at XX. Press enter to continue.")
        elif menu_input == '2':
            print "punched out"
            raw_input("You clocked out at XX. Press enter to continue.")
        elif menu_input == '3':
            return 
```

希望有帮助。

但是，*请咬紧牙关阅读文档*:)

# mysql - 连接两个 SQL 语句

> ID：14629829
> 
> 赞同：0
> 
> 时间：2013-01-31T15:56:16.100
> 
> 标签：mysql, join

我为 NOOB 问题道歉，但我无法理解两个表的 JOINING 结果。

我有一个将条目与类别链接的表（tableA）具有列 entry_id 和 cat_id

我有另一个表（tableB），它根据时间戳计算 entry_id 被查看的次数

我想从tableB 中获取entry_id 的列表，按tableA 中的cat_id 查看和过滤它们的次数排序。

我有两个 SQL 语句，但不知道如何将它们放在一起。

语句 1 - 获取特定类别中的 entry_id：

```
SELECT entry_id FROM tableA WHERE cat_id = "" 
```

语句 2 - 从 tableB 中获取 entry_id 的排序列表：

```
SELECT entry_id FROM tableB GROUP BY entry_id ORDER BY COUNT(*) DESC 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:01:02.477

```
SELECT
  tableb.entry_id,
FROM
  tableb
  INNER JOIN tablea
    ON tableb.entry_id = tablea.entry_id
    AND tablea.cat_id = ""
GROUP BY
  tableb.entry_id
ORDER BY
  COUNT(*) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:03:35.260

试试这个：

```
SELECT
  A.entry_id, Count(B.entry_id) Viewed
FROM TableA A
 LEFT JOIN TableB B
    ON A.entry_id = B.entry_id
WHERE A.Cat_Id = 5 -- your cat_id
GROUP BY A.entry_id
ORDER BY Count(B.entry_id) DESC 
```

# database - Visual Studio 使用错误的帐户连接到 SQL Server

> ID：14629832
> 
> 赞同：0
> 
> 时间：2013-01-31T15:56:17.927
> 
> 标签：database, visual-studio-2008, sql-server-2000, connection-string

我在尝试让 Visual Studio 连接到位于另一台服务器上的数据库时遇到问题。

这是我的连接字符串：

```
<add name="CDDMSDB" connectionString="Database=CDDMS;Server=aecl-db01.domainx.local;Integrated Security=SSPI;Connection Timeout=7200"
  providerName="System.Data.SqlClient" /> 
```

现在，当我尝试通过我的应用程序连接时，我收到以下错误：用户 'DOMAINX\CDSDEV_NATHANIE$' 登录失败。

帐户 DOMAINX\CDSDEV_NATHANIE 不存在。我在帐户 enable\nathanielp 下登录，但它似乎根本没有使用该帐户。我可以使用 enable\nathanielp 通过 Management Studio 连接到 SQL Server，但无论出于何种原因，它在我运行应用程序时都没有使用该帐户。

有什么建议么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:12:35.583

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28VS.71%29.aspx)

据此，当您尝试登录数据库时，它会提取您的 Windows 帐户凭据，这可以解释“帐户 DOMAINX\CDSDEV_NATHANIE，不存在”。如果您要连接的服务器上也不存在您的 Windows 帐户凭据。

我会设置`Integrated Security=false`并将您登录服务器的用户名和密码放在您的连接字符串中。使用`User ID=`并`Password=`希望这会有所帮助。

# css - 试图在我的图像旁边放置一个 div

> ID：14629837
> 
> 赞同：0
> 
> 时间：2013-01-31T15:56:38.993
> 
> 标签：css

无法在 jsfiddle 上发布此内容，因为它似乎已关闭。

```
div.browseBuildsArea-pro 
{
   float: left; 
   position: relative;
   width: 790px; 
   height: 90px; 
   background-image:url('../images/builds/builds-bg-pro.jpg'); 
   background-repeat:no-repeat;
}

div.browseBuildsArea-pro img.champion 
{
   display: block;
   height: 72px;
   margin-left: 14px;
   margin-top: 7px;
   border-radius: 9px;
   -moz-border-radius: 9px;
   -khtml-border-radius: 9px;
   -webkit-border-radius: 9px;
}

div.browseBuildsArea-pro div.build-poster 
{
    display: block;
    position: relative;
    margin-left: 150px;
    margin-top: 10px;
}

<div class="browseBuildsArea-pro">
<img class="champion" src="<%THEME%>images/lol/avatars/2.png">

<div class="build-poster">
    awdwada
</div>
</div> 
```

我是 CSS 新手，所以我需要两件事上的帮助。我的样式中是否过度使用了属性？“build-poster” div 总是在图像下。我怎样才能把它放在图像的右侧？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:00:43.883

您需要浮动图像，添加：

```
div.browseBuildsArea-pro img.champion {
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:02:22.150

您不需要指定`position:relative`on，因为`<div>`您没有在这些 div 上使用任何`left`、`top`和属性。但是，对于 IE7 等较旧的浏览器来说，这是一个好主意。`right``bottom`

你需要添加`float:left`到`img.champion`类

# google-drive-api - 无法使用 Google Drive API 更新 mimeType

> ID：14629839
> 
> 赞同：3
> 
> 时间：2013-01-31T15:56:45.833
> 
> 标签：google-drive-api

我已将一些文件加载​​到 Google Drive，但错误地为某些文件分配了不正确的 mimeType。我现在想将 mimeType 更新为正确的值。

我有以下 Python 代码，它成功更新了与文件关联的描述，但 mimeType 始终保留其原始值。

```
file = service.files().get(fileId=GoogleFileId).execute()
file['mimeType'] = 'application/msword'
file['description'] = 'test description'
updated_file = service.files().update(fileId=file['id'], body=file, updateViewedDate=False).execute() 
```

谁能发现我错过了什么？

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:40:59.463

是的，您必须更新文件内容本身。mimeType 是根据上传的文件计算得出的。通过传递`media_body`用于创建文件的 等来执行此操作。

这样做很麻烦，对不起。但是，如果您正在编写脚本，那么“某些文件”应该会给您带来太多痛苦。

# javascript - 设置和初始化多个剔除视图模型

> ID：14629840
> 
> 赞同：1
> 
> 时间：2013-01-31T15:56:59.347
> 
> 标签：javascript, knockout.js, viewmodel, knockout-mvc

我正在尝试创建和初始化某种主视图模型，其中包含可能在每个页面上运行的通用视图模型以及在页面加载时附加的页面特定模型。

```
var MasterViewModel = {
   commonViewModel1 : CommonViewModel1(),
   commonViewModel2 : CommonViewModel1()
};

var commonInit = function() {
  // Populate View Model Data
  MasterViewModel.commonViewModel1 = initCommonViewModel1();
  MasterViewModel.commonViewModel2 = initCommonViewModel2();

  // Apply common view model bindings
  ko.applyBindings(MasterViewModel);
};

var pageSpecificInit = function() {
  // Populate Specific View Model Data
  MasterViewModel.pageViewModel1 = initPageViewModel1();
  MasterViewModel.pageViewModel2 = initPageViewModel2();

 // Apply Page Specific Bindings
 ko.applyBindings(MasterViewModel);
};

$(function() {
  commonInit();
  pageSpecificInit();
}); 
```

这是我在实际应用程序中尝试做的一个粗略示例，这都是命名空间和单独的文件，因此只运行特定于页面的代码。执行此操作的最佳做​​法是[什么](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)？无法绑定到未定义的 pageViewModel1”我应该以不同的方式设置我的 MasterViewModel 以更像

```
var MasterViewModel = {
   commonViewModel1 : CommonViewModel1(),
   commonViewModel2 : CommonViewModel1(),
   pageViewModels : {}
};

    var commonInit = function() {
  // Populate View Model Data
  MasterViewModel.commonViewModel1 = initCommonViewModel1();
  MasterViewModel.commonViewModel2 = initCommonViewModel2();

  // Apply common view model bindings
  ko.applyBindings(MasterViewModel);
};

var pageSpecificInit = function() {
  // Populate Specific View Model Data
  MasterViewModel.pageViewModels.pageViewModel1 = initPageViewModel1();
  MasterViewModel.pageViewModels.pageViewModel2 = initPageViewModel2();

 // Apply Page Specific Bindings
 ko.applyBindings(MasterViewModel.pageViewModels);
};

$(function() {
  commonInit();
  pageSpecificInit();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:01:38.063

您的第二个示例更正确，但是您不应该将特定于页面的视图模型绑定到您用停止绑定注释包围的特定 html 元素吗？

```
ko.applyBindings(MasterViewModel.pageViewModels, $('#pageElement')[0]); 
```

但是，如果您想拥有可以相互通信的良好解耦对象，那么您可能需要查看[Knockout Postbox](https://github.com/rniemeyer/knockout-postbox/)

# java - AND 是否优先于 OR？

> ID：14629841
> 
> 赞同：0
> 
> 时间：2013-01-31T15:57:04.657
> 
> 标签：java

快速提问。在 Java 中，AND 优先于 OR 吗？例如，如何解释这段代码？

```
if(statement1 && statement2 || statement3) 
```

这和哪个一样？

```
if(statement1 && (statement2 || statement3)) 
```

或者

```
if((statement1 && statement2) || statement3) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T16:02:07.443

是的。很容易发现，API 文档有一个列出运算符优先级的表格：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

但是，我认为理解*为什么* `&&`应该优先于`||`：前者在很多方面是乘法动作，而后者是加法动作是一个好主意。考虑两个独立的事件`A`和`B`的概率`(A and B)`是`p(A)*p(B)`的概率`(A or B)`是 的`p(A) + p(B)`。通过类比众所周知的 * 优先于 + 的规则，这就解释了为什么逻辑运算符应该以这种方式计算。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T15:59:00.817

如[Oracle 教程中所述，运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html) `&&`的优先级高于`||`

注意：`&`优先级高于`|`which 高于`&&`then`||`

同等优先级的运算符从左到右求值（赋值运算符除外）。eg与 order`1 + 2 + "3"`不一样。`1 + (2 + "3")`相似地`100 / 10 / 2 != 100 / (10 / 2)`

对于赋值运算符`a *= b += 5`与`a *= (b += 5)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T15:59:33.497

是[的，根据文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)，`&&`优先于`||`（除非您使用括号）。

# tfs - 哪些 tfs 2010 对象引用可用于 Tfs_DefaultCollection.dbo.tbl_ReleaseNoteDetails

> ID：14629845
> 
> 赞同：1
> 
> 时间：2013-01-31T15:57:20.397
> 
> 标签：tfs, tfs-sdk

我们有一个签到记录的团队项目集合源代码控制设置，要求每次签到都捕获一个“跟踪号”。此数字在 TFS 外部。我需要搜索具有特定跟踪编号的所有变更集。

生成的变更集列表告诉我在 GetLatest 上进行哪些每月部署。

-- 我们不使用工作项

这个 .SQL 给了我正在寻找的列表。我想从 Visual Studio 的代码中访问它。

```
SELECT ReleaseNoteId, FieldName, BaseValue
from Tfs_DefaultCollection.dbo.tbl_ReleaseNoteDetails
  where ReleaseNoteId in (SELECT ReleaseNoteId
FROM Tfs_DefaultCollection.dbo.tbl_ReleaseNote
  where DateCreated between '2013-01-01' and '2013-01-31')
    and FieldName = 'Tracker #'
    and BaseValue = '18570' 
```

哪些对象引用可用于 Tfs_DefaultCollection.dbo.tbl_ReleaseNoteDetails？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:48:20.343

There is no 1to1 object reference in the TFS API, because you usually don't work on the structure like the database looks like.

What I understand from your description, you have the information you need in the changesets. In that case you could use the `VersionControlServer` to get the changesets and get the information from there.

```
TfsTeamProjectCollection tfsConnection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://TFS:8080/TFS/DefaultCollection"));
VersionControlServer sourceControl = (VersionControlServer)tfsConnection.GetService(typeof(VersionControlServer));
IEnumerable changesets = sourceControl.QueryHistory(ServerPath, VersionSpec.Latest, 0, RecursionType.Full, null, new DateVersionSpec (new DateTime(2013,1,1)), new DateVersionSpec (new DateTime(2013,1,31)), Int32.MaxValue, true, false);
foreach (Changeset change in changesets)
{
  // check where the information is stored in the changeset, may change.Changes
} 
```

Just an idea to get in the right direction.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:24:27.193

如果您想轻松查询和搜索，最好创建一个新的工作项字段并在签入期间关联工作项。工作项在 UI 中具有完整的查询功能，甚至可以传输到 Reporting 仓库。

您可以使用对象检索特定文件夹、日期范围等的历史记录，`QueryHistoryParameters`然后遍历`CheckinNotes`to 过滤器：

```
 var projectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(
      new Uri("http://localhost:8080/tfs/DefaultCollection"));
  var versionControlServer = projectCollection.GetService<VersionControlServer>();

  var query = new QueryHistoryParameters("$/Scrum/**", RecursionType.Full);
  var changesets = server.QueryHistory(query);

  changesets.Where(cs => cs.CheckinNotes.Any(note => note.PropertyName == "Tracker #" 
       && note.Value == "18570")) 
```

这不会非常快。要获得快速解决方案，请使用工作项关联。

# java - Java EE Web 应用程序的当前日期在某些天失效

> ID：14629851
> 
> 赞同：0
> 
> 时间：2013-01-31T15:57:31.347
> 
> 标签：java, jakarta-ee, oracle10g, struts-1, tomcat5.5

我有一个在 Red Hat 的 Linux 服务器上运行的 Web 应用程序（Java EE、Struts 1.1、JSP、Tomcat 5.5.20、WebLogic、Oracle）。有时，网络应用程序的当前日期会“失效”。例如：

2013年1月31日更改为：1994年1月12日所以由于日期的更改，用户在某些页面上提交按钮时出现问题。当我重新启动tomcat并且webapps出现时，问题解决了。这个问题重复了有时在一天和困扰我。问题是什么以及如何解决？请帮我！

**代码jsp文件为：**

```
 <TD ALIGN="center" width="35%"><P CLASS="SmallBlackRemark"><font class="RedColor"><b><%=DateUtil.stringDayMountYear()%></b></font></P></TD> 
```

**DateUtil 的 java 文件是：**

```
 import java.util.*;

        import java.text.SimpleDateFormat;

        import java.text.ParsePosition;

        import com.fdate.*;

        public class DateUtil{

          public static String getCurrentDate()
          {
            FDate curDate = new FDate(System.currentTimeMillis());
            return curDate.toString();
          }

          public static String getCurrentTime()
          {
            FDate curDate = new FDate(System.currentTimeMillis());
            String time = curDate.getHour() + ":"+curDate.getMinute()+":"+curDate.getSecond();
            return time;
          }

          public static int getCurrentYear()
          {
            FDate curDate = new FDate(System.currentTimeMillis());
            return curDate.getYear();
          }

          public static int getCurrentMonth()
          {
            FDate curDate = new FDate(System.currentTimeMillis());
            return curDate.getMonth();
          }

          public static int getCurrentDay()
          {
            FDate curDate = new FDate(System.currentTimeMillis());
            return curDate.getDate();
          }

        //reverse the order of dd and yyyy in a farsi date string just for fixing farsi presentation problem
          //suppose that input date is in the form of yyyy/mm/dd
          //the output would be as dd/mm/yyyy

          public static String stringDayMountYear(){
            return ShamsiCalendar.weekDayName(ShamsiCalendar.dayOfWeek(DateUtil.getCurrentDate()))+ " "+
                ShamsiCalendar.monthDayName(DateUtil.getCurrentDay())+
                ShamsiCalendar.monthName(DateUtil.getCurrentMonth()) +""  +
                String.valueOf(DateUtil.getCurrentYear());
          }

        } 
```

**ShamsiCalendar 的 java 文件：**

```
 package com.fdate;

        import java.util.*;
        import java.text.*;

        public class ShamsiCalendar
        {
          protected static final TimeZone DEFAULT_TIMEZONE=TimeZone.getDefault();
          protected static final long DAY_MILLIS=1000*60*60*24;
          protected static final int HOUR_MILLIS=1000*60*60;
          protected static final int MINUTE_MILLIS=1000*60;
          protected static final String SH_ORIGIN_DATE="1379/01/01";
          protected static final int TIMEZONE_RAW_OFFSET=DEFAULT_TIMEZONE.getRawOffset();

          protected static final int TIMEZONE_RAW_OFFSET_HOUR=TIMEZONE_RAW_OFFSET/HOUR_MILLIS;

          protected static final int TIMEZONE_RAW_OFFSET_MINUTE=(TIMEZONE_RAW_OFFSET-(HOUR_MILLIS*TIMEZONE_RAW_OFFSET_HOUR))/MINUTE_MILLIS;

        //  protected static final Date MI_ORIGIN_DATE=new Date(new GregorianCalendar(2000,Calendar.MARCH,20,0,0,0).getTimeInMillis());

          protected static final Date MI_ORIGIN_DATE=new Date(new GregorianCalendar(2000,Calendar.MARCH,20,0,0,0).getTime().getTime());

          protected static final int ORIGIN_WEEK_DAY=Calendar.MONDAY;
          protected static final String STANDARD_FORMAT_PATTERN="yyyy/MM/dd";

          public static final int SATURDAY=Calendar.SATURDAY;
          public static final int SUNDAY=Calendar.SUNDAY;
          public static final int MONDAY=Calendar.MONDAY;
          public static final int TUESDAY=Calendar.TUESDAY;
          public static final int WEDNESDAY=Calendar.WEDNESDAY;
          public static final int THURSDAY=Calendar.THURSDAY;
          public static final int FRIDAY=Calendar.FRIDAY;

          public static final int SHANBEH=Calendar.SATURDAY;
          public static final int YEKSHANBEH=Calendar.SUNDAY;
          public static final int DOSHANBEH=Calendar.MONDAY;
          public static final int SESHANBEH=Calendar.TUESDAY;
          public static final int CHAHARSHANBEH=Calendar.WEDNESDAY;
          public static final int PANJSHANBEH=Calendar.THURSDAY;
          public static final int JOMEH=Calendar.FRIDAY;

        ...

    public ShamsiCalendar() {
      }

      public static Date sysDate()
      {
        return new Date(System.currentTimeMillis());
      }

     public static long millisToDay(long millis )
      {
        return (long)(millis/DAY_MILLIS);
      }

     public static long dayToMillis(long day )
      {
        return day*DAY_MILLIS;
      }

      public static String weekDayName(int dd,boolean brf)  {
        String ds=new String("");

        if(brf)    {
            switch(dd){
                case SHANBEH:                return SHANBEH_TEXT;
                case YEKSHANBEH:             return SHANBEH_TEXT + " 1";
                case DOSHANBEH:              return SHANBEH_TEXT + " 2";
                case SESHANBEH:              return SHANBEH_TEXT + " 3";
                case CHAHARSHANBEH:          return SHANBEH_TEXT + " 4";
                case PANJSHANBEH:            return SHANBEH_TEXT + " 5";
                case JOMEH:                  return JOMEH_TEXT;
              }
          }
          else      {
          switch(dd){
                case SHANBEH:                return SHANBEH_TEXT;
                case YEKSHANBEH:             return YEKSHANBEH_TEXT;
                case DOSHANBEH:              return DOSHANBEH_TEXT;
                case SESHANBEH:              return SESHANBEH_TEXT;
                case CHAHARSHANBEH:          return CHAHARSHANBEH_TEXT;
                case PANJSHANBEH:            return PANJSHANBEH_TEXT;
                case JOMEH:                  return JOMEH_TEXT;
              }
            }
            return SHANBEH_TEXT + Integer.toString(dd) +"_E";
      }
... 
```

FDate的java文件：

```
package com.fdate;

import java.util.*;
import java.text.*;

public class FDate
{
  protected static final long DAY_MILLIS=1000*60*60*24;
  protected static final int HOUR_MILLIS=1000*60*60;
  protected static final int MINUTE_MILLIS=1000*60;

  protected Date internalDate;

  protected String internalShamsiDate;

  public FDate(long millis) {
    set(millis);
  }

 public FDate(){
    set();
  }

  public FDate(int year, int month, int date) {
    set(year,month,date);
  }

  public FDate(String shDate) {
    set(shDate);
  }

public String composite(int year , int month , int date){
    String ys;
    String ms;
    String ds;
    DecimalFormat df=new DecimalFormat();
    df.applyPattern("0000");
    ys=df.format(year);
    df.applyPattern("00");
    ms=df.format(month);
    df.applyPattern("00");
    ds=df.format(date);
    return ys + "/" + ms + "/" + ds;
  }

 public int getField(int field){
    GregorianCalendar gc=new GregorianCalendar();
    gc.setTime(internalDate);
    return gc.get(field);
  }

  public void setField(int field, int newValue){
    GregorianCalendar gc=new GregorianCalendar();
    gc.setTime(internalDate);
    gc.set(field,newValue);
    internalDate=gc.getTime();
  }

  public void set(){
    internalDate=new Date();
    internalShamsiDate=ShamsiCalendar.miladiToShamsi(internalDate);
  }

  public void set(int year, int month, int date) {
    internalDate=ShamsiCalendar.shamsiToMiladi(composite(year,month,date));
    internalShamsiDate=ShamsiCalendar.miladiToShamsi(internalDate);
  }

public void set(String shDate) {
    internalDate=ShamsiCalendar.shamsiToMiladi(shDate);
    internalShamsiDate=ShamsiCalendar.miladiToShamsi(internalDate);
  }

public void setTime(int hrs,int min){
    setField(Calendar.HOUR_OF_DAY,hrs);
    setField(Calendar.MINUTE,min);
  }

  public void setTime(int hrs,int min,int sec){
    setField(Calendar.HOUR_OF_DAY,hrs);
    setField(Calendar.MINUTE,min);
    setField(Calendar.SECOND,sec);
  }

  public int getHour(){
    return getField(Calendar.HOUR_OF_DAY);
  }

  public int getMinute(){
    return getField(Calendar.MINUTE);
  }

  public int getSecond(){
    return getField(Calendar.SECOND);
  }

 public int getYear(){
    return ShamsiCalendar.getYear(ShamsiCalendar.miladiToShamsi(internalDate));
  }

  public int getMonth(){
    return ShamsiCalendar.getMonth(ShamsiCalendar.miladiToShamsi(internalDate));
  }

  public int getDate(){
    return ShamsiCalendar.getDate(ShamsiCalendar.miladiToShamsi(internalDate));
  }

  public int dayOfWeek(){
    return getField(Calendar.DAY_OF_WEEK);
  }

  public boolean after(Date when){
    return internalDate.after(when);
  }

  public boolean after(FDate when){
    return internalDate.after(when.get());
  }

  public boolean before(Date when){
    return internalDate.before(when);
  }

  public boolean before(FDate when){
    return internalDate.before(when.get());
  }

  public void nextDay(){
    internalDate.setTime(internalDate.getTime()+DAY_MILLIS);
    internalShamsiDate=ShamsiCalendar.nextDay(internalShamsiDate);
  }

  public void prevDay(){
    internalDate.setTime(internalDate.getTime()-DAY_MILLIS);
    internalShamsiDate=ShamsiCalendar.prevDay(internalShamsiDate);
  }

  public void nextMonth(){
    internalShamsiDate=ShamsiCalendar.nextMonth(internalShamsiDate);
    internalDate=ShamsiCalendar.shamsiToMiladi(internalShamsiDate);
  }

  public void prevMonth(){
    internalShamsiDate=ShamsiCalendar.prevMonth(internalShamsiDate);
    set(ShamsiCalendar.shamsiToMiladi(internalShamsiDate),getHour(),getMinute(),getSecond());
  }

  public void nextYear(){
    internalShamsiDate=ShamsiCalendar.nextYear(internalShamsiDate);
    internalDate=ShamsiCalendar.shamsiToMiladi(internalShamsiDate);
  }

  public void prevYear(){
    internalShamsiDate=ShamsiCalendar.prevYear(internalShamsiDate);
    set(ShamsiCalendar.shamsiToMiladi(internalShamsiDate),getHour(),getMinute(),getSecond());
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:49:28.747

这是我解决这个问题的方法：

似乎您的 FDate(long) 构造函数偶尔会返回错误的日期。为了确认或否认这一点，我会在它们设置后将 internalDate 和 internalShamsiDate 发送到日志文件或 STDOUT，并尝试重现错误。当您重现该错误时，请查看这两个值是否符合您的预期。

如果不是，那么您知道您的问题存在于 ShamsiCalendar.miladiToShamsi(Date) 中的某个地方。如果它们看起来不错，它就住在别处。

我肯定会仔细研究 ShamsiCalendar 中的日期处理方法。似乎它们都将字符串作为输入，因此我假设代码正在处理字符串以获取所需的信息。这种方法本质上容易出错；如果有一些字符串处理不正确，或者 ShamsiCalendar.miladiToShamsi 偶尔会产生与这些方法所期望的略有不同的输出，我一点也不感到惊讶。

# grails - Geb baseUrl 导航可以与子域一起使用吗？

> ID：14629852
> 
> 赞同：4
> 
> 时间：2013-01-31T15:57:32.750
> 
> 标签：grails, geb

我正在使用 Geb 编写一些浏览器自动化测试。它允许您配置`baseUrl`和指定与此相关的浏览器操作，如[The Book of Geb](http://www.gebish.org/manual/0.7.0/browser.html#the_base_url)中所述。这适用于站点内的路径，但我看不到任何处理子域的语法。

是否有一种从使用 Geb DSL 的简单方法，`baseUrl = http://myapp.com/`或者`http://sub.myapp.com`我是否必须获取在代码中定义 baseUrl 的属性并使用它来生成子域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T15:17:35.733

正如 erdi 所说，目前似乎没有办法做到这一点。最后，我们将 getPageUrl() 的重写版本添加到 Page 的子类中。

```
String getPageUrl() {
    def subdomainPresent = this.class.declaredFields.find {
        it.name == 'subdomain' && isStatic(it.modifiers)
    }
    if( subdomainPresent ) {
        def baseURL = getBrowser().getConfig().getBaseUrl()
        def splicePoint = baseURL.indexOf('//') + 1

        pageUrl = baseURL[0..splicePoint] + this.class.subdomain + "." + baseURL[splicePoint+1..-1] + pageUrl
    }
    pageUrl
} 
```

像这样用于 account.{baseUrl}/login

```
class MyPage extends MyPageBase{
    static subdomain = "account"
    static url = "login"
} 
```

此处记录为拉取请求[https://github.com/geb/geb/pull/37/files](https://github.com/geb/geb/pull/37/files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T03:53:28.807

在 Geb 中，Browser 类有这个方法：

```
 /**
 * Changes the base url used for resolving relative urls.
 * <p>
 * This method delegates to {@link geb.Configuration#setBaseUrl}.
 */
void setBaseUrl(String baseUrl) {
    config.baseUrl = baseUrl
} 
```

[盖布Javadoc](http://www.gebish.org/manual/0.9.1/api/geb/Browser.html#setBaseUrl%28java.lang.String%29)

我成功地使用它来切换同一应用程序的服务器上下文。

例如： `browser.setBaseUrl('http://int/app/pages/') browser.setBaseUrl('http://ci/sameapp/pages/')`

如果您使用 Spock 运行测试，则需要在每个功能重置之前完成此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:10:01.253

据我所知，`baseUrl`除了直接在配置中设置之外，没有办法在测试执行期间进行修改：

```
browser.config.baseUrl = 'http://sub.myapp.com' 
```

# javascript - d3 强制定向网络的 json 表示

> ID：14629853
> 
> 赞同：4
> 
> 时间：2013-01-31T15:57:34.537
> 
> 标签：javascript, d3.js, force-layout

我正在尝试对 RISK 进行网络可视化。[您可以在http://bl.ocks.org/4683850](http://bl.ocks.org/4683850)使用所需的代码查看它。

可视化工作，但它需要大量的体力劳动。我手动调整了 json 文件，使连接具有以下形状：

```
{
    "source": 1,
    "target": 0,
    "value": 5
} 
```

需要对 d3 代码做什么才能使连接由节点的名称确定？输入将是：

```
{
    "source": "WesternAustralia",
    "target": "NewGuinea",
    "value": 5
} 
```

每当我尝试时，我都会收到以下错误：

```
Uncaught TypeError: Cannot call method 'push' of undefined 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T17:39:22.197

D3 文档解释了链接的工作原理：

[https://github.com/mbostock/d3/wiki/Force-Layout#wiki-links](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-links)

简而言之，链接数组可以包含 和 的索引`source`，`target`它们被重新映射到来自 的对象`nodes`，或者它们包含对`nodes`自身对象的引用。您需要重新映射您的链接`source`和`target`从`nodes`.

假设您的`source`和`target`属性使用上面第二个示例中所示的名称，您可以将以下代码段添加到`d3.json`回调的开头以进行重新映射：

```
 var nodeMap = {};
    graph.nodes.forEach(function(x) { nodeMap[x.name] = x; });
    graph.links = graph.links.map(function(x) {
      return {
        source: nodeMap[x.source],
        target: nodeMap[x.target],
        value: x.value
      };
    }); 
```

# javascript - $.browser.msie 不再适用于 jQuery 1.9。替代品在哪里？

> ID：14629861
> 
> 赞同：0
> 
> 时间：2013-01-31T15:58:03.663
> 
> 标签：javascript, jquery

> **可能重复：**
> [$.browser 的替代品是什么](https://stackoverflow.com/questions/9645803/whats-the-replacement-for-browser)

我依靠 jQuery 已弃用的`$.browser`功能为某些浏览器应用怪异修复。例子：

```
if ($.browser.msie && $.browser.version < 9) { 
```

这个功能在 jQuery 1.9 中被[删除](http://jquery.com/upgrade-guide/1.9/)了，所以我正在寻找一个替代方案。jQuery 建议使用[Modernizr](http://modernizr.com/)进行特征检测，但该插件似乎没有涵盖我需要的功能。此功能的（非）官方替代品是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:02:17.487

该`jQuery.browser()`方法自 jQuery 1.3 以来已被弃用，并在 1.9 中被删除

来自 jQuery API 文档：

> `$.browser`与其使用检测当前用户代理并根据正在运行的浏览器更改页面呈现，不如**使用特征检测**。为了使这个过程更简单，jQuery 执行了许多这样的测试并设置 `jQuery.support`对象的属性。

对于更高级的功能检测，您应该按照 @Pointy 的建议使用[Modernizr 。](http://modernizr.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:59:57.023

如果您导入 Modernizr，您可以使用以下内容测试 IE 版本：

```
if ($('body').is('.lt-ie9 *')) {
  // IE8, 7, 6 ...
} 
```

*编辑*——哎呀，我修好了；`$(document)`不起作用，我现在不记得为什么。

Modernizr 还具有许多更具体的特征检测能力，并且它是可配置的，因此您只能获得所需的检测。它无法检测到一切；布局错误之类的东西很难自动检测到。

# django - mptt TreeNodeChoiceField 已过滤

> ID：14629863
> 
> 赞同：0
> 
> 时间：2013-01-31T15:58:20.423
> 
> 标签：django, mptt

我开始使用 django。在我的项目中，我使用的是 MPTT。

我有一个相当简单的模型。

*   类别：（树）
*   Product1：类别的引用和外键。

我将根添加到类别模型中，只是为了简化对某一特定产品的基本类别的搜索

模型.py

```
class Category(MPTTModel):
    name = models.CharField(max_length=200)
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')

    @property
    def root(self):
      return self.get_root().name

class Product1(models.Model):
    ref = models.CharField(max_length=200, blank=True) #YVX2311
    category = TreeForeignKey(Category) 
```

管理员.py

```
admin.site.register(Category, MPTTModelAdmin)
admin.site.register(Product) 
```

我想要的是修改管理表单，以便能够说出类似的话。

> models.ForeignKey(Category, limit_choices_to = {root : 'Some Category for products1'})

当然这是不可能的，但它确实说明了我想要的。

我希望能够过滤 TreeChoiseField 以仅基于模型上的属性（在本例中为根）显示一些分支。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:31:50.680

经过一番折腾，我找到了解决办法。我认为这不是最好的方法，但据我所知，它有效。

我重载了 mptt TreeNodeChoiceField 并复制了 TreeForeignKeyFiltered

在产品中，我将外键更改为

> 类别 = TreeForeignKeyFiltered（类别，根 = 'MotherBoard'）

我将 root 关键字添加到 TreeForeingKeyFiltered

```
class TreeForeignKeyFiltered(models.ForeignKey):
    """
    Extends the foreign key, but uses mptt's ``TreeNodeChoiceField`` as
    the default form field.

    This is useful if you are creating models that need automatically
    generated ModelForms to use the correct widgets.
    """

    def __init__(self, *args, **kwargs):
        self._root = kwargs.pop('root', None)
        super(TreeForeignKeyFiltered, self).__init__(*args, **kwargs)

    def formfield(self, **kwargs):
        """
        Use MPTT's ``TreeNodeChoiceField``
        """
        kwargs.setdefault('root', self._root)
        kwargs.setdefault('form_class', TreeNodeChoiceFieldFiltered)
        return super(TreeForeignKeyFiltered, self).formfield(**kwargs) 
```

最后我将 TreeNodeChoiceFieldFiltered 添加为

```
class TreeNodeChoiceFieldFiltered(TreeNodeChoiceField):
    def __init__(self, queryset, *args, **kwargs):
        _root = kwargs.pop('root', None)

        if _root is not None:
            pid = None
            for i in queryset:
                if i.root.name == _root:
                    pid = i.tree_id
                    break

            if pid is not None:
                queryset = queryset.filter(tree_id = pid) 

        super(TreeNodeChoiceFieldFiltered, self).__init__(queryset, *args, **kwargs) 
```

现在我可以将关键字 root 传递给将过滤管理表单中的可能性的外键。

同样，我不知道这是否是最好的方法。当然，它可以更清洁......

# java - 返回短哈希的双向编码函数

> ID：14629864
> 
> 赞同：-1
> 
> 时间：2013-01-31T15:58:28.197
> 
> 标签：java, php, math, encoding, character-encoding

我们正在为我们的网站构建 URL 缩短功能。

我们目前提出的内容：

*   我们获取一个 URL ( [http://www.google.com](http://www.google.com) ) 并对其进行 sha1 处理，最终得到一个 40 个字符的哈希 (738ddf35b3a85a7a6ba7b232bd3d5f1e4d284ad1)。
*   我们获取 sha1 哈希并将其编码为 base62（基本上是 AZ、az、0-9）并最终得到一个 28 个字符的哈希（jNMYchEoche67ro1k5gsCcHfDzmR），我们可以将其解码回原始 sha1。

我们使用 sha1 的原因是确保用户无法从当前/过去的 URL 中猜测下一个 URL。

我们使用 base62 的原因是为了使 URL 对用户有效且可读。

现在，将附加到我们的域 ( [http://www.google.com/r/jNMYchEoche67ro1k5gsCcHfDzmRis](http://www.google.com/r/jNMYchEoche67ro1k5gsCcHfDzmRis) ) 的 28 个字符的“短 URL”有点太长了，尤其是考虑到 Twitter 的字符限制时。

我们目前正在考虑将 sha1 减少大约 20 个字符，这将产生一个 14 个字符的短 url，但如果再减少，我们担心我们会很快遇到冲突。

我们还考虑过将[大数字（或字符串）压缩为小值](https://stackoverflow.com/questions/1355100/compressing-big-number-or-string-to-small-value/1355701#1355701)，但这需要我们将 28 或 14 个字符的散列分成 2 部分并对这些部分进行排序，我们不知道如何从那里返回原始散列。

有人知道我们能做什么吗？我们更喜欢不依赖数据库来构建 URL 的解决方案，但如果需要数据库，请记住我们仅限于 Redis / MongoDB（这意味着没有自动增量整数字段）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:18:38.460

我不确定我是否了解您的所有要求，但这就是我的想法。

减少 sha1 似乎是正确的方法。

如果您在数据库中“注册”每个短 URL，则可以通过尝试在发生冲突时分配备用短 URL 来避免冲突（如果在您的数据库中已经找到哈希，则说明发生了冲突）。

它会像这样工作：

1.  尝试分配一个新的哈希，尽可能多地削减 sha1，我们有 HASH1 作为结果
2.  检查 DB 中是否有冲突，没有冲突，在 DB 中注册 HASH1 并完成
3.  如果发生冲突，尝试分配一个新的哈希，例如通过将 sha1 减少一个字符（导致更长的哈希），我们有 HASH2 作为结果
4.  检查碰撞..（步骤 2）等等

每次您想查找正确的长 URL 以获取哈希值时，您当然必须咨询您的数据库。我想这就是你现在已经在做的事情，因为 sha1 是不可逆转的。

您最初应该将 sha1 削减多远？我会尽可能多地说，只要您满足您的要求，即很难猜测下一个 url。我会说只留下 5 个字节的 sha1（即 40 位）将很难猜测..（如果您的数据库中有 100 万个短 URL，它仍然是百万分之一的猜测）

# javascript - 在 JavaScript 中调用“超类”构造函数

> ID：14629867
> 
> 赞同：10
> 
> 时间：2013-01-31T15:58:40.080
> 
> 标签：javascript, inheritance, polymorphism

我刚接触 JavaScript，我对它面向对象的行为感到有点困惑。我只是想用 , 成员创建一个类`Point2D`，`x`并用一个有 ,成员的类来扩展`y`它。我试图实现的行为类似于，让我们在 C# 中说：`Point3D``x``y``z`

```
class Point2D
{ 
   int x, y;
   public Point2D(int x, int y) { this.x = x; this.y = y; }
}
class Point3D : Point2D
{
    int z;
    public Point3D(int x, int y, int z) : base(x, y) { this.z = z; }
} 
```

我读了很多东西，但我似乎并没有真正找到我想要的东西。到目前为止，这是我所做的：

```
function Point2D(x, y) { this.x = x; this.y = y; }
Point2D.prototype.constructor = Point2D;
function Point3D(x, y, z) { Point2D.prototype.constructor.call(this); this.z = z; }
Point3D.prototype = new A(); // see latter explanation
Point3D.prototype.constructor = B;
var p = new Point3D(10, 20, 30); 
```

这显然是错误的。

现在，我知道我应该做类似的事情，`Point3D.prototype = new A(x, y)`但我不想创建一个带有*固定* `x`、`y`坐标和变量的原型`z`。它一定很简单，但我只是不明白，我似乎无法调用超类构造函数或使其行为正常。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T16:07:55.990

JavaScript 的原型继承提供了几种不同的灵活方式来执行您正在寻找的多态构造函数。在您的特定示例中，您想要这样的东西：

```
function Point2D(x, y) {
  this.x = x;
  this.y = y;
}

function Point3D(x, y, z) {
  Point2D.call(this, x, y);
  this.z = z;
} 
```

在这里明确设置`constructor`on the`prototype`并不是绝对必要的。（只有在“一次”创建原型时才真正需要——例如，使用对象。）

对于面向对象的 JavaScript 的详细讨论，我推荐 Nicholas Zakas 的*JavaScript 中的面向对象编程原理（电子书）或在他的另一本书《**面向 Web 开发人员的专业 JavaScript 》*中对原型和继承的讨论。

# xml - 使用变量访问 XELement

> ID：14629869
> 
> 赞同：0
> 
> 时间：2013-01-31T15:58:49.153
> 
> 标签：xml, vb.net, linq-to-xml

我想从 XPath 切换到 LINQ 到 XML

我的 XPath 代码如下所示：

```
s_veraenderterknoten = e.Node.Text
xn_Nodeveraendern = m_oxmldoc.SelectSingleNode("//" & s_veraenderterknoten & "") 
```

我如何使用 LINQ to XML 做到这一点？

我试过这种方式

```
dim xn_Nodeveraendern as XElement = m_oxmldoc("bla").(s_veraenderterknoten) 
```

但这不起作用

----- 扩展信息：xml 示例：XML 信息：

```
<Node ID="01|37b36d32-f11f-4b00-ae34-fcf63fb7f6a2" Status="1" Index="1">
  <Bez Spra="ENG">test1 eng</Bez>
  <Bez Spra="DEU">test2 eng</Bez>
  <Files>
    <File Link="01\097C06E9EE4841E5B31811CFA91732B0_1.XML" FileTyp="FG" Index="0" Export_SeqID="01" sub="01\097C06E9EE4841E5B31811CFA91732B0_1.XML" XBAP="1">
      <Bez Spra="DEU">Scorecard test1 1</Bez>
      <Bez Spra="ENG">Scorecard test2 1</Bez>
    </File>
    <File Link="01\37B36D32F11F4B00AE34FCF63FB7F6A2.XLSX" FileTyp="FI" Index="1" Export_SeqID="01" sub="01\37B36D32F11F4B00AE34FCF63FB7F6A2.XLSX" XBAP="0">
      <Bez Spra="DEU">A -C test1</Bez>
      <Bez Spra="ENG">A-C test2</Bez>
    </File>
  </Files>
</Node>
<Node ID="01|4eeca9d3-379d-40f5-868c-9aad1a9ed327" Status="1" Index="2">
  <Bez Spra="ENG">Production test 1</Bez>
  <Bez Spra="DEU">Produktion test 2</Bez>
  <Files>
    <File Link="01\4B9A6942C90F4FFC9804C63F792E0938.XLSX" FileTyp="FI" Index="0" Export_SeqID="01" sub="01\4B9A6942C90F4FFC9804C63F792E0938.XLSX" XBAP="0">
      <Bez Spra="DEU">Kennzahlen test 1</Bez>
      <Bez Spra="ENG">Key test 2</Bez>
    </File>
  </Files>
</Node> 
```

用例：用户在gridview 中查看信息，现在他可以选择任何XML 节点：“e.Node.Text”包含有关所选节点的信息。现在我想在我的 XML 中选择节点来编辑/添加新信息等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:32:14.207

我找到了解决方案。

我不知道这是否是最好的方法，但它似乎适用于这段代码：

```
xn_Nodeveraendern = From var In m_oxmldoc.Descendants Where var.Name = s_veraenderterknoten 
```

# jquery - 在mvc中下载文件时显示进度条

> ID：14629871
> 
> 赞同：0
> 
> 时间：2013-01-31T15:58:56.867
> 
> 标签：jquery, asp.net-mvc

我有一个模型弹出窗口，其中包含可供下载的 pdf 文件列表。我想在下载过程中显示每个 pdf 文件的进度条。我正在开发 mvc 4 项目并通过 jQuery 打开模型弹出窗口。怎么可能？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:10:40.130

下载进度条与上传类似。您将需要一个不使用缓冲响应的自定义处理程序。它应该执行写入和刷新，并在静态变量（通常是带有下载密钥的集合）中维护输出状态。支持基于非会话的 Web 服务来检查下载状态（发送的总字节数/字节数）。现在客户端 javascript 发出下载请求（针对 iframe 或新窗口）传递下载密钥，然后开始轮询服务器以获取状态。使用状态它可以更新进度条。

# mysql - 如何将数据推送到 MySql 表行中的多行？

> ID：14629878
> 
> 赞同：1
> 
> 时间：2013-01-31T15:59:10.063
> 
> 标签：mysql, formatting

我有一个包含用户评论的表格。其中一个字段很长，我想将它显示在多行上，以保持表格的格式良好。

例如，我想更改：

```
 'This user was very helpful and friendly and I will definitely be using him again.' 
```

至：

```
 'This user is very helpful and friendly and
     I will definitely be using him again.' 
```

我已经四处搜索，许多查询涉及将元素拆分为许多变量，而我希望将我的保留为一个，只需将其设为两行即可。

提前谢谢了

# java - 存储应用程序设置而不是使用首选项

> ID：14629883
> 
> 赞同：0
> 
> 时间：2013-01-31T15:59:29.460
> 
> 标签：java, android, xstream

在桌面应用程序中，通常用于存储这样的应用程序配置

```
public class ApplicationConfiguration
{
    public int speed;
    public boolean soundEnabled;
    public Map<Country, String> watchlistNames = new EnumMap<Country, String>(Country.class);
    public List<BrokingFirm> brokingFirms = new ArrayList<BrokingFirm>();
} 
```

我使用[xstream](http://xstream.codehaus.org/)将它存储在 XML 中，因为它们可以很好地处理`List`,`Map`等其他数据结构。即使对于自己的自定义类，如`Country`, `BrokingFirm`, ... xstream 也能很好地处理它们。大多数时候，我们不需要为自定义类提供显式的序列化代码，只要自定义类中没有花哨的数据结构即可。**xstream 几乎为我们完成了所有艰苦的工作。**

但是，当谈到 Android 时，**我不确定是否有任何类似于 xstream 的好选择**？[Preferences](http://developer.android.com/reference/android/preference/Preference.html)似乎不能很好地处理集合类和自定义类？或者至少，需要相当多的自定义代码才能使其工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:07:41.167

android 中没有开箱即用的东西来存储您的设置，也`Shared Preferences`使用 XML。因此您可以创建自己的类解析器/序列化器并将其存储为字符串，然后随时反序列化。

# vb.net - vb.net 通过面板控件将图像分配给图片框

> ID：14629890
> 
> 赞同：2
> 
> 时间：2013-01-31T15:59:41.417
> 
> 标签：vb.net, image, panel, picturebox

我正在用 VB.NET 编写一个纸牌游戏程序。我遇到了一个问题。Computer_Flow 在设计窗口上手动声明为 System.Windows.Forms.Panel。我以编程方式创建了一个这样的图片框：

```
Dim P As PictureBox = New PictureBox  
P.Size = New Point(Cards_Width, Cards_Height)  
P.SizeMode = PictureBoxSizeMode.StretchImage  
P.Image = Image.FromFile(Images_Folder_Path & "Back.png")   
P.Tag = Deck(DI)    
P.Margin = New Padding(1)  
Computers_Hand(DI) = Deck(DI)  
Computer_Flow.Controls.Add(P) 
```

稍后我想更改那个 PictureBox 图像。我试图改变它：

```
Computer_Flow.Controls(i).image = Image.FromFile(Images_Folder_Path & "Back.png") 
```

但我收到一条错误消息：“图像”不是 System.Windows.Forms.Control 的成员。

谁能帮我解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:15:10.110

您正在访问一个`Control`不包含`Image`成员的基类的列表。

您需要将其类型转换为`PictureBox`：

```
Dim pb As PictureBox = TryCast(Computer_Flow.Controls(i), PictureBox)

If Not pb Is Nothing Then
     pb.image = Image.FromFile(Images_Folder_Path & "Back.png")
End If 
```

这样 VB 就会知道它真的不仅仅是 a`Control`而是一个`PictureBox`, 和一个`Image`成员。我建议添加`TryCast`，以防万一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:32:40.097

你必须`cast`这样`control`做`picture box`才能得到你的结果。试试这个，

```
CType(Computer_Flow.Controls(i),PictureBox).image=Image.FromFile(Images_Folder_Path & "Back.png") 
```

## [类型](http://msdn.microsoft.com/en-us/library/4x2877xb%28v=vs.71%29.aspx)

***编辑：***

`invalidCastException`您可以像这样有效地轻松避免这种情况，

```
If TypeOf Computer_Flow.Controls(i) Is PictureBox then

CType(Computer_Flow.Controls(i),PictureBox).image=Image.FromFile(Images_Folder_Path & "Back.png")

End If 
```

## [类型](http://msdn.microsoft.com/en-us/library/0ec5kw18.aspx)

# jquery-ui - twitter 引导模式在 rails3 布局中不起作用？

> ID：14629893
> 
> 赞同：1
> 
> 时间：2013-01-31T15:59:53.653
> 
> 标签：jquery-ui, twitter-bootstrap, ruby-on-rails-3.2, modal-dialog

我有一个 twitter 引导模式对话框。我在这里使用了这个例子：

[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

这本身就很好用。如果我将它添加到我的一个视图的 index.html.erb 之类的 Rails 视图中，效果很好。虽然如果我将相同的东西添加到我的布局（特别是我的导航）中，以便这个模式可以在应用程序的任何视图上出现，但它工作时，它永远不会“淡入”它总是在一个变暗的屏幕后面。我正在拔头发，试图弄清楚这是为什么。我可以从字面上获取模态 div，将其放入视图中，并且它工作正常，如果它在那个布局中。没有骰子。我不确定我错过了什么，或者这只是 twitter 引导带模式中的错误还是什么？其他人有这个问题吗？我是否缺少要添加到模态类的内容？

# javascript - Javascript变量范围（？）

> ID：14629897
> 
> 赞同：1
> 
> 时间：2013-01-31T16:00:05.803
> 
> 标签：javascript, scope

我的老板要求我在我们正在开发的网站的几个页面中添加一些 Javascript。我是一个完全的 Javascript 菜鸟（我本质上是一个 PHP 编码器），但我已经学习和使用 Javascript 两天了，直到现在，一切都进行得很顺利。

现在我遇到了一个问题。我认为它与变量作用域有关，并且我*认为*我理解变量作用域，但我正在为这个非常（可能）非常简单的任务而苦苦挣扎。如果我有更多的时间来学习如何使用 JS，我会在来找你们之前再试一试，但我需要在下周一之前找到一些可行的东西。快到了..

代码在下面，下面进一步解释。

```
var activeTopic;
$.post("test.php",
    {
        request:"getActiveSection",
        courseid:courseid
    },
    function (data, status) {
        if (data != "none") {
            activeTopic = data;
            displayActiveTopic();
        }
    });
alert(activeTopic); 
```

我正在使用 Jquery 的 POST 函数来调用 test.php。PHP 获取课程 ID 并返回当前活动的主题。PHP 代码返回正确的值。我知道这一点，因为如果我 alert(data);，则会显示正确的值。

但是，如果我 alert(activeTopic); 在函数之外，我注意到全局变量 activeTopic 没有改变。为什么？

在此先感谢您的帮助。当我有时间的时候，我会花更多的精力来学习 JS。到目前为止，这很有趣……与 PHP 非常不同，但仍然很有趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T16:02:09.283

这与范围无关，与时间有关。

1.  你声明一个变量`activeTopic`。
2.  你发送一个 HTTP (post)*请求*
3.  你提醒`activeTopic`

稍后，**当**HTTP*响应*到达时，会为 分配一个值`activeTopic`。

您需要处理**当前**为`activeTopic`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T16:02:44.490

$.post 是一个异步函数。因此，当调用 alert() 时，帖子仍在运行。将警报放入您的回调函数中，该函数将在 post 调用完成时调用。

# ruby-on-rails-3 - Rails 3.2 链渲染器来渲染 .css.erb.scss 视图

> ID：14629898
> 
> 赞同：3
> 
> 时间：2013-01-31T16:00:07.583
> 
> 标签：ruby-on-rails-3, erb, sass

我希望能够有一个调用视图文件`my.css.erb.scss`，在其中`ERB`处理然后`SCSS`编译。

例如这个文件：

```
h1 { color: <%= 'red' %>; } 
```

会导致：

```
h1 { color: red; } 
```

目前我发现唯一可行的解​​决方案是有点软糖，我不喜欢它（并且在规范中证明很难通过这种方法渲染）：

`lib/renders.rb`：

```
ActionController.add_renderer :css do |template,options|
    string = render_to_string template, options
    css = Sass::Engine.new(string, :syntax => :scss).render
    self.content_type ||= Mime::CSS
    self.response_body = css
end 
```

然后在控制器中我需要这样做：

```
respond_to do |format|
    format.css { render :css => params[:action] }
end 
```

我尝试通过`ActionView::Template::Handler`模块方法使用`.call`方法添加注册渲染器，但当时我无法获得`ERB`渲染。

# wcf - 通过 WCF 流式传输的大视频流/下载不完整，没有错误

> ID：14629901
> 
> 赞同：1
> 
> 时间：2013-01-31T16:00:14.993
> 
> 标签：wcf, video, download, streaming

我目前正在修复一个基于 WCF 的服务器，该服务器能够为客户端提供大型（数 GB）mpeg 视频文件。

客户端应保存视频并在下载时查看。缓冲服务失败，因为视频已完全加载到内存中。

当我尝试使用 wget.exe 或 Web 浏览器获取它时，它只加载一部分（大约 600 到 800 MB），然后在客户端和服务器端都没有错误地停止。

在 Internet Explorer 中打开视频流时，底部没有出现时间滑块，并且 HTTP 响应的 header 中没有 content-length。

HTTP 响应在标头中不包含 Content-Length，尽管它已在代码中设置（见下文）。

有谁知道如何解决这个问题，或者另一种方法？

服务的合约接口：

```
[ServiceContract(Namespace = "http://www.blah.com/MyFunnyVideos")]
public interface IMyFunnyVideosService
{
    [OperationContract(Name = "GetVideo")]
    [WebGet(UriTemplate = "LORESVIDEO/{videoId}", ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]
    Stream GetVideo(string videoId);    
} 
```

执行：

```
[ServiceBehavior(Namespace = "http://www.blah.com/MyFunnyVideos", InstanceContextMode = InstanceContextMode.PerCall)]
public class MyFunnyVideosService : IMyFunnyVideosService
{
    // ...
    Stream IMyFunnyVideosService.GetVideo(string videoIdString)
    {
        Logger.LogMethod();

        try
        {
            FileStream fstream = GetVideoFileStream(int.Parse(videoIdString));
            fstream.OpenRead();

            var response = WebOperationContext.Current.OutgoingResponse;
            response.ContentLength = fstream.Length;

            return fstream;
    // ...
} 
```

Web 服务配置包含：

```
 <webHttpBinding>
    <binding name="restBinding" transferMode="StreamedResponse" maxBufferSize="21474836470" maxReceivedMessageSize="21474836470" />
  </webHttpBinding>

<behaviors>
  <endpointBehaviors>
    <behavior name="[omitted]">
      <webHttp />
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

HTTP 响应标头：

```
HTTP/1.1 200 OK
Transfer-Encoding: chunked
Content-Type: video/mpeg
Server: Microsoft-HTTPAPI/2.0
Date: Thu, 30 Jan 2013 15:52:04 GMT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:17:23.707

必须回答我自己的问题：

这只是一个超时。webHttpBinding 中的默认 sendTimeout 为 1 分钟，然后传输停止而没有任何错误。

所以，我只需要在 webHttpBinding 中设置 sendTimeout="00:10:00" 10 分钟超时。

# java - OpenGL 在 Android 2.3.7(CyanogenMod-7) 上绑定空白纹理，而在其他 Android 版本上绑定实际图像

> ID：14629902
> 
> 赞同：2
> 
> 时间：2013-01-31T16:00:16.363
> 
> 标签：java, android, opengl-es

绑定代码：

```
gl.glBindTexture (GL10.GL_TEXTURE_2D, id);

gl.glTexParameterf (GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
gl.glTexParameterf (GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

gl.glTexParameterf (GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
gl.glTexParameterf (GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_CLAMP_TO_EDGE);

gl.glTexEnvf (GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_REPLACE);

GLUtils.texImage2D (GL10.GL_TEXTURE_2D, 0, bitmaps.get (resource), 0); 
```

在 Android 2.3.3 和 Android 4.xx 上：

![画面不错](../Images/ba399e7d1310bbd2cdd803d00391e331.png)

在 Android 2.3.7 上，我有：

![屏幕不好](../Images/1a8972800782c92f290e10e20eceb099.png)

附加信息：我的纹理宽度和高度不是 2 的幂。纹理位于 drawable-nodpi 文件夹中。正在拉伸纹理以适应不同的屏幕尺寸第一个屏幕截图是从屏幕尺寸为 854x480 的设备截取的，第二个屏幕尺寸为 800x480。

*   设备运行 CyanogenMod-7。

**我的第一个嫌疑人是 gl.glTexParameterf （GL10.GL_TEXTURE_2D，设置，**但我不是专家。我尝试了一些替代方案并没有太大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:55:12.900

对于 Android 上的 OpenGLES，您需要保持安全，因为许多供应商不使用非两种纹理的幂。您可以离线调整所有纹理的大小，也可以在加载期间调整它们的大小。查看此类以获取有关如何轻松调整两个纹理的非幂的更多信息：[https ://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/core/BitmapTexture .java](https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/core/BitmapTexture.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:01:05.820

坏消息我尝试使用 2 值 (1024x1024) 的幂来设置纹理宽度和高度，它起作用了：

![在此处输入图像描述](../Images/5c7a130b9a6b87c4a4b7a92e9ea41060.png)

原因是这个设备，因为很多设备不支持 npot 纹理。

因此，我认为如果提供的纹理是 npot 尺寸的解决方案，最好在加载时动态调整它们的大小。

# vb.net - 通过强类型 DataSet 的 TableAdapter 迭代

> ID：14629903
> 
> 赞同：0
> 
> 时间：2013-01-31T16:00:23.497
> 
> 标签：vb.net, iteration, strongly-typed-dataset, tableadapter

我们想使用 For-Next 循环逐行遍历 TableAdapter，并从强类型 DataSet 中提取每行中的列值。

TableAdapter 是在 Visual Studio 数据集设计器中创建的。以下名称已用于数据库对象。

```
DataSet Name:      DataSetSchedules
DataTable Name:    DataTableSchedules
TableAdapter Name: DataTableDataAdapterSchedules 
```

这是我开始的编码：

```
Dim strClassName As String = ""
Dim objAadapter As New DataSetSchedulesTableAdapters.DataTableTableAdapterSchedules
Dim objDataTable As DataSetSchedulesTableAdapters.DataTableTableAdapterSchedules

<I need a way to fill the table with data from> = objAadapter.GetDataByAll(TextBoxSearch)

For Each row As System.Data.DataRow In objDataTable
    strClassName = row.ClassName
Next 
```

请提供我们需要的缺失编码来提供帮助，因为我尝试使用：

```
Dim objDataTable As DataTableSchedules = objAadapter.GetDataByAll(TextBoxSearch) 
```

并显示此错误：

```
Error 1 Type 'DataTableSchedules' is not defined. 
```

我意识到我可以设置命令对象和 DataReader，但更喜欢使用已经存在的对象。这个已经让我们困了好几天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:12:53.440

如果您键入 DataSetSchedulesTableAdapters.DataTableTableAdapterSchedules 是数据检索部分，您还将拥有一个名为 DataSetSchedules 的类，该类将具有保存您检索的数据以及强类型数据表和数据行的类结构。

```
Dim strClassName As String = ""
Dim objAadapter As New Knowledge_Academy.DataSetSchedulesTableAdapters.DataTableTableAdapterSchedules
Dim objDataTable As Knowledge_Academy.DataSetSchedules.DataSetSchedulesDataTable
Dim objDataRow As Knowledge_Academy.DataSetSchedules.DataSetSchedulesRow

objDataTable = objAadapter.GetDataByAll(TextBoxSearch)

For Each objDataRow In objDataTable.Rows
    strClassName = objDataRow.ClassName
Next 
```

我对此有些猜测，但应该非常接近。

# javascript - 输入文件 onChange IE

> ID：14629905
> 
> 赞同：-1
> 
> 时间：2013-01-31T16:00:25.757
> 
> 标签：javascript, internet-explorer, file-upload

我有下一个适用于 chrome 和 firefox 的代码，但是 IE 发送“未定义”消息。

```
<input type="file" name="image" onchange="inputFileChange(this);"/>

function inputFileChange(el) {
    console.log($(el).context.files);
} 
```

这是 Firefox 和 chrome 中 console.log 的结果。

```
FileList
    0: File
        lastModifiedDate: Thu Dec 20 2012 19:01:23 GMT-0600 (Hora estándar central (México))
        name: "izq02_a.jpg"
        size: 69767
        type: "image/jpeg" 
```

...这是 IE 中的结果

```
REGISTER: undefined 
```

上传前我需要图像的文件大小，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:06:30.690

IE10 对文件 API 有部分支持，但早期版本没有。

[这是关于该主题的一个老问题。](https://stackoverflow.com/questions/5055724/flash-alternative-for-filereader-html-5-api) 人们使用 Flash 解决方案作为一种解决方法（在 File API 存在之前，这也是唯一可能的方法）。

您可以使用[CanIUse](http://caniuse.com)来检查浏览器对各种事物的支持，以及[HTML5Please](http://html5please.us)。

# web-services - 监控 HTTP 请求和响应（无 Web 浏览器）

> ID：14629906
> 
> 赞同：0
> 
> 时间：2013-01-31T16:00:26.023
> 
> 标签：web-services, http, tomcat, response, monitoring

我正在创建 Web 服务以使 Android 应用程序与服务器通信。我在服务器上使用 Tomcat，在传输过程中使用 JAX RS 库在 Java 对象和 JSON 之间转换数据。我想要的是能够查看框架正在创建的实际 HTTP 请求和响应。

Web 浏览器（例如带有 Firebug 的 Firefox）不会这样做，因为我还需要检查 Android 应用程序生成的请求正文。

使用 Servlet API，我可以使用过滤器拦截并获取请求数据，但不能在框架编写响应之后（我相信）。

Wireshark 可能是一个解决方案（我现在正在尝试），但似乎有点过分。我需要担心正确过滤我的消息，但还没有弄清楚如何正确格式化我的 HTTP 消息（纯文本，不包含 hexa 内容）。

我想知道是否有更简单的方法可以从我的应用程序内部或从 tomcat 执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:49:09.543

尝试 Tomcat 的[AccessLogValve](http://tomcat.apache.org/tomcat-7.0-doc/config/valve.html#Access_Log_Valve)。您可以将其配置为记录传入的请求标头以及传出的响应标头。这是一个例子：

```
 <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
           prefix="localhost_headers_access_log." suffix=".txt"
           pattern="%t &quot;%r&quot; %s ||| %{Content-Length}o ||| %{User-Agent}i" /> 
```

注意 %{xxx}o 模式 - 这是响应标头。您可能希望将其用作 %{X-JSON}o。另请注意 %{xxx}i 模式 - 这是针对请求标头的。

将元素嵌套`<Valve/>`在 a或元素中`<Context/>`，您将全部设置好。`<Host/>``<Engine/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:17:17.167

我最终使用了带有以下过滤器的 Wireshark：

> http.content_type == "应用程序/json" || http.accept == "应用程序/json"

要解码内容，请右键单击包的 json 部分（“JavaScript Object Notation: application/json”）> Copy > Bytes > Printable text only

# c++ - DirectX 9 中的简单剪辑

> ID：14629910
> 
> 赞同：2
> 
> 时间：2013-01-31T16:00:32.387
> 
> 标签：c++, windows, directx-9

我对 Directx9 中的简单矩形剪辑感兴趣。 ![在此处输入图像描述](../Images/7bcd576ac34c7b2f8a52206366e131c5.png) 在上面的图片中，您可以看到我得到的。我想在不更改坐标和/或视口的情况下获得底部图片上的内容。意思是，我会画出整个圆圈，但 Directx9 只会剪辑它。

最好在窗口坐标中给出剪辑矩形，这样它就不会受到当前状态转换的影响。此外，它应该会影响从现在开始到窗口的所有内容，包括多边形、精灵、纹理、文本等。

有人可以建议如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:56:36.487

您正在描述一种剪式测试，它内置于 directx 设备中。

见[剪刀测试](http://msdn.microsoft.com/en-us/library/windows/desktop/bb147354%28v=vs.85%29.aspx)

更具体地说，您只需使用[SetScissorRect在屏幕坐标中设置矩形](http://msdn.microsoft.com/en-us/library/bb174457%28v=vs.85%29.aspx)

然后通过调用启用剪刀测试

```
device->SetRenderState( D3DRS_SCISSORTESTENABLE , TRUE ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:48:38.957

一个月前我有同样的问题，我在尝试找到一种剪裁方法后自己想出了一个解决方案，所以我不得不开发自己的......这应该可以工作：

```
void Clip(LPDIRECT3DDEVICE9 device, LPDIRECT3DSURFACE9 surface, LPDIRECT3DSURFACE9 backbuffer, int x, int y, int width, int height, int destX, int destY, int destWidth, int destHeight)
{
    RECT source;

    if (x >= destX && (x+width) <= (destX+destWidth))
    {
        source.left = 0;
        source.right = width;
    }
    else if ( (x >= destX && x <= (destX+destWidth)) && ((x+width) > (destX+destWidth)))
    {
        source.left = 0;
        source.right = width - ((x+width) - (destX+destWidth));
        source.right = abs(source.right);
    }
    else if (x < destX && (x+width) < (destX+destWidth))
    {
        source.left = abs(x);
        source.right = width;
    }
    else if ( (x < destX) && ((x+width) > (destX+destWidth)))
    {
        source.left = abs(x);
        source.right = source.left + (destWidth);
    }
    else
    {   
        return;
    }

    if (y >= destY && (y+height) <= (destY+destHeight))
    {
        source.top = 0;
        source.bottom = height;
    }
    else if ( (y >= destY && y <= (destY+destHeight)) && ((y+height) > (destY+destHeight)) )
    {
        source.top = 0;
        source.bottom = height - ((y+height) - (destY+destHeight));
        source.bottom = abs(source.bottom);
    }
    else if (y < destY && (y+height) > destY && (y+height) <= (destY+destHeight))
    {
        source.top = abs(y);
        source.bottom = height;
    }
    else if ( (y < destY) && ((y+height) > (destY+destHeight)))
    {
        source.top = abs(y);    
        source.bottom = source.top + (destHeight);
    }
    else
    {
        return;
    }

    RECT destination;

    if (x >= destX && (x+width) <= (destX+destWidth))
    {
        destination.left = x;
        destination.right = x + width;
    }
    else if ( (x >= destX && x <= (destX+destWidth)) && ((x+width) > (destX+destWidth)))
    {
        destination.left = x;
        destination.right = (destX+destWidth);
    }
    else if ( (x < destX) && ((x+width) < (destX+destWidth)) && ((x+width) >= x))
    {
        destination.left = destX;
        destination.right = width - abs(x);
    }
    else if ( (x < destX) && ((x+width) > (destX+destWidth)))
    {
        destination.left = destX;
        destination.right = (destX+destWidth);
    }
    else
    {   
        return;
    }

    if (y >= destY && (y+height) <= (destY+destHeight))
    {
        destination.top = y;
        destination.bottom = y + height;
    }
    else if ( (y >= destY && y <= (destY+destHeight)) && (y+height) > (destY+destHeight))
    {
        destination.top = y;
        destination.bottom = (destY+destHeight);
    }
    else if (y < destY && (y+height) > destY && (y+height) <= (destY+destHeight))
    {
        destination.top = destY;
        destination.bottom = height - abs(y);
    }
    else if ( (y < destY) && ((y+height) > (destY+destHeight)))
    {
        destination.top = destY;
        destination.bottom = (destY+destHeight);
    }
    else
    {
        return;
    }

    device->StretchRect(surface, &source, backbuffer, &destination, D3DTEXF_NONE);      

    DeleteObject(&source);
    DeleteObject(&destination);
}; 
```

# php - 创建手动推文框以添加到 wordpress 网站

> ID：14629916
> 
> 赞同：0
> 
> 时间：2013-01-31T16:00:47.647
> 
> 标签：php, wordpress, tweetr

我是 PHP 新手，我想在我的 wordoress 网站上添加一个推文框，如下所示：[http ://screencast.com/t/jdUw9LTXngOz](http://screencast.com/t/jdUw9LTXngOz)

如果有人能告诉我如何做到这一点，我如何将它添加到我现有的 wordpress 网站。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:53:06.923

我问了谷歌而不是你，得到了一些非常有趣的东西：

没有 PHP 的 Twitter 提要：[http ://www.themelab.com/2010/05/18/custom-twitter-widget-tutorial/](http://www.themelab.com/2010/05/18/custom-twitter-widget-tutorial/)

或从头开始真正的 WordPress twitter 小部件：http: [//theme.fm/2011/06/tutorial-creating-a-twitter-widget-for-wordpress-91/](http://theme.fm/2011/06/tutorial-creating-a-twitter-widget-for-wordpress-91/)

或者，如果您不想编写自己的插件，请使用[Plugin 目录中的任何可用插件](http://wordpress.org/extend/plugins/search.php?q=twitter%20widget)

# php - 使用 php 调用 wsdl 方法时出错

> ID：14629918
> 
> 赞同：1
> 
> 时间：2013-01-31T16:00:54.290
> 
> 标签：php, wsdl, lighttpd

我对 Akamai API 有疑问。

我使用这个系统 ( [http://www.wsdltophp.com/](http://www.wsdltophp.com/) ) 将 WSDL 转换为 PHP 中的对象。我这样做是因为我在手工操作时遇到问题。但问题依然存在：

WSDL 服务具有的一种方法是 deleteStreamEvent，它接收两个参数：streamId 和 eventName。所以电话是：

```
$soapClient->deleteStreamEvent(array ('streamId' => $id, 'eventName' => 'name')); 
```

但问题是它将这个 XML 发送到服务器：

```
<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="https://control.akamai.com/ArchiveManagementService.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:enc="http://www.w3.org/2003/05/soap-encoding">
    <env:Body>
        <ns1:deleteStreamEvent env:encodingStyle="http://www.w3.org/2003/05/soap-encoding">
            <streamId xsi:type="xsd:int">1</streamId>
            <eventName xsi:nil="true"/>
        </ns1:deleteStreamEvent>
    </env:Body>
</env:Envelope> 
```

所以，正如你所看到的，它总是将我发送的每个数字都更改为“1”。为什么会这样？这是我第一次看到这种奇怪的行为......

我正在使用带有 lighttpd 服务器的 PHP 5.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T08:30:44.713

您可以通过取消标记名为`Send An Array As Parameter`. 然后再次生成包，它会很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:11:51.077

我发现了问题...

在通话中：

```
self::getSoapClient ( )->deleteStreamEvent ( array ( 'streamId' => $_streamId, 'eventName' => $_eventName ) ) 
```

我必须将其更改为：

```
self::getSoapClient ( )->deleteStreamEvent ( $_streamId, $_eventName ) 
```

：DI希望这可以帮助其他人......

谢谢！

# javascript - 在不使用 attr 的情况下更改图像 src onClick

> ID：14629919
> 
> 赞同：0
> 
> 时间：2013-01-31T16:00:57.067
> 
> 标签：javascript

这段代码有问题吗？我正在尝试执行简单的操作，即在单击鼠标时更改名为“midimg”的 img 的 src。它不工作，我不知道为什么

```
<script type="javascript">
function buttonInCompany()
{
$('#desc').load('incompany.html');
document.images["midimg"].src="http://cageme.herokuapp.com/css/mrcage.jpg";
}

</script>

<div onClick="buttonInCompany()">Everything is cage's cage.<br><br></div>

<img name="midimg" src="http://3.bp.blogspot.com/-BdfyYy_Y0gY/UP_3y3F2RDI/AAAAAAAAC-Q/eHPCltO8bG8/s1600/TomEngelsnicolas+thing.jpg"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:06:43.277

看到您显然已经在使用 js 框架（我假设是 jQuery），为什么不以更合适的方式开始呢？

```
<script type="text/javascript">
function buttonInCompany()
{
  $('#desc').load('incompany.html');
  $('#midimg').attr("src","http://cageme.herokuapp.com/css/mrcage.jpg");
}
$(document).ready(function() {
  $("#someID").click(function() {
     buttonInCompany();
  });  
});
</script>

<div id='someID'>Everything is cage's cage.<br><br></div>

<img id="midimg" src="http://3.bp.blogspot.com/-BdfyYy_Y0gY/UP_3y3F2RDI/AAAAAAAAC-Q/eHPCltO8bG8/s1600/TomEngelsnicolas+thing.jpg"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:10:11.843

你需要 jQuery 行吗？我刚刚放弃了它，它[按预期工作](http://tinkerbin.com/qC427Q9B)。

```
function buttonInCompany()
{
    document.images["midimg"].src="http://cageme.herokuapp.com/css/mrcage.jpg";
} 
```

# mysql - MySQL 分区修剪始终包括不等式查询中的第一个分区

> ID：14629924
> 
> 赞同：2
> 
> 时间：2013-01-31T16:01:20.153
> 
> 标签：mysql, partitioning

我在 to_days(created_at) 上有一个按范围分区的数据库。

分区是每月一次（p1 - p50），最后是 pmax 总括。在下面的示例中，我希望只命中分区 p45。

当我进行解释分区时，请从 created_at > "2013-01-01 00:00:00" 和 NOW() 的单元中选择 *

我在分区列下列出了 p1,p45

这发生在 5.1 和 5.5 中

为什么优化器包含不等式检查的第一个分区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-17T22:42:05.350

您很久以前就问过这个问题，但我也遇到了这个问题并在这里找到了解决方法：

[http://datacharmer.blogspot.com/2010/05/two-quick-performance-tips-with-mysql.html](http://datacharmer.blogspot.com/2010/05/two-quick-performance-tips-with-mysql.html)

...基本上，您应该创建一个包含小于 (0) 的值的第一个分区，该分区始终为空。MySQL 查询优化器仍将包括第一个分区，但至少它不应该进行任何资源密集型扫描。

更新：这是我原始答案中链接的 URL 的简短摘要：

官方 MySQL bugtracker 承认此行为是一项功能：

错误描述：

无论 BETWEEN 子句中的范围如何，使用 TO_DAYS 函数按 RANGE 分区的表在修剪时始终包括表中的第一个分区。

回复：

这不是错误，因为 TO_DAYS() 为无效日期返回 NULL，它还需要扫描第一个分区（因为它包含所有 NULL 值）以查找范围。

...

一种性能变通方法是创建一个特定的分区来保存所有 NULL 值（如'... LESS THAN (0)'），这也将捕获所有错误日期。

# javascript - Javascript 变量电子邮件链接 - “收件人”字段为空白

> ID：14629926
> 
> 赞同：1
> 
> 时间：2013-01-31T16:01:27.783
> 
> 标签：javascript

我怎样才能做到这一点：

```
var newContactEmail = "abc@cc.com";
document.getElementById('contactEmail').innerHTML = '<a   href="mailto:"' + newContactEmail + '">' + newContactEmail + '</a>'; 
```

当我单击邮件链接时，它会打开，但“收件人”字段为空白。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T16:03:55.117

你把右双引号放得太早了。

```
var newContactEmail = "abc@cc.com";
document.getElementById('contactEmail').innerHTML = '<a href="mailto:' + newContactEmail + '">' + newContactEmail + '</a>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:04:30.263

而不是`href="mailto:"' + newContactEmail + '" '`try `href="mailto:' + newContactEmail + '" '`.. Else 它看起来像 href = "mailto:"someemail@a.com 。

# python - 有没有办法将我的 python 脚本嵌入到博客或网页中？

> ID：14629929
> 
> 赞同：0
> 
> 时间：2013-01-31T16:01:38.297
> 
> 标签：python, web, embed, blogs

让我先说我是一个初学者，并且一直在自学 Python，因为我对 bash 感到厌烦。

我一直在搜索谷歌，但真的什么都没找到。我只想让用户点击一个按钮，然后脚本执行它的功能。所以一种将我的脚本嵌入博客或其他东西的盒子中的方法，你点击一个按钮然后砰！你得到脚本的输出。

有没有看起来像这个网站的东西：http: [//www.learnpython.org/](http://www.learnpython.org/)

而您单击一个按钮并将脚本输出到一个窗口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:06:07.960

如果您希望运行相对简单的脚本，您可以尝试使用[Brython 之](http://brython.info/index_en.html)类的方法，它会在浏览器中使用 JavaScript 解释您的脚本。如果您正在寻找更复杂的服务器端脚本，您应该尝试查看 Python Web 框架之一，例如[Django](https://www.djangoproject.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:03:56.937

浏览器不直接理解 Python；他们只理解动态内容的 JavaScript。所以，你要么想学习 JavaScript，要么嵌入一个像 empythoned 这样的 Python 解释器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:26:38.890

在您提供的链接中，将发送一个发布请求`learnpythonjail.appspot.com`并收到一个包含输出的 json 响应。基本上，您可以通过将输入通过 post 发送到该站点来执行相同的操作，并且可以通过解析响应 json 来显示响应。希望这可以帮助。:)

# asp.net-mvc - DbContext DbSet 中的数据与数据库不同

> ID：14629931
> 
> 赞同：3
> 
> 时间：2013-01-31T16:01:59.123
> 
> 标签：asp.net-mvc, entity-framework, dbcontext

我有一个名为 ProjectContext 的 DbContext，它有一个`DbSet`名为 Cart，我将值传递到：

```
public class ShoppingCart
{
    ProjectContext _db = new ProjectContext();

    public void AddToCart(Video toAdd, Customer CurUser)
    {
        var CartItem = new Cart
        {
            CustomerID = CurUser.CustomerID,
            Item = toAdd.Title,
            Count = 1,
            Price = 1.00m
        };
        _db.Carts.Add(CartItem);
        _db.SaveChanges();

    }

}

public class Cart
{
    [Key, Required, DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int CustomerID { get; set; }
    public string Item { get; set; }
    public int Count { get; set; }
    public decimal Price { get; set; }
} 
```

基本上一个客户可以有许多不同的购物车记录`CustomerID`。实际数据库中的一切都很好，并且添加了所有正确的记录。问题是实际上`DbContext`我为每个客户插入的第一条数据记录会重复。因此，当我在 View 中查看模型时，每个客户的第一条记录都会重复，但实际上有很多记录`CustomerID`。

我可以在调试时看到 Cart 中的记录实际上在 中重复`DbSet`，尽管它们在实际数据库中没有。

我从来没有听说过这样的事情并且真的不知道问题是什么，所以任何帮助将不胜感激。提前致谢。

当我在 SQL Server 中查询我的购物车表时，我看到：

```
5   shutter island  2   1.00
5   billy madison   2   1.00
5   superbad        1   1.00 
```

当我在视图中查看时，我看到了这个：

```
Item           Count     Price 
shutter island     2     1.00  
shutter island     2     1.00  
shutter island     2     1.00 
```

我将模型传递给视图的代码：

```
public ActionResult Index()
{
   IEnumerable model =(from r in _cartdb.Carts
            where r.CustomerID == WebSecurity.CurrentUserId
            select r);

   return View(model);
} 
```

视图中的代码：

```
@model IEnumerable<MVCVideoProject.Models.Cart>
<table>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Item)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Count)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Price)
        </td>
        <td>
            @Html.ActionLink("Remove Item", "RemoveItem", new { custID = item.CustomerID, toRemove = item.Item })
        </td>
    </tr>
}
</table> 
```

我在调试时可以看到`DbSet`我使用的被调用的购物车有重复记录，所以我认为视图不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:52:53.080

您的`Cart`实体必须具有*唯一的*主键。`CustomerID`不是唯一的，并且 EF 总是采用它可以找到的第一个特定值的记录。所以我要介绍一个`CartId`领域。

# c# - 将域对象映射到结果集而不是表

> ID：14629932
> 
> 赞同：0
> 
> 时间：2013-01-31T16:02:06.170
> 
> 标签：c#, sql, sql-server, stored-procedures

我正在开发一个使用现有数据库的应用程序，该数据库只能通过存储过程进行访问。大多数这些 SP 从多个表返回列。

我们有一个数据访问层，它从我们的域对象层返回类型的对象。但是，由于 SP 从多个表返回列，我不确定我应该如何构造我的域对象，因为它们中的大多数不会“自然地”映射到从 SP 返回的数据。

示例：存储过程从“Employee”表和“Manager”表返回列：
-EmployeeId
-FirstName
-LastName
-ManagerEmployeeId
-ManagerFirstName
-ManagerLastName

我是否应该创建一个包含与上述列完全匹配的属性的域对象“EmployeeWithManager”？

我应该创建某种包含 Employee 对象和 Manager 对象的“数据访问对象”吗？

不幸的是，不能使用 ORM、参数化查询或更改存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:05:39.720

理解。这就是我要做的，仍然创建与您的域匹配的域对象。

原因是

1.  更容易理解
2.  假设您使用一个 SP 创建 EmployeeWithManager，如果您有另一个 SP（例如 Employee with Car），您将需要创建 EmployeeWithCar 对象，列表继续，将无法管理，您将有大量工作尝试在两者之间进行转换他们

我的做法，

*   创建两个域对象，Employee 和 Manager（你的 Manager 甚至可以继承 Employee）
*   在 Employee 中，创建对 Manager 的引用/关系，例如

> ```
> Class Employee{
> 
>     String Id;
>     String FirstName;
>     ...
> 
>     Manager EmployeeManager;
> 
> } 
> ```

*   创建您的数据访问层以使用您的 SP，例如

> ```
>  Class EmployeeDAL{
> 
>         Employee GetEmployeeWithManager(string EmployeeId){
>             //user data reader to populate your Employee object and fill it with Manager
>             Manager m = New Manager(); //fill Manager from SP
>             Employee e = New Employee(); //fill Employee from SP
> 
>             e.EmployeeManager = m;
>             return e;
>         }
>     } 
> ```

*   在您的业务逻辑/用户界面中，

> ```
> Class EmployeeController{
>      PopulateEmployee(string EmployeeId){
>           Employee e = EmployeeDAL.GetEmployeeWithManager(EmployeeId);
>           Databind(e);
>           'you can also access your manager from e.EmployeeManager
>      } 
> ```
> 
> }

# html - 将 div 固定到右侧

> ID：14629936
> 
> 赞同：0
> 
> 时间：2013-01-31T16:02:10.743
> 
> 标签：html, css

[http://tinkerbin.com/OREvWmf6](http://tinkerbin.com/OREvWmf6)

我想要做的是确保我的标志保持在右侧......

所以链接会在左边换行。但相反，他们将徽标向下推。

需要顶部图像，底部是我得到的。 ![在此处输入图像描述](../Images/8cb05fc5e6b6b256fb244da79aaa56b9.png)

```
<div style="width: 100%; height: 75px; background:#B9C7D4" >
        Link 1
    Link2
    Link 3
          Link 1
    Link2
    Link 3
          Link 1
    Link2
    Link 3
          Link 1
    Link2
    Link 3
     <img height=75px style="float:right;" src="http://dogmatic69.com/files/portfolio/image/4f288818-c5a8-4872-a003-06376318cd71/stackoverflow-logo.png" alt=""/>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:04:43.340

把你的形象放在第一位：

```
<div style="width: 100%; height: 75px; background:#B9C7D4" >
     <img height=75px style="float:right;" src="http://dogmatic69.com/files/portfolio/image/4f288818-c5a8-4872-a003-06376318cd71/stackoverflow-logo.png" alt=""/>

        Link 1
    Link2
    Link 3
          Link 1
    Link2
    Link 3
          Link 1
    Link2
    Link 3
          Link 1
    Link2
    Link 3

</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:08:27.273

如果您以这种方式构造它，那将是最简单的：

```
<div class="wrapper clearfix">
    <div class="links"><!-- ul with links or whatever --></div>
    <div class="logo"><img /></div>
</div> 
```

搭配风格：

```
<style type="text/css">
.links { width: 250px; float: left;}
.logo  { width: 75px; float: right; }
.clearfix:before,
.clearfix:after {
    content:"";
    display:table;
 }
 .clearfix:after {
    clear:both;
 }
 /* For IE 6/7 (trigger hasLayout) */
 .clearfix {
    zoom:1;
 }
 </style> 
```

注意： clearfix 代码从[我可以使用哪些“clearfix”方法窃取？](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:05:07.370

```
<img height=75px style="float:right;position:absolute;top:0px;right:0px;" src="http://dogmatic69.com/files/portfolio/image/4f288818-c5a8-4872-a003-06376318cd71/stackoverflow-logo.png" alt=""/> 
```

# json - 骡子数据库查询到 JSON 输出嵌套不起作用？

> ID：14629940
> 
> 赞同：0
> 
> 时间：2013-01-31T16:02:21.137
> 
> 标签：json, mule

我是使用 Mule 的新手，并且在输出嵌套 Json 时遇到问题。我正在使用 mule 3.3 和 GUI 界面。我将数据库组件添加到我的流程中并运行一些简单的 SQL，包括“一对多”连接。在此之后，我添加了一个“Oject to Json”组件，问题是生成的 JSON 是扁平的，它没有嵌套“一对多”元素。例如我期望：

```
{
"firstName": "John",
"phoneNumber": [
    {
        "type": "home",
        "number": "212 555-1234"
    },
    {
        "type": "fax",
        "number": "646 555-4567"
    }
]
} 
```

我实际上得到：

```
{
 "firstName": "John",
 "type": "home",
 "number": "212 555-1234"
} 
```

任何人都可以给我任何关于我所缺少的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:15:52.013

*由于您还没有发布您的配置，因此很难准确地说出您在做什么。无论如何...*

选择查询返回用户数据的平面视图。如果要创建它的结构化表示，则必须在序列化为 JSON 之前创建一个转换器来执行此操作。

Alternatively, you can use an ORM to map your data to objects then serialize these objects to JSON.

# php - 在第 81 行对 vendor/behat/mink-extension/src/Behat/MinkExtension/Context/RawMinkContext.php 中的非对象调用成员函数 getSession()

> ID：14629942
> 
> 赞同：0
> 
> 时间：2013-01-31T16:02:33.567
> 
> 标签：php, behat, mink

尝试从命令行运行我的行为测试时出现此错误。

错误的完整输出如下所示：

```
$ behat                                       
Feature: View a list of current custom tariffs
    In order to provide custom call pricing to customers
    As a user of the Voxbeam Admin site
    I expect to be able to correctly administrate a users custom tariffs

  @sahi
  Scenario: Listing existing custom tariffs # features/custom_tariff_admin.feature:7
PHP Fatal error:  Call to a member function getSession() on a non-object in /Users/stuart/bin/vendor/behat/mink-extension/src/Behat/MinkExtension/Context/RawMinkContext.php on line 81
PHP Stack trace:
PHP   1\. {main}() /Users/stuart/bin/vendor/behat/behat/bin/behat:0
PHP   2\. Symfony\Component\Console\Application->run() /Users/stuart/bin/vendor/behat/behat/bin/behat:32
PHP   3\. Behat\Behat\Console\BehatApplication->doRun() /Users/stuart/bin/vendor/symfony/console/Symfony/Component/Console/Application.php:106
PHP   4\. Symfony\Component\Console\Application->doRun() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Console/BehatApplication.php:68
PHP   5\. Symfony\Component\Console\Command\Command->run() /Users/stuart/bin/vendor/symfony/console/Symfony/Component/Console/Application.php:193
PHP   6\. Behat\Behat\Console\Command\BehatCommand->execute() /Users/stuart/bin/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:240
PHP   7\. Behat\Behat\Console\Command\BehatCommand->runFeatures() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Console/Command/BehatCommand.php:128
PHP   8\. Behat\Gherkin\Node\AbstractNode->accept() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Console/Command/BehatCommand.php:150
PHP   9\. Behat\Behat\Tester\FeatureTester->visit() /Users/stuart/bin/vendor/behat/gherkin/src/Behat/Gherkin/Node/AbstractNode.php:42
PHP  10\. Behat\Gherkin\Node\AbstractNode->accept() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Tester/FeatureTester.php:88
PHP  11\. Behat\Behat\Tester\ScenarioTester->visit() /Users/stuart/bin/vendor/behat/gherkin/src/Behat/Gherkin/Node/AbstractNode.php:42
PHP  12\. Behat\Behat\Tester\ScenarioTester->visitStep() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Tester/ScenarioTester.php:87
PHP  13\. Behat\Gherkin\Node\AbstractNode->accept() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Tester/ScenarioTester.php:148
PHP  14\. Behat\Behat\Tester\StepTester->visit() /Users/stuart/bin/vendor/behat/gherkin/src/Behat/Gherkin/Node/AbstractNode.php:42
PHP  15\. Behat\Behat\Tester\StepTester->executeStep() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Tester/StepTester.php:95
PHP  16\. Behat\Behat\Tester\StepTester->executeStepDefinition() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Tester/StepTester.php:126
PHP  17\. Behat\Behat\Definition\Annotation\Definition->run() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Tester/StepTester.php:157
PHP  18\. call_user_func_array() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Definition/Annotation/Definition.php:155
PHP  19\. Behat\MinkExtension\Context\MinkContext->visit() /Users/stuart/bin/vendor/behat/behat/src/Behat/Behat/Definition/Annotation/Definition.php:155
PHP  20\. Behat\MinkExtension\Context\RawMinkContext->getSession() /Users/stuart/bin/vendor/behat/mink-extension/src/Behat/MinkExtension/Context/MinkContext.php:45 
```

我的 behat.yml 是：

```
# behat.yml
default:
    paths:
        features: features
        bootstrap: %behat.paths.features%/bootstrap
    extensions:
        Behat\MinkExtension\Extension:
            base_url:  'http://dev.example.com'
            goutte: ~
            sahi: ~

annotations:
  paths:
    features: features/annotations

closures:
  paths:
    features: features/closures 
```

我有一个非常简单的 FeatureContext：

```
<?php

use Behat\Behat\Context\ClosuredContextInterface,
    Behat\Behat\Context\BehatContext,
    Behat\Behat\Exception\PendingException,
    Behat\Behat\Context\Step;

use Behat\Gherkin\Node\PyStringNode,
    Behat\Gherkin\Node\TableNode;

use Behat\MinkExtension\Context\MinkContext;

//
// Require 3rd-party libraries here:
//
//   require_once 'PHPUnit/Autoload.php';
//   require_once 'PHPUnit/Framework/Assert/Functions.php';
//

/**
 * Features context.
 */
class FeatureContext extends MinkContext
{
    /**
     * @Given /^I am logged in as "([^"]*)" with password "([^"]*)"$/
     */
    public function iAmLoggedInAsWithPassword($userName, $password) 
    {
        return array(
            new Step\Given('I am on "/login"'),
            new Step\Given('I should see "fert"')
        );
    }

//
// Place your definition and hook methods here:
//
//    /**
//     * @Given /^I have done something with "([^"]*)"$/
//     */
//    public function iHaveDoneSomethingWith($argument)
//    {
//        doSomethingWith($argument);
//    }
//
} 
```

还有一个同样简单的功能：

```
Feature: Administer a customers custom tariffs
    In order to provide custom call pricing to customers
    As a user of the Admin site
    I expect to be able to correctly administrate a users custom tariffs

Scenario: Listing existing custom tariffs
    Given I am on "/"
    I should see "Fert" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T11:24:59.407

确保您的 behat.yml 文件位于正确的位置。它应该位于项目的根目录中，而不是任何子目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T15:11:15.400

如果 Stuart Grimshaw 的建议不起作用，可能是因为两个原因：

1.  您的 composer.json 配置不正确；获得使 Mink、Behat、Goutte、Selenium、Zombie 或 Symfony2.. 一起工作所需的 5 或 6 个不同模块的正确版本是很棘手的；所以请在这些扩展的每个 composer.json 中手动检查其他组件的所需版本；另外，尽量不要使用 mink-bundle，其所需依赖项的版本似乎很旧
2.  不要从你的 bundle 目录运行 bin\behat 命令（在 Windows 或 Linux 下）；否则找不到 .yml 配置文件（肯定有一些与相对路径相关的晦涩原因）。您应该从项目的根目录运行 bin\behat 命令（首先运行 cd 命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T06:14:19.500

我也遇到了类似的致命错误

```
PHP Fatal error:  Call to a member function getSession() on a non-object in /home/ahad/sites/symfony/vendor/behat/mink-extension/src/Behat/MinkExtension/Context/RawMinkContext.php on line 101 
```

我已经把我的答案放在这里[努力让 Mink 与 Behat 合作](https://stackoverflow.com/questions/10918475/struggling-to-get-mink-working-with-behat/29960269#29960269)

这解决了我的问题。

# c# - 定义本地端口名称

> ID：14629951
> 
> 赞同：0
> 
> 时间：2013-01-31T16:03:05.037
> 
> 标签：c#, wcf, port

是否可以使用 WCF 定义服务使用的本地端口名称？

我正在使用端口 8000 和 8001 处理两个 Windows 服务，我注意到我的一项服务使用的端口 8001 实际上在“RbService”中解析。那个怎么样？“RbService”是什么意思？

这是来自[CurrPorts](http://www.nirsoft.net/utils/cports.html)的视图：

![CurrPorts 视图](../Images/666d465bd7f863a38469ab814d4832a0.png)

我不明白这个“RbService”来自哪里，以及为什么我使用端口 8000 的服务没有本地端口名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:39:39.160

要在此处定义端口号和描述，您可以执行以下操作：

在记事本中打开文件`C:\Windows\System32\drivers\etc\services`并按以下格式添加所需的端口和服务名称

```
servicename portnumber # comments 
```

例子

```
pro5srv 1100/tcp # PRO/5 file service 
```

要为 WCF BaseURI 定义本地端口，可以在 host 下修改。

# php - PHP 如何将原始 cookie 解析为 $_COOKIE？

> ID：14629953
> 
> 赞同：9
> 
> 时间：2013-01-31T16:03:05.750
> 
> 标签：php, cookies, session-cookies

我对跨域 AJAX 请求有疑问。

此问题涉及三台服务器。我们可以称它们为**A1**、**A2**和**B**。

**A1**和**A2**运行相同的应用程序代码。它们是同一 Web 应用程序的两个暂存实例。**B**是另一个网络应用程序。

**我们需要执行从A** Web 应用程序到**B**应用程序的跨域 AJAX 请求。我们尝试启用 CORS，但很难让它在 IE <= 8 中令人满意地工作，所以现在我们使用的是 nginx 代理规则。因此流程是：浏览器 ajax 请求 -> **A1**或**A2** -> nginx 代理 -> **B**

**B**是有状态的，需要用户的会话 cookie 才能运行。

我们看到的是，这在使用服务器**A1**时可以正常工作，但是在使用服务器**A2**时，**B**无法提取 cookie。

我查看了来自**A1**和**A2**的请求的标头，它们是相同的。两者在标题中都有 cookie 行，都具有相同的来源，等等。

在**B**上，我们看到 $_COOKIE['session_key'] 在请求来自**A2时为空，但在请求来自****A1**时正确填写。

奇怪的是，它只是缺少从标头中的 cookie 中提取一个特定的 cookie 键，并且只有当请求来自**A2**时。它可以很好地解析来自**A2**的标头中的所有其他 cookie ，它只是由于某种原因无法解析用户的会话 cookie，但如果请求来自**A1**就可以了。

我已经使用了 tcpdump 并对其中的每一个进行了 pcaps 并对它们进行了比较，并且标题中的任何内容看起来都没有特别不同。

我发现了这个 Stack Overflow 问题，人们说这是因为他的 cookie 标头字符串太长：[What could cause cookie to not be set in $_COOKIE when it's in $_SERVER](https://stackoverflow.com/questions/6714659/what-could-cause-cookie-to-not-be-set-in-cookie-when-its-in-server)我不认为那太长，因为我的只有 249 个字符长，在成功和失败的情况下。

我正考虑从 $_SERVER 中提取 cookie 并手动解析它们，但这听起来很愚蠢，我更愿意找出根本问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:44:52.820

PHP在这里没有错。

我们使用的是 Kohana，它在初始化时运行了一些代码，以尝试为会话 cookie 添加额外的安全性。有问题的代码验证了服务器端会话中记录的 IP 地址与请求标头中发送的 IP 地址相匹配。

由于我们的网络配置，我在联系服务器 B 时总是收到一个外部 IP，在联系 A2 时收到一个内部 IP，在联系 A1 时收到一个外部 IP。

当 A2 将带有内部 IP 的请求转发给 B 时，它触发了 Kohana 的基于 IP 的 cookie 保护，因为 cookie 是使用我的外部 IP 创建的，但现在试图由我的内部 IP 使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:20:26.067

使用 IE<=8 时的一个问题是[P3P](http://www.w3.org/P3P/)。我发现将 P3P 标头放入接受 AJAX/JSON 请求的页面（您的实例中的服务器 B）将解决此问题：

```
header('P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"'); 
```

至于`server A2` 不向 发送`$_COOKIE`请求`server B`，我建议使用 将请求发送`_GET`到某种`init`页面`server B`。通过这种方式，它可以被处理并存储在`server B`. 然后对于必须存在此信息的所有剩余页面，您可以查看`server B`确定信息是否已发送，或连续将`_GET`数据发送到每个页面并将其与现有信息进行比较。提醒一下，应严格监控此信息，因为它更容易修改。

抱歉，我意识到这并不能解决问题，但可以提供替代解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:45:37.927

前段时间，我不得不做跨域ajax请求。显然，当我尝试使用 IE 将标头设置为“允许 x-domain ajax”时遇到了同样的问题（不记得确切的标头名称）。

我所做的就是在服务器的 ajax 之间使用 CURL。因此，通过这种方式，我的 ajax 脚本（用 PHP 编写）能够通过 JSON + CURL 通过服务器交换数据，通过 CURL POST 发送数据，并通过 CURL GET 检索数据，无论涉及哪些域。

请原谅，也许这不是您需要的答案，但是，IMO，这可以帮助寻找跨站点 ajax 的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T20:29:12.100

在服务器之间使用 GET；就这样。并建立一种方法来对 get 进行哈希处理，这样如果服务器无法完成请求，用户就不会看到拉取的实际 cookie 内容

# solr - xml 文件的 DIH（数据导入处理程序）在 Solr4 中不起作用

> ID：14629955
> 
> 赞同：1
> 
> 时间：2013-01-31T16:03:10.607
> 
> 标签：solr, dataimporthandler, dih, solr4

我已经在服务器上安装并配置了 Solr4 和 tomcat6。它工作得很好，但是当我尝试构建 DIH（数据导入处理程序）时，它给了我一个错误，我无法解决。

我将以下代码添加到我的 solrconfig.xml 文件中

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
<lst name="defaults">
  <str name="config">/path/to/data-config.xml</str>
</lst> 
```

我的 data-config.xml 文件如下所示

```
<dataConfig>
<dataSource type="FileDataSource" />
<document>
    <entity name="f" processor="FileListEntityProcessor" baseDir="/path/to/basedirectory/toxmlfiles/" fileName=".*xml" recursive="true" rootEntity="false" dataSource="null">
        <field column="plainText" name="text"/>
    </entity>
</document> 
```

当我点击 localhost:8080/solr/ 时我​​在浏览器上遇到 ![浏览器中的错误](../Images/d584b3be20cdb05e50d3115a37c873db.png) 的错误我的错误日志中的错误是

```
 SEVERE: Unable to create core: collection1
       org.apache.solr.common.SolrException: RequestHandler init failure
       at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:168)
       at org.apache.solr.core.SolrCore.<init>(SolrCore.java:657)
       at org.apache.solr.core.SolrCore.<init>(SolrCore.java:566)
       at org.apache.solr.core.CoreContainer.create(CoreContainer.java:850)
       at org.apache.solr.core.CoreContainer.load(CoreContainer.java:534)
       at org.apache.solr.core.CoreContainer.load(CoreContainer.java:356)
       at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:308)
       at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:107)
       at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
       at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
       at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
       at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3838)
       at org.apache.catalina.core.StandardContext.start(StandardContext.java:4488)
       at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)
       at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)
       at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)
       at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:637)
       at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:563)
       at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498)
       at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1277)
       at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321)
       at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
       at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
       at org.apache.catalina.core.StandardHost.start(StandardHost.java:722)
       at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
       at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
       at org.apache.catalina.core.StandardService.start(StandardService.java:516)
       at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
       at org.apache.catalina.startup.Catalina.start(Catalina.java:593)
       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
       at java.lang.reflect.Method.invoke(Method.java:616)
       at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
       at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
    Caused by: org.apache.solr.common.SolrException: Error loading class 'org.apache.solr.handler.dataimport.DataImportHandler'
       at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:436)
       at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:469)
       at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:540)
       at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:154)
    ... 34 more
    Caused by: java.lang.ClassNotFoundException: org.apache.solr.handler.dataimport.DataImportHandler
       at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
       at java.security.AccessController.doPrivileged(Native Method)
       at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
       at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
       at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:615)
       at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
       at java.lang.Class.forName0(Native Method)
       at java.lang.Class.forName(Class.java:264)
       at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:420)
    ... 37 more
    Jan 31, 2013 10:44:49 AM org.apache.solr.common.SolrException log
    SEVERE: null:org.apache.solr.common.SolrException: RequestHandler init failure
       at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:168)
       at org.apache.solr.core.SolrCore.<init>(SolrCore.java:657)
       at org.apache.solr.core.SolrCore.<init>(SolrCore.java:566)
       at org.apache.solr.core.CoreContainer.create(CoreContainer.java:850)
       at org.apache.solr.core.CoreContainer.load(CoreContainer.java:534) 
```

你能建议我如何解决这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T16:33:48.387

我在 solrconfig.xml 文件中添加了以下代码行

```
<lib dir="../../../contrib/dataimporthandler/lib/" regex=".*\.jar" />
<lib dir="../../../dist/" regex="apache-solr-dataimporthandler-\d.*\.jar" /> 
```

确保 dist 文件夹中的 apache-solr-dataimporthandler-4.0.jar 和 apache-solr-dataimporthandler-extras-4.0.jar 文件位于正确的路径中。

不要忘记重启tomcat服务器。

这对我有用。

# c++ - 引用可以在其生命周期内引用多个对象吗？

> ID：14629956
> 
> 赞同：2
> 
> 时间：2013-01-31T16:03:10.477
> 
> 标签：c++

据我所知，引用在其生命周期内只能引用一个对象。但是，下面的代码可以正确编译。虽然我已经更改了引用的对象。输出是：1。它如何正确编译？

谢谢石然

```
class A{
 private:
int a;
 public:
A(int a):a(a){}
virtual ~A(){}
virtual void f()const {cout<<a<<endl;}
};
class B: public A{
 private:
int b;
 public:
B(int Ina,int Inb):A(Ina),b(Inb){}
virtual void f()const {cout<<b<<endl;}
};

int main(){
    B b(1,2);
    A a(5);
    A& ref=a;
    ref=b;
    ref.f();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:06:37.807

正确的思考方式是引用*是*它引用的对象。因此，如果您这样做：

```
A& ref = a;
ref = b; 
```

因为`ref` *is* `a`，你正在做的是：

```
a = b; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:04:44.127

引用在其整个生命周期中仅引用一个引用。
您的代码所做的是将新值分配给原始参考对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:04:51.117

您的主要功能相当于：

```
B b(1,2);
A a(5);
a = b;
a.f(); 
```

分配给引用等同于分配给原始对象。

# javascript - 如何改进这个长 angularjs 控制器

> ID：14629961
> 
> 赞同：2
> 
> 时间：2013-01-31T16:03:32.507
> 
> 标签：javascript, coffeescript, angularjs

我发现我的 angularjs 控制器很长，而且有点失控。这是我的代码示例（使用咖啡脚本）：

[https://gist.github.com/4683847](https://gist.github.com/4683847)

（由于它有 139 行，我认为最好将其粘贴到 gist 中）

这些方法基本上是关于 CRUD 的，因为那里有一棵树、一张表和 3 种表格。

你能给我一些关于改进它的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:05:40.847

尽可能多地提取到服务。这是保持控制器精简的最佳实践。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T16:35:47.883

我建议你看一下相应的html。首先根据它们影响的 html 块对控制器代码进行分组。

然后将它们提取到一个单独的控制器中，并将该控制器添加到这些块的相应根元素中。

# c++ - Libpqxx 抱怨缺少引用

> ID：14629962
> 
> 赞同：3
> 
> 时间：2013-01-31T16:03:33.770
> 
> 标签：c++, postgresql, libpq, libpqxx

所以我有以下问题：

```
g++ -std=c++0x -O3 -I/usr/include/scip main.cpp locations/locationreader.cpp locations/locationassigner.cpp scheduler.o optimizer.o dbmanager.o scheduleData.o exam.o  -o main -L/usr/lib -lscip  -lreadline  -lgmp -lz -llpispx  -lsoplex  -lobjscip -lnlpi.cppad -lscipopt -lzimpl -lpqxx -lpq  -pthread
/usr/lib/../lib64/libpqxx.so: undefined reference to `PQescapeIdentifier'
collect2: error: ld returned 1 exit status
make: *** [main] Error 1 
```

而且我无法弄清楚为什么它找不到参考，因为我安装了 libpq 并且它就在 /usr/lib64 中

```
$ ls | grep pq
libpq.so
libpq.so.5
libpq.so.5.2
libpqxx-4.0.so
libpqxx.so 
```

所以如果我能得到任何帮助，那就太好了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T16:45:56.677

`PQescapeIdentifier`出现在 PostgreSQL 9.0 中，对应`libpq.so.5.3`

9.0[发行说明](http://www.postgresql.org/docs/9.0/static/release-9-0.html)有这个条目：

> 添加 libpq 函数 PQescapeLiteral() 和 PQescapeIdentifier() (Robert Haas)

您似乎使用 PostgreSQL-8.4 ( `libpq.so.5.2`) 中的客户端库，这就是它缺少此功能的原因。

# mysql - mysql：从另一个查询中获取表名

> ID：14629964
> 
> 赞同：0
> 
> 时间：2013-01-31T16:03:34.670
> 
> 标签：mysql, join, concat

有一个类似的问题，但我不能让它工作。我有 2 个数据库。db 1 有用户名

例如

```
userdb.usertable.username 
```

db 2 为每个被调用的用户提供配置表

```
"their username" + _Config 
```

我正在尝试运行一个查询，该查询将遍历特定类型的所有用户，获取他们的用户名，然后从他们自己的配置表中提取一个值。

这很接近，但仅适用于 1 个用户。

```
SET @username:=(SELECT userdb.usertable.username FROM userdb.usertable WHERE version="free" );

SET @table:=concat(@username,"_Config");

SET @sql_text =concat("SELECT * FROM configdb.",@table);

PREPARE stmt FROM @sql_text;

EXECUTE stmt; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:10:56.373

*首先：* **立即摆脱这个数据库设计。**

99% 的情况下，一个应用程序不需要两个数据库。

在继续之前，您可能也想看看[这个。](http://en.wikipedia.org/wiki/Database_normalization)

*其次*，它应该是这样的：

```
Users_Table
id,username,(more user detail fields),config_value_1,config_value_2 
```

将所有用户数据保存在一个表中，除非用户可以为配置参数设置多个值。然后你需要一个像这样的连接表

```
Users_Table
id,username,other fields

Config_Value_1_Table
value_id,name

Config_Value_1_Users
user_id,value_id 
```

一个常见的现实世界示例可能如下所示：

```
users
id,first_name,last_name,username,password_hash,password_salt,email,is_admin,is_banned,is_active

locations
id,location_name

user_locations
user_id,location_id 
```

那么您所要做的就是编写一个非常简单的查询来获取所有用户数据

# css - 如何让 IE8 使用 CSS 生成的内容显示我的自定义图标字体

> ID：14629965
> 
> 赞同：2
> 
> 时间：2013-01-31T16:03:49.100
> 
> 标签：css, internet-explorer, fonts

我已经建立了一个测试页来说明我的问题：[http ://www.heliopsis.net/var/fontcustom/](http://www.heliopsis.net/var/fontcustom/)

我在很棒的[http://fontcustom.com/](http://fontcustom.com/)的帮助下创建了一个自定义字体，但在 IE8 中正确显示它时遇到问题。

似乎 IE8 可以将此字体用于 HTML 实体，但不能用于 CSS 生成的内容。更令人费解的是，它有时会设法显示字形，但在页面重新加载时会丢失它们......

有人知道这里发生了什么吗？

这是我在 IE8 上看到的屏幕截图：

![IE8 中缺少字体的屏幕截图](../Images/517d3feeafde5038cfcf098961ff5c35.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:16:48.810

一般来说，生成的内容在 IE8 中的效果不如它应该（什么？）。

我在您的测试页面上玩了一会儿，您可能想检查一下您是否没有被转入 IE8 的 IE7 兼容模式或（甚至更糟）Quirks 模式。这两个似乎都破坏了自定义字体，但是当 IE8 作为 IE8 运行时，我认为它非常好。

为了确保 IE 始终提供最新的功能（如果可能），请添加

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

元到您的标题。此外，使用 IE8 的开发工具确保在您看到问题时正在加载您的字体。

# vb.net - linq vb.net 改变值

> ID：14629966
> 
> 赞同：1
> 
> 时间：2013-01-31T16:03:52.433
> 
> 标签：vb.net, linq, list

如何更改对象列表中 1 个（或多个）指定项的 1 个属性

```
Class Item
    Private _Id As Integer
    Private _Value As Boolean 'can be string, int , .....

    Public Property Id() As Integer
        Get
            Return _Id
        End Get
        Set(ByVal value As Integer)
            _Id = value
        End Set
    End Property
    Public Property Value() As Boolean
        Get
            Return _Value
        End Get
        Set(ByVal value As Boolean)
            _Value = value
        End Set
    End Property

    Public Sub New(ByVal id As Integer, ByVal value As Boolean)
        Me.Id = id
        Me.Value = value
    End Sub       
End Class 
```

...

```
Dim lst As New List(Of Item)
lst.Add(New Item(1, True))
lst.Add(New Item(2, True))
lst.Add(New Item(3, True))

lst = from l in lst select l ' and change the value of the element 2 to FALSE 
```

结果

之前的列表

```
Item
[_Id = 1] 
[_Value = True] 

Item
[_Id = 2] 
[_Value = True] 

Item
[_Id = 3] 
[_Value = True] 
```

之后列出

```
Item
[_Id = 1] 
[_Value = True] 

Item
[_Id = 2] 
[_Value = False] 

Item
[_Id = 3] 
[_Value = True] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:06:12.343

Linq 用于*查询*而不是*更新*。要更新使用传统循环和/或索引器：

```
l(2).Value = false 
```

或者，如果您想使用 Linq 来确定要更改*的*对象，只需循环查询结果：

```
Dim query = From l In lst Where l.Id = 2 Select l
For Each l In query
   l.Value = false
Next l 
```

或者，因为您只期望一项：

```
Dim query = From l In lst Where l.Id = 2 Select l
query.Single().Value = False 
```

然后，您的原始列表将具有更新的项目，因为列表和查询包含对项目的*引用*。

但是，如果您想要一个`Item`值略有不同的 NEW 列表，那么这是可能的：

```
Dim query = From l In lst _
            Select New Item With { _ 
               ID = l.ID, _
               Value = IIf(l.ID = 2, False, l.Value) _
            } 
```

但请注意，这会创建 NEW `Item`s，它不会修改`Item`存储在原始列表中的现有 s。

# c# - 如何在 asp.net 中将 asp:label 转换为 asp:texbox？

> ID：14629967
> 
> 赞同：0
> 
> 时间：2013-01-31T16:03:52.347
> 
> 标签：c#, asp.net

如果`page_load`我正在检查授权是否`Admin`存在。

如果他们不在`Admin`角色中，那么我必须将可用`asp:label`控件更改`asp:textbox`为 UI 中的控件。

1.  是否可以将控件动态转换/替换为`asp:label`控件`asp:textbox`？

2.  如果可以进行转换/替换，那么我可以在后面的代码中而不是使用 jQuery 来做吗？

```
<asp:Label ID="label1" runat="server" Text="Data">&nbsp;</asp:Label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:21:43.513

Alternatively, you could mark the TextBox control read-only for non-admins and style the textbox accordingly:

```
if !User.IsInRole("Administrators")
{
    TextBox1.ReadOnly = true;
    TextBox1.BackColor = System.Drawing.ColorTranslator.FromHtml("#FFFFFF");  
    TextBox1.BorderWidth = Unit.Pixel(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:12:23.890

您可以使用[MultiView](http://www.codeproject.com/Articles/13165/A-Simple-ASP-NET-Tab-Control-Using-the-MultiView-c)并`ASP.NET`拥有两个`views`. 你将有一个`label`在一个`view`和`textbox`另一个。

```
if (user == "admin")
  multiView1.SetActiveView(adminView)
else
  multiView1.SetActiveView(userView) 
```

另一种解决方案是使用`label`and`textbox`并让页面相应地隐藏它们。

# android - Android 市场是否接受只是嵌入式网站（HTML/PHP 等）的应用程序？

> ID：14629974
> 
> 赞同：0
> 
> 时间：2013-01-31T16:04:07.700
> 
> 标签：android, google-play

我想为 Android/iPhone 开发一个“本机应用程序”。

为了节省开发时间，我想使用在线 HTML/PHP 应用程序来提供应用程序的功能和 UI。在 Android 中，可以使用 WebView 实现嵌入式浏览器。

我的应用程序不会使用任何本机 API 特定功能或设备（例如相机、地理位置）。

是否允许营销仅嵌入移动友好网站的应用程序 Google Play？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:06:10.520

当然，为什么不呢？除了明显的恶意外，没有特定的过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:04:53.223

首先，这不是一个“原生”应用程序。这将是一个跨平台的应用程序。

没有“Android Marketplace”——您是指 Google Play 商店吗？如果是这样，是的，只要您遵守他们的指导方针，他们将接受几乎任何应用程序。例如，您不能通过 Google 自己的应用内购买以外的任何方式销售应用内内容。

也就是说，据我所知，Android 没有可靠的 php 实现。绝大多数跨平台应用程序都使用 HTML/javascript。如此之多，以至于有很多现成的可用框架，例如 PhoneGap、Sencha Touch 等。

# netbeans - Netbeans 中的 Xdebug：不在“web root”父文件夹中的文件内的断点处停止

> ID：14629975
> 
> 赞同：2
> 
> 时间：2013-01-31T16:04:10.053
> 
> 标签：netbeans, xdebug

我有一个带有如下目录树的 netbeans 项目：

```
<source folder>
|
|---> gui <web root folder>
|      |
|      L---> datos.php
|
L---> index.php 
```

datos.php 将工作目录更改为 ..（源文件夹）并包含 index.php，如下所示：

```
chdir('..');
require 'index.php'; 
```

**如果我在 datos.php 中放置一个断点，调试器会正确地中断它，但是在 index.php 中放置一个断点时它会忽略它。**

奇怪的是 6 个月前我遇到了同样的问题，我能够解决它。现在我不知道它为什么停止工作以及我当时做了什么来修复它。

更多信息：

xdebug 日志显示以下命令用于设置断点：

```
breakpoint_set -i 315 -t line -s enabled -f file:///Users/tomasgirardi/NetBeansProjects/datamed/index.php -n 51
breakpoint_set -i 316 -t line -s enabled -f file:///Users/tomasgirardi/NetBeansProjects/datamed/gui/datos.php -n 39 
```

在这两种情况下，xdebug 都会响应 state="enabled"

如果我手动调试，我可以使用以下命令设置断点，**它可以工作**：

```
breakpoint_set -i 315 -t line -s enabled -f file:///../index.php -n 51 
```

但我不知道如何让 netbeans 使用相同的**file:///../index.php**参数而不是**file:///Users/tomasgirardi/NetBeansProjects/datamed/index.php**或任何参数发出 breakpoint_set 命令其他方式我可以使这项工作。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T20:29:09.510

你总是可以尝试使用 xdebug_break();

例如 ：

```
<?php
    for ( $i=1, $j=0; $i<10; $i++) { 
        xdebug_break();
        echo "<br>Line $i";   // will stop here
    }
?> 
```

将在以下行中添加断点。

希望对您有所帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:28:12.960

断点再次起作用。我不知道为什么他们以前没有工作，但现在他们工作了。我也不记得在 xdebug 或 Netbeans 中做过任何更改。

xdebug.log 向我显示与以前相同的内容，但现在它在设置的断点处停止：

```
<- breakpoint_set -i 4 -t line -s enabled -f file:///Users/tomasgirardi/NetBeansProjects/datamed/index.php -n 51
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="breakpoint_set" transaction_id="4" state="enabled" id="14290001"></response>

<- run -i 5
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="run" transaction_id="5" status="break" reason="ok"><xdebug:message filename="file:///Users/tomasgirardi/NetBeansProjects/datamed/index.php" lineno="51"></xdebug:message></response> 
```

但是，如果有人知道为什么会发生这种情况，那么分享它可能会有所帮助：也许我或其他人将来能够避免遇到类似的麻烦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-17T00:40:13.147

此问题更具体针对将远程服务器用于其 Web 应用程序的人。

我有同样的问题。[Xdebug 忽略断点](https://stackoverflow.com/questions/3422433/xdebug-ignores-breakpoints)确实帮助了我，但是我给出了更具体的 netbeans 解决方案，但本质是相同的，无论您使用哪种 IDE。只需将本地项目路径映射到远程服务器路径即可。

我的环境是 WINDOWS 7，网站托管在 UBUNTU VM 上。我正在使用 Windows 7 中的 NETBEANS 并设置了一个远程项目。

我的 xdebug 日志

```
<- breakpoint_set -i 4 -t line -s enabled -f file:///C:/Users/ali/Documents/NetBeansProjects/test.com.au/cgen/src/Acme/TestBundle/Controller/CreateController.php -n 39 
```

->

真正的问题是 netbeans **[C:/Users/ali/Documents/NetBeansProjects/test.com.au]** 中的项目路径和网络服务器上的项目路径。**/home/ali/sites/test.com.au**

**修复：**在 Netbeans 中单击您的项目 > 属性 > 运行配置 > 高级 > 只需放置适当的服务器路径和等效的项目路径。它会正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-11T14:06:47.193

通过注释 xdebug.extended_info = 0 解决了同样的问题。也可以将其切换为 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-27T03:43:48.627

为了让它再次工作，我更改`xdebug.remote_host=127.0.0.1`为`xdebug.remote_host=localhost`php.ini

下面是我对 xdebuga 的配置

```
xdebug.remote_enable=1
        xdebug.remote_port=9001
        xdebug.remote_handler=dbgp
        xdebug.remote_host=localhost
        xdebug.remote_autostart = 1
         xdebug.show_local_vars = 1
        xdebug.profiler_enable = 1
        output_buffering=off 
        xdebug.idekey=netbeans-xdebug 
```

# matlab - Matlab如何将文件名从1_x_10_a.jpg更改为01_x_010_a.jpg

> ID：14629977
> 
> 赞同：1
> 
> 时间：2013-01-31T16:04:13.977
> 
> 标签：matlab, file-rename

我真的有很多文件命名为：

```
1_x_0_a.jpg, 1_x_0_b.jpg, 1_x_5_a.jpg ... 15_x_160_a.jpg, 15_x_160_b.jpg, 15_x_165_a.jpg 
```

我想更改文件名如下：

```
01_x_000_a.jpg, 01_x_000_b.jpg, 01_x_005_a.jpg 
```

因此，在 x 之前应该是 2 位数字，在 x 之后应该是 3 位数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:04:29.350

以下代码应该适用于相对较新版本的 MATLAB。

```
fileStruct = dir;
files = {fileStruct.name};
for oldFile = files
    oldFile = oldFile{1};  //Takes string out of cell

    // Embedding the sprintf in a regexprep only works in certain versions
    newFile = regexprep(oldFile, '^(\d*)', '${sprintf(''%02d'', str2num($1))}');
    newFile = regexprep(newFile, '(?<=_)(\d*)(?=_)', '${sprintf(''%03d'', str2num($1))}');

    movefile(oldFile, newFile);
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:15:02.150

以下是一些可以帮助您的步骤：

1.  用于`dir`获取文件名列表。
2.  用于`regexprep`用带前导零的起始数字替换起始数字
3.  用于`regexprep`用最多两个零的起始数字替换中间数字
4.  用于`rename`更改文件名

请注意，我没有尝试过，rename 的文档有点奇怪，因为它指的是 ftp 站点，但它可能只是工作。如果它不起作用，我想您可以复制所有文件，然后删除旧文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:24:47.877

如果你在 Unix 或 Linux 机器上，你可以试试这个小**shell 脚本**：

在终端中，转到您拥有文件的目录。

您可以先尝试一下，而无需真正重命名文件，只需将 替换为`mv`以`echo`查看它是否按预期工作。

```
for file in *; do
  mv $file $(echo $file | awk -F '_' '{ printf "%02d_%s_%003d_%s\n", $1, $2, $3, $4 }')
done 
```

或作为一个班轮

```
for file in *; do mv $file $(echo $file | awk -F '_' '{ printf "%02d_%s_%003d_%s\n", $1, $2, $3, $4 }'); done 
```

对于文件

```
1_x_0_a.jpg
1_x_0_b.jpg
1_x_5_a.jpg
15_x_160_a.jpg
15_x_160_b.jpg
15_x_165_a.jpg 
```

我得到结果

```
01_x_000_a.jpg
01_x_000_b.jpg
01_x_005_a.jpg
15_x_160_a.jpg
15_x_160_b.jpg
15_x_165_a.jpg 
```

# asp.net-mvc - ASP.NET MVC 网站加载到 iframe 速度

> ID：14629980
> 
> 赞同：0
> 
> 时间：2013-01-31T16:04:21.340
> 
> 标签：asp.net-mvc, iframe

我正在开发一个 MVC ASP.NET 网站，该网站由外部网站加载到 iframe 中。

是否有任何特定技术可用于构建 ASP.NET MVC 网站以确保它尽可能快地加载到 iframe 中？

谢谢！

（注意：我对外部网站的构建方式*没有发言权）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:09:53.163

就下载而言，浏览器会以相同的方式对待您的页面，无论它是否是 iframed，所以“不”没有您可以使用的特定于 IFrame 的特殊技术。您需要注意的是 SSL 不匹配，以及从父页面到可能遇到 XSS 问题的页面的集成。一般来说，只需使用您可用的标准优化技术，一切都应该没问题。

# c++ - 任意大小的凸多边形之间的碰撞检测算法

> ID：14629983
> 
> 赞同：6
> 
> 时间：2013-01-31T16:04:33.503
> 
> 标签：c++, algorithm, 2d, collision-detection

我正在研究小行星克隆。一切都是 2D 的，并且是用 C++ 编写的。

对于小行星，我正在生成随机的 N 边多边形。我保证它们是凸的。然后我旋转它们，给它们一个旋转速度，让它们飞过太空。一切正常，而且非常漂亮。

对于碰撞，我使用的是我自己想到的算法。这可能是一个坏主意，如果迫在眉睫，我可能会放弃整个事情并在互联网上找到一个教程。

我已经编写并实现了所有内容，并且碰撞检测工作正常......大部分时间。当屏幕上有明显的碰撞时它会随机失败，有时当没有任何东西接触时会显示碰撞。要么我在某个地方搞砸了我的实现，要么我的算法很糟糕。由于我的实现的大小/范围（在几个源文件中），我不想打扰你，只是想让有人检查我的算法实际上是否合理。到那时，我可以进行一次大型的错误搜索。

## 算法：

对于每个小行星，我有一个函数可以输出绘制小行星时每个顶点的位置。对于每对相邻的顶点，我为它们所在的线生成公式， `y=mx+b`格式。然后我从我的一个飞船顶点开始，测试那个点看它是否在小行星内部。我首先插入该点的 X 坐标，并将输出与实际 Y 值进行比较。这告诉我该点是在线上方还是下方。然后我对小行星的中心做同样的事情，以确定线的哪一半被认为是小行星的“内部”。然后我对每对顶点重复。如果我发现我的点与小行星中心不在同一侧的线，我知道没有碰撞，并退出该点的检测。由于我的船上有 3 个点，所以我必须测试下一个点。如果所有 3 个点都提前退出，那么船上的任何点都没有碰撞，我们就完成了。

我发现这个算法的两个问题是：

1.  它不适用于凹多边形，并且
2.  它在斜率未定义的边缘情况下存在问题。

我已经确保所有多边形都是凸的，并且已经编写了代码来处理未定义的斜率问题（`NAN`如果我们除以，则双精度应该返回`0`，所以很容易测试）。

那么，这应该工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T16:33:27.063

这个问题的标准解决方案是使用分离轴定理（SAT）。给定两个凸多边形 A 和 B，算法基本上是这样的：

```
for each normal N of the edges of A and B
    intervalA = [min, max] of projecting A on N
    intervalB = [min, max] of projecting B on N
    if intervalA doesn't overlap intervalB
        return did not collide
return collided 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:39:28.793

我做了类似于计算多边形交点的事情，即查找顶点是否位于给定多边形内。

您的算法是合理的，并且确实不适用于凹多边形。您选择的线表示在接近无穷大的斜率处也存在问题。我选择使用几个向量，一个用于线方向，一个用于线上的参考点。从这些，我可以很容易地推导出线的参数化方程，并以各种方式使用它来找到与其他形状的交点。

```
P = S +  t * D 
```

给定上述关系，线的任何点 P 都可以通过其在线上的坐标 t 来表征，其中 S 是参考点，D 是方向向量。

由于方向方向，这种表示可以让您轻松定义平面的哪些部分是正部分和负部分（即在线上方和下方）。现在，平面的任何区域都可以定义为多条线的负子平面或正子平面的交点。因此，您的“多边形内的点”算法可以稍微更改以使用该表示，并增加所有方向指向顺时针方向的约束，并测试该点是否位于所有线的负子平面中（所以你不需要多边形的中心了）。

我使用的线计算点的边的公式如下：

```
(xs - xp) * yd - (ys - yp) * xd 
```

当点 P 接近 S 时，这里会出现斜率问题。

可以使用边缘顶点计算该表示，但为了获得正确的子平面，您必须以连续顺序保持多边形中的顶点。

对于凹多边形，问题有点复杂：简单地说，您必须测试该点是否位于两个连续的凸边之间。这可以通过检查投影到边缘上的点的坐标来实现，并确保它位于`0`和之间`length(edge)`（假设方向是标准化的）。请注意，归结为检查点是否属于多边形内的三角形。

# c++ - 从 std::basic_string 取消继承

> ID：14629985
> 
> 赞同：1
> 
> 时间：2013-01-31T16:04:34.893
> 
> 标签：c++, inheritance, stl, stdstring

基本上，我有一个使用自定义实用程序类的大型项目，该类`c_string`继承自`std::basic_string<char>`. 出于多种原因，我想编辑这个类，以便

1.  它并非源自`std::basic_string<char>`
2.  我不必重新实现所有功能
3.  我不必触摸使用的每个文件`c_string`

所以我想改变：

```
class c_string : public std::basic_string<char>
{
public:
    typedef std::basic_string<char> Base;

    c_string() : Base() {}
} 
```

到：

```
class c_string
{

...

public:

    ...

    c_string() {...}
} 
```

所以，我想知道是否有人有一个好的策略来做出这种改变而影响最小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:13:26.990

如果您的类添加了自定义功能（您的项目需要） ，那么您就不走运了`std::string`：您将不得不封装`std::string`（并实现所有方法以转发到`std::string`实现）或继承自`std::string`（继承自在`std::string`一般的）。

如果您的课程没有在 上添加额外的功能`std::string`，则替换`class c_string { ... }`为`typedef std::string c_string;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:01:20.197

您还可以做另一件事，那就是将公共继承更改为私有继承。这样做，你会得到一堆编译错误，因为字符串的所有成员函数现在对你的类的客户端都是私有的。然后，您可以有选择地公开这些：

```
class my_string: std::string {
public:
    typedef std::string base; // convenience
    using base::const_iterator;
    using base::begin;
    using base::end;
}; 
```

您应该理解私有派生不是“my_string 是 std::string”，而是“my_string 是根据 std::string 实现的”。这种技术避免了从不打算成为基类的类型（如 std::string）派生的一些缺点（隐式转换、切片等）。进行这种转换很容易，它只是工作，几乎没有破坏任何东西的风险。之后，您可以控制转发的接口，这使得转换和重构变得更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:13:32.217

我看不出有任何方法可以避免至少包装所有功能。最直接的方法是拥有一个私有的 basic_string 成员，然后编写在该成员上调用相同函数的包装器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-05T07:56:40.000

我和zdp几乎有同样的问题。不从 std::string 继承导致很多代码不使用方法（我们有很多这样的）作为 void Foo(string &s_) 其中字符串是函数中的参数，用户将 my_string 放入 Foo( ）。简而言之，therm：从 std::string 继承，您可以将 my_string 发送到任何以 my_string 或 std::string 作为参数的函数。我想重写我的 my_string 类，但是有很多代码存在这个问题，很多人也必须更改他们的代码。14年前的一个糟糕的选择......嘘......

# forms - 在表单编辑器中调整字体大小后调整 Delphi 表单大小

> ID：14629993
> 
> 赞同：4
> 
> 时间：2013-01-31T16:04:56.273
> 
> 标签：forms, delphi, resize

我开发了一个遗留的 Delphi 6 应用程序，我想增加其中一种形式的字体大小。所有其他形式都有`Microsoft Sans Serif 8pt`，但这个设置为`Microsoft Sans Serif 7pt`。所有控件都有`ParentFont = True`，所以我可以简单地将表单的字体大小设置为`8pt`. 问题是表单及其控件不会调整大小，并且标签的文本会重叠。是否有一种简单的方法可以在调整其字体大小后调整表单大小，而无需在表单编辑器中手动调整其控件的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:07:02.470

在设计时，您可以通过手动编辑 .dfm 文件来实现更改。确保保存表单时将`Scaled`属性设置为`True`。

然后，在 Delphi 中关闭您的项目，或完全关闭 Delphi。接下来在文本编辑器中打开 .dfm 文件并调整表单`TextHeight`属性。例如，如果您想从 7pt 缩放到 8pt，并且`TextHeight`设置为`13`，那么您应该将其更改为`11`。然后重新加载项目并在设计器中打开表单，您的表单将被缩放。这不会是完美的缩放比例，因为您不允许使用`TextHeight`. 但这可能已经足够好了。

* * *

在运行时，您可以调用[`ChangeScale`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.ChangeScale)：

```
ChangeScale(NewFont.Size, OldFont.Size); 
```

请注意，这`ChangeScale`是一个受保护的成员。因此，根据您调用它的位置，您可能需要使用受保护的成员黑客。

然后一种选择是在运行时调用表单持久性框架以生成 .dfm 文件的缩放版本。这将允许您比玩花样更精确的控制`TextHeight`

例如，您可以将以下内容附加到`OnShow`表单的事件中：

```
procedure TMyForm.FormShow(Sender: TObject);
var
  BinaryStream, TextStream: TStream;
begin
  BinaryStream := TMemoryStream.Create;
  Try
    BinaryStream.WriteComponent(Self);
    BinaryStream.Position := 0;
    TextStream := TFileStream.Create('MyForm.dfm', fmCreate);
    Try
      ObjectBinaryToText(BinaryStream, TextStream);
    Finally
      TextStream.Free;
    End;
  Finally
    BinaryStream.Free;
  End;
end; 
```

这将根据运行时状态生成一个新的 .dfm 文件。然后，您可以将其与版本控制系统中的 .dfm 文件版本进行比较。会有一些您不想接受的更改，但大多数更改将是您确实想要的位置和大小更改。

# java - 将 python stdout 读取为字符串

> ID：14629994
> 
> 赞同：3
> 
> 时间：2013-01-31T16:04:57.413
> 
> 标签：java, python, string, python-2.7, stdout

在 Java 中，我可以使用

```
ByteArrayOutputStream stdout = new ByteArrayOutputStream();
System.setOut(new PrintStream(stdout));
String toUse = stdout.toString();

/**
 * do all my fancy stuff with string `toUse` here
 */

//Now that I am done, set it back to the console
System.setOut(new PrintStream(new FileOutputStream(FileDescriptor.out))); 
```

有人可以告诉我在python中这样做的等效方法吗？我知道这个问题的不同风格已经被问过很多次，例如[Python: Closing a for loop by reading stdout](https://stackoverflow.com/questions/12811374/python-closing-a-for-loop-by-reading-stdout)和[How to get stdout into a string (Python)](https://stackoverflow.com/questions/3472760/how-to-get-stdout-into-a-string-python)。但我有一种感觉，我不需要导入子流程来获得我需要的东西，因为我需要的比这更简单。我在eclipse上使用pydev，我的程序很简单。

我已经试过了

```
from sys import stdout

def findHello():
  print "hello world"
  myString = stdout

  y = 9 if "ell" in myString else 13 
```

但这似乎不起作用。我得到一些关于打开文件的compaints。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:19:09.777

如果我已经理解您尝试正确执行的操作，那么这样的事情将使用一个[`StringIO`](http://docs.python.org/2/library/stringio.html)对象来捕获您写入的任何内容`stdout`，这将允许您获取值：

```
from StringIO import StringIO
import sys

stringio = StringIO()
previous_stdout = sys.stdout
sys.stdout = stringio

# do stuff

sys.stdout = previous_stdout

myString = stringio.getvalue() 
```

当然，这会抑制实际到原始的输出`stdout`。如果要将输出打印到控制台，但仍要捕获该值，则可以使用以下内容：

```
class TeeOut(object):
    def __init__(self, *writers):
        self.writers = writers

    def write(self, s):
        for writer in self.writers:
            writer.write(s) 
```

并像这样使用它：

```
from StringIO import StringIO
import sys

stringio = StringIO()
previous_stdout = sys.stdout
sys.stdout = TeeOut(stringio, previous_stdout)

# do stuff

sys.stdout = previous_stdout

myString = stringio.getvalue() 
```

# linux - Linux 功能如何与零/非零 UID 相关？

> ID：14629995
> 
> 赞同：3
> 
> 时间：2013-01-31T16:04:58.397
> 
> 标签：linux, setuid, linux-capabilities

功能[手册页](http://linux.die.net/man/7/capabilities)相当长，我不完全理解某些内容。

例如，一个决定我们是否可以访问 CAP_NET_RAW 的函数会是什么样子？

输入：

*   a = 有效 uid 为 0
*   b = 有一些真实的/保存的/任何 uid 为 0
*   c = CAP_NET_RAW 为 +e
*   d = CAP_NET_RAW 为 +i
*   e = CAP_NET_RAW 为 +p
*   f = CAP_NET_RAW 被排除在“边界集”之外

输出：

*   x = 我们现在可以调用`socket`而不是得到 EPERM
*   y = 经过一些诡计（不涉及基于文件系统`chmod +s`或`setcap`访问提升或连接到外部助手），例如，`capsetp`我们终于可以让自己打开原始套接字。

据我目前了解，它是这样的：

*   x = !f && (a || c)
*   y = !f && (b || a || c || e)

实际情况如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:01:05.680

多阅读文档，现在看起来是这样的：

```
x = c
can_regain_caps_without_execve = (a || b) && !NO_NEW_PRIVS && (!SECBIT_NO_SETUID_FIXUP || ( CAP_SETPCAP && !SECBIT_NO_SETUID_FIXUP_LOCKED))
y = c || e || can_regain_caps_without_execve 
```

IE

*   零/非零 uid 仅在其更改且“root hacks”处于活动状态时才有意义；
*   仅使用有效的能力进行检查；其他都是能力管理；
*   边界集和继承的能力是关于 execve => 超出这个答案的范围。