# StackOverflow 问答 14336000-14336999

# javascript - Google FastButton 在 iOS 上点击两次

> ID：14336001
> 
> 赞同：0
> 
> 时间：2013-01-15T10:44:31.033
> 
> 标签：javascript, mobile-safari

当使用[Google FastButton的](https://developers.google.com/mobile/articles/fast_buttons)[MrMaksimize 和 Alex Blacks 实现](https://github.com/alexblack/google-fastbutton)时，我在 iOS 中获得了两次点击。

试试这个小提琴：http: [//jsfiddle.net/Cotten/zQsVZ/](http://jsfiddle.net/Cotten/zQsVZ/)

```
var a = new FastButton(document.getElementById('a'), function() {
 alert('click');
});

<div id="a">First click me</div>
<div id="b">Then, click here and nothing should happen... but it does :(</div> 
```

*   放大结果窗格
*   单击绿色按钮，显示警报
*   按确定，一切看起来都很好
*   然后单击没有 FastButton(..) 的红色或蓝色 div
*   它再次触发警报:(

我在带有 iOS 5.1 的 iPhone 4S iOS 6 和 iPad 3 上遇到了这种错误行为。

在android上它似乎工作。

我得到与[jquery.tappable.js](http://aanandprasad.com/articles/jquery-tappable/)相同的奇怪行为。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:25:38.363

我在[这里](https://stackoverflow.com/questions/14657150/iphone-javascript-confirm-dialog-bug)也有类似的问题。

我能够通过使用[此](https://stackoverflow.com/a/10364437/1720446)解决方案来修复它：

```
var clickObject = {
    flag: false,
    isAlreadyClicked: function () {
        var wasClicked = clickObject.flag;
        clickObject.flag = true;
        setTimeout(function () { clickObject.flag = false; }, 100);
        return wasClicked;
    }
};
var a = new FastButton(document.getElementById('a'), function() {
    if (!clickObject.isAlreadyClicked()) {
        alert('click');
    } else {
        return;
    }
}); 
```

我不确定它是否适用于您的快速按钮实现，但值得一试。我的实现看起来更像这样：

```
$('#container').on('click touchstart', 'a.element', function(event) {
    if (!clickObject.isAlreadyClicked()) {
        alert('click');
    } else {
        return;
    }
}); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:46:03.783

我认为 FastButton 实现已经阻止了 Ghostclick（几毫秒的超时）。

我遇到了同样的问题，因为我认为问题可能在于您正在使用和提醒（就像我一样）。由于某种原因（我没有深入研究代码），您会因为警报而触发另一个事件。如果您只是尝试代码，请使用非阻塞的“console.log”而不是警报，您可能会看到第二个事件没有被调用。

希望这个想法不是使用 alert 命令，但如果是，请在超时后使用它，这可以解决 ghostclick 的实现，我认为这无论如何都会破坏行为：

```
new FastButton(document.getElementById('a'), function() { 
       setTimeout('alert("hello");',500);
}); 
```

希望能帮助到你。

干杯，米格尔

# installation - msi 文件未使用 /qn 静默安装

> ID：14336005
> 
> 赞同：0
> 
> 时间：2013-01-15T10:44:39.380
> 
> 标签：installation, windows-installer

我想创建一个 Windows 应用程序，它静默安装 msi 文件，当我使用 /qb 或 /qr 时它可以工作，但是当我尝试使用 /qn 时，没有安装 msi 文件。下面是静默安装的完整代码。

```
 Process process = new Process();
            process.StartInfo.FileName = "msiexec.exe";
            process.StartInfo.Arguments = string.Format("/qn /i \"{0}\" ALLUSERS=1", "C:\\WinAppDemoSetup_3.msi");
            process.Start();
            process.WaitForExit(); 
```

请解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T07:54:08.297

我注意到您正在执行每台机器的安装。请注意，如果您在 Vista 或更新的操作系统上执行此安装，则不会出现 UAC 提示，因为您进行了静默安装，但仍将在后台工作并默认为“否”，从而导致安装失败。

要在每台机器上安装应用程序，在静默模式下，您需要以管理员身份运行正在启动安装的应用程序，即使用“以管理员身份运行”选项来启动应用程序。

# prestashop - 在 Prestashop 1.5.3 中创建自定义页面

> ID：14336006
> 
> 赞同：11
> 
> 时间：2013-01-15T10:44:43.797
> 
> 标签：prestashop

我想在不使用 CMS 的情况下在 Prestashop 1.5.3 中创建一个自定义页面。

不幸的是，我找不到任何适用于 1.5.3 的教程。

到目前为止，我已经在商店根目录中创建了一个 test.php 文件，其中包含以下内容：

```
<?php
include(dirname(__FILE__).'/config/config.inc.php');
include(dirname(__FILE__).'/header.php');

$smarty->display(_PS_THEME_DIR_.'test.tpl');
?> 
```

我将相应的 test.tpl 放在我的主题基本文件夹中。它只包含“hello world”。

我更改了 blockmenu.php 并创建了一个指向我的页面的自定义链接：

```
$this->_menu .= '<li><a href="test.php">TEST</a></li>'.PHP_EOL; 
```

如果我单击链接，则会显示页面，但 html 是某种损坏的。页面的 body-id 设置为*pagenotfound*并生成左侧列但未显示。有什么方法可以为我的自定义页面设置 $page_name 以便我可以检查我的自定义页面是否已加载并抑制左右列的生成？

有没有其他方法可以在没有 CMS 的情况下创建功能性自定义页面？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-15T11:57:48.337

只需使用您想要的页面名称创建一个控制器，并将其放入 /overrides/controllers/front/。控制器的名称必须是 NameyouwantforthepageController.php

这是一个可以工作的基本类：

```
class MyPageController extends FrontController {

/**
 *  Initialize controller
 *  @see FrontController::init()
 */
public function init() {
    parent::init();
}

/**
 *  Assign template vars related to page content
 *  @see FrontController::initContent()
 */
public function initContent() {
    parent::initContent();

    $this->setTemplate(_PS_THEME_DIR_.'my-page.tpl');
}

} 
```

查看 FrontController 以了解您需要重写哪些方法来添加功能，例如`setMedia()`添加 CSS / JS 文件。

然后，您将能够在 SEO 面板的后台添加一个漂亮的 url。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-17T09:04:37.567

除了“public $php_self = 'mypage'”之外，一切都运行良好。

如果您将文件放在覆盖目录中（良好做法），则标识符“mypage”不会显示在 SEO 菜单上。但是，如果您将控制器文件放在主目录中，它就可以工作。

classes/Meta.php 不扫描覆盖目录，只扫描根目录（您可以在 Meta.php 的第 56 行看到它）

使用此代码覆盖 Meta.php 类允许 PrestaShop 扫描覆盖目录并添加页面：

```
class Meta extends MetaCore
{

    public static function getPages($exclude_filled = false, $add_page = false)
    {
                $selected_pages = parent::getPages($exclude_filled, $add_page);

        if (!$files = Tools::scandir(_PS_CORE_DIR_.DIRECTORY_SEPARATOR.'override'.DIRECTORY_SEPARATOR.'controllers'.DIRECTORY_SEPARATOR.'front'.DIRECTORY_SEPARATOR, 'php', '', true))
            die(Tools::displayError('Cannot scan override directory'));

        $exlude_pages = array(
            'category', 'changecurrency', 'cms', 'footer', 'header',
            'pagination', 'product', 'product-sort', 'statistics'
        );

        foreach ($files as $file)
        {
            if ($file != 'index.php' && !in_array(strtolower(str_replace('Controller.php', '', $file)), $exlude_pages))
            {
                $class_name = str_replace('.php', '', $file);
                $reflection = class_exists($class_name) ? new ReflectionClass(str_replace('.php', '', $file)) : false;
                $properties = $reflection ? $reflection->getDefaultProperties() : array();
                if (isset($properties['php_self']))
                    $selected_pages[$properties['php_self']] = $properties['php_self'];
                elseif (preg_match('/^[a-z0-9_.-]*\.php$/i', $file))
                    $selected_pages[strtolower(str_replace('Controller.php', '', $file))] = strtolower(str_replace('Controller.php', '', $file));
                elseif (preg_match('/^([a-z0-9_.-]*\/)?[a-z0-9_.-]*\.php$/i', $file))
                    $selected_pages[strtolower(sprintf(Tools::displayError('%2$s (in %1$s)'), dirname($file), str_replace('Controller.php', '', basename($file))))] = strtolower(str_replace('Controller.php', '', basename($file)));
            }   
        }

        return $selected_pages;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-25T06:27:11.443

1.  在 override 目录中创建自定义页面控制器 - override/controllers/front/CustompageController.php

```
class CustompageController extends FrontController{ 

    //add js / css required for the custom page

    public function setMedia(){
        $this->context->controller->addJS(_THEME_JS_DIR_.'custom-page.js');
        $this->context->controller->addCSS(_THEME_CSS_DIR_.'custom-page.css');
        parent::setMedia();
    }

    public function initContent(){

        //preparingdata for passing to the custom page
        $name = 'Gofenice Technologies';
        $expert_in = array('Prestashop Development', 'Prestashop Customization', 'Prestashop Custom Module Development', 'Prestashop Page Speed Optimization');
        $this->context->smarty->assign(array(
                'company_name' => $name,
                'expert_in' => $expert_in
            ));
        //data ends-here

        //pass data to template file
        $this->setTemplate(_PS_THEME_DIR_.'custom-page.tpl');

        //show left/ right columns - will be true and shown by default
        $this->display_column_left = false;
        $this->display_column_right = false;

        //call parent initcontent - this is for loading the site's default header, footer, left and right columns
        parent::initContent();
    }
} 
```

2.  我们新的自定义页面的模板 - theme/site-current-theme/custom-page.tpl

    ```
    <h3>{$company_name}</h3>
    <p><strong>{l s='Expert In'}</strong></p>
    <ul>
        {foreach from=$expert_in item=skill}
        <li>{$skill}</li>
        {/foreach}
    </ul> 
    ```

[在 prestashop 中创建自定义首页](http://blog.gofenice.com/prestashop/creating-custom-front-page-in-prestashop/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-02T16:12:03.700

你好，geys 这个解决方案也可以完美地与覆盖一起使用。

1/ 在文件夹 /override 创建页面manufacturer-detail.php 并放入以下代码：

包括（目录名（**文件**）。'/config/config.inc.php'）；控制器::getController('ManufacturerDetailController')->run();

工具::displayFileAsDeprecated();

包括（目录名（**文件**）。'/header.php'）；

$smarty->display(_PS_THEME_DIR_.'manufacturer-detail.tpl');

包括（目录名（**文件**）。'/footer.php'）；

2/ 在文件夹/override/controllers/front 创建页面manufacturerDetailController.php 并放入以下代码：

类 ManufacturerDetailController 扩展 FrontController{

```
/*public $php_self = 'manufacturer-detail';  */  /* optional */

public function init(){ 
    parent::init(); 
} 

public function initContent(){ 
    parent::initContent(); 
    $this->setTemplate(_PS_THEME_DIR_.'manufacturer-detail.tpl'); 
} 

 /*  The following code portion is optional. 
```

* 如果您想为页面使用外部样式表和 JavaScript，请删除双斜杠以激活该部分。* 相应地在主题的css和js目录下创建css和js文件*/

```
//public function setMedia(){
  //parent::setMedia();
  //$this->addCSS(_THEME_CSS_DIR_.'custom-page.css');
  //$this->addJS(_THEME_JS_DIR_.'custom-page.js');
//} 
```

}

3/ 在文件夹 /themes/your-default-theme 创建页面manufacturer-detail.php 并输入以下代码：

# 你好世界

4/ 你可以去你后台的 SEO & URLs 并添加新的 url

您可以访问您的页面[http://yourstore.com/index?controller=ManufacturerDetail](http://yourstore.com/index?controller=ManufacturerDetail)

或者

[http://yourstore.com/urr-you-have-added-from-back-office](http://yourstore.com/urr-you-have-added-from-back-office)

# linux - 使用 bash 将日期时间（12h）转换为 CSV 文件中的 mysql 日期时间格式

> ID：14336012
> 
> 赞同：1
> 
> 时间：2013-01-15T10:45:08.543
> 
> 标签：linux, bash, date

我有一个日期时间格式如下的 CSV 文件：

```
8/2/2012 1:34:01 PM 
```

我需要找到此类日期的所有出现（可能是正则表达式）并将其（在文件中）转换为 mysql 默认日期时间格式（2012-08-02 13:34:01）。

我找到

```
date --date="8/2/2012 1:34:01 PM" +"%F %T" 
```

工作正常，我得到了正确的结果。解决方案是找到所有出现格式错误的日期并将其传递给上述日期函数。

CSV 文件中的单行如下所示：

```
"Data 1","Data 2","Data 3","Data 4","100000000100","100000002263","10/31/2012 10:02:03 AM","1/29/1999 1:54:50 PM","11/6/2012 8:47:01 PM","S" 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:20:00.593

你可以吗？

```
awk -F, -vOFS=','  '{for (i=7;i<=9;i++) {"date --date="$i" +\"%F %T\"" |getline $i;$i="\""$i"\""}}1' file 
```

用那一行测试：

```
kent$  echo '"Data 1","Data 2","Data 3","Data 4","100000000100","100000002263","10/31/2012 10:02:03 AM","1/29/1999 1:54:50 PM","11/6/2012 8:47:01 PM","S"'|awk -F, -vOFS=','  '{for (i=7;i<=9;i++) {"date --date="$i" +\"%F %T\"" |getline $i;$i="\""$i"\""}}1'
"Data 1","Data 2","Data 3","Data 4","100000000100","100000002263","2012-10-31 10:02:03","1999-01-29 13:54:50","2012-11-06 20:47:01","S" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:34:24.877

我会使用带有适当 CSV 解析器的工具。这是一个红宝石示例

```
ruby -e '
  require "csv"
  require "date"

  def format_date(date)
    DateTime.strptime(date, "%m/%d/%Y %r").strftime "%Y-%m-%d %T"
  end

  CSV.foreach ARGV[0] do |row|
    [6,7,8].each {|i| row[i] = format_date row[i]}
    puts CSV.generate_line row, {:force_quotes => true}
  end
' file.csv 
```

给定您的样本输入，此输出

```
"Data 1","Data 2","Data 3","Data 4","100000000100","100000002263","2012-10-31 10:02:03","1999-01-29 13:54:50","2012-11-06 20:47:01","S" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:20:03.807

如果使用 perl 是一个选项，这应该符合您的要求

```
#! /usr/bin/perl

use strict;
use warnings;

while (my($m, $d, $y, $H, $M, $S, $a) = m!\"(\d+)/(\d+)/(\d+)\s+(\d+):(\d+):(\d+)\s+([ap]m)\"!i) {
    $H += 12 if ($a =~ m/pm/i);
    my $dt = sprintf("%04d-%02d-%02d %02d:%02d:%02d", $y, $m, $d, $H, $M, $S);
    s!!$dt!;
} 
```

调用它

```
perl -i.bak -p convert.pl csv.txt 
```

这会将日期转换为 MySQL 格式。它还会创建一个备份文件`csv.txt.bak`。

# php - 使用 PHP 的 setAttribute 将 JSON 放入 HTML 属性，双引号问题

> ID：14336013
> 
> 赞同：0
> 
> 时间：2013-01-15T10:45:08.760
> 
> 标签：php, json, dom, quotes, setattribute

我试图弄清楚如何`$obj->setAttribute()`在设置属性时使用单引号，以便我可以在其中放置一个 JSON 数组。

这是我想要完成的基础知识。

```
$code = '<img src="http://example.com/image.jpg">';

$array = array(
  'code' => htmlspecialchars($code),
  'string' => $string
);

$tag->setAttribute('data-stuff', json_encode($array)); 
```

现在一切都很好，但是 JSON 使用双引号，并且新标签也使用双引号。

```
<tag data-stuff="{"code":"&lt;img src=&quot;http://example.com/image.jpg&quot;&gt;","string":"some string"}"> 
```

这是一个问题，因为该属性需要使用单引号，因此它不会干扰 JSON 的双引号。由于 JSON 包含转换为特殊字符的 HTML，这一事实更加复杂。因此，如果我要将 JSON 转换为特殊字符，那么当我尝试对其进行解码时，“代码”也会被解码，这在尝试使用 JavaScript 获取它时可能会导致各种问题。

有谁知道我可以将周围的“data-stuff”属性的容器标签转换为单个字符的干净方法？我更喜欢这个选项而不是转义 json 引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:52:11.950

你可以试试这个[`saveHTML()`](http://php.net/manual/en/domdocument.savehtml.php)方法：

```
<?php

$code = '<img src="http://mysite.com/image.jpg">';
$array = array(
  'code' => htmlspecialchars($code),
  'string' => 'some string',
);

$doc = new DomDocument;
$tag = $doc->createElement("tag");
$tag->setAttribute('data-stuff', json_encode($array));
echo $doc->saveHTML($tag); 
```

...产生：

```
<tag data-stuff='{"code":"&amp;lt;img src=&amp;quot;http:\/\/mysite.com\/image.jpg&amp;quot;&amp;gt;","string":"some string"}'></tag> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-02T20:08:25.173

*（代表问题作者发布答案）*。

没关系，我已经修好了。我在浏览器中查看代码，当我将它作为字符串输出时，它显示为单引号，浏览器只是在视图源中显示双引号。

# jquery - Googlebot 会抓取使用 JavaScript 对 DOM 所做的更改吗？

> ID：14336017
> 
> 赞同：6
> 
> 时间：2013-01-15T10:45:16.960
> 
> 标签：jquery, seo, web-crawler, googlebot

对于 SEO，我的任务是`rel="nofollow"`向所有外部链接添加一个 *。

`rel="nofollow"`添加到每个外部链接的最简单和最不显眼的方法是使用一些 jQuery。我做得很好，但我现在想知道：

Google 是否看到在 jQuery 的文档加载到 DOM 期间所做的更改（例如这个），还是只看到原始源代码？

**我不想讨论为什么这是一个坏主意。这是 SEO 顾问的决定，我了解到，除非实施他们最新的突发奇想需要太多时间才能满足他们想要的**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T16:33:48.320

看起来谷歌蜘蛛确实执行**了一些**JavaScript，但我不相信它会执行像 jQuery 这样的大型库。

请查看[对 Matt Cutts 的采访](http://www.searchnewz.com/topstory/news/sn-2-20100315SEOInterviewwithMattCutts.html)

> **Matt Cutts**：“*有一段时间，我们在 JavaScript 中进行扫描，我们一直在寻找链接。Google 在 JavaScript 方面变得更加智能，可以执行一些 JavaScript。我不会说我们执行所有 JavaScript，所以在我们不执行 JavaScript。当然有一些常见的、众所周知的 JavaScript 东西，比如 Google Analytics，你甚至不想执行，因为你不想尝试从 Googlebot 生成幻像访问到你的 Google Analytics* ”。

[Google Webmaster Central Blog](http://googlewebmastercentral.blogspot.co.uk/2011/11/get-post-and-safely-surfacing-more-of.html)上还有一些关于 Google Spider 改进（JavaScript/AJAX 支持）的额外细节

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T18:00:08.833

仅供其他遇到此页面的人参考。

我有一个类似的问题，我不希望在 DOM 中注入的内容被索引。

## **TL;博士**

*“搜索了很长时间，我终于从 Google Support 自己找到了这个页面：[Google Site Search 可以索引我页面上的 JavaScript 内容吗？](https://support.google.com/customsearch/answer/72366?hl=en)*

*这正是他们在该页面中所说的......简短回答：不，它不能索引 JavaScript 中的内容：*

*`"Google Custom Search can't index content contained in JavaScript. The general rule for making sure that a web page can be indexed by Google is to ensure that all of the text that needs to be indexed is visible in a text-based browser, or a browser with JavaScript turned off."`"*

--

这是我的帖子的链接：在**[不改变 DOM 的情况下注入内容/HTML](https://stackoverflow.com/questions/22568621/inject-content-html-without-altering-the-dom)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-18T23:21:57.077

是的，Googlebot 可以看到您使用 JavaScript 对 DOM 所做的更改。

粗略地说，您只需要确保

*   您的代码在事件之前或`window.load`事件上执行（即使用`$().ready(...)`）
*   而且您不进行 AJAX 调用。

为了更好地了解细节，您可以阅读我的[博客文章](http://bit.ly/holygrailtoseo)。

# javascript - Express.js：无法在 json 文件中设置正确的数据格式

> ID：14336022
> 
> 赞同：0
> 
> 时间：2013-01-15T10:45:33.567
> 
> 标签：javascript, express, ejs

我有一个包含数据的 json 文件，我应该以以下格式将其加载到数组中：

```
var jobs = [
  { ID: 'grt34hggdggf', Employer: 'A1', Title: 'tobi1', Location: 'Los Angeles, CA', Department: 'department', OpeningDate: '2012-12-26T01:29Z', ClosingDate: '2013-04-26T01:29Z', MinSalary: '30000', MaxSalary: '60000', Description: 'bla-gghrf-bla' },
  { ID: 'grt34hgwerwgf', Employer: 'A2', Title: 'tobi2', Location: 'Los Angeles, CA', Department: 'department', OpeningDate: '2012-12-26T01:29Z', ClosingDate: '2013-04-26T01:29Z', MinSalary: '30000', MaxSalary: '60000', Description: 'bla-gghrf-bla' }
]; 
```

所以，这种格式适合我并且适用于视图。哪种格式应该有我的 json 文件。我尝试以下方法：

```
{
    "jobs":[
  { "ID": "grt34hggdggf", "Employer": "A1", "Title": "tobi1", "Location": "Los Angeles, CA", "Department": "department", "OpeningDate": "2012-12-26T01:29Z", "ClosingDate": "2013-04-26T01:29Z", "MinSalary": "30000", "MaxSalary": "60000", "Description": "bla-gghrf-bla" },
  { "ID": "grt34hggdggf", "Employer": "A2", "Title": "tobi1", "Location": "Los Angeles, CA", "Department": "department", "OpeningDate": "2012-12-26T01:29Z", "ClosingDate": "2013-04-26T01:29Z", "MinSalary": "30000", "MaxSalary": "60000", "Description": "bla-gghrf-bla" }

  ]
} 
```

但是当我尝试在视图中执行“forEach”时出现错误：

```
TypeError: F:\tmp\express-master\examples\ejs\views\result.html:5
    3| 
    4| <table>
 >> 5|   <% jobs.forEach(function(job){ %>
    6|     <tr>
    7|         <td>
    8|             <a href="/job/<%= job.ID %>"><%= job.Title %></a>

Object #<Object> has no method 'forEach' 
```

所以，似乎 json 文件的格式比预期的要好。如何正确执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:58:24.520

我在我的案例中找到了正确的格式：

```
[
  { "ID": "grt34hggdggf", "Employer": "A1", "Title": "tobi1", "Location": "Los Angeles, CA", "Department": "department", "OpeningDate": "2012-12-26T01:29Z", "ClosingDate": "2013-04-26T01:29Z", "MinSalary": "30000", "MaxSalary": "60000", "Description": "bla-gghrf-bla" },
  { "ID": "fgert", "Employer": "A2", "Title": "tobi2", "Location": "Los Angeles, CA", "Department": "department", "OpeningDate": "2012-12-26T01:29Z", "ClosingDate": "2013-04-26T01:29Z", "MinSalary": "30000", "MaxSalary": "60000", "Description": "bla11-ggh777rf-bla" }
] 
```

# .net-4.5 - ETW，.NET 4.5 - 如何写入事件日志？

> ID：14336024
> 
> 赞同：24
> 
> 时间：2013-01-15T10:45:37.983
> 
> 标签：.net-4.5, event-log, etw

我试图围绕 ETW 以及如何将 t 集成到高性能应用程序中。

我们都知道旧的可怕的 EventLog 是非结构化的（因此不是最优的）API。

现在有一个用于高性能跟踪的新 API - ETW，它在 4.5 中以 EventSource 类的形式在 .NET 端获得了一个新 API，您可以轻松地对其进行子类化（因此不再需要编写清单）。

这给我留下了许多问题，试图让它发挥作用。

*   当前建议的最佳（根据文档，指南）使用 ETW 并将事件从那里获取到事件日志的方法是什么？我在这里有一个必须编写（性能）事件的应用程序，并且很想使用 ETW；但事件应出现在（自定义）事件日志中。
*   有没有完整的例子？我可以找到一些，但它们都可以追溯到 .NET 4.0 时间并从清单开始。

我尝试了什么？我得到了一个 EventSource 工作，但只是未能获得有关如何从那里获得其余工作下游的正确文档。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-05T21:43:13.077

2013 年 8 月，[Microsoft.Diagnostics.Tracing.EventSource](https://www.nuget.org/packages/Microsoft.Diagnostics.Tracing.EventSource) 1.0.4 beta 在 NuGet 上发布。三大优势是通道支持、静态（已安装）清单支持（进入事件查看器所需的两件事）和 .NET 4.0 支持。

根据宣布 RTM 的[博客文章](http://blogs.msdn.com/b/dotnet/archive/2014/01/30/microsoft-diagnostics-tracing-eventsource-rtms.aspx)，Microsoft.Diagnostics.Tracing.EventSource “支持对 Windows 事件日志的快速应用程序跟踪，包括在生产中”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-24T19:22:22.373

由于以下原因，您试图实现的目标是不可能的；

*   要将 ETW 事件定向到事件日志，您需要在清单中指定类型为 Admin、Operational 或一些经典的通道，例如 Application 并使用 wevtutil 注册它。不幸的是，即使您有清单，您也不能为此使用 EventSource，因为在调用 WriteEvent 时，底层实现不会在 EventDescriptor 块上设置通道字节，例如，您的事件永远不会被标记为特定通道。

*   EventSource 在后台为避免注册清单、将其编译为 win32 资源、将其链接到程序集/dll、注册等繁琐过程所做的是从您的 EventSource 实现生成清单并将其作为已知事件发送到允许接收服务解析所有其他事件有效负载，而不是依赖 Windows 基础结构来获取清单信息。据我所知，目前只有 PerfView 支持此功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-18T18:20:41.163

MSDN真的没有很好的解释。我希望 Stackoverflow 能让我添加 Pluralsight 讲座的链接，该讲座通过使用最佳实践完美地解释了所有 EventSource 主题[https://app.pluralsight.com/library/courses/event-tracing-windows-etw-dotnet/table-of-内容](https://app.pluralsight.com/library/courses/event-tracing-windows-etw-dotnet/table-of-contents)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:23:11.140

有一个小的介绍教程：

[http://blogs.msdn.com/b/vancem/archive/2012/08/13/windows-high-speed-logging-etw-in-c-net-using-system-diagnostics-tracing-eventsource.aspx](http://blogs.msdn.com/b/vancem/archive/2012/08/13/windows-high-speed-logging-etw-in-c-net-using-system-diagnostics-tracing-eventsource.aspx)

[http://blogs.msdn.com/b/vancem/archive/2012/07/09/logging-your-own-etw-events-in-c-system-diagnostics-tracing-eventsource.aspx](http://blogs.msdn.com/b/vancem/archive/2012/07/09/logging-your-own-etw-events-in-c-system-diagnostics-tracing-eventsource.aspx)

我没有尝试过它们，因为我目前正在使用 .NET 4 但也许这些链接可以帮助你......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-27T16:14:01.610

这很有趣，因为我一直在研究类似的需求。首先，您可以使用 EventSource 类的静态方法 GenerateManifest(typeof(MyEvents), null) 生成清单。这将为您提供事件清单等，但不包含有关频道的详细信息。您需要自己在清单中定义通道，然后注册使用 wevtutil.exe、mc.exe 和 rc.exe 实用程序。这将根据清单中的提供商名称为您创建事件日志。

有趣的是，我可以设法让调试和分析日志向我展示通过 EventSource 生成的事件。我还可以使用 Perfmon 的跟踪会话来记录特定时期的事件，并使用关键字和级别的过滤器。提供者也确实出现在 Trace Session 提供者列表中。

我目前唯一看到的是将事件带到 Admim 和 Operation 的频道中。如果您需要样品等，请大声喊叫。

详细信息见 [http://www.suneet.net/FrmBlogViewer.aspx?blogid=75](http://www.suneet.net/FrmBlogViewer.aspx?blogid=75)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-11T17:17:51.163

“[语义记录应用程序块](http://entlib.codeplex.com/releases/view/101823)”具有 EventListener 派生类的示例，其中一个记录在事件日志中。Vance 的博客上对此进行了一些[描述。](http://blogs.msdn.com/b/vancem/archive/2013/03/09/more-support-for-eventsource-and-strongly-typed-logging-the-semantic-logging-application-block.aspx)

# sql-server - 删除另一个表中具有外键的行

> ID：14336029
> 
> 赞同：1
> 
> 时间：2013-01-15T10:45:51.370
> 
> 标签：sql-server

我正在使用 MS SQL Server 2000 数据库。假设我们有三个表 A、B、C。表 A 的主键是从表 B 和 C 中引用的。因此，如果我想从表 A 中删除行，我需要从表 B 和 C 中删除相应的行（如果存在）。但是，当从另一个表引用表 B 或 C 的主键并且此层次结构更深时，就会出现真正的问题。是否有任何脚本或方法可以告诉行删除的表顺序的正确顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:53:00.437

`ON CASCADE DELETE`如 Rob Nawaz 所述，在线搜索。

这些关键字是在 SQL 2000 中引入的，它们将提供您正在寻找的行为。我确实建议谨慎 - 很容易意外删除很多记录，包括您可能不想要的记录。

将其打开然后关闭以进行快速手动删除没问题，但我不会在生产系统中使用它。只需将其吸干并删除相关行即可。

# java - 如何解析 EntityReference

> ID：14336030
> 
> 赞同：0
> 
> 时间：2013-01-15T10:45:52.147
> 
> 标签：java, xml, dom, entityreference

我正在使用 DOM 解析器解析 XML 文件，这是相应的 .dtd：

```
<!ELEMENT Concept (%ConceptReference;, TermList)>
...
<!ENTITY  % ConceptReference "(ConceptUI,ConceptName,ConceptUMLSUI?)"> 
```

我已经解析`ConceptReference`成一个`EntityReference`对象。我被困的一点是：我如何得到`ConceptName`和`ConceptUI`？

# jquery - 无法将事件对象传递给 IE8 中的 if 语句

> ID：14336034
> 
> 赞同：0
> 
> 时间：2013-01-15T10:46:02.680
> 
> 标签：jquery, internet-explorer, events, object, triggers

我有一个由单击事件触发的函数...当单击该函数时，应该从单击起源的 dom 对象中获取一些信息。所有这些在 Firefox 中都可以正常工作，但在 IE8 中它并没有通过警报3.

```
 function handleFileSelect(docEventTrigger) {        
    alert('1');
    if($('#tblListDocs tr input[value!=""]').length>0){
        alert('2');
        updateClicked(instanceID);
    }else{         
        alert('3');
        var docName, docVersion, docDate, docAuthor, formHTML, actionText, docActions, docResults, frmTarget, docRowCount;
        var files = docEventTrigger.target.files;  
        alert('4');    
            for (var iCount = 0, f; f = files[iCount]; iCount++) {
              alert('5');
                 STUFF HAPPENS HERE      
                 document.forms["frmUploadDoc"].submit();
              alert('6');       
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:47:38.020

IE8（或 IE9）不支持任何文件 API。最迟`files[iCount]`对 value 的属性访问尝试将引发错误。`undefined`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:52:14.440

事件对象的`target`属性不是跨浏览器。对于 IE，它应该是`srcElement`.

要使代码跨浏览器，请获取已定义的任何一个：

```
alert('3');
var sender, docName, docVersion, docDate, docAuthor, formHTML, actionText, docActions, docResults, frmTarget, docRowCount;
sender = docEventTrigger.target || docEventTrigger.srcElement;
var files = sender.files;  
alert('4'); 
```

[也就是说，正如其他答案](https://stackoverflow.com/a/14336063/447356)中所解释的那样，它不会帮助您的具体情况。

为了避免弄乱事件，您可以传递对象本身：

```
<input type="file" onchange="handleFileSelect(this);" /> 
```

那么函数参数将已经是文件输入本身。（和`sender`我上面的例子一样）

# excel - Excel：查找串联值

> ID：14336036
> 
> 赞同：0
> 
> 时间：2013-01-15T10:46:11.067
> 
> 标签：excel, excel-formula

有谁知道为什么以下返回#N/A？

```
=LOOKUP(TEXT(CONCATENATE($I$8,$I$5,"1"),0), CritCodes, Criteria) 
```

I5 和 I8 包含以下公式，并分别正确计算为数字 4 和 R：

```
=LOOKUP(B37, LevelsRange,LowLevel)
=LEFT(B29,1) 
```

所以问题公式被正确地评估为这个，但它不会找到结果。

```
=LOOKUP("R41", CritCodes, Criteria) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:37:06.803

根据我的评论 - 尝试使用这个公式

`=INDEX(criteria,MATCH($I$8&$I$5&1,Critcodes,0))`

`LOOKUP`通常不适合查找，除非查找范围按升序排序......并且您可能需要“最近匹配”。`INDEX/MATCH`此处使用的不需要任何排序，但也只提供完全匹配，因此如果 Critcodes 中不存在查找值，您将得到`#N/A`

请注意，在您的示例中，如果 I8 = "R" and I5 = 4 then `$I$8&$I$5&1`= "R41" - 显然这是一个文本值，但如果 I8 和 I5 都是数字，情况也会如此，因此理想情况下，Critcodes 应该都是文本值（在任何带有 ' like '41 的数字之前执行此操作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:40:46.920

它试图查找字符串“41”而不是整数 41。将公式更改为：

=LOOKUP(INT(CONCATENATE($I$5,"1"))，写作，标准)

# java - Exceptions versus flow control

> ID：14336051
> 
> 赞同：2
> 
> 时间：2013-01-15T10:47:00.823
> 
> 标签：java, exception

The [Effective Java Exceptions](http://www.oracle.com/technetwork/articles/entarch/effective-exceptions2-097044.html) article describes a `CheckingAccount` which should `processCheck()`. Furthermore it states:

> The natural way to represent the contingency responses in Java is to define two exceptions, say `StopPaymentException` and `InsufficientFundsException`

To me this sounds like exceptions used for flow control. Could you please explain why it is okay to use checked exceptions for flow control here? (Or whether this is no case of flow control.)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:50:07.530

异常，尤其是*检查*型异常，非常适合流控制，但仅适用于*异常*情况：如果异常是*每次*运行代码时都可以预见的情况，因为它是“快乐一天场景”的一部分，那么只有这样你滥用它们。教科书的例子是使用`while (true)`循环来迭代数组，指望`ArrayIndexOutOfBounds`打破它。

异常处理的另一个问题是“带外信号”，您已经占用了“快乐日”数据的方法返回值，并且您需要另一个可区分的通道来表明没有数据的原因返回。在 Haskell/Scala 中，你会为此使用*Maybe* monad；在Java中你最好坚持检查异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:02:23.720

不

不要使用异常进行流量控制。当您的服务器处于高负载时，抛出异常会使您的服务器更加缓慢和停机

# google-chrome-extension - Simple npapi plugin gives "no plug-in available to display this content" error message

> ID：14336052
> 
> 赞同：0
> 
> 时间：2013-01-15T10:47:00.973
> 
> 标签：google-chrome-extension, npapi

I've downloaded the sample from [http://code.google.com/p/npapi-chrome-plugin-helloworld-example/](http://code.google.com/p/npapi-chrome-plugin-helloworld-example/) Do not worry about building from the source, the built .dll and the manifest and a test.html is in the sampleplugin folder.

Problem: If I open the test.html in Chrome (latest) I've got a gray rectangle with the message "no plug-in available to display this content".

What am I missing? (Can anyone reproduce this? Again, no need to build, just 10 sec to download and launch test.html)

Thx for answers

*   The npsimple.dll is really in the plugin subdirectory relative to the manifest.json.

manifest.json:

```
{
"name": "npapi_helloworld",
"version": "1.0",
"description": "a small helloworld example of npapi.",
"plugins":[
    {"path":"plugin/npsimple.dll","public":true}
]
} 
```

test.html

```
<doctype html>
<html>
<head>
<script>
window.onload = function(){
    test = document.getElementById("pluginObj");
    alert(test.sayHello());
}
</script>
</head>
<embed id="pluginObj" type="application/x-helloworld"> 
<body></body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:19:50.167

解决了：

“manifest_version”：2，必须添加到 manifest.json :-(。（为什么？）

# typo3 - Using replaceString in typoscript

> ID：14336055
> 
> 赞同：0
> 
> 时间：2013-01-15T10:47:05.300
> 
> 标签：typo3, typoscript

Here is a snippet of typoscript in my project:

```
fe_users.company = TEXT
fe_users.company.data = TSFE:fe_user|sesData|powermail_2594|uid294 
```

I am using typo3 v4.5. Now, the content of fe_users.company.data contains some errors which I want to remove using replaceString() or removeString().I don,t have much knowledge of typoscript at this stage and thats why I am writing this question.How would I implement the replaceString function.The examples I found on inernet were dealing with .vlaue property of an object.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:48:51.813

请尝试以下排版：

```
fe_users.company.stdWrap.replacement {
10 {
search = &
replace.char = 38
}
} 
```

# linux - slow concurrent file access with wildcards in linux

> ID：14336058
> 
> 赞同：1
> 
> 时间：2013-01-15T10:47:23.510
> 
> 标签：linux, filesystems

on a linux system I have a directory with about 100.000 files (they contain some statistics data). I have to access them using wildcards and now I experience some performance issues. When accessing a specific file it's really fast:

```
time ls 19991
19991

real    0m0.004s
user    0m0.000s
sys     0m0.000s 
```

When using wildcards it's (as you would expect) slower:

```
time ls 19991*
19991

real    0m0.043s
user    0m0.020s
sys     0m0.020s 
```

But: When I try to access the files concurrently ALL access get slow:

```
 i=1; while [ $i -le 10 ]; do (time ls 19991* &) ; let i=i+1; done 
19991
19991

real    0m0.248s
user    0m0.010s
sys     0m0.020s
19991

real    0m0.279s
user    0m0.000s
sys     0m0.040s
19991
19991
19991

real    0m0.306s
user    0m0.050s
sys     0m0.000s

real    0m0.236s
user    0m0.010s
sys     0m0.030s

real    0m0.257s
user    0m0.010s
sys     0m0.040s

real    0m0.263s
user    0m0.020s
sys     0m0.020s
19991
19991

real    0m0.196s
user    0m0.030s
sys     0m0.010s

real    0m0.175s
user    0m0.020s
sys     0m0.020s
19991

real    0m0.095s
user    0m0.040s
sys     0m0.000s
19991

real    0m0.158s
user    0m0.020s
sys     0m0.040s 
```

Even if the access is serialized by the kernel, I would expect the first "ls" to take about 40ms, the second 80ms, the third 120ms, ... . But now even the fastest "ls" takes 95ms and most of them about 200ms.

This occurs when using a local filesystem (ext3) and also when using a network-mounted directory (nfs). So I think it has nothing to do with a specific filesystem.

Any ideas what causes this slowdown or how to fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-12T01:59:03.533

使用的总时间是多少？

如果我查看用户时间和系统时间，那么它们仍然很小。所以也许这就是你所看到的：

```
init job1
init job2
init job3
...
init job10
run half of job1
...
run half of job10
finish jobs1
...
finish jobs10 
```

比较这些：

```
$ time ( i=1; while [ $i -le 100 ]; do time ls 19991* &  let i=i+1; done ;wait)
real    0m1.278s
user    0m2.532s
sys     0m2.236s

$ time ( i=1; while [ $i -le 100 ]; do time ls 19991* ; let i=i+1; done ;wait)
real    0m3.197s
user    0m1.669s
sys     0m1.535s 
```

用户和系统大致相同。并行版本中较长的 user+sys-time 可以用分叉的开销来解释。较低的实时性可以通过拥有多个 CPU 来解释。

因此，您的时间会受到更多并行运行的作业的严重影响。

# asp.net - Regional settings issue in Asp.net

> ID：14336062
> 
> 赞同：0
> 
> 时间：2013-01-15T10:47:34.723
> 
> 标签：asp.net, regional

i'm from turkey. our date format is : dd/mm/yyyy

when i execute datetime.now command in my localhost result is 15.01.2013\. i mean true.

but in my web server result is 01.15.2013\. server regional settings is ok. Localization and other settings is set to turkey.

so? where is the problem i don't understand. and sorry for my bad english.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:56:40.990

本地计算机上的区域设置似乎与服务器上的区域设置不同。

您可能应该将[CultureInfo](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)传递给您的 ToString 调用：http: [//msdn.microsoft.com/en-us/library/8tfzyc64.aspx](http://msdn.microsoft.com/en-us/library/8tfzyc64.aspx) 或明确使用`FormatString`这样的：

```
.ToString("dd.MM.yyyy") 
```

# regex - Writing Regular Expressions

> ID：14336069
> 
> 赞同：0
> 
> 时间：2013-01-15T10:48:04.527
> 
> 标签：regex, ant, properties

Could you tell me how I would write a regular expression for the string below in ant? I have a property called typeSplitFirstPart. I want to insert a couple of values after the property typeSplitFirstPart which can either be Product_A or Product_PD or Product_CD (see below).

```
CSDT_FLAG_PRODUCT_FF_FWUIDS=Product_A:*;Product_PD:*;Product_CD:* 
```

Currently I have this, but it is not working.

```
 <replaceregexp file="x" flags="s" match="([^\.]*)\$\{typeSplitFirstPart:\*?\}([^\.]*)" replace="$HELLOEVERYONE\2"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:16:50.863

这些是纯正则表达式模式，假设 * 是除分号 ( `[^;]`)之外的任何字符

第一部分是强制性的，至少一个产品是强制性的，产品不能为空：

```
^([A-Z_]+)=(?:(Product_[A-Z]+):([^;]+);?)+ 
```

第一部分是强制性的，产品是可选的但不是空的：

```
^([A-Z_]+)=(?:(Product_[A-Z]+):([^;]+);?)* 
```

第一部分是强制性的，产品是可选的，它们可以是空的：

```
^([A-Z_]+)=(?:(Product_[A-Z]+):([^;]*);?)* 
```

请注意，以开头的组`?:`没有返回任何优化。

# php - 使用 cURL 将 Json 数据发送到另一台服务器

> ID：14336070
> 
> 赞同：3
> 
> 时间：2013-01-15T10:48:04.243
> 
> 标签：php, curl

我通过 cURL 将以下 json 发送到另一台服务器。

```
$postUrl = 'http://anotherserver.com/test.php';    
$this->datatopost = array (
  "rcpt_to" => $rcpt_to,
  "to"      => $to,
  "subject" => $subject,
  "header"  => $headers,
  "body"    => $body,
);

$data = array (
    'json' => json_encode($this->datatopost)
);
$bodyStr = http_build_query($data);  

$postlength = strlen($data);

$ch = curl_init('www.xxx.com/test.php');

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLINFO_HEADER_OUT, TRUE);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/x-www-form-urlencoded',
    'Content-Length: ' . strlen($bodyStr))
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$result = curl_exec($ch);

if(!curl_errno($ch))
{
    $info = curl_getinfo($ch);
    echo"<pre>"; print_r($info);
    echo"</pre>";
} 
```

并收到一条错误消息：

```
Request Entity Too Large
The requested resource
/test.php
does not allow request data with POST requests, or the amount of data provided in
the request exceeds the capacity limit. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:33:50.323

现在我有json数据

```
$postUrl = 'http://your domain/';    
$datatopost = array (
            "rcpt_to" => 'ffgf',
            "to" => 'gdfhfh',
            "subject" => 'dgfdfh',
            "header" => 'sfgdh',
            "body"   => 'DFSGf',
            );
$datatopost = json_encode($datatopost);
 print_r($datatopost)   //{"rcpt_to":"ffgf","to":"gdfhfh","subject":"dgfdfh","header":"sfgdh","body":"DFSGf"}
$data = array ('json' => json_encode($datatopost));
$ch = curl_init($postUrl);                                                                      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
$result = curl_exec($ch);
$info = curl_getinfo($ch);
print_r($info); 
```

# c - 宏定义格式错误

> ID：14336071
> 
> 赞同：2
> 
> 时间：2013-01-15T10:48:08.080
> 
> 标签：c, macros

我有以下宏，它应该获取一个结构`CLEAR_ARG`并为其设置一些值：

```
#define POLICY_ARG_SET((CLEAR_ARG), ARG1, ARG2, ARG3, ARG4, ARG5, ARG6, ARG7, ARG8) \
    CLEAR_ARG->arg1= ARG1 \
    CLEAR_ARG->arg2 = ARG2; \
    CLEAR_ARG->arg3 = ARG3; \
    CLEAR_ARG->arg4 = ARG4; \
    CLEAR_ARG->arg5 = ARG5; \
    CLEAR_ARG->arg6 = ARG6; \
    CLEAR_ARG->arg7 = ARG7; \
    CLEAR_ARG->arg8 = ARG8; 
```

`macro definition malformed for macro`但由于某种原因，我收到了警告。

我使用了没有括号的宏`(CLEAR_ARG)`，并将结构设置为

```
POLICY_ARG_SET((&clear_arg),...) 
```

但我不想总是担心括号。为什么我会收到此警告，如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T10:49:45.610

你放错了括号。在名称和参数中你不能使用它们，你需要在定义中使用它们（被扩展的部分）。

将您的宏更改为此，它应该可以工作：

```
#define POLICY_ARG_SET(CLEAR_ARG, ARG1, ARG2, ARG3, ARG4, ARG5, ARG6, ARG7, ARG8) \
    (CLEAR_ARG)->arg1 = ARG1; \
    (CLEAR_ARG)->arg2 = ARG2; \
    (CLEAR_ARG)->arg3 = ARG3; \
    (CLEAR_ARG)->arg4 = ARG4; \
    (CLEAR_ARG)->arg5 = ARG5; \
    (CLEAR_ARG)->arg6 = ARG6; \
    (CLEAR_ARG)->arg7 = ARG7; \
    (CLEAR_ARG)->arg8 = ARG8; 
```

请注意，在您的示例`(CLEAR_ARG)->arg1 = ARG1;`中也缺少分号 ( `;`)

# jquery - 点击按钮消失

> ID：14336077
> 
> 赞同：0
> 
> 时间：2013-01-15T10:48:17.410
> 
> 标签：jquery, html

我有一个非常简单`HTML`的文件（它是项目的一部分，`MVC 4`但我也在一个普通`HTML`文件上进行了测试），其中包含两个按钮和一些`jquery`脚本：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</head>
<body>
    <div>
        <button id="btn1">Get a string</button>
        <br />
        <p id="p1" style="font-size: 12px" />
        <br />
        <button id="btn2">Get user agent</button>
        <br />
        <p id="p2" style="font-size: 12px" />
    <br />
</div>
<script>
    $(function () {
        $('#btn1').click(function () {
            $('#p1').text('clicked');
        });
    });
</script>
<script>
    $(function () {
        $('#btn2').click(function () {
            $('#p2').text(navigator.userAgent);
        });
    });
</script>
</body> 
```

单击第二个按钮后一切正常，但单击第一个按钮 ( `btn1`) 时，第二个按钮消失。我尝试切换它们并更改脚本的实现：

```
<script>
    $(function () {
        $('#btn1').click(function () {
            $('#p1').text('clicked');
        });
    });
    $(function () {

        $('#btn2').click(function () {
            $('#p2').text(navigator.userAgent);
        });
    });
</script> 
```

和：

```
<script>
    $(document).ready(function () {
        $('#btn1').click(function () {
                $('#p1').text('clicked');
        });
    });
    $(document).ready(function () {
        $('#btn2').click(function () {
            $('#p2').text(navigator.userAgent);
        });
    });
</script> 
```

但没有任何改变。
关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:51:58.503

您必须使用结束`</p>`标签。自闭标签不起作用：

```
<button id="btn1">Get a string</button>
<br />
<p id="p1" style="font-size: 12px"></p>  <-- here
<br />
<button id="btn2">Get user agent</button>
<br />
<p id="p2" style="font-size: 12px"></p> <-- and here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:52:31.387

使用这个：http: [//jsbin.com/eqawas/1/edit](http://jsbin.com/eqawas/1/edit)

```
<div>
    <button id="btn1">Get a string</button>
    <br />
  <p id="p1" style="font-size: 12px"></p>
    <br />
    <button id="btn2">Get user agent</button>
    <br />
    <p id="p2" style="font-size: 12px" ></p>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:52:42.653

问题是您没有`<p>`正确关闭标签。你做了`<p .... />`，但它需要像这样格式化`<p ...></p>`。

见： [http ://codepen.io/AlienHoboken/pen/kinGq](http://codepen.io/AlienHoboken/pen/kinGq)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:50:52.370

“按钮”标签的默认行为是提交。所以你需要用 like 指定 type="button"

```
<button id="btn1" type="button">Get a string</button> 
```

和代码onlod应该像

```
$(function () {
    $('#btn1').click(function () {
        $('#p1').text('clicked');
    });
    $('#btn2').click(function () {
        $('#p2').text(navigator.userAgent);
    });
}); 
```

# android - 三星设备中的彩信问题通过代码

> ID：14336081
> 
> 赞同：0
> 
> 时间：2013-01-15T10:48:32.673
> 
> 标签：android, mms

我用下面的代码做彩信

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
sendIntent.putExtra("sms_body", "some text"); 
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(url));
sendIntent.setType("image/png") 
```

我想发送：- MMS 中的文本、URL、音频文件 我想知道是否有任何 DLL 文件可用于三星设备的 MMS。由于三星设备应用程序因彩信而崩溃

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T11:44:59.753

如果您必须**使用任何图像发送彩信，请**使用此代码。

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
            sendIntent.setClassName("com.android.mms", 

               "com.android.mms.ui.ComposeMessageActivity");
            sendIntent.putExtra("sms_body", "some text"); 
            sendIntent.putExtra(Intent.EXTRA_STREAM, 
                      Uri.parse("file:///sdcard/image_4.png"));
            sendIntent.setType("image/png");
             startActivity(sendIntent);; 
```

或者

如果您必须**发送带有音频或视频**文件的彩信，请使用此功能。

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
                sendIntent.setClassName("com.android.mms", 

                 "com.android.mms.ui.ComposeMessageActivity");
                sendIntent.putExtra("address", "1213123123");
                sendIntent.putExtra("sms_body", "if you are sending text");   
                final File file1 = new File(mFileName);
                if(file1.exists()){
                    System.out.println("file is exist");
                }
                Uri uri = Uri.fromFile(file1);
                sendIntent.putExtra(Intent.EXTRA_STREAM, uri);
                sendIntent.setType("video/*");
                startActivity(sendIntent); 
```

让我知道这是否对您有帮助。

# android - Seekbar 没有响应

> ID：14336082
> 
> 赞同：1
> 
> 时间：2013-01-15T10:48:40.177
> 
> 标签：android

我做了一个收音机播放器，但搜索栏没有调高或调低音量，我找不到为什么会这样。

```
final SeekBar volume=(SeekBar)findViewById(R.id.bar);
audMan = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
int maxVolume = audMan.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
int curVolume = audMan.getStreamVolume(AudioManager.STREAM_MUSIC);
mplayer = new MediaPlayer();
mplayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

volume.setMax(maxVolume);
volume.setProgress(curVolume);
song_title=(TextView)findViewById(R.id.txt);
seekBarValue=(TextView)findViewById(R.id.textView1);
Value=(TextView)findViewById(R.id.seekbarvalue);

song_title.setTextColor(Color.CYAN);
seekBarValue.setTextColor(Color.CYAN);
Value.setTextColor(Color.CYAN);

volume.setProgress(0);
volume.incrementProgressBy(5);
volume.setMax(100);

volume.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener()
{

    public void onStopTrackingTouch(SeekBar bar)
    {
        int value = bar.getProgress(); // the value of the seekBar progress
    }

    public void onStartTrackingTouch(SeekBar bar)
    {

    }

    public void onProgressChanged(SeekBar bar,
            int paramInt, boolean paramBoolean)
    {
        seekBarValue.setText("" + paramInt + "%"); // here in textView the percent will be shown
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:00:17.490

您必须在某个时候调用[AudioManger.setStreamVolume() ...](http://developer.android.com/reference/android/media/AudioManager.html#setStreamVolume%28int,%20int,%20int%29)

```
public void onProgressChanged(SeekBar bar,
                int paramInt, boolean paramBoolean)
        {
            seekBarValue.setText("" + paramInt + "%"); // here in textView the percent will be shown
            AudioManager audioManager = (AudioManager)Context.getSystemService(Context.AUDIO_SERVICE);
            audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,paramInt,flags);
        } 
```

`flags`只是要使用的标志。例如`AudioManager.FLAG_SHOW_UI`，可用于显示带有音量的 Toast。如果你不想要标志，你可以传递 0。

# java - Axis2 更改默认服务端口

> ID：14336083
> 
> 赞同：2
> 
> 时间：2013-01-15T10:48:43.650
> 
> 标签：java, web-services, jakarta-ee, axis2

有没有办法通过代码覆盖axis2.xml中指定的轴默认端口？

我想用一个动态值初始化它，保持所有其他设置不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:55:26.230

我认为你应该使用`AxisServletListener#setPort(int)`

在此处阅读 javadoc：

[http://axis.apache.org/axis2/java/core/api/org/apache/axis2/transport/http/AxisServletListener.html#setPort(int](http://axis.apache.org/axis2/java/core/api/org/apache/axis2/transport/http/AxisServletListener.html#setPort(int) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:20:17.687

[`AxisConfiguration`](http://axis.apache.org/axis2/java/core/api/org/apache/axis2/engine/AxisConfiguration.html)您可以在运行时使用和更改任何内容 [`ConfigurationContext`](http://axis.apache.org/axis2/java/core/api/org/apache/axis2/context/ConfigurationContext.html)。

# c# - 以一种形式处理 2 个提交按钮

> ID：14336093
> 
> 赞同：4
> 
> 时间：2013-01-15T10:49:16.607
> 
> 标签：c#, javascript, asp.net, asp.net-mvc

我已经阅读了许多文章，解释了如何处理表单中的 2 个提交按钮，但没有一篇对我有用。

**形式**：

```
<form id="myForm">
<input type="submit" name="btngroup" value="remove" />
<input type="submit" name="btngroup" value="activate" />
</form> 
```

**js：**

```
$('#myForm').submit(function (e) {
    e.preventDefault();
    var form = $(this);
    $.ajax({
            url: '/Admin/removeDocPermanently',
            type: 'POST',
            DataType: "html",
            data: form.serialize()
    });
}); 
```

**控制器**

```
[HttpPost]
public ActionResult removeDocPermanently(string btngroup, FormCollection form)
{  
   //btngroup does not get the value of the clicked submit button
} 
```

这是否可以在 js 提交功能或控制器中获得按下的提交按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:50:11.837

您可以在提交按钮单击时按住提交对象并在提交功能中使用它。

```
var submitCommand;
$('input:submit').click(function(){
 submitCommand = $(this);
});

$('#myForm').submit(function (e) {
       alert(submitCommand.val());
       //your code
}); 
```

# map - 在地图中使用 AnsiString 作为键时的奇怪问题

> ID：14336096
> 
> 赞同：0
> 
> 时间：2013-01-15T10:49:22.630
> 
> 标签：map, c++builder, c++builder-2010, ansistring

我有一张地图

`map<AnsiString, Foo*>`

当我尝试在地图中查找值时，我使用从 a 接收到的字符串`TMemoryStream`并将其发送到一个`Foo* GetFoo(AnsiString)`函数，该函数又创建一个迭代器并返回找到的对象。这在大多数情况下都可以正常工作，但在 ONE 函数中它不返回值。

如果我这样做`FooID = FooID.SetLength(FooID.Length() - 1);`AnsiString`FooID`用于查找它的工作原理并返回正确的结果。我在想流中可能有一些垃圾，但是当我查看在开箱即用的地方和需要破解的地方使用的 AnsiStrings 时，它们是相同的！？

这是根据 IDE 的调试值检查器...所以那里可能有一些诡计。但是到底是什么导致了这个？？？

*更新：*

我找到了`operator>>`使用的实现。

```
PACKAGE TStream & operator >>(TStream &Stream, AnsiString &s)
{
    int i;

    Stream.ReadBuffer(&i, sizeof(i));
    if (i<0)
    {
        WideString ws;

        i=-i;
        ws.SetLength(i);
        if (i>0)
            Stream.ReadBuffer(ws.c_bstr(), i*sizeof(wchar_t));

        s=ws;

    } else if (i>0)
    {
        s.SetLength(i);
        Stream.ReadBuffer(s.c_str(), i);

    } else
        s="";

    return Stream;
} 
```

单步执行似乎可以正确处理接收到的字符串。但我似乎记得听说过这个问题`WideString`并不少见：P

*更新 2：* 我实际上找到了一个实例，其中返回的字符串长度为 6 个字符加上结尾`\0`，但大小设置为 7。所以我想我的解决方案将在应用程序中发送该字符串，因为它提供了错误的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:48:31.510

它们显然不相同，因为您需要截断额外的`char`内容以使其正常工作。所以找出额外的`char`实际是什么。流数据一开始就有垃圾，或者从流中读取 AnsiString 的代码中存在引入垃圾的逻辑错误。

当您使用调试检查器时，请确保您考虑了 AnsiString 的整个长度。默认情况下，检查器将 AnsiString 视为以空字符结尾的字符串，因此在遇到它找到的第一个空字符时停止显示数据，因此您可能需要使用检查器的“范围”选项来查看实际存在于 AnsiString 中的所有内容记忆。

# rubygems - 在项目文件夹中执行保护时出错

> ID：14336097
> 
> 赞同：0
> 
> 时间：2013-01-15T10:49:23.873
> 
> 标签：rubygems, guard

我正在使用警卫处理一个项目。当我尝试在项目中键入“守卫”时，它给了我以下错误。该文件夹具有有效的 Guardfile -

```
/home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.1/lib/guard.rb:50:in `pwd': No such file or directory - getcwd (Errno::ENOENT)
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.1/lib/guard.rb:50:in `setup'
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.1/lib/guard.rb:183:in `start'
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.1/lib/guard/cli.rb:110:in `start'
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor.rb:275:in `dispatch'
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.6.1/bin/guard:6:in `<top (required)>'
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/bin/guard:23:in `load'
    from /home/murtaza/.rvm/gems/ruby-1.9.3-p194/bin/guard:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:59:57.850

尝试运行：

```
bundle exec guard 
```

这是另一个可能对您有所帮助的[线程。](http://www.ruby-forum.com/topic/163811)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:10:46.557

发生错误是因为该目录已被删除。

# sql - Rails has_many 复杂查询

> ID：14336102
> 
> 赞同：0
> 
> 时间：2013-01-15T10:49:35.723
> 
> 标签：sql, ruby-on-rails, postgresql

我不太确定如何措辞，但我会试一试。

基本上我有两个模型：消息和事件。

消息belongs_to 事件和事件has_many 消息。

当我打电话时：

```
Event.first.messages 
```

它产生这个输出：

```
SELECT "messages".* FROM "messages" WHERE "messages"."event_id" = 1 
```

我想做的是保持两者之间的关联，但在 has_many 等式中添加另一列，因此生成的 SQL 类似于：

```
SELECT "messages".* FROM "messages" WHERE "messages"."event_id" = 1 OR "messages"."type_id" = 4 
```

Message 和 Event 表都包含 type_id 列。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:16:55.103

您不能进行纯 ActiveRecord OR 查询

解决此问题的其他方法

**使用 SQL 字符串作为 where 参数：**

```
Message.where("event_id = ? or type_id = ?", Event.first.id, 4) 
```

**进行 2 个查询，然后添加它们：**

```
event_messages = Event.first.messages
type_messages = Message.where(:type_id => 4)
all_messages = event_messages + type_messages 
```

**原始 SQL：**

[如何在rails中使用动态绑定执行原始更新sql](https://stackoverflow.com/questions/4483049/how-to-execute-a-raw-update-sql-with-dynamic-binding-in-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:01:18.840

是的，它可能通过使用

```
Event.first.messages.where(:type_id => 4) 
```

尝试一下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:09:46.217

试试这个

```
Event.first.find(:all, :conditions => ["where type_id = ? or event_id = ?", 4, 1]) 
```

# ios - 在 onclick 条形图列之后，Segue 在 coreplot Graphview.m 中不起作用

> ID：14336105
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:49:51.057
> 
> 标签：ios, ios6, core-plot

在 coreplot(Bartchart) 中使用下面的代码从 GraphView.m 类执行 segue

但我收到一个错误： `instance method '-performSegueWithIdentifier:sender:' not found (return type defaults to 'id')`

我如何解决它 ？请帮忙 。
提前致谢。

```
-(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index
    {
        NSLog(@"barWasSelectedAtRecordIndex %d", index);

         [self performSegueWithIdentifier:@"list2" sender:self];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:59:51.053

如果 GraphView.m 是一个 UIView 你不会走得太远，就像`performSegueWithIdentifier:sender`UIViewController 方法一样。

假设 graphView 是从 viewController 创建的，您希望将其设置为 viewController 的委托。

在 GraphView.h

*   在 @interface 上方声明一个 graphView 协议：

    `@protocol GraphViewDelegate`
    `-(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index`
    `@end`

*   声明一个属性：

    `@property (weak) id <GraphViewDelegate> delegate;`

在 GraphView.m 中：

```
-(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index
    {
        [[self delegate] barPlot:plot barWasSelectedAtRecordIndex:index];
    } 
```

在 ViewController.h 中修改 @interface 行

```
@interface MyViewController: UIViewController <GraphViewDelegate> 
```

在 ViewController.m

*   when you create the graphView, set the delegate to self (if graphView is created in Interface Builder, you can CTRL-drag a line to the viewController to set the delegate):

    `GraphView* graphView = [GraphView alloc] init];`
    `[graphView setDelegate:self];`

*   implement the delegate method as you had it in GraphView (you may not need the `index` parameter but I carried it over anyway)..

    ```
    -(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index
     {
        [self performSegueWithIdentifier:@"list2" sender:self];
     } 
    ```

You probably want to modify your method signature, to something like

```
 -(void)graphView:(GraphView*)graphView 
         didSelectBarAtIndex:(NSUInteger)index 
                     barPlot:(CPTBarPlot *)plot 

 (it's good practice to send a reference to the sender along with the message) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:58:17.543

如果您确定没有犯任何拼写错误，您也可以尝试将该方法包含在 .h 文件中。

# mongodb - MongoDB：使用 C# 驱动程序更新除 _id 之外的整个文档

> ID：14336116
> 
> 赞同：5
> 
> 时间：2013-01-15T10:50:33.370
> 
> 标签：mongodb, mongodb-.net-driver

我必须更新除_id 之外的所有字段。我想避免手动更新 16 个字段...所有新字段都存储在 BsonDocument 中

感谢您的想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:50:42.797

正如@Philipp 暗示的那样，有一种方法可以做到这一点。您实际上可以使用该`save`功能（[http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-Save%3CTDocument%3Emethod](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-Save%3CTDocument%3Emethod)），它将按照他在数据库端为您说的做。

所以想象你有一个文件：

```
{
    _id: {},
    d: 1
} 
```

并且`_id`已经存在，它将用这个文件替换以前的文件。

整齐吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:13:28.293

当我正确理解您时，您有一个包含新数据的文档 B，并且您希望它完全替换文档 A。

在这种情况下，您可以将文档 B 的 _id 字段显式设置为文档 A 的 _id 字段的值。当您保存文档 B 时，它将替换数据库中的文档 A。

当保存的文档具有现有文档的 id 时，数据库会将其视为该文档的新版本，而不是新文档。

# php - Drupal 7 - 从本地主机发送电子邮件

> ID：14336118
> 
> 赞同：3
> 
> 时间：2013-01-15T10:50:50.137
> 
> 标签：php, email, drupal, drupal-7, drupal-modules

我的本地机器上有 Drupal 7.18。我在我的网站上创建了一个联系表，还下载了 SimpleNews 模块并创建了一个“注册我们的时事通讯”块。

我已经通过用我的电子邮件和详细信息填写联系表格来测试这两个，它说表格已经提交。我也为时事通讯注册做了同样的事情，上面写着“感谢您注册我们的时事通讯”。

但是，这些电子邮件没有进入我的收件箱。我试过使用几个不同的电子邮件，但仍然没有。

是因为我在我的机器上本地工作吗？如果不是，可能是什么原因造成的？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:56:03.547

这是因为你在本地工作。您需要配置 SMTP 客户端才能从本地计算机发送电子邮件。

如果您希望能够从本地计算机发送电子邮件，请考虑使用[Mercury 。](http://www.pmail.com/overviews/ovw_mercury.htm)免费。

# php - 从会话代码点火器中回显用户

> ID：14336122
> 
> 赞同：0
> 
> 时间：2013-01-15T10:50:53.863
> 
> 标签：php, codeigniter, session, session-variables, loginview

我是codeigniter的新手。我已经实现了一个简单的登录系统。我想在我的视图页面上打印出一个用户名，该用户名存储在会话中。这是我的控制器

```
class LoginController extends CI_Controller {

function index(){           
        $new['main_content'] = 'loginView';
        $this->load->view('loginTemplate/template', $new); 

    }   

    function verifyUser(){          
        //getting parameters from view 
        $data = array(
                'username' => $this->input->post('username'),
                'password' => $this->input->post('password')
        );          

        $this->load->model('loginModel'); 
        $query = $this->loginModel->validate($data);   

              if ($query){             
            //if the user c validated
            //data variable is created becx we want to put username in session
                $data = array(
                    'username' => $this->input->post('username'),
                     'is_logged_in' => true 
                );

               $this->session->set_userdata($data);
             redirect('sessionController/dashboard_area');
        }
        else
         {
            $this->index();
        }
    }
    function logout()
    {
        $this->session->sess_destroy();
        $this->index();
    }
    }
    ?> 
```

会话控制器

```
<?php

          class SessionController extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->is_logged_in();

}

function dashboard_area(){

    $data['main_content'] = 'dashboardView';
    $this->load->view('dashboardTemplate/template', $data);

}

function is_logged_in()
{
    $is_logged_in = $this->session->userdata('is_logged_in');
    if(!isset($is_logged_in) || $is_logged_in != true)
    {
        echo 'You don\'t have permission to access this page.';
        die();
        //$this->load->view('login_form');
    }else {

    return true;

    }
}

       }
  ?> 
```

我如何在会话中存储用户名，然后在页面中打印出来......我不想在每个控制器中保存用户名

如果有人有更好的实施建议，请分享给我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:01:28.467

```
$username = $this->session->userdata('username');

//Pass it in an array to your view like
$data['username']=$username;   
$this->load->view('test',$data);

//Then in you view you can display it as:
 echo $username; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T12:17:08.297

控制器文件 $data = array('username' => $result->name, );

查看文件

```
 <?php echo $this->session->userdata('username')?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:57:41.270

只需将用户名存储在用户数据中（您已经这样做了！）

```
$this->session->set_userdata('username') = 'John Doe'; 
```

并像那样检索它

```
$username = $this->session->userdata('username'); 
```

# .net - DateTime 格式 - 我做错了什么？

> ID：14336123
> 
> 赞同：0
> 
> 时间：2013-01-15T10:50:54.737
> 
> 标签：.net, datetime-format, datetime-parsing

我有这个字符串：“2013 年 1 月 14 日 9:15:00 EST”。

据我了解，格式如下：d。MMMM yyyy H:mm:ss EST，但我尝试了以下代码，但没有任何效果。我在这里做错了什么？

```
 private static string[] _dateFormats = new[] {
            @"d. MMMM yyyy H:mm:ss \E\S\T",
            @"d. MMMM yyyy h:mm:ss \E\S\T",
            @"d. MMMM yyyy H:mm:ss E\S\T",
            @"d. MMMM yyyy h:mm:ss E\S\T",
            @"d. MMMM yyyy H:mm:ss EST",
            @"d. MMMM yyyy h:mm:ss EST",
            @"dd-MM-yyyy HH:mm:ss"
        };

    private static DateTimeStyles _styles = DateTimeStyles.AllowLeadingWhite
        | DateTimeStyles.AllowInnerWhite
        | DateTimeStyles.AllowTrailingWhite
        | DateTimeStyles.AllowWhiteSpaces;

    DateTime dt;
    DateTime.TryParseExact(dateTime, _dateFormats, CultureInfo.InvariantCulture, _styles, out dt); 
```

**更新：**

使用丹麦文化信息就可以了。但是，这也不起作用：Tir，2013 年 1 月 15 日 11:00:00

```
DateTime.TryParseExact(test, @"ddd, dd MMM yyyy HH:mm:ss", CultureInfo.GetCultureInfo("da-DK"), _styles, out dt); 
```

Tir 等于 Tue 或“Tuesday”。为什么不被识别？

基本上，我试图解析用于监控 RSS 提要的大量格式错误的日期时间字符串。许多 RSS 提要无法验证，但由于我无法更改这一点，因此无论如何我都需要一个好的方法来解析它们。虽然我有关于使用当前时间作为一种指导方针，因为解析的提要项目不应该超过一个小时。这意味着缺少正确的时区，可以设置为前一小时的最后一分钟。

例如。我得到以下日期时间字符串：Tir，2013 年 1 月 15 日 11:15:00。它没有时区指示，但由于提要项目是在 14:18 UTC 提取的，因此很可能在 14:15 UTC 发布。

这个问题开始是一个有点微不足道的错误修复，但更可能是关于如何解决这个问题的问题。有没有人有一些好主意？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:46:39.663

您将不得不摆脱“EST”时区指示器。它们不兼容并且非常模棱两可。EST 可以是美国 (UTC-5) 和澳大利亚 (UTC+10) 的东部标准时间。CST 是一个有 5 个不同时区的笨蛋。您必须使用 String.SubString() 将其关闭。

否则，该字符串采用丹麦日期的标准格式，不需要 ParseExact()。这在我的 en-US 机器上运行良好：

```
var ci = System.Globalization.CultureInfo.GetCultureInfo("da-DK");
var s = "14\. januar 2013 9:15:00";
var dt = DateTime.Parse(s, ci.DateTimeFormat); 
```

# r - 如何从 RData 查看原始脚本或函数？

> ID：14336125
> 
> 赞同：0
> 
> 时间：2013-01-15T10:51:04.487
> 
> 标签：r, workspace

我在 RCmdr 顶部窗口中创建了一个非常小的脚本（不保存），但我只保存了工作区。

当我重新加载它时，我看不到最初在顶部窗口中的任何内容。我知道我的错误，但是有没有办法从工作区文件中查看我可能调用的函数等的任何提示？我可以看到这些对象 - 但看不到创建它们的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:35:31.917

如果您打开一个新的 R 会话，请尝试按向上箭头键。如果前一个会话正常结束，通常不可见的 .Rhistory 文件通常在新会话开始时加载。如果会话在 GUI 中打开，您可以使用菜单命令显示命令列表。这也可能显示该文件：

```
loadhistory(file = ".Rhistory") 
```

历史是累积的，所以除非你有一个非常长的会话干预，否则你仍然可以让代码返回几个会话。我认为它默认保留最后 500 个条目。实际上结果是 512。见：

```
?history 
```

# java - 查找第三方库抛出的异常

> ID：14336128
> 
> 赞同：1
> 
> 时间：2013-01-15T10:51:09.760
> 
> 标签：java, eclipse, exception, javolution

我希望我能正确解释这一点。我正在使用 Javolution 库来读取和写入 XML 配置文件。我正在使用 XMLStreamReader/Writer。在阅读过程中，我希望读取标签并将其属性存储在 LinkedHashMap 中。但是，我抛出了一个异常，这对我来说似乎没有任何意义，因为它什么时候被抛出以及代码中当前正在发生什么。

使用 Eclipse 调试器，将属性的键和值添加到我的地图时会引发异常。

```
public class Element {
   private HashMap<String, String> attributes = new LinkedHashMap<String, String>();
   ...

   public void setAttribute(String key, String value) {
      ...
      attributes.put(key, value);
   }
} 
```

在添加键和值之后，`this`立即捕获来自 Javolution 的异常：

```
javolution.xml.stream.XMLStreamException: Local name cannot be null 
```

两者都不`key`为`value`空。当它们被添加到地图时，我无法进一步进入代码以查看异常被抛出的位置，没有堆栈跟踪，没有任何文件/行号显示在任何地方以解释异常的位置或什至是如何抛出的。

从对 Javolution 旧实现的快速谷歌搜索中，我可以看到这个特殊的异常仅使用 XMLStreamWriterImpl 类型的几个方法引发。我在每次使用这些方法时都设置了断点，但是调试器直到在代码中很晚才发现它们被使用（并且我的 localName 变量在声明时被初始化）。

有人对我如何确定为什么抛出此异常有任何建议吗？

堆栈跟踪：

```
Java HotSpot(TM) 64-Bit Server VM[localhost:3999]   
    Thread [main] (Suspended)   
        XMLImplMain$Element.setAttribute(String, String) line: 827  
        XMLImplMain.translate(Element) line: 133    
        XMLImplMain.translate(Element) line: 140    
        XMLImplMain.translate(Element) line: 140    
        XMLImplMain.loadXML(String) line: 118   
        Bootstrap.main(String[]) line: 32   
    Thread [EventWriter] (Running) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:39:09.763

这个 Javolution 库可能没有正确编译，在编译时没有参数**-g**`javac`可能会导致输出 jar 缺少调试信息。您可以找到您当前正在处理的jar的相应源代码，并使用足够的参数重新编译它以使其可以自己调试。

或者，有一个更复杂但不需要自定义编译的解决方法，编写一个 BTrace 脚本并捕获所有 XMLStreamException 的初始化，然后打印出堆栈跟踪，如下所示：

```
package com.sun.btrace.samples;
import com.sun.btrace.annotations.*;
import static com.sun.btrace.BTraceUtils.*;

@BTrace 
public class OnThrow {  
    @OnMethod(clazz = "javolution.xml.stream.XMLStreamException", method = "<init>", location = @Location(Kind.RETURN))
    public static void endMethod(@Self Exception self) {
        jstack();
    }
} 
```

[这里](http://kenai.com/projects/btrace/sources/hg/content/samples/OnThrow.java?rev=317)有类似的例子。[你可以在这里](http://kenai.com/projects/btrace/pages/UserGuide)挖掘得更深一些。

# algorithm - 在连通图中找到具有最大分离度的节点的有效方法

> ID：14336129
> 
> 赞同：0
> 
> 时间：2013-01-15T10:51:10.183
> 
> 标签：algorithm, graph

我正在研究一个图形库。它必须有一个函数可以找到最分离的两个节点，即它们是从源节点到达目标节点之前需要遍历的最小节点数的最大数。

一种天真的方法是计算从每个节点到所有其他节点的分离程度，并对每个节点重复相同的操作。

事实证明，其复杂性是`O(n^2)`。

这个问题有什么更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:56:08.377

使用[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)找到所有对的最短路径。然后遍历结果并找到具有最长路径的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:23:14.603

**在图表上**没有任何假设的情况下，** [Floyd-Warshall](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)是要走的路。**

 ****如果您的图是稀疏的**（即按节点计算的边相对较少，或者`|E|<<|N|^2`），那么[Johnson](http://en.wikipedia.org/wiki/Johnson%27s_algorithm)可能会更快。

**使用单位边权重**（这似乎是您的情况），通过计算每个节点的最远节点（使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)）的幼稚方法导致`O(|N|.|E|)`. 这可能可以进一步改进，但我现在看不到办法。**

# mysql - 是否有用于远程数据应用程序的 MS SQL Compact Edition 的开源替代品？

> ID：14336131
> 
> 赞同：1
> 
> 时间：2013-01-15T10:51:25.003
> 
> 标签：mysql, sql, sql-server, open-source, sql-server-ce

我们目前在客户端机器上使用 SQL CE 数据库，然后使用 MS SQL 的合并复制/RDA 功能将它们的数据同步到中央服务器。所涉及的数据量很小，中央服务器通常会在大约 95% 的时间内处于空闲状态 - 它仅在数据传入时才真正处于活动状态，并且通常每天/每周同步一次。

相对于 SQL 服务器工作负载/我们正在谈论的数据量（最大为 100 MB），为此的 SQL 标准许可成本很大。我想知道是否有一个开源替代品（mySQL 或类似的）我们可以用作我们的 .NET 应用程序的后端数据存储。我的背景是 Windows Server Admin，对 Linux 来说相对较新，但很乐意尝试并学习一些新技能，只要它不会太难。如果还有其他选择也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:26:05.310

好吧，这是一个相当开放的问题，所以我将为您提供一些关于您可以开始研究的指南。

*   客户端嵌入式数据库。仅根据我的理解，可以嵌入 MySQL 作为嵌入式服务器，对于客户端而言，MySQL 可能是多余的。但是，有很多替代方案。Berkely 数据库系统曾经是这样的一个点。还有其他选择。请记住，您不希望在客户端使用完整的 sql 服务器，您正在寻找轻量级的东西。您可以在此处阅读有关伯克利的信息：[http](http://en.wikipedia.org/wiki/Berkeley_DB) ://en.wikipedia.org/wiki/Berkeley_DB以及此处的替代方案：[单文件，用于 Java 的持久、排序键值存储（替代 Berkeley DB）](https://stackoverflow.com/questions/5032581/alternatives-to-berkeley-db-java)。他们提到 SQLite 可能只是你的胡同。因此，简而言之，您可以在这里使用一整套开源工具。

*   后端数据库。MySQL 会很好地完成这项工作，甚至 PostgreSQL。我上次查看时 PostegreSQL 似乎支持更多的企业功能，但这可能已经改变。就开源而言，这两个是您在 SQL Server 市场上的主要参与者。在您的场景中，任何一个都可以。PostgreSQL 和 MySQL 都可以在 Windows 上运行，因此您不必安装 Linux，尽管我建议您将时间花在 Linux 上，因为我拥有它是非常值得的，而且您得到的安心也很好。

如果您切换到 MySQL/PostgreSQL，那么您有一个主要的症结，即您拥有的当前 RDA/复制技术将不受这些数据库的支持，您可能需要研究如何从头开始实现这一点。因此，虽然可以替换后端甚至前端数据库，但数据的复制会有点问题，但并非不可能。

使用这些技术进行一些测试，然后您将需要决定如何替换该复制。

# c# - 如何自动播放列表框的下一项

> ID：14336134
> 
> 赞同：0
> 
> 时间：2013-01-15T10:51:28.107
> 
> 标签：c#, .net, winforms

我正在使用 listBox 从表单上的媒体播放器播放文件，我正在使用下面的代码在我的列表框中获取文件，因为它会重新调整文件名，现在我可以从 listBox 播放文件，现在我想要下一个项目在时间间隔后自动播放的列表框中。如何执行此操作

```
this.listBox1.DisplayMember = "Name";/*to display name on listbox*/
this.listBox1.ValueMember = "FullName";/*to fetch item value on listbox*/
listBox1.DataSource = GetFolder("..\\video\\"); /*gets folder path*/ 

private static List<FileInfo> GetFolder(string folder)
{
    List<FileInfo> fileList = new List<FileInfo>();

    foreach (FileInfo file in new DirectoryInfo(folder)
                                 .GetFiles("*.mpg",SearchOption.AllDirectories))
    {
        fileList.Add(file);
    }

    return fileList;
} 
```

对于列表框，我使用以下代码

```
private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
{     
    Player.URL = Convert.ToString(listBox2.SelectedItem);
} 
```

对于 listBox1 我正在使用代码

```
 private void listBox1_SelectedIndexChanged(object sender, EventArgs e )
    {

        StreamWriter sw = new StreamWriter("..\\Debug\\List.txt", true);
        //Player.URL = Convert.ToString(listBox1.SelectedItem);
        string selectedItem = listBox1.Items[listBox1.SelectedIndex].ToString();

        //listView1.Items.Add(listBox1.SelectedItem.ToString());

        foreach (object o in listBox1.SelectedItems)
            sw.WriteLine(DateTime.Now + " - " + o);

        sw.Close();

    } 
```

然后我使用一个按钮将选定的 listbox1 文件传输到另一个表单上的 listBox2

```
 private void button1_Click_1(object sender, EventArgs e)
    {

        System.Text.StringBuilder sb = new System.Text.StringBuilder();
        foreach (object item in listBox1.Items)
        {
            sb.Append(item.ToString());
            sb.Append(" ");

        }

       string selectedItem = listBox1.Items[listBox1.SelectedIndex].ToString();

            //listBox2.Items.Add(listBox1.SelectedItem.ToString());
            Form3 frm = new Form3();

            foreach (int i in listBox1.SelectedIndices)
            {

                    frm.listBox2.Items.Add(listBox1.Items[i].ToString());

                frm.Show();
                this.Hide();

            }

        } 
```

上面提到了listbox2代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:19:16.800

你必须拦截[`PlayStateChange`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562460%28v=vs.85%29.aspx)玩家的。一旦获得`int`值`8`，即`MediaEnded`，您可以在所需的时间间隔之后播放列表中的下一个视频。

**[更新] - 这不适用于 .NET 2.0，因此请`Form3.cs`在答案末尾的 [编辑] 中获取正确的版本**

这是`Form3.cs`（.NET 4.5）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using WMPLib;

namespace WindowsFormsApplication10
{
    public partial class Form3 : Form
    {
        public Form3()
        {
            InitializeComponent();

            this.listBox2.DisplayMember = "Name";/*to display name on listbox*/
            this.listBox2.ValueMember = "FullName";/*to fetch item value on listbox*/
            Player.PlayStateChange += Player_PlayStateChange;
        }

        async void Player_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
        {
            if ((WMPLib.WMPPlayState)e.newState == WMPLib.WMPPlayState.wmppsMediaEnded)
            {
                if (listBox2.SelectedIndex + 1 < listBox2.Items.Count)
                {
                    await System.Threading.Tasks.Task.Delay(3000);
                    listBox2.SelectedItem = listBox2.Items[listBox2.SelectedIndex + 1];
                }
            }
        }

        private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
        {
            Player.URL = Convert.ToString(listBox2.SelectedItem.GetType().GetProperty("FullName").GetValue(listBox2.SelectedItem)).ToString();
            Player.Ctlcontrols.play();
        }
    }
} 
```

这是`Form1.cs`（.NET 4.5）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
//using System.Linq;
using System.Text;
//using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication10
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.listBox1.DisplayMember = "Name";/*to display name on listbox*/
            this.listBox1.ValueMember = "FullName";/*to fetch item value on listbox*/
            listBox1.DataSource = GetFolder("..\\video\\"); /*gets folder path*/ 
        }

        private static List<FileInfo> GetFolder(string folder)
        {
            List<FileInfo> fileList = new List<FileInfo>();
            foreach (FileInfo file in new DirectoryInfo(folder)
                                         .GetFiles("*.mpg", SearchOption.AllDirectories))
            {
                fileList.Add(file);
            }
            return fileList;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Form3 frm = new Form3();
            frm.FormClosed += frm_FormClosed;

            foreach (int i in listBox1.SelectedIndices)
            {
                frm.listBox2.Items.Add(new 
                { 
                    Name = ((FileInfo)listBox1.Items[i]).Name, 
                    FullName = ((FileInfo)listBox1.Items[i]).FullName 
                });
                frm.Show();
                this.Hide();
            }
        }

        void frm_FormClosed(object sender, FormClosedEventArgs e)
        {
            this.Show();
        }
    }
} 
```

**[编辑] - 这应该适用于 .NET 2.0**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using WMPLib;

namespace WindowsFormsApplication10
{
    public partial class Form3 : Form
    {
        System.Timers.Timer _timer = new System.Timers.Timer();
        object _locker = new object();

        public Form3()
        {
            InitializeComponent();

            this.listBox2.DisplayMember = "Name";/*to display name on listbox*/
            this.listBox2.ValueMember = "FullName";/*to fetch item value on listbox*/
            Player.PlayStateChange += Player_PlayStateChange;

            _timer.Elapsed += _timer_Elapsed;
            _timer.Interval = 3000;

        }

        void _timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            _timer.Stop();
            lock (_locker)
            {
                this.Invoke((MethodInvoker)delegate
                {
                    if (listBox2.SelectedIndex + 1 < listBox2.Items.Count)
                    {
                        listBox2.SelectedItem = listBox2.Items[listBox2.SelectedIndex + 1];
                    }
                });
            }
        }

        void Player_PlayStateChange(object sender, AxWMPLib._WMPOCXEvents_PlayStateChangeEvent e)
        {
            if ((WMPLib.WMPPlayState)e.newState == WMPLib.WMPPlayState.wmppsMediaEnded)
            {
                _timer.Start();
            }
            else if ((WMPLib.WMPPlayState)e.newState == WMPLib.WMPPlayState.wmppsReady)
            {
                Player.Ctlcontrols.play();
            }
        }

        private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
        {
            Player.URL = Convert.ToString(listBox2.SelectedItem.GetType().GetProperty("FullName").GetValue(listBox2.SelectedItem, null)).ToString();
        }
    }
} 
```

# xcode - xcode 4.4.1 中的静态库

> ID：14336135
> 
> 赞同：0
> 
> 时间：2013-01-15T10:51:29.467
> 
> 标签：xcode, static-libraries

我需要在我的项目的 xcode 中制作一个静态库，以便我可以通过链接它来使用它的其他项目，我通过 icodeblog.com 上制作静态库的教程
我有以下一些问题？

1）-图书馆实际上包含Wat吗？它包含项目的 .h 和 .m 文件的编译版本还是仅包含 .m 文件的编译版本？

2）-如果它包含编译的.h和.m文件，那么为什么我们需要在我们使用静态库的项目中添加.h文件（通过使用复制头选项）

3)-即使在将 .h 文件添加到该项目之后，为什么还会出现以下错误？“$OBJC_CLASS_NAME 出现在 CLASS.o 中”未找到...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:01:12.910

为了制作一个静态库，我衷心推荐[这种方法](https://github.com/jverkoey/iOS-Framework)

要回答您的问题：

1.  它包含 .h 和 .m 文件内容的目标代码。
2.  头文件允许您使用库中的代码。如果没有头文件，您的项目将不知道该调用什么。
3.  如果您使用的是正确的头文件，这向我表明您没有链接到正确的库或者该库的构建不正确。您使用的指南是否正确？我指向的指南对我和其他许多人都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:48:48.077

我得到了问题的答案......这是因为无法在模拟器上测试库

只需要在设备上进行测试..这就是为什么。我收到了“3)”中提到的错误

# python - Python matplotlib使用颜色图改变contourf图中指定值的颜色

> ID：14336138
> 
> 赞同：3
> 
> 时间：2013-01-15T10:51:49.230
> 
> 标签：python, matplotlib

我正在尝试使用颜色图在 matplotlib 中创建一个填充的等高线图。我想改变指定值的颜色。

例如，

```
levs = [-3,-1,1,3]
plt.contourf(x,y,z,levs,cmap=cm.jet,extend='both') 
```

我希望 -1 和 1 到白色之间的颜色保持其他颜色的默认颜色图。

对不起，我的英语不好。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:29:06.677

我只会在相同的等高线图中过度绘制，然后只使用 -1 和 1 之间的级别，颜色为白色。

例如：

```
from matplotlib import pyplot as plt
from matplotlib import cm
import numpy as np

x, y = np.mgrid[-100:100,-100:100]
x /= 10.
y /= 10.
r = np.sqrt(x*x+y*y)
z = 10*np.sin(r)/(r+0.01)
levels = [-4, -3, -2, -1, 1, 2, 3, 4]
plt.contourf(x, y, z, levels=levels, extend='both', cmap=cm.jet)
levels = [-1, 1]
plt.contourf(x, y, z, levels=levels, colors='w')
plt.savefig('contours.png') 
```

*更新*

如果您想要更多控制，请将`colors`关键字设置`contourf`为 matplotlib 颜色元组，其元素数量与级别相同（减 1：颜色对应于级别边界*之间的间隔）。*然后，您不需要过度绘制单独的轮廓，*并且*您的颜色条也是正确的：

```
# same as before
levels = [-4, -3, -2, -1, 1, 2, 3, 4]
plt.contourf(x, y, z, levels=levels, extend='both', colors=('#ff0000', '#ff9900', '#999900', 'w', '#009999', '#0099ff', '#0000ff'))
plt.savefig('contours.png') 
```

更好的方法可能是定义您自己的颜色图，但是您可能会遇到必须将颜色图与轮廓级别完全匹配的问题。这就是为什么方便地`colors`存在关键字的原因。

# mysql - MySQL 查询 - 包括没有记录的日期

> ID：14336142
> 
> 赞同：1
> 
> 时间：2013-01-15T10:52:07.590
> 
> 标签：mysql, jasper-reports

我有一个显示图表的报告。X 轴使用来自以下查询的日期。在查询没有返回日期的情况下，我得到了空白，并且更愿意返回一个值。有没有办法强制一个没有记录的日期？

```
SELECT
    DATE(instime),
    CASE
        WHEN direction = 1 AND duration > 0 THEN 'Incoming'
        WHEN direction = 2 THEN 'Outgoing'
        WHEN direction = 1 AND duration = 0 THEN 'Missed'
    END AS type,
    COUNT(*)
FROM taxticketitem
GROUP BY
    DATE(instime),
    CASE
        WHEN direction = 1 AND duration > 0 THEN 'Incoming'
        WHEN direction = 2 THEN 'Outgoing'
        WHEN direction = 1 AND duration = 0 THEN 'Missed'
    END
ORDER BY DATE(instime) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:54:33.393

一种可能的方法是创建一个日期表和`LEFT JOIN`你的表。该表可能如下所示：

```
CREATE TABLE `datelist` (
 `date` DATE NOT NULL,
 PRIMARY KEY (`date`)
); 
```

并填写了从 Jan-01-2000 到 Dec-31-2050 之间的所有日期（这是我的[**日期生成器脚本**](http://www.sqlfiddle.com/#!2/a25b1/1)）。

接下来，像这样编写您的查询：

```
SELECT datelist.date, COUNT(taxticketitem.id) AS c
FROM datelist
LEFT JOIN taxticketitem ON datelist.date = DATE(taxticketitem.instime)
WHERE datelist.date BETWEEN `2012-01-01` AND `2012-12-31`
GROUP BY datelist.date
ORDER BY datelist.date 
```

`LEFT JOIN`并且从右表中计算非空值可确保计数正确（如果给定日期不存在行，则为 0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:03:40.653

您需要为`LEFT JOIN`您的表格设置一组日期。不幸的是，MySQL 缺乏动态生成它的方法。

您需要准备一个表格，其中包含从 0 到 99999 的 100000 个连续整数（或者您认为您的最大报告范围是多长时间）：

```
CREATE TABLE series (number INT NOT NULL PRIMARY KEY); 
```

并像这样使用它：

```
SELECT  DATE(instime) AS r_date, CASE ... END AS type, COUNT(instime)
FROM    series s
LEFT JOIN
        taxticketitems ti
ON      ti.instime >= '2013-01-01' + INTERVAL number DAY
        AND ti.instime < '2013-01-01' + INTERVAL number + 1 DAY
WHERE   s.number <= DATEDIFF('2013-02-01', '2013-01-01')
GROUP BY
        r_date, type 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:09:32.147

以前必须做类似的事情。

您需要有一个子选择来生成日期范围。您想要的所有日期。将开始日期添加到数字中最简单：-

```
SELECT DATE_ADD(SomeStartDate, INTERVAL (a.I + b.1 * 10) DAY)
FROM integers a, integers b 
```

给定一个名为 integers 的表，其中有一个名为 i 的列，其中 10 行包含 0 到 9，SQL 将为您提供从*SomeStartDate开始的 100 天范围*

然后，您可以将您的实际数据与该数据进行左连接以获得完整范围。

# python - Subprocess.Popen() : 隐藏 cmd shell

> ID：14336145
> 
> 赞同：6
> 
> 时间：2013-01-15T10:52:12.783
> 
> 标签：python, windows, cmd, subprocess

我试图在启动时调用一个可执行文件，它将调用另一个可执行文件本身。对于第一部分，我只是将可执行文件的路径添加到`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`，它可以工作，我的可执行文件在启动时被调用。

后者包含以下几行：

```
startupinfo = subprocess.STARTUPINFO()
startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW
startupinfo.wShowWindow = subprocess.SW_HIDE
proc = subprocess.Popen(command, startupinfo=startupinfo) 
```

但是，计算机启动时会弹出命令外壳 (cmd)。一切正常，但它是可见的而不是隐藏的......所以基本上，我该如何隐藏这个命令外壳？

使用时`ProcessExplorer`，我有以下层次结构：

```
+ System
|_ Interrupts
|_ smss.exe
    |_ some processes...
+ explorer.exe
    |_ some processes...
|_ MYSCRIPT.EXE 
```

这是我尝试实现的顺序：

*   我创建了一个 ISO 文件，其中包含我想在 VM 上运行的所有 Python 可执行文件。其中一个 ( `master.exe`) 呼叫其他人。
*   我创建了一个自动挂载后者的虚拟机
*   准备好的虚拟机有一个计划任务，它调用`D:\master.exe`
*   `master.exe`（在我们这里不关心的其他任务中）增加了`D:\myscript.exe`价值`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`
*   虚拟机重新启动
*   `D:\myscript.exe`正在运行（并且它工作正常并且有人参与），但它确实在命令提示符下运行，我希望它是不可见的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:57:26.697

这是 Python 程序员遇到的典型问题——因此，Python 本身提供了解决方案。它已经被问过很多次了，例如，[here](https://stackoverflow.com/questions/9705982/pythonw-exe-or-python-exe)，但对你来说，问题有点复杂。

这完全取决于您是使用`python.exe`还是`pythonw.exe`运行脚本。对于第一个，打开了一个控制台，对于第二个则没有。

当您使用已编译的脚本时，您必须告诉“编译器”您要使用哪个版本。[假设您使用的是 py2exe，您可以在 SO 上](https://stackoverflow.com/questions/3542119/create-launchable-gui-script-from-python-setuptools-without-console-window)查看这篇文章。这里详细说明如何进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:37:43.210

正在打开的控制台窗口可能属于运行脚本的 Python 进程。向我们展示注册表中运行您的脚本的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:15:33.223

如果您运行控制台程序，Windows 将创建一个控制台窗口。“python.exe”是一个控制台程序。

如果您不想要控制台窗口，可以使用“pythonw.exe”而不是“python.exe”运行 Python 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T05:25:29.503

你可以编译成exe格式。当我遇到这个问题时，我使用**py2exe**将 python 文件编译为不可见的可执行文件。

您所要做的就是更改 setup.py 文件（用于编译），从

```
setup(console=['__main__.py'], options={"py2exe":{"includes":["sip"]}}) 
```

到

```
setup(windows=['__main__.py'], options={"py2exe":{"includes":["sip"]}}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-03T19:43:16.367

我有同样的问题，我使用[了 Pyinstaller](http://www.pyinstaller.org/)。

Pyinstaller 是一个智能的跨平台工具，可以将 .py 文件编译成独立的可执行文件。

通过以下方式安装它：

`pip install pyinstaller`（更多信息[在这里](http://pyinstaller.readthedocs.io/en/stable/installation.html)）

使用以下命令**隐藏**控制台（使您的脚本成为一个进程）：

```
pyinstaller yourfilename.py -F --windowed 
```

（使用“-F”标志，您将获得一个 .exe 文件，使用“--windowed”标志，控制台将被隐藏）

# angularjs - 根据调用元素改变控制器的行为

> ID：14336146
> 
> 赞同：0
> 
> 时间：2013-01-15T10:52:13.730
> 
> 标签：angularjs

我有一个控制器被两个不同的视图使用：

```
<div ng-controller="MyCtrl" ng-include="slice = false">
    <span ng-repeat="value in values">{{ value }}</span>
</div>
...
<span ng-controller="MyCtrl">
    <div ng-repeat="value in values">{{ value }}</div>
</span> 
```

控制器：

```
var MyCtrl = function($scope){
    $scope.values =  ['a','fancy','array'];
    // if called from span
    //$scope.values =  ['a','fancy','array'].slice(2);
} 
```

我想知道是否可以从调用控制器的元素中检测到更改控制器的行为。

*更新：*根据@matys84pl 的回答，这是我的新控制器

```
MenuCtrl = function($scope) {
    $scope.slice = true;
    if($scope.slice === false) { // wont go inside 
        $scope.data = ['a','fancy','array'];
    } else {
        $scope.data = ['a','fancy','array'].slice(2);
    }
    console.log($scope.slice); // still true for both
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:07:33.967

规则是控制器不应该知道视图......所以你应该使用[ngInit](http://docs.angularjs.org/api/ng.directive%3angInit)将视图中的某些内容传递给控制器​​，如下所示：

```
<div ng-controller="MyCtrl">
    <span ng-repeat="value in values">{{ value }}</span>
</div>
...
<span ng-controller="MyCtrl" ng-init="isDifferent = true">
    <div ng-repeat="value in values">{{ value }}</div>
</span> 
```

然后检查控制器中的 isDifferent 值。

**更新：**带有工作示例的 plunker：[http ://plnkr.co/edit/zUgLSQcAaZX5j6JBoQAO](http://plnkr.co/edit/zUgLSQcAaZX5j6JBoQAO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:15:41.583

```
<div ng-controller="MyCtrl" behavior=2>... 
```

请原谅我懒惰的js——我习惯了coffeescript

```
var MyCtrl = function($scope, $attrs){
    if $attrs.behavior != 2
        $scope.values =  ['a','fancy','array'];
    else
        $scope.values =  ['a','fancy','array'].slice(2);
} 
```

我想您可以通过将 $attrs 换成 $element 并更改您的测试来做类似的事情。

# mysql - 在mysql中使用group by将一个字段值重用到另一个字段

> ID：14336154
> 
> 赞同：0
> 
> 时间：2013-01-15T10:52:48.357
> 
> 标签：mysql, function, stored-procedures

我在mysql中有以下查询：

```
INSERT INTO table_name(field1, field2, field3, field4......)
SELECT  field1, field2, 
        function_name(field3,'2012-01-01'), 
        function_name(field3,'2012-01-01')/field1..... 
from table_name2 group by field1, field2; 
```

我的问题是上述查询工作正常，但由于我多次使用 function_name(field3,'2012-01-01') ，因此执行时间过长。现在我希望我将执行一次 function_name(field3,'2012-01-01') 并将用于 field3 和 field4。我不会再次为 field4 调用 function_name，因为我已经为 field filed3 执行了它。

所以查询应该是这样的

```
INSERT INTO table_name(field1, field2, field3,field4......)
SELECT  field1, field2, 
         @res:=function_name(field3,'2012-01-01'), 
        @res/field1..... 
 from table_name2 
 group by field1, field2; 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:58:13.540

您可以使用

`INSERT INTO table_name(field1, field2, field3, field4......) SELECT field1, field2, function_name(field3,'2012-01-01') as @res, @res/field1..... from table_name2 group by field1, field2;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T04:34:03.203

请将查询更改为

`"INSERT INTO table_name(field1, field2, field3, field4......) SELECT field1, field2, @res := function_name(field3,'2012-01-01'), @res/field1..... from table_name2 group by field1, field2;`

这与您指定的相同。这是正确的我已经这样检查了

```
mysql> select ( @point := sum(points)), @point/12  from votes;
+--------------------------+-------------+
| ( @point := sum(points)) | @point/12   |
+--------------------------+-------------+
|                       20 | 1.000000000 |
+--------------------------+-------------+ 
```

# java - tomcat：如何追踪连接泄漏？

> ID：14336155
> 
> 赞同：1
> 
> 时间：2013-01-15T10:52:51.273
> 
> 标签：java, apache, tomcat

我们正在运行托管在 Tomcat 上的 Web 应用程序，它会造成大量连接泄漏。

如何 在 Tomcat中查找/追踪**泄漏连接？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:58:44.057

如果您使用的是 Tomcat 连接池，则可以将**logAbandoned**属性设置为 true。

[http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:01:59.980

您可以为此使用分析器。例如使用Yourkit，您可以找出增加的连接对象，然后跟踪这些连接的分配点。

# vba - 扫描 Excel 列以查找 VBA 中的特定单词

> ID：14336159
> 
> 赞同：0
> 
> 时间：2013-01-15T10:52:56.163
> 
> 标签：vba, excel

目前我正在处理数据库 Excel 电子表格，我目前正在使用 VBA 来实现系统的一些自动功能。我是 VBA 新手，所以我需要你的帮助 :)

我的问题是：我有一个雕像列，用户需要从下拉列表中选择“完成”或“进行中”。我需要一个可以扫描特定列（例如 S3）以查找“完成”一词的程序。一旦检测到这个词，系统会自动向特定用户发送一封电子邮件，告诉他任务已经完成。

谁能帮我？

谢谢！:)

更新：我编写了以下代码来搜索完整的单词并向用户发送电子邮件（这是一个粗略的想法）

```
Sub For_Loop_With_Step()

    Dim lCount As Long, lNum As Long
    Dim MyCount As Long

    MyCount = Application.CountA(Range("S:S"))

    For lCount = 1 To MyCount - 1 Step 1
    If Cells(lCount + 2, 19) = "Complete" Then
    Call Send_Email_Using_VBA
    Else
    MsgBox "Nothing found"
    End If

    Next lCount

    MsgBox "The For loop made " & lNum & " loop(s). lNum is equal to " & lNum

End Sub 
```

.

```
Sub Send_Email_Using_VBA()

    Dim Email_Subject, Email_Send_From, Email_Send_To, _
    Email_Cc, Email_Bcc, Email_Body As String
    Dim Mail_Object, Mail_Single As Variant
    Email_Subject = "Testing Results"
    Email_Send_From = "fromperson@example.com"
    Email_Send_To = "toperson@example.com"
    'Email_Cc = "someone@example.com"
    'Email_Bcc = "someoneelse@example.com"
    Email_Body = "Congratulations!!!! You have successfully sent an e-mail using VBA !!!!"
    On Error GoTo debugs
    Set Mail_Object = CreateObject("Outlook.Application")
    Set Mail_Single = Mail_Object.CreateItem(0)
    With Mail_Single
    .Subject = Email_Subject
    .To = Email_Send_To
    .cc = Email_Cc
    .BCC = Email_Bcc
    .Body = Email_Body
    .send
    End With
    debugs:
    If Err.Description <> "" Then MsgBox Err.Description
End Sub 
```

![在此处输入图像描述](../Images/8ceedbd9814417099788416020656bc2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:23:45.283

试试这个（**尝试和测试**）

**截图**：

![在此处输入图像描述](../Images/3ce3173085a2048985ea3908ab59ea53.png)

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim i As Long, lRow As Long
    Dim ExitLoop As Boolean
    Dim aCell As Range, bCell As Range

    '~~> Set this to the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Find the word in the relevant column. 19 is S Column
        Set aCell = .Columns(19).Find(What:="Complete", LookIn:=xlValues, _
                    LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                    MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            '~~> Update Col T appropriately
            '~~> This is required so that mail doesn't go for the same row again
            '~~> When you run the macro again

            Set bCell = aCell

            If Not .Range("T" & aCell.Row).Value = "Mail Sent" Then
                If SendEmail = True Then
                    .Range("T" & aCell.Row).Value = "Mail Sent"
                Else
                    .Range("T" & aCell.Row).Value = "Error: Mail Not Sent"
                End If
            End If

            Do While ExitLoop = False
               Set aCell = .Columns(19).FindNext(After:=aCell)

               If Not aCell Is Nothing Then
                    If aCell.Address = bCell.Address Then Exit Do

                    If Not .Range("T" & aCell.Row).Value = "Mail Sent" Then
                        If SendEmail = True Then
                            .Range("T" & aCell.Row).Value = "Mail Sent"
                        Else
                            .Range("T" & aCell.Row).Value = "Error: Mail Not Sent"
                        End If
                    End If
               Else
                   ExitLoop = True
               End If
            Loop
        End If
    End With
End Sub

Function SendEmail() As Boolean
    Dim OutApp As Object, OutMail As Object

    On Error GoTo Whoa

    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)

    With OutMail
        .To = "toperson@example.com"
        .Subject = "Testing Results"
        .Body = "Your Message Goes Here"
        .Display
    End With

    DoEvents

    SendEmail = True

LetsContinue:
    On Error Resume Next
    Set OutMail = Nothing
    Set OutApp = Nothing
    On Error GoTo 0

    Exit Function
Whoa:
    SendEmail = False
    Resume LetsContinue
End Function 
```

# javascript - 使用 jQuery 维护 JavaScript 中函数执行的顺序

> ID：14336163
> 
> 赞同：1
> 
> 时间：2013-01-15T10:53:03.800
> 
> 标签：javascript, jquery, sequential

我有一个具有以下结构的代码。基本上我的要求是“SELECT”f5中选项的onChange应该在f1之后运行。在 f1 内部 - 首先 f2 必须运行，完成后 f3 必须运行。f2 的完成意味着它还必须确保 f4 运行并完成。我的意思是保持流程，因为如果一些要早点完成的功能被抛在后面，那么我的整个程序就会变得浪费。我猜 deferred 有解决方案，因此我尝试将它与管道一起使用。但由于我不精通维持这种流程，我无法获得预期的结果。如果可以的话请帮忙。

```
<script>
function f1(){
   function f2(){
      ....
      f4();
      ....
   }
   function f3(){
      ....
   }
}

function f4(){}
function f5(){}
</script>
 ....
<select onChange=f5().pipe(f1) >
......
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:06:09.970

**编辑：**您似乎在函数中使用了 $.ajax 。如果您希望在 AJAX 查询完成后运行某些内容，您可以将其设置为在查询返回时运行的回调。例如，您可以根据其他函数定义 f2，如下所示：

```
function f2()
{
    g();
    f4();
    h();
} 
```

如果 f4 使用 AJAX，您可以按如下方式更改定义：

```
function f2()
{
    g();
    f4();
}
function f4()
{
    $.ajax("http://url.com").done(function(){
            h();
            f3();
        });
} 
```

该`done()`函数允许您设置一个函数（在本例中为匿名函数）以在成功返回查询后立即执行。以这种方式定义 f2 后，您不再需要 f1，因此您可以定义另一个函数

```
function f6()
{
    f5();
    f2();
} 
```

然后您可以将 onChange 事件更改为

```
<select onChange="f6()"></select> 
```

另请注意，正如 mattmanser 发布的那样，此代码：`function f(){}`仅定义一个函数，它不运行它。如果您希望函数在定义后立即执行，则可以使用闭包代替。

```
(function f ()
{

})() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:00:38.560

您混淆了函数声明和函数运行。声明函数的顺序无关紧要，只需调用它们的顺序即可。声明：

```
function a() {
    console.log("a");
}

function c() {
    console.log("c");
}

function b() {
    console.log("b");
}

function runAll() {
    a();
    b();
    c();
}

a(); //will print a
runAll(); //will print a b c on different lines 
```

Javascript 也不是异步的，除非你做了，调用函数是阻塞的，在你的函数完成之前程序执行不会继续。在上面的示例中，直到完成运行才会运行`runAll`。`a`

唯一的例外是调用一些异步 jQuery 代码，比如 jQuery.ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:06:54.550

好吧，这将很难完全实现。正如 mattmanser 已经写的那样，函数声明确保所有函数都将被顺序调用。您的问题不清楚的是中间是否会有任何 I/O 回调。假设，在 f2 中，您使用 $.get 从您的站点获取某个 HTML 页面。如果您在该调用下有任何其他代码，这将与您的 fetch 并行运行......除非您将此代码打包到 $.get 成功回调中。所以理论上，javascript中的每个函数调用都会被顺序调用，但是回调机制并不能保证东西也不会被并行执行。

# c# - 线程 - 多个 SerialPort 和一个 DataGridView

> ID：14336167
> 
> 赞同：0
> 
> 时间：2013-01-15T10:53:09.040
> 
> 标签：c#, multithreading, event-handling, serial-port, queue

我有 3 个`SerialPort`组件，其中 2 个有`DataReceived`处理程序。当接收到数据时，它们通过其他`SerialPort` （第三个）发送输出。我知道在我的应用程序中两者都尝试同时发送的可能性并不高`SerialPorts`，但我试图模拟这一点，当然我得到一个`COM PORT`正在使用的错误。

```
private void sendToCOM(String comNumber, String msg, String speed)
    {
        try
        {
            using (SerialPort comPort = new SerialPort(comNumber, Int32.Parse(speed), Parity.None, 8, StopBits.One))
            {
                comPort.Open();
                comPort.Write(msg);
                comPort.Close();
                comPort.Dispose();
            }
        }
        catch(Exception ex)
        {
                cstFuncs.errorHandler(ex.Message, SettingsForm);
        }
    } 
```

我知道每个`SerialPort`人都有自己的线程。

如何创建队列或如何防止两个串行端口尝试同时访问相同的资源（并且不会丢失应该发送的数据）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:58:00.840

您可能没有每个串行端口的线程，而是`DataReceived`处理程序在线程池中执行。这仍然意味着您可以一次读取两个读数。

您可以使用锁定来解决此问题：

将 OutputPortLock 对象添加到您的类：

```
private object OutputPortLock = new object(); 
```

并尝试在写入输出端口之前锁定它：

```
lock(OutputPortLock)
{
    using(SerialPort comPort=....)
    {
        ... write to com port ...
    }
} 
```

这将确保一次只有一个线程尝试写入输出端口。如果其他进程尝试使用 Com Port in Use，您可能仍会收到 Com Port in Use 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:59:57.093

有几种方法可以锁定该`sendToCOM`方法。这将通过导致任何后续调用等待第一次完成来停止该方法执行两次。如果另一个进程尝试使用相同的 ，这将无济于事`SerialPort`，但它将停止任何本地争用。

一种方法是`lock`在对象上使用关键字，如下所示：

```
private readonly object _myLock = new object();

private void sendToCOM(String comNumber, String msg, String speed)
{
    try
    {
        lock(_myLock)
        {
            using (SerialPort comPort = new SerialPort(comNumber, Int32.Parse(speed), Parity.None, 8, StopBits.One))
            {
                comPort.Open();
                comPort.Write(msg);
                comPort.Close();
                comPort.Dispose();
            }
        }
    }
    catch(Exception ex)
    {
        cstFuncs.errorHandler(ex.Message, SettingsForm);
    }
} 
```

另一种方法可能是使用 a `ManualResetEventSlim`（或类似的东西）来达到相同的效果：

```
private ManualResetEventSlim _myLock = new ManualResetEventSlim(true);

private void sendToCOM(String comNumber, String msg, String speed)
{
    _myLock.Wait();
    try
    {
        _myLock.Reset();
        using (SerialPort comPort = new SerialPort(comNumber, Int32.Parse(speed), Parity.None, 8, StopBits.One))
        {
            // ..
        }
    }
    catch(Exception ex)
    {
        cstFuncs.errorHandler(ex.Message, SettingsForm);
    } 
    finally
    {
        _myLock.Set();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T10:57:54.170

您可以做一些事情；

1）建立锁机制。在尝试访问该方法之前，线程将等待直到该锁被解锁，这意味着每个线程将依次触发“sendToCOM”

2）另一种方法是使用 ConcurrentQueue（参见：http: [//msdn.microsoft.com/en-us/library/dd267265.aspx](http://msdn.microsoft.com/en-us/library/dd267265.aspx)）。这是一个线程安全列表，如果需要，您也可以添加 COMport 对象，然后从那里触发它们。例如，这样做有几个问题；

[如何使用 ConcurrentQueue<T> 处理线程](https://stackoverflow.com/questions/4551087/how-to-work-threading-with-concurrentqueuet)

我敢肯定还有更多的方法，但这些是我想到的 2。我会说第二个更可靠，但需要更多的工作才能运行，所以第一个可能是你最感兴趣的。

# jquery - 在backbone.js中调用调用时模型数据未在服务器上接收？

> ID：14336172
> 
> 赞同：0
> 
> 时间：2013-01-15T10:53:39.760
> 
> 标签：jquery, asp.net-mvc, backbone.js

我正在尝试从backbone.js 将模型保存到服务器。我的问题是当我进行 post call 时，所有模型值都在服务器上成功接收，但是我在设置模型 id 后在服务器上进行了 put 调用。它成功地进行了调用，但我在服务器上没有收到模型值，尽管模型在客户端填充了值。我正在使用以下代码。请指导

```
 var isAdd = false;
            if (e.insuranceId != 0) {
                this.model.id = e.insuranceId;
                isAdd = false;
            } else
                isAdd = true;
            this.model.set('PatientId', this.options.patientId);

             this.model.save({}, {
                success: function (model, resp) {
                    console.log('success');
                    if(isAdd)
                    self.model.set(self.model.defaults);
                    self.insuranceId = model.attributes.PatientInsuranceId;;
                    self.saveFrontImageDB();
                    self.showConfirmation();
                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:52:50.503

经过大量的调试和不懈的努力，我发现了问题。服务器端模型和客户端模型之间存在映射问题。

# matplotlib - 如何用pyplot画一条交替线？

> ID：14336180
> 
> 赞同：1
> 
> 时间：2013-01-15T10:54:01.293
> 
> 标签：matplotlib, line

我有一系列 x 坐标（例如：1,2,3,4）和 y 坐标（例如：10,20,30,40）。我希望 pyplot 在两个连续点之间画一条线，同时跳过每隔一条线（例如：在 (1,10) 和 (2,20) 之间画一条线，在 (3,30) 和 (4, 40).) 如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:10:31.477

你的意思是这样的吗？

```
x = [1,2,3,4,5,6]
y = [10,20,30,40,50,60]

for n in np.arange(0,len(x),2):
    plt.plot(x[n:n+2],y[n:n+2]) 
```

![在此处输入图像描述](../Images/c7928b9a1fe48370f663b98caa5d8955.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T18:45:10.030

（复制自上面@Floris 的评论）

快速而肮脏的技巧是在数组中每隔三个位置（X 和 Y）插入 NaN 值。

# eclipse - play.exceptions.JavaExecutionException：无法为 WAS8 中的对象获取对象 @Id

> ID：14336181
> 
> 赞同：0
> 
> 时间：2013-01-15T10:54:12.817
> 
> 标签：eclipse, hibernate, jpa, playframework

这是我在控制器中的代码，在这里我保存我的对象

```
public static void newNdsf(Integer cprNumber,String fstCode,Date startDate,
            Double amount, Date endDate, String isActive, String userCreated, String msg){

    Beneficiary beneficiary = new Beneficiary();
    beneficiary.beneficiaryPK = (new BeneficiaryPK(cprNumber, fstCode, startDate));
    beneficiary.dateCreated = (new Date());
    beneficiary.userCreated = userCreated;
    beneficiary.amount = new BigDecimal(amount);
    beneficiary.dateLastUpdate = (new Date());
    beneficiary.userLastUpdate = userCreated; 
    beneficiary.endDate = endDate;

    if(isActive.charAt(0) == Constants.IN_ACTIVE || isActive.charAt(0) == Constants.ACTIVE)
        beneficiary.isActive = isActive.charAt(0);
    else
        System.out.println("in valid is Active value entered in service");  
    beneficiary.save();
    int count = new CRSServices().savePersonDetails(cprNumber);
    System.out.println("Person Data saved from Service : " + count);
    msg = msg.concat("Entered Successfully");
    renderText(msg);
} 
```

在模型中，我覆盖了保存方法以捕获一些异常

```
@Override

 public <T extends JPABase> T save() 
{
        long startTs = System.currentTimeMillis();
        if (endDate != null && beneficiaryPK != null && beneficiaryPK.startDate != null &&    endDate.before(beneficiaryPK.startDate)){
            throw new RuntimeException("startdate_after_end_date");
        }
        Object result  = super.save();
        logger.debug("Save Took: {} " , System.currentTimeMillis() - startTs);
        return (T) result;
    } 
```

此代码适用于 WAS6

但是当我在 WAS8 中使用它时

它给了我这个例外

```
@6d2l11n03
Internal Server Error (500)

Execution exception (In /app/models/Beneficiary.java around line 221)
ValidationException occured : error during validation of 

play.exceptions.JavaExecutionException: error during validation of <unknown>
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:290)
    at play.server.ServletWrapper$ServletInvocation.execute(ServletWrapper.java:476)
    at play.Invoker$Invocation.run(Invoker.java:187)
    at play.server.ServletWrapper$ServletInvocation.run(ServletWrapper.java:467)
    at play.Invoker.invokeInThread(Invoker.java:61)
    at play.server.ServletWrapper.service(ServletWrapper.java:117)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1214)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1027)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:895)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659)
Caused by: javax.validation.ValidationException: error during validation of <unknown>
    at org.apache.bval.jsr303.ClassValidator.unrecoverableValidationError(ClassValidator.java:633)
    at org.apache.bval.jsr303.ClassValidator.validate(ClassValidator.java:161)
    at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:113)
    at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:71)
    at org.hibernate.action.EntityInsertAction.preInsert(EntityInsertAction.java:177)
    at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:72)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:267)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:259)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:178)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:345)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1206)
    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:791)
    at play.db.jpa.JPABase._save(JPABase.java:47)
    at play.db.jpa.GenericModel.save(GenericModel.java:187)
    at models.Beneficiary.save(Beneficiary.java:221)
    at controllers.NdsfService.newNdsf(NdsfService.java:189)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:413)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:408)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:182)
    ... 27 more
Caused by: play.exceptions.UnexpectedException: Unexpected Error
    at play.db.jpa.JPAPlugin$JPAModelLoader.keyValue(JPAPlugin.java:491)
    at play.db.jpa.JPABase._key(JPABase.java:96)
    at play.db.jpa.JPABase.hashCode(JPABase.java:226)
    at org.apache.bval.jsr303.GraphBeanIdentity.hashCode(GraphBeanIdentity.java:123)
    at java.util.HashMap.getEntry(HashMap.java:510)
    at java.util.HashMap.get(HashMap.java:498)
    at org.apache.bval.jsr303.GroupValidationContextImpl.collectValidated(GroupValidationContextImpl.java:133)
    at org.apache.bval.jsr303.ClassValidator.validateBeanNet(ClassValidator.java:421)
    at org.apache.bval.jsr303.ClassValidator.validate(ClassValidator.java:141)
    ... 45 more
Caused by: play.exceptions.UnexpectedException: Cannot get the object @Id for an object of type class models.Beneficiary
    at play.db.jpa.JPAPlugin$JPAModelLoader.keyField(JPAPlugin.java:511)
    at play.db.jpa.JPAPlugin$JPAModelLoader.keyValue(JPAPlugin.java:489)
    ... 53 more 
```

如果有人可以帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:20:32.263

想通了

在我的对象之前我只有

```
@EmbeddedId
    public BeneficiaryPK beneficiaryPK; 
```

这在 WAS 6 中有效，但在 WAS 8 中无效

所以现在我添加了@Id，并且两个注释都在 WAS 8 中工作

```
 @EmbeddedId
    @Id  
    public BeneficiaryPK beneficiaryPK; 
```

希望这会有所帮助

# zend-framework2 - 扩展完整的 ZfcUser 模块

> ID：14336185
> 
> 赞同：0
> 
> 时间：2013-01-15T10:54:21.960
> 
> 标签：zend-framework2, zfcuser

我想扩展 ZfcUser 模块，但我不想编辑原始 ZfcUser 文件。如何扩展 module.php、视图和表单文件等文件？或者甚至可以扩展整个模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:21:19.817

您需要扩展`ZfcUser\Module`课程的原因是什么？在大多数情况下，您可以在自定义用户模块类中执行此操作，例如`MyUser\Module`.

对于其他功能，请查看我对问题[ZF2 的回答，使用供应商模块的表单类的最佳实践是什么？](https://stackoverflow.com/questions/8783873/zf2-whats-the-best-practice-for-working-with-vendor-modules-form-classes/9802230#9802230)以及我之后基于此创建的[blogpst 。](http://juriansluiman.nl/en/article/117/use-3rd-party-modules-in-zend-framework-2)关于 SO 的问题仍然使用旧机制，`Zend\Di`但我的博客文章已更新为使用该`Zend\ServiceManager`方法。

# junit4 - 如果我的测试不在 JUnit4 TestSuite 中，Sonar (JaCoCo) 的覆盖率为 0%

> ID：14336191
> 
> 赞同：1
> 
> 时间：2013-01-15T10:54:44.983
> 
> 标签：junit4, sonarqube, jacoco

嗨，我正在使用声纳，我喜欢它...

但是我的最新项目有点奇怪。

如果我将所有测试都放在 JUnit 4 中，@TestSuite JaCoCo 在我运行时的覆盖率为 86,2%（Groove baby !!!）`mvn sonar:sonar`

如果我让测试自己进行，即使单元测试成功 100,0%，我也会得到 0% 的覆盖率

我不需要这个项目的 TestSuite 任何关于 JaCoCo 为什么这样做的线索？

顺便说一句：我正在使用 Maven 2.2.1 + Sonar 3.4.1 + sonar-maven-plugin 1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:58:15.083

如果您的测试遵循“Test*.java”和“*Test.java”命名约定，则无需定义测试套件。

您可以查看 JaCoCo 分析测试的以下示例应用程序：[https ://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/maven/ut-maven- jacoco-runTests](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/maven/ut-maven-jacoco-runTests)

# javascript - 如何防止javascript中的非字母数字输入？

> ID：14336195
> 
> 赞同：9
> 
> 时间：2013-01-15T10:55:00.120
> 
> 标签：javascript, jquery, regex

```
$("#user").keyup(function(e){ 
    var regx = /^[A-Za-z0-9]+$/;
    if (!regx.test('#user')) 
    {$("#infoUser").html("Alphanumeric only allowed !");}
);} 
```

`#user`是文本输入，如果用户输入除字母和数字以外的任何内容，我想显示警告。
在上述情况下，无论键入什么，都会出现警告。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T10:56:55.187

改变：

```
if (!regx.test('#user')) 
```

到

```
if (!regx.test( $(this).val() ) ) 
```

做：

```
$("#user").keyup(function(e){     
    var str = $.trim( $(this).val() );
    if( str != "" ) {
      var regx = /^[A-Za-z0-9]+$/;
      if (!regx.test(str)) {
        $("#infoUser").html("Alphanumeric only allowed !");
      }
    }
    else {
       //empty value -- do something here
    }
}); 
```

[JS 小提琴](https://jsfiddle.net/04qbyk42/)示例

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T11:00:03.300

您必须使用 #user 元素值而不是 '#user' 字符串进行测试

```
$("#user").keyup(function(e){ 
    var regx = /^[A-Za-z0-9]+$/;
    if (!regx.test($('#user').val()))  // .
    {$("#infoUser").html("Alphanumeric only allowed !");}
);} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T10:57:53.187

这条线

```
regx.test('#user') 
```

你有没有测试过字符串`#user`，那是一个有坏字符的字符串（the `#`）。所以它总是说不允许。

`$("#user")`通过使用来使用您那里的实际价值`$(this).val()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-31T09:31:15.297

```
$('#alpha').bind('keypress', function (event) {
var regex = new RegExp("^[a-zA-Z\b]+$");
var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
if (!regex.test(key)) {
   event.preventDefault();
   return false;
}
});

$('#numeric').bind('keypress', function (event) {
var regex = new RegExp("^[0-9\b]+$");
var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
if (!regex.test(key)) {
   event.preventDefault();
   return false;
}
});

$('#alphanumeric').bind('keypress', function (event) {
var regex = new RegExp("^[a-zA-Z0-9\b]+$");
var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
if (!regex.test(key)) {
   event.preventDefault();
   return false;
}
});

$('#alphanumericspecial').bind('keypress', function (event) {
var regex = new RegExp("^[a-zA-Z0-9 .]+$");
var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
if (!regex.test(key)) {
   event.preventDefault();
   return false;
}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T11:01:55.003

```
 function isNotAlphanumeric(){
        return (! val.match(/^[a-zA-Z]+$/))
        //return val.match(/^[a-zA-Z0-9]+$/) ? false : true;
   } 
```

因此，如果 val 是字母数字，则返回 false。所以根据返回值采取适当的行动。您可以在按键事件中调用此方法。

# ios - 在两个部分中搜索时崩溃

> ID：14336199
> 
> 赞同：12
> 
> 时间：2013-01-15T10:55:20.627
> 
> 标签：ios, uitableview, cocoa-touch, nsfetchedresultscontroller, uisearchdisplaycontroller

我有一个`NSFetchedResultController`不同的部分。当我尝试使用搜索时发生崩溃`UISearchDisplayController`：

```
*** Assertion failure in -[UITableViewRowData rectForRow:inSection:], /SourceCache/UIKit/UIKit-2372/UITableViewRowData.m:1630

*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'request for rect at invalid index path (<NSIndexPath 0x1d2c4120> 2 indexes [0, 1])' 
```

我检查了一下，我的搜索数组确实有两个条目（预期结果）：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

它**返回 1**

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

它**返回 2**

有趣的是，如果我只有一个部分，它就可以完美运行。

请帮忙！:)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-24T23:44:39.820

不知道你是否明白了，我想你做到了，但假设你正在使用

```
[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

在你的 cellForRowAtIndexPath

做

```
 if (tableView == self.searchDisplayController.searchResultsTableView) {
    cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
 } else {
    cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
 } 
```

还要确保您使用的是 self.tableView

# jquery - Ajax 表单发送成功但没有电子邮件

> ID：14336203
> 
> 赞同：0
> 
> 时间：2013-01-15T10:55:31.347
> 
> 标签：jquery, ajax, forms

我有一个**AJAX**表单，它说它成功但仍然没有收到任何电子邮件，非常烦人。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script type="text/javascript">

/*
    Code by David McKeown
    www.craftedbydavid.com
*/

jQuery(document).ready(function () { // wait until the document is ready
    jQuery('#send').click(function(){ // when the button is clicked the code executes
        jQuery('.error').fadeOut('slow'); // reset the error messages (hides them)

        var error = false; // we will set this true if the form isn't valid

        var name = jQuery('input#name').val(); // get the value of the input field
        if(name == "" || name == " ") {
            jQuery('#err-name').fadeIn('slow'); // show the error message
            error = true; // change the error state to true
        }

        var phone = jQuery('input#phone').val(); // get the value of the input field
        if(phone == "" || phone == " ") {
            jQuery('#err-phone').fadeIn('slow'); // show the error message
            error = true; // change the error state to true
        }

        var email_compare = /^([a-z0-9_.-]+)@([da-z.-]+).([a-z.]{2,6})$/; // Syntax to compare against input
        var email = jQuery('input#email').val(); // get the value of the input field
        if (email == "" || email == " ") { // check if the field is empty
            jQuery('#err-email').fadeIn('slow'); // error - empty
            error = true;

        }else if (!email_compare.test(email)) { // if it's not empty check the format against our email_compare variable
            jQuery('#err-emailvld').fadeIn('slow'); // error - not right format
            error = true;
        }

        if(error == true) {
            jQuery('#err-form').slideDown('slow');
            return false;
        }

        var data_string = jQuery('#ajax-form').serialize(); // Collect data from form
        //alert(data_string);

        jQuery.ajax({
            type: "POST",
            url: jQuery('#ajax-form').attr('action'),
            data: data_string,
            timeout: 6000,
            error: function(request,error) {
                if (error == "timeout") {
                    jQuery('#err-timedout').slideDown('slow');
                }
                else {
                    jQuery('#err-state').slideDown('slow');
                    jQuery("#err-state").html('An error occurred: ' + error + '');
                }
            },
            success: function() {
                jQuery('#ajax-form').slideUp('slow');
                jQuery('#ajaxsuccess').slideDown('slow');
            }
        });

        return false; // stops user browser being directed to the php file
    }); // end click function
});

</script> 
```

HTML 表单 >>>>>>>>>>>>>>

```
<!-- language: lang-html -->

<form name="ajax-form" id="ajax-form" action="mail-it.php" method="post">
    <p>
      <label for="name">Name: * 
        <span class="error" id="err-name">please enter name</span>
        <br />
      </label>

      <input name="name" id="name" type="text" /><br /><br />

          <label for="phone">Contact Number: * 
        <span class="error" id="err-phone">please enter phone number</span>
        <br />
      </label>

      <input name="phone" id="phone" type="text" />

      <label for="email">
        <br />
        E-Mail: * 
        <span class="error" id="err-email">please enter e-mail</span>
        <span class="error" id="err-emailvld">e-mail is not a valid format</span><br />
      </label>
      <input name="email" id="email" type="text" />
      </p>

    <p>

      <label for="message">Message:</label>
      <textarea name="message" id="message"></textarea>

    <div class="myButton"><INPUT type="submit" name="" value="" id="send"></div>

<div class="mainerror">
<div class="error" id="err-form">There was a problem validating the form please check!</div>
    <div class="error" id="err-timedout">The connection to the server timed out!</div>
    <div class="error" id="err-state"></div></div>
</form>
<div id="ajaxsuccess"><h2>Successfully sent!!</h2></div> 
```

邮件 PHP 发送邮件-IT.PHP

```
<!-- language: lang-php -->

<?php

/* Code by David McKeown - craftedbydavid.com */

/* Editable entries are bellow */

$send_to = "MYEMAIL@MYDOMAIN.co.uk";

$send_subject = "Website Enquiry ";

/*Be careful when editing below this line */

$f_name = cleanupentries($_POST["name"]);

$f_phone = cleanupentries($_POST["phone"]);

$f_email = cleanupentries($_POST["email"]);

$f_message = cleanupentries($_POST["message"]);

$from_ip = $_SERVER['REMOTE_ADDR'];

$from_browser = $_SERVER['HTTP_USER_AGENT'];

function cleanupentries($entry) {

    $entry = trim($entry);

    $entry = stripslashes($entry);

    $entry = htmlspecialchars($entry);

    return $entry;

}

$message = "This email was submitted on " . date('m-d-Y') . 

"\n\nName: " . $f_name .

"\n\nPhone: " . $f_phone . 

"\n\nE-Mail: " . $f_email . 

"\n\nMessage: \n" . $f_message . 

"\n\n\nTechnical Details:\n" . $from_ip . "\n" . $from_browser;

$send_subject .= " - {$f_name}";

$headers = "From: " . $f_email . "\r\n" .

    "Reply-To: " . $f_email . "\r\n" .

    "X-Mailer: PHP/" . phpversion();

if (!$f_email) {

    echo "no email";

    exit;

}else if (!$f_name){

    echo "no name";

    exit;

}else if (!$f_phone){

    echo "no phone";

    exit;

}else{

    if (filter_var($f_email, FILTER_VALIDATE_EMAIL)) {

        mail($send_to, $send_subject, $message, $headers);

        echo "true";

    }else{

        echo "invalid email";

        exit;

    }

}

?> 
```

表格确实显示成功，但仍未收到电子邮件！有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:04:31.143

由于您保留了要提交的按钮类型，因此它以默认方式执行。

因此，在提交事件上，只需取消表单提交并运行您的 AJAX 代码。

```
$('#ajax-form').bind('submit',function(e) {
   e.preventDefault(); //Will prevent the submit...
  //Add your code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:05:34.340

检查您的错误日志，这将为您提供有关实际情况的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:13:01.827

测试你的`mail-it.php`独立。注释掉`jQuery('#send').click(function(){ ... }`部分。然后在`mail-it.php`末尾添加以下行以打印最后一个错误。

```
print_r(error_get_last());    // php >= 5.2.0 
```

现在尝试提交表单。这应该在提交时重定向到`mail-it.php`脚本并打印错误数组（如果有）。如果它抛出一些信息，请尝试纠正。

# c# - 将文件上传到c#中的网络映射驱动器

> ID：14336205
> 
> 赞同：1
> 
> 时间：2013-01-15T10:55:38.060
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我正在使用 c# asp.net mvc 3 和实体框架将文件上传到映射为 Z 驱动器的网络驱动器。我有以下用于确定文件路径的 c# 代码：

```
var path = Path.Combine(Z:/upload/catone/", fileName);
aries.SaveAs(path); 
```

我正在使用窗口服务器 2008 和 IIS 7。我还检查了网络驱动器上传文件夹的安全性，并对每个用户进行访问完全控制。如果我将文件路径更改为本地驱动器，它工作正常。但是在上传到网络驱动器（Z：/）时显示以下错误。

```
Could not find a part of the path 
'Z:\upload\catone\_2013011504265221N_todaily.wav'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:04:10.503

您的代码在 IIS 下运行，因此以可能无法访问该网络驱动器的 IIS 用户帐户的访问权限运行。

例如，您可以尝试以您的身份运行应用程序池，以排除此问题，或授予组 IIS_IUSRS 对该文件夹的完全访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:08:40.660

首先将文件保存在本地机器中，然后使用 file.copy(Source, Destination, true) 方法将文件保存在网络驱动器中。

试试对你有帮助

# php - 从 url 更改图像大小基础

> ID：14336210
> 
> 赞同：0
> 
> 时间：2013-01-15T10:56:01.673
> 
> 标签：php, .htaccess

如何从 url 中给出的大小更改显示图像大小基数？

www.example.com/photo/90x90/equation.jpg

equation.jpg 的大小应该是 90x90 ，如果我更改 90x90 的值，它将调整图像的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:59:57.483

```
$str  = "www.example.com/photo/90x90/equation.jpg";
preg_match_all('/(?P<width>\d+)x(?P<height>\d+)/', $str, $matches);

print_r($matches); 
```

# java - 如何在EDT（Swing）中依次执行几种方法

> ID：14336223
> 
> 赞同：1
> 
> 时间：2013-01-15T10:56:50.413
> 
> 标签：java, swing, timing, event-dispatch-thread

我有 100 个相同的 JPanel，每个都包含带有图标的 JLabel 和带有文本的 JLabel。当某些事件发生时，我想将面板的图标和边框更改 2.5 秒，然后再将它们更改回来。问题是第一次它们被一起改变了，但是当我尝试改变它们时 - 第一个图标被改变，然后在 2 或 3 秒内改变了边框。这是 JPanel 执行此操作的方法：

```
public void showPacketCame() {  
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            img.setIcon(blue);
            setBorder(BorderFactory.createLineBorder(new Color(54, 208, 243)));

            javax.swing.Timer tim = new javax.swing.Timer(2500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {                        
                    img.setIcon(onDark); 
                    setBorder(null);
                }
            });
            tim.setRepeats(false);
            tim.setDelay(2500);
            tim.start();
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-15T10:59:53.290

这不是编码动画任务的恰当方式。 请为此目的使用[SwingWorker 。](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)

# regex - Codeigniter - 包含句点的正则表达式 - preg_match

> ID：14336225
> 
> 赞同：0
> 
> 时间：2013-01-15T10:57:04.267
> 
> 标签：regex, codeigniter, validation, preg-match

我有一个正则表达式如下：

```
return ( ! preg_match("/^([-a-z_ -])+$/i", $str)) ? FALSE : TRUE; 
```

我需要添加到它以允许一个句点，以便输入可能是这样的：

“圣奥斯特尔”或“圣托马斯”

我尝试了各种方法将句点添加到上述规则中，但是页面要么崩溃并只显示一个空白页面，要么触发了我的验证错误。

我尝试过这样的事情，但无济于事。

```
([-a-z_ -.])
([-a-z_ -\.])
([-a-z_ -])\.
(\.[-a-z_ -]) etc etc... 
```

我已经尝试了一切，但似乎没有任何运气 - 任何想法

非常感谢

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:50:56.080

三点：

1.  初始正则表达式是多余的，因为它指定`-`了两次。

2.  `[a-z_ .-]`应该工作，你只需要让`a-z`在一起，`-`就在之后`[`或之前`]`（否则，`-`将被视为元字符）。

3.  `return !condition ? false : true;`应该简化为`return condition;`，因为`condition`已经返回`true`or `false`（相同的逻辑`if(!condition) {var = false;} else {var = true;}`应该简化为`var = condition;`）。

# javascript - JS to Text 模板引擎（类似asp.net）

> ID：14336228
> 
> 赞同：1
> 
> 时间：2013-01-15T10:57:24.017
> 
> 标签：javascript, code-generation

有没有类似 Microsft 的 T4 或类似 ASP.NET 的模板引擎在 JS 中编写模板来生成文本（或其他代码）？

例如（其中 '<=' 表示文本块的开始）：

```
<#
...here goes template building code...
for(var i = 0; i < types.length; i++) {
#>
    function <#= types[i].name #> () {

    }
<#
    for(var j = 0; j < types[i].methods.length; j++) {
#>
    <#= types[i].name #>.prototype.<#= types[i].methods[j].name #> = function () {};
<#      
    }
}
#> 
```

**澄清：**

我想要的是编写与多行文本片段混合的 javascript，这是一种比 moustashe.js 和喜欢的语法更甜的野兽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:25:00.093

那些被称为[纯 javascript 引擎](https://developer.mozilla.org/en-US/docs/JavaScript_templates#Pure_JavaScript_embedded_within_HTML.2FXML_design_logic_%28ASP.2FJSP.2FPHP_or_curly_braces_style%29)。这些天他们似乎不受欢迎。

# python - python单例类装饰器

> ID：14336229
> 
> 赞同：2
> 
> 时间：2013-01-15T10:57:33.203
> 
> 标签：python, singleton, decorator

我在这里遇到了这个单例实现：http: [//blog.amir.rachum.com/post/21850841339/implementing-the-singleton-pattern-in-python](http://blog.amir.rachum.com/post/21850841339/implementing-the-singleton-pattern-in-python)在第一个回复中。

```
def singleton(cls):
    return cls()

@singleton
class Foo(object):
    def bar(self):
        pass

if __name__ == '__main__':

    print id(Foo)
    print id(Foo) 
```

但我不明白内部工作原理，装饰器返回一个类实例，但为什么每次都是同一个实例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T11:04:19.277

您可以将该代码重写为

```
class Foo(object):
    pass

Foo = singleton(Foo)
# which is
Foo = Foo() 
```

所以这里类的名称被它的一个实例所取代。在我看来有点俗气，特别是因为您仍然可以通过使用创建同一类的新对象，`Foo.__class__`并且您正在弄乱命名模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:11:43.353

单例通过保持内部状态来做到这一点。这里的状态可能是该类的一个实例。装饰器可以是任意的。

看看这个：

[http://hairysun.com/downloads/DecoratorHandout.pdf](http://hairysun.com/downloads/DecoratorHandout.pdf)

```
class Decorator(object):
    # in __init__ set up state
    def __call__(self, function):
        @functools.wraps(function)
        def wrapper(*args, **kw): # 1.
            print "before func"
            result = function(*args, **kw) # 2.
            print "after func"
            return result
        return wrapper # 3.

>>> decorator2 = Decorator()
>>> @decorator2
... def nothing(): pass 
```

装饰器本质上是一个函数

1.  定义一个函数
2.  调用你传入的函数
3.  返回稍后调用的新“包装”函数

周围的类（这里：装饰器）可以做这样的事情：

```
class Singleton(object):
     def __init__(self):
        self.instance = None

     def __call__(self, function):
         @functools.wraps(function)
         def wrapper(*args, **kw):
             if self.instance is None:
                self.instance = function(*args, **kw)
             return self.instance
         return wrapper 
```

我没有运行代码，但我认为这通常是它的工作方式。如果没有可用的实例，则创建一个。如果一个可用，不要创建一个新的 - 而是返回一个旧的。在生产中使用它之前，可能需要检查可调用对象的其他属性。

# php - smarty新建表时如何使用$sql_tbl[]

> ID：14336232
> 
> 赞同：-1
> 
> 时间：2013-01-15T10:57:43.317
> 
> 标签：php, mysql, smarty, database

我在数据库中创建了一个新表（mysql，表名`zip_backup_management`）。我想`$sql_tbl[zip_backup_management]`在 php 页面中使用。但是在 sql 查询中它不能添加表名。我在 smarty 中使用这个查询

```
(SELECT * FROM $sql_tbl[zip_backup_management] WHERE cd_nr <> 0 ORDER BY cd_nr) UNION (SELECT * FROM $sql_tbl[zip_management] WHERE cd_nr = 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:06:14.610

在 tpl 页面中使用`assign`关键字。

```
{assign var=zip_management value=$sql_tbl[zip_management]} 
```

然后像这样执行查询，

```
{(SELECT * FROM $zip_management WHERE cd_nr <> 0 ORDER BY cd_nr) UNION (SELECT * FROM $zip_management WHERE cd_nr = 0)} 
```

# connection - libspotify 无法连接

> ID：14336234
> 
> 赞同：1
> 
> 时间：2013-01-15T10:57:47.383
> 
> 标签：connection, stub, libspotify

我正在尝试熟悉 libspotify，我必须说 libspotify 上的文档严重缺乏。我已经从示例中破解了一个小应用程序，但我无法让它工作。

我正在 Visual Studio 2012 中构建一个 C 控制台应用程序。appkey 是正确的。

```
sp_session_config config;
sp_error error;
sp_session *session;
char *blob = NULL;

memset(&config, 0, sizeof(config));

config.api_version = SPOTIFY_API_VERSION;
config.cache_location = "tmp";
config.settings_location = "tmp";
config.application_key = g_appkey;
config.application_key_size = g_appkey_size;

config.user_agent = "SpotiTest";

error = sp_session_create(&config, &session);
if (SP_ERROR_OK != error) {
    fprintf(stderr, "failed to create session: %s\n",
                    sp_error_message(error));
    return;
}

error = sp_session_login(session, "USERNAME", "PASSWORD", 1, blob);
if (SP_ERROR_OK != error) {
    fprintf(stderr, "failed to log in to Spotify: %s\n",
                    sp_error_message(error));
    sp_session_release(session);
    exit(4);
}

sp_connectionstate cs = sp_session_connectionstate (session); 
```

无论用户名和密码是什么（错误或正确），sp_session_login 始终返回 SP_ERROR_OK。当我使用 sp_session_connectionstate 检查连接状态时，它总是返回 SP_CONNECTION_STATE_LOGGED_OUT。

我没有看到我在这里做错了什么，也似乎无法通过常规渠道找到任何相关的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:36:29.117

API 是异步的。`sp_session_login`立即返回，登录过程在后台继续。查看 API 附带的示例。您需要某种事件循环来调用`sp_session_process_events`，否则 libspotify 将无法完成任何工作，您可能希望等到收到`logged_in`回调。

# php - 将在php中转换为base64字符串并作为json的一部分返回的图像转换为图像并在html中显示

> ID：14336237
> 
> 赞同：0
> 
> 时间：2013-01-15T10:57:53.393
> 
> 标签：php, ajax, json

我有一个 php 代码，它从数据库中检索图像并通过使用 base64 对其进行编码将其存储在 json 中。

```
$query=mysql_query("SELECT Id,Image FROM $table_first");

 while ($row=mysql_fetch_assoc($query)) {
        $array=$row;
        $array['Image']=base64_encode($row['Image']);

       $output[]=$array;
    }
echo json_encode($output); 
```

现在我有一个 html 文件，我必须在其中解码此图像并将其显示在 div 元素中。我不知道如何解码图像。

```
$(document).ready(function(){ 
$.ajax({
     url:"loc.php",
     dataType:'json',
     type:'POST',
      success:function(output) {
               }
 });

});
</script>
</head>
<body>
<p> Test page  </p>
<div class="Ch" id="Ch"></div> 
```

在这里，我需要在 id 为“ch”的 div 中显示 ouptut[0].Image（采用 base64 格式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:33:17.217

将图像直接存储在 DATABASE 中并不是一个好主意。我推荐的一种方法是将图像直接存储在服务器中的特定位置，然后将图像的路径插入数据库中。使用此方法可以避免很多麻烦。:) 顺便问一下，为什么要将图像编码为 base_64？您如何将图像存储在数据库中？

未经测试（假设路径存储在数据库表中）

```
$query=mysql_query("SELECT Id,Image FROM $table_first");

 while ($row=mysql_fetch_assoc($query)) {
        $image=$row['Image'];
        $id=$row['Id'];
        $output=array("id"=>$id,"image"=>$image);
    }
echo json_encode($output); 
```

然后在你的ajax脚本中

```
$(document).ready(function(){ 
$.ajax({
     url:"loc.php",
     dataType:'json',
     type:'POST',
      success:function(output) { 
       var imagehtml='<img src="'+output.image+'" alt=""/>';
           $("#Ch").html(imagehtml); //id of the div where you want the image
               }
 });

});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:25:49.397

您可以使用（假设为 png ）
`<img src="data:image/png;base64,input_your_base64_from_database_here" />`
请检查[Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)以及如何显示图像以获取更多详细信息。

# android - socket.connect 仅在 Nexus 上的 Android 4.2.1 上导致“读取失败的套接字可能关闭”

> ID：14336239
> 
> 赞同：4
> 
> 时间：2013-01-15T10:57:57.537
> 
> 标签：android, sockets, bluetooth

我正在使用这段普通代码打开/连接到蓝牙套接字。虽然它在所有设备上都能完美运行 - 仅在最新的 Android 4.2.1 Nexus 上，我收到此 IOException：“读取失败的套接字可能已关闭”。

我尝试重新配对设备，检查 UUID，一切都很好。如前所述，完全相同的代码适用于所有其他设备。目前我不知道还有什么地方可以看......

私有类 ConnectBluetoothThread 扩展 Thread { 私有最终 BluetoothSocket mmSocket; 私有最终蓝牙设备 mmDevice；

```
public ConnectBluetoothThread(BluetoothDevice device) {
    mmDevice = device;
    BluetoothSocket tmp = null;
    try {
        tmp = mmDevice
            .createInsecureRfcommSocketToServiceRecord(MY_UUID);
    } catch (IOException e) {
    ...other code
    }

    mmSocket = tmp;
}

public void run() {
    mBluetoothAdapter.cancelDiscovery();

    // Make a connection to the BluetoothSocket
    try {
        mmSocket.connect();  // <=== this is where the IOException is beeing raised!!!!
    } catch (IOException e) {
    Log.e(this.getClass().getSimpleName(),
        " -> FAILED:", e);
    connectionFailed(e);

    // Close the socket
    try {
        mmSocket.close();
    } catch (IOException e2) {
    }

    return;
    }

    // Reset the ConnectThread because we're done
    synchronized (InterBT.this) {
    mConnectBluetoothThread = null;
    }

    // Start the connected thread
    connected(mmSocket, mmDevice);
} 
```

# git - Git-svn 想将我的本地主服务器提交到远程分支，而不是主干

> ID：14336242
> 
> 赞同：0
> 
> 时间：2013-01-15T10:58:05.577
> 
> 标签：git, svn, git-svn, branching-and-merging

我一定读过十几个“我如何在 git-svn 中使用 SVN 分支”的问题，但我从未见过任何描述过发生在我身上的事情。我正在尝试一个简单的合并：

```
(master)% git co -b refac_merge
(refac_merge)% git svn dcommit -n
  Committing to (URL)/trunk
(refac_merge)% git merge remotes/refactor
(refac_merge)% git svn dcommit -n
  Committing to (URL)/branches/refactor # <-- WTF! 
```

我发现[了一个听起来相似的问题](https://stackoverflow.com/questions/5391573/why-did-git-svn-remote-tracking-stopped-working)，但答案实际上并没有告诉我如何*解决*它。我如何告诉 git-svn 是的，我希望跟踪 SVN 主干的本地分支在合并后*继续跟踪 SVN 主干？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:01:53.597

我可能已经弄清楚为什么我的行为与我见过的其他问题不同。显然，自创建远程分支以来，我的主干（主干）没有看到任何更改，这一点很重要。这意味着历史实际上已经是线性的——我所有的合并都是 FF。

如果我签出 master，提交一个微小的更改，然后签出本地`refac_merge`分支`git rebase master`，它会创建一个全新的一系列提交，其中包含相同的消息，但哈希值不同（因为它们现在是 trivial-change 提交的后代，而不是分支点之前的最后一次主干提交）。现在，`git svn dcommit -n`正确地说它将推送到 SVN 主干。

当然，这也给我留下了一个非常非常丑陋的 git 修订日志。也许有一个“两全其美”的解决方案？

# git - 具有共享代码库的多个产品的版本控制和发布管理

> ID：14336243
> 
> 赞同：5
> 
> 时间：2013-01-15T10:58:10.623
> 
> 标签：git, release, versioning, release-management, git-flow

我目前正试图弄清楚，在我有一个 git 存储库的情况下，如何使用 git flow 进行发布管理，其中两个解决方案中有大约 15 个项目以及数据库脚本。

每个解决方案基本上都包含一个将生成可执行文件的项目和 10 多个包含两种解决方案（如 DAL、SAP 访问包装器等）使用的基本功能的项目。
解决方案一是为用户提供 UI 的应用程序。
解决方案二是 Windows 服务。
两种解决方案的发布与数据库不同步。这意味着通常只有三个中的一个或两个被释放。这导致不同的版本号。比如UI发布比较频繁，服务发布很少。数据库介于两者之间。因此，UI 可以有 2.1.15 版本、2.1.1 服务和 2.1.5 数据库。

现在，如何处理共享项目？他们应该使用 UI 的版本号还是服务的版本号？
我如何解释其中一个共享项目的更改不会自动触发两个解决方案的发布这一事实？这意味着同时，生产环境包含同一个项目的两个不同版本。这需要以某种方式反映在存储库中。

我在这里有点迷路，任何建议，经验等将不胜感激。
我可以自由地以任何方式构建存储库和代码库，如果有帮助，我可以创建其他存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:07:50.987

首先，如果您有不同的（即使有些依赖）项目，它们的差异足以让它们拥有不同的版本，那么一定要把它们放在不同的 git 存储库中。

如果您将所有产品都放在同一个存储库下，那么您只是效率低下。例如，如果您正在处理 UI，而另一个正在处理服务并对 UI 进行了小修复，那么当您将您的工作与他们合并时，您也会得到他们对服务的更改（您不在乎为了）。

在您的 15 个项目中，如果有些项目过于紧密相关，您可以将它们保存在同一个存储库中（例如 UI 的组件）。

现在您拥有不同的存储库，您可以轻松地为它们管理单独的版本和单独的版本号。

不过，您要注意的一件事是兼容性。例如，您的 2.4.5 版本的 UI 可能与 2.1.7-2.2.9 版本的服务兼容，同样，2.1.10 版本的服务可能与 2.4 版本的 UI 兼容.3-2.4.8。然后，您的软件组件的每个版本都应该能够检查其他组件的版本以确保兼容性。

# android - 禁用 Go 按钮提交表单（Sencha Touch 2、Cordova、Android）

> ID：14336247
> 
> 赞同：2
> 
> 时间：2013-01-15T10:58:42.130
> 
> 标签：android, cordova, sencha-touch, sencha-touch-2

我有一个表格，并且有一个`button`提交它。我希望只有在点击“注册”按钮时才能执行提交。但是当用户在任何地方输入一些文本`textfield`并按下“Go”（又名“Enter”）按钮时。表单提交，我对此无能为力。

在 Android v2.3.6上的**三星 Galaxy S** (GT i9000) 上发现了此行为。但搭载 Android 4 的**HTC**表现得如我所愿。

`submitOnAction:false`没有帮助 。`beforesubmit`也。代码清单中的任何解决方案都不起作用。

我只是不希望表单以任何其他方式提交，除了按“注册”按钮！

文件**/view/userRegistration/FormPanel.js**

```
Ext.define('My.view.userRegistration.FormPanel', {
    extend: 'My.view.components.FormPanel',
    xtype : 'userRegistrationForm',

    config: {
        standardSubmit : false,
        submitOnAction : false,

        listeners: {
            beforesubmit: function(form, values, options, eOpts){
                console.log('before submit fired');
                return false; // returning false doesn't help
            },
            '> field': {
                keyup: function(fld, e){
                    //13 = user tapped 'return' button on keyboard
                    //10 = user tapped 'hide keyboard' on keyboard
                    if (e.browserEvent.keyCode == 13 || e.browserEvent.keyCode == 10) {
                        e.stopEvent();
                        fld.element.dom.blur();
                    }
                }
            }
        },

        items : [
            {
                xtype: 'textfield',
                name : 'firstName',
                required: true,
                listeners: {
                    action: function(field, e, eOpts) {
                    e.stopEvent();
                    return false;
                    },
                    keyup: function(field, e) {
                        if (e.browserEvent.keyCode == 13 || e.browserEvent.keyCode == 10) {
                            // GO pressed on "firstName"
                            e.stopEvent();
                            field.element.dom.blur();
                            return false;
                        }
                    }
                }
            },
            {
                xtype: 'button',
                text : 'Register',
                listeners: {
                    tap: function(button) {
                        var form = button.parent;
                        if (form.isValid()) {
                            form.onSubmit();
                        }
                    }
                }
            }
        ]
    }
}); 
```

文件**/view/components/FormPanel.js**

```
Ext.define('My.view.components.FormPanel', {
    extend : 'Ext.form.Panel',

    onSubmit: function() {
        var fieldValues = this.getValues();
        // Sending fieldValues via AJAX
    },
    isValid: function(args) {
        // Validating values
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:12:31.817

问题出在`onSubmit()`方法上。它**`@private`**在**sencha-touch-all-debug.js 中**：

```
Ext.define('Ext.form.Panel', {

    // @private
    onSubmit: function(e) {
        var me = this;
        if (e && !me.getStandardSubmit()) {
            e.stopEvent();
        } else {
            this.submit();
        }
    }

} 
```

所以`onSubmit()`在子类中覆盖是绝对不正确的。更正确的方法。

文件**/view/components/FormPanel.js**

```
Ext.define('My.view.components.FormPanel', {
    extend : 'Ext.form.Panel',

    config: {
        standardSubmit: false,

        listeners: {
            beforesubmit: function(form, values, options, eOpts) {
                // Do something with data. Send it via AJAX, for example
                return false; // returning false to prevent real form.submit();
            }
        }
    }
} 
```

表单中的按钮应该只是调用`form.submit();`.

文件**/view/userRegistration/FormPanel.js**

```
 {
            xtype: 'button',
            text : 'Register',
            handler: function() {
                var form = button.parent;
                if (form.isValid()) {
                    form.submit();
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T04:00:02.747

您实际上并不需要为此覆盖 FormPanel。在控制器中，您可以阻止来自现场的动作执行并冒泡。

```
Ext.define('TestApp.controller.Login', {
    extend: 'Ext.app.Controller',
    config: {
        control: {
            'field': {
                action: 'onFieldAction'
            }
        }
    },
    onFieldAction: function(field, e) {
        // Stop event here 
        e.stopEvent();
        e.stopPropagation();
    }
}); 
```

我在执行此操作时遇到了一个问题。我不小心覆盖了我的 FormPanel 的默认初始化函数。如果你这样做，每件事都不会奏效

```
Ext.define('TestApp.view.Login', {
    extend: 'Ext.form.Panel',
    xtype: 'loginform',
    config: {
        ...
    }
    initialize: function(config) {
         this.callParent(arguments); // Nothing will work without this line
         ...
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-19T14:27:45.000

以防万一有人需要禁用键盘上的 Enter 键或软键盘中的 Go 按钮，我找到了以下解决方案：

```
Ext.define('App.view.Login', {
    extend: 'Ext.form.Panel',
    xtype: 'login',

    config: {
        ....
    },

    getElementConfig: function() {
        var config = this.callParent();
        config.children.pop();

        return config;
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-10T15:21:03.487

```
document.addEventListener("keypress", onGoKeyDown, false);
function onGoKeyDown(e) {
    console.log(e);
    if(e.srcElement.localName == 'input') {
        if (e.keyCode === 13 || e.keyCode === 10) {
            e.preventDefault();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-26T22:36:20.917

我不知道是否有人仍在寻找解决方案，但我想出了一个非常简单的技巧 - 捕获输入并阻止表单提交，即使用户点击“Go”或除您之外的任何按钮/键想。为此，只需在每个输入字段中放置一个侦听器并侦听“模糊”事件。这将在离开现场（模糊）时捕获任何动作。在模糊侦听器事件中，在下一个字段上执行 focus()（例如在表单中切换，即，如果您在字段 1 中，则将焦点发送到 2，依此类推），直到您到达所需的提交或注册按钮。在那里，您可以进行处理、提交等。这对我有用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-19T09:35:44.927

现在，如果我们想通过单击提交按钮或通过输入操作在提交时调用 Ajax 方法，

submitOnAction : 在 FormPanel 配置中为 true

在初始化方法中添加 this.callParent(arguments)，以防我们覆盖 FormPanel 的初始化方法

覆盖 FormPanel 的提交方法以添加 Ajax 调用

监听提交按钮的点击事件以添加 Ajax 调用

# iphone - iOS - 将字符串转换为非 en-GB 语言环境 NSDate 返回 nil

> ID：14336252
> 
> 赞同：0
> 
> 时间：2013-01-15T10:58:58.590
> 
> 标签：iphone, ios, cocoa-touch, nsdate, nsdateformatter

> **可能重复：**
> [NSString 到 NSDate](https://stackoverflow.com/questions/1353081/nsstring-to-nsdate)

我有一个日期格式，`Mon Jan 14 14:00:00 CET 2013`我尝试将其转换为 NSDate：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"EEE MMM dd HH:mm:ss zzz y"];
NSString *dateString = @"Mon Jan 14 14:00:00 CET 2013"
NSDate *date = [df dateFromString:dateString]; 
```

但它不起作用，我`date`的`nil` 输入数据是 en-GB 语言环境，我设备的语言环境是 nb-NO

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:04:34.157

您的格式缺少一天：

```
[df setDateFormat:@"EEE MMM dd HH:mm:ss zzz y"]; 
```

* * *

如果不是拼写错误，那么下一步就是设置正确的语言环境，以便格式化程序能够识别 CET 时区，例如 en-GB 将修复该问题：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
// that will fix the problem with not recognized CET timezone
[df setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en-GB"]];
[df setDateFormat:@"EEE MMM dd HH:mm:ss zzz y"];
NSString *dateString = @"Mon Jan 14 14:00:00 CET 2013"
NSDate *date = [df dateFromString:dateString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:12:08.057

我认为你的时区是错误的。只需使用此代码，它将完美运行：

```
 NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"EEE MMM dd HH:mm:ss zzz y"];
    NSString *dateString = @"Mon Jan 14 14:00:00 EDT 2013";
    NSDate *date = [df dateFromString:dateString];
    NSLog(@"date :: %@",date); 
```

它将输出记录为：

```
date :: 2013-01-14 18:00:00 +0000 
```

**编辑 ：**

我为你找到了一些东西：[NSDateFormatter 不解析某些时区](http://www.openradar.me/9944011)

您可以通过使用**en_GB Locale来解决这个问题，如**[Working with Date and Time in Cocoa](http://oleb.net/blog/2011/11/working-with-date-and-time-in-cocoa-part-2/)中所述：“这些缩写仍然适用于 en_GB 语言环境” 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T11:14:26.617

尝试使用此功能

```
 - (NSDate*) dateFromString:(NSString*)aStr
{

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease]];
    //[dateFormatter setDateFormat:@"YYYY-MM-dd HH:mm:ss a"];
    [dateFormatter setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

    NSLog(@"%@", aStr);
    NSDate   *aDate = [dateFormatter dateFromString:aStr];
    [dateFormatter release];
    return aDate;
} 
```

我希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:09:37.780

简单地说，“CET”不是一个公认的时区`NSDateFormatter`。

此外，日期/时间已过指定，最好不要尝试包括日期或星期（星期一）。

这是一个示例，它演示了具有可识别时区的工作代码：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"EEE MMM dd HH:mm:ss zzz yyyy"];
NSString *dateString = @"Mon Jan 14 14:00:00 EST 2013";
NSDate *date = [df dateFromString:dateString];
NSLog(@"date: %@", date); 
```

NSLog 输出

> 日期：2013-01-14 19:00:00 +0000

```
NSLog(@"abbreviationDictionary: %@", [NSTimeZone abbreviationDictionary]); 
```

确实显示

> CET = "欧洲/巴黎";

所以这看起来像是`NSDateFormatter`.

报告错误：[Apple Bug Reporter](http://bugreporter.apple.com)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T11:12:54.577

CET 不被认可

试试这个 ：-

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"EEE MMM dd HH:mm:ss yyyy"];
    NSString *dateString = @"Mon Jan 14 14:00:00 2013";
    NSDate *date = [df dateFromString:dateString];
    NSLog(@"%@",date); 
```

希望对你有帮助

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-15T11:04:20.457

您可以使用：

```
[dateFormatter setDateStyle:NSDateFormatterShortStyle]; 
```

如果您仍想自定义日期格式，请尝试以下方法：

```
yyyy-MM-dd HH:mm:ss ZZZ 
```

因为不能发明自己的格式化字符串语法并期望它起作用；您需要实际使用文档中指出的格式：OS X v10.8 和 iOS 6.0 中的格式化程序使用版本 tr35-25。

-> [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)

如果您好奇：[http ://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)

# python - 从python调用的进程随机挂起

> ID：14336256
> 
> 赞同：1
> 
> 时间：2013-01-15T10:59:10.180
> 
> 标签：python, subprocess

我使用 Python 来测试给定的软件。简而言之，这是一个做一些批处理的 c++ 程序。我需要使用许多不同的数据集和参数来启动它，这就是我用 Python 编写工具的原因。我基本上启动了这个过程，将错误流保存在一个文件中，解析输出流以获得一些实时反馈。（标准输出流不是很冗长。）

它主要按我的预期工作，除了我有时会挂起经过测试的 c++ 程序。这种挂起只发生在我的一些测试目标上，在 windows XP 上，从来没有在 win 7 或其他一些 windows XP 上发生。在可能发生挂起的目标上，如果直接从命令行启动，该软件运行良好。

我怀疑由于 IO 流处理而出现死锁，但我不明白为什么。

这是我的代码的摘录：

```
stderrFile = open("err.txt", 'w')
stdoutFile = open("out.txt", 'w')

p = subprocess.Popen(args, stdout = subprocess.PIPE, stderr =stderrFile, env = runEnv)
outStream = p.stdout

for line in outStream:
    line = line.rstrip()
    if line.startswith('======== '):
        print " - " + line[9:]
    stdoutFile.write(line + '\n')

returnCode = p.wait() 
```

# c# - 向数据表添加列并添加数据

> ID：14336257
> 
> 赞同：2
> 
> 时间：2013-01-15T10:59:10.883
> 
> 标签：c#, sql-server, datatable, dataset

如何将列添加到数据表并根据条件将数据添加到每一行。这就是我想要做的

```
conn = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;
                                Data Source =" + Server.MapPath("App_Data\\LR Product Database 2000.mdb"));
        conn.Open();

        Dictionary<string, string> items = new Dictionary<string, string>();
        OleDbCommand cmd = conn.CreateCommand();
        cmd.CommandText = "SELECT CODE, TITLE FROM tblProducts";

        OleDbDataReader dbread = cmd.ExecuteReader();

        while (dbread.Read())
        {
            productCode = (string)dbread["ProductCode"];
            productTitle = items[productCode];
            items.Add(productCode, productTitle);
        }

        sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["LRVWebsite"].ToString());
        sqlCon.Open();
        dsSql = new DataSet();
        SqlDataAdapter dba = new SqlDataAdapter(@"SELECT C.CustomerFirstName,C.CustomerLastName, C.CustomerCompany,C.CustomerPosition,C.CustomerCountry,C.CustomerProvince,C.CustomerContact,CP.ActionDate,CP.ProductCode,CP.CustomerEmail FROM tblCustomers C INNER JOIN tblCustomerProducts CP ON C.CustomerEmail = CP.CustomerEmail ORDER BY ActionDate DESC", connString);
        dba.Fill(dsSql,"Products");
        DataTable dt = dsSql.Tables["Products"];

        foreach (DataRow dr in dt.Rows)
        {
            for (int i = 0; i < items.Count; i++)
            {
                if (dr["ProductCode"].ToString().Equals(productCode))
                {
                    //here I want to add a new column and add data (productTitle) to the column

                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:05:17.033

```
dba.Fill(dsSql,"Products");
DataTable dt = dsSql.Tables["Products"];

dt.Columns.Add("ColumnName", typeof(DataType));

if (dr["ProductCode"].ToString().Equals(productCode))
{
    dr["ColumnName"] = value;    
} 
```

此外，我会扩展代码以避免 NullReferenceException

```
 if (!String.IsNullOrEmpty(dr["ProductCode"]) && dr["ProductCode"].ToString().Equals(productCode))
 {
        dr["ColumnName"] = value;    
 } 
```

[http://msdn.microsoft.com/en-us/library/hfx3s9wd.aspx](http://msdn.microsoft.com/en-us/library/hfx3s9wd.aspx)

# android - 更改字体重新启动活动

> ID：14336258
> 
> 赞同：7
> 
> 时间：2013-01-15T10:59:21.660
> 
> 标签：android, android-fonts

`Activity`在应用程序运行时更改系统字体时正在重新启动。

有什么办法可以避免重启我的`Activity`？我用基本的**“Hello World”**应用程序对其进行了测试。

我使用 Android 4.1 作为目标

PS：我尝试过使用`android:configChanges`，但没有任何与字体更改相关的标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:04:54.827

你应该使用 android:configChanges="fontScale" 。但是您随后需要通过覆盖 onConfigurationChanged() 自己处理该配置更改 可以参考 [这个](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:03:58.633

看看官方文档：http: [//developer.android.com/guide/topics/manifest/activity-element.html#config](http://developer.android.com/guide/topics/manifest/activity-element.html#config)

看看`"fontScale"`也许它会起作用。

您也可以尝试`onConfigurationChange`在您的活动中覆盖函数以找出发生了什么变化。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T08:16:03.167

您必须自己处理配置更改。

```
android:configChanges="fontScale" works only for size of the font 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-04T18:21:15.457

我已经尝试了以下，它应该对你有用，但是当字体样式改变时它会导致活动被破坏，然后用户必须再次启动活动

1）有一个全局哈希集来存储应用程序开始时的上下文字符串，将上下文作为字符串放入此哈希集中

2) 暴露一个方法

```
isContextExits(contextStr) { return hashset.contains(contextStr); } 
```

从申请

3) 通过将内容作为字符串传递到捆绑包中来调用您的活动。

```
onCreate(Bundle savedInstanceState)
mContextStr = savedInstanceState.getExtra("CONTEXT_STR");

// context has changed then finish the activity
if (!this.getApplicationContext().isContextStr(mContextStr))
  finish(); 
```

希望这可以帮助 ！

# sql - sql server 比本地数据库效率高吗

> ID：14336260
> 
> 赞同：0
> 
> 时间：2013-01-15T10:59:31.880
> 
> 标签：sql, sql-server, database, performance, visual-studio

我正在用 c# 在 vs 中制作一个数据库应用程序。最初我使用的是用 sql server 创建的数据库。我的 app.config 是

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
</configSections>
<startup> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>
 <connectionStrings>
<add name="ConString" connectionString="Data Source=ARAVIND-HP\SQLEXPRESS;Initial Catalog=businessdata;Integrated Security=True"
    providerName="System.Data.sqlClient" />

</connectionStrings>
</configuration> 
```

在此之后，我改用本地数据库。我将数据库复制到项目解决方案中。Visual Studio 自动配置了 app.config。新的 app.config 是

```
<?xml version="1.0" encoding="utf-8" ?>
 <configuration>
<configSections>
</configSections>
<startup> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>
<connectionStrings>
  <add name="Small_Business_Management.Properties.Settings.businessdataConnectionString1"
    connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\businessdata.mdf;Integrated Security=True"
    providerName="System.Data.SqlClient" />

  </connectionStrings>
  </configuration> 
```

现在，当我使用这个本地数据库时，我注意到执行操作比使用 sql server 数据库需要多 1 到 2 秒（有时甚至更多）。为什么会有这种性能差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:15:59.173

你真的把两件事混为一谈了，因为 SQL Server 是一个也可以在本地计算机上运行的软件。

要点是，与“真实”数据库服务器相比，您的本地计算机很可能很糟糕。大多数人没有拥有大量内存和 IO 的工作站（尽管 IO 端随着 SSD 的变化而变化）。所以，问题不是“本地与非本地”，而是“工作站与服务器”，是的，服务器可以比小型本地工作站更强大，这取决于它在技术上的设置方式。我见过具有 100 多个内核、TB 级 SSD 缓存和一百多个磁盘来处理 IO 需求的数据库服务器。

在消极方面，显然，服务器必须向您发送数据。即使 1 Gigabit 比本地安装的 SQL Server 的内存传输慢。但这仅在（a）您提取大量数据并且（b）您不对其进行大量处理时才相关 - 这使得这更像是一个学术案例。

现在，在你的情况下它变得更好。您甚至没有安装本地 SQL Server（或：不使用它），而是使用 LocalDb - 这显然不是“服务器级”系统。Localdb 是一种“改进的快递”（[http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)），其中快递是资源使用受限（内存、CPU）。您的服务器很可能是一个真正的服务器，因此它将使用比 Express 甚至希望拥有的更多的 rssource，这仅限于：

*   仅限于 1 个插槽或 4 个内核中的较小者
*   1 GB

以今天的标准来看，这是相当可悲的。现在，在同样的条件下 - 对于较小的数据库来说，这相当多，如果数据库很小，那就相当多。但是当你击中更大的东西时——然后在上面放一个小数据库——事情就会飞起来。

所以，这取决于。是的，服务器可以比本地机器强大很多。

希望从情况中得到正确的结果-另一种选择是您在同一台机器上同时启动，在这种情况下，它可能只是启动时间。LocalDb 将 IIRC 在不使用时关闭数据库，因此无论内存可用性如何，它都是“冷的”。SQL Server 保持数据库处于活动状态，因此 - 它是“热的”（即加载的页面仍在内存中，而 localdb 必须从磁盘再次获取它们）。

许多“这取决于”。一些“关于你的配置”。

# entity-framework - 具有大量表的实体框架

> ID：14336264
> 
> 赞同：3
> 
> 时间：2013-01-15T10:59:55.423
> 
> 标签：entity-framework

我们的数据库有大约 500 个要在 EF 模型中使用的表。其中我很乐意从 50 或更少开始，只是为了在普通的 ADO.net 工作多年后弄湿我们的脚。

问题是，我们的 SQL 服务器包含数以千计的其他表，这些表存在于我们的数据库中，这些表是多年来创建的，还有许多是动态生成的。信不信由你：

```
select count(*) from INFORMATION_SCHEMA.TABLES
73261 
```

所以有很多表。我发现我尝试设计、构建或模板化 EF 模型或实体的几乎所有工具要么挂起，要么不返回表列表。甚至 VS2012 中的 SQL Server 对象资源管理器也不会列出表，而是在图标上显示带有小“x”的 Tables 文件夹。所以我什至不能选择表的子集。

使用 EF 有哪些选择？是否有模板可以显式定义要使用实体的表？即使有 50 个表，我也不想在一个空的 EDMX 中手动编写每个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T16:18:03.440

使用数据库/代码优先方法并完全避免将 Visual Studio 连接到数据库（即不要创建 edmx，或连接到服务器资源管理器），您可以轻松地做到这一点。它并没有给你任何模型优先的优势，但我认为听起来你的项目最好使用数据库/代码优先方法，因为：

1.  您有一个现有的模型，并且不希望将更改从您的 EDMX 推送到数据库
2.  您希望在数据库的子集上实现此功能

此链接有一个很好的总结（[代码优先与模型/数据库优先](https://stackoverflow.com/questions/5446316/ef-4-1-code-first-vs-model-database-first)），但需要注意的是，在您的情况下，数据库/代码优先方法不会让您将更改从代码推送到数据库，因此代码优先下的最后两个项目符号应用较少，而您的是数据库/代码优先混合体。

对于 70k 表，我认为任何 GUI 都会很棘手。当我说数据库/代码优先时，我试图传达您没有使用代码来创建/定义和更新您的数据库。有人可以更简洁/准确地回答这个问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-23T07:22:36.650

我现在这是一个老问题。但对于那些登陆谷歌搜索的人。我发现真正适用于数千张桌子的唯一工具是 The Sharp Factory。

它是一个 ORM。使用起来非常简单。因此，如果您正在寻找可以处理大量表并且不需要您编写“POCOS”或“映射”或 SQL 的 ORM，那么这就是工具。

你可以在这里找到它：[夏普工厂](https://www.thesharpfactory.com/Documentation/GettingStarted/Introduction)

# javascript - 对于初学者来说，Backbone 比 AngularJS 更好吗？

> ID：14336270
> 
> 赞同：3
> 
> 时间：2013-01-15T11:00:10.553
> 
> 标签：javascript, apache-flex, backbone.js, angularjs

过去几年我一直在 Flex 工作。在此之前，我一直在用 vanilla JavaScript 构建 Web 应用程序。

今天我切换回 JavaScript，但现在我在为一个新的中型项目选择正确的 JS 框架/库时遇到了麻烦。

尽管关于 AngularJS 的所有评论都是积极的，但我发现开始使用它并不是一件容易的事。问题当然是文档。尽管有教程向您展示了如何做基本的事情，但没有一个解释这些概念或向您展示如何构建更大的项目。

在发现 AngularJS 之前，我的想法是在 Backbone。积极的一面是，有大量关于该主题的文档、教程、截屏视频和书籍。此外，源代码很小，本身可以用作参考（与 AngularJS 不同）。

所以现在我认为对于那些在 JS 编程中使用框架而不是 AngularJS 的人来说，Backbone 可能是一个更好的选择。后来，当我设法训练我的大脑用 JS 思考时，AngularJS 可能更容易理解 + 会有更多可用的文档。

我现在怀疑这是否是正确的选择......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:23:03.190

首先，我很确定切换到 JavaScript 是正确的选择。

选择 JavaScript MVC 框架确实是一个艰难的选择，尤其是因为它们像爆米花一样到处爆开！

这个项目可能对这个决定非常有帮助：http: [//addyosmani.github.com/todomvc/](http://addyosmani.github.com/todomvc/)

这是我的观点。骨干是自由主义的。它不强加刚性结构。它更像是一组约定而不是实际代码。您肯定会使用的不仅仅是 Backbone 框架。这可能具有挑战性，但可能会产生更好的调整结果。Backbone 天生具有很强的可扩展性，这是一个很大的优势。

AngularJS 增强了 HTML 语义。只要这么说，您就可以想象它比“纯”主干要复杂得多。也许我们可能会发现 AngularJS 更神奇（当然不是神奇，但是用更少的代码发生的事情，“在引擎盖下”，我的意思是）。

他们对这个问题有非常不同的方法。我不会在这里陈述每个优点和缺点。我发布的链接应该可以帮助你。我也像你一样感到困惑，但简而言之，调查两者，用两者进行一些峰值实现，并检查 todoMVC 项目。选择更适合您的要求甚至个性的。:)

更公平的比较可能是“Backbone and friends”与“AngularJS”。不要忘记 Backbone 的朋友（插件和模块）。

你可以用两者做伟大的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:24:51.427

过去几天我去过那里。我在两个框架中都通过 REST api 实现了一个简单的 CRUD。以下是我的想法：

Angular 更难，因为它是约定优于配置、指令等新概念，您需要考虑扩展 HTML 而不是 javascript hack（这对于 flex 从业者来说并不难）。

但最后我更喜欢它，因为它不仅仅是开箱即用的骨干。你不需要写 jquery 的东西。模板比使用 Backbone 和下划线模板更具可读性。代码更少（更易于维护），我喜欢使用组件方法来构建客户端代码的方式。

# java - 如何在 Camel 测试中使用模拟端点开始路由

> ID：14336274
> 
> 赞同：8
> 
> 时间：2013-01-15T11:00:33.533
> 
> 标签：java, cxf, apache-camel

我从骆驼开始，我在编写测试时遇到了一些问题。[我的用例与cfx 代理示例](http://camel.apache.org/cxf-proxy-example.html)完全相同。除了我不需要“RealWebservice”。现在我正在尝试使用注释方法编写单元测试（不是示例中包含的集成测试）：

```
@RunWith(CamelSpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:application-context.xml" })
@MockEndpointsAndSkip
public class RoutesTest {

@Autowired
CamelContext camelContext;

@EndpointInject(uri = "mock:cxf:bean:cxfEndpoint", context = "camelContext")
MockEndpoint cxfEndpoint;

@EndpointInject(uri = "mock:log:input", context = "camelContext")
MockEndpoint logInputEndpoint;

@EndpointInject(uri = "mock:http:realhostname:8211/service", context = "camelContext")
MockEndpoint realEndpoint;

@EndpointInject(uri = "mock:cxf:bean:cxfEndpoint")
ProducerTemplate producer;

@Test
public void testLeleuxMifidRoute() throws InterruptedException {
    String body = "<blah/>";

    cxfEndpoint.expectedBodiesReceived(body);
    logInputEndpoint.expectedBodiesReceived(body);
    realEndpoint.expectedBodiesReceived(body);

    producer.sendBody(body);

    MockEndpoint.assertIsSatisfied(camelContext);
}
} 
```

cxfEndpoint 接收消息**，但其他端点没有。**

路由看起来像这样（当我运行它并使用 SoapUI 发送消息时它可以工作，显然我在这个例子中混淆了 ips 和 beannames）：

```
<endpoint id="callRealWebService" uri="http://realhostname:8211/service?throwExceptionOnFailure=true" /> 
<route>
  <from uri="cxf:bean:cxfEndpoint?dataFormat=MESSAGE"/>
  <to uri="log:input?showStreams=true"/>
  <to ref="callRealWebService"/>
  <to uri="log:output"/>
</route> 
```

我究竟做错了什么？我发现的所有示例和其他问题似乎都使用“direct:start”或更改生产路线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-16T22:55:31.357

我们成功使用的一种方法是为测试执行和主代码设置不同的属性文件。

我们在骆驼上下文中定义属性

```
<propertyPlaceholder id="properties"
            location="classpath:META-INF/uri.properties" xmlns="http://camel.apache.org/schema/spring" /> 
```

在该文件夹`/src/main/resources/META-INF/`中，我们有用于主代码的 uri.properties 文件，`/src/test/resources/META-INF/`我们有用于测试执行的 uri.properties。

您的路线必须使用属性占位符而不是真正的 uri 值重写，使用符号`{{properties.name}}`

```
<route>
  <from uri="{{cxf.bean.cxfEndpoint}}"/>
</route> 
```

主要的 uri.properties 将是

```
cxf.bean.cxfEndpoint=cxf:bean:cxfEndpoint?dataFormat=MESSAGE 
```

测试 uri.properties 将是

```
cxf.bean.cxfEndpoint=direct:start 
```

使用此配置，您将能够轻松地测试您的路线。

# azure-sql-database - 使用 Windows Azure SQL 数据库生成 XML 文件

> ID：14336276
> 
> 赞同：0
> 
> 时间：2013-01-15T11:00:37.223
> 
> 标签：azure-sql-database

有人能告诉我用 Windows Azure SQL 数据库中的数据生成 XML 文件的最佳方法吗？

基本上，我想通过查询某个表来使用来自 Windows Azure SQL 数据库的数据创建一个 XML，并且数据很大（大约 90 MB）。因为我需要至少每隔几个小时运行一次这项工作，所以它应该表现得非常好。

有什么建议么 ？

谢谢， 普拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:16:24.017

这是一个非常笼统的问题，并不是特别针对 SQL Azure，所以很难给你一个好的答案。我建议您研究查询 SQL 数据库的不同方法，以及编写 XML 的不同方法。这可能会给你一些更具体的问题的想法。

90MB 并不是特别大 - 放入内存应该不难。但尽管如此，您可能需要考虑一次仅将一小部分数据保留在内存中的方法。例如，从 a 读取数据`SqlDataReader`并立即将其写入 a `XmlTextWriter`，或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-04T03:15:40.817

一种方法是查询数据库并将结果保存到 ADO.net DataTable。获得 DataTable 后，使用 TableName 属性为其指定一个名称。然后使用 DataTable 的 WriteXml 方法将 DataTable 保存到您选择的位置。确保指定 XmlWriteMode.WriteSchema 以确保保存架构和数据。

请注意，如果数据表将是 2Gb 或更大，您将达到 .Net 的默认对象内存限制。一种解决方案是将您的查询分成更小的块，并在每个原始查询中以 XML 格式存储多个数据表。另一种解决方案是将 .Net 中对象的最大大小增加到大于 2Gb。这伴随着它自己的一系列风险和性能问题。但是，要超过 2Gb 对象大小限制，请确保您的应用程序是 64 位的，应用程序编译为 .Net 4.5 或更高版本，并且 app.config 文件应该启用 gcAllowVeryLargeObjects="true"。

```
using System.Data;
using System.Data.SqlClient;

string someConnectionString = "enter Aure connection string here";
DataTable someDataTable = new DataTable();
SqlConnection someConnection = new SqlConnection(someConnectionString);
someConnection.Open();
SqlDataReader someReader = null;
// enter your query below
SqlCommand someCommand = new SqlCommand(("SELECT * FROM [SomeTableName]"), someConnection);
// Since your are downloading a large amount of data, I effectively turned the timeout off in the line below
someCommand.CommandTimeout = 0;
someReader = someCommand.ExecuteReader();
someDataTable.Load(someReader);
someConnection.Close();
// you need to name the datatable before saving it in XML
someDataTable.TableName = "anyTableName";
string someFileNameAndLocation = @"C:\Backup\backup1.xml";
// the XmlWriteMode is necessary to save the schema and data of the datatable
someDataTable.WriteXml(someFileNameAndLocation, XmlWriteMode.WriteSchema); 
```

# opengl - 将 GLSL #130 段转换为 #330

> ID：14336280
> 
> 赞同：0
> 
> 时间：2013-01-15T11:00:58.340
> 
> 标签：opengl, python-2.7, glsl, fragment-shader, pyopengl

我有以下与 GLSL #130 完美配合的着色器代码，但我想将其转换为适用于版本 #330 的代码（因为不知何故，#130 版本在我的带有 Geforce 210 的 Ubuntu 机器上不起作用; 着色器什么都不做）。经过几次失败的尝试（我不断收到未描述的链接错误），我决定寻求一些帮助。下面的代码使用统一变量 Brightness 和 Contrast 动态更改纹理的对比度和亮度。我已经使用 PyOpenGL 在 Python 中实现了它：

```
def createShader():
     """
     Compile a shader that adjusts contrast and brightness of active texture
     Returns
         OpenGL.shader - reference to shader
         dict - reference to variables that can be passed to the shader
     """

     fragmentShader = shaders.compileShader("""#version 130
     uniform sampler2D Texture;
     uniform float Brightness;
     uniform float Contrast;
     uniform vec4 AverageLuminance;

     void main(void)
     {
         vec4 texColour = texture2D(Texture, gl_TexCoord[0].st);
         gl_FragColor = mix(texColour * Brightness, 
                        mix(AverageLuminance, texColour, Contrast), 0.5);
     }
     """, GL_FRAGMENT_SHADER)
     shader = shaders.compileProgram(fragmentShader)

     uniform_locations = {
          'Brightness': glGetUniformLocation( shader, 'Brightness' ),
          'Contrast': glGetUniformLocation( shader, 'Contrast' ),
          'AverageLuminance': glGetUniformLocation( shader, 'AverageLuminance' ),
          'Texture': glGetUniformLocation( shader, 'Texture' )
     }
     return shader, uniform_locations 
```

我查看了需要为新的 GLSL 版本进行的更改，并尝试将片段着色器代码更改为以下内容，但随后只会出现非描述性链接错误：

```
fragmentShader = shaders.compileShader("""#version 330
uniform sampler2D Texture;
uniform float Brightness;
uniform float Contrast;
uniform vec4 AverageLuminance;
in vec2 TexCoord;
out vec4 FragColor;

void main(void)
{
    vec4 texColour = texture2D(Texture, TexCoord);
    FragColor = mix(texColour * Brightness, 
                mix(AverageLuminance, texColour, Contrast), 0.5);
}
""", GL_FRAGMENT_SHADER) 
```

有没有人可以帮助我进行这种转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:34:55.123

我怀疑提高着色器版本配置文件会解决任何问题。#version 330 是 OpenGL-3.3，根据 NVidia 产品网站，GeForce 210 支持的最大 OpenGL 版本是 OpenGL-3.1，即 #version 140

> 我没有创建顶点着色器，因为我认为我不需要一个（我不知道我应该做什么）。它以前也可以在没有任何顶点着色器的情况下工作。

可能只有在您不使用片段着色器或在尝试使用纹理之前。片段着色器需要来自顶点着色器的输入变量，才能将其用作纹理坐标。`TexCoord`不是内置变量（并且对于更高的 GLSL 版本，任何适合该作业的内置变量都已删除），因此您需要在顶点着色器中用值（和感觉）填充它。

> NVidia 机器上的 glGetString(GL_VERSION) 读取 OpenGL 版本 3.3.0。这是 Ubuntu，所以它可能与 Windows 规格不同？

您是否安装了 NVidia 专有驱动程序？它们真的被使用了吗？检查 glxinfo 或`glGetString(GL_RENDERER)`. OpenGL-3.3 与 OpenGL-3.1 相差不远，理论上 OpenGL 主要版本映射到硬件能力。

# cordova - 我的项目中缺少 Cordova.framework

> ID：14336285
> 
> 赞同：2
> 
> 时间：2013-01-15T11:01:13.690
> 
> 标签：cordova, xcode4.5

我正在为一个已经使用以前版本的 phonegap 构建的项目工作。我不知道该版本是否包含 Cordova 设置 (>1.3)。

问题是，当我克隆项目并尝试在 Xcode 中构建它时，我得到了`Cordova.framework`红色。 ![在此处输入图像描述](../Images/893bf5a0eedd4aa7c255c4831ec4eb8b.png)

请我需要你指出我需要做些什么才能走上正确的道路，因为这个项目不是由我开发的，而且这是我第一次使用 phonegap（但不是 iOS）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:12:09.583

这在 PhoneGap 2.0 中有所改变。不再有预先构建的 Cordova.framework。Cordova 源现在作为项目创建的一部分复制到项目中。

[http://shazronatadobe.wordpress.com/2012/07/20/improvements-in-cordova-2-0-0-for-ios/](http://shazronatadobe.wordpress.com/2012/07/20/improvements-in-cordova-2-0-0-for-ios/)

在其中一个自述文件或 phonegap 网站上可能有一些关于如何从早期版本转换的信息。

而且，这里是（从 1.9 升级到 2.0）： [http ://docs.phonegap.com/en/2.1.0/guide_upgrading_ios_index.md.html](http://docs.phonegap.com/en/2.1.0/guide_upgrading_ios_index.md.html)

基本上安装2.x后，新建一个项目，将新项目的部分内容复制到旧项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:52:24.057

当您通过 finder 访问您的项目时，您是否有“CordovaLib”目录？如果是这样，有一个“版本”文件会告诉你你有什么版本。

# php - 使用 php 在 ruby 文件的终端中执行并捕获结果

> ID：14336289
> 
> 赞同：0
> 
> 时间：2013-01-15T11:01:20.617
> 
> 标签：php, ruby, exec

我添加了 php 脚本来运行我的 ruby​​ 文件，但没有成功。我在其 php 目录中运行我的 php 脚本。

```
$command = "ruby /home/user/ruby-grok/examples/result.rb";
$out = shell_exec($command); 
```

它不显示 ruby​​ 文件的结果。但是当我在 php 之外运行命令时它可以工作。

预期结果是在终端中显示信息并将结果写入文件。

# couchdb - 使用 couchrest_model 创建过滤器

> ID：14336295
> 
> 赞同：1
> 
> 时间：2013-01-15T11:01:50.650
> 
> 标签：couchdb

我的 couchrest_model 类有一个`design`定义过滤器的部分，但它们从未出现。

```
class MyDoc < CouchRest::Model::Base
  property :my_key, String

  design do
    filter 'my_filter', "function(doc) {return (doc['my_key'] == 'value');}"
  end
end 
```

如果我需要在 IRB 中包含此文件的文件，即使我创建了一些文档，也永远不会写入过滤器。我需要打什么电话才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:20:38.300

我不确定 couchrest_model 是否支持过滤器。您可以尝试使用沙发直接保存过滤器：

```
@db = CouchRest.database("http://127.0.0.1:5984/my_db")
@db.save_doc({
    "_id" => "_design/my_filters", 
    :filters => {
      :my_filter => {
        "function(doc) {return (doc['my_key'] == 'value');}"
        }
      }
    }) 
```

# mysql - 表自联接的 SQL 性能损失

> ID：14336298
> 
> 赞同：1
> 
> 时间：2013-01-15T11:01:58.000
> 
> 标签：mysql, sql

在进行选择查询时，表自连接的性能与两个不同表之间的连接相比如何？例如，如果 tableA 和 tableB 是完全重复的（结构和数据），是否最好：

`select ... from tableA a inner join tableA b...`， 或者

```
select ... from tableA a inner join tableB b... 
```

也许这不是一个直截了当的答案，在这种情况下，有没有关于这个话题的参考资料？

我正在使用 MySql。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:06:40.263

假设表 B 是表 A 的精确副本，并且创建了所有必要的索引，表 A 的自连接应该比 B 与 A 的连接快一点，因为表 A 及其索引中的数据可以从缓存中重用为了执行自联接（这也可能隐含地为自联接提供更多内存，并且更多行将适合工作缓冲区）。

如果表 B 不同，则无法进行比较。

# c++ - 使用包含类数据的 PrivateClass 有什么好处？

> ID：14336302
> 
> 赞同：2
> 
> 时间：2013-01-15T11:02:03.517
> 
> 标签：c++, architecture, design-patterns

```
class MyClassPrivate
{
//My members.
};    

//and then
class MyClass {
private:
 MyClassPrivate* const d;
}; 
```

使用这种“模式”的原因是什么？它是如何正确调用的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:08:07.497

这称为“指向实现”或“pimpl”。请参阅[http://en.wikibooks.org/wiki/C++_Programming/Idioms#Pointer_To_Implementation_.28pImpl.29](http://en.wikibooks.org/wiki/C++_Programming/Idioms#Pointer_To_Implementation_.28pImpl.29)

当您使用此模式时，您将转发声明实现类，并在其他地方声明主体，即：

```
// header
class MyClassPrivate;
class MyClass {
public:
  MyClass();
  ~MyClass();
private:
  MyClassPrivate* const d;
};

// cpp
class MyClassPrivate {
};
MyClass::MyClass() : d(new MyClassPrivate) {}
MyClass::~MyClass() { delete d; } 
```

这样做的好处`MyClass`是不会向`MyClass`. 如果实现发生变化，其他用户`MyClass`不需要重新编译。任何必须为成员包含的头文件也不需要公开，这提高了编译时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:10:26.960

最常用的是Pimlp成语。

*   [为什么要使用“PIMPL”成语？](https://stackoverflow.com/questions/60570/why-should-the-pimpl-idiom-be-used)
*   [粉刺成语](http://c2.com/cgi/wiki?PimplIdiom)
*   [粉刺](http://www.gamedev.net/page/resources/_/technical/general-programming/the-c-pimpl-r1794)

> Pimpl 成语描述了一种使您的头文件不受更改的方法。您经常听到诸如“避免更改您的公共界面！”之类的建议。所以你可以修改你的私有接口，但是当你的头文件定义私有方法时，如何避免重新编译。这就是 Pimpl 所做的 - 当您的私有接口更改时减少编译损坏[ [3](http://www.gamedev.net/page/resources/_/technical/general-programming/the-c-pimpl-r1794) ]。

从[这里](http://c2.com/cgi/wiki?PimplIdiom)：

好处：

1.  更改类的私有成员变量不需要重新编译依赖它的类，因此生成时间更快，并且 FragileBinaryInterfaceProblem 减少了。
2.  头文件不需要#include 在私有成员变量中“按值”使用的类，因此编译时间更快。
3.  这有点像 SmallTalk 自动处理类的方式......更纯粹的封装。

缺点：

1.  为实施者做更多的工作。
2.  不适用于需要通过子类访问的“受保护”成员。
3.  阅读代码有点困难，因为某些信息不再在头文件中。
4.  由于指针间接，运行时性能略有下降，特别是如果函数调用是虚拟的（间接分支的分支预测通常很差）。

怎么做：

1.  将所有私有成员变量放入结构中。
2.  将结构定义放在 .cpp 文件中。
3.  在头文件中，仅放置结构的 ForwardDeclaration。
4.  在类定义中，将指向结构的（智能）指针声明为唯一的私有成员变量。
5.  类的构造函数需要创建结构。
6.  类的析构函数需要销毁结构（可能是由于使用了智能指针而隐含地）。
7.  赋值运算符和 CopyConstructor 需要适当地复制结构，否则将被禁用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T11:08:38.423

当您想将接口与实施分开时，您可以将其用于[PIMPL idiom 。](http://en.wikibooks.org/wiki/C++_Programming/Idioms#Pointer_To_Implementation_.28pImpl.29)

许多设计模式也使用指向私有属性的“指针”，例如**Strategy Pattern**。此模式允许您在运行时选择不同的算法。

此外，如果您使数据的操作遵循相同的接口，则可以将数据封装在私有类中，使该类成为层次结构的一部分，并在运行时（或编译时）在不同的数据实现之间切换:))。

一个很好的例子是保存多边形数据的几何类。每个多边形都提供对点的访问，您还可以删除多边形边缘并进行各种其他拓扑操作。如果为 Polygon 类提供一个抽象基类，提供 deletePoint、addPoint、swapEdge 等方法，就可以测试不同的 Polygon 实现。

您可以直接将多边形定义为点类型的列表，并将点存储在不同的容器（列表或向量）中。Polygon 类可以通过*间接寻址*来定义，其中多边形实际上是点列表的 ID 列表（我说的是一般意义上的列表）。这样，您可以测试 PolygonGeometry 类的不同算法，并了解它们如何与不同的 Polygon 实现一起工作。

这背后有一个设计原则：**Prefer Composition to Inheritance**。每当您使用组合并且依赖于在运行时确定的类型时，您将拥有一个私有属性指针。

# javascript - JavaScript 正则表达式也可以匹配数字

> ID：14336305
> 
> 赞同：1
> 
> 时间：2013-01-15T11:02:18.170
> 
> 标签：javascript, regex

我使用这个正则表达式`/^[-.a-zA-Z\s]+$/` 来匹配任何只包含英文字母、破折号和点的字符串。

我想修改它以使其也匹配任何数字。

所以所有这些字符串都将被接受：

```
first
first-floor
1st floor
floor No. 1 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:02:58.883

只需将数字添加到您的字符类：

```
/^[-.a-zA-Z\d\s]+$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:46:13.890

你也可以写：

```
 /^[-.a-zA-Z0-9\s]+$/ 
```

# c# - 不使用默认端口（587）的 SMTP 服务器

> ID：14336307
> 
> 赞同：-4
> 
> 时间：2013-01-15T11:02:23.290
> 
> 标签：c#

```
SmtpClient emailClient = new SmtpClient(MailServer);
System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential(sender_mail_id(organisation mail id), pwd);
emailClient.UseDefaultCredentials = false;
emailClient.Credentials = SMTPUserInfo;

emailClient.Port = 587;
emailClient.Send(msg); 
```

上面发送邮件的代码正在工作。我想配置我自己的端口（我的 Outlook 传出服务器端口），而不是 587。如何做到这一点？（我的组织outlook id附有yahoo id）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:20:07.180

这是您可以使用的东西，例如，无论如何您都可以使用它来适应您的示例

```
 MailMessage mailMsg = new MailMessage();
    mailMsg.To.Add("somEmailAddress@SomMailHost.com");
    // From
    MailAddress mailAddress = new MailAddress("spongebob@sandymail.com");
    mailMsg.From = mailAddress;

    // Subject and Body
    mailMsg.Subject = "subject";
    mailMsg.Body = "body";

    // Init SmtpClient and send on port 587
    SmtpClient emailClient = new SmtpClient("mailserver", 587);
    System.Net.NetworkCredential credentials = new System.Net.NetworkCredential("username", "password");
    emailClient.Credentials = credentials;
    emailClient.Send(mailMsg); 
```

# java - Bean Validation：复杂的消息值解析 - 但如何？

> ID：14336310
> 
> 赞同：0
> 
> 时间：2013-01-15T11:02:31.893
> 
> 标签：java, bean-validation

我编写了一个自定义约束`@Year`，称为检查 a 是否`Date`在某一年发生。

```
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.FIELD, ElementType.PARAMETER, ElementType.METHOD, ElementType.ANNOTATION_TYPE })
@Constraint(validatedBy = YearCheck.class)
public @interface Year {

  String message() default "{year.message}";

  Class<?>[] groups() default {};

  Class<? extends Payload>[] payload() default {};

  /**
   * The lower year. If not specified then no upper boundary check is performed.<br>
   * Special values are:
   * <ul>
   * <li>{@link TimeUtil#NOW} for the current year
   * </ul>
   */
  String min() default "";

  /**
   * The upper year. If not specified then no upper boundary check is performed.<br>
   * Special values are:
   * <ul>
   * <li>{@link TimeUtil#NOW} for the current year
   * </ul>
   */
  String max() default "";
} 
```

其中`ValidationMessages.properties`包含以下内容：

```
year.message = must be a year between {min} and {max} 
```

如您所见，`min`and`max`是字符串，因为`TimeUtil.NOW`（包含 的常量`"now"`）表示以当前年份进行比较。

另外，如果不指定`min`or `max`，则表示对应的值为*无穷大*

所以，问题是，例如`min`：如何检查是否`min`已设置，如果不是数字（`""`或`"now"`）我如何设置一个值，然后将其插入到消息中？

例如`@Year(min=1900,max=TimeUtil.NOW)`应该生成消息

```
must be a year between 1900 and 2013 
```

我已经阅读了有关 stackoverflow 的一些答案，阅读了文档，但我不确定 a) 是否有可能，并且 b) 我需要在约束实现或自定义`MessageInterpolator`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:28:47.323

> 如何检查 min 是否已设置以及是否不是数字

`initialize()`您可以在实现的方法中访问注释属性`ConstraintValidator`。

> 如何设置一个值，然后将其插入到消息中？

您不能直接执行此操作，但您可以在`isValid()`验证器的方法中使用传递的`ConstraintValidatorContext`.

您的验证器可能看起来像这样：

```
public class YearValidator implements ConstraintValidator<Year, String> {

    private Date min;
    private Date max;

    @Override
    public void initialize(Year constraintAnnotation) {
        if(constraintAnnotation.min().equals("")) {
            min = getMinimumDate();
        }
        else if(constraintAnnotation.min().equals(TimeUtil.NOW)) {
            min = getCurrentYear();
        }
        else {
            min = getYearFromString(constraintAnnotation.min());
        }

        //same for max()
}

    @Override
    public boolean isValid(Date value, ConstraintValidatorContext context) {
        if(value == null) {
            return true;
        }

        if(value.before(min) || value.after(max)) {

            context.disableDefaultConstraintViolation();

            //load/create the error message and set min and max in it
            String template = getTemplate(min, max);

            context
                .buildConstraintViolationWithTemplate(template)
                .addConstraintViolation();

            return false;
        }

        return true;
    }
} 
```

# css - 文本后的 CSS 边框底部

> ID：14336311
> 
> 赞同：2
> 
> 时间：2013-01-15T11:02:32.117
> 
> 标签：css

css

```
.bottomdotline{
border-bottom-style: dotted;
border-bottom-width:2px;
display:table-cell;
width:100%;
} 
```

html

```
<td >Name: <span class="bottomline"> <? echo $name; ?></span></td>
<td ></td> 
```

如果我使用下一行将受到宽度的影响，如何在文本之后制作底部边框。仅供参考：php 值将显示在边框顶部

我的目标：

姓名：__________________

我在这里找到了类似的帖子和答案[如何在 CSS 中为空格加下划线？](https://stackoverflow.com/questions/4513388/how-to-underline-blank-space-in-css)

但我想使用类

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:11:00.807

添加CSS：

```
.bottomline:after{
  content: " ";
  border-bottom-style: dotted;
  border-bottom-width:2px;
  display:table-cell;
  width:200px;
} 
```

这是现场示例[http://jsfiddle.net/aghd7/](http://jsfiddle.net/aghd7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:37:45.773

问题是`span`没有`width`. 最简单的解决方案是让它拥有 `display:inline-block` 和`min-width`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-31T13:57:21.710

Use this below code.... same as example..

```
ul {
    display: inline-block;
}
li {
    display: inline-block;
    margin-right: 10px;
    position: relative;
}
.underline:after {
    border-bottom: 2px solid #000;
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    width: 50%;
    bottom: 0;
    margin: 0 auto;
}
```

```
<ul>
    <li class="underline">Lesson Planner</li>
    <li>Two</li>
    <li>Three</li>
</ul>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-09T21:27:54.927

这是另一个解决方案。

```
<div class="container">
  <h1 class="offset-border">Hello World</h1>
</div> 
```

和CSS。

```
.container{
  overflow:hidden;
}
.offset-border{
  display: inline-block;
  padding-right: 10px;
  position: relative;
}
.offset-border::after{
    background: #000 none repeat scroll 0 0;
    bottom: 6px;
    content: "";
    display: inline-block;
    height: 1px;
    left: 100%;
    position: absolute;
    width: 5000px;
    z-index: -1;
} 
```

# java - Android表格布局从手机边缘开始

> ID：14336312
> 
> 赞同：0
> 
> 时间：2013-01-15T11:02:41.340
> 
> 标签：java, android, android-tablelayout

我正在使用表格布局来显示一些数据，但表格从手机边缘从左到右开始。如果我想把整个桌子放在中间，在左右两边留一些空间，我该怎么办。请指教。下面是我的代码。

代码

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF" >

    <TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:stretchColumns="2" >

        <LinearLayout android:gravity="left" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="150dp"
                android:layout_height="50dp"
                android:src="@drawable/ezwaybill" />
        </LinearLayout>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="150dp"
                android:layout_height="50dp"
                android:src="@drawable/van" />
        </TableRow>

        <LinearLayout android:gravity="center" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="SENDER"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="22sp" />
        </LinearLayout>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView1"
                android:text="Account"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText1"
                android:layout_span="2"
                android:editable="false"
                android:text="0001"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView3"
                android:text="Tel"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText2"
                android:layout_span="2"
                android:editable="false"
                android:text="01111022408615"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView5"
                android:text="Add"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText3"
                android:layout_span="2"
                android:editable="false"
                android:text="No. 7, Ferrers Park"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView5"
                android:text="Country"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText4"
                android:layout_span="2"
                android:editable="false"
                android:text="Malaysia"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView6"
                android:text="Postcode  "
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText5"
                android:layout_span="2"
                android:editable="false"
                android:text="44800"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView7"
                android:text="Email"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText6"
                android:layout_span="2"
                android:editable="false"
                android:text="customer@domain.com"
                android:textSize="15sp" />
        </TableRow>

        <TextView
            android:layout_width="10dp"
            android:layout_height="10dp" />    

    </TableLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:08:01.563

给你的主视图一个尺寸并设置 android:layout_gravity="center"。（不确定这是否适用于视图）。所以他们不填写父母。

否则就给它一个

```
android:layout_marginLeft="150dp"
android:layout_marginRight="150dp" 
```

例如。

此致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:14:05.820

使用此代码，如图所示 ![在此处输入图像描述](../Images/0d744bea9fb4a664a20a341429e8753a.png)

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000" >

    <TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:stretchColumns="2" 
        android:layout_marginLeft="50dp"
        android:layout_marginRight="50dp"
        android:layout_gravity="center">

        <LinearLayout android:gravity="left" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="150dp"
                android:layout_height="50dp"
                android:src="@drawable/ic_launcher" />
        </LinearLayout>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="150dp"
                android:layout_height="50dp"
                android:src="@drawable/ic_launcher" />
        </TableRow>

        <LinearLayout android:gravity="center" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="SENDER"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="22sp" />
        </LinearLayout>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView1"
                android:text="Account"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText1"
                android:layout_span="2"
                android:editable="false"
                android:text="0001"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView3"
                android:text="Tel"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText2"
                android:layout_span="2"
                android:editable="false"
                android:text="01111022408615"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView5"
                android:text="Add"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText3"
                android:layout_span="2"
                android:editable="false"
                android:text="No. 7, Ferrers Park"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView5"
                android:text="Country"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText4"
                android:layout_span="2"
                android:editable="false"
                android:text="Malaysia"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView6"
                android:text="Postcode  "
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText5"
                android:layout_span="2"
                android:editable="false"
                android:text="44800"
                android:textSize="15sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:padding="2dip" >

            <TextView
                android:id="@+id/textView7"
                android:text="Email"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText6"
                android:layout_span="2"
                android:editable="false"
                android:text="customer@domain.com"
                android:textSize="15sp" />
        </TableRow>

        <TextView
            android:layout_width="10dp"
            android:layout_height="10dp" />    

    </TableLayout>

</ScrollView> 
```

# html - 如果用户勾选单个复选框，如何获得“是”，如果他没有在 HTML 中勾选它，如何获得“否”

> ID：14336313
> 
> 赞同：-4
> 
> 时间：2013-01-15T11:02:44.897
> 
> 标签：html, checkbox

我写在联系表格上，里面有一个复选框。我想要的是，如果用户勾选复选框，我应该得到“是”，而我得到的是，没问题。我还想要的是，如果用户没有勾选复选框，我应该得到 NO。这怎么可能只在 HTML 中实现？如果不是那么在Java脚本中？注意：我只想使用一个复选框。下面是代码以便更好地理解。

```
<input type="checkbox" name="Agreed to Privacy Policy:" value="Yes" />
Please tick this check box if you agree with our 
<a href="http://www.xyz.com" target="_blank"> 
Privacy Policy</a></td> 
```

注意：如果勾选了复选框，现在我会收到我的测试电子邮件：“同意隐私政策：是”我想要的是如果用户没有勾选复选框“同意隐私政策：否”。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:27:02.903

如果勾选了复选框，A`<input type="checkbox">`只会返回一个值。`<form>`因此，如果未选中复选框，您将永远不会从复选框中获得直接响应。

诀窍是检查是否已将任何值作为 POST/GET 数据的一部分传递。如果有，则该复选框已打勾……如果没有，则没有。

您不提供任何代码，甚至不提供您用于发送电子邮件的语言的提示，但如果您使用的是 C#（例如），您可以使用类似这样的东西......

（以下假设您将`name`属性更改为更合适的内容，例如`chkAgree`，因为其中有空格对您没有帮助）

```
messageBody += "Agreed to Privacy Policy: ";
messageBody += (Request["chkAgreed"] != null ? "Yes" : "No"); 
```

* * *

**更新**

继 OP 的评论之后，这里是上述代码的 PHP 版本。

这假设`<form>`正在使用`method="post"`. 如果您正在使用`method="get"`（或根本没有`method`属性），那么您应该将 in 更改`$_POST`为`$_GET`.

```
messageBody .= "Agreed to Privacy Policy: ";
messageBody .= (isset($_POST["chkAgreed"]) ? "Yes" : "No"); 
```

# android - 设置 ListView 的可见性

> ID：14336314
> 
> 赞同：1
> 
> 时间：2013-01-15T11:02:50.193
> 
> 标签：android, android-listview

我想在用户单击按钮时显示我的列表视图，并在单击按钮时再次隐藏它。这是相关按钮的 onClick 侦听器：

```
connectBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if(open){
                mDbAdapter.close();
                connectBtn.setText("Open Database");
                open = false;
                hideUI();

            }else{
                mDbAdapter = new ContactsDbAdapter(v.getContext());
                mDbAdapter.open();
                connectBtn.setText("Close Database");
                open = true;
                showUI();
                //retrieve data
                fillData();
            }
        }
    }); 
```

这是 showUI() 方法：

```
protected void showUI() {
    fName.setVisibility(View.VISIBLE);
    lName.setVisibility(View.VISIBLE);
    fNameBox.setVisibility(View.VISIBLE);
    lNameBox.setVisibility(View.VISIBLE);
    createBtn.setVisibility(View.VISIBLE);
    this.setVisible(true);

    createBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            mDbAdapter.createContact(fNameBox.getText().toString(), lNameBox.getText().toString());
            fillData();
        }
    });
} 
```

和 hideUI() 方法：

```
protected void hideUI() {
    fName.setVisibility(View.INVISIBLE);
    lName.setVisibility(View.INVISIBLE);
    fNameBox.setVisibility(View.INVISIBLE);
    fNameBox.clearComposingText();
    lNameBox.setVisibility(View.INVISIBLE);
    lNameBox.clearComposingText();
    createBtn.setVisibility(View.INVISIBLE);
    this.setVisible(false);

} 
```

当我将可见性设置为 true 时，它​​工作正常。但是，当我将其设置为 false 时，我会出现黑屏，但没有崩溃或错误。任何的想法？

注意：`this.setVisible(false);`. 我的课程扩展了 ListActivity。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:07:35.663

```
setVisibility(View.INVISIBLE); 
```

只是让你看不见，但视图所占据的空间将是它们本身

使用`setVisibility(View.GONE);`，以便视图的大小将失效

使用它并让我知道它是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:19:11.130

ListActivity 是保持列表视图

如果你这样做。setVissiblity(false); 它隐藏了列表视图及其内容，所以在你的情况下你会看到背景颜色是黑色的。

好的方法是在 xml 中获取 Listview 并获取 id 使该视图可见和不可见 你对这个 apprch 感到非常舒服

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)阅读这篇文章你会明白的。并做出相应的改变

# php - 将 12 个月添加到日期字符串并以相同格式返回 201301 (Ym)

> ID：14336316
> 
> 赞同：0
> 
> 时间：2013-01-15T11:02:57.260
> 
> 标签：php, date

如何将月份添加到日期字符串，例如 201308（2013 年 8 月）并以相同的格式返回，即 201408（2014 年 8 月）？我试过了：

```
$dateToDflt = "201308";
$dateToDflt = strtotime(date("Ym", strtotime($dateToDflt)) . " +12 months");
$dateToDflt = date("Ym",$dateToDflt); 
```

这只是比今天的日期提前了 12 个月，所以我想我的时间和日期格式很混乱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:06:47.953

```
$date = DateTime::createFromFormat('Ym', $dateToDflt);
$date->modify('+12 months')
$dateToDflt = $date->format('Ym'); 
```

或简单的字符串操作，包括强制转换

```
$dateToDflt[3] = $dateToDflt[3] + 1; 
```

当然仅适用于 2010 年至 2018 年。要将范围扩展到 2098 年，请添加此 ;)

```
$dateToDflt[2] += (int) ($dateToDflt[3] == 0); 
```

[http://codepad.org/43LACMoZ](http://codepad.org/43LACMoZ) ;)

# php - 如何在 Joomla 中带来最新文章？

> ID：14336319
> 
> 赞同：0
> 
> 时间：2013-01-15T11:03:01.520
> 
> 标签：php, joomla, joomla-extensions

我是 joomla 的新手，刚开始学习如何制作模板。我编辑了一个模板，我知道如何使用模块类型组件在该模板上添加所有最新文章，但我有 6 个 div 标签，我希望最近的 6 篇文章位于 div 标签之间。每个在一个 div 中怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:11:44.793

您应该使用动态模板，其中使用[PHP foreach 循环](http://php.net/manual/en/control-structures.foreach.php)遍历文章（无论有多少）并为每个文章放置 div 标签。

像这样：

```
<ul class="latestnews<?php echo $moduleclass_sfx; ?>">
<?php foreach ($list as $item) : ?>
    <li>
        <h4><a href="<?php echo $item->link; ?>"><?php echo $item->title; ?></a></h4>
        <p><?php echo JHTML::_('string.truncate', (strip_tags($item->introtext, '<a><br />')), $item->params->get('readmore_limit')); ?></p>
    </li>
<?php endforeach; ?>
</ul> 
```

# jquery - 页面加载小部件 jquerymobile 1.3

> ID：14336321
> 
> 赞同：0
> 
> 时间：2013-01-15T11:03:11.777
> 
> 标签：jquery, jquery-mobile

我无法从 jquerymobile 获得这个 PageLoading-Widget 工作。每次更改页面时，我都会尝试调用它。这是我的代码：

在每次页面更改时调用阻塞和解除阻塞的方法：

```
var tmpChangePage = $.mobile.changePage;
var globalChangePageTimeout = false;
$.mobile.changePage = function(toPage, options) {
    blockUI();
    if (globalChangePageTimeout)
        clearTimeout(globalChangePageTimeout);

    globalChangePageTimeout = setTimeout(function() {
        tmpChangePage(toPage, options);
        unblockUI();
    }, 100);
}; 
```

块UI（）：

```
function blockUI() {
$.mobile.loading('show', {
    text: 'loading',
    textVisible: true,
    theme: 'a'
});
} 
```

我认为它应该可以工作，我没有像他们在此处的示例中那样做任何其他事情：http: [//stage.api.jquerymobile.com/page-loading/](http://stage.api.jquerymobile.com/page-loading/)

任何人都知道缺少什么？

# php - 检查本地主机并忽略端口

> ID：14336323
> 
> 赞同：1
> 
> 时间：2013-01-15T11:03:16.080
> 
> 标签：php

我设法找到了一个 php 脚本来检查本地主机，但是使用 webmatrix 总是有一个附加到 url 的端口，并且端口从一个站点到另一个站点发生变化。

```
<?php if ($_SERVER['HTTP_HOST'] == 'localhost:62036')  { ?>
<style>
    #introContent {display:none !important;}
</style>
<?php } ?> 
```

目前的项目几乎完成了，但是下一个项目能够在测试环境中禁用某些样式和功能时会派上用场。我尝试使用 strpos 对上述内容进行修改，但没有奏效，并且不确定如何正确使用子字符串。能够删除端口将使其在转移到其他项目时变得更简单，少了 1 件忘记更新的事情。

一些帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:07:09.373

要以粗略的方式解决您的问题，您可以像这样简单地获取字符串的第一部分：

```
<?php
$host = $_SERVER['HTTP_HOST'];
$colPos = strpos($host, ':');
$host = $colPos !== false ? substr($host, 0, $colPos) : $host;

if ($host == 'localhost') { ?> 
```

但是，更好的方法是使用常量来设置环境名称，例如`DEV`等`PRODUCTION`。

你可以这样做......在一个`config.php`（或全局包含的文件）中：

```
<?php
define('ENVIRONMENT', 'DEV'); // or PRODUCTION 
```

..然后在你的主文件中：

```
<?php if (ENVIRONMENT == 'DEV') { ?> 
```

# php - 将逗号分隔的 Unicode 文本文件导入 PHP

> ID：14336332
> 
> 赞同：0
> 
> 时间：2013-01-15T11:04:05.287
> 
> 标签：php, csv, unicode, explode

mytxt.txt 中的文本示例

```
Budu Bawa Pathana,බුදු බව පතනා,budu-bawa-pathana 
Budu Piya Mage,බුදු පියා මගේ,budu-piya-mage
Dewathi Deva Raja,දෙවැති දේව රාජා,dewathi-deva-raja 
Domnase Mulawe,දොම්නසේ මුලාවේ,domnase-mulawe 
```

脚本 ：

```
$lines = file('mytxt.txt');
$count = count($lines);

// Two dimensional array
$datax = array();

$i = 0;

foreach($lines as $value) {

    if($i!=0):
        list($id,$english,$sinhala,$html) = explode(",", $value);
        $datax[$i]['id'] = $id;
        $datax[$i]['eng'] = $english;
        $datax[$i]['sin'] =$sinhala;
        $datax[$i]['html'] = $html;
    endif;
    $i++;
}
$data['impData'] = $datax; 
```

当我运行脚本时。僧伽罗语 Unicode 文本显示为黑框。我有什么解决方案可以将结果打印为 Unicode 文本吗？HTML 标头设置为 utf-8

# arrays - AS3：加入数组并保存到文本文件正在创建空白条目

> ID：14336335
> 
> 赞同：0
> 
> 时间：2013-01-15T11:04:11.893
> 
> 标签：arrays, actionscript-3, air, text-files, filestream

我很难让我的数组正确保存到文本文件中。文本文件以每行一个条目的方式格式化，因此我使用它：

```
var newFavString:String = arFavourites.join("\r\n");

    favStream.open(favFile, FileMode.WRITE);
    favStream.writeUTFBytes(newFavString);
    favStream.close(); 
```

但是在某个地方，它以某种方式添加了空白行，这可能是由某些数组条目中的空格引起的，但这不应该影响我不认为的加入过程。

我用它来清理数组以防万一，它仍然在跟踪中显示一些未定义的对象：

```
for (i=0; i<arFavourites.length-1; i++) {
        if (arFavourites[i] == undefined) {
        arFavourites.splice(i,1);
        }
        trace(arFavourites[i]);
    } 
```

这就是我将数据导入数组的方式：

```
var favFile:File = File.userDirectory;
favFile = favFile.resolvePath("favourites.txt");
var favStream:FileStream = new FileStream();

var arFavourites = new Array();
var FavCount:int = 0;

favStream.open(favFile, FileMode.READ);
var fileContents:String = favStream.readUTFBytes(favStream.bytesAvailable);

    arFavourites = fileContents.split("\r\n");

    for (i=0; i<arFavourites.length-1; i++) {
        if (arFavourites[i] == undefined) {
        arFavourites.splice(i,1);
        }
    }

favStream.close(); 
```

当我删除某些东西时，我会在数组中搜索它并将其拼接出来。也许错误就在那里。

```
var k:int;
    var i:int;
    trace("Selected Index: " + dg.selectedIndex);
    if (dg.length == 0) {
        return;
    }
    for (k=0; k<dg.length; k++) {
        if (dg.isItemSelected(dg.getItemAt(k))) {
            for (i=0; i<arFavourites.length; i++) {
                if (arFavourites[i] == dg.getItemAt(k)[1]) {
                    arFavourites.splice(i,1);
                    }
                if (arFavourites[i] == dg.getItemAt(k)[2]) {
                    arFavourites.splice(i,1);
                    }
                if (arFavourites[i] == dg.getItemAt(k)[3]) {
                    arFavourites.splice(i,1);
                    }
                if (arFavourites[i] == dg.getItemAt(k)[4]) {
                    arFavourites.splice(i,1);
                    }
                if (arFavourites[i] == dg.getItemAt(k)[5]) {
                    arFavourites.splice(i,1);
                    }
            }
            dg.removeItemAt(k);
            dg.scrollToIndex(k);
            dg.clearSelection();
            break;
        }
    }
    for (i=0; i<arFavourites.length-1; i++) {
        if (arFavourites[i] == undefined) {
        arFavourites.splice(i,1);
        }
    }
    var newFavString:String = arFavourites.join("\r\n");
    trace(newFavString);

    favStream.open(favFile, FileMode.WRITE);
    favStream.writeUTFBytes(newFavString);
    favStream.close(); 
```

当从数组中添加或删除某些内容时，文本文件会更新。我敢肯定它真的很简单，我将不胜感激快速响应=）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:50:21.753

这真的不是从数组中过滤掉东西的方法（你这样做既低效又遗漏了一些）：

```
private function test():void
{
    var tester:Array = [];
    tester[1] = 1;
    tester[2] = 2;
    tester[4] = 3;
    tester[6] = 4;
    // 1-2-3-4
    trace(removeEmptyElements(tester).join("-"));
}

public static function removeEmptyElements(array:Array):Array
{
    var result:Array = new Array(array.length);
    for (var i:int, j:int; i < array.length; i++)
        if (array[i] != undefined) result[j++] = array[i];
    result.length = j;
    return result;
} 
```

这将是做到这一点的方法。您还希望合并 if 语句来测试互斥条件（或确实`getitemAt`有副作用？）。否则它看起来更像是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:49:27.137

好的，所以我终于想出了一个可行的解决方案。通过获取，`selectedIndex`我可以找出与 dataGrid 线匹配的数组元素，然后将其拼接出来。

选定索引：

```
arFavourites.splice(dg.selectedIndex*5,5); 
```

从 DataGrid 中删除行：

```
for (k=0; k<dg.length; k++) {
        trace(dg.length);
        if (dg.isItemSelected(dg.getItemAt(k))) {
            dg.removeItemAt(k);
            dg.scrollToIndex(k);
            dg.clearSelection();
        }} 
```

重写文本文件：

```
var newFavString:String = arFavourites.join("\r\n");
    trace(newFavString);
    favStream.open(favFile, FileMode.WRITE);
    favStream.writeUTFBytes(newFavString);
    favStream.close(); 
```

# entity-framework - EF 迁移种子 - 无法创建“Application.Model.TranslationItem”类型的常量值

> ID：14336337
> 
> 赞同：1
> 
> 时间：2013-01-15T11:04:13.350
> 
> 标签：entity-framework, migration, code-first, seed, sql-update

TranslationItem 模型：

```
[DataContract]
public class TranslationItem : CloneableBaseEntity<TranslationItem>, IValidatableObject
{

    public int TranslationId { get; set; }
    public Translation Translation { get; set; }

    public int Lcid { get; set; }        

    private string _text;
    public string Text
    {
        get { return _text; }
        set
        {
            _text = value;
            RaisePropertyChanged("Text");
        }
    }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        var t = validationContext.ObjectInstance as TranslationItem;   
        return t.Translation.Validate(validationContext);               
    }
} 
```

翻译模型：

```
[DataContract]
public class Translation : CloneableBaseEntity<Translation>, IValidatableObject
{
    private static int _englishLcid = 9;

    private  ObservableCollection<TranslationItem> _translations;
    [DataMember]
    public virtual ObservableCollection<TranslationItem> Translations
    { 
        get{
            return _translations;
        }
        set
        {
            _translations = value;
            foreach (TranslationItem ti in _translations)
            {
                ti.PropertyChanged += ti_PropertyChanged;
            }
        }
    }

    ...
    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext){ 

        Translation t;
        if(validationContext.ObjectInstance.GetType()== typeof(Translation))
            t = validationContext.ObjectInstance as Translation;
        else
            t =( validationContext.ObjectInstance as TranslationItem).Translation;

        if (!t.EnglishNotRequried)
        {
            if (!t.TranslationDict.ContainsKey(_englishLcid) || String.IsNullOrEmpty(t.TranslationDict[_englishLcid].Text))
            {
                yield return new ValidationResult("EnglishTranslationMissing");
            }
        }
    }
} 
```

我的迁移配置类中的种子方法

```
protected override void Seed(DbContext context)
{
    int deLcid = new CultureInfo("en").LCID;
    int enLcid = new CultureInfo("en").LCID;

    TranslationItem enStd = context.TranslationItems.FirstOrDefault(ti => ti.Text == "Standard" && ti.Lcid == enLcid)
                            ?? new TranslationItem { Text = "Standard", Lcid = enLcid };

    TranslationItem deStd = context.TranslationItems.FirstOrDefault(ti => ti.Text == "Standard" && ti.Lcid == deLcid)
                            ?? new TranslationItem { Text = "Standard", Lcid = deLcid };

    context.Translations.AddOrUpdate(
        t => t.Translations,
        new Translation
            {
                Translations = new ObservableCollection<TranslationItem>
                    {
                        enStd,
                        deStd
                    }
            });

    context.SaveChanges();

    context.EventTypes.AddOrUpdate(
        et => et.Name,
        new EventType
        {
            Name = context.Translations.FirstOrDefault(t => t.Translations.Any(x => x.Lcid == enLcid && x.Text == "Standard") &&
                                                            t.Translations.Any(x => x.Lcid == deLcid && x.Text == "Standard") )
        });             
} 
```

当我想更新数据库时出现以下错误

```
Unable to create a constant value of type 'PQS.Model.TranslationItem'. Only primitive types or enumeration types are supported in this context. 
```

我不太确定如何解决这个问题。我已经尝试先插入我的 TranslationItems，但是当我这样做时，验证失败，因为我猜需要翻译的 FK。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:59:20.810

我自己用一点技巧修复了它（不完全是我喜欢的解决方案，但它现在有效）

我的问题：似乎`AddOrUpdate(...)`i 只能比较原始类型或枚举类型。

所以我添加了一个额外的 id`SeedId`来识别我的实体。

所以我在种子方法中的代码现在非常简单：

```
foreach (EventType eventtype in PqsDbContext.getStdEventTypes())
{
    context.EventTypes.AddOrUpdate(et => et.SeedId, eventtype);
} 
```

# java - 当前活动Android的屏幕视频记录

> ID：14336338
> 
> 赞同：26
> 
> 时间：2013-01-15T11:04:15.427
> 
> 标签：java, android, screen, record

是否可以从同一活动记录当前正在运行的活动的屏幕视频？
我知道如何截取当前活动的屏幕截图，但对截取屏幕视频一无所知。我该如何开始呢？我不知道如何开始。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-06-23T14:11:26.857

由于 Lollipop 我们可以使用 Media Projection API ！**（API 21+）**

这是我用于录制的以下代码，请注意，我们首先需要获得用户权限；）

```
private static final int CAST_PERMISSION_CODE = 22;
private DisplayMetrics mDisplayMetrics;
private MediaProjection mMediaProjection;
private VirtualDisplay mVirtualDisplay;
private MediaRecorder mMediaRecorder;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mMediaRecorder = new MediaRecorder();

    mProjectionManager = (MediaProjectionManager) getSystemService
            (Context.MEDIA_PROJECTION_SERVICE);

    getWindowManager().getDefaultDisplay().getMetrics(mDisplayMetrics);

    prepareRecording();
}

private void startRecording() {
    // If mMediaProjection is null that means we didn't get a context, lets ask the user
    if (mMediaProjection == null) {
        // This asks for user permissions to capture the screen
        startActivityForResult(mProjectionManager.createScreenCaptureIntent(), CAST_PERMISSION_CODE);
        return;
    }
    mVirtualDisplay = createVirtualDisplay();
    mMediaRecorder.start();
}

private void stopRecording() {
    if (mMediaRecorder != null) {
        mMediaRecorder.stop();
        mMediaRecorder.reset();
    }
    if (mVirtualDisplay != null) {
        mVirtualDisplay.release();
    }
    if (mMediaProjection != null) {
        mMediaProjection.stop();
    }
    prepareRecording();
}

public String getCurSysDate() {
    return new SimpleDateFormat("yyyy-MM-dd_HH-mm-ss").format(new Date());
}

private void prepareRecording() {
    try {
        mMediaRecorder.prepare();
    } catch (Exception e) {
        e.printStackTrace();
        return;
    }

    final String directory = Environment.getExternalStorageDirectory() + File.separator + "Recordings";
    if (!Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
        Toast.makeText(this, "Failed to get External Storage", Toast.LENGTH_SHORT).show();
        return;
    }
    final File folder = new File(directory);
    boolean success = true;
    if (!folder.exists()) {
        success = folder.mkdir();
    }
    String filePath;
    if (success) {
        String videoName = ("capture_" + getCurSysDate() + ".mp4");
        filePath = directory + File.separator + videoName;
    } else {
        Toast.makeText(this, "Failed to create Recordings directory", Toast.LENGTH_SHORT).show();
        return;
    }

    int width = mDisplayMetrics.widthPixels;
    int height = mDisplayMetrics.heightPixels;

    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    mMediaRecorder.setVideoEncodingBitRate(512 * 1000);
    mMediaRecorder.setVideoFrameRate(30);
    mMediaRecorder.setVideoSize(width, height);
    mMediaRecorder.setOutputFile(filePath);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode != CAST_PERMISSION_CODE) {
        // Where did we get this request from ? -_-
        Log.w(TAG, "Unknown request code: " + requestCode);
        return;
    }
    if (resultCode != RESULT_OK) {
        Toast.makeText(this, "Screen Cast Permission Denied :(", Toast.LENGTH_SHORT).show();
        return;
    }
    mMediaProjection = mProjectionManager.getMediaProjection(resultCode, data);
    // TODO Register a callback that will listen onStop and release & prepare the recorder for next recording
    // mMediaProjection.registerCallback(callback, null);
    mVirtualDisplay = getVirtualDisplay();
    mMediaRecorder.start();
}

private VirtualDisplay getVirtualDisplay() {
    screenDensity = mDisplayMetrics.densityDpi;
    int width = mDisplayMetrics.widthPixels;
    int height = mDisplayMetrics.heightPixels;

    return mMediaProjection.createVirtualDisplay(this.getClass().getSimpleName(),
            width, height, screenDensity,
            DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,
            mMediaRecorder.getSurface(), null /*Callbacks*/, null /*Handler*/);
} 
```

这不是最终代码，而是开始的良好基础:)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-02T19:05:49.023

**编辑**：这个答案被Danpe[下面的答案所取代。](https://stackoverflow.com/a/31005187/1363731)

从您的应用程序中以编程方式录制视频将需要 root 访问权限。您会注意到 Play 商店中可用于执行此操作的应用程序在其应用程序描述中显着地列出了“REQUIRES ROOT”。您还会注意到，这种工作方法可能还存在一些特定的硬件要求（“不适用于 Galaxy Nexus 或 Tegra 2/3...”——来自[Screencast Video Recorder](https://play.google.com/store/apps/details?id=com.ms.screencast)应用程序的描述。

我自己从未编写过这段代码，但我已经对所需方法提出了一个非常高级的想法。从这篇[文章](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/gplSduqCmMk)看来，您必须通过“/dev/graphics/fb0”访问帧缓冲区数据。帧缓冲区的访问模式是 660，这意味着您需要 root 访问权限才能访问它。一旦您拥有 root 访问权限，您就可以使用帧缓冲区数据创建屏幕截图（此[项目](http://code.google.com/p/android-fb2png/)可能适用于此任务），然后从这些屏幕截图中创建视频（请参阅 this other SO question on how to [create video from an image sequence](https://stackoverflow.com/questions/10878336/to-create-video-from-image-sequence-on-android)）。

我使用了 Screencast 应用程序，它在三星 Note 上运行良好。我怀疑这是他们采取的基本方法。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-10T09:57:28.907

普通的 Android 应用程序缺乏捕获帧缓冲区的权限（特别是，它们不是 AID_GRAPHICS 组的成员）。这是出于安全原因 - 否则他们可以从软键盘上窥探密码等。因此，一般来说，如果没有某种方法可以解决特权问题，您就无法从 Android 应用程序中捕获屏幕。

您可以通过遍历视图层次结构中的顶部视图并使用 View.draw(Canvas) 将其绘制到位图中或多或少地捕获应用程序当前占用的屏幕区域的快照，但是这不会记录状态栏、软键盘、OpenGL 表面等。

如果您想做得比这更好，您将需要使用外部工具。工具需要 root 或使用 ADB 接口，因为通过 ADB 接口启动的进程具有 AID_GRAPHICS 权限。使用后一种方法，非特权应用程序可以连接到特权服务器进行录制。

工具大致可以分为以下几类：

*   仅限 Root 的帧缓冲记录器应用程序（例如 Screencast）。这些记录直接来自 /dev/graphics/fb0 设备，但仅适用于帧缓冲区可读的设备（例如，不适用于 Tegra 2 Nexus 7）。

*   仅根屏幕捕获记录器应用程序（例如 SCR、Rec 等）。它们通过 SurfaceFlinger 捕获屏幕并在更广泛的设备上工作。

*   非根屏幕捕获记录器应用程序（例如，Recordable、Ascrecorder）。这些要求用户在通过主机 PC 连接时启用 USB 调试并启动守护程序。此后，在设备重新启动之前不需要主机 PC。也可以录制音频。

*   ADB 工具（例如，Android 4.4 上的内置屏幕录像机）。要求您通过 USB 连接并且无法捕获音频。

为了完整起见，还有 USB 工具（例如 Mobizen）通过 USB 流式传输屏幕（受低 USB 带宽限制并且无法录制音频），并且一些设备还可以通过 wifi 传输屏幕，然后可以在单独的设备上捕获.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-22T13:00:14.923

这是一篇很老的帖子，但我希望这对仍在寻找记录安卓设备屏幕的方法的人有所帮助：

从 Android 5.0 开始，有一个新的 API 可用于屏幕录制： [MediaProjection](https://developer.android.com/reference/android/media/projection/package-summary.html) MediaProjection 授予捕获屏幕内容的能力，但不能捕获系统音频。它也不会捕获安全的屏幕内容。

在 Matt Snider 的页面上有一个很好的例子，说明如何使用 API 将屏幕实际记录到 sdcard 上的文件中：[LINK](http://mattsnider.com/video-recording-with-mediaprojectionmanager/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-08-17T05:29:45.973

我创建了一个[库](https://github.com/HBiSoft/HBRecorder)来为你处理这个问题。包括显示可自定义的通知，如果您不想显示通知，可以禁用该通知。

它需要 API 21>

* * *

这是一个关于如何使用它的简单演示：（更多信息可以在图书馆的自述文件中找到）：

首先，在你的声明和初始化它`Activity`：

```
public class MainActivity extends AppCompatActivity implements HBRecorderListener {
    //Declare HBRecorder
    HBRecorder hbRecorder;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);     

        //Init HBRecorder
        hbRecorder = new HBRecorder(this, this);        

} 
```

然后，当您想开始录制时，您可以调用：

```
private void startRecordingScreen() {
    MediaProjectionManager mediaProjectionManager = (MediaProjectionManager) getSystemService(Context.MEDIA_PROJECTION_SERVICE);
    Intent permissionIntent = mediaProjectionManager != null ? mediaProjectionManager.createScreenCaptureIntent() : null;
    startActivityForResult(permissionIntent, SCREEN_RECORD_REQUEST_CODE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == SCREEN_RECORD_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            //It is important to call this before starting the recording
            hbRecorder.onActivityResult(resultCode, data, this);
            //Start screen recording
            hbRecorder.startScreenRecording(data);
        }
    }
} 
```

您可以通过调用停止录制：

```
hbRecorder.stopScreenRecording(); 
```

* * *

`onCompleteListener`让您知道文件的创建时间：

```
@Override
public void HBRecorderOnComplete() {
    //This is called once the file was created
} 
```

我还添加了一堆可以设置的参数，比如改变`AudioBitrate`等`AudioSamplingRate`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-01T17:53:46.460

您可以在 adb 运行时使用 DDMS 来捕获屏幕，并且对帧缓冲区具有权限：

点击此链接了解更多详情：

[http://thetechjournal.com/electronics/android/how-to-capture-screenshots-and-record-video-on-android-device.xhtml](http://thetechjournal.com/electronics/android/how-to-capture-screenshots-and-record-video-on-android-device.xhtml)

还检查这个链接可能会得到一些关于你需要什么的想法：

[http://answers.oreilly.com/topic/951-how-to-capture-video-of-the-screen-on-android/](http://answers.oreilly.com/topic/951-how-to-capture-video-of-the-screen-on-android/)

[http://www.mightypocket.com/2010/09/installing-android-screenshots-screen-capture-screen-cast-for-windows/](http://www.mightypocket.com/2010/09/installing-android-screenshots-screen-capture-screen-cast-for-windows/)

并检查这个项目：

[http://sourceforge.net/projects/ashot/](http://sourceforge.net/projects/ashot/)

希望这有帮助。

# javascript - 优先加载图像的幻灯片放映

> ID：14336347
> 
> 赞同：1
> 
> 时间：2013-01-15T11:04:40.210
> 
> 标签：javascript, jquery, html, performance, page-load-time

我正在寻找一个幻灯片小部件，例如作为一个 jQuery 插件。它应该是什么样子，*示意性*地（虚线矩形是最初不可见的图像，通过箭头按钮导航）：

```
....  ....       +--+  +--+  +--+       ....  ....
.  .  .  .  [<]  |  |  |  |  |  |  [>]  .  .  .  .
....  ....       +--+  +--+  +--+       ....  .... 
```

要求：

*   三个可见图像应尽快加载。

*   没有典型的延迟加载：最初不可见的图像应该在所有可见图像加载后立即自动加载。

理念：快速初始页面加载，优化带宽使用，没有不必要的等待时间。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:33:50.663

您可以在页面加载后将源添加到隐藏图像。

隐藏图片： `<img data-src="/images/image1.jpg">`

页面加载后运行类似：

```
$(function () {
   $('img[data-src]').each(function () {
       var hImg = $(this),
           src = hImg.attr('data-src');

       hImg.attr('src', src);
   });
}); 
```

当然，幻灯片插件应该只包含在这个 document.ready 函数之后。

# map - 包含地图的 GSON 自定义类

> ID：14336348
> 
> 赞同：0
> 
> 时间：2013-01-15T11:04:46.357
> 
> 标签：map, gson

我有一个对象，其中包含一个映射，其中映射中的每个值都是另一个对象，它由一些原语和一个列表组成，如下所示：

```
Class A { 
    String sa;
    Map<B, B> mapOfBs;
}

Class B {
    String sb;
    List<C> listOfCs;
}

Class C {
    String sc;
} 
```

为了讨论，我有一个类实例包含一些信息（可以从下面解析的 json 中描述，不是那么重要......）。当我使用 GSON 序列化此类时，它在服务器端检索如下：

```
{
"sa": "aaaa",
"mapOfBs": {
    "k.l.z.B@405bb400": {
        "sb": "bbb",
        "listOfCs": []
    },
    "k.l.z.B@405bd968": {
         "sb": "bbbb2",
        "listOfCs": []
    }
} 
```

当我尝试反序列化字符串时，这基本上会导致错误。我得到的例外是 " `Expected BEGIN_OBJECT but was STRING`" 指向 B 类的完全限定名称嵌入在字符串中的位置。

我的感觉是 B 类解析出了点问题，因为我不明白为什么会在其中插入完全限定名称。同样对于（Cs）列表，它没有显示，所以我的感觉更加强烈......

任何人都可以在这里提供帮助吗？（提前致谢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:20:59.543

在您的 POJO 中，您已声明`Map`：`Map<B,B> mapOfBs`

你有 JSON ......不是这样的。

```
"mapOfBs": {
    "k.l.z.B@405bb400": {
        "sb": "bbb",
        "listOfCs": []
    },
 ... 
```

`"k.l.z.B@405bb400"`肯定不是 a`B`并且 Gson 告诉你 - 例如“但是是字符串”

您在 JSON 中拥有的是：`Map<String, B> mapOfBs`

**编辑以从下面的评论中添加：**以这种方式序列化您的原因`Map`是 Gson 中用于 a 中的键的默认序列化方法`Map`是调用`toString()`该键。您的 POJO 不会覆盖`toString()`，因此您将获得`Object.toString()`输出。

JSON 本身不支持您尝试执行的操作。如果您查看 JSON 的规范 ( [http://www.json.org/](http://www.json.org/) )，您会发现它由名称/值对组成，其中名称部分是字符串；你不能在左边有一个物体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T08:33:19.647

我不确定这是否仍然有帮助。

你可以试试

```
Gson gson = new GsonBuilder().enableComplexMapKeySerialization().create();
String jsonString = gson.toJson(object)); 
```

# amazon-s3 - 写入 Amazon.S3 上的某个文件位置

> ID：14336354
> 
> 赞同：4
> 
> 时间：2013-01-15T11:05:10.997
> 
> 标签：amazon-s3

有谁知道是否有可能将数据写入位于 Amazon.S3 上的某个文件位置？

例如，我如何将 100 字节的数据块写入 Amazon.S3 上的文件，偏移量为 1000 字节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:23:25.307

不，我认为不下载就无法在 Amazon S3 上就地编辑任何文件。它是一个存储空间，就像您的硬盘一样，您通常必须将文件提取到内存中进行编辑，然后再将其放回（保存）。有很多 API 可以做到这一点。对于 java，您有[AWS-SDK](http://aws.amazon.com/sdkforjava/)。

# sql-server - 如何在存储过程中设置日期时间时区

> ID：14336357
> 
> 赞同：0
> 
> 时间：2013-01-15T11:05:21.803
> 
> 标签：sql-server, tsql, stored-procedures

我有一个带有一堆查询的 SP，这些查询使用 datetime 之类的`Getdate()`。

有没有办法可以在 SP 的开头设置一个全局标志来设置日期时间的时区偏移量？

我需要类似的东西`set dateformat dmy`，但要抵消时区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:29:11.233

没有神奇的全局偏移量变量会改变 SQL Server 为会话报告的时间。如果你仔细想想，你会注意到在过程中声明的变量*永远不会*影响服务器。你需要一些东西，比如说， SET 命令来做到这一点。

我假设应用程序基于 TZ 数据库或等效数据库提供偏移量，并且您只想尽可能轻松地应用它。您可以做的是`getdate()`使用一个新函数进行包装，该函数`localedate()`接受偏移量作为输入并将其应用于`getdate()`with `dateadd()`。

请记住，保存在数据库中的日期没有关联的时区。将它们本地化将是一项更大的任务。

# sql - 将多行合并为一行？

> ID：14336359
> 
> 赞同：1
> 
> 时间：2013-01-15T11:05:33.193
> 
> 标签：sql, oracle, plsql, oracle11g, plsqldeveloper

我有一个阶段表“ `STAGE_TABLE`”，其中包括以下值（列是 varchar2，除了 ids）-

```
+-------------------------------------------------------------------------------------------------------------------------
¦  STAGE_ID ¦ EMP_ID     ¦ ATTR1_OLD_VAL ¦ ATTR1_NEW_VAL ¦ ATTR2_OLD_VAL ¦ ATTR2_NEW_VAL ¦ ATTR3_OLD_VAL ¦ ATTR3_NEW_VAL ¦
¦-----------+------------+---------------+---------------+---------------+---------------+---------------+---------------¦
¦         1 ¦       E001 ¦ xyz           ¦ pqr           ¦ mmm           ¦ nnn           ¦ zzz           ¦ aaa           ¦
¦         2 ¦       E001 ¦               ¦               ¦               ¦               ¦               ¦               ¦
¦         3 ¦       E001 ¦ pqr           ¦ abc           ¦ xxx           ¦ yyy           ¦               ¦               ¦
¦         4 ¦       E002 ¦ aaa           ¦ ccc           ¦ bbb           ¦ ttt           ¦               ¦               ¦
¦         5 ¦       E002 ¦               ¦               ¦               ¦               ¦ fff           ¦ ppp           ¦
¦         6 ¦       E002 ¦               ¦               ¦ kkk           ¦ jjj           ¦               ¦               ¦
+------------------------------------------------------------------------------------------------------------------------- 
```

我想将属于同一员工的上表中的多行合并为一个-

```
+-------------------------------------------------------------------------------------------------------------
¦ EMP_ID     ¦ ATTR1_OLD_VAL ¦ ATTR1_NEW_VAL ¦ ATTR2_OLD_VAL ¦ ATTR2_NEW_VAL ¦ ATTR3_OLD_VAL ¦ ATTR3_NEW_VAL ¦
¦------------+---------------+---------------+---------------+---------------+---------------+---------------¦
¦       E001 ¦ pqr           ¦ abc           ¦ xxx           ¦ yyy           ¦ zzz           ¦ aaa           ¦
¦       E002 ¦ aaa           ¦ ccc           ¦ kkk           ¦ jjj           ¦ fff           ¦ ppp           ¦
+------------------------------------------------------------------------------------------------------------- 
```

我开始了解 MERGE 语句，但不确定它是否会起作用。我是 oracle pl/sql 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:38:47.650

```
CREATE TABLE tmp 
  ( 
     row_id NUMBER, 
     id     NUMBER, 
     t1     VARCHAR2(5), 
     t2     VARCHAR2(5), 
     t3     VARCHAR2(5) 
  ); 

INSERT INTO tmp 
VALUES      (1, 
             1, 
             'a', 
             NULL, 
             'a'); 

INSERT INTO tmp 
VALUES      (2, 
             1, 
             NULL, 
             'b', 
             'b'); 

INSERT INTO tmp 
VALUES      (3, 
             1, 
             'c', 
             NULL, 
             NULL); 

INSERT INTO tmp 
VALUES      (1, 
             2, 
             'a', 
             'a', 
             NULL); 

INSERT INTO tmp 
VALUES      (2, 
             2, 
             NULL, 
             'b', 
             NULL); 
```

所以，我们应该得到： 1,C,B,B 和 2,A,B,NULL：

```
select id_merged, T1,T2,T3 from 
( SELECT id id_merged,
 first_value(T1 IGNORE nulls) over (partition BY id ORDER BY row_id DESC) T1,
 first_value(T2 IGNORE nulls) over (partition BY id ORDER BY row_id DESC) T2,
 first_value(T3 IGNORE nulls) over (partition BY id ORDER BY row_id DESC) T3,
 rank () over (partition by id order by row_id) rn
FROM tmp)
where rn=1 ORDER BY id_merged; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:30:44.953

您可以使用 a`group by emp_id`并使用 选择属性值`keep dense_rank`：

```
select 
  emp_id,
  max(ATTR1_OLD_VAL) keep (dense_rank first order by decode(ATTR1_OLD_VAL,null,1,0), stage_id desc) as ATTR1_OLD_VAL
from STAGE_TABLE
group by emp_id; 
```

`order by decode(ATTR1_OLD_VAL,null,1,0)`将空值放在末尾。从具有非空值的那些中选择最新的带有`stage_id desc`.

我放了一个你应该放其他属性的属性。

# compression - 为什么 Zlib 压缩在字符串与二进制数据上更好？

> ID：14336361
> 
> 赞同：3
> 
> 时间：2013-01-15T11:05:36.907
> 
> 标签：compression, zlib

假设我有一个这样的 .txt 文件：

```
11111111111111Hello and welcome to stackoverflow. stackoverflow will hopefully provide me with answers to answers i do not know. Hello and goodbye.11111111111111 
```

然后我将创建一个二进制形式的等效项（.bin 文件），如下所示：

```
Stream.Write(intBytes, 0, intBytes.Length); // 11111111111111
Stream.Write(junkText, 0, junkText.Length); // Hello and welcome to stackoverflow...
Stream.Write(intBytes, 0, intBytes.Length); // 11111111111111 
```

第一个示例比第二个示例压缩得更好。如果我删除了 11111111111111，它们会压缩到相同的大小。但是拥有 11111 意味着 .txt 版本的压缩效果更好。

```
byte[] intBytes = BitConverter.GetBytes(11111111111111); // This is 8 bytes
byte[] strBytes = UTF8Encoding.UTF8.GetBytes("11111111111111"); // This is 14 bytes 
```

这是使用本机 C++ Zlib 库。

在压缩之前 .bin 文件的大小较小，我期待这一点。

为什么压缩后的 .txt 版本变小了？它似乎比 bin 等效压缩得更好。

bin 文件：未压缩大小：2448 压缩大小：177

txt 文件：未压缩大小：2460 压缩大小：167

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:17:55.733

因此，较大的文件压缩为较小的文件。我可以提供两种解释：

1.  当输入具有低熵时，压缩起作用。尝试压缩 180 字节的随机数据，压缩后的大小会比你最好的测试用例还要大。前置二进制意味着压缩器必须同时处理二进制数据和文本。引入了在文本中根本不出现的新字节值。这会增加文件的熵。
2.  所有压缩都有弱点和强点（完美的“Kolmogorov”压缩除外）。您可能会看到由某些实现细节引起的异常。毕竟差别不大。

# scala - sbt 发布本地：未定义的解析器“本地”

> ID：14336368
> 
> 赞同：13
> 
> 时间：2013-01-15T11:05:47.150
> 
> 标签：scala, sbt, ivy

尝试`publish-local`在 sbt 中时，我得到以下输出：

```
[info] :: delivering :: com.mycompany#util_2.9.1;0.1.0-SNAPSHOT :: 0.1.0-SNAPSHOT :: integration :: Tue Jan 15 11:23:01 CET 2013
[info]  delivering ivy file to /Users/martink/code/my-project/util/target/scala-2.9.1/ivy-0.1.0-SNAPSHOT.xml
[trace] Stack trace suppressed: run last my-util/*:publish-local for the full output.
[error] (my-util/*:publish-local) Undefined resolver 'local' 
```

我怀疑这是因为我的构建文件中的一些设置，因为本地发布适用于新项目。关于如何`publish-local`再次工作的任何想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T11:05:47.150

我们发现问题是由覆盖引起的`external-resolvers`：

```
val myRepo = "my-public" at "http://my-nexus-server/content/groups/public/" 
externalResolvers := Seq(publicRepo) 
```

我们这样做是为了从我们的解析器中排除默认的 Maven 中央存储库。但是，这也*删除*了`publish-local`.

解决方案是重新添加本地解析器：

```
val ivyLocal = Resolver.file("local", file(Path.userHome.absolutePath + "/.ivy2/local"))(Resolver.ivyStylePatterns)
externalResolvers := Seq(ivyLocal, myRepo) 
```

另一种解决方案是不覆盖`externalResolvers`，而只是禁用 Maven 中心。

```
resolvers := Seq(myRepo)
externalResolvers <<= resolvers map { rs =>
  Resolver.withDefaultResolvers(rs, mavenCentral = false)
} 
```

一旦你`publish-local`，Ivy 似乎优先考虑本地快照版本而不是远程快照版本。要让您发布的工件被另一个项目拾取，只需`sbt compile`在该项目中运行（似乎`sbt update`甚至没有必要）。

另请参阅[http://www.scala-sbt.org/release/docs/Detailed-Topics/Library-Management.html](http://www.scala-sbt.org/release/docs/Detailed-Topics/Library-Management.html)

# javascript - JQuery/Javascript - Firefox 在简单任务上崩溃，没有控制台错误

> ID：14336373
> 
> 赞同：0
> 
> 时间：2013-01-15T11:05:55.883
> 
> 标签：javascript, jquery, firefox, crash

Firefox 在执行这个简单的函数时会崩溃，而 Chrome、Safari 和 IE 执行这个函数没有任何问题：

```
jQuery(document).ready(function($) {

    if($('.fside_img').length>0) {
        gundeToggling(0,2000);
    }

});

function gundeToggling(prev,speed) {

    // 1\. Choose a victim
    var victim = Math.floor(Math.random()*7); // number between 1 and 6

    // 2\. Check if allowed or back to 1
    var alpha = $('#dn-a-'+victim);
    var beta = $('#dn-b-'+victim);

    var ctf_val = parseInt($('#ct_fones').val()); // Menge der sichtbaren prims
    var cts_val = parseInt($('#ct_sones').val()); // Menge der sichtbaren secs

    if(alpha.is(':visible') && ctf_val>2 && victim!=prev) {
        alpha.fadeOut(speed);
        beta.fadeIn(speed,function() {
            $('#ct_fones').val(ctf_val-1);
            $('#ct_sones').val(cts_val+1);
            gundeToggling(victim,speed);
        });
    } else if(beta.is(':visible') && cts_val>2 && victim!=prev) {
        beta.fadeOut(speed);
        alpha.fadeIn(speed,function() {
            $('#ct_fones').val(ctf_val+1);
            $('#ct_sones').val(cts_val-1);
            gundeToggling(victim,speed);
        });
    } else {
        gundeToggling(prev,speed);
    }
} 
```

它是一个按随机顺序淡入/淡出 6 个图像的功能。我还尝试递归查找下一个图像，但 Firefox 仍然崩溃。它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:13:10.113

想法：在另一个浏览器中尝试（chrome，即opera，safari）。尝试进行大量调试（放置注释并提醒很多地方，以查看可以运行的位置以及不运行整个 js 的位置）关闭所有其他选项卡。

想法#2：我也遇到了旋转木马的问题，解决方法很简单。禁用Firefox中的所有扩展和插件。（好吧，我只在Firefox中遇到了这个问题，所有其他浏览器仍然可以正常工作......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:58:54.000

您好，感谢您的帮助，setTimeout 的提示对于调试非常有用，因为我可以避免崩溃。

但真正的问题如下：

:visible 选择器在 Firefox 中的工作方式与所有其他浏览器不同。因此 Firefox 中的 jQuery 认为，可见的内容块（丢失的图像）是不可见的，这导致了无限循环，因为脚本允许更多的图像是不可见的。解决方案：缺失图像的替代文本：-P

# c# - 使用 iTextSharp 合并 pdf 文件的内容

> ID：14336374
> 
> 赞同：0
> 
> 时间：2013-01-15T11:06:04.147
> 
> 标签：c#, pdf, itextsharp

是否可以将一个 pdf 文件的内容放置到另一个文件的特定位置（例如，在两个段落之间），并使原始内容自动向下移动，这样它就不会覆盖新的内容？

如果没有，是否至少可以获得pdf页面内容部分的高度？

我有许多带有 AcroForms 的模板，其中一个是包含多个页面的主模板，我需要在特定位置标记并将其他文件插入其中。

我可以使用`PdfWriter`和`PdfTemplate`使用绝对定位来组装输出来做到这一点，但这似乎有点难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:28:01.760

当您在这里提出多个问题时，我将在回答时引用相应的问题。

> 是否可以将一个 pdf 文件的内容放置到另一个文件的特定位置（例如，在两个段落之间），并使原始内容自动向下移动，这样它就不会覆盖新的内容？

PDF**不是**一种可以（轻松）重排的格式。虽然您的问题没有提到重排的最坏情况（这将是在现有段落中插入一些文本，例如句子），但这已经很困难了*。*向下移动段落时，例如，您不希望任何页脚行也向下移动；不幸的是，页脚行没有（必然）标记为页脚行。您可能想要移动属于内容的图像，而不是背景图像；不幸的是，图像没有被标记为前景或背景图像。等等。

本质上：iText 没有用于此类段落插入的便捷方法，任何拥有它们的库都会经常产生不良结果。

> 如果没有，是否至少可以获得pdf页面内容部分的高度？

PDF 页面的*内容部分是什么？*你的意思是排除页眉和页脚吗？如上所述，页眉和页脚没有这样标记，因此不能（可靠地）自动识别。因此，**没有**。还是您的意思是所有页面内容所在的最小矩形？在这种情况下，请查看[iText in Action - 2nd Edition](http://itextpdf.com/book/)第 15 章中的示例[ShowTextMargins](http://itextpdf.com/examples/iia.php?id=280)。此示例查找文本，但您可以通过扩展其中的使用来轻松概括它，使其不仅对 renderText 事件作出反应，而且对 renderImage 作出反应。不过，我担心剪切路径可能会被忽略。`TextMarginFinder`

> 我有许多带有 AcroForms 的模板，其中一个是包含多个页面的主模板，我需要在特定位置标记并将其他文件插入其中。

你提到了 Acroforms。表单元素**不是**PDF 页面内容的一部分，它们作为注释与其关联。注释比页面内容更容易移动，但如果页面内容*和*注释*属于彼此*，则必须同时移动两者。

> 我可以使用 PdfWriter 和 PdfTemplate 来使用绝对定位来组装输出，但这似乎有点难看。

这在什么方面看起来很丑陋？输出丑陋还是产生它的代码？

# javascript - 按下后退按钮时运行功能 - android

> ID：14336375
> 
> 赞同：0
> 
> 时间：2013-01-15T11:06:04.480
> 
> 标签：javascript, android, html, cordova

我想通过按下后退按钮来运行一个功能`Android`

我在 PhoneGap - 2.2.0 中使用：[**BackButtonEvent**](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#backbutton)

我试图通过以下方式做到这一点：

```
document.addEventListener("backbutton",RunBack, false);

function RunBack() {
    alert('RunBack');
} 
```

还：

```
document.addEventListener("backbutton", function (e) {RunBack();}, false); 
```

还：

```
document.addEventListener("backKeyDown", function (e) {RunBack();}, false); 
```

**为什么它不起作用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:08:45.437

尝试使用类似的东西：

```
// This is your app's init method. 
function init() {
    document.addEventListener("deviceready", onDR, false);
} 

function onDR(){
    document.addEventListener("backbutton", backKeyDown, true);
}

function backKeyDown() {
    // do something
} 
```

有关更多详细信息，请参阅此线程：

[在 Android 的 PhoneGap 上捕获返回按键](https://stackoverflow.com/questions/5698990/capturing-back-key-press-on-phonegap-for-android?rq=1)

# php - responseText 有效，但 responseXML 始终为空

> ID：14336381
> 
> 赞同：5
> 
> 时间：2013-01-15T11:06:26.243
> 
> 标签：php, javascript, xml, ajax, google-maps

我已经查看了我可以在这里找到的所有答案，但无法解决这个问题。我很确定我没有错过任何明显的东西。

我正在尝试加载基于纬度的地图标记。问题是当我尝试将 AJAX 响应作为 responseXML 返回时，它始终为空，如果我使用 responseText 它工作正常，但显然下一步不起作用。

这是生成 XML 的 PHP：

```
<?php
header('Content-type: text/xml');
?>    
<?xml version="1.0" encoding="ISO-8859-1"?>
<properties>
    <![CDATA[
<?php 
if ($body != null): 
        foreach ($body as $property): ?>
        <property>
            <lat><?php echo $property -> lat; ?></lat>
            <long><?php echo $property -> long; ?></long>
            <name><?php echo $property -> property_name; ?></name>
            </property>
<?php endforeach;
endif; ?>
    ]]>
</properties> 
```

我可以在 Fiddler 中看到请求成功

> GET /letsgo/index.php/hotmaps/get_properties_ajax/22.270888501350186/22.288560098193066/114.13720860290528/114.19827713775635 HTTP/1.1
> 
> 实体内容类型：text/xml

虽然当我在提琴手的 XML 视图中查看它时它似乎是空的，

这是原始响应

```
HTTP/1.1 200 OK
Date: Tue, 15 Jan 2013 11:04:27 GMT
Server: Apache/2.4.2 (Win32) PHP/5.4.4
X-Powered-By: PHP/5.4.4
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Length: 310
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/xml

<?xml version="1.0" encoding="ISO-8859-1"?>
<properties>
    <![CDATA[
        <property>
            <lat>22.2776</lat>
            <long>114.173</long>
            <name>Kaxo Tower test</name>
            </property>
        <property>
            <lat>22.2803</lat>
            <long>114.16</long>
            <name>Kuno Tower</name>
            </property>
    ]]>
</properties> 
```

这是每次移动地图时调用的创建标记函数

```
// make the ajax request
function loadXMLDoc(downUrl){
    var xmlhttp;
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
      }
    else {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function() {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {

            //var propertiesXml = xmlhttp.responseText; // WORKS FINE!!
            var propertiesXml = xmlhttp.responseXML; // ALWAYS null
            //alert(propertiesXml);     
            var propertiesRows = propertiesXml.getElementsByTagName("property");

            for (var i = 0; i < propertiesRows.length; i++) {           
            var propertiesRow = propertiesRows[i];
            var xmlLat = propertiesRow.getElementsByTagName("lat")[0];
            var xmlLong = propertiesRow.getElementsByTagName("long")[0];
            var propertyLatLong = new google.maps.LatLng(parseFloat(xmlLat.firstChild.data),parseFloat(xmlLat.firstChild.data));            
            // create each marker
            createMarker(propertyLatLong);
            }   

        }
      }
    xmlhttp.open("GET", downUrl, false); // false or true? makes no difference
    xmlhttp.setRequestHeader("Content-type", "text/xml");
    xmlhttp.send(); 
} 
```

这是我用 null 提供 getElementsByTagName 的错误，Chrome 控制台说

> 未捕获的类型错误：无法调用 null 的方法“getElementsByTagName”

这是在我的本地 Apache 上运行的

有什么建议么？

/** 更新 - 工作代码 **/

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=APIKEYHERE&sensor=false">
    </script>

    <script type="text/javascript">  

      // initialise map 
      function initialize() {

      // set starting latlong
      var myLatlng = new google.maps.LatLng(22.2776, 114.173); 

      // set initial map options        
      var mapOptions = {
        center: myLatlng,
        zoom: 13,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };

      // create the map                       
      var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); 

      // listen for changes in map bounds - after map has stopped moving!!      
      google.maps.event.addListener(map,'idle', function () {      
        loadByBounds(map);          
        });                 
      }

      // if the bounds have changed 
      function loadByBounds(map) {  

        var bounds = map.getBounds();       
        var swPoint = bounds.getSouthWest();
        var nePoint = bounds.getNorthEast();

        // specific co ordinates
        var swLat = swPoint.lat();
        var swLng = swPoint.lng();
        var neLat = nePoint.lat();
        var neLng = nePoint.lng();               

        var downUrl = "<?php echo site_url('hotmaps/get_properties_ajax'); ?>/"+swLat+"/"+neLat+"/"+swLng+"/"+neLng;

        // load the 
        loadXMLDoc(downUrl, map); 

        // clear icons outside of bounding box

        //....

        }

        // make the ajax request
        function loadXMLDoc(downUrl, map){
            var xmlhttp;
            if (window.XMLHttpRequest) {
                // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
              }
            else {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function() {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {

                    var propertiesXml = xmlhttp.responseText; // WORKS FINE!!

                    // remove whitespaces from start and end (.trim() doesnt work)
                    propertiesXml = propertiesXml.replace(/^\s+|\s+$/g,'');                 

                    // manually parse to XML DOM object 
                    var parser = new DOMParser();                   
                    var xmlDoc;                 
                       try {
                            xmlDoc = parser.parseFromString (propertiesXml, "text/xml");
                        } catch (e) {
                            alert ("XML parsing error.");
                            return false;
                        };

                    //console.log(xmlDoc);

                    // get each property
                    var propertiesRows = xmlDoc.getElementsByTagName("property");   

                    //alert(console.log(propertiesRows));   
                    for (var i = 0; i < propertiesRows.length; i++) {

                        var propertiesRow = propertiesRows[i];
                        var xmlLat = propertiesRow.getElementsByTagName("lat")[0];
                        var xmlLong = propertiesRow.getElementsByTagName("long")[0];
                        var propertyLatLong = new google.maps.LatLng(parseFloat(xmlLat.firstChild.data),parseFloat(xmlLong.firstChild.data));           
                        // create each marker
                        createMarker(propertyLatLong, map);
                    }
                 }
             }
            xmlhttp.open("GET", downUrl, false);
            xmlhttp.setRequestHeader("Content-type", "text/xml");
            xmlhttp.send(); 
        }   

        // create new markers
        function createMarker(propertyLatLong, map){             
            var dynamicMarker = new google.maps.Marker({

                map:map,
                draggable:false,
                position: propertyLatLong
            });
            debugger;           
        }       
    </script>
  </head>
  <body onload="initialize()">      
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T11:08:39.367

您可以尝试自己解析 XML：

```
var parser = new DOMParser();
var xmlDoc = parser.parseFromString(xmlhttp.responseText, "application/xml"); 
```

像这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:31:38.070

我想知道为什么您希望解析器几乎跳过整个 http 响应正文，似乎没有必要，它不包含任何可能被误解的内容。它甚至是您想要解析的数据，您在示例中无缘无故地隐藏起来。

在这里查看 CDATA 的一些解释：http: [//www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

您可以尝试注释掉此处提到的打开和关闭 CDATA 语句：http: [//de.selfhtml.org/html/xhtml/unterschiede.htm](http://de.selfhtml.org/html/xhtml/unterschiede.htm)

他们还指出，XML 解析器默认采用 UTF-8 编码，如果配置不正确，将拒绝解析，并且不建议通过响应标头覆盖预期类型。

我更喜欢避免像您那样在块语句中打开和关闭 php 块，但我不太了解最新的编码约定，所以我可能错了。

```
<?php

header('Content-type: text/xml');
header ('Cache-Control: no-cache');
header ('Cache-Control: no-store' , false);

$response ='<?xml version="1.0" encoding="UTF-8"?>
<properties>';

if ($body != null): 
    foreach ($body as $property):
        $response .='<property>
            <lat>'.$property->lat.'</lat>
            <long>'.$property->long'.</long>
            <name>'.$property->property_name.'</name>
        </property>';
    endforeach;
endif;

$response .='</properties>';

echo responseText;

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:17:32.063

您的标签位于 CDATA 部分中，因此解析器将它们作为标签忽略。

# rdf - 从 RDF 数据填充 RDFS 本 体

> ID：14336382
> 
> 赞同：2
> 
> 时间：2013-01-15T11:06:33.893
> 
> 标签：rdf, ontology, rdfs

我是本体领域的新手。我的问题是澄清问题，而不是问题。正在处理的信息以 RDF 格式编写。我构建了自己的 RDFS 本​​体，我想从我拥有的 RDF 数据中填充该本体。我怎么能用 Jena 做到这一点？RDF 数据和我的 RDFS 本​​体之间的资源/属性的命名是否需要相同？例子表示赞赏。

此外，RDF 和 RDFS 之间的区别对我来说仍然不是很清楚。我可以将 RDF 视为一种本体，但功能有限（在编码知识方面）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:45:11.047

RDFS 三元组定义属性和类（通过`subClassOf`和`subPropertyOf`三元组）词汇表的含义，而 RDF 三元组只是应用 RDFS 元数据的数据。

例如，我的元数据 (RDFS) 是

```
:Dog rdfs:subClassOf :Mammal 
```

（应该读作“狗是哺乳动物的一个子集，或者每只狗也是哺乳动物”

和数据（RDF）

```
:Fido rdf:type :Dog
:Spike rdf:type :Dog 
```

（应理解为 Fido 和 Spike 是名为“Dog”的集合的元素）

RDFS 元数据定义了类和属性的词汇表，数​​据指的是这些属性类。

关于所有数据的一个很好的阅读是在“工作本体论的语义网”中，而不是理论上的，它确实以全面的方式涵盖了事物。

# version-control - VIsual Studio 2012 与 TFS 2010 从模板创建工作区

> ID：14336390
> 
> 赞同：2
> 
> 时间：2013-01-15T11:07:06.790
> 
> 标签：version-control, tfs, visual-studio-2012

最近升级到 VS2012 我最近不得不连接到 TFS2010 的实例，现在无法从模板创建工作区映射。它曾经可以通过团队资源管理器中的团队成员节点获得，但现在已经消失了。任何人都知道这是否仍然可能？它是一个非常有用的功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:20:40.270

我检查了 tfs 电动工具的 Visual Studio 扩展库问答...

> Ewald Hofman - TFS 产品团队
> 
> 那是正确的行为。团队成员在 TFS 2012 电动工具中重新设计，与 TFS 2010 不兼容。如果您想将其用于 TFS 2010，则需要安装 VS 2010 和 2010 电动工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:08:09.883

它们是 Team Foundation Server Power 工具的一部分。您需要安装[2012](http://www.microsoft.com/en-us/download/details.aspx?id=35775)（或[2012 Update 1](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)）版本才能获得上述功能。

![Visual Studio 2012 中的团队实用程序](../Images/fe03ffe6f35016e7ca4395a7dca058b9.png)

但正如 Ewald 在问答中指出的那样，连接到 TFS2010 时它不起作用。这仅在使用 Visual Studio 2010 和 2010 Power 工具时有效。并排安装 TFS2010 和 2012 powertools 需要一些麻烦，因为您只需要安装一个版本的 Windows Explorer 扩展和 Powershell cmd-let。

* * *

来自[TFS 2012 Update 1 Power Tools 的问答部分](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)：

> 爱德华·托勒纳尔 | 写于 2012 年 12 月 19 日
> 
> 我发现了一些关于这个的讨论，但对我来说并不完全清楚。我已经安装了 VS2012 更新 1 和相应的 Power Tools。
> 
> 当我连接到 TFS2012 时，我看到了团队成员和团队实用程序（在 Web 访问和设置之间）。当我连接到 TFS2010 时，我看不到这个。以前，当我使用 VS2010 时，我可以访问它。
> 
> 这是正确的行为吗？所以这仅在使用 VS2012 和 TFS2012 时可用，而在使用 VS2012 和 TFS2010 时不可用？
> 
> * * *
> 
> Ewald Hofman - TFS 产品团队 | 写于 2013 年 1 月 9 日
> 
> 那是正确的行为。Team Members 在 TFS 2012 电动工具中重新设计，与 TFS 2010 不兼容。如果您想将其用于 TFS 2010，则需要安装 VS 2010 和 2010 电动工具。

# javascript - Jquery UI.Multiselect 无法正常工作

> ID：14336395
> 
> 赞同：2
> 
> 时间：2013-01-15T11:07:34.943
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我正在使用 Jquery ui.multiselect 一切工作正常但是有一个小问题，当我在该页面加载我的编辑项目页面时，我想显示在页面加载时选择的一些项目，我正在做以下事情

```
 <select id="control_1" class="multiselect" >
                    @foreach (var item in Model.Allcategories)
                    {
                        if (Model.Categories.Contains(item))
                        {
                            <option selected="selected">@item.Name</option>
                        }
                        else
                        {
                             <option >@item.Name</option>
                        }
                    }
                </select> 
```

这是我正在使用的 javascript

```
<link href="/Content/css/ui.multiselect.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/jquery.scrollTo-min.js" type="text/javascript"></script>
<script src="/Scripts/ui.multiselect.js" type="text/javascript"></script>
<script type="text/javascript">
  $(function () {
  //   $("#control_1").addClass("multiselect");
     $(".multiselect").multiselect();
     $('.ui-multiselect').removeAttr('style');
 });
</script> 
```

这是填充的 html

```
 <select id="control_1" class="multiselect" >
                            <option selected="selected">DGOCVs.com</option>
                             <option >DGOCV.com</option>
                            <option selected="selected">ZQAHP.com</option>
                            <option selected="selected">IIFSV.com</option>
                             <option >asdf</option>
                             <option >RBKDBs.com</option>
                             <option >NLXIV.com</option>
                             <option >WDBTB.com</option>
                             <option >TTSBB.com</option>
                             <option >DLXMH.com</option>
                             <option >INOCH.com</option>
                             <option >NQFSH.com</option>
                             <option >WIKCN.com</option>
                             <option >BKCTM.com</option>
                             <option >LPKZM.com</option>
                             <option >https://google.com498.com</option>
                            <option selected="selected">mduxf.com</option>
                </select> 
```

你可以看到有四个元素被设置为选择，但我看到这样

![填充版本](../Images/1dd2ceb40a3981f32a261852505f04a6.png)

现在您可以看到应该选择了 4 个项目，但只有一个。

谢谢 ，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:11:39.110

如果你希望你的`<select>`元素首先支持多选，你必须指定它的[multiple](http://www.w3.org/TR/html401/interact/forms.html#adef-multiple)属性：

```
<select id="control_1" class="multiselect" multiple="multiple">
    <!-- ... -->
</select> 
```

# ruby-on-rails - 是否可以通过 curl 为 id 设置一个值？

> ID：14336405
> 
> 赞同：0
> 
> 时间：2013-01-15T11:08:00.193
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, curl

卷曲我自己的应用程序时，通过：

```
curl -i -X HEAD http://www.foo.com 
```

在加载页面的操作中，我有：

```
puts request.session_options 
```

在我看到的日志中：

```
:path=>"/", :domain=>:all, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"dsfiuasfiusioufuioasifaiosudfiouasioufiouas123", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x007fe070b89108>, :id=>nil} 
```

是否可以`:id`通过 curl 设置值？所以它看起来像：

```
:path=>"/", :domain=>:all, :expire_after=>nil, :secure=>false, :httponly=>true, :defer=>false, :renew=>false, :secret=>"dsfiuasfiusioufuioasifaiosudfiouasioufiouas123", :coder=>#<Rack::Session::Cookie::Base64::Marshal:0x007fe070b89108>, :id=>"foobar"} 
```

# sql - TSQL-View：如何将表的行相乘

> ID：14336407
> 
> 赞同：0
> 
> 时间：2013-01-15T11:08:02.427
> 
> 标签：sql, tsql, view

我有一个包含两列的表格，例如三行，如上所示。然后我想在这张桌子上创建一个视图。

此视图应为表格中的每一行显示与该行中所写的行数一样多的行。

我不知道如何解决这个问题，有人举例说明如何使用 TSQL 构建视图？

例子：

![在此处输入图像描述](../Images/fe1ecdca3cc8079408e6fc1d979f021e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:26:01.010

您可以使用递归 CTE 来拆分值，类似于：

```
;WITH CTE AS
(
    SELECT name, value
    FROM YourTable
    UNION ALL 
    SELECT name, value-1
    FROM CTE
    WHERE value-1 >= 1
)
SELECT t.name, t.value
FROM yourtable t
inner join CTE c
  on t.name = c.name
ORDER BY name, value
OPTION(MAXRECURSION 0) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/627db/1)

结果是：

```
|  NAME | VALUE |
-----------------
|  milk |     4 |
|  milk |     4 |
|  milk |     4 |
|  milk |     4 |
| sugar |     2 |
| sugar |     2 |
|   tea |     7 |
|   tea |     7 |
|   tea |     7 |
|   tea |     7 |
|   tea |     7 |
|   tea |     7 |
|   tea |     7 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:22:07.677

您应该将此表与一些具有 1、2、3、4、5、6、.... 数字的字段的表连接起来。例如：

[SQLFiddle 演示](http://sqlfiddle.com/#!6/baf46/14)

```
with t0 as 
( select 1 n
  union all
  select 2 n
  union all 
  select 3 n 
 ),
tCount as
(select ROW_number() over (order by t1.n) rn
from t0,
     t0 as t1,
     t0 as t2,
     t0 as t3,
     t0 as t4
)
select t.* from t
join tCount on t.Number>=tCount.rn
order by name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T11:23:42.067

```
WITH    q(n) AS
        (
        SELECT  1
        UNION ALL
        SELECT  n + 1
        FROM    q
        WHERE   n <
                (
                SELECT  MAX(repeats)
                FROM    mytable
                )
        )
SELECT  t.*
FROM    mytable t
JOIN    q
ON      q.n <= t.repeats 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:27:19.790

请检查

```
;WITH T AS(
    SELECT 
        COl1, Col2, 1 AS NUM 
    FROM TableName

    UNION ALL

    SELECT 
        T1.COl1, T1.Col2, T.NUM+1 AS NUM 
    FROM TableName T1 INNER JOIN T ON T1.Col1=T.Col1
    WHERE T.NUM+1<=T1.Col2
)
SELECT COl1, Col2 FROM T ORDER BY COl1 
```

# git - 如何获取以前的标签名称？

> ID：14336411
> 
> 赞同：11
> 
> 时间：2013-01-15T11:08:09.647
> 
> 标签：git

有一些标签：

```
first
second
third
fourth 
```

我需要在“第二”（第三）之前获取标签。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-15T11:53:12.703

`git describe --abbrev=0 second^`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-26T08:00:13.663

或者在最后两个标签之间

```
git log $(git describe --abbrev=0 --tags $(git describe --abbrev=0)^)...$(git describe --abbrev=0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-17T10:10:09.283

您希望在当前标签之后获得下一个标签的任何排序的替代解决方案：

```
git tag --sort=-creatordate | grep -A 1 second | tail -n 1 
```

1.  `git tag --sort=-creatordate`按创建者日期从最新到最旧打印所有标签：*“第一第二第三第四”*。明智地选择排序选项。
2.  `grep -A 1 second`仅过滤*"second"*和后面的一行，即*"third"*。
3.  `tail -n 1`*从"second third"*打印最后一行，我们终于得到了*"third"*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-15T18:58:35.347

我发现这个问题的公认答案只能从您所在分支的提交历史记录中找到可访问的标签（这对于许多用例来说都很好）。

无论当前的分支历史如何，我都需要事先提交，所以这个解决方案更全面地工作。

```
git for-each-ref --sort=-creatordate --format '%(refname:short)' refs/tags | sed -n '/second/{n;p;}' 
```

# php - 使用 php 将解析的文本转换为 utf-8

> ID：14336412
> 
> 赞同：0
> 
> 时间：2013-01-15T11:08:12.413
> 
> 标签：php, encoding, utf-8, xml-parsing

除了我之前关于[从复杂 xml 解析图像和文本的](https://stackoverflow.com/questions/14299468/how-to-parse-text-and-image-from-complex-xml)问题之外，现在唯一的问题是我没有得到正确的编码。文本是希腊语，`xml`文件有`utf-8`编码。这是解析xml的代码：

```
$xml = simplexml_load_file('myfile.xml');

$descriptions = $xml->xpath('//item/description');

foreach ( $descriptions as $description_node ) {

    $description_dom = new DOMDocument();
    $description_dom->loadHTML( (string)$description_node );

    $description_sxml = simplexml_import_dom( $description_dom );

    $imgs = $description_sxml->xpath('//img');
    $text = $description_sxml->xpath('//div');

    foreach($imgs as $image){

    echo (string)$image['src'];     
       }

    foreach($text as $t){

        echo (string)$t;
       }
    } 
```

如果我`echo $description_node`，文本看起来不错，但在我`$description_dom`使用`simplexml_import_dom`它之后看起来像这样： `ÏÎµ Î¹ÏÎ»Î±Î¼Î¹ÎºÎ­Ï ÎºÎ¿Î¹Î½ÏÏÎ·ÏÎµÏ.`使用`mb_convert_encoding`将其变为： `ÃÂ½ÃÂÃÂ±ÃÂ¹" ÃÂ`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:31:08.127

解决方案：之后`$description_dom = new DOMDocument();`，我放置了这段代码。

```
$description_html = mb_convert_encoding($description_node, 'HTML-ENTITIES', "UTF-8"); 
```

简单地转换`html entities`为`UTF-8`. 代替

```
$description_dom->loadHTML( (string)$description_node ); 
```

现在我加载转换后的 html

```
$description_dom->loadHTML( (string)$description_html ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:16:43.247

将此添加到您希望显示文本的 HTML 页面的头部：

```
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'> 
```

这应该正确呈现字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:23:35.177

不要转换任何东西..只需用正确的声明打印它

```
header("Content-Type: text/plain; charset=utf-8"); 
```

这就是你需要做的。在文件顶部执行此操作。

# c# - HttpClient 和 SOAP (C#)

> ID：14336414
> 
> 赞同：33
> 
> 时间：2013-01-15T11:08:23.930
> 
> 标签：c#, soap, httpclient

我正在尝试使用 HttpClient 类发送 SOAP 消息：

使用 REST 这样做似乎很容易（代码来自[这里](http://debugmode.net/2012/03/07/consuming-asp-net-web-api-service-using-httpclient-part2-of-many/)）：

```
using System;
using System.Net.Http;
using System.Json;

namespace ConsoleApplication39
{
class Program
{
static void Main(string[] args)
{

HttpClient proxy = new HttpClient();
proxy.GetAsync("http://localhost:14892/api/Bloggers").ContinueWith((r) =>
{
HttpResponseMessage response = r.Result;
response.Content.ReadAsAsync<JsonArray>().ContinueWith(
(a)=>
{
foreach(var w in a.Result)
{
Console.WriteLine(w.ValueOrDefault("Name").ToString());
Console.WriteLine(w.ValueOrDefault("Intrest").ToString());
}
});

});

Console.ReadKey(true);

}

}
} 
```

我想用 SOAP 做一些类似的事情。

我有主机（[http://opensearch.addi.dk/2.2/](http://opensearch.addi.dk/2.2/)）和要发布的 SOAP 消息：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://oss.dbc.dk/ns/opensearch">
  <SOAP-ENV:Body>
    <ns1:searchRequest>
      <ns1:query>dc.title=zorro AND dc.type=bog</ns1:query>
      <ns1:agency>100200</ns1:agency>
      <ns1:profile>test</ns1:profile>
      <ns1:start>1</ns1:start>
      <ns1:stepValue>10</ns1:stepValue>
    </ns1:searchRequest>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

...但是如何发送呢？

我承认这是我用过的第一个 SOAP Web 服务，所以我可能不知道我在做什么，但最简单的形式可能是：

```
HttpClient hc = new HttpClient();
hc.BaseAddress = new Uri("http://opensearch.addi.dk/2.2/");

HttpContent content = *... something*

HttpResponseMessage rm = await hc.PostAsync("http://opensearch.addi.dk/2.2/", content); 
```

我假设应该以某种方式通过 HttpContent.Create(..) 之类的 HttpContent 静态方法创建 SOAP 消息，但我无法让它工作......

我知道这是一个愚蠢的问题，但我仍然需要帮助 :) ！

蒂亚...

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-11-20T23:02:04.323

我需要自己做这个，因为我在网上找不到任何答案，这就是我的工作。这使用了一个简单的 SOAP 计算器服务和一个“加”方法，该方法接受两个数字并返回总和。

```
public async Task<int> AddNumbersAsync(Uri uri, int a, int b)
{
    var soapString = this.ConstructSoapRequest(a, b);
    using (var client = new HttpClient())
    {
        client.DefaultRequestHeaders.Add("SOAPAction", "http://CalculatorService/ICalculatorService/Add");
        var content = new StringContent(soapString, Encoding.UTF8, "text/xml");
        using (var response = await client.PostAsync(uri, content))
        {
            var soapResponse = await response.Content.ReadAsStringAsync();
            return this.ParseSoapResponse(soapResponse);
        }
    }
}

private string ConstructSoapRequest(int a, int b)
{
    return String.Format(@"<?xml version=""1.0"" encoding=""utf-8""?>
    <s:Envelope xmlns:s=""http://schemas.xmlsoap.org/soap/envelope/"">
        <s:Body>
            <Add xmlns=""http://CalculatorService/"">
                <a>{0}</a>
                <b>{1}</b>
            </Add>
        </s:Body>
    </s:Envelope>", a, b);
}

private int ParseSoapResponse(string response)
{
    var soap = XDocument.Parse(response);
    XNamespace ns = "http://CalculatorService/";
    var result = soap.Descendants(ns + "AddResponse").First().Element(ns + "AddResult").Value;
    return Int32.Parse(result);
} 
```

# php - PHP 为什么 unset 不能释放内存？

> ID：14336415
> 
> 赞同：4
> 
> 时间：2013-01-15T11:08:24.097
> 
> 标签：php, optimization

我有 php 应用程序应该管理（导出）大量（大量）数据，并且必须在生产中完成......所以我需要尽可能低的内存使用量（主要标准）。

简单说一下App循环导出数据，比如

```
for($fileCounter=0;$fileCounter<=70;$fileCounter++) {
... HERE a lot of (more than 1K lines) huge work, many variables a lot of DB queries from another databases etc ...
} 
```

我不想在这里展示完整的逻辑，因为对其他人来说可能需要很多时间，这不是这里的重点。

要点是，为什么如果我`unset()`在每次迭代期间将所有新创建的变量都不会减少内存使用量？像这样

```
for($fileCounter=0;$fileCounter<=70;$fileCounter++) {
    // optimization purpose
    $vars_at_start = array_keys(get_defined_vars());
    echo memory_get_peak_usage(true) . PHP_EOL;

... huge logic ...

    $vars_at_end = array_diff($vars_at_start, array_keys(get_defined_vars()));
    foreach($vars_at_end as $v) unset($v);
    unset($vars_at_end);
} 
```

以及如何减少内存使用量？如果我需要使用这么多查询、变量等。

PS代码不是我的:)我不想从头重写它，我只是在寻找优化方向。

接下来是没有变量清理内存使用情况（它在每次迭代开始时测量）

```
23592960

Started: 0 - 12:58:26
Ended: 13:00:51
877920256 (difference 854'327'296)

Started: 1 - 13:00:51
Ended: 13:03:39
1559494656 (difference 681'574'400) 
```

和变量清洗

```
23592960

Started: 0 - 12:47:57
Ended: 12:50:20
877920256 (difference 854'327'296)

Started: 1 - 12:50:20
Ended: 12:53:16
1559756800 (difference 681'836'544) 
```

根据我的阅读，PHP 有很多理由泄漏内存......就像这样[https://bugs.php.net/bug.php?id=48781](https://bugs.php.net/bug.php?id=48781)

有一个叫做 valgrind 的工具可以提供帮助，去试试吧：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:13:03.980

尽管 unset() 不会释放 PHP 进程消耗的内存，但它会释放它以供 PHP 脚本本身使用。

因此，如果您在循环中创建 10 次大小为 10M 的变量并在循环结束时取消设置（或重写）它，那么到循环结束时内存消耗应该低至 10M + 所有其他变量.

如果它增长 - 那么，在您不想显示的完整逻辑中的某个地方存在泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:09:53.010

因为 PHP 会自动完成。
当不再使用变量时，PHP 会自行取消设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:35:42.397

```
$vars_at_end = array_diff($vars_at_start, array_keys(get_defined_vars()));
foreach($vars_at_end as $v) unset($v);
unset($vars_at_end); 
```

整个代码块都在处理变量的副本（甚至是副本的副本），因此它会增加大量内存。您所取消的只是 foreach 循环中的副本副本。

您需要取消设置您使用的实际变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:13:59.427

因为`unset`不会释放内存。它只是释放变量。但是，如果该变量指向某种复杂的结构，那么 PHP 的内存管理无法弄清楚如何释放，它不会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T16:01:36.803

变量上的 unset() 将其标记为“垃圾收集”

你试过 __destruct() 吗？

[http://www.php.net/manual/en/language.oop5.decon.php](http://www.php.net/manual/en/language.oop5.decon.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T16:10:47.003

顺便说一句，你的 foreach ... unset 循环什么也不做。PHP 使用基于引用的延迟复制写入系统来优化内存使用。这个 foreach 循环这实际上是一个无操作。存储被释放——即返回给 Zend Engines 内部的 emalloc 分配器（*而不是*操作系统）——或者一旦任何元素的引用计数为零，就可以重用。当你离开一个函数的作用域时，对于局部变量，当你销毁一个类对象时，对于类属性，无论如何都会发生这种情况。克隆变量的浅表副本然后取消设置是没有意义的，因为这只会对引用计数产生 +1 -1 的影响。

如果您挖掘循环中使用的主要变量的代码并取消设置*它们，*那么您将真正减少引用计数并降至 0，然后您将释放存储空间以供重用。然而，正如 troelskyn 所暗示的，现有代码可以通过多种方式为数据元素留下非零引用。经典的方法是，如果您的代码使用引用，那么您可以创建循环引用链，除非循环被显式破坏，否则这些引用链永远不会被回收。即使有一个用于保存结果的全局数组也会占用内存。

抱歉，您的声明：

> 我不想在这里展示完整的逻辑，因为对其他人来说可能需要很多时间，这不是这里的重点。

是错的。在 PHP 中，如果您想了解为什么不将存储返回到内存池中，那么您*必须*查看代码。

# c# - 使用 IComparer 进行排序

> ID：14336416
> 
> 赞同：50
> 
> 时间：2013-01-15T11:08:27.587
> 
> 标签：c#, sorting, icomparer

我正在尝试使用`IComparer`对点列表进行排序。这是 IComparer 类：

```
public class CoordinatesBasedComparer : IComparer
{
    public int Compare(Object q, Object r)
    {
        Point a = (p)q;
        Point b = (p)r;
        if ((a.x == b.x) && (a.y == b.y))
            return 0;
        if ((a.x < b.x) || ((a.x == b.x) && (a.y < b.y)))
            return -1;

        return 1;
    }
} 
```

在客户端代码中，我正在尝试使用此类对点列表 p （类型`List<Point>`）进行排序：

```
CoordinatesBasedComparer c = new CoordinatesBasedComparer();
Points.Sort(c); 
```

代码出错了。显然，它期望`IComparer<Point>`作为排序方法的参数。
我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-15T11:11:00.813

您需要实现强类型接口 ( [MSDN](http://msdn.microsoft.com/en-us/library/234b841s.aspx) )。

```
public class CoordinatesBasedComparer : IComparer<Point>
{
    public int Compare(Point a, Point b)
    {
        if ((a.x == b.x) && (a.y == b.y))
            return 0;
        if ((a.x < b.x) || ((a.x == b.x) && (a.y < b.y)))
            return -1;

        return 1;
    }
} 
```

顺便说一句，我认为您使用了太多大括号，我认为只有在它们对编译器有贡献时才应该使用它们。这是我的版本：

```
if (a.x == b.x && a.y == b.y)
    return 0;
if (a.x < b.x || (a.x == b.x && a.y < b.y))
    return -1; 
```

就像我不喜欢人们使用`return (0)`.

* * *

请注意，如果您以 .Net-3.5+ 应用程序为目标，则可以使用 LINQ，它在排序方面更容易甚至更快。

LINQ 版本可以类似于：

```
var orderedList = Points.OrderBy(point => point.x)
                        .ThenBy(point => point.y)
                        .ToList(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-15T11:11:36.273

```
public class CoordinatesBasedComparer : IComparer, IComparer<Point>
{
    public int Compare(Point a, Point b)
    {
        if ((a.x == b.x) && (a.y == b.y))
            return 0;
        if ((a.x < b.x) || ((a.x == b.x) && (a.y < b.y)))
            return -1;

        return 1;
    }
    int IComparer.Compare(Object q, Object r)
    {
        return Compare((Point)q, (Point)r);            
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-07-19T22:03:09.660

如果你像我一样慢，在使用`IComparer`. 考虑它的方法是什么时候`x`应该先去，返回-1。什么时候`y`应该先去，返回1。

如果您有很多字段要排序，它仍然会让人感到困惑。您可以使用 an`Enum`使您的比较逻辑比 1 和 -1 更具可读性，然后转换结果。

此示例将具有最少空字段的对象放在前面。

```
public class NullishObjectsToTheBackOfTheLine: IComparer<ClassToCompare>
{
    private enum Xy
    {
        X = -1,
        Both = 0,
        Y = 1
    };

    //the IComparer implementation wraps your readable code in an int cast.
    public int Compare(ClassToCompare x, ClassToCompare y)
    {
        return (int) CompareXy(x, y);
    }

    private static Xy CompareXy(ClassToCompare x, ClassToCompare y)
    {
        if (x == null && y == null) return Xy.Both;

        //put any nulls at the end of the list
        if (x == null) return Xy.Y;
        if (y == null) return Xy.X;

        if (x.Country == y.Country && x.ProductId == y.ProductId) return Xy.Both;

        //put the least amount of at the front
        if (x.ProductId == null && x.Country == null) return Xy.Y;
        if (y.ProductId == null && y.Country == null) return Xy.X;

        //put the country values that are not nulls in front
        if (x.Country != y.Country) return x.Country != null ? Xy.X :  Xy.Y;

        //if we got this far, one of these has a null product id and the other doesn't
        return x.ProductId != null ? Xy.X : Xy.Y;
    }

}

public class ClassToCompare
{
    public string Country { get; set; }
    public string ProductId { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-10T12:09:50.433

在`InvalidOperation`将类型对象添加`MyClass`到`SortedList<MyClass>`. 我错误地实现了 IComparer 接口。我需要实现的是 IComparable 与方法 CompareTo(MyClass other)，而不是 ICompare.Compare(MyClass x, MyClass y)。这是一个简化的例子：

```
SortedList<MyClass> sortedList = new SortedList<MyClass>();
MyClass a=new MyClass(), b=new MyClass();
sortedList.Add(a);
sortedList.Add(b); // Note, sort only happens once second element is added 
```

**这修复了它**：

```
public class MyClass : IComparable<MyClass>
{
    int IComparable<MyClass>.CompareTo(MyClass other)
    {
        // DoCompareFunction(this, other); and return -1,0,1
    }
} 
```

**这被打破了（如果添加到 ，请不要这样做`SortedList<MyClass>`）**：

```
public class MyClass : IComparer<MyClass>
{
    int IComparable<MyClass>.Compare(MyClass x, MyClass y)
    {
        // DoCompareFunction(x, y); and return -1,0,1
    }
} 
```

**这是错误：**

> 无法比较数组中的两个元素。
> 在 System.Collections.Generic.ArraySortHelper`1.BinarySearch(T[] 数组，Int32 索引，Int32 长度，T 值，IComparer`1 比较器)
> 在 System.Array.BinarySearch[T](T[] 数组，Int32 索引， Int32 长度，T 值，IComparer`1 比较器）
> 在 System.Collections.Generic.SortedList`2.Add（TKey 键，TValue 值）

# javascript - Javascript从表格单元格中按id获取元素不起作用

> ID：14336419
> 
> 赞同：0
> 
> 时间：2013-01-15T11:08:37.573
> 
> 标签：javascript, html-table, getelementbyid

我有一个 HTML 表格。在此表中，我在最后一列中有链接（id="delete_row"）。我正在尝试提取每个链接，但它不起作用。我看过一些关于它的帖子，并了解到这可能是拼写问题，但我检查了所有内容两次，仍然无法正常运行。这是我的代码：

```
var tbl = document.getElementById('my_table'); 
for (var i = 0 ;i<tbl.rows.length-1; i++) { // for each row
        row = tbl.rows[i];
        row.getElementById('delete_row').className="other_classname";
} 
```

但是，此代码返回错误：

> 未捕获的类型错误：对象 #<HTMLTableRowElement> 没有方法“getElementById”

任何想法可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:34:07.620

根据您的评论，要访问每行中的最后一个单元格，请替换：

```
row.getElementById('delete_row').className="other_classname"; 
```

和：

```
var len = document.getElementById("my_table").rows[i].cells.length;
document.getElementById("my_table").rows[i].cells[len - 1].className="other_classname"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:29:01.077

我认为整个 HTML 的 ID 必须是唯一的。您多次使用 ID，这可能是问题所在。因此，如果您使用该`class`代替`ID`和功能`getElementsByClassName`代替`getElementByID`，它可能会解决您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-24T12:23:44.163

The [getElementById](https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById) method is unique to the document root. No other element has this method. Therefore, you see the error:

> Uncaught TypeError: Object # has no method 'getElementById'

The simplest way to solve this would be to use [querySelector](https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector).

```
row.querySelector('#delete_row').className="other_classname" 
```

That said, `querySelector` on nodes with lots of children can have performance implication. If that is the case you could assign a unique id to the element and actually use `document.getElementById` which has constant lookup speed. For smaller node trees it is perfectly fine to use it though.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-09T06:14:20.537

您需要为您的 id 使用类结构。假设您将使用按钮添加行并使用 X 链接删除它们，就像您的一样。

```
<input type="button" value="add" id="btnAddRow">

<table id="customFields" align="center" cellspacing="0" cellpadding="0" border="0">
    <tr class="HeaderRow"><td colspan="7"></td></tr>
</table> 
```

这是处理添加和删除过程的 javascript 代码：

```
$("#btnAddRow").click(function () {
        counter += 1;
        $("#customFields").show();
        $("#customFields").append('<tr valign="top"><td> ' + counter + '</td>' + '<td>' + '<a href="javascript:void(0);" class="removeRow">Delete</a></td></tr>');
    });

    $("#customFields").on('click', '.removeRow', function () {
        var rowId = $(this).parent().parent().index() - 1;
        $(this).parent().parent().remove();

        if ($('#customFields tr').length == 2) {
            $("#customFields").hide();
        }
    }); 
```

如您所见，动态过程将对您更有用。

# c# - 为在线 IIS 服务器创建 SSL 证书

> ID：14336428
> 
> 赞同：0
> 
> 时间：2013-01-15T11:08:53.297
> 
> 标签：c#, asp.net, facebook, iis-7

我已将家用计算机配置为运行公共 IIS 服务器，但在创建 SSL 证书时遇到问题，我可以使用该证书在 Facebook 画布上允许托管的 ASP .NET 应用程序。有没有人在这里做过类似的事情？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:14:26.693

我几乎可以肯定您需要一个“真正的”SSL 证书，它是从认证机构购买和颁发的。自签名证书将不起作用，因为它们不受信任。

# c++ - 移动和编辑时区分项目上的 Qt itemChange 信号

> ID：14336431
> 
> 赞同：0
> 
> 时间：2013-01-15T11:09:00.990
> 
> 标签：c++, qt, drag-and-drop, signals-slots

我有 QTreeView 和 QStandatdItemModel。我有连接到 itemChanged 信号的插槽，我在其中处理新的项目数据。然后我激活了拖放功能，发现在修剪项目时我也收到了 itemChanged 信号。但签名只是*QStandardItem* *，所以我不能说发生了什么 - 项目数据是否已更改或只是移动，但我需要知道这一点。如何区分项目是否更改或移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:50:23.967

请改用[`dataChanged`](http://doc.qt.digia.com/qt/qabstractitemmodel.html#dataChanged)信号。

```
This signal is emitted whenever the data in an existing item changes. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:08:03.117

评论副本：
检查[其他信号](http://doc.qt.digia.com/qt/qabstractitemmodel.html#signals)（记录在父类中）有很多可能性（数据更改，移动行/列）。

# django - Heroku Solr Django

> ID：14336433
> 
> 赞同：0
> 
> 时间：2013-01-15T11:09:09.613
> 
> 标签：django, heroku, solr

我正在准备一个应用程序，由于各种原因我们想迁移到 Heroku，并考虑使用 Solr 作为搜索引擎。

我添加了插件，创建了 schema.xml，将其保存到我们的 Solr 实例中。运行rebuild_index 时会出现一些错误。

```
Removing all documents from your index because you said so.
All documents removed.
Indexing 609 projects.
Failed to add documents to Solr: [Reason: ERROR: [doc=project.project.1] unknown field 'description']
Indexing 17 start ups.
Failed to add documents to Solr: [Reason: ERROR: [doc=equity.startup.5] unknown field 'description'] 
```

创建初始 schema.xml 文件时，我注意到它创建了一些我认为不应该出现的空字段，更改了它们，但仍然运行索引失败。

附件是[XML Schema的粘贴](http://pastebin.com/LuEHffEV)

如果有人对为什么会发生这种情况有所了解，我将非常感激，似乎没有很多关于 Solr 的信息以及为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:15:08.317

我设法解决了这个问题。

一个简单的方法是查看示例 XML 文件的 heroku。

而不是运行

```
./manage.py build_solr_schema > schema.xml 
```

在本地，在 Heroku 上运行它，然后简单地将输出复制并粘贴到您的控制台。

```
heroku run python manage.py build_solr_schema 
```

希望这可以帮助

# php - ajax php初学者基本功能

> ID：14336435
> 
> 赞同：1
> 
> 时间：2013-01-15T11:09:14.943
> 
> 标签：php, jquery, ajax

嗨，我不确定从哪里开始，但我只是想学习 ajax 和 php，但不确定我在这里缺少什么。

我希望设置此代码，以便每次单击`.test-ajax`它都会增加一个数字，因为我正在寻找了解它如何与 php 一起使用我希望在 php 文件中发生递增。

这是我的 jQuery

```
$(document).ready(function(){
    $('.test-ajax').live('click', function(event)
    {
        $.ajax({
            url: 'variableplusone.php',
            type: 'post',
            data: { offset: 2 },
            success: function(offset) {
                alert(offset);
            }
        });
    });
}); 
```

还有我的`variableplusone.php`档案...

```
<?php
$x = add_one();

function add_one()
{
    if (isset($_POST['offset']))
    {
        $offset = $offset;
        echo $offset;
    }
}

return $x; 
```

只是想知道如何`$offset`在php文件中获取受影响的值，然后返回并更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:11:25.400

你可以这样做`echo $x;`，然后在成功处理程序中你将把它放在你的`offset`变量中。

或者，如果您坚持使用更复杂的结构，我建议您查看[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)和使用 AJAX 的 JSON 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:14:21.513

```
function add_one() {
    $offset = 0;
    if(isset($_POST['offset'])) {
        $offset = $_POST['offset'];
        $offset++;
    }

    return $offset;
}

$x = add_one();
die("$x"); 
```

显然，您需要检查您的 $_POST['offset'] 是一个数字和其他健全性检查。要将值返回给javascript，就足以回显它，否则就死了。在 javascript 中，您将收到一个值，在您的示例中为 3（您传递 2，PHP 将其加一）。

编辑：要“保留”对数字的更改，您可以选择：您可以使用 javascript 或 cookie 在客户端记住它，或者使用会话变量在服务器端记住它。

```
$(document).ready(function(){
    myVariable = 2;

    $('.test-ajax').live('click', function(event)
    {
        $.ajax({
            url: 'variableplusone.php',
            type: 'post',
            data: { offset: myVariable },
            success: function(offset) {
            alert(offset);
            myVariable = offset;
            }
        });
    });
}); 
```

以上是在客户端上记住它的一种方法。请注意，如果用户刷新页面，则会将其重置为默认值 (2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:17:59.530

您的 return $x 没有意义，并且您的 $x 无论如何都是空的，因为您的函数没有返回值。我认为您希望您的函数返回 $offset ，然后在您的 php 文件中回显您的 $x 。您的 php 文件的输出将在您的 js 中的 offset 变量中 - 所以在您的情况下它是偏移量。

像这样的东西

```
<?php
$x = add_one();

function add_one()
{
    if (isset($_POST['offset']))
    {
        return $_POST['offset']++;
    }
}

echo $x;
?> 
```

# asp.net - 导入excel doc，以正确的格式显示

> ID：14336436
> 
> 赞同：0
> 
> 时间：2013-01-15T11:09:15.230
> 
> 标签：asp.net, excel, import-from-excel

目前只是想提高我的编程能力，所以任何帮助都将不胜感激。

在我的 asp.net 项目中，我使用过 (aspx)

```
<asp:Panel ID="Excel" runat="server">     
</asp:Panel> 
```

(aspx.cs)

```
ExcelFile ef = new ExcelFile();
        string fileName = @"C:\\location of excel doc";
        ef.LoadXlsx(fileName, XlsxOptions.PreserveMakeCopy);

        StringBuilder sb = new StringBuilder();

        foreach (ExcelWorksheet sheet in ef.Worksheets)
        {
            sb.AppendLine();
            sb.AppendFormat("------{0}--------", sheet.Name);

            foreach (ExcelRow row in sheet.Rows)
            {
                sb.AppendLine();
                foreach (ExcelCell cell in row.AllocatedCells)
                {
                    if (cell.Value != null)
                    {
                        Label x = new Label();
                        x.Text = cell.Value.ToString();
                        Excel.Controls.Add(x);

                        sb.AppendFormat("{0}({1})", cell.Value, cell.Value.GetType().Name);
                        sb.Append("\t");
                    }
                }
            }
        }

        Console.WriteLine(sb.ToString()); 
```

这很好用，但它会将 Excel 文件显示为一大块聚集在一起的文本，如果有人能给我提示或在某个地方开始如何在漂亮的表格中显示输出，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:56:57.080

您应该使用 GridView 控件来显示从 Excel 工作表中获取的数据。

# php - Doctrine2 为多对多关系生成两个额外的表

> ID：14336438
> 
> 赞同：8
> 
> 时间：2013-01-15T11:09:20.060
> 
> 标签：php, mysql, symfony, doctrine-orm

# 问题

我正在使用 Symfony2 和 Doctrine2（注释）设置数据库。我完美地遵循了这些示例（[Doctrine2 关系文档](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional)），但不知何故，当我更新我的架构（`doctrine:schema:update --force`）时，它会创建两个额外的表。

我的两个实体是文章和地区，代码如下。

# 代码

## 文章实体：

```
/**
 *
 * @var \Doctrine\Common\Collections\ArrayCollection $districts
 *
 * @ORM\ManyToMany(targetEntity="District", inversedBy="articles")
 * @ORM\JoinTable(name="articles_districts",
 *     joinColumns={@ORM\JoinColumn(name="article_id", referencedColumnName="id")},
 *     inverseJoinColumns={@ORM\JoinColumn(name="district_id", referencedColumnName="id")}
 * )
 */
protected $districts; 
```

## 区实体：

```
/**
 *
 * @var \Doctrine\Common\Collections\ArrayCollection $articles
 * @ORM\ManyToMany(targetEntity="Article", inversedBy="districts")
 */
protected $articles; 
```

# 问题

正在创建的两个额外表是：（`articles_districts`我在 JoinTable 部分中指定的一个）和`article_district`（另一个以某种方式自动创建的）。

该`articles_districts`表按预期工作，并在创建新条目时插入 ID。仍然是空的`article_district`，因此非常无用。我该如何摆脱它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T11:10:52.847

您的地区实体应使用 mappedBy 注释：

```
/**
 *
 * @var \Doctrine\Common\Collections\ArrayCollection $articles
 * @ORM\ManyToMany(targetEntity="Article", mappedBy="districts")
 */
protected $articles; 
```

目前，您正试图在实体关系中拥有两个拥有方：http: [//docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional)

# php - 仅当查询具有多行时才想以形式显示某些内容

> ID：14336440
> 
> 赞同：0
> 
> 时间：2013-01-15T11:09:24.223
> 
> 标签：php, html

我试图根据查询中的行数不显示表单中的某些元素。但问题是它输出了一些 if 语句而不是隐藏表单。

下面是一个 if 语句，如果没有找到行，则显示一条消息：

```
if($sessionnum ==0){
$pHTML = "<span style='color: red'>Sorry, You There No Assessments under this Module</span>";
} 
```

上面很好，但下面是我试图仅在从查询中找到 a 行时才在表单中显示某些内容的问题：

```
$assessmentform = "<div id='lt-container'>
<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
<p id='warnings'>{$pHTML}</p>
{$outputmodule}
if($sessionnum !=0){
<p><strong>Assessments:</strong> {$sessionHTML} </p>   
}
</form>
</div>";

echo $assessmentform; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:12:33.063

如果要隐藏表单，请将条件放在表单上方。

```
if($sessionnum !=0){

$assessmentform = "<div id='lt-container'>
<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
<p id='warnings'>{$pHTML}</p>
{$outputmodule}

<p><strong>Assessments:</strong> {$sessionHTML} </p>   

</form>
</div>";

echo $assessmentform;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:13:11.323

您不能在字符串中写入条件。

```
$assessmentform = "<div id='lt-container'>
    <form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
    <p id='warnings'>{$pHTML}</p>
    {$outputmodule}";

    if($sessionnum !=0){
    $assessmentform = ."<p><strong>Assessments:</strong> {$sessionHTML} </p>";   
    }

    $assessmentform = ."
    </form>
    </div>";
echo $assessmentform; 
```

# ssl - msmdpump.dll 忽略基本身份验证

> ID：14336444
> 
> 赞同：0
> 
> 时间：2013-01-15T11:09:38.467
> 
> 标签：ssl, iis-7, https, ssas, basic-authentication

我有一个网站设置，需要 SSL 和 HTTPS 绑定才能通过 IIS7 连接到我的分析服务。连接有效，尽管无论通过 Excel 解析的凭据如何，它都会在 AS 上作为 IUSR 进行身份验证。任何帮助将不胜感激，这让我发疯。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:52:15.697

应用程序下的 IIS 中是否启用了基本身份验证？您也许可以使用 Fiddler 查看正在传递的内容。

另外，我会检查 Excel 中的 Office 数据连接，看看连接字符串是否可以提供任何线索。

# ios - 基于剩余周数的本地通知日期倒计时

> ID：14336448
> 
> 赞同：0
> 
> 时间：2013-01-15T11:09:52.373
> 
> 标签：ios, objective-c, date, uilocalnotification, uidatepicker

所以我正在我的应用程序中开发一个功能，让用户选择一个日期，比如说 15\. April 以明确表示。然后，当 4 月 18 日还剩 4 周时，会弹出一条本地通知并说：“还剩 4 周！”。4 月 1 日还剩两周时，上面写着：仅剩两周。4 月 8 日还剩一周也是如此，他说：“现在只有一周！”。然后，当距离 4 月 12 日还剩三天时，它会说：“越来越近了，现在只有三天了！”。最后，在 4 月 15 日这一天，说：“今天是你的日子！”。

所以，也许那里的解释有点长，但是，现在你知道问题所在了。有没有人有一个带有简短解释的示例代码让我理解它或其他什么？就像我进一步开发的基本代码一样。或者可能是教程的链接，因为我似乎找不到任何东西。

希望有人有时间回答这个问题，我将非常感激！

最好的问候，Øyvind Larsen Runestad。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:16:29.117

您可以存储`endDate`在`NSDate, and find the difference between`currentDate `and`endDate`。

```
NSDate *currentDate = [NSDate date];
NSDate *endDate = ...;
NSDateComponents *components = [gregorian components:NSMonthCalendarUnit | NSDayCalendarUnit fromDate:startDate  toDate:endDate  options:0];

int months = [comps month];
int days = [comps day]; 
```

在此之后制作 if-else 语句并根据您的条件显示警报或向其他类/对象发送通知。

# javascript - 用于构建单页应用程序的 JavaScript 框架

> ID：14336450
> 
> 赞同：101
> 
> 时间：2013-01-15T11:10:05.290
> 
> 标签：javascript, singlepage

我的目标是将现有的 Web 应用程序迁移到 RESTful[单页应用程序](http://en.wikipedia.org/wiki/Single-page_application)(SPA)。目前，我正在评估几个 Javascript Web 应用程序框架。

* * *

我的要求如下：

*   RESTful 数据层（如 ember-data）
*   MV*-结构
*   动态路线
*   测试支持
*   按约定编码
*   搜索引擎优化支持
*   浏览器历史支持
*   良好的（API-）文档
*   生产就绪
*   生活社区

* * *

### [骨干](http://backbonejs.org)

当前应用程序正在使用`backbone.js`. 总的来说，`backbone.js`这是一个不错的项目，但我缺少明确定义的结构，这些结构确定了必须在哪里发生以及必须如何实施。在一个更大的团队中与不断变化的开发人员一起工作，这会导致某种非结构化代码，难以维护和理解。这就是为什么我现在正在寻找一个已经定义了所有这些东西的框架。

### [余烬](http://emberjs.com)

我调查`ember.js`了最后几天。这种方法对我来说似乎很有希望。但是，不幸的是，代码几乎每天都在变化。所以，我不会称之为生产就绪。而且，不幸的是，我们不能等待它成为 1.0 版。但我真的很喜欢这个框架背后的想法。

### [角](http://angularjs.org)

`Angular.js`也是一个广泛传播的框架，由 Google 维护。但我无法熟悉角度。对我来说，结构似乎有点不清楚，缺少对框架每个部分的总体职责的解释，并且实现感觉很迂回。直截了当地说：这只是我个人的印象，可能是基于缺少的知识。

### [蝙蝠侠](http://batmanjs.org)与[流星](http://meteor.com)

据我了解，这两个框架都需要一个服务器部分。而且由于我们只想要一个 RESTful 后端——无论是什么语言、技术或软件，这都不是我们想要的。此外，后端 API 确实已经存在 (RoR)。

### [淘汰赛](http://knockoutjs.com), [CanJS](http://canjs.us)和[Spine](http://spinejs.com)

我没有深入研究这三个候选人。也许这将是我的下一步。

* * *

所以我现在的问题：

*   我是否缺少任何好的 SPA 框架？
*   你会建议/推荐什么框架？
*   你会避免任何提到的框架吗？
*   您在更大的 SP 应用中有何经验？

* * *

PS：我想推荐一篇[来自](http://blog.stevensanderson.com/2012/08/01/rich-javascript-applications-the-seven-frameworks-throne-of-js-2012/)Steven Anderson（来自 Knockout.js 的核心开发人员）关于“JS 王座”会议（从 2012 年开始）和一般 javascript 框架的精彩博文。

PS：是的，我知道已经有一些关于 SO 的问题。但由于 SPA 的发展如此迅速和迅速，其中大多数已经过时。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-15T13:07:27.860

我最近也不得不决定在一个项目中使用 JavaScript SPA 框架。

*   [余烬](http://emberjs.com/)

    很早就看过 Ember 并且对它有类似的想法 - 我真的很喜欢它，但感觉使用它还为时过早......我读过的大约一半的教程不适用于当前版本，因为最近有一些东西模板的工作方式发生了变化。

*   [骨干](http://backbonejs.org/)

    Backbone 是我们认真研究的第一个框架。我不确定我是否理解您为什么认为它没有“定义明确的结构”？Backbone 非常清楚如何划分模型和视图代码。也许你的意思是没有某种应用程序模板？无论如何，Backbone 似乎真的专注于模型/REST 绑定部分，但并没有真正为视图绑定规定任何内容。如果模型绑定对您很重要并且您正在使用 Rails，那么这样做应该很容易。不幸的是，我的应用程序的 Web 服务并没有真正匹配，我必须为所有内容编写自己的方法`.sync`和`.parse`方法。模型和视图代码的分离很好，但是因为我们必须从头开始编写所有绑定，所以不值得。

*   [昏死](http://knockoutjs.com/)

    淘汰赛就像阴到骨干的阳。Backbone 专注于模型，而 Knockout 是一个 MVVM 框架，专注于视图。它具有`observable`JavaScript 对象属性的包装器，并使用`data-bind`属性将属性绑定到您的 HTML。最后我们选择了 Knockout，因为视图绑定主要是我们的应用程序所需要的。（...加上其他，稍后将讨论...）如果您喜欢 Knockout 的视图绑定和 Backbone 的模型绑定，那么还有结合了这两个框架的[KnockBack 。](http://kmalakoff.github.com/knockback/)

*   [角](http://angularjs.org/)

    在 Knockout 之后查看了这个 - 不幸的是，我们似乎都对 Knockout 如何查看绑定感到非常满意。它似乎比 Knockout 更复杂，更难进入。它使用一堆自定义 HTML 属性来进行绑定，我不确定我是否喜欢……我稍后可能会再看一下 Angular，因为我遇到过很多人非常喜欢这个框架——也许我们只是看这个项目太晚了。

*   [蝙蝠侠](http://batmanjs.org/)，[流星](http://meteor.com/)，[CanJS](http://canjs.us/)，[脊柱](http://spinejs.com/)

    这些都没有仔细看。虽然我知道 Spine 是一个类似于 Backbone 的具有显式控制器对象的框架，并且是用 CoffeeScript 编写的。

*   后记

    正如我所提到的，我们最终使用了 Knockout，因为对于我们的项目，关注视图绑定更为重要。我们最终还使用[RequireJS](http://requirejs.org/)进行模块化，使用[crossroads](http://millermedeiros.github.com/crossroads.js/)和[Hasher](https://github.com/millermedeiros/hasher/)处理路由和历史记录，使用[Jasmine](http://pivotal.github.com/jasmine/)进行测试，以及[JQuery](http://jquery.com/)、[Twitter Bootstrap](http://twitter.github.com/bootstrap/)和[Underscore.js](http://underscorejs.org/)（可能还有更多我现在忘记的库）。

    Javascript 应用程序开发更像是 Java 生态系统，而不是 Rails 生态系统。Rails 为每个应用程序（Rails 框架）提供了一个坚实的核心，并且社区在此基础上提供了许多自定义（gems）。Java 提供了……一种语言。然后您可以选择 Java EE 或 Spring 或 Play 或 Struts 或 Tapestry。并选择 JDBC 或 Hibernate 或 TopLink 或 Ibatis 与数据库通信。然后你可以使用 Ant 或 Maven 或 Gradle 来构建它。*并选择 Tomcat 或 Jetty 或 JBoss 或 WebLogin 来运行它。因此，与选择要使用的*框架相比，选择你需要的东西和协同工作的东西更重要。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-03T20:42:10.213

自从我们开始开发具有众多 SPA 的云服务项目以来已经一年了，所以这是一个重大决定，为我们的 UI 使用哪个 javascript 框架来满足我们的 RESTful 架构需求。经过大量研究，我们最终使用了[Dojo 框架](http://dojotoolkit.org/)。

您会喜欢的主要功能：

1.  受过良好教育的社区和一个提出完美设计模式的团队。伟大的约定和模块化/面向对象的体系结构。具有跨浏览器编程态度:)
2.  MV* 结构。使用外部 .htm 模板构建 UI 小部件，对于生产，将所有 javascript 和模板构建成一个单一的、缩小的小型 .js
3.  使用继承构建类。属性设置器，很多功能工具。
4.  pub/sub 机制（dojo 中的命名主题）
5.  许多 UI 控件，从验证表单控件、对话框/工具提示到功能强大、高度可定制（但轻量级）的图表和数据网格解决方案。
6.  一个名为 DOH 的优秀单元测试系统。它还有一个机器人来重现鼠标/键盘动作。
7.  一个名为 NodeList 的查询工具（如 JQuery），具有所有 jquery 功能，甚至还有很多插件。
8.  以及好的但不那么完整的部分。它有一个 JsonRest 模块可与您的 REST 服务一起使用。它是一个方便的工具，但它缺乏很多功能。

为了克服这些问题，我们开发了 AJAX 轮询器、错误处理和通用、加载和通知解决方案。我们使用 dojo 框架约定和结构非常容易地做到了这一点。如果您不想这样做，也许您必须为此部分使用另一个框架。

查看网络上的优秀 SPA，您会发现所有这些 SPA 都是定制的并使用多个框架。但我们单独使用 Dojo 的体验非常棒。因此我建议您不要考虑任何其他框架，因为它们对于 SPA 来说都是不完整的。但最终你还有另一个选择（我不推荐，也没有详细信息）。通过自动生成 UI 和 javascript，使用能够构建 SPA 的 JAVA 框架。

# jquery - 是否可以使用 jquery 在按钮单击时禁用同一页面上的所有选项卡？

> ID：14336456
> 
> 赞同：0
> 
> 时间：2013-01-15T11:10:32.257
> 
> 标签：jquery

如何使用 jquery 中的按钮 ID 禁用按钮单击时的选项卡？在下面的 PHP 页面中，我使用 bootstarp 创建了 li 标签中声明的四个标签。

```
<form class="form span11">
    <div class="tabbable" id="tab">
        <div class="">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#comments" data-toggle="tab">Comments</a></li>
                <li class=""><a href="#" data-toggle="tab">Activities</a></li>
                <li class=""><a href="#locations" data-toggle="tab">Locations</a></li>
                <li class=""><a href="#pohistory" data-toggle="tab">PO History</a></li>
            </ul>
        </div>
        <div class="tab-content">
            <div class="tab-pane active" id="comments">
                <?php include "views/projects/comments.php"; ?>
            </div>
            <div class="tab-pane " id="locations">
                <?php include "partners_locations.php"; ?>
            </div>
            <div class="tab-pane " id="pohistory">
                <?php include "pohistory.php"; ?>
            </div>
        </div>
    </div>
<button id="set" type="button">submit</button>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:13:48.100

```
$("#set").click(function () {
    $( "#tab" ).tabs({ disabled: true });
}); 
```

# android - 如何从 ListView 启动 MultiChoiceModeListener 的操作模式

> ID：14336457
> 
> 赞同：2
> 
> 时间：2013-01-15T11:10:35.233
> 
> 标签：android, listview, contextual-action-bar

我已经在列表视图中实现了一个带有多项选择的上下文操作栏（CAB）。（类似于[https://stackoverflow.com/a/10598553/940637](https://stackoverflow.com/a/10598553/940637)）。

现在我要实现一个编辑按钮，它需要触发显示的 CAB。无论如何可以做到这一点吗？

我试过 startActionMode （但我需要实现一个单独的回调），这是我不喜欢的。

# javascript - 使用 jQuery 在点击时切换 .html 文本

> ID：14336458
> 
> 赞同：0
> 
> 时间：2013-01-15T11:10:48.563
> 
> 标签：javascript, jquery

我试图在我的网站上建立一个collase expand 功能。

我有以下切换隐藏的 div 只是我试图将“展开”文本更改为折叠，然后如果再次单击，折叠>展开。

任何人都可以看到我做错了什么吗？

```
$('.coverage .expand').click(function(){
    $(this).parent().parent().find('.subitems').toggle('slow', function() {
        var togtit = $(this).parent().find('.expand');
        if((togtit).is('Expand')){
            togtit.html('Collapse')
        } else {
            togtit.html('Expand')
            }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:13:27.193

问题是您[`.is()`](http://api.jquery.com/is/)以错误的方式使用方法。您可以尝试以下方法：

```
$(this).parent().find(".expand").html(function(i, html) {
    return html === "Expand" ? "Collapse" : "Expand";
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:14:07.503

```
if(togtit.html() == 'Expand'){
     togtit.html('Collapse')
} else {
     togtit.html('Expand')
} 
```

以上应该工作。

> 根据选择器、元素或 jQuery 对象检查当前匹配的元素集，如果这些元素中至少有一个与给定参数匹配，则返回 true。

[jQuery.is](http://api.jquery.com/is/)应该用于检查元素是否匹配选择器。它不会测试元素的内部内容。

# iphone - 如何找到对应于 NSString 所需的宽度

> ID：14336459
> 
> 赞同：0
> 
> 时间：2013-01-15T11:10:48.713
> 
> 标签：iphone, ios, cocoa-touch, nsstring, uilabel

这个问题已经问过很多次了，但是我还不清楚，得到了错误的输出。所以请任何人帮助..

```
CGSize maximumSize = CGSizeMake(208, 21);
UIFont *myFont = [UIFont fontWithName:@"Helvetica" size:14];
CGSize myStringSize = [my_string sizeWithFont:myFont
                           constrainedToSize:maximumSize
                               lineBreakMode:self.my_label.lineBreakMode];
my_label.numberOfLines = 0;
my_label.frame.size = myStringSize; 
```

我有一个尺寸为 (208, 21) 的标签，我使用以下代码来获取 NSString 相对于我的标签宽度所需的实际高度，我想要固定宽度，只有高度需要改变，所以我可以在标签中设置。但它总是比实际高度低..我在这里做错什么了吗..

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:13:45.480

在您的示例中，使用具有（非常）大高度的最大尺寸而不是限制高度：

```
CGSize maximumSize = CGSizeMake(208, CGFLOAT_MAX); 
```

这样，总有足够的高度可以扩展，同时将宽度限制为您实际想要的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:19:28.720

试试这个 ：

```
-(CGSize) calculateWidthOfString:(NSString*)textString withFont:(UIFont*)font
    {
        CGSize maximumSize = CGSizeMake(9999, 22);
        CGSize size = [textString sizeWithFont:font
                             constrainedToSize:maximumSize 
                                 lineBreakMode:UILineBreakModeWordWrap];
        return size;
    } 
```

使用 stringObject 和字体名称、大小调用此函数

它返回具有恒定高度“22”的字符串的宽度，根据需要更改此值。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:32:56.233

```
+  (CGSize) calculateLabelHeightWith:(CGFloat)width text:(NSString*)textString
{
    CGSize maximumSize = CGSizeMake(width, 9999);
    CGSize size = [textString sizeWithFont:[UIFont fontWithName:@"Helvetica" size:24]
                         constrainedToSize:maximumSize 
                             lineBreakMode:UILineBreakModeWordWrap];
    return size;
}

+ (CGSize) calculateLabelWidthOfString:(NSString*)textString withFont:(UIFont*)font
{
    CGSize maximumSize = CGSizeMake(9999, 22);
    CGSize size = [textString sizeWithFont:font
                         constrainedToSize:maximumSize 
                             lineBreakMode:UILineBreakModeWordWrap];
    return size;
} 
```

使用这两个作为高度或宽度

# jquery - 如何删除div中的文字？

> ID：14336461
> 
> 赞同：0
> 
> 时间：2013-01-15T11:10:51.990
> 
> 标签：jquery

```
<div id="googlefy">    
<div class="skiptranslate">
    <div>....</div>
    <div id="">
    hello by
    <span style="white-space:nowrap">....<span>
    </div>
</div> 
```

现在我想删除文本 hello by。我该怎么办？

当我使用`$("#googlefy:contains('hello by')").remove()`. 它删除所有的html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:13:46.960

试试这个，它只会删除“hello by”

```
$('#googlefy').html($('#googlefy').html().replace(/hello\sby/, "")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:05:39.697

```
 $(".skiptranslate").find('div:last-child').text().replace('hello by',''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:13:51.267

假设您不想删除特定文本但需要通用解决方案，此代码将删除 div 开头的所有文本：

```
var div = document.getElementById('yourid');
while(div.childNodes[0].nodeType==3)  
   div.removeChild(div.childNodes[0]); 
```

[示范](http://jsbin.com/uheror/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:25:57.533

为了实用，我建议增强文档结构。您可以为要清除的元素添加一个类。

```
<div id="googlefy">    
<div class="skiptranslate">
    <div>....</div>
    <div>
    <span class="clear_this">hello by</span>
    <span style="white-space:nowrap">....<span>
    </div>
</div> 
```

然后您可以使用或保留by 设置删除节点（包括`<span>`标签）`$('.clear_this').remove()``<span>``$('.clear_this').text("")`

另请注意，`id`在 html 中指定时不应为空。

# macos - 内容在 Mac Safari 中不可见

> ID：14336468
> 
> 赞同：0
> 
> 时间：2013-01-15T11:11:27.680
> 
> 标签：macos, safari

我正在处理一个内容未出现在 Macintosh 机器中的项目。我用 Safari 签入了两台 mac 机器，它没有出现在任何地方，在其中一台机器上它与 FF 一起工作，而在另一台机器上却没有。

在这种情况下，你们将如何进行？

该网站可以在以下位置看到： http: [//mfp.kigoobe.fr](http://mfp.kigoobe.fr)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:40:11.180

来自不同论坛的人对此进行了回复，我想分享解决方案。问题是我在网站中使用了在 Safari/Mac 中不可见的自定义字体。

# python - 如何在 mainloop() 之后创建新的 Tkinter 窗口？

> ID：14336472
> 
> 赞同：0
> 
> 时间：2013-01-15T11:11:45.317
> 
> 标签：python, tkinter

我想在我的屏幕上动态创建 Tkinter 窗口。我知道我应该只有一个 mainloop()。我使用线程模块使 mainloop 在单独的线程中执行，因此它不会阻塞脚本。

执行 mainloop 后如何创建更多 Tkinter 窗口？

请看一下我的代码：

```
from Tkinter import *
import threading
import time

class box:
    def __init__(self, pos):
        self.master = Tk()
        self.master.geometry(pos) 
        self.canvas = Canvas(self.master, width=50, height=50, highlightthickness=0 )
        self.canvas.pack()
        self.rect = self.canvas.create_rectangle(0, 0, 50, 50, fill="red", outline="red")
        self.text = self.canvas.create_text(25, 24, text="99",fill="white", font=("calibri", 24, "bold"))

    def changeFill(self, color):
        self.canvas.itemconfig(self.rect, fill=color, outline=color) # change color

class box_manager(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        self.boxes = {}
        self.add_box(1, "50x50+300+300")
        self.add_box(2, "50x50+100+100")
    def add_box(self, num, pos):
        self.boxes[num] = box(pos)
    def run(self):
        mainloop()

tk = box_manager()
tk.start()

# How do I dynamically add new tkinter windows? the line below makes python.exe crash.
tk.add_box(3, "50x50+200+200") 
```

乔尔发表评论后更新，仍然不起作用：

```
from Tkinter import *
import threading
import time

class MyCustomWindow(Toplevel):
    def __init__(self):
        Toplevel.__init__(self)
        #setup goes here
        self.geometry("50x50+100+100") 
        self.canvas = Canvas(self, width=50, height=50, highlightthickness=0 )
        self.canvas.pack()

class App(Tk):

    def CreateFirst(self):
        self.anotherWindow = MyCustomWindow()
    def CreateSecond(self):
        self.secondWindow = MyCustomWindow()

class SecondWindow(threading.Thread):
    #after 2 seconds create a second window, python.exe crashes
    def run(self):
        time.sleep(2)
        tk.CreateSecond()

SecondWindow().start()
tk = App()
tk.CreateFirst()
mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:07:11.470

> 执行 mainloop 后如何创建更多 Tkinter 窗口？

你没有。这不是 Tkinter 设计的工作方式。您应该始终只从主线程调用一次 mainloop。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T12:13:25.047

其他（非根）窗口只是`Toplevel`小部件。您只需 subclass `Toplevel`，并从您的主类中调用它：

```
class MyCustomWindow(tkinter.Toplevel):
    def __init__(self):
        tkinter.Toplevel.__init__(self)
        #setup goes here

class App(tkinter.Tk):

    def someCallback(self):
        self.anotherWindow = MyCustomWindow() 
```

*编辑*

你当然不必*子*类`Toplevel`化，你可以直接使用它。

# file - 以静默模式从 Bat 文件运行设置文件

> ID：14336473
> 
> 赞同：0
> 
> 时间：2013-01-15T11:11:45.077
> 
> 标签：file, batch-file, installation, windows-installer

我有一个安装文件 (MSI)，可以在 win 7 64 位系统上正确运行和安装。我的客户想要静默安装。为此，我创建了一个 bat 文件（见下文）并传递了 /qn 参数，该参数适用于 Windows XP 系统，但在 Win7 64 位上会出现 INVALID SWITCH 错误。有什么解决办法吗？

```
start C:\Setup1\Debug\Setup1.msi /qn
pause
REN "C:\WINDOWS\system32\FHPropertyVideoScreenSaver.exe" "FHPropertyVideoScreenSaver.scr" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:26:46.650

如果您`msiexec /?`在 cmd 提示符下键入，您可以看到您需要的开关是

`/quiet - Quiet mode, no user interaction`

或者你可以使用

`/q`与其他选项一起指定有多少交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:57:00.760

该开关也适用于 Windows 7，也许您有权限问题。检查此线程：[msi 文件未使用 /qn 静默安装](https://stackoverflow.com/questions/14336005/msi-file-isnt-installed-silently-using-qn/14353618#14353618)

# sql - 通过标量函数返回身份

> ID：14336476
> 
> 赞同：0
> 
> 时间：2013-01-15T11:11:56.947
> 
> 标签：sql, sql-server-2008

我有一个 ID 列作为标识的列表。我需要有一个可以在函数调用时插入和返回新插入的标识的函数。我创建了一个函数，但我们不能在 SCALAR 函数中使用 INSERT。还有什么可以解决的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:17:27.207

您可以使用 sql server 的默认函数`Scope_Identity()`来获取新插入的标识字段。有关更多详细信息，请参阅链接 [SCOPE_IDENTITY (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms190315.aspx) 。

```
DECLARE @Identity INT
INSERT INTO TableName (Column1, Column2, )VALUES(@value1, @value2, ...)
SET @Identity=Scope_Identity() 
```

您可以制作与存储过程相同的内容。前任

```
CREATE PROCEDURE USP_ProcedureName
(
    @Input1 INT,
    @Identity INT OUTPUT
)
AS
BEGIN
    INSERT INTO TableName (Col1) VALUES (@Input1)
    SET @Identity=Scope_Identity()
END
GO 
```

`EXEC`可以通过使用命令执行存储过程来检索输出参数。像

```
DECLARE @OutVar INT
EXEC USP_ProcedureName 1, @OutVar OUTPUT
SELECT @OutVar 
```

# jboss - JBoss 7：JNDI 查找

> ID：14336478
> 
> 赞同：6
> 
> 时间：2013-01-15T11:12:08.797
> 
> 标签：jboss, jndi

过了一会儿，我远程访问了在 JBoss 7.1.1 下运行的无状态 EJB。使用属性对象：

```
Properties jndiProps = new Properties();
jndiProps.put(Context.INITIAL_CONTEXT_FACTORY, 
    "org.jboss.naming.remote.client.InitialContextFactory");
jndiProps.put(Context.PROVIDER_URL,"remote://localhost:4447");
jndiProps.put(Context.SECURITY_PRINCIPAL, "remote");
jndiProps.put(Context.SECURITY_CREDENTIALS, "remotepwd");
jndiProps.put("jboss.naming.client.ejb.context", true);
Context ctx = new InitialContext(jndiProps);

String lookupString = "//HelloWorld/HelloWorldBean!org.acme.test.HelloWorld";
HelloWorld hw = (HelloWorld) ctx.lookup(lookupString);
System.out.println("Response: "+ hw.sayHello("Hi there")); 
```

所以**这很好**，但现在我想把 JNDI 东西放到 jndi.properties 文件中但是失败了，这就是文件的样子：

```
java.naming.factory.initial=org.jboss.naming.remote.client.InitialContextFactory
java.naming.factory.url.pkgs=org.jboss.ejb.client.naming
java.naming.provider.url=remote://localhost:4447
java.naming.security.principal=remote
java.naming.security.credentials=remotepwd 
```

例外：

```
Exception in thread "main" java.lang.IllegalStateException: No EJB receiver available for handling [appName:,modulename:HelloWorld,distinctname:] combination for invocation context org.jboss.ejb.client.EJBClientInvocationContext@108c175
at org.jboss.ejb.client.EJBClientContext.requireEJBReceiver(EJBClientContext.java:584)
at org.jboss.ejb.client.ReceiverInterceptor.handleInvocation(ReceiverInterceptor.java:119)
at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181)
at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:136)
at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:121)
at org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104)
at $Proxy0.sayHello(Unknown Source)
at de.brockhaus.test.client.TestClient.main(TestClient.java:35) 
```

我已经经历了几次 doco 但都失败了，那它应该是什么样子呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T13:18:28.340

好的，所以我自己找到了答案......

首先你需要有**两个**属性文件，jndi.properties 加上 jboss-ejb-client.properties。

jndi.properties：

```
#
# jndi.properties
#
java.naming.factory.initial=org.jboss.naming.remote.client.InitialContextFactory
java.naming.factory.url.pkgs=org.jboss.ejb.client.naming
java.naming.provider.url=remote://localhost:4447
java.naming.security.principal=remote
java.naming.security.credentials=remotepwd 
```

jboss-ejb-client.properties：

```
#
# jboss-ejb-client.properties
#
remote.connectionprovider.create.options.org.xnio.Options.SSL_ENABLED=false
remote.connections=default
remote.connection.default.host=localhost
remote.connection.default.port = 4447
remote.connection.default.connect.options.org.xnio.Options.SASL_POLICY_NOANONYMOUS=false 
```

即使没有在代码中指定属性，将它们都放在类路径中也会使代码像魅力一样运行。

仍然令人困惑的是查找字符串的构造......

# c - 将整数值转换为十六进制字符串

> ID：14336484
> 
> 赞同：0
> 
> 时间：2013-01-15T11:13:01.000
> 
> 标签：c, hex

我有一个从函数返回的整数：

```
 int a = func(); 
```

例如，`a = 236`。

我需要将其视为整数的十六进制表示，并将其*十进制*表示存储在另一个变量中，以便在打印时像这样：

```
 printf("%x", variable) 
```

...输出应该是：

```
 236 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:19:38.563

所有值将仅以二进制格式存储。如果要使用格式字符串以十进制形式打印值，`%d`或者如果要以十六进制打印值，则使用`%x`.

同样，我们也可以分配十进制和十六进制格式的值。

```
int a = 236;
int b = 0x236;
printf("%d", a); //it will print 236
printf("%x", a); //it will print EC
printf("%d", b); //it will print 566
printf("%x", b); //it will print 236 
```

我们也可以使用`%o`格式字符串以八进制形式打印存储的二进制值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:25:51.670

如果我明白你需要什么，这个小代码片段就可以了

```
#include <stdio.h>

int main()
{
    char num[128];
    int a=236;
    int hex;

    sprintf(num, "0x%d", a);

    sscanf(num, "%x", &hex);

    printf("Hex: %x\n", hex);
} 
```

输出是

```
Hex: 236 
```

# jquery - JQuery 表单插件 - 将对象传递给成功函数

> ID：14336486
> 
> 赞同：1
> 
> 时间：2013-01-15T11:13:01.617
> 
> 标签：jquery, ajax, jquery-forms-plugin

我正在使用 JQuery Form 插件通过 Ajax 发送表单。我将来自不同地方的代码拼凑在一起，一切都很完美，除了一件事。

在`success`来自 PHP 处理文件的数据被输出到一个`<div>`（即“消息发送”响应）。`<div>`当前在函数中设置的 ID 。我想要做的是能够在函数之外设置该 ID，以便它更容易重用，但我无法终生弄清楚如何将该 ID 传递到函数中。因为：

1.  我不能在该`success:`部分中设置任何参数，我只能命名该函数。

2.  我似乎无法以任何其他方式传递参数，即我无法向成功函数添加额外的参数，即在其他地方`writeOutput(data,divID)`定义`divID`。

以下是相关代码：

```
$(formOne).ajaxForm({
    beforeSubmit: function() {
        return $(formOne).validate({
            // validation rules
        }).form();
    },
    beforeSend: function() {
        // beforeSend actions
    },
    success: writeOutput
});

function writeOutput(data) {

    var $out = $('#output');

    if (typeof data == 'object' && data.nodeType)
        data = elementToString(data.documentElement, true);
    else if (typeof data == 'object')
        data = objToString(data);

    $out.append('<div>'+ data +'</div>');
} 
```

那么如何在`writeOutput()`函数之外定义 ID（当前为 #output）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:36:00.773

不确定这是否有效，而不是直接的答案，

对于“我无法在成功：部分设置任何参数”，您可以执行以下操作：

```
$(formOne).ajaxForm({
    beforeSubmit: function() {
        return $(formOne).validate({
            // validation rules
        }).form();
    },
    beforeSend: function() {
        // beforeSend actions
    },    
    success: writeOutput,
    context: { extra_arg: 'some_value' }
});

function writeOutput(data) {
    var extra_var_val = this.extra_var; //the extra argument
    var $out = $('#output');

    if (typeof data == 'object' && data.nodeType)
        data = elementToString(data.documentElement, true);
    else if (typeof data == 'object')
        data = objToString(data);

    $out.append('<div>'+ data +'</div>');
} 
```

传入“上下文”的任何内容都将成为回调函数的上下文。希望它有效。

# android - 一个android应用程序如何不打扰另一个应用程序

> ID：14336488
> 
> 赞同：0
> 
> 时间：2013-01-15T11:13:09.117
> 
> 标签：android, memory-management, operating-system

我对安卓很陌生。我对android中的操作系统操作有疑问。

在 Symbian OS 中，当应用程序崩溃时，设备将关闭并自行打开。

在 android 中`when an application gets crashed it does not disturbs the other one`，这是如何发生的，任何人都可以对此进行解释并建议我一个教程来学习 android 的基础知识.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:26:50.233

从[应用基础](http://developer.android.com/guide/components/fundamentals.html)

> 一旦安装在设备上，每个 Android 应用程序都存在于自己的安全沙箱中：
> 
> *   Android 操作系统是一个多用户 Linux 系统，其中每个应用程序都是不同的用户。
>     
>     
> *   默认情况下，系统会为每个应用程序分配一个唯一的 Linux 用户 ID（该 ID 仅供系统使用，应用程序不知道该 ID）。系统为应用程序中的所有文件设置权限，以便只有分配给该应用程序的用户 ID 可以访问它们。
>     
>     
> *   每个进程都有自己的虚拟机 (VM)，因此应用程序的代码与其他应用程序隔离运行。
>     
>     
> *   默认情况下，每个应用程序都在自己的 Linux 进程中运行。当应用程序的任何组件需要执行时，Android 会启动该进程，然后在不再需要该进程或系统必须为其他应用程序恢复内存时关闭该进程。
>     
>     
> 
> 这样，Android系统就实现了最小权限原则。也就是说，默认情况下，每个应用程序只能访问其工作所需的组件，而不能访问更多组件。这创建了一个非常安全的环境，在该环境中应用程序无法访问未获得许可的系统部分。

总结一下：

每个应用程序都是它自己的用户，拥有自己的 ID 和权限，并且在与其他应用程序隔离的自己的 VM 中运行。

因此，如果一个应用程序崩溃，其他应用程序不需要知道或关心这个事件，因为它们在自己完全不同的虚拟化上下文中运行，并且崩溃的应用程序不会影响它们（除非它们共享一些资源，例如由开发人员技能和系统级异常处理的结合）。

这就是在 Android 中维护应用程序分离的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:20:16.767

Android OS 正在为每个应用程序启动一个新的 dalvik 机器实例。Dalvik 是*一种*适用于 android 的 JVM。

当应用程序运行时，它会在它自己的 dalvik 实例中运行。

同时，android OS 也在持续监视“dalvik machine”的所有实例。每当其中一个没有响应（在 5 或 10 秒内）时，Android 操作系统就会终止“dalvik 实例”并且应用程序崩溃，但其他正在运行的应用程序都不会受到影响，因为它们在其他 dalvik 实例中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:21:47.927

Android 在自己的 dalvik VM 中运行每个应用程序，并采用非常严格的方法进行进程间通信。因此，如果一个应用程序崩溃，它不会影响任何其他应用程序，除非您自己引入依赖项（例如依赖于某个后台应用程序的应用程序）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:22:29.623

Android 在 Linux 上运行；现代 POSIX 兼容的操作系统。

我认为你能读到的最好的东西是[来自 Wikipedia 的 Process management](http://en.wikipedia.org/wiki/Process_management_%28computing%29)。

# python - 在python中解析xml子节点

> ID：14336492
> 
> 赞同：0
> 
> 时间：2013-01-15T11:13:17.113
> 
> 标签：python, xml

我有这个 xml 文件：

```
 <ItemArray>
    <Item>
      <GiftIcon>0</GiftIcon>
      <HitCounter>NoHitCounter</HitCounter>
      <Quantity>1</Quantity>
      <TimeLeft>P9DT17H35M6S</TimeLeft>
      <Title>Table</Title>
    </Item>
    <Item>
      <GiftIcon>0</GiftIcon>
      <HitCounter>NoHitCounter</HitCounter>
      <Quantity>1</Quantity>
      <TimeLeft>PT0S</TimeLeft>
      <Title>Chair</Title>
    </Item>
  </ItemArray> 
```

如果“TimeLeft”不是“PT0S”，我想返回“Title”：

到目前为止，我得到了这个：

```
itemList = response.getElementsByTagName('Item')
children = itemList[0].childNodes
for child in children :
  if child.tagName == "TimeLeft":
    if child.childNodes[0].nodeValue == "PT0S": 
       print "ping" 
```

但我不知道如何从那里返回“Title”值，根据其他子节点是 true 还是 false 返回子节点值的更优雅的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:23:58.847

使用`xpath`：

`doc.xpath('.//item[timeleft/text()!="PT0S"]/title/text()'`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:22:30.350

您可以使用 Python 的 ElementTree API 和简单的列表理解：

```
import xml.etree.ElementTree as ET

tree = ET.parse('your_xml_file.xml')
root = tree.getroot()

titles = [item.find('Title').text for item in root.findall('Item') if item.find('TimeLeft').text != 'PT0S'] 
```

`titles`将`TimeLeft`是不是的项目的标题列表`PT0S`。在我看来，这比基于 XPath 的解决方案（如果您不熟悉 XPath）更容易阅读。

# c# - 如何使用 c# 获取月末日期？

> ID：14336493
> 
> 赞同：-2
> 
> 时间：2013-01-15T11:13:18.187
> 
> 标签：c#, .net, date

我有一张表格，上面有一些资产（产品）的每日价格，有些日子不见了。我想获得月末价格以计算每年的价格波动。价格波动被定义为月末价格的标准差。

如果缺少月底日期，例如 2010 年 12 月 31 日，算法必须向后搜索产品的日期并使用最近的日期作为月底日期。

有没有一种简单的方法可以用 c# 实现这个逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T13:56:03.293

好的 - 如果你想要月底...

```
DateTime theDate = DateTime.Now; // start with any date....
DateTime endOfMonth = new DateTime(theDate.Year, theDate.Month + 1, 1).AddDays(-1); 
```

然后在你的 Linq 中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:25:58.547

您需要的可能是带有目标日期和源日期的日期采样（或日期算法）。

请参阅按日期过滤和采样表 [http://finaquant.com/filtering-and-sampling-tables-by-dates/2606](http://finaquant.com/filtering-and-sampling-tables-by-dates/2606)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:26:29.757

这不应该太复杂。

假设您有一个`PriceData`实例列表，其中`PriceData`包括：

```
class PriceData
{
    public DateTime Date { get; set; }
    public double Price { get; set; }
}

List<PriceData> prices = ...

var lastPricePerMonth = prices.GroupBy(x => x.Date.Year * 12 + y.Date.Month)
                              .Select(x => x.OrderByDescending(y => y.Date)
                                            .First()); 
```

`PriceData`这将返回每个月的最新对象。

# clearcase - clearcase 查询结果到 winmerge

> ID：14336495
> 
> 赞同：1
> 
> 时间：2013-01-15T11:13:35.260
> 
> 标签：clearcase, winmerge

我可以通过在命令行上使用类似以下命令触发比较来比较 Winmerge 中的两个文件：

```
WinMergeU C:\file1.txt C:\file2.txt 
```

我可以使用类似于以下内容的 clearcase 查询以 clearcase 形式查询具有特定属性的文件列表：

```
Y:\VOB_A>cleartool find . -type l -exec "cleartool describe -fmt "%n %[slink_text]Tp\n\n\" \"%CLEARCASE_PN%\""

.\Directory\createsymlink.txt -->..\..\VOB_B\SymlinkFolder\createsymlink.txt 
```

我想要的是生成一组 clearcase 查询结果，然后可以将其用作 winmerge 的输入（即在签入时生成一堆差异命令，以满足用户或日期等特定条件）。

**如何编写 clearcase 查询以获取文件元素列表（可在 clearcase 中引用，即 winmerge 可以在动态视图上打开版本的路径），并获取它们相应的文件先前版本？**

我想将其格式化为 winmerge 的位看起来有点像这样：

```
... describe -fmt "WinMergeU ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:47:28.440

一，您需要为每个文件生成正确的[完整扩展路径名](https://stackoverflow.com/questions/987427/why-cant-perl-find-my-file-that-is-in-clearcase/988904#988904)（一个是查询的结果，一个是所述查询找到的文件的先前版本）

第二，您需要在动态视图中执行此操作（以便通过文件的扩展路径名访问任何版本。

一旦您的查询为您提供了一个版本，您可以使用`cleartool descr -fmt "%PSn"`（参见[`fmt_ccase`手册页](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)）询问以前的版本并将其添加到您的结果文件中。

尝试一次性完成所有操作（查找 + 先前版本 + WinMerge 调用）似乎太复杂了。

# php - 只会读取 Cookie（赋予其价值）的小型 Javascript 代码？

> ID：14336496
> 
> 赞同：-1
> 
> 时间：2013-01-15T11:13:37.953
> 
> 标签：php, javascript, jquery, html, cookies

要在 javascript 中创建 cookie，我使用

```
document.cookie = "cookieName=cookieValue;expires=myDate;path=/" 
```

阅读 cookie：我在网上阅读了很多文章，包括 w3schools，但它们给出了复杂的代码，`for(;;){}`方法和`split`. 我不需要这样的代码。我只需要一个小的 javascript 代码。

如果有人可以，请给我一个代码，它将显示带有`'cookieName'`cookie 值的警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:22:14.053

这可能是我能给你的最简单的方法。

调用它返回库克值的函数：

```
 /**     
    * Returns cookie.
    * @param {String} sName Main cookie name.
    * @param {String} SubName Sub cookie name.
    * @return {String} Cookie.     
    */

GetCookie: function (sName, SubName) {
        var aCookie = document.cookie.split("; "); // cookies are separated by semicolons
        var CookieVal = null;
        var bHasKeys;
        for (var i = 0; i < aCookie.length; i++) {
            var aCrumb = aCookie[i].split("=");
            bHasKeys = aCrumb.length > 2 ? 1 : 0;
            if (sName == aCrumb[0]) {
                var TempVal = aCookie[i];
                TempVal = TempVal.substring(TempVal.indexOf(sName) + sName.length + 1, TempVal.length);
                if (SubName) {
                    TempArr = TempVal.split("&"); // subcookie seperated by &
                    for (var j = 0; j < TempArr.length; j++) {
                        if (TempArr[j].split("=")[0] == SubName) {
                            CookieVal = TempArr[j].split("=")[1];
                            //while loop is added since /+/g syantax does not work here
                            while (CookieVal.indexOf("+") != -1) CookieVal = CookieVal.replace('+', ' ');
                            CookieVal = unescape(CookieVal);
                            break;
                        }
                    }
                }
                else {
                    if (bHasKeys) CookieVal = TempVal;
                    else {
                        CookieVal = aCrumb[1];
                        //while loop is added since /+/g syantax does not work here
                        while (CookieVal.indexOf("+") != -1) CookieVal = CookieVal.replace('+', ' ');
                        CookieVal = unescape(CookieVal);
                    }
                    break;
                }
            }
        }
        return CookieVal == null ? '' : CookieVal;
    } 
```

# c# - 如何检查字段是否已定义？

> ID：14336501
> 
> 赞同：3
> 
> 时间：2013-01-15T11:13:46.820
> 
> 标签：c#, metadata, dynamics-crm-2011

在[此博客](http://community.dynamics.com/product/crm/crmtechnical/b/mileyja/archive/2011/08/19/retrieve-the-metadata-for-an-attribute-in-microsoft-dynamics-crm-2011-using-net-or-jscript.aspx)中，展示了如何检索字段的元数据。

我想知道如何检查（除了上面结合try-catch-statement）一个字段**是否**存在。

这样做的原因是当我执行我的时*`QueryExpression`*，我需要知道在*`ColumnSet`*.

现在的问答代码是这样的。

```
private bool DoesFieldExist(String entityName, String fieldName)
{
  try
  {
    RetrieveAttributeRequest req = new RetrieveAttributeRequest();
    req.EntityLogicalName = entityName;
    req.LogicalName = fieldName;
    RetrieveAttributeResponse resp = (RetrieveAttributeResponse)service.Execute(req);
  }
  catch (Exception) { return false; }
  return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T16:20:22.193

```
private bool DoesFieldExist(String entityName, String fieldName)
{
  RetrieveEntityRequest request = new RetrieveEntityRequest
  {
    EntityFilters = Microsoft.Xrm.Sdk.Metadata.EntityFilters.Attributes,
    LogicalName = entityName
  };
  RetrieveEntityResponse response 
    = (RetrieveEntityResponse)service.Execute(request);
  return response.EntityMetadata.Attributes.FirstOrDefault(element 
    => element.LogicalName == fieldName) != null;
} 
```

1.  如果您不喜欢我的示例中的显式引用（并且您应该不喜欢它，因为它很难看） `EntityFilters`，您需要添加`using Microsoft.Xrm.Sdk.Metadata;`才能正常工作。

2.  我更喜欢使用`FirstOrDefault`而不是`SingleOrDefault`. 虽然在这种情况下它不会给您带来任何问题（属性**是否**存在），但在其他情况下，如果有多个元素满足条件，您可能会遇到异常（您应该寻找多个属性的匹配项还是执行其他可能导致这种情况的东西）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:28:16.893

另一种可能性是为实体加载 EntityMetadata。

```
var request = new RetrieveEntityRequest
{
    EntityFilters = EntityFilters.Attributes,
    LogicalName = entityName
};

var  response = (RetrieveEntityResponse)_serviceProxy.Execute(request); 
```

出于性能原因，您可以将其缓存在内存或磁盘上。为了检查是否定义了属性，您无法访问 attributes 属性

```
var defined = response.EntityMetadata
                      .Attributes
                      .SingleOrDefault(a => a.LogicalName == fieldName) != null; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-07T10:53:51.357

我知道这对游戏来说有点晚了，但我想为其他想要这样做的人添加一个性能更好的替代方案。

除非您引入某种缓存，否则元数据调用速度非常慢。如果您将元数据调用放入定期执行的插件中，您可能会自找麻烦。（MS 真的需要看看为什么他们的元数据调用如此缓慢并修复它！）。

如果您只想检查一个字段的存在，我会强制异常。诚然，它看起来不太好，一些传道者会对此皱眉，但我发现它的执行速度比元数据调用快 3 倍。这至少将它放在可接受的括号中，以便更定期地执行插件。

这就是我所做的：

```
try
{
    var query = new QueryExpression("account");
    query.Criteria.AddCondition("accountid", ConditionOperator.Equal, "294450db-46c9-447e-a642-3babf913d800");
    query.NoLock = true;
    query.ColumnSet = new ColumnSet("xyz_fieldname");
    service.RetrieveMultiple(query);
}
catch
{
    // ignored
} 
```

使用查询表达式有 2 个优点，您针对作为主键的 id 运行它（您不关心 id，如果该字段不存在，代码将抛出异常，或者返回 1 或成功则无记录）。简而言之，目的不是查找​​记录，而是查看包含列是否强制异常。

查询表达式的第二个优点是您可以使用 nolock 运行它。你真的不关心结果集，重点是强制异常。

我已经在 CRM 在线上运行了几个测试，在对元数据的多个/单个调用与多个/单个检索引发异常的多个调用之间变化（使用 C# 秒表和反转代码顺序等）。异常总是优于元数据。如果您在同一个代码中执行多个调用，它的速度会提高大约 3 倍（我猜优化会起作用）。无论哪种方式，瓶颈是对元数据服务的调用，除非您引入缓存和更高的代码复杂性，否则无法对其进行优化。此外，如果该字段存在，您将不会获得异常，这意味着另一个绩效奖金。

我没有测试过的唯一场景是针对一个大量使用的实体运行它......但是如果您对数据库的访问如此之大以至于 nolock 检索无法在可接受的时间范围内返回，那么您可能需要担心更大的问题！

# azure - 什么是“部署 ID”和“部署唯一名称”

> ID：14336503
> 
> 赞同：7
> 
> 时间：2013-01-15T11:13:47.490
> 
> 标签：azure

我不明白，Azure 云服务的“部署 ID”和“部署唯一名称”是什么。Azure Powershell 工具似乎可以自动生成它们，但它们的目的是什么？如何使用它们？什么时候“部署槽”不够用？在什么意义上部署名称是“唯一的”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:25:53.003

*部署 ID*是 Windows Azure 自动分配的一个数字 (GUID)。您可以使用该标识符来识别诊断日志中的条目。

*部署唯一名称*- 似乎是另一个自动生成的标识符 (GUID)，Windows Azure 服务管理 REST API 使用它来检索有关特定部署等的信息。例如，为了[更改部署配置](http://msdn.microsoft.com/en-us/library/windowsazure/ee460809.aspx)，您可以发送以下 POST 消息（`deployment-name`是唯一名称您的部署）

> `https://management.core.windows.net/<subscription-id>/services/hostedservices/<service-name>/deployments/<deployment-name>/?comp=config`

*部署名称*是您在包部署期间指定的任意名称。通常您可以使用该名称来提供一些额外的软件包信息，例如您的软件版本号，例如`v1.0.0.1`或`WebSite v.1.2.0.1 HOTFIX-3`

# python - 使用 django 模板时出错

> ID：14336507
> 
> 赞同：1
> 
> 时间：2013-01-15T11:13:51.857
> 
> 标签：python, django, import, module, pip

我正在尝试使用 Django 模板，但当我写下以下内容时，我什至认为我已经使用了 pip install：

```
from django.templated_email import send_templated_mail 
```

我收到此错误（我想使用此模板：[https](https://github.com/bradwhittington/django-templated-email) ://github.com/bradwhittington/django-templated-email ）：

```
ImportError at /
No module named templated_email
Request Method: GET
Request URL:    http://127.0.0.1:8000/
Django Version: 1.4
Exception Type: ImportError
Exception Value:    No module named templated_email
Exception Location: /Users/user/folder/MyProyect/proyect/templated_email/send_email.py in <module>, line 26
Python Executable:  /usr/bin/python
Python Version: 2.7.1
Python Path:    ['/Users/user/folder/MyProyect/proyect',
   '/Library/Python/2.7/site-packages/pip-1.0-py2.7.egg',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
   '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
   '/Library/Python/2.7/site-packages',
   '/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg-info']
Server time:    mar, 15 Ene 2013 12:04:27 +0100 
```

如果有人知道如何解决这个问题，请告诉我如何（如果有一个很好的例子）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:16:00.137

`django.`从此行中删除：

```
from django.templated_email import send_templated_mail 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:06:56.227

问题是，在说明中并没有说您需要在 INSTALLED_APPS 'templated_email' 中添加 settings.py

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:31:39.640

你应该像这样导入`from templated_email import send_templated_mail`而不是`from django.templated_email import send_templated_mail`

# ios - 修改 PKAddPassesViewController 标题

> ID：14336515
> 
> 赞同：0
> 
> 时间：2013-01-15T11:14:15.757
> 
> 标签：ios, passbook

> **可能重复：**
> [是否可以更改 PKAddPassesViewController 的标题？](https://stackoverflow.com/questions/13823607/is-it-possible-to-change-the-title-of-pkaddpassesviewcontroller)

你好，当我添加存折时，我使用了优惠券样式：</p>

```
pass = [[PKPass alloc] initWithData:data error:&error];
PKAddPassesViewController *vc = [[PKAddPassesViewController alloc] initWithPass:pass];
[vc setDelegate:(id)self];
[self presentViewController:vc animated:YES completion:nil]; 
```

有`UIBarButtonItem`三个按钮：“取消”，“优惠券”“添加” “优惠券”是默认的，因为我使用了优惠券样式，我想修改它。

我用过`vc.title=@"new Title"`，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:21:07.830

不，不能修改标题文本。

看到这个问题[是否可以更改 PKAddPassesViewController 的标题？](https://stackoverflow.com/questions/13823607/is-it-possible-to-change-the-title-of-pkaddpassesviewcontroller)

# jquery - 使用 jQuery 加载更多（无 AJAX/PHP）

> ID：14336518
> 
> 赞同：0
> 
> 时间：2013-01-15T11:14:21.360
> 
> 标签：jquery, html, css

使用 jQuery（无 AJAX/PHP）伪造负载效果很好，但我想知道的是：有没有办法在 .item onclick 中隐藏 .item 类负载，以便数据不是全部即使隐藏也已加载。所以不是 .hide 它的 .load 什么的。我的知识有限。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:21:51.623

只有两种方法：

1）加载您需要的所有数据，使用CSS隐藏，然后根据要求在交互时显示。

2) 第二种选择是进行 AJAX 调用。

这两种选择都很常见，具体取决于您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:29:03.997

您可以使用 Javascript 和简单的 HTML 来完成。

```
<script language="javascript">
function show(more){if(document.getElementById(more).style.display == 'none'){document.getElementById(more).style.display = 'block';}else{document.getElementById(more).style.display = 'none';}}
</script> 
```

HTML

```
<p>Display Text <br/>
<a onclick="show('more');" title="Read More" href="#">Load More</a>
<div id="more" style="display: none">Hidden Text</div></p> 
```

**演示：http:** [//jsfiddle.net/SJAQh/](http://jsfiddle.net/SJAQh/)

# java - 通过外部属性禁用 spring 方法缓存

> ID：14336520
> 
> 赞同：6
> 
> 时间：2013-01-15T11:14:25.367
> 
> 标签：java, spring, ehcache

我使用 ehcache 和注释驱动配置配置了 spring 方法缓存。

但是，我希望能够从我们在应用程序中使用的配置文件中禁用它。

`net.sf.ehcache.CacheManager.CacheManager()`如果方法缓存被禁用，我的第一个想法是不带参数调用。这会引发异常：

```
java.lang.IllegalArgumentException: loadCaches must not return an empty Collection
at org.springframework.util.Assert.notEmpty(Assert.java:268)
at org.springframework.cache.support.AbstractCacheManager.afterPropertiesSet(AbstractCacheManager.java:49) 
```

我的第二个想法是`net.sf.ehcache.CacheManager.CacheManager()`使用默认数据配置，以便不使用缓存（maxElementsInMemory 0 等）。但是后来缓存还在使用，这不是我想要的。

有一个属性`net.sf.ehcache.disabled`，但我不想禁用也使用 ehcache 的休眠缓存。

`Q`如何将所有内容配置为具有 spring 方法缓存但从我的外部配置文件中禁用它？我不想修改应用程序上下文，也不想修改启用/禁用方法缓存的代码。只能修改我们在应用中使用的配置文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T16:01:25.490

我正在寻找的是`NoOpCacheManager`：

为了使它工作，我从 xml bean 创建切换到工厂

我做了如下的事情：

```
@Bean
public CacheManager cacheManager() {
    final CacheManager cacheManager;        
    if (this.methodCacheManager != null) {
        final EhCacheCacheManager ehCacheCacheManager = new EhCacheCacheManager();
        ehCacheCacheManager.setCacheManager(this.methodCacheManager);
        cacheManager = ehCacheCacheManager;
    } else {
        cacheManager = new NoOpCacheManager();
    }

    return cacheManager;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T13:29:59.633

您可以使用[弹簧配置文件](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)来启用（或不启用）弹簧缓存支持

```
<beans profile="withCache">
   <cache:annotation-driven />
</beans> 
```

# struts2 - com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration 中的 Struts 2.3.8 线程阻塞

> ID：14336524
> 
> 赞同：0
> 
> 时间：2013-01-15T11:14:27.570
> 
> 标签：struts2

我正在使用 Struts 2.3.8 版本在 Tomcat 6 上测试 Web 应用程序。`devMode`设置为`false`。

我在这种方法中发现了很多 BLOCKED 线程：

```
com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration() 
```

这导致应用程序的 CPU 使用率很高。还发现 com.opensymphony.xwork2.config.ConfigurationManager.conditionalRelad 需要时间，这会导致 getconfiguration（同步）排队等待处理。

请让我知道是否有人对此有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:46:31.387

这是 struts 2.3.8 的问题。报告了这个问题并在版本 2.3.9 中得到解决。

[有关更多详细信息，请查看此](https://issues.apache.org/jira/browse/WW-3971)。

# php - 设置一个 php 页面使用 SSL

> ID：14336529
> 
> 赞同：0
> 
> 时间：2013-01-15T11:14:50.280
> 
> 标签：php, https, secure-coding

嗨，我有一个 php 应用程序，我希望 account.php 页面是安全的，但是在将其添加到页面后

```
 $use_sts = true;

    // iis sets HTTPS to 'off' for non-SSL requests
    if ($use_sts && isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] != 'off') {
        header('Strict-Transport-Security: max-age=31536000');
    } elseif ($use_sts) {
        header('Location: https://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'],  true, 301);
        // we are in cleartext at the moment, prevent further execution and output
        die();
    } 
```

但是，当我浏览页面时，它被设置为 HTTPS，但是当我查看源代码时，内容到处都是，它使用 http 显示文件请求：

```
<script type="text/javascript" src="http://****/assets/jquery.js"></script>
<script type="text/javascript" src="http://****/assets/jquery-ui.js"></script>
<script type="text/javascript" src="http://****/assets/tables.js"></script>
<script type="text/javascript" src="http://****/assets/global.js"></script>
<script type="text/javascript" src="http://****/assets/cycle.js"></script> 
```

有没有办法将特定页面设置为使用 SSL

我也用 .htaccess 尝试过，但得到了相同的结果

```
 # force https for
    RewriteCond %{HTTPS} =off
    RewriteRule ^(index|login)\.php$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

谢谢

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:16:39.973

您需要`http:`从绝对 URL 中删除 。这将使浏览器使用页面的当前协议。

```
<script type="text/javascript" src="//cdn.domain.tld/assets/jquery.js"></script> 
```

如果域等于页面的域，您还可以使用没有域的绝对路径：

```
<script type="text/javascript" src="/assets/jquery.js"></script> 
```

# php - 使用 if-else 在 CSV 文件中添加两个表详细信息

> ID：14336531
> 
> 赞同：0
> 
> 时间：2013-01-15T11:14:56.913
> 
> 标签：php, mysql, drupal

我有一个主表 USERS 另一个表 DUES。用户表包含一种类型的所有用户的列表，而 DUES 表仅包含那些已付费用户的详细信息。

我必须在 CSV 文件中列出付费和非付费用户才能下载。

我有一些查询来生成常见或不常见用户的列表，但问题是我必须将它们保持在升序中，我遇到了问题。我不知道如何循环，以便如果每个用户存在于 DUES 表中，则标记为 PAID，如果不存在，则标记为 UNPAID。

我得到的查询像 -

```
$all_user_list = db_query("SELECT u.uid,u.name FROM {users} u INNER JOIN {user_roles) ur ON u.uid=ur.uid WHERE ur.rid = 7 ORDER BY name ASC");

$all_paid_user = db_query("SELECT uid,name FROM {dues} WHERE nid = 2001"); 
```

现在第一个数组有所有应该付费的用户的列表，第二个有所有付费用户的列表。当我将它存储在CSV数组中时，请有人建议我按升序排列它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:18:33.423

请检查这个。这将检查第一个表数据是否存在到第二个表数据中，如果存在则 PAID，如果不存在则 UNPAID。将第二个数组中的用户 ID 存储到名为 $secondarr 的数组中。

```
foreach($firstarr as $user)
{
 if(in_array($user['userid'],$secondarr))
  {
   $user['paid']=1;
  }
  else
  {
   $user['paid']=0;
  }  
}

$firstarr=sort($firstarr);
print_r($firstarr); 
```

# html - 我的网站要求验证年龄？

> ID：14336541
> 
> 赞同：1
> 
> 时间：2013-01-15T11:15:29.660
> 
> 标签：html, mobile, meta, restriction

这是重复的：[这个问题没有任何回答者](https://stackoverflow.com/questions/11971190/why-is-my-site-asking-for-age-verification-on-a-smart-phone-when-there-is-no-age)只是让你知道。

**细节**

所以我的网站是一个有问题的游戏网站。这些问题包含脏话。这不是成人网站。它不应该被列为成人网站 imo。

**问题** 如果您尝试从您的移动网络访问此站点，它将要求验证年龄。有什么方法可以改变您的网站的列出方式吗？

**解决方案？**

是否有可能我可以在网站中添加一些元标记来通知浏览器或运营商这不是成人网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:53:13.713

虽然我尝试找到不同的网络系统来检查网站的状态，但我会根据不同的运营商更新这个答案。

**02** 对于英国网络 02，请参见此处： [http ://urlchecker.o2.co.uk/urlcheck.aspx](http://urlchecker.o2.co.uk/urlcheck.aspx)

# eclipse - 是否可以在代理后面本地托管 Eclipse 插件存储库？

> ID：14336545
> 
> 赞同：1
> 
> 时间：2013-01-15T11:15:52.797
> 
> 标签：eclipse

在 Windows 代理后面使用 Eclipse 会导致下载和更新插件很困难，即使使用 CNTLM 作为代理也是如此。

**是否有可能有类似 Nexus 存储库的东西来在本地网络上托管 Eclipse 插件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:29:34.147

Eclipse 使用[Equinox p2](http://projects.eclipse.org/projects/rt.equinox.p2)存储库来管理可执行文件、配置和依赖关系解析。Equinox p2 描述的是这个[演示文稿](http://www.slideshare.net/irbull/p2-introduction)

直接回答上面的问题，[Jfrog 的 Artifactory Pro](http://wiki.jfrog.org/confluence/display/RTF/P2+Repositories)支持 P2 存储库的代理和缓存。

*重要的是要注意免费版本不支持此功能。*

# php - 一旦验证为新的“process-page.php”，如何处理 PHP 表单

> ID：14336549
> 
> 赞同：0
> 
> 时间：2013-01-15T11:16:01.533
> 
> 标签：php, forms

感谢您抽出时间来阅读....

我的任务是验证 php 表单并在新页面“process-comp.php”中对其进行处理，我可以在 JS 中验证它是否正常，我可以在 PHP 中验证它是否正常。问题：如果验证不正确，则会提示错误。如果它验证正确，它不会去任何地方，也不会处理表单

一旦表单完成并验证，我需要知道如何将表单及其值重定向到“process-comp.php”。

如果有错误，我不希望用户在空白字段中再次输入信息，只是为了更正错误的字段。

以及如何防止 XSS（跨站点脚本）攻击，

请在下面找到代码：

```
 <?PHP
   require_once ("formvalidator.php");

   $show_form=true;
   if(isset($_POST['Submit']))
   {// We need to validate only after the form is submitted
   //   
   // The first argument is the name of the input field in the form. 
   // The second argument is the validation descriptor that tells the type of the validation required. 
   // The third argument 
   // is the error message to be displayed if the validation fails. 
   //

   //Setup Server side Validations
       //Please note that the element name is case sensitive 
       $validator = new FormValidator();
       $validator->addValidation("FIRSTNAME_FIELD","req","Please enter first name");
       $validator->addValidation("LASTNAME_FIELD","req","Please neter your surname");    
       $validator->addValidation("EMAIL_FIELD","email","Enter a valid email value");
       $validator->addValidation("EMAIL_FIELD","req","Please enter an Email");
       $validator->addValidation("STORE_NAME_FIELD","req","Please select a store");

       //Then validate the form
       if($validator->ValidateForm())
       {
    // 
   // How do i make it to process the form it is correctly to "process-page.php"
    //
       }
       else
       {
           echo "<B>Validation Errors:</B>";

           $error_hash = $validator->GetErrors();
           foreach($error_hash as $inpname => $inp_err)
           {
             echo "<p>$inpname : $inp_err</p>\n";
           }
       }
   }

   if(true == $show_form)
   {
   ?> 

   <form class="" name="emvForm" id="emvForm"  action="" method="POST" style="" >

        <table width="380" border="0" cellspacing="10" cellpadding="" style="">
     <tr>
       <td class="form-comp"><label for="FIRSTNAME_FIELD" style="">First name*</label></td>
       <td><input type="text"  class="required nameaa " id="FIRSTNAME_FIELD" name="FIRSTNAME_FIELD" value="" size="25" maxlength="64" style=""></td>
     </tr>
     <tr>
       <td class="form-comp"><label for="LASTNAME_FIELD">Surname* </label></td>
       <td><input type="text" class="required nameaa" id="LASTNAME_FIELD" name="LASTNAME_FIELD" value="" size="25" maxlength="64" style=""></td>
     </tr>
     <tr>
       <td class="form-comp"><label for="EMAIL_FIELD">Email*</label></td>
       <td><input type="text" id="EMAIL_FIELD" class="required email" name="EMAIL_FIELD" value="" size="25" maxlength="64" style=""></td>
     </tr>
     <tr>
       <td class="form-comp"><label for="STORE_NAME_FIELD">Select shop*</label></td>
       <td><select id="STORE_NAME_FIELD" name="STORE_NAME_FIELD" class="required" style="">
         <option selected disabled="disabled" value="">Select shop</option>
         <option value="Aberdeen |T: 0123456789 | 345 Lorem High St EFG 456">Aberdeen </option>
         <option value="Acton | T: 0123456789 | 123 Ipsum High St ABD 123">Acton </option>
         <option value="Aldgate">Aldgate </option>
         <option value="Ashford">Ashford </option>
         <option value="Aylesbury">Aylesbury </option>
         <option value="Baker Street">Baker Street </option>

       </select></td>
     </tr>
     <tr>
       <td> <label for="STORE_NAME_FIELD"> </label>
       </td>
       <td>
        <input type='submit' name='Submit' value='Submit form' style=" cursor:pointer;">
       </td>
     </tr>
   </table>
         <input type="hidden" id="SOURCE_FIELD" name="SOURCE_FIELD" value="St-Petes">
         <input type="hidden" id="PROMO_FIELD" name="PROMO_FIELD" value="<?php echo($Promo); ?>">
         <input type="hidden" id="PROMO2_FIELD" name="PROMO2_FIELD" value="<?php echo($Promo2); ?>">

   </form>

   <?PHP
   }//true == $show_form
   ?>

   </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:22:47.700

根据您的流程页面的外观，这应该是最简单的方法。

```
if($validator->ValidateForm())
 {
    include("process-page.php");   
 } 
```

但我建议将文件的相关部分“复制”到当前文件中，因为这样，任何人（有知识的人）都可以直接 POST 到处理站点并绕过验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:22:13.253

我会建议你用 ajax 来做。

将表单数据发送到您的 proccess-page.php，如果有效则返回 true，如果无效则返回错误消息。

这将为您提供如何防止 XSS 的信息：[如何使用 HTML/PHP 防止 XSS？](https://stackoverflow.com/questions/1996122/how-to-prevent-xss-with-html-php)

# javascript - Mobiscroll Datepicker Kendo UI Mobile

> ID：14336552
> 
> 赞同：2
> 
> 时间：2013-01-15T11:16:26.350
> 
> 标签：javascript, jquery-mobile, telerik, kendo-ui, mobiscroll

我正在使用 kendo 移动框架的 Kendo UI Mobile v2012.3.1114 并且 mobiscroll 设置和取消按钮每次都不会触发。有时它会触发，但并非总是如此。如果我使用 kendo 移动框架的 v2012.2.913，它可以正常工作，只是速度很慢。我认为这是关于 CSS 问题，但我不确定。

开发环境 - (Telerik Cloud IDE) Icenium Graphite v1.1 - Kendo UI Mobile Framework v2012.3.1114 - Jquery Mobile v1.8.2 - Mobiscroll v2.3.1

这是html和javascript：

```
<input type="date" id="datePickerBeginDateExtracted"/>

$(function() {
        $('#datePickerBeginDateExtracted').scroller({
            preset: 'date',
            invalid: { daysOfWeek: [0, 6], daysOfMonth: ['5/1', '12/24', '12/25'] },
            theme: 'sense-ui',
            display: 'modal',
            mode: 'mixed',
            animate: 'swing',
            dateOrder: 'mmD ddyy'
        });    
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:02:44.067

Kendo UI Mobile 默认阻止 documentElement 级别的 touchmove，以禁用浏览器窗口的本机触摸滚动。不幸的是，这会影响 Mobiscroll 的行为。您可以在应用程序初始化后使用以下内容删除 Kendo UI Mobile 事件：

```
$(document.documentElement).off("touchmove"); 
```

这将允许 Mobiscroll 工作，但将在未启用 Kendo UI Mobile Scroller 的区域（即 NavBar、TabStrip 和拉伸视图）上启用本机滚动。如果您愿意，您可以单独阻止它们的 touchmove。

# facebook - Facebook 应用程序无法正常工作

> ID：14336556
> 
> 赞同：0
> 
> 时间：2013-01-15T11:16:39.983
> 
> 标签：facebook, apache

我的 facebook 应用程序显然无缘无故开始失败。尝试加载应用程序时，我不断收到此错误：错误 324 net::ERR_EMPTY_RESPONSE。

我有有效的 ssl 证书，应用程序代码非常基本且正确（我什至测试了一个空应用程序但仍然无法正常工作）。一切似乎都很好，但事实是它现在无法正常工作。

一件重要的事情是，当我在 facebook 之外访问应用程序时，它可以工作，并且可能会缓存某些内容，使其下次尝试通过 facebook 访问它时工作。如果我清除缓存，它将无法再次工作。

检查服务器日志，我没有看到 facebook 尝试连接。不知道是不是和apache服务器有关。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:40:54.873

解决了。

这是apache的问题。我们刚刚重新编译了它（cpanel easy apache），它现在可以工作了。

# python - Python：将变量传递给 NLTK 中的 Wordnet Synsets 方法

> ID：14336562
> 
> 赞同：4
> 
> 时间：2013-01-15T11:16:57.233
> 
> 标签：python, nltk, wordnet

我需要从事一个需要 NLTK 的项目，所以我两周前开始学习 Python，但很难理解 Python 和 NLTK。

从 NLTK 文档中，我可以理解以下代码，如果我在下面的代码中手动添加单词 apple 和 pear，它们可以很好地工作。

```
from nltk.corpus import wordnet as wn

apple = wn.synset('apple.n.01')
pear = wn.synset('pear.n.01')

print apple.lch_similarity(pear)

Output: 2.53897387106 
```

但是，我需要使用 NLTK 来处理项目列表。例如，我有一个下面的项目列表，我想将 list1 中的项目与 list2 进行比较 - 例如：将 list1 中的 word1 与列表 2 中的每个单词进行比较，然后将 list1 中的 word2 与 list2 中的每个单词进行比较，直到所有单词list1 进行比较。

```
list1 = ["apple", "honey", "drinks", "flowers", "paper"]
list2 = ["pear", "shell", "movie", "fire", "tree", "candle"]

wordFromList1 = list1[0]
wordFromList2 = list2[0]

wordFromList1 = wn.synset(wordFromList1)
wordFromList2 = wn.synset(wordFromList2)    

print wordFromList1.lch_similarity(wordFromList2) 
```

上面的代码当然会出错。谁能告诉我如何将*变量*传递给synset 方法 [wn.synset(*pass_variable_in_here*)] 以便我可以使用双循环来获取它们的 lch_similarity 值。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:51:55.503

`wordnet.synset`需要一个由[3 部分组成的名称](http://nltk.googlecode.com/svn/trunk/doc/howto/wordnet.html)字符串，格式为： `word.pos.nn`.

您没有为和 `pos.nn`中的每个单词指定部分。`list1``list2`

假设所有单词都是名词似乎是合理的，因此我们可以尝试将字符串附加到and`'.n.01'`中的每个字符串：`list1``list2`

```
for word1, word2 in IT.product(list1, list2):
    wordFromList1 = wordnet.synset(word1+'.n.01')
    wordFromList2 = wordnet.synset(word2+'.n.02') 
```

但是，这不起作用。`wordnet.synset('drinks.n.01')`提出一个`WordNetError`。

另一方面，[同一个文档页面](http://nltk.googlecode.com/svn/trunk/doc/howto/wordnet.html)显示您可以使用以下方法查找相似的单词`synsets`：

例如，`wordnet.synsets('drinks')`返回列表：

```
[Synset('drink.n.01'),
 Synset('drink.n.02'),
 Synset('beverage.n.01'),
 Synset('drink.n.04'),
 Synset('swallow.n.02'),
 Synset('drink.v.01'),
 Synset('drink.v.02'),
 Synset('toast.v.02'),
 Synset('drink_in.v.01'),
 Synset('drink.v.05')] 
```

所以在这一点上，你需要考虑一下你想让程序做什么。如果您可以选择此列表中的第一项作为 的代理`drinks`，那么您可以使用

```
for word1, word2 in IT.product(list1, list2):
    wordFromList1 = wordnet.synsets(word1)[0]
    wordFromList2 = wordnet.synsets(word2)[0] 
```

这将导致一个看起来像这样的程序：

```
import nltk.corpus as corpus
import itertools as IT

wordnet = corpus.wordnet
list1 = ["apple", "honey", "drinks", "flowers", "paper"]
list2 = ["pear", "shell", "movie", "fire", "tree", "candle"]

for word1, word2 in IT.product(list1, list2):
    # print(word1, word2)
    wordFromList1 = wordnet.synsets(word1)[0]
    wordFromList2 = wordnet.synsets(word2)[0]
    print('{w1}, {w2}: {s}'.format(
        w1 = wordFromList1.name,
        w2 = wordFromList2.name,
        s = wordFromList1.lch_similarity(wordFromList2))) 
```

产生

```
apple.n.01, pear.n.01: 2.53897387106
apple.n.01, shell.n.01: 1.07263680226
apple.n.01, movie.n.01: 1.15267950994
apple.n.01, fire.n.01: 1.07263680226
... 
```

# oauth-2.0 - Google 客户端 API - 将 oauth 身份验证限制为我的域

> ID：14336564
> 
> 赞同：1
> 
> 时间：2013-01-15T11:17:04.653
> 
> 标签：oauth-2.0, google-api-client

有没有人`Google Client API`通过限制用户可以登录的域来使用 对他们的域进行授权的经验？

所需的 titbit 似乎是一个 qs 参数：`hd='[Domain name]'`

`OAuth2Parameters`但是参数对象中没有类似的东西

```
var oap = new OAuth2Parameters
{
        AccessToken = Current == null ? null : Current.AccessToken,
        RefreshToken = Current == null ? null : Current.RefreshToken,
        ClientId = GoogleClientId,
        ClientSecret = GoogleClientSecret,
        Scope = "https://spreadsheets.google.com/feeds https://docs.google.com/feeds https://www.googleapis.com/auth/userinfo.email",
        RedirectUri = HttpContext.Current.Request.Url.Scheme.Concatenate("://", HttpContext.Current.Request.Url.Authority,                                                                             "/Builder/Authentication/Receive"),
        AccessType = "offline" //ensures a refresh token (tho not currently working),
        *HD = //Hmm if only... :(((*

    };
var authorizationUrl = OAuthUtil.CreateOAuth2AuthorizationUrl(oap);

return Redirect(authorizationUrl); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:18:10.613

所以，事实上，我们只需要这样调整 url：

```
var authorizationUrl = OAuthUtil.CreateOAuth2AuthorizationUrl(oap);
authorizationUrl += "&hd=" + "mydomain.com".UrlEncode();
return Redirect(authorizationUrl); 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T12:36:02.683

使用**hd**参数。

[谷歌文档](https://developers.google.com/accounts/docs/OAuth_ref#GetAuth)

**警告：**此标记记录在**OAuth 1.0 API 参考**中。在版本 2 中没有记录但可以工作。

> 重要提示：OAuth 1.0 已于 2012 年 4 月 20 日正式弃用。它将根据我们的弃用政策继续有效，但我们建议您尽快迁移到 OAuth 2.0。

# security - 连接到 VPN 时无法让 Paros 代理工作

> ID：14336570
> 
> 赞同：0
> 
> 时间：2013-01-15T11:17:24.913
> 
> 标签：security, testing

当我们连接到 VPN 网络时，使用 Paros 代理进行网络嗅探。Paros 不会嗅探任何东西。在公共网络上，它能够以正确的配置捕获数据..

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:23:46.257

Yeah, use OWASP ZAP: [https://www.owasp.org/index.php/ZAP](https://www.owasp.org/index.php/ZAP) instead ;)

Paros hasnt been updated for *many* years, while ZAP is an open source fork of Paros and is very actively maintained.

Simon (ZAP Project lead)

# java - 使用动态生成的名称访问数组的索引

> ID：14336572
> 
> 赞同：2
> 
> 时间：2013-01-15T11:17:38.263
> 
> 标签：java, javascript, arrays

我有一些包含一些数组的 Java 代码。说其中之一是`b`。我有一个字符串`a`，其值在不同时间指向这些数组的名称。因此，如果`a`当前包含`b`，我想访问`b`through的第三个元素`a`。我可以在 Javascript 中使用`window[a][2]`. 在Java中有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:20:54.033

使用**集合**。看起来你正在寻找`HashMap`

像这样的东西：

```
Map<String, List<String>> map = new HashMap<String, List<String>>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:30:18.673

根据您上面的评论，我会给您一个伪代码答案：

像这样编写处理程序：

```
public class MyHandler implements YourHandlerInterface {

    private String[] array;

    public MyHandler(String[] array) {
        this.array = array;
    }
    // your methods that have to access the array.
} 
```

然后，当您可以以某种方式使用它们时：

```
fileMenu.addHandler(new MyHandler(fileMenuArray));
editMenu.addHandler(new MyHandler(editMenuArray)); 
```

所以你**不使用动态生成的变量名**，仍然只需要实现一次。

# android - 条件蚂蚁规则

> ID：14336573
> 
> 赞同：3
> 
> 时间：2013-01-15T11:17:51.647
> 
> 标签：android, ant

这是我的 custom_rules.xml，它是从“build.xml”调用的

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="custom_rules">
<xmlproperty file="AndroidManifest.xml" prefix="mymanifest" collapseAttributes="true"/>
<property name="build.dir" value="releases" />   
  <property name="version.name" value="${mymanifest.manifest.android:versionName}" />   
   <property name="version.code" value="${mymanifest.manifest.android:versionCode}" />   
   <property name="out.file" value="${ant.project.name}-${version.name}_${version.code}.apk" />   
<target name="-post-build">
    <echo>Output filename: ${out.file}</echo>
    <copy file="${out.final.file}" tofile="${build.dir}/${out.file}"/>
</target> 
```

我想要做的是，只有在使用 ant release 启动 ant 时才应执行上述操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T14:21:37.767

我通常处理它的方式：

*   使“发布”目标设置一个属性。就像是：

`<property name="isreleasing" value="true" />`

*   向目标添加一个 if 以仅在有释放时才执行。像这样的东西：

`<target name="-post-build" if="isreleasing">`

`...`

# java - cron4j：以不同的计划时间安排多个任务

> ID：14336575
> 
> 赞同：3
> 
> 时间：2013-01-15T11:17:54.127
> 
> 标签：java, cron4j

我没有使用 cron4j 调度程序的经验，我需要用不同的时间安排任务。使用 cron4j 是必需的，所以我必须使用它。我试图找到教程但没有成功。有人能帮我吗。我现在不想要完整的代码，只是推荐如何做到这一点或与教程链接。我已经阅读了 cron4j 文档，但我没有找到我需要的东西。我感谢每一个帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T10:43:00.733

对不起，我迟到了。

这正是我在[这个线程上遇到的问题](https://stackoverflow.com/questions/18814915/using-cron4j-i-have-separate-tasks-that-need-separate-schedules)

但是，我设法找到了实现多个时间表的“一种”方法。

如果你有不同的任务，你想在不同的时间执行。创建不同的调度程序：

```
// Creates a Constituent Scheduler instance.
Scheduler myFirstScheduler = new Scheduler();

// Creates a Summary Scheduler instance.

Scheduler mySecondScheduler = new Scheduler();

// Schedule a once-a-week task at 8am on Sunday.        
myFirstScheduler("0 8 * * 7", new Runnable() {
    public void run() {
        //DO SOMETHING

    }
});

//Schedule a twice a day task at 7am and 6pm on weekdays
mySecondScheduler("0 7 * * 1-5 |0 18 * * 1-5 ", new Runnable() {
    public void run() {
        //DO SOMETHING
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:19:56.317

[这是](http://www.sauronsoftware.it/projects/cron4j/manual.php?PHPSESSID=joa7htq52ntatnb3012dutdc54)cron4j 文档。还有代码示例。一般来说，调度是通过调用`Scheduler#schedule`接受 linux`cron`格式字符串的方法来完成的，例如`* * * * *`

# java - 如何使用 IDE 组织 java 项目？

> ID：14336576
> 
> 赞同：5
> 
> 时间：2013-01-15T11:17:55.730
> 
> 标签：java, intellij-idea, project-organization

我要开发一个Java系统，它由三个应用程序组成。这个应用程序使用相同的包。例如，如何在 IntelliJ IDEA 中组织这个项目？它必须在项目中以包的一个层次结构或在库中使用的不同项目中组织的所有源。你能告诉我专业的解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T12:04:34.040

专业的解决方案是不要依赖 IDE 来构建您的软件。您想使用构建工具来构建软件。有许多构建工具可供选择，例如

1.  制作
2.  蚂蚁
3.  马文
4.  耙
5.  摇篮
6.  建造者

等等

您选择的工具取决于您如何看待构建软件。

例如 Make、ANT 等工具采用“照我说的做”的方法来构建软件。如果您喜欢准确说明您想要完成的工作以及您希望如何完成，这可能会很好。

诸如 Maven 之类的工具采用“约定优于配置”的方法。他们说如果你遵循约定，你不应该重复告诉构建工具如何做标准的事情，例如，如果你把你的 Java 源代码放在`src/main/java`目录中，那么 Maven 会自动为你编译它，如果您将测试源代码放入，`src/test/java`那么 Maven 将为您编译并运行所有测试。

Maven 并不适合所有人……有些人似乎想花更多的时间告诉构建工具确切地做什么，而更少的时间编写他们的软件……这很好……不是我（我在 Maven PMC...猜我最喜欢的构建工具是什么并不奇怪）...但是这些人确实喜欢 Maven 提供的一些“约定优于配置”的东西...他们只是想要一种更灵活的方式在需要时进行覆盖摆脱常规......具有这种思维方式的人会使用 Gradle 和 Buildr 等工具。

好的 IDE 将获取构建文件并从该构建工具推断项目结构。IntelliJ、Eclipse 和 NetBeans 都理解 Maven 的`pom.xml`构建文件。它使您的 IDE 设置为无操作。由于我个人使用 Maven 和 IntelliJ，因此我没有调查其他构建工具在 IDE 中的公平性。

选择一个构建工具，看看它是如何为您工作的。我假设您使用的是版本控制系统……如果您要更改构建工具，那应该没什么大不了的。

如果您选择使用 Maven，您将从 4 或 5 模块项目开始（一个父模块和三个子模块，可能还有一个共享的公共模块）

代码的结构如下

```
+- pom.xml (the root parent pom)
+- common (the common module directory)
|    +- pom.xml (the common module pom)
|    \- src
|         +- main
|         |    +- java
|         |    |    \- com... (your package dirs for common classes)
|         |    \- resources
|         |         \- com... (your package dirs for common classpath resources)
|         \- test
|              +- java
|              |    \- com... (your package dirs for tests of common classes)
|              \- resources
|                   \- com... (your package dirs for common test classpath resources)
+- app1 (the app1 module directory)
|    +- pom.xml (the app1 module pom)
|    \- src
|         +- main
|         |    +- java
|         |    |    \- com...
|         |    \- resources
|         |         \- com...
|         \- test
|              +- java
|              |    \- com...
|              \- resources
|                   \- com...
+- app2 (the app2 module directory)
|    +- pom.xml (the app2 module pom)
|    \- src
|         +- main
|         |    +- java
|         |    |    \- com...
|         |    \- resources
|         |         \- com...
|         \- test
|              +- java
|              |    \- com...
|              \- resources
|                   \- com...
\- app3 (the app3 module directory)
     +- pom.xml (the app3 module pom)
     \- src
          +- main
          |    +- java
          |    |    \- com...
          |    \- resources
          |         \- com...
          \- test
               +- java
               |    \- com...
               \- resources
                    \- com... 
```

你的根`pom.xml`看起来像

```
<project>    
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mydomain.something</groupId>
    <artifactId>something-parent</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <modules>
        <module>common</module>
        <module>app1</module>
        <module>app2</module>
        <module>app3</module>
    </modules>
</project> 
```

会`common/pom.xml`看起来像

```
<project>    
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.mydomain.something</groupId>
        <artifactId>something-parent</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>
    <artifactId>something-common</artifactId>
    <dependencies>
        <!-- insert the 3rd party dependencies you want -->
    </dependencies>
</project> 
```

然后每个应用程序 pom 看起来像这样

```
<project>    
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.mydomain.something</groupId>
        <artifactId>something-parent</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>
    <artifactId>something-app1</artifactId>
    <dependencies>
        <dependency>
            <groupId>com.mydomain.something</groupId>
            <artifactId>something-common</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>
        <!-- insert any 3rd party dependencies you want for app1 only -->
    </dependencies>
</project> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T12:00:43.387

我使用以下方法：`root-project`由一些子项目组成。其中一些依赖于其他（在项目属性中配置）来使用项目依赖的代码库。

```
root-project
+---- project1
+---- project2
+---- project3
+---- shared-code-project 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T12:02:52.343

如果真的很专业，假设您还需要使用 Maven 构建您的项目，并按照[Maven 概念](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)布局文件夹。即使您永远不会从命令行构建，最近大多数优秀的 IDE 也应该支持 Maven 项目。您将来很可能需要使用 Maven，并且迁移的工作量会减少。

更新：这是在撰写本文时。现在我建议使用比 Maven 更受欢迎的[gradle 。](https://stackoverflow.com/questions/14017364/how-to-create-java-gradle-project)

# google-play - Google Play 设备过滤在两个不同的 APK 上的工作方式不同

> ID：14336584
> 
> 赞同：1
> 
> 时间：2013-01-15T11:18:22.870
> 
> 标签：google-play

我有一个非常奇怪的问题。我在 Google Play 中有 2 个应用程序，它们的清单非常相似。唯一的区别是另一个有更多的“使用许可”标签和更多的活动/服务。据我所知，具有更多权限等的设备可以安装在所有正确的设备上，但权限较少的设备在 Google Play 中报告“此应用程序无法安装在您的设备上”，至少有两种设备：三星 GT- I9000 和三星 GT-P6800。例如在我自己的手机三星 Galaxy Note (GT-N7000) 上，这两个应用程序都可以从 Play 安装。

这些应用程序是：

[https://play.google.com/store/apps/details?id=com.ksatta.irop](https://play.google.com/store/apps/details?id=com.ksatta.irop)（主应用程序，具有更多权限等）

[https://play.google.com/store/apps/details?id=com.ksatta.zradio.unlocker](https://play.google.com/store/apps/details?id=com.ksatta.zradio.unlocker)（解锁器，权限和活动/服务较少）

昨天我尝试将 "supports-screens android:anyDensity="true"" 设置为解锁器，因为这是我认为可能会影响它的唯一区别。但是用户报告说播放显示更新版本，但仍然显示设备不兼容。

我发现了很多关于类似问题的问题，答案通常是添加支持屏幕之类的东西，但主应用程序也没有这些，所以这不是问题。

解锁器也是付费的，应用程序本身是免费的，但这不应该影响它吗？

有任何想法吗？看起来像是 Play 过滤中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:57:20.853

Google Play 中的国家/地区列表内容似乎存在错误。在我的开发人员中检查了用户的国家/地区。付费应用程序的控制台，但[http://support.google.com/googleplay/bin/answer.py?hl=en&topic=1046718&ctx=topic&answer=143779](http://support.google.com/googleplay/bin/answer.py?hl=en&topic=1046718&ctx=topic&answer=143779)没有他的国家/地区。

最奇怪的是，它一直显示他与他的设备“不兼容”，尽管真正的问题似乎是他的国家。

似乎是这样的：http: [//support.google.com/googleplay/bin/answer.py ?hl=en&answer=2677176](http://support.google.com/googleplay/bin/answer.py?hl=en&answer=2677176)

问题首次报告时间：2012 年 2 月 1 日 最后更新时间：2012 年 11 月 30 日

来谷歌..认真的吗？1年了还是不行？？

# eclipse - 为 eclipse rcp 创建语言插件

> ID：14336585
> 
> 赞同：1
> 
> 时间：2013-01-15T11:18:28.817
> 
> 标签：eclipse, translation, rcp

可以下载 eclipse 的语言插件。我将如何为我自己的 eclipse rcp 软件创建这样的语言插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:29:13.803

通常的方法是为您自己的包创建语言片段。[本文](http://www.eclipse.org/articles/Article-Internationalization/how2I18n.html)描述了如何做到这一点 - 它已经很老了，但它的核心信息仍然有效。

# java - 使用 XOM 在具有默认命名空间的 xml 上应用 xpath

> ID：14336587
> 
> 赞同：4
> 
> 时间：2013-01-15T11:18:31.467
> 
> 标签：java, xpath, xml-namespaces, xom

我有以下包含默认命名空间的 XML

```
<?xml version="1.0"?>
<catalog xmlns="http://www.edankert.com/examples/">
  <cd>
    <artist>Stoat</artist>
    <title>Future come and get me</title>
  </cd>
  <cd>
    <artist>Sufjan Stevens</artist>
    <title>Illinois</title>
  </cd>
  <cd>
    <artist>The White Stripes</artist>
    <title>Get behind me satan</title>
  </cd>
</catalog> 
```

我运行下面的代码，期待一些结果

```
Element rootElem = new Builder().build(xml).getRootElement();
xc = XPathContext.makeNamespaceContext(rootElem);
xc.addNamespace("", "http://www.edankert.com/examples/");   
Nodes matchedNodes = rootElem.query("cd/artist", xc);
System.out.println(matchedNodes.size()); 
```

但大小始终为 0。

我经过

*   [https://stackoverflow.com/a/9674145/1160106](https://stackoverflow.com/a/9674145/1160106) [我真的没有得到奇怪的 xpath 语法]
*   [http://www.edankert.com/defaultnamespaces.html#Jaxen_and_XOM](http://www.edankert.com/defaultnamespaces.html#Jaxen_and_XOM) [可以看到一些希望。只需要对我当前的实现进行重大更改]

期待任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:27:47.653

XPath 中无前缀的名称总是意味着“没有命名空间”——它们不尊重默认的命名空间声明。您需要使用前缀

```
Element rootElem = new Builder().build(xml).getRootElement();
xc = XPathContext.makeNamespaceContext(rootElem);
xc.addNamespace("ex", "http://www.edankert.com/examples/");   
Nodes matchedNodes = rootElem.query("ex:cd/ex:artist", xc);
System.out.println(matchedNodes.size()); 
```

XPath 表达式使用原始文档未使用的前缀无关紧要，只要绑定到 XPath 命名空间上下文中前缀的命名空间 URI`xmlns`与文档中绑定的 URI 相同.

# php - 为什么将框架文件夹放在公共根目录之外更安全？

> ID：14336589
> 
> 赞同：4
> 
> 时间：2013-01-15T11:18:41.490
> 
> 标签：php, zend-framework, cakephp, symfony, yii

为什么总是建议将框架文件放在公共根目录之外？

鉴于有时框架没有`.ini`或没有`.inc`可以由浏览器打开的文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T11:22:53.963

好吧，将框架源代码放在 web 根目录中肯定没有任何*好处*。由于选择放置文件的位置是自由的，因此[遵循最小权限原则是](http://en.wikipedia.org/wiki/Principle_of_least_privilege)合乎逻辑的：您不需要对这些文件进行网络访问，因此您不会得到它。

一个更具体的原因是框架来源可以很容易地披露网站上使用的框架的品牌和版本（尽管这些信息通常也可以通过检查生成的内容来获得）；这反过来又可以使恶意用户更容易利用已知或新发现的漏洞。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T11:24:59.987

这更安全，因为如果 Web 服务器中存在任何错误配置，那么脚本文件（无论是 .php、.asp 或其他）可能会以纯文本形式输出，潜在的攻击者会看到您的所有源代码和定义的密码。所以最好的做法是只将 index.php 文件放在 webroot 中，该文件又包含来自外部 webroot 的引导脚本。

我记得一个现实世界的例子——在我居住的拉脱维亚，我们有大型社交网络“draugiem.lv”（在我们国家比 Facebook 更受欢迎），几年前他们的所有 PHP 源代码都被错误配置的服务器泄露，正如我所描述的早些时候。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T12:42:45.813

除了其他答案引用的标准原因（服务器错误配置、最小权限原则等）之外，值得注意的是，包括 Zend Framework 在内的许多框架可以使用 PHP 以外格式的配置文件，例如，`.ini`,`.yml`等。

如果这些位于公共可访问的 Web 根目录中，那么 - 根据服务器配置 - 它们将直接提供给任何请求它们的人。由于这些配置文件通常包含数据库密码、API 密钥等敏感信息，因此当然希望尽可能地使它们无法访问。

例如，考虑`application/configs/application.ini`. 如果文档根目录位于项目文件夹级别，则请求：

`http://example.com/application/configs/application.ini`

会把钥匙送到城堡。

# jquery - jQuery 代码在 IE8 及以下版本中不起作用

> ID：14336591
> 
> 赞同：0
> 
> 时间：2013-01-15T11:18:48.697
> 
> 标签：jquery, internet-explorer

我有以下 2 段代码在 IE8 及以下版本中不起作用。

```
services.each(function() {
    $(this).hover(function() {
        services.removeClass('active');
        $(this).addClass('active');                     
    });
}); 
```

由于所有 4 个服务始终都有一个活动类，因此失败了。同样在以下代码中，回调函数不会添加已完成的类。

```
webform.click(function() {                  
    if(!$(this).hasClass('expanded')) {
            $(this).addClass('expanded');
            $(this).animate({
                marginLeft: '-25%',
                width: "50%",
                minWidth: '400px',
                maxWidth: '700px',
                padding: '0',
                minHeight: "580px",
                height: 'auto',
                borderRadius: "0"
            }, 1000, function () {
                $(this).addClass('completed');
            });
        } 
    }); 
```

谁能告诉我如何解决这些问题，更重要的是我将来应该做些什么来确保我的代码与 IE 兼容。

仅供任何有类似 jQuery/IE 问题的人参考，我在最后一个选项之后放置逗号时遇到了一个大问题，例如在`borderRadius: "0"`上面之后，除了 IE，它在所有浏览器中都被忽略了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:40:04.707

`Hover`问题-

`hover()`接受 2 个参数，一个 for`mouseenter`和一个 for `mouseleave`。如果您只提供一个函数作为参数，它将为这两个事件运行。

您不需要`each`在元素集合上运行方法，jQuery 将在内部循环遍历集合的所有元素。

试试这个`hover()`

```
services.hover(function() { 
       /* add on mousenter, remove on mouseleave  */   
        $(this).toggleClass('active');                   

}); 
```

使用两个参数的替代方法：

```
services.hover(function() { 
       /* add on mousenter */   
        $(this).addClass('active');                   

}, function(){
       /*remove on mouseleave */
       $(this).removeClass('active');  
}); 
```

API 参考：[http ://api.jquery.com/hover](http://api.jquery.com/hover)

# android - 不同应用程序的 Google Play Market 帐户

> ID：14336592
> 
> 赞同：1
> 
> 时间：2013-01-15T11:18:49.953
> 
> 标签：android, google-play

我开始开发关于打架和暴力的应用程序，我计划通过 Google Play Market 分发这个应用程序，就像我对所有其他 Android 应用程序所做的那样。我通常为儿童开发和发布应用程序，所以我害怕发布与我其他已发布应用程序相距甚远的东西。例如，我担心用户在寻找与我的孩子相关的应用程序时会在“此开发人员的其他应用程序”部分中看到暴力应用程序。有没有办法避免这种情况，或者唯一的解决方案是购买另一个开发者帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:21:55.920

不幸的是，*来自开发者的更多信息*以及网站和 Play 应用程序上的相关搜索是基于开发者的名称。

例如，从开发人员那里搜索更多看起来像这样：`https://play.google.com/store/apps/developer?id=publisher_name`和设备`market://search?q=pub:publisher_name`

唯一的选择是注册单独的 Google Play 发布者帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:25:41.370

纯粹出于发布暴力且不应被其他应用程序的用户看到的应用程序的目的而创建另一个帐户，纯属主观问题。如果您认为这是最好的方法，请继续。我看不出它会如何影响任何其他因素。

话虽如此，当您发布应用程序时，您已经可以选择（我可能会添加一个强制性选项）来选择**Content Rating**。此类应用程序的推荐选择可能是*High Maturity*。[在此链接](http://support.google.com/googleplay/android-developer/support/bin/answer.py?hl=en&answer=188189)上阅读更多相关信息。

# xslt-1.0 - 用空格对相同的标签进行分组

> ID：14336593
> 
> 赞同：1
> 
> 时间：2013-01-15T11:18:52.470
> 
> 标签：xslt-1.0

我想知道以下示例的 XSLT 模式。

输入

```
<root>
<p>Sample data 1</p>
<data>1</data>
<data>2</data>
<data>3</data>
<data>4</data>
<p>Sample data 2</p>
<p>Sample data 3</p>
<data>a</data>
<data>b</data>
<data>c<i>d</i>e</data>
<data>d</data>
<p>Sample data 4</p>
</root> 
```

所需输出：

```
<root>
<p>Sample data 1</p>
**<data>1 2 3 4</data>**
<p>Sample data 2</p>
<p>Sample data 3</p>
**<data>a b c<i>d</i>e d</data>**
<p>Sample data 4</p>
</root> 
```

我想将标签与整个 XML 文件中的`"<data>"`空格分组。`"<data>"`单个文件中可能会出现很多`"<data>"`标签。

谢谢，穆图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:46:37.673

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFollowing" match="data"
          use="generate-id(preceding-sibling::p[1])"/>

 <xsl:template match="node()|@*" name="identity">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="p">
  <xsl:call-template name="identity"/>
  <xsl:apply-templates mode="group"
       select="key('kFollowing',generate-id())[1]"/>
 </xsl:template>

 <xsl:template match="data" mode="group">
  <data>
    <xsl:apply-templates mode="group"
     select="key('kFollowing',
                 generate-id(preceding-sibling::p[1])
                 )/node()"/>
  </data>
 </xsl:template>

 <xsl:template match="data/node()" mode="group">
   <xsl:if test="not(position() = 1)"><xsl:text> </xsl:text></xsl:if>
   <xsl:apply-templates select="."/>
 </xsl:template>
 <xsl:template match="text()">
   <xsl:value-of select="normalize-space()"/>
 </xsl:template>
 <xsl:template match="/*/*[not(self::p)]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <p>Sample data 1</p>
    <data>1</data>
    <data>2</data>
    <data>3</data>
    <data>4</data>
    <p>Sample data 2</p>
    <p>Sample data 3</p>
    <data>a</data>
    <data>b</data>
    <data>c
        <i>d</i>e
    </data>
    <data>d</data>
    <p>Sample data 4</p>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <p>Sample data 1</p>
   <data>1 2 3 4</data>
   <p>Sample data 2</p>
   <p>Sample data 3</p>
   <data>a b c <i>d</i> e d</data>
   <p>Sample data 4</p>
</root> 
```

# jquery - 使用 jquery ajax 调用 mixpanel

> ID：14336594
> 
> 赞同：2
> 
> 时间：2013-01-15T11:19:00.187
> 
> 标签：jquery, ajax, mixpanel

我需要使用 jQuery 使用 mixpanel 数据导出 API。
据此：[如何使用mixpanel API？](https://stackoverflow.com/questions/13140336/how-can-i-use-mixpanel-api)并根据mixpanel：[https](https://mixpanel.com/docs/api-documentation/data-export-api#libs-js) ://mixpanel.com/docs/api-documentation/data-export-api#libs-js ，我可以使用这个：

```
$.getJSON('http://mixpanel.com/api/2.0/engage/?callback=?', {
        api_key: apiKey,
        expire: expire,
        sig: sig
    },
    function (result) {
        alert(result);
    }
); 
```

但结果我得到一个错误：

```
"unknown param: callback
for params: {'callback': 'jQuery18208090281161325954_1358248117308', 'project_id': 160130}" 
```

我知道 url 和我的数据是正确的，因为当我打开浏览器时，`http://mixpanel.com/api/2.0/engage/?api_key=...&expire=...&sig=...`我得到了正确的数据。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:59:00.373

您的代码没有任何问题。

该`callback`参数适用于其他端点，例如`.../events/top`and `.../funnels/list`，但此特定`engage`端点会返回此错误。

您必须将此作为 Mixpanel 的问题提出，该端点不支持 JSONP 回调。

有点令人困惑的是，您可以按照此页面上的说明使用不同的端点 *发布*数据： [https ://mixpanel.com/docs/people-analytics/people-http-specification-insert-data](https://mixpanel.com/docs/people-analytics/people-http-specification-insert-data)`engage`

这是一个适用于此端点的示例：

```
var mixpanel_token = "<insert token for your mixpanel project here>";
var myData = { "$set": {         
                  "$first_name": "John", 
                  "$last_name": "Smith" },
                "$token": mixpanel_token, 
                "$distinct_id": "99999", 
                "$ip": "0" };

var dataEncodedToBase64 = window.btoa(JSON.stringify(myData));

var path = 'http://api.mixpanel.com/engage?callback=?';

$.getJSON(path, { 'data': dataEncodedToBase64, 'verbose': 1 }, function(json) {
        console.log("Success");
        console.log(json);
}); 
```

请注意，您的代码应该适用于您在问题中提供的链接中的其他端点，而不适用于`engage`.

# mysql - mysql将带有2个fk的表连接到同一张表

> ID：14336596
> 
> 赞同：2
> 
> 时间：2013-01-15T11:19:04.637
> 
> 标签：mysql, sql, select, join, left-join

表`join`：

```
|ID|admin|user |data|
|1 |00001|00002|XXXX| 
```

*   `admin`(fk) = `users.id`,
*   `user`(fk) = `users.id`。

表`users`：

```
|id   |name|pass|type |
|00001|root|1234|admin|
|00002|user|1235|user |

select join.*,users.name as admin,users.name as user from join 
left join users on users.id=join.admin
left join users on users.id=join.user

where grrrrrrr 
```

我怎样才能做到这一点？

原始查询，我正在尝试运行：

```
SELECT

    visits.id,
    visits.patient AS patient_id,
    visits.doctor AS doctor_id,
    visits.date,
    visits.time_booked,
    visits.time_arrived,
    visits.time_start,
    visits.time_end,
    visits.type_id,
    visits.complain,
    visits.diagnosis,
    visits.note,
    visits.stats,
    (personal.name WHERE personal.id=visits.patient and personal.role='patient') AS pt_name,
    (personal.name WHERE personal.id=visits.doctor and personal.role='doctor') AS dr_name
    FROM
    visits ,
    personal 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:20:28.983

您必须`users`使用不同的别名对表进行别名。就像是

```
select 
  a.*,
  u1.name as admin,
  u2.name as user 
from `join` a 
left join users u1 on u1.id = a.admin
left join users u2 on u2.id = a.`user`; 
```

您还必须转义表名`join`，`user`因为它们是 MySQL 中的保留关键字。尽量避免将这些名称作为对象名称。

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/d1bcc/1)

这会给你：

```
| ID | ADMIN | USER | DATA |
----------------------------
|  1 |     1 |    2 | XXXX | 
```

* * *

## 更新

对于更新问题后的查询，您必须以相同的方式执行此操作，如下所示：

```
SELECT
  v.id,
  v.patient AS patient_id,
  v.doctor AS doctor_id,
  v.date,
  v.time_booked,
  v.time_arrived,
  v.time_start,
  v.time_end,
  v.type_id,
  v.complain,
  v.diagnosis,
  v.note,
  v.stats,
  pationts.name AS pt_name,
  doctors.name AS dr_name
FROM visits v
LEFT JOIN personal pationts  ON pationts.id   = v.patient 
                            AND pationts.role ='patient'
LEFT JOIN personal doctors   ON doctors.id    = v.patient 
                            AND doctors.role  ='doctor'; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/db7a5/2)

# c# - 使用代码将图像对象添加到 wpf

> ID：14336597
> 
> 赞同：4
> 
> 时间：2013-01-15T11:19:07.033
> 
> 标签：c#, wpf, simulator

我是 C# 和 WPF 的新手，我正在尝试创建一个简单的汽车模拟器。模拟器的主要想法是我有 C# 类来创建汽车对象，例如可以更改的速度变量和从左到右移动的计时器。我想用计时器而不是例如做运动`doubleanimation`。在 WPF 中，我有 AddCarButton 用于在 Canvas 的某些点添加汽车。

问题是我不知道如何将汽车添加到 Canvas。这非常令人沮丧，因为这听起来不像是一件大事，但我觉得我已经尝试了一切，但没有成功。

这是汽车级的最新尝试。我曾尝试使用 Canvas.Set-methods 但失败了。

```
class car
{
    private int speed;

    public car(int s)
    {
        speed = s;
        Bitmap bmp = new Bitmap(
        System.Reflection.Assembly.GetEntryAssembly().
        GetManifestResourceStream("MyProject.Resources.car.png"));
        Graphics g = Graphics.FromImage(bmp);
        //Canvas.SetBottom(g, 0);
        //Canvas.SetLeft(g, 0);
        //Canvas.SetBottom(bmp, 0);
        //Canvas.SetLeft(bmp, 0);
    }
    public void addCar(car c)
    {
        Canvas.SetBottom(c, 0);
        Canvas.SetLeft(c, 0);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:24:44.523

如果你在 WPF 上编码，你不应该使用*Windows 窗体*的东西。要处理图像，您使用**BitmapSource**及其派生类，并以编程方式访问您的资源，您通常使用**包 URI**。不过，这不是唯一的方法。

这是一个在画布控件上绘制一些图像的小示例。

画布的 XAML 代码可能是这样的（这只是一个示例）：

```
<Canvas Height="400" HorizontalAlignment="Left" Margin="0" Name="canvas1" VerticalAlignment="Top" Width="400" /> 
```

和你的主窗口代码......

```
public partial class MainWindow : Window
{
    BitmapImage carBitmap = new BitmapImage(new Uri("pack://application:,,,/Images/BlueCar.png", UriKind.Absolute));
    Image[] carImg = new Image[5];
    Random rnd = new Random();

    public MainWindow()
    {
        InitializeComponent();
        double maxX = canvas1.Width - carBitmap.Width;
        double maxY = canvas1.Height - carBitmap.Height;
        for (int i = 0; i < carImg.Length; i++)
        {
            carImg[i] = new Image();
            carImg[i].Source = carBitmap;
            carImg[i].Width = carBitmap.Width;
            carImg[i].Height = carBitmap.Height;
            Canvas.SetLeft(carImg[i], rnd.NextDouble() * maxX);
            Canvas.SetTop(carImg[i], rnd.NextDouble() * maxY);
            canvas1.Children.Add(carImg[i]);
        }
    }
} 
```

显然，您需要更改图像资源的名称。顺便说一句，要添加图像，请转到**Project** > **Add existing item...**并选择您的图像文件，现在您的图像将出现在*解决方案资源*管理器中（默认情况下，Visual Studio 将图像资源存储在一个名为“Images”的文件夹中） ，如果您选择它，您将在*Properties*窗口中看到它的**Build 操作**是**Resource**，***不要更改它！***（有些人认为它应该是*嵌入式资源*，但这是不正确的）。

如果你没有得到这个`new Uri("pack://application:,,,/Images/BlueCar.png", UriKind.Absolute)`，你应该阅读[这个](http://msdn.microsoft.com/en-us/library/aa970069%28v=VS.85%29.aspx)关于**pack URIs**的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:31:07.173

您需要将您的位图放在一个`Image`（而不是`Graphics`）中，然后您需要将图像添加到画布：

```
Canvas.Children.Add(image); 
```

# c# - 在c#中将数据添加到数据库的数据行

> ID：14336604
> 
> 赞同：0
> 
> 时间：2013-01-15T11:19:28.970
> 
> 标签：c#, dataset, connection-string, sqlconnection, datarow

我在代码中遇到了一个小问题，将数据添加到 ASP.net/C# 中我的程序附带的 sql 数据库中。这是代码：

```
string ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["sqlconnection"].ConnectionString;

            SqlConnection cnn = new SqlConnection(ConnectionString);

            cnn.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.CommandText = "select Id from  TableName";
            cmd.Connection = cnn;
            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = cmd;
            DataSet ds = new DataSet();
            da.Fill(ds, " TableName ");
            SqlCommandBuilder cb = new SqlCommandBuilder(da);

            DataRow drow =  ds.Tables["TableName"].NewRow();
drow["Id"] = TextBox1.Text;
ds.Tables["TableName "].Rows.Add(drow);

            da.Update(ds, " TableName ");
            string script = @"<script language=""javascript"">
        alert('Information have been Saved Successfully.......!!!!!.');
       </script>;";
            Page.ClientScript.RegisterStartupScript(this.GetType(), "myJScript1", script); 
```

* * *

即使我在文本框中输入了任何整数值，它也会显示一条错误消息，指出对象未设置为代码上的实例：

```
DataRow drow =  ds.Tables["TableName"].NewRow(); 
```

请指导。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:38:34.203

这似乎是一种非常糟糕的插入数据的方式。你看过[Entity Framework](http://entityframeworktutorial.net/)或[Linq2Sql](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)吗？或者，您可以只使用标准 SqlCommand 并自己设置 CommandText。

这些中的任何一个都将提供更清洁的解决方案。

例如：使用 ADO.NET（连接到 SQLite）：

```
var conn = new SQLiteConnection(string.Format(Constants.SQLiteConnectionString, "db.db3"));
conn.Open();
using (SQLiteTransaction trans = conn.BeginTransaction()) {
    using (var cmd = conn.CreateCommand()) {
        cmd.CommandText = "INSERT INTO TableName (Id) VALUES (@Id)";
        cmd.Parameters.AddWithValue("@Id", someTextVariable);
        cmd.ExecuteNonQuery();
    }
} 
```

# twitter - Twitter 不记得授权

> ID：14336605
> 
> 赞同：5
> 
> 时间：2013-01-15T11:19:30.390
> 
> 标签：twitter, oauth, twitter-oauth, scribe

我使用 Scribe (OAuth1.0) 作为一种机制，以便用户可以使用他们的 Twitter 帐户对我的 GWT/GAE 应用程序进行身份验证。

根据[https://dev.twitter.com/docs/auth/implementing-sign-twitter](https://dev.twitter.com/docs/auth/implementing-sign-twitter)，有 3 种可能的情况： a/ 用户已登录并获得批准。在这种情况下，Twitter 应该将用户透明地重定向回我的应用程序 url，b/ 用户已登录但未授权，或 c/ 用户未登录

当 Twitter 回到我的应用程序（回调）时，我使用 verifier 参数从 twitter 读取用户数据，我用它来确定我的应用程序中的用户。

所有这些都可以正常工作，除了以下内容：

场景 a/ 对我不起作用。尽管用户已经授权我的应用程序读取他的用户数据，但 Twitter 似乎不记得这一点，并再次请求授权访问。（场景 b/）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-06T18:29:03.383

twitter 为请求 OAuth 令牌的应用程序提供了两个 URL： `/oauth/authenticate`和`/oauth/authorize`. 当应用程序将用户定向到**授权**端点时 - Twitter 将在用户每次登录时请求用户授权应用程序。**身份验证**端点将请求一次授权，然后任何后续登录 Twitter 将无缝传递到应用程序回调。这在传统上被称为“使用您的 Twitter 帐户登录”。

在 Scribe 中，默认设置是**授权**- 要更改它以进行**身份​​验证**，您需要两件事：

1.  确保 在您的 Twitter 应用程序设置页面中选中*允许此应用程序用于使用 Twitter 登录设置。*
2.  在您的应用程序中 - 当您指定要使用的 Scribe API 类时 - 而不是使用`org.scribe.builder.api.TwitterApi.class`将其更改为`org.scribe.builder.api.TwitterApi.Authenticate.class`

现在，您的应用程序将引导用户登录到`/oauth/authenticate`端点，如果他们至少授权了您的应用程序一次，他们将直接通过。

**编辑：** 附加文档 - [https://dev.twitter.com/docs/api/1.1#102](https://dev.twitter.com/docs/api/1.1#102)

# css - CSS 悬停/滑块更改

> ID：14336606
> 
> 赞同：1
> 
> 时间：2013-01-15T11:19:32.907
> 
> 标签：css

我是新手，如果这对您来说似乎很简单，请耐心等待，因为这对我来说并不简单！

我买了一个很好的[模板](http://www.templatemonster.com/demo/39062.html)，它为我正在构建的一个新的美食节网站提供了框架。我是新来的，所以他们甚至不让我发布屏幕截图，所以我无法向您展示我是如何修改模板的！哑的！

主徽标下方是几个悬停按钮，可将图像从右向左滑动。我想把它们变成不“滑动”的悬停图像，只是在鼠标悬停时改变——正如[本文](http://kyleschaeffer.com/user-experience/pure-css-image-hover/)所建议的那样。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:24:28.440

只需添加您的 CSS：

```
ul#menu:hover li{
  background-image: url('yourImageUrl');
  background-repeat: no-repeat;
  background-position: top center;
} 
```

最终使用`opacity`使悬停图像半透明，并根据您的布局调整边距/填充

演示：http: [//jsfiddle.net/ZSGDH/](http://jsfiddle.net/ZSGDH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:58:30.470

我想我终于知道你的问题了，它在于我们看到的“鼠标悬停效果”实际上是由 javascript 而**不是**假定的 CSS3 触发的。

为了得到你想要的，你应该**首先**禁用覆盖 css 规则的 javascript。它的位置是“http://static.livedemo00.template-help.com/wt_39062/js/jquery.backgroundpos.js”

禁用 js/ 后，您可以使用链接到的 css3 技巧轻松实现您的想法。您可以进一步询问如何实现它，但目前我想您想自己做。

# php - PHP 错误：mysql_num_rows()：提供的参数不是有效的 MySQL 结果

> ID：14336607
> 
> 赞同：0
> 
> 时间：2013-01-15T09:20:08.640
> 
> 标签：php

我创建了一个 php 代码，以在管理员处显示谁在网站上在线，并存储在网站上连接的用户的 ip，并在 10 分钟后用户不再在网站上时从数据库中删除。它的工作但它向我显示了这个错误，我不知道我在哪里做错了。有人可以帮我做这件事吗？

错误是：

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in /home/a7078942/public_html/online.php on line 17 
```

这是我的代码：

```
<?php

require "connect.php";
require "functions.php";

// We don't want web bots scewing our stats:
if(is_bot()) die();

$stringIp = $_SERVER['REMOTE_ADDR'];
$intIp = ip2long($stringIp);

// Checking wheter the visitor is already marked as being online:
$inDB = mysql_query("SELECT 1 FROM tz_who_is_online WHERE ip=".$stringIp);

if(!mysql_num_rows($inDB))
{
    // This user is not in the database, so we must fetch
    // the geoip data and insert it into the online table:

    if($_COOKIE['geoData'])
    {
        // A "geoData" cookie has been previously set by the script, so we will use it

        // Always escape any user input, including cookies:\
        list($city,$countryName,$countryAbbrev) = explode('|',mysql_real_escape_string(strip_tags($_COOKIE['geoData'])));
    }
    else
    {
        // Making an API call to Hostip:

        $xml = file_get_contents('http://api.hostip.info/?ip='.$stringIp);

        $city = get_tag('gml:name',$xml);
        $city = $city[1];

        $countryName = get_tag('countryName',$xml);
        $countryName = $countryName[0];

        $countryAbbrev = get_tag('countryAbbrev',$xml);
        $countryAbbrev = $countryAbbrev[0];

        // Setting a cookie with the data, which is set to expire in a month:
        setcookie('geoData',$city.'|'.$countryName.'|'.$countryAbbrev, time()+60*60*24*30,'/');
    }

    $countryName = str_replace('(Unknown Country?)','UNKNOWN',$countryName);

    // In case the Hostip API fails:

    if (!$countryName)
    {
        $countryName='UNKNOWN';
        $countryAbbrev='XX';
        $city='(Unknown City?)';
    }
    mysql_query("   INSERT INTO tz_who_is_online (ip,city,country,countrycode)
                    VALUES('".$stringIp."','".$city."','".$countryName."','".$countryAbbrev."')");
}
else
{
    // If the visitor is already online, just update the dt value of the row:
    mysql_query("UPDATE tz_who_is_online SET dt=NOW() WHERE ip='".$stringIp."'");
}

// Removing entries not updated in the last 10 minutes:
mysql_query("DELETE FROM tz_who_is_online WHERE dt<SUBTIME(NOW(),'0 0:10:0')");

// Counting all the online visitors:
list($totalOnline) = mysql_fetch_array(mysql_query("SELECT COUNT(*) FROM tz_who_is_online"));

// Outputting the number as plain text:
echo $totalOnline;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:46:13.803

我认为这个问题可以通过这个改变来解决：

```
$inDB = mysql_query("SELECT 1 FROM tz_who_is_online WHERE ip='".$stringIp."'"); 
```

但如果再次出现此错误，请更改行：

```
$inDB = mysql_query("SELECT 1 FROM tz_who_is_online WHERE ip=".$stringIp); 
```

至 ：

```
$inDB = mysql_query("SELECT 1 FROM tz_who_is_online WHERE ip=".$stringIp) or die("Error: ". mysql_error(). " with query ". $query); 
```

看看是什么错误造成了这个问题并将错误放在评论中。

**注意：**最好在stackoverflow而不是serverfault中问这些问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:21:35.343

您的查询有问题`$inDB = mysql_query("SELECT 1 FROM tz_who_is_online WHERE ip=".$stringIp);`

# php - 下拉菜单中的记录集重复区域

> ID：14336609
> 
> 赞同：0
> 
> 时间：2013-01-15T11:19:36.850
> 
> 标签：php, drop-down-menu, recordset

我正在尝试让我的所有存档链接（2012 年 2 月、2012 年 3 月等）在下拉菜单中工作。我让它显示并链接到最近一个月，但它不会在下拉菜单中显示其他月份。这是我的下拉菜单代码：

```
 <h3>Archives</h3>
  <form name="form" id="form">
    <select name="jumpMenu" id="jumpMenu" onChange="MM_jumpMenu('parent',this,0)">
      <option value="#">-- Select Archive Date --</option>
      <option value="archive.php?archive=<?php echo $row_getArchives['link']; ?>"><?php echo $row_getArchives['archive']; ?></option>
    </select>
  </form> 
```

有什么方法可以动态显示剩下的几个月。

这是目前基本情况的屏幕截图 ![这是目前基本情况的屏幕截图](../Images/c2601ae17780290ed110b7c83397c12a.png)

编辑：这是我用于记录集的代码（即从数据库中获取数据）

```
$maxRows_getArchives = 10;
$pageNum_getArchives = 0;
if (isset($_GET['pageNum_getArchives'])) {
  $pageNum_getArchives = $_GET['pageNum_getArchives'];
}
$startRow_getArchives = $pageNum_getArchives * $maxRows_getArchives;

mysql_select_db($database_blog, $blog);
$query_getArchives = "SELECT DISTINCT DATE_FORMAT(news.updated, '%M %Y') AS archive, DATE_FORMAT(news.updated, '%Y-%m') AS link FROM news ORDER BY news.updated DESC";
$query_limit_getArchives = sprintf("%s LIMIT %d, %d", $query_getArchives, $startRow_getArchives, $maxRows_getArchives);
$getArchives = mysql_query($query_limit_getArchives, $blog) or die(mysql_error());
$row_getArchives = mysql_fetch_assoc($getArchives);

if (isset($_GET['totalRows_getArchives'])) {
  $totalRows_getArchives = $_GET['totalRows_getArchives'];
} else {
  $all_getArchives = mysql_query($query_getArchives);
  $totalRows_getArchives = mysql_num_rows($all_getArchives);
}
$totalPages_getArchives = ceil($totalRows_getArchives/$maxRows_getArchives)-1;

mysql_select_db($database_blog, $blog);
$query_getRecent = "SELECT news.post_id, news.title FROM news ORDER BY news.post_id DESC LIMIT 10";
$getRecent = mysql_query($query_getRecent, $blog) or die(mysql_error());
$row_getRecent = mysql_fetch_assoc($getRecent);
$totalRows_getRecent = mysql_num_rows($getRecent);

$maxRows_getDisplay = 1;
$pageNum_getDisplay = 0;
if (isset($_GET['pageNum_getDisplay'])) {
  $pageNum_getDisplay = $_GET['pageNum_getDisplay'];
}
$startRow_getDisplay = $pageNum_getDisplay * $maxRows_getDisplay;

mysql_select_db($database_blog, $blog);
$query_getDisplay = "SELECT  news.post_id, news.title,  DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC";
$query_limit_getDisplay = sprintf("%s LIMIT %d, %d", $query_getDisplay, $startRow_getDisplay, $maxRows_getDisplay);
$getDisplay = mysql_query($query_limit_getDisplay, $blog) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);

if (isset($_GET['totalRows_getDisplay'])) {
  $totalRows_getDisplay = $_GET['totalRows_getDisplay'];
} else {
  $all_getDisplay = mysql_query($query_getDisplay);
  $totalRows_getDisplay = mysql_num_rows($all_getDisplay);
}
$totalPages_getDisplay = ceil($totalRows_getDisplay/$maxRows_getDisplay)-1;

mysql_select_db($database_blog, $blog);
$query_getPosts = "SELECT post_id, title, updated FROM news ORDER BY updated DESC";
$getPosts = mysql_query($query_getPosts, $blog) or die(mysql_error());
$row_getPosts = mysql_fetch_assoc($getPosts);
$totalRows_getPosts = mysql_num_rows($getPosts);

$queryString_getDisplay = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_getDisplay") == false && 
        stristr($param, "totalRows_getDisplay") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_getDisplay = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_getDisplay = sprintf("&totalRows_getDisplay=%d%s", $totalRows_getDisplay, $queryString_getDisplay);

$queryString_getArchives = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_getArchives") == false && 
        stristr($param, "totalRows_getArchives") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_getArchives = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_getArchives = sprintf("&totalRows_getArchives=%d%s", $totalRows_getArchives, $queryString_getArchives);

$var1_getDisplay2 = "-1";
if (isset($_GET['archive'])) {
  $var1_getDisplay2 = $_GET['archive'];
  $query_getDisplay = sprintf("SELECT news.post_id, news.title, news.blog_entry, DATE_FORMAT(news.updated, '%%M %%e, %%Y'), news. AS formatted FROM news WHERE DATE_FORMAT(news.updated, '%%Y-%%m') = %s ORDER BY news.updated DESC", GetSQLValueString($var1_getDisplay2, "text"));
} elseif (isset($_GET['post_id'])) {
  $var2_getDisplay3 = $_GET['post_id'];
  $query_getDisplay = sprintf("SELECT news.post_id, news.title, news.blog_entry, DATE_FORMAT(news.updated, '%%M %%e, %%Y') AS formatted FROM news WHERE news.post_id = %s", GetSQLValueString($var2_getDisplay3, "int"));
} else {
  $query_getDisplay = "SELECT news.post_id, news.title, news.blog_entry, DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC LIMIT ".$pageNum_getDisplay.", 5";
}
$getDisplay = mysql_query($query_getDisplay, $blog) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);
$totalRows_getDisplay = mysql_num_rows($getDisplay);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:14:39.060

原来我只需要将一些代码移到这里：

```
 <form name="form" id="form">
      <select name="jumpMenu" id="jumpMenu" onChange="MM_jumpMenu('parent',this,0)">
        <option value="#">-- Select Archive Date --</option>
            <?php do { ?>
        <option value="archive.php?archive=<?php echo $row_getArchives['link']; ?>"><?php echo $row_getArchives['archive']; ?></option>
        <?php } while ($row_getArchives = mysql_fetch_assoc($getArchives)); ?>
      </select>
  </form> 
```

# windows-phone-7 - 如何在页面刷新期间保持属性的值？

> ID：14336620
> 
> 赞同：0
> 
> 时间：2013-01-15T11:20:04.713
> 
> 标签：windows-phone-7, windows-phone-8

我在 app.xaml 中创建了一个属性（公共静态列表 id {get set}）我可以向它添加数据（例如：App.id.Add(user.id)）。

这样我就可以从页面中获取添加的数据并将其用于任何导航页面（例如：App.id [3]）。

初始化是页面刷新数据回到 App.id[0] 时的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:41:16.037

或者，您可以在此处使用单例模式，这将确保创建列表并且仅存在一个实例。

在您的 App.cs 文件中写入以下内容：

```
 private static List<string> _id;

    public static List<string> id
    {
        get
        {
            if (_id == null)
                _id = new List<string>();

            return _id;
        }

        set
        {
            _id = value;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:16:31.547

是的，您可以从您应用中的所有页面访问 app.cs 中定义的公共属性。

在你的 App.cs

```
 public List<String> id = new List<string>();

    // Call this method somewhere so you create some data to use... 
    // eg in your App() contructor
    public void CreateData()
    {
        id.Add("ID1");
        id.Add("ID2");
        id.Add("ID3");
        id.Add("ID4");
        id.Add("ID5");
    } 
```

当您需要使用它时，您可以从例如获取数据。OnNavigateTo 事件处理程序

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    // Sets the data context for the page to have a list of strings
    this.DataContext = ((App)Application.Current).id;

   // Or you can index to the data directly
   var a = ((App)Application.Current).id[2];
} 
```

# c - FORTRAN 和 C 互操作性 - REAL(4) 可以太小吗？

> ID：14336623
> 
> 赞同：2
> 
> 时间：2013-01-15T11:20:10.537
> 
> 标签：c, interop, stack, fortran, stack-corruption

我们在一些英特尔 FORTRAN 代码中遇到了一些奇怪的崩溃，我最终追踪到：

```
L_F = EXP(-L_B2*L_BETASQ*L_DS) 
```

其中 -L_B2*L_BETASQ*L_DS 项评估为大约 -230。碰巧，EXP(-230) 的计算结果约为 1e-100。在所有其他已知情况下，L_DS 小得多，导致 EXP 的最小（已知）返回值约为 1e-50，这不会导致错误。

一旦 FORTRAN 计算子句 EXP(-230)，你就会得到：

```
forrtl: severe (157): Program Exception - access violation
Image              PC        Routine            Line      Source 
```

但没有其他信息。

异常 157 通常与互操作性有关，您无法在 FORTRAN 中调试 EXP，因为它找不到特定的 .c 文件——这可能意味着 EXP 是用 C 实现的（我觉得这很奇怪）。

我的假设是 FORTRAN 在 C 中实现了 EXP，但接口无法将小于 1e-100 的浮点数转换为 REAL(4)s。由于我之前认为浮点数和 REAL(4) 在字节方面是相同的，所以我无法支持这个假设——而且我在任何地方都找不到任何关于它的信息。

在我关闭这个错误之前，任何人都可以确认或否认我的假设 - 或者为我提供另一个假设吗？

此致，

麦克风

**编辑：** 我将把这个问题标记为已回答，因为高性能标记已经回答了直接问题。

不幸的是，我的假设是不正确的——我试图解决这个问题：

```
L_ARG = L_B2*L_BETASQ*L_DS

IF (L_ARG .GT. 230.0) THEN
    L_F = 0.0
ELSE
    L_F = EXP(-L_ARG)
ENDIF 
```

不幸的是，现在（显然）异常发生在 L_ARG .GT 中。230.0 条款。这要么意味着发布模式下的调试比我想象的要糟糕，要么是某种“存储”的浮点错误（[在将浮点数输入到字符串流时，请参阅“浮点无效操作”](https://stackoverflow.com/questions/10515051/floating-point-invalid-operation-when-inputting-float-to-a-stringstream)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:57:01.617

Fortran 没有（必然）在 C 中实现任何东西。标准内在函数的实现是特定于编译器的；通常会发现实现调用`libm`或其亲属之一。从英特尔（或任何其他编译器编写者）的角度来看，这是有道理的，`exp`用您喜欢的任何语言编写一个健壮且快速的实现，并从 Fortran、C、Ada、COBOL 以及您曾经使用过的所有其他语言中调用它听说。用 C 语言编写它甚至可能是明智的。因此，您的部分假设可能是正确的。

但是，除非您明确编写 C 代码和 Fortran 代码并从中生成单个二进制文件，否则实际上并没有任何互操作性（在 Fortran 标准意义上），所有这些肮脏的细节都对您隐藏（或应该隐藏）；编译器应该生成对它用来实现的任何库的正确调用，`exp`并获取返回值，无论它们可能包含`NaN`s 和类似内容。

当然， 的值`exp(-230)`是`0.00000000`4 字节实数，但我看不出为什么使用 C 编写的库的 Fortran 程序会因为遇到这些数字而引发访问冲突。我认为您的程序中的其他地方更有可能出现错误，可能试图访问数组边界之外的数组元素，并且您的运行时无法在源代码中的正确位置识别它。这并不少见。

**编辑**

*在（重新）阅读问题之前，我写了有关互操作性的内容。既然您已经澄清您正在使用互操作性功能，它可能会引起您的兴趣或使用...*

你当然不能依赖你的 Fortran`real(4)`和你的 C`float`是相同的。很有可能但不确定。大多数现代 Fortran 编译器（包括 Intel 编译器）使用与其表示形式中的字节数相匹配的种类类型参数，因此代码`4`表明您正在处理 4 字节实数，在符合 IEEE-754 的处理器上，应该是与 C 相同`float`。Fortran 标准不要求这些种类类型参数与用于表示数字的字节数之间存在任何对应关系。检查编译器文档或进行一些测试总是值得的。

如果您担心互操作性，您可能应该使用 Fortran 的内在特性。例如，如果你

```
use :: iso_c_binding 
```

您有许多可用的常量，包括`C_FLOAT`可以像这样使用的常量：

```
real(C_FLOAT) :: a_fortran_float 
```

如果您的 Fortran 编译器支持此功能，`a_fortran_float`则应匹配*配套处理器*上的 C 浮点数。最后一个术语有些不确定，实际上来自同一个稳定的编译器似乎总是伴随，因为不同的稳定有时是有时不是。英特尔 Fortran 和 C 和 C++ 编译器似乎是所需意义上的伴侣。得知英特尔 Fortran 和 MS C++ 编译器不能很好地协同工作，我不会感到惊讶。

我对 C 的模糊回忆包括`float`标准化的不确定性，在这种情况下，如果不测试或阅读文档，您无法确定您确实在该侧确实有一个 4 字节 IEEE 单精度浮点数您的互操作。

# authentication - 如何向现有 Shopify 应用安装程序添加范围

> ID：14336628
> 
> 赞同：0
> 
> 时间：2013-01-15T11:20:25.240
> 
> 标签：authentication, scope, shopify, public

我仅使用 Read Orders Scope 构建了 Shopify 公共应用程序，现在我才意识到我还必须向我的安装程序商店添加新资产。

我无法将新的“write_theme”范围添加到我的身份验证请求中，因为我从 Shopify 收到一条错误消息，指出范围无效。（可能我将不得不强制我的用户卸载该应用程序，然后使用新的范围身份验证请求再次安装它......

有没有办法为现有的应用安装程序商店添加新的范围？也许将我的应用用户发送到 Shopify 的新安装确认以授予新权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:35:31.403

好的，我刚刚解决了这个问题，

向现有用户授予新权限所需要做的就是删除存储在数据库中的 AuthToken，因为使用**AuthToken = ''**调用身份验证，这将需要用户再次授予对新权限的访问权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T15:46:14.520

听起来很简单 - 编写主题的权限是**write_themes**（复数）。

干杯!

# android - Android系统服务权限

> ID：14336630
> 
> 赞同：0
> 
> 时间：2013-01-15T11:20:47.303
> 
> 标签：android, linux, android-service, android-4.2-jelly-bean

我想使用教程[http://processors.wiki.ti.com/index.php/Android-Adding_SystemService](http://processors.wiki.ti.com/index.php/Android-Adding_SystemService)为 Android 应用程序开发系统服务。问题是创建的系统服务是否有权读取/写入 /dev/block/ 目录。

我在哪里可以获得有关系统服务的权限和权限的更多信息。

# php - 使用 echo 在数组中插入值

> ID：14336634
> 
> 赞同：-2
> 
> 时间：2013-01-15T11:21:19.720
> 
> 标签：php

```
<?php

echo '&nbsp;'.anchor('javascript:void(0);', '<img src="'.base_url().$this->config->item('FAL_assets_front').'/'.$this->config->item('FAL_images').'/pencil_min.png" alt="echo $this->lang->line(\'lbl_credits\');"  />', array('title' => '$this->lang->line(\'lbl_credits\')', 'onclick' => "CLBK_foo('".$id_encrypted."', ".($this->uri->segment(3) != '' ? $this->uri->segment(3) : 0).");return false;" ));

?> 
```

你好，我需要写入数组的标题值，但我找不到错误。也许alt也不正确？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:40:36.497

查看函数的标题方面，似乎您在 PHP 变量周围使用了单引号。只需删除它们就可以了。

例如改变这个

```
'title' => '$this->lang->line(\'lbl_credits\')' 
```

对此

```
'title' => $this->lang->line('lbl_credits') 
```

我不会声称其余的代码都可以工作，但这至少可以解决一个问题！

# c# - 使用 InputBindings 时如何避免多行 TextBox Enter 按键被吞掉？

> ID：14336635
> 
> 赞同：0
> 
> 时间：2013-01-15T11:21:20.657
> 
> 标签：c#, wpf, mvvm

我正在做 WPF MVVM 并具有以下 XAML 代码：

```
<TextBox Grid.Row="1" Name="Console" MinWidth="500" HorizontalAlignment="Stretch" AcceptsReturn="True" CharacterCasing="Upper" TextWrapping="WrapWithOverflow" Cursor="IBeam">
  <TextBox.InputBindings>
    <KeyBinding Command="{Binding Path=MyCommand}" CommandParameter="{Binding Text, ElementName=Console}" Key="Enter"/>
  </TextBox.InputBindings>
</TextBox> 
```

在 ViewModel 的 command 属性中处理 Enter 按下时（在构造函数中初始化并添加了事件处理程序）：

```
private readonly MyCommand myCommand;
public ICommand MyCommand
{
  get
  {
    return myCommand;
  }
}

private void OnCommand(object sender, MyCommandEventArgs e)
{
  <do something>
} 
```

事件处理程序被调用了，但是 Enter 按键永远不会传递回 TextBox 并且不会添加换行符（光标停留在同一行上）。

事件冒泡不能确保 Enter 按键被传递到 TextBox 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:47:56.280

您可以将“\n”添加到您的文本框的文本值吗？

（会添加它作为评论，但我可能还没有这样做......）

# php - 尝试在 magento 中创建新产品类型，出现致命错误

> ID：14336636
> 
> 赞同：0
> 
> 时间：2013-01-15T11:21:25.057
> 
> 标签：php, xml, magento

我正在尝试在 magento 中创建新产品类型，它显示在管理面板中创建新产品页面的产品类型选项，但是当我选择它并继续时，出现致命错误：

> 致命错误：在第 82 行的 /home/shop/public_html/shop/app/code/core/Mage/Catalog/Model/Product/Type.php 中的非对象上调用成员函数 setConfig()

第 82 行是：

```
$typeModel->setConfig($types[$typeId]); 
```

模块配置文件（app/code/local/Pood/Toodep6hi/etc/config.xml）：

```
<?xml version="1.0"?>
    <config>

        <modules>
            <Pood_Toodep6hi>
                <version>0.1.0</version>
            </Pood_Toodep6hi>
        </modules>
        <adminhtml>
            <translate>
                <modules>
                    <Pood_Toodep6hi>
                    <files>
                        <default>Pood_Toodep6hi.csv</default>
                    </files>
                    </Pood_Toodep6hi>
                </modules>
            </translate>
        </adminhtml>

        <global>

            <models>
                <Toodep6hi>
                    <class>Pood_Toodep6hi_Model</class>
                </Toodep6hi>
            </models>

            <catalog>
                <product>
                    <type>
                        <p6hitoode translate="label" module="Toodep6hi">
                            <label>Pohitoode</label>
                            <model>Toodep6hi/Product_Type_P6hitoode</model>
                            <price_model>Toodep6hi/Product_Price</price_model>
                            <index_data_retreiver>Toodep6hi/catalogIndex_Data_P6hitoode</index_data_retreiver>
                            <is_qty>1</is_qty>
                        </p6hitoode>
                    </type>
                </product>
            </catalog>

            <helpers>
                <Toodep6hi>
                    <class>Pood_Toodep6hi_Helper</class>
                </Toodep6hi>
            </helpers>
        </global>
    </config> 
```

app/code/local/Pood/Model/Product/Type/P6hitoode.php：

```
<?php
class Pood_Toodep6hi_Model_Product_Type_P6hitoode extends Mage_Catalog_Model_Toodep6hi_Type_Abstract
{
        const TYPE_P6HITOODE = "p6hitoode";
    public function isVirtual()
    {
        return true;
    }
} 
```

我发现了一个类似的问题： http: [//www.magentocommerce.com/boards/viewthread/196886/#t248371](http://www.magentocommerce.com/boards/viewthread/196886/#t248371)，但没有帮助。

每一点帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T04:52:09.903

问题是区分大小写的

```
<model>Toodep6hi/product_type_p6hitoode</model> 
```

它应该是

```
<model>toodep6hi/product_type_p6hitoode</model> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:51:13.390

尝试从 Mage_Catalog_Model_Product_Type_Virtual 扩展 Mage_Catalog_Model_Toodep6hi_Type_Abstract

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:14:43.753

在这里使用小写：

```
<model>Toodep6hi/Product_Type_P6hitoode</model> 
```

所以它将是：

```
<model>Toodep6hi/product_type_p6hitoode</model> 
```

如果没有帮助，请尝试对模型使用小写：

```
<models>
    <toodep6hi>
        <class>Pood_Toodep6hi_Model</class>
    </toodep6hi>
</models> 
```

然后在这里小写

```
<model>toodep6hi/product_type_p6hitoode</model> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T00:24:26.577

尝试这个

```
 <type>
                    <p6hitoode translate="label" module="Toodep6hi">
                        <label>Pohitoode</label>
                        <model>Toodep6hi/product_type_p6hitoode</model>
                        <price_model>Toodep6hi/product_price</price_model>
                        <index_data_retreiver>Toodep6hi/catalogIndex_data_p6hitoode</index_data_retreiver>
                        <is_qty>1</is_qty>
                    </p6hitoode>
                </type> 
```

# javascript - 如何让 PhantomJS 在渲染截图时包含背景图片？

> ID：14336637
> 
> 赞同：9
> 
> 时间：2013-01-15T11:21:29.250
> 
> 标签：javascript, phantomjs, headless, headless-browser

我正在使用 PhantomJS 截取网页截图，使用[https://github.com/ariya/phantomjs/wiki/Screen-Capture](https://github.com/ariya/phantomjs/wiki/Screen-Capture)中详述的 page.render() 方法。

它工作正常，除了背景图像，~~全部~~有时会出现空白。如果您转到[http://screener.brachium-system.net/](http://screener.brachium-system.net/)并输入[http://www.bing.com/](http://www.bing.com/)作为 URL，您可以看到问题的示例，背景图像应该有一个很大的空白区域是。

有没有办法强制显示背景图像？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-17T13:43:00.580

使用 Phantom 示例中的默认[rasterize.js](http://github.com/ariya/phantomjs/blob/master/examples/rasterize.js)对我来说效果很好：

如果问题仍然存在，请尝试增加页面加载和呈现之间的延迟，将其设置为 200 毫秒（示例代码中的第 29 行）：

```
page.open(address, function (status) {
    /* irrelevant */
   window.setTimeout(function () {
            page.render(output);
            phantom.exit();
        }, 200);
} 
```

为了更好地理解它为什么会有所帮助：Phantom 请求页面并在页面完全加载后立即将其呈现为图像（所有资源都已到位并执行脚本）。但是背景图片是通过 JavaScript 加载的，浏览器无法提前知道会有更多的图片请求。在页面加载和截屏之间设置更长的延迟时间可以下载和显示可能从脚本请求的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T09:03:41.277

我遇到了类似的问题，发现在我的情况下使用[pages.onLoadFinished()有效：](http://phantomjs.org/api/webpage/handler/on-load-finished.html)

```
// create a page instance
var page = require('webpage').create();
page.viewportSize = {
    width: 800,
    height: 600
};

// create some HTML code with an image in the background
style = 'background:url(file:///var/www/test.svg) no-repeat;';
style += 'background-size: contain;';
style += 'width: 100%; height: 100%;';
page.content = '<html><body style="' + style + '"></body></html>';

// onLoadFinished() will be called when the page finishes the loading
var outImage = '/var/www/test.png';
page.onLoadFinished = function() {
        page.render(outImage);
        phantom.exit();
}; 
```

# javascript - 一种在 iOS（iPhone、iPad）上跳过崩溃的方法

> ID：14336640
> 
> 赞同：0
> 
> 时间：2013-01-15T11:21:46.490
> 
> 标签：javascript, ios, uiwebview

这可能是一个新手问题，但仍然如此。

我正在开发适用于 iPhone 和 iPad 的 iOS 6 应用程序，并且正在开发混合应用程序 Javascript\UIWebView + Objective C

问题是我在私有框架中有一个内部异常。**此异常是由 Javascript\UIWebView 中的某些内容引起的**。而且我不知道是什么 Javascript 代码导致了异常。

所以我不想这样做：

1）不知何故“跳过\浅”崩溃

2) 使用远程 Safari 调试器，从应用程序中获取一些信息

所以我的问题是，有没有办法“跳过\浅”崩溃，让我的应用程序至少工作几秒钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:33:26.933

我认为你处理这个问题的唯一机会是在你的 javascript 中放置日志跟踪，这样你就可以追踪崩溃发生的位置。

为此，您可能会发现[这篇 SO 帖子很有用，它展示了如何让 JS 登录到 Xcode 控制台。](https://stackoverflow.com/questions/6508313/javascript-console-log-in-an-ios-uiwebview)

# java - 在 Java 中创建 Properties 对象

> ID：14336646
> 
> 赞同：-5
> 
> 时间：2013-01-15T11:22:09.883
> 
> 标签：java

如果我们创建一个像这样的属性：

```
Properties properties = new Properties();
properties.put("[%1]", "username");
properties.put("[%2]", "password"); 
```

然后添加什么作为属性中的键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:23:38.913

[java.util.Properties](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)从[java.util.HashTable](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html)继承**put 方法**，因此您的密钥将是并且在您的情况下。`"[%1]"``"[%2]"`

[哈希表.put()](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html#put%28K,%20V%29)

```
public V put(K key,
    V value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:24:00.480

```
properties.put(<key>, <value>); 
```

这是你想知道的。

`Properties`是 的子类`Hashtable`，它表示一组持久的属性。

`Properties#put`方法继承自超类`HashTable`。

# php - 带有前缀和后缀的正则表达式电子邮件文本

> ID：14336649
> 
> 赞同：1
> 
> 时间：2013-01-15T11:22:15.017
> 
> 标签：php, regex, email, prefix

我有两种 html/text 案例：

1.  `My email is username@domen.com`
2.  `My email is <a href="mailto:username@domen.com">username@domen.com</a>`

此外，我的功能是搜索电子邮件链接，并用`<a href="email@address">email@address</a>`模式替换它们，它可以工作。但是，如果文本已经包含电子邮件链接怎么办。我也不想匹配它们。

```
function make_email_links($text)
{
  return  preg_replace(
     array('/(([_A-Za-z0-9-]+)(\\.[_A-Za-z0-9-]+)*@([A-Za-z0-9-]+)
       (\\.[A-Za-z0-9-]+)*)/iex'
       ),
     array( 
       "stripslashes((strlen('\\2')>0?'<a href=\"mailto:\\0\">\\0</a>':'\\0'))" 
       ),
       $text
   );
} 
```

我试过了

```
'/((^<a) .......... )/iex' 
```

但它没有成功。如何仅匹配文本等电子邮件链接而不匹配真实的电子邮件链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:40:15.687

你应该试试这个：

```
$formattedTest = preg_replace("#(^|[\n ])([a-z0-9&\-_\.]+?)@([\w\-]+\.([\w\-\.]+\.)*[\w]+)#i", "\\1<a href=\"mailto:\\2@\\3\">\\2@\\3</a>", $text); 
```

我用的是旧的（这行不通！）：

```
$formattedTest = preg_replace('/([\w\.!#\$%\-+.]+@[A-Za-z0-9\-]+(\.[A-Za-z0-9\-]+)+)/', '<a href="mailto:\\1">\\1</a>', $text); 
```

但正如你所说，即使它已经在标签内，它也会复制我的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:52:54.857

怎么样：

```
if (strstr($text, "<a href") !==false)
   return $text 
```

在你做 preg_replace 之前？（甚至是更节省的正则表达式）。不要浪费时间试图将所有东西都变成“一个”大模式。请记住：源代码的阅读次数多于编写次数。

# ssis - SSIS改变变量范围

> ID：14336651
> 
> 赞同：5
> 
> 时间：2013-01-15T11:22:18.880
> 
> 标签：ssis

如何创建具有范围的变量？它只是给了我一个我不想要的默认值，我不确定如何更改。这应该很简单，谷歌搜索让我相信这是一个很常见的问题，但没有简单的解决方案。

imgur：http: [//imgur.com/uxlRf](http://imgur.com/uxlRf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T20:22:11.600

单击新变量按钮，添加变量名称，然后单击添加变量旁边的移动变量按钮。并从那里选择 Executable ，您要为其设置范围。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:52:45.353

注意：变量的范围是根据您在单击新变量按钮之前所关注的容器设置的。虽然 BIDS Helper 可以帮助您非常轻松地更改变量的范围，但这是 BIDS Helper 在变量窗格顶部提供的第 6 个按钮。

找到了上面的答案，不是很有帮助的做事方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-15T17:57:13.930

正如有人指出的那样，这在 2012 年发生了变化。我只是对此有所了解，并注意到 2012 年的文档没有得到更新。它仍然说变量的范围仅限于您选择的不正确的内容。但是当您在变量窗口中时，请注意顶部左侧的第二个图标 - 这是“移动变量”按钮，它非常好地允许您移动所选变量的范围。BiXpress 也有类似的功能，但它的错误在于它不会拾取 OnPostExecute 范围，这使得它们的版本非常有限。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-26T11:33:52.343

我们可以在 2008 BIDS.PFB 中更改变量的范围，就像我将变量的范围从包级别更改为任务/容器级别所做的步骤一样。

1）右键单击解决方案资源管理器中的 package.dtsx 文件，然后单击“查看代码”

2）搜索要更改范围的变量。复制与该变量相关的 XML 代码。

3）搜索您要使用此变量的控件，并在完成任何标记后复制 xml 代码（许多标记与任务/容器相关）。

4）删除原始复制代码。

5）保存这个文件

6）打开包，变量的范围会被改变

我不确定它是否会影响包裹，但它对我有用。

如果有人知道，请告诉我它是否会影响包裹

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T14:37:36.940

好吧，这就是 BIDS 的设计方式。您在要在其上创建变量的控制流元素上创建。如果要在包级别创建变量，请单击控制流窗格上的空白区域。这是使用 BIDS 为变量分配范围的唯一方法。Havent 查看了 BIDS Helper，但 BIDS 本身有足够的能力做这些事情。

# jquery - jQuery调用函数通过事件改变输入

> ID：14336652
> 
> 赞同：0
> 
> 时间：2013-01-15T11:22:19.983
> 
> 标签：jquery, html

我有一个加载外部 js 的页面，并且在页面上我有一个函数`called calculate_totals()`。我想要的是`calculate_totals()`从外部js中的函数调用函数。

这是一段加载到外部 js 中的 JavaScript

```
function selectItemMouse(thisVar)
{   
    var searchValue = thisVar.attr('data-name');
    thisVar.parent().parent().parent().parent().children('.list').val(searchValue);

    //alert(thisVar.parent().parent().parent().parent().next().find('input').focus());

    thisVar.children().children().each(function()
    {
        var dataId = $(this).attr('data-id');
        var value = $(this).attr('data-name');

        //This change the input of my form
        $(thisVar).parent().parent().parent().parent().children().children('.'+dataId).val(value);
    });

    $('.customerResults').hide();
    calculate_totals();     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:29:16.100

您可以在输入上放置一个监听器以进行更改：

```
$(document).ready(function(){
    $('#input').change(function(){
        alert("alert here");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:08:08.660

基于评论会话：calculate_totals 在内部定义`$(document).ready(function(){});`

因为那是在外面看不到的。基本上，它仅在内部可见 `$(document).ready(function(){});`。把它移到外面就行了。现在它将成为全球性的并且在任何地方都可见。

代替

```
$(document).ready(function(){
   function calculate_totals() {} // this function is visible inside of a ready function only
  ///..... other code here
}); 
```

采用：

```
function calculate_totals() {} // now it is a part of global context
$(document).ready(function(){
  ///..... other code here   
}); 
```

之后，您应该可以在 selectItemMouse 和任何其他地方使用它。

此外，我会考虑更新您的代码。

```
thisVar.parent().parent().parent().parent().children('.list').val(searchValue); 
```

这种链的使用不灵活。只是您将 thisVar 元素与其他一些元素包装在一起 - 您将需要更新您的 JS 代码。

看看[`.parents`](http://api.jquery.com/parents/)或[`.closest`](http://api.jquery.com/closest/)。例如，您可以像这样更改上面的一行：

```
thisVar.closest(".class_common_parent").children('.list').val(searchValue); 
```

`.class_common_parent`您使用的元素类在哪里`parent().parent().parent().parent().`

# exception - 这个 asm 代码如何设置 SEH？

> ID：14336656
> 
> 赞同：4
> 
> 时间：2013-01-15T11:22:42.353
> 
> 标签：exception, assembly, x86, masm, seh

[我从互联网](http://www.winasm.net/forum/index.php?showtopic=2082)上获取了一些代码，这些代码应该用 SEH 处理异常，

```
 ASSUME FS:NOTHING
  PUSH  OFFSET Handler
  PUSH  FS:[0]
  MOV  FS:[0], ESP
  ... 
```

但是`FS:[0]`应该持有处理程序的地址，对吗？

所以`mov fs:[0], esp`是错误的，因为`esp`当前指向原始`fs:[0]`：

堆栈是这样的：

```
-----------
| fs:[0]  |  <-- ESP
-----------
| handler |
----------- 
```

那么，不应该是`esp + 4`这样的东西吗？我显然错了，但我不明白为什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T11:36:14.270

`[fs:0]`指向异常处理程序链表中的最后一个元素。

每个元素包含两件事：

1.  下一个/上一个元素的地址
2.  处理程序/函数的地址

您提供的代码创建了另一个元素，将其链接到当前/最后一个元素，并使新元素成为当前/最后一个元素。

查看 Matt Pietrek 关于 SEH 的文章。那里更详细地描述了这些东西。

# javascript - 脚本尖锐 # 与网络工作者

> ID：14336657
> 
> 赞同：0
> 
> 时间：2013-01-15T11:22:42.667
> 
> 标签：javascript, web-worker, script#

如何使用 Script sharp 中的网络工作者？

网络工作者需要一个源文件，它不会在 Script sharp 中编译，因为它不是一个类，它只是代码。

想法？尼克希尔克？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:56:28.740

在 github 上的最新内容中，您可以仅使用静态 ctor 创建一个内部静态类，并将该类标记为 [ScriptModule] - 它会生成顶级代码。将此视为任何特定脚本文件的 main() 。

希望有帮助。

# c++ - c++中的strcpy_s

> ID：14336659
> 
> 赞同：2
> 
> 时间：2013-01-15T11:22:45.070
> 
> 标签：c++, visual-c++

我是 C++ 新手。我正在编写以下简单代码。我想将字符 [40] 传递给一个函数，然后得到与输出相同的结果。如果我在以下点进行调试。strcpy_s(x,100,tester);

但如果我写“这是在输出端发送的”，它只需要“这个”。谁能指出我错过了什么以及只接受几个字符的原因。

```
// BUSTesting.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <iostream>
#include "resource.h"

int testFunction(char* tester);
int _tmain()
{

    char m[40];
    std::cin>>m;
    testFunction(m);
}
int testFunction(char* tester)
{

    char x[100] ;
    memset(x,100,sizeof(x));
    strcpy_s(x,100,tester);
    std::cout<<x;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T11:26:17.517

[`operator>>`](http://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt)将在第一个空白字符处停止使用输入。另一种方法是用于[`cin.getline()`](http://en.cppreference.com/w/cpp/io/basic_istream/getline)防止由于空格而处理输入。

注意初始化数组并避免`memset()`：

```
char x[100] = ""; 
```

推荐[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)并[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)避免指定从输入流中读取的最大字符数（避免固定大小数组的潜在缓冲区溢出问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:28:53.473

改变这个：`std::cin >> m;`到这个`cin.getline(m, 39);`

`cin >> x`当输入中有空格（空格，制表符，...）时，直到结束行才会获得所有行字符。

*由于您使用的是 C++，因此最好使用`std::string`类而不是旧的 C 样式字符串。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T11:24:57.560

`std::cin>>m`由于某种原因，可能会在空格上断开字符串。使用调试器中断并检查`m`'s 的内容。如果只是`this`，你就发现了问题。

# facebook - FQL 选择收件人。长度 = 2

> ID：14336661
> 
> 赞同：1
> 
> 时间：2013-01-15T11:22:50.257
> 
> 标签：facebook, facebook-graph-api, select, facebook-fql

我正在搜索并没有解决这个问题......我正在尝试通过 FQL 选择与 2 个用户进行对话的收件人，例如：

```
SELECT recipients, folder_id FROM thread WHERE folder_id = 0  and ({MeId} in recipients) and ({FriendId} in recipients) and recipients.Length = 2

SELECT recipients, folder_id FROM thread WHERE folder_id = 0  and ({MeId} in recipients) and ({FriendId} in recipients) and recipients.Count = 2 
```

但是即使有超过 2 人，我也总是会回复与用户的所有对话线程

也许计数或长度不正确，简单的错误？没有错误，但结果不是我怀疑的......希望有人能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:16:30.570

FQL 没有本机`count`或`length`方法。唯一的方法是返回所有结果并过滤掉脚本中不需要的结果。

# php - 语法错误：缺少；在javascript循环中连接之前的语句

> ID：14336663
> 
> 赞同：0
> 
> 时间：2013-01-15T11:22:57.153
> 
> 标签：php, javascript, jquery

我像这样在php中使用了联系人

```
$location_space     = '';
$location_formation = '';

foreach($location as $formation) {
    $location_formation .= $formation.', ';
    $location_space     .= $formation.'<br />';
} 
```

当我想将其更改为 javascript 时：

```
var location_space      = '';
var location_formation  = '';

for (i = 0; i < new_location.length; i++) {
    var location_space      += new_location[i] + ', ';
    var location_formation  += new_location[i] + '<br />';
} 
```

它向我显示了这个错误

> 错误：语法错误：缺失；before 语句
> Line: 311, Column: 32
> Source Code: var location_space += new_location[i] + ', ';

那么有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:26:04.253

您已经定义了`location_space`and `location_formation`，因此您只需为它们分配一个值，而不是在`for()`循环内重新声明它们：

```
var location_space      = '';
var location_formation  = '';

for (var i = 0; i < new_location.length; i++) 
{
    location_space      += new_location[i] + ', ';
    location_formation  += new_location[i] + '<br />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:28:15.177

尝试替换为：

```
var location_space      = '';
var location_formation  = '';

for(i=0; i<new_location.length; i++) {
    location_space      += new_location[i] + ', ';
    location_formation  += new_location[i] + '<br />';
} 
```

您正在尝试再次声明 location_space 和 location_formation 并像在“+=”之前声明的那样使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:25:04.643

您已经在 for 循环之前声明了变量，因此如果您`var`从循环内部删除 s，则字符串连接应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:25:07.017

您不应该再次在 for 中定义`location_space`and `location_formation`。
将您的代码更改为：

```
 var location_space      = '';
 var location_formation  = '';
 for(var i = 0; i < new_location.length; i++)
 {
     location_space      += new_location[i] + ', ';
     location_formation  += new_location[i] + '<br />';
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T11:26:36.263

将其更改为：

```
for (i = 0; i < new_location.length; i++) {
    location_space      += new_location[i] + ', ';
    location_formation  += new_location[i] + '<br />';
} 
```

并尝试

# php - 带有加载更多按钮的 Jquery 选项卡

> ID：14336665
> 
> 赞同：0
> 
> 时间：2013-01-15T11:23:09.840
> 
> 标签：php, javascript, jquery, ajax

嗨，是否有任何关于在每个选项卡中加载更多功能的 php ajax 选项卡的参考/示例？假设我们有 2 个选项卡，当我们单击每个选项卡时，它将仅显示选定数量的结果，直到我们单击每个结果末尾的加载更多按钮。谢谢。我当前的代码似乎效果不佳，当我单击每个选项卡时，它会正确显示结果，但是当我再次单击选项卡时，它会加载更多数据。以下是我当前的代码：

```
<li data-tab-id="self" class="tab selected"><a href="#">Near You</a><span class="unread-count hidden" style="display: none;"></span></li>

<li data-section-id="user_feed" data-component-bound="true">
    <ul class="module-list">                            
    <!-- USER ACTIVITY JSON -->
    </ul>
    <a class="ybtn ybtn-primary ybtn-large more-wishlist" href="#" onclick="getRecentActivityClick(event)">
    <span data-component-bound="true" class="loading-msg user_feed">See more recent activity</span>
    </a>
</li>

<script type="text/javascript">
var totalRecords = '<?= $this->totalRecords?>';
$(document).ready(function(){
getRecentActivity(totalRecords);
});

$(".hd-ui-activity li a").click(function(e) {
e.preventDefault();
var tabid = $(this).parent().attr('data-tab-id');
if(tabid == "self"){
        getRecentActivity(totalRecords);

    }
});

function getRecentActivityClick(event)
{
    if (event != null){
            disabledEventPreventDefault(event);
        }
        getRecentActivity(totalRecords);
} 
```

主页.js：

```
function getRecentActivity(totalRecords)
{
$.ajax({
        url:baseUrl + "activity/activityfeed",
        data:{'total':totalRecordsView},
        dataType:"json",
        type:"POST",
        success:function(data){

 var activityHtml = '<p>Hello</p>';
$('#activity-feed li[data-section-id=near_you] .module-list').append(activityHtml);

}
});

} 
```

更新：JSFIDDLE：http: [//jsfiddle.net/zlippr/5YkWw/1/](http://jsfiddle.net/zlippr/5YkWw/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:28:24.050

我从你的问题中了解到..我认为你得到了更多的数据，因为你正在使用.. `append()`..使用`html()`

> append() 将参数指定的内容插入到匹配元素集中每个元素的末尾。
> 
> html() 用于设置元素的内容，该元素中的任何内容都会被新内容完全替换。

尝试这个

代替

```
$('#activity-feed li[data-section-id=near_you] .module-list').append(activityHtml); 
```

和

```
$('#activity-feed li[data-section-id=near_you] .module-list').html(activityHtml); //html() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:54:38.047

你可以这样做：

```
 $('#activity-feed li[data-section-id=near_you] .module-list').append(activityHtml);
 // here you are appending the fulldata just apply some css here 
```

以这种方式使用 css：

```
$('#activity-feed li[data-section-id=near_you] .module-list')
    .css({'height':'300px','overflow':'hidden'})
    .append(activityHtml); 
```

然后点击加载更多：

```
$('your load more button').toggle(function(){
   $('#activity-feed li[data-section-id=near_you] .module-list')
    .css({'height':'auto','overflow':'auto'})
    },function(){
   $('#activity-feed li[data-section-id=near_you] .module-list')
    .css({'height':'300px','overflow':'hidden'});
}); 
```

# objective-c - 从 Xib 加载时设置单元所有者

> ID：14336666
> 
> 赞同：0
> 
> 时间：2013-01-15T11:23:13.533
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview

我创建了一个名为的自定义表格视图单元格类`CustomCell`，它继承自`UITableViewCell`.

我还为名为`CustomCell.xib`. 在 xib 文件中，我将自定义类指定为`CustomCell`，并将文件的所有者设置为`CustomCell`类。

现在，我已经连接了一些`touchUpInside`要在文件所有者中处理的按钮，即`CustomCell`.

我在表格视图控制器中使用以下代码加载单元格：

```
NSArray *topLevelObjects = [[NSBundle mainBundle] 
  loadNibNamed:@"CustomCell" owner:nil options:nil];

cell = [topLevelObjects objectAtIndex: 0]; 
```

如您所见，加载的单元格没有所有者（`owner:nil`参数），问题是我需要将所有者设置为单元格本身。

如何`cell`明确设置所有者？

是否有其他方法可以加载 xib 并使该单元实例成为其自身的所有者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:25:59.097

如果您的单元格和按钮都在同一个笔尖中，您可以在笔尖内建立它们之间的连接。

“文件的所有者”代理只是用来帮助您连接到不在 nib 中的对象。“文件的所有者”只是运行时此笔尖所有者的代理。

但是由于您希望连接的两个对象都已经在笔尖内，您可以直接进行连接。

# c# - 为什么匿名类型在 C# 中是不可变的？

> ID：14336669
> 
> 赞同：5
> 
> 时间：2013-01-15T11:23:23.163
> 
> 标签：c#, .net, immutability, anonymous-types

> **可能重复：**
> [为什么 C# 中匿名类型的属性是只读的？](https://stackoverflow.com/questions/1089406/why-are-the-properties-of-anonymous-types-in-c-sharp-read-only)

我写了这样的东西，

```
 var suspense = new { Name = "Android", Market = string.Empty };
 suspense.Market = "Potential"; 
```

**.NET 抛出错误**

> 无法将属性或索引器“AnonymousType#1.Market”分配给 - 它是只读的

我知道 C# 中的 AnonymousTypes 是不可变的，但为什么呢？这是由于 CLR 的一些限制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:28:03.107

驱动不可变匿名类型的动机是**因为 LINQ API 在内部使用哈希表，并且返回可以修改的匿名类型的投影是一种危险的情况。**

您可以检查：

[不可变类型：了解它们的好处并使用它们](http://codebetter.com/patricksmacchia/2008/01/13/immutable-types-understand-them-and-use-them/)

[**匿名类型和对象身份作者 Tim Ng 在 MSDN 上**](http://blogs.msdn.com/b/timng/archive/2007/05/28/anonymous-types-and-object-identities.aspx)

# apache - Drupal 7：sites/default/files 目录中的文件权限和 IMCE 问题

> ID：14336671
> 
> 赞同：0
> 
> 时间：2013-01-15T11:23:38.327
> 
> 标签：apache, drupal, file-permissions

我在 Drupal 论坛和其他地方看了很多，但我还不能解决这个问题。

我不得不将一个功能齐全的大型站点（Drupal 7.18）重新安装到新服务器上。这进展非常顺利。但是，我似乎无法为我的站点/默认/文件目录设置权限，以使其在使用 IMCE 文件浏览器浏览时保持可访问性和安全性。

*   通常我将站点/默认/文件（以及其中的子目录）设置为 755，这些目录中的文件设置为 664。这在我构建的许多其他 Drupal 7 站点上运行良好。
*   但是在这种情况下，使用这些权限，我会收到消息“无法获取文件浏览器的工作目录”。

只有通过将目录权限设置为 777，我才能使用 IMCE 浏览这些目录中的文件——而且我知道这对于共享主机来说是非常糟糕的做法。

请问有人可以建议解决这个问题吗？我已经花了几个小时，但我无处可去。

我想知道文件和目录本身的所有权是否错误。如果他们错了，谁能指导我一步一步地改变他们？

*   使用 FireFTP 检查“问题”文件和目录，我发现用户名和组名都与我的网络主机给我的 FTP 用户名相同。
*   查看另一个正常工作的 Drupal 站点，我看到站点/默认/文件中的文件和目录设置为用户 531/组 528。

感谢期待！我在启用扩展的 PHP 5.2.10 上运行 D7.18。其他一切似乎确实运作良好。但是，我不确定我是否具备解决此问题所需的 Apache 或 Linux 技能，甚至无法向我的主机询问正确的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:31:19.970

755基本上意味着只有文件的所有者可以修改它们，因此您可以尝试将目录权限更改为775，以便所有者和组可以修改。

如果您使用共享主机，我建议您向您的主机提供商寻求帮助，因为他们将更好地了解服务器上的用户和组。

干杯

# iphone - 如何在视图背景中移动图像？

> ID：14336676
> 
> 赞同：0
> 
> 时间：2013-01-15T11:23:51.567
> 
> 标签：iphone, ios, image, uiimageview

我的应用程序有问题，我有一个动态图像，它可以正常工作。但是我的图像也在一个按钮上移动，当图像在按钮之前时我无法点击。我如何确保图像在我的视图背景上移动，以便我仍然可以按下按钮。

我的图像也可以正常工作，但是当我测试应用程序时，图像有时会超出视图，我该如何防止这种情况发生？

这是运动图像的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [[self navigationController] setNavigationBarHidden:YES animated:YES];
    [self loadImage];
    image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"cow.png"]];
    image.frame =self.view.bounds;
    [[self view] addSubview:image];

    [NSTimer scheduledTimerWithTimeInterval: 3
                                     target: self
                                   selector:@selector(moveImage:)
                                   userInfo: nil repeats:YES];

}

-(void) moveImage: (NSTimer*)timer {

    CGFloat x = (CGFloat) (arc4random() % (int) self.view.bounds.size.width);
    CGFloat y = (CGFloat) (arc4random() % (int) self.view.bounds.size.height);
CGPoint pointOne=CGPointMake(x,y);
    image.center=pointOne;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:26:34.837

`viewDidLoad`在之后添加此代码`[[self view] addSubview:image];`

```
[self.view sendSubviewToBack:image]; //Send image to back 
```

或者

```
[self.view bringSubviewToFront:button]; //Bring button to front 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:27:22.697

将您的按钮视图放在前面。

```
[self.view bringSubViewToFront:button.view]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:31:16.910

使用这些方法中的任何一种来管理视图的层次结构

```
[self.view insertSubView:atIndex:];
[self.view insertSubView:belowView:];
[self.view insertSubView:aboveView:];
[self.view带来SubViewToFont：]；
[self.view sendSubviewToBack:];

```

# file - Fortran - 使用格式从同一文件写入和读取

> ID：14336678
> 
> 赞同：2
> 
> 时间：2013-01-15T11:23:58.437
> 
> 标签：file, format, fortran

该程序非常愚蠢，但这只是一个测试，以了解如何在 Fortran 中读取文件。我写了下面的例子：

```
program manipolazione
implicit none 
integer, parameter :: codice = 10
integer, parameter :: massimo = 20
integer :: numero, quadrato
integer :: error, errore_lettura
integer :: indice

010 format (1x, 'Il quadrato di ', I0, 1x, 'e'' ', I0)   
020 format(1x, A) ! scrive generico messaggio
030 format(1x, A, 1x, I0) ! scrive errori con loro codice
open (unit = codice, File = "test.txt", iostat = error, status = 'replace', action = 'write')
controllo_apertura : if (error == 0) then 
    write(*, 020) "Comincio a scrivere sul file...\n"
    contatore : do indice = 1, massimo, 1
        numero = indice
        quadrato = numero ** 2
        write(codice, 010) numero, quadrato
    end do contatore
else controllo_apertura
    write(*,020) "Non siamo riusciti ad aprire il file..."
end if controllo_apertura
close(codice)

open (unit = codice, File = "test.txt", iostat = error, status = 'old', action = 'read')
controllo_apertura1 : if (error == 0) then
    write(*,020)"Comincia la lettura dei valori!\n"
    counter : do indice = 1, massimo, 1
        read(codice, 010, iostat=errore_lettura) numero, quadrato ! THAT'S THE PROBLEM
        errorelettura : if (errore_lettura > 0) then 
            write(*,030) "Abbiamo avuto un problema serio, ho letto male, error:",errore_lettura
        else errorelettura
            write(*, 010) numero, quadrato
        end if errorelettura
    end do counter
else controllo_apertura1
    write(*,020) "Non siamo riusciti ad aprire il file..."
end if controllo_apertura1
read(*,*)
end program manipolazione 
```

我想读一下我刚刚写的东西，然后打印回来。简而言之，以某种**格式**写入，然后读取这些值。通过阅读代码，您肯定会明白。我真的不知道在第 29 行该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:31:02.120

您似乎正在使用此格式声明

```
010 format (1x, 'Il quadrato di ', I0, 1x, 'e'' ', I0) 
```

在这个写声明上

```
read(codice, 010, iostat=errore_lettura) numero, quadrato ! THAT'S THE PROBLEM 
```

您的问题源于尝试使用包含*字符串编辑描述符*的格式语句。最新标准说明这些对输入无效；我希望早期的标准也将它们排除在外。它们在编写时非常有意义，但很难看出您希望如何在读取语句中解释它们。我会尝试

```
011 format (2I0)
...
read(codice, 011, iostat=errore_lettura) numero, quadrato 
```

看看会发生什么

# java - 如何在for循环中正确格式化

> ID：14336683
> 
> 赞同：-6
> 
> 时间：2013-01-15T11:24:24.570
> 
> 标签：java, loops, text, for-loop, format

我有一个循环问题。它像这样格式化文本：

```
cat
 cats
  blablabla
   end 
```

而不是这个：

```
cat
   cats
       blablablabla 
```

如屏幕截图所示，在每一行上，我想添加一些空格，这些空格等于前面所有行的单词长度。

```
 int length=i+1
        int j;

        for(i=0; i<length; i++){    
            for(j=0; j<i; j++)
              System.out.print(" ");
                  System.out.print(words[i]);
                  System.out.println();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:40:36.950

简单的任务：

```
 String[] words = {"cat", "cats", "test"};
    int leftPaddding = 0;
    for(int i = 0; i < words.length; i++){
        for(int j = 0; j < leftPaddding; j++) {
            System.out.print(" ");
        }
        leftPaddding += words[i].length();
        System.out.println(words[i]);
    } 
```

印刷

```
cat
   cats
       test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:29:20.727

怎么样：

```
for(i=0; i<length; i++) {    
      for(j=0; j<i; j++)
         for(k = 0; k < words[j].length(); k++)
            System.out.print(" ");
      System.out.print(words[i]);
      System.out.println();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:33:32.177

```
public void leftpad(int l, String s) {
   StringBuffer b = new StringBuffer();
   for(int j = 0; j < l; j++) b.append(" ");
   b.append(s);
   return b.toString();
}
public void printWTF() {
    int length = i + 1;
    int wl = 0;
    for(int i = 0; i < length; i++){              
          System.out.println(leftpad(wl, words[i]));
          wl += words[i].length;
    }
} 
```

# java - 属性 java.protocol.handler.pkgs

> ID：14336684
> 
> 赞同：1
> 
> 时间：2013-01-15T11:24:33.483
> 
> 标签：java, web-services, unix, soap, oc4j

当我添加以下行时，我有一个通过 ssl 调用 Web 服务的肥皂客户端：

`System.setProperty("java.protocol.handler.pkgs","com.sun.net.ssl.internal.www.protocol");`

客户端以每秒 15 次调用的速度工作，当删除它时速度下降到每秒 1.5 次（慢 10 倍），我在 Windows 机器上使用 java 4 和 tomcat 6 作为我的开发环境

我对此很满意，但是在 unix 机器上将相同的代码部署到 oracle 应用程序服务器 10g 时，速度始终为每秒 1.5 次，无论我是否设置属性！

任何人都可以弄清楚这里发生了什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T14:18:58.477

在 Oracle App Server 中，尝试使用 oracle.mds.net.protocol 而不是 com.sun.net.ssl.internal.www.protocol。这是 WebLogic 中默认使用的值，我从未使用过 OAS，因此无法提供建议。

# adsense - 为 Google Adsense 创建一个帐户

> ID：14336689
> 
> 赞同：-1
> 
> 时间：2013-01-15T11:24:45.630
> 
> 标签：adsense

我已经为 google adsense 创建了一个帐户，不幸的是，adsense 系统给我回复了拒绝电子邮件

我提供了完整的地址国家 - 城市 - 街道 - 建筑物和手机号码

我的国家是：巴勒斯坦，这个国家有什么问题吗？

我从 google adsense 收到的电子邮件：

```
Hello,

Thank you for your interest in Google AdSense. Unfortunately, after
reviewing your application, we're unable to accept you into AdSense at
this time.

We did not approve your application for the reasons listed below.

Issues:
- Contact address incorrect, incomplete or not provided 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:27:48.047

它在电子邮件中说明了问题所在。

> 问题： - 联系地址不正确、不完整或未提供

检查您发送给他们的信息是否正确，否则请再次联系他们，看看他们认为什么不正确！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:31:30.430

尝试添加更正以使国际化。也许你应该使用母语。您也可以阅读 AdSense 帮助，找出任何错误。

# asp.net-mvc-3 - 使用 RangeFilePathResult 在 Chrome 中出现 HTML5 视频错误

> ID：14336690
> 
> 赞同：1
> 
> 时间：2013-01-15T11:24:46.907
> 
> 标签：asp.net-mvc-3, html, video-streaming, flowplayer, lib.web.mvc

使用 MVC3 和 flowplayer，我有一个视频播放器，它设置为获取具有以下标记的视频文件：

```
<div id="video">
    <div id="video-viewport">
      <!-- The data-ratio is a decimal number represeting the height of the video in proportion to the width -->
      <div class="flowplayer" data-swf="http://releases.flowplayer.org/5.1.1/flowplayer.swf"
        data-ratio="0.417" data-engine="html5" data-keyboard="true" data-native_ipad_fullscreen="true"
        data-volume="0.6">
        <video>
       <!-- By default Flowplayer attempts to use HTML5 video and if it's not
       supported then Flash (9.0+) and MP4 is used. MP4 is enough for
       complete browser support but providing WebM and/or OGG gives you
       broader support for HTML5 video which is the preferred technology. -->
     <!-- MP4 gives a complete cross browser support with the aid of Flash -->
     <source type="video/mp4" src="@Url.Action("GetVideo", "Video", new { id = Model.WebMp4Video.Id })"/>
     <!-- WEBM gives HTML5 video support for the latest Firefox, Chrome and Opera browser -->
      <source type="video/webm" src="@Url.Action("GetVideo", "Video", new { id = Model.WebMVideo.Id })"/> 
     <!-- OGG gives HTML5 support for older versions of Firefox and Opera -->
      <source type="video/ogv" src="@Url.Action("GetVideo", "Video", new { id = Model.OgvVideo.Id })"/> 
      </video>
      </div>
    </div>
  </div> <!--/video--> 
```

在控制器中，我有这个方法返回视频：

```
 public ActionResult GetVideo(string id) {
                ...
        var cd = new System.Net.Mime.ContentDisposition {
        Inline = false
    };
    FileInfo info = new FileInfo(path);
    Response.AppendHeader("Content-Disposition", cd.ToString());
    return new RangeFilePathResult(MimeType, info.FullName, info.LastWriteTimeUtc, info.Length); 
 } 
```

[RangeFilePathResult](http://tpeczek.blogspot.co.uk/2011/10/range-requests-in-aspnet-mvc.html)一直是返回部分响应的救命稻草，这在 Firefox 和 IE 中一切正常，但在 Chrome 中我经常遇到错误：

> “发送 http 标头后服务器无法设置状态”。

并且播放器本身崩溃，在页面上显示以下错误：

> html5：视频未正确编码

我仍在尝试了解部分响应，但这可能是因为 RangeFileResult 为每个部分响应设置了状态代码 206？或者还有什么我在这里想念的吗？

**编辑**：如果我通过 RangeFileResult 代码进行调试并检查 Chrome 中的 Network 选项卡，我注意到一旦代码到达此行，对控制器方法的请求就会返回部分响应，状态为挂起：

context.HttpContext.Response.Flush();

这似乎有一个延迟，有时超过 10 秒，但是当这完成时，响应的状态变为 206。通常在播放视频时，状态再次变为*取消*，这是当

> html5：视频未正确编码

消息出现在视频播放器上。

**Edit2**：我得到的回复如下（3个回复，第一个和第三个被取消，第二个有206状态：

要求

```
URL: http://localhost:64729/Video/GetVideo/24
Method: GET
Status Code: 206 Partial Content 
```

请求标头

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:identity;q=1, *;q=0
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:.ASPXAUTH=BD5B9748E6985F5659B56289A5543C11CACBF1602AFFD5D4335453560988B870F2543269809401D13EE9F12EFBAC2D4CE0322B5F826871B9968B3D2986C01E35C536B28B5EC24E8E4F631D094B0DBEFF76DA84DA7CCC753E06C38C0FA36A858AC87548099BD23D4BE9B80434970A542489EC5E5F4543A9C98CA573F196DCBFE1B8CC18C10AE1AFEB0E4E899C6CA4DEFC59138E170954016DCB9C007FDC7C2B2950436E24AA5FF9C0888822626C9AE01C07A98F317A9499F0E9D5E61434F959E9;ASP.NET_SessionId=o112vzki5owvbptr4kudbdax
Host:localhost:64729
Range:bytes=0-
Referer:http://localhost:64729/Video/Index/3
User-Agent:Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17 
```

响应标头

```
Cache-Control:private, s-maxage=0
Connection:Close
Content-Length:7362920
Content-Range:bytes 0-7362919/7362920
Content-Type:video/mp4
Date:Tue, 15 Jan 2013 12:55:24 GMT
Server:ASP.NET Development Server/10.0.0.0
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0 
```

* * *

要求

```
URL: http://localhost:64729/Video/GetVideo/24
Method: GET
Status Code: 206 Partial Content 
```

请求标头

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:identity;q=1, *;q=0
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:.ASPXAUTH=BD5B9748E6985F5659B56289A5543C11CACBF1602AFFD5D4335453560988B870F2543269809401D13EE9F12EFBAC2D4CE0322B5F826871B9968B3D2986C01E35C536B28B5EC24E8E4F631D094B0DBEFF76DA84DA7CCC753E06C38C0FA36A858AC87548099BD23D4BE9B80434970A542489EC5E5F4543A9C98CA573F196DCBFE1B8CC18C10AE1AFEB0E4E899C6CA4DEFC59138E170954016DCB9C007FDC7C2B2950436E24AA5FF9C0888822626C9AE01C07A98F317A9499F0E9D5E61434F959E9;ASP.NET_SessionId=o112vzki5owvbptr4kudbdax
Host:localhost:64729
Range:bytes=7339303-
Referer:http://localhost:64729/Video/Index/3
User-Agent:Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17 
```

响应标头

```
Cache-Control:private, s-maxage=0
Connection:Close
Content-Length:23617
Content-Range:bytes 7339303-7362919/7362920
Content-Type:video/mp4
Date:Tue, 15 Jan 2013 12:55:24 GMT
Server:ASP.NET Development Server/10.0.0.0
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0 
```

* * *

要求

```
URL: http://localhost:64729/Video/GetVideo/24
Method: GET
Status Code: 206 Partial Content 
```

请求标头

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:identity;q=1, *;q=0
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:.ASPXAUTH=BD5B9748E6985F5659B56289A5543C11CACBF1602AFFD5D4335453560988B870F2543269809401D13EE9F12EFBAC2D4CE0322B5F826871B9968B3D2986C01E35C536B28B5EC24E8E4F631D094B0DBEFF76DA84DA7CCC753E06C38C0FA36A858AC87548099BD23D4BE9B80434970A542489EC5E5F4543A9C98CA573F196DCBFE1B8CC18C10AE1AFEB0E4E899C6CA4DEFC59138E170954016DCB9C007FDC7C2B2950436E24AA5FF9C0888822626C9AE01C07A98F317A9499F0E9D5E61434F959E9;ASP.NET_SessionId=o112vzki5owvbptr4kudbdax 
Host:localhost:64729
Range:bytes=48-
Referer:http://localhost:64729/Video/Index/3
User-Agent:Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17 
```

响应标头

```
Cache-Control:private, s-maxage=0
Connection:Close
Content-Length:7362872
Content-Range:bytes 48-7362919/7362920
Content-Type:video/mp4
Date:Tue, 15 Jan 2013 12:55:24 GMT
Server:ASP.NET Development Server/10.0.0.0
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:22:50.033

经过一些密集测试（感谢您提供示例项目），Chrome 似乎在 mp4 格式方面存在一些问题。

为了*解决*这种情况，将 webm 移动为第一种格式就足够了，因此 Chrome 会选择它而不是 mp4（IE 会跳到 mp4，所以它也可以工作）：

```
<div id="video">
    <div id="video-viewport">
        <div class="flowplayer" data-swf="http://releases.flowplayer.org/5.1.1/flowplayer.swf" data-ratio="0.417" data-engine="html5" data-keyboard="true" data-native_ipad_fullscreen="true" data-volume="0.6">
            <video>
                <source type="video/webm" src="@Url.Action("GetVideo", "Video", new { id = Model.WebMVideo.Id })"/> 
                <source type="video/ogv" src="@Url.Action("GetVideo", "Video", new { id = Model.OgvVideo.Id })"/>
                <source type="video/mp4" src="@Url.Action("GetVideo", "Video", new { id = Model.WebMp4Video.Id })"/>
            </video>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:18:28.183

你可以试试这个，它解决了我的问题，看起来和你的一样。

```
<script>
    flowplayer.conf={
        engine:'flash'
    };
</script> 
```

# unit-testing - specs2：多个匹配器表达式（单元规范）

> ID：14336699
> 
> 赞同：4
> 
> 时间：2013-01-15T11:25:40.570
> 
> 标签：unit-testing, scala, specs2

如何检查一个 Matcher 片段中的多个表达式？

例如：

```
class Foo extends Specification {
   "Retrieving open issues" should {
      "return expected properties with expected data" in     {
         val issue = Bar.openIssues.head

         issue must not beNull
         issue.number must beEqualTo(1) 
         issue.state must beEqualTo("open")
         issue.title must beEqualTo("first issue")
      }
   }
} 
```

给出错误

```
[error]  type mismatch;
[error]  found   : Int
[error]  required: org.specs2.matcher.Matcher[Issue]
[error]                         issue.number must beEqualTo(1) 
```

[Eric 在此评论](https://stackoverflow.com/questions/12511310/seq-empty-test-with-specs2#comment16857709_12511310)中引用了“经典”类型推理问题，但找不到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:09:49.370

问题出在这一行：

```
issue must not beNull 
```

因为它是用运算符表示法编写的，所以编译器必须在正确的位置推断点和括号。`obj meth arg`遵循与此行相同的规则`obj.meth(arg)`被解释为：

```
issue.must(not).beNull<missing_arg> 
```

`beNull`是在 的返回值上调用的成员`issue.must(not)`。编译器遵循运算符符号的规则，并将其视为`meth`while`issue.must(not)`被视为`obj`。因为运算符表示法总是要求调用必须具有形式`obj meth arg`，所以在上面的示例中，编译器会因为无效的语法而抛出错误。但它没有这样做，因为还有两个进一步的规则：

1.  分隔运算符符号中标识符的空格不仅必须包含空格或制表符，还可以包含单个（！）换行符。
2.  如果找不到`arg`，则隐式插入一个空参数列表。

由于 (1)，编译器将下一行视为`arg`：

```
issue.must(not).beNull(
issue.number).must(beEqualTo(1)) 
```

这不是代码应该被解释的方式。为了解决这个问题，可以将整个表达式括在括号中：

```
(issue must not beNull) 
```

或用空行分隔行：

```
issue must not beNull

issue.number must beEqualTo(1) 
```

两种解决方案都有效，因为 (2) 编译器可以插入一个空参数列表。

注意：如果必须应用 (2)，这也称为后缀运算符。在 2.10 中，他们处理警告是因为——正如从这个问题中可以看到的——它们可能导致棘手的行为。

# iphone - setDelegateQueue 在 iOS5 上不工作，但在 iOS6 上工作正常

> ID：14336708
> 
> 赞同：1
> 
> 时间：2013-01-15T11:26:03.183
> 
> 标签：iphone, ios, nsurlconnection, nsoperation, nsoperationqueue

我正在尝试在后台线程中执行下载。为此，我创建了一个 NSOperationQueue 实例并向其中添加了一个 NSInvocationOperation 实例。

```
 operationQueue = [NSOperationQueue new];
        // set maximum operations possible
        [operationQueue setMaxConcurrentOperationCount:1];

        NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                                                                                selector:@selector(startBackgroundThread:)
                                                                                  object:data];

        [operationQueue addOperation:operation];
        [operation release]; 
```

现在在 startBackgroundThread 中，我创建了一个新的 NSURLConnection 并将 operationQueue 分派给它。

```
 currentConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];
    if (self.operationQueue) {
        [currentConnection setDelegateQueue:self.operationQueue];
    }        
    [currentConnection start]; 
```

**iOS6 中的行为**

在 iOS6 上工作得很好。一个线程被创建并且 NSURLConnection 回调它在同一个后台线程上委托。

**iOS5 和 iOS5.1 中的行为**

创建了一个线程，但没有调用 NSURLConnection 委托。

我是否遗漏了一些需要在 iOS5 中考虑的内容？我已经阅读了 Apple 提供的文档，但没有提到与此相关的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:54:44.277

这是 iOS 5 上的一个已知问题。请参阅[http://openradar.appspot.com/10529053](http://openradar.appspot.com/10529053)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:47:24.937

如果您尝试执行后台 Web 请求，请使用以下便捷方法。

```
[NSURLConnection sendAsynchronousRequest：队列：completionHandler：]；

```

Block apis 提供更好的性能并被苹果推荐。

# linux - 用于选择多个模式的 awk 代码

> ID：14336710
> 
> 赞同：2
> 
> 时间：2013-01-15T11:26:04.470
> 
> 标签：linux, shell, awk

这是我的输入文件，比如 modified.txt

```
------------------------------------------------------------------------
r4544 | n479826 | 2012-08-28 07:12:33 -0400 (Tue, 28 Aug 2012) | 1 line
Changed paths:
   M /branches/8.6.0/conf/src/main/config/RTSConfig.xml

CET-402: some text comment
------------------------------------------------------------------------
r4550 | n479826 | 2012-09-04 05:51:29 -0400 (Tue, 04 Sep 2012) | 1 line
Changed paths:
   M /branches/8.6.0/conf/src/main/config/RTSConfig.xml
   M /branches/8.6.0/conf/src/main/config/base.cfg
   M /branches/8.6.0/conf/src/main/config/prod.cfg
   M /branches/8.6.0/conf/src/main/config/qa.cfg
   M /branches/8.6.0/conf/src/main/config/uat.cfg

CET-438: some text comment 
```

我的输出应该是这样的：

```
r4544 | n479826 | 2012-08-28 07:12:33 | /branches/8.6.0/conf/src/main/config/RTSConfig.xml
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/RTSConfig.xml
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/base.cfg
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/prod.cfg
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/qa.cfg
r4550 | n479826 | 2012-09-04 05:51:29 | /branches/8.6.0/conf/src/main/config/uat.cfg 
```

输入文件是一个示例 svn-log 文件。我想用它们各自的凭据过滤所有修改过的（M）文件。有人可以帮助提供一些示例代码。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:50:14.883

```
awk -F"|" '/^r/{a=$1;b=$2;c=substr($3,0,20)}/^   M/{gsub(/   M /," ");print a"|"b"|"c"|"$0}' your_file 
```

测试：

```
> awk -F"|" '/^r/{a=$1;b=$2;c=substr($3,0,20)}/^   M/{gsub(/   M /," ");print a"|"b"|"c"|"$0}' temp
r4544 | n479826 | 2012-08-28 07:12:33| /branches/8.6.0/conf/src/main/config/RTSConfig.xml
r4550 | n479826 | 2012-09-04 05:51:29| /branches/8.6.0/conf/src/main/config/RTSConfig.xml
r4550 | n479826 | 2012-09-04 05:51:29| /branches/8.6.0/conf/src/main/config/base.cfg
r4550 | n479826 | 2012-09-04 05:51:29| /branches/8.6.0/conf/src/main/config/prod.cfg
r4550 | n479826 | 2012-09-04 05:51:29| /branches/8.6.0/conf/src/main/config/qa.cfg
r4550 | n479826 | 2012-09-04 05:51:29| /branches/8.6.0/conf/src/main/config/uat.cfg 
```

解释：

```
/^r/{a=$1;b=$2;c=substr($3,0,20)} 
```

只有当行以字母 r 开头时，上面的代码块才会执行。块内部说将第一个字段存储在 a 中，第二个字段存储在 b 中，输入的第三个字段是：

```
2012-08-28 07:12:33 -0400 (Tue, 28 Aug 2012) 
```

但我只需要带有时间戳的日期，其余的对我来说已经过时了。它始终是 20 个字符。所以我从第三个字段中取出一个子字符串并将其存储在 c 中。

我的主要兴趣是以 /^ M/ 开头的行，我必须显示上一行中以 r 开头的信息，并且确保在我们想要的行之前有一行以 r 开头，其中包含所有信息我必须在前面加上以 M 开头的行。

因此，每次以 M 开头的行都会添加存储在 ab 和 c 中的值。

```
M/{gsub(/ M /," ");print a"|"b"|"c"|"$0} 
```

gsub 部分将从当前行中删除带有空格的“ M ”部分。print 部分只是在当前行前面加上 ab 和 c 的值 | 作为分隔符。

# ruby - 顶部栏中的程序图标 Ubuntu

> ID：14336718
> 
> 赞同：1
> 
> 时间：2013-01-15T11:26:38.150
> 
> 标签：ruby, ubuntu-12.04

我写了一个小红宝石程序，我想在它运行时将它的图标放在顶部栏（无线、声音、电池、语言图标所在的位置）。我怎样才能做到这一点？

# python - Python 3：如何让 os.getcwd() 与 re.sub() 配合使用？

> ID：14336724
> 
> 赞同：1
> 
> 时间：2013-01-15T11:26:59.140
> 
> 标签：python, regex, python-3.x

我正在尝试使用当前工作目录替换文件中的某些内容`python 3.3`。我有：

```
def ReplaceInFile(filename, replaceRegEx, replaceWithRegEx):
    ''' Open a file and use a re.sub to replace content within it in place '''
    with fileinput.input(filename, inplace=True) as f:
        for line in f:
            line = re.sub(replaceRegEx, replaceWithRegEx, line)
            #sys.stdout.write (line)
            print(line, end='') 
```

我像这样使用它：

```
ReplaceInFile(r'Path\To\File.iss', r'(#define RootDir\s+)(.+)', r'\g<1>' + os.getcwd()) 
```

对我来说不幸的是，我的路径是 C:\Tkbt\Launch，所以我得到的替换是：

```
#define RootDir C:  kbt\Launch 
```

即它被解释`\t`为标签。

所以在我看来，我需要告诉 python 将所有内容从`os.getcwd()`. 我想也许`.decode('unicode_escape')`可能是答案，但事实并非如此。有人可以帮帮我吗？

我希望有一个不是“查找替换每个”的解决`'\'`方案`'\\'`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:29:38.217

`.replace('\\', '\\\\')`恐怕你不得不求助于，这是你完成这项工作的*唯一*选择。

*   如果可行的话，使用编码`unicode_escape`然后再次从 ASCII 解码会很好：

    ```
    replacepattern = r'\g<1>' + os.getcwd().encode('unicode_escape').decode('ascii') 
    ```

    这对路径做了正确的事情：

    ```
    >>> print(re.sub(r'(#define RootDir\s+)(.+)', r'\g<1>' + r'C:\Path\to\File.iss'.encode('unicode_escape').decode('ascii'), '#define Root
    #define RootDir C:\Path\to\File.iss 
    ```

    但不适用于现有的非 ASCII 字符，因为`re.sub()`不处理`\u`或`\x`转义。

*   不要[`re.escape()`](http://docs.python.org/3/library/re.html#re.escape)用来转义字符串中的特殊字符，这会转义太多：

    ```
    >>> print(re.sub(r'(#define RootDir\s+)(.+)', r'\g<1>' + re.escape(r'C:\Path\To\File.iss'), '#define RootDir foo/bar/baz'))
    #define RootDir C\:\Path\To\File\.iss 
    ```

    注意`\:`那里。

只会`.replace()`产生有效的替换模式，包括非 ASCII 字符：

```
>>> print(re.sub(r'(#define RootDir\s+)(.+)', r'\g<1>' + 'C:\\Path\\To\\File-with-non-
ASCII-\xef.iss'.replace('\\', '\\\\'), '#define Root
#define RootDir C:\Path\To\File-with-non-ASCII-ï.iss 
```

# c# - ASP.NET：是否可以将 Request.Form 传递给函数？

> ID：14336725
> 
> 赞同：3
> 
> 时间：2013-01-15T11:27:05.483
> 
> 标签：c#, asp.net, .net

我在我的 Web 应用程序中使用**Request.Form("foo")**在我的页面之间接收大部分变量。是否可以将整个**Request.Form**传递给一个函数，然后像这样提取我的数据？

```
public string extract(myRequest){
  //blah blah
  return processed_data
} 
```

如果是，**myRequest**的类型是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:29:50.277

当然有可能。[`Request.Form`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)是一个[`NameValueCollection`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)。我建议阅读[文档](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:30:02.420

那当然是。类型是[NameValueCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)：

```
public string extract(NameValueCollection form) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T11:35:03.707

使用[文档中的示例](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)

```
public string extract(NameValueCollection myRequest) {
    int loop1;
    StringBuilder processed_data= new StringBuilder();
    // Get names of all forms into a string array.
    String[] arr1 = myRequest.AllKeys;
    for (loop1 = 0; loop1 < arr1.Length; loop1++) 
    {
        data.Append("Form: " + arr1[loop1] + "<br>");
    }
    return processed_data.ToString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T11:30:16.350

是的，你可以，它是 type `FormCollection`，继承自`NameValueCollection`

# php - PDO::FETCH_PROPS_LATE 和 __construct() 调用使用获取的数据

> ID：14336726
> 
> 赞同：0
> 
> 时间：2013-01-15T11:27:06.623
> 
> 标签：php, mysql, pdo, prepared-statement

这个问题与这里已经提出的问题非常相似：[PDO using PDO::FETCH_PROPS_LATE and __construct() call?](https://stackoverflow.com/questions/9127693/pdo-using-pdofetch-props-late-and-construct-call)

但是，该问题中接受的答案并没有真正回答如何将*获取*的值传递给类的构造函数，如果这可能的话。这是一些简化的代码：

```
<?php

class Course {
    private $name;
    private $code;
    private $prerequisites;

    public function __construct($name, $code) {

        if(!is_string($code) || mb_strlen($code) !== 7) {
            throw new \InvalidArgumentException('Invalid code.');
        }

        $this->name = $name;
        $this->code = $code;
        $this->prerequisites = array();
    }

    public static function getAllCourses() {
        $sql = 'SELECT `name`, `code` FROM `courses` ORDER BY `code`;';
        $db = new \PDO(' ... ', DB_USER, DB_PASS);

        $stmt = $db->query($sql);
        $stmt->setFetchMode(\PDO::FETCH_CLASS | \PDO::FETCH_PROPS_LATE, 'Course', array('name', 'code'));

        return $stmt->fetchAll();
    }
}
?> 
```

这段代码的问题是文字字符串“name”和“code”被传递给构造函数。但是我想将名称和代码的实际值传递给构造函数（显然）。

这可以做到吗？如果是，如何？我使用[bindColumn()](http://php.net/manual/en/pdostatement.bindcolumn.php)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T01:32:48.450

基本上，任何 PDO::fetch_something() 方法都会分配属性。

因此，您只需定义与列同名的属性，就像您正确拥有它一样。您甚至不需要 getter 或 setter 或构造函数！

您可以像这样将值传递给类的构造函数：

```
$stmt->setFetchMode(\PDO::FETCH_CLASS,
    'Course',
    array(<value of col1>, <value of col2>)); 
```

请注意，您不传递列的名称，而是传递数组中的值！

但这很棘手！确保正确设置了 fetchMode！

如果设置了 \PDO::FETCH_PROPS_LATE ，它将首先调用 __construct 然后设置属性。因此，您通过数组传递给 __construct 的值将被覆盖。

如果你没有设置 \PDO::FETCH_PROPS_LATE 它会做相反的事情。

去尝试一下。

# android - 使用 LayoutInflator 的 inflate 方法时的不同结果

> ID：14336733
> 
> 赞同：4
> 
> 时间：2013-01-15T11:27:39.180
> 
> 标签：android, android-layout, layout-inflater

我想知道`LayoutParams`将如何运作`LayoutInflator`。和有什么区别：

```
LinearLayout childLayout=(LinearLayout)inflater.inflate(R.layout.childitemlayout, null); //FIRST WAY
LinearLayout childLayout=(LinearLayout)inflater.inflate(R.layout.childitemlayout, container,false); //SECOND WAY 
```

因为，这两种方法都给了我不同的结果。实际上，第二个充气方法为我提供了两个子布局更改的正确结果，但第一个方法会给我不同的结果。

这是我的代码：

```
MainActivity.Java

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LinearLayout mainLayout=(LinearLayout)findViewById(R.id.mainLayout);
        LayoutInflater inflater=LayoutInflater.from(getApplicationContext());
        for(int i=0;i<10;i++){
            LinearLayout childLayout=(LinearLayout)inflater.inflate(R.layout.childitemlayout, null); //First WAY
//          LinearLayout childLayout=(LinearLayout)inflater.inflate(R.layout.childitemlayout, mainLayout,false);  //SECOND WAY
            mainLayout.addView(childLayout);
        }
    }

main.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

</LinearLayout>

childitemlayout.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:orientation="vertical" 
    android:background="#525f67">

    <TextView android:id="@+id/btn"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="Button"
            android:gravity="center"
            />

</LinearLayout>  <!-- Both ways gives different result  --> 

<!-- 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:background="#525f67">

    <TextView android:id="@+id/btn"
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:text="Button"
            android:gravity="center"
            />

</LinearLayout> Both method gives SAME result   --> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T13:16:35.687

`inflate()`这两种方法的主要区别在于第二个参数（`ViewGroup`参数）及其在`LayoutParams`为膨胀布局文件的根视图设置正确性时的用途。这很重要，因为需要`LayoutParams`保留视图的各种布局属性（如宽度、高度、定位规则等），以便该视图的父级可以正确显示该视图。

第一种方法基本上是说：*从这个布局文件构建层次视图，但不要分配`LayoutParams`给膨胀层次结构的根（可能是因为父级还不知道），也不要将膨胀视图附加到父级*。

第二个 inflate 方法说：*从这个布局文件构建层次视图，**并将适当的`LayoutParams`（基于给 inflate 方法的第二个参数）分配给膨胀层次结构的根，**也不将膨胀视图附加到父*级.

在第一种情况下，膨胀的布局文件（`R.layout.childitemlayout`）的根将没有任何`LayoutParams`设置（该`inflate`方法没有分配任何内容，因为第二个参数是`null`并且它不知道`LayoutParams`要生成哪种类型），所以你的固定宽度/高度值丢失。稍后，当您`mainLayout.addView(childLayout);`将`mainLayout`检查 的`LayoutParams`时`childLayout`，会看到这些是`null`并且将自动设置 的实例`LayoutParams`（使用它的`generateDefaultLayoutParams()`方法）。此方法，在特定情况下为 水平`LinearLayout`，将返回`LayoutParams`宽度/高度将设置为的实例`WRAP_CONTENT`。所以你`childLayout`最终会得到`WRAP_CONTENT`它的大小，而不是你在它们上设置的固定值。

在第二种情况下，该`inflate`方法看到您建议将`LinearLayout` `mainLayout`用于`ViewGroup`生成`LayoutParams`. 这意味着从布局文件中检索到的固定值（用于宽度/高度）可以存储在`LayoutParams`. 当您 执行`mainLayout.addView(childLayout);`. `mainLayout`_ _`childLayout``LayoutParams``generateDefaultLayoutParams()`

# spring - 注销后，登录页面打不开

> ID：14336734
> 
> 赞同：1
> 
> 时间：2013-01-15T11:27:39.370
> 
> 标签：spring, redirect, extjs, spring-security, logout

由于某些原因，我有一个 spring 应用程序，它有两个用 extjs 编写的客户端应用程序。一个只包含登录页面，另一个只包含应用程序逻辑。在 Spring 中，我将它们包含在我在控制器中使用的两个 jsp 页面中。

登录和重定向到应用程序页面工作正常。但是，如果我注销，则注销成功，但我一直停留在应用程序页面上，而不是被重定向到登录页面。

安全配置：

```
<security:logout logout-url="/main/logoutpage.html" delete-cookies="JSESSIONID" invalidate-session="true" logout-success-url="/test/logout.html"/> 
```

控制器：

```
@RequestMapping(value="/test/logout.html",method=RequestMethod.GET)
public ModelAndView testLogout(@RequestParam(required=false)Integer error, HttpServletRequest request, HttpServletResponse response){
    return new ModelAndView("login");
} 
```

“login”是包含登录应用程序的视图的名称。在浏览器调试中，我可以看到以下两个通信：

```
 Request URL:http://xx:8080/xx/xx/logoutpage.html?_dc=1358246248972
Request Method:GET
Status Code:302 Moved Temporarily
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Connection:keep-alive
Cookie:JSESSIONID=6E22E42CC6835C8A6DFF2535907DEF17
Host:xx:8080
Referer:http://xx:8080/xx/xx/Home.html
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
X-Requested-With:XMLHttpRequest
Query String Parametersview URL encoded
_dc:1358246248972
Response Headersview source
Content-Length:0
Date:Tue, 15 Jan 2013 10:37:33 GMT
Location:http://xx:8080/xx/xx/login.html
Server:Apache-Coyote/1.1
Set-Cookie:JSESSIONID=""; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/xx

Request URL:http://xx:8080/xx/xx/login.html
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Connection:keep-alive
Cookie:JSESSIONID=6E22E42CC6835C8A6DFF2535907DEF17
Host:xx:8080
Referer:http://xx:8080/xx/xx/Home.html
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
X-Requested-With:XMLHttpRequest
Response Headersview source
Content-Language:de-DE
Content-Length:417
Content-Type:text/html;charset=ISO-8859-1
Date:Tue, 15 Jan 2013 10:37:33 GMT
Server:Apache-Coyote/1.1
Set-Cookie:JSESSIONID=532EBEED737BD4172E290F0D10085ED5; Path=/xx/; HttpOnly 
```

第二个响应还包含登录页面：

```
 <html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Login</title>
    <script src="http://extjs.cachefly.net/ext-4.1.1-gpl/ext-all.js"></script>
    <link rel="stylesheet" href="http://extjs.cachefly.net/ext-4.1.1-gpl/resources/css/ext-all.css">
    <script type="text/javascript" src="/xx/main/app/app.js"></script>
</head>
<body></body>
</html> 
```

有人知道为什么不显示登录页面吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:27:18.477

Instead of custom JavaScript handler for logout control just use a normal link:

```
<a href="/main/logoutpage.html">Logout</a> 
```

Logout controller uses **HTTP redirect** to show login page. In a case of AJAX call redirect does not work like you want. Look into XmlHttpResponse of your AJAX call. You will find the logout page there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:19:17.727

“一个只包含登录页面，另一个包含应用程序逻辑”是什么意思？你有 2 个应用程序？2 个不同的 WAR/JAR？

请解释...

顺便说一句 - 注销后，您希望将用户重定向到应用程序中的*受保护资源*，然后**Spring**会将用户重定向到登录页面。您不必（或不应该）自己隐式重定向到登录页面。

# ruby-on-rails - 在 Rails 中为待办事项应用程序设置提醒

> ID：14336737
> 
> 赞同：1
> 
> 时间：2013-01-15T11:27:53.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对 Rails 完全陌生。我用 rails 3.0 准备了一个简单的 todo 应用程序
需要帮助添加

*   Todo 任务集的提醒。*   通过电子邮件发送提醒。

我对 Rails 完全陌生。

到目前为止，我已经完成了：

*   安装rails和ruby
*   轨道新应用
*   耙分贝：创建
*   rails g 脚手架名称：字符串状态：布尔值
*   耙分贝：迁移
*   添加到 routes.rb，root 到：“tasks#index”
*   导轨

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T11:57:43.743

请遵循[指南](http://guides.rubyonrails.org/)，以更好地了解 Rails 的工作原理。

1.  您需要为用户和任务准备好模型。按照第[一个指南](http://guides.rubyonrails.org/getting_started.html)创建和关联这些模型。按照本指南，您将知道如何最好地为您的应用程序建模。

    1.  您需要带有提醒的用户和任务模型
    2.  用户将使用到期/提醒时间创建这些任务。
    3.  定期运行[后台任务](https://stackoverflow.com/questions/388016/spinning-background-tasks-in-rails)以检查这些任务是否到期并适当地发送电子邮件提醒。
2.  对于电子邮件，请遵循有关 ActionMailer - [Action Mailer Basics的指南](http://guides.rubyonrails.org/action_mailer_basics.html)

# python - Django 将 ForeignKey 指向现有的关系表

> ID：14336740
> 
> 赞同：1
> 
> 时间：2013-01-15T11:28:03.567
> 
> 标签：python, django, foreign-key-relationship

我对 Django 相当陌生，我想实现以下目标：我在两个表之间有一个关系，比如表 B 有一个对表 A 的 ManyToMany 引用。现在我想要一个名为 Options 的表，它将选项保存到 A 和之间的特定组合B. 我如何做到这一点？

谢谢！

隐藏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:36:37.603

使用字段[`through`](https://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany)选项，并在关系本身中添加信息。`ManyToMany`

例如

```
class Ingredient(models.Model):
    name = models.TextField()

class Recipe(models.Model):
    name = models.TextField()
    ingredients = models.ManyToManyField(Ingredient, through='RecipePart')

class RecipePart(models.Model)
    recipe = models.ForeignKey(Recipe)
    ingredient = models.ForeignKey(Ingredient)
    amount = models.IntegerField()

# ...
RecipePart(recipe=pizza, ingredient=cheese, amount=9001).save() 
```

如果关系已经存在（并且您已经有数据），则必须更新数据库模式（如果您习惯于自动映射，则创建模型）。[南方](http://south.aeracode.org/)可以帮助你做到这一点。

# android - 如何在出生日期自动在 Facebook 好友墙上发布消息

> ID：14336741
> 
> 赞同：0
> 
> 时间：2013-01-15T11:28:05.253
> 
> 标签：android, facebook, facebook-graph-api, android-facebook

我正在编写一个应用程序，允许用户通过单击*ListView Item row**在朋友的墙上发布消息*。

 *但现在我想让用户写一条消息，在生日那天自动发送给他/她的朋友......

简而言之，*在他/她的出生日期自动向朋友发送祝福......*

我正在使用以下代码**在墙上发布消息**：

```
 public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
//  Log.d(LOG_TAG, "onItemClick()");

     try {
            final long friendId;
            friendId = jsonArray.getJSONObject(position).getLong("uid");
            String name = jsonArray.getJSONObject(position).getString("name");
            new AlertDialog.Builder(this).setTitle(R.string.post_on_wall_title)
                    .setMessage(String.format(getString(R.string.post_on_wall), name))
                    .setPositiveButton(R.string.yes, new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            Bundle params = new Bundle();

                            params.putString("to", String.valueOf(friendId));
                            params.putString("caption", getString(R.string.app_name));
                            params.putString("description", getString(R.string.app_desc));
                            params.putString("picture", FacebookUtility.HACK_ICON_URL);
                            params.putString("name", getString(R.string.app_action));
                            FacebookUtility.facebook.dialog(FriendsList.this, "feed", params,
                                    (DialogListener) new PostDialogListener());
                        }

                    }).setNegativeButton(R.string.no, null).show();
        } catch (JSONException e) {
            showToast("Error: " + e.getMessage());
        }
    }

    public class PostDialogListener extends BaseDialogListener {
        @Override
        public void onComplete(Bundle values) {
            final String postId = values.getString("post_id");
            if (postId != null) {
                showToast("Message posted on the wall.");
            } else {
                showToast("No message posted on the wall.");
            }
        }
    }

    public void showToast(final String msg) {

        mHandler.post(new Runnable() {
            @Override
            public void run() {
                Toast toast = Toast.makeText(FriendsList.this, msg, Toast.LENGTH_LONG);
                toast.show();
            }
        });
    } 
```

我需要指导，在生日那天自动发送消息....*

# knockout.js - 当映射 ko.mapping.fromJS 值为 null

> ID：14336743
> 
> 赞同：9
> 
> 时间：2013-01-15T11:28:10.370
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在使用 knockoutjs，并且正在尝试从 JSON 数据填充 ViewModel 实例。根据 knockoutjs 文档，我可以使用以下语句：

```
ko.mapping.fromJS(data, viewModel); 
```

这是我的代码：

```
var pledgeVM=function(){            
      this.name=ko.observable();
      this.Assets=ko.observableArray([]);
      this.StartEdit=function(assetModel){
      };
 };
        pledge = {"name":"Moses","Assets":[{"CityId":13,"commetns":null},{"CityId":14,"commetns":null}]};
        var pledgeVMinstance=new pledgeVM();
        ko.mapping.fromJS(pledge,pledgeVMinstance); 
```

出于某种原因，数据未填充（`pledgeVMinstance.name()`未定义），除非我将语句更改为：

```
ko.mapping.fromJS(pledge,{},pledgeVMinstance); 
```

也许有人可以解释我为什么事情会这样。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-15T12:01:50.653

发生这种情况是因为`ko.mapping.fromJS`具有以下签名：

```
ko.mapping.fromJS(data, mappingOptions, viewModel); 
```

其中`data`- 是您的 json 数据，`mappingOptions`- 是映射插件如何映射日期的说明，`viewModel`- 是存储映射数据的对象。

`ko.mapping.fromJS(data)`- 此语法将创建视图模型。

`ko.mapping.fromJS(data, mappingOptions`) - 这将创建具有特定选项的视图模型。

`ko.mapping.fromJS(data, {}, viewModel)`- 这一个在没有映射选项的情况下转换您的数据并将其放入视图模型。

阅读文档以更好地理解： http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T11:51:58.173

根据阅读[Knockout 网站](http://knockoutjs.com/documentation/plugins-mapping.html)上的文档，我相信调用：

```
var viewModel = ko.mapping.fromJS(data); 
```

将自动为您创建一个 ViewModel。这意味着您不需要自己声明 ViewModel，因为映射插件会创建一个具有可观察属性的视图模型。

在你**第一次**调用这个之后，你可以使用

```
ko.mapping.fromJS(data, viewModel); 
```

要更新您的 ViewModel 数据，请说在您通过 ajax 请求加载了更多数据之后。

解决此问题的解决方案应该是：

```
var pledge = {"name":"Moses","Assets":[{"CityId":13,"commetns":null},{"CityId":14,"commetns":null}]};

var pledgeVMinstance = ko.mapping.fromJS(pledge); 
```

# java - 使用 List 实现 Set

> ID：14336747
> 
> 赞同：-3
> 
> 时间：2013-01-15T11:28:21.453
> 
> 标签：java, collections

我如何实现一个我自己的列表，它不允许重复元素，比如 Set using `ArrayList`or `LinkedList`？

让我们假设

```
 public class  MyList<E> extends AbstractList<E>{

//add
//addAll
//remove
//get
//size

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:32:46.920

```
@override
public boolean add(..<E>)
{
//implement code to reject duplicates
// returns **false** if object already present in the list
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:28:43.233

Well strictly speaking you can't do that without breaking the `List` contract.

Suppose you have:

```
public class  MyList<E> extends AbstractList<E>{
    ...
} 
```

The fact that you are extending `AbstractList` means that you are indirectly implementing `List`. And this means that certain operations have to behave in specific ways. For instance `List.equals()` is specified as *"Returns true if and only if the specified object is also a list, both lists have the same size, **and all corresponding pairs of elements in the two lists are equal**."* But that is totally the wrong semantic for a set, and certainly for a `Set`. In a true set, the order of elements is irrelevant to equality.

Now you could ignore this (programs do worse) ... but there is a chance that it could bite you.

Anyway, a more semantically correct implementation of a set using a list would look more like this:

```
public class MySet<E> implements Set<E> {
    private List<E> list = ...
    // implement the Set API by delegating to the list object ...
} 
```

* * *

Incidentally, the spec of the `List.add(E)` operation's return value only a problem if you apply a pedantic and nonsensical reading to the javadocs. The `List` javadoc explicitly allows list implementations that refuse to add specific elements. My take is that the phrase *"true (as specified by Collection.add(E))"* is applies to the case where the add operation actually changes the list. If it doesn't change the list, the `Collection.add(E)` method spec *actually* says that the result *should* be `false` ... and so does common sense.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T11:32:09.747

你应该尝试使用`LinkedHashSet`而不是`MyList`

# c# - 升级到 .NET 4.5：ItemsControl 与其项目源不一致

> ID：14336750
> 
> 赞同：30
> 
> 时间：2013-01-15T11:28:32.757
> 
> 标签：c#, wpfdatagrid, .net-4.5

我正在构建一个应用程序，它使用许多 ItemControls（数据网格和列表视图）。为了从后台线程轻松更新这些列表，我将此扩展用于 ObservableCollections，效果很好：

[http://geekswithblogs.net/NewThingsILearned/archive/2008/01/16/have-worker-thread-update-observablecollection-that-is-bound-to-a.aspx](http://geekswithblogs.net/NewThingsILearned/archive/2008/01/16/have-worker-thread-update-observablecollection-that-is-bound-to-a.aspx)

今天我安装了 VS12（它又安装了 .NET 4.5），因为我想使用一个为 .NET 4.5 编写的组件。在将我的项目升级到 .NET 4.5（从 4.0）之前，我的数据网格在从工作线程更新时开始抛出 InvalidOperationException。异常消息：

> 引发此异常是因为名称为“（未命名）”的控件“System.Windows.Controls.DataGrid Items.Count:5”的生成器已接收到与 Items 集合的当前状态不一致的 CollectionChanged 事件序列。检测到以下差异：累计计数 4 与实际计数 5 不同。[累计计数为（上次重置时的计数 + #Adds - 自上次重置以来的#Removes）。]

复制代码：

XAML：

```
<Window x:Class="Test1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
   <Grid>
      <DataGrid ItemsSource="{Binding Items, Mode=OneTime}" PresentationTraceSources.TraceLevel="High"/>       
   </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{
    public ExtendedObservableCollection<int> Items { get; private set; }

    public MainWindow()
    {
        InitializeComponent();
        Items = new ExtendedObservableCollection<int>();
        DataContext = this;
        Loaded += MainWindow_Loaded;
    }

    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
            Task.Factory.StartNew(() =>
            {
                foreach (var item in Enumerable.Range(1, 500))
                {
                    Items.Add(item);
                }
            });                
    }
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-05-03T21:37:04.347

WPF 4.5 provides some new functionality to access collections on non-UI Threads.

> It WPF enables you to access and modify data collections on threads other than the one that created the collection. This enables you to use a background thread to receive data from an external source, such as a database, and display the data on the UI thread. By using another thread to modify the collection, your user interface remains responsive to user interaction.

This can be done by using the static method [EnableCollectionSynchronization](http://msdn.microsoft.com/en-us/library/hh198861.aspx) on the `BindingOperations` class.

> If you have a lot of data to collect or modify, you might want to use a background thread to collect and modify the data so that the user interface will remain reactive to input. To enable multiple threads to access a collection, call the EnableCollectionSynchronization method. When you call this overload of the EnableCollectionSynchronization(IEnumerable, Object) method, the system locks the collection when you access it. To specify a callback to lock the collection yourself, call the EnableCollectionSynchronization(IEnumerable, Object, CollectionSynchronizationCallback) overload.

The usage is as follows. Create an object that is used as a lock for the synchronization of the collection. Then call the EnableCollectionSynchronization method of the BindingsOperations and pass to it the collection you want to synchronize and the object that is used for locking.

I have updated your code and added the details. Also i changed the collection to the normal ObservableCollection to avoid conflicts.

```
public partial class MainWindow : Window{
  public ObservableCollection<int> Items { get; private set; }

  //lock object for synchronization;
  private static object _syncLock = new object();

  public MainWindow()
  {
    InitializeComponent();
    Items = new ObservableCollection<int>();

    //Enable the cross acces to this collection elsewhere
    BindingOperations.EnableCollectionSynchronization(Items, _syncLock);

    DataContext = this;
    Loaded += MainWindow_Loaded;
  }

  void MainWindow_Loaded(object sender, RoutedEventArgs e)
  {
        Task.Factory.StartNew(() =>
        {
            foreach (var item in Enumerable.Range(1, 500))
            {
                lock(_syncLock) {
                  Items.Add(item);
                }
            }
        });                
  }
} 
```

See also: [http://10rem.net/blog/2012/01/20/wpf-45-cross-thread-collection-synchronization-redux](http://10rem.net/blog/2012/01/20/wpf-45-cross-thread-collection-synchronization-redux)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-25T21:31:55.110

总结本主题，这`AsyncObservableCollection`适用于 .NET 4 和 .NET 4.5 WPF 应用程序。

```
using System;
using System.Collections;
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using System.Linq;
using System.Windows.Data;
using System.Windows.Threading;

namespace WpfAsyncCollection
{
    public class AsyncObservableCollection<T> : ObservableCollection<T>
    {
        public override event NotifyCollectionChangedEventHandler CollectionChanged;
        private static object _syncLock = new object();

        public AsyncObservableCollection()
        {
            enableCollectionSynchronization(this, _syncLock);
        }

        protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
        {
            using (BlockReentrancy())
            {
                var eh = CollectionChanged;
                if (eh == null) return;

                var dispatcher = (from NotifyCollectionChangedEventHandler nh in eh.GetInvocationList()
                                  let dpo = nh.Target as DispatcherObject
                                  where dpo != null
                                  select dpo.Dispatcher).FirstOrDefault();

                if (dispatcher != null && dispatcher.CheckAccess() == false)
                {
                    dispatcher.Invoke(DispatcherPriority.DataBind, (Action)(() => OnCollectionChanged(e)));
                }
                else
                {
                    foreach (NotifyCollectionChangedEventHandler nh in eh.GetInvocationList())
                        nh.Invoke(this, e);
                }
            }
        }

        private static void enableCollectionSynchronization(IEnumerable collection, object lockObject)
        {
            var method = typeof(BindingOperations).GetMethod("EnableCollectionSynchronization", 
                                    new Type[] { typeof(IEnumerable), typeof(object) });
            if (method != null)
            {
                // It's .NET 4.5
                method.Invoke(null, new object[] { collection, lockObject });
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-09T11:10:39.650

杰霍夫的回答是正确的。

我们还不能以 4.5 为目标，并且我们已经允许后台更新的自定义 observable 集合遇到了这个问题（通过在事件通知期间使用 Dispatcher）。

如果有人觉得它有用，我在我们的应用程序中使用了以下针对 .NET 4.0 的代码，以便在执行环境是 .NET 4.5 的情况下使其能够使用此功能：

```
public static void EnableCollectionSynchronization(IEnumerable collection, object lockObject)
{
    // Equivalent to .NET 4.5:
    // BindingOperations.EnableCollectionSynchronization(collection, lockObject);
    MethodInfo method = typeof(BindingOperations).GetMethod("EnableCollectionSynchronization", new Type[] { typeof(IEnumerable), typeof(object) });
    if (method != null)
    {
        method.Invoke(null, new object[] { collection, lockObject });
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T03:17:31.227

这适用于使用可能存在此问题的**VS 2017发行版的****Windows 10 版本 1607**用户。

 **```
Microsoft Visual Studio Community 2017
Version 15.1 (26403.3) Release
VisualStudio.15.Release/15.1.0+26403.3
Microsoft .NET Framework
Version 4.6.01586 
```

您不需要**锁**也不需要**EnableCollectionSynchronization**。

```
<ListBox x:Name="FontFamilyListBox" SelectedIndex="{Binding SelectedIndex, Mode=TwoWay}" Width="{Binding FontFamilyWidth, Mode=TwoWay}"
         SelectedItem="{Binding FontFamilyItem, Mode=TwoWay}"
         ItemsSource="{Binding FontFamilyItems}"
          diag:PresentationTraceSources.TraceLevel="High">
    <ListBox.ItemTemplate>
        <DataTemplate DataType="typeData:FontFamilyItem">
            <Grid>
                <TextBlock Text="{Binding}" diag:PresentationTraceSources.TraceLevel="High"/>

            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>

public ObservableCollection<string> fontFamilyItems;
public ObservableCollection<string> FontFamilyItems
{
    get { return fontFamilyItems; }
    set { SetProperty(ref fontFamilyItems, value, nameof(FontFamilyItems)); }
}

public string fontFamilyItem;
public string FontFamilyItem
{
    get { return fontFamilyItem; }
    set { SetProperty(ref fontFamilyItem, value, nameof(FontFamilyItem)); }
}

private List<string> GetItems()
{
    List<string> fonts = new List<string>();
    foreach (System.Windows.Media.FontFamily font in Fonts.SystemFontFamilies)
    {
        fonts.Add(font.Source);
        ....
        other stuff..
    }
    return fonts;
}

public async void OnFontFamilyViewLoaded(object sender, EventArgs e)
{
    DisposableFontFamilyViewLoaded.Dispose();
    Task<List<string>> getItemsTask = Task.Factory.StartNew(GetItems);

    try
    {
        foreach (string item in await getItemsTask)
        {
            FontFamilyItems.Add(item);
        }
    }
    catch (Exception x)
    {
        throw new Exception("Error - " + x.Message);
    }

    ...
    other stuff
} 
```**

# android - 动态更改列表视图中列表项中的图像

> ID：14336754
> 
> 赞同：0
> 
> 时间：2013-01-15T11:28:50.853
> 
> 标签：android, android-listview, android-adapter

在我的项目中，我有一个列表视图，其中包含每个包含图像的列表项。现在，当单击特定列表项时，会打开与该项相关的新活动，并且它有 3 个按钮。根据单击的按钮，该特定列表项中的图像会发生变化。每个列表项都与数据库中的特定行相关联，我想知道如何识别特定的按​​钮单击并直接在列表项中更改图像视图。

我自定义Adapter的getView()方法如下

```
 public class SpecialAdapter extends SimpleCursorAdapter{

    private EventDBAdapter dbHelper;

@SuppressWarnings("deprecation")
public SpecialAdapter(Context context, int layout, Cursor c, String[] from,
        int[] to, int i) {
    super(context, layout, c, from, to);
    // TODO Auto-generated constructor stub
}

private int[] colors = new int[] { 0xAAFFFFF, 0xAAc0c0c0 };

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

      View view = super.getView(position, convertView, parent);
      int colorPos = position % colors.length;
      view.setBackgroundColor(colors[colorPos]);
      return view;
}

    } 
```

每个列表项都从此视图膨胀

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_marginLeft="10dp"
android:layout_marginBottom="10dp"
android:layout_marginTop="5dp"
 >

<View
android:layout_width="1dip"
android:layout_height="fill_parent"
android:layout_toLeftOf="@+id/tvListTitle"
android:paddingLeft="10dp"
android:background="#CC3232"/>

<TextView
    android:id="@+id/tvListTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textStyle="bold"
    android:layout_marginTop="10dp"
    android:textColor="#108070"
    android:text="Title in list"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/tvListTime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="00:00 to 00:00"
    android:layout_below="@+id/tvListTitle"
    android:textColor="#138F6A"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/tvListWhere"
    android:layout_width="wrap_content"
    android:layout_below="@+id/tvListTime"
    android:layout_height="wrap_content"
    android:text="Crystal plaza , Andheri (West) . "
    android:textColor="#138F6A"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/tvListDetails"
    android:layout_width="250dp"
    android:layout_below="@+id/tvListWhere"
    android:layout_height="20dp"
    android:text="This is gonna contain brief summary about the event"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/tvListDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="14th January"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/tvListDay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tvListDetails"
    android:text="Monday"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageView
    android:id="@+id/ivStatus"
    android:layout_width="40dp"
    android:layout_height="40dp"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/tvListWhere"
    android:src="@drawable/yes" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:50:15.367

您可以使用 startactivityforresult()

或者

在当前活动中使用三个静态变量，并根据打开的新活动中按下的按钮设置它们，当涉及到前一个活动时，检查变量并相应地设置图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:34:41.597

已解决，我正在使用 SD 卡上图像的 url 并将其存储在 sqlite db 中，并使用数据库行的内容填充列表视图

# mysql - eclipselink MySQL左连接错误：未知列

> ID：14336758
> 
> 赞同：1
> 
> 时间：2013-01-15T11:29:05.930
> 
> 标签：mysql, jpa-2.0, eclipselink, left-join

我有这个数据模型：

```
AbstractEntity (abstract, @MappedSuperClass)
    |
    +---- Subject (abstract, @Entity, joined)
    |       |
    |       +---- Person (@Entity)
    |       |
    |       +---- ...
    |
    +---- Metadata (abstract, @Entity, joined)
            |
            +---- ... 
```

实现：

```
@MappedSuperclass
public abstract class AbstractEntity implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(nullable = false)
    protected Long id;

    @Version
    protected Integer version;

    ...
}

@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Subject extends AbstractEntity
{
    @ManyToOne
    @JoinColumn(name = "PROFILE_ID")
    protected Profile profile;

    @ElementCollection
    @CollectionTable(name = "SUBJECT_RIGHTS", joinColumns = @JoinColumn(name = "OWNER_ID"))
    @Column(name = "CODE")
    protected Set<String> rightSet = new HashSet<String>();

    @Transient
    public abstract String getTitle();

    ...
}

@Entity
public class Person extends AbstractEntity
{
    @NotBlank
    private String firstName;

    @NotBlank
    private String lastName;

    ...
}

@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Metadata extends AbstractEntity
{
    @ElementCollection
    @CollectionTable(name = "METADATA_PREFERENCE", joinColumns = @JoinColumn(name = "METADATA_ID"))
    @MapKeyJoinColumn(name = "PERSON_ID", nullable = false)
    @Enumerated(EnumType.STRING)
    @Column(name = "PREFERENCE", nullable = false)
    protected Map<Person, PreferenceType> preferenceMap = new LinkedHashMap<Person, PreferenceType>();

    ...
} 
```

我正在尝试执行此查询：

```
select m.id from Metadata m left join m.preferenceMap p [where not important] 
```

和 eclipselink 生成这个 SQL：

```
SELECT t0.ID FROM METADATA t0 LEFT OUTER JOIN METADATA_PREFERENCE t3 ON ((t3.METADATA_ID = t0.ID) AND (t1.ID = t3.PERSON_ID)), PERSON t2, SUBJECT t1 [where not important] 
```

但是这个查询会产生一个异常：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 't1.ID' in 'on clause' 
```

我知道 MySQL 连接优先级，所以我需要 eclipselink 以这种方式重写查询：

```
SELECT t0.ID FROM (METADATA t0, SUBJECT t1) LEFT OUTER JOIN METADATA_PREFERENCE t3 ON ((t3.METADATA_ID = t0.ID) AND (t1.ID = t3.PERSON_ID)), PERSON t2 [where not important] 
```

***这个怎么做？？？***

但是我正在使用：

```
mysql:
+-------------------------+------------------------------+
| Variable_name           | Value                        |
+-------------------------+------------------------------+
| innodb_version          | 1.1.7                        |
| protocol_version        | 10                           |
| slave_type_conversions  |                              |
| version                 | 5.5.13-log                   |
| version_comment         | MySQL Community Server (GPL) |
| version_compile_machine | x86                          |
| version_compile_os      | Win64                        |
+-------------------------+------------------------------+

eclipselink: 
Eclipse Persistence Services - 2.4.1.v20121003-ad44345 
```

这是persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="prime" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/prime</jta-data-source>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <property name="eclipselink.target-database" value="MySQL"/>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/prime"/>
            <property name="javax.persistence.jdbc.user" value="root"/>
            <property name="javax.persistence.jdbc.password" value="password"/>
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:38:37.550

加入复杂的 Map ElementCollection 似乎很困惑。似乎是一个错误，请记录错误并为它投票，同时确保您使用的是最新的补丁版本。

您可以将 ElementCollection 作为 OneToMany 映射到具有人员和类型的 Preference 对象。这将是一个更直接的模型。

如果您不需要外部联接（或者如果您需要外部联接语义，则可能使用子查询），内部联接也可能起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T12:50:07.203

eclipselink 2.5.0 (jpa 2.1) 解决了这个错误。

# web-services - 使用 SoapUI 的问题：“表示消息寻址属性的必需标头不存在

> ID：14336760
> 
> 赞同：2
> 
> 时间：2013-01-15T11:29:06.953
> 
> 标签：web-services, soapui

在尝试测试我的应用程序时，我使用 wsdl 页面创建新的 SoapUi 项目，但调用任何方法都会返回以下错误消息。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:41:24.647

解决了。需要在 SoapUi 设置中禁用 WS-A 选项。

# mysql - 为什么“SHOW GLOBAL STATUS”会出现在慢日志中？

> ID：14336767
> 
> 赞同：3
> 
> 时间：2013-01-15T11:29:27.973
> 
> 标签：mysql, mysql-slow-query-log

我经常查看我的一台 MySQL 复制服务器上的慢速日志，发现最常见的慢速查询`SHOW GLOBAL STATUS`平均运行时间为 914 秒。

我已经知道它为什么存在（一个监控探针正在生成请求），我的问题是为什么它需要这么长时间才能运行？

服务器正在运行 MySQL Server 5.0.95。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:41:48.250

`SHOW GLOBAL STATUS``INFORMATION_SCHEMA.GLOBAL_VARIABLES`从名为which的表中读取，作为`MEMORY`表，更新时需要全表锁定。

如果正在进行会更改全局变量的操作，`SHOW GLOBAL STATUS`则必须等待此操作完成。

# jquery - 插入一个 html 按钮作为 jquery ui 自动完成列表的最后一个元素

> ID：14336768
> 
> 赞同：6
> 
> 时间：2013-01-15T11:29:31.163
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我一直在尝试插入一个 html 按钮作为 jquery ui 自动完成列表的最后一个元素。该按钮应该打开一个弹出窗口，其中包含向自动完成列表添加新元素的选项。这是在自动完成列表中插入按钮的代码：

```
data.push({label: '<input type="button" name="btn_name_field" id="btn_name_field" title="Create" class="button firstChild" value="Add new">'});
response(data); 
```

这是打开弹出窗口的函数：

```
$(document).on("click", "#btn_name_field", function () {
    open_popup("Street_Address", 400, 180, "", true, false,  {"call_back_function":"set_return","form_name":"EditView"}, "single", true );
}); 
```

为了能够将 html 作为“标签”插入其中，我不得不使用这个函数：

```
$[ "ui" ][ "autocomplete" ].prototype["_renderItem"] = function( ul, item) {
return $( "<li></li>" ) 
  .data( "item.autocomplete", item )
  .append( $( "<a></a>" ).html( item.label ) )
  .appendTo( ul );
}; 
```

发生的情况是：该按钮看起来很好并且执行了它应该做的事情（打开一个弹出窗口）但是在打开弹出窗口之后，来自 html 输入的所有代码都被插入到文本框中。这是合乎逻辑的行为，因为代码是作为标签插入的，但是有人知道插入 html 按钮作为自动完成的最后一个元素的最佳方法是什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:56:49.310

如果您使用的是 jQueryUI >= 1.9，这似乎是`response`回调的好工作。在填充源数组之后，但在项目显示给用户之前调用此回调。您可以利用此事件在您的建议数组上推送一个新的“按钮”对象。

这个“按钮”对象有一个`label`属性是您要添加的按钮的 HTML，它还有一个`button`设置为 true 的属性。您可以使用此属性取消`select`事件的默认操作：

```
$.ui.autocomplete.prototype._renderItem = function (ul, item) {
    return $("<li></li>")
        .data("item.autocomplete", item)
        .append($("<a></a>").html(item.label))
        .appendTo(ul);
};

$("#auto").autocomplete({
    source: /* source */
    response: function (event, ui) {
        // Add the "button" object to the list of suggestions:
        ui.content.push({
            label: "<input type='button' value='click me' class='mybutton' />",
            button: true
        });
    },
    select: function (event, ui) {
        // If this is the button, don't populate the <input>
        if (ui.item.button) {
            event.preventDefault();
        }
    }
}); 
```

另外，我建议使用委托事件处理程序，而不是在为按钮生成的标记内编写事件处理代码。一种方法是为您的按钮提供一个类（我`.mybutton`在示例中使用过），并使用以下方法编写委托事件处理程序`on`：

```
$(document).on("click", ".mybutton", function () {
    alert('clicked!');
}); 
```

这是一个工作示例：http: [//jsfiddle.net/J5rVP/35/](http://jsfiddle.net/J5rVP/35/)

# android - JodaTime - 添加/减去小时和分钟，只有分钟被正确添加/减去？

> ID：14336771
> 
> 赞同：0
> 
> 时间：2013-01-15T11:29:37.147
> 
> 标签：android, jodatime, localtime

在有点问题。我有一个 onClick ，单击它会获取当前时间并添加一定数量的小时和分钟。下面的代码是我所拥有的，它当前将数据发送到另一个 Activity 并显示它，但它不会改变时间。

```
public void onClickHere (View v) {

    String ti1me, ti2me, ti3me;

    //carry out calculation
    LocalTime localtime = new LocalTime();
    LocalTime dt = new LocalTime(localtime);

        //Add two hours and subtract 10 minutes
        LocalTime twoHoursLater = dt.plusHours(2);
                  twoHoursLater = dt.minusMinutes(10);

        //Add three hours and 9 minutes
        LocalTime threeHoursLater = dt.plusHours(3);
                  threeHoursLater = dt.plusMinutes(9);

        //Add five hours and subtract 8 minutes
        LocalTime fiveHoursLater = dt.plusHours(5);
                  fiveHoursLater = dt.minusMinutes(8);

    DateTimeFormatter formatter = DateTimeFormat.forPattern("HH:mm");
    ti1me = (twoHoursLater.toString(formatter));
    ti2me = (threeHoursLater.toString(formatter));
    ti3me = (fiveHoursLater.toString(formatter));

    Intent i = new Intent(this, WakeUpMain.class);
    i.putExtra("time1", ti1me);
    i.putExtra("time2", ti2me);
    i.putExtra("time3", ti3me);
    startActivity(i);

} 
```

正如你所看到的，我试图获得三倍，并为两者添加不同的分钟和小时，分钟添加很好，但小时与当前时间保持一致，或者根据分钟的添加方式以及它是否进入下一个小时。

我输入这个是 11:22，如果我运行应用程序并单击按钮，输出是： 11:
11
11:31
11:14

时间不变。有没有办法解决这个问题？小时仅在例如时间为 11:05 时更改，第一次将显示为 10:55。

将不胜感激任何帮助。真的让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:36:48.400

当您添加分钟时，您会刷新小时增量：

```
twoHoursLater = dt.minusMinutes(10); 
```

采用

```
LocalTime twoHoursLater = dt.minusMinutes(10);
    twoHoursLater = twoHoursLater.plusHours(2); 
```

# html - 嵌入在 Silverlight 应用程序中的 HTML5

> ID：14336774
> 
> 赞同：0
> 
> 时间：2013-01-15T11:29:45.843
> 
> 标签：html, silverlight

我对 silverlight 很陌生，我正在寻求有关在 silverlight 应用程序中嵌入外部 html 页面的建议。

外部 html 页面的内容可以集成到 silverlight 应用程序中吗？

现代浏览器中存在的 SVG 支持或 Socket.IO 等功能怎么样？如果外部页面使用 HTML5 功能，silverlight 可以正确渲染/处理它吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:50:37.237

在 Silverlight 中呈现 HTML 页面没有本机支持。但是，您可以从 Silverlight 中访问和操作 DOM 元素。这允许您将 HTML 元素放置在 silverlight 应用程序的顶部，并且通过适当调整这些元素的大小和位置，您可以在简单的应用程序中创建嵌入 HTML 的错觉。

# vim - Vim 代码完成和底部的神秘消息

> ID：14336777
> 
> 赞同：0
> 
> 时间：2013-01-15T11:29:59.453
> 
> 标签：vim, code-completion, vim-plugin, vim-powerline

每次我启动 vim 时，我都会在下图中的底部看到以下神秘文字：

![vim 神秘按摩底部](../Images/2f1df3056b87c459a45e0c2822a2699b.png) 我通过以下方式安装了所有插件

```
#VIM

sudo  equo install setuptools ctags ipython rope ropemode 
easy_install --prefix=/home/uqmlore1/apps/pymodules -UZ git+git://github.com/kevinw/pyflakes.git
easy_install --prefix=/home/uqmlore1/apps/pymodules -UZ pylint
easy_install --prefix=/home/uqmlore1/apps/pymodules -UZ pep8

mkdir -p ~/.vim/colors && cd ~/.vim/colors 
wget -O wombat256mod.vim http://www.vim.org/scripts/download_script.php?src_id=13400
mkdir -p ~/.vim/autoload ~/.vim/bundle
curl -so ~/.vim/autoload/pathogen.vim https://raw.github.com/tpope/vim-pathogen/HEAD/autoload/pathogen.vim

cd ~/.vim/
git init
git submodule add git://github.com/Lokaltog/vim-powerline.git bundle/vim-powerline
git submodule add https://github.com/kien/ctrlp.vim.git bundle/ctrlp.vim
git submodule add https://github.com/ivanov/vim-ipython bundle/vim-ipython      
git submodule add https://github.com/majutsushi/tagbar bundle/tagbar
git submodule add https://github.com/vim-scripts/indentpython.vim bundle/indentpython
git submodule add https://github.com/scrooloose/syntastic bundle/syntastic
git submodule add https://github.com/scrooloose/nerdtree bundle/nerdtree
git submodule add https://github.com/scrooloose/nerdcommenter bundle/nerdcommenter
git submodule add https://github.com/vim-scripts/mru.vim bundle/mru.vim
git submodule add https://github.com/tpope/vim-surround.git bundle/vim-surround ?
git submodule add https://github.com/ervandew/supertab.git bundle/supertab
git submodule add https://github.com/kevinw/pyflakes-vim bundle/pyflakes-vim
git submodule add https://github.com/sjl/gundo.vim.git bundle/gundo.vim
git submodule add https://github.com/fs111/pydoc.vim.git bundle/pydoc.vim
git submodule add https://github.com/vim-scripts/pep8.git bundle/pep8
git submodule add https://github.com/alfredodeza/pytest.vim.git bundle/pytest.vim
git submodule add https://github.com/reinh/vim-makegreen bundle/vim-makegreen
git submodule add https://github.com/sontek/rope-vim.git bundle/rope-vim
git submodule init
git submodule update
git submodule foreach git submodule init
git submodule foreach git submodule update
rm -rf .git .gitmodules

mkdir -p ~/.vim/ftplugin 
wget -O ~/.vim/ftplugin/python_editing.vim http://www.vim.org/scripts/download_script.php?src_id=5492

" Sample .vimrc file by Martin Brochhaus
" Presented at PyCon APAC 2012

" Automatic reloading of .vimrc
autocmd! bufwritepost .vimrc source %

" Better copy & paste
" When you want to paste large blocks of code into vim, press F2 before you
" paste. At the bottom you should see ``-- INSERT (paste) --``.

set pastetoggle=<F2>
set clipboard=unnamed

" Mouse and backspace
set mouse=a  " on OSX press ALT and click
"" set bs=2     " make backspace behave like normal again

" Rebind <Leader> key
" I like to have it here becuase it is easier to reach than the default and
" it is next to ``m`` and ``n`` which I use for navigating between tabs.
let mapleader = ","

" Bind nohl
" Removes highlight of your last search
" ``<C>`` stands for ``CTRL`` and therefore ``<C-n>`` stands for ``CTRL+n``
noremap <C-n> :nohl<CR>
vnoremap <C-n> :nohl<CR>
inoremap <C-n> :nohl<CR>

" Quicksave command
"" noremap <C-Z> :update<CR>
"" vnoremap <C-Z> <C-C>:update<CR>
"" inoremap <C-Z> <C-O>:update<CR>

" Quick quit command
"" noremap <Leader>e :quit<CR>  " Quit current window
"" noremap <Leader>E :qa!<CR>   " Quit all windows

" bind Ctrl+<movement> keys to move around the windows, instead of using Ctrl+w + <movement>
" Every unnecessary keystroke that can be saved is good for your health :)
map <c-j> <c-w>j
map <c-k> <c-w>k
map <c-l> <c-w>l
map <c-h> <c-w>h

" easier moving between tabs
map <Leader>n <esc>:tabprevious<CR>
map <Leader>m <esc>:tabnext<CR>

" map sort function to a key
vnoremap <Leader>s :sort<CR>

" easier moving of code blocks
" Try to go into visual mode (v), thenselect several lines of code here and
" then press ``>`` several times.
vnoremap < <gv  " better indentation
vnoremap > >gv  " better indentation

" Show whitespace
" MUST be inserted BEFORE the colorscheme command
autocmd ColorScheme * highlight ExtraWhitespace ctermbg=red guibg=red
au InsertLeave * match ExtraWhitespace /\s\+$/

" Color scheme
" mkdir -p ~/.vim/colors && cd ~/.vim/colors
" wget -O wombat256mod.vim http://www.vim.org/scripts/download_script.php?src_id=13400
set t_Co=256
color wombat256mod

" Enable syntax highlighting
" You need to reload this file for the change to apply
filetype off
filetype plugin indent on
syntax on

" Showing line numbers and length
set number  " show line numbers
set tw=79   " width of document (used by gd)
set nowrap  " don't automatically wrap on load
set fo-=t   " don't automatically wrap text when typing
set colorcolumn=80
highlight ColorColumn ctermbg=233

" easier formatting of paragraphs
vmap Q gq
nmap Q gqap

" Useful settings
set history=700
set undolevels=700

" Real programmers don't use TABs but spaces
set tabstop=4
set softtabstop=4
set shiftwidth=4
set shiftround
set expandtab

" Make search case insensitive
set hlsearch
set incsearch
set ignorecase
set smartcase

" Disable stupid backup and swap files - they trigger too many events
" for file system watchers
set nobackup
set nowritebackup
set noswapfile

" Setup Pathogen to manage your plugins
" mkdir -p ~/.vim/autoload ~/.vim/bundle
" curl -so ~/.vim/autoload/pathogen.vim https://raw.github.com/tpope/vim-pathogen/HEAD/autoload/pathogen.vim
" Now you can install any plugin into a .vim/bundle/plugin-name/ folder
call pathogen#infect()

" ============================================================================
" Python IDE Setup
" ============================================================================

" Settings for vim-powerline
" cd ~/.vim/bundle
" git clone git://github.com/Lokaltog/vim-powerline.git
set laststatus=2

" Settings for ctrlp
" cd ~/.vim/bundle
" git clone https://github.com/kien/ctrlp.vim.git
let g:ctrlp_max_height = 30
set wildignore+=*.pyc
set wildignore+=*_build/*
set wildignore+=*/coverage/*

" Settings for python-mode
" cd ~/.vim/bundle
" git clone https://github.com/klen/python-mode
map <Leader>g :call RopeGotoDefinition()<CR>
let ropevim_enable_shortcuts = 1
let g:pymode_rope_goto_def_newwin = "vnew"
let g:pymode_rope_extended_complete = 1
let g:pymode_breakpoint = 0
let g:pymode_syntax = 1
let g:pymode_syntax_builtin_objs = 0
let g:pymode_syntax_builtin_funcs = 0
map <Leader>b Oimport ipdb; ipdb.set_trace() # BREAKPOINT<C-c>

" Better navigating through omnicomplete option list
" See http://stackoverflow.com/questions/2170023/how-to-map-keys-for-popup-menu-in-vim
"" set completeopt=longest,menuone
function! OmniPopup(action)
if pumvisible()
    if a:action == 'j'
    return "\<C-N>"
    elseif a:action == 'k'
    return "\<C-P>"
    endif
endif
return a:action
endfunction

inoremap <silent><C-j> <C-R>=OmniPopup('j')<CR>
inoremap <silent><C-k> <C-R>=OmniPopup('k')<CR>

" Python folding
" mkdir -p ~/.vim/ftplugin
" wget -O ~/.vim/ftplugin/python_editing.vim http://www.vim.org/scripts/download_script.php?src_id=5492
set nofoldenable

" SuperTab plugin can be used to avoid needing to press Ctrl-X then Ctrl-O to invoke the popup completion menu. 
let g:SuperTabDefaultCompletionType = "context" 
```

*   为了完成代码，我在配置 vim 时在哪里犯了错误？
*   为什么我在底部得到那个神秘的按摩？
*   vimrc 整体还好吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:56:06.800

看起来电力线插件有问题，请查看他们的[故障排除](https://github.com/Lokaltog/vim-powerline)部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:57:55.773

采用别人的配置并不是一个好主意，但一般来说，你`~/.vimrc`没问题。它不应该是问题的原因。

我建议通过使用旧的“二等分调试”方法来缩小可能的原因：你没有很多插件，所以应该很快。

我支持电力线的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:06:14.293

谢谢你。[你是对的 powerline 在https://github.com/Lokaltog/powerline](https://github.com/Lokaltog/powerline)下有一个更新的版本，我不得不将这一行添加到 vimrc

```
source ~/.vim/bundle/powerline/powerline/ext/vim/source_plugin.vim
let g:Powerline_symbols = 'fancy'
set laststatus=2 
```

# iphone - 无法在 ios 的特定文件夹中创建数据库

> ID：14336780
> 
> 赞同：1
> 
> 时间：2013-01-15T11:30:07.923
> 
> 标签：iphone, ios, objective-c, sqlite

我正在使用越狱设备，我不是为应用商店开发。我一开始使用此代码在我的代码中创建了一个数据库。

```
 if(temporaryvariable == 0 ) {
            if (![[NSFileManager defaultManager]fileExistsAtPath:@"/Library/Myapp/Storage"]) {
                NSLog(@"Creating Direcotory Documents");
                [[NSFileManager defaultManager] createDirectoryAtPath:@"/Library/Myapp/Storage" withIntermediateDirectories:YES attributes:nil error:nil];
            }
            storeURL = [NSURL fileURLWithPath:@"/Library/Myapp/Storage/my.sqlite" isDirectory:NO];
        } else {
            storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"my.sqlite"];

        } 
```

如果我将 db 路径更改为 root/var/mobile/documents，则代码可以正常工作。但是当我使用上面代码中给出的路径时，应用程序崩溃并出现以下错误。

> 未解决的错误 Error Domain=NSCocoaErrorDomain Code=256 “操作无法完成。（Cocoa 错误 256。）” UserInfo=0x334a30 {NSUnderlyingException=authorization denied, NSSQLiteErrorDomain=23} ,,, { NSSQLiteErrorDomain = 23; NSUnderlyingException = "授权被拒绝"; } with store url file://localhost/Library/Myapp/Storage/my.sqlite 中止陷阱：6

我什至尝试更改存储文件夹的权限，但它不起作用。请帮我解决这个错误 **编辑：** 这个文件夹实际上是我在越狱 iphone 上的应用程序的主要包。

# 64-bit - 如何在 linux x64 上使用潮汐dk 运行应用程序？

> ID：14336787
> 
> 赞同：0
> 
> 时间：2013-01-15T11:30:22.540
> 
> 标签：64-bit, debian, tidesdk

我想像这样使用tidebuilder.py 运行HelloWorld 应用程序（来自TideSDK- *Developer* *-1.4.2-linux-x86-64.tgz 的TideSDK Developer*对我不起作用）：

```
./tidebuilder.py -rv TideSDK-HelloWorld-master

> Staging HelloWorld
>    -> Copying contents from /home/xliivdeb/.tidesdk/sdk/linux/1.3.1-beta/TideSDK-HelloWorld-master to /home/xliivdeb/.tidesdk/sdk/linux/1.3.1-beta/HelloWorld
>    -> Copying installer from /home/xliivdeb/.tidesdk/sdk/linux/1.3.1-beta/installer to /home/xliivdeb/.tidesdk/sdk/linux/1.3.1-beta/HelloWorld
>    -> Copying tiboot to /home/xliivdeb/.tidesdk/sdk/linux/1.3.1-beta/HelloWorld
> /home/xliivdeb/.tidesdk/sdk/linux/1.3.1-beta/HelloWorld/HelloWorld: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.14' not found (required by /home/xliivdeb/.tidesdk/sdk/linux/1.3.1-beta/HelloWorld/HelloWorld) 
```

但它**失败**了，因为根据错误消息缺少文件。当我手动检查时，会发生不同的事情，请参见：

```
$  ll /lib/x86_64-linux-gnu/libc.so.6
lrwxrwxrwx 1 root root 12 Nov 19 00:07 /lib/x86_64-linux-gnu/libc.so.6 -> libc-2.13.so* 
```

如何解决？

平台：Linux alef 3.2.0-4-amd64 #1 SMP Debian 3.2.35-2 x86_64 GNU/Linux

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:09:46.230

这个问题是依赖问题。某些 TideSDK 依赖包不可用或版本较旧。

使用适当的 deb 打包安装程序可以解决此问题。这是一个新功能请求，现在在以下位置进行跟踪：[https ://github.com/TideSDK/TideSDK/issues/136](https://github.com/TideSDK/TideSDK/issues/136)

# wpf - XAML：自动在文本框中移动光标

> ID：14336792
> 
> 赞同：0
> 
> 时间：2013-01-15T11:31:00.147
> 
> 标签：wpf, xaml

我不知道这是否有效，但是否有机会将光标`Textbox`自动移动到一个位置（1 个空格键单击）。例如：我运行应用程序，光标在里面`Textbox`自动移动一个空格键

我的文本框：

```
<TextBox TextChanged="Searchbox_TextChanged" x:Name="Testing" Margin="2" Grid.Row="1" Text="{Binding SearchSmthg, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}" VerticalContentAlignment="Center" Controls:TextboxHelper.ClearTextButton="True" Controls:TextboxHelper.Watermark="Search ..."/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:43:45.580

使用[`CaretIndex`](https://stackoverflow.com/a/2892988/352101)和`FocusManager`：

```
 <Window x:Class="WpfApplication1.Window1"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="Window1" Height="300" Width="300">
        <Grid FocusManager.FocusedElement="{Binding ElementName=Focustext}">
            <TextBox x:Name="Focustext" Text=" " CaretIndex="1" MaxHeight="25"  />
        </Grid>
    </Window> 
```

**编辑：**添加一个`GotFocus`事件处理程序并在`CaretIndex=1`那里设置

*XAML：*

```
<TextBox GotFocus="Testing_GotFocus" 
```

*代码背后：*

```
private void Testing_GotFocus(object sender, RoutedEventArgs e)
        {
            //make sure your Textbox is not empty..
            Testing.CaretIndex = 1;
        } 
```

# testing - 无法构建 CUDA 测试应用程序

> ID：14336795
> 
> 赞同：0
> 
> 时间：2013-01-15T11:31:05.067
> 
> 标签：testing, build, cuda, nvidia

目前遵循 Microsoft Windows 的 CUDA 入门指南 [ [http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-microsoft-windows/index.html](http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-microsoft-windows/index.html) ]；安装了 CUDA；样本和 NSight；我在 Visual Studio 2010 上；我检查了我的卡，它支持 CUDA。我按照教程一直到演示部分......但我收到以下错误消息：

==================================================== ====================================

```
1>CudaBuild:
1>  Compiling CUDA source file bandwidthTest.cu...
1>  
1>  C:\ProgramData\NVIDIA Corporation\CUDA Samples\v5.0\1_Utilities\bandwidthTest>"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" -gencode=arch=compute_20,code=\"sm_20,compute_20\" -gencode=arch=compute_30,code=\"sm_30,compute_30\" -gencode=arch=compute_35,code=\"sm_35,compute_35\" --use-local-env --cl-version 2010 -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin"  -I"./" -I"../../common/inc" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  -G   --keep-dir "Debug" -maxrregcount=0  --machine 32 --compile  -g   -DWIN32 -D_MBCS -Xcompiler "/EHsc /W3 /nologo /Od /Zi /RTC1 /MTd  " -o "Win32/Debug/bandwidthTest.cu.obj" "C:\ProgramData\NVIDIA Corporation\CUDA Samples\v5.0\1_Utilities\bandwidthTest\bandwidthTest.cu" 
1>  bandwidthTest.cu
1>C:/ProgramData/NVIDIA Corporation/CUDA Samples/v5.0/1_Utilities/bandwidthTest/bandwidthTest.cu(117): error : identifier "cin" is undefined
1>  
1>  1 error detected in the compilation of "C:/Users/James/AppData/Local/Temp/tmpxft_00001654_00000000-14_bandwidthTest.compute_35.cpp1.ii".
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 5.0.targets(592,9): error MSB3721: The command ""C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" -gencode=arch=compute_20,code=\"sm_20,compute_20\" -gencode=arch=compute_30,code=\"sm_30,compute_30\" -gencode=arch=compute_35,code=\"sm_35,compute_35\" --use-local-env --cl-version 2010 -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin"  -I"./" -I"../../common/inc" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  -G   --keep-dir "Debug" -maxrregcount=0  --machine 32 --compile  -g   -DWIN32 -D_MBCS -Xcompiler "/EHsc /W3 /nologo /Od /Zi /RTC1 /MTd  " -o "Win32/Debug/bandwidthTest.cu.obj" "C:\ProgramData\NVIDIA Corporation\CUDA Samples\v5.0\1_Utilities\bandwidthTest\bandwidthTest.cu"" exited with code 2.
1>
1>Build FAILED. 
```

==================================================== ====================================

我承认 cin 是 iostream 的一部分，我已经验证它是我的代码中包含指令的一部分......

我来自网络开发人员的背景；我很少对这些类型进行编程......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:10:09.357

我假设您已经修改了 bandwidthTest.cu 文件并且这不是 vanilla SDK 示例（因为快速检查显示它默认不使用 cin！）。

您要么需要使用`std::cin`明确声明范围，要么将或添加`using namespace std`到`using std::cin`文件顶部（包括 iostream 之后）或函数顶部。

搜索有关命名空间的信息应该提供更多背景信息，例如[本教程](http://www.cplusplus.com/doc/tutorial/namespaces/)。

如果这不是问题，然后发布一些代码。

**更新**

从您的评论看来，您真正的问题是如何在 VS2010 中创建 CUDA 项目。有关这方面的信息，请参阅[此答案](https://stackoverflow.com/a/7285235/214473)！基本上，您需要`.cu`在项目中创建文件，然后告诉 Visual Studio 如何处理它们（即启用构建自定义）。

# c# - 比较数据表中的值，如果它们相同则更改它

> ID：14336797
> 
> 赞同：3
> 
> 时间：2013-01-15T11:31:11.153
> 
> 标签：c#, datatable, compare, datagridviewcolumn

我想检查“名称”列下是否有任何相同的值。如果是，那么我想检查下一个相同的值是否 > 位 + 大小。我可以用 2 个 for 循环来做到这一点，但我想要的是更简单的东西。谁能告诉我怎么做？

我的数据表：

```
name    Bit    Size
m1      8       3
m0      9       5
m1      10      2    // Error, should be 11
m2      11      4 
```

我的代码：

```
for(int i = 0; i <= Dt.Rows.Count - 1; i++)
{
    for(int y = i +1; y <= Dt.Rows.Count - 1, y++ )
      {
          if(Dt.Rows[i]["name"].ToString() == Dt.Rows[y]["Name"].ToString())
                if( (Convert.ToInt32(Dt.Rows[i]["Bit"].ToString()) + Convert.ToInt32(Dt.Rows[i]["Size"].ToString()) > (Convert.ToInt32(Dt.Rows[y]["Bit"].ToString())   ) )
                    {
                         // Show Error
                         MessageBox.Show("Error");
                         Dt.Rows[y]["Bit"] = Dt.Rows[i]["Bit"];
                    }
      } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:56:40.770

对于它的价值，这是 Linq 方法：

```
var invalidGroups = DT.AsEnumerable()
    .GroupBy(r => r.Field<string>("name"))
    .Where(g => g.Count() > 1)
    .Select(g => new { Name = g.Key, FirstRow = g.First(), Group = g })
    .Select(x => new { x.Name, x.FirstRow, x.Group, FirstSum = x.FirstRow.Field<int>("Bit") + x.FirstRow.Field<int>("Size") })
    .Where(x => x.Group.Any(r => x.FirstSum < r.Field<int>("Bit") + r.Field<int>("Size")));
foreach (var x in invalidGroups)
{
    string name = x.Name;
    DataRow referenceRow = x.FirstRow;
    var invalidRows = x.Group
        .Where(r => x.FirstSum < r.Field<int>("Bit") + r.Field<int>("Size"));
    foreach (DataRow r in invalidRows)
    {
        int sum = r.Field<int>("Bit") + r.Field<int>("Size"); // 12 instead of 11
        r.SetField("Bit", referenceRow.Field<int>("Bit"));
        r.SetField("Size", referenceRow.Field<int>("Size"));
    }
} 
```

正如你所看到的，它并不是真的更短，但可能更易于维护或可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:01:31.830

在 SQL 中试试这个

```
select b.name, b.bits + b.size
from Table_1 b 
where exists (select name from Table_1 a where a.name = b.name group by name having count(*) > 1)
group by b.name, b.bits + b.size
having count(*) = 1 
```

# maven - Maven依赖插件在构建类路径和树之间的排序差异

> ID：14336801
> 
> 赞同：3
> 
> 时间：2013-01-15T11:31:17.547
> 
> 标签：maven, maven-3, maven-dependency-plugin

谁能解释为什么我会在 maven-dependency-plugin 上的树和构建类路径之间获得不同的输出顺序？

我在跑

`mvn -pl releases org.apache.maven.plugins:maven-dependency-plugin:2.6:tree -Dtokens=whitespace -outputFile=tree.txt -DexcludeTransitive=true`

在命令行上生成输出。tree 的输出反映了 pom 文件中定义的顺序，而 build-classpath 的输出则没有。

树[http://pastebin.com/J2Q6iTK6的输出](http://pastebin.com/J2Q6iTK6)

构建类路径[http://pastebin.com/k2SdrHP7的输出](http://pastebin.com/k2SdrHP7)

任何见解将不胜感激。

Maven 配置

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.6</version>
            <executions>
                <execution>
                    <id>generate-classpath-windows</id>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>build-classpath</goal>
                    </goals>
                    <configuration>
                        <pathSeparator>,</pathSeparator>
                        <prefix>..\jars</prefix>
                        <fileSeparator>\</fileSeparator>
                        <outputFile>${project.build.directory}/deployment/bin/classpath.windows</outputFile>
                    </configuration>
                </execution>
                <execution>
                    <id>generate-classpath-unix</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>build-classpath</goal>
                    </goals>
                    <configuration>
                        <pathSeparator>:</pathSeparator>
                        <prefix>../jars</prefix>
                        <fileSeparator>/</fileSeparator>
                        <outputFile>${project.build.directory}/deployment/bin/classpath.unix</outputFile>
                    </configuration>
                </execution>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/deployment/jars</outputDirectory>
                    </configuration>
                </execution>
            </executions>
            <configuration>
                <overWriteReleases>false</overWriteReleases>
                <overWriteSnapshots>true</overWriteSnapshots>
                <overWriteIfNewer>true</overWriteIfNewer>
                <excludeTransitive>true</excludeTransitive>
                <includeScope>runtime</includeScope>
                <regenerateFile>true</regenerateFile>
            </configuration>
        </plugin> 
```

信息

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 08:44:56+0000)
Maven home: C:\apps\apache-maven-3.0.4
Java version: 1.6.0_37, vendor: Sun Microsystems Inc.
Java home: C:\Program Files\Java\jdk1.6.0_37\jre
Default locale: en_GB, platform encoding: Cp1252
OS name: "windows 7", version: "6.1", arch: "x86", family: "windows" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:09:53.573

类路径是线性表示，树是嵌套的。Maven 应该尝试将根级别依赖项首先保留在类路径中，因为它们最接近，因此应该首先解决。

从您的输出来看，虽然这看起来很奇怪，但我没有看到我期望的正常逻辑重新类路径构造。

此外，直到 2.6 版本的依赖插件，在 Maven 3.x 上，`dependency:tree`输出是不正确的。我想知道是否存在`build-classpath`来自同一根本原因的错误。我会将这个问题发送给 users@maven.apache.org 以查看是否有人（修复了 Hervé`dependency:tree`的人）知道答案......

# java - 从 Youtube 提取的评论数量是否有限制？

> ID：14336803
> 
> 赞同：4
> 
> 时间：2013-01-15T11:31:26.280
> 
> 标签：java, youtube-api

我正在尝试使用带有 Java 的 youtube-api 提取对一些 YouTubeVideo 的评论。一切都很好，除了如果视频有大量评论（它停在 950 到 999 之间），我无法提取所有评论。我正在遵循一种简单的方法，即通过 VideoEntry 的 CommentFeed 进行分页，获取每个页面上的评论，然后将每个评论存储在 ArrayList 中，然后再将它们写入 XML 文件。这是我检索评论的代码

```
int commentCount = 0;
CommentFeed commentFeed = service.getFeed(new URL(commentUrl), CommentFeed.class);
do {
          //Gets each comment in the current feed and prints to the console
            for(CommentEntry comment : commentFeed.getEntries()) {
                    commentCount++;
                    System.out.println("Comment " + commentCount + " plain text content: " + comment.getPlainTextContent());
            }

           //Checks if there is a next page of comment feeds
            if (commentFeed.getNextLink() != null) {
                    commentFeed = service.getFeed(new URL(commentFeed.getNextLink().getHref()), CommentFeed.class);
            }
            else {
                commentFeed = null;
            }
        }
        while (commentFeed != null); 
```

我的问题是：我可以提取的评论数量是否有限制，或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:36:54.883

使用/参考这个

```
String commentUrl = videoEntry.getComments().getFeedLink().getHref();

CommentFeed commentFeed = service.getFeed(new URL(commentUrl), CommentFeed.class);
for(CommentEntry comment : commentFeed.getEntries()) {
  System.out.println(comment.getPlainTextContent());
} 
```

[资源](https://developers.google.com/youtube/2.0/developers_guide_java)

每次迭代的最大结果数为 50（似乎），如此[处所述](https://stackoverflow.com/questions/10073690/maximum-number-of-comments-from-youtube-video-with-api)

[并且您可以使用 start-index 来检索这里](https://developers.google.com/youtube/2.0/reference?hl=it-IT#max-resultssp)提到的多个结果集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:12:15.320

Google 搜索 API 以及 Youtube 评论搜索限制最大​​。1000 个结果，你不能提取超过 1000 个结果

# android - 如何检索已安装的带有图标的应用程序

> ID：14336805
> 
> 赞同：0
> 
> 时间：2013-01-15T11:31:40.590
> 
> 标签：android, android-intent

下面给出的是我用来从手机中检索应用程序列表的 java 和 xml 文件中的代码。但是，它不会连同它一起检索应用程序的图标。任何人都可以根据给定的代码提供解决方案，以了解如何实现检索应用程序图标的目标吗？帮助将不胜感激

xml 文件：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

    <ListView android:id="@+id/list1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

    </RelativeLayout> 
```

.java文件：

```
public class MainActivity extends Activity {
 private ListView lView;
 private ArrayList results;
 List<ResolveInfo> list;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    results = new ArrayList();
    lView = (ListView) findViewById(R.id.list1);
    PackageManager pm = this.getPackageManager();

    Intent intent = new Intent(Intent.ACTION_MAIN, null);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);

    list = pm.queryIntentActivities(intent,PackageManager.PERMISSION_GRANTED);
    for (ResolveInfo rInfo : list) 
    {
        results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
        Log.w("Installed Applications", rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
    }
    lView.setAdapter(new ArrayAdapter(this,android.R.layout.simple_list_item_1, results));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:47:54.463

尝试使用此代码：

```
 PackageManager manager = getPackageManager(); 
 Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
 mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
 final List<ResolveInfo> apps = manager.queryIntentActivities(mainIntent, 0);
 for ( int i=0;i<apps.size() ; i++){
    ResolveInfo info = apps.get(i);
    CharSequence lActTitle = info.loadLabel(manager);
    Drwable d = info.activityInfo.loadIcon(manager);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:53:08.927

如果您要获取应用程序的图标，那么您应该使用以下代码，

```
 public class MainActivity extends Activity {
        private ListView lView;
        private ArrayList results;
        List<ResolveInfo> list;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        results = new ArrayList();
        lView = (ListView) findViewById(R.id.list1);
        PackageManager pm = this.getPackageManager();

        Intent intent = new Intent(Intent.ACTION_MAIN, null);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);

        list = pm.queryIntentActivities(intent,PackageManager.PERMISSION_GRANTED);
        for (ResolveInfo rInfo : list) 
        {
            results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
            Log.w("Installed Applications", rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
            // Add the Following line in your code.
            Drawable icon = rInfo.activityInfo.applicationInfo.loadIcon(pm);
        }
        lView.setAdapter(new ArrayAdapter(this,android.R.layout.simple_list_item_1, results));
} 
```

**编辑-**

看看我的一个项目代码，

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
        android:id="@+id/Layout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

    </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

**FetchApplicationsActivity.java**

```
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class FetchApplicationsActivity extends Activity {

    TextView data;
    ImageView image1;
    LinearLayout holdlayout;
    View l1;
    private ArrayList results;
    List<ResolveInfo> list;
    TextView result;
    String str = "";
    Drawable icon;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        l1 = findViewById(R.id.Layout1);

        results = new ArrayList();
        PackageManager pm = this.getPackageManager();
        Intent intent = new Intent(Intent.ACTION_MAIN, null);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);
        list = pm.queryIntentActivities(intent,
                PackageManager.PERMISSION_GRANTED);
        for (ResolveInfo rInfo : list) {
            str = rInfo.activityInfo.applicationInfo.loadLabel(pm).toString()
                    + "\n";
            results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm)
                    .toString());
            Log.w("Installed Applications", rInfo.activityInfo.applicationInfo
                    .loadLabel(pm).toString());
            icon = rInfo.activityInfo.applicationInfo.loadIcon(pm);
            holdlayout = new LinearLayout(getApplicationContext());
            holdlayout.setOrientation(LinearLayout.HORIZONTAL);
            data = new TextView(getApplicationContext());
            data.setText(str);
            image1 = new ImageView(getApplicationContext());
            image1.setBackgroundDrawable(icon);
            ((ViewGroup) holdlayout).addView(image1);
            ((ViewGroup) holdlayout).addView(data);
            ((ViewGroup) l1).addView(holdlayout);

        }
    }
} 
```

# python - Matplotlib 事件和重新绘制

> ID：14336807
> 
> 赞同：2
> 
> 时间：2013-01-15T11:31:59.963
> 
> 标签：python, matplotlib

我希望能够创建一个绘图，根据绘图显示的内容按下一个或另一个按钮，然后绘制以下对象。但是，我遇到了一些麻烦：在按下按钮之前，我似乎无法让它“等待”。另外，我想知道是否可以将一些参数传递给 press_event，例如保存某些内容的路径。

这是该程序的方案，以防万一。提前非常感谢！

```
# event definition
def ontype(event):
    if event.key == '1':
        do stuff 1
        plt.savefig(...)
        plt.clf()
    elif event.key == '2':
        do stuff 2
        plt.savefig(...)
        plt.clf()
    elif event.key == '3':
        do stuff 3
        plt.savefig(...)
        plt.clf()

# main program
...stuff
create figure
plt.show()
plt.gcf().canvas.mpl_connect('key_press_event',ontype) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:35:43.583

你必须先`plt.gcf().canvas.mpl_connect('key_press_event',ontype)`打电话`plt.show()`。在非交互模式下，执行等待`plt.show()`直到绘图窗口关闭。

```
import pylab as plt

# event definition
def ontype(event):
    if event.key == '1':
        print "1"
    elif event.key == '2':
        print "2"
    elif event.key == '3':
        print "3"

# main program
plt.plot([1,6,3,8,7])
plt.gcf().canvas.mpl_connect('key_press_event',ontype)
plt.show() 
```

或者，在您的示例中替换`plt.show()`为`plt.ion()`，这将启用交互模式。但这取决于您喜欢哪种解决方案的具体需求。

**编辑**

使用 Tkinter 的新示例

```
import random
import matplotlib
matplotlib.use('TkAgg')
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
from matplotlib.figure import Figure

try:
    import Tkinter as Tk
except ImportError:
    import tkinter as Tk
import tkMessageBox

class PlotClassifier(Tk.Tk):
    def __init__(self, plot_generator, arguments, classes, classification_callback, *args, **kwargs):
        Tk.Tk.__init__(self, *args, **kwargs)
        self.title("Plot classifier, working on %i plots" % len(arguments))
        #self.label = Tk.Label(text="Plot classifier, working on %i plots" % len(arguments))
        #self.label.pack(padx=10, pady=10)
        self._plot_generator = plot_generator
        self._arguments = arguments
        self._classes = [str(x) for x in classes]
        self._classification_callback = classification_callback
        self._setup_gui()

    def _setup_gui(self):
        #self.columnconfigure(0, minsize=100, weight=2)
        #self.columnconfigure(1, minsize=500, weight=8)
        f = Figure()
        self._ax = f.add_subplot(111)
        buttons_frame = Tk.Frame(self)
        buttons_frame.pack(side=Tk.TOP, fill=Tk.BOTH, expand=True)
        buttons_class = []
        for i, cls in enumerate(self._classes):
            buttons_class.append(Tk.Button(master=buttons_frame, text=cls, 
                                           command=lambda x=i: self.button_classification_callback(self._current_args, x)))
            buttons_class[-1].pack(side=Tk.LEFT)
        button_quit = Tk.Button(master=buttons_frame, text='Quit', command=self.destroy)
        button_quit.pack(side=Tk.RIGHT) #.grid(row=0,column=0)

        self._canvas = FigureCanvasTkAgg(f, master=self)
        self._canvas.get_tk_widget().pack(side=Tk.TOP, fill=Tk.BOTH, expand=1) #.grid(row=0, column=1, rowspan=3) #
        self._canvas.show()

        toolbar = NavigationToolbar2TkAgg( self._canvas, self )
        toolbar.pack(side=Tk.TOP, fill=Tk.BOTH, expand=1) #.grid(row=3, column=1) #
        toolbar.update()

    def button_classification_callback(self, args, class_idx):
        self._classification_callback(args, self._classes[class_idx])
        self.classify_next_plot()

    def classify_next_plot(self):
        try:
            self._current_args = self._arguments.pop(0)
            self._ax.cla()
            self._plot_generator(self._ax, *self._current_args)
            self._canvas.draw()
        except IndexError:
            tkMessageBox.showinfo("Complete!", "All plots were classified")
            self.destroy()        

def create_plot(ax, factor):
    ax.plot([(i*factor) % 11 for i in range(100)])

def announce_classification(arguments, class_):
    print arguments, class_

if __name__ == "__main__":
    classes = ["Class %i"%i for i in range(1, 6)]
    arguments_for_plot = [[random.randint(1,10)] for x in range(10)]
    root = PlotClassifier(create_plot, arguments_for_plot, classes, classification_callback=announce_classification)
    root.after(50, root.classify_next_plot)
    root.mainloop() 
```

该类将作为参数： * 创建每个绘图的回调 * 要生成的每个绘图的参数列表（可能每个都是空列表） * 类名列表。对于每个类，都会创建一个按钮 * 每次执行分类时都会调用一个回调

对于任何反馈，我们都表示感谢。

**编辑 2 ** 为您的评论，稍作修改的版本。对于循环的每次迭代，都会打开一个新窗口

```
import random
import matplotlib
matplotlib.use('TkAgg')
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
from matplotlib.figure import Figure

try:
    import Tkinter as Tk
except ImportError:
    import tkinter as Tk
import tkMessageBox

class PlotClassifier(Tk.Tk):
    def __init__(self, plot_generator, arguments, classes, *args, **kwargs):
        Tk.Tk.__init__(self, *args, **kwargs)
        self.title("Plot classifier")
        self._plot_generator = plot_generator
        self._arguments = arguments
        self._classes = [str(x) for x in classes]
        self.class_ = None
        self._setup_gui()

    def _setup_gui(self):
        #self.columnconfigure(0, minsize=100, weight=2)
        #self.columnconfigure(1, minsize=500, weight=8)
        f = Figure()
        self._ax = f.add_subplot(111)
        buttons_frame = Tk.Frame(self)
        buttons_frame.pack(side=Tk.TOP, fill=Tk.X, expand=True)
        buttons_class = []
        for i, cls in enumerate(self._classes):
            buttons_class.append(Tk.Button(master=buttons_frame, text=cls, 
                                           command=lambda x=i: self.button_classification_callback(x)))
            buttons_class[-1].pack(side=Tk.LEFT)
        button_quit = Tk.Button(master=buttons_frame, text='Quit', command=self.destroy)
        button_quit.pack(side=Tk.RIGHT) #.grid(row=0,column=0)

        self._canvas = FigureCanvasTkAgg(f, master=self)
        self._canvas.get_tk_widget().pack(side=Tk.TOP, fill=Tk.BOTH, expand=1) #.grid(row=0, column=1, rowspan=3) #
        self._canvas.show()

        toolbar = NavigationToolbar2TkAgg( self._canvas, self )
        toolbar.pack(side=Tk.TOP, fill=Tk.BOTH, expand=1) #.grid(row=3, column=1) #
        toolbar.update()

    def button_classification_callback(self, class_idx):
        self.class_ = self._classes[class_idx]
        self.destroy()

    def classify_plot(self):
        self._ax.cla()
        self._plot_generator(self._ax, *self._arguments)
        self._canvas.draw()
        self.mainloop()
        return self.class_

def create_plot(ax, factor):
    ax.plot([(i*factor) % 11 for i in range(100)])

if __name__ == "__main__":
    classes = ["Class %i"%i for i in range(1, 6)]
    arguments_for_plot = [[random.randint(1,10)] for x in range(10)]
    for args in arguments_for_plot:
        classifier = PlotClassifier(create_plot, args, classes)
        class_ = classifier.classify_plot()
        print args, class_
        if class_ is None:
            break 
```

这有助于适应您自己的 for 循环，但在创建 GUI 后您仍然必须提供一个函数来进行绘图。

# c++ - 模板中的静态转换

> ID：14336813
> 
> 赞同：0
> 
> 时间：2013-01-15T11:32:24.053
> 
> 标签：c++

我有一个带有这个静态转换运算符的模板：

```
operator Vector2<float>() const
{
    return Vector2<float>(x, y);
} 
```

这对我来说意味着如果我转换为浮点数，它将返回该类的浮点变体，即使`x`和`y`是来自整数变体的整数。但显然不是这样：

作为测试：

```
Vector2<float>position=static_cast<float>(Vector2<int>(5,5)); 
```

我收到编译器错误 *No matching conversion for static_cast from Vector2 to float*。

然而，转换是上面指定的，不是静态转换重载吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:35:58.297

你应该像这样使用它：

```
Vector2<float> position = static_cast<Vector2<float>>(Vector2<int>(5,5)); 
```

因为声明指定转换为`Vector2<float>`，而不是转换为`float`。

# pdf - PDF中X和Y轴背后的逻辑是什么？

> ID：14336814
> 
> 赞同：3
> 
> 时间：2013-01-15T11:32:31.353
> 
> 标签：pdf, tcpdf, fpdi

我正在使用[TCPDF](http://www.tcpdf.org/)和[FPDI](http://www.setasign.de/products/pdf-php-solutions/fpdi/)动态更新 PDF 。那里一切正常。

但是，我无法理解其工作方式[`SetXY()`](http://www.tcpdf.org/doc/code/classTCPDF.html#a00ec13928f57b17c21040acc881fe482)。

X 和 Y 轴的值究竟是多少？毫米？边缘的字母间距？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:00:31.917

[默认情况下](http://www.tcpdf.org/doc/code/classTCPDF.html#aad2c0cbfe5b6330eed5850f87c2a32d9)，它们以毫米为单位。但是，您可以使用函数 setPageUnit 更改它。

默认情况下，X（横坐标）和 Y（纵坐标）值从文档/页面的左上角开始。但是，这可以通过使用[setRTL](http://www.tcpdf.org/doc/code/classTCPDF.html#a7d067c080614c7f55b6623adfc80a1c1)函数的 RTL（从右到左）模式进行更改。

# pdf - 如何使用 iText 获取 XFDF 的“原始”和“修改”ID？

> ID：14336816
> 
> 赞同：0
> 
> 时间：2013-01-15T11:32:39.370
> 
> 标签：pdf, itext, xfdf

XFDF 文件中的最后一个标签如下所示：

```
<ids original="20639838865717E80D2556CB7B2AEC2D" 
     modified="754C78B10C9159419708446C3395CDBE"/> 
```

我可以通过使用以下方法从 Acrobat 导出 PDF 表单数据来获取这些值：[http](http://wiki.developerforce.com/page/Adobe_XFDF_Ids_Determination) ://wiki.developerforce.com/page/Adobe_XFDF_Ids_Determination 。

但是，我想以编程方式获取 ID，以便为任意 PDF 表单构建正确的 xfdf 文档。

如何使用 iText 获取这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:32:39.370

如本文所述（[删除 PDF 中的 PDFID](https://stackoverflow.com/questions/13193820/removing-pdfid-in-pdf)）/ID 是“预告片字典”中的推荐条目（如果 AcroForm 已加密，则需要该条目）。

使用 iText，ID 可以作为预告片中`PdfArray`的两个对象之一进行访问。String 值看起来像垃圾，因为每个都是字节数组的表示。这些是“原始”和“修改”所需的十六进制值。`PdfString``PdfDictionary`

以下代码将打印出这两个 ID，可以根据例如 Acrobat Pro 的导出（NB`Hex.encodeHexString`是 Apache commons-codec）进行验证：

```
public void printIds(PdfReader reader) {
    PdfDictionary trailer = reader.getTrailer();
    if (trailer.contains(PdfName.ID)) {
        PdfArray ids = (PdfArray) trailer.get(PdfName.ID);
        PdfString original = ids.getAsString(0);
        PdfString modified = ids.getAsString(1);
        System.out.println(Hex.encodeHexString(original.getBytes()));
        System.out.println(Hex.encodeHexString(modified.getBytes()));
    }
} 
```

# jsf - 如何在 adf 中使用部分触发器、selectOneRadio 和 inputText

> ID：14336822
> 
> 赞同：1
> 
> 时间：2013-01-15T11:32:56.030
> 
> 标签：jsf, oracle-adf, jdeveloper

我正在使用 selectOneRadio 来选择可用的 inputText。所以，我有这个变种：

```
<af:selectOneRadio 
                                   id="id1"
                                   autoSubmit="true"
                                   binding="#{page.bindingSelect}"
                                   value="#{page.radioBtnValue}">
                  <af:selectItem label="show1" value="show1" />
                  <af:selectItem label="show2" value="show2"/>

<af:inputText id="id2" 
                              value="#{bindings.input1.inputValue}"                            
                              partialTriggers="id1"
                              binding="#{page.input1}" 
                              disabled="#{page.radioBtnValue!='show1'}">                                   
</af:inputText>
<af:inputText id="id3" 
                              value="#{bindings.input2.inputValue}"                            
                              partialTriggers="id1"
                              binding="#{page.input2}" 
                              disabled="#{page.radioBtnValue!='show2'}">                                   
</af:inputText> 
```

和按钮的bean：

```
public String newCommitTest() {
        BindingContainer bindings = getBindings();
        OperationBinding operationBinding = 
            bindings.getOperationBinding("Commit");
        Object result = operationBinding.execute();
        if (!operationBinding.getErrors().isEmpty()) {
            return null;
        }
        System.out.println("---------"+getInput1().getValue()) ;
        System.out.println("---------"+getInput2().getValue()) ;
        return null;        
    } 
```

结果我有 getInput1=null getInput2=null

但是，如果我不使用 partialTriggers 这个变体可以正常工作，并且在 db 中放置正确的值......

有人可以帮忙吗？jdeveloper 10.1.3 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:00:06.343

[http://www.slideshare.net/stevendavelaar/18-invaluable-lessons-about-adfjsf-interaction](http://www.slideshare.net/stevendavelaar/18-invaluable-lessons-about-adfjsf-interaction)

它非常有用，值得一读。它消除了很多困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:31:08.597

谢谢大家。

对于我使用的更新属性：

```
getMyInputText().setDisabled(true);
getMyInputText().setReadOnly(true);
AdfFacesContext.getCurrentInstance().addPartialTarget(getMyInputText()); 
```

# linux - 单声道崩溃 System.Windows.Forms.SplitContainer 未实现接口 System.ComponentModel.ISupportInitialize

> ID：14336823
> 
> 赞同：2
> 
> 时间：2013-01-15T11:33:01.273
> 
> 标签：linux, .net-4.0, mono

我从单声道收到以下错误：System.Windows.Forms.SplitContainer 没有实现接口 System.ComponentModel.ISupportInitialize

软件是 Chummergen，我的系统是 fedora 17 (Chummergen.com) 我的谷歌结果出现了，这是一个已知问题，有修复但不会移植回单声道 2.8...（有现在已经是一个非常古老的帖子了）

这让我想到了以下问题...... a) 我能做些什么来让它运行吗？b) 我可以为我的 Fedora 获得更新版本的单声道吗？c) 我可以使用 SUSE RPM 还是应该获取源代码（以及我应该使用哪个 rpm 文件？） d) 是否有关于从源代码构建单声道的自述文件/guid/faq？

在此先感谢弗雷德

# ios - 在 ios 中获取 32 位数字

> ID：14336824
> 
> 赞同：0
> 
> 时间：2013-01-15T11:33:06.717
> 
> 标签：ios, objective-c

当一个字节数组传递给它时，如何在目标 c 中获取一个 32 位数字，类似于在 java 中，

```
ByteBuffer bb = ByteBuffer.wrap(truncation);   
return bb.getInt(); 
```

其中截断是字节数组。它返回 32 位数字。这在目标 c 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:56:48.967

不确定您是否只想读取 4 个字节并将该值分配给一个整数。这个案例：

```
int32_t number;
memcpy(&number, truncation, sizeof(uint32_t)); 
```

**关于字节序**

从你的问题（对我来说）很明显字节已经正确排序。但是，如果您必须重新排序这些字节，请使用`ntohl()`after `memcpy()`：

```
number=ntohl(number); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:49:59.157

如果数字在缓冲区内以 little-endian 编码，则使用：

```
int32_t getInt32LE(const uint8_t *buffer)
{
    int32_t value = 0;
    unsigned length = 4;
    while (length > 0)
    {
        value <<= 8;
        value |= buffer[--length];
    }
    return value;
} 
```

如果数字在缓冲区中以大端编码，则使用：

```
int32_t getInt32BE(const uint8_t *buffer)
{
    int32_t value = 0;
    for (unsigned i = 0; i < 4; i++)
    {
        value <<= 8;
        value |= *buffer++;
    }
    return value;
} 
```

**更新**如果您使用在同一主机上创建的数据，那么字节序不是问题，在这种情况下，您可以使用 a`union`作为缓冲区和整数之间的*桥梁，从而避免一些不愉快的转换：*

```
union
{
    uint8_t b[sizeof(int32_t)];
    int32_t i;
} u;

memcpy(u.b, buffer, sizeof(u.b));
// value is u.i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:51:45.590

根据字节顺序：

```
uint32_t n = b0 << 24 | b1 << 16 | b2 << 8 | b3; 
```

或者

```
uint32_t n = b3 << 24 | b2 << 16 | b1 << 8 | b0 
```

# android - 不打系统可以在Android中使用PCSC接口吗？（寻找机器人）

> ID：14336826
> 
> 赞同：2
> 
> 时间：2013-01-15T11:33:09.307
> 
> 标签：android, smartcard, pcsc

不打系统可以在Android中使用PCSC接口吗？使用 seek-for-android 谢谢。

# jquery - 如何使用 jQuery 返回唯一且已排序的数组值？

> ID：14336827
> 
> 赞同：0
> 
> 时间：2013-01-15T11:33:21.483
> 
> 标签：jquery, arrays, sorting, unique

> **可能重复：**
> [Javascript数组排序和唯一](https://stackoverflow.com/questions/4833651/javascript-array-sort-and-unique)

我很惊讶地发现没有内置的 jQuery 函数。

我在 stackoverflow 上看到了很多解决方案，但是这些问题被无效的答案所污染（要找到一个有效的答案，我必须全部测试）。

因此，为了将来参考并避免其他用户的麻烦，我决定发布这种问答风格。

# 如何使用 jQuery 返回唯一且已排序的数组值？

### 数字：

```
// input array
var inputArray = [10, 5, 15, 10, 5, 15];

// expected result array
var resultArray = [5, 10, 15]; 
```

### 字符串：

```
// input array
var inputArray = ['b', 'a', 'c', 'b', 'a', 'c'];

// expected result array
var resultArray = ['a', 'b', 'c']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:55:27.127

我将自己在这里添加我的答案，而不是之前提出的问题，仅仅是因为之前提出的问题中的答案很糟糕，但我不希望作者改变决定。

现在，为了让您更直观地了解我提出的解决方案：排序是 O(n log n)，删除重复项是 O(n)，因此我们得出结论，整个操作不应该比 n log n 复杂。但是，如果您考虑一下，n 永远不会增加，但如果您先删除重复项，*然后再*排序，则很可能会减少。因此，虽然表面上它仍然是 O(n log n)，但它通常会更快。您可能可以通过将值收集到树而不是哈希表中来改进它（在其他语言中），但鉴于 JavaScript 中“本机”数据结构和自定义数据结构之间的性能差异巨大 - 下面的解决方案应该是最佳的：

```
function sortUnique(array) {
    "use strict";
    var table = {}, key, i;
    for (i = 0; i < array.length; i++) {
        table[[array[i]]] = '';
    }
    i = 0;
    for (key in table) {
        array[i++] = key;
    }
    array.length = i;
    return array.sort();
}
sortUnique(['b', 'a', 'c', 'b', 'a', 'c']);
// [ 'a', 'b', 'c' ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:33:21.483

作为一个函数：

```
function sort_unique(arr) {
    return arr.sort(function(a,b){
        return (a > b) ? 1 : -1;
    }).filter(function(el,i,a) {
        return (i==a.indexOf(el));
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:45:06.810

希望这对你有用

```
var dummy = [10, 5, 15, 10, 5, 15];
var arr = [];
$.map(arr, function(n, i){
  if($.inArray(n, arr) == -1)
      arr.push(n);
}); 
```

现在在 arr 值是唯一的。现在您可以对此应用任何排序算法。

# javascript - 禁用 div 内的所有 Radcombobox

> ID：14336833
> 
> 赞同：0
> 
> 时间：2013-01-15T11:33:44.300
> 
> 标签：javascript, jquery, telerik, radcombobox

我在一个具有各种 id 的 div 中有几个 Telerik radcomboboxes。我想找到所有这些并禁用它们而不使用那些 id，比如使用 javascript 查找标签名称。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:03:04.350

每个 RadControl 呈现一个特定的 CSS 类，用于标识控件容器元素上的控件类型。此外，JS 对象是容器元素的扩展 - `control`.

所以，你可以使用这个：`$('.common-container-class-name .RadComboBox').each(function() { this.control.disable(); });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:42:27.590

不确定 Rad 组合框是什么，但它似乎是不同类型的输入/文本元素，所以请尝试：

```
$('.someContainerDiv input').attr('disabled','disabled'); 
```

更改任何元素的输入，例如`<textarea>`标签。

# scala - 奇怪的错误信息：错误的符号引用。package.class 中的签名是指包 org 中不可用的术语 apache

> ID：14336834
> 
> 赞同：16
> 
> 时间：2013-01-15T11:33:48.547
> 
> 标签：scala, akka

当我尝试编译简单的类型安全的 akka 程序（scala 2.10、akka、2.1.0）时：

```
 scalac -cp "akka-actor_2.10-2.1.0.jar:akka-camel_2.10-2.1.0.jar" write2.scala

error: bad symbolic reference. A signature in package.class refers to term apache
in package org which is not available.
It may be completely missing from the current classpath, or the version on
the classpath might be incompatible with the version used when compiling package.class.
error: bad symbolic reference. A signature in package.class refers to term camel
in value org.apache which is not available.
It may be completely missing from the current classpath, or the version on
the classpath might be incompatible with the version used when compiling package.class.
write2.scala:21: error: bad symbolic reference. A signature in package.class refers to term model
in value org.camel which is not available.
It may be completely missing from the current classpath, or the version on
the classpath might be incompatible with the version used when compiling package.class.
val mina = system.actorOf(Props[MyEndPoint])

three errors found 
```

第 21 行的代码：

```
 val mina = system.actorOf(Props[MyEndPoint]) 
```

（同样的程序在Eclipse中编译正确，所以源码没问题）

-cp 变量中很可能缺少某些 jar 文件。问题是**奇怪/无用的错误消息是什么意思。**

谢谢，托马斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T21:15:51.957

消息说“我的类路径中没有包`org.apache`，我在读取文件时需要它`package.class`”。传递`-Ylog-classpath`给`scalac`并查看到达编译器的*真正类路径是什么。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T14:50:35.447

对我来说，JDK 既没有设置在 PATH 上，也没有设置 JAVA_HOME

您可以添加 JAVA_HOME 以指向您的 JDK 根文件夹，并将 jdk/bin 文件夹（包括 javac）直接添加到路径中。

您可以参考 Oracle 文档了解如何添加路径 [http://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html](http://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-06T22:13:10.683

万一这对将来的任何人有帮助，我在添加新课程后采用的应用程序遇到了这个问题。原来包内每个类的包名大小写和实际的目录结构都不一样。一旦我将所有目录都小写，它就会再次开始工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-28T13:58:18.370

第一次使用 Scala 用户。我在配置我的eclipse时遇到了一些问题，我曾经得到：

```
Error:scalac: bad symbolic reference. A signature in package.class refers to type compileTimeOnly
in package scala.annotation which is not available.
It may be completely missing from the current classpath, or the version on
the classpath might be incompatible with the version used when compiling package.class. 
```

最后发现scala测试版本2.11和编译器版本应该匹配。下载的 Scala 版本 2.11-RC1

# c++ - 返回布尔数组

> ID：14336839
> 
> 赞同：1
> 
> 时间：2013-01-15T11:34:08.437
> 
> 标签：c++, arrays, boolean, return-value

首先，如果这是重新发布，我想对这个问题表示抱歉。

我创建了一个函数，它检查游戏循环中的某些对象，然后如果检查返回 true 或 false，则返回一个布尔值，这在我的函数中总共运行了 5 次。我想知道是否可以从函数中返回一个包含所有 5 个布尔值的数组？下面是我尝试编写的伪代码示例：

```
 Bool funcName(obj obj[])
   {
       for (int i = 0; i < 5; i++)
       {
           boolVal[i]=ChckFunc(obj[i]);  
       }
       return  boolVal[];
   } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:36:52.810

你可以返回一个[std::array](http://en.cppreference.com/w/cpp/container/array)

```
std::array<bool, 5> funcName(obj obj[])
{
    std::array<bool, 5> boolArray;
    for (int i = 0; i < 5; i++)
    {
        boolArray[i]=ChckFunc(obj[i]);  
    }
    return  boolArray;
} 
```

或者`std::vector`如果您要检查的对象数量不定，请使用

```
std::vector<bool> funcName(obj obj[], int count)
{
    std::vector<bool> boolArray;
    for (int i = 0; i < count; i++)
    {
        boolArray.push_back(ChckFunc(obj[i]));
    }
    return  boolArray;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:36:03.333

```
std::array<bool, 5> funcName( Obj const obj[] ) 
```

# c# - 字典查找 - 特定字符串

> ID：14336842
> 
> 赞同：0
> 
> 时间：2013-01-15T11:34:36.800
> 
> 标签：c#, .net, dictionary, tuples

我想控制 512 个 DMX 通道中的颜色（在本例中为“红色”）。我从 XML 文件中读取红色并将其放入字典中：

```
<Channel Id="Lamp1Red" Key="2"/>
<Channel Id="Lamp1Green" Key="3"/>
<Channel Id="Lamp1Blue" Key="4"/>
<Channel Id="Lamp2Red" Key="5"/>
<Channel Id="Lamp2Green" Key="6"/>
<Channel Id="Lamp2Blue" Key="7"/>
<Channel Id="Lamp3Red" Key="8"/>
        etc. ... up to 512 keys/channels. 
```

我有以下内容`Dictionary`，其中包含 ID（字符串）和 Channel（Key+Value）

```
public Dictionary<string, Tuple<byte, byte>> DmxChannelsDictionary
{
    get;
    set;
} 
```

我想查找所有包含 ID“LampXRed”的字符串（红色）并为每个字符串获取密钥（2、5、8），并在以下方法 SetColor 中使用它们：

```
SetColor(red, green, blue);
public void SetColor(Tuple<byte, byte> redTuple, Tuple<byte, byte> greenTuple, Tuple<byte, byte> blueTuple) 
```

SetColor 将元组传递给 DmxDataMessage()

```
public static byte[] DmxDataMessage(Tuple<byte, byte>  redTuple, Tuple<byte, byte> greenTuple, Tuple<byte, byte> blueTuple)
    {
        //Initialize DMX-buffer: Must be full buffer (512Bytes)
        var dmxBuffer = new byte[512];
        dmxBuffer.Initialize();

        // Fill DATA Buffer: Item1 (Key/Channel) = Item2 (Value)
        // Channel1
        dmxBuffer[redTuple.Item1] = redTuple.Item2;
        dmxBuffer[greenTuple.Item1] = greenTuple.Item2;
        dmxBuffer[blueTuple.Item1] = blueTuple.Item2;

        // Here I need a foreach or something else to set the the value for each channel (up to 512)
       .... 
```

如何在字典中进行智能搜索/交互并保存所有红色 ID + 键以用于`SetColor()`???

这是我为一个“红色”频道做的方式：

```
var red = DmxChannelsDictionary["Lamp1Red"];
red = Tuple.Create(red.Item1, _redValue); // _redValue = 0-255 
```

我希望这是有道理的。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:49:24.690

为什么没有这样的东西：

```
class LampInfo
{
  int Red{get;set;}
  int Green{get;set;}
  int Blue{get;set;}
} 
```

然后将灯名称（例如 Lamp1）映射到它：

```
Dictionary<string,LampInfo> dmxChannelsDictionary; 
```

要填充你会做这样的事情：

然后你可以这样做：

```
Lamp lamp=new LampInfo(){Red=2, Green=3, Blue=4}'
dmxChannelsDictionary.Add("Lamp1",lamp); 
```

然后要获取数据，您只需说：

```
var lamp=dmxChannelsDictionary["Lamp1"];
int red=lamp.Red; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:35:34.090

以下解决了我的问题 - 非常感谢您的帮助。

```
public static byte[] DmxDataMessage(Tuple<byte, byte> redTuple, Tuple<byte, byte> greenTuple, Tuple<byte, byte> blueTuple, EnttecDmxController _enttecDmxControllerInterface)
{

    foreach (KeyValuePair<string, Tuple<byte, byte>> entry in _enttecDmxControllerInterface.DmxChannelsDictionary)
    {
        if (entry.Key.Contains("Red"))
        {
            dmxBuffer[entry.Value.Item1] = redTuple.Item2;
        }
    }
     .......
} 
```

# castle-windsor - 如何为已注册的组件添加附加服务

> ID：14336844
> 
> 赞同：1
> 
> 时间：2013-01-15T11:34:45.857
> 
> 标签：castle-windsor

我在为已注册的组件添加附加服务时遇到问题。我有以下情况：

```
public class MyImplementation : BaseClass, IInterface
{

} 
```

在我的应用程序的基础架构中的某处（不会更改），我的课程以下列方式注册：

```
container.Register(Classes
                               .FromThisAssembly()
                               .BasedOn(typeof (BaseClass))
                               .WithServiceBase()                                                                      
                               .LifestyleTransient()); 
```

我现在要做的是向 MyImplementation 组件添加额外的服务。我尝试使用以下方法在我的安装程序中执行此操作：

```
container.Register(Classes
                               .FromThisAssembly()
                               .BasedOn(typeof (IInterface))
                               .WithServiceBase()                                                                      
                               .LifestyleTransient()); 
```

但是当尝试从容器中解析 IInterface 时，我收到错误消息，提示没有为 IInterface 注册组件。

我的问题是，是否可以向已注册的组件添加额外的服务？提前致谢。麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:02:40.670

我认为如果您更改第二次注册，它将起作用：

```
container.Register(Classes
                           .FromThisAssembly()
                           .BasedOn(typeof (IInterface))
                           .WithServiceAllInterfaces()                                                                      
                           .LifestyleTransient()); 
```

# java - android：如何在模拟器中手动设置国家代码

> ID：14336850
> 
> 赞同：3
> 
> 时间：2013-01-15T11:35:10.053
> 
> 标签：java, android, country-codes, mobile-country-code

当我使用以下代码时，它总是将国家代码显示为美国。

```
context = MainActivity.this;
String locale = context.getResources().getConfiguration().locale.getCountry();

TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.getSimCountryIso(); 
```

如何在模拟器中手动将设置国家代码设置为 IN（印度）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:44:47.817

这与在真实设备上的完成方式相同。打开seetings应用程序，进入“语言和输入法”->“语言”并选择“英语（印度）”

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-15T11:49:08.027

运行>调试配置/运行配置

Tab Target> Additional Emulator Command Line Options

-时区亚洲/印度

# node.js - Node.js 聊天 - 存储 session.id 供以后使用？

> ID：14336851
> 
> 赞同：1
> 
> 时间：2013-01-15T11:35:14.063
> 
> 标签：node.js

我正在建立一个聊天室，我想将用户的 session.id 存储 10 天。这样如果用户在 8 天后回来，他/她的消息将再次出现。为此，我必须以某种方式存储生成的 session.id。

我将如何做到这一点？

我当前在用户连接时运行的代码是这样的：

// user_id 是每个域的唯一 ID，因此每个聊天室都有自己的房间

```
socket.on('adduser', function(user_id){

    var sid = socket.id;
    console.log('Socket.id ====>', sid);

    socket.join('Room_' + user_id);
    socket.broadcast.to('Room_' + user_id).emit('updatechat', 'SERVER','Hello');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:15:40.487

使用快速会话存储来存储和检索 cookie/sessionID 信息。按照下面的示例代码，使用具有授权的 socket.io 在用户连接上提取 sessionID：

```
var parseCookie = require('connect').utils.parseCookie;
sio.set('authorization', function (data, accept) {
    if (data.headers.cookie) {
        data.cookie = parseCookie(data.headers.cookie);
        data.sessionID = data.cookie['express.sid'];
    } else {
       return accept('No cookie transmitted.', false);
    }
    accept(null, true);
}); 
```

cookie 将包含我们 Express 会话的 sessionID。

现在可以通过 socket.io 连接对象的握手属性访问分配给数据对象的所有属性。

```
sio.sockets.on('connection', function (socket) {
    console.log('A socket with sessionID ' + socket.handshake.sessionID 
        + ' connected!');
}); 
```

希望这可以帮助。

# c++ - 错误：未定义对“审查（）”的引用

> ID：14336852
> 
> 赞同：0
> 
> 时间：2013-01-15T11:35:15.140
> 
> 标签：c++, reference, undefined

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我有`main.cpp`：

```
#include "censorship_dec.h"

using namespace std;

int main () {
    censorship();
    return 0;
} 
```

这是我的`censorship_dec.h`：

```
#include <iostream>
#include <stdio.h>
#include <string.h>
using namespace std;

void censorship(); 
```

这是我的`censorship_mng.cpp`：

```
#include "censorship_dec.h"
using namespace std;

void censorship()
{
   cout << "bla bla bla" << endl;
} 
```

我试图在 SSH (Linux) 中运行这些文件，所以我写了: `make main`，但我得到了：

```
g++     main.cpp   -o main
/tmp/ccULJJMO.o: In function `main':
main.cpp:(.text+0x71): undefined reference to `censorship()'
collect2: ld returned 1 exit status
make: *** [main] Error 1 
```

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:37:51.117

您必须指定`censorship`定义的文件。

```
g++ main.cpp censorship_mng.cpp -o main 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:37:54.547

您必须`censorship_mng.cpp`在编译命令中添加：

> g++ main.cpp censorship_mng.cpp -o main

* * *

另一种解决方案（如果您真的不想更改编译命令）是制作一个`void censorship();`函数`inline`并将其从`.cpp`.`.h`

`censorship_dec.h`：

```
#include <iostream>
#include <stdio.h>
#include <string.h>
using namespace std;

inline void censorship()
{
  // your code
} 
```

并`void censorship()`从`censorship_mng.cpp`文件中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:49:49.460

一旦您的项目开始使用多个源文件编译成单个二进制文件，手动编译就会变得乏味。

这通常是您开始使用构建系统的时间，例如[Makefile](http://www.gnu.org/software/make/)

一个使用默认构建规则的非常简单的 Makefile 可能看起来像

```
default: main

# these flags are here only for illustration purposes
CPPFLAGS=-I/usr/include
CFLAGS=-g -O3
CXXFLAGS=-g -O3
LDFLAGS=-lm

# objects (.o files) will be compiled automatically from matching .c and .cpp files
OBJECTS=bar.o bla.o foo.o main.o

# application "main" build-depends on all the objects (and linksthem together)
main: $(OBJECTS) 
```

# django - form.is_valid() 中的 Django ModelForms 和多个数据库错误

> ID：14336853
> 
> 赞同：0
> 
> 时间：2013-01-15T11:35:15.207
> 
> 标签：django, django-forms

您好，我在我的 django 应用程序中使用多个数据库，但是当我尝试调用 is_valid() 函数或 .save() 时，django 不知道如何使用数据库...我的问题是：我怎么知道django表单使用特定的数据库？

这是我的代码：

形式：

```
class ClienteForm(ModelForm):
class Meta:
    model = Cliente

def __init__(self, *args, **kwargs):
    vUserProfile = kwargs.pop('vUserProfile', None)
    super(ClienteForm, self).__init__(*args, **kwargs)
    self.fields["idcidade"].queryset = Cidade.objects.using(vUserProfile.dbname).all()

    self.fields["idpessoa"].widget.attrs['class'] = "input-mini"
    self.fields["idpessoa"].widget.attrs['readonly'] = "True" 
```

这是我的视图代码：

```
def editaCliente(request, pessoa_id=None):
if request.user.is_authenticated():
    profile = request.user.get_profile()
    if pessoa_id:
        cliente = Cliente.objects.using(profile.dbname).get(idpessoa=pessoa_id)
    else:
        cliente = None

    if request.method == 'POST':
        formPessoa = ClienteForm(request.POST, instance=cliente, vUserProfile=profile)
        if formPessoa.is_valid():
            cliente = formPessoa.save(commit=False)
            cliente.idrepresentante = profile.id_comerx3c # passando o id do representante
            cliente.internet = 'S'
            cliente = formPessoa.save()

            if cliente:
                return redirect('listaCliente')
    else:
        formPessoa = ClienteForm(instance=cliente, vUserProfile=profile)

return render_to_response(
    'cliente_novo.html',
    locals(),
    context_instance=RequestContext(request),
) 
```

我尝试使用 .is_valid(using=profile.dbname) 但 django 对我说 using 不是参数..

这是追溯：

```
 Django Version: 1.4.3
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django_evolution',
 'pagination',
 'bootstrap_toolkit',
 'tastypie',
 'comerx')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'pagination.middleware.PaginationMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\point\comerx\views.py" in editaCliente
  63\.             if formPessoa.is_valid():
File "C:\Python27\lib\site-packages\django\forms\forms.py" in is_valid
  124\.         return self.is_bound and not bool(self.errors)
File "C:\Python27\lib\site-packages\django\forms\forms.py" in _get_errors
  115\.             self.full_clean()
File "C:\Python27\lib\site-packages\django\forms\forms.py" in full_clean
  272\.         self._post_clean()
File "C:\Python27\lib\site-packages\django\forms\models.py" in _post_clean
  338\.             self.validate_unique()
File "C:\Python27\lib\site-packages\django\forms\models.py" in validate_unique
  347\.             self.instance.validate_unique(exclude=exclude)
File "C:\Python27\lib\site-packages\django\db\models\base.py" in validate_unique
  633\.         errors = self._perform_unique_checks(unique_checks)
File "C:\Python27\lib\site-packages\django\db\models\base.py" in _perform_unique_checks
  724\.             if qs.exists():
File "C:\Python27\lib\site-packages\django\db\models\query.py" in exists
  565\.             return self.query.has_results(using=self.db)
File "C:\Python27\lib\site-packages\django\db\models\sql\query.py" in has_results
  441\.         return bool(compiler.execute_sql(SINGLE))
File "C:\Python27\lib\site-packages\django\db\models\sql\compiler.py" in execute_sql
  818\.         cursor.execute(sql, params)
File "C:\Python27\lib\site-packages\django\db\backends\util.py" in execute
  40\.             return self.cursor.execute(sql, params)
File "C:\Python27\lib\site-packages\django_firebird-1.5.0.alpha.1-py2.7.egg\firebird\base.py" in execute
  146\.             return self.cursor.execute(q, params)
File "C:\Python27\lib\site-packages\fdb\fbcore.py" in execute
  3040\.                                     PreparedStatement(operation, self, True))
File "C:\Python27\lib\site-packages\fdb\fbcore.py" in __init__
  1646\.                 "Error while preparing SQL statement:")

Exception Type: DatabaseError at /comerx/cliente/novo/
Exception Value: ('Error while preparing SQL statement:\n- SQLCODE: -204\n- Dynamic SQL Error\n- SQL error code = -204\n- Table unknown\n- PESSOA\n- At line 1, column 41', u'-204 -- SELECT FIRST 1 (1) AS "A" FROM "PESSOA" WHERE "PESSOA"."IDPESSOA" = -1') 
```

谢谢大家

# c# - 覆盖文本和 OnKeyUp/OnKeyPress

> ID：14336856
> 
> 赞同：2
> 
> 时间：2013-01-15T11:35:28.773
> 
> 标签：c#, winforms, textbox, overriding

我有一个问题，我创建了一个从 TextBox 继承的自定义控件，我需要在其中覆盖`Text`属性和`OnKeyPress`or`OnKeyUp`事件。

*   text 属性被覆盖以显示与文本框的实际值不同的值（用于单位转换）
*   我目前尝试添加的 OnKeyPress/OnKeyUp 仅允许输入数值。

当 KeyPress 事件被触发时，被更新的文本`base.Text`不是我的覆盖......关于我如何克服这个问题的任何想法？

```
 public override string Text
    {
        get
        {
            return base.Text;
        }
        set
        {
            displayValue = parse;
            base.Text = this.ContainsFocus ? displayValue.ToString() : displayValue.ToString("N3");
        }
    }
    protected override void OnKeyUp(KeyEventArgs e)
    {
        e.Handled = true;
        if ((e.KeyCode >= Keys.D0 && e.KeyCode <= Keys.D9) ||
            (e.KeyCode >= Keys.NumPad0 && e.KeyCode <= Keys.NumPad9) ||
            e.KeyCode == Keys.Decimal)
        {
            e.Handled = false;
        }
        //Code to only accept numerical buttons
        base.OnKeyUp(e);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:01:58.010

它最终需要的只是

```
protected override void OnKeyPress(KeyPressEventArgs e)
{....
    base.OnKeyPress(e);
    Text = base.Text;
 } 
```

我意识到这种情况的原因是 base.OnKeyPress(e) 必须处理 base.Text 这意味着它无法知道我的覆盖

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:49:01.377

尝试更改您的`OnKeyUp`：

```
 protected override void OnKeyUp(KeyEventArgs e)
    {       
        if ((e.KeyCode >= Keys.D0 && e.KeyCode <= Keys.D9) ||
            (e.KeyCode >= Keys.NumPad0 && e.KeyCode <= Keys.NumPad9) ||
            e.KeyCode == Keys.Decimal)
        {
             e.Handled = false;
             base.OnKeyUp(e);
        }
        else
        {
             e.Handled= true;
        }       

    } 
```

**编辑：**改用`KeyPress`：

```
 protected override void OnKeyPress(KeyPressEventArgs e)
        {
            if (Char.IsDigit(e.KeyChar))
            {
                e.Handled = false;
                base.OnKeyPress(e);
            }
            else
            {
                e.Handled = true;
            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:03:37.657

试试看

```
 protected override void OnKeyPress(KeyPressEventArgs e)
        {
             if (!char.IsControl(e.KeyChar)
                         && !char.IsDigit(e.KeyChar))
                    e.Handled = true;
            base.OnKeyPress(e);
         } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:47:50.167

尝试覆盖 AppendText 属性。

```
public void AppendText(string text)
    Member of System.Windows.Forms.TextBoxBase 
```

# javascript - 选中复选框时，应该使文本框也启用否则禁用

> ID：14336860
> 
> 赞同：0
> 
> 时间：2013-01-15T11:35:44.390
> 
> 标签：javascript, html, dom-events

我编写了以下代码，当复选框被选中时，它会启用一个文本框。该代码存在一个小缺陷。当我们第一次执行时，无论复选框是选中还是未选中，都会启用文本框。但是几次之后，代码就可以正常工作了。请帮助我找到错误。

```
<html>
<head>
    <title>SHOP ALL</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script language="javascript" src="addcart.js"></script>
        <script type="text/javascript">
            function enableDisable(bEnable, textBoxID)
            {
                document.getElementById(textBoxID).disabled = !bEnable
            }
        </script>
</head>
     <body>
<form>
        <table align="center"  width="100%" cellpadding="50px">
            <tr>
                <th> TICK ON THE THINGS YOU NEED </th>
                <th> PRODUCT </th>
                <th> DESCRIPTION </th>
                <th> NO OF ITEMS </th>
            </tr>
            <tr>
                <td><input type="checkbox" name="shoe" onclick="enableDisable(this.checked, '0')"></td>
                <td><img src="images/1.jpg" alt="shoe1" width="180px" height="200px"></td>
                <td><h4>-------</h4></td>
                            </tr>
                        --------------
 </body>
</html`> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:38:31.090

你应该把你的代码：

```
 <script type="text/javascript">
        function enableDisable(bEnable, textBoxID)
        {
            document.getElementById(textBoxID).disabled = !bEnable
        }
    </script> 
```

在关闭主体之前，或者在 DOM 就绪时调用。通过这种方式，代码甚至在复选框和文本字段存在之前就被执行。

默认情况下，文本输入处于启用状态，因此您可能还需要将复选框设置为选中状态。

这是一个工作版本：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
</head>
<body>
  <input type="text" id="txtBox" />
  <input type="checkbox" id="chkbox" onchange="document.getElementById('txtBox').disabled=!this.checked;" checked="checked" />
</body>
</html> 
```

还有一个演示：http: [//jsbin.com/ulemim/2](http://jsbin.com/ulemim/2)

# wcf - WCF如何绑定多个服务契约？

> ID：14336861
> 
> 赞同：7
> 
> 时间：2013-01-15T11:35:52.493
> 
> 标签：wcf, c#-4.0, wcf-binding

首先，我会道歉，因为这可能是重复的，但我读到的所有内容似乎都不完整或令人困惑，因为我对 WCF 很陌生。

我基本上希望在 IIS 中部署一个 WCF 服务，可以访问 2 个端点，并且整天都在绕圈子:(

我有一个具有以下结构的服务库 WCF dll

```
App.config
TestSvc1.cs
ITestSvc1.cs
TestSvc2.cs
ITestSvc2.cs 
```

这在 VS WCF 测试客户端中运行良好，现在我正在部署到 IIS，所以我创建了一个 WCF 服务应用程序并引用了 dll。该项目具有以下结构

```
Service1.svc
Web.config 
```

`Service1.svc`包含这个

```
<%@ ServiceHost Language="C#" Debug="true" 
    Service="WCFServices.TestServices.ITestSvc1" CodeBehind="Service1.svc.cs" %> 
```

我`web.config`的有以下

```
<services>
   <service name="WCFServices.TestServices.TestSvc2">
      <endpoint 
          address="" 
          binding="wsHttpBinding" bindingConfiguration="LargeSizeMessages" 
          contract="WCFServices.TestServices.ITestSvc2">
          <identity>
            <dns value="localhost" />
          </identity>
      </endpoint>
      <endpoint 
           address="mex" 
           binding="mexHttpBinding"  
           contract="IMetadataExchange" />
      <host>
         <baseAddresses>
            <add baseAddress="http://localhost:8080/wcf2/TestServices/TestSvc2/" />
         </baseAddresses>
      </host>
   </service>
   <service name="WCFServices.TestServices.TestSvc1">
      <endpoint 
          address="" 
          binding="wsHttpBinding" bindingConfiguration="LargeSizeMessages" 
          contract="WCFServices.TestServices.ITestSvc1"  
          listenUri="http://localhost:8080/wcf2/service1.svc">
          <identity>
            <dns value="" />
          </identity>
      </endpoint>
      <endpoint 
          address="" 
          binding="wsHttpBinding" bindingConfiguration="LargeSizeMessages" 
          contract="WCFServices.TestServices.ITestSvc2" 
          listenUri="http://localhost:8080/wcf2/service1.svc">
          <identity>
            <dns value="" />
          </identity>
      </endpoint>
      <endpoint address="mex" binding="mexHttpBinding"  contract="IMetadataExchange" />
      <host>
         <baseAddresses>
            <add baseAddress="http://localhost:8080/wcf2/TestServices/TestSvc1/" />
         </baseAddresses>
      </host>
   </service>     
</services> 
```

任何帮助将不胜感激。如您所见，我尝试`web.config`在`Service1.svc`

我还阅读了有关创建继承这些接口的类的信息，但我不确定如何根据上面的内容来实现它。我需要修改`Service1.svc`吗？

```
public interface MultipleSvc : ITestSvc1, ITestSvc2
{
   // What exactly do I put here? I have no idea, do I leave it blank? This didn't work for me
} 
```

任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T11:48:47.333

黄金法则：**一`.svc`= 一项服务**（或更具体地说：一个服务*实现*类）

因此，如果您确实有两个独立的、不同的服务（在 classes`WCFServices.TestServices.TestSvc1`和中`WCFServices.TestServices.TestSvc2`），那么您需要**两个`.svc`文件**（每个文件一个，用于每个服务）

您*可以*做的是拥有**一个服务实现类**来实现两种服务合同：

```
public class MultipleServices : ITestSvc1, ITestSvc2
{
   // implement the service logic here, for both contracts
} 
```

在这种情况下，**一个 svc 文件**就足够了（该`.svc`文件是**每个实现类**的，并且可以托管多个服务合同）。但是您也需要更改配置 - 因为您实际上只有**一个服务类**（因此：一个`<service>`标签）和其中托管的多个合同：

```
<services>
   <service name="WCFServices.TestServices.MultipleServices">
      <endpoint 
          address="Service1" 
          binding="wsHttpBinding" bindingConfiguration="LargeSizeMessages" 
          contract="WCFServices.TestServices.ITestSvc1">
          <identity>
            <dns value="" />
          </identity>
      </endpoint>
      <endpoint 
          address="Service2" 
          binding="wsHttpBinding" bindingConfiguration="LargeSizeMessages" 
          contract="WCFServices.TestServices.ITestSvc2">
          <identity>
            <dns value="localhost" />
          </identity>
      </endpoint>
      <endpoint 
           address="mex" 
           binding="mexHttpBinding"  
           contract="IMetadataExchange" />
   </service>     
</services> 
```

另外：由于您似乎在 IIS 中托管 WCF 服务，因此定义任何`<baseAddress>`值都没有意义 - 服务的“基”地址是文件所在的位置 (URI) `*.svc`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T08:22:33.120

您不需要两个 svc 文件。选择 ServiceReference1.Service1Client 或 ServiceReference1.Service2Client。

# jquery - 带有 ServiceStack.Net REST 服务器和 jQuery 客户端的地址栏中的漂亮 url

> ID：14336863
> 
> 赞同：2
> 
> 时间：2013-01-15T11:35:57.210
> 
> 标签：jquery, rest, url-routing, servicestack

我想要浏览器地址栏中的漂亮网址，例如：[http ://domain.com/userName](http://domain.com/userName)

当 jQuery 客户端与 ServiceStack 服务器完全分离时，这可能吗？在服务器端没有任何 MVC 或模板。

例如：

用户在地址栏中键入： http: [//domain.com/userName](http://domain.com/userName) 并获取他的个人资料 gui 而不是 JSON。

如何在客户端和服务器之间实现最大的分离？换句话说：漂亮 url 的最佳客户端 JavaScript 解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:30:06.243

看起来带有单页应用程序的路由是在客户端实现漂亮 url 的唯一方法：http: [//backbonetutorials.com/what-is-a-router/](http://backbonetutorials.com/what-is-a-router/)

# r - 将午夜条目插入日志

> ID：14336868
> 
> 赞同：2
> 
> 时间：2013-01-15T11:36:07.743
> 
> 标签：r, datetime, logging

我们正在监视 3 个进程 A、B 和 C，它们始终处于 X、Y 或 Z 级。协议会记录进程何时更改级别。

```
df = read.csv(tc <- textConnection('Time1,Process1,Level1
2013-01-09 18:00:34,A,X
2013-01-09 18:00:34,B,Y
2013-01-09 18:00:34,C,X
2013-01-09 22:00:59,A,Z
2013-01-10 00:10:38,A,X
2013-01-10 18:38:35,B,Z
2013-01-11 05:03:11,A,Z
2013-01-11 11:09:10,C,Y
2013-01-11 12:01:18,A,Off
2013-01-11 12:01:18,B,Off
2013-01-11 12:01:18,C,Off
'),header=TRUE)
close.connection(tc) 
df$Time1 = as.POSIXct(df$Time1) 
```

监控于 2013-01-09 18:00:34 开始，并于 2013-01-11 12:01:18 关闭。在 2013-01-09 18:00:34 和 2013-01-09 22:00:59 之间，进程 A 处于 X 级，在 2013-01-09 22:00:59 和 2013-01-10 00:10 之间： 38 进程 A 处于 Z 级。

出于图表目的，我们希望将每个午夜的每个进程的最后一级和一级状态插入协议中：

```
2013-01-09 23:59:59,A,Z
2013-01-10 00:00:00,A,Z
2013-01-10 23:59:59,A,X
2013-01-11 00:00:00,A,X

2013-01-09 23:59:59,B,Y
2013-01-10 00:00:00,B,Y
2013-01-10 23:59:59,B,Z
2013-01-11 00:00:00,B,Z

2013-01-09 23:59:59,C,X
2013-01-10 00:00:00,C,X
2013-01-10 23:59:59,C,X
2013-01-11 00:00:00,C,X 
```

可以假设在 23:59:59 和 00:00:00 之间日志中没有事件。最后，协议会在插入后按 Time1 排序（这个我们可以自己弄清楚）。非常感谢任何指导！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:00:14.383

(+1) 相当复杂和有趣的任务。我想我有答案。我将尝试在这里解释该方法。我希望这是有道理的。这里有两个棘手的地方。我的解决方案使用`data.table`.

`First:`我发现首先构建您需要的输出的前两列更容易。这是在代码的第一部分完成的，如下所示：

```
require(data.table)
dates <- unique(as.character(strptime(as.character(df$Time1), "%Y-%m-%d")))
dates <- dates[1:(length(dates)-1)]
dates <- strptime(paste(dates, "23:59:59"), "%Y-%m-%d %H:%M:%S")
dates <- sort(c(dates, dates+1))
Time <- rep(dates, length(levels(df$Process1)))
Process <- rep(levels(df$Process1), each=length(dates))
dt.out <- data.table(Time=as.POSIXct(Time), Process=Process)
# data.table outputs crazy values if not converted using as.POSIXct..?! 
```

通过查看每一行代码的作用，这应该很容易理解。我希望它可以扩展到其他场景。

`Second:`第二位同样棘手，但可以在一行中使用`data.table`. 花了一段时间才弄清楚，但它太棒了！

```
dt <- data.table(df, key="Process1") # convert input data.frame to data.table
out <- dt.out[, dt[J(Process)]$Level1[max(which(dt[J(Process)]$Time1 < Time))], 
            by = c("Process", "Time")]

> out

    Process                Time V1
 1:       A 2013-01-09 23:59:59  Z
 2:       A 2013-01-10 00:00:00  Z
 3:       A 2013-01-10 23:59:59  X
 4:       A 2013-01-11 00:00:00  X
 5:       B 2013-01-09 23:59:59  Y
 6:       B 2013-01-10 00:00:00  Y
 7:       B 2013-01-10 23:59:59  Z
 8:       B 2013-01-11 00:00:00  Z
 9:       C 2013-01-09 23:59:59  X
10:       C 2013-01-10 00:00:00  X
11:       C 2013-01-10 23:59:59  X
12:       C 2013-01-11 00:00:00  X 
```

让我把这两行分成几部分来解释发生了什么。

在第一行中，我们`set key`为`dt`as `Process1`。这允许`VERY fast`按列过滤数据`Process1`。即，`dt["A"]`等价于`df[df$Process1 == "A"]`，但前者速度极快。

在第二行中，发生了很多事情。我们已经创建`dt.out`了所需输出的前两列。剩下的就是第三列。看那行的最后一部分`by = c("Process", "Time")`。在这里，我们将这两个变量分开`data.table dt.out`。对于每个 split `data.table`，我们应用它基本上从所有当前值中`dt[J(Process)]$Level1[max(which(dt[J(Process)]$Time1 < Time))]`挑选出<从被过滤的值中，并使用这个最大索引来返回相应的值。`maximum index``Time1``Time``data.table``Process``Levels1`

希望这可以帮助。

# asp.net - Asp 标签内的注释

> ID：14336870
> 
> 赞同：0
> 
> 时间：2013-01-15T11:36:12.033
> 
> 标签：asp.net

我知道如何注释 ASP 页面中的任何代码，但我想问的是，在 ASP 中是否允许在任何 ASP 标记中注释行。例如：

```
<asp:RequiredFieldValidator runat="server" ID="rfv01" ControlToValidate="txtName"
  Enabled="False" Display="None" ErrorMessage="Error"
  <%--Some Comments--%>
  ValidationGroup="TestGroup" /> 
```

我知道它非常基本的问题，但目前找不到答案。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:39:23.483

不，不是。

您可能能够通过使用假属性/属性来实现类似的效果，但我不知道 ASP.NET 解析器将如何处理它：

```
 <asp:RequiredFieldValidator runat="server" ID="rfv01" ControlToValidate="txtName"
  Enabled="False" Display="None" ErrorMessage="Error"
  comments="--Some Comments--"
  ValidationGroup="TestGroup" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:38:59.743

你不能。您不能`<% %>`在服务器标签中嵌入内联结构。您也不能将它们嵌入到非服务器标签中。在第一种情况下，您会收到编译时错误，在后一种情况下会出现“运行时错误”，因为它会产生错误的标记，因此`<div <%-- some comment --%>></div>`会导致该元素无法在 Chrome 中呈现，而其他浏览器可能会以不同的方式处理它.

PS由于我自己的错，我的原始答案解决了错误的问题。

# css - div 忽略样式表中的高度

> ID：14336875
> 
> 赞同：9
> 
> 时间：2013-01-15T11:36:48.427
> 
> 标签：css, html, height

这真让我抓狂。我似乎无法控制`div.down_arrow`下面元素的高度 -

```
...
<div id="filters">
    ...
    <span>All</span>
    <div class="down_arrow">
        <img src="images/down_arrow.png" alt=""/>
    </div>
    ...
</div>
... 
```

我有以下CSS -

```
#filters {
    float: right;
    padding: 24px 10px 0 0;
}

#filters div {
    display: inline;
}

#filters div.down_arrow,
#filters div.down_arrow img {
    height: 12px;
    width: 23px;
}

#filters div.down_arrow:hover ing {
        opacity: 0;
} 
```

safari 开发者工具告诉我，我的高度和宽度`div.down_arrow`仍然有效（即没有通过属性的线 - 没有其他东西可以覆盖它们）。但是屏幕上的小弹出窗口显示尺寸为`div.down_arrow`27px x 16px。我可以看到该元素大于`img`它包含的元素。

我不明白发生了什么 - 看起来高度似乎是从前面的 span 元素中获取的（我不知道是什么影响了宽度）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T11:40:46.297

更改`display: inline;`为`display: inline-block;`

问题是您只能手动控制块元素的宽度/高度，而不是内联元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:40:36.440

内联元素不受高度影响

# javascript - 文件上传形式在 Chrome 和 Firefox 中是不同的。为什么？

> ID：14336881
> 
> 赞同：1
> 
> 时间：2013-01-15T11:37:13.820
> 
> 标签：javascript, html

我在 HTML 页面中有一个普通的文件上传代码，我将通过它上传文件。问题是我稍后在我的 Servlet 中使用了完整的文件 URL。在 Firefox 中有一个包含完整 URL 的文本框，所以我的应用程序在那里工作正常，但在 Chrome 中只有带有扩展名的文件名出现，所以文件没有上传文件。

如果我的语言不清楚，请在 Chrome 和 Firefox 中打开[此链接并观察。](http://cgi-lib.berkeley.edu/ex/fup.html)

有什么解决方案可以让我也可以在 chrome 中使用 URL(imagepath) 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T09:14:03.007

由于安全原因，您无法从任何现代浏览器（IE 除外）从本地系统获取文件的路径。仅返回文件名。跟踪文件来自哪个本地位置不是任何网站的业务。无论文件在本地文件系统中的什么位置，您都可以通过多种方式将文件上传到服务器。

# c# - 传递参数 ASP.Net

> ID：14336884
> 
> 赞同：5
> 
> 时间：2013-01-15T11:37:17.277
> 
> 标签：c#, asp.net, webforms

有什么方法可以通过 ASP.Net Web 应用程序（不是 MVC）中的路径（URL）将参数传递给用户控件/页面。

即 [http://abc.com/news/para-1/para-2](http://abc.com/news/para-1/para-2) 其中`para-1`和`para-2`是参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:39:46.173

您要查找的内容称为`Routing`.

如果您使用的是 .NET 4+，您可以阅读如何在[MSDN](http://msdn.microsoft.com/en-us/library/dd329551%28v=vs.100%29.aspx)上的 Web 窗体应用程序中实现它。

您的规则基本上归结为这一点，假设`news.aspx`是您想去的地方：

```
routes.MapPageRoute("NewsRoute",
    "News/{arg1}/{arg2}",
    "~/news.aspx"); 
```

然后，您可以使用以下任何方法继续访问这些值：

```
Page.RouteData.Values["arg1"]
<asp:Literal ID="Literal" Text="<%$RouteValue:arg1%>" runat="server"></asp:Literal> 
```

如果您不使用 .NET 4+，Scott Hanselman 撰写了有关[ASP.NET FriendlyUrls 的](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)文章，它在 NuGet 中可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:42:03.370

您可以使用[ASP.NET 友好 URL](http://aspnetfriendlyurls.codeplex.com/)

> ASP.NET 友好的 URL 库使得在 ASP.NET 应用程序中为基于文件的处理程序（例如 ASPX、ASHX）启用无扩展 URL 变得很容易。

Scott Hanselman 有一篇很好的介绍：[介绍 ASP.NET FriendlyUrls - 更简洁的 URL、更简单的路由和 ASP.NET Web 窗体的移动视图](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T11:44:03.887

您可以尝试使用[QueryStrings](http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString)。

像这样重定向您的页面：

```
Response.Redirect("Webform2.aspx?Name=" +
this.txtName.Text + "&LastName=" +
this.txtLastName.Text); 
```

在您的新页面上获取如下值：

```
private void Page_Load(object sender, System.EventArgs e)
{
    this.txtBox1.Text = Request.QueryString["Name"];
    this.txtBox2.Text = Request.QueryString["LastName"];
} 
```

# css - css背景图片剪辑

> ID：14336889
> 
> 赞同：1
> 
> 时间：2013-01-15T11:37:53.797
> 
> 标签：css, background-image, background-position

我在 php 中设置我的图像 src 并在 css 中控制样式。我有一个图像精灵，但无论我做什么，图像似乎都没有剪辑到我想要的区域。尽管我的背景大小设置为 24 x 24 像素，但我只是让整个图像出现。

请注意，img src 必须保留在 HTML 中，而不是移动到 css 中的 bg-image :)

在这里可以看到一个 jsfiddle jsfiddle.net/s6UnV

有任何想法吗？

```
#swap li img {
    background-position: 0 0px;
    background-size: 24px 24px;
    display: block;
    text-indent: -10000px;
    -webkit-transition: background-position .6s;
    -moz-transition: background-position .6s;
    -o-transition: background-position .6s;
    -ms-transition: background-position .6s;
    transition: background-position .6s;
}

#swap li img:hover {
   background-position: 0 -24px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:10:26.510

您不应该将标签 img 用于精灵，您应该使用带有背景图像的 div 来添加精灵效果。

我在这里更新了你的 jsFiddle[更新了 jsFiddle](http://jsfiddle.net/s6UnV/5/)

我所做的是以下

将 Html 更改为

```
<ul id="swap">
  <li>
    <a href="www.google.com" target="_blank">
       <div class="fb-sprite" style=" background-image:url('http://rldesign.net/Joomla3/modules/mod_social_css3/assets/glyph/facebook_hover.png')">
      </div>
    </a>
  </li>
</ul> 
```

并将 fb-sprite 类样式添加到 css

```
.fb-sprite{
    width:24px;
    height:24px;
    background-position: 0 0px;
    background-size: 24px 48px;
    display: block;
    -webkit-transition: background-position .6s;
    -moz-transition: background-position .6s;
    -o-transition: background-position .6s;
    -ms-transition: background-position .6s;
    transition: background-position .6s;
    }

.fb-sprite:hover{
   background-position: 0 -24px;
    } 
```

希望能帮助到你

ps：你也可以在这个上使用不透明效果，这样facebook logo就不会突然消失，只是一个建议。

干杯。

编辑：现在您可以以编程方式更改 img 的 url 并且样式将起作用。还更新了 jsFiddle

# base64 - Javamail base64 解码

> ID：14336891
> 
> 赞同：1
> 
> 时间：2013-01-15T11:37:54.180
> 
> 标签：base64, jakarta-mail

我使用 javamail 来获取消息，当我收到消息时：com.sun.mail.util.BASE64DecoderStream，

我知道这是多部分消息的一部分，在我拥有的消息来源中

```
Content-Type: image/png; name=index_01.png 
```

内容传输编码：base64

如何编码此消息？

编辑：我有那个代码：

```
else if (mbp.getContent() instanceof BASE64DecoderStream){
                        InputStream is = null;
                        ByteArrayOutputStream os = null;

                            is = mbp.getInputStream();
                            os = new ByteArrayOutputStream(512);
                            int c = 0;
                            while ((c = is.read()) != -1) {
                                os.write(c);
                            }

                            System.out.println(os.toString()); 

                    } 
```

并且该代码返回奇怪的字符串，例如：Ř˙á?Exif??II*????????????˙ě?Ducky???????˙á)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-12T06:26:32.780

`com.sun.mail.util.BASE64DecoderStream`是平台相关的。您不能总是依赖于处理 base64 解码的类类型。

相反，javamail API 已经为您支持解码：

```
// part is instanceof javax.mail.Part
ByteArrayOutputStream bos = new ByteArrayOutputStream();
part.getDataHandler().writeTo(bos);

String decodedContent = bos.toString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:31:36.527

当您阅读图像部分的内容时，您**期待什么？**图像以编码格式存储在消息中，但 JavaMail 在将字节返回给您之前对数据进行解码。如果将字节存储在文件中，则可以使用许多图像查看/编辑应用程序显示图像。如果您想用您的Java 程序显示它们，您需要使用（例如）java.awt.image 包中的API 将字节转换为适当的Java Image 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:49:59.377

Sun 的 base 64 编码器位于可选包中，可以随时移动或重命名而不会发出警告，也可能在替代 Java 运行时中丢失，也可能禁用对这些包的访问。最好不要依赖它。

我想说，改用[Apache Commons的](http://commons.apache.org/)[Base64](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html)，应该做同样的事情。希望您可以重建和修复源代码。

# internet-explorer - 带有 Internet Explorer 域的 vpn

> ID：14336892
> 
> 赞同：0
> 
> 时间：2013-01-15T11:38:03.000
> 
> 标签：internet-explorer, sharepoint-2010, vpn

我正在尝试使用 Internet Explorer 通过 VPN 访问共享点站点。我有一个登录名，但是当我尝试输入我的凭据时它会拒绝它，因为域设置为 domain.local 并且我正在作为我自己的计算机登录。我可以轻松登录到 VPN 本身，但我无法访问 SP。铬工作正常

我究竟做错了什么？

我正在使用网络连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:29:30.747

解决了！必须在用户名中设置域/用户！

# ruby-on-rails - 按元素排序数组

> ID：14336896
> 
> 赞同：0
> 
> 时间：2013-01-15T11:38:19.907
> 
> 标签：ruby-on-rails

我试图通过 arr 中的值来安排 @plrdet。

当我选择这种方式时：

```
@plrdet = Player.find_all_by_fid(arr) 
```

它按表中行的顺序返回，我希望它按 arr 的顺序排序。

例如： Player 包含以下属性：**地址**、*年龄*、uniqnum。

和：

```
arr 
```

是 uniqnum 的数组。

arr=[ **456** , *123,789* ]

播放器=[{NYC,32,123},{BSAS,27,456},{LND,30,789})

我正在寻找的结果应该来自 "find_all" player=[,{BSAS,27, **456** },{NYC,32, *123* },{LND,30,789})

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:11:52.857

如果我理解这个问题，我会尝试这样的事情：

**哈希版本**

```
players = [{}]
@plrdet.each do |player|
    players << {"adress" => player.adress, "age" => player.age, "fid" => player.fid}
end
players.inspect 
```

现在结果应该是 [{"adress" => BSAS, "age" => 27, "fid" => 456},{"adress" => NYC, "age" => 32,"fid" => 123} ,{"地址" => LND, "年龄" => 30, "fid" => 789}]

**阵列版本**

```
players = [[]]
@plrdet.each do |player|
    players << [player.adress, player.age, player.fid]
end 
```

现在结果应该是 [[BSAS,27,456],[NYC,32,123],[LND,30,789]]

**种类**

我认为这个解决方案应该有效，但我不喜欢它，并且可能有更好的方法来解决您的问题：

```
sorted_players = [[]] 
arr.each do |arr_fid| 
    sorted_players << players.collect{|player| player if player.include?(arr_fid)} 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:53:02.297

你有两个选择：

1.  使用[order](http://guides.rubyonrails.org/active_record_querying.html#ordering)对查询结果进行排序
2.  使用[sort](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sort-21)对内存中的结果进行排序

您可以使用 1。它将类似于：

`@plrdet = Player.find_all_by_fid(arr).order("address")`

# windows-phone-8 - Windows Phone 8 上的数据会话信息

> ID：14336897
> 
> 赞同：0
> 
> 时间：2013-01-15T11:38:25.147
> 
> 标签：windows-phone-8

我正在构建一个应用程序，我想跟踪我的设备数据会话信息。

例如持续时间、接收字节数、发送字节数、承载、接入点、本地 IP 地址、使用 wifi、3g、gprs、蜂窝网络连接时的协议。

如果我能得到一切就完美了，但得到 1 就绰绰有余了。

如果可能的话，我希望有人可以向我展示一些解决方案或可能的 API。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:35:21.123

WP8 中有 3 个命名空间提供网络信息： [System.Net.NetworkInformation](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.net.networkinformation%28v=vs.105%29.aspx)、[Microsoft.Phone.Net.NetworkInformation](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.net.networkinformation%28v=vs.105%29.aspx)和新的 WP8 WinPRT[命名空间 Windows.Networking.Connectivity](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.networking.connectivity.aspx)。

虽然[DataUsage](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.networking.connectivity.dataplanusage.aspx) /DataPlan API 在新的 WP8 命名空间中可用，但它们在 WP8 上不受支持，并且仅用于 Win8 API 兼容性。您可以使用新的 WP8 API 或 WP7 API 来枚举所有连接的接口类型并检查它们是否是 WiFi/以太网/3G/等：

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    foreach (var network in new NetworkInterfaceList())
    {
        Debug.WriteLine(network.InterfaceType);
    }
} 
```

# javascript - 单独的 JavaScript 文档与 GWT 应用程序对话

> ID：14336898
> 
> 赞同：0
> 
> 时间：2013-01-15T11:38:29.200
> 
> 标签：javascript, gwt

我有一个 JavaScript 文档，我创建了一些复杂的功能，这些功能依赖于包含的几个第三方 JavaScript 库。

我的目标是拥有它，以便 GWT 可以与我的脚本交互，反之亦然。我试图创建一个使用 JSNI 的 GWT 包装器，但在尝试从 JavaScript（嵌入在我的 index.html 中 - 除了注入 GWT 的代码之外是空白的）与我的 GWT 应用程序获取通信时遇到问题。

对于我的第二次尝试，我在 GWT 服务器端创建了一个 servlet，我可以通过 JSON 与之通信，尽管这看起来可以工作，但必须重新构建 GWT 已经修复的许多框架技术似乎很麻烦。

所以我的问题是，在没有来自 GWT 的初始调用（如果可能的话）的情况下，从我的 JavaScript 到 GWT 进行双向通信的最简单方法是什么？

# android - 带有 EditText 的 Android 对话框抛出 NullPointerException

> ID：14336900
> 
> 赞同：0
> 
> 时间：2013-01-15T11:38:31.533
> 
> 标签：android, listview, dialog, nullpointerexception, android-edittext

我正在尝试弹出一个对话框，显示有关 ListView 中条目的更多信息。ListView 生成良好，对话框的所有变量都初始化良好，但是当我尝试将相关描述写入 EditText 框时，会引发 NullPointerException。有任何想法吗？

```
@Override
  protected void onListItemClick(ListView l, View v, int position, long id) {
    //TODO Add code for action performed on item click here
    // i.e. open dialogue showing details

    // Custom dialog box
    final Dialog dialog = new Dialog(context);
    dialog.setContentView(R.layout.view_dialog);
    dialog.setTitle("Description: " + savedSubjects[position]);

    // set custom dialog components
    EditText descriptionOutput = (EditText) findViewById(R.id.dialogText);
    String descToWrite = savedDescriptions[position]; // I created this in case calling from the array was the problem. In the trace this variable is correctly set.

    descriptionOutput.setText(descToWrite); //the error occurs at this line

    // set dismiss button
    Button dialogButton = (Button) findViewById(R.id.dialogButton);
    //if button is clicked close the dialog
    dialogButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            dialog.dismiss();
        }
    });

    // display the dialog
    dialog.show();
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T11:40:38.863

采用

```
EditText descriptionOutput = (EditText)dialog.findViewById(R.id.dialogText); 
```

代替

```
EditText descriptionOutput = (EditText) findViewById(R.id.dialogText); 
```

从对话框布局访问 EditText

# deployment - 如何使用 capistrano 在 Rails 服务器上运行脚本？

> ID：14336908
> 
> 赞同：3
> 
> 时间：2013-01-15T11:39:06.323
> 
> 标签：deployment, ruby-on-rails-3.2, capistrano

我写了一个名为`mailman_server`using的脚本，`gem "mailman"`放在'script/mailman_server'中

```
 #!/usr/bin/env ruby
    require "rubygems"
    require "bundler/setup"
    require "mailman"

    #Mailman.config.logger = Logger.new("log/mailman.log")
    Mailman.config.poll_interval = 3
    Mailman.config.pop3 = {
      server: 'server', port: 110,
      username: "loginid",
      password: "password"
    }

    Mailman::Application.run do
      default do
        p "Found a new message"
        # 'perform some action here'
        end
    end 
```

它从我的帐户中获取所有电子邮件，然后我对它们进行处理。

我有我的`deploy.rb`文件

```
set :stages, %w(production)     #various environments
load "deploy/assets"                    #precompile all the css, js and images... before deployment..
require "bundler/capistrano"            # install all the new missing plugins...
require 'delayed/recipes'               # load this for delayed job..
require 'capistrano/ext/multistage'     # deploy on all the servers..
require "rvm/capistrano"                # if you are using rvm on your server..
require './config/boot'           
require 'airbrake/capistrano'           # using airbrake in your application for crash notifications..

set :delayed_job_args, "-n 2"            # number of delayed job workers 

before "deploy:assets:symlink", "deploy:copy_database_file"
before "deploy:update_code",  "delayed_job:stop"  # stop the previous deployed job workers...
after "deploy:start",   "delayed_job:start" #start the delayed job 
after "deploy:restart", "delayed_job:restart" # restart it..
after "deploy:update", "deploy:cleanup" #clean up temp files etc.
set :rvm_ruby_string, '1.9.3'             # ruby version you are using...
set :rvm_type, :user

server "my_server_ip", :app, :web, :db, :primary => true 

set(:application) { "my_application_name" }
set (:deploy_to) { "/home/user/#{application}/#{stage}" }
set :user, 'user'
set :keep_releases, 3
set :repository, "git@bitbucket.org:my_random_git_repo_url"
set :use_sudo, false
set :scm, :git
default_run_options[:pty] = true
ssh_options[:forward_agent] = true
set :deploy_via, :remote_cache
set :git_shallow_clone, 1
set :git_enable_submodules, 1

namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
  task :copy_database_file do
    run "ln -sf #{shared_path}/database.yml #{release_path}/config/database.yml"
  end
end 
```

每次部署到服务器时，我都想执行这个脚本。此外，每当我部署代码时，我都需要停止此脚本。

我无法弄清楚我们如何在服务器上使用 capistrano 启动或停止此脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T11:02:26.610

您可以尝试以这样的方式开始保存进程的 pid

```
run "cd #{deploy_to}/current; ./script/mailman_server &; echo &! > /var/run/mailman_server.pid" #untested 
```

并停止它

```
run "kill `cat /var/run/mailman_server.pid`;  rm /var/run/mailman_server.pid" 
```

但是我认为您应该查看[Foreman](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)，它提供了在开发中运行作业的便捷方式，并支持将您的作业导出到 upstart 或 inid.d 脚本以进行生产，因此您只需启动或停止相应的服务

```
run "sudo /etc/init.d/mailman_server start"
run "sudo /etc/init.d/mailman_server stop" 
```

# css - 我想在我的横幅中禁用用于移动 div（移动到屏幕外）的水平滚动条；但不适用于其余内容

> ID：14336909
> 
> 赞同：2
> 
> 时间：2013-01-15T11:39:08.947
> 
> 标签：css, html, scrollbar

我的网站[http://dekomkommertijd.nl](http://dekomkommertijd.nl)有一个横幅，上面有我用 CSS 动画（移动）div 制作的移动云。他们向左进入，当他们离开屏幕在右侧时，他们会创建一个水平滚动条。一切都按我的意愿工作，除了我不想要滚动条，除了我的内容 div 中的内容（画布 - 宽度为 960px）。外面的一切都应该没有水平滚动条，只是离开屏幕。

我尝试了几种我发现的方法（主要用于静态 div），但它们不适用于我的移动 div。

有人知道如何解决这个问题吗？

谢谢。瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:49:36.210

你描述它的方式向我表明你希望你的云和其他内容以不同的方式溢出。溢出由父级决定，因此要以不同方式处理溢出，您需要有两个父级：一个用于云，一个用于内容。

如果您选择这样做，将云父级设置为绝对定位会使其脱离正常的文档流，因此它不会干扰您的其余内容。并设置溢出使其行为如你所愿。

```
width: 100%; /* Spans the whole document */
overflow-x: hidden; /* Hides overflow instead of displaying it */
position: absolute;
top: 0; left: 0; 
```

另一种解决方案是为您的云和其他内容处理溢出。如果你这样做，你可以将它设置为隐藏在一个共同的父元素上，比如身体。

第二个解决方案可能更有意义，因为它 1\. 更简单，2\. 除了云层溢出之外，您不太可能拥有任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:04:30.320

`overflow-y: hidden`从以下代码中删除：

```
html {
    overflow-y: scroll; /* Remove This Line */
    -webkit-font-smoothing: antialiased;
} 
```

并在身体上应用以下样式：

```
body {
    overflow-y: auto;
    overflow-x: hidden;
} 
```

希望它会奏效。

# python - sqlalchemy中join和jonedload的区别

> ID：14336915
> 
> 赞同：1
> 
> 时间：2013-01-15T11:39:19.103
> 
> 标签：python, sqlalchemy, relationship

我有以下课程：

```
Class User(Base):
    #user properties

Class Item(Base):
    #item properties

Class User_Item(Base):
    __tablename__='users_items'
    id=Column(Integer, primary_key=True)
    user_id=Column(Integer, ForeignKey('users.id'))
    item_id=Column(Integer, ForeignKey('items.id'))
    info=Column(String(20))
    user=relationship(User,backref='items',primaryjoin=(User.id==user_id))
    item=relationship(Item, backref='users',primaryjoin=(Item.id==item_id)) 
```

现在以下两个查询有什么区别：

```
result1= session.query(Item).options(joinedload(Item.users)).filter(Item.users.any(user=user1) 
```

或者

```
result2=session.query(Item).join(Item.users).filter(Item.users.any(user=user1)) 
```

由于某种原因，第二个看起来很奇怪！假设 user1 有两个项目，运行`result1.count()`按预期返回 2，但`result2.count()`返回 3！而，`len(result2.all())`是2！谁能告诉我，这是怎么回事？！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:51:30.187

第一种方法`joinedload`显然不是您想要的，因为它只定义了`item.users`在执行查询后如何加载（请参阅[关系加载技术](http://docs.sqlalchemy.org/en/rel_0_7/orm/loading.html)）。

而加入，你应该使用`contains`而不是`any`：

```
result3 = session.query(Item).join(Item.users).filter(Item.users.contains(user1)) 
```

我的猜测是，您的版本`any`每个连接结果都会产生多行。您可以通过检查生成的 SQL（`echo=True`在引擎配置上设置）来验证这一点。

**编辑**

您可能错误地定义了多对多关系，这可能是真正的问题。在您的版本中`User.items`，并且`Item.users`都指向`User_Item`用户或项目，我认为您没有意识到这一点。

您应该查看[关联对象模式](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#association-object)以及如何[简化它](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/associationproxy.html#simplifying-association-objects)。

# javascript - 不允许从 url 获取图像，但来自另一个

> ID：14336919
> 
> 赞同：0
> 
> 时间：2013-01-15T11:39:36.480
> 
> 标签：javascript, html, url

所以我从[http://www.omdbapi.com/获取信息](http://www.omdbapi.com/)

当我收到信息时，有一个“海报”字段，其中包含图像海报的 URL。

我会做类似的事情：

```
$box.html(
            '<div class="large_movie_info_box">' + 
            '<img alt="poster" src="' + e.imdb.Poster + '"/>' + 
            '</div>'
        ); 
```

如果我从 localhost/path/bla 访问我的网站，我可以获取它

但如果我从我的域访问它，我无法得到错误：

```
GET http://ia.media-imdb.com/images/M/MV5BMTIwOTE4MTU4MV5BMl5BanBnXkFtZTcwMDk1MDU1MQ@@._V1_SX300.jpg 403 (Forbidden) 
```

有没有办法解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:55:31.823

当您在自己的站点中链接来自另一个站点的图片时，您需要确保该站点明确允许您这样做。带宽需要花钱，大多数网站都不愿意支付第三方网站的费用。在 IMDB 的情况下，很明显他们不允许这样做，因为他们已经实施了对策来避免它。

您必须使用允许这样做的服务器端技术（例如 PHP）将每个图像（一次）下载到您的托管空间并从那里链接。这样，您将成为支付账单的人;-)

*除此之外，还有版权问题。请务必查看 IMDB 的使用条款，以了解是否允许您使用他们的图片。*

# solr - SolrJ 是否具有相当于 Lucene BooleanQuery 的功能？

> ID：14336920
> 
> 赞同：1
> 
> 时间：2013-01-15T11:39:44.090
> 
> 标签：solr, lucene

我正在实现一个类似 SQL 的查询解析器，它输出 Solr 查询。我知道 Solr/Lucene 查询与布尔查询并不完全相同，就像必须/不得/应该一样。但是我必须自动解析类似 SQL 的布尔查询，因为我们客户的接口已经采用了类似 SQL 的接口。

像“A and B”->“A and B”这样的简单解析是可以的，但是像“NOT(A and (B or C)) AND D”这样的解析，当 SolrServer 返回一个我没有返回的值时，我不知所措不打算。

我阅读了以下内容

[http://lucene.472066.n3.nabble.com/Unexpected-boolean-query-behavior-td487306.html](http://lucene.472066.n3.nabble.com/Unexpected-boolean-query-behavior-td487306.html)

但它似乎是 Lucene 的，我无法弄清楚如何将 lucene BooleanQuery 连接到 Solr。有人有好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:35:34.563

如果您查看[Lucene 查询语法文档](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)，您应该能够确定布尔查询语法如何映射到本机 Lucene（和 Solr）查询语法。查看 Lucene 源代码也很有启发性（我知道 Lucene.NET 源代码从我在[Lucene Does Not Create Parse Trees](http://blogs.perl.org/users/mark_leighton_fisher/2011/01/lucene-does-not-create-parse-trees.html)上的工作中非常易读）。

# swing - 现有的帖子通过更新的帖子不断重新添加到 jTable 中

> ID：14336922
> 
> 赞同：-1
> 
> 时间：2013-01-15T11:39:45.840
> 
> 标签：swing, jtable, defaulttablemodel

这是我的代码：

```
 public void submitReply(ActionEvent e) {
    String replyBy = userName;
    String reply = jTextArea_reply.getText();
    if (reply.equals("")) {
        JOptionPane.showMessageDialog(null, "Comment cannot leave blank");
    } else {
        eForumTopics comment = new eForumTopics(replyBy, reply);
        if (comment.createComment() == true) {
            JOptionPane
                    .showMessageDialog(null,
                            "Reply submitreted successfully. You will be redirect to main page.");
            SetUpJTableComment();

    public void SetUpJTableComment() {
    // Get jTable model
    DefaultTableModel tableModel1 = (DefaultTableModel) jTableComment
            .getModel();
    // Store column data into Array (3 columns)
    String[] data = new String[3];
    // Set Up Database Source
    db.setUp("IT Innovation Project");
    String sql = "Select reply_content,reply_by from forumReplies WHERE reply_topic = "
            + topicId + "";
    ResultSet resultSet = null;
    // Call readRequest to get the result
    resultSet = db.readRequest(sql);

    try {
        while (resultSet.next()) {
            data[0] = resultSet.getString("reply_content");
            data[1] = resultSet.getString("reply_by");
            // Add data to table model
            tableModel1.addRow(data);
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
    // add tablemodel to jtable

} 
```

问题是每当用户发布新回复时，现有帖子都会重新添加在一起。我尝试只将评论框中的较新回复添加到 jTable 中，而不是继续使用更新的回复重新添加现有帖子。我应该用什么？一个for循环？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:28:41.050

删除 DefaultTableModel 内容的正确方法是

```
model.setRowCount(0); 
```

与评论中提到的邪恶方式相比（这里不再重复;-)，它违反了两个规则

*   永远不要改变其脚下模型的底层数据结构
*   永远不要从模型外部的代码中调用任何模型的 fireXX

如果做后者似乎有帮助，这是一个警告信号：您要么违反了前者，要么您的模型实现不正确

# django - 当前如何不渲染 django 图像字段并清除内容？

> ID：14336925
> 
> 赞同：26
> 
> 时间：2013-01-15T11:39:57.903
> 
> 标签：django

我看了下面的 SO question，但没有运气。我不知道，也许我没看懂答案。

1)[如何在 Django 中删除 FileInput 小部件的“当前”标签和链接？](https://stackoverflow.com/questions/6076154/how-to-remove-the-currently-tag-and-link-of-a-fileinput-widget-in-django)

2) [Django ModelForm ImageField](https://stackoverflow.com/questions/10822111/django-modelform-imagefield)

**我的表格：**

```
class SettingsForm(forms.ModelForm):
    company_logo = forms.ImageField(label=_('Company Logo'),required=False, error_messages = {'invalid':_("Image files only")})
    class Meta:
        model = Settings
        fields = ("company_logo")
    .... 
```

**我的模型：**

```
class Settings(models.Model):
    strg=CustomFileSystemStorage(strict_name='images/company_logo.png',save_format='PNG')
    company_logo=models.ImageField(upload_to='images',blank=True,null=True,storage=strg)
    ..... 
```

**渲染后：**

![像场](../Images/0843764411aaf1bb7a42da3dfccd6656.png)

我从第一个链接中看到，`models.ImageField`继承`FileInput`并添加了额外的东西，但我不明白如何克服这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-15T13:03:52.840

解决方案是：

```
class SettingsForm(forms.ModelForm):
    company_logo = forms.ImageField(label=_('Company Logo'),required=False, error_messages = {'invalid':_("Image files only")}, widget=forms.FileInput)
    class Meta:
        model = Settings
        fields = ("company_logo")
    .... 
```

我添加了小部件`forms.FileInput`，以便告诉 ImageField 使用基本字段，而不是继承自`FileInput`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-18T23:54:33.927

@mtndesign，您可能还需要一个“删除”选项，您可以将其放置在模板中的任何位置。

```
class MyForm(forms.ModelForm):
    photo = forms.ImageField(required=False, widget=forms.FileInput)
    remove_photo = forms.BooleanField(required=False)

    ...

    def save(self, commit=True):
        instance = super(MyForm, self).save(commit=False)
        if self.cleaned_data.get('remove_photo'):
            try:
                os.unlink(instance.photo.path)
            except OSError:
                pass
            instance.photo = None
        if commit:
            instance.save()
        return instance 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-15T13:03:28.033

您可以通过在初始化时指定它来更改用于呈现表单字段的小部件：

```
class SettingsForm(forms.ModelForm):
    company_logo = forms.ImageField(label=_('Company Logo'),required=False, \
                                    error_messages ={'invalid':_("Image files only")},\
                                    widget=FileInput) 
```

请参阅小部件[的文档](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#fileinput)。

# audio - 是否可以在 Flash 中应用声音过滤器？

> ID：14336928
> 
> 赞同：0
> 
> 时间：2013-01-15T11:40:04.893
> 
> 标签：audio, actionscript, filter, actionscript-2, flash-cs6

所以基本上我有一个用 Flash CS5 制作的音板，是否可以仅使用 Flash 来交替库的音频文件的声音？就像让剪辑听起来更深或更快，这就是重点。但如果不是小便

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:10:29.593

你不能在 AS2 中做到这一点。但是是的，您可以在 AS3 中更改声音的音高和播放速度。事实上，你可以做的不止这些（搜索 Audiotool），但这展示了它是如何完成的：http: [//plasticsturgeon.com/2012/05/changeing-the-pitch-of-a-looped-sound-at-runtime -with-actionscript/](http://plasticsturgeon.com/2012/05/changing-the-pitch-of-a-looped-sound-at-runtime-with-actionscript/)

如果我的博客出现故障或其他情况，这里是改变声音音高的相关类：

```
 package sound
{
    import flash.events.Event;
    import flash.events.SampleDataEvent;
    import flash.media.Sound;
    import flash.media.SoundChannel;
    import flash.media.SoundTransform;
    import flash.net.URLRequest;
    import flash.utils.ByteArray;

/**
 * @author Andre Michelle (andr...@gmail.com)
     * Modified by Zach Foley aka The Plastic Sturgeon
 */
public class MP3Pitch
{
    private const BLOCK_SIZE: int = 3072;

    private var _mp3: Sound;
    private var _sound: Sound;

    private var _target: ByteArray;

    private var _position: Number;
    private var _rate: Number;
    private var repeat:SoundChannel;
    private var _volume:Number = 1;
    private var byteArray:ByteArray;

            // Pass in your looped Sound
    public function MP3Pitch( pitchedSound: Sound)
    {
        _target = new ByteArray();
        _mp3 =  pitchedSound;

        _position = 0.0;
        _rate = 0.0;

        _sound = new Sound();
        _sound.addEventListener( SampleDataEvent.SAMPLE_DATA, sampleData );
        repeat = _sound.play();
    }

    public function get rate(): Number
    {
        return _rate;
    }

            // Also added a handy volume setter
    public function set volume( value: Number ): void
    {
        _volume = value;
        repeat.soundTransform = new SoundTransform(_volume);
    }

            // use this to set the pitch of your sound
    public function set rate( value: Number ): void
    {
        if( value < 0.0 )
            value = 0;

        _rate =  value;
    }

    private function sampleData( event: SampleDataEvent ): void
    {
        //-- REUSE INSTEAD OF RECREATION
        _target.position = 0;

        //-- SHORTCUT
        var data: ByteArray = event.data;

        var scaledBlockSize: Number = BLOCK_SIZE * _rate;
        var positionInt: int = _position;
        var alpha: Number = _position - positionInt;

        var positionTargetNum: Number = alpha;
        var positionTargetInt: int = -1;

        //-- COMPUTE NUMBER OF SAMPLES NEED TO PROCESS BLOCK (+2 FOR INTERPOLATION)
        var need: int = Math.ceil( scaledBlockSize ) + 2;

        //-- EXTRACT SAMPLES
        var read: int = _mp3.extract( _target, need, positionInt );

        var n: int = read == need ? BLOCK_SIZE : read / _rate;

        var l0: Number;
        var r0: Number;
        var l1: Number;
        var r1: Number;

        for( var i: int = 0 ; i < n ; ++i )
        {
            //-- AVOID READING EQUAL SAMPLES, IF RATE < 1.0
            if( int( positionTargetNum ) != positionTargetInt )
            {
                positionTargetInt = positionTargetNum;

                //-- SET TARGET READ POSITION
                _target.position = positionTargetInt << 3;                      //-- READ TWO STEREO SAMPLES FOR LINEAR INTERPOLATION                   l0 = _target.readFloat();                   r0 = _target.readFloat();                   l1 = _target.readFloat();                   r1 = _target.readFloat();               }                               //-- WRITE INTERPOLATED AMPLITUDES INTO STREAM              data.writeFloat( l0 + alpha * ( l1 - l0 ) );                data.writeFloat( r0 + alpha * ( r1 - r0 ) );                                //-- INCREASE TARGET POSITION               positionTargetNum += _rate;                                 //-- INCREASE FRACTION AND CLAMP BETWEEN 0 AND 1                alpha += _rate;                 while( alpha &gt;= 1.0 ) --alpha;
        }

        //-- FILL REST OF STREAM WITH ZEROs
        if( i < BLOCK_SIZE )
        {
            while( i < BLOCK_SIZE )                 {                   data.writeFloat( 0.0 );                     data.writeFloat( 0.0 );                                         ++i;                }           }           //-- INCREASE SOUND POSITION            _position += scaledBlockSize;                        // My little addition here:            if (_position &gt; _mp3.length * 44.1) {
            _position = 0;
            _target.position = 0;
        }
    }
}
} 
```

# java - 如何确定是否以编程方式在android中检查了使用网络提供的值？

> ID：14336930
> 
> 赞同：1
> 
> 时间：2013-01-15T11:40:17.523
> 
> 标签：java, android, datetime

我已经搜索了与此相关的所有可能的内容，但没有找到任何具体的内容。如何确定是否选中了日期/时间设置中的“使用网络提供的值”选项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T12:14:45.173

```
android.provider.Settings.System.getInt(getContentResolver(),
    android.provider.Settings.System.AUTO_TIME) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-11T08:48:32.693

```
android.provider.Settings.System.AUTO_TIME 
```

已弃用

正在为此搜索答案的人使用此

```
android.provider.Settings.System.getInt(getContentResolver(),
                    android.provider.Settings.Global.AUTO_TIME); 
```

顺便说一句，Matthias Robbers，再次感谢 :)

# java - 将新数据加载到现有 JTable 后 getSelectedRow() 返回 -1

> ID：14336931
> 
> 赞同：-1
> 
> 时间：2013-01-15T11:40:24.013
> 
> 标签：java, mysql, swing, jtable, listselectionlistener

我正在写一个简单的`MySQL`编辑器。我的问题是，在我从组合框中选择数据库中的一个新表并加载它，然后选择一行并尝试删除它后，`getSelectedRow()`返回 -1 并生成一个异常，但是当我从中删除一行时不会发生这种情况在我的程序开始时加载的表。

这是来自 2 个文件的关键代码部分（在同一代码引用中）：

```
package omnisql;

import java.sql.*;
import java.util.*;

public class getData 
{
static Connect c = new Connect();

static GUI g = new GUI();

static ResultSet result;

public static Vector<Vector<String>> data = new Vector<Vector<String>>();

public static String table="pracownicy";

public static Vector <String> d;

public static List <String> id;

    void getData() throws SQLException
    {       
        result=c.stmt.executeQuery("select * from "+table);

        id = new ArrayList<String>();

            while(result.next())
            {
            d=new Vector<String>();

            id.add(result.getString("id"));

            d.add(result.getString("id"));
            d.add(result.getString("Nazwisko"));
            d.add(result.getString("Imię"));
            d.add(result.getString("Płeć"));
            d.add(result.getString("Ulica"));
            d.add(result.getString("Miejscowość"));
            d.add(result.getString("Kod_pocztowy"));
            d.add(result.getString("Województwo"));
            d.add(result.getString("Telefon"));

            data.add(d);
            }
    } 
    }

package omnisql;
    import java.awt.*;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.awt.event.*;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import javax.swing.*;
    import javax.swing.table.*;
    import java.util.*;
    import javax.swing.event.*;

    public class GUI extends JFrame implements ActionListener, TableModelListener
    {
    static Connect c = new Connect();

    static getData gd = new getData();

JPanel panel = new JPanel(new FlowLayout(FlowLayout.LEFT,10,5));
JPanel panel1 = new JPanel(new FlowLayout(FlowLayout.LEFT,10,5));
JPanel panel2 = new JPanel(new FlowLayout(FlowLayout.CENTER,10,5));
JPanel panel3 = new JPanel(new FlowLayout(FlowLayout.LEFT,10,5));

JLabel typbazy = new JLabel("Typ bazy: ");
JLabel wybtab = new JLabel("Wybierz tabelę: ");

JRadioButton postgre = new JRadioButton("PostgreSQL");
JRadioButton mysql = new JRadioButton("MySQL");
JRadioButton sqlite = new JRadioButton("SQLite");

ButtonGroup grupa = new ButtonGroup();

public static JComboBox tabela = new JComboBox();

JButton addrec = new JButton("Dodaj rekord");
JButton delrec = new JButton("Usuń rekord");
JButton reftab = new JButton("Odśwież tabelę");

JTable table;

public static DefaultTableModel model;

TableColumn column;

Vector<String> headers = new Vector<String>();

JScrollPane scroll;

static int rownumber,addrow,delrow,updaterow;       

PreparedStatement pst;

String value="";

public static int height,i,firstrow=0, klick=1;

public GUI()
{  

   panel.add(typbazy);

   grupa.add(postgre);
   panel.add(postgre);
   postgre.addActionListener(this);

   grupa.add(mysql);
   panel.add(mysql);
   mysql.setSelected(rootPaneCheckingEnabled);
   mysql.addActionListener(this);

   grupa.add(sqlite);
   panel.add(sqlite);
   sqlite.addActionListener(this);

   panel1.add(wybtab);
   panel1.add(tabela);

   tabela.setPreferredSize(new Dimension(120,20));
   tabela.setBackground(Color.white);
   tabela.removeAllItems();
   tabela.addItem(" ");
   tabela.addItem("Pracownicy");
   tabela.addItem("Pracownicy 2");
   tabela.setSelectedIndex(0);
   tabela.addActionListener(this);

   headers.add("ID");
   headers.add("Nazwisko");
   headers.add("Imię");
   headers.add("Płeć");
   headers.add("Ulica");
   headers.add("Miejscowość");
   headers.add("Kod_pocztowy");
   headers.add("Województwo");
   headers.add("Telefon");

   model = new DefaultTableModel(gd.data, headers);
   table = new JTable(model);
   table.setRowSelectionAllowed(true);  
   table.getModel().addTableModelListener(this); 
   table.setPreferredScrollableViewportSize(new Dimension(740,159));

   column = table.getColumnModel().getColumn(0);
   column.setPreferredWidth(20);

   column = table.getColumnModel().getColumn(1);
   column.setPreferredWidth(100);

   column = table.getColumnModel().getColumn(2);
   column.setPreferredWidth(70);

   column = table.getColumnModel().getColumn(3);
   column.setPreferredWidth(70);

   column = table.getColumnModel().getColumn(4);
   column.setPreferredWidth(100);

   column = table.getColumnModel().getColumn(5);
   column.setPreferredWidth(100);

   column = table.getColumnModel().getColumn(6);
   column.setPreferredWidth(100);

   column = table.getColumnModel().getColumn(7);
   column.setPreferredWidth(100);

   column = table.getColumnModel().getColumn(8);
   column.setPreferredWidth(80);

   scroll = new JScrollPane(table);
   panel2.add(scroll);

   panel3.add(addrec);
   addrec.addActionListener(this);
   panel3.add(delrec);
   delrec.addActionListener(this);
   panel3.add(reftab);
   reftab.addActionListener(this);

   getContentPane().setLayout(new BoxLayout(getContentPane(), BoxLayout.Y_AXIS));
   getContentPane().add(panel);
   getContentPane().add(panel1);
   getContentPane().add(panel2);
   getContentPane().add(panel3);  

}     

void initGUI()        
{
    setSize(800,340);        
    setTitle("OmniSQL 1.0");
    setResizable(false);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

public void tableChanged(TableModelEvent e) 
{
       rownumber = table.getSelectedRow();

       if (rownumber==-1) rownumber=0;

       updaterow = Integer.parseInt(gd.id.get(rownumber));

       switch (e.getType())
       {

       case TableModelEvent.UPDATE:
       table.getRowCount(); 
       value=table.getValueAt(table.getSelectedRow(),table.getSelectedColumn()).toString();

       try
       {   
       pst = c.con.prepareStatement("UPDATE "+gd.table+" SET "+table.getColumnName(table.getSelectedColumn())+" = '"+value+"' where id = "+updaterow+";");
       pst.executeUpdate();
       }
       catch (SQLException err)
       {
       }
       break;   
       }
}

 public void actionPerformed(ActionEvent e)
 {

    /*if (e.getActionCommand().equals("MySQL"))
    {
        try
        { 
        c.con.close();    
        c.connect("jdbc:mysql://localhost:3306/omnisql","root","sqlek","com.mysql.jdbc.Driver");
        }
        catch (ClassNotFoundException er) 
        {
        }
        catch(SQLException err)
        {
        }
    }*/

      if (tabela.getSelectedItem()=="Pracownicy")
     { 
        gd.table="pracownicy";

        try 
        {
        model.setRowCount(0);
        table.removeAll();   
        gd.getData();
        }

        catch (SQLException er) 
        {
        }
    }

     if (tabela.getSelectedItem()=="Pracownicy 2")
     { 

       gd.table="pracownicy2";
       try 
        {

        model.setRowCount(0);

        gd.getData();
        table.revalidate();

        }

        catch (SQLException er) 
        {

        }
    }

      /*if(postgre.isSelected())
      {
      tabela.removeAllItems();
      tabela.addItem("Adresy");
      tabela.addItem("Adresy 2");
      tabela.setSelectedIndex(0);
      }
      */
      /*if(mysql.isSelected())
      {
      tabela.removeAllItems();
      tabela.addItem(" ");
      tabela.addItem("Pracownicy");
      tabela.addItem("Pracownicy 2");
      }*/
     /*
      if(sqlite.isSelected())
      {
      tabela.removeAllItems();
      tabela.addItem("Zakłady");
      tabela.addItem("Zakłady 2");
      tabela.setSelectedIndex(0);
      }*/

    if (e.getActionCommand().equals("Dodaj rekord")) 
    {
        model.setRowCount(gd.id.size());
        rownumber = model.getRowCount()-1;

        if(rownumber==-1 && gd.id.size()==0)
        {
        rownumber=0;
        gd.id.add(0, "1");
        addrow=Integer.parseInt(gd.id.get(rownumber));
        }
        else
        {
        addrow=Integer.parseInt(gd.id.get(rownumber));
        addrow++;
        }

        try
        {     
        pst = c.con.prepareStatement("INSERT INTO "+gd.table+" (id) VALUES("+addrow+")");
        pst.executeUpdate();  
        model.setRowCount(0);
        gd.getData();
        height = (int)table.getPreferredSize().getHeight();
        table.scrollRectToVisible(new Rectangle(0,height,10,10));
        }

         catch (SQLException exc)
         {

         }    
    }

      rownumber=table.getSelectedRow();

    if (e.getActionCommand().equals("Usuń rekord")) 
    {
        try
        {

        model.setRowCount(gd.id.size());

        System.out.println(rownumber);

        delrow = Integer.parseInt(gd.id.get(rownumber));

        pst = c.con.prepareStatement("DELETE from "+gd.table+" where id="+delrow);
        pst.executeUpdate();
        model.setRowCount(0);
        gd.getData();
        }

        catch (SQLException exc)
        {

        }

    }

    if (e.getActionCommand().equals("Odśwież tabelę")) 
    {
    try
    {    
    model.setRowCount(0);
    gd.getData();
    }
    catch (SQLException exc)
         {

         }    
    }
}
} 
```

对于这个问题的任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:42:43.937

如果`getSelectedRow()`返回 -1，则表示未选择任何内容。

# android - Android动态添加带有子视图的片段

> ID：14336946
> 
> 赞同：1
> 
> 时间：2013-01-15T11:40:56.577
> 
> 标签：android, android-fragments

我希望在添加片段之前以编程方式使用子视图动态创建片段列表。我有一个 JSON 文件，它为每个片段设置一个视图列表，所以当我的应用程序启动时，有一个名为启动屏幕的活动，它只在处理数据时显示图像。下面我尝试生成 3 个片段并设置它们的子视图的快速示例（这是在启动屏幕活动中）

```
for(int i = 0; i < 3; i++)
        {
            DefaultFragment frag = new DefaultFragment();
            RelativeLayout layout = (RelativeLayout) createUI(frag);
            frag.setFragLayout(layout);
        }

private RelativeLayout createUI(final DefaultFragment frag_p) 
    {

        RelativeLayout layout = new RelativeLayout(this);
        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);

        Button but = new Button(this);
        but.setWidth(100);
        but.setHeight(100);
        but.setText("Next");

        but.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0)
            {
                frag_p.testNextFragment();
            }
        });
        layoutParams.setMargins(100, 100, 0, 0);
        layout.addView((View) but, layoutParams);

        return layout;
    } 
```

然后在片段中有一个名为fraglayout的RelativeLayout

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    {
//took out layout inflator temp, to try using the relativeLayout which was set from the splash screen
//      View V = inflater.inflate(R.layout.fraglayout, container, false);

        return fragLayout;
    } 
```

这允许我将子视图添加到片段中，好吧，这个测试只涉及一个按钮，当按下该按钮时，它会将您带到下一个工作正常的片段，但是当我尝试转到上一个片段时，我收到错误“指定的孩子已经有了父母”。

我知道这是因为这个

```
Button but = new Button(this); 
```

它正在获取启动画面的上下文而不是片段，但是如何在片段创建之前从片段中获取上下文？

任何人都可以向我建议一种更好的方法，在显示之前将子视图添加到片段中。

任何帮助将非常感激

> 01-15 12:25:01.598: E/AndroidRuntime(3443): 致命异常: main 01-15 12:25:01.598: E/AndroidRuntime(3443): java.lang.IllegalStateException: 指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。01-15 12:25:01.598: E/AndroidRuntime(3443): 在 android.view.ViewGroup.addViewInner(ViewGroup.java:1976) 01-15 12:25:01.598: E/AndroidRuntime(3443): 在 android. view.ViewGroup.addView(ViewGroup.java:1871) 01-15 12:25:01.598: E/AndroidRuntime(3443): 在 android.view.ViewGroup.addView(ViewGroup.java:1828) 01-15 12:25: 01.598: E/AndroidRuntime(3443): 在 android.view.ViewGroup.addView(ViewGroup.java:1808) 01-15 12:25:01.598: E/AndroidRuntime(3443): 在 com.single.DefaultFragment.onCreateView(DefaultFragment .java:61) 01-15 12:25:01.598: E/AndroidRuntime(3443):

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:32:31.127

Figured out solution, in my fragment I have an arraylist which holds a list of objects, whenever I click the button to go to next fragment, or back button to go back, I call remove all views on my relative layout, and now it works fine.

# mifare - 使用密钥 B 搜索 mifare tag 1K

> ID：14336947
> 
> 赞同：0
> 
> 时间：2013-01-15T11:41:00.897
> 
> 标签：mifare

我可以用键 A 读写，并为扇区预告片设置此代码：

```
44 11 00 03 22 11 FF 07 80 69 44 11 00 03 22 11 
```

我可以用钥匙 A 阅读，但不能用钥匙 B 阅读并显示此消息：

```
468: Authentication KEY (OK--0x00)
469: Read Card (ERROR -->Auth error --0x05) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:19:43.437

FF 07 80 是默认的访问条件。密钥 A 被设置为具有完全访问权限的主密钥，而密钥 B 被禁用。

在这里你有更多的访问条件： [http ://www.gorferay.com/sector-trailer-and-access-conditions/](http://www.gorferay.com/sector-trailer-and-access-conditions/)

如果您希望键 A 用于只读，而键 B 用于读写，请设置 78 77 88 FF。
例如：AA AA AA AA AA AA 78 77 88 FF BB BB BB BB BB BB

希望这对您有所帮助。

# jquery - 在轮播中的三个 div 之间淡入淡出，可选择不工作

> ID：14336949
> 
> 赞同：0
> 
> 时间：2013-01-15T11:41:04.497
> 
> 标签：jquery, carousel

你一直是一个很大的帮助，所以我毫不怀疑你将能够毫无问题地解决这个问题！

基本上我所拥有的是一个在三个 div 之间切换的轮播，#Item1、#Item2、#Item3。我还有三个按钮（btn1、btn2、btn3）。目的是轮播像往常一样滚动，但是当您单击按钮时，它会跳回该位置并从那里继续。

当前，单击按钮时轮播会跳回正确的 div，但随后会转到应在的位置。我确定我错过了一些简单的东西！

另外，当鼠标放在它上面时，是否有办法暂停它？

我整理了以下 jQuery，你能告诉我哪里出错了吗？

```
$(function() {

  $('#Item1').fadeIn(1000);

  var timer = setInterval( whichDiv, 6000);

  var counter = 2;

  function whichDiv() {
    if (counter == 0) { counter++; return; }
    else if (counter == 1){
        $('#Item1').addClass('Maxyactive');
        $('#Item2').removeClass('Maxyactive');
        $('#Item3').removeClass('Maxyactive');      
        $('#Item1').fadeIn(1000);
        $('#Item2').hide();
        $('#Item3').hide();
        counter++;
    }
    else if (counter == 2){
        $('#Item1').removeClass('Maxyactive');
        $('#Item2').addClass('Maxyactive');
        $('#Item3').removeClass('Maxyactive');      
        $('#Item1').hide();
        $('#Item2').fadeIn(1000);
        $('#Item3').hide();   
        counter++;
    }
    else if (counter == 3){
        $('#Item1').removeClass('Maxyactive');
        $('#Item2').removeClass('Maxyactive');
        $('#Item3').addClass('Maxyactive');      
        $('#Item1').hide();
        $('#Item2').hide();
        $('#Item3').fadeIn(1000);      
        counter = 1;
    }

  }

$(".btn1").click(function ShowFirst() {

    $('#Item1').addClass('Maxyactive');
    $('#Item2').removeClass('Maxyactive');
    $('#Item3').removeClass('Maxyactive');      
    $('#Item1').fadeIn(1000);
    $('#Item2').hide();
    $('#Item3').hide();
    counter == 2;
}); 

$(".btn2").click(function ShowSecond() {

    $('#Item1').removeClass('Maxyactive');
    $('#Item2').addClass('Maxyactive');
    $('#Item3').removeClass('Maxyactive');      
    $('#Item1').hide();
    $('#Item2').fadeIn(1000);
    $('#Item3').hide();   
    counter == 3;

}); 

$(".btn3").click(function ShowThird() {

    $('#Item1').removeClass('Maxyactive');
    $('#Item2').removeClass('Maxyactive');
    $('#Item3').addClass('Maxyactive');      
    $('#Item1').hide();
    $('#Item2').hide();
    $('#Item3').fadeIn(1000);   
    counter == 1;

}); 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:36:52.123

在您的按钮单击事件中，您尝试使用 == 为计数器分配一个值，但这只是进行比较，也许您需要 'counter = 1;' ETC？

要暂停，您可以尝试将滑块上的鼠标进入/离开事件绑定到 clearInterval(timer); 并重新创建它。

# c# - 访问 https 页面

> ID：14336952
> 
> 赞同：1
> 
> 时间：2013-01-15T11:41:42.940
> 
> 标签：c#, asp.net, .net, https

我目前正在向我的网站 (.net) 添加一个 aspx 页面，我的客户可以在其中插入信用卡详细信息。我想只允许从几个页面访问该页面（我们称它们为 a.aspx 和 b.aspx），如果有人试图从 c.aspx 访问该页面，他将无法这样做。有没有办法将重定向限制为仅几页的页面？

我试图用“发送者”对象检查页面事件的调用来源是什么，但是我不确定它是正确的方法。

希望问题足够清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:45:16.193

是的 - 看看[HttpWebRequest.Referer](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.referer.aspx)属性。

使用它，您可以查看对 c.aspx 的请求是从哪个页面发出的 - 如果它不是 a.aspx 或 b.aspx，您可以将用户重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:45:56.317

要做到这一点，您需要知道的是[referer](http://en.wikipedia.org/wiki/HTTP_referer)。简而言之，引用者是将您带到您当前所在页面的页面。

我相信这应该得到 ASP.net 的推荐人

```
Request.Server["HTTP_REFERER"] 
```

然后您可以检查并查看引荐来源是否与您想要的来源相匹配。但是，我不确定引用者欺骗的难易程度/普遍性，或者它是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:59:52.343

如前所述，您需要检查当前的 UrlReferrer，这是 vb.net 中的示例

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    Dim bRedirect As Boolean = True
    Try
        If Not IsNothing(Page.Request.UrlReferrer) Then
            Dim sReferer As String = Page.Request.UrlReferrer.ToString()
            If sReferer.Contains("/a.aspx") Or sReferer.Contains("/b.aspx") Then
                bRedirect = False
            End If
    Catch ex As Exception
        ' Raise exception, decide whether or not to redirect
    End Try
    If bRedirect Then
        Response.Redirect("~/x.aspx", True)
    End If
End Sub 
```

# c# - 带有周视图的 Mono Android 日历控件

> ID：14336960
> 
> 赞同：0
> 
> 时间：2013-01-15T11:42:29.597
> 
> 标签：c#, xamarin.android

我需要一个具有可用于 Mono-Android 项目的周视图功能的日历控件。

它也应该能够支持 MMVMCross 绑定。如果它可以与所有其他 2 平台 Windows Phone 和 iPhone 一起使用，那么它会很不错。

我已经尝试过 Resco 移动工具包（[http://www.resco.net/mobileformstoolkit/](http://www.resco.net/mobileformstoolkit/)）。但我未能满足我的需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:31:33.590

我怀疑是否存在这样的事情，因此您必须自己制作或修改某些组件以执行您想要的操作。

# php - 从文件中读取目录，循环它并检查是否存在 PHP 不起作用

> ID：14336962
> 
> 赞同：0
> 
> 时间：2013-01-15T11:42:39.273
> 
> 标签：php

我正在尝试检查文件中是否存在目录列表，如下所示：

```
<?php
    $file = "L:/tmp/file1.txt";
    $f = fopen($file, "r");
    while ($line = fgets($f,500)) {
        $line = str_replace("\\","/",$line);
        $found=is_dir($strTest);
        if($found) {
          echo "<br>the dir $strTest was found";
        } else {
          echo "<br>the dir $strTest was not found";
       }            
    }
?> 
```

我读的文件是这样的：

```
L:\tmp\Folder1
L:\tmp\Folder2
L:\tmp\Folder3
L:\tmp\Folder4 
```

结果是 All Folders Not found 除了最后一个....但我确信所有列表都存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:13:09.583

问题是在第一个文件夹名称中

```
L:\tmp\Folder1
L:\tmp\Folder2
L:\tmp\Folder3 
```

当你使用`fgets`它时也需要`\n`。因此，在这些名称中，您有下一行符号。在最后一个`L:\tmp\Folder4`中没有`\n`，所以这就是为什么唯一找到的是最后一个。

```
<?php
$file = "file.txt";
$f = fopen($file, "r");
while ($line = fgets($f, 500)) {    
    $line = str_replace("\\", "/", $line);
    $line = preg_replace("/
/", "", $line);
    if (is_dir($line)) {
        echo "<br />the dir $line was found";
    } else {
        echo "<br />the dir $line was not found";
    } 
```

} ?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:47:59.720

尝试使用此代码（替换您的参数）

```
$handle = opendir('/path/to/directory')

if ($handle) {
    while (false !== ($file = readdir($handle))) {
        print "$file<br />\n";
    }
    closedir($handle);
} 
```

# javascript - 如何在 ruby on rails 和 Javascript 中向现有 JSON 对象添加另一个值？

> ID：14336963
> 
> 赞同：0
> 
> 时间：2013-01-15T11:42:40.097
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ruby-on-rails-3

在`model`我喜欢的，

```
 def question_hash_string
    @question_hash_string || '{}'
  end

  def question_hash
    ActiveSupport::JSON.decode question_hash_string
  end 
```

在`Javascript`,

```
var question_hash_element = document.getElementById('enr_rds_batch_update_question_hash_string');
var question_hash = JSON.parse(question_hash_element.value);

question_hash[batch_question_id] = (batch_answer_id || batch_rdsap_answer || batch_answer_checkbox);
question_hash_element.value = JSON.stringify(question_hash); 
```

它会给出像`"{"16":"3","28":false}"`

我想用下面的答案添加另一个值，

```
question_hash[batch_question_id] = ((batch_answer_id || batch_rdsap_answer || batch_answer_checkbox) && (build_id)); 
```

`"{"16":"3","28":false:"2", "3":"55":"54"}"`等等。我需要使用“：”添加现有记录的另一列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:34:18.507

向 javascript 对象添加键/值对：

```
var question_hash = { question_id:2, answer_id:3 };
question_hash.build_id = 6; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:34:58.457

您可以在 JabvaScript 代码中添加新元素。

```
function doSomething(value) {
   var jsonValues = getParameters();

   jsonValues.value3 = value; //Here you add a new value in your json
}

//Example of function to generate json
function getParameters() {

    return {
        value: 'a',
        value1: 'b',
        value2: 'c'
    };
} 
```

# xsd - 验证重复的可选元素 XML-Schema

> ID：14336964
> 
> 赞同：1
> 
> 时间：2013-01-15T11:42:40.990
> 
> 标签：xsd

我正在尝试创建一个验证以下 xml 的 xsd 架构：

```
<results>
<row>
    <PersonID key="true">1</PersonID> 
    <FirstName>John</FirstName> 
    <Surname>Smith</Surname> 
    <LogonName>jsmith</LogonName> 
</row>
<row>
    <PersonID key="true">2</PersonID> 
    <FirstName>Steve</FirstName> 
    <Surname>Jones</Surname> 
    <LogonName>sjones</LogonName> 
</row> 
```

结果节点和行节点是强制性的，但每行内的节点是可选的，可能还有我没有列出的其他节点。可以有 1 行或多行。

我创建了以下内容，但无法正确验证：

```
<xs:element name="results">
<xs:complexType>
  <xs:sequence>
    <xs:element name="row" maxOccurs="unbounded" minOccurs="0">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="PersonID" minOccurs="0">
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="xs:byte">
                  <xs:attribute type="xs:string" name="key" use="optional"/>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:choice minOccurs="0">
            <xs:element type="xs:string" name="FirstName" minOccurs="0"/>
            <xs:element type="xs:string" name="Surname" minOccurs="0"/>
            <xs:element type="xs:string" name="LogonName" minOccurs="0"/>
            <xs:element type="xs:string" name="GroupName" minOccurs="0"/>
          </xs:choice>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:02:44.383

如果`PersonID`, `FirstName`etc. 最多可以发生一次 - 并且按照特定的顺序 - 试试这个：

```
<xs:element name="results">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="row" maxOccurs="unbounded" minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="PersonID" minOccurs="0">
              <xs:complexType>
                <xs:simpleContent>
                  <xs:extension base="xs:byte">
                    <xs:attribute type="xs:string" name="key" use="optional"/>
                  </xs:extension>
                </xs:simpleContent>
              </xs:complexType>
            </xs:element>
            <xs:element type="xs:string" name="FirstName" minOccurs="0"/>
            <xs:element type="xs:string" name="Surname" minOccurs="0"/>
            <xs:element type="xs:string" name="LogonName" minOccurs="0"/>
            <xs:element type="xs:string" name="GroupName" minOccurs="0"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

（基本上只是删除`choice`元素）。If`PersonID`等`FirstName`最多只能发生一次，但您可以使用任何顺序`all`：

```
<xs:element name="results">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="row" maxOccurs="unbounded" minOccurs="0">
        <xs:complexType>
          <xs:all>
            <xs:element name="PersonID" minOccurs="0">
              <xs:complexType>
                <xs:simpleContent>
                  <xs:extension base="xs:byte">
                    <xs:attribute type="xs:string" name="key" use="optional"/>
                  </xs:extension>
                </xs:simpleContent>
              </xs:complexType>
            </xs:element>
            <xs:element type="xs:string" name="FirstName" minOccurs="0"/>
            <xs:element type="xs:string" name="Surname" minOccurs="0"/>
            <xs:element type="xs:string" name="LogonName" minOccurs="0"/>
            <xs:element type="xs:string" name="GroupName" minOccurs="0"/>
          </xs:all>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

如果您不知道元素中可能会出现，`row`您可以使用：

```
<xs:element name="results">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="row" maxOccurs="unbounded" minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:any minOccurs="0" maxOccurs="unbounded" processContents="skip"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

接受`row`.

# android - 从可搜索的多列列表视图中获取字符串

> ID：14336972
> 
> 赞同：0
> 
> 时间：2013-01-15T11:43:27.563
> 
> 标签：android, android-layout, android-intent

我是 android 新手，我在我的 android 中使用 edittext 搜索工作正常，搜索代码如下：

```
inputSearch.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start,
            int before, int count) {
        // TODO Auto-generated method stub
        // When user changed the Text
        arrayAdapter.getFilter().filter(s);
        arrayAdapter.notifyDataSetChanged();
    }
    ..........
}} 
```

我正在使用 simpleadapter 在具有两个列 col1,col2 的列表视图中显示数据：

```
arrayAdapter = new SimpleAdapter(LabelUser.this, mylistData,
                        R.layout.two_col_row, columnTags, columnIds);
list.setAdapter(arrayAdapter); 
```

点击列表：

```
list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View v,
            int position, long id) {
        // TODO Auto-generated method stub

        String selectedFromList = (list.getItemAtPosition(position).toString());

        System.out.println(selectedFromList);
        startActivity(new Intent("com.example.mysampleapp.DASHBOARDTAB"));

    }
}); 
```

并给出输出：

```
{col1=A K JOHN, col2=21.45} 
```

我的问题是如何从上面获取一个字符串，即 col1

例如 var = "AK JOHN"

列表视图创建：

```
final ListView list = (ListView) findViewById(R.id.listView1);
                ArrayList<HashMap<String, String>> mylistData = new ArrayList<HashMap<String, String>>();

                String[] columnTags = new String[] { "col1", "col2" };
                int[] columnIds = new int[] { R.id.column1, R.id.column2 };
                for (int i = 0; i < labelIdArray.length; i++) {
                    HashMap<String, String> map = new HashMap<String, String>();
                    map.put("col1", labelArray[i]);
                    map.put("col2", labelRateArray[i]);
                    mylistData.add(map);
                    list.setAdapter(arrayAdapter);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:05:52.283

如果你想获取第一列的值，我认为下面的代码可以工作，

```
 String selectedFromList = columnTags[position]; 
```

试一试，看看它是否有效。

# php - 使用 PHP(ghostscript) 将 PDF 转换为图像耗时太长

> ID：14336976
> 
> 赞同：0
> 
> 时间：2013-01-15T11:43:46.597
> 
> 标签：php, pdf, jpeg, ghostscript

我有一个 php 脚本可以将 pdf 文件转换为一系列 jpeg 图像。

脚本如何实现这一点：

```
- Download pdf to local server.
- Create folders to place jpeg images, one folder for large images and one for small images.
- Extract images from pdfs to correct folders.
- Go through each of the files in the large folder and scale images to 1000 width. 
```

这是我正在使用的代码的细分。

```
$outputfile = "filename";
$cmd = "wget -q \"$url\" -O books/$outputfile.pdf";
exec($cmd);

if(!is_dir("books/$outputfile")) mkdir("books/$outputfile");
if(!is_dir("books/large/")) mkdir("books/large/");
if(!is_dir("books/large/$outputfile")) mkdir("books/large/$outputfile");

set_time_limit(9000);

......................................................................
/* Skipped Code to figure out with & height of pdf: $width, $height */
......................................................................

/* Extract Images from PDF, once in a large size (first) and another at its original size */
exec("'gs' -o books/large/$outputfile/$outputfile-%06d.jpg -dDEVICEWIDTHPOINTS=$width -dDEVICEHEIGHTPOINTS=$height -dFIXEDMEDIA=true -dSAFER -dBATCH -dNOPAUSE -sDEVICE=jpeg -dPDFFitPage=true -dUseCropBox=true -r300 -dJPEGQ=100 -dTextAlphaBits=4 'books/$outputfile.pdf'",$output1);
exec("'gs' -o books/$outputfile/$outputfile-%06d.jpg -dDEVICEWIDTHPOINTS=$width -dDEVICEHEIGHTPOINTS=$height -dFIXEDMEDIA=true -dSAFER -dBATCH -dNOPAUSE -sDEVICE=jpeg -dPDFFitPage=true -dUseCropBox=true       -dJPEGQ=100 -dTextAlphaBits=4 'books/$outputfile.pdf'",$output2);

$directory = "/var/www/html/pdf/books/large/$outputfile/";
$d = dir($directory);
chdir($directory);

/* Scale image to be 1000px wide and auto height */
$largewidth = 1000;
$scale = 1000 / intVal($width);
$largeheight = intVal($height) * $scale;
while($entry = $d->read()) {
if($entry != "." && $entry != "..") {
    $size = getimagesize($entry);
    $fp = fopen($entry, "rb");
    if ($size && $fp) {
        $swidth = 1000;
        $scale = 1000 / intVal($size[0]);
        $sheight = intVal(intVal($size[1]) * $scale);

        $dimg = imagecreatetruecolor($swidth, $sheight);
        $simg = imagecreatefromjpeg($entry);

        imagecopyresampled($dimg,$simg,0,0,0,0,$swidth,$sheight,$size[0],$size[1]);
        imagejpeg($dimg,$entry,85);
    }
    else {
        echo "fail";
    }
}
}
$d->close(); 
```

问题在于将整个 pdf 转换为一系列图像需要将近一个小时。pdf 通常有 300 到 500 页长。

这段代码中有什么你们认为我可以更有效地做的吗？

花费最多的时间是在文件的末尾，我浏览了大文件夹中的每个图像并将其缩小到 1000 宽度。

此外，我在此服务器上安装任何新的 php 扩展的权限有限，所以我认为 imagemagick 也是不可能的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:35:30.553

由于您说大部分时间都花在缩放图像上，因此您可能希望让 Ghostscript 以所需的大小生成图像，而不是事后对其进行缩放。

此外，缩放 JPEG 图像很可能会导致出现伪像。如果必须缩放，则应避免使用 JPEG，直到最后一步。

请注意，我对 PHP 一无所知，因此无法对脚本发表评论。

# shopify - Shopify 应用 URL 转发错误

> ID：14336979
> 
> 赞同：0
> 
> 时间：2013-01-15T11:44:03.413
> 
> 标签：shopify

我们创建了在 Shopify 应用商店中发布的用户照片应用。

但它突然停止在我们所有的客户商店工作，我们没有做任何改变。

我们看到的问题与 Shopify 的 URL 转发有关。例如这个 URL

[http://www.jurawatches.co.uk/apps/userphotos/photo/index/jurawatches.myshopify.com/82247292](http://www.jurawatches.co.uk/apps/userphotos/photo/index/jurawatches.myshopify.com/82247292)

应该去这个网址：[http ://userphotos.78e.co.uk/photo/index/jurawatches.myshopify.com/82247292](http://userphotos.78e.co.uk/photo/index/jurawatches.myshopify.com/82247292)

但是我们收到了这个错误：我们遇到了一个技术问题，我们正在尽我们所能尽快解决它。

# android - Android Horizo ntalScrollView 不显示所有子视图

> ID：14336982
> 
> 赞同：0
> 
> 时间：2013-01-15T11:44:08.023
> 
> 标签：android, user-interface, layout, view, horizontalscrollview

我有一个包含水平列表视图的 android 活动。下面是它的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:id ="@+id/topMostLayout"
                android:layout_width="fill_parent"
    android:layout_height="fill_parent"
                android:background="@color/grey">
    <HorizontalScrollView
      android:id ="@+id/horScrollView"
       android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentTop="true"
      >
      <LinearLayout
android:id ="@+id/dateRibbon"
 android:orientation="horizontal"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
       android:layout_marginLeft="50dp"
       android:layout_marginRight="50dp"
                    android:gravity="center"
                    >
      </LinearLayout>
    </HorizontalScrollView>
  <TextView
    android:id="@+id/line"
    android:paddingTop="5dip"
    android:gravity="center_horizontal"
    android:layout_width="match_parent"
    android:layout_height="5dp" 
    android:background ="#37000000"
      android:layout_below="@id/horScrollView"
    />

  <LinearLayout
       android:id="@+id/bottom_control_bar"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true" >
  </LinearLayout>
  <ListView
      android:id="@android:id/list"
      android:layout_width="fill_parent"
      android:layout_height="0dip"
      android:layout_above="@id/bottom_control_bar"
      android:layout_below="@id/line" >
  </ListView>
  <TextView
      android:id="@android:id/empty"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_above="@id/bottom_control_bar"
      android:layout_below="@id/horScrollView"
      android:text="@string/tasks_empty" />

</RelativeLayout> 
```

问题是当我将视图添加到水平滚动视图内的线性布局时，它不会完全向右滚动，因此最右边的子视图对用户是不可见的。我正在向线性布局添加文本视图。下面是填充线性布局的代码：

```
 LinearLayout dateRibbon = FindViewById<LinearLayout>(Resource.Id.dateRibbon);

            dateRibbon.RemoveAllViews();

            TextView tView;

            m_dateRibbonTextViews = new List<TextView>();
            m_dateRibbonDates = new List<DateTime>();

            int currentJobId = Telecetera.Connect.JobLibrary.JobData.Job.GetCurrentJobID();
            int defaultCurrentJobID = Telecetera.Connect.JobLibrary.JobData.Job.SYSDIR_CURRENTJOB_DEFAULT;

            Telecetera.Connect.JobLibrary.JobData.JobDetailsList jobDetailsList;
            int i = -1;
            foreach (DateTime date in jobsByDay.Keys)
            {
                ++i;

                jobDetailsList = jobsByDay[date];

                tView = new TextView(this);
                tView.Gravity = GravityFlags.CenterHorizontal;
                tView.Text = GetDateDisplayString(date);
                tView.SetTextSize(Android.Util.ComplexUnitType.Sp, 18);
                tView.SetPadding(10, 0, 10, 0);

                if (currentJobId != defaultCurrentJobID && jobDetailsList.GetByJobID(currentJobId) != null)
                {
                    m_indicesDaysWithCurrentJob.Add(i);
                    tView.SetBackgroundColor(Android.Graphics.Color.Cyan);
                }
                else
                {
                    tView.SetBackgroundColor(Android.Graphics.Color.White);
                }

                tView.Click += new EventHandler(tView_Click);
                dateRibbon.AddView(tView);
                m_dateRibbonTextViews.Add(tView);
                m_dateRibbonDates.Add(date);

                tView = new TextView(this);
                tView.SetPadding(2, 0, 2, 0);
                tView.SetBackgroundColor(Resources.GetColor(Resource.Color.grey));
                dateRibbon.AddView(tView);

            } 
```

任何关于它为什么不完全向右滚动的提示将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:43:38.280

我能够通过删除

```
android:layout_marginLeft="50dp"
       android:layout_marginRight="50dp" 
```

线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:17:13.060

您可以将填充设置为线性布局，这是我的代码，它显示了中心的文本视图，并在视图的开始和结束时提供了一些空间。

```
lLayTwo.setPadding((center - 2 - centerScreenChildLeft), 0, (center - 2 - centerScreenChildRight), 0);

private void addSubMenu(ArrayList<String> list,String mainMenu){
    this.mainMenu = mainMenu;
    lLayTwo.removeAllViews();

    mViewFlipper.setDisplayedChild(mViewFlipper.indexOfChild(mViewPlain));

    menu = list;
    Log.d(TAG, "meulist "+menu.size());
    range = list.size() * 2 + 1;
    Log.d(TAG, "range "+range);
    int menuItem = 0;

    for ( int i = 0; i < range; i++ ) {
        if (  i % 2 == 0 ){

            View  txt = new View(MCSDistrictMainActivity.this);
            txt.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            txt.setBackgroundResource(R.drawable.line);
            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            params.setMargins(0, 3, 0, 0);
            lLayTwo.addView(txt,params);

        }else{

            TextView txt = new TextView(MCSDistrictMainActivity.this);
            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(parentChildWidh, LayoutParams.WRAP_CONTENT);
            params.setMargins(0, 8, 0, 5);
            params.gravity = Gravity.CENTER;
            txt.setText(menu.get(menuItem));
            txt.setTag(menu.get(menuItem));
            txt.setTextColor(getResources().getColor(R.color.violet));
            txt.setTextSize(15f);
            txt.setGravity(Gravity.CENTER_HORIZONTAL);
            menuItem += 1;
            lLayTwo.addView(txt,params);
        }

    }

    Log.d(TAG, "llayout Two "+lLayTwo.getChildCount()+" width "+parentChildWidh+" LEFT "+parentChildLeft);

    int left = parentChildLeft;
    int width = parentChildWidh;
    int centerTab = 1 + hsvLowerTab.getWidth() / 2;
    Log.d(TAG, "Measures left "+left+" width "+width+" center "+centerTab+" all "+( left + width -centerTab ));
    //(left + width/2)-centerTab
    hsvLowerTab.scrollTo((left + width/2)-centerTab, 0);
    hsvLowerTab.dispatchTouchEvent (MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), 
                                    MotionEvent.ACTION_UP,(left + width/2)-centerTab, 0, 0));

} 
```

# android - 从服务发送的广播接收器启动活动时应用程序崩溃

> ID：14336983
> 
> 赞同：2
> 
> 时间：2013-01-15T11:44:14.707
> 
> 标签：android, broadcastreceiver

首先，我已经尝试添加 flag_activity_new_task，仍然无法正常工作。

这是流程：我有一个正在运行的服务，它在后台线程上执行 http 请求并获取数据。每当收到某些数据时，我都需要将其显示给用户（例如，应用程序的更新可用）。为此，我使用广播，并设置了一个接收器。直到这里一切正常。

但是，当我从这个接收器开始一个活动时，应用程序崩溃说：

```
"01-15 17:03:30.129: E/AndroidRuntime(28014): Caused by: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
" 
```

即使我添加了这个标志。以下是代码：

服务部分：

```
try
{
    JSONObject mAdDetails = mResult.getJSONObject(Tags.TAG_RPC_SMALL_AD_DETAILS);

    Intent mI = new Intent();
    mI.setAction(ReceiverAdvertSmall.INTENT_ACTION);

    mI.putExtra(AppMapKeys.KEY_AD_HEADING, mAdDetails.getString(Tags.TAG_RPC_AD_HEADING));
    mI.putExtra(AppMapKeys.KEY_AD_DESCRIPTION, mAdDetails.getString(Tags.TAG_RPC_AD_DESCRIPTION));
    mI.putExtra(AppMapKeys.KEY_AD_LINK, mAdDetails.getString(Tags.TAG_RPC_AD_LINK));

    sendBroadcast(mI);

}
catch(JSONException e)
{

} 
```

接收器部分：

```
@Override
public void onReceive(Context mContext, Intent data) 
{
    Intent mI = new Intent(mContext, ActivityAdvertSmall.class);

    mI.putExtras(data.getExtras());
    mI.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    mContext.startActivity(data);
} 
```

我究竟做错了什么？我无法弄清楚最后一小时。！

提前谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:46:01.490

采用

```
 mContext.startActivity(mI); 
```

代替

```
 mContext.startActivity(data); 
```

用于启动 Activity，`onReceive`因为您正在向意图添加`FLAG_ACTIVITY_NEW_TASK`标志，`mI`但尝试使用`data`意图启动 Activity

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:45:33.390

您应该将创建的意图传递给`startActivity()`

```
 mContext.startActivity(mI); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:51:19.140

好的....这是我犯的最愚蠢的错误。我错误地使用`startActivity(data)`了`startActivity(mI)`. 结束问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:53:32.963

只需将您创建的意图传递给**startActivity()**

```
 mContext.startActivity(mI); 
```

# jquery - 查找元素兄弟的子元素的内容

> ID：14336984
> 
> 赞同：1
> 
> 时间：2013-01-15T11:44:24.590
> 
> 标签：jquery

我需要获取元素兄弟的子元素的内容：

即使用输入元素的 id 我只需要下面按钮元素的文本，即“所有包”

```
<input type="hidden" value="0" id="packages" name="packages">
<div class="btn-group">
<button data-label="All Packages" data-toggle="dropdown" class="btn dropdown-toggle disabled">All Packages <span class="caret"></span></button>
</div> 
```

我尝试了以下方法：

```
var packageBtnFilter = $('#packages').next('div.btn-group').find('.btn').text; 
```

但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:45:32.920

`text`是函数而不是属性：

```
var packageBtnFilter = $('#packages').next('div.btn-group').find('.btn').text;
//                                                                       ^^^^ 
```

应该：

```
var packageBtnFilter = $('#packages').next('div.btn-group').find('.btn').text();
//                                                                       ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:49:34.133

```
var packageBtnFilter = $('#packages').next('div.btn-group').find('.btn').text() 
```

# linux - 任务自动化 - 使用 Web 应用程序的电子邮件

> ID：14336985
> 
> 赞同：1
> 
> 时间：2013-01-15T11:44:25.167
> 
> 标签：linux, web, automation, cron

我有一个 Web 应用程序可以监控某些区域的农场。现在，我在执行某些任务的自动化时遇到了问题。

Web 应用程序的用户可以使用关键字发送报告或签到。如果报告或签到对应于某些关键字，例如“警报”，我需要 Web 应用程序使用该 Web 应用程序通过电子邮件向用户发送警报。但该警报必须在收到报告之日起两周后发送，并且只发送给该特定用户。

是否可以使用 cron 来执行此操作？如果没有，任何人都可以建议我一个解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:33:42.700

您可能考虑的一种可能的方法是，在您的用户在您的应用程序中执行确定需要发送该电子邮件的任何操作时，为您需要发送的每封提醒电子邮件在数据库中存储一个条目。包括收件人、要发送的日期和电子邮件内容，作为您为每个条目存储的内容。安排单个 cron 作业定期运行，以在截止日期之前处理这些数据库记录，并填充要发送的电子邮件模板。然后，您可以删除数据库记录，或者更好的选择，包括指示它们已发送的列并将它们标记为已发送。

这将有助于提供您正在操作的技术堆栈以及应用程序的开发环境。其他人可能会向您指出技术特定的方法或预先构建的插件/扩展，这些方法已经针对您所处的情况执行此操作，帮助您避免为解决方案编写自己的代码。

# c - C 位字段变量正在打印意外值

> ID：14336994
> 
> 赞同：5
> 
> 时间：2013-01-15T11:44:50.143
> 
> 标签：c, bit

```
struct m

{
   int parent:3;

   int child:3;

   int mother:2;
};

void main()
{

   struct m son={2,-6,5};

   printf("%d %d %d",son.parent,son.child,son.mother);
} 
```

任何人都可以帮助说明为什么程序的输出是`2 2 1`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-15T11:49:39.693

取出显示的字段的所有有效位：

```
parent: 3 bits (1-sign bit + 2 more), value 010, result 2
child:  3 bits (1-sign bit + 2 more), value 010, result 2
mother: 2 bits (1 sign bit + 1 more), value  01, result 1 
```

* * *

**细节**

需要指出的是，您的结构字段被声明为`int`位字段值。根据 C99-§6.7.2,2，以下类型都是等效的：`int`、`signed`或`signed int`. 因此，您的结构字段已*签名*。根据 C99-§6.2.6.2,2，您的一位应用于表示变量的“符号”（负或正）。此外，同一部分指出，除了符号位，其余位表示必须对应于关联的*无符号*剩余位数的类型。C99-§6.7.2,1 清楚地定义了这些位中的每一个如何表示 2 的幂。因此，通常用作符号位的唯一位是最高有效位（它是唯一剩下的位，但我很确定这是否是对标准的不准确解释，我会在适当的时候听到它）。您将负数指定为用于样本的测试值之一，这表明您*可能*知道这一点，但许多新接触位域的人却没有。因此，值得注意。

本答案的其余部分引用了 C99 标准的以下部分。第一个处理不同类型的促销，接下来是估值和潜在的价值变化（如果有的话）。最后一点对于理解如何`int`确定 bit-fields 类型很重要。

> **C99-§6.3.1.1：布尔值、字符和整数**
> 
> 2：如果 an`int`可以表示原始类型的所有值（受宽度限制，对于位域），则将该值转换为 an `int`；否则，将其转换为`unsigned int`. 这些被称为整数促销。整数提升不会改变所有其他类型。
> 
> **C99-§6.3.1.3 有符号和无符号整数**
> 
> 1.  当整数类型的值转换为_Bool以外的其他整数类型时，如果该值可以用新类型表示，则保持不变。
> 2.  否则，如果新类型是无符号的，则通过在新类型中可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。
> 3.  否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。
> 
> **C99-§6.7.2.1 结构和联合说明符**
> 
> 10：*位域*被解释为具有由指定位数组成的有符号或无符号整数类型。如果值 0 或 1 存储到 _Bool 类型的非零宽度位域中，则该位域的值应与存储的值进行比较；_Bool 位域具有 _Bool 的语义。

考虑测试值的常规`int`位表示。以下是 32 位`int`实现：

```
value : s  bits 
    2 : 0  0000000 00000000 00000000 00000010   <== note bottom three bits
   -6 : 1  1111111 11111111 11111111 11111010   <== note bottom three bits
    5 : 0  0000000 00000000 00000000 00000101   <== note bottom two bits 
```

遍历其中的每一个，应用上述标准参考中的要求。

**`int parent:3`**：第一个字段是 3 位有符号的`int`，并且被分配了十进制值`2`。右值类型 , 是否`int`包含左值类型 , `int:3`？是的，所以类型很好。*该值* 是否`2`适合左值类型的范围？好吧，`2`可以很容易地放入 中`int:3`，因此也不需要任何价值。第一个字段工作正常。

**`int child:3`**: 第二个字段也是一个 3 位有符号的`int`，这次被分配了十进制值`-6`。再一次，右值类型 ( `int`) 是否完全包含左值类型 ( `int:3`)？是的，所以类型也很好。但是，表示有符号值所需的*最小*位数为**4**位。( )，占最高位为符号位。因此，该值超出了 3 位带符号位域的允许存储范围。因此，结果是根据 §6.3.1.3-3*实现定义的。*`-6`**`1010``-6`**

 *****`int mother:2`**最后一个字段是 2 位有符号的`int`，这次被分配了十进制值 5。再一次，右值类型 ( `int`) 是否完全包含左值类型 ( `int:2`)？是的，所以类型也很好。然而，我们又一次面临着一个不适合目标类型的值。*表示有符号*正数所需的最小位数`5`为四：(0101)。我们只有两个可以合作。因此，结果再次按照 §6.3.1.3-3 由*实现定义。*

因此，如果我正确地理解了这一点，那么在这种情况下，实现会简单地删除除存储填充声明的位深度所需的所需位之外的所有位。那个hackery的结果就是你现在所拥有的。**2 2 1**

**笔记**

我完全有可能错误地颠倒了促销的顺序（我很容易迷失在标准中，因为我有阅读障碍并且会定期在脑海中翻转东西）。如果是这种情况，我会问任何对标准有更强烈解释的人，请向我指出这一点，我会相应地回答答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:50:06.980

`child`和的位字段大小`mother`太小，无法包含您分配给它们的常量值，并且它们正在溢出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T11:50:20.160

您可以注意，在编译阶段您将收到以下警告：

```
test.c: In function ‘main’:
test.c:18:11: warning: overflow in implicit constant conversion
test.c:18:11: warning: overflow in implicit constant conversion 
```

那是因为您已将变量定义为 int 的 3 位而不是整个 int。溢出意味着无法将您的值存储到 3 位内存中。

因此，如果您使用以下结构定义，您将避免编译中的警告，并且您将获得正确的值：

```
struct m

{
   int parent;

   int child;

   int mother;
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T12:00:37.920

`child`至少需要 4 位来保存`-6`( `1010`)。并且`mother`需要至少 4 位来保存`5`( `0101`)。

`printf`只考虑最后 3 位`child`so 它的打印`2`，它只考虑最后 2 位`mother`so 它的打印`1`。

您可能认为`child`只需要 3 位来存储`-6`，但实际上它需要 4 位，包括符号位。负值用于以 2 的补码模式存储。

```
Binary equivalent of 6 is 110
one`s complement of 6 is 001
two`s complement of 6 is 010
sign bit should be added at MSB. 
```

所以 的`-6`值为`1010`。`printf`省略符号位。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-15T11:48:00.250

您不能仅用 3 位表示 -6；同样，您不能仅用两位表示 5。

有没有理由为什么`parent`,`child`和`mother`需要是位域？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-15T11:50:03.283

您的位字段太小。另外：这只是一个练习，还是你试图（过早地）优化？你不会对结果很满意......它会很慢。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-15T11:48:11.767

首先：

`5`是`101`二进制的，所以它不适合 2 位。

`-6` 也不适合 3 位。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-15T11:57:13.290

经过思考，我终于找到了原因:-)

2 用二进制表示为 0010

-6 作为 1010

和五个作为 0101

现在 2 可以仅使用 3 位来表示，因此它被存储为 010

-6 将以 3 位存储为 010

五个将存储在 2 位中作为 01

所以最终的输出是 2 2 1

谢谢大家的回复！！！！***

# forms - 为什么我的 Symfony2 texarea 呈现为单行文本字段？

> ID：14336998
> 
> 赞同：0
> 
> 时间：2013-01-15T11:45:00.877
> 
> 标签：forms, symfony

我有一个 Symfony2.0 表单，并试图通过将字段类型设置为 textarea 添加一个 textarea[字段](http://symfony.com/doc/current/reference/forms/types/textarea.html)。

如果我选择其他任何东西 - 数字，百分比或其他 - 它会正确呈现。但是，我的文本区域呈现为单行文本框。

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:45:00.877

原来问题出在我的[表单主题](http://symfony.com/doc/current/cookbook/form/form_customization.html#form-theming)上。`form_layout.twig`这并不明显，因为我的文本区域中没有任何内容。

但是，我*在*那里指定`{% block text_row %}`。事实证明，textarea 字段显示正在回退到使用`text_row`，因为我还没有包含`{% block textarea_row %}`. 一旦我添加了丢失的块，一切都按预期工作。