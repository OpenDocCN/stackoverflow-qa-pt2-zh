# StackOverflow 问答 15488000-15488999

# user-defined-functions - 创建一个函数以在 Sybase 中实现完全外连接

> ID：15488000
> 
> 赞同：0
> 
> 时间：2013-03-18T22:16:58.037
> 
> 标签：user-defined-functions, sap-ase, outer-join

我有一个需要在 Sybase Adaptive Server Enterprise 中实现的长嵌套完全外部连接序列。是否可以为此编写一个函数？

我想简化下面的代码：

```
select t1.col_01, t1.col_02, TOT_Jan, TOT_Feb 
from  
  (select a.col_01, a.col_02, sum(b.col_XX) as TOT_Jan 
   FROM vw_aux a ...
    and year(b.tms_mydate) = 2012 
    and month(b.tms_mydate) = 1 
   ... ) t1 
left outer join 
  (select a.col_01, a.col_02, sum(b.col_XX) as TOT_Feb 
    ... and year(b.tms_mydate) = 2012 
    and month(b.tms_mydate) = 2 
   ... ) t2 on t1.col_aux = t2.col_aux 
UNION 
(select a.col_01, a.col_02, sum(b.col_XX) as TOT_Jan ...) t1 
right outer join (select a.col_01, a.col_02, sum(b.col_XX) as TOT_Feb ...) t2 
on ... 
```

像这样创建一个函数：

```
funcion myfullouterjoin (vw_aux, table_01, col_aux, col_01, col_02, tms_mydate, TOT_Jan, TOT_Feb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:55:08.797

函数没有输出参数，因此，您不能在那里实现查询。
但是，在我看来，存储过程或视图完全符合您的需求。

您可以查看 Sybase 文档：[函数](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc36272.1502/html/commands/CHDEDGJI.htm)、[存储过程](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc36272.1502/html/commands/X52197.htm)。

# c# - 实体框架数据库第一次重新生成让我失去了手动更改

> ID：15488005
> 
> 赞同：3
> 
> 时间：2013-03-18T22:17:18.280
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4, database-first

我正在使用 MVC .NET 创建一个网站。

由于我是一名老派程序员，首先学习设计数据库，因此我选择了数据库优先方法。我还使用“代码生成”来创建扩展名为`.tt`. 到目前为止，一切都在工作，除了一件让我烦恼的事情。

经典场景：

*   我意识到我错过了一个领域
*   我在数据库中添加字段。
*   我进入 edmx 并选择从数据库中更新模型。

然后我回到我的代码，并删除了我放在模型字段顶部的特殊 DisplayName 标签之类的东西。

例如，如果我有这个：

```
public partial class Blog
    {
        public Blog()
        {
            this.BlogComments = new HashSet<BlogComment>();
        }

        public int IDBlog { get; set; }
        public string Title { get; set; }

        [AllowHtml]
        public string Content { get; set; }
        public System.DateTime DateCreated { get; set; }
        public string Author { get; set; }

        public virtual ICollection<BlogComment> BlogComments { get; set; }
    } 
```

会变成

```
public partial class Blog
    {
        public Blog()
        {
            this.BlogComments = new HashSet<BlogComment>();
        }

        public int IDBlog { get; set; }
        public string Title { get; set; }
        public string Content { get; set; }
        public System.DateTime DateCreated { get; set; }
        public string Author { get; set; }

        public virtual ICollection<BlogComment> BlogComments { get; set; }
    } 
```

那是因为`[AllowHtml]`是在上一代模型之后添加的。有没有办法更新表格而不删除我在生成后添加的所有标签？我怎样才能做到这一点？

现在，我通过使用 SVN 进行一些还原来管理它，但它很快就会变得无法管理。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T22:27:40.203

不要编辑生成的文件。曾经。只是。不。做。它。

相反，请在不同目录中的部分文件中进行编辑。要添加属性，请在分部类定义的顶部声明一个元数据类。

```
[MetadataType(typeof(BlogMetadata))]
public partial class Blog
{
    // it's possible to add logic and non-mapped properties here
} 
```

现在在您的 Metadata 类中，您可以定义属性或其他逻辑：

```
public class BlahMetadata
{
    [AllowHtml] 
    public string Content{ get; set; } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:28:55.687

不，没有办法编辑生成的代码，并且在重新生成时不会被替换。这就是为什么代码到处都有警告说不要编辑它的原因。

但是，您可以使用部分类来添加其他功能。如果您不知道部分类是什么，请在此处阅读：

[http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.80).aspx)

如果要添加属性，则必须使用一种特殊的局部类，称为“伙伴类”。

[http://hartzer.wordpress.com/2010/01/26/mvc-buddy-class/](http://hartzer.wordpress.com/2010/01/26/mvc-buddy-class/)

# c++ - 在 CRS 稀疏矩阵中查找值？

> ID：15488006
> 
> 赞同：0
> 
> 时间：2013-03-18T22:17:19.160
> 
> 标签：c++, sparse-matrix

我是使用稀疏矩阵的新手，但现在需要在我的工作中使用一个来节省空间。我了解以下矩阵：

```
10   0    0    0   -2    0
3    9    0    0    0    3
0    7    8    7    0    0
3    0    8    7    5    0
0    8    0    9    9    13
0    4    0    0    2   -1 
```

可以用三个向量表示，如下所示：

```
[10 -2 3 9 3 7 8 7 3 8 7 5 8 9 9 13 3 2 -1] // nonzero_vals

[1 5 1 2 6 2 3 4 1 3 4 5 2 4 5 6 2 5 6] // col_indices

[1 3 6 9 13 17 20] // row_ptr (indices of values that start row) 
```

我现在的问题是在 O(1) 时间内确定正确的值查找方程。例如，如果我想返回存储在位置 (2,2) 的矩阵值，我如何返回 9？另外，如果查找坐标未在稀疏矩阵中表示，我如何返回 0，也是在 O(1) 时间内？

感谢您提供的任何帮助。我敢肯定，对此有完善的方程式，但我找不到它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:30:21.923

没有*O(1)*过程可以获取任意*(i,j)*坐标处的值（至少在没有预处理的情况下不是这样）。您可以做的最好的事情是平均*O(log N) （矩阵为**MxN*），通过列索引上的二进制搜索过程。^*

* * *

[* 好吧，实际上是*O(log k)*，其中*k*是行中非零的数量。但是，如果假设密度与矩阵大小无关（通常是这种情况），那么*O(log N)*是有效的。]

# linux - 如何知道 sockatpair 的 SOCK_DGRAM 对等套接字何时关闭？

> ID：15488011
> 
> 赞同：1
> 
> 时间：2013-03-18T22:17:34.973
> 
> 标签：linux, sockets

```
#include <sys/socket.h>
int main() {
    int s[2];
    socketpair(AF_UNIX, SOCK_STREAM, 0, s);

    close(s[1]);
    char buf;
    read(s[0], &buf, 1);
} 
```

完成，但使用 SOCK_DGRAM 它挂起。

如何确定何时不再有消息？为什么当对等 FD 关闭时“读取”不返回类似 ECONNRESET 的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:25:55.573

SOCK_DGRAM 和 SOCK_STREAM 之间的区别在于前者是无连接的，这意味着除其他外，没有与通信另一端通信的连接“状态”。因此，不存在该套接字被另一侧关闭的概念。监听服务器仍然有一个可以接收数据报的有效端点，即使在这种情况下它恰好是匿名的，因此没有其他人可以找到它来向它发送东西。

如果你想拥有连接状态信息，你想使用 SOCK_STREAM。

例如，参见[这个线程](http://web.archiveorange.com/archive/v/fwvdeLjGqNa59ulEvPEU)，它讨论了一个非常相似的问题。

# iphone - 应用未运行时检查 JSON 内容的变化

> ID：15488012
> 
> 赞同：0
> 
> 时间：2013-03-18T22:17:35.323
> 
> 标签：iphone, ios, json, notifications, push-notification

应用程序执行 JSON 请求，序列化结果并在每次应用程序启动时将其加载到 tableView 中。

我正在寻找一种解决方案，该解决方案还可以在应用程序未运行时检查 JSON 提要的更新，并通过应用程序图标上的红色通知徽章通知用户。

这仅适用于推送通知吗？这可能是一个问题，因为服务器上不可能有 SSL 证书，并且当内容更改（内容在 MySQL 数据库中）时，服务器将无法通过 JSON 发送特定通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:08:45.243

对，你真的不能那样做。我认为如果你不想实现推送（这不是太有，但肯定会花费你超过一个小时......），我认为最好的方法是创建 JSON 内容的 MD5 散列并散列新的 JSON 启用快速准确地确定某事是否发生了变化。

如果您不想推送，您可能会考虑的另一件事是电子邮件附件。它避免了推动，但它并不是特别优雅。这个想法是您将您的应用程序注册为处理您发送的附件类型，然后当收到电子邮件并且用户点击您的应用程序打开的电子邮件附件时。我使用了这个答案： [如何将文件类型与 iPhone 应用程序相关联？](https://stackoverflow.com/q/2774343/189804) 做到这一点，它运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:51:02.237

是的，这只能通过推送通知获得。

# angularjs - 阻止 angular.js 将 url 中的“+”重写为“%2B”

> ID：15488015
> 
> 赞同：1
> 
> 时间：2013-03-18T22:18:06.397
> 
> 标签：angularjs

Angular 悄悄地重写了 url，但这种特殊情况给我的应用程序带来了问题。如果我试图用角度修补这个特殊情况，我会在哪里看？

强制 Angular 以这种方式表现会破坏很多东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:16:05.297

我从上面的答案中找到了解决方法，我所要做的就是转到这一行 [https://github.com/angular/angular.js/blob/master/src/Angular.js#L873](https://github.com/angular/angular.js/blob/master/src/Angular.js#L873)

并添加一个

```
replace(/%2B/gi, '+'). 
```

到链条。工作了一个款待！谢谢@fastreload！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:45:53.717

~~直接来自来源：
[https ://github.com/angular/angular.js/blob/master/src/Angular.js#L854](https://github.com/angular/angular.js/blob/master/src/Angular.js#L854)~~

~~重新编译它，或者只是在您的 angularjs 版本中找到相关部分并进行更改。~~

它是由`encodeURIComponent`哪个是本机功能引起的。浏览器实现它的方式可能是标准化的。它与许多其他人一起`+`转换。`%2B`

然后，您应该更改应用的行为。

# android - 来自隐藏 TextInput 的 Flex 移动文本仍然可见

> ID：15488017
> 
> 赞同：0
> 
> 时间：2013-03-18T22:18:16.397
> 
> 标签：android, apache-flex, mobile, fonts, textinput

我对 Flex TextInputs 有奇怪的错误。我在我的 Android 应用程序中使用 Flex 4.9.0。应用程序在组组件中有视图导航器。我通过将其作为该组的子项插入来添加自定义弹出窗口。弹出窗口覆盖视图导航器中的视图，一切似乎都很好。不幸的是，视图中 TextInputs 中的文本仍然可见且可选择。这怎么可能？我认为 Flex 的深度是神圣的：/ 我嵌入了字体，但这并没有改变任何东西。

这是带有此错误的图像。

![在此处输入图像描述](../Images/40290d54099ebdc315b42794ef9ab7e2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:34:05.240

听起来您正在使用“StageText”TextInput 皮肤。它总是凌驾于一切之上。您必须切换到 Flash TextField TextInput 外观。

我为此写了一篇深入的[博客文章](https://www.flextras.com/blog/index.cfm/2012/5/1/Why-does-a-TextInput-appear-above-my-Popup-in-Flex-46)。解决方法是切换回旧的 TextInput 皮肤：

```
<textInput skinClass="spark.skins.mobile.TextInputSkin" /> 
```

# sql - 总销售额排名前 5 的销售人员

> ID：15488018
> 
> 赞同：1
> 
> 时间：2013-03-18T22:18:16.977
> 
> 标签：sql, join, group-by, subquery

我试图根据他们的总销售额找到前 5 名销售人员。我想显示代表的姓名和他们的总销售额，我在 AdventureWorks 工作。

一直让我失望的是`GROUP BY`声明。在下面的查询中，我不确定为什么`GROUP BY`不起作用。我确信有一种更有效的方法可以做到这一点，但在这一点上，我只是想真正学习连接和子查询，而`GROUP BY`工作方式似乎是我没有掌握的东西。

```
SELECT SalesLT.Customer.SalesPerson, SUM(repjoin.TotalDue) OVER (PARTITION BY repjoin.salesperson)
FROM SalesLT.customer INNER JOIN
    (SELECT SalesLT.SalesOrderHeader.CustomerID, 
            SalesLT.SalesOrderHeader.TotalDue, 
            SalesLT.Customer.SalesPerson
    FROM SalesLT.Customer
        INNER JOIN SalesLT.SalesOrderHeader
        ON SalesLT.SalesOrderHeader.CustomerID = SalesLT.Customer.CustomerID
    ) repjoin
        ON SalesLT.Customer.CustomerID = repjoin.CustomerID
GROUP BY SalesLT.Customer.SalesPerson 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:43:47.763

为什么不简单

```
SELECT TOP 5
  c.SalesPerson, 
  SUM(soh.TotalDue) TotalSales
FROM
  SalesLT.Customer c
  INNER JOIN SalesLT.SalesOrderHeader soh ON soh.CustomerID = c.CustomerID
GROUP BY 
  c.SalesPerson
ORDER BY
  SUM(soh.TotalDue) DESC 
```

?

# .net - visual studio vb.net 转到行短键（Ctrl + G）不起作用？

> ID：15488026
> 
> 赞同：23
> 
> 时间：2013-03-18T22:18:35.900
> 
> 标签：.net, visual-studio-2010, visual-studio, vb.net-2010

我曾经在 C# 中工作并使用 Ctrl + G 转到行，但它在 vb.net 中不起作用。请你。编辑菜单>转到甚至不显示任何快捷键。如果我按 Ctrl + G 它会打开即时窗口。我需要做些什么才能启用转到快捷键，还是在使用 vb.net 时会有所不同？请指导我。

注意：我在 Visual Studio 2010 中工作。

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-18T22:22:56.447

确保 ctrl+g 没有在其他任何地方使用。如果是，请将其从这些区域中删除：

1.  首先输入您的快捷方式
2.  如果出现在“当前使用者”
3.  然后将其键入“显示包含的命令”
4.  从“显示包含的命令”中删除它

![在此处输入图像描述](../Images/6a0e147d746412b6035e3b32edc9bd41.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T22:24:23.813

如果您转到工具 -> 选项 -> 环境 -> 键盘，您可以将快捷键更改为您喜欢的内容。要设置转到行快捷键，请在“显示包含的命令”中键入 Edit.GoTo，然后在“按快捷键”中按 Ctrl+G，然后单击分配。您可以找出 Ctrl+G 已经映射到的内容（听起来像是立即窗口），然后根据需要先将其重新映射到另一个键。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-04T14:30:53.500

同样的事情也发生在我身上。我习惯于使用 C# 编程，并且我使用 C# 具有的所有快捷方式，例如 ctrl+G 用于 goto 行。每次我按 ctrl+G 时，它都会转到即时窗口。当我为 Visual Basic 而不是 C# 设置我的“新系统”时，这开始了。我所做的修复它是单击“工具”-> 选项，然后在“环境”下选择“键盘”。最上面的选项说“应用以下附加的键盘映射方案：”当前选择的是 Visual Basic。因此，一旦我将其切换到 Visual C# 并单击“确定”，我的 ctrl+g 就可以用于“goto line”，并且我所有的原始 c# 命令都可以正常工作。我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-08T08:01:11.347

只是有同样的。似乎 ctrl+G 和 ctrl+Alt+I 都分配给即时窗口。我所做的，是我选择了edit.goto 输入了ctrl+g，按下了assign，一切都很好

# list - 在 Scheme 中，如何用另一个列表的元素替换列表中的元素？

> ID：15488030
> 
> 赞同：1
> 
> 时间：2013-03-18T22:19:06.270
> 
> 标签：list, scheme, switch-statement

因此，该函数应该采用 3 个都是字符串的参数。第一个是原始字符串。第二个是应该更改字符串中的字母。第三个是字母应该改成什么。例如，

```
~ (switch-up "aabcc" "abc" "def") 
```

“ddeff”

我什至不知道如何从这个开始。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:42:32.507

这看起来像家庭作业，所以我将给您一些提示，以使用您可用的程序解决问题。首先将问题拆分为更简单的部分 - 首先，实际`switch-up`过程基本上迭代输入字符串中的每个字符，依次处理每个字符并使用结果构建一个新字符串。提示：使用`string-ref`and`substring`检索字符串中的第一个字符和其余字符 - 将其视为字符串的`car`and `cdr`。

```
(define (switch-up lst letters replacements)
  (if <???>                                      ; if the string is empty
      <???>                                      ; return the empty string ""
      (string-append (replace <???> <???> <???>) ; otherwise string-append the replacement of the first character in the string
                     (switch-up <???> letters replacements)))) ; and advance the recursion over the rest of the string 
```

其次，我们需要一个`replace`过程，给定单个字符以及字母和替换，如果没有找到，则返回替换的字符串或具有相同输入字符的字符串：

```
(define (replace c ls rs)
  (let ((idx (index-of ls c)))       ; get the index of c in the `ls` string
    (if idx                          ; if the index was found
        (string (string-ref rs idx)) ; then get the corresponding value from `rs`
        (string c))))                ; otherwise, return c unchanged 
```

最后，我发现对前面的过程定义一个帮助程序很有用，它返回字符串中字符的索引`ls`（或者`#f`如果在字符串中没有找到该字符），所以很容易在替换字符串中找到它. `str`提示：转换成字符列表将非常有用，使用`string->list`

```
(define (index-of str c)
  <???>) ; ToDo: return the 0-based index of c inside str 
```

不要忘记测试所有内容：

```
(switch-up "aabcc" "abc" "def")
=> "ddeff" 
```

**备选方案：**`string->list`如果您首先将字符串转换为字符列表（使用），然后在最后将它们转换回字符串，使用 ，则该问题可能更容易解决`list->string`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:38:56.380

概述：创建从旧字母到新字母的映射。遍历原始列表，将每个旧字母替换为新字母。假设所有参数都是列表（否则需要`string->list`）：

```
(define (switch-up list old new)
  (let ((old-to-new (map cons old new)))
    (let switching ((list list) (result '())
      (if (null? list)
          (reverse result)
          (switching (cdr list)
                     (cons (cond ((assoc (car list) old-to-new) => cdr)
                                 (else (car list)))
                           result)))))) 
```

# wpf - 文本框绑定到 LostFocus 和属性更新

> ID：15488033
> 
> 赞同：6
> 
> 时间：2013-03-18T22:19:12.713
> 
> 标签：wpf, xaml, binding, textbox, prism

目前我绑定到我的`TextBox`es 为：

```
Text="{Binding DocValue,
         Mode=TwoWay,
         ValidatesOnDataErrors=True,
         UpdateSourceTrigger=PropertyChanged}" 
```

这非常适合让每次击键都进行按钮状态检查（我想要的）。

此外，我想跟踪（通过绑定）`LostFocus`上的事件`TextBox`并进行一些额外的计算，这些计算对于每次击键来说可能过于密集。

有人对如何实现两者有想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-19T03:54:51.723

将命令绑定到`TextBox` `LostFocus`事件。

XAML

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"

<TextBox Margin="0,287,0,0">
     <i:Interaction.Triggers>
          <i:EventTrigger EventName="LostFocus">
               <i:InvokeCommandAction Command="{Binding LostFocusCommand}" />
          </i:EventTrigger>
     </i:Interaction.Triggers>
</TextBox> 
```

查看模型

```
private ICommand lostFocusCommand;

public ICommand LostFocusCommand
{
    get
    {
        if (lostFocusCommand== null)
        {
            lostFocusCommand= new RelayCommand(param => this.LostTextBoxFocus(), null);
        }
        return lostFocusCommand;
     }
}

private void LostTextBoxFocus()
{
    // do your implementation            
} 
```

你必须参考`System.Windows.Interactivity`这个。你必须安装一个可再发行组件才能使用这个库。你可以从[这里下载](http://www.microsoft.com/en-us/download/details.aspx?id=10801)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-09T01:46:37.263

为了补充最高投票的答案，dotnet core 迁移了交互库。使其工作的步骤：

> 1.  删除对“Microsoft.Expression.Interactions”和“System.Windows.Interactivity”的引用
> 2.  安装“Microsoft.Xaml.Behaviors.Wpf”NuGet 包。
> 3.  XAML 文件 – 将 xmlns 命名空间“ [http://schemas.microsoft.com/expression/2010/interactivity](http://schemas.microsoft.com/expression/2010/interactivity) ”和“ [http://schemas.microsoft.com/expression/2010/interactions](http://schemas.microsoft.com/expression/2010/interactions) ”替换为“ [http://schemas. microsoft.com/xaml/behaviors](http://schemas.microsoft.com/xaml/behaviors) "
> 4.  C# 文件 – 将 c# 文件“Microsoft.Xaml.Interactivity”和“Microsoft.Xaml.Interactions”中的使用替换为“Microsoft.Xaml.Behaviors”

通过[博客（2018 年 12 月）在此处发布](https://devblogs.microsoft.com/dotnet/open-sourcing-xaml-behaviors-for-wpf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T23:23:42.020

我想我找到了一个解决方案......我创建了一个复合命令并将其用于额外的通信。

命令定义

```
public static CompositeCommand TextBoxLostFocusCommand = new CompositeCommand(); 
```

我的文本框

```
private void TextboxNumeric_LostFocus(object sender, RoutedEventArgs e)
{
    if (Commands.TextBoxLostFocusCommand.RegisteredCommands.Count > 0)
    {
        Commands.TextBoxLostFocusCommand.Execute(null);
    }
} 
```

然后在我的 ViewModel 中，我创建了一个委托命令并连接到它..

好像可以了，不知道有没有更好的方法。一个缺点是每个文本框都会触发它，而不仅仅是附加到我想要计算的公式的项目。可能需要想办法改进这一点。

# c# - BeginRequest 中添加时 Cookie 标头出现两次

> ID：15488034
> 
> 赞同：2
> 
> 时间：2013-03-18T22:19:12.870
> 
> 标签：c#, asp.net, .net

注册以下 IHttpModule 后，我得到 cookie_BeginRequest 的重复 cookie 标头。

```
public class MyModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.BeginRequest+=(sender, e) =>
            {
                SetValues("BeginRequest");
            };
        context.PreSendRequestContent+=(sender, e) =>
            {
                SetValues("PreSendRequestContent");
            };
    }

    static void SetValues(string name)
    {
        var httpContext = HttpContext.Current;

        var httpCookie = new HttpCookie("cookie_" + name, "cookie_value");
        httpContext.Response.Cookies.Add(httpCookie);
        httpContext.Response.Headers.Add("header_" + name, "header_value");
    }

    public void Dispose()
    {
    }
} 
```

我希望看到以下标题：

> header_BeginRequest: header_value
> 
> 设置 Cookie：cookie_BeginRequest=cookie_value；路径=/
> 
> header_PreSendRequestContent: header_value
> 
> 设置 Cookie：cookie_PreSendRequestContent=cookie_value；路径=/

相反，我看到了（注意重复的 Set-Cookie cookie_BeginRequest）：

> header_BeginRequest: header_value
> 
> 设置 Cookie：cookie_BeginRequest=cookie_value；路径=/
> 
> 设置 Cookie：cookie_BeginRequest=cookie_value；路径=/
> 
> header_PreSendRequestContent: header_value
> 
> 设置 Cookie：cookie_PreSendRequestContent=cookie_value；路径=/

上面的标题是从 Fiddler 中提取的，以排除浏览器是问题的根源。我已经单步执行了代码，似乎 BeginRequest 事件在每个请求中只触发一次。这得到了 header_BeginRequest 标头仅出现一次的事实的支持。我还检查了该模块只注册了一次。测试均在 IIS Express 和 .Net 4.5 下运行。

这是预期的行为吗？

# ruby-on-rails - 如何测试一个对象是否是用 rspec 创建的？

> ID：15488038
> 
> 赞同：1
> 
> 时间：2013-03-18T22:19:20.587
> 
> 标签：ruby-on-rails, ruby, unit-testing, rspec

如何测试使用 rspec 创建 10 个对象用户但返回布尔值的方法？

如果只有一个用户？有更清洁的测试方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T22:20:35.213

如果您想测试`User`是否创建了 10 条记录，您可以使用`expect`匹配器

```
expect { my_magic_method }.to change { User.count }.by(10) 
```

如果您还想测试它是否返回 true

```
expect(my_magic_method).to be_true 
```

[官方文档](https://www.relishapp.com/rspec/rspec-expectations/v/2-0/docs/matchers/expect-change)

# model - 使用 Glpk 进行线性规划建模时的语法错误

> ID：15488041
> 
> 赞同：1
> 
> 时间：2013-03-18T22:19:25.337
> 
> 标签：model, linear-programming, glpk, mathprog

这是我的全部问题：

![在此处输入图像描述](../Images/3f0f37dff515741c6c1fb9514c1654ea.png)

信息：

*最大限度。总投资：125美元

*支付是购买单位的总和 x 支付/单位

*每次投资成本：购买成本 + 成本/单位 x 单位数量（如果您购买至少一个单位）

*成本为每次投资成本的总和

约束：

*您不能同时投资 2 和 5。

*仅当您至少投资 2 和 3 之一时，您才可以投资 1。

*您必须至少投资 3,4,5 中的两个。

*您的投资不得超过最大单位数。

问题：最大化利润：回报 - 成本

```
 xi: # of units i ∈ {1,2,3,4,5}
 yi=1 if xi>0 else yi=0
 cost = sum{i in I} buyInCost_i * yi + cost-unit_i*xi
 pay-off = sum{i in I} (pay-off/unit)_i*xi
 profit = pay-off - cost

 Maximize profit

 Subject to

 y2+y5 <= 1
 y1<= y2+y3
 y3+y4+y5 >= 2
 x1<=5, x2<=4, x3<=5, x4<=7, x5<=3
 cost<=125 
```

我的建模：

```
 set I;

 /*if x[i]>0 y[i]=1 else y[i]=0 ?????*/
 var y{i in I}, binary;

 param a{i in I};
 /* buy-in cost of investment i */

 param b{i in I};
 /* cost per unit of investment i */

 param c{i in I};
 /* pay-off per unit of investment i */

 param d{i in I};
 /* max number of units of investment i */

 var x{i in I} >=0;
 /* Number of units that is bought of investment i */

 var po := sum{i in I} c[i]*x[i];

 var cost := sum{i in I} a[i]*y[i] + b[i]*x[i];

 maximize profit: po-cost;

 s.t. c1: y[2]+y[5]<=1;
 s.t. c2: y[1]<y[2]+y[3];
 s.t. c3: y[3]+y[4]+y[5]>=2;
 s.t. c4: x[1]<=5 
     x[2]<=4
     x[3]<=5
     x[4]<=7
     x[5]<=3;

 s.t. c5: cost <=125;
 s.t. c6{i in I}: M * y[i] > x[i];   // if condition of y[i] 

 set I := 1 2 3 4 5;
 param a :=
1 25
2 35
3 28
4 20
5 40;

 param b :=
1 5
2 7
3 6
4 4
5 8;

 param c :=
1 15
2 25
3 17
4 13
5 18;

 param d :=
1 5
2 4
3 5
4 7
5 3;

 param M := 10000; 
```

我收到此语法错误：

```
 problem.mod:21: syntax error in variable statement 
      Context: ...I } ; param d { i in I } ; var x { i in I } >= 0 ; var po :=
      MathProg model processing error 
```

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-14T08:51:32.190

您的 MathProg 代码中有很多错误。这应该有效：

```
set I;

param M;

/*if x[i]>0 y[i]=1 else y[i]=0 ?????*/
var y{i in I}, binary;

param a{i in I};
/* buy-in cost of investment i */

param b{i in I};
/* cost per unit of investment i */

param c{i in I};
/* pay-off per unit of investment i */

param d{i in I};
/* max number of units of investment i */

var x{i in I}, >=0;
/* Number of units that is bought of investment i */

var cost, >= 0;

maximize profit: sum{i in I} c[i] * x[i] - sum{i in I} (a[i] * y[i] + b[i] * x[i]);

s.t. c01: y[2] + y[5]<=1;
s.t. c02: y[1] <= y[2]+y[3];
s.t. c03: y[3]+y[4]+y[5]>=2;
s.t. c04: x[1]<=5;
s.t. c05: sum{i in I} (a[i]*y[i] + b[i]*x[i]) <= 125;
s.t. c6{i in I}: M * y[i] >= x[i];   /* if condition of y[i] */
s.t. c10: x[2]<=4;
s.t. c11: x[3]<=5;
s.t. c12: x[4]<=7;
s.t. c13: x[5]<=3;

data;

set I := 1 2 3 4 5;
param a :=
1 25
2 35
3 28
4 20
5 40;

param b :=
1 5
2 7
3 6
4 4
5 8;

param c :=
1 15
2 25
3 17
4 13
5 18;

param d :=
1 5
2 4
3 5
4 7
5 3;

param M := 10000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:04:37.377

这个答案来自 help-glpk@gnu.org 的 Andrew Makhorin

在 MathProg 中，您不能为变量赋值。

如果您需要将变量固定为某个值，则需要使用适当的等式约束，例如

```
 var po;

   s.t. foo: po = sum{i in I} c[i]*x[i];

   var cost;

   s.t. bar: cost = sum{i in I} a[i]*y[i] + b[i]*x[i]; 
```

# ios - 具有多个 source_id 的 FQL 查询中的问题

> ID：15488044
> 
> 赞同：0
> 
> 时间：2013-03-18T22:19:46.920
> 
> 标签：ios, facebook-fql

我正在尝试查询：

`SELECT source_id,created_time,post_id, actor_id, message, comments.count, likes.count, attachment FROM stream WHERE source_id in (xxx,xxx,xxx)`但我只`source_id`在“in”括号中的最后一个得到结果。我什至改变了他们的订单，令人惊讶的是我又得到了最后一个（新的最后一个）。

如果我分别查询它们，我会得到我需要的结果..但在一起....

有人偶然发现过这个问题吗？

提前致谢 ！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T10:18:38.633

您应该尝试使用 Graph API：

```
?ids=24709128407,9011625258&fields=posts.limit(10).offset(0).fields(message,picture,link) 
```

# python - 这叫什么：myVar = value1 或 value2

> ID：15488046
> 
> 赞同：3
> 
> 时间：2013-03-18T22:19:57.060
> 
> 标签：python, ternary-operator

我见过这种称为三元分配的方法，我想知道它是否有一个特定的名称：

```
value1 = None
value2 = 'real value'
myVar = value1 or value2

// at this point the value of myVar is 'real value' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:25:15.843

文档称其为[布尔运算](http://docs.python.org/2/library/stdtypes.html#boolean-operations-and-or-not)。的值`value1 or value2`只是语言的一个特征。

在 C 和受 C 启发的语言中，有一个[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)。这个操作符的效果最好称为“条件表达式”。Python 也有一个条件表达式：

```
myVar = value1 if value1 else value2 
```

在这种情况下，我更喜欢使用条件表达式而不是布尔运算符。对于不熟悉 Python 的人来说，效果`myVar = value1 or value2`并不明显。

# php - MagicSuggest 动态ajax源码

> ID：15488053
> 
> 赞同：3
> 
> 时间：2013-03-18T22:20:28.983
> 
> 标签：php, jquery, autocomplete, magicsuggest

我正在使用[MagicSuggest](https://github.com/nicolasbize/magicsuggest)自动完成输入文本，自动完成提要非常大，所以我无法完整下载它，在他们的示例中，他们提供了以下代码：

**JAVASCRIPT**

```
 $(document).ready(function() {
        var jsonData = [];
        var cities = 'New York,Los Angeles,Chicago,Houston,Paris,Marseille,Toulouse,Lyon,Bordeaux,Philadelphia,Phoenix,San Antonio,San Diego,Dallas,San Jose,Jacksonville'.split(',');
        for(var i=0;i<cities.length;i++) jsonData.push({id:i,name:cities[i],status:i%2?'Already Visited':'Planned for visit',coolness:Math.floor(Math.random() * 10) + 1});

        $('#ms3').magicSuggest({
            selectionPosition: 'bottom',
            renderer: function(city){
                return '<div>' +
                        '<div style="font-family: Arial; font-weight: bold">' + city.name + '</div>' +
                        '<div>Cooooolness: ' + city.coolness + '</div>' +
                       '</div>';
            },
            minChars: 1,
            selectionStacked: true,
            data: jsonData
        }); 
```

**HTML**

```
<h3>Stacking in bottom, ajax source (type 1 char to load)</h3>
<input id="ms3" style="width:400px;" type="text"/> 
```

如果你喜欢，这里有一个[JSFIDDLE](http://jsfiddle.net/9KRrf/)。这很好用，但是数据已完全加载（在本例中为硬编码），有没有办法根据用户输入（每次更改时）通过 ajax 加载数据？我不关心 php 方面，因为我在那方面非常有能力，但在前端我很新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T22:52:29.137

data 参数可以使用 url 来加载元素。从文档：

```
data: array / string

JSON Data source used to populate the combo box. 3 options are available here:
No Data Source (default)
When left null, the combo box will not suggest anything. It can still enable the user to enter multiple entries if allowFreeEntries is set to true (default).

Static Source
You can pass an array of JSON objects, an array of strings or even a single CSV string as the data source.
For ex. data: [{id:0,name:"Paris"}, {id: 1, name: "New York"}]

Url
You can pass the url from which the component will fetch its JSON data.
Data will be fetched using a POST ajax request that will include the entered text as 'query' parameter. The results fetched from the server can be: 
- an array of JSON objects (ex: [{id:...,name:...},{...}])
- a string containing an array of JSON objects ready to be parsed (ex: "[{id:...,name:...},{...}]")
- a JSON object whose data will be contained in the results property (ex: {results: [{id:...,name:...},{...}] 
```

默认情况下，它将执行 POST 查询，但您可以使用方法参数更改它。此外，默认情况下，每次您按下某个键时，它都会使用用户输入的内容作为请求的“查询”参数触发查询。

所以...首先这里是你如何从服务器加载数据：

```
$(document).ready(function() {
    $('#ms3').magicSuggest({
        data: 'http://yoururl/data.php'
    }); 
```

然后在 data.php 例如：

```
<?php

$data = array(array("id"=> 1, "name"=> "New York", "country"=> "United States"),
    array("id"=> 2, "name"=> "Los Angeles", "country"=> "United States"),
    array("id"=> 3, "name"=> "Chicago", "country"=> "United States"),
    array("id"=> 4, "name"=> "Houston", "country"=> "United States"),
    array("id"=> 5, "name"=> "Philadelphia", "country"=> "United States"),
    array("id"=> 6, "name"=> "Paris", "country"=> "France"),
    array("id"=> 7, "name"=> "Marseille", "country"=> "France"),
    array("id"=> 8, "name"=> "Toulouse", "country"=> "France"),
    array("id"=> 9, "name"=> "Lyon", "country"=> "France"),
    array("id"=> 10, "name"=> "Bordeaux", "country"=> "France"),
    array("id"=> 11, "name"=> "Montpellier", "country"=> "France"),
    array("id"=> 16, "name"=> "Phoenix", "country"=> "United States"),
    array("id"=> 17, "name"=> "San Antonio", "country"=> "United States"),
    array("id"=> 18, "name"=> "San Diego", "country"=> "United States"),
    array("id"=> 19, "name"=> "Dallas", "country"=> "United States"),
    array("id"=> 20, "name"=> "San Jose", "country"=> "United States"),
    array("id"=> 21, "name"=> "Jacksonville", "country"=> "United States"));

echo json_encode($data);

?> 
```

现在，每次您按下一个键时，它都会执行该查询，您可以通过在 PHP 代码中获取 $_POST['query'] 来获取用户键入的任何内容。然后，您可以过滤数据或执行数据库查询或其他任何操作。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T21:59:19.890

我也在做同样的事情，但由于某种原因，magicsuggest 在无限循环中执行 url，我使用的是 1.2.8 版本的 magicsuggest；我正在从文档 onload 中调用此函数。

函数 createMultiSuggest(json){

```
var jsonData="";

var strTrUserId  = $("#TrUserId").val();
var strUrl='/loadAll.jsp';

_suggest=$("#pcpSuggest,#providerSuggest").magicSuggest({
    //resultAsString: true,
    dataUrlParams: {"action":"fetchData","providerType":"providers","pid":strId,"ms": new Date().getTime()},
    minChars: 2,
    displayField: 'fullname',
    selectionStacked: false,
    data: strUrl,
    typeDelay:400
});
return false; 
```

}

# compiler-construction - 对于一个*缺少堆栈或内存分配*的架构，什么是最具表现力的编程语言？

> ID：15488056
> 
> 赞同：5
> 
> 时间：2013-03-18T22:20:36.923
> 
> 标签：compiler-construction, embedded, abstract-syntax-tree

我在一个有几个字节空闲 RAM 的专有序列器上工作；数百个字节静态分配；8个寄存器，包括PC；没有间接性（在 C 中，一个“指针”）；没有堆栈。

没有`MOV`说明：要`M`进入`K`，您必须编写`CLX A; ORX M; STX K`使依赖关系解析或至少优化变得非常复杂的内容。`K`许多操作只对特定的寄存器起作用：例如，在高位字和`M`低位字中使用 32 位右移。

所以对我来说，嵌入式应用程序明显选择 C ​​是因为没有指针或函数调用是可能的。大多数高级编程语言都有算术表达式，因此这无助于缩小我们的选择范围。

最重要的是绝对最小代码大小，因此优化是关键。

我倾向于将 Lisp 表达式编译为宏汇编程序的一种形式，因为程序员可以优化自己的高级操作，例如编写`XOR`指令。

我敢肯定这不是第一个有这些限制的项目。过去是如何解决的？

# git - Git :: 将多模块项目拆分为 2 个模块并保留历史记录

> ID：15488057
> 
> 赞同：3
> 
> 时间：2013-03-18T22:20:37.527
> 
> 标签：git, git-submodules

目前我们确实有一个大型项目，由模块**A、B、C、D、E**组成。这些模块位于**github**上的同一个项目存储库中，但位于不同的文件夹中 - 每个模块都在它自己的文件夹中。项目由 Maven 管理，如果这很重要的话。

最近我们决定将项目拆分为两个不同的实例 - **P1**和**P2**，因此它们将驻留在不同的存储库中。**P1**应该持有模块**A,C,D**并且项目**P2**应该持有**B,E**。

所以现在我们认为我们至少有 4 个选项：

*   让项目保持原样。将相应的 Git 模块添加到**P1**和**P2**，因此每个模块都将指向*父*项目中的适当文件夹这将肯定保留历史记录（至少我认为如此）。
*   **为P1**创建存储库，将内容签入其中。然后将模块**B、E**移动到文件夹**client**，然后创建将文件夹**client**作为模块导入**P2** repo。我不知道这是否可能，但它也应该保留历史。
*   将所有内容签入**P1**和**P2** ，然后从**P1**中删除模块**B,E**，并从**P2中删除模块****A,C,D**。然后将**P2**作为 git 模块添加到**P1**。这应该保留历史，但实际上太多了 - 所以模块**P2**将包含从**P1**到发散时刻的所有内容。如果可能，我们希望避免这种情况。
*******   最后，只需从头开始检查它作为新项目的所有内容。******

 ******我个人更喜欢第一个选项，但不确定这是否可能 - 例如，添加外国项目的子文件夹的依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:57:30.193

如果您想为每个子模块创建一个新的 repo，那么您应该查看[git-subtree](https://github.com/apenwarr/git-subtree)。使用`split`选项创建仅包含子文件夹历史记录的新分支。然后你可以将`push`那些新的遥控器作为`master`分支。

如果您需要有关使用的详细信息，请联系我。******

# ios - 通过 MailCore 连接到谷歌应用服务器时遇到问题

> ID：15488058
> 
> 赞同：2
> 
> 时间：2013-03-18T22:20:42.080
> 
> 标签：ios, mailcore

我正在尝试通过 IMAP 连接到 Google Apps 电子邮件服务器。我在下面使用的代码，每次我尝试连接时都会收到错误：`Parse error`有人知道这个错误的来源吗？

```
 int port = 993;
    CTCoreAccount *account = [[CTCoreAccount alloc] init];
    BOOL success = [account  connectToServer:@"imap.gmail.com"
                                        port:port
                              connectionType:CTConnectionTypeStartTLS
                                    authType:CTImapAuthTypePlain
                                       login:login
                                    password:password];
    NSLog(@"Port: %d",port);
    if (!success) {
        NSLog(@"Connection failed, error: %@",[account.lastError localizedDescription]);
    }
    else {
        NSLog(@"Connection succeeded");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:06:00.347

这里同时发生了两个问题。首先是我的网络有防火墙，这是`Parse Error`.

其次，当您需要连接到 Google Maps IMAP 服务器时，您需要使用`CTConnectionTypeTLS`而不是`CTConnectionTypeStartTLS`，因为第二个会使服务器变得疯狂。

# java - java：字节码中的字符串连接转换为StringBuilder

> ID：15488059
> 
> 赞同：4
> 
> 时间：2013-03-18T22:20:44.797
> 
> 标签：java, string, jvm, stringbuilder, javap

我用 javac 命令行查看了我的编译代码，我看到每当我使用 + 运算符进行字符串连接时，编译代码都会被 StringBuilder 的 append() 方法替换。现在我认为使用 StringBuilder 和 String 连接具有相同的性能，因为它们具有相似的字节码，对吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T22:25:23.290

是的，这是真的！但是当您在循环中连接时，行为会有所不同。例如

```
String str = "Some string";
for (int i = 0; i < 10; i++) {
  str += i;
} 
```

new`StringBuilder`将在每次循环迭代时构造（初始值为 str），并且在每次迭代结束时将与初始 String 连接（实际上`StringBuilder`初始值为`str`）。
因此，只有在循环中使用字符串连接时，您才需要自己创建 StringBuilder。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:25:26.893

主要区别（以及编译器`StringBuilder`用于字符串连接的原因）`String`是不可变的，而`StringBuilder`不是。

例如，`s1 + s2 + s3`单独使用字符串进行计算需要将`s1`' 字符复制两次。这可以（并且是）通过使用来避免`StringBuilder`。

[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)明确允许这种优化：

> 实现可以选择在一个步骤中执行转换和连接，以避免创建然后丢弃中间 String 对象。为了提高重复字符串连接的性能，Java 编译器可以使用 StringBuffer 类或类似技术来减少通过评估表达式创建的中间字符串对象的数量。

# javascript - 从循环动态地制作一个Javascript数组

> ID：15488063
> 
> 赞同：1
> 
> 时间：2013-03-18T22:20:49.373
> 
> 标签：javascript, jquery, multidimensional-array

我知道有很多关于此的问题，但我找不到解决我的问题的方法，并且已经研究了一段时间。我有两组具有相同名称的输入字段，一组用于产品代码，一组用于产品名称。这些输入字段可以被用户拿走并添加到 DOM 中，因此可以有多个：

这是我到目前为止所拥有的，尽管这样可以保存它，所以所有代码都在一个数组中，而所有名称都在另一个数组中：

```
var updatedContent = [];
var varCode = {};
var varName = {};

$('.productVariationWrap.edit input[name="varVariationCode[]"]')
   .each(function(i, vali){
     varCode[i] = $(this).val();
   });

$('.productVariationWrap.edit input[name="varVariationName[]"]')
  .each(function(i1, vali1){
    varName[i1] = $(this).val();
  });

updatedContent.push(varCode);
updatedContent.push(varName); 
```

我正在尝试获取它，以便名称和代码进入同一个数组。即代码是K = V 对的关键？

基本上这样我就可以遍历最终数组并轻松访问代码和相关名称。

我可以很容易地在 PHP 中做到这一点，但在 javascript 中没有运气。

编辑

我希望数组看起来像：

```
[
    [code1, name1],
    [code2, name2],
    [code3, name3]
]; 
```

因此，在我可以执行循环并对主数组中的每个数组进行循环之后，我可以对键（例如 code1）和关联的值（例如 name1）执行一些操作。这有意义吗？它有点像多维数组，尽管有些人可能会在涉及 Javascript 时反对该声明的有效性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:39:58.527

我认为您最好创建一个对象，这样您以后就可以访问键/值对而不必循环，如果您不想这样做：

```
var $codes = $('.productVariationWrap.edit input[name="varVariationCode[]"]'),
    $names = $('.productVariationWrap.edit input[name="varVariationName[]"]'),
    updatedContent = {};

for (var i = 0, il = $codes.length; i < il; i++) {
    updatedContent[$codes.get(i).value] = $names.get(i).value;
} 
```

现在例如 ,`updatedContent.code1 == name1`如果需要，您可以遍历对象：

```
for (var k in updatedContent) {
    // k == code
    // updatedContent[k] == name
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:37:26.150

使用两个循环可能不是最优的。最好使用一个循环来收集所有项目，无论是代码还是名称，然后将它们组装在一起。

另一个问题：你的选择器在我看来有点滑稽。您说页面中可以有多个这样的控件，但是控件具有重复名称是不正确的，除非它们是互斥的单选按钮/复选框 - 除非每对输入都在其自己的祖先中`<form>`？有关此的更多详细信息将帮助我提供更好的答案。

并注意：在您的代码中，您将 varCode 和 varName 变量实例化为 objects `{}`，然后像 arrays 一样使用它们`[]`。那是你的意图吗？当我第一次回答你时，我被“最终输出应该看起来像这个数组”分散了注意力，并错过了你想要对象中的键 = 值对。如果您的意思是您所说的最终结果是嵌套数组，那么您可以对代码进行的最小修改以使其按原样工作如下所示：

```
var updatedContent = [];

$('.productVariationWrap.edit input[name="varVariationCode[]"]')
   .each(function(i, vali){
      updatedContent[i] = [$(this).val()]; //make it an array
   });

$('.productVariationWrap.edit input[name="varVariationName[]"]')
   .each(function(i1, vali1){
      updatedContent[i1].push($(this).val()); //push 2nd value into the array
   }); 
```

但是既然你希望你`Code`是值的唯一索引`Name`，那么我们需要使用对象而不是数组，`Code`键是`Name`值：

```
var updatedContent = {},
   w = $('.productVariationWrap.edit'),
   codes = w.find('input[name="varVariationCode[]"]'),
   names = w.find('input[name="varVariationName[]"]');

for (var i = codes.length - 1; i >= 0; i -= 1) {
   updatedContent[codes.get(i).val()] = names.get(i).val();
}); 
```

请注意，这将产生一个对象，符号将如下所示：

```
{
    'code1': 'name1',
    'code2': 'name2',
    'code3': 'name3'
}; 
```

现在您可以`updatedContent`像这样使用对象：

```
var code;
for (code in updatedContent) {
    console.log(code, updatedContent[code]); //each code and name pair
} 
```

最后，依靠`Code`和`Name`输入以相同的顺序在单独的 jQuery 对象中返回似乎有点脆弱。确保您将正确的代码与正确的名称相关联的某种方法对我来说似乎很重要——即使您现在的操作方式正确，谁能说未来对页面布局的修订不会破坏某些东西？我只是更喜欢显式关联而不是依赖页面元素顺序，但您可能不觉得需要这种保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:52:03.543

我不喜欢用两个循环解决它的方法

```
 var updatedContent = [] 

 $('.productVariationWrap.edit').each(function(i, vali){
     var $this = $(this)
     , tuple = [$this.find('input[name="varVariationCode[]"]').val()
                , $this.find('input[name="varVariationName[]"]').val()]

     updatedContent.push(tuple)
 }); 
```

# java - MySQL 在输入错误时返回 Java 什么？

> ID：15488068
> 
> 赞同：-3
> 
> 时间：2013-03-18T22:21:21.237
> 
> 标签：java, mysql

如果我从 Java 运行插入语句以将值插入 MySQL 数据库，但该值是重复的列必须是唯一的，我如何在 Java 中捕获它？

理想情况下，我想要一个 try/catch，这样如果它是重复的，它就会向用户返回一条消息。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:25:46.343

好吧，这需要是您在 MySQL 数据库中设置的约束。否则，允许重复条目（当然减去主键等）。

如果您不想采用这种方法，请先准备一条 SELECT 语句。如果这返回 0 个结果，则您知道您有一个唯一的插入值，否则抛出异常。

# php - phpunit 在给定空后缀时尝试包含目录

> ID：15488073
> 
> 赞同：1
> 
> 时间：2013-03-18T22:21:41.797
> 
> 标签：php, phpunit, warnings, composer-php

我正在尝试对我的新项目进行测试。目录布局如下：

```
src/ (project's code here)    
test/
    EviType/
        Main.php
    phpunit.xml
composer.json 
```

Phpunit 与 composer 一起安装（所谓的 per-project 依赖项）：

```
{
    "require-dev": {
        "phpunit/phpunit": ">=3.7.5"
    },
} 
```

我选择运行`composer install/update`。`--dev`

Phpunit 配置是用简单的定义的`test/phpunit.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<phpunit colors="true">
    <testsuites>
        <testsuite>
            <directory suffix="">EviType</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

并且其中的测试代码`test/EviType/Main.php`也尽可能短：

```
<?php
class Main extends PHPUnit_Framework_TestCase
{
    public function test()
    {
        $this->assertTrue(true);
    }
} 
```

所以当我运行 phpunit 时：

```
php54 -C vendor/bin/phpunit -c test/ 
```

（系统安装了多个php版本，php54是我的别名`/usr/local/php54/bin/php`。）

我收到了几条简洁的警告信息：

```
X-Powered-By: PHP/5.4.5
Content-type: text/html

<br />
<b>Warning</b>:  include_once(/path/to/docs/test): failed to open stream: Success in <b>/path/to/docs/vendor/phpunit/phpunit/PHPUnit/Util/Fileloader.php</b> on line <b>92</b><br />
<br />
<b>Warning</b>:  include_once(): Failed opening '/path/to/docs/test' for inclusion (include_path='/path/to/docs/vendor/phpunit/phpunit/:/path/to/docs/vendor/phpunit/phpunit/../../symfony/yaml:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-text-template/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-token-stream/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-file-iterator/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-code-coverage/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-timer/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/phpunit-mock-objects/:.:/usr/local/php54/lib/php') in <b>/path/to/docs/vendor/phpunit/phpunit/PHPUnit/Util/Fileloader.php</b> on line <b>92</b><br />
<br />
<b>Warning</b>:  include_once(/path/to/docs/test/EviType): failed to open stream: Success in <b>/path/to/docs/vendor/phpunit/phpunit/PHPUnit/Util/Fileloader.php</b> on line <b>92</b><br />
<br />
<b>Warning</b>:  include_once(): Failed opening '/path/to/docs/test/EviType' for inclusion (include_path='/path/to/docs/vendor/phpunit/phpunit/:/path/to/docs/vendor/phpunit/phpunit/../../symfony/yaml:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-text-template/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-token-stream/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-file-iterator/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-code-coverage/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/php-timer/:/path/to/docs/vendor/phpunit/phpunit/vendor/phpunit/phpunit-mock-objects/:.:/usr/local/php54/lib/php') in <b>/path/to/docs/vendor/phpunit/phpunit/PHPUnit/Util/Fileloader.php</b> on line <b>92</b><br />
PHPUnit 3.7.14 by Sebastian Bergmann.

Configuration read from /path/to/docs/test/phpunit.xml

.

Time: 0 seconds, Memory: 2.50Mb

OK (1 test, 1 assertion) 
```

断言报告让我很高兴，但我不明白为什么它甚至试图包含目录：

```
include_once(/path/to/docs/test) 
```

以及神秘`failed to open stream: Success`条款的含义。这似乎是一个[php 错误](https://bugs.php.net/bug.php?id=45130)，但应该像很久以前一样修复。

设置类似：

```
<php>
    <ini name="display_errors" value="0"/>
</php> 
```

使这些警告消失，但我觉得 phpunit 安装中存在更深层次的问题需要挖掘。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:32:00.053

您确实应该将后缀设置为“.php” - 否则 phpunit 会尝试包含所有包含“”的文件，这些文件都是文件和所有目录。

# core-plot - 是否有适用于 iOS 6.1 的 CorePlot 示例项目？

> ID：15488074
> 
> 赞同：0
> 
> 时间：2013-03-18T22:21:51.773
> 
> 标签：core-plot, ios6.1

CorePlot 看起来像是我正在研究的 iPad 应用程序的最佳库，但我整天都在努力让它在 OS 6.1 项目中编译，以使用 Core Date、ARC 和单元测试。

我想使用这些规范，但我是从头开始，没有其他需要挽救的代码，所以我想到，与其通过不解决 ARC 安装问题的教程进行斗争；并通过对 ARC 的修复，这些修复似乎永远无法让我一路编译；我可以轻松地采用具有这些基本规格的任何准系统项目，并开始引入我已经想出的更简单的添加。

外面有这样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:41:35.453

适用于 Mac 和 iOS的所有*CPTTestApp*示例应用程序都已转换为使用 ARC。这是在 1.1 版本之后完成的，因此目前您需要使用 Mercurial 提取最新代码以查看更改。

自 1.0 版本以来，无需更改 Core Plot 项目即可在使用 ARC 的应用程序中使用它。Core Plot 头文件将在所有支持的带和不带 ARC 的 SDK 下编译。在您的应用程序中包含 Core Plot 静态库，无论是预编译版本还是作为依赖项目构建的版本，它都会链接并正常运行。

Core Plot 内部不使用 ARC，因为它仍然支持无法使用它的旧系统。当最低支持系统增加到支持 Mac 和 iOS 上的 ARC 时，它将更新。

# c# - Texture2D.GetData 总是返回黑色

> ID：15488076
> 
> 赞同：1
> 
> 时间：2013-03-18T22:21:54.240
> 
> 标签：c#, windows-phone-7, xna

我正在使用以下代码来获取屏幕上特定像素的颜色，但由于某种原因，它总是返回黑色。这是我正在使用的代码：

```
Rectangle pixel = new Rectangle((int)screenPosition.X, (int)screenPosition.Y, 1, 1);
                        Texture2D backBufferData = new Texture2D(ScreenManager.GraphicsDevice, ScreenManager.GraphicsDevice.PresentationParameters.BackBufferWidth, ScreenManager.GraphicsDevice.PresentationParameters.BackBufferHeight);
                        Color[] waterPixel = new Color[1];
                        backBufferData.GetData<Color>(0, pixel, waterPixel, 0, 1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T06:08:49.600

您的问题是您的 Texture2D 对象`backBufferData`实际上并未访问后台缓冲区数据。

您实例化的行`backBufferData`不会检索后台缓冲区内容，而只是创建一个新的 Texture2D 对象，该对象是您当前视口的大小。

从 XNA 4.0 开始，只有两种方法可以将颜色数据渲染到屏幕上：

1.  惯用的、干净的方式；将您的场景渲染到 RenderTarget2D 对象，以便您可以对其内容进行采样，然后使用 SpriteBatch 绘制操作将该 RenderTarget2D 对象blit到后台缓冲区。

2.  快速而肮脏的方式；调用[ScreenManager.GraphicsDevice.GetBackBufferData](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.graphicsdevice.getbackbufferdata.aspx)直接访问后台缓冲区。如果您需要经常执行此采样，那么这很可能不是您的最佳选择，因为它非常慢。（并且可能会阻止您的渲染操作）

# sql - 计算两个表中的不同记录

> ID：15488077
> 
> 赞同：-1
> 
> 时间：2013-03-18T22:22:00.703
> 
> 标签：sql, count, distinct, ms-access-2003

关于计算 SQL 中两个表中字段的唯一组合的问题。访问 2003。

```
table1: id, fld1, fld2
table2: id, dateAndTime 
```

id 不是唯一的；表通过“id”连接。

我需要按日期（dd/mm/yy - 忽略时间）计算`fld1`和`fld2`（int）的不同组合。

更具体地说，我需要知道哪个日期具有 和 的最明显`fld1`组合`fld2`。

如果 table1 有

```
1, 101, 101
2、101、101
3, 101, 101
4、101、102
5、101、102
6、101、103
```

表2有

```
1，2010 年 12 月 1 日
2，2010 年 12 月 1 日
3，2010 年 12 月 1 日
1，2010 年 12 月 2 日
2, 2010 年 12 月 2 日
4, 2010 年 12 月 2 日
5，2010 年 12 月 2 日
6 日，2010 年 12 月 2 日
```

我需要

```
12/1/2010, 1     'only 1 unique combinatin of fld1 and fld2
12/2/2010, 3     'only 3 unique combinations of fld1 and fld2 
```

但我只需要“12/2/2010, 3”输出，因为我只需要最大计数的日期和计数。

无法弄清楚如何在下面的正确答案的评论中格式化它 - 所以这里适用于 MS Access 2003。

```
Select TOP 5 theDay, count(*) AS theCount 
FROM ( 
Select cdate(int(date_col)) As theDay 
From tbl1 Inner Join tbl2 on tbl1.id=tbl2.id 
Group By cdate(int(date_col)), fld1, fld2 
) As X 
Group By theDay 
Order By 2 Desc; 
```

这将按日期返回前 5 个组合（不考虑任何时间值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:04:11.777

在现代 RDBMS 中，您可以一次性计算不同的组合：

```
SELECT date_col, count(DISTINCT (fld1, fld2)) AS unique_combos
FROM   tbl1
JOIN   tbl2 USING (id)
GROUP  BY date_col; 
```

如果这不起作用，则分两步进行更简单的方法：

```
SELECT date_col, count(*) AS unique_combos
FROM  (
   SELECT date_col
   FROM   tbl1
   JOIN   tbl2 ON tbl1.id = tbl2.id
   GROUP  BY date_col, fld1, fld2
   ) AS x
GROUP  BY date_col; 
```

第二个也应该在 MS Access 中工作。

@user2184214 最终得到了什么：

```
SELECT TOP 5 theDay, count(*) AS theCount
FROM  (
   SELECT cdate(int(date_col)) AS theDay
   FROM   tbl1 
   JOIN   tbl2 ON tbl1.id = tbl2.id
   GROUP  BY cdate(int(date_col)), fld1, fld2
   ) AS x
GROUP  BY theDay
ORDER  BY 2 DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:18:19.930

此查询为您提供所需的内容：

```
SELECT
  date(dateAndTime) AS date,
  count(DISTINCT (fld1, fld2)) AS count
FROM table1
JOIN table2 ON table1.id = table2.id
GROUP BY 1
HAVING count(DISTINCT fld1, fld2) > 1
ORDER BY 2 DESC 
```

# java - 将包含图像像素数据的矩形旋转到垂直以执行图像处理操作

> ID：15488078
> 
> 赞同：1
> 
> 时间：2013-03-18T22:22:16.983
> 
> 标签：java, image-processing

我创建了一个图像处理应用程序，允许我单击图像中的两个点。然后我使用不同的算法来找到连接两点的路径的坐标。

然后每个像素用于在两个方向上以 90 度角找到距离 10 像素的目标像素。结果是我有一个二维像素值数组，可用于创建子图像进行处理。

我需要新图像是垂直的，以使我能够进行一些图像处理操作。我应该`BufferedImage`从这些像素值中创建一个新的值，然后通过将其旋转到垂直来处理它，还是可以旋转我已经拥有的二维值数组？老实说，我已经看到了很多仿射变换的例子，我不确定哪种方法最好。

# javascript - 将标准 Google 搜索添加到地图

> ID：15488091
> 
> 赞同：0
> 
> 时间：2013-03-18T22:23:17.220
> 
> 标签：javascript, google-maps, google-maps-api-3

我已经建立了一个谷歌地图，但想添加你的标准谷歌搜索框，这样我就可以做一些像购物这样的事情，它会显示当地购物商店的标记。

我一直在寻找如何做到这一点，但大多数结果都在谈论使用特定地址并对其进行地理编码。这不是我想要的。

这是 [https://maps.google.com/maps?q=google+maps&rlz=1C1CHMO_enUS519US519&aq=f&um=1&ie=UTF-8&hl=en&sa=N&tab=wl](https://maps.google.com/maps?q=google+maps&rlz=1C1CHMO_enUS519US519&aq=f&um=1&ie=UTF-8&hl=en&sa=N&tab=wl)

如果有人能指出我正确的方向，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:32:42.187

这是您要查找的内容吗： [https ://google-developers.appspot.com/maps/documentation/javascript/v2/examples/control-googlebar](https://google-developers.appspot.com/maps/documentation/javascript/v2/examples/control-googlebar)

以下是可能也有帮助的 API 示例： [https ://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/)

# c - 绑定失败：无法分配请求的地址

> ID：15488092
> 
> 赞同：6
> 
> 时间：2013-03-18T22:23:26.383
> 
> 标签：c, sockets

我正在尝试编写一个 C 程序来侦听我机器上的端口。我遇到了一个奇怪的错误。

每当我尝试将套接字绑定到固定 IP（`127.0.0.1`或我的实际 IP）时，都会出现`"bind failed: Cannot assign requested address"`错误。但是，当我将`INADDR_ANY`绑定作为要绑定的地址传递给绑定时，它可以工作。

这是我仅有的两个 IP，所以 0.0.0.0 不可能因为我有其他一些可用的 IP 地址而工作。

这是代码：

```
#include<sys/types.h>
#include<stdio.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<errno.h>
#include<stdlib.h>
#include<string.h>
int main()
{
    int port = 1234;    /* port number */
    int rqst;       /* socket accepting the request */
    socklen_t alen;       /* length of address structure */
    struct sockaddr_in my_addr;    /* address of this service */
    struct sockaddr_in client_addr;  /* client's address */
    int sockoptval = 1;

    int svc;

    /* create a TCP/IP socket */
    if ((svc = socket(AF_INET, SOCK_STREAM, 0)) < 0) {
        perror("cannot create socket");
        exit(1);
    }

    /* allow immediate reuse of the port */
    setsockopt(svc, SOL_SOCKET, SO_REUSEADDR, &sockoptval, sizeof(int));

    /* bind the socket to our source address */
    memset((char*)&my_addr, 0, sizeof(my_addr));  /* 0 out the structure */
    my_addr.sin_family = AF_INET;   /* address family */
    my_addr.sin_port = htons(port);
    //my_addr.sin_addr.s_addr = htonl(INADDR_ANY); /* Works! */
    my_addr.sin_addr.s_addr = htonl(inet_addr("127.0.0.1")); /* Fails! */

    if (bind(svc, (struct sockaddr *)&my_addr, sizeof(my_addr)) < 0) {
        perror("bind failed");
        exit(1);
    }

    printf("Listening on %d\n", my_addr.sin_addr.s_addr);
    /* set the socket for listening (queue backlog of 5) */
    if (listen(svc, 5) < 0) {
        perror("listen failed");
        exit(1);
    }

    /* loop, accepting connection requests */
    for (;;) {
        while ((rqst = accept(svc, (struct sockaddr *)&client_addr, &alen)) < 0) {
            /* we may break out of accept if the system call */
                        /* was interrupted. In this case, loop back and */
                        /* try again */
                        if ((errno != ECHILD) && (errno != ERESTART) && (errno != EINTR)) {
                                perror("accept failed");
                                exit(1);
                        }
                }
        /* the socket for this accepted connection is rqst */
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T22:26:14.677

该函数`inet_addr`返回已经按网络顺序排列的地址：

> inet_addr() 函数将 Internet 主机地址 cp 从 IPv4 数字和点表示法转换为**网络字节顺序的二进制数据**

所以放下`htonl`.

# vb.net - 如何生成复选框列表？

> ID：15488094
> 
> 赞同：0
> 
> 时间：2013-03-18T22:23:29.923
> 
> 标签：vb.net, razor, asp.net-mvc-4

我想以以下形式在页面上显示未知数量的复选框：

```
<input type="checkbox"... />
<label for...> 
```

我的数据库表包含有关这些复选框的信息

```
Id
Name 
```

为简单起见，假设它`Id`只是一个整数并且`Name`是一种颜色（“红色”、“绿色”）。

**我怎样才能最好地生成这些盒子？**

我目前的代码是

`Model`

```
Public Property Colours As IEnumerable(Of CheckBox)

Public Sub New()
    Colours = ...
End Sub 
```

`View`

```
@For Each item In Model.Colours
    @Html.CheckBox(item.Text, item.Checked)
    @Html.Label(item.Text, item.Text)
Next 
```

**另外，应该如何使用 CheckBoxList 和 CheckBoxField ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:37:21.890

我会考虑使用扩展来生成复选框列表，而不是手动滚动它，例如：

*   [CheckBoxListFor](http://www.codeproject.com/Articles/292050/CheckBoxList-For-A-missing-MVC-extension#Introduction)
*   [Fabrik.commons](https://github.com/benfoster/Fabrik.Common)
*   [MVC 控件工具包](http://mvccontrolstoolkit.codeplex.com/)

一些同事对以前版本的 MVC Controls Toolkit 有疑问。这只是我的传闻，因为我当时正在做一些不同的事情，但只是想我会提到它以防万一。

回复：“如何使用 CheckBoxList 和 CheckBoxField”，我的看法是：

*   CheckBoxList 用于一组相关选项，您希望人们不选择、选择一个或可能不止一个
*   CheckBoxField 用于当您有一个本质上是/否或真/假的选项时（例如，“勾选我以取消订阅”框）

HTH，弥敦道

# jquery - 为剑道数据源动态更改过滤器值？

> ID：15488095
> 
> 赞同：11
> 
> 时间：2013-03-18T22:23:52.973
> 
> 标签：jquery, filter, grid, kendo-ui, datasource

我希望能够通过一个函数动态更新过滤器值：

```
filter: [{
            "field": "id_person",
            "operator": "eq",
            "value": GetIdPerson()
       }] 
```

和功能：

```
function GetIdPerson() {
     try{
         if (viewModel.get("SelectedMember").id_person > 0) {
            return viewModel.get("SelectedMember").id_person;
         }
     } catch(ex) { }
     return 0;
 } 
```

但是当我调用 datasource.read() 时没有调用该函数。

有没有更好的方法来实现这一点？

或者，如果这是最好的方法，我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T23:52:37.417

有一个用于在数据源中设置（更新）过滤器的内置函数，检查[这个](http://docs.kendoui.com/api/framework/datasource#methods-filter)。所以实际上我不知道你为什么需要这个功能。这样做会更容易：

```
try{
    if (viewModel.get("SelectedMember").id_person > 0) {
        datasource.filter({
           "field": "id_person",
           "operator": "eq",
           "value": viewModel.get("SelectedMember").id_person
        });
    }
} catch(ex) { } 
```

我的意思是，为原始条件定义/应用一个新过滤器，`datasource`哪个条件是您想要的条件。

**但是**当然没有什么能阻止你使用函数来获取过滤器的实际值，你可以这样做：

```
function GetIdPerson() {
    try{
        if (viewModel.get("SelectedMember").id_person > 0) {
            return viewModel.get("SelectedMember").id_person;
        }
    } catch(ex) { }
    return 0;
}
var datasource = new kendo.data.DataSource({
    ...
    schema  : {
        model : {
            fields: {
                ...
            }
        }
    },
    filter: {
        "field": "id_person",
        "operator": "eq",
        "value": GetIdPerson()
   }
}); 
```

和/或

```
datasource.filter({
    "field":    "id_person",
    "operator": "eq",
    "value":    GetIdPerson()
}); 
```

这里的一个例子：http: [//jsfiddle.net/OnaBai/9gnsj/](http://jsfiddle.net/OnaBai/9gnsj/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-11T05:49:31.457

如果您想根据超过字段值进行过滤，您可以使用“和”运算符，否则使用“或”运算符。

现在我正在创建一个动态过滤器。

```
var filter = { logic: "and", filters: [] };
            for(var index=0; index < totalPages; index++){
              filter.filters.push({field: "name", operator: "eq", value: dynamic value here });
            }
dataSource.filter(filter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T12:26:08.257

这对我有用。没有在任何地方记录，但在 gridOptions.dataSource 对象中看到了 _filter 和 _sort 对象，嘿，它工作了。

```
 $http.get(templateUrl).success(function(result) {
            gridOptions.columns = result.columns;
            if (result.filter) {
                gridOptions.dataSource._filter = result.filter;
                gridOptions.dataSource._sort = result.sort;
            }; 
```

# javascript - 使用 webkit 动画限制 CSS 样式重新计算

> ID：15488097
> 
> 赞同：1
> 
> 时间：2013-03-18T22:24:10.627
> 
> 标签：javascript, html, css, webkit, frame-rate

我正在开发一个使用 webkit 动画的项目。这是一个带有 Javascript 和 CSS3 的 HTML 项目。

我尝试在 Chrome 上运行它，它运行良好，但是一旦我在低配置下尝试它，它就会变得越来越慢。所以我激活了 Chrome 的时间线和..惊喜。CSS 样式从一开始就每 2 毫秒重新计算一次！

所以我的问题是，有没有办法将这些计算限制为每秒 40 次计算以释放 CPU 一点点..

我正在使用一些代码来动画所有这些 CPU 功耗：

```
.miniSignal1{
opacity: 0;
position: absolute;
top : 50px;
left :51px;
width : 400px;
height: 400px;
background-image: url("../../FEZ_resources/images/losange.png");
background-size: 100%;
background-position:center;
background-repeat: no-repeat;
overflow: visible;
-webkit-animation-timing-function: cubic-bezier(0, 0, .5, 1);
}       
@-webkit-keyframes rescale1{
    0%  { -webkit-transform : scale( 0 , 0 ); opacity: 1;}
    50%     { opacity: 1;}
    100%        { -webkit-transform : scale( 2.5 , 2.5 ); opacity: 0;}
}
@-webkit-keyframes rescale2{
    0%  { -webkit-transform : scale( 0 , 0 ); opacity: 1;}
    50%     { opacity: 1;}
    100%        { -webkit-transform : scale( 2.5 , 2.5 ); opacity: 0;}
} 
```

这件作品是由 Javascript 发起的

```
function windowLoaded(){
    setTimeout("launchSignal()",4000);
}

function launchSignal(){
$(".miniSignal1").css("-webkit-animation-name", '');
$(".miniSignal1").css("-webkit-animation-duration", '');
$(".miniSignal2").css("-webkit-animation-name", '');
$(".miniSignal2").css("-webkit-animation-duration", '');
$(".miniSignal3").css("-webkit-animation-name", '');
$(".miniSignal3").css("-webkit-animation-duration", '');
$(".miniSignal4").css("-webkit-animation-name", '');
$(".miniSignal4").css("-webkit-animation-duration", '');
if(signal){
    signal = false;
    $(".miniSignal1").css("-webkit-animation-name", 'rescale1');
    $(".miniSignal1").css("-webkit-animation-duration", '1.5s');
    $(".miniSignal2").css("-webkit-animation-name", 'rescale21');
    $(".miniSignal2").css("-webkit-animation-duration", '1.5s');
    $(".miniSignal3").css("-webkit-animation-name", 'rescale31');
    $(".miniSignal3").css("-webkit-animation-duration", '1.5s');
    $(".miniSignal4").css("-webkit-animation-name", 'rescale41');
    $(".miniSignal4").css("-webkit-animation-duration", '1.5s');
}else{
    signal = true;
    $(".miniSignal1").css("-webkit-animation-name", 'rescale2');
    $(".miniSignal1").css("-webkit-animation-duration", '1.5s');
    $(".miniSignal2").css("-webkit-animation-name", 'rescale22');
    $(".miniSignal2").css("-webkit-animation-duration", '1.5s');
    $(".miniSignal3").css("-webkit-animation-name", 'rescale32');
    $(".miniSignal3").css("-webkit-animation-duration", '1.5s');
    $(".miniSignal4").css("-webkit-animation-name", 'rescale42');
    $(".miniSignal4").css("-webkit-animation-duration", '1.5s');
}
timedSignalCount();
} 
```

这就是所有 element.css("",""); 每 2 毫秒重新定义一次样式？

# c++ - 为什么我需要删除[]？

> ID：15488099
> 
> 赞同：45
> 
> 时间：2013-03-18T22:24:21.277
> 
> 标签：c++, memory, memory-management, memory-leaks, delete-operator

可以说我有这样的功能：

```
int main()
{
    char* str = new char[10];

    for(int i=0;i<5;i++)
    {
        //Do stuff with str
    }

    delete[] str;
    return 0;
} 
```

1.  `str`如果我要结束程序，为什么我需要删除？如果我只是要退出，我不会在乎那个记忆是否会进入一个充满独角兽的土地，对吧？

2.  这只是好习惯吗？

3.  它有更深层次的后果吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-19T00:58:01.963

如果实际上您的问题确实是“我有这个微不足道的程序，我可以在它退出之前不释放几个字节吗？” 答案是肯定的，没关系。在任何现代操作系统上都可以。而且程序很简单；这不像你要把它放进心脏起搏器或用这个东西运行丰田凯美瑞的制动系统。如果唯一的客户是你，那么你唯一可能因为马虎而影响的人就是你。

当你开始从这个关于平凡案例的问题的答案中概括到不平凡的案例时，问题就出现了。

因此，让我们就一些非平凡的案例提出两个问题。

> 我有一个长期运行的服务，它以复杂的方式分配和释放内存，可能涉及多个分配器访问多个堆。在正常模式下关闭我的服务是一个复杂且耗时的过程，它涉及确保外部状态（文件、数据库等）始终处于关闭状态。我是否应该确保在关闭之前释放我分配的每个内存字节？

是的，我会告诉你为什么。长时间运行的服务可能发生的最糟糕的事情之一是它意外泄漏内存。随着时间的推移，即使是微小的泄漏也会导致巨大的泄漏。查找和修复内存泄漏的标准技术是检测分配堆，以便在关闭时记录所有已分配但未被释放的资源。除非您喜欢追踪大量误报并在调试器中花费大量时间，否则请*始终释放您的内存*，即使严格来说这样做不是必需的。

用户已经预计关闭服务可能需要*数十亿纳秒*，所以谁在乎您是否对虚拟分配器造成一点额外压力以确保一切都得到清理？这只是您为大型复杂软件支付的价格。而且你并不是一直在关闭服务，所以再一次，谁在乎它是否比它可能慢了几毫秒？

> 我有同样的长期服务。如果我检测到我的内部数据结构之一已损坏，我希望“快速失败”。该程序处于未定义状态，它可能以提升的权限运行，我将假设如果我检测到损坏的状态，那是因为我的服务正受到敌对方的积极攻击。最安全的做法是立即关闭服务。我宁愿让攻击者拒绝为客户提供服务，也不愿冒险让服务继续运行并进一步损害我的用户数据。在这种紧急关闭情况下，我是否应该确保我分配的每个内存字节都被释放？

当然不是。操作系统会为您解决这个问题。如果您的堆损坏，攻击者可能*希望*您释放内存作为他们攻击的一部分。每毫秒都很重要。在你将战术核武器扔到建筑物上之前，你为什么还要费心擦亮门把手和擦厨房呢？

那么问题的答案是“我应该在程序退出之前释放内存吗？” 是“这取决于你的程序做什么”。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-18T22:27:40.150

Yes it is good practice. You should NEVER assume that your OS will take care of your memory deallocation, if you get into this habit, it will screw you later on.

To answer your question, however, upon exiting from the main, the OS frees all memory held by that process, so that includes any threads that you may have spawned or variables allocated. The OS will take care of freeing up that memory for others to use.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-03-18T22:47:31.227

重要提示：`delete`释放内存几乎只是一个副作用。它所做的重要事情是破坏对象。对于 RAII 设计，这可能意味着关闭文件、释放操作系统句柄、终止线程或删除临时文件。

当您的进程退出时，其中一些操作将由操作系统自动处理，但不是全部。

在您的示例中，没有理由不调用`delete`. 但是也没有理由打电话`new`，所以你可以通过这种方式回避这个问题。

```
char str[10]; 
```

或者，您可以通过使用智能指针来回避删除（以及所涉及的异常安全问题）......

因此，通常您应该始终确保正确管理对象的生命周期。

但这并不总是那么容易：[静态初始化顺序失败](http://www.parashift.com/c++-faq/static-init-order-on-first-use.html)的解决方法通常意味着您别无选择，只能依靠操作系统为您清理少数单例类型对象。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-03-18T22:35:48.663

相反的答案：不，这是浪费时间。具有大量已分配数据的程序几乎必须接触每一页，才能将所有分配返回到空闲列表。这会浪费 CPU 时间，为不感兴趣的数据造成内存压力，甚至可能导致进程从磁盘换回页面。只需退出即可将所有内存释放回操作系统，无需任何进一步操作。

（并不是我不同意“是”中的原因，我只是认为两种方式都有争论）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-18T22:29:52.267

Your Operating System should take care of the memory and clean it up when you exit your program, but it is in general good practice to free up any memory you have reserved. I think personally it is best to get into the correct mindset of doing so, as while you are doing simple programs, you are most likely doing so to learn.

Either way, the only way to guaranteed that the memory is freed up is by doing so yourself.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-19T07:35:58.837

`new`并且`delete`是***保留关键字***兄弟。它们应该通过代码块或通过父对象的生命周期相互合作。每当弟弟犯了错误（`new`），哥哥就会想清理（`delete`）它。然后母亲（你的程序）会为他们感到高兴和自豪。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-19T04:34:09.097

我完全同意 Eric Lippert 的出色建议：

> ***那么问题的答案是“我应该在程序退出之前释放内存吗？” 是“这取决于你的程序做什么”。***

这里的其他答案提供了支持和反对两者的论据，但问题的真正症结在于***您的程序做了什么***。考虑一个更重要的示例，其中动态分配的*类型*实例是自定义类，而类析构函数执行一些会产生***副作用***的操作。在这种情况下，内存泄漏与否的争论是微不足道的，更重要的问题是未能调用`delete`这样的类实例将导致未定义的行为。

**[basic.life] 3.8 对象生命周期
第 4 段：**

> 程序可以通过重用对象占用的存储空间或通过显式调用具有非平凡析构函数的类类型对象的析构函数来结束任何对象的生命周期。对于具有非平凡析构函数的类类型的对象，在重用或释放对象占用的存储空间之前，程序不需要显式调用析构函数；但是，**如果没有显式调用析构函数，或者如果没有使用删除表达式 (5.3.5) 来释放存储，则不应隐式调用析构函数，并且任何依赖于析构函数产生的副作用的程序具有未定义的行为。**

所以你的问题的答案就像埃里克所说的***“取决于你的程序做什么”***

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-27T19:29:57.933

我还没有提到的另一个原因是保持静态和动态分析器工具（例如 valgrind 或 Coverity）的输出更干净、更安静。零内存泄漏或零报告问题的干净输出意味着当弹出一个新问题时，更容易检测和修复。

您永远不知道您的简单示例将如何使用或演变。最好从尽可能干净和清脆的开始。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-20T07:28:30.163

这是一个公平的问题，在回答时需要考虑以下几点：

*   一些对象有更复杂的析构函数，它们在被删除时不仅仅释放内存。它们可能还有其他副作用，您*不想*跳过。
*   C++ 标准不保证进程终止时会释放您的内存。（当然在现代操作系统上它会被释放，但如果你在一些奇怪的操作系统上没有这样做，你必须正确地释放你的内存
*   另一方面，在程序退出时运行析构函数实际上会占用相当多的时间，如果所做的只是释放内存（无论如何都会被释放），那么是的，短路是很有意义的然后立即退出。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-03-28T08:48:28.487

更不用说，如果你要申请一份 C++ 程序员的工作，你很有可能因为缺少删除而无法通过面试。首先 - 程序员通常不喜欢任何泄漏（面试中的人肯定会是其中之一），其次 - 大多数公司（至少我工作过的所有公司）都有“不泄漏”政策。通常，您编写的软件应该运行很长一段时间，在旅途中创建和销毁对象。在这样的环境下，泄漏会导致灾难......

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-03-20T08:17:53.010

大多数操作系统会在进程退出时回收内存。例外情况可能包括某些 RTOS、旧的移动设备等。

从绝对意义上说，您的应用程序不会泄漏内存；但是，清理分配的内存是一种很好的做法，即使您*知道*它不会导致真正的泄漏。这个问题是泄漏比没有它们开始更难修复。假设您决定要将 main() 中的功能移动到另一个函数。您最终可能会遇到真正的泄漏。

这也很糟糕，许多开发人员会看到未释放的 'str' 并感到轻微的恶心 :(

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-03-20T09:33:22.167

你得到了很多专业经验的答案。在这里，我说的是一个天真的但我认为是事实的答案。

*   **概括**

    > `3.`它有更深层次的后果吗？

    A：会详细回答。

    > `2.`这只是好习惯吗？

    答：这被认为是一种很好的做法。当您确定不再使用时释放您检索到的资源/内存。

    > 1.  `str`如果我要结束程序， 为什么我需要删除？
    >     如果我只是要退出，我不会在乎那个记忆是否会进入一个充满独角兽的土地，对吧？

    A：你需要**或**不需要，事实上，**你**说出原因。下面有一些解释。

    我认为这取决于。以下是一些假设的问题；术语*程序*可能意味着应用程序或功能。

    > 问：这取决于程序的功能吗？

    A：如果*宇宙毁灭*是可以接受的，那么不。但是，该程序可能无法按预期正常工作，甚至是一个没有完成它应该完成的程序。您可能要认真思考为什么要构建这样的程序？

    > 问：是否取决于程序的复杂程度？

    答：没有。见说明。

    > Q：这取决于对程序稳定性的期望吗？

    - 答：密切。

    我认为这取决于

    1.  程序的*世界*是什么？
    2.  该程序完成其工作的期望如何？
    3.  该程序对他人的关心程度如何，以及它所在的*宇宙？*

        关于术语*Universe*，请参阅解释。

    总而言之，这取决于**您**关心什么。

* * *

*   **解释**

    **重要提示：**如果我们将术语*program*定义为一个函数，那么它的全域就是*application*。省略了很多细节；不过，作为一个理解的想法，它已经足够长了。

    我们可能曾经见过这种说明应用软件和系统软件之间关系的图表。

    ![9RJKM.gif](../Images/24efdf864867d62aa9e18abdcd283f49.png)

    但为了了解其中涵盖的范围，我建议采用相反的布局。由于我们只讨论软件，因此下图中省略了硬件层。

    ![mjLai.jpg](../Images/2019778de5b03eb971881460de13f879.png)

    通过这张图，我们意识到操作系统覆盖了最大的范围，即当前的*宇宙*，有时我们说*环境*。你可以想象整个结构由很多圆盘组成，如图所示，要么是圆柱体，要么是圆环体（球很好，但很难想象）。在这里我要提一下，最外面的操作系统实际上是一个*unibody*，运行时可能是单个或多个不同的实现。

    运行时对操作系统和应用程序负责很重要，但后者更为关键。运行时是应用程序的宇宙，如果它被破坏，所有在其下运行的应用程序都将消失。

    与地球上的人类不同，我们生活在这里，但我们不是由地球组成；如果地球毁灭的时候我们不在，我们仍然会生活在其他合适的环境中。

    但是，当宇宙毁灭时，我们就不再存在，因为我们不仅生活在宇宙中，而且是宇宙的组成部分。

    如上所述，运行时也对操作系统负责。下图中的**左圆圈**可能是它的样子。

    ![ScsZs.jpg](../Images/8a31d8001d8760184e8804e4749bb551.png)

    这很像操作系统中的 C 程序。当应用程序和操作系统之间的关系符合这个时，就和上面操作系统中的运行时情况一样。在此图中，操作系统是应用程序的世界。这里的应用程序应该对操作系统负责的原因是操作系统可能没有虚拟化它们的代码，或者被允许崩溃。如果操作系统总是阻止他们这样做，那么无论应用程序做什么，它都是自我负责的。但是想想**驱动程序**，这是操作系统必须允许崩溃的场景之一，因为这种应用程序被视为**操作系统的一部分**。

    最后，让我们看看上图中的**右边圆圈。**在这种情况下，应用程序本身就是宇宙。有时，我们称这种应用*操作系统*。如果操作系统从不允许加载和运行自定义代码，那么它会自己做所有事情。即使它允许，在自身终止后，内存除了**硬件****无处可**去。所有可能需要的释放都在它被终止之前。

     **那么，您的程序对其他程序的关心程度如何？它对自己的宇宙有多关心？该程序对它完成工作的期望如何？这取决于**你关心什么**。** 

 *** * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-03-26T07:09:58.783

**从技术上讲**，程序员不应该依赖操作系统来做任何事情。操作系统不需要以这种方式回收丢失的内存。

***如果您确实编写了删除所有动态分配内存的代码，那么您将在未来对代码进行校对并让其他人在更大的项目中使用它。***

来源：[分配和 GC 神话](http://www.hpl.hp.com/personal/Hans_Boehm/gc/myths.ps "内存分配神话和半真半假； 分配神话 4")（PostScript 警报！）

```
分配误区 4：非垃圾收集程序应始终
释放他们分配的所有内存。

真相：在频繁执行的代码中省略释放导致
越来越多的泄漏。他们很少被接受。但保留的程序
在程序退出之前分配的最多内存通常在没有
任何干预释放。Malloc 更容易实现，如果
没有免费的。

在大多数情况下，在程序退出之前释放内存是
无意义。无论如何，操作系统都会收回它。自由将触摸和翻页
死物；操作系统不会。

结果：小心计算分配的“泄漏检测器”。
一些“泄漏”是好的！

```

*   我认为在不调用 free/delete 的情况下使用 malloc/new 是一种非常糟糕的做法。

*   如果内存无论如何都会被回收，那么在需要时显式解除分配会有什么危害？

*   也许如果操作系统“回收”内存的速度比免费的快，那么您会看到性能提高；这种技术不会帮助您处理任何必须长时间运行的程序。

***话虽如此，所以我建议您使用免费/删除。***

* * *

***如果你养成了这个习惯，谁能说你有一天会不小心将这种方法应用到重要的地方呢？***

* * *

一个人应该总是在使用完资源后释放资源，无论是文件句柄/内存/互斥体。有了这个习惯，在构建服务器时就不会犯这种错误。一些服务器预计将 24x7 运行。在这些情况下，任何形式的泄漏都意味着您的服务器最终将耗尽该资源并以某种方式挂起/崩溃。一个简短的实用程序，你的泄漏并不是那么糟糕。任何服务器，任何泄漏都是死亡。帮自己一个忙。自己打扫干净。这是一个好习惯。

* * *

```
想想你的“A”类必须解构。如果你不打电话
'a' 上的'delete'，该析构函数不会被调用。通常，这不会
过程是否结束真的很重要。但是如果析构函数
必须释放例如数据库中的对象？将缓存刷新到日志文件？
将内存缓存写回磁盘？**你看，这不仅仅是“好”
练习”删除对象，在某些情况下需要**。

```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-03-25T16:22:31.800

> 如果我要结束程序，为什么我需要删除 str ？

因为不想偷懒...

> 如果我只是要退出，我不会在乎那个记忆是否会进入一个充满独角兽的土地，对吧？

不，我也不关心独角兽的土地。阿尔文之地是另一回事，那我们可以把它们的角剪掉，好好利用它们（我听说它是​​一种很好的壮阳药）。

> 这只是好习惯吗？

这只是一个好习惯。

> 它有更深层次的后果吗？

别人必须在你之后清理。也许你喜欢这样，多年前我从父母的屋檐下搬了出来。

在代码周围放置一个*while(1)*循环结构而不删除。代码复杂度无关紧要。内存泄漏与进程时间有关。

从调试的角度来看，**不释放**系统资源（文件句柄等）可能会导致更严重且难以发现的错误。内存泄漏虽然很重要，但通常更容易诊断（*为什么我不能写入这个文件？*）。如果您开始使用线程，那么糟糕的样式将成为更大的问题。

```
int main()
{

    while(1)
    { 
        char* str = new char[10];

        for(int i=0;i<5;i++)
        {
            //Do stuff with str
        }
    }

    delete[] str;
    return 0;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-03-30T06:52:52.903

我将讨论一般情况，而不是讨论这个特定示例，因此通常显式调用 delete 以释放内存很重要，因为（在 C++ 的情况下）您可能在析构函数中有一些要执行的代码。就像可能将一些数据写入日志文件或向其他进程发送关闭信号等。如果您让操作系统为您释放内存，您的析构函数中的代码将不会被执行。

另一方面，大多数操作系统会在程序结束时释放内存。但是最好自己释放它，就像我在上面给出的析构函数示例一样，操作系统不会调用你的析构函数，这在某些情况下会产生不良行为！

我个人认为依靠操作系统来释放你的内存是不好的做法（即使它会这样做），原因是如果以后你必须将你的代码与更大的程序集成，你将花费数小时来追踪和修复内存泄漏！

所以在离开之前把你的房间打扫干净！**

# ruby-on-rails - “名称”是 Rails 中的保留字吗？

> ID：15488100
> 
> 赞同：2
> 
> 时间：2013-03-18T22:24:23.677
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在开发一个 Rails 4 项目，并且有一个模型，它有一个名为*name*的字段。不幸的是，这似乎是一个保留字。当我覆盖模型的 to_s 方法时，它会给我一个“堆栈级别太深”的错误。这是 to_s 方法：

```
def to_s
    "Category - id: #{id}, name: #{name}, slug: #{slug}"
end 
```

通过反复试验，我发现“名称”字段是问题所在。我不能称一个字段为“名称”吗？我找不到任何关于它的文档，因为搜索“保留的字段名称”会显示一堆随机结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:32:47.933

根据[这个黑名单](http://latheesh.com/2010/02/02/rails-reserved-words/)，它不是保留的。但是，如底部所列，它是许多现代数据库中的保留 sql 名称，因此您可能需要小心。

我使用了属性“名称”并且没有遇到任何问题。如果你想 100% 确定，尤其是在切换数据库时，试试这个：

您可以为 db 列赋予不同的标题，例如“user_name”，并在模型中为该列创建别名：

```
alias_attribute :name, :username
# pattern is :new_title, :actual_db_column_title 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T22:33:42.990

它不是保留的。您必须使用关键字`self`来引用调用该方法的对象。所以你`def to_s`应该是：

```
def to_s
  "Category - id: #{self.id}, name: #{self.name}, slug: #{self.slug}"
end 
```

# python - 在 Python 中查找数组的最低 5 个数字的索引

> ID：15488102
> 
> 赞同：2
> 
> 时间：2013-03-18T22:24:33.640
> 
> 标签：python

如何找出哪些索引属于`x`数组的最低（比如 5）个数？

`[10.18398473, 9.95722384, 9.41220631, 9.42846614, 9.7300549 , 9.69949144, 9.86997862, 10.28299122, 9.97274071, 10.08966867, 9.7]`

另外，如何直接找到排序（从低到高）的最低`x`数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:35:54.633

现有的答案很好，但如果您使用的是以下解决方案`numpy`：

```
mylist = np.array([10.18398473, 9.95722384, 9.41220631, 9.42846614, 9.7300549 , 9.69949144, 9.86997862, 10.28299122, 9.97274071, 10.08966867, 9.7])
x = 5
lowestx = np.argsort(mylist)[:x]
#array([ 2,  3,  5, 10,  4]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T22:27:09.827

你可以这样做：

```
>>> l = [5, 1, 2, 4, 6]
>>> sorted(range(len(l)), key=lambda i: l[i])
[1, 2, 3, 0, 4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T22:29:20.217

```
mylist = [10.18398473, 9.95722384, 9.41220631, 9.42846614, 9.7300549 , 9.69949144, 9.86997862, 10.28299122, 9.97274071, 10.08966867, 9.7]

# lowest 5
lowest = sorted(mylist)[:5]

# indices of lowest 5
lowest_ind = [i for i, v in enumerate(mylist) if v in lowest]

# 5 indices of lowest 5
import operator
lowest_5ind = [i for i, v in sorted(enumerate(mylist), key=operator.itemgetter(1))[:5]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T22:35:39.363

```
[a.index(b) for b in sorted(a)[:5]]
sorted(a)[.x] 
```

# perl - Perl 将 (s)printf 输出附加到字符串

> ID：15488109
> 
> 赞同：7
> 
> 时间：2013-03-18T22:25:11.957
> 
> 标签：perl

我正在解析一些数据并组织它，现在我需要在一个变量中捕获它。

在此之前我从未使用过 printf 或 sprintf 。

我以这样的方式使用 printf 来组织数据：

```
printf("%-30s %18s %18s\n", "$a", "$b", "$c\n"); 
```

现在我有一个存储字符串的变量，我想将组织好的数据附加到变量 $result。

我尝试了类似的东西

```
$result.printf("%-30s %18s %18s\n", "$a", "$b", "$c\n"); 
```

它不起作用。我也试过 sprintf。

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T23:44:17.340

`printf`将构造的字符串输出到指定的句柄（如果省略，则为当前默认值）并返回一个布尔值，指示是否发生 IO 错误。没用。`sprintf`返回构造的字符串，所以你想要这个。

要连接两个字符串（将一个附加到另一个），一个使用`.`运算符 (or `join`)

```
$result . sprintf(...) 
```

但是你说这行不通。大概是因为您还想将生成的字符串存储在 中`$result`，您可以使用

```
$result = $result . sprintf(...); 
```

或更短的

```
$result .= sprintf(...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T22:27:59.290

Don't know what you mean by "tried sprintf too", because there's no reason it would not work if you do it right. Although that syntax you showed does not look much like perl, more like python or ruby?

```
my $foo = sprintf("%-30s %18s %18s\n", "$a", "$b", "$c\n");
$result .= $foo; 
```

# windows - Opera Mobile Emulator for Windows 不再可用？

> ID：15488114
> 
> 赞同：8
> 
> 时间：2013-03-18T22:25:28.343
> 
> 标签：windows, emulation, opera

我希望实施这篇文章中的建议：

[Visual Studio 2012 移动设备模拟器](https://stackoverflow.com/questions/11090294/visual-studio-2012-mobile-device-emulators/11100666#11100666)

但 Opera Mobile Emulator 似乎不再提供 Windows 版本。还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T14:43:39.373

是的，不只是你。

Opera 论坛上的人们[发现](http://my.opera.com/community/forums/topic.dml?id=1639112)了指向 Windows 版本的直接链接： [http ://www.opera.com/download/get.pl?sub=++++&id=35131](http://www.opera.com/download/get.pl?sub=++++&id=35131)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-01T08:27:13.627

考虑到该主题的[文章中的](https://dev.opera.com/articles/opera-mobile-emulator/)[链接](https://www.opera.com/developer/tools/mobile/)没有提及 Opera Mobile Emulator，我得出的结论是不再支持桌面版本。但是，所有主流浏览器的开发者工具中都有内置的移动模拟器。

对于 Opera，这些是访问它的步骤：

*   选择要测试的网页所在的选项卡
*   打开*菜单 > 开发人员 > 开发人员工具*或`CTRL + SHIFT + I`
*   选择左上角的“切换设备工具栏”图标（看起来像平板电脑旁边的手机）
*   从工具栏上的第一个下拉菜单中选择设备。默认情况下它将是“响应式”，或者是最后使用的设备。

在其他主要浏览器上也是[类似的过程](https://www.digitalcitizen.life/emulate-mobile-device-desktop-browser/)，例如 Chrome、Firefox 和 Edge。与物理设备相比，我认为它对于测试布局相当准确。它目前没有像 iPhone 12 这样的最新手机，但您可以通过指定视口高度和宽度来添加自定义设备。

我的理解是每个浏览器都会测试它在自己的移动版本上的表现，这意味着最好在所有支持的浏览器上的开发人员工具上测试它。关于这个主题，MDN 关于[跨浏览器测试](https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Introduction)的文章中有商业测试工具的提示和链接。我的主要收获是进行大量测试，并修复或提供后备解决方案。

# emacs - 当我以 HTML 模式保存文件时，如何阻止 Emacs 启动浏览器？

> ID：15488115
> 
> 赞同：10
> 
> 时间：2013-03-18T22:25:32.103
> 
> 标签：emacs, archlinux, html-mode

当我以 HTML 模式保存文件时，如何阻止 Emacs 24.2 启动浏览器？

刚刚升级了我的 Archlinux 安装。现在，每次我保存一个 html 文件时，我都会得到一个新的 Konquerer 实例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T21:15:13.803

它可能是 html-autoview-mode （一种次要模式）。用 关闭它`M-x html-autoview-mode`。

# codeigniter - codeigniter - 发送电子邮件

> ID：15488122
> 
> 赞同：0
> 
> 时间：2013-03-18T22:25:57.180
> 
> 标签：codeigniter, email, send

我有一个 CRUD “客户”，我添加了一个“电子邮件”按钮，当我点击它时，我想发送一封包含用户名和密码的电子邮件

这是我的按钮

```
$crud->add_action('Email', '', 'pendientes/pendientes_v/enviarmail', 'ui-icon-plus'); 
```

然后是我的**控制器中的功能**

```
function copyrows($id)
    {

    $this->load->model('cliente_model', 'client');

    $clientInfo = $this->client->getInfo($client_id);    

    $this->email->from('myemail@gmail.com', 'Demo'); 
    $this->email->to($clientInfo['email']);  

    $this->email->subject('Email Test'); 
    $this->email->message('Hola tu usuario es ' . $clientInfo['email'] . ' y tu contraseña es ' . $clientInfo['clave']);     

    $this->email->send(); 

    echo $this->email->print_debugger();  
    } 
```

我的模型**cliente_model.php**

```
<?php

    class Cliente_Model extends CI_Model{

    public function getInfo($client_id){
        return array('id' => $cliente_id,'email' => $email,'clave' => $clave);

    }
    } 
```

这里的**错误**

无法使用 PHP mail() 发送电子邮件。您的服务器可能未配置为使用此方法发送邮件。From: "Demo" Return-Path: Reply-To: "myemail@gmail.com" X-Sender: myemail@gmail.com X-Mailer: CodeIgniter X-Priority: 3 (Normal) Message-ID: <51478bcb599c0@gmail .com> Mime 版本：1.0 内容类型：文本/纯文本；charset=utf-8 Content-Transfer-Encoding: 8bit =?utf-8?Q?Email_Test?= Hola tu usuario es y tu contraseña es@​​gmail.com>@gmail.com>@gmail.com>

遇到 PHP 错误 严重性：警告

消息：无法修改标头信息 - 标头已发送（输出开始于 /home/oscar/public_html/crud/system/core/Exceptions.php:185）

文件名：core/Common.php

行号：438

我知道我收到一个空值，但我找不到解决方案，希望有人能帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:36:38.760

我有同样的问题，这是一个地狱，我只使用 php native 修复：

```
mail(); 
```

而不是使用 CI 邮件库

也许它也解决了你的问题

# matlab - 模拟 Yahtzee 游戏的 5 掷骰子

> ID：15488126
> 
> 赞同：1
> 
> 时间：2013-03-18T22:26:14.477
> 
> 标签：matlab, random, dice

我正在尝试为我在 MATLAB 中编写的 Yahtzee 游戏模拟滚动 5 个骰子，但我遇到的问题是我的代码在运行 1000 多次迭代后似乎没有生成任何 yahtzee。我是否使用了一个可以保证 Yahtzee（相同数量的 5 个）被滚动的函数？

```
while rounds<=13
    fprintf('Rolling the dice...\n');
    roll=randi(6,1,5);
    roll=sort(roll);
    fprintf('You rolled:');
    disp(roll);
    rollCount=rollCount+1;

    for x=rule
        if roll==rule{1};
            fprintf('Condition Met');
            break;
        end
    end
    rounds=rounds+1;

end 
```

这基本上只是迭代 13 轮滚动，并根据“rule{1}”检查滚动，该数组包含 [1 1 1 1 1]。获得 3 个，有时是 4 个 1s 似乎没有问题，但我无法获得 5 个。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:50:49.207

正如 Ryan Cavanaugh 指出的那样，没有足够的样本来捕捉想要的结果。我提高了模拟运行 10000 次，它按预期工作。

# scheme - 初学者方案如何将字符串替换为列表？

> ID：15488127
> 
> 赞同：0
> 
> 时间：2013-03-18T22:26:15.693
> 
> 标签：scheme, racket

;; 关联列表 (al) 是

;; 空的或

;; (cons (list kv) alst), 其中

;; k 是一个 nat（密钥），

;; v 是一个字符串（值），并且

;; alst 是一个关联列表 (al)

updatestring 接受一个关联列表、一个数字 (findnum) 和一个字符串 (newstring)，如果关联列表中有一个与 findnum 相同的数字，则它将列表中的字符串替换为 newstring。

```
(check-expect(updatestring empty 3 "hi") (list (list 3 "hi")))
(check-expect(updatestring (list (list 1 "hi")(list 5 "wow")) 5 "new")(list (list 1 "hi")(list 5 "new")))
(check-expect(updatestring (list (list 1 "hi")(list 5 "wow")) 2 "nice")(list (list 2 "nice") (list 1 "hi")(list 5 "wow"))) 
```

我遇到了代码问题，因为这就是我所拥有的。

```
(define (al-update alst akey avalue)
 (cond
  [(empty? alst) (list (list akey avalue))]
  [(= (first(first alst)) akey) (al-update (rest alst) akey avalue)]
  [else (list(list akey avalue alst))])) 
```

问题是我的代码返回

```
(list (list 5 "new" (list (list 1 "hi") (list 5 "wow"))) instead of (list (list 1 "hi") (list 5 "new")) 
```

和

```
(list(list 2 "nice" (list (list 1 "hi") (list 5 "wow")))) instead of (list (list 2 "nice") (list 1 "hi")(list 5 "wow"))) 
```

任何提示和答案将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:01:19.837

您的递归结构需要是这样的：

```
(define (al-update alist akey avalue)
  (if (empty? alist)                                 ; base, end recusion
      '()
       (cons (let ((key+value (first alist)))        ; element, one-by-one
               (if (= ...)
                    ...
                    ...))
             (al-update (rest alist) akey avalue)))) ; recursion 
```

在您的代码中存在许多问题。该`else`子句需要在列表的其余部分上递归。在`=`子句中，您需要进行替换和递归。在上面的代码中，我组合了两个递归子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T19:20:53.833

它说“如果关联列表中有一个与 findnum 相同的数字，那么它将用 newstring 替换列表中的字符串”，但是在您的示例中，如果给定的数字不存在，则将其添加到列表中。

```
(check-expect (updatestring (list (list 1 "hi") (list 5 "wow")) 2 "nice")
              (list (list 2 "nice") (list 1 "hi") (list 5 "wow")))
(check-expect(updatestring empty 3 "hi") (list (list 3 "hi"))) 
```

代码和示例（测试）应该是这些：

```
(define (al-update alst akey avalue)
 (cond
  [(empty? alst) empty]
  [(= (first (first alst)) akey) (cons (list (first (first alst)) avalue)
                                       (al-update (rest alst) akey avalue))]
  [else (cons (first alst) (al-update (rest alst) akey avalue))]))

(check-expect (updatestring empty 3 "hi") empty)
(check-expect (updatestring (list (list 1 "hi") (list 5 "wow")) 5 "new")
              (list (list 1 "hi") (list 5 "new")))
(check-expect (updatestring (list (list 1 "hi") (list 5 "wow")) 2 "nice")
              (list (list 1 "hi") (list 5 "wow")))
(check-expect (updatestring (list (list 1 "hi") (list 5 "wow") (list 2 "bad")) 2 "nice")
              (list (list 1 "hi") (list 5 "wow") (list 2 "nice"))) 
```

顺便说一句，“car”相当于“first”，“cdr”相当于“rest”。

# magento - 防止订阅者保存在观察者 newsletter_subscriber_save_before Magento

> ID：15488128
> 
> 赞同：2
> 
> 时间：2013-03-18T22:26:16.227
> 
> 标签：magento, magento-1.7

我创建了一个 Observer 来监控事件subscriber_save_before。在这个观察者中，我处理了一个新字段，该字段的值被保存，但如果发生一些错误，我希望不保存记录并仅显示我的错误消息。throwException 似乎不能解决问题。我认为唯一可行的方法是强制电子邮件字段为空，但无法实现这一点。在subscriberController.php（法师核心）我有这个：

```
$email = (string) $this->getRequest()->getPost('email');

        try {
            if (!Zend_Validate::is($email, 'EmailAddress')) {
                Mage::throwException($this->__('Please enter a valid email address.'));
            } 
```

这是我的代码（不工作）：

```
 public function NewsletterSaveSubscriber($observer)
{
    $subscriber = $observer->getEvent()->getSubscriber();
    $name = Mage::app()->getRequest()->getParam('subscriber_name');

    // server side validation
    // no name specified
    if (!Zend_Validate::is(trim($name), 'NotEmpty')) {

        $session = Mage::getSingleton('core/session');

        try {
            Mage::throwException(Mage::helper('newsletter')->__('The name field cannot be empty!'));
        } catch (Mage_Core_Exception $e) {
            $session->addException($e, Mage::helper('newsletter')->__('There was a problem: %s', $e->getMessage()));
        }
     $observer->getRequest()->setPost('email', ''); // this code doesn't work
     Mage::app()->getRequest()->setPost('email', ''); // this too 

          // Ohh nooo! The subscriber is stored :-(
        return $this;
    }

    // save the name
    $name = htmlspecialchars($name);
    $subscriber->setSubscriberName($name);
    return $this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T23:00:29.780

这将解决您的问题：

```
//Error Message
$session = Mage::getSingleton('core/session');
$session->getMessages(true);
$session->addError(Mage::helper('cartware_automaticreview')->__('Could´t save.'));  

// Ohh nooo! The subscriber is not stored :)            
$controller = $observer->getControllerAction()->setFlag('',Mage_Core_Controller_Varien_Action::FLAG_NO_DISPATCH,true);
$controller->getResponse()->setRedirect(Mage::app()->getRequest()->getServer('HTTP_REFERER'));
return; 
```

祝你好运！

# ruby-on-rails - 加载carrierwave.gemspec时出现NoMethodError：日期：类的未定义方法“今天”

> ID：15488130
> 
> 赞同：1
> 
> 时间：2013-03-18T22:26:21.627
> 
> 标签：ruby-on-rails, ruby, rubygems, gem, carrierwave

我对 Carrierwave gem 有疑问。

当我运行一些简单的 rake 命令时，系统给出以下错误：

```
 Starting process with command `bundle exec rake jobs:work`
2013-03-18T21:50:07+00:00 app[worker.1]: /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler.rb:343:in `rescue in eval_gemspec': There was a NoMethodError while loading carrierwave.gemspec:  (Bundler::GemspecError)
2013-03-18T21:50:07+00:00 app[worker.1]: undefined method `today' for Date:Class from
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler.rb:332:in `eval_gemspec'
2013-03-18T21:50:07+00:00 app[worker.1]:   /app/vendor/bundle/ruby/1.9.1/bundler/gems/carrierwave-0206f800dc6f/carrierwave.gemspec:12:in `block in <main>'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler.rb:312:in `block in load_gemspec_uncached'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler.rb:307:in `load_gemspec_uncached'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler.rb:297:in `load_gemspec'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/source/git.rb:174:in `load_spec_files'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/lazy_specification.rb:52:in `__materialize__'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/spec_set.rb:85:in `map!'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/source/git.rb:149:in `specs'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler.rb:307:in `chdir'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/source/path.rb:115:in `each'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/source/path.rb:115:in `load_spec_files'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/source/path.rb:116:in `block in load_spec_files'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/spec_set.rb:88:in `block in materialize'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/definition.rb:148:in `requested_specs'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler.rb:120:in `setup'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/setup.rb:17:in `<top (required)>'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/definition.rb:159:in `specs_for'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/environment.rb:18:in `requested_specs'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/source/path.rb:86:in `local_specs'
2013-03-18T21:50:07+00:00 app[worker.1]:    from /app/vendor/bundle/ruby/1.9.1/gems/bundler-1.3.2/lib/bundler/spec_set.rb:85:in `materialize' 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:34:49.267

通过重新安装 Bundler gem 解决。

# vb.net - 程序无法写入新制作的文本文件

> ID：15488133
> 
> 赞同：1
> 
> 时间：2013-03-18T22:26:25.193
> 
> 标签：vb.net, text-files, streamwriter

在其他用户在这个问题中提出了一些很好的论点之后：[*如何写入应用程序内部的文本文件*](https://stackoverflow.com/q/15487006/1392861)，我决定不使用资源文件，而是在文件夹中创建一个文件，然后从那里读/写。

尽管由于某种原因，我似乎无法写入有问题的文件，但它不断抛出异常，告诉我该文件已被另一个进程使用。

这是我用于写入此文件的代码。

```
If System.IO.File.Exists(credentials) Then
                        Dim objWriter As New System.IO.StreamWriter(credentials, False)
                        objWriter.WriteLine(remember)
                        objWriter.Close()
                    Else
                        System.IO.Directory.CreateDirectory(Mid(My.Application.Info.DirectoryPath, 1, 1) & ":\ProgramData\DayZAdminPanel")
                        System.IO.File.Create(credentials)
                        Dim objWriter As New System.IO.StreamWriter(credentials, False)
                        objWriter.WriteLine(remember)
                        objWriter.Close()
                    End If 
```

关于如何写入相关文本文件的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:34:41.573

很有可能您的应用程序的先前迭代未能正确关闭对 StreamWriter 中文件的访问。由于您的构造函数设置为覆盖（而不是附加）到文件，这可能是源。

尝试使用“Using”语句设置您的应用程序以正确打开/关闭文件：

```
If System.IO.File.Exists(credentials) Then

   Using objWriter As StreamWriter = New StreamWriter(credentials, False)
       objWriter.WriteLine(remember)
       objWriter.Close()
   End Using

Else             

   System.IO.Directory.CreateDirectory(Mid(My.Application.Info.DirectoryPath, 1, 1) & ":\ProgramData\DayZAdminPanel")
   System.IO.File.Create(credentials)

   Using objWriter As StreamWriter = New StreamWriter(credentials, False)
       objWriter.WriteLine(remember)
       objWriter.Close()
   End Using

End If 
```

有一个 Using 块和一个 close 语句看起来确实是多余的，但这可以确保即使发生异常也可以访问您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:35:59.100

您正在尝试在公共应用程序数据目录中创建一个目录。这个目录应该使用[Environment](http://msdn.microsoft.com/en-us/library/z8te35sa.aspx)类方法和枚举来找到，因为操作系统之间是不同的。但是，您使用`credentials`文件名的值。我想您希望将数据文件存储在通用应用程序目录中，而不是存储在没有写入数据文件权限的地方（如 C:\program files (x86)）。

然后，为避免文件流未正确关闭的问题，请尝试使用确保正确关闭和处置文件资源的[Using 语句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)（无需在 Using 内调用 close）。

另外，请注意，如果文件不存在或者您希望覆盖以前的内容（为`Append`标志传递 false），StreamWriter 完全能够创建文件。
所以你的代码可以减少到这些行。

```
' Get the common application data directory (could be different from Win7 and XP)
Dim workDir = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData)
' Combine with your own working data directory
workDir = Path.Combine(workdir, "DayZAdminPanel")
' Create if not exists
If Not Directory.Exists(workDir) Then
    Directory.CreateDirectory(workDir)
End If

' Create/Overwrite your data file in a subfolder of the common application data folder
Dim saveFile = Path.Combine(workDir, Path.GetFileName(credentials))
Using objWriter = New System.IO.StreamWriter(saveFile, False)
    objWriter.WriteLine(remember)
End Using 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:32:58.680

`File.Create`返回一个打开的`FileStream`，您应该`StreamWriter`在后续传递给构造函数，而不是再次传递文件名，或者您可以完全省略`File.Create`调用。

您可能想要查看一个`Using`块，`StreamWriter`以便它可以预见地关闭。

# hibernate - 子查询中的 HQL case 语句

> ID：15488134
> 
> 赞同：0
> 
> 时间：2013-03-18T22:26:28.580
> 
> 标签：hibernate, hql

我正在尝试在子查询中使用 case 语句编写 hql 查询。

```
select zr 
from ZipResource zr 
inner join zr.zipInflows zi 
inner join zi.toInstInflows tii 
inner join tii.toInstance ti 
where ti.state = 'COMPLETED' 
and 
ti.completedDate between :dateFrom and 
:dateTill 
and (
case when :units is not null then
( ti.toPrototype.unit in :units) end ) 
order by tii.zipInflow.zipResource.name 
```

做这样的事情是真的吗？在这个查询中，我在 case 语句中得到了 QuerySyntaxException。谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:32:16.237

在你的代码`:units`中可能是一个集合（或类似这样的东西），因为`in`语句需要一个集合，如果没有，它就没有意义。但是在`when`条件`:units is not null`中`:units`必须只有一个值（或`NULL`），如果不是，则语法不正确。

如果你想检查是否`:units`为空，那么你需要第二个参数，例如`:number_of_units`，你检查像

```
and (
   case when :number_of_units != 0 then
   ( ti.toPrototype.unit in :units) end ) 
```

顺便说一句，你的`case`说法是多余的。您可以使用简单的条件来处理它`and`（这是值得推荐的，因为在查找搜索索引时数据库可以更好地处理和条件）：

```
and :number_of_units != 0
and ti.toPrototype.unit in :units 
```

然后还有一个更简单的可能性，因为在 SQL 中`<expression> in (NULL)`计算结果为 false。简单地做

```
and ti.toPrototype.unit in :units 
```

# ios - 为什么我的项目中出现三个“非法配置”错误？

> ID：15488135
> 
> 赞同：1
> 
> 时间：2013-03-18T22:26:29.450
> 
> 标签：ios, objective-c, xcode, uitableview

我有一个项目，其中在自定义单元格原型类（UITableViewCell 的子类）中有三个标签，这些标签链接到自定义单元格的 .h 文件中的三个标签出口。

然后在我的主视图控制器类（它包含原型单元并且是 UITableViewController 的子类）中，与这些标签交互的委托方法如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"ArticleCell";
    ArticleCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    int row = indexPath.row;

    cell.articleTitle.text = self.articleTitles[row];
    cell.articleURL.text = self.articleURLs[row];
    cell.articlePreview.text = self.articleURLs[row];

    return cell;
} 
```

然而我得到了这三个错误：

```
Connection "articleURL" cannot have a prototype object as its destination.
Connection "articlePreview" cannot have a prototype object as its destination.
Connection "articleTitle" cannot have a prototype object as its destination. 
```

我到底做错了什么？我很混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:32:20.423

您可能在项目中错误地连接了标签插座。我假设标签`articleURL`,`articlePreview`和`articleTitle` 是在`UITableViewCell`. 它们应该连接到相应`customTableViewCell`类别中的插座而不是`UIViewController`. 正如您在 中引用`self.articleTitles`的那样`cellForRowAtIndexPath`，它表明您将它们连接为当前类的出口而不是`customTableViewCell`类。最好将您的 customTableCell 定义为当前类的属性，该类已实现 UITableView 的委托。

查看[TableView Programming](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)了解详细信息。

# jquery - 如何调整相册中照片的大小以减少加载时间？

> ID：15488139
> 
> 赞同：0
> 
> 时间：2013-03-18T22:26:36.523
> 
> 标签：jquery, html, css

我在 jquery 中创建了一个照片库，它工作正常，但如果我添加大照片（5mb​​、4300x3000、8mb 或类似的东西）会有很多加载时间。我是一名摄影师，我所有的照片都超过 5-6 mb。这是代码： http: [//jsfiddle.net/EChhQ/4/](http://jsfiddle.net/EChhQ/4/) ...我试图让它在小提琴上工作，但我做不到，但你明白了，fancybox photogallery jquery: html

```
<a class="fancybox-thumbs" data-fancybox-group="thumb" href="img/activitate1/2008.jpg"><img  id="imgredus" src="img/activitate1/2008.jpg" alt="" /></a>
                        <a class="fancybox-thumbs" data-fancybox-group="thumb" href="img/activitate1/2009.jpg"><img id="imgredus" src="img/activitate1/2009.jpg" alt="" /></a>
                        <a class="fancybox-thumbs" data-fancybox-group="thumb" href="img/activitate1/2010.jpg"><img id="imgredus" src="img/activitate1/2010.jpg" alt="" /></a> 
```

css

```
#imgredus{
max-height:130px;
max-width:130px;
padding-right:10px;
padding-top:10px;
}

/*! fancyBox v2.1.4 fancyapps.com | fancyapps.com/fancybox/#license */
.fancybox-wrap,
.fancybox-skin,
.fancybox-outer,
.fancybox-inner,
.fancybox-image,
.fancybox-wrap iframe,
.fancybox-wrap object,
.fancybox-nav,
.fancybox-nav span,
.fancybox-tmp
{
    padding: 0;
    margin: 0;
    border: 0;
    outline: none;
    vertical-align: top;
}

.fancybox-wrap {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 8020;
}

.fancybox-skin {
    position: relative;
    background: #f9f9f9;
    color: #444;
    text-shadow: none;
    -webkit-border-radius: 4px;
       -moz-border-radius: 4px;
            border-radius: 4px;
}

.fancybox-opened {
    z-index: 8030;
}

.fancybox-opened .fancybox-skin {
    -webkit-box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
       -moz-box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
}

.fancybox-outer, .fancybox-inner {
    position: relative;
}

.fancybox-inner {
    overflow: hidden;
}

.fancybox-type-iframe .fancybox-inner {
    -webkit-overflow-scrolling: touch;
}

.fancybox-error {
    color: #444;
    font: 14px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;
    margin: 0;
    padding: 15px;
    white-space: nowrap;
}

.fancybox-image, .fancybox-iframe {
    display: block;
    width: 100%;
    height: 100%;
}

.fancybox-image {
    max-width: 100%;
    max-height: 100%;
}

#fancybox-loading, .fancybox-close, .fancybox-prev span, .fancybox-next span {
    background-image: url('fancybox_sprite.png');
}

#fancybox-loading {
    position: fixed;
    top: 50%;
    left: 50%;
    margin-top: -22px;
    margin-left: -22px;
    background-position: 0 -108px;
    opacity: 0.8;
    cursor: pointer;
    z-index: 8060;
}

#fancybox-loading div {
    width: 44px;
    height: 44px;
    background: url('fancybox_loading.gif') center center no-repeat;
}

.fancybox-close {
    position: absolute;
    top: -18px;
    right: -18px;
    width: 36px;
    height: 36px;
    cursor: pointer;
    z-index: 8040;
}

.fancybox-nav {
    position: absolute;
    top: 0;
    width: 40%;
    height: 100%;
    cursor: pointer;
    text-decoration: none;
    background: transparent url('blank.gif'); /* helps IE */
    -webkit-tap-highlight-color: rgba(0,0,0,0);
    z-index: 8040;
}

.fancybox-prev {
    left: 0;
}

.fancybox-next {
    right: 0;
}

.fancybox-nav span {
    position: absolute;
    top: 50%;
    width: 36px;
    height: 34px;
    margin-top: -18px;
    cursor: pointer;
    z-index: 8040;
    visibility: hidden;
}

.fancybox-prev span {
    left: 10px;
    background-position: 0 -36px;
}

.fancybox-next span {
    right: 10px;
    background-position: 0 -72px;
}

.fancybox-nav:hover span {
    visibility: visible;
}

.fancybox-tmp {
    position: absolute;
    top: -99999px;
    left: -99999px;
    visibility: hidden;
    max-width: 99999px;
    max-height: 99999px;
    overflow: visible !important;
}

/* Overlay helper */

.fancybox-lock {
    overflow: hidden;
}

.fancybox-overlay {
    position: absolute;
    top: 0;
    left: 0;
    overflow: hidden;
    display: none;
    z-index: 8010;
    background: url('fancybox_overlay.png');
}

.fancybox-overlay-fixed {
    position: fixed;
    bottom: 0;
    right: 0;
}

.fancybox-lock .fancybox-overlay {
    overflow: auto;
    overflow-y: scroll;
}

/* Title helper */

.fancybox-title {
    visibility: hidden;
    font: normal 13px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;
    position: relative;
    text-shadow: none;
    z-index: 8050;
}

.fancybox-opened .fancybox-title {
    visibility: visible;
}

.fancybox-title-float-wrap {
    position: absolute;
    bottom: 0;
    right: 50%;
    margin-bottom: -35px;
    z-index: 8050;
    text-align: center;
}

.fancybox-title-float-wrap .child {
    display: inline-block;
    margin-right: -100%;
    padding: 2px 20px;
    background: transparent; /* Fallback for web browsers that doesn't support RGBa */
    background: rgba(0, 0, 0, 0.8);
    -webkit-border-radius: 15px;
       -moz-border-radius: 15px;
            border-radius: 15px;
    text-shadow: 0 1px 2px #222;
    color: #FFF;
    font-weight: bold;
    line-height: 24px;
    white-space: nowrap;
}

.fancybox-title-outside-wrap {
    position: relative;
    margin-top: 10px;
    color: #fff;
}

.fancybox-title-inside-wrap {
    padding-top: 10px;
}

.fancybox-title-over-wrap {
    position: absolute;
    bottom: 0;
    left: 0;
    color: #fff;
    padding: 10px;
    background: #000;
    background: rgba(0, 0, 0, .8);
} 
```

但是您会在 jsfiddle 中找到所有内容。那么我应该改变什么来防止加载时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T22:28:32.540

使用 CSS 调整图像大小不会有任何区别，因为文件将保持相同大小，并且下载到用户浏览器所需的时间也相同。

您唯一能做的就是调整所请求的实际图像文件的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:31:34.630

您的浏览器必须在调整大小之前下载整个图像，减少 css 没有区别，因此您应该手动生成拇指或使用 Photoshop 中的脚本或其他任何东西。

# eclipse - 如何将 angular.js 与 jsdt-jquery 一起使用？

> ID：15488141
> 
> 赞同：1
> 
> 时间：2013-03-18T22:26:53.207
> 
> 标签：eclipse, eclipse-plugin, angularjs, jsdt

在[https://stackoverflow.com/questions/12989859/what-is-the-best-ide-for-angularjs](https://stackoverflow.com/questions/12989859/what-is-the-best-ide-for-angularjs) [Tonte Pouncil](https://stackoverflow.com/users/1743588/tonte-pouncil)提到可以在 jsdt-jquery 中添加 angular.js 作为库。如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T08:48:51.513

如果您安装 [https://github.com/angelozerr/angularjs-eclipse](https://github.com/angelozerr/angularjs-eclipse)，您将受益于

*   AngularjS 的特性，也就是[HTML 编辑器](https://github.com/angelozerr/angularjs-eclipse/wiki/HTML-Features)和[Javascript 编辑器](https://github.com/angelozerr/angularjs-eclipse/wiki/Javascript-Features)中的补全、超链接。
*   [jQuery](https://github.com/angelozerr/tern.java/wiki/Tern-&-jQuery-support)补全，因为 AngularJS Eclipse 是基于 Javascript 推理引擎[tern.js](http://ternjs.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T13:43:12.883

实际上也可以将库添加到 JSDT。我不知道这样的图书馆。但是有 angularjs-eclipse Eclipse 插件，见 [https://github.com/angelozerr/angularjs-eclipse](https://github.com/angelozerr/angularjs-eclipse)

![](../Images/d090c9321126bc63593395ac8b384c5c.png)

![](../Images/71797b68dc4bdfadb9bef1f9b66edac8.png)

# java - 如何在 Java 小程序中使用 html5 本地存储？

> ID：15488150
> 
> 赞同：2
> 
> 时间：2013-03-18T22:27:11.137
> 
> 标签：java, html, applet, local-storage, client-side

在 HTML5 中，使用本地存储将内容存储在客户端计算机上，使它们在页面刷新后持久存在。通常，使用 JavaScript 在客户端进行编程，但 Java 小程序也可以在客户端！因此，我必须问，如何在 Java 小程序中使用本地存储？如果不可能，那么我可以用什么来代替页面刷新之外的持久性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:05:52.653

您可以使用 LiveConnect 调用 JavaScript“HTML5”函数或（自 6u10 起）使用`javax.jnlp.PersistenceService`.

# php - PHP 在 MYSQL 数据库中插入两个重复的行

> ID：15488154
> 
> 赞同：0
> 
> 时间：2013-03-18T22:27:33.050
> 
> 标签：php, html, mysql

我在使用 PHP 和 MYSQL 时遇到问题。我有一个 HTML 表单，提交时运行以下 PHP 脚本。问题是以下 PHP 代码将数据插入数据库两次。我认为这与以下 PHP 而不是数据库有关：

```
<?php

$first_name = $_POST['firstname'];
$last_name = $_POST['lastname'];
$display_name = $_POST['displayname'];
$email = $_POST['email'];
$password = $_POST['password'];
$add_line1 = $_POST['addline1'];
$add_line2 = $_POST['addline2'];
$city = $_POST['city'];
$county = $_POST['county'];
$postcode = $_POST['postcode'];

$sql = "INSERT INTO members (memberID, 
memberPassword, 
memberFirstName, 
memberLastName,
memberAddressLine1, 
memberAddressLine2, 
memberCity,
memberCounty, 
memberPostcode, 
memberDisplayName) 
VALUES ('$email', 
'$password', '$first_name', '$last_name',
 '$add_line1', '$add_line2','$city',
 '$county', '$postcode', '$display_name')";

if (!mysqli_query($conn,$sql))
{
     die('Error: ' . mysqli_error($conn));
}
mysqli_query($conn,$sql);
echo 'Guest Added';
mysqli_close($conn);

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T22:28:29.730

```
if (!mysqli_query($conn,$sql))
{
     die('Error: ' . mysqli_error($conn));
}
mysqli_query($conn,$sql); 
```

You have `mysqli_query($conn,$sql);` in your code twice. Once in the if(), and once outside. Each of these will insert into your database.

The point to note here is that the `mysqli_query` inside the if is evaluated - that is, it is run and the if statement executes on the result of the function call. Thus, you do not need to call it again.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T22:38:09.690

Tushar 指出了双 mysqli 查询，他是对的，除此之外，现在的代码会导致安全问题，因为它允许 sql 注入......

请修改您的代码如下：

```
 $first_name   = mysqli_escape_string($conn, $_POST['firstname']);
 $last_name    = mysqli_escape_string($conn, $_POST['lastname']);
 $display_name = mysqli_escape_string($conn, $_POST['displayname']);
 $email        = mysqli_escape_string($conn, $_POST['email']);
 $password     = mysqli_escape_string($conn, $_POST['password']);
 $add_line1    = mysqli_escape_string($conn, $_POST['addline1']);
 $add_line2    = mysqli_escape_string($conn, $_POST['addline2']);
 $city         = mysqli_escape_string($conn, $_POST['city']);
 $county       = mysqli_escape_string($conn, $_POST['county']);
 $postcode     = mysqli_escape_string($conn, $_POST['postcode']); 
```

# python - Python: TypeError: an integer is required

> ID：15488160
> 
> 赞同：0
> 
> 时间：2013-03-18T22:27:51.900
> 
> 标签：python, md5, hashlib

I am trying to get the md5 checksum of some files and write them into a temp file.

```
import os
import hashlib

PID = str(os.getpid()) 
manifest = open('/temp/tmp/MANIFEST.'+ PID + '.tmp','w') #e.g. MANIFEST.48938.tmp
for elmt in files_input:
    input = open(elmt['file'], "r", 'us-ascii') #'us-ascii' when I ran "file --mime"
    manifest.write(hashlib.md5(input.read()).hexdigest()) 
```

From this I get a Python error that I haven't able to resolve:

```
Traceback (most recent call last):
 File "etpatch.py", line 131, in <module>
    input = open(elmt['file'], "r", 'us-ascii')
TypeError: an integer is required 
```

Some people have had this error from doing "from os import *" but I am not doing this nor am I using import * on any other module.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:30:20.183

的第三个参数应该[`open()`](http://docs.python.org/2/library/functions.html#open)是一个整数：

> ```
> open(name[, mode[, buffering]]) 
> ```
> 
> 可选的缓冲参数指定文件所需的缓冲区大小：0 表示无缓冲，1 表示行缓冲，任何其他正值表示使用（大约）该大小（以字节为单位）的缓冲区。负缓冲意味着使用系统默认值，通常对 tty 设备进行行缓冲，对其他文件进行完全缓冲。如果省略，则使用系统默认值。[2]

# ajax - 如何使用 p:ajax 按顺序更新多个组件

> ID：15488162
> 
> 赞同：4
> 
> 时间：2013-03-18T22:27:57.150
> 
> 标签：ajax, jsf, jsf-2, primefaces

我正在尝试呈现以下 JSF 页面：

```
<h:form id="form" prependId="false">
    <h:panelGrid width="100%">
        <h:panelGroup id="tableDiv" layout="block">
            <h:panelGroup layout="block" style="text-align: center;">
                <p:dataTable id="table" var="_item" 
                        value="#{primeBean.findTableModel()}">
                        ...
                </p:dataTable>
            </h:panelGroup>
        </h:panelGroup>
        <h:panelGrid columns="2" width="100%">
            <h:panelGroup id="barChartDiv" layout="block">
                <p:barChart id="barChart"
                    value="#{primeBean.findCartesianModel()}">
                    <p:ajax event="itemSelect" listener="#{primeBean.handleItemSelect}"
                            update="pieChartDiv,tableDiv" />
                </p:barChart>
            </h:panelGroup>
            <h:panelGroup id="pieChartDiv" layout="block">
                <h:panelGroup layout="block">
                    <p:pieChart id="pieChart">
                        <p:ajax event="itemSelect" listener="#{primeBean.handleItemSelect}" 
                                update="tableDiv" />
                    </p:pieChart>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGrid>
    </h:panelGrid>
</h:form> 
```

当我单击任何栏时`p:barChart`，我希望更新属性中的组件将按照我声明的顺序呈现`(pieChartDiv,tableDiv)`，但它们以相反的顺序呈现`(tableDiv,pieChartDiv)`。

这是正常行为吗？如何按照声明项目的顺序更新组件列表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T13:52:59.090

这是不可能的。组件的搜索和更新顺序与它们在 JSF 组件树中出现的顺序完全相同。

一种方法是重新排列/交换树层次结构中的两个组件，并在 CSS 的帮助下重新定位它们。然而，这相当笨拙。

另一种方法是在第一个组件的更新完成后更新第二个组件（因此实际上最终得到 2 个 ajax 请求而不是 1 个）。您可以[`<p:remoteCommand>`](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)在完成`<p:ajax>`.

所以，而不是

```
<p:ajax ... update="pieChartDiv,tableDiv" /> 
```

采用

```
<p:ajax ... update="pieChartDiv" oncomplete="updateTableDiv()" />
...
<p:remoteCommand name="updateTableDiv" update="tableDiv" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T22:19:07.703

不是那么优雅但可行的解决方案可能是这样的：

```
<p:barChart id="barChart" 
    value="#{primeBean.findCartesianModel()}">
    <p:ajax event="itemSelect" listener="#{primeBean.handleItemSelect}" 
        update="pieChartDiv" /> <!-- This will be updated as first. -->
    <p:ajax event="itemSelect" 
        update="tableDiv" /> <!-- And this will be updated as second. -->
</p:barChart> 
```

# html - Intellij Idea 12 Html 5 支持？

> ID：15488166
> 
> 赞同：0
> 
> 时间：2013-03-18T22:28:10.107
> 
> 标签：html, intellij-idea

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style type="text/css">
        dialog{ display: block; }
    </style>
</head>
<body>
<dialog>
    <dt>Sam</dt>
    <dd>Knock, Knock.</dd>
    <dt>Eric</dt>
    <dd>Who's there?</dd>
    <dt>Sam</dt>
    <dd>Justin.</dd>
    <dt>Eric</dt>
    <dd>Justin who?</dd>
    <dt>Sam</dt>
    <dd>Justin time for dinner!</dd>
</dialog>
</body>
</html> 
```

我相信这对于 HTML 5 文件来说非常好。然而 IntelliJ 抱怨：

> 对话框{显示：块；}

说：

**无效的 CSS 选择器 less... (Ctrl+F1) 此检查检测分配给 CSS 属性的不适当值。例如，无效的测量单位或超出范围的值。**

1) 这不是有效的 HTML5，我错了吗？

2）如果没问题，那么如何阻止 Intellij 抱怨呢？

IntelliJ 认为我必须将样式应用于类或 id。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:37:19.497

该`<dialog>`标记不是有效的 HTML5 标记。它在 2009 年 9 月左右从规范中删除。

# javascript - debugging domjs and highcharts

> ID：15488169
> 
> 赞同：12
> 
> 时间：2013-03-18T22:28:23.070
> 
> 标签：javascript, node.js, svg, highcharts

Ok, so I am attempting to move a fairly complex highcharts rendering script from the front end to server-side processing via nodejs

Its actually gone fairly well. I have "no errors" and the chart is rendering out with the data into svg. The problem is when I go to view the outputted svg in the browser its all messed up. In firebug I get the following "warning":

```
Unexpected value NaN parsing y attribute.
Unexpected value NaN parsing x attribute.
Unexpected value NaN parsing y attribute.
Unexpected value NaN parsing x attribute. 
```

My question is, how can I go about debugging this? I have no idea where the NaN value is being calculated in highcharts source, and get no traditional js errors in the console. What is essentially the same code is currently working fine in an actual browser environment, but is failing when processed with nodejs and domjs, so its likely the issue has to do with that.

Here is my node script:

```
# base libs
{jsdom} = require 'jsdom'
jade    = require 'jade'
fs      = require 'fs'

# chart and settings
Chart               = require './classes/Chart'
Config              = require './config/config.base'
HighchartSettings   = require './config/config.highchart

# curl -d "width=200px&height=100px&device=mobile&resolution=DAILY&type=areaSpline" http://localhost:8000/chart

app.post '/chart', (req, res) ->
    # get post params
    jadeOptions = 
        height  : req.param('height', null)
        width   : req.param('width', null)
    isEnglish   = req.param 'isEnglish', true
    resolution  = req.param 'resolution', null
    chartType   = req.param 'type', null

    device = if req.param('device', 'mobile') is 'mobile' then { mobile : true, tablet : false} else { mobile : false, tablet : true }

    # render dom from jade
    jade.renderFile 'views/chart.jade', jadeOptions, (err, html) ->

        # setup virtual browser
        dom                 = jsdom html
        window              = dom.createWindow()
        {host}              = req.headers
        {document}          = window
        window.console.log  = console.log

        # get localization localization
        window.localization     = Localization isEnglish

        # generate chart settings
        configSettings          = Config device, window.localization
        configSettings          = configSettings[resolution][chartType]
        chartSettings           = HighchartSettings device

        # add jquery
        jsdom.jQueryify window, 'http://'+host+'/jquery.1.7.2.min.js', ->   

            {$} = window

            # add highcharts lib to virtual browser 
            highchartsjs        = document.createElement 'script'
            highchartsjs.type   = 'text/javascript'
            highchartsjs.src    = 'http://'+host+'/highcharts.custom.js'
            highchartsjs.onload = -> 
                {Highcharts} = window

                # don't mess with me, highcharts will cut you!
                Highcharts.setOptions
                    global :
                        useUTC : true

                chartDailyJSONDummy = JSON.parse 'there is real json here, I have removed it for the sake of SO'

                try 
                    chart = new Chart configSettings, chartSettings, chartDailyJSONDummy, Highcharts, ->
                        output = $('#chartWrapper').html()
                        res.setHeader "Content-Type", "text/html"
                        res.write output
                        res.end()
                        console.log 'Chart sent \n'
                catch err 
                    console.log err
                    res.send 'error, see log \n'

            document.body.appendChild highchartsjs 
```

My highcharts configuration as displayed in the console:

```
{ chart: 
   { renderTo: 'chartContainer',
     backgroundColor: 'none',
     events: { load: [Function] },
     animation: false,
     renderer: 'SVG' },
  title: 
   { text: 'Today vs Yesterday',
     style: { color: 'white', fontSize: '17px', lineHeight: '22px' },
     margin: 18,
     y: 18 },
  subtitle: { text: null },
  xAxis: 
   { type: 'datetime',
     labels: { step: 12, formatter: [Function], style: [Object], y: 20 },
     tickInterval: 3600000,
     tickLength: 6,
     tickWidth: 2,
     startOnTick: true,
     endOnTick: true,
     maxPadding: 0 },
  yAxis: 
   [ { title: [Object], labels: [Object] },
     { title: [Object], labels: [Object], linkedTo: 0, opposite: true } ],
  legend: { enabled: false },
  credits: { enabled: false },
  tooltip: { enabled: false },
  plotOptions: 
   { areaspline: 
      { color: '#19b6f4',
        marker: [Object],
        enableMouseTracking: false },
     spline: 
      { color: '#d01b7c',
        marker: [Object],
        enableMouseTracking: false } },
  series: 
   [ { type: 'areaspline', data: [Object], animation: false },
     { type: 'spline', data: [Object], animation: false } ] } 
```

* * *

**UPDATE** Here is a sample of the data that currently appears in `series` as `[Object]`

```
[ [ 1363562100000, 0.358 ],
  [ 1363563000000, 0.498 ],
  [ 1363563900000, 0.241 ],
  [ 1363564800000, 0.211 ],
  [ 1363565700000, 0.426 ],
  [ 1363566600000, 0.58 ],
  [ 1363567500000, 0.195 ],
  [ 1363568400000, 0.217 ],
  [ 1363569300000, 0.185 ],
  [ 1363570200000, 0.19 ],
  [ 1363571100000, 0.223 ],
  [ 1363572000000, 0.18 ],
  [ 1363572900000, 0.164 ],
  [ 1363573800000, 0.188 ],
  [ 1363574700000, 0.16 ],
  [ 1363575600000, 0.166 ],
  [ 1363576500000, 0.188 ],
  [ 1363577400000, 0.154 ],
  [ 1363578300000, 0.162 ],
  [ 1363579200000, 0.1715 ],
  [ 1363580100000, 0.1715 ],
  [ 1363581000000, 0.173 ],
  [ 1363581900000, 0.189 ],
  [ 1363582800000, 0.151 ],
  [ 1363583700000, 0.179 ],
  [ 1363584600000, 0.288 ],
  [ 1363585500000, 0.496 ],
  [ 1363586400000, 0.175 ],
  [ 1363587300000, 0.2 ],
  [ 1363588200000, 0.185 ],
  [ 1363589100000, 0.439 ],
  [ 1363590000000, 1.19 ],
  [ 1363590900000, 0.495 ],
  [ 1363591800000, 0.294 ],
  [ 1363592700000, 0.286 ],
  [ 1363593600000, 0.28 ],
  [ 1363594500000, 0.845 ],
  [ 1363595400000, 2.055 ],
  [ 1363596300000, 2.03 ],
  [ 1363597200000, 1.611 ],
  [ 1363598100000, 1.936 ],
  [ 1363599000000, 1.499 ],
  [ 1363599900000, 1.876 ],
  [ 1363600800000, 1.699 ],
  [ 1363601700000, 1.667 ],
  [ 1363602600000, 1.862 ],
  [ 1363603500000, 1.496 ],
  [ 1363604400000, 2.312 ],
  [ 1363605300000, 2.056 ],
  [ 1363606200000, 0.878 ],
  [ 1363607100000, 1.339 ],
  [ 1363608000000, 0.69 ],
  [ 1363608900000, 1.259 ],
  [ 1363609800000, 0.884 ] ] 
```

* * *

**UPDATE 2** Issue does not seem to be caused by may highcharts configuration, but rather the `jsdom` environment missing some critical component. I suspect this because when using an older copy of highcharts, the problem isn't there, but then again my script is not structured for the older version and the chart renders with missing features.

**2.0.5 WORKS**

**2.2.5 DOES NOT**

project needs to be in 2.2.5

**REALLY I JUST WANT A WAY TO DEBUG THIS**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:29:18.287

我不可能轻松地重现该问题，但这里有一些您可能想要遵循的线索：

Highchart 问题[#1300](https://github.com/highslide-software/highcharts.com/issues/1300)：

> 修复了由于标签的 y 属性为 NaN 而导致导出空图表的错误

[Highsoft 论坛](http://highslide.com/forum/viewtopic.php?f=9&t=21915)上对此进行了一些讨论。

[正如他们的更新日志](http://www.highcharts.com/documentation/changelog)`2.3.5`中所报告的那样，此问题已得到修复。

在大多数情况下，当收到数据时，它似乎是一个警告`null`，所以你确定这个数据被返回了吗？也许您的图表是在返回对象数据之前加载的？我只是在大声思考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:34:14.803

这不是一个解决方案，只是一个提示。

我认为你需要把这个问题分解成一个更小的问题，让它起作用并小心地增加它。他们你会发现事情正在打破你的腿。重新开始并重做，直到发现问题。

# c# - 如何手动创建深拷贝

> ID：15488170
> 
> 赞同：5
> 
> 时间：2013-03-18T22:28:24.250
> 
> 标签：c#, reference, clone, deep-copy

关注本网站：[http ://www.csharp411.com/c-object-clone-wars/](http://www.csharp411.com/c-object-clone-wars/)

我决定手动创建我的课程的深层副本*（在站点 1\. 手动克隆之后）*。我实现了克隆接口和任何必要的属性。我执行了我的程序并检查了我的克隆是否确实与原始实例相同。这是正确的。

但是，我的新实例仍然引用了原始实例。因此，我的副本中的任何更改都会反映到原始实例中。

因此，如果这不会创建深层副本，那又会怎样呢？可能出了什么问题？

（我想手动做一个深拷贝来提高我的性能，所以我不想使用[ObjectCopier](https://stackoverflow.com/questions/78536/deep-cloning-objects-in-c-sharp)类。*（即使它工作得很好，它也会占用我 90% 的代码运行时间）*。

**代码片段：**

类实现：

```
public class SudokuAlgorithmNorvig: ICloneable
{ 
```

克隆方法：

```
 public object Clone()
    {
        SudokuAlgorithmNorvig sudokuClone = new SudokuAlgorithmNorvig(this.BlockRows, this.BlockColumns);

        sudokuClone.IsSucces = this.IsSucces;

        if (this.Grid != null) sudokuClone.Grid = (Field[,])this.Grid;
        if (this.Peers != null) sudokuClone.Peers = (Hashtable)this.Peers;
        if (this.Units != null) sudokuClone.Units = (Hashtable)this.Units;

        return sudokuClone;
    } 
```

克隆方法调用：

```
SudokuAlgorithmNorvig sudokuCopy = (SudokuAlgorithmNorvig)sudoku.Clone() 
```

我在所有其他类中都做了同样的事情（实现和设置克隆方法）。( `Field`+ `Coordinate`)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:34:06.573

看起来您正在整个地方创建对现有对象的引用，而不是创建副本。

您是否将`BlockRows`自`BlockColumns`定义对象传递给新对象？这些只是对现有对象的引用`BlockRows`，`BlockColumns`因此在第一个对象中更改其中一个实例将反映在第二个对象中。

我不知道`Grid`,`Peers`和`Units`代表什么，但这些也很可能是参考。您还需要使所有这些类都可克隆。否则，更改`Grid`SudokuAlgorithmNorvig 类的第一个实例将更改`Grid`第二个实例中的对应项。

# java - Project Build Error in Maven while creating webstart project

> ID：15488176
> 
> 赞同：2
> 
> 时间：2013-03-18T22:28:35.193
> 
> 标签：java, eclipse, maven

I am getting following error while creating java webstart project using maven in eclipse

```
Project build error: Non-resolvable parent POM:Failure to find 
org.jbundle.util.webapp:jbundle-util-webapp-parent:pom:0.7.2 in
http://repo.maven.apache.org/maven2 was cached in local respository,
resolution will not be reattempted until the update interval of central
had elapsed or updates are forced and 'parent.relativePath' points at wrong
local POM. 
```

Please help me I am not able to understand what to do

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T07:11:11.213

```
The parent pom is not found
1.you can try to remove the parent pom (if you don't have any dependency ) 
2.add the parent pom 

<parent>
<groupId>com.test</groupId>
<artifactId>TestProject</artifactId>
<version>1.5.3-RELEASE</version>
</parent>

root
|-- parent-pom
|   |-- branches
|   |-- tags
|   `-- trunk
|       `-- pom.xml
`-- projectA
    |-- branches
    |-- tags
    `-- trunk
        |-- module1
        |   `-- pom.xml
        |-- moduleN
        |   `-- pom.xml
        `-- pom.xml 
```

# c++ - First install of Qt 5 on Windows

> ID：15488178
> 
> 赞同：1
> 
> 时间：2013-03-18T22:28:50.483
> 
> 标签：c++, qt, build

I thought I'd learn something about making graphical programs and downloaded Qt5 with MinGW for Windows from the website. I've done the tutorial as here: [http://qt-project.org/doc/qt-5.0/qtdoc/gettingstartedqt.html](http://qt-project.org/doc/qt-5.0/qtdoc/gettingstartedqt.html)

However, upon building the project the following (likely n00bish thing) happens:

```
:-1: error: cannot find -lqtmaind
:-1: error: cannot find -lQt5Widgetsd
:-1: error: cannot find -lQt5Guid
:-1: error: cannot find -lQt5Cored
:-1: error: cannot find -llibEGLd
:-1: error: cannot find -llibGLESv2d
:-1: error: collect2: ld returned 1 exit status 
```

From what I gather this is probably something to do with how my setup is - although I would have thought downloading with MinGW would have prevented any issue with not having something or something being put in the wrong place. I also have code blocks on my machine and have been compiling .exe's whilst learning C++ without any issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:35:11.880

我需要将 C:\Qt\Qt5.0.1\Tools\MinGW\bin 添加到 PATH 的开头。

# javascript - AngularJS - 在选择标签中使用 ng-repeat 添加了额外的空白选项

> ID：15488181
> 
> 赞同：47
> 
> 时间：2013-03-18T22:28:57.657
> 
> 标签：javascript, select, angularjs

我有一个使用 AngularJS ng-repeat 选择创建的列表框。列表框已正确创建，当我选择其中一项并单击我的按钮时，我将获得该功能并获得所需的信息。

我的html代码如下：

```
<select size="6" ng-model="item" ng-options="s.name for s in itemlist"></select>
<button class="btn tt-btn-blue" ng-model="singleModel" ng-click="onLoadClicked(item.id)">Load</button> 
```

我的问题是，当列表框绘制时，它的顶部有一项是空白的。当我在 Chrome 中运行期间检查列表框时，我在控制台中得到以下输出：

```
<select size="6" ng-model="item" ng-options="s.name for s in itemlist" class="ng-pristine ng-valid">
<option value="?" selected="selected"></option>
<option value="0">Item 1</option>
<option value="1">Item 2</option>
<option value="2">Item 3</option>
<option value="3">Item 4</option>
<option value="4">Item 5</option>
<option value="5">Item 6</option>
</select> 
```

我想知道如何摆脱 ng-repeat 插入的第一个选项。我不想在列表框顶部看到空白区域。我意识到一个选项是将第一个实际选项（值 =“0”）设置为选定项目，但我宁愿没有选定项目开始。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-18T22:32:22.103

每当您`<option value="?" selected="selected"></option>`在选择中看到时，这意味着您`ng-model`被设置为不在`ng-options`. 因此，如果您不想要空白选项，则需要确保`item`将其设置为`itemlist`. 这可能就像在控制器中包含以下内容一样简单：

```
$scope.item = $scope.itemlist[0]; 
```

这会给它一个初始值，然后 Angular 会在之后为你更新它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-22T09:41:35.703

确保隐藏 angular 自动添加的选项的最简单方法是 ng-if 指令。

```
<select ng-options="option.id as option.description for option in Options">
    <option value="" ng-if="false"></option>
</select>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-18T11:48:20.933

经过长时间的 RND，我找到了解决方案 请找到以下代码，它将为您工作。

这是HTML代码

```
<div class="col-xs-3" ng-controller="GetUserADDetails">
            <label>Region</label>
                <select id="DDLRegion" ng-model="selectedregion" class="form-control" ng-change="getBranched(selectedregion)">   
                                <option value="" >--Select Region--</option>                                 
                                <option ng-repeat="region in Regions" value="{{region.LookupID}}">{{region.LookupValue}}</option>
                  </select>
 </div> 
```

这是模块代码

```
var app = angular.module("UserMasterModel", [])
        .controller("GetUserADDetails", function ($scope, $http,$log) {
         $http({
                method: 'GET',
                url: '/UserMaster/GetAllRegion'
            })
            .then(function (response) {
                $scope.Regions = response.data;                        
                //$log.info(response);
            }); 
```

});

# android - how to get message send using GCM?

> ID：15488182
> 
> 赞同：1
> 
> 时间：2013-03-18T22:29:09.107
> 
> 标签：android, notifications, google-cloud-messaging

I want to display notification message in notification area on android. Now this display only application Title. I am looking in logcat but I dont see no System.out ouput from line System.out.println(newMessage);

I have this class:

```
/**
 * Author       : Taufan E.
 * App Name     : The Restaurant App
 * Release Date : October 2012
 */
package com.the.restaurant;

public class Home extends Activity {

    String gcm_regId="";

    static DBHelper dbhelper;
    MainMenuAdapter mma;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

        //GCMRegistrar.unregister(this);
        // Make sure the device has the proper dependencies.
                GCMRegistrar.checkDevice(this);

                // Make sure the manifest was properly set - comment out this line
                // while developing the app, then uncomment it when it's ready.
                //GCMRegistrar.checkManifest(this);

                gcm_regId = GCMRegistrar.getRegistrationId(this);
                if(gcm_regId.equals("")){
                    GCMRegistrar.register(this, Utils.SENDER_ID);
                }
                System.out.println(gcm_regId);

                registerReceiver(mHandleMessageReceiver, new IntentFilter("com.the.restaurant.DISPLAY_MESSAGE"));

        if (!Utils.isNetworkAvailable(Home.this)) {
            Toast.makeText(Home.this, getString(R.string.no_internet), Toast.LENGTH_SHORT).show();
        }

        mma = new MainMenuAdapter(this);
        dbhelper = new DBHelper(this);
        listMainMenu.setAdapter(mma);

    }
    @Override
    protected void onPause(){
        super.onPause();
        unregisterReceiver(mHandleMessageReceiver);
    }

    @Override
    protected void onResume(){
        super.onResume();
        registerReceiver(mHandleMessageReceiver, new IntentFilter("com.the.restaurant.DISPLAY_MESSAGE"));
    }

    private void displayNotification(final Context theContext,String message){
        long when = System.currentTimeMillis();
        int icon = R.drawable.cover_image;

        NotificationManager notificationManager = (NotificationManager)
                theContext.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);

        String title = theContext.getString(R.string.app_name);

        Intent notificationIntent = new Intent();
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(theContext, 0, notificationIntent, 0);
        notification.setLatestEventInfo(theContext, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;

        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification);   
    }

    private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String newMessage = intent.getExtras().getString("rezervare");

            // Waking up mobile if it is sleeping
            WakeLocker.acquire(getApplicationContext());

            /**
             * Take appropriate action on this message
             * depending upon your app requirement
             * For now i am just displaying it on the screen
             * */

            // Showing received message
            //lblMessage.append(newMessage + "\n");
            System.out.println(newMessage);
            Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

            displayNotification(context,newMessage);
            //sendnotification("The Restaurant App","Mesaj");
            //GCMRegistrar.unregister(Reservation.class);
            // Releasing wake lock
            WakeLocker.release();
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:35:55.557

您需要先构建通知：

```
// Pop up Notification
NotificationCompat.Builder mBuilder =  new NotificationCompat.Builder(this)
        .setSmallIcon(R.drawable.ic_launcher)
        .setContentTitle("New Notification Title")
        .setContentText("This is notification content.");
// Creates an explicit intent for an Activity in your app
Intent resultIntent = new Intent(this, ClassToLaunch.class);

// The stack builder object will contain an artificial back stack for the
// started Activity.
// This ensures that navigating backward from the Activity leads out of
// your application to the Home screen.
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
// Adds the back stack for the Intent (but not the Intent itself)
stackBuilder.addParentStack(ClassToLaunch.class);
// Adds the Intent that starts the Activity to the top of the stack
stackBuilder.addNextIntent(resultIntent);
PendingIntent resultPendingIntent =
        stackBuilder.getPendingIntent(
            0,
            PendingIntent.FLAG_UPDATE_CURRENT
        );

mBuilder.setContentIntent(resultPendingIntent);
NotificationManager mNotificationManager =
    (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

mNotificationManager.notify("tag", mBuilder.build()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:54:08.373

根据您的问题，您看不到以下行的输出：

```
 System.out.println(newMessage); 
```

而且你想显示我可以看到的通知将在执行以下方法后显示：

```
 displayNotification(context,newMessage); 
```

**回答：**

您期望执行的代码位于 BroadcastReceiver 的 onReceive 方法下，这意味着当生成特殊意图时将调用此方法 onReceive ，该方法已在您的 onCreate 方法中注册：

```
 registerReceiver(mHandleMessageReceiver, new IntentFilter("com.the.restaurant.DISPLAY_MESSAGE")); 
```

**您可以通过以下方式广播 Intent：**

```
 Intent intent = new Intent();
   intent.setAction("com.the.restaurant.DISPLAY_MESSAGE");
   sendBroadcast(intent);  ///sendBroadcast is a Context (Activity) method 
```

# entity-framework - dynamic entities from entity framework

> ID：15488188
> 
> 赞同：0
> 
> 时间：2013-03-18T22:29:24.990
> 
> 标签：entity-framework

the following query

```
SELECT 
    t.NAME AS TableName,
    p.rows AS RowCounts,
    SUM(a.total_pages) * 8 AS TotalSpaceKB, 
    SUM(a.used_pages) * 8 AS UsedSpaceKB, 
    (SUM(a.total_pages) - SUM(a.used_pages)) * 8 AS UnusedSpaceKB
FROM 
    sys.tables t
INNER JOIN      
    sys.indexes i ON t.OBJECT_ID = i.object_id
INNER JOIN 
    sys.partitions p ON i.object_id = p.OBJECT_ID AND i.index_id = p.index_id
INNER JOIN 
    sys.allocation_units a ON p.partition_id = a.container_id
WHERE 
    t.NAME NOT LIKE 'dt%' 
    AND t.is_ms_shipped = 0
    AND i.OBJECT_ID > 255 
GROUP BY 
    t.Name, p.Rows
ORDER BY 
    t.Name 
```

returns a table that i want to display on the UI from entity framework. As you can see the table cannot be created because it's dynamic.

Can this be done using `Entity Framework`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-10T22:39:59.183

使用 Context.Database.SqlQuery(yoursql) 并使用泛型重载并提供自定义类型。EF 将使用选定的列值填充模型，因此为模型属性提供与列相同的名称（例如 TableName、RowCounts）

# python - 一个属性都是可选的类

> ID：15488191
> 
> 赞同：3
> 
> 时间：2013-03-18T22:29:33.523
> 
> 标签：python, attributes, optional

我创建了一个类，其属性都是可选的。目前，我的代码完全受到`try: ... except AttributeError: ...`块的影响，但我想知道这是否是最好的方法。

我现在正在改变`None`对每个未知属性使用类型的方法，这使我的代码在我看来更好看，但我仍然想知道是否有更好的方法，或者我是否只需要处理带有可选性的测试.

我正在尝试制作 a `Coordinates`，它必须以特殊方式进行修改，并且通常事先不知道，但必须在其他一些实例的帮助下进行计算，这就是为什么这些值必须是可选的。

很高兴听到您的经验和建议。

编辑：

谢谢大家的答案！你们都真的很快......而我很慢，对不起。由于这个话题很抽象，我不得不花一些时间来思考它。我接受你的回答，Ethan 作为解决方案，因为我认为这是我将调查的下一个方向。我将发布一些代码来澄清以下陈述。`__add__`我的-routine的旧代码如下所示：

```
def __add__(self, other):
  """Add the given *masses* and calculate the resulting center of
  gravity. *other* must be a :meth:`putzmeister.Masse` instance or 0.
  """
  if other == 0:
    result = self.copy()
    result.label = None
    return result
  elif not isinstance(other, type(self)):
    raise TypeError('Error: second operand is not a Masse instance')
  mass = self.masse + other.masse
  result = type(self)(masse=mass)
  try:   result.x = (self.x*self.masse + other.x*other.masse)/mass
  except AttributeError: pass
  try:   result.y = (self.y*self.masse + other.y*other.masse)/mass
  except AttributeError: pass
  try:   result.z = (self.z*self.masse + other.z*other.masse)/mass
  except AttributeError: pass
  result._set_categories( self, other, action='add')
  return result 
```

现在看起来像这样：

```
def __add__(self, other):
  """Overwrite operator "+": add the given masses and calculate the resulting center of
  gravity.
  """
  if other == 0:
    result = self.copy()
    result.label = None
    return result
  elif not isinstance(other, type(self)):
    raise TypeError('Error: second operand is not a Masse instance')
  mass = self.masse + other.masse
  result = type(self)(masse=mass)
  for a in ('x','y','z'):
    c1 = getattr(self, a)
    c2 = getattr(other,a)
    if c1 is None or c2 is None: setattr(result, a, None)
    else: setattr(result, a, (c1*self.masse + c2*other.masse)/mass )
  result._set_categories( self, other, action='add')
  return result 
```

None 类型可以作为`<unset state>`. 现在的问题是 0 是所有坐标的有效值，所以我总是必须检查`if attribute is not None`而不是`if attribute`我认为代码所能得到的最好的值。

然而我的梦想是，在作业中，`z = x + y`我的代码将能够首先检查 z 是否存在并且具有正确的类型，然后如果是，它会设置可以通过数学语句导出的 x 和 y 的值（例如y：如果 z 有一些属性并且 x 有相同的属性...）如果 z 不存在，则创建它并设置所有可设置的值。不太确定这样的事情是否可以完成......

再次感谢大家的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:52:19.503

他们真的不需要在那里，还是应该有默认值？无论哪种方式，您似乎已经学会了更好的方法——如果同一个类的所有实例都具有相同的属性，那就更好了。

Using`None`是处理未初始化名称的标准方法，但如果`None`可能作为有效值，您可以自己创建：

```
class UnInit(object):
    """
    No value yet given to this attribute
    """

class Coordinate(object):
    x = UnInit
    y = UnInit
    z = UnInit 
```

# sql-server-2008 - Share Excel file that queries a database

> ID：15488192
> 
> 赞同：2
> 
> 时间：2013-03-18T22:29:38.780
> 
> 标签：sql-server-2008, excel, odbc, excel-2007, excel-2010

I have a read-only file that queries a SQL Server database and will provide the information personalized for the specific user. (Excel identifies the user and then runs the query based on the users id). What I was wondering is if there is a way to share the file without having to setup an ODBC connection for each user?

For right now I have it working for four users, but to get to that point, I had to setup ODBC on each machine. Since the file will eventually have about 60 users I was hoping there was a way for it to query SQL Server without having to setup that many ODBC connections?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:59:08.093

请参阅此处：[无 DSN 连接](http://support.microsoft.com/kb/165866)以获取指南

# .net - 使用 NHibernate 为多个数据库缓存 SessionFactory 和配置

> ID：15488196
> 
> 赞同：6
> 
> 时间：2013-03-18T22:29:52.330
> 
> 标签：.net, sql-server, nhibernate, multiple-databases

StackOverflow 中关于 NHibernate 和多个数据库（动态连接）的一些问题，让我相信最好的解决方案是保留 SessionFactory 的缓存（每个数据库）和一个缓存到 Configuration，以更快地构建 SessionFactory。

我想知道这种方法是否正确，**主要是： SessionFactory 在每个实例的内存消耗和构建时间方面的“权重”是多少？**

**更多关于我的方法：**

已知 1 级和 2 级缓存位于 SessionFactory “领域”中，我们可以假设内存消耗可能与打开的 ISession 的数量有关（包括 1 级缓存）。

对于第二个缓存级别，在我的情况下，数据库共享相同的模式并且有一些通用的只读表，我可以使用全局缓存实现，只在所有 SessionFactories 中共享只读表，这对我的项目来说听起来不错。

**我对吗 ？**使用这种方法可能会遇到什么样的性能和内存问题？考虑一个 Web 应用程序（ASP.NET MVC，而不是 Webforms）访问数百个（或者可能是数千个）数据库，在每个 HTTP 请求上它需要找到用户数据库并解决对它的访问（获取、使用和处置 ISession）。

连接池：那么连接池呢？在这种方法中管理成百上千个数据库的池应该有什么样的行为？与 NHibernate 一起使用的一些当前实现可能会有所帮助，或者我需要构建自己的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:18:11.750

一些测试证实了一些人所说的关于构造 Configuration 和 SessionFactory 的时间和资源（cpu 和内存）的说法，booth 很昂贵，但 SessionFactory 更多，更贵。但是不幸的是，我们只有个人测试，经验结果，就像我的测试一样，取决于我的班级模型。

所以，我一直认为我需要缓存 SessionFactory 和 Configuration，但是如果我们在 Web 解决方案中有数百个数据库，我们就会遇到一个大问题，因为 SessionFactory 需要内存，它是“内存吞噬者”，我可能会在附近遇到 OutOfMemoryException 400 个实例，我预计会达到数千个数据库。

好吧，当我们使用 SQLServer 时，我们设计了一个缓存，每个 SQLServer 实例只有一个 SessionFactory，而不是每个数据库一个，所以在 ConnectionProvider 中，我们可以注入一个 sql 命令`USE 'catalog-name'`，准备每个连接以使其各自的数据库正常工作要求。

我希望其他有同样问题的人也可以从 SQLServer 中探索类似的资源，尽管有些数据库只允许您通过模式名称而不是数据库（目录名称）来做到这一点。

祝你好运。

# php - hash_pbkdf2 没有输出

> ID：15488200
> 
> 赞同：1
> 
> 时间：2013-03-18T22:30:07.027
> 
> 标签：php, hash, passwords, pbkdf2

我正在编写一段 php 代码，但没有给我想要的输出；

```
function passhash($unhashPass){

if(CRYPT_BLOWFISH != 1) {
       throw new Exception("bcrypt not supported in this installation.);
    }
$salt = "test123";
$password = hash_pbkdf2 ("sha256", $unhashPass, $salt, 1, 20);
echo $password;
return $password;
} 
```

当我在散列之前放置 unhashpass 或 salt 的 echo 语句时，它可以工作，但在它什么都不做之后，整个 php 脚本只会给我一个白屏。有人可以帮我:)吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:53:44.940

该功能`hash_pbkdf2()`将在 PHP 5.5 版本中引入，所以我怀疑您安装的 PHP 版本尚不支持该功能。在调用该函数之前，您会测试是否定义了 BCrypt，但该函数`hash_pbkdf2()`（基于密码的密钥派生函数）与 BCrypt 无关。

建议使用 BCrypt 对密码进行哈希处理，但在 PHP 5.5 版中，您可以使用它来`password_hash()`代替。还存在适用于早期版本的[兼容包](https://github.com/ircmaxell/password_compat/blob/master/lib/password.php)。

```
// Hash a new password for storing in the database.
// The function automatically generates a cryptographically safe salt.
$hashToStoreInDb = password_hash($password, PASSWORD_BCRYPT);

// Check if the hash of the entered login password, matches the stored hash.
// The salt and the cost factor will be extracted from $existingHashFromDb.
$isPasswordCorrect = password_verify($password, $existingHashFromDb); 
```

# java - 递归编程调用与动态编程调用

> ID：15488201
> 
> 赞同：2
> 
> 时间：2013-03-18T22:30:06.963
> 
> 标签：java, language-concepts

我正在学习 Java 2 课程并尝试学习，但我不明白这个概念：

*   递归编程调用和动态编程调用有什么区别？

*   每个的例子是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:33:12.927

这两个概念是相当不同的：

*   如果函数调用自身，则称为*递归函数。*

*   动态规划是一种解决问题的技术。它涉及首先解决一个较小的子问题，然后将解决方案扩展到整个问题的解决方案。

动态规划算法通常可以递归表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T23:00:46.317

递归解决方案以自上而下的方式解决问题，而动态解决方案以自下而上的方式解决问题，利用先前预先计算的子问题的最佳解决方案。并非总是可以执行动态规划，您需要确保子问题的最优解也是全局问题的最优解。

一个经典的例子是计算第 n 个斐波那契数：

-递归

```
Fib(n)
  if (n <= 2) return 1
  return Fib(n-1) + Fib(n-2) 
```

-动态的

```
Fib(n)
 previous = 1
 next = 1
 temp = 0
 for i = 2 to n do
   temp = previous
   previous = next
   next = temp + next
 return next 
```

这是一个伪代码，第一个重复调用，第二个基于以前的情况

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T22:39:48.050

“分而治之”概念算法被认为是动态和递归的，例如在列表/数组中排序，您将项目分成两部分并在每个部分中再次调用排序函数......等等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T22:45:18.143

递归代码是调用自身的代码，动态代码是编程然后调用自身的代码。

我需要一些上下文来尝试弄清楚编写这门课程的人想说什么。动态代码可以是递归的，递归代码可以是动态的，所以我发现你的问题的意图令人困惑。

# ruby-on-rails - 将对象作为字符串传递给延迟作业，然后反序列化回对象

> ID：15488203
> 
> 赞同：1
> 
> 时间：2013-03-18T22:30:16.990
> 
> 标签：ruby-on-rails, delayed-job

我开始使用延迟作业 gem，现在我试图延迟对接受对象的方法的调用`{:val=>'my name'}`

我的电话是这样的：

```
User.delay.my_static_method(my_object) 
```

这是不允许的，因为无法将对象保存在数据库中，所以我如何将此对象序列化为字符串以延迟，然后返回到我的方法中的对象？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:46:11.423

如果它们足够小，请尝试 Ruby 的内置序列化[http://www.ruby-doc.org/core-2.0/Marshal.html](http://www.ruby-doc.org/core-2.0/Marshal.html)

如果您有比 更复杂的序列化需求`Marshal`，那么像[http://msgpack.org/](http://msgpack.org/)这样的东西可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:40:57.353

例如，您可以将对象的 ID 传递给您的延迟方法调用。但是在传递给定对象之前将其保存到数据库或文件。

然后在您的 Worker 类代码中，您应该按 ID（如果您将其保存到 DB）或按文件名（如果您将其保存为文件）检索给定的对象。

# asp.net-mvc - 防止部署转换文件

> ID：15488204
> 
> 赞同：1
> 
> 时间：2013-03-18T22:30:19.187
> 
> 标签：asp.net-mvc, asp.net-mvc-4, web-config-transform

我正在使用一个 asp.net mvc web 应用程序，该应用程序使用 web 转换文件来转换 web.config 和其他配置文件。这很好用。

我想做的一个改进是，当应用程序部署到环境中时，所有的转换文件也会被部署，例如。质量保证、开发、生产等

在 Web 转换中，是否有任何简单的方法可以阻止这种情况并确保它们不会被部署？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:25:27.053

我建议使用 Visual Studio 中的发布功能，这只会将转换后的配置文件复制到您的目标目录。一个简化的方案是发布到本地文件夹，然后将文件从那里复制到将使用它们的环境。

要进入 Publish 界面，您可以右键单击 IDE 的菜单部分并包含 Web One Click Publish 工具栏，或者您可以右键单击要发布的项目并从那里单击 Publish 命令。工具栏让您可以灵活地选择要使用的发布配置文件。

# html - 清除两者都摆脱了居中

> ID：15488207
> 
> 赞同：0
> 
> 时间：2013-03-18T22:30:22.627
> 
> 标签：html, css, twitter-bootstrap

我想做的只是将我的 div 居中，这是网页设计中最常见的事情。但由于某种原因，它变成了我参与过的最艰苦的工作。我的内联风格是这样的......

```
<div class="span10" id="about-div" style="margin: 0 auto; clear:both;">
  content
</div>

<div class="span10" id="other-div" style="margin: 0 auto; clear:both;">
  content
</div> 
```

就是这样。它应该可以工作，但不知何故很清楚：两者都破坏了居中。clear:both 是必需的，因为如果省略，我的 div 将自动出现在同一行。我该如何解决？顺便说一句，span10 是一个引导类，意味着我的 div 大约是 720px 宽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:43:52.567

为了让 div 彼此并排出现（并且基于我对 Twitter bootsrap 的了解），您的 div 很可能是浮动的。如果是这种情况，那么居中将变得非常尴尬。浮动和定心不混合。您最好的选择（考虑到您似乎希望将两个 div 恢复为非浮动状态）是执行以下操作：

```
<div class="span10" id="about-div" style="margin: 0 auto; float:none;">
  content
</div>

<div class="span10" id="other-div" style="margin: 0 auto; float:none;">
  content
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:33:29.963

只是一个想法，但你可以试试

```
position:absolute; left:50%; margin-left:-360px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:34:41.003

为什么不在`</br>`每行末尾使用？这将导致中断而不会弄乱浮动。

# r - RApache 服务器下载 *.rhtml 文件，而不是执行它

> ID：15488210
> 
> 赞同：0
> 
> 时间：2013-03-18T22:30:51.243
> 
> 标签：r, handler, rapache, rhtml

我正在使用 RApache 开发一个 R Web 应用程序。

我已经完成了所有应用程序，并且它在我的本地服务器上正常运行。但是当我将它移植到大学的服务器时，我遇到了一个问题：.rhtml 文件，R 脚本在哪里；当我尝试使用链接直接打开时由浏览器下载。我认为我需要在配置文件中添加一些处理程序才能执行此文件而不是下载（在我的本地服务器中我不需要它），但我没有成功搜索。

任何人都可以告诉我处理程序或做什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:01:27.737

您需要设置一个 Directory 指令，指示位于指定目录的 R 脚本将被传递给 brew，结果将显示在您的浏览器中，而不是 html 文件本身。这是通过在 apache2.conf 中添加以下指令来完成的，您可以在其中使用 R 脚本所在的目录更改 /var/www/brew 服务器

```
<Directory /var/www/brew>
    SetHandler r-script
    RHandler brew::brew
</Directory> 
```

# android - 如何使用 XmlObjectParser 和 XmlNamespaceDictionary？（谷歌-http-客户端）

> ID：15488212
> 
> 赞同：1
> 
> 时间：2013-03-18T22:30:56.037
> 
> 标签：android, xml-parsing, google-api-java-client, google-http-client

任何人都可以分享有用的链接或示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:04:27.237

There is a sample for accessing the calendar API, you can find it [here](https://code.google.com/p/google-api-java-client/source/browse/shared/gdata/shared-sample-calendar/?repo=samples&r=fa8cee4b0d29abb1c7c595414f83fd7e6d9fd842).

It is a good starting point on how to roll you own XML mapping and use the google-api-java-client for accessing Google APIs that have not yet migrated to the new infrastructure. Based on this, I am using the google-api-java-client to talk to the Google Contact API.

UPDATE: there is a more recent example in the [samples repo](https://code.google.com/p/google-api-java-client/source/checkout?repo=samples), look for the PicasaClient.java

# html - 用外部样式表覆盖内部样式表，而不编辑 html

> ID：15488215
> 
> 赞同：0
> 
> 时间：2013-03-18T22:31:04.940
> 
> 标签：html, css, stylesheet

我使用 Joomla 2.5，我想覆盖一个模块的功能，该模块的 CSS 实际上嵌入在模块所在的 html 页面的标签中。所以本质上，它使用了一个内部样式表。我想在不编辑 html 的情况下覆盖该样式表，因为我无法编辑 html 页面，因为这些页面是通过 joomla 生成的。

但是，我可以编辑 Joomla 的外部模板样式表来添加样式。所以我的问题是，我如何使用外部样式表来验证内部样式表。

这可能吗？

请举个例子，我会自己填空，因为我精通 CSS 和 html。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:33:50.317

您可以尝试使用 CSS`!important`构造来覆盖内部样式表。

有关示例，请参见[jsFiddle](http://jsfiddle.net/uZKW9/)：

```
<p style="color: red;"> this is a test</p> 
```

如果您将 CSS 指定为

```
p {color: #00ff00 !important;} 
```

# wpf-controls - 从包含 xml 内容的 MemoryStream 返回字符串

> ID：15488218
> 
> 赞同：1
> 
> 时间：2013-03-18T22:31:16.907
> 
> 标签：wpf-controls

为什么我的返回内容总是为空；

```
 using (MemoryStream ms = new MemoryStream())
            {
                StreamWriter sw = new StreamWriter(ms, System.Text.Encoding.GetEncoding(1252));
                XDocument xdoc = new XDocument(root);
                xdoc.Save(sw);

                using (StreamReader sr = new StreamReader(ms, System.Text.Encoding.GetEncoding(1252), true))
                {
                    string content =  sr.ReadToEnd();
                    return content;
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:32:16.923

你应该使用

```
 sw.Flush();
 ms.Position = 0; 
```

重置您的流的起点以便再次阅读它。

# opengl - 使用 glEnable(GL_DEPTH_TEST) 显示不正确

> ID：15488219
> 
> 赞同：5
> 
> 时间：2013-03-18T22:31:19.120
> 
> 标签：opengl, sdl, depth-buffer, depth-testing

我下面的程序必须显示一个用简单灯照亮的旋转立方体。问题是立方体在闪烁。当我撤回调用 glEnable(GL_DEPTH_TEST) 时，立方体没有闪烁，但我可以看到里面的面（这是正常的，因为没有深度测试）。然而，这个电话是必不可少的。所以我不明白为什么这个函数的调用不能正常工作。

这是我的代码：

```
#include <iostream>
#include <SDL/SDL.h>
#include <gl/glut.h>

const static int    WIDTH = 640;
const static int    HEIGHT = 480;

GLfloat angle = 0.0f;

static GLfloat  position[4] = {0.0, 50.0, -50.0, 1.0};
static GLfloat diffuse[3] = {0.64, 0.64, 0.64};
static GLfloat specular[3] = {0.64, 0.64, 0.64};
static GLfloat emissive[3] = {0.0, 0.0, 1.0};

static GLfloat vertices[72] =
{
    1.000000, -1.000000, -1.000000,     //V1
    1.000000, -1.000000, 1.000000,      //V2
    -1.000000, -1.000000, 1.000000,     //V3
    -1.000000, -1.000000, -1.000000,    //V4

    1.000000, 1.000000, -0.999999,      //V5
    -1.000000, 1.000000, -1.000000,     //V8
    -1.000000, 1.000000, 1.000000,      //V7
    0.999999, 1.000000, 1.000001,       //V6

    1.000000, -1.000000, -1.000000,     //V1
    1.000000, 1.000000, -0.999999,      //V5
    0.999999, 1.000000, 1.000001,       //V6
    1.000000, -1.000000, 1.000000,      //V2

    1.000000, -1.000000, 1.000000,      //V2
    0.999999, 1.000000, 1.000001,       //V6
    -1.000000, 1.000000, 1.000000,      //V7
    -1.000000, -1.000000, 1.000000,     //V3

    -1.000000, -1.000000, 1.000000,     //V3
    -1.000000, 1.000000, 1.000000,      //V7
    -1.000000, 1.000000, -1.000000,     //V8
    -1.000000, -1.000000, -1.000000,    //V4

    1.000000, 1.000000, -0.999999,      //V5
    1.000000, -1.000000, -1.000000,     //V1
    -1.000000, -1.000000, -1.000000,    //V4
    -1.000000, 1.000000, -1.000000      //V8
};

static GLfloat normals[72] =
{
    0.000000, -1.000000, 0.000000,
    0.000000, -1.000000, 0.000000,
    0.000000, -1.000000, 0.000000,
    0.000000, -1.000000, 0.000000,

    0.000000, 1.000000, 0.000000,
    0.000000, 1.000000, 0.000000,
    0.000000, 1.000000, 0.000000,
    0.000000, 1.000000, 0.000000,

    1.000000, 0.000000, 0.000000,
    1.000000, 0.000000, 0.000000,
    1.000000, 0.000000, 0.000000,
    1.000000, 0.000000, 0.000000,

    -0.000000, -0.000000, 1.000000,
    -0.000000, -0.000000, 1.000000,
    -0.000000, -0.000000, 1.000000,
    -0.000000, -0.000000, 1.000000,

    -1.000000, -0.000000, -0.000000,
    -1.000000, -0.000000, -0.000000,
    -1.000000, -0.000000, -0.000000,
    -1.000000, -0.000000, -0.000000,

    0.000000, -0.000000, -1.000000,
    0.000000, -0.000000, -1.000000,
    0.000000, -0.000000, -1.000000,
    0.000000, -0.000000, -1.000000
};

static void     eventListener(SDL_Event *pEvent, bool *pContinue)
{
    while (SDL_PollEvent(pEvent))
    {
        switch(pEvent->type)
        {
        case SDL_QUIT:
            *pContinue = false;
            break;
        case SDL_KEYDOWN:
            switch (pEvent->key.keysym.sym)
            {
            case SDLK_ESCAPE:
                *pContinue = false;
                break;
            }
        }
    }
}

static void     beginRender(void)
{
    /*Perspective*/

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glViewport(0, 0, WIDTH, HEIGHT);
    gluPerspective(60.0, (float)(WIDTH/HEIGHT), 0.0f, 1000.0f);
    gluLookAt(0.0f, 0.0, 7.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f);

    /*Clear screen*/

    glClearDepth(1.0f);
    glClearColor(0.13f, 0.12f, 0.13f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    /*Prepare model transformations*/

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    /*Light settings*/

    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);

    /*Depth test*/

    glEnable(GL_DEPTH_TEST);  //PROBLEM COMES FROM HERE
}

static void     renderFrame(void)
{
    /*light position*/

    glLightfv(GL_LIGHT0, GL_POSITION, position);

    /*Model transformations*/

    glPushMatrix();
    glRotatef(angle, 0.0f, 1.0f, 1.0f);

    /*Light materials*/

    glMaterialfv(GL_FRONT, GL_DIFFUSE, diffuse);
    glMaterialfv(GL_FRONT, GL_SPECULAR, specular);
    glMaterialfv(GL_FRONT, GL_EMISSION, emissive);
    glMateriali(GL_FRONT, GL_SHININESS, 10);

    /*Model rendering*/

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);

    glVertexPointer(3, GL_FLOAT, 0, vertices);
    glNormalPointer(GL_FLOAT, 0, normals);

    glDrawArrays(GL_QUADS, 0, 24);

    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY);

    angle += 0.010f;
    glPopMatrix();
}

static void     endRender(void)
{
    glFlush();
    SDL_GL_SwapBuffers();
}

static void     startRendering(void)
{
    bool        continuer = true;
    SDL_Event   event;

    while (continuer)
    {
        eventListener(&event, &continuer);
        beginRender();
        renderFrame();
        endRender();
    }
}

int             main(int ac, char **av)
{
    SDL_Init(SDL_INIT_VIDEO);
    SDL_WM_SetCaption("Test luminosity",NULL);
    SDL_SetVideoMode(WIDTH, HEIGHT, 32, SDL_OPENGL | SDL_DOUBLEBUF);

    startRendering();
    SDL_Quit();
    return (0);
} 
```

这是带有 glEnable(GL_DEPTH_TEST) 的屏幕（面孔在闪烁）

![在此处输入图像描述](../Images/2aa0aad4c0a4021064d7009c5853ecf0.png)

没有这个电话（没有闪烁的显示，但没有深度测试）

![在此处输入图像描述](../Images/79f44a039995dd86d196b4f2066b03d4.png)

我尝试了几种代码组合都没有成功。

有人可以帮助我吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T23:09:34.693

您的近剪裁平面设置不正确，因此您的 Z 缓冲不起作用。

```
gluPerspective(60.0, (float)(WIDTH/HEIGHT), 0.0f, 1000.0f);
                                            ^^^^ 
```

将其设置为合理的距离 - 尽可能远的距离。

另外，不要将相机方向（即视图变换）放入投影矩阵......

最后，请注意，大多数此功能已被弃用，并且在较新版本的 GL 中不再可用。推荐的方法是处理您自己的矩阵计算，并使用可编程管道来渲染几何图形。

# php - 使用 ajaxRequest.open 将变量发送到 php

> ID：15488220
> 
> 赞同：0
> 
> 时间：2013-03-18T22:31:26.947
> 
> 标签：php, javascript, ajax

我有一个使用 ajaxRequest.open 调用 php 脚本的脚本。我想知道如何将变量发送到 php 文件。更具体地说，我有一个表单文本字段，希望能够发送到 php 文件。

ajaxRequest 工作正常，我只需要知道如何发送变量以及 php 如何读取它。

这是调用我的php文件的（非常缩写的）脚本......

```
}
  ajaxRequest.open("GET", "../../ajaxphp.php", true);
  ajaxRequest.send(null); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:36:20.840

将其作为查询字符串附加到请求中：

```
ajaxRequest.open("GET", "../../ajaxphp.php?myvar=thevalue", true); 
```

然后在你的 PHP

```
$myvar = $_GET['myvar']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:55:06.650

首先，您需要获取要发送到 *.php 的变量 witch 的值，您可以通过以下方式完成：

```
var value = document.getElementById("someID").value; 
```

或 jQuery 方式：

```
var value = $("#someID").val(); 
```

然后，您需要将变量放入您的 ajax 请求中：

```
ajaxRequest.open("GET", "../../ajaxphp.php?variable="+value, true);
//The last argument in this line (witch is set a "true") want to say, that is a  asynchronous request 
ajaxRequest.send(null);
//null want to say, that you not sending any parameter, really is automatically sent in the first line of code 
```

然后，当你拿起代码中变量的值 *. php，可以做下一个：

```
<?php
$myVariable = $_GET["variable"];
echo $myVariable;
?> 
```

或者像这样：

```
<?
$myVariable = $_REQUEST["variable"];
echo $$myVariable;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:40:49.260

您可以通过简单地将参数附加到 URL 来发送数据，例如

```
ajaxRequest.open("GET", "../../ajaxphp.php?foo=bar", true); 
```

要使用 javascript 从输入字段中获取值，您可以执行以下操作

```
var foo = document.getElementById('foo').value; 
```

使用 PHP 从 URL 中获取值

```
$foo = $_GET['foo']; 
```

完整示例

```
<input id="foo" name="foo" value="bar">

<script>

    var foo = document.getElementById('foo').value;
    ajaxRequest.open("GET", "../../ajaxphp.php?foo="+foo, true);
    ajaxRequest.send(null);

</script> 
```

PHP 文件

```
<?php

    $foo = $_GET['foo'];
    echo $foo;

?> 
```

# spring - Spring/Neo4J - impermanentGraphDatabase 与事务注释兼容吗？

> ID：15488222
> 
> 赞同：3
> 
> 时间：2013-03-18T22:31:31.877
> 
> 标签：spring, neo4j, spring-transactions, spring-data-neo4j

首先，我确切地说我将 Spring Data 用于 Neo4J 2.2.0-release 和 Scala 2.10。

我正在构建一些测试以测试我的应用程序服务。

这是我按调用顺序排列的不同文件（我准确地说它是一个概念样本，但经过测试）：

**会议服务.scala**

```
@Service
class MeetingServices {

  @Transactional
    def save(meeting: Meeting, creator: User): ValidationNel[MeetingFailure, Meeting] = {
      try {
        meetingRepository.save(meeting, creator).successNel[MeetingFailure]
      } catch {
        case e: Throwable => MeetingFailure("Fail to create the Meeting " + meeting + "for the user :" + creator, Some(e)).failNel[Meeting]
      }
    }
} 
```

**在 MeetingRepository.scala 中保存方法：**

```
def save(meeting: Meeting, creator: User): Meeting = { //no need to declare a transaction since this method call is wrapped inside the previous save() method of MeetingServices 
    creator.participateIn(meeting)                                           
    meeting.creator = creator
    meetingRepository.save(meeting)
} 
```

**User.class 的有趣摘录：**

```
@RelatedTo(`type` = "PARTICIPATES_IN")
  val meetings: java.util.Set[Meeting] = new java.util.HashSet[Meeting]()

def participateIn(meeting: Meeting) = {
    meeting.creator = this   // since bidirectional relation
    meetings.add(meeting)    //#needs_transaction 
} 
```

那么问题出在哪里？：

在生产中，一切正常。交易发生，我的会议持续存在并与其创建者（用户 neo4j-relationship）相关联。但是在我的环境测试中，我得到了这个：`NotInTransactionException`. 为什么 ？因为在用#needs_transaction 注释的行（在上面的摘录中），Relationship 注释需要一个事务，并且听起来在测试期间没有创建事务。

我为 Spring 配置使用了两种不同的 application-context.xml，一种用于我的测试，另一种用于生产中的应用程序。用于测试的一个如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/data/neo4j
       http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <neo4j:config graphDatabaseService="graphDatabaseService"/>

    <bean id="graphDatabaseService" class="org.neo4j.test.ImpermanentGraphDatabase" />

    <neo4j:repositories base-package="repositories"/>

    <context:spring-configured/>

    <context:annotation-config/>
    <context:component-scan base-package="controllers, services, models,repositories"/>

    <tx:annotation-driven mode="aspectj"/>

</beans> 
```

我在生产中使用的那个：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/data/neo4j
       http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <neo4j:config graphDatabaseService="graphDatabaseService"/>
    <bean id="graphDatabaseService" class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">
        <constructor-arg index="0" value="http://myUrl/db/data/"/>
        <constructor-arg index="1" value="111111"/>
        <constructor-arg index="2" value="111111"/>
    </bean>

    <neo4j:repositories base-package="repositories" />

    <context:spring-configured/>

    <context:annotation-config/>
    <context:component-scan base-package="controllers, applicationservices, models,repositories"/>

    <tx:annotation-driven mode="aspectj"/>

</beans> 
```

ImpermanentGraphDatabase 似乎真的不关心 Spring 声明的任何事务......我怎么能这么确定？因为我`application-context.xml`最初是通过生产环境（使用 Neo4j REST 调用）切换到测试，而没有触及我的测试代码中的任何内容，并且一切正常。

我错过了什么？

提前致谢 ：）

**- - - - - - - -编辑 - - - - - -**

实际上，它仅适用于 Noe4j Rest 调用。对于嵌入式数据库或 ImpermanentDatabase，会发生错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:01:47.060

REST API 中没有事务，每个 http 请求都有自己的事务。java-rest-binding 使用 ?Null-Transaction(Manager)`。

您的服务是如何实例化/注入的？以及如何以及在哪里使用它？也许您可以在 github 上分享一个单元测试失败的示例项目？

您的配置看起来是正确的，我认为这与您如何从 Spring 注入服务有关，因此无法正确应用事务方面。

不知道这是否对您有帮助：http: [//www.cakesolutions.net/teamblogs/2012/03/29/neo4j-spring-data-scala/](http://www.cakesolutions.net/teamblogs/2012/03/29/neo4j-spring-data-scala/)

# c#-4.0 - Neo4JClient 性能爬取数据库

> ID：15488223
> 
> 赞同：0
> 
> 时间：2013-03-18T22:31:33.143
> 
> 标签：c#-4.0, neo4jclient

我正在测试 Neo4J 作为我的应用程序数据库（SQL Server 或 Oracle）的搜索数据库。我的意图是爬取 RDBMS 数据库并将可搜索的内容复制到 Neo4J。稍后当用户请求搜索时，我可以使用 Neo4J 的图形搜索功能在我的 RDBMS 数据库中查找记录，方法是在 Neo4J 上执行搜索，这将返回满足搜索条件的主键值。

我使用 Neo4Client 编写了一个小型 C# 应用程序，它从 RDBMS 数据库中读取两个表并创建节点和节点之间的关系。此示例中的两个表是公式标题及其子表，即公式成分。

在一个小型数据库（两个表中约 50 行和约 250 行）上，我的抓取速度非常快。但是使用大型客户数据库（约 550K 和约 6M 行）测试应用程序，爬网速度太慢了。在我用于测试/研究的一些较旧的硬件上，我得到大约 4 行/秒（估计需要 36 小时来爬取 550K 表）。在我较新的开发系统上，我得到了大约 14 行/秒（估计需要 10 个小时来爬取 550K 表）。

我知道 Neo4JClient 驱动程序使用 Neo4J REST 接口，鉴于此类似的[问题](https://stackoverflow.com/questions/10983967/neo4jclient-data-import)，似乎 Neo4J 不适合我的项目。

我考虑过多线程，但我认为这不适合这种情况。我确实打算对这个应用程序进行多线程处理，但不是在被爬取的单个表上。我要爬取的 RDMBS 中的表在逻辑上是相关的，因此是 Neo4J 关系，并且这些表组有几组。我曾计划在每组桌子上旋转一根线。最终，我需要爬取 12 组表中的 75 个表，我认为这种性能水平在生产环境中是不切实际的。

我已经[发布了](http://db.tt/5IbvH7iX)我的示例代码，希望有人能告诉我我正在以一种不太理想的方式做某事。我想知道是否有一种方法可以创建具有索引*和*关系的节点？目前这是一个两步过程，尽管它不会影响我上面提到的性能数字，因为 550K 表的代码不使用关系。我的测试应用程序首先创建头节点（550K 表，这是我上面提到的性能数据所依据的），然后创建成分节点和与头节点的关系。我预计当我测试成分节点的创建时，我的性能数据会更慢。

谢谢！

# mysql - 是什么减慢了 MySQL 表上的索引

> ID：15488227
> 
> 赞同：4
> 
> 时间：2013-03-18T22:31:40.483
> 
> 标签：mysql, indexing, sql-update, sql-insert, sql-delete

所以我查阅了有关 MySQL 中索引的文献，但我仍然对以下内容感到困惑。有人解释说，索引可能会在计算时间方面减慢 MySQL 查询的速度。有人解释说，这是基于在具有所述索引的表上操作的查询，称为 say `index_A`。我知道在某些时候 MySQL 必须重写它的索引文件`INDEX_A`作为在相关表上发生的 UPDATE、INSERT 或 DELETE 查询的结果。我不明白这到底是怎么发生的。必须在每次 UPDATE、INSERT 或 DELETE 之后发生吗？（这似乎不是这种情况。）或者在发出重写之前是否需要执行一定数量的上述操作？（在这种情况下我怎么知道有多少？）或者这是否也取决于用于该表的引擎？基本上，我希望更好地了解可能导致我的索引减慢查询速度的原因，以便在生产中更好地避免这种情况。如果我所问的任何问题不清楚，请告诉我，并感谢您的宝贵时间。

编辑：似乎答案在于更好地理解 Rtrees 和 Btrees。这些是用于管理 MySQL 中各种引擎中的索引的结构。我将进一步审查这些，并希望很快就我的发现发表明确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:57:06.753

是的，它会在每次查询后执行。因此，对于 MyIsam 批量插入，我们可以禁用键并执行所有插入，然后再启用键。请阅读以了解更多[信息](http://dev.mysql.com/doc/refman/5.5/en/optimizing-myisam-bulk-data-loading.html)。（无论如何，这在 innodb 中不可用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T07:52:17.493

我感觉到您对“更新索引”的含义感到困惑。让我通过说您有一张大桌子并给您一些简化的指标来详细说明：

*   如果您`INSERT`（或更新或......）将一百万行放入表中，则需要一百万单位的努力。

*   当你`INSERT`多排一排时，只需要 1 个单位的努力。

“重建索引”需要另外一百万个单位的工作，但这只有在您明确`DROP`和`reCREATE`索引、某些情况下`ALTER TABLE`以及其他一些晦涩的操作时才会发生。

# android - 如何测试您的应用程序被杀死并重新启动？

> ID：15488228
> 
> 赞同：2
> 
> 时间：2013-03-18T22:31:41.290
> 
> 标签：android, activity-lifecycle

我想测试我的应用程序被杀死并在非主要活动中重新启动的情况，假装用户只是恢复了应用程序。有人知道怎么做吗？我没有找到任何想法，因为它们都杀死了应用程序，然后在主要活动中恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:56:28.807

我实际上发现这更方便。您的应用程序在上一个活动中被终止并重新启动，因此只需添加一个调试按钮来调用它：

```
System.exit(0); 
```

如果您想在当前活动中重新启动，只需启动另一个活动，然后立即调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:39:36.093

如果您有 ics 手机（或在模拟器中），只需激活

> 不保留活动

选项。

从[文档](http://developer.android.com/tools/debugging/debugging-devtools.html)：

> 告诉系统在活动停止后立即销毁它（就像 Android 必须回收内存一样）。这对于测试 onSaveInstanceState(Bundle) / onCreate(android.os.Bundle) 代码路径非常有用，否则很难强制执行。由于不保存状态，选择此选项可能会揭示您的应用程序中的许多问题。有关保存活动状态的更多信息，请参阅活动文档。

# php - Bootstrap - 容器流体的对齐问题

> ID：15488231
> 
> 赞同：5
> 
> 时间：2013-03-18T22:32:07.957
> 
> 标签：php, css, twitter-bootstrap

我有一个漫画网站[http://hittingtreeswithsticks.com](http://hittingtreeswithsticks.com)，并希望为我的标题保持 100% 的宽度（因此它在任何浏览器上都拉伸 100%），但我的内容的宽度是固定的（希望保持固定的 950px 宽度）。

因此，我将页眉和页脚`<div class="container-fluid">`以及主要内容放入`<div class="container">`其中来实现这一点。

我一直在 IE9、Chrome 和 FireFox 上以 1920 x 1080 分辨率进行本地测试，并且标题看起来不错。

![在此处输入图像描述](../Images/e360859af4855ba0ad835c0d6a0ba025.png)

但是当我在较小的显示器上进行测试时，1366 x 768，标题项目似乎混合在一起。

![在此处输入图像描述](../Images/f29bf6122d4fcbfcf7d20c92bf0ad2a2.png)

在 header.php 文件中，我为标题徽标和链接设置（简化）

```
<div class="container-fluid">
   <div id="header">
     <div class="row-fluid">
       <div class="span3 offset3">
         <logo>
       </div>
       <div class="span1">
        <comics link>
       </div>
       <div class="span1">
        <about link>
       </div>
      And so on... 
```

在 header.php 中，我放置了一个开口`<div class="container">`，以便包含标题的所有其他模板都在 .php 中`containter`而不是`container-fluid`.

任何想法为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T22:35:01.427

您没有为内容设置最小宽度，因此浏览器会将其“混合”以使其适应较小的分辨率。

您可以尝试使用 CSS 规则，例如

```
#header { min-width: 1000px; } 
```

（1000px 在这里是任意的）。这将防止标题换成两行，但显然会导致它的某些部分超出较小屏幕的可见区域。

**编辑：**如果您提供代码或指向工作页面的链接，我们将能够查看是否存在影响这一点的填充/边距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T09:36:18.753

尝试更改 Comic_style.css 中#header 元素中的溢出属性

```
#header {
background: url("images/SiteDesign/Comic_Header.png") repeat scroll 0 0 transparent;
height: 50px;
overflow: auto;scroll;
} 
```

或者 bootstrap.css 中的 img 标签可能会产生问题

```
img {
    border: 0 none;
    height: auto;
    vertical-align: middle;
} 
```

为标题图像创建另一个标签

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T13:20:00.327

好吧，首先不要在 bootstrap.css 中弄乱任何东西，通过编写新的 css 类或类似的东西来纠正某些东西也不是那么聪明。

换句话说，不要试图通过 css 来解决这个问题，因为你以后会遇到更多问题。

所以我们开始

```
<div class="container-fluid"> 
```

那必须低于而不是顶部。

```
<div id="header"> 
```

你不需要那个 div 除非你想要一个

小心偏移，如果尝试这样的事情：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span3"> 
```

最重要的是请记住，如果您为其他尺寸修复某些东西，那么您必须为其他尺寸做它等等。这意味着您没有响应！

我的建议是尝试使用 div 类的顺序，而不是使用 css。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T23:59:58.843

我查看了您页面上的代码，我相信这可以解决您的问题：

```
<div id="header">
   <div style="width: 950px;margin-left: auto;margin-right: auto;left: 0;right: 0;">
      <a href="./?action=homepage&amp;page=1&amp;site=comics"> <img id="logo" src="./images/SiteDesign/Logo_Small.png" alt="HTwS Logo"> </a> &nbsp;
      <div class="comicsSite" style="display: inline; background-clip: padding-box; padding-bottom: 15px;">  <a href="./?action=homepage&amp;page=1&amp;site=comics"> <img id="comicssubsite" src="./images/SiteDesign/Comics_subsites.png" alt="Comics"> </a> </div>
      <div class="comicsHeadingOffset" style="display: inline; margin: 0;"> <a href="./?action=about&amp;page=1&amp;site=about"> <img id="aboutsubsite" src="./images/SiteDesign/About_subsites.png" alt="About"> </a> </div>
      <div class="comicsHeadingOffset" style="display: inline; margin: 0;"> <a href="./?action=homepage&amp;page=1&amp;site=artwork"> <img id="artworksubsite" src="./images/SiteDesign/Artwork_subsites.png" alt="Artwork"> </a> </div>
   </div>
</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T18:24:59.153

您可以使用 bootstrap nav 元素，而不是使用 spans：

```
 <div class="navbar>
      <div class="navbar-inner">
        <div class="container-fluid">
          <ul class="nav">
    <li><a href="#">Charts</a></li>
    <li><a href="#">Life</a></li>
    <li><a href="#">Office</a></li>
            <li><a href="#">Political</a></li>
            <li><a href="#">Misc</a></li>
      </ul>
     </div>
       </div>
    </div> 
```

# gwt - 使用 GWT TreeViewModel 时无法覆盖 onBrowserEvent

> ID：15488232
> 
> 赞同：1
> 
> 时间：2013-03-18T22:32:13.217
> 
> 标签：gwt, tree, cell

我正在尝试使用 Google web toolkit (v2.5) TreeViewModel 创建一个单元格树，每个单元格有一个可点击的链接。我的树正确显示，但我无法弄清楚单击单元格时如何处理事件。我的类 NeoTreeModel 实现了 TreeViewModel，但是当我在 getNodeInfo 中创建一个 AbstractCell 并尝试覆盖 onBrowserEvent 时，我收到编译错误“方法没有覆盖或实现超类型中的方法”。我不致力于这种方法。我会对任何可以单击按钮或链接树并能够处理事件的解决方案感到满意。我已经尝试了几个小时来完成我认为很容易的事情。

```
public class NeoTreeModel implements TreeViewModel {
  private List<NeoTreeItem>  _items    = null;
  private Logger             _logger   = Logger.getLogger("NeoTreeModel ");

  public NeoTreeModel(List<NeoTreeItem> items) { 
   _items = items;
  }

  public <T> NodeInfo<?> getNodeInfo(T value) {
    List<NeoTreeItem> list = new ArrayList<NeoTreeItem>();

    if (value == null) {
      for (NeoTreeItem nti: _items) if (nti.getLevel() == 0) list.add(nti);
    } else if (value instanceof NeoTreeItem) {
      list = ((NeoTreeItem)value).getChildren();
    } else {
      _logger.log(Level.SEVERE, "Got request for unknown type: " + value);
    }

    ListDataProvider<NeoTreeItem> provider = 
      new ListDataProvider<NeoTreeItem>(list);

    Cell<NeoTreeItem> cell = new AbstractCell<NeoTreeItem>() {

      public void render(Cell.Context context, NeoTreeItem value, 
                 SafeHtmlBuilder sb) {
        if (value != null) {
          sb.appendHtmlConstant("<a href='javascript:;'>");
          sb.appendEscaped(value.getLongName());
          sb.appendHtmlConstant("</a>");
        }       
      }

      @Override
      public void onBrowserEvent(Cell.Context context, Element parent, 
                     NeoTreeItem value, NativeEvent event, 
                     ValueUpdater<NeoTreeItem> valueUpdater) {

          _logger.log(Level.INFO, "HOWDY2");
        }
      }
    };
    return new DefaultNodeInfo<NeoTreeItem>(provider, cell);
  }
  public boolean isLeaf(Object value) {
    boolean result = false;

    if (value instanceof NeoTreeItem) {
      result = ((NeoTreeItem) value).isLeaf();      
    }

    return result;
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:45:11.773

问题出在您的代码上。您使用的 onBrowserEvent 方法的原型与 AbstractCell 中的方法原型不同。原型应该是——

```
public void onBrowserEvent(Cell.Context context, Element parent, NeoTreeItem value, NativeEvent event, ValueUpdater<NeoTreeItem> valueUpdater )
{
} 
```

区别在于 ValueUpdater<NeoTreeItem>。在您的代码中，它是 ValueUpdater< String >

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:17:47.203

好吧，我想我明白了。我读到的关于覆盖 onBrowserEvent 的所有内容都与 CellTable 中的单元格有关，而不是 CellTree。显然，您需要使用选择模型来检测何时选择了 CellTree 单元格。像这样：

```
SingleSelectionModel<NeoTreeItem> _selectionModel = new SingleSelectionModel<NeoTreeItem>();
_selectionModel.addSelectionChangeHandler(new SelectionChangeEvent.Handler() {
    @Override
    public void onSelectionChange(SelectionChangeEvent event) {
      Object object = _selectionModel.getSelectedObject();
      if (object instanceof NeoTreeItem) {
    Window.alert("HOWDY1: " + object.toString());
      }
    }});

   Cell<NeoTreeItem> cell = new AbstractCell<NeoTreeItem>() {

      public void render(Cell.Context context, NeoTreeItem value, 
             SafeHtmlBuilder sb) {
    if (value != null) {
           // blah
      }
    };

    return new DefaultNodeInfo<NeoTreeItem>(provider, cell,
                        _selectionModel, null); 
```

# mysql - 将 varchar/char 转换为枚举

> ID：15488234
> 
> 赞同：2
> 
> 时间：2013-03-18T22:32:17.823
> 
> 标签：mysql, enums, char, varchar

有没有一种快速简便的方法可以将 varchar/char 转换为枚举？我试图这样做，但它不起作用

```
alter table zipcodes add column state_short_enum enum(
    (select state_short from zipcodes group by state_short)
) 
```

我收到此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use near 
'(select state_short from zipcodes group by state_short))' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:50:27.820

枚举值必须是文字，因此您不能使用用户变量或标量子查询。可能您必须将`ALTER`语句创建为字符串。

例子：

```
SET @codes := CONCAT((SELECT GROUP_CONCAT(CONCAT("'", state_short, "'")) FROM zipcodes), "'");
SET @alter_sql := CONCAT('ALTER TABLE `zipcodes` ADD `state_short_enum` ENUM(', @codes, ')');
PREPARE stmt FROM @alter_sql;
EXECUTE stmt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T04:18:30.973

我知道，这已经是过时的问题，但我在尝试解决类似问题时发现了它。在 MySQL 8.0 之前的版本中，有一个' [procedure analyze](https://dev.mysql.com/doc/refman/5.7/en/procedure-analyse.html) '，它很容易使用：

```
select * from t procedure analyse()\G 
```

它在“Optimal_fieldtype”列中为您提供最佳字段类型。你可以直接在 alter 中使用这个结果：

```
alter table t change column col1 enum(...) not null; 
```

当然，在进行更改之前应采取所有预防措施（进行备份，确保在更改期间保持在表上的锁不会破坏正常活动）。

# java - 使用安卓 getIdentifier()

> ID：15488238
> 
> 赞同：63
> 
> 时间：2013-03-18T22:32:24.887
> 
> 标签：java, android

我试过这个：

```
r = Resources.getSystem().getIdentifier("ball_red","drawable","com.Juggle2");
Log.i("FindBall","R = "+r); 
```

还有这个：

```
r = Resources.getSystem().getIdentifier("com.Juggle2:drawable/ball_red", null, null); 
```

但 'r' 总是以零结束。

我从一个不是 Activity 并且不扩展任何东西的辅助类内部调用这一行，所以我不能简单地调用`getResources()`，但我可以从我的`SurfaceView`.

最终，我想`"ball_red"`用一个变量替换，但首先是第一件事。这是行不通的。

`com.Juggle2`确实是我的包名。`drawable`是`res`它所在的文件夹，并且文件名确实是`ball_red`.

R.java 说：

```
 public static final int ball_red=0x7f020027; 
```

所以我不确定为什么它不起作用。

* * *

所以我不能使用资源，我必须传递一个上下文，我这样做是这样的：在里面：

```
class Collection extends SurfaceView implements SurfaceHolder.Callback { 
```

我正在为我的类创建一个新实例并将其`getContext()`作为参数传递。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-03-18T22:39:13.440

由于您在活动中，因此编写就足够了

```
int resId = YourActivity.this.getResources().getIdentifier(
    "ball_red",
    "drawable",
    YourActivity.this.getPackageName()
); 
```

或者如果你不是从内部类调用它

```
int resourceID = getResources().getIdentifier(
    "ball_red",
    "drawable",
    getPackageName()
); 
```

**笔记**

```
getIdentifier() Returns 0 if no such resource was found. (0 is not a valid resource ID.) 
```

**查看**

还要检查你的 R.java 是否有一个`drawable`名字`ball_red`

**例如：**

```
public static final class drawable {
        public static final int ball_red = 0x7f020000;
 } 
```

**编辑** 如果您没有参加任何活动，那么您必须通过 a`context instead of resources as parameter`然后执行此操作

```
int resId = context.getResources().getIdentifier(
    "ball_red",
    "drawable",
    context.getPackageName()
); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-26T10:17:10.920

对于 Xamarin 用户，我遇到了一个问题，即我添加了一个带有大小写字母的图标（例如 iconVaccine.png ）并且指的是大写名称 iconVaccine。

Xamarin 将允许您执行此操作（即使您不应该这样做），但是当应用程序被编译时，名称将被展平为小写，因此您必须引用小写变体，如下所示：

```
Image Name: iconVaccine.png

Xamarin reference: iconVaccine (as created in Resource.designer.cs, but will fail)

Correct Reference: iconvaccine 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-31T18:01:12.910

虽然 Festus Tamakloe 的回答是正确的，但我发现这个函数有一个怪癖。

如果您`string-array`在 xml 文件中声明 a ，则必须通过调用基本资源类型来访问它`array`，使用`string-array`结果为 anid 0 返回。

# php - 将图像文件插入 MySQL 数据库

> ID：15488239
> 
> 赞同：2
> 
> 时间：2013-03-18T22:32:27.907
> 
> 标签：php, mysql, image, insert, jpeg

我正在为音乐家开发一个社交网络类型的网站，该网站在 phpMyAdmin 上使用 MySql 数据库。我在网站将图像文件插入数据库然后显示它们（用于个人资料图片）时遇到问题。图像在数据库中存储为 LONGBLOB。

如果我直接通过phpMyAdmin添加图片，效果很好。它是根据数据库以 LONGBLOB 数据类型存储为 .bin 的 .jpg。在我的网站上，我可以使用以下方法完美地查询和显示它：

```
<img src="data:image/jpeg;base64,<?php echo base64_encode($memberpicture);?>" 
ALT="Member does not have picture" WIDTH=100 HEIGHT=100></img> 
```

但是，如果网站用户使用网站的“创建个人资料”功能创建个人资料并将图像作为个人资料图片插入，则不会显示在他们的个人资料上。这是选择图像代码：

```
...
<div class="control-group">
    <div class="controls">
        <label>Band Picture</label>
        <input type="file" name="picture"/>
    </div>
</div>
... 
```

这是插入代码：

```
<?php
    session_start();
    foreach($_POST AS $key => $val) {
    $_SESSION[$key]=$val;
}

mysql_connect("***", "***", "***");
mysql_select_db("musicians");

//...declare other values(name, bio, etc...
$cpicture=$_POST['picture'];
$cpicture = stripslashes($cpicture);
$cpicture = mysql_real_escape_string($cpicture);

$profileInsert="INSERT INTO profile(PROFILE_BANDNAME,PROFILE_GENRE,PROFILE_BANDBIO,
    PROFILE_PICTURE,PROFILE_ART,PROFILE_MUSICVIDEO,PROFILE_PLAYLIST)
    VALUES ('$cbandname','$cgenre','$cbio','$cpicture','$cart','$cvideo','$cplaylist')"
or die(mysql_error()); 
```

如果我查看数据库，插入后有一个文件，但它非常小（大约 16 个字节），无法在网站上或直接从数据库中查看。根据数据库，它是以 LONGBLOB 数据类型存储为 .bin 的 .bin，而不是存储为 .bin 的 .jpg。对此插入的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:25:37.530

不确定这是否会有所不同，但是当我在 google 上搜索时，您的保存代码看起来与前几个结果不同：

[http://www.php-mysql-tutorial.com/wikis/mysql-tutorials/uploading-files-to-mysql-database.aspx](http://www.php-mysql-tutorial.com/wikis/mysql-tutorials/uploading-files-to-mysql-database.aspx) [http://mirificampress.com/permalink/saving_a_file_into_mysql](http://mirificampress.com/permalink/saving_a_file_into_mysql) [http://bytes.com/主题/php/insights/740327-uploading-files-into-mysql-database-using-php](http://bytes.com/topic/php/insights/740327-uploading-files-into-mysql-database-using-php)

也许只是尝试代码交换。

我会在这里回应有关仅使用文件系统的其他评论/答案。但是，如果您只是想让它像您在某些回复中提到的那样工作，只需从另一个站点复制一些工作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:42:25.267

我认为问题出在 MySql Server Networking 中。检查配置中的 max_allowed_pa​​cket :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:39:40.390

使用文件系统可能会更好，但是如果您坚持按照自己的方式进行操作，因为您的代码似乎不在表单中，因此没有方法或提交按钮，这是如何工作的？

# forms - 引导形式混淆

> ID：15488241
> 
> 赞同：0
> 
> 时间：2013-03-18T22:32:28.943
> 
> 标签：forms, twitter-bootstrap

我不太了解以下内容：

1.  “for=inputEmail”中的“for”指的是什么？
2.  “id”中的“inputEmail”是引导程序特定的名称，还是可以将其更改为我想要的任何名称？有点像改变班级或身份证？一样？

谢谢大家！

```
<form class="form-horizontal">
  <div class="control-group">
    <label class="control-label" for="inputEmail">Email</label>
   <div class="controls">
  <input type="text" id="inputEmail" placeholder="Email">
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:33:57.553

1.  `label for`将标签与输入相关联，以便单击标签聚焦输入，屏幕阅读器可以适当地阅读内容。

2.  在`id`您的控制之下；这不是一个特殊的 Bootstrap 名称。注意 the`label for`和 the`input id`必须匹配，所以如果你改变一个，你也应该改变另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:33:26.200

那是指您的文本输入 id `inputEmail`。它让浏览器知道该标签用于什么输入。

如果您要单击该标签，您的焦点将放在该文本输入上。

另外，是的，该 id 完全取决于您，只需确保`for`标签中的`id`与输入中的匹配！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:38:40.070

可以使用`for`属性将标签绑定到元素。`for`如果标签中的`id`属性与输入中的属性匹配，我认为这不会有问题。

# json - 将 JSON 对象值分配给变量

> ID：15488245
> 
> 赞同：1
> 
> 时间：2013-03-18T22:32:45.027
> 
> 标签：json, angularjs, variable-assignment

我正在尝试从 JSON 对象中提取某个名称/值对并将其分配给一个变量。

我的对象的样本

```
{"new":[{"id":"185","title":"new time","slug":"new-time","time":"1363641168","text":"all done","deletetime":null}] 
```

我正在尝试将时间分配给时间戳变量，以便以后在我的 AngularJS 应用程序中使用。无论如何，我尝试，它返回为*undefined*。

```
$scope.news = data.new["time"]; 
```

访问时间价值的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:57:51.410

new 是 JavaScript 中的关键字，因此您将无法在属性访问表示法中使用它。考虑将数据中的新元素重命名为“newItems”或其他名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:38:02.723

"new" 是一个数组，所以第一项的时间属性是：

```
data.new[0].time 
```

# java - 如何在java中以线程安全的方式进行迭代器循环

> ID：15488256
> 
> 赞同：1
> 
> 时间：2013-03-18T22:33:37.580
> 
> 标签：java, iterator, concurrentmodification

我正在制作一个分发任务的程序。我有这样的通信器对象的arraylist：

```
ArrayList<Workers> 
```

我正在处理一个文件，将它分成固定大小的块并分派给各个工人。我正在使用迭代器将块均匀地传递给工人。通常有比工人更多的块，所以我需要在我的工人周围循环。我该怎么做，我当前的解决方案使用这样的迭代器。

```
 private Worker getNextWorker() {
    if (workerIterator == null)
        workerIterator = workers.iterator();

    if (!workerIterator.hasNext())
        workerIterator = workers.iterator();

    return workerIterator.next();
} 
```

我同步了方法以及方法修改了arraylist，但这并不安全，因为另一个线程可以进入并修改迭代器调用之间的集合。因此，我同步了整个文件拆分过程，使其成为一个大的原子语句。

1）我错过了什么吗？

2）是否有另一种，也许更好的方法可以围绕功能进行循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:46:52.673

我建议您不要重新发明轮子并为此目的`BlockingQueue`结合使用。`ThreadPoolExecutor`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:30:40.273

您可以启动工作线程（没有执行程序），并让它们`take`从有界阻塞队列中获取元素。当您读取文件时，您会`put`在队列中分块。当队列已满时，调用`put`将阻塞，直到工作人员从队列中取出一项任务。如果队列为空，则工作人员将等待，直到将任务放入队列。完成处理后，您可以`interrupt`使用工作线程。

或者，您可以使用[`ThreadPoolExecutor`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)带有有[界阻塞队列](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/LinkedBlockingQueue.html)的 a和`CallerRunsPolicy`. 这样，如果队列未满，任务将被提交执行。如果队列已满，调用者线程将执行任务（这为工作人员提供了处理时间）。使用这种方法，您最多将拥有`number_of_threads+queue_capacity`块，但在主线程正在处理时，一些工作线程可能处于空闲状态。

# ruby - 正则表达式从邮件标头中提取边界和内容类型

> ID：15488266
> 
> 赞同：0
> 
> 时间：2013-03-18T22:34:19.367
> 
> 标签：ruby, regex

我正在使用解析服务，当收到电子邮件时，我们会得到以下标头字符串：

```
Message-ID: <4f2c2c98.1007650a.68f6.ffff9ed6@mx.google.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="----=_NextPart_000_00EB_01CCE26A.183F8AD0"
X-Mailer: Microsoft Office Outlook 12.0 
```

不幸的是，我在正则表达式方面很弱，想知道如何提取边界和内容类型以最终得到：

```
[:content_type] => multipart/mixed
[:boundary] => ----=_NextPart_000_00EB_01CCE26A.183F8AD0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:42:07.373

此正则表达式将匹配文本：

`/Type:\s{0,}(.*?);\sboundary=\"(.*?)\"/`

请注意所需数据的两个捕获组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-21T20:45:51.483

根据[允许的字符](https://stackoverflow.com/a/147467/4863726)，正则表达式将是这样的。

```
boundary=\"?([a-zA-Z0-9'\(\)+_,-.\/:=? ]*)(?<! )\"? 
```

# jquery - 无法使用 JQuery 显示隐藏的 DIV

> ID：15488267
> 
> 赞同：0
> 
> 时间：2013-03-18T22:34:21.850
> 
> 标签：jquery, css, wordpress, html

当您单击“RSVP”链接时，我试图模仿[此网站上的效果。](http://www.jennyandgrayden.com/)该效果是一个隐藏的 DIV 效果，如果您单击 RSVP 链接，主菜单将下来并显示隐藏的 DIV。

这是[我的网站](http://mktietheknot.com)。

我试图准确地复制 div 和 JQuery 的结构，但到目前为止还没有运气。RSVP 链接所做的只是向上滚动网站，但我需要它来将标题向下推，以便显示其他 div。我将所有 ID 与 JQuery 匹配，所以我不知所措。我是 JQuery 的初学者，所以我不确定是否需要更改任何内容。这是调用 JQuery 的 Header.php。抱歉，这是我第一次使用 Stack，所以我不知道我是否应该粘贴我所有的源代码。

如果您使用 firebug 禁用 'top:-115px;' css 行你应该能够看到应该出现的内容：

```
#header {top: -115px !important;} 
```

此外，值得一提的是，这是一个 wordpress 主题，因此结构由 .php 页面组成。

```
....    
<!--Jquery-->
<script type="text/javascript" src="http://mktietheknot.com/wp-content/themes/Retro/js/copycat/default.js"></script>
</head>

<body <?php body_class(); ?>>

<!-- BEGIN HEADER -->
<div id="header" class="open" style="top: 0px;">
<div class="wrap">
<div id="rsvp">
        <div class="inside">
        <h1 style="font-family: 'Arvo'; display:block;">RSVP</h1>
            <form id="rsvp-form" action="/wp-content/themes/Retro/rsvp-process.php" method="post">
                <div class="another-wrap">
                <div class="input-wrap">
                        <label for="name">Your Name:</label>
                        <input class="text" name="name" id="name" type="text">
                        </div>

                        <div class="input-wrap">
                        <label for="guest-names">Name of Guest(s): <span class="fineprint">optional</span></label>
                        <input class="text" name="guest-names" id="guest-names" type="text">
                        </div>

                        <div class="input-wrap">
                        <label for="number-attending"># Attending:</label>
                        <input class="text" name="number-attending" id="number-attending" type="text">
                        </div>

                        <input class="submit" name="submit" value="Submit" type="submit">
                    </div>
                    <p><span style="color:#000000;">For any question please Email: </span>
            <a href="mailto:test@gmail.com">test@gmail.com</a></p>
        </form>
            <a href="#rsvp" class="rsvp-link">Close</a>
        </div>
</div><!--EndRSVP-->

<div class="section_inn" align="center"><!--NotOriginal-->
    <div id="menu">
        <ul id="nav" class="nav">
            <li class="first">
            <a href="<?php echo home_url(); ?>/#about_section">
            <?php echo retro_filter( get_theme_option('about_label') ); ?></a>
            </li>
            <li class="second">
            <a href="<?php echo home_url(); ?>/#portfolio_section">
            <?php echo retro_filter( get_theme_option('portfolio_label') ); ?></a>
            </li>
            <li class="third">
            <a href="<?php echo home_url(); ?>/#blog_section">
            <?php echo retro_filter( get_theme_option('blog_label') ); ?></a>
            </li>
            <li id="nav-rsvp" class="last">
            <a href="#rsvp">RSVP</a>
            </li>
        </ul>

    <div class="clr"></div>

    <?php if ( get_theme_option('logo') ) : ?>

    <!-- Logo -->
    <div id="top_logo">
    <a href="<?php echo home_url(); ?>/#home_section">
    <img src="<?php echo get_theme_option('logo'); ?>" alt="" /></a>
    </div>

    <?php endif; ?>

    <div class="clr"></div>
    </div><!--EndMenu-->
</div><!--EndSectionInn-->
</div><!--EndWrap-->
</div><!--EndHeader--> 
```

这是 JQuery 本身：

```
$(document).ready(function() {

jQuery.timer = function(time,func,callback){
var a = {timer:setTimeout(func,time),callback:null}
if(typeof(callback) == 'function'){a.callback = callback;}
return a;
};

jQuery.clearTimer = function(a){
clearTimeout(a.timer);
if(typeof(a.callback) == 'function'){a.callback();};
return this;
};

// RSVP Form Submit
$('#rsvp .submit').click(function(){
  $('#rsvp .submit').hide();
});
$(function(){
  $("#rsvp-form").submit(function(){
  dataString = $("#rsvp-form").serialize();
  $('#rsvp-form .error').remove()
  //var form_html = $("#rsvp-form");
  //console.debug(form_html);
  //$('#rsvp-form').fadeOut();

  $.ajax({
    type: "POST",
    url: "http://mktietheknot.com/wp-content/themes/Retro/rsvp-process.php",
    data: dataString,
    dataType: "json",
    success: function(data) {
      if ( data.status == 'pass' ) {
        $('#rsvp-form').fadeOut(function(){

          $('#rsvp-form').html('<div class="rsvp-received">' +data.response+ '</div>').fadeIn(1000);

        });

        myTimer = $.timer(2500,function(){

          $('#rsvp .rsvp-link').click();

        });

      }
      else {

        $('#rsvp-form').append('<div class="error">' +data.response+ '</div>');
        $('#rsvp .submit').fadeIn('500');
        console.debug(data);

      }
    }
  });

  return false;            

  });
});

  $(function() {
      $('ul.nav a').bind('click',function(event){
      var $anchor = $(this);

      $('html, body').stop().animate({
          scrollTop: $($anchor.attr('href')).offset().top
      }, 1500,'easeInOutExpo');
      /*
      if you don't want to use the easing effects:
      $('html, body').stop().animate({
          scrollTop: $($anchor.attr('href')).offset().top
      }, 1000);
      */
      event.preventDefault();
  });
  });

  $('#nav-rsvp a').unbind();
  $('#nav-rsvp a, .rsvp-link').click(function(){
  if ( $('#header').hasClass('open') ) {
  $('#header').animate({
  top: '-=115'
  }, 750, 'easeInOutCubic');
  $('#header').removeClass('open');
} 
else {
  $('#header').animate({
  top: '+=115'
  }, 750, 'easeInOutCubic');
  $('#header').addClass('open'); 
}
return false;
  });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:39:03.930

Wordpress 与 jQuery 没有冲突。您需要更改 jQuery 以允许这样做。看看这个：

[jQuery Uncaught TypeError: Property '$' of object [object Window] is not a function](https://stackoverflow.com/questions/10807200/jquery-uncaught-typeerror-property-of-object-object-window-is-not-a-funct)。

这至少应该让你指出正确的方向。除此之外，您需要在 default.js 文件之前声明 jQuery 库。它目前在您的 WP 页脚中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:39:07.183

首先，恭喜订婚。

其次，您开始在 default.js 文件中使用 jquery 内容，但直到页面底部才包含 jquery。

将 jquery 放在顶部，在您的 default.js 文件上方。

编辑：用这个包装你的 default.js 文件的内容

```
(function($){
    //stuff goes here
})(jQuery); 
```

由于该`jQuery`对象仍然可用，我们围绕您的代码创建一个函数，并将 jQuery 作为`$`.

# java - 不能在 Eclipse 中将 JAR 添加到我的 Java 项目并在 Git 中看到它

> ID：15488274
> 
> 赞同：1
> 
> 时间：2013-03-18T22:35:49.137
> 
> 标签：java, eclipse, macos, apache-poi

我是 Java 新手。我有一个项目，并且有一个外部 JAR 文件 (Apache POI) 我想添加到它。所以我创建了一个名为的目录`vendor`并将文件放在那里，然后转到 Eclipse 并将文件添加到构建路径中，在 Eclipse 中一切看起来都很好，但是当我签出 git repo 时，Git 似乎不知道新目录和文件。到底是怎么回事？

另外，我想确保当朋友下载并打开项目时，她**不必**重新配置构建路径，因此必须进行一些配置，但我不知道。所以我也想得到帮助:)

谢谢！

**更新**

这是我的 .gitiginore 内容：

```
*.class

# Library development interface for
# testing methods et cetera.
src/ui

# Package Files #
*.jar
*.war
*.ear

# IntelliJ specific files/directories
out
.idea
*.ipr
*.iws
*.iml
atlassian-ide-plugin.xml

.DS_Store

# Eclipse specific files/directories
.metadata
bin/

# NetBeans specific files/directories
.nbattrs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T22:43:46.750

如果您的`vendor`目录与您的项目文件夹无关（我认为这是 Git 管理的），那么 Git 将永远不会知道它的存在。您需要在 Git 管理的根目录下的某个位置创建文件夹。

至于与同事共享您的工作区配置，完全可以将项目的`.project`和`.classpath`文件签入 Git。

然而，一个更可行的替代所有这些手动捏造的方法是简单地使用像 Maven 这样的依赖管理工具。有了它，您唯一需要检查版本控制的是 POM 文件。然后，当您的同事签出项目时，将自动为她设置依赖项（假设她使用的是安装了 m2e 的最新版本的 Eclipse）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T23:43:52.470

如您所见，您忽略了 .gitignore (*.jar) 中的所有 JAR 文件。如果您只想添加这个特定的jar并继续忽略其他jar文件，您可以使用命令强制添加该jar

```
git add -f vendor.jar 
```

并承诺。否则从 gitignore 中删除该条目并添加并提交。

# php - “错误：未知命令‘点击’”

> ID：15488276
> 
> 赞同：1
> 
> 时间：2013-03-18T22:35:54.963
> 
> 标签：php, installation, upgrade, homebrew

我尝试将 PHP 版本升级到 5.4.4，这显然不是最简单的事情。

但是，我找到[了这个链接](https://github.com/josegonzalez/homebrew-php)，它提供了以下命令：

```
brew tap josegonzalez/homebrew-php 
```

...这应该可以解决问题。

但是，在终端中运行命令时，出现以下错误：

```
Error: Unknown command 'tap' 
```

我找不到有关此错误的任何信息，并且根据安装说明它应该可以工作，因为我安装了 Homebrew。

那么，有什么线索吗？提前非常感谢。

# asp.net-mvc - 机器特定的配置设置

> ID：15488284
> 
> 赞同：0
> 
> 时间：2013-03-18T22:37:00.453
> 
> 标签：asp.net-mvc, asp.net-mvc-4, iis-7.5, windows-server-2008

我有一个部署到负载平衡环境的应用程序。此应用程序是一个 asp.net mvc4 应用程序。

我在每个服务器的 web.config 中都有设置（appsettings 和 httpheaders）。除了在部署期间管理它们，有没有办法在机器上设置它们并在应用程序中可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:40:00.387

`machine.config`您可以在每台服务器上的文件中设置您的特定设置。然后，您将能够访问这些设置，就像您在以下位置的应用程序设置一样`the web.config`：

```
string setting = ConfigurationManager.AppSettings["machine.somekey"]; 
```

有关 machine.config 文件的位置，请参阅[这篇文章](https://stackoverflow.com/questions/8431709/machine-config-appsettings-are-null#answer-8431790)。

# asp.net - ASP.NET 应用程序生命周期 - 不是页面生命周期

> ID：15488286
> 
> 赞同：0
> 
> 时间：2013-03-18T22:37:05.483
> 
> 标签：asp.net, iis, application-lifecycle

我正在尝试调试在 IIS 7.5 上运行的 asp.net Web 应用程序遇到的问题。我期待发现，当我们通过将物理路径更改为代码的新副本来部署应用程序时，请求并没有完成。

我的印象是，当前执行的请求将在应用程序的旧实例上完成，而新请求将针对新实例执行。如果这是真的，我希望旧实例能够运行，直到达到 httpRuntime.shutdownTimeout。

长话短说，我试图在本地复制它，但没有发生。无论我的请求需要多长时间，IIS 似乎都会等待超过 shutdownTimeout 中的设置。

这是我感兴趣的生命周期的一部分。在更改应用程序的物理路径和 IIS 拉动任何当前正在执行的请求之间会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:39:43.493

[MSDN](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.85%29.aspx)上有对 ASP.NET 应用程序生命周期的非常透彻的解释。

> Application_Start 和 Application_End 方法是不代表 HttpApplication 事件的特殊方法。ASP.NET 在应用程序域的生命周期内调用它们一次，而不是为每个 HttpApplication 实例调用一次。
> 
> **应用程序_开始**
> 
> 当请求 ASP.NET 应用程序中的第一个资源（例如页面）时调用。Application_Start 方法在应用程序的生命周期中仅调用一次。您可以使用此方法执行启动任务，例如将数据加载到缓存中和初始化静态值。您应该在应用程序启动期间仅设置静态数据。不要设置任何实例数据，因为它仅对创建的 HttpApplication 类的第一个实例可用。

# asp.net - 实现动态用户界面 ASP.Net

> ID：15488288
> 
> 赞同：0
> 
> 时间：2013-03-18T22:37:20.063
> 
> 标签：asp.net, dynamic, user-interface

对于实现以下场景的技术/策略，我将不胜感激：
1\. SQL 数据库有一个包含一些字段的客户表。2\. 允许用户添加额外的自定义字段并指定数据类型和一些规则，例如需要值等。 3\. 当用户加载用户界面时，这些自定义字段需要显示为任何其他标准字段，并在场地。4.用户保存更改时，需要将这些自定义字段中的值保存到数据库中

技术
我们仍处于设计阶段 - 因此对所有建议持开放态度。但技能集主要在 SQL、ASP.Net 网络表单中

问题
1\. 实现上述第 2 项的最佳方法是什么 - 一个存储 TableName、FieldName、DataType、Rules 等的单独表？对于任何反馈，我们都表示感谢。
2\. 实现上述第 3 项和第 4 项的最佳方法是什么 - 我一直在阅读动态数据、数据注释等。看起来很有希望，但我不确定这些可以在多大程度上用于解决我们的问题.

再次感谢任何帮助我们提出好的设计的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:50:00.210

在我最近的应用程序中，我这样做了：

1.  使用此模式调用的数据库表`CustomFields`：`(CustomFieldId int PK, DisplayName nvarchar(50), Class int, Type int)`
2.  每个可扩展实体都有一个名为`CustomFieldValues`which is的新列`nvarchar(MAX)`。每个实体都有一个进入`Class`CustomFields 的数字。自定义字段值
3.  然后是一些 ASP.NET MVC 视图黑客来显示自定义字段。

基本上，该表`CustomFields`定义了每个字段（其名称、数据类型和与之关联的实体类），每个实体的`CustomFieldValues`属性列出了实际数据，它被序列化为仅包含简单值的 CSV 字符串：字符串、整数，小数等，没有复杂类型或图形。

我将 ASP.NET MVC 用于前端的东西，因为 WebForms 实际上更难使用，尤其是动态添加的字段。我确实必须对绑定进行一些更改以确保我的模型被拾取，但一切都很好。

如果您使用的是 MVC，则需要一个如下所示的自定义 ViewModel 类：

```
public class CustomFormViewModel {

    public List<CustomFieldViewModel> CustomFields { get; set; }

}

public class CustomFieldViewModel {

    public Int32 CustomFieldId { get; set; } // the field ID for definition lookup
    public String Value { get; set; }
} 
```

然后在视图中：

```
<% for(int i=0;i<Model.CustomFields.Count;i++) { %>
    <%= Html.TextBoxFor( m => m[i].Value ) %>
<% } %> 
```

在你的行动中，一切都应该为你神奇地绑定：

```
[HttpPost]
public ActionResult CustomForm(CustomFormViewModel model) {
    model.CutomFields[0].Value == "foo";
} 
```

简单！

请注意，ASP.NET MVC 在绑定 this 时确实存在一些错误，找到它们很有趣！

# java - System.out.println("Sklep:"+sklep1+sklep2); 如何查看

> ID：15488292
> 
> 赞同：-1
> 
> 时间：2013-03-18T22:37:28.333
> 
> 标签：java

运行此代码时，我的代码有一些问题：

```
Sklep{
    private static double ch; //cena hurtowa
    private static double cd; // cena detaliczna
    private int zilosc; 
    private int silosc;
    private int nr;

    static void setCenaHurtowa(double nch){ ch = nch; }
    static void setCenaDetaliczna(double ncd){ cd = ncd;}
    {licznik++;}
    public Sklep(){
        zilosc = 0;
        silosc = 0;
        nr=licznik;
    }

    void kupno(int nzilosc){
        zilosc = nzilosc;
    }

    void sprzedaz(int nsilosc){
        silosc = nsilosc;
    }
}
public static void main(String[] args){
    Sklep.setCenaHurtowa(1.5);
    Sklep.setCenaDetaliczna(3);
    Sklep sklep1 = new Sklep();
    Sklep sklep2 = new Sklep();
    Sklep sklep3 = new Sklep();
    sklep1.kupno(100);
    sklep2.kupno(200);
    sklep3.kupno(300);
    System.out.println("Sklep:"+sklep1+sklep2);                   
} 
```

控制台给我：

> 骷髅：zad_1$Sklep@35a8767zad_1$Sklep@2c6f7ce9

我怎样才能得到这样的东西：

> Sklep nr 1 aktualny stan jabłek 100.0 公斤
> 
> Sklep nr 2 aktualny stan jabłek 200.0 kg

或者我在哪里可以找到答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:38:25.880

`Override toString()`**Sklep 类**中的方法。默认情况下，它调用`Object.toString()`.

就像是：

```
 public class Sklep{

  public String toString(){
     return "put whatever you wanna return from toString here";
  }
  public static void main(String[] args) {
  Sklep sk = new Sklep();
  //rest of your code
  System.out.println(sk);

   }

 } 
```

# python - 在pygame中的透明表面上渲染抗锯齿文本

> ID：15488293
> 
> 赞同：2
> 
> 时间：2013-03-18T22:37:42.333
> 
> 标签：python, text, fonts, transparency, pygame

我正在制作一个函数，它接受一个字符串 a 将其分成几行并返回一个表面，每条线都呈现在前一条线的下方。

例如：

`Line1\nLine 2`

渲染成：

```
Line1
Line2 
```

无论如何，我的问题是我无法将正确透明的表面返回给调用函数。我试过使用颜色键，但它不适用于抗锯齿文本。有没有办法我可以做到这一点？感谢您的回答。

我的代码：（目前在文本周围留下难看的紫色阴影）

```
def render_message(messages):
    surfaces = []
    height = 0
    max_width = 0

    for message in messages.split('\n'):
        surf = FONT.render(message, True, (0, 0, 0))
        surfaces.append(surf)
        height += surf.get_height() + 5
        if surf.get_width() > max_width:
            max_width = surf.get_width()

    result = pygame.Surface((max_width, height))
    result.fill((255, 0, 255))
    result.set_colorkey((255, 0, 255))

    top = 0
    for surface in surfaces:
        result.blit(surface, (max_width/2-surface.get_width()/2, top))
        top += surface.get_height() + 5

    return result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:25:53.357

得到它的工作。主要不是我发现的是：**没有AA = 自动透明。使用 AA，您也需要设置颜色键**

这是一个工作示例，它切换 BG 以确保它是透明的。

```
import pygame
from pygame import Surface
#from pygame.locals import Rect, Color
from pygame.locals import *

class TextWall():
    def __init__(self, font=None, size=300):
        # for simplicity uses one font, one size for now.
        # You also can make font size, .text, etc be properties so they *automatically* toggle dirty bool.
        self.font_name = font
        self.font_size = size
        self.color_fg = Color("white")
        self.color_bg = Color("gray20")
        self.aa = True 
        self.text = "hi world"

        self.dirty = True
        self.font = pygame.font.Font(font, size)
        self.screen = pygame.display.get_surface()

    def _render(self):
        # re-render
        """no AA = automatic transparent. With AA you need to set the color key too"""
        self.dirty = False        
        self.text1 = self.font.render(self.text, self.aa, self.color_fg)            
        self.rect1 = self.text1.get_rect()

    def draw(self):
        # blits use cached surface, until text change makes it dirty
        if self.dirty or self.text1 is None: self._render()
        self.screen.blit(self.text1, self.rect1)

    def text(self, text):
        self.dirty = True
        self.text_message = text # parse

class Game():
    done = False
    def __init__(self):
        pygame.init()
        self.screen = pygame.display.set_mode ((640,480))
        self.text = Surface([200,100])

        self.text_wall = TextWall()
        self.toggle_bg = True
    def loop(self):
        while not self.done:
            self.handle_events()
            self.draw()

    def draw(self):
        if self.toggle_bg: bg = Color("darkred")
        else: bg = Color("gray20")

        self.screen.fill(bg)        
        self.text_wall.draw()        
        pygame.display.update()

    def handle_events(self):
        for event in pygame.event.get():
            if event.type == pygame.QUIT: self.done = True

            elif event.type == KEYDOWN:
                if event.key == K_ESCAPE: self.done = True                
                elif event.key == K_SPACE: self.toggle_bg = not self.toggle_bg
                elif event.key == K_a: 
                    self.text_wall.aa = not self.text_wall.aa
                    self.text_wall.dirty = True

if __name__ == "__main__":
    g = Game()
    g.loop() 
```

编辑：改进的代码，使用 alpha 通道而不是 set_colorkey。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:38:00.093

*发布了第二个答案，因为这更复杂，人们可能希望同时查看。*

![多行文字截图](../Images/a9d162a351293e165563bab8c134d92d.png)

*   `1`,`2`减小/增大字体大小
*   `space`切换背景

我把文字换行了。编辑`parse_text()`以创建您想要的文本列表。

```
import pygame
from pygame import Surface
from pygame.locals import *
# Todo: remove font object from TextLine() , to TextWall(). Then share a list of font's with any line.

"""Example of multi-line text class, with alpha transparency."""
lorem = """Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed aliquet
tellus eros, eu faucibus dui. Phasellus eleifend, massa id ornare sodales, est urna
congue tellus, vitae varius metus nunc non enim. Mauris elementum, arcu vitae tempor euismod, justo turpis malesuada est, sed dictum nunc nulla nec mauris. Cras felis eros, elementum vitae sollicitudin in, elementum et augue. Proin eget nunc at dui congue pretium. Donec ut ipsum ut lacus mollis tristique. In pretium varius dui eu dictum.

Proin pulvinar metus nec mi semper semper. Pellentesque habitant morbi tristique
senectus et netus et malesuada fames ac turpis egestas. Proin in diam odio. Vestibulum
at neque sed ante sodales eleifend quis id dui. Mauris sollicitudin, metus a semper consectetur,
est lectus varius erat, sit amet ultrices tortor nisi id justo. Aliquam elementum vestibulum dui ut auctor. Mauris commodo sapien vitae augue tempus sagittis. Morbi a nibh lectus, sed porta nibh. Donec et est ac dui sodales aliquet tristique et arcu. Nullam enim felis, posuere vel rutrum eu, euismod a purus. Morbi porta cursus libero, id rutrum elit lacinia vitae.

In condimentum ultrices ipsum, ut convallis odio egestas et. Cras at egestas elit. Morbi
quis neque ligula. Sed tempor, sem at fringilla rhoncus, diam quam mollis nisi, vitae semper
mi massa sit amet tellus. Vivamus congue commodo ornare. Morbi et mi non sem malesuada rutrum. Etiam est purus, interdum ut placerat sit amet, tempus eget eros. Duis eget augue quis diam facilisis blandit. Ut vulputate adipiscing eleifend. """

class TextLine(object):
    # Manages drawing and caching a single line of text
    # You can make font size, .color_fg etc be properties so they *automatically* toggle dirty bool.
    def __init__(self, font=None, size=16, text="hi world"):        
        self.font_name = font
        self.font_size = size
        self.color_fg = Color("white")
        self.color_bg = Color("gray20")

        self._aa = True 
        self._text = text                
        self.font = pygame.font.Font(font, size)
        self.screen = pygame.display.get_surface()

        self.dirty = True
        self.image = None
        self._render()

    def _render(self):
        # render for cache
        """no AA = automatic transparent. With AA you need to set the color key too"""
        self.dirty = False        
        self.image = self.font.render(self._text, self.aa, self.color_fg)            
        self.rect = self.image.get_rect()

    def draw(self):
        # Call this do draw, always prefers to use cache
        if self.dirty or (self.image is None): self._render()
        self.screen.blit(self.image, self.rect)        

    @property
    def text(self):
        return self._text

    @text.setter
    def text(self, text):
        self.dirty = True
        self._text = text

    @property
    def aa(self): return self._aa

    @aa.setter
    def aa(self, aa):
        self.dirty = True
        self._aa = aa

class TextWall(object):
    # Manages multiple lines of text / paragraphs.
    def __init__(self, font=None, size=16):
        self.font = font
        self.font_size = size        
        self.offset = Rect(20,20,1,1) # offset of whole wall

        self.screen = pygame.display.get_surface()
        self.dirty = True
        self.text_lines = []
        self._text_paragraph = "Empty\nText"
        self._render()

    def _render(self):
        # render list 
        self.dirty = False
        self.text_lines = [ TextLine(self.font, self.font_size, line) for line in self._text_paragraph ]        

        # offset whole paragraph
        self.text_lines[0].rect.top = self.offset.top

        # offset the height of each line
        prev = Rect(0,0,0,0)        
        for t in self.text_lines:
            t.rect.top += prev.bottom
            t.rect.left = self.offset.left
            prev = t.rect

    def parse_text(self, text):
        # parse raw text to something usable
        self._text_paragraph = text.split("\n")
        self._render()

    def draw(self):
        # draw with cached surfaces    
        if self.dirty: self._render()
        for text in self.text_lines: text.draw()

    @property
    def font_size(self):
        return self._font_size

    @font_size.setter
    def font_size(self, size):
        self.dirty = True
        self._font_size = size

    @property
    def text(self):
        return self._text_paragraph

    @text.setter
    def text(self, text_paragraph):
        self.dirty = True
        self.parse_text(text_paragraph)

class Game():
    done = False
    def __init__(self):
        pygame.init()
        self.screen = pygame.display.set_mode ((640,480))
        self.text = Surface([200,100])

        self.text_wall = TextWall()
        self.toggle_bg = True

        self.text_wall.parse_text(lorem)

    def loop(self):
        while not self.done:
            self.handle_events()
            self.draw()

    def draw(self):
        if self.toggle_bg: bg = Color("gray60")
        else: bg = Color("gray20")

        self.screen.fill(bg)        
        self.text_wall.draw()        
        pygame.display.update()

    def handle_events(self):
        for event in pygame.event.get():
            if event.type == pygame.QUIT: self.done = True

            elif event.type == KEYDOWN:
                if event.key == K_ESCAPE: self.done = True                
                elif event.key == K_SPACE: self.toggle_bg = not self.toggle_bg
                elif event.key == K_1: self.text_wall.font_size -= 3
                elif event.key == K_2: self.text_wall.font_size += 3

if __name__ == "__main__":
    g = Game()
    g.loop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-04T20:26:01.770

最好的解决方案是不使用颜色键，而是使用 Alpha 通道。而不是这个：

```
result = pygame.Surface((max_width, height))
result.fill((255, 0, 255))
result.set_colorkey((255, 0, 255)) 
```

尝试使用这个：

```
result = pygame.Surface((max_width, height), pygame.SRCALPHA) 
```

# sql-server - 如何调用存储过程以在 SQL Server 中从另一个表填充一个表？

> ID：15488295
> 
> 赞同：0
> 
> 时间：2013-03-18T22:37:49.060
> 
> 标签：sql-server, tsql, stored-procedures, insert

我还是 SQL 的新手，所以通过学习来做到这一点。我想使用存储过程填充表。我的问题是如何调用该过程以便执行它并填充表格。到目前为止，我已经做到了。

```
ALTER proc [dbo].[MytestTableLoad]
   @ID int,
   @FirstName varchar,
As
Begin
   Set nocount on;

   merge dbo.MytestTable2 as target
   using (select @ID, @FirstName,@LastName) as source (Id, FirstName, LastName)
   on (target.Id=source.Id)
   when not matched then
     Insert   (Id, FirstName, LastName)
     values (@Id, @FirstName,@LastName)
   ;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:40:49.373

更简单的语法是；

```
insert into table2
(field1, field2, etc)
select field1, field2, etc
from SomeOtherTables
where not exists
(subquery to check for records you don't want.) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:12:11.970

"how do I call the procedure so that it gets executed and the table gets populated."

Like this:

```
EXEC MytestTableLoad 1,'Bob' 
```

# asp.net-webpages - 微软推荐的站点页面资产组织是什么？

> ID：15488297
> 
> 赞同：1
> 
> 时间：2013-03-18T22:37:52.810
> 
> 标签：asp.net-webpages, project-organization

我发现在创建新站点时，我得到了这样的结构：

```
Content\
   themes\
      base\
         images\
         jquery.ui.all.css
         ...
      Site.css
Controllers\
Models\
Scripts\
   jquery.js
   ... 
```

我更喜欢将所有页面资产保存在一个目录中（将脚本移动到内容中），但我觉得这不是推荐的结构，但我没有明确找到对此布局的任何引用——当然我没有为它投入了太多时间。

MS对这种事情有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:41:09.430

Microsoft 不会就静态内容文件夹结构提出任何建议。他们制作的模板彼此遵循相似的结构，但这更像是惯例而不是推荐。我怀疑他们是否会推荐一种文件夹结构而不是另一种，因为它没有任何区别。

# cocoa-touch - 即使断开连接，GCDAsyncSocket 也无法多次接受 OnPort

> ID：15488298
> 
> 赞同：1
> 
> 时间：2013-03-18T22:37:56.800
> 
> 标签：cocoa-touch, sockets, gcdasyncsocket

我希望能够关闭当前侦听端口的套接字，然后返回到它并重新建立对该端口的侦听。我无法这样做，因为在另一个服务器侦听套接字上的第二个 acceptOnPort 调用总是以错误结束（地址已在使用中）。如何关闭侦听套接字并重新建立一个新的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:13:06.003

请参阅我刚刚添加的[问题 146 。](https://github.com/robbiehanson/CocoaAsyncSocket/issues/146)

GCDAsyncSocket 永远不会解除分配，因为 dispatch_source_set_event_handler 持有对一个块的引用，该块持有对 GCDAsyncSocket 自身的引用。

这导致无法关闭然后重新打开 GCDAsyncSocket 侦听器，因为该地址已在使用中。

这可以通过将引用更改为弱引用来解决。在 dispatch_source_set_event_handler 之前，添加以下行：

__weak GCDAsyncSocket* weakSelf = self;

然后用weakSelf代替self来调用doAccept。

while ([weakSelf doAccept:socketFD] && (++i < numPendingConnections));

您需要重复此操作两次，一次用于 ipv4，一次用于 ipv6。

此时，您会发现GCDAsyncSocket 永远不会被释放是一件好事，因为它会立即崩溃，因为dealloc 运行。这是因为 dealloc 调用 closeWithError，而后者又调用委托 socketDidDisconnect，将 GCDAsyncSocket self 作为参数传递。ARC 会立即保留崩溃的 GCDAsyncSocket，因为 GCDAsyncSocket 当前正在被释放。

这可以通过将“delegate = nil”移动到 dealloc 的开头来解决，您也可以这样做，因为此时无法安全地调用委托（好吧，如果您希望能够通过 GCDAsyncSocket，你不能再这样做了）。在这种情况下，另一种方法是调用 socketDidDisconnect:nil。

无论哪种方式，都意味着不会调用 socketDidDisconnect，或者不会使用适当的 GCDAsyncSocket 作为参数来调用，这可能会破坏 API 协定，但在这一点上是不可避免的。

更好的 API 是在 dealloc 发生之前调用某种“Kill”方法来终止 GCDAsyncSocket。

# lua - 如何在移动精灵时显示动画？

> ID：15488304
> 
> 赞同：0
> 
> 时间：2013-03-18T22:38:16.100
> 
> 标签：lua, love2d

我正在使用[anim8](https://github.com/kikito/anim8)库，并参考了他对[类似问题](https://stackoverflow.com/questions/9359858/how-to-create-a-walking-animation-in-love-2d)的回答，但是当我按下键行走/移动时，我仍然不知道如何触发我的动画：

```
-- main.lua
local anim8 = require('lib.anim8.anim8')
local player, animation, g

function love.load()
  player = {}
  player.spritesheet = love.graphics.newImage('sprites/hero.png')
  player.x = 200
  player.y = 200
  player.speed = 50

  g = anim8.newGrid(16, 24, player.spritesheet:getWidth(),
    player.spritesheet:getHeight())

  animation = anim8.newAnimation('loop', g('1-8,1-5'), 1.0)
end

function love.update(dt)
   animation:update(dt)

   if love.keyboard.isDown("w") then 
      animation = anim8.newAnimation('loop', g('4-6,1'), 0.1)   
    player.y = player.y - player.speed * dt
   elseif love.keyboard.isDown("s") then 
    player.y = player.y + player.speed * dt
    animation = anim8.newAnimation('loop', g('1-3,1'), 0.1) 
   elseif love.keyboard.isDown("a") and player.x > 0 then 
    player.x = player.x - player.speed * dt
    animation = anim8.newAnimation('loop', g('7-8,1'), 0.1) 
   elseif love.keyboard.isDown("d") and player.x < 10000 then
    player.x = player.x + player.speed * dt
    animation = anim8.newAnimation('loop', g('4,2'), 0.1)   
   end

 end

function love.draw()
   animation:draw(player.spritesheet, player.x, player.y)
end 
```

目前，发生的情况是精灵会向上、向下、向左、向右移动，但是当我按住 [各自的] 键盘键时动画会冻结，并在我释放键盘键后继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T15:13:21.833

您正在每一帧上创建动画。而不是这样做，您应该创建它们一次（例如在 love.load 中），然后在 love.update 中重用它们。

```
local anim8 = require('lib.anim8.anim8')
local player

function love.load()
  local spritesheet = love.graphics.newImage('sprites/hero.png');
  local g = anim8.newGrid(16, 24, spritesheet:getWidth(), spritesheet:getHeight())

  player = {
    spritesheet = spritesheet,
    x = 200,
    y = 200,
    speed = 50,
    animations = {
      up = anim8.newAnimation('loop', g('4-6,1'), 1.0),
      down = anim8.newAnimation('loop', g('1-3,1'), 1.0),
      left = anim8.newAnimation('loop', g('7-8,1'), 1.0),
      right =  anim8.newAnimation('loop', g('4,2'), 1.0)
    }
  }
  player.animation = player.animations.down -- player starts looking down
end

function love.update(dt)
  if love.keyboard.isDown("w") then 
    player.y = player.y - player.speed * dt
    player.animation = player.animations.up
  elseif love.keyboard.isDown("s") then 
    player.y = player.y + player.speed * dt
    player.animation = player.animations.down
  elseif love.keyboard.isDown("a") and player.x > 0 then 
    player.x = player.x - player.speed * dt
    player.animation = player.animations.left
  elseif love.keyboard.isDown("d") and player.x < 10000 then
    player.x = player.x + player.speed * dt
    player.animation = player.animations.right
  end
  player.animation:update(dt)
end

function love.draw()
  player.animation:draw(player.spritesheet, player.x, player.y)
end

function love.keypressed(key) 
   if love.keyboard.isDown("escape") then
     love.event.quit("quit")
    end
end 
```

# kohana - 使用 Composer 通过 Kohana 获取 github repo 失败：“找不到请求的包”

> ID：15488308
> 
> 赞同：5
> 
> 时间：2013-03-18T22:38:36.210
> 
> 标签：kohana, composer-php

我想使用 Composer 来包含[php 可读性 git](https://github.com/feelinglucky/php-readability.git)项目。这是我的`composer.json`文件：

```
{
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "php-readability/php-readability",
                "version": "master",
                "source": {
                    "url": "https://github.com/feelinglucky/php-readability.git",
                    "type": "git",
                    "reference": "branches/master"
                }
            }
        }
    ],
    "require": {
        "php-readability/php-readability": "master"
    }
} 
```

我得到的错误是：

```
Problem 1
 - The requested package php-readability/php-readability master could not be found.

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your min
imum-stability setting
   see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> f
or more details.

Read <http://getcomposer.org/doc/articles/troubleshooting.md> for further common
 problems. 
```

这是我第一次使用 Composer，所以很可能是我的配置错误！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T09:38:02.503

php-readability 项目没有标签（所以它在作曲家方面不稳定）。默认情况下，只考虑稳定包。

为了表明您要安装软件包的开发版本，请将其版本定义为“dev-master”或“*@dev”。

此外，您在存储库定义中提供了错误的引用。这是一个工作`composer.json`：

```
{
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "php-readability/php-readability",
                "version": "master",
                "source": {
                    "url": "https://github.com/feelinglucky/php-readability.git",
                    "type": "git",
                    "reference": "master"
                }
            }
        }
    ],
    "require": {
        "php-readability/php-readability": "dev-master"
    }
} 
```

# hadoop - hadoop map 中的全局值减少

> ID：15488311
> 
> 赞同：0
> 
> 时间：2013-03-18T22:38:46.313
> 
> 标签：hadoop, mapreduce, hdfs

我的用例涉及找出有缺陷的物品……假设我有一个包含数百万个标记为好/有缺陷的 hdfs 物品的产品列表……我想找出前 10 个有缺陷的物品匹配，然后停止。

我正在考虑使用计数器来执行此操作，但看起来计数器都在任务跟踪器级别......所以每个任务跟踪器都维护它自己的计数器副本，在工作完成之前不会真正聚合。因此，如果另一个地图已经找到这 10 个项目，则在拆分的地图作业中运行的计数器不会有任何想法。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:25:39.330

在 map 任务中找到本地前 10 条记录，发送给 reducer。因此，如果有 7 个映射器，那么 reducer 将获得 70 条记录。reducer 必须对这 70 条记录进行排序并发出全球前 10 条记录。[这](http://www.greenplum.com/blog/topics/hadoop/how-hadoop-mapreduce-can-transform-how-you-build-top-ten-lists)是相同的代码。

请注意，这种方法仅适用于单个减速器，而不适用于 1+ 减速器，这可能是一个瓶颈。另外，mapper之间没有通信，所以没有办法减轻reducer的负担。检查这篇[论文](http://dl.acm.org/citation.cfm?id=2247646)，映射器可以使用全局数据相互交谈。IBM BigInsights[实现](http://publib.boulder.ibm.com/infocenter/bigins/v1r2/index.jsp?topic=/com.ibm.swg.im.infosphere.biginsights.doc/doc/c0059636.html)了它。

检查[此](http://www.thecloudavenue.com/2013/02/mapreduce-patterns.html)博客条目以了解许多模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:22:32.233

假设您使用的是 Hadoop，计数器也可以在全球范围内使用。

但是，我不明白使用 Map Reduce 解决这个问题的原因。

# python - 为什么我的清单总是乱七八糟？

> ID：15488314
> 
> 赞同：0
> 
> 时间：2013-03-18T22:39:01.087
> 
> 标签：python, list, networking

我正在使用 Python 后端服务器开发多人 Flash 游戏，但服务器出现了一些问题。

我正在为服务器使用异步 TCP 套接字（使用`select`），并且我还维护一个“发送队列”，其中数据包按调度顺序排队，然后在`select`告诉我套接字可写时发送。

**基本上，它的结构是这样的：**

*（注意：每个“数据包”都有一个关联的套接字）*

```
every 'networking' loop:
    acquire sending queue mutex

    for every writable socket acquired with select():
        for every packet in the sending queue:
            if this packet is intended to be sent with this writable socket:
                send the packet
                remove the packet from the sending queue

    release sending queue mutex 
```

乍一看，这对我来说似乎很好，但似乎我的发送队列**出现故障**。

它似乎总是以相同的顺序，但不是正确的顺序。例如，服务器向`Chat`客户端发送一些数据包以将它们介绍给服务器。我这样做：

```
player.sendMessage("Welcome to Nanoxide's public server, " + player.getName() + "!")
player.sendMessage("The server is version " + self.getServer().getVersion())
player.sendMessage("and it is running under " + str(int(psutil.cpu_percent())) + "% CPU load.")
player.sendMessage("")

self.getServer().broadcastMessage(player.getName() + " joined the game") 
```

但是，它总是按以下顺序到达：

```
This server is version <version>
<blank line>
Welcome to Nanoxide's public server, <playername>!
<playername> joined the game 
```

*（注意：到目前为止，我只用一个连接对此进行了测试）* 我不太确定是什么原因造成的。我不认为这是线程干扰（因为有时 sendQueue 可能会被多个线程修改），因为我使用了 threading.Lock，并且乱序总是*在相同的 order*中，只是不是我放置的 order中的数据包。

我怀疑这个问题与我在这个问题开头概述的“网络”循环有关 - 可能是因为有时没有发送数据包，因为它不是用于指定的数据包，并且它正在通过列表，将其按顺序排列...？

你认为是什么问题，我还做错了什么，你会怎么解决？每个套接字的发送队列而不是全局的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:24:17.990

根据伪代码，您似乎在迭代队列时正在修改队列。那可能很危险。例如：

```
>>> x = range(10)
>>> for i in x:
...     print i
...     if i%2==0:
...             x.remove(i)
... 
0
2
4
6
8 
```

解决该问题的一种方法是创建可迭代对象的副本。例如：

```
>>> x = range(10)
>>> for i in x[:]:
...     print i
...     if i%2==0:
...             x.remove(i)
... 
0
1
2
3
4
5
6
7
8
9 
```

# python - 一个奇怪的情况 w。Python 和范围

> ID：15488315
> 
> 赞同：0
> 
> 时间：2013-03-18T22:39:02.563
> 
> 标签：python, constants, scope

更具体地说，我将展示代码，然后解释发生了什么。

```
DATE = 'November'

def commander():
    pass

class Circle():
    pass

def log(orig_stdout, rep_log):
    pass

def debug(debugBool, info):
    pass

def main():
    Date = DATE 
```

所以假设每个功能都填写好了，这不是重要的部分。重要的是`main()`看不到`DATE`，我得到了通常的`"UnboundLocalError: local variable 'DATE' referenced before assignment"`例外。

我认为常量具有全局范围？更奇怪的是它以前工作得很好，但现在才引起问题。如果您愿意，我可以向您展示其余的代码，但这有点乱。

TL;DR：DATE 的范围没有达到主要功能，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:43:10.353

好，只读...因此它必须是全球范围的日期

```
DATE = "November"
def main():
    xyz=DATE
    print "Date :",DATE
if __name__ == "__main__":
   main() 
```

BAD (w/error) ，发生这种情况是因为 python 认为您正在谈论的 DATE 是您稍后分配的 DATE，这是一个 LOCAL 变量，它会影响 GLOBAL 变量。

```
DATE = "November"
def main():
    xyz=DATE
    print "Date :",DATE
    DATE = 123
if __name__ == "__main__":
   main() 
```

好（再次）！！！，现在 python 知道你在谈论 GLOBAL 变量 DATE

```
DATE = "November"
def main():
    global DATE
    xyz=DATE
    print "Date :",DATE
    DATE = 123
if __name__ == "__main__":
   main() 
```

至少这是我对 Globals 的理解。通常更好的做法是使用带默认变量的参数

```
def main(my_date=DATE):
   #now there is no question and it will use global scope
   #the downside is it is set to the value of DATE at run start not at the time it goes to main 
```

# sql - 字符串或二进制数据将被截断 - 整数？

> ID：15488319
> 
> 赞同：0
> 
> 时间：2013-03-18T22:39:12.540
> 
> 标签：sql, sql-server-2008

在 Windows Server 2008 上的 SQL Server 2008 上，我有下面的查询，在执行时，我得到旧的“字符串或二进制数据将被截断”。

但是，这里真正奇怪的是，如果我将最后一个字段值（isOrganiser）更改为 2 到 9 之间，它运行良好。如果我将 114841 更改为 114741（并且该模式继续存在），同样的事情。那么问题是由整数字段引起的吗？还是位域？什么？

所以我很难过。一些额外的信息：

1.  一些 int 列具有索引 - 我已将它们全部禁用，但我遇到了同样的问题。
2.  此查询在其他应用程序中到处运行并且从未出现过问题 - 唯一不同的地方可能是记录的数量
3.  虽然 ID 是 FK，但在 SQL 中不强制执行约束
4.  该表有一个 ID 列（100001 种子和 +1 增量） - 每次执行错误时，没有插入记录，但下一个插入记录的 ID 增加，就好像插入了前一个错误

    ```
    INSERT INTO [emailRecipient] (
        [recordTitle], 
        [createdByID], 
        [canUpdate], 
        [canDelete], 
        [isDeleted], 
        [canRemove], 
        [drsQuickSummary],
        [drsSummary], 
        [isEditLocked], 
        [sourceRID], 
        [insertIndex], 
        [isSaved], 
        [allowNextInsertTrigger],
        [allowNextUpdateTrigger], 
        [allowNextDeleteTrigger], 
        [emailRID], 
        [personID], 
        [organisationID],
        [emailAddressID], 
        [emailAddress], 
        [isOrganiser]
    )

    VALUES (
        '', 
        100002, 
        1, 
        1, 
        0, 
        0, 
        '', 
        '',
        0,
        '', 
        1, 
        1, 
        1, 
        0, 
        0, 
        100753, 
        102969, 
        114841, 
        102434, 
        'me@myplace.com', 
        0
    ); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:56:32.200

我怀疑截断发生在您的一个触发器中。

哦，还有 5 个触发器？我怀疑这里可能会发生一些优化。:-)

# azure - 表存储：迁移到 Azure 1.8 SDK 后 $top 损坏？

> ID：15488327
> 
> 赞同：0
> 
> 时间：2013-03-18T22:39:34.407
> 
> 标签：azure, sdk, azure-storage, azure-table-storage

我使用数据服务来查询 Azure 表。

在 SDK 的 1.7 版本中，对 top > 1000 的表的任何查询都将被拆分为多个查询，并为每个查询计算正确的 top。例如，这是我在 Fiddler 中查询 1500 行的表时看到的内容（第一次请求 1000 行，第二次请求 500 行）：

```
200 HTTPS   foo.table.core.windows.net  /Foo()?$top=1500
200 HTTPS   foo.table.core.windows.net  /Foo()?$top=500&NextPartitionKey=1!28!dGVzdGFjY291bnRfMzMxZTZkNTk-&NextRowKey=1!0! 
```

迁移到 1.8 SDK 后，第一个查询使用前 1500 并且返回 400：

```
400 HTTPS   foo.table.core.windows.net  /Foo()?$top=1500 
```

这是 Azure SDK 中的重大变化吗？我需要根据返回的行数自己计算 $top 值还是有办法让它工作？

# c# - 从 XML 文件存储和检索数据

> ID：15488330
> 
> 赞同：1
> 
> 时间：2013-03-18T22:39:43.460
> 
> 标签：c#, xml, xml-serialization

我将一组用户提供的数据存储在一个文件中。当我接手该项目时，所有内容都保存到纯文本文件中。我重新设计了它，现在存储是一个 XML 文件。*当该过程开始时，我使用XDocument*和*XElement*类读取 XML 文件。当我获得这些值时，我将它们放入执行对象的构造函数中。

我想知道是否有一种方法可以自动读取 XML 数据，以便它在某种程度上转换（或转换为）我的对象的实例。

所以，而不是：

```
XElement fromFile = XElement.Load(pathName);
XElement newStuff =
  new XElement("MainNode",
    new XElement("SubNode1", myObject.valueOfSubNode1),
    new XElement("SubNode2", myObject.valueOfSubNode2));
fromFile.ReplaceAll(newStuff);

XmlTextWriter writer = ...;
fromFile.Save(writer); 
```

我想“存储” *myObject*本身的实例。我假设这是可能的。我不知道如何甚至从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:44:43.240

将类型序列化为 XML：

```
public static string Serialize<T>(T data)
{
    XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

    StringWriter sw = new StringWriter();
    xmlSerializer.Serialize(sw, data);
    return sw.ToString();
} 
```

从 XML 反序列化回您的对象：

```
public static object DeSerialize<T>(string data)
{
  StringReader rdr = new StringReader(data);

  XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

  var result = (T)xmlSerializer.Deserialize(rdr);

  return result;
} 
```

也看看这里：[C# XML Serialization/DeSerialization](https://stackoverflow.com/questions/5661227/c-sharp-xml-serialization-deserialization)

# ios - dismissViewControllerAnimated 中断 GUI

> ID：15488334
> 
> 赞同：0
> 
> 时间：2013-03-18T22:39:51.817
> 
> 标签：ios, objective-c, uiviewcontroller, uinavigationcontroller, mfmailcomposeviewcontroller

在我的应用程序中，我使用 MFMailComposeViewController 发送邮件。这个 viewController 被推送

```
 [self presentViewController:mailer animated:false completion:nil]; 
```

来自 uiNavigationController 之上的 viewController。当你完成邮件我删除 mfmailcomposeviewcontroller

```
[self dismissViewControllerAnimated:NO completion:NULL]; 
```

问题在于我的 uinavigationController 的视图没有填满整个屏幕，并且屏幕上显示的不属于该 uinavigationcontroller 的所有元素都变为非活动状态。我不知道如何开始解决这个问题，所以任何提示都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:04:04.763

如果需要呈现的视图控制器`MFMailComposeViewController`在导航控制器中，那么您应该通过调用：

```
[self.navigationController presentViewController:mailer
                                        animated:YES
                                      completion:nil]; 
```

然后你以这种方式解雇它：

```
[self.navigationController dismissViewController:mailer
                                        animated:YES
                                      completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:59:53.370

我发现dismissViewController 改变了调用视图的大小。在这个视图上有一个透明的背景我没有意识到......我可以通过简单地重新调整导航控制器的视图来轻松解决这个问题。我希望这个答案能帮助任何有同样问题的人。

# javascript - 本机 IOS 应用程序从 webbrowser javascript 接收数据

> ID：15488340
> 
> 赞同：1
> 
> 时间：2013-03-18T22:40:02.073
> 
> 标签：javascript, ios, xcode, uinavigationcontroller

我有一个带有故事板和 navigationViewController 的应用程序。在一个页面上，我有一个 webView 对象，其中包含一个网上商店。在这个视图中，我不得不隐藏顶部栏，因为我想将这个地方用于我自己的 html5 栏。

现在我的问题。是否可以通过 webView 中的 javascript 触发（隐藏的）后退按钮？

## 编辑

我从解决方案链接尝试了这段代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[self navigationController] setNavigationBarHidden:YES animated:YES];
    [self.browser loadRequest: [NSURLRequest requestWithURL: [NSURL URLWithString:@"http://www.mywebshop.com/mobile/"]]];
}

-(void) webView:(UIWebView *)browser shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
    if ( [[[inRequest URL] scheme] isEqualToString:@"callback"] ) {

        NSLog(@"Catched Succesfull");
    }
    NSLog(@"NOT Catched");
} 
```

但它没有捕捉到事件。没有日志记录。我误解了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:41:44.560

您可能对`history.back()` [http://www.w3schools.com/jsref/met_his_back.asp感兴趣](http://www.w3schools.com/jsref/met_his_back.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:49:51.190

回调的一种流行方法（我知道的唯一方法）`UIWebView`是使用您拦截的自定义 URI。你可以看到这个SO帖子[iOS UIWebView拦截链接点击](https://stackoverflow.com/questions/8437305/ios-uiwebview-intercept-link-click)

将其格式化`href`为类似的格式`myapp://closeWebView`，然后在委托方法中您可以侦听该 URI，一旦检测到调用您的本机 ObjC 代码以关闭`UIWebView`

# angularjs - 使用 ngRepeat => 不可编辑的输入将输入绑定到基元数组

> ID：15488342
> 
> 赞同：42
> 
> 时间：2013-03-18T22:40:19.447
> 
> 标签：angularjs, angularjs-scope, angularjs-ng-repeat

这是我的问题的[演示。](http://embed.plnkr.co/FrPul9VPj0UK90VDSqc4)

```
$scope.myNumbers = [10, 20, 30];

<div ng-repeat="num in myNumbers">
    <input type="text" ng-model="num">
    <div>current scope: {{num}}</div>
</div> 
```

谁能向我解释为什么输入不可编辑/只读？如果是设计使然，背后的原理是什么？

**2014 年 2 月 20 日更新**

看起来这不再是 v1.2.0+ [Demo](http://jsfiddle.net/grL95/)的问题。但请记住，虽然用户控件现在可以使用较新的 angularJS 版本进行编辑，但修改的是***子范围***`num`中的属性，而不是父范围中的属性。换句话说，修改用户控件中的值不会影响数组。*`myNumbers`*

 ** * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-19T03:21:10.330

> 谁能向我解释为什么输入不可编辑/只读？如果是设计使然，背后的原理是什么？

[从Angular 1.0.3 开始](https://github.com/angular/angular.js/blob/master/CHANGELOG.md)，这是设计使然。当您“直接绑定到每个 ng-repeat 项目”时，Artem 对 1.0.3+ 的工作方式有[很好的解释– 即，](https://stackoverflow.com/a/13723990/215945)

```
<div ng-repeat="num in myNumbers">
  <input type="text" ng-model="num"> 
```

当您的页面最初呈现时，这是您的范围图片（我删除了一个数组元素，因此图片中的框会更少）：

[![在此处输入图像描述](../Images/aff396a393faf0d3b1e4b67fab1b578e.png)](https://i.stack.imgur.com/kMfMZ.png) ^(***（点击放大）***)

虚线显示原型范围继承。
灰线显示子→父关系（即，什么`$parent`引用）。
棕色线显示 $$nextSibling。
灰色框是原始值。蓝色框是数组。紫色是物体。

请注意，您在评论中引用的我的 SO 答案是在 1.0.3 发布之前编写的。在 1.0.3 之前，`num`ngRepeat 子作用域中的值实际上会在您键入文本框时发生变化。（这些值在父范围中不可见。）从 1.0.3 开始，ngRepeat 现在在摘要循环期间用父/MainCtrl 范围数组中`num`的（未更改的）值替换 ngRepeat 范围值。`myNumbers`这实质上使输入不可编辑。

解决方法是在 MainCtrl 中使用对象数组：

```
$scope.myNumbers = [ {value: 10}, {value: 20} ]; 
```

然后绑定到`value`ngRepeat中对象的属性：

```
<div ng-repeat="num in myNumbers">
  <input type="text" ng-model="num.value">
  <div>current scope: {{num.value}}</div> 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-02-19T16:28:31.160

这个问题现在由更新版本的 AngularJS 解决，该版本`track by`具有允许在原语上重复的功能：

```
<div ng-repeat="num in myNumbers track by $index">
  <input type="text" ng-model="myNumbers[$index]">
</div> 
```

每次按键后页面不会重新绘制，解决了失去焦点的问题。官方的 AngularJS 文档对此非常模糊和混乱。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-18T22:54:33.983

似乎 Angular 无法写入以这种方式定义的模型。使用对初始 $scope 属性的引用，让它以正确的方式绑定值：

```
<div ng-repeat="num in myNumbers">
  <input type="text" ng-model="myNumbers[$index]">
</div> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-18T23:06:16.693

ngRepeat 使用对源数组的*引用。*由于`integer (Number in js)`是*值*类型，而不是*引用*类型，因此不能在 javascript 中通过引用传递。更改不会传播。

这是一个演示：

```
 var x = 10;
   var ox = {value:10};

   var y = x;
   var oy = ox;

   y = 15
   oy.value = 15; 
```

`x`和的值是`ox`多少？

```
>> x = 10;
>> y = 15;
>> ox = {value:15};
>> oy = {value:15}; 
```

所有 javascript 对象都通过引用传递，所有原语都通过值传递[“字符串”、“数字”等]。

工作 plunker [http://plnkr.co/edit/7uG2IvAdC2sAEHbdHG58](http://plnkr.co/edit/7uG2IvAdC2sAEHbdHG58)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-12-18T05:23:02.723

我有一个类似的问题（并且还需要“添加”和“删除”功能），并解决了这样的问题：

```
$scope.topics = [''];
$scope.removeTopic = function(i) {
   $scope.topics.splice(i, 1); 
}

<div ng-repeat="s in topics track by $index">
    <input ng-model="$parent.topics[$index]" type="text">
    <a ng-click="removeTopic($index)">Remove</a>
</div>

<a ng-click="topics.push('new topic')">Add</a> 
```*

# r - 使用 KnitR 以编程方式在 R 中创建 Markdown 表

> ID：15488350
> 
> 赞同：105
> 
> 时间：2013-03-18T22:41:19.603
> 
> 标签：r, markdown, knitr, r-markdown

我刚刚开始了解 KnitR 以及使用 Markdown 生成 R 文档和报告。这对于我与工作有关的许多日常报告来说似乎是完美的。但是，我没有看到的一件事是使用 Markdown 格式（有点像`xtable`，但使用 Markdown 而不是 LaTeX 或 HTML）打印数据框和表格的简单方法。我知道我可以嵌入 xtable 的 HTML 输出，但我想知道是否有任何基于 Markdown 的解决方案？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-11-08T13:02:08.080

现在`knitr`（从 1.3 版开始）包包含`kable`创建表的功能：

```
> library(knitr)
> kable(head(iris[,1:3]), format = "markdown")
|  Sepal.Length|  Sepal.Width|  Petal.Length|
|-------------:|------------:|-------------:|
|           5,1|          3,5|           1,4|
|           4,9|          3,0|           1,4|
|           4,7|          3,2|           1,3|
|           4,6|          3,1|           1,5|
|           5,0|          3,6|           1,4|
|           5,4|          3,9|           1,7| 
```

**更新**：如果您在文档中获得原始降价，请尝试设置`results = "asis"`块选项。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-18T22:45:47.853

可以做到这一点的两个包是[迎合](https://github.com/Rapporter/pander)

```
library(devtools)
install_github('pander', 'Rapporter') 
```

或[ASCII](http://cran.r-project.org/web/packages/ascii/index.html)

`pander`是一种稍微不同的报告构造方法，（但对于此功能很有用）。

`ascii`将允许您`print`使用`type = 'pandoc`（或其他各种降价口味）

```
library(ascii)
print(ascii(head(iris[,1:3])), type = 'pandoc')

    **Sepal.Length**   **Sepal.Width**   **Petal.Length**  
--- ------------------ ----------------- ------------------
1   5.10               3.50              1.40              
2   4.90               3.00              1.40              
3   4.70               3.20              1.30              
4   4.60               3.10              1.50              
5   5.00               3.60              1.40              
6   5.40               3.90              1.70              
--- ------------------ ----------------- ------------------ 
```

请注意，在这两种情况下，它都是针对使用`pandoc`从 markdown 转换为所需的文档类型，但是 using`style='rmarkdown'`将创建与此`markdown`包兼容的表和`rstudio`.

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-03-22T14:20:39.253

只是想用我决定做的事情来更新它。我现在正在使用该`hwriter`包来打印表格，并使用`row.*`和`col.*`功能将 CSS 类放在不同的元素上。然后，我编写了自定义 CSS 来制作我想要的显示。所以，这是一个例子，以防其他人正在处理类似的事情。

首先，创建一个文件，将`knitting`Markdown 更改为 HTML：

```
FILE: file_knit.r
#!/usr/bin/env Rscript

library(knitr)
library(markdown)

knit("file.Rmd")
markdownToHTML("file.md","file.html",stylesheet="~/custom.css") 
```

接下来，创建实际的 Markdown 文件：

```
FILE: file.Rmd
Report of Fruit vs. Animal Choices
==================================

This is a report of fruit vs. animal choices.

```{r echo=FALSE,results='asis'}
library(hwriter)
set.seed(9850104)
my.df <- data.frame(Var1=sample(x=c("Apple","Orange","Banana"),size=40,replace=TRUE),
                    Var2=sample(x=c("Dog","Cat","Bunny"),size=40,replace=TRUE))

tbl1 <- table(my.df$Var1,my.df$Var2)

tbl1 <- cbind(tbl1,rowSums(tbl1))
tbl1 <- rbind(tbl1,colSums(tbl1))

colnames(tbl1)[4] <- "TOTAL"
rownames(tbl1)[4] <- "TOTAL"

# Because I used results='asis' for this chunk, I can just use cat() and hwrite() to 
# write out the table in HTML. Using hwrite()'s row.* function, I can assign classes
# to the various table elements.
cat(hwrite(tbl1,
           border=NA,
           table.class="t1",
           row.class=list(c("header col_first","header col","header col","header col", "header col_last"),
                          c("col_first","col","col","col","col_last"),
                          c("col_first","col","col","col","col_last"),
                          c("col_first","col","col","col","col_last"),
                          c("footer col_first","footer col","footer col","footer col","footer col_last"))))
``` 
```

最后，只需创建一个自定义 CSS 文件。

```
FILE: custom.css
body {
  font-family: sans-serif;
  background-color: white;
  font-size: 12px;
  margin: 20px;
}

h1 {font-size:1.5em;}

table {
  border: solid;
  border-color: black;
  border-width: 2px;
  border-collapse: collapse;
  margin-bottom: 20px;
  text-align: center;
  padding: 0px;
}

.t1 .header {
  color: white;
  background-color: black;
  border-bottom: solid;
  border-color: black;
  border-width: 2px;
  font-weight: bold;
}

.t1 .footer {
  border-top: solid;
  border-color: black;
  border-width: 2px;
}

.t1 .col_first {
  border-right: solid;
  border-color: black;
  border-width: 2px;
  text-align: left;
  font-weight: bold;
  width: 75px;
}

.t1 .col {
  width: 50px;
}

.t1 .col_last {
  width: 50px;
  border-left: solid;
  border-color: black;
  border-width: 2px;
} 
```

执行`./file_knit.r`给了我file.html，它看起来像这样：

![示例输出](../Images/87ca34f2a8cdd7a0204f3ff0004f8e66.png)

所以，希望这可能对其他想要在 Markdown 输出中进行更多格式化的人有所帮助！

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-03-18T22:45:27.840

包中有功能`pander`：

```
> library(pander)
> pandoc.table(head(iris)[, 1:3])

-------------------------------------------
 Sepal.Length   Sepal.Width   Petal.Length 
-------------- ------------- --------------
     5.1            3.5           1.4      

     4.9             3            1.4      

     4.7            3.2           1.3      

     4.6            3.1           1.5      

      5             3.6           1.4      

     5.4            3.9           1.7      
------------------------------------------- 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-05-22T21:52:09.500

制作自己的自定义功能并不难。这是一个非常简单的概念证明，用于生成 a 的 rmarkdown 表`data.frame`：

```
 rmarkdownTable <- function(df){
      cat(paste(names(df), collapse = "|"))
      cat("\n")
      cat(paste(rep("-", ncol(df)), collapse = "|"))
      cat("\n")

      for(i in 1:nrow(df)){
        cat(paste(df[i,], collapse = "|"))
        cat("\n")
        }
    invisible(NULL)
    } 
```

在 .Rmd 文档中，您将使用以下功能`results = 'asis'`：

```
```{r, results = 'asis'}
rmarkdownTable <- function(df){
  cat(paste(names(df), collapse = "|"))
  cat("\n")
  cat(paste(rep("-", ncol(df)), collapse = "|"))
  cat("\n")

  for(i in 1:nrow(df)){
    cat(paste(df[i,], collapse = "|"))
    cat("\n")
    }
invisible(NULL)
}

rmarkdownTable(head(iris))
``` 
```

上面的代码将为您提供下图（在示例中这是 pdf 输出，但由于表格在 markdwon 中，您也可以编织成 html 或 word）。

![在此处输入图像描述](../Images/bb1cc374ed727d8fe5d1792646c14aed.png) 从这里 - 并阅读其他人的代码 - 您可以弄清楚如何操作文本以生成您想要的表格并创建更多个性化的功能。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-04T00:03:07.113

在降价文档中使用 knitr::kable 和 xtable 的组合。

```
library("knitr","xtable") 
```

对于一个简单的 data.frame -

```
kable(head(mtcars[,1:4]),format="markdown")
kable(head(mtcars[,1:4]),format="pandoc",caption="Title of the table") 
```

`format="pandoc"`允许更多选项，例如标题。

现在**模型总结**的组合。

```
data(tli)
fm1 <- aov(tlimth ~ sex + ethnicty + grade + disadvg, data=tli)
kable(xtable(fm1), caption = "Annova table") 
```

如需更多选项，请查看`stargazer`package 而不是`xtable`.

[个人使用示例](http://rpubs.com/pankil/84526 "我的例子")

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-28T14:51:38.713

要在 R 中编写/创建 Markdown 表，您还可以使用[MarkdownReports](http://markdownreports.github.io/) `MarkDown_Table_writer_DF_RowColNames()`或`MarkDown_Table_writer_NamedVector()`函数。您只需传递带有维度名称的数据框/矩阵或带有名称的向量，它就会解析并以 Markdown 格式写出表格。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-10T08:42:50.290

我的 Gitlab 功能：

```
to_markdown<-function(df) {
    wrap<-function(x,sep=" ") paste0("|", sep, paste(x, collapse=paste0(sep,"|",sep)), sep, "|", sep=sep)
    paste0(wrap(colnames(df)),
    "\n",
    wrap(rep("------", ncol(df)),sep=""),
    "\n",
    paste(apply(df, 1, wrap), collapse="\n"))
}

cat(to_markdown(head(iris[,1:3]))) 
```

```
| Sepal.Length | Sepal.Width | Petal.Length | 
|------|------|------|
| 5.1 | 3.5 | 1.4 | 
| 4.9 | 3 | 1.4 | 
| 4.7 | 3.2 | 1.3 | 
| 4.6 | 3.1 | 1.5 | 
| 5 | 3.6 | 1.4 | 
| 5.4 | 3.9 | 1.7 | 
```

# mysql - 无法创建表 #1113 - 表必须至少有 1 列

> ID：15488354
> 
> 赞同：2
> 
> 时间：2013-03-18T22:41:49.560
> 
> 标签：mysql, create-table

我不知道为什么我会收到这个错误，我想今天早上我运行这个查询没有错误并且它有效.. 我试图将两个不同的表合并到一个表中，这些表具有相同的字段，但值不同。

我在用：

```
create table jos_properties_merged engine = MERGE UNION =
(mergecasas.jos_properties_contacts,viftestdb.buu_properties_contacts); 
```

我得到

```
"#1113 - A table must have at least 1 column " 
```

请问你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:58:02.090

根据[此链接](http://dev.mysql.com/doc/refman/5.0/en/merge-storage-engine.html)，您需要指定 2 个表中存在的完全相同的列：

> CREATE TABLE t1 (一个 INT NOT NULL AUTO_INCREMENT PRIMARY KEY, message CHAR(20)) ENGINE=MyISAM;
> 
> CREATE TABLE t2 (一个 INT NOT NULL AUTO_INCREMENT PRIMARY KEY, message CHAR(20)) ENGINE=MyISAM;
> 
> INSERT INTO t1 (message) VALUES ('Testing'),('table'),('t1'); mysql> INSERT INTO t2 (message) VALUES ('Testing'),('table'),('t2');
> 
> CREATE TABLE 总计（-> 一个 INT NOT NULL AUTO_INCREMENT，-> 消息 CHAR(20)，INDEX(a)）-> ENGINE=MERGE UNION=(t1,t2) INSERT_METHOD=LAST；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T18:03:14.720

```
CREATE TABLE [IF NOT EXISTS] table_name(
   column_1_definition,
   column_2_definition,
   ...,
   table_constraints
) ENGINE=storage_engine; 
```

> 或者：（示例）
> 
> mysql>

```
Create Table films (
       name varchar(20), 
       production varchar(20), 
       language varchar(20)
       ); 
```

# jquery - 如何从文件夹（需要可移动）运行离线演示页面？

> ID：15488355
> 
> 赞同：0
> 
> 时间：2013-03-18T22:41:52.677
> 
> 标签：jquery, html, css, offline, link-tag

如何创建从文件夹运行的演示页面（html 文件）（这是棘手的部分）能够在不中断样式表/javascript 链接的情况下重新定位？显然，我可以离线创建页面并将基本标记设置为包含文件夹，但如果要移动文件夹，例如移动到另一台计算机，链接将被破坏，所有样式和编码都会从页面中消失。我已经看到这样做了，所以我知道这是可能的，但我无法弄清楚。

谢谢

编辑：我意识到我可以将样式和 javascript 放在 html 文件本身中，但我想避免这种情况，因为它会变得非常混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:45:13.423

对 css、图像等使用相对路径怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:52:10.527

您应该使用相对链接，如下所示：

```
<img src="img/pic.jpg">
<script type="text/javascript" src="js/script.js"></script>
<link rel="stylesheet" type="text/css" href="css/style.css"> 
```

所以你得到了这些文件：

```
movable_folder/page.html
movable_folder/img/pic.jpg
movable_folder/js/script.js
movable_folder/css/style.css 
```

有关 relatite/absllute 链接的更多信息： [http ://www.motive.co.nz/glossary/linking.php](http://www.motive.co.nz/glossary/linking.php)

# html - div后没有出现文字

> ID：15488356
> 
> 赞同：0
> 
> 时间：2013-03-18T22:41:52.800
> 
> 标签：html, css

我试图让文本出现在包含背景图像的 div 元素之后，但它下面没有出现任何文本。我不确定要添加什么，该段落不存在，并且我已经为“这是一个测试”尝试了多种样式。

```
<div id="opener">
<p id="introText">
Adam Ginther is a<class id="blueText"> front-end developer</class> with an interest in responsive & mobile design
</p>
</div>
<br>
<div id="bottomOpener">
<p id="awesome">
I'm also 100% awesome
</p>
</div>
<p> This is a test</p>

/*  first.css */
body {
    background-color: black;
    font-family: 'Fenix', serif;
}
#opener {
    background-image: url('../images/background.jpg');
    background-color: #373737;
    background-repeat:no-repeat;
    background-attachment:fixed;
    background-position:center;
    height: 800px;
    width: 100%;
    position: fixed;
    text-align: center;
}
#introText {
    width: 400px;
    height: 40px;
    margin-left: 200px;
    left: 20%;
    color: #ececec;
    background-color: black;
    text-align: center;
    position: absolute;
    padding: 50px 80px 50px 80px;
    font-size: 1.2em;
    /* black, 50% opacity */
    background-color: rgba(0, 0, 0, .3);
    position: absolute;
}
#blueText {
    color:#00aeff;
}
#awesome {
    color: white;
}
#bottomOpener {
    background-color: white;
}
p {
    color: green;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:44:42.323

最有可能的是，您的文本隐藏在`position: fixed;`图像下方。您可以`position: static;`改为使用它，或调整段落的位置。如果您有 jsFiddle，我们可以进一步测试您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:47:36.370

当您`position: fixed`在`#opener`元素上使用它时，它会从文档的正常流程中提取并显示在其余内容的顶部。您想看到的 p 元素因此隐藏在下面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:47:57.973

`intro`如其他答案所述，您的文字在您的后面。这是一个修复它的小提琴[http://jsfiddle.net/ASd33/](http://jsfiddle.net/ASd33/)通过添加`z-index: -1`到您的`#opener`.

请注意，这不是一个好的解决方案，但它足以让您调试。

# javascript - JQuery Datepicker - 特定单元格/日期类型的不同悬停行为？

> ID：15488358
> 
> 赞同：0
> 
> 时间：2013-03-18T22:42:16.033
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

是否可以为不同的日期类型分配不同的悬停方法？

例如：

```
beforeShowDay: function(dDate){
              if(condition1){
                  //assign specific method to the "available" type / cell
                  return [true, 'Available', 'specific text'];
              }else if(condition2){
                  //assign specific method to the "not available" type / cell
                  return [false, 'Full', 'specific text'];
              }
              //and so on...
} 
```

我的问题是我不知道如何访问 datepicker 表的特定单元格元素。我知道如何为每个单元格赋予相同的悬停功能，但不知道如何为特定日期类型分配不同的功能。

使用 CSS 更改颜色和内容会起作用，但我需要在悬停功能中添加一些额外的功能。例如在另一个 div 中显示一些文本。

* * *

### 解决了

我为我的问题找到了解决方案，但它的方向与假设的完全不同。使用以下代码，我能够为每个单元格类型/日期类型定义不同的悬停函数：

```
function setCellHover() {
$(".ui-datepicker-calendar tbody td").mouseenter(function() {

    if($(this).attr("class").indexOf("Available") != -1){
        //do your specific stuff for the "available" cell-type here
    }else if($(this).attr("class").indexOf("Full") != -1){
        //do your specific stuff for the "full" cell-type here
    }//and so on...
    });
} 
```

如您所见，我只是查找在 datepicker 的“beforeShowDay”选项中设置的当前单元格的 css className。然后我在那里分配不同的悬停行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:59:46.160

我知道有两种方法，但都不是很好。

```
var dateElements = $("td[data-month][data-year]", calendar);
dateElements.each(function() {
    var day = parseInt($(this).text(), 10);
    var month = $(this).data("month");
    var year = $(this).data("year");
    var dateElement = $(this);
    dateElement.mouseover(function() {
        console.log(day, month, year);
    });
}); 
```

另一种是使用奇怪的 beforeShowDay 可选参数生成类。[http://api.jqueryui.com/datepicker/#option-beforeShowDay](http://api.jqueryui.com/datepicker/#option-beforeShowDay)

> beforeShowDayType：函数（日期日期）默认值：null
> 
> 函数将日期作为参数，并且必须返回一个数组，其中 [0] 等于 true/false 指示此日期是否可选，[1] 等于 CSS 类名称或默认表示为 ""，并且 [ 2] 此日期的可选弹出工具提示。在显示之前，它会在日期选择器中的每一天被调用。

您的请求是一个常见的用例场景，因此希望有人可以为我们提供更好的方法。

# jquery - 我可以遍历 Handlebars 中的多个数组吗

> ID：15488365
> 
> 赞同：0
> 
> 时间：2013-03-18T22:42:52.693
> 
> 标签：jquery, handlebars.js

这里有点高要求，但我想将此数组/集合传递给车把

```
 var thisWeek = {
    date: "18-3-13",
    comment: "Run through days of the week",
    days:[{
    monday:[
      {vehicle: "Number 1", driver: "Jack_Franklin", events: "Boat Race"},
      {vehicle: "Number 2", driver: "Paul Smith", events: "Racing"},
      {vehicle: "Number 3", driver: "Andrew Kay", events: "Skiing"} 
      ],
    tuesday:[
      {vehicle: "Number 1", driver: "Jack_Franklin", events: "pick up trailer"},
      {vehicle: "Number 2", driver: "Paul Smith", events: "MOT "},
      {vehicle: "Number 3", driver: "Andrew Kay", events: "Park up for day"} 
      ],
    }],
  } 
```

我想做的是遍历一周中的几天并列出那天的所有车辆，例如-

```
 <script id="ajax-comment" type="text/x-handlebars-template">

    {{#each days}}
    <h2> {{ The day of the week ie Monday - Tuesday etc}}  </h2> 

           {{# each vehicle in monday etc }} 
             {{vehicle}}: {{driver}} : {{events}} <br/>
           {{/each }} 

    {{/each }}  

    </script> 
```

我可以传递一个仅包含星期一详细信息的数组，它对我有用，但无论如何我可以一次做很多事情吗？理想情况下，我想在大约 20 天内传递每天大约 15 辆车的详细信息。希望这有意义吗？，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:51:15.217

...假设您可以将结构更改为：

```
{
    days: [{
        day: "Monday",
        vehicles: [{vehicle: "Number 1", driver: "Jack_Franklin", events: "pick up trailer"}]
    }, {
        day: "Tuesday",
        vehicles: [{vehicle: "Number 1", driver: "Jack_Franklin", events: "pick up trailer"}]
    }]
} 
```

...您应该可以这样做；

```
{{#each days}}
    <h2>The day of the week is {{day}} </h2>

    {{#each vehicles}}
        {{vehicle}}: {{driver}} : {{events}} <br />
    {{/each}}
{{/each}} 
```

# c# - SQL Server CE 数据库的副本在我尝试打开时要求输入密码

> ID：15488369
> 
> 赞同：0
> 
> 时间：2013-03-18T22:43:20.933
> 
> 标签：c#, .net, sql-server, winforms, sql-server-ce

**嗨专家**

我正在用 C# 编写一个带有 SQL Server CE 数据库的 Winforms 应用程序，我`Database.sdf`使用`File.Copy()`方法创建了文件的备份，一切都按预期工作。

但是当我尝试`BackUpDatabase.sdf`用 SSMS 打开最近创建的文件来检查备份时，它说

> *指定的文件不是有效的 SQL Server Compact 文件，或者它已损坏。你想修理它吗？*

当我单击**yes**时，会出现另一个对话框“连接到服务器”，上面写着

> *无法连接到 G:\DataBaseBackUpFile.sdf。*
> 
> *为源数据库指定的密码不正确。[数据源 = G:\DataBaseBackUpFile.sdf]（SQL Server Compact ADO.NET 数据提供程序）*

现在我请各位专家帮我解决这个错误

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:22:39.940

感谢**ALMIGHTY** ，它完成了..

在第一种情况下，我使用的是 ***databasePath = Path.GetDirectoryName(Application.ExecutablePath+@"\Database.sdf");*** 现在我使用了 ***databasePath = Path.GetFullPath(Application.StartupPath+@"\Database.sdf")****；*

它正在工作..

我感谢所有专家所做的一切。

# iphone - CATransaction CompletionBlock 立即触发

> ID：15488380
> 
> 赞同：1
> 
> 时间：2013-03-18T22:44:01.570
> 
> 标签：iphone, ios, caanimation, catextlayer, catransaction

我有这段代码在我的其他项目中完美运行，在该项目中，我实现了文本在循环中从黑色闪烁到白色的“频闪”效果。当我将它复制并粘贴到我的另一个项目中时，CompletionBlock 会立即触发，而忽略动画持续时间。可能是什么原因？

```
- (void)animateTextFlashingWhite
{
    [CATransaction begin];
    [CATransaction setCompletionBlock:^{
        [self animateTextFlashingBlack];
        NSLog(@"finished white");
    }];
    [CATransaction setValue:[NSNumber numberWithFloat:0.7f] forKey:kCATransactionAnimationDuration];
    self.myStrobeLabel.textColor = [UIColor whiteColor];
    [CATransaction commit];
}

- (void)animateTextFlashingBlack
{
    [CATransaction begin];
    [CATransaction setCompletionBlock:^{
        [self animateTextFlashingWhite];
        NSLog(@"finished black");
    }];
    [CATransaction setValue:[NSNumber numberWithFloat:0.7f] forKey:kCATransactionAnimationDuration];
    self.myStrobeLabel.textColor = [UIColor blackColor];
    [CATransaction commit];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:46:40.050

我不认为`textColor`是动画。

如果您只是想要一个淡入淡出，您可以通过向`CATransition`标签添加一个对象来完成此操作。

```
[self.myStrobeLabel.layer addAnimation:[CATransition animation] forkey:@"transition"];
self.myStrobeLabel.textColor = [UIColor blackColor]; 
```

# ruby-on-rails-3 - 无法执行任何 rails 或 rake 命令

> ID：15488382
> 
> 赞同：2
> 
> 时间：2013-03-18T22:44:03.820
> 
> 标签：ruby-on-rails-3

当我尝试执行任何命令时，例如`rake secret`或`rails server`

我收到以下错误并被`rake`中止：

> 该方法`YAML.enable_arbitrary_object_deserialization!`已被弃用，并将在 SafeYAML 的下一个版本中删除 - 将 设置`SafeYAML::OPTIONS[:default_mode]`为`:safe`或`:unsafe`。

请指教。（我是 Ruby on Rails 新手）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:02:18.733

请执行下列操作：

```
1- Go to the root of your application.
2- From there, go to the `config` folder and open the `environment.rb`
3- Put `SafeYAML::OPTIONS[:deserialize_symbols] = true`
4- Try again. 
```

这是 Safe_Yaml gem 中列出的一个已知问题：[https](https://github.com/dtao/safe_yaml) ://github.com/dtao/safe_yaml （参见已知问题部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:01:12.410

原来我使用了错误版本的 ruby​​，我的 rvm 坏了。另外，我的 .rvmrc 文件没有正确执行。

1.  我按照 [Installed Ruby 1.9.3 with RVM 中的说明进行操作，但命令行未显示 ruby​​ -v](https://stackoverflow.com/questions/9056008/installed-ruby-1-9-3-with-rvm-but-command-line-doesnt-show-ruby-v/9056395#9056395) 并重建我的 RVM

2.  然后将 rvm 与我的 shell 集成： [https ://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)

3.  为我的项目安装了正确版本的 ruby​​：rvm install ruby​​-1.9.3-p374

我仍然收到“YAML.enable ...”警告，但命令现在执行。

# android - 保存设置数据

> ID：15488388
> 
> 赞同：0
> 
> 时间：2013-03-18T22:45:05.673
> 
> 标签：android

谁能建议保存设置数据的最佳方法？我希望该用户能够找到他在上次使用应用程序时更改的所有内容。目前我正在读取放置在 res/raw 目录中的 sav.bin 文件，但是是否可以访问该文件并在其中写入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:47:09.650

只需使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。它们只不过是一个键值存储。

[你可以在这里](http://developer.android.com/guide/topics/data/data-storage.html#pref)找到所有的细节

# java - 如何在 JFrame 窗口中移动精灵（图像）？

> ID：15488390
> 
> 赞同：1
> 
> 时间：2013-03-18T22:45:15.500
> 
> 标签：java, swing, sprite, pixels

我在跨`JFrame`窗口移动图像时遇到了一些问题。以下是代码的外观：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.*;

public class Main extends JFrame implements KeyListener{

Image caitlanImage = new ImageIcon("Caitlan.png").getImage();
Person caitlan = new Person(caitlanImage, "Caitlan", 10, 200, true);

Person jake;
Image jakeImage;

//Background images
Image granadaBackground;

public static void main(String[] args) throws InterruptedException{
    new Main();
}
public Main() throws InterruptedException{
    setSize(700,300);
    setTitle("Project Anniversary");
    setVisible(true);   
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    addKeyListener(this);

    //Instantiate background images
    granadaBackground = new ImageIcon("Granada Background.jpg").getImage();

    //Spawn first background
    spawnBackground(granadaBackground);

    //Spawn initial sprite
    spawnSprite(caitlan);
}

public void moveSprite(Person p) throws InterruptedException{   //Method to move a         
sprite 10 pixels (BROKEN)
    Graphics g = this.getGraphics();
        p.setLocation(p.getPosX() + 10, p.getPosY());
        g.drawImage(caitlan.getImage(), caitlan.getPosX() + 10,     
caitlan.getPosY(), caitlan.getImage().getWidth(null), caitlan.getImage().getHeight(null), 
null);
}
public void paint(Graphics g){   //Overridden paint method

}
public void spawnSprite(Person p){  //Method to initially spawn a sprite
    Graphics g = this.getGraphics();
    g.drawImage(p.getImage(), p.getPosX(), p.getPosY(), 
            p.getImage().getWidth(null), p.getImage().getHeight(null), null);
}
public void keyPressed(KeyEvent e) { //Method called whenever a key is pressed
    if(e.getKeyChar() == new String("d").charAt(0)){
        try {
            moveSprite(caitlan);
        } catch (InterruptedException e1) {

        }
    }
}
public void spawnBackground(Image backgroundImage){
    Graphics g = this.getGraphics();
    g.drawImage(backgroundImage, 0, 0, backgroundImage.getWidth(null),    
backgroundImage.getHeight(null),null);
}

public void keyReleased(KeyEvent e) {   //IGNORE

}
public void keyTyped(KeyEvent e) {      //IGNORE

}

} 
```

这里的意思是，只要按下“d”键，精灵就会向右移动 10 个像素。然而，最终发生的事情是，它被重新绘制了 10 个像素，而原始图像仍然存在，所以看起来像是一堆令人恶心的图片相互叠加。这似乎是一个相当简单的问题，但我如何简单地将精灵移动 10 像素！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:49:07.860

我在您的代码中看到了几个问题，包括：

*   `getGraphics()`通过调用组件获取您的 Graphics 对象。请注意，此对象不会持续存在。
*   直接在 JFrame 中绘图
*   不绘制`paintComponent(...)`JComponent 的方法，例如 JPanel
*   不在`super.paintComponent(...)`方法内部调用`paintComponent(...)`方法。
*   使用 KeyListener 而不是键绑定
*   不为动画循环使用 Swing Timer。

看起来你还没有阅读过 Swing 图形的教程，如果是这样，我建议你不要拖延，你也可以看看这个网站上的许多如何做动画的例子，一些其中是我创造的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:52:37.867

为了简洁地解决您的问题，发生的事情是您本身并没有重绘任何东西。您只是在旧图像之上绘制新图像，并且图形在重绘周期中保持不变。

只需执行以下操作：

g.setColor(Color.white); g.fillRect(0,0,getWidth(),getHeight());

在你绘制图像之前。将颜色更改为 JFrame 的背景颜色，使其看起来无缝（我认为它只是 getBackgroundColor()）。不过，你应该得到一本关于 Swing 的好书。

# sql - SQL转1个字段，多条记录变成1条记录多字段

> ID：15488394
> 
> 赞同：3
> 
> 时间：2013-03-18T22:45:40.323
> 
> 标签：sql, ms-access, self-join

如果我更有经验，我可以使用类似的“合并行”问题来解决这个问题，但我无法让它们起作用。我在 accdb 中有大约 2000 个具有某些类别的“车库”（实际上是带有患者数据的诊所，但在这里进行了简化）。下面是一个车库数据如何存在的示例：

```
Garage ID   Car_Color        Sub_Type?   Color_Count
    42       Blue            Striped        5
    42       Blue                           10
    42       Red                            23
    42       Yellow                         2 
```

我需要将每个车库变成一个记录，每种颜色作为一个单独的字段，并带有计数，所需的输出如下所示：

```
Garage ID   Blue Cars (total)  Blue Cars (striped)   Red Cars  Yellow Cars   Orange Cars
    42         15                    5                  23          2             0 
```

有一个类别具有子类型，此处显示为“蓝色汽车”和“蓝色汽车（条纹）”。对于那些，我需要将没有子类型的“蓝色”计数与其他“蓝色”计数相加，以获得总“蓝色”计数。然后，我会将 Blue 子类型列为单独的字段。大多数车库都没有列出橙色汽车，所以当没有橙色汽车的记录时，我需要让该字段的记录显示为 0，但如果有记录，则反映计数。

这似乎与其他自联接非常相似，但我无法让计数方面工作或没有记录的“0”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T22:50:29.933

您可以将聚合函数与[`IIF()`](http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx)表达式一起使用：

```
select [Garage ID],
  sum(IIF(Car_color='Blue', Color_Count, 0)) as BlueCarsTotal,
  sum(IIF(Car_color='Blue' AND [Sub_Type?]='Striped', Color_Count, 0)) as BlueCarsStripedTotal,
  sum(IIF(Car_color='Red', Color_Count, 0)) as RedCarsTotal,
  sum(IIF(Car_color='Yellow', Color_Count, 0)) as YellowCarsTotal,
  sum(IIF(Car_color='Orange', Color_Count, 0)) as OrangeCarsTotal
from yourtable
group by [Garage ID] 
```

如果您在另一个允许`CASE`表达式的数据库中执行此操作，则查询将是：

```
select [Garage ID],
  sum(case 
       when Car_color='Blue' 
       then Color_Count else 0 end) as BlueCarsTotal
  sum(case 
       when Car_color='Blue' AND [Sub_Type?]='Striped' 
       then Color_Count else 0 end) as BlueCarsStripedTotal,
  sum(case 
       when Car_color='Red' 
       then Color_Count else 0 end) as RedCarsTotal,
  sum(case 
       when Car_color='Yellow' 
       then Color_Count else 0 end) as YellowCarsTotal,
  sum(case 
       when Car_color='Orange' 
       then Color_Count else 0 end) as OrangeCarsTotal
from yourtable
group by [Garage ID] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T23:09:34.110

A crosstab may suit:

```
TRANSFORM Sum(Garages.Color_Count) AS SumOfColor_Count
SELECT Garages.GarageID
FROM Garages
GROUP BY Garages.GarageID
PIVOT [Car_Color] & " " & [sub_type?]; 
```

# c# - 如何通过 jQuery 调整 iFrame 的大小？

> ID：15488399
> 
> 赞同：2
> 
> 时间：2013-03-18T22:46:03.557
> 
> 标签：c#, javascript, jquery, asp.net

我一直在尝试通过使用[此处](https://stackoverflow.com/questions/12872394/resize-iframe-to-content-with-jquery)的信息来根据 iFrame 的内容调整 iFrame 的大小。他的演示位于[此处](http://jsfiddle.net/gnel/kkSSH/)。

我正在使用以下内容：

```
$("#IframeId").load(function() {
    $(this).height( $(this).contents().find("body").height() );
}); 
```

是否在`.find("body")`内部 iframe 内容的标题部分检查“正文”？我确实在托管页面中看到了这一点。

我还在上面的代码中添加了以下内容：

```
 alert($(this).height( $(this).contents().find("body").height())); 
```

我没有看到警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:25:41.640

我认为您必须尝试在 IFrame 的源中找到特定元素的高度，而不是 html 标记本身，因为它没有指定的高度。这是一个工作示例：

```
$("#IframeId").load(function() {
    $(this).height( $(this).contents().find("#box").height() ); //box can be changed to the id of the element you want
}); 
```

如果你有一个容器 div，它的宽度是你想要的 iframe，你可以使用它的 id，而不是 box。（注意：box 是[这个](http://jsfiddle.net/gnel/kkSSH/)JsFiddle 示例中主要元素的 id。）

# jquery - Ajax 请求，忽略 cookie？

> ID：15488400
> 
> 赞同：3
> 
> 时间：2013-03-18T22:46:05.877
> 
> 标签：jquery, ajax, cookies, angularjs

我正在通过 ajax（angularJs，但也尝试过 jQuery）调用服务器。响应包含一个 cookie，但是由于某种原因，该 cookie 没有保留在客户端上。我可以在响应中看到 Set-cookie 标头，但 cookie 不会出现在 Chrome 的开发工具中，也不会出现在服务器上的后续请求中。

这是一个服务器代码（这是 WebAPI）：

```
HttpResponseMessage response = new HttpResponseMessage(HttpStatusCode.OK);
response.Headers.AddCookies(new[] { new CookieHeaderValue("auth", "my cookie content") { Expires = DateTime.Now.AddDays(7), Domain = "/" } });
IContentNegotiator negotiator = Configuration.Services.GetContentNegotiator();
ContentNegotiationResult result = negotiator.Negotiate(typeof(LoggedInModel), Request, Configuration.Formatters);
response.Content = new ObjectContent<LoggedInModel>(new LoggedInModel { Email = model.Email }, result.Formatter);
return response; 
```

没有什么，真的，我可以再次看到 cookie 标题。这是响应中的 cookie 标头：

> Set-Cookie:auth=some-value-here; 过期=格林威治标准时间 2013 年 3 月 25 日星期一 20:39:43；域=/

我试图从 IIS 运行它，所以它不是 localhost-something - 没有帮助。

它不是 CORS，同一台服务器，ajax 调用是对“/api/blah”类型的地址进行的。

任何想法我错过了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T15:24:09.093

需要在 cookie 上设置路径……呃！基本上，在创建 cookie 时，请确保您设置了路径属性：

> var cookie = new CookieHeaderValue("auth", "blah") { Expires = DateTime.Now.AddDays(7), **Path = "/",** HttpOnly = true };

同样，这是 web api，我相信 MVC 默认设置它 - 至少我在创建 cookie 时不必指定路径。

# wordpress - 查询字符串断页

> ID：15488401
> 
> 赞同：1
> 
> 时间：2013-03-18T22:46:06.263
> 
> 标签：wordpress, .htaccess, google-analytics, query-string

传入链接上的 Google Analytics 查询字符串会破坏我网站的显示。

有谁知道为什么以下会导致我的网站无法正确加载其主页（它似乎阻止加载页面需要的某些插件）

```
http://mysite.com/?utm_medium=email 
```

虽然这不会：

```
http://mysite.com/#utm_medium=email 
```

如果你知道为什么，我该如何解决这个问题？我有使用查询字符串方法的传入链接，它们都导致访问者看到一个损坏的主页。

该站点使用“漂亮的 url”，因此站点路由不需要查询字符串。我尝试通过 apache rewrite 简单地删除查询字符串（这很容易做到并且有效，我在下面给出了一个示例）但是我假设如果我这样做，Google Analytics 将无法跟踪它需要什么。

这是我`.htaccess`的情况，以防万一：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# Handle redirection from https to http
RewriteCond %{HTTPS} =on
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1 [L,R=301]

# Example of what would strip query strings from url
#RewriteCond %{THE_REQUEST} \?[^\ ]+
#RewriteRule (.*) /$1? [R=301,L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

**额外的**

除了@faa 的解决方案和将@Eduardo 的位合并到此之外，我还需要排除管理目录受到影响。我通过添加：

```
RewriteCond %{REQUEST_URI} !^\/*(wp-admin) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:48:03.580

“**虽然这不是：** `http://mysite.com/#utm_medium=email` ”

如果 using`#`有效并且是有效选项而不是查询中的问号，您可以尝试以下操作：

```
# Example of what would strip query strings from url
RewriteCond %{QUERY_STRING} .
RewriteRule ^(.*) /$1#%{QUERY_STRING}? [R=301,L,NE,NC] 
```

重定向

`http://mysite.com/?query` 到

`http://mysite.com/#query`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:10:37.957

脚本通常应该忽略它们不期望的查询参数。这是一个很好的经验法则，你的一个脚本被忽略了。您将不得不追踪哪个是有问题的脚本并自己修复它。或在此处提供更多信息，以便更轻松地进行故障排除。一个可以复制的页面的 url 是一个开始，我们至少可以为客户端或服务器端问题隔离一个 url。

作为一种解决方法，您可以改用 Anchor：

[http://mysite.com/#utm_medium=email](http://mysite.com/#utm_medium=email)

只需确保您配置 Google Analytics 以了解 url 锚部分内的参数。

`_trackPageview`只需在通话前添加以下内容。

```
_gaq.push(['_setAllowAnchor', true]); 
```

参考：[https ://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiCampaignTracking#_gat.GA_Tracker_._setAllowAnchor](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiCampaignTracking#_gat.GA_Tracker_._setAllowAnchor)

# android-4.2-jelly-bean - Android 应用程序安装失败

> ID：15488406
> 
> 赞同：1
> 
> 时间：2013-03-18T22:46:17.477
> 
> 标签：android-4.2-jelly-bean

我从控制台收到消息，表明应用程序无法在模拟器上安装（在设备“emulator-5554”上）。我有来自 MapView 教程的这段代码：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
public class MainActivity extends MapActivity {

@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
      MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}} 
```

activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<com.google.android.maps.MapView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_alignParentBottom="true"
android:layout_alignParentRight="true"
android:apiKey="KEY"
android:clickable="true" >
</com.google.android.maps.MapView>

</RelativeLayout> 
```

和清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="diplomska.proketi.prv"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.INTERNET"/>    
<uses-sdk
    android:minSdkVersion="17"
    android:targetSdkVersion="17" /> 
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" /> 
  <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >        
   <uses-library android:name="com.google.android.maps"/>        
    <activity
        android:name="diplomska.proketi.prv.MainActivity"
        android:label="@string/app_name" > 
<intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>        
 <meta-data
android:name="com.google.android.maps.v2.API_KEY"
        android:value="KEY" />       
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:52:22.180

下面的代码一切都很好。问题是使用 v2 密钥，您必须使用物理设备测试您的应用程序。

# c# - 如何反序列化自定义对象列表

> ID：15488408
> 
> 赞同：3
> 
> 时间：2013-03-18T22:46:28.060
> 
> 标签：c#, .net, wcf, asp.net-3.5

我真的遇到了一个障碍，试图通过 WCF 服务反序列化自定义对象列表。它使用.NET 4。我如何绕过不同的命名空间。我的 ASP.NET 应用程序在 3.5 上运行，并且参考设置正常。这可能是问题吗？我该如何解决？

我的服务是这样设置的：

**合同**

```
namespace MyDomain.Services.Report
{
   [ServiceContract(Name = "ICompanyReport")]
   public interface ICompanyReport
   {
       [OperationContract]
       byte[] GetFooReport(string fooName);
   }

   [Serializable]
   [DataContract(Name="FooReportRecord", Namespace="MyDomain.com"]
   public class FooReportRecord
   {
      [DataMember]
      public int ID {get; set;}
      [DataMember]
      public string Name {get; set;}
   }

} 
```

**服务端文件**

```
public class CompanyReport: ICompanyReport
{
    public byte[] GetFooReport(string fooName)
    {
        var data = new List<FooReportRecord>();

        // get data based on fooName and populate data

        var ms = new MemoryStream();
        var bf = new BinaryFormatter();
        bf.Serialize(ms, data);
        return ms.ToArray();
    }
} 
```

**客户端：**

```
var ls = proxy.GetFooReport("bar");
var bf = new BinaryFormatter();
var ms = new MemoryStream(ls);

// Unable to find assembly MyDomain.Services.Report error is thrown
var reportData = (List<FooReportRecord>)bf.Deserialize(ms); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:39:50.713

假设您的客户端是您的 .NET 3.5 应用程序并且 FooReportRecord 在您的 .NET 4 wcf 库中，您将收到编译时错误。

将 FooReportRecord 移动到在 .NET 3.5 中编译的第三类库，并从您的 WCF 应用程序和客户端 (ASP.NET) 中引用它

但正如@Phil 提到的，为什么不返回 FooReportRecord[] 而不是 byte[]

**服务**

```
public FooReportRecord[] GetFooReport(string fooName)
{
    var data = new List<FooReportRecord>();

    // get data based on fooName and populate data

    return data.ToArray();
} 
```

**客户**

```
var proxy = new ServiceReference1.CompanyReportClient();
FooReportRecord[] ls = proxy.GetFooReport("bar"); 
```

# jquery - 为什么我的 jQuery 对话框在按下 enter 时会重新加载页面？

> ID：15488411
> 
> 赞同：5
> 
> 时间：2013-03-18T22:46:48.250
> 
> 标签：jquery, jquery-ui, dialog

我正在尝试使用 jQuery 对话框在我的页面中输入数据。由于我不明白的原因，当用户按下回车键时，整个页面都会刷新。它甚至不验证文本框中的内容。

[我创建了一个](http://jsfiddle.net/DarkJaff/m8Ps2/)显示问题的 jsfiddle。我[在这里查看了文档](http://jqueryui.com/dialog/#modal-form)，我的代码似乎遵循了指导方针，但我一定遗漏了一些东西！

这是我如何调用对话框

```
$("#create-subtitle")
    .click(function () {
    $("#dialog-form-subtitles").dialog("open");
    return false;
}); 
```

这是我的对话之一：

```
$("#dialog-form-steptitles").dialog({
        autoOpen: false,
        height: 220,
        width: 450,
        modal: true,
        buttons: {
            "Ajouter un sous-titre pour les étapes": function () {
                var bValid = true;
                allFieldsStepTitle.removeClass("ui-state-error");
                bValid = bValid && checkLength(nameStepTitle, "sous-titre pour les étapes", 3, 50);

                if (bValid) {
                    var $parent = $("#StepTitles");
                    var numElem = $parent.find("tr").length;
                    $('#StepTitles > tbody:last').append('<tr><td><input class="text-box single-line" id="StepTitles_' + numElem + '__Name" name="StepTitles[' + numElem + '].Name" type="text" value="' + nameStepTitle.val() + '" /></td><td>&nbsp;<ul id="ListStep' + numElem + '"></ul></td><td><button id="create-step' + numElem + '" name="create-step' + numElem + '" class="btn btn-success">Ajouter une étape</button></td></tr>');
                    $(this).dialog("close");
                }
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        },
        close: function () {
            allFieldsStepTitle.val("").removeClass("ui-state-error");
        }
    }); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:33:11.863

`enter`在`form`>内点击`input`会导致表单提交，从而刷新页面。您可以做一些事情，但其中大部分涉及阻止表单上的默认提交操作。您的代码大部分是法语，所以我很难导航它，但为了逐步刷新，只需执行以下操作：

```
$('form').on('submit', function(event){
    event.preventDefault();
}); 
```

从那里，你可能想用回车键做一些事情——触发点击按钮——同样，文本是法语的，所以我不知道它在说什么。

```
$('your-input').keypress(function(event) {
    if(event.which == 13) { // 13 is the 'Enter' key
     // do something here
   }
}); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T18:48:01.693

在 jQuery 的文档页面中，该示例没有`form`标签，这就是按预期工作的原因。[在此处](http://jsfiddle.net/m8Ps2/2/)不使用表格检查您的代码。如果您需要标签存在，请检查[这个](https://stackoverflow.com/questions/895171/prevent-users-from-submitting-form-by-hitting-enter)SO question。

# c# - lucene.net 3.0.3 索引空间太慢

> ID：15488419
> 
> 赞同：2
> 
> 时间：2013-03-18T22:47:13.550
> 
> 标签：c#, lucene.net, spatial, lucene

我最近将我的搜索代码从 lucene.net 2.9.4 升级到了 3.0.3。我注意到空间包发生了变化，并相应地更新了我的代码。我注意到升级的一个缺点是索引时间要慢得多。通过消除过程，我已经能够将速度缩小到索引纬度/经度坐标的新空间代码：

```
 public void AddLocation (double lat, double lng)
    {
        try
        {
            string latLongKey = lat.ToString() + "," + lng.ToString();
            AbstractField[] shapeFields = null;
            Shape shape = null;
            if (HasSpatialShapes(latLongKey))
            {
                shape = SpatialShapes[latLongKey];
            }
            else
            {
                if (this.Strategy is BBoxStrategy)
                {
                    shape = Context.MakeRectangle(DistanceUtils.NormLonDEG(lng), DistanceUtils.NormLonDEG(lng), DistanceUtils.NormLatDEG(lat), DistanceUtils.NormLatDEG(lat));
                }
                else
                {
                    shape = Context.MakePoint(DistanceUtils.NormLonDEG(lng), DistanceUtils.NormLatDEG(lat));
                }

                AddSpatialShapes(latLongKey, shape);
            }

            shapeFields = Strategy.CreateIndexableFields(shape);
            //Potentially more than one shape in this field is supported by some
            // strategies; see the javadocs of the SpatialStrategy impl to see.
            foreach (AbstractField f in shapeFields)
            {
                _document.Add(f);
            }
            //add lat long values to index too
            _document.Add(GetField("latitude", NumericUtils.DoubleToPrefixCoded(lat), Field.Index.NOT_ANALYZED, Field.Store.YES, 0f, false));
            _document.Add(GetField("longitude", NumericUtils.DoubleToPrefixCoded(lng), Field.Index.NOT_ANALYZED, Field.Store.YES, 0f, false));
        }
        catch (Exception e)
        {
            RollingFileLogger.Instance.LogException(ServiceConstants.SERVICE_INDEXER_CONST, "Document",string.Format("AddLocation({0},{1})", lat.ToString(), lng.ToString()), e, null);
            throw e;
        }
    } 
```

使用 2.9.4，我能够在大约 11 分钟内索引大约 300,000 行带有 lat/lng 点的数据。使用这个新的空间包需要超过 5 个小时（我已经在测试完成之前杀死了它，所以我没有确切的时间）。这是我正在使用的空间背景/策略：

```
 public static SpatialContext SpatialContext
   {
       get
       {
           if (null == _spatialContext)
           {
               lock (_lockObject)
               {
                   if(null==_spatialContext) _spatialContext = SpatialContext.GEO;
               }
           }
           return _spatialContext;
       }
   }

   public static SpatialStrategy SpatialStrategy
   {
       get
       {
           if (null == _spatialStrategy)
           {
               lock (_lockObject)
               {
                   if (null == _spatialStrategy)
                   {
                       int maxLength = 9;
                       GeohashPrefixTree geohashPrefixTree = new GeohashPrefixTree(SpatialContext, maxLength);
                       _spatialStrategy = new RecursivePrefixTreeStrategy(geohashPrefixTree, "geoField");                           
                   }
               }
           }
           return _spatialStrategy;
       }
   } 
```

我的索引方法有什么问题吗？我已经缓存了由 lat/lng 点创建的形状，因为我不需要相同坐标的新形状。它似乎是在索引期间花费最多时间的 CreateIndexableFields() 方法。我试图缓存此方法生成的字段以重用，但我无法从缓存字段创建 TokenStream 的新实例以在新文档中使用（在 lucene.net 3.0.3 中，TokenStream 的构造函数受到保护）。我在空间策略中将 maxLevels int 降低到 4，但我没有看到索引时间的改进。任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T04:38:10.047

**更新**：我将 SpatialStrategy 更改为 PointVectorStrategy，现在我对大约 300,000 个文档的索引时间已降至 11 分钟。这样做的关键是缓存由形状创建的 IndexableFields，以便在添加到文档时使用。PointVectorStrategy 允许这样做，因为它为索引创建 NumericFields。这对于 RecursiveTreePrefixStrategy 是不可能的，因为它创建带有 TokenStreams 的字段用于索引。在 Lucene.net 3.0.3 中，TokenStreams 不可重复用于索引。感谢大家为此提供帮助。

# git - 从安装指南克隆 git@localhost:gitolite-admin.git 的 gitlab 错误

> ID：15488420
> 
> 赞同：3
> 
> 时间：2013-03-18T22:47:29.607
> 
> 标签：git, repository, notation, git-clone, gitlab

我尝试设置 gitlab 并按照[https://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/installation.md](https://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/installation.md)上的安装指南进行操作。

使用以下命令对 gitolite 进行烟雾测试时出现我当前的问题

```
# Clone the admin repo so SSH adds localhost to known_hosts ...
# ... and to be sure your users have access to Gitolite
sudo -u gitlab -H git clone git@localhost:gitolite-admin.git /tmp/gitolite-admin 
```

问题是 git 存储库的访问语法（存储库表示法）：**git@localhost:gitolite-admin.git**

它适用于以下存储库符号，但我必须输入用户 git 的密码：`sudo -u gitlab -H git clone git@localhost:/home/git/repositories/gitolite-admin.git /tmp/gitadminab`

不知何故，本地主机的 rsa-key 设置不正确，并且存储库的快捷方式不起作用，因为我必须指定 git 存储库的完整路径。

如何解决？

干杯——杰里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:15:15.703

我确认

*   如果您使用的是 gitolite-admin 存储库的完整路径，那么您只是完全绕过了 gitolite：请参阅“[为什么绕过 gitolite 会导致问题](http://gitolite.com/gitolite/sts.html#ybpfail)”。
*   如果您正在输入用户 git“密码”，则意味着根本无法识别公钥，因此请确保 gitolite 安装步骤（即：）确实在文件`sudo -u git -H sh -c "PATH=/home/git/bin:$PATH; gitolite setup -pk /home/git/gitlab.pub"`中正确注册了该密钥。`~git/.ssh/authorized_keys`

# ruby-on-rails - Rails 3远程链接点击在第二次点击时触发不同的请求

> ID：15488423
> 
> 赞同：1
> 
> 时间：2013-03-18T22:47:33.333
> 
> 标签：ruby-on-rails, jquery, fancybox, remotipart

在升级 ruby​​、rubygems 和我的 gem 之前，我有一个运行良好的 Rails 应用程序。

几乎我所有的链接都是远程链接。当我通过单击其中一个链接发出第一个请求时，会触发 Fancybox 并正确打开新内容。当我关闭该框并再次单击相同的链接时，生成的请求完全不同。它请求索引，因此 Fancybox 填充了索引响应。

示例链接：

```
<a href="/companies/87/edit" data-remote="true">Handmade Design</a> 
```

第一个请求：

```
Started GET "/companies/89/edit" for 127.0.0.1 at 2013-03-18 15:34:26 -0700
Processing by CompaniesController#edit as JS 
```

第二个请求：

```
Started GET "/companies" for 127.0.0.1 at 2013-03-18 15:34:26 -0700
Processing by CompaniesController#index as */* 
```

如果有帮助，我将依赖 jquery-rails gem、fancybox 和 remotipart gem。由于这些都已更新，似乎错误可能出现在这些区域之一，但请求完全不同的事实让我认为这是 Rails 格式的问题。下面是 Companies 控制器中编辑操作的样子：

```
#/controllers/companies_controller.rb
respond_to :html, :json
respond_to :js,   :only => [:new, :create, :edit, :update, :destroy]

# ...

# GET /companies/1/edit
def edit
  respond_with @company
end 
```

我使用前置过滤器来获取公司。

任何帮助或线索将不胜感激。

更新

第二个请求似乎总是对当前页面的请求。

更新

我已将其隔离为 JS 问题。这似乎不是 Rails 或远程链接的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:37:08.620

我找到了问题的根源。当 Fancybox 关闭时，它并没有正确替换打开时使用的 HTML。此处记录了该问题和一些解决方案：

[花式盒子没有第二次打开 iFrame](https://stackoverflow.com/questions/5091113/fancy-box-not-opening-iframe-second-time)

# rust - 在 Rust 中使用 .c 源文件

> ID：15488425
> 
> 赞同：11
> 
> 时间：2013-03-18T22:47:42.317
> 
> 标签：rust

是否有包含 .c 源文件的标准方法？

到目前为止，我一直在使用`extern "C" { ... }`公开函数，将 .c 编译为目标文件，运行 rustc 直到 ld 因未定义的引用而窒息，并使用后面显示的参数`error: linking with 'cc' failed with code 1; note: cc arguments: ...`运行`cc myobjfile.o ...`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T12:38:31.397

> 编者注：这个答案早于 Rust 1.0，不再适用。

Luqman 暗示了 IRC；在 crate 文件中使用`extern "C" { ... }`with对我有用。`#[link_args="src/source.c"];`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-24T14:28:05.863

在构建脚本中使用[cc crate将 C 文件编译为静态库，然后将静态库链接到您的 Rust 程序：](https://crates.io/crates/cc)

**货运.toml**

```
[package]
name = "calling-c"
version = "0.1.0"
authors = ["An Devloper <an.devloper@example.com>"]
edition = "2018"

[build-dependencies]
cc = "1.0.28" 
```

**构建.rs**

```
use cc;

fn main() {
    cc::Build::new()
        .file("src/example.c")
        .compile("foo");
} 
```

**src/example.c**

```
#include <stdint.h>

uint8_t testing(uint8_t i) {
  return i * 2;
} 
```

**src/main.rs**

```
extern "C" {
    fn testing(x: u8) -> u8;
}

fn main() {
    let a = unsafe { testing(21) };
    println!("a = {}", a);
} 
```

# yeoman - AMD：app.js 的作用

> ID：15488428
> 
> 赞同：0
> 
> 时间：2013-03-18T22:48:00.673
> 
> 标签：yeoman

“app.js”有什么特殊作用（它说*global define*，但我不知道为什么或在哪里需要它），为什么它不编译成 CoffeeScript，或者至少不超过一次？

我正在使用最新版本的 Yo。

# android - android提取样式没有获取很多属性

> ID：15488429
> 
> 赞同：2
> 
> 时间：2013-03-18T22:48:11.443
> 
> 标签：android, eclipse

我有这样的事情：

```
<Button
    android:id="@+id/answer1"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/editText1"
    android:layout_centerHorizontal="true"
    android:text="@string/answer1" /> 
```

我想将布局宽度、高度和 centerHorizo​​ntal 提取到`styles.xml`. 当我点击 Refactor -> Extract Style 时，我没有得到任何这些选项，但是如果我输入例如 clickable="false" 它确实会显示出来。这是设计使然吗？

# jquery - 在没有回调函数的jQuery插件中延迟执行后返回结果？

> ID：15488431
> 
> 赞同：0
> 
> 时间：2013-03-18T22:48:34.783
> 
> 标签：jquery, jquery-plugins

我有插件，它具有您输入元素的哪一侧的返回方向（例如：顶部，左侧..）。问题是 - 插件内部的一个函数在超时后执行，所以当我调用插件时 - 显然它返回我未定义。

```
;(function($){
  jQuery.fn.myplugin = function(options){

    var somefunction = function(){
        setTimeout(function(elem, e){
            return elem * e; // some action, no matter
        }, 500)              // the important thing - it's executed after plugin returned undefined
    }

    return someFunction;

  };
})(jQuery); 
```

是否可以在不使用回调函数的情况下解决此问题，或者在这种情况下有必要？

我想用户插件喜欢

```
var direction = $('elem').myplugin(); 
```

但是有了回调，这应该是

```
$('elem').myplugin({
    callback: function(direction){
        // so i got direction here
    }
}) 
```

看起来不再那么漂亮了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:53:54.210

您的函数是异步的，因此您的代码不知道函数何时完成，并且不能等到函数执行结束。因此，不可能等待代码完成并返回结果。

为避免需要回调函数，您必须避免使用异步代码（避免 setTimeout）。否则，您将需要一个回调函数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T22:56:07.567

您无法使用回调函数，这是`setTimeout`一般异步编程的本质。这是一件好事，如果它看起来不“漂亮”，请不要被吓倒。

但是为了美观，不需要在插件调用*内部定义回调：*

```
// "driver" code
$('elem').myplugin({
  callback: myApplicationCallback //or desired name
});

// your application logic code
function myApplicationCallback(direction) {
  // do work
} 
```

干净的！

# asp.net-mvc - ActionResult 什么时候被评估？

> ID：15488432
> 
> 赞同：0
> 
> 时间：2013-03-18T22:48:39.537
> 
> 标签：asp.net-mvc, actionresult

我对 ActionResult 何时实际得到评估感到有些困惑。

使用 Authorize 属性时，我可以看到如果用户未获得授权，则结果上下文将设置为未经授权的结果：

```
filterContext.Result = new HttpUnauthorizedResult(); 
```

但是，AuthorizeAttribute 不执行重定向，而是简单地设置上下文，该上下文只是“流动”通过 .NET 管道，直到某些东西将其转换为 401 标头。

我的问题是 .Net 中的实际转换是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:49:45.513

> 我对 ActionResult 何时实际得到评估感到有些困惑。

**在IResultFilter.OnResultExecuting**之后和**IResultFilter.OnResultExecuted**之前对ActionResult**进行评估（不刷新到 HTTP 响应或客户端）**

 ****现在，您使用 Authorize 属性演示的是动作过滤器，它使开发人员能够在动作过滤器生命周期内更改/更改动作结果。如果用户未通过身份验证，则在 Authorize 属性中，**它将操作结果更改**为[HttpUnauthorizedResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.httpunauthorizedresult%28v=vs.108%29.aspx)。现在你在说什么

> 某些东西将其转换为 401 标头

但实际上是 HttpUnauthorizedResult 在实例化 ActionResult 对象时设置了响应头 401。一旦 ActionResult 被实例化，它将被刷新到 HTTP 响应管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:35:06.643

经过一番挖掘，我看到所有的 ActionResults 都继承自抽象类 ActionResult，它有一个抽象方法：ExecuteResult

```
public abstract class ActionResult
{
    public abstract void ExecuteResult(ControllerContext context);
} 
```

每个动作结果用自己的逻辑实现的正是这种方法。

例如，JsonResult 需要指定 ContentType：

```
response.ContentType = "application/json"; 
```

FileResult 设置“Content-Disposition”标头：

```
context.HttpContext.Response.AddHeader("Content-Disposition", headerValue); 
```****

# c# - 如何在 WPF 中为图表添加水平线（“目标线”）？

> ID：15488433
> 
> 赞同：3
> 
> 时间：2013-03-18T22:48:44.523
> 
> 标签：c#, .net, wpf, customization, wpftoolkit

我正在使用 WPF 工具包（[http://www.codeproject.com/Articles/196502/WPF-Toolkit-Charting-Controls-Line-Bar-Area-Pie-Co](http://www.codeproject.com/Articles/196502/WPF-Toolkit-Charting-Controls-Line-Bar-Area-Pie-Co)）来创建折线图。

这就是我正在做的事情：

```
<Window x:Class="TempDataAnalyzer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit" Loaded="Window_Loaded">
    <Grid>
         <chartingToolkit:Chart  Name="lineChart" Title="Temperature" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
            <chartingToolkit:LineSeries  DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding}" IsSelectionEnabled="True"/>
         </chartingToolkit:Chart>
    </Grid>
</Window> 
```

C＃：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        List<KeyValuePair<int, int>> entries = new List<KeyValuePair<int, int>>();
        entries.Add(new KeyValuePair<int, int>(0, 0));
        entries.Add(new KeyValuePair<int, int>(1, 23));
        entries.Add(new KeyValuePair<int, int>(2, 45));
        entries.Add(new KeyValuePair<int, int>(3, 46));
        entries.Add(new KeyValuePair<int, int>(4, 71));

        lineChart.DataContext = entries;
    }

} 
```

![在此处输入图像描述](../Images/15ab0885ce97facd01bc6fa791a800d7.png)

我需要在指定的 Y 值处绘制一条“目标线”，例如在本例中为 35：

![在此处输入图像描述](../Images/b4253d70f761f8a7f31945421be41ac4.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:48:27.070

我已经在我的一些项目中做过类似的事情。

我创建这样的行：

```
<chartingToolkit:Chart Name="chart1" Title="Chart Title">
    <chartingToolkit:LineSeries DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding}">
        <chartingToolkit:LineSeries.PolylineStyle>
            <Style TargetType="Polyline">
                <Setter Property="StrokeDashArray" Value="5 5 5" />
                <Setter Property="StrokeThickness" Value="2"/>
            </Style>
        </chartingToolkit:LineSeries.PolylineStyle>
        <chartingToolkit:LineSeries.DataPointStyle>
            <Style TargetType="{x:Type chartingToolkit:LineDataPoint}">
                <Setter Property="Background" Value="Red"/>
                <Setter Property="Template" Value="{x:Null}" />
            </Style>
        </chartingToolkit:LineSeries.DataPointStyle>
    </chartingToolkit:LineSeries>
</chartingToolkit:Chart> 
```

我将它与 MVVM 模式一起使用，并将“LineSeries”与`ObservableCollection<KeyValuePair<string, int>>`

![在此处输入图像描述](../Images/4a67f95442611d8444795a3e73c06611.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T04:55:02.410

用这个：

```
<chartingToolkit:LineSeries.DataPointStyle>
    <Style TargetType="chartingToolkit:LineDataPoint">

        <!-- <Setter Property="Template" Value="{x:Null}"/> -->
        <Setter Property="Opacity" Value="0" />
        <Setter Property="Background" Value="Red"/>
        <Setter Property="BorderBrush" Value="Red"/>
        <Setter Property="Width" Value="2" />
        <Setter Property="Height"  Value="2" />
    </Style>
</chartingToolkit:LineSeries.DataPointStyle>
<chartingToolkit:LineSeries.PolylineStyle>
    <Style TargetType="Polyline">
        <Setter Property="Opacity" Value="1" />
        <Setter Property="StrokeThickness" Value="1"/>
        <Setter Property="Stroke" Value="Red" />
    </Style>
</chartingToolkit:LineSeries.PolylineStyle> 
```

# maven - Maven编译器插件：编译失败

> ID：15488436
> 
> 赞同：1
> 
> 时间：2013-03-18T22:48:56.570
> 
> 标签：maven, compilation, dependencies, maven-3, maven-compiler-plugin

当我从编译开始执行任何目标时，它无法编译我的 ui sub pom 项目。只是保持源/目录命名非常平淡，抱歉。但格式几乎是这样的：

[错误] 无法执行目标 org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project ui: Compilation failure: Compilation failure:

[错误] 无法解析错误消息：[解析开始 C:\Path\Of\My\Project\src\main\java\com\ui\javaFile.java]

[ERROR] [解析完成 16ms]

对于我的所有 java 源文件，解析时都会出现同样的错误。后来在错误的垃圾邮件中，它说：

[错误] C:\Path\Of\My\Project\ui\src\main\java\com\ui\javaFile.java:[13,20] 包 javax.servlet 不存在

**这是否意味着它无法编译，因为我缺少一些需要的依赖项？**

我的环境变量下的 JAVA_HOME 设置为 C:\Program Files\Java\jdk1.6.0_43 并且我的路径有 %JAVA_HOME%\bin 粘在上面。我的父母 pom 也有：

```
<pluginManagement>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler.plugins</artifactId>
      <version>2.0.2</version>
      <configuration>
        <source>1.6</source>
        <target>1.6</target>
      </configuration>
    </plugin>
  </plugins>
</pluginManagement> 
```

为了安全起见，它也在普通的插件元素中。我知道我的 ui 项目的子 pom 正确地引用了父 pom。

不知道还能想到什么:(

伙计们，放轻松！我是 Maven 菜鸟。必须将 Ant build.xml 项目转换为 Maven。希望得到一些建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:52:52.030

`servlet-api`Maven 发出信号，表明您的 pom.xml中没有依赖关系。
我建议您在 pom.xml 中包含以下依赖项

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
</dependency> 
```

# kendo-ui - KendoUI：TabStrip 在 ASP.NET MVC 4 中更改 URL

> ID：15488437
> 
> 赞同：0
> 
> 时间：2013-03-18T22:48:58.567
> 
> 标签：kendo-ui, kendo-asp.net-mvc

我有一个这样定义的 KendoUI TabStrip：

```
@(Html.Kendo().TabStrip()
.Name("tabMain")
.Items(items =>
{
    items.Add().Text("Search/Manage User").Content("Some text");
    items.Add().Text("Create New User").Content("Some text");
})
.SelectedIndex(0)
.Animation(false)
) 
```

当我选择一个选项卡时，页面的 URL 更改为**localhost/#TabMain-1**并且页面滚动到该选项卡。

如何关闭该行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:31:17.040

这已经修复了。请继续关注并等到明天 - 会有新版本 :) 2013 年第一季度！

# iphone - 如何将我的 iOS 应用程序从 facebook 中注销 - 就像真的注销一样。iOS 设备使用我的应用程序无法忘记的 Safari cookie

> ID：15488439
> 
> 赞同：4
> 
> 时间：2013-03-18T22:49:10.007
> 
> 标签：iphone, ios, facebook, sdk

我搜索了高低，仅在这一项上就花了 8 个小时，在这里尝试了很多建议。有很多人被困在这个论坛和其他论坛上。这是提出这个问题的另一种方式——有些人似乎说它有效，而其他人则没有——我认为他们使用的是旧版本的 facebook SDK。

我希望我的应用程序每次都要求为一项功能提供 facebook 凭据。相反，代理（ios facebook 应用程序或 ios Safari）正在记住我已登录并告诉我的应用程序 - “去吧”。我不想要那个。退出 dangit 并忘记我的应用程序！

注销后，使用 Facebook SDK 3.1，我循环浏览了我的共享 cookie，正如很多帖子告诉我的那样——一些人说谢谢它有效，其他人说它没有。我没有饼干 - for next 循环表明非过滤与否。

如果我强制 Safari 进行身份验证，然后在 General->Settings 中重置 Safari - 它会要求提供凭据。这就是我每次都想要的，而不必去通用->设置。

所以a）我如何使用我自己的UIWebView - 这将使这些cookies工作 - 但我不认为这是facebook登录使用api的方式b）我如何从我的应用程序中获取Safari中的这些cookies ? c) 其他人是如何做到这一点的？

我无法访问 facebook.m - 或者如果是这样 - 你是怎么做到的？我认为这是一个之前的 sdk，它对几行有破解。我正在使用框架下载。

如果这不起作用，我会让他们使用我可以控制的会话登录到 Facebook php 页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:15:43.653

我不清楚您是否正在使用 iOS Facebook 功能，但假设 iOS6+ - 您是否尝试过使用`ACAccountStore`和`removeAccount:withCompletionHandler: method?`

完整的参考是[ACAccountStore 类参考。](http://developer.apple.com/library/ios/#documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html)

# php - jQuery FileTree 无法读取本地共享文件夹？

> ID：15488440
> 
> 赞同：2
> 
> 时间：2013-03-18T22:49:27.087
> 
> 标签：php, javascript, iis, filetree

我正在尝试使用 jQuery FileTree 访问本地共享文件夹。我的代码如下，如果该文件夹尚未在网络上共享，它绝对可以正常工作。但是，一旦我共享该文件夹，FileTree（或 Javascript？）就拒绝阅读它。这是在 Windows 2008 R2 标准 IIS 服务器上（我知道，我们是坏人）。

Javascript 是否可以访问本地共享文件夹？请记住，我不是要访问网络共享，而是要访问已共享的本地文件夹。它工作得非常好，直到我启用共享的那一刻。

我知道允许 Javascript 访问共享文件夹可能存在安全漏洞，但这是针对 Intranet 应用程序的，所以我不太担心。

**编辑**我收到了 FileTree 开发人员的回复，他们指出如果我使用的 PHP 连接器可以访问文件，那么 FileTree 将显示它。所以问题更可能与 PHP 连接器有关。在这种情况下，应该可以编写自定义连接器来完成此操作。

```
<script type="text/javascript">
$(document).ready( function() {
    $('#fileTreeDemo_1').fileTree({ root: '/quotes/', script: '/scripts/jqueryFileTree/connectors/jqueryFileTree.php' }, function(file) { 
    var parentId = <?php echo json_encode($_GET['id']); ?>;
    window.opener.updateValue(parentId, file);
    window.close();
    });
});
</script>

<div class="filebrowser_container">
    <div id="fileTreeDemo_1" class="filebrowser"></div>
</div> 
```

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T21:20:17.483

好的，在这种情况下，它不是 Javascript 或 PHP。我只需要确保用于运行 IIS 进程的用户有足够的权限来访问网络共享，然后我只需将该用户添加到文件夹的共享用户列表中即可。现在一切都很完美！

# jquery - mvc如何使用jquery设置模型值然后传递给beginform

> ID：15488441
> 
> 赞同：1
> 
> 时间：2013-03-18T22:49:31.803
> 
> 标签：jquery, asp.net-mvc-4, html.beginform

我正在使用 asp.net mvc4。

我目前正在尝试使用具有级联下拉菜单的 beginform。我的问题是我无法弄清楚如何从级联下拉列表（动态）中获取值到我的表单中......

我有三个级联下拉菜单，每个下拉菜单都有一个 ID（trackId、RailCarID 和 DeckID）。jquery 有值，但我不知道如何让 jquery 将值分配给模型（即 Model.SelectedTrack、Model.SelectedRailCar、Model.SelectedDeck）......这样我就可以通过返回 html.beginform 中的值。在我看来，只能在 beginform 中访问模型值，但不能在 jquery 中设置模型值。

这是我的代码（注释掉了一些想法）

```
@using TBS.Etracs.Web.Main.Helpers
@using TBS.Etracs.Web.Main.Areas.Carrier.Models
@model LoadRailVehicleInputModel

@{
    ViewBag.Title = "Load Rail Vehicle";
}

<scripts>   
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.js")"                    type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")"                type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.intellisense.js")"       type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.10.1.min.js")"               type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")"             type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
</scripts>

<h2>Load Rail Vehicles</h2>

@using (Html.BeginForm("LoadRailVehicle"))
{ 
    @*  Track DropDown *@
    <div class="divTable">
         <div class="divTableRow">
            <div class="divTableCell"><label>Track: </label></div>
            <div class="divTableCell">
                @Html.DropDownListFor(p => p.SelectedTrack,
                                     new SelectList(Model.TrackList),
                                     "Select a Track",
                                     new
                                     {
                                         id = "trackID",
                                         Class = "dropdownstyle",
                                         style = "width: 140px"
                                     })
            </div>
    </div>

    @*  Cascading RailCar DropDown *@
         <div class="divTableRow" id="RailCarDivID">
            <div class="divTableCell" > <label>Railcar: </label> </div>
            <div class="divTableCell">
                <select id="RailCarID" style    = "width: 140px"></select>
            </div>
    </div>

    @*  Cascading Deck DropDown *@ 
         <div class="divTableRow" id="DeckDevID">
            <div class="divTableCell" ><label>Deck: </label></div>
            <div class="divTableCell">
                 <select id="DeckID"  style    = "width: 140px"></select>
            </div>
    </div>

    @*  Vin TextBox (with Load Button)*@ 
         <div class="divTableRow">
            <div class="divTableCell"> <label>VIN</label> </div>
            <div class="divTableCell">
                @Html.TextBoxFor(p => p.VIN)
                <input type="submit" value="Load" name="LoadVehicle" />
            </div>
    </div>
   </div>

@*   
<input type="submit" value="Unloaded Vins"    name="SelectUnLoadedVin"    id="NotLoadedButton"   style="width: 140px" />
<input type="submit" value="Loaded Vins"      name="SelectLoadedVin"      id="LoadedButton"      style="width: 140px" />
<input type="submit" value="Replacement Vins" name="SelectReplacementVin" id="ReplacementButton" style="width: 140px" />        
  *@   
}

@* Buttons for Unloaded Vin, Loaded Vins, Replacement Vins*@ 
@* @Html.Partial("_LoadRail_ButtonRow", Model)  *@

@using (Html.BeginForm("LoadRailGrid", "MobileRail", new {  Model.SelectedTrack, Model.SelectedRailCar, Model.SelectedDeck} ))
{ 

<div class="divblockstyle">
        <input type="submit" value="Unloaded Vins"    name="SelectUnloadedVin"    id="NotLoadedButton"  style="width: 140px" />
        <input type="submit" value="Loaded Vins"      name="SelectLoadedVin"       style="width: 140px" />
        <input type="submit" value="Replacement Vins" name="SelectReplacementVin"  style="width: 140px" />
</div>  
}

<input type="submit" value="Back" onclick="history.back(); return false;" style="margin-right: 20px" />

<style>
    .ScanVINTextBoxStyle3 { width: 180px; }
    .divTable     { width: 50%;  height:  10%; display: table; }
    .divTableRow  { width: 100%; height: 100%; display: table-row;}
    .divTableCell { width: 25%;  height: 100%; display: table-cell;}
</style>

<script type="text/javascript">
    var idtrack;
    var idRailCar;
    var idDeck;

    $(document).ready(function()
    {
       $("#trackID").change(function () 
       {
           //    var idtrack = $(this).val();
           idtrack = $(this).val();
           $.getJSON('/Carrier/MobileRail/GetRailCars', { selectedTrack: idtrack },
               function(data)
               {
                   var items = '<option>Select a railcar</option>';
                   $.each(data, function (i,railcar) {
                       items += '<option>' + railcar + '</option>';
                   });
                   $('#RailCarID').html(items)
                   $('#RailCarDivID').show
               });

           Model.SelectedTrack = idtrack;
       });

    });

    $(document).ready(function () {
        $("#RailCarID").change(function () {
            //  var idRailCar = $(this).val();
            idRailCar = $(this).val();  //set the global variable
            $.getJSON('/Carrier/MobileRail/GetDecks', { SelectedRailCar: idRailCar },
                function (data) {
                    var items = '<option>Select a railcar</option>';
                    $.each(data, function (i, deck) {
                        items += '<option>' + deck + '</option>';
                    });
                    $('#DeckID').html(items)
                    $('#DeckDevID').show
                });
            Model.SelectedTrack = $('#RailCarID').val();
        });
    });

    $(document).ready(function() {
        $("#DeckID").change(function () {
            idDeck = $(this).val();  //set the global variable...
            Model.SelectedDeck = idDeck;
        });
    });

    $(document).ready(function () {
        $('#NotLoadedButton').click(function () {
            var vin1 = $('#VIN').val(); //This works for things that aren't set via javascript...   
                 var idTrack1 = idtrack;
                 var idrailcar1 = idRailCar;
                 var idDeck1 = idDeck;

                 Model.SelectedTrack = idtrack;
                 Model.SelectedRailCar = idRailCar;
                 Model.SelectedDeck = idDeck1;
        });
    });

    /*
    $.ajax(function(){
        type:"Get",
        url:"/Carrier/MobileRail/SelectUnloadedVin",
        data:"{SelectedTrack=idtrack, SelectedRailCar=idRailCar,SelectedDeck=idDeck}",
        complete:function(){location.href="/Carrier/MobileRail/_LoadRail_UnloadedVehicles"}
    }*/

    /*
    $(document).ready(function () {
        $('#NotLoadedButton').click(function () {
            var vin1 = $('#VIN').val(); //This works for things that aren't set via javascript...
            var idTrack1 = idtrack;
            var idrailcar1 = idRailCar;
            var idDeck1 = idDeck;

            $.getJSON('/Carrier/MobileRail/SelectUnloadedVin', { SelectedTrack: idTrack1, SelectedRailCar: idrailcar1, SelectedDeck: idDeck1 },
                function (data) {
                    alert('returned from selecta');
                });
        });
    });
    */

    /*
    $(document).ready(function () {
        $('#LoadedButton').click(function () {
            alert('Loaded Button was clicked.');
        });
    });

    $(document).ready(function () {
        $('#ReplacementButton').click(function () {
            alert('Replacement Button was clicked.');
        });
    });
    */

    /*
    $(document).ready( function() {
    $('a.pager-link').click( function() {
        var page = $(this).attr('href').split(/\?/)[1];
        $.ajax({
            type: 'POST',
            url: '/path-to-service',
            data: page,
            success: function(content) {
               $('#myTable').html(content);  // replace
            }
        });
        return false; // to stop link
    });
});
*/

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:52:36.203

LoadRailVehicleInputModel 应该具有接收级联下拉选择的属性。当我处理这种情况时，我会创建部分视图来呈现这些动态下拉列表，并且这些部分视图使用它们自己的模型来呈现它们的 DropDowns。

我会给你一个代码示例：

```
public RailCarViewModel {
   public Int32 IdSelectedRailCar {get;set;}
   public List<RailCar> Cars {get;set;}
}

public DeckViewModel{
   public Int32 IdSelectedDeck {get;set;}
   public List<Deck> Decks {get;set;}
}

public LoadRailVehicleInputModel{
   public Foo XptoProp {get;set;}
   public DeckViewModel DeckModel {get;set;}
   public RailCarViewModel RailModel {get;set;}
} 
```

HTML 应该是这样的：

```
@model LoadRailVehicleInputModel
@using(Html.BeginForm())
{
<div id="RailCarDropDown"> 
  @Html.Action("MyActionThatRenderRailCarDropDown", Model.RailModel)
</div>
<div id="DeckDropDown"> 
  @Html.Action("MyActionThatRenderDeckDropDown", Model.DeckModel)
</div>

<input type="submit" value="Save"/>
} 
```

这样做，当您发布表单时，您的 LoadRailVehicleInputModel 将在 DeckModel 道具和 RailModel 道具中包含下拉选择的 ID 项。

# ios - iOS 同步笔记分享

> ID：15488442
> 
> 赞同：1
> 
> 时间：2013-03-18T22:49:32.960
> 
> 标签：ios, objective-c, sync, gksession

我正在使用`GKSession`. 假设 2 个用户 - A 和 B 使用`GKSession`.

用户 A 类型的任何内容都会发送给用户 B（每个字符），反之亦然。

我正在使用`shouldChangeTextInRange`from`UITextViewDelegate`并传递插入符号位置，以及键入的字符以及其他数据包数据。该字符出现在接收者的文本视图中的相同位置（在数据包中发送的插入符号位置）。一切正常，除非两个用户同时在同一个插入符号位置发送一些字符。如何确保两个用户的文本视图彼此同步？

> 例如：
> 
> 如果用户 A 在插入符号位置 2 发送字符 'a' 并且在同一用户 B 在插入符号位置 2 发送字符 'b' 。顺序应该是什么 - 'ab' 或 'ba' ？

我正在使用`GKSendDataReliable`并希望避免每次都发送收到的数据包确认，因为其他用户将不得不等待发送下一个字符，这会扼杀所有的乐趣。

堆栈溢出的新功能。非常感谢有关处理数据包传递和同步数据的任何建议。非常感谢你们的帮助！

# linux - CSS旋转过渡在Windows和Linux中表现不同

> ID：15488446
> 
> 赞同：1
> 
> 时间：2013-03-18T22:50:01.717
> 
> 标签：linux, windows, css, css-transitions, icon-fonts

### 问题

这是一个相当离奇的问题。我在 linux 上设计了一个网站，并加入了一些带有旋转的 CSS 过渡。最后它看起来像[这样](http://www.youtube.com/watch?v=0T1jXSNW6SU)，（我点了它，所以你可以看到它）。您可以看到自行车自转轴。这是在 Firefox 上捕获的，但在 Chrome 和 Opera 中的行为完全相同。（它们的最新版本）

现在，当我使用 Windows 时，[这](http://www.youtube.com/watch?v=vIg23jwqUrw)是我在 Firefox 和 chrome 中看到的（都是最新版本）。它不再绕轴旋转。

### 里面是什么？

没什么特别的。只是过渡旋转所必需的，带有一些混合器可以使其跨浏览器。我制作了这个[代码笔](http://codepen.io/anon/pen/swHbI)来向您展示，但我真的找不到问题所在。

也许有人对 windows/linux 如何解释这种差异有更多的了解。如您所见，我使用的是图标字体。Windows 和 linux 都对类型进行了一些优化，众所周知这些优化是不同的。这有什么关系吗？

# facebook - 我如何让 Facebook 点赞按钮链接到各种新闻帖子？

> ID：15488449
> 
> 赞同：1
> 
> 时间：2013-03-18T22:50:26.970
> 
> 标签：facebook, button, facebook-like, permalinks

谁能帮我解决我遇到的 Facebook“点赞按钮”问题？

我已经在我的网站上安装了这个插件，并希望该按钮分别与我的每个不同的新闻帖子相对应。目前它只链接到我的网站主页。每个帖子底部的页脚已设置为永久链接。

网站链接 - [http://www.estrellarocks.com/news](http://www.estrellarocks.com/news)

下面是我正在使用的代码：

```
<head>
<title>Estrella</title>

<meta property="fb:admins" content="......"/>
<meta property="fb:app_id" content="......"/>

<meta property="og:type" content="website"/>
<meta property="og:url" content="http://estrellarocks.com"/>
<meta property="og:site_name" content="Estrella Official"/>
<meta property="og:description" content="Official Website for Scottish rock band Estrella!"/>
<meta property="og:image" content="http://estrellarocks.squarespace.com/storage/FB%20Plugin%20image.jpg"/>

<body>

<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '.......', 
      channelUrl : '//www.estrellarocks.com/channel.html', 
      status     : true, 
      cookie     : true, 
      xfbml      : true   
    });

  };

  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));

</script>
</body>
</head> 
```

我的永久链接：

```
<div class="fb-like" data-href="%PERMALINK%" data-send="true" data-width="450" data-show-faces="false"></div> 
```

# php - 使页面仅在访问上一页后才可访问

> ID：15488452
> 
> 赞同：0
> 
> 时间：2013-03-18T22:50:30.547
> 
> 标签：php

我对 PHP 很陌生，正在创建一个 php 联系页面。填写表格后，您将被重定向到success.php（注意联系页面是index.php）。如果您来自 index.php，我希望 success.php 仅可访问。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:57:52.333

再想一想，您可以使用 PHP 的 Server 变量调用`$_SERVER['HTTP_REFERER']`来检查用户来自哪个页面。例如，如果您有`index.php`，`contact.php`然后，如果您放置 `echo $_SERVER['HTTP_REFERER'];`在 中`contact.php`，每次您访问该页面时，它都会告诉您您来自哪个页面。

因此，在您的情况下，如果您希望人们`success.php`仅在提交后才能访问，`contact.php`那么您可以将其放在成功页面中。

```
if($_SERVER['HTTP_REFERER'] == 'contact.php') {
echo 'Success';
}else {echo 'Please go back to contact page first';} 
```

您可以在此处了解有关`$_SERVER[]`变量的更多信息 php.net/manual/en/reserved.variables.server.php

# ruby-on-rails - Mongoid 脚手架测试在夹具上失败

> ID：15488455
> 
> 赞同：3
> 
> 时间：2013-03-18T22:50:48.467
> 
> 标签：ruby-on-rails, mongoid, automated-tests, scaffolding

当我使用 mongoid 创建一个新的 rails 应用程序时：

```
rails new tddapp --skip-active-record
cd tddapp
echo "gem 'mongoid'" >> Gemfile
bundle
rails g mongoid:config 
```

然后生成一个简单的脚手架：

```
rails g scaffold building height:Integer name:String 
```

脚手架已创建，最小的应用程序运行良好。但是脚手架生成的测试失败了：

```
NoMethodError: undefined method `buildings' for #<BuildingsControllerTest:0x007fa6afbf78d8> 
```

违规行显示测试控制器找不到夹具：

```
@building = buildings(:one) 
```

mongoid 生成器非常好，可以创建固定装置，以`test/fixtures/buildings.yml`表明与脚手架功能测试的整个想法的某种程度的合作。

是否有一些配置设置或我需要更改以使功能测试加载 mongoid 的装置？或者脚手架功能测试是否会因 mongoid 而失败？（如果是这样，为什么 mongoid 还要费心创建夹具文件？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-05T11:18:28.043

不是为了个人推广，而是因为我多次被这个问题困住，而且我认为它可能会帮助很多其他人，所以我创建`mongoid-fixture_set`了[github](https://github.com/Aethelflaed/mongoid-fixture_set)。

它的工作原理或多或少相同`ActiveRecord::FixtureSet`，因为我移植了很多代码，你只需要将它自己绑定到测试类：

```
class ActiveSupport::TestCase
  include Mongoid::FixtureSet::TestHelper
  self.fixture_path = "#{Rails.root}/test/fixtures"
end 
```

'lib/rails/test_help.rb'`ActiveRecord`中 gem 中的 rails也做了同样的事情`railties`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:21:01.533

Mongoid 不支持开箱即用的固定装置（[来源](https://groups.google.com/forum/?fromgroups=#!topic/mongoid/tqlx3j88Lqw)）。我建议你放弃固定装置，走工厂路线。[factory_girl](https://github.com/thoughtbot/factory_girl)是一个很好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T21:50:01.800

是的，我认为[固定装置是 ActiveRecord 的一部分](https://www.ruby-forum.com/topic/857301)，而您没有（“ `rails new tddapp --skip-active-record`”）。

[不过， FactoryGirl](https://github.com/thoughtbot/factory_girl_rails)是一个非常简单的过渡。可惜它没有开箱即用。

# c - 一次从文件中读取 512 个字节并检查里面有什么？

> ID：15488461
> 
> 赞同：1
> 
> 时间：2013-03-18T22:51:07.567
> 
> 标签：c

我有一个大文件，里面包含很多 jpeg。所有的jpeg都需要一张一张的提取出来。这是我解决这个问题的第一步：

1）定义“块”变量并为其分配512字节的存储空间

2）打开包含所有jpeg的文件并循环遍历它直到eof

3) 抓取第一个块（512 字节）并查看里面有什么

目前我的代码无法编译。这是我的错误：

```
 recover.c:27:19: error: implicitly declaring C library function
 'malloc' with type 'void *(unsigned int)' [-Werror]
     char* block = malloc(BYTE * 512);
                   ^ recover.c:27:19: note: please include the header <stdlib.h> or explicitly provide a declaration for 'malloc'
 recover.c:27:26: error: unexpected type name 'BYTE': expected
 expression
     char* block = malloc(BYTE * 512);
                          ^ recover.c:45:18: error: conversion specifies type 'int' but the argument has type 'char *'
 [-Werror,-Wformat]
         printf("%c", block);
                 ~^   ~~~~~
                 %s 
```

到目前为止，这是我的代码：

```
#include <stdio.h>
#include <stdint.h>

typedef uint8_t BYTE;

//SOI - 0xFF 0xD8
//EOI - 0xFF 0xD9
//APPn - 0xFF 0xEn    
int main(void)
{
    //FAT - 512 bytes per block
    char* block = malloc(BYTE * 512);

    //open file containing pictures
    FILE* fh = fopen("card.raw", "rd");

    //make sure the file opened without errors
    if (fh == NULL)
    {
        printf("something went wrong and file could not be opened");
        return 1;
    }

    while (!feof(fh))
    {
        setbuf(fh, block);
        printf("%c", block);
    }

    fclose(fh);
return 0;
} 
```

我究竟做错了什么？为什么不是 char* block = malloc(BYTE * 512); 分配 512 个字节，但会引发错误？另外，由于我什至还不能编译这一段，我是否正确读取了 512 个字节？如果没有，我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T22:55:13.690

你想要：

```
#include <stdlib.h> 
```

得到 的定义`malloc()`。

```
char* block = malloc(BYTE * 512); 
```

应该是（因为`malloc`已经接受了字节的参数；`sizeof(BYTE)`将返回`1`）：

```
char* block = malloc(512); 
```

和：

```
printf("%c", block); 
```

应该：

```
printf("%s", block); 
```

就像 EJP 在评论中所说的那样，虽然这不是错误，但实际上并不需要动态分配`buffer`with `malloc()`。您已经知道您将需要 512 个字节来执行您正在执行的操作，因此您可以将该行替换为：

```
char block[512]; 
```

我认为您使用 clang 作为编译器，正如您所看到的，它对错误消息非常有帮助，它基本上告诉您如何修复它。

# jquery - jQuery单击事件在Wordpress页面中不起作用

> ID：15488463
> 
> 赞同：2
> 
> 时间：2013-03-18T22:51:09.633
> 
> 标签：jquery, wordpress

我已经尝试了几个小时来弄清楚为什么我的 jquery 代码在 Wordpress 中作为页面添加时不起作用。

作为一个独立的页面，一切正常，但是当转换为 Wordpress 页面时，jQuery 点击事件不再触发。

我的 jQuery 代码目前看起来像这样：

```
jQuery(document).ready(function() {
    jQuery('button#convert').click(function() {
        alert("test");
        var text = jQuery('textarea#textInput').val();
        var method = jQuery('select#methodOptions').val();

        if (text!='')
        {
            $.ajax({
                url: 'core/convert.php',
                type: 'POST',
                data: 'data=' + text + '&method='+ method,
                dataType: 'html',
                success: function( message) {
                    jQuery('textarea#textOutput').val(message);
                }
            });
        }
    });
}); 
```

我的按钮在 html 中看起来像这样

```
<button id="convert" class="convertbutton" type="button">Convert</button> 
```

我还可以验证包含上述脚本的 .js 文件是否正确加载到标题中，并且 jquery 库也是如此。我错过了什么吗？提前致谢。

编辑：我发现问题出在哪里，Wordpress 在页脚中加载 jquery 库，我在页眉中加载我的 .js，这是出现问题的原因，因为在调用任何脚本之前需要加载库，原因很明显.

$.ajax 也应该是 noConflict 模式下的 jQuery.ajax。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:10:20.600

这个问题似乎不是那么直接，而是代码中的错误。Wordpress 插件之一是强制大多数 .js 文件加载到页脚而不是页眉中，据说可以缩短加载时间。

问题是我在标题中加载了我的 .js 文件，这导致我的 javascript 代码在加载 jquery 库之前执行，从而导致错误。

解决方案是确保我的 .js 文件加载到页脚中，这可以通过更改`add_action('wp_head', '<js method>');`为.js 来完成`add_action('wp_footer', '<js method>');`。代码中还有一个小错误。当 jquery 处于无冲突模式时`$.ajax`应该是`jQuery.ajax`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:58:30.903

尝试：

```
if (text != 'undefined') 
```

或者

```
if (text != null) 
```

有关 AJAX 示例，请参见[此处](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)。

**编辑：**

在点击功能中取出选择器之前的“按钮”。（#convert，而不是按钮#convert）另请查看[.find](http://api.jquery.com/find/)

确保将 jquery 包含在 HTML 正文中。如果可能，请包括小提琴。

我过去也遇到过 Jquery(); 的问题。像这样编写代码：

```
$(document).ready(function(){
// etc etc
$('#convert').click( //etcetc 
```

* * *

# php - usort() 可以为对象工作吗？

> ID：15488466
> 
> 赞同：2
> 
> 时间：2013-03-18T22:51:16.440
> 
> 标签：php

我收到此错误：

> ErrorException：警告：usort() 期望参数 1 是数组，给定对象

我将来自 SQL 查询的结果对象传递给 usort：

```
usort($results, array($this, "sortDistance")); 
```

我的排序功能：

```
private function sortDistance ($first, $next)
{
    $d1 = $this->searchDistance[$first->zip];
    $d2 = $this->searchDistance[$next->zip];

    if ($d1 == $d2) {
        return 0;
    }
    return ($d1 > $d2) ? +1 : -1;
} 
```

还有另一种方法可以根据对象的属性对对象进行排序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:05:02.103

您可以从结果集中创建一个对象数组，其中对象具有您需要排序的属性。然后使用成员函数作为 usort 的回调

# delphi - 如何在 Delphi 中的图上实现深度优先搜索（DFS）？

> ID：15488467
> 
> 赞同：2
> 
> 时间：2013-03-18T22:51:21.430
> 
> 标签：delphi, graph

我查看了 Internet，并没有在 object pascal 中找到任何 DFS（深度优先搜索）或 BFS（广度优先搜索）的代码示例，因此我可以在 Delphi 中实现它们。

不懂图论的可以[点这里](http://en.wikipedia.org/wiki/Graph_theory)

由于图形对象的方式，我很难自己开发它。我们有`vertices`和`edges`之间相关的，我不知道我是否使用`records`,`objects`或数组，也不知道如何构造这些数据。如果我有一些预览示例，我可以选择一个最佳方法，而不是从头开始（*我相信这个网站就是为了它*）。

有谁知道从哪里开始？

![具有 6 个边和 7 个顶点的图](../Images/c41a12222a574d7a71ad1b8ba663f2fd.png)

*在我的项目中，我必须在其中插入一个新图，然后进行 DFS 搜索以捕获所有边缘并发现到高速公路的最近路径。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:11:53.783

简短的回答是，您可以通过保持关联数组将访问节点映射到先前节点和访问的邻居的联合来实现 DFS。

* * *

## 用法

这是解决方案表面上的样子。假设您定义了一个节点...

```
type
INode = interface
  ['{8D3C78A3-3561-4945-898D-19C5AD4EC35B}']
    {$REGION 'property accessors'}
      function GetNeighbour( idx: Integer): INode;
      function GetNeighbourCount: integer;
    {$ENDREGION}
    function  DisplayName: string;
    function  Link( const Neighbours: INode): boolean; // True iff succesful.
    procedure ShutDown; // Dereference all nodes recursively.
    property  Neighbours[ idx: Integer]: INode  read GetNeighbour;
    property  NeighbourCount: integer           read GetNeighbourCount;
  end; 
```

我将 INode 的实现留给 OP，因为 (A) 它是微不足道的；(B) 因为它是高度应用特定的。

您将能够遍历节点网络深度优先，原文如此......

```
procedure DFSTraversal( const Start: INode);
var
  X: INode;
begin
for X in TGraph.DepthFirstSearch( Start) do
  DoSomething( X);
end; 
```

...在一些声明的帮助下...

```
INodeEnumerator = interface
  ['{1A8725EB-AE4B-474C-8052-E35852DCD5FC}']
    function  GetCurrent: INode;
    function  MoveNext: Boolean;
    procedure Reset;
    property  Current: INode read GetCurrent;
  end;

IEnumerableNode = interface
  ['{DA11A890-01C4-4FD0-85BB-AE9D65185364}']
    function GetEnumerator: INodeEnumerator;
  end;

TGraph = class
  public
    class function DepthFirstSearch( const StartingPoint: INode): IEnumerableNode;
  end; 
```

* * *

## 解决方案

深度优先搜索可以很容易地实现，如前所述，使用关联数组将访问过的节点映射到之前的节点和访问过的邻居。这个关联数组被封装到类型 TDictionary 中。以下是它的实现方式......

```
type
TBaseEnumerableNode = class abstract( TInterfacedObject, IEnumerableNode)
  protected
    function GetEnumerator: INodeEnumerator; virtual; abstract;
  end;

TDepthFirstSearchEnumerable = class( TBaseEnumerableNode)
  private
    FRoot: INode;
  protected
    function GetEnumerator: INodeEnumerator; override;
  public
    constructor Create( const Root: INode);
  end;

TBaseNodeEnumerator = class abstract( TInterfacedObject, INodeEnumerator)
  private
    function  GetCurrent: INode;
    procedure Reset;
  protected
    FCurrent: INode;
    function  MoveNext: Boolean;  virtual; abstract;
  end;

RTraversalInfo = record
    FCurrIndex: integer;
    FPredecessor: INode;
  end;

TDepthFirstSearchEnumerator = class ( TBaseNodeEnumerator)
  private
    FVisitedNodes: TDictionary<INode,RTraversalInfo>;
  protected
    function  MoveNext: Boolean;  override;
  public
    constructor Create( const Root: INode);
    destructor Destroy; override;
  end;

class function TGraph.DepthFirstSearch(
  const StartingPoint: INode): IEnumerableNode;
begin
result := TDepthFirstSearchEnumerable.Create( StartingPoint)
end;

constructor TDepthFirstSearchEnumerable.Create( const Root: INode);
begin
FRoot := Root
end;

function TDepthFirstSearchEnumerable.GetEnumerator: INodeEnumerator;
begin
result := TDepthFirstSearchEnumerator.Create( FRoot)
end;

function TBaseNodeEnumerator.GetCurrent: INode;
begin
result := FCurrent
end;

procedure TBaseNodeEnumerator.Reset;
begin  // Not used.
end;

constructor TDepthFirstSearchEnumerator.Create( const Root: INode);
var
  TravInfo: RTraversalInfo;
begin
FCurrent := Root;
FVisitedNodes := TDictionary<INode,integer>.Create;
TravInfo.FCurrIndex   := -1;
TravInfo.FPredecessor := nil;
FVisitedNodes.Add( FCurrent, TravInfo)
end;

destructor TDepthFirstSearchEnumerator.Destroy;
begin
FVisitedNodes.Free;
inherited
end;

function TDepthFirstSearchEnumerator.MoveNext: boolean;
var
  ChildIdx: integer;
  LastIdx : integer;
  TravInfo: RTraversalInfo;
  Next    : INode;
  Child   : INode;
  GoDown  : boolean;
begin
result := assigned( FCurrent);
if not result then exit;
result := False;
Next := FCurrent;
FCurrent := nil;
repeat
  TravInfo := FVisitedNodes[ Next];
  ChildIdx := TravInfo.FCurrIndex;
  LastIdx  := Next.NeighbourCount - 1;
  GoDown := ChildIdx <= LastIdx;
  if GoDown then
    begin
    Inc( ChildIdx);
    TravInfo.FCurrIndex := ChildIdx;
    FVisitedNodes[ Next] := TravInfo;
    GoDown := ChildIdx <= LastIdx
    end;
  if GoDown then
      begin
      Child := FCurrent.Neighbours[ ChildIdx];
      result := not FVisitedNodes.ContainsKey( Child);
      if result then
          begin
          FCurrent := Child;
          TravInfo.FPredecessor := Next;
          TravInfo.FCurrIndex   := -1;
          FVisitedNodes.Add( FCurrent, TravInfo)
          end
        else
          Next := Child
      end
    else
      Next := TravInfo.FPredecessor
until result or (not assigned( Next))
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:52:49.620

我建议查看[`DelphiForFun Graph Searching`](http://www.delphiforfun.org/programs/Library/Graphs1.htm)，您可以在其中找到实现`depth first search`(DFS) 和`breadth first search`(BFS) 的示例和教程。

DFS 的数据包含在`TStringList`后代中，其中节点用文本字符串标识，该字符串也用作排序的键。排序是使用二分搜索算法完成的。

包含指向相邻节点 ( `adjecency list`) 的指针列表的节点数据作为每个项目字符串的对象存储在字符串列表中。

引用关于 DFS 算法的教程：

```
Here is the pseudocode for depth first search: 

SearchGoalDF(nodenbr, goalkey, maxdepth) - search depth first for all solutions from nodenbr node to goalkey node with depth of maxdepth or less.
    Set visited array to false, visited has an boolean entry for each node.
    clear stack
    push nodenbr node onto stack
    call dfs
    end.
dfs

pop (retrieve and delete)  most current stack entry, temp.
    mark temp as visited.  {to avoid looping back here as we search on down}
    if  temp.key=goalkey then notify caller of solution found
    else if stack.count<maxdepth then for each  node in temp's adjacency list, 
    push adjacent[i] onto stack
    call dfs
     mark temp as unvisited {there might be another path through this node to a solution}
    end. 
```

希望这能让您开始并了解如何处理节点数据。

* * *

请注意，寻找最短路径，BFS 算法似乎做得更好：

见[`Shortest path: DFS, BFS or both?`](https://stackoverflow.com/q/14784753/576719)和[`Why can't DFS be used to find shortest paths in unweighted graphs?`](https://cs.stackexchange.com/q/4914)。

# c++ - 动态分配二维智能指针数组的语法

> ID：15488470
> 
> 赞同：5
> 
> 时间：2013-03-18T22:51:53.403
> 
> 标签：c++, arrays, memory-management, multidimensional-array, smart-pointers

我需要动态分配一个二维智能指针数组，但它的语法让我感到困惑。我需要这是动态的：

```
std::unique_ptr<someClass> myArray[size1][size2]; 
```

因此，据我了解，我创建了一个指向该类型指针的指针：

```
someClass** myArray; //actaully the type is std::unique_ptr<someClass> but I'll just keep it simple 
```

然后分配它我做：

```
myArray* = new someClass*[size1];
for(int i = 0; i < size1; i++)
    myArray[i] = new someClass[size2]; 
```

但这不使用智能指针，这意味着我以后必须手动删除它，而且我不知道如何使这些指针成为智能指针；

类型是 std::unique_ptr 但是我需要一个指向该类型指针的指针，所以我尝试了：

```
std::unique_ptr<std::unique_ptr<std::unique_ptr<someClass>>> myArray; 
```

但在此之后，我迷失了如何分配它。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-16T22:14:11.630

我将向您展示如何具体解决您的问题，以及如何解决一般问题。

一般来说，就像任何太复杂的问题一样，试着把它分解。在 C 和 C++ 中分解复杂类型声明的工具长期以来一直是“typedef”。以下是您对级联类型定义的处理方法，如您所拥有的：采用最内层的包装类型，即包装您的类的 unique_ptr，并为您想要包装的类型创建一个 typedef。然后，继续对该类型包装的类型执行相同的操作，直到您处于最外层的类型。

这仅与您的问题相关，但我想提一下，因为您可能会遇到类似的问题，例如您现在使用模板时遇到的问题。由于 C++11，您还可以更方便地使用“using”子句为涉及模板参数的类型定义别名：http: [//en.cppreference.com/w/cpp/language/type_alias](http://en.cppreference.com/w/cpp/language/type_alias)。如果您在这种情况下感兴趣或将来变得相关，请查看该链接！

针对您的具体问题。函数“test_dynamic_2darray1”构建了一个二维 10x10 智能指针数组。当您运行此代码时，您应该看到析构函数的 100 行输出，就在托管数组超出范围时。

```
size_t destructor_count = 0;
class MyClass {
    public:
    ~MyClass() {
        std::cout << "Destructor call #" << ++destructor_count << std::endl;
    }
};

typedef std::unique_ptr<MyClass[]> ManagedC;

void test_dynamic_2darray1() {
    size_t dimension1 = 10, dimension2 = 10;

    auto managed_array = std::unique_ptr<ManagedC[]>(new ManagedC[dimension1]);
    for (size_t i = 0; i < dimension1; ++i)
        managed_array[i] = ManagedC(new MyClass[dimension2]);
} 
```

将其与此代码进行比较，其中不会调用动态分配的类实例的析构函数，并且您看不到任何输出：

```
void test_dynamic_2darray2() {
    size_t dimension1 = 10, dimension2 = 10;

    auto simple_array = new MyClass*[dimension1];
    for (size_t i = 0; i < dimension1; ++i)
        simple_array[i] = new MyClass[dimension2];
} 
```

我希望我能够回答你的问题！:) 如果你想让我详细说明一些事情，请告诉我！前几天我还写了一篇您可能感兴趣的相关博文：http: [//frankriesecodingblog.blogspot.com/2015/01/performance-of-dynamic-multi.html](http://frankriesecodingblog.blogspot.com/2015/01/performance-of-dynamic-multi.html)。我在这里发布它，因为它展示了多维动态数组的不同方法，并研究了使用向量向量的常用方法的性能。

最后但同样重要的是，让我提一下您使用 int 来迭代数组。我希望这不会变成我的烦恼，但我看到这已经做了很多。您可能应该使用 size_t。为什么？例如，在我的 64 位机器上，“int”是 32 位的，但由 size_t 表示的地址是 64 位的。这种对 int 的误用是许多错误的原因，尤其是在将 32 位应用程序移植到 64 位机器时。如果您需要有符号类型，例如数组地址之间的偏移量，更好的用途可能是 ptrdiff_t。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-16T05:51:55.067

作为一个说明性示例，以下是可在 C++ 现代中使用的语法，用于使用智能指针 ( `unique_ptr`) 和其他功能（例如`make_unique`和）创建和填充 2D int 数组（大小为 3 x 5） `move()`。

```
unique_ptr<unique_ptr<int[]>[]>     smartPtr2D;
unique_ptr<int[]>                   smartPtr1D;

int dataCounter = 0;

smartPtr2D = make_unique< unique_ptr<int[]>[] >(3);
for (int i = 0; i<3; i++)
{
    smartPtr1D = make_unique<int[]>(5);
    for (int j = 0; j<5; j++)
    {
        smartPtr1D[j] = dataCounter;
        dataCounter++;
    }
    smartPtr2D[i] = move(smartPtr1D);
} 
```

# oracle - 我的 Oracle 在什么平台上运行？

> ID：15488471
> 
> 赞同：1
> 
> 时间：2013-03-18T22:51:54.253
> 
> 标签：oracle, oracle11g

我已获得访问在某处运行的 Oracle 实例的权限，但我无权访问其底层平台。即我有一个数据库用户和数据库连接信息，包括主机名、端口号和 SID，因此我可以使用并运行我的查询连接到数据库`SQL*Plus`，但我什至不知道它是在 Windows 还是 Linux 上运行。

我需要知道：

(1) 平台是什么？
(2) 如果是 Windows，是否支持`ODP.Net`？

假设我的数据库用户拥有所有必要的权限，我该怎么办？我可以运行查询还是有任何视图可以为我提供此类信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T23:05:45.830

```
select * from v$version;
select platform_name from v$database;
select dbms_utility.port_string from dual; 
```

# php - 在我提交表单之前如何保留我的 $_SESSION

> ID：15488472
> 
> 赞同：1
> 
> 时间：2013-03-18T22:52:00.593
> 
> 标签：php, session

首先感谢您阅读本文，我有一个表格，它有 3 页，需要从第 1 页和第 2 页存储数据，最后在第 3 页，然后将其发送到数据库。

我在第 2 页上使用它来存储来自第 1 页的信息（假设在我的表单的第 1 页上有 session_start();）

```
$_SESSION['firstName']= $_POST['firstName'];
$_SESSION['telephone']= $_POST['telephone']; 
$_SESSION['surname']= $_POST['surname'];
$_SESSION['mobile']= $_POST['mobile']; 
```

然后第 3 页从第 2 页获取信息，使用它来保存信息。

```
 $_SESSION['address1']= $_POST['address1']; 
 $_SESSION['address2']= $_POST['address2'];
 $_SESSION['address3']= $_POST['address3'];
 $_SESSION['email']= $_POST['email'];
 $_SESSION['customerType']= $_POST['customerType']; 
```

如果我在第 3 页回显 $_SESSION['email'] 它会显示，但如果我在最后一页上回显第 2 页的任何 $_SESSION，它不会显示任何内容。

我花了很长时间研究存储会话，但似乎无法解决。

**总结：-**

*   第 1 页 启动会话 (session_start())，用户输入他们的姓名、姓氏和手机。
*   PAGE 2 存储用户在第 1 页输入的信息，用户输入他们的地址、电子邮件并选择会员类型。
*   PAGE 3 存储用户在第2页输入的信息，用户选择付款方式（不付款，我只是想知道会员想如何付款，所以check or paypal）
*   PAGE 3 也有一条信息，它没有存储为页面将所有信息提交到数据库。

第 3 页的问题 如果我尝试回显第 1 页的任何信息，则不会显示第 1 页的数据我收到此错误：-**注意：未定义的索引：**

再次感谢您阅读本文，对不起，因为我是新手，所以这对你们中的许多人来说是一个愚蠢的问题，但我想学习，这个网站很棒。

抱歉忘了添加这个，我有一个名为 Default.php 的主页，其中包含以下代码：-

```
 if ($_REQUEST['p']) { include('includes/'.$_REQUEST['p'].'.php'); 
```

然后我的所有页面都从此页面调用，格式如下

```
 default.php?p=addmember
  default.php?p=addmember-page2
  default.php?p=addmember-page3 
```

**default.php 有 session_start(); 所以每个页面都有这个调用**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T22:53:37.387

您需要`session_start()`在每个页面中使用初始化会话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T00:07:07.537

也许这会有所帮助。

```
<?php
session_start();
?>
<?php
#session_destroy();
function form($type)
{
    return "<form action=\"\" method=\"POST\" >
            <input type=\"text\" name=\"next\" />
            <input type=\"submit\" name=\"$type\" />
            </form> ";
}

function module()
{
    echo form('one');
    if (isset($_POST['one'])) {
        if (isset($_POST['next']) && !empty($_POST['next'])) {
            $_SESSION['title'] = $_POST['next'];
        } else {
            echo "post is empty";
        }
    } else {
        echo "Please fill the field";
    }
}

function module2()
{
    echo form('two');
    if (isset($_POST['two'])) {
        if (isset($_POST['next']) && !empty($_POST['next'])) {
            $_SESSION['content'] = $_POST['next'];
        } else {
            echo "post is empty";
        }
    } else {
        echo "Please fill the field";
    }
}

function module3()
{
    echo form('three');
    if (isset($_POST['three'])) {
        if (isset($_POST['next']) && !empty($_POST['next'])) {
            $_SESSION['category'] = $_POST['next'];
        } else {
            echo "post is empty";
        }
    } else {
        echo "Please fill the field";
    }
}
if (!isset($_SESSION['title'])) {
    echo module();
} else if (isset($_SESSION['title']) && !isset($_SESSION['content'])) {
    echo module2();
} else if (isset($_SESSION['content']) && !isset($_SESSION['category'])) {
    echo module3();
}

// you can delete, below this line. 
echo "<div style=\"width:1000px; align:left; border:1px dashed #darkblue; color: darkblue; font-size:14px;  \" />";
function SessionChecker($type)
{
    if (isset($_SESSION[$type]) && !empty($_SESSION[$type])) {
        echo "Session $type is set as <b>" . $_SESSION[$type] . "</b><br/>";
    } else {
        echo "Session '$type' is not set <br/>";
    }
}

echo SessionChecker('title');
echo SessionChecker('content');
echo SessionChecker('category');
echo "</div>"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T22:55:38.410

你`session_start()`在每一页上都调用了吗？

`session_start()`创建一个会话或恢复当前会话，因此您需要在每个页面的顶部调用它，而不仅仅是您的初始页面。

# sorting - 我们有一组 N 个潜在投资

> ID：15488476
> 
> 赞同：0
> 
> 时间：2013-03-18T22:52:08.630
> 
> 标签：sorting, pseudocode, set

我们有n个潜在投资的集合S，每一个都由一对浮点数给出（金额，估计回报）有一个总金额A要投资；我们希望选择投资以最大化该金额的回报。

请解释我如何使用 nlogn 的估计回报/金额比率来订购投资。这是使用快速排序吗？我可以计算 O(n) 中的比率，那么我如何保持一个关于哪个比率属于哪个投资的指数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:02:07.047

这不是一种[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)吗？通常这类问题是使用动态规划来解决的。网上有[几个](http://www.programminglogic.com/knapsack-problem-dynamic-programming-algorithm/) [例子，包括](http://sriwantha.blogspot.ru/2011/07/knapsack-problem-in-c.html)[StackOverflow 上](https://stackoverflow.com/questions/5683066/knapsack-problem-classic?rq=1)的主题。

# sql - Sql 连接平均

> ID：15488479
> 
> 赞同：0
> 
> 时间：2013-03-18T22:52:15.083
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我正在使用 SQL Server 2012。我有两个表来保存产品订单。具有接收日期的订单和具有价格和订单 ID fk 的 OrderItem。

我有一个查询，按日期对订单进行分组，并获取该日期的订单数量和总价。我还有一列是 7 天前订单数量的差异。

但是，我还希望能够获得过去 7 天内所有订单的平均值。

所以目前我有以下查询：

```
declare @DateFrom datetime
set @DateFrom = '2012-12-01'

declare @DateTo datetime
set @DateTo = '2013-03-13'

;with orders as (
    select 
    cast(o.ReceivedDate as date) as OrderDate, 
    count(oi.Id) as Orders,
    coalesce(sum(oi.Price), 0) as Price
    from OrderItem oi 
    join [Order] o on oi.OrderId = o.Id
    where cast(o.ReceivedDate as date) >= @DateFrom 
    and cast(o.ReceivedDate as date) <= @DateTo
    group by cast(o.ReceivedDate as date)
)

select c1.OrderDate,
c1.Price,
c1.Orders,
c1.Orders - c2.Orders as DIFF7DAYS
from orders c1
left join orders c2 on dateadd(day, -7, c1.OrderDate) = c2.OrderDate
order by c1.OrderDate desc 
```

现在我想添加另一列来获取过去 7 天的平均订单。

我试过类似的东西：

```
select c1.OrderDate,
c1.Price,
c1.Orders,
c1.Orders - c2.Orders as DIFF7DAYS,
c3.AverageOrders
from orders c1
left join orders c2 on dateadd(day, -7, c1.OrderDate) = c2.OrderDate
left join (
select OrderDate, avg(Orders) as AverageOrders
from orders
group by OrderDate
) as c3 on c3.OrderDate >= dateadd(day, -7, c1.OrderDate) and c3.OrderDate <= c1.OrderDate     and c3.OrderDate = c1.OrderDate
order by c1.OrderDate desc 
```

但似乎没有做什么我做什么。我还尝试从连接中删除 c3.OrderDate = c1.OrderDate 但是我得到了影响平均值的重复行。基本上我想在结果中添加一列：

```
select avg(Orders) as AverageOrders
from orders
where OrderDate >= (the current order - 7 days) and OrderDate <= (the current order) 
```

但我不知道该怎么做？我创建了一个 sqlfiddle 来帮助解释[http://sqlfiddle.com/#!6/8b837/44](http://sqlfiddle.com/#!6/8b837/44)

因此，从我的示例数据中，我想要实现的是这样的结果：

```
|  ORDERDATE | ORDERS | PRICE |  DIFF7DAYS  | AVERAGE |
-------------------------------------------------------
| 2013-01-25 |      7 |    38 |           6 |       2 |
| 2013-01-24 |      2 |    12 |        null |       1 |
| 2013-01-23 |      1 |    10 |        null |       1 |
| 2013-01-22 |      1 |    33 |        null |
| 2013-01-18 |      1 |    10 |        null |
| 2013-01-10 |      1 |     3 |          -2 |
| 2013-01-08 |      2 |    11 |        null |
| 2013-01-04 |      1 |     1 |        null |
| 2013-01-03 |      3 |    46 |        null | 
```

如您所见，25 日的平均值为 2，因为过去 7 天（25、24、23、22、18）的四舍五入平均值为 2。

我还希望能够扩展它并为平均超过 30 天添加另一列。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:20:59.620

我不是 100% 肯定我理解你的问题，但我相信你正在尝试`SUM`过去 7 天的 Orders 列，然后除以`COUNT`得到`AVG`. 如果是这样，那么这应该使用您提供的 Fiddle 工作：

```
declare @DateFrom datetime
    set @DateFrom = '2012-12-01'

    declare @DateTo datetime
    set @DateTo = '2013-03-13'

    ;with orders as (
        select 
        cast(o.ReceivedDate as date) as OrderDate, 
        count(oi.Id) as Orders,
        coalesce(sum(oi.Price), 0) as Price
        from OrderItem oi 
        join [Order] o on oi.OrderId = o.Id
        where cast(o.ReceivedDate as date) >= @DateFrom 
        and cast(o.ReceivedDate as date) <= @DateTo
        group by cast(o.ReceivedDate as date)
    ),
    totals as (
      select c1.OrderDate,
      c1.Price,
      c1.Orders,
      c1.Orders - c2.Orders as DIFF7DAYS, 
      ROW_NUMBER() OVER (ORDER BY c1.OrderDate DESC) rn
      from orders c1
      left join orders c2 on dateadd(day, -7, c1.OrderDate) = c2.OrderDate

  ) 
Select t.OrderDate, t.Price, t.Orders, t.Diff7Days,
  SUM(t2.Orders)/COUNT(t2.Orders) avg
FROM totals t
LEFT JOIN totals t2 on t.rn + 7 > t2.rn and t2.rn >= t.rn
GROUP BY t.OrderDate, t.Price, t.Orders, t.Diff7Days
order by t.OrderDate desc 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!6/8b837/67)

如果您想为那些没有 7 天数据的记录设置 NULL，那么一个简单`CASE`的检查语句`COUNT`就可以确定这一点。

# python - 运行用 Python 创建的命令行工具

> ID：15488483
> 
> 赞同：1
> 
> 时间：2013-03-18T22:52:44.050
> 
> 标签：python, command-line

我不确定我应该用这个问题寻找什么。

假设我在 Python 中创建了一个脚本来解析命令行参数。我应该怎么做才能以与其他 *NIX 工具相同的方式从命令行执行它？

例如：而不是：

```
$ python program -s 2000 
```

或者

```
$ ./program -s 2000 
```

我只想能够做到以下几点：

```
$ program -s 2000 
```

理想情况下，我希望它可以在 Windows 和 OSX 上运行。关于我希望在哪里完成此任务的任何信息？我已经尝试过shebang，它允许我按照第二个示例执行脚本，但是我找不到太多关于在不指定当前目录的情况下允许它执行的信息。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:59:29.843

到目前为止，其他答案没有提到的一件事：

```
./program ... 
```

和

```
program ... 
```

不是您可以在程序内部影响的东西。这是因为 Unixen 默认情况下，在查找可执行文件时不搜索当前目录，只搜索`PATH`. 您需要添加`.`到`PATH`（不推荐，因为这是一个安全问题，我实际上并不确定它是否会工作），添加程序所在的目录`PATH`，或者将程序安装到已经存在的目录中。（例如，通过将其符号链接到`/usr/local/bin/`. 我还为我的实用程序使用两者的组合，放置`~/bin/`PATH 并将程序放置/链接到那里。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:54:40.427

签出：http: [//www.pyinstaller.org/](http://www.pyinstaller.org/)。它看起来是适合这项工作的工具。应该可以在 Windows、OS X、Linux 上运行。用法可以在这里找到：[https ://github.com/pyinstaller/pyinstaller#usage](https://github.com/pyinstaller/pyinstaller#usage)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T22:54:45.013

在文件顶部添加以下行：

```
#!/usr/bin/python 
```

最后为您的文件设置执行权限

```
chmod +x program 
```

第一行告诉程序加载器应该由哪个解释器处理文件

# biztalk - map 的输出将字节顺序标记添加到 xml

> ID：15488493
> 
> 赞同：0
> 
> 时间：2013-03-18T22:53:19.993
> 
> 标签：biztalk, biztalk-2010, biztalk-mapper

我有一张地图，它为我构建了一条消息，然后将其传递给另一个地图（全部在一个编排中。

检查第一个映射的消息输出，我可以看到该消息包含 EF BB BF 字节顺序标记。

当第二个映射执行时，它会抛出异常“根级别的数据无效。第 1 行，位置 61。”：

> xlang/s 引擎事件日志条目：未捕获的异常（请参阅下面的“内部异常”）已暂停服务“MyCompany.MyOrchestration(004464ca-1c34-e342-591d-5e8182a4be18)”的实例。
> 服务实例将保持挂起状态，直到以管理方式恢复或终止。
> 如果恢复，实例将从其上次持久状态继续，并可能重新引发相同的意外异常。
> InstanceId：62d99333-8dc4-4ca4-9e5b-7fdf8583e081 形状名称：conCDA
> ShapeId：ba722b56-c115-4abb-b40c-211824369266
> 抛出异常：段 1，进度 15
> 内部异常：根级别的数据无效。第 1 行，位置 61。
> 
> 异常类型：XmlException
> 源：System.Xml
> 目标站点：Void Throw(System.Exception) 以下是标识异常发生位置的堆栈跟踪
> 
> 在 System.Xml.XmlTextReaderImpl.Throw(Exception e)
> 在 System.Xml.XmlTextReaderImpl.Throw(String res, String arg)
> 在 System.Xml.XmlTextReaderImpl.ParseRootLevelWhitespace()
> 在 System.Xml.XmlTextReaderImpl.ParseDocumentContent()
> 在 System. Xml.XmlTextReaderImpl.Read()
> 在 System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
> 在 System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)
> 在 System.Xml.XmlDocument.Load(XmlReader reader)
> 在System.Xml.XmlDocument.Load(TextReader txtReader)
> at Microsoft.XLANGs.Core.Service.Transform.ShredXmlDocument(Stream inStream, Object[] outParams, String mapName, XmlDeclaration xmlDecl)
> 在 Microsoft.XLANGs.Core.Service.ApplyInMemoryTransform（类型 mapRef，TransformMetaData trfMetaData，Object[] outParams，Stream[] inStreams）
> 在 Microsoft.XLANGs.Core.Service.ApplyTransform（类型 mapRef，Object[] outParams，Object[] inParams )
> 在 MyCompany.MyOrchestration.segment1(StopConditions stopOn)
> 在 Microsoft.XLANGs.Core.SegmentScheduler.RunASegment(Segment s, StopConditions stopCond, Exception& exp)

如何让第一张地图不添加字节顺序标记？

**编辑：** 第一个映射是在输入端有两条消息的映射，这些消息映射到输出端的单条消息。第一条消息使用结构链接映射所有节点，第二条消息使用大量复制功能。即使在字节级别查看消息，我在字符 61 处也看不到任何有趣的字符。我可以看到 BOM，这就是为什么我认为这是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:44:38.883

我不完全确定这是一个 BOM 问题 - 您还没有明确说明您是如何创建地图的（即您是否有自定义功能，您是否使用 XSLT 等）您能否确认（或周围）是什么角色) 字符 61 - 它是[保留的 Xml 标记字符](http://www.w3resource.com/xml/reserved-markup-characters.php)之一吗？

或者，您是否检查过您调用的第一个地图在使用 VS 解决方案资源管理器中的“测试地图”工具运行时是否产生有效输出？您是否将 'Validate TestMap Input' 和 'Validate TestMap Output' 选项设置为 TRUE 并且它不会引发任何错误？另外，您是否尝试过保存第一个地图测试的输出并将其用作第二个地图测试的输入？

# vba - 自动联系人添加/分类/回复有效，但错过了最后收到的电子邮件

> ID：15488494
> 
> 赞同：0
> 
> 时间：2013-03-18T22:53:24.863
> 
> 标签：vba, outlook

这些论坛的新手，看起来有很多知识渊博的人在帮助！我对 VBA 的前景和一般的 VBA 都很陌生。

我拼凑了一些代码，使用经过大量研究后找到的示例，并对其进行了定制以完成我需要它做的事情。现在非常混乱，因为我只是在注释掉我不需要的东西，并且只是在添加要测试的东西。它可以正常工作并完成我需要它做的所有事情，除了它错过了最后收到的电子邮件。我还没有清理代码，因为我喜欢周围有 WAS 以供参考。

此代码应在收到新电子邮件后

1) 检查未读邮件，查看邮件是否包含联系人中已有的地址，如果没有，则添加联系人，并将收到的邮件移动到指定文件夹 2) 自动回复并标记为已读

代码（据我所知）运行正常，除了一个小细节：

如果一次收到多于一封电子邮件，它会始终错过最后收到的电子邮件。我已经阅读，阅读，阅读，只是无法理解为什么错过了最后一封电子邮件。非常感谢这里的任何帮助、建议、想法或正确方向的观点！

我正在使用 Outlook 2000，我整理的相关代码如下

```
 ```
Private WithEvents Items As Outlook.Items
Private Sub Application_Startup()
  Dim olApp As Outlook.Application
  Dim objNS As Outlook.NameSpace
  Set olApp = Outlook.Application
  Set objNS = olApp.GetNamespace("MAPI")
  ' default local Inbox
  Set Items = objNS.GetDefaultFolder(olFolderInbox).Items
End Sub

 Private Sub Items_ItemAdd(ByVal item As Object)
 On Error GoTo ErrorHandler
  Dim msg As Outlook.MailItem

  If TypeName(item) = "MailItem" Then
    Set msg = item
    'MsgBox ("New Join!")
   ' MsgBox msg.Subject
    Call AddAddressesToContactsAuto
   ' Call find_unread              '''''ADD THIS BACK
   ' MsgBox msg.Body
  '  test field
'    Dim oout As Object
 ' Dim omsg As Object

'  Set oout = CreateObject("Outlook.Application")
 ' Set omsg = oout.CreateItem(0)

'  With omsg
 '    .To = msg.Subject
 '    .CC = ""
 '    .BCC = ""
  '   .Subject = Thanks
  '   .Body = (msg.Body & "Thank you for joining Club PFM! You will be receiving your first newsletter with your special Club PFM offer within the next 7 days!")
  '   .Display
  ' End With

  ' testing
  ' If omsg.Sent Then
   '   MsgBox (" Sent ")
  ' Else
   '  MsgBox (" Not Send ! ")
  ' End If

 ' Set oout = Nothing
 ' Set omsg = Nothing

   ' end test field
  End If
ProgramExit:
  Exit Sub
ErrorHandler:
  MsgBox Err.Number & " - " & Err.Description
  Resume ProgramExit
 End Sub

Public Sub AddAddressesToContactsAuto()
Dim folContacts As Outlook.MAPIFolder
Dim folContacts2 As Outlook.MAPIFolder
Dim folContacts3 As Outlook.MAPIFolder
Dim colItems As Outlook.Items
Dim colItems2 As Outlook.Items
Dim colItems3 As Outlook.Items
Dim oContact As Outlook.ContactItem
Dim oContact2 As Outlook.ContactItem
Dim oContact3 As Outlook.ContactItem
Dim oMail As Outlook.MailItem
Dim obj As Object
Dim oNS As Outlook.NameSpace
Dim folder As MAPIFolder
Dim myDestFolder As Outlook.MAPIFolder

Dim response As VbMsgBoxResult

Dim bContinue As Boolean

Dim sSenderName As String
Dim emailz As String

On Error Resume Next

Set oNS = Application.GetNamespace("MAPI")
Set folContacts = oNS.GetDefaultFolder(olFolderContacts)
Set folContacts2 = oNS.GetDefaultFolder(olFolderContacts).Folders("Awaiting Invitation")
Set folContacts3 = oNS.GetDefaultFolder(olFolderContacts).Folders("Added To Mail List")
Set colItems = folContacts.Items
Set colItems2 = folContacts2.Items
Set colItems3 = folContacts3.Items
Set folder = oNS.GetDefaultFolder(olFolderInbox)         '.Folders("Awaiting Invitation")
Set myDestFolder = oNS.GetDefaultFolder(olFolderInbox).Folders("Awaiting Invitation")

For Each obj In folder.Items

If (obj.Class = olMail) And (obj.UnRead) Then

Set oContact = Nothing
Set oContact2 = Nothing
Set oContact3 = Nothing

bContinue = True
sSenderName = ";"

Set oMail = obj

sSenderName = oMail.Body
emailz = oMail.Subject
If sSenderName = ";" Then
sSenderName = oMail.Body
emailz = oMail.Subject
End If

Set oContact = colItems.Find("[E-mail] = '" & emailz & "'")
Set oContact2 = colItems2.Find("[E-mail] = '" & emailz & "'")
Set oContact3 = colItems3.Find("[E-mail] = '" & emailz & "'")

'start checks
'default folder
If Not (oContact Is Nothing) Then

response = MsgBox(emailz & " Already exists in contacts! Add anyways?", vbQuestion + vbYesNo, "Contact Adder")
If response = vbNo Then
bContinue = False
End If
End If
'awaiting invitation
If Not (oContact2 Is Nothing) Then

response = MsgBox(emailz & " Already exists in contacts! Add anyways?", vbQuestion + vbYesNo, "Contact Adder")
If response = vbNo Then
bContinue = False
End If
End If
'added to mail list
If Not (oContact3 Is Nothing) Then

response = MsgBox(emailz & " Already exists in contacts! Add anyways?", vbQuestion + vbYesNo, "Contact Adder")
If response = vbNo Then
bContinue = False
End If
End If

'end checks
If bContinue = True Then
oMail.Move myDestFolder  'ADDED THIS REMOVE IF YOU BREAK IT!!!
Set oContact = colItems2.Add(olContactItem)
With oContact
.Body = "Club PFM Member!"
.Email1Address = emailz
.BusinessAddress = emailz
.FullName = sSenderName
.Save
End With
'testing start
'testing end
End If
End If
emailz = ""
Next

Set folContacts = Nothing
Set folContacts2 = Nothing
Set folContacts3 = Nothing
Set colItems = Nothing
Set colItems2 = Nothing
Set colItems3 = Nothing
Set oContact = Nothing
Set oContact2 = Nothing
Set oContact3 = Nothing
Set oMail = Nothing
Set obj = Nothing
Set oNS = Nothing
Call find_unread

End Sub

Sub find_unread()
    On Error GoTo eh:
    ' I want to be able to catch up by reading all my unread messages
    Dim ns As Outlook.NameSpace
    Dim folder As MAPIFolder
    Dim item As Object
    Dim msg As MailItem
    'for sending mail
    Dim oout As Object
    Dim omsg As Object
    'end sending mail
      Dim Thanks As String
    ' Open the inbox folder
    Set ns = Session.Application.GetNamespace("MAPI")
    Set folder = ns.GetDefaultFolder(olFolderInbox).Folders("Awaiting Invitation")

    ' Loop through items in the inbox folder
    For Each item In folder.Items
        DoEvents
        If (item.Class = olMail) And (item.UnRead) Then
            ' This message has not been read.  Display it modally
            Set msg = item
            item.UnRead False
            Thanks = ("Thanks for joining Club PFM!")
            MsgBox ("7 Day notice sent to: " & msg.Subject)
            'create auto response
            Set oout = CreateObject("Outlook.Application")
  Set omsg = oout.CreateItem(0)

  With omsg
     .To = msg.Subject
     .CC = ""
     .BCC = ""
     .Subject = Thanks
     .Body = (msg.Body + "Thank you for joining Club PFM! You will be receiving your first newsletter with your special Club PFM offer within the next 7 days!")
     .Display
   End With
   'end response
            'try calling other operations, see if they work!!
            'does not work in this fashion, try putting entire code here, then call this on new mail event

            'Call AddAddressesToContacts
            'end calling operations
            ' uncomment the next line to have it only find one unread
            ' message at a time
            'Exit For
        End If
    Next

    ' If you uncommented the line to read individual messages,
    ' comment the next line so you don't get a message box
    ' every single message!

    MsgBox "All messages in Inbox are read", vbInformation, "All Read"
    Exit Sub
eh:
    MsgBox Err.Description, vbCritical, Err.Number
End Sub 
``` 好的，谢谢你的信息，我已经修改了相关代码，它在下面，你的想法已经解决了我的一些问题，如果我注释掉“find_unread”......“AddContactsToAddressesAuto”100% 的时间都完美无缺！现在我的问题仍然是相似的，通过下面的更改，最后收到的电子邮件留在了收件箱中，所以它在“find_unread”中的东西我认为这把事情搞砸了，我就是不知道是什么！

展望 2000 vba 更新

```
 ```
Public Sub AddAddressesToContactsAuto()
Dim folContacts As Outlook.MAPIFolder
Dim folContacts2 As Outlook.MAPIFolder
Dim folContacts3 As Outlook.MAPIFolder
Dim colItems As Outlook.Items
Dim colItems2 As Outlook.Items
Dim colItems3 As Outlook.Items
Dim oContact As Outlook.ContactItem
Dim oContact2 As Outlook.ContactItem
Dim oContact3 As Outlook.ContactItem
Dim oMail As Outlook.MailItem
Dim obj As Object
Dim oNS As Outlook.NameSpace
Dim folder As MAPIFolder
Dim myDestFolder As Outlook.MAPIFolder

Dim response As VbMsgBoxResult

Dim bContinue As Boolean

Dim sSenderName As String
Dim emailz As String

On Error Resume Next

Set oNS = Application.GetNamespace("MAPI")
Set folContacts = oNS.GetDefaultFolder(olFolderContacts)
Set folContacts2 = oNS.GetDefaultFolder(olFolderContacts).Folders("Awaiting Invitation")
Set folContacts3 = oNS.GetDefaultFolder(olFolderContacts).Folders("Added To Mail List")
Set colItems = folContacts.Items
Set colItems2 = folContacts2.Items
Set colItems3 = folContacts3.Items
Set folder = oNS.GetDefaultFolder(olFolderInbox)         '.Folders("Awaiting Invitation")
Set myDestFolder = oNS.GetDefaultFolder(olFolderInbox).Folders("Awaiting Invitation")

'For Each obj In folder.Items
For I = folder.Items.Count To 1 Step -1
    Set obj = folder.Items(I)
If (obj.Class = olMail) And (obj.UnRead) Then

Set oContact = Nothing
Set oContact2 = Nothing
Set oContact3 = Nothing

bContinue = True
sSenderName = ";"

Set oMail = obj

sSenderName = oMail.Body
emailz = oMail.Subject
If sSenderName = ";" Then
sSenderName = oMail.Body
emailz = oMail.Subject
End If

Set oContact = colItems.Find("[E-mail] = '" & emailz & "'")
Set oContact2 = colItems2.Find("[E-mail] = '" & emailz & "'")
Set oContact3 = colItems3.Find("[E-mail] = '" & emailz & "'")

'start checks
'default folder
If Not (oContact Is Nothing) Then

response = MsgBox(emailz & " Already exists in contacts! Add anyways?", vbQuestion + vbYesNo, "Contact Adder")
If response = vbNo Then
bContinue = False
End If
End If
'awaiting invitation
If Not (oContact2 Is Nothing) Then

response = MsgBox(emailz & " Already exists in contacts! Add anyways?", vbQuestion + vbYesNo, "Contact Adder")
If response = vbNo Then
bContinue = False
End If
End If
'added to mail list
If Not (oContact3 Is Nothing) Then

response = MsgBox(emailz & " Already exists in contacts! Add anyways?", vbQuestion + vbYesNo, "Contact Adder")
If response = vbNo Then
bContinue = False
End If
End If

'end checks
If bContinue = True Then

obj.Move myDestFolder  'ADDED THIS REMOVE IF YOU BREAK IT!!!
Set oContact = colItems2.Add(olContactItem)
With oContact
.Body = "Club PFM Member!"
.Email1Address = emailz
.BusinessAddress = emailz
.FullName = sSenderName
.Save
End With
'testing start
'testing end
End If
End If
emailz = ""
Next

Set folContacts = Nothing
Set folContacts2 = Nothing
Set folContacts3 = Nothing
Set colItems = Nothing
Set colItems2 = Nothing
Set colItems3 = Nothing
Set oContact = Nothing
Set oContact2 = Nothing
Set oContact3 = Nothing
Set oMail = Nothing
Set obj = Nothing
Set oNS = Nothing
Call find_unread

End Sub

Sub find_unread()
    On Error GoTo eh:
    ' I want to be able to catch up by reading all my unread messages
    Dim ns As Outlook.NameSpace
    Dim folder As MAPIFolder
    Dim item As Object
    Dim msg As MailItem
    'for sending mail
    Dim oout As Object
    Dim omsg As Object
    Dim obj As Object
    'end sending mail
    Dim Thanks As String
    ' Open the inbox folder
    Set ns = Session.Application.GetNamespace("MAPI")
    Set folder = ns.GetDefaultFolder(olFolderInbox).Folders("Awaiting Invitation")

    ' Loop through items in the inbox folder
   'For Each item In folder.Items
For I = folder.Items.Count To 1 Step -1
    Set obj = folder.Items(I)
        DoEvents
        If (obj.Class = olMail) And (obj.UnRead) Then
            ' This message has not been read.  Display it modally
            Set msg = obj
            obj.UnRead False
            Thanks = ("Thanks for joining Club PFM!")
            MsgBox ("7 Day notice sent to: " & msg.Subject)
            'create auto response
            Set oout = CreateObject("Outlook.Application")
            Set omsg = oout.CreateItem(0)

  With omsg
     .To = msg.Subject
     .CC = ""
     .BCC = ""
     .Subject = Thanks
     .Body = (msg.Body + "Thank you for joining Club PFM! You will be receiving your first newsletter with your special Club PFM offer within the next 7 days!")
     .Display
   End With
   'end response
            'try calling other operations, see if they work!!
            'does not work in this fashion, try putting entire code here, then call this on new mail event

            'Call AddAddressesToContacts
            'end calling operations
            ' uncomment the next line to have it only find one unread
            ' message at a time
            'Exit For
        End If
    Next

    ' If you uncommented the line to read individual messages,
    ' comment the next line so you don't get a message box
    ' every single message!

    MsgBox "All messages in Inbox are read", vbInformation, "All Read"
    Exit Sub
eh:
    MsgBox Err.Description, vbCritical, Err.Number
End Sub 
``` 
            回答 #1

赞同：0

时间：2013-03-19T18:32:58.253

当删除/移动项目并更改集合中的项目数时，For Each 无法很好地跟踪。

使用这种类型的循环。

```
For i = folder.Items.Count To 1 Step -1 
    Set obj = folder.Items(i)
    obj.Move myDestFolder
Next 
```

```

```

# ajax - 带有回调的简单 AJAX Servlet

> ID：15488495
> 
> 赞同：0
> 
> 时间：2013-03-18T22:53:34.803
> 
> 标签：ajax, servlets, asynchronous

我正在尝试学习 AJAX，现在我正在阅读 servlet 和回调。我觉得我的书没有详细介绍 servlet 或回调，所以我查看了许多在线资源，结果更加困惑。我觉得我会通过实例来理解它，所以我指望你们帮助我:) 将不胜感激！我要做的是创建一个接受数字的索引页面，将其异步传递给 servlet 以求平方，然后在索引页面上显示结果。这是我到目前为止得到的。

索引.html

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script>
            function setup() {
                if (window.XMLHttpRequest) {
                    r = new XMLHttpRequest();
                } else {
                    r = new ActiveXObject("Microsoft.XMLHTTP");
                }
                r.open("get","convert",true);
                r.onreadystatechange=???????????
                r.send(null);
            }
        </script>
    </head>
<body onload="setup()">
    <h3>Enter a number to be squared <input type="text" name="number" size="2" 
        maxlength="4"/></h3>
    <p id="result"></p>
</body> 
```

转换.java

```
package squared;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.sql.*;

public class convert extends HttpServlet
{
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException
    {
        response.setContentType("text/xml"); 
        response.setHeader("Cache-Control", "no-cache");
        PrintWriter out=response.getWriter();

    }
} 
```

感谢您花时间帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:32:27.097

如果我们使用 Jquery，使用 Ajax 确实很容易，但确实我们应该学习创建 XMLHttpRequest 对象。我提供了一个简单的 ajax 示例，希望对您有所帮助。在您提出的问题中，我找不到您的 servlet 正在从请求对象中读取任何内容并将结果发送回任何响应。HTML 文件：(index.html)

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Servlet Test</title>
</head>
<body>
<h3>Please enter a number to Square : </h3>
<input type="text" id="numberToSquare">
<input type="button" onclick="callServlet();" value="Click To Square">
<div id="result"></div>
</body>
<script>
function callServlet()
{
    var xmlhttp;
    var input = document.getElementById('numberToSquare').value;
    if (window.XMLHttpRequest)
    {
    // This part is mainly for the latest browsers which have XMLHttpRequest object
        // like Chrome,Firefox,Safari and IE7+
    xmlhttp=new XMLHttpRequest();
    }
    else
    {
    // This should take care of the older browsers
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
xmlhttp.onreadystatechange=function()
{
/*
readyState has four different states : 
    0: request not initialized 
    1: server connection established
    2: request received 
    3: processing request 
    4: request finished and response is ready
status is ranging between 200 - Ok and 404 - Page Not Found     
*/
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
    document.getElementById("result").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","ServletTest?val="+input,true);
xmlhttp.send();
}
</script>
</html> 
```

使用的 servlet：（我只提供 doGet 方法，因为 servlet 的其余部分都很好）

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws
ServletException, IOException {
    // TODO Auto-generated method stub
    String val = request.getParameter("val");
    int valFromString = Integer.parseInt(val);
    Double d =  Math.pow(valFromString, 2);
    PrintWriter writer = response.getWriter();
    writer.println(d);
    System.out.println(d);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:07:56.047

`jQuery.ajax`我认为使用方法而不是手动创建`XMLHttpRequest`对象要容易得多且不易出错。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

但是如果你想让你的 XMLHttpRequest 工作，你应该执行以下步骤：

1.  通过运算符创建新`XMLHttpRequest`对象`new`；
2.  `open`在您的 XMLHttpRequest 上调用方法；
3.  定义`onload`回调函数；
4.  调用`send`XMLHttpRequest 的方法向服务器发送请求。

代码应如下：

```
var XHR = new XMLHttpRequest();
XHR.open('GET', 'some-url', true);
XHR.onload = function() {
   // here is function body
};
XHR.send(); 
```

在服务器端，您应该将您的 servlet 映射到`'some-URL'`您将在 AJAX 调用中使用的 。您可以在`web.xml`项目文件中执行此操作。

# c# - DataGridView 未填充

> ID：15488496
> 
> 赞同：1
> 
> 时间：2013-03-18T22:53:35.603
> 
> 标签：c#, .net, windows

我使用过 Web 应用程序和 GridView，但我现在是第一次使用 DataGridView。我认为这几乎是一样的，但我在尝试让它正确填充时遇到了一些麻烦。

这是我目前拥有的：

```
 familiesBindingSource.DataSource = FamilyLogic.GetFamiliesForView();
    FamiliesGridView.DataSource = familiesBindingSource; 
```

GetFamiliesView() 方法返回一个 DataTable。当我打开这个表格时，什么也没有发生。

编辑 - 添加更多代码..

```
 DataTable ds = FamilyLogic.GetFamiliesForView();
    familiesBindingSource.DataSource = ds;

    FamiliesGridView.DataSource = familiesBindingSource; 
```

我也可以发布 GetFamiliesForView() 方法，但我 100% 确定它不在那里。它返回正确的信息，并且当我单步执行时，FamiliesGridView 的 DataSource 字段确实包含正确的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:52:29.287

嗯，我发现了这个问题。我没有意识到我需要这两行代码。

```
 FamiliesGridView.Dock = DockStyle.Fill;
    FamiliesGridView.AutoGenerateColumns = true; 
```

谢谢大家的帮助。

# linux - 用键排序不起作用

> ID：15488503
> 
> 赞同：0
> 
> 时间：2013-03-18T22:53:57.927
> 
> 标签：linux, unix, sorting, terminal

我正在尝试对看起来像这样的条目进行排序，只是格式化与一个区域相对应的文本数据，使用这些区域的天文坐标和名称。我想根据大括号内的名称来组织这些区域。

圆（20：34：36.717，+40：51：51.90,15“）＃文本= {tadpole4h}

圆（20：25：28.500，+41：08：20.80,15“）＃文本= {tadpole33}

圆（20：32：40.867，+41：51：25.24,15“）＃文本= {tadpole45}

根据蝌蚪场后面的数字，我对 linux 比较陌生，但我认为我是从查看其他堆栈问题中得出的。这是我的破解：

```
sort -k54,56 -n test.reg 
```

和

```
sort -k54,55 -n < test.reg 
```

和

```
sort -k55,57 -n < test.reg 
```

和

```
sort -k55,56 -n < test.reg 
```

还尝试了 k 和 n 交换并完全拼出每个部分。我正在考虑搜索的另一种方法是，如果我可以使用通配符到达蝌蚪字符串，然后从那里排序，但我不知道如何让通配符进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:06:27.897

您可以使用 sed 为每一行添加蝌蚪编号的前缀，然后根据此前缀对您的行进行排序，对于您正在考虑的 .* 事物：

```
sed 's/.*tadpole\([^}]*\)}/\1 &/' test.reg | sort -t' ' -k1 
```

您还可以在打印之前删除前缀：

```
sed 's/.*tadpole\([^}]*\)}/\1 &/' test.reg | sort -t' ' -k1 | sed 's/^[^ ]* //' 
```

# ruby-on-rails - Rails 范围限制在 where 之前

> ID：15488506
> 
> 赞同：0
> 
> 时间：2013-03-18T22:54:11.037
> 
> 标签：ruby-on-rails

我希望能够在执行 where 查询之前限制我的结果。我正在尝试做一个实验，我查看一个随机样本，比如 50 个响应，然后想计算回答是的用户数量。如果我这样做，`response.limit(50).where(:chosen_answer => 'yes').count`我会得到 50，因为它会限制整个查询。

有没有办法把它变成两个单独的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:09:14.420

您可以将其作为单个查询执行，但可以使用嵌套查询：

```
# get 50
inner_query = response.select('id').limit(50).to_sql

# then filter within those 50
results = response.joins("INNER JOIN #{inner_query} x on x.id = responses.id").where(...).count 
```

# php - PHP单独发布textarea

> ID：15488509
> 
> 赞同：0
> 
> 时间：2013-03-18T22:54:32.027
> 
> 标签：php

我面临的问题是：

```
if(isset($_POST ['textarea1'])); 
```

有没有办法让我只能发布`textarea1`？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:56:29.693

发布特定元素的唯一方法是其中`<form>`只有该元素。

唯一的另一种方法是编写一个 Javascript 函数，将它`onSubmit`与该`<form>`元素挂钩，做任何你想做的事情，然后`return false`.

# ruby-on-rails - Rails 路线按类别过滤

> ID：15488511
> 
> 赞同：0
> 
> 时间：2013-03-18T22:54:34.790
> 
> 标签：ruby-on-rails, ruby, resources, routes, categories

我的应用中有两个模型：

```
class Suggest < ActiveRecord::Base
   belong_to :category
end

class Category < ActiveRecord::Base
   has_many :suggests
end 
```

我想做一条路线：

**/suggests/category1/ --**列出来自类别 1 的所有建议

**/suggests/category2/ --**列出来自类别 2 的所有建议

**/suggests/category1/123** //显示来自 ID 123 的类别 1 的建议

**/suggests/category1/123/edit** //从 ID 123 的类别 1 编辑建议

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:39:50.497

你做的有点不对；

由于您的类别有许多建议，因此要列出单个类别中的所有建议（建议！？），您应该有一条路线：

`/category1/suggests`而不是相反：

要做到这一点，你应该这样做：

```
resources :categories do
  resources :suggests
end 
```

这样，您将获得路线：

> /category1/suggests --列出来自类别 1 的所有建议
> 
> /category2/suggests --列出来自类别 2 的所有建议
> 
> /category1/suggests/123 //显示来自 ID 类别 1 的建议
> 
> /category1/suggests/123/edit //从 ID 123 的类别 1 编辑建议

# java - 如何只查询部分数据库？

> ID：15488513
> 
> 赞同：-2
> 
> 时间：2013-03-18T22:54:40.720
> 
> 标签：java, android, sqlite

有没有办法只查询我的数据库的一部分？让我解释一下……我有一张桌子，如下图所示，我在那里有问题和答案。A是问题，B是答案。所以，为了避免两个数据库，我创建了一个。我需要 8 个答案来 setText 到 8 个按钮，在另一行中，我需要 8 个答案来 setText 到其他 8 个按钮。因此，对于两个数据库，我会随机选择一行，收集随机播放它们，然后将 setText 设置为按钮，但是在图片中有答案，我不知道该怎么做。所以，我需要随机选择一个 id，选择问题，随机播放，setText 到按钮，在同一行选择所有 8 个答案，随机播放，然后设置为其他 8 个按钮。有没有办法或者我需要再创建一个表和一个数据库助手类？

![在此处输入图像描述](../Images/0af6a340dc69f2164fc4cf8e13c9ee80.png)

![在此处输入图像描述](../Images/7298ae4387d59183a8fb9b5c5d01f564.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:05:06.953

好的，这是我到目前为止所做的并且有效，但如果有更好的解决方案，请纠正我。我跳过了代码中一些不相关的部分。

```
Button a1,a2,a3,a4,a5,a6,a7,a8,b1,b2,b3,b4,b5,b6,b7,b8;
    TextView pitanje;

a1 = (Button) findViewById(R.id.bA1);
        a2 = (Button) findViewById(R.id.bA2);
        a3 = (Button) findViewById(R.id.bA3);
        a4 = (Button) findViewById(R.id.bA4);
        a5 = (Button) findViewById(R.id.bA5);
        a6 = (Button) findViewById(R.id.bA6);
        a7 = (Button) findViewById(R.id.bA7);
        a8 = (Button) findViewById(R.id.bA8);
        b1 = (Button) findViewById(R.id.bB1);
        b2 = (Button) findViewById(R.id.bB2);
        b3 = (Button) findViewById(R.id.bB3);
        b4 = (Button) findViewById(R.id.bB4);
        b5 = (Button) findViewById(R.id.bB5);
        b6 = (Button) findViewById(R.id.bB6);
        b7 = (Button) findViewById(R.id.bB7);
        b8 = (Button) findViewById(R.id.bB8);
        pitanje = (TextView) findViewById(R.id.tvPitanje);

        nextQuestion();
    }

    private void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{ 

            mDbHelper.open();

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            pitanje.setText(c.getString(1));

            List<String> labelsA = new ArrayList<String>();
            List<String> labelsB = new ArrayList<String>();

            labelsA.add(c.getString(2));
            labelsA.add(c.getString(4));
            labelsA.add(c.getString(6));
            labelsA.add(c.getString(8));
            labelsA.add(c.getString(10));
            labelsA.add(c.getString(12));
            labelsA.add(c.getString(14));
            labelsA.add(c.getString(16));

            labelsB.add(c.getString(3));
            labelsB.add(c.getString(5));
            labelsB.add(c.getString(7));
            labelsB.add(c.getString(9));
            labelsB.add(c.getString(11));
            labelsB.add(c.getString(13));
            labelsB.add(c.getString(15));
            labelsB.add(c.getString(17));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            a1.setText(labelsA.get(0));
            a1.setOnClickListener(clickListener);

            a2.setText(labelsA.get(1));
            a2.setOnClickListener(clickListener);

            a3.setText(labelsA.get(2));
            a3.setOnClickListener(clickListener);

            a4.setText(labelsA.get(3));
            a4.setOnClickListener(clickListener);

            a5.setText(labelsA.get(4));
            a5.setOnClickListener(clickListener);

            a6.setText(labelsA.get(5));
            a6.setOnClickListener(clickListener);

            a7.setText(labelsA.get(6));
            a7.setOnClickListener(clickListener);

            a8.setText(labelsA.get(7));
            a8.setOnClickListener(clickListener);

            b1.setText(labelsB.get(0));
            b1.setOnClickListener(clickListener);

            b2.setText(labelsB.get(1));
            b2.setOnClickListener(clickListener);

            b3.setText(labelsB.get(2));
            b3.setOnClickListener(clickListener);

            b4.setText(labelsB.get(3));
            b4.setOnClickListener(clickListener);

            b5.setText(labelsB.get(4));
            b5.setOnClickListener(clickListener);

            b6.setText(labelsB.get(5));
            b6.setOnClickListener(clickListener);

            b7.setText(labelsB.get(6));
            b7.setOnClickListener(clickListener);

            b8.setText(labelsB.get(7));
            b8.setOnClickListener(clickListener);

    }
        finally{
            mDbHelper.close();
        } 
```

# ruby-on-rails - 如何在 Mediatemple (dv) 上为子域配置 apache

> ID：15488516
> 
> 赞同：0
> 
> 时间：2013-03-18T22:55:00.327
> 
> 标签：ruby-on-rails, apache, vhosts, mediatemple

我有一个 mediatemple (dv) 帐户，当我设置一个 rails 应用程序时，我通常会在其中创建一个文件`/var/www/vhosts/mysite.com/conf/vhost.conf`并将以下内容放入其中：

```
ServerName mysite.com
ServerAlias mysite.com
DocumentRoot /var/www/vhosts/mysite.com/current/public
PassengerAppRoot /var/www/vhosts/mysite.com/current

<Directory "/var/www/vhosts/mysite.com/current/public">
        Options FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
</Directory>

RailsEnv production
RailsBaseURI /
PassengerMaxPoolSize 1
PassengerMaxInstancesPerApp 1
PassengerPoolIdleTime 30 
```

然后我使用 capistrano 部署我的应用程序。

我现在面临的情况是，我想在 mysite.com 上拥有一个站点，但在 staging.mysite.com 上也有一个测试站点。

测试地点将位于`/var/www/vhosts/mysite.com/staging`

如何配置我的 vhost.conf 文件来处理 2 个单独的 Rails 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:51:13.960

好的，我想通了，所以我会与大家分享。

您需要在 plesk 中创建一个子域，方法是转到您的域的控制面板，单击域链接，然后在底部您可以添加一个新的子域。

在 plesk 中创建子域会创建这些文件夹

```
/var/www/vhosts/mysite.com/subdomains
/var/www/vhosts/mysite.com/<mysubdomain> 
```

我只是将我的 Rails 应用程序文件放入`/var/www/vhosts/mysite.com/<mysubdomain>`其中，然后`/var/www/vhosts/mysite.com/subdomains/<mysubdomain>/conf`为我的子域创建另一个 vhost.conf 文件。

设置好这些东西之后，我跑`/usr/local/psa/admin/sbin/httpdmng --reconfigure-domain <mydomain>`了`/usr/local/psa/admin/sbin/httpdmng --reconfigure-domain <subdomain.mydomain>`

# php - Facebook 通过 PHP sdk 或 Javascript sdk 集成我的基于 PHP codeigniter 的网站

> ID：15488517
> 
> 赞同：0
> 
> 时间：2013-03-18T22:55:05.403
> 
> 标签：php, javascript, facebook, facebook-graph-api

我正在对基于 codeigniter 的 Web 应用程序进行 FaceBook 集成，我想利用用户能够使用他的 Facebook 登录 ID 登录我的网站并通过的设施。

这里提到的最简单的方法是[http://developers.facebook.com/docs/concepts/login/login-architecture/](http://developers.facebook.com/docs/concepts/login/login-architecture/)是使用客户端 JavaScript SDK。（如果我错了，请纠正我，如果可能更简单的方法。）

但我有点困惑，因为也有 PHP sdk 可用，而且我听说 PHP sdk 是可以验证 Facebook 某些部分的唯一方法，也是我们可以通过 FQL 访问 Facebook 数据的唯一方法。

走哪条路？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:13:11.920

您进行身份验证的方式取决于您在做什么。

如果您在 Facebook 上与用户交互，所有登录都是在客户端完成的。您可以使用登录对话框或 Javascript SDK 自己调用它。

对于最简单的方法，如果您安装了 PHP SDK，您可以使用[getLoginUrl](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)方法自动生成登录对话框的链接。

对用户进行身份验证后，您可以使用具有相同访问令牌的 FQL 或 Graph API 调用与他们的数据进行交互。

如果您想要一个[长期存在的访问令牌](https://developers.facebook.com/docs/howtos/login/extending-tokens/)，则只有在您当前拥有通过客户端方法获得的有效用户访问令牌时，您才能请求该服务器端。

如果您想作为[应用程序](https://developers.facebook.com/docs/howtos/login/login-as-app/)或[页面](https://developers.facebook.com/docs/howtos/login/login-as-page/)进行身份验证以访问洞察数据或配置参数，那么是的，您可能需要服务器端访问流程。

# facebook - facebook api 不返回工作、位置和电子邮件字段

> ID：15488519
> 
> 赞同：1
> 
> 时间：2013-03-18T22:55:09.203
> 
> 标签：facebook, oauth-2.0, social-networking, scribe

我已经开始使用 Scribe 库使用 FacebookAPi。我生成了范围为“read_stream,publish_stream,email,user_birthday,user_education_history,user_hometown,user_work_history,user_relationships,user_location,user_interests,user_hometown”的访问密钥并尝试制作人员搜索应用程序使用以下网址

[https://graph.facebook.com/search?&fields=id,name,gender,locale,username,third_party_id,education,hometown,picture,email,location,work,link&q=](https://graph.facebook.com/search?&fields=id,name,gender,locale,username,third_party_id,education,hometown,picture,email,location,work,link&q=) &type=user&access_token=

但它不会返回我的电子邮件、位置、工作领域。

我尝试使用 FQL，但它返回我的大部分字段为空。

即使我获得了用户的所有访问权限，我应该如何获得这些字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:02:48.810

即使您可能会看到人们的`work`和`location`，`email`API 也不允许您访问此信息，除非他们是您的朋友或您关注他们。

这可能被认为是为了避免任何会无限期地抓取 Facebook 上的公共内容的自动化。

此外，权限仅适用于用户（`user_birthdays`、`user_photos`等）和他的朋友（`friends_events`、`friends_interests`等）。这完全意味着其他人**没有现有权限**：您将在“搜索”中找到的用户。没有权限 = 没有数据。

# javascript - 是否已经有任何系统可以用作网站的小部件管理器？

> ID：15488523
> 
> 赞同：0
> 
> 时间：2013-03-18T22:55:41.960
> 
> 标签：javascript, web-applications, frameworks, widget

我正在构建一个将功能分成特定小部件的网站......并且我希望能够将我将构建的特定小部件的一个实例或多个实例拖到屏幕上以供使用。有点像苹果小部件系统，但适用于网站。是否已经有任何框架或库可以做到这一点？

对此或建议的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:18:24.933

jQuery Widget Factory 非常简单，可以作为起点使用，它们的工作方式类似于 jQuery 插件，并且由于您的所有小部件都将继承自 jQuery Widget，因此在需要的地方集成它们不会有任何问题。

[MSDN Site with jQuery Widget 教程](http://msdn.microsoft.com/en-us/library/hh404085.aspx)
[jQuery Widget 网站](http://jqueryui.com/widget/)

# c++ - 在具有预分配块的自定义 STL 分配器中重新绑定

> ID：15488527
> 
> 赞同：18
> 
> 时间：2013-03-18T22:55:50.410
> 
> 标签：c++, memory-management, stl, c++11, allocator

我将构建一个*自定义分配器*，预先分配一个大块（数组）来存储`N`某个类的元素`T`，然后在数组内增加一个索引来服务分配请求。

由于我*不*希望对预分配块中的元素进行任何初始化，因此这样的事情将不起作用：

```
T buffer[N]; 
```

因为在这种情况下`T`，将为`N`块的元素调用 的构造函数。

由于我的理解是`std::aligned_storage`不调用`T`构造函数，所以我想到了使用`std::aligned_storage`，如下所示：

```
std::aligned_storage<
    N * sizeof(T),
    std::alignment_of<T>::value 
>::type buffer;

T* base = static_cast<T*>( static_cast<void*>(&buffer) ); 
```

然后分配器可以在请求分配 T 时（直到`(base+N)`）增加基指针，并且可以在需要时*在适当的位置*（使用放置`new`）构造 T。

我想使用这个方案*为 STL 容器定义一个自定义分配器*。**但是，在我看来， rebinding**可能存在问题。事实上，如果我的理解是正确的，STL 分配器应该支持从 type 重新绑定`T`到 type `U`，例如因为容器`std::list<T>`（或其他基于节点的容器`std::map`）使用分配器来分配实际上不是 type 的*节点*`T`，但不同的节点类型`U`（包含`T`节点的其他“标头”开销信息）。那么，上述`std::aligned_storage`方法是否适用于重新绑定？或者（我认为）`T`s的正确对齐*不会*暗示另一种不同类型的正确对齐`U`？

如何解决这个问题？

我如何定义上述`buffer`内容以使其也适用于重新绑定到某些不同类型`U`？

是否应该从不同的角度来解决这个问题？如果是这样，是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T00:49:31.120

你在正确的轨道上。

一个恼人的细节是分配器的副本必须比较相等，甚至转换（反弹）副本。比较相等意味着它们可以释放彼此的指针。因此，诸如容器之类的容器`std::list<int>`将重新绑定`your_alloc<int>`，`your_alloc<node<int>>`然后`your_alloc<node<int>>`使用 a 构造 a `your_alloc<int>`。从技术上讲，您`your_alloc<node<int>>`必须解除分配由`your_alloc<int>`.

[这](http://howardhinnant.github.io/stack_alloc.html)是我试图满足这一要求的尝试。随意复制/修改/滥用此代码。我的目的是教育，而不是成为世界上的分配器供应商（无论如何这不会是有利可图的:-)）。

这个例子采用了稍微不同的对齐方法：我碰巧知道在我感兴趣的平台（OS X、iOS）上`malloc`返回 16 字节对齐的内存，所以这就是我的自定义分配器需要返回的全部内容。您可以将该数字更改为适合您系统的任何数字。

这种对齐的硬连线意味着单个池可以安全地提供多个`allocator<int>`and `allocator<node<int>>`，因为它们都是 16 字节对齐的（这就足够了）。这也意味着副本，甚至是转换后的副本，都可以检测指针何时指向缓冲区，因为所有副本都共享同一个缓冲区。

稍微不同的是，C++ 委员会已经有效地指定分配器是引用类型：副本是等价的并且指向同一个内存池。

您可以使用实际上嵌入到分配器中的内存池来逃避作弊，但只能在某些实现中使用一些容器，并且您不能用标准的引用来支持它。

# cakephp - CakePHP 1.3：如何在不进入视图的情况下执行操作

> ID：15488528
> 
> 赞同：4
> 
> 时间：2013-03-18T22:55:52.643
> 
> 标签：cakephp, cakephp-1.3

我通过操作有一个页面`search`，用户可以在其中指定一些选项来显示数据行。这个过程需要几秒钟，因为需要相当多的后端逻辑。在返回的数据上，用户可以通过操作将一行数据添加到另一个表中以`add_data`供将来参考。

请注意，搜索结果数据保存在一个表中，以便我在用户决定保存该行时随时可用（搜索结果是来自多个数据库的数据的汇编）。操作之后`add_data`，我希望能够`search`使用搜索结果维护视图，而不是让浏览器转到`add_data`视图并返回到引用者，那里不会有搜索结果。

现在，我知道我可以检查保存搜索结果并将其加载到`search`视图中的该表，但我想知道是否可以在不咨询数据库的情况下在保持当前操作视图完整的同时运行另一个操作. 据我所知，`$this->redirect(...)`由于搜索结果页面的 URL 缺少任何参数（例如`mycontroller/search`），因此没有任何效果。

我添加了一个按钮，使用以下代码添加用户所需的数据：

```
echo $this->Html->link('+', array('action' => 'add_data', $reference_id));    // + button is created 
```

有没有办法做到这一点？最好使用最少的 Javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:06:04.307

按照[此处](http://book.cakephp.org/1.3/en/The-Manual/Core-Helpers/AJAX.html)的步骤为您的蛋糕项目添加 ajax 支持。

然后，在呈现搜索视图的控制器中启用 ajax 助手：

```
$this->helpers('Ajax'); 
```

您应该能够像这样呈现您的链接，它不会引导用户离开搜索页面：

```
<?php echo $this->Ajax->link(
  '+', 
  array('action' => 'add_data', $reference_id),
  array('update' => 'my-div')
); 
?>
<div id='my-div'></div> 
```

由于您希望用户能够向该操作发送数据，因此您可能希望考虑发布表单而不仅仅是链接。Ajax 助手还提供了通过 Ajax 提交表单的能力：

```
echo $form->create();
echo $form->input('field1');
echo $form->input('field2');
echo $ajax->submit('Submit', array(
   'url'=> array('controller'=>'mycontroller', 'action'=>'add_data'),
   'update' => 'my-div'

));
echo $form->end(); 
```

在你的控制器中......

```
function add_data() {
  // ... do something
  $this->layout = 'ajax';
  $this->set('message', 'Your message here!');
} 
```

在 add_data 视图中......

```
<?php echo $message; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:58:18.983

我相信您正在寻找 View::render 方法。

```
<?php

...
function addData(...) {
    ...
    ...

    $this->render('search'); // Render the search view instead of the "add_data" view.
}
...

?> 
```

或者可能

```
<?php

...
function search(...) {
    ...
    ...

    if (<criteria)
        $this->addData(...); // Move to another action while keeping the current view in tact.
}
...
function addData(...) {
    if (<criteriaForSearchView>)
        $this->render('search');
    // Else render the "add_data" view.
}
...

?> 
```

让我知道这是否有帮助！谢谢！

# android - 如何同时为列表视图和不同的行颜色添加边框

> ID：15488529
> 
> 赞同：1
> 
> 时间：2013-03-18T22:55:54.017
> 
> 标签：android, listview, border

我试图在我的列表视图外部设置一个边框，同时为其他每一行设置不同的颜色

![在此处输入图像描述](../Images/fb819c63678888d9163f80114b763e12.png)

这是我的适配器的 getView 方法

```
 viewHolder.dateView.setText(entry.getDateString("yyyy-MM-dd HH:mm"));
        if(position % 2 == 0){
            viewHolder.linearLayout.setBackgroundResource(R.color.grey);

        }
        else{
            //viewHolder.linearLayout.setBackgroundResource(R.color.white);
        } 
```

这是我用来在**列表视图**上制作边框而不是单元格的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <!-- use this for transparent -->
   <!-- <solid android:color="#00000000" /> -->
   <!-- use this for a background colour -->
   <solid android:color="@color/white" />
   <stroke android:width="2dip" android:color="@color/black"/>
</shape> 
```

如果我将背景设置为单元格，我将看不到边框

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:06:35.790

**改写**

您显然已经阅读：[如何在 ListView 周围设置边框？](https://stackoverflow.com/q/5065722/1267661)因为您使用的是更好/更受欢迎的答案中的代码。但也请阅读底部答案，我通过添加`2dp`填充（与边框宽度相同）取得了成功。

```
 <LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/border_listview"
    android:gravity="center_horizontal"
    android:orientation="vertical"
    android:padding="2dp" >

    <ListView
        android:id="@+id/listView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:divider="@null"
        android:dividerHeight="0dp" />
</LinearLayout> 
```

# django - django - 生成动态数量的表单和流程

> ID：15488530
> 
> 赞同：0
> 
> 时间：2013-03-18T22:56:06.553
> 
> 标签：django, django-forms, django-views

我正在尝试创建一个表单：
a）包含可以根据需要生成的相同模型的多种形式。b) 一个 jquery 脚本，用于在需要时生成表单，就像下面的示例一样。c) 处理视图中的所有表单

当您单击添加按钮时，会生成一个新的表单实例，是否有任何关于如何在 django 上执行此操作的好教程？ ![在此处输入图像描述](../Images/2ce497aa471f5849d2bbda2a75f3d017.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:09:19.387

最好的方法是对将返回另一种表单的视图进行 AJAX 调用。您会遇到的问题是您必须为每个表单设置唯一的前缀，以便以后处理它们是可行的。

老实说，在这种情况下不使用 django-forms 可能更容易。我在我的一些项目中发现，在某些情况下，使用 django-forms 最终会花费更多时间，并增加了不需要的项目的复杂性。

使用 jquery 添加新的表单元素然后查看表单发布的视图可能更容易遍历 request.POST 元素并相应地处理它们。

# asp.net - 部署后 SQL 连接失败：“用户 '' 登录失败”

> ID：15488533
> 
> 赞同：1
> 
> 时间：2013-03-18T22:56:27.457
> 
> 标签：asp.net, sql, iis, deployment, connection-string

部署后，我的 ASP.NET 应用程序出现问题。一切在调试模式下运行良好，但是在部署后任何尝试连接到数据库的页面都会出现此错误：

用户 '' 登录失败。

我的 SQLConnection 字符串是：

```
sdb.ConnectionString = "Data Source=< SQLServerAddress >;Initial Catalog=sdb;"; 
```

本来我有

```
Integrated Security=true; 
```

附加到我的连接字符串，但是这导致了类似的错误消息：

> “用户 '< 域 >\< 计算机名 >$' 登录失败。”

我是 IIS 新手，但已按照指南进行设置。我的网站正在使用 DefaultAppPool ，其身份设置为 NetworkService （尽管我已经尝试过 ApplicationPoolIdentity 并且它似乎没有任何改变。）

我还在 SQL 服务器中为我的数据库添加了 NT AUTHORITY\NETWORK SERVICE 帐户作为 db_owner 权限。

在身份验证设置下，我将匿名身份验证用户身份设置为“应用程序池身份”。

我已将 C:\inetpub\wwwroot 文件夹的权限授予 NETWORK SERVICE，但这似乎也无济于事。

我真的不知道还能尝试什么。我可以看到问题一定出在权限或身份上，因为在 Visual Studio 调试中一切正常，但我不确定问题出在部署后。这是我的第一个 IIS 部署，用于我在大学的本科计算机科学项目的一个项目。我一直在谷歌搜索一天的大部分时间并尝试了许多适用的建议，但不幸的是似乎没有任何效果，而且我有点不确定现在要搜索什么来寻找解决方案。

我不确定它是否重要，但我从代码隐藏连接到我的数据库，连接代码以及我如何使用它如下：

```
SqlDataSource sdb = new SqlDataSource();
sdb.ConnectionString = "Data Source=< SQLServerAddress >;Initial Catalog=sdb;";
sdb.SelectCommand = "SELECT someAttribute, someOtherAtt FROM SomeTable";
dropDownList.DataSource = sdb;
dropDownList.DataTextField = "someAttribute";
dropDownList.DataValueField = "someOtherAtt"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:03:10.710

您应该为您的应用程序创建一个特定的服务帐户，一个您知道密码和用户名并且仅用于此应用程序的 AD 帐户，然后将 SQL Server 配置为允许此 AD 帐户的连接并授予适当的权限，尝试仅授予您的应用程序正确运行所需的最低权限集。

然后您回到部署应用程序的 Web 服务器并创建一个应用程序池，该池运行模拟您刚刚创建的 AD 服务帐户，最后设置您的网站/Web 应用程序以使用该应用程序池运行。

这是诀窍，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:06:50.427

使用此链接创建 sql server 用户并在 webconfig 中的连接字符串上添加用户名和密码。

[创建 SQL Server 登录](http://msdn.microsoft.com/en-in/library/aa337562%28v=sql.100%29.aspx)

在 webconfig 文件中添加连接字符串，如下所示

```
<connectionStrings>
<add name="myConnectionString" connectionString="server=SQLServerAddress;database=sdb;uid=myUser;password=myPass;" />
</connectionStrings> 
```

# php - PHP传递参数以实现奇怪的行为

> ID：15488535
> 
> 赞同：2
> 
> 时间：2013-03-18T22:56:31.933
> 
> 标签：php, linux, apache, post

我有这个功能`Utils.php`

```
function GenerateMonthlyReport($connection, $month, $year, $objSheet)
 {     
     $months = array("Enero", "Febero", "Marzo", "Abril", "Mayo", "Junio" ,"Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre");       
     $fromDate = $year . "-" . $month . "-01";
     $toDate = "";

   if ($month != 12)
    $toDate = $year . "-" . ($month+1) . "-01";
  else
   $toDate = ($year+1) . "-01-01";

 etc..
} 
```

然后在另一个文件中我使用这样的参数`createReport.php`调用这个函数`$_POST`

```
 include "Utils.php";
 include "Connect.php";
 require_once('PHPExcel/Classes/PHPExcel.php');

 checkLogin();

 // Connect to Db
 $connection = openDb(); 

 // Input Data
 $month =  mysqli_real_escape_string($connection, $_POST["month"]);
 $year =  mysqli_real_escape_string($connection, $_POST["year"]);

 $objPHPExcel = CreateEmptyWorkbook();
 $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, "Excel2007"); // create the writer
 $objSheet = $objPHPExcel->getActiveSheet();

 GenerateMonthlyReport($connection, $month, $year, $objSheet); 
```

问题：我传递给函数 GenerateMonthlyReport`$year`的参数在函数内部。`$month``null`

但如果我做这样的事情：

```
 GenerateMonthlyReport($connection, "3", "2013", $objSheet); 
```

它们被正确传递。

如果我回显`$year`和`$month`变量，它们会显示值！

**另外：这种奇怪的行为只发生在我从移动设备提交表单时。PC 浏览器不会发生这种情况。**

编辑：这是表单 HTML 代码：

```
 <form id="reportForm" action="/service/createMonthlyReport.php"  method="post">
   <table border="1">
   <tr>
   <td>
     Seleccione Per&iacute;odo
   </td>
   <td>
      <label>Mes</label><br/>
       <select id="monthM" name="month" > 
             <?php for ($i=1; $i<=12; $i++) :?>
               <option value="<?php echo $i; ?>"   <?php echo date("n") != $i ? "" : "selected" ?>>
                 <?php echo $monthName = date("M", mktime(0, 0, 0, $i, 10)); ?>
               </option>          
             <?php endfor; ?>
            </select>
            </td>

        <td>
        <label>Anio</label><br/>
            <select id="yearM" name="year" > 
             <?php for ($i=-5; $i<=5; $i++) :?>
                 <?php $yearData = (date("Y") + $i); ?>
               <option value="<?php echo $yearData; ?>"  <?php echo date("Y") != $yearData ? "" : "selected" ?>>
                 <?php echo $yearData; ?>
               </option>
             <?php endfor; ?>
            </select>                   
        </td>
        <td>    

            <input type="submit" value="Descargar Reporte Mensual" id="submitBtn" class="crearBtn" />
            </td>
    </tr>
    </table>
   </form> 
```

开放数据库代码：

```
function openDb() {
 $sever = "myserver";
 $database_name = "dbname";
 $user = "user";
 $pass = "mypass";

 $connection = new mysqli($server, $user, $pass, $database_name) or die("DB connection failed!");;
 $connection->set_charset("utf8");
 mysqli_query($connection, 'SET NAMES utf8');
 mysqli_query($connection, 'SET CHARACTER SET utf8');

 return $connection;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:31:09.903

您的 DB 编码是 UTF-8，但您可以通过使用 HTML 实体（如`&iacute;`. 我想知道 UTF-8 工作流程中的某些 ISO 8859-1 是否会破坏 PHP 或其扩展之一。确保您有正确`header()`的 UTF-8，并且所有内容（例如，隐藏的表单变量）都是正确的 UTF-8 编码的。

无论如何，一个`null`不应该出现的变量（在你的情况下是两个）可能是错误引用计数的结果。引用是一种底层机制，当一个变量的值被分配给另一个变量时，它不会被复制，但是两个变量都指向同一个值，它的引用计数为 2（或更多）。例如，如果引用计数在赋值时不增加，但在变量超出范围时减少，则它可能会在应该为 1 时变为 0，并且该值被错误地释放。

我想我已经看到了一个引用计数错误。它可能在数据库扩展中（可能是`sybase`扩展，但我不确定）。如果是这样，它可能在一个`*_fetch_*()`函数中。

尝试取出您的代码片段。尝试忽略数据库调用（包括`checkLogin()`，我猜），和/或`PHPExcel`部分，和/或其他，然后再进入有问题的函数（`GenerateMonthlyReport()`）。

检查您的代码中是否有 PHP 引用 ( `&`)。如果是这样，请尝试不使用它们（它们本身还不错，但是在低级别上很复杂，它们更有可能触发上述类型的错误）。

为了排除名称冲突，还请尝试以下操作：重命名`year`and `month`to `year0`and `month0`in the form and in `$_POST`, `$year`and `$month`to `$year1`and `$month1`in main, and `$year`and `$month`to `$year2`and `$month2`in `GenerateMonthlyReport()`。

# php - JSON PHP 数组到 Javascript

> ID：15488538
> 
> 赞同：5
> 
> 时间：2013-03-18T22:56:44.787
> 
> 标签：php, javascript, json

是否可以通过 json_encode 对这个 php 数组进行 JSON 处理？因为这个 php 数组被调用`$data`并且当我这样做时..

```
var myJson = <?php echo json_encode($data) ?>;
console.log(myJson); 
```

在javascript中，它给了我错误。我想知道 JSON 可以/不能做什么类型的 php 数组是否有限制。

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Tanner, C. kickoff 60 yards to the DU5, Butler, L return 14 yards to the DU19 (Johnson, I.).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => GT35
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => K
                        )

                    [drive] => 1
                )

        )

    [1] => Array
        (
            [0] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Renfree, S pass complete to Vernon, C for 6 yards to the DU25 (Thomas, Je.).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU19
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => DU
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => P
                        )

                    [drive] => 2
                )

            [1] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Renfree, S pass incomplete to Scott, D.
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU25
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => DU
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 4
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => P
                        )

                    [drive] => 2
                )

            [2] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Renfree, S pass complete to Scott, D for 6 yards to the DU31, 1ST DOWN DU (Thomas, Je.).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU25
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => DU
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 4
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => P
                        )

                    [drive] => 2
                )

            [3] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Renfree, S pass complete to Scott, D for no gain to the DU31 (Sweeting, R.).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU31
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => DU
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => P
                        )

                    [drive] => 2
                )

            [4] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Renfree, S pass incomplete to Vernon, C.
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU31
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => DU
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => P
                        )

                    [drive] => 2
                )

            [5] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Renfree, S sacked for loss of 4 yards to the DU27 (Gotsis, A.).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU31
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => DU
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => P
                        )

                    [drive] => 2
                )

            [6] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Monday, W punt 53 yards to the GT20, Golden, J. return 8 yards to the GT28 (Reeves, D).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU27
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => DU
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 14
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => U
                        )

                    [drive] => 2
                )

        )

    [2] => Array
        (
            [0] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Smith, O. rush for 8 yards to the GT36 (Brown, Ky).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => GT28
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [1] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Sims, D. rush for 6 yards to the GT42, 1ST DOWN GT (Sink, N).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => GT36
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 2
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [2] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Washington, T. pass incomplete to Smith, O..
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => GT42
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => P
                        )

                    [drive] => 3
                )

            [3] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Washington, T. rush for 2 yards to the GT44 (Anunike, K).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => GT42
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [4] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Greene, J. rush for 6 yards to the 50 yardline (Canty, W).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => GT44
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 8
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [5] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Smith, O. rush for 16 yards to the DU34, 1ST DOWN GT (Canty, W;France, C).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => GT50
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 2
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [6] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Smith, O. rush for 5 yards to the DU29 (France, C).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU34
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [7] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Laskey, Z. rush for 3 yards to the DU26 (France, C).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU29
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 5
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [8] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Washington, T. rush for 3 yards to the DU23, 1ST DOWN GT (France, C).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU26
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 2
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [9] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Washington, T. pass complete to Smith, O. for 21 yards to the DU2, 1ST DOWN GT (Butler, L).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU23
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 10
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => P
                        )

                    [drive] => 3
                )

            [10] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Washington, T. rush for 1 yard to the DU1 (Brown, Ky;Foxx, J).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU02
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 0
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [11] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Washington, T. rush for no gain to the DU1 (Cockrell, R).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU01
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 0
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [12] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Washington, T. rush for 1 yard to the DU0, TOUCHDOWN, clock 06:51.
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU01
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 0
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => R
                        )

                    [drive] => 3
                )

            [13] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Tanner, C. kick attempt good.
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => DU03
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 0
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => X
                        )

                    [drive] => 3
                )

            [14] => Array
                (
                    [text] => SimpleXMLElement Object
                        (
                            [0] => Tanner, C. kickoff 54 yards to the DU11, Butler, L return 23 yards to the DU34 (Harrell, A.).
                        )

                    [spot] => SimpleXMLElement Object
                        (
                            [0] => GT35
                        )

                    [ball] => SimpleXMLElement Object
                        (
                            [0] => GT
                        )

                    [togo] => SimpleXMLElement Object
                        (
                            [0] => 0
                        )

                    [type] => SimpleXMLElement Object
                        (
                            [0] => K
                        )

                    [drive] => 3
                )

        )
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T23:10:29.027

首先，您需要在某个安装了 PHP 的 Apache 服务器上的 PHP 文件。制作一个像这样的文件：

**`localhost:8888/myfile.php`**

```
<?php
    $arr = array ('a'=>1,'b'=>2,'c'=>3,'d'=>4,'e'=>5);

    echo json_encode($arr); // {"a":1,"b":2,"c":3,"d":4,"e":5}
?> 
```

然后你的 JavaScript（在这个例子中我使用[jQuery](http://jquery.com)）：

```
$.getJSON('http://localhost:8888/myfile.php', function(data) {
    console.log(data);
}); 
```

这应该是让 PHP 数组进入 JavaScript 的开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T23:12:39.117

正如@Allendar 所说，您不能将 PHP 嵌入到 JS 文件中。但是，您可以在 JS 文件中添加一个函数来加载 JSON 数据，然后将该数据嵌入到 PHP 文件的脚本标记中。

例子.js：

```
var loadJsonFromPHP = function(json) {
    console.log(json);
} 
```

例子.php：

```
<?php
    $data = array("some", "test", "data");
?>
<html>
    <head>
        <script src="example.js"></script>
        <script>
            loadJsonFromPHP(<?php echo json_encode($data) ?>);
        </script>
    </head>
    <body></body>
</html> 
```

编辑：这是假设您只需要在页面加载时将数据导入 JS 一次，在这种情况下，您可以跳过发出 AJAX 请求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-10T06:51:34.830

**将 PHP JSON 传递给 Javascript 并读取**

`var stuff = <?php print json_encode($datajson); ?>; var arr = new Array(); arr= JSON.parse(stuff); document.write( arr[0].cust_code );`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T23:00:16.523

我从未尝试过这样做，但我认为您遇到了问题，因为 json_encode 返回一个 json 编码的字符串。然后，您需要在 javascript 方面解码此字符串。尝试以下操作：

```
var myJson = JSON.parse(<?php echo json_encode($data) ?>);
console.log(myJson); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-18T22:59:26.107

JSON 可以处理任何类型的数组（尽管它将关联数组转换为对象）。您可能面临的问题是，当数据仅在 Javascript 上可用时，您尝试使用 PHP 进行输出。

澄清一下：一旦页面加载完毕，PHP 什么也做不了。只有javascript可以在客户端处理事情，PHP只在服务器上工作，不知道客户端的状态。

# c# - 使用 XML 命名空间针对 C# 中的模式创建和验证 XML

> ID：15488539
> 
> 赞同：2
> 
> 时间：2013-03-18T22:56:52.913
> 
> 标签：c#, .net, xml, xsd, xml-namespaces

我试图弄清楚如何根据 C# 中的模式验证 XML。如果 XML 很简单并且不使用命名空间元素，那么一切似乎都很好。但是，如果它使用 XML 命名空间，我就会开始遇到问题。

我要生成的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<SlideDeck xmlns:xy="http://something.com" xy:type="SlideDefinitions">
  <Slide>...</Slide>
  <Slide>...</Slide>
  ...
</SlideDeck> 
```

我可以在 C# 中使用相当于：

```
XmlDocument xDoc = new XmlDocument();
XmlElement xSlideDeck = xDoc.CreateElement("SlideDeck");
xDoc.AppendChild(xSlideDeck);

xSlideDeck.SetAttribute("xmlns:xy", "http://something.com");
xSlideDeck.SetAttribute("type", "http://something.com", "SlideDefinitions"); 
```

我可以尝试用这个来验证生成的 XML 文档：

```
xDoc.Schemas.Add("", "Schema.xsd");
xDoc.Validate(Handler); 
```

要验证的 Schema.xsd 文件现在非常简单：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="SlideDeck">
        <xs:complexType>
            <xs:sequence>
                <xs:choice maxOccurs="unbounded">
                    <xs:element ref="Slide"/>
                </xs:choice>
            </xs:sequence>
            <xs:attribute name="type" type="xs:string" use="required" />
        </xs:complexType>
    </xs:element>
    ... Slide Defined Here ...
</xs:schema> 
```

运行验证时，出现以下错误：

```
The 'http://something.com:type' attribute is not declared.
The required attribute 'type' is missing. 
```

我还尝试向 XmlDocument 添加一个额外的架构，该架构使用相同的架构文件引用[http://something.com](http://something.com)（希望它会将其拉入“xy”命名空间）。我也尝试只向正确的 uri 添加一个模式（省略没有 uri 的模式），但根据其他设置，没有任何验证。我已经尝试使根“SlideDeck”元素也属于[http://something.com](http://something.com)命名空间。

知道这里可能会发生什么吗？我根本无法改变 XML 文档的格式。我可以制作以“xy”为前缀的“SlideDeck”元素以及所有其他元素，但我不想修改所有代码以另外将 uri 添加到命名空间和前缀来实现这一点。最大的症结在于 xmlns:xy 定义和 xy:type 属性，它们会提醒接收者会发生什么。其他变化是合理的。我还可以控制程序验证的 XSD，如果让它创建和验证最好通过那里的更改来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:34:39.317

您的架构说该`SlideDeck`元素必须具有一个`type`属性 - 都在 null 命名空间中，而在您的 XML 中，`SlideDeck`元素`type`在`http://something.com`命名空间中有一个属性 - 因此出现错误。

您应该将 XML 更改为：

```
<SlideDeck type="SlideDefinitions">
  <Slide>. . . </Slide>
  <Slide>. . . </Slide>
  . . . 
</SlideDeck> 
```

（即摆脱命名空间）。

或者，您必须更改架构，将其分为两部分：

**typeAttr.xsd：**

```
<xs:schema 
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns:xy="http://something.com" 
  xmlns="http://something.com"
  targetNamespace="http://something.com"
  elementFormDefault="qualified"
  attributeFormDefault="qualified" >

  <xs:attribute name="type" type="xs:string" />

</xs:schema> 
```

**幻灯片.xsd：**

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified" xmlns:xy="http://something.com">
  <xs:import namespace="http://something.com" schemaLocation="typeAttr.xsd"/>
  <xs:element name="SlideDeck">
    <xs:complexType>
      <xs:sequence>
        <xs:choice maxOccurs="unbounded">
          <xs:element ref="Slide"/>
        </xs:choice>
      </xs:sequence>
      <xs:attribute ref="xy:type" use="required" />
    </xs:complexType>
  </xs:element>
  <xs:element name="Slide"></xs:element>
</xs:schema> 
```

（在同一目录中）。

通过这种方式，您可以`type`在其单独的名称空间中定义属性，并且原始 XML 会正确验证。

# objective-c - 为什么我在界面生成器中的标签拒绝连接到我的代码？

> ID：15488547
> 
> 赞同：0
> 
> 时间：2013-03-18T22:57:56.657
> 
> 标签：objective-c, ios6, storyboard, iboutlet

图片：http: [//i.stack.imgur.com/8FgLp.png](http://i.stack.imgur.com/8FgLp.png)

原型单元格属于“ArticleCell”类，但它不允许我将标签连接到它。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:03:57.170

在视图控制器的类中不能有标签的出口，你只能在 UITableViewCell 的子类中这样做。在 ViewController 类中使用插座是行不通的，因为如果您有一个人口众多的表，该标签可能存在 1000 次。要么你需要让它成为一个静态单元格（在这种情况下标签只存在一次，你可以给它一个出口），或者你应该使用 viewWithTag 属性访问（即在界面构建器中设置它的标签，然后访问它稍后在代码中）。

# regex - 迭代列表中的项目时，tcl 获得正则表达式匹配

> ID：15488550
> 
> 赞同：2
> 
> 时间：2013-03-18T22:58:04.907
> 
> 标签：regex, list, tcl, match

我是一个新手，我在让我的 tcl 脚本工作时遇到了一些麻烦。我在网上搜索过，似乎无法理解我做错了什么。这是我写的：

```
set list {f01-1 f01-2 f02-1 m01-1 m01-2 m02-1}
foreach item $list {
    if { [regexp {\w\d\d} $list match ] } {
        puts $match
    }
} 
```

这是我得到的输出：

```
f01
f01
f01
f01
f01
f01 
```

但是，这是我想要并期望得到的：

```
f01
f01
f02
m01
m01
f02 
```

有没有人有任何建议来获得我的期望？

提前谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:05:11.277

您的代码片段似乎与您的实际代码不匹配，但我猜测与`$string`有相同的东西`$list`，这意味着您重复地在原始字符串上重新运行正则表达式，而不是在每个项目上。此外，您的正则表达式是错误的。以下应该有效：

```
set list {f01-1 f01-2 f02-1 m01-1 m01-2 m02-1}
foreach item $list {
    if { [regexp {\w\d+} $item match ] } {
        puts $match
    }
} 
```

除了修复您的正则表达式之外，这里的显着区别是它现在运行它 on`$item`而不是 on `$list`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:24:51.613

**[regexp {\w\d\d} $list match]**将尝试在给定的**list**中查找指定 RE 的第一次出现。

相反，您应该这样做：

**[regexp {\w\d\d} $item match ]**它将检查每个**项目**并打印 RE 是否匹配！

# assembly - 16 位 MUL 组件

> ID：15488557
> 
> 赞同：-1
> 
> 时间：2013-03-18T22:58:50.683
> 
> 标签：assembly, x86, 16-bit

在 x86 16 位程序集上，如果有`1`in`ax`和`0x10`( `16`) in `cl`，则以下代码不会`0x1000`放入`cl`：

```
mul cl  ; ax = 0x  10
mul cl  ; ax = 0x 100
mul cl  ; ax = 0x0000 (not 0x1000) 
```

为什么这段代码没有按预期工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T23:01:25.830

您的源是 8 位 ( `cl`)，因此仅执行乘法运算`al`。

**改为使用`mul cx`。**

**Explanation:** If `ax = 100h`, then `al = 00h`. Since the result of `mul cl` is placed in `ax`, what you do is basically to replace the content of `ax` with `00h*cl`, which is `00h`.

> Opcode MUL
> 
> CPU: i8086+ Type of Instruction: User
> 
> Affected FLags: CF, OF, AF, PF, SF, ZF
> 
> Instruction: MUL src
> 
> 注意：累加器与源的无符号乘法。**如果“src”是字节值，则 AL 用作另一个被乘数，结果放在 AX 中。**如果 "src" 是一个字值，则 AX 乘以 "src" 并且 DX:AX 接收结果。如果 "src" 是一个双字值，则 EAX 乘以 "src" 并且 EDX:EAX 接收结果。386+ 使用早期输出算法，这使得在 EAX 中乘以任何大小的值在 8 位或 16 位寄存器中的速度一样快。
> 
> ++++++++++++++++++++++++++++++++++++++++
> 时钟（i486）：MUL reg8 13-18 MUL reg16 13-26 MUL reg32 13-42 MUL mem8 13-18 MUL mem16 13-26 MUL mem32 13-42

# node.js - 获取post的payload

> ID：15488558
> 
> 赞同：3
> 
> 时间：2013-03-18T22:58:57.877
> 
> 标签：node.js, jquery

我使用 jQuery 将一些数据 ajax 发布到 nodejs 网络服务器。

网络服务器代码接收到帖子，但我不知道如何检索有效负载，并且 nodejs 文档网络非常糟糕。我尝试将请求对象转储到调试器控制台，但我看不到那里的数据。如何访问帖子的有效负载？

文档说请求对象是一个实例，`http.IncomingMessage`并公开了一个`data`带有签名的事件，`function (chunk) { }`其中块是一个字符串或一个`Buffer`，但如果你不知道你应该在哪里或如何连接到这个事件，或者如何使用缓冲区那么这不是很有帮助。

* * *

我注意到在“社区”而不是“文档”链接下隐藏了第二个更具叙述性的手册。这很好。目前不可用。这不是很好。

* * *

有人问我是使用框架还是尝试“原生”。无知使我无法直接回答，所以这里是代码

```
var http = require('http');
var fs = require('fs');
var sys = require('sys');
var formidable = require('formidable');
var util = require('util');
var URL = require('url');

var mimeMap = { htm : "text/html", css : "text/css", json : "application/json" };

var editTemplate = fs.readFileSync("edit.htm").toString();

http.createServer(function (request, response) {

  request.addListener('data', function(chunk){
    console.log('got a chunk');
  });

  var body, token, value, mimeType;
  var path = URL.parse(request.url).pathname;

  console.log(request.method + " " + path);

  switch (path) {
    case "/getsettings":
      try {
        mimeType = "application/json";
        body = fs.readFileSync("/dummy.json");
      } catch(exception) {
        console.log(exception.text);
        body = exception;
      }
      //console.log(body.toString());
      break;  
    case "/setsettings":
      console.log(request); //dump to debug console
      //PROCESS POST HERE
      body = ""; //empty response
      break;  
    case "/": 
      path = "/default.htm";
      mimeType = "text/html";
    default:
      try { 
        mimeType = mimeMap[path.substring(path.lastIndexOf('.') + 1)];
        if (mimeType) {
         body = fs.readFileSync(path);
        } else {
          mimeType = "text/html";
          body = "<h1>Error</h1><body>Could not resolve mime type from file extension</body>";
        }
      } catch (exception) {
        mimeType = "text/html";
        body = "<h1>404 - not found</h1>";
      }
      break;
  }
  response.writeHead(200, {'Content-Type': mimeType});
  response.writeHead(200, {'Cache-Control': 'no-cache'});
  response.writeHead(200, {'Pragma': 'no-cache'});
  response.end(body);  
}).listen(8124);

console.log('Server running at http://127.0.0.1:8124/'); 
```

* * *

现在我添加了这个

```
request.addListener('data', function(chunk){
  console.log('got a chunk');
}); 
```

到 createServer 成功函数的开始。它似乎像这样工作，我想这意味着在听众之前调用了成功函数。如果这*不是*正确的绑定位置，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:16:18.963

在“//PROCESS POST HERE”处添加一个`req.pipe(process.stdout);`它会将发布数据输出到控制台。

您还可以将其通过管道传输到文件`req.pipe(fs.createWriteStream(MYFILE))`，甚至返回到浏览器`req.pipe(res);`

在此处查看示例：[http ://runnable.com/nodejs/UTlPMl-f2W1TAABS](http://runnable.com/nodejs/UTlPMl-f2W1TAABS)

您还可以将自己的处理程序添加到事件、数据、错误和结束

```
var body = '';

request.addListener('data', function(chunk){
  console.log('got a chunk');
  body += chunk;
});

request.addListener('error', function(error){
  console.error('got a error', error);
  next(err);
});

request.addListener('end', function(chunk){
  console.log('ended');
  if (chunk) {
    body += chunk;
  }
  console.log('full body', body);
  res.end('I have your data, thanks');
}); 
```

哦，至于“本机或模块”问题，您可以使用像 express 这样的模块，它会为您解析正文，并用结果填充 req.body（跳过 addListener 的痛苦，甚至为您解析 formdata 或 json）。见[http://expressjs.com/api.html#req.body](http://expressjs.com/api.html#req.body)

# c# - 我的元数据在哪里？

> ID：15488559
> 
> 赞同：0
> 
> 时间：2013-03-18T22:59:09.137
> 
> 标签：c#, wcf, iis

所以我有一个奇怪的问题。

当您尝试让网络项目搜索服务时，我收到以下错误：

> 尝试在以下位置查找服务时发生错误（详细信息）： `http://localhost:2927/WebSite/SiteHandler.svc`。未指定的错误（HRESULT 异常：0x800004005(E_FAIL)）

现在这个错误的奇怪之处在于，如果项目位于本地驱动器上，它就会消失。它找到`Metadata`并工作。

但是当项目驻留在闪存驱动器上时，会出现上述错误。所以我做了以下事情：

*   配置的应用程序池和站点
*   授予 Internet 信息系统对闪存驱动器文件夹位置的访问权限

哪个没有解决错误。我认为这是由于 IIS 无法访问闪存驱动器。所以我想我的问题是，这是 IIS 的常见问题吗？它不能调试闪存驱动器吗？

或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:14:19.520

问题可能是 IIS 站点的根目录未更改为闪存驱动器，因此该文件在 IIS 的“雷达”上不存在。尝试进入 IIS 中的网站设置并将目录更改为您的闪存驱动器目录。

# mysql - MySQL索引扫描排序不起作用

> ID：15488564
> 
> 赞同：1
> 
> 时间：2013-03-18T22:59:33.803
> 
> 标签：mysql, optimization, innodb

我正在阅读Schwartz、Zaitsev 和 Tkachenko 的*《高性能 MySQL：优化、备份和复制*》（第 3 版，Oreilly）。到目前为止，这是一本很棒的书。[但是，我在第 183 页的第 5 章](http://books.google.com/books?id=IagfgRiKWd4C&lpg=PA183&ots=wYf3o0SwDm&dq=%22WHERE%20rental_date%20%3E%20%272005-05-25%27%20ORDER%20BY%20rental_date,%20inventory_id;%22&pg=PA183#v=onepage&q=%22WHERE%20rental_date%20%3E%20%272005-05-25%27%20ORDER%20BY%20rental_date,%20inventory_id;%22&f=false)中遇到了不一致的情况（很抱歉链接太长。Google 图书不会给我更好的链接）。使用[Sakila 示例数据库](http://dev.mysql.com/doc/sakila/en/index.html)中的“出租”表，我们执行了几个 SELECT 查询，这些查询应该使用索引来扫描和排序结果。在我的 MySQL 5.5 服务器上，当我运行 Google Books 上突出显示的查询时，它似乎没有像预期的那样使用 rent_date 索引。

这是书中的错误，MySQL版本之间的差异等吗？

相关表结构：

```
CREATE TABLE rental (
  `rental_id` int(11) NOT NULL AUTO_INCREMENT,
  `rental_date` datetime NOT NULL,
  `inventory_id` mediumint(8) unsigned NOT NULL,
  `customer_id` smallint(5) unsigned NOT NULL,
  ...
  PRIMARY KEY (rental_id),
  UNIQUE KEY rental_date (rental_date,inventory_id,customer_id),
  ...
) ENGINE=InnoDB; 
```

有问题的查询，加上我得到的结果：

```
> EXPLAIN SELECT rental_id, staff_id FROM sakila.rental WHERE rental_date > '2005-05-25' ORDER BY rental_date, inventory_id\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: rental
         type: ALL
possible_keys: rental_date
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 16338
        Extra: Using where; Using filesort
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:19:02.117

这可能是由于版本之间优化器的微小差异造成的。MySQL 已经确定进行全表扫描*可能*比从索引中读取大量行更快。任何超过大约 10% 的行通常都会触发该行为。

见：[http ://www.mysqlperformanceblog.com/2012/11/23/full-table-scan-vs-full-index-scan-performance/](http://www.mysqlperformanceblog.com/2012/11/23/full-table-scan-vs-full-index-scan-performance/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:37:15.663

这是因为您使用的是 InnoDB。更改引擎以使用 MyISAM。 `alter table rental engine=myisam;`.

# java - jetty websockets 发送二进制数据（图片）

> ID：15488573
> 
> 赞同：5
> 
> 时间：2013-03-18T23:00:19.800
> 
> 标签：java, javascript, websocket, jetty, binary-data

我正在尝试使用 Jetty 8.1.2 WebSockets 将一些二进制数据（图像）发送到 javascript 客户端。

websockets java代码：

```
BufferedImage image = getTheImage();

ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(image, "jpg", baos);
baos.flush();
byte[] imageInBytes = baos.toByteArray();
baos.close();

socket.getConnection().sendMessage(imageInBytes, 0, imageInBytes.length); 
```

javascript代码：

```
binarySocket.onmessage = function(event) {
if (event.data instanceof ArrayBuffer) {
    var bytearray = new Uint8Array(event.data);

    var tempcanvas = document.createElement('canvas');
    tempcanvas.height = imageheight;
    tempcanvas.width = imagewidth;
    var tempcontext = tempcanvas.getContext('2d');

    var imgdata = tempcontext.getImageData(0, 0, imagewidth,imageheight);
    var imgdatalen = imgdata.data.length;

    for ( var i = 8; i < imgdatalen; i++) {
        imgdata.data[i] = bytearray[i];
    }

    tempcontext.putImageData(imgdata, 0, 0);

    var img = document.createElement('img');
    img.height = imageheight;
    img.width = imagewidth;
    img.src = tempcanvas.toDataURL();
    chatdiv = document.getElementById('chatdiv');
    chatdiv.appendChild(img);
    chatdiv.innerHTML = chatdiv.innerHTML + "<br />";
} 
```

};

如果我将图像写在磁盘上，代码很好，但如果我尝试在 HTML 页面上显示图像，我会得到一些随机的彩色图像。我可能以错误的方式编码图像。

知道如何将图像作为二进制数据发送并用 javascript 显示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T21:09:48.143

你说的对。问题是图像编码。

代替：

```
img.src = tempcanvas.toDataURL(); 
```

至

```
img.src = tempcanvas.toDataURL("image/jpeg"); 
```

默认格式为 PNG。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T13:50:14.590

在我看来这是错误的：

```
for ( var i = 8; i < imgdatalen; i++) {
    imgdata.data[i] = bytearray[i];
} 
```

您不能只将**bytearray**中的数据放在**imgdata.data**中，因为在您的情况下 bytearray 已编码（jpeg）。毫不奇怪，您在某些画布上获得了随机像素（我猜是在画布的上侧）。您需要将字节数组编码为[数据 url](http://en.wikipedia.org/wiki/Data_URI_scheme)，并将其设置为图像的 src。不需要画布。

# asp.net - 如何使用 ASP.NET MVC Web API OData 链接到 Razor 中的 OData 集合

> ID：15488574
> 
> 赞同：6
> 
> 时间：2013-03-18T23:00:24.160
> 
> 标签：asp.net, razor, asp.net-web-api, odata

我有一个 ASP.NET MVC 4 应用程序，我正在将 OData API 合并到其中。这是运行具有更大 OData 支持的 2012.2 的东西。

我没有为此使用单独的区域……这可能是一个错误，但我的应用程序很小，而且区域似乎过大了。

我的控制器设置正确，我的 Segments 集合的示例路径（segments 是我域中的一种类型）是“/odata/Segments”。这按预期加载并且正在工作。

在我的主页上，我正在尝试使用 Razor 的 Html.ActionLink（或 RouteLink）添加指向此资源的链接，但似乎 OData 控制器布局不适用于这些方法，因为控制器在注册时以“odata”为前缀WebAPI 配置：

```
config.Routes.MapODataRoute("OData Route", "odata", model ); 
```

当肯定没有（据我所知）这样的东西时，我可以通过假装有一个 odata 控制器来欺骗构造正确 url 的方法：

```
@Html.RouteLink("Segments", "Segments", "odata") 
```

但这似乎是一个黑客行为。

我不太了解 ASP.NET 路由管道，无法理解传递给 MapODataRoute 的前缀是如何合并到 MVC 链中的，这样我就可以以“正确”的方式使用“正确的”剃须刀方法。

只是为了好玩，这是我的 SegmentsController：

```
public class SegmentsController : EntitySetController<Segment, long>
{

    private MarketerDB db = new MarketerDB();

    // GET api/segments
    override public IQueryable<Segment> Get()
    {
        return db.Segments.AsQueryable();
    }

    protected override Segment GetEntityByKey(long key)
    {
        return db.Segments.Find(key);
    }

    public IQueryable<Affiliate> GetAffiliates([FromODataUri] long key)
    {
        return this.GetEntityByKey(key).Affiliates.AsQueryable();
    }

    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T02:25:03.300

我们有一个[ODataLink](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Http.OData/ODataUrlHelperExtensions.cs)方法，`System.Web.Http.UrlHelper`但我们忘记向 MVC 添加一个`System.Web.Mvc.UrlHelper`。直到我们添加它，你可以使用这个扩展方法，

```
namespace System.Web.Mvc
{
    public static class UrlHelperExtensions
    {
        private static IODataPathHandler _pathHandler = new DefaultODataPathHandler();

        public static string ODataUrl(this UrlHelper urlHelper, string routeName, params ODataPathSegment[] segments)
        {
            string odataPath = _pathHandler.Link(new ODataPath(segments));
            return urlHelper.HttpRouteUrl(
                routeName,
                new RouteValueDictionary() { { ODataRouteConstants.ODataPath, odataPath } });
        }
    }
} 
```

并通过执行以下操作从您的剃刀视图中调用它（假设有一个实体集客户并且您希望将导航链接放在客户订单上（42）），

```
@Url.ODataUrl("odata", new EntitySetPathSegment("customers"), new KeyValuePathSegment("42"), new NavigationPathSegment("orders")) 
```

确保您`@using System.Web.Http.OData.Routing`的剃刀视图中有一个指令。

# c# - 可与 switch() 一起使用的自定义结构/类型

> ID：15488575
> 
> 赞同：9
> 
> 时间：2013-03-18T23:00:31.077
> 
> 标签：c#, switch-statement, value-type, object-model

我的一个项目有一个值类型/结构，它表示视频格式的自定义标识符字符串。在这种情况下，它将包含一个内容类型字符串，但这可能会有所不同。

我使用了一个结构，因此它在传递时可以是强类型，并对初始字符串值执行一些完整性检查。实际的字符串值可以是任何东西，并且由外部插件库提供，因此`enum`不适用数字。

```
public struct VideoFormat {
    private string contentType;

    public VideoFormat(string contentType) {
        this.contentType = contentType;
    }

    public string ContentType {
        get { return this.contentType; }
    }

    public override string ToString() {
        return this.contentType;
    }

    // various static methods for implicit conversion to/from strings, and comparisons
} 
```

由于有一些非常常见的格式，我将它们公开为具有默认值的静态只读字段。

```
public static readonly VideoFormat Unknown = new VideoFormat(string.Empty);
public static readonly VideoFormat JPEG = new VideoFormat("image/jpeg");
public static readonly VideoFormat H264 = new VideoFormat("video/h264"); 
```

这似乎在大多数情况下都有效，除了一个开关块，它说值必须是一个常数。有什么方法可以直接在 switch 块中使用这种类型和静态值，而无需打开内部成员或`.ToString()`覆盖？

有没有更好的整体方法来做到这一点，而不使用`enum`用数值或纯字符串常量指定的设计时间？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T00:09:59.733

更新：由于 C# 7 中 switch 语句的新规则，此答案不再完全准确。有关详细信息，请参阅 C# 7 文档。

* * *

> 有什么办法可以直接在 switch 块中使用这种类型和静态值

否。 switch 语句的*控制类型*必须是 sbyte、byte、short、ushort、int、uint、long、ulong、char、bool、任何枚举、任何这些的可空值类型或字符串之一。并且 case 标签中使用的常量必须是与控制类型兼容的编译时常量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T23:08:46.790

*实际上，重构代码可能会更好，这样您根本*就不必使用`switch`语句。虽然构造本身不是反模式，但使用[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)代替是普遍接受的做法。[这](https://stackoverflow.com/questions/126409/ways-to-eliminate-switch-in-code)是另一个关于摆脱.*`switch`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T23:45:17.403

在我看来，您正在使用的所有可能的视频格式都可能是使用枚举的经典示例。当添加一些其他格式时，我真的认为用新值扩展您的枚举没有问题。是的，重要的是我们需要确保`VideoFormat`程序中使用的任何内容都适合枚举。但可能不会是劣势。*

# php - 我在表单上有一个复选框，如果 sql 中没有相应的数据，则不应检查该复选框

> ID：15488581
> 
> 赞同：0
> 
> 时间：2013-03-18T23:01:01.767
> 
> 标签：php, javascript, jquery, sql

我创建了一个变量来检查和回显特定患者的结果：

```
<?php 
$ex = sql::value("select 1 email from " . event_table('email_rules') . " where patient_id={$patient->hex}");
if ($ex == 1) {echo "Records";} else {echo "None";} 
?> 
```

我的 html 输入很简单，cbox 是复选框：

```
<tr><td>Email</td><td><?php cbox('email'); ?></td></tr> 
```

如果有人检查了邮箱但 sql 中没有电子邮件，那么我需要发出警报说没有关联的电子邮件。

我假设我可以使用 jquery 或 javascript 以简洁明了的方式完成此任务。我希望我很清楚我要完成的工作。帮助将不胜感激。谢谢你。

# c++ - c++ - 使用 boost 在稀疏矩阵中构建和访问值

> ID：15488588
> 
> 赞同：1
> 
> 时间：2013-03-18T23:01:27.450
> 
> 标签：c++, boost, sparse-matrix

我有一个程序正在读取以下格式的数据：

```
Row    Column    Value
1      1         4
1      3         5
2      1         6
... 
```

其中前两列指的是矩阵的索引，值列包含存储在矩阵中该（行、列）坐标处的值。

如果我要实际构建一个二维数组来表示矩阵，它会非常大，因为我的输入数据非常稀疏。相反，我想构建一个稀疏矩阵表示，它允许我查找对应于（行、列）对的值，如果不存在则返回 0。

似乎 boost 有办法做到这一点，但我找不到足够的文档来真正理解如何使用它。

我已经深入阅读了这些内容，但仍然不确定如何进行：

[http://www.guwi17.de/ublas/doc/html/ex__fill1_8cpp-source.html](http://www.guwi17.de/ublas/doc/html/ex__fill1_8cpp-source.html) [http://www.boost.org/doc/libs/1_39_0/libs/numeric/ublas/doc/matrix_sparse.htm](http://www.boost.org/doc/libs/1_39_0/libs/numeric/ublas/doc/matrix_sparse.htm)

我是一个 c++ 新手，所以不确定如何使用 boost 从我的输入数据创建一个稀疏矩阵（假设我已经读过它）。我也没有运气finidng如何使用boost稀疏矩阵实际返回与（行，列）对有关的值。任何人都可以指出一些基本的例子，或者解释我可以如何做到这一点？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T05:06:43.117

boost 中有几种稀疏矩阵实现：（`mapped_matrix`由关联容器支持，例如`std::map`）`compressed_matrix`和`coordinate_matrix`（由可调整大小的数组支持）。它们的用法都是一样的。

以下是压缩矩阵的一些基础知识：

```
#include <iostream>
#include <sstream>
#include <boost/numeric/ublas/matrix_sparse.hpp>

namespace ublas = boost::numeric::ublas;
int main()
{
    ublas::compressed_matrix<int> m(10, 10); // 10x10 compressed matrix

    // replace by ifstream in("filename") in real code
    std::istringstream in("1      1         4\n"
                          "1      3         5\n"
                          "2      1         6\n");

    // read from stream
    int val;
    for(size_t r,c; in >> r >> c >> val; )
        m(r,c) = val;

    // print out
    for(size_t i = 0; i < m.size1(); ++i)
    {
        for(size_t j = 0; j < m.size2(); ++j)
             std::cout << m(i,j) << ' ';
        std::cout << '\n';
    }

    // info on the storage
    std::cout << "Non-zeroes: " << m.nnz() << '\n'
              << "Allocated storage for " << m.nnz_capacity() << '\n';

} 
```

在线演示： http: [//liveworkspace.org/code/2iCZuF](http://liveworkspace.org/code/2iCZuF)

# c++ - 无法实例化抽象类但类不是抽象的

> ID：15488589
> 
> 赞同：2
> 
> 时间：2013-03-18T23:01:33.977
> 
> 标签：c++, abstract-class

我已经查过这个，我发现最接近的是[这个，](https://stackoverflow.com/questions/10093091/c-derived-class-is-abstract-error)除了我没有任何前向声明。我在子类中实现的基类中只有一个纯虚函数，如下所示：

**命令.h**

```
#ifndef _COMMAND_H_
#define _COMMAND_H_

#include <string>
#include "Stack.h"
#include "Number.h"

class Command
{
public:
    std::string cmdType;
    Command(void);
    Command (std::string cmdType);
    virtual void executeCommand(Stack<Number> & stack) = 0;
    ~Command (void);
};

#endif   // !defined _COMMAND_H_ 
```

**命令.cpp**

```
Command::Command(void)
    :cmdType("")
{}

Command::Command(std::string cmdType)
    :cmdType(cmdType)
{}

Command::~Command(void)
{} 
```

**编号.h**

```
#ifndef _NUMBER_H_
#define _NUMBER_H_

#include "Command.h"
#include "Stack.h"

class Number : public Command
{
public:
    Number (float num);
    void executeCommand(Stack<Number> & stack);
    float val;
    ~Number (void);
};

#endif   // !defined _NUMBER_H_ 
```

**数字.cpp**

```
#include "Number.h"

Number::Number(float num)
    :val(num)
{
    cmdType = "hi";
}

void Number::executeCommand(Stack<Number> & stack)
{
    stack.push((*this));
} 
```

***出现文件错误：***

```
Error   4   error C2259: 'Number' : cannot instantiate abstract class   c:\...\add.cpp  34 
```

**添加.cpp**

```
#include "Add.h"

Add::Add(void)
    :Binary("+")
{

}

Add::~Add(void)
{

}

void Add::executeCommand(Stack<Number> & numStack)
{
    Number num1 = numStack.top(); //THIS LINE HAS THE ERROR
    numStack.pop();
    Number num2 = numStack.top();
    numStack.pop();

    float tempVal = num2.val + num1.val;

    num1.val = tempVal;

    numStack.push(num1);

} 
```

**添加.h**

```
#ifndef _ADD_H_
#define _ADD_H_

#include "Stack.h"
#include "Number.h"
#include "Binary.h"

class Add : public Binary
{
public:

  Add (void);
  void executeCommand (Stack<Number> & numStack);
  ~Add (void);

};

#endif   // !defined _ADD_H_ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:31:47.280

这是一个循环依赖问题。

*   `Command.h`包括`Number.h`
*   `Number.h`包括`Command.h`

通常它是通过用前向声明替换其中一个包含来解决的，尝试前向声明`Number`而`Command.h`不是包含`Number.h`；移动包括到`Command.cpp`。

# android - 每次我在我的 android 应用程序的 http post 的帮助下将一行插入表中时，都会插入两行

> ID：15488592
> 
> 赞同：0
> 
> 时间：2013-03-18T23:01:44.707
> 
> 标签：android, http-post

安卓部分

```
final ProgressDialog p = new ProgressDialog(arg0.getContext()).show(arg0.getContext(),"Waiting for Server", "Accessing Server");
        Thread thread = new Thread()
        {
            @Override
            public void run() {
                   try{

                     httpclient=new DefaultHttpClient();
                     httppost= new HttpPost("http://www.ng.in/m/z.php"); 

                     nameValuePairs = new ArrayList<NameValuePair>(1);
                     nameValuePairs.add(new BasicNameValuePair("z_101","3"));
                     nameValuePairs.add(new BasicNameValuePair("uname",info));
                     nameValuePairs.add(new BasicNameValuePair("bill",""+bill));
                     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                     //Execute HTTP Post Request
                     response=httpclient.execute(httppost);

                     ResponseHandler<String> responseHandler = new BasicResponseHandler();
                     final String response = httpclient.execute(httppost, responseHandler);
                     System.out.println("Response : " + response);
                     runOnUiThread(new Runnable() {
                            public void run() {
                                p.dismiss();
                              pay.append(response);   
                            }

                           });

                 }catch(Exception e){

                     e.printStackTrace();
                 }
            }
        };

        thread.start(); 
```

PHP代码： -

```
 <?php
require "connect.inc.php";
$uname=$_POST['uname'];
$bill=(int)$_POST['bill'];
$z_101=(int)$_POST['z_101'];
$rest="z";
$query1="insert into mc_log (uname,rname,bill) values ('$uname','$rest','$bill')";
$result1=mysql_query($query1);
?> 
```

每次我运行它时，都会将具有相同值的两行插入到 mc_log 表中。mc_log 表还有两列 i) id 是主键和 auto_increamented ii) time 是默认的 systime。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:05:14.957

这段代码看起来翻了一番：

```
//Execute HTTP Post Request
response=httpclient.execute(httppost);

ResponseHandler<String> responseHandler = new BasicResponseHandler();
fnal String response = httpclient.execute(httppost, responseHandler); 
```

你打`execute()`了两次电话，这就是问题所在...

# vba - 使平凡的任务自动化

> ID：15488598
> 
> 赞同：0
> 
> 时间：2013-03-18T23:02:34.923
> 
> 标签：vba, outlook

我有一个简单的任务需要自动化。

我根据触发器从另一个应用程序收到一封非常特定格式的电子邮件。

我想要的是外观“读取”该电子邮件中的数据并比较两个单元格。如果一个单元格大于另一个单元格，那么我希望将电子邮件转发到指定地址，否则删除该电子邮件。

尝试了以下 vba 代码，但出现运行时错误。请指导

```
Sub GetLines()

Dim msg As Outlook.mailItem
Dim rows As Variant
Dim numberofColumns As Long
Dim numberofRows As Long
Dim headerValues As Variant
Dim headerRow() As String
Dim data() As String
Dim i As Long, j As Long

' get currently selected email
Set msg = ActiveExplorer.Selection.item(1)

' tokenize each line of the email
rows = Split(msg.Body, vbCrLf)

' calculate array size
numberofColumns = Len(rows(0)) - Len(Replace(rows(0), Chr(9), ""))
numberofRows = UBound(rows) + 1

' put header row into array
ReDim headerRow(1 To numberofColumns)
headerValues = Split(rows(0), Chr(9))

For i = 1 To numberofColumns
  headerRow(i) = Trim$(headerValues(i - 1))
Next i

' calculate data array size
numberofRows = numberofRows - 1

' put data into array
ReDim data(1 To numberofRows, 1 To numberofColumns)

  For i = 1 To numberofRows
    For j = 1 To numberofColumns
      data(i, j) = Trim$(Split(rows(i), Chr(9))(j - 1))
    Next j
  Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:18:58.187

您的代码对数据做出了太多不必要的假设，并且大部分时间都会出错。首先，您需要使用 F8 单步执行代码以隔离特定行中的错误。

我建议你改变

```
Dim data() As String 
```

至

```
Dim data As Variant
data = Array() 
```

我不是 VBA 如何管理内存的专家，但我知道当我使事情变体时，我会少很多悲伤。

您最有可能在这里遇到问题：

```
 For i = 1 To numberofRows
    For j = 1 To numberofColumns
      data(i, j) = Trim$(Split(rows(i), Chr(9))(j - 1))
    Next j
  Next i 
```

如果不是每一行都完美形成怎么办？

相反，试试这个：

```
 For i = 1 To numberofRows
    For j = 1 To Ubound(Split(rows(i), Chr(9))) + 1
      data(i, j) = Trim$(Split(rows(i), Chr(9))(j - 1))
    Next j
  Next i 
```

这允许您的代码在数据中“存活”空白行或其他一些错误。

# javascript - 来自函数的 $q 承诺在解决时不会将其值传播到 Angular 视图中

> ID：15488599
> 
> 赞同：2
> 
> 时间：2013-03-18T23:02:35.560
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope

出于某种原因，当我`$q`从作用域函数返回一个承诺时，该值永远不会在解析时传播：

```
app.controller('MainCtrl', function($scope, $q) {
    var deferred = $q.defer();
    deferred.resolve("hello");
    var promise = deferred.promise;

    $scope.promiseReturn = function() {
        return promise;
    };
}); 
```

和观点：

```
<body ng-controller="MainCtrl">
    <p>promiseReturn: {{promiseReturn()}}</p>
</body> 
```

[这是此代码的 Plunker](http://plnkr.co/edit/79F80uU9LmyMGxuchfph?p=preview)。视图最终看起来像：

```
promiseReturn: {} 
```

我的理解似乎是模板引擎会`$q`相当透明地处理承诺。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:02:35.560

**`$q`Promise 可以直接附加到作用域**，当被解析时，它们的值将导致视图被更新（并且它们的解析值将被使用），但它们**不能是作用域函数的返回值**。

如果您从作用域上的函数返回一个 Promise，则返回值将按原样使用。Promise 看起来像一个 object `{then: function() { ... }}`，Angular 的 JSON 序列化器会忽略具有函数值的键，因此您只需进入`{}`视图即可。[这是一个 Plunker 演示这个](http://plnkr.co/edit/yrJO6YPNzkOFXrsW1Hlp?p=preview)。

Angular 在几个地方处理这个问题；你可以在[parse.js](https://github.com/angular/angular.js/blob/master/src/ng/parse.js)中看到一些（搜索`.then`）。

# c++ - Setcapture 导致 PtInRect 发生故障？

> ID：15488602
> 
> 赞同：-1
> 
> 时间：2013-03-18T23:02:43.307
> 
> 标签：c++, winapi, visual-c++

出于某种原因，使用 SetCapture 函数会导致 PtInRect() 函数不起作用！

这是一些代码：

```
POINT curmouse;
RECT testrect = {0, 0, 200, 200};

WM_LBUTTONDOWN:
if (MK_LBUTTONDOWN == true)
SetCapture(hWnd);
break;

WM_MOUSEMOVE:
curmouse.x = LOWORD(lParam);
curmouse.y = HIWORD(lParam);

WM_LBUTTONUP:
if (PtInRect(&testrect , curmouse))
//Draw Image 
```

请注意：我没有在 WM_LBUTTONUP 上调用释放捕获。实际上，永远不会调用 releasecapture！

如果我不调用 setcapture，那么 ptinrect 在鼠标释放时会按预期工作。

有人可以告诉我如何让 ptinrect 与被调用的 setcapture() 一起工作吗？

**最重要的是，该程序中有两个单独的窗口。第一个窗口名为 bg_window，第二个名为 other_window。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:06:02.133

你只是在初始化`curmouse`，`WM_MOUSEMOVE`而不是`WM_LBUTTONUP`- 所以当你实际按下按钮时那里的值将是随机的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:01:57.563

SetCapture() 将鼠标消息限制在传递句柄的窗口中。除非您调用 ReleaseCapture()，否则无法解释另一个窗口上的鼠标消息。使用 SetCapture() 并且从不调用 ReleaseCapture() 不是一个好的编码习惯。

如果您的矩形在另一个窗口中，则 PtInrect 将无法正常工作。此外，如果您想知道用户是否单击了矩形区域，您可以使用在 WM_LBUTTONDOWN 消息期间获得的鼠标点。

# workflow-foundation-4 - 在恢复期间检索状态机工作流程中的根变量的值

> ID：15488609
> 
> 赞同：0
> 
> 时间：2013-03-18T23:03:12.287
> 
> 标签：workflow-foundation-4, workflow-foundation

我有一个状态机工作流，我在 WorkflowApplication 中自托管。当我恢复一个持久的工作流时，我需要能够提取给定根级变量的值（因此它应该在范围内）——从工作流中提取到我的托管环境中——为了清楚起见，我需要从工作流的外部访问变量。

我已按照此处的说明进行操作：[如何获取 WorkflowApplication 的上下文？](https://stackoverflow.com/questions/11397114/how-to-get-context-of-workflowapplication)但我没有收到任何包含根级变量值的事件（恢复后）。我开始认为工作流的“恢复”不会触发任何允许获取根级别变量的跟踪。

有没有人有更清晰的解释，也许是测试工具？

谢谢

# r - 如何将 ddply 与自定义函数一起使用并返回原始数据框以及结果

> ID：15488614
> 
> 赞同：5
> 
> 时间：2013-03-18T23:03:45.383
> 
> 标签：r, plyr

看看我的数据来自一个包含许多试验的任务，每个试验由 5 个问题组成（以下代码将生成一个有代表性的子集）：

```
Subject<-c(rep(400,20),rep(401,20))
RT<-sample(x=seq(250:850),size=40)
accuracy<-c(1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0)
trial<-rep(rep(1:4, each=5),2)
question<-rep(seq(from=0,to=4),8)
data<-data.frame(Subject,trial,question,RT,accuracy)
remove(Subject,RT,accuracy,trial,question) 
```

看起来像这样：

```
 ID    trial  question   RT   accuracy
1     400   1      0          131  1
2     400   1      1          768  1
3     400   1      2          300  1
4     400   1      3          130  1
5     400   1      4          168  1
...
36    401   1      0          273  1
37    401   1      1          803  1
38    401   1      2          786  0
39    401   1      3          712  1
40    401   1      4          254  0 
```

现有准确度变量是指每个问题的准确度。我正在尝试创建一个新变量，该变量基本上表明特定试验中的所有问题是否都正确（即准确度 = 1）。对于上面的主题 400，结果变量将是 c(1,1,1,1,1)，表明所有问题都是正确的。对于上面的主题 401，结果数据将是 c(0,0,0,0,0)，表明 1 个或多个问题不正确。为了实现这一点，我尽力解码了 Plyr 及其变体的相当混乱的帮助文件和示例，以提出这个解决方案：

逻辑：1）对于每个受试者，分别考虑每个试验中的问题 2）查看通过数据框的准确度列 2）如果准确度总和为试验中的问题数，则返回全 1 的向量，否则返回全 0 的向量

这似乎完成了工作：

```
allOK<-function(x) {
  c<-length(x[,1]) #get number of questions for this trial
  s<-sum(x$accuracy) #get sum of accuracies
  return ( data.frame(rep(as.integer(s==c))) ) #return allOK vector
} 
```

这是我尝试将其应用于我的数据：

```
alloktest<-ddply(.data=data,c("Subject","trial"), .fun=allOK, .progress = "text") 
```

它可以工作，除了 alloktest 只包含 Subject、trial 和一个带有结果的新变量。虽然结果是正确的，这很好，但我希望它返回带有新变量（可能名为 aok）的原始数据框。

我该如何做到这一点？为了清楚起见，我正在寻找这个：

```
 ID    trial  question   RT   accuracy  aok
1     400   1      0          131  1          1
2     400   1      1          768  1          1
3     400   1      2          300  1          1
4     400   1      3          130  1          1
5     400   1      4          168  1          1
...
36    401   1      0          273  1          0
37    401   1      1          803  1          0
38    401   1      2          786  0          0
39    401   1      3          712  1          0
40    401   1      4          254  0          0 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:18:06.463

我能想到的最简单的方法`mutate`是`plyr`使用`transform`

```
 alloktest<-ddply(.data=data,c("Subject","trial"), mutate,  
     aok = sum(accuracy) == length(accuracy)) 
```

这假设在每个主题和试验组合中，每个问题只有 1 行。

# windows - 排除特定文件扩展名

> ID：15488615
> 
> 赞同：-1
> 
> 时间：2013-03-18T23:03:46.070
> 
> 标签：windows, batch-file

好吧，我是脚本新手，我正在尝试编辑一个批处理脚本文件，当扩展名为 .ecl 的文件在文件夹中的时间超过 5 分钟左右时，该文件会发送电子邮件。但是还有其他带有 .ecl.part 扩展名的文件会被标记，它会发送电子邮件而不是 .ecl 文件。我很好奇是否可以添加一些内容，以便当文件夹中有 .ecl 文件超过 5 分钟并忽略 .ecl.part 文件时它会发送电子邮件。我为使用 [!(.extension to exclude)].extension 不排除的 Linux 用户读了一篇，我只是想知道这是否适用于我的 Windows 批处理脚本。如果它会起作用，我是像这样添加它还是像这样添加它 .extension not to exclude[!(.extension to exclude)]

这是有问题的脚本的一部分：

```
 for /f "tokens=1-5 delims=:, " %%a in ('forfiles /p z: /d +0 /s /m *.ecl /c "cmd /c if @isdir==FALSE echo @file,@ftime"') do (
     set  fnam=%%a
     set   fhr=%%b
     set  fmin=%%c
     set  fsec=%%d
     set fampm=%%e

     if "!fampm!" == "PM" if "!fhr!" neq "12" (set /a "fhr=!fhr!+12") 
```

还有更多的脚本，我没有设置它，而且设置的人不是很有帮助，这就是我来这里的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:11:02.737

```
@ECHO OFF
SETLOCAL
SET savearea=c:\destdir
SET emldir=c:\sourcedir
ECHO.>"%savearea%\emlfiles.new"
DIR /b /a-d /on "%emldir%\*.eml" >>"%savearea%\emlfiles.new"
IF NOT EXIST "%savearea%\emlfiles.old" GOTO noold
FOR /f "usebackqdelims=" %%i IN ("%savearea%\emlfiles.new") DO (
FINDSTR /b /e "%%i" "%savearea%\emlfiles.old" >NUL
IF NOT ERRORLEVEL 1 (ECHO %%i is MORE than 5 minutes old)
)
:noold
MOVE /y "%savearea%\emlfiles.new" "%savearea%\emlfiles.old" >nul
GOTO :eof 
```

此脚本在 %savearea% 中保存 %emldir% 中 *.eml 文件的排序基本文件列表，然后将新列表与以前的版本进行比较。如果两者中出现相同的文件名，它将生成消息`%%i is MORE than 5 minutes old`

所以 - 您需要做的就是指向`emldir`您的 .eml 文件所在的任何位置，`savearea`指向某个安全目录，将消息 ECHOing 替换为您喜欢的电子邮件发送命令，并使用任务调度程序安排它每 5 分钟运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:14:43.027

尽管在我的测试中我发现情况并非如此，但这听起来像是`forfiles`在针对您计算机上的 8.3 短文件名评估通配符。你知道如果你在一个同时包含 .doc 和 .docx 文件的目录中并且你做了`dir *.doc`.docx 文件也会被列出来吗？一样的东西。

所以 *.ecl 匹配你的 .ecl.part 文件，因为在 8.3 表示法中它们有一个 .ecl 扩展名。您可以确保将循环的`%fnam:~-4%==.ecl`大部分内容包含在语句中；或者您可以使用或过滤循环捕获的输出。像这样的东西：`for``if``find``findstr``forfiles``for`

```
for /f "tokens=1-5 delims=:, " %%a in (
    'forfiles /p z: /d +0 /s /m *.ecl /c "cmd /c if @isdir==FALSE echo @file,@ftime" ^| find /v /i ".part"'
) do (
    set  fnam=%%a
    set   fhr=%%b
    set  fmin=%%c
    set  fsec=%%d
    set fampm=%%e

    if "!fampm!" == "PM" if "!fhr!" neq "12" (set /a "fhr=!fhr!+12")
    rem etc. 
```

由于`find /v`打印的行与其搜索*不*匹配，因此应该有效地过滤掉 .ecl.part 文件。 `find /v`像`grep -v`在 Linux 中一样工作。

* * *

你知道，因为我的测试用例似乎与你描述的症状不匹配，我很想知道简单地替换`if @isdir==FALSE`是否`if @ext==\"ecl\"`也会阻止 .ecl.part 文件被包含在内。但如果你不想尝试满足我的好奇心，我完全理解。

# ruby - 使用 RubyGems 安装 gem 的问题

> ID：15488621
> 
> 赞同：1
> 
> 时间：2013-03-18T23:04:31.507
> 
> 标签：ruby, rubygems, ruby-on-rails-3.2

我正在使用 Debian 5 Ruby 版本 1.8.7 Rubygems 版本 2.0.3 Rails 版本 3.2.12

我制作了我的 Ruby on Rails 应用程序并希望公开部署它，所以我尝试安装“Mongrel”但没有任何运气，然后安装“Unicorn”也没有任何运气和同样的错误。

```
vps1198019:~# gem install mongrel
Building native extensions.  This could take a while...
ERROR:  Error installing mongrel:
        ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.8 extconf.rb

Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5 for inspection.
Results logged to /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/ext/http11/gem_make.out 
```

和

```
vps1198019:~# gem install unicorn
Building native extensions.  This could take a while...
ERROR:  Error installing unicorn:
        ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.8 extconf.rb

Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/kgio-2.8.0 for inspection.
Results logged to /usr/lib/ruby/gems/1.8/gems/kgio-2.8.0/ext/kgio/gem_make.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:33:50.940

尝试使用以下命令。由于版本不匹配，未安装 gem。

```
$ gem install mongrel --pre 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:26:41.397

因此，我通过手动安装找到了解决问题的方法。[我从http://rubyforge.org/frs/?group_id=1306（.gem](http://rubyforge.org/frs/?group_id=1306)文件）下载了 Unicorn 。存储在服务器中。用终端去了那个文件夹。然后我访问它

```
gem install --local unicorn.gem 
```

然后它提示我必须有kgio和raindrops所以我安装了它们：

```
gem install kgio
gem install raindrops 
```

并重复第一个命令。

# java - Mac终端中显示为问号的汉字

> ID：15488628
> 
> 赞同：2
> 
> 时间：2013-03-18T23:05:09.483
> 
> 标签：java, macos, unicode, utf-8, terminal

我正在尝试使用 Java 文件从数据库中检索一些 UTF-8 uni 编码的汉字。当我这样做时，字符将作为问号返回。

但是，当我显示数据库中的字符（使用`select * from ...`）时，字符会正常显示。当我在由汉字组成的Java文件中打印字符串时，它们也可以正常打印。

我在 Eclipse 中遇到了这个问题：当我运行程序时，字符被打印为问号。但是，当我以 UTF-8 格式保存 Java 文件时，这个问题就解决了。

在终端中运行“locale”当前会返回：

```
LANG="en_GB.UTF-8"
LC_COLLATE="en_GB.UTF-8"
LC_CTYPE="en_GB.UTF-8"
LC_MESSAGES="en_GB.UTF-8"
LC_MONETARY="en_GB.UTF-8"
LC_NUMERIC="en_GB.UTF-8"
LC_TIME="en_GB.UTF-8"
LC_ALL= 
```

我还尝试使用以下方法编译我的 java 文件：

```
 javac -encoding UTF-8 [java file] 
```

但是，输出仍然是问号。

奇怪的是它有时只会显示字符。有人对此有解释吗？或者更好的是，如何解决这个问题以便正确显示字符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T06:26:52.843

`System.out`打印流不是作为 UTF-8 打印流创建的。您可以将其转换为这样的：

```
import java.io.PrintStream;
import java.io.UnsupportedEncodingException;

public class JavaTest {

    public static void main(String[] args) {

        try{
            PrintStream out = new PrintStream(System.out, true, "UTF-8");

            out.println("Hello");
            out.println("施华洛世奇");
            out.println("World");
        }
        catch(UnsupportedEncodingException UEE){

            //Yada yada yada
        }
    }
} 
```

您还可以通过以下方式[设置默认编码](https://stackoverflow.com/questions/81323/changing-the-default-encoding-for-stringbyte)：

```
java -Dfile.encoding=UTF-8  -jar JavaTest.jar 
```

# passwords - 需要找到程序用于写入 firebird DB 的用户名/密码

> ID：15488630
> 
> 赞同：-1
> 
> 时间：2013-03-18T23:05:13.783
> 
> 标签：passwords, firebird, credentials

我有一个访问本地 firebird 数据库的程序。它对这个数据库有写权限，我们需要能够写这个数据库，但不知道用户名/密码。

显然，PC 中的某处是能够连接到该数据库的连接字符串/用户名/密码。我可以用什么方法找到这个？

我试过进程监视器来查看它是否访问任何注册表项但看不到任何注册表项。我已经检查了配置文件的安装目录。我已经反编译了一些 DAL DLL，但在任何地方都看不到任何硬编码！

供应商已经不在了，所以我们不能去找他们。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:24:50.000

如果使用“本地”表示嵌入，那么您实际上不需要知道密码 - 嵌入式版本不检查密码。引用“README_embedded.txt”文件的“2.3.身份验证和安全”一章：

> 嵌入式服务器中不使用安全数据库（即 security2.fdb），因此不需要。任何用户都可以附加到任何数据库。由于服务器和客户端都运行在同一地址空间中，因此安全性只是双方之间的协议，很容易受到损害。

因此，您实际上只需要用户名，并且您可以使用`SYSDBA`- Firebird 的超级用户。请注意，即使使用嵌入的用户名，仍会检查用户名以分配用户 SQL 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:22:19.917

除了*ain关于使用嵌入式的*[回答](https://stackoverflow.com/a/15492821/466862)之外，Firebird 中的身份验证由服务器及其关联的安全数据库处理。这意味着如果您将 Firebird 数据库复制（或更好：备份和恢复）到您知道 SYSDBA 密码的另一台服务器，那么您可以简单地访问该数据库。

 *但是，如果您希望从不同的进程对嵌入在用户应用程序中的 Firebird 服务器使用的数据库进行连续写入访问：您不能。嵌入式服务器（至少在 Windows 上）不允许外部连接。*

# php - PHP class_exists 区分大小写

> ID：15488632
> 
> 赞同：15
> 
> 时间：2013-03-18T23:05:17.220
> 
> 标签：php

根据 PHP 的文档[`class_exists()`](http://php.net/manual/en/function.class-exists.php)是不区分大小写的。但是，我正在经历它。例如，`class_exists("\\My\\Class")`返回 true 但`class_exists("\\My\\class")`返回 false。

我正在运行 PHP 5.3.3。我有两个不同的环境。这在一个环境中正常工作，但另一个环境的行为就像它关心大小写一样。

我错过了什么？某处有配置设置吗？

**更新：**

对于其他遇到此问题的人，我发现了问题。`class_exists()`对任何未声明的类使用自动加载器。`class_exists()`只要类出现在[`get_declared_classes()`](http://php.net/manual/en/function.get-declared-classes.php). 但是，如果您要查找的类没有出现在此列表中，则它依赖于注册的自动加载器堆栈来找到它。我的项目使用的自动加载器是 Symfony2 的 UniversalClassLoader，它最终依赖于[`file_exists()`](http://php.net/manual/en/function.file-exists.php)自动加载类。`file_exists()`只要系统环境区分大小写，就区分大小写。这就是为什么我在一种环境而不是另一种环境中看到问题的原因。有很多方法可以通过添加不区分大小写的自动加载器来解决这个问题。还有一些不区分大小写的好例子`file_exists()`文档注释中的实现。

对于没有有效地传达问题并提供伪示例而不是实际代码而浪费大家的时间，我深表歉意。我的伪示例不是我想要解决问题的核心，而是分散注意力。我失败了，为此我真的很抱歉。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T08:41:53.947

您是否将 windows/mac 与 linux 进行比较？

假设文件`Wooby\Dooby\Foo.php`存在。具有以下内容：

```
<?php
namespace Wooby\Dooby;

class Foo {} 
```

## 类名不区分大小写

如果一个类已经存在，不管你用什么大小写来引用它，都会找到这个类：

```
<?php

require "Wooby/Dooby/Foo.php";

echo "Class Wooby\\Dooby\\foo does " . (class_exists("Wooby\\Dooby\\foo") ? '' : "NOT") . " exist\n";
echo "Class wooby\\dooby\\foo does " . (class_exists("wooby\\dooby\\foo") ? '' : "NOT") . " exist\n";
echo "Class Wooby\\Dooby\\Foo does " . (class_exists("Wooby\\Dooby\\Foo") ? '' : "NOT") . " exist\n"; 
```

运行上述测试文件将返回：

```
-> php index.php 
Class Wooby\Dooby\foo does  exist
Class wooby\dooby\foo does  exist
Class Wooby\Dooby\Foo does  exist 
```

## 文件系统区分大小写

如果一个类不*存在*并且您使用自动加载器 - 那么大小写确实很重要。考虑将上面的示例修改为使用简单的自动加载器：

```
<?php
ini_set('display_errors', 0);

function __autoload($name) {
    $file = str_replace('\\', '/', $name) '.php';
    if (file_exists($file)) {
        include $file;
    }
}

echo "Class Wooby\\Dooby\\foo does " . (class_exists("Wooby\\Dooby\\foo") ? '' : "NOT") . " exist\n";
echo "Class wooby\\dooby\\foo does " . (class_exists("wooby\\dooby\\foo") ? '' : "NOT") . " exist\n";
echo "Class Wooby\\Dooby\\Foo does " . (class_exists("Wooby\\Dooby\\Foo") ? '' : "NOT") . " exist\n"; 
```

结果将是：

```
-> php index.php 
Class Wooby\Dooby\foo does NOT exist
Class wooby\dooby\foo does NOT exist
Class Wooby\Dooby\Foo does  exist 
```

因为自动加载器正在寻找与丢失的类名匹配的路径，所以只有最后一个条目会触发包括文件和加载类。

*除非*您使用的 Windows 或 mac ¹都使用不区分大小写的文件系统。

## 概括

php 中的类名不区分大小写，但您的代码可能是因为它有效地继承了文件系统的区分大小写。显然最好使用一致的大小写，不要依赖php纠正懒惰的开发习惯。

请注意，[class_exists](http://www.php.net/manual/en/function.class-exists.php)有一个参数可以在查找不存在的类时打开或关闭（默认情况下打开）自动加载器的使用。

### 脚注

¹更准确地说，HFS 默认情况下不区分大小写但会保留大小写。

# python - Python - 记忆和 Collat z 序列

> ID：15488634
> 
> 赞同：6
> 
> 时间：2013-03-18T23:05:24.553
> 
> 标签：python, math, memoization

[当我在 Project Euler](http://projecteuler.net/problem=14)中努力解决问题 14 时，我发现我可以使用一种叫做 memoization 的东西来加快我的进程（我让它运行了 15 分钟，但它仍然没有返回答案）。问题是，我该如何实现它？我试过了，但我得到一个键错误（返回的值无效）。这让我很烦恼，因为我很肯定我可以对此应用记忆并更快地获得它。

```
lookup = {}

def countTerms(n):
   arg = n
   count = 1
   while n is not 1:
      count += 1
      if not n%2:
         n /= 2
      else:
         n = (n*3 + 1)
      if n not in lookup:
         lookup[n] = count

   return lookup[n], arg

print max(countTerms(i) for i in range(500001, 1000000, 2)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:48:14.267

还有一种很好的递归方式可以做到这一点，它可能会比po​​orsod的解决方案慢，但它更类似于您的初始代码，因此您可能更容易理解。

```
lookup = {}

def countTerms(n):
   if n not in lookup:
      if n == 1:
         lookup[n] = 1
      elif not n % 2:
         lookup[n] = countTerms(n / 2)[0] + 1
      else:
         lookup[n] = countTerms(n*3 + 1)[0] + 1

   return lookup[n], n

print max(countTerms(i) for i in range(500001, 1000000, 2)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T23:37:56.130

对于 Collat​​z 序列，记忆的重点是避免计算您已经完成的列表部分。序列的其余部分完全由当前值决定。因此，我们希望尽可能多地检查表格，并尽快退出其余的计算。

```
def collatz_sequence(start, table={}):  # cheeky trick: store the (mutable) table as a default argument
    """Returns the Collatz sequence for a given starting number"""
    l = []
    n = start

    while n not in l:  # break if we find ourself in a cycle
                       # (don't assume the Collatz conjecture!)
        if n in table:
            l += table[n]
            break
        elif n%2 == 0:
            l.append(n)
            n = n//2
        else:
            l.append(n)
            n = (3*n) + 1

    table.update({n: l[i:] for i, n in enumerate(l) if n not in table})

    return l 
```

它在工作吗？让我们监视它以确保正在使用记忆的元素：

```
class NoisyDict(dict):
    def __getitem__(self, item):
        print("getting", item)
        return dict.__getitem__(self, item)

def collatz_sequence(start, table=NoisyDict()):
    # etc

In [26]: collatz_sequence(5)
Out[26]: [5, 16, 8, 4, 2, 1]

In [27]: collatz_sequence(5)
getting 5
Out[27]: [5, 16, 8, 4, 2, 1]

In [28]: collatz_sequence(32)
getting 16
Out[28]: [32, 16, 8, 4, 2, 1]

In [29]: collatz_sequence.__defaults__[0]
Out[29]: 
{1: [1],
 2: [2, 1],
 4: [4, 2, 1],
 5: [5, 16, 8, 4, 2, 1],
 8: [8, 4, 2, 1],
 16: [16, 8, 4, 2, 1],
 32: [32, 16, 8, 4, 2, 1]} 
```

* * *

编辑：我*知道*它可以优化！秘密在于函数中有两个地方（两个返回点）我们知道`l`并且`table`不共享任何元素。虽然之前我通过测试避免调用`table.update`已经存在的元素`table`，但这个版本的函数反而利用了我们对控制流的了解，节省了大量时间。

`[collatz_sequence(x) for x in range(500001, 1000000)]`现在在我的计算机上运行大约 2 秒，而 @welter 版本的类似表达式在 400 毫秒内运行。我认为这是因为这些函数实际上并不计算相同的东西——我的版本生成整个序列，而 @welter 只是找到它的长度。所以我不认为我可以让我的实现速度降低到相同的速度。

```
def collatz_sequence(start, table={}):  # cheeky trick: store the (mutable) table as a default argument
    """Returns the Collatz sequence for a given starting number"""
    l = []
    n = start

    while n not in l:  # break if we find ourself in a cycle
                       # (don't assume the Collatz conjecture!)
        if n in table:
            table.update({x: l[i:] for i, x in enumerate(l)})
            return l + table[n]
        elif n%2 == 0:
            l.append(n)
            n = n//2
        else:
            l.append(n)
            n = (3*n) + 1

    table.update({x: l[i:] for i, x in enumerate(l)})
    return l 
```

PS - 发现错误！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-05T13:33:05.707

这是我对 PE14 的解决方案：

```
memo = {1:1}
def get_collatz(n):

if n in memo : return memo[n]

if n % 2 == 0:
    terms = get_collatz(n/2) + 1
else:
    terms = get_collatz(3*n + 1) + 1

memo[n] = terms
return terms

compare = 0
for x in xrange(1, 999999):
if x not in memo:
    ctz = get_collatz(x)
    if ctz > compare:
     compare = ctz
     culprit = x

print culprit 
```

# ios - 矩形 UIButton

> ID：15488636
> 
> 赞同：0
> 
> 时间：2013-03-18T23:05:40.630
> 
> 标签：ios, uibutton

我读过你可以通过设置cornerRadius来制作一个矩形UIButton，但这仅适用于自定义UIButtons吗？有没有办法在默认 UIButton 上将cornerRadius 设置为零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:32:21.697

`RoundedRectangle`按钮类型意味着它将是圆角，根据我的经验，我认为无法将此按钮的半径设置为 0，但是您可以将背景图像设置为它或使用自定义按钮类型，这很简单正如您自己在问题中提到的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T23:30:57.800

要使 UIButtonTypeRoundedRect 类型的 UIButton 为矩形，请为该按钮提供一个矩形背景图像（例如，使用`setBackgroundImage:forState:`）。

# json - 如何在scala枚举中编写Reads[T]和Writes[T]（播放框架2.1）

> ID：15488639
> 
> 赞同：25
> 
> 时间：2013-03-18T23:05:52.457
> 
> 标签：json, scala, playframework-2.1

我对 Play Framework 2.1 中的新 ScalaJson 功能有点迷失了。我想在我的枚举中写读和写。

这是我的代码：

```
object EnumA extends Enumeration {
 type EnumA = Value
 val VAL1, VAL2, VAL3 = Value

def parse(str:String) : EnumA = {
    str.toUpperCase() match {
         case "VAL1" => VAL1
         case "VAL2" => VAL2
         case "VAL3" => VAL3
         case _ => null
    }
}} 
```

任何想法 ？

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-18T23:59:30.507

简短的回答：使用类似[Play Enumeration Utils](https://github.com/leon/play-enumeration)的东西。

长答案，您可以为枚举类型创建一个可重用的读取，而不是*在*您的枚举中放置一个读取：

```
object EnumA extends Enumeration {
  type EnumA = Value
  val VAL1, VAL2, VAL3 = Value
}

object EnumUtils {
  def enumReads[E <: Enumeration](enum: E): Reads[E#Value] = new Reads[E#Value] {
    def reads(json: JsValue): JsResult[E#Value] = json match {
      case JsString(s) => {
        try {
          JsSuccess(enum.withName(s))
        } catch {
          case _: NoSuchElementException => JsError(s"Enumeration expected of type: '${enum.getClass}', but it does not appear to contain the value: '$s'")
        }
      }
      case _ => JsError("String value expected")
    }
  }
} 
```

然后，当您想将某些内容解析为枚举时，请在范围内为您的特定枚举类型创建一个隐式读取：

```
import some.thing.EnumUtils
implicit val myEnumReads: Reads[EnumA.Value] = EnumUtils.enumReads(EnumA)

val myValue: EnumA.Value = someJsonObject.as[EnumA.Value] 
```

或者

```
val myValue: EnumA.Value = someJsonObject.asOpt[EnumA.Value].getOrElse(sys.error("Oh noes! Invalid value!")) 
```

（在 Scala 中使用 null 被认为是不好的形式。）

将枚举编写为 JsValues 更简单：

```
object EnumUtils {
  ...
  implicit def enumWrites[E <: Enumeration]: Writes[E#Value] = new Writes[E#Value] {
    def writes(v: E#Value): JsValue = JsString(v.toString)
  }
} 
```

然后在尝试编写枚举之前将其导入范围（或将其显式传递给`toJson`函数：

```
import EnumUtils.enumWrites
val myEnumJson: JsValue = Json.toJson(EnumA.VAL1) 
```

您可以类似地创建一个函数来创建一个结合读取和写入的 Format 对象：

```
object EnumUtils {
  ....
  implicit def enumFormat[E <: Enumeration](enum: E): Format[E#Value] = {
    Format(EnumReader.enumReads(enum), EnumWriter.enumWrites)
  }
} 
```

# regex - php正则表达式匹配日志文件

> ID：15488642
> 
> 赞同：0
> 
> 时间：2013-03-18T23:06:04.270
> 
> 标签：regex, preg-match

我正在尝试匹配我在日志文件中看到的异常行。日志文件的格式为“[timestamp] threadid(8 位字母数字) applicationName(任意长度的字母数字字符) E(表示异常消息)”

因此，示例日志异常消息将是：

“[11/27/12 22:33:02:635 EST] 0000009a myApplication E” 任何东西都可以在 E 之后出现。

我无法使用 PHP preg_match 找到一个正则表达式来匹配它

任何帮助，将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:14:18.477

试试这个正则表达式（带*捕获组*）：

```
/^\[\d+/\d+/\d+\s+\d+:\d+:\d+:\d+\s+\w+\]\s+\w{8}\s+\w+\s+E(.*)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:10:07.237

try the following:

```
'/^\[[^\]]+\]\s\w{8}\s[^\s]+\sE.*/m' 
```

The trailing "m" ensures, that the wedge at the beginning matches the beginning of a line in your log.

This solution will of course only work, if all the log entries look pretty similar except for the "E". If there are log entries e.g. without timestamps, it might fail and you have to look for more detailed expressions like sputnick's.

# sublimetext2 - 如何在 Unix 和 Win 机器之间使用一个项目文件？

> ID：15488644
> 
> 赞同：-1
> 
> 时间：2013-03-18T23:06:08.277
> 
> 标签：sublimetext2

我正在尝试使用一个项目并与工作赢机器和家庭 ubuntu 机器共享。问题是，当我尝试打开项目时，该文件具有先前设置的项目位置。

是否可以同时拥有两个位置，或者我是否需要在每次启动 Sublime 时评论包含项目位置的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:21:09.357

一种解决方案（假设您正在使用版本控制......因为即使您没有使用，您也应该使用！）将使用如下内容：[https ://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

只要有两个不同的文件副本，在推送和拉取过程中会被忽略，否则保持两者同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:56:33.787

虽然我建议使用某种类型的版本控制（github 提供免费的公共 repos，bitbucket 提供免费的公共和私人 repos，尽管私人 repos 有限制），因此您不必在每台机器上都有一个单独的项目文件. 文件夹的`.sublime-project`路径可以是相对的。因此，如果您将`.sublime-project`文件放在项目的某个顶级目录中，则可以指定相对路径。

# jquery - AngularJS引导对话框重新打开问题

> ID：15488645
> 
> 赞同：0
> 
> 时间：2013-03-18T23:06:09.543
> 
> 标签：jquery, twitter-bootstrap, angularjs

我正在使用引导对话框来编辑和创建新元素。从 jQuery click 处理程序调用打开对话框以创建新元素的函数，因为这是由 3rd 方库完成的。

通过指令调用打开对话框以编辑元素的功能。

通过指令打开对话框每次都可以正常工作。第一次通过 jQuery 单击处理程序打开对话框也可以正常工作，但是当我关闭对话框并尝试通过单击处理程序再次打开它时，它不会打开，直到单击带有指令的按钮然后两者（编辑和新项目）对话框打开。

我在这里做了一个简化的例子：http: [//plnkr.co/edit/HGvrqH ?p=preview](http://plnkr.co/edit/HGvrqH?p=preview)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:22:32.303

您需要在 $scope.$apply 调用中包含从 Earth 到 Oz 的过渡：

```
window.newItem = function(){
  $scope.$apply(function () {
    $scope.newItem();
  });
}; 
```

如果您查看 Angular UI Boostrap[对话框源代码](https://github.com/angular-ui/bootstrap/blob/master/src/dialog/dialog.js)，您可能会注意到一些基于 Promise 的状态管理，例如围绕第 229 行加载模板的内容。注意您将如何陷入不同的异步行为，具体取决于您是否已加载您的模板与否（第一次按下按钮后会发生变化的条件）。[$q](http://docs.angularjs.org/api/ng.%24q)的文档很好地说明了需要通过使用 $apply 将此类活动放入 Angular 的摘要循环中。

# c# - 如何在我的 C# 中添加另一个电子邮件地址？

> ID：15488646
> 
> 赞同：-2
> 
> 时间：2013-03-18T23:06:15.223
> 
> 标签：c#, .net, email, email-validation, system.net.mail

我想为单击电子邮件表单提交按钮时要发送/转发的消息添加一个额外的电子邮件地址，最简单的方法是什么？

```
public partial class Contact : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
}
protected void Button1_Click(object sender, EventArgs e)
{
    string name = txtName.Text;
    string emailaddress = txtEmail.Text;
    string body = txtComment.Text;

    MailAddress From = new MailAddress(emailaddress);
    MailAddress To = new MailAddress("111@1111.com");
    MailMessage email = new MailMessage(From, To);
    email.Subject = "Comment from Website from " + name;
    email.Body = body;

    SmtpClient smtp = new SmtpClient("smtp.1111.com");
    smtp.Credentials = new System.Net.NetworkCredential("111@1111.com", "1111111111");
    smtp.Send(email);
    email.Dispose();

    ClientScript.RegisterClientScriptBlock(this.GetType(), "Email Confirm", "alert('Email Sent!');", true);

    txtComment.Text = "";
    txtEmail.Text = "";
    txtName.Text = "";

}
protected void txtEmail_TextChanged(object sender, EventArgs e)
{

}
} 
```

我们会说我的额外电子邮件地址是 smtp.2222.com 222@2222.com，身份验证为 22222。感谢大家的关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:12:39.470

简单的：

```
…
MailAddress From = new MailAddress(emailaddress);
MailMessage email = new MailMessage(from, to);
email.To.Add(new MailAddress("111@1111.com"));
email.To.Add(new MailAddress("222@2222.com"));
email.Subject = "Comment from Website from " + name;
email.Body = body;
… 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T23:37:16.497

`To.Add`您可以将逗号分隔的电子邮件地址列表传递给构造函数，而不是使用该方法，`MailMessage`这是一个更好的解决方案，特别是如果您有多个电子邮件地址可以将电子邮件发送到...

```
var from = "me@me.com";
var to = "mail1@domain.com,mail2@domain.com,mail3@domain.com";
var subject = "My Subject";
var body = "Message Body";
var message = new MailMessage(from, to, subject, body); 
```

也能正常工作...

# php - Javascript 无法从 PHP 获取 JSON 数据

> ID：15488649
> 
> 赞同：0
> 
> 时间：2013-03-18T23:06:34.877
> 
> 标签：php, javascript, jquery, html, json

我在读取我在 PHP 中生成的 JSON 数据然后传回我的 Javascript 时遇到了一点问题，我不知道为什么。

这是PHP：

```
header("content-type: text/json");

curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);
// echo the result as a JSON object
echo json_encode($result); 
```

这是 JavaScript：

```
$.post("payment_do.php", { "token": response.response.token, "ip_address": response.ip_address}).done(function(data) {
    console.log(data);
}); 
```

似乎如果我在 PHP 中去掉标题行，我会得到一个可以在 Javascript 中读取的响应，但我无法以您期望的方式访问任何元素。如果我将标头留在那里，我不会得到 javascript 可读的响应。

编辑：现在从 php 得到响应，如下所示：

```
"{\"response\":{\"token\":\"ch_9knTXHoU0dVZsl7iMHyHGg\",\"success\":true,\"amount\":9900,\"currency\":\"AUD\",\"description\":\"test\",\"email\":\"test@test.com\",\"ip_address\":\"1.1.1.1\",\"created_at\":\"2013-03-18T23:49:12Z\",\"status_message\":\"Success!\",\"error_message\":null,\"card\":{\"token\":\"test_token\",\"display_number\":\"XXXX-XXXX-XXXX-0000\",\"scheme\":\"master\",\"address_line1\":\"123 Fake Street Fakington\",\"address_line2\":null,\"address_city\":\"moon\",\"address_postcode\":\"2121\",\"address_state\":\"NSW\",\"address_country\":\"Australia\"},\"transfer\":[],\"amount_refunded\":0,\"total_fees\":999,\"merchant_entitlement\":999,\"refund_pending\":false}}" 
```

最后我不得不在 php 中删除 json_encode 函数并返回结果。然后在javascript（使用jQuery）中调用：

```
data = $.parseJSON(data); 
```

然后我可以使用它访问对象的元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T23:08:42.033

将您的标题更改为`application/json`（而不是`text/json`）。此外，如果您确实想进一步处理`curl_exec`调用结果，那么您需要设置一个附加选项：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

这将导致`curl_exec`调用成功返回数据，而不是 TRUE。

```
$result = curl_exec($ch);
if(! $result) {
    // handle error
}

echo json_encode($result); 
```

此外，您还需要验证从 cURL 调用返回的数据 - 确保在返回之前确实需要对其进行编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T23:10:16.383

add this:

```
header("Content-Type: application/json");
echo json_encode($result); 
```

# machine-learning - Weka 的逻辑回归问题（目标函数 NaN）

> ID：15488651
> 
> 赞同：2
> 
> 时间：2013-03-18T23:06:43.710
> 
> 标签：machine-learning, weka

所以我试图在 Weka 中使用逻辑回归。我有一个庞大的训练和测试集 25,000 个实例 / 5,000 个实例，并且它们中的 A 类和 B 类的数量相同。当我运行逻辑回归时，它给了我“目标函数 NaN”的消息，我不确定这意味着什么或如何解决它。任何帮助，将不胜感激。

# sql - 检查具有特定日期的数据并将其重写的过程

> ID：15488652
> 
> 赞同：0
> 
> 时间：2013-03-18T23:07:05.440
> 
> 标签：sql, sql-server-2008, select

我正在绑定 wright 程序，该程序将检查我的历史表并重写其中的记录。它必须替换本月插入的记录，并且仅当它们在新插入中重复时。

现在我有这个程序，它只是复制了状态 id 为 1 和 2 的客户端，但如果我再次调用它，它将重复记录。

```
create procedure sp_MonthlyInsertInHistory
as

INSERT History( ClientId, CategCode)
  SELECT  ClientId, CategCode   
  FROM dbo.Clients 
  where StatusID in (1,2)
go 
```

历史表看起来像

```
Historyid(int) auto increment, ClienID (int), CategCode (varchar), RecordDate (date)GETDATE();

    1, 11, SR, 2013-02-01
    2, 12, CH, 2013-02-01
    3, 11, SR, 2013-03-01
    4, 12, CH, 2013-03-01 
```

如果我将运行此过程，它应该删除记录`11, 1, 2013-03-01`并将其替换为`11, 1, 2013-03-18`当前日期，如果 clientid 12 现在不在 statusid 1 或 2 中但它已经在表中，它应该留在那里。但是，如果记录不是在本月创建或不是在插入语句中的选择中创建，则不应删除记录。（例如新客户）。我希望你能理解我的解释。任何帮助表示赞赏，因为我只是不知道从什么开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:47:41.250

愿这对你有所帮助。

```
 create procedure sp_MonthlyInsertHistory
as
begin
  merge History as target
  using (SELECT ClientID, CategCode from clients where statusid in (1,2)) as source (ClientID, CategCode)
  on (target.ClientID = source.ClientID and DATEDIFF(mm,target.RecordDate,GETDATE())=0)
  WHEN MATCHED THEN 
      UPDATE SET target.CategCode = Source.CategCode, 
                 target.RecordDate=GetDATE()
  WHEN NOT MATCHED THEN
      INSERT (ClientID,CategCode)
      VALUES (source.ClientID,source.CategCode);
END 
```

# java - 通过 USB 进行 Android Java 通信

> ID：15488653
> 
> 赞同：1
> 
> 时间：2013-03-18T23:07:06.460
> 
> 标签：java, android, usb, communication

我想通过 USB 将一个对象/字符串从 Android 设备发送到 Java 中的 PC。有可能的？基本上是一个通过 USB 的客户端/服务器。

实际上，使用模拟器，我可以通过特殊的 10.0.2.2 地址访问服务器套接字。通过 Wi-fi，我可以使用 192.168.1.X 地址访问。通过 USB，它是如何工作的？

根据[this](http://android.serverbox.ch/?p=370)，我想这是可能的，但是，我如何在java而不是python中做示例代码？有任何想法吗？

```
private Byte[] bytes
private static int TIMEOUT = 5000;
private boolean forceClaim = true
UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);
HashMap<String, UsbDevice> deviceList = manager.getDeviceList();
Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
while(deviceIterator.hasNext()){
    UsbDevice device = deviceIterator.next()
    UsbInterface intf = device.getInterface(0);
    UsbEndpoint endpoint = intf.getEndpoint(0);
    UsbDeviceConnection connection = mUsbManager.openDevice(device); 
    connection.claimInterface(intf, forceClaim);
    bytes = toByteArray("any path");
    connection.bulkTransfer(endpoint, bytes, bytes.length, TIMEOUT); 
}

public static byte[] toByteArray(File file) throws IOException { 
   ByteArrayOutputStream out = new ByteArrayOutputStream(); 
   boolean threw = true; 
   InputStream in = new FileInputStream(file); 
   try { 
     byte[] buf = new byte[BUF_SIZE]; 
     long total = 0; 
     while (true) { 
       int r = in.read(buf); 
       if (r == -1) {
         break; 
       }
       out.write(buf, 0, r); 
     } 
     threw = false; 
   } finally { 
     try { 
       in.close(); 
     } catch (IOException e) { 
       if (threw) { 
         log.warn("IOException thrown while closing", e); 
       } else {
         throw e;
       } 
     } 
   } 
   return out.toByteArray(); 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:32:01.667

我的建议是使用文本文件。

将文本文件保存在您的 SD 卡中。然后在你的PC java程序中，执行`adb pull`命令。

这样，如果您的手机通过 USB 连接到您的 PC，文件将在执行时从手机拉到 PC `adb pull`。

当然需要在您的 PC 中安装 adb 并在您的手机中允许 USB 调试。

希望这可以帮助。

问候

# ios - NSCopying 自定义对象数组

> ID：15488655
> 
> 赞同：1
> 
> 时间：2013-03-18T23:07:20.933
> 
> 标签：ios, objective-c, arrays, nscopying

我有一个管理我所有列表的 Singleton 对象。我们称它为 ListStore。

ListStore 有一个可变数组，用于存储列表。

```
@interface ListStore : NSObject
    @property (nonatomic, copy) NSMutableArray *lists; // an array of List objects
end 
```

Lists 有一个可变数组，用于存储事物。

```
@interface Wanderlist : NSObject <NSCoding, NSCopying>
    @property (nonatomic, copy) NSMutableArray *things; // an array of Thing objects
@end 
```

在任何时候，后台进程都可能通过 ListStore 并循环处理所有 List，而用户可能正在与 List 交互。

为了防止“对象在被枚举时发生变异”类型错误，我这样做：

```
// all of this is in a background thread
NSArray *newLists = [[ListStore sharedStore] lists] copy];

for (List *list in newLists) {
    // yay, no more crashes, because I'm enumerating over a copied object, so the user
    // can do whatever they want while I'm here

    for(Thing *thing in list.things) {
        // oh crap, my copy and the original object both reference the same list.things,
        // which is why i'm seeing the 'mutation while enumerating" errors still
        ...
    }
} 
```

我最初认为因为我制作了一个副本`newLists`，所以它的所有成员都会被正确复制。我现在明白情况并非如此：我仍然看到“枚举时对象已变异”错误，但这次它发生在`list.things`.

我可以在我的设置中使用 NSCopying，这样当我说：

```
[[ListStore sharedStore] copy]; 
```

它打电话`copyWithZone:`，`Lists`所以我可以再`copyWithZone:`上`things`吗？

我试图像这样设置它，但`copyWithZone:`没有被调用。

我知道我可以简单地说`NSArray *newList = [list.things copy]`，但至少我想更好地了解 NSCopying。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:07:20.933

在提交这个问题之前，我点击了 SO 的相关问题列表中的一个问题，并找到了我的解决方案。

认为发布我的解决方案并没有什么坏处。

而不是这个：

```
NSArray *newLists = [[ListStore sharedStore] lists] copy]; 
```

我必须做：

```
NSArray *newLists = [[NSArray alloc] initWithArray:[[ListStore sharedStore] lists] copyItems:true]; 
```

从[NSArray 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)：

> ```
> - (id)initWithArray:(NSArray *)array copyItems:(BOOL)flag
> flag: 
> If YES, each object in array receives a copyWithZone: message to create a copy of the object—objects must conform to the NSCopying protocol. In a managed memory environment, this is instead of the retain message the object would otherwise receive. The object copy is then added to the returned array. 
> ```

使用 initWithArray:copyItems: 后，它会自动将 copyWithZone 发送到我的所有 List 对象，然后我就可以手动执行 copyWithZone on `list.things`。

# xml - JSON 是一种语言，如果不是，它会如何分类？

> ID：15488658
> 
> 赞同：13
> 
> 时间：2013-03-18T23:07:47.383
> 
> 标签：xml, json, programming-languages

考虑到**JSON（JavaScript Object Notation）**，**JSON**本身是一种语言，还是仅在另一种语言的上下文中定义？语言是指一种可能使用 JSON 传输/接收数据的编程语言。

有趣的是，**XML**不是图灵完备的，但它的名称中包含*语言*。也许这意味着为此目的对语言进行更广泛的定义？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T23:08:52.060

这是一种[数据交换](http://en.wikipedia.org/wiki/Electronic_data_interchange)格式。

> **JSON**（JavaScript Object Notation）是一种轻量级的数据交换格式。

[http://json.org](http://json.org)

> JavaScript Object Notation 是一种基于文本的开放标准，专为人类可读的数据交换而设计。
> 
> **格式类型：**数据交换

[http://en.wikipedia.org/wiki/Json](http://en.wikipedia.org/wiki/Json)

* * *

> 它是否仅在语言的上下文中定义

当然不是。完全可以编写使用 JSON 而不是 JavaScript 的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T23:10:32.280

JSON is a data format. It could be classified as a language, but not a programming language.

Its relationship to JavaScript is that it shares its syntax (more or less) with a subset of JavaScript literals. The [JSON specification](http://www.ietf.org/rfc/rfc4627.txt) defines it completely; it doesn't depend on references to the JavaScript specification.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-19T16:24:05.150

根据计算机科学，JSON 完成了语言的定义，因此**它绝对是一种语言**（与 XML 一样）。Is 基本上是由字母符号组成的一组可能的字符串。它也有句法规则。

但**它不是一种编程语言**。在编程方面，它是一种格式或符号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-26T19:02:41.883

我会将其归类为结构化数据格式，而不是语言。这篇[关于图灵完整性](https://en.wikipedia.org/wiki/Turing_completeness#Data_languages)的维基百科文章很好地总结了它：

> 图灵完备性的概念不适用于 XML、HTML、JSON、YAML 和 S 表达式等语言，因为**它们通常用于表示结构化数据，而不是描述计算**。这些有时被称为标记语言，或更恰当地称为“容器语言”或“数据描述语言”。

# bash - synclient 不适用于 udev 规则

> ID：15488659
> 
> 赞同：1
> 
> 时间：2013-03-18T23:07:56.023
> 
> 标签：bash, udev, touchpad

此脚本用于检测插入鼠标，并禁用/启用触摸板。

这是触发脚本的 udev 规则：

```
ENV{DEVTYPE}=="usb_device", ACTION=="add", RUN+="/usr/local/bin/enable-disable-touchpad-when-add-remove-mouse.sh" 
```

问题：当被 udev-rule 调用时，命令 synclient 不起作用。

有趣的是，当插入或移除鼠标时，脚本确实运行并写入日志（我可以tail -f 日志并看到它运行）。

当我从 shell 手动运行该脚本时，该脚本在任何用户（也是 root）帐户下都可以正常工作。这是脚本

```
#!/bin/bash
let x=`lsusb | grep -i logite | wc -l`+`lsusb | grep -i mouse | wc -l`
echo `id` >> /tmp/usblog2
if [ $x -gt 0 ]
    then 
        echo touch off >> /tmp/usblog2
        /usr/bin/synclient touchpadoff=1
    else 
        echo touch on >> /tmp/usblog2
        /usr/bin/synclient touchpadoff=0
fi 
```

关于为什么 synclient 不在 udev 下运行的任何猜测？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-30T00:26:44.277

您需要环境变量 DISPLAY 和 XAUTHORITY。在 X 终端中，它们被设置。

您可以在脚本或 udev 规则中设置它

[https://wiki.archlinux.org/index.php/Touchpad_Synaptics#Disable_touchpad_upon_external_mouse_detection](https://wiki.archlinux.org/index.php/Touchpad_Synaptics#Disable_touchpad_upon_external_mouse_detection)

# google-docs - 按下向上或向下键时，Google Docs 如何定位光标？

> ID：15488662
> 
> 赞同：0
> 
> 时间：2013-03-18T23:08:10.883
> 
> 标签：google-docs, rich-text-editor

与网络上的大多数富文本编辑器不同，Google 文档不使用 contenteditable，而是使用其 kix-editor。虽然在左/右按键上移动光标很简单，但当用户向上或向下按键时，它们如何定位光标？

例如，当一个段落是多行时，光标如何知道它的“上方”是什么？

或者在多个段落之间向上或向下移动，在它们之间有一个空行并且光标设法保存其水平定位的情况下，尽管空行迫使它一直向左移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:17:08.290

查看 Google Docs 中的 DOM，他们似乎做了自己的布局。也就是说，它们测量段落长度并将它们分成单独的 div。因此，在当前选择的 div“上方”的 div 中迭代不同范围的想法是一个有限问题，而不是潜在的无限问题（如果前一段非常长）。

# ruby - 可以从 Ruby 中的另一个类访问顶级方法吗？

> ID：15488664
> 
> 赞同：0
> 
> 时间：2013-03-18T23:08:26.370
> 
> 标签：ruby

如果我在 Object 类（定义为私有）中定义一个方法，我怎么可能从另一个类中调用它？我的意思是，当我从 Dog 类内部调用 say_hello 时，如果 say_hello 是顶级定义的方法，因此它是 Object 类的私有方法，如何解决？我知道 Object 类在所有类的方法查找中，但是如果该方法是私有的，它不应该是可访问的吗？

```
def say_hello
  p "Hello"
end
class Dog
  def test_hello
    say_hello
  end
end

prova = Dog.new
prova.test_hello 
```

我想对我的疑问的一个更简单的解释是：为什么我可以从孩子那里调用父母的私有方法？

```
class Animal
  private
  def prova
    p "hello"
  end
end
class Dog < Animal
  def test_hello
    prova
  end
end

prova = Dog.new
prova.test_hello 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:18:16.080

Remember `Dog` inherits from `Object`, giving it access to `Object`s methods. You can extend the Object class all you want.

See answer to: [How to extend class Object in Rails?](https://stackoverflow.com/questions/5847220/how-to-extend-class-object-in-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:11:31.907

> 但是如果该方法是私有的，它不应该是可访问的吗？

什么让你有那个想法？

私有方法只能使用隐式接收器调用。您*正在*使用隐式接收器调用它。因此，它应该可以工作……而且确实可以。

# r - 计算比率并将它们放入 R 中的矩阵中

> ID：15488666
> 
> 赞同：1
> 
> 时间：2013-03-18T23:08:28.803
> 
> 标签：r, matrix

我有一个类似于这个的表，并且想计算 A 列和 B 列之间的比率。例如：

```
 A    B     C     D    E     F
     [1,]  187  174   183   115  101   104
     [2,]  451  166   177   842  101   133
     [3,]  727  171   187 12803   98   134
     [4,] 1532  181   196   730   98   108
     [5,] 4139  188   214 20358  105   159
     [6,]  689  185   211  1633  110   162
     [7,] 1625  184   195  2283  109   114
     [8,]  771  181   190   904  105   110
     [9,]  950  177   190  1033  106   112
    [10,]  703  180   191   463  106   110
    [11,] 2052  178   188  2585  100   105
    [12,] 1161  178   187  2874   99   110
    [13,]  214  175   184   173   98   110
    [14,]  473  184   191   971  104   111
    [15,]  756  185   193 14743  107   114 
```

我想创建一个新矩阵，将所有这些先前的行作为新的行和列（15 行和 15 列）像这样（括号中的值是计算比率的占位符）：

```
 [,1]    [,2]     [,3]    [,4]    
 [1,]  (A1:B1) (A1:B2)  (A1:B3) (A1:B4) ...   
 [2,]  
 [3,]  
 [4,] 
 ... 
```

这可能不是最好的例子，但我希望它不会太混乱。要计算 A1:B1、A2:B2、A3:B3 的比率，我可以执行以下操作：

```
data.matrix(data["A"]/data["B"]) 
```

为所有人做这件事，我会做类似的事情：

```
data.matrix(data[1,]/data[1,1])
data.matrix(data[1,]/data[1,2])
... 
```

等等。这似乎需要做很多工作，也许有人知道更快更有效的方法。

# 编辑

我以为该`combn`功能会起作用，但后来我发现它不起作用。当我有一个 2 列矩阵时，例如：

```
 A       B
 [1,]  187   115
 [2,]  451   842
 [3,]  727 12803
 [4,] 1532   730
 [5,] 4139 20358
 [6,]  689  1633
 [7,] 1625  2283
 [8,]  771   904
 [9,]  950  1033
[10,]  703   463
[11,] 2052  2585
[12,] 1161  2874
[13,]  214   173
[14,]  473   971
[15,]  756 14743 
```

我使用该`combn`函数计算所有可能的比率（A1：B1，A1：B2，... A2：B1，A2：B2 ...）我只得到 A1 与 B 的所有值的结果。

```
> combn(ncol(data), 2, function(x) data[,x[1]]/data[,x[2]])
 [,1]
 [1,] 1.62608696
 [2,] 0.53562945
 [3,] 0.05678357
 [4,] 2.09863014
 [5,] 0.20331074
 [6,] 0.42192284
 [7,] 0.71178274
 [8,] 0.85287611
 [9,] 0.91965150
[10,] 1.51835853
[11,] 0.79381044
[12,] 0.40396660
[13,] 1.23699422
[14,] 0.48712667
[15,] 0.05127857 
```

或者也许我只是不理解这个`combn`功能，我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:43:32.333

您可以通过使用来实现您想要的，`expand.grid`功能如下`apply``matrix`

我假设你想要的是矩阵

```
A1/B1  A1/B2  A1/B3  ...
A2/B1  A2/B2  A2/B3  ...
...    ...    ...    ...
...    ...    ...    ... 
```

这是执行此操作的代码。评论中的解释

```
txt <- "A    B     C     D    E     F\n187  174   183   115  101   104\n451  166   177   842  101   133\n727  171   187 12803   98   134\n1532  181   196   730   98   108\n4139  188   214 20358  105   159\n689  185   211  1633  110   162\n1625  184   195  2283  109   114\n771  181   190   904  105   110\n950  177   190  1033  106   112\n703  180   191   463  106   110\n2052  178   188  2585  100   105\n1161  178   187  2874   99   110\n214  175   184   173   98   110\n473  184   191   971  104   111\n756  185   193 14743  107   114"

data <- as.matrix(read.table(textConnection(txt), header = TRUE))

# expand.grid : creates every combination of one element each from column A and
# B with elements of B repeated first 

# apply : calls function(x) { x[1]/x[2]) } for every combination outputted by 
# expand.grid 

# matrix : converts the result of apply into matrix. dimnames arguments sets 
# rownames and colnames for easy  verification for us

result <- matrix(apply(expand.grid(data[, "A"], data[, "B"]), 1, function(x) x[1]/x[2]), 
    nrow = nrow(data), dimnames = list(data[, "A"], data[, "B"]))

# note that we have set rownames for result to be values of A and colnames for
# result to be value of B
result
##            174       166       171       181        188       185       184
## 187   1.074713  1.126506  1.093567  1.033149  0.9946809  1.010811  1.016304
## 451   2.591954  2.716867  2.637427  2.491713  2.3989362  2.437838  2.451087
## 727   4.178161  4.379518  4.251462  4.016575  3.8670213  3.929730  3.951087
## 1532  8.804598  9.228916  8.959064  8.464088  8.1489362  8.281081  8.326087
## 4139 23.787356 24.933735 24.204678 22.867403 22.0159574 22.372973 22.494565
## 689   3.959770  4.150602  4.029240  3.806630  3.6648936  3.724324  3.744565
## 1625  9.339080  9.789157  9.502924  8.977901  8.6436170  8.783784  8.831522
## 771   4.431034  4.644578  4.508772  4.259669  4.1010638  4.167568  4.190217
## 950   5.459770  5.722892  5.555556  5.248619  5.0531915  5.135135  5.163043
## 703   4.040230  4.234940  4.111111  3.883978  3.7393617  3.800000  3.820652
## 2052 11.793103 12.361446 12.000000 11.337017 10.9148936 11.091892 11.152174
## 1161  6.672414  6.993976  6.789474  6.414365  6.1755319  6.275676  6.309783
## 214   1.229885  1.289157  1.251462  1.182320  1.1382979  1.156757  1.163043
## 473   2.718391  2.849398  2.766082  2.613260  2.5159574  2.556757  2.570652
## 756   4.344828  4.554217  4.421053  4.176796  4.0212766  4.086486  4.108696
##            181       177       180       178       178       175       184
## 187   1.033149  1.056497  1.038889  1.050562  1.050562  1.068571  1.016304
## 451   2.491713  2.548023  2.505556  2.533708  2.533708  2.577143  2.451087
## 727   4.016575  4.107345  4.038889  4.084270  4.084270  4.154286  3.951087
## 1532  8.464088  8.655367  8.511111  8.606742  8.606742  8.754286  8.326087
## 4139 22.867403 23.384181 22.994444 23.252809 23.252809 23.651429 22.494565
## 689   3.806630  3.892655  3.827778  3.870787  3.870787  3.937143  3.744565
## 1625  8.977901  9.180791  9.027778  9.129213  9.129213  9.285714  8.831522
## 771   4.259669  4.355932  4.283333  4.331461  4.331461  4.405714  4.190217
## 950   5.248619  5.367232  5.277778  5.337079  5.337079  5.428571  5.163043
## 703   3.883978  3.971751  3.905556  3.949438  3.949438  4.017143  3.820652
## 2052 11.337017 11.593220 11.400000 11.528090 11.528090 11.725714 11.152174
## 1161  6.414365  6.559322  6.450000  6.522472  6.522472  6.634286  6.309783
## 214   1.182320  1.209040  1.188889  1.202247  1.202247  1.222857  1.163043
## 473   2.613260  2.672316  2.627778  2.657303  2.657303  2.702857  2.570652
## 756   4.176796  4.271186  4.200000  4.247191  4.247191  4.320000  4.108696
##            185
## 187   1.010811
## 451   2.437838
## 727   3.929730
## 1532  8.281081
## 4139 22.372973
## 689   3.724324
## 1625  8.783784
## 771   4.167568
## 950   5.135135
## 703   3.800000
## 2052 11.091892
## 1161  6.275676
## 214   1.156757
## 473   2.556757
## 756   4.086486 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:12:42.613

**编辑：**我似乎误解了这个问题。答案更简单，使用`outer`：

```
# gives the same 15*15 matrix as geektrader's
outer(mm[,1], mm[,2], '/') 
```

* * *

*旧答案（不正确）：*

你应该使用`combn`：

```
# combn(ncol(mm), 2) gives you all possible combinations
#     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15]
# [1,]    1    1    1    1    1    2    2    2    2     3     3     3     4     4     5
# [2,]    2    3    4    5    6    3    4    5    6     4     5     6     5     6     6

# it also accepts a function argument. we can use it to divide 
# respective columns
mm.div <- combn(ncol(mm), 2, function(x) mm[,x[1]]/mm[,x[2]])

# set column names the matrix
colnames(mm.div) <- combn(colnames(mm), 2, paste, collapse="") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T02:40:32.393

我可能完全错过了这里的重点，但为什么不只使用几个 for 循环呢？我写了一个快速函数，然后你可以将这些对传递给。

例如：

```
A <- rnorm(15)
B <- rnorm(15)
data <- data.frame(A,B)

ratio <- function(input1, input2){
    out <- matrix(0, nrow=length(input1), ncol=length(input1))
    k <- 1
    for (i in 1:length(input1)){
        for (j in 1:length(input1)){
            out[k, j] <- input1[k] / input2[j]
        }
        k <- k + 1
    }
    return(out)
}

ratio(data$A, data$B) 
```

**编辑**

另一个想法。然后使用该函数来计算所有可能的比率对，您可以简单地添加另一个 for 循环，如下所示：

```
combs <- combn(1:4, 2)
out <- list()
for (i in 1:(length(combs)/2)){
    out[[i]] <- ratio(data[,combs[1,i]], data[,combs[2,i]])
} 
```

希望有帮助！

# node.js - 比较两个值的结果为 false 而不是 true

> ID：15488672
> 
> 赞同：1
> 
> 时间：2013-03-18T23:08:46.450
> 
> 标签：node.js, express, redis

我将 Node.js 与 Express.js 和 Redis 一起使用。我正在通过增加 redis 键来记录站点组件的正常运行时间。我想`uptimerecord:tracker`在当前正常运行时间>当前正常运行时间记录后更新密钥，但不知何故它没有更新它并评估 uptimeTracker > uptimeRecordTracker`false`即使它是真的。

有什么我想念的吗？

谢谢！

```
 db.get("uptime:tracker", function(err, uptimeTracker) {
      db.get("uptimerecord:tracker", function(err, uptimeRecordTracker) {
          console.log("[Stats] uptimeTracker: " + uptimeTracker)
          console.log("[Stats] uptimeRecordTracker: " + uptimeRecordTracker)
          console.log("[Stats] Compare: " + (uptimeTracker > uptimeRecordTracker))
          if(uptimeTracker > uptimeRecordTracker) {
              console.log("[Stats] Tracker Records updated")
              db.set('uptimerecord:tracker', uptimeTracker)
          }
      });
  }); 
```

控制台输出：

```
[Stats] uptimeTracker: 213
[Stats] uptimeRecordTracker: 99
[Stats] Compare: false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:23:01.880

实际上，您似乎在比较字符串而不是整数：

```
"213" > "99" == false 
```

尽管

```
213 > 99 == true 
```

在进行比较之前尝试将它们转换为整数：

```
parseInt(uptimeTracker) > parseInt(uptimeRecordTracker) 
```

# c# - 在 c# 中记录击键时键入特殊字符时显示双字符

> ID：15488682
> 
> 赞同：1
> 
> 时间：2013-03-18T23:09:50.720
> 
> 标签：c#, winforms, logging, character-encoding, keycode

我有一个应用程序可以记录用户按下的任何内容，但是当我按下特殊字符（如`´`with `a`, 来获取`á`）时，我得到`´´a`; 当我想得到同样的东西时`à`，我得到```a`了，所以所有特殊字符都输入两次，然后输入常规字符。

我一直在寻找，真的找不到任何东西。但我注意到问题出在`ToAscii`方法上，没有正确输入字符。

```
public string GetString(IntPtr lParam, int vCode)
{
    try
    {
        bool shift = Keys.Shift == Control.ModifierKeys || Console.CapsLock;

        string value = ""; 

        KeyboardHookStruct MyKeyboardHookStruct = 
            (KeyboardHookStruct)Marshal.PtrToStructure(
                lParam, typeof(KeyboardHookStruct));

        byte[] keyState = new byte[256];
        byte[] inBuffer = new byte[2];

        DllClass.GetKeyboardState(keyState);

        var ascii=
            DllClass.ToAscii(
                MyKeyboardHookStruct.vkCode, 
                MyKeyboardHookStruct.scanCode, 
                keyState, inBuffer, MyKeyboardHookStruct.flags
                );

        if (ascii == 1)
        {
            char key = (char)inBuffer[0];

            if ((shift) && Char.IsLetter(key))
                key = Char.ToUpper(key);

            value = key.ToString();
        }

        return value;
    }
    catch (Exception)
    {
        return "";
    }
} 
```

我错过了什么或做错了什么？所有其他字符都可以正常工作，但特殊字符以双字符形式出现。

* * *

**编辑：**

尝试使用`ToUnicode`。

```
[DllImport("USER32.DLL", CharSet = CharSet.Unicode)]
public static extern int ToUnicode(
    uint virtualKey, uint scanCode, byte[] keyStates, 
    [MarshalAs(UnmanagedType.LPArray)] [Out] char[] chars, 
    int charMaxCount, uint flags);

public string GetString(IntPtr lParam, int vCode)
{
    try
    {
        bool shift = Keys.Shift == Control.ModifierKeys || Console.CapsLock;

        string value = ""; 

        KeyboardHookStruct MyKeyboardHookStruct = 
            (KeyboardHookStruct)Marshal.PtrToStructure(
                lParam, typeof(KeyboardHookStruct));

        byte[] keyState = new byte[256];
        byte[] inBuffer = new byte[2];

        char[] chars = new char[2];

        DllClass.GetKeyboardState(keyState);

        int val = 0;

        val = ToUnicode(
                (uint)MyKeyboardHookStruct.vkCode, 
                (uint)MyKeyboardHookStruct.scanCode, 
                keyState, chars, chars.Length, 0
                );

        val = ToUnicode(
                (uint)MyKeyboardHookStruct.vkCode, 
                (uint)MyKeyboardHookStruct.scanCode, 
                keyState, chars, chars.Length, 0
                );

        if (val == 1)
        {
            char key = (char)chars[0];

            if ((shift) && Char.IsLetter(key))
                key = Char.ToUpper(key);

            value = key.ToString();
        }

        return value;
    }
    catch (Exception)
    {
        return "";
    }
} 
```

有人请帮助我，我真的需要弄清楚这一点`=/`。

* * *

**编辑：**

```
int val = -1;

if (IsDeadKey((uint)vCode))
{
    while (val == -1)
    {
        val = ToUnicode(
                (uint)MyKeyboardHookStruct.vkCode, 
                (uint)MyKeyboardHookStruct.scanCode, 
                keyState, chars, chars.Length, 0
                );
    }
}
else
    val = ToUnicode(
            (uint)MyKeyboardHookStruct.vkCode, 
            (uint)MyKeyboardHookStruct.scanCode, 
            keyState, chars, chars.Length, 0
            ); 
```

所以现在我尝试调用`ToAscii`or`ToUnicode`几次来刷新真实角色，但没有成功。我做错了吗？

就像 ASCII 一样，首先调用`´`I get `-1`，所以我再次调用它，然后我得到`1`; 然后我按like `a`，得到`á`，但后来我只得到`a`。同样的事情，如果我`ToUnicode`一个接一个地使用两次，我得到的只是`a`代替`á`，等等......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:34:11.107

> 但我注意到问题出在 ToAsciii 方法中，没有正确输入字符。

这正是我即将猜测的。我很感激你为我完成了腿部工作！:-)

问题是这些“特殊”字符**不是**ASCII 字符。也就是说，它们实际上是某种不属于 ASCII 字符集的花哨的 Unicode 字符。

当您尝试将它们转换为 ASCII 字符时，该函数可能会尽其所能，将构成单独字符的代码点分解`á`为单独的字符`´`和`a`.

显然这不是你想要的。您想将`á`其视为单个字符，因此您需要使用 Unicode。这不是一个真正的问题：Windows 在内部使用 Unicode 至少十年了。抛弃过时的[`ToAscii`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646316.aspx)功能；相反，您需要使用[`MapVirtualKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646306.aspx)或[`MapVirtualKeyEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646307.aspx)将通过低级键盘挂钩获得的虚拟键代码转换为字符值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T16:12:02.160

*   **`ToAscii`关于和的神话`ToUnicode`**

    在问题中，您提到您已经尝试过两者但`ToAscii`均未`ToUnicode`成功。我还搜索了一个相对的问题：

    [键盘钩子中的 ToAscii/ToUnicode 会破坏死键](https://stackoverflow.com/questions/1964614/toascii-tounicode-in-a-keyboard-hook-destroys-dead-keys)

    我不是说任何答案是对还是错。但是，我们可以考虑：

    *   一个（不是那么）棘手的游戏

        在这个游戏中，我一次给玩家一个随机翻转的 50 美分硬币。**如果谁收集了一对 50 美分硬币，一个是正面**，**另一个是**反面，可以挑战从我这里得到一美元钞票。

        如果一个人放弃挑战，那么谁能保留这 50 美分，然后游戏重新开始。如果谁尝试但没有收集到两个符合规则，那么我要求将我给的那些归还给我。

        **一个人怎么能从我这里得到一美元的钞票而不会丢失任何硬币？**

    也许是穿越时空..

* * *

基于 CodeProject上的 [ [Processing Global Mouse and Keyboard Hooks in C# ]](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

和我很老的答案：[C# 中的 Konami 代码](https://stackoverflow.com/questions/469798/konami-code-in-c-sharp/10271975#10271975)

为了回答你的问题，我做了一些修改。

*   **代码**

    ```
    namespace Gma.UserActivityMonitor {
        using System.Diagnostics;
        using System.Windows.Forms;

        using System.Collections.Generic;
        using System.Linq;

        partial class HookManager {
            private static int KeyboardHookProc(int nCode, Int32 wParam, IntPtr lParam) {
                // indicates if any of underlaing events set e.Handled flag
                bool handled=false;

                if(nCode>=0) {
                    // read structure KeyboardHookStruct at lParam
                    var MyKeyboardHookStruct=
                        (KeyboardHookStruct)Marshal.PtrToStructure(lParam, typeof(KeyboardHookStruct));

                    // raise KeyDown
                    if(s_KeyDown!=null&&(wParam==WM_KEYDOWN||wParam==WM_SYSKEYDOWN)) {
                        Keys keyData=(Keys)MyKeyboardHookStruct.VirtualKeyCode;
                        KeyEventArgs e=new KeyEventArgs(keyData);
                        s_KeyDown.Invoke(null, e);
                        handled=e.Handled;
                    }

                    // raise KeyPress
                    if(s_KeyPress!=null&&wParam==WM_KEYDOWN) {
                        var keyText=GetString(lParam, nCode, ref handled);

                        if(""!=keyText) {
                            var keyChar=keyText.First();
                            Debug.Print("keyText => {0}", keyText);

    #if false
                            if(AccentFormatter.Combination.Values.Contains(keyChar)) {
                                SendKeys.Send("\b"+keyText);
                                return -1;
                            }
    #endif
                        }
                    }

                    // raise KeyUp
                    if(s_KeyUp!=null&&(wParam==WM_KEYUP||wParam==WM_SYSKEYUP)) {
                        Keys keyData=(Keys)MyKeyboardHookStruct.VirtualKeyCode;
                        KeyEventArgs e=new KeyEventArgs(keyData);
                        s_KeyUp.Invoke(null, e);
                        handled=handled||e.Handled;
                    }
                }

                // if event handled in application do not handoff to other listeners
                if(handled)
                    return -1;

                // forward to other application
                return CallNextHookEx(s_KeyboardHookHandle, nCode, wParam, lParam);
            }

            public static String GetString(IntPtr lParam, int vCode, ref bool handled) {
                var MyKeyboardHookStruct=
                    (KeyboardHookStruct)Marshal.PtrToStructure(lParam, typeof(KeyboardHookStruct));

                bool isDownShift=((GetKeyState(VK_SHIFT)&0x80)==0x80?true:false);
                bool isDownCapslock=(GetKeyState(VK_CAPITAL)!=0?true:false);

                byte[] keyState=new byte[256];
                GetKeyboardState(keyState);
                byte[] inBuffer=new byte[2];

                var keyText="";

                var ascii=
                    ToAscii(
                        MyKeyboardHookStruct.VirtualKeyCode,
                        MyKeyboardHookStruct.ScanCode,
                        keyState, inBuffer, MyKeyboardHookStruct.Flags
                        );

                if(ascii==1) {
                    char key=(char)inBuffer[0];

                    if((isDownCapslock^isDownShift)&&Char.IsLetter(key))
                        key=Char.ToUpper(key);

                    KeyPressEventArgs e=new KeyPressEventArgs(key);
                    s_KeyPress.Invoke(null, e);
                    handled=handled||e.Handled;

                    keyText=new String(new[] { e.KeyChar });
                    var sequence=KeySequence.Captured(e.KeyChar);

                    if(null!=sequence)
                        keyText=sequence.ToString(AccentFormatter.Default);
                }

                return keyText;
            }
        }

        public class KeySequence {
            public String ToString(IFormatProvider provider) {
                return
                    null==provider
                        ?new String(Sequence.Select(x => (char)x).ToArray())
                        :String.Format(provider, "{0}", Sequence);
            }

            public override String ToString() {
                return this.ToString(default(IFormatProvider));
            }

            public bool Captures(int keyValue) {
                for(var i=Sequence.Length; i-->0; ) {
                    if(Sequence[i]!=keyValue) {
                        if(0==i)
                            Count=0;

                        continue;
                    }

                    if(Count!=i)
                        continue;

                    ++Count;
                    break;
                }

                var x=Sequence.Length==Count;
                Count=x?0:Count;
                return x;
            }

            public KeySequence(int[] newSequence) {
                Sequence=newSequence;
            }

            public static KeySequence Captured(int keyValue) {
                return m_List.FirstOrDefault(x => x.Captures(keyValue));
            }

            public int Count {
                private set;
                get;
            }

            public int[] Sequence {
                set;
                get;
            }

            static KeySequence() {
                m_List.AddRange(
                    from x in AccentFormatter.Combination.Keys
                    let intArray=x.Select(c => (int)c).ToArray()
                    select new KeySequence(intArray)
                    );
            }

            static readonly List<KeySequence> m_List=new List<KeySequence>();
        }

        public class AccentFormatter: IFormatProvider, ICustomFormatter {
            String ICustomFormatter.Format(String format, object arg, IFormatProvider formatProvider) {
                return GetAccent(new String((arg as int[]).Select(x => (char)x).ToArray()));
            }

            object IFormatProvider.GetFormat(Type formatType) {
                return typeof(ICustomFormatter)!=formatType?null:this;
            }

            public static String GetAccent(String input) {
                return
                    Combination.Keys.Contains(input, StringComparer.OrdinalIgnoreCase)
                        ?Combination[input].ToString()
                        :"";
            }

            static AccentFormatter() {
                AcuteSymbol=((char)0xb4).ToString();
                GraveSymbol=('`').ToString();

                var ae=(char)0xe6;
                var oe=(char)0xf8;
                AcuteCandidates="acegiklmnoprsuwyz".ToArray().Concat(new[] { ae, oe }).ToArray();
                GraveCandidates="aeinouwy".ToArray();

                var lowerAcuteAccents=(
                    new[] { 
                        0xe1, 0x107, 
                        0xe9, 0x1f5, 
                        0xed, 0x1e31, 0x13a, 0x1e3f, 0x144, 
                        0xf3, 0x1e55, 0x155, 0x15b, 
                        0xfa, 0x1e83, 0xfd, 0x17a, 
                        0x1fd, 0x1ff
                    }
                    ).Select(
                        (x, i) => new {
                            Key=AcuteSymbol+AcuteCandidates[i],
                            Value=(char)x
                        }
                        );

                var upperAcuteAccents=(
                    new[] { 
                        0xc1, 0x106, 
                        0xc9, 0x1f4, 
                        0xcd, 0x1e30, 0x139, 0x1e3e, 0x143, 
                        0xd3, 0x1e54, 0x154, 0x15a, 
                        0xda, 0x1e82, 0xdd, 0x179, 
                        0x1fc, 0x1fe
                    }
                    ).Select(
                        (x, i) => new {
                            Key=AcuteSymbol+char.ToUpper(AcuteCandidates[i]),
                            Value=(char)x
                        }
                        );

                var lowerGraveAccents=(
                    new[] { 0xe0, 0xe8, 0xec, 0x1f9, 0xf2, 0xf9, 0x1e81, 0x1ef3 }
                    ).Select(
                        (x, i) => new {
                            Key=GraveSymbol+GraveCandidates[i],
                            Value=(char)x
                        }
                        );

                var upperGraveAccents=(
                    new[] { 0xc0, 0xc8, 0xcc, 0x1f8, 0xd2, 0xd9, 0x1e80, 0x1ef2 }
                    ).Select(
                        (x, i) => new {
                            Key=GraveSymbol+char.ToUpper(GraveCandidates[i]),
                            Value=(char)x
                        }
                        );

                Combination=
                    lowerAcuteAccents
                        .Concat(upperAcuteAccents)
                        .Concat(lowerGraveAccents)
                        .Concat(upperGraveAccents)
                        .ToDictionary(x => x.Key, x => x.Value);
            }

            public static readonly Dictionary<String, char> Combination;
            public static readonly String AcuteSymbol, GraveSymbol;
            public static readonly char[] AcuteCandidates, GraveCandidates;
            public static readonly AccentFormatter Default=new AccentFormatter();
        }
    } 
    ```

    首先，使用从 CodeProject 下载的代码，找到`HookManager.Callbacks.cs`并**删除整个方法** `KeyboardHookProc`。

    然后您可以将上面的代码保存在一个新文件中，例如`HookManager.Modified.cs`并将其添加到项目中`Gma.UserActivityMonitor`，或者将其粘贴到`HookManager.Callbacks.cs`.

    记得设置`Gma.UserActivityMonitorDemo`为**启动项目**。将目标框架设置为 2.0，您可能希望设置为更高。

*   **输入→输出**

    ![Vmh1A.jpg](../Images/8364de98dc215c7b5ea55d10597f6c0e.png)

*   **关于重音**

    正如我搜索的那样，有两种一般口音，它们是[重音](http://en.wikipedia.org/wiki/Grave_accent)和[锐音](http://en.wikipedia.org/wiki/Acute_accent)。
    重音的变音符号是`´`，可能的字母是`áǽćéǵíḱĺḿńóǿṕŕśúẃýź`。
    重音的变音符号是`` `, and the possible letters are`àèìǹòùẁỳ`。

    它们都可以大写或小写，但我没有找到一种足够简单的方法在框架内置的类中使用它们。例如，我不能使用`ToUpper`or`ToLower`来获得与`Ǹ`and的相反情况`ǹ`，我什至尝试过`ToUpperInvariant`and `ToLowerInvariant`。因此，我选择在 中使用硬编码序列`AccentFormatter`，您可以将其更改为从文件中读取，或者自己实现另一个自定义格式化程序。

*   **十六进制表示的数组排列**

    在代码中，我将重音序列排列为：

    ```
    0xc1, 0x106,
    0xc9, 0x1f4,
    0xcd, 0x1e30, 0x139, 0x1e3e, 0x143,
    0xd3, 0x1e54, 0x154, 0x15a,
    0xda, 0x1e82, 0xdd, 0x179,
    0x1fc, 0x1fe

    ```

    这是：

    ```
    阿克
    ÉǴ
    ÍḰĹḾŃ
    ÓṔŔŚ
    ÚẂÝŹ
    ǼǾ

    ```

    `Ǽ`and`Ǿ`放在后面是因为`Æ`and在`Ø`ASCII（非扩展）中没有对应的字符。

    我更喜欢使用默认代码页将代码保存在 ANSI 中，因为我`CultureInfo`与字母表中的语言不同。您可能希望将它们更改为精确的字符以提高可读性。

*   **将密钥发送到活动应用程序**

    如果要将密钥发送到活动应用程序，请在代码中进行以下更改：

    改变

    ```
    #if false 
    ```

    到

    ```
    #if !false 
    ```

    在条件编译块内部，代码片段是

    ```
    if(AccentFormatter.Combination.Values.Contains(keyChar)) {
        SendKeys.Send("\b"+keyText);
        return -1;
    } 
    ```

    `or`一旦识别为特定组合，它会使用退格字符删除先前键入的 ` ´`。这里的退格是时间机器..

在这个演示之后，我想你会知道如何修改它们以合并到你的代码中。

# php - 可排序项 MySQL 结构

> ID：15488683
> 
> 赞同：0
> 
> 时间：2013-03-18T23:09:57.443
> 
> 标签：php, jquery, mysql

我有一个文件表中的项目列表，**根据用户如何定位记录**，哪种方式最实用？每个用户可能有数百条记录。也许有更好的方法来做到这一点，我已经把我的想法装进了盒子里？

**选项 1**：我有一张包含订单的桌子。我可以轻松地按顺序列排序，但是当我在前端添加新字段或重新排序时，我可能需要更新许多记录，*例如：如果有 50 个文件，将 file_id 1 更改为位置 50 ，可以依次重新编号每行的顺序，需要 50 次更新..*

```
table: file
file_id | name  | order
------------------------
1       | test  | 2
2       | other | 1 
```

**选项 2**：根据订单表组织文件表。这需要更多的工作和错误检查，而且难度更大。然而，我将使用 CSV 值更新一行并将它们转换为数组以对文件列进行排序。

```
table: file
file_id | name 
----------------------
1       | test
2       | other

table: order
file_order 
----------------------
2,1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:33:10.397

对于**选项 1**，您可以使用这些 SQL 请求：

*我`user_id`在您的`file`表格中添加了一个字段*

**将第 50 个文件设为第 3 位：**

```
UPDATE table SET order=3 WHERE id=50 AND user_id = xxx

UPDATE table SET order=order+1 WHERE id>3 AND id<50 AND user_id = xxx 
```

**使第 3 位成为第 50 位：**

```
UPDATE table SET order=50 WHERE id=3 AND user_id = xxx

UPDATE table SET order=order-1 WHERE id>3 AND id<50 AND user_id = xxx 
```

# android - Adding an EditText to jfeinstein sliding menu

> ID：15488687
> 
> 赞同：1
> 
> 时间：2013-03-18T23:10:27.823
> 
> 标签：android, android-edittext, slidingmenu

I am working on an android project and I am making use of jfeinstein sliding menu library, library can be located at [https://github.com/jfeinstein10/slidingmenu](https://github.com/jfeinstein10/slidingmenu).

I have got the library working fine and have amended my code to make it work with other components, not just TextViews, such as Switches. I am now trying to add an EditText to the menu so that the user can enter directly in the box without having to switch activities.

I have it so I have a called `MenuAdapter` which extends `ArrayAdapter`. This then has a series of constructors which, based on the constructor and what values are passed into, determine which control is added to the sliding menu. The `EditText` is being added to the sliding menu and the hint is being sent, and when I tap on the edit text the keyboard is displayed but if I type anything, its not shown in the EditText. However, oddly, if I long press on the edit text and click paste, I can view the content that is pasted so its just typing that's not working.

Below is the XML layout, each component is hidden using the visibility set to `gone` and then is set to be displayed dependent on the constructor that was used.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/row_icon"
        android:paddingLeft="25dp"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:padding="10dp"
        android:visibility="gone" />

    <TextView
        android:id="@+id/row_title"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:padding="10dp"
        android:text="Medium Text"
        android:textAppearance="@android:style/TextAppearance.Medium"
        android:visibility="gone"
        android:textColor="@color/White" />

    <Switch 
        android:id="@+id/row_switch"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:padding="10dp"
        android:visibility="gone"
        android:textColor="@color/White"/>

    <EditText 
        android:id="@+id/row_edittext"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:padding="10dp"
        android:visibility="gone"
        android:textColor="@android:color/white" />

</LinearLayout> 
```

Below is the code for how the `EditText` is being addd to the menu.

```
case EDITEXT:
    EditText editText = (EditText)convertView.findViewById(getItem(position).viewID);
    editText.setHint(getItem(position).hint);
        editText.setEnabled(true);
    editText.setVisibility(View.VISIBLE);
        break; 
```

Thanks for any help you can provide.

# c++ - VS2010 可以告诉我哪个头文件包含在声明中吗？

> ID：15488694
> 
> 赞同：2
> 
> 时间：2013-03-18T23:10:49.323
> 
> 标签：c++, c, visual-studio-2010, include

我在混合 C/C++ 项目中有一个头文件，称为它`A.h`，它使用在另一个头文件中声明的类型，例如`X.h`. `A.h`不`X.h`直接包含，但包含其他头文件，这些头文件本身包含*其他*头文件等，最终包含`X.h`.

我想知道其中包含的哪些头文件`A.h`间接负责从中提取此类型声明`X.h`，而无需自己手动递归检查头文件的整个层次结构。

Visual Studio 2010 可以显示这些信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:15:06.677

是的，有一个编译器选项可让您查看包含哪些标头以及何时包含。

它是`/showIncludes`，您可以在高级项目属性中找到它。

# image - Processing: transparent image over curves

> ID：15488697
> 
> 赞同：0
> 
> 时间：2013-03-18T23:11:15.933
> 
> 标签：image, png, jpeg, processing, transparent

Im new to Processing. I would like to put a .jpg or .png over curves and ellipses, so that they can see only where the image is transparent. My code is below. The problem with it is that the transparent area is not fully transparent, but transparent white and the not-transparent parts have also decreased opacity.

```
 PImage img;

    void setup() {
      size(300,500);
      frameRate(30); 
      strokeWeight(4);   
      img = loadImage("sziluettmeret.jpg"); 
    }

   void draw() {
        background(0, 50, 70);  
        stroke(0,70,90);
        noFill();
        beginShape();
        curveVertex(-100,  -100);
        curveVertex(10, 10);
        curveVertex(250,  250);
        curveVertex(300,  300);
        endShape();

       fill(255);
       ellipse(20 ,20,15,15);

       noFill();
       tint(255, 100);
       image(img, 0, 0);
    } 
```

* * *

UPDATE:

I have this in my code:

```
 loadPixels();
    for(int i=0; i < img.pixels.length; i++) {
    tmpColor = img.pixels[i];
    tmpRed = red(tmpColor);
    tmpGreen = blue(tmpColor);
    tmpBlue = green(tmpColor);
    tmpAlpha = 255 - ((tmpRed + tmpGreen + tmpBlue)/3);
    img.pixels[i] = color(2*tmpRed,tmpGreen/2,tmpBlue,0); 
    if(0xFFFFFF == tmpColor)

      }
     updatePixels(); 
```

The picture does not become transparent. (But it becomes purple, so the loop runs on every pixel for sure)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:44:32.333

tint() 不做绿屏。它将重新着色您的图像（如果您使用非中性颜色），并设置混合透明度，因此使用 tint(255,100)，您有效地为图像提供了（大约）0.39 的不透明度

如果你想做绿屏（或者在你的情况下，白屏），你想在加载图像时遍历图像的像素，然后在 r/g/b 为 255 时将不透明度设置为 0，有效地“去除”你所有的白色像素。

# python - 如何使用opencv在python中获取图像的dct

> ID：15488700
> 
> 赞同：3
> 
> 时间：2013-03-18T23:11:41.957
> 
> 标签：python, opencv, dct

我一直在试图找出一种获取图像 DCT 的方法。得到图像并进行一堆过滤后，我想计算 DCT。以下是代码片段：

```
imgcv1 = cv2.split(imgcv)[0] 
cv2.boxFilter(imgcv1, 0, (7,7), imgcv1, (-1,-1), False, cv2.BORDER_DEFAULT)
#resize image to 32x32
cv2.resize( imgcv1, (32, 32 ) ,imgcv1) 
```

我一直在尝试使用[此处](http://docs.opencv.org/2.4.3/modules/core/doc/operations_on_arrays.html?highlight=dct#cv.DCT)给出的描述，但没有成功。当我尝试类似：

```
dst = cv2.dct(imgcv1) 
```

我收到如下错误：

```
cv2.error: /build/buildd/opencv-2.3.1/modules/core/src/dxt.cpp:2247: error: (-215) type == CV_32FC1 || type == CV_64FC1 in function dct 
```

从错误中我可以理解的是，输入不是 32 位浮点数而是 8 位。我如何转换它并将其作为 32 位浮点数传递？我不确定这个问题。我会很感激你的帮助。如何获得 DCT？我对 openCV 和 python 很陌生。我在同一主题上搜索了其他 2/3 线程，但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:33:59.723

我找到了解决方案。正如我所说，我们也需要在 0 到 1 的范围内转换为浮点数。然后我们可以在计算 DCT 后将其转换回来：

```
imf = np.float32(imgcv1)/255.0  # float conversion/scale
dct = cv2.dct(imf)              # the dct
imgcv1 = np.uint8(dct*255.0)    # convert back to int 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-20T05:58:56.823

假设你的图像是灰度的，这个函数在计算 DCT 时效果很好。

```
import cv2 as cv2
import numpy as np

def doDct(inputMatrix):
    fltMatrix = np.float32(inputMatrix)/255.0
    fltDct = cv2.dct(fltMatrix)
    return np.uint8(fltMatrix * 255) 
```

# java - Spring 3 with Hibernate 4--unit test failure with No Session found for current thread

> ID：15488701
> 
> 赞同：3
> 
> 时间：2013-03-18T23:11:46.077
> 
> 标签：java, spring, hibernate, junit

I have used Spring and Hibernate for years, but this is my first project using Spring 3 and Hibernate 4.

I set up the Model class such:

```
@Entity
@Table(name = "DICTIONARY_ENTRY", uniqueConstraints = @UniqueConstraint(columnNames = {
        "DICTIONARY_UUID", "ANAGRAM", "WORD" }))
public class DictionaryEntry extends Pojo implements
        Comparable<DictionaryEntry> {
    @Column(name = "ANAGRAM", nullable = false)
    private String anagram;

    @Column(name = "WORD", nullable = false, unique = true)
    private String word;

    @Column(name = "DEFINITION", nullable = false)
    private String definition;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "DICTIONARY_UUID", referencedColumnName = "UUID", nullable=false)
    private Dictionary dictionary;

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "fromEntry")
    /*package*/ Set<CrossReference> fromReferences;

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "toEntry")
    /*package*/ Set<CrossReference> toReferences; 
```

Per the directions in the Spring manual, I then set up my DAO and inject in an instance of org.springframework.orm.hibernate4.LocalSessionFactoryBean. Then I call getSession() which is:

```
 /**
   * Get the current session for a hibernate query
   * @return the current session
   */
  protected Session getSession(){
    return sessionFactory.getCurrentSession();
  } 
```

I then run my unit test, inject in my session factory and run this method:

```
object = (T) getSession().save(object); 
```

Which throws:

```
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:980)
    at com.heavyweight.lexaholic.dao.hibernate.HibernateDAO.getSession(HibernateDAO.java:86)
    at com.heavyweight.lexaholic.dao.hibernate.HibernateDAO.create(HibernateDAO.java:59)
    at com.heavyweight.lexaholic.dao.hibernate.lexicon.DictionaryEntryHibernateDAOTest.testCRD(DictionaryEntryHibernateDAOTest.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:980)
    at com.heavyweight.lexaholic.dao.hibernate.HibernateDAO.getSession(HibernateDAO.java:86)
    at com.heavyweight.lexaholic.dao.hibernate.HibernateDAO.commit(HibernateDAO.java:41)
    at com.heavyweight.lexaholic.dao.hibernate.lexicon.DictionaryEntryHibernateDAOTest.tearDown(DictionaryEntryHibernateDAOTest.java:43)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:37)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

Here's the Spring configuration:

```
 <bean id="testDatabase" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName"><value>org.h2.Driver</value></property>
    <property name="url"><value>jdbc:h2:mem:test;DB_CLOSE_DELAY=-1</value></property>
    <property name="username" value="sa"/>
    <property name="password" value=""/>
  </bean>

  <bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="testDatabase"/>
  </bean>

  <bean id="testSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="testDatabase" />
    <property name="annotatedClasses">
      <list>
        <value>com.heavyweight.lexaholic.model.lexicon.CrossReference</value>
        <value>com.heavyweight.lexaholic.model.lexicon.Dictionary</value>
        <value>com.heavyweight.lexaholic.model.lexicon.DictionaryEntry</value>
      </list>
    </property>
    <property name="hibernateProperties">
      <value>
        hibernate.dialect=org.hibernate.dialect.H2Dialect
        hibernate.show_sql=false
        hibernate.jdbc.batch_size=0
        hibernate.hbm2ddl.auto=create-drop
        hibernate.use_sql_comments=false
    </value>
    </property>
  </bean>

  <bean id="dictionaryEntryDAO" class="com.heavyweight.lexaholic.dao.hibernate.lexicon.DictionaryEntryHibernateDAO" init-method="init">
    <property name="sessionFactory" ref="testSessionFactory" />
  </bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:09:24.290

有两点需要修改：

首先，您使用 Hibernate 进行持久化，因此您需要使用 HibernateTransactionManager 而不是 DataSourceTransactionManager。

```
<!-- Transaction Configuration For All Services (including Hibernate and MyBatis)-->
<bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<!-- Transaction: enable annotation-driven transaction -->
<!--Put @Transactional on service impl instead of service interface-->
<tx:annotation-driven transaction-manager="txManager" proxy-target-class="true"/> 
```

其次，您使用的是 Hibernate 4.x，因此您需要像这样配置***当前会话上下文类***：

```
 <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
            <prop key="hibernate.current_session_context_class">org.springframework.orm.hibernate4.SpringSessionContext</prop> 
```

有关信息，请参考[http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/](http://blog.springsource.org/2012/04/06/migrating-to-spring-3-1-and-hibernate-4-1/)

希望你通过

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T17:58:38.123

我在使用 hibernate 3.6 的 spring 3 应用程序中的 junit 测试中遇到了同样的问题。
当应用程序在应用服务器上运行时，会话由会话过滤器管理：

```
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
</filter> 
```

但是当运行 junit 时它没有被加载，你必须在你的测试中模拟它。
建议的一种解决方案是使用 @TransactionConfiguration 或扩展 AbstractTransactionalJUnit4SpringContextTests 但如果您有一个使用 @Service @Transactional 注释的服务层类并且您在测试中多次调用它，则它不起作用。

根据[这篇](http://bansihaudakari.wordpress.com/spring/integration-testing-with-junit-and-spring/)文章，我解决了以下问题：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:context.xml"})
public class JUnitTestBase extends AbstractJUnit4SpringContextTests {
    @Autowired
    protected Log logger;

    @Autowired
    protected SessionFactory sessionFactory;

    protected FlushMode flushMode = FlushMode.MANUAL;

    @Before
    public void setUp() throws Exception {
        Session session = getSession(this.sessionFactory);
        TransactionSynchronizationManager.bindResource(sessionFactory,new SessionHolder(session));
        logger.debug("Hibernate session is bound");
    }

    @After
    public void tearDown() throws Exception {
        SessionHolder sessionHolder = (SessionHolder) TransactionSynchronizationManager.unbindResource(sessionFactory);
        closeSession(sessionHolder.getSession(), sessionFactory);
        logger.debug("Hibernate session is closed");
    }

    protected void closeSession(Session session, SessionFactory sessionFactory) {
        SessionFactoryUtils.closeSession(session);
    }

    protected Session getSession(SessionFactory sessionFactory) throws DataAccessResourceFailureException {
        Session session = SessionFactoryUtils.getSession(sessionFactory, true);
        FlushMode flushMode = this.flushMode;
        if (flushMode != null) {
            session.setFlushMode(flushMode);
        }
        return session;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T00:37:04.873

我认为您的测试可能缺少 TransactionConfiguration 注释。尝试以下 -

```
@TransactionConfiguration(transactionManager="txManager") 
```

或者，您可以更改事务管理器的 bean 定义，如下所示 -

```
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
<property name="dataSource" ref="testDatabase"/> 
```

默认情况下，spring 会尝试查找“transactionManager”bean。

# jquery-ui - .load JQuery 对话框中的脚本

> ID：15488702
> 
> 赞同：0
> 
> 时间：2013-03-18T23:11:47.550
> 
> 标签：jquery-ui, jquery

您好我正在尝试加载脚本以使用 JQuery 在对话框中创建一些图表。

在我看来，当我使用 Chrome 工具检查它时，对话框中有部分准备就绪和等待：

```
<div id="mydialog">
    @Html.Partial("_fooChart", "Home")
</div> 
```

然后我有一个在点击时触发的对话框，对话框打开但它是空白的。如果您使用 Chrome 工具对其进行检查，您可以看到部分中的元素在那里。（元素不包含内容，该函数将根据 id 创建内容。）

这是对话框：

```
$(function () {

    $('#mydialog').dialog({
        autoOpen: false,
        height: 800,
        width: 800,
        resizable: false,
        open: function () {
            $('#mydialog').load($('#mydialog'), function () {
                fooChartLoad()
            });
        },
        title: 'Foo Chart',
        modal: true,
        buttons: {
            "Close": function () {
                $(this).dialog("close");
            }
        }
    });

    $('#my-button').click(function () {
        $('#mydialog').dialog("open")
    });
}); 
```

这是我要加载的脚本：

```
function fooChartLoad() {
    setTimeout(function () {
        createFooChart();
        $('#fooChartContainer').bind("kendo:skinChange", function (e) {
            createFooChart();
        });
    }, 200);
} 
```

基本上我试图弄清楚为什么当我在 JQuery 对话框中使用 open -> load 函数调用它时对话框没有加载 fooChartLoad 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:48:33.540

我曾尝试在 .load 调用将呈现数据视觉效果的脚本之前部分填充对话框 HTML，但是当我同时加载部分和脚本时，.load 看起来会更好，如下所示：

```
 open: function () {
        $('#fooChartDialog').load($('#fooChartDialog').data('url'), function () {
            fooChartLoad()
        }); 
```

# php - ReferenceError：未定义ajaxfunction

> ID：15488704
> 
> 赞同：0
> 
> 时间：2013-03-18T23:12:04.500
> 
> 标签：php, jquery, ajax

一段时间以来，我一直无法运行 ajax 脚本。

基本上，我需要用户从一个下拉框中选择一个选项，然后根据选择的内容，根据 MySQL 查询相应地填充第二个下拉框。

我的脚本看起来像

```
<script type="text/javascript">
    $(function(){
    $('select [name="front-size"]').change(function()
    {
        $.ajax({
            url: '../functions/process.php',
            type:'get',
            data:{'value' : $(this).val()}, 
            dataType:"html",
            success: function(data) {
                $("#sub").html(data);
            }
        });
    });
    });
</script> 
```

我的初始下拉框由 MySQL 查询填充，如下所示

```
<select name="front-size" onchange="ajaxfunction(this.value)">
     <?php
    $door_size = $db->prepare("SELECT DISTINCT door_size FROM doors WHERE door_model = '".$_SESSION['front_door']."'");
    $door_size->execute();
    while($row = $door_size->fetch(PDO::FETCH_ASSOC))
    {
        $size = $row['door_size'];
        echo '<option value="'.$size.'">'.$size.'</option>';
    }
    ?>
</select> 
```

第二个下拉框为空

```
<select name="front-finish" id="sub" onchange="ajaxfunction(this.value)">
</select> 
```

并且 process.php 应该根据之前选择的内容进行下一个查询（这可以独立工作）

```
<?php
    session_start();
    include ('config.php');

    $parent = $_GET['parent'];

    $update_option = $db->prepare("SELECT door_finish FROM doors WHERE door_model = '".$_SESSION['front_door']."' AND door_size = '".$parent."'");
    $update_option->execute();
    while($row = $update_option->fetch(PDO::FETCH_ASSOC))
    {
        $door_finishes = $row['door_finish'];
        echo '<option value="'.$door_finishes.'">'.$door_finishes.'</option>';

    }
?> 
```

在 Firebug 中，当我选择我的第一个下拉菜单时，会显示此错误并且我无法解决它。

```
ReferenceError: ajaxfunction is not defined

ajaxfunction(this.value) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:17:13.127

您正在调用 ajaxfunction，但尚未在代码中的任何位置定义它。

```
<script type="text/javascript">
    $(function(){
    $('select [name="front-size"]').change(function()
    {
        $.ajax({
            url: '../functions/process.php',
            type:'get',
            data:{'value' : $(this).val()}, 
            dataType:"html",
            success: function(data) {
                $("#sub").html(data);
            }
        });
    });
    });
function ajaxFunction(stuff){
//do ajax stuff here will fix the error 
}
</script> 
```

`onchange=ajaxfunction(this.value)`更广泛地说，当您的 ready 函数可以完成同样的事情时 ，为什么要在您的 html ( ) 中调用该内联？

```
<script type="text/javascript">
(function(){
$('select[name="first"]').change(function(){
//do stuff
});
$('select[name="second"]').change(function(){
//do other stuff
});
})
</script> 
```

会更好

编辑：检查这个 jsfiddle 的工作示例[http://jsfiddle.net/WF8CV/](http://jsfiddle.net/WF8CV/)

# ajax - 如何从 done() 中的 jquery .ajax 调用中获取 JSON 结果？

> ID：15488706
> 
> 赞同：2
> 
> 时间：2013-03-18T23:12:13.220
> 
> 标签：ajax, jquery

我正在尝试使用更新的 .done() 语法来调用 .ajax()，但我看不到如何将从服务器返回的数据获取到我的 .done() 函数中。这是我的代码：

```
function checkLink(element) {
    var resultImg = $(element).parent().parent().find("img");

    resultImg.attr("src", "/resources/img/ajaxLoad.gif");

    $.ajax({
        type: 'POST',
        url: '/services/Check.asmx/CheckThis',
        data: '{somedata: \'' + whatever + '\'}',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: onSuccess,
        error: onFailure
    }).done(function () { success2(resultImg); });
}

function success2(img) {
    img.attr('src', '/resources/img/buttons/check.gif');
}

function onSuccess(data) {
    // The response from the function is in the attribute d
    if (!data.d) {
        alert('failed');
    }
    else {
        alert('hurray!');
    }
} 
```

checkLink 是从一个简单的按钮按下调用的。onSuccess() 和 success2() 都很好。但是......我需要的是从onSuccess传递给success2的“数据”参数......或者，能够将“resultImg”传递给onSuccess（尽管我更喜欢使用.done而不是不推荐使用的方法）。看来我可以传递我自己的参数，也可以从 AJAX 调用访问 JSON 结果……但不能两者兼而有之。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:28:45.447

您可以关闭 resultImg 变量：

```
function checkLink(element) {
    var resultImg = $(element).parent().parent().find("img");

    resultImg.attr("src", "/resources/img/ajaxLoad.gif");

    $.ajax({
        type: 'POST',
        url: '/services/Check.asmx/CheckThis',
        data: '{somedata: \'' + whatever + '\'}',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: onSuccess,
        error: onFailure
    }).done(success2);

    function success2(data) {
        resultImg.attr('src', '/resources/img/buttons/check.gif');
        // do whatever with data
    }

    function onSuccess(data) {
        // The response from the function is in the attribute d
        if (!data.d) {
            alert('failed');
        }
        else {
            alert('hurray!');
        }
    }
} 
```

# java - localdatatime的jodatime间隔

> ID：15488710
> 
> 赞同：3
> 
> 时间：2013-03-18T23:12:41.647
> 
> 标签：java, jodatime

当我打字时，我自己想通了。我将为包括我自己在内的未来用户回答我自己的问题。

我希望能够`LocalDateTime`在一段时间内保存到对象，但似乎不允许。当我这样做时：

```
 LocalDateTime start = new LocalDateTime();

    LocalDateTime end = start.plusMinutes( 30 );

    Interval interval = new Interval( start, end ); 
```

我遇到编译问题。我认为是因为`LocalDateTime`不是`ReadableInstant`.

**有合适的解决方法吗？**

看起来这是可能的：

期间期间 = 新期间（开始，结束）；

但随后您将失去“getStart\End”方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:13:36.950

为了与您一起使用`Interval`，`LocalDateTime`您必须这样做：

```
Interval interval = new Interval( start.toDateTime(), end.toDateTime() ); 
```

结果时间使调试变得容易，因为时间将从本地时区转换，并且您知道您正在处理的时区。但是，在夏令时期间会出现问题。要解决该问题，将结果强制转换为`DateTimeZone.UTC`在这种情况下，您将丢失与时间相关的时区数据（如果您实际上是从 LocalDateTime 开始的，您通常不会关心这些数据，但请确保您始终使用它并且永远不要在`Interval`没有的情况下构建您的 s转换。

```
Interval interval = new Interval( 
  start.toDateTime(DateTimeZone.UTC), end.toDateTime(DateTimeZone.UTC) ); 
```

以下测试证明了这一点（假设您在 EST 时区）

```
@Test
public void testLocalDateTimeDST() {
    LocalDateTime dst_2017_03_12 = LocalDateTime.parse("2017-03-12T02:01:00");
    System.out.println(dst_2017_03_12);
    try {
        System.out.println(dst_2017_03_12.toDateTime());
        Assert.fail("Should've thrown an IllegalInstantException");
    } catch (IllegalInstantException e) {

    }
    System.out.println(dst_2017_03_12.toDateTime(DateTimeZone.UTC));
} 
```

# google-maps-api-3 - 在谷歌地图中突出陆海边界

> ID：15488713
> 
> 赞同：3
> 
> 时间：2013-03-18T23:12:54.540
> 
> 标签：google-maps-api-3

是否可以通过样式地图突出显示谷歌地图中的陆海边界？

我知道[这个问题](https://stackoverflow.com/questions/6502807/can-we-display-geographical-border-in-google-map-v3-as-we-do-in-google-earth-in)建议激活`administrative.land_parcel`. [但是，当我在Google Maps Wizard](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html) for *Land parcel*中激活笔画时，什么也没有出现。

我能做的最好的就是突出显示国家和省份的笔画，这只会激活陆地边界。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:41:05.640

您链接到的 Google 地图向导上的水景将突出显示所有水。有一个重量选项似乎会影响边框笔触宽度，但我看不到在向导中获得纯色透明填充的方法。

从[样式文档](https://developers.google.com/maps/documentation/javascript/styling)中，您似乎应该能够使用 water.geometry.stroke 和 water.geometry.fill 分别选择水及其边框，然后对它们进行样式设置以获得您正在寻找的任何边缘效果。您可能只需要调整笔触的权重和颜色属性，然后不理会填充。

需要注意的是，使用内置水景将选择湖泊以及海洋/海洋。这可能是也可能不是您想要的行为。

# qt - 如何在 QtQuick 2.0 上为矩形创建投影

> ID：15488714
> 
> 赞同：15
> 
> 时间：2013-03-18T23:13:10.647
> 
> 标签：qt, qml, qtquick2

如何`Rectangle`在 QtQuick 2.0 上为视觉项目绘制阴影？
我喜欢为我的主窗口画一个阴影（我有一个透明且没有装饰的窗口）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T14:18:51.383

作为裁剪阴影问题的解决方法，您可以将您`Rectangle`的`Item`, 附加边距考虑到模糊半径，并在该容器上应用阴影：

```
import QtQuick 2.0
import QtGraphicalEffects 1.0

Item {
    width: 320
    height: 240

    Item {
        id: container
        anchors.centerIn: parent
        width:  rect.width  + (2 * rectShadow.radius)
        height: rect.height + (2 * rectShadow.radius)
        visible: false

        Rectangle {
            id: rect
            width: 100
            height: 50
            color: "orange"
            radius: 7
            antialiasing: true
            border {
                width: 2
                color: "red"
            }
            anchors.centerIn: parent
        }
    }

    DropShadow {
        id: rectShadow
        anchors.fill: source
        cached: true
        horizontalOffset: 3
        verticalOffset: 3
        radius: 8.0
        samples: 16
        color: "#80000000"
        smooth: true
        source: container
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T01:39:24.490

只需[`DropShadow`](http://qt-project.org/doc/qt-5.0/qtgraphicaleffects/qml-qtgraphicaleffects1-dropshadow.html)从[`QtGraphicalEffects`](http://qt-project.org/doc/qt-5.0/qtgraphicaleffects/qmlmodule-qtgraphicaleffects1-qtgraphicaleffects-1-0.html)模块中使用。

一个完整的工作示例：

```
import QtQuick 2.0
import QtGraphicalEffects 1.0

Rectangle {
    width: 640
    height: 480
    color: "blue"

    Rectangle {
        id: rect
        anchors.centerIn: parent
        width: 100
        height: 100
        color: "red"
    }

    DropShadow {
        anchors.fill: rect
        cached: true
        horizontalOffset: 3
        verticalOffset: 3
        radius: 8.0
        samples: 16
        color: "#80000000"
        source: rect
    }
} 
```

请注意，您将看到许多类似这样的警告：

> file:///opt/Qt5.0.1/5.0.1/gcc_64/qml/QtGraphicalEffects/DropShadow.qml:391:5：QML SourceProxy：检测到属性“输出”的绑定循环 file:///opt/Qt5.0.1 /5.0.1/gcc_64/qml/QtGraphicalEffects/private/GaussianDirectionalBlur.qml:66:5：QML SourceProxy：检测到属性“输出”文件的绑定循环：///opt/Qt5.0.1/5.0.1/gcc_64/qml /QtGraphicalEffects/private/GaussianDirectionalBlur.qml:61:5：QML SourceProxy：检测到属性“输出”文件的绑定循环：///opt/Qt5.0.1/5.0.1/gcc_64/qml/QtGraphicalEffects/private/GaussianDirectionalBlur.qml ：66:5：QML SourceProxy：检测到属性“输出”文件的绑定循环：///opt/Qt5.0.1/5.0.1/gcc_64/qml/QtGraphicalEffects/private/GaussianDirectionalBlur.qml:61:5：QML SourceProxy：为属性“输出”文件检测到绑定循环：///opt/Qt5.0.1/5.0.1/gcc_64/qml/QtGraphicalEffects/private/GaussianGlow.qml:53:5：QML SourceProxy：检测到属性“输出”的绑定循环

这些警告是[QTBUG-28521](https://bugreports.qt-project.org/browse/QTBUG-28521)，已在 Qt 5.0.2 中修复（在撰写本文时尚未发布）。幸运的是，除了烦人的控制台输出之外，没有任何实际问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-19T00:09:12.970

有趣的问题......我一直在寻找更好的方法来做到这一点。这是我暂时为 QML 矩形实现投影效果的快速而肮脏的方法。

```
Rectangle{
    width: 500
    height: 500
    color: "dark grey"

    Rectangle {
        id: backgroundRect
        width: 200
        height: 150
        radius: 5
        anchors.centerIn: parent
        color: "red"

        Rectangle {
            id: dropShadowRect
            property real offset: Math.min(parent.width*0.025, parent.height*0.025)
            color: "purple"
            width: parent.width
            height: parent.height
            z: -1
            opacity: 0.75
            radius: backgroundRect.radius + 2
            anchors.left: parent.left
            anchors.leftMargin: -offset
            anchors.top: parent.top
            anchors.topMargin: offset
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-14T06:58:27.607

我尝试了上面的代码，它实际上添加了一个阴影，尽管在我的例子中，简单地添加另一个带有一点偏移的矩形给了我一个我更喜欢的效果。

```
Rectangle{

    id: rec_Shadow
    height:rect_withShadow.height
    width: rect_withShadow.width
    border.color: "#B3B3B3"
    color: "#C5C5C5"

    anchors{
            verticalCenter: rect_withShadow.verticalCenter
            horizontalCenter:  rect_withShadow.horizontalCenter
            horizontalCenterOffset: 5
            verticalCenterOffset: 5
        }
    radius: rect_withShadow.radius
} 
```

接下来，添加要在其上添加阴影的 Rectangle，并将其命名为 rect_withShadow

# xcode - Xcode iOS 6 - UITableView Null 使用情节提要导航返回

> ID：15488720
> 
> 赞同：0
> 
> 时间：2013-03-18T23:13:51.907
> 
> 标签：xcode, uitableview, ios6, uistoryboard, back

在我的 iOS 应用程序中，我使用的是在启动时正确填充的 UITableView，我使用以下命令导航到子视图：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
[self performSegueWithIdentifier:@"showSubView" sender:self];
} 
```

当子视图加载时，我可以访问 UITableView，但是当我使用导航栏上的后退按钮导航回来时，我想在表格对用户可见之前对其进行更新。我正在尝试更新 viewWillDisappear 中的表，但由于某种原因 myTableView 为 NULL：

```
- (void)viewWillDisappear:(BOOL)animated
{
[_myTableView reloadData];
} 
```

我在头文件中声明了 myTableView：

```
@property (weak, nonatomic) IBOutlet UITableView *myTableView; 
```

一切都正确引用，所有视图控制器都具有相同的类“视图控制器”，所以我不明白为什么这不起作用！有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:24:10.320

您应该使用`viewWillAppear`而不是`viewWillDisapear`. `viewDidDisappear`在视图不再可见之前不会被调用。

# javascript - Spring框架表单使用javascript提交

> ID：15488721
> 
> 赞同：0
> 
> 时间：2013-03-18T23:13:56.797
> 
> 标签：javascript, forms, submit

我想用 javascript 提交更新表单。我制作它们如下：

```
<form:form id="update" method="post" action="/profile/update/${uname}">
</form:form> 
```

我在顶部菜单下面添加了这个。

```
<button type="submit" class="save"></button> 
```

我想通过未包含在表单中的顶部菜单中的保存按钮提交此更新表单。如何在表单外使用 javascript 提交此表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:53:14.730

尝试从您的按钮调用此 submitForm() 函数。

```
<script type="text/javascript">
function submitForm()
{
  document.update.submit();
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:10:53.590

尝试在您的 javascript 方法中通过 id 获取表单元素，并将此方法添加`onclick`为您的按钮。

```
<script type="text/javascript">
function submitForm()
{
  document.getElementById("update").submit();
}
</script> 
```

像这样更改您的按钮标签

```
<button type="submit" class="save" onClick="submitForm();"></button> 
```

# java - 在 OSGi 容器中使用 Solrj

> ID：15488724
> 
> 赞同：0
> 
> 时间：2013-03-18T23:14:42.287
> 
> 标签：java, solr, osgi, solrj, apache-servicemix

我有一个 jax-rs 服务，我正在部署到 fuse esb 中，它使用 solrj 连接到 solr 服务器。我在项目中添加了以下 maven 依赖项：

```
<dependency>
    <artifactId>solr-solrj</artifactId>
    <groupId>org.apache.solr</groupId>
    <version>4.1.0</version>
    <type>jar</type>
    <scope>compile</scope>
</dependency> 
```

独立测试工作正常，连接到 solrj 工作正常。但是当我部署到 osgi 容器时，我得到 org.apache.noggit 包中的类的 ClassNotFoundException。我的问题是：

我应该为 solrj 使用什么 osgi 包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:21:19.733

如果您使用 Fuse ESB，则使用功能更容易安装。您可以通过以下方式安装 solr

```
features:install camel-solr 
```

您可以看到所有开箱即用的功能

```
features:list 
```

# xpath - xpath - 如何显示指定链接的锚文本

> ID：15488725
> 
> 赞同：2
> 
> 时间：2013-03-18T23:14:43.737
> 
> 标签：xpath

我想通过其域名搜索页面上的链接 - 可能使用`contains()`？然后只显示该链接的锚文本。

我已经能够使用所有 a 标签

```
//a[contains(text(), 'domain_name')] 
```

但无法**仅**检索锚文本。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:27:31.123

只需使用`text()`节点：

```
//a[contains(@href, 'domain_name')]/text() 
```

# asp.net-mvc - Chrome 是否可以直接在浏览器中为 Intranet 应用程序打开文件（PDF 等）？

> ID：15488727
> 
> 赞同：0
> 
> 时间：2013-03-18T23:14:46.320
> 
> 标签：asp.net-mvc, google-chrome, hyperlink

我的 ASP.Net MVC 应用程序是一个 Intranet 应用程序，在 HTML 中，我放置了一个指向存储在我们网络上的 PDF 文件的锚链接。如果您单击链接，Chrome 不会在浏览器中打开这些文件，但是如果您从网页上复制链接并创建一个新选项卡，将链接粘贴进去，它将打开。

现在，应用程序和文件都在同一个域中，所以我怎样才能让 PDF 在新选项卡中自动打开？我查看了各种 Chrome 扩展程序，但它们似乎不起作用。必须有一种方法可以使用 Chrome 在您的 Intranet 中打开基于本地/网络的文件，请不要说我必须求助于糟糕的 Internet Explorer！

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:37:11.973

您是否尝试过使用 HTML iframe 标签来显示 PDF？例子：

```
<iframe id="frameID" style="border:1px solid #666CCC" title="PDF in an i-Frame" src="PDFData.pdf" frameborder="1" scrolling="auto" height="1100" width="850" ></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-01T11:24:01.823

修复应该在您的 mvc 项目中。只需确保该操作返回 FileStreamResult 。例子：

```
return new FileStreamResult(new FileStream(filePath, FileMode.Open), MimeMapping.GetMimeMapping(filePath)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-22T08:26:34.303

对你来说已经过时了，但我最近在 ubuntu 上的 apache2 服务器上解决了这个问题。我相信这是客户端浏览器的安全问题 - 网页无法恶意打开客户端文件

什么解决方案

*   在我的网络服务器上安装网络共享驱动器
*   html指向已安装驱动器内的pdf
*   （在 Apache 上可选）使用 .htaccess 规则来防止文件夹索引（列出所有文件/文件夹）

因此网页打开的是自己的文件，而不是客户端；所以 firefox/chrome/et al 会允许这种情况发生

# php - strtotime 兼容性

> ID：15488732
> 
> 赞同：0
> 
> 时间：2013-03-18T23:15:15.660
> 
> 标签：php

好的，这与我提出的另一个问题有关，但正如我现在已经指出的问题一样，我认为在一个新问题上会更清楚。

我遇到的问题与 PHP 4.4 下的 strtotime 有关

我有一个较大的脚本在 PHP 4.4 下失败但在 PHP 5+ 下工作

为了检查是不是这样，我编写了以下内容并将其复制到两台服务器，一台运行 PHP 4.4，另一台运行 PHP 5.3。

```
<?php
  $my_time = '2013-03-18T21:38:58.000Z';
  $my_time = strtotime($my_time);
  echo $my_time;

?> 
```

PHP 4.4 下的输出是：-1

PHP 5.3 下的输出为：1363642738

有没有办法在 PHP 4.4 下获得与 5.3 相同的结果？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:18:41.800

`-1` was the failure code for PHP < 5.1\. This makes me think that PHP 4 can't parse that string.

This means you'll have to use a format both versions support. As a hack, you could do some string manipulation. If you can change the format of the string though, that's your best route. (Actually, your best route is to run the hell away from PHP 4.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:53:35.573

我没有安装 PHP 4 进行测试，但尝试从末尾删除 .000Z，PHP.net 上 strtotime 页面上的所有示例都没有那个位 PHP 4.4 可能不支持它。如果最终可行，您可以使用 substr($my_time, 0, 19) 解析任何时间戳

# html - 在 CSS 中设置边框的高度

> ID：15488736
> 
> 赞同：0
> 
> 时间：2013-03-18T23:15:26.437
> 
> 标签：html, css

我在列表上有一个左/右边框来创建分离效果。例如：`Link1`| `Link2`|`...`

我希望边框上的线条比对象的总高度短一点——可能是总高度的 50% 并且垂直居中。但是，它们是 100% 的高度。如何在边框上设置高度并将其垂直居中？

谢谢！

```
<ul class="nav pull-right" style="line-height:30px;">
    <li class="dropdown pull-right" style="line-height:20px;border-left: 1px solid #e3e3e3;border-right: 1px solid #e3e3e3;">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
           {% if notice_unseen_count %} <span class="badge badge-warning" style="line-height:15px;">{{ notice_unseen_count }}</span>{% else %}<span class="badge" style="line-height:15px;">0</span>{% endif %}
        </a>
        <ul class="dropdown-menu">
        <li><a href="{% url messages_inbox %}">Inbox</a></li>
            <li class="divider"></li>
            <li><a href="{% url invitations %}">Invitations</a></li>
            <li class="divider"></li>
            <li><a href="{% url notification_notices %}">All Notifications</a></li>
        </ul>
    </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:27:27.027

不要用`divider`-element 来破坏你的列表。尝试这个。`:after`您可以轻松调整使用伪元素创建的边框的大小/高度：

**演示**

[先试后买](http://jsfiddle.net/RLWEC/)

**HTML**

```
<ul>
    <li><a href="{% url messages_inbox %}">Inbox</a></li>
    <li><a href="{% url invitations %}">Invitations</a></li>
    <li><a href="{% url notification_notices %}">All Notifications</a></li>
</ul> 
```

**CSS**

```
ul {
    margin: 0;
    padding 0;
    list-style: none;
}

ul > li {
    float: left;
    height: 30px;
    line-height: 30px;
    background: red;
}

ul > li:after {
    content: '';
    display:block;
    float: right;
    height: 15px;
    width: 1px;
    background: #ccc;
    margin: 7px 10px 0 10px;
} 
```

**最后的“边界”**

要从最后一个元素中删除边框，这个 CSS 规则可以完成这项工作：

```
ul > li:last-child:after {
    content: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:25:14.117

长度将`border`始终 >= 元素的宽度/高度，因此您不能将其设置为 50% 或任何值。查看盒子模型：[http ://css-tricks.com/the-css-box-model/](http://css-tricks.com/the-css-box-model/)

如果您想设置这些分隔条的样式，建议使用背景图像。

```
.divider {
    background: transparent url('link/to/separator.gif') right center no-repeat;
    padding: auto 10px;
} 
```

这将在所有带有`divider`类的链接的右侧添加分隔图像。对于列表中的最后一项，您不需要应用该类。

# asp.net - 带有 httpOnlyCookies 的报告查看器

> ID：15488740
> 
> 赞同：1
> 
> 时间：2013-03-18T23:15:50.147
> 
> 标签：asp.net, reporting-services, ssrs-2008, reportviewer, httpcookie

有没有办法让我`<httpCookies httpOnlyCookies="true" requireSSL="true" />`在我的 web.config 中仍然能够使用 Report Viewer？

据我所知，Google/Bing 这似乎是不可能的，因为报告查看器必须尝试通过 javascript 访问 cookie。

到目前为止，我唯一的解决方法是将所有 report*.aspx 页面放在一个子目录中，并使用自己的配置进行设置`httpOnlyCookies=false`。

也许有某种方法可以告诉报表查看器不要使用 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:52:30.017

以防其他人随机搜索此内容，ReportViewer 与`httpOnlyCookies=true`.

我发现我的问题是没有通过 SSL 访问页面。希望我能早点注意到这个明显的错误。

# ruby - 将深度优先遍历节点列表转回Ruby中的树结构

> ID：15488744
> 
> 赞同：0
> 
> 时间：2013-03-18T23:16:02.667
> 
> 标签：ruby, algorithm

给定以下输入（来自 CSV 文件）：

```
input = [
  { :level => 0, :value => "a"   },
  { :level => 1, :value => "1"   },
  { :level => 1, :value => "2"   },
  { :level => 2, :value => "I"   },
  { :level => 2, :value => "II"  },
  { :level => 2, :value => "III" },
  { :level => 0, :value => "b"   },
  { :level => 0, :value => "c"   },
  { :level => 0, :value => "d"   },
  { :level => 1, :value => "3"   },
  { :level => 1, :value => "4"   },
] 
```

如何在“The Ruby Way”中将其转换为以下内容：

```
expected = [
  { :value => "a", :children => [ { :value => 1, :children => nil },
                                  { :value => 2, :children => [ { :value => "I", :children => nil },
                                                                { :value => "II", :children => nil },
                                                                { :value => "III", :children => nil } ] } ] },
  { :value => "b", :children => nil },
  { :value => "c", :children => nil },
  { :value => "d", :children => [ { :value => 3, :children => nil },
                                  { :value => 4, :children => nil } ] },
  ] 
```

?

**编辑：**

我对此的解决方案是回避问题，对其进行改造并让其他人解决它：

```
require 'yaml'
def linear_to_tree(a)
  yaml_lines = []

  a.each do |el|
    indent = " " * 4 * el[:level]
    yaml_lines << "#{indent}-"
    yaml_lines << "#{indent}  :value: #{(el[:value])}"
    yaml_lines << "#{indent}  :children:"
  end
  yaml_lines << ""  # without this, YAML.load complains
  yaml = yaml_lines.join("\n")
  # open("test_yaml.txt", "w"){|f| f.write(yaml)}
  YAML.load(yaml)
end 
```

但是必须有一个更优雅的方法来解决这个问题。

PS我还想看到这种转变的单线，只是看看它是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:47:17.333

对于没有子节点的节点，您应该使用空数组，空数组是集合的空对象。否则，您必须在分配它时和使用它时都在跳舞。

```
def transform(inputs)
  transform! inputs.dup
end

def transform!(inputs, output=[], current_level=0)
  while inputs.any?
    input = inputs.shift
    level, value = input.values_at :level, :value
    value = value.to_i if value =~ /\A\d+\z/
    if level < current_level
      inputs.unshift input
      break
    elsif level == current_level
      next_children = []
      output << {value: value, children: next_children}
      transform! inputs, next_children, current_level.next
    else
      raise "presumably should not have gotten here"
    end
  end
  output
end 
```

# codeblocks - Microsoft 语音 API 错误：.drectve `/DEFAULTLIB:"uuid.lib" /DEFAULTLIB:"uuid.lib" '

> ID：15488745
> 
> 赞同：0
> 
> 时间：2013-03-18T23:16:05.980
> 
> 标签：codeblocks, sapi

我遇到了 SAPI 的问题：在编译一些代码时，我在 CodeBlocks 中遇到了这个错误：

```
 ||Warning: .drectve `/DEFAULTLIB:"uuid.lib" /DEFAULTLIB:"uuid.lib" ' unrecognized|
obj\Debug\main.o||In function `main':|
C:\Documents and Settings\Mert\Desktop\yazi\okuproje\main.c|11|undefined reference to `CoInitialize@4'|
C:\Documents and Settings\Mert\Desktop\yazi\okuproje\main.c|14|undefined reference to `CoCreateInstance@20'|
C:\Documents and Settings\Mert\Desktop\yazi\okuproje\main.c|29|undefined reference to `CoUninitialize@0'|
||=== Build finished: 3 errors, 1 warnings ===| 
```

我的代码： http: [//pastebin.com/LCpCns2p](http://pastebin.com/LCpCns2p)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T17:24:50.497

您没有提及您正在使用哪个编译器与 CodeBlocks（或更重要的是，哪个链接器），但是，您遇到的错误是由缺少库引起的。

您需要添加对`uuid.lib`（以获取 的 GUID 定义`IID_ISpVoice`）和`ole32.lib`（以获取 、 和 的`CoInitialize`定义`CoCreateInstance`）的引用`CoUninitialize`。

# ruby-on-rails - 命名空间修改后表单损坏

> ID：15488747
> 
> 赞同：0
> 
> 时间：2013-03-18T23:16:29.663
> 
> 标签：ruby-on-rails, forms, namespaces

我最近[修改](https://stackoverflow.com/questions/14944847/devise-registration-controller-conflict-with-my-own-registrations-controller)了我的 Sessions.rb 控制器，因为它正在与 Devise Sessions 控制器争夺我的应用程序的至高无上的地位。似乎效果很好。我修改了我的 route.rb 如答案中所述。

现在我在默认（自脚手架以来没有太多变化）会话表单中遇到了几个问题。

```
config/routes.rb
  namespace :classroom do
    resources :registrations
    resources :sessions
end

classroom/sessions/index.html.erb
  <h1>Listing sessions</h1>

  <table>
    <tr>
      <th>Class size</th>
      <th>Course</th>
      <th>Description</th>
      <th>Location</th>
      <th>Name</th>
      <th>Price</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>

  <% @sessions.each do |session| %>
    <tr>
       <td><%= session.class_size %></td>
        <td><%= session.course_id %></td>
        <td><%= session.description %></td>
        <td><%= session.location_id %></td>
        <td><%= session.name %></td>
        <td><%= session.price %></td>
        <td><%= link_to 'Show', session %></td>
        <td><%= link_to 'Edit', edit_classroom_session_path(session) %></td>
        <td><%= link_to 'Destroy', session, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %>
  </table>
  <br />
  <%= link_to 'New Session', new_classroom_session_path %> 
```

以下链接已停止工作，并在加载 /sessions/index.html.erb 时给出“找不到有效的映射”错误消息

```
<td><%= link_to 'Show', session %></td>
td><%= link_to 'Edit', edit_classroom_session_path(session) %></td>
<td><%= link_to 'Destroy', session, method: :delete, data: { confirm: 'Are you sure?' } %></td> 
```

运行 rake 路由的输出：

```
classroom_sessions GET    /classroom/sessions(.:format)                     classroom/sessions#index
                        POST   /classroom/sessions(.:format)               classroom/sessions#create
  new_classroom_session GET    /classroom/sessions/new(.:format)           classroom/sessions#new
 edit_classroom_session GET    /classroom/sessions/:id/edit(.:format)      classroom/sessions#edit
      classroom_session GET    /classroom/sessions/:id(.:format)           classroom/sessions#show
                        PUT    /classroom/sessions/:id(.:format)           classroom/sessions#update
                        DELETE /classroom/sessions/:id(.:format)           classroom/sessions#destroy 
```

我不太确定如何修改链接的“显示”和“销毁”部分以使它们与新的命名空间一起使用。提前感谢您的帮助。非常，非常感谢。

谢谢，弗朗西斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:54:10.693

路线名称显示在路线表的第一列。您应该在链接助手上关注它。

他们应该是：

```
<td><%= link_to 'Show', classroom_session_path(session) %></td>
<td><%= link_to 'Edit', edit_classroom_session_path(session) %></td>
<td><%= link_to 'Destroy', classroom_session_path(session), method: :delete, data: { confirm: 'Are you sure?' } %></td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:56:07.733

尝试：

```
<td><%= link_to 'Show', classroom_session_path(session) %></td>
<td><%= link_to 'Edit', edit_classroom_session_path(session) %></td>
<td><%= link_to 'Destroy', classroom_session_path(session), method: :delete, data: { confirm: 'Are you sure?' } %></td> 
```

在此处查看一个不错的答案，如何处理带有命名空间路由的链接：

[rails 使用带有命名空间路由的 link_to](https://stackoverflow.com/questions/4269884/rails-using-link-to-with-namespaced-routes)

# javascript - iOS Phonegap 多行文本选择错误？

> ID：15488751
> 
> 赞同：11
> 
> 时间：2013-03-18T23:17:12.833
> 
> 标签：javascript, html, ios, css, cordova

我正在创建一个 Phonegap 应用程序，该应用程序要求用户选择`p`元素内的文本，然后“复制”修改它以满足我需要的文本。

但是，在`p`标签内选择文本时会出现问题。文本是从我的服务器中检索出来的，输出如下：

```
<p style="white-space:pre-wrap">Proin quis tortor orci. Etiam at risus et justo dignissim congue. Donec congue lacinia dui, a porttitor lectus condimentum laoreet. Nunc eu ullamcorper orci. Quisque eget odio ac lectus 

vestibulum faucibus eget in metus. In pellentesque faucibus vestibulum. Nulla at nulla justo, eget luctus tortor. Nulla facilisi. 

Duis aliquet egestas purus in blandit. Curabitur vulputate, ligula lacinia scelerisque tempor, lacus lacus ornare ante, ac egestas est urna sit amet arcu. Class aptent taciti sociosqu ad litora
</p> 
```

这将使文本在我不使用标签的情况下保留换行符`<br/>`，这些标签目前在我的 Javascript 中不起作用。

无论如何，当您尝试在此元素中选择文本时，会选择整个`p`元素。这是当您选择一个单词时发生的转换，然后移动边界以选择更多文本：

![在此处输入图像描述](../Images/49467f4bd81c76b1a82b1a450fcdefd3.png)

**注意：**第一个序列中的文字不同，因为我用不同的文字截取了屏幕截图，但效果还是一样的。

我无法为此提供 jsFiddle，因为它似乎只在 Phonegap 中复制，但我已经上传了我的源代码进行测试：[http ://cl.ly/2w0O1d3l3h17](http://cl.ly/2w0O1d3l3h17)

项目中没有 JS，但是 HTML 和 CSS 是这样的：

HTML：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1"/>
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Hello World</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="cordova-2.5.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
    </head>
    <body>
        <p class="text">Adobe Acrobat Test Page
        Acrobat Reader is properly installed.
        Click here to go back to information about using PDF.

        Guidance for Using PDF Documents

            California Home

            Search

            My CA

        This Site

        Guidance for Using PDF Documents

        Patient Advocate Home
        About the Office

        Some documents on this Web site are available in Adobe Acrobat Portable
        Document Format (PDF). These documents are identified by the
        symbol.
        q What is PDF?

        About the Patient
        Advocate

        q

        Download Adobe Acrobat Reader

        q

        Viewing Requirements

        A Message from the
        Patient Advocate

        q

        How to Use a PDF Document

        q

        Electronic Fill-in-the-Blank PDF Forms

            q

            Accessibility Tools for Visually Impaired Users

        State of California HMO
        Report Card
        Tips on Exercising Your
        HMO Rights
        HMO Terms Explained
        Mobile Information
        Center
        Schedule a Meeting or
        Speaking Engagement

        What is PDF?
        PDF is a portable document format developed by Adobe Systems. PDF
        documents are widely used on the Internet, including the this web server, for
        several reasons:
        q A PDF has the same appearance, colors, fonts, graphics and layout as
        the printed document.
        PDF files can be viewed in the browser, or saved for off-line use or
        printed.

        q

        The Acrobat Reader software is freely available for most operating
        systems.

        q

        Events and Event
        Calendar

        q

        While the Reader software can't edit (change) a PDF document, it can
        copy text from the document and perform word or text-string searches
        of the document.

        Photo Gallery

        Return to Top

        http://www.opa.ca.gov/support/pdf/ (1 of 3) [12/26/2001 6:11:06 AM]

        Guidance for Using PDF Documents

        Viewing Requirements
        To view PDF documents you need to use a PDF file viewer such as Acrobat
            Reader or Acrobat Exchange from Adobe Systems Incorporated.
            You may download and install Acrobat Reader free of charge.
            Please upgrade your browser and PDF viewer to the latest version to
        avoid any problems.
        Contact Us
        Customer Service
        Survey
        Help with PDF
        Conditions of Use
        Privacy Policy

        To check if you have Adobe Acrobat Reader installed, click here. If you are
        prompted to download hit cancel, this means that you do not have it installed.
        Click here to download Acrobat Reader now.
        If you experience any problems with PDF documents, upgrading your
        browser and/or PDF viewer to the latest version usually solves the problem.
        If after upgrading your software you are still unable to view PDF documents
        click here to view Adobe's help section. You may also send E-mail to the
        webmaster for further assistance regarding PDF or technical issues
        concerning this Web site.
        Return to Top
        How to Use a PDF Document
        q Download Adobe Acrobat Reader
        q
        q
        q
        q

        Install Acrobat Reader on your computer.
        Start your web browser and locate a PDF document on the Web.
        Click on the hypertext link for the PDF file.
        If you want to save the file for future reference, follow your browser's
        instructions for saving files from the Internet (often this requires
        pressing the shift key while clicking once on the filename).
        Return to Top

        Electronic Fill-In-The-Blank PDF Forms
        NOTE: Use of PDF fill-in-the-blank forms does NOT include online
        submittal.
        Some PDF forms are available in a fill-in-the-blank format. Users now have
        the option—on certain OPA forms—to complete the PDF forms
        electronically, instead of manually writing or typing the information on a hard
        copy version.
        The form can be completed in several easy steps.
        q The user opens the PDF form in Acrobat Reader—in the browser or as
        a standalone product. The user can also save the PDF form to their
        computer system and open the form in Acrobat Reader at a later time.
        q Once the form is open, the user clicks on the desired field and a
        http://www.opa.ca.gov/support/pdf/ (2 of 3) [12/26/2001 6:11:06 AM]

        Guidance for Using PDF Documents

        q

        q

        blinking cursor appears.
        After the information has been entered in the field, the user can tab to
        the next field.
        After all the fields have been completed, the user can print out the
        page.
        NOTE: If the cursor is blinking in a field, the information in that field
        will not be printed. Hit "Return" or "Enter" and the information will be
        captured for all fields.

        Users with Acrobat Reader only, the entered data cannot be saved for later
        use.
        For those who have the entire Acrobat suite—Acrobat, formerly called
        Acrobat Exchange—the data can either be saved separately or as a part of the
        form. If you save the data-only, it will take up less disk space and can be
        imported back into the same form at any time, provided the form has not
        changed. For more information on exporting and importing form data, check
        your manual.
        Return to Top
        Accessibility Tools for Visually Impaired Users
        Access.adobe.com provides a set of free tools that allow visually disabled
        users to read documents in Adobe PDF format. These tools convert PDF
        documents into either HTML or ASCII text, which can then be read by many
        screen-reading programs.

        © 2000 State of California. Gray Davis, Governor. Conditions of Use Privacy Policy

        http://www.opa.ca.gov/support/pdf/ (3 of 3) [12/26/2001 6:11:06 AM]

        </p>
    </body>
</html> 
```

CSS：

```
.text{
    white-space:pre-wrap;
    word-wrap: break-word;
    height:300px;
    overflow: scroll;
    -webkit-overflow-scrolling: touch;
    padding:10px;
    border:1px solid #000;
    background-color:#fff;
} 
```

* * *

我发现的一种潜在解决方案是`contenteditable="true"`在`p`元素上使用，但这有一些缺点：

1.  我不能允许在元素中创建更多标签
2.  我无法显示键盘

* * *

我发现的另一个解决方案是删除`pre`格式。但是，这会删除我希望保留的换行符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T09:53:26.733

您的问题是 iOS 的本机选择引擎选择单独的单词或整个元素。并且因为您有一个`<p>`元素保存整个文本，所以`<p>`当您尝试选择多行时，本机选择引擎会选择整个元素。您应该做的是“提示”您希望能够选择多行的选择引擎。例如，您可以通过将每一行文本放入单独的[块级元素](https://developer.mozilla.org/en-US/docs/HTML/Block-level_elements)中来实现这一点`<div>`。

这是一个示例脚本，它解析元素内的文本`<p class="text">`并将每行文本放入单独的元素中，通过使用[不间断空格](http://en.wikipedia.org/wiki/Non-breaking_space)字符实体`<div>`在每行的开头保留新行、空行和空格。

```
var textElm = document.getElementsByClassName("text")[0],
    text = textElm.textContent,
    html = "";

html = text.replace(/([\t ]*)(.*)\n/g, function(match, spaces, text) {
    if (spaces === "" && text === "") spaces = " "; // Make sure empty lines are rendered by adding single &nbsp; to <div>
    return "<div>" + Array(spaces.length + 1).join("&nbsp;") + text + "</div>"
});

textElm.innerHTML = html; 
```

![在此处输入图像描述](../Images/ebdb200568d8a54e13f7de46dc7a2175.png)

然后您也可以`white-space:pre-wrap;`从不再需要的 CSS 中删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:41:06.227

解决这个问题的方法是将整个内容放在`p`标签或任何东西中，然后将通常由 a 分隔的每个段落分开，`<br />`并使用看起来像这样的人造换行符：

```
<a class="space"></a> 
```

它可以是任何通常的内联元素，然后我们将给它以下 CSS：

```
.space{
    display:inline-block;
    height:15px;
    width:100%;
} 
```

# javascript - JavaScript 中的哪些对象具有 .length 属性？（又名为什么下划线 _.each 将我的函数对象视为数组？）

> ID：15488754
> 
> 赞同：4
> 
> 时间：2013-03-18T23:17:14.553
> 
> 标签：javascript, underscore.js

我一直认为只有`Array`对象才有`.length`属性。但是，话又说回来，我还看到提到“类似数组”的对象。我还没有研究过这个，现在看来我对 JS 中这个话题的无知可能会咬我的屁股。一个例子：

我有以下代码：

```
var View = function(options) {
  // code
};

_.extend(View, Backbone.Events, {

    make_children: function(parent) {
      // code
    }

}); 
```

稍后，我将它`View` `Function`与 Underscore 一起使用`_.each`，它决定这个函数对象是一个数组，因为它有一个`.length`属性：

```
// Code from Underscore.js's `_.each`:
} else if (obj.length === +obj.length) { // This is true
  for (var i = 0, l = obj.length; i < l; i++) { // **So, execution goes here**
    if (iterator.call(context, obj[i], i, obj) === breaker) return
  }
} else {
  for (var key in obj) {
    if (_.has(obj, key)) { // **Execution does __not__ go here**
      if (iterator.call(context, obj[key], key, obj) === breaker) return;
    }
  }
} 
```

这导致代码不起作用，因为整数索引`obj[i]`在哪里`i`实际上并没有在我的`obj` `View`. 准确地说，在上面的代码中，`obj[0]`is `undefined`while `obj.length === +obj.length`is`true`和`obj.length`is `1`。这里发生了什么？

**附录**

Underscore 的首席维护者在[https://github.com/documentcloud/underscore/pull/510](https://github.com/documentcloud/underscore/pull/510)上说：

> 简单地制作每个拒绝函数对象并没有真正的帮助。我们有意识地决定使用数值长度属性来检测类似数组的对象。
> 
> 相反，不要将函数对象传递给`each`.

**附录 2**

意识到由于我无法将函数对象传递给`_.each`，因此我可以将其“强制转换”为常规对象，如下所示：

```
var regular_obj = _.extend({}, View); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:18:52.343

> Which Objects in JavaScript have a `.length` property?

By oh-so-tautological definition, any object which has a `length` property.

[This happens to include functions.](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/length)

> `length` is a property of a function object, and indicates how many arguments the function expects, i.e. the number of formal parameters.

This is also array-like, because it has a `length`:

```
var foo = {
    bar: true,
    baz: 'quux',
    length: 42
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T23:35:10.463

这里的问题是`underscore.js`，很像，两者都在其函数中`jquery`使用该`.length`属性作为标志。`each`当该`length`属性存在时，该函数假定传递的参数可以使用普通的 for 循环进行迭代。这种逻辑背后的原因是期望在`length`定义属性时可以按**顺序**迭代参数，这就是使用 for 循环的原因。

滥用的结果`length`本质上是名称冲突，其中存在意外结果。我建议更改`length`为另一个同义词，例如`size`or `capacity`or`totalViews`等​​。

* * *

编辑

如果*没有其他替代品*可供您使用，并且您必须在其中保留长度，同时仍保留`_.each`'s 的功能，那么您可以稍微破解它。此插件适用于下划线版本 1.4.3 的缩小版

```
var s = Array.prototype.ForEach;
var r = {};
var myEach = function (n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length&&typeof(n[0])!="undefined"){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(_.has(n,a)&&t.call(e,n[a],a,n)===r)return};
_.each=myEach; 
```

这是一个演示：http: [//jsfiddle.net/Xa5qq/](http://jsfiddle.net/Xa5qq/)

基本上它的作用是`forEach`在`length`属性存在但`typeof(yourObject[0]) == "undefined"`.

# python - 在 python 中实现具有版本的 Web API

> ID：15488756
> 
> 赞同：1
> 
> 时间：2013-03-18T23:17:24.517
> 
> 标签：python, api, bottle

我正在用 python (3.x) 和瓶子实现一个简单的 web 应用程序。由于我想公开的 API 将来可能会发生变化，所以我想增加拥有不同版本的可能性。

[关于这个主题，这里](https://stackoverflow.com/a/6797508/204634)有一些有见地的答案，但除非 Web API 的版本控制被**证明**是一个坏主意，否则我还是想尝试一下。

关于我的应用程序：例如，虽然 1.0 版允许通过以下调用`POST /resource`：

```
@post('/resource')
post_item(name=item_name, value=item_value) 
```

未来的版本可能会：

```
@post('/resource')
post_item(name=item_name, value=item_value, fullname=longer_item_name) 
```

为简单起见，假设关键字参数 'name'、'value'、'fullname' 来自 FROM 数据字段：

```
<input name="name" type="text" /> 
```

现在，首先想到的是`version`在开头插入一个参数，类似于[IP](http://en.wikipedia.org/wiki/IPv4#Header)对其标头所做的事情：

```
post_item(v=1, name=item_name, value=item_value)
post_item(v=2, name=item_name, value=item_value, fullname=longer_item_name) 
```

不过，这似乎有点麻烦。有没有任何网络微框架库可以帮助解决这个问题？我是否超出了*微*框架的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T20:16:32.920

这绝对不是一个被证明的坏主意，更像是一个被证明的必要性。问题是对于处理它的最佳方式几乎没有达成一致（除了在基于 URI 的方法的高层上达成一致）。

Apigee 在这里有一些关于 API 版本控制策略的好文章：

[https://blog.apigee.com/taglist/versioning](https://blog.apigee.com/taglist/versioning)

以下是流行的 API 如何处理版本控制的一个很好的概述，以及更多讨论版本控制策略的资源：

[http://www.lexicalscope.com/blog/2012/03/12/how-are-rest-apis-versioned/](http://www.lexicalscope.com/blog/2012/03/12/how-are-rest-apis-versioned/)

# php - x-cart 经常性订单

> ID：15488759
> 
> 赞同：1
> 
> 时间：2013-03-18T23:17:40.633
> 
> 标签：php, x-cart

我一直在为 x-cart 中的客户开发自定义定期订单脚本，我面临的问题是当定期订单（cron）触发并循环安排的订单时，订单似乎没有重置为空，它尝试使用前一个订单的 ID。我以为我解决了这个问题，但现在它使用第一个订单的详细信息作为日常流程之后所有订单的客户详细信息。

```
$orderids = func_place_order(stripslashes($payment_method), 'I', $order_details, @$customer_notes, array(), array(), @$delivery_notes, TRUE); 
```

最后一个参数是一个自定义参数，这里是它的使用位置 ( `$bol_ignore`) - 在`func.order.php`

```
$check_order = func_query_first("SELECT orderid FROM $sql_tbl[orders] WHERE userid='" . addslashes(@$userinfo['id']) . "' AND '" . XC_TIME . "'-date < '$mintime'");

    if ($bol_ignore == FALSE) // @custom ***** code, may prevent the order from being broken?
        if ($check_order) {
            func_unlock('place_order');

            return FALSE;
        } 
```

在它检查支付是否成功后，我们`func_change_order_status()`分别调用更改状态。

我假设我必须遗漏一些东西才能 100% 清除 xcart 可能正在使用的订单、购物车和任何会话控制，然后才能处理下一个。我什`x_session_reset()`至在循环中使用以防万一，并在循环开始时重置所有变量。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:50:19.027

在浪费了几个小时和大量调试之后，我错过了一个需要的全局变量。由于客户没有登录，我们需要手动设置每个全局变量。

我从数据库中提取客户信息，但它被保存在不同的变量名中。

`$userinfo = func_userinfo($row['customerid'], 'C');`

以防万一将来有人想尝试此操作，您必须为每个循环设置这些，因为它们是订单/购物车发生所必需的

```
# Change the "session" types 
$login_type   = 'C';
$current_area = 'C';
$cart         = NULL; // Clear the Cart 
```

我知道这个问题很模糊，但我们认为它归结为 xcart 的内置函数接管。

喝杯新鲜咖啡后你会发现的事情。

# ruby-on-rails - Ruby On Rails“Hello World”页面不起作用

> ID：15488760
> 
> 赞同：0
> 
> 时间：2013-03-18T23:18:02.717
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我是 ruby​​ on rails 的新手，我有一个问题。当我盯着服务器“`rails server`并转到 `www.localhost:3000` 浏览器中的页面时，ROR 默认页面一切正常，但是....在制作控制器`rails generate controller demo index` 并转到页面 之后`www.localhost:3000/demo/index`，`localhost:3000/demo`- 同样 - 什么都没有，似乎页面不存在，只有一个空白页。我试图更改 index.html.erb 代码 `<h1>Hello World</h1>` - 没有更改。我想练习 ROR，但因为那个错误而不能。

工作环境：Windows 7 64位

数据库：MySQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:43:53.483

您需要有一个与您的操作相对应的视图。

如果您的控制器被调用`Demo`并且您的操作是`index`它应该是

```
# app/controllers/demo_controller.rb
class DemoController < ApplicationController

  def index
  end

end 
```

并且视图文件应该位于`app/views/demo/index.html.erb`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:29:43.380

**从您的 config/routes.rb 文件中**取消注释此行****

 **```
 match ':controller(/:action(/:id))(.:format)' 
```

**删除**index.html 文件`public/index.html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:32:44.633

首先`index.html`从公用文件夹中删除或重命名文件。

然后`root :to => 'demo#index'`在路由文件中设置。

然后使用此命令重新启动服务器。`rails s`默认情况下，您的服务器将在端口 3000 上运行。

现在只需键入`http://localhost:3000/`或`http://localhost:3000/demo/index`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:24:10.783

检查你的 routes.rb

```
root :to => 'demo#index' 
```

去`http://localhost:3000/`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T05:27:38.433

确保

views/layout/application.html.erb 有**yield**并且**index.html.erb**有一些文本

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T23:21:42.800

`index`动作是控制器的基本动作。试试：

```
http://localhost:3000/demo 
```

访问索引。

默认情况下，路由`/demo/index`是`show`id 为的操作`index`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-23T01:56:34.743

你删除了吗

```
app_root
--public
----index.html 
```

然而？

Rails 将首先在公共文件夹中查找匹配的文件，然后再从您的视图中构建一个。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-09T17:11:42.273

正如 João 所说，您还需要一个视图。此外，删除`public/index.html`并最终为您的控制器添加一个路由。

如果您已经创建了一个脚手架[Rails 入门指南](http://guides.rubyonrails.org/getting_started.html)，那么您已经有了适合您的路线。**

# iphone - How to link a ViewController in Xamarin MonoTouch

> ID：15488769
> 
> 赞同：0
> 
> 时间：2013-03-18T23:18:34.120
> 
> 标签：iphone, xamarin.ios, xamarin

I'm currently trialing MonoTouch and am impressed with it's capabilities thus far.

I'm wanting to create a library of iPhone apps that each will have the same User Logon screen. Therefore, I want to create the LogonScreen ViewController once and then share it amongst my projects.

I tried adding the files as a 'link' like you do with files in Visual studio but that seemed to create a disjoint between the Login.cs and the Login.designer.cs ie the Login.Designer.cs does not appear underneath the Login.cs in the Solution explorer.

The Login.cs has also lost the reference to the txtUsername textbox control I have in my xib.

Any ideas on how to solve this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:38:37.130

如果我正确理解您的问题，这将使您走上正轨：[Dimitris Tavlikos 回答](https://stackoverflow.com/questions/9857558/how-to-add-a-custom-view-to-a-xib-file-defined-view-in-monotouch?answertab=votes#tab-top)

这将生成一个自定义类，您可以将其抽象为应用程序的公共库。

-缺口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T23:25:14.677

建议您将共享视图添加到单独的项目（iOS 库项目）中，并将此项目添加为参考。您将不会遇到在每个未来项目中链接单独文件的问题，当您拥有更多共享视图时，这将变得越来越复杂。

您丢失对文本字段的引用的原因是因为它“丢失”了包含这些引用的 Designer.cs 文件。

# c# - WPF8/C# - 将数据绑定到网格

> ID：15488773
> 
> 赞同：2
> 
> 时间：2013-03-18T23:18:58.880
> 
> 标签：c#, windows-phone-8

我知道我发布了这个问题，但是接受了我最后一个问题的答案并阅读了这篇文章后，我意识到这不是我想要的答案。我再次发布了一些示例代码。

我想用集合中的数据填充网格（不是 DataGrid）。这是我所拥有的，但它不起作用。如果我删除集合并将 DataContext 设置为单个对象，它可以工作，但不能作为集合。

XAML

```
Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <StackPanel>
            <TextBlock Text="{Binding Path=StudentName}" />
        </StackPanel>
</Grid> 
```

MainPage.xaml.cs

```
public MainPage()
    {
        InitializeComponent();

        ObservableCollection<Student> ob = new ObservableCollection<Student>();

        ob.Add(new Student()
        {
            StudentName = "James Jeffery"
        });

        ob.Add(new Student()
        {
            StudentName = "Sian Ellis"
        });

        this.DataContext = ob;

        // Sample code to localize the ApplicationBar
        //BuildLocalizedApplicationBar();
    } 
```

这一直困扰着我几个小时。我似乎无法用集合填充网格。Google 上的每个示例都显示 ListViews 等。我想填充一个网格，并且只填充一个网格。

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:41:59.190

如另一个答案中所述，您需要一个`ItemsControl`：

```
<Window x:Class="MiscSamples.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid IsItemsHost="True" Rows="3" Columns="3"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBox Text="{Binding Name}" Margin="2"/>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

代码背后：

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = new List<Student>
                {
                    new Student() {Name = "James Jeffery"},
                    new Student() {Name = "Sian Ellis"},
                    new Student() {Name = "James Jeffery 2"},
                    new Student() {Name = "Sian Ellis 2"},
                    new Student() {Name = "James Jeffery 3"},
                    new Student() {Name = "Sian Ellis 3"},
                };
        }
    } 
```

输出：

![在此处输入图像描述](../Images/dc4097ebd9e2d08b81dbdae90d195a3e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:21:28.937

你不能。网格无法做到这一点。您需要使用 ItemsControl 或 ItemsControl 的后代。

试试这个教程：[http ://www.galasoft.ch/mydotnet/articles/article-2007041201.aspx](http://www.galasoft.ch/mydotnet/articles/article-2007041201.aspx)

# android - XML 中定义的扩展 LinearLayout 的子级不显示

> ID：15488776
> 
> 赞同：3
> 
> 时间：2013-03-18T23:19:07.363
> 
> 标签：android, android-linearlayout, android-custom-view

在我的项目中，我有很多重复相同模式的屏幕——它基本上是一个视图容器，由带有标题、图像和特定背景的线性布局组成。为了避免多次复制和粘贴相同的序列，我想我可以创建一个复合视图，扩展 LinearLayout 并在那里定义所有“样式”，然后在我的布局中使用该组件。我遵循了howto和examples并让我的复合视图起作用。但是，我见过的所有示例都使用如下结果视图：

```
<com.myproject.compound.myview
    ...some attrs...
/> 
```

即没有通过 XML 添加子级。我需要像这样使用它：

```
<com.myproject.compound.myview
    ...some attrs...>
    <TextView 
        ..../>
    ...other views...

</com.myproject.compound.myview> 
```

由于我正在扩展 LinearLayout，因此我希望“myview”标签也能像 LinearLayout 一样工作，但由于某些原因，我放在里面的项目不会被绘制。我需要特别做些什么来绘制内部视图吗？

我扩展的 LinearLayout 非常简单，我没有重写任何方法，只是在构造函数中调用 super 并像这样膨胀布局：

```
 LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.my_compound_view, this, true); 
```

更新：我想我会添加一个 XML 作为参考点：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:background="@drawable/bg"
android:padding="12dp">
<TextView 
    android:id="@+id/section_title"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="#FF0000AA"        />
<ImageView
    android:layout_width="match_parent"
    android:layout_height="2dp"
        android:src="@drawable/line"        />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T05:04:04.287

实际上找到了一个更优雅的解决方案。只需要在复合视图中使用合并标签而不是 LinearLayout。一切归结为：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    <TextView 
        android:id="@+id/section_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="HEADING"
        android:textColor="#FF0000AA"        />
    <ImageView
        android:layout_width="match_parent"
        android:layout_height="2dp"
        android:src="@drawable/line"        />
</merge> 
```

和

```
public class CompoundLayout extends LinearLayout{
    public CompoundLayout(Context context, AttributeSet attrs) {
        super(context, attrs);

        LayoutInflater inflater = (LayoutInflater) context
           .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.compound_layout, this, true);
    }
} 
```

主要布局：

```
<com.testbench.CompoundLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#FFFFDDEE"
    android:orientation="vertical">
    <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Inner text"
            android:layout_gravity="center_horizontal"/>        
</com.testbench.CompoundLayout> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T07:17:18.603

在阅读了 Android 源代码和示例之后，我想我明白了这一点。基本上就我而言，它是复合视图和自定义布局的混合体。“复合视图”部分负责布局和绘制指定“容器”的 XML 内容。但是该容器内的物品稍后会膨胀，并且在我的实现中它们没有被布置。一种方法是遵循自定义布局路径 - 我必须实现 onLayout() 和 onMeasure() 才能正确计算我的孩子（我在研究期间做了，它奏效了）。但是因为我真的不需要任何与 LinearLayout 不同的东西，而且我不想复制/粘贴它的代码（那些方法在那里很大），我只是决定重写方法 onFinishInflate() 并添加我的“容器视图“ 那里。

```
public class CompoundLayout extends LinearLayout{
View mView;
public CompoundLayout(Context context, AttributeSet attrs) {
    super(context, attrs);

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mView = inflater.inflate(R.layout.compound_layout, this, false);
}

@Override
public void onFinishInflate(){
    super.onFinishInflate();
    addView(mView, 0);
}
} 
```

然后在 Activity 的主布局中，我只需像使用 LinearLayout 一样使用我的自定义布局。它呈现相同的内容，但始终将那些 TextView 和 ImageView 放在顶部。

# java - 为什么我的 JFrame 中没有任何显示？

> ID：15488777
> 
> 赞同：1
> 
> 时间：2013-03-18T23:19:18.393
> 
> 标签：java, user-interface

为什么我的 GUI 没有显示任何按钮、标签或文本字段？

我想我已经设置好了，但是当我运行它时，只显示框架，没有任何内容出现。

```
package BasicGame;

import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;

public class Gui extends JFrame{
    private static final long serialVersionUID = 1L;
    private JLabel label;
    private JTextField textField;
    private JButton button;
    private buttonHandler bHandler;

    public Gui(){
        setTitle("Basic Gui");
        setResizable(false);
        setSize(500, 200);
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);    

        Container pane = getContentPane();
        pane.setLayout(null);

        button = new JButton("button");
        button.setBounds(50, 60, 50, 70);
        bHandler = new buttonHandler();
        button.addActionListener(bHandler);

        label = new JLabel("Hello", SwingConstants.RIGHT);
        label.setBounds(50, 60, 50, 70);

        textField = new JTextField(10);
        textField.setBounds(50, 60, 50, 70);

        pane.add(button);
        pane.add(label);
        pane.add(textField);

    }

    public class buttonHandler implements ActionListener{
        public void actionPerformed(ActionEvent e){
            System.exit(0);
        }
    }

    @SuppressWarnings("unused")
    public static void main(String[] args){
        Gui gui = new Gui();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:20:50.013

将您移动`setVisible()`到构造函数的末尾。您在设置后添加所有组件`JFrame`并且使可见，因此您看不到任何更改。

这应该向您展示`JFrame`所有组件：

```
public Gui(){
    setTitle("Basic Gui");
    setResizable(false);
    setSize(500, 200);
    setDefaultCloseOperation(EXIT_ON_CLOSE);    

    Container pane = getContentPane();
    pane.setLayout(null);

    button = new JButton("button");
    button.setBounds(50, 60, 50, 70);
    bHandler = new buttonHandler();
    button.addActionListener(bHandler);

    label = new JLabel("Hello", SwingConstants.RIGHT);
    label.setBounds(50, 60, 50, 70);

    textField = new JTextField(10);
    textField.setBounds(50, 60, 50, 70);

    pane.add(button);
    pane.add(label);
    pane.add(textField);
    setVisible(true); // Move it to here
} 
```

`setVisible`这是我移动语句并编译代码之前和之后框架的样子。

前：

![在此处输入图像描述](../Images/03149ce1ee542856c8fcce77c5dee0b3.png)

后：

![在此处输入图像描述](../Images/8a8055dabfb4190c6fafdd3a0fbc4387.png)

# javascript - Selecting a specific value from an array of objects in javascript

> ID：15488786
> 
> 赞同：2
> 
> 时间：2013-03-18T23:20:05.787
> 
> 标签：javascript, d3.js

I have data that is an array of objects like this:

```
var cars = [ {"year": 2003, "make": "Toyota", "model": "Tercel"}
           , {"year": 2009, "make": "Toyota", "model": "Tercel"}
           , {"year": 1999, "make": "Honda", "model": "Civic"}
           , {"year": 2002, "make": "Honda", "model": "Civic"}
           , {"year": 2004, "make": "Honda", "model": "Civic"}
           , {"year": 2007, "make": "Honda", "model": "Accord"}
           ...
           ] 
```

I want to pull out only the latest of each make and model, so that the selected array looks like:

```
var selectedCars = [ {"year": 2009, "make": "Toyota", "model": "Tercel"}
                   , {"year": 2004, "make": "Honda", "model": "Civic"}
                   , {"year": 2007, "make": "Honda", "model": "Accord"}
                   ] 
```

I know that I can filter, e.g.:

```
var selectedCars = _.max(cars, function(d) { return d.year; }) 
```

but that returns a single object out of the entire array. I've also tried looping through a list of makes and models and selected just the max year, but I can't make that work.

Another option would be to nest the data via something like d3.nest() with make and model as keys, but then I'm not sure how to get back to my `selectedCars` goal.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:31:08.277

查看[下划线的 groupBy](http://underscorejs.org/#groupBy)函数。您应该能够使用它并将其与`map`

```
_.map(
    _.groupBy(cars, function(car) {
        return car.make + car.model;
    }),
    function(years, makeModel) {
        return _.max(years, function(year) {
            return year.year;
        });
    }
) 
```

[JSFiddle](http://jsfiddle.net/ydakd/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:24:05.857

你可以做这样的事情

```
 var cars = [ {"year": 2003, "make": "Toyota", "model": "Tercel"}
       , {"year": 2009, "make": "Toyota", "model": "Tercel"}
       , {"year": 1999, "make": "Honda", "model": "Civic"}
       , {"year": 2002, "make": "Honda", "model": "Civic"}
       , {"year": 2004, "make": "Honda", "model": "Civic"}
       , {"year": 2007, "make": "Honda", "model": "Accord"}
       ]

var carGroup = _.groupBy(cars, 'make');
for (var property in carGroup) {
if (carGroup.hasOwnProperty(property)) {
    var selectedCar = _.max(carGroup[property], function(d) { return d.year; }) 
}
alert(JSON.stringify(selectedCar));
} 
```

[http://jsfiddle.net/btevfik/BEx5a/](http://jsfiddle.net/btevfik/BEx5a/)

# excel - 基于 Excel“地图”或表格在工作表之间复制和粘贴列？- 进一步的自动执行文件链接？

> ID：15488787
> 
> 赞同：0
> 
> 时间：2013-03-18T23:20:06.173
> 
> 标签：excel, automation, mapping, vba

我手动执行此操作已经太久了，我觉得必须有一种方法可以加快此过程。希望你们能帮助我。

目前我有一个用 VBA 宏编写的 excel 文件，该文件从一张表中复制和粘贴某些列并将它们粘贴到另一张表中。大约有 160 个这样的写法，每个都有大约 10 个复制/粘贴命令。（这个工作簿叫做`workbook A`）

目前我的方法包括打开`Workbook B`，将数据复制到工作表中`Workbook A`，从下拉列表中选择要运行的宏`Workbook A`，复制结果并将它们粘贴到“主文件”`Workbook C`中。对我来说，问题是地图（即数据的列位置）经常发生变化`Workbook B`。我维护一个看起来像这样的“主地图”文件：

```
Contract# | Purchaser | Price | Quantity | Total
------------------------------------------------
A         |  B        |  C    |  D       |  E
------------------------------------------------
G         |  D        |  C    |  A       |  B
------------------------------------------------ 
```

等（抱歉，如果这很混乱）

我想做的是让工作表根据 A：地图上的列（粘贴列）和 B：在该特定合同的行中表示的字母（这复制其中的列所代表的字母）。

这可能吗？

其次，如果是这样的话 - 通过指定每个文件的文件补丁来自动执行此操作的选项将非常出色（我对文件位置和名称有明确的分类）。这也可能吗？

*   添加了运行宏的精简示例。

宏很简单，这里有一个示例...

```
 Sub PA979()
 Application.ScreenUpdating = False

   'Retail $
    Sheets("VSR Input").Select
   Range("x1:x5004").Copy
   Sheets("Sheet1").Select
   Range("q4").Select
   ActiveSheet.Paste

   'PA $
    Sheets("VSR Input").Select
   Range("y1:y5004").Copy
   Sheets("Sheet1").Select
   Range("s4").Select
   ActiveSheet.Paste

'Q
    Sheets("VSR Input").Select
   Range("z1:z5004").Copy
   Sheets("Sheet1").Select
   Range("t4").Select
   ActiveSheet.Paste

   'Total $
    Sheets("VSR Input").Select
   Range("aa1:aa5004").Copy
   Sheets("Sheet1").Select
   Range("u4").Select
   ActiveSheet.Paste
   Range("A1").Select

    Dim ws As Worksheet
Set ws = Worksheets("Sheet1")

Dim usedRows As Long
usedRows = ws.Cells(ws.Rows.Count, "U").End(xlUp).Row
Application.ScreenUpdating = False

    Sheets("Sheet1").Select
Range("v3").Select
   ActiveCell.FormulaR1C1 = "PA#"
   ActiveCell.Offset(1, 0).Range("A1").Select
   ActiveCell = "979"
    ActiveCell.Select
    Selection.AutoFill Destination:=ActiveCell.Range(Cells(1, 1), Cells(usedRows - 3, 1)), Type:= _
        xlFillDefault
        Range("v4").Select
        Selection.Copy
    Range(Selection, Selection.End(xlDown)).Select
    ActiveSheet.Paste

    ActiveSheet.Range("A1").Select

End Sub ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:05:56.643

假设包含宏的工作簿有一个工作表“地图”，每个合同号都有一行：

A：合同号 B：输入工作簿的文件路径 CF：正在复制的每个列的源列字母

地图上的第 2 行在 cols CF 中具有目标列字母

已编译但未测试：

```
Option Explicit

Sub Tester()
    CopyData 979
End Sub

Sub CopyData(contractNumber)

Dim wbInput As Workbook
Dim wbDest As Workbook
Dim shtIn As Worksheet, shtDest As Worksheet, shtMap As Worksheet
Dim usedRows As Long
Dim arrDestCols, x As Integer, cFrom, cTo
Dim f As Range, mapRow As Range

    'has the column mapping info for each contract number
    Set shtMap = ThisWorkbook.Sheets("Map")
    'find the row for this contract number
    Set f = shtMap.Range("A3:A100").Find(contractNumber, , xlValues, xlWhole)
    If f Is Nothing Then
        MsgBox "contract number " & contractNumber & " not found!"
        Exit Sub
    Else
        Set mapRow = f.EntireRow
    End If

    'assumes input file path is in column B
    Set wbInput = Workbooks.Open(mapRow.Cells(2).Value)
    Set shtIn = wbInput.Sheets("VSR Input")

    Set wbDest = ThisWorkbook
    Set shtDest = wbDest.Sheets("Sheet1")

    Application.ScreenUpdating = False

    For x = 1 To 4
        ' "source" column letters are in columns C-F of the found row
        cFrom = mapRow.Cells(2 + x).Value
        ' "destination" column letters are in C2:F2 of the Map sheet
        cTo = shtMap.Rows(2).Cells(2 + x).Value
        shtIn.Range(cFrom & "1").Resize(5004, 1).Copy shtDest.Range(cTo & "4")
    Next x

    With shtDest
        usedRows = .Cells(.Rows.Count, "U").End(xlUp).Row
        .Range("v3").Value = contractNumber
        .Range("v4").Resize(usedRows - 3, 1).Value = contractNumber
    End With

    wbInput.Close False

End Sub 
```

# ruby-on-rails - 使用键创建 Ruby 数组

> ID：15488788
> 
> 赞同：0
> 
> 时间：2013-03-18T23:20:06.610
> 
> 标签：ruby-on-rails, ruby

好的，这很简单 101 但我显然做错了什么。你能告诉我如何创建一个如下所示的参数数组。

```
params = []
params[:geo_bounding_box][:top_left_lat] = @search.ne_lat
params[:geo_bounding_box][:top_left_lon] = @search.sw_lon
params[:geo_bounding_box][:bottom_right_lat] = @search.sw_lat
params[:geo_bounding_box][:bottom_right_lon] = @search.ne_lon 
```

希望您能给点建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:22:02.223

Ruby 哈希（不是数组）用`{}`not初始化`[]`。

```
params = {}
params[:geo_bounding_box][:top_left_lat] = @search.ne_lat
... 
```

除此之外，你在正确的轨道上！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:23:18.867

那是一个[哈希](http://www.ruby-doc.org/core-2.0/Hash.html)。

```
params = { 
  :geo_bounding_box => {
    :top_left_lat => @search.ne_lat,
    :top_left_lon => @search.sw_lon,
    :bottom_right_lat => @search.sw_lat,
    :bottom_right_lon => @search.me_lon
  }
} 
```

# android - 从资源中获取可绘制

> ID：15488791
> 
> 赞同：0
> 
> 时间：2013-03-18T23:20:30.923
> 
> 标签：android, android-drawable

我想通过我自己的属性从drawable文件夹中检索drawable而不是使用R.drawable

我怎样才能做到这一点？

```
public void updateLanguageImg(String img)
 {

      Bitmap myBitmap = BitmapFactory.decodeResource(this.getResources(),R.drawable.);
               // i want retrieve the img String here
      ImageView imageV = (ImageView) findViewById(R.id.imageLangue);
      imageV.setImageBitmap(myBitmap);

 } 
```

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:41:43.470

如果我正确理解了这个问题，并且根据方法中收到的参数，您想通过其字符串名称调用资源，所以如果这是正确的，这就是您必须做的：

"context.getResources().getIdentifier("bitmapName","folderName",this.class.getPackageName())"

其中：folderName 可以是（“raw”、“drawable”等...）

这将返回您已经拥有的 identifierNumber，您可以改用该方法，如下所示：

int id = context.getResources().getIdentifier("bitmapName","folderName",this.class.getPackageName();

位图 myBitmap = BitmapFactory.decodeResource(this.getResources(), id);

问候！

# macos - 苹果的颜色选择器可以从任何地方打开吗？

> ID：15488792
> 
> 赞同：3
> 
> 时间：2013-03-18T23:20:41.040
> 
> 标签：macos, osx-mountain-lion, color-picker

是否可以从操作系统中的任何位置（可能通过终端）打开本机颜色选择器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-11T01:44:12.557

打开 AppleScript 编辑器并在`choose color`里面创建一个新脚本，然后将脚本运行或导出为应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T23:53:03.563

当然可以。您创建一个 Apple 脚本，将其保存为应用程序，然后您就完成了。步行就[在这里](http://www.macosxtips.co.uk/index_files/category-utilities.php)

# d3.js - 使用 d3js 强制布局中封闭空间的错误计算区域

> ID：15488793
> 
> 赞同：1
> 
> 时间：2013-03-18T23:20:47.230
> 
> 标签：d3.js, force-layout

我有一个使用强制布局布局的图表。基本上我想为图中循环中包含的区域着色。这是我的[代码](http://jsfiddle.net/sayush/QK5Wq/)。

当力布局稳定时，我试图绘制循环。

```
force.on("tick",function(){
    // ... I update the position of nodes and the links

    if(force.alpha() < 0.006){
        force.stop();

        // I dont know if there's an easier way of doing this

        var xnodes = [];
        force.nodes().forEach(function(d){ 
        xnodes.push([d.x, d.y]);
        }); 

        // I tried creating a path and filling with with green
        vis.select("path.area")
            .data([xnodes])
            .enter().append("path")
            .style("fill", "#00ff00")
            .attr("class", "area")
            .attr("svg:d", d3.svg.area());
    }
}); 
```

当我在 chrome 中运行它时，调试器显示它确实创建了一个路径，但路径的区域是 0px x 0px。我真的很困惑。我什至尝试手动设置数组。我犯了同样的错误。

```
 var ynodes = [[352.3554660996234,304.3361316660001],[449.88953454311286,313.14153937680953],
[392.0458559272036,389.6656922220398],[352.3554660996234,304.3361316660001]];
    vis.select("path.area")
        .data([ynodes])
        .enter().append("path")
        .style("fill", "#00ff00")
        .attr("class", "area")
        .attr("svg:d", d3.svg.area()); 
```

但是，当我将此代码放在一个空白的 html 文件中（在包含必要的库之后）时，它可以正常工作。它确实绘制了一条路径并用绿色填充它。我在这里真的很困惑。任何帮助将非常感激。谢谢。

# ffmpeg - 在 ffmpeg 中并行化纯音频段的编码

> ID：15488795
> 
> 赞同：5
> 
> 时间：2013-03-18T23:20:53.403
> 
> 标签：ffmpeg, http-live-streaming, aac

我们希望减少从 wav 到 aac 的分段/编码的执行时间，使用 ffmpeg 分段并利用我们机器的所有内核生成 m3u8 播放列表，以进行 HTTP 实时流式传输。

在一个实验中，我让 ffmpeg 使用 libfdk_aac 直接将一个 wav 文件分段为 aac，但是它需要很长时间才能完成。

在第二个实验中，我让 ffmpeg 按原样（wav）分段一个 wav 文件，它非常快（在我们的机器上 < 1 秒），然后使用 GNU 并行执行 ffmpeg 再次将 wav 分段编码为 aac 并手动更改 . m3u8 文件而不更改其持续时间。这执行得更快，但是在流式传输输出音频时可以听到“静音”间隙。

我最初使用 mp3 尝试了第二种情况，结果还是一样的。虽然我读过 lame 在编码期间添加了填充（[http://scruss.com/blog/2012/02/21/generational-loss-in-mp3-re-encoding/](http://scruss.com/blog/2012/02/21/generational-loss-in-mp3-re-encoding/)），但这是否意味着 libfdk_aac 也添加编码期间填充？

也许这与这个问题有关：[如何在重建音频文件时对音频文件进行编码和分段，而不会在片段之间出现间隙（或音频弹出）？](https://stackoverflow.com/questions/14845977/how-can-i-encode-and-segment-audio-files-without-having-gaps-or-audio-pops-bet)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T06:16:20.107

根据[HLS Specification 的第 4 节](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-11#section-4)，我们有：

> 传输流或音频基本流段必须是该段末尾的编码媒体与前一个序列号的延续，其中连续序列中的值，例如时间戳和连续性计数器，继续不间断

“沉默”的差距是 99,99% 的时间与错误的计数器/不连续性有关。因为您写道您**手动更改了 .m3u8 文件而不更改其持续时间**，所以我推断您试图自己剪切音频。这是不可能的。

由于这些计数器，HLS 流无法进行可并行创建。他们必须遵循一个序列[ MPEG2-TS :-( ]。你最好得到一个更快的处理器。

# amazon-s3 - 从 S3 和 CloudFront 提供 Angular JS HTML 模板 - CORS 问题

> ID：15488800
> 
> 赞同：1
> 
> 时间：2013-03-18T23:21:23.310
> 
> 标签：amazon-s3, angularjs, jsonp, cors, amazon-cloudfront

我花了很长时间尝试从 Amazon CloudFront 提供静态 HTML 模板。

我可以`jQuery.get`在 Firefox 上为托管在 S3 上的 HTML 执行一个很好的操作。CloudFront 同样返回一个`OPTIONS 403 Forbidden`. 而且我无法在 Chrome 上为 S3 或 CloudFront 文件执行 ajax get。我认为 Angular 也有同样的问题。

我不知道它如何获取远程模板，但它返回的错误与`jQuery.get`. 根据亚马逊技术支持，我的 CORS 配置很好，正如我所说，我可以直接从 Firefox 上的 S3 获取文件，因此它适用于一种情况。

我的问题是，如何让它在所有浏览器、CloudFront 和 Angular templateUrl 中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T21:09:18.720

对于来自谷歌的人来说，多一点

事实证明，当 CORS 设置位于 S3 存储桶上时，Amazon 实际上确实通过 SSL 支持 CORS。当云端缓存 CORS 响应的标头时，不好的部分就出现了。如果您从可能混合 http 和 https 的源中获取，您将遇到来自 CloudFront 的允许源会显示 http 但您想要 https 的情况。这当然会导致浏览器崩溃。更糟糕的是，如果您接受压缩内容，CloudFront 将缓存略有不同的版本。因此，如果您尝试使用 curl 进行调试，您会认为一切正常，然后发现它不在浏览器中（尝试将 --compressed 传递给 curl）。

一，无可否认，解决方案只是放弃整个 CloudFront 并直接从 S3 存储桶提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:27:21.093

看起来亚马逊目前不支持 CloudFront 或 S3 上的 SSL 和 CORS，这是问题的症结所在。Limelight 或 Akamai 等其他 CDN 允许您将 SSL 证书添加到 CNAME 以规避该问题，但亚马逊不允许这样做，而且其他 CDN 成本过高。最好的选择似乎是从您自己的域中的服务器提供 html。这是 Angular 和 Rails 的解决方案：[https ://stackoverflow.com/a/12180837/256066](https://stackoverflow.com/a/12180837/256066)

# r - 为什么我的函数没有保存我的作业？

> ID：15488801
> 
> 赞同：-1
> 
> 时间：2013-03-18T23:21:25.423
> 
> 标签：r, function, random, subset, assign

```
f1 <- function(x) {
   zx1 <- sample(1:nrow(zone4[[x]]), nrow(zone4[[x]]), replace=F)
   zone4[[x]]$randnums <- zx1
}

f1(1)

## DOESN'T UPDATE zone4[[1]]

zx2 <- sample(1:nrow(zone4[[1]]), nrow(zone4[[1]]), replace=F)

zone4[[1]]$randnums <- zx2

## DOES UPDATE zone[[1]] 
```

如果我创建一个如上所示的函数 f1()，则对象 'zone4[[x]]' 不会更新。但是，如果我运行与上面相同的命令但明确声明“x”，如下所示，则对象“zone4[[x]]”被更新。为什么会这样？我想知道，因为我想运行代码的迭代。如果在上面的函数 f1() 的定义中我写了“names(zone4[[x]])”，那么我得到的输出告诉我该函数做了它应该做的，但是当再次查询时，zone[[ x]] 似乎没有改变。谢谢您的帮助。这个想法是为给定年份和另一个变量区域的数据集的每个子集制作随机数。数据集原本是一个单一的数据框，但是我使用split()函数将数据按照年份和区域分开，其中有4个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:28:26.403

`R`函数通常没有副作用（即改变全局对象中的东西）

这是一件好事（大多数时候我们不希望出现意外后果）

惯用的做法是将结果分配给一个新对象（可以同名覆盖原来的对象）

```
f1 <- function(x) {
  zx1 <- sample(1:nrow(zone4[[x]]), nrow(zone4[[x]]), replace=F)
  zone4[[x]]$randnums <- zx1
  # usually a good idea to return the complete object
  # especially when a replacement function (in your case `[[<-`)
  # is the last one called
  return(zone4)
}

zone4 <- f1(1) 
```

另一种方法是使用`data.table`

```
library(data.table)
zone4 <- lapply(zone4, as.data.table)

f1 <- function(x) {
  zone4[[x]][,randnums := sample(.N)]
  invisible(NULL)
} 
```

# php - PHP页面首先显示else $errormessage而不检查代码

> ID：15488804
> 
> 赞同：0
> 
> 时间：2013-03-18T23:21:45.327
> 
> 标签：php, html, mysql

我一直在尝试创建一个会员登录页面以链接到我的网站。我的 PHP 页面中有许多嵌套的 If，但是无论我尝试什么，我都会从第一个 else 语句中收到 $errormsg。

我设法改变这一点的唯一方法是在代码底部（表格之前）添加一个额外的空 else，当我单击 reigisterbtn 时，我要么收到第一个 else 结果，要么收到一个空白页，什么都不显示。

我错过了一些非常明显的东西吗？

```
 <?php

error_reporting (E_ALL ^ E_NOTICE);

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Register Page</title>
</head>

<body>
<?php

if ( $_POST ['registerbtn']) {
  $getuser =$_post ['user'];
  $getemail =$_post ['email'];
  $getpass =$_post ['pass'];
  $getretypepass =$_post ['retypepass'];

    if($getuser){

        if ($getemail){

            if ($getpass){

                if ($getretypepass){

                    if ($getpass === $getretypepass){

                        if ((strlen ($getemail) >=7 ) && (strstr ($getemail, "@")) && (strstr ($getemail, "."))) {
                                require ("./connect.php");

                                $query = mysql_query ("SELECT * FROM users WHERE username ='$getuser'");
                                $numrows = mysql_num_rows ($query);

                            if ($numrows == 0){

                                                $query = mysql_query ("SELECT * FROM users WHERE email ='$getemail'");
                                                $numrows = mysql_num_rows ($query);

                                if ($numrows == 0){

                                                            $password =md5 (md5 ("kjfiufj".$password."Fj56fj"));
                                                            $date("F d, Y");
                                                            $code = md5(rand ());

                                                            mysql_query ("INSERT INTO users VALUES (

                                                            '', '$getuser','$password','$getemail', '0', '$code', '$date')");

                                                                    $query = mysql_query ("SELECT * FROM users WHERE username='$getuser'");
                                                                    $numrows = mysql_num_rows ($query);

                                    if ($numrows == 1){

                                                                            $site = "http://www.andyhoole.co.uk";
                                                                            $webmaster = "AndyHoole <admin@andyhoole.co.uk>";
                                                                            $headers = "From: $webmaster";
                                                                            $subject = "Activate your account";
                                                                            $message = " Thank you for registering :) . Clink the link below to activate your account.\n ";
                                                                            $message .="$site/activate.php?user=$getuser&code=$code\n";
                                                                            $message .= "You must activate your account to log in.";

                                        if ( mail($getemail,$subject, $message, $headers) ){

                                                        $errormsg = "You have been registered, you must activate your account form the activation link sent to <b> $getemail </b>";
                                                        $getuser = "";
                                                        $getemail = "";

                                        }else
                                            $errormsg = "An error has occured. Your activation email was not sent.";

                                    }else
                                        $errormsg = " An error has occured and your account has not been created. ";

                                }else
                                    $errormsg = " This email address already exsists.";         

                            }else
                                $errormsg = " This username already exsists.";              

                                        mysql_close();

                        }else
                            $errormsg = "You must enter a valid email address to register.";

                     }else
                        $errormsg = "Your passwords did not match.";

                 }else
                    $errormsg = "You must retype your password to register.";

            }else
                $errormsg = "You must enter your password to register.";

        }else
            $errormsg = "You must enter your email address to register.";
    }else
        $errormsg = "You must enter your User name to register.";

}

$form = "<form action='./register.php' method='post'>

<table>
<tr>
    <td></td>
    <td><font color='red'>$errormsg</font></td>
</tr>

<tr>
    <td>Username:</td>
    <td><input type='text' name='user' value='$getuser' /></td>
</tr>
<tr>
    <td>Email:</td>
    <td><input type='text' name='email' value='$getemail' /></td>
</tr>
<tr>
    <td>Password:</td>
    <td><input type='password' name='pass' value='' /></td>
</tr>
<tr>
    <td>Retype:</td>
    <td><input type='password' name='retypepass' value='' /></td>
</tr>
<tr>
    <td></td>
    <td><input type='submit' name='registerbtn' value='Register' /></td>
</tr>

</table>
</form>";

echo $form;

?>

</body>

</html> 
```

谢谢你看:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:16:29.473

你也应该使用`$_POST`，而不是`$_post`因为 php 区分大小写！

# c++ - 中性文化列表

> ID：15488806
> 
> 赞同：0
> 
> 时间：2013-03-18T23:22:04.807
> 
> 标签：c++, winapi, globalization

如何在 C++/WinAPI 应用程序中列出中性文化？对于特定的文化 EnumSystemLocales 函数工作得相当好，但由于某种原因它没有列出中性文化。最后，我想要 LCID<=> 文化名称映射（例如 1045<=>pl-PL 和 21<=>pl）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:44:27.147

If all you want to do is to map between LCIDs and locale names, then [LCIDToLocaleName](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318698%28v=vs.85%29.aspx) with LOCALE_ALLOW_NEUTRAL_NAMES flag (Win 7 and above) and [LocaleNameToLCID](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318711%28v=vs.85%29.aspx) also with LOCALE_ALLOW_NEUTRAL_NAMES flag (Win 7 and above) is probably what you want. [EnumSystemLocalesEx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317829%28v=vs.85%29.aspx) with LOCALE_NEUTRALDATA flag (Win 7 and above) will list the neutral cultures.

# python - 如何解决 HDFStore 异常：找不到正确的原子类型

> ID：15488809
> 
> 赞同：6
> 
> 时间：2013-03-18T23:22:17.987
> 
> 标签：python, pandas, hdf5

我正在寻找一些关于哪些类型的数据场景会导致此异常的一般指导。我曾尝试以各种方式按摩我的数据，但无济于事。

我已经用谷歌搜索这个异常好几天了，经历了几个谷歌小组讨论，并没有想出调试的解决方案`HDFStore Exception: cannot find the correct atom type`。我正在阅读一个简单的混合数据类型的 csv 文件：

```
Int64Index: 401125 entries, 0 to 401124
Data columns:
SalesID                     401125  non-null values
SalePrice                   401125  non-null values
MachineID                   401125  non-null values
ModelID                     401125  non-null values
datasource                  401125  non-null values
auctioneerID                380989  non-null values
YearMade                    401125  non-null values
MachineHoursCurrentMeter    142765  non-null values
UsageBand                   401125  non-null values
saledate                    401125  non-null values
fiModelDesc                 401125  non-null values
Enclosure_Type              401125  non-null values
...................................................
Stick_Length                401125  non-null values
Thumb                       401125  non-null values
Pattern_Changer             401125  non-null values
Grouser_Type                401125  non-null values
Backhoe_Mounting            401125  non-null values
Blade_Type                  401125  non-null values
Travel_Controls             401125  non-null values
Differential_Type           401125  non-null values
Steering_Controls           401125  non-null values
dtypes: float64(2), int64(6), object(45) 
```

存储数据框的代码：

```
In [30]: store = pd.HDFStore('test0.h5','w')
In [31]: for chunk in pd.read_csv('Train.csv', chunksize=10000):
   ....:     store.append('df', chunk, index=False) 
```

请注意，如果我`store.put`在一次导入的数据帧上使用，我可以成功存储它，尽管速度很慢（我相信这是由于对象 dtypes 的酸洗，即使对象只是字符串数据）。

是否有可能引发此异常的 NaN 值注意事项？

例外：

```
Exception: cannot find the correct atom type -> [dtype->object,items->Index([Usa
geBand, saledate, fiModelDesc, fiBaseModel, fiSecondaryDesc, fiModelSeries, fiMo
delDescriptor, ProductSize, fiProductClassDesc, state, ProductGroup, ProductGrou
pDesc, Drive_System, Enclosure, Forks, Pad_Type, Ride_Control, Stick, Transmissi
on, Turbocharged, Blade_Extension, Blade_Width, Enclosure_Type, Engine_Horsepowe
r, Hydraulics, Pushblock, Ripper, Scarifier, Tip_Control, Tire_Size, Coupler, Co
upler_System, Grouser_Tracks, Hydraulics_Flow, Track_Type, Undercarriage_Pad_Wid
th, Stick_Length, Thumb, Pattern_Changer, Grouser_Type, Backhoe_Mounting, Blade_
Type, Travel_Controls, Differential_Type, Steering_Controls], dtype=object)] lis
t index out of range 
```

**更新 1**

Jeff 关于存储在数据框中的列表的提示使我研究了嵌入式逗号。 `pandas.read_csv`正在正确解析文件，并且双引号中确实有一些嵌入的逗号。所以这些字段本身不是 python 列表，但在文本中确实有逗号。这里有些例子：

```
3     Hydraulic Excavator, Track - 12.0 to 14.0 Metric Tons
6     Hydraulic Excavator, Track - 21.0 to 24.0 Metric Tons
8       Hydraulic Excavator, Track - 3.0 to 4.0 Metric Tons
11      Track Type Tractor, Dozer - 20.0 to 75.0 Horsepower
12    Hydraulic Excavator, Track - 19.0 to 21.0 Metric Tons 
```

但是，当我从 pd.read_csv 块中删除此列并附加到我的 HDFStore 时，我仍然得到相同的异常。当我尝试单独附加每一列时，我得到以下新异常：

```
In [6]: for chunk in pd.read_csv('Train.csv', header=0, chunksize=50000):
   ...:     for col in chunk.columns:
   ...:         store.append(col, chunk[col], data_columns=True)

Exception: cannot properly create the storer for: [_TABLE_MAP] [group->/SalesID
(Group) '',value-><class 'pandas.core.series.Series'>,table->True,append->True,k
wargs->{'data_columns': True}] 
```

我会继续排查问题。这是数百条记录的链接：

[https://docs.google.com/spreadsheet/ccc?key=0AutqBaUiJLbPdHFvaWNEMk5hZ1NTNlVyUVduYTZTeEE&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AutqBaUiJLbPdHFvaWNEMk5hZ1NTNlVyUVduYTZTeEE&usp=sharing)

**更新 2**

好的，我在工作计算机上尝试了以下操作并得到以下结果：

```
In [4]: store = pd.HDFStore('test0.h5','w')

In [5]: for chunk in pd.read_csv('Train.csv', chunksize=10000):
   ...:     store.append('df', chunk, index=False, data_columns=True)
   ...:

Exception: cannot find the correct atom type -> [dtype->object,items->Index([fiB
aseModel], dtype=object)] [fiBaseModel] column has a min_itemsize of [13] but it
emsize [9] is required! 
```

我想我知道这里发生了什么。如果我为第一个块取字段的最大长度，`fiBaseModel`我会得到：

```
In [16]: lens = df.fiBaseModel.apply(lambda x: len(x))

In [17]: max(lens[:10000])
Out[17]: 9 
```

第二块：

```
In [18]: max(lens[10001:20000])
Out[18]: 13 
```

因此，为该列创建了 9 字节的存储表，因为这是第一个块的最大值。当它在后续块中遇到更长的文本字段时，它会抛出异常。

我对此的建议是要么截断后续块中的数据（带有警告），要么允许用户指定列的最大存储空间并截断超过它的任何内容。也许熊猫已经可以做到这一点，我还没有时间真正深入研究`HDFStore`。

**更新 3**

尝试使用 pd.read_csv 导入 csv 数据集。我将所有对象的字典传递给 dtypes 参数。然后，我遍历文件并将每个块存储到 HDFStore 中，并为`min_itemsize`. 我得到以下异常：

```
AttributeError: 'NoneType' object has no attribute 'itemsize' 
```

我的简单代码：

```
store = pd.HDFStore('test0.h5','w')
objects = dict((col,'object') for col in header)

for chunk in pd.read_csv('Train.csv', header=0, dtype=objects,
    chunksize=10000, na_filter=False):
    store.append('df', chunk, min_itemsize=200) 
```

我试图调试和检查堆栈跟踪中的项目。这是表在异常时的样子：

```
ipdb> self.table
/df/table (Table(10000,)) ''
  description := {
  "index": Int64Col(shape=(), dflt=0, pos=0),
  "values_block_0": StringCol(itemsize=200, shape=(53,), dflt='', pos=1)}
  byteorder := 'little'
  chunkshape := (24,)
  autoIndex := True
  colindexes := {
    "index": Index(6, medium, shuffle, zlib(1)).is_CSI=False} 
```

**更新 4**

现在我试图迭代地确定我的数据框对象列中最长字符串的长度。我就是这样做的：

```
 def f(x):
        if x.dtype != 'object':
            return
        else:
            return len(max(x.fillna(''), key=lambda x: len(str(x))))

lengths = pd.DataFrame([chunk.apply(f) for chunk in pd.read_csv('Train.csv', chunksize=50000)])
lens = lengths.max().dropna().to_dict()

In [255]: lens
Out[255]:
{'Backhoe_Mounting': 19.0,
 'Blade_Extension': 19.0,
 'Blade_Type': 19.0,
 'Blade_Width': 19.0,
 'Coupler': 19.0,
 'Coupler_System': 19.0,
 'Differential_Type': 12.0
 ... etc... } 
```

一旦我有了最大字符串列长度的字典，我就尝试`append`通过`min_itemsize`参数将它传递给：

```
In [262]: for chunk in pd.read_csv('Train.csv', chunksize=50000, dtype=types):
   .....:     store.append('df', chunk, min_itemsize=lens)

Exception: cannot find the correct atom type -> [dtype->object,items->Index([Usa
geBand, saledate, fiModelDesc, fiBaseModel, fiSecondaryDesc, fiModelSeries, fiMo
delDescriptor, ProductSize, fiProductClassDesc, state, ProductGroup, ProductGrou
pDesc, Drive_System, Enclosure, Forks, Pad_Type, Ride_Control, Stick, Transmissi
on, Turbocharged, Blade_Extension, Blade_Width, Enclosure_Type, Engine_Horsepowe
r, Hydraulics, Pushblock, Ripper, Scarifier, Tip_Control, Tire_Size, Coupler, Co
upler_System, Grouser_Tracks, Hydraulics_Flow, Track_Type, Undercarriage_Pad_Wid
th, Stick_Length, Thumb, Pattern_Changer, Grouser_Type, Backhoe_Mounting, Blade_
Type, Travel_Controls, Differential_Type, Steering_Controls], dtype=object)] [va
lues_block_2] column has a min_itemsize of [64] but itemsize [58] is required! 
```

违规列传递了 64 的 min_itemsize，但异常状态需要 58 的 itemsize。这可能是一个错误？

在 [266] 中：pd。**版本** 输出 [266]: '0.11.0.dev-eb07c5a'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T12:17:25.207

您提供的链接可以很好地存储框架。逐列仅表示指定 data_columns=True。它将单独处理列并在有问题的列上提出。

诊断

```
store = pd.HDFStore('test0.h5','w')
In [31]: for chunk in pd.read_csv('Train.csv', chunksize=10000):
   ....:     store.append('df', chunk, index=False, data_columns=True) 
```

在生产中，您可能希望将 data_columns 限制为要查询的列（也可以是 None，在这种情况下，您只能查询索引/列）

更新：

你可能会遇到另一个问题。read_csv 根据在每个块中看到的内容转换 dtype，因此对于 10,000 的块大小，附加操作失败，因为块 1 和 2 在某些列中具有整数外观数据，然后在块 3 中您有一些 NaN，因此它是浮动的。要么预先指定 dtypes，使用更大的块大小，要么运行两次操作以保证块之间的 dtypes。

我已经更新了 pytables.py 在这种情况下有一个更有用的例外（以及告诉你列是否有不兼容的数据）

感谢您的报告！

# matlab - 如何从matlab中的大散点图中找到索引？

> ID：15488810
> 
> 赞同：4
> 
> 时间：2013-03-18T23:22:19.523
> 
> 标签：matlab, scatter-plot

我有一个包含大约 6000 个项目的散点图。

```
x = rand(1,6000);
y = rand(1,6000);
scatter(x,y) 
```

有没有办法使用 GUI 找到给定点的索引？（我们放大数据，并希望找到产生某个点的特定索引）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T23:43:35.953

这是一个非常简单的解决方案：

打开绘图 > 数据光标 > 编辑文本更新功能

将文本更新功能设置为：

```
function output_txt = myFunction(obj,event_obj)
% Display the position of the data cursor
% obj          Currently not used (empty)
% event_obj    Handle to event object
% output_txt   Data cursor text string (string or cell array of strings).

pos = get(event_obj,'Position');

% Import x and y
x = get(get(event_obj,'Target'),'XData');
y = get(get(event_obj,'Target'),'YData');

% Find index
index_x = find(x == pos(1));
index_y = find(y == pos(2));
index = intersect(index_x,index_y);

% Set output text
output_txt = {['X: ',num2str(pos(1),4)], ...
              ['Y: ',num2str(pos(2),4)], ...
              ['Index: ', num2str(index)]};

% If there is a Z-coordinate in the position, display it as well
if length(pos) > 2
    output_txt{end+1} = ['Z: ',num2str(pos(3),4)];
end 
```

结果：

![在此处输入图像描述](../Images/fb59fa92f676122f6470a2c4f2ffeba6.png)

仅供参考，如果您想以编程方式执行此操作，那么这里有一篇很好的[文章](http://undocumentedmatlab.com/blog/controlling-plot-data-tips/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:31:05.683

您可以使用 X、Y 位置来搜索点：

```
%export the cursor to the workspace

possibleXpositions =  find(x == cursor_info.Position(1));
possibleYPositions = find(y == cursor_info.Position(2));
position = intersect(possibleXpositions, possibleYPositions); 
```

position 将保存您选择的随机数的索引。

作为一个班轮：

```
position = intersect(find(x == cursor_info.Position(1)), find(y == cursor_info.Position(2))); 
```

# vi - Vi配色方案问题

> ID：15488811
> 
> 赞同：0
> 
> 时间：2013-03-18T23:22:26.630
> 
> 标签：vi

我无法显示任何配色方案。它们要么什么都不显示，要么只显示一种颜色（？？）

```
[root@monty ~]# ls -l .vim/colors/
total 16
-rwxrwxrwx 1 root root 9432 Nov 13  2009 bjornenki-colorscheme.vim
-rwxrwxrwx 1 root root 1459 Jan 22  2007 wombat.vim

[root@monty ~]# cat .vimrc
colorscheme bjornenki-colorscheme
syntax on 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:24:24.720

问题是我使用的是 vi 而不是 vim。

# java - 我的程序中的 NullPointerException

> ID：15488812
> 
> 赞同：0
> 
> 时间：2013-03-18T23:22:27.363
> 
> 标签：java, nullpointerexception

我正在尝试运行以下程序。但是，`NullPointerException`出现了一个。到目前为止，我已经在每一步都调试了我的代码。似乎在我实现`numA.add()`in main 之后出现了空指针异常。

主.java

```
public class Main {

    public static void main(String[]args){

        NumberSystem numA = new NumberSystem(new Number(20),new Number(10));
        numA.add();
        System.out.println(numA.getResult().toString());
    }
} 
```

NumberSystem.java

```
public class NumberSystem {

    private Number n1,n2,result;

    public NumberSystem(){
        n1 = new Number(0);
        n2 = new Number(0);
        result = new Number(0);
    }

    public NumberSystem(Number n1,Number n2){       
        n1 = new Number();
        n2 = new Number();
        result = new Number(0);
    }   

    public NumberSystem(NumberSystem n){
        n1 = new Number(n.n1);
        n2 = new Number(n.n2);
        result = new Number(n.result);
    }

    public Number getN1(){
        return n1 = new Number(n1.getNum());
    }

    public Number getN2(){
        return n2 = new Number(n2.getNum());
    }

    public Number getResult(){
        return result = new Number(result.getNum());
    }

    public void setN1(int n1Value){
        if (n1Value != 0) n1 = new Number(n1Value);
    }

    public void setN2(int n2Value){
        if (n2Value != 0) n2 = new Number(n2Value);
    }

    public void add(){
        result = new Number(n1.getNum() + n2.getNum());
    }

    public String toString(){
        return "" + n1.getNum();
    }

} 
```

数字.java

```
public class Number {

    private int num;

    public Number() {num = 0;}
    public Number(int numValue){
        if (numValue != 0) num = numValue;
    }

    public Number(Number anotherNum){
        num = anotherNum.getNum();
    }

    public int getNum(){
        return num;
    }

    public void setNum(int numValue){
        if (numValue != 0) num = numValue;
    }   

    public String toString(){
        return new String("" + num);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:30:26.817

你需要在你的构造函数中为类成员变量赋值`NumberSystem`。目前，您仅将这些值分配给传入的具有相同名称的本地值。

```
public NumberSystem(Number n1,Number n2){       
    n1 = new Number();  // Number assigned to local variable n1
    n2 = new Number();  // ditto for n2
    ... 
```

然后，这会导致`NPE`您尝试在此行上分配结果：

```
result = new Number(n1.getNum() + n2.getNum()); 
```

相反，您可以使用：

```
this.n1 = new Number();
this.n2 = new Number(); 
```

或使用传入的值（！？）：

```
this.n1 = n1;
this.n2 = n2; 
```

# html - 使用 Zurb Foundation 滚动经过时，粘性顶部栏使页面跳起来

> ID：15488813
> 
> 赞同：5
> 
> 时间：2013-03-18T23:22:28.467
> 
> 标签：html, navigation, zurb-foundation

我正在为我的网站使用 Zurb Foundation 4 框架。我想要一个导航栏，它位于标题下方，当您滚动过去时，该标题会粘在页面顶部。这很好用，除了当顶部栏粘在页面顶部时页面内容会向上跳跃约 45 像素。可以在此页面上看到效果，尽管这是一个不同的导航元素： http: [//foundation.zurb.com/docs/components/magellan.html](http://foundation.zurb.com/docs/components/magellan.html)

有什么办法可以解决这个问题，还是我必须改变我的网站设计来适应这个错误？

文档在这里： http: [//foundation.zurb.com/docs/components/top-bar.html](http://foundation.zurb.com/docs/components/top-bar.html)

```
<div class="contain-to-grid sticky">
 <nav class="top-bar">
      <ul class="title-area">
        <!-- Title Area -->
        <li class="name">
          <h1><a href="/">Top Bar</a></h1>
        </li>
        <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
      </ul>

      <section class="top-bar-section">
        <ul class="left">
          <li class="divider"></li>
          <li class="has-dropdown"><a href="/grid.php">Item 1</a>

            <ul class="dropdown">
              <li><label>Level One</label></li>
              <li><a href="#">Sub-item 1</a></li>
              <li><a href="#">Sub-item 2</a></li>
              <li class="divider"></li>
              <li><a href="#">Sub-item 3</a></li>
              <li class="has-dropdown"><a href="#">Sub-item 4</a>

                <ul class="dropdown">
                  <li><label>Level Two</label></li>
                  <li class="has-dropdown"><a href="#">Sub-item 1</a>

                    <ul class="dropdown">
                      <li><label>Level Three</label></li>
                      <li class="has-dropdown"><a href="#">Sub-item 1</a>

                        <ul class="dropdown">
                          <li><label>Level Four</label></li>
                          <li><a href="#">Sub-item 1</a></li>
                        </ul>
                      </li>
                      <li><a href="#">Sub-item 2</a></li>
                      <li><a href="#">Sub-item 3</a></li>
                      <li class="divider"></li>
                      <li><a href="#">Sub-item 4</a></li>
                    </ul>
                  </li>
                  <li><a href="#">Sub-item 2</a></li>
                  <li><a href="#">Sub-item 3</a></li>
                  <li><a href="#">Sub-item 4</a>
                </ul>
              </li>
              <li><a href="#">Sub-item 5</a></li>
            </ul>
          </li>
          <li class="divider"></li>
        </ul>
        <!-- Right Nav Section -->
        <ul class="right">
          <li class="divider hide-for-small"></li>
          <li><a href="#">Item 2</a></li>
        </ul>
      </section>
    </nav> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T23:08:54.130

这似乎是 Foundation 4 的 Javascript 中的硬编码“功能”。它不仅阻止了链接的默认行为，还自动强制链接重定向到`#`，这会导致浏览器跳转到页面顶部。这似乎是故意的（稍后会详细介绍）。

目前唯一的选择是**不使用 Top Bar 组件**并使用其他更可靠的 Foundation 组件创建自己的导航。例如，您可以使用`.sticky`类和简单地定义一个包含所有必要菜单项的新`<nav>`元素来轻松构建自己的导航。`<ul>`

顶部栏在设计上有一个非常具体的用途...单击“菜单”将使用 Javascript 将导航显示为顶部栏下的单列选项。为了确保移动用户可以滚动大量选项，这会将窗口跳转到页面顶部并删除该`fixed`行为，直到您关闭菜单。当您的顶部栏从页面顶部开始时，这可以很好地工作，但当它不是时会产生严重影响（例如，滚动到页面顶部可能会将菜单移出视图）。

现在，这纯粹是意见......但我***真的不***喜欢Foundation 的 Top Bar 实施。可用性测试表明，将您的移动菜单放在页脚并使用锚链接到它们更有效*且*用户友好。您可以使用`.hide-for-small`隐藏桌面菜单项并`.show-for-small`显示您自己的自定义、锚定“菜单”链接...该菜单链接将锚定到页脚中的特定于移动设备的菜单（同样，您将使用 显示`.show-for-small`）。

长话短说：从可用性的角度来看，Top Bar 是草率的，并且对于您的用例而言（按设计）是损坏的。我建议建立自己的粘性菜单:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-30T10:29:34.977

此问题已修复：[https ://github.com/zurb/foundation/issues/1993](https://github.com/zurb/foundation/issues/1993)

**回答：**

如果您不希望它跳到顶部，请在 data-options 中指定：

```
<nav class="top-bar" data-options="scrolltop: false"> 
```

或初始化：

```
$(document).foundation('topbar', {scrolltop: false}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-20T19:41:51.803

如果您不需要它，请删除“粘性”类。为我工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-08T16:27:36.423

在此页面上：[https ://github.com/jordanmerrick/foundation/commit/47391710c7b6d30ad54e50f3b2526cb8f6184be1](https://github.com/jordanmerrick/foundation/commit/47391710c7b6d30ad54e50f3b2526cb8f6184be1)

我在foundation.topbar.js 中找到了根据顶部栏是否为粘性向body 标签添加填充的代码：

```
if ($('.sticky').length > 0) {
   var distance = $('.sticky').length ? $('.sticky').offset().top: 0,
       $window = $(window);
      var offst = $('nav.top-bar').outerHeight()+20;
     (".sticky").after("<div class='top-bar-sticky-padding'></div>");
     $window.scroll(function() {
       if ( $window.scrollTop() >= ( distance ) ) {
          $(".sticky").addClass("fixed"); 
```

- $('body').css('padding-top',offst); }

```
 else if ( $window.scrollTop() < distance ) {
         $(".sticky").removeClass("fixed"); 
```

- $('body').css('padding-top','0'); } }); }

我不是javascript向导-但似乎不是将offst设置为.top-bar的高度，而是直接将其设置为.top-bar-sticky-padding的值，您可以控制偏移量媒体查询而不是强制偏移顶栏的大小。

我错了吗？我对“黑客核心”感到紧张，但这似乎已经为我解决了这个问题。

# wcf - WCF 双跳本地主机在第二跳丢失模拟

> ID：15488814
> 
> 赞同：2
> 
> 时间：2013-03-18T23:22:30.553
> 
> 标签：wcf, iis, impersonation, identity-delegation

我看过很多关于模拟的 WCF 双跳问题的帖子，但没有一个专门帮助我解决我的问题。

我错过了什么？为了在服务 2 上保留我的模拟用户 (DOMAIN\UserName)，我还需要做什么？我正在查看 ServiceSecurityContext.Current.WindowsIdentity.Name 以确认 - 也许那是错误的。

设置：

1.  托管在 localhost IIS 中的客户端应用程序具有对服务 1 的服务引用 - 模拟 WindowsIdentity (DOMAIN\UserName)
2.  服务 1 - 托管在 localhost IIS 中的 WCF 服务，服务引用到服务 2
3.  服务 2 - 托管在 localhost IIS 中的 WCF 服务

我正在使用所有 basicHttpBindings 来保持简单。我在两个服务端点上都设置了 SPN。

*   我可以成功地进行双跳并且代码执行得很好
*   在服务 1（跃点 1）中，我的 ServiceSecurityContext.Current.WindowsIdentity 是我模拟的人（DOMAIN\UserName）
*   在服务 2（跃点 2）中，我的 ServiceSecurityContext.Current.WindowsIdentity 是 IIS 应用程序池用户
*   ImpersonationLevel = "委托"
*   两个 WCF 服务都启用了 Windows 身份验证并禁用了匿名

** 注意：我在我的开发盒上本地运行这一切。即便如此，我已经将我的授权级别设置为允许我自己授权给我自己。也许矫枉过正。

绑定（两种服务类似）：

```
<binding name="...">
    <security mode="TransportCredentialOnly">
         <transport clientCredentialType="Windows" />
    </security>
</binding> 
```

我在 WCF 服务客户端和服务端点行为配置上都设置了 impersonationLevel = "Delegation"。我的服务方法专门用 impersonationOption="Allowed" (hop 1) 和 impersonationOption"Required" (hop 2) 装饰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:17:18.710

事实证明，在我的案例中，关键部分是确保设置了以下行为属性：

```
<serviceAuthorization impersonateCallerForAllOperations="true" /> 
```

以前，当我设置此值时，我在实体框架中收到错误，因此我取消了设置。似乎在将我的设置与标准实现（如其他 varios 帖子中所述）对齐的某个地方，我最终能够设置此属性并使其按预期工作。

编辑：如果这一切都在本地工作，但在分布式环境中不起作用，请查看这篇文章：[如何修复 Kerberos 双跳问题？](https://stackoverflow.com/questions/14928350/how-can-i-fix-the-kerberos-double-hop-issue). 您可能需要将机器设置为相互信任委托。

# javascript - 自动完成 - 自定义渲染项/菜单和项目选择问题

> ID：15488816
> 
> 赞同：1
> 
> 时间：2013-03-18T23:22:36.463
> 
> 标签：javascript, jquery, ajax, jquery-ui, autocomplete

我正在使用带有自动完成工具的 jQueryUI (1.10.2) 和 jQuery (1.9.1)。

我有远程 json 数据和类别以及自定义显示，其中包含 json 数据中每个项目的图像（显示在自动完成列表中）。

这是我的自动完成初始化

```
var autoSearch = $("#header-search-text").autocomplete({
    source: function( request, response ) {
        $.ajax({
            //I have items with label, value, category and imgPath info
        });
    },
     focus: function( event, ui ) {
        console.log("focus is ");
        //This line shows "null"
        console.log(ui);
        return false;
    },
    minLength: 4,
    select: function( event, ui ) {
        //Never shows up
        console.log("selected is ");
        console.log( ui.item);/* ?
        "Selected: " + ui.item.label :
        "Nothing selected, input was " + this.value);*/
    },
    open: function() {
        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
        $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
}).data('ui-autocomplete'); 
```

我有一个自定义的 _renderMenu

```
//Working
autoSearch._renderMenu = function( ul, items ) {
        var that = this,
        currentCategory = "";
        $.each( items, function( index, item ) {
            console.log(item);
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            that._renderItem( ul, item );
        });
}; 
```

但是当我有 _renderItem 时，用于选择的键（向上和向下）不再起作用，我无法点击任何东西（没有：悬停 CSS 出现）

```
autoSearch._renderItem = function(ul, item) {
    console.log("ul is ");
    console.log(ul);
    return $('<li>')
        .data('item.autocomplete', item)
        .append('<img style="width:50px;height:50px;" src="' + base_url + "/"+ item.imgPath + '" alt="" />' + item.label)
        .appendTo(ul);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:32:11.660

好的，我检查了 HTML，我显然在 _renderItem 中缺少这一行：

```
 //Before the appendTo(ul);
.append( $( "<a>" ).text( item.label ) ) 
```

我不知道为什么也不知道如何，但是通过添加 ，jQuery 会生成一堆属性，例如

```
id="ui-id-7" class="ui-corner-all" tabindex="-1" 
```

# php - 在我的示例中，是否有一个简短的函数 toString 单个 jSON 对象或类似的？

> ID：15488817
> 
> 赞同：0
> 
> 时间：2013-03-18T23:22:43.790
> 
> 标签：php, mysql, json, codeigniter

我已将 PHP 数组转换为 Codeigniter PHP 函数中的单个选择，如下所示...

```
function check_week($week_array)
{
    $sql = "SELECT X_id FROM products WHERE date_sub(curdate(), INTERVAL 1 DAY) <= updated_at;";
    $query = $this->db->query($sql, $week_array);
    $week = $query->result_array();
    $weeks = json_encode($week[array_rand($week)]);
    return $weeks;
} 
```

我得到了...的回报

```
{"X_id":"XXX1AXPJV6"} 
```

我已经把它缩小到一个 id，所以不需要使用循环，我只需要一个简单的动作就可以了。（所以我只想要***XXX1AXPJV6***作为变量）。此外，我确实尝试为此保留 PHP，并且 Codeigniter 对允许任何转换为​​字符串非常挑剔，因为对该模型的调用来自库文件。

顺便说一句，我的 1 天间隔用于测试，它将是 7

尝试使用...

```
$weeks2 = $weeks[0]['X_id'];
    return $weeks2; 
```

...得到错误“不能在...中使用字符串偏移作为数组”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:30:34.280

如果我正确理解了这个问题

```
$weeks = json_encode($week[array_rand($week)]); 
```

应该

```
$weeks = reset($week[array_rand($week)]); // returns the value of the first element in the array 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:07:25.937

如果您只需要一个随机行，您的 SQL 应该只检索一个随机行。

```
function check_week($week_array)
{
    $sql = "SELECT X_id FROM products WHERE DATE_SUB(CURDATE(), INTERVAL 1 DAY) <= updated_at ORDER BY RAND() LIMIT 1;";
    $query = $this->db->query($sql, $week_array);
    $week = $query->row_array();

    return json_encode($week['X_id']);
} 
```

注意查询的变化，以及使用`row_array()`which 返回单个 key => value 数组，而不是`result_array()`返回数组数组。

对于它的价值，您可以通过将这一行更改为：

```
$weeks = json_encode($week[array_rand($week)]['X_id']); 
```

但以上仍然是一个更合适的解决方案。如果您只需要一条记录，请不要检索大量记录。

另外，这个`$week_array`参数是干什么用的？您将其用作查询绑定，但`?`在您的查询中没有可放置绑定的位置，这使其毫无意义。

# php - 使用 PHP 将多个值插入 MySQL

> ID：15488822
> 
> 赞同：1
> 
> 时间：2013-03-18T23:23:12.157
> 
> 标签：php, mysql, sql

因此，我将在使用时会发生变化的值数组传递给一个方法，然后将它们插入数据库。我的问题是绑定参数的方式。

```
public function insertValues($table, $cols, $values) 
{
    $mysqli = new mysqli(DBHOST, DBUSER, DBPASSWORD, DBDATABASE);

    $colString = implode(', ', $cols); // x, x, x
    $valString = implode(', ', array_fill(0, count($values), '?')); // ?, ?, ?

    $sql = "INSERT INTO $table ($colString) VALUES($valString)";
    if (!$stmt = $mysqli->prepare($sql))
         echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;

    // THIS IS THE PROBLEM AREA
    foreach ($values as $v)
        if (!$stmt->bind_param('s', $v))
            echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;

    if (!$stmt->execute())
        echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;

    $stmt->close();
    $mysqli->close();
} 
```

我需要一种方法来一次绑定所有参数，而不是一次绑定一个，但我想不出一种有用的方法来做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:47:29.783

[我在 PHP.net ( http://php.net/manual/en/mysqli-stmt.bind-param.php](http://php.net/manual/en/mysqli-stmt.bind-param.php "bind_param 参考") )上找到了您正在寻找的问题的答案。为方便起见，我将其粘贴在这里，所有功劳都归功于通过电子邮件 Nick9v ^ät^ hotmail -remove- -dot- com 的人

> 在准备语句时处理动态数量的字段值时，我发现这个类很有用。
> 
> [编者注：将 BindParam::add() 更改为通过引用接受 $value，从而防止在较新版本的 PHP 中出现警告。]

```
<?php 
class BindParam{ 
    private $values = array(), $types = ''; 

    public function add( $type, &$value ){ 
        $this->values[] = $value; 
        $this->types .= $type; 
    } 

    public function get(){ 
        return array_merge(array($this->types), $this->values); 
    } 
} 
?> 
```

用法很简单。创建一个实例并使用 add 方法进行填充。当您准备好执行时，只需使用 get 方法。

```
<?php 
$bindParam = new BindParam(); 
$qArray = array(); 

$use_part_1 = 1; 
$use_part_2 = 1; 
$use_part_3 = 1; 

$query = 'SELECT * FROM users WHERE '; 
if($use_part_1){ 
    $qArray[] = 'hair_color = ?'; 
    $bindParam->add('s', 'red'); 
} 
if($use_part_2){ 
    $qArray[] = 'age = ?'; 
    $bindParam->add('i', 25); 
} 
if($use_part_3){ 
    $qArray[] = 'balance = ?'; 
    $bindParam->add('d', 50.00); 
} 

$query .= implode(' OR ', $qArray); 

//call_user_func_array( array($stm, 'bind_param'), $bindParam->get()); 

echo $query . '<br/>'; 
var_dump($bindParam->get()); 
?> 
```

这将为您提供如下所示的结果：

SELECT * FROM users WHERE hair_color = ? 或年龄 = ? 或余额 = ? 数组(4) { [0]=> 字符串(3) "sid" [1](http://php.net/manual/en/mysqli-stmt.bind-param.php "bind_param 参考") => 字符串(3) "red" [2]=> int(25) [3]=> float(50) }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:06:31.670

该代码不起作用，因为 bind_param 必须在对函数的一次调用中包含所有查询参数，而不是对每个参数进行多次调用，它还需要通过引用传递变量，因此在 foreach 调用中它总是相同的变量与它在循环的最后一次迭代中的值。

最简单的方法是用类型和参数组成一个数组，然后通过调用 call_user_func_array 将其传递给 bind_param，例如：

```
$params = array();
$types = '';

foreach ($values as $k => $v)
{
    $types .= 's';
    $params[] = &$values[$k];
}

$bind_params = array_merge(array($types), $params);

if (!call_user_func_array(array($stmt, 'bind_param'), $bind_params))
    // ... 
```

请注意， bind_param 期望变量通过引用而不是值传递，否则它将是几行构造带有值的数组，而不是 foreach 循环。

# c# - C# 中的 DS9097E 和 DS18B20 温度读数

> ID：15488823
> 
> 赞同：3
> 
> 时间：2013-03-18T23:23:16.240
> 
> 标签：c#, serial-port, temperature

我已经构建了一个适配器[DS9097E](http://www.wiki.piwo.org/Plik%3aDs9097e.gif)并将其连接到[DS18B20](http://datasheets.maximintegrated.com/en/ds/DS18B20.pdf)数字温度计。在 Internet 上，您可以找到从该设备读取温度的 Delphi 和 C 应用程序示例。我正在尝试用 C# 编写它。一开始我依赖.NET，但它不起作用。我遇到了 RESET 和 PRESENCE PULSES 的问题，所以我尝试了 kernel32.dll。昨天我发现了这个库：OpenNETCF。不幸的是，没有它的文档。同时，我尝试编写自己的库：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading.Tasks;
using System.Activities;
using Microsoft.Win32.SafeHandles;
using System.IO;
using System.Collections.Specialized;
using System.IO.Ports;

namespace COMAPI
{

public class COMutils
{

    private int hCOM = -1;
    private DCB dcb = new DCB();
    private COMMTIMEOUTS commtime = new COMMTIMEOUTS();
    private int bufferSize = 128;
    private byte[] ReceiveBytes;

    #region STALE

        private const int PURGE_TXABORT = 0x01;
        private const int PURGE_RXABORT = 0x02;
        private const int PURGE_TXCLEAR = 0x04;
        private const int PURGE_RXCLEAR = 0x08;
        private const int INVALID_HANDLE_VALUE = -1;
        private const uint GENERIC_READ = 0x80000000; 
        private const uint GENERIC_WRITE = 0x40000000;

    #endregion

    #region KERNEL32

        [DllImport("kernel32.dll")]
        static extern bool PurgeComm(int hFile, int dwFlags);

        [DllImport("kernel32.dll", SetLastError=true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        static extern bool CloseHandle(int hObject);

        [DllImport("kernel32.dll")]
        static extern bool FlushFileBuffers(int hFile);

        [DllImport("kernel32.dll")]
        static extern bool TransmitCommChar(int hFile, char cChar);

        [DllImport("kernel32.dll")]
        static extern bool WriteFile(int hFile, byte [] lpBuffer, int nNumberOfBytesToWrite, ref int lpNumberOfBytesWritten, int lpOverlapped);

        [DllImport("kernel32.dll", SetLastError = true)]
        static extern bool ReadFile(int hFile, [Out] byte[] lpBuffer, int nNumberOfBytesToRead, ref int lpNumberOfBytesRead, int lpOverlapped);

        [DllImport("kernel32.dll")]
        static extern bool GetCommState(int hFile, ref DCB lpDCB);

        [DllImport("kernel32.dll", SetLastError = true)]
        static extern bool GetCommTimeouts(int hFile, ref COMMTIMEOUTS lpCommTimeouts);

        [DllImport("kernel32.dll")]
        static extern bool SetCommState(int hFile, [In] ref DCB lpDCB);

        [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        static extern int CreateFile(
            string lpFileName,
            [MarshalAs(UnmanagedType.U4)] uint dwDesiredAccess,
            [MarshalAs(UnmanagedType.U4)] int dwShareMode,
            int lpSecurityAttributes,
            [MarshalAs(UnmanagedType.U4)] int dwCreationDisposition,
            [MarshalAs(UnmanagedType.U4)] int dwFlagsAndAttributes,
        int hTemplateFile);

        [DllImport("kernel32.dll")]
            static extern int GetTickCount();

    #endregion

    #region DCB

        [StructLayout(LayoutKind.Sequential)]

        internal struct DCB
        {
            internal uint DCBLength;
            internal uint BaudRate;
            private BitVector32 Flags;

            private ushort wReserved;        // not currently used 
            internal ushort XonLim;           // transmit XON threshold 
            internal ushort XoffLim;          // transmit XOFF threshold             

            internal byte ByteSize;
            internal Parity Parity;
            internal StopBits StopBits;

            internal sbyte XonChar;          // Tx and Rx XON character 
            internal sbyte XoffChar;         // Tx and Rx XOFF character 
            internal sbyte ErrorChar;        // error replacement character 
            internal sbyte EofChar;          // end of input character 
            internal sbyte EvtChar;          // received event character 
            private ushort wReserved1;       // reserved; do not use     

            private static readonly int fBinary;
            private static readonly int fParity;
            private static readonly int fOutxCtsFlow;
            private static readonly int fOutxDsrFlow;
            private static readonly BitVector32.Section fDtrControl;
            private static readonly int fDsrSensitivity;
            private static readonly int fTXContinueOnXoff;
            private static readonly int fOutX;
            private static readonly int fInX;
            private static readonly int fErrorChar;
            private static readonly int fNull;
            private static readonly BitVector32.Section fRtsControl;
            private static readonly int fAbortOnError;

            static DCB()
            {
                // Create Boolean Mask
                int previousMask;
                fBinary = BitVector32.CreateMask();
                fParity = BitVector32.CreateMask(fBinary);
                fOutxCtsFlow = BitVector32.CreateMask(fParity);
                fOutxDsrFlow = BitVector32.CreateMask(fOutxCtsFlow);
                previousMask = BitVector32.CreateMask(fOutxDsrFlow);
                previousMask = BitVector32.CreateMask(previousMask);
                fDsrSensitivity = BitVector32.CreateMask(previousMask);
                fTXContinueOnXoff = BitVector32.CreateMask(fDsrSensitivity);
                fOutX = BitVector32.CreateMask(fTXContinueOnXoff);
                fInX = BitVector32.CreateMask(fOutX);
                fErrorChar = BitVector32.CreateMask(fInX);
                fNull = BitVector32.CreateMask(fErrorChar);
                previousMask = BitVector32.CreateMask(fNull);
                previousMask = BitVector32.CreateMask(previousMask);
                fAbortOnError = BitVector32.CreateMask(previousMask);
            }
        }

    #endregion

    #region COMMTIMEOUTS

        struct COMMTIMEOUTS
        {
            public UInt32 ReadIntervalTimeout;
            public UInt32 ReadTotalTimeoutMultiplier;
            public UInt32 ReadTotalTimeoutConstant;
            public UInt32 WriteTotalTimeoutMultiplier;
            public UInt32 WriteTotalTimeoutConstant;
        }

    #endregion

    #region METODY

        public bool openCOM(int numer)
        {

            hCOM = CreateFile("COM" + numer,   GENERIC_READ | GENERIC_WRITE, 0, 0, 3, 0, 0);
            if (hCOM == INVALID_HANDLE_VALUE) 
               return false;
            if (!GetCommState(hCOM, ref dcb))
               return false;
            if (!GetCommTimeouts(hCOM, ref commtime))
                return false;
            return true;

        }

        public bool closeCOM()
        {
            return CloseHandle(hCOM);
        }

        public bool setCOM(int baud, byte bsize, Parity par, StopBits sbits)
        {
            dcb.BaudRate = (uint)baud;
            dcb.ByteSize = bsize;
            dcb.Parity = par;
            dcb.StopBits = sbits;
            return SetCommState(hCOM, ref dcb);

        }

        public bool cleanCOM()
        {
            return PurgeComm(hCOM, PURGE_TXABORT | PURGE_RXABORT | PURGE_TXCLEAR | PURGE_RXCLEAR);
        }

        public bool flushCOM()
        {
            return FlushFileBuffers(hCOM);
        }

        public bool TxByteCOM(byte dane)
        {
            return TransmitCommChar(hCOM, (char)dane);
        }

        public bool TxDataCOM(byte[] daneW)
        {
            int byteZap = 0;
            return WriteFile(hCOM, daneW, daneW.Length, ref byteZap, 0);
        }

        public byte[] RxDataCOM(byte[] odebraneBytes, int ilosc, int odczytane)
        {
            if(ilosc == 0)
                ilosc = bufferSize;

            if(hCOM != INVALID_HANDLE_VALUE)
            {
                odczytane = 0;
                bool stanOdczytu = true;
                odebraneBytes = new byte[ilosc];
                stanOdczytu = ReadFile (hCOM, odebraneBytes, ilosc, ref odczytane, 0);

                if(stanOdczytu == false)
                {
                    throw new ApplicationException("Błąd odczytu");
                }
                else
                {
                    return odebraneBytes;
                }
            }
            else
            {
                throw new ApplicationException ("Port nie został otwarty");
            }
        }

        public int returnTime()
        {
            return GetTickCount();
        }

        private bool IsOdd(int value)
        {
            return value % 2 != 0;
        }

        public int sendByte(int X)
        {
            int D = 0; 
            int czas, temp;
            byte[] B = new byte[1];

            temp = X;
            setCOM(115200, 8, Parity.None, StopBits.One);
            cleanCOM();
            czas = returnTime() + 50;

            for (int n = 1; n <= 8; n++)
            {
                if (IsOdd(temp)) TxByteCOM(0xFF);
                else TxByteCOM(0x00);

                temp = temp << 1;
                do
                {

                    RxDataCOM(B, 1, D);

                } while ((D > 1) | (czas < returnTime()));

                if (D != 1) break;
                if (IsOdd(B[0])) temp = (temp | 0x80);
                }
            return temp;
        }

        public bool sendCOM(byte[] WrByt)
        {
            int BytesWritten = 0;
            bool writeState = false;

            if (hCOM != INVALID_HANDLE_VALUE)
            {
                PurgeComm(hCOM, PURGE_RXCLEAR | PURGE_TXCLEAR);

                writeState = WriteFile(hCOM, WrByt, WrByt.Length, ref BytesWritten, 0);

                if (writeState == false)
                {
                    throw new ApplicationException("Błąd zapisu do portu ");
                }
            }
            else
            {
                throw new ApplicationException("Port nie został otwarty");
            }
            return writeState;
        }

        public byte[] receiveCOM (int NumBytes)
        {
            if(NumBytes == 0)
                NumBytes = bufferSize;

            if (hCOM != INVALID_HANDLE_VALUE)
            {
                int BytesRead = 0;
                bool readState = true;
                ReceiveBytes = new byte[NumBytes];
                readState = ReadFile(hCOM, ReceiveBytes, NumBytes, ref BytesRead, 0);

                if (readState == false)
                {
                    throw new ApplicationException("Błąd odczytu");
                }
                else
                {
                    return ReceiveBytes;
                }
            }
            else
            {
                throw new ApplicationException("Port nie został otwarty");
            }
        }

        public bool resetCOM()
        {
            int czasOd;
            int D = 0;
            byte[] baju = new byte[1];
            byte[] lista = new byte[1];

            setCOM(9600, 8, Parity.None, StopBits.One);
            cleanCOM();
            lista[0] = 0xF0;
            sendCOM(lista);
            czasOd = returnTime() + 50;

            do
            {
                RxDataCOM(baju, 1, D);
            }
            while ((D == 1) | czasOd < returnTime());
            if (D == 1)
             return (baju[0] != 0xF0);
            return true;
        }

    #endregion

} 
```

}

这是我的应用程序的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using COMAPI;

namespace temp_3
{
class Program
{
    static private COMutils util = new COMutils();

    static void Main(string[] args)
    {
        int TH,TL;
        int TEMP_READ;
        double TEMP;
        util.openCOM(1);
        byte[] lista = new byte[1];
        bool czy = util.resetCOM();
        lista[0] = 0xCC;
        czy = util.sendCOM(lista);
        lista[0] = 0x44;
        czy = util.sendCOM(lista);
        Thread.Sleep(750);
        czy = util.resetCOM();
        lista[0] = 0xCC;
        czy = util.sendCOM(lista);
        lista[0] = 0xBE;
        czy = util.sendCOM(lista);

        TL = util.sendByte(0xFF);
        Console.WriteLine(TL);
        TH = util.sendByte(0xFF);
        Console.WriteLine(TH);

        czy = util.resetCOM();
        Console.WriteLine(czy);

        TEMP_READ = TL + 256 * TH;
        TEMP = TEMP_READ / 16.0;
        Console.WriteLine(TEMP);
        Console.WriteLine(czy);

        Console.ReadKey();
    }
} 
```

}

不幸的是，根据这段代码，它读取的温度超过了 8000 摄氏度。有人能指出错误在哪里吗？任何提示将不胜感激。下面是用 Delphi 编写的函数：

```
 function Reset_COM:boolean;
  var B:Byte;
  D,time:DWord;
  begin
  Result := False;
  //ustawienie portu RS232
  Ustaw_COM(9600,8,NOPARITY,ONESTOPBIT);
 //czyszczenie RS232
  Result := Czysc_COM;
  TransmitCommChar(hCom,Chr($F0));
  time:=GetTickCount+50;
  repeat
    ReadFile(hCom,B,1,D,nil)
    until (D=1) or (time<GetTickCount);
  if D=1 then
  Result:=(B<>$F0);
  end;

  function send_Bajt(X:Byte):Byte;
     var
     n:Integer;
     B:Byte;
     D,time:DWord;
  begin
     Result:=$FF;
     Ustaw_Com(115200,8,NOPARITY,ONESTOPBIT);
     Czysc_COM;
     time:=GetTickCount+50;
     for n:=1 to 8 do
     begin
     if Odd(X) then TransmitCommChar(hCom,Chr($FF)) else TransmitCommChar(hCom,Chr($00));
      X:=X shr 1;
      repeat ReadFile(hCom,B,1,D,nil)
      until (D=1) or (time<GetTickCount);
      if D<>1 then exit;
      if Odd(B) then X:=X or $80;
      if Odd(B xor CRC)
      then CRC:=((CRC xor $18) shr 1) or $80
      else CRC:=CRC shr 1;
      end;
      Result:=X;
      end;

     function Odczytaj_TEMP:real;
       var TH,TL:Byte;
       TEMP_READ: Smallint;
       Temp: double;

       begin
        Resetuj_COM;
        send_Bajt($CC); //Skip ROM
        send_Bajt($44); //Start T Convert
        Sleep(750);

        Resetuj_COM;
        send_Bajt($CC); //Skip ROM
        send_Bajt($BE); //Read Scratchpad

        TL:=send_Bajt($FF);
        TH:=send_Bajt($FF);

        Resetuj_COM;

        TEMP_READ := TL + 256 * TH;
        Temp := TEMP_READ / 16.0;
         Result := Temp;
        end; 
```

# css - 通过 CSS 将鼠标悬停在父元素上时显示 :after

> ID：15488827
> 
> 赞同：13
> 
> 时间：2013-03-18T23:23:23.253
> 
> 标签：css, hover, css-selectors, pseudo-element

当我将鼠标悬停在父元素本身上时，是否可以`display:block;`使用伪元素？`:after`

```
#myDiv{
   position:relative;
   width:50px;
   height:50px;
   border-style:solid;
   background-color:red;
}
#myDiv:after{
   position:absolute;
   content:"";
   display:none;
   width:50px;
   height:50px;
   border-style:solid;
   background-color:blue;
} 
```

我累了：

```
#myDiv:hover #myDiv:after{
    display:block;
}
#myDiv:hover + #myDiv:after{
    display:block;
}
#myDiv:hover > #myDiv:after{
    display:block;
} 
```

然而没有运气，这是一个[小提琴](http://jsfiddle.net/f8jmM/)。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-18T23:25:18.427

将其更改为`#myDiv:hover::after`

您可以使用`:after`或者`::after`但在选择器模块 (3) 中它声明后者现在旨在用于将它们与伪类区分开来

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T23:25:04.227

您正在尝试引用相同的元素，因此您不需要复制 ID 选择器。也不需要使用子选择器，只需使用：

```
#myDiv:hover:after {
    display: block;
} 
```

[jsFiddle 演示](http://jsfiddle.net/f8jmM/1/)

# facebook - 所有 Facebook 子类别的权威列表

> ID：15488834
> 
> 赞同：5
> 
> 时间：2013-03-18T23:24:13.953
> 
> 标签：facebook, facebook-graph-api

有谁知道以编程方式列出所有 Facebook 子类别的地方？我在另一篇文章中看到了这个列表，它列出了所有类别（不是子类别），这与 Facebook 公司创建页面上的源代码中列出的相同：[Facebook Pages — Authoritative List of Categories](https://stackoverflow.com/questions/4216648/facebook-pages-authoritative-list-of-categories)

我想对 Facebook 上的一些企业进行分类，以便它们更容易消化，但似乎有一半的企业选择了“本地企业或地点”下的“本地企业”类别。将所有企业中的大多数都集中在一个包中并没有真正的帮助。

下面是一个归类为本地商家且具有酒吧子类别的地点示例。获得子类别的完整列表会非常有帮助。谢谢您的帮助。

```
{
      "page_id": xxxxx, 
      "description": "", 
      "name": "xxxxx Lounge", 
      "categories": [
        {
          "id": 110290705711626, 
          "name": "Bar"
        }
      ], 
      "pic_big": "xxxxx.png", 
      "type": "LOCAL BUSINESS"
    }, 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-28T19:22:36.433

Facebook 刚刚对其图形 API 进行了一些更改。可以在此处的 Graph API Explorer 中查看所有子类别（Facebook 称之为“地点主题”）的列表：

[https://developers.facebook.com/tools/explorer/145634995501895/?method=GET&path=search%3Ftype%3Dplacetopic%26topic_filter%3Dall%26fields%3Did%2Cname%2Cparent_ids](https://developers.facebook.com/tools/explorer/145634995501895/?method=GET&path=search%3Ftype%3Dplacetopic%26topic_filter%3Dall%26fields%3Did%2Cname%2Cparent_ids)

API 调用本身是：

[https://graph.facebook.com/search?type=placetopic&topic_filter=all&fields=id,name,parent_ids&access_token=](https://graph.facebook.com/search?type=placetopic&topic_filter=all&fields=id,name,parent_ids&access_token=)

它具有完整的分类法，所有主题都列出了它们的父主题，但是如果您想要双向关系，则必须自己对其进行逆向工程。

为避免混淆，可能值得注意的是，Facebook 所称的“类别”是页面分类的更高级别细分。每个页面只能有类别，因此没有任何内置分类法，但它们可以有许多页面主题。我不确定完整列表在哪里或是否在线，但就是这样（对不起，丑陋；我有一些格式问题）：

## 需要位置信息的类别：

类别 category_enum 说明

1111 MOVIE_THEATER 电影院

1209 CONCERT_VENUE 音乐会场地

1305 BOOK_STORE 书店

1306图书馆图书馆

1607 LAWYER 律师

第1608章 医生

1900 RESTAURANT_CAFE 餐厅/咖啡厅

2100 巴酒吧

2101俱乐部俱乐部

2231 SPORTS_OUTDOORS 户外装备/运动用品

2500 本地本地业务

2501 HOTEL酒店

2506 AIRPORT 机场

2507 SPORTS_VENUE 运动场馆

2508 ARTS_ENTERTAINMENT 艺术/娱乐/夜生活

2509 汽车 汽车

2510 SPA_BEAUTY 水疗/美容/个人护理

2511 EVENT_PLANNING 活动策划/活动服务

2512 BANKS 银行/金融服务

2513 FOOD_GROCERY 食品/杂货

2514 HEALTH_MEDICAL 健康/医疗/药学

2515 HOME_IMPROVEMENT 家装

2516 PET_SERVICES 宠物服务

2517 PROFESSIONAL_SERVICES 专业服务

2518 BUSINESS_SERVICES 商业服务

2519 COMMUNITY_GOVERNMENT 社区/政府

2520 REAL_ESTATE 房地产

2521 SHOPPING_RETAIL 购物/零售

2524 SPORTS_RECREATION 运动/娱乐/活动

2525 TOURS_SIGHTSEEING 旅游/观光

2526 TRANSPORTATION_旅游交通

2527 HOSPITAL_CLINIC 医院/诊所

2528 MUSEUM 博物馆/美术馆

## 不需要位置信息的类别：

类别 category_enum 说明

第1201章 宋歌

1200专辑专辑

1202 MUSICIAN_BAND 音乐家/乐队

1204 MUSIC_INSTRUMENT 乐器

1206 播放列表 播放列表

1207 MUSIC_VIDEO 音乐视频

1208 CONCERT_TOUR 巡回演唱会

1210 RADIO_STATION 电台

1211 RECORD_LABEL 记录标签

1212 MUSIC_AWARD 音乐奖

1213 MUSIC_CHART 音乐排行榜

1105 电影 电影

1103 ACTOR_DIRECTOR 演员/导演

第1108章 制片人

第1109章

1110 电影工作室

1112 TV_MOVIE_AWARD 电视/电影奖

第1113章

1400 TV_SHOW电视剧

1402 TV_NETWORK 电视网络

1404 TV_CHANNEL 电视频道

第1405集

1300 本书

1301 作者 作者

1304 出版商 出版商

1308 EDITOR 编辑器

1307 杂志杂志

1600 运动员 运动员

1700 政治家 政治家

1601 ARTIST 艺术家

1701 GOVERNMENT_OFFICIAL 政府官员

1602 PERSON 公众人物

1605 NEWS_PERSONALITY 新闻人物

1604 记者 记者

第1606章 大厨

1609 BUSINESS_PERSON 商务人士

1610 喜剧演员

1611 艺人艺人

第1612章 君君

第1613章 老师老师

1614 DANCER 舞者

1901 CUISINE 美食

2000 食品食品

2001 DRINK 饮料

2202 网站 网站

2205 CAR 汽车

2206 BAGS_LUGGAGE 包/行李

2208 CAMERA_PHOTO 相机/照片

2209服装服装

2210 电脑 电脑

2211 软件 软件

2212 OFFICE_SUPPLIES 办公用品

2213 电子 电子

2215 家电

2216 BUILDING_MATS建材

2217 COMMERCIAL_EQUIPMENT 商用设备

2218 HOME_DECOR 家居装饰

2219 FURNITURE 家具

2220 HOUSEHOLD_SUPPLIES 家居用品

2221 KITCHEN_SUPPLIES 厨房/烹饪

第2222章

2223 TOOLS_EQUIPMENT 工具/设备

2224 WINE_SPIRITS 酒/烈酒

2226 JEWELRY_WATCHES 珠宝/手表

2227 MOVIES_MUSIC 电影/音乐

2230 PET_SUPPLIES 宠物用品

2232 BABY_KIDS 婴儿用品/儿童用品

2262 VITAMIN_SUPPLEMENTS 维生素/补充剂

2263 药品 药品

2201 PRODUCT_SERVICE 产品/服务

2300 GAME 游戏/玩具

2301 APP应用页面

2505 TRANSIT_STOP 中转站

2523 景点 景点/要做的事情

2503 置地地标

2522 PARKS_POI 公共场所

2200 COMPANY 公司

2233 MEDIA_NEWS_COMPANY 媒体/新闻/出版

2234 BANK_FINANCIAL_COMPANY 银行/金融机构

2235 NGO 非政府组织（NGO）

2236 INSURANCE_COMPANY 保险公司

第2237章

2238 ENERGY_COMPANY 能源/公用事业

2239 RETAIL_COMPANY 零售和消费品

2240 AUTO_COMPANY 汽车及零部件

第2241章 工业

2242 TRANSPORT_FREIGHT 运输/货运

2243 HEALTH_COMPANY 健康/医疗/制药

2214 HEALTH_BEAUTY 健康/美丽

2244 AEROSPACE_COMPANY 航空航天/国防

2245 MINING_COMPANY 采矿/材料

2246 FARMING_COMPANY 农业/农业

2247 CHEMICAL_COMPANY

2248 CONSULTING_COMPANY 咨询/商业服务

第2249章

2250 教育_公司教育

2251 ENGINEERING_COMPANY 工程/建筑

2252 FOOD_COMPANY 食品/饮料

2253 电信 电信

2254 生物科技_公司

2255 COMPUTER_COMPANY 计算机/技术

2256 INTERNET_COMPANY 互联网/软件

2258 TRAVEL_COMPANY 旅游/休闲

2260 COMMUNITY_ORG 社区组织

2261 POLITICAL_ORG 政治组织

2264 RELIGIOUS_ORG 教会/宗教组织

2600 ORG_GENERAL 组织

2601学校学校

2602 UNIVERSITY 大学

2604 GOVERNMENT_ORG 政府机构

2603 NON_PROFIT 非营利组织

2606 原因 原因

2618 POLITICAL_PARTY 政党

2612社区社区

1800 SPORTS_LEAGUE体育联赛

1801 SPORTS_TEAM职业运动队

1802 COACH 教练

1803 AMATEUR_TEAM 业余运动队

1804 SCHOOL_TEAM 学校运动队

2700 PERSONAL_BLOG 个人博客

2701 ARTS_SITE 艺术/人文网站

2702 BIZ_SITE 商业/经济网站

2703 COMPUTER_SITE 计算机/互联网网站

2704 EDU_SITE 教育网站

2705 ENTERTAINMENT_SITE娱乐网站

2706 GOV_SITE 政府网站

2707 HEALTH_SITE 健康/保健网站

2708 HOME_SITE 首页/花园网站

2709 NEWS_SITE 新闻/媒体网站

2710 REC_SITE 娱乐/体育网站

2711 REF_SITE 参考网站

2712 REGIONAL_SITE 区域网站

2713 SCIENCE_SITE 科学网站

2714 SOCIETY_SITE 社会/文化网站

2715 TRAVEL_SITE 本地/旅游网站

2716 KIDS_SITE 青少年/儿童网站

2717 PERSONAL_SITE 个人网站

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:58:14.240

据我所知，Facebook 不提供这种级别的详细信息。

更好的计划是使用[Factual](https://developer.factual.com/docs/places-overview)。他们发布了[完整的分类](https://developer.factual.com/docs/places-categories#fn1)，并且使用他们的 Crosswalk API 可以将大多数记录交叉引用回 Facebook 页面/位置。

# authentication - NTLM 身份验证和智能卡

> ID：15488836
> 
> 赞同：8
> 
> 时间：2013-03-18T23:24:26.070
> 
> 标签：authentication, proxy, ntlm

我在公司互联网代理后面的 VMWare VPC 中运行程序（Mathematica）。安装在该 VPC 中的各种程序，如 IE、Chrome、Excel、Word、Acrobat Reader 甚至 MS Paint 都可以毫无问题地从 Internet 获取数据，但 Mathematica 似乎无法正确处理代理。

我的猜测是它无法处理代理的 NTLM 身份验证。

在较早的情况下，在不同的防火墙后面，我使用[CNTLM](http://cntlm.sourceforge.net/)作为 Mathematica 和代理之间的中间体取得了一些成功。CNTLM 与代理对话并负责 NTLM 身份验证，并且 Mathematica 被赋予 CNTLM 监听的端口和 IP 地址 (localhost)，以便与之对话。但是，在较早的情况下，我知道要用于代理的凭据（即我自己的）。

在当前情况下，我使用智能卡和 PIN 进行登录。VPC 获得透明传递的凭据（我不必输入它们），显然我上面提到的所有程序都会自动知道它们。这让我认为 Mathematica 或 CNTLM 也应该能够做到这一点。但是，我用作密码的 PIN 不起作用（事实上，如果我经常尝试，我会被锁定）。我假设使用的凭据实际上不是我自己的，而是 Windows 密码（我没有作为智能卡用户）或者来自我的 PIN 和智能卡。

我的问题是：我怎样才能使这个设置工作？这可能涉及 CNTLM，但也欢迎其他解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T20:06:20.367

您可能有机会使用浏览器代理，例如[Fiddler](http://fiddler2.com/)

与 CNTLM 一样，Fiddler 也充当本地代理，并允许支持代理但不支持 NTLM（它们支持“普通”代理）的应用程序不直接使用公司代理，而是通过本地代理使用。

与 CNTLM 不同，Fiddler 不需要配置凭据，但它使用当前用户凭据来验证 Web 请求。

我不能确定这是适合你的解决方案，因为我没有像你这样的环境，但是这个解决方法在其他一些情况下有效，正如这个 [关于 ruby​​ gem 的答案](https://stackoverflow.com/a/4187271/1657028) 或/和这个[关于 mercurial 的博客](https://bitbucket.org/tortoisehg/hgtk/issue/1620/proxy-authentication-over-ntlm-for-isa)中所报告的，所以我希望这也可以与*Mathematica*一起使用。

Note: Once you run Fiddler it automatically configure the browser proxy to itself ( `http://localhost:8888` ) therefore you can leave the proxy settings of your application to **"Use Proxy Settings from My System or Browser"**. By the way Fiddler it's not only a local proxy and could be used also to troubleshooting or debugging, the feature list is available in [here](http://fiddler2.com/features)

# javascript - 导航/子导航列表，重新加载页面后如何给点击的项目活动类

> ID：15488838
> 
> 赞同：3
> 
> 时间：2013-03-18T23:24:47.380
> 
> 标签：javascript, jquery

我有几个嵌套和隐藏的子导航列表

```
<ul class="nav">
<li><a href="index.html">Home</a></li>
<li><a class="profile" href="#">Profile</a>
    <ul id="profile">
        <li><a href="company.html">Company</a></li>
        <li><a href="structure.html">Structure</a></li>
        <li><a href="team.html">Team</a></li>
    </ul>
</li>

<li><a class="projects" href="#">Projects</a>
    <ul id="projects">
        <li><a href="chapter.html">Chapter</a></li>
        <li><a href="pblc-trde.html">Pblc Trde</a></li>
        <li><a href="globe.html">Globe</a></li>
        <li><a href="komforte.html">Komforte</a></li>
    </ul>
</li> 
```

我目前正在使用我在网上找到的一些 jQuery 在单击时显示/隐藏子导航。我想要完成的是：

1.  希望清理子 nab 菜单的显示/隐藏单击功能。

2.  当点击子导航菜单项时，打开的对应页面，需要将子导航展开并赋予对应的菜单项活动类，以便让用户知道他们在哪个页面。

3.  我希望纯粹在 JS/jQuery 中做到这一点。该站点的安装将在 WordPress 中。

    ```
    $(document).ready(function () {

    $(".profile").click(function () {
        var X = $(this).attr('id');
        if (X == 1) {
            $("#profile").hide();
            $(this).attr('id', '0');
        } else {
            $("#profile").show();
            $(this).attr('id', '1');
        }

    });

    //Mouse click on nav
    $("#profile").mouseup(function () {});

    //Document Click
    $(document).mouseup(function () {
        $("#profile").hide();
        $(".profile").attr('id', '');
    });

    $(".projects").click(function () {
        var X = $(this).attr('id');
        if (X == 1) {
            $("#projects").hide();
            $(this).attr('id', '0');
        } else {
            $("#projects").show();
            $(this).attr('id', '1');
        }

    });

    //Mouse click on nav
    $("#projects").mouseup(function () {});

    //Document Click
    $(document).mouseup(function () {
        $("#projects").hide();
        $(".projects").attr('id', '');
    });
    });

    window.onload = function () {
     $("ul#profile li:first").addClass("active");
    };

     $(document).ready(function () {
      $("ul#profile").show()
    }); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:47:50.037

```
$(document).ready(function()
{
    // Get the name of the page. Split the URL at the '/':s and get the last part
    // with pop():
    var pageName = (location.pathname).split('/').pop();

    // If we couldn't get a page name, default to index.html:
    if( pageName == '' )
    {
        pageName = 'index.html';
    }

    // Hide ul:s that are children of the navigation:
    $('.nav ul').hide();

    // Event handler for clicks on navigation links:
    $('.nav a').on('click', function()
    {
        // Change visibility for the first ul-child of the current li.
        // $(this) refers to the clicked element.
        $(this).parent('li').find('ul').first().toggle();

        // Hide other sub-menus:
        $(this).parents('li').siblings('li').children('ul').hide();
    });

    // Search through all link elements in the nav menu:
    $('.nav').find('a').each(function(index, value)
    {   
        // Append a '$' to the pagename to make the match()-function search
        // from the end of the href value:
        pageName += '$';

        if( value.href.match(pageName))
        {
            // If the pagename matches the href-attribute, then add the 'active'
            // class to the parent li, and show parent ul:s:
            $(this).parent('li').addClass('active').parents('ul').show();    
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:49:49.173

您可以使用 Cookie 来保存当前打开的菜单的值。这将允许在页面加载和浏览器会话之间保存/检索值。

由于您已经安装了 jQuery，您可以使用[jQuery Cookie 插件](https://github.com/carhartl/jquery-cookie)来简化操作。

它的代码非常简单（插件页面上有更多示例）。

```
$.cookie('open_menu', 'projects'); //Save 'projects' under 'open_menu'
$.cookie('open_menu') //Returns 'projects' 
```

只需检查页面加载的值并在单击其中一个菜单时保存它。

如果您不想添加任何额外的插件，这里有一些关于[JavaScript 的内置 cookie API](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)的文档。

编辑：我为您创建了一个带有示例的[JSFiddle 。](http://jsfiddle.net/Dracs/qMrBe/)Cookie 代码似乎在沙箱中不起作用，但该代码应该适合您，如果您有任何问题，请告诉我。

```
$(window).load(function() {
if ($.cookie('show_menu') !== undefined) {
    $('#' + $.cookie('show_menu')).click();
}

$('.nav > li > ul').each(function () {
    //Hide the sub lists
    $(this).hide();
    //Get link with same ID as Class
    var id = $(this).attr('id');
    //When link is clicked
    $('.' + id).click(function () {
        //Get the sub list
        var list = $('#' + $(this).attr('class'));
        //Check if it's currently visible
        if (list.is(':visible')) {
            list.hide(); //Hide list     
            $.cookie('show_menu', ''); //Unset open menu
        } else {
            $('.nav > li > ul').hide(); //Hide all other lists
            list.show(); //Show list
            $.cookie('show_menu', list.attr('class')); //Set open menu
        }
    });
});
}); 
```

# c - 试图掌握 C 字节码... GNU/gcc 是否/可以产生像 Clang/LLVM 这样的 C 字节码？

> ID：15488839
> 
> 赞同：2
> 
> 时间：2013-03-18T23:24:54.807
> 
> 标签：c, gcc, llvm, clang, bytecode

最近有人告诉我看看 C 函数是如何编译成 LLVM 字节码的，然后是 LLVM 字节码是如何翻译成 x86 ASM 的。作为一个普通的 GNU/gcc 用户，我对此有一些疑问。说得客气一点。

GNU/gcc 也编译成字节码吗？*它可以？*我的印象是 gcc 直接编译成 ASM。如果没有，有没有办法像使用 clang 命令一样查看字节码中介？

`~$ clang ~/prog_name.c -S -emit-llvm -o -`<== 将显示 prog_name.c 的字节码。

此外，我发现字节码相当拜占庭式。相比之下，它使汇编语言看起来像是轻读。换句话说：我不知道它在说什么。

*是否有人对模糊破译字节码提供的信息有任何建议或参考？*目前我与实际的 ASM 进行比较和对比，所以说它进展缓慢是一种恭维。

也许这一切都显得幼稚可笑，但我发现要突破它的表面非常具有挑战性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:28:48.370

也许尝试看看[语言参考](http://llvm.org/docs/LangRef.html)。

据我所知，GCC 确实有一个 IR，即众所周知的[GIMPLE](http://gcc.gnu.org/wiki/GIMPLE)（此处的另一个[参考](http://gcc.gnu.org/onlinedocs/gccint/GIMPLE.html)）。

如果您的意思是您宁愿分析程序集输出而不是 IR，您可以查看描述如何输出程序集文件的[这个问题。](https://stackoverflow.com/questions/10990018/how-to-generate-assembly-code-with-clang-in-intel-syntax)

# android - Eclipse 在执行 setOnShowListener 时检测错误

> ID：15488840
> 
> 赞同：0
> 
> 时间：2013-03-18T23:24:57.570
> 
> 标签：android, android-alertdialog

我想设置我的 setOnShowListener() 方法来防止对话框关闭，所以我写了这样的东西，

```
public Dialog update_pop_up()
{
    final AlertDialog.Builder builder = new AlertDialog.Builder(UgJadwal.this);
    LayoutInflater inflater = UgJadwal.this.getLayoutInflater();
    View dialogView = inflater.inflate(R.layout.updatepopup, null);
    builder.setView(dialogView);
    builder.setIcon(R.drawable.update);
    builder.setTitle("Update schedule");

    builder.setPositiveButton(R.string.update, new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int id)
        {

        }
    });

    builder.setNeutralButton(R.string.retrieve, new DialogInterface.OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int id)
        {

        }
    });

    builder.setNegativeButton(R.string.cancel, null);
    return builder.create();

    builder.setOnShowListener(new DialogInterface.OnShowListener()
    {
        @Override
        public void onShow(DialogInterface dialog)
        {
            Button retrieve = builder.getButton(AlertDialog.BUTTON_NEUTRAL);
            retrieve.setOnClickListener(new View.OnClickListener()
            {
                @Override
                public void onClick(View v)
                {
                    //do nothing;
                }
            });
        }
    });
} 
```

至少有两个由 Eclipse 提示的错误，第一个是在上面`setOnShowListener`说“方法 setOnShowListener(new DialogInterface.OnShowListener(){}) 未定义类型 AlertDialog.Builder”，另一个在上面`builder.getButton(AlertDialog.BUTTON_NEUTRAL)`说“方法 getButton(int) 未为 AlertDialog.Builder 类型定义”。我只是想知道为什么它会引发错误，因为我认为我做得对。请问大家有什么办法解决吗，谢谢。

[更新！！] 感谢大家的帮助。这是我最后的方法`setOnShowListener()`

```
dialog.setOnShowListener(new DialogInterface.OnShowListener()
    {
        @Override
        public void onShow(DialogInterface dialog)
        {
            Button retrieve = ((AlertDialog) dialog).getButton(AlertDialog.BUTTON_NEUTRAL);
            retrieve.setOnClickListener(new View.OnClickListener()
            {
                @Override
                public void onClick(View v)
                {
                    datasource.opentoread();
                    String[] hari = datasource.fetchDaily(ids.getText().toString());
                    datasource.close();
                    day.setText(String.valueOf(hari[0]));
                    subject.setText(String.valueOf(hari[1]));
                    time.setText(String.valueOf(hari[2]));
                    location.setText(String.valueOf(hari[3]));
                    lecture.setText(String.valueOf(hari[4]));
                    Toast.makeText(getApplicationContext(), "Retrieve success", Toast.LENGTH_LONG).show();
                }
            });
        }
    });
    return dialog; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:30:46.370

> 第一个是在 setOnShowListener 上，上面写着“方法 setOnShowListener(new DialogInterface.OnShowListener(){}) 对于 AlertDialog.Builder 类型未定义”

出现此错误的原因有两个：

```
builder.setNegativeButton(R.string.cancel, null);
return builder.create();

builder.setOnShowListener(new DialogInterface.OnShowListener() ... 
```

1.  调用后您将永远无法访问任何代码`return`。
2.  [`setOnShowListener()`](https://developer.android.com/reference/android/app/Dialog.html#setOnShowListener%28android.content.DialogInterface.OnShowListener%29)是 AlertDialog 中的方法，而不是 AlertDialog.Builder。

* * *

> 说“AlertDialog.Builder 类型的方法 getButton(int) 未定义”

这是同样的问题，[`getButton()`](https://developer.android.com/reference/android/app/AlertDialog.html#getButton%28int%29)是AlertDialog中的一个方法，而不是AlertDialog.Builder。

* * *

尝试这样的事情：

```
...
builder.setNegativeButton(R.string.cancel, null);

final AlertDialog dlg = builder.create();
dlg.setOnShowListener(new DialogInterface.OnShowListener()
{
    @Override
    public void onShow(DialogInterface dialog)
    {
        Button retrieve = dlg.getButton(AlertDialog.BUTTON_NEUTRAL);
        // Changed this   ^^^
        retrieve.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                //do nothing;
            }
        });
    }
});
return dlg; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:30:48.853

查看[AlertDialog.Builder 文档](http://android.app.AlertDialog.Builder)，`setOnShowListener`不是一个有效的方法`AlertDialog.Builder`。但是，它是 的有效方法`AlertDialog`，它是 的返回类型`builder.create()`。同样 for `getButton`which 实际上是 的一种方法`AlertDialog`。因此，您的代码应该是：

```
AlertDialog alertDialog = builder.create();
alertDialog.setOnShowListener(new DialogInterface.OnShowListener()
{
    @Override
    public void onShow(DialogInterface dialog)
    {
        Button retrieve = alertDialog.getButton(AlertDialog.BUTTON_NEUTRAL);
        retrieve.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                //do nothing;
            }
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T23:44:04.873

或者，您可以只使用标准对话框，然后在需要时将其关闭，或者在用户关闭对话框时收听，而不是创建 AlertDialog。这将是一个更好的选择，而不是使用按钮单击关闭对话框 (AlertDialog) 的默认行为。

# xmpp - XMPP MUC加入时返回错误码404，但存在

> ID：15488843
> 
> 赞同：3
> 
> 时间：2013-03-18T23:25:09.553
> 
> 标签：xmpp, chat

希望有人可以帮助我理解我在尝试加入已经存在的公共 MUC 房间时遇到的错误代码 404。

这是 XMPP 序列：

1.  对房间执行 IQ Query

    ```
    <iq from='bridgetest1@jabber.org/BridgeClient' id='0da67229d8f55e3b' 
    to='sdfsdfsdf@conference.jabber.org' type='get'> 
      <query xmlns='http://jabber.org/protocol/disco#info'/>
    </iq> 
    ```

2.  来自 IQ Query 的响应

    ```
    <iq from='sdfsdfsdf@conference.jabber.org' to='bridgetest1@jabber.org/BridgeClient' type='result' id='0da67229d8f55e3b'>
    <query xmlns='http://jabber.org/protocol/disco#info'>
        <identity category='conference' name='sdfsdfsdf' type='text'/>
        <feature var='http://jabber.org/protocol/muc'/>
        <feature var='http://jabber.org/protocol/muc#unique'/>
        <feature var='muc_temporary'/><feature var='muc_open'/>
        <feature var='muc_public'/><feature var='muc_unsecured'/>
        <feature var='muc_temporary'/><feature var='muc_anonymous'/>
      <x xmlns='jabber:x:data' type='result'>
        <field var='FORM_TYPE' type='hidden'>
          <value>http://jabber.org/protocol/muc#roominfo</value>
        </field>
        <field label='Subject Modifiable' var='muc#roominfo_subjectmod' type='boolean'>
          <value>0</value>
         </field><field label='Current Occupants' var='muc#roominfo_occupants' type='text-single'>
          <value>1</value>
         </field>
      </x>
    </query></iq> 
    ```

3.  尝试使用 Presence 加入房间

    ```
    <presence from='bridgetest1@jabber.org/BridgeClient' id='0da67229d8f55e3b' to='sdfsdfsdf@conference.jabber.org/bbbb'>
       <x xmlns='http://jabber.org/protocol/muc'/>
    </presence> 
    ```

4.  加入响应（错误 404）

    ```
    <presence from='sdfsdfsdf@conference.jabber.org' to='bridgetest1@jabber.org/BridgeClient' type='error' id='0da67229d8f55e3b'>
    <x xmlns='http://jabber.org/protocol/muc'/>
       <error code='404' type='cancel'>
         <item-not-found xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
       </error>
    </presence> 
    ```

有人知道为什么我不能加入房间吗？我刚刚通过加入它创建了那个临时房间，但是在我加入它之后我无法重新进入，即使 IQ 结果显示它是“muc_open”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T02:08:22.630

更新：我正在查看 MUC XEP-0045 文档，发现以下段落解释了我的问题。

[http://xmpp.org/extensions/xep-0045.html#createroom-instant](http://xmpp.org/extensions/xep-0045.html#createroom-instant)

我没有意识到仅仅加入一个房间并没有完成这个过程，你仍然必须告诉服务器你想要接受所有默认设置以及即时房间部分，否则它会保持锁定状态。

作为记录，在创建房间（并成为所有者）之后发送下面的代码片段可以解决我的问题。

```
 <iq from='crone1@shakespeare.lit/desktop'
        id='create1'
        to='coven@chat.shakespeare.lit'
        type='set'>
        <query xmlns='http://jabber.org/protocol/muc#owner'>
            <x xmlns='jabber:x:data' type='submit'/>
        </query>
    </iq> 
```

# mod-rewrite - Mod_Rewrite 掩码在协议切换时失败

> ID：15488847
> 
> 赞同：0
> 
> 时间：2013-03-18T23:25:19.827
> 
> 标签：mod-rewrite

首先让我告诉你，当涉及到 mod 重写时，我比绿色更环保，这可能是正常的行为，但我正在寻找一种方法来阻止它。

```
RewriteRule ^Network-Status/$ ./serverstatus.php [L,NC] 
```

这是我的重写规则，我希望这样做只是重定向到 serverstatus.php，同时仍然掩盖它做得很好的 url，但是 serverstatus.php 被强制非 ssl 我不能改变这个和从 ssl 的协议切换到非 ssl 正在破坏 url 屏蔽。

如果它只是在这一页上，我可以忍受这个，但它不是。我有其他网址以同样的方式被屏蔽，有些不安全。当我从不安全单击到安全时，反之亦然，我看到同样的问题出现了。

我会给你一个例子。

> 安全页面 -> 网络状态/ **URL 屏蔽失败（协议切换）**
> 
> Network-Status/ -> Network-Status/ **URL 屏蔽工作（无协议切换）**
> 
> 网络状态/ -> 安全页面 **URL 屏蔽失败（协议切换）**

如果有人可以帮助我，我会再次成为一个快乐的人，这花了我两天时间研究、调整和尝试不同事物的最好部分，最后我只能得出结论，这确实是协议交换机。

如果这是一个选项，我会简单地为所有非 SSL 连接强制重定向到 SSL，但这根本不是可选的，有三个关键区域的编码强制连接不安全，我无法更改它，所以每当访问这些页面时，我以永无止境的循环结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:44:26.717

如果您必须将`Network-Status`( `serverstatus.php`) 请求为 HTTP，您可以先自己强制执行此操作

```
RewriteCond %{HTTPS} on
RewriteRule ^Network-Status/$ http://%{HTTP_HOST}/$0 [R,L,NC] 
```

然后再进行重写

```
RewriteRule ^Network-Status/$ /serverstatus.php [L,NC] 
```

您也可以对其他页面从非安全到安全执行相同的操作。

```
RewriteCond %{HTTPS} !on
RewriteRule ^other-page$ https//%{HTTP_HOST}/$0 [R,L,NC]
RewriteRule ^other-page$ /otherscript.php [L,NC] 
```

# iphone - 将凭据保存到 iPhone 钥匙串中的教程？

> ID：15488850
> 
> 赞同：2
> 
> 时间：2013-03-18T23:26:09.440
> 
> 标签：iphone, sdk, keychain

我一直在搜索有关如何访问和保存到 iPhone 钥匙串的更新教程，但似乎找不到任何不会给我带来大量错误并使用不推荐使用的代码的教程。

如果有人能引导我走向正确的方向，那就太棒了！

谢谢！

这是我得到的错误：

```
 Undefined symbols for architecture armv7s:
  "_kSecValueData", referenced from:
      -[MainViewController viewDidLoad] in MainViewController.o
  "_kSecAttrAccount", referenced from:
      -[MainViewController viewDidLoad] in MainViewController.o
  "_kSecAttrAccessibleWhenUnlocked", referenced from:
      -[MainViewController viewDidLoad] in MainViewController.o
  "_kSecAttrAccessible", referenced from:
      -[MainViewController viewDidLoad] in MainViewController.o
  "_OBJC_CLASS_$_KeychainItemWrapper", referenced from:
      objc-class-ref in MainViewController.o
ld: symbol(s) not found for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

第二个错误：

```
Undefined symbols for architecture armv7s:
  "_OBJC_CLASS_$_KeychainItemWrapper", referenced from:
      objc-class-ref in MainViewController.o
ld: symbol(s) not found for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:34:25.650

有点过时了，但我们仍然使用 Apple 的 Generic [Keychain wrapper](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Listings/Classes_KeychainItemWrapper_m.html)。

这里还有一个[Gist](https://gist.github.com/dhoerl/1170641)，该类已针对 ARC 进行了更新（我个人没有使用过，但看起来很有希望）。

祝你好运。

**编辑**

根据此错误消息，您是否确定链接`Security`框架？如果没有，方法如下：

1）点击你的项目（左侧导航的蓝条）

2）点击你的目标

3) 单击“构建阶段”选项卡

4) 点击“Link with Binary Libraries”展开

5) 点击左下角的“加号”

6）添加标题为的框架`Security.framework`

**编辑 2**

你确定`#import KeychainItemWrapper.h`进入你`MainViewController`的头文件或实现文件吗？

如果是这样，您能否验证它`KeychainItemWrapper.m`确实包含在您的目标的构建阶段 -> 编译源中？（如果不是，您可以通过左下角的“加号”添加它）。

# perl - 引用数组和顺序

> ID：15488851
> 
> 赞同：3
> 
> 时间：2013-03-18T23:26:19.343
> 
> 标签：perl, hash

假设我有一个哈希，其中的键/值对如下：

```
Name  Scores
Bob 67 89 77 89
Kim 99 98 95 90
Dan 67 90 73 88
   . . .goes on 
```

键是名称，值是测试分数。现在这些值是指数组。

我知道哈希有一个排序函数，但假设我想找到每个学生的中位数分数。

最终输出：

```
Name Median 
Bob 83
( . . .and so on) 
```

要找到中位数，我需要首先按从低到高的顺序排列分数。
是否有哈希排序函数，我可以在其中排序每个学生的考试成绩？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:35:12.557

内置函数唯一`sort`可以排序的是标量列表；它无法对哈希进行排序。事实上，对哈希进行排序是不可能的。相反，对散列的键进行排序。可以很容易地对数组的索引进行排序，但是这里完全不需要这种间接。

您有一个数字列表，并且您希望在不需要任何外部信息的情况下对该数字列表进行排序。

```
my @sorted_scores = sort { $a <=> $b } @scores; 
```

也就是说

```
my @sorted_scores = sort { $a <=> $b } @{ $scores{'Bob'} }; 
```

中位数是

```
my $mid_idx = int(@sorted_scores / 2);
my $median = @sorted_scores % 2
   ? $sorted_scores[$mid_idx]
   : ( $sorted_scores[$mid_idx-1] + $sorted_scores[$mid_idx-0] ) / 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:35:01.077

你应该试试这个模块：

[统计::基本::中位数](https://metacpan.org/module/Statistics%3a%3aBasic%3a%3aMedian)

# mysql - mysql过程调用另一个过程

> ID：15488852
> 
> 赞同：0
> 
> 时间：2013-03-18T23:26:31.980
> 
> 标签：mysql

这在MySQL中可能吗...

我有一个名为“doc_init”的过程（初始化一个文档表）

我有另一个名为“doc_xxx_init”的过程（初始化 doc_xxx 表）

我需要调用 doc_xxx_init，然后在里面它必须做的第一件事就是调用 doc_init "call doc_init(a,b,c)"，它返回一行。我的问题是：如何存储该行，以便在 doc_xxx_init 中的其余处理中访问某些列？在甲骨文我会做这样的事情......

```
create or replace procedure doc_xxx_init....
tempRow doc%rowtype;
begin
tempRow := doc_init(a,b,c);
/*then from here on I could access that row like tempRow.id, or tempRow.anyColumn*/ 
```

我已经看到很多关于如何从另一个过程调用一个过程的例子，但没有看到如何像我需要的那样存储结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:28:48.957

您无法在 MySQL 中捕获存储过程的输出。

但是，您可以`doc_init`创建一个临时表，调用者可以访问该表并希望对其进行适当处理。

# java - Java鼠标“手电筒”效果？

> ID：15488853
> 
> 赞同：3
> 
> 时间：2013-03-18T23:26:36.363
> 
> 标签：java, swing, mouseevent

我正在编写一个简单的 2D 迷宫游戏，您可以在其中穿过许多房间。我想通过限制玩家的视角让它变得有点挑战性。起初我想将框架内的默认鼠标图标替换为半透明的 PNG 椭圆，但后来我意识到我需要屏蔽掉它周围的东西。

我能想到的唯一方法是使鼠标指针图标成为比框架更大的图像（因此当用户移动到角落时它仍然是黑色的）填充它，然后放置清晰的椭圆在指针区域。

我想知道的是，这是否可能，我将如何去做？我正在学习 java，所以示例和 oracle 文档会对我有很大帮助。提前致谢！

从这里和这个[链接](http://scratch.mit.edu/projects/redturtle3/1410037)可以看出（加载需要一段时间） PS：我正在使用 eclipse。

![在此处输入图像描述](../Images/693f7d5d25d6187b4fdc756a88149ebe.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T00:11:51.010

所以你已经确定了基本要求。

*   你需要一个鼠标监听器来监听鼠标的移动，这样你就可以更新聚光灯的位置。阅读[如何编写鼠标监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)
*   您需要在图像上渲染聚光灯效果

以下示例基本上使用 a`RadialGradientPaint`在图像上绘制“聚光灯”。它使用 a`MouseMoitionListener`来监视鼠标的位置并在您移动时更新聚光灯。

![在此处输入图像描述](../Images/0e87edec50a64e598900252bbbcd5eeb.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Paint;
import java.awt.Point;
import java.awt.RadialGradientPaint;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class MouseCover {

    public static void main(String[] args) {
        new MouseCover();
    }

    public MouseCover() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class TestPane extends JPanel {

        public static final int RADIUS = 200;
        private Point mousePoint = null;
        private BufferedImage background;

        public TestPane() {

            MouseAdapter mouseHandler = new MouseAdapter() {
                @Override
                public void mouseMoved(MouseEvent e) {
                    mousePoint = e.getPoint();
                    repaint();
                }

                @Override
                public void mouseExited(MouseEvent e) {
                    mousePoint = null;
                    repaint();
                }
            };

            addMouseMotionListener(mouseHandler);
            addMouseListener(mouseHandler);
            try {
                background = ImageIO.read(...);
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? new Dimension(200, 200) : new Dimension(background.getWidth(), background.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            if (background != null) {
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;
                g2d.drawImage(background, x, y, this);
            }

            Paint paint = Color.BLACK;
            if (mousePoint != null) {
                paint = new RadialGradientPaint(
                        mousePoint,
                        RADIUS,
                        new float[]{0, 1f},
                        new Color[]{new Color(0, 0, 0, 0), new Color(0, 0, 0, 255)});
            }

            g2d.setPaint(paint);
            g2d.fillRect(0, 0, getWidth(), getHeight());

            g2d.dispose();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T23:46:56.353

您正在寻找的通常称为“聚光灯”效果。[如本教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html#events)所述，您将需要使用 JLayer 。

以下是本教程的代码摘录：

```
class SpotlightLayerUI extends LayerUI<JPanel> {
  private boolean mActive;
  private int mX, mY;

  @Override
  public void installUI(JComponent c) {
    super.installUI(c);
    JLayer jlayer = (JLayer)c;
    jlayer.setLayerEventMask(
      AWTEvent.MOUSE_EVENT_MASK |
      AWTEvent.MOUSE_MOTION_EVENT_MASK
    );
  }

  @Override
  public void uninstallUI(JComponent c) {
    JLayer jlayer = (JLayer)c;
    jlayer.setLayerEventMask(0);
    super.uninstallUI(c);
  }

  @Override
  public void paint (Graphics g, JComponent c) {
    Graphics2D g2 = (Graphics2D)g.create();

    // Paint the view.
    super.paint (g2, c);

    if (mActive) {
      // Create a radial gradient, transparent in the middle.
      java.awt.geom.Point2D center = new java.awt.geom.Point2D.Float(mX, mY);
      float radius = 72;
      float[] dist = {0.0f, 1.0f};
      Color[] colors = {new Color(0.0f, 0.0f, 0.0f, 0.0f), Color.BLACK};
      RadialGradientPaint p =
          new RadialGradientPaint(center, radius, dist, colors);
      g2.setPaint(p);
      g2.setComposite(AlphaComposite.getInstance(
          AlphaComposite.SRC_OVER, .6f));
      g2.fillRect(0, 0, c.getWidth(), c.getHeight());
    }

    g2.dispose();
  }

  @Override
  protected void processMouseEvent(MouseEvent e, JLayer l) {
    if (e.getID() == MouseEvent.MOUSE_ENTERED) mActive = true;
    if (e.getID() == MouseEvent.MOUSE_EXITED) mActive = false;
    l.repaint();
  }

  @Override
  protected void processMouseMotionEvent(MouseEvent e, JLayer l) {
    Point p = SwingUtilities.convertPoint(e.getComponent(), e.getPoint(), l);
    mX = p.x;
    mY = p.y;
    l.repaint();
  }
} 
```

我建议阅读有关 Swing 的[整个教程](http://docs.oracle.com/javase/tutorial/uiswing/index.html)，以便了解侦听器的工作原理以及整个代码的基本工作原理。

# ruby-on-rails - 无法在 Rails 中为不存在的模型批量分配受保护的属性

> ID：15488856
> 
> 赞同：2
> 
> 时间：2013-03-18T23:26:45.827
> 
> 标签：ruby-on-rails, ruby

我正在使用 Rails 3.2 和 Ruby 1.9.3。

我知道这已经被一次又一次地问过，但我找不到任何关于我的特殊情况的东西，即使这肯定是非常愚蠢的事情，我也无法弄清楚。

我的关系是这样的：一个产品有很多类别，一个类别有很多属性。

我想在我的视图中创建一个嵌套表单，所以我正在使用

```
= f.fields_for :categories do |category|
      = render 'category_fields', :f => category 
```

为了将类别字段“附加”到产品表单。

问题是，当它转换为 HTML 时，类别输入的名称是“categories_attributes”，如下所示：

```
<label for="product_categories_attributes_0_name">Name</label>
<input id="product_categories_attributes_0_name" type="text" size="30" name="product[categories_attributes][0][name]"> 
```

我是 Rails 新手，但我想它应该是`product[categories][0][name]`而不是`categories_attributes`.

提交表格后，我得到

```
Can't mass-assign protected attributes: categories_attributes 
```

另外，我的模型：

```
class Product < ActiveRecord::Base
  belongs_to :company
  belongs_to :product_type

  has_many :categories, :dependent => :destroy
  accepts_nested_attributes_for :categories

  attr_accessible :comments, :name, :price
end

class Category < ActiveRecord::Base
  belongs_to :product
  has_many :attributes, :dependent => :destroy
  attr_accessible :name

  accepts_nested_attributes_for :attributes
end

class Attribute < ActiveRecord::Base
  belongs_to :category

  attr_accessible :name, :value
end 
```

我绝对确定这只是一个小错误，但我无法发现它。

帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T23:56:20.677

将**categories_attributes**添加到 Product 中的**attr_accessible**调用中：

```
attr_accessible :categories_attributes, :comments, :name, :price 
```

将**attributes_attributes**添加到类别中的**attr_accessible**调用中：

```
attr_accessible :name, :attributes_attributes 
```

**更新：**

这里发生了三件事，我不确定哪一件你不能解决。

在您的 Product 模型中使用**accept_nested_attributes_for :categories会向您的模型添加****categories_attributes=(attributes)**方法，并允许您通过父级将属性保存在关联记录上（通过*关联*_attributes hash 传递它们）。

这一切都是因为当您在表单中使用 fields_for 帮助器时如何构建**params哈希。**

更简单的例子：

```
class Product < ActiveRecord::Base
  has_many :categories
  accepts_nested_attributes_for :categories

  attr_accessible :categories_attributes, :name
end 
```

如果您通过此表单创建产品：

```
<%= form_for @product do |f| %>
  Name: <%= f.text_field :name %>

  <%= f.fields_for :categories do |c| %>
    <%= c.text_field :name %>
    <%= c.text_field :desc %>
  <% end %>

 <%= f.submit %>
<% end %> 
```

您的参数哈希将包括：

```
{ :product => { :name => 'Tequila', :categories_attributes => { :name => 'essentials', :desc => 'i need more of it' } } } 
```

或简化：

```
{ :product => { :name => 'Tequila', :categories_attributes => { ... } } } 
```

在您的控制器中创建产品时：

```
@product = Product.new(params[:product]) 
```

您将**:name => 'Tequila', :categories_attributes => { ... }**哈希传递给 Product.new。您正在向它传递两个参数**:name**和**:categories_attributes**。Rails 安全性要求您将所有传递给新的参数的参数列入白名单，使用**attr_accessible**行创建方法。当你省略**:categories_attributes**时， rails 会抱怨：

```
Can't mass-assign protected attributes: categories_attributes 
```

让我知道这是否可以清除所有内容。

更多关于[嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for)

更多关于[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

更多关于[批量分配](http://guides.rubyonrails.org/security.html#mass-assignment)

# activeadmin - 活动管理员在 register_page 中创建表单

> ID：15488861
> 
> 赞同：7
> 
> 时间：2013-03-18T23:27:28.443
> 
> 标签：activeadmin, formtastic

使用 ActiveAdmin (0.5.1) 我想制作多种不同的形式来创建对象并将其保存到我的数据库中。我正在尝试通过使用来做到这一点`ActiveAdmin.register_page`，但是在尝试创建表单时遇到了麻烦。似乎在使用时`register_page`，您没有得到与调用相同的`form`方法。`register`这是代码：

```
ActiveAdmin.register_page "New Object" do
  content do
    para "Here you can create new objects!"
    para "This content will be replaced with links to the specialized forms"
  end
end 
```

以及其中一种形式的代码：

```
ActiveAdmin.register_page "Type 1" do
  menu :label => "Type 1", :parent => "New Object"

  content do
    panel "Attributes" do
      form do |f|
        f.input :color
        f.input :size
    end
  end
end 
```

但是，此表单不会以任何可行的方式呈现。此外`f.inputs`，您可以在示例中看到的许多其他方法（如[this](http://activeadmin.info/docs/5-forms.html)）都不起作用。是否可以使用 制作功能齐全的表格`ActiveAdmin#register_page`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:24:25.537

要在非标准上下文中创建表单（即，不是资源寄存器），您需要使用指定`semantic_form_for`了`:url`and`:builder`选项的 formtastic。

```
content do
  semantic_form_for MyObject.new, :url => admin_my_objects_url, :builder => ActiveAdmin::FormBuilder do |f|
    f.inputs "My Object" do
      f.input :color
      f.input :size
    end
    f.actions
  end
end 
```

这将为您提供一个标有“我的对象”的面板，其中包含您的对象的表单，其下方有一个提交按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-07T13:56:50.557

```
ActiveAdmin.register_page "Families Placement" do
  menu label: "Populaire Familles"

  page_action :update, method: :post do
    Family.find(params['id']).update_attributes(id_1: params['id_1'], id_2: params['id_2'])
    redirect_to "/"
  end

  content do
    Family.all.order(id: :asc).each do |family|
        form action: "families_placement/update", method: :post do |f|
            columns do
          panel family.name do
            f.input :id, type: :hidden, value:  family.id, name: 'id'
            f.input :id_1, as: :select, collection: collect_posts, value: family.id_1, name: 'id_1'
            f.input :id_2, as: :select, collection: collect_posts, value: family.id_2, name: 'id_2'
            f.input :authenticity_token, type: :hidden, name: :authenticity_token, value: form_authenticity_token
            f.input :submit, type: :submit
          end
        end
      end
    end
  end
end 
```

您在自定义 ActiveAdmin 页面中有一个工作表单的示例。添加很重要

```
f.input :authenticity_token, type: :hidden, name: :authenticity_token, value: form_authenticity_token 
```

这是我找到所有信息的地方：[https ://asafdav2.github.io/2016/adding-forms-to-activeadmin-custom-pages/](https://asafdav2.github.io/2016/adding-forms-to-activeadmin-custom-pages/)

# c# - 在 PictureBox 中绘制列表树

> ID：15488862
> 
> 赞同：1
> 
> 时间：2013-03-18T23:27:29.677
> 
> 标签：c#, tree

我正在尝试画一棵树，但我找不到让“分支”不重叠的方法。我需要以前做过这件事的人来给出一个绝妙的主意。我尝试了一些不起作用的方法（或者我使用不当），所以我愿意接受任何建议。

这是我用来绘制树的代码：

```
public void drawNode(Graphics g, Node node, float x, float y)
            {
                Font sFont = new Font("Helvetica",13);
                if (node.Left == null && node.Right == null)
                {
                    g.DrawLine(Pens.Black, x, y, x, y + 20);
                    g.DrawString(node.litera.ToString(), sFont, Brushes.Blue, x, y + 25);
                }
                else
                {
                    if (node.Left != null)
                    {
                        g.DrawLine(Pens.Black, x, y, x - 20, y + 20);
                        drawNode(g, node.Left, x - 20, y + 20);

                    }
                    if (node.Right != null)
                    {
                        g.DrawLine(Pens.Black, x, y, x + 20, y + 20);
                        drawNode(g, node.Right, x + 20, y + 20);

                    }
                }
            } 
```

一切都正确绘制，除了重叠问题。

# jquery - Fuelux Datagrid 打破了引导下拉菜单

> ID：15488865
> 
> 赞同：8
> 
> 时间：2013-03-18T23:27:46.127
> 
> 标签：jquery, twitter-bootstrap, drop-down-menu, datagrid, fuelux

我在使用 FuelUX 的数据网格组件时遇到问题。在我实现数据网格组件的网站页面之一，引导程序提供的下拉菜单停止工作。

我正在使用：jQuery 1.9.0、fuelUX 2.3.0、Bootstrap 2.3.1 我没有使用：requireJS。

我引入了 FuelUX css 文件和 loader.js 文件。引导菜单适用于除此页面之外的所有其他页面。datagrid 组件似乎运行得很好，只是它自己的选择菜单也不起作用。

任何指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T00:07:47.210

通过使用 Fuel UX 中的 loader.js，您已经引入了 Bootstrap。Fuel UX 2.3.0 包含 Bootstrap 2.3.0，因此如果您的页面另外加载 Bootstrap 2.3.1，则可能会发生冲突。请参阅此示例[http://tinkerbin.com/0RXOjPNd](http://tinkerbin.com/0RXOjPNd)加载 jQuery 1.9.1 和 Fuel UX/Bootstrap 2.3.0。请注意，您确实需要单击绿色的 RUN 按钮才能在 tinkerbin 上启动脚本。

Fuel UX 错误修复版本 2.3.1 - 也将包括 Bootstrap 2.3.1 - 将很快发布，但如果您想尝试近乎完成的工作，分发文件位于[https://github 的主分支中。 com/ExactTarget/fuelux/tree/master/dist](https://github.com/ExactTarget/fuelux/tree/master/dist)

我希望这能让你跑步！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T01:28:53.263

有同样的问题，并通过删除我的引导程序包含来修复它。唯一棘手的问题：我需要比在fuelux 中加载的引导程序更早的引导程序（我需要v3，fuelux 加载v2）。知道如何解决吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T07:26:16.720

我遇到了同样的问题：

“javascripts/libs/bootstrap.js”

“javascripts/libs/loader.min.js”

上面的行处于冲突状态：在包含 loader.min.js 后，我所有的引导下拉菜单都被破坏了。我发现的第一个解决方法是在我使用 Fuel UX 向导的页面上分离这两个 js 文件。但事实证明，我的 bootstrap 手风琴坏了，导致这个页面完全使用 bootstrap.js。

我通过更新 Fuel UX Wizard.js 解决了这个问题，我需要删除 AMD 相关代码。这有效。

我使用 bootstrap v3.1.1 和最后的 Fuel UX - v2.6.0 - 2014-02-14 等待 Fuel UX 创建者的正确修复。

# php - 使用 Javascript/AJAX 和 PHP 打印值

> ID：15488870
> 
> 赞同：0
> 
> 时间：2013-03-18T23:28:34.153
> 
> 标签：php, javascript, html, mysql, ajax

我正在用 PHP、Javascript 和 MySQL 创建一个下拉菜单。我通过 Javascript/AJAX 成功地与另一个 PHP 文件通信。在 javascript 中，我发送一个带有我在 PHP 文件中捕获的 URL 的 ID。在 PHP 文件中，我想检查 ID 的值，然后用它来检查它应该执行什么查询。然后我想在每次翻转时打印这些值。我想我快到了，但我现在很震惊。

Javascript：

```
function onRollOver(id)
{
    if (window.XMLHttpRequest)
    {
        test=new XMLHttpRequest();
    }
    else
    {
        test=new ActiveXObject("Microsoft.XMLHTTP");
    }

    // document.getElementById('test').style.display="block";

    if (id == 1)
    {
        console.log("This is one"); 
    }
    else if (id == 2)
    {
        console.log("this i stwo");
    }
    console.log("id = " + id);

    test.open("GET","get_menu_id.php?id="+id,true);
    test.send();
}

function onRollOut()
{
    document.getElementById('test').style.display="none";
} 
```

PHP 和 HTML：

```
while($names = $get_category_names->fetch_object())
{
    $li_data = "<li data-dir=";

    //echo $li_data . $names->id . ">" . $names->name . "</li>";

    echo "<a onmouseover='onRollOver($names->id);' onmouseout='onRollOut($names->id);' >" . "$names->name" . "</a>"; 
} 
```

外部 PHP 文件：

```
<?php

require_once("../includes/constants.php");
require_once("../includes/connection.php"); 
require_once("functions.php");

$connect = connectDB();

//get the q parameter from URL
$id=$_GET["id"];

//lookup all hints from array if length of q>0
echo $id;

if ($id == 1)
{
    $nintendo = $connect->query("SELECT DISTINCT (categorypath) FROM feeds WHERE category_id = 1");

    while($names = $nintendo->fetch_object())
    {
        echo "<p>" . $names->categorypath . "</p>";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:53:48.917

对于...`onRollover`之后的函数，将包含您的外部 php 文件的回显内容。我不确定你想用它们做什么。`test.send()``test.responseText`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:55:23.313

我将从了解[onreadystatechange、readyState 和 responseText](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)开始。

# ios - 如何知道plist文件的哪一行不正确

> ID：15488872
> 
> 赞同：53
> 
> 时间：2013-03-18T23:28:42.700
> 
> 标签：ios, plist

我从 csv 格式的文件为我的应用程序生成 plist 文件。

一切似乎都是正确的，但是当我尝试在 XCode 中构建应用程序或打开 plist 文件时，我收到一个错误通知：

> mydata.plist:0: error: reading plist: 无法读取数据，因为它已损坏。

文件包含大量数据，因此可能很难手动找到不正确的行。

是否可以验证文件并获取哪一行不正确的信息？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-03-19T00:33:13.470

尝试在终端中运行以下命令：

```
plutil <PATH_TO_FILE> 
```

它会告诉您问题所在并为您提供行号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-28T14:59:28.663

在 Chrome 浏览器中打开 plist 文件会给出错误行号。

# php - MAMP：无法执行 MySQL 查询

> ID：15488878
> 
> 赞同：0
> 
> 时间：2013-03-18T23:29:01.420
> 
> 标签：php, mysql, mamp

一些背景知识：我最初尝试在 Windows 上执行 Apache、MySql 和 PHP，每个都单独安装（那是什么 PITA！）。最后我听说我会更适合mac，所以我得到了MAMP。

很高兴发现一切都已安装，我尝试使用它。基本上一切正常，除了 MySQL 查询（我正在尝试将数据插入表中）。

这是我的代码：

```
<h1>hello world</h1>
<?php
echo "hello ";
echo date('H:i:s, jS F Y');
$link = mysql_connect('localhost', 'root', 'root');
if ($link)
    echo "success";
else
    echo "failure";

$db_selected = mysql_select_db('MyDB', $link);
if ($db_selected) 
    echo "success";
else
    echo "failure";

$my_query = mysql_query($link,"INSERT INTO comments (cName, cComment)
VALUES ('Peter', 'Hellloooooo')");

if ($my_query)
    echo "success";
else
    echo "failure";

mysql_close($link);
?> 
```

我的输出如下所示：

> 你好世界
> 
> 你好 2013 年 3 月 19 日 00:14:12successsuccessfailure

如您所见，mysql_connect 和 mysql_select_db 有效，但 mysql_query 无效。我花了很多徒劳的时间试图弄清楚这一点。代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:32:46.277

尝试

```
$my_query = mysql_query("INSERT INTO comments (cName, cComment)
VALUES ('Peter', 'Hellloooooo')", $link); 
```

下次更好的mysqli或PDO。

**更新：** Mysqli：你需要创建 mysqli 连接

```
$mysqli = mysqli_connect("host", "user", "password", "database");
$stmt = $mysqli->prepare("INSERT INTO comments(cName, cComment) VALUES (?, ?)");

$name = 'Peter';
$comment = 'Haloooo';
$stmt->bind_param("ss", $name, $comment);
$stmt->execute(); 
```

# ruby-on-rails - Rails has_many：通过（带有附加属性）保存问题

> ID：15488879
> 
> 赞同：2
> 
> 时间：2013-03-18T23:29:02.960
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, has-many-through, nested-class

我有下面定义的模型结构。我正在尝试将连接表的附加属性与用户一起保存到计划中。在 Rails 控制台中，我执行以下操作（用于测试）。我遇到了一个大规模分配问题，我在这里关注了很多帖子，所有的 accept_nested_attributes_for 建议都无济于事。如何执行以下操作？

```
u = User.last
p = Plan.new(:name => 'some name here', :description => 'something here')

p.userPlans.build(:user => u, :is_owner => true) 

# error on the above 'can't mass-assign protected attributes: user'
# would like to do p.userPlans.build for a number of users

p.save 
```

有没有办法将多个用户连同附加的连接表属性一起保存到一个计划中，然后进行一次保存？我应该这样做：

```
u = User.last
p = Plan.new(:name => 'some name here', :description => 'something here')
p.userPlans.build(:user_id => u.id, :is_owner => true) 
p.save 
```

所以我想要的是一个计划，有几个用户，其中一些用户将具有 is_owner = true 和一些设置为 false。我以为我可以将用户对象直接传递给 userPlans.build？

任何帮助将不胜感激。我看不到我在这里缺少什么或者我正在做的事情可以接受吗？

```
#user is devise
class User < ActiveRecord::Base
  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, 
                  :remember_me, :token_authenticatable, 
                  :invited, :confirmed_at, :signed_in_count, 
                  :first_name, :last_name, :userPlans_attributes

  has_many :userPlans
  has_many :plans, :through => :userPlans

  accepts_nested_attributes_for :userPlans, :allow_destroy => true
 .
 .
 .

class Plan < ActiveRecord::Base
  attr_accessible :description, :name, :user_id, :userPlans_attributes

  has_many :userPlans
  has_many :users, :through => :userPlans

  accepts_nested_attributes_for :userPlans, :allow_destroy => true

end

class UserPlan < ActiveRecord::Base
  attr_accessible :decision, :is_owner, :plan_id, :token, :user_id

  belongs_to :plan
  belongs_to :user

end 
```

# java - 将 ListCellRenderer 应用于 JList 上的单个单元格

> ID：15488883
> 
> 赞同：0
> 
> 时间：2013-03-18T23:30:05.710
> 
> 标签：java, swing, jlist, listcellrenderer

是否可以将 a 应用于 a`listcellrenderer`中的一个单元格`jlist`？我的代码目前在应用渲染器时工作正常，但我想为每个条目设置一个不同的动态变量。抱歉，如果这有点模糊..

综上所述 - 我只想应用`listcellrenderer`到列表中的一个单元格，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:09:52.217

您必须将 ListCellRenderer 应用于列表中的所有元素，但这并不意味着它必须以相同的方式呈现所有元素。例如，您可以根据其值（原始值或什至仅基于值的类，甚至基于单元格的索引）呈现单元格：

```
package com.example;

import java.awt.Color;
import java.awt.Component;

import javax.swing.DefaultListCellRenderer;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;

public class ListCellRendererExample extends JFrame {

    public ListCellRendererExample() {
        DefaultListModel model = new DefaultListModel();
        model.addElement(Color.BLUE);
        model.addElement("hello");
        model.addElement(5);
        model.addElement(Color.RED);

        JList jlist = new JList(model);
        jlist.setCellRenderer(new SuperDuperListCellRenderer());
        add(new JScrollPane(jlist));

        setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
        setLocationByPlatform(true);
        setVisible(true);
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        new ListCellRendererExample();
    }

    private static class SuperDuperListCellRenderer extends DefaultListCellRenderer {
        @Override
        public Component getListCellRendererComponent(JList list, Object value,
                int index, boolean isSelected, boolean cellHasFocus) {

            // If the value is a color, give the cell a blank value but save its
            // value so we can later change its background to the value's color.
            Color bgColor = null;
            if (value instanceof Color) {
                bgColor = (Color) value;
                value = " ";
            }

            // Prepend the index to the "even" rows (the first row is row 1)
            if ((index + 1) % 2 == 0) {
                value = index + ": " + value;
            }

            Component renderComponent = super.getListCellRendererComponent(
                    list, value, index, isSelected, cellHasFocus);

            // If the value is a color, set the cell's background to that color.
            if (bgColor != null) {
                renderComponent.setBackground(bgColor);
            }

            return renderComponent;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T23:32:55.030

> 是否可以将 listcellrenderer 应用于 jlist 中的一个单元格？

不，所有单元都必须共享相同的渲染器。这就是渲染器的工作方式。

> 我的代码目前在应用渲染器时工作正常，但我想为每个条目设置一个不同的动态变量。

这是可以做到的。渲染器可以根据它应该渲染的数据的状态来改变它渲染单元格的方式。

> 抱歉，如果这有点模糊..

如果您解释更多并显示代码总是更好。

> 综上所述 - 我想将 listcellrenderer 应用于列表中的一个单元格，我该怎么做？

再次让渲染器的行为取决于单元格所持有的值。要获得更详细的答案，请考虑创建和发布[sscce](http://sscce.org)并进行更多解释（例如，如何以不同方式呈现？）。

# sql - 具有 >20 严重性和数据库权限的 RAISERROR

> ID：15488890
> 
> 赞同：1
> 
> 时间：2013-03-18T23:31:01.457
> 
> 标签：sql, azure-sql-database, database-permissions, raiserror

我正在尝试将 INSTEAD OF 触发器部署到 Sql Azure 数据库。除其他外，它可能会执行以下行：

```
raiserror('error text', 20, 1, @somevar) with log; 
```

Sql Server 中任何严重性大于或等于 20 的内容都需要“with log”命令，该命令需要 ALTER TRACE 权限。好的，没问题，除了我不知道如何授予我的 Sql Azure 用户运行它的权限。Sql Azure 不支持 sp_addrolemember，以下情况：

```
grant alter trace to MyUser 
```

失败并显示此晦涩的消息：

> 消息 40520，级别 16，状态 1，行 1 此版本的 SQL Server 不支持安全类“服务器”。

谷歌搜索上述错误很少，而且 MSDN 的[文档](http://msdn.microsoft.com/en-us/library/windowsazure/ee336226.aspx)也很模糊。

# php - 如果变量等于 href 插入类以链接

> ID：15488896
> 
> 赞同：1
> 
> 时间：2013-03-18T23:32:05.463
> 
> 标签：php, html, url-routing, hyperlink

我正在尝试创建一个导航，当用户位于链接的 href 页面内时，它会应用颜色。所以我搜索了一下，我认为最好的方法是使用：

```
$url = $_SERVER['REQUEST_URI']; 
```

`<a>`在我应该创建一个 if 语句之后，如果 url 与我的导航的 href 相同，它应该在元素中插入一个类。此类将通过 CSS 应用颜色。

如果有帮助，这里有我的 html 导航：

```
 <div id="categories">
                    <ul>
                        <li id="nav-quien"><a href="biografia.php">quien es</a>
                            <ul>
                                <li id="nav-biografia" class="drop1"><a href="biografia.php">biografia</a></li>
                                <li id="nav-curriculum" class="drop2"><a href="curriculum_todos.php">curriculum</a></li>
                            </ul>
                        </li>
                        <li id="nav-galeria" class="marginli"><a href="gallery.php">galeria</a>
                            <ul>
                                <li id="nav-gal-nat" class="drop3"><a href="gallery_natural.php">paisaje natural</a></li>
                                <li id="nav-gal-urb" class="drop4"><a href="gallery_urbano.php">paisaje urbano</a></li>
                            </ul>
                        </li>
                        <li id="nav-prensa" class="marginli"><a href="prensa.php">prensa</a></li>
                        <li id="nav-links" class="marginli"><a href="links.php">links</a></li>
                        <li id="nav-contacto" class="marginli"><a href="contacto.php">contacto</a></li>
                    </ul>
                </div> 
</div> 
```

我正在尝试了解如何使用 request_uri，因为我认为它非常有用。因此，任何帮助都非常受欢迎！

:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:38:35.363

我通常会这样做：

```
<?php

function is_active($page) {
    return $_SERVER['REQUEST_URI'] == $page;
}
?>

<style>
.active_page {
    font-weight: bold;
}
</style>

<a class="<?php echo is_active('/biografia.php') ? 'active_page' : '' ?>" href="biografia.php">quien es</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:42:52.440

根据[PHP Manual](http://php.net/manual/en/reserved.variables.server.php)， $_SERVER['REQUEST_URI'] 返回：

> 为访问此页面而提供的 URI；例如，'/index.html'。

因此，对于每个菜单项，您需要检查 $_SERVER['REQUEST_URI'] 是否与您的 href 字符串匹配。

```
<li id="nav-quien"><a href="biografia.php"
<?php
    if($_SERVER['REQUEST_URI'] == "/biografia.php")
    {
        echo ' class="active" ';
    }
?>
>quien es</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T00:03:34.090

```
<?php
    function theUrl($link) {
        $uri = $_SERVER['REQUEST_URI'];
        if($link==$uri) {
            return 'class="active"';
        }
    }
?> 
```

HTML

```
 <ul>
        <li><a href="" <?php echo theUrl('/index.php')?>>Home</a></li>
        <li><a href="" <?php echo theUrl('/about.php')?>>About</a></li>
        <li><a href="" <?php echo theUrl('/work.php')?>>Work</a></li>
        <li><a href="" <?php echo theUrl('/contact.php')?>>Contact</a></li>
    </ul> 
```

这是我在我的网站上使用的脚本的修改版本。唯一的区别（与我的网站的代码），我的目标是第一个子目录，而不是`uri`，它允许我在其中拥有无限的页面/内容，并保持正确的主导航链接突出显示。（即`www.mysite.com/work/`）

```
<a href="/work" <?php echo theUrl('work')?>>Work</a>
(you can't use URI for this technique) 
```

# ruby - 如何将多个参数传递给 Ruby 方法

> ID：15488899
> 
> 赞同：3
> 
> 时间：2013-03-18T23:32:35.927
> 
> 标签：ruby

一次将一个参数传递给解析器方法是可行的。不止一个，它会产生“语法错误，意外'，'，期待'）'（SyntaxError）”

```
$array = []
array_1 = %w(tuna salmon herring)
array_2 = %w(crow owl eagle dove)

def parser (*argument)
  argument.each do |item|
    $array << item
  end
end

parser (array_1, array_2) # taking multiple arguments generates error
$array.flatten!
puts $array 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:35:53.210

这是括号前的空间。去掉它。它没有将`array_1`and`array_2`视为 args，而是将其视为带括号的表达式（整个表达式为一个 arg）并抱怨逗号。您的代码应如下所示

```
parser(array_1, array_2) 
```

顺便说一句，Ruby 1.8.7 似乎只是在行为正确之前发出了一个警告。

# jquery - 使用 JQuery css 方法自定义 CSS 光标

> ID：15488900
> 
> 赞同：4
> 
> 时间：2013-03-18T23:32:38.630
> 
> 标签：jquery, css

有没有办法可以使用 JQuery 的 .css() 方法来提供以下光标样式？：

```
cursor: url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), default !important; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T23:44:27.507

jQuery 不理解`!important`，所以如果你删除它，它会起作用：

```
$('selector').css({
    'cursor': 'url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), default'}); 
```

有办法绕过它，为什么不使用 CSS 类呢？

```
/* CSS */
.cursor {
    cursor: url('http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur'), default !important;
} 
```

所以你可以：

```
$('selector').addClass('cursor'); 
```

还有其他选择，请参阅：[如何使用 .css() 应用 !important？](https://stackoverflow.com/questions/2655925/jquery-css-applying-important-styles)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:44:18.400

[使用下面的代码对我来说](http://jsfiddle.net/HvPvL/3/)似乎工作正常，但是如上所述，我删除`!important`了使它工作的。

```
$('#cursor').css(        
    'cursor','url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur),default'
); 
```

# python - 将集合添加到字典

> ID：15488901
> 
> 赞同：0
> 
> 时间：2013-03-18T23:32:42.173
> 
> 标签：python, function, dictionary, tuples

我有一个文件`random.txt`，我需要从中提取每个单词，并在字典中索引位置和字母。例如，它将如下所示：`{(3,'m'):'example'}`. 每次有一个单词在同一位置具有相同的索引字母时，它只会将该单词添加到字典的值中，因此`{(3,'m'):'example','salmon'}`不会单独打印每个单词。

这就是我所拥有的，它不会每次都将单词添加到键的值中，而只是每次都使其成为自己的值。

```
def fill_completions(c_dict, fileObj):
    import string
    punc = string.punctuation
    for line in fileObj:
        line = line.strip()
        word_list = line.split()    #removes white space and creates a list
        for word in word_list:
            word = word.lower()     
            word = word.strip(punc) #makes lowercase and gets rid of punctuation
            for position,letter in enumerate(word):
                "position: {} letter: {}".format(position,letter)
                my_tuple = (position,letter)
                if word in my_tuple:
                    c_dict[my_tuple] += word
                else:
                    c_dict[my_tuple] = word
        print(c_dict) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:42:37.823

目前您正在添加一个字符串，然后附加到该字符串。

您需要将一个元组作为您的值，然后添加到元组中。

```
>>> m = dict()
>>> m['key'] = 'Hello'
>>> m['key'] += 'World'
>>> print m['key']
HelloWorld
>>>
>>> m['key'] = ('Hello',)
>>> m['key'] += ('World',)
>>> print m['key']
('Hello', 'World')
>>> # Or, if you want the value as a list...
>>> m['key'] = ['Hello']
>>> m['key'].append('World')
>>> print m['key']
['Hello', 'World'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:56:48.573

我认为您想将填充`c_dict`在最内层循环中的代码更改为以下内容：

```
 if my_tuple in c_dict:
                c_dict[my_tuple].add(word)
            else:
                c_dict[my_tuple] = set([word]) 
```

`dict.setdefault()`这是一个更简洁的等效版本：

```
 c_dict.setdefault(my_tuple, set()).add(word) 
```

# mysql - SQL 列作为选择

> ID：15488907
> 
> 赞同：0
> 
> 时间：2013-03-18T23:33:02.593
> 
> 标签：mysql, sql, sqlite

在 SQLite 和/或 MySQL 中，是否可以将列定义为`SELECT`语句？

就像列`Book.NumOfPages`实际上是一样`SELECT COUNT(*) FROM PAGES WHERE BOOK_ID=BOOK.ID`，所以 NumOfPages 会自动计算分配给某本书的页数。

请注意，我知道如何在一次选择中获取书籍数量。我想知道是否可以将 select 语句定义为列的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:03:48.497

目前尚不清楚您要实现什么目标，但您至少有以下选择：

1.  使用子查询在 SELECT 语句中定义新列（示例 1）
2.  将 p.1 中描述的查询包装在外部`SELECT`，以便进行连接、分组、计算聚合等（示例 2）
3.  根据第 1 页中描述的查询创建视图（示例 3）
4.  以同样的方式创建存储过程
5.  还有一个选项 - 在父表（在您的案例书中）中创建一列，并在子表（在您的案例页面中）上使用触发器 INSERT、UPDATE、DELETE 填充它。这种非规范化方法通常在非常特定的情况下使用（例如，当您需要加速分析查询时）。

示例 1

```
SELECT id, `title`, 
       (SELECT COUNT(*)
          FROM pages p 
         WHERE p.book_id = b.id) npages
  FROM books b 
```

输出

```
| ID | TITLE | NPAGES |
-----------------------
|  1 | book1 |      3 |
|  2 | book2 |      2 | 
```

**[MySql SQLFiddle](http://sqlfiddle.com/#!2/83bf6/1)**

**[SQLLite SQLFiddle](http://sqlfiddle.com/#!5/50a66/1)**

示例 2

```
SELECT SUM(npages) total_pages
FROM (SELECT id, `title`, 
       (SELECT COUNT(*)
          FROM pages p 
         WHERE p.book_id = b.id) npages
  FROM books b) t 
```

示例 3 创建视图

```
CREATE VIEW vw_books AS
SELECT id, `title`, 
       (SELECT COUNT(*)
          FROM pages p 
         WHERE p.book_id = b.id) npages
  FROM books b 
```

示例 4 创建 SP

```
DELIMITER $$
CREATE PROCEDURE sp_books()
BEGIN
SELECT id, `title`, 
       (SELECT COUNT(*)
          FROM pages p 
         WHERE p.book_id = b.id) npages
  FROM books b;
END$$

DELIMITER ; 
```

并使用它

```
CALL sp_books(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:34:41.330

我相信这就是您的想法：[http://en.wikipedia.org/wiki/View_(database)](http://en.wikipedia.org/wiki/View_(database))

数据库视图允许您制作一个“假”表，其中包含对其他表的查询。我知道它适用于 MySQL，但我不会对 SQLite 做出任何承诺。

# php - Laravel Routes.php 的简单 HTTP 请求问题

> ID：15488910
> 
> 赞同：1
> 
> 时间：2013-03-18T23:33:10.910
> 
> 标签：php, url-routing, laravel

我正在尝试让最基本的功能在 Laravel 上工作，但我真的很难过。我希望客户端能够以 www.mysite.com/laravel/public/this 的形式发送请求，并从主文件夹返回 home.index 视图文件，所有这些都由在laravel/application/routes.php 文件。

安装中包含的以下函数正确路由并演示 www.mysite.com/laravel/public 工作以获取用户的 http 请求并返回正确的数据

```
Route::get('/', function()
{
return View::make('home.index');
}); 
```

但是，只要我将“/”更改为“this”并发送请求...

```
Route::get('this', function()
{
return View::make('home.index');
}); 
```

我得到“未指定输入文件”。信息。这是怎么回事？我已经用 localhost 试过了，它工作正常，但我希望它在我的 godaddy 共享 php 服务器上工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:21:12.977

它太简单了。

转到公共目录中的 htaccess 并更改

重写规则 ^(.*)$ index.php/$1 [L]

到

RewriteRule ^(.*)$ index.php?$1 [L]

[http://forums.laravel.io/viewtopic.php?id=1508](http://forums.laravel.io/viewtopic.php?id=1508)

我不敢相信仅仅一个角色就让我如此沮丧

# c# - 客户端到客户端通信 Windows 8

> ID：15488914
> 
> 赞同：0
> 
> 时间：2013-03-18T23:33:30.573
> 
> 标签：c#, windows-8

我想在 Windows 8 中为 2 名玩家制作简单的游戏。

是否可以从第一人称向第二人发送数据？

做这个的最好方式是什么？

1）推送通知？

2) 每 5 秒从服务器刷新一次数据？

# javascript - Jquery：当主菜单悬停在子菜单项上时停止效果

> ID：15488916
> 
> 赞同：0
> 
> 时间：2013-03-18T23:34:03.293
> 
> 标签：javascript, jquery, jquery-selectors

我在主菜单中有一个嵌套的子菜单。当用户将鼠标悬停在主菜单项上时，图像会淡入并在悬停时淡出。子菜单也是如此。

我的问题是当我将鼠标悬停在其嵌套子菜单上时，主菜单项中的图像不会淡出。我试过使用`.not()`（例如：）`.not('ul li')`但没有效果。

当子菜单项悬停在上面时，我也尝试直接定位父项，也没有效果。（例如`$(this).parent().parent().find("a").html();`：）

有谁知道修改我的脚本的方法，以便将鼠标悬停在第一个菜单项上不会影响第二个嵌套项？

```
//FADE SUB MENU IMAGES    
$("#menu > ul > li > ul > li").hover(
      function () {
        var linktext = $(this).find("a").html(); 
        $('img[alt="' + linktext + '"]').stop().fadeIn('100');
         //FADEOUT PRIMARY MENU ITEM IMAGE
         var linktexttop = $(this).parent().parent().find("a").html();
        $('img[alt="' + linktexttop + '"]').stop().fadeIn('100');
      },
      function () {
        var linktext = $(this).find("a").html();
        $('img[alt="' + linktext + '"]').fadeOut('100');
      }
    ); 
```

编辑：添加小提琴：

[http://jsfiddle.net/veW7B/3/](http://jsfiddle.net/veW7B/3/)

在小提琴中 - 当子菜单悬停在我只想显示蓝色方块时，而不是两者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:20:41.087

您可以使用[has()](http://api.jquery.com/has/)和[not()](http://api.jquery.com/not/)来选择哪个 'li' 有孩子，哪个没有。

用于`$('li').has('ul').hover()`主 li，`$("li:not(:has(ul))").hover()`用于子菜单

我在这里更新了你的小提琴[http://jsfiddle.net/veW7B/5/](http://jsfiddle.net/veW7B/5/)

# vb.net - 将嵌套的 for 循环转换为 LINQ

> ID：15488917
> 
> 赞同：2
> 
> 时间：2013-03-18T23:34:06.783
> 
> 标签：vb.net, linq

我有以下对象结构

一个团队有很多团队，一个团队有很多玩家

`m_Groups`是一组可观察的集合

我试图让团队名称给定一个组名和一个玩家名，我可以为每个人这样做，但在将其转换为 LINQ 时遇到了麻烦：

```
Dim retVal As String = String.empty  

For Each g In m_Groups
  For Each t In g.Teams
    For Each p In t.Players
      If p.PlayerName.Equals(name) Then
        retVal = t.TeamName
      End If
    Next
  Next
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:53:44.043

```
Dim teamName = (From group in Groups _
                From team In group.Teams _
                From player In team.Players _
                Where player.PlayerName.Equals(name) _
                Select team.TeamName).FirstOrDefault() 
```

（免责声明：我主要是在猜测上面的 VB 语法。）

另外，我处理像你这样的情况的实际方法是给玩家一个`Team`属性并在加载后将它们连接一次，而不是每次都进行查找。（假设玩家分配没有改变，双向连接需要一些样板来维护。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:42:57.870

显然有几种方法可以做到，这就是我想到的

```
 var team = m_Groups
       .SelectMany(g=>g.Teams)
       .FirstOrDefault(t=>t.Players.Any(p=>p.PlayerName == name)); 
```

我希望你能自己把它转换成VB

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T02:06:55.597

通过您的设置，我假设您每次需要搜索特定团队时都会执行 LINQ 查询。更好的方法是具有线性结构，例如字典，它具有`name`键。

保持接近你在那里的东西，这里有一些代码可以玩：

```
Option Strict On

Public Class Form1
  Class MyGroup
    Public Teams As New List(Of MyTeam)
  End Class
  Class MyTeam
    Public Players As New List(Of MyPlayer)
    Public TeamName As String
  End Class
  Class MyPlayer
    Public PlayerName As String
  End Class

  Dim m_Groups As New List(Of MyGroup)

  Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim p As New MyPlayer With {.PlayerName = "Player"}
    Dim t As New MyTeam With {.TeamName = "Team", .Players = New List(Of MyPlayer)({p})}
    m_Groups.Add(New MyGroup With {.Teams = New List(Of MyTeam)({t})})
    Dim name As String = "Player" 'player name to be searched

    Dim teamName = (From group In m_Groups _
                    From team In group.Teams _
                    From player In team.Players _
                    Where player.PlayerName.Equals(name) _
                    Select team.TeamName).FirstOrDefault()
  End Sub
End Class 
```

它深受@millimoose 回答的影响，有两个细微的变化：

1.  `Dim team`-> `Dim teamName`，你不能`team`在同一个范围内有两个变量。
2.  OP 想要队名，所以`Select player`变成了`Select team.TeamName`.

# android - 带有 Webview 的 ViewPager 中的 ProgressBar

> ID：15488918
> 
> 赞同：0
> 
> 时间：2013-03-18T23:34:07.203
> 
> 标签：android, progress-bar, android-webview, actionbarsherlock, android-viewpager

我在让它正常工作时遇到了一些麻烦。我有一个带有 3 个 webview 的 ViewPager，目前遇到的问题是只有 case 0（我的第一个 webview）实际上正确使用了进度条，（当进度为 100 时停止，等等）。然而，我的其他 2 个 webviews 进度条（案例 1 和 2）没有做任何事情。有什么建议吗？

```
public class AwesomePagerActivity extends Activity {

private ViewPager awesomePager;
private static int NUM_AWESOME_VIEWS = 3;
private Context context;
private AwesomePagerAdapter awesomeAdapter;
LayoutInflater inflater;
ProgressBar progressBar;

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  context = this;
  inflater = (LayoutInflater)
  context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  awesomeAdapter = new AwesomePagerAdapter();
  awesomePager = (ViewPager) findViewById(R.id.pager);
  awesomePager.setOffscreenPageLimit(3);
  awesomePager.setAdapter(awesomeAdapter);
}
private class AwesomePagerAdapter extends PagerAdapter {

    public int getCount() {
    return NUM_AWESOME_VIEWS;
    }

public Object instantiateItem(View collection, int position) {
    View layout = null;
    LayoutInflater mInflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    WebView web = null;
    progressBar = (ProgressBar) findViewById(R.id.progressBar1);
    switch (position) {
    case 0:
        layout = mInflater.inflate(R.layout.activity_main, null);
        web = (WebView) layout.findViewById(R.id.webView1);
        web.loadUrl("http://developer.android.com");
        break;
    case 1:
        layout = mInflater.inflate(R.layout.activity_community, null);
        web = (WebView) layout.findViewById(R.id.webView2);
        web.loadUrl("http://www.xda-developers.com");
        break;
    case 2:
        layout = mInflater.inflate(R.layout.activity_support, null);
        web = (WebView) layout.findViewById(R.id.webView3);
        web.loadUrl("http://www.samsung.com");
        break;
    }
    WebSettings websettings = web.getSettings();
    websettings.setBuiltInZoomControls(position == 0 ? false : true);
    websettings.setUseWideViewPort(position == 0 ? true : false);
    websettings.setJavaScriptEnabled(true);
    websettings.setAllowFileAccess(true);
    websettings.setDomStorageEnabled(true);
    websettings.setLoadWithOverviewMode(true);
    web.requestFocusFromTouch();
    websettings.setSavePassword(true);
    web.setWebViewClient(new WebViewClient(){
            public void onPageStarted(WebView view, String url, Bitmap favicon) {

                super.onPageStarted(view, url, favicon);
                progressBar.setVisibility(View.VISIBLE);
            }
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                progressBar.setVisibility(View.VISIBLE);
                return true;
            }

            @Override
            public void onPageFinished(WebView view, String url) {
                super.onPageFinished(view, url);

                progressBar.setVisibility(View.GONE);
            }   
        });
        web.setWebChromeClient(new WebChromeClient(){
            public void onProgressChanged(WebView view, int progress) {
                //MainActivityViewPager.this.setProgress(progress * 100);
                progressBar.setProgress(progress * 100);

            }
            });
    ((ViewPager) collection).addView((View) layout);
    return layout;
}

public void destroyItem(View collection, int position, Object view) {
    ((ViewPager) collection).removeView((View) view);
}

public boolean isViewFromObject(View view, Object object) {
    return view == ((View) object);
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:58:01.413

> 有什么建议吗？

我猜你`ProgressBar`在你使用的三种布局中都有一个`ViewPager`（具有不同的ID？）。问题是*progressBar*变量将始终指向`ProgressBar`第一个布局中的 ，因为`findViewById`返回具有该 id 的小部件的第一次出现（它将来自始终可用的第一个布局）。解决方案是`ProgressBars`根据当前的行为分离那些行为`WebView`：

```
//...
switch (position) {
case 0:
    layout = mInflater.inflate(R.layout.activity_main, null);
    web = (WebView) layout.findViewById(R.id.webView1);
    web.loadUrl("http://developer.android.com");
        progressBar = (ProgressBar) layout.findViewById(R.id.progressBar1);
break;
case 1:
        layout = mInflater.inflate(R.layout.activity_community, null);
    web = (WebView) layout.findViewById(R.id.webView2);
    web.loadUrl("http://www.xda-developers.com");
            progressBar = (ProgressBar) layout.findViewById(R.id.progressBar2);
break;
case 2:
       layout = mInflater.inflate(R.layout.activity_support, null);
           web = (WebView) layout.findViewById(R.id.webView3);
           web.loadUrl("http://www.samsung.com");
           progressBar = (ProgressBar) layout.findViewById(R.id.progressBar3);
break;
}
// ....
web.setWebViewClient(new SpecialWebView(progressBar));
web.setWebChromeClient(new SpecialWebChromeClient(progressBar));
((ViewPager) collection).addView((View) layout); 
```

在哪里`SpecialWebView`和`SpecialWebChromeClient`是：

```
public static class SpecialWebView extends WebViewClient {

    private ProgressBar progressBar;

    public SpecialWebView(ProgressBar progressBar) {
        this.progressBar = progressBar;
    }

    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {         
        progressBar.setVisibility(View.VISIBLE);
        progressBar.setProgress(0);
        return super.shouldOverrideUrlLoading(view, url);
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        progressBar.setVisibility(View.GONE);
    }
}

 public static class SpecialWebChromeClient extends WebChromeClient {

    ProgressBar progressBar;

    public SpecialWebChromeClient(ProgressBar progressBar) {
        this.progressBar = progressBar;
    }

    public void onProgressChanged(WebView view, int progress) {
        // MainActivityViewPager.this.setProgress(progress * 100);
        progressBar.setProgress(progress);
    }
} 
```

# sql-server - 连接到 SQL Server 有时有效

> ID：15488922
> 
> 赞同：121
> 
> 时间：2013-03-18T23:34:29.737
> 
> 标签：sql-server, ado.net

ADO.Net 应用程序有时只能连接到本地网络上的另一台服务器。给定的连接尝试是成功还是失败似乎是随机的。该连接使用以下形式的连接字符串：

> 服务器=THESERVER\TheInstance；数据库=TheDatabase；用户ID=TheUser；密码=密码；

返回的错误是：

> 连接超时已过期。尝试使用登录前握手确认时超时时间已过。
> 这可能是因为登录前握手失败或服务器无法及时响应。
> 尝试连接到此服务器所花费的持续时间是 - [登录前] 初始化 = 42030；握手=0；

.NET 应用程序是一个小型测试应用程序，它执行以下代码：

```
using (SqlConnection conn = new SqlConnection(cs))
using (SqlCommand cmd = new SqlCommand("SELECT COUNT(*) FROM TheTable", conn))
{
    conn.Open();
    int rowCount = (int)cmd.ExecuteScalar();
} 
```

*TheTable*很小，只有 78 行。

但是，在 .NET 应用程序收到此错误的**同一台机器**上，我可以使用 SSMS 和连接字符串中命名的用户 ID/密码连接到 THESERVER。

为什么 ADO.Net 应用程序的连接可能会失败，但使用来自 SSMS 的相同凭据会成功？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-18T23:34:29.737

事实证明，为 IPv4 地址启用了 TCP/IP，但没有为 IPv6 地址启用 TCP/IP `THESERVER`。

显然，一些连接尝试最终使用了 IPv4，而另一些则使用了 IPv6。

为两个 IP 版本启用 TCP/IP 解决了该问题。

SSMS 工作的事实证明是巧合（最初的几次尝试可能使用了 IPv4）。稍后通过 SSMS 进行连接的一些尝试导致了相同的错误消息。

为其他 IP 地址启用 TCP/IP：

*   启动 Sql Server 配置管理器
*   打开节点 SQL Server 网络配置
*   左键单击 MYSQLINSTANCE 的协议
*   在右侧窗格中，右键单击 TCP/IP
*   单击属性
*   选择 IP 地址选项卡
*   对于每个列出的 IP 地址，确保 Active 和 Enabled 都是 Yes。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2016-02-12T03:51:01.967

我刚刚出现了同样的错误，这与最新一轮的 Microsoft 更新（09/02/2016）可疑地一致。我发现 SSMS 连接没有问题，而我的 ASP.NET 应用程序返回“尝试使用登录前握手确认时超时时间已过”错误

我的解决方案是在连接字符串中添加 30 秒的连接超时，例如：

```
ConnectionString="Data Source=xyz;Initial Catalog=xyz;Integrated Security=True;Connection Timeout=30;" 
```

在我的情况下，唯一受影响的连接是使用集成安全性的连接，并且我在连接之前模拟用户，使用 SQL 身份验证到同一服务器的其他连接工作正常！

2 个测试系统（单独的客户端和 Sql 服务器）同时受到影响，导致我怀疑微软更新！

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-04-15T12:35:49.860

我像 Eric 一样解决了这个问题，但做了一些其他的改变：

*   启动 Sql Server 配置管理器
*   打开节点 SQL Server 网络配置
*   左键单击 MYSQLINSTANCE 的协议
*   在右侧窗格中，右键单击 TCP/IP
*   单击属性
*   选择 IP 地址选项卡
*   对于每个列出的 IP 地址，确保 Active 和 Enabled 都是 Yes。

和

*   对于每个列出的 IP 地址，确保 TCP 动态端口为空且 TCP 端口 = 1433（或其他一些端口）
*   打开 windows 防火墙并检查端口是否在传入连接中打开

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-01-09T13:22:53.060

我遇到了同样的问题，尝试从 Visual Studio 连接到本地网络中的服务器（通过 VPN），同时设置实体数据模型。
只能通过设置`TransparentNetworkIPResolution=false`连接字符串来解决。在 VS 添加连接向导中，您可以在“高级”选项卡中找到它。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-09-20T10:33:40.703

连接到托管服务器时，我遇到了同样的握手问题。

我打开了我的网络和共享中心，并在我的无线网络连接上启用了 IPv6。

![在此处输入图像描述](../Images/35392779b2087d8c75c4d528c96f7a19.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-01-14T06:52:09.027

我通过启用 IPv6 并解除对入站端口 1433 的阻止，在 Windows Server 2012 和 SQL Server 2012 上修复了此错误。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-08-16T18:06:31.387

在最近安装了一些 Windows 更新后（2017 年 8 月 7 日那一周），我使用 .NET Framework 3.5 构建的可执行文件在大约一半的时间内开始报告这些连接问题。

连接失败是由安装在目标计算机上的 .NET Framework 4.7 引起的（Windows 更新自动安装已打开） - [https://support.microsoft.com/?kbid=3186539](https://support.microsoft.com/?kbid=3186539)

卸载 .NET Framework 4.7 解决了连接问题。

显然，.Net Framework 4.6.1 - [TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/) 根据文章更新连接字符串有一个重大变化也解决了这个问题，而无需回滚框架版本。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-19T02:32:02.183

**我有同样的问题，通过在 SQL Server 配置管理器中打开/启用**端口 1433 和 tcp/ip来解决它，然后**重新启动**服务器

[![在此处输入图像描述](../Images/eeaf14f9ca99230c595e1abdaab8768a.png)](https://i.stack.imgur.com/ny48S.jpg)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-01T15:12:36.043

在我们的案例中，由于可用性集群配置而出现问题。为了解决这个问题，我们必须`MultiSubnetFailover`在连接字符串中设置为 True。

[有关MSDN](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql/sqlclient-support-for-high-availability-disaster-recovery)的更多详细信息

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-06-04T15:29:16.117

这是OP中错误的另一种解决方案......有很多解决方案，因为有很多原因。

我已经安装了 MSSql 2019 的开发者版。默认情况下，它的安装是锁定的……如果它只是在你的开发机器上，它将运行良好。如果您将其安装在开发盒以外的机器上，则需要更新防火墙规则。

> **默认情况下...“MS SQL Server”的防火墙配置文件是私有的**

您可能需要启用公共和/或域配置文件。仅当您在域上进行身份验证时才使用域。
[Windows 防火墙配置文件](https://docs.microsoft.com/en-us/previous-versions/windows/desktop/ics/windows-firewall-profiles#windows-firewall-profiles---restrictions-per-profile)
[![防火墙配置文件](../Images/a63e9f042350a120978466a39adcb900.png)](https://i.stack.imgur.com/qu55L.jpg)

另外...要启用所有 IP 地址（如在接受的答案中），您需要做的就是

> 在 TCP/IP 属性上将“全部侦听”设置为是

[TCP/IP 属性选项](https://docs.microsoft.com/en-us/sql/tools/configuration-manager/tcp-ip-properties-ip-addresses-tab?view=sql-server-ver15#options)
[![TCP/IP 属性选项](../Images/ec04f3d2f0dd4617bed13a318aade499.png)](https://i.stack.imgur.com/BslU1.png)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-02-28T14:00:48.243

在您像我一样浪费更多时间解决问题之前，请尝试**重新启动您的 Windows 机器**。在应用所有其他解决方案后为我工作。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-04-26T08:10:03.027

在我的情况下，所有选项都已经存在。

通过增加 Connection Time-out = 30 来解决它。[![SQL Server 管理工作室](../Images/35cffb78f8713beec4a1e59ca1402a82.png)](https://i.stack.imgur.com/H9sKy.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-04-30T11:34:11.667

在做任何激烈的事情之前先尝试简单的 SQL Server 重启。可能会修复它。它对我有用

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-07-06T21:22:09.377

通过阻止/黑名单试图暴力破解用户帐户的 IP 地址解决了这个问题。检查您的 SQL 访问日志中是否有大量失败的登录尝试（通常是“sa”帐户）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-10-25T16:12:44.983

不幸的是，我在 Visual Studio 中安装了本地 SQL Server 时遇到了问题，这里的许多解决方案都不适合我。我所要做的就是重置我的 Visual Studio，方法是：

**控制面板 > 程序和功能 > Visual Studio 安装启动器**

然后点击**更多**按钮并选择**修复**

之后，我能够访问我的本地 SQL Server 并使用本地 SQL 数据库。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-07-06T19:56:25.473

尽管以前接受了答案，但在此处添加响应。因为我的场景被确认为 DNS。更具体地说，登录前握手期间的 dns 超时。通过从 DNS 名称更改为 IP 地址（或使用 Hosts 文件条目），您可以绕过该问题。尽管以失去自动 ip 解析为代价。

例如，即使将连接字符串的超时值设置为 60 整整一分钟，它仍然会在尝试的几秒钟内发生。这导致人们质疑为什么它会在指定的超时期限之前超时？域名系统。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-09-12T22:14:58.450

对我来说，事实证明 Windows 服务器中的防火墙阻止了端口 1433，这是默认的 sql 服务器端口。所以添加一个入站规则来接受这些连接对我来说是个窍门。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-01-30T20:43:22.253

**要跟踪[“连接超时”](https://spgeeks.devoworx.com/connection-timeout-expired-pre-login-handshake/)错误，请确保：**

*   SQL Server 数据库引擎的实例已启动并正在运行。
*   SQL Server Browser 服务正在运行。
*   TCP/IP 已启用。
*   服务器名称输入正确。
*   没有如[如何检查从应用程序服务器到数据库服务器的 SQL Server 实例连接中提到的网络问题](https://spgeeks.devoworx.com/check-sql-server-instance-connectivity/)
*   数据库引擎实例的 TCP/IP 端口未被防火墙阻止。
*   客户端和服务器配置为使用相同的网络协议。

> 有关详细信息，请检查**[连接超时已过期。尝试使用登录前握手确认时超时时间已过](https://spgeeks.devoworx.com/connection-timeout-expired-pre-login-handshake/)**

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-08-03T21:37:44.917

在 C# 中，这让我发疯，它在我的部分代码中工作，并在一个特定区域使用相同的单例失败。事实证明，我正在使用模拟来读取文件，并且我正在使用使用提升权限的“受信任连接”调用 SQL 连接。该提升权限的用户无权访问 SQL DB，因此仅在该方法上失败。我把电话移到了模拟之外，之后效果很好。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-11-29T03:21:51.717

我遇到了同样的问题，但我使用静态 IP 地址连接到远程数据库。所以上述解决方案都没有解决我的问题。

我未能为我正在使用的安全登录添加正确的用户映射，因此我的解决方案只是确保将用户映射设置设置为访问我的数据库。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-05-04T20:12:34.500

我在进行 SharePoint 2010 到 2013 迁移时遇到了这个问题。我怀疑这是因为数据库服务器位于防火墙的另一侧，它不路由 IP6，所以它尝试使用 IP6 并在连接到数据库时失败。

我认为这个问题现在已经解决了。错误似乎已经停止。我所做的只是为 SharePoint 服务器上的网络适配器禁用了 IP6（通过取消选中它）。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-04-25T02:27:30.547

就我而言，`Persist Security Info=true`连接字符串中带有用户名和密码的参数导致了问题。去掉参数或设置即可`false`解决问题。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-12-02T11:39:10.020

我有确切的问题，尝试了几个soultion没有工作，最后重新启动系统，它工作正常。

# facebook - UIBarbuttonItem 没有改变

> ID：15488924
> 
> 赞同：0
> 
> 时间：2013-03-18T23:34:33.263
> 
> 标签：facebook, ios6, uibarbuttonitem

我正在尝试煽动 UIbarbuttonItem 登录/注销 Facebook。我可以正常登录但无法注销，UIBarbuttonItem 标题没有更改或发起注销程序。

这是一些代码：

```
 - (void)viewDidLoad {

[super viewDidLoad];

   [[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(sessionStateChanged:)
 name:FBSessionStateChangedNotification
 object:nil];

NSLog(@"Session changed");
AppDelegate *appDelegate =  (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate openSessionWithAllowLoginUI:NO];
[NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(sessionStateChanged:) userInfo:nil repeats:NO];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willBeginBannerViewActionNotification:) name:BannerViewActionWillBegin object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didFinishBannerViewActionNotification:) name:BannerViewActionDidFinish object:nil]; 
```

}

```
 - (IBAction)authButtonAction:(id)sender {
NSLog(@"session open");
AppDelegate *appDelegate = (AppDelegate*)
[[UIApplication sharedApplication] delegate];

// If the user is authenticated, log out when the button is clicked.
// If the user is not authenticated, log in when the button is clicked.
if (FBSession.activeSession.isOpen) {
    [appDelegate closeSession];
} else {
    // The user has initiated a login, so call the openSession method
    // and show the login UX if necessary.
    [appDelegate openSessionWithAllowLoginUI:YES];
} 
```

}

```
 - (void)sessionStateChanged:(NSNotification*)notification {
NSLog(@"Login Activated");
self.navigationItem.leftBarButtonItem = authButton;
if (FBSession.activeSession.isOpen) {
    self.authButton =[[UIBarButtonItem alloc] initWithTitle:@"Login" style:UIBarButtonItemStyleBordered target:self action:@selector(sessionStateChanged:)];

}else{

    self.authButton =[[UIBarButtonItem alloc]  initWithTitle:@"Logout" style:UIBarButtonItemStyleBordered target:self action:@selector(sessionStateChanged:)];

} 
```

}

日志报告：

```
 2013-03-18 23:05:58.739 prompT[4056:907] Session changed
    2013-03-18 23:05:58.760 prompT[4056:907] 
    fb sdk error = (null)
    2013-03-18 23:05:58.763 prompT[4056:907] User session found
    2013-03-18 23:05:58.765 prompT[4056:907] Login Activated
    2013-03-18 23:05:59.268 prompT[4056:907] Login Activated
    2013-03-18 23:06:00.872 prompT[4056:907] AdAbanner failed
    2013-03-18 23:06:01.664 prompT[4056:907] Login Activated 
```

我也在使用故事板。有什么想法和帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:29:56.947

你`sessionStateChanged`的方法有一些错误，这里有一些评论

```
 - (void)sessionStateChanged:(NSNotification*)notification {
NSLog(@"Login Activated");

self.navigationItem.leftBarButtonItem = authButton;
       //what is this assignment doing? What is authButton? An iVar?

if (FBSession.activeSession.isOpen) {
    self.authButton =[[UIBarButtonItem alloc] initWithTitle:@"Login" style:UIBarButtonItemStyleBordered target:self action:@selector(sessionStateChanged:)];

  //self.authButton is not the same entity as authButton.
  //did you intend to set authButton here and then 
  //assign it to self.navigationItem.leftBarButtonItem after the conditional?       

}else{

    self.authButton =[[UIBarButtonItem alloc]  initWithTitle:@"Logout" 
               style:UIBarButtonItemStyleBordered 
               target:self action:@selector(sessionStateChanged:)];
    //is this really the action you want, or is it rather `authButtonAction`?

} 
```

您在这里要做的就是更改按钮的标题：

```
 - (void)sessionStateChanged:(NSNotification*)notification {
        NSString* buttonTitle = @"Login";
        if (FBSession.activeSession.isOpen) {
            buttonTitle = @"Logout";
        }
        self.navigationItem.leftBarButtonItem.title = buttonTitle;
    } 
```

您应该之前在 viewDidLoad 或情节提要中分配、初始化并放置了您的 leftBarButtonItem。当你这样做时，你应该正确连接 IBAction。

代码版本...

```
- (void) viewDidLoad {
    [super viewDidLoad];
    UIBarButtonItem* barButton =
        [[UIBarButtonItem alloc] initWithTitle:@"login"
                                         style:UIBarButtonItemStyleBordered
                                        target:self
                                        action:@selector(authButtonAction:)];
    self.navigationItem.leftBarButtonItem = barButton;

} 
```

# php - mysql数据库中的多变量搜索

> ID：15488926
> 
> 赞同：-1
> 
> 时间：2013-03-18T23:34:51.877
> 
> 标签：php

我之前问过这个问题，但由于帖子不清楚，所以它被关闭了，无论如何我现在正试图以清晰的方式提问。

我有一家汽车服务公司，所以我们也销售轮胎，我想在网站上创建一个可过滤的搜索方法，例如客户将从选项中搜索特定值，就像他会搜索所有制造商但他想要夏季轮胎，宽度为 150，轮廓为 40，直径为 16，其余的他将选择全部选项。等等...

html代码：

```
<label for="manufacturer"><strong>manufacturer:</strong></label>
                                <select id="manufacturer">
                                    <option selected="selected">All</option>
                                    <option value="option1">BF Goodrich</option>
                                    <option value="option2">Continental</option>
                                    <option value="option3">Michelin</option>
                                    <option value="option4">Pirelli</option>
                                </select>
                            </li>
                            <li>
                                <label for="model"><strong>tyretype:</strong></label>
                                <select id="model">
                                    <option selected="selected">All</option>
                                    <option value="option1">Summer tyre</option>
                                    <option value="option2">winter tyre</option>
                                    <option value="option3">winter tyre 2</option>
                                </select>
                            </li>
                            <li class="select-two">
                                <div>
                                    <label for="min-price"><strong>width:</strong></label>
                                    <select id="min-price">
                                        <option selected="selected">All</option>
                                        <option value="option1">145</option>
                                        <option value="option2">150</option>
                                        <option value="option3">155</option>
                                        <option value="option3">160</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="max-price"><strong>Profil:</strong></label>
                                    <select id="max-price">
                                        <option selected="selected">All</option>
                                        <option value="option1">30</option>
                                        <option value="option2">35</option>
                                        <option value="option3">40</option>
                                        <option value="option3">45</option
                                    </select>                   
                                </div>
                            </li>
                            <li class="select-two">
                                <div>
                                    <label for="min-price"><strong>Diameter:</strong></label>
                                    <select id="min-price">
                                        <option selected="selected">All</option>
                                        <option value="option1">13"</option>
                                        <option value="option2">14"</option>
                                        <option value="option3">15"</option>
                                        <option value="option3">16"</option>
                                        <option value="option3">17"</option>
                                        <option value="option3">18"</option>
                                        <option value="option3">19"</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="max-price"><strong>Maximum load:</strong></label>
                                    <select id="max-price">
                                        <option selected="selected">All</option>
                                        <option value="option1">75</option>
                                        <option value="option2">76</option>
                                        <option value="option3">77</option>
                                        <option value="option3">78</option>
                                        <option value="option3">79</option>
                                        <option value="option3">80</option>
                                        <option value="option3">81</option>
                                        <option value="option3">82</option>
                                        <option value="option3">83</option>
                                        <option value="option3">84</option>
                                    </select>                   
                                </div>
                            </li>

                            <li>
                                <label for="engine"><strong>Maximum speed:</strong></label>
                                <select id="engine">
                                    <option selected="selected">All</option>
                                    <option value="option1">Q = max 160 km/h</option>
                                    <option value="option2">R = max 170 km/h</option>
                                    <option value="option3">S = max 180 km/h</option>
                                    <option value="option3">T = max 190 km/h</option>
                                    <option value="option3">H = max 210 km/h</option>
                                </select>
                            </li> 
```

在mysql数据库中，我有一个名为轮胎的表，其中包括以下列，

制造商、轮胎类型、宽度、长度、轮廓、直径、最大负载、最大速度、轮胎价格。

我想不出一个好的搜索查询，包括上面列出的所有搜索选项，并从 mysql 数据库中正确获取信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:50:05.210

```
$sql = "SELECT * FROM tyres WHERE 1==1";

if ($_POST['manufacturer'] != 'ALL'){
   $sql = $sql . ' AND manufacturer==' . $_POST['manufacturer'];
}
if ($_POST['model'] != 'ALL'){
   $sql = $sql . ' AND model==' . $_POST['model'];
}
 //etc etc 
```

所以基本上你只在必要时将 AND 子句添加到你的 WHERE 中，这只有在选择“ALL”以外的东西时才会发生。

您需要为默认的 ALL 选择菜单添加一个值，如下所示：

```
<select id="manufacturer">
   <option value ="ALL" selected="selected">All</option>
   <option value="option1">BF Goodrich</option>
   <option value="option2">Continental</option>
</select> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T23:46:00.517

```
$query = mysql_query("SELECT * FROM tyres WHERE manufacturer='".$_POST['manufacturer']."' AND tyretype='".$_POST['tyretype']."' AND ...etc.."); 
```

更多信息：[http](http://dev.mysql.com/doc/refman/5.0/en/where-optimizations.html) ://dev.mysql.com/doc/refman/5.0/en/where-optimizations.html 如果你有问题我在这里:)

如果他选择所有选项，您会做出这样的 if：

```
<?
if ($_POST['tyretype'] == "all") 
{  // then do the same query you can see above without this part "AND tyretype='".$_POST['tyretype']."'"
}
?> 
```

# c1-cms - UpdateDataInstance 不更新数据？

> ID：15488927
> 
> 赞同：0
> 
> 时间：2013-03-18T23:34:57.540
> 
> 标签：c1-cms

我尝试使用 UpdateDataInstance 函数来使用 xslt 函数更新一些全局数据。我没有收到任何错误，但数据没有更新。有谁知道可能出了什么问题？

如果我尽可能简化我的代码，它看起来像这样：

```
<f:function xmlns:f="http://www.composite.net/ns/function/1.0" name="Composite.Community.OpenID.Users.UpdateDataInstance">
  <f:param name="Location" value="My city" />
</f:function> 
```

`<xsl:template match="/">`我在 xslt 函数中的标记之前运行代码。

提前致谢

——马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:20:41.153

将代码移至 after 后，`<xsl:template match="/">`它运行良好。

# ios - 让用户下载最新版本的 iPhone 应用程序

> ID：15488933
> 
> 赞同：1
> 
> 时间：2013-03-18T23:35:13.463
> 
> 标签：ios, app-store

我已经在 appstore 中有一个版本为 1.0.0 的应用程序。提交应用程序后我发现了一些问题。

现在我已经发布了 1.0.1 版，有没有办法告诉苹果或让新用户下载 1.0.1 版，而不是让用户下载 1.0.0 版并将其更新到 1.0.1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:26:30.087

好的，这是交易：

您的应用状态更改为“准备出售”的应用程序可立即在应用商店进行升级。但是，对于第一次安装您的应用程序的用户，他们仍然会下载旧版本。他们将不得不从应用商店更新较新的版本。

自从您的应用程序状态更改为“准备出售”后，这部戏剧可以在 24-48 小时之间继续上演。48 小时后，新用户应该能够下载最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:38:00.660

用户将被告知有可用的更新，但您不能强制他们升级而不在代码中实现该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T23:37:45.153

如果 Apple 接受您的 1.0.1 版本，这将自动完成。但是，我在这个问题中并没有真正看到任何“价值”，因为它非常具体并且与编程本身没有真正的关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T23:38:24.050

一旦您的更新获得批准并进入商店，新用户将只能看到新版本。现有用户将通过 App Store 应用程序被告知有更新，但没有强制更新。

如果您想在新版本可用时阻止用户使用旧版本，则需要将代码添加到您自己的服务器检查的应用程序中。如果被告知有更新，您可以显示有新版本的警报，并阻止用户在升级之前使用该应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T23:42:32.220

其实是有办法的！

如果您有服务器，您可以随时执行以下操作

*   在您的应用程序开始时，向您的服务器运行 HTTP 请求
*   向请求中发送当前应用的版本（比如 1.0.0）
*   在服务器端，检查应用程序版本（将其转换为 100 并在服务器上硬编码您应用程序的最新版本而不是比较） - 天哪！100 < 101 ！这个应用程序需要认真更新 =P
*   将类似 { message : "lastest_version" } 或 { message : "need_update" } 的消息（以 JSON 或其他格式）发送回 iPhone。在您的情况下，这是一条失败消息。
*   在电话端检查您从服务器收到的内容是否正常
*   如果一切正常，则继续或告诉用户他需要更新（或仍然可以继续，但体验错误）

# c# - 真正的并发文件下载

> ID：15488934
> 
> 赞同：1
> 
> 时间：2013-03-18T23:35:26.923
> 
> 标签：c#

我构建了一个应用程序，它通过下载 URL 的内容来查询 API。每次下载都在它自己的线程中使用以下代码进行：

```
 public void run(int id, string requestURL)
    {
        var filePath = "data\\" + id + ".xml";
        (new FileInfo(filePath)).Directory.Create();
        WebClient client = new WebClient();
        client.DownloadFile(requestURL, filePath);

        // code to parse file
    } 
```

我注意到这些文件中的每一个都没有同时加载。

我已经在这里看到了一些这样的问题，但在所有这些情况下，每次下载只运行一次。就我而言，我需要它在完成后立即重新运行下载。

我怎样才能实现这样的目标？

**编辑：**我用来创建线程的代码：

```
 public void startRun(object thread)
    {
        Threads t = (Threads)thread;
        DoRun DoRun = new DoRun(this);
        string kwd = t.keyword;
        t.requestUrl = DoRun.returnUrl(System.Uri.EscapeDataString(kwd));
        while (checkRunning())
        {
            DoRun.run(t.id, t.requestUrl);
        }
    }

    private void startBtn_Click(object sender, EventArgs e)
    {
        searchRunning = true;

        XmlDocument searches = new XmlDocument();
        searches.Load("data\\Searches.xml");

        XmlNodeList search = searches.SelectNodes("searches/search");
        var nodeCount = search.Count;
        for (var i = 0; i < nodeCount; i++)
        {
            Threads thisThread = new Threads();
            thisThread.keyword = search[i].SelectSingleNode("query").InnerText;
            thisThread.id = int.Parse(search[i].SelectSingleNode("id").InnerText);

            Thread newThread = new Thread(() => startRun(thisThread));

            newThread.Name = "SearchId: " + i;
            newThread.IsBackground = true;
            thisThread.thread = newThread;
            threads.Add(thisThread);
            newThread.Start();
        }
    } 
```

# c++ - 重新分配变量，删除调用两次（C++）

> ID：15488936
> 
> 赞同：0
> 
> 时间：2013-03-18T23:35:36.330
> 
> 标签：c++, arrays, constructor

我的编程背景是 Java 世界，但我刚刚开始学习 C++。作为一名 Java 程序员，我偶然发现了这个相当微不足道且可能相当愚蠢的问题，这让我感到困惑：

我有一个带有数组的类，该数组通过构造函数中的 new 初始化并在析构函数中删除。现在，当我创建这个类的一个对象并将这个类的另一个对象分配给同一个变量时（至少我认为是这样），当变量离开时，析构函数中的 delete[] 方法似乎被调用了两次范围（在本例中为 main() 函数）（调试器给我一个 _BLOCK_TYPE_IS_VALID 断言失败警告）。

这是为什么？为什么在我将新对象分配给 f 之前不调用解构函数？我怎么能明确地删除 Foo(1)？这里到底发生了什么？

```
class Foo{
    private:
        int *field;

    public:

    Foo(int size){
       field = new int[size];
    }

   ~Foo(){
       delete[] field;
    }
};

int main(){
    Foo f = Foo(1);
    f = Foo(2);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T23:37:14.873

C++ 世界中有一种东西叫做[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。

一个类会自动为你生成**析构函数**、**复制构造函数**和**赋值运算符**。

如果您必须*手动定义*其中一个函数，则可能必须定义所有三个函数。

在您的情况下，您应该定义两个复制函数，以便副本`Foo`获得自己的副本`field`。添加这两个函数：

```
class Foo{

    Foo( const Foo &f ) {
        size = f.size;
        field = new int[size]; 
        std::copy( f.field, f.field + size, field );
    }

   Foo& operator=( const Foo &f ) {
       // Leverage the logic that was already written in the copy constructor
       Foo tmp(f);
       std::swap( *this, temp );
       return *this;
   }
}; 
```

*请注意，我假设您已存储`size`在`Foo`对象中。无论如何，您可能需要将该信息存储在现实生活中的应用程序中*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T23:38:11.523

你没有遵循三法则，这很糟糕。因为默认的复制构造函数做了一个浅拷贝，所以你所有的自动变量（`f`和临时变量）都有`field`指向相同的成员`int`，当调用析构函数时，它会被多次销毁。

实现一个适当的复制构造函数，或者使用 C++ 习惯用法并一起避免手动管理 - 即使用 a`std::vector`代替。

# php - 添加到数组中，但使用 PHP 保留索引

> ID：15488937
> 
> 赞同：1
> 
> 时间：2013-03-18T23:35:51.107
> 
> 标签：php, arrays, multidimensional-array

我有一个已经排序的数组。

现在我想取所有子数组值为 0 的数组并将它们放在数组的开头。

这就是我试图做的：

```
 foreach($dealStatsArray as $deal_id => $dealStats)
        {
            if($dealStats['revenueY'] == 0)
            {

                $tmpArray[$deal_id] = $dealStats; // Store the array
                unset($dealStatsArray[$deal_id]); // Unset the current one, since it is not in right position

                array_unshift($dealStatsArray, $tmpArray); // Prepend the tmp array, to have it at the beginning of the array
            }
        } 
```

现在的问题是 array_unshift() 确实：

*“所有数字数组键都将被修改为从零开始计数”* -php net array_unshift()

这弄乱了我得到的其余代码，因为我需要将索引保留在 $dealStatsArray 上，并且新的前置数组的索引应该是 $deal_id 而不是 0。

我怎样才能做到这一点？而且我需要一个可以设法在数组开头添加 2 或 3 次的解决方案，就像它与 array_push （附加）一起工作一样我想这样做，但只是在前面添加

**更新：**这是我目前的 uasort 函数，它在收入 Y 值之后对数组进行排序，以便最高数字在数组的开头，然后降序..

```
function cmp($a, $b)
{
    if (($a["revenueY"]) == ($b["revenueY"])) {
        return 0;
    }
    return (($a["revenueY"]) > ($b["revenueY"])) ? -1 : 1;
}

uasort($dealStatsArray, "cmp"); 
```

现在，如果我遵循@thaJeztah 的回答，这部分有效，那么我在下面添加了这个：

```
function sortbyRevenueY($a, $b) {
    if ($a['revenueY'] == $b['revenueY']) {
       return 0;
    }
    return ($a['revenueY'] == 0) ? -1 : 1;
}

uasort($dealStatsArray, 'sortbyRevenueY'); 
```

但这不正确，它确实需要所有的收入 Y==0 数组并在数组的开头添加，但是其余的数组未排序（从最高到最低，第一个 uasort()）

这是我的**最终目标**：拥有一个数组，其中所有的收入 Y==0 都在数组的开头，在这些之后，最高收入紧随其后，然后下降到数组末尾的最低收入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:54:02.847

您可以通过使用自定义回调对数组进行“排序”来实现这一点，并且`uasort()`;

[http://www.php.net/manual/en/function.uasort.php](http://www.php.net/manual/en/function.uasort.php)

```
function sortbyRevenueY($a, $b) {
    if ($a['revenueY'] == $b['revenueY']) {
       return 0;
    }

    if (0 == $a['revenueY']) {
       return -1;
    }

    if (0 == $b['revenueY']) {
       return 1;
    }

    return (($a["revenueY"]) > ($b["revenueY"])) ? -1 : 1;
}

uasort($dealStatsArray, 'sortbyRevenueY');

print_r($dealStatsArray); 
```

无法对其进行测试，并且“回调”方法可能需要一些调整，但是，`uasort()`它允许您使用自定义“回调”方法对数组进行排序，该方法确定数组的“排序方式”。数组内的值将被排序，**而不会**丢失键/值关系。

我的示例只是为了说明如何实现这一点，但如前所述，可能需要进行调整。

**[更新]** 我已经通过示例进行了更新，以尝试将“常规”排序和按“0”排序结合到一个回调中。再次未经测试，但也许这项工作。请测试这个更新的例子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T23:41:05.717

您可以尝试合并数组而不是取消移位：

```
$dealStatsArray = array_merge($tmpArray, $dealStatsArray); 
```

所以无论`$tmpArray`有多少物品，它们都会在开头

# android - 如何将文本添加到 Android 的操作栏主页按钮？

> ID：15488942
> 
> 赞同：1
> 
> 时间：2013-03-18T23:36:05.687
> 
> 标签：android, android-actionbar

我有一个应用程序，并且我设法在操作栏中为主页按钮添加了一个图像。

我使用 actionbar.setIcon() 方法做到了这一点。

该图像本质上是一个空白按钮图像。我希望能够在图像顶部添加文本“退出”。有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:12:34.837

我做了一个解决方法。我使用以下方法隐藏了主页按钮：

Actionbar.setDisplayShowHomeEnabled(false);

然后在操作栏上添加了一个按钮，按钮上有图像和文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:49:59.197

到目前为止我不知道。但是您可以使用文本“退出”直接制作图像按钮

# python - 是否必须安装 pygame 才能运行 pygame 游戏？

> ID：15488944
> 
> 赞同：1
> 
> 时间：2013-03-18T23:36:16.713
> 
> 标签：python, pygame

是否必须安装 pygame 才能运行 pygame 游戏？我在我的树莓派上用 pygame 编写了一个游戏（使用 Adafruit WebIDE），我不想在 Pi 本身上运行它，所以我打算在我的 Windows 8 机器上使用它，我不'没有在 Windows 盒子上安装 pygame。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T23:38:07.727

是的，您需要安装 Pygame 才能在 Windows 上运行引用 Pygame 的 python 脚本。您始终可以使用[Py2Exe](http://www.py2exe.org)将其更改为 EXE 文件，然后您就不需要安装 Pygame。

我会提供更多关于如何在这里做到这一点的指导，但这似乎主要是一个“喷洒和祈祷”的过程。

另一个 Stack Overflow 问题涉及[Py2Exe 的替代方案](https://stackoverflow.com/questions/1689086/are-there-any-alternatives-to-py2exe)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T21:51:38.253

没有安装 python 就无法运行 python 程序。但是，您可以使用某个转换器使程序成为 exe 文件。一些转换器是 py2exe、pyinstaller 和 cx_freeze。我个人推荐 cx_freeze。如果您使用 cx_freeze，`import pygame._view`由于存在错误，您必须将该行添加到您的源代码中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T23:39:56.917

是的，要让计算机运行程序，它需要将模块包含在程序中。这就像说你想解一个二次方程，但数字还不存在。特别是如果你想在你的电脑上编辑它，你需要安装 Pygame。

# html - CSS div 不向左浮动，样式冲突？

> ID：15488945
> 
> 赞同：0
> 
> 时间：2013-03-18T23:36:20.653
> 
> 标签：html, css, alignment

我正在尝试制作一个带有两个 div 的加载栏，背景栏为灰色，前景为绿色。背景中的条（.bar）很好，但绿色条（.load）位于灰色条的中心；它应该左对齐。我对此有点陌生，所以我可能会忽略一些东西，感谢您的帮助！

如果您需要有关样式的更多信息，请查看网站[http://keithtmock.com/](http://keithtmock.com/) 它在主页上

这是CSS属性

```
.bar
{
width:820px;
height:30px;
margin-top:30px;
background-color:gray;
}
.load
{
width:820px;
height:30px;
background-color:green;
transform:scale(.5,1);
-ms-transform:scale(.5,1); /* IE 9 */
-moz-transform:scale(.5,1); /* Firefox */
-webkit-transform:scale(.5,1); /* Safari and Chrome */
-o-transform:scale(.5,1); /* Opera */
} 
```

HTML

```
<div class="bar">
   <div class="load">
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:48:52.877

发生这种情况是因为变换是从中间相对应用的，之后对象没有移动。用于`transform-origin`解决此问题：

```
-webkit-transform-origin: 0;
-moz-transform-origin: 0;
-ms-transform-origin: 0;
-o-transform-origin: 0;
transform-origin: 0; 
```

[在MDN "transform-origin"](https://developer.mozilla.org/de/docs/CSS/transform-origin)上阅读有关它的更多信息。

**演示**

[先试后买](http://jsfiddle.net/jKFqB/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:02:53.553

这是解决方案：

```
.bar
{
width:820px;
height:30px;
margin-top:30px;
background-color:gray;

}
.load
{
width:820px;
height:30px;
background-color:green;

transform:scale(.5,1);
-ms-transform:scale(.5,1); /* IE 9 */
-moz-transform:scale(.5,1); /* Firefox */
-webkit-transform:scale(.5,1); /* Safari and Chrome */
-o-transform:scale(.5,1); /* Opera */
-webkit-transform-origin: 0;
-moz-transform-origin: 0;
-ms-transform-origin: 0;
-o-transform-origin: 0;
transform-origin: 0;

} 
```

# android - CheckBoxPreference 默认值

> ID：15488947
> 
> 赞同：0
> 
> 时间：2013-03-18T23:36:24.980
> 
> 标签：android, checkbox, default-value, preference

我有一个 CheckBoxPreference 定义如下：

```
<CheckBoxPreference
    android:defaultValue="true"
    android:key="prefVisible"
    android:summary="@string/pref_visible_summary"
    android:title="@string/pref_visible" >
</CheckBoxPreference> 
```

我的应用程序使用此首选项来控制视图的可见性。当我第一次启动我的应用程序（在新的*擦除*模拟器上）时，不会显示视图。但是，当我转到首选项屏幕（活动）时，复选框显示为选中状态。

这是否意味着*defaultValue*属性实际上并未设置首选项，而只是在没有基础数据的情况下设置复选框的值（就像全新安装的情况一样）。这是否也意味着仅在用户第一次进入/退出首选项屏幕（活动）后才设置首选项，否则*未定义*？

请注意，为了让我的应用程序按照我想要的方式工作，我依赖于首选项 getter 方法的默认值参数，如下所示：

```
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
boolean isVisible = sharedPrefs.getBoolean("prefVisible", true); // default = true 
```

这让我有点困惑，为什么有两种方法可以控制首选项的默认值：在 Xml 中定义它或在 getBoolean 方法中提供默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:46:35.377

**如果您调用PreferenceManager.setDefaultValues**，则无法设置首选项。因此，如果您在第一次启动应用程序时调用它，那么您的视图将被显示。
您可以在[http://developer.android.com/guide/topics/ui/settings.html阅读更多内容](http://developer.android.com/guide/topics/ui/settings.html)

# javascript - 未捕获的类型错误：无法设置未定义的属性“类名”

> ID：15488948
> 
> 赞同：0
> 
> 时间：2013-03-18T23:36:28.697
> 
> 标签：javascript, html, jquery, jquery-ui, jquery-events

当您缩小浏览器窗口时，会为 iPhone 屏幕放置一个单独的布局；您可以看到两个箭头，当您单击右箭头时，它将移动到下一个滑块，但我看不到立方体。当我仔细观察时，我看到一个错误：

> 未捕获的类型错误：无法设置未定义的属性“类名”

[http://jsfiddle.net/UL3R2/](http://jsfiddle.net/UL3R2/)

```
 var slider = new Swipe(document.getElementById('slider'), {
            callback: function(e, pos) {

                var i = bullets.length;
                while (i--) {
                    bullets[i].className = ' ';
                }
                bullets[pos].className = 'on';
Uncaught TypeError: Cannot set property 'className' of undefined

            }
        }), 
```

# java - 在 PowerMock 中模拟没有 replayAll() 的静态方法

> ID：15488950
> 
> 赞同：2
> 
> 时间：2013-03-18T23:36:39.100
> 
> 标签：java, unit-testing, junit, easymock, powermock

有谁知道在不调用 replayAll() 的情况下模拟静态类的方法？我见过很多人们嘲笑 Math.random() 并使用 replayAll() 的例子。对我来说，似乎 replayAll() 是处理事情的更懒惰的方式，但我还没有找到一种方法来使用 replay(Object mocks) 来模拟静态方法。

例如，考虑我在 [PowerMockTutorial](http://www.thedance.net/~roth/TECHBLOG/powerMock.html)上找到的以下示例：

```
public class Dice {
   public int sumOfNumDieRolls (int num) { 
      int sum = 0;
      for (int i=0;   i<num;   ++i) {
         int roll = (int) (6\. * Math.random()) + 1;
         sum += roll;
      }
      return sum;
   }
}

@RunWith(PowerMockRunner.class)
@PrepareForTest( {Dice.class} )
public class DiceTest {
   @Test
   public void shouldAddUpDieRollsCorrectly() {
      PowerMock.mockStaticPartial(Math.class, "random");
      EasyMock.expect (Math.random()).andReturn(0.3334).anyTimes();
      Dice die = new Dice();
      PowerMock.replayAll();
      assertEquals (12, die.sumOfNumDieRolls(4));
      assertEquals (30, die.sumOfNumDieRolls(10));
      PowerMock.verifyAll();
   }
} 
```

我正在使用 PowerMock 1.4.10 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T16:24:29.620

您可以通过使用 PowerMock.replay([object_name]) 来做到这一点，这样您就不必全部重播。对于此示例，它将如下所示：

```
public class Dice {
   public int sumOfNumDieRolls (int num) { 
      int sum = 0;
      for (int i=0;   i<num;   ++i) {
         int roll = (int) (6\. * Math.random()) + 1;
         sum += roll;
      }
      return sum;
   }
}

@RunWith(PowerMockRunner.class)
@PrepareForTest( {Dice.class} )
public class DiceTest {
   @Test
   public void shouldAddUpDieRollsCorrectly() {
      PowerMock.mockStaticPartial(Math.class, "random");
      EasyMock.expect (Math.random()).andReturn(0.3334).anyTimes();
      Dice die = new Dice();
      PowerMock.replay(Math.class);
      assertEquals (12, die.sumOfNumDieRolls(4));
      assertEquals (30, die.sumOfNumDieRolls(10));
      PowerMock.verify(Math.class);
   }
} 
```

# python - 向类中的类添加方法

> ID：15488951
> 
> 赞同：0
> 
> 时间：2013-03-18T23:36:58.767
> 
> 标签：python

在这里完全放屁，甚至不确定我问的是正确的问题。如何添加/更改类中存在的类的方法？

我正在构建一个用 QtDesigner 设计的 QT GUI。我的 Python 程序导入并创建了一个新类，它是 GUI 文件类的子类。我想将方法​​更改为该类中的按钮。

所以基本上我有以下内容，我想向'aButton'添加一个方法。

**qtDesignerFile.py**

```
class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        self.aButton = QtGui.QPushButton() 
```

**我的Python文件.py**

```
import qtDesignerFile

class slidingAppView(QMainWindow,slidingGuiUi.Ui_MainWindow):
    def __init__(self,parent=None):
        super(slidingAppView,self).__init__(parent) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:10:27.453

要添加到 Joran 的答案，添加如下方法：

```
def foo():
    pass

instance.foo = foo 
```

将像静态方法一样工作（它们不会将实例作为第一个参数传递）。如果要添加绑定方法，可以执行以下操作：

```
from types import MethodType

def foo(instance):
    # this function will receive the instance as first argument
    # similar to a bound method
    pass

instance.foo = MethodType(foo, instance, instance.__class__) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:38:04.110

```
self.aButton.PrintHello = lambda : print "hello!" 
```

或者

```
def aMethod():
    do_something()

self.aButton.DoSomething = aMethod 
```

要么应该工作......可能还有更多方法......这假设aButton是一个继承自Object的python类

# mysql - SQL：使用多个 SELECT 语句/两次检索相同的字段？

> ID：15488952
> 
> 赞同：1
> 
> 时间：2013-03-18T23:37:03.190
> 
> 标签：mysql, sql, database

两张表：

```
person(name,person_id)
lesson(teacher_id, student_id, time, place) 
```

我要检索老师姓名、学生姓名、时间和地点

就像这样：

```
Teacher|Student|Time|Place
ms bla | fred  | 12 | UK
ms bla | Jim   | 12 | UK
mr ttt | john  | 10 | UNI 
```

ETC..

那么如何选择`person_id`两次`WHERE`以匹配`teacher-id`& `student_id`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:41:37.307

[您可以通过使用别名](http://beginner-sql-tutorial.com/sql-aliases.htm)重命名表（[**DEMO**](http://www.sqlfiddle.com/#!2/b2f4c/1) ）多次加入同一个表：

```
select
    teacher.name as Teacher,
    student.name as Student,
    lesson.time,
    lesson.place
from
    lesson
join
    person teacher on teacher.person_id = lesson.teacher_id
join
    person student on student.person_id = lesson.student_id 
```

该表通过=`lesson`链接到`person`表（别名为`teacher`）。然后课程表通过=再次链接到表（这次别名为）。通过使用别名，我们可以引用每个别名的列来获取各自的教师和学生姓名。`teacher_id``person_id``person``student``student_id``person_id``name`

# java - Java HTTP 服务器出错：来自服务器的文件意外结束

> ID：15488956
> 
> 赞同：1
> 
> 时间：2013-03-18T23:37:19.197
> 
> 标签：java, http

**java.net.SocketException：来自服务器的文件意外结束**

客户端使用 URL 向服务器发送查询。我有一个从 URL 解析信息的 HTTPServer。使用该信息，服务器会做一些工作，然后将响应返回给客户端。

假设网址是：

```
http://localhost:9090/find?term=healthy&term=cooking&count=3 
```

这工作正常。但是当计数大于或等于 4 时，我得到 java.net.SocketException。为了调试错误，我打印出 URL。System.out.println(输入); 当 count>=4 时，URL 会在控制台中打印两次。请帮忙。

```
private final HttpServer server;
public Server(int port){
  server = HttpServer.create(new InetSocketAddress(port), MAX_BACKLOG);
  server.createContext("/isbn", new ISBNHandler());
  server.createContext("/find", new TitleHandler());
}

static class TitleHandler implements HttpHandler {
  public void handle(HttpExchange t) throws IOException {
    int count=5;
    String input=t.getRequestURI().toASCIIString();//get the URL
    System.out.println(input);
    //using info from URL to do some work
    String response = builder.toString();//StringBuilder
    // System.out.println(response);
    t.sendResponseHeaders(200, response.getBytes().length);
    OutputStream os = t.getResponseBody();
    os.write(response.getBytes());
    os.close();
  }
} 
```

**例外**

> java.net.SocketException：来自 sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source) 的服务器的文件意外结束 sun.net.www.http.HttpClient.parseHTTP(Unknown Source) 的 sun.net.www .http.HttpClient.parseHTTPHeader(Unknown Source) at sun.net.www.http.HttpClient.parseHTTP(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) at java.net.HttpURLConnection .getResponseCode(Unknown Source) at TestHarness.assertJSONResponse(TestHarness.java:101) 在 TestHarness.testServer(TestHarness.java:38) 在 TestHarness.main(TestHarness.java:25)

**测试线束**

```
 import java.io.*;
    import java.net.HttpURLConnection;
     import java.net.URL;
    import java.util.*;
    import java.util.regex.Matcher;
    import java.util.regex.Pattern;

/**
 * Sample main method with initial acceptance tests to help you along
 */
public class TestHarness {
    private static Pattern MAP_PATTERN = Pattern.compile("(['\"])(.*?)\\1:\\s*(['\"])(.*?)\\3");
    private static Pattern LIST_PATTERN = Pattern.compile("\\{(.*?)\\}");

    public static void main(String[] args) throws IOException {
        /*
        if (args.length < 1) {
            System.out.println("The test harness requires a single parameter: the location of the CSV file to parse");
        }
        */
        BookServer server = new BookServer(9090, new File("books.csv"));
        server.start();
        testServer();
        server.stop();
    }

    /**
     * Run initial acceptance tests
     */
    @SuppressWarnings("unchecked")
    private static void testServer() {
        assertJSONResponse("Book Test", "http://localhost:9090/isbn/9780470052327",
                createMap("isbn", "9780470052327", "title", "Techniques of Healthy Cooking", "author", "Mary Dierdre Donovan", "publisher", "Wiley", "publishedYear", "2007"));
        assertJSONResponse("Book Test", "http://localhost:9090/isbn/9780451169525",
                        createMap("isbn", "9780451169525", "title", "Misery", "author", "Stephen King", "publisher", "Signet", "publishedYear", "1987"));
        assertJSONResponse("Query Test", "http://localhost:9090/find?term=healthy&term=cooking&count=4",
                        Arrays.asList(createMap("isbn", "9780470052327", "title", "Techniques of Healthy Cooking", "author", "Mary Dierdre Donovan", "publisher", "Wiley", "publishedYear", "2007")));

    }

    /**
     * Helper method to convert the vararg parameters into a Map. Assumes alternating key, value, key, value... and calls
     * toString on all args
     *
     * @param args the parameters to put in the map, alternating key ancd value
     * @return Map of String representations of the parameters
     */
    private static Map<String, String> createMap(Object ... args) {
        Map<String, String> map = new HashMap<String, String>();
        for (int i=0; i < args.length; i+=2) {
            map.put(args[i].toString(), args[i+1].toString());
        }
        return map;
    }

    /**
     * Parses a JSON list of maps
     * NOTE: assumes all keys and values in the nested maps are quoted
     *
     * @param content the JSON representation
     * @return a list of parsed Map content
     */
    private static List<Map<String, String>> parseJSONList(CharSequence content) {
        List<Map<String, String>> list = new ArrayList<Map<String, String>>();
        Matcher m = LIST_PATTERN.matcher(content);
        while(m.find()) {
            list.add(parseJSONMap(m.group(1)));
        }
        return list;
    }

    /**
     * Parse JSON encoded content into a Java Map.
     * NOTE: Assumes that all elements in the map are quoted
     *
     * @param content the JSON representation to be parsed
     * @return A map of parsed content
     */
    private static Map<String, String> parseJSONMap(CharSequence content) {
        Map<String, String> map = new HashMap<String, String>();
        Matcher m = MAP_PATTERN.matcher(content);
        while (m.find()) {
            map.put(m.group(2), m.group(4));
        }
        return map;
    }

    /**
     * Retrieve content from a test URL and assert that its content is the expected. Results will be printed to System.out for convenience
     *
     * @param testName Name of the test, to be used simply for labelling
     * @param urlString The URL to test
     * @param expected The content expected at that URL
     */
    private static void assertJSONResponse(String testName, String urlString, Object expected) {
        try {
            URL url = new URL(urlString);
            HttpURLConnection con = ((HttpURLConnection)url.openConnection());
            if (!assertTest(testName + " - response code", con.getResponseCode(), 200)) return;

            StringBuilder b = new StringBuilder();
            BufferedReader r = new BufferedReader(new InputStreamReader(con.getInputStream()));
            String line;
            while((line = r.readLine()) != null) b.append(line);
            String result = b.toString();
            assertTest(testName + " - content retrieved", !result.isEmpty(), true);

            Object parsed = result.trim().startsWith("[") ? parseJSONList(result) : parseJSONMap(result);
            assertTest(testName + " - parsed content match", parsed, expected);
        } catch (Exception e) {
            System.out.println(testName + ": <<<FAILED with Exception>>>");
            e.printStackTrace(System.out);
        }
    }

    /**
     * Log the results of a test assertion
     *
     * @param testName Name of the test, to be used simply for labelling
     * @param result The result of the operation under test
     * @param expected The expected content that the result will be compared against
     * @return whether the test was successful
     */
    private static boolean assertTest(String testName, Object result, Object expected) {
        boolean passed = result.equals(expected);
        System.out.println(testName + (passed ? ": <<<PASSED>>>" : String.format(": <<<FAILED>>> expected '%s' but was '%s'", expected, result)));
        return passed;

      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:41:26.753

我修复了错误。服务器调用了一个私有排序函数，但是我在排序函数中做了一个bug。服务器崩溃了。

# ios - iOS：旧标签栏图标显示

> ID：15488957
> 
> 赞同：0
> 
> 时间：2013-03-18T23:37:31.003
> 
> 标签：ios, objective-c, icons, uitabbarcontroller

所以最初我制作了一些看起来很整洁的自定义标签栏图标，并将它们放在我的项目中。我最近才意识到他们看起来很恶心。所以，我得到了一些免费的标签栏图标并替换了旧的。当应用程序加载时，我首先会看到旧图标，然后当应用程序完全加载时，我会看到我的新图标。现在我不希望任何用户看到这个。然后我采取了行动，不仅从 Xcode 中永久删除了图片，而且从我的硬盘驱动器中删除了这些图片，但仍然没有解决问题。我去了我的 DerivedData 文件夹并清空了我所有的缓存文件。没有成功。这是一个巨大的项目，我不想制作一个新的应用程序，复制粘贴，建立所有的连接，并再次获得所有的框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:42:45.707

您说“当应用程序加载时”您会看到旧图标。您是否有机会在应用程序加载期间看到它，在它实际可用之前，一旦应用程序可用，它就会显示新图标？我敢打赌，您`default.png`显示的是旧图标，而您从未更新过它。

# android - JellyBean 上的 Android 应用程序性能问题

> ID：15488961
> 
> 赞同：0
> 
> 时间：2013-03-18T23:37:55.763
> 
> 标签：android, performance

我正在开发一个项目，我们正在创建一个 Android 应用程序，该应用程序请求来自服务器的数据以显示在用户的设备上（不确定我还能提供多少背景信息......如果需要更多信息，我会尽力而为）。我们支持 Gingerbread (2.3) 及更高版本（直到最新的 JellyBean 4.2）。

现在奇怪的是，该应用程序在运行 2.3.x 的手机上运行得非常快速和流畅（这些通常是稍旧的设备，例如 LG Optimus 2X），而如果我们尝试在相对较新的设备上运行该应用程序（ Galaxy s3 等）具有 JellyBean 4.1+，应用程序运行速度太慢以至于性能成为可用性问题。这发生在从服务器提取数据并显示它们的屏幕上。

我还通过在模拟器上运行它来确认这种行为。

所以我做了一些研究，因为我们在 LogCat 中只获得了 4.1+ 的以下内容：

> 06-29 23:11:17.796：I/Choreographer(691)：跳过 X 帧！应用程序可能在其主线程上做了太多工作。

所以看起来这个叫做 Choreographer 的东西是为 API lvl 16 添加的，它协调动画、输入和绘图的时间。

我想知道这是否导致了这个问题？似乎不太可能是硬件问题，我们的应用程序没有任何动画，并且我们没有针对 2.3.x 和 4.1+ 的单独实现

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:38:13.933

从 Ice Cream Sandwich 开始， 的默认行为`AsyncTask`已从并行执行器变为序列化执行器。

当您在一批中执行多个网络请求时`AsyncTask`（如评论中所见），这意味着您的应用程序在启动下一个请求响应之前等待上一个请求响应。

`AsyncTask`您可以使用以下代码更改执行者：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    myTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
}
else {
    myTask.execute();
} 
```

来源：CommonsWare 博客[确认的 AsyncTask 线程回归。](http://commonsware.com/blog/2012/04/20/asynctask-threading-regression-confirmed.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T13:07:14.387

我在 Kindle Fire、Sony Xperia Z 和三星 S4（都使用 android 4.2）上经历过同样的事情。

修复方法是：在 App Manifest 文件中删除“android:supportsRtl="true"”。

希望它能节省您的时间。在得到它之前，我花了 4 个小时进行测试和合并。

# sql - SQL根据子查询输出列名

> ID：15488971
> 
> 赞同：1
> 
> 时间：2013-03-18T23:38:46.547
> 
> 标签：sql, calculated-columns

我想通过执行以下操作获取查询输出的列名：

```
SELECT      queuename
FROM        queue
WHERE     queue.queuename LIKE 'CLIENT VIP%' and queue.status = 1 
```

对于我想指出每个队列的不同用户的行：

```
FROM         queue INNER JOIN
                      queue_users ON queue.queueid = queue_users.queueid INNER JOIN
                      users ON queue_users.userid = users.userid
WHERE     queue.queuename LIKE 'CLIENT VIP%' and queue.status = 1 and userstatus = 1 
```

所以对于输出，我会有类似的东西：

```
User    QueueA  QueueB  QueueC
----------------------------------
Bob     Bob     Null    Bob
Joe     Joe     Joe     Joe
Bill    Bill    Null    Null 
```

这在 SQL 中甚至是可能的，还是我需要在其他东西中处理查询的输出？

**注意：** *我不能假设我知道输出的队列名称。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:44:05.613

根据您的 RDMBS，这是一种使用`MAX`and的方法`CASE`：

```
SELECT users.userid, 
    users.user,
    MAX(CASE WHEN queue.id = 'A' Then users.user END) QueueA,
    MAX(CASE WHEN queue.id = 'B' Then users.user END) QueueB,
    MAX(CASE WHEN queue.id = 'C' Then users.user END) QueueC
FROM         queue INNER JOIN
                      queue_users ON queue.queueid = queue_users.queueid INNER JOIN
                      users ON queue_users.userid = users.userid
WHERE     queue.queuename LIKE 'Otsuka VIP%' and queue.status = 1 and userstatus = 1
GROUP BY users.userid 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/a617e/3)

您可能需要更新一些字段名称——我猜有几个。不过，上面的 SQL Fiddle 应该会让您朝着正确的方向前进。

***- 编辑 -***

鉴于您最近的编辑，如果您不知道队列名称（意味着您不知道要返回多少列），那么这听起来更像是演示问题而不是数据库问题。您也许可以使用动态 SQL 来实现您的结果，但同样，您最好在 UI 端执行此操作而不是 DAL 端。

# c - 域套接字碎片

> ID：15488972
> 
> 赞同：1
> 
> 时间：2013-03-18T23:38:58.757
> 
> 标签：c, sockets

我正在使用域套接字（AF_UNIX）在两个线程之间进行通信以进行进程间通信。选择它与 libev 一起工作得很好：我在域套接字的 recv 端使用它。这很好用，只是我发送的数据是恒定的 4864 字节。我不能让这些数据支离破碎。我一直认为域套接字不会分割数据，但事实证明确实如此。当线程之间的通信达到顶峰时，我观察到以下情况

```
Thread 1:
SEND = 4864 actual size = 4864

Thread 2:
READ = 3328 actual size = 4864

Thread 1:
SEND = 4864 actual size = 4864

Thread 2:
READ = 1536 actual size = 4864 
```

如您所见，线程 2 以片段 (3328 + 1536) 的形式接收数据。这对我的应用程序来说真的很糟糕。有没有办法让它不分片呢？我知道 IP_DONTFRAG 只能设置为 AF_INET 系列？有人可以提出替代方案吗？

更新：发送代码

```
ssize_t
socket_domain_writer_dgram_send(int *domain_sd, domain_packet_t *pkt) {

    struct sockaddr_un remote;
    unsigned long len = 0;
    ssize_t ret = 0;

    memset(&remote, '\0', sizeof(struct sockaddr_un));
    remote.sun_family = AF_UNIX;
    strncpy(remote.sun_path, DOMAIN_SOCK_PATH, strlen(DOMAIN_SOCK_PATH));
    len  = strlen(remote.sun_path) + sizeof(remote.sun_family) + 1;

    ret = sendto(*domain_sd, pkt, sizeof(*pkt), 0, (struct sockaddr *)&remote, sizeof(struct sockaddr_un));
    if (ret == -1) {
        bps_log(BPS_LOGGER_RD, ASL_LEVEL_ERR, "Domain writer could not connect send packets", errno);
    }
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:52:48.543

`4864 + 3328 = 8192`. 我的猜测是，在某些情况下，您正在背靠背传输两个 4864 字节的数据包，并且它在某处填充了 8 KB 内核缓冲区。`IP_DONTFRAG`不适用，因为这里不涉及 IP — 您看到的“碎片化”是通过完全不同的机制发生的。

如果您传输的所有数据都由数据包组成，那么最好使用数据报套接字 ( `SOCK_DGRAM`) 而不是流。`send()`当内核缓冲区没有足够的空间来存储整个数据包时，这应该会生成块，而不是允许部分写入，并且会使每个都`recv()`返回一个数据包，因此您不需要处理帧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T00:08:44.717

SOCK_STREAM 根据定义不保留消息边界。使用 SOCK_DGRAM 或 SOCK_SEQPACKET 重试：

[http://man7.org/linux/man-pages/man7/unix.7.html](http://man7.org/linux/man-pages/man7/unix.7.html)

另一方面，请考虑您传递的消息可能大于您的体系结构页面大小。例如对于amd64，一个内存页是4K。如果出于任何原因这是一个问题，那么将数据包分成 2 个可能是有意义的。

但是请注意，对于数据包分段到达而言，这并不是真正的问题。在套接字的接收端有一个数据包组装器是很常见的。实施它有什么问题？

# c++ - 类型检查中的纯名称等价

> ID：15488973
> 
> 赞同：2
> 
> 时间：2013-03-18T23:39:17.057
> 
> 标签：c++, compiler-construction, programming-languages, compatibility, typechecking

我正在阅读 Ravi Sethi 的关于编程语言概念的书，上面写着

> ```
> int *i1;  
> int *i2; 
> ```
> 
> 在这些声明之后， i1 和 i2 的类型不兼容名称类型。在使用名称类型兼容性的语言中，变量 i1 和 i2 无法相互比较或分配。

我想知道为什么它们的名称不兼容？它们具有相同的名称类型：int。有人可以解释一下并举一个有效的纯名称等价的例子吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:05:51.540

他们都没有 type `int`。两者都被键入为指向`int`. 我认为 Sethi 的观点是，在使用（仅）名称等价的假设语言中，这两个指向`int`类型的表达式创建了两种不兼容的不同类型——就像`new`创建不同的、非等价对象的两种相同用途一样。

在名称等价语言中，您必须为类型表达式命名才能以类型兼容的方式多次使用它。在 C++ 语法中，这需要使用`typedef`：

```
typedef int *intp;
intp i1;
intp i2; 
```

现在，`i1`并`i2`具有名称兼容的类型。

# jquery - 如何使特定动画从特定事件触发，例如关闭所有菜单选项卡？

> ID：15488974
> 
> 赞同：0
> 
> 时间：2013-03-18T23:39:23.333
> 
> 标签：jquery, jquery-animate, show-hide

所以基本上，我正在尝试使用“.animate”创建一个具有 4 列水平显示和隐藏的启动页面。目前，我已经成功创建了基本布局，但是 4 列所在的容器（打开一列时扩展为 5 的大小）在打开一列时从页面中心偏移。容器 div 绝对定位为以 x 和 y 轴为中心。我试图让整个 div 向左移回中心，但是当列关闭时，div 不会向后移动。所以我的问题是，当所有列都关闭时，如何让 div 移回？

```
 // JavaScript Document
$(document).ready(function(){
  $("#button1").click(function(){
      $(".row").not("#button1").animate();
    $("#slide1").animate({
      width:'toggle'
    });
    $("#slide2").animate({
        width:'hide'
    });
    $("#slide3").animate({
        width:'hide'
    });
    $("#slide4").animate({
        width:'hide'
    });
  });
  $("#button2").click(function(){
      $(".row").not("#button2").animate();
    $("#slide2").animate({
      width:"toggle"
    });
    $("#slide1").animate({
        width:"hide"
    });
    $("#slide3").animate({
        width:"hide"
    });
    $("#slide4").animate({
        width:"hide"
    });
  });
  $("#button3").click(function(){
      $(".row").not("#button3").animate();
    $("#slide3").animate({
      width:"toggle"
    });
    $("#slide1").animate({
        width:"hide"
    });
    $("#slide2").animate({
        width:"hide"
    });
    $("#slide4").animate({
        width:"hide"
    });
  });
  $("#button4").click(function(){
      $(".row").not("#button4").animate();
    $("#slide4").animate({
      width:"toggle"
    });
    $("#slide1").animate({
        width:"hide"
    });
    $("#slide3").animate({
        width:"hide"
    });
    $("#slide2").animate({
        width:"hide"
    });
  });
  // reposition container //
  $("#button1,#button2,#button3,#button4").click(function(){
      $("#container").animate({
          left:'50%',
          marginLeft:'-500px'
      });
  });
}); 
```

顺便说一句，我也只是在自学 jQuery，所以对于任何含糊之处，我深表歉意。我愿意尝试澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:36:10.440

不确定我是否完全理解您要执行的操作，但我设置了一个我认为与您正在执行的操作相匹配的[jsFiddle 。](http://jsfiddle.net/brianflanagan/taK9K/)基本上，我真的很依赖 CSS 来处理定位。jQuery 只是用来展开和折叠所选列并重置容器宽度。而不是使用`position:absolute`我使用设置宽度和`margin:0 auto`. 这样，当容器改变大小时，我就不必担心计算左侧偏移位置之类的东西。

# c++ - 为什么至少需要 1 个数据成员才能使一个类不是普通旧数据类型 (POD)？

> ID：15488975
> 
> 赞同：1
> 
> 时间：2013-03-18T23:39:30.930
> 
> 标签：c++

在[https://stackoverflow.com/a/15483397/368896](https://stackoverflow.com/a/15483397/368896)中，张贴者指出——如果我没看错的话——必须至少存在一个数据成员才能使类不成为 POD。

```
class X {};        // This class is a POD
class Y { int y; } // This class is not, because of the presence of the data member 
```

为什么需要至少 1 个数据成员才能使一个类不是 POD？

# css - 有趣的 CSS 浮动

> ID：15488976
> 
> 赞同：0
> 
> 时间：2013-03-18T23:39:32.520
> 
> 标签：css

对于某些 DIV，我有以下 CSS，

```
#wrapper {
  width:960px; 
  border:1px solid red;
  overflow:hidden;
}

#maintitle {
  width:600px;
  height:50px;
  float:left;
  border:1px solid #333;
}

#sidebar {
  clear:both;
  float:left;
  width:100px;
  height:200px;
  border:1px solid #ccc;
}

#rightSidebar {
  width:100px;
  height:200px;
  float:right;
  border:1px solid #CCC;
} 
```

我认为#rightSidebar div 会浮动到#wrapper div 的右上角，但是，它停留在#maintitle DIV 下方。

#maintitle DIV 浮动到左侧，然后它会允许#rightsidebar div 浮动到右上角吗？

它在行动中，[http://jsfiddle.net/BdpU7/](http://jsfiddle.net/BdpU7/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:45:08.133

这是你的想法吗？[http://jsfiddle.net/BdpU7/1/](http://jsfiddle.net/BdpU7/1/)

`#rightSidebar`需要`#sidebar`在 HTML 之前，然后必须`#sidebar`有`clear`：

```
#wrapper {
    width:960px; 
    border:1px solid red;
    overflow:hidden;
}

#maintitle {
    width:600px;
    height:50px;
    float:left;
    border:1px solid #333;
}

#sidebar {
    clear:left;
    float:left;
    width:100px;
    height:200px;
    border:1px solid #ccc;
}

#rightSidebar {
    width:100px;
    height:200px;
    float:right;
    border:1px solid green;
}

<div id="wrapper">
    <div id="maintitle"></div>
    <div id="rightSidebar"></div>
    <div id="sidebar"></div>
</div> 
```

# php - ZF2视图在另一个视图中渲染

> ID：15488977
> 
> 赞同：1
> 
> 时间：2013-03-18T23:39:36.780
> 
> 标签：php, zend-framework2

我不想将孩子添加到动作控制器中的 viewModel 中：

```
// action controller
public function indexAction() {
    $result = new ViewModel();
    $result->setTemplate('application/view/another-action');

    $comments = new ViewModel();
    $comments->setTemplate('application/view/child-comments');
    $result->addChild($comments, 'child_comments');

    return $result;
}
...
// View
<div>
<?php echo $this->child_comments ?>
</div> 
```

我想在另一个视图中包含视图：

```
<div>
  <?php
  $view = new ViewModel();
  $view->setVariables($this->var);
  $view->setTemplate('page_nav.phtml');
  // here I want to render view 
  ?>
</div> 
```

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T11:34:49.700

我知道这是旧的，但你也可以简单地打电话`$this->render('path/to/view-script')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:00:21.707

这就是[`Partial`](https://github.com/zendframework/zf2/blob/release-2.1.4/library/Zend/View/Helper/Partial.php)视图助手所做的（文档似乎已经过时，但我还是会[在这里](http://framework.zend.com/manual/2.1/en/modules/zend.view.helpers.html#partial-helper)链接它们）：

```
<div>
    <?php echo $this->partial('page_nav', array('var' => $this->var)) ?>
<div> 
```

显然，您`page_nav`的视图解析器应该知道您的。

# cocoa - 如何从浏览器中获取选定的 HTML 并拉入我的应用程序

> ID：15488978
> 
> 赞同：0
> 
> 时间：2013-03-18T23:39:37.647
> 
> 标签：cocoa, service, sandbox, xpc

我想创建一个 Cocoa 应用程序，它能够从第三方浏览器中的网站中获取选定的文本（换句话说，不是从我自己的应用程序中运行的嵌入式 webkit 实例），然后将其存储在我的应用程序的数据库中. 据我所知，我需要为此使用某种服务，例如如何通过服务将 Textedit 中的选定文本转换为新的便签。但是，我希望能够通过 App Store 提供这个应用程序。这是否意味着我需要使用 XPC 服务？

这就是我所得到的。因此，如果我确实需要使用 XPC 服务，有人可以指点我一个有用的方向吗？[服务实施指南](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/SysServices/SysServices.pdf)完全超出了我的想象。

# cocos2d-iphone - Cocos2d - 允许多个类使用触摸（sneakyjoystick）

> ID：15488988
> 
> 赞同：0
> 
> 时间：2013-03-18T23:40:21.070
> 
> 标签：cocos2d-iphone, touchesbegan

晚上好，我将以历史悠久的传统开始这个问题，说我已经对 SO 以及更广阔的世界进行了很好的旧搜索，但我并没有完全理解这个......我已经实现了一个很好用的sneakyJoystick（它非常愉快地移动了我的精灵）但是我现在在考虑它的定位时给自己做了一个恶作剧。我想做的只是将它的位置更改为触摸位置并让它移动我的精灵，但这似乎超出了我的知识库。我可能是个白痴，但我无法解决。

触摸事件已经在sneakyjoystick 类中排序（在github [https://github.com/0xPr0xy/sneaky-joystick-cocos2d](https://github.com/0xPr0xy/sneaky-joystick-cocos2d)上可用）。目前，如果我在名为 controlsLayer 的类中的 init 方法中创建操纵杆，那么一切正常；操纵杆出现，它允许我移动精灵

```
-(id) init
{

if( (self=[super init]) ) {

    myJoystickBase = [[[SneakyJoystickSkinnedBase alloc] init] autorelease];
    myJoystickBase.backgroundSprite = [CCSprite spriteWithFile:@"dpad.png"];
    myJoystickBase.thumbSprite = [CCSprite spriteWithFile:@"joystick.png"];
    myJoystickBase.joystick = [[SneakyJoystick alloc] initWithRect:CGRectMake(0, 0, 128, 128)];
    myJoystickBase.position = ccp(64, 64);
    myJoystickBase.backgroundSprite.opacity = 100;
    myJoystickBase.thumbSprite.opacity = 100;
    [self addChild:myJoystickBase];
    myJoystick = [myJoystickBase.joystick retain];

    [self scheduleUpdate];

    }
return self;
} 
```

所以一开始我想看看我如何简单地让它显示和隐藏自己并设置它的位置。为此，我创建了一个 ccTouchesbegan 方法，其中包含与我之前的 init 方法几乎相同的代码。这在一定程度上可以正常工作（操纵杆出现在我触摸的任何地方的中心）但现在的问题是我无法与之交互。操纵杆出现在我想要的位置，但它无法识别我的动作（操纵杆上的操纵杆没有移动，这反过来意味着我的精灵也没有被告知移动）

```
if( (self=[super init]) ) {

    self.isTouchEnabled = YES;
    [self scheduleUpdate];

}
return self;
}

-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    CGPoint location = [[CCDirector sharedDirector] convertToGL:[touch locationInView:[touch view]]];
    location = [self convertToNodeSpace:location];
    myJoystickBase = [[[SneakyJoystickSkinnedBase alloc] init] autorelease];
    myJoystickBase.backgroundSprite = [CCSprite spriteWithFile:@"dpad.png"];
    myJoystickBase.thumbSprite = [CCSprite spriteWithFile:@"joystick.png"];
    myJoystickBase.joystick = [[SneakyJoystick alloc] initWithRect:CGRectMake(0, 0, 128, 128)];
    myJoystickBase.position = location;
    myJoystickBase.backgroundSprite.opacity = 100;
    myJoystickBase.thumbSprite.opacity = 100;
    [self addChild:myJoystickBase];
    myJoystick = [myJoystickBase.joystick retain];
}

-(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    [self removeChild:myJoystickBase cleanup:YES];
} 
```

所以对于我的外行来说，这就是说当我触摸 controlsLayer 类时，它会很高兴地按照我的要求去做，但它不会将这种触摸传递给其他类。

简而言之，一个触摸事件可以同时传递给多个类吗？鬼鬼祟祟的操纵杆类使用 CCTargetedTouchDelegate，当它是唯一需要触摸的东西时，它工作得很好。然而，现在我已经添加了一个 -(void)ccTouchesBegan: 在另一个类中它并不高兴。

谁能告诉我问题是我处理触摸的方式还是我在触摸方法中分配操纵杆的方式有问题？我应该在 init 方法中分配操纵杆并在 touchesBegan 方法中做其他事情吗？目前，反复试验并没有让我有任何用处。感觉就像我的头撞在砖墙上一样。如有必要，我很乐意发布完整的课程文件。这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:09:31.640

问题是您在触摸开始时创建操纵杆，并在触摸结束时将其移除。这不允许操纵杆接收触摸开始事件，因为在创建操纵杆时该事件已经在处理中。

由于不必要的保留，您还泄漏了操纵杆（请使用 ARC！）。

尝试在 init 中创建操纵杆，禁用并隐藏它，直到收到触摸开始事件。这也比在每次触摸时重新创建操纵杆更快。

此外，如果您启用了多次触摸，请记住，您最多可以接收 5 个触摸开始事件（5 个手指），中间没有任何触摸结束。这将创建 5 个操纵杆，但只能移除一个！每次！

# spring - 使用 Hibernate Validator 验证 double 和 float 值 - bean 验证

> ID：15488990
> 
> 赞同：13
> 
> 时间：2013-03-18T23:40:36.620
> 
> 标签：spring, validation, spring-mvc, bean-validation, hibernate-validator

我正在寻找一种方法来验证`java.lang.Double`Spring 命令 bean 中的字段的最大值和最小值（一个值必须位于给定的值范围之间），例如，

```
public final class WeightBean
{
     @Max(groups={ValidationGroup.class}, value=Double.MAX_VALUE, message="some key or default message")
     @Min(groups={ValidationGroup.class}, value=1D, message="some key or default message")
     private Double txtWeight;  //Getter and setter.

     public interface ValidationGroup{}         
} 
```

但两者[`@Max`](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/Max.html)并[`@Min`](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/Min.html)不能`java.lang.Double`取值。

> 请注意，由于舍入错误，不支持 double 和 float（某些提供程序可能会提供一些近似支持）

那么验证这些字段的方法是什么？

我正在使用 Spring 3.2.0 和 Hibernate Validator 4.3.1 CR1。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T16:18:27.533

您可以使用注释，但根据具体情况，您可能会得到错误的结果。这是双打和 imo 在许多情况下的普遍问题，应该避免使用 _Double_s。也许切换到不同的类型是最好的解决方案？例如*大十进制？*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-28T20:14:01.667

如果您已切换到 BigDecimal（或 BigInteger），则可以使用[@DecimalMin](http://jackson.codehaus.org/javadoc/bean-validation-api/1.0/javax/validation/constraints/DecimalMin.html)或[@DecimalMax](http://jackson.codehaus.org/javadoc/bean-validation-api/1.0/javax/validation/constraints/DecimalMax.html)。但这仍然不是 float 或 double 的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-24T11:03:53.417

我避免了`double`和`float`类型，并实现了一个自定义验证器，它可以`BigDecimal`根据精度和比例来验证一个值。

约束描述符。

```
package constraintdescriptor;

import constraintvalidator.BigDecimalRangeValidator;
import java.lang.annotation.Documented;
import static java.lang.annotation.ElementType.ANNOTATION_TYPE;
import static java.lang.annotation.ElementType.FIELD;
import static java.lang.annotation.ElementType.METHOD;
import java.lang.annotation.Retention;
import static java.lang.annotation.RetentionPolicy.RUNTIME;
import java.lang.annotation.Target;
import javax.validation.Constraint;
import javax.validation.Payload;

@Target({METHOD, FIELD, ANNOTATION_TYPE})
@Retention(RUNTIME)
@Constraint(validatedBy = BigDecimalRangeValidator.class)
@Documented
public @interface BigDecimalRange {
    public String message() default "{java.math.BigDecimal.range.error}";
    public Class<?>[] groups() default {};
    public Class<? extends Payload>[] payload() default {};

    long minPrecision() default Long.MIN_VALUE;
    long maxPrecision() default Long.MAX_VALUE;
    int scale() default 0;
} 
```

* * *

约束验证器。

```
package constraintvalidator;

import constraintdescriptor.BigDecimalRange;
import java.math.BigDecimal;
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

public final class BigDecimalRangeValidator implements ConstraintValidator<BigDecimalRange, Object> {

    private long maxPrecision;
    private long minPrecision;
    private int scale;

    @Override
    public void initialize(final BigDecimalRange bigDecimalRange) {
        maxPrecision = bigDecimalRange.maxPrecision();
        minPrecision = bigDecimalRange.minPrecision();
        scale = bigDecimalRange.scale();
    }

    @Override
    public boolean isValid(final Object object, final ConstraintValidatorContext cvc) {
        boolean isValid = false;

        if (object == null) { // This should be validated by the not null validator (@NotNull).
            isValid = true;
        } else if (object instanceof BigDecimal) {
            BigDecimal bigDecimal = new BigDecimal(object.toString());
            int actualPrecision = bigDecimal.precision();
            int actualScale = bigDecimal.scale();
            isValid = actualPrecision >= minPrecision && actualPrecision <= maxPrecision && actualScale <= scale;

            if (!isValid) {
                cvc.disableDefaultConstraintViolation();
                cvc.buildConstraintViolationWithTemplate("Precision expected (minimun : " + minPrecision + ", maximum : " + maxPrecision + "). Maximum scale expected : " + scale + ". Found precision : " + actualPrecision + ", scale : " + actualScale).addConstraintViolation();
            }
        }

        return isValid;
    }
} 
```

这也可以在需要时扩展到其他类型。

* * *

最后在 bean 中，类型的属性`BigDecimal`可以通过`@BigDecimalRange`注解进行如下注解。

```
package validatorbeans;

public final class WeightBean {

    @BigDecimalRange(minPrecision = 1, maxPrecision = 33, scale = 2, groups = {ValidationGroup.class}, message = "The precision and the scale should be less than or equal to 35 and 2 respectively.")
    private BigDecimal txtWeight; // Getter and setter.

    public interface ValidationGroup {}
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-20T10:23:06.750

您也可以`@Digits`从休眠验证器 API 中使用

```
@Digits(integer = 10 /*precision*/, fraction = 2 /*scale*/) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-27T14:23:50.113

`@AssertTrue`有时与/ `@AssertFalse`from配对很方便`javax.validation.constraints`

```
public final class WeightBean {
    @NotNull
    private Double txtWeight;  //Getter and setter.

    @AssertTrue
    public boolean getTxtWeightCheck() {
        return txtWeight > 0.1 && txtWeight < 0.9;
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-09T09:49:07.743

较新版本的 Hibernate Validator（至少 6.0.17）支持`@DecimalMin/Max`双注释

见[类进行验证](https://docs.jboss.org/hibernate/validator/6.1/api/org/hibernate/validator/internal/constraintvalidators/bv/number/bound/decimal/DecimalMaxValidatorForDouble.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-10T06:55:19.847

Hibernate 验证器适用`@DecimalMin/Max`于`Double`& `Float`。但它们不是精确的数字，只是近似值，取决于验证实现，可能会有一些错误的结果。

验证的最佳想法是使用`BigDecimal`带有`@DecimalMin`和`@DecimalMax`验证注释的类型。

# haskell - Haskell 无限类型

> ID：15488992
> 
> 赞同：6
> 
> 时间：2013-03-18T23:40:38.663
> 
> 标签：haskell, types

我正在尝试使下面的代码正常工作。这是一个有限状态机，我在其中传递一个函数作为下一个状态。该函数被调用`r`并返回结果列表+下一个函数作为下一个状态。继续调用直到列表用完，并返回结果的串联。monad 是一个错误 monad，允许我在需要时抛出错误。

```
fsm f []     = return []
fsm f (r:rs) = do
    (xs, f') <- f r
    rest     <- fsm f' rs
    return $ xs ++ rest 
```

错误是：

```
Occurs check: cannot construct the infinite type: t1 = t0 -> m0 ([a0], t1)
In the first argument of `fsm', namely f' 
```

我以前见过无限类型错误，我理解解决它的方法是用`newtype`. 但我无法弄清楚如何完成这项工作。

有人可以指出洞察力吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T23:57:55.920

我认为这就是你想要的：

```
newtype F m = F { unF :: String -> m ([String], F m) }

fsm :: (Monad m) => F m -> [String] -> m [String]
fsm f []     = return []
fsm f (r:rs) = do
    (xs, f') <- unF f r
    rest     <- fsm f' rs
    return $ xs ++ rest 
```

你是对的，你需要使用 a`data`或`newtype`任何时候你想要一个递归类型。

在回复您的评论时，您将如何实现您的`dup`功能：

```
dup :: (Monad m) => F m
dup = F dup' where dup' xs = return ([xs, xs], F dup') 
```

...或者，如果您愿意，也可以将其拆分为两个单独的定义。

请注意，如果您不确定类型签名应该是什么，只需启用`NoMonomorphismRestriction`扩展，编译器不会抱怨并为您正确推断顶级类型。

# c++ - 从大文件中读取格式化数据的最有效方法是什么？

> ID：15488994
> 
> 赞同：3
> 
> 时间：2013-03-18T23:40:58.353
> 
> 标签：c++, c, file, input, io

选项： 1\. 将整个文件读入一个巨大的缓冲区，然后解析。2\. 将文件映射到虚拟内存。3\. 分块读取文件，并一一解析。

该文件可以包含相当任意的数据，但主要是数字、值、字符串等，以某种方式（逗号、括号、引号等）格式化。哪个选项会给我最好的整体性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:49:08.603

如果文件**非常大**，那么您可以考虑使用带有选项 2 或 3 的多个线程。每个线程可以处理单个文件/内存块，并且您可以通过这种方式重叠 IO 和计算（解析）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:00:12.507

很难对您的问题给出一般性的答案，因为选择“正确”策略在很大程度上取决于您正在阅读的数据的组织。

特别是如果要处理大量数据，选项 1\. 和 2\. 无论如何都不起作用，因为可用的主内存量对任何此类尝试构成上限。

很可能在效率方面的最大收益可以通过（重新）构建您要处理的数据来实现。

在解决问题中提到的问题之前，检查是否有机会以一种节省不必要的处理整个块的方式来组织数据将是我尝试改进的主要点。

就效率而言，选择上述任何一种方法都是一个常数，而另一方面，正确组织数据可能会带来更好的改进。数据越大，您的决定就越重要。

有关数据的一些事实似乎很有趣，值得考虑包括：

*   您要处理的数据是否有任何常规模式？
*   数据主要是静态的还是高度动态的？
*   它必须按顺序解析还是可以并行处理数据？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:15:45.540

一次读取整个文件然后从文本转换为二进制数据是没有意义的；写起来更方便，但是你用完内存更快。我会分块阅读文本并随时转换。无论如何，转换后的数据（以二进制格式而不是文本格式）可能会比原始源文本占用更少的空间。

# html - 推特特定的博客文章链接不起作用

> ID：15488995
> 
> 赞同：0
> 
> 时间：2013-03-18T23:41:03.300
> 
> 标签：html, css

我正在使用以下代码让读者能够发布特定的博客文章-

```
<a expr:href='"http://twitter.com/home?status=Reading " + data:post.title + " @mytwitter " + data:post.url' class='twitter'></a>

.content .share .social ul li a.twitter {
    display: block;
    width: 26px;
    height: 26px;
    background: url(img/twitter.png);
    text-indent: -99999px;
}
.content .share .social ul li a.twitter:hover {
    background: url(img/twitter-hover.png);
    background-position: 0 0;
} 
```

该链接不起作用，甚至看起来都没有激活，我不太清楚为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:00:35.890

就我个人而言，我会以这种方式做你的超链接，因为你是从 JS 做的。

```
<script type="text/javascript">
var twitterURI = "http://twitter.com/home?status=Reading " + data:post.title + " @mytwitter " + data:post.url;
document.write('<a expr:href="' + twitterURI + '"></a>');
</script> 
```

这是一个 Bit.ly 代码片段，如果您不想将其包装在脚本标签中，也可以从中引用

```
<a href="javascript:var e=document.createElement('script');e.setAttribute('language','javascript');e.setAttribute('src','http://bit.ly/bookmarklet/load.js?utm_source=publisher-sidebar&ls=0&u='+encodeURIComponent('<?php echo get_permalink(); ?>'));document.body.appendChild(e);void(0);">Share with Bit.ly Sidebar</a> 
```

# c# - 触发文件监视器事件时 Windows 窗体崩溃

> ID：15488999
> 
> 赞同：0
> 
> 时间：2013-03-18T23:41:19.697
> 
> 标签：c#, c#-4.0

我正在尝试在 Windows 窗体应用程序中实现文件监控，但遇到了问题。每当触发事件时，我的表单就会不断崩溃。

```
 public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        textBox1.Text = "";
        FileSystemWatcher watch = new FileSystemWatcher();
        watch.Path = @"C:\files\";

        watch.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite | NotifyFilters.FileName | NotifyFilters.DirectoryName;

        watch.Filter = "*.txt";

        watch.Changed += new FileSystemEventHandler(writeTb);
        watch.Created += new FileSystemEventHandler(writeTb);
        watch.Deleted += new FileSystemEventHandler(writeTb);
        watch.Renamed += new RenamedEventHandler(writeTb);

        watch.EnableRaisingEvents = true;

    }

    private void writeTb(object source, FileSystemEventArgs e)
    {
        textBox1.Text += e.ChangeType + ": " + e.FullPath;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:20:15.133

`FileSystemWatcher`从新线程调用事件，如果要更新任何控件，则必须返回`Invoke`UI 线程

```
 private void writeTb(object source, FileSystemEventArgs e)
 {
    base.Invoke((Action)delegate
    {
       textBox1.Text += e.ChangeType + ": " + e.FullPath;
    });
 } 
```