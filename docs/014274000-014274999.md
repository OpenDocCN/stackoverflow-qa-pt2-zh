# StackOverflow 问答 14274000-14274999

# javascript - 带有布尔值的 Kendo Grid 复选框不起作用

> ID：14274005
> 
> 赞同：1
> 
> 时间：2013-01-11T08:03:14.330
> 
> 标签：javascript, jquery, kendo-ui

我有一个布尔字段，但网格没有正确获取值（0 或 1），并且如果更改也无法正确更新。如果字段（启用）为 1，它也不会显示使用模板检查。

但是，如果我将字段类型设置为字符串而不是布尔值，一切都会按预期工作，但是您必须输入 0 或 1，这不是我想要的：

```
{
    field: "enabled",
    template: '<input type="checkbox" #= enabled == "1" ? checked="checked" : "" # />',
    width: 50,
    title: "Enabled"
} 
```

如果我将字段上的模板用作布尔值，则所有复选框都是空白的，好像“启用”始终为空，但事实并非如此。

来自服务器的示例数据：

```
{"data":[{"id":"57","username":"adf@saddf.com","type":"1","level":"1","firstName":"asdf","middleName":"","lastName":"asdf","DoB":"0000-00-00","dateStarted":"0000-00-00","enabled":"1"}], "rowcount": 4} 
```

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:15:07.567

我想到了。

返回的布尔值必须是字面意义上的“真”或“假”，而不是 1 或 0。

# c++ - 使用 qmake 生成对 MS VS 有额外依赖关系的 makefile

> ID：14274006
> 
> 赞同：0
> 
> 时间：2013-01-11T08:03:21.893
> 
> 标签：c++, qt

我有一个用 qmake (qmake -tp vc) 制作的 Visual Studio 项目，它是一个 lib，它使用 win32 套接字函数 (setsockopt)，所以我需要包含“Ws2_32.lib”。

但是如果我做类似的事情

```
POST_TARGETDEPS  += Ws2_32.lib 
```

它没有写入 Visual Studio 项目文件。对我来说问题是，我几乎没有包含此库的应用程序类型项目，如果我不需要在 .pro 文件中为这些项目设置额外的行，我会更好。

所以我的问题是，我需要在 .pro 文件中使用什么指令/变量，所以 lib 依赖关系以 Visual Studio 项目文件结尾？

已解决：我没有找到如何为具有附加依赖项的 lib 创建 Visual Studio 项目文件，但作为解决方法，我在 .pri 文件中添加了 LIB 定义，该文件包含在所有应用程序类型项目中，因此我不需要添加此 lib手动到每个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:22:09.857

使用`LIBS`：

```
win32:LIBS += -lWs2_32 
```

# php - SQL查询语法问题

> ID：14274014
> 
> 赞同：-6
> 
> 时间：2013-01-11T08:04:10.007
> 
> 标签：php, mysql

我不知道如何解决这个问题。错误在哪里？我试图找出答案，我认为这与**AND有关**

```
$query = mysql_query ("SELECT * FROM photos ORDER BY id DESC LIMIT ".$queryStart.", 5" AND type="pic"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:06:52.993

尝试这个：

```
$query = mysql_query ("SELECT * FROM photos WHERE type='pic' ORDER BY id DESC LIMIT $queryStart, 5"); 
```

问题是：

*   未`AND type="pic"`包含在字符串中，或​​以任何方式连接
*   你`AND type="pic"`显然是为了适应一个`WHERE`类，它应该在`FROM`子句之后，但在`ORDER`子句之前
*   您只需要`AND`连接多个`WHERE`子句 - 您只有一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:08:32.357

the `WHERE` clause must come first before `ORDER` and `LIMIT`

```
$query = mysql_query ("SELECT * FROM photos WHERE type='pic' ORDER BY id DESC LIMIT ".$queryStart.", 5"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T08:09:54.163

`AND type="pic"`是超级错误的。您应该将其放在查询字符串中。此外，where 子句不会出现在`LIMIT`子句之后。`LIMIT`子句应该放在最后。所以使用这个查询。

```
mysql_query("SELECT * FROM photos WHERE type='pic' ORDER BY id DESC LIMIT $queryStart, 5); 
```

**注意：**不要使用`mysql_*`函数。它们已被[弃用](https://wiki.php.net/rfc/mysql_deprecation)。使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)

# mod-rewrite - RewriteBase 在没有别名的网络服务器上

> ID：14274015
> 
> 赞同：0
> 
> 时间：2013-01-11T08:04:14.483
> 
> 标签：mod-rewrite, centos

我正在开发一个在专用服务器上运行的网站。设置是 CentOS 机器和 Apache，但没有任何别名（它是服务器上运行的唯一网站）。网站文件位于`/var/www/html/`并且未启用 mod_rewrite 日志。

`RewriteBase /var/www/html/`和都试过了`RewriteBase /`，但都没有成功。我确信我的重写规则是正确的，因为它们在我的本地机器上工作。

有谁知道应该是什么`RewriteBase`价值？

PS`.htaccess`位于网站根目录`/var/www/html/`

**更新**

问题不是`RewriteBase`，但出于安全原因`AllowOverride`设置为。`None`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T00:03:54.160

我从上面发布答案，因为它在评论中并且我遇到了同样的问题。此答案适用于将来可能遇到相同问题的人。

在配置文件/etc/httpd/conf/httpd.conf

```
AllowOverride None 
```

需要改为

`AllowOverride All`在该`<Directory "/var/www/html">`部分

`.htaccess`这将允许您在网站的 Web 根目录中使用文件。

之后运行命令`service httpd restart`重新启动 Apache 服务

# unit-testing - 斯卡拉模拟。模拟一个接受参数的类

> ID：14274020
> 
> 赞同：8
> 
> 时间：2013-01-11T08:04:36.433
> 
> 标签：unit-testing, scala, mocking, scalatest

全面披露：我对模拟和模拟框架非常陌生。我正在尝试使用 ScalaMock，因为它看起来像是与 ScalaTest 一起使用的“默认”模拟框架，但我很高兴使用与 ScalaTest 兼容的任何其他框架。

问题：我在 Scala 中编写了一个与套接字对话的类。该类有一个类型参数，说明它要与之交谈的套接字类型，其中一个参数是用于创建该类型套接字的工厂。它有签名：

```
class XScanner[T <: SocketClient](
  confPath: String = "/etc/default/configPath",
  socketClientFactory: String => T
) extends ScannerBase(path) 
```

我希望能够通过提供一个模拟 SocketClient 来为这个类编写单元测试，这样我的测试代码就不必连接到一个真正的套接字，但我不知道如何用 ScalaMock 做到这一点。

我的测试代码如下所示：

```
val t = new XScanner[SocketClient](confPath, (s: String) => mock[SocketClient]) 
```

显然这不会编译，因为`SocketClient`需要一个到套接字的路径作为参数，但我不能调用`mock[SocketClient(s)]`，因为那不是一个类型，我不能调用`mock[SocketClient](s)`，因为 mock 不接受传递给它的类型的参数作为它自己论据。

那么如何编写一个模拟`SocketClient`工厂来传递给我的扫描仪呢？我什至无法弄清楚如何模拟一个接受参数的类！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:59:32.300

洞察力是你需要模拟的是`socketClientFactory`. 然后将其设置为返回一个 mock `SocketClient`。

鉴于：

```
trait SocketClient {
  def frobnicate(): Unit
}

class ScannerBase(path: String)

class XScanner[T <: SocketClient](
  confPath: String = "/etc/default/configPath",
  socketClientFactory: String => T
) extends ScannerBase(confPath) {
  val socket = socketClientFactory("Some Socket Name")
  socket.frobnicate
} 
```

（旁注 - 您的默认值`confPath`永远不会被使用，因为没有默认值`socketClientFactory`）。

那么这应该让你开始（这是 Scala 2.9.x 和 ScalaMock2 - ScalaMock3 的 2.10.x 会略有不同，但差别不大）：

```
import org.scalatest.FunSuite
import org.scalamock.scalatest.MockFactory
import org.scalamock.generated.GeneratedMockFactory

class ScannerTest extends FunSuite with MockFactory with GeneratedMockFactory {

  test("scanner") {
    val mockFactory = mockFunction[String, SocketClient]
    val mockClient = mock[SocketClient]
    mockFactory.expects("Some Socket Name").returning(mockClient)
    mockClient.expects.frobnicate
    val scanner = new XScanner("path/to/config", mockFactory)
  }
} 
```

为了完整起见，这里是 Scala 2.10.0 和 ScalaMock3 中的相同测试：

```
import org.scalatest.FunSuite
import org.scalamock.scalatest.MockFactory

class ScannerTest extends FunSuite with MockFactory {

  test("scanner") {
    val mockFactory = mockFunction[String, SocketClient]
    val mockClient = mock[SocketClient]
    mockFactory.expects("Some Socket Name").returning(mockClient)
    (mockClient.frobnicate _).expects()
    val scanner = new XScanner("path/to/config", mockFactory)
  }
} 
```

# macos - mac如何将纯文本转换为html格式

> ID：14274021
> 
> 赞同：-1
> 
> 时间：2013-01-11T08:04:40.160
> 
> 标签：macos, cocoa

如何将文本字段/视图的纯文本转换为 html 格式。

例如：纯文本 -> 欢迎来到我的新页面。这是我的第二行。

HTML 文本：- 带有 html 标签的纯文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:09:42.143

将文本换成`<pre>`... `</pre>`。

# python - 在 DOS/PyDev 中评估 Python Popen.communicate 返回字符串

> ID：14274027
> 
> 赞同：0
> 
> 时间：2013-01-11T08:05:03.120
> 
> 标签：python, string, compare, popen

这个脚本应该是一个快速的 Clearcase 支持脚本，这是我第一次使用 Python，因为我决定转储 Perl。

调用 subprocess.Popen/communicate 以运行返回空字符串的 Clearcase 命令，但是我完全无法准确测试此返回值：

```
import subprocess
import sys

# cleartool descr -fmt "%Sn" foo.c
# returns the version number of the file if it's under CC control:
#        b'"\\main\\hb_clearcase\\oint_uas_umac_03\\25"'
# or nothing if it's hijacked.
std_out = subprocess.Popen(['c:/rational/clearcase/bin/cleartool', 'desc',
                 '-fmt', '"%Sn"', 'foo.c'], stdout=subprocess.PIPE).communicate()
std_out = std_out.decode("utf-8")

print(std_out)
# prints:  ""

# Here it goes wrong, I have tried many options in the if...  
# The file IS hijacked, the std_out string IS empty.
if std_out == "":
    print('File is hijacked')
else
    print('File is not hijacked') 
```

奇怪的是`if std_dev == ""`直接在 DOS 框中运行脚本或在 Eclipse 中的 PyDev 中运行脚本之间的比较行为的差异。他们似乎总是返回相反的结果。如上所述，这在 PyDev 上按预期工作（即被劫持），在命令提示符下失败。进行比较`if std_dev == '""'`，PyDev 提供预期的结果，但不是命令提示符。

这是 Win7 上最新的 Python 3.3，我预计几小时前就已经确定了这个脚本。

我到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:18:04.757

首先，坚持使用 Python 是不错的选择（请参阅[此](http://xkcd.com/353/)，尤其是当您将鼠标悬停在卡通上时的“Alt”文本）。

也许你可以尝试：

```
if std_out.strip("\"").strip() == "": 
```

这将使字符串像`'""'`并且`' ""'`都像“”。

无论如何，PyDev 给出不同的结果对我来说听起来很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:08:05.013

与这些事情一样，答案通常是“鱼”……为了完整起见，答案如下：

在 Windows 命令提示符下运行命令似乎只需给出命令的名称就足够了，但是如果在 Eclipse 中重复相同的运行，则必须给出扩展名。在我上面的例子中，我使用`'c:/rational/clearcase/bin/cleartool'`where 是完全正确的`'c:/rational/clearcase/bin/cleartool.exe'`，即。带扩展名。

Eclipse 有一个更像“UNIX”的环境，它对这些东西很挑剔。这意味着我的运行在 Eclipse 中失败，因为找不到该命令，生成的空字符串与我预期的相似，很难发现差异。

# visual-studio - VisualStudio F1 的附加 CHM？

> ID：14274032
> 
> 赞同：1
> 
> 时间：2013-01-11T08:05:23.263
> 
> 标签：visual-studio, chm

有没有办法在 VisualStudio (2010) 中包含其他帮助文件 (.chm)，以便当我按下`F1`(在一个函数上) 时，它会自动在正确的站点上打开新的帮助文件？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:48:20.667

这在 VS 2010 中是不可能的。仅在 VS 2002-2008 中是可能的（我们的产品[VSdocman](http://www.helixoft.com/vsdocman/overview.html)可以做到）。解释：

1.  **Html Help 1**格式( CHM) 用于 VS 6 及更早版本。
2.  VS 2002、2003、2005 和 2008 使用**MS Help 2**格式 (HxS)。但是也可以使用 CHM 来获得额外的自定义 F1 帮助。
3.  VS 2010 使用**MS Help Viewer 1**格式 (MSHC)，VS 2012 使用**MS Help Viewer 2**格式 (MSHC)。它们之间只有细微的差别，您可以认为它们是相同的（有些人将此格式称为 MS Help3）。无法以 MSHC 以外的格式包含其他帮助。

所以如果你想添加你自己的`F1`帮助，你需要创建一个 MSHC 文件。这并不难。它只是一个特殊格式的 HTML 文件列表，压缩成单个 MSHC 文件。有一些工具可以帮助您。例如我们的 VSdocman 或免费的 mshcMigrate.exe，它可以将您现有的 CHM 转换为 MSHC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T16:51:07.530

[有关mshcMigrate](http://mshcmigrate.helpmvp.com/home)的更多信息

从他们的网站复制：

> 输入
> 
> 将 HTML 帮助和 MS 帮助 2 迁移到帮助查看器格式。转换项目文件（.hxc、.hhp）和编译的帮助文件（.hxs、.chm），以及帮助源文件夹。
> 
> 输出
> 
> 输出包括 .mshc 和 .cab 帮助包文件以及 .msha 清单文件。
> 
> 其他特性
> 
> 该应用程序包括几个额外的工具，允许您测试、安装/卸载、查看 HelpLibManager 输出日志、执行 API 调用以及探索帮助库数据存储。该实用程序还可以在批处理模式下运行，以进行夜间构建和命令行操作

# ios - 带有查询参数的 RestKit postObject

> ID：14274033
> 
> 赞同：4
> 
> 时间：2013-01-11T08:05:24.040
> 
> 标签：ios, restkit

我正在使用 RestKit，我正在尝试发布一个带有查询参数的对象（一个 auth 形式的令牌`token=<token>`），但我不知道如何让它工作。这就是我正在做的...

首先，我将请求对象映射添加到管理器：

```
RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
    [requestMapping addAttributeMappingsFromDictionary:@{
     @"id" : @"id",
     @"name"   : @"name",
     @"latitude" : @"latitude",
     @"longitude" : @"longitude"
     }];

    RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:requestMapping objectClass:[Location class] rootKeyPath:nil];

    [manager addRequestDescriptor:requestDescriptor]; 
```

然后我提出请求：

```
RKManagedObjectRequestOperation *operation = [RKObjectManager.sharedManager  appropriateObjectRequestOperationWithObject:self method:RKRequestMethodPOST path:@"/api/v1/users/3/locations" parameters:@{@"token" : token}];

[operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    Location * location = (Location*)mappingResult;
    self.id = Location.id;
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    ALog(@"fail!");
    }];

[RKObjectManager.sharedManager enqueueObjectRequestOperation:operation]; 
```

发出请求时，Location 对象被序列化为 JSON 并放入请求正文中就可以了。但是，不是将令牌添加到查询字符串中，而是将其作为 JSON 添加到请求正文中。

例子：

```
request.body={"id":0,name="test","longitude":-0.1337,"latitude":51.50998,"token":"Z3JlZ2c6MTM2MDU2OTk2MDY2OTpMajkxd01acWxjcGg1dEpFVy9IaEcwNTcyMWJkSEpnTFRTQTI2eXNlN29VOVRTc1UwV1lEU0E9PQ=="} 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-04T18:04:05.867

[在https://gist.github.com/onelittlefish/5970616](https://gist.github.com/onelittlefish/5970616)有一个 Gist，它提供了一个很好的扩展`RKObjectManager`，允许您将查询参数添加到 PUT 或 POST 请求。

只需将这些文件放入您的项目中，导入标头，您就可以使用类似于@giuseppe 的答案（它将参数添加到正文，而不是路径）。唯一的区别是更改`parameters`为`queryParameters`- 您的调用可能如下所示：

```
[objectManager postObject:self
                     path:@"/api/v1/users/3/locations"
          queryParameters:queryParams
                  success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {

                  Location * location = (Location*)mappingResult;
                  self.id = Location.id;

              }
              failure:^(RKObjectRequestOperation *operation, NSError *error) {

                  ALog(@"fail!");

              }
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:00:25.207

在我的实现中，我在 URL 本身中添加了查询参数：

```
RKManagedObjectRequestOperation *operation = [RKObjectManager.sharedManager  appropriateObjectRequestOperationWithObject:self method:RKRequestMethodPOST path:[NSString stringWithFormat:@"/api/v1/users/3/locations?token=%@",token] parameters:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-08T09:08:51.317

就像阅读网络上提供的许多教程一样简单。然而：

```
NSDictionary *queryParams;
    queryParams = [NSDictionary dictionaryWithObjectsAndKeys:
                   token, @"token",nil];

RKResponseDescriptor *tokenResponseDescriptor =
[RKResponseDescriptor responseDescriptorWithMapping:loginMapping
                                        pathPattern:nil
                                            keyPath:@"yourpathtoyoyrkey"
                                        statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

[objectManager addResponseDescriptor:tokenResponseDescriptor];
objectManager.requestSerializationMIMEType = RKMIMETypeJSON;

    [objectManager postObject:loginMapping
                     path:@"yourmethod.json"
               parameters:queryParams
                  success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {

                  }
                  failure:^(RKObjectRequestOperation *operation, NSError *error) {

                      //NSLog(@"Error WS RK:%@",error.localizedDescription);

                  }
 ]; 
```

# javascript - 在 html 中清除按键列表

> ID：14274034
> 
> 赞同：0
> 
> 时间：2013-01-11T08:05:31.310
> 
> 标签：javascript, html, css

我正在使用 html 进行实时搜索，
我工作得很好，但我遇到了一个小问题，这是我的索引代码：

```
<form id="quick-search" action="livesearch.php" method="GET" >
<p>
Search:
<input id="qsearch" type="text" name="qsearch" onkeyup="liveSearch()" />
<input type="submit" />
</p>
<div id="searchResults">

</div>
</form> 
```

这是我的js代码：

```
function liveSearch()
{
    var url = "livesearch.php";
    var s = document.getElementById('qsearch').value;
    http.open("POST", "livesearch.php?qsearch="+s, true);
    http.onreadystatechange = function() 
    {
        if(http.readyState == 4 && http.status == 200) 
        {
            document.getElementById('searchResults').innerHTML = 'Suggestions are as follow'+http.responseText; 
            //alert(http.responseText);
        } 
    }

    http.send();
} 
```

我得到了正确的结果，但是当我清空完整的输入框时，我会从数据库中获取完整的列表框，在清空输入框时，我想清除列表框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:22:55.297

您应该在 PHP 和用户端保护您的代码。为此，请检查用户发送了多少封信：`if(s.length < 2 )`return; 防止 AJAX 请求

```
function liveSearch()
    {
    var url = "livesearch.php";
    var s = document.getElementById('qsearch').value;
    if(s.length < 2) return; // here You escape if there isn't enough letters to search
    http.open("POST", "livesearch.php?qsearch="+s, true);
    http.onreadystatechange = function() 
    {
        if(http.readyState == 4 && http.status == 200) 
        {
            document.getElementById('searchResults').innerHTML = 'Suggestions are as follow'+http.responseText; 
            //alert(http.responseText);
        } 
    }

    http.send();
} 
```

但请记住也要在 PHP 上保护它：

```
if(count($_REQUEST['qsearch']) < 2) return false; 
```

# iphone - 从另一个对象中获取具有属性的整个对象

> ID：14274039
> 
> 赞同：0
> 
> 时间：2013-01-11T08:05:48.080
> 
> 标签：iphone, ios, objective-c, core-data, nsfetchrequest

我想获取一个对象 Person，但在这个 person 对象中我有一个不同的 ID。这是我的数据库的屏幕截图。如您所见，我有一个公司 ID、部门 ID 和职能 ID。现在我想获取那个人对象，但我想要的是他们的名字，而不是公司、部门和功能 ID。

我应该为每个对象提出一个单独的请求吗？或者这可以通过其他方式完成吗？ ![在此处输入图像描述](../Images/ef726d819e164d72f05404d7b5035caf.png)

**编辑**

好吧，我现在正在这样取货。

```
NSFetchRequest *fetchPerson = [NSFetchRequest fetchRequestWithEntityName:@"Data"];
    NSSortDescriptor *descriptorPerson = [NSSortDescriptor sortDescriptorWithKey:@"text" ascending:NO];
    fetchPerson.sortDescriptors = @[descriptorPerson];

    NSArray *matches = [[RKManagedObjectStore defaultStore].mainQueueManagedObjectContext executeFetchRequest:fetchPerson error:nil];
   Data *data= [matches objectAtIndex:0];
    person = data.person;
    Company *company = data.company;
    Department *department = data.department;
    Function *function = data.function; 
```

这只是获取 Data-object 内部的数据，但 person、compayn、department、function 对象是空的。

当我对 Person 实体执行 fetchrequest 时。我只从 person 对象中得到了数据。

# javascript - 如何使用 JavaScript 导航到页面*而不*破坏“在新选项卡中打开”

> ID：14274046
> 
> 赞同：3
> 
> 时间：2013-01-11T08:07:07.487
> 
> 标签：javascript

我正在使用 JavaScript 允许我网站的用户单击表格行上的任意位置以访问该行记录的 URL。设置`location.href`工作正常，除了当我的用户尝试在当前选项卡后面的新选项卡中打开页面时，JavaScript 会破坏其浏览器的正常`Shift+Click`行为。如何在没有这种讨厌的副作用的情况下使用 JavaScript 更改页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:20:38.117

这是一种浏览器行为，您无法以任何方式复制它。许多变通方法可能是检测 Shift 按键并执行 window.open，或插入一个`<a/>`围绕所有单元格内容的元素，并动态更改 mousedonw 上的 href，但所有这些都是丑陋的补丁。这是您面临的许多情况之一，javascript 几乎可以做任何事情来操作 DOM，但不能做与 DOM 交互时通常触发的浏览器操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:11:55.120

我认为您只能说使用**目标**属性使其成为新实例，但是新实例是新的浏览器窗口还是只是一个选项卡完全取决于浏览器，如果它是一个选项卡，它仍然取决于浏览器应该它是一个背景选项卡或激活它/将它带到前面。我记得某些浏览器/浏览器插件甚至具有让您更改行为的设置。

# ios - 当我想将新文件提交到 git 时如何使用 libgit2 获取 SHA 值

> ID：14274048
> 
> 赞同：0
> 
> 时间：2013-01-11T08:07:15.353
> 
> 标签：ios, sha, libgit2

当我想向 git 提交新文件时如何使用 libgit2 获取 SHA 值 shell 中的命令是：

```
git add
git commit
git pull
git push 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:28:11.780

以下**libgit2**测试应该可以帮助您入门：

*   **[commitstagedfile.c](https://github.com/libgit2/libgit2/blob/development/tests-clar/object/commit/commitstagedfile.c)**：如何将`git add`文件放到暂存区，然后执行 a`git commit`并检索已创建提交的 sha。

*   **[fetch.c](https://github.com/libgit2/libgit2/blob/development/tests-clar/online/fetch.c)**：如何`git fetch`使用上游更改更新本地存储库的内容

*   **[push.c](https://github.com/libgit2/libgit2/blob/development/tests-clar/online/push.c)**：如何将本地更改提交到上游存储库，类似于`git push`

**注：** `git pull`是`git fetch`和的组合`git merge`。libgit2 中尚不提供合并功能。

# r - 如何在Rcpp中使用xts包的C api

> ID：14274055
> 
> 赞同：5
> 
> 时间：2013-01-11T08:07:59.580
> 
> 标签：r, xts, rcpp

xts-0.9-1 包提供的 xts_API for C 不能直接在 C++ 中使用。

例如，如果一个人写

```
#include <Rcpp.h>
extern "C" {
#include <xts.h>
}

using namespace Rcpp;

RcppExport SEXP get_xts_index(SEXP x, SEXP value) {
  BEGIN_RCPP

  return SET_xtsIndexClass(x, value);

  END_RCPP
} 
```

会出现以下编译时错误：

*   `error: expected identifier before ‘)’ token`
*   `error: ‘install’ was not declared in this scope`
*   `error: ‘getAttrib’ was not declared in this scope`
*   `error: ‘setAttrib’ was not declared in this scope`
*   `error: ‘xts_IndexvalueSymbol’ was not declared in this scope`

如何为 C 调用 xts_API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:32:52.737

你有什么版本的xts？以下对我有用：

```
library(xts)
library(inline)

inc <- '
extern "C" {
#define class xts_class
#include <xts.h>
#undef class
}

inline SEXP install(const char* x) {
  return Rf_install(x);
}

inline SEXP getAttrib(SEXP a, SEXP b) {
  return Rf_getAttrib(a, b);
}

inline SEXP setAttrib(SEXP a, SEXP b, SEXP c) {
  return Rf_setAttrib(a, b, c);
}

#include <Rcpp.h>
'

src <- '
   return GET_xtsIndexClass(x);
'

Sys.setenv("PKG_CXXFLAGS"="-I/usr/local/lib/R/site-library/xts/include")
xtsfun <- cxxfunction(signature(x="ANY"), body=src, inc=inc, plugin="Rcpp") 
```

我可以运行：

```
R> xtsfun <- cxxfunction(signature(x="ANY"), body=src, inc=inc, plugin="Rcpp")
R> foo <- xts(1:5, order.by=Sys.time()+0:4)
R> xtsfun(foo)
[1] "POSIXct" "POSIXt" 
R> 
```

包含标志设置需要通用化，但如果您来到 rcpp-devel 列表，我们可以进行这项工作。

*编辑：*我开始尝试一个附加包，它与 xts 的（目前比较有限的）API 接口；请参阅 R-Forge 上的 Rcpp SVN 存储库。我还向 Rcpp Gallery 添加了一个新答案，该答案[展示了如何](http://gallery.rcpp.org/articles/getting-attributes-for-xts-example/)从 C++ 代码访问 xts 组件。有更好的方法来获取属性（使用 Rcpp API）然后在这里使用（基于 R 的 C API）。

*编辑 2：*现在有一个新的包[RcppXts](http://cran.r-project.org/package=RcppXts)可以帮助解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:07:59.580

以下指南适用于 R 包开发。

关键是添加必要的内联函数和宏以使 xts_API 与 C++ 兼容。

```
extern "C" {
#define class xts_class
#include <xts.h>
#undef class
}

inline SEXP install(const char* x) {
  return Rf_install(x);
}

inline SEXP getAttrib(SEXP a, SEXP b) {
  return Rf_getAttrib(a, b);
}

inline SEXP setAttrib(SEXP a, SEXP b, SEXP c) {
  return Rf_setAttrib(a, b, c);
}

#include <Rcpp.h>

RcppExport SEXP get_xts_index(SEXP x, SEXP value) {
  BEGIN_RCPP

  return GET_xtsIndexClass(x);

  END_RCPP
} 
```

上面的代码应该适用于几乎所有的 xts_API，除了`SET_xtsIndexClass`.

编译器仍会报告`error: ‘xts_IndexvalueSymbol’ was not declared in this scope`.

这是我的解决方案，但我不知道它是否正确。

开放`<xts package root>/include/xts.h`和改变

```
#define  SET_xtsIndexClass(x,value)     setAttrib(x, xts_IndexvalueSymbol, value) 
```

到

```
#define  SET_xtsIndexClass(x,value)     setAttrib(x, xts_IndexClassSymbol, value) 
```

我想这是一个错字。

# php - CakePHP 自定义登录（无 DB）

> ID：14274058
> 
> 赞同：0
> 
> 时间：2013-01-11T08:08:10.480
> 
> 标签：php, forms, cakephp

我为管理员登录制作了一个表单，位于`login.ctp`：

```
echo $this->Form->create('Admin', array('action' => __('login'))); 
echo $this->Form->input('username',array('label' => __('Uporabniško ime',true)));
echo $this->Form->input('password',array('label' => __('Geslo',true)));
echo $this->Form->submit('Login');
echo $this->Form->end(); 
```

我也有管理员登录时将显示的内容。当用户按下*登录*`index.ctp`按钮时，我想做的是手动尝试验证用户（现在通过与字符串进行比较）。我在 AdminController.php 中创建了一个登录功能 - 但是，当我单击表单上的登录按钮时，我被重定向到 /admins/login 而不是 /admin/login，这会产生错误 *AdminsController could not be found。*为什么我会被重定向到错误的页面？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:16:51.543

试试这个：

```
<?php
 echo $this->Form->create('Admin',array('url'=>array('controller' => 'Admin', 'action' =>  "login")));
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-28T20:16:26.220

如果您只想快速登录单个帐户，我为这种情况创建了一个简单的插件。您只需几分钟即可启动并运行！

[https://github.com/CanesCZ/SimpleAuth](https://github.com/CanesCZ/SimpleAuth)

通常一个站点管理员就足够了。如果您有任何问题，请告诉我！**

# css - Bootstrap dropdownlist z-index displaying under modal window footer

> ID：14274060
> 
> 赞同：6
> 
> 时间：2013-01-11T08:08:18.987
> 
> 标签：css, twitter-bootstrap

I am having some styling problems with bootstrap.

I have a small modal window containing a dropdown. However I can't seem to get the dropdown to display over the footer of the window.

I have played with the zindex of the dropdown ensuring it was higher than the windows but no luck.

Can anyone suggest what I should be changing?

The html

```
<div class="modal hide fade" id="store-modal">
<div class="modal-header">
    <h3 id="reward-title">Select Store</h3>
</div>
<div class="modal-body">
    <p>
        Please select the store you are working from
            <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">Select<span class="caret"></span></a>
                <ul class="dropdown-menu">
                    @foreach (var model in Model)
                    {
                        <li>
                            <a href="#" class="store" data-id="@Html.DisplayFor(modelItem => model.StoreId)">@Html.DisplayFor(modelItem => model.StoreName)</a>
                        </li>
                    }
                </ul>
            </div>

    </p>
</div>
<div class="modal-footer">
</div> 
```

![enter image description here](../Images/94a2c0a529a8a6a12a87dfb2e0a88655.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-14T16:04:39.110

您只需添加一个`z-index`具有高于模型框页脚的属性的类。

要使 z-index 起作用，您还必须设置 position = relative、absolute 或 fixed。也将 z-index 设置为 5000 可能会有所帮助。（模态的 z 指数可能高于 2000 年的。

所以在你的CSS中我会添加这个：

```
.class-of-dropdown {
    position: relative;
    z-index: 5000;
} 
```

.modal-body 类有一个 overflow-y: auto 属性。您可能需要将其更改为：

```
.modal-body {
    overflow-y:visible;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T08:14:51.560

如果您设置下拉列表的 z-index，请确保它已定位。这意味着它具有位置：绝对、位置：相对或位置：固定。

# c# - Model showing null

> ID：14274061
> 
> 赞同：1
> 
> 时间：2013-01-11T08:08:21.200
> 
> 标签：c#, asp.net, asp.net-mvc-3, model, nunit

I am writting unit test cases. I am using nunit and rhino mock.

Method which is i am testing is

```
 public ActionResult Details()
    {
        EmployeeDTO employee = this.EmployeeService.GetLoggedInEmployee();
        EmployeeModel model = assembler.ToEmployeeModel(employee);
        model.Title = GetEmployeeNameTitle(employee);
        model.Controller = "LoanOfficer";
        model.SelectedTab = MainNavTabs.LoanOfficerDetails;
        return View(model);
    } 
```

And test case written is

```
 [Test]
    public void TestDetails()
    {
        EmployeeDTO employee = new EmployeeDTO();
        EmployeeService.Stub(a => a.GetLoggedInEmployee()).Return(employee);
        EmployeeModel model = new EmployeeModel{ Title = UtilityTests.Title, };
        assembler.Stub(b => b.ToEmployeeModel(employee)).Return(model);
        controller.Details();
        // Assert
    } 
```

I have done

```
 private ILoanModelAssembler loanAssembler;
    loanAssembler = TestUtility.DynamicMock<ILoanModelAssembler>(); 
```

but still here model is null ? Is there is any way to correct it in test method?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:22:30.200

它是空的，因为您没有从测试中控制 EmployeeService 的实际实例。您的 EmployeeService 依赖项是如何添加到控制器中的？是接口吗？您需要它是一个接口，以便 Rhino Mocks 可以模拟它，并且您需要将它注入到控制器的构造函数中，以便您可以将模拟的实例注入到您的测试中。像这样的东西：

```
private IEmployeeService employeeService;

public EmployeeController(IEmployeeService employeeService)
{
    this.employeeService = employeeService;
} 
```

然后在你的测试中你可以说：

```
var employeeServiceStub = MockRepository.GenerateStub<IEmployeeService>();
var employee = new EmployeeDTO();
employeeServiceStub.Stub(a => a.GetLoggedInEmployee()).Return(employee); 
```

# jquery - 使用复选框禁用 JQuery UI 微调器

> ID：14274064
> 
> 赞同：2
> 
> 时间：2013-01-11T08:08:36.557
> 
> 标签：jquery, jquery-ui, jquery-ui-spinner

我正在使用：[http](http://api.jqueryui.com/spinner) ://api.jqueryui.com/spinner我该如何设置它，以便如果输入有 attr=disabled 它将禁用微调器？

```
<input type="checkbox" />
<input type="text" class="spinner" />

if($checkbox.attr("checked")){
   $input.removeAttr('disabled').spinner();
} else {
   $input.attr('disabled', true).spinner("option", "disabled", true);
} 
```

此代码给我错误：在初始化之前无法调用微调器上的方法；试图调用方法“选项”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-15T19:53:23.783

jQuery UI 微调器默认[启用](http://api.jqueryui.com/spinner/#method-enable)/[禁用](http://api.jqueryui.com/spinner/#method-disable)方法，最好利用这些方法。此外，如果您想默认禁用微调器，只需将其输入设置为`disabled="disabled"`然后馈送`this.disabled`到微调器构造函数。`this.disabled`如果您使用这种方法，每次都向微调器构造函数提供数据是安全的，因为`this.disabled`=== `true`if`disabled="disabled"`和`this.disabled`=== `false`if`disabled`属性不存在。

[http://jsfiddle.net/A3SL4/](http://jsfiddle.net/A3SL4/)

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css"/>
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    </head>
    <body>
        <p>
            <label for="spinner1">Default Enabled Spinner</label>
            <input class="spinner" id="spinner1"/>
            <input checked="checked" onchange="enableSpinner('spinner1', this.checked);" type="checkbox"/>
        </p>
        <p>
            <label for="spinner2">Default Disabled Spinner</label>
            <input class="spinner" disabled="disabled" id="spinner2"/>
            <input onchange="enableSpinner('spinner2', this.checked);" type="checkbox"/>
        </p>
        <script type="text/javascript">
            $(".spinner").each(function() {
                $(this).spinner({
                    disabled: this.disabled
                });
            });

            function enableSpinner(spinnerId, enable) {
                var spinner = $("#" + spinnerId);
                if (enable) {
                    spinner.spinner("enable");
                } else {
                    spinner.spinner("disable");
                }
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T08:19:46.533

您正在尝试在未创建微调器小部件时设置它的选项。相反，您可以使用构造函数选项调用您的微调器`disable`：

```
if($checkbox.attr("checked")){
   $input.removeAttr('disabled').spinner();
} else {
   $input.attr('disabled', true).spinner({
      disabled: true
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T08:45:16.740

试试这个：http: [//jsbin.com/ojiwas/1/edit](http://jsbin.com/ojiwas/1/edit)

```
$( ".spinner" ).prop('disabled',true);
  $(':checkbox').change(function(){
    if($(':checked').length>0){
      $( ".spinner" ).spinner();
    }else{
      $( ".spinner" ).spinner("destroy").prop('disabled',true);
    }
}); 
```

# html - html中按钮的点击行为

> ID：14274065
> 
> 赞同：-1
> 
> 时间：2013-01-11T08:08:40.613
> 
> 标签：html

我有一个有 5 个按钮的 CSS 脚本。

单击第一个按钮应在同一页面上的固定区域显示文本（可能通过使用框架或编写隐藏函数然后执行`show()`）。

如果单击第二个按钮，则其他一些文本应出现在较早的区域中。其他按钮也是如此。这样做最有效的方法是什么？（实现页面的最快加载）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:11:04.110

我猜这个？

```
<iframe name="content"></iframe>
<a href="page1.html" target="content">Button 1</a>
<a href="page2.html" target="content">Button 2</a>
And so on... 
```

然后添加一些 CSS 使它们看起来像按钮（边框、背景等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:21:22.107

试试这个：

HTML

```
<div id="textcontainer"></div>
<button id="button1" onclick="setText(0);">Button 1</button>
<button id="button2" onclick="setText(1);">Button 2</button>
<button id="button3" onclick="setText(2);">Button 3</button>
<button id="button4" onclick="setText(3);">Button 4</button>
<button id="button5" onclick="setText(4);">Button 5</button> 
```

Javascript：

```
var text = [
  'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.',
  'Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.',
  'Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.',
  'Aenean nec lorem. In porttitor. Donec laoreet nonummy augue.',
  'Suspendisse dui purus, scelerisque at, vulputate vitae, pretium mattis, nunc. Mauris eget neque at sem venenatis eleifend. Ut nonummy.'
  ];

function setText(index){
   var box = document.getElementById('textcontainer'); 
  box.innerHTML = text[index];
} 
```

您可以在以下位置看到这一点：http: [//jsfiddle.net/Wnw7X/](http://jsfiddle.net/Wnw7X/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:38:13.290

好的，这是一个完整的演示 - 复制所有代码并粘贴您的编辑器。并运行。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">

window.onload = function() {

var myArray = ['you click the first button', 'you click the second button', 'you click the third button', 'you click the fourth button', 'you click the fifth button'];

var one = document.getElementById('buttonOne');
var two = document.getElementById('buttonTwo');
var three = document.getElementById('buttonThree');
var four = document.getElementById('buttonFour');
var five = document.getElementById('buttonFive');

one.onclick = clickHandler;
two.onclick = clickHandler;
three.onclick = clickHandler;
four.onclick = clickHandler;
five.onclick = clickHandler;

function clickHandler(evt) {
    //console.log(evt.target.id);
    var header = document.getElementsByTagName('h1')[0];
    if(evt.target.id === 'buttonOne') {
        header.innerHTML = myArray[0];
                console.log(myArray[0]);
        console.log('click');
    }
    else if (evt.target.id === 'buttonTwo') {
        header.innerHTML = myArray[1];
    }
    else if (evt.target.id === 'buttonThree') {
        header.innerHTML = myArray[2];
    }
    else if (evt.target.id === 'buttonFour') {
        header.innerHTML = myArray[3];
    }
    else if (evt.target.id === 'buttonFive') {
        header.innerHTML = myArray[4];
    }
}

}
</script>
</head>

<body>
<button id="buttonOne">One</button>
<button id="buttonTwo">Two</button>
<button id="buttonThree">Three</button>
<button id="buttonFour">Four</button>
<button id="buttonFive">Five</button>
<h1> </h1>
</body>
</html> 
```

# php - Hamachi client status on webpage

> ID：14274068
> 
> 赞同：0
> 
> 时间：2013-01-11T08:08:50.283
> 
> 标签：php, ajax, html, web-applications, hamachi

Is there a way to get hamachi connection statuses on a webpage? I found this link:

*   [http://my.hamachi.cc/status/text.php?5.x.x.x](http://my.hamachi.cc/status/text.php?5.x.x.x)

This should give a text-based status of the client with the given ip.

But it does not work. I get redirected.

I would like a status I can show using ajax, php and/or html5\. No third party applications like flash or java.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:45:11.097

这是使用 jQuery 的客户端解决方案：

```
$.get("http://my.hamachi.cc/status/text.php?5.x.x.x", function(data) {
 $('resultDiv').append( data ); 
}); 
```

# visual-studio-2010 - VS is drunk, it compiles my project correctly, but I still have some unresolved symbols

> ID：14274069
> 
> 赞同：1
> 
> 时间：2013-01-11T08:08:50.510
> 
> 标签：visual-studio-2010, visual-studio-2012

I think my VS is drunk (2010 & 2012).

**The symptoms**

I open a particular project and I see some unresolved symbols. However, when I compile the project it builds succesfull and I can run it. in 2010 I can click on the unresolved symbols and it brings me to their declaration and implementation pages. (not in 2012) My intellisence also doesn't work on the symbols that are unresolved, it does work for all the rest.

I tried restarting VS, but to no avail.

I don't think adding more references is the answer, since the projects compiles and runs ok.

**Extra info:** I use Rescharper

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:19:17.487

我也时不时出现这个问题

你在使用 resharper 吗？

=> 删除 '_ReSharper.[ProjectName]' 文件并重新启动 VisualStudio

# javascript - 带小数位的数字的正则表达式

> ID：14274073
> 
> 赞同：0
> 
> 时间：2013-01-11T08:08:58.690
> 
> 标签：javascript, regex

任何人都可以帮助我构建 javscript 正则表达式来验证 6 位数字和 2 个小数位吗？这些例子应该通过测试

```
0,  0.0,  0.33,  1, 11,  111, 1111, 11111,  111111
1.33, 1.3, 12.33, 12.3, 123.0, 123.33, 1234.0, 1234.11 
```

试过这个：

```
/^\d{1,4}(\.\d{1,2})?$/ 
```

但是当按下 .(dot) 时它在 jquery 中失败

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:15:16.613

尝试正则表达式：`/^\d{1,6}(\.\d{1,2})?$/`。注意：您需要转义点。

如果您需要的是总位数（包括小数点后的位数）最多为 6，那么正则表达式将是：`/^(?!.{8,})\d{1,6}(\.\d{1,2})?$/`. 该表达式添加了一个*负前瞻* `?!.{8,}`，它将排除那些长度大于 7 的数字。

更新：正如@Christoph 指出的那样，应该排除“01.23”，那么上面的两个表达式应该分别是`/^([1-9]\d{0,5}|0)(\.\d{1,2})?$/`和`/^(?!.{8,})([1-9]\d{0,5}|0)(\.\d{1,2})?$/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:54:26.220

当您按点时，它后面还没有数字，并且您的正则表达式失败。所以你可以试试这个正则表达式`/^\d{1,6}(\.\d{0,2})?$/`来允许这种情况，但要注意用户可以输入这样的数字`12345.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:15:46.503

DOT 是一个特殊字符，需要转义。您应该使用“\”。

最简单的方法是首先使用适当的 jquery 函数检查字符串的长度是否小于 7（6 位和 1 个点）。这涉及长度。

然后对于正则表达式，您只需要检查它是否最多有 2 个小数位，您可以这样做：`/^\d{1,6}(\.\d{1,2})?$/`

[http://www.regular-expressions.info/dot.html](http://www.regular-expressions.info/dot.html)

# .net - 为什么我不能有自动实现的只读属性

> ID：14274075
> 
> 赞同：4
> 
> 时间：2013-01-11T08:09:08.600
> 
> 标签：.net, vb.net

这是允许的：

```
Public Property Text() As String 
```

而对于只读属性，为什么不允许我使用等价属性？

```
Public ReadOnly Property Text() As String 
```

我似乎被迫使用：

```
Public ReadOnly Property Text() As String
    Get
        Return fText
    End Get
End Property 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-02T14:55:01.750

它现在在 VB14（Visual Studio 2015 及更高版本）中受支持。可以使用初始化表达式来初始化自动实现的属性：

```
Public ReadOnly Property Text1 As String = "SomeText"
Public ReadOnly Property Text2 As String = InitializeMyText() 
```

或在构造函数中：

```
Public ReadOnly Property Text As String

Public Sub New(text As String)
    Me.Text = text
End Sub 
```

细节：

*   [自动实现的属性（Visual Basic）](https://msdn.microsoft.com/en-us/library/dd293589.aspx)：

# iphone - 在分段的 tableView 中加载每个数组项

> ID：14274082
> 
> 赞同：0
> 
> 时间：2013-01-11T08:10:33.883
> 
> 标签：iphone, xcode, nsmutablearray

我有 NSMutablearray，其中我有动态数量的对象。我必须将它们加载到带有部分的分段 tableView 中。但是在尝试将每个对象分配给一个部分时出现错误。

```
sections=[[NSMutableArray alloc] init];
    for(int s=0;s<[finalarray count];s++)
    {
        NSMutableArray *section=[[NSMutableArray alloc] init];

        tableViewarray=[[NSMutableArray alloc]init];
       tableViewarray = [finalarray objectAtIndex:s];

        for(int i=0;i<[tableViewarray count];i++)
        {
            Item *item=[[Item alloc] init];
            NSString *eventName=[[tableViewarray objectAtIndex:i]objectForKey:@"Date"];//but getting error at this line

            item.TimeStart=eventName;
            [section addObject:item];

        }
        [sections addObject:section];

    } 
```

最终数组：

```
(
{
Date="Jan 11";
},
{
Date="Jan 12";
},

(
{
Date="Jan 11";
},
{
Date="Jan 12";
}
Date="Jan 13";
}
)
) 
```

在这里我必须加载两个部分：但是出现错误：'NSInvalidArgumentException'，原因：'-[__NSCFConstantString count]: unrecognized selector sent to instance。

如何添加每个对象并加载那么多部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:23:46.590

试试这个：

```
NSString *eventName=[[[tableViewarray objectAtIndex:s] objectAtIndex:i] objectForKey:@"Date"]; 
```

# android - PhoneGap 的 Media 类是否支持 3gpp？

> ID：14274084
> 
> 赞同：0
> 
> 时间：2013-01-11T08:10:47.263
> 
> 标签：android, cordova, audio

我`navigator.device.capture.captureAudio`用来录制声音并获取文件路径。但是，当我尝试通过 Media.play() 播放它时，它会跳过整个块。这是我的代码片段以获取更多信息。

```
 navigator.device.capture.captureAudio(function(mediaFile){

                var checkerVar = "original value";

                var fullPath = mediaFile[0].fullPath;
                var mediaTest = new Media(fullPath, function(){
                    checkerVar = "new success value";
                    alert("Media loaded. Playing now.");
                    mediaTest.play();
                }, function(){
                    checkerVar = "new error value";
                    alert("Error with playback.");
                });

                alert(checkerVar);

            }, function(error){
                alert("Error:\n\n"+error);
            }, {limit: 1}); 
```

使用上面的代码，我仍然得到“原始值”作为提示，而不是“新的成功值”或“新的错误值”，这让我相信它跳过了整个`mediaTest`. 我已经尝试获取 的值，`fullPath`它确实显示了新录制的 *.3gpp 声音文件的路径。这让我怀疑它是否支持 3gpp？

如果它不支持 3gpp，我有什么选择？

**编辑：**所以它支持 3gpp。知道为什么它会跳过整个`var mediaTest`代码块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:18:48.837

检查支持的格式..

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

[http://docs.phonegap.com/en/1.0.0/phonegap_media_capture_capture.md.html#MediaFile.getFormatData](http://docs.phonegap.com/en/1.0.0/phonegap_media_capture_capture.md.html#MediaFile.getFormatData)

是的，它也支持 3gp

# wordpress - wordpress - 将多个选择值作为自定义元框的数组发布

> ID：14274085
> 
> 赞同：0
> 
> 时间：2013-01-11T08:10:48.947
> 
> 标签：wordpress

我正在使用 wordpress 3.5。我创建了一个自定义帖子类型和一个自定义元框，我在其中使用了 html 多选菜单

```
<select data-placeholder="Choose available colors..." class="chosen_multi" name="available_colors[]" id="available_colors" multiple="multiple">
....
....
</select> 
```

我使用下面的代码来保存选择值

```
update_post_meta($id, 'available_colors', strip_tags($_POST['available_colors'])); 
```

但我知道它不会将多值作为数组存储在数据库中。

我如何存储数组（available_colors []）`update_post_meta`，不想使用**php implode explode**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:23:30.990

如果您使用 update_post_meta 存储数组，get_post_meta 将返回一个数组。就是这么简单。

但是，如果`$_POST['available_colors']`是一个数组，则不能在其上使用 strip_tags。相反，您必须在每个元素上使用 strip_tags：

```
update_post_meta($id, 'available_colors', array_map( 'strip_tags', $_POST['available_colors'] ) ); 
```

# delphi - Delphi中不兼容的char和widechar

> ID：14274089
> 
> 赞同：2
> 
> 时间：2013-01-11T08:11:05.123
> 
> 标签：delphi, char, delphi-2007, widechar

我有一个奇怪的问题。

我正在使用 Delphi 2007 并使用`-r`开关运行它。在我的电脑上一切正常。当我将代码传输到另一台计算机时，出现错误：

> 不兼容的类型 char 和 widechar。

也许我应该改变一些选项。

产生问题的函数：

```
function THcp.ConVertString(s: string): string;
Var i:integer;
    lstr:string;
begin
     lstr:=EmptyStr;
     for i := 1 to Length(s) do
     begin
           case s[i] of
             'Č': s[i]:='C';
             'č': s[i]:='c';
             'Ć': s[i]:='C';
             'ć': s[i]:='c';
             'Š': s[i]:='S';
             'š': s[i]:='s';
             'Đ': s[i]:='D';
             'đ': s[i]:='d';
             'Ž': s[i]:='Z';
             'ž': s[i]:='z';
           end;
           lstr:=lstr+s[i];
     end;
     Result:=lstr;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:51:54.777

这是我的假设。在编译代码的机器上，代码中的非 ASCII 字符对于该机器的区域设置都是有效的 ANSI 字符。但是另一台机器使用不同的语言环境，其中一些字符不包含在代码页的 >= 128 部分中。因此，这些字符被提升为`WideChar`，因此当然与 . 不兼容`AnsiChar`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:34:31.603

这样做的原因很可能是[大卫建议](https://stackoverflow.com/a/14276574/757830)的原因。

如果你这样声明函数：

```
function THcp.ConVertString(s: AnisString): AnsiString; 
```

那么这个原因仅适用于代码中的字符常量，而不适用于输入。通过使用字符顺序来消除这些常量，就像我曾经在[这些例程](http://www.nldelphi.com/Forum/showthread.php?p=295849#post295849)中所做的那样，然后我想这将编译。

```
function AsciiExtToBase(Index: Byte): Byte; overload;
const
  Convert: array[128..255] of Byte = (
  //128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146
  //  €       ‚   ƒ   „   …   †   ‡   ˆ   ‰   Š   ‹   Œ       Ž           ‘   ’
  //  E       ,   f   "               ^       S   <           Z           '   '
     69,129, 44,102, 34,133,134,135, 94,137, 83, 60,140,141, 90,143,144, 41, 41,
  //147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165
  //  “   ”   •   –   —   ˜   ™   š   ›   œ       ž   Ÿ       ¡   ¢   £   ¤   ¥
  //  "   "       -       ~       s   >           z   Y       !
     34, 34,149, 45,151,126,153,115, 62,156,157,122, 89,160, 33,162,163,164,165,
  //166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184
  //  ¦   §   ¨   ©   ª   «   ¬   *   ®   ¯   °   ±   ²   ³   ´   µ   ¶   ·   ¸
  //  |           c   a   <       -                   2   3   '
    124,167,168, 99, 97, 60,172, 45,174,175,176,177, 50, 51, 41,181,182,183,184,
  //185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203
  //  ¹   º   »   ¼   ½   ¾   ¿   À   Á   Â   Ã   Ä   Å   Æ   Ç   È   É   Ê   Ë
  //  1       >               ?   A   A   A   A   A   A   A   C   E   E   E   E
     49,186, 62,188,189,190, 63, 65, 65, 65, 65, 65, 65, 65, 67, 69, 69, 69, 69,
  //204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222
  //  Ì   Í   Î   Ï   Ð   Ñ   Ò   Ó   Ô   Õ   Ö   ×   Ø   Ù   Ú   Û   Ü   Ý   Þ
  //  I   I   I   I   D   N   O   O   O   O   O   x       U   U   U   U   Y
     73, 73, 73, 73, 68, 78, 79, 79, 79, 79, 79,120,216, 85, 85, 85, 85, 89,222,
  //223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241
  //  ß   à   á   â   ã   ä   å   æ   ç   è   é   ê   ë   ì   í   î   ï   ð   ñ
  //      a   a   a   a   a   a   a   c   e   e   e   e   i   i   i   i   o   n
    223, 97, 97, 97, 97, 97, 97, 97, 99,101,101,101,101,105,105,105,105,111,110,
  //242 243 244 245 246 247 248 249 250 251 252 253 254 255
  //  ò   ó   ô   õ   ö   ÷   ø   ù   ú   û   ü   ý   þ   ÿ
  //  o   o   o   o   o   /       u   u   u   u   y       y
    111,111,111,111,111, 47,248,117,117,117,117,121,254,121);
begin
  if Index < 128 then
    Result := Index
  else
    Result := Convert[Index];
end;

function AsciiExtToBase(AChar: AnsiChar): AnsiChar; overload;
begin
  Result := Chr(AsciiExtToBase(Ord(AChar)));
end;

function AsciiExtToBase(const S: AnsiString): AnsiString; overload;
var
  P: PByte;
  I: Integer;
begin
  Result := S;
  P := @Result[1];
  for I := 1 to Length(Result) do
  begin
    P^ := AsciiExtToBase(P^);
    Inc(P);
  end;
end; 
```

# iphone - 退货时inapp购买调用failetransaction ...？

> ID：14274090
> 
> 赞同：1
> 
> 时间：2013-01-11T08:11:27.823
> 
> 标签：iphone, ios, in-app-purchase

在我的 iPhone 应用程序中，我实现了 inAppPurchase，因此用户可以在应用程序中购买产品。它在 iTunes 应用商店上线。我用沙盒很好地测试了它，没有显示任何信用卡验证页面。当用户尝试从我的应用程序中购买应用程序商店以批准他/她的信息时，在现场直播。

![在此处输入图像描述](../Images/5d41c71d489c3d87613df23745a628a7.png)

当用户通过所有进程时，从后台再次打开我的应用程序。

![在此处输入图像描述](../Images/e7fe39d0295305f8333b1645fe231c1a.png)

在我在**-(void) paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions**方法中的**failedTransaction**中写给用户的消息提示上方。此方法如下：

 **```
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
for(SKPaymentTransaction *transaction in transactions)
{
    switch (transaction.transactionState)
    {
        case SKPaymentTransactionStatePurchased:
            [self completeTransaction:transaction];
            break;
        case SKPaymentTransactionStateFailed:
            [self failedTransaction:transaction];
            break;
        default:
            break;
    }
}
} 
```

谁能指导我出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:31:49.967

发生这种情况是因为您的服务器实施了验证部分。

检查以下事项：

```
{
    "status" : 0,
    "receipt" : { (receipt here) },
    "latest_receipt" : "(base-64 encoded receipt here)",
    "latest_receipt_info" : { (latest receipt info here) }
} 
```

首先在您的服务器端检查这些东西，并调试代码并让我知道。

上述响应之一可能会产生问题。

谢谢，

鹤芒。**

# android - 某些设备的标签和图像

> ID：14274097
> 
> 赞同：1
> 
> 时间：2013-01-11T08:11:55.630
> 
> 标签：android, android-fragments

我的应用程序的一部分扩展了 FragmentActivity。

该选项卡有一个图像和一个文本（它有 3 个选项卡，但它们的代码相似，唯一的区别是文本和图像）：

```
 mTabManager.addTab("map", mTabHost.newTabSpec("map").setIndicator(context.getString(R.string.map), activity.getResources().getDrawable(R.drawable.maps_tab)), Maps.class, bundlePos); 
```

和 maps_tab.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- When selected, use icon1 -->
<item android:drawable="@drawable/ic_mapa_selected"
  android:state_selected="true" />
<!-- When not selected, use icon2-->
<item android:drawable="@drawable/ic_mapa_unselected" />
</selector> 
```

好的，这在 Galaxy Ace 或 HTC Wildfire S 等设备中运行良好： ![在此处输入图像描述](../Images/8d0dba7e6b03c16236e83a6a2d663b92.png)

但在 Galaxy SII、Galaxy SIII 或 HTC Desire C 等其他设备中失败

![在此处输入图像描述](../Images/18d01c2e46c9aa70aafe7e76487f9f5e.png)

如何解决这种不兼容问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:04:03.010

这是相同的实现

**TabSample.java**

```
public class TabSample extends TabActivity {
    /** Called when the activity is first created. */   
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        setTabs() ;
    }
    private void setTabs()
    {
        addTab("Home", R.drawable.tab_home, ArrowsActivity.class);
        addTab("Search", R.drawable.tab_search, OptionsActivity.class);

        //To add more tabs just use addTab() method here like previous line.
    }

    private void addTab(String labelId, int drawableId, Class<?> c)
    {
        TabHost tabHost = getTabHost();
        Intent intent = new Intent(this, c);
        TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

        View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
        TextView title = (TextView) tabIndicator.findViewById(R.id.title);
        title.setText(labelId);
        ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
        icon.setImageResource(drawableId);

        spec.setIndicator(tabIndicator);
        spec.setContent(intent);
        tabHost.addTab(spec);
        int i = tabHost.getCurrentTab();
        Toast.makeText(TabSample.this, "tab->" + i,Toast.LENGTH_SHORT).show();
    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout android:orientation="vertical"
        android:layout_width="fill_parent" android:layout_height="fill_parent">
        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_width="fill_parent" android:layout_height="0dip"
            android:layout_weight="1" />

        <TabWidget android:id="@android:id/tabs"
            android:layout_width="fill_parent" android:layout_height="wrap_content"
            android:layout_weight="0"  />
    </LinearLayout>
</TabHost> 
```

**tab_indicator.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="0dip"
    android:layout_height="55dip"    
    android:layout_weight="1"
    android:orientation="vertical"

    android:background="@drawable/tab_indicator"
    android:padding="5dp">

    <ImageView android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:src="@drawable/icon"

    /> 
    <TextView android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" 
        android:layout_centerHorizontal="true"
        style="?android:attr/tabWidgetStyle"
    />    
</RelativeLayout> 
```

如果您对此有任何问题，请告诉我
谢谢

# facebook - 使用 libgdx 制作的游戏的 Web 端口可以用作 Facebook 应用程序吗？

> ID：14274098
> 
> 赞同：4
> 
> 时间：2013-01-11T08:11:57.803
> 
> 标签：facebook, libgdx

一周前，我刚开始使用 libgdx。

我现在知道有 4 个项目文件夹，到目前为止我只对桌面和 Android 版本感兴趣。

但后来我意识到同时构建的游戏的 Web 端口是用 JavaScript 编写的。Facebook 应用程序使用 JS、HTML 和 CSS 对吗？

假设我正在制作这款 Android 游戏，并通过 libgdx+GWT 的魔力推出了它的 Web 对应游戏。这可以作为 Facebook 应用程序使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:31:31.673

它应该像 Facebook 为其应用程序支持 HTML5 和 JavaScript 一样工作。[例如，摩天大楼城市是使用 HTML5 构建的。](https://developers.facebook.com/html5/blog/post/2012/04/17/making-a-speedy-html5-game/)我之前对 GWT 没有经验，但从生产模式下运行的 GWT 应用程序是纯 JavaScript 和 HTML（从 Java 源代码编译）这一事实来看，这些应用程序可能会被制作成 Facebook 应用程序。

# android - 图像不会显示在 ImageButton 中

> ID：14274103
> 
> 赞同：0
> 
> 时间：2013-01-11T08:12:24.497
> 
> 标签：android, image, bitmap, inputstream, outputstream

我正在显示来自字符串路径（我从数据库中检索）的图像，并且显示一张图像没有问题。但是当我有 4 张图像时，只显示一个图像（第一张图像）而其他图像不显示。我的代码如下：

```
 try{
    name.setText(nameString);
    school.setText(schoolString);
    psupervisor.setText(info.getPsupervisor());
    pdate.setText(info.getPdate());
    a.setChecked(Boolean.parseBoolean(info.getPtick1()));
    b.setChecked(Boolean.parseBoolean(info.getPtick2()));
    c.setChecked(Boolean.parseBoolean(info.getPtick3()));
    pcomment1.setText(info.getPcomment1());
    psignature1.setImageBitmap(resizeSignatureBitmap(info.getPsignature1()));
    pcomment2.setText(info.getPcomment2());
    psignature2.setImageBitmap(resizeSignatureBitmap(info.getPsignature2()));
    pdate2.setText(info.getPdate2());
    d.setChecked(Boolean.parseBoolean(info.getPtick4()));
    e.setChecked(Boolean.parseBoolean(info.getPtick5()));
    f.setChecked(Boolean.parseBoolean(info.getPtick6()));
    pcomment3.setText(info.getPcomment3());
    psignature3.setImageBitmap(resizeSignatureBitmap(info.getPsignature3()));
    pcomment4.setText(info.getPcomment4());
    psignature4.setImageBitmap(resizeSignatureBitmap(info.getPsignature4()));
    Log.d("PREPOST: ", log2);
    db.close();
 }
 catch(Exception ex){}

}

//method to resize the bitmap before displaying
 public Bitmap resizeSignatureBitmap(String imagePath){

    BitmapFactory.Options options = new BitmapFactory.Options();
    InputStream is = null;
    try {
            is = new FileInputStream(imagePath);
    } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }
    BitmapFactory.decodeStream(is,null,options);
    try {
            is.close();
    } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
    }
    try {
            is = new FileInputStream(imagePath);
    } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }
    // here w and h are the desired width and height
    options.inSampleSize = Math.max(options.outWidth/w, options.outHeight/h);
    // bitmap is the resized bitmap
    Bitmap bitmap = BitmapFactory.decodeStream(is,null,options);

     return bitmap;
} 
```

我在做什么有什么问题吗？请指出我的错误，因为我找不到我的错误。没有错误，没有，只是没有显示。默认情况下，它只显示一个图像，并且始终是第一张图像（psignature1），如果我将其注释掉，则将显示第二张图像（psignature2），但不会显示其余图像。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:22:29.120

```
//method to resize the bitmap before displaying
public Bitmap resizeSignatureBitmap(String imagePath){

 BitmapFactory.Options options = new BitmapFactory.Options();
InputStream is = null;
try {
        is = new FileInputStream(imagePath);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    // here w and h are the desired width and height
options.inSampleSize = Math.max(options.outWidth/w, options.outHeight/h);
// bitmap is the resized bitmap
 Bitmap bitmap = BitmapFactory.decodeStream(is,null,options);
is=null;
 return bitmap;
} 
```

像这样写你的方法..你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:29:28.733

您的 psignature1、psignature2、psignature3 可能由相同的 id 定义

也许你的代码是这样的

```
psignature1 = (ImageButton) findViewById(R.id.psignature1);
psignature2 = (ImageButton) findViewById(R.id.psignature1);
psignature3 = (ImageButton) findViewById(R.id.psignature1); 
```

尝试更改每个 id

* * *

这是我的 sd 卡中图像的位图压缩器，只需编辑它

```
public Bitmap compressBitmapResource(String filePath, int reqWidth,
        int reqHeight) {

     // First decode with inJustDecodeBounds=true to check dimensions
     final BitmapFactory.Options options = new BitmapFactory.Options();

     options.inJustDecodeBounds = true;
     BitmapFactory.decodeFile(filePath, options);

     // Calculate inSampleSize
     options.inSampleSize = calculateBitmapSize(options, reqWidth,
     reqHeight);

     // Decode bitmap with inSampleSize set
     options.inPurgeable = true;
     options.inJustDecodeBounds = false;
     return BitmapFactory.decodeFile(filePath, options);

}

    public int calculateBitmapSize(BitmapFactory.Options options, int reqWidth,
        int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float) height / (float) reqHeight);
        } else {
            inSampleSize = Math.round((float) width / (float) reqWidth);
        }
    }
    return inSampleSize;
} 
```

# java - 如何在选项卡更改上验证选项卡中的输入数据？

> ID：14274110
> 
> 赞同：0
> 
> 时间：2013-01-11T08:13:02.353
> 
> 标签：java, android, tabs, listener, android-tabhost

我有一个这样的应用程序结构：
![应用结构](../Images/be0e9d4b61cb350680be34ecbb7c341e.png)
**背景：**
父活动 #1 只是持有选项卡主机、选项卡小部件，并且还设置了 3 个选项卡以将其内容设置为 3 个选项卡`activities`（tab1、tab2、tab3 活动）。

> ***更新：*** 我尝试在父活动 #1 的 onTabChangedListener 中调用我的验证方法，但我得到了一个空指针异常。无法真正追踪到任何地方。我确实评论/删除了冲突代码，但我仍然没有遇到瓶颈。[StackTrace](http://pastebin.com/Yz1nL07V)（PasteBin 链接）。[父 Activity #1](http://pastebin.com/ZQujnYg6)代码， [Tab#1 Activity](http://pastebin.com/e4DGhAq3)

**问题：**
我想验证用户在单个选项卡活动 onTabChanged 事件的表单字段中输入的数据，**但**我无法设置多个`setOnTabChangedListener`.
我在这里错过了什么吗？
侦听器在方法下的自己的 tab# 活动中设置`oncreate`。

除了尝试上述技术之外，我还尝试在`onResume()`主要的 Parent 活动 #1 下设置监听器。但是该`on Resume()`方法从未被调用过。我也有一个空指针异常。

**验证背后的想法是：**我希望在用户更改选项卡时，应该在他可以跳过选项卡之前验证数据。因此，实际上我需要 tab#1 在类似于选择`onTabChanged`tab#2/tab#3 的事件中验证数据。
此外，如果选择当前选项卡#2 并且用户选择选项卡#1/选项卡#3，这将适用

任何建议将不胜感激..
感谢阅读..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:42:04.497

> 我想验证用户在单个选项卡活动 onTabChanged 事件的表单字段中输入的数据，但我无法设置多个 setOnTabChangedListener。

不需要一秒钟`OnTabChangeListener`，即使您可以设置它也无济于事。在构建代码时，您需要访问子活动。[您可以通过使用此问题](https://stackoverflow.com/questions/5399324/how-to-reference-child-activity-from-tabhost-to-call-a-public-function)中的答案之一来做到这一点。问题是，除了接受的答案之外，这些答案都使用了已弃用的方法。

我在评论中提出的方法是在每个用作选项卡的子活动中都有一个静态布尔字段，并让您的所有活动在这些活动中的视图状态发生变化时更新该布尔标志（如果您检查 a `CheckBox`，在 an 中输入内容`EditText`等）。然后，您可以简单地在`OnTabChangeListener`. 我的方法应该可以，但是您的代码有点混乱，因此您必须对其进行大量修改。

> 我曾尝试在主要父活动 #1 下的 onResume() 中设置监听器。但是从未调用过 on Resume() 方法。我也有一个空指针异常。

您的代码得到 a 是正常的，`NullPointerException`因为我没有看到您在哪里初始化对您在`OnTabChangeListener`.

还：

不要使用`TabActivity`. 它已被弃用，取而代之的`Fragments`是更灵活的框架。这些片段可以帮助你，因为，我认为如果当前页面的验证失败并且`OnTabChangeListener`可能来晚了（但我可能弄错了你想要的东西），你想停止更改选项卡。

作为旁注，`equals`在您的代码中使用来测试`String`相等性而不是`==`.

# html - 启用 appcache 时，Safari 中对音频文件的 Ajax 请求不起作用

> ID：14274111
> 
> 赞同：0
> 
> 时间：2013-01-11T08:13:07.590
> 
> 标签：html, safari, xmlhttprequest, web-audio-api

我使用应用程序缓存清单来缓存网络游戏的媒体内容，然后在游戏中我使用 Web Audio API 播放一些声音。

这适用于 Chrome，并且是第一次在 Safari 上加载。但随后它将在 Safari 上失败，因为对音频文件的 XHR 请求实际上返回了一个空字符串。

Mobile Safari 也是如此。

有人知道为什么会这样吗？在为音频保留应用程序缓存的同时有任何可能的解决方法吗？

# php - Realex Payments 总是拒绝信用卡

> ID：14274112
> 
> 赞同：1
> 
> 时间：2013-01-11T08:13:20.487
> 
> 标签：php, payment-gateway, realex-payments-api

我正在使用 Realex Payments 网关的重定向方法。它正确地重定向到他们的服务器，但是当我继续处理实时卡详细信息时，它显示它正在处理中。完成该过程后，我收到以下消息。

> 您的交易已被拒绝。请联系您的信用卡提供商，了解您的信用卡被拒绝的原因。

这就是我发送详细信息的方式：

```
<form action="https://epage.payandshop.com/epage.cgi/" method=post>
<input type="hidden" name="MERCHANT_ID" value="<?=$merchantid?>">
<input type="hidden" name="ORDER_ID" value="<?=$orderid?>">
 <input type="text" name="CURRENCY" value="<?=$curr?>">
 <input type="text" name="AMOUNT" value="<?=$amount?>">
 <input type="hidden" name="TIMESTAMP" value="<?=$timestamp?>">
 <input type="hidden" name="MD5HASH" value="<?=$md5hash?>">
 <input type="hidden" name="AUTO_SETTLE_FLAG" value="1">
 <input type="submit" name="submit" value="Proceed to server"/>
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:43:35.530

If you are under test mode you should use test card details. To get those details you have to contact the realex support. First make sure you in test mode or not. If you are on test you will be provided a test merchant ID and a test shared secret. I would suggest you to use test mode since you are still developing the system. Above error message means your card was declined by bank due to one of the following reason

*   Invalid Card Number
*   Invalid Amount
*   Invalid Currency
*   Invalid Expire Date
*   Invalid Merchant
*   Invalid Transaction
*   Not authorised card
*   Retailer Unknown

So make sure your parameters pass the right data. Live card will not work if you are on test mode.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:45:20.567

此消息表示银行拒绝交易，支付未成功。发生这种情况的原因有很多，但最常见的是卡已超过其限制，或者可能输入了错误的到期日期。检查 RealControl 中的事务以找到将为您提供更多信息的结果代码。

另一件事是，代码中的“epage.cgi”之后不应有斜杠“/”。

欧文

# django - IE 中 fetch() 的 Backbone.js 问题

> ID：14274116
> 
> 赞同：2
> 
> 时间：2013-01-11T08:14:29.390
> 
> 标签：django, internet-explorer, backbone.js, fetch

我正在使用后端的 Django 和前端的 Backbone.js 构建一个 Web 应用程序

当我尝试从服务器获取数据时，我遇到了 IE 问题。当我在 IE 中运行我的 HTML 页面时，集合获取总是调用错误函数。

我的代码：

```
$(function(){

var Chapter = Backbone.Model.extend({});

var Chapters = Backbone.Collection.extend({
    model: Chapter,
    url: 'http://ip.olya.ivanovss.info/chapters'
});

var chapters = new Chapters();

var Router = new (Backbone.Router.extend({
    routes: {
        "": "choose_activity",
        "/": "choose_activity"
    },

    choose_activity: function () {
        chapters.fetch({
            success: function () {
                AppView.render();
            },
            error: function() {
                alert('error');
            }
        });
    }
}))();

var AppView = new (Backbone.View.extend({
    el: '.popup',
    templates: {
        choose_activity: Handlebars.compile($('#tpl-activities').html())
    },
    render: function () {
        this.$el.html(this.templates["choose_activity"]({ chapters: chapters.toJSON()}));
    }
}))();

Backbone.history.start();
}); 
```

姜戈的观点：

```
def chapters(request):
    chapters = list(Chapter.objects.order_by('id'))
    response = HttpResponse(json.dumps(chapters, default=encode_myway), mimetype='text/plain')
    if request.META.get('HTTP_ORIGIN', None) in ('http://localhost', 'http://html.olya.ivanovss.info', 'http://10.0.2.2'):
        response['Access-Control-Allow-Origin'] = request.META['HTTP_ORIGIN']
    return response 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:19:44.280

IE7 不支持 CORS。

有两种方法可以解决这个问题。简单的方法是通过您的 API 代理。我的 Python 生锈了（我是一名 Node/PHP 开发人员），但我确信有一百万零一个资源来说明如何做到这一点。这样做的好处是您不必接触 API。但这意味着您的本地服务器必须 CURL 并从您的 API 服务器返回每个请求。

第二个（和更少的服务器密集型方式）是 JSONP！JSONP 的想法是它`<script>`使用您指定的 URL 将 a 附加到文档中。jQuery 附加一个`?callback=jQueryNNN`where`NNN`是一个随机数。`<script>`加载时非常有效，它调用`jQueryNNN('The Response Text')`并且 jQuery 知道从那里解析响应。这样做的坏处是您必须在 API 端包装所有响应（如果您刚刚开始，这非常容易，如果您已经构建了基础架构，则不那么容易）。

JSONP 的烦人之处在于，从本质上讲，您不能执行 POST/PUT/DELETE。但是，如果您有权访问 API，则可以模拟它：

```
Backbone.emulateHTTP = true;

model.save();  // POST to "/collection/id", with "_method=PUT" + header. 
```

将 JSONP 与 Backbone 集成非常简单（小秘密 Backbone.sync 使用 jQuery`$.ajax()`并且选项参数转发到 jQuery ;)）。

对于访问交叉源的每个模型/集合，您可以添加一个 su

```
var jsonpSync = function (method, model, options) {
    options.timeout = 10000; // for 404 responses
    options.dataType = "jsonp";
    return Backbone.sync(method, model, options);
}; 
```

在每个集合和模型中，跨域是什么：

```
var MyCollection = Backbone.Collection.extend({
    sync  : jsonpSync
}); 
```

或者只是覆盖整个主干同步

```
Backbone.__sync = Backbone.sync;

var jsonpSync = function (method, model, options) {
    options.timeout = 10000; // for 404 responses
    options.dataType = "jsonp";
    return Backbone.__sync(method, model, options);
};

Backbone.sync = jsonpSync; 
```

在服务器端，您可以执行以下操作：[返回](https://stackoverflow.com/questions/2743207/how-to-output-json-from-within-django-and-call-it-with-jquery-from-a-cross-domai)JSONP 响应（复制粘贴到此处）：

```
def randomTest(request):
    callback = request.GET.get('callback', '')
    req = {}
    req ['title'] = 'This is a constant result.'
    response = json.dumps(req)
    response = callback + '(' + response + ');'
    return HttpResponse(response, mimetype="application/json") 
```

# css - IE 8 将字体正常渲染为斜体

> ID：14274118
> 
> 赞同：4
> 
> 时间：2013-01-11T08:14:43.657
> 
> 标签：css, internet-explorer, font-face

我一直在思考是什么原因导致某些 IE 版本将 @font-face 字体呈现为斜体，即使样式被声明为正常。

我的主要想法是 IE 在渲染页面之前不会下载每个字体文件。

在我的 CSS 中，我已经为同一字体的不同字体声明了字体文件——从细斜体到超字体。它们都使用相同的设置声明：

```
@font-face { /* THIN ITALIC */
    font-family: Unit;
    src: url("../gfx/fonts/UnitWeb-ThinIta.eot")
    src: url("../gfx/fonts/UnitWeb-ThinIta.eot?#iefix") format("embedded-opentype"),
         url("../gfx/fonts/UnitWeb-ThinIta.woff") format("woff");
    font-weight: 100;
    font-style: italic, oblique;
    font-variant: normal;
} 
```

通过

```
@font-face { /* ULTRA */
    font-family: Unit;
    src: url("../gfx/fonts/UnitWeb-Ultra.eot");
    src: url("../gfx/fonts/UnitWeb-Ultra.eot?#iefix") format("embedded-opentype"),
         url("../gfx/fonts/UnitWeb-Ultra.woff") format("woff");
    font-weight: 900;
    font-style: normal;
    font-variant: normal;
} 
```

如您所见，斜体被声明为`font-style: italic, oblique;`，而正常被声明为`font-style: normal;`。

现在，到渲染。

[这就是 IE 9 的呈现方式](http://ta-kundesenter.no/bilder/font_ie9.jpg)

[这就是 IE 8 不时渲染它的方式](http://ta-kundesenter.no/bilder/font_ie8.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:25:50.197

作为答案发布的是这个问题：[自定义字体有时在 IE8 / IE7 中以斜体呈现](https://stackoverflow.com/questions/11390511/custom-font-sometimes-renders-in-italics-in-ie8-ie7)

* * *

您需要为每个 @font-face 字体系列创建一个自定义名称。例如

```
@font-face { /* THIN ITALIC */
   font-family: UnitItalic;
   src: url("../gfx/fonts/UnitWeb-ThinIta.eot")
   src: url("../gfx/fonts/UnitWeb-ThinIta.eot?#iefix") format("embedded-opentype"),
        url("../gfx/fonts/UnitWeb-ThinIta.woff") format("woff");
   font-weight: 100;
   font-style: italic, oblique;
   font-variant: normal;
}

@font-face { /* THIN ITALIC */
   font-family: UnitNormal;
   src: url("../gfx/fonts/UnitWeb-ThinIta.eot")
   src: url("../gfx/fonts/UnitWeb-ThinIta.eot?#iefix") format("embedded-opentype"),
        url("../gfx/fonts/UnitWeb-ThinIta.woff") format("woff");
   font-weight: 100;
   font-style: italic, oblique;
   font-variant: normal;
} 
```

# vba - 失踪 ; before 第 1 行 Private Sub Worksheet_SelectionChange(ByVal Target As Range) 的语句

> ID：14274119
> 
> 赞同：0
> 
> 时间：2013-01-11T08:14:50.343
> 
> 标签：vba, excel

您好我正在尝试使用宏在在线 excel（www.editgrid.com）上创建一个搜索页面，以锁定除（B2 单元格）以外的所有单元格，并且每次打开页面时它都会清除/重置（B2 单元格）和我不断收到此错误**Missing ; before 第 1 行 Private Sub Worksheet_SelectionChange(ByVal Target As Range) 的语句** 我该如何解决这个错误。谢谢

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
  If Not Intersect(Selection, Range("A1:AS57")) Is Nothing Then
    Range("B2").Select
  End If
End Sub

Option Explicit

Private Sub Worksheet_Activate()

    [search_string] = "Type your search here."
    [search_string].Select

End Sub

Private Sub Worksheet_Change(ByVal Target As Range)
    Const CRITERIA_HEADER = "Description"
    Const TEMPORARY_NAME_CREATED_BY_ADVANCED_FILTER = "Extract"

    ' If change was from any cell other than our lookup, then exit
    If Intersect(Target, [search_string]) Is Nothing Then Exit Sub
    [search_string].Select
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:22:37.277

看起来 EditGrid 的宏应该用 JavaScript 而不是 VBA 编写。有关更多详细信息，请参阅[本指南](https://wiki.editgrid.com/display/dev/Macro+Guide)

# c++ - 如何有效地存储航点

> ID：14274132
> 
> 赞同：1
> 
> 时间：2013-01-11T08:15:54.567
> 
> 标签：c++, mysql, path-finding

我有一个带有非常大地图的游戏，我需要存储*很多*航点（数百万，如果不是数十亿），然后使用 A* 算法将它们用于寻路。

我需要的：

1.  存储大量它们的有效方法
2.  为 A* 算法直接访问它们的快速方法。

起初我想使用一个简单的向量，但这很快就会使用所有可用的内存。然后我想我应该使用 mysql，这也许是个好主意，因为我可以查询数据库中的航点区域。

最大的问题是，对于 A*，我需要尽快访问航路点，所以也许我需要每个航路点的唯一 ID。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:31:53.430

我认为你应该考虑通过自己管理你的内存来稍微降低层次——为你的图表的每个节点调用`new`并显式地调用；`delete`并通过内存地址引用您的节点。如果您担心分配大量小块内存，可以考虑使用[tcmalloc](http://goog-perftools.sourceforge.net/doc/tcmalloc.html)库。

节点应包含邻接列表。如果图形是静态的，我建议将邻接存储在每个节点中动态创建的数组中，该数组的大小与邻居的数量完全匹配。如果邻居的数量可以随时间变化，`std::vector`可能是下一个最好的事情。

* * *

注意：我假设图表是不规则的。对于常规图（例如 Potatoswatter 指出的网格），可以隐式学习节点的位置。

# android - 为什么我在 customarrayadapter 中出现空点异常？+ 孩子的家长问题

> ID：14274137
> 
> 赞同：0
> 
> 时间：2013-01-11T08:16:24.193
> 
> 标签：android, listview, android-fragments, custom-adapter

我是新手 Android 开发人员。我的项目目标是制作一个下载器应用程序。我决定用片段来做到这一点。我有一个 NPE，但我不知道出了什么问题。这些是我的代码：

activity_main.xml

```
 <android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:paddingBottom="4dp"
        android:paddingTop="4dp"
        android:textColor="#fff" 
        />

</android.support.v4.view.ViewPager> 
```

列表.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/dlist"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:focusable="false" >
    </ListView>

</RelativeLayout> 
```

行.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/downloadFileName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"

        android:text="FILENAME" />

    <TextView
        android:id="@+id/percent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="%"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/downloadFileName"
        android:text="time" />

    <TextView
        android:id="@+id/data"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/time"
        android:text="data" />

    <TextView
        android:id="@+id/speed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/percent"
        android:text="speed"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ProgressBar
        android:id="@+id/downloadProgressBar"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/speed" />

</RelativeLayout> 
```

MainActivity.java

```
public class MainActivity extends FragmentActivity {

    SectionsPagerAdapter mSectionsPagerAdapter;
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.setTitle(null);

        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);
        mViewPager.setOffscreenPageLimit(2);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            switch(position){
            case 0:
                Fragment fragment = new DownloadingFragment();
                Bundle args = new Bundle();
                args.putInt(DownloadingFragment.ARG_SECTION_NUMBER, position + 1);
                fragment.setArguments(args);
                return fragment;
            case 1:
                Fragment fragment2 = new FinishedFragment();
                Bundle args2 = new Bundle();
                args2.putInt(FinishedFragment.ARG_SECTION_NUMBER, position + 1);
                fragment2.setArguments(args2);
                return fragment2;
            }
            return null;
        }

        @Override
        public int getCount() {
            return 2;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase();
            case 1:
                return getString(R.string.title_section2).toUpperCase();

            }
            return null;
        }
    }
    public static class DownloadingFragment extends ListFragment {

        public static final String ARG_SECTION_NUMBER = "section_number";

        public DownloadingFragment() {
        }

        @Override
        public View onCreateView (LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View V = inflater.inflate(R.layout.list, container, false);
            ListView dlistView = (ListView) V.findViewById(android.R.id.list);
            ((ViewGroup)container.getParent()).removeView(container);
            List<DownloadInfo> downloadInfo = new ArrayList<DownloadInfo>();
            downloadInfo.add(new DownloadInfo("File", 1000));
            DownloadInfoArrayAdapter diaa = new DownloadInfoArrayAdapter(getActivity().getApplication(),android.R.id.list, downloadInfo);

            dlistView.setAdapter(diaa);// Null point exception line 142!

        return dlistView;
        }
    }
    public static class FinishedFragment extends Fragment {
        public static final String ARG_SECTION_NUMBER = "section_number";

        public FinishedFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // Create a new TextView and set its text to the fragment's section
            // number argument value.
            TextView textView = new TextView(getActivity());
            textView.setGravity(Gravity.CENTER);
            textView.setText(Integer.toString(getArguments().getInt(
                    ARG_SECTION_NUMBER)));
            return textView;
        }
    }

} 
```

下载info.java

```
public class DownloadInfo {
    public enum DownloadState {
        NOT_STARTED, DOWNLOADING, COMPLETE
    }

    public DownloadInfo(String filename, Integer size) {
        super();
        mFilename = filename;
        mProgress = 0;
        mFileSize = size;
        mProgressBar = null;
        mPercent = 0;
        mTime = " ";
        mSpeed = 0;
        mData = " ";
    }

    private volatile DownloadState mDownloadState = DownloadState.NOT_STARTED;
    private final String mFilename;
    private volatile Integer mProgress;
    private final Integer mFileSize;
    private volatile ProgressBar mProgressBar;
    private volatile Integer mPercent;
    private volatile String mTime;
    private volatile Integer mSpeed;
    private volatile String mData;

    public ProgressBar getProgressBar() {
        return mProgressBar;
    }

    public void setProgressBar(ProgressBar mProgressBar) {
        this.mProgressBar = mProgressBar;
    }

    public Integer getProgress() {
        return mProgress;
    }

    public void setProgress(Integer mProgress) {
        this.mProgress = mProgress;
    }

    public String getFilename() {
        return mFilename;
    }

    public Integer getFileSize() {
        return mFileSize;
    }

    public Integer getPercent() {
        return mPercent;
    }

    public void setPercent(Integer mPercent) {
        this.mPercent = mPercent;
    }

    public String getTime() {
        return mTime;
    }

    public void setTime(String mTime) {
        this.mTime = mTime;
    }

    public Integer getSpeed() {
        return mSpeed;
    }

    public void setSpeed(Integer mSpeed) {
        this.mSpeed = mSpeed;
    }

    public String getData() {
        return mData;
    }

    public void setData(String mData) {
        this.mData = mData;
    }

    public DownloadState getDownloadState() {
        return mDownloadState;
    }

    public void setDownloadState(DownloadState mDownloadState) {
        this.mDownloadState = mDownloadState;
    }
} 
```

DonwloadInfoArrayAdapter.java

```
public class DownloadInfoArrayAdapter extends ArrayAdapter<DownloadInfo> {

    //private final Context context;
    //private List<DownloadInfo> downloadinfo;
    public DownloadInfoArrayAdapter(Context downloadingFragment,int id,List<DownloadInfo> objects) {
        super(downloadingFragment, id,  objects);
        //this.context=downloadingFragment;
        //this.downloadinfo=objects;
        // TODO Auto-generated constructor stub
    }
    private static class ViewHolder {
        TextView downloadFilename;
        TextView speed;
        TextView time;
        TextView percent;
        TextView data;
        ProgressBar progressBar;
        DownloadInfo info;
      }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Log.d("downloadinfoarrayadapter", "lefutott");
        View row = convertView;
        DownloadInfo info = getItem(position);
        ViewHolder holder = new ViewHolder();
        if(null == row) {

            LayoutInflater inflater = (LayoutInflater)
                    getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate (R.layout.row, parent,false);

            holder.downloadFilename = (TextView) row.findViewById(R.id.downloadFileName);
            holder.data = (TextView) row.findViewById(R.id.data);
            holder.speed = (TextView) row.findViewById(R.id.speed);
            holder.time = (TextView) row.findViewById(R.id.time);
            holder.percent = (TextView) row.findViewById(R.id.percent);
            holder.progressBar = (ProgressBar) row.findViewById(R.id.downloadProgressBar);

            holder.info = info;

            row.setTag(holder);
          } else {
            holder = (ViewHolder) row.getTag();

            holder.info.setProgressBar(null);
            holder.info.setData(null);
            holder.info.setSpeed(null);
            holder.info.setTime(null);
            holder.info.setPercent(null);
            holder.info = info;
            holder.info.setProgressBar(holder.progressBar);
            holder.info.setData(holder.data.toString());
            holder.info.setSpeed(Integer.getInteger(holder.speed.toString()));
            holder.info.setTime(holder.time.toString());
            holder.info.setPercent(Integer.getInteger(holder.percent.toString()));

          }
        holder.downloadFilename.setText(info.getFilename().toString());
        holder.data.setText(info.getData().toString());
        holder.speed.setText(info.getSpeed().toString());
        holder.time.setText(info.getTime().toString());
        holder.percent.setText(info.getPercent().toString());
        holder.progressBar.setProgress(info.getProgress());
        holder.progressBar.setMax(info.getFileSize());
        Log.d("downloadinfoarrayadapter", "ez lefutott");
        info.setProgressBar(holder.progressBar);
        return row;
    }
} 
```

编辑：

由于黑带，NPE 问题解决了，但应用程序遇到了另一个问题。更改的行：

```
View V = inflater.inflate(R.layout.list, null);
ListView dlistView = (ListView) V.findViewById(R.id.dlist); 
```

之后：

```
01-11 10:53:48.285: E/AndroidRuntime(3714): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

我试图弄清楚哪个视图是具体的孩子，但我不知道。

编辑：这是新堆栈：

```
 01-11 16:12:51.056: E/AndroidRuntime(2973): FATAL EXCEPTION: main
01-11 16:12:51.056: E/AndroidRuntime(2973): android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.content.res.Resources.getResourceName(Resources.java:1679)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at com.velsorange.filedownloader.MainActivity$DownloadingFragment.onCreateView(MainActivity.java:140)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.View.measure(View.java:15513)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.View.measure(View.java:15513)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.View.measure(View.java:15513)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.View.measure(View.java:15513)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.Choreographer.doFrame(Choreographer.java:532)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.os.Handler.handleCallback(Handler.java:725)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.os.Looper.loop(Looper.java:137)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at android.app.ActivityThread.main(ActivityThread.java:5191)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at java.lang.reflect.Method.invokeNative(Native Method)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at java.lang.reflect.Method.invoke(Method.java:511)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-11 16:12:51.056: E/AndroidRuntime(2973):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:20:51.913

```
ListView dlistView = (ListView) V.findViewById(android.R.id.list); 
```

应该

```
 ListView dlistView = (ListView) V.findViewById(R.id.dList); 
```

因为您要声明它`@+id/dList`

这是很多代码要经过。下次您应该只显示相关的代码片段。

```
 View V = inflater.inflate(R.layout.list, container, false); 
```

这是错误的。将其更改为：

```
 View V = inflater.inflate(R.layout.list, null); 
```

还返回 V 对象而不是列表

# ruby - 如何纠正 Ruby 中不正确的编码字符串？

> ID：14274138
> 
> 赞同：0
> 
> 时间：2013-01-11T08:16:24.597
> 
> 标签：ruby, string, character-encoding

例如，我们需要一个第三方库来解析和获取文件元数据。但是该方法会通过 utf-8 解码所有元数据，即使元数据以另一种编码方式编码，它也会返回给我们一个 utf-8 编码的字符串。并且该库不支持任何方法来返回原始字符串数据供我们正确编码。现在我们知道文件的元数据的原始编码是，例如，GBK。有没有办法将 utf-8 编码的字符串更正为 GBK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:20:59.317

是的。您应该了解 ruby​​ 1.9`force_encoding`和`encode`字符串类的方法。我建议在使用 ruby​​ 操作之前尽快将所有内容转换为 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:20:31.393

不，没有，将不属于 UTF-8 的内容解码为 UTF-8 是有损的。这意味着，当您从库中获取字符串时，您已经丢失了信息并且无法将原始数据表示为 GBK。更改 lib 的工作方式，或将文件元数据更改为 UTF-8。

# android - 我如何使用带有 touchimageview 的视图寻呼机

> ID：14274140
> 
> 赞同：6
> 
> 时间：2013-01-11T08:16:35.650
> 
> 标签：android, android-viewpager, android-imageview

我目前正在使用 TouchImageView 来允许放大和缩小，但现在，我还需要一个使用图像视图的 View Pager。我如何将这两者合并在一起？我必须夸大布局吗？

这是我的浏览器

```
public class Main extends FragmentActivity implements AdapterView.OnItemSelectedListener, ViewPager.OnPageChangeListener{
    private ViewPager viewPager;
    String[] mImageIds;
    private Handler handler;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        displayImage();
        viewPager = (ViewPager) findViewById(R.id.view_pager);
        viewPager.setAdapter(new MyAdapter(getSupportFragmentManager()));
        viewPager.setOnPageChangeListener(this);
        //gallery = (Gallery) findViewById(R.id.gallery);
        //gallery.setAdapter(new ImageAdapter());
        //gallery.setOnItemSelectedListener(this);

        //textView = (TextView) findViewById(R.id.title);

        handler = new Handler();

    }

    public void displayImage()
    {
        ArrayList<String>  mStringList= new ArrayList<String>();
        File strPath = new File(Environment.getExternalStorageDirectory() + "/Covers");
        int lists = strPath.listFiles().length; 
        Log.d("number of items in array ",String.valueOf(lists));

        File yourDir = new File(strPath, "");
        for (File f : yourDir.listFiles()) {
            if (f.isFile())
            {
                String name = f.getName();
                String v = strPath + "/" + name;
                mStringList.add(v);
            }
        }

        mImageIds = new String[mStringList.size()];
        mImageIds = mStringList.toArray(mImageIds);

        for(int i = 0; i < mImageIds.length ; i++){
            //Log.d("string is",(mImageIds[i]));
        }
    }

    // gallery item selected
    public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
        updateUI(i);
    }

    // view pager item selected
    public void onPageSelected(int i) {
        updateUI(i);
    }

    private void updateUI(final int i) {
        handler.post(new Runnable() {
            public void run() {
                //gallery.setSelection(i);
                viewPager.setCurrentItem(i);
                ///textView.setText("Photo #" + i);
            }
        });
    }

    public void onNothingSelected(AdapterView<?> adapterView) {    }

    public void onPageScrolled(int i, float v, int i1) {    }

    public void onPageScrollStateChanged(int i) {    }

    public class ImageAdapter extends BaseAdapter implements OnTouchListener {

        public int getCount() {
            return mImageIds.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            ImageView imageView = new ImageView(Main.this);
            imageView.setOnTouchListener(this);
            imageView.setImageDrawable(Drawable.createFromPath(mImageIds[position]));
            imageView.setLayoutParams(new Gallery.LayoutParams(150, 100));
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);

            return imageView;
        }

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            return false;
        }

    }

    public class EnableDisableViewPager extends ViewPager {

        private boolean enabled = true;

        public EnableDisableViewPager(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        @Override
        public boolean onInterceptTouchEvent(MotionEvent arg0) {
            if(enabled)
                return super.onInterceptTouchEvent(arg0);

            return false;
        }

        public boolean isEnabled() {
            return enabled;
        }

        public void setEnabled(boolean enabled) {
            this.enabled = enabled;
        }
    }

    public class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return mImageIds.length;
        }

        @Override
        public Fragment getItem(final int position) {
            return new Fragment() {
                @Override
                public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
                    ImageView imageView = new ImageView(Main.this);
                    imageView.setImageDrawable(Drawable.createFromPath(mImageIds[position]));
                    return imageView;
                }
            };
        }
    }

} 
```

及其xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >
    <FrameLayout android:layout_height="0px"
                 android:layout_width="fill_parent"
                 android:layout_weight="1"
            >

        <android.support.v4.view.ViewPager
            android:id="@+id/view_pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:padding="10dip" />

    </FrameLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:03:10.870

1.  创建一个 FragmentActivity，其布局由 View Pager 组成。
2.  添加一个 Fragment foreach 图像，其布局由 TouchImageView 组成。
3.  将这些片段列表添加到查看寻呼机。而已。捏缩放和寻呼机都有效。

像这样：

```
@Override
protected void onStart() {

super.onStart();

List<Fragment> fragments = new Vector<Fragment>();

String url1 =  "someurl1.jpg";
Bundle Image1 = new Bundle();
Image1.putString("image_url", url1);
fragments.add(Fragment.instantiate(this, ZoomImageFragment.class.getName(),Image1));

String url2 = "someurl2.jpg";
Bundle Image2 = new Bundle();
Image2.putString("image_url", url2);
fragments.add(Fragment.instantiate(this, ZoomImageFragment.class.getName(),Image2));

//and so on.

this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);
mPager = (ViewPager) findViewById(R.id.pager);
mPager.animate();
mPager.setAdapter(this.mPagerAdapter);

} 
```

# .net-micro-framework - 中断的检测是否完全取决于类型，例如电平或边缘？

> ID：14274142
> 
> 赞同：0
> 
> 时间：2013-01-11T08:16:43.013
> 
> 标签：.net-micro-framework

第 36 页 EMX 用户手册指出：“可以使用可选的毛刺滤波器在上升沿或下降沿激活中断。” 然而 Redpine Signals RS9110-N-11-21 数据表指出：“高电平有效，电平触发。” 中断由 WiFi 设备触发。在 C# 代码中，如果我使用 InterruptEdgeLevelHigh 或 InterruptEdgeLevelLow 的参数，我会收到一个参数异常。没关系，因为它与 EMX 用户手册一致。如果我使用 InterruptEdgeBoth、InterruptEdgeHigh 或 InterruptEdgeLow，我将无法接收到中断。我不确定这是否是因为设备正在使用“高电平有效，电平触发”。

如果 RedPine 被限制为“电平触发”，我是否应该能够在 Edge 触发时检测到它们的中断，或者中断检测是否绝对限制为电平？

这是我用来测试触发器的部分代码：

```
 public static void Main()
    {
        config = new SPI.Configuration((Cpu.Pin)EMX.Pin.IO2, false, 0, 0, false, true, 1000, SPI.SPI_module.SPI1);
        SPI1 = new SPI(config);

        WiFiReset = new OutputPort((Cpu.Pin)EMX.Pin.IO3, true);
        WiFiInterrupt = new InterruptPort((Cpu.Pin)EMX.Pin.IO26, false, Port.ResistorMode.Disabled, Port.InterruptMode.InterruptEdgeHigh);
        // "Interrupts can be activated on rising or falling edges with an optional glitch filter." Page 36 EMX User Manual.
        // Redpine Datasheet: "Active high, level triggered."
        // NETMF interrupt event: "If an InterruptEdgeLevelHigh or InterruptEdgeLevelLow interrupt event occurs, an application must call the ClearInterrupt method to re-enable this event."
        WiFiInterrupt.OnInterrupt += new NativeEventHandler(WiFiInterrupt_OnInterrupt);

        try
        {
            byte[] in_initialise = { 0x15, 0x00 }; //initialisation
            byte[] out_initialise = new byte[2];
            SPI1.WriteRead(in_initialise, out_initialise);
            if (out_initialise[1] != 0x58)                      //SUCCESSFUL
            {
                WiFiReset.Write(false);
                Thread.Sleep(1);
                WiFiReset.Write(true);
                SPI1.WriteRead(in_initialise, out_initialise);
            }
            if (out_initialise[1] == 0x58)
            {
                Debug.Print("WiFi is Initialised.");
                WiFiInterrupt.ClearInterrupt();
                intFlag = false;
                byte[] in_bandStart = { 0x7c, 0x04, 0x10, 0x00, 0x02, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00 }; //Band
                byte[] out_bandStart = new byte[20];
                SPI1.WriteRead(in_bandStart, out_bandStart);
                if (out_bandStart[19] == 0x58)                          //SUCCESSFUL
                {
                    //Debug.Print("WiFi established Band Command Start.");
                    while (intFlag == false && delay < maxDelay)
                    {
                        ++delay; //waiting for interrupt
                        SPI1.WriteRead(tx_data, rx_data);
                        if (rx_data[0] == 0x55)
                            break;
                        Thread.Sleep(1);
                    }
                    if (delay != maxDelay)
                    {
*****************************************************************************************************

    static void WiFiInterrupt_OnInterrupt(uint data1, uint data2, DateTime time)
    {
        byte[] in_intStart = { 0x5c, 0x00, 0x10, 0x00 }; //Band Start
        byte[] out_intStart = new byte[4];
        SPI1.WriteRead(in_intStart, out_intStart);
        intFlag = true;
        intTime = time;
    } 
```

在第一次中断到期时，我已经多次收到 0x58 确认接收（请参阅“等待中断”）。

```
 Band Command Start
    Send : 7c Recv : 00
    Send : 04 Recv : 58
    Send : 10 Recv : 58
    Send : 00 Recv : 58
    Send : 02 Recv : 58
    Send : 18 Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 04 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Wait for interrupt
    Interrupt received, Do master read
    Send : 5c Recv : 00
    Send : 00 Recv : 58
    Send : 10 Recv : 58
    Send : 00 Recv : 58
    wait for start token
    Send : Dummy 00 Recv : 58
    Send : Dummy 00 Recv : 58
    Send : Dummy 00 Recv : 55
    Read descriptor is
    Send : Dummy 00 Recv : 00
    Send : Dummy 00 Recv : 97 .........Band Success Response
    Send : Dummy 00 Recv : 00
    Send : Dummy 00 Recv : 00
    Send : Dummy 00 Recv : 00
    Send : Dummy 00 Recv : 00
    Send : Dummy 00 Recv : 00
    Send : Dummy 00 Recv : 55
    Send : Dummy 00 Recv : 88
    Send : Dummy 00 Recv : 01
    Send : Dummy 00 Recv : 00
    Send : Dummy 00 Recv : 00
    Send : Dummy 00 Recv : d1
    Send : Dummy 00 Recv : 27
    Send : Dummy 00 Recv : 04
    Send : Dummy 00 Recv : 00
    Band Response =97 Status=00
    --------------------------------------------
    Init Start
    Send : 7c Recv : 80
    Send : 04 Recv : 58
    Send : 10 Recv : 58
    Send : 00 Recv : 58
    Send : 00 Recv : 58
    Send : 10 Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58
    Send : 00 Dummy Recv : 58 
```

任何意见将不胜感激。

凯文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T07:36:43.093

redpine 模块是电平触发的。您应该能够配置您的中断处理程序以检测上升沿，当您从低电平转换为高电平时，该上升沿将被提升。

但是，当有更多数据需要服务时，该特定设备可以将中断线保持为高电平。因此，您需要在 ISR 结束时轮询中断线，并且仅在发现中断为低电平时才确认中断。

这样做可以让您的中断再次触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:05:03.320

这种行为是正确的。您的模块仅基于没有边缘的电平转换生成 INT（图像上的蓝线）。设置为 InterruptEdgeLow/Both/High 的 EMX 只期望特定的（或非特定的，如果两个边沿）边沿转换，并且因为只有电平发生了变化（没有边沿），所以不会生成 INT。

该图像不太准确（在您的情况下，蓝线上的转换可能需要更长的时间），但显示了差异。

![在此处输入图像描述](../Images/3ee0b67aea5ebfb074630114ec0bc98a.png)

# passwords - 打开要求输入用户名和密码的非密码保护 Access 2000 数据库

> ID：14274145
> 
> 赞同：0
> 
> 时间：2013-01-11T08:17:13.107
> 
> 标签：passwords, ms-access-2000

我正在尝试打开一个 Microsoft Access 2000 .MDB 文件来迁移它，因为它目前正被某人使用了 10 年的 VB 应用程序所使用，该应用程序在 NT 服务器上掉了下来，并且其作者早已不复存在。早在 9 月，我将 MDB 文件复制到附近的一台 XP 机器上（因为它安装了 Access），当它要求输入名称和密码时，能够使用我登录的 Windows XP 帐户打开它.

但是，自从我在 11 月再次尝试后，它突然不再接受该用户名/密码对，并且每个人都发誓没有人碰过这台机器。我尝试了一个空白用户名、我从中获得它的 NT 服务器上的“管理员”帐户的登录名/密码，以及我之前打开它的 XP 机器上的所有这些。

我尝试在其上运行几个密码恢复应用程序，例如[Rixler Access Password Recovery](http://www.rixler.com/de/access_password_recovery.htm)和[Nirsoft 的“accesspv.exe”](http://www.nirsoft.net/utils/accesspv.html)，他们都说该文件**不受**密码保护。所以它本身不是“数据库”密码，它只是想要一些帐户信息，我什至不知道它想要什么用户名。

我已经阅读了我可以通过 MDW 文件找到的内容；在 XP 工作站上找到 3 个这样的，我尝试将它们全部重命名，以防它试图查找帐户名称，但结果也是相同的。

为其构建的半损坏的 VB 应用程序显然仍在正常打开和使用数据库；唉，我还没有找到它的源代码。

任何人都知道 Access 2000 想要的非密码保护 MDB 文件中的凭据，以及如何重新进入？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:18:34.833

用[MDB 工具](http://mdbtools.sourceforge.net/)解决。大约五个月前，这将非常方便。

# php - PHP什么时候需要依赖注入？

> ID：14274148
> 
> 赞同：2
> 
> 时间：2013-01-11T08:17:37.047
> 
> 标签：php, dependency-injection

对于具有多个团队成员的大型企业应用程序来说，依赖注入 (DI) 是否更重要？现在我是一个单一的开发人员，试图破解一个小网站，看看它是否获得了牵引力。然而，我不相信 DI 会为我正在编写的代码增加价值，尽管这个社区提供了压倒性的支持。

上周我一直在研究 DI 并在我的代码中实现，这并不难，只是耗时。但是我仍然看不到解耦和单元测试的好处。相反，它似乎使代码更难理解，编写时间更长，并且可能存在性能问题。在我浪费时间实施 DI 之前，我对正在解决的以下问题感兴趣。

1) 解耦的好处？我看不出 DI 如何降低代码的依赖性。代码本质上需要相互依赖才能工作。DI 只是将此依赖项移动到您看不到它的另一个区域。例如，假设我有一个调用另一个静态方法的方法。

```
class User {

// Static Dependency //
function process_registration() {
    if(Form::validate($_POST['email'])) {
        Message::send_message("Registration Complete");
    }
}

// Dependency Injection //
function __construct($form, $message) {
    $this->form = $form;
    $this->message = $message;
}
function process_registration() {
    if($this->form->validate($_POST['email'])) {
        $this-message->send_message("Registration Complete");
    }
}
} 
```

DI 不会改变对和类`process_registration`的依赖。即使将它们作为属性注入到“用户”类中，是否*仍然依赖*于其类属性来工作？此外，如果我有一个将属性注入“用户”类的容器，该方法是否*也*依赖于容器来实例化其类？假设我将来将“process_registration”重构为另一个类，或者将其重用于不同的项目。无论是否使用 DI，该方法都将停止工作，因为可能不存在相同的类属性和注入容器。`Form``Message``process_registration`

 **2) 代码可读性？从上面的示例可以看出，该`process_registration`方法所需的代码现在增加了一倍。如果考虑到每次实例化新类或每次修改类方法时都需要修改的 Container 类，则增加一倍以上。除此之外，代码现在不太直观。`$database`、`$form`和等属性如何`$message`与 a 相关`User`？代码也不太优雅。以前，我的静态方法是`!Form::validate()`，两个字。现在，它`$this->form->validate()`长了 30%。这会影响我注入到类中的所有方法。因此，现在当我查看一页代码时，它会`$this->`重复一百次`$this->`，`$this->`而不是立即描述性的静态方法。而不是`$user=new User($user_id);`现在`ioc::get('user')->newUser($user_id);`. 我的观点是 DI 鼓励非 PHP 标准的惯用代码。

3) 更好的性能？DI 鼓励实例化可能永远不会使用的对象（例如，当验证失败或抛出错误时），而不是在准备好使用时调用方法 Just In Time。如果这些对象有巨大的库并且负载很重（例如 PHPExcel），这可能是一个性能问题。解决这个问题的方法是什么？

4）单元测试？中小型项目是否需要代码测试？现在，当我的代码中有错误时，PHP 会通知我。它们通常很容易通过检查 error_log 来查明和修复。如果我将来需要扩大我的项目，这会是一个问题吗？如果没有，什么时候需要 DI 进行测试？

由于上述原因，我发现没有必要在我的项目中实现 DI。但是，我对何时何地有必要实施感兴趣，以便我可以适当地实施。请给出你自己的详细例子和推理支持。我对其他文章的链接不感兴趣，因为它们可能很不清楚。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:05:36.770

1）假设您想更改表单类名称。如果您使用 DI，那么在容器中注册 Form 类时，您只需要在一处进行更改。

使用 DI 进行单元测试更容易，因为您已经解耦了组件。您可以分别测试 User、Message 和 Form 类。在您的示例中，如果没有 Message 和 Form 类，您将无法测试 User 类。

2）可读性与函数/可变长度无关。DI 提高了可读性，因为您可以通过查看构造函数清楚地看到在某些类中如何以及使用哪些依赖项。

3）我不知道不允许共享对象的单个 DIC - 仅实例化一次并应请求（延迟加载）。

4) 见 1。**

# algorithm - 在 Ukkonen 算法构造的隐式后缀树中搜索

> ID：14274154
> 
> 赞同：3
> 
> 时间：2013-01-11T08:18:04.757
> 
> 标签：algorithm, suffix-tree

我遇到了一个问题，它需要一个数据结构来保存字符串 S 并允许我：

1.  在 O(|W|) 时间内检查单词 W 是否是 S 的子词
2.  在 O(|U|) 时间内找到 S 的最长后缀，它也是给定单词 U 的前缀
3.  在 O(|K|) 时间内在 S 的末尾追加字符串 K

我发现由 Ukkonen 算法构建的[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)是我正在寻找的。算法被描述为[“后缀树的在线构建”](http://www.cs.helsinki.fi/u/ukkonen/SuffixT1withFigs.pdf)，我对“在线”部分有一个问题：插入每个字符后，算法构造一个隐式后缀树，可以在最后一步转换为显式。但是如果我想在这一步之前使用隐式树进行搜索呢？“在线”表明在插入分析字符串的任何前缀之后是可能的，但我找不到任何在隐式树上运行的最简单算法的示例。

我的问题是：如何在**隐式**后缀树中搜索字符串？

编辑：我接受了一个很好的答案来解决我的问题，但同时我设法找到了一个更简单的解决方案 2：在长度为 S 的后缀中搜索 U 就足够了 |U| 使用KMP算法，最后匹配的字符数将是字符串重叠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:39:01.803

隐式后缀树和显式后缀树只有一个区别：它不包含字符串结尾标记（并且不包含与这些字符串结尾标记对应的任何分支）。

这意味着在哪里搜索子字符串没有区别 - 在隐式后缀树或显式后缀树中。由于隐式后缀树包含较少不必要的分支，这保证了子字符串搜索的更有效（但仍然是线性时间）算法。

所以要求＃1 自动满足：只需从根搜索后缀树并选择与给定单词匹配的分支。

至于要求#2，我认为，你不能用相同的隐式后缀树来满足它。因为您需要字符串结尾标记来处理后缀。

但是您可以`O(|U|)`使用给定 word 的单独（显式）后缀树及时完成`U`。诀窍是在构建它的后缀树之前反转这个词。要找到它的最长后缀`S`也是 的前缀`U`，请使用这个单独的后缀树来找到反向字符串的最长前缀，`S`它也是反向字符串的后缀`U`。只需从根开始搜索此后缀树，选择与反向字符串匹配的分支`S`，并记住带有字符串结束标记的最新节点。然后反转从根到该节点的路径上的字符串（或确定该路径的长度并从尾部复制相同长度的子字符串`S`）。

# haskell - Haskell中的终端迷宫游戏

> ID：14274158
> 
> 赞同：2
> 
> 时间：2013-01-11T08:18:39.703
> 
> 标签：haskell, ansi

我正在考虑在 Haskell 中实现一个迷宫游戏 - 迷宫将是 ASCII 符号，我希望它是彩色的 - 例如墙壁是蓝色的“#”，硬币是黄色的“o”等等，我正在查看[System-Console-ANSI](http://hackage.haskell.org/packages/archive/ansi-terminal/0.5.0/doc/html/System-Console-ANSI.html)。

我想问一下这个数据包是否有可能做到这一点，我在想当一个动作发生时如何刷新迷宫（例如它可以有硬币，用'o'表示，当英雄踩到一枚硬币，他拿到了它，它应该消失了）- 清理屏幕并再次打印迷宫会顺利完成这项工作吗？

如果系统控制台 ANSI 不能完成这项工作，你能给我一些想法和数据包吗？非常感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T08:40:49.463

[我建议你在http://hackage.haskell.org/package/vty-ui](http://hackage.haskell.org/package/vty-ui)和[http://jtdaugherty.github.com/vty-ui/](http://jtdaugherty.github.com/vty-ui/)看看 vty-ui 。有一个非常好的用户手册。我只玩过一点，但我认为它非常适合您的应用程序。

# android - 对于 Android google maps API V2，如何设置标记的 zindex？

> ID：14274162
> 
> 赞同：5
> 
> 时间：2013-01-11T08:18:55.410
> 
> 标签：android, google-maps-api-2

我基本上是想弄清楚如何在一组标记中使标记被选中而不单击它？还是把它带到顶部？我似乎找不到任何 API 方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T09:49:59.603

没有。不幸的是， `Marker`Android 版 Google Map API V2 中的 s 没有 z 索引。他们处理自己的抽奖顺序。

# eclipse - 在 Eclipse 中编辑/保存 Facelets 文件非常慢

> ID：14274165
> 
> 赞同：1
> 
> 时间：2013-01-11T08:19:38.507
> 
> 标签：eclipse, performance, jsf, editor, facelets

我在处理 Facelets 文件时遇到了非常缓慢的问题。我以前在 Eclipse 中使用过 Facelets 文件，但它是：

*   较旧的 Eclipse（3.4 版）
*   较旧的 xhtml 格式（从 1.8 版开始，Icefaces）

然而我正在与：

*   新的 Eclipse（在 IBM RAD 中）
*   新的 xhtml 格式（2.0，PrimeFaces）
*   视窗 7、64 位

很多事情都可以改变。它可能是新版本中的 Eclipse 错误，也可能是 XSD 模式中的错误（IceFaces 的 XSD 模式失败，AFAIR，导致标签提示不起作用）。但是现在它非常慢（每次保存可能需要十几秒），以至于让正常工作变得非常困难......

如何摆脱这个性能问题？也许应该禁用 xsd 验证？

# xslt - 使用 xpath-default-namespace 定义用于 XSL XPaths 的默认命名空间

> ID：14274166
> 
> 赞同：12
> 
> 时间：2013-01-11T08:19:40.923
> 
> 标签：xslt, xpath, xml-namespaces

我有这个简单的 xml 文档：

```
<?xml version='1.0' encoding='UTF-8'?>
<registry xmlns="http://www.iana.org/assignments" id="character-sets">
     <registry id="character-sets-1">
       <record>
         <name>ANSI_X3.4-1968</name>
      </record>
     </registry>
</registry> 
```

当我使用这个 xsl 时，我可以提取名称：

```
<?xml version="1.0" encoding="UTF-8"?>
  <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="http://www.iana.org/assignments" version="1.0">
  <xsl:template match="/my:registry">
      <xsl:copy-of select="//my:record/my:name"/>
  </xsl:template>
</xsl:stylesheet> 
```

但是，如果我在 xsl xpath-selectors 中省略了命名空间，则不会得到任何输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="http://www.iana.org/assignments" xpath-default-namespace="http://www.iana.org/assignments" version="1.0">
  <xsl:template match="/registry">
       <xsl:copy-of select="//record/name"/>
  </xsl:template>
</xsl:stylesheet> 
```

我认为 xpath-default-namespace 是为了解决问题。我错过了什么？

如果库版本很重要，我有

libexpat1 (>= 1.95.8)

libxerces-c3.1

libxml2 (>= 2.7.4)

libxslt1.1 (>= 1.1.25)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-11T08:30:07.520

不幸`xpath-default-namespace`的是 XSLT 2.0 的一个特性。您需要在您的`xpath`in 中重复命名空间或别名`xslt 1.0`

参考：[Jenni Tennison](http://www.jenitennison.com/blog/node/36)和[IBM](https://www.ibm.com/developerworks/library/x-xsltmistakes/#list4)

# node.js - Node.js 在处理多个用户时优雅地退出异常

> ID：14274167
> 
> 赞同：0
> 
> 时间：2013-01-11T08:19:42.207
> 
> 标签：node.js, exception, exception-handling, concurrency, transactions

到目前为止，我已经阅读了在未捕获的异常时最好重新启动 node.js 服务器。但是我担心的是，例如，当多个用户使用同一个 node.js 服务器并且针对一个用户的请求引发异常时，服务器将关闭，从而结束其他用户正在进行的任何进程。一个例子是，当一个用户处于关键事务的中间时，会为另一个用户抛出未捕获的异常，从而停止服务器并使事务不完整，甚至不会以某种方式回滚。

在这种情况下，考虑到多个用户，处理异常的最佳方式/实践是什么

问候， 米琳达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:44:26.767

未捕获异常的进程不会重新启动服务器，它允许 Node 继续执行，因此其他用户将继续任何事务或处理，就好像什么都没发生一样。但是，请注意此方法，您可以使用它，但代码将处于未知状态，它将从引发错误的地方继续执行。

# windows - 从 dll 中搜索字符串的进程内存

> ID：14274172
> 
> 赞同：0
> 
> 时间：2013-01-11T08:20:07.323
> 
> 标签：windows, memory, process

我的解决方案只需要在 Win7/8-64bit 中。一些程序（我没有源，32 位）加载一些 dll。这个dll之一是我的。我想用所有加载的 dll 搜索整个进程内存中是否存在某个字符串（我想在所有情况下更改该字符串的一个字节）

我知道有 WinAPI ReadProcessMemory，但由于我的 dll 在同一个地址空间中，也许我可以像那样读取它的内存。

在 HxD 程序中打开进程 RAM 显示从 0x10000 到 0x21000 的地址是可读的。然后 0x41000 不可​​读等。我已经对其进行了测试，当从 dll 读取 0x4100 时，它给了我读取内存错误。

是否可以在不使用 ReadProcessMemory 的情况下读取所有过程数据？如何知道哪些地址是可读的？

# ruby-on-rails - 如何使用载波从外部将文件保存到模型？

> ID：14274178
> 
> 赞同：1
> 
> 时间：2013-01-11T08:20:41.647
> 
> 标签：ruby-on-rails, ruby, file-upload, carrierwave

我有模型：

```
class RealtyPhoto < ActiveRecord::Base
  attr_accessible :name, :photo

  mount_uploader :photo, RealtyPhotoUploader

  belongs_to :realty_object
end 
```

和上传者：

```
class RealtyPhotoUploader < CarrierWave::Uploader::Base

  include CarrierWave::RMagick

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  def default_url
    [version_name, "/assets/default-flat.jpg"].compact.join('_')
  end

  def extension_white_list
    %w(jpg jpeg gif png)
  end
end 
```

我在我的代码中写了这样的内容：

```
require 'open-uri'

object = RealtyObject.last

photo = RealtyPhoto.new

photo.photo = open('http://milushov.ru/bg.jpg').read

object.realty_photos << photo 
```

我在那条线上得到一个错误：

```
 photo.photo = open('http://milushov.ru/bg.jpg').read
ArgumentError: string contains null byte
from /home/roma/.rvm/gems/ruby-1.9.3-p327@miel/gems/carrierwave-0.7.1/lib/carrierwave/sanitized_file.rb:113:in `expand_path' 
```

有人知道如何从外部下载和保存文件吗？（当我从页面上的表单中保存文件时 - 一切正常）。也许使用 CarrierWave 上传器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:08:33.290

Carrierwave 从远程 url 上传图像，`remote_column_name_url`在您的情况下 使用`photo.remote_photo_url = "url"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T12:31:10.170

您似乎忘记了关闭文件句柄。关闭文件可能会使您的应用程序正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T12:44:39.710

你也可以用另一种方式来做。更有效的是 model[:name] = filename model.save surl = model.photo.url FileUtils.copy(filesrc,surl,derefrence=true)

这种方法基本上可以避免您将文件复制到一个位置，并且在保存时将其复制到另一个位置十

# macos - 关于使用 Developer ID 对 Mac App 进行代码签名的问题

> ID：14274180
> 
> 赞同：7
> 
> 时间：2013-01-11T08:20:52.597
> 
> 标签：macos, code-signing

我有几个关于使用 Developer ID 签署 Mac App 的问题：

首先，我正在开发一个使用 GateKeeper 的项目。所以我必须（？）使用开发人员 ID 签署我的应用程序。

1.  我是否需要配置文件才能使用 Developer ID 进行签名？在构建设置选项卡中，开发者 ID 认证标记为`Identities without Provisioning Profiles`。在 Mac Provision Portal 中环顾四周，我发现没有地方可以生成配置文件来匹配 Developer ID 证书而不是提交证书。那么我是否需要配置文件才能使用 Developer ID 进行签名？

2.  归档我的应用程序后，当我在管理器中选择导出开发者 ID 签名的应用程序时，我的开发者 ID 认证标有黄色警告图标。但我仍然可以选择证书并签名。可以吗？

3.  签署我的应用程序后，我曾经在此之前使用 runed`sudo spctl -a -v MyApp.app`测试我的应用程序。`sudo spctl --master-enable`结果如下：

    ```
    EIM.app: rejected
    source=Developer ID 
    ```

这种拒绝是否与问题 2 中的警告有关？

这是我第一次使用 Developer ID 分发 Mac App，感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:23:16.423

回复：配置配置文件和 DeveloperID——它们是不必要的。您应该能够在**Build Settings的****Code Signing Identity**部分的*自动*部分中接受您的 DeveloperID 。如果不能，您的密钥可能丢失，或者包含该信息的数据库可能存在其他问题。

 ****首先，进入 Keychain Access 并验证您的 DeveloperID 证书是否具有与之关联的随附私钥（这将在披露三角形下方可见）。如果没有，那么您应该四处查看是否在任何地方保存了与该证书相关的密钥，因为如果您找不到并重新导入它（例如，从 Xcode 导出的开发人员配置文件中），您将需要撤销并重新颁发证书，因为无法对其进行签名。

其次，4.6.1 中存在一个已知错误，它可能会损坏包含来自开发人员门户的信息的缓存数据库。没有具体迹象表明此行为可能是由此问题引起的，但在执行下一步之前，您可能想尝试一下。基本上，您将需要退出 Xcode，移到一边（或删除）`~/Library/Developer/Xcode/connect1.apple.com 4.6.1.db`（是的，该文件名中有一个空格），重新启动 Xcode，转到**管理器**并**刷新**您的配置文件和证书。

如果这不起作用，您可能需要考虑撤销您的开发者 ID。

**警告**如果您已成功分发带有证书的代码，请在访问 Apple 的网站 ( [https://developer.apple.com/support/technical/certificates/](https://developer.apple.com/support/technical/certificates/) ) 并彻底了解撤销对已发布代码的影响之前，不要撤销它开发者 ID。具体来说，已安装的软件将继续工作，但用户将无法安装/重新安装使用原始证书签名的二进制文件。

如果您从未使用证书成功分发代码（或者如果您的密钥已不可恢复地丢失），您可能需要访问门户并撤销然后重新颁发您的 Developer ID 证书。撤销后，您可以通过请求新证书来创建新证书。****

# javascript - 如何在谷歌浏览器中打印 pdf？

> ID：14274181
> 
> 赞同：7
> 
> 时间：2013-01-11T08:20:56.573
> 
> 标签：javascript

我有一个与 button 关联的 pdf 文件。当我单击按钮时，我想打印 pdf。这就是我的按钮的编码方式：

```
<input type="submit" class="btn-red" value="Print"
name="Submit" id="printbtn"
onclick="printPDF('http://www.irs.gov/pub/irs-pdf/fw4.pdf')" /> 
```

现在我的打印功能是这样的：

```
 function printPDF(pdfUrl)
    {

    if ((navigator.appName == 'Microsoft Internet Explorer') ) 
    window.print(pdfUrl,"_self");
    else
    {
    var w = window.open(pdfUrl,"_self");
    w.print();
    w.close();
    }
    } 
```

问题是，它在 IE 和 Fire fox 中运行良好，但在 chrome 中无法运行。在 ie 和 Firefox 中，它打开 xps 打印机选项，但在 chrome 中，它只是打开一个新的打印窗口，带有 div 的打印预览，而不是 pdf 。但我希望在这里打开 xps 选项。

**编辑：**在 chrome 中，当我尝试打印时，只有 html 元素作为预览而不是 pdf。我正在使用 chrome 版本：20.0.1132.57

我怎样才能绕过这个特殊性？请帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-07T22:51:20.367

这对我有用，不需要主机 HTML 文件。关键是等待onload：

对于这样的链接：

```
<a class="print-pdf-link" href="/your/pdf.pdf">Print PDF</a> 
```

我使用了javascript：

```
$('a.print-pdf-link').click(function () {
    var w = window.open($(this).attr('href'));

    w.onload = function () {
        w.print();
    };

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T15:06:05.627

我必须做同样的事情，我使用了一种不同的方法，一种对我来说同时在 Chrome 和 Firefox 中工作的方法。

我的解决方案涉及一个 print.html 帮助文件，它接收 PDF 文件的 url 作为 GET 类型参数，然后将 pdf 加载到 iframe 中。然后它继续检查pdf是否已完全加载（将检查绑定到`onload`事件不起作用）并在完成时触发打印方法。

这里：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

    <title>Print Page</title>

    <meta name="title" content="Print" /> 

    <script>

    (function (window, document, undefined) {

        var printy = {

                urlGET: function (param) {

                    var params = document.URL.split('?');

                    if(params.length > 1) {
                        params = params[1].split('&');

                        for (var  i = 0, len = params.length; i < len; i++) {
                            if (params[i].split('=')[0] === param) {
                                return params[i].split('=')[1];
                            }
                        }
                    }

                    return null;
                },

                init: function () {

                    var self = this;

                    window.onload = function () {

                        var src = self.urlGET('path');

                        //creating an iframe element
                        var ifr = document.createElement('iframe');
                        document.body.appendChild(ifr);

                        // making the iframe fill the viewport
                        ifr.width  = '100%';
                        ifr.height = window.innerHeight;

                        // continuously checking to see if the pdf file has been loaded
                        self.interval = setInterval(function () {

                            if (ifr.contentDocument.readyState === 'complete') {
                                clearInterval(self.interval);
                                // doing the actual printing
                                ifr.contentWindow.print();
                            }
                        }, 100); 

                        ifr.src = src;
                    }
                }
            }

            printy.init();

    })(window, document, undefined);
    </script>

</head>
<body>
</body>
</html> 
```

不过，此解决方案并未在 IE 上进行测试。我们在工作中使用 Mac，所以这不是一个选择。

为了进行打印，我通过调用这样的 URL 来使用它：`http://example.com/print.html?path=docs/myfile.pdf`

# iphone - 如何将 DTCoreText 集成到新项目中？

> ID：14274183
> 
> 赞同：1
> 
> 时间：2013-01-11T08:21:03.273
> 
> 标签：iphone, ios, objective-c, core-text

```
xcode 4.5.2

DTCoreText1.1 
```

我尝试了很多方法，但都失败了。有人有这方面的经验吗？

如何将 DTCoreText 集成到新项目中？

我将我的文件上传到 www.uethink.com/test/DTCoreTextStudy.zip，任何人都可以编辑它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:49:59.720

尝试使用 CocoaPods，集成将非常容易。不再包含问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T11:18:00.120

对 DTFoundation 有一些依赖，

使用 Cocoapods 或 github 获取 DTCoreText

[https://docs.cocoanetics.com/DTCoreText/docs/Setup%20Guide.html](https://docs.cocoanetics.com/DTCoreText/docs/Setup%20Guide.html)

# c# - 实体框架 - 代码优先映射问题

> ID：14274185
> 
> 赞同：0
> 
> 时间：2013-01-11T08:21:10.650
> 
> 标签：c#, entity-framework, ef-code-first

是否可以基于特定列值进行外键映射。

我有以下实体。

```
public class Controller
{
    [Key]
    public int Id { get; set; }

    public string Name { get; set; }

    public virtual List<ControllerDevice> ActiveDevices { get; set; }
    public virtual List<ControllerDevice> TamperedDevices { get; set; }
    public virtual List<ControllerDevice> IgnoredDevices { get; set; }
}

public class ControllerDevice
{
    public int Id { get; set; }
    public DeviceStatus Status { get; set; }

    public int ControllerId { get; set; }
    public int NetworkDeviceId { get; set; }

    public virtual Controller Controller { get; set; }
    public virtual NetowkDevice NetowkDevice { get; set; }
}

public class NetowkDevice
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
}

public enum DeviceStatus
{
    Active,
    Tampered,
    Ignored
} 
```

是否可以基于和列表自动填充`ActiveDevices`，或者我必须为每个列表创建三个不同的表。IE和. _`TamperedDevices``IngoredDevices``ControllerDevice` `DeviceStatus``ActiveControllerDevice``TamperedControllerDevices``IgnoredControllerDevices`

如果您需要进一步解释，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:31:31.213

使用单个设备集合：

```
public class Controller
{
    [Key]
    public int Id { get; set; }

    public string Name { get; set; }

    public virtual List<ControllerDevice> Devices { get; set; }
} 
```

...并过滤它，当您需要处理或显示具有特定`Status`值的设备时：

```
controller.Devices.Where(d => d.Status == DeviceStatus.Active); 
```

每个设备状态和/或设备层次结构的几个表（理论上，您可以通过 TPH 继承解决此问题）是一种通向地狱的方法，因为`ControllerDevice`您将获得三种实体类型（和）`ActiveControllerDevice`，而不是具有状态的单个实体，与模型不对应。`TamperedControllerDevice``IgnoredControllerDevice`

设备不会更改状态，而是更改其*类型*，而您不能以简单的方式做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:38:51.097

是的，你可以这么做。在 Entity Framework 5、.Net Framework 4.5 中引入了枚举支持。在 Entity Framework 中，枚举可以具有以下基础类型：Byte、Int16、Int32、Int64 或 SByte。

你可以像这样过滤：

```
context.ControllerDevices.Where(d => d.Status == DeviceStatus.Active); 
```

更多信息：http: [//msdn.microsoft.com/en-us/data/hh859576.aspx](http://msdn.microsoft.com/en-us/data/hh859576.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:43:50.173

```
public class TestContext : DbContext
{
   public TestContext()
   {
      Configuration.AutoDetectChangesEnabled = true;
      Configuration.LazyLoadingEnabled = true;
      Configuration.ProxyCreationEnabled = true;
      Configuration.ValidateOnSaveEnabled = true;
   }

   public virtual DbSet<NetowkDevice> NetowkDevices{ get; set; }
   public virtual DbSet<ControllerDevice> ControllerDevices{ get; set; }
   public virtual DbSet<Controller> Controlleres{ get; set; }
} 
```

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/d0443029-2175-4bde-a834-4f8dbf313201/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/d0443029-2175-4bde-a834-4f8dbf313201/)

[我应该使用实体框架 4.1 和 MVC3 启用或禁用动态代理吗？](https://stackoverflow.com/questions/7111109/should-i-enable-or-disable-dynamic-proxies-with-entity-framework-4-1-and-mvc3)

# mysql - 当 SQL 中的 case..when 语句中的单个条件为真时，我可以执行多个表达式吗？

> ID：14274187
> 
> 赞同：2
> 
> 时间：2013-01-11T08:21:14.260
> 
> 标签：mysql, sql, cognos, cognos-8

我想在 SQL 中的 case..when 语句中单个条件为真时显示多个语句。

例如：

```
case when (condition is true) then 
print "A" 
print "B"
.
.
.
.
print "Z"
when (condition2 is true) then 
print "Z" 
print "Y"
.
.
.
.
print "A

end 
```

谁能给我提供它的确切语法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:44:16.027

如果您的条件很复杂，您可以将其移至子查询。这样您就不必为每一列重复它：

```
select  case when Condition = 1 then 'A' else 'B' end
,       case when Condition = 1 then 'C' else 'D' end
,       case when Condition = 1 then 'E' else 'F' end
,       ...
from    (
        select  *
        ,       case
                when ... complex condition ... then 1 
                else 0 
                end as Condition
        from    YourTable
        ) as SubQueryAlias 
```

另一种选择是与 CTE 的联合（并非在所有数据库中都可用。）这允许您编写不带 的表达式`case`，并且由于 CTE，条件不会重复。

```
;       with CteAlias as
        (
        select  *
        ,       case
                when ... complex condition ... then 1 
                else 0 
                end as Condition
        from    YourTable
        )
select  'A', 'C', 'E'
from    CteAlias
where   Condition = 1
union all
select  'B', 'D', 'F'
from    CteAlias
where   Condition = 0 
```

# php - 棘手的 MySQL 查询

> ID：14274190
> 
> 赞同：1
> 
> 时间：2013-01-11T08:21:37.713
> 
> 标签：php, mysql

我有一个包含三列（KEY、personID、personID）的兄弟姐妹表

这里作为一个例子：

```
0|1|2
1|2|3
2|1|4
3|4|5
4|1|6
5|5|7 
```

请注意，所有 ID 为 1 到 5 的人都是兄弟姐妹。

现在，在确保（在所有情况下）所有其他兄弟姐妹保持兄弟姐妹身份的同时，删除一个兄弟姐妹的最佳方法是什么。

一个棘手的案例是删除兄弟姐妹`ID=4`. 如果仅使用 SQL 无法做到这一点，那么最好的方法是使用 PHP + MySQL 来做到这一点。

我想出的代码很长而且看起来效率很低。如果有人有任何其他想法，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:32:23.700

您当前布局的问题是您基本上有几个节点（人）和它们之间的一些联系。这些债券伴随着*隐含*的推论，即“如果 A 与 B，B 与 C，那么 A 与 C”，这对关系数据库不起作用。

理想情况下，您需要两个方向的所有键。然后，您可以根据需要安全地删除人员。

# python - 删除范围为 0.01 到 .99 的所有浮点数

> ID：14274195
> 
> 赞同：1
> 
> 时间：2013-01-11T08:22:26.317
> 
> 标签：python

我有一个简单的 python 程序

除法后，它显示最终值，但我不想显示 .01

```
from __future__ import division

number = int(133)
output = float(0)
divideNumber = int(1)

stop = false

while stop == false
   halfNumber = number / 2
  output =  number / divideNumber 
  output = round(output, 2)

  if ".0" in str(output):
    if "0.1" in str(output) or "0.2" in str(output ) or.... "0.9" in str(output): 
      #Do Nothing
  else: 
      #Do Nothing
    else: 
      print str(number) + " / " + divideNumber + " = "str(output)

  divideNumber += 1

  if divideNumber < halfNumber:
    break
  else: 
    #Do Nothing
print "Goodbye" 
```

如果我运行它，结果如下：

```
133 / 1 = 133.0
133 / 7 = 19.0
133 / 11 = 12.09
133 / 12 = 11.08
133 / 19 = 7.0
133 / 22 = 6.05
133 / 33 = 4.03
133 / 43 = 3.09
133 / 44 = 3.02
133 / 64 = 2.08
133 / 65 = 2.05
133 / 66 = 2.02 
```

再见

我的预期结果是

```
 133 / 1 = 133.0
 133 / 7 = 19.0
 133 / 19 = 7.0
 Goodbye 
```

我的“if”语句错了吗？我没有收到任何错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:25:38.843

*“我有一个简单的 python 程序”*

这不是一个简单的程序。

如果您想用一位小数显示结果，请使用以下命令：

```
print '{:.1f}'.format(133./19.) 
```

这打印

```
7.0 
```

如果你想测试一个**整数**是否能整除另一个：

```
if not x%y:
    # y divides x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T08:30:04.943

如果我说得对，您需要跳过所有非整数数字。这个检查应该是这样的：

```
from math import floor

if (output - floor(output))>0: # skip
    continue 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T08:26:37.040

您可以像这样定义一个函数，就像`133.0==133`是`True`: :

```
In [1]: def func(x,y):
   ...:     a=float(x)/float(y)
   ...:     return int(a)==a
   ...: 

In [2]: func(133,1)
Out[2]: True

In [4]: func(133,11)
Out[4]: False

In [5]: func(133,12)
Out[5]: False

In [6]: func(133,19)
Out[6]: True 
```

进口`division` 自`__future__`：

```
In [14]: from __future__ import division

In [15]: def func(x,y):
    return x/y == int(x/y)
   ....: 

In [16]: func(133,1)
Out[16]: True

In [17]: func(133,11)
Out[17]: False

In [18]: func(133,12)
Out[18]: False

In [19]: func(133,19)
Out[19]: True 
```

# c# - RadGrid 中的 DetailTables 未扩展

> ID：14274204
> 
> 赞同：0
> 
> 时间：2013-01-11T08:23:17.017
> 
> 标签：c#, asp.net, telerik, radgrid

我基本上有一个 RadGrid，在 RadGrid 里面是一个 DetailTable。现在 DetailTable 没有展开，但是当我调试 DetailTableDataBind 事件时，我看到有数据分配给 DataSource。如果我注释掉 DetailTableDataBind 中的所有内容，那么 DetailTable 会展开，但显然不会有任何行数据，因为我已经注释掉了该事件。基本上，我希望 DetailTable 显示在 RadGrid 内部使用的列，在本例中是“注释”列。

为什么当我尝试分配 DetailTable 不会扩展的 DataSource 时？

以下是一些代码片段。

aspx 页面

```
<telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
        <AjaxSettings>
            <telerik:AjaxSetting AjaxControlID="MemberCommentsGrid">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="MemberCommentsGrid" />
                </UpdatedControls>
            </telerik:AjaxSetting>
        </AjaxSettings>
    </telerik:RadAjaxManager>

<telerik:RadGrid ID="MemberCommentsGrid" runat="server" AutoGenerateColumns="false"
     AllowPaging="true" PageSize="20" ShowStatusBar="true" OnDetailTableDataBind="MemberCommentsGrid_DetailTableDataBind" Skin="WebBlue">
    <ClientSettings AllowExpandCollapse="true">    
    </ClientSettings>
    <MasterTableView AllowMultiColumnSorting="true" DataKeyNames="MemberCommentID">
        <Columns>            
            <telerik:GridBoundColumn DataField="MemberCommentID" HeaderText="Comment ID">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Comment" HeaderText="Comment Text">
            </telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="DateAdded" HeaderText="Date Added">
            </telerik:GridBoundColumn>                
            <telerik:GridBoundColumn DataField="UserID" HeaderText="Comment Created By">
            </telerik:GridBoundColumn>       
        </Columns>
        <DetailTables>
            <telerik:GridTableView Name="MemberCommentsGrid" DataKeyNames="MemberCommentID" runat="server" AutoGenerateColumns="false">
                <Columns>
                <telerik:GridBoundColumn DataField="Comment" HeaderText="Full ID">
                    </telerik:GridBoundColumn>
                    <telerik:GridBoundColumn DataField="Comment" HeaderText="Full Comment">
                    </telerik:GridBoundColumn>
                </Columns>
            </telerik:GridTableView>
        </DetailTables>
    </MasterTableView>
    </telerik:RadGrid> 
```

cs页面

```
protected void Page_Load(object sender, EventArgs e)
    {
        #region Getting DataTable data
        string memberName = string.Empty;                       

        if (!IsPostBack)
        {
            if (Request.QueryString["MemName"] != null)
                memberName = Request.QueryString["MemName"].ToString();
            else
                Response.Redirect("../Account/Login.aspx");

            using (AcquirerPortal.Data.MemberComments mc = new AcquirerPortal.Data.MemberComments())
            {
                dtMemberComments = mc.GetMemberComments(Members.GetMemberIDByMemberName(memberName));
            }

        }
        #endregion

        MemberCommentsGrid.DataSource = dtMemberComments;
        MemberCommentsGrid.DataBind();
    }

    protected void MemberCommentsGrid_DetailTableDataBind(object source, Telerik.Web.UI.GridDetailTableDataBindEventArgs e)
    {
        e.DetailTableView.DataSource = e.DetailTableView.ParentItem["Comment"].Text;
    } 
```

如果有更好的方法可以做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:32:37.090

也许评论字段需要先转换为列表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:57:45.377

好吧，这背后的原因是 DetailTable 的名称与 RadGrid 的 ID 相同。我刚刚更改了 DetailTable 的名称，现在它可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T17:14:47.880

这是在 RadGrid 上扩展详细信息表的另一种方法。

```
// expand all of the rows on the page

int counter = 0;

int NoOfRows = Pages.PAPage.ApptsTableGrid.Rows.Count;

for (i=0;i<NoOfRows;i++)

{ 

    HtmlTableRow gRow = Pages.PAPage.ApptsTableGrid.Rows[counter + i];

    foreach(HtmlTableCell gCell in gRow.Cells) 

    {    

        if(gCell.CssClass=="rgExpandCol")

        { 

            gCell.MouseClick();  

            ActiveBrowser.RefreshDomTree();

            System.Threading.Thread.Sleep(1000); 

        }  

    }

    counter++; 

} 
```

# jquery - 条件选择显示/隐藏项目

> ID：14274210
> 
> 赞同：0
> 
> 时间：2013-01-11T08:23:49.943
> 
> 标签：jquery, selection, parent-child

我有这个条件选择，它通常工作得很好，但我想做一些小的调整。在这里看我的[小提琴](http://jsfiddle.net/tWykv/)。

如果您选择一个品牌，例如 Apple，您可以选择两种型号。如果您选择一个模型，它工作正常。

但是（a）如果您再次单击“选择型号”（仍然在第一个框中选择“Apple”），我想像以前一样显示所有 Apple 项目。

(b) 如果您选择其他 Apple 型号，则不会发生任何事情。

我想解决方案在`if ($currentSelection != "showall") {}`-statement 中，但我无法让它工作。

谁能指出我正确的方向？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:47:55.510

我已经更新了你的[jsfiddle](http://jsfiddle.net/tWykv/2/)。

你缺少一些条件：

```
if ($currentSelection != "showall") {
  $options.each(function(){
    if($(this).is("#"+$currentSelection)) //Show match
      $(this).parent().parent().fadeIn();
  });
  $options.not("#" + $currentSelection).parent().parent().fadeOut(); //Hide don't match
} else if($currentSelection == "showall"){ //If 'Select model'
  $options.parent().parent().fadeIn();
} else {
  $options.children().filter("." + $selectprod.val()).fadeIn();
} 
```

如果选择了一个模型，您需要先显示所有选项，以便显示隐藏的选项。

# javascript - XMLHttpRequest 文件下载

> ID：14274212
> 
> 赞同：0
> 
> 时间：2013-01-11T08:23:59.793
> 
> 标签：javascript, jquery, html, ajax, xmlhttprequest

> **可能重复：**
> [如何从 XMLHttpRequest 获取进度](https://stackoverflow.com/questions/76976/how-to-get-progress-from-xmlhttprequest)

我正在尝试使用 xmlhttprequest 下载一个 1 mb 的文件，并检查下载时间以进行带宽测量。但是，以下代码只给了我来自服务器的响应时间。它不会等到所有文件加载完毕。

```
var start = new Date().getTime();
(function rec() {
var xmlHttp = new XMLHttpRequest();
xmlHttp.open('GET', "https://www.example.com/test/dummyFile1024kb", true);   
xmlHttp.setRequestHeader("Cache-Control", "no-cache");
xmlHttp.onreadystatechange = function () {
     if (xmlHttp.readyState == 4) {
         var total=(new Date() - start)            
         alert(total)    
        };
       xmlHttp.send(null);
    })(); 
```

我应该怎么做才能下载所有文件？欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:57:36.230

`xmlHttp.send(null);`不应该在你的`onreadystatechange`函数内部，而应该在它之后。在进行中的 XHR 请求上调用 send() 将导致未指定的行为，如果不是完全错误的话。它在您的 readystatechange 处理程序中的事实意味着您还有一些其他未显示的正在调用的代码`xmlHttp.send()`，否则该处理程序将永远不会被调用（并且您的警报将永远不会触发）。

即我认为你想要的是：

```
(function rec() {
  var start = new Date().getTime();
  var xmlHttp = new XMLHttpRequest();
  xmlHttp.open('GET', "https://www.example.com/test/dummyFile1024kb", true);   
  xmlHttp.setRequestHeader("Cache-Control", "no-cache");
  xmlHttp.onreadystatechange = function () {
   if (xmlHttp.readyState == 4) {
      var total=(new Date() - start)            
      alert(total)    
    };
  };
  xmlHttp.send(null);
})(); 
```

# android - 无法在我的 android 年龄计算器应用程序代码中拆分数月和数天

> ID：14274217
> 
> 赞同：0
> 
> 时间：2013-01-11T08:24:37.093
> 
> 标签：android, algorithm, date, time, calendar

我是android开发的新手，我正在尝试开发一个年龄计算器。使用我当前的代码，我能够正确找到年份和月份之间的差异，但日期不正确。我知道我做错了什么。但我无法弄清楚。我也使用了 jodatime api，但是当我使用它时，当我调用这个函数时我的应用程序关闭了，我无法理解我做错了什么。我的代码是：

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         mDateDisplay = (TextView) findViewById(R.id.showMyDate);        
            mPickDate = (Button) findViewById(R.id.myDatePickerButton);

            mPickDate.setOnClickListener(new View.OnClickListener() {
                @SuppressWarnings("deprecation")
                public void onClick(View v) {
                    showDialog(DATE_DIALOG_ID);
                }
            });

            dob_Year = c.get(Calendar.YEAR);
            dob_Month = c.get(Calendar.MONTH);
            dob_Day = c.get(Calendar.DAY_OF_MONTH);
// display the current date
            updateDisplay();
                }

    private void updateAge()
    {
        current_Year = c.get(Calendar.YEAR);
        current_Month = c.get(Calendar.MONTH);
        current_Day = c.get(Calendar.DAY_OF_YEAR);

        if (current_Day < dob_Day) {
            current_Month--;

            current_Day+=c.getMaximum(dob_Month);
           }
if (current_Month < dob_Month) {
            current_Year--;
            current_Month += 12;
        }
int ageYear=current_Year-dob_Year;
int ageMonths=current_Month-dob_Month;
int ageDays= current_Day-dob_Day;
 this.mAgeDisplay.setText(
                new StringBuilder()

                        .append(ageYear).append(" Years ")
                        .append(ageMonths).append(" Months ")
                        .append(ageDays).append(" Days "));
    }

    private void updateDisplay() {
        this.mDateDisplay.setText(
            new StringBuilder()
                    // Month is 0 based so add 1
                    .append(dob_Day).append("-")
                    .append(dob_Month + 1).append("-")
                    .append(dob_Year).append(" "));
    }
    private DatePickerDialog.OnDateSetListener mDateSetListener =
            new DatePickerDialog.OnDateSetListener() {
                public void onDateSet(DatePicker view, int year, 
                                      int monthOfYear, int dayOfMonth) {
                    dob_Year = year;
                    dob_Month = monthOfYear;
                    dob_Day = dayOfMonth;
                    updateDisplay();
                    updateAge();
                }
            };
            @Override
            protected Dialog onCreateDialog(int id) {
               switch (id) {
               case DATE_DIALOG_ID:
                  return new DatePickerDialog(this,
                            mDateSetListener,
                            dob_Year, dob_Month, dob_Day);
               }
               return null;
            } 
```

在此代码片段中，dob_ 变量从 datepicker 获取它们的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:11:49.607

首先，您应该以正确的方式设置任务。定义，这些“日子”是什么意思。显然，您希望获得年-月-日形式的日期差异。仅以天为单位的差异可以轻松计算 - 以秒为单位的时间戳差异除以 24*3600。

现在您需要从中减去整个月份和年份的天数。但它们的长度（全年和二月）各不相同。应该采取什么长度？日历月的长度根据日历设置。但那几个月的差异并没有与任何日历挂钩。例如，第一个日期以及差异的第一个月从 2 月 5 日开始。第一个月应该什么时候结束？5.同一日历年的三月？还是在 30 天内？31? 28？29？

在解决逻辑任务**之前**，您无法解决编程任务。在这里，我们都只能提出一些变体——我们不知道你真正需要什么。

刚才，在你定义任务之前，你不能说你的代码计算**正确**。

* * *

正如我可以通过代码猜测的那样，您接受“差异序列”中的月份长度等于“适当”日历月的长度，*以*这个“差异月份”结束。问题是，为了检测月份是否合适，您已经必须知道它的长度。

您必须详细而明确地以人类语言或图表设置计算“不同月份”长度的规则。您的问题是您正试图将非正式术语 - “年龄”形式化。并且不要忘记，即使你发明了一些形式化规则，也不意味着其他人会同意它并且会像你一样感受到它。

你可以很容易地计算一个人生活的整个公历日、月和年。但是不要使用“年龄”这个词，而是三个词：你活了几天，你活了整整几个月，你活了整整年。并做好准备，可能会有超过 12 个月和超过 31 天的时间。但结果将是**明确**的。

你可以像现在这样计算整年和几个月。但在这种情况下，“年龄”介于 28.Feb 和 28\. March 之间。三月将是一个月。你觉得这是一个正确的结果吗？你确定吗？你确定其他人也这么觉得吗？

如果您认为该代码显示了您的内心感受应该如何计算年龄，您可以简单地**将**您计算为“年龄”的内容定义为“年龄”。

**编辑：**

您在该行中有三个错误

```
current_Day+=c.getMaximum(dob_Month); 
```

首先，使用 getActualMaximum。其次，你应该取上个月的天**数**。第三，参数应该是 Calendar.Month。

请让这部分代码成为一个函数。计算两个日历日期之差的函数，作为参数给出。您绝对不需要全局字段，这是不好的做法 - 错误被隐藏了。当我使用您的代码时，我将它作为一个函数......并立即发现了错误的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:31:25.097

也许这个功能可以帮助：

```
public static long daysBetween(Calendar startDate, Calendar endDate) {  
  Calendar date = (Calendar) startDate.clone();  
  long daysBetween = 0;  
  while (date.before(endDate)) {  
    date.add(Calendar.DAY_OF_MONTH, 1);  
    daysBetween++;  
  }  
  return daysBetween;  
} 
```

此外，以下内容可能很有趣：[如何使用 java 计算两个日期之间的差异](https://stackoverflow.com/questions/3491679/how-to-calculate-difference-between-two-dates-using-java) 也学分转到：[http ://tripoverit.blogspot.nl/2007_07_01_archive.html](http://tripoverit.blogspot.nl/2007_07_01_archive.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:39:03.367

实现这一点最直接的方法是以毫秒为单位计算差异，然后向上转换：

```
long Milli=(EndDate.getTime() - startDate.getTime());
long Seconds=Milli/1000; 
long Days = Seconds/60L/60L/24L; 
```

# symfony - 为 symfony2 中的控制器操作寻找 @transaction

> ID：14274219
> 
> 赞同：3
> 
> 时间：2013-01-11T08:24:46.487
> 
> 标签：symfony, transactions, controller, doctrine

为了确保我的操作能够正确处理事务，我发现自己在控制器中一遍又一遍地重复此代码：

```
/**
 * @Route("/complete", name = "authentication_complete")
 */
public function completeAction(Request $request)
{
    $result = null;
    try {
        $this->getManager()->beginTransaction();

        $result = $this->doCompleteAction($request);

        $this->getManager()->flush();
        $this->getManager()->commit();
    } catch (\Exception $e) {
        // @codeCoverageIgnoreStart
        $this->getManager()->rollback();
        throw $e;
        // @codeCoverageIgnoreEnd
    }

    return $result;
}

public function doCompleteAction(Request $request)
{
    // do whatever you action is suposed to do
    return $response;
} 
```

我想要类似的东西`@ManageTransaction`。这将进入操作的注释并为我节省大量重复的代码。在一个完美的世界中，这也会以一种巧妙的方式处理控制器转发。

如果您了解 Java EE，这将类似于容器管理的事务。

对此有捆绑（或其他不错的解决方案）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:34:01.387

由于我没有找到解决方案，我决定创建一个。

PluessDoctrineTrxBundle完全符合我的要求[。](https://github.com/pluess/PluessDoctrineTrxBundle)您为您的操作添加注释，并且所有条令操作都包含在事务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T11:45:31.470

您可以使用 JMSAopBundle 在 Symfony2 中实现带有 AOP 的包装器。此链接中详细说明了这些步骤：

[http://jmsyst.com/bundles/JMSAopBundle#transaction-management](http://jmsyst.com/bundles/JMSAopBundle#transaction-management)

在示例中，作者获取了一个名为 @Transactional 的注解，类似于 nameshake Spring 的注解：

[http://docs.spring.io/spring-framework/docs/4.2.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations](http://docs.spring.io/spring-framework/docs/4.2.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)

# jquery - 单击元素时延迟 window.setInterval() 函数

> ID：14274220
> 
> 赞同：0
> 
> 时间：2013-01-11T08:24:50.787
> 
> 标签：jquery

这是我的代码：

```
window.setInterval(function(){
            if(cursor == number_of_images-1){
                cursor=-1;
            }
            cursor = cursor+1;
            var mar = cursor*940;
                    $("#innerslider").delay(1000).animate({"margin-left":-mar+"px"}, {duration: 1000, queue: true});

            }, 5000); 
```

它的工作是不断改变 的`margin-left`属性`css`，它工作正常。现在我想确保当点击页面上的某个元素时，上面的函数不会运行到接下来的五秒钟。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:29:10.593

使处理程序成为命名函数，并从开始间隔获取句柄，以便您可以停止它并重新启动它：

```
function intervalHandler(){
  if(cursor == number_of_images-1){
    cursor=-1;
  }
  cursor++;
  var mar = cursor*940;
  $("#innerslider").delay(1000).animate({"margin-left":-mar+"px"}, {duration: 1000, queue: true});
}

var timer = window.setInterval(intervalHandler, 5000);

$('#someElement').click(function(){
  window.clearInterval(timer);
  timer = window.setInterval(intervalHandler, 5000);
}); 
```

# php - 如何在 tcpdf 的每一页上放置表格的列标题？

> ID：14274224
> 
> 赞同：18
> 
> 时间：2013-01-11T08:25:19.717
> 
> 标签：php, tcpdf

用于打印pdf的代码如下：

```
class MYPDF extends TCPDF {

    // Load table data from file
    public function LoadData($file) {
        // Read file lines
        $lines = file($file);
        $data = array();
        foreach($lines as $line) {
            $data[] = explode(';', chop($line));
        }
        return $data;
    }

    // Colored table
    public function ColoredTable($header,$data) {
        // Colors, line width and bold font
        $this->SetFillColor(233, 136, 64);
        $this->SetTextColor(255);
        $this->SetDrawColor(128, 0, 0);
        $this->SetLineWidth(0.3);
        $this->SetFont('', 'B');
        // Header
        $w = array(10, 40, 20, 20, 20, 20, 20);
        $num_headers = count($header);
        for($i = 0; $i < $num_headers; ++$i) {
            $this->Cell($w[$i], 7, $header[$i], 1, 0, 'C', 1);
        }
        $this->Ln();
        // Color and font restoration
        $this->SetFillColor(224, 235, 255);
        $this->SetTextColor(0);
        $this->SetFont('');
        // Data
        $fill = 0;
        foreach($data as $row) {
            $this->Cell($w[0], 6, $row[0], 'LR', 0, 'C', $fill);
            $this->Cell($w[1], 6, $row[1], 'LR', 0, 'L', $fill);
            $this->Cell($w[2], 6, $row[2], 'LR', 0, 'C', $fill);
            $this->Cell($w[3], 6, $row[3], 'LR', 0, 'C', $fill);
            $this->Cell($w[4], 6, $row[4], 'LR', 0, 'C', $fill);
            $this->Cell($w[5], 6, $row[5], 'LR', 0, 'C', $fill);
            $this->Cell($w[6], 6, $row[6], 'LR', 0, 'C', $fill);
            $this->Ln();
            $fill=!$fill;
        }
        $this->Cell(array_sum($w), 0, '', 'T');
    }
}

// create new PDF document
$pdf = new MYPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

// set document information
$pdf->SetCreator(PDF_CREATOR);
$pdf->SetAuthor('Nicola Asuni');
$pdf->SetTitle('TCPDF Example 011');
$pdf->SetSubject('TCPDF Tutorial');
$pdf->SetKeywords('TCPDF, PDF, example, test, guide');

// set default header data
$pdf->SetHeaderData(PDF_GYANKUTIR_LOGO, PDF_HEADER_LOGO_WIDTH, 'GyanKutir', 
'Jhunjhunu International Wisdom City
Near Khemi Shakti Temple
Jhunjhunu (Rajasthan)-333001');

// set header and footer fonts
$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));
$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));

// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

//set margins
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

//set some language-dependent strings
$pdf->setLanguageArray($l);

// ---------------------------------------------------------

// set font
$pdf->SetFont('helvetica', '', 6);

// add a page
$pdf->AddPage();

//Column titles
$header = array('Rank', 'Student', 'Time Used', 'Correct Answers', 'Wrong Answers','Questions Skipped','Final Score');

$final_data = $smarty->fetch($file_to_show);

$file = fopen("text.txt","w+");

    file_put_contents($file,"");
    fwrite($file,$final_data);
    fclose($file);

ob_start();
        ob_flush();
//Data loading
$data = $pdf->LoadData('text.txt');

// print colored table
$pdf->ColoredTable($header, $data);

// ---------------------------------------------------------
 ob_flush();
//Close and output PDF document
$pdf->Output('example_011.pdf', 'I');

//============================================================+
// END OF FILE                                                
//============================================================+ 
```

我想将标题添加到每一页的表格列中。这个问题附有截图。在第一个屏幕截图中，标题正在显示，但在第二个屏幕截图中没有显示。如何在后续页面上显示这些列标题？请帮我解决这个问题。在此先感谢。这张图片是 pdf 表格的第一页。![这是带有正确标题的表格的第一页](../Images/4dd4bef8d3d92f01d2f928a19287ce23.png)![这是表格的第二页，其中标题应与第一页一样显示。](../Images/360e1d916a7435d0dadf808b3c233021.png)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-08-27T13:14:40.623

另一种方法是在 html 中简单地使用 THEAD 标记。

```
<table>
<thead>
    <tr><th>Heading</th></tr>
</thead>
<tbody>
    <tr><td>Many rows...</td></tr>
    <tr><td>of data</td></tr>
</tbody>
</table> 
```

似乎 TCPDF 在每一页上都重复了标题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-21T09:50:17.687

我想到了两种方法。

方法 1：创建您自己的自定义标题函数（如在 TCPDF 示例 3 中），自动将标题单元格添加到每个页面。在这种情况下，您会将标题单元格放置代码移动到`Header`类中的方法中，并将标题绘制到页面上的固定位置。由于在`Header`添加新页面时会自动调用该方法，因此您的表头将在页面创建后立即添加。这肯定比方法 2 更快且强度更低，但它可能有点棘手。

方法二：使用 TCPDF 事务来检测一行即将断页的时间，然后回滚。然后你会`AddPage`自己；再次绘制标题；并继续显示。您可以通过在创建行之前获取页数并将其与之后的页数进行比较来做到这一点。提供了如何以这种方式执行此操作的示例：

```
 //Separated Header Drawing into it's own function for reuse.
    public function DrawHeader($header, $w) {
        // Colors, line width and bold font
        // Header
        $this->SetFillColor(233, 136, 64);
        $this->SetTextColor(255);
        $this->SetDrawColor(128, 0, 0);
        $this->SetLineWidth(0.3);
        $this->SetFont('', 'B');        
        $num_headers = count($header);
        for($i = 0; $i < $num_headers; ++$i) {
            $this->Cell($w[$i], 7, $header[$i], 1, 0, 'C', 1);
        }
        $this->Ln();
        // Color and font restoration
        $this->SetFillColor(224, 235, 255);
        $this->SetTextColor(0);
        $this->SetFont('');
    }

    // Colored table
    public function ColoredTable($header,$data) {
        $w = array(10, 40, 20, 20, 20, 20, 20);
        $this->DrawHeader($header, $w);

        // Data
        $fill = 0;
        foreach($data as $row) {
            //Get current number of pages.
            $num_pages = $this->getNumPages();
            $this->startTransaction();
            $this->Cell($w[0], 6, $row[0], 'LR', 0, 'C', $fill);
            $this->Cell($w[1], 6, $row[1], 'LR', 0, 'L', $fill);
            $this->Cell($w[2], 6, $row[2], 'LR', 0, 'C', $fill);
            $this->Cell($w[3], 6, $row[3], 'LR', 0, 'C', $fill);
            $this->Cell($w[4], 6, $row[4], 'LR', 0, 'C', $fill);
            $this->Cell($w[5], 6, $row[5], 'LR', 0, 'C', $fill);
            $this->Cell($w[6], 6, $row[6], 'LR', 0, 'C', $fill);
            $this->Ln();
            //If old number of pages is less than the new number of pages,
            //we hit an automatic page break, and need to rollback.
            if($num_pages < $this->getNumPages())
            {
                //Undo adding the row.
                $this->rollbackTransaction(true);
                //Adds a bottom line onto the current page. 
                //Note: May cause page break itself.
                $this->Cell(array_sum($w), 0, '', 'T');
                //Add a new page.
                $this->AddPage();
                //Draw the header.
                $this->DrawHeader($header, $w);
                //Re-do the row.
                $this->Cell($w[0], 6, $row[0], 'LR', 0, 'C', $fill);
                $this->Cell($w[1], 6, $row[1], 'LR', 0, 'L', $fill);
                $this->Cell($w[2], 6, $row[2], 'LR', 0, 'C', $fill);
                $this->Cell($w[3], 6, $row[3], 'LR', 0, 'C', $fill);
                $this->Cell($w[4], 6, $row[4], 'LR', 0, 'C', $fill);
                $this->Cell($w[5], 6, $row[5], 'LR', 0, 'C', $fill);
                $this->Cell($w[6], 6, $row[6], 'LR', 0, 'C', $fill);
                $this->Ln();
            }
            else
            {
                //Otherwise we are fine with this row, discard undo history.
                $this->commitTransaction();
            }
            $fill=!$fill;
        }
        $this->Cell(array_sum($w), 0, '', 'T');
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-22T17:13:04.733

我不允许添加评论，但我想为 Specto的[解决方案添加一些额外的信息。](https://stackoverflow.com/a/18466526/9724900)我认为他的解决方案确实是实现这一目标的最佳/最简单的方法，但是在 page_break 之后，标题下方的第一行可能会被部分删除，或者单元格的对齐/宽度/等其他方式被破坏。根据我的发现，这是因为行中间的表格“中断”。为了防止这种行为添加`nobr="true"`到行。

```
<table>
<thead>
    <tr><th>Heading</th></tr>
</thead>
<tbody>
    <tr nobr="true"><td>Many rows...</td></tr>
    <tr nobr="true"><td>of data</td></tr>
</tbody>
</table> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-09T19:38:24.190

这可能有点晚了，但我想出了一个简单的方法来在每一页上都有标题。获取`$data`并使用该`array_slice`函数来填充一页的数据行。输出表格，然后循环回到下一页。我每页使用 54 行，字体大小为 9。

```
//Data loading
$data = $pdf->LoadData('text.txt');
$datacount = count($data);
$i = 0;
while ($i < $datacount) {
    $dataout = array_slice($data, $i, 54, false);
    $pdf->AddPage();
    // print colored table      
    $pdf->ColoredTable($header, $dataout);
    $i = $i + 54;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-09T16:36:03.243

EPB 的方法 2 对我有用，但我对其进行了一些修改，只使用了 $pdf->startTransaction(); 而不是 $this->startTransaction(); 因为我的脚本已经以这种方式格式化了。

非常感谢！

# g++ - 语句goto不能跨变量定义？

> ID：14274225
> 
> 赞同：32
> 
> 时间：2013-01-11T08:25:21.073
> 
> 标签：g++, goto

假设这些代码编译在`g++`：

```
#include <stdlib.h>

int main() {
    int a =0;

    goto exit;

    int *b = NULL;

exit:
    return 0;
} 
```

`g++`会抛出错误：

```
goto_test.c:10:1: error: jump to label ‘exit’ [-fpermissive]
goto_test.c:6:10: error:   from here [-fpermissive]
goto_test.c:8:10: error:   crosses initialization of ‘int* b’ 
```

似乎`goto`不能交叉指针定义，但可以`gcc`编译它们，没有任何抱怨。

修复错误后，我们必须在任何指针之前声明所有指针`goto`语句之前声明所有指针，也就是说，即使您目前不需要它们，也必须声明这些指针（并且违反某些原则）。

`g++`禁止有用的*tail-goto*语句的起源设计考虑是什么？

* * *

更新：

`goto`可以跨变量（*任何类型*的变量，不限于指针）声明，*但获得初始化值的除外*。如果我们删除`NULL`上面的分配，`g++`现在保持沉默。所以如果你想声明`goto`-cross-area之间的变量，*不要*初始化它们（仍然违反一些原则）。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-11T08:31:04.537

Goto 不能跳过变量的初始化，因为在跳转后相应的对象将不存在，因为具有非平凡初始化的对象的生命周期在执行初始化时开始：

**C++11 §3.8/1：**

> […] T 类型对象的生命周期开始于：
> 
> *   获得具有适合类型 T 的对齐和大小的存储，并且
>     
>     
> *   如果对象有非平凡的初始化，它的初始化就完成了。

**C++11 §6.7/3：**

> 可以转移到一个块中，但不能通过初始化绕过声明的方式。除非变量具有标量类型、具有普通默认构造函数和普通析构函数的类类型、以及这些类型之一的 cv 限定版本，或上述类型之一的数组，并且在没有初始化程序 (8.5) 的情况下声明。

由于错误提到`[-fpermissive]`，您可以通过指定该编译器标志将其变为警告。这表明两件事。它曾经是允许的（变量会存在，但在跳转后未初始化）并且 gcc 开发人员认为规范禁止它。

编译器只检查变量是否应该被初始化，而不检查它是否被使用，否则结果会很不一致。但是，如果您不再需要该变量，您可以自己结束它的生命周期，使“tail-goto”变得可行：

```
int main() {
    int a =0;
    goto exit;
    {
        int *b = NULL;
    }
exit:
    return 0;
} 
```

是完全有效的。

在旁注中，该文件具有扩展名`.c`，这表明它是 C 而不是 C++。如果你用`gcc`代替编译它`g++`，原始版本应该可以编译，因为 C 没有这个限制（它只有可变长度数组的限制——这在 C++ 中根本不存在）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-02T11:04:53.700

这些原始类型有一个简单的解决方法，例如`int`：

```
 // ---  original form, subject to cross initialization error.  ---
 // int foo = 0;

 // ---  work-around form: no more cross initialization error.  ---
 int foo;  foo = 0; 
```

# ms-project - 微软项目中的实际工作时间大于计划工作时间

> ID：14274226
> 
> 赞同：0
> 
> 时间：2013-01-11T08:25:27.450
> 
> 标签：ms-project

我每周更新我的项目实际工作时间。但是如果实际工作时间大于计划工作时间，则计划工作时间自动更改为等于实际工作时间。在ms项目中，有什么方法可以使实际工作时间大于计划工作时间?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:31:32.533

不，估计的工作总是大于或等于实际工作，而剩余的工作总是大于或等于零。

例如，您可以使用基线来存储 Estimation 中的更改历史记录。

# c# - 想要使用 c# 将特定节点保存到 Xml 文件中

> ID：14274227
> 
> 赞同：0
> 
> 时间：2013-01-11T08:25:30.980
> 
> 标签：c#, xml

1.  下面的代码：

    ```
    protected void generate_Click(object sender, EventArgs e)
    {
        XmlDocument doc = new XmlDocument();
        doc.PreserveWhitespace = true;
        doc.Load("XmlFileName");
        XmlNode node = doc.SelectSingleNode("ChartData/XaxisFields/XaxisField");
        if (node != null)
        {
            node.ChildNodes.Item(0).InnerXml = "hi";
            doc.Save("XmlFileName");
        }

     } 
    ```

2.  在这里显示空引用，

    ```
    node.ChildNodes.Item(0).InnerXml = "hi"; 
    ```

3.  代码是否正确，运行后的代码没有显示任何错误但没有添加Xaxisfield。

    ```
    <?xml version="1.0" encoding="utf-8" ?>
    <ChartData>
      <XaxisFields>
        <XaxisField></XaxisField>
      </XaxisFields>
    </ChartData> 
    ```

4.  项目清单

我想通过选择特定的父节点在 xml 文件中添加子节点 Xaxisfield

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:50:40.167

您可以使用[Linq to Xml](http://msdn.microsoft.com/en-us/library/bb387098.aspx)选择您的节点并更新其值：

```
var xdoc = XDocument.Load("XmlFileName");
xdoc.Root.Element("XaxisFields").Element("XaxisField").Value = "hi";
// OR
// xdoc.XPathSelectElement("//XaxisField").Value = "hi";
xdoc.Save("XmlFileName"); 
```

您的代码也不起作用，因为节点没有子`XaxisField`节点。这将起作用：

```
XmlDocument doc = new XmlDocument();
doc.PreserveWhitespace = true;
doc.Load("XmlFileName");
XmlNode node = doc.SelectSingleNode("ChartData/XaxisFields/XaxisField");
if (node != null)
{
    node.InnerXml = "hi";
    doc.Save("XmlFileName");
} 
```

# mysql - 用于删除特定行的 MySQL 脚本

> ID：14274229
> 
> 赞同：1
> 
> 时间：2013-01-11T08:25:36.067
> 
> 标签：mysql

我有一个这样的 MySQL 表：

```
--------------------------------------------------
| Field | Type    | Null | Key | Default | Extra |
--------------------------------------------------
| A     | int(11) | NO   | PRI | NULL    |       |
--------------------------------------------------
| B     | int(11) | NO   | PRI | NULL    |       |
--------------------------------------------------
| C     | int(11) | NO   |     | NULL    |       |
-------------------------------------------------- 
```

我想删除每个 A 值的所有行，其中 C 值不在该特定 A 的前 10 个（最大）C 值中。所以第一个 A 将保留 10 个值，第二个 A 保留 10 个值，10 个值对于第三...

谢谢

这是一个例子：

```
-------------
| A | B | C |
-------------
| 1 | 2 | 5 |
-------------
| 1 | 3 | 2 |
-------------
| 1 | 5 | 9 |
-------------
| 1 | 4 | 7 |
-------------
| 1 | 8 | 4 |
-------------
| 2 | 1 | 5 |
-------------
| 2 | 3 | 8 |
-------------
| 2 | 5 | 7 |
-------------
| 2 | 4 | 6 |
-------------
| 2 | 7 | 9 |
-------------
| 2 | 8 | 1 |
------------- 
```

假设我只想要前 2 名，而不是前 10 名。那么结果：

```
-------------
| A | B | C |
-------------
| 1 | 5 | 9 |
-------------
| 1 | 4 | 7 |
-------------
| 2 | 7 | 9 |
-------------
| 2 | 3 | 8 |
------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:12:23.953

你可以像这样在最大值和最小值之间使用联合

```
 SELECT A,B,t1.C from table1 t1
  INNER JOIN (select max(C) max1 from table1) t2
  ON t1.C= t2.max1 

  UNION

  SELECT A,B,MAX(C) MAX1 from table1 t3
  INNER JOIN (select  MAX(C) MAX2 from table1) t4
  WHERE t3.c < t4.max2 
  GROUP BY A

  ORDER BY A 
```

输出是这样的

Obs：如果您接受它，这只是一个尝试和提示以及我的解决方法，您可以自己修复它。我没有得到正确的数字，`B`我不知道为什么。它在 UNION 的第二部分获得下一个最大数字

这里[**是 SQLFIDDLE 上的演示**](http://sqlfiddle.com/#!2/a1f40/89)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:07:02.610

您可以为此编写一个过程::

首先得到A的所有唯一值，

```
Select DISTINCT A from table 
```

在此结果上运行光标。

在光标内部，

```
Select * from table where A=$$cursorvalue order by C desc limit 2 
```

# php - PHP 中的 Exec 不起作用，而从提示符运行时该命令可以正常工作

> ID：14274234
> 
> 赞同：-1
> 
> 时间：2013-01-11T08:25:52.040
> 
> 标签：php, command-line, imagemagick, exec, tesseract

我正在尝试在基于 Windows 的 Apache 服务器上使用 tesseract 执行 OCR。这让我很生气。以下不会产生预期的 E:\zzz.txt 文件：

```
<?php

$command = "\"C:\\ocr\\tesseract.exe\" \"E:\\www\\test\\upload\\proofs\\src\\yehia.raef.jpg\" \"E:\\zzz\" 2>&1";

print $command;
exec("$command", $msg);
print_r($msg);

?> 
```

当我运行程序时，这是我得到的：

```
C:\Users\blob\Desktop>php ici.php
"C:\ocr\tesseract.exe" "E:\www\test\upload\proofs\src\yehia.raef.jpg" "E:\zzz" 2>&1

Array
(
    [0] => The filename, directory name, or volume label syntax is incorrect.
) 
```

但是现在如果直接从提示符运行命令：

```
C:\Users\blob\Desktop>"C:\ocr\tesseract.exe" "E:\www\test\upload\proofs\src\yehia.raef.jpg" "E:\zzz" 2>&
Tesseract Open Source OCR Engine v3.02 with Leptonica 
```

它就像一个魅力。请注意，这种命令可以与 ImageMagick 等其他软件完美配合...

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:35:12.747

假设 PHP 具有所有必需的权限，在 Windows 上运行的 PHP/5.3.0 之前的 PHP 版本中，[您需要](http://es2.php.net/manual/en/function.exec.php#101579)在完整命令周围添加一组额外的引号：

```
<?php

$command = "\"C:\\ocr\\tesseract.exe\" \"E:\\www\\test\\upload\\proofs\\src\\yehia.raef.jpg\" \"E:\\zzz\" 2>&1";
if( PHP_OS=='WINNT' && version_compare(PHP_VERSION, '5.3.0', '<') ){
    $command = '"' . $command . '"';
}
print $command; 
```

# php - 如何在php中一次使用数组的三个对象

> ID：14274237
> 
> 赞同：2
> 
> 时间：2013-01-11T08:26:05.053
> 
> 标签：php

我有一个名为 emp_rec 的数组，有 100 多名员工，每个员工有大约 60 个字段，我使用以下方法一次使用一名员工......

```
foreach($emp_rec as $obj) {
   $name = $obj->get_empname();
  //.....
  ......///
} 
```

现在计划在一个循环中一次使用三个员工，我该怎么做...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:30:17.973

你可以试试这个：

```
$current = Array();
while(($current[0] = array_shift($emp_rec))
   && ($current[1] = array_shift($emp_rec))
   && ($current[2] = array_shift($emp_rec))) {
  // do stuff here
}
if( $current[0]) {
    // there were records left over, optionally do something with them.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:29:31.857

尝试这样的事情：

```
for ($i = 0; $i < count($emp_rec); $i+=3) {
    $emp1 = $emp_rec[$i];
    $emp2 = $emp_rec[$i+1];
    $emp3 = $emp_rec[$i+2];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:40:54.317

Here you can iterate in one time on same multi objects. Easy to adapt.

```
<?php
// Example of class
class A {
    public $a = 'a';
    public $b = 'b';
    public $c = 'c';
}

$obj1 = new A; // Instantiate 3 objects
$obj2 = new A;
$obj3 = new A;

$objs = array((array)$obj1, (array)$obj2, (array)$obj3); // Array of objects (cast in array)

foreach ($objs[0] as $key => $value) {
    echo $objs[0][$key];
    echo $objs[1][$key];
    echo $objs[2][$key];
} 
```

Output `aaabbbccc`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T10:19:35.583

关于什么 ：

```
$GROUP_SIZE = 3;

$emp_count = count($emp_rec);
for ($i=0; $i<$emp_count; $i+=$GROUP_SIZE) {
    for ($j=0; $i+$j<$emp_count && $j<$GROUP_SIZE; $j++) {
        $current = $emp_rec[$i+$j];
        $name = $current->get_empname();
    }
} 
```

如果您需要一次操纵 3 或 N 名员工，它会让您知道当前员工在哪个“组”中。

# ruby-on-rails - Rails 测试验证模型规范上的关联

> ID：14274242
> 
> 赞同：3
> 
> 时间：2013-01-11T08:26:50.547
> 
> 标签：ruby-on-rails, ruby, validation, rspec, rails-activerecord

有没有等价于

```
 it { should validate...

  it { should validate_uniqueness_of( 
```

等

```
 validates_associated 
```

就像是，

```
it { should validate_associate(:associated_model_object) 
```

除了，你知道，功能。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T01:29:15.850

我认为这样的事情会起作用：

```
it "should validate associate_model_object" do
  m = Model.new(valid_params)
  m.associated_models.build(invalid_params)
  m.save.should eq(false)
end 
```

如果您来自另一个方向，请用此替换中间线：

```
m.build_associated_model(invalid_params) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-07T22:12:20.923

由于缺少 validates_associated 的内置匹配器，我这样写：

```
it { is_expected.not_to validate_presence_of(:child) }

context 'when child is present' do
  let(:child) { FactoryBot.create(:child) }
  before { subject.child = child }
  it { is_expected.to be_valid }

  context 'when child is present but not valid' do
    before { child.age = -1 }
    it { is_expected.not_to be_valid }
  end
end 
```

这一行：`before { child.age = -1 }`需要一些关于`Child`'s 验证的知识。从 's 单元测试的上下文来看，这并不理想`Parent`，但这肯定不是我犯过的最糟糕的编程罪。

# zend-framework - Zend_Form 将所有字段呈现为文本

> ID：14274243
> 
> 赞同：0
> 
> 时间：2013-01-11T08:26:50.630
> 
> 标签：zend-framework, zend-form

我有一个 Zend_Form 表单，带有一些自定义装饰器，如下所示：

```
$decorators = array();
$decorators[] = new Zend_Form_Decorator_ViewHelper(array());
$decorators[] = new Zend_Form_Decorator_Errors;
$decorators[] = new Zend_Form_Decorator_HtmlTag(array('tag' => 'div', 'class' => 'form-item'));
$decorators[] = new Zend_Form_Decorator_Label(array('class' => 'form-label'));
$decorators[] = new Zend_Form_Decorator_Callback(array(
    'callback' => function($content, $element, $options) {
        return sprintf('<div class="form-row">%s</div>', $content);
    },
    'placement' => false
));
$this->setElementDecorators($decorators); 
```

问题是，所有字段都呈现为文本输入。为什么会这样？

编辑：我发现，它不一定将所有输入呈现为文本输入，而是使用表单中第一个输入的类型呈现它们。这是我使用的表单示例（装饰器设置为 int parent's init）：

```
<?php

class Form_Users_Add extends Form_Base {
    protected $pbxs = array(1 => 'Element 1', 2 => 'Element 2');

    public function init() {
        $monitors = new Zend_Form_Element_Checkbox('prefered_screen_count');
        $monitors->setCheckedValue(2);
        $monitors->setUncheckedValue(1);
        $monitors->setLabel('two_monitors');
        $this->addElement($monitors);

        $pbx = new Zend_Form_Element_Select('asterisk_id');
        $pbx->setMultiOptions($this->pbxs);
        $pbx->setLabel('users_asterisk_id');
        $this->addElement($pbx);

        parent::init();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:02:21.340

耶！我已经解决了这个问题！原因是我使用了类的实例，而不是名称。这样每个元素都使用相同的装饰器实例。

# java - Java反序列化，将字段更改为瞬态

> ID：14274245
> 
> 赞同：3
> 
> 时间：2013-01-11T08:26:55.480
> 
> 标签：java, serialization

**背景**

我有一个类，它没有覆盖序列化功能，也没有`serialVersionUID`，但它仍然被序列化、存储、稍后反序列化。这是一个配置对象，在更改配置时，实际上是从配置 UI 中读取数据，然后“从头开始”正常创建对象并序列化存储。只有在使用它时，才会通过反序列化创建对象。

现在这个类中添加了两个字段，它们不应该被序列化，但是......这当然会导致一些反序列化问题（默认反序列化后字段为空时出现 NullPointerException，破坏类不变量），通过打开配置解决UI 和保存配置，从而保存对象的正确序列化形式。

**问题**

现在，如果我以其中一种方式修改类以进行快速修复，那么从保存的配置数据中反序列化对象会发生什么：

1.  去掉这些字段，保存的数据是新版本，有这些字段吗？
2.  将这些字段更改为瞬态，并且保存的数据是新版本，其中包含这些字段吗？
3.  将这些字段更改为瞬态，保存的数据是旧版本，没有这些字段？

为了更具体，假设添加的字段是：

```
private final Map<String, String> extraProperties = new HashMap<String, String>(); 
```

这要么从此类中删除，要么更改为`private final transient`字段。

PS。无需告诉我，可能应该添加自定义序列化代码*，*然后可能应该重构整个事情*，*以将持久性和瞬态数据分离到不同的类......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:31:36.543

删除（或使临时）这些您不想序列化的冗余字段。然后尝试反序列化加载已存在非瞬态字段的旧版本。这当然会导致错误，因为类`serialVersionUID`现在不同了。但是，新旧`serialVersionUID`都应包含在消息中。

现在只需`private static long serialVersionUID =`在您的类中定义，将其设置为旧的先前值。文件中带有多余字段的类内容将被加载，这些多余字段的值将被忽略。

但是，您现在遇到了另一个问题：您可能保存了两种不同类型的文件：旧版本和新版本。这些将具有不同的serialVersionUID，因此我们可以加载一个或另一个，但不能同时加载。serialVersionUID 是最终的，但也许您仍然可以设置和探测不同的值，如此处[所述](https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection)。

从序列化的角度来看，将字段更改为瞬态与字段删除相同。它不会被存储，也不会被加载。`serialVersionUID`但是，如果它不固定，则将先前的非瞬态字段声明为瞬态将改变它。

如果逐项，**如果**serialVersionUID 现在是硬编码**并**与文件中的 serialVersionUID 匹配，那么您的问题的答案是：

1.  没有。
2.  没有。
3.  没有。

As "nothing" I mean that the class is deserialized without assigning values to the transient fields (if these are present) and no error is reported.

In case serialVersionUID's do not match, an exception is thrown, even if the rest of class matches.

# python - 使用 django 在 db 中添加新字段

> ID：14274249
> 
> 赞同：-1
> 
> 时间：2013-01-11T08:27:36.597
> 
> 标签：python, django, django-admin

我想让用户添加新字段。
如何从用户或管理界面在数据库中添加新字段（使用 South 除外）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:15:06.650

[Django 文档](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)展示了如何运行原始 sql。因此，如果您以具有正确权限的用户身份连接到数据库，则可以运行`ALTER TABLE`语句。

但是，您真的必须正确地清理您的输入，否则您最好将根密码放在您网站的首页。

综上所述……几乎可以肯定，有更好的方法来解决您的问题。您应该更详细地描述您正在尝试做的事情。

# algorithm - 比较五种不同的来源

> ID：14274251
> 
> 赞同：3
> 
> 时间：2013-01-11T08:27:51.700
> 
> 标签：algorithm, time-complexity, n-way-merge

我需要编写一个函数来比较 2-5 个“文件”（实际上是 2-5 组数据库行，但概念相似），我不知道该怎么做。生成的差异应该并排显示 2-5 个文件。输出应显示添加、删除、更改和未更改的行，每个文件都有一列。

我应该使用什么算法来遍历行以保持低复杂度？每个文件的行数少于 10,000。我可能不需要[外部合并](http://en.wikipedia.org/wiki/External_merge)，因为总数据大小在兆字节范围内。简单易读的代码当然也不错，但这不是必须的。

**编辑：**文件可能来自一些未知来​​源，没有“原始”可以与其他 1-4 个文件进行比较；所有文件都必须以某种方式与其他文件进行比较。

**编辑 2：**我，或者更确切地说是我的同事，意识到可以对内容进行排序，因为输出顺序无关紧要。这个解决方案意味着对应用程序的这一部分使用额外的领域知识，而且差异复杂度是 O(N) 并且代码不太复杂。这个解决方案很简单，当我关闭赏金时，我将忽略对此编辑的任何答案。但是，我将回答我自己的问题以供将来参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:17:36.623

如果必须将所有*n 个*文件（例如 2 <= *n* <= 5）与其他文件进行比较，那么在我看来，要比较的组合数将是 C( *n* ,2)，定义为（例如在 Python 中）为：

```
def C(n,k): 
    return math.factorial(n)/(math.factorial(k)*math.factorial(n-k)) 
```

*因此，对于n* = 2、3、4、5，您将分别进行 1、3、6 或 10 次成对比较。

然后，时间复杂度将是 C( *n* ,2) 乘以您选择使用的成对*diff算法的复杂度，在*[Myers](http://www.xmailserver.org/diff2.pdf)算法的情况下，这将是预期的 O(ND)，其中 N 是要比较的两个序列 A 和 B 的长度，D 是 A 和 B 的最小编辑脚本的大小。

我不确定您需要此代码的环境，但作为示例，Python 中的[difflib](http://www.doughellmann.com/PyMOTW/difflib/)可用于查找各种序列之间的差异 - 不仅仅是文本行 - 所以它可能对您有用。`difflib`文档没有确切说明它使用什么算法，但它对时间复杂度的讨论让我认为它与 Myers 的相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:00:43.183

伪代码（用于编辑 2）：

```
10: stored cells = <empty list>
for each column:
  if cell < stored cells:
    stored cells = cell
  elif cell == lastCell:
    stored cells += cell

if stored cells == <empty>:
  return result
result += stored cells
goto 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T09:11:50.320

2个文件的情况可以用标准的diff算法来解决。从 3 个文件中，您可以使用“多数票”算法：

如果超过一半的记录相同：3 条中的 2 条、4 条中的 3 条、5 条中的 3 条比这些是考虑其他记录已更改的参考。

如果更改的数量相对较低，这也意味着算法的相当大的加速。

```
Pseudocode:
  initialize as many line indexes as there are files
  while there are still at least 3 indexes incrementable
    if all indexed records are the same 
      increment all line indexes
    else 
      if at least one is different - check majority vote
      if there is a majority
        mark minority changes, increment all line indexes
      else
        mark minority additions (maybe randomly deciding e.g. in a 2:2 vote)
        check addition or removing and set line indexes accordingly
        increment all indexes
      endif
    endif
  endwhile 
```

# javascript - 结合 SVG、HTML 和 Javascript

> ID：14274252
> 
> 赞同：1
> 
> 时间：2013-01-11T08:27:59.910
> 
> 标签：javascript, html, svg

我有一个看起来像这样的 HTML 文件：

```
<html>
 <div id="test"> ... </div>
 <object data="pic.svg" [...]></object>
</html> 
```

在 pic.svg 中，我有一个元素，比如说一个圆圈，我想实现类似的东西：

```
<circle onClick="doSomething()" [...]> 
```

现在，在 js 函数 doSomething() 中（即当有人点击圆圈时）我想更改我的“测试”-div。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:32:08.243

如果您希望 SVG 与 HTML 存在于相同的 DOM 中，最好使用嵌入式`<svg>`元素。它[得到了很好的支持](http://caniuse.com/#feat=svg-html5)。

就像是

```
<svg id="svgroot" width="600" height="600"
     version="1.1" xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink">
<script type="text/ecmascript">//<![CDATA[
   function doSomething() {
       document.getElementById('test').appendChild(...);
   }
//]]></script>

<circle onClick="doSomething()" />
</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:45:37.353

您可以从 svg 内部访问父文档（以及那里的元素），如下所示：

```
var divInParentDocument = window.parent.document.getElementById('test'); 
```

这是一个（稍微复杂一点）[示例](http://xn--dahlstrm-t4a.net/svg/html/from-svg-to-parent-html-script.html)，展示了如何从 svg 内部调用父 html 文档中的函数。

# javascript - 如何使图像可聚焦？

> ID：14274257
> 
> 赞同：1
> 
> 时间：2013-01-11T08:28:29.100
> 
> 标签：javascript, image, focus

在另一个[问题](https://stackoverflow.com/questions/14140209/html-js-confused-about-method-to-create-an-image-button)中，有人建议可以使图像可聚焦？怎么能做到这一点？

**更多信息：**

在另一个问题中，昆汀说：

```
 var img= $("#my-image-id");
    image.click(function() {
    // your code here
    } 
```

> 不要这样做。图像将无法聚焦（因为图像并非设计为交互式控件）。使用（例如）键盘在页面中导航（而不是像鼠标这样的指点设备）的人将无法导航到图像并激活控件。

别人说：

> 在您想要保持“焦点”的情况下（我假设带有选项卡支持），如果您使用单个作为按钮（带有或不带有 ），则必须添加一些 JS 代码以使图像在适当时具有焦点选项卡被按下。所以你将不得不编写更多的代码来做同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:44:27.850

要使图像（或任何元素）具有焦点，只需添加一个`tabindex`属性。

```
<img src="myimage.png" tabindex="1" /> 
```

但请注意，没有必要仅仅为了让图像响应`click`事件而进行任何特殊处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:45:15.907

你可以在`img`里面放一个`button`.

所以，焦点将到达按钮，点击事件可以绑定到按钮，但它看起来就像图像有焦点一样。

# java - 使用 Scanner() 读取 CSV

> ID：14274259
> 
> 赞同：47
> 
> 时间：2013-01-11T08:28:44.027
> 
> 标签：java, csv, java.util.scanner

我的 csv 正在读入 System.out，但我注意到任何带有空格的文本都会移到下一行（作为返回 \n）

这是我的 csv 的开始方式：

```
first,last,email,address 1, address 2
john,smith,blah@blah.com,123 St. Street,
Jane,Smith,blech@blech.com,4455 Roger Cir,apt 2 
```

运行我的应用程序后，任何带有空格（地址 1）的单元格都会被扔到下一行。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class main {

    public static void main(String[] args) {
        // -define .csv file in app
        String fileNameDefined = "uploadedcsv/employees.csv";
        // -File class needed to turn stringName to actual file
        File file = new File(fileNameDefined);

        try{
            // -read from filePooped with Scanner class
            Scanner inputStream = new Scanner(file);
            // hashNext() loops line-by-line
            while(inputStream.hasNext()){
                //read single line, put in string
                String data = inputStream.next();
                System.out.println(data + "***");

            }
            // after loop, close scanner
            inputStream.close();

        }catch (FileNotFoundException e){

            e.printStackTrace();
        }

    }
} 
```

所以这是控制台中的结果：

```
第一个，最后一个，电子邮件，地址
1、地址
2
约翰,史密斯,blah@blah.com,123
英石。
街道，
Jane,Smith,blech@blech.com,4455
罗杰
环, apt
2

```

我是否错误地使用了扫描仪？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2014-07-25T08:01:11.617

**请停止编写错误的 CSV 解析器！**

我在网上看过数百个 CSV 解析器和所谓的*教程*。

几乎每个人都搞错了！

这不会是一件坏事，因为它不会影响我，但是尝试编写 CSV*阅读器*并弄错的人也倾向于编写 CSV*编写*器。并且把他们弄错了。而这些我必须为其编写解析器。

请记住 CSV（按照不那么明显的顺序）：

1.  值周围可以有引号字符
2.  可以有其他引用字符而不是 "
3.  甚至可以有除 " 和 ' 之外的其他引用字符
4.  完全不能有引号字符
5.  甚至可以在某些值上有引用字符，而在其他值上没有
6.  可以有除 , 和 ; 以外的其他分隔符
7.  分隔符和（引用的）值之间可以有空格
8.  可以有除 ascii 以外的其他字符集
9.  *每行应该有*相同数量的值，但并不总是
10.  可以包含空字段，引用：`"foo","","bar"`或不引用：`"foo",,"bar"`
11.  可以在值中包含换行符
12.  *如果值没有分隔，则不能*在值中包含换行符
13.  *值之间不能*包含换行符
14.  如果正确转义，则可以在值中包含分隔符
15.  *不使用反斜杠*来转义分隔符，但是...
16.  使用引用字符本身来转义它，例如`Frodo's Ring`将`'Frodo''s Ring'`
17.  可以在值的开头或结尾包含引号字符，甚至可以仅作为字符 ( `"foo""", """bar", """"`)
18.  甚至可以在未引用的值中包含引用的字符；这个*没有逃脱*

如果您认为这显然不是问题，请再想一想。我已经看到这些项目中的*每一个都错误地实施了。*即使在*主要*的软件包中。（例如办公套件、CRM 系统）

那里有开箱即用的良好且正确工作的 CSV 读取器和写入器：

*   [打开csv](http://opencsv.sourceforge.net/)
*   [Ostermiller Java 实用程序](http://ostermiller.org/utils/CSV.html)
*   [Apache Commons CSV](https://commons.apache.org/proper/commons-csv/)

如果您坚持自己编写，请至少阅读[CSV 的（非常短的）RFC](https://www.rfc-editor.org/rfc/rfc4180)。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-01-11T08:32:51.100

```
scanner.useDelimiter(","); 
```

这应该有效。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class TestScanner {

    public static void main(String[] args) throws FileNotFoundException {
        Scanner scanner = new Scanner(new File("/Users/pankaj/abc.csv"));
        scanner.useDelimiter(",");
        while(scanner.hasNext()){
            System.out.print(scanner.next()+"|");
        }
        scanner.close();
    }

} 
```

对于 CSV 文件：

```
a,b,c d,e
1,2,3 4,5
X,Y,Z A,B 
```

输出是：

```
a|b|c d|e
1|2|3 4|5
X|Y|Z A|B| 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-11T08:32:54.737

`Scanner.next()`不读取换行符，但读取下一个标记，由空格分隔（默认情况下，如果`useDelimiter()`不用于更改分隔符模式）。要读取一行，请使用`Scanner.nextLine()`.

读取单行后，您可以使用`String.split(",")`将行分隔为字段。这可以识别不包含所需数量的字段的行。使用`useDelimiter(",");`将忽略文件的基于行的结构（每行由逗号分隔的字段列表组成）。例如：

```
while (inputStream.hasNextLine())
{
    String line = inputStream.nextLine();
    String[] fields = line.split(",");
    if (fields.length >= 4) // At least one address specified.
    {
        for (String field: fields) System.out.print(field + "|");
        System.out.println();
    }
    else
    {
        System.err.println("Invalid record: " + line);
    }
} 
```

如前所述，建议使用 CSV 库。一方面，这个（和解决方案）将无法正确处理包含字符`useDelimiter(",")`的带引号的标识符。`,`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-08T10:18:11.217

用这个分隔符分割 nextLine(): `(?=([^\"]*\"[^\"]*\")*[^\"]*$)")`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-05T10:10:37.460

我同意 Scheintod 的观点，即使用现有的 CSV 库从一开始就符合 RFC-4180 是一个好主意。除了上面提到的 OpenCSV 和 Oster Miller，还有一系列其他的 CSV 库。如果您对性能感兴趣，可以查看[uniVocity/csv-parsers-comparison](https://github.com/uniVocity/csv-parsers-comparison)。它表明

*   [uniVocity CSV 解析器](https://github.com/uniVocity/univocity-parsers#reading-csv)
*   [SimpleFlatMapper CSV 解析器](https://github.com/arnaudroger/SimpleFlatMapper)
*   [杰克逊 CSV 解析器](http://github.com/FasterXML/jackson-dataformat-csv)

使用 JDK 6、7、8 或 9 时始终是最快的。该研究在这三个中没有发现任何 RFC 4180 兼容性问题。**OpenCSV 和 Oster Miller 的速度大约是它们的两倍。**

我与作者没有任何关联，但关于 uniVocity CSV 解析器，由于其作者与该解析器的作者相同，该研究可能存在偏见。

需要注意的是，SimpleFlatMapper 的作者还发布了仅比较这三者的[性能比较](http://simpleflatmapper.org/12-csv-performance.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-07T11:47:12.690

我见过很多由于代码不处理引号 (")、引号内的换行符和引号内的引号引起的生产问题；例如："he said ""this""" 应该被解析为：he said "this"

就像前面提到的那样，那里的许多 CSV 解析示例只是读取一行，然后用分隔符分隔该行。这是相当不完整和有问题的。

对于我和可能喜欢构建诗句的人来说（或使用其他人的代码并处理他们的依赖项），我开始使用经典的文本解析编程，这对我有用：

```
/**
 * Parse CSV data into an array of String arrays. It handles double quoted values.
 * @param is input stream
 * @param separator
 * @param trimValues
 * @param skipEmptyLines
 * @return an array of String arrays
 * @throws IOException
 */
public static String[][] parseCsvData(InputStream is, char separator, boolean trimValues, boolean skipEmptyLines)
    throws IOException
{
    ArrayList<String[]> data = new ArrayList<String[]>();
    ArrayList<String> row = new ArrayList<String>();
    StringBuffer value = new StringBuffer();
    int ch = -1;
    int prevCh = -1;
    boolean inQuotedValue = false;
    boolean quoteAtStart = false;
    boolean rowIsEmpty = true;
    boolean isEOF = false;

    while (true)
    {
        prevCh = ch;
        ch = (isEOF) ? -1 : is.read();

        // Handle carriage return line feed
        if (prevCh == '\r' && ch == '\n')
        {
            continue;
        }
        if (inQuotedValue)
        {
            if (ch == -1)
            {
                inQuotedValue = false;
                isEOF = true;
            }
            else
            {
                value.append((char)ch);

                if (ch == '"')
                {
                    inQuotedValue = false;
                }
            }
        }
        else if (ch == separator || ch == '\r' || ch == '\n' || ch == -1)
        {
            // Add the value to the row
            String s = value.toString();

            if (quoteAtStart && s.endsWith("\""))
            {
                s = s.substring(1, s.length() - 1);
            }
            if (trimValues)
            {
                s = s.trim();
            }
            rowIsEmpty = (s.length() > 0) ? false : rowIsEmpty;
            row.add(s);
            value.setLength(0);

            if (ch == '\r' || ch == '\n' || ch == -1)
            {
                // Add the row to the result
                if (!skipEmptyLines || !rowIsEmpty)
                {
                    data.add(row.toArray(new String[0]));
                }
                row.clear();
                rowIsEmpty = true;

                if (ch == -1)
                {
                    break;
                }
            }
        }
        else if (prevCh == '"')
        {
            inQuotedValue = true;
        }
        else
        {
            if (ch == '"')
            {
                inQuotedValue = true;
                quoteAtStart = (value.length() == 0) ? true : false;
            }
            value.append((char)ch);
        }
    }
    return data.toArray(new String[0][]);
} 
```

单元测试：

```
String[][] data = parseCsvData(new ByteArrayInputStream("foo,\"\",,\"bar\",\"\"\"music\"\"\",\"carriage\r\nreturn\",\"new\nline\"\r\nnext,line".getBytes()), ',', true, true);
for (int rowIdx = 0; rowIdx < data.length; rowIdx++)
{
    System.out.println(Arrays.asList(data[rowIdx]));
} 
```

生成输出：

```
[foo, , , bar, "music", carriage
return, new
line]
[next, line] 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-11T08:32:28.327

如果你绝对必须使用 Scanner，那么你必须通过它的`useDelimiter(...)`方法设置它的分隔符。否则它将默认使用所有空白作为其分隔符。尽管正如已经说过的那样更好——使用 CSV 库，因为这是他们最擅长的。

例如，此定界符将以逗号分隔，带或不带周围的空格：

```
scanner.useDelimiter("\\s*,\\s*"); 
```

有关更多信息，请查看[java.util.Scanner API](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#delimiter%28%29)。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2016-01-23T15:08:41.557

好吧，我在 NetBeans 8.1 中进行编码：

首先：创建一个新项目，选择 Java 应用程序并命名您的项目。

然后在公共课程之后修改您的代码，如下所示：

```
/**
 * @param args the command line arguments
 * @throws java.io.FileNotFoundException
 */
public static void main(String[] args) throws FileNotFoundException {
    try (Scanner scanner = new Scanner(new File("C:\\Users\\YourName\\Folder\\file.csv"))) {
         scanner.useDelimiter(",");
         while(scanner.hasNext()){
             System.out.print(scanner.next()+"|");
         }}
    }
} 
```

# iphone - 在选定的国家/地区发布新版本的 iPhone 应用程序

> ID：14274262
> 
> 赞同：-1
> 
> 时间：2013-01-11T08:29:11.500
> 
> 标签：iphone, ipad, itunes-store

我对发布我的应用程序的新版本感到有点困惑。如果有人可以帮助我，几乎没有疑问：

-我在所有国家都有我的应用程序的第一个版本。是否可以仅在美国发布新版本假设 1.1。

-假设我可以在美国发布 1.1，是否可以为其他一些国家发布第三个版本，比如澳大利亚并且具有相同的版本号是 1.1

如果我的应用程序的发布版本对于不同的国家/地区是分开的，如何维护版本号。

我希望我对我的想法很清楚。如果我的语言令人困惑，请原谅。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:06:34.337

我认为不可能为不同的国家/地区拥有多个版本的相同应用程序。例如：如果第 1 版发布到全世界，现在为同一个应用程序发布了 1.1 版（您正在更新而不是添加另一个应用程序）并且只选择了美国然后结果 - 美国将有 1.1 版，世界其他地区将没有您的应用程序。

为了满足您的情况，我建议根据您要发布的国家/地区保留不同的应用程序。为不同的国家/地区维护相同的代码库会很乏味，但我认为它可以解决您的问题。

# java - mp3/aac 播放超过 1 分钟时无法显示特定毫秒的文本

> ID：14274263
> 
> 赞同：1
> 
> 时间：2013-01-11T08:29:12.593
> 
> 标签：java, android, android-widget, android-mediaplayer

我创建像卡拉OK这样的应用程序。但是，当我的应用播放 mp3/aac 超过 1 分钟时。我创建的这些文本不显示。然而 setText(); 1分钟以下正常显示。我该如何解决。我明天必须派老师来。代码很简单。非常感谢。

```
public class Okkaraoke extends Activity implements MediaPlayerControl,OnClickListener {
private MediaController mMediaController;
private MediaPlayer mMediaPlayer;
Handler mHandler = new Handler();
public static TextView  subtitles2,subtitles21;

@SuppressLint("HandlerLeak")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    setContentView(R.layout.myapp2);

    subtitles2 = (TextView) findViewById(R.id.subs2);
    subtitles21 = (TextView) findViewById(R.id.subs21);

    mMediaPlayer = new MediaPlayer();
    mMediaController = new MediaController(this)

    mMediaController.setMediaPlayer(Okekaraoke.this);
    mMediaController.setAnchorView(findViewById(R.id.AudioView2));
    mMediaController.setPrevNextListeners(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // Next button clicked
            Intent intent = new Intent(Okkarake.this, Show1.class);
            startActivity(intent);

        }
    }, new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // Previous button clicked
            Intent intent = new Intent(Okkaraoke.this, Main.class);
            startActivity(intent);
        }
    });

    try {
        mMediaPlayer.setDataSource(this, Uri
                .parse("android.resource://com.app.suadmon/raw/sorry"));
        mMediaPlayer.prepare();
    } catch (IOException e) {
        e.printStackTrace();
    }

    mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            super.handleMessage(msg);
            final int currentPos = mMediaPlayer.getCurrentPosition();
            if (mMediaPlayer.getCurrentPosition() < 28715) {
                subtitles2.setText("Let's start");
                subtitles21.setText("...................");
            }else if(mMediaPlayer.getCurrentPosition()< 33134) {
                subtitles2.setText("Oh my god");
                subtitles21.setText("Text Displaying");
            }else if(mMediaPlayer.getCurrentPosition() < 39811) {
                subtitles2.setText("function is green");
                subtitles21.setText("Text Displaying");
            }else if(mMediaPlayer.getCurrentPosition()< 44294) {
                subtitles2.setText("Working..");
                subtitles21.setText("Text Displaying");
            }else if(mMediaPlayer.getCurrentPosition()< 50940) {
                subtitles2.setText("Normally");
                subtitles21.setText("Text Displaying");
            }else if(mMediaPlayer.getCurrentPosition()< 55387) { 
                subtitles2.setText("Text can show normally");
                subtitles21.setText("Text Displaying");
            }else if(mMediaPlayer.getCurrentPosition()< 103807) {
                subtitles2.setText("Working");
                subtitles21.setText("Text Displaying");
            }else if(mMediaPlayer.getCurrentPosition()<108173) {
                subtitles2.setText("Text is not show up from here !");
                subtitles21.setText("Text's not Display");
            } else if(mMediaPlayer.getCurrentPosition()< 112646) {
                subtitles2.setText("All text from here can't show");
                subtitles21.setText("Text's not Display");
            } else if(mMediaPlayer.getCurrentPosition()< 119555) {
                subtitles2.setText("TextView din't show up");
                subtitles21.setText("Text's not Display");
            } else if (mMediaPlayer.getCurrentPosition()< 130356) {
                subtitles2.setText("..................");
                subtitles21.setText("Text's not Display");
            } else if (mMediaPlayer.getCurrentPosition()< 138812) {
                subtitles2.setText("************");
                subtitles21.setText("Text's not Display");
            } else if (mMediaPlayer.getCurrentPosition()< 147369) {
                subtitles2.setText("Text's not Display");
                subtitles21.setText("*************");           
            }

            mHandler.sendEmptyMessageDelayed(0, 1);
        }
    };
    mHandler.sendEmptyMessage(0);

    mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
        public void onPrepared(MediaPlayer mp) {
            mHandler.post(new Runnable() {
                public void run() {
                    mMediaController.show(0);
                    // mMediaPlayer.reset();
                    mMediaPlayer.start();
                }
            });
        }
    });

    mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub
            Intent newAc = new Intent(Okkaraoke.this, Show.class);
            startActivity(newAc);
        }
    });
} 
```

我有音乐 03.45 分钟。在handleMassege() 中。我尝试最终 int/long sPos = mMediaPlayer.getCurrentPosition(); 也。但是，这行不通。setText 与上面的代码相同。非常感谢。

# vim - 为什么强烈推荐“hjkl”？

> ID：14274266
> 
> 赞同：2
> 
> 时间：2013-01-11T08:29:23.913
> 
> 标签：vim

> **可能重复：**
> [VimTutor 箭头键 v/s hjkl](https://stackoverflow.com/questions/11708753/vimtutor-arrow-keys-v-s-hjkl)

为什么[强烈推荐“hjkl”](http://yannesposito.com/Scratch/en/blog/Learn-Vim-Progressively/)？

我认为使用箭头键更方便。

使用“hjkl”有什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:36:42.757

这有点像使用鼠标。每次到达鼠标或箭头键时，您都必须将手移回键盘的主要部分才能访问其他非常常见的命令，例如`i`，`y`您会浪费一些时间。

我认为主要问题不是时间，而是你正在对正在做的事情失去一些关注，因为你必须看（或思考）你的手而不是屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:31:23.703

您**将手指放在主行上**，如果您使用的是**触摸打字**（您应该这样做），您的**编辑速度会更快**。

检查[**此页面**](http://www.catonmat.net/blog/why-vim-uses-hjkl-as-arrow-keys/)以获取更多信息。

# qt - QLinguist 无法翻译警告信息

> ID：14274268
> 
> 赞同：1
> 
> 时间：2013-01-11T08:29:29.753
> 
> 标签：qt, user-interface, linguistics, language-translation

在 Qlinguist 中，我翻译了 ui 和一些相应的警告信息，生成了`qm`文件并加载了它，但结果它只能翻译 ui，而不能翻译那些警告信息。我的代码是这样的：

```
void MainWindow::translate()
{
     QTranslator translator;
     translator.load ( "Test.qm", "D:\\" );
     qApp->installTranslator ( &translator );
     retranslateUi ( this );
}

MainWindow::MainWindow ( QWidget *parent ) : QMainWindow ( parent )
{
    setupUi(this);
    translate();
    ...
} 
```

我的警告信息之一是这种形式：

```
QMessageBox::warning( this, QMessageBox::tr("ERROR"), QMessageBox::tr("Invalid IP adress") ); 
```

这个字符串可以通过 加载`lupdate`，我在它的`qm`文件中翻译了它，但是运行后仍然看不到它的翻译。[在这里](https://stackoverflow.com/questions/14135416/how-to-use-qt-linguist-for-qt-ui-file)我问了这个问题，但我必须打开这个新问题才能在某人的帮助下解决它。有人可以帮我吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:54:51.293

在堆栈上创建翻译器，它将在 translate() 结束时立即删除。尝试在堆上创建它，以便它继续存在。

# c# - 每个视图的视图模型

> ID：14274273
> 
> 赞同：0
> 
> 时间：2013-01-11T08:29:42.867
> 
> 标签：c#, asp.net-mvc

在我的项目中，每个域模型都有一个视图模型，并在多个视图中重用此视图模型。

一种视图模型的示例

```
 public class ProductViewModel
    {
        public int ProductId { get; set; }
        public int ProductGroupId { get; set; }
        public bool IsLinkedToErp { get; set; }

        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Standard")]
        public bool IsDefault { get; set; }

        [MaxLength(50)]
        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Artnr")]
        public string ArtNo { get; set; }

        [MaxLength(255)]
        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Beskrivning")]
        public string Description { get; set; }

        [MaxLength(255)]
        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Specifikation")]
        public string Specification { get; set; }

        [MaxLength(5)]
        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Enhet")]
        public string Unit { get; set; }

        [MaxLength(4)]
        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Konto")]
        public string Account { get; set; }

        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Netto")]
        public decimal NetPrice { get; set; }

        public string ChUser { get; set; }

        public DateTime ChTime { get; set; }

        public string GetUpdatedDate
        {
            get { return String.Format("{0:d}", ChTime); }
        }

        public string GetNetPrice
        {
            get { return String.Format("{0:0.00}", NetPrice); }
        }
    } 
```

我在 ProductController 中的所有视图都重用了这个 ViewModel。对于列表，添加和编辑。但在列表中，我只使用了所有属性中的一些。

然后我使用 Automapper 映射到域，反之亦然。

现在我想知道是否有人有这方面的经验。随着项目的发展，您认为我在使用此解决方案时会遇到问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:39:46.610

我会考虑拆分 ListViewModel 和 Add/Edit 视图模型，因为您可能会填充和发送比视图实际需要的更多的数据。

通过利用继承，您可以快速创建两个*仅包含视图所需数据的*类。根据您的示例，我将考虑以下内容：

```
public class ProductListViewModel{
    public IEnumerable<ProductListModel> products {get;set;}

    public string SomeOtherPotentialVariableForProductList {get;set;}
}

public class ProductListModel{
    public int ProductId { get; set; }

    public int ProductGroupId { get; set; }

    [MaxLength(255)]
    [Required(AllowEmptyStrings = false)]
    [Display(Name = "Beskrivning")]
    public string Description { get; set; }

    [Required(AllowEmptyStrings = false)]
    [Display(Name = "Netto")]
    public decimal NetPrice { get; set; }
}

public class ProductViewModel : ProductListModel
    {

        public bool IsLinkedToErp { get; set; }

        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Standard")]
        public bool IsDefault { get; set; }

        [MaxLength(50)]
        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Artnr")]
        public string ArtNo { get; set; }

        [MaxLength(255)]
        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Specifikation")]
        public string Specification { get; set; }

        [MaxLength(5)]
        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Enhet")]
        public string Unit { get; set; }

        [MaxLength(4)]
        [Required(AllowEmptyStrings = false)]
        [Display(Name = "Konto")]
        public string Account { get; set; }

        public string ChUser { get; set; }

        public DateTime ChTime { get; set; }

        public string GetUpdatedDate
        {
            get { return String.Format("{0:d}", ChTime); }
        } 
```

这完成了一些事情。

1.  您只发送视图所需的数据。
2.  如果您发现自己需要更多可能与产品不直接相关的列表视图信息，您可以快速添加该属性。
3.  通过从 ProductListModel 继承，您不会在代码中重复自己。

# php - Codeigniter 使用 ms 访问数据库

> ID：14274274
> 
> 赞同：10
> 
> 时间：2013-01-11T08:29:46.020
> 
> 标签：php, database, codeigniter, ms-access

所以我使用访问数据库（* mdb）。这是我的代码和连接成功：

```
$db['test']['hostname'] = 'Driver={Microsoft Access Driver (*.mdb)};DBQ=C:\blabla.mdb';
$db['test']['username'] = '';
$db['test']['password'] = '';
$db['test']['database'] = 'Driver={Microsoft Access Driver (*.mdb)};DBQ=C:\blabla.mdb';
$db['test']['dbdriver'] = 'odbc';
$db['test']['dbprefix'] = '';
$db['test']['pconnect'] = TRUE;
$db['test']['db_debug'] = TRUE;
$db['test']['cache_on'] = FALSE;
$db['test']['cachedir'] = '';
$db['test']['char_set'] = 'utf8';
$db['test']['dbcollat'] = 'utf8_general_ci';
$db['test']['swap_pre'] = '';
$db['test']['autoinit'] = TRUE;
$db['test']['stricton'] = FALSE; 
```

现在我想从其他计算机使用 accessdb。此 accessdb(*mdb) 已共享，我制作地图网络驱动器 (Z:)。

所以我改变了主机名和数据库，但它失败了：

```
$db['test']['hostname'] = 'Driver={Microsoft Access Driver (*.mdb)};DBQ=Z:\blabla.mdb';
$db['test']['database'] = 'Driver={Microsoft Access Driver (*.mdb)};DBQ=Z:\blabla.mdb'; 
```

我尝试这样做：

```
$db['test']['hostname'] = 'Driver={Microsoft Access Driver (*.mdb)};DBQ=\\10.0.0.107\share\blabla.mdb';
$db['test']['database'] = 'Driver={Microsoft Access Driver (*.mdb)};DBQ=\\10.0.0.107\share\blabla.mdb'; 
```

但它仍然错误：

```
Unable to connect to your database server using the provided settings.
Filename: D:\folder\folder\system\database\DB_driver.php

Line Number: 124 
```

甚至我尝试与 php 连接，这是[使用 msaccess 的结果 php](https://stackoverflow.com/questions/14313154/php-using-msaccess)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:30:51.770

问题是默认的 IIS IUSER 无法通过网络共享访问文件。此处详细介绍了解决方法：http: [//support.microsoft.com/kb/207671](http://support.microsoft.com/kb/207671)。

我强烈建议您使用 SQL Server（如果没有别的）而不是访问文件 - 您将获得更好的体验 + 如果需要，您将能够随着站点的扩展更轻松地迁移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:40:01.450

我发现这个线程有一个类似的问题：[http](http://ellislab.com/forums/viewthread/93160/) ://ellislab.com/forums/viewthread/93160/ 。说您应该尝试从控制器手动加载加载 odbc 驱动程序：

```
$this->load->database();
$this->db->dbdriver = “odbc”; 
```

它还说由于某种原因数据库配置在 odbc 驱动程序中不可用：

> 系统/数据库/驱动程序/odbc/odbc_driver.php

因此，您可能还必须进入那里并手动加载数据库配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-07T14:10:11.377

```
$db['second']['hostname'] = "DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=C:/wamp/www/ket_noi_access/test1.mdb";//C:\wamp\www\ket_noi_access
$db['second']['username'] = "ADODB.Connection";
$db['second']['password'] = "xxxxx";
$db['second']['database'] = "C:/wamp/www/ket_noi_access/test1.mdb";
$db['second']['dbdriver'] = "odbc";
$db['second']['dbprefix'] = "";
$db['second']['pconnect'] = TRUE;
$db['second']['db_debug'] = TRUE;
$db['second']['cache_on'] = FALSE;
$db['second']['cachedir'] = "";
$db['second']['char_set'] = "utf8";
$db['second']['dbcollat'] = "utf8_general_ci";
$db['second']['swap_pre'] = '';
$db['second']['autoinit'] = TRUE;
$db['second']['stricton'] = FALSE; 
```

代码

```
function __construct(){
    parent::__construct();
    $this->legacy_db = $this->load->database('second',true);
}
function LayDanhSach(){
    $this->legacy_db->select('*');
    $this->legacy_db->from('ban');
    $query = $this->legacy_db->get();
    $kq=$query->result();
    $this->legacy_db->close();
    //$this->db->close();
    return $kq;    
}

$this->load->model("ban_model");
$ds=$this->ban_model->LayDanhSach();
$st="This is demo multi database and msaccess connect <br>";        
$st.=json_encode($ds);
$this->data['content']=$st;//json_encode($ds);//echo json_encode($ds);
$this->load->view('index_view2',$this->data,false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T05:35:22.873

您是否检查过对该文件的读/写访问权限？如果您的 php 应用程序在 IIS 上运行，那么您的 IIS 用户帐户将需要对该文件具有读/写权限，而不是您用于登录计算机的用户帐户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T19:47:12.700

检查您的 PHP 程序在哪个用户下运行。用 PHP 列出目录内容以进行检查。考虑到运行您的 PHP 的用户也不能`Z`在您自己的用户名下映射您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-01T17:05:20.247

经过多次搜索（上述解决方案没有任何效果）我找到了一个不同的解决方案，在某些 ms Access db 上，您只能在连接字符串中使用双斜杠（而不是在数据库路径中）进行连接：

```
$db['test']['hostname'] = 'Driver={Microsoft Access Driver (*.mdb)};DBQ=C:\\path\\to\my.mdb';
$db['test']['username'] = '';
$db['test']['password'] = '';
$db['test']['database'] = 'Driver={Microsoft Access Driver (*.mdb)};DBQ=C:\path\to\my.mdb';
$db['test']['dbdriver'] = 'odbc';
$db['test']['dbprefix'] = '';
$db['test']['pconnect'] = TRUE;
$db['test']['db_debug'] = TRUE;
$db['test']['cache_on'] = FALSE;
$db['test']['cachedir'] = '';
$db['test']['char_set'] = 'utf8';
$db['test']['dbcollat'] = 'utf8_general_ci';
$db['test']['swap_pre'] = '';
$db['test']['autoinit'] = TRUE;
$db['test']['stricton'] = FALSE; 
```

不知道是什么原因，因为我能够使用单斜杠和双斜杠连接一些 Access db（相同的服务器、相同的文件夹、相同的 Access 版本）不起作用，认为这是同一个人的愚蠢笑话IE ：-（

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-27T21:34:57.093

这有效：

```
$db['access']['hostname'] = 'DNS name created by me'; // or ip address
$db['access']['username'] = '';
$db['access']['password'] = '';
$db['access']['database'] = '';
$db['access']['dbdriver'] = 'odbc';
$db['access']['dbprefix'] = '';
$db['access']['pconnect'] = FALSE;
$db['access']['db_debug'] = TRUE;
$db['access']['cache_on'] = FALSE;
$db['access']['cachedir'] = '';
$db['access']['char_set'] = 'utf8';
$db['access']['dbcollat'] = 'utf8_general_ci';
$db['access']['swap_pre'] = '';
$db['access']['autoinit'] = TRUE;
$db['access']['stricton'] = FALSE; 
```

# php - 在 phpmyadmin 中将匹配字段导出到列

> ID：14274275
> 
> 赞同：0
> 
> 时间：2013-01-11T08:29:49.720
> 
> 标签：php, mysql, phpmyadmin

我希望这不是一个愚蠢的问题，但我真的在网上找不到任何东西以及 phpmyadmin 的导出设置中的任何东西。

我的问题：是否可以根据与列名匹配的数据在 phpmyadmin 中导出数据。例如，如果您导出数据库或表，则 sql 语句的编写方式如下

```
 INSERT INTO table VALUES ('1','2','3') 
```

我想知道是否可以导出数据以便插入语句读取

```
INSERT INTO table (number1,number2,number3) VALUES ('1','2','3') 
```

这个想法是，当我正在编写一个数据库时，我希望能够在某些时候导出。但由于我不断在表中添加新字段，因此我希望能够导入旧导出并且仍然能够将列与数据匹配。这样，现有字段包含数据，而新字段则留空。

这仅在php中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:35:49.427

是的，有可能。您应该使用类似于更新的 INSERT 格式：

```
INSERT INTO table SET number1 = '1', number2 = '2', number3 = '3'; 
```

Phpmyadmin 知道如何做到这一点，只需搜索“更新样式插入”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T05:59:25.527

在“查看表的转储（模式）”中

检查“完整插入”选项你会得到这个

```
INSERT INTO table (number1,number2,number3) VALUES ('1','2','3') 
```

# google-drive-api - 更改文档所有者时与父母有关的错误

> ID：14274281
> 
> 赞同：1
> 
> 时间：2013-01-11T08:30:09.547
> 
> 标签：google-drive-api

我在使用驱动器时遇到问题。结果在驱动 sdk 和驱动 web 中是相同的。我有一个与用户 (X) 共享的文件夹 (1)。(X) 用户在文件夹(1) 中创建了一个新文件夹(2) 并将文件夹(2) 所有者更改为我。

之后，在我的驱动器中，文件夹（2）位于文件夹（1）和我的驱动器（根）中。父级应仅位于文件夹 (2) 中。

这似乎是一个错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T07:53:47.337

不，这不是错误。

考虑在网络共享中相同的父共享文件夹中共享的文件夹已单独显示在共享网络上。同样，您第二次共享的文件夹以及父文件夹也已单独显示。

如果父 ID 延迟，这将是一个错误。

但在这种情况下，两者都具有相同的父 ID。所以它不会是一个错误。

# php - 动态地将“a”标签添加到具有“特色”类的帖子中。'featured' 类也在动态添加

> ID：14274282
> 
> 赞同：0
> 
> 时间：2013-01-11T08:30:11.683
> 
> 标签：php, javascript, jquery, wordpress

我正在使用下面的代码将一个类动态添加`featured`到 meta_value 为`yes`. 此外，我需要在有课程`<a href="<?php bloginfo("url"); ?>/about"></a>`的帖子之前添加。`featured`有什么办法可以在这段代码中添加一些东西来实现这一点吗？

```
function wpse80098_filter_post_class( $classes ) {
    global $post;
    if ( 'yes' == get_post_meta( $post->ID, '_jsFeaturedPost', true ) ) {
        $classes[] = 'featured';
    }
    return $classes;
}
add_filter( 'post_class', 'wpse80098_filter_post_class' ); 
```

现在，HTML 看起来像这样：

```
<ul>
  <li>
    <p>hello</p>
  </li>
  <li class="featured">
    <p>hello</p>
  </li>
</ul> 
```

我希望 HTML 看起来像这样：

```
<ul>
  <li>
    <p>hello</p>
  </li>
  <li class="featured">
    <a href="<?php bloginfo("url"); ?>/about"></a>
    <p>hello</p>
  </li>
</ul> 
```

`<?php bloginfo("url"); ?>`当然被我的网站所取代。

如果我不能添加到代码中，我还有什么其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:04:41.347

添加以下代码以添加 url。

```
<script>
$(document).ready(function(){
    var URL = "<?php bloginfo('url'); ?>/hello";
    $("li.featured").prepend('<a href="'+yourURL+'"></a>');
});
</script> 
```

# android - Android USB 权限对话框永远不会出现

> ID：14274285
> 
> 赞同：2
> 
> 时间：2013-01-11T08:30:20.280
> 
> 标签：android, printing, usb, host

我编写了一个简单的应用程序来向通过 USB 连接到 Android 4.0 平板电脑的 USB 打印机发送命令。出于某种原因，我无法通过获取权限来声明接口并打开连接。这是相关代码：

```
public class TestPrintActivity extends Activity {

private UsbManager mUsbManager;
private UsbDevice mDevice;
private UsbDeviceConnection mConnection;
private UsbInterface mInterface;
private UsbEndpoint mBulkIn;
private UsbEndpoint mBulkOut;
private static final String ACTION_USB_PERMISSION =
        "com.demo.xprinter.USB_PERMISSION";
private PendingIntent mPermissionIntent;
private BroadcastReceiver mUsbReceiver; 

@Override

private static final String ACTION_USB_PERMISSION =
        "com.demo.printerDemo.USB_PERMISSION";

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test_print);

    mUsbManager = (UsbManager)getSystemService(Context.USB_SERVICE);

    mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(ACTION_USB_PERMISSION), 0);
    IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
    filter.addAction(UsbManager.ACTION_USB_ACCESSORY_DETACHED);
    filter.addAction(UsbManager.ACTION_USB_ACCESSORY_ATTACHED);
    registerReceiver(mUsbReceiver, filter);

    mUsbReceiver = new BroadcastReceiver() {

        public void onReceive(Context context, Intent intent) {

            String action = intent.getAction();
            if (ACTION_USB_PERMISSION.equals(action)) {
                synchronized (this) {
                    UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);

                    if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                        if(device != null){
                          //call method to set up device communication
                            openPort(device);
                       }
                    } 
                    else {
                        Toast.makeText(getApplicationContext(), "Denied!", Toast.LENGTH_SHORT).show();
                    }
                }
            }
        }
    };

}

public void onResume() {
    super.onResume();

    HashMap<String,UsbDevice> deviceList = mUsbManager.getDeviceList();

    for (HashMap.Entry<String,UsbDevice> entry : deviceList.entrySet()) {
          UsbDevice aDevice = entry.getValue();
          if ((aDevice.getProductId() == 8965) && (aDevice.getVendorId() == 1659) ){

              if (mUsbManager.hasPermission(aDevice))
                openPort(aDevice);
              else
                mUsbManager.requestPermission(aDevice, mPermissionIntent);
              break;
          }
        }

} 
```

这是清单的相关部分：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.demo.printerDemo"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="17" />
<uses-feature android:name="android.hardware.usb.host"/> 
```

我已经配置了设备，以便在连接打印机时启动我的应用程序，并且在枚举（onResume（））期间找到设备并调用权限请求。但是，无论出于何种原因，我从来没有看到“请求权限”对话框（我在网上看到过它的屏幕截图），也没有调用 onReceive()。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:46:27.413

1) 为什么声明了两个成员 ACTION_USB_PERMISSION？

2）在 onCreate() 尝试像这样注册您的 Intent ，也许有区别：

```
IntentFilter filter = new IntentFilter();
filter.addAction(UsbManager.ACTION_USB_DEVICE_ATTACHED);
filter.addAction(UsbManager.ACTION_USB_DEVICE_DETACHED);
    filter.addAction(ACTION_USB_PERMISSION);
context.registerReceiver(usbReceiver, filter); 
```

3）由于 Android 中的错误（http://code.google.com/p/android/issues/detail?id=25703），我不确定是否曾经调用过 ACTION_USB_ACCESSORY_ATTACHED 操作。尝试添加`the below in your AndroidManifest.xml:`

```
 <activity ...>
 <intent-filter >
                <action android:name="android.intent.action.MAIN" />                
                <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
                <action android:name="android.hardware.usb.action.USB_DEVICE_DETACHED" />
                <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" android:resource="@xml/device_filter"/>
                <category android:name="android.intent.category.HOME" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T06:27:34.253

所以原来 /system/ 中的 SystemUI.apk/SystemUI.odex 已分别更改为 SystemUI.apk.backup/SystemUI.odex.backup。这大概是为了防止系统 UI 的某些方面破坏设备的预期“信息亭”模式。我之前评论中的 logcat 条目是一个重要线索。恢复文件名后，我开始看到“权限”对话框。

# facebook - Facebook 在删除应用程序后发送授权的签名请求

> ID：14274286
> 
> 赞同：1
> 
> 时间：2013-01-11T08:30:25.987
> 
> 标签：facebook, facebook-apps, facebook-canvas, facebook-authorization

我正在开发一个 facebook 画布应用程序并出于测试目的，有时我会转到我的帐户设置并删除该应用程序（以强制重新授权该应用程序）。

我面临的问题是，即使在我这样做之后，当我访问该应用程序时，Facebook 仍然会向我发送一个带有 user_id 和有效 oauth_token 的签名请求，因为我已经授权了该应用程序。

facebook 是否有任何缓存或延迟将我的删除考虑在内？

可能发生了什么？

# maven - 是否可以使用具有特定修订版的 maven-release-plugin？

> ID：14274287
> 
> 赞同：6
> 
> 时间：2013-01-11T08:30:37.347
> 
> 标签：maven, continuous-delivery

我正在考虑使用 SVN、Jenkins 和 Maven 的部署管道。目前我被困在我通常会调用`mvn release:perform`工作副本的地方。

在考虑部署管道时，我想创建一个管道，其中每个提交都可用于发布软件以进行测试/生产。假设我有 5 个构建，我决定将构建 3（带有修订版 3）发布到生产环境。已经有 2 个新的*主干*提交（现在是修订版 5）。

**是否可以`maven-release-plugin`在修订版 3 中使用签出/构建/标记/提交版本？**当 maven-release-plugin 完成发布时，它通常会将修改后的 POM 提交到*trunk*。

我对这里的任何信息或建议都很满意，所以请随时向我介绍书籍（例如[http://www.amazon.com/Continuous-Delivery-Deployment-Automation-Addison-Wesley/dp/0321601912](https://rads.stackoverflow.com/amzn/click/com/0321601912)），博客文章，詹金斯文档......也许我完全走错了路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:54:46.943

默认情况下，发布插件会根据您的工作副本的内容创建发布，它只是确保您在这样做之前没有任何未提交的内容。AFAIK 它不会强制更新源，因为这通常是持续集成系统（在您的情况下为 Jenkins）的工作。所以任何被 Jenkins 检查出来的东西都会被释放。

您正在尝试做的事情听起来更像是 Jenkins 方面的配置更改，将其指向正确的修订版。

另一方面，如果 POM 文件作为发布的一部分进行了修改，但同时在 SVN 中进行了更改，那么当 Maven 想要签入修改后的 POM 文件时，您将遇到冲突。这种情况可能会发生，具体取决于您希望发布的版本。

基于此，在发布之前总是创建一个分支可能更有意义。因此，您将基于修订版 3 创建一个分支，然后在该分支中创建您的版本。这样，您就不会遇到提交在最近修订中已更改的资源的问题。

创建分支并检查它可能也可以通过 Jenkins 和 Maven 自动化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:56:30.890

据我测试，这是不可能的。

更明确地说，正如 nwinler 所说，当你发布时，maven 会尝试提交修改后的 pom.xml 文件。但是，如果它是比当前版本更旧的版本，SVN 会抱怨您的源不是最新的。**所以它不会工作。**... 我所知道的。

您可以阅读有关促销构建的文档。我没有发现任何一个足够清楚可以指出的内容（在撰写此消息的几分钟内）。

# javascript - JavaScript 正则表达式空格

> ID：14274289
> 
> 赞同：0
> 
> 时间：2013-01-11T08:30:45.713
> 
> 标签：javascript, regex

运行以下 JavaScript 代码会成功找到例如“12 December”。

```
return messageHtmlBody.match(/[1-31]{1,2}(\s)[a-zA-Z]{3,9}/i)[0]; 
```

我想返回“2012 年 12 月 12 日”，所以尝试了以下代码：

```
return messageHtmlBody.match(/[1-31]{1,2}(\s)[a-zA-Z]{3,9}(\s)\d{4}/i)[0]; 
```

这不仅没有返回匹配项，而且代码甚至没有成功运行。我也尝试了以下（只是第二个（\s）字符），但也没有运行：

```
return messageHtmlBody.match(/[1-31]{1,2}(\s)[a-zA-Z]{3,9}(\s)/i)[0]; 
```

第二个 (\s) 不起作用有什么原因吗？第一个 (\s) 成功匹配第一个空格。搜索字符串 100% 包含字符串“2012 年 12 月 12 日”，因此找到它应该不是问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:39:39.517

`[1-31]`不是“1 到 31 之间的数字”的有效正则表达式。它所做的只是接受 1、2、3 中的任何一个和（使用量词）11、12、13、21、22、23、31、32、33 中的任何一个。

相反，它应该是`(?:3[01]|[1-2][0-9]|[0-9])`

此外，在 . 周围加上括号是不必要的`\s`。

更具体地说，您还可以明确说明月份是什么：

`(?:(?:jan|febr)uary|march|april|may|june|july|august|(?:(?:sept|nov|dec)em|octo)ber)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:39:26.287

`[1-31]{1,2}`不会符合你想要的。它相当于`[1-3]{1,2}`。

你可以使用像[regexpal](http://regexpal.com/)这样的正则表达式工具来测试你的表达式。

# github - 在 GitHub 存储库上显示 Jenkins 构建的当前状态

> ID：14274293
> 
> 赞同：198
> 
> 时间：2013-01-11T08:31:04.223
> 
> 标签：github, jenkins

有没有办法在我的项目的 GitHub Readme.md 上显示 Jenkins 构建状态？

我使用 Jenkins 来运行持续集成构建。每次提交后，它确保一切都编译，以及执行单元和集成测试，然后最终生成文档和发布包。

仍然存在不经意间做出破坏构建的事情的风险。访问 GitHub 项目页面的用户最好知道当前 master 处于该状态。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2014-11-13T14:19:21.810

好的，这是设置 Jenkins 以设置 GitHub 构建状态的方法。这假设您已经拥有 Jenkins，并且配置了 GitHub 插件以在每次推送时进行构建。

1.  转到 GitHub，登录，转到**Settings**，**Developer Settings**，**Personal access tokens**并单击**Generate new token**。

    ![生成新令牌的屏幕截图](../Images/d28d7b7fc5f408f066812d9edd23dac2.png)

2.  检查**repo:status**（我不确定这是必要的，但我做到了，它对我有用）。

    ![生成新令牌的屏幕截图](../Images/1b01690731e550bf1bde7afddc96f497.png)

3.  生成令牌，复制它。

4.  确保您要使用的 GitHub 用户是存储库协作者（对于私有存储库），或者是对您要构建的存储库具有推送和拉取访问权限（对于组织存储库）的团队成员。

5.  转到您的 Jenkins 服务器，登录。

6.  **管理 Jenkins** →**配置系统**

7.  在**GitHub Web Hook**下选择**Let Jenkins auto-manage hook URLs**，然后指定您的 GitHub**用户名**和您在第 3 步中获得的**OAuth 令牌。**

    ![Jenkins 全局设置截图](../Images/fe4e36cda5f738c57ba3abf12f089b2c.png)

8.  验证它是否与“**测试凭据**”按钮一起使用。 **保存**设置。

9.  找到 Jenkins 作业并将**Set build status on GitHub commit**添加到 post-build 步骤

    ![Jenkins 作业配置截图](../Images/a0733f00ccc7417a61950c6ed801a111.png)

就是这样。现在进行测试构建并转到 GitHub 存储库以查看它是否有效。单击主存储库页面中的**分支**以查看构建状态。

![单击“分支”的主页截图](../Images/cbab2d37f4022c8498e88061849bef8b.png)

您应该看到绿色复选标记：

![带有构建状态的 GitHub 分支的屏幕截图](../Images/dadff77541ab6b919e4dca8f99cdbbcd.png)

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2018-06-23T17:03:33.757

与此同时，Jenkins 和 GitHub 的 UI 发生了一些变化，我花了一段时间才弄清楚如何正确配置 Jenkins。这里的解释是基于 Jenkins 版本 2.121.1。

我还假设您已经配置了由 webhook 或轮询触发的 Jenkins 作业。这些是我为使其工作而采取的步骤：

1.  配置 Github：使用 OAuth 范围创建个人访问令牌`repo:status`
2.  配置 Jenkins：`Configure System`并将 OAuth Secret 添加为*GitHub 服务器*-`Secret Text`用作将 OAuth Secret 放入其中的身份验证方法。
3.  配置您的 Jenkins 作业：添加`Set GitHub commit status`为*构建后操作*。将*状态结果*设置为`One of the default messages and statuses`。
4.  在 GitHub 上检查您的结果：检查您是否在 GitHub 提交上获得构建状态和构建执行持续时间。

# 配置 Github

[![创建个人访问令牌](../Images/b8c6d9b7606aeec3a67a19e4c688790c.png)](https://i.stack.imgur.com/UyjIMm.png)

* * *

[![在此处输入图像描述](../Images/2fb3dbe5e84d10c39f2f2b7a4a2fe592.png)](https://i.stack.imgur.com/3exNW.png)

* * *

[![在此处输入图像描述](../Images/a6c3836fe90e29c09b0e071de9753ce9.png)](https://i.stack.imgur.com/ruzvol.png)

* * *

[![在此处输入图像描述](../Images/a0bc5fa38ccac4336f56df4b10e92164.png)](https://i.stack.imgur.com/b7krT.png)

* * *

# 配置詹金斯

[![在此处输入图像描述](../Images/b589bffdfda070d1d4b1b5e5baa4204b.png)](https://i.stack.imgur.com/KPdsR.png)

* * *

[![在此处输入图像描述](../Images/44a69d7924fa6336a964b59feae4b2ee.png)](https://i.stack.imgur.com/bt16Y.png)

* * *

[![在此处输入图像描述](../Images/90be7c119324ba68de4ce79eda7f6734.png)](https://i.stack.imgur.com/ubsBb.png)

* * *

[![在此处输入图像描述](../Images/78ee4299eb38a68f1273026dbb483b3d.png)](https://i.stack.imgur.com/mrMFd.png)

* * *

[![在此处输入图像描述](../Images/90809e784d760f07c71a0d0e316843b0.png)](https://i.stack.imgur.com/c6NpH.png)

* * *

# 配置 Jenkins 作业

[![在此处输入图像描述](../Images/54d237fe05cd1602677139f64be30eeb.png)](https://i.stack.imgur.com/4vSZ7.png)

* * *

[![在此处输入图像描述](../Images/a1e9d90adbc7ad276c10046234366f04.png)](https://i.stack.imgur.com/oiDiB.png)

* * *

[![在此处输入图像描述](../Images/f87ebf65f0ac731bd2df72f70b65e3fb.png)](https://i.stack.imgur.com/ZzpQG.png)

* * *

# 结果

您现在将看到提交和分支的状态：

[![在此处输入图像描述](../Images/7313af3a154d767573e6a00414114702.png)](https://i.stack.imgur.com/XNYx8.png)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-01-07T17:07:47.527

我所做的很简单：

1.  安装 Hudson Post 任务插件
2.  在此处创建个人访问令牌：[https ://github.com/settings/tokens](https://github.com/settings/tokens)
3.  添加一个总是成功的发布任务插件

    ```
    curl -XPOST -H "Authorization: token OAUTH TOKEN" https://api.github.com/repos/:organization/:repos/statuses/$(git rev-parse HEAD) -d "{
      \"state\": \"success\",
      \"target_url\": \"${BUILD_URL}\",
      \"description\": \"The build has succeeded!\"
    }" 
    ```

4.  添加一个发布任务插件，如果“将构建标记为失败”，它将失败

    ```
    curl -XPOST -H "Authorization: token OAUTH TOKEN" https://api.github.com/repos/:organization/:repos/statuses/$(git rev-parse HEAD) -d "{
      \"state\": \"failure\",
      \"target_url\": \"${BUILD_URL}\",
      \"description\": \"The build has failed!\"
    }" 
    ```

5.  您还可以在测试开始时添加对挂起的调用

    ```
    curl -XPOST -H "Authorization: token OAUTH TOKEN" https://api.github.com/repos/:organization/:repos/statuses/$(git rev-parse HEAD) -d "{
      \"state\": \"pending\",
      \"target_url\": \"${BUILD_URL}\",
      \"description\": \"The build is pending!\"
    }" 
    ```

![Post build 任务配置截图](../Images/a96a60064f91384b467c46c05f9d47bd.png)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-01-11T08:55:19.277

这个插件应该可以工作：[https ://wiki.jenkins-ci.org/display/JENKINS/Embeddable+Build+Status+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Embeddable+Build+Status+Plugin)

您应该能够将这样的徽章嵌入到您的`README.md`文件中：

![构建传递](../Images/2604c6cb4c931d06930971d5da9d3e5f.png)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-04-26T23:54:28.667

[提交状态 API](https://github.com/blog/1227-commit-status-api)允许您查看“回购[状态 API](http://developer.github.com/v3/repos/statuses/) ”。

自 2013 年 4 月 26 日起，您现在可以在[GitHub 存储库分支页面](https://github.com/blog/1484-check-the-status-of-your-branches)上查看[构建状态](https://github.com/blog/1227-commit-status-api)：

![在 GitHub 存储库分支上构建状态](../Images/192c13deb34383fe597850d3d5069d9e.png)

这意味着这是另一种方式，通过访问 GitHub 项目页面，查看这些状态，而不是只有 Jenkins。

从 2013 年 4 月 30 日开始，[提交状态的 API 端点](http://developer.github.com/v3/repos/statuses/#list-statuses-for-a-specific-ref)已扩展为允许分支**和标签名称，以及提交 SHA**。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-04-07T22:39:33.000

还有这个插件会给你一个徽章 url，你可以在你的 README.md 中发布它，看起来像这样

![构建传递](../Images/2604c6cb4c931d06930971d5da9d3e5f.png)

[https://wiki.jenkins-ci.org/display/JENKINS/Embeddable+Build+Status+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Embeddable+Build+Status+Plugin)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-06-17T16:39:12.300

如果你的`Github`插件上安装了插件`Jenkins`，你可以这样做`Post build actions`：

![在 github 上设置构建状态](../Images/08ef21d27f49aa78fe262f873d28b182.png)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-11-07T21:01:09.897

**在您的README.md**中添加以下行，并根据您的 jenkins 项目更改这两个 URL。

```
[![Build Status](https://jenkins../..project/lastBuild/buildStatus)](https://jenkins../..project/lastBuild/) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-06-01T12:17:09.883

关于设置 Jenkins 和 GitHub 的受保护分支。我正在使用 Jenkins 2.6，这些是我为使其工作而采取的步骤：

在您的存储库的 GitHub 网页上：

1.  导航到设置 > 分支。
2.  在保护分支下，单击选择分支下拉菜单，然后选择要设置为受保护分支的分支。
3.  根据需要启用选项。

在 Jenkins 服务器上：（确保已安装 Git 和 GitHub 插件）

1.  导航到管理 Jenkins > 配置系统。
2.  在 GitHub 下，将 API URL 设置为[https://api.github.com](https://api.github.com)。虽然这是默认值。
3.  为凭据选择您生成的令牌。如果您尚未生成令牌，请单击高级...，然后单击附加操作，您可以将您的登录名和密码转换为令牌并将其用作您的凭据。

此外，请确保您的 Jenkins 使用的 GitHub 帐户是存储库的协作者。我已将其设置为写入权限级别。

希望这可以帮助。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-01-24T18:14:20.317

[我按照亚历克斯](https://stackoverflow.com/users/8255399/alex)的指示，它奏效了。

但是，对于 GitHub Enterprise，您需要在将服务器添加到 Jenkins 时修改 API URL。

例如，如果您的公司是 creditcard.com，那么您的 URL 将是

[https://github.creditcard.com/api/v3/](https://github.creditcard.com/api/v3/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-12-17T03:52:15.507

**编辑：**

我不再使用这种方法，请使用其他答案之一。

**更新：对于我们的具体情况，我最终做了什么：（** *以上答案很棒 - 谢谢！）*

因为我们的构建服务器不在互联网上，所以我们有一个脚本可以将构建状态发布到 github 的 gh-pages 分支。

*   开始构建图章失败
*   构建标记成功结束
*   项目在主项目之后运行以发布结果 -> 构建状态、API 文档、测试报告和测试覆盖率。

GitHub 缓存图像，因此我们创建了 .htaccess 文件，该文件指示构建状态图像的短暂缓存超时。

**将它放在带有构建状态图像的目录中：**

```
ExpiresByType image/png "access plus 2 minutes" 
```

[这是](https://github.com/typhoon-framework/Typhoon/blob/master/build.xml)构建脚本。发布到 gh-pages 的目标是***'--publish.site.dry.run'***

配置不到 400 行，我们有：

*   编译检查
*   单元和集成测试
*   测试报告
*   代码覆盖率报告
*   API 文档
*   发布到 Github

**. . 并且此脚本可以在 Jenkins 内部或外部运行，因此：**

*   开发人员可以在提交之前运行此脚本，从而减少影响其他人的损坏构建的机会。
*   故障很容易在本地重现。

**结果：**

[项目主页](https://github.com/typhoon-framework/Typhoon)有构建状态，每次构建后更新，以及最新的 API 文档、测试结果和测试覆盖率。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-04-07T07:10:59.823

[Jently](https://github.com/vaneyckt/Jently)更新你的[Github 提交状态](https://github.com/blog/1227-commit-status-api)（如上面@vonc 所述），不幸的是他们还没有实现[Repo Status API](http://developer.github.com/v3/repos/statuses/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-27T22:00:39.643

对于**管道项目**，您可以像这样使用**post**部分：

```
void setBuildStatus(String message, String state) {
  step([
      $class: "GitHubCommitStatusSetter",
      reposSource: [$class: "ManuallyEnteredRepositorySource", url: "https://github.com/my-user/my-repo"],
      contextSource: [$class: "ManuallyEnteredCommitContextSource", context: "ci/jenkins/build-status"],
      errorHandlers: [[$class: "ChangingBuildStatusErrorHandler", result: "UNSTABLE"]],
      statusResultSource: [ $class: "ConditionalStatusResultSource", results: [[$class: "AnyBuildResult", message: message, state: state]] ]
  ]);
}

pipeline {
    agent any

    triggers {
        githubPush()
    }

    stages {

        stage('Hello') {
            steps {
                echo 'Hello World'
            }
        }

    }

    post {
        success {
            setBuildStatus("Build succeeded", "SUCCESS");
        }
        failure {
            setBuildStatus("Build failed", "FAILURE");
        }
    }
} 
```

只需更改“https://github.com/my-user/my-repo”即可满足您的 github 存储库。

> 参考：[https ://stackoverflow.com/a/47162309/4261333](https://stackoverflow.com/a/47162309/4261333)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-22T20:58:50.390

**添加到[这个答案](https://stackoverflow.com/a/26910986/11339547)，还有[这个](https://stackoverflow.com/a/51003334/11339547)他们已经回答了这个问题，但没有给我们关于这个问题的正确直觉**

*所以，这是我的直觉：*

*   我们需要在我们的 GitHub 提交中添加状态，这个状态是基于我们的 Jenkins 构建的结果。
*   为此，我们需要让 Jenkins 访问*GitHub API*而不是 repo，我们通过 OAuth 执行此操作，我们可以创建令牌，`GH settings -> Developer settings -> Personal access tokens`然后用于公共 GH repo，只需检查 repo:status，对于私有 repo，请检查*整个 repo部分*
*   创建访问令牌后，您需要将其添加到您的 Jenkins 服务器：
*   *将访问令牌复制并粘贴到您的Jenkins 配置*下的 GitHub 插件部分设置
**   创建一个默认为 api.github.com 的 GH 服务器，并将访问令牌添加为秘密文本凭据。*   最后一步是在创建管道时添加构建后设置。*

 ****资源：***

*   这是一段[YT 视频](https://youtu.be/nCKxl7Q_20I?t=2069)，他在其中介绍了上述步骤。
*   了解[OAuth](https://en.wikipedia.org/wiki/OAuth)*

# clojure - 基本 Clojure：如何展平嵌套列表？

> ID：14274295
> 
> 赞同：2
> 
> 时间：2013-01-11T08:31:20.277
> 
> 标签：clojure

请看下面的代码：

```
(def data {:color ["R", "B", "G"] :name "Hello" :up "down"})

(defn collapse-vector-kvp [k v] 
   (map #(hash-map k %) v))

(defn collapse-map [m]
   (map #(let 
      [x %] 
      (if (vector? (val x)) 
            (collapse-vector-kvp (key x) (val x))
            (hash-map (key x) (val x))
        )) m))

(collapse-map data)

=> ({:name "Hello"} ({:color "R"} {:color "B"} {:color "G"}) {:up "down"}) 
```

我想做的是创建一个列表，而不是将“颜色”条目放在列表中的列表中。这很容易实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T08:41:32.297

```
user=> (def data2 '({:name "Hello"} ({:color "R"} {:color "B"} {:color "G"}) {:up "down"}))
#'user/data2
user=> (flatten data2)
({:name "Hello"} {:color "R"} {:color "B"} {:color "G"} {:up "down"}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T09:15:45.297

另一个版本`collapse-map`：

```
(defn collapse-map [m]
  (let [sep-m (group-by (comp vector? val) m)]
    (concat (map (fn [[k v]] {k v}) 
                 (sep-m false))
            (apply concat (map (fn [[k v]] 
                                 (collapse-vector-kvp k v)) 
                               (sep-m true))))))

(def test-data {:color ["R" "B" "G"] 
                :name "Hello" 
                :k ["v1" "v2" "v3"] 
                :up "down"})

(collapse-map test-data)
=> ({:name "Hello"}
    {:up "down"}
    {:color "R"}
    {:color "B"}
    {:color "G"}
    {:k "v1"}
    {:k "v2"}
    {:k "v3"}) 
```

# azure - Azure 云存储与 Windows Azure 网站

> ID：14274298
> 
> 赞同：0
> 
> 时间：2013-01-11T08:31:25.707
> 
> 标签：azure, ravendb, azure-storage

是否可以将 Azure 云存储与 Windows Azure 网站一起使用？

我发现的所有云存储代码示例都使用带有 Web 角色的 Azure 云服务。

我使用的是嵌入式 RavenDB，所以我需要 Azure 云存储，对吧？

我目前正在使用 Azure 云服务 + Azure 云存储。

PS。这是一个几乎没有流量的小型个人网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:42:47.377

Azure 云存储（Blob、表等）是在底层使用 REST 协议的普通网络服务。可以从 Azure 云服务以及 Azure 网站访问云存储服务。您还可以从本地应用程序中使用 Azure 云存储（但是，由于网络延迟，它可能比从云中慢一点）。

Azure 云存储 API（您可能提到过）似乎是在 Azure 网站上使用的最佳选择。

请注意，这同样适用于 Azure SQL - 它可以用于 Azure 云服务以及 Azure 网站（包括本地应用程序）

# android - 在android上处理包含特殊字符的JSON数据的转储和重新加载的正确方法？

> ID：14274303
> 
> 赞同：1
> 
> 时间：2013-01-11T08:31:40.450
> 
> 标签：android, json, encoding, unicode-escapes

不确定是否已经回答了这个问题，但是快速搜索并没有得到令人满意的结果。
我遇到了以下情况：

*   具有 REST API 和 JSON 格式数据块的 Web 服务
*   android 客户端应用程序与此服务通信并在本地缓存/处理数据

we 服务由一家德国公司运营，因此结果数据中的某些字符串包含特殊字符，例如德语变音符号：

```
// example resonse
[
    {
         "title" : "reward 1",
         "description" : "Ein gro\u00dfer Kaffee f\u00fcr dich!"
    },
    {
         "title" : "reward 2",
         "description" : "Eine Pizza f\u00fcr dich!"
    },
    ...
] 
```

在本地，应用程序使用一组反映响应对象的类（例如，上例的*Reward*和*RewardResponse*类）来解析数据。这些类中的每一个都可以从/到 JSON 读取和转储自身 - 然而这就是事情变得丑陋的地方。

以上面的例子为例，org.json 将正确解析数据，生成的字符串将包含特殊字符 'ß' ( *\u00df* ) 和 'ü' ( *\u00fc* ) 的正确 Unicode 版本。

```
final RewardResponse response = new RewardResponse(jsonData);
final Reward reward = response.get(0);

// this will print "Ein großer Kaffee für dich!"
Log.d("dump server data", reward.getDescription());

final Reward reward2 = new Reward(reward.toJSON());

// this will print "Ein gro�er Kaffee f�r dich!"
Log.d("dump reloaded data", reward2.getDescription()); 
```

如您所见，加载*JSONObject.toString()*生成的数据时存在问题。
主要发生的事情是*JSONObject将以**“\uXXXX”*的形式解析转义，但它会将它们转储为纯 UTF-8 文本。

反过来，在解析时，它不会正确读取 unicode，而是在结果字符串中插入替换字符（在*\uffff*上方作为代码点）。

我当前的解决方法包括一个查找表，其中包含 Unicode Latin1 补充字符及其各自的转义版本（*\u00a0*到*\u00ff*）。但这也意味着我必须检查每一个转储的 JSON 文本，并在每次转储某些内容时用转义版本替换字符。

**请告诉我有更好的方法！**

（注意：有[这个问题](https://stackoverflow.com/questions/5536140/android-parsing-special-characters-a-o-u-in-json)，但是他在磁盘上的本地文件编码有问题。
如您所见，我上面的问题是可以重现的，而无需写入磁盘）

**编辑：**根据评论中的要求，这里是*toJSON()*方法：

```
public final String toJSON() {
    JSONObject obj = new JSONObject();

    // mTitle and mDescription contain the unmodified
    // strings received from parsing.
    obj.put("title", mTitle);
    obj.put("description", mDescription);

    return obj.toString();
} 
```

作为旁注，如果我使用*JSONObject.toString()*或*JSONStringer*没有区别。（文档建议使用*.toString()*）

**编辑：**只是为了从等式中删除*奖励*，这会重现问题：

```
final JSONObject inputData = new JSONObject("{\"description\":\"Ein gro\\u00dfer Kaffee\"}");
final JSONObject parsedData = new JSONObject(inputData.toString());

Log.d("inputData", inputData.getString("description"));
Log.d("parsedData", parsedData.getString("description")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:16:11.630

[注意：作为更好格式的答案发布]

我刚刚尝试了这个例子

```
final JSONObject inputData = new JSONObject("{\"description\":\"Ein gro\\u00dfer Kaffee\"}");
final JSONObject parsedData = new JSONObject(inputData.toString());

Log.d("inputData", inputData.getString("description"));
Log.d("parsedData", parsedData.getString("description")); 
```

在我运行 Android 4.2.1 的 Nexus 7 和运行 4.1.2 的 Nexus S 上，它按预期工作：

```
D/inputData(17281): Ein großer Kaffee
D/parsedData(17281): Ein großer Kaffee 
```

您在哪个 Android 版本中发现了问题？

# ios - 从全屏控制器到标签栏控制器的视图控制器导航模式

> ID：14274305
> 
> 赞同：0
> 
> 时间：2013-01-11T08:31:45.810
> 
> 标签：ios, objective-c, xcode, model-view-controller, uiviewcontroller

大家好，提前感谢您的帮助！我将开发我的第一个 iPad（非通用）应用程序，我对如何实现 ViewController 模式有些疑问。第一个`ViewController`（`rootViewController`，对吗？）将是`fullscreen`登录视图。身份验证后，第二个`viewcontroller`将是`UITabbarController`. 你对实现这种模式有什么建议吗？`rootViewController`登录后必须更换吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:44:15.247

您的根视图控制器将是 UINavigationController。登录屏幕将是导航控制器的根视图。您无需更改根视图控制器。您将它们堆叠在导航控制器中。

# r - 在 data.frame 中显示重复记录并省略单个记录

> ID：14274306
> 
> 赞同：2
> 
> 时间：2013-01-11T08:31:50.777
> 
> 标签：r, duplicates, dataframe

我一直在努力解决如何在 R 中仅选择重复的 data.frame 行。例如，我的 data.frame 是：

```
age=18:29
height=c(76.1,77,78.1,78.2,78.8,79.7,79.9,81.1,81.2,81.8,82.8,83.5)
Names=c("John","John","John", "Harry", "Paul", "Paul", "Paul", "Khan", "Khan", "Khan", "Sam", "Joe")
village <- data.frame(Names, age, height)

 Names age height
 John  18   76.1
 John  19   77.0
 John  20   78.1
 Harry  21   78.2
 Paul  22   78.8
 Paul  23   79.7
 Paul  24   79.9
 Khan  25   81.1
 Khan  26   81.2
 Khan  27   81.8
 Sam  28   82.8
 Joe  29   83.5 
```

我想看到如下结果：

```
Names age height
John  18   76.1
John  19   77.0
John  20   78.1
Paul  22   78.8
Paul  23   79.7
Paul  24   79.9
Khan  25   81.1
Khan  26   81.2
Khan  27   81.8 
```

谢谢你的时间...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T08:42:43.593

使用`duplicated`两次的解决方案：

```
village[duplicated(village$Names) | duplicated(village$Names, fromLast = TRUE), ]

   Names age height
1   John  18   76.1
2   John  19   77.0
3   John  20   78.1
5   Paul  22   78.8
6   Paul  23   79.7
7   Paul  24   79.9
8   Khan  25   81.1
9   Khan  26   81.2
10  Khan  27   81.8 
```

另一种解决方案`by`：

```
village[unlist(by(seq(nrow(village)), village$Names, 
                  function(x) if(length(x)-1) x)), ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T08:38:49.147

```
village[ duplicated(village),] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:48:36.833

我使用重复的“最整洁”找到@Sven 的答案，但您也可以通过许多其他方式做到这一点。这里还有两个：

1.  `table()`通过将列表大于 1 的名称与第一列中存在的名称匹配来使用和子集：

    ```
    village[village$Names %in% names(which(table(village$Names) > 1)), ] 
    ```

2.  用于`ave()`以稍微不同的方式“制表”，但以相同的方式进行子集化：

    ```
    village[with(village, ave(as.numeric(Names), Names, FUN = length) > 1), ] 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-09T18:23:09.473

或者，您可以在 dplyr 管道中使用分组和汇总。

它的代码行数更多，计算成本可能更高。但是，优点是您可以通过多列的复合键找到重复的行，而不是仅从一列中找到重复的行。

```
library(tidyverse)

a <- c(8, 18, 19, 19, 19, 20, 30, 32, 32)
b <- c(1950, 1965, 1981, 1971, 1981, 1999, 1969, 1994, 1999)
c <- c(1, 2, 3, 4, 5, 6, 7, 8, 9)
df <- data.frame(a, b, c)    
df

# Description:df[,3] [9 × 3]
# a
# <dbl>
# b
# <dbl>
# c
# <dbl>
# 8 1950    1       
# 18    1965    2       
# 19    1981    3       
# 19    1971    4       
# 19    1981    5       
# 20    1999    6       
# 30    1969    7       
# 32    1994    8       
# 32    1999    9       
# 9 rows

df[duplicated(df$a) | duplicated(df$a, fromLast = T), ]

# Description:df[,3] [5 × 3]
#  
#  
# a
# <dbl>
# b
# <dbl>
# c
# <dbl>
# 3 19  1981    3   
# 4 19  1971    4   
# 5 19  1981    5   
# 8 32  1994    8   
# 9 32  1999    9   
# 5 rows

df[duplicated(df$a, df$b) | duplicated(df$a, df$b, fromLast = T), ]

# Description:df[,3] [5 × 3]
#  
#  
# a
# <dbl>
# b
# <dbl>
# c
# <dbl>
# 3 19  1981    3   
# 4 19  1971    4   
# 5 19  1981    5   
# 8 32  1994    8   
# 9 32  1999    9   
# 5 rows

df %>%
  group_by(a, b) %>%
  summarise(a = a, b = b, c = c, n = n()) %>%
  subset(n > 1) %>%
  select(a, b, c)
# 
# A tibble:2 x 3
# Groups:a, b [1]
# a
# <dbl>
# b
# <dbl>
# c
# <dbl>
# 19    1981    3       
# 19    1981    5       
# 2 rows

df[duplicated(df, incomparables = c(c)), ]
# Error: argument 'incomparables != FALSE' is not used (yet)
# This error occurs even with no libraries loaded. 
```

我可能遗漏了`duplicated()`括号中使用的方式，但我无法弄清楚。

此外， dplyr 返回一个 tibble，删除索引，这对您来说可能是一个缺点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-28T19:12:47.353

我想出了一个使用嵌套 sapply 的解决方案：

```
> village_dups = 
village[unique(unlist(which(sapply(sapply(village$Names,function(x) 
which(village$Names==x)),function(y) length(y)) > 1))),]
> village_dups
   Names age height
1   John  18   76.1
2   John  19   77.0
3   John  20   78.1
5   Paul  22   78.8
6   Paul  23   79.7
7   Paul  24   79.9
8   Khan  25   81.1
9   Khan  26   81.2
10  Khan  27   81.8 
```

# java - 读取正在写入的文件 - 锁定它？

> ID：14274309
> 
> 赞同：4
> 
> 时间：2013-01-11T08:32:04.547
> 
> 标签：java, io

有一个文件 - 存储在供应商经常更新的外部服务器上。我的应用程序每分钟轮询该文件以获取值。我正在做的就是阅读文件。

我担心这样做我可能会无意中锁定文件，因此供应商也无法编写它。这是一种可能吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-10T12:29:11.370

除了 Eric 的回答 - 您可以检查临时文件的 Last Modified 属性，并且仅在它更改时将其与您的“工作”文件合并 - 这应该可以保护您免受读/写冲突，并且仅在供应商写入后才合并文件温度。虽然这很混乱并且 mrab 的评论是有效的，但应该找到更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T12:58:46.820

有用于卷的[Windows 卷影复制](http://en.wikipedia.org/wiki/Shadow_Copy)服务。这将允许读取备份副本。

如果第三方软件也在 java 中，并且使用 Logger，那应该是可调整的：每分钟从 10 个文件左右写入到下一个。

我会尝试无情地读取文件（自上次读取后修改时），直到出现问题。也许您可以在周末或午夜进行数百次读取的测试运行，而不会造成任何伤害。

***我的回答：*** 也许你需要一个本地监视程序，[一个目录器的监视服务](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)，它等到文件被修改，然后快速启动；之后，允许传输副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T12:21:57.637

我已经多次遇到这个问题，正如 Peter Lawrey 所说，没有任何可移植的方法可以做到这一点，如果你的环境是 Unix，这根本不应该是一个问题，因为这些并发访问条件由操作系统正确管理. 然而，windows 根本不处理这个问题（是的，这是使用业余操作系统进行生产工作的结果，哈哈）。

话虽如此，如果您的供应商足够灵活，就有办法解决这个问题。他们可以写入临时文件，完成后将临时文件移动到最终目的地。通过这样做，您可以避免您和供应商之间对文件的任何并发访问。

另一种方法是准确（困难？）知道供应商更新的时间，并避免在某些时间范围内读取文件。例如，如果您的供应商每小时更新一次文件，请避免从 5 点到 5 点读取。

希望能帮助到你。

# android - App Widget 总是围绕内容进行布局

> ID：14274311
> 
> 赞同：0
> 
> 时间：2013-01-11T08:32:08.543
> 
> 标签：android, android-layout, android-widget

对于主屏幕小部件，我已经尝试过`layout_width`属性`match_parent`以及`fill_parent`布局文件的根元素。但是当在 App Widget 中显示时，它仍然被包裹在内容周围。

应用小部件布局：

```
<StackView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/xxxxxxxxx"
    android:layout_width="match_parent" <!-- always acts like wrap_content -->
    android:layout_height="fill_parent"
    android:gravity="center"
    android:loopViews="true" /> 
```

小部件分配的网格大小为 4X2：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="250dp"
    android:minHeight="110dp"
    . . . . .  /> 
```

但是在添加到主屏幕后，widget 的宽度在主屏幕上不会占用 4 个网格，它只是围绕内容。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:44:03.490

有一个类似的问题，它似乎 minHeight 和 minWidth 因素也是最大尺寸，我敢打赌，如果你将 minWidth 增加到 (4 * 74) - 2 = 294dp 它会起作用。对于您的 minHeight，每个指南的像素高度将是 (2 * 74) - 2 = 146dp，正如您所知。

# xml - 带有 Null 的 Oracle SELECT XMLELEMENT

> ID：14274316
> 
> 赞同：4
> 
> 时间：2013-01-11T08:32:40.120
> 
> 标签：xml, oracle, oracle11g

使用 Oracle 11，当我这样做时

```
 SELECT XMLELEMENT("dummy", NULL) as xml_1 
    FROM dual 
```

输出是`<dummy></dummy>`

我怎样才能强制返回 `<dummy />`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T10:48:36.570

is this just for presentation purposes, as both are the same. Oracle's function just happen to return non short tag style.

xmltype constructor though will convert it on 11g (in 10g the extract function did too, but not in 11g).

```
SQL> SELECT xmltype(XMLELEMENT("dummy", NULL).getclobval()) as xml_1 from dual;

XML_1
--------------------------------------------------------------------------------
<dummy/> 
```

# xslt - 提取所有节点的 Xpath，然后提取它们的属性

> ID：14274317
> 
> 赞同：2
> 
> 时间：2013-01-11T08:32:41.433
> 
> 标签：xslt

由于我的初学者状态，我在过去 2 天一直在努力使用 xslt。我的要求是，给定任何输入 XML 文件，我希望输出是所有标签的所有 XPath 的列表，按它们出现的顺序排列原始 XML 文档（父、父、父属性列表/子、父/子/childOFchild 等等）。XSLT 不应特定于任何单个 XMl 模式。它应该适用于任何有效的 XML 文件。

前任：

如果输入 XML 是：

```
<v1:Root>
<v1:UserID>test</v1:UserID>
<v1:Destination>test</v1:Destination>
<v1:entity name="entiTyName">
<v11:attribute name="entiTyName"/>
<v11:attribute name="entiTyName"/>
<v11:attribute name="entiTyName"/>
<v11:filter type="entiTyName">
<v11:condition attribute="entiTyName" operator="eq" value="{FB8D669E-D090-E011-8F43-0050568E222C}"/>
<v11:condition attribute="entiTyName" operator="eq" value="1"/>
</v11:filter>
<v11:filter type="or">
<v11:filter type="or">
<v11:filter type="and">
<v11:filter type="and">
<v11:condition attribute="cir_customerissuecode" operator="not-like" value="03%"/>
</v11:filter>
</v11:filter>
</v11:filter>
</v11:filter>
</v1:entity>
</v1:Root> 
```

我希望我的输出是：

```
/v1:Root/v1:UserID
/v1:Root/v1:Destination
/v1:Root/v1:entity/@name
/v1:Root/v1:entity/v11:attribute
/v1:Root/v1:entity/v11:attribute/@name
/v1:Root/v1:entity/v11:attribute[2]
/v1:Root/v1:entity/v11:attribute[2]/@name
/v1:Root/v1:entity/v11:attribute[3]
/v1:Root/v1:entity/v11:attribute[3]/@name
/v1:Root/v1:entity/v11:filter/@type
/v1:Root/v1:entity/v11:filter/v11:condition
/v1:Root/v1:entity/v11:filter/v11:condition/@attribute
/v1:Root/v1:entity/v11:filter/v11:condition/@operator
/v1:Root/v1:entity/v11:filter/v11:condition/@value
/v1:Root/v1:entity/v11:filter/v11:condition[2]
/v1:Root/v1:entity/v11:filter/v11:condition[2]/@attribute
/v1:Root/v1:entity/v11:filter/v11:condition[2]/@operator
/v1:Root/v1:entity/v11:filter/v11:condition[2]/@value
/v1:Root/v1:entity/v11:filter[2]/v11:filter/@type
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/@type
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter/@type
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter/v11:condition
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter/v11:condition/@attribute
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter/v11:condition/@operator
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter/v11:condition/@value
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/@type
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition/@attribute
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition/@operator
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition/@value
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition[2]
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition[2]/@attribute
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition[2]/@operator
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition[2]/@value 
```

因此，它基本上是每个元素的所有 XPath，然后是元素属性的 Xpath。

我有一个 XSLT，它是这样的：

```
 <xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" indent="no" />
    <xsl:template match="*[not(child::*)]">
        <xsl:for-each select="ancestor-or-self::*">
            <xsl:value-of select="concat('/', name())" />
            <xsl:if test="count(preceding-sibling::*[name() = name(current())]) != 0">
                <xsl:value-of
                    select="concat('[', count(preceding-sibling::*[name() = name(current())]) + 1, ']')" />
            </xsl:if>
        </xsl:for-each>

        <xsl:apply-templates select="*" />
    </xsl:template>

    <xsl:template match="/">
        <xsl:apply-templates select="*" />
    </xsl:template>

</xsl:stylesheet> 
```

得到 Produced 的输出不适合复杂标签以及生成的 Xpath 列表中的标签属性:(。

请帮助我修复此 xslt 以产生如上所述的输出。

上述 XSLT 的当前输出如下所示：

```
/v1:Root/v1:UserID
/v1:Root/v1:Destination
/v1:Root/v1:entity/v11:attribute
/v1:Root/v1:entity/v11:attribute[2]
/v1:Root/v1:entity/v11:attribute[3]
/v1:Root/v1:entity/v11:filter/v11:condition
/v1:Root/v1:entity/v11:filter/v11:condition[2]
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter/v11:condition
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition
/v1:Root/v1:entity/v11:filter[2]/v11:filter/v11:filter/v11:filter[2]/v11:condition[2]
/v1:Root/v1:entity/v11:filter[2]/v11:filter[2]/v11:filter/v11:condition
/v1:Root/v1:entity/v11:filter[2]/v11:filter[2]/v11:filter[2]/v11:condition
/v1:Root/v1:entity/v11:filter[2]/v11:filter[2]/v11:filter[2]/v11:condition[2]
/v1:Root/v1:entity/v11:filter[2]/v11:filter[2]/v11:filter[2]/v11:condition[3] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:59:55.173

我认为您的示例输入和输出之间存在差异，因为输出描述了一个`filter`带有两个`condition`s 的元素，该元素不在源 XML 中。无论如何，我相信这是可行的：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="no" />
  <!-- Handle attributes -->
  <xsl:template match="@*">
    <xsl:apply-templates select="ancestor-or-self::*" mode="buildPath" />
    <xsl:value-of select="concat('/@', name())"/>
    <xsl:text>&#xA;</xsl:text>
  </xsl:template>

  <!-- Handle non-leaf elements (just pass processing downwards) -->
  <xsl:template match="*[@* and *]">
    <xsl:apply-templates select="@* | *" />
  </xsl:template>

  <!-- Handle leaf elements -->
  <xsl:template match="*[not(*)]">
    <xsl:apply-templates select="ancestor-or-self::*" mode="buildPath" />
    <xsl:text>&#xA;</xsl:text>
    <xsl:apply-templates select="@*" />
  </xsl:template>

  <!-- Outputs a path segment for the matched element: '/' + name() + [ordinalPredicate > 1] -->
  <xsl:template match="*" mode="buildPath">
    <xsl:value-of select="concat('/', name())" />
    <xsl:variable name="sameNameSiblings" select="preceding-sibling::*[name() = name(current())]" />
    <xsl:if test="$sameNameSiblings">
      <xsl:value-of select="concat('[', count($sameNameSiblings) + 1, ']')" />
    </xsl:if>
  </xsl:template>

  <!-- Ignore text -->
  <xsl:template match="text()" />
</xsl:stylesheet> 
```

# powershell - 在 Powershell 中监控文件并使用 ArrayList

> ID：14274318
> 
> 赞同：0
> 
> 时间：2013-01-11T08:32:44.630
> 
> 标签：powershell

我是 PowerShell 的新手。我想在每次更改时向 ArrayList 添加文件路径。但是，此 PowerShell 脚本以某种方式失败。任何提示我可能做错了什么？

```
$watcher = New-Object System.IO.FileSystemWatcher
$watcher.Path = "C:\Mydir"
$watcher.IncludeSubdirectories = $true
$watcher.EnableRaisingEvents = $true

$jobs = New-Object System.Collections.ArrayList

$changed = Register-ObjectEvent $watcher "Changed" -Action {
    $changedFile = $($eventArgs.FullPath)
    $jobs.Add($changedFile)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:38:42.743

这是一个范围问题。添加全局范围修饰符：

```
$global:jobs.Add($changedFile) 
```

有关更多帮助，请参阅 about_Scopes。

# c# - 如何在 C# 中模拟多重继承？

> ID：14274320
> 
> 赞同：1
> 
> 时间：2013-01-11T08:32:51.097
> 
> 标签：c#, .net, inheritance

> **可能重复：**
> [C# 中的多重继承](https://stackoverflow.com/questions/178333/multiple-inheritance-in-c-sharp)

*我知道 C# 不支持类中的多重继承。*

但是，我需要在 MyClass 中添加 ClassA 和 ClassB 的*功能*：

```
public class ClassA
{
    /* Third party class*/
}
public class ClassB
{
    /* Third party class*/
}

public class MyClass : ClassA, ClassB
{
    /*Compilation error*/
} 
```

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T08:35:24.090

在 C#中只能有多个*接口*继承。您可以对这些第三方类做的最好的事情是封装每个 in 的实例`MyClass`并重新创建每个函数调用并将其传递给适当的实例。

```
public class MyClass
{
    ClassA a = new ClassA();
    ClassB b = new ClassB();

    void AMethod()
    {
       a.AMethod();
    }

    int BMethod(int value)
    {
      return b.BMethod(value);
    }
} 
```

如果您需要能够在需要 a 的位置使用此类`ClassA`，则可以添加转换运算符以将其转换回`ClassA`or `ClassB`。此时返回这些新实例或公开您的内部实例是否更合适是您需要仔细考虑的一个问题。

显然，如果`ClassA`或`ClassB` *确实*实现了任何接口，我建议您在新类上也实现这些接口。

但是，归根结底，C# 没有多重实现继承。如果你*需要*这样的（这是罕见的），那么 C# 不是合适的语言。任何其他 CLR 语言也不是，因为这是 CLR 限制，而不是 C# 限制。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T08:39:59.327

If you cannot change `ClassA` and `ClassB` I suggest creating subtypes for these classes and then aggregating.

```
//third party
class ClassA
{
    void X();
}
class ClassB
{
    void Y();
}
//your code
interface IClassA
{
    void X();
}
interface IClassB
{
    void Y();
}

class MyClassA : ClassA, IClassA { }
class MyClassB : ClassB, IClassB { }

class MyClass : IClassA, IClassB
{
    IClassA a = new MyClassA();
    IClassB b = new MyClassB();
    public void X()
    {
        a.X();
    }

    public void Y()
    {
        b.Y();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T08:35:09.200

不，您不能从多个类继承。只允许多接口继承。考虑改用组合：

```
public class MyClass : ClassA, IClassB
{
    private IClassB _classB; // delegate IClassB implementation to it

    public MyClass(IClassB classB)
    {
       _classB = classB;
    }

    public void BMethod()
    {
        _classB.BMethod();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T08:35:30.017

为 ClassA 和 ClassB（分别称为 IClassA 和 IClassB）创建一个接口，其中包含您想要访问的所有方法。

然后在 ClassA 和 ClassB 中实现该接口。

最后，让 MyClass 实现 IClassA 和 IClassB：

```
public class MyClass : IClassA, IClassB
{
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T08:34:52.003

您可以生成一个接口`ClassA`，`ClassB`然后从 2 个接口继承`MyClass`

# iphone - OpenCV视频处理教程问题

> ID：14274326
> 
> 赞同：2
> 
> 时间：2013-01-11T08:33:26.697
> 
> 标签：iphone, ios, objective-c, opencv, computer-vision

我遵循[OpenCV 网站上的 iOS 视频处理教程，](http://docs.opencv.org/trunk/doc/tutorials/ios/video_processing/video_processing.html)并设法在设备上编译和安装它。但是，当我单击“开始”按钮时，什么都没有发生。显然，我的`- (void)processImage:(Mat&)image`回调从未被调用过。你能给我一些提示可能是什么问题吗？

我检查了一些事情：

*   `actionStart`被调用，并且两个日志行都打印 YES
*   该`self`对象在分配给时有效`self.videoCamera.delegate`
*   `imageView`有效且在屏幕上可见
*   `videoCamera`在调用其`start`方法时初始化

我使用 iPhone 3GS 进行测试。

这是我的 ViewController.h 的完整源代码：

```
#import <UIKit/UIKit.h>
#import <opencv2/highgui/cap_ios.h>

@interface ViewController : UIViewController <CvVideoCameraDelegate>
{
    IBOutlet UIImageView* imageView;
    IBOutlet UIButton* button;

    CvVideoCamera* videoCamera;
}

- (IBAction)actionStart:(id)sender;

@property (nonatomic, strong) CvVideoCamera* videoCamera;

@end 
```

和 ViewController.mm：

```
@implementation ViewController

@synthesize videoCamera;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.videoCamera = [[CvVideoCamera alloc] initWithParentView:imageView];
    self.videoCamera.delegate = self;

    self.videoCamera.defaultAVCaptureDevicePosition = AVCaptureDevicePositionFront;
    self.videoCamera.defaultAVCaptureSessionPreset = AVCaptureSessionPreset352x288;
    self.videoCamera.defaultAVCaptureVideoOrientation = AVCaptureVideoOrientationPortrait;
    self.videoCamera.defaultFPS = 30;
    self.videoCamera.grayscaleMode = NO;

}

#pragma mark - UI Actions

- (IBAction)actionStart:(id)sender;
{
    [self.videoCamera start];
    NSLog(@"video camera running: %d", [self.videoCamera running]);
    NSLog(@"capture session loaded: %d", [self.videoCamera captureSessionLoaded]);
}

#pragma mark - Protocol CvVideoCameraDelegate

- (void)processImage:(cv::Mat&)image
{
    // Do some OpenCV stuff with the image
    cv::Mat image_copy;
    cvtColor(image, image_copy, CV_BGRA2BGR);

    // invert image
    bitwise_not(image_copy, image_copy);
    cvtColor(image_copy, image, CV_BGR2BGRA);
}

@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T10:11:18.420

我在 iPhone 4 上测试过，效果很好。也许 iPhone 3GS 没有前置摄像头？然后你必须改变这一行`self.videoCamera.defaultAVCaptureDevicePosition = AVCaptureDevicePositionFront`：`self.videoCamera.defaultAVCaptureDevicePosition = AVCaptureDevicePositionBack`

# python - 使用 KeyboardInterrupt 关闭多线程应用程序

> ID：14274327
> 
> 赞同：2
> 
> 时间：2013-01-11T08:33:28.447
> 
> 标签：python, multithreading, exception, exception-handling, pygame

我有一个有两个线程的应用程序。一个是运行简单游戏的 pygame 线程，另一个线程是一个监听服务器，它接受用于控制游戏的消息。

这是精简后的伪代码：

```
class ServerThread(threading.Thread):
    def run(self):
        class SingleTCPHandler(SocketServer.BaseRequestHandler):
            try:
                while(1):
                ...
                #Receive messages from socket. Add them to pygame event queue
                ...
            except KeyboardInterrupt:
                sys.exit(0)
...
...
class PygameThread(threading.Thread):
    def run(self):
    ...
    #pygame stuff
    ...
    #The following pygame code closed the app when closing the pygame window while running as a single thread
        for event in pygame.event.get():
                if event.type==QUIT:
                    exit()
   ...
try:
    server_thread = ServerThread()
    server_thread.start()
    pygame_thread = PygameThread()
    pygame_thread.start()
except KeyboardInterrupt:
    sys.exit(0) 
```

似乎没有任何异常被捕获。我试过只运行没有pygame线程的服务器和：

```
 try:
            while(1):
            ...
            #Receive messages from socket. Add them to pygame event queue
            ...
        except KeyboardInterrupt:
            sys.exit(0) 
```

不回应`Ctrl + c`

pygame 窗口标准关闭按钮（右边的小 x 操作）不再起作用。

我尝试了一种解决方法：

```
try:
    server_thread = ServerThread()
    server_thread.start()
    pygame_thread = PygameThread()
    pygame_thread.start()
except KeyboardInterrupt:
    sys.exit(0) 
```

也不起作用。

我正在寻找关闭应用程序的想法，而不必杀死启动应用程序的外壳。

**更新**

根据建议，我做了以下事情：将`while True`两个胎面中的前者更改为`while not self.stop_requested:`.

并且：

```
try:
    pygame_thread = PygameThread()
    pygame_thread.start()
    server_thread = ServerThread()
    server_thread.start()
except KeyboardInterrupt:
    pygame_thread.stop_requested = True
    server_thread.stop_requested = True 
```

它仍然无法正常工作。我还注意到，当我尝试使用 Ctrl+c 终止时，在运行此代码的控制台中，它只会被打印出来。

```
alan@alan ~/.../py $ python main.py 
^C^C^C^C^C^C^C 
```

**更新**

我做了一个小快捷方式并将服务器线程更改为守护程序，因此一旦 pygame 窗口（即 pygame 线程）关闭，它就会关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:30:13.447

在`except`主程序的 -block 中，您应该以某种方式通知您`Thread`的 s 自行停止。[您可以在此线程](https://stackoverflow.com/questions/14215047/what-to-do-with-thread-being-about-to-terminate/14215387#14215387)中查看我的答案，以了解我的意思。

基本上，将`while(1):`-loop替换为`while not self.stop_requested:`-loop。然后，您可以从`KeyboardInterrupt`实际捕获的主线程内部设置类的此字段。然后你也应该`join()`从你的主线程中的每个线程，然后你就可以安全地知道一切都停止了。

顺便说一句：我根本不会使用`while(1)`。`while True`更直观，因为 1 被评估为`bool`循环的每次迭代。为什么不写一个`bool`预期的地方？括号也是多余的。这种符号可以追溯到古老的 C，它没有布尔类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:50:09.573

`sys.exit`这个名字有点令人困惑，因为它实际上并没有终止或“退出”任何东西。它只抛出一个异常，如果你在一个线程中这样做，异常仍然是该线程的本地。要放入`SystemExit`您将需要的主要上下文中[`thread.interrupt_main`](http://docs.python.org/library/thread.html#thread.interrupt_main)。

# php - 使用 PDO 驱动程序（Pdo_odbc 或 pdo_ibm）的 DB2 的 php orm

> ID：14274328
> 
> 赞同：0
> 
> 时间：2013-01-11T08:33:33.100
> 
> 标签：php, orm, db2

使用学说、推进或任何其他 php orm，我可以将 db2 与 pdo 驱动程序一起使用吗？

如果没有直接支持，那我们可以为那个orm框架写db2的适配器来让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:50:26.373

[Doctrine](http://www.doctrine-project.org/)应该开箱即用地支持 DB2。

# python - Sailfish：如何在没有gpu的计算机上运行

> ID：14274329
> 
> 赞同：1
> 
> 时间：2013-01-11T08:33:43.270
> 
> 标签：python, opencl, gpu

有没有办法[`sailfish`](http://code.google.com/p/sailfish-cfd/)在没有**GPU**的系统上运行？
到目前为止的尝试：`PyOpenCL`工作正常。但是，没有一个示例`sailfish`可以正常运行！

错误出现在`sailfish` `backend_opencl.py`：

```
...
devices = platform.get_devices(device_type=cl.device_type.GPU)
RuntimeError: clGetDeviceIDs failed device not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:52:10.433

这是因为目标设备类型被硬编码为 GPU。

您可以尝试使用以下内容更改他们的代码：

```
platform.get_devices(device_type=cl.device_type.ALL) 
```

它将查找任何设备：GPU、CPU、加速器。

# delphi - 如何读取inf文件？

> ID：14274331
> 
> 赞同：3
> 
> 时间：2013-01-11T08:33:47.340
> 
> 标签：delphi, ini, inf

我曾经`TiniFile`读过一个 inf 文件。但在某些部分，标识是相同的， `TiniFile`无法阅读。

例如 ：

本节 ：

```
[AMD.Mfg]
%AMD.DeviceDesc0% = AMDSMBus, PCI\VEN_1002&DEV_4353
%AMD.DeviceDesc0% = AMDSMBus, PCI\VEN_1002&DEV_4363
%AMD.DeviceDesc0% = AMDSMBus, PCI\VEN_1002&DEV_4372
%AMD.DeviceDesc0% = AMDSMBus, PCI\VEN_1002&DEV_4385
%AMD.DeviceDesc0% = AMDSMBus, PCI\VEN_1022&DEV_780B 
```

我的代码：

```
 var
      inf : TiniFile;
      list : TStringList;
    begin
      //Create
      inf := TIniFile.Create(infPath);
      list := TStringList.Create;  
      inf.ReadSectionValues('AMD.Mfg', list);
      Memo1.Lines.AddStrings(list2);
    end; 
```

它显示这个：

```
%AMD.DeviceDesc0%=AMDSMBus, PCI\VEN_1002&DEV_4353
%AMD.DeviceDesc0%=AMDSMBus, PCI\VEN_1002&DEV_4353
%AMD.DeviceDesc0%=AMDSMBus, PCI\VEN_1002&DEV_4353
%AMD.DeviceDesc0%=AMDSMBus, PCI\VEN_1002&DEV_4353
%AMD.DeviceDesc0%=AMDSMBus, PCI\VEN_1002&DEV_4353 
```

我猜是同一个 ident 造成的，所以我的问题是当 ident 相同时如何阅读它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T08:46:35.613

TIniFile 是围绕 Windows API 调用读取/写入 INI 文件的包装器，因此受限于 Windows API 支持的内容，特别是[GetPrivateProfileString](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724353%28v=vs.85%29.aspx)

AFAIK 没有文件格式的正式定义，而且，正如您刚刚发现的，Microsoft 实现不支持重复键，因为该函数总是返回第一次出现。

如果您仔细查看 ReadSectionValues 实现，您会注意到它首先读取部分键，然后在循环中检索键值，因为这是使用提到的 GetPrivateProfileString 函数*的方式*，因此它得到的所有值相同电话。

我的建议是**停止使用 TINiFile 来读取不是 INI 文件的文件**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T09:08:01.867

您对“阅读”的含义非常模糊。实际上，您可以通过 Delphi 拥有的多种方式读取该文件。我个人会使用`TStringList.LoadFromFile`

问题是你读完之后会怎么做……

你也可以试试你的机会`TMemIniFile`来做这件事。但我个人肯定会避免使用任何与 INI 相关的方法，因为这些文件严重偏离 mbasic INI 前提，并且任何与 INI 相关的库都可能在任何升级时更改其实现，从而破坏使用它的程序。

# iphone - UIWebview 没有将资源与 html 文件一起保存

> ID：14274334
> 
> 赞同：0
> 
> 时间：2013-01-11T08:34:02.537
> 
> 标签：iphone, ios, xcode, cocoa-touch, uiwebview

> **可能重复：**
> [如何在 iOS 中缓存带有图像的整个网页](https://stackoverflow.com/questions/6696151/how-to-cache-a-whole-web-page-with-images-in-ios)

我已经从 url 下载了一个 html 页面，我正在尝试使用`UIWebView`. 当我这样做时，html 页面被保存，但 html 页面附带的图像和 javascript 文件没有。

我的代码是：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *filePath = [NSString stringWithFormat:@"%@/%@", [paths objectAtIndex:0],@"form.html"];

NSURL *url = [NSURL URLWithString:@"http://222.2.2.45/forms/form.html"];
NSData *urlData = [NSData dataWithContentsOfURL:url];
[urlData writeToFile:filePath atomically:YES];

[_web loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:filePath]]]; 
```

谁能告诉我如何将我的 html 文件附带的资源与 html 文件一起保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:48:05.330

我使用[ASIWebPageRequest](http://allseeing-i.com/ASIHTTPRequest/ASIWebPageRequest)来缓存网页。您将拥有相当多的东西（图像、javascript 等）。看我的代码。

在你的头文件中：

```
@property (retain, nonatomic)  ASIWebPageRequest *aSIRequest; 
```

在您的实现文件中：

```
//--------------------------------------------------------------------
-(void) loadContent {
    //use ASIWebPageRequest to load content from web and cache, or to load already cached content.
    //the content will get downloaded each time the internet will be reachable, so
    //the webpage cache will will always be up to date

    NSURL *url = [NSURL URLWithString:url_to_your_webpage];

    [self setASIRequest:[ASIWebPageRequest requestWithURL:url]];
    [self.aSIRequest setDelegate:self];
    [self.aSIRequest setDidFailSelector:@selector(webPageFetchFailed:)];
    [self.aSIRequest setDidFinishSelector:@selector(webPageFetchSucceeded:)];
    [self.aSIRequest setUrlReplacementMode:ASIReplaceExternalResourcesWithData];
    [self.aSIRequest setDownloadCache:[ASIDownloadCache sharedCache]];
    [self.aSIRequest setCacheStoragePolicy:ASICachePermanentlyCacheStoragePolicy];
    self.aSIRequest.cachePolicy = ASIAskServerIfModifiedCachePolicy|ASIFallbackToCacheIfLoadFailsCachePolicy;
    [self.aSIRequest setDownloadDestinationPath:
     [[ASIDownloadCache sharedCache] pathToStoreCachedResponseDataForRequest:[self aSIRequest]]];
    [self.aSIRequest startAsynchronous];
}
//--------------------------------------------------------------------
- (void)webPageFetchFailed:(ASIHTTPRequest *)theRequest{
    //this will generally get called if there is no data cached and no internet connection
    //or other damn reason.
    //let the user retry loading the content

    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error!" message:@"Failed to load the content." delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Retry", nil];
    [alert show];
    [alert release];
}
//--------------------------------------------------------------------
- (void)webPageFetchSucceeded:(ASIHTTPRequest *)theRequest{
    //load the webview with the downloaded or cashed content
    NSString *response = [NSString stringWithContentsOfFile: [theRequest downloadDestinationPath] encoding:[self.aSIRequest responseEncoding] error:nil];
    [youWebView loadHTMLString:response baseURL:[self.aSIRequest url]];
}
//--------------------------------------------------------------------
- (void) alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{
    if(buttonIndex == 1){//retry button tapped
        [self performSelector:@selector(loadContent) withObject:nil afterDelay:0.2];
    }
    else{//cancel button tapped
        //do nothing.
        //alternatively, you could lead the user to home screen or perform any else action
    }
}
//-------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T08:41:00.887

Based on this [page](https://superuser.com/questions/67604/free-mac-os-x-application-for-downloading-an-entire-website):

```
wget --mirror –w 2 –p --HTML-extension –-convert-links –P /home/user/sitecopy/ 
```

# android - 后退按钮重新启动活动而不是返回

> ID：14274338
> 
> 赞同：3
> 
> 时间：2013-01-11T08:34:48.110
> 
> 标签：android, android-intent, android-activity, activity-stack

我的应用程序中有一个错误，我无法弄清楚。共有三个活动： HomeActivity - `A`、 TestActivity -`B`和 ResultActivity - `C`。

活动以正常方式`A`启动`B`

```
Intent intent = new Intent(this, TestActivity.class);
startActivity(intent); 
```

然后活动以相同的方式`B`启动`C`。完成`C`后，它会像这样返回`A`清除堆栈

```
Intent intent = new Intent(this, HomeActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

现在这个过程可以无限重复，没有任何问题。但是，我有一个快捷方式，可以让用户`B`从`C`via开始，方法是向which uses to start`A`发送参数。现在发生的情况是，如果我按下后退按钮，处于活动状态，活动将重新启动，而不是返回到.`A` `intent.putExtra("startTest", true);``A``B``B``A`

根据以下内容，活动堆栈似乎很好`adb shell dumpsys activity`：

```
Activity stack:
* TaskRecord{408276f0 #60 A com.company.app}
clearOnBackground=false numActivities=3 rootWasReset=true
affinity=com.company.app
intent={act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.company.app/.LoginActivity bnds=[120,241][240,391]}
realActivity=com.company.app/.LoginActivity
lastActiveTime=756688148 (inactive for 6s)
* Hist #12: HistoryRecord{40ab2248 com.company.app/.TestActivity}
    packageName=com.company.app processName=com.company.app
    launchedFromUid=10109 app=ProcessRecord{4089aed0 16527:com.company.app/10109}
    Intent { cmp=com.company.app/.TestActivity }
    frontOfTask=false task=TaskRecord{408276f0 #60 A com.company.app}
    taskAffinity=com.company.app
    realActivity=com.company.app/.TestActivity
    base=/data/app/com.company.app-1.apk/data/app/com.company.app-1.apk data=/data/data/com.company.app
    labelRes=0x0 icon=0x7f02000b theme=0x103000d
    stateNotNeeded=false componentSpecified=true isHomeActivity=false
    configuration={ scale=1.0 imsi=242/1 loc=nb_NO touch=3 keys=1/1/2 nav=1/1 orien=1 layout=34 uiMode=17 seq=22}
    launchFailed=false haveState=false icicle=null
    state=RESUMED stopped=false delayedResume=false finishing=false
    keysPaused=false inHistory=true launchMode=0
    fullscreen=true visible=true frozenBeforeDestroy=false thumbnailNeeded=false idle=true
    waitingVisible=false nowVisible=true
* Hist #11: HistoryRecord{40a548e8 com.company.app/.HomeActivity}
    packageName=com.company.app processName=com.company.app
    launchedFromUid=10109 app=ProcessRecord{4089aed0 16527:com.company.app/10109}
    Intent { flg=0x4000000 cmp=com.company.app/.HomeActivity }
    frontOfTask=false task=TaskRecord{408276f0 #60 A com.company.app}
    taskAffinity=com.company.app
    realActivity=com.company.app/.HomeActivity
    base=/data/app/com.company.app-1.apk/data/app/com.company.app-1.apk data=/data/data/com.company.app
    labelRes=0x0 icon=0x7f02000b theme=0x103000d
    stateNotNeeded=false componentSpecified=true isHomeActivity=false
    configuration={ scale=1.0 imsi=242/1 loc=nb_NO touch=3 keys=1/1/2 nav=1/1 orien=1 layout=34 uiMode=17 seq=22}
    launchFailed=false haveState=true icicle=Bundle[mParcelledData.dataSize=1192]
    state=STOPPED stopped=true delayedResume=false finishing=false
    keysPaused=false inHistory=true launchMode=0
    fullscreen=true visible=false frozenBeforeDestroy=false thumbnailNeeded=false idle=true 
```

我按下后退按钮多少次都没关系。堆栈保持不变，活动`B`不断重新启动。

现在到更奇怪的部分：如果我双击后退按钮，它确实会回到堆栈中给我活动`A`。

我对后退按钮没有任何特殊处理，因为它在案例 1 中运行良好，但在案例 2 中运行良好，我真的迷路了。搜索并没有真正让我得到任何东西，所以任何见解都会受到赞赏。

**编辑** 以下是我认为活动中的相关内容

*   [HomeActivity.java](http://pastebin.com/tpmrEiZz)
*   [测试活动.java](http://pastebin.com/6uTH4WA0)
*   [结果活动.java](http://pastebin.com/22D49yBC)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:50:10.040

正如您使正常情况变得复杂一样。如果您在活动中使用`startActivityForResult()`并`onActivityResult()`具有**必要的标志和条件**，则永远不会发生上述问题..

**原因：**

正如我怀疑当您从 B Activity 按下返回按钮时，它会反复调用`protected void onBackendStarted()`HomeActivity**并且**您的 Activity B 继续重新启动..

**更新：**

一旦 Activity B 启动，您必须从 Intent 中删除**startTest 。**所以下次它不会重复启动。

**就像是：**

`getIntent().removeExtra("startTest");`到`onBackendStarted()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:41:26.560

试试这样。。

```
@Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        super.onBackPressed();
        System.gc();
        Intent I = new Intent(EditProfile.this, SettingActivity.class);
        startActivity(I);
        finish();
    } 
```

# python - 将文件内容合并到一个文件中

> ID：14274339
> 
> 赞同：-1
> 
> 时间：2013-01-11T08:34:48.930
> 
> 标签：python

我有两个文件，我想将它们的内容并排合并到一个文件中，即输出文件的第 n 行应由文件 1 的第 n 行和文件 2 的第 n 行组成。文件具有相同的行数。

到目前为止我所拥有的：

```
with open('test1.txt', 'r') as f1, open('test2.txt', 'r') as f2:

    with open('joinfile.txt', 'w') as fout:

        fout.write(f1+f2) 
```

但它给出了一个错误说 -

```
TypeError: unsupported operand type(s) for +: 'file' and 'file' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:44:14.433

我会尝试`itertools.chain()`每行工作（你使用“r”打开你的文件，所以我假设你没有红色二进制文件：

```
from itertools import chain

with open('test1.txt', 'r') as f1, open('test2.txt', 'r') as f2:
    with open('joinfile.txt', 'w') as fout:
        for line in chain(f1, f2):
            fout.write(line) 
```

它作为生成器工作，因此即使是大文件也不会出现内存问题。

**编辑**

新要求，新样品：

```
from itertools import izip_longest

separator = " "

with open('test1.txt', 'r') as f1, open('test2.txt', 'r') as f2:
    with open('joinfile.txt', 'w') as fout:
        for line1, line2 in izip_longest(f1, f2, fillvalue=""):
            line1 = line1.rstrip("\n")
            fout.write(line1 + separator + line2) 
```

我添加了一个`separator`放在两行之间的字符串。

`izip_longest`如果一个文件的行数比另一个文件多，也可以使用。然后将 fill_value`""`用于缺失的行。`izip_longest`也可用作发电机。

重要的是 line `line1 = line1.rstrip("\n")`，我想它的作用很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:39:49.420

You can do it with:

```
fout.write(f1.read())
fout.write(f2.read()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T08:39:55.773

You are actualy concatenating 2 file objects, however, you want to conctenate strings.

Read the file contents first with f.read. For example, this way:

```
with open('test1.txt', 'r') as f1, open('test2.txt', 'r') as f2:
  with open('joinfile.txt', 'w') as fout:
    fout.write(f1.read()+f2.read()) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T08:52:24.020

我更喜欢使用shutil.copyfileobj。您可以轻松地将其与 glob.glob 结合使用，以通过模式连接一堆文件

```
>>> import shutil
>>> infiles = ["test1.txt", "test2.txt"]
>>> with open("test.out","wb") as fout:
    for fname in infiles:
        with open(fname, "rb") as fin:
            shutil.copyfileobj(fin, fout) 
```

与 glob.glob 结合

```
>>> import glob
>>> with open("test.out","wb") as fout:
    for fname in glob.glob("test*.txt"):
        with open(fname, "rb") as fin:
            shutil.copyfileobj(fin, fout) 
```

但除此之外，如果您在可以使用 posix 实用程序的系统中，更喜欢使用它

```
D:\temp>cat test1.txt test2.txt > test.out 
```

如果您使用的是 Windows，则可以从命令提示符发出以下命令。

```
D:\temp>copy/Y test1.txt+test2.txt test.out
test1.txt
test2.txt
        1 file(s) copied. 
```

**注意** 基于您的最新更新

> 是的，它的行数相同，我想将一个文件的每一行与另一个文件连接起来

```
with open("test.out","wb") as fout:
    fout.writelines('\n'.join(''.join(map(str.strip, e))
                  for e in zip(*(open(fname) for fname in infiles)))) 
```

在posix系统上，你可以做

```
paste test1.txt test2.txt 
```

# function - 使用咖啡脚本在服务器端的变量中调用具有部分名称的函数

> ID：14274344
> 
> 赞同：0
> 
> 时间：2013-01-11T08:35:09.397
> 
> 标签：function, variables, coffeescript, server-side, server-side-scripting

我在服务器端有一个变量，该变量根据来自客户端的请求而变化，该请求确定要使用的函数。该函数看起来彼此相似，只是它开始调用不同的函数。因此，我在考虑是否可以用变量替换函数名称。

我在想的例子：

sortFunction = req.body.sortValue

path.sortFunction arg1, arg2, (callback) -> if err ... else ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:54:43.417

您始终可以`Object`通过名称访问任何 JavaScript/CoffeeScript 的属性：

```
# suppose you have an object, that contains your sort functions
sortFunctions =
  quickSort: (a, b, cb) -> ...
  bubbleSort: (a, b, cb) -> ...
  insertionSort: (a, b, cb) -> ...

# you can access those properties of sortFunction
# by using the [] notation

sortFunctionName = req.body.sortValue
sortFunction = sortFunctions[sortFunctionName]

# this might return no value, when 'sortFunctionName' is not present in your object
# you can compensate that by using a default value
sortFunction ?= sortFunctions.quickSort

# now use that function as you would usually do
sortFunction arg1, arg2, (err, data) -> if err ... else ... 
```

希望有帮助；）

# android - 如何将图像与文本从 android 应用程序共享到 facebook？我正在使用 Intent.ACTION_SEND 将状态或照片上传到 Facebook

> ID：14274351
> 
> 赞同：1
> 
> 时间：2013-01-11T08:35:25.683
> 
> 标签：android, facebook

我想从我的 android 应用程序中与 Caption 共享图像。我该怎么做？

我正在使用 Intent.ACTION_SEND 将状态或照片上传到 Facebook

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:50:41.223

请参阅[此](http://androidcodeexamples.blogspot.in/2011/12/how-to-update-facebook-status-via.html)链接中的代码，以使用完整的源代码将 facebook 完全集成到 android 应用程序中，并编写以下方法而不是`postToWall(String message)`

```
public void postPhotoToWall() {
    Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
    final byte[] data = stream.toByteArray();

    Bundle parameters = new Bundle();
    parameters.putString("message", "Message");
    parameters.putByteArray("picture", data);
    parameters.putString("caption", "test");

    try {
        facebook.request("me/photos");
        String response = facebook.request("me/photos", parameters, "POST");
        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") || response.equals("false")) {
            showToast("Blank response.");
        } else {
            showToast("Photo posted to your facebook wall!");
        }
    } catch (Exception e) {
        showToast("Failed to post to wall!");
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:52:12.960

```
public void share(View v) {
  //facebook.dialog(this, "feed", new PostDialogListener());

   Bundle parameters = new Bundle();
   parameters.putString("message", category_item_name_desc.getText().toString());
   parameters.putString("picture", categoryItemsModel.getImageUrl());
   parameters.putString("caption", txtDescription_desc.getText().toString());
   facebook.request("/me/feed", parameters, "POST");

   try {
      facebook.request("/me/feed", parameters, "POST");
      System.out.println("**********************POST**********************************");
   } catch (FileNotFoundException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
   } catch (MalformedURLException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
   } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
   }

} 
```

# jquery - 在具有跨度的jQuery上调用两个不同的函数

> ID：14274353
> 
> 赞同：0
> 
> 时间：2013-01-11T08:35:30.843
> 
> 标签：jquery, html

我有一个小问题，比如，

我想为同一个调用两个函数`td`，1.如果用户点击 td ，调用一个函数，2.当用户点击跨度时`td`。

**查询：**

```
 if (jQuery(tr).find("td span").hasClass('drill_icon')) {
        console.log('DRILL DOWN : ');    
    } else {
        console.log('SELECT/UNSELCT : ');
    } 
```

我尝试了上面的 jquery 调节，但没有帮助。

请帮助我，如何检查用户是否点击了 td，或者用户是否点击了 span，我知道，如果我使用两个`td`，那么查找很容易：

```
<td title="Afghanistan" _colid="1" style="width: 95%; overflow: hidden;">Afghanistan<span class="right drill_icon"></span></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:42:32.447

使用两次点击功能

```
 $("span.drill_icon").click(function() {
   //span is clicked..
   spanClickedFunction();
   return false;  //to make sure td click is not called here..this stops the event and td handler won't be called;
});

$("tr td").click(function() {
   //td is clicked..
   tdClickedFunction();

});

function spanClickedFunction(){
  alert('span clicked');
}

function tdClickedFunction(){
  alert('td clicked');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:40:48.323

两种选择：

### 1\. 连接两个处理程序：

一个用于`span`：

```
$("span.drill_icon").click(function() {
    // Do your thing here

    // Stop the event
    return false;
}); 
```

...还有一个在`td`：

```
$("selector for td").click(function() {
    // Do the thing
}); 
```

如果单击在 上`span`，则该处理程序将首先被调用，并且由于它停止事件，因此根本不会调用另一个处理程序。

[实例](http://jsbin.com/ukinek/1)| [来源](http://jsbin.com/ukinek/1/edit)

### 2.使用一个处理程序并点击检查

或者使用一个处理程序，然后查看点击是否在`span`：

```
$("selector for td").click(function(e) {
    // In the span?
    if ($(e.target).closest("span.drill_icon")[0]) {
        // Yes
    }
    else {
        // No
    }
}); 
```

[实例](http://jsbin.com/ukinek/2)| [来源](http://jsbin.com/ukinek/2/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:45:35.587

```
$("table td span.drill_icon").click(function (e){
   alert('Clicked on span');
   e.stopPropagation(); // stops further propagation
});

$("table td").click(function (){
   alert('Clicked on td');
}); 
```

看[演示](http://jsfiddle.net/MKsZA/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T08:46:40.063

您需要创建 2 个单击处理程序。一个用于 TD，一个用于跨度。

```
$("td").click(function() {
    //code that executes when clicked in the td but not in span
});

$("td span.drill_icon").click(function(event) {
    //code that executes when clicked in the span

    //prevents that the click-event gets fired on the parent elements
    event.stopPropagation();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T08:46:41.120

干得好

```
<script type="text/javascript">
    $(function () {

        $("td").click(function () {
            alert("click on td");
        });

        $("td span").click(function () {
            alert("click on span");
            return false;
        });
    });
</script> 
```

需要注意的重要一点是 span click 处理程序中的 return false 会阻止事件传播到其 DOM 父级。我认为 jquery 调用 event.stopPropagation() 来做这件事。

我发现很难用你的例子进行测试，我可以建议：

*   用 id 替换 _colid
*   将文本添加到 span 因为我看到您的文本在 td 中
*   为跨度添加一些边框（仅用于测试），以便您可以看到跨度实际完成的位置

# sharepoint - 在 Sharepoint 2007 中显示弹出表单登录

> ID：14274354
> 
> 赞同：0
> 
> 时间：2013-01-11T08:35:36.150
> 
> 标签：sharepoint, fba

我的共享点站点已`Form Authentication Based`正确配置。当我登录时，它重定向到页面`/_layouts/login.aspx`

**我想要的是：**当我单击登录标签时，我想显示弹出窗口以登录到站点，就像使用 Windows 身份验证时一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:20:47.083

你可以做类似答案中给出的事情

[Javascript打开弹出窗口并禁用父窗口](https://stackoverflow.com/questions/5660700/javascript-to-open-popup-window-and-disable-parent-window)

在这有一个javascript，它显示了一个打开窗口作为弹出窗口的代码。您可以使用应用程序登录页面的名称调用此 javascript。

希望这可以帮助

# java - 使用 Service Android 的 KeyGuard 锁

> ID：14274357
> 
> 赞同：0
> 
> 时间：2013-01-11T08:36:03.523
> 
> 标签：java, android, pattern-matching, android-service

我有一个活动，我正在使用[http://code.google.com/p/android-lockpattern/](http://code.google.com/p/android-lockpattern/)这个库 Pattern Design for key lock 成功地将屏幕锁定在活动按钮内。但是，当我在一段时间后实施一项服务以在后台执行相同的过程时。

问题是，当我从活动启动服务以执行锁定功能时，它一直给我空指针

**以下是我的主要活动代码。**

```
package com.example.lockscreen_test;

import group.pals.android.lib.ui.lockpattern.LockPatternActivity;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

     public class MainActivity extends Activity {
private static final int _ReqCreatePattern = 0;
// this is your preferred flag
private static final int _ReqSignIn = 1;
String pattern;
public Button btn_show_lock;
protected Object mHandler;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if (lockService.flag == false) {
        CreateNewPattern();
    }
    btn_show_lock = (Button) findViewById(R.id.button1);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void compare(View v) {
    lockScreen();
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case _ReqCreatePattern:
        if (resultCode == RESULT_OK) {
            pattern =   data.getStringExtra(LockPatternActivity._Pattern);
            lockService.doNow = true;
        }
        break;
    case _ReqSignIn:
        if (resultCode == RESULT_OK) {
            // signing in ok
        } else {
            // signing in failed
        }
        break;
    }
}

public void lockScreen() {
    // startService(new Intent(this, lockService.class));

    try {
        Intent intent = new Intent(MainActivity.this,
                LockPatternActivity.class);
        intent.putExtra(LockPatternActivity._Mode,
                LockPatternActivity.LPMode.ComparePattern);
        intent.putExtra(LockPatternActivity._Pattern, pattern);
        startActivityForResult(intent, _ReqSignIn);
        Log.w("Locked", "ScreenLock");
    } catch (Exception e) {
        Toast.makeText(this, e.getMessage().toString(), Toast.LENGTH_LONG)
                .show();
    }
}

public void CreateNewPattern() {
    // startService(new Intent(this, lockService.class));

    Intent intent = new Intent(MainActivity.this, LockPatternActivity.class);
    intent.putExtra(LockPatternActivity._Mode,
            LockPatternActivity.LPMode.CreatePattern);
    startActivityForResult(intent, _ReqCreatePattern);
    lockService.flag = true;
    startService(new Intent(this, lockService.class));
} 
```

}

**我的服务代码**

```
package com.example.lockscreen_test;
import android.app.Notification;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;
import java.util.Timer;
import java.util.TimerTask;

import com.example.lockscreen_test.R.drawable;

public class lockService extends Service {

MainActivity main;

Notification _foregroundNotification;

final int _notification_id = 1;
public static Boolean flag = false;
public static Boolean doNow = false;

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    main = new MainActivity();
    // main.CreateNewPattern();
    // startForeground();

    Log.w("created", "Services !");
    super.onCreate();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // TODO Auto-generated method stub
    // main.lockScreen();
    if (doNow == true) {
        RepeatProcess();
    }
    return Service.START_REDELIVER_INTENT;
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    Log.w("Destroyed", "Services destroyed!");
    super.onDestroy();
}

void startForeground() {

    int notificationIcon = drawable.ic_menu_chat_dashboard;
    String notificiationTickerText = "Service Started...";
    long notificationTimestamp = System.currentTimeMillis();
    _foregroundNotification = new Notification(notificationIcon,
            notificiationTickerText, notificationTimestamp);
    String titletext = "Sample Service";
    String bodytext = "Does lock ";

    Intent myactivity = new Intent(this, MainActivity.class);
    PendingIntent startmyactivitypendingintent = PendingIntent.getActivity(
            this, 0, myactivity, 0);
    _foregroundNotification.setLatestEventInfo(this, titletext, bodytext,
            startmyactivitypendingintent);
    startForeground(_notification_id, _foregroundNotification);
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

void RepeatProcess() {
    int delay = 5000; // delay for 5 sec.

    int period = 10000; // repeat every 10 sec.

    Timer timer = new Timer();

    timer.scheduleAtFixedRate(new TimerTask() {

        public void run() {
            main.lockScreen();
            System.out.println("done");

        }

    }, delay, period);

} 
```

}

**我的清单 xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.lockscreen_test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="13"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.DISABLE_KEYGUARD" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.lockscreen_test.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name=".lockService" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </service>

    <activity
        android:name="group.pals.android.lib.ui.lockpattern.LockPatternActivity"
        android:configChanges="orientation|screenSize|keyboard|keyboardHidden" />
</application> 
```

下面是我的 logcat 错误，我不知道为什么它一直给我空指针错误

```
AndroidRuntime(1683): FATAL EXCEPTION: Timer-001-11 08:29:31.689:
AndroidRuntime(1683): java.lang.NullPointerException
AndroidRuntime(1683): at   com.example.lockscreen_test.MainActivity.lockScreen(MainActivity.java:75)

AndroidRuntime(1683): at com.example.lockscreen_test.lockService$1.run(lockService.java:85)

AndroidRuntime(1683): at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:20:13.580

尝试`lockScreen()`像这样更改您的方法：

```
public void lockScreen() {
            // startService(new Intent(this, lockService.class));
            if(pattern != null){
                try {
                    Intent intent = new Intent(MainActivity.this,
                            LockPatternActivity.class);
                    intent.putExtra(LockPatternActivity._Mode,
                            LockPatternActivity.LPMode.ComparePattern);
                    intent.putExtra(LockPatternActivity._Pattern, pattern);
                    startActivityForResult(intent, _ReqSignIn);
                    Log.w("Locked", "ScreenLock");
                } catch (Exception e) {

                }
            }
            else{
                Log.w("Locked", "Pattern Is Null here");                    
            }
} 
```

**编辑 ：**

像这样更改清单中的活动声明：

```
 <activity
        android:name="com.example.lockscreen_test.MainActivity"
        android:configChanges="orientation|keyboardHidden"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

谢谢。

# c# - 想隐藏cmd提示画面

> ID：14274360
> 
> 赞同：6
> 
> 时间：2013-01-11T08:36:30.627
> 
> 标签：c#, .net, command, cmd

我开发了一个实用程序，它将获取列表中所有服务器的时间。

```
System.Diagnostics.Process p;
string server_name = "";
string[] output;
p = new System.Diagnostics.Process();
p.StartInfo.FileName = "net";
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StandardOutput.ReadLine().ToString() 
```

在执行此代码时。*Cmd*提示屏幕即将到来。我想对用户隐藏它。我能为它做些什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T08:38:29.950

您可以告诉进程不使用窗口或将其最小化：

```
// don't execute on shell
p.StartInfo.UseShellExecute = false;
p.StartInfo.CreateNoWindow = true;

// don't show window
p.StartInfo.WindowStyle = ProcessWindowStyle.Minimized; 
```

您可以`UseShellExecute = false`重定向输出：

```
// redirect standard output as well as errors
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardError = true; 
```

当你这样做时，你应该使用输出缓冲区的异步读取来避免由于缓冲区溢出导致的死锁：

```
StringBuilder outputString = new StringBuilder();
StringBuilder errorString = new StringBuilder();

p.OutputDataReceived += (sender, e) =>
            {
                if (e.Data != null)
                {
                    outputString.AppendLine("Info " + e.Data);
                }
            };

p.ErrorDataReceived += (sender, e) =>
            {
                if (e.Data != null)
                {
                    errorString.AppendLine("EEEE " + e.Data);
                }
            }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T08:38:42.763

尝试[`ProcessWindowStyle`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processwindowstyle.aspx)这样的枚举；

```
p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
p.StartInfo.UseShellExecute = false;
p.StartInfo.CreateNoWindow = true; 
```

> 隐藏窗口样式。窗口可以是可见的，也可以是隐藏的。系统通过不绘制它来显示一个隐藏的窗口。如果一个窗口被隐藏，它实际上是被禁用的。隐藏窗口可以处理来自系统或其他窗口的消息，但它不能处理来自用户的输入或显示输出。通常，应用程序可能会在自定义窗口外观时隐藏新窗口，然后将窗口样式设置为 Normal。要使用 **ProcessWindowStyle.Hidden**，**ProcessStartInfo.UseShellExecute** 属性必须为**false**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T08:38:20.293

试试这个

```
p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden; 
```

或者也检查一下

**要在没有任何窗口的情况下运行子进程，**

使用 CreateNoWindow 属性并设置 UseShellExecute。

```
ProcessStartInfo info = new ProcessStartInfo(fileName, arg); 
info.CreateNoWindow = true; 
info.UseShellExecute = false;
Process processChild = Process.Start(info); 
```

我建议您阅读 MSDN 的这篇文章：[**如何在新窗口、父窗口或无窗口中启动控制台应用程序**](http://blogs.msdn.com/b/jmstall/archive/2006/09/28/createnowindow.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-10T16:15:41.050

添加系统引用。

```
using System.Diagnostics; 
```

然后使用此代码在隐藏的 CMD 窗口中运行您的命令。

```
Process cmd = new Process();
cmd.StartInfo.FileName = "cmd.exe";
cmd.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
cmd.StartInfo.Arguments = "Enter your command here";
cmd.Start(); 
```

# asp.net-mvc-4 - MVC 4 多选列表框和选中列表框

> ID：14274365
> 
> 赞同：-4
> 
> 时间：2013-01-11T08:36:56.147
> 
> 标签：asp.net-mvc-4, multi-select, html.listboxfor

我想做一个类似的实现，由 Sivaraman Dhamodharan 在 MVC 4 asp.net 在他的文章中找到： http: [//www.codeproject.com/Articles/139792/Multi-Select-List-Box-and-Checked-List -盒子](http://www.codeproject.com/Articles/139792/Multi-Select-List-Box-and-Checked-List-Box)

我是 MVC 4 的新手，我很享受它！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T10:38:26.410

您可以在 MVC 中非常轻松地为“访问区域”和“分配的 ID”（如您在文章中提到的）创建多选框。对于带有复选框的选择框，您可以在 MVC 中创建一个表。

请按照以下步骤操作。

假设页面的视图模型是AssignWorkViewModel，产品的视图模型是ProductViewModel。

```
public class AssignWorkViewModel
{

    public List<ProductViewModel> Products { get; set; }
}

public class ProductViewModel
{
    public int ProductId { get; set; }

    //used to bind the checkbox value in the view
    public bool IsSelected { get; set; }

    public string ProductName { get; set; }
} 
```

假设动作方法名称是“AssignWork”

```
public ActionResult AssignWork()
    {
        AssignWorkViewModel model = new AssignWorkViewModel();

        List<ProductViewModel> products = new List<ProductViewModel>();

        //let's add some values
        ProductViewModel samsungMonitor = new ProductViewModel();
        samsungMonitor.ProductId = 1;
        samsungMonitor.IsSelected = false;
        samsungMonitor.ProductName = "Samsung Monitor";
        products.Add(samsungMonitor);

        ProductViewModel sonyDvd = new ProductViewModel();
        sonyDvd.ProductId = 2;
        sonyDvd.IsSelected = false;
        sonyDvd.ProductName = "Sony DVD";
        products.Add(sonyDvd);

        ProductViewModel motherBoard = new ProductViewModel();
        motherBoard.ProductId = 3;
        motherBoard.IsSelected = false;
        motherBoard.ProductName = "Pentium Mother Board";
        products.Add(motherBoard);

        model.Products = products;

        //pass model to the view
        return View(model);
    } 
```

风景，

```
@model SelectBoxTest.ViewModels.AssignWorkViewModel
<table>
    @foreach (var item in Model.Products)
    {
        <tr>
            <td>@Html.HiddenFor(model => item.ProductId)</td>
            <td>@Html.CheckBoxFor(model => item.IsSelected)</td>
            <td>@Html.DisplayFor(model => item.ProductName)</td>
        </tr>
    }
</table> 
```

结果，

![在此处输入图像描述](../Images/03afc94067c5e1170faa7b0d22b34121.png)

我认为这可能会帮助您开始。

# php - 如何在 sf_method 'delete' 之后重定向？

> ID：14274366
> 
> 赞同：3
> 
> 时间：2013-01-11T08:36:56.190
> 
> 标签：php, symfony-1.4

在编辑表单中使用 admin-generator 的后端我输出相关对象的列表，即删除

```
link_to ('delete', $rel_object-> name. '_delete', 
           Array ('id' => $rel_object-> id), 
          array ('method '=>' delete ',' confirm '=>' You are serious? ',) 
```

按删除相关对象，但被重定向到相关对象列表，我需要重定向回对象的编辑表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:25:43.127

控制器操作正在回答和处理您的删除请求 - 您需要检查您的路由以查看哪个。

我的 executeDelete 动作如下

```
public function executeDelete(sfWebRequest $request)
{
    // delete the associated object
    $request->checkCSRFProtection();
    $this->forward404Unless($model= Doctrine_Core::getTable('model')->find(array($request->getParameter('id'))), sprintf('Object does not exist (%s).', $request->getParameter('id')));
    $model->delete();

    // change this line
    $this->redirect('model/index');
} 
```

您需要更改`$this->redirect('model/index');`为要重定向到的任何位置

# webdeploy - Webdeploy 发布文件

> ID：14274367
> 
> 赞同：0
> 
> 时间：2013-01-11T08:37:09.627
> 
> 标签：webdeploy

我正在尝试导出我的 webdeploy 发布文件，以便该文件中包含密码。但是，每次我这样做时，发布文件中的密码似乎都是无效的。如果我在另一台计算机上使用发布文件，我每次都必须重新输入密码。

我知道必须有办法这样做，因为我的 Azure 帐户允许我从 Azure 控制面板导出我的发布设置，并且发布设置可以在我的本地计算机上运行，​​而无需重新输入我的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T06:05:41.233

我意识到您可以在 xml 文件中使用纯文本作为密码。如果有人遇到同样的问题，我之前放置了示例：

```
<?xml version="1.0" encoding="utf-8"?>
<publishData>
<publishProfile
profileName="smarterasp.net - Web Deploy"
publishMethod="MSDeploy"
publishUrl="https://test-001-site1.smarterasp.net:8172/msdeploy.axd"
msdeploySite="blahblahblah"
userName="blahblahblah"
userPWD="Password_in_plain_text"
destinationAppUrl="http://test-001-site1.smarterasp.net:80/"
/>
</publishData> 
```

# c# - ASP.NET 4.0 中的 URL 重写

> ID：14274370
> 
> 赞同：1
> 
> 时间：2013-01-11T08:37:28.053
> 
> 标签：c#, asp.net, url-rewriting

> **可能重复：**
> [ASP.NET 4.0 URL 重写：如何处理 ID](https://stackoverflow.com/questions/5060534/asp-net-4-0-url-rewriting-how-to-deal-with-the-ids)

我正在尝试在我的 asp.net c# 项目中进行 url 重写，我搜索了互联网但没有得到我想要的东西。

比如说，我有以下网址：

```
http://www.example.com/Question.aspx?qid=1 
```

现在，Question.aspx 从 db 中找到一个针对 qid 的问题（具有标题和正文字段）并显示它。我想在 url 中显示问题标题。

我的要求是这样的：

```
http://www.example.com/Question/1/QuestionTitleGoesHere 
```

谁能建议我如何实现这个 ASP.NET 4.0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:43:32.453

您可以使用以下方法在 asp.net Web 表单项目中检查 URL 重写的工作示例

[使用 ASP.NET 进行 SEO 的 URL 重写](http://www.codeproject.com/Articles/33341/URL-Rewriting-using-ASP-NET-for-SEO)

[提示/技巧：使用 ASP.NET 重写 URL](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:41:08.357

In IIS you can use [Url Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite) to achieve this.

If you need this to be within the application, could you look at using MVC3/MVC4 instead of webforms? If that is an option.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:48:16.017

我认为您应该尝试以下链接：

[使用 ASP.NET 4 Web 表单的 URL 路由（VS 2010 和 .NET 4.0 系列）](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

[ASP.NET 路由](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)

他们会帮助你。

# ruby-on-rails - 轨道应用程序。从多个模型中收集项目并在主页上显示此分页项目列表

> ID：14274371
> 
> 赞同：5
> 
> 时间：2013-01-11T08:37:43.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

在 Rails 应用程序中，我有三个模型（Posting、Shop::Items 和 Directory::Items）。每个模型都与其他模型（用户、类别、城市......）有关系。我必须在主页上显示所有这些信息。它应该看起来像分页的项目列表。我正在为数据库使用 postgres。
我们可以在控制器中编写这样的代码：

```
@postings = Posting.includes(:category, :subcategory, :user, :city).all
@directory_items = Directory::Item.includes(:category, :user, :city).all
@shop_items = Shop::Item.includes(:category, :user, :city, :phone).all 
```

并对结果进行排序。但这不是最好的方法。

第二种解决方案是编写自定义查询省略 ActiveRecord。但是这个查询非常大，而且很难支持它（我们在那里有很多连接）
用最少的数据库查询来解决这个问题的最佳解决方案是什么？（这是主页，所以它应该工作得非常快）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:10:42.460

[这里](https://stackoverflow.com/questions/2099895/merging-multiple-models-to-create-a-recent-activity-box)有一些不快的解决方案。

或者，您可以将[sphinx](http://sphinxsearch.com/)与[think sphinx](http://pat.github.com/ts/en/) gem 一起使用。这样它会又快又干净。

```
ThinkingSphinx.search classes: [Posting, Shop::Items, Directory::Items], page: params[:page] || 1, per_page: 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:51:43.577

由于查询将被缓存，因此只有排序需要时间。如果你不显示太多项目，开发人员的可读性远远超过了优化它的成本。如果性能确实是一个瓶颈，您总是可以做得更好，但是您仍然可以使用其他方法来使此代码过于复杂。

# jquery - ajax缓存不工作

> ID：14274373
> 
> 赞同：4
> 
> 时间：2013-01-11T08:37:45.133
> 
> 标签：jquery, ajax, caching

> **可能重复：**
> [使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)
> [jQuery .ajax 的缓存选项在 Firefox 和 Chrome 中不起作用？](https://stackoverflow.com/questions/4084457/the-cache-option-of-jquery-ajax-doesnt-work-in-firefox-and-chrome)

当我单击一个页面并加载它时，我想缓存它，但现在它不起作用，如果有人能告诉我代码中的问题在哪里以及我缺少什么。这是我的代码：

```
$('.nav ul li a').click( function() {
        var pageHref=$(this).attr('href');

        $.ajax({

            url: pageHref,
            dataType: "html",
            type: "GET",
            cache: true,
            success: function() {

                $('.content').load(pageHref + " #cnt");
            }
         });

        return false;

    }); 
```

# excel - EXCEL VBA Combobox 匹配

> ID：14274376
> 
> 赞同：-1
> 
> 时间：2013-01-11T08:37:59.373
> 
> 标签：excel, vba, combobox

**说明：** ![在此处输入图像描述](../Images/e5edf5f59feedd435cc3b95725878add.png) *图 1*

基于Image1，Level 1是Object，Level 2是object的类型。

![在此处输入图像描述](../Images/cb3586c7cfe8941073600b01582c74b5.png)
*图 2*

在图 2 中，如您所见，我分别将它们命名为`ComboBox1`和`ComboBox2`for`Level 1`和`Level 2`。

**我想要达到的目标：**

1.  当用户选择`ComboBox1`时，它将显示一组`Level 1`项目，如图所示，`A2:XFD2`没有空单元格。
2.  然后，根据 中的选择`ComboBox1`，根据 中的值`ComboBox2`列出如图*1*`Level 2`所示。*`ComboBox1`*

 *提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:39:01.050

将此添加到您的用户表单代码中：

```
Private Sub UserForm_Initialize()

Dim rnLevel1 As Range, rnLevel2 As Range, rnTemp As Range

Set rnLevel1 = Sheet1.Cells(2, Sheet1.UsedRange.Columns.Count)

ComboBox2.Clear 'Clear all values first

For Each rnTemp In rnLevel1
    If rnTemp.Value <> "" And rnTemp.Value <> "Level 1" Then ' Add values NOT INCLUDING Level 1 to Combobox1
        ComboBox1.AddItem rnTemp.Value
    End If
Next

End Sub

Private Sub ComboBox1_Change()
Dim rnLevel1 As Range, rnLevel2 As Range, rnTemp As Range

Set rnLevel1 = Sheet1.Cells(2, Sheet1.UsedRange.Columns.Count).Find(ComboBox1.Value) 'Find the correct column
Set rnLevel2 = Sheet1.Range(rnLevel1.Offset(1, 0), Sheet1.Cells(Sheet1.Rows.Count, rnLevel1.Column).End(xlUp))

ComboBox2.Clear 'Clear all values first

For Each rnTemp In rnLevel2
    If rnTemp.Value <> "" Then  ' Add values to Combobox2
        ComboBox2.AddItem rnTemp.Value
    End If
Next

End Sub 
```*

# django - 处理 valueError

> ID：14274381
> 
> 赞同：0
> 
> 时间：2013-01-11T08:38:25.720
> 
> 标签：django

我很难修复 valueError， `'OrderItem' instance needs to have a primary key value before a many-to-many relationship can be used.` 我知道我必须做点什么，`.add()`但我不知道怎么做。这里是`OrderItem model`

```
class OrderItem(SmartModel):
    order_id = models.CharField(max_length=50,db_index=True)
    date_added = models.DateTimeField(auto_now_add=True)
    quantity = models.IntegerField(default=0)
    item = models.ManyToManyField(Item)

    class Meta:
        db_table='order_items'

        def __unicode__(self):
            return "%s" % (self.order_id) 
```

这是视图中正在做的事情，

```
def add_to_order(request):  
    postdata = request.POST.copy()
    #get item slug from post data, return blank if empty
#   item_slug = postdata.get('item_slug','')
    #get quantity added, return 1 if empty
    quantity = postdata.get('quantity',0)
    # fetch the item or return  missing page error_message
    i = get_object_or_404(Item)
    # get items in order
    order_items = get_order_items(request)
    item_in_orders = False
    # check to see if item is already in order
    for order_item in order_items:
        if order_item.item.id == i.id:
            #update the quantity if found
            order_item.augment_quantity(quantity)
            item_in_orders = True
    if not item_in_orders:
        # creat and save a new order item
        oi = OrderItem()
        oi.item = i
        oi.quantity = quantity
        oi.order_id = _order_id(request)
        oi.save() 
```

这是回溯：

```
Traceback:
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/mats-invasion/projects/f4l/f4l/live/views.py" in get_category
  25\.           order.add_to_order(request)
File "/home/mats-invasion/projects/f4l/f4l/cart/order.py" in add_to_order
  48\.       oi.item = i
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/db/models/fields/related.py" in __set__
  832\.         manager = self.__get__(instance)
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/db/models/fields/related.py" in __get__
  819\.             through=self.field.rel.through,
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/db/models/fields/related.py" in __init__
  536\.                 raise ValueError("%r instance needs to have a primary key value before a many-to-many relationship can be used." % instance.__class__.__name__)

Exception Type: ValueError at /menu/
Exception Value: 'OrderItem' instance needs to have a primary key value before a many-to-many relationship can be used. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:13:21.993

更新您的视图代码以添加新项目

```
if not item_in_orders:
    # creat and save a new order item
    oi = OrderItem()
    oi.quantity = quantity
    oi.order_id = _order_id(request)
    oi.save()
    #save oi first, then add i to item
    oi.item.add(i) 
```

# android - Android - 关闭屏幕而不进入待机模式

> ID：14274390
> 
> 赞同：11
> 
> 时间：2013-01-11T08:38:52.513
> 
> 标签：android, screen

我知道这个问题被问了很多次，但从来没有得到满意的回答。

我的问题如下：

我有一个活动可以防止屏幕在预定义的时间内关闭。

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

当预定义的时间结束时，我会显示一个带有倒计时的对话框，通知用户如果他不按“取消”，显示器将在 10 秒内关闭。

我设法关闭了显示屏，但手机总是切换到待机模式。

为了关闭我使用：

```
Window mywindow = getWindow();

WindowManager.LayoutParams lp = mywindow.getAttributes();

lp.screenBrightness = 0.0f;

mywindow.setAttributes(lp); 
```

是否有可能在不进入待机模式（暂停活动）的情况下使显示屏完全变暗。

我的目标是用户应该能够通过点击显示屏再次点亮屏幕。所以活动必须保持在活动状态。

一个类似的问题已经被问到[here](https://stackoverflow.com/questions/9538331/android-turn-off-display-without-triggering-sleep-lock-screen-turn-on-with-t)。

由于这个问题已经将近一年了，我希望也许有人在此期间设法解决了这个问题。

很多问候

西吉

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T14:32:01.680

似乎无法仅通过触摸显示屏来关闭屏幕并重新激活。

我现在的新方法：

```
private WakeLock screenWakeLock;

PowerManager pm = PowerManager.getSystemService(Context.POWER_SERVICE);
screenWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                                "screenWakeLock");
screenWakeLock.acquire(); 
```

PARTIAL_WAKE_LOCK 保持 CPU 运行，但允许显示器关闭。

当按下电源或主页按钮时，显示屏再次打开并且活动再次可见（无需“滑动解锁”或其他）。

不要忘记释放`screenWakeLock`.

就我而言，我在`onResume()`活动中做到了：

```
if (screenWakeLock != null) {
   if(screenWakeLock.isHeld())
      screenWakeLock.release();
   screenWakeLock = null;
} 
```

也许这可以帮助将来遇到类似问题的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T10:58:05.297

注意：我无法使用 WAKELOCK

我想出了一个解决方法，它涉及更改 SCREEN_OFF_TIMEOUT。使用下面的代码来实现它。

```
Settings.System.putInt(getContentResolver(), 
                           Settings.System.SCREEN_OFF_TIMEOUT, 10); 
```

这会将 10 毫秒设置为 screen_timeout SYSTEM-WIDE 的超时。

现在您可能会被由此带来的 SYSTEM-WIDE 更改所困扰。要解决这个问题，您可以获取默认的 screen_timeout_time 并将其保存到一个变量中，然后在您的活动的完成（）处设置系统的 SCREEN_OFF_TIMEOUT。

在设置 10ms 作为我们的 screen_timeout 之前，得到 SCREEN_OFF_TIMEOUT，

```
int defaultScreenTimeout= android.provider.Settings.
      System.getInt(getContentResolver(),Settings.System.SCREEN_OFF_TIMEOUT,-1); 
```

现在，当您完成更改或活动结束时，您可以将 SCREEN_OFF_TIMEOUT 设置回来。

```
@Override
public void finish(){
    Settings.System.putInt(getContentResolver(), 
                      Settings.System.SCREEN_OFF_TIMEOUT, defaultScreenTimeout);
super.finish();
} 
```

# android - Android 可扩展列表视图片段

> ID：14274392
> 
> 赞同：3
> 
> 时间：2013-01-11T08:39:06.427
> 
> 标签：android, fragment, android-listfragment

我正在寻找具有可扩展列表视图的实现片段。[搜索后，我在https://gist.github.com/1316903](https://gist.github.com/1316903)上找到了一个实现可扩展列表视图片段的类。但我不知道如何使用它。请帮我。我尝试了列表片段，但我不知道使用带有可扩展列表视图的片段提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:46:36.607

Android 在 ApiDemos 项目中有大量工作代码示例。您可以在 Eclipse 中以 New->“Android 示例项目”的形式获取它。ApiDemos 有一个很好的可扩展列表示例。在使用更复杂和更高级的示例之前，这是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T18:26:12.350

这是我在 MonoDroid/C# 中得到的。我不得不去掉一些代码（为了保密），但它应该是完整的。

此实现可以支持不同的子视图，其中每个组包含在整个组中相同的特定子类型。但是，您可以在一个组内混合子类型，甚至可以有不同的组类型（这只会改变组标题；我对两个组使用相同的组类型，并使用组的位置来确定子组-类型 - 所以 group[0] 包含 ExpandableListChild1 的子项和 ExpandableListChild2 的 group[1] - 是预期用途）。

这里的子类型仅在背景颜色上有所不同（为简单起见），但是这些视图可以是您需要的任何视图，包括自定义视图。只需为您需要的任何视图创建一个相应的 ExpandListChild 子类。此外，基类 ExpandListChildAbs 可以是适合您的应用程序所需的任何内容。如果您只有一个子类型，则不需要基类，但是如果有两个或更多，那么您需要某种基类，这两种子类型都可以子类化以支持 BaseExpandableListAdapter 方法 getChild 和相关方法中的多态性.

```
[Activity(
    Label = "ExpandableListView in a Fragment", 
    Theme = "@android:style/Theme.NoTitleBar", 
    MainLauncher = false,
    ConfigurationChanges = ConfigChanges.KeyboardHidden,
    WindowSoftInputMode = SoftInput.AdjustPan | SoftInput.StateHidden)] 

public class Fragment1 : Fragment
{
    private ViewGroup _thisView;       

    private Bundle _bundle;
    private LayoutInflater _inflater;
    private ViewGroup _container;

    public override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);          

        _bundle = bundle;
        _model = Model;
    }

    public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle bundle)
    {
        base.OnCreateView(inflater, container, bundle);

        _inflater = inflater;
        _container = container;
        _bundle = bundle;

         Render();

        return _thisView;
    }        

    public override void OnAttach(Activity activity)
    {
        base.OnAttach(activity);

        _dialogListener = (IDialogWindow)activity;
    }                

    //public Context LocalContext { get; set; }

    public override void OnActivityCreated(Bundle savedInstanceState)
    {
        base.OnActivityCreated(savedInstanceState);            
    }

    public override void OnViewCreated(View view, Bundle savedInstanceState)
    {
        base.OnViewCreated(view, savedInstanceState);            
    }

    public override void Render()
    {   
        _thisView = (ViewGroup)_inflater.Inflate(Resource.Layout.MainLayout, _container, false);

        ExpandableListView elvParcelInfo = _thisView.FindViewById<ExpandableListView>(Resource.Id.elv_parcel_info);
        List<ExpandListGroup> expandListItems = SetStandardGroups();
        ExpandListAdapter expandListAdapter = new ExpandListAdapter(Activity.ApplicationContext, expandListItems);
        elvParcelInfo.SetAdapter(expandListAdapter);
    }

    public List<ExpandListGroup> SetStandardGroups()
    {
        List<ExpandListChild1> childern1 = new List<ExpandListChild1>();

        for (int i = 0; i < 20; i++)
        {
            ExpandListChild1 child1 = new ExpandListChild1();
            child1.Name = "child1 #" + i.ToString();
            child1.Tag = null;

            childern1.Add(child1);
        }

        ExpandListGroup group1 = new ExpandListGroup();
        group1.Name = "Comedy";
        //group1.Items = childern1;
        group1.Items = new List<ExpandListChildAbs>();
        foreach (ExpandListChild1 child1 in childern1)
        {
            group1.Items.Add(child1);
        }

        /////////////////////////////////////////////////////////////

        List<ExpandListChild2> childern2 = new List<ExpandListChild2>();

        for (int i = 0; i < 20; i++)
        {
            ExpandListChild2 child2 = new ExpandListChild2();
            child2.Name = "child2 #" + i.ToString();
            child2.Tag = null;

            childern2.Add(child2);
        }

        ExpandListGroup group2 = new ExpandListGroup();
        group2.Name = "Action";
        //group2.Items = childern2;
        group2.Items = new List<ExpandListChildAbs>();
        foreach (ExpandListChild2 child2 in childern2)
        {
            group2.Items.Add(child2);
        }

        /////////////////////////////////////////////////////////////

        List<ExpandListGroup> groups = new List<ExpandListGroup>();
        groups.Add(group1);
        groups.Add(group2);

        return groups;
    }

    public abstract class ExpandListChildAbs : Java.Lang.Object
    {
        public abstract String Name { get; set; }
        public abstract String Tag { get; set; }
    }

    public class ExpandListChild1 : ExpandListChildAbs
    {
        public override String Name { get; set; }
        public override String Tag { get; set; }
    }

    public class ExpandListChild2 : ExpandListChildAbs
    {
        public override String Name { get; set; }
        public override String Tag { get; set; }
    }

    public class ExpandListGroup : Java.Lang.Object
    {
        public String Name { get; set; }
        public List<ExpandListChildAbs> Items { get; set; }
    }

    public class ExpandListAdapter : BaseExpandableListAdapter
    {
        private enum ChildTypes { ChildType1, ChildType2 }
        private Context context;
        private List<ExpandListGroup> groups;

        public ExpandListAdapter(Context context, List<ExpandListGroup> groups) 
        {
            this.context = context;
            this.groups = groups;
        }

        public void AddItem(ExpandListChildAbs item, ExpandListGroup group) 
        {                              
            if (!groups.Contains(group)) 
            {
                groups.Add(group);
            }

            int index = groups.IndexOf(group);

            List<ExpandListChildAbs> ch = groups[index].Items;

            ch.Add(item);
            groups[index].Items = ch;
        }

        public override bool HasStableIds
        {
            get { return true; }
        }

        public override bool IsChildSelectable(int arg0, int arg1)
        {
            return true;
        }

        //______________________________________________________________________________________________________
        // Get Child Methods
        //______________________________________________________________________________________________________

        public override long GetChildId(int groupPosition, int childPosition)
        {
            return childPosition;                
        }

        public override int GetChildrenCount(int groupPosition)
        {
            List<ExpandListChildAbs> chList = groups[groupPosition].Items;               

            return chList.Count;
        }

        public override int ChildTypeCount
        {
            get { return Enum.GetNames(typeof(ChildTypes)).Length; }
        }

        public override int GetChildType(int groupPosition, int childPosition)
        {   
            //return base.GetChildType(groupPosition, childPosition);

            if (groupPosition == 0)
            {
                return (int)ChildTypes.ChildType1;
            }

            if (groupPosition == 1)
            {
                return (int)ChildTypes.ChildType2;
            }

            return 0;
        }

        public override Java.Lang.Object GetChild(int groupPosition, int childPosition)
        {
            List<ExpandListChildAbs> chList = groups[groupPosition].Items;

            return chList[childPosition];
        }

        public override View GetChildView(int groupPosition, int childPosition, bool isLastChild, View view, ViewGroup parent)
        {
            int ChildType = GetChildType(groupPosition, childPosition);

            if (ChildType == (int)ChildTypes.ChildType1)
            {
                return GetChildView_ChildType1(groupPosition, childPosition, isLastChild, view, parent);
            }

            if (ChildType == (int)ChildTypes.ChildType2)
            {
                return GetChildView_ChildType2(groupPosition, childPosition, isLastChild, view, parent);
            }

            return null;
        }

        private View GetChildView_ChildType1(int groupPosition, int childPosition, bool isLastChild, View view, ViewGroup parent)
        {   
            ExpandListChild1 child1 = (ExpandListChild1)GetChild(groupPosition, childPosition);

            if (view == null)
            {
                LayoutInflater infalInflater = (LayoutInflater)context.GetSystemService(Context.LayoutInflaterService);

                view = infalInflater.Inflate(Resource.Layout.ExpandList_ChildItem1, null);
            }

            TextView tv = view.FindViewById<TextView>(Resource.Id.tvChild1);

            tv.Text = child1.Name;
            tv.Tag = child1.Tag;

            return view;
        }

        private View GetChildView_ChildType2(int groupPosition, int childPosition, bool isLastChild, View view, ViewGroup parent)
        {
            ExpandListChild2 child2 = (ExpandListChild2)GetChild(groupPosition, childPosition);

            if (view == null)
            {
                LayoutInflater infalInflater = (LayoutInflater)context.GetSystemService(Context.LayoutInflaterService);

                view = infalInflater.Inflate(Resource.Layout.ExpandList_ChildItem2, null);
            }

            TextView tv = view.FindViewById<TextView>(Resource.Id.tvChild2);

            tv.Text = child2.Name;
            tv.Tag = child2.Tag;

            return view;
        }

        //________________________________________________________________________________________________________

        //______________________________________________________________________________________________________
        // Get Group Methods
        //______________________________________________________________________________________________________

        public override long GetGroupId(int groupPosition)
        {
            return groupPosition;
        }

        public override int GroupCount
        {
            get { return groups.Count; }
        }

        public override int GroupTypeCount 
        { 
            get { return base.GroupTypeCount; } 
        }

        public override int GetGroupType(int groupPosition)
        {
            return base.GetGroupType(groupPosition);
        }

        public override Java.Lang.Object GetGroup(int groupPosition)
        {
            return groups[groupPosition];
        }

        public override View GetGroupView(int groupPosition, bool isLastChild, View view, ViewGroup parent) 
        {
            ExpandListGroup group = (ExpandListGroup) GetGroup(groupPosition);

            if (view == null) 
            {
                LayoutInflater inf = (LayoutInflater) context.GetSystemService(Context.LayoutInflaterService);

                view = inf.Inflate(Resource.Layout.ExpandList_GroupItem, null);
            }

            TextView tv = view.FindViewById<TextView>(Resource.Id.tvGroup);

            tv.Text = group.Name;

            return view;
        }

        //________________________________________________________________________________________________________
    }      
} 
```

* * *

主布局

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/ll_left_parcel"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  android:background="#FF8F8D8F">     

  <ExpandableListView
    android:id="@+id/elv_parcel_info"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#FFCFCDCF"
    android:groupIndicator="@null"/>  

</LinearLayout> 
```

* * *

ExpandList_GroupItem

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="55dip"
    android:background="#FF00AA55"
    android:orientation="vertical" >

  <TextView
      android:id="@+id/tvGroup"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_marginRight="15dp"
      android:textColor="#FF000000"
      android:textSize="17dip" />

</LinearLayout> 
```

* * *

ExpandList_ChildItem1

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="55dip"
    android:background="#FF8800CC"
    android:orientation="vertical" >

  <TextView
      android:id="@+id/tvChild1"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:textColor="#FF000000"
      android:textSize="17dip" />

</LinearLayout> 
```

* * *

ExpandList_ChildItem2

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="55dip"
    android:background="#FFAA00FF"
    android:orientation="vertical" >

  <TextView
      android:id="@+id/tvChild2"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:textColor="#FF000000"
      android:textSize="17dip" />

</LinearLayout> 
```

# iphone - 在 iOS 媒体播放器控制器中禁用全屏模式

> ID：14274398
> 
> 赞同：0
> 
> 时间：2013-01-11T08:39:25.897
> 
> 标签：iphone, ios, button, media-player, hide

我想限制媒体播放器进入全屏模式。是否可以自定义 iPhone 媒体播放器控制器的控制器？我们可以禁用媒体播放器控制器中的全屏按钮吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:47:10.603

检查[文档](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)`fullscreen`中所述的属性和`setFullscreen:animated`方法。

编辑：我相信我误读了你的问题——抱歉。

不是最好的解决方案，但您可以覆盖`setFullscreen:`以简单地忽略请求：

```
 - (void)setFullscreen:(BOOL)full {
      // Ignore request      
 } 
```

至于自定义控件，您可以选择设置`controlStyle`，但所有这些都有一个全屏按钮，保存“MPMovieControlStyleNone”，它不会给您任何控件。您*可以*结合 MPMovieControlStyleNone 并覆盖您自己的控制栏。

我自己可能会选择后者，因为我希望作为用户工作的禁用按钮可能会令人沮丧。

希望至少部分赢得反对票。:-)

编辑：*添加更多信息/代码*

所以这只是你可以做的一些简单的事情。我使用 IB 构建工具栏

![工具栏.tiff](../Images/3d9843007450b213d3c72b2633cfd0dd.png)

以及一些放置代码和一些愚蠢的颜色（这个实际上有点刺耳）：

```
NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"bar" owner:self options:nil];
UIToolbar *toolbar;
if ( nil != array ) {
    toolbar = array[0];
}

CGSize barSize = CGSizeMake(self.window.frame.size.width, 44);
CGSize winSize = self.window.frame.size;

[toolbar setFrame:CGRectMake(0, winSize.height - barSize.height, winSize.width, barSize.height)];
[toolbar setTranslucent:YES];
[toolbar setBackgroundImage:nil forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
[toolbar setTintColor:[UIColor colorWithRed:138/255 green:187/255 blue:255/227 alpha:0.4]];

[self.window addSubview:toolbar]; 
```

只需连接按钮，也许做一个清晰的颜色覆盖来处理在电影播放器​​中已经很常见的点击调出控制功能。

# css - 多个div并排固定宽度

> ID：14274399
> 
> 赞同：0
> 
> 时间：2013-01-11T08:39:32.277
> 
> 标签：css, html

我希望 6 个 div 并排显示服务包。问题是我想要所有这些都具有指定的像素宽度。但我无法给它们以像素为单位的宽度。并且父 div 正在调整为它们获得的宽度，因为我已经指定了 80% 的宽度。我检查了其他帖子，但他们没有帮助我。我正在处理这段代码......

```
<div id="main">
        <div id="content" class="shadow">
            <div id="p-col1">
                <ul>
                    <li><h1>heading</h1></li>
                    <li>text text text </li>
                    <li class="grey">text text text </li>
                </ul>
            </div>
            <div id="p-col2">
                <ul>
                    <li><h1>Heading</h1></li>
                    <li>text text </li>
                </ul>
            </div>
            <div id="p-col3">
                <ul>
                    <li><h1>Heading</h1></li>
                    <li>text text </li>
                </ul>
            </div>
            <div id="p-col4" class="shadow">
                <ul>
                    <li><h1>Heading</h1></li>
                    <li>text text </li>
                </ul>
            </div>
            <div id="p-col5">
                <ul>
                    <li><h1>Heading</h1></li>
                    <li>text text </li>
                </ul>
            </div>
            <div id="p-col6">
                <ul>
                    <li><h1>Heading</h1></li>
                    <li>text text </li>
                </ul>
            </div>
        </div>

    </div><!-- End of Main --> 
```

CSS：

```
 #main{
    width:80%;
    margin:0 auto;
    border:0px;
    font-size:18px;
}
.shadow {
    box-shadow:3px 0 10px #222 , -3px 0 10px #222;
    -moz-box-shadow:3px 0 10px #222 , -3px 0 10px #222;
    -webkit-box-shadow:3px 0 10px #222 , -3px 0 10px #222;  
}
#main #content{
    float:left;
    display:inline-block;
    padding:0;
    position:relative;
    padding:10px 10px 10px 10px;
}
#p-col1{
    widht:100px;
    background-color:#FFFFFF;
    border-radius:10px 10px 10px 10px;
    -moz-border-radius:10px 10px 10px 10px;
    -webkit-border-radius:10px 10px 10px 10px;
    float:left;
    position:relative;
}
#p-col1 h1{
    color:#ffffff;
    background-color:#d1ebf1;
    padding:25px 5px 5px 5px;
    font-size:20px;
    font-weight:bolder;
    text-align:center;
    border-radius:10px 10px 0 0;
    -moz-border-radius:10px 10px 0 0;
    -webkit-border-radius:10px 10px 0 0;
}
#p-col2{
    widht:100px;
    background-color:#7098e0;
    border-radius:10px 10px 10px 10px;
    -moz-border-radius:10px 10px 10px 10px;
    -webkit-border-radius:10px 10px 10px 10px;
    float:left;
    position:relative;
}
#p-col2 h1{
    color:#ffffff;
    background-color:#0152e7;
    padding:25px 5px 5px 5px;
    font-size:20px;
    font-weight:bolder;
    text-align:center;
    border-radius:10px 10px 0 0;
    -moz-border-radius:10px 10px 0 0;
    -webkit-border-radius:10px 10px 0 0;
}
#p-col3{
    widht:100px;
    background-color:#778cdd;
    border-radius:10px 10px 10px 10px;
    -moz-border-radius:10px 10px 10px 10px;
    -webkit-border-radius:10px 10px 10px 10px;
    float:left;
    position:relative;
}
#p-col3 h1{
    color:#ffffff;
    background-color:#012edd;
    padding:25px 5px 5px 5px;
    font-size:20px;
    font-weight:bolder;
    text-align:center;
    border-radius:10px 10px 0 0;
    -moz-border-radius:10px 10px 0 0;
    -webkit-border-radius:10px 10px 0 0;
}
#p-col4{
    widht:100px;
    background-color:#75c3d7;
    border-radius:10px 10px 10px 10px;
    -moz-border-radius:10px 10px 10px 10px;
    -webkit-border-radius:10px 10px 10px 10px;
    float:left;
    position:relative;
}
#p-col4 h1{
    color:#ffffff;
    background-color:#01abd8;
    padding:25px 5px 5px 5px;
    font-size:20px;
    font-weight:bolder;
    text-align:center;
    border-radius:10px 10px 0 0;
    -moz-border-radius:10px 10px 0 0;
    -webkit-border-radius:10px 10px 0 0;
}
#p-col5{
    widht:100px;
    background-color:#729fcc;
    border-radius:10px 10px 10px 10px;
    -moz-border-radius:10px 10px 10px 10px;
    -webkit-border-radius:10px 10px 10px 10px;
    float:left;
    position:relative;
}
#p-col5 h1{
    color:#ffffff;
    background-color:#0b6dd0;
    padding:25px 5px 5px 5px;
    font-size:20px;
    font-weight:bolder;
    text-align:center;
    border-radius:10px 10px 0 0;
    -moz-border-radius:10px 10px 0 0;
    -webkit-border-radius:10px 10px 0 0;
}
#p-col6{
    widht:100px;
    background-color:#7098e0;
    border-radius:10px 10px 10px 10px;
    -moz-border-radius:10px 10px 10px 10px;
    -webkit-border-radius:10px 10px 10px 10px;
    float:left;
    position:relative;
}
#p-col6 h1{
    color:#ffffff;
    background-color:#0189d4;
    padding:25px 5px 5px 5px;
    font-size:20px;
    font-weight:bolder;
    text-align:center;
    border-radius:10px 10px 0 0;
    -moz-border-radius:10px 10px 0 0;
    -webkit-border-radius:10px 10px 0 0;
}
li.grey{
    background-color:#e3e8e9;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:44:52.517

你可以给他们像素`width`。但是你有一个错字。
你写`widht`了，应该是`width`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:47:31.337

您的 css 中有拼写错误....您已将宽度指定为 widht

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:45:28.160

你可以用这个`CSS`

```
#content { width: 100%; height: 150px; }
#p-col1, #p-col2, #p-col3, #p-col4, #p-col5, #p-col6 { width: 16%; height: 150px; float: left; } 
```

或者

```
.service-div { width: 16%; height: 150px; float: left; }

<div id="p-col1 service-div">
            <ul>
                <li><h1>heading</h1></li>
                <li>text text text </li>
                <li class="grey">text text text </li>
            </ul>
        </div> 
```

为其他 5 做`div`这个

# php - 数据将如何编码和发送？

> ID：14274400
> 
> 赞同：0
> 
> 时间：2013-01-11T08:39:34.010
> 
> 标签：php, html, forms, uri

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:53:40.243

将与您在浏览器地址栏中键入以下内容相同：

```
http://somedomain.com/login/select_from_users.php?name=John%20Smith&password=one%26two%26 
```

`space`变成`%20`,`&`变成`%26`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:48:03.037

我更喜欢将方法设置为“post”。如果我们使用 get 方法，我们从用户那里获得的输入详细信息将在 URL 上可见，包括密码，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:52:23.193

我不知道为什么你需要对用户自己输入的数据进行编码，除了密码部分，没有人应该看到，这就是为什么你应该使用 post 方法，

如果您需要将数据安全地传递到服务器（来自用户），那么您需要的是 SSL

如果您只是使用**METHOD="POST"**代替，那么用户将不会在 URL 栏中看到任何数据，如果这就是您的意思

# php - 如何在没有ffmpeg的情况下在php中创建上传视频文件的缩略图？

> ID：14274410
> 
> 赞同：3
> 
> 时间：2013-01-11T08:40:09.887
> 
> 标签：php, thumbnails

是否有可能在不使用 ffmpeg 的情况下在 php 中创建上传的视频文件的缩略图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:47:17.480

过去我曾使用[该网站](https://transloadit.com/)进行视频转换和创建缩略图。它运行良好，并且有免费和付费计划。

该系统由几个执行不同工作的“机器人”组成。如果您将视频放在带有 URI 或 Amazon S3 的公用文件夹中，这些机器人可以读取您的视频。机器人必须执行的操作在 JSON 的“模板”中定义，并具有 PHP SDK。看看[文档](https://transloadit.com/docs)。

PS：我和transloadit没有关系，好像我是个商业人...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-17T20:02:24.710

大多数服务器端脚本依赖于 ffmpeg，所以如果你不能使用它，你可以将视频上传到外部服务，但这意味着发送整个文件，或者你可以尝试在浏览器中创建它们的客户端——[生成缩略图使用 HTML5 的视频标签和画布从视频文件中提取](https://gist.github.com/adamjimenez/5917897)

但是，如果由于安装原因您不能使用 ffmpeg，您可以[查看一个包装器](https://code.google.com/p/phpvideotoolkit/)——它目前在纯 PHP 中提供 FFmpeg-PHP 仿真，因此您不需要编译和安装模块。

# solr - Solr 模糊搜索只执行区分大小写的搜索

> ID：14274418
> 
> 赞同：0
> 
> 时间：2013-01-11T08:40:53.530
> 
> 标签：solr, fuzzy-search

我的数据库包含 first_name 作为“Sumit”，当我搜索它时，它给了我以下 first_name:Sumit~0.7 / first_name:Sumits~0.7 的结果

但是，如果我尝试像 -first_name:SUMIT~0.7 / first_name:SUMIT~0.7 这样不区分大小写的搜索，它不会返回任何内容

我的 schema.xml 内容是：

```
 <fieldType name="custum_fuzzy_text" class="solr.TextField" omitNorms="false">
     <analyzer type="index"> 
      <tokenizer class="solr.StandardTokenizerFactory"/>
      <filter class="solr.StandardFilterFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
     </analyzer>
     <analyzer type="query">
      <tokenizer class="solr.StandardTokenizerFactory"/>
      <filter class="solr.StandardFilterFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType> 
```

任何人都可以帮忙吗？难道我做错了什么？或者我有没有做其他事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:47:15.760

[分析仪](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Analyzers)

```
On wildcard and fuzzy searches, no text analysis is performed on the search word. 
```

由于在查询时没有对模糊搜索进行分析，因此在查询时将应用小写过滤器。
您需要在客户端处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:47:38.213

您使用的是哪个版本的 Solr？这是相当重要的。此外，您实际上是在使用 ' *' （如 Summit*）还是只是普通文本进行模糊查询。这两种情况也不同。

如果您正在执行“*”查询并且您的 Solr 在 3.6 之前，那么您遇到[了 MultiTerm 问题](http://searchhub.org/2011/11/29/whats-with-lowercasing-wildcard-multiterm-queries-in-solr/)（Fuzzy 的技术名称）。

如果您不使用 *，我不确定问题是什么。在 Solr 4 中，Admin 界面有 Analyzer 部分，您可以在其中将文本与字段定义放在一起，然后查看结果。试试看。

最后，作为一个说明，如果你的索引和查询分析器集是一样的，你不需要写两次，只需要一个组合分析器部分（没有 type=...）

# c# - 如何打开最近关闭或隐藏表格

> ID：14274422
> 
> 赞同：1
> 
> 时间：2013-01-11T08:41:05.093
> 
> 标签：c#, winforms, forms, forward

我已经彻底研究过，但我仍然找不到最好的解决方案。我有一个 3 个按钮，返回 - 主页 - 前进 ..

这就像浏览器左上角的按钮.. 我试图在表单上执行此操作..

我有的是这个..

后退按钮代码是

```
private void button1_Click(object sender, EventArgs e)
{
    this.Hide();
}

// simply hiding the form .. so that the previous form will be shown.. 
```

主页按钮代码是这个..

```
private void button2_Click(object sender, EventArgs e)
{
    for (int i = Application.OpenForms.Count - 1; i >= 0; i--)
    {
        if (Application.OpenForms[i].Name != "HomePage")
            Application.OpenForms[i].Close();
    }
} 

// this will show the HomePage form and close other forms whos name is not "HomePage" 
```

问题是当我按下后退按钮时，我隐藏它..按钮如何重新打开以前关闭或隐藏的表单？

我希望你能帮帮我！谢谢！

```
private void button3_Click(object sender, EventArgs e)
{
    ???????
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:13:12.610

您需要存储对要再次打开的表单的引用。

有几个选项可以做到这一点，但如果你只是想让用户“前进”一次，你可以像这样存储对表单的引用：

```
internal class MyHistory {
    internal static Form LastForm;
}

// ........

private void button1_Click(object sender, EventArgs e)
{
    MyHistory.LastForm = this;
    this.Hide();
}

// ........

private void button3_Click(object sender, EventArgs e)
{
    MyHistory.LastForm.Show();
} 
```

当然，如果您想比这更全面，您可以维护完整的历史项目堆栈并向后/向前遍历它们。

请注意，如果您是`.Close()`您的表单，您将无法重新打开它，因为引用将在关闭后被处理掉。此方法仅在您使用`.Hide()`它时才有效，它使表单实例保持有效，只是从用户的视图中隐藏表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:27:44.907

您可以使用包含所有已初始化表单的表单列表。这样您就可以动态地隐藏、显示、添加和删除表单。

```
List<Form> lstForms = new List<Form>(); 
```

然后当您添加表单时：

```
Form newForm = new Form();

lstForms.Add(newForm); 
```

隐藏表格：

```
lstForms(x).Hide(); //x = index of Form you want to hide 
```

显示表格

```
lstForms(x).Show(); //x = index of Form you want to hide 
```

删除表单（例如关闭时）

```
lstForms.RemoveAt(x); 
```

这样您就可以动态地处理表单，如果您有许多表单，则更容易保持概览......

# sql - 检索满足给定七个条件中的至少四个的行

> ID：14274428
> 
> 赞同：3
> 
> 时间：2013-01-11T08:41:38.367
> 
> 标签：sql, oracle

我有一个名为“字母表”的表，其中的列名为“A 到 G”。

```
Table Name: Alphabets

Column Names: A | B | C | D | E | F | G 
```

现在，我需要一个 SQL 查询来从表中检索满足以下列表中至少四个条件的所有行：

```
A = 1   
B = 2  
C = 3  
D = 4  
E = 5  
F = 6
G = 7 
```

我正在使用 Oracle 10g 数据库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T08:48:03.503

```
SELECT * FROM Alphabets where
CASE WHEN A=1 THEN 1 ELSE 0 END +
CASE WHEN B=2 THEN 1 ELSE 0 END +
CASE WHEN C=3 THEN 1 ELSE 0 END +
CASE WHEN D=4 THEN 1 ELSE 0 END +
CASE WHEN E=5 THEN 1 ELSE 0 END +
CASE WHEN F=6 THEN 1 ELSE 0 END +
CASE WHEN G=7 THEN 1 ELSE 0 END >= 4 
```

但是关于这个表和查询的一些东西似乎很可疑——感觉它应该真的是一个两列的表，`Letter`然后`Value`说。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T08:48:32.117

我能想到的一个丑陋的解决方案（我确信必须有更好的解决方案，但是这个应该可行，尽管我不相信它在任何意义上都是最佳的......）

```
SELECT * 
FROM Alphabets
WHERE
CASE WHEN A=1 THEN 1 ELSE 0 END + 
CASE WHEN B=2 THEN 1 ELSE 0 END + 
CASE WHEN C=3 THEN 1 ELSE 0 END + 
CASE WHEN D=4 THEN 1 ELSE 0 END + 
CASE WHEN E=5 THEN 1 ELSE 0 END + 
CASE WHEN F=6 THEN 1 ELSE 0 END + 
CASE WHEN G=7 THEN 1 ELSE 0 END BETWEEN 4 AND 7 
```

这有问题：

*   不能很好地扩展 - 新约束 - 查询中的新行...
*   在性能方面它不是最佳的
*   也只是非常丑陋

# java - Why do i get appcfg.sh: permission denied when i try to download my app from google app engine?

> ID：14274429
> 
> 赞同：2
> 
> 时间：2013-01-11T08:41:41.947
> 
> 标签：java, google-app-engine, bulkloader, bulk-load

I am using google app engine with java. In my web.xml i added following code:

```
 <servlet>
    <servlet-name>RemoteApi</servlet-name>
    <servlet-class>com.google.apphosting.utils.remoteapi.RemoteApiServlet</servlet-class>
 </servlet>
 <servlet-mapping>
    <servlet-name>RemoteApi</servlet-name>
    <url-pattern>/remote_api</url-pattern>
 </servlet-mapping> 
```

Now when i write following command:

```
 /Users/araz68/Downloads/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.4/appengine-java-sdk-1.7.4/bin/appcfg.sh download_data --config_file=config.yml --filename=data.csv --kind=Greeting --url=http://myappid.appspot.com/remote_api --application=myappid 
```

and i get following text in command prompt:

```
 -bash:/Users/araz68/Downloads/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.4/appengine-java-sdk-1.7.4/bin/appcfg.sh: Permission denied 
```

Can anybody please tell me why permission is denied. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:44:44.060

您是上传应用程序的开发人员吗？Java 应用程序只能由上传它的用户下载：[https ://developers.google.com/appengine/docs/java/tools/uploadinganapp#Downloading_an_Application](https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Downloading_an_Application)

# angularjs - 在 AngularJS 中获取递增的数字

> ID：14274431
> 
> 赞同：0
> 
> 时间：2013-01-11T08:41:58.493
> 
> 标签：angularjs

我正在使用 AngularJS 创建一个数据表。由于 Angular 允许您对控制器中的数据进行过滤和排序，有没有办法指定增量值？

例如：

`Rank | UserName | Score | Last Played`

这里的排名将按最高分排序。

相应地设置等级的角度表达式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:50:31.997

来自：[在AngularJS模板中增加一个变量](https://stackoverflow.com/questions/12982667/increment-a-variable-in-angularjs-template)

`{{$index + 1}}`

**$index**包含当前从 0 开始的索引`ng-repeat`

所以我有：

```
<tbody>
 <tr ng-repeat="user in users">
  <td>{{$index + 1}}</td>
  <td>{{user.UserName}}</td>
  <td>{{user.Score}}</td>
  <td>{{user.LastPlayed}}</td>
 </tr>
</tbody> 
```

# sql - Datediff 日期和小时（24 小时）

> ID：14274434
> 
> 赞同：3
> 
> 时间：2013-01-11T08:42:26.747
> 
> 标签：sql, sql-server, tsql

我知道这是一个简单的问题，但我被困住了。我分别尝试`DateDiff`了一天和一小时，但我希望我的日期可以检测到我的时间，如果它超过 24 小时。

例如：

```
Date1: 20/12/2011
Time1: 9:00

Date2: 21/12/2011
Time2 : 13:00

Days Taken: 1
Time Taken: 28 
```

我想计算天数和小时数，所以 1 天 4 小时是我想要的结果。

谁能帮我解决这个问题？欣赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:51:06.367

也许在以下帮助下[`MODULO`](http://msdn.microsoft.com/en-us/library/ms190279.aspx)：

```
SELECT (
  DATEDIFF(dd,
    CONVERT(datetime,'20/12/2011 09:00:00',104),
    CONVERT(datetime,'21/12/2011 13:00:00',104))
 ) AS [days taken],
(
  DATEDIFF(hh,
    CONVERT(datetime,'20/12/2011 09:00:00',104),
    CONVERT(datetime,'21/12/2011 13:00:00',104))
   % 24
 ) AS [hours taken] 
```

结果：

```
DAYS TAKEN      HOURS TAKEN
    1                4 
```

[**演示**](http://www.sqlfiddle.com/#!6/d41d8/1910/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T08:55:28.553

在 sql 服务器中；

```
declare @d1 datetime = '20111220 09:00:00'
declare @d2 datetime = '20111221 13:00:00'

select hours/24 daysTaken, hours%24 hoursTaken
from (
    select datediff(hh,@d1,@d2) hours
) A

--Results
daysTaken hoursTaken
   1          4 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T08:50:44.227

假设您使用的是 SQL Server

```
Select datediff(hour,date1,date2)/24.0 from table 
```

# java - Jenkins running phing exectask. Exectask uses ssh agent forwarding. Permission denied. How to resolve?

> ID：14274437
> 
> 赞同：3
> 
> 时间：2013-01-11T08:42:43.653
> 
> 标签：java, ssh, nginx, jenkins, phing

# What went wrong

I have a ubuntu 12.10 server.

**I installed Jenkins and Nginx in the same server.**

The /var/virtual where Nginx is supposed to server files from has a permission settings of www-data:www-data

The user `jenkins` is running Jenkins the software.

![enter image description here](../Images/2217864447fe65300cd8409bf9f8f072.png)

This is my target written in phing build.xml

```
<target name="gitclone">
        <echo msg="gitclone ${environment.branch} branch code to ${environment} environment" />

        <exec command="ssh -A ${host-used} 'git clone -b ${repository-uri} ${environment.branch} ${environment.sitedir}${build.time}'"
         outputProperty="result" escape="false"/>
        <echo msg="${result}" />

        <echo msg="update all the submodules after gitclone" />
        <exec dir="${environment.sitedir}${build.time}" command="ssh -A ${host-used} 'git submodule update --init --recursive'" outputProperty="result" escape="false" />
        <echo msg="${result}" />

    </target> 
```

This is my console output from jenkins:

```
[echo] gitclone master branch code to production environment
[echo] Permission denied, please try again.
Permission denied, please try again.
Permission denied (publickey,password).
[echo] update all the submodules after gitclone
Execution of target "gitclone" failed for the following reason: /var/lib/jenkins/jobs/abc-master/workspace/build.xml:116:48: '/var/virtual/abc.com/2013_01_11_07_45_35' is not a valid directory 
```

# What I tried

I googled around and then I saw [this github article on ssh agent forwarding](https://help.github.com/articles/using-ssh-agent-forwarding).

This is what I tried.

I ssh into my server as jenkins.

Then I typed

```
ssh -T www-data@xxx.xx.xxx.xx 
```

I was prompted for www-data@xxx.xx.xxx.xx password which I then gave. Note that xxx.xx.xxx.xx from now onwards refer to the ip address of the same server.

I successfully logged in as www-data, so I exited www-data@xxx.xx.xxx.xx. Now back in server as `jenkins` user.

Now I try

```
echo "$SSH_AUTH_SOCK" 
```

I got nothing.

I went inside /var/lib/jenkins/.ssh/config and typed the following:

```
Host xxx.xx.xxx.xx
ForwardAgent yes
IdentityFile /var/lib/jenkins/.ssh/id_rsa
StrictHostkeyChecking no 
```

Build `Jenkins` job again. Fail.

Then I thought maybe I need to set the authorized_keys inside www-data ~/.ssh/authorized_keys file so that whenever we go from jenkins@xxx.xx.xxx.xx to www-data@xxx.xx.xxx.xx, I won't get prompted for password.

So as `jenkins`, I typed

```
cat ~/.ssh/id_rsa.pub | ssh www-data@xxx.xx.xxx.xx 'cat >> .ssh/authorized_keys' 
```

Then I typed

```
ssh -T www-data@xxx.xx.xxx.xx 
```

I was prompted for www-data@xxx.xx.xxx.xx password which I then gave.

I successfully logged in as www-data **without getting prompted for password this time**, so I exited www-data@xxx.xx.xxx.xx. Now back in server as `jenkins` user.

Build `Jenkins` job again. Fail.

As `jenkins`, I typed

```
echo "$SSH_AUTH_SOCK" 
```

Nothing was seen.

Tried

```
ssh-add -L 
```

Got

```
Could not open a connection to your authentication agent. 
```

Edited `/etc/ssh/sshd_config` and added

```
AllowAgentForwarding yes 
```

Checked `/etc/ssh/ssh_config`. No `ForwardAgent no` setting.

Build `Jenkins` job again. Fail.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:50:46.597

一方面，我注意到您的 git clone 命令可能写错了。

查看：

```
 <exec command="ssh -A ${host-used} 'git clone -b ${environment.branch} ${repository-uri} ${environment.sitedir}${build.time}'" 
```

我交换了`${environment.branch}`和的位置`${repository-uri}`。

参考：[git-clone(1) 手册页](http://www.kernel.org/pub/software/scm/git/docs/git-clone.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:55:10.537

我建议你使用 ant-jsch

我已经在 jenkins 下使用了 ant-jsch。

ant-jsch 能够控制 ssh 识别等等

# c# - OnPaint does not update

> ID：14274439
> 
> 赞同：2
> 
> 时间：2013-01-11T08:42:47.593
> 
> 标签：c#, onpaint

I have a windows form which contains a user control. This user control has the following code:

```
protected override void OnPaint(PaintEventArgs pe)
{
  base.OnPaint(pe);
  pe.Graphics.DrawRectangle(
       new Pen(Color.Red, 5 + laenge), 
       new Rectangle(
             new Point(50 + leerzeichen, hoehe), 
             new Size(laenge + 20, 20)));
} 
```

and some more code, which is probably not important now. So when I start the programm it draws the red rectangle. All the variables (laenge, leerzeichen, hoehe) are set to 0 at the beginning of the program. Now, when I press a button the variables are changing, but OnPaint does not draw the new rectangle? What could be the problem? Do I have to call OnPaint in some way?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T08:46:29.350

更改变量后，您需要调用`Invalidate()`（它在`OnPaint`内部调用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:52:43.793

您不直接调用 OnPaint。

相反，由于继承自 Win32 (InvalidateRect())，控件的区域需要无效（例如通过调用 Invalidate()）以使 Windows 在刷新期间调用控件的 OnPaint 方法。（见[这个问题](https://stackoverflow.com/questions/2627958)）

请注意，操作系统只能在应用程序等待 Windows 消息队列时处理绘制/刷新请求（即完成处理用户请求或调用 Application.DoEvents()）。

# html - Jslt c out in a href

> ID：14274443
> 
> 赞同：4
> 
> 时间：2013-01-11T08:42:53.907
> 
> 标签：html, jsp, jstl, href

How should I write line:

```
<a href="User?id=<c:out value="${user.id}" />" >Profile</a> 
```

correctly? It shoult give me something like Profile

My context:

```
<c:forEach items="${requestScope.users}" var="user">
    <tr>
    <td><c:out value="${user.login}" /></td>
<td><c:out value="${user.name}" /></td>
    <td><c:out value="${user.lastname}" /></td>
    <td><a href="User?id=<c:out value="${user.id}" />" >Profile</a></td>
    </tr>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T08:50:01.193

`'`在里面试试，`"`反之亦然

```
<a href="User?id=<c:out value='${user.id}' />" >Profile</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-26T12:38:56.767

[在此处查看图片](https://i.stack.imgur.com/nGQ6p.png)

这段代码应该做 `<td><a href="showDetails.jsp?id=${row.id}">Details</a></td>`

# java - Redirect to an action in same controller in Play framework

> ID：14274445
> 
> 赞同：0
> 
> 时间：2013-01-11T08:43:01.663
> 
> 标签：java, playframework, playframework-1.x

I am using Play 1.2.5\. I have an action "welcome" which has redirect statement to an action "view1". Redirect seems to be working ( checked my log) but view of the action "view1" is not displaying after redirect.

```
 public static void welcome(){

     redirect("/view1");
  }
  public static void view1(){
   // code goes here....

  } 
```

After redirect, view of view1 action is not displaying.

Thanks in advance !!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:49:06.553

代替

```
redirect("/view"); 
```

打电话

```
view1(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:38:25.470

你的方法`view1`结束了`render();`吗？

如果不是，您的控制器将不会显示任何内容。

您还需要与您的`view1.html`文件处于同一级别的正确`welcome.html`文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:29:42.990

您可能需要检查 conf/routes 文件以确保 view1 在有效的路由匹配器中公开。例如：

```
* /view1         WhatEverYourControllerClassIsCalled.view1 
```

或通过一些通用匹配器

```
* /{action}      WhatEverYourControllerClassIsCalled.{action} 
```

# c++ - dll函数调用比普通函数调用快吗？

> ID：14274448
> 
> 赞同：5
> 
> 时间：2013-01-11T08:43:11.453
> 
> 标签：c++, windows, performance, dll

我正在测试 DLL 中导出函数和普通函数的速度。DLL 中的导出函数怎么可能快得多？

```
100000000 function calls in a DLL cost: 0.572682 seconds
100000000 normal function class cost: 2.75258 seconds 
```

这是DLL中的函数：

```
extern "C" __declspec (dllexport) int example()
{
    return 1;
} 
```

这是正常的函数调用：

```
int example()
{
    return 1;
} 
```

这就是我测试它的方式：

```
int main()
{
    LARGE_INTEGER frequention;
    LARGE_INTEGER dllCallStart,dllCallStop;
    LARGE_INTEGER normalStart,normalStop;
    int resultCalculation;

    //Initialize the Timer
    ::QueryPerformanceFrequency(&frequention);
    double frequency = frequention.QuadPart;
    double secondsElapsedDll = 0;
    double secondsElapsedNormal = 0;

    //Load the Dll
    HINSTANCE hDll = LoadLibraryA("example.dll");

    if(!hDll)
    {
        cout << "Dll error!" << endl;
        return 0;
    }

    dllFunction = (testFunction)GetProcAddress(hDll, "example");

    if( !dllFunction )
    {
        cout << "Dll function error!" << endl;
        return 0;
    }

    //Dll
    resultCalculation = 0;
    ::QueryPerformanceCounter(&dllCallStart);
    for(int i = 0; i < 100000000; i++)
        resultCalculation += dllFunction();
    ::QueryPerformanceCounter(&dllCallStop);

    Sleep(100);

    //Normal
    resultCalculation = 0;
    ::QueryPerformanceCounter(&normalStart);
    for(int i = 0; i < 100000000; i++)
        resultCalculation += example();
    ::QueryPerformanceCounter(&normalStop);

    //Calculate the result time
    secondsElapsedDll = ((dllCallStop.QuadPart - dllCallStart.QuadPart) / frequency);
    secondsElapsedNormal = ((normalStop.QuadPart - normalStart.QuadPart) / frequency);

    //Output
    cout << "Dll: " << secondsElapsedDll << endl; //0.572682
    cout << "Normal: " << secondsElapsedNormal << endl; //2.75258

    return 0;
} 
```

我只测试函数调用速度，在启动时就可以获取地址。所以失去的性能并不重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T08:53:25.783

对于一个非常小的函数，区别在于函数返回/清理参数的方式。

但是，这不应该有太大的不同。我认为编译器意识到您的函数对 resultCalcuation 没有任何作用并对其进行优化。尝试使用两个不同的变量，然后打印它们的值。

# wcf - WCF 服务中的通信异常

> ID：14274451
> 
> 赞同：0
> 
> 时间：2013-01-11T08:43:23.343
> 
> 标签：wcf, silverlight, silverlight-4.0, silverlight-5.0

我的问题是 AddExcursionAsync 不起作用，它显示 CommunicationException。在控制台应用程序中，此代码运行良好。但在 Silverlight 中它会出错。函数 AddListOgTourNumbersAsync 和 GetListOfTourNumberAsync 工作正常。我在哪里犯了错误？

代码：

```
private AdminServiceClient client;
    public AddExcursionDialog()
    {
        InitializeComponent();
        DurationElement.Value = new DateTime();
        client = new AdminServiceClient();
        client.GetListOfTourNumberCompleted += new EventHandler<GetListOfTourNumberCompletedEventArgs>(GetListOfTourNumber);
        client.AddListOgTourNumbersCompleted += new EventHandler<AsyncCompletedEventArgs>(AddListOfTourNumbers);
        client.AddExcursionCompleted += new EventHandler<AsyncCompletedEventArgs>(AddExcursion);
    }
    private void OKButton_Click(object sender, RoutedEventArgs e)
    {
        excursion = new Excursion();
        excursion.Name = NameText.Text;
        excursion.Cost = Convert.ToDouble(CostText.Text);
        excursion.Place = PlaceText.Text;
        excursion.Duration= (DateTime)DurationElement.Value;
        excursion.Agency_id = tour_names[AgencyCB.SelectedValue.ToString()];
        excursion.MaxPpl = Convert.ToInt32(MaxPplText.Text);
        client.GetListOfTourNumberAsync();
        client.AddExcursionAsync(excursion);
        client.AddListOgTourNumbersAsync(tour_id, excursion.NumberOfList);
        this.DialogResult = true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:15:35.837

我也曾与`CommunicationException(s)`. 那时，我相信网络经常遇到问题。

在我的场景中，我必须使用**重试**算法来稳定这个调用。

我不是说你应该一直这样做，而是用它来测试。

在此代码中，如果第三次尝试失败，则允许抛出异常。

```
 string[] Images64;

    try { /* 1st try */
        Images64 = _VideoClient.GetImagesStr(ImagePaths[0], ImagePaths[1], LFrame, RFrame);
    }
    catch (CommunicationException) {

        try { /* 2nd try */
            Images64 = _VideoClient.GetImagesStr(ImagePaths[0], ImagePaths[1], LFrame, RFrame);
        }
        catch (CommunicationException) {

            try { /* 3rd try */
                Images64 = _VideoClient.GetImagesStr(ImagePaths[0], ImagePaths[1], LFrame, RFrame);
            }
            catch (CommunicationException) {

                throw;
            }
        }
    } 
```

# vhdl - 将文件从 VHDL 进程打开到实例化两次的实体时出现问题：名称冲突

> ID：14274454
> 
> 赞同：1
> 
> 时间：2013-01-11T08:43:36.633
> 
> 标签：vhdl, hdl

我在 VHDL 中有一个实体，它具有以下结构：

```
-- Imports...
entity myentity is
  port (..specifying in and out signals..);
end myentity;

architecture beh_myentity of myentity is
  begin
    process(..sensitivity list..)
      -- Some variables
      file myfile : text open write_mode 
                    is "myentlog.txt";  -- <== My problem is here!!!
        begin
          -- ..The process body..
    end process;
end beh_myentity; 
```

打开文件没有问题，一切正常！我有个问题。当我创建一个测试台并运行它时，我通常会创建一个我的实体实例。但就我而言，我现在需要放置两个实例。我的问题是我将与文件名发生冲突，并且一个进程将不可避免地无法打开和写入（相同的）日志文件。

我想解决这个问题，所以这里有问题：

1.  在我的端口中，我有信号，可以将信号值附加到文件名吗？恐怕这不是最好的事情（甚至不知道这样的事情是否可行）。

2.  有没有办法在测试台中获取一个表示实体实例名称的变量？

3.  有没有办法将字符串传递给实体，以便我可以将它附加到文件名的末尾？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:55:19.583

尝试将文件名作为通用而不是端口传递。

[http://www.ics.uci.edu/~jmoorkan/vhdlref/generics.html](http://www.ics.uci.edu/~jmoorkan/vhdlref/generics.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:57:21.087

字符串类型的信号，包含文件名；或泛型（同样是字符串类型）。

该信号允许您在测试台中的不同时间为同一实体分配不同的文件名 - 使用 VHDL-1993 或更高版本，架构可以`file_open()`使用新文件名调用。

泛型为每个不同的实体提供一个固定的文件名。

使用对您的应用程序最简单的方法。

您的具体问题：1）是的，如果信号是字符串，您可以将整个文件名作为字符串传递或传递后缀。因为您在运行时生成字符串，所以需要 VHDL-93（或更高版本）语法

```
process (...) is
file my_file;
begin
   file_open(my_file, base_name & suffix & ".txt", read_mode);
   ...
   file_close(my_file);
end process; 
```

2) 最好的方法是在测试台中生成文件名并将其传入。但是实体的输出端口可以工作！自然不能合成这个实体...

3) 当然...

```
entity myentity is
  generic ( base_name : string := "testfile");
  port    (suffix : in string);
end myentity; 
```

将传入您在 (2) 中需要的字符串。

如果您必须使用 VHDL-87 语法，如在您的示例中，将整个名称作为通用传递：

```
file myfile : text open write_mode is base_name; 
```

# c++ - 通过 FindItem SOAP 调用获取 RecurringMaster ID

> ID：14274456
> 
> 赞同：0
> 
> 时间：2013-01-11T08:43:48.917
> 
> 标签：c++, soap, exchangewebservices

我正在打一个肥皂电话来交换所有定期会议（C++）。

因此，最初当我执行 FindItem 请求时，我会在日历视图（开始和结束时间）中的指定时间取回所有约会。

但是对于重复使用相同的调用，我可以获取我收到的项目 ID 的主重复 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:40:11.397

Here's what I use:

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:mes="http://schemas.microsoft.com/exchange/services/2006/messages">
   <soapenv:Header>
      <typ:RequestServerVersion Version="Exchange2007_SP1"/>
   </soapenv:Header>
   <soapenv:Body>
      <mes:GetItem>
         <mes:ItemShape>
            <typ:BaseShape>IdOnly</typ:BaseShape>
            <typ:AdditionalProperties>
              <!-- We only query the properties that we need -->
              <typ:FieldURI FieldURI="item:Subject" /> <!-- Leave for debugging purposes -->
              <typ:FieldURI FieldURI="item:Categories" />
              <typ:FieldURI FieldURI="item:DateTimeCreated" />
              <typ:FieldURI FieldURI="item:LastModifiedTime" />
              <typ:FieldURI FieldURI="item:Sensitivity" />
              <typ:FieldURI FieldURI="item:ItemClass" />
              <typ:FieldURI FieldURI="calendar:Start" />
              <typ:FieldURI FieldURI="calendar:End" />
              <typ:FieldURI FieldURI="calendar:CalendarItemType" />
              <typ:FieldURI FieldURI="calendar:IsRecurring" />
              <typ:FieldURI FieldURI="calendar:Recurrence" />
              <typ:FieldURI FieldURI="calendar:FirstOccurrence" />
              <typ:FieldURI FieldURI="calendar:LastOccurrence" />
              <typ:FieldURI FieldURI="calendar:ModifiedOccurrences" />
              <typ:FieldURI FieldURI="calendar:DeletedOccurrences" />
            </typ:AdditionalProperties>
         </mes:ItemShape>
         <mes:ItemIds>
            <typ:RecurringMasterItemId OccurrenceId="AAMk[snip]A=="/>
         </mes:ItemIds>
      </mes:GetItem>
   </soapenv:Body>
 </soapenv:Envelope> 
```

The OccurrenceID is the ItemID that you got for the occurrence through FindItem.

# iphone - 使用 CLLocationManager 的自定义位置管理器类

> ID：14274462
> 
> 赞同：3
> 
> 时间：2013-01-11T08:44:16.710
> 
> 标签：iphone, ios, design-patterns, cllocationmanager, cocoa-design-patterns

我对 iOS 开发（我的第一个应用程序）很陌生，我遇到了这个问题。

我有一个 iPhone 应用程序，它应该在用户按钮触摸时在多个 ViewControllers 中获取用户的当前位置。为了防止冗余代码（在不同的视图控制器中多次实现`locationManager:didFailWithError`,等），我决定创建一个名为的自定义类：`locationManager:didUpdateToLocation:fromLocation``LocationManager`

**位置管理器.h**

```
@interface LocationManager : NSObject <CLLocationManagerDelegate> {
@private
    CLLocationManager *CLLocationManagerInstance;
    id<LocationManagerAssigneeProtocol> assignee;
}

-(void) getUserLocationWithDelegate:(id) delegate; 
```

**位置管理器.m**

```
@implementation LocationManager

-(id)init {
    self = [super init];
    if(self) {
        CLLocationManagerInstance = [[CLLocationManager alloc] init];
        CLLocationManagerInstance.desiredAccuracy = kCLLocationAccuracyBest;
        CLLocationManagerInstance.delegate = self;
    }
    return self;
}

-(void) getUserLocationWithDelegate:(id) delegate {
    if([CLLocationManager locationServicesEnabled]) {
        assignee = delegate;
        [CLLocationManagerInstance startUpdatingLocation];
    }
}

#pragma CLLocationManagerDelegate

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
...
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    [CLLocationManagerInstance stopUpdatingLocation];
    [assignee didUpdateToLocation:newLocation];
} 
```

我有一个名为**LocationManagerAssigneeProtocol**的协议，我的 ViewController 实现了该协议

```
@protocol LocationManagerAssigneeProtocol <NSObject>

@required
-(void) didUpdateToLocation:(CLLocation *) location;

@end 
```

并在我需要的视图控制器中

```
- (IBAction)getMyLocation:(id)sender {

    [locationMgr getUserLocationWithDelegate:self];
} 
```

这段代码运行良好，但是，我觉得我在这里违反了一些设计模式，因为我允许`LocationManager`调用本身发起对位置管理器的调用的类的函数。另一方面，我不想为所有应该使用位置的视图控制器实现**CLLocationManagerDelegate 。**

这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:35:42.077

我同意@CarlVeazey 的观点。委托非常适合在任何时候存在的一对一关系，但是在您的情况下，您似乎可能需要多个视图控制器来在任何给定时间响应位置事件。因此，只需删除与您的委托及其相关协议相关的任何内容。

我可能会将 LocationManager 类设为单例并修改更新方法：

```
+(LocationManager *)sharedInstance
{
    static LocationManager *_sharedInstance = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        _sharedInstance = [[self alloc] init];
    });

    return _sharedInstance;
}

-(void)getUserLocation
{
    if ([CLLocationManager locationServicesEnabled])
        [CLLocationManager startUpdatingLocation];
}

-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
    [CLLocationManagerInstance stopUpdatingLocation];
    [[NSNotificationCenter defaultCenter] postNotificationWithName:@"LocationManagerDidUpdateLocation" object:newLocation];
} 
```

...然后任何需要使用此类的 viewController 都将具有以下内容：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserverForName:@"LocationManagerDidUpdateLocation" object:self queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
        CLLocation *location = note.object;
        ...
    }];
}

-(IBAction)getMyLocation:(id)sender {
    [[LocationManager sharedInstance] getUserLocation];
} 
```

希望这会有所帮助并且有意义。

# java - 计算泊松分布随机变量总和的概率

> ID：14274467
> 
> 赞同：2
> 
> 时间：2013-01-11T08:44:31.133
> 
> 标签：java, math, random

在 Java 中，我有一组用户，每个用户都有一个已知均值的泊松分布需求：

```
import org.apache.commons.math3.distribution.PoissonDistribution;

public class User {
  private int mean;
  private PoissonDistribution dist;
  public void setMean(int mean) {
      this.mean = mean;
      this.poissonDistribution = new PoissonDistribution(mean);
  }
}

...
User u1 = new User(); u1.setMean(20);
User u2 = new User(); u2.setMean(30);
User u3 = new User(); u3.setMean(40); 
```

现在我想计算所有`User`s 的累积需求低于某个值的概率：

```
double probabilityBelowX = calculateCumulatedProbability(50, u1, u2, u3); // <- what must this method look like? 
```

我被困在这个问题上，如何在 Java 中解决这个问题。我在数学包中遗漏了什么吗？我知道客户的需求是独立的，所以根据我对泊松分布的了解，我可以简单地将这些值相加。但是我只`cumulativeProbability(int x)`满足每一个用户的需求，而不是同时满足几个？

请指出我正确的方向，也许我使用的是完全错误的方法。另外，如果这个问题更适合stackexchange的另一个站点，我会移动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:45:06.907

正如您所指出[的，独立泊松分布的总和再次是泊松分布](http://www.proofwiki.org/wiki/Sum_of_independent_Poisson_random_variables_is_Poisson)，其参数等于原始分布的参数之和。

因此，`calculateCumulatedProbability`您需要创建一个新`PoissonDistribution`对象，其均值等于`u1`,`u2`和`u3`(`PoissonDistribution(20+30+40)`在这种情况下) 的均值之和。然后该`cumulativeProbability`对象上的方法将为您提供所需的概率。

您将需要一个`getMean`方法，`User`以便您可以检索各个用户的方法。另外，总是有 3 个用户吗？如果没有，您最好`calculateCumulatedProbability`只采用两个参数：用户列表和概率计算的值吗？

# jquery - 用于 Android 的 JQuery SOAP 请求

> ID：14274470
> 
> 赞同：0
> 
> 时间：2013-01-11T08:44:59.130
> 
> 标签：jquery, soap

我正在尝试做一个 jquery ajax SOAP 请求。但无法使其工作。我尝试连接的服务器仅接收 SOAP 格式的请求和响应。

```
var productServiceUrl = 'https://edelivery2.readiness.metavante.com/ConnectwareWS/ePaymentServices';
var soapMessage = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:req="http://epayments.metavante.com/types/request" xmlns:com="http://metavante.com/types/common" xmlns:req1="http://epayments.metavante.com/types/security/request" xmlns:com1="http://epayments.metavante.com/types/common" xmlns:req2="http://epayments.metavante.com/types/consumer/request" xmlns:req3="http://epayments.metavante.com/types/user/request" xmlns:req4="http://epayments.metavante.com/types/fundingAccount/request" xmlns:req5="http://epayments.metavante.com/types/consumerPayee/request">'+
                '<soapenv:Header/>'+
                '<soapenv:Body>'+
                   '<req:EbMtvnSvcReq>'+
                      '<req:MtvnSvcVer>v1.0.0</req:MtvnSvcVer>'+
                      '<req:MsgUUID>9919cd11-346a-0323-0358-19fd184dba81</req:MsgUUID>'+
                      '<req:PrcsParms>'+
                         '<req:SrcID>DCUMOBILE</req:SrcID>'+
                      '</req:PrcsParms>'+
                      '<req:Svc>'+
                         '<req:SvcParms>'+
                            '<req:ApplID>EB_UAT</req:ApplID>'+
                            '<req:SvcID>GetConsumerPayeeDetails</req:SvcID>'+
                            '<req:SvcVer>v1.3.0</req:SvcVer>'+
                            '<req:RoutingID>hfs-3427</req:RoutingID>'+
                         '</req:SvcParms>'+
                         '<req:MsgData>'+
                            '<req:GetConsumerPayeeDetails>'+
                               '<com:locale>en-US</com:locale>'+
                               '<req1:userId>4811</req1:userId>'+
                            '</req:GetConsumerPayeeDetails>'+
                         '</req:MsgData>'+
                      '</req:Svc>'+
                   '</req:EbMtvnSvcReq>'+
                '</soapenv:Body>'+
                '</soapenv:Envelope>'; 
```

做这个请求我正在做

```
$.ajax({
        url: productServiceUrl,
        type: "POST",
        dataType: "xml",
            processData: false,
        data: soapMessage,
        complete: endSaveProduct,
        contentType: "text/xml; charset=\"utf-8\"",
        success: processSuccess,
        error: processError

    });

function processSuccess(data, status, req) {
            if (status == "success")
                $("#response").text($(req.responseXML).find("HelloResult").text());
        }

        function processError(data, status, req) {
            console.log(data);
            console.log(status);
            console.log(req);
        } 
```

我在本地主机中运行 html 页面。并执行上述请求。但出现错误

```
![XMLHttpRequest cannot load https://edelivery2.readiness.metavante.com/ConnectwareWS/ePaymentServices. Origin http://localhost:8080 is not allowed by Access-Control-Allow-Origin.][1] 
```

# ios - 处理标准共享提供者的“发布”事件

> ID：14274471
> 
> 赞同：0
> 
> 时间：2013-01-11T08:45:00.770
> 
> 标签：ios, ios6, sharing, uiactivity

我通过 UIActivity 为我的应用添加了社交分享。

**我们如何为 FB 或 Twitter 等标准提供商处理“发布”事件？**

![在此处输入图像描述](../Images/bd29bd887cb2a81ec7899a69383173f1.png)

自定义提供者很容易，因为我们为共享手册创建 UI，但对于 FB，它是自动创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:21:20.510

一般来说，你不能。Facebook 和 Twitter 共享活动及其呈现的 UI 是 Apple 制作的 UIActivity 的私有子类。

如果你真的想要，你可以做一些挖掘来弄清楚 Facebook 或 Twitter 活动正在使用的 UIActivity 子类，然后使用[方法 swizzling](http://cocoadev.com/wiki/MethodSwizzling)来覆盖`- (void)performActivity;`并显示你自己的 UI。这是一种你不应该使用的糟糕方法，因为它可能会在未来的 iOS 版本中以一种令人讨厌的方式（应用程序崩溃）中断，并且几乎肯定会让你被踢出应用程序商店。但如果你好奇的话，这是一种有趣的学习方式。

# c# - 每次请求时，MEF 导出是否都被缓存或发现？

> ID：14274475
> 
> 赞同：6
> 
> 时间：2013-01-11T08:45:21.133
> 
> 标签：c#, .net, wpf, mef

如果我有一种类型的 MyClass，请注册

`[Export(typeof(Myclass))]` 属性，和

`[PartCreationPolicy(CreationPolicy.Shared)]`

或者

`[PartCreationPolicy(CreationPolicy.NonShared)]`

后来试图打电话

`compositionContainer.GetExportedValue<Myclass>()`多次。

问题：第一次调用时，我将通过 MEF 获取我的注册课程 - 查找所有已注册的程序集，然后尝试找到一个已注册的合同。问题是关于第二次等等 - MEF 会再次进行全局查找还是在内部某个地方缓存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T09:36:31.253

> MEF 将再次进行全局查找还是在内部缓存某处

是的，如果您对 MEF 性能有疑问，MEF 会执行一些缓存并广泛使用延迟初始化：

1) 缓存元数据（可组合部分、导出定义和导入定义）。例子：

```
public override IEnumerable<ExportDefinition> ExportDefinitions
{
    get
    {
        if (this._exports == null)
        {
            ExportDefinition[] exports = this._creationInfo.GetExports().ToArray<ExportDefinition>();
            lock (this._lock)
            {
                if (this._exports == null)
                {
                    this._exports = exports;
                }
            }
        }
        return this._exports;
    }
} 
```

2) 导出的*值*也被缓存：

```
public object Value
{
    get
    {
        if (this._exportedValue == Export._EmptyValue)
        {
            object exportedValueCore = this.GetExportedValueCore();
            Interlocked.CompareExchange(ref this._exportedValue, exportedValueCore, Export._EmptyValue);
        }
        return this._exportedValue;
    }
} 
```

当然，使用 时`CreationPolicy.NonShared`，导出的值会在您请求时一次又一次地创建。但即使在这种情况下，也不会执行“全局查找”，因为元数据无论如何都会被缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:48:09.527

每次使用时都会进行查找`[PartCreationPolicy(CreationPolicy.NonShared)]`。然后，您必须自己实现缓存。

默认实现是使用单例模式。这等于属性`[PartCreationPolicy(CreationPolicy.Shared)]`。**这是最佳做法**。

有关更多信息，请阅读[http://blogs.microsoft.co.il/blogs/bnaya/archive/2010/01/09/mef-for-beginner-part-creation-policy-part-6.aspx](http://blogs.microsoft.co.il/blogs/bnaya/archive/2010/01/09/mef-for-beginner-part-creation-policy-part-6.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T14:21:03.307

尽管值/元数据可能被部分缓存，但进行一些性能测试表明每次调用时都会执行一些查找`GetExportedValue`。因此，如果您有很多调用需要获取值，您应该自己进行缓存。

```
namespace MEFCachingTest
{
    using System;
    using System.ComponentModel.Composition;
    using System.ComponentModel.Composition.Hosting;
    using System.ComponentModel.Composition.Primitives;
    using System.Diagnostics;
    using System.Reflection;

    public static class Program
    {
        public static CompositionContainer Container { get; set; }
        public static ComposablePartCatalog Catalog { get; set; }

        public static ExportedClass NonCachedClass
        {
            get
            {
                return Container.GetExportedValue<ExportedClass>();
            }
        }

        private static ExportedClass cachedClass;
        public static ExportedClass CachedClass
        {
            get
            {
                return cachedClass ?? (cachedClass = Container.GetExportedValue<ExportedClass>());
            }
        }

        public static void Main()
        {
            Catalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());
            Container = new CompositionContainer(Catalog);

            const int Runs = 1000000;
            var stopwatch = new Stopwatch();

            // Non-Cached.
            stopwatch.Start();
            for (int i = 0; i < Runs; i++)
            {
                var ncc = NonCachedClass;
            }

            stopwatch.Stop();
            Console.WriteLine("Non-Cached: Time: {0}", stopwatch.Elapsed);

            // Cached.
            stopwatch.Restart();
            for (int i = 0; i < Runs; i++)
            {
                var cc = CachedClass;
            }

            stopwatch.Stop();
            Console.WriteLine("    Cached: Time: {0}", stopwatch.Elapsed);
        }
    }

    [Export]
    [PartCreationPolicy(CreationPolicy.Shared)]
    public class ExportedClass
    {
    }
} 
```

有关更多变体，请查看此要点：[https ://gist.github.com/DanielRose/d79f0da2ef61591176ce](https://gist.github.com/DanielRose/d79f0da2ef61591176ce)

在我的电脑上，Windows 7 x64，.NET 4.5.2：

```
Non-Cached: Time: 00:00:02.1217811
    Cached: Time: 00:00:00.0063479 
```

使用来自 NuGet 的 MEF 2：

```
Non-Cached: Time: 00:00:00.2037812
    Cached: Time: 00:00:00.0023358 
```

在我工作的实际应用程序中，这使应用程序慢了 6 倍。

# java - 静态最终长 serialVersionUID = 1L

> ID：14274480
> 
> 赞同：34
> 
> 时间：2013-01-11T08:45:37.160
> 
> 标签：java, jsp

> **可能重复：**
> [什么是 serialVersionUID，我为什么要使用它？](https://stackoverflow.com/questions/285793/what-is-a-serialversionuid-and-why-should-i-use-it)
> [servlet（私有静态最终长序列版本UID = 1L）中的含义是什么？](https://stackoverflow.com/questions/5335768/what-is-meant-by-that-in-a-servlet-private-static-final-long-serialversionuid)

我有一个关于我们教授给出的指导计划的简单问题。我已经多次看到serialVersionUID，但我不知道那是什么。

```
package module;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Scanner;

import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * @author JA
 */
public class Servlet_1 extends javax.servlet.http.HttpServlet implements javax.servlet.Servlet{

    static final long serialVersionUID = 1L;

    public void doGet (HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

        response.setContentType("txt/html");

        ServletOutputStream out = response.getOutputStream();

        out.println("<html>");
        out.println("<head><title>Hello Panget</title></head>");
        out.println("<body>");
        out.println("<h1>Hello Panget</h1>");
        out.println("</body></html>");
    }

    protected void doPost (HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
            // Write your program here, Panget.
    }
} 
```

在程序中有什么用`static final long serialVersionUID = 1L;`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-11T08:48:15.360

这`serialVersionUID`是一个`Serializable`类的通用版本标识符。反序列化使用这个数字来确保加载的类与序列化的对象完全对应。如果没有找到匹配项，则`InvalidClassException`抛出 an。

# video.js - Google Chrome 和 IE9 上的 VideoJS

> ID：14274481
> 
> 赞同：0
> 
> 时间：2013-01-11T08:45:42.577
> 
> 标签：video.js

我正在尝试在某些浏览器中运行我的代码。它在 Firefox 和 Opera 中运行良好，但在 IE9 和 Chrome 中它只能在第一次运行良好。之后，当我想再次运行此代码或其他代码时，它会显示下一个警告：

“资源解释为脚本，但使用 MIME 类型 text/html 传输：”http://www.superfish.com/ws/sf_main.jsp?dlsource=dropdowndeals&userId=RR8BRgZAQDCRcXxJEAgX1g&CTID=1049999“。”

但是，如果我删除浏览器的缓存并再次运行代码，代码运行没有问题，但当然只是第一次。此问题仅在 Google Chrome 和 IE9 上存在。

请问您有什么建议吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:54:58.523

我在用户机器上遇到了这个问题。看起来是 AdWare 试图解析脚本标签，但当类型不是 javascript 时不喜欢它。如果您对浏览器使用 AdBlock 或类似的东西，它应该可以工作，但这只是掩盖了问题。

最终的游戏可能是完全删除广告软件。

# php - 将整数转换为以文字/文本显示完整日期

> ID：14274482
> 
> 赞同：0
> 
> 时间：2013-01-11T08:45:46.970
> 
> 标签：php, date, strtotime

我试图获得一个完整的日期，给定一个字符串，这样 03-30-1986 将导致 1986 年 3 月 30 日。

我已经尝试了以下代码。

```
$date = 03.30.1986
$mydate = strtoTime($date);
$printdate = date('m-d-Y', $mydate); 
```

我使用 echo 查看 $printdate 的结果，但结果是它的值为空。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:51:10.410

```
$date = '03.30.1986';
$mydate = strtoTime($date);
echo $printdate = date('F d, Y', $mydate); 
```

这是工作只需添加报价...

```
Result :March 31, 1969 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:57:33.220

```
$date = '03.30.1986';

$temp = explode('.',$date);

$date = date("m.d.Y", mktime(0, 0, 0, $temp[0], $temp[1],$temp[2]));

echo $date; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:53:12.247

我的想法：

*   [`strtotime()`](http://nl1.php.net/manual/en/function.strtotime.php)需要一个字符串：（`$date = "03.30.1986"`注意`str`函数名的部分）
*   PHP 表达式用 分隔`;`：`$date = "03.30.1986";`
*   您需要将[日期格式](http://nl3.php.net/manual/en/function.date.php)重新格式化为：`"F d, Y"`

所以你的代码变成：

```
$date = "03.30.1986";
$mydate = strtoTime($date);
$printdate = date('F d, Y', $mydate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T08:55:08.237

您的第一行有几个错误（缺少引号、分号），strtotime 无法解析该日期格式，并且您为所需的输出使用了错误的格式。这应该有效：

```
$date = '03.30.1986';
$parts = explode('.', $date);
$mydate = mktime(0, 0, 0, $parts[0], $parts[1], $parts[2]);
$printdate = date('F d, Y', $mydate); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T09:09:48.487

php 假定它为欧洲日期格式。更多请看[这里](http://php.net/manual/en/function.strtotime.php)

```
Dates in the m/d/y or d-m-y formats are disambiguated by looking at the separator between the various components: if the separator is a slash (/), then the American m/d/y is assumed; whereas if the separator is a dash (-) or a dot (.), then the European d-m-y format is assumed. 
```

# javascript - 在放置事件（FF，Chrome）的输入字段中获取插入符号位置（字符索引）

> ID：14274484
> 
> 赞同：2
> 
> 时间：2013-01-11T08:45:59.607
> 
> 标签：javascript, jquery

我希望输入字段只接受数字，因此，在其他技术中，如果输入字段中的结果不是正确的数字，我还阻止了默认的放置事件。为此，在 IE 中，我将焦点放在要放置文本的字段上，搜索光标位置（字符索引），然后从旧值和拖动的文本中构造新值。

要获得插入符号位置：

**即：** `Math.abs(document.selection.createRange().moveStart("character", -1000000))`作品

**FF，铬：** `inputfield.selectionStart`不工作

任何想法如何在放置处理程序中获取字符索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:25:33.200

关于如何在浏览器中实现拖放支持有很多讨论，但事实是他们希望保护事物。我的意思是理论上你可以打电话

```
event.dataTransfer.setData("Text", newValue) 
```

在您的放置处理程序中，但由于他们说的“安全原因”，它无法工作。很遗憾，因为这对您来说是最好的解决方案，我的意思是在文本被删除之前更改文本。

相反，我认为你可以通过一个小“黑客”来解决你的问题

```
<input id="target" type="text" value="aaa bbb ccc" />
<input id="source" type="text" value="good bad" /> 
```

和js

```
<script type="text/javascript">
    $(function () {
        var drop = false;
        $("#target").bind("drop", function (e) {
            // you can store the dragged text if you like
            //var text = e.originalEvent.dataTransfer.getData("Text");
            drop = true;
        });
        $("#target").bind("focus", function (e) {
            if (drop) {
                // you can get caret here, etc
                $("#target").val($("#target").val().replace("bad", ""));
                drop = false;
            }
        });
    });
</script> 
```

在 Chrome 中进行了测试，但它也应该适用于所有浏览器。

我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T09:08:41.903

访问以下链接

[https://groups.google.com/forum/?fromgroups=#!topic/javascript-information-visualization-toolkit/GJVG2laTaUo](https://groups.google.com/forum/?fromgroups=#!topic/javascript-information-visualization-toolkit/GJVG2laTaUo)

我认为它对你有用。

# objective-c - iOS - 如何发出 SOAP 请求并接收关注响应

> ID：14274492
> 
> 赞同：5
> 
> 时间：2013-01-11T08:46:42.963
> 
> 标签：objective-c, soap, nsurlconnection

我知道网上有很多关于“如何在 iOS 中使用 SOAP”的东西，但我仍然未能遵循 SAOP 请求和响应。非常感谢帮助。我使用简单`NSURLConnection`的请求和响应 SOAP Request

```
POST ???.asmx HTTP/1.1
Host: ???
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://tempuri.org/GetMessages"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetMessages xmlns="http://tempuri.org/">
      <GroupName>string</GroupName>
      <Date>dateTime</Date>
    </GetMessages>
  </soap:Body>
</soap:Envelope> 
```

SOAP 响应

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetMessagesResponse xmlns="http://tempuri.org/">
      <GetMessagesResult>xml</GetMessagesResult>
    </GetMessagesResponse>
  </soap:Body>
</soap:Envelope> 
```

这是我为发送请求编写的代码..

```
NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                         "<soap:Body>\n"
                         "<GetMessages xmlns=\"http://tempuri.org/\">\n"
                         "<GroupName>%@</GroupName>\n"
                         "<Date>%@</Date>\n"
                         "</GetMessages>\n"
                         "</soap:Body>\n"
                         "</soap:Envelope>\n"
                         , txtfield1.text
                         , textfield2.text
                         ];
NSLog(@"soapMessage: \n%@",soapMessage);

NSURL *url = [NSURL URLWithString:@"???.asmx"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"http://tempuri.org/GetMessages" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

if(theConnection )
    webData = [[NSMutableData data] retain];
else
    NSLog(@"theConnection is NULL"); 
```

我收到此错误`connectionDidFinishLoading`

```
 <soap:Fault>
     <faultcode>soap:Server</faultcode>
     <faultstring>Server was unable to process request. ---&gt; SqlDateTime overflow. Must be between 1/1/1753 12:00:00 AM and 12/31/9999 11:59:59 PM.</faultstring>
     <detail />
  </soap:Fault> 
```

我参考了[此链接](https://stackoverflow.com/questions/5800396/making-a-soap-request-in-iphone) 并 [使用了此链接中的代码并根据我的方便进行了修改以使其正常工作](http://www.icodeblog.com/2008/11/03/iphone-programming-tutorial-intro-to-soap-web-services/)

**我的问题是如何发送请求并接收关注回复**

*非常感谢提前*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:52:59.190

问题似乎与肥皂消息的发送/接收完全无关，但与您发送的值`dateTime`无关——它没有正确的格式。

=> 服务器无法处理请求。---> SqlDateTime 溢出。必须介于 1753 年 1 月 1 日上午 12:00:00 和 9999 年 12 月 31 日晚上 11:59:59 之间。

**使用 NSDateFormatter 以请求的格式写入日期字符串**

# sharepoint - 更新多个 SharePoint 列表项

> ID：14274493
> 
> 赞同：2
> 
> 时间：2013-01-11T08:46:45.270
> 
> 标签：sharepoint, sharepoint-2010, infopath, sharepoint-designer, sharepoint-list

我有一个 InfoPath 表单，当它提交到 SharePoint 表单库时，它还会将单个项目添加到任务列表中。任务列表中的每个项目都包含一个人员字段，该字段可能包含多个名称。我有在自定义列表中创建单独项目的表单中的代码，每个项目对应于“人员”字段中的每个名称。

当我手动更新任务列表项中的状态字段时，我希望 SharePoint 工作流（我正在使用 Designer 2010）更新自定义列表中相应项目的所有状态字段。ShP 2010 工作流程中的“更新列表项”选项只会更新单个列表条目。有没有办法更新与正在修改状态的任务列表项对应的所有自定义列表项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:18:48.573

要同时更新多个列表项，请使用 SharePoint 批量更新。查看以下链接以获取更多信息：

*   [MSDN - Visual How To - 在 Windows SharePoint Services 3.0 中批量更新列表项](http://msdn.microsoft.com/en-us/library/cc404818%28v=office.12%29.aspx)
*   [http://apmblog.compuware.com/2009/01/20/sharepoint-using-batch-updates-to-speed-up-performance/](http://apmblog.compuware.com/2009/01/20/sharepoint-using-batch-updates-to-speed-up-performance/)

您还可以使用批处理操作进行插入和删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T22:22:40.693

我在 codeplex 上编写了两个工作流程 - 一个是[https://rwomi.codeplex.com](https://rwomi.codeplex.com)，一个是[https://umlisdw.codeplex.com/](https://umlisdw.codeplex.com/)

# postgresql - PostgreSQL：琐碎的 INSERT 第一次失败，之后成功

> ID：14274494
> 
> 赞同：3
> 
> 时间：2013-01-11T08:46:50.070
> 
> 标签：postgresql, insert

我对在下面显示的普通数据库中遇到的一个奇怪的 Postgres 问题感到困惑：如果我首先插入一个标签并明确指定其 ID，然后尝试在*不*传递 ID 的情况下插入另一个标签，那么第二次插入将失败。如果我第三次尝试（再次没有 ID），插入成功。

```
DROP DATABASE IF EXISTS mydb;
CREATE DATABASE mydb;

\c mydb

DROP SCHEMA public;
CREATE SCHEMA core;

CREATE TABLE core.tag
(
    id serial PRIMARY KEY,
    title text NOT NULL
);

-- this works: all columns specified explicitly
INSERT INTO core.tag(id, title) VALUES (1, 'known tag');

-- omitting the tag ID fails with
-- ERROR:  duplicate key value violates unique constraint "tag_pkey"
-- DETAIL:  Key (id)=(1) already exists.
INSERT INTO core.tag(title) VALUES ('unknown tag');

-- this works again ?!?
INSERT INTO core.tag(title) VALUES ('unknown tag'); 
```

该问题似乎只发生在新创建的数据库上，一旦发生，它似乎不会再次发生。我从来没有遇到过这样的事情——到目前为止，我刚刚插入了带有或不带有显式 ID 和 AFAICS 的数据，从来没有像这样失败过......

有谁知道这里发生了什么？！？

环境：Mac OSX 10.7.5 上的 PostgreSQL 9.1.3

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T08:52:56.087

当然，这失败了。

怎么了？

创建表时，还会创建一个序列，用于生成 ID 列的值。该序列从 1 开始，但仅在**未**为 ID 列指定值时使用。

现在当你跑

```
INSERT INTO core.tag(id, title) VALUES (1, 'known tag'); 
```

你绕过 Postgres 对 ID 值的自动分配，序列“保持”在一个。

现在当你跑

```
INSERT INTO core.tag(title) VALUES ('unknown tag'); 
```

Postgres 从序列中获取下一个值——即 1。但该值已经存在，因此插入失败。从序列中取值后，下一个值为2，因此后续不指定ID值的插入获取2并成功。

解决方案是永远不要在插入中包含 ID 列。或者 - 如果你这样做 - 从序列中请求 ID：

```
INSERT INTO core.tag(id, title) VALUES (nextval('tag_id_seq'), 'known tag'); 
```

创建序列列时，它会自动与名为 的序列关联`<table_name>_<column_name>_seq`。这就是我在上述声明中使用的名称。

有关串行“数据类型”如何工作的更多详细信息，请参见手册：[http ://www.postgresql.org/docs/current/static/datatype-numeric.html#DATATYPE-SERIAL](http://www.postgresql.org/docs/current/static/datatype-numeric.html#DATATYPE-SERIAL)

# java - 我想使用 java 向 mysql 发送一个带有特殊字符的字符串

> ID：14274496
> 
> 赞同：0
> 
> 时间：2013-01-11T08:47:00.523
> 
> 标签：java, mysql, query-string

我正在使用 Java 1.7 来制作如何连接到 MySQL DB 的应用程序。但是我在插入带有特殊字符（如“，\，\n”）的值时遇到了很多问题。我正在尝试手动更改这些值。我使用此方法进行更改。

```
public static String StringToSQL(String chain) {
    chain.replaceAll(Matcher.quoteReplacement("\\"),
            Matcher.quoteReplacement("\\\\"));
    chain.replaceAll(Matcher.quoteReplacement("\""),
            Matcher.quoteReplacement("\\\""));
    chain.replaceAll(Matcher.quoteReplacement("\n"),
            Matcher.quoteReplacement("\\n"));
    chain.replaceAll(Matcher.quoteReplacement("'"),
            Matcher.quoteReplacement("\\'"));
    return chain;
} 
```

我想尝试改变一条链

```
The cat says "meaw meaw" 
```

进入

```
the cat says \"meaw meaw\" 
```

MySql 语法没有问题

例如 sql 必须是

```
INSERT INTO AnimalSays (Phrase) VALUES ("\"Meaw Meaw\""); 
```

但我发送

```
INSERT INTO AnimalSays (Phrase) VALUES (""Meaw Meaw""); 
```

语法错误如何破坏应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:50:27.537

使用准备好的语句将解决您的问题。如果您设置字符串参数，它将转义所有特殊字符。

[http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

# python - 在python中将下三角矩阵的索引作为一维列表的快速方法

> ID：14274499
> 
> 赞同：4
> 
> 时间：2013-01-11T08:47:10.333
> 
> 标签：python, matrix, numpy, triangular

给定方阵的行数（或列数）n，我试图在一维列表中获取下三角矩阵的索引对。到目前为止，我想到了以下解决方案：

```
def getLowerTriangularIndices(n):
    inds=[];         
    for i in range(1,n):
        for j in range(i):
            inds.append((i,j))
    return inds; 
```

考虑到这两个 for 循环，最好有一种更有效的方法来计算这个可能使用 numpy. 有人有建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T08:49:07.530

Numpy 有一个方法...

```
import numpy as np

# create your matrix. If it's not yet a numpy array, make it one
ar = np.array(matrix)
indices = np.tril_indices_from(ar) 
```

这将返回两个数组的元组。如果您想将它们作为列表，您可以这样做

```
indices = [list(x) for x in np.tril_indices_from(ar)] 
```

您实际上不需要一个数组来获取索引，还有`np.tril_indices`一个将形状作为参数的数组。

因此，您的函数将显示为：

```
def getLowerTriangularIndices(n):
    return [list(x) for x in np.tril_indices(n)] 
```

或者如果你想要一个元组列表：

```
def getLowerTriangularIndices(n):
    return zip(*np.tril_indices(n)] 
```

# join - JPQL 连接表将列名加倍

> ID：14274509
> 
> 赞同：1
> 
> 时间：2013-01-11T08:47:42.333
> 
> 标签：join, double, eclipselink, jpql, criteria-api

我在连接中有多个表，每个表都有一个列 ID。所以在结果连接中有很多 ID 列。如何使用条件 API 访问特定 ID 列？

```
ParameterExpression<A> idParam = criteriaBuilder.parameter(A.class, PARAM_NAME);
Subquery<B> sq = query.subquery(B.class);
Root<B> root = sq.from(B.class);
Join<C, D> joinTogether = root.join("memberX").join("memberY");
sq.select(root);
sq.where(criteriaBuilder.and(criteriaBuilder.equal(joinTogether.get("id"), idParam), criteriaBuilder.equal(parentQuery.get("id"), root.get("id")))); 
```

问题是，在生成的 SQL 中包含

```
SELECT 1 FROM E t6, B t5, C t4, D t3 WHERE ((( = paramName) AND (t0.ID = t5.ID)) AND (((t6.memberZ = t5.ID) AND (t4.ID = t6.memberX)) AND (t3.ID = t4.memberY)))) 
```

表 E (t6) 是表 B 和 C 之间的附加连接表，t0 是对父查询的引用。相反， t3.id = :paramName EclipseLink 在第一个等号之前不创建任何内容（paramName 是常量 PARAM_NAME 的内容）。我的想法是，“id”列可以引用所有表，而 EclipseLink 无法决定我的意思是哪个表。

我怎么能改变呢？

谢谢安德烈

# c# - 如何使用 Ninject 实现松耦合

> ID：14274511
> 
> 赞同：1
> 
> 时间：2013-01-11T08:47:47.230
> 
> 标签：c#, ninject, loose-coupling

我是 Ninject 的新手。有人可以帮助我实现我想要的。我会给你我的例子。请帮助我如何使用 NInject 获得松散耦合。

可以说我有一个下面给出的界面。

```
public interface IVehicle
{
 PrintSpecification();
} 
```

现在我有三个实现上述接口的类。它们可以如图所示。

```
public class Car implements IVehicle
{      
 public void PrintSpecification()
 { Console.WriteLine("Specification for Car");}
}

public class Bus implements IVehicle
{
  public void PrintSpecification()
  { Console.WriteLine("Specification for Bus");}
}

public class Truck implements IVehicle
{
  public void PrintSpecification()
  { Console.WriteLine("Specification for Truck");}
} 
```

现在在我的主程序中，我会有这样的东西。在这里，我使用 new 运算符创建了`Car`,`Bus`和的三个具体实现`Truck`。我必须显示所有三辆车的规格。现在我想知道如何编写我的 Ninject 代码，以便不依赖具体类。

```
Public static void main()
{
  IVehicle v1=new Car();
  IVehicle v2=new Bus();
  IVehicle v3=new Truck();
  v1.PrintSpecification();
  v2.PrintSpecification();
  v3.PrintSpecification();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:50:08.677

您可以通过这种方式绑定所有规范：

```
public class AutoModule : NinjectModule
{
    public override void Load()
    {
        Bind<IVehicle>().To<Car>();
        Bind<IVehicle>().To<Bus>();
        Bind<IVehicle>().To<Truck>();
    }
} 
```

在您的应用中：

```
IKernel kernel = new StandardKernel(new AutoModule());

kernel.Bind<Inspector>().ToSelf();

class Inspector
{
      IVehicle[] vehicles;
      public Inspector(IVehicle[] vehicles)
      {
          this.vehicles=vehicles;
      }
      public void PrintSpecifications()
      {
           foreach(var v in vehicles )
           {
              v.PrintSpecification();
            }
      }
}

//automatic injection in constructor
kernel.Get<Inspector>().PrintSpecifications(); 
```

如果您想要某种方式有条件地绑定一个实现，您可以使用

*   命名绑定
*   条件绑定
*   上下文绑定

[NInject wiki 中有一个很好的文档](https://github.com/ninject/ninject/wiki/Contextual-Binding)。

如果您需要在模块中映射多个类型，请考虑使用一些命名约定并创建一些自动绑定策略。

您还应该在与 IoC 容器解耦方面做一些努力，看看[Composition Root Pattern](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:29:25.567

为实现创建具有命名绑定的模块`IVehicle`：

```
public class AutoModule : NinjectModule
{
    public override void Load()
    {
        Bind<IVehicle>().To<Car>().Named("Small");
        Bind<IVehicle>().To<Bus>().Named("Big");
        Bind<IVehicle>().To<Truck>().Named("Huge");
    }
} 
```

并按名称获取您的车辆：

```
IKernel kernel = new StandardKernel(new AutoModule());
IVehicle v1 = kernel.Get<IVehicle>("Small");
IVehicle v2 = kernel.Get<IVehicle>("Huge");
IVehicle v3 = kernel.Get<IVehicle>("Big");
v1.PrintSpecification();
v2.PrintSpecification();
v3.PrintSpecification(); 
```

# django - 如何在 Django 中创建添加到队列选项？

> ID：14274525
> 
> 赞同：-2
> 
> 时间：2013-01-11T08:48:26.480
> 
> 标签：django, django-templates, django-views

我是 Django 的新手。我有一组带有 URL 的视频。我想要一个添加到队列的选项，当我单击视频链接并将 URL 添加到队列时，它会在模板中显示队列中的所有视频（添加到队列中的视频）。请让我知道我应该如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:56:11.510

我会有一个`Playlist`模型。像这样的东西

```
class Playlist(models.Model):
    owner = models.ForeignKey(settings.AUTH_USER_MODEL, related_name='playlists')
    entries = models.ManyToManyField(Video) 
```

然后你可以像这样执行查询

```
new_playlist = Playlist(owner=user_instance)
new_playlist.save()
new_playlist.entries.add(video_instance)

all_of_users_playlist = user_instance.playlists.all()

playlist_videoes = playlist_instance.entries.all() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:00:37.893

根据您的建议，我提出了以下模型。我需要有两个这样的播放列表——一个用于电视节目，另一个用于电视剧集。因此，当用户将电视节目添加到播放列表时，它将显示在他的收藏夹中，类似的情节。
另外，我已经有要包含在播放列表中的 User、Shows、Episode 类所以我的模型是：

```
Class PlaylistShows(models.Model)
title= models.CharField(Max_length=200)
user = models.ForeignKey(Users)
shows_link=models.ManyToMany(Shows) 
```

PlayListEpisodes 的类似类。请让我知道这是否是一个好方法。

# html - 如何解析嵌入在R中的xml中的html？

> ID：14274535
> 
> 赞同：1
> 
> 时间：2013-01-11T08:49:08.670
> 
> 标签：html, r, parsing

例如，我有一个在 xml 中嵌入了 html 标签的输入文件

```
 <Root>
   <Section1>
   <p>some text</p>
   <br>
   <table>
       <th></th>
       <tr>
       <td></td> 
       </tr>    
   </table>
   </Section1>
  <Section2>
  <ol>
      <li>1</li>
      <li>2</li>
      <li>3</li>
  </ol>
  </Section2>
</Root> 
```

有没有办法解析嵌入在 R 中的 xml 文档中的 html？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:54:27.247

如果它是 XHTML，那么它应该是 XML，所以你使用标准的 XML 解析器。你可以在其他地方找到很多关于这些的信息。

请注意，您的`<Section1>`标签未正确关闭。如果这是您粘贴的文件，则说明它有问题。

# regex - as3 的正则表达式，需要从标签中删除任何新行或制表符

> ID：14274545
> 
> 赞同：-1
> 
> 时间：2013-01-11T08:49:50.147
> 
> 标签：regex, actionscript-3

我有一些将出现在我的 XML 中的 html 标签，我想替换以下标签格式之间的所有文本

```
<p>            MYTEXT</p> 
```

我希望将上述标签转换为

```
<p>MYTEXT</p> 
```

通过删除它们之间的任何新行或制表符或空格

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:31:26.813

最简单的方法：

```
var str:String = "<p>            MYTEXT</p>";
str = str.replace(/\s+/ig, ""); 
```

# php - 量子值的 SQL 采样

> ID：14274548
> 
> 赞同：1
> 
> 时间：2013-01-11T08:50:04.093
> 
> 标签：php, mysql, group-by

问题出现了量子值的样本。情况是：

有表支付（payments）：

```
id_user[int] 
sum [int] 
date[date] 
```

`sum (amount)`例如，可以是**0 到 100,000**之间的任何值。

我需要按**50 个硬币**的数量之和对数据输出进行分组。

```
For example:

0- 49  coins - paid 14 people.
50-99 coins - 59 users
100-150       - 147, etc. 
to the end (to 100,000) 
```

换句话说，我无法制定任务。

我需要建立**SQL 查询**（或者如果使用**php**）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:09:55.397

如果我正确理解了你的问题，你想要这样的东西：

```
SELECT (FLOOR(p.sum / 50) + 1) * 50 payment, COUNT(*) num_users 
FROM payments p
GROUP BY FLOOR(p.sum/50); 
```

# glassfish - Glassfish 启动失败

> ID：14274551
> 
> 赞同：0
> 
> 时间：2013-01-11T08:50:17.343
> 
> 标签：glassfish, application-server, apache-felix

我已经建立了一个 glassfish 服务器来学习它。根据快速入门指南进行设置和配置后，我能够毫无问题地运行服务器和 domain1。一段时间后，它开始记录以下行：

```
[#|2013-01-11T15:43:45.246+0800|WARNING|glassfish3.1.2|java.util.prefs|_ThreadID=105;_ThreadName=Thread-2;|Could not lock User prefs.  Unix error code 5.|#]

[#|2013-01-11T15:43:45.246+0800|WARNING|glassfish3.1.2|java.util.prefs|_ThreadID=105;_ThreadName=Thread-2;|Couldn't flush user prefs: java.util.prefs.BackingStoreException: Couldn't get file lock.|#] 
```

我对此做了一些谷歌搜索，找到[了这个链接](http://www.java.net/forum/topic/glassfish/glassfish/cant-stop-glassfish-linux-user-cli306-warning)并应用了那里推荐的选项。重新启动 glassfish 后，虽然服务器日志显示它已启动，但我在命令行中看到了这一点：

```
./asadmin start-domain domain1
Waiting for domain1 to start .............Error starting domain domain1.
The server exited prematurely with exit code 1.
Before it died, it produced the following output:

Launching GlassFish on Felix platform
ERROR: Error creating bundle cache. (java.lang.Exception: Unable to lock bundle cache: java.io.IOException: Input/output error)
java.lang.Exception: Unable to lock bundle cache: java.io.IOException: Input/output error
at org.apache.felix.framework.cache.BundleCache.<init>(BundleCache.java:176)
at org.apache.felix.framework.Felix.init(Felix.java:629)
at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiFrameworkLauncher$1.run(OSGiFrameworkLauncher.java:88)
Exception in thread "Thread-1" java.lang.RuntimeException: org.osgi.framework.BundleException: Error creating bundle cache.
at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiFrameworkLauncher$1.run(OSGiFrameworkLauncher.java:90)
Caused by: org.osgi.framework.BundleException: Error creating bundle cache.
at org.apache.felix.framework.Felix.init(Felix.java:634)
at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiFrameworkLauncher$1.run(OSGiFrameworkLauncher.java:88)
Caused by: java.lang.Exception: Unable to lock bundle cache: java.io.IOException: Input/output error
at org.apache.felix.framework.cache.BundleCache.<init>(BundleCache.java:176)
at org.apache.felix.framework.Felix.init(Felix.java:629)
... 1 more
Exception in thread "main" java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.enterprise.glassfish.bootstrap.GlassFishMain.main(GlassFishMain.java:97)
at com.sun.enterprise.glassfish.bootstrap.ASMain.main(ASMain.java:55)
Caused by: org.glassfish.embeddable.GlassFishException: java.lang.NullPointerException
at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuilder.build(OSGiGlassFishRuntimeBuilder.java:164)
at org.glassfish.embeddable.GlassFishRuntime._bootstrap(GlassFishRuntime.java:157)
at org.glassfish.embeddable.GlassFishRuntime.bootstrap(GlassFishRuntime.java:110)
at com.sun.enterprise.glassfish.bootstrap.GlassFishMain$Launcher.launch(GlassFishMain.java:112)
... 6 more
Caused by: java.lang.NullPointerException
at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuilder.newFramework(OSGiGlassFishRuntimeBuilder.java:230)
at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuilder.build(OSGiGlassFishRuntimeBuilder.java:133)
... 9 more
 Error stopping framework: java.lang.NullPointerException
 java.lang.NullPointerException
at com.sun.enterprise.glassfish.bootstrap.GlassFishMain$Launcher$1.run(GlassFishMain.java:203)

Command start-domain failed. 
```

我试图找到解决方案，删除域目录中的缓存文件夹或更改访问权限，但问题不断出现，我无法启动我的域。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:08:12.060

安装 Glassfish 后，我遇到了与该堆栈中相同的 IO 错误，并发现以下内容：

Glassfish 3.1.2 使用 felix 库来处理 OSGI 的东西，而这个库想要使用核心 Java 方法 java.nio.channels.FileChannel.tryLock() 来锁定文件。当要锁定的文件位于某些类型的 NAS 上的文件系统上时，这似乎不起作用，并在长时间超时后导致 IO 错误。确保在本地磁盘上安装关键部分或全部 Glassfish，此错误将消失。

运行以下 Java 类可以很容易地重现该错误：

```
import java.io.File;
import java.io.FileOutputStream;
import java.nio.channels.FileChannel;

public class TryLock {

/**
 * @param args
 */
public static void main(String[] args) {
    // name of a file is the only parameter
    File lockFile = new File(args[0]);
    FileChannel fc = null;
    FileOutputStream fos = null;
    try {
        fos = new FileOutputStream(lockFile);
        fc = fos.getChannel();
        // This is the code that fails on some NAS (low-level operation?):
        fc.tryLock();
    } catch( Throwable th) {
        th.printStackTrace();
    }
    System.out.println("Success");
}
} 
```

# windows - 如何在 VBScript 中获取/设置每个应用程序窗口的位置和大小？

> ID：14274552
> 
> 赞同：0
> 
> 时间：2013-01-11T08:50:22.720
> 
> 标签：windows, user-interface, vbscript, window

我想编写一个脚本来组织我当前在屏幕上打开的窗口。

例如：将所有浏览器移动到监视器 1，将其他所有浏览器移动到监视器 2 例如：使监视器 1 上的 4 个最大化窗口分别在屏幕上占据相同大小的象限等。

我认为 VBScript 会对此有好处吗？在 Win7 环境中我会为此使用什么对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:29:58.830

这在开箱即用的 VBScript 中是不可能的，因为它不提供对用于窗口管理的 Windows API 的访问。

[AutoIt](http://www.autoitscript.com/site/autoit/)似乎是一个更好的工具。查看以下函数和宏：

*   [`WinMove`](http://www.autoitscript.com/autoit3/docs/functions/WinMove.htm)- 移动窗口
*   [`_WinAPI_GetSystemMetrics`](http://www.autoitscript.com/autoit3/docs/libfunctions/_WinAPI_GetSystemMetrics.htm)`(80)`- 获取显示器数量
*   `@DesktopWidth`和`@DesktopHeight`- 主监视器像素大小
*   `_WinAPI_GetSystemMetrics(78)`和`_WinAPI_GetSystemMetrics(79)`- 完整的桌面宽度和高度

如果监视器尺寸不同，您可以使用 WMI 类[`Win32_DesktopMonitor`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394122.aspx)及其`ScreenWidth`和`ScreenHeigth`属性来获取单独的监视器尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:23:39.507

我不确定我是否会说 VBS 对此有好处，我认为我更喜欢 C++，因为它会涉及我认为在 C++ 中更容易的 Windows API 调用，但这取决于你的技能和 VBS可能没问题。

我要查看的 API 调用将是[EnumWindows](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633497%28v=vs.85%29.aspx)或[FindWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)来查找要移动的窗口，然后是[SetWindowPos](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633545%28v=vs.85%29.aspx)来移动它们。

我认为，如果您想将它们移动到辅助监视器，您应该能够通过将其移动到主监视器之外的位置来做到这一点（例如，如果辅助监视器在左侧扩展，则可能是负位置）。为此，您需要能够找出当前分辨率以及我认为您可以从 WMI 类[Win32_VideoController](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa394512%28v=vs.85%29.aspx)获得的分辨率。

# android - Mac 无法识别 Android 2.1 手机

> ID：14274560
> 
> 赞同：0
> 
> 时间：2013-01-11T08:50:43.167
> 
> 标签：android

我正在尝试设置我的旧 Android 手机来测试我的应用程序。手机仍处于 2.1（Samsung Captivate）且处于非活动状态。我无法让我的 Macbook Pro 在 OS X (10.8.2) 上识别手机。我在设置中检查了 USB 调试框，但是当我插入 USB 电缆时，没有任何反应。如果我转到 adb 目录并键入 ./adb devices，我会显示没有附加设备。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:53:57.250

首先，如果您尚未安装手机，请为您的手机安装设备驱动程序。如果您已经这样做但仍然无法识别，请尝试重新启动设备和 Mac。也许 b 它会起作用。

# python - Tastypie 嵌套资源 URI

> ID：14274562
> 
> 赞同：0
> 
> 时间：2013-01-11T08:50:45.133
> 
> 标签：python, django, api, tastypie

我正在创建一个我想要的 API`POST`以及`GET`来自父对象的子对象。例如：

*   `GET challenge/1/solutions` =`[Listof Solutions] filtered with challenge_id=1`
*   `GET challenge/1/solution/1`=`Solution with id=1 filtered with challenge_id=1`
*   `POST challenge/1/solution` =`Add to Solution with challenge_id=1`

`solution`URL 仅返回用户提交的解决方案。上面的 URL 用于访问每个挑战的解决方案列表。

我需要将此解决方案应用于多个子对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:00:40.740

我用的是[美味的蛋糕](https://github.com/dasickis/delicious-cake)

# php - 它没有在数据库中插入正确的值？

> ID：14274563
> 
> 赞同：3
> 
> 时间：2013-01-11T08:50:55.753
> 
> 标签：php, jquery, ajax, mysqli

我想在数据库中插入一个 sessionid 和一组学生。

sessionid 可以在下面的代码行中找到：

```
<td><input type='hidden' id='currentId' name='Idcurrent' readonly='readonly' value='4' /> </td> 
```

一组学生显示在选择框中，如下所示：

```
<select id="studentadd" name="addtextarea">
<option value='1'>u08743 - Joe Cann</option>
<option value='4'>u03043 - Jill Sanderson</option>
<option value='7'>u08343 - Craig Moon</option>
</select> 
```

现在我使用 ajax 来获取 sessionId 值和学生的值，并将它们发布到一个单独的 php 页面中，使用下面的代码进行插入：

```
 function submitform() {    

    $.ajax({
        type: "POST",
        url: "updatestudentsession.php",
data: { 
    Idcurrent:  $('#currentid').val(),
    addtextarea:$('#studentadd').val()
        },
        dataType:'json',  //get response as json
        success: function(result){
                    if(result.errorflag){

      $("#targetdiv").html('success');  

    }else{
       //you got success message

            $("#targetdiv").html('error');

    $('#targetdiv').show();
        }
    }
  });        
} 
```

下面是单独的 php 文件`updatestudentsession.php`，假设在其中进行插入：

```
$studentid = array();
$studentid[] = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : '';  
$sessionid = (isset($_POST['Idcurrent'])) ? $_POST['Idcurrent'] : '';   

$insertsql = "
INSERT INTO Student_Session
(SessionId, StudentId)
VALUES
(?, ?)
";
if (!$insert = $mysqli->prepare($insertsql)) {
// Handle errors with prepare operation here
}                                       

foreach($studentid as $id)
{    

$insert->bind_param("ii", $sessionid, $id);

$insert->execute();

if ($insert->errno) {
// Handle query error here
}

}

$insert->close(); 
```

现在我遇到的问题是根本没有插入正确的数据。它`0`在`SessionId`和`StudentId`字段中插入值。下面是插入后表格的样子：

```
SessionId   StudentId
4           1
4           4
4           7 
```

相反，它如下所示：

```
SessionId   StudentId
0           0 
```

我的问题是是什么导致它无法检索到正确的数据并将其插入到数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:06:48.023

假设部分问题在这里：

```
Idcurrent:  $('#currentid').val(), 
```

在您的 HTML 代码中，ID 是`currentId`您尝试获取具有 id 的元素时`currentid`。id 选择器区分大小写。因此，您只需将任何内容传递给您的 PHP，因为 jquery 找不到元素。

不知道有什么问题`$studentid`，但我认为没有理由在那里使用数组，因为您总是只传递一个值，因此请尝试更改您的 php 代码，如下所示：

```
$studentid = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : array();  
$sessionid = (isset($_POST['Idcurrent'])) ? $_POST['Idcurrent'] : '';   
//var_dump($studentid);
//var_dump($sessionid);
//var_dump($_POST); - this is additionally to see whole $_POST variable.
$insertsql = "
INSERT INTO Student_Session
(SessionId, StudentId)
VALUES
(?, ?)
";
if (!$insert = $mysqli->prepare($insertsql)) {
// Handle errors with prepare operation here
}                                       

foreach($studentid as $id)
{    
   $insert->bind_param("ii", $sessionid, $id);
   $insert->execute();
   if ($insert->errno) {
      // Handle query error here
   }
} 

$insert->close(); 
```

另外，请参阅开头注释掉的[var_dump行。](http://php.net/manual/en/function.var-dump.php)他们将打印变量的值，这样您就可以看到那里实际设置的内容。（因为它是 ajax，您需要打开开发人员工具并查看网络选项卡上返回的结果）

**升级版：**

根据最新评论，似乎`$_POST['addtextarea']`是一个数组。因为那个代码被修改来处理它。请注意如何获取该值：

```
$studentid = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : array(); 
```

旧代码，即：

```
$studentid = array();
$studentid[] = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : ''; 
```

产生两级数组。所以 $studentid 是一个数组，它包含一个元素，它也是一个数组。这就是为什么 old for each loop 不起作用的原因。$id 是一个数组。它被转换为0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:55:34.893

我认为数据中有一个问题：

```
data: { 
    Idcurrent:  $('#currentid').val(),
    addtextarea:$('#studentadd').val()
        }, 
```

尝试 ：

```
data: { 
    "Idcurrent":  $('#currentid').val(),
    "addtextarea":$('#studentadd').val()
        }, 
```

请不要使用双引号“Idcurrent”

# oracle - 我可以在不使用触发器的情况下连续更新修改日期吗？

> ID：14274564
> 
> 赞同：0
> 
> 时间：2013-01-11T08:50:58.180
> 
> 标签：oracle, oracle10g

我的表中有一个修改日期列，对于每一行，如果该行被更新，我想更改修改日期。我可以在不使用“ON UPDATE”触发器的情况下执行此任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:49:56.940

是：修改系统中运行 UPDATE 的所有代码，以便它也更新修改日期。

# python - Paramiko 协议错误：预期数据包 SSH_MSG_USERAUTH_REQUEST，得到 SSH_MSG_SERVICE_REQUEST

> ID：14274566
> 
> 赞同：3
> 
> 时间：2013-01-11T08:51:08.273
> 
> 标签：python, ssh, paramiko

当我使用 ssh 命令手动连接到主机时，一切正常：

```
$ ssh -v admin@mycli.abc.com -p 10000
OpenSSH_6.1p1, OpenSSL 1.0.1c 10 May 2012
debug1: Reading configuration data /home/todd/.ssh/config
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Connecting to mycli.abc.com [mycli.abc.com] port 10000.
debug1: Connection established.
debug1: identity file /home/todd/.ssh/id_rsa type 1
debug1: identity file /home/todd/.ssh/id_rsa-cert type -1
debug1: identity file /home/todd/.ssh/id_dsa type -1
debug1: identity file /home/todd/.ssh/id_dsa-cert type -1
debug1: identity file /home/todd/.ssh/id_ecdsa type -1
debug1: identity file /home/todd/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version SSHD-CORE-0.6.0
debug1: no match: SSHD-CORE-0.6.0
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_6.1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-cbc hmac-md5 none
debug1: kex: client->server aes128-cbc hmac-md5 none
debug1: sending SSH2_MSG_KEXDH_INIT
debug1: expecting SSH2_MSG_KEXDH_REPLY
debug1: Server host key: DSA 6f:2c:48:80:86:ff:69:99:28:c2:21:5b:02:d4:7f:63
debug1: checking without port identifier
The authenticity of host '[mycli.abc.com]:10000 ([mycli.abc.com]:10000)' can't be established.
DSA key fingerprint is 6f:2c:48:80:86:ff:69:99:28:c2:21:5b:02:d4:7f:63.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '[mycli.abc.com]:10000' (DSA) to the list of known hosts.
debug1: ssh_dss_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: password,publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/todd/.ssh/id_rsa
debug1: Authentications that can continue: password,publickey
debug1: Trying private key: /home/todd/.ssh/id_dsa
debug1: Trying private key: /home/todd/.ssh/id_ecdsa
debug1: Next authentication method: password
admin@mycli.abc.com's password:
debug1: Authentication succeeded (password).
Authenticated to mycli.abc.com ([mycli.abc.com]:10000).
debug1: channel 0: new [client-session]
debug1: Entering interactive session.
debug1: No xauth program.
Warning: No xauth data; using fake authentication data for X11 forwarding.
debug1: Requesting X11 forwarding with authentication spoofing.
X11 forwarding request failed on channel 0
Cli> 
```

但是使用 paramiko 它总是失败：

```
DEBUG:paramiko.transport:starting thread (client mode): 0x22783e10L
INFO:paramiko.transport:Connected (version 2.0, client SSHD-CORE-0.6.0)
DEBUG:paramiko.transport:kex algos:['diffie-hellman-group1-sha1'] server key:['ssh-dss'] client encrypt:['aes128-cbc', '3des-cbc', 'blowfish-cbc'] server encrypt:['aes128-cbc', '3des-cbc', 'blowfish-cbc'] client mac:['hmac-md5', 'hmac-sha1', 'hmac-md5-96', 'hmac-sha1-96'] server mac:['hmac-md5', 'hmac-sha1', 'hmac-md5-96', 'hmac-sha1-96'] client compress:['none'] server compress:['none'] client lang:[''] server lang:[''] kex follows?False
DEBUG:paramiko.transport:Ciphers agreed: local=aes128-cbc, remote=aes128-cbc
DEBUG:paramiko.transport:using kex diffie-hellman-group1-sha1; server key type ssh-dss; cipher: local aes128-cbc, remote aes128-cbc; mac: local hmac-sha1, remote hmac-sha1; compression: local none, remote none
DEBUG:paramiko.transport:Switch to new keys ...
DEBUG:paramiko.transport:Adding ssh-dss host key for [mycli.abc.com]:10000: 6f2c488086ff699928c2215b02d47f63
DEBUG:paramiko.transport:Trying discovered key d7ab335994d0e5c90f8886b515faff55 in /home/todd/.ssh/id_rsa
DEBUG:paramiko.transport:userauth is OK
INFO:paramiko.transport:Authentication (publickey) failed.
INFO:paramiko.transport:Disconnect (code 2): Protocol error: expected packet SSH_MSG_USERAUTH_REQUEST, got SSH_MSG_SERVICE_REQUEST
Traceback (most recent call last):
  File "./mycli_test.py", line 13, in <module>
    oc = MyCli(hostname=hostname, username=username, password=password)
  File "/home/todd/devel/mylib/mycli.py", line 16, in __init__
    key_filename, timeout, allow_agent, look_for_keys, compress)
  File "/usr/lib/python2.7/site-packages/paramiko/client.py", line 338, in connect
    self._auth(username, password, pkey, key_filenames, allow_agent, look_for_keys)
  File "/usr/lib/python2.7/site-packages/paramiko/client.py", line 519, in _auth
    raise saved_exception
paramiko.AuthenticationException: Authentication failed. 
```

paramiko 脚本：

```
#!/usr/bin/env python2

import paramiko

paramiko.common.logging.basicConfig(level=paramiko.common.DEBUG)

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.MissingHostKeyPolicy())
ssh.connect(hostname='mycli.abc.com', port=10000, username='admin', password='abc123')
i, o, e = ssh.exec_command('uname -a')
print o.readlines()
ssh.close() 
```

帕拉米科版本：1.9.0

为什么它会抛出“协议错误：预期的数据包 SSH_MSG_USERAUTH_REQUEST，得到 SSH_MSG_SERVICE_REQUEST”错误？如何避免？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T23:38:07.110

**TL;DR：** 添加这个：`allow_agent=False`和/或`look_for_keys=False`你的`connect()`电话。

对此进行了一些研究，我得出的结论是，Paramiko SSH 客户端的公钥身份验证并不总是适用于所有 SSH 服务器。我试图连接到 Cisco ASA 设备。错误日志的相关部分是：

```
DEBUG:paramiko.transport:Switch to new keys ...
DEBUG:paramiko.transport:Trying SSH agent key 5d081d52f889f2c224606d6b2065606e
DEBUG:paramiko.transport:userauth is OK
DEBUG:paramiko.transport:Authentication type (publickey) not permitted.
DEBUG:paramiko.transport:Allowed methods: ['password']
INFO:paramiko.transport:Disconnect (code 2): Protocol error: expected packet type 50, got 5 
```

注意到“尝试 SSH 代理密钥...”部分了吗？我不想那样，我想强制密码验证。OpenSSH 交互式客户端要么优雅地从公钥退回到密码，paramiko 不会，强制它使用用户/通过身份验证为我解决了这个问题，它可能对你有用。

我不知道这是 paramiko 错误还是 SSH 服务器上的错误。在与 OpenSSH 服务器对话时，Paramiko 确实从公钥退回到密码或键盘交互。

# iphone - iPhone sdk 如何在两次不同的按钮点击时添加/删除 UIButton

> ID：14274571
> 
> 赞同：0
> 
> 时间：2013-01-11T08:51:18.877
> 
> 标签：iphone, uibutton, hidden

我有两个单独的按钮，用于分别在 UITableView 中按升序和降序对数组进行排序。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     checkButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        checkButton.frame = CGRectMake(540, 30, 42, 42);
        [checkButton setBackgroundImage:[[UIImage imageNamed:@"Down Arrow.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:0.0] forState:UIControlStateNormal];
        [checkButton addTarget:self action:@selector(descender:) forControlEvents:UIControlEventTouchUpInside];
        [checkButton setTag:200];
        [cell.contentView addSubview:checkButton];

        checkButton1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        checkButton1.frame = CGRectMake(600, 30, 42, 42);
        [checkButton1 setBackgroundImage:[[UIImage imageNamed:@"Up Arrow.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:0.0] forState:UIControlStateNormal];
        [checkButton1 addTarget:self action:@selector(ascender:) forControlEvents:UIControlEventTouchUpInside];
        [checkButton1 setTag:100];
        [cell.contentView addSubview:checkButton1];

checkButton = (UIButton *)[cell viewWithTag:200];
        if (indexPath.row == 0 && appDelegate.a == 300)
        {
            checkButton.hidden = NO;
            checkButton1.hidden = YES;
        }

        checkButton1 = (UIButton *)[cell viewWithTag:100];
        if ((lastSectionIndex == indexPath.section && lastRowIndex == indexPath.row ))
        {
            checkButton.hidden = YES;
            checkButton1.hidden = NO;
        }
} 
```

在 cellforrowAtIndexPath 中，我添加了两个用于排序的按钮。现在，当我单击排序按钮时，该排序按钮应该消失并且必须出现完成按钮。我给它如下，

```
-(void)sortItem:(id)sender
{
         NSLog(@"sort clicked");

         if(appDelegate.a = 300)
         {
               checkButton.hidden = NO;
               checkButton1.hidden = YES;
         }

          self.navigationItem.title = @"Sort Book Shelf";

          sortButton.hidden = YES;
          editButton.hidden = YES;
          doneButton.hidden = NO;

   //    if (appDelegate.b == 400) 
  //    {
 //        checkButton.hidden = NO;
 //        checkButton1.hidden = NO;
 //    }

      [editTable reloadData];
} 
```

接下来，当我单击 SORT 按钮这两个检查按钮时，检查按钮 1 应该出现，当我单击 DONE 按钮时，这两个按钮应该消失。

```
-(void)doneClick:(id)sender
{
       NSLog(@"Done Clicked");

       if (appDelegate.b == 400) 
       {
            checkButton.hidden = YES;
            checkButton1.hidden = YES;
       }

       self.navigationItem.title = @"Edit Book Shelf";

       sortButton.hidden = NO;
       editButton.hidden = NO;
       doneButton.hidden = YES;
  } 
```

现在，排序功能运行良好。但是当我点击完成按钮时，我的按钮并没有从单元格路径中消失，因为我给出了将按钮放在第一个和最后一个索引上的条件。如何仅在单击完成按钮时隐藏我的两个按钮？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:08:40.187

在询问 SOF 之前先尝试在 google 上搜索，因为它可能是重复的问题

。H

```
NSIndexPath *selectedIndexPath; 
```

.m

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //  . . Some Code . . .
    if ( selectedIndexPath.row = indexPath.row &&  selectedIndexPath.section = indexPath.section ) {
        button1.hidden = NO;
        button2.hidden = NO;
    } else {
        button1.hidden = YES;
        button2.hidden = YES;
    }
    //  . . Some Code . . .
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    selectedIndexPath = indexPath;
    [tableView relaodData];
} 
```

[如何在uitableviewCell上添加按钮并在下一个单元格选择中删除上一个](https://stackoverflow.com/questions/14181600/how-to-add-button-on-uitableviewcell-and-delete-previous-on-next-cell-selection/14252272#14252272)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:02:22.663

尝试在 doneClick 中调用重新加载数据。

```
[editTable reloadData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:09:51.260

给你的`button`方法块，里面`tableView begin and end updates`。喜欢

```
-(void)doneClick:(id)sender
{
   NSLog(@"Done Clicked");
   [tableView beginUpdates];
   if (appDelegate.b == 400) 
   {
        checkButton.hidden = YES;
        checkButton1.hidden = YES;
   }
   [tableView endUpdates];
   self.navigationItem.title = @"Edit Book Shelf";

   sortButton.hidden = NO;
   editButton.hidden = NO;
   doneButton.hidden = YES;
} 
```

# java - Maven 无法创建 SSH 连接

> ID：14274588
> 
> 赞同：1
> 
> 时间：2013-01-11T08:52:41.010
> 
> 标签：java, maven, ssh, cygwin

我正在使用 maven 2.2.1，并尝试通过设置与存储库进行 SSH 连接：

`<server>`
`<id>my-repository-ssh</id>`
`<username>username</username>`
`<passphrase>mypassphrase</passphrase>`
`<privateKey>c:/Users/f.lastname/.ssh/id_rsa</privateKey>`
`</server>`

我在 Cygwin 环境中工作。

当我通过 maven 构建项目`mvn clean install`时无法连接到存储库：

`[INFO] artifact com.someworld:common.configuration: checking for updates from my-repository-ssh`
`Password for username@10.0.1.25:`
`[WARNING] repository metadata for: 'artifact com.someworld:common.configuration' could not be retrieved from repository: my-repository-ssh due to an error: Authentication failed: Cannot connect. Reason: Auth fail`
`[INFO] Repository 'my-repository-ssh' will be blacklisted`

但是当我尝试通过 sftp 命令创建连接时，效果很好：

`$ sftp username@10.0.1.25`
`Enter passphrase for key '/home/F.Lastname/.ssh/id_rsa':`
`Connected to 10.0.1.25.`
`sftp>`

那么这个问题的原因可能是什么？

# function - 在 postgresql 中提取和平均时间数据库中的瞬时值

> ID：14274595
> 
> 赞同：0
> 
> 时间：2013-01-11T08:52:57.103
> 
> 标签：function, postgresql, average, temporal-database

我有一个时态数据库，我想对以下方面的数据进行平均：`

```
HH  = (HH-1):41 - HH:40 
```

例如：

13 = 观察期 12:41 至 13:40。预期成绩：

代码应从 (HH-1):41 中减去 HH:40 的瞬时值。

样本数据：

```
 temperature      date-time
1     -1.64 2007-09-29 00:01:09
2     -1.76 2007-09-29 00:03:09
3     -1.83 2007-09-29 00:05:09
4     -1.86 2007-09-29 00:07:09
5     -1.94 2007-09-29 00:09:09
6     -1.87 2007-09-29 00:11:09
7     -1.87 2007-09-29 00:13:09
8     -1.80 2007-09-29 00:15:09
9     -1.64 2007-09-29 00:17:09
10    -1.60 2007-09-29 00:19:09
11    -1.90 2007-09-29 00:21:09
12    -2.08 2007-09-29 00:23:09
13    -1.94 2007-09-29 00:25:09
14    -2.12 2007-09-29 00:27:09
15    -1.87 2007-09-29 00:29:09
16    -2.18 2007-09-29 00:31:09
17    -1.98 2007-09-29 00:33:09
18    -1.73 2007-09-29 00:35:09
19    -1.84 2007-09-29 00:37:09
20    -2.04 2007-09-29 00:39:09
21    -1.86 2007-09-29 00:41:09
22    -1.94 2007-09-29 00:43:09
23    -1.77 2007-09-29 00:45:09
24    -1.78 2007-09-29 00:47:09
25    -1.50 2007-09-29 00:49:09
26    -1.46 2007-09-29 00:51:09
27    -1.72 2007-09-29 00:53:09
28    -1.67 2007-09-29 00:55:09
29    -1.56 2007-09-29 00:57:09
30    -1.69 2007-09-29 00:59:09
31    -1.97 2007-09-29 01:01:09
32    -1.79 2007-09-29 01:03:09
33    -1.79 2007-09-29 01:05:09
34    -1.84 2007-09-29 01:07:09
35    -1.91 2007-09-29 01:09:09
36    -1.87 2007-09-29 01:11:09
37    -1.98 2007-09-29 01:13:09
38    -1.83 2007-09-29 01:15:09
39    -1.88 2007-09-29 01:17:09
40    -1.88 2007-09-29 01:19:09
41    -1.78 2007-09-29 01:21:09
42    -1.78 2007-09-29 01:23:09
43    -1.66 2007-09-29 01:25:09
44    -1.70 2007-09-29 01:27:09
45    -1.46 2007-09-29 01:29:09
46    -1.36 2007-09-29 01:31:09
47    -1.40 2007-09-29 01:33:09
48    -1.34 2007-09-29 01:35:09
49    -1.34 2007-09-29 01:37:09
50    -1.30 2007-09-29 01:39:09
51    -1.36 2007-09-29 01:41:09
52    -1.40 2007-09-29 01:43:09
53    -1.43 2007-09-29 01:45:09
54    -1.38 2007-09-29 01:47:09
55    -1.40 2007-09-29 01:49:09
56    -1.42 2007-09-29 01:51:09
57    -1.47 2007-09-29 01:53:09
58    -1.66 2007-09-29 01:55:09
59    -1.84 2007-09-29 01:57:09
60    -1.92 2007-09-29 01:59:09
61    -1.88 2007-09-29 02:01:09
62    -2.11 2007-09-29 02:03:09
63    -1.91 2007-09-29 02:05:09
64    -2.04 2007-09-29 02:07:09
65    -1.94 2007-09-29 02:09:09
66    -1.92 2007-09-29 02:11:09
67    -1.80 2007-09-29 02:13:09
68    -1.74 2007-09-29 02:15:09
69    -1.74 2007-09-29 02:17:09
70    -1.76 2007-09-29 02:19:09
71    -1.74 2007-09-29 02:21:09
72    -1.80 2007-09-29 02:23:09
73    -1.80 2007-09-29 02:25:09
74    -1.80 2007-09-29 02:27:09
75    -1.82 2007-09-29 02:29:09
76    -1.90 2007-09-29 02:31:09
77    -1.93 2007-09-29 02:33:09
78    -2.06 2007-09-29 02:35:09
79    -2.08 2007-09-29 02:37:09
80    -1.95 2007-09-29 02:39:09
81    -1.98 2007-09-29 02:41:09
82    -2.32 2007-09-29 02:43:09
83    -1.86 2007-09-29 02:45:09
84    -1.97 2007-09-29 02:47:09
85    -1.64 2007-09-29 02:49:09
86    -2.00 2007-09-29 02:51:09
87    -1.48 2007-09-29 02:53:09
88    -1.74 2007-09-29 02:55:09
89    -1.85 2007-09-29 02:57:09
90    -1.82 2007-09-29 02:59:09
91    -1.82 2007-09-29 03:01:09
92    -1.92 2007-09-29 03:03:09
93    -1.80 2007-09-29 03:05:09
94    -1.54 2007-09-29 03:07:09
95    -1.36 2007-09-29 03:09:09
96    -1.50 2007-09-29 03:11:09
97    -1.59 2007-09-29 03:13:09
98    -1.60 2007-09-29 03:15:09
99    -1.58 2007-09-29 03:17:09
100   -1.81 2007-09-29 03:19:09
101   -2.16 2007-09-29 03:21:09
102   -1.97 2007-09-29 03:23:09
103   -1.94 2007-09-29 03:25:09
104   -2.29 2007-09-29 03:27:09
105   -2.46 2007-09-29 03:29:09
106   -2.42 2007-09-29 03:31:09
107   -2.34 2007-09-29 03:33:09
108   -2.38 2007-09-29 03:35:09
109   -2.44 2007-09-29 03:37:09
110   -2.28 2007-09-29 03:39:09
111   -2.24 2007-09-29 03:41:09 
```

此外 date_time 列是时间戳格式。平均线不应该是移动平均线，我对简单平均线很感兴趣。

Coloroaldo 提出的代码：

```
select
    extract(hour from n25.dt) as hour,
    n25.dt as t1, n25.dt as t0,
    round(((n25.ambtemp + n25.ambtemp) / 2)::numeric, 2) as average
from
     t0
    inner join
     t1 on
        date_trunc('minute', t0.dt + interval '1 hour - 2 minutes')
        = date_trunc('minute', t1.dt)
where extract(minute from t1.dt) = 41
order by t1.dt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:53:46.940

```
select
    extract(hour from t1.dt) as hour,
    t1.dt as t1, t0.dt as t0,
    round(((t0.ambtemp + t1.ambtemp) / 2)::numeric, 2) as average
from
    n25 t0
    inner join
    n25 t1 on
        date_trunc('minute', t0.dt + interval '1 hour - 2 minutes')
        = date_trunc('minute', t1.dt)
where extract(minute from t1.dt) = 41
order by t1.dt 
```

[SQL小提琴](http://www.sqlfiddle.com/#!12/8e1e4/2)

# javascript - 如何为绘图效果设置动画？（最好只有 css3）

> ID：14274603
> 
> 赞同：2
> 
> 时间：2013-01-11T08:53:25.253
> 
> 标签：javascript, css, canvas, svg

我想制作一个看起来像[这样的树的绘图效果，带有像](http://www.stri.co.uk/wp-content/uploads/2011/12/STRI-Christmas-card.gif)[这里](http://www.carto.net/svg/samples/animated_bustrack.shtml)这样的渐进线。我宁愿只使用`css3`with`svg/canvas`和`js`。你有什么想法？

更多信息：

我试图将一棵树切成小块并逐块制作外观动画，但这不是草书，因为它有很多关于同步延迟和持续时间的细节，因为每一块都有不同的长度等等。所有这些都是在没有 svg 的情况下制作的。如果我可以为线条路径设置动画，我现在想要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:49:30.540

你可以用普通的 SVG 做到这一点。SVG`<animate>`为声明性动画提供了元素。

你想要的（据我所知）是一条看起来好像是在观众眼前绘制的线。您可以`stroke-dasharray`为此目的使用该属性。此属性使用一系列值定义破折号模式，这些值定义破折号和间隙的长度。策略是：首先，我们有一个长度为 0 的破折号和一个至少与整个路径一样长的间隙。这意味着我们什么也看不到（或者只看到路径起点的第一个点）。最后，我们想要一个至少是路径全长的破折号。我们希望破折号逐渐变得越来越长，直到达到最终长度（完整路径的长度）。

最简单的情况是：

```
<svg xmlns="http://www.w3.org/2000/svg" width="400px" height="300px">
  <!-- This is the path of a spiral -->
  <path d="m 7.1428565,220.9336 c 0,0 13.6660115,54.75386 218.5714335,51.42857 C 430.61971,269.03688 478.47682,99.194335 206.69537,110.78149 -65.086093,122.36866 45.497658,213.22607 210.28635,207.29759 375.07503,201.3691 429.75297,97.468925 207.14285,82.362175 -15.467268,67.255425 64.868608,160.66909 210,153.79075 c 145.13139,-6.87834 137.69998,-93.087405 11.42857,-99.999995 -126.271412,-6.9126 -150.382292,28.03248 -24.28571,35.71428 126.09659,7.6818 72.6601,-44.83727 -5.71429,-84.2857095"
      stroke-width="10" stroke-linecap="round" fill="none" stroke="black" stroke-dasharray="0,2305">
    <!-- This defines the animation: 
         The path is roughly 2305 units long, it will be drawn in 5 seconds -->
    <animate from="0,2305" to="2305,0" dur="5s"
        attributeName="stroke-dasharray" repeatCount="indefinite"/>
  </path>
</svg> 
```

可以使用多个值（使用`values`属性）而不是一个`from`和一个`to`值来完成更复杂的事情：

```
<svg xmlns="http://www.w3.org/2000/svg" width="400px" height="300px">
  <path d="m 7.1428565,220.9336 c 0,0 13.6660115,54.75386 218.5714335,51.42857 C 430.61971,269.03688 478.47682,99.194335 206.69537,110.78149 -65.086093,122.36866 45.497658,213.22607 210.28635,207.29759 375.07503,201.3691 429.75297,97.468925 207.14285,82.362175 -15.467268,67.255425 64.868608,160.66909 210,153.79075 c 145.13139,-6.87834 137.69998,-93.087405 11.42857,-99.999995 -126.271412,-6.9126 -150.382292,28.03248 -24.28571,35.71428 126.09659,7.6818 72.6601,-44.83727 -5.71429,-84.2857095"
   stroke-width="10" stroke-linecap="round" fill="none" stroke="black" stroke-dasharray="0,2305">
    <animate attributeName="stroke-dasharray" dur="5s" repeatCount="indefinite" 
      values="0,2305;
              2000,305;
              2305,0"/>
  </path>
</svg> 
```

`values`您可以使用以下属性指定精确的时间（何时会达到列出的值） `keyTimes`：

```
<svg xmlns="http://www.w3.org/2000/svg" width="400px" height="300px">
  <path d="m 7.1428565,220.9336 c 0,0 13.6660115,54.75386 218.5714335,51.42857 C 430.61971,269.03688 478.47682,99.194335 206.69537,110.78149 -65.086093,122.36866 45.497658,213.22607 210.28635,207.29759 375.07503,201.3691 429.75297,97.468925 207.14285,82.362175 -15.467268,67.255425 64.868608,160.66909 210,153.79075 c 145.13139,-6.87834 137.69998,-93.087405 11.42857,-99.999995 -126.271412,-6.9126 -150.382292,28.03248 -24.28571,35.71428 126.09659,7.6818 72.6601,-44.83727 -5.71429,-84.2857095"
   stroke-width="10" stroke-linecap="round" fill="none" stroke="black" stroke-dasharray="0,2305">
    <animate attributeName="stroke-dasharray" dur="5s" repeatCount="indefinite" 
      values="0,2305;
              2000,305;
              2305,0" 
      keyTimes="0;.9;1"/>
  </path>
</svg> 
```

[在 Tinkerbin 上](http://tinkerbin.com/k7sIp0VT)查看此操作。

可以使用 CSS3 完成类似的操作：

```
<svg xmlns="http://www.w3.org/2000/svg" width="400px" height="300px">
  <style type="text/css">
    path {
      animation-name:animateDash;
      animation-duration:5s;
      animation-iteration-count:infinite;
    }
    @keyframes animateDash {
      from{stroke-dasharray:0,2305}
      to  {stroke-dasharray:2305,0}
    } 
  </style>
  <path d="m 7.1428565,220.9336 c 0,0 13.6660115,54.75386 218.5714335,51.42857 C 430.61971,269.03688 478.47682,99.194335 206.69537,110.78149 -65.086093,122.36866 45.497658,213.22607 210.28635,207.29759 375.07503,201.3691 429.75297,97.468925 207.14285,82.362175 -15.467268,67.255425 64.868608,160.66909 210,153.79075 c 145.13139,-6.87834 137.69998,-93.087405 11.42857,-99.999995 -126.271412,-6.9126 -150.382292,28.03248 -24.28571,35.71428 126.09659,7.6818 72.6601,-44.83727 -5.71429,-84.2857095"
    stroke-width="10" stroke-linecap="round" fill="none" stroke="black" stroke-dasharray="0,2305"/>
</svg> 
```

自己决定你喜欢哪种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:57:33.330

是的，看看这个使用 CSS 3[渲染的巴哈马标志](http://forestmist.org/experiments/bahamas-logo-using-css3/)

它描述了他的过程和技术。您也可以查看源代码。

还有更多可以在[这里找到](http://www.webdesignshock.com/50-impressive-css-drawings/)

**更新：**

也许这个[Sencha Animator 产品](http://www.sencha.com/products/animator)可能会有所帮助？

# objective-c - OS X 中的 NSDataWritingFileProtectionComplete

> ID：14274613
> 
> 赞同：0
> 
> 时间：2013-01-11T08:54:21.137
> 
> 标签：objective-c, macos, cocoa

查看文档： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)

我看到**NSDataWritingFileProtectionComplete**是*“在 OS X v10.8 及更高版本中可用”*但是当我尝试在我的代码中使用它时出现编译错误。检查 NSData 标头，我发现此功能仅在 iOS 中可用：

```
NSDataWritingFileProtectionComplete NS_ENUM_AVAILABLE_IOS(4_0) 
```

我做错了什么或文档不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:20:04.687

查看 MacOS 10.8 SDK 中定义的枚举，我看到：

```
typedef NS_OPTIONS(NSUInteger, NSDataWritingOptions) {
    NSDataWritingAtomic = 1UL << 0, // Hint to use auxiliary file when saving; equivalent to atomically:YES
    NSDataWritingWithoutOverwriting NS_ENUM_AVAILABLE(10_8, 6_0) = 1UL << 1, // Hint to return prevent overwriting an existing file. Cannot be combined with NSDataWritingAtomic.

    NSDataWritingFileProtectionNone NS_ENUM_AVAILABLE_IOS(4_0)                                  = 0x10000000,
    NSDataWritingFileProtectionComplete NS_ENUM_AVAILABLE_IOS(4_0)                              = 0x20000000, 
```

" `NS_ENUM_AVAILABLE_IOS`" 是一个扩展为

```
 #define NS_ENUM_AVAILABLE_IOS(_ios) __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_##_ios) 
```

“ `__MAC_NA`”位表示“不适用”，这意味着文档当前是错误的。此功能仅在 iOS 中可用。

您应该就此向 Apple 提交文档错误。

# php - XML-RPC：使用 xml-rpc 从 wordpress 站点获取类别列表

> ID：14274616
> 
> 赞同：1
> 
> 时间：2013-01-11T08:54:29.790
> 
> 标签：php, wordpress, xml-rpc

我们如何通过 xml-rpc 获取 wordpress 站点的类别。我现在我们需要使用用户名和传递来连接到该站点。

```
set_time_limit(0);
include("xmlrpc.inc"); 
$GLOBALS['xmlrpc_internalencoding'] = 'UTF-8';
define ('DOMAIN', 'abc.com'); // wordpress server
define ('BLOGID', 1); 
define ('USER', 'admin'); // wordpress admin account
define ('PASSWORD', 'pass'); // wordpress password 
```

我将如何继续获得类别列表？

我将如何使用 wp.getCategories 类？我有这样的代码我不知道它好不好

```
$categories = $wp->getCategoriesEx($blogID = 1); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:45:50.750

根据我自己的代码...

```
class WpXmlRpc {
    private $XmlRpcURL;
    private $UserName;
    private $PassWord;

    public function __construct($xmlrpcurl, $username, $password) {
        $this->XmlRpcURL = $xmlrpcurl;
        $this->UserName  = $username;
        $this->PassWord = $password;
    }

    private function send_request($requestname, $params) {
        $request = xmlrpc_encode_request($requestname, $params);
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
        curl_setopt($ch, CURLOPT_URL, $this->XMLRPCURL);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_TIMEOUT, 1);
        $results = curl_exec($ch);
        curl_close($ch);
        return $results;
    }

    public function getCategories() {
        $params = array();
        return $this->send_request('wp.getCategories', $params); // your results!
    }
} 
```

你的结果将是一个像这样的数组......

```
Array(
    'Request Name' => 'wp.getCategories',
    'Result' => Array(
        'category',
        'category',
        'category'
    ) 
```

# c# - 如何使用激活用户、电子邮件或电话号码和用户名为 Active Directory 用户构建 QBE？

> ID：14274618
> 
> 赞同：0
> 
> 时间：2013-01-11T08:54:40.307
> 
> 标签：c#, asp.net, arraylist, active-directory

我使用 Active Directory。我编写了一个方法，如何使用过滤器从 Active Directory 中获取所有用户，并在`ArrayList`我的`DropDownList`.

编码：

```
 private ArrayList GetReceiverList(string Domain) 
        {
            ArrayList List = new ArrayList();

            DirectoryEntry Entry = new DirectoryEntry(Domain);

            string filter = "(&(objectClass=user)(objectCategory=user)(!userAccountControl:1.2.840.113556.1.4.803:=2)(sn=*)(|(telephoneNumber=*)(mail=*))(cn=*))"; 

            DirectorySearcher Searcher = new DirectorySearcher(Entry, filter);

            foreach (SearchResult usr in Searcher.FindAll())
            {
                List.Add(GetLdapProperty(usr, "displayName"));
            }

            return List;
        } 
```

这项工作，我现在想使用`System.DirectoryServices.AccountManagement`，为此我编写了一个方法，这也有效。但我想在我的第一个方法中使用过滤器。我怎么能做到这一点？

我的新方法的代码：

```
 public static ArrayList GetAllActiveDirectoryUsersByDisplayName(string dc)
        {
            ArrayList list = new ArrayList();

            PrincipalContext ctx = new PrincipalContext(ContextType.Domain, dc);
            UserPrincipal u = new UserPrincipal(ctx);
            u.Surname = "*";
            PrincipalSearcher ps = new PrincipalSearcher(u);
            PrincipalSearchResult<Principal> results = ps.FindAll();

            foreach (UserPrincipal usr in results)
            {
                list.Add(usr.Name);
            }

            list.Sort();

            return list;
        } 
```

更新：

我想在我的新方法中使用这个过滤器：

```
 string filter = "(&(objectClass=user)(objectCategory=user)(!userAccountControl:1.2.840.113556.1.4.803:=2)(sn=*)(|(telephoneNumber=*)(mail=*))(cn=*))"; 
```

# c++ - 如何将新的 EMF 记录添加到现有的 Windows EMF 文件？

> ID：14274620
> 
> 赞同：0
> 
> 时间：2013-01-11T08:54:47.577
> 
> 标签：c++

我可以显示 EMF 记录，但我不知道如何将新的 EMF 记录添加到现有的 Windows EMF 文件中。有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:10:55.167

这里有一些可以做到这一点的工具： 这里有一些可以编辑 EMF 记录的工具： 1) [EmfExplorer](http://frazmitic.free.fr/emfexplorer/) 2) [libEMF C/C++ Library](http://libemf.sourceforge.net/) 3) [inkscape](http://inkscape.org/) 4) [Metadraw](http://www.bennet-tec.com/btproducts/MetaDraw/MetaDraw.htm)

# c# - 在 c# 中使用 wkhtmltopdf.exe 生成 PDF

> ID：14274635
> 
> 赞同：0
> 
> 时间：2013-01-11T08:55:29.510
> 
> 标签：c#, .net, pdf, wkhtmltopdf

我正在使用带有以下代码的 wkhtmltopdf.exe 生成 PDF。

```
 string url = HttpContext.Current.Request.Url.AbsoluteUri;

        //string[] strarry = sPath.Split('/');
        //int lengh = strarry.Length;

  var pdfUrl = HtmlToPdf(pdfOutputLocation: "~/PDF/", outputFilenamePrefix: "DT", urls: new string[] { url });

        WebClient req = new WebClient();
        HttpResponse response = HttpContext.Current.Response;
        response.Clear();
        response.ClearContent();
        response.ClearHeaders();
        response.Buffer = true;
        Response.ContentType = "application/pdf";
        response.AddHeader("Content-Disposition", "attachment;filename=\"" + pdfUrl.ToString().Substring(6) + "\"");
        byte[] data = req.DownloadData(Server.MapPath(pdfUrl.ToString()));
        response.BinaryWrite(data);
        File.Delete(Server.MapPath(pdfUrl.ToString()));
        response.End(); 
```

和

```
 public static string HtmlToPdf(string pdfOutputLocation, string outputFilenamePrefix, string[] urls,
 string[] options = null,
 string pdfHtmlToPdfExePath = "C:\\Program Files\\wkhtmltopdf\\wkhtmltopdf.exe")
    {
        string urlsSeparatedBySpaces = string.Empty;
        try
        {
            //Determine inputs
            if ((urls == null) || (urls.Length == 0))
                throw new Exception("No input URLs provided for HtmlToPdf");
            else
                urlsSeparatedBySpaces = String.Join(" ", urls); //Concatenate URLs

            string outputFolder = pdfOutputLocation;
            string outputFilename = outputFilenamePrefix + "_" + DateTime.Now.ToString("yyyy-MM-dd-hh-mm-ss-fff") + ".PDF"; // assemble destination PDF file name

            var p = new System.Diagnostics.Process()
            {
                StartInfo =
                {
                    FileName = pdfHtmlToPdfExePath,
                    Arguments = ((options == null) ? "" : String.Join(" ", options)) + " " + urlsSeparatedBySpaces + " " + outputFilename,
                    UseShellExecute = false, // needs to be false in order to redirect output
                    RedirectStandardOutput = true,
                    RedirectStandardError = true,
                    RedirectStandardInput = true, // redirect all 3, as it should be all 3 or none
                    WorkingDirectory = HttpContext.Current.Server.MapPath(outputFolder)
                }
            };

            p.Start();

            // read the output here...
            var output = p.StandardOutput.ReadToEnd();
            var errorOutput = p.StandardError.ReadToEnd();

            // ...then wait n milliseconds for exit (as after exit, it can't read the output)
            p.WaitForExit(60000);

            // read the exit code, close process
            int returnCode = p.ExitCode;
            p.Close();

            // if 0 or 2, it worked so return path of pdf
            if ((returnCode == 0) || (returnCode == 2))
                return outputFolder + outputFilename;
            else
                throw new Exception(errorOutput);

            //Response.ContentType = "application/pdf";
            //Response.AddHeader("content-length", theData.Length.ToString());
            //if (Request.QueryString["attachment"] != null)
            //    Response.AddHeader("content-disposition", "attachment; filename=ExampleSite.pdf");
            //else
            //    Response.AddHeader("content-disposition", "inline; filename=ExampleSite.pdf");
            //Response.BinaryWrite(theData);
            //HttpContext.Current.ApplicationInstance.CompleteRequest();
        }
        catch (Exception exc)
        {
            throw new Exception("Problem generating PDF from HTML, URLs: " + urlsSeparatedBySpaces + ", outputFilename: " + outputFilenamePrefix, exc);
        }
    } 
```

从上面的代码中，PDF 生成良好。但是我有两个页面，其登录和注销用户的 URL 相同。例如，可以说 www.xyz/pdf/brason。这个相同的 URL 用于登录和注销用户，但内容将是根据用户登录或注销而有所不同。

现在，当我登录并尝试使用上面的代码生成 PDF 时，它总是向我显示注销用户页面的内容。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:13:27.567

我想如果我理解正确，这是因为调用页面的 wkhtmltopdf 没有登录。wkhtmltopdf 有点像创建一个没有任何登录 cookie/会话的新隐身浏览器窗口，所以页面正确地认为它没有登录。你可以通过调试服务器在 wkhtmltopdf 调用它时获得的请求来检查。

如果这是问题，可能很难解决。解决方案取决于您的登录系统以及您可以采取哪些措施来解决该问题。如果您可以使用 cookie 复制登录，您可以自己设置登录 cookie，请参阅[http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf_0.10.0_rc2-doc.html#Page%20Options](http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf_0.10.0_rc2-doc.html#Page%20Options)了解更多信息如何设置cookie。

另一种选择是首先从返回登录的 HTML 的系统创建一个请求，然后将其保存到文件/流并将该文件/流提供给 wkhtmltopdf（我猜你可以使用 HttpContext.Current.Request 来做到这一点什么的，我不知道）。

另一种解决方法是创建登录页面的重复页面，该页面看起来与登录页面完全相同，但实际上并非如此 - 此页面仅用于欺骗 wkhtmltopdf。类似的东西`www.xyz/pdf/brason?foolwkhtmltopdf=true`，然后通过调用类似的东西来使用它`if(url.ToLower() == "www.xyz/pdf/brason") {url="www.xyz/pdf/brason?foolwkhtmltopdf=true"; }`。这可能是一个安全风险，具体取决于显示的信息。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T10:46:15.050

我认为您需要在转换为 html 之前保存页面的输出。因为这会直接调用 url 并且当它调用它时您没有登录 convert to pdf 对其请求的响应我在尝试将 webform 转换为 pdf 但填充了值时遇到了同样的问题所以我将响应保存为 html 和给 wkhtmltopdf 保存的路径作为参数

```
 Response.ContentType = "application/pdf";
        Response.AddHeader("content-disposition", "attachment;filename=TestPage.pdf");
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        StringWriter sw = new StringWriter();
        HtmlTextWriter hw = new HtmlTextWriter(sw);
        this.Page.RenderControl(hw);
        StringReader sr = new StringReader(sw.ToString());
        string htmlpath =Server.MapPath("~/htmloutput.html");
        if (File.Exists(htmlpath))
        {
            File.Delete(htmlpath);

        }  

        File.Create(htmlpath).Dispose();
        using (TextWriter tw = new StreamWriter(htmlpath))
        {
            tw.WriteLine(sw.ToString());
            tw.Close();
        }

        string path = Server.MapPath("~/wkhtmltopdf-page.pdf");
        PdfConvert.ConvertHtmlToPdf(new Codaxy.WkHtmlToPdf.PdfDocument
        {
            Url = htmlpath,
            HeaderLeft = "[title]",
            HeaderRight = "[date] [time]",
            FooterCenter = "Page [page] of [topage]"

        }, new PdfOutput
        {

            OutputFilePath = path

        }); 
```

您可以在按钮单击事件上调用它。仅在 asp.net 网络表单上对此进行了测试。在 asp.net mvc 上，您需要一些其他方式来获取视图 html 输出

# mysql - 我在 Navicat for mysql 的触发器中编写以下代码，但它给出了错误

> ID：14274638
> 
> 赞同：0
> 
> 时间：2013-01-11T08:55:42.463
> 
> 标签：mysql, navicat

这是我在 Navicat for mysql 中编写的以下代码。

```
Set @FileRef=0
FileRef:=select sum(id) from one; 
```

这是我触发器的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:57:11.953

尝试，

```
DECLARE @FileRef INT;
SET @FileRef:= (select sum(id) from one); 
```

# php - 拒绝代理访问我的 PHP 网站

> ID：14274643
> 
> 赞同：1
> 
> 时间：2013-01-11T08:56:10.040
> 
> 标签：php, proxy, phpbb, phpbb3

这甚至可能吗？

我有一个运行 PHPBB3 的网站，并且有一个用户被禁止，但仍然不断回来。我发现他正在使用代理绕过他的 IP 禁令和新帐户绕过他的账户禁令。

有没有办法确定主机是否使用代理？或者如果没有，是否有任何网站列出我可以添加我的禁止列表的公共/免费代理？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:05:36.677

只需将这些行添加到您的根 .htaccess 文件中

```
RewriteEngine on
RewriteCond %{HTTP:VIA}                 !^$ [OR]
RewriteCond %{HTTP:FORWARDED}           !^$ [OR]
RewriteCond %{HTTP:USERAGENT_VIA}       !^$ [OR]
RewriteCond %{HTTP:X_FORWARDED_FOR}     !^$ [OR]
RewriteCond %{HTTP:PROXY_CONNECTION}    !^$ [OR]
RewriteCond %{HTTP:XPROXY_CONNECTION}   !^$ [OR]
RewriteCond %{HTTP:HTTP_PC_REMOTE_ADDR} !^$ [OR]
RewriteCond %{HTTP:HTTP_CLIENT_IP}      !^$
RewriteRule ^(.*)$ - [F] 
```

[如果我学到了，请在此处](http://perishablepress.com/how-to-block-proxy-servers-via-htaccess/)阅读有关此内容的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:02:13.570

是和不是。您应该在此处查看出色的响应：[https ://superuser.com/questions/284927/how-to-get-the-real-ip-address-of-someone-using-a-proxy](https://superuser.com/questions/284927/how-to-get-the-real-ip-address-of-someone-using-a-proxy)

但是，有些事情你可以做。只需启用电子邮件验证，并禁止电子邮件地址。他最终会用完它们。

如果他是垃圾邮件发送者，您可以尝试使用 Advanced Block Mod ( [https://www.phpbb.com/customise/db/mod/advanced_block_mod/](https://www.phpbb.com/customise/db/mod/advanced_block_mod/) ) - 它在一些俄罗斯垃圾邮件发送者所针对的网站上帮助了我很多 :)

这就是我目前所能想到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:00:58.797

这里有一些想法：

*   您可以检查 X-Forwarded-For: 标头以查看它是否与 $_SERVER['REMOTE_ADDR'] 匹配，但这可能会被恶意或配置错误的代理所欺骗
*   您可以找到开放代理的列表，但找不到完整的列表。例如，我相信 Tor 项目维护了一个出口节点列表。

# android - 从 WSDL 中查找 SOAPAction

> ID：14274644
> 
> 赞同：5
> 
> 时间：2013-01-11T08:56:24.213
> 
> 标签：android, web-services, soap, wsdl, android-ksoap2

我的要求是从 Android 调用 Web 服务并以良好的方式显示结果。

但是在 Web 服务的 WSDL 中，我没有找到`SOAPAction`. WSDL 如下所示：

```
<operation name="getStudentList">
 <soap:operation soapAction=""/>
 <input>
   <soap:body use="literal"/>
 </input>
 <output>
   <soap:body use="literal"/>
  </output>
</operation> 
```

有没有办法`SOAPAction`在 WSDL 中的其他地方找到它？我可以调用 Web 服务并在没有 的情况下获得结果`SOAPAction`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T13:29:06.073

这`SOAPAction`是 SOAP 1.1 over HTTP 所必需的，但很难说如果您不发送正确的标头，您的 Web 服务的行为将会是什么。如果 Web 服务缺少`SOAPAction`（或者如果它有一个意外的值）或者它可能什么都不做，它可能会返回一个错误。

WSDL 是`SOAPAction`在`<soap:operation>`. 如果没有为操作指定它，或者就像您发布的示例（`soapAction=""`）一样，您通常需要将其添加到请求标头中：

```
SOAPAction: "" 
```

尝试使用带引号的空字符串，它应该可以工作。

# android - pulltorefresh 与 Ice Scream Sandwich 的兼容性

> ID：14274646
> 
> 赞同：0
> 
> 时间：2013-01-11T08:56:40.713
> 
> 标签：android

我在修改 PullToRefresh 库时遇到问题

[https://github.com/johannilsson/android-pulltorefresh/pull/40](https://github.com/johannilsson/android-pulltorefresh/pull/40)

它在 android 版本 2.x 中运行良好，但在 4.x 中崩溃（我没有 3.x 设备来检查是否有效）。

在 4.x 中，它在方法中失败：

```
 private void applyHeaderPadding(MotionEvent ev) {
    // Workaround for getPointerCount() which is unavailable in 1.5
    // (it's always 1 in 1.5)
    int pointerCount = 1;
    try {
        Method method = MotionEvent.class.getMethod("getPointerCount");
        pointerCount = (Integer)method.invoke(ev);
    } catch (NoSuchMethodException e) {
        pointerCount = 1;
    } catch (IllegalArgumentException e) {
        throw e;
    } catch (IllegalAccessException e) {
        System.err.println("unexpected " + e);
    } catch (InvocationTargetException e) {
        System.err.println("unexpected " + e);
    }

    for (int p = 0; p < pointerCount; p++) {
        if (mRefreshState == RELEASE_TO_REFRESH) {
            if (isVerticalFadingEdgeEnabled()) {
                setVerticalScrollBarEnabled(false);
            }

            int historicalY = (int) ev.getHistoricalY(p);

            // Calculate the padding to apply, we divide by 1.7 to
            // simulate a more resistant effect during pull.
            int topPadding = (int) (((historicalY - mLastMotionY)
                    - mRefreshViewHeight) / 1.7);

            mRefreshView.setPadding(
                    mRefreshView.getPaddingLeft(),
                    topPadding,
                    mRefreshView.getPaddingRight(),
                    mRefreshView.getPaddingBottom());
        }
    }
} 
```

崩溃中的行是：

```
int historicalY = (int) ev.getHistoricalY(p); 
```

有这个特例：

```
java.lang.IllegalArgumentException: historyPos out of range
at android.view.MotionEvent.nativeGetAxisValue(Native Method)
at android.view.MotionEvent.getHistoricalY(MotionEvent.java:2314)
at com.usualbike.cbike.PullToRefresh.applyHeaderPadding(PullToRefresh.java:241)
at com.usualbike.cbike.PullToRefresh.onTouchEvent(PullToRefresh.java:212)
at android.view.View.dispatchTouchEvent(View.java:5717)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1956)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1717)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1962)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1731)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1962)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1731)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1962)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1731)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1962)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1731)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1962)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1731)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1962)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1731)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1962)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1731)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1962)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1731)
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2064)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1400)
at android.app.Activity.dispatchTouchEvent(Activity.java:2369)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2012)
at android.view.View.dispatchPointerEvent(View.java:5897)
at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3115)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2657)
at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:1021)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2666)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4511)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
at dalvik.system.NativeStart.main(Native Method) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:28:54.970

我不确定，但尝试改变

```
int historicalY = (int) ev.getHistoricalY(p); 
```

至

```
if(p>pointerCount)
{
int historicalY = (int) ev.getHistoricalY(p);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:11:46.283

你可能想试试我的图书馆：[https ://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

# ssis - 在SSIS SQL Server Table Configuration中，我们可以多次配置一个连接管理器的连接字符串吗？

> ID：14274648
> 
> 赞同：0
> 
> 时间：2013-01-11T08:56:45.087
> 
> 标签：ssis

在我的 SSIS 包中，我有一个带有 OLEDB 源和 OLEDB 目标的 DFT。我必须将记录从源加载到多个目标表。我在包中使用 SQL Server 表配置。

所以在配置表中，我有多个记录来配置具有相同 ConfigurationFilter 值的目标连接。

是否可以使用 SQL Server 表配置来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:36:51.267

根据您对我的评论的回答，您想要的是一个循环，其中包含表连接的连接字符串的表达式。

设置循环以从表或枚举中读取（在其中手动键入值（更好地使用表）将机器和数据库名称读取到循环中的变量中。设置连接以根据加载的变量具有表达式循环连接字符串。为循环中的数据移动创建 dft 选择带有表达式的连接。每次循环迭代时，它将更新连接字符串，您将在同一个表的不同服务器/数据库上操作。

# c - 如何为 Linux 编写 Hello World 驱动程序

> ID：14274654
> 
> 赞同：1
> 
> 时间：2013-01-11T08:57:08.977
> 
> 标签：c, linux, embedded, driver, linux-device-driver

最近我对linux很兴奋。我想学习如何编写简单的 linux 驱动程序。我知道 C 和 python 。我正在使用 ubuntu 11.10（3.0.0-12-generic 内核）。

我的疑惑

1.  开发学习简单的linux驱动程序需要什么要求
2.  我看到了可能的教程。但是在初学者水平上都不是很好。你能否为初学者推荐一个更好的教程。
3.  如何编译、运行并查看我的驱动程序是否正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:02:26.407

请参阅以下链接。它包含开发内核 linux char 驱动程序的示例

[http://tldp.org/LDP/lkmpg/2.6/html/x569.html](http://tldp.org/LDP/lkmpg/2.6/html/x569.html)

如果您想从头开始内核开发，请从头开始教程

[http://tldp.org/LDP/lkmpg/2.6/html/index.html](http://tldp.org/LDP/lkmpg/2.6/html/index.html)

使用 Makefile 构建内核模块：

```
obj-m += module1.o

all
 make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean
 make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

# android - 使用相机意图 Android 时未创建目录

> ID：14274656
> 
> 赞同：0
> 
> 时间：2013-01-11T08:57:11.753
> 
> 标签：android

我试图保存由相机意图拍摄的图像。我的代码没有工作，所以当我添加检查是否创建了目录时，它应该没有。可能是什么问题？我在模拟器上试试。

```
01-11 13:50:28.946: D/file(1161):  file is /mnt/sdcard/M3
01-11 13:50:28.946: D/file(1161):  photo is /mnt/sdcard/M3/3_1.jpg 
```

我在日志中得到了上述内容。

下面是我在打开相机的按钮上的代码

```
File sdCard = Environment.getExternalStorageDirectory();
            File file = new File (sdCard.getAbsolutePath() , File.separator + "/M3");
            file.mkdirs();
            String name = e_id + "_" + (size+1)+ ".jpg";
            File newfile = new File(file,name);
            newfile.mkdir();

                Log.d("file"," file is " + file.toString());
                Log.d("file"," photo is " + newfile.toString());

            if(!file.mkdir())
            {
                Log.d("file"," not created ");
                }
            if(!newfile.mkdir())
            {
                Log.d("newfile"," not created ");
                }
            else
            {
                outputFileUri = Uri.fromFile(newfile);
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
                startActivityForResult(intent, TAKE_PICTURE);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:25:50.117

The issue is that you are treating the image file as a directory:

```
newfile.mkdir(); 
```

Try:

```
File sdCard = Environment.getExternalStorageDirectory();
File dir = new File(sdCard.getAbsolutePath(), File.separator + "/M3");
if (!dir.mkdirs())
{
    Log.e(TAG, "Failed to create directory " + dir);
    return false;    // Assuming this is in a method returning boolean
}
String filename = e_id + "_" + (size+1)+ ".jpg";
File file = new File(dir, filename);

Log.d(TAG, "dir is " + dir.toString());
Log.d(TAF, "file is " + file.toString());

outputFileUri = Uri.fromFile(file);
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
startActivityForResult(intent, TAKE_PICTURE); 
```

Note: you need to name your variables better; `file` isn't a file it's a directory. `newfile` is the only file you care about in this code snippet, so call it `file`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:24:19.467

替换这一行

```
File file = new File (sdCard.getAbsolutePath() , File.separator + "/M3"); 
```

有了这个。

```
File file = new File (sdCard.getAbsolutePath()+"/YourDirectoryName"); 
```

# android - 如何将屏幕分成相等的部分

> ID：14274657
> 
> 赞同：1
> 
> 时间：2013-01-11T08:57:13.773
> 
> 标签：android, android-layout

我想将底部的某些部分用于菜单或按钮。然后我想把剩下的部分分成4个相等的部分来放4个大小相等的按钮。左上按钮 右上按钮 左下按钮 右下按钮

像这样的东西：（我不允许发布图片）。

我为底部和顶部尝试了 2 种相对布局，然后为大按钮尝试了 4 种线性布局，但失败了。应该有一种简单的方法，而无需使用大量不同的布局。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:16:27.637

对于等分，您可以在 LinearLayout 中使用 weight 属性。

请查看一些示例，帮助您如何在屏幕布局中使用权重属性。你看过这个[演示](https://stackoverflow.com/questions/2285150/layout-buttons-so-each-divides-up-the-space-equally)吗？

随时发表评论。

# xpages - XPages 文件下载控制问题

> ID：14274666
> 
> 赞同：0
> 
> 时间：2013-01-11T08:57:52.980
> 
> 标签：xpages

我在自定义控件上有一个文件下载控件，这个自定义控件在 xpage 中。现在，当我单击文件下载控件中的附件链接时，会出现提示“您要打开还是保存此文件”。如果我单击取消/打开/保存... xpage 没有响应并且没有按钮起作用（我在页面上有编辑和关闭按钮）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:21:07.157

您使用的是哪个版本的 Domino 和哪个浏览器。请记住 8.5.2 使用 Dojo 1.5 但 Internet Explorer 9 仅支持 Dojo 1.6 及更高版本。

如果这是问题所在，那么部分刷新将无法在任何 XPage 上的任何地方工作。要克服它，您应该能够覆盖 IE 版本。

# tabs - 如何在 Komodo Edit 中设置标签宽度？

> ID：14274674
> 
> 赞同：5
> 
> 时间：2013-01-11T08:59:00.550
> 
> 标签：tabs, komodoedit

[这是在 Emacs 或NEdit](https://en.wikipedia.org/wiki/NEdit)中完成的相当简单的操作，但我找不到如何在 Komodo Edit 中设置选项卡宽度（我使用 7.1）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-16T01:20:51.203

Komodo 在“允许文件内容覆盖选项卡设置”设置中有一个错误。这是修复：

转到：*首选项*→*编辑器*→*缩进*。在这个屏幕上，关闭*“允许文件内容覆盖选项卡设置”*，因为这是非常错误的，并且可能导致 Komodo 覆盖您的设置（因此需要在其他人的解决方案中更改每个文件的设置）

在此屏幕中，检查所有其他选项卡设置，并检查下拉菜单中的每种语言设置。

现在关闭所有文件，重新打开它们后，设置现在应该永久生效。这是一个更好的解决方案，因为您将不再需要访问每个文件并不断重置每个文件的缩进设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T17:14:14.077

转到首选项页面。

根据您的显示风格 - 我认为 GTK 风格，加号或条目“编辑器”前面的内容可能不可见。

双击“编辑器”以显示子树，单击它前面的空闲空间（如下沉的潜艇），或在搜索栏中搜索缩进或制表符。

在那里您将找到缩进设置的详细信息。

# android - 带有滑动菜单和 actionbarsherlock 的动态 UI

> ID：14274676
> 
> 赞同：8
> 
> 时间：2013-01-11T08:59:08.743
> 
> 标签：android, android-fragments, actionbarsherlock, dynamic-ui

尝试使用[facebook 实现动态 UI，例如滑动菜单](https://github.com/jfeinstein10/SlidingMenu)和[actionbarsherlock](http://actionbarsherlock.com/) 。首先， 我查看了引入片段来处理动态按钮的 android 文档。但是没有运气和一周的时间，我仍然无法让它工作，我想是我对 android 概念的误解。滑动条和 actionbarsherlock 工作没有任何问题。

我有一个 HomeScreen.java ，其中包含我所有的菜单和预设阶段，到目前为止，我已经创建了一个扩展 FragmentPagerAdapter 的 pagerAdapter1.java 和三个处理我的工作的示例片段类，即 task1.java、task2.java、task3.java足够简单

这是我的代码 HomeScreen.java 的一部分

```
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.slidingmenu.lib.SlidingMenu;
import com.slidingmenu.lib.app.SlidingFragmentActivity;
public class HomeScreen extends SlidingFragmentActivity {
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_home_screen);
            setBehindContentView(R.layout.menu_frame);
    } 
```

PagerAdapter1.java

```
public class PagerAdapter1 extends FragmentPagerAdapter  {

    private List<Fragment> fragments;
    public PagerAdapter1(FragmentManager fm, List<Fragment> fragments) {
        super(fm);
        this.fragments = fragments;
    }

    public Fragment getItem(int position) {
        return this.fragments.get(position);
    }

    public int getCount() {
        return this.fragments.size();
    }

} 
```

和三个task1.java,2,3

```
 import android.support.v4.app.Fragment;
    public class Tab1Fragment extends Fragment{

onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            if (container == null) {
                return null;
            }
            return (LinearLayout)inflater.inflate(R.layout.tab_frag1_layout, container, false);
        } 
```

我认为最好用图片来解释我的问题

一个主屏幕，是一个预设阶段，每当用户点击菜单时，这个页面就会变成他想要的页面。

![主屏幕](../Images/7d3432409a9ddd1912ca5f92be803c13.png)

这是我的菜单

![菜单框架](../Images/a57b24843ce0437408233f1e7c842926.png)

我的问题是如何将这 3 个片段包含到我的主屏幕中？我尝试了很多教程，但在我的情况下不起作用。大多数教程都是用代码创建片段，我只想将我的 3 个任务包含在其中

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T14:39:41.290

我将尝试解释此示例代码，并根据您的需要使用。

**这是您的BehindContent (SlidingMenu) 的ListFragment：**

```
public class ColorMenuFragment extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.list, null);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        String[] colors = getResources().getStringArray(R.array.color_names);
        ArrayAdapter<String> colorAdapter = new ArrayAdapter<String>(getActivity(), 
                android.R.layout.simple_list_item_1, android.R.id.text1, colors);
        setListAdapter(colorAdapter);
//This array is only to fill SlidingMenu with a Simple String Color.
//I used MergeAdapter from Commonsware to create a very nice SlidingMenu.
    }

    @Override
    public void onListItemClick(ListView lv, View v, int position, long id) {
//This switch case is a listener to select wish item user have been selected,  so it Call
//ColorFragment, you can change to Task1Fragment, Task2Fragment, Task3Fragment.
        Fragment newContent = null;
        switch (position) {
        case 0:
            newContent = new ColorFragment(R.color.red);
            break;
        case 1:
            newContent = new ColorFragment(R.color.green);
            break;
        case 2:
            newContent = new ColorFragment(R.color.blue);
            break;
        case 3:
            newContent = new ColorFragment(android.R.color.white);
            break;
        case 4:
            newContent = new ColorFragment(android.R.color.black);
            break;
        }
        if (newContent != null)
            switchFragment(newContent);
    }

    // the meat of switching the above fragment
    private void switchFragment(Fragment fragment) {
        if (getActivity() == null)
            return;

        if (getActivity() instanceof FragmentChangeActivity) {
            FragmentChangeActivity fca = (FragmentChangeActivity) getActivity();
            fca.switchContent(fragment);
        } else if (getActivity() instanceof ResponsiveUIActivity) {
            ResponsiveUIActivity ra = (ResponsiveUIActivity) getActivity();
            ra.switchContent(fragment);
        }
    }

} 
```

**这是您的 BaseActivity 类：**

它没有滑动，我可以理解，你不需要这个。

```
public class FragmentChangeActivity extends BaseActivity {

    private Fragment mContent;

    public FragmentChangeActivity() {
        super(R.string.changing_fragments);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // set the Above View
        if (savedInstanceState != null)
            mContent = getSupportFragmentManager().getFragment(savedInstanceState, "mContent");
        if (mContent == null)
            mContent = new ColorFragment(R.color.red);  

        // set the Above View
            //This will be the first AboveView
        setContentView(R.layout.content_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, mContent)
        .commit();

        // set the Behind View
            //This is the SlidingMenu
        setBehindContentView(R.layout.menu_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.menu_frame, new ColorMenuFragment())
        .commit();

        // customize the SlidingMenu
            //This is opcional
        getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        getSupportFragmentManager().putFragment(outState, "mContent", mContent);
    }

    public void switchContent(Fragment fragment) {
            // the meat of switching fragment
        mContent = fragment;
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, fragment)
        .commit();
        getSlidingMenu().showContent();
    }

} 
```

好的，所以如果您想将 ColorFragment 更改为其他任何内容，请执行以下操作：

**首先，选择您要使用的项目：**

```
case 0:
                newContent = new ColorFragment(R.color.red);
                break; 
```

**至：**

```
case 0:
            newContent = new ArrayListFragment();
            break; 
```

我只是做了一个arraylist，它只是一个简单的例子，你可以做很多事情，然后你可以阅读[Fragment](http://developer.android.com/reference/android/app/Fragment.html)来学习如何做不同的事情。

```
 public class ArrayListFragment extends ListFragment {

    @Override                               
            public void onActivityCreated(Bundle savedInstanceState) {
                super.onActivityCreated(savedInstanceState);
                setListAdapter(new ArrayAdapter<String>(getActivity(),
                        android.R.layout.simple_list_item_1, Listnames.TITLES));
//Listnames is a class with String[] TITLES;

}

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
            Log.i("FragmentList2", "Item clicked: " + id);

            String item = (String) getListAdapter().getItem(position);
        Toast.makeText(getActivity(), item, Toast.LENGTH_LONG).show();

        }

    } 
```

好吧，如果您误解了什么，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:55:29.653

> My problem is how do i include this 3 fragment into my homescreen ?

It really depends on how do you want them to behave.

Do you want them to appear only one at a time without allowing swipeing between them? If yes then add/insert a container layout(for example a simple `FrameLayout`) in your `Activity` on which you'll add the `Fragments`. I didn't worked with the `SlidingMenu` library but it should have a callback called when you click one of the items in the menu. In that callback you'll attach the proper fragment to the container layout(the `FrameLayout`) I mention earlier.

Do you want to show only one Fragment but you want to allow the user to swipe between them? If yes use a `ViewPager` in the activity layout and in the callback triggered by the `SlidingMenu` library's menu selection set the current page of the `ViewPager` with the `setCurrentItem()` method.

If you want something different then this provide more details.

> Most tutorial are creating fragment with code, i just want to include my 3 task into it

This, I don't quite understand. If you want to "include" your task fragments directly in your xml layout, you can but you'll be limited on what you can do with them(not to mention that all the fragments will be on one single screen) and I would avoid it. If you want something else provide more details.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:35:54.187

我认为它不会像 Fragments 那样工作，我也在寻找解决方案并最终手动添加了 Fragments。

我正在做类似的事情，但对我来说，也有打开`WebViews`指定 URL 的情况。因此，“上方”屏幕总是会在任何点击时更新。

为了控制它的行为，我创建了一个`MenuItemResource`对象，它基本上包含属性，如图标的 ID、菜单项的名称和 URL。

```
public class MenuItemResource {
    private int aValue;
    private int aUrl;
    private int aIconIdle;
    private int aIconActive;

    public MenuItemResource(int value, int url, int iconIdle, int iconActive) {
        aValue = value;
        aUrl = url;
        aIconIdle = iconIdle;
        aIconActive = iconActive;
    }
} 
```

该行为由一个`OnItemClickListener`which 用一个开关检查哪些值在`MenuItemResource`被点击的那个中处理。因为`WebView`它非常简单：

```
 newFragment = new WebViewFragment();
            final Bundle arguments = new Bundle();
            arguments.putString(Constants.KEY_URL, getString(item.getUrl()));
            newFragment.setArguments(arguments);
            startFragment(newFragment, false); 
            // boolean is used to add the fragment to the backstack 
```

startFragment 方法只是使用`FragmentManager`and`FragmentTransaction`来替换当前的`Fragment`. 这对于其他`MenuItemResources`启动常规片段的情况相同。

```
 newFragment = new Task1Fragment();
            startFragment(newFragment, false); 
```

我没有提到`MenuItemResource`（还）中的片段，但它对 URL 和 WebView 非常有效。`value`片段是基于`MenuItemResource` 我不知道你会如何引用你在评论中所做的片段（Task1.java 等），因为你不以`Intents`like开头`Activities`。此外，我不确定为什么要为 Fragments 动态执行此操作（我可以想象这种情况对于 WebViews 是动态的），因为它们无论如何都需要编译，所以这就是我的菜单项是手动添加的原因。

# java - 自定义字体不适用于 java 中的 itextrenderer

> ID：14274678
> 
> 赞同：0
> 
> 时间：2013-01-11T08:59:18.497
> 
> 标签：java, css, flying-saucer

我使用@font-face 将我的自定义字体嵌入到了html 中。这适用于所有浏览器，但是当我尝试通过 itextrender 在 java 自定义字体中将其转换为 pdf 时，它不再使用默认字体，如 Arial。

**CSS代码**：

```
 @font-face {
        font-family: Subaru-Medium;
        src: url('fonts/Subaru-Medium.eot'); /* IE9 Compat Modes */
        src: url('fonts/Subaru-Medium.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
             url('fonts/Subaru-Medium.ttf')  format('truetype'), /* Safari, Android, iOS */
             url('fonts/Subaru-Medium.svg#svgFontName') format('svg'); /* Legacy iOS */
        } 
```

**爪哇代码**：

```
public static void writePDF(String HTMLfileName, String PDFFileName, String WhereToSave,String fontDirectory)
    {
        try
        {
            String url = new File(HTMLfileName).toURI().toURL().toString();
            String outputFile = WhereToSave+PDFFileName;
            OutputStream os = new FileOutputStream(outputFile);

            ITextRenderer renderer = new ITextRenderer();
            ITextFontResolver fontResolver=renderer.getFontResolver();
                  fontResolver.addFont("C:\\Users\\benay.debnath\\Desktop\\htmltemplate\\fonts\\Subaru-Medium.ttf", true);

                // fontResolver.addFontDirectory(fontDirectory, true);
                SharedContext scontext=renderer.getSharedContext();
                // scontext.setDPI(72);
                scontext.setDotsPerPixel(12);
                renderer.setDocument(url);
                renderer.layout();
                renderer.createPDF(os);
                os.close();
                System.out.println("status:$:true^#^message:$:PDF    Genarated^#^fileName:$:"+outputFile);
        }catch (Exception e) {
            System.out.println("status:$:false^#^message:$:"+e.getMessage());
        }
    } 
```

任何人都可以帮助我找到我做错了什么？非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-12T07:23:36.127

首先确保您的系统中已经安装了以下字体，如果没有安装字体并在您的代码中添加以下行。

```
public static void writePDF(String HTMLfileName, String PDFFileName, String WhereToSave,String fontDirectory)
    {
        try
        {
            String url = new File(HTMLfileName).toURI().toURL().toString();
            String outputFile = WhereToSave+PDFFileName;
            OutputStream os = new FileOutputStream(outputFile);

            ITextRenderer renderer = new ITextRenderer();
    renderer.getFontResolver().addFont("C:\\Windows\\Fonts\\Calibri.ttf","UTF-8",BaseFont.NOT_EMBEDDED);

                // fontResolver.addFontDirectory(fontDirectory, true);
                SharedContext scontext=renderer.getSharedContext();
                // scontext.setDPI(72);
                scontext.setDotsPerPixel(12);
                renderer.setDocument(url);
                renderer.layout();
                renderer.createPDF(os);
                os.close();
                System.out.println("status:$:true^#^message:$:PDF    Genarated^#^fileName:$:"+outputFile);
        }catch (Exception e) {
            System.out.println("status:$:false^#^message:$:"+e.getMessage());
        } 
```

我也面临着使用上述解决方案解决的同样问题。希望这对你有用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:45:13.593

此问题已解决，问题出在 css 中，我在字体文件（.ttf）中提到了 font-family:"Subaru-Medium" 字体名称为 "Subaru Medium"，因此无法正常工作。现在它工作正常:)

# python - 我应该使用哪种方法来访问文件，为什么？

> ID：14274679
> 
> 赞同：2
> 
> 时间：2013-01-11T08:59:32.397
> 
> 标签：python, file

我在 python 中，有很多方法可以访问文件。

***方法一：***

```
fp = open("hello.txt", "w")
fp.write("No no no");
fp.close()

fp = open("hello.txt", "r")
print fp.read()
fp.close() 
```

***方法二：***

```
open("hello.txt", "w").write("hello world!")
print open("hello.txt", "r").read() 
```

***方法三：***

```
with open("hello.txt","w") as f:
    f.write("Yes yes yes")

with open("hello.txt") as f:
    print f.read() 
```

使用这些是否有特定的优势？

我知道的东西：

*   方法 2 和方法 3 会自动关闭文件，但方法 1 不会。
*   方法 2 没有为您提供执行多项操作的句柄。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T09:08:30.123

您应该使用第三种方法。

编程中有一种常见的模式，在哪里使用您设置的某个对象，运行您的代码，然后再次将其拆除。文件句柄就是一个例子：你必须打开文件，运行你的代码，*然后关闭文件*。最后一个不是可选的——让操作系统知道你已经完成了它，并且让 Python 从它的 IO 缓冲区中刷新所有数据是很重要的。

现在，CPython 是一种引用计数语言。这意味着它会计算“知道”给定对象的代码片段数，以便当计数变为零时，它可以清理所述对象并重用其在内存中的空间。在方法 2 中，文件对象的引用计数变为零，这允许 Python 对其进行清理。并且文件对象的清理方法也会关闭它们。但是，您通常不应该依赖这一点——引用计数是 Python 标准版本的实现细节，并且不能保证您用来运行程序的任何东西都会做同样的事情。这就是为什么你不应该使用方法 2。

方法 1 更好，因为您显式关闭文件——只要您*到达*`.close()`函数调用！如果在该代码块的中间抛出异常，则`close`不会到达，并且不会显式关闭文件。因此，您应该真正将中间代码包装在一个`try... finally`块中。

因此方法 3 是最好的：您使用语句（将 括在一个块中`with`的惯用方式）来关闭文件，因此您不必担心.`.close``finally``try... except`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:04:56.343

我会使用这个，一种扩展版本`method 3`：

```
with open("hello.txt","w+") as f:  
    f.write("Yes yes yes")
    f.seek(0)                  #places the cursor back to the start of the file
    print f.read()             #now read the file 
```

优点：

> 1.  它只打开一次文件
> 2.  w+ 模式允许对同一个文件对象进行读写
> 3.  `with`负责关闭文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:09:37.490

我认为最好采用方法一，因为它是明确的，您可以用`try`and`except block`或方法 3包围它

# android - 为什么在android中使用wifi或手机信号塔访问时位置不准确，但使用GPS却准确

> ID：14274680
> 
> 赞同：0
> 
> 时间：2013-01-11T08:59:33.170
> 
> 标签：android

我想在我的 android 应用程序中访问我当前的位置。最初，我在室内使用 WIFI 和 CELL TOWER 来做到这一点。我使用 GPS 来访问户外的位置。通过 GPS 访问的位置是准确的，但通过 WIFI 访问的位置远离实际位置。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:07:40.483

GPS 系统通过连接到 4 颗不同卫星的响应并对其进行计时来确定您的位置。因此，它需要清晰的天空视野，并且不适用于室内和地下。它还允许它非常准确。

另一方面，WiFi 定位使用由谷歌和其他公司和组织编制的表格，这些公司和组织匿名收集了有关 wifi 热点和连接到这些设备的 GPS 位置的数据。这远不如 GPS 准确。

蜂窝网络定位使用三角测量技术，该技术使用一个或多个手机信号塔来确定设备的大致位置。[这个方法在这里](http://wrongfulconvictionsblog.org/2012/06/01/cell-tower-triangulation-how-it-works/)解释得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-16T22:57:42.793

位置是一个废话。

一般来说，GPS 足够准确，可以让您找到正确的地址——即使这样也不能指望。Wifi 到正确的社区，手机信号塔正确的邮政编码（或邻近的邮政编码）。如果您需要在特定建筑物内定位人员，请使用“室内定位系统”之一。有几个可用于 android，但您需要准备建筑物。

这个帖子里有很多关于三角测量的废话。

旧时测量员和无线电测向仪使用三角测量。GPS、手机信号塔和 wifi 不使用三角测量；他们使用三边测量（或更糟糕的是接近）。三角测量是通过测量角度来确定位置（至少不是三个而是两个角度测量和一个基线距离构成一个三角形）。三边测量或多边测量是通过测量距离来确定位置，在这种情况下，距离是从旅行时间（GPS，一些基于蜂窝网络的定位系统）或接收到的信号强度（蜂窝塔，wifi）得出的。而且通常你没有至少三个塔或路由器来正确地进行三边测量。您可以从两座塔获得一些位置数据，但它有更多的歧义，因为它不知道您在两座塔之间的哪一侧。这两个替代位置可能几乎与蜂窝塔本身一样远。如果您只有一个，那么您只能将位置缩小到塔周围的工作区域（或根据三个天线阵列中的哪一个看到手机，该半径的一个或两个扇区）。

手机信号塔在城市地区可能接近 1/4 英里，在郊区可能相距 1-2 英里，而在农村地区（尤其是位于山顶时）相距高达 22 英里（GSM 时间限制）。因此，如果您碰巧站在塔的底部，最近的手机信号塔可能无法准确定位，但实际上它可能会偏离 1/8 英里到 22 英里。然而，一名妇女被错误地判定犯有谋杀罪并被监禁，因为这种方法 [“精确定位”][1] 她的位置 - 给或取 22 英里。

如果我们在范围内有几个蜂窝塔，我们可以对位置进行三边测量，但准确性将受到基于信号强度的插值的粗糙度和塔之间非常长的基线的限制。信号较弱是因为距离较远，还是因为必须穿过墙壁、树木和灌木，并且必须在建筑物、树木和灌木周围弯曲？信号是否被其他物体反射？还是因为发射信号强度较低？

对于 WiFi，路由器经常位于每个家庭和企业中。因此，它们可能彼此相距 50 英尺。而且很有可能您的位置非常靠近您正在使用或最近的 wifi。由于建筑物过于分散，WiFi 定位在许多地区可能根本无法使用。

WiFi 和基于基站的位置取决于塔和 WiFi 路由器位置的数据库，这通常是不完整的、近似的，有时甚至非常不准确（考虑当您善意购买 WiFi 路由器并将 SSID 保持不变或移动路由器）。谷歌通过驾驶街景货车收集数据以及从用户手机的蜂窝无线电和 GPS 中获取数据来获取这些数据。[Skyhook wifi 位置][2] 准确度估计：1 Wifi：700 英尺，3-4Wifi：150 英尺，密集城市，更多 wifi：50 英尺。谷歌

与 wifi 和基于蜂窝的系统相比，GPS 在卫星和用户之间的距离要大得多，但它是一个更加复杂的系统，从头开始设计为定位系统并使用复杂的定时测量。它几乎可以在地球上的任何地方使用，但可能会遇到沉重的树冠、密集的高楼（摩天大楼）或在建筑物内的问题。以及没有 GPS 芯片的劣质设备。或者关闭 GPS 芯片，因为它会消耗大量电池电量。即使没有 GPS 或蜂窝网络，今天的大多数设备都有 wifi。

按从最差到最好的大致顺序（可能因位置而异）：

*   最近的手机信号塔——相距最多 22 英里，但通常在一英里之内。这是政府通常可以从手机供应商记录中获得的数据。
*   在塔完成的蜂窝塔三边测量（信号强度）。稀有的。如果政府/手机公司知道他们事先知道他们需要但不能追溯，他们可以这样做。
*   手机信号塔三边测量（信号强度）。
    电话有一个“相邻小区”列表及其信号强度。谷歌可以使用它。
*   使用基于网络的定时的蜂窝塔三边测量。
*   最强wifi
*   通过电话完成的信号强度 Wifi 三边测量。
*   GNSS（GPS（美国）、GLONASS（俄罗斯）、Galileo 或北斗/COMPASS（中国）、IRNSS（印度）、QZSS（日本））。精度约为 50 英尺
*   差分 GNSS（WAAS 等系统用于校正）精度约为 10 英尺。
*   新兴的建筑物内定位系统（使用 wifi 路由器或蓝牙低能量信标，其精确位置已知并在建筑物内收集校准数据或可能基于到达时间的系统）。
*   调查质量 GNSS - 在手机中找不到。精度约为 3 英尺。

每种技术的准确性可能会有很大差异，并且不是精确到规定的距离，而是一种概率分布。

对于我拥有的一个专用户外（步道）GPS 接收器与外部天线相结合，有人 [测量][3] 10% 的时间，精度约为 1m，50% 的时间精度约为 2.9m，95 % 的时间精度在 6.9m 以内，99% 的时间精度在 10.1m 以内。1%的时候，这只是令人尴尬的。因此，大多数情况下，它可以将您定位到郊区地块的大小。平均而言，它约为 10 英尺。手机可能使用较新的芯片，但它也有一个更糟糕的天线。

此外，在建筑物内，您可以使用 NFC 标签、二维码、二维条码和蓝牙信标来指定特定位置，例如房间、工作站、企业、部门、结账线等。

[1]：[https://www.techdirt.com/articles/20140908/04435128452/turns-out-cell-phone-location-data-is-not-even-close-to-accurate-everyone-falls-it。 shtml](https://www.techdirt.com/articles/20140908/04435128452/turns-out-cell-phone-location-data-is-not-even-close-to-accurate-everyone-falls-it.shtml)原来手机位置数据甚至不接近准确

[2]：霍华德论坛线程 1383415

[3]： http: [//www.leb.esalq.usp.br/disciplinas/Molin/leb447/Arquivos/GNSS/ArtigoAcuraciaGPSsemAutor.pdf](http://www.leb.esalq.usp.br/disciplinas/Molin/leb447/Arquivos/GNSS/ArtigoAcuraciaGPSsemAutor.pdf) GPS 水平定位精度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:06:53.970

Wi-Fi 和手机信号塔相结合，为您提供 Android 中所谓的 COARSE 精度。默认情况下，这是一个不准确的结果，只是您所在位置的近似值。这种方法给出了更快的结果并且使用了更少的功率，因此给出了一个近似的结果。

GPS 结果在 Android 中称为 FINE 精度，自然是因为使用地图时它的结果更精细、更准确。这伴随着需要更长的计算时间以及使用更多电池电量的后退。

我建议您使用 getBestProvider 方法来确定在任何给定时间哪个提供者是最好的，它将为您提供最准确的位置。不幸的是，如果它使用任何粗精度源，您将不得不忍受一些近似不准确的结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:09:19.093

GPS采用[卫星三角测量](http://en.wikipedia.org/wiki/Global_Positioning_System#Accuracy_enhancement_and_surveying)法。

WIFI/CELL 仅使用塔的位置，并假设您在其区域/范围内的某个地方。

# linux - linux“查找”命令

> ID：14274681
> 
> 赞同：1
> 
> 时间：2013-01-11T08:59:47.460
> 
> 标签：linux, bash, find, sh

我的 bash 脚本有问题。我有这样的事情：

```
find /home -mindepth 1 -maxdepth 1 -not -empty -type d | sort 
```

输出如下：

```
/home/dir1
/home/dir2 
```

我希望输出为：

```
dir1
dir2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:02:09.667

您可以配置输出`-printf`

```
find /home -mindepth 1 -maxdepth 1 -not -empty -type d -printf "%f\n" | sort 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T09:02:54.883

您可以使用[基本名称](http://linux.die.net/man/1/basename)（1）：

```
find /home -mindepth 1 -maxdepth 1 -not -empty -type d -exec basename {} \; |sort 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:03:18.237

只需附加`-exec basename {} \;`到您的查找命令。

```
find /home -mindepth 1 -maxdepth 1 -not -empty -type d -exec basename {} \; | sort 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:03:30.807

`find /home -mindepth 1 -maxdepth 1 -not -empty -type d -exec basename {} \; | sort`

# java - 骆驼与码头

> ID：14274682
> 
> 赞同：2
> 
> 时间：2013-01-11T08:59:52.673
> 
> 标签：java, jetty, apache-camel

我第一次和骆驼一起玩。我的试验项目是编写一个接收 HTTP GET 请求（使用 Jetty）并通过 Thrift 将请求传递到另一台服务器的应用程序。然后将收到的答案传递回客户端。（即，如果您将在 http-get 请求和启用 Thrift 的服务器之间编写数据开关或中间件应用程序。）

我有完美的非骆驼版本，我现在正试图把骆驼等效的放在一起。现在我只是试图将码头请求写入文件。

这是我到目前为止所拥有的：

```
public class CamelMedicalService {

    public static void main(String[] args) throws Exception {
        CamelContext context = new DefaultCamelContext();
        context.addRoutes(new MedicalServiceRouteBuilder());
        context.start();

        // Wait a minute and then stop all.
        Thread.sleep(TimeUnit.MINUTES.toMillis(1));
        context.stop();
    }
} 
```

和 RouteBuilder：

```
public class MedicalServiceRouteBuilder extends RouteBuilder {

    @Override
    public void configure() throws Exception {
        from("jetty:http://localhost:8080").to("file://test");
    }
} 
```

我目前收到 java.lang.ClassNotFoundException: org.eclipse.jetty.util.component.Destroyable... 我不知道如何解决这个问题。**我应该如何设置它以便我可以接收 http 请求并将其传递给文件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:43:36.910

就像在评论中一样，请检查 jetty-util.jar 是否在类路径中，如果没有，您可以将其复制到您的 WEB-INF/lib 目录中。

# php - 尝试运行 Zend 应用程序时，我的包含路径有什么问题？

> ID：14274686
> 
> 赞同：0
> 
> 时间：2013-01-11T09:00:00.630
> 
> 标签：php, apache, zend-framework

我对我的 Zend 应用程序有点困惑......我有一个完整的应用程序在使用 Zend 框架开发的不同服务器上运行，现在我必须对软件进行一些更改。我已经从服务器下载了所有代码并完成了所有必要的配置，但我仍然从日志文件中收到以下错误：

```
==> error.log <==
[Fri Jan 11 10:49:53 2013] [error] [client 127.0.0.1] PHP Warning:  require_once(Zend/Application.php): failed to open stream: No such file or directory in /home/jonne/Koulu/exercise_project/ProjectFiles/languageTest/application/application.php on line 18
[Fri Jan 11 10:49:53 2013] [error] [client 127.0.0.1] PHP Fatal error:  require_once(): Failed opening required 'Zend/Application.php' (include_path='/home/jonne/Koulu/exercise_project/ProjectFiles/languageTest/library:.:/usr/share/php:/usr/share/pear') in /home/jonne/Koulu/exercise_project/ProjectFiles/languageTest/application/application.php on line 18

==> access.log <==
127.0.0.1 - - [11/Jan/2013:10:49:53 +0200] "GET / HTTP/1.1" 500 274 "-" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:18.0) Gecko/20100101 Firefox/18.0" 
```

我对此感到困惑，因为包含路径对我来说似乎正确？...

在路径`/home/jonne/Koulu/exercise_project/ProjectFiles/languageTest/library` 中，我有两个指向位置的符号链接：

```
Zend -> /home/jonne/Koulu/exercise_project/ZendFolder/Zend
ZendX -> /home/jonne/Koulu/exercise_project/ZendFolder/ZendX 
```

这是 Zend 和 ZendX 两个文件夹的内容：

禅：

```
drwxrwxrwx  2 jonne jonne  4096 Jan 11 10:12 bin
-rwxrwxrwx  1 jonne jonne   928 Jun 13  2012 composer.json
drwxrwxrwx  3 jonne jonne  4096 Jan 11 10:12 demos
drwxrwxrwx  3 jonne jonne  4096 Jan 11 10:12 externals
drwxrwxrwx  5 jonne jonne  4096 Jan 11 10:12 extras
drwxrwxrwx  2 jonne jonne  4096 Jan 11 10:12 incubator
-rwxrwxrwx  1 jonne jonne  3438 Apr  7  2009 INSTALL.txt
drwxrwxrwx  3 jonne jonne  4096 Jan 11 10:12 library
-rwxrwxrwx  1 jonne jonne  1548 Jan  6  2010 LICENSE.txt
-rwxrwxrwx  1 jonne jonne 12209 Jun 22  2012 README.txt
drwxrwxrwx  3 jonne jonne  4096 Jan 11 10:13 resources
drwxrwxrwx  2 jonne jonne  4096 Jan 11 10:12 src
drwxrwxrwx  4 jonne jonne  4096 Jan 11 10:12 tests 
```

ZendX：

```
drwxrwxrwx 3 jonne jonne 4096 Jan 11 10:13 Application
drwxrwxrwx 3 jonne jonne 4096 Jan 11 10:13 Console
drwxrwxrwx 4 jonne jonne 4096 Jan 11 10:13 Db
-rwxrwxrwx 1 jonne jonne 1137 Sep 17 11:38 Exception.php
drwxrwxrwx 5 jonne jonne 4096 Jan 11 10:13 JQuery
-rwxrwxrwx 1 jonne jonne 4958 Sep 17 11:38 JQuery.php 
```

这是我的 application.php 中的代码：

```
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'development'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';
// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'

);

$application->bootstrap()->run(); 
```

这是application.ini的内容

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
;resources.frontController.defaultControllerName = "login"
;resources.frontController.defaultAction = "login"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.view = ""
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts"
resources.layout.layout = "main"

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

有没有人有什么建议？为什么它仍然抱怨找不到文件？！...

谢谢=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:15:17.087

将您的“Zend”符号链接更改为指向：

```
Zend -> /home/jonne/Koulu/exercise_project/ZendFolder/Zend/library/Zend 
```

'ZendX' 看起来是正确的。ZF 应该能够`Zend/Application.php`在包含路径上找到，但您的符号链接指向 ZF 完整下载的根目录。

# ruby - 命令行选项

> ID：14274693
> 
> 赞同：4
> 
> 时间：2013-01-11T09:00:52.097
> 
> 标签：ruby, command-line

我对 Ruby 命令行选项感到困惑。两者都`-C dir`删除`-X dir`目录，但它们有何不同？

*   与有何`-x [dir]`不同？`-X dir`
*   做什么`-I dir`（我知道它添加`dir`为加载库的目录）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:50:33.777

让我们在主目录中创建一个 test.rb 文件，内容如下：

```
hello
#!/usr/bin/ruby
p "here" 
```

现在如果我们尝试运行它：

```
ruby -C /home/my_home test.rb 
```

这意味着将工作目录更改为 /home/my_home 并运行 test.rb 你会得到一个错误：

```
test.rb:1:in `<main>': undefined local variable or method `hello' for main:Object (NameError) 
```

如果我们运行它：

```
ruby -x /home/my_home test.rb 
```

我们将打印“这里”并且没有错误。-x 和 -C 之间的**主要**区别在于 -x 删除了`#!/usr/bin/ruby`行前的所有内容。使用 -x 时，您也不必将目录设置为 cd。因为 -x 的主要目的是删除行，如果需要，它也只包含 -C 功能。

```
cd /home/my_home; ruby -x test.rb 
```

见（红宝石--帮助）

*   -Cdirectory *cd 到目录，在执行脚本之前*
*   -x[directory] *​​去掉 #!ruby 行之前的文本，也许 cd 到目录*

至于-I。您可以提供 ruby​​ 将搜索您执行或需要的文件的目录。

```
ruby -x test.rb 
```

除非您位于 /home/my_home，否则 Ruby 将找不到 test.rb 文件。但是，如果您添加 -I ruby​​ 也会在“/home/my_home”中查找 test.rb。

```
ruby -x -I/home/my_home test.rb 
```

与 -C 的不同之处在于它在执行之前不会更改目录，而只会在那里搜索文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T09:18:09.530

-C 和 -X 选项执行相同的工作（执行前更改目录）。没有区别。

-I 选项用于将路径添加到 $LOAD_PATH

例如：假设您在 my_lib 目录 my_print_class.rb 中有名为 my_print_class.rb 的 ruby​​ 文件：(~/my_lib/my_print_class.rb)

```
class MyPrintClass
   def self.my_print(str)
     puts str
   end
end 
```

现在你在 home(~) 中有 my_call.rb。

~/my_call.rb:

```
 require 'my_print_class'
 MyPrintClass.my_print("Hello world") 
```

为此，您需要 my_print_class 的路径，因此您使用 ruby​​ -I my_lib my_call.rb

[http://www.tutorialspoint.com/ruby/ruby_command_line_options.htm](http://www.tutorialspoint.com/ruby/ruby_command_line_options.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T09:28:11.643

正如您可以从`man ruby`或一些在线文档中看到的那样，`-C`并且`-X`是相同的。

并将`-I`向 ruby​​ LOAD_PATH 添加一些目录。例如，我有`./a/my.rb`和`./test.rb'这样的：

```
# ./a/my.rb
def hello
  puts 'hello from a/my'
end

# ./test.rb
require 'my'
hello 
```

我执行`ruby -I ./a test.rb`. 这将打印`hello from a/my`. 没有`-I`，ruby 会报错：`cannot load such file -- my`，因为`./a`不在当前的 LOAD_PATH 中。

# c++ - 如何在没有压缩的情况下在opencv中录制视频

> ID：14274695
> 
> 赞同：1
> 
> 时间：2013-01-11T09:00:56.177
> 
> 标签：c++, opencv

我正在尝试使用opencv录制视频，帧为1920 * 180，25帧/秒，我的问题是，当我选择不压缩帧时，我没有得到视频，我只得到一张avi格式的图片！ ！这是我的代码：

```
 using namespace cv;

 int main (){
int key = 0;
Mat frame;
cv::VideoCapture cap(0);
cap>>frame;
    cv::VideoWriter record("video.avi",-1, 25, frame.size(), true);
        while(key!=27){
    cap>>frame;
    //cv::VideoWriter record("video.avi",-1, 25, frame.size(), true);

    record<<frame;
    imshow("",frame);
    key=waitKey(1);
}
frame.release();
cv::destroyAllWindows();

return 0 ;
  } 
```

我使用 DeckLink SDI 卡来获取视频，当使用 Media Express 录制视频时它可以工作吗？任何想法

# mongodb - 来自 grails/groovy 的 mongodb 通配符查询

> ID：14274697
> 
> 赞同：0
> 
> 时间：2013-01-11T09:00:58.977
> 
> 标签：mongodb, grails, groovy

从我的 Grails 应用程序在 MongoDB 中发出通配符查询时遇到了一些问题。

基本上我现在这样做的方式是发出`find`带有查询参数数组的查询：

```
db.log.find(criteria)    -> where criteria is an array [testId:"test"] 
```

只要我严格查询实际值，它就可以正常工作。但是，为了好玩，我尝试使用通配符搜索：

```
db.log.find(criteria) -> this time critera = [testId:/.*te.*/] 
```

然而，这将在查看 Mongo 查询日志后：

```
 query: { query: { testId: "/.*te.*/" } 
```

因此，使查询不是通配符搜索，而是将其作为字符串进行查询。有没有办法在某种意义上仍然使用这种查询概念来解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T17:44:23.183

使用 Groovy Pattern 快捷方式`~`来指定您的查询是正则表达式。

```
db.log.find(['testId': ~/.*te.*/]) 
```

有关更多信息，请参阅此[博客文章](http://blog.paulopoiati.com/2011/01/29/groovy-gmongo-tips-and-tricks/#regex_based_search)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T20:53:58.897

这对我有用：在你的 groovy 文件中：

```
db.collectionName.find([fieldName:[$regex:'pattern']]) 
```

或多或少，使用常规的 mongodb 查询，但将 {} 替换为 []。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:36:47.000

要使用正则表达式查询，请使用 $regex[运算符定义查询条件](http://docs.mongodb.org/manual/reference/operators/)

```
def regexCondition = ['$regex': '/.*te.*/']
def criteria = ['testId': regexCondition]
db.log.find(criteria) 
```

# javascript - jQuery 将元素包裹在很多元素周围

> ID：14274699
> 
> 赞同：3
> 
> 时间：2013-01-11T09:01:11.730
> 
> 标签：javascript, jquery

我有以下 html 并想用 javascript 或 jquery 包装所有 li 的 div（它没有定义有多少 li）

```
<div class='example1'>
  <div class='example2'>
  <h1>Test</h1>
  <div class='example3'>
  <li></li>
  <li></li>
  ...
  <li></li>
  <li></li> 
</div> 
```

结果应该看起来像

```
<div class='example1'>
  <div class='example2'>
  <h1>Test</h1>
  <div class='example3'>
  <div class='lis'>
    <li></li>
    <li></li>
    ...
    <li></li>
    <li></li>
  </div>    
</div> 
```

我无法在现有的 html 中添加任何其他内容 :(

你能帮我么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T09:02:44.423

你可以使用[wrapAll](http://api.jquery.com/wrapAll/)：

```
$('li').wrapAll('<div class=lis></div>'); 
```

但是 HTML 规范规定[`LI`元素只允许在`UL`,`OL`和`MENU`](http://www.w3.org/TR/html-markup/li.html), 中不允许`DIV`。

[示范](http://jsfiddle.net/gm6zx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:29:21.990

用这个 ：

```
(function($) {
$.fn.customWrap = function(wrapper) {
    if (!this.length) return this;
    var wrap = $(wrapper),
        sel = this.selector || this.get(0).nodeName.toLowerCase();
    return this.each(function() {
        var more = $(this).next(sel).length;
        console.log(this,more);
        $(this).replaceWith(wrap).appendTo(wrap);
        if (!more) wrap = $(wrapper);
    });
}
})(jQuery); 
```

并像这样调用：

```
$(function() {
$('li').customWrap('<div class="lis"></div>');
}); 
```

或者您可以使用[jQuery wrapAll](http://api.jquery.com/wrapAll/)但这会将所有内容都包装`li` 在页面中..而不是连续的..

[在此处（使用 wrapAll）](http://jsfiddle.net/BpBZj/1/)和[此处（自定义函数）](http://jsfiddle.net/BpBZj/2/)查看差异

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:04:57.610

您可以使用[$.wrap()](http://api.jquery.com/wrap/)将匹配元素集包装在另一个元素中

# javascript - JQuery 淡入页面

> ID：14274701
> 
> 赞同：0
> 
> 时间：2013-01-11T09:01:59.267
> 
> 标签：javascript, jquery, fade

我有一堆 HTML 页面，它们是单独的文件，但我想在每个页面之间进行简单的淡入/淡出。

我使用了以下代码：

```
$("#content").css("display", "none");

$("#content").fadeIn(2000);

$("ul.menu li a").click(function(event){
    event.preventDefault();
    linkLocation = this.href;
    $("#content").fadeOut(1000, redirectPage);      
});

function redirectPage() {
    window.location = linkLocation;
} 
```

在这个阶段我已经将它绑定到我的主菜单，内容是我的页眉和页脚之间的 div（我不想应用效果）

但问题在于它会闪烁一点，而且它会在消失之前短暂显示内容，然后再次淡入。

有没有更好/更简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:12:05.080

试试这个代码：

```
$("#content").css("display", "none");

$("#content").fadeIn(2000);

$("ul.menu li a").click(function(event){
    event.preventDefault();
    linkLocation = this.href;
    $("#content").fadeOut(1000, redirectPage);      
});

function redirectPage() {
    $("#content").css('visibility' : 0); // use to remove the content - it won't be diplayed
    window.location = linkLocation;
} 
```

# mysql - 在第二个表中加入一个已知变量的表

> ID：14274702
> 
> 赞同：0
> 
> 时间：2013-01-11T09:02:00.233
> 
> 标签：mysql, sql, join, left-join

我的 SQL 查询有问题。

情况如下：

我有两张桌子，A和B。

表 A：

```
---------------------------------------------
*| A.id  |  A.t_id  |  A.f_id  |  A.type    |*
---------------------------------------------
 |   1   |    32    |     3    |   Loading  |
 |   2   |    34    |     5    |  Discharge |
 |   3   |    32    |     3    |  Discharge |
--------------------------------------------- 
```

表 B：

```
-----------------------
*| B.id  | B.shipid |*
-----------------------
 |   1   |    1     |
 |   2   |    1     |
 |   3   |    2     |
----------------------- 
```

我需要 A 中的所有行，其中 A.type=Loading, A.t_id 是 B.id -> B.shipid=2 和 . 到目前为止，我的查询是：

```
SELECT *  FROM A, B WHERE  (A.type='Loading' AND B.shipid=2 AND A.t_id=B.id) 
```

但这不会返回正确的记录（实际上没有），而数据应该适合查询。我的查询哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:05:15.657

尝试这个：：

```
SELECT 
*  
FROM 
A
INNER JOIN B ON A.t_id=B.id

WHERE  A.type='Loading' AND B.shipid=2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:07:18.243

如果您需要 A 中的所有行，那么听起来像是左连接...所以无论如何也请提供您的预期结果以确认..

```
SELECT A.*  FROM A
INNER JOIN B 
ON A.f_id=B.id
AND A.type='Loading' AND B.shipid=2
; 
```

由于您有条件获取加载记录，唯一的问题是 id 与上述评论指出的不匹配..

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/528c5/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:04:59.773

尝试这个

```
SELECT * FROM A a JOIN B b ON a.t_id = b.id WHERE b.shipid = 2 AND a.type = 'Loading'
-- a and b are aliases for A and B. If you have any bigger table names, it's useful 
```

你应该查找`SQL JOIN` [http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

# mysql - 使用 Date.commercial 将 Mysql 周转换为日期

> ID：14274703
> 
> 赞同：2
> 
> 时间：2013-01-11T09:02:08.343
> 
> 标签：mysql, ruby-on-rails

在从数据库中获取对象之后

```
Object.select('week(created_at) as week, year(created_at) as year') 
```

它返回从 0 到 53 的周，然后从中创建一个 Date 对象

```
Date.commercial(x.year,x.week,1) 
```

由于 0 和 53 no of week，它报告“无效日期”错误。

我也试过这个。

```
Date.strptime("#{x.year}-#{x.week+1}-1","%Y-%W-%w") 
```

但它也因 x.week+1（例如 53+1）而崩溃。寻找一线解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:29:12.707

我认为你的用法是错误的

我从（[这里](http://ruby-doc.org/stdlib-1.9.2/libdoc/date/rdoc/Date.html#method-c-commercial)）在下面找到了这个。

可以肯定的是，请发送您的 ruby​​ 版本以及您的 x.year 和 x.week 输出。

```
商业(y=-4712, w=1, d=1, sg=ITALY) 点击切换来源

为由年 y、周 w 和周 d 指定的商业日期创建一个新的 Date 对象。

星期一是第 1 天；星期日是第 7 天。

w 和 d 可以为负数，在这种情况下，它们分别从年末和周末倒数。但是，不执行回绕，并且无效值会导致引发 ArgumentError。

y 默认为 -4712，w 为 1，d 为 1；这是朱利安天数第 0 天。

sg 指定日历改革日。强调文本
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:29:22.207

不要`x.week`在你的`strptime`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T13:52:48.063

您应该以 ISO 8601 格式从数据库中获取日期。此格式返回从 1 到 52 的周，这符合`#commercial`预期的输入。

在红宝石中：

```
ISO 8601 week-based year and week number:
The week 1 of YYYY starts with a Monday and includes YYYY-01-04.
The days in the year before the first week are in the last week of
the previous year.
  %G - The week-based year
  %g - The last 2 digits of the week-based year (00..99)
  %V - Week number of the week-based year (01..53) 
```

来自[https://ruby-doc.org/stdlib-2.5.1/libdoc/date/rdoc/Date.html#method-i-strftime](https://ruby-doc.org/stdlib-2.5.1/libdoc/date/rdoc/Date.html#method-i-strftime)

在 MySQL 中：

```
%V  Week (01..53), where Sunday is the first day of the week; WEEK() mode 2; used with %X
%v  Week (01..53), where Monday is the first day of the week; WEEK() mode 3; used with %x
%X  Year for the week where Sunday is the first day of the week, numeric, four digits; used with %V
%x  Year for the week, where Monday is the first day of the week, numeric, four digits; used with %v

SELECT DATE_FORMAT('1999-01-01', '%X %V');
+------------------------------------+
| DATE_FORMAT('1999-01-01', '%X %V') |
+------------------------------------+
| 1998 52                            |
+------------------------------------+ 
```

来自[https://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format](https://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)

# ios - 在 iOS5.1/6 中没有调用 presentViewController 和 viewDidAppear

> ID：14274706
> 
> 赞同：0
> 
> 时间：2013-01-11T09:02:14.380
> 
> 标签：ios, uiviewcontroller, viewdidappear

我在父视图控制器 A 中有一个视图控制器 B。两个视图同时显示。

在视图控制器 B 中，我尝试使用以下方法呈现一个新的视图控制器：

```
- (void) buttonClicked:(id)sender
{
    MyViewcontroller *vc = [[MyViewcontroller alloc] init];
    [self presentViewController:vc animated:YES completion:nil];
} 
```

视图控制器在 iOS6 中正确显示，我`MyViewController`使用以下方法关闭：

```
- (IBAction)backButtonPressed:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

但是 iOS 5.1 和 iOS 6 之间是有区别的。

QN1：解除后，视图控制器 A 和 B`viewDidAppear`不会被调用。它应该被触发吗？

QN2：我无法`MyViewController`在 iOS 5.1.1 中出现。除非我将视图控制器 B 作为子容器添加到 A：

```
[self addChildViewController:vcB];
[self.view addSubview:vcB.view]; 
```

通过添加子控制器，我可以`MyViewController`显示和查看控制器 A&B viewDidAppear 将在它被解雇时被调用。`viewDidAppear`使用 iOS6 时也会调用。

我不确定这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:54:53.943

答案 1：`viewDidAppear`当您关闭模态视图时不会被调用。

答案 2：如果您`MyViewController`从“ `View-controller B`”呈现“”，那么视图控制器 B 的视图应该在视图层次结构中。

从这里您可以获得更多信息。[如何从其他视图控制器呈现视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

# java - Mysql 作为 java netbeans 的数据库

> ID：14274716
> 
> 赞同：-3
> 
> 时间：2013-01-11T09:02:52.120
> 
> 标签：java, mysql, database

我正在考虑使用 MySQL 作为我正在从事的项目的数据库。这个项目的一个非常重要的要求是，如果我使用安装程序或 jar 文件下载它，如果我打开我的程序，我的数据库连接会一直存在吗？或者是否有要求和安装需要。我不想开始使用 MSQL 的项目并意识到它不能满足这个要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:09:34.787

MySQL 还需要安装服务器。像 SQLite 这样的数据库不需要任何安装。

连接是否建立与此完全无关。您需要建立一个或多个（池化）（很可能是 jdbc）连接并处理它们的生命周期。这意味着如果连接丢失或主动关闭，您的软件必须以适当的方式做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:12:43.723

您的应用程序将只请求与 MySQL 的连接，如果可能的话，它会给它一个连接，因此您不必担心这一点。

你应该担心的是这些：

*   您客户端 PC 上的 MySQL 数据库与您的连接用于连接到数据库的用户名和密码相同。
*   您的应用程序可能需要正常运行的任何表和/或存储过程。

此外，您需要您的客户在他/她的机器上安装 MySQL 服务器。您可能想让您的应用程序向用户询问一些数据库凭据，以便它可以连接到数据库。如果未找到，您的应用程序还应检查并创建它使用的任何表或其他结构。

您可能会考虑其他数据库，例如可以嵌入到您的 JAR 文件中的[H2 ，如下](http://www.h2database.com/html/main.html)[所示](http://www.h2database.com/html/main.html)。

# ruby-on-rails - 为什么我不能使用 potgreSQL 测试数据库，但是开发 postgreSQL 正在工作？

> ID：14274724
> 
> 赞同：0
> 
> 时间：2013-01-11T09:03:16.033
> 
> 标签：ruby-on-rails, database, postgresql

我正在尝试开始使用 PostgreSQL，但遇到了一些麻烦。

我为开发创建数据库并且它正在工作。我已经创建了表格并添加了一些对象。我按照这篇文章创建数据库 - [http://blog.deliciousrobots.com/2011/12/13/get-postgres-working-on-ubuntu-or-linux-mint/](http://blog.deliciousrobots.com/2011/12/13/get-postgres-working-on-ubuntu-or-linux-mint/)

这是代码，我运行以创建 test_database

```
denmed@denmed:~/projects/internet_shop$ sudo -u postgres createdb -O denys    internet_shop_test
denmed@denmed:~/projects/internet_shop$ psql -d internet_shop_test -U denys -WPassword for user denys: 
denmed@denmed:~/projects/internet_shop$ psql -d internet_shop_test -U denys -W
 Password for user denys: 
 psql (9.1.7)
 Type "help" for help.
 internet_shop_test=> 
```

这意味着我创建了数据库并且可以使用它吗？

然后，在另一个控制台（当我在另一个控制台中登录测试数据库时）我运行命令

```
 rake test 
```

并得到这个错误（我会剪掉它）：

```
 Errors running test:units! #<ActiveRecord::StatementInvalid: PG::Error: ERROR:      
database "internet_shop_test" is being accessed by other users
DETAIL:  There are 1 other session(s) using the database.
 : DROP DATABASE IF EXISTS "internet_shop_test">
 Errors running test:functionals! #<RuntimeError: Command failed with status (1): [ruby 
-I"lib:test" -I"/home/denmed/.rvm/gems/ruby-1.9.2-p320/gems/rake-10.0.3/lib" "/home    
/denmed/.rvm/gems/ruby-1.9.2-p320/gems/rake-10.0.3/lib/rake/rake_test_loader.rb" 
"test/functional/**/*_test.rb" ]> 
```

好的，它告诉我我正在访问数据库。然后我关闭登录的测试数据库终端并再次运行 rake test 并得到这个：

```
 PG::Error: ERROR:  permission denied to create database
  ...
 Couldn't create database for {"adapter"=>"postgresql", "encoding"=>"unicode", 
"database"=>"internet_shop_test", "pool"=>5, "username"=>"denys", 
"password"=>"********"}
 ...
PG::Error: FATAL:  database "internet_shop_test" does not exist 
```

这是我用于开发和测试数据库的 database.yml：

```
 development:
  adapter: postgresql
  encoding: unicode
  database: internet_shop_development
  pool: 5
  username: denys 
  password: ********

test:
  adapter: postgresql
  encoding: unicode
  database: internet_shop_test
  pool: 5
  username: denys 
  password: ******** 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:32:36.950

用户“denys”没有创建数据库的权限。错误很明显，

我不知道您是否可以告诉 rails 使用不同的（超级用户）帐户创建数据库，或者只是跳过创建数据库步骤。

哦 - 你也不需要 psql 上的“-W”标志，如果它想要一个密码，它会要求你输入密码。

# android - 通过输入元素选择文件后Android浏览器刷新页面

> ID：14274727
> 
> 赞同：33
> 
> 时间：2013-01-11T09:03:21.073
> 
> 标签：android, mobile-website, html-input

我有一个包含“文件”类型的输入元素的移动网页，以允许用户将图像文件上传到服务器。该页面在 iOS 和 Chrome 浏览器中的 Nexus 4 (Android 4.2.1) 上运行良好。

当我使用带有默认浏览器的三星 S3（Android 4.0.4）时，单击“选择文件”按钮会按预期打开图像选择对话框，但是在我选择图像并关闭对话框后，网页会刷新，所以我丢失选择的图像。有没有其他人看到过这种行为？任何解决方法的建议？

我使用的输入元素是相当标准的，看起来像这样：

```
<input id="addPhoto" type="file" accept="image/*"/> 
```

即使没有“接受”属性，我也会遇到同样的问题。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-15T14:39:56.990

看看这个问题：

[https://code.google.com/p/android/issues/detail?id=53088](https://code.google.com/p/android/issues/detail?id=53088)

基本上，似乎正在发生的事情是这样的：

*   Android 没有足够的内存供文件选择器或相机应用使用。

*   它通过关闭浏览器来释放内存

*   关闭文件选择器/相机后，再次打开浏览器，触发页面刷新，这使得整个文件选择练习无用。

在我看来，这超出了任何基于浏览器的解决方案的控制范围，**但我希望在这个假设上被证明是错误的**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:40:03.997

我在使用 Andriod 2.3.6 的手机上遇到了同样的问题。我的一位同事在他的手机上没有问题（不记得正在运行什么）。他认为这可能是内存问题。如果手机没有足够的可用内存，浏览器实际上可能会在选择图片后被迫重新加载页面，这与目的不符。我还不能确认这是问题所在，但我的手机的可用内存确实比他的少得多。

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2013-01-14T18:19:24.407

你可以试试这个 JQuery 方法：[http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

![看起来也不错](../Images/c3fea10b3c6938ada5897f03729fbafb.png)

Uploadify 看起来也很有希望：[http ://www.uploadify.com/](http://www.uploadify.com/)

这是它的演示：[http ://www.uploadify.com/demos/](http://www.uploadify.com/demos/)

我认为问题不在于您的代码，而在于您使用的默认 Android 浏览器。

# asp.net - asp.net中有多少位的sessionid

> ID：14274728
> 
> 赞同：2
> 
> 时间：2013-01-11T09:03:21.570
> 
> 标签：asp.net, httpcontext, sessionid

我想确保 asp.net 中的 sessionid 至少有 128 位。

有谁知道 ASP.NET_SessionId 有多少位？

你能在 IIS 的某个地方找到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:18:33.570

ASP.NET 使用 120 位标识符来跟踪每个会话。

您可以阅读以下文章。
[http://support.microsoft.com/kb/899918/en-us](http://support.microsoft.com/kb/899918/en-us)
[http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net](http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net)
[http://www.codeproject.com/文章/7182/ASP-NET 中的会话管理选项](http://www.codeproject.com/Articles/7182/Session-management-options-in-ASP-NET)

# javascript-events - 屏幕键盘问题上的纯 Javascript

> ID：14274729
> 
> 赞同：0
> 
> 时间：2013-01-11T09:03:24.083
> 
> 标签：javascript-events

我有一个屏幕键盘和 5 个输入框。我的问题是当我专注于输入框并输入内容时，什么都不会发生。每次我关注输入框时，我都想添加输入。

这是我的简单代码。此代码仅适用于 1 个输入字段。我想让这项工作适用于 5 或​​ 4 个输入字段。

```
function writeKey(key){
  if(key){
    if(key == "Enter"){
      key = "10";
     } else if(key == "tab"){
      document.getElementById("feld1").value += "\t ";
    } else if(key=="backspace"){
      document.getElementById("feld1").value=document.getElementById("feld1").value.slice(0,-1);
    } else if(key==" "){
      document.getElementById("feld1").value += " ";
    } else {
      document.getElementById("feld1").value += String.fromCharCode(key);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:15:13.077

查看指向当前焦点元素的[document.activeElement 。](https://developer.mozilla.org/en-US/docs/DOM/document.activeElement#Browser_compatibility)

您可以使用它重写您的代码：

```
function writeKey(key){
  var el = document.activeElement;
  if(key){
    if(key == "Enter"){
      key = "10";
     } else if(key == "tab"){
      el.value += "\t ";
    } else if(key=="backspace"){
      el.value = el.value.slice(0,-1);
    } else if(key==" "){
      el.value += " ";
    } else {
      el.value += String.fromCharCode(key);
    }
  }
} 
```

演示[在这里](http://jsfiddle.net/XBppR/3/)

请注意，您应该运行 writeKey 而不是 onclick 而是 onmousedown。否则焦点将已经从输入中移动。演示反映了这一点。

这是它的html代码：

```
<div onmousedown="writeKey('a');return false">Click key</div>
<input type="text" />
<input type="text" />
<input type="text" /> 
```

另外，看看`return false;`writeKey 被调用之后。它将阻止默认浏览器操作并单击一个键，您不会失去输入的焦点。没有它，您将需要在每次按键后将焦点设置在一个元素上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:13:12.727

我不知道您实际上是如何调用该`writeKey`方法的。你可以像这样重写你的代码：

```
function writeKey(key, fieldId){
  if(key){
    if(key == "Enter"){
      key = "10";
     } else if(key == "tab"){
      document.getElementById(fieldId).value += "\t ";
    } else if(key=="backspace"){
      document.getElementById(fieldId).value =
          document.getElementById(fieldId).value.slice(0,-1);
    } else if(key==" "){
      document.getElementById(fieldId).value += " ";
    } else {
      document.getElementById(fieldId).value += String.fromCharCode(key);
    }
  }
} 
```

或者您可以传递文件本身：

```
function writeKey(key, field) {
    ...
    field.value += "\t";
    ...
} 
```

# c# - 如何使用 ADO.NET 连接到 SQL Server CE

> ID：14274732
> 
> 赞同：1
> 
> 时间：2013-01-11T09:03:41.773
> 
> 标签：c#, .net, sql, ado.net, sql-server-ce

我有一个连接到我的数据库的`EntityModel`创建。`ADO.NET`我想填写一个`DataGridview`。为此，我遵循以下代码：

```
using System.Data;
using System.Data.SqlServerCe;
using System.Windows.Forms;

namespace WindowsFormsApplication5
{
public partial class Form1 : Form
{
public Form1()
{
    InitializeComponent();
    FillData();
}

void FillData()
{
    // 1
    // Open connection
    using (SqlCeConnection c = new SqlCeConnection(
    Properties.Settings.Default.DataConnectionString))
    {
    c.Open();
    // 2
    // Create new DataAdapter
    using (SqlCeDataAdapter a = new SqlCeDataAdapter(
        "SELECT * FROM Animals", c))
    {
        // 3
        // Use DataAdapter to fill DataTable
        DataTable t = new DataTable();
        a.Fill(t);
        // 4
        // Render data onto the screen
        dataGridView1.DataSource = t;
    }
    }
}
} 
```

此代码来自网页，因此我正在尝试将其调整为我的`ADO.NET`模型。所以，由于我不确定它的`Properties.Settings.Default.DataConnectionString`来源，我认为它是用于连接到我的数据库的连接字符串，所以，在我之后`Entity Model`，我写了这个来获取连接字符串：

```
SqlCeConnection c = new SqlCeConnection(db.Connection.ConnectionString); 
```

db是我**这样**`Entity Model`创建的：

```
private dbEntities db = new dbEntities(); 
```

但这会`db.Connection.ConnectionString`返回：**"name= dbEntities"**，所以我将其更改为`db.Connection.DataSource`，返回此字符串：

`"C:\\Users\\user\\Documents\\Visual Studio 2010\\Projects\\ProjectName\\MySQLProject\\bin\\Debug\\db.sdf" string`

但它说字符串格式没有调整（显然......）。我正在使用 SQL Server，但我不确定如何获得该连接:(

是这样`Properties.Settings.Default.DataConnectionString`说的：

```
 Properties.Settings.Default.dbConnectionString  'System.Windows.Forms.PropertyStore' 
```

不包含“设置”的定义，并且找不到接受“System.Windows.Forms.PropertyStore”类型的第一个参数的扩展方法“设置”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:06:36.887

该消息并不意味着连接字符串格式错误！是说您的项目中没有设置。

您确定您创建了相应的设置吗？要编辑它们，请双击项目中的“属性”条目，然后切换到“设置”选项卡。如果没有条目`dbConnectionString`，则创建一个。

# django - 如何使用 Tastipie 在 Django 中实现 oAuth

> ID：14274738
> 
> 赞同：0
> 
> 时间：2013-01-11T09:04:22.617
> 
> 标签：django, oauth, tastypie

如何使用 Tastipie API 框架在 django 中实现 oAuth。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:05:44.807

Tastypie 允许您使用 OAuthAuthentication 类进行身份验证。

```
class UserResource(ModelResource):
class Meta:
    queryset = User.objects.all()
    authentication = OAuthAuthentication() 
```

使用此方法，您的资源将期望收到访问令牌。您需要[django-oauth-plus](http://code.larlet.fr/django-oauth-plus/wiki/Home)，它为您提供获取用户访问令牌的完整功能。

# c# - C#：使用类泛型参数覆盖泛型方法

> ID：14274740
> 
> 赞同：4
> 
> 时间：2013-01-11T09:04:32.457
> 
> 标签：c#, generics

为什么这是不可能的？

```
abstract class A
{
    public abstract T f<T>();
}

class B<T> : A
{
    public override T f()
    {
        return default (T);
    }
} 
```

错误：

```
does not implement inherited abstract member 'A.f<T>()'
no suitable method found to override 
```

我知道签名必须相同，但从我的角度来看，我认为没有理由认为这是被禁止的。我也知道另一种解决方案是`A`通用，而不是它的方法，但由于某种原因它不适合我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:10:39.720

这是不可能的，因为这些方法具有不同的签名。`A.f`是泛型方法而`B.f`不是（它仅使用类泛型参数）。

你可以看到这个表单调用者视角：

```
A variableA = new A();
variableA.f<int>();

B<int> variableB = new B<int>();
variableB.f(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T09:12:22.240

`B`不履行合同`A`。

`A`允许`f`使用任何类型参数调用以返回该类型。`B`不允许`f`使用类型参数调用，只返回 的`B`类型参数的类型。

例如，假设您有 a`B<int>`并将其强制转换为 an `A`（这应该是可能的，因为它继承自它）。然后你调用`f<bool>()`它（这应该是可能的，因为它是一个`A`）。然后怎样呢？底层`B<int>`没有可调用的方法。

```
B b = new B<int>();
// This is legal as B inherits from A
A a = b;
// This is a legal call, but how does b handle it?
bool result = a.f<bool>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:13:48.937

对于您的代码

```
abstract class A
{
    public abstract T f<T>();
}

class B<T> : A
{
    public override T f()
    {
        return default (T);
    }
} 
```

您希望在下面的代码中调用什么

```
public void Foo(A myObj) {
    myObj.f<DateTime>();
}
Foo(new B<int>()); 
```

尽管类型协定（抽象类 A）明确指出您需要一个实现，但该方法没有实现。因此，您可以实现或更改合同以在类级别使用类型参数

```
abstract class A<T>
{
    public abstract T f();
}

class B<T> : A<T>
{
    public override T f()
    {
        return default (T);
    }
} 
```

确实可以编译，但是它当然也限制了 f

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:12:13.910

可能这就是你打算做的：

```
abstract class A
{
    public abstract T f<T>();
}

class B<U> : A
{
    public override T f<T>() //also needs to have a generic type parameter
    {
        throw new NotImplementedException();
    }

    public U f()
    {
        return f<U>();
    }
} 
```

泛型方法类型参数和泛型类类型参数（这里`T`和`U`）没有直接的联系，即`T`不限于`U`（或某物）在基类中，并且您不能在派生类中更改此限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T09:13:49.980

```
abstract class A
{
    public abstract T f<T>();
}

class B<T> : A
{
    public override T f<T>()
    {
        return default (T);
    }
} 
```

# entity-framework - AutoDetectChangesEnabled 行为

> ID：14274751
> 
> 赞同：0
> 
> 时间：2013-01-11T09:05:11.337
> 
> 标签：entity-framework, change-tracking

我这里有一个理论问题。我了解到 DbContextConfiguration.AutoDetectChangesEnabled 属性值确定是否启用上下文更改的自动检测。但是，我已将其设置为 false，即使我不手动调用 DbChangeTracker.DetectChanges，上下文仍会持续更改。

注意：唯一不存在的情况是当我更改实体的 ICollection 属性时（但当我更改导航属性时它仍然存在，即：myEntity.OtherEntity = myOtherEntity）。

所以，我想知道我学错了什么:)

非常感谢。

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:59:46.510

发生这种情况是因为我手动将实体的状态设置为已修改。这使得上下文保存了原始和导航属性的更改，但显然不足以更新集合属性。问题解决了。

# ios - 如何在 iOS 应用程序中嵌入自定义资源和文件夹

> ID：14274752
> 
> 赞同：0
> 
> 时间：2013-01-11T09:05:13.210
> 
> 标签：ios, resources

我有一个 iOS 应用程序，它嵌入了作为静态库捆绑的本机 C 二进制文件。该二进制文件最初设计用于“常规”计算机，并依赖于一些特定的文件夹布局，例如：

```
myapp
- images
  - big
  - thumbnails
- templates
- sounds 
```

为了使二进制文件正常工作，我需要保持此布局不变。我没有做过太多的 iOS 开发，也许这是一个微不足道的问题，但是我如何在我的 iOS 应用程序中复制这个文件夹布局（以及如何在应用程序中获取它的绝对路径）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:29:29.353

每个应用程序都有一个沙盒，其中包含一组您可以使用的文件夹。如果它们位于 Documents 或 Library 文件夹中，您的应用程序还能运行吗？

```
 NSString *documentsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
 NSString *libraryDir = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

还有 /tmp 和 /caches，但可能这些不是您想要的。我相信以上两者都能在更新/同步中幸存下来。

# .net - 摩托罗拉 MC3190 仿真器

> ID：14274756
> 
> 赞同：-2
> 
> 时间：2013-01-11T09:05:17.513
> 
> 标签：.net, mobile

是否有摩托罗拉 MC3190 的模拟器，以便我可以从 Visual Studio 运行和调试应用程序？我有 2 台设备无法加载窗口。如果没有模拟器，在设备上重新安装 Windows 的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:04:23.713

好像没有办法重装windows，只有摩托罗拉可以。为了调试我的应用程序，我编写了假条形码和 RFID 阅读器，所以现在我可以在模拟器上调试它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T10:41:14.727

一个快速的谷歌搜索结果：

[.NET v2.4 的 EMDK](http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=12874&sliceId=&dialogID=216706471&stateId=1%200%20216708097)

里面似乎有 RFID 的东西——这有帮助吗？

# c# - 禁用手机缓存

> ID：14274758
> 
> 赞同：2
> 
> 时间：2013-01-11T09:05:24.303
> 
> 标签：c#, iphone, asp.net, caching

我正在用 c# 创建一个 asp.net Web 应用程序，在 iPhone 4 和 5 上查看页面时遇到了一个小问题（不确定其他手机，因为我没有收到其他移动用户的报告）。

在桌面浏览器上查看页面时，一切正常。发生的情况是用户在文本框中输入他们的电子邮件地址并单击按钮。我在通过 ajax 调用 web 方法的按钮上有一些 Javascript JQuery，web 方法返回 json 中的 ID 和名称列表 - 然后该按钮在网页上填充此信息的下拉框。

用户可以通过站点的不同部分将信息添加到数据库中，当他们单击上述按钮时，返回的列表应该更大并且包含新信息。但是我在 iphone 5 上注意到，当我返回页面时，似乎没有发生 ajax 调用（它发生时会短暂显示一个弹出窗口）并且下拉框不包含数据库中的新信息。我相信它只是显示来自手机缓存的信息。

如果我进入 safari 设置并删除 cookie 和数据/网络数据，然后转到网页，瞧，所有下拉列表都已填充，并且 ajax 调用有效（请等待弹出显示）。我已尝试将以下代码行添加到 page_load 上的母版页，但没有成功。

```
Response.Cache.SetNoStore(); 
```

还有什么我需要做的吗？正如我所说，该网站适用于桌面浏览器，我不是移动开发人员（我什至不使用手机进行网页浏览）所以不确定问题是什么或如何在我的代码中解决它。

非常感谢您的任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:50:59.350

您认为这与缓存相关的理论是正确的 - iOS 6 在没有提供缓存控制标头（包括 POST）的情况下缓存得更加积极。请参阅[iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)了解更多信息。

我们遇到了同样的问题，我们为此采取的方法是向站点添加一个 HttpModule，该站点始终为任何 POST 请求设置此标头：

```
public class DisablePostCachingModule : IHttpModule
{
    private HttpApplication _context;
    public void Init(HttpApplication context)
    {
        _context = context;
        _context.PreSendRequestHeaders += OnPreSendRequestHeaders;
    }

    public void Dispose()
    {
    }

    private void OnPreSendRequestHeaders(object sender, EventArgs e)
    {
        if (HttpContext.Current.Request.HttpMethod == "POST")
        {
            HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        }
    }
} 
```

我们将其连接到 Web.config 中，如下所示，它为我们解决了问题：

```
<configuration>
  <system.webServer>
    <modules>
      <add name="DisablePostCachingModule" type="Full.Namespace.To.DisablePostCachingModule, AssemblyName" />
    </modules>
  </system.webServer>
</configuration> 
```

请注意，如果您不使用 IIS7 的集成模式，则可以使用`<system.web>`：

```
<configuration>
  <system.web>
    <httpModules>
      <add name="DisablePostCachingModule" type="Full.Namespace.To.DisablePostCachingModule, AssemblyName" />
    </httpModules>
  </system.web>
</configuration> 
```

显然，在上述两种情况下，您都需要更新`Full.Namespace.To`到用于模块的任何命名空间，以及`AssemblyName`模块所在的程序集的名称。例如：

```
<add name="DisablePostCachingModule" type="Acme.HttpModules.DisablePostCachingModule, Acme.Core" /> 
```

# c++ - 舍入 double 的值

> ID：14274765
> 
> 赞同：0
> 
> 时间：2013-01-11T09:05:52.887
> 
> 标签：c++, double, rounding, ostream

在搜索了我的问题的答案后，我决定问。

有人告诉我需要将 double 的值四舍五入到小数点后 3 位。

我需要使用这个：

```
os.setf(std::ios::fixed,std::ios::floatfield);
os.precision(3); 
```

所以我知道我需要创建一个 ostream 类型的对象，所以我写了这个：

```
ostream os;
os.setf(std::ios::fixed,std::ios::floatfield);
os.precision(3);
double a = 3.12364;
os << a; 
```

但是有一个编译错误，所以我将第一行更改为：

```
ostream os(NULL); 
```

然后编译器就闭嘴了，但我知道它什么也没做。那么如何使用 ostream 舍入该值？

注意我不想打印。我不需要/不想使用 cout

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:20:54.670

如果您真的不想将结果保存在字符串中，则可以使用简单的数学。

```
#include <cmath>

float myRound(float input) {
    return input > 0
        ? floor(input * 1000 + 0.5) / 1000
        : ceil(input * 1000 + 0.5) / 1000;
} 
```

但请注意，如果乘以 1000 导致溢出，结果将不正确。在 C++11 中，您还可以使用[`std::round`](http://en.cppreference.com/w/cpp/numeric/math/round).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:10:18.547

假设您想将双精度放入 a`std::string`中，使用`std::ostringstream`（派生自`std::ostream`）。

```
ostringstream os;
os.setf(std::ios::fixed,std::ios::floatfield);
os.precision(3);
double a = 3.12364;
os << a;

std::string rounded( os.str() ); // get the result 
```

如果你想在数学上舍入它，那么做

```
round( a * 1000 ) / 1000 
```

在等式中间使用字符串总是一个危险信号 ;v) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:54:43.180

第一：如果您需要使用`ostream`，您不想将 double 的值四舍五入到小数点后三位，而是希望显示小数点后三位的值。（要舍入它，您可以使用 `round( value * 100 ) / 100`。）其次，您通常不使用 `ostream`对象，而是使用派生自 的类型的对象 `ostream`：通常是`ofstream`or `ostringstream`。

问题是你希望这个四舍五入的值出现在哪里。如果你需要它在一个文件中，那么你将使用`ofstream`; 如果你想把它放在一个字符串中（例如放在一个窗口组件中），它就是 `ostringstream`，如果你只是想让它出现在标准输出上，只需将它输出到`cout`（它是派生自 的类型 `ostream`）。

此外，完成后不要忘记恢复标志和精度：`setf`并对`precision`底层流进行永久更改。

# java - CloverETL 图形特定

> ID：14274766
> 
> 赞同：2
> 
> 时间：2013-01-11T09:05:55.333
> 
> 标签：java, jsf, graph, clover

我正在上传 xls 文件和 .grf 文件。但我的要求是检查 xls 文件的数字字段，如果存在任何字符串，我必须用 0 替换。但它必须在运行时具有。因为有很多用户和不同类型的 xls 和 .grs 文件。如何在运行时读写 clover 文件？有没有办法读取excel并检查数字字段中的字符串并将该字符串替换为0？我正在使用jsf和java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T14:33:03.347

*   将字段设置为数字类型
*   将默认值设置为 0
*   将 Reader 上的 dataPolicy 设置为 *受控*

然后所有无效的（字符串）值将被替换为默认值。

# android - 为什么这个http请求没有响应？

> ID：14274770
> 
> 赞同：0
> 
> 时间：2013-01-11T09:06:25.527
> 
> 标签：android, httprequest

我设置了以下 Http 请求。但是为什么这个 HTTP 请求没有响应呢？

```
AsyncHttpClient client = new AsyncHttpClient();
Log.d("click","click");
        client.get("http://www.baidu.com", new AsyncHttpResponseHandler() 
        {
            @Override
            public void onSuccess(String response) {
                Log.d("response",response);
                //System.out.println(response);
            }
        }); 
```

任何人的帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:12:21.927

实现其他`AsyncHttpResponseHandler`方法，看看会发生什么：

```
client.get("http://www.baidu.com", new AsyncHttpResponseHandler() 
{
    static final String TAG = "AsyncHttpResponseHandler";
    @Override
    public void onSuccess(String response) {
        Log.d(TAG, "Success: " + response);
    }

    @Override
    public void onFailure(Throwable e, String response) {
        Log.d(TAG, "Failure: " + response, e);
    }

    @Override
    public void onFinish() {
        Log.d(TAG, "Finish");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:13:04.397

您应该更喜欢创建一个 AsyncTask 并启动一个 URLConnection。有关更多信息，请参阅此线程：[如何在 HttpURLConnection 中添加 AsyncTask？](https://stackoverflow.com/questions/11790324/how-to-add-asynctask-in-an-httpurlconnection)

# machine-learning - 选择分类算法对名义数据和数字数据的混合进行分类？

> ID：14274771
> 
> 赞同：4
> 
> 时间：2013-01-11T09:06:29.180
> 
> 标签：machine-learning, data-mining, classification

我有一个关于客户购买模式的大约 100,000 条记录的数据集。数据集包含

*   年龄（从 2 到 120 的连续值）但我也计划将其分类为年龄范围。
*   性别（0 或 1）
*   地址（只能是六种或者我也可以用1到6的数字来表示）
*   偏好商店（只能来自 7 家商店）这是我的班级问题。

所以我的问题是根据客户的年龄、性别和位置对偏好商店进行分类和预测。我曾尝试使用朴素树和决策树，但它们的分类准确率在下面有点低。

我也在考虑逻辑回归，但我不确定性别和地址等离散值。但是，我也假设 SVM 有一些内核技巧，但还没有尝试过。

因此，您建议使用哪种机器学习算法来提高这些功能的准确性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T10:49:29.140

问题是您在连续尺度上表示名义变量，当您使用机器学习方法时，这会在类之间强加一种（虚假的）序数关系。例如，如果您将地址编码为六个可能的整数之一，则地址 1 更接近地址 2，而不是地址 3、4、5、6。当您尝试学习任何东西时，这将导致问题。

相反，将您的 6 值分类变量转换为 6 个二进制变量，每个变量对应一个分类值。然后，您的原始功能将产生六个功能，其中只有一个会出现。此外，将年龄保持为整数值，因为通过将其设为分类会丢失信息。

至于方法，它不太可能有很大的不同（至少在最初）。选择更容易实现的那个。但是，请确保在测试集上运行之前在开发集上运行某种交叉验证参数选择，因为所有算法都具有会显着影响学习准确性的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:31:07.683

您确实需要查看数据并确定您的标签与您当前拥有的功能之间是否存在足够的差异。因为特征很少但数据很多，所以像 kNN 这样的东西可以很好地工作。

您可以调整协同过滤来解决您的问题，因为这也适用于类似的功能。

# c# - 使用 sha256 签署安全令牌

> ID：14274777
> 
> 赞同：0
> 
> 时间：2013-01-11T09:06:52.903
> 
> 标签：c#, security

我有这个代码来签署安全令牌

```
public static XmlElement SignDoc(XmlDocument doc, X509Certificate2 cert2, string referenceId, string referenceValue)
{
    SamlSignedXml sig = new SamlSignedXml(doc, referenceId);
    sig.SigningKey = cert2.PrivateKey;

    Reference reference = new Reference();
    reference.Uri = String.Empty;
    reference.Uri = "#" + referenceValue;

    XmlDsigEnvelopedSignatureTransform env = new XmlDsigEnvelopedSignatureTransform();
    XmlDsigC14NTransform env2 = new XmlDsigC14NTransform();

    reference.AddTransform(env);
    reference.AddTransform(env2);

    sig.AddReference(reference);

    KeyInfo keyInfo = new KeyInfo();
    KeyInfoX509Data keyData = new KeyInfoX509Data(cert2);

    keyInfo.AddClause(keyData);

    sig.KeyInfo = keyInfo;
    sig.ComputeSignature();

    XmlElement xmlDigitalSignature = sig.GetXml();

    return xmlDigitalSignature;
} 
```

这给出了以下输出：

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
  <SignedInfo>
    <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315" />
    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
    <Reference URI="#_5a57c7d5-3a15-45a4-8d66-c963357450ea">
      <Transforms>
        <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
        <Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315" />
      </Transforms>
      <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
      <DigestValue>sql/Wucg3rSaKeLU8QQgQVqktK8=</DigestValue>
    </Reference>
  </SignedInfo>
  <SignatureValue>GG3rRZzLgH9MNTXKv3Xx+o9SarLXmk9Y6QfiMB/q/dqDFLO6us03Gutb81aRY9ceW5FoXO7FsENXvS7Q5gALyJRD5FzpaI5oxUsFvLVZKWwv+DmzEHLyxuCYZwjs12gAH8dJ9TiMocRIT9FBblTRreubR3hv70V56ZtZgm10DaA=</SignatureValue>
  <KeyInfo>
    <X509Data>
      <X509Certificate>MIIFtzCCBJ+gAwIBAgIERcSAVzANBgkqhkiG9w0BAQUFADAxMQswCQYDVQQGEwJESzEMMAoGA1UEChMDVERDMRQwEgYDVQQDEwtUREMgT0NFUyBDQTAeFw0xMjA1MjMwOTE1NTVaFw0xNDA1MjMwOTQ1NTVaMIGqMQswCQYDVQQGEwJESzE+MDwGA1UEChQ1VmVqbGUgT3BsYW5kcyBTdHL4bWZvcnN5bmluZyBBLm0uYi5hLiAvLyBDVlI6MjYwNDk5MDMxWzAgBgNVBAUTGUNWUjoyNjA0OTkwMy1VSUQ6NzI1MTc1NzgwNwYDVQQDFDBWZWpsZSBPcGxhbmRzIFN0cvhtZm9yc3luaW5nIEEubS5iLmEuIC0gVk9TIEFtYmEwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAM38QtJ+0vW/wyYPcie0HAIRuBzs4FfJd07TSeLQE2pr+gBLb3iFrVu3irTjk9ZW/lt8wBIPMercIzJtdGFRdpfH8suqpv8ctIjtZJXUVyhOXRqfoCw1g+sm0+M7W4OGJSmhz5IpReX4wmrYHKm2K8jXbY5PNi4Nz2jqkGiO7/3dAgMBAAGjggLfMIIC2zAOBgNVHQ8BAf8EBAMCA7gwKwYDVR0QBCQwIoAPMjAxMjA1MjMwOTE1NTVagQ8yMDE0MDUyMzA5NDU1NVowggE3BgNVHSAEggEuMIIBKjCCASYGCiqBUIEpAQEBAwMwggEWMC8GCCsGAQUFBwIBFiNodHRwOi8vd3d3LmNlcnRpZmlrYXQuZGsvcmVwb3NpdG9yeTCB4gYIKwYBBQUHAgIwgdUwChYDVERDMAMCAQEagcZGb3IgYW52ZW5kZWxzZSBhZiBjZXJ0aWZpa2F0ZXQgZ+ZsZGVyIE9DRVMgdmlsa+VyLCBDUFMgb2cgT0NFUyBDUCwgZGVyIGthbiBoZW50ZXMgZnJhIHd3dy5jZXJ0aWZpa2F0LmRrL3JlcG9zaXRvcnkuIEJlbeZyaywgYXQgVERDIGVmdGVyIHZpbGvlcmVuZSBoYXIgZXQgYmVncuZuc2V0IGFuc3ZhciBpZnQuIHByb2Zlc3Npb25lbGxlIHBhcnRlci4wQQYIKwYBBQUHAQEENTAzMDEGCCsGAQUFBzABhiVodHRwOi8vb2NzcC5jZXJ0aWZpa2F0LmRrL29jc3Avc3RhdHVzMDEGA1UdJQQqMCgGCCsGAQUFBwMBBggrBgEFBQcDAgYIKwYBBQUHAwMGCCsGAQUFBwMEMIGEBgNVHR8EfTB7MEugSaBHpEUwQzELMAkGA1UEBhMCREsxDDAKBgNVBAoTA1REQzEUMBIGA1UEAxMLVERDIE9DRVMgQ0ExEDAOBgNVBAMTB0NSTDYxMTcwLKAqoCiGJmh0dHA6Ly9jcmwub2Nlcy5jZXJ0aWZpa2F0LmRrL29jZXMuY3JsMB8GA1UdIwQYMBaAFGC1hexWZH4SGSdnHVAVS3OuO/kSMB0GA1UdDgQWBBTSebqvOVQaqvWySI9HseingRaTtTAJBgNVHRMEAjAAMBkGCSqGSIb2fQdBAAQMMAobBFY3LjEDAgOoMA0GCSqGSIb3DQEBBQUAA4IBAQBhG6V7V/Fro6HxQYeXLzxGaqmfV1cmQ9wu38RU10iMIf8AJveOPFF/rd2ezhqgzK4z4QKC37PV5/UT/wtfoud03576q+qwNXO41fARBMhJFfrjSxSrq0iXOhLSVoTyk8W/Y8LP1mGD8qaJtrJ2ZNnWHrqhW2EvChLe1+aYGOkwylJUeJIWLdGLjA9OZ1hiA1yEhmYwhlfstV421sKKgUwVYcRBzwerQ1M+Yy438oR2+Aaa2zgteLA1wXeiE1U4K7yvbP2TgVrIeLC56K3EENkLCahpUPRzbLoQMFq2RacBuy2SFTXlXa0Bgj5ToerOH+Tnm10sFeIDjPISx978z73w</X509Certificate>
    </X509Data>
  </KeyInfo>
</Signature> 
```

但正如您所看到的，这是使用 sha1 签名的，我需要使用 sha256 对其进行签名。有人能告诉我我能做些什么来使这项工作与 sha256 一起工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:42:59.467

您不会在任何地方设置 SHA-256。

你应该使用类似的东西：

```
 CryptoConfig.AddAlgorithm(typeof(RSAPKCS1SHA256SignatureDescription), @"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"); 
```

但是，这仅适用于 RSA 证书。对于 DSA 证书，根据 DSA 证书参数选择散列算法（很可能是 SHA-1）。

# css - 如何更改 LESS CSS 编译器的编译顺序

> ID：14274778
> 
> 赞同：0
> 
> 时间：2013-01-11T09:06:52.723
> 
> 标签：css, less

有没有办法影响less编译器的编译顺序？

我有一个包含颜色设置和变量 (settings.less) 的 less 文件，以及一堆使用 settings.less 中的变量的其他 less 文件。

有没有办法在其他较少的文件中使用 settings.less 而无需在这些文件中导入它们？

也许这将有助于影响较少文件的编译顺序？编译 settings.less 作为第一个文件，以便编译器在内存中拥有所有变量？有没有办法做到这一点？似乎默认编译器以 aplhabetical 顺序编译文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:27:26.377

Just like in C, Java, and others, you have to include/import dependencies from the file itself

# ios - 考虑到性能，如何在 UICollectionViewCell 内旋转 UILabel？

> ID：14274784
> 
> 赞同：0
> 
> 时间：2013-01-11T09:07:23.700
> 
> 标签：ios, performance, reusability, uicollectionview, uicollectionviewcell

我有一个`UICollectionView`我正在重用许多`UICollectionViewCells`产品信息的地方，想想 Pinterest。

但是到了一个地步，我有一个价格标签，并且想为每个单元格将价格带旋转大约 45 度。

![请注意绿色价格丝带](../Images/ccd6ec6459c36b7ef22781bb1f953a61.png)

实现这一目标的最佳性能明智方法是什么？

我尝试过：

```
#import <QuartzCore/QuartzCore.h>

@interface ItemCollectionViewCell : UICollectionViewCell

@property (weak, nonatomic) IBOutlet UILabel *price;

@end

@implementation ItemCollectionViewCell

@synthesize price;

- (void)awakeFromNib {
    price.layer.transform = CATransform3DMakeRotation(M_PI_4, 0, 0, 1);
    price.layer.transform = CATransform3DTranslate(price.transform, 25, -15, 0);
    price.layer.shouldRasterize = YES;
}

@end 
```

但是将新视图滚动并推送到导航控制器的总体结果确实很慢。

## 更新

*   似乎 iOS6 自动布局是性能下降的主要原因，但我仍然不知道如何解决这个问题或仅删除价格标签的自动布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T13:03:36.340

对我有用的是`UICollectionViewCell`在它为标签设置约束的地方删除由 iOS6 autoLayout 功能定义的属性，即`price`：

```
- (void)awakeFromNib {

    NSMutableArray* cons = [NSMutableArray array];
    //iterating through UICollectionViewCell constraint list
    for (NSLayoutConstraint* con in self.constraints) {
        //if the target constraint is `price` then add that to the array
        if (con.firstItem == price || con.secondItem == price) {
            [cons addObject:con];
        }
    }
    //remove the unwanted constraints array to the UICollectionViewCell
    [self removeConstraints:cons];

    //ready to roll…
    price.layer.transform = CATransform3DMakeRotation(M_PI_4, 0, 0, 1);
    price.layer.transform = CATransform3DTranslate(price.transform, 25, -15, 0);
    price.layer.shouldRasterize = YES;
} 
```

# jquery - 按钮标签内嵌套标签上的标题属性不会显示在 FX 上

> ID：14274788
> 
> 赞同：0
> 
> 时间：2013-01-11T09:07:37.570
> 
> 标签：jquery, css, html

我正在使用一个`button`标签，里面有一些标签，我想`title`为该标签添加一个属性，但它不起作用。出于几个原因，我不想`title`在标签上给出一个。`button`

问题仅出在 Mozilla 浏览器中 - 在所有其他浏览器中都可以正常工作。

```
<button style="width:150px">
<span class="icon nearby_airport lt"></span>
Nearby Airport
<p>
    <span id="NearBycontract">
        <span class="fpcurrencytext">$</span>
        <span class="fpamount fpMatrixRoundCeil" title="587.81" >587</span>
        <sup>
            <span class="fpamount fpMatrixSuper" title="587.81">.81</span>
        </sup>
    </span>
</p> 
```

[这是一个小提琴](http://jsfiddle.net/wBufb/9/)。

# jquery - ajax函数没有将值传递给控制器

> ID：14274795
> 
> 赞同：0
> 
> 时间：2013-01-11T09:07:47.533
> 
> 标签：jquery, ajax, asp.net-mvc-3, image

请帮帮我！

我的页面`div`中有几张银行的图片`_layout.cshtml`。每个图像都有一个`id`，比如说`id "Jonota","Sonali","Rupali"`...等。现在，我正在使用`jquery`，所以当每个`image`都是时`clicked`，我想`id`将该图像的 传递给我的`controller`. 我的 jquery 看起来像：

```
var a = $('div#banksBody img').size();
a.each($('div#banksBody img').click(function () {
    $(this).addClass('bankIcons');  // this class is just for making the cursor > pointer in css 
    var id = this.id;
    $.ajax({
        url: "Home/Test",
        type: "POST",
        traditional:true,
        data: JSON.stringify(id),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            if (result!="") {
                alert(result);
        }
    });         
})); 
```

我的控制器看起来很简单：

```
[HttpPost]
    public JsonResult Test(string id)
    {       
        return Json(id , JsonRequestBehavior.AllowGet);
    } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:14:48.320

你可以试试下面的代码

```
 $("#banksBody>img").each(function() {

        $(this).click(function(){

          var id = $(this).attr('id');

            });

          }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:02:24.120

尝试这个

```
$("#banksBody>span").each(function() {

$(this).click(function(){

var id = $(this).attr('id');

$.ajax({
    url: "Home/Test",
    type: "POST",
    traditional:true,
   data: {id:id},
   dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (result) {
        if (result!="") {
            alert(result);
    }
    });           
       });

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:12:50.817

您必须在发布请求中提供参数名称：

```
$.ajax({
        url: "Home/Test",
        type: "POST",
        data: {'id' : JSON.stringify(id)}
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:14:41.510

请检查`data: JSON.stringify(id),`我认为**stringify**需要多一个参数的代码

试试这个：

```
data: {"id":id}, 
```

# c# - 尝试在调试模式下附加到进程失败

> ID：14274796
> 
> 赞同：0
> 
> 时间：2013-01-11T09:07:52.740
> 
> 标签：c#, .net, visual-studio-2008

我有 2 个解决方案。解决方案 1 输出类型为 exe，解决方案 2 输出类型为类库。我在单独的 VS2008 编辑器中打开这两个解决方案。

单击 F5 调试解决方案 1。现在 solution1.exe 正在运行。在解决方案2中单击调试并附加到进程。选择 Solution1.exe 进行附加。

我收到错误消息**“无法附加到进程。已附加调试器。”** . 我可以知道是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:11:40.980

发生这种情况是因为进程**只能像错误所说的那样附加一个**调试器。

您可以在没有调试器的情况下启动程序（在 vs start **without debuging**中），然后从解决方案 2 附加调试器，如果 pdb 文件正确，这应该可以工作。

# php - 无法邀请某人参加活动

> ID：14274801
> 
> 赞同：0
> 
> 时间：2013-01-11T09:08:20.033
> 
> 标签：php, facebook-graph-api, exception, oauth-2.0

大家好，在stackoverflow，

我正在尝试创建一个邀请使用它的人参加活动的 facebook 应用程序。但是我似乎无法让它工作。POST 总是返回以下内容：

“消息”：“（＃200）”，“类型”：“OAuthException”，“代码”：200

无论我使用 PHP 脚本还是 Graph API Explorer，结果总是相同的。

代码：

```
$aFbConfig = array(
    'appId' => 'MY_APP_ID',
    'secret' => 'MY_APP_SECRET'
);
$oFb = new facebook($aFbConfig);

try{
    $aMe = $oFb->api('/me');
    $invite = $oFb->api('/491574947560291/invited/'.$aMe['id'], 'POST');
}catch(FacebookApiException $e){
    echo '<pre>'.print_r($e, true).'</pre>';
} 
```

请注意：

我有所需的 create_event 权限，异常不是由 /me 调用引起的，并且 491574947560291 是公共事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:36:32.113

邀请人们参加活动的用户必须参加该活动。用户可以邀请自己的朋友

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:27:54.983

这是一个[错误](https://developers.facebook.com/bugs/312375168858626)。

向上面的链接报告您也遇到此错误。

# macos - 将文本转换为 HTML 格式的文本编辑器

> ID：14274803
> 
> 赞同：-2
> 
> 时间：2013-01-11T09:08:22.437
> 
> 标签：macos, cocoa

我正在寻找 mac osx 中的编辑器。这有助于我务实地将普通纯文本转换为 HTML 格式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:38:50.463

不要真的跟随。纯文本不包含任何格式，那么 html 要添加什么？

如果您只是在网页上显示文本：

要么将其包装在**<pre>BLABLA</pre>**中，要么用<br/> 行尾
搜索并替换**所有行****尾**

=> 没有专门的编辑器。如果你想将markdown转换为html，有一些......我喜欢markdown pro

* * *

对于 C / objC（osx 和 iOS 两者）使用 lib Sundown :: [https://github.com/Daij-Djan/sundown](https://github.com/Daij-Djan/sundown) [最初对于 C，我添加了一个简单的 objC 包装器]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:11:12.007

Kwrite 和 Kate（KDE 文本编辑器和 KDE 高级文本编辑器）将为您做到这一点。由于它们是 KDE 的一部分，因此您必须使用[此处列出的方法之一](http://community.kde.org/Mac)来安装它们。

然后创建或复制一些文本：- 工具栏 => 文件 => 导出为 HTML

# c++ - 从 std::vector 在 std::map 中查找对象

> ID：14274805
> 
> 赞同：0
> 
> 时间：2013-01-11T09:08:30.827
> 
> 标签：c++, stdvector, stdmap

给 C++ 专家的一个快速问题：

在我正在处理的项目中，有一个类包含指向向量中对象的指针：

```
 std::vector<object*> objects; 
```

并且有一个向对象添加偏移量的结构（Point2D 显然是 x,y 坐标）

```
 struct DraggedObject{
    object* obj;
    Point2D offset;

    DraggedObject():obj(NULL),offset(Point2D(0,0)){}
}; 
```

每当您拖动一个对象时，它会将其添加到如下所示的 std::map 中：

```
 std::map <int, DraggedObject> dragged_objects; 
```

所以我的问题是：有一个循环，我需要在其中移动这些对象，但跳过拖动的对象。我的问题是：有没有办法遍历对象向量并找出对象是否在 dragged_object 地图上？

我正在做这样的事情：

```
for(std::vector<object*>::iterator it = objects.begin(); it != objects.end(); it++){
    if(//Object is not in dragged_objects){
        (*it)->move_to( Point2D( //Some point);
    }else{
        (*it)->move_to (Point2D (//Point of dragged object);
} 
```

但是我不知道如何进行这种比较...

对不起新手问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:15:58.190

std::map 针对按键快速查找（在本例中为 int 值）而不是按值快速查找（您的对象*）进行了优化。所以你唯一的选择是迭代整个地图直到你找到它。当映射很小并且代码部分对性能不是很重要时，您可以这样做。当性能很重要时，您可以添加一个额外的 std::set 并将所有当前正在拖动的对象存储在其中，或者您可以让对象本身知道它们当前是否正在被拖动，并添加一个 isDragged() 方法到您的对象类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:16:02.043

您可以更改方法并迭代拖动对象的地图，对每个拖动对象执行您需要完成的工作，然后将对象添加到临时`std::vector<object*>`. 当你的循环完成后，你可以通过你的向量，只对不在你的临时向量中的元素做一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:20:34.373

我相信您也许可以使用[set_difference](http://www.cplusplus.com/reference/algorithm/set_difference/)。您将必须实现自定义比较器，还必须对向量中的元素进行排序。除非您这样做，否则我认为您没有比对向量中的每个元素执行查找以验证它是否存在于地图中更好的方法了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:21:39.133

如果可能的话，`map`用`object*`键（例如，`std::map <object*, DraggedObject>`而不是`std::map <int, DraggedObject>`. 然后你可以这样写`if`：

```
 if(dragged_objects.count(*it)){
        (*it)->move_to( Point2D( //Some point);
    }else{
        (*it)->move_to (Point2D (//Point of dragged object); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T09:28:44.970

您可以使用的一种方法是将向量替换为列表，并让此列表仅包含未拖动的对象。

然后你会遍历这个列表。如果您想要所有对象，则遍历 ilst 和地图。不确定顺序对于这样做有多重要，但如果对象的 id 很重要（您存储在地图中），您可以根据地图中的 id 迭代“合并”列表和地图。

在这种情况下，列表比向量更好的原因是，如果您将对象拖出集合的中间，从列表中删除是恒定的时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T09:34:31.380

既然你说对象 ID 是他们在`dragged_objects`地图中的关键，你可以使用`find`地图的方法。我相信它应该是这样的。

```
std::map::iterator miter;
for (auto &obj : objects)
{
    miter = dragged_objects.find(obj.id);
    if (miter != dragged_objects.end()) {
        /* do for non-dragged objects */
    } else {
        /* do for dragged objects */
    }
} 
```

根据需要调整非 C++11 编译器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T09:37:47.250

Where does the `int` come from which is used to index into the map? If it's an identifier extracted from `object`, then all you have to do is extract it in your loop, and see if it is present in the map (using `map::find`). Otherwise, you'll either need an additional map, indexed with object*, or you'll need to iterate through all of the `dragged_objects`, looking at each one to see if it has the address you want (`std::find_if`). Depending on the number of `dragged_objects`, this could be slow; but normally, I'd guess that `dragged_objects` is either empty or only has a single entry. If this is the case, the linear search each time through your loop is perfectly acceptable.

# postgresql - T-SQL 函数 (Sybase) 的等效 PL/pgSQL 函数 (Postgres)

> ID：14274809
> 
> 赞同：0
> 
> 时间：2013-01-11T09:08:42.757
> 
> 标签：postgresql, tsql, sybase, plpgsql

在从 Sybase 到 PostgreSQL 的迁移中，我必须翻译一些触发器。在执行此操作时，我们在 Sybase (T-SQL) 中使用的函数遇到了一些问题，并且在 PostgreSQL (PL/pgSQL) 中找不到等效函数。

例如，我们在 Sybase 中使用以下语句，我必须为其找到等效语句：

1.  `select @inscount = count(*) from inserted`
2.  `select @delcount = count(*) from deleted`
3.  `@@rowcount`（修改的行数）
4.  回滚事务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:13:00.370

如果您使用行级触发器（Sybase 和 Microsoft 没有），则 Postgres 中不需要 1、2 和 3。

由于每行都调用一次触发器，因此这些数字基本上总是`1`.

`OLD`可以通过记录变量和访问修改或删除的数据`NEW`。

更多细节在手册中：[http ://www.postgresql.org/docs/current/static/plpgsql-trigger.html](http://www.postgresql.org/docs/current/static/plpgsql-trigger.html)

您不能在触发器（或函数）内回滚或提交某些内容——无论如何，这是一个*非常*可怕的想法。所以没有等价于4）

# azure - Azure MobileServices 从数据库表推送通知

> ID：14274813
> 
> 赞同：0
> 
> 时间：2013-01-11T09:08:52.700
> 
> 标签：azure, windows-8, push-notification, azure-mobile-services

这是我的场景，我在 Azure 上创建了一个辅助角色，并创建了一个 SQL 数据库和一个移动服务。

该数据库在我的工作人员角色和我的移动服务之间共享。

我的工作角色从网络上获取信息，如果它找到了我想使用我的移动服务发送推送通知的内容。

我的问题是，当我的辅助角色将数据插入表中时，如何发送表中第一项的推送通知？

我的应用程序是 Windows 8 应用程序

*更新：尝试遵循本指南，但在尝试发布时总是导致内部服务器错误 500

[http://www.strathweb.com/2012/09/using-azure-mobile-services-in-your-web-apps-through-asp-net-web-api/](http://www.strathweb.com/2012/09/using-azure-mobile-services-in-your-web-apps-through-asp-net-web-api/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:27:07.073

您可以按照 Marco 的建议使用 REST API，或者如果您的辅助角色中的逻辑不是那么复杂，您可以将推送通知移至 Windows Azure 移动服务调度程序：

看看这个：[使用移动服务调度程序定期发送推送通知](http://code.msdn.microsoft.com/windowsapps/Send-Push-Notifications-at-cd0ccd48)

# android - 使用地理位置调用地图意图，是否可以在其上放置图钉？

> ID：14274815
> 
> 赞同：3
> 
> 时间：2013-01-11T09:09:06.217
> 
> 标签：android, google-maps, pushpin

> **可能重复：**
> [如何在 geo uri Intent 启动的地图中显示标记？](https://stackoverflow.com/questions/3990110/how-to-show-marker-in-maps-launched-by-geo-uri-intent)

我打算使用从我的数据库中获得的一个地理位置来使用 Google 地图应用程序，GM 是否可以在我使用 URI 发送的位置放置一个图钉？

```
final String uri = "geo:" + location.Latitude + "," + location.Longitude + "?z=12";
MyActivity.this.startActivity(new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri))); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T09:12:11.993

您需要为引脚指定名称：

```
String uri = "geo:0,0?q="+ Lat + "," + Longitude + " (" + name+ ")";
startActivity(new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri))); 
```

这仅适用于一个引脚。

# java - 如何将 CSS 用于 Vaadin 组件？

> ID：14274816
> 
> 赞同：5
> 
> 时间：2013-01-11T09:09:08.800
> 
> 标签：java, css, components, vaadin

我似乎看到了一些例子，人们回答了如何通过添加 CSS 代码从组件中获取某些特定行为的问题，但是似乎没有人解释如何使用该 CSS 代码将其连接到 Java 组件......

```
.v-table-body{
  overflow: hidden !important;
} 
```

例如，我如何在我创建的表上使用此代码？

```
Table table = new Table(caption);

    table.addContainerProperty("Visit ID", Long.class, null); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T13:19:28.653

您可以创建自己的自定义主题。请参阅[https://vaadin.com/book/-/page/themes.creating.html](https://vaadin.com/book/-/page/themes.creating.html)如何做到这一点。
在这个主题中，您有一个 css 样式表，您可以在其中放置您的规则。

在每个组件上，您都可以使用 addStyleName 函数添加一个额外的类名：

```
Table table = new Table("MyCaption");
table.addStyleName("mystyle"); 
```

现在您可以在样式表中使用它：

```
@import "../reindeer/styles.css";

.mystyle{
  overflow: hidden !important;
} 
```

# sharepoint - sharepoint 如何触发工作流

> ID：14274817
> 
> 赞同：1
> 
> 时间：2013-01-11T09:09:12.733
> 
> 标签：sharepoint, sharepoint-workflow

我是sharepoint的新手，所以如果我做错了什么，请纠正我。

我有一个可以预约的文档库（文档、客户信息，例如姓名、电话等）。然后，我创建了一个网站页面和 Web 部件，它从客户那里获取这些信息并将其发送到文档库。当我填写该表格并保存它时，列表非常好地接受参数。之后，我为该库创建了一个批准共享点工作流，以批准某些用户的文档。问题从这里开始：当我手动将项目添加到文档列表时（通过按添加项目）工作流列项目（工作流名称）会自动生成并且运行良好。但是当我尝试按代码添加时，工作流项目不会生成。

```
 public static void InsertIntoDocumentToLib( string name, int age,string path,SPContext context)
    {
        SPSecurity.RunWithElevatedPrivileges(delegate()
        {
            using (var site = new SPSite(context.Site.ID))
            {
                using (var siteCollection = new SPSite(context.Site.Url))   // site.RootWeb
                {
                    using (var currentWeb = siteCollection.OpenWeb(context.Web.ID))
                    {
                        SPList spList = currentWeb.Lists.TryGetList(DOCUMENT_LIB_NAME);
                        if (spList != null)
                        {
                            currentWeb.AllowUnsafeUpdates = true;
                            SPFolder myLibrary = currentWeb.Folders[DOCUMENT_LIB_NAME];
                            bool replaceExistingFiles = true;
                            string fileName = System.IO.Path.GetFileName(path);

                            FileStream fileStream = File.OpenRead(path);
                            SPFile spfile = myLibrary.Files.Add(fileName, fileStream, replaceExistingFiles);
                            spfile.Item[NAME_COLUMN] = name;
                            spfile.Item[AGE_COLUMN] = age; 
                            spfile.Item.Update();
                            myLibrary.Update();
                            currentWeb.AllowUnsafeUpdates = false;
                        }

                    }
                }
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:18:22.910

SharePoint 中的工作流不能由系统帐户触发，这可能是您在“创建者”中的用户名。当您手动创建列表项（使用添加项目）时，您使用您的用户帐户创建了该项目。

最简单和最安全的做法是删除 RunWithElevatedPermissions，但只有有权在目标列表中创建条目的用户才能使用您的页面。

如果您的要求要求其他用户也必须使用您的页面，则您必须使用模拟。

您所做的是使用来自有权在列表中创建项目的非系统用户的凭据[SPUserToken 。](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spusertoken.aspx)

[这篇博客文章](http://blackninjasoftware.com/2009/04/09/how-to-programmatically-impersonate-users-in-sharepoint/)有一个关于如何使用 SPUserToken 的示例。

You could also log in as a different windows user, but I don't think that should be necessary since you're running in a site page.

[Extreme SharePoint](http://extreme-sharepoint.com/2012/05/30/impersonation-elevation-of-privileges/) also has a good overview of elevation/impersonation in SharePoint you may want to look at.

# javascript - 如何找到base64图像的宽度和高度

> ID：14274822
> 
> 赞同：18
> 
> 时间：2013-01-11T09:09:27.517
> 
> 标签：javascript, jquery, html

如何找到base64图像的宽度和高度

```
<img id="thumb0" width="200" height="200" 
src="data:image/png;base64, ................"> 
```

图像属性宽度和高度是恒定的，因为我需要将它们显示为缩略图，但是原始图像属性不同。

我需要获取原始图像的高度和宽度。

假设我的原始图像高度和宽度是**750 X 500**

我试过这样但得到属性宽度和高度

```
$("#thumb0").width(); 
```

值为**200**。

请帮助如何获得图像的原始宽度和高度。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T09:10:41.583

您可以构建另一个图像元素并获取其大小：

```
var img = new Image();
img.src = $('#thumb0').attr('src');
var originalWidth = img.width; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-30T18:21:19.087

dystroy 的答案中提到的 HTMLImageElements的[Image() 构造函数](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement "HTMLImageElement 文档")是正确的方法，但有一个警告：构造函数实际上是异步的！因此，您可能会在某些浏览器中遇到意外行为；从我有限的实验来看，dystroy 的代码将在 Chrome 中 100% 的运行，但有时在 Firefox 和 Safari 中运行。不知道别人。

正确的方法似乎是[使用 onload handler](http://support.spinetix.com/wiki/HTMLImageElement "HTMLImageElement")，如：

```
var img = new Image();
img.src = some_base64_image_source;
console.log(img.width);       // This might print out 0!
img.onload = function() {
    console.log(img.width);   // This will print out the width.
} 
```

# python - 如何使用 python 为台式电脑构建自定义搜索引擎

> ID：14274823
> 
> 赞同：0
> 
> 时间：2013-01-11T09:09:30.813
> 
> 标签：python, linux, search

我正在考虑使用 python 和 Django 来构建自定义搜索引擎。我有以下想法

*   Python 脚本将遍历所有目录，将文件分成以下字段
*   1.  小路
    2.  文件名
    3.  扩大
    4.  尺寸

我会将其存储在 Django 模型中

然后我可以使用搜索过滤器来简化。我不想进入内容。我只想按文件名搜索

我正在考虑使用的 Python 脚本 `os.walk`

可以吗，或者我还需要使用更多的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:27:35.170

refer this post by me; it is using `whoosh` to generate index of files; then you can use it in your django/flask.. .
[Create an index of the content of each file in a folder](https://stackoverflow.com/questions/13497607/create-an-index-of-the-content-of-each-file-in-a-folder/13498458#13498458)

you can also replace the `whoosh` with `sqlite3`

# android - Viewpager 内的 ListView - 无滚动

> ID：14274825
> 
> 赞同：0
> 
> 时间：2013-01-11T09:09:35.187
> 
> 标签：android, android-listview, android-viewpager, android-listfragment

我想使用 a将 a`ListView (ListFragment)`放在里面。但是这样做时似乎禁用了 ListViews 滚动功能（我无法上下滚动）。这是我的代码：`ViewPager``FragmentPagerAdapter`

**主要的.xml**

```
<include layout="@layout/prisniveau_info" />

<android.support.v4.view.ViewPager
    android:id="@+id/pager" 
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="30dp"
        android:layout_gravity="top"
        android:background="@color/light_gray"
        android:paddingBottom="5dp"
        android:paddingTop="5dp"
        android:textColor="#fff" />
</android.support.v4.view.ViewPager> 
```

**适配器：**

> ```
>  public class MyAdapter extends android.support.v4.app.FragmentPagerAdapter
>      {
> public MyAdapter(android.support.v4.app.FragmentManager fm)
> {
>      super(fm);
> }
> @Override
> public int getCount()
> {
>     return 2;
> }       
> @Override
> public Fragment getItem(int position)
> {
>     Fragment fragment = null;
>     if(position==0)
>     {
>         fragment = new MyListFragment();                
>     }
>     else if(position==1)
>     {
>         fragment = new MyMapFragment();
>     }
>     return fragment;
> }       
> @Override
> public CharSequence getPageTitle(int position)
> {
>     switch (position)
>     {
>         case 0:
>         return  getString(R.string.title_list).toUpperCase(Locale.getDefault());
>         case 1:
>             return getString(R.string.title_map).toUpperCase(Locale.getDefault());
>         }
>         return null;
>     }       
>     public String getFragmentTag(int index)
>     {
>          return "android:switcher:" + R.id.pager + ":" + index;
>     }
> } 
> ```

是否可以`ListView`在 a 内进行滚动`ViewPager`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:20:41.940

我在[这里](https://stackoverflow.com/questions/2646028/android-horizontalscrollview-within-scrollview-touch-handling)找到了解决方案。为常规 ScrollView 中的 Horizo​​ntalScrollView 正确处理触摸事件可能存在问题，但该问题的解决方案似乎也适用于这个问题。

# java - 如何禁用 JTextPane 中特定单词的复制和粘贴？

> ID：14274832
> 
> 赞同：1
> 
> 时间：2013-01-11T09:09:48.177
> 
> 标签：java, swing, jtextpane

我在我的项目中使用 a ，我通过**[PKG MEDIA]**`JTextPane`等 代码添加一些标签。我想限制用户将它们复制并粘贴到.**`JTextPane`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:19:29.087

您应该覆盖`Writer`用于`EditorKit`跳过某些`Element's`内容。

为了防止粘贴，您可以`DocumentFilter`在最简单的情况下添加一个，但在某些情况下，粘贴会直接更改`Document's`结构，因此您应该覆盖`Reader`创建结构的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:17:32.973

作为提示使用**“CTRL+V”**的鼠标和按键事件使用和限制文本`MouseEvent`选择`KeyEvent`

 **或者您也可以使用：`textPane.setTransferHandler(null);`

见[文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JComponent.html#setTransferHandler%28javax.swing.TransferHandler%29)****

# eclipse - 安装 tomcat 7 时 ZLIB 输入流意外结束

> ID：14274833
> 
> 赞同：1
> 
> 时间：2013-01-11T09:09:49.763
> 
> 标签：eclipse, tomcat, tomcat7

您好我正在尝试在 Eclipse 4.2（juno）中安装 tomcat 7。

我要去windows>preferences>servers>add并下载和安装。

问题是安装开始但一段时间后它停止并给出以下错误。

安装服务器时出错：ZLIB 输入流意外结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:14:52.290

嗨，我找到了解决方案。

我刚刚从tomcat外部安装了apache，在安装结束时没有选中运行tomcat服务器的框，而是打开eclipse并从eclipse运行tomcat服务器。

谢谢大家。

# sql - 使用 Distinct 作为参数

> ID：14274836
> 
> 赞同：2
> 
> 时间：2013-01-11T09:09:55.240
> 
> 标签：sql, distinct

```
SELECT ORIGIN_NAME, SUM(NET_WEIGHT),
CASE WHEN ORIGIN_NAME IS NULL THEN 'Basket' ELSE ORIGIN_NAME END AS ORIGIN
FROM VW_PURCHASE_ORDER
GROUP BY ORIGIN_NAME 
```

我有上面的查询，我在饼图中使用。

但是，由于此查询从中获取的信息具有重复记录，因此我需要进行上述查询：（尽管我确定 WHERE 是错误的，因为它缺少完成子句的适当表达式）

```
WHERE DISTINCT PO_PREFIX||PO_NUMBER||PO_SUFFIX 
```

所以我不会重复计算重复记录中的权重

我已经尝试过子查询，但我目前是 SQL 编程的一个相当大的新手，而且我认为我没有正确执行它们（可以将 SELECT DISTINCT 列用作子查询吗？）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:32:37.550

让我们将操作分解为步骤，

**步骤 1\. 查找所有不同的行：**

```
SELECT DISTINCT 
   PO_PREFIX, PO_NUMBER, PO_SUFFIX, NET_WEIGHT,
   COALESCE(ORIGIN_NAME, 'Basket') AS ORIGIN
FROM 
   VW_PURCHASE_ORDER ; 
```

**第 2 步：按 分组`origin`，使用上述作为派生表（名为`tmp`）：**

```
SELECT
   ORIGIN, SUM(NET_WEIGHT) AS SUM_NET_WEIGHT
FROM
   ( SELECT DISTINCT 
        PO_PREFIX, PO_NUMBER, PO_SUFFIX, NET_WEIGHT,
        COALESCE(ORIGIN_NAME, 'Basket') AS ORIGIN
     FROM 
        VW_PURCHASE_ORDER 
   ) tmp
GROUP BY
   ORIGIN ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:22:21.207

我认为您想要的是首先选择所有不同的行，然后按您的分组。所以这个查询可能会做你需要的：

```
SELECT ORIGIN, SUM(NET_WEIGHT)
FROM (
SELECT DISTINCT 
* ,
CASE WHEN ORIGIN_NAME IS NULL THEN 'Basket' ELSE ORIGIN_NAME END AS ORIGIN
FROM VW_PURCHASE_ORDER) AS QUERY
GROUP BY ORIGIN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:12:46.157

我认为这会对您有所帮助

```
SELECT TOP 1 ORIGIN_NAME, SUM(NET_WEIGHT),
CASE WHEN ORIGIN_NAME IS NULL THEN 'Basket' ELSE ORIGIN_NAME END AS ORIGIN
FROM VW_PURCHASE_ORDER
GROUP BY ORIGIN_NAME 
```

# c# - EOF 标志后写入文本文件

> ID：14274839
> 
> 赞同：-1
> 
> 时间：2013-01-11T09:10:20.170
> 
> 标签：c#

在 C# 中是否可以在 EOF 之后编写，以便文本编辑器和操作系统忽略下一个字符，但仍然可以通过编程方式访问？

例如

```
asdf<EOF>ghjklzxcvbm 
```

EOF 之后的部分在文本编辑器中应该被忽略（不可见）。

我试过了

```
stream.WriteByte(0x1A); // dec 26 
```

[如线程https://stackoverflow.com/a/2194619](https://stackoverflow.com/a/2194619)中所写，然后附加消息的其余部分，但没有结果 - 文本在编辑器中仍然可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:18:45.550

你想做的事情可能并不容易做到。如果您成功放置了 EOF，即使使用您自己的代码，您也可能无法阅读过去。如果您使用 NTFS 文件系统，也许您应该看看备用数据流[http://www.codeproject.com/Articles/9387/Manipulate-Alternate-Data-Streams](http://www.codeproject.com/Articles/9387/Manipulate-Alternate-Data-Streams)

备用数据流位于文件的主要流旁边，打开文件时不可见。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:30:44.180

这是不可能的，如果文本编辑器忽略字符，那将是一个大BUG，
您引用的线程与您想要做的不同。

# javascript - Css 位置固定为水平滚动但垂直滚动

> ID：14274841
> 
> 赞同：6
> 
> 时间：2013-01-11T09:10:31.663
> 
> 标签：javascript, jquery, css

我有`div`以下三个：

```
<div id="left"></div>
<div id="center"><table></table></div>
<div id="right"></div> 
```

现在我需要做的是保持`#left`和`#right`固定水平滚动和滚动`#center`。这与css`position:fixed`和. 但问题是当我垂直滚动 html 页面时，我需要所有的ie和滚动。这是行不通的。请任何人帮助我如何做到这一点，以便垂直滚动并保持固定水平滚动。我不知道如何使用 css 来完成它并让它工作。`#left``#right``div's``#left``#center``#right``#left``#right``#center`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T09:15:33.673

试试这个链接，它使用一个名为的插件`scrollspy`来做这些事情。相当容易...

[http://www.rickyh.co.uk/css-position-x-and-position-y/](http://www.rickyh.co.uk/css-position-x-and-position-y/)

另外，请参阅这个 SO 问题：[CSS：fixed position on x-axis but not y?](https://stackoverflow.com/questions/2049845/css-fixed-position-on-x-axis-but-not-y)

感谢[semir.babajic](https://stackoverflow.com/users/1945688/semir-babajic)：这是实际的片段。您将需要 jQuery。

```
$(window).scroll(function(){
    $('#header').css({
        'left': $(this).scrollLeft() + 15 //Always 15px from left
    });
}); 
```

# jquery - 从网页中获取锚元素

> ID：14274849
> 
> 赞同：1
> 
> 时间：2013-01-11T09:11:13.130
> 
> 标签：jquery

> **可能重复：**
> [Access-Control-Allow-Origin 不允许来源](https://stackoverflow.com/questions/10143093/origin-is-not-allowed-by-access-control-allow-origin)

我想从网页访问元素。

例如，我正在使用 jquery ： `$("#links").load('http://www.youtube.com a');` 将所有链接从 youtube 页面带到我的本地页面。

但我无法做到这一点，出现错误：

> XMLHttpRequest 无法加载 [http://en.wikipedia.org/wiki/Special:Search?search=&go=Go](http://en.wikipedia.org/wiki/Special:Search?search=&go=Go)。Access-Control-Allow-Origin 不允许来源“我的本地主机”。

当我尝试使用另一个本地页面执行此操作时，我得到了它。

有什么帮助吗？希望我能正确解释我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:15:00.923

Access-Control-Allow-Origin 是阻止页面从其他站点加载内容的浏览器。这是设计的安全功能（[HTTP 访问控制](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)）。

唯一/最好的方法是通过服务器端页面（PHP 等）将该页面传递到您的网站。

# eclipse - 无法为 Eclipse 4 APP 定制品牌

> ID：14274850
> 
> 赞同：2
> 
> 时间：2013-01-11T09:11:14.117
> 
> 标签：eclipse, rcp, e4

使用 eclipse 4 应用程序，我遇到了品牌问题；也许这听起来很简单，但相信我，它已经阻止了我好几天，我仍然无法解决它。

问题是我想把我们自己的图标放在APP的左上角，但我不能让它工作。我在网上搜索，我得到的答案是在定义产品时使用图标设置 windowImages（如以下代码片段），我已经做过，但它没有用。

```
 <property
           name="windowImages"
           value="icons/sample2.gif,icons/ico32.gif,icons/ico48.gif,icons/ico64.gif">
     </property> 
```

我用一个简单的 RCP 尝试了这个 windowImages，而不是 Eclipse 4 应用程序，它确实有效。

我对 RCP 和 e4 应用程序之间的区别知之甚少，但对我来说，似乎这里最大的区别是 e4 将使用 org.eclipse.e4.ui.workbench.swt.E4Application 来加载 Application.e4xmi 文件；

除了尝试 windowImages，我还尝试在 Application.e4xmi 文件中设置修剪窗口的图标 uri，它也不起作用。

请帮我解决这个问题。这个功能很简单，但是没有它，我们的APP应该显得太不专业了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:10:46.667

E4AP 中存在一个错误，现已解决：[错误 280825](https://bugs.eclipse.org/bugs/show_bug.cgi?id=280825)，因此现在您可以在 Application.e4xmi 文件中定义您的图标。

如果你想拥有多个不同大小的 Icons，你需要直接使用 JFace Window API 来实现。

```
Window.setDefaultImages(new Image[] { //add your images here }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T09:50:17.163

我遇到了同样的问题，最后我通过为每个窗口定义图标 URL 来解决它。检查下面[![日食 RCP 4](../Images/907b447f3d1f7892fc3955fe973e0b22.png)](https://i.stack.imgur.com/KaryQ.png)

# css - 将自定义形状应用于剪辑属性 CSS

> ID：14274852
> 
> 赞同：2
> 
> 时间：2013-01-11T09:11:21.897
> 
> 标签：css, customization, css-shapes, masking, clip

我只是在发现和调查 CSS 的 clip 属性。我读过可以将矩形或正方形对象应用于剪辑。在调查并没有找到明确的答案后，我决定问这个问题。

是否可以将自定义对象应用于剪辑属性？是否可以使用 CSS 将此矩形操作为自定义形状？

例如，您可以对剪辑应用对角线形状吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-26T10:05:37.973

也许这是一个老问题，但现在您可以使用带有 CSS 剪辑路径的自定义形状。

[您可以在此处](http://www.html5rocks.com/en/tutorials/masking/adobe/)了解更多信息。

# sql - SQL Update 真的很慢（大约 20-50 秒），Select 不到 1 秒

> ID：14274853
> 
> 赞同：6
> 
> 时间：2013-01-11T09:11:22.193
> 
> 标签：sql, sql-server, select, timeout, lightspeed

我有一个包含很多行（最多几百万行）的 SQL 表“文档”。

当我执行 Select-Statement 时，大约需要 0.5 秒。但是，当我使用相同的 WHERE 子句执行更新时，大约需要 20 到 50 秒，具体取决于受影响的行数。

这是我的陈述。

//选择

```
SELECT * FROM Document 
WHERE (State=20 OR State=23) AND 
LetterClosed IS NOT NULL AND 
TYPE=0 AND
SendLetter=1 
```

//更新

```
UPDATE Document set State=32 
WHERE (State=20 OR State=23) AND 
LetterClosed IS NOT NULL AND 
TYPE=0 AND
SendLetter=1 
```

OR-Mapper 在内部将此更新语句发送到数据库：

```
exec sp_executesql N'Update
Document
SET
    State=@p4
WHERE
(
  (
    (
      (Document.State = @p0 OR Document.State = @p1) 
      AND Document.LetterClosed IS NOT NULL
    ) 
    AND Document.Type = @p2
  ) 
  AND Document.SendLetter = @p3
)'
,N'@p0 int,@p1 int,@p2 int,@p3 bit,@p4 int',@p0=20,@p1=23,@p2=0,@p3=1,@p4=32 
```

问题是，30 秒后我从 LightSpeed（C# 中的数据库 OR-Mapper）收到超时异常。

有人可以在这里帮助我吗？

编辑：

这是我们由 SQL-Server 自动创建的索引：

```
CREATE NONCLUSTERED INDEX [_dta_index_Document_9_133575514__K42_1_2_3_4_5_6_7_8_9_11_12_13_14_15_16_17_18_19_20_21_22_23_24_25_26_27_28_29_30_31_32_33_34_] ON [Document] 

(
    [State] ASC
)
INCLUDE ( 
[Id],[DocumentId],[SendLetter],[SendFax],[Archive],[Crm],[Validation],[CreationDate],[PageCount],
[InformationLetter],[TermsOfDelivery],[DeliveryTypeNo],[SeparateDelivery],[FormName],[FormDescription],[TemplateFileName],[RecipientType],
[HealthInsuranceNo],[FamilyHealthInsuranceNo],[PensionInsuranceNo],[EmployerCompanyNo],[RecipientName1],[RecipientName2],[RecipientName3],
[RecipientStreet],[RecipientCountryCode],[RecipientZipCode],[RecipientCity],[RecipientFaxNo],[AuthorId],
[AuthorName],[AuthorEmailAddress],[CostcenterDepartment],[CostcenterDescription],[MandatorNo],[MandatorName],[ControllerId],
[ControllerName],[EditorId],[EditorName],[StateFax],[Editable],[LetterClosedDate],[JobId],[DeliveryId],[DocumentIdExternal],[JobGroupIdExternal],
[GcosyInformed]) WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF) ON [PRIMARY]
go

CREATE NONCLUSTERED INDEX [_dta_index_Document_9_133575514__K2_1_46] ON [Document] 
(
    [DocumentId] ASC
)
INCLUDE ( [Id],
[JobId]) WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF) ON [PRIMARY]
go

CREATE NONCLUSTERED INDEX [_dta_index_Document_9_133575514__K46_K2] ON [Document] 
(
    [JobId] ASC,
    [DocumentId] ASC
)WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF) ON [PRIMARY]
go

CREATE NONCLUSTERED INDEX [Document_State_Id] ON [Document] 
(
    [State] ASC,
    [Id] ASC
)WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF) ON [PRIMARY]
go

CREATE NONCLUSTERED INDEX [Document_State_CreationDate] ON [Document] 
(
    [State] ASC,
    [CreationDate] ASC
)WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF) ON [PRIMARY]
go 
```

编辑 2：现在我有一个图形执行计划：执行计划：[https ://skydrive.live.com/redir?resid=597F6CF1AB696567!444&authkey=!ABq72SAWXOoAXfI](https://skydrive.live.com/redir?resid=597F6CF1AB696567!444&authkey=!ABq72SAWXOoAXfI)

执行计划索引更新详情：[https ://skydrive.live.com/?cid=597f6cf1ab696567&id=597F6CF1AB696567%21445&sff=1&authkey=!ADDPWvxB2JLLvWo](https://skydrive.live.com/?cid=597f6cf1ab696567&id=597F6CF1AB696567%21445&sff=1&authkey=!ADDPWvxB2JLLvWo)

此 SQL 更新执行大约需要 35 秒。通常这个更新只需要 0,3 秒。似乎另一个进程阻止了这个进程。我看到了其他一些在此更新中间开始的选择，并一直等到更新完成，直到他们在那里完成选择执行。

所以看起来索引本身是正确的（通常是 0,3 秒执行）。所有选择（来自 java/jtds、php、.net）都是隔离级别读取提交的（默认）。它会帮助我在这里将所有选择更改为读取未提交以避免在索引更新期间出现这种阻塞吗？

谢谢托比

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-01-23T09:58:35.770

我曾经在 SQL Server 2008 和 SQL Server 2014 链接服务器上遇到过这个问题。对我来说，一个**解决方法**是将“选择”结果存储到一个临时表中，并使用它来进行更新，而不是一次进行复杂的查询和更新。

在您的情况下，这将是：

```
--Select

SELECT * FROM Document
into #temp 
WHERE (State=20 OR State=23) AND 
LetterClosed IS NOT NULL AND 
TYPE=0 AND
SendLetter=1

--Update

UPDATE Document set State=32 
from #temp
WHERE #temp.id = Document.id 
--assuming that id is your PK 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T09:28:06.967

如果没有执行计划，我们只能猜测会发生什么。

我将从：

1.  检查表有多少索引`document`（但很难相信更新索引需要这么长时间）。
2.  检查是否在更新时执行了任何触发器。

所有这些都应该在执行计划中可见。

另一个原因可能是 SQL 引擎有一个查询执行计划`SELECT`和不同的`UPDATE`查询执行计划......

## 更新

在查看索引之后。

在我看来索引`_dta_index_Document_9_133575514__K42_1_2_3_4_5_6_7_8_9_11_12_13_14_15_16_17_18_19_20_21_22_23_24_25_26_27_28_29_30_31_32_33_34_`是完全错误的。

它包含很多列，这可能会使更新变慢。

尝试将其删除或将其替换为列上的`CLUSTERED`索引`state`。`CLUSTERED`index* include* （具有直接访问权限）对所有记录列的访问，无需额外读取。

可能它应该与以`state`column 开头的其他索引之一相结合——我假设`state`只有几个值。

不幸的是，我无法以文本格式解释执行计划。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T09:14:37.147

可能您在表 Document 上有索引。索引使选择更快但更新/插入/删除操作缓慢。

尝试删除不必要的索引。

# ios - 使用 UISearchBar 后打开 detailViewController

> ID：14274857
> 
> 赞同：0
> 
> 时间：2013-01-11T09:11:38.667
> 
> 标签：ios, uitableview, uisearchbar, nsindexpath, uisearchbardelegate

我有一个 UISearchBar 来搜索 tableView 中的一些数据，然后在搜索后选择一行来打开 detailViewController 。为此，行必须保持索引路径，并且在搜索后不要更改初始 indexPath，否则我无法在数据库中找到正确的元素。如何保留初始 indexPath？还有其他方法吗？

```
 -(void) searchExpositorsTableView{
      [searchResult removeAllObjects]; 
      //In this array there are the elements resulted after research

      for (Database *currow in self.mutableArray){
         NSLog(@"list of expositors %@", self.mutableArray);

        NSRange titleResultsRange = [currow.name rangeOfString:self.searchBar.text options: NSCaseInsensitiveSearch];;
          if (titleResultsRange.length >0) {
                [searchResult addObject:currow.name];
                /*While I build this new array every indexPath change and the database
                  can not track down the original items*/
          }
        }

    NSLog(@"%@", searchResult);
   }

   -(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath{

      if(canSelectRow){

           NSLog(@"%d", indexPath.row);
           /*the indexPath is new and the database can not track down the original items*/
           return indexPath;

       }else{
        return nil;
       }
    NSLog(@"%d", indexPath.row);
 }

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
   //Open wrong element
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:25:19.343

做这个

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    if(searching) // where searching is boolean YES is searching, NO if not searched any element
    {
        //get your data from searchResults and open detailViewController
        Database *currow = [searchResults objectAtIndex:indexPath.row];
        DetailViewController = detailView = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
        [self.navigationController pushViewController:detailView animated:YES];
        [detailView release];
    }
    else
    {
        //get your data from self.mutableArray and open detailViewController
        Database *currow = [self.mutableArray objectAtIndex:indexPath.row];
        DetailViewController = detailView = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
        [self.navigationController pushViewController:detailView animated:YES];
        [detailView release];
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:26:27.637

您可能在表视图数据方法中传递 searchResult 数组以生成搜索研究表视图，在这种情况下，您的表视图 indexpath.row 和 searchResult 数组中的对象索引必须相同：所以使用以下

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath{

  if(canSelectRow){
     NSString * name = [searchResult objectAtIndex:indexPath.row] ;
/*
  or  you should instead save the Database object in searchResult Array directly instead of currow.name , in that case

       Database *currow = [searchResult objectAtIndex:indexPath.row] ;

    */

   }else{
    return nil;
   }
NSLog(@"%d", indexPath.row); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:30:41.343

您应该改用单元格的标签进行识别。在 cellForRowAtIndexPath 中使用此代码

```
 cell.tag = indexPath.row; 
```

然后取回 indexpath

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath{
        int ind = [tableView cellForRowAtIndexPath:indexPath].tag;
        //now you have real indexpath
    } 
```

# opengl - glDeleteVertexArrays 是否会导致与 VAO 被删除相关的 VBO 的删除？

> ID：14274860
> 
> 赞同：11
> 
> 时间：2013-01-11T09:11:48.043
> 
> 标签：opengl, vbo

根据[这个](https://stackoverflow.com/questions/10573684/vertex-buffer-objects-delete-process-opengl)问题， glDeleteBuffers 将缓冲区的视频内存标记为空闲。但是当我在 VAO 上调用 glDeleteVertexArrays 时，这个调用会删除与这个 VAO 链接的所有 VBO 吗？

如果不是，我应该什么时候删除 VBO？在删除 VAO 之前还是之后？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T09:48:48.943

> 但是当我在 VAO 上调用 glDeleteVertexArrays 时，这个调用会删除与这个 VAO 链接的所有 VBO 吗？

不，它将不再引用它们。如果您删除了这些缓冲区对象，并且没有其他对象引用它们（仅供参考：VAO 不是唯一可以引用缓冲区对象的东西），并且它们没有绑定到任何上下文，*那么*它们的存储将被破坏。

# java - Java for 循环迭代并列出颜色

> ID：14274871
> 
> 赞同：1
> 
> 时间：2013-01-11T09:12:12.927
> 
> 标签：java, for-loop, colors

在这段代码中

```
int[] values = new int[] {0, 32, 64, 96, 128, 160, 192, 224, 255};
        for (int r = 0; r < values.length; r++){
          for (int g = 0; g < values.length; g++){
            for (int b = 0; b < values.length; b++) {
                System.out.println("Colors are: " + values[r]+ ","+values[g]+ ","+values[b]); 
```

我有一个颜色列表，但它们没有排序：我希望更改此 for 循环，以便获得从白色到黑色或相反从黑色到白色的有序颜色列表。

如何改变这个循环？

非常感谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:30:51.997

我会这样写

```
int[] values = new int[]{0, 32, 64, 96, 128, 160, 192, 224, 255};
SortedMap<Long, Color> colours = new TreeMap<>(Collections.reverseOrder());
for (int r : values) {
    for (int g : values) {
        for (int b : values) {
            long brightness = (r + g + b) / 3;
            long colourScore = (brightness << 24) + (r << 8) + (g << 16) + b;
            colours.put(colourScore, new Color(r,g,b));
        }
    }
}
for (Color color : colours.values()) {
    System.out.println(color);
} 
```

这有利于红色和绿色而不是蓝色，因为蓝色与夜晚有关。;) 它打印

```
java.awt.Color[r=255,g=255,b=255]
java.awt.Color[r=255,g=255,b=224]
java.awt.Color[r=224,g=255,b=255]
java.awt.Color[r=255,g=224,b=255]
java.awt.Color[r=255,g=255,b=192]
java.awt.Color[r=224,g=255,b=224]
java.awt.Color[r=192,g=255,b=255]
... many deleted ...
java.awt.Color[r=32,g=0,b=32]
java.awt.Color[r=0,g=0,b=64]
java.awt.Color[r=0,g=32,b=0]
java.awt.Color[r=32,g=0,b=0]
java.awt.Color[r=0,g=0,b=32]
java.awt.Color[r=0,g=0,b=0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T09:16:47.020

你需要：

1.  `Color`代表完整 RGB 三元组的类；
2.  实施`Comparable`on `Color`，从而准确确定构成您所需颜色顺序的内容；
3.  在您的嵌套循环中，您将构建`TreeSet`所有颜色的 a。当你迭代它时，你会得到你想要的顺序的颜色。

由于颜色本质上是三维实体，因此如何线性化它们的顺序并不是很明显，因此您必须做出一些妥协。

# php - 正则表达式匹配字符，除非它们位于字符串的末尾

> ID：14274888
> 
> 赞同：0
> 
> 时间：2013-01-11T09:13:13.820
> 
> 标签：php, regex, replace

不知道如何解释这一点，但它就是这样。

`$val`可以包含一个字符串，后跟无、一个或多个点：

```
test
test.
test..
test... 
etc 
```

使用正则表达式我正在寻找任何无效字符`$val`，然后我想替换它们。

```
(preg_replace('-['.$inv.']-',"",$val)) 
```

`$inv`是一个无效条目数组，这也包括一个点。

除了最后的任何点外，如何去除所有`$inv`字符？`$val`

如果`$val = te%st...`正确的结果应该是测试...</p>

如果`$val = te.est.`正确的结果应该被测试。

希望这是有道理的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:18:07.653

您不需要正则表达式，只需使用`str_replace`删除所有不需要的字符：

```
$replace = array('.', ','); // The characters you want to replace.
echo str_replace($replace, '', '..,.Here,, ..be some text,.');
// Result:
// 'Here be some text' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:19:02.690

下面的代码将从字符串中删除所有非字母数字字符。

```
$string = "Sample text with letters and numbers 45678 and special symbols ($*&#($*#"; 

$new_string = ereg_replace("[^A-Za-z0-9]", "", $string); 

echo $new_string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:23:22.497

试试这个

```
<?php
    $val = '
    test
test.
test..
test... 
etc
    ';
    $inv = 'te';
    $ret = preg_replace("@([$inv].+)\.@",'',$val);

    var_dump($val);
    var_dump($ret); 
```

$ret 现在包含

```
test

etc 
```

# c# - 将数据添加到 WebResponse

> ID：14274895
> 
> 赞同：0
> 
> 时间：2013-01-11T09:14:11.323
> 
> 标签：c#, response, webrequest, outputstream, webresponse

我通过 webrequest POST 方法发送了一些数据。我知道如何捕获和修改数据，但我无法将其放回响应并将其发送回客户端。我尝试了 4 种方法，但没有任何效果。

服务器部分

```
this.Response.ContentType = "text/xml";
StreamReader reader = new StreamReader(this.Request.InputStream);
string x = reader.ReadToEnd();
if (x != "")
{
    string xml = HttpUtility.UrlDecode(x);
    XDocument xmlInput = XDocument.Parse(xml);
    EditXml(xmlInput);
    String str = "This is testing";
    System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
    byte[] b = encoding.GetBytes(str);
    Response.OutputStream.Write(b, 0, b.Length);
    //Response.ContentType = "text/xml";
    //Response.Clear();
    //Response.BufferOutput = true;
    //xmlInput.Save(Response.OutputStream);
    //Response.Flush(); 
```

客户部分

```
WebRequest request = WebRequest.Create(uri);
            request.Method = "POST";
            request.ContentLength = System.Text.Encoding.Default.GetByteCount(data);
            request.ContentType = "application/x-www-form-urlencoded";
            requestStream = request.GetRequestStream();
            StreamWriter writer = new StreamWriter(requestStream);
            writer.Write(data);
            writer.Close();
            responseStream = request.GetResponse().GetResponseStream();
            StreamReader reader = new StreamReader(responseStream);
            string received = reader.ReadToEnd(); 
```

在那里，我展示了两种尝试将数据响应的方法，但都不起作用……我完全错了，我只是在最后一步中遗漏了一些简单的东西吗？:-)

# java - Wicket：在 onSubmit 之后下载文件

> ID：14274897
> 
> 赞同：5
> 
> 时间：2013-01-11T09:14:16.720
> 
> 标签：java, web, wicket, wicket-1.5

所以我有一个`DataView`三列，其中一列是一个复选框列，允许用户检查他们想要下载的文件。

为简单起见（我认为）；我决定将文件压缩成一个 zip 文件并在生成后提供。

这是我到目前为止所拥有的：

**代码:** :

* * *

```
 Button downloadLogButton = new Button("downloadlogbutton") {
        private static final long serialVersionUID = 1L;
        @Override
        public void onSubmit() {
            // Some utility class I made that zips files
            LogUtility util = new LogUtility();
            util.zipLogFiles("sample", logs);
        }
    };

    Form logsForm = new Form("logsform") {

    };

    logsForm.add(downloadLogButton);

    CheckGroup<File> checkGroup = new CheckGroup<File>("logscheckgroup", new ArrayList<File>());
    WebMarkupContainer logsViewContainer = new WebMarkupContainer("datatable");
    DataView<File> logsView = new DataView<File>("logrows", new ListDataProvider<File>(logs)) {

        private static final long serialVersionUID = 1L;

        public void populateItem(final Item<File> item) {
            final File file = (File) item.getModelObject();
            item.add(new Check<File>("logdownloadcheck", item.getModel()));
            item.add(new Label("logname", file.getName()));
            SimpleDateFormat sdf = new SimpleDateFormat( "E, dd MMM yyyy  hh:mm a");
            item.add(new Label("logdatemodified", sdf.format(file .lastModified())));
        }
    };

    logsViewContainer.add(logsView);
    checkGroup.add(logsViewContainer);
    logsForm.add(checkGroup);
    add(logsForm); 
```

* * *

生成下载后如何提供 zip 文件？我有哪些选择？我想避免将它们重定向到确认页面或`Your download is ready`页面。

**更新**

基于 Xavi López 的回答，我在我`Button`的`onSubmit`函数中添加了以下代码。

```
org.apache.wicket.util.file.File log = new org.apache.wicket.util.file.File("/home/keeboi/Downloads/sample.zip");

IResourceStream resourceStream = new FileResourceStream(log);
IRequestHandler target = new ResourceStreamRequestHandler(resourceStream);

getRequestCycle().scheduleRequestHandlerAfterCurrent(target); 
```

我得到了`HTTP Error 404: Not Found`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T11:03:50.093

您可以像做一样做并从压缩文件`DownloadLink`创建一个。`FileResourceStream`然后，只需更改当前请求周期的目标：

```
Button downloadLogButton = new Button("downloadlogbutton") {
    private static final long serialVersionUID = 1L;
    @Override
    public void onSubmit() {
        // Some utility class I made that zips files
        LogUtility util = new LogUtility();
        util.zipLogFiles("sample", logs);
        IResourceStream resourceStream = new FileResourceStream(
            new org.apache.wicket.util.file.File(someFile)); // Use whatever file you need here
        IRequestTarget t = new ResourceStreamRequestTarget(stream){
            @Override
            public String getFileName() {
                return "filename.zip";
            }
        }
        getRequestCycle().setRequestTarget(t);
    }
}; 
```

如果你想在下载后删除文件，你可以这样覆盖`IRequestTarget#respond(RequestCycle)`：

```
@Override
public void respond(RequestCycle requestCycle) {
    super.respond(requestCycle);
    // Delete the file
    ((FileResourceStream)getResourceStream()).getFile().delete();
} 
```

以下相关问题也可能有用：[How to use Wicket's DownloadLink with a file on the fly?](https://stackoverflow.com/q/7646270/851811) .

# xml - POST 请求（GWT：Requestbuilder）。错误的内容类型：application/x-www-form-urlencoded 而不是 application/xml

> ID：14274902
> 
> 赞同：0
> 
> 时间：2013-01-11T09:14:43.930
> 
> 标签：xml, rest, gwt, jax-rs, content-type

我想使用 RequestBuilder 在客户端 (GWT) 上调用我的 REST 服务。我需要序列化一个复杂类型（Connexion），我选择了 Piriti。序列化似乎工作正常。然后我将复杂对象的字符串表示附加到正文的请求并发送 POST 请求。

但我有以下错误：

> org.jboss.resteasy.spi.BadRequestException：找不到类型的消息正文阅读器：com.ald.projet.property.Connexion 内容类型：application/x-www-form-urlencoded

我在服务器端使用 RESTeasy，它似乎没有收到正确的内容类型。

我检查了萤火虫，我的请求的内容类型是 application/xml ...不是 application/x-www-form-urlencoded

> ```
> Request headers
>  Host: 127.0.0.1:8888
>  User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0
>  Accept: application/xml
>  Accept-Language: fr,fr-fr;q=0.8,en-us;q=0.5,en;q=0.3
>  Accept-Encoding: gzip, deflate
>  Connection: keep-alive
>  Referer: http://127.0.0.1:8888/Front_End.html?gwt.codesvr=127.0.0.1:9997
>  Content-Type: application/xml; charset=UTF-8
>  Content-Length: 109
>  Pragma: no-cache
>  Cache-Control: no-cache
> 
> Response headers
>   Content-Type: text/html; charset=iso-8859-1
>   Server  Jetty(6.1.x) 
> ```

发布内容

```
<connexion>
  <login>azerty</login>
  <password>azerty</password>
</connexion> 
```

**客户端**

```
 Connexion connexion = new Connexion("azerty", "azerty");

    String url ="proxy.jsp?url=" + URL.encode("http://localhost:8080/rest/service/connexion");
    RequestBuilder builder = new RequestBuilder(RequestBuilder.POST, url);

    builder.setHeader("Content-Type", "application/xml");
    builder.setHeader("Accept", "application/xml"); 

    //serialization with Piriti     
    String xml = Connexion.WRITER.toXml(connexion);
    builder.setRequestData(xml);

    builder.setCallback(new RequestCallback() {

        @Override
        public void onResponseReceived(Request request, Response response) {
            GWT.log(response.getText());
            System.out.println(response.getText().trim());
        }

        @Override
        public void onError(Request request, Throwable exception) {
        }
    });

    try{
        builder.send();
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

**休息服务（服务器端）**

```
@POST
@Path("/connexion")
//@Consumes("application/xml")
@Produces("application/xml")
public Response connexion(Connexion connexion){
    String status = connexionDAO.isValidConnection(connexion);

    return Response.ok(status).build();

} 
```

**Connexion.java**客户端

```
public class Connexion {

interface ConnexionReader extends XmlReader<Connexion> {}
public static final ConnexionReader XML = GWT.create(ConnexionReader.class);

public interface ConnexionWriter extends XmlWriter<Connexion> {}
public static final ConnexionWriter WRITER = GWT.create(ConnexionWriter.class);

private String login;
private String password;

public Connexion(){

}

public Connexion(String login, String password) {
    super();
    this.login = login;
    this.password = password;
}
public String getLogin() {
    return login;
}
public void setLogin(String login) {
    this.login = login;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
} 
```

}

**Connexion.java**服务器端

```
@Embeddable
@XmlRootElement(name = "connexion")
public class Connexion {

private String login;
private String password;

public Connexion(){

}

public Connexion(String login, String password) {
    super();
    this.login = login;
    this.password = password;
}

@XmlElement
public String getLogin() {
    return login;
}
public void setLogin(String login) {
    this.login = login;
}

@XmlElement
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
} 
```

}

发生了什么事，我该怎么做才能让它发挥作用？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:48:35.127

事实上，我的代理正在修改我的请求内容。

我在 Jetty（后端）上部署了我的 GWT 应用程序并解决了它，它只持续一台服务器，所以我没有 SOP 问题。不再需要使用一些代理，但是每次我在客户端更改某些内容时，我都必须重新部署它，这是浪费时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:43:04.487

取消注释 @Consumes("application/xml") 以作为 XML 处理，而不是默认的 application/x-www-form-urlencoded

# c# - 将扭转它的整数序列

> ID：14274903
> 
> 赞同：0
> 
> 时间：2013-01-11T09:14:52.030
> 
> 标签：c#, integer, int, sequence, divide

我必须制作一个整数序列，稍后将其翻转。例子。如果整数是 0,1,2,3,4，它最终会将其转为 -4,-3,-2,-1,0。

我试过这个，我拥有的int值（mas1）除以-1，所以它会改变数字上的标记。如果我尝试过，我会遇到错误并且无法解决。错误 ：

> " 运算符 '/' 不能应用于 'int[]' 和 'int' 类型的操作数"

这是代码：

```
int[] mas1 = { 0, 1, 2, 3, 4 };
int mas2;
int[] mass = new int[1]{mas1.Length};
Array.Sort(mass);
int arvud = mas1.Length;
int[] koik = new int[arvud];
List<int> list = new List<int>();
foreach (int i in mass)

if (i == mas1.Length) foreach (int a in mas1) list.Add(a);

foreach (int i in list) Console.Write(i + ",");

mas1 / -1 = mas2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:17:15.630

使用 LINQ，您可以：

```
int[] mas1 = new []{ 0, 1, 2, 3, 4 };
int[] newArray = mas1.Reverse().Select(r => r * -1).ToArray(); 
```

或者，如果您想对任何数字使用负号，无论是正数还是负数。

```
int[] newArray = mas1.Reverse().Select(r => -System.Math.Abs(r)).ToArray(); 
```

如果你像这样打印它：

```
foreach (int item in newArray)
{
    Console.WriteLine(item);
} 
```

那么输出将是：

```
-4
-3
-2
-1
0 
```

由于以下行，您会收到错误消息：

```
mas1 / -1 = mas2; 
```

您不能`mas1`用整数值 (-1) 划分数组。不过，我不确定您在代码中做了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:34:00.380

有一些不同的方法可以做到这一点。您可以否定每个项目并反转数组：

```
int[] mas1 = { 0, 1, 2, 3, 4 };
int[] mas2 = new int[mas1.Length];
for (int i = 0; i < mas1.Length; i++) {
  mas2[i] = -mas1[i];
}
Array.Reverse(mas2); 
```

您可以使用 LINQ 扩展方法来执行相同的操作：

```
int[] mas1 = { 0, 1, 2, 3, 4 };
int[] mas2 = mas1.Select(i => -i).Reverse().ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:29:57.407

如果你想就地编辑数组，你可以像这样有效地这样做：

```
int[] nums = { 0, 1, 2, 3, 4 };
var reverseVal = -nums[nums.Length - 1];
for (int i = 0; i < nums.Length; i++)
     nums[i] += reverseVal; 
```

假设数组按照您的示例进行排序，此代码采用最大数字（最后一个元素），反转它的符号以添加到每个元素，从而产生您想要的结果。

如果你想要一个新数组：

```
int[] mas1 = { 0, 1, 2, 3, 4 };
var len = mas1.Length;

int[] mas2 = new int[len];
var reverseVal = -mas1[len - 1];
for (int i = 0; i < len; i++)
   mas2[i] = mas1[i] + reverseVal; 
```

# java - Java Servlet 映射

> ID：14274912
> 
> 赞同：3
> 
> 时间：2013-01-11T09:15:18.283
> 
> 标签：java, exception, servlets, servlet-filters

我在 web.xml 中定义了一个 servlet：

```
<servlet-mapping>
  <servlet-name>SessionRebindServlet</servlet-name>
  <url-pattern>*.ppp</url-pattern>
</servlet-mapping> 
```

现在，当有一个带有扩展名的请求时，`.ppp`它会使用上面的 servlet。

但是我想在这里有一个例外，如果文件名为“popup.ppp”那么根本不调用这个servlet。

是否可以？

**更新**

我添加了一个过滤器

```
<filter-mapping>
    <filter-name>AppFilter</filter-name>
    <url-pattern>*.ppp</url-pattern>
</filter-mapping> 
```

并在过滤器代码中：

```
String url = ((HttpServletRequest) request).getRequestURI();
        if (url.contains("popup.ppp")) {

        } else {
            chain.doFilter(request, response);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:23:31.857

我在这种情况下使用它：

```
String lPath = ((HttpServletRequest) request).getRequestURI();
if (lPath.startsWith("/supported")) {
   chain.doFilter(request, response); 
} else {
  // not supported
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:26:55.157

不，您不能对`<url-mapping/>`元素执行此操作。有关所有选项，请参见[规范第 12 章。](http://download.oracle.com/otn-pub/jcp/servlet-3.0-mrel-eval-oth-JSpec/servlet-3_0-mrel-spec.pdf)

你不能映射到`/somepath/*.ppp`它不会干扰`popup.ppp`或调用`popup.ppp`其他东西吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:28:23.127

通过使用过滤器并简单地覆盖过滤器中的 doFilter() 方法：

字符串 url = request.getRequestURL().toString();

然后使用这个 url 并与 popup.ppp 比较它不等于然后 doFilter()

或者

试试这个（我没有检查过这个）

```
<servlet-mapping>
  <servlet-name>SessionRebindServlet</servlet-name>
  <url-pattern>*.ppp</url-pattern>
</servlet-mapping>

<servlet-mapping>
  <servlet-name>newServletName</servlet-name>
  <url-pattern>popup.ppp</url-pattern>
</servlet-mapping> 
```

# jquery - jQuery 幻灯片函数在 google chrome 浏览器中起作用

> ID：14274913
> 
> 赞同：0
> 
> 时间：2013-01-11T09:15:31.297
> 
> 标签：jquery, google-chrome

我目前正在为我工​​作的机构开发一个新网站，可以在这里找到：

[http://www.astwood.co.uk/testsite/wordpress/](http://www.astwood.co.uk/testsite/wordpress/)

右上角有两个按钮，可以向下滑动联系人和关于我们部分的额外内容。我使用以下 jQuery 为额外 div 的外观设置了动画：

在加载时隐藏页面上的内容：

```
$("#about").hide();
$("#contact").hide(); 
```

单击具有指定类的链接时显示和隐藏内容：

```
$(".aboutbtn").click(function () {
   $('#contact').slideUp(
   function() {

        $('#about').slideToggle('slow');

   });
});

$(".contactbtn").click(function () {
   $('#about').slideUp(
   function() {

        $('#contact').slideToggle('slow');

   });
}); 
```

这在大多数浏览器中都能完美运行，如果有一个打开的 div，它将隐藏现有的打开的 div，然后打开指定的部分。但是，在 chrome for mac 中，页面加载后第一次按下按钮时，它将向下滑动请求的内容并立即再次向上滑动。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:59:45.517

好吧，原来是一个浏览器插件干扰了 jQuery 的工作方式。有问题的浏览器扩展是双击，可以在这里找到：

[https://chrome.google.com/webstore/detail/double-click/mdoabndnbhmbbigggngmjbnoijnhfophe](https://chrome.google.com/webstore/detail/double-click/mdoabndnbhmbbiggngmjbnoijnhfophe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:54:00.597

两个想法：

*   自己编排切换动作，而不是依赖`.slideToggle()`；
*   `.stop(true,true)`在向上/向下滑动请求的元素之前发出问题

这些中的一个或其他或两者一起*可能会*产生正确的效果，尽管很难知道为什么。

这是两个想法的代码：

```
$(".aboutbtn").click(function() {
    var $about = $("#about").stop(true,true);
    $("#contact").slideUp(function() {
        var fn = ($about.is(":hidden")) ? 'slideDown' : 'slideUp';
        $about[fn]('slow');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:19:57.840

`$("#about").hide();`和可能`$("#contact").hide();`在 chrome 浏览器中运行较晚（似乎可以在我的 PC 上使用 chrome...）。

尝试在元素上放置 css 样式`display:none`，而不是使用 jQuery 来隐藏它们。这意味着当浏览器呈现它们时（甚至在 javascript 运行之前）它们将被隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T12:44:54.250

只需添加 clear: both 到您应用 slideToggle() 的 div/容器

动画需要溢出隐藏，无法正确获取高度。

它对我来说很清楚：两者。

# python - 在线程中执行 Twisted reactor.run()？

> ID：14274916
> 
> 赞同：10
> 
> 时间：2013-01-11T09:15:45.333
> 
> 标签：python, cocoa, ubuntu, twisted

我正在尝试制作一个 Python 库来使用来自 Objective-C 的 Ubutu One API。这是我的源代码： [https ://github.com/JoseExposito/U1-Finder-Plugin/blob/master/U1FinderLib/U1FinderLib.py](https://github.com/JoseExposito/U1-Finder-Plugin/blob/master/U1FinderLib/U1FinderLib.py)

我需要对 API 进行多次调用，因此我需要让我的反应器运行一次，而不是运行它并停止它，就像在 Ubuntu One 文档的示例中一样： [https ://one.ubuntu.com/developer /files/store_files/syncdaemontool](https://one.ubuntu.com/developer/files/store_files/syncdaemontool)

因为不可能运行两次反应器......而且我需要在线程中执行 reactor.run() 因为我无法阻止使用该库的应用程序！

有可能这样做吗？我无法在线程中运行反应器并同步调用 Ubuntu One API。

编辑：

我正在使用这个简单的源代码来测试这个想法：

```
#!/usr/bin/env python
import objc
import thread
import os
import time
from   twisted.internet import reactor, defer
from   ubuntuone.platform.tools import (SyncDaemonTool, is_already_running)
from   threading import Thread
NSObject = objc.lookUpClass('NSObject')

##
# Variable to get the result of the calls to the Sync Daemon.
# The result is a JSON string stored in returned_value[0].
returned_value = ['']

##
# Objective-C facade to the methods of the U1FinderLib.
class U1FinderLib(NSObject):

    def init(self):
        self = super(U1FinderLib, self).init()
        self.sync_daemon_tool = SyncDaemonTool(None)
        Thread(target=reactor.run, args=(False,)).start()
        return self

    @objc.typedSelector('@@:')
    def volumeList(self):
        print "Begin volumeList"
        reactor.callLater(0, run_command, "volume_list", [], self.sync_daemon_tool)
        print "End volumeList"
        return returned_value[0]

##
# Auxiliar functions to call to the sync daemon.
@defer.inlineCallbacks
def run_command(action, params, sync_daemon_tool):
    print "run_command"
    running = yield is_already_running()
    print "After is_already_running"
    try:
        if not running:
            returned_value[0] = '{ type:"error" reason:"Sync Daemon is not running" }'
        else:
            print "Before run_action"
            yield run_action(action, params, sync_daemon_tool)
            print "After run_action"
    except Exception, e:
        returned_value[0] = '{ type:"error" reason:"Exception: %s" }' % e

@defer.inlineCallbacks
def run_action(action, params, sync_daemon_tool):
    if action == "volume_list":
        d = sync_daemon_tool.get_folders()
        returned_value[0] = yield d.addCallback(lambda r: volume_list(r))

# Volume List
def volume_list(folders):
    volumes_json = '{ type:"volume_list" volumes: { \n\t{ volume:"' + os.path.expanduser('~/Ubuntu One') + '" subscribed:"YES" }'
    for folder in folders:
        volumes_json += ',\n\t{ volume:"' + folder['path'] + '" subscribed:"' + ('YES' if bool(folder['subscribed']) else 'NO') + '" }'
    volumes_json += '\n} }'
    return volumes_json

if __name__ == '__main__':
    py = U1FinderLib.alloc().init()
    print py.volumeList()
    print "EXIT" 
```

这是程序的输出：

```
Begin volumeList
End volumeList

EXIT 
```

问题是从未调用过“run_command”函数

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T16:39:11.593

与其在线程中运行反应器，不如使用与要在其中使用它的应用程序集成的反应器。

例如，也许您想使用[CoreFoundation 反应器](http://twistedmatrix.com/documents/current/core/howto/choosing-reactor.html#auto14)（因为您的应用程序使用 Obj-C 并且名称中有“Finder”）。

如果你真的不能这样做（例如，如果 Ubuntu One 需要一个不同的反应器——我不知道是不是这种情况），那么你可能可以在一个线程中运行那个反应器。大多数反应器都支持这一点，尽管如果 Ubuntu One 需要特定的反应器，该反应器可能不支持线程使用。

您实际上并没有解释尝试在线程中运行反应器时遇到的问题，所以我无法帮助您理解为什么它不起作用。但是，这样做应该很容易。只是：

```
from twisted.internet import reactor
from threading import Thread

Thread(target=reactor.run, args=(False,)).start() 
```

请记住，一旦您选择在线程中运行反应器，您**只能在****该**线程中使用 Twisted API 。

如果这不起作用，请提供有关它如何在您的问题中不起作用的更多详细信息。

# c# - 访问部分类返回的值

> ID：14274918
> 
> 赞同：2
> 
> 时间：2013-01-11T09:15:49.363
> 
> 标签：c#, asp.net

我在 asp.net 和 c# 中工作。

我的应用程序中有一个部分类。此类的一个方法返回一个值（**值是数据集**），如**返回值；**

示例代码：

```
 public partial class CommonClass : IDisposable
      {
        public static dataset somemethod(string somevariable)
          {

             //some code

             return variable;

          }

      } 
```

现在我想在我的代码隐藏中访问**变量**的值。我该怎么做。请给出一些建议..

**注意**：变量是一个数据集..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:17:51.790

就像这样你可以这样做，因为**方法是静态的，不需要创建任何类的实例，你可以如下调用它**

```
DataSet  ds =CommonClass.somemethod("mydata") ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:18:12.023

您可以调用`somemethod`类的静态方法`CommonClass`。**[您可以在此处](http://msdn.microsoft.com/en-us/library/aa645766%28v=vs.71%29.aspx)**阅读有关静态和实例方法的更多信息。

```
DataSet ds = CommonClass.somemethod("somevalue"); 
```

# java - UrlValidator 类型已弃用

> ID：14274919
> 
> 赞同：5
> 
> 时间：2013-01-11T09:15:57.543
> 
> 标签：java, jsf, validation

我正在编写一个自定义验证器来检查用户输入的 url：

```
package tn.talan.testFramework.validators;

import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;

import javax.faces.validator.Validator;
import javax.faces.validator.ValidatorException;

import org.apache.commons.validator.UrlValidator;

  public class URLCustomValidator implements Validator{

public void validate(FacesContext context, UIComponent component,Object value) throws ValidatorException {

    String enteredURL = (String) value;
    String[] schemes = {"http","https"};
    System.out.println(enteredURL);
    FacesMessage message = null ;
    String messageStr = null ;

            UrlValidator urlValidator = new UrlValidator(schemes);

           if (!urlValidator.isValid(enteredURL)) {
               System.out.println("url is invalid valid");
               message = new FacesMessage();
               messageStr = (String)component.getAttributes().get("message");
               if (messageStr == null) {

                    messageStr = "Inavalid URL";

                  }
                  message.setDetail(messageStr);

                  message.setSummary(messageStr);

                  message.setSeverity(FacesMessage.SEVERITY_ERROR);

                  throw new ValidatorException(message);
               } 

          }

} 
```

我收到此警告，我想解决它：

```
The type UrlValidator is deprecated 
```

提前谢谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T09:22:21.063

[org.apache.commons.validator.UrlValidator](http://org.apache.commons.validator.UrlValidator)包中的 UrlValidator已弃用，请使用此[Routines](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/UrlValidator.html)包中的 UrlValidator：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:25:40.907

The [UrlValidator](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/UrlValidator.html) that you are using is deprecated an will be removed in future releases.

You should replace it by the [UrlValidator](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/UrlValidator.html) in the routines package. The routines package can be found in the Apache Commons [Validator](http://commons.apache.org/validator/) component.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:20:59.893

根据JavaDoc：

> 在routines 包中使用新的UrlValidator。此类将在未来的版本中删除。

# ant - Groovy ant task: Specifiying additional groovy files

> ID：14274925
> 
> 赞同：0
> 
> 时间：2013-01-11T09:16:23.147
> 
> 标签：ant, groovy

In our ANT build files we sometimes call groovy scripts

```
<groovy src="${groovy.script.dir}/DoIt.groovy"/> 
```

Is there a way to specify one or more additional Groovy files? Our use case is that we define some constants in a separate that should be used in several scripts.

Do we have to compile your scripts to .class files in order to use them as intended, or is there a groovier way of achieving our goal?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:28:11.610

[The docs](http://groovy.codehaus.org/The+groovy+Ant+Task) for the `<groovy>` task say that when you specify the `src` attribute:

> The directory containing the file is added to the classpath

So other groovy classfiles in the same folder should be accessible from the script you declare.

Is this not working?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:28:20.543

I had the same kind of issue in the past, using Groovy 1.8.1\. I couldn't find in the documentation how to use several script files within the same `<groovy>` task (see also the ant `<script>` task's doc). Using several tasks didn't work either for me, because the context was reset between them.

I haven't upgraded to Groovy 2.x.y as I don't use it that much. Below I illustrate a possible workaround with 1.8.1; perhaps it's still valid.

```
<property name="home" location="/Users/coyote/mytest/ant/src"/>
<property name="gscript1" location="${home}/my/own/pack/foo.groovy"/>
<property name="gscript2" location="${home}/my/own/pack/bar.groovy"/>

<groovy>
  evaluate( new File(properties.'gscript1') );
  evaluate( new File(properties.'gscript2') );
</groovy> 
```

`evaluate()` takes either a String or a Script file, on which it performs a dynamic evaluation -according to the API doc- using the current bindings. Those are the bindings of the `<groovy>` task, I presume.

I'm not sure I understand your use case, but with this model you can of course define constants first; hardcoded, as properties + code, or in a groovy-script-file + evaluate.

# mysql - LIKE 子句和 AND 运算符在 DELETE 期间不起作用

> ID：14274927
> 
> 赞同：2
> 
> 时间：2013-01-11T09:16:27.830
> 
> 标签：mysql, sql, sql-like

我正在尝试在mysql中执行这样的命令：

```
DELETE FROM product_description, product, product_to_store, url_alias WHERE
product_description.name LIKE '%|%' AND product.product_id = 
product_description.product_id AND product_to_store.product_id = 
product_description.product_id AND url_alias.query = 
CONCAT('product_id=',product_description.product_id) 
```

但是它给了我一个错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your  MySQL server version for the right syntax to use near 'WHERE product_description.name LIKE '%|%' AND product.product_id = product_descr' at line 1 
```

当我将 'DELETE' 替换为 'SELECT *' 时，查询就像一个魅力。

根据mysql文档

> 目前，您不能在子查询中从表中删除并从同一个表中选择。

所以现在我不知道如何在不使用 PHP 的情况下执行这样的查询

**已编辑**

我的最终查询有效：

```
DELETE product_description, product, product_to_store, url_alias 
FROM product_description, product, product_to_store, url_alias 
  WHERE product_description.name LIKE '%|%' AND product.product_id = 
  product_description.product_id AND product_to_store.product_id = 
  product_description.product_id AND url_alias.query = 
  CONCAT('product_id=',product_description.product_id) 
```

所以提示是在 DELETE 之后添加所有 4 个表名以使其工作，正如 JW 所写

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:18:22.060

您需要指定删除应该发生的位置，在下面的示例中，记录将在表中删除`product_description`

```
DELETE product_description
FROM product_description, product, product_to_store, url_alias 
WHERE product_description.name LIKE '%|%' AND product.product_id = 
      product_description.product_id AND product_to_store.product_id = 
      product_description.product_id AND url_alias.query = 
      CONCAT('product_id=',product_description.product_id) 
```

或使用`ANSI SQL-92`格式

```
DELETE  product_description
FROM    product_description
        INNER JOIN product 
            ON product.product_id = product_description.product_id
        INNER JOIN product_to_store 
            ON product_to_store.product_id = product_description.product_id
        INNER JOIN url_alias 
            ON url_alias.query = CONCAT('product_id=',product_description.product_id)
WHERE   product_description.name LIKE '%|%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:25:30.523

Delete syntax is:

```
DELETE FROM table_name [WHERE Clause] 
```

you can't give multiple table_names in FROM clause (without JOIN, and USING clause).

```
DELETE table_name FROM table_name
INNER JOIN .... 
```

or

```
DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
FROM tbl_name[.*] [, tbl_name[.*]] ...
USING table_references
[WHERE where_condition] 
```

Reference: [**13.2.2\. DELETE Syntax**](http://dev.mysql.com/doc/refman/5.0/en//delete.html)
[And Mr. JW already given you an answer]

**USING example**

```
DELETE  
FROM    `product_description`, 
        `product`, 
        `product_to_store`, 
        `url_alias`

USING  `product_description`
        INNER JOIN `product` 
         ON `product`.`product_id` = `product_description`.`product_id`
        INNER JOIN `product_to_store` 
         ON `product_to_store`.`product_id` = `product_description`.`product_id`
        INNER JOIN `url_alias` 
         ON `url_alias`.`query` =
               CONCAT('product_id=',`product_description`.`product_id`)
WHERE   `product_description`.`name` LIKE '%|%' 
```

**Side note:** *Always use (`) for user defined identifiers.*

# json - ZeroMQ 上基于 JSON 的 API

> ID：14274930
> 
> 赞同：8
> 
> 时间：2013-01-11T09:16:45.067
> 
> 标签：json, zeromq

大多数现代 API 都是使用 JSON 和 HTTP 上的请求/响应消息构建的。既然 ZeroMQ 是基于 TCP 的，那么基于 JSON 的 API 是否可以基于 ZeroMQ 构建？如果是这样，有什么好处？用途是

1.  开发人员为与一个或多个网络服务器通信的客户端/设备编写应用程序，以及

2.  网络服务器与网络服务器通信。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T16:37:30.360

是的，基于 json 的 API 可以构建在 ZeroMQ 之上，而不是 HTTP。它需要 REQ/REP 套接字。不过，这似乎不是一个好的选择。

JSON+HTTP 方法的主要优点是可移植性。几乎所有编程环境都开箱即用地支持 JSON+HTTP，ZeroMQ 没有得到如此广泛的支持（例如，浏览器 JS 不支持）。此外，ZeroMQ 的设置也不是那么轻松，因此服务消费者可能不会对这种选择感到满意。

另一方面，ZeroMQ 的主要优势是性能：如果您需要每秒推送许多兆字节（或可能是千兆字节）的数据，它会很棒。JSON 编码/解码速度非常快，但大小对于此类任务也很重要。任何二进制序列化框架似乎都是更好的选择，有很多：protobuf、thrift、BSON、kryo、avro 等。

所以，我会继续将 JSON+HTTP 用于 Web 服务的 API：现代 HTTP 服务器工具提供了出色的性能和可扩展性。ZeroMQ 是在受控环境中进行通信的绝佳选择，因为它具有并发特性和明确定义的使用模式。

# asp.net - 天蓝色虚拟机上的 Asp .Net 状态服务器

> ID：14274933
> 
> 赞同：0
> 
> 时间：2013-01-11T09:16:56.643
> 
> 标签：asp.net, azure-virtual-machine

我正在尝试将我的 asp .net 会话存储在 azure 虚拟机上。我查找了虚拟机的公共虚拟 IP 地址，并在我的 web.config 中使用了该地址。

所以在我的 web.config 我有这样的东西：

```
<sessionState mode="StateServer" stateConnectionString="tcpip=ip_address:42424" cookieless="false" timeout="20" />
<machineKey validationKey="validation_key" decryptionKey="decriptionkey" validation="SHA1" decryption="Auto" /> 
```

我还在虚拟机的注册表中进行了更改，以允许远程连接到状态服务器。但它仍然不起作用。这可能是防火墙问题吗？或者 azure 虚拟机不能用于此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:45:56.897

原来我误解了天蓝色虚拟机的工作方式。我需要向 azure 虚拟机添加一个端点。

在我的情况下，我在端点中输入了 asp .net 状态服务器端口，它是 42424，然后它就可以工作了。我还在防火墙中为 asp .net 状态服务添加了规则。

# forms - 如何创建编辑/更新表单

> ID：14274935
> 
> 赞同：0
> 
> 时间：2013-01-11T09:17:05.007
> 
> 标签：forms, entity-framework, symfony, symfony-2.0

我尝试在 Symfony 中制作编辑表单

```
public function editAction()
{
  $id      = 5;
  $em      = $this->getDoctrine()->getEntityManager();
  $request = $this->get('request');
  $entity  = $em->getRepository('SurgeryPatientBundle:Patients')->find($id);
  $form    = $this->createForm(new \Surgery\PatientBundle\Form\PatientsType(), $entity);
  $form->bindRequest($request);

  return $this->render('SurgeryPatientBundle:Patient:newpatient.html.twig',array('form'=>$form->createView()));

  if($form->isValid())
  {
    //do someting
  }
  else
  {
    //do something
  }
} 
```

我仍然得到没有数据的空表单，变量`$entity`是 isset。我确实插入了表单，但我无法处理编辑操作。我不想使用终端创建表单，`php app/console`因为我想知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:53:15.307

假设您使用的是**symfony 2.0.x**：

您不应该在将数据发送到视图之前绑定您的请求，也不应该在测试提交的数据之前渲染视图（我猜您向我们展示了测试代码）

```
public function editAction()
{
    $id      = 5;
    $em      = $this->getDoctrine()->getEntityManager();
    $request = $this->get('request');
    $entity  = $em->getRepository('SurgeryPatientBundle:Patients')->find($id);
    $form    = $this->createForm(new \Surgery\PatientBundle\Form\PatientsType(), $entity);

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);

        if ($form->isValid()) {
            return $this->redirect($this->generateUrl('task_success'));
        }
    }

    return $this->render('SurgeryPatientBundle:Patient:newpatient.html.twig',array('form'=>$form->createView()));
} 
```

# javascript - TypeScript 的依赖排序器

> ID：14274941
> 
> 赞同：1
> 
> 时间：2013-01-11T09:17:36.190
> 
> 标签：javascript, typescript

我在`TypeScript`. 如何对它们进行排序以使一切正常？有什么工具吗？

问题看起来像这样......我有 2 个模块：

```
module Module1 {
   export class A {
   }

   export class B {
   }
}

module Module2 {
   export class C {
   }

   export class D {
   }
} 
```

`Module1`使用来自 的类`Module2`并`Module2`使用来自 的类`Module1`。所以这是一种循环（在模块上）。现在当我将它编译成`JavaScript`我得到一个错误：

`Microsoft JScript runtime error: 'Module2' is undefined`

它发生了，因为`Module2` `JS`引用应该包含在`Module1`. 当我有这样的循环时，如何解决这个问题？是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:28:24.913

在面向对象编程中，它有助于使依赖项在一个方向上流动。让 Module1 依赖于 Module2 以及 Module2 依赖于 Module1 会导致问题，即使在允许循环依赖的语言中也是如此。

您应该能够通过拥有一个依赖于 Module1 和 Module2 的 Module3 来解决该问题 - 不依赖于 Module3。在示例中，我假设 B 依赖于 C 而 D 依赖于 A：

```
module Module1 {
   export class A {
   }
}

module Module2 {
   export class C {
   }
}

module Module3 {
   export class B {
   }

   export class D {
   }
} 
```

另一种解决方案可能是接受如果这两个模块有这么多依赖项 - 它们可能应该只是一个模块。

```
module Module1 {
   export class A {
   }

   export class B {
   }

   export class C {
   }

   export class D {
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T10:15:42.313

我有一个专门用于此目的的 grunt 插件：[https ://github.com/basarat/grunt-ts#javascript-generation-and-ordering](https://github.com/basarat/grunt-ts#javascript-generation-and-ordering)

另请查看视频教程：[http ://www.youtube.com/watch?v=0-6vT7xgE4Y&hd=1](http://www.youtube.com/watch?v=0-6vT7xgE4Y&hd=1)

# sql-server - SQL Server CTE 和递归示例

> ID：14274942
> 
> 赞同：116
> 
> 时间：2013-01-11T09:17:37.907
> 
> 标签：sql-server, common-table-expression

我从不使用递归的 CTE。我只是在读一篇关于它的文章。本文借助 Sql server CTE 和递归显示员工信息。它基本上显示员工及其经理信息。我无法理解这个查询是如何工作的。这是查询：

```
WITH
  cteReports (EmpID, FirstName, LastName, MgrID, EmpLevel)
  AS
  (
    SELECT EmployeeID, FirstName, LastName, ManagerID, 1
    FROM Employees
    WHERE ManagerID IS NULL
    UNION ALL
    SELECT e.EmployeeID, e.FirstName, e.LastName, e.ManagerID,
      r.EmpLevel + 1
    FROM Employees e
      INNER JOIN cteReports r
        ON e.ManagerID = r.EmpID
  )
SELECT
  FirstName + ' ' + LastName AS FullName,
  EmpLevel,
  (SELECT FirstName + ' ' + LastName FROM Employees
    WHERE EmployeeID = cteReports.MgrID) AS Manager
FROM cteReports
ORDER BY EmpLevel, MgrID 
```

在这里，我发布了有关输出显示方式的信息： ![在此处输入图像描述](../Images/abe30e4c7419091d959499b0e64f4691.png)

我只需要知道它是如何首先显示经理，然后是他的下属循环。我猜第一个 sql 语句只触发一次并返回所有员工 ID。

第二个查询重复触发，使用当前经理 ID 查询员工所在的数据库。

请解释sql语句如何在内部循环中执行，并告诉我sql执行顺序。谢谢。

## 我的第二阶段问题

```
;WITH Numbers AS
(
    SELECT n = 1
    UNION ALL
    SELECT n + 1
    FROM Numbers
    WHERE n+1 <= 10
)
SELECT n
FROM Numbers 
```

Q 1) N 的值是如何增加的？如果每次都将值分配给 N，则 N 值可以递增，但仅在第一次初始化 N 值时。

Q 2) CTE和员工关系的递归：

当我添加两名经理并在第二名经理下添加更多员工时，问题就开始了。

我想显示第一个经理详细信息，并且在下一行中仅显示与该经理的下属相关的员工详细信息。

## 认为

```
ID     Name      MgrID    Level
---    ----      ------   -----
1      Keith      NULL     1
2      Josh       1        2
3      Robin      1        2
4      Raja       2        3
5      Tridip     NULL     1
6      Arijit     5        2
7      Amit       5        2
8      Dev        6        3 
```

我想用 CTE 表达式以这种方式显示结果。请告诉我要在我这里给出的 sql 中修改什么，以便拉动经理-员工关系。谢谢。

## 我希望输出是这样的：

```
ID          Name   MgrID       nLevel      Family
----------- ------ ----------- ----------- --------------------
1           Keith  NULL        1           1
3           Robin  1           2           1
2           Josh   1           2           1
4           Raja   2           3           1
5           Tridip NULL        1           2
7           Amit   5           2           2
6           Arijit 5           2           2
8           Dev    6           3           2 
```

这可能吗...？

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-01-11T09:28:23.143

我没有测试你的代码，只是想帮助你理解它是如何在注释中运行的；

```
WITH
  cteReports (EmpID, FirstName, LastName, MgrID, EmpLevel)
  AS
  (
-->>>>>>>>>>Block 1>>>>>>>>>>>>>>>>>
-- In a rCTE, this block is called an [Anchor]
-- The query finds all root nodes as described by WHERE ManagerID IS NULL
    SELECT EmployeeID, FirstName, LastName, ManagerID, 1
    FROM Employees
    WHERE ManagerID IS NULL
-->>>>>>>>>>Block 1>>>>>>>>>>>>>>>>>
    UNION ALL
-->>>>>>>>>>Block 2>>>>>>>>>>>>>>>>>    
-- This is the recursive expression of the rCTE
-- On the first "execution" it will query data in [Employees],
-- relative to the [Anchor] above.
-- This will produce a resultset, we will call it R{1} and it is JOINed to [Employees]
-- as defined by the hierarchy
-- Subsequent "executions" of this block will reference R{n-1}
    SELECT e.EmployeeID, e.FirstName, e.LastName, e.ManagerID,
      r.EmpLevel + 1
    FROM Employees e
      INNER JOIN cteReports r
        ON e.ManagerID = r.EmpID
-->>>>>>>>>>Block 2>>>>>>>>>>>>>>>>>
  )
SELECT
  FirstName + ' ' + LastName AS FullName,
  EmpLevel,
  (SELECT FirstName + ' ' + LastName FROM Employees
    WHERE EmployeeID = cteReports.MgrID) AS Manager
FROM cteReports
ORDER BY EmpLevel, MgrID 
```

`CTE`我能想到的用于说明其操作的最简单的递归示例是：

```
;WITH Numbers AS
(
    SELECT n = 1
    UNION ALL
    SELECT n + 1
    FROM Numbers
    WHERE n+1 <= 10
)
SELECT n
FROM Numbers 
```

**Q 1) N 的值如何增加。如果每次都将 value 分配给 N ，则 N 值可以增加，但只有第一次 N 值被初始化**。

`A1:`在这种情况下，`N`不是变量。`N`是别名。它相当于`SELECT 1 AS N`。这是个人喜好的语法。`CTE`在in 中有 2 种主要的别名列方法`T-SQL`。我已经包含了一个简单的模拟，`CTE`以`Excel`尝试以更熟悉的方式说明正在发生的事情。

```
--  Outside
;WITH CTE (MyColName) AS
(
    SELECT 1
)
-- Inside
;WITH CTE AS
(
    SELECT 1 AS MyColName
    -- Or
    SELECT MyColName = 1  
    -- Etc...
) 
```

![Excel_CTE](../Images/2fb5ba665b2e600df9ade9964c999699.png)

**Q 2）现在这里是关于 CTE 和员工关系的递归，当我添加两名经理并在第二名经理下添加更多员工然后问题开始时。我想显示第一个经理的详细信息，在接下来的行中，只有那些员工的详细信息才会出现在该经理的下属**

`A2:`

这段代码能回答你的问题吗？

```
--------------------------------------------
-- Synthesise table with non-recursive CTE
--------------------------------------------
;WITH Employee (ID, Name, MgrID) AS 
(
    SELECT 1,      'Keith',      NULL   UNION ALL
    SELECT 2,      'Josh',       1      UNION ALL
    SELECT 3,      'Robin',      1      UNION ALL
    SELECT 4,      'Raja',       2      UNION ALL
    SELECT 5,      'Tridip',     NULL   UNION ALL
    SELECT 6,      'Arijit',     5      UNION ALL
    SELECT 7,      'Amit',       5      UNION ALL
    SELECT 8,      'Dev',        6   
)
--------------------------------------------
-- Recursive CTE - Chained to the above CTE
--------------------------------------------
,Hierarchy AS
(
    --  Anchor
    SELECT   ID
            ,Name
            ,MgrID
            ,nLevel = 1
            ,Family = ROW_NUMBER() OVER (ORDER BY Name)
    FROM Employee
    WHERE MgrID IS NULL

    UNION ALL
    --  Recursive query
    SELECT   E.ID
            ,E.Name
            ,E.MgrID
            ,H.nLevel+1
            ,Family
    FROM Employee   E
    JOIN Hierarchy  H ON E.MgrID = H.ID
)
SELECT *
FROM Hierarchy
ORDER BY Family, nLevel 
```

## 另一种具有树结构的sql

```
SELECT ID,space(nLevel+
                    (CASE WHEN nLevel > 1 THEN nLevel ELSE 0 END)
                )+Name
FROM Hierarchy
ORDER BY Family, nLevel 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-20T21:26:41.187

执行过程确实与递归 CTE 混淆，我在[https://technet.microsoft.com/en-us/library/ms186243(v=sql.105).aspx](https://technet.microsoft.com/en-us/library/ms186243(v=sql.105).aspx)和 CTE 执行过程的摘要中找到了最佳答案如下。

递归执行的语义如下：

1.  将 CTE 表达式拆分为锚和递归成员。
2.  运行创建第一个调用或基本结果集 (T0) 的锚成员。
3.  以 Ti 作为输入和 Ti+1 作为输出运行递归成员。
4.  重复步骤 3，直到返回一个空集。
5.  返回结果集。这是 T0 到 Tn 的 UNION ALL。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-07-29T07:45:35.527

想概述一个与已经正确答案平行的简短语义。

用“简单”的术语来说，递归 CTE 可以在语义上定义为以下部分：

1：CTE 查询。也称为锚。

2：使用UNION ALL（或UNION或EXCEPT或INTERSECT）对（1）中的CTE进行递归CTE查询，从而相应地返回最终结果。

3：拐角/终止条件。默认情况下，当递归查询不再返回行/元组时。

一个可以使图片清晰的简短示例：

```
;WITH SupplierChain_CTE(supplier_id, supplier_name, supplies_to, level)
AS
(
SELECT S.supplier_id, S.supplier_name, S.supplies_to, 0 as level
FROM Supplier S
WHERE supplies_to = -1    -- Return the roots where a supplier supplies to no other supplier directly

UNION ALL

-- The recursive CTE query on the SupplierChain_CTE
SELECT S.supplier_id, S.supplier_name, S.supplies_to, level + 1
FROM Supplier S
INNER JOIN SupplierChain_CTE SC
ON S.supplies_to = SC.supplier_id
)
-- Use the CTE to get all suppliers in a supply chain with levels
SELECT * FROM SupplierChain_CTE 
```

说明：第一个 CTE 查询返回不直接向任何其他供应商供应的基本供应商（如叶子）（-1）

第一次迭代中的递归查询获取所有供应商的供应商，这些供应商由 ANCHOR 返回。这个过程一直持续到条件返回元组。

UNION ALL 返回总递归调用的所有元组。

另一个很好的例子可以在[这里](http://technet.microsoft.com/en-us/library/ms186243(v=sql.105).aspx)找到。

PS：要使递归 CTE 起作用，关系必须具有分层（递归）条件才能起作用。例如：elementId = elementParentId.. 你明白了。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-06-08T10:16:18.073

```
 --DROP TABLE #Employee
    CREATE TABLE #Employee(EmpId BIGINT IDENTITY,EmpName VARCHAR(25),Designation VARCHAR(25),ManagerID BIGINT)

    INSERT INTO #Employee VALUES('M11M','Manager',NULL)
    INSERT INTO #Employee VALUES('P11P','Manager',NULL)

    INSERT INTO #Employee VALUES('AA','Clerk',1)
    INSERT INTO #Employee VALUES('AB','Assistant',1)
    INSERT INTO #Employee VALUES('ZC','Supervisor',2)
    INSERT INTO #Employee VALUES('ZD','Security',2)

    SELECT * FROM #Employee (NOLOCK)

    ;
    WITH Emp_CTE 
    AS
    (
        SELECT EmpId,EmpName,Designation, ManagerID
              ,CASE WHEN ManagerID IS NULL THEN EmpId ELSE ManagerID END ManagerID_N
        FROM #Employee  
    )
    select EmpId,EmpName,Designation, ManagerID
    FROM Emp_CTE
    order BY ManagerID_N, EmpId 
```

# excel - 以开头的移动数字

> ID：14274943
> 
> 赞同：0
> 
> 时间：2013-01-11T09:17:41.023
> 
> 标签：excel, vba

我在 B 列中有一个电话号码数据库（大约 50k 条记录），我想将所有以“07”开头的数字提取到同一行的 C 列中。我有这个。

```
 A                B
1    0113 1210012
2    07878 121213
3    01423 568741
4    07584 123123
5    0033 123456789
6    07548 1234567 
```

我需要一种方法来创建它

```
 A                  B
1    0113 1210012
2                       07878 121213
3    01423 568741
4                       07584 123123
5    0033 123456789
6                       07548 1234567 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:47:24.010

这应该做的工作

```
Sub Filter07()

Dim MyRange As Range, MyCell As Range

Set MyRange = Range([B1], Cells(Cells(ActiveSheet.Rows.Count, 2).End(xlUp).Row, 2))

For Each MyCell In MyRange

    If Left(Trim(Format(MyCell.Value, "@")), 2) = "07" Then

        MyCell(1, 2) = Trim(Format(MyCell.Value, "@"))
        MyCell = ""

    End If

Next MyCell

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:59:53.687

这是一个 VBA 代码供您尝试：我使用了`regex`and`arraylist`对象。在代码对象中循环比使用它`range`来最小化工作表和代码之间的流量更快。另外不确定您是否只想输出重复项或唯一项。所以我只是简单地选择 ArrayList against the Dictionary。ArrayList 还允许您保持正确的位置；）

```
Option Explicit

Sub StartingWith07()
Dim vArray As Variant
Dim dc As Object
Dim objRegex As Object
Dim i As Integer
Dim arrList As Object

Set arrList = CreateObject("System.Collections.ArrayList")
Set objRegex = CreateObject("VBScript.RegExp")
objRegex.IgnoreCase = True
objRegex.Global = True
objRegex.Pattern = "^(07)"

'-- you can also use dynamic last row to set the range from A2
vArray = WorksheetFunction.Transpose(Sheets(1).Range("A2:A10").Value)

    For i = LBound(vArray) To UBound(vArray)
        If objRegex.Test(Trim(vArray(i))) Then
            arrList.Add vArray(i)
        Else
            arrList.Add ""
        End If
    Next i

    '--output to sheet
    Sheets(1).Range("B2").Resize(arrList.Count) = _ 
    Application.Transpose(arrList.toarray())

End Sub 
```

输出：

![在此处输入图像描述](../Images/d938772205bba910375ba380a4aacb81.png)

# android - 布局设计如何在android中的旋转上保持不变

> ID：14274948
> 
> 赞同：0
> 
> 时间：2013-01-11T09:18:03.813
> 
> 标签：android, android-layout

我创建了一个布局，特别是在其底部有一些按钮。它适用于纵向视图。但是当我旋转标签时，布局会受到干扰。谁能告诉我如何在两个旋转中保持相同的布局视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:25:13.987

*   You can create Layouts for both portrait and landscape mode Create Lauout-land folder and put your layout with same name this is how you can manage your layout orientation

# arrays - 如何在 VBA 的即时窗口中打印二维数组？

> ID：14274949
> 
> 赞同：22
> 
> 时间：2013-01-11T09:18:06.033
> 
> 标签：arrays, vba, immediate-window

如何在 VBA 的即时窗口中打印二维数组？它是否存在任何通用方法来做到这一点？在即时窗口中每行绘制一行数组的一些方法可以解决这个问题，因为唯一要做的就是为每一行数组循环这段代码。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-07-12T18:10:14.750

如果这是出于调试目的，那么在程序执行期间编写宏来查看数组的内容并不方便。甚至可能导致问题。

对于程序执行期间的调试，您需要一种可以在所有 VB 项目中使用的无代码方法来监视数组的内容。

1.  在 VBA IDE 中，单击查看菜单 > 本地窗口
2.  在本地窗格中，找到阵列名称。 [![在此处输入图像描述](../Images/bdde99cf159cdb6f395a1695e33e8664.png)](https://i.stack.imgur.com/0RVIB.png)
3.  展开节点以查找您的值。节点会有所不同，具体取决于阵列的类型。

在此示例中，“aLookList”是一个变体数组。“Value2”下的值来自一个范围。

[![在此处输入图像描述](../Images/72836fae5e1e63b750cc842be31398da.png)](https://i.stack.imgur.com/kQyQ5.png)

[![在此处输入图像描述](../Images/f34a6febae11ba4cf1b2030cc2ede3d7.png)](https://i.stack.imgur.com/P6mL6.png)

这里的另一个答案建议使用 Watch 窗格。这与我的回答类似，但海报并未解释您可以通过简单地将数组名称添加到 Watch 来监视整个数组（所有单元格）。然后，向下钻取节点。Locals Window 优于 Watch Window 的优势在于，使用 Locals 窗格，您不必手动将数组添加到窗格中，它已经存在。因此，它的努力要少一些。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-04T12:07:07.180

我做了一个简单的循环来做这个供任何人参考：

```
Sub WriteArrayToImmediateWindow(arrSubA As Variant)

Dim rowString As String
Dim iSubA As Long
Dim jSubA As Long

rowString = ""

Debug.Print
Debug.Print
Debug.Print "The array is: "
For iSubA = 1 To UBound(arrSubA, 1)
    rowString = arrSubA(iSubA, 1)
    For jSubA = 2 To UBound(arrSubA, 2)
        rowString = rowString & "," & arrSubA(iSubA, jSubA)
    Next jSubA
    Debug.Print rowString
Next iSubA

End Sub 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-11T12:06:16.823

不，您要么需要；

*   创建并调用一个循环并将其打印到调试窗口的函数。
*   如果这是为了调试，请右键单击 IDE 中的变量并“添加监视”，这将打开一个窗口，该窗口将跟踪数组值的更改并在遇到断点时显示其内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-10T05:15:11.210

### 尝试这个

您也可以键入 code1: code2 而不是 code1 _
这仅用于显示
If arr is defined as array( array(,),array(,)...)
and Then
You shoud For c = Lbound(arr(r), 1) to ubound(arr(r),1)
Debug.Print arr(r)(c)
因为第一个是二维数组，最后一个是第一个数组。
我

```
'Define 2d array
arr = [ {"A",1; "B",2; "C",3 } ]: _
For r = LBound(arr, 1) To UBound(arr, 1): _
        For c = LBound(arr, 2) To UBound(arr, 2): _
            Debug.Print arr(r, c): _
       Next c: _
Next 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-27T10:23:40.030

在 B 列（年龄）的 A（姓名）列中粘贴以下数据

```
Name    Age
A   10
B   20
C   30
D   40
E   50
F   60
G   70 
```

并运行以下代码

```
Sub Array_Demo()

Dim arr() As String
Dim i As Integer, j As Integer

' fill the array with strings

Last = Range("A" & Rows.Count).End(xlUp).Row
ReDim arr(Last, 1)

For i = 0 To Last - 1

    arr(i, 0) = Cells(i + 1, 1).Value
    arr(i, 1) = Cells(i + 1, 2).Value

Next

' only one loop to display its contents !!!
Dim v As Variant

For Each v In arr

    Debug.Print v

Next

End Sub 
```

您可以在立即窗口中看到以下输出

```
Name
A
B
C
D
E
F
G

Age
10
20
30
40
50
60
70 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-11T09:47:50.247

此方法将数组输出到即时调试窗口。它会自动调整列的宽度并在右侧勾勒出列，从而更容易比较同一列中的数字。

```
Public Sub Array2DToImmediate(ByVal arr As Variant, _
                                Optional ByVal spaces_between_columns As Long = 2, _
                                Optional ByVal NrOfColsToOutlineLeft As Long = 2)
'Prints a 2D-array of values to a table (with same sized column widhts) in the immmediate window

'Each character in the Immediate window of VB Editor (CTRL+G to show) has the same pixel width,
'thus giving the option to output a proper looking 2D-array (a table with variable string lenghts).
Dim i As Long, j As Long
Dim arrMaxLenPerCol() As Long
Dim str As String
Dim maxLength As Long: maxLength = 198 * 1021& 'capacity of Immediate window is about 200 lines of 1021 characters per line.

'determine max stringlength per column
ReDim arrMaxLenPerCol(UBound(arr, 1))
For i = LBound(arr, 1) To UBound(arr, 1)
    For j = LBound(arr, 2) To UBound(arr, 2)
        arrMaxLenPerCol(i) = IIf(Len(arr(i, j)) > arrMaxLenPerCol(i), Len(arr(i, j)), arrMaxLenPerCol(i))
    Next j
Next i

'build table
For j = LBound(arr, 2) To UBound(arr, 2)
    For i = LBound(arr, 1) To UBound(arr, 1)
        'outline left --> value & spaces & column_spaces
        If i < NrOfColsToOutlineLeft Then
            On Error Resume Next
            str = str & arr(i, j) & space$((arrMaxLenPerCol(i) - Len(arr(i, j)) + spaces_between_columns) * 1)

        'last column to outline left --> value & spaces
        ElseIf i = NrOfColsToOutlineLeft Then
            On Error Resume Next
            str = str & arr(i, j) & space$((arrMaxLenPerCol(i) - Len(arr(i, j))) * 1)

        'outline right --> spaces & column_spaces & value
        Else 'i > NrOfColsToOutlineLeft Then
            On Error Resume Next
            str = str & space$((arrMaxLenPerCol(i) - Len(arr(i, j)) + spaces_between_columns) * 1) & arr(i, j)
        End If
    Next i
    str = str & vbNewLine
    If Len(str) > maxLength Then GoTo theEnd
Next j

theEnd:
'capacity of Immediate window is about 200 lines of 1021 characters per line.
If Len(str) > maxLength Then str = Left(str, maxLength) & vbNewLine & " - Table to large for Immediate window"
Debug.Print str
End Sub 
```

子例如输出：

```
Sub testArray2DToImmediate()
Dim ar() As Variant
ReDim ar(1 To 5, 1 To 4)

ar(1, 1) = "ID": ar(2, 1) = "Name": ar(3, 1) = "Values1": ar(4, 1) = "Values2": ar(5, 1) = "Values3"
ar(1, 2) = 1: ar(2, 2) = "Example where only": ar(3, 2) = FormatNumber(123 * 123#, 2): ar(4, 2) = 89: ar(5, 2) = "Wow"
ar(1, 3) = 2: ar(2, 3) = "first 2 columns are": ar(3, 3) = FormatNumber(234 * 234#, 2): ar(4, 3) = 456789: ar(5, 3) = "Nice"
ar(1, 4) = 3: ar(2, 4) = "outlined Left": ar(3, 4) = FormatNumber(567 * 567#, 2): ar(4, 4) = 123456789: ar(5, 4) = "Table":

Array2DToImmediate ar
End Sub 
```

示例输出：

```
ID  Name                    Values1    Values2  Values3
1   Example where only    15.129,00         89      Wow
2   first 2 columns are   54.756,00     456789     Nice
3   outlined Left        321.489,00  123456789    Table 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-03T06:45:35.367

以下过程使用函数在即时窗口中打印数组。该函数将数组逐行转换为字符串。

```
Sub test()
'declare the 2D array
   Dim intA(0 To 2, 0 To 3) As Integer
'populate the array
   intA(0, 0) = 45:   intA(0, 1) = 50:   intA(0, 2) = 55:   intA(0, 3) = 60
   intA(1, 0) = 65:   intA(1, 1) = 70:   intA(1, 2) = 75:   intA(1, 3) = 80
   intA(2, 0) = 85:   intA(2, 1) = 90:   intA(2, 2) = 95:   intA(2, 3) = 100
Debug.Print Print2DArrayToImmediate(intA)

' <<<<<<<<<<    Or  >>>>>>>>>>
Dim myarr()
myarr = Range("A1:C5").Value
Debug.Print Print2DArrayToImmediate(myarr)

End Sub 
```

* * *

```
Function Print2DArrayToImmediate(arr)
Dim arrStr As String, x As Long, y As Long
arrStr = ""

For i = LBound(arr, 1) To UBound(arr, 1)
    If LBound(arr, 1) = 0 Then i = i + 1
    arrStr = arrStr & vbCrLf
    arrStr = arrStr & Join(Application.Index(arr, i, 0), vbTab & vbTab)
Next i

Print2DArrayToImmediate = arrStr
End Function 
```

[![在此处输入图像描述](../Images/96a634c7240e4431afcbb7f4aa16604d.png)](https://i.stack.imgur.com/P41Wq.jpg)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-11-08T14:11:22.923

我为此编写了自己的函数。VBA 的 print_r()。它可以评估 Arrays、Dictionaries、Collection、MatchCollection 等。整体也是嵌套的。此外，还给出了数据类型，特殊字符以 Unicode 形式显示在字符串中。

[http://wiki.yaslaw.info/doku.php/vba/functions/print_r/index](http://wiki.yaslaw.info/doku.php/vba/functions/print_r/index)

```
print_r(array(1,2,3,array("A","B")))
<Variant()>  (
    [0] => <Integer> 1
    [1] => <Integer> 2
    [2] => <Integer> 3
    [3] => <Variant()>  (
        [0] => <String> 'A'
        [1] => <String> 'B'
    )
)

print_r([{1,2;3,4}])
<Variant()>  (
    [1.1] => <Double> 1
    [1.2] => <Double> 2
    [2.1] => <Double> 3
    [2.2] => <Double> 4
) 
```

# perl - 如何在perl中修改.ini文件

> ID：14274955
> 
> 赞同：1
> 
> 时间：2013-01-11T09:18:20.047
> 
> 标签：perl

我正在尝试编写一个脚本，该脚本将修改 InI 文件中的 4 行：

**以下是我的 Ini 文件的内容：**

```
gEnableImps=1
gEnableBmps=1
gEnableSuspend=3
gDot11Mode=0
gEnableHandoff=0
gRoamingTime=0 

Intf0MacAddress=000AF6798980
Intf1MacAddress=000AF5788981
Intf2MacAddress=000AF2898982
Intf3MacAddress=000AF5893983

InfraUapsdVoSrvIntv=0 
InfraUapsdViSrvIntv=0
InfraUapsdBeSrvIntv=0
InfraUapsdBkSrvIntv=0 

DelayedTriggerFrmInt=18000

gEnableFWRssiMonitoring=0 
```

**我必须每天修改以下四行：**

```
Intf0MacAddress=000AF6798980
Intf1MacAddress=000AF5788981
Intf2MacAddress=000AF2898982
Intf3MacAddress=000AF5893983 
```

在上面的几行中，我需要更改 6798980、5788981、2898982、5893983 部分，我的意思是在每个数字中，任何到连续的数字都应该改变，而改变的数字不应该得到另一个数字的副本，即每个数字中的唯一数字应该改变。

**经验：**

```
6798980  after change -> 6791280
5788981  after change -> 5783481   
2898982  after change -> 2897682 
```

我已经编写了代码，但我无法更改数字.. 任何人都可以给我一些帮助

**我的脚本：**

```
#!/usr/bin/perl -w
use strict;
open(FH,"+<","WCN1314_qcom_cfg.ini")
                       or die "File not found";

my @lines=<FH>;
foreach my $line (@lines)
{
  if(($line =~ /Intf0MacAddress/ ||$line =~ /Intf1MacAddress/||$line =~ /Intf2MacAddress/||$line =~ /Intf3MacAddress/) )
{
  print "$line\n";
}  
else
{
  print "Not found\n";
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T17:20:38.707

无需通过自己解析和编写 .ini 文件来重新发明轮子。我建议使用 CPAN 中的[Config::IniFiles](http://metacpan.org/pod/Config::IniFiles)或其他类似模块。这段代码只需 3 行就可以满足您的需求。

```
my $cfg = Config::IniFiles->new( -file => $file, -fallback => 'GENERAL' );
$cfg->setval('GENERAL', 'Intf0MacAddress', '999999999999');
$cfg->RewriteConfig; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:29:53.060

我不明白你想用这些数字做什么。你能试着详细解释一下吗？你确定你的例子是正确的吗？你能解释为什么有些数字变了有些没有吗？

无论如何，您可以使用以下内容：

```
#!/usr/bin/perl
use warnings;
use strict;

my $file = 'WCN1314_qcom_cfg';
open my $OLD, '<', "$file.ini" or die $!;
open my $NEW, '>', "$file.new" or die $!;
my $digit = 1;
while (my $line = <$OLD>) {
    if (my ($num, $addr) = $line =~ /^Intf([0-3])MacAddress=000AF([0-9]+)/) {
        my @digits = split //, $addr;

        # Do what you need with the digits

        $line = "Intf${num}MacAddress=000AF" . (join q(), @digits) . "\n";
    }
    print {$NEW} $line;
}
close $NEW;
close $OLD;

if (-f "$file.bak") { unlink "$file.bak" or die "Cannot remove backup: $!"; }
rename "$file.ini", "$file.bak"          or die "Cannot backup.";
rename "$file.new", "$file.ini"          or die "Cannot create ini."; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T13:01:08.650

```
#!/usr/bin/perl -w
use strict;
open(FH,"+<","WCN1314_qcom_cfg.ini")
                       or die "File not found";
use 5.010;
my $file=join "", <FH>;

for (my $index = 0; $index < 4; $index++) {
    if ($file =~ m/(Intf($index)MacAddress=000AF)(\d{7})/) {
        my $number = $3;
        #Do what you need with number.
        $file =~ s/$&/Intf($index)MacAddress=000AF($number)/;
    }
}

open(FH,">","WCN1314_qcom_cfg.ini");
print FH $file;
close FH; 
```

# windows - 找不到opencv源

> ID：14274957
> 
> 赞同：1
> 
> 时间：2013-01-11T09:18:23.167
> 
> 标签：windows, visual-studio-2010, opencv, compilation

我尝试学习 openCV 以使用 openGL + Qt 构建应用程序，也许还有 CUDA。sourceforge 上的预构建版本不支持这些库。所以我想我可以建造它们。但是opencv.org上的tuto说我必须在Source文件夹上使用Cmake，但我找不到它......而且它不在git repo上。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:25:05.387

[他们在svn](http://code.opencv.org/svn/opencv/trunk/opencv)上提供库。或者您也可以从 linux 版本下载源代码。毕竟 CMake 是一个多平台工具

# c# - 未找到源。调用的目标已引发异常

> ID：14274963
> 
> 赞同：0
> 
> 时间：2013-01-11T09:18:55.983
> 
> 标签：c#, wpf, xml, treeview

我正在 wpf 应用程序中基于从方法 getvalues() 返回的值构造一棵树。我正在解析 xml 文件并将值存储在变量中并将其返回给正在访问它的值的类。我正在从注册表项访问 xml 文件。如果我的机器中没有 xml 文件，我的应用程序应该显示一个空树。

所以我这样写。没有xml文件时我返回null

```
public class Model
 {
    public Model()
    {

            using (RegistryKey pRegKey = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Something"))
            if (pRegKey != null)
            {

                Object val = pRegKey.GetValue("INSTALLLOGSDIR");
                basepath = (string)val1;
                tot_val = basepath+ @"\some.xml";
            }
            else
            {
                MessageBox.Show("some.xml Not found in ur machine.");
            }
    }

 public Mainclass[] getValues()
    {
        if (tot_val.Equals(null))
        {
            return null;
        }
        else
        {
        //return something of type Mainclass[];
        }
      }
} 
```

但是我不断收到异常 No source available 异常已被调用的目标抛出。

如果你能帮我解决这个问题，我会很高兴。对不起，如果它是重复的。我搜索了几个论坛。din 找到相关的场景。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:13:33.077

如评论中所述：

`tot_val.Equals(null)`很奇怪，如果它应该比较 tot_value 是否为空，它将失败`NullPointerException`-`==`改为使用。

# asp.net - CSS ISSUE：谷歌浏览器不显示背景图像，因此下拉列表无法正确显示

> ID：14274972
> 
> 赞同：0
> 
> 时间：2013-01-11T09:19:32.950
> 
> 标签：asp.net, css

我开发了一个应用程序，必须在所有浏览器中使用，尤其是在 Chrome 中。我有使用以下 CSS 的下拉列表，如图所示

```
.ddlStyle{
    background-image: url("../Images/navigation_bg.jpg");
    background-color:Gray;
    background-color:Gray;
    color: #FFFFFF;
    height:25px;
    width:auto;
    width:100px;
    font-family:Trebuchet MS;
    border:1px;
    border:ThreeDShadow;
} 
```

背景图像在 Chrome 中未正确加载，在 safari 、 IE 和 Mozilla 中其工作正常。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:31:45.803

```
 .ddlStyle{
        background-image: url("../Images/navigation_bg.jpg");
        background-color:Gray;
        background-color:Gray;
        color: #FFFFFF;
        height:25px;
        width:auto;
        width:100px;
        font-family:Trebuchet MS;
        border:1px;
        border:ThreeDShadow;

        -webkit-appearance: none;

      } 
```

尝试`-webkit-appearance: none;`

# java - 在 hashCode() 中使用静态变量

> ID：14274976
> 
> 赞同：1
> 
> 时间：2013-01-11T09:20:02.280
> 
> 标签：java, hashcode

当覆盖一个类的`equals()`and`hashCode()`方法时，下面的方法会起作用吗？

我查看对象是否相等的所有逻辑都在我的`equals()`方法中完成。`hashCodeReturn`该类有一个设置为 1的静态变量（我们称之为）。

当 equals 方法到达返回 false 的逻辑时，它会将 1 添加到`hashCodeReturn`

然后`hashCode()`简单地返回`hashCodeReturn`值

有什么理由这行不通吗？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T09:24:00.130

不，这行不通。

两个相同的对象（例如相同的引用）的哈希码应该相同。通过返回一个静态变量的结果，你将打破这个[契约](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)。

> hashCode 的一般合约是：
> 
> 每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:39:25.723

`Hashcode()``value`在同一个引用上调用时必须返回相同的值，`object`但是当返回一个`static`值时，该值可能在先前调用时已更改并且可能会更改，因为这是类的变量，它可能会独立于它`object`而递减和递增，并且在下次调用时会发生更改的`hashcode()`。

# mysql - 使用“IN”对 MySQL 进行慢速查询

> ID：14274980
> 
> 赞同：1
> 
> 时间：2013-01-11T09:20:29.540
> 
> 标签：mysql, sql, database, join

对于一个大表（100 万条记录），我有一个这样的更新查询：

```
update direct_words set weight = (weight / 4) where knowledge_id = :a 
and phrase_id in (select phrase_id from phrases where knowledge_id =:b 
and phrase_class <> 6); 
```

我有几个索引，但一个是针对字段的：

```
knowledge_id;phrase_id 
```

这在 SQLite 下运行非常快（2 秒或更短），但对于 MySQL，相同的查询大约需要 37 秒。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T09:22:44.090

尝试使用执行它`JOIN`

```
update  direct_words a
        INNER JOIN phrases b
            ON a.phrase_id = b.phrase_id
set     a.weight = (a.weight / 4) 
where   a.knowledge_id = :a AND
        b.knowledge_id = :b AND
        b.phrase_class <> 6 
```

# javascript - 如何将 jQuery 函数应用于具有相同 ID 的所有元素？

> ID：14274982
> 
> 赞同：2
> 
> 时间：2013-01-11T09:20:34.500
> 
> 标签：javascript, jquery, dom

我是 jQuery 的新手。我有以下代码：

```
jQuery(document).ready(function() {
    jQuery('#carousel').jcarousel();
}); 
```

它仅适用于第一个`ul`with `id="carousel"`，不适用于其他。如何将其应用于具有相同 ID 的所有元素？

HTML：

```
<!-- jQuery applies to this div -->
<div id="slideshow-carousel">
    <ul id="carousel" class="jcarousel jcarousel-skin-tango">
        <!-- ... -->
    </ul>
</div>

<!-- jQuery does not apply for this div -->
<div id="slideshow-carousel">
    <ul id="carousel" class="jcarousel jcarousel-skin-tango">
        <!-- ... -->
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T09:21:53.700

您不能拥有多个具有相同 ID 的元素，这就是为什么不起作用。你应该`class="caroussel"`改用。

```
jQuery(document).ready(function() {
    jQuery('.carousel').jcarousel();
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-11T09:22:10.533

元素的**ID**在`DOM`. 两个或多个元素的 ID 相同是**无效的 html**。要跨元素共享功能，请为它们分配一个公共类，而不是给它们相同的 ID。如果您不能为它们分配一个公共类，下面的解决方法将允许您选择具有相同 id 属性的元素：

使用相同的 ID **（如果无法更改 ID）**

```
jQuery(document).ready(function() {
    jQuery('[id=carousel]').jcarousel();
}); 
```

使用通用类**（推荐方式）**

```
jQuery(document).ready(function() { 
    jQuery('.carousel').jcarousel();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T09:25:17.887

在最新版本的 jQuery 中，当页面上有多个 id 时，选择器将仅返回在 DOM 中找到的第一个“id”。您应该改用类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:40:26.893

在这种情况下，您应该使用类。你不能使用id。否则你可以试试下面的代码。

```
jQuery('ul').jcarousel(); 
```

# java - 为什么保存的图像这么小？

> ID：14274988
> 
> 赞同：0
> 
> 时间：2013-01-11T09:21:06.513
> 
> 标签：java, bufferedimage, graphics2d

这是我的代码。

```
 import java.awt.Color;
    import java.awt.Graphics2D;
    import java.awt.geom.Line2D;
    import java.awt.image.BufferedImage;
    import java.io.BufferedInputStream;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.IOException;
    import java.util.ArrayList;
    import javax.imageio.ImageIO;

public class Test {

    public static void main(String args[]) throws IOException{

        int width = 400, height = 400;
        Test plot = new Test();

        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);

        Graphics2D g2d = bi.createGraphics();
        g2d.setPaint(Color.red);

        g2d.draw(new Line2D.Double(0,0,0,50));
        g2d.draw(new Line2D.Double(0,50,50,50));
        g2d.draw(new Line2D.Double(50,50,50,0));
        g2d.draw(new Line2D.Double(50,0,0,0));

        ImageIO.write(bi, "PNG", new File("d:\\sample.PNG"));
    }
} 
```

![在此处输入图像描述](../Images/d0bae6643bbcdddc73315877f1d80cb3.png)

您可以看到上面的输出图像。

现在，由于正方形看起来非常小（我尝试改变宽度和高度），我需要以编程方式将其放大。（因为我需要显示机器人经过的路径）。我该怎么做？请帮忙。

请注意，这里的形状比尺寸更重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:25:06.890

I dont know if I get the question right, but

```
 g2d.draw(new Line2D.Double(0,0,0,50));
    g2d.draw(new Line2D.Double(0,50,50,50));
    g2d.draw(new Line2D.Double(50,50,50,0));
    g2d.draw(new Line2D.Double(50,0,0,0)); 
```

gives a 50x50 pixels rectangle since you have not defined any transformations. Try something like

```
 g2d.draw(new Line2D.Double(0,0,0,150));
    g2d.draw(new Line2D.Double(0,150,150,150));
    g2d.draw(new Line2D.Double(150,150,150,0));
    g2d.draw(new Line2D.Double(150,0,0,0)); 
```

which renders a larger rectangle.

Alternatively, you can also define a scaling transformation like

```
 g2d.scale(3.0, 3.0); 
```

Note that this also scales the line width, so that the result is not completely the same as using different coordinates in the `Line2D.Double()` calls.

See also [http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html) for more information on coordinate systems and the Graphics2D rendering process.

# c++ - 触摸屏双击直接跳到下一屏

> ID：14274989
> 
> 赞同：0
> 
> 时间：2013-01-11T09:21:19.520
> 
> 标签：c++, qt, touch

我正在 SBC6000x 板上开发 Qt 应用程序（Qt 版本 4.7.3）。我正在将 tslib 用于触摸屏。

我在同一位置有 2 个带有 2 个按钮的屏幕。当单击（触摸）第一个屏幕上的按钮时，它会转到第二个屏幕。如果我在第一个屏幕上双击按钮，它会注册 2 个触摸事件。第一次触摸它进入第二个屏幕，第二个触摸在第二个屏幕上处理并显示第三个屏幕。

所以在第一个屏幕上双击我直接跳到第三个屏幕。我想禁止第二次触摸。

这是我尝试过的东西。

1.  我在 tslib 中寻找改变去抖动时间，但无法获得足够的信息。
2.  禁用第二个屏幕上的按钮，在加载屏幕时启用它们。

**第二种方法的问题**：我没有在运行时创建屏幕，我有一系列屏幕。如果我在 show() 方法中启用按钮，我必须在某处禁用它们。我应该用什么方法禁用它们？

*在显示第二个屏幕时，我没有在第一个屏幕上调用 close() 或 hide()，我只在第二个屏幕上调用 show()。所以我不能禁用 closeEvent 或 hideEvent() 中的按钮（因为我根本没有这些方法*）

我该如何处理？欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:49:51.903

You need to [work with Qt's Event system](http://doc.qt.digia.com/qt/eventsandfilters.html). It'll allow you to track for whatever events are occurring (such as a tap) and override the default behaviour for your custom behaviour. It's pretty wide ranging so it's hard to give you a lot of information, but it's likely you need to look at how it's dealing with button clicks from mouse events as there's no touch specific ones.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T10:23:50.393

单击按钮时，而不是调用`myScreen->show()`自定义方法，例如`myScreen->showWithDelayedButton()`执行以下操作：

```
MyScreen::showWithDelayedButton() {
    myButton->hide();
    QTimer::singleShot(250, myButton, SLOT(show));
    show();
} 
```

# emacs - GNU Global - 找不到结构元素的定义？

> ID：14274994
> 
> 赞同：0
> 
> 时间：2013-01-11T09:21:39.717
> 
> 标签：emacs

我有以下问题。`GNU/global`似乎无法在 C 中的结构中找到字段的定义。示例如下。

在文件交流

```
typedef struct {
    myType1  type1 ;
    myType2  type2
    int      var;
}pType, *pType; 
```

在文件 bc

```
int main()
{

  pType  newType;
  newType.myType1.somevar = somevalue;
  return 0;

} 
```

`global`无法在上述示例中找到`myType1`or的定义。`somevar`如果我`gtags-find-tag`为符号执行`myType1`，它会给出找不到错误标签。有没有办法使用它来实现这一点 `global`？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T22:36:51.803

对于初学者，您的代码不是有效的 c 代码。gtags 可能已经默默地窒息了。

现在，回到全球。它确实会跟踪类型，并且应该能够找到 pType（在您修复示例中的语法后尝试）。

全局对字段没有多大帮助。您可以使用“global -s”将它们作为符号找到，但它不会告诉您它的定义位置。您所得到的只是提到该符号的位置。类似于“grep -r”会做什么。