# StackOverflow 问答 13994000-13994999

# vb.net - 检查当前日期的日期和月份

> ID：13994000
> 
> 赞同：5
> 
> 时间：2012-12-21T16:46:26.077
> 
> 标签：vb.net, date

我需要检查日期和月份。我正在使用`Date.Now`.

例如：

如果 day =9 和 month=10 然后采取行动

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T16:53:13.223

使用DateTime 变量的`Day`和属性：`Month`

```
Dim currentDate As DateTime = DateTime.Now
If currentDate.Month = 10 AndAlso currentDate.Day = 9 Then
   'Do something
End If 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T16:52:40.640

该[`Date`](http://msdn.microsoft.com/en-us/library/03ybds8y.aspx)对象有一个[`Day`](http://msdn.microsoft.com/en-us/library/system.datetime.day.aspx)和一个[`Month`](http://msdn.microsoft.com/en-us/library/system.datetime.month.aspx)属性：

```
Dim today = Date.Today
Dim day = today.Day
Dim month = today.Month

If day = 9 AndAlso month = 10 Then
    ' do something ...
End If 
```

请注意，我已经使用`Date.Today`而不是`Date.Now`因为您对日期部分感兴趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T16:51:41.083

Date.Now.Month 和 Date.Now.Day。这些是 Date 类型的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T16:52:29.513

```
Dim today = Date.Now.Date
If today.Day = 9 AndAlso today.Month = 10 Then ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-27T08:58:20.107

```
Date.today.day      
Date.today.month 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-10T00:14:29.243

```
Dim today = Date.Today
    Dim day = today.day
    Dim month = today.Month
    Dim year = today.Year

    If day = 10 And Also month = 10 Then
        Label1.Text = today . Day
        Label2.Text = today . Month
        Label3.Text = Date . Today
        Label4.Text = Time Of Day
        Label5.Text = year 
```

# python - 在Python中读取目录中的所有文件

> ID：13994004
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:46:36.917
> 
> 标签：python, search

我在同一个目录中有一堆文件，名为`halo_track*.dat`. 每个文件有两列。对于每个文件，我想`1.0015`在左列中找到值，读取它右侧的值，并将其附加到列表中。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T16:50:50.617

`glob`并且`fileinput`是一种方式（未经测试）

```
from glob import glob
import fileinput

filenames = glob('halo_track*.dat')
inputs = (line.split(None, 1) for line in fileinput.input(filenames))
right_stuff = [col[1] for col in inputs if col[0] == '1.0015'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:50:26.263

```
cat halo_track*.dat | grep "^1.0015" | cut -f2 > alist.txt 
```

你在这里不需要python。对于剪切，如果分隔符不是制表符，您可能还需要指定 -d。

# django - 自动完成灯未加载选择列表

> ID：13994006
> 
> 赞同：2
> 
> 时间：2012-12-21T16:46:39.273
> 
> 标签：django, django-autocomplete-light

我正在尝试让自动完成灯在我的应用程序的管理区域中工作。文档位于此处：

*   [http://django-autocomplete-light.readthedocs.org/en/docs_rewrite/debug.html](http://django-autocomplete-light.readthedocs.org/en/docs_rewrite/debug.html)

外键选择列表消失，基本文本框按预期出现。但是选择列表没有显示出来。

我已经安装了该应用程序并将适当的包含在我的 urls.py 中。

相关型号：

```
class Inventory(models.Model):
    title = models.CharField(max_length=100, db_index=True)
    product_code = models.CharField(max_length=100, db_index=True, primary_key = True)

class Customer_Order(models.Model):
    order_id = models.CharField(max_length=100, db_index=True, null = True, blank = True)
    customer_id = models.ForeignKey('inventory.Customer')
    products = models.ManyToManyField('inventory.Inventory', through='inventory.Customer_Order_Products')

class Customer_Order_Products(models.Model):
    order_id = models.ForeignKey('inventory.Customer_Order')
    product_id = models.ForeignKey('inventory.Inventory') 
```

autocomplete_light_registry.py：

```
import autocomplete_light
from inventory.models import Inventory

autocomplete_light.register(Inventory, search_fields=('title',),
               autocomplete_js_attributes={'placeholder': 'city name ..'}) 
```

管理员.py：

```
class Customer_Order_ProductsInline(enhanced_admin.EnhancedAdminMixin, admin.TabularInline):
    model = Customer_Order.products.through
    extra = 0
form = autocomplete_light.modelform_factory(Customer_Order_Products)

class Customer_OrderAdmin(enhanced_admin.EnhancedModelAdminMixin, admin.ModelAdmin):
     inlines = (Customer_Order_ProductsInline, OrderStatusInline ) 
```

我自己的调试：

*   我去了 /autocomplete/ 并找到了已注册的库存标题列表，但它并不完整。它只显示了 155 个中的大约 20 个。

*   我已确保在 html 中加载了正确的文件。所有的包含似乎都出现了。我在终端中得到了所有这些的 304 代码，但我认为这没关系。我似乎无法确保正在加载的唯一事情是指向 jquery 的链接。我在 html 源代码的标题中找到了脚本的链接，并检查了似乎有效的链接（https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js） .

更新 **

*   我刚刚在 web 开发人员错误控制台中发现了这个错误：TypeError: 'undefined' is not a function (evalating '$(this).yourlabsWidget()') in widget.js on line 297\. 这表明至少 widget.js正在加载。

*   最后，当我更新现有的 Customer_Order 时，空白字段显示 NEXT 到常规外键下拉。不是代替它。我不知道为什么会这样。

我希望有人遇到过类似的问题，或者有一些调试建议。我对 Django 还很陌生，我的调试技能充其量是缺乏的。

HTML：

```
<!DOCTYPE html>
<html lang="en-us" >
<head>
<title>Add Customer Order | Art & Fibre</title>
<link rel="stylesheet" type="text/css" href="/static/admin/css/base.css" />
<link rel="stylesheet" type="text/css" href="/static/admin/css/forms.css" />
<!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="/static/admin/css/ie.css" /><![endif]-->

<script type="text/javascript">window.__admin_media_prefix__ = "/static/admin/";             </script>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript" src="/static/autocomplete_light/autocomplete.js"></script>
<script type="text/javascript" src="/static/autocomplete_light/widget.js"></script>
<script type="text/javascript" src="/static/autocomplete_light/addanother.js"></script>
<script type="text/javascript" src="/static/autocomplete_light/text_widget.js"></script>
<script type="text/javascript" src="/static/autocomplete_light/remote.js"></script>
<link rel="stylesheet" type="text/css" href="/static/autocomplete_light/style.css" /> 
```

然后以后..

```
<span class="autocomplete-light-widget customer_order_products_set-0-product_id
single"
id="id_customer_order_products_set-0-product_id-wrapper"
data-max-values="1" data-bootstrap="normal"
data-autocomplete-url="/autocomplete/InventoryAutocomplete/" data-autocomplete-choice-selector="[data-value]" data-autocomplete-placeholder="Product name .."
> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:08:46.813

所以我对 Django 和 autocomplete-light 工具栏也是新手，但我让它为我工作。调试的几件事：

*   Firefox 加 Firebug 对我来说真的很有用。您可以准确地看到在您的页面中实时加载的 javascript 和 html 内容。（这样您就可以在输入框中看到正在进行的自动完成灯查询）
*   Django-debug-toolbar 也非常有用。您可以看到正在对您的数据库进行哪些查询。
*   我无法从您发布的代码片段中看出，但您是否在 admin/base_site.html 或 customer_order/index.html 模板中包含以下内容？

    {% 包括 'autocomplete_light/static.html' %}

*   您似乎在 admin.py 文件的末尾也缺少此内容：

    admin.site.register(Customer_Order, Customer_OrderAdmin)

# javascript - 使用 Javascript 删除 URL 的结尾

> ID：13994013
> 
> 赞同：4
> 
> 时间：2012-12-21T16:47:01.970
> 
> 标签：javascript

使用 window.location.pathname 我得到“/Mobile/Evol/12-20-2011”。

使用 Javascript，如何在“Evol/”之后删除所有内容，以便获得“/Mobile/Evol/”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T16:50:05.967

您可以使用`substring()`和`lastIndexOf()`功能的组合来轻松地切断最后一个之后的所有内容`/`：

```
uri    = "/Mobile/Evol/12-20-2011";
newUri = uri.substring(0, uri.lastIndexOf('/')); 
```

正如@josh 指出的那样，如果“/ Evol”之后还有更多目录，这将失败。您可以通过搜索字符串“Evol/”然后将其长度添加回子字符串末尾来解决此问题：

```
dir = "Evol/";
newUri = uri.substring(0, uri.lastIndexOf(dir) + dir.length); 
```

Chrome 控制台给了我这个输出：

```
> uri    = "/Mobile/Evol/12-20-2011";
"/Mobile/Evol/12-20-2011"

> dir = "Evol/";
  newUri = uri.substring(0, uri.lastIndexOf(dir) + dir.length);
"/Mobile/Evol/" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:04:13.290

只需在 JavaScript 字符串中使用“split”函数，

```
var url = '/Mobile/Evol/12-20-2011';
var tokens = url.split('/');
var reqURL = token[0] + '/'+ token[1] ; 
```

当然 URL 格式必须是相同的 some_string/some_string/some_string

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:51:21.383

```
var str = window.location.pathname;
const sub = "Evol/";

var locEvol = str.indexOf(sub);
var endIdx = locEvol + sub.length;
var beginStr = str.substring(0, endIdx);
// beginStr contains the desired substring 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:51:54.773

假设您想完全切断任何查询和片段：

```
url.replace(/\/Evol\/[^?#]*(?:[?#].*)?$/, '/Evol') 
```

打破这个正则表达式：

1.  `\/Evol\/`匹配文字文本`"/Evol/"`。`\`'s 是必要的，因为它将`//Evol/...`是行注释，而`/`正则表达式中的其他地方结束正则表达式。
2.  `[^?#]`匹配除查询或片段分隔符之外的任何内容
3.  `(?:...)?`只是做一些可选的
4.  `[?#].*`匹配查询或片段开头，后跟任意数量的非空白字符
5.  `$`强制匹配到达输入的末尾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-13T00:41:16.483

一个班轮：

```
match.url.split("/").slice(0,-1).join("/") 
```

```
let array1 = "/first/second/third/fourth";
let array2="posts/stories/1234";

console.log("Result=",array1.split("/").slice(0,-1).join("/"));
console.log("Result=",array2.split("/").slice(0,-1).join("/"));
```

# vba - Excel VBA 在单元格旁边创建一个按钮

> ID：13994014
> 
> 赞同：1
> 
> 时间：2012-12-21T16:47:03.240
> 
> 标签：vba, excel

对于我的问题，我想在非 NULL 或“”的单元格旁边创建一个按钮。按钮的标题必须跟在旁边单元格中的值之后。

例如：

1.  我输入了“EMPLOYEE”`Range("D3")`
2.  我希望宏在`Range("C3")`
3.  但是我希望宏是动态的，这样每次我在“D”列中输入值时，左侧的单元格`C3`都会出现一个按钮。

因此，我发现我需要`CommandButton`手动编码，对吗？

尽管如此，万提前感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:37:34.550

您可以通过添加命令按钮来**记录宏**以查看它是如何创建的，然后合并花哨的部分。注意 OLE 命令按钮对象的属性，多加注意。

例如，尚未通过etc`theButton.Name`设置标题。`theButton.Object.Caption`

**这是一个可以帮助您前进的代码片段：-**

```
Option Explicit

Sub createButtons()
Dim theButton As OLEObject
Dim rngRange As Range
Dim i As Integer

Application.ScreenUpdating = False
Application.DisplayAlerts = False
Set rngRange = Sheets(2).Range("B2")

    For i = 0 To 9
        If rngRange.Offset(i, 0).Value <> "" Then
        With rngRange.Offset(i, 1)
            Set theButton = ActiveSheet.OLEObjects.Add _
                (ClassType:="Forms.CommandButton.1", _
                Left:=.Left, _
                Top:=.Top, _
                Height:=.Height, _
                Width:=.Width)

                theButton.Name = "cmd" & rngRange.Offset(i, 0).Value
                theButton.Object.Caption = rngRange.Offset(i, 0).Value

                '-- you may edit other properties such as word wrap, font etc..
      End With
      End If
    Next i

    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
End Sub 
```

输出：

![在此处输入图像描述](../Images/31a3e4480ad9a63a5836a92f93f6c857.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:50:45.283

试试这个。

```
Public Sub Worksheet_Change(ByVal Target As Range)
    Dim col As Integer
    Dim row As Integer

    col = Target.Column
    row = Target.row

    If Not IsNull(Target.Value) And Not IsEmpty(Target.Value) Then
        Application.EnableEvents = False
        Buttons.Add Cells(row, col - 1).Left, Cells(row, col - 1).Top, Cells(row, col - 1).Width, Cells(row, col - 1).Height
        Application.EnableEvents = True
    End If
    End Sub 
```

打开 Developer Tab --> Visual Basic，双击“Sheet1”，然后将这段代码粘贴到那里。通过在 Sheet1 上的单元格中键入文本然后离开该单元格（例如按 Enter）来测试它。

# .htaccess - 有没有办法通过 .htaccess 更改 Apache 错误日志文件？

> ID：13994015
> 
> 赞同：12
> 
> 时间：2012-12-21T16:47:05.043
> 
> 标签：.htaccess, apache2

我在共享主机中托管一个网站，但出现 500 错误。好吧，我无权访问 Apache 错误日志文件来调查问题的原因。

有没有办法通过 .htaccess 将 Apache 错误日志文件的位置更改为我可以访问的目录？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T16:52:03.650

不。

根据[Apache 文档](http://httpd.apache.org/docs/current/mod/core.html#errorlog)，该`ErrorLog`指令的上下文是*server config, virtual host*。如果可能的话，它会列出*.htaccess*。

您可能有更好的机会通过服务器端技术重定向输出。但最好的办法是联系你的主人。应该允许访问*您的错误日志。*

# asp.net-mvc - Umbraco 4.11 模型和模板继承

> ID：13994019
> 
> 赞同：1
> 
> 时间：2012-12-21T16:47:21.987
> 
> 标签：asp.net-mvc, razor, umbraco

我是 Umbraco 和 MVC 的新手 - 任何人都可以提供以下帮助吗？

我有一个主模板（Root.cshtml），它下面嵌套了模板。在其中一些我想使用自定义模型，但是 Root.cshtml 需要访问 Umbraco 助手。

所以嵌套页面继承自 Umbraco.Web.Mvc.UmbracoViewPage< *CustomModel* >，而 Root.cshtml 需要继承自更通用的东西。

我尝试让我的自定义模型从 Umbraco.Web.Models.RenderModel 继承，但是我一直被告知我的自定义模型不包含接受 0 个参数的构造函数，或者，如果我给它一个参数，那就是“Umbraco.Web .Models.RenderModel' 不包含采用 0 个参数的构造函数

我做错了什么，我应该如何完成这个嵌套？

```
namespace CRuMbraco.Web.Models {
public class RegisterModel : RenderModel {
    [Required]
    [Display(Name = "Customer code")]
    public string CustomerCode { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }

    [DataType(DataType.EmailAddress)]
    [Display(Name = "Confirm email")]
    [Compare("Password", ErrorMessage = "The e-mail and confirmation e-mail do not match.")]
    public string ConfirmEmail { get; set; }

    [Required]
    [Display(Name = "FirstName")]
    public string FirstName { get; set; }

    [Required]
    [Display(Name = "LastName")]
    public string LastName { get; set; }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:43:52.523

所有使用主模板的视图都应该`@inherit`来自`UmbracoTemplatePage`.

`UmbracoTemplatePage`实际上继承自`Umbraco.Web.Mvc.UmbracoViewPage<RenderModel>`并具有两个附加属性`CurrentPage`和`Umbraco`，正如您所说的，后者是`UmbracoHelper`该类的一个实例。

我相当确定您不能用自定义模型替换它，因为模型的实例是由 Umbraco 路由确定的。

但是，如果您希望视图具有自定义模型，则应改为子操作。这些将允许您将自定义对象传递到页面中，而独立于`RenderModel`. 如果您希望某些内容在所有页面/视图中都可用，无论它们是视图、部分视图还是子操作，您可以创建一个全局过滤器，例如从会话将数据设置到 Viewbag。

这里有一些文档可以帮助您了解[Umbraco MVC 基础知识](http://our.umbraco.org/documentation/Reference/Mvc/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T02:39:44.780

实际上，您可以像这样使用 UmbracoViewPage：

```
Umbraco.Web.Mvc.UmbracoViewPage<RegisterModel> 
```

为此，您的自定义模型需要扩展 RenderModel，例如：

```
public class RegisterModel: RenderModel 
{
    public RegisterModel(IPublishedContent content, CultureInfo culture)
        : base(content, culture)
    {
    }
    // my properties here
} 
```

您可以通过劫持路线来实例化您的自定义模型，请参阅： http: [//our.umbraco.org/documentation/Reference/Mvc/custom-controllers](http://our.umbraco.org/documentation/Reference/Mvc/custom-controllers)

所以，你最终会得到类似的东西：

```
public class HomeController : Umbraco.Web.Mvc.RenderMvcController
{
    public override ActionResult Index(RenderModel model)
    {
        var customUmbracoModel = new RegisterModel(model.Content, model.CurrentCulture);

        // do some extra form stuff here

        return base.Index(customUmbracoModel );
    }
} 
```

# spring - Spring MVC 在 Popup 中访问命令对象

> ID：13994020
> 
> 赞同：0
> 
> 时间：2012-12-21T16:47:40.830
> 
> 标签：spring, model-view-controller, popup, command

我有一个 spring MVC 命令表单，它显示来自对象数组列表的表，并且在打开一个弹出窗口的列上有一个超链接。用户在此弹出窗口上执行选择并单击按钮以保存他的选择。我有两个问题：

1.  打开弹出窗口的最佳方法是什么？
2.  如何从打开的弹出窗口中的用户选择中设置命令对象值？

任何输入或指导表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:45:22.213

要回答问题 1，您可以使用 jQuery UI 打开一个弹出对话框。示例： http: [//jqueryui.com/dialog/](http://jqueryui.com/dialog/)
对于问题 2，也可以使用 jquery 完成。

# jquery - 悬停太慢

> ID：13994031
> 
> 赞同：0
> 
> 时间：2012-12-21T16:48:11.627
> 
> 标签：jquery, text, get, raphael

由于 jQuery 的 hover() 函数，我在 Raphael 画布上得到了一些剩余的文本。我基本上希望当我将鼠标悬停在一个圆圈上时出现文本，然后保证一旦我停止悬停在圆圈上它就会消失（hoverOut（））。

正如您在下面看到的，我尝试删除（）hoverOut（）上的文本，但它没有完成工作。但是，它可以很好地删除矩形。是否与 get() 请求花费太多时间有关？

```
node = paper.circle(value.xpos_init, value.ypos_init, node_rad).attr({"fill": "#ff0000"})
       .hover(function(e){
                posx = e.pageX - $('#canvas').offset().left;
                posy = e.pageY - $('#canvas').offset().top; 
                createMenu(posx,posy,"10");
              },
              function(){
                menu.remove();
                menu_deg_cent_text.remove();
              });

function createMenu(x,y,id_in)
{
  menu_x = 100;
  menu_y = 60;
  menu = paper.rect(x,y,menu_x,menu_y).attr({"fill":"white","stroke":"red"});
  $.get("../php/text.php", {id : id_in},
    function(data){
    menu_deg_cent_text = paper.text(x+(menu_x/2),y+(menu_y/2),"test_text");
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:05:18.010

我强烈建议不要使用 Raphael 来制作工具提示框，而是使用原生 Javascript。浮动元素可以更好地处理样式和包装文本之类的事情。

```
node = paper.circle(100, 100, 50).attr({"fill": "#ff0000"})
    .hover(function(e) {
        //if you want to calculate position by mouse
        //posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
        //posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop-15;
        posx = this.attr('cx');
posy = this.attr('cy') - this.attr('r');        
        document.getElementById("tip").style.top = posy + "px";
        document.getElementById("tip").style.left = posx + "px";
        document.getElementById("tip").style.display = "block";
    }, function(e) {
        document.getElementById("tip").style.display = "none";
}); 
```

在这里工作演示：http: [//jsfiddle.net/jLSUa/1/](http://jsfiddle.net/jLSUa/1/)

至于在鼠标悬停事件中放置 AJAX 调用：似乎非常不明智。您可以提前加载鼠标悬停文本吗？

# objective-c - 在 iOS 上将 Wordpress JSON 解析为 UITableView

> ID：13994032
> 
> 赞同：2
> 
> 时间：2012-12-21T16:48:15.620
> 
> 标签：objective-c, ios, json, wordpress

我正在尝试从此[URL](http://www.karthikk.net/?json=1)解析 JSON ，这是 Wordpress 的 JSON 输出。由于某种原因，UITableView 中没有输出。

这是我必须解析的代码。我确定我错过了一些东西，但我无法弄清楚如何在这段代码中解析嵌套的 JSON。

**视图控制器.m：**

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"News";

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    NSURL *url = [NSURL URLWithString:@"http://www.karthikk.net/?json=1"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    data = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    [data appendData:theData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    news = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
    [mainTableView reloadData];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    UIAlertView *errorView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"The download could not complete - please make sure you're connected to either 3G or Wi-Fi." delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [errorView show];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
}

- (int)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [news count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];
    }

    cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"title"];
    cell.detailTextLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"date"];

    return cell;
} 
```

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    IBOutlet UITableView *mainTableView;

    NSArray *news;
    NSMutableData *data;
}

@end 
```

请帮我解决这个问题。

非常感谢！我试过在 Stackoverflow 上引用多个线程，但都没有为我工作。

**PS：**我是iOS应用开发的新手。我正在使用[这个视频教程](http://www.youtube.com/watch?v=RJZcD3hfs3k)来弄乱代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:11:57.083

我知道问题出在哪里。新闻对象是一个`Dictionary`具有多个键值对的对象，其中一个是实际包含`Array`您要用于填充`TableView`.

`JSON`这是您回复的第一点：

```
{"status":"ok","count":10,"count_total":662,"pages":67,"posts":[{"id":6176,"type":"post","slug":"how-to-save-any-photo-from-facebook-to-your-iphone-or-ipad-or-ipod-touch","url"... 
```

当您在`JSON`表示 a 的响应中看到 { 时`Dictionary`，a [ 表示`Array`. `TableViews`由`Array`通常填充。所以你可以看到你有一个带有几个键值对的`JSON`响应，其中一个是of的`Dictionary``Array``Dictionary`

您需要为新闻对象分配该 Dictionary 键的内容：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    NSDictionary *responseDict = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
    news = [responseDict objectForKey@"posts"];
    [mainTableView reloadData];
} 
```

# jquery - 通过数组中的变量检查复选框

> ID：13994037
> 
> 赞同：0
> 
> 时间：2012-12-21T16:48:30.413
> 
> 标签：jquery, checkbox

代码：

```
<div>
    <input type='checkbox' lid='1'><label>checkbox1</label>
    <input type='checkbox' lid='2'><label>checkbox1</label>
    <input type='checkbox' lid='3'><label>checkbox1</label>
    <input type='checkbox' lid='4'><label>checkbox1</label>
</div>
<script type='text/javascript'>
    var arr = new Array("1", "2");
    $('input[type=checkbox]').each(function(){
        $.inArray($(this).attr('lid'), arr){
            $(this).attr('checked','checked')
        }
    });
</script> 
```

我正在尝试检查与数组中的项目具有相同“盖子”的所有复选框。现在，我的功能检查所有复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:54:07.580

您应该使用[.prop()](http://api.jquery.com/prop/)来检查复选框！

并且[$.inArray](http://api.jquery.com/jQuery.inArray/)返回位置，所以让它 > -1

```
 var arr = ['1','2'];

 $('input[type=checkbox]').each(function(){
     var cb = $(this);

     if ($.inArray(cb.attr('lid'), arr) > -1) {
         cb.prop('checked', true);
     }
 }); 
```

​http://jsfiddle.net/4kehu/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:18:50.283

我会建议你使用，`data-lid`而不是`lid`，即

```
<input type='checkbox' data-lid='1'><label>checkbox1</label> 
```

并用于检查这些复选框

```
var arr = ["1", "2"];
var myCBoxes=$('input[type=checkbox]').get().filter(function(el){
    return $.inArray($(el).attr('data-lid'), arr)!=-1;
});
$(myCBoxes).prop('checked','checked'); 
```

[**工作示例**](http://jsbin.com/odoquj/3/edit)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:51:45.843

问题是您没有使用`if`语句：

```
$.inArray($(this).attr('lid'), arr){
    $(this).attr('checked','checked')
} 
```

应该

```
if (-1 !== $.inArray($(this).attr('lid'), arr)){
    $(this).attr('checked','checked')
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:52:10.043

[$.inArray](http://api.jquery.com/jQuery.inArray/)传回一个未找到 -1 的数字，因此您应该这样做

```
$('input[type=checkbox]').each(function(){
        var found = $.inArray($(this).attr('lid'), arr) > -1;
        if(found){
           $(this).attr('checked','checked')
        }
 }); 
```

如果使用 jQuery 1.6+，您应该使用[.prop()](http://api.jquery.com/prop/)而不是 .attr 来设置元素的选中属性

```
$(this).prop('checked',true) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T16:57:56.023

为什么不使用简单的 for 循环

```
var arr = new Array("1", "2");

for(var i =0;i<arr.length;i++){
    var lid = arr[i];
    $('input[type="checkbox"][lid="'+ lid +'"]').prop('checked', true);
} 
```

**[检查小提琴](http://jsfiddle.net/bqTHA/)**

# javascript - jQuery mobile, html5 phone 链接用 javascript 代替

> ID：13994046
> 
> 赞同：2
> 
> 时间：2012-12-21T16:48:52.907
> 
> 标签：javascript, jquery

我在 jQuery mobile 中使用了一个拆分按钮列表，我注意到如果没有发生一些奇怪的格式，我的按钮内不能有链接。

因此，我通常会写一个电话链接：

```
<a href="tel+1234567898">123-456-7898</a> 
```

我正在尝试使用一些 javascript：

```
$('.phone').bind('click', function() {
    var phone = $(this).attr('data-phone');
    window.location = "tel:+" + phone;
}); 
```

HTML/PHP：

```
<span data-email="<?php echo $phone; ?>" class="phone"><?php echo $phone; ?></span> 
```

这在“浏览器”中被识别（Chrome 询问我是否要打开通讯器），但在 iPhone 中似乎不起作用......

**编辑：**

拆分按钮列表的工作方式如下：

```
<li><a href="some-link">Content</a><a href="another-link"></a></li> 
```

因此，如果您将链接电话放入第一部分（“some-link”），则它是无效的 HTML（也许？），因此 jQuery mobile 删除了其中的所有内容，所以我似乎不能仅仅更改 CSS 来解决这个问题.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:26:41.120

[这是](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)Apple 的文档 RE URL 电话模式。jQuery Mobile 在页面加载时剥离/注入标签和新元素很痛苦。您的解决方案是在文档完全加载时更新 href 标记（并且当 jQuery Mobile 停止乱搞时）：

```
$(document).ready(function() {
    $("a#phone_number").attr("href","tel-999");
}); 
```

应该管用 ：）

# mysql - MySQL DELETE INSERT 而不是 UPDATE

> ID：13994052
> 
> 赞同：3
> 
> 时间：2012-12-21T16:49:08.230
> 
> 标签：mysql, sql-update

有没有办法使用 delete->insert 而不是使用第一条记录中的字段进行更新？

更新示例：

```
TABLE
---------
ID (int)  | VAL_1(VARCHAR)  | VAL_2 (VARCHAR) 
```

消息 1： `INSERT INTO TABLE VALUES (1, "first message", "some val");`

消息 2： `UPDATE TABLE SET ID=2 WHERE ID=1`

相反，我需要删除第一条记录并插入一条新记录。有没有办法使用如下消息：

```
INSERT INTO TABLE VALUES(2, VAL_1 from RECORD WHERE ID=1, VAL_2 from the record WHERE ID=1);
DELETE FROM TABLE WHERE ID=1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-20T17:20:07.147

就像 tadman 说的，我认为 REPLACE 会更好地做到这一点：

[http://dev.mysql.com/doc/refman/5.5/en/replace.html](http://dev.mysql.com/doc/refman/5.5/en/replace.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T17:20:59.907

试试这个：

```
INSERT INTO table (id, val_1, val_2) 
SELECT id+1, val_1, val_2 
FROM table WHERE id =1;

DELETE FROM table WHERE ID=1; 
```

# mongodb - java中的mongodb问题与限制和排序

> ID：13994065
> 
> 赞同：14
> 
> 时间：2012-12-21T16:50:13.277
> 
> 标签：mongodb, mongo-java

收藏：progs

```
{ "_id" : "ABC", "defaultDirectory" : "abc", "defaultRecvDirectory" : "abc" }
{ "_id" : "RAS", "defaultRecvDirectory" : "recv/ras" }
{ "_id" : "SND", "defaultSendDirectory" : "send/snd" } 
```

在 mongo 控制台中：

```
db.progs.find({"_id":{"$lt":"ZZZZZZZZZ"}}).sort({"_id":-1}).limit(1);

==>    { "_id" : "SND", "defaultSendDirectory" : "send/snd" } 
```

在 Java 中：

```
 BasicDBObject query = new BasicDBObject();
    query.put("_id", new BasicDBObject("$lt", "ZZZZZZZZZZ"));
    DBCursor cursor = collection.find(query).sort(new BasicDBObject("_id","-1")).limit(1);
    for (DBObject dbObject : cursor) {
        System.out.println(dbObject);
    }

==>    { "_id" : "ABC", "defaultSendDirectory" : "abc", "defaultRecvDirectory" : "abc" } 
```

有人可以解释其中的区别吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-21T16:56:48.183

`"-1"`从您的排序中删除引号：

```
DBCursor cursor = collection.find(query).sort(new BasicDBObject("_id",-1)).limit(1); 
```

或者使用 Mongodb ASC/DESC 常量`com.mongodb.operation.OrderBy`代替硬编码 1 / -1

例子：

```
DBCursor cursor = collection.find(query).sort(new BasicDBObject("_id", OrderBy.DESC.getIntRepresentation())).limit(1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-24T12:10:47.637

基于 MongoTemplate 的另一个版本：

```
public List<?> findLimitedSorted(Query query, Object target, String startFrom) {
    query.limit(100);
    query.with(new Sort(Sort.Direction.ASC, "<field_name>"));
    return getMongoTemplate().find(query, target.getClass());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T10:21:33.917

这是我通过过滤器、排序和限制找到的解决方案：

```
 List<Bson> queryFilters = new ArrayList<>();
    queryFilters.add(Filters.eq(SavedReportEntity.FIELD_USER_ID, userId));

   List<Document> documents = getMongoCollection().find(searchFilter).sort(sort).limit(10).into(new ArrayList<Document>()); 
```

您现在将获得文档列表，您可以根据自己的需要使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-21T10:40:04.020

从 MongoDB 获取具有排序顺序的 DBObject：

```
List<DBObject> list = new LinkedList<DBObject>();    
    DBCursor cursor = db.getCollection("myCol").find().sort(new BasicDBObject("_id",-1)).limit(collection.find(query).count());
        while(cursur.hasNext){
        list.add(cursur.next());
    }
    if(!list.isEmpty())
        for(DBObject dbo: list){
            System.out.println(dbo);
        }
    else
        System.out.println("List is empty"); 
```

# jquery - 将数据添加到 jquery $.cache / 使用没有 dom 元素的 data()

> ID：13994066
> 
> 赞同：0
> 
> 时间：2012-12-21T16:50:19.480
> 
> 标签：jquery

我经常使用 jquery 的[data()](http://api.jquery.com/data/)方法而不是创建全局变量。通常，我将它们附加到我的`<body>`-tag 上。

但是有什么方法可以跳过 dom 元素吗？做类似的事情会是个坏主意`$.cache['foo'] = 'bar';`吗？

# multithreading - 可以中止暂停的线程吗？

> ID：13994069
> 
> 赞同：4
> 
> 时间：2012-12-21T16:50:21.570
> 
> 标签：multithreading, delphi-prism, oxygene

我创建了一个线程，该线程可以暂停。那么，如何杀死或终止挂起的线程？

我尝试了`ABORT`该线程，但收到一条运行时错误消息，指出该线程已挂起并且无法中止。我一直在寻找**终止**方法或类似的方法，但它似乎不存在。

```
myThread := new Thread(@BigLoop);
myThread.Start;

myThread.Suspend;
myThread.Abort; <<<===exception is raised. 
```

那么，你如何杀死或终止一个挂起的线程呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:04:08.960

在我恢复挂起的线程后，我能够中止线程；

```
myThread := new Thread(@BigLoop);
myThread.Start;

myThread.Suspend;

if MyThread.ThreadState = ThreadState.Suspended then
   myThread.Resume;

myThread.Abort; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T11:50:38.857

请注意，不建议使用 abort。更好的解决方案是使用等待句柄（autoresetevent/manualresetevent）来通知线程它应该停止运行。请记住，“中止”不适用于调用本机代码的任何内容，例如 com 或 pinvoke。

# c# - 设置静态文本控件的透明度

> ID：13994076
> 
> 赞同：1
> 
> 时间：2012-12-21T16:50:44.410
> 
> 标签：c#

是否可以设置winforms中可用的静态文本控件的透明度？我尝试设置底层面板的透明度，但它不适用于重叠控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:21:03.963

Label 控件很好地支持透明度。您可以通过为 BackColor 属性选择 Color.Transparent 来获得完全透明。具有非零 alpha 的部分透明度也很有效。这是一个带有 BackgroundImage 属性集和标签的示例：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
        label1.BackColor = Color.FromArgb(40, Color.Black);
    }
} 
```

看起来像这样：

![在此处输入图像描述](../Images/ef570c3af0fe28dbd50684288dd04802.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:40:06.610

~~使用常规`Label`不会帮助您获得真正的透明度。~~我建议您通过覆盖`OnPaint`或处理`Paint`容器的事件来绘制字符串。

例子：

```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);
    var textPosition = new PointF(100, 50);
    using (var font = new Font("Arial", 12, FontStyle.Regular))
        e.Graphics.DrawString("My text", font, Brushes.Black, textPosition);
} 
```

编辑：我不知道控件实际上支持透明度。+1 Hans，将帖子仅用于替代方法。

# php - 蓝盒故障，oscommerce

> ID：13994077
> 
> 赞同：0
> 
> 时间：2012-12-21T16:50:47.823
> 
> 标签：php, layout, oscommerce, visual-glitch

问题在这里： http: [//netadvokaten.se/index.php](http://netadvokaten.se/index.php)

突然，这个蓝色的盒子凭空出现！

我正在运行最新版本的 OsCommerce，经过数小时的谷歌搜索后，我似乎是唯一一个遇到过这个问题的人。

我没有嵌入代码中的蓝色图像，我不知道该怎么做。

真挚地。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:52:34.100

这是你的 body 元素的 CSS，注意到什么了吗？

```
body {
   background: #fff url(images/blue.jpg) no-repeat center scroll;
   color: #000;
   margin: 0px;
   font-size: 11px;
   font-family: Lucida Grande, Lucida Sans, Verdana, Arial, sans-serif;
} 
```

# c# - AutoMapper - 继承映射不 起作用，相同的源，多个目的地

> ID：13994081
> 
> 赞同：13
> 
> 时间：2012-12-21T16:51:01.383
> 
> 标签：c#, inheritance, automapper, automapper-2

我可以在 AutoMapper (v2.2) 中为具有相同 Source 类型但不同 Destination 类型的地图使用继承映射吗？

我有这个基本情况（真正的类有更多的属性）：

```
public abstract class BaseViewModel
{
    public int CommonProperty { get; set;}
}

public class ViewModelA : BaseViewModel
{
    public int PropertyA { get; set; }
}

public class ViewModelB : BaseViewModel
{
    public int PropertyB { get; set; }
} 
```

`ViewModelA`并且`ViewModelB`是同一实体类的不同表示：

```
public class Entity
{
    public int Property1 { get; set; }
    public int Property2 { get; set; }
    public int Property3 { get; set; }
} 
```

我想`BaseViewModel`为每个 ViewModel 重用相同的映射，例如：

```
Mapper.CreateMap<Entity, BaseViewModel>()
    .Include<Entity, ViewModelA>()
    .Include<Entity, ViewModelB>()
    .ForMember(x => x.CommonProperty, y => y.MapFrom(z => z.Property1));

Mapper.CreateMap<Entity, ViewModelA>()
    .ForMember(x => x.PropertyA, y => y.MapFrom(z => z.Property2));

Mapper.CreateMap<Entity, ViewModelB>()
    .ForMember(x => x.PropertyB, y => y.MapFrom(z => z.Property3)); 
```

但不幸的是，这似乎不起作用。像这样的调用：

```
var model = Mapper.Map<Entity, ViewModelA>(entity); 
```

导致`model`已`PropertyA`映射，但不是`CommonProperty`. 我相信我正确地遵循了[https://github.com/AutoMapper/AutoMapper/wiki/Mapping-inheritance](https://github.com/AutoMapper/AutoMapper/wiki/Mapping-inheritance)中的示例，但我担心使用相同的 Source 类型创建多个地图会使 AutoMapper 出错。

有什么见解吗？我喜欢将基类映射分组在一起的想法，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T19:27:35.177

不幸的是，在这种情况下，AutoMapper 似乎只为每个源类型注册了一个子类映射，即最后一个 ( `ViewModelB`)。这可能被设计为与并行层次结构一起使用，而不是与单一源类型一起使用。

要解决此问题，您可以将通用映射封装在扩展方法中：

```
public static IMappingExpression<Entity, TDestination> MapBaseViewModel<TDestination>(this IMappingExpression<Entity, TDestination> map)
  where TDestination : BaseViewModel { 
  return map.ForMember(x => x.CommonProperty, y => y.MapFrom(z => z.Property1));
} 
```

并在各个子类映射中使用它：

```
Mapper.CreateMap<Entity, ViewModelA>()
  .MapBaseViewModel<ViewModelA>()
  .ForMember(x => x.PropertyA, y => y.MapFrom(z => z.Property2));

Mapper.CreateMap<Entity, ViewModelB>()
  .MapBaseViewModel<ViewModelB>()
  .ForMember(x => x.PropertyB, y => y.MapFrom(z => z.Property3)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-13T10:28:32.447

哟可以在这里做

```
 CreateMap<Entity, ViewModelA>()
            .InheritMapping(x =>
            {
                x.IncludeDestinationBase<BaseViewModel>();
            }); 
```

有扩展码

```
public static class MapExtensions
{        

    public static void InheritMapping<TSource, TDestination>(
        this IMappingExpression<TSource, TDestination> mappingExpression,
        Action<InheritMappingExpresssion<TSource, TDestination>> action)
    {
        InheritMappingExpresssion<TSource, TDestination> x =
            new InheritMappingExpresssion<TSource, TDestination>(mappingExpression);
        action(x);
        x.ConditionsForAll();
    }

    private static bool NotAlreadyMapped(Type sourceType, Type desitnationType, ResolutionContext r, Type typeSourceCurrent, Type typeDestCurrent)
    {
        var result = !r.IsSourceValueNull &&
               Mapper.FindTypeMapFor(sourceType, desitnationType).GetPropertyMaps().Where(
                   m => m.DestinationProperty.Name.Equals(r.MemberName)).Select(y => !y.IsMapped()
                   ).All(b => b);
        return result;
    }
    public class InheritMappingExpresssion<TSource, TDestination>
    {
        private readonly IMappingExpression<TSource, TDestination> _sourcExpression;
        public InheritMappingExpresssion(IMappingExpression<TSource, TDestination> sourcExpression)
        {
            _sourcExpression = sourcExpression;
        }
        public void IncludeSourceBase<TSourceBase>(
            bool ovverideExist = false)
        {
            Type sourceType = typeof (TSourceBase);
            Type destinationType = typeof (TDestination);
            if (!sourceType.IsAssignableFrom(typeof (TSource))) throw new NotSupportedException();
            Result(sourceType, destinationType);
        }
        public void IncludeDestinationBase<TDestinationBase>()
        {
            Type sourceType = typeof (TSource);
            Type destinationType = typeof (TDestinationBase);
            if (!destinationType.IsAssignableFrom(typeof (TDestination))) throw new NotSupportedException();
            Result(sourceType, destinationType);
        }
        public void IncludeBothBases<TSourceBase, TDestinatioBase>()
        {
            Type sourceType = typeof (TSourceBase);
            Type destinationType = typeof (TDestinatioBase);
            if (!sourceType.IsAssignableFrom(typeof (TSource))) throw new NotSupportedException();
            if (!destinationType.IsAssignableFrom(typeof (TDestination))) throw new NotSupportedException();
            Result(sourceType, destinationType);
        }
        internal void ConditionsForAll()
        {
            _sourcExpression.ForAllMembers(x => x.Condition(r => _conditions.All(c => c(r))));//указываем что все кондишены истинны
        }
        private List<Func<ResolutionContext, bool>> _conditions = new List<Func<ResolutionContext, bool>>();
        private void Result(Type typeSource, Type typeDest)
        {
                _sourcExpression.BeforeMap((x, y) =>
                {
                    Mapper.Map(x, y, typeSource, typeDest);
                });
                _conditions.Add((r) => NotAlreadyMapped(typeSource, typeDest, r, typeof (TSource), typeof (TDestination)));
        }
    }

} 
```

# javascript - 将 unix 时间戳转换为 javascript 日期对象

> ID：13994083
> 
> 赞同：19
> 
> 时间：2012-12-21T16:51:04.657
> 
> 标签：javascript, date, unix-timestamp

我正在使用代表这样的日期的 json api

```
"date" : "/Date(1356081900000)/" 
```

我想把它变成普通的 javascript 日期。

我能想到的解决这个问题的唯一方法是对留下时间戳的所有内容进行替换，然后我可以“转换”。

这行得通，但它看起来不对。

我的问题。我可以以更好的方式做到这一点吗？

**更新**

```
 unix_timestamp = jsonDate.replace('/Date(', '').replace(')/', '');

 newDate = new Date(+unix_timestamp + 1000*3600); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T16:55:27.107

重复[如何格式化 JSON 日期？](https://stackoverflow.com/questions/206384/how-to-format-a-json-date).

接受的解决方案是：

```
var date = new Date(parseInt(jsonDate.substr(6))); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-21T16:53:15.350

尝试这样的事情： -

```
 var d = new Date(unix_timestamp*1000); 
```

或者

```
 var d = new Date([UNIX Timestamp] * 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:59:23.950

构造[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)函数接受 Unix 时间戳。

```
function cleanDate(d) {
    return new Date(+d.replace(/\/Date\((\d+)\)\//, '$1'));
}

cleanDate("/Date(1356081900000)/"); // => Fri Dec 21 2012 04:25:00 GMT-0500 (EST) 
```

# knockout.js - Knockout - 在渲染期间显示进度图像

> ID：13994085
> 
> 赞同：3
> 
> 时间：2012-12-21T16:51:11.773
> 
> 标签：knockout.js

我有一个使用 Knockout 来显示过滤列表的页面。视图模型有一个对象数组，以及一个用于过滤数组的`ko.computed`对象`ko.utils.arrayFilter`。

有时过滤会变得非常复杂并且需要一段时间，所以我想显示一个进度图像来显示正在发生的事情并且世界还没有结束。

最好的方法是什么？我尝试在视图模型上使用可观察对象，该模型在过滤方法的开始和结束时设置，但这似乎不起作用。

或者在 Knockout 开始更新之前和之后您可以使用哪些事件？

我是 Knockout 的新手，所以我可能错过了一些明显的东西！

JS Fiddle 在这里：http: [//jsfiddle.net/jsayce/pSzSw/](http://jsfiddle.net/jsayce/pSzSw/)，展示了我在过滤方法上设置可观察对象的尝试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:07:38.547

要完成这项工作，您必须在另一个线程中运行长时间操作。您可以使用`setTimeout`函数来执行此操作，也可以为此使用任何精美的第三方库。这是快速解决方案：

```
var cheeseViewModel = function() {
    var self = this;

    self.englishOnly = ko.observable(false);
    self.filtering = ko.observable(false);

    self.cheeses = ko.observableArray([]);
    self.cheeses.push(new cheese('Camembert', false));
    self.cheeses.push(new cheese('Stilton', true));
    self.cheeses.push(new cheese('Brie', false));
    self.cheeses.push(new cheese('Appenzeller', false));
    self.cheeses.push(new cheese('Wensleydale', true));

    self.selectedCheeses = ko.observableArray(self.cheeses());

    self.englishOnly.subscribe(function() {
        self.filtering(true);

        setTimeout(function() {
            var filteredCheeses = ko.utils.arrayFilter(self.cheeses(), function(cheese) {
                createSlowness();
                return cheese.madeInEngland || !self.englishOnly();
            });

            self.selectedCheeses(filteredCheeses);
            self.filtering(false);
        }, 20);
    }); 
```

这是工作小提琴：http: [//jsfiddle.net/pSzSw/6/](http://jsfiddle.net/pSzSw/6/)

# syntax - 嵌套 if-else 作为单行

> ID：13994086
> 
> 赞同：1
> 
> 时间：2012-12-21T16:51:13.073
> 
> 标签：syntax, python-3.x

如何编写以下嵌套的 if-else

```
 if 'parent' in commit:
            if commit['parent'] == cid-1:
                parent = '    '
            else:
                parent = commit['parent']
        else:
            parent = '<no parent>' 
```

作为单线？外部 if-else 可以写成

```
parent = commit['parent'] if 'parent' in commit else '<no parent>' 
```

请描述如何在语法上为复杂的表达式编写它，一般来说，不仅仅是这种情况。但请务必将此示例用作展示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:54:55.047

是的，如果您将“内部”表达式与外部表达式结合使用，您的代码将作为单行代码工作：

```
parent = ('    ' if comment['parent'] == cid-1 else commit['parent']) if 'parent' in commit else '<no parent>' 
```

首先`if`评估外部表达式的 ；查看上述“美女”的编译字节码：

```
>>> import dis
>>> def foo():
...     parent = ('    ' if comment['parent'] == cid-1 else commit['parent']) if 'parent' in commit else '<no parent>'
... 
>>> dis.dis(foo)
  2           0 LOAD_CONST               1 ('parent') 
              3 LOAD_GLOBAL              0 (commit) 
              6 COMPARE_OP               6 (in) 
              9 POP_JUMP_IF_FALSE       48 
             12 LOAD_GLOBAL              1 (comment) 
             15 LOAD_CONST               1 ('parent') 
             18 BINARY_SUBSCR        
             19 LOAD_GLOBAL              2 (cid) 
             22 LOAD_CONST               2 (1) 
             25 BINARY_SUBTRACT      
             26 COMPARE_OP               2 (==) 
             29 POP_JUMP_IF_FALSE       38 
             32 LOAD_CONST               3 ('    ') 
             35 JUMP_ABSOLUTE           51 
        >>   38 LOAD_GLOBAL              0 (commit) 
             41 LOAD_CONST               1 ('parent') 
             44 BINARY_SUBSCR        
             45 JUMP_FORWARD             3 (to 51) 
        >>   48 LOAD_CONST               4 ('<no parent>') 
        >>   51 STORE_FAST               0 (parent) 
             54 LOAD_CONST               0 (None) 
             57 RETURN_VALUE 
```

因此，如果在`'parent'`中*找不到*`commit`，它将跳转到指令 48 并加载`'<no parent>'`而不查看`commit['parent']`。

不确定该行的可读性如何，我发现您的显式版本更容易理解。

# php - PHP：加载共享库时出错：libmysqlclient.so.18

> ID：13994089
> 
> 赞同：2
> 
> 时间：2012-12-21T16:51:27.190
> 
> 标签：php, mysql, apache, centos

我设置 Crontab ：

```
[root@root mysql]# crontab -l
5 *  *  *  *  php /home/admin/public_html/scheduleSendMail.php 
```

但不执行 PHP 代码！

```
[root@root mysql]# php /home/admin/public_html/scheduleSendMail.php 
php: error while loading shared libraries: libmysqlclient.so.18: cannot open shared object file: No such file or directory

[root@root mysql]# rpm -qR postfix 
```

寻找 ：

```
..
libmysqlclient.so.16  
libmysqlclient.so.16(libmysqlclient_16)  
.. 
```

我正在使用 Centos 和 DirectAdmin

```
PHP v: php-5.3.3-14.el6_3.i686
mysql v: mysql-5.1.66-2.el6_3.i686
centos v: CentOS release 6.3 (Final) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:37:01.000

代码：

```
#ls -l /usr/lib/mysql | grep libmysqlclient.so 
```

输出：

```
lrwxrwxrwx 1 root root      24 Dec 21 21:41 libmysqlclient.so -> libmysqlclient.so.16.0.0
lrwxrwxrwx 1 root root      24 Dec 21 21:41 libmysqlclient.so.16 -> libmysqlclient.so.16.0.0
-rwxr-xr-x 1 root root 1524000 Dec  7 18:27 libmysqlclient.so.16.0.0

#ln /usr/lib/mysql/libmysqlclient.so.16.0.0  /usr/lib/mysql/libmysqlclient.so.18 
```

不行 ！

但 ：

```
#ln /usr/lib/mysql/libmysqlclient.so.16.0.0  /usr/lib/libmysqlclient.so.18 
```

它的工作非常好：D

谢谢大家

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:30:16.910

php 是针对错误的 mysql lib 编译的。

我建议您检查 php 可执行文件是否是 rpm 包提供的。

你也可以尝试一个肮脏的解决方法，进入 libmysqlclient.so.16 所在的目录并写入：

ln -s libmysqlclient.so.16 libmysqlclient.so.18

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:42:14.033

更好的选择是删除您的 php 并安装 5.3.23 版本：

1.  百胜删除php
2.  wget [http://repo.webtatic.com/yum/centos/5/latest.rpm](http://repo.webtatic.com/yum/centos/5/latest.rpm)
3.  rpm -ivh latest.rpm
4.  启用 webtatic 存储库并禁用 rhea 存储库 (/etc/yum.repos.d/)
5.  百胜安装php

# javascript - jQuery 验证插件不起作用

> ID：13994101
> 
> 赞同：1
> 
> 时间：2012-12-21T16:52:24.283
> 
> 标签：javascript, jquery, jquery-validate

我似乎无法弄清楚这里的问题是什么。我已经尝试将我的 js 放在我的脑海中，在我的表单下方，在我的表单上方等等。它们似乎都没有做任何事情。它只是提交页面而不尝试验证

HTML：

```
<div class="content">
<h1>Submit A Lost Paw</h1>
<p>Please complete the form below. After being reviewed by a moderator, your listing will be posted for others to see.</p>

<ul id="error-box">

</ul>

<form id="test" name="test" action="test.php" method="post">
    <div class="section">
        <div class="input-title">
            <label for="pet_name">Pet Name:</label>
        </div>

        <div class="input">
            <input id="pet_name" type="text" />
        </div>

        <div class="clear"></div>
    </div>

    <div class="section">
        <div class="input-title">
            <label for="date_missing">Date Pet Went Missing:</label>
        </div>

        <div class="input">
            <input id="date_missing" type="text" />
        </div>

        <div class="clear"></div>
    </div>

    <div class="section">
        <div class="input-title">
            <label for="location">Location:</label>
        </div>

        <div class="input">
            <input id="location" type="text" />
        </div>

        <div class="clear"></div>
    </div>

    <div class="section">
        <div class="input-title">
            <label for="age">Age:</label>
        </div>

        <div class="input">
            <input id="age" type="text" />
        </div>

        <div class="clear"></div>
    </div>

    <div class="section">
        <div class="input-title">
            <label for="colors">Colors:</label>
        </div>

        <div class="input">
            <input id="colors" type="text" />
        </div>

        <div class="clear"></div>
    </div>

    <div class="section">
        <div class="input-title">
            <label for="contact_name">Contact Name:</label>
        </div>

        <div class="input">
            <input id="contact_name" type="text" />
        </div>

        <div class="clear"></div>
    </div>

    <div class="section">
        <div class="input-title">
            <label for="phone">Phone:</label>
        </div>

        <div class="input">
            <input id="phone" type="text" />
        </div>

        <div class="clear"></div>
    </div>

    <div class="section">
        <div class="input-title">
            <label for="email">Email:</label>
        </div>

        <div class="input">
            <input id="email" type="text" />
        </div>

        <div class="clear"></div>
    </div>

    <div class="section">
        <div class="input-title">
            <label for="add_details">Additional Details:</label>
        </div>

        <div class="input">
            <textarea id="add_details"></textarea>
        </div>

        <div class="clear"></div>
    </div>

    <div class="section">
        <div class="input-title">

        </div>

        <div class="input">
            <input type="submit" value="Submit for Review" />
        </div>

        <div class="clear"></div>
    </div>
</form>
</div> 
```

Javascript：

```
<script type="text/javascript">     
    $(document).ready(function() {
        $("#test").validate({
            errorLabelContainer: "#error-box",
            wrapper: "li id='error'",
            rules: {
                pet_name: {
                    required: true
                }
            }
        });
    });         
</script> 
```

截至目前，js 直接位于 html 下方，在同一个文件中。整个文件被拉入一个索引页面，该页面的头部拉入了 validate.js 文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T17:22:14.073

您需要输入字段上的名称属性，例如

```
<input id="pet_name" name="pet_name" type="text" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:00:55.417

您似乎没有向元素添加任何类或对插件进行任何额外的 javascript 方法调用以指定验证行为。

通常，您会添加 、 、 等类`required`来`email`确定`url`验证行为（或者调用插件方法来做同样的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T00:39:22.883

我还没有看到你的头，但一定要包括以下内容

```
$(function(){
$("#test").validate();
})

jQuery.validator.setDefaults({
debug: true,
success: "valid",
submitHandler: function(form) { posting(); } 
```

});

您可能不需要提交处理程序，“发布”部分是您将 ajax 脚本转换为函数并使用处理程序调用它的地方。当然，您将需要脚本标签

# c# - 使用 EPPlus 获取单元格的行号

> ID：13994121
> 
> 赞同：12
> 
> 时间：2012-12-21T16:53:45.220
> 
> 标签：c#, vb.net, epplus

如何使用 EPPLus 库找到特定单元格的行号？

我正在寻找一种方法`Cl.Row`，但似乎没有找到它 - 我必须自己使用`cl.Address`并解析行号吗？

我确定这是一个愚蠢的新手问题，但我似乎找不到正确的方法。

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-21T17:00:50.357

单元格是`ExcelRange`，它具有`Start`和`End`属性。如果您想知道范围开始的行：

```
Dim row As Int32 = cell.Start.Row 
```

# jstl - 标签渲染上的 Spring 和 Openlayer 冲突？

> ID：13994129
> 
> 赞同：1
> 
> 时间：2012-12-21T16:54:10.010
> 
> 标签：jstl, label, openlayers

我需要使用 Jquery 来处理网页上的其他元素。我尝试将标签放在具有以下样式的矢量图层上：

```
 var vector_style = new OpenLayers.Style({
            'fillColor': 'red',
            'fillOpacity': .8,
            'strokeColor': '#aaee77',
            'strokeWidth': 3,
            'pointRadius': 8,
            'label': "${name}",
            'labelAlign': "cc",
            }); 
```

但标签不显示。

我只是想知道这个“$ {name}”是否存在冲突。我用一个没有 Jquery 的简单页面再次对其进行了测试。标签确实显示。请让我如何解决这个问题。谢谢。

**更新：** 我刚刚发现冲突可能来自 Spring 或 JSTL。我使用 Firebug 工具来检查样式的 javaScript 源代码。它看起来像这样：

```
 var vector_style = new OpenLayers.Style({
            fillColor: 'red',
            fillOpacity: .8,
            strokeColor: '#aaee77',
            strokeWidth: 3,
            pointRadius: 8,
            label: "",
            labelAlign: "cc",
            }); 
```

我从服务器端返回了一个变量：

```
 model.addAttribute("name", "test"); 
```

然后所有功能都显示标签“测试”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T00:34:21.557

问题可能是`labelAlign`" " 的值`cc`不存在。

从**Openlayers**文档中：

> 第一个字符用于水平对齐，第二个字符用于垂直对齐。?水平对齐的有效值：“l”=left，“c”=center，“r”=right。>垂直对齐的有效值：“t”=top，“m”=middle，“b”=bottom。示例值：“lt”、“cm”、“rb”。>默认为“厘米”。

尝试删除此行。

# javascript - 使用 jquery 和 c# 显示/隐藏 div

> ID：13994132
> 
> 赞同：0
> 
> 时间：2012-12-21T16:54:19.497
> 
> 标签：javascript, jquery

我正在尝试显示/隐藏基于 jquery 的三个 div，使用`<a href="#id">`. 但是代码不起作用。当我使用`<a>`使用 rel 属性的链接进行映射时，代码工作正常。

例如：`<a rel="cat1" class="selected">`

# 默认.aspx

```
<div id="featuredleftdiv">
    <script type="text/javascript">
        var featuredposts = new ddtabcontent("featuredposts")
        featuredposts.setpersist(true)
        featuredposts.setselectedClassTarget("link")
        featuredposts.init(10000)
    </script>

    <ul id="featuredposts" class="featuredposts">
        <li><a href="#cat1" class="menu">a</a></li>
        <li><a href="#cat2" class="menu">b</a></li>
    </ul>

    <div class="clear"></div>

    <div id="cat1" class="featuredposts_content">
        <asp:UpdatePanel ID="UpdatePanel4" runat="server"> 
            <ContentTemplate>
                <asp:ListView ID="ListView4" runat="server" GroupItemCount="1" OnPagePropertiesChanging="ListView4_PagePropertiesChanging"></asp:ListView>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>  

    <div id="cat2" class="featuredposts_content">
        <asp:UpdatePanel ID="UpdatePanel5" runat="server"> 
            <ContentTemplate>
                <asp:ListView ID="ListView5" runat="server" GroupItemCount="1"  OnPagePropertiesChanging="ListView4_PagePropertiesChanging"></asp:ListView>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div> 
```

# jQuery

在 html 的 Head 部分

```
<script type="text/javascript" src="Scripts/jquery-1.8.3.js"></script>
<script type="text/javascript">
    $("a.menu").click(function () {
        $("div.featuredposts_content").hide();
        $($(this).attr('href')).show();
        return false;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:07:21.697

您在页面上存在元素之前分配事件处理程序。将 head 部分中的脚本更改为此...

```
<script type="text/javascript" src="Scripts/jquery-1.8.3.js"></script>
<script type="text/javascript">
    $(function() {
        $("a.menu").click(function () {
            $("div.featuredposts_content").hide();
            $($(this).attr('href')).show();
            return false;
        });
    });
</script> 
```

该`$(function() { })`代码使您的脚本在文档准备好或所有元素都已创建时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:00:42.143

看起来**更新面板**搞砸了。

您需要在每次回发后绑定事件，否则它会被设置回默认页面

```
$(function() {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(PostBack);
    PostBack();
});

function PostBack(){
       $("a.menu").off().on.('click' , function () {
            $("div.featuredposts_content").hide();
            $($(this).attr('href')).show();
            return false;
        });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:12:01.903

好吧，我认为问题是没有为事件使用文档就绪处理程序或加载函数：

```
<script type="text/javascript">
   $(document).ready(function(){ // <-------------------------you are missing this
    $("a.menu").click(function () {
        $("div.featuredposts_content").hide();
        $($(this).attr('href')).show();
        return false;
    });
   }); //<----------------------------------------------------
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:30:47.283

尝试这样的事情......

```
​&lt;html>
   <script>
      $(document).ready(function(){
         $("a.menu").click(function () {
            $("div.featuredposts_content").hide();
            $("#" + $(this).attr("value")).show();
         });​
      })
   </script>
   <body>
      <ul id="featuredposts" class="featuredposts">
         <li><a href="#" class="menu" value="IdOfDiv1">something a</a></li>
         <li><a href="#" class="menu" value="IdOfDiv2">something b</a></li>
      </ul>

      <div id="IdOfDiv1" class="featuredposts_content">
         Cat1
      </div>  

      <div id="IdOfDiv2" class="featuredposts_content">
         Cat2
      </div>
  </body>
</html>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

编辑：这是一个快速的解释。

这`$(document).ready()`将确保在页面完全加载之前不会发生点击的连接。当页面首次加载时，所有内容都在显示。

一旦用户单击类为 的链接之一`menu`，该函数将运行。它将隐藏所有`div`具有`featuredposts_content`. 然后，根据点击了哪个链接，它会抓取`value`并使用它来设置`div`要显示的内容。`value`链接中的是`id`要`div`显示的。

# javascript - YUI 3 IO Utility - 带有文件上传的表单提交从 responseText 中删除 HTML

> ID：13994133
> 
> 赞同：2
> 
> 时间：2012-12-21T16:54:20.057
> 
> 标签：javascript, yui

我正在使用 YUI3 IO Utility 提交带有文件的表单。来自服务器的响应包含 HTML，但在请求对象上访问时会被剥离。

```
var form = Y.one('form');
Y.io(form.get('action'), {
    method: form.get('method'),
    form: {
        id: form,
        upload: true
    },
    on: {
        complete: function(id, request) {
            // The server returns a response like <div>response</div>
            console.log(request.responseText); 
            // All HTML is stripped so it just prints 'response' to the console
        }
    }
}); 
```

这被认为是默认行为吗？我几乎不敢相信不可能获得完整的响应内容......服务器还将内容类型标头正确设置为“text/html”。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:49:48.967

我刚刚看了 YUI3 的源代码。[在https://raw.github.com/yui/yui3/master/src/io/js/io-upload-iframe.js](https://raw.github.com/yui/yui3/master/src/io/js/io-upload-iframe.js)中负责请求对象的几行是：

```
_uploadComplete: function(o, c) {
    var io = this,
        d = Y.one('#io_iframe' + o.id).get('contentWindow.document'),
        b = d.one('body'),
        p;

    if (c.timeout) {
        io._clearUploadTimeout(o.id);
    }

    try {
        if (b) {
            // When a response Content-Type of "text/plain" is used, Firefox and     Safari
            // will wrap the response string with <pre></pre>.
            p = b.one('pre:first-child');
            o.c.responseText = p ? p.get('text') : b.get('text');
            Y.log('The responseText value for transaction ' + o.id + ' is: ' +     o.c.responseText + '.', 'info', 'io');
        }
        else {
            o.c.responseXML = d._node;
            Y.log('The response for transaction ' + o.id + ' is an XML     document.', 'info', 'io');
        }
    }
    catch (e) {
        o.e = "upload failure";
    }

    io.complete(o, c);
    io.end(o, c);
    // The transaction is complete, so call _dFrame to remove
    // the event listener bound to the iframe transport, and then
    // destroy the iframe.
    w.setTimeout( function() { _dFrame(o.id); }, 0);
}, 
```

因此，只要响应包含“正文”节点，它就会将正文内容作为“文本”返回。

```
o.c.responseText = p ? p.get('text') : b.get('text'); 
```

恕我直言，如果有 body 节点，就没有机会获得 innerHTML。我决定创建一个自定义的 IO Upload Iframe 模块，该模块添加了一个名为“responseHTML”的附加属性，以及 body 节点的 innerHTML。

您可以从 Pastebin 获取源代码：http: [//pastebin.com/WadQgNP2](http://pastebin.com/WadQgNP2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:31:29.963

[http://yuilibrary.com/yui/docs/io/#the-response-object](http://yuilibrary.com/yui/docs/io/#the-response-object)

该`responseXML`属性可能包含您要查找的内容。如果这不能帮助您尝试更改`console.log(request.responseText);`并`console.log(request);`通过调试器（例如 Firebug）中的属性来查找包含您需要的数据的属性。

请记住，通常所有调用的属性`...Text`都只会返回某些内容的文本内容，完全没有 XML 代码。

# powershell - Powershell - 传递凭据

> ID：13994135
> 
> 赞同：0
> 
> 时间：2012-12-21T16:54:22.503
> 
> 标签：powershell

[这里](https://stackoverflow.com/questions/13992772/powershell-secure-credentials)是较早问题的第 2 部分- 我知道有一个变量，其中包含明文密码和明文用户名，恰好是电子邮件地址。我需要使用这些来通过 SMTP 在 powershell 中发送电子邮件，例如 Send-MailMessage。

所以我需要通过它：

`personx@persony.com`和`$password`

为了针对智能主机进行身份验证，请发送电子邮件。这样做的任何方式，Get-Credential 的巧妙之处或 Send-MailMessage 上的某些开关，还是有另一种完全不同的选择？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:08:31.623

您可以使用`ConvertTo-SecureString`来转换您的纯文本密码。

假设您的用户名在`$username`变量和纯文本密码中`$password`，您可以执行以下操作：

```
$securepass = ConvertTo-SecureString -AsPlainText -String $password -Force
$creds = New-Object System.Management.Automation.PSCredential -argumentlist $username,$securepass

Send-MailMessage ... -Credentials $creds 
```

# magento - Magento 缩小选择类别“浏览依据”属性停止工作

> ID：13994138
> 
> 赞同：2
> 
> 时间：2012-12-21T16:54:31.220
> 
> 标签：magento, magento-1.4

嗨，在对 magento 网站（1.4.2.3）进行了一些优化之后，我注意到在类别页面上，“缩小结果”已经消失。此功能非常重要，因为它允许客户搜索品牌、颜色和类型。

仔细检查类别是否标记为锚。

从正常工作的备份中恢复 app/design/frontend/default/cust_template/layout/catalog.xml 和 app/design/frontend/default/default/layout/catalog.xml。

没有触及 /app/design/frontend/default/cust_template/template/catalog/layer/view.phtml 也没有触及 app/design/frontend/default/default/template/catalog/layer/view.phtml

来自catalog.xml；

```
<catalog_category_default>
    <reference name="left">
        <block type="catalog/navigation" name="catalog.leftnav" before="-" template="catalog/navigation/left.phtml"/>
    </reference>
    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <!-- The following code shows how to set your own pager increments -->
                    <!--
                        <action method="setDefaultListPerPage"><limit>4</limit></action>
                        <action method="setDefaultGridPerPage"><limit>9</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>2</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>4</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>8</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>list</mode><limit>all</limit><label>All</label></action>
                    -->
                </block>
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </block>
    </reference>
</catalog_category_default> 
```

```
<catalog_category_layered>
    <reference name="left">
        <block type="catalog/layer_view" name="catalog.leftnav" template="catalog/layer/view.phtml"/>
    </reference>
    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <!-- <action method="addReviewSummaryTemplate"><type>default</type><template>review/helper/su.phtml</template></action> -->
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <!-- The following code shows how to set your own pager increments -->
                    <!--
                        <action method="setDefaultListPerPage"><limit>4</limit></action>
                        <action method="setDefaultGridPerPage"><limit>3</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>2</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>4</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>8</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>list</mode><limit>all</limit><label>All</label></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>3</limit></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>9</limit></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>all</limit><label>All</label></action>
                    -->
                </block>
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </block>
    </reference>
</catalog_category_layered>

<catalog_category_layered_nochildren>
    <remove name="right.reports.product.viewed" />
    <reference name="right">
        <block type="reports/product_viewed" before="right.permanent.callout" name="left.reports.product.viewed" template="reports/product_viewed.phtml" />
    </reference>
</catalog_category_layered_nochildren> 
```

有没有人可以为我阐明这一点？

# mysql - 优化计算一天中每一分钟平均值的 SQL 查询

> ID：13994140
> 
> 赞同：0
> 
> 时间：2012-12-21T16:54:35.750
> 
> 标签：mysql, sql, optimization, bulkinsert

我编写了一个 SQL 例程，用于根据 5 天的数据（这些天是例程的参数）计算一天中每一分钟的平均值，并将结果插入另一个表中。它很长，我想知道是否有任何方法可以优化它。

我需要用来计算平均值的值都在同一个表 SiteReading 中，因此要获得同一分钟的 5 个值，但从不同的日子开始，我加入了那些日子的表子集，因此小时和分钟将匹配，然后值最终位于同一行。然后我在每一行上添加 5 个值，并从中创建一个新表，并将其插入到存储这些平均值的基线表中。

这是例程：

```
CREATE PROCEDURE 'calc_baseline` (IN `input_site_id` int, IN `day1` varchar(12), IN `day2` varchar(12), IN `day3` varchar(12), IN `day4` varchar(12), IN `day5` varchar(12))
BEGIN

insert into Baseline
SELECT 
    site_id,
    contract_id,
    temp_time as timestamp,
    (sr1value + sr2value + sr3value + sr4value + sr5value) / 5 as value,
    programme
FROM
    (SELECT 
        distinct concat(cast(hour(temp_time) as char), ':', cast(minute(temp_time) as char)) as hourminute,            
            SR.site_id as site_id,
            value as sr1value,
            temp_time,
            S.contract_id as contract_id,
            programme
    FROM
        SiteReading SR
    join Site S ON SR.site_id = S.site_id
    join Contract C ON S.contract_id = C.contract_id
    where
        temp_time like 'day1%'
            and SR.site_id = input_site_id) sr1
        join
    (SELECT 
        concat(cast(hour(temp_time) as char), ':', cast(minute(temp_time) as char)) as hourminute,
            value as sr2value
    FROM
        SiteReading
    where
        temp_time like 'day2%'
            and site_id = input_site_id) sr2 ON sr1.hourminute = sr2.hourminute
        join
    (SELECT 
        concat(cast(hour(temp_time) as char), ':', cast(minute(temp_time) as char)) as hourminute,
            value as sr3value
    FROM
        SiteReading
    where
        temp_time like 'day3%'
            and site_id = input_site_id) sr3 ON sr1.hourminute = sr3.hourminute
        join
    (SELECT 
        concat(cast(hour(temp_time) as char), ':', cast(minute(temp_time) as char)) as hourminute,
            value as sr4value
    FROM
        SiteReading
    where
        temp_time like 'day4%'
            and site_id = input_site_id) sr4 ON sr1.hourminute = sr4.hourminute
        join
    (SELECT 
        concat(cast(hour(temp_time) as char), ':', cast(minute(temp_time) as char)) as hourminute,
            value as sr5value
    FROM
        SiteReading
    where
        temp_time like 'day5%'
            and site_id = input_site_id) sr5 ON sr1.hourminute = sr5.hourminute
limit 1440;

END//

DELIMITER ; 
```

* * *

它正在读取和写入的相关表是：

**- 现场阅读：**

```
CREATE TABLE `SiteReading` (
  `site_id` int(11) NOT NULL,
  `contract_id` int(11) DEFAULT NULL,
  `temp_time` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `value` int(11) NOT NULL,
  PRIMARY KEY (`site_id`,`temp_time`),
  KEY `site_id` (`site_id`),
  KEY `contract_id` (`contract_id`),
  CONSTRAINT `SiteReading_ibfk_1` FOREIGN KEY (`site_id`) REFERENCES `Site` (`site_id`),
  CONSTRAINT `SiteReading_ibfk_3` FOREIGN KEY (`contract_id`) REFERENCES `Contract` (`contract_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8$$ 
```

**- 基线：**

```
CREATE TABLE `Baseline` (
  `site_id` int(11) NOT NULL,
  `contract_id` int(11) NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `value` int(11) NOT NULL,
  `programme` int(11) NOT NULL,
  PRIMARY KEY (`site_id`,`timestamp`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8$$ 
```

1.  因为我需要获取一些附加值（site_id、contract_id、program）来存储在基线中，这些值对于每一行都是相同的，所以我想知道也许我应该以其他方式执行插入语句？问题是基线表的所有列都不能为空。

2.  也许有人对此过程有任何其他评论 - 我是否需要为此例程定义一些其他参数，例如 ON DUPLICATE KEY UPDATE 或其他一些与例程相关的事情？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:21:42.343

```
SELECT 
  t1.site_id,
  t1.contract_id,
  t1.temp_time,
  AVG(t2.value)
FROM 
  SiteReading AS t1
LEFT JOIN 
  SiteReading AS t2
ON 
  t1.site_id = t2.site_id 
  AND t2.datetime BETWEEN startdate AND enddate
  AND HOUR(t1.temp_time) = HOUR(t2.temp_time) 
  AND MINUTE(t1.temp_time) = MINUTE(t2.temp_time)
WHERE 
  t1.temp_time BETWEEN startdate AND enddate
GROUP BY
  t1.site_id,
  t1.contract_id,
  t1.temp_time 
```

根本没有经过测试，但这样的东西可能会更好地为您服务。我做的优化：

1.  在匹配的时间间隔上使用单个自联接。
2.  将 group by 与平均聚合一起使用
3.  将第一个表限制为 5 天期间（开始日期、结束日期）之间的子集
4.  不在现场或合同上加入。您在基线中有这些表的外键，因此无需从这些表中提取额外数据（我假设程序来自其中之一）。

> 1.因为我需要获取一些附加值（site_id、contract_id、program）来存储在基线中，这些值对于每一行都是相同的，所以我想知道也许我应该以其他方式执行插入语句？问题是基线表的所有列都不能为空。

见#4

> 2.也许有人对此过程有任何其他意见 - 我是否需要为此例程定义一些其他参数，例如 ON DUPLICATE KEY UPDATE 或其他一些与例程相关的事情？

不确定我是否完全理解您的要求。您是否在较长时期内收集多个 5 天基线？如果是这样，我不明白您为什么需要更新任何内容。如果某些 temp_time 重叠（即，您在 5 天内比每 5 天更频繁地运行您的程序），那么您可以保留唯一的 id 或时间戳作为基线主键的一部分，以识别您何时运行程序以防止重复键在 temp_time 上。

## 编辑

我现在才看到你的日子可能不是连续的。在这种情况下更改这些行：

```
AND t2.datetime BETWEEN startdate AND enddate

t1.temp_time BETWEEN startdate AND enddate 
```

至：

```
AND DATE(t2.datetime) IN (day1, day2, day3, day4, day5)

DATE(t1.temp_time) IN (day1, day2, day3, day4, day5) 
```

但是，这会带来一个问题，因为您现在必须在 WHEREclause 和 ON 条件下对站点读取进行全表扫描。为避免这种情况，您可以考虑在存储数据集之前对其时间间隔进行标准化。例如，如果每天读取 24*60 个读数，则每个 temp_time 间隔可以用 1 到 1440 的整数表示，每天可以用 1 到 365 的整数表示（366 闰年）。然后在 where 和 join 子句中使用这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:32:32.493

谢谢你的帮助。现在我想起来了，我最初写的查询有很多问题。首先，我对写入 SiteReading 的应用程序进行了一些更改，因此每分钟只有一行，并且时间戳在其秒字段中始终为 00 - 所以现在比较时间戳更容易（只需提交时间）。我也以一种更好、更有效的方式重写了查询：

```
CREATE PROCEDURE `calc_baseline2`(IN `input_site_id` int, IN `day1` char(12), IN `day2` char(12), IN `day3` char(12), IN `day4` char(12), IN `day5` char(12))
BEGIN

DECLARE curr_date char(10) DEFAULT cast(date(CURRENT_DATE()) as char(10));

insert into Baseline
SELECT distinct
    SR.site_id as site_id,
    S.contract_id as contract_id,
    concat(cast(date(CURRENT_DATE()) as char(10)), ' ',cast(time(temp_time) as char(8))) as timestamp,
    sum(value) as value,
    programme
FROM
    SiteReading SR
        join
    Site S ON SR.site_id = S.site_id
        join
    Contract C ON S.contract_id = C.contract_id
where
    (temp_time like concat(day1,'%')
        or temp_time like concat(day2,'%')
        or temp_time like concat(day3,'%')
        or temp_time like concat(day4,'%')
        or temp_time like concat(day5,'%'))
        and SR.site_id = input_site_id
group by time(temp_time)
limit 1440;

END 
```

再次感谢大家的帮助：）

# php - 管道电子邮件 - 如何发送正文、多部分/替代/php preg_match_all 返回 1 或空数组

> ID：13994141
> 
> 赞同：1
> 
> 时间：2012-12-21T16:54:35.287
> 
> 标签：php, regex, arrays, pipe, preg-match-all

寻找答案我在[这里找到了这个脚本](http://www.damnsemicolon.com/php/parse-emails-in-php-with-email-piping-part-2/)

然而：

它只能将收到的电子邮件正文作为纯文本发送。为了不丢失数据（链接），我需要以与收到的格式相同的格式发送正文。

这个脚本是否有一个简单的改变来实现这一点？

顺便说一句，稍后，我需要将链接文件（来自电子邮件）保存在我的服务器上，并用我自己的链接替换正文中的链接。

谢谢。

**更新**

不知何故，我解决了第一个问题（在我的电子邮件中添加原始边界值），现在，我还有 3 个问题要解决。此代码返回 1`print_r($urls)`

```
$pattern = '#^http://domain.com/(.*)(\w*)0\b#';
preg_match_all($pattern, $email, $urls); 
```

相同的代码返回具有这两个输出的空数组：

1`print_r($urls, true)`

2`print_r($urls[0], true)`

像这样：

1

```
Array
(
    [0] => Array
        (
        )

    [1] => Array
        (
        )

    [2] => Array
        (
        )

) 
```

2

```
Array
(
) 
```

[但是，当我在这里](http://www.functions-online.com/preg_match_all.html)测试代码时，它就像魅力一样

我怎样才能得到我的价值观？将它们放在变量中会非常好，例如 $url1、$url2...

有人可以帮忙吗？（非常感谢您的时间和精力！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:28:26.660

我会回答我的问题。

好的，我已经解决了这个问题。如果有人需要，这里有一些信息......

正则表达式有一个额外的`^`. 进一步，我改进了这样的模式：`"#http://domain.com/([=a-zA-Z\d/-]+)(.|\n|\r)([a-zA-Z\d/-]+)#"`This urls have `=`and that are removed with this line: `$var1=preg_replace("#=(.|\n|\r)#","",$var);`This is not the best way to go, but it works. 我得到了数组中的链接，后来我能够下载文件，`file_get_contents()`并且`file_put_contents()`更改链接很容易`str_replace`。一切都是用 for 循环完成的，因为每封电子邮件中的链接数量不一样。

祝大家节日快乐！

# javascript - OpenLayers：如何让 backgroundGraphic 进入 externalGraphic

> ID：13994142
> 
> 赞同：1
> 
> 时间：2012-12-21T16:54:42.710
> 
> 标签：javascript, styles, z-index, openlayers

我有一个带有节点功能的图层，我可能想在其上显示两个图像，一个主图像和一个背景图像。此页面： http: [//openlayers.org/dev/examples/marker-shadow.html](http://openlayers.org/dev/examples/marker-shadow.html)显示了我想要的内容：阴影位于金色项目下方（当我们使用开发工具移动 png 时更明显）。为此，他们使用：

```
// Set the external graphic and background graphic images.
externalGraphic: "../img/marker-gold.png",
backgroundGraphic: "./img/marker_shadow.png",

// Makes sure the background graphic is placed correctly relative
// to the external graphic.
backgroundXOffset: 0,
backgroundYOffset: -7,

// Set the z-indexes of both graphics to make sure the background
// graphics stay in the background (shadows on top of markers looks
// odd; let's not do that).
graphicZIndex: MARKER_Z_INDEX, //11
backgroundGraphicZIndex: SHADOW_Z_INDEX, //10 
```

显然这与真正的 CSS z-index 无关，因为 DOM 元素最后都有一个`z-index: auto`。但无论如何，我想自己尝试一下（不是在层构造中，而是在之后）：

```
style["backgroundGraphic"] = './img/marker-shadow.png';
style["externalGraphic"] ='./img/marker-gold.png';
style['graphicZIndex'] = 1;
style['backgroundGraphicZIndex'] = style['graphicZIndex']-1; 
```

显示图像。但是，虽然人们可能认为 backgroundGraphic 会自动进入 externalGraphic 之下，但实际上却发生了相反的情况。好的，我将添加 z-index 的东西：

```
style['graphicZIndex'] = 1;
style['backgroundGraphicZIndex'] = style['graphicZIndex']-1; 
```

但它绝对没有改变。我如何获得我的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:14:48.670

这有点棘手。样式和样式图是您的功能所在图层的属性。您应该定义样式，将它们放入样式图中并在图层构造中使用它。您可以通过更改功能 renderIntent 来“随时随地”更改功能的样式。renderIntent 是指样式图中的样式名称。然后调用 layer.redraw()

你应该使用的实际 zIndex 也让我感到困惑。我使用 10 步来始终可以选择在两者之间添加一些内容，而无需更改整个批次。

# ruby-on-rails - Rails 发布发布任务

> ID：13994143
> 
> 赞同：1
> 
> 时间：2012-12-21T16:54:44.547
> 
> 标签：ruby-on-rails

我有一个非常简单的 rails 3.0.7 应用程序，并试图控制何时将帖子发布给网站的一般访问者，只需在创建或编辑帖子时通过简单的选择器表单即可。

完成这项任务的最佳方法是什么，我有点生疏了，不知道如何开始！？

干杯丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:11:47.427

您可以将布尔值`published`或时间戳添加`published_at`到`Post`模型中，然后将其添加到创建/编辑帖子表单中。

boolean 方法很简单，如果您只想说是否应该发布帖子，则可以使用，而如果您希望能够提前写帖子，然后让它们在某个特定日期自动发布，则可以使用 timestamp 方法或时间。

然后，创建一个范围以轻松检索已发布的帖子。根据您选择上面的布尔方法还是时间戳方法，这看起来会有些不同。

```
# boolean method
class Post < ActiveRecord::Base
  # ... other stuff
  scope :published, where(:published => true)

  # ...
end

# timestamp method
class Post < ActiveRecord::Base
  # ... other stuff
  scope :published, lambda { where("published > ?", Time.now) }
end 
```

最后，在您想要向用户列出已发布帖子的控制器中，执行以下操作：

```
class PostsController < ApplicationController
  def index
    @posts = Post.published
  end
end 
```

# jquery - HTML 和 JQuery 用于动画 n×n 网格的框或图块

> ID：13994145
> 
> 赞同：-3
> 
> 时间：2012-12-21T16:54:57.327
> 
> 标签：jquery, html, css, jquery-animate

我想使用 HTML 5、CSS、jQuery（动画）创建一个布局，如下所示：http: [//imgur.com/upRti](http://imgur.com/upRti)。我想为瓷砖的多种排列之间的过渡制作动画。例如，在这样的一组图块或框与类似的一组框或图块之间，如[http://imgur.com/3ukp8](http://imgur.com/3ukp8)。（为了说明的目的，第二张图片只是第一张图片的旋转，但我们可以期待任何组合和组织的盒子/瓷砖）。

动画应该由按下按钮触发并且应该是可重复使用的，因为可能有无数种方法来组织盒子。我希望过渡像这样工作：每个框在独立路径上移向屏幕右侧，而新框从左侧沿各自独立路径移入。我希望整个动画被限制在它自己的 div 中，这样它就不会干扰页面上的其他元素（导航栏等）。最后一个限制是我希望它可以在大多数现代浏览器中工作（理想情况下也是 IE 8 和 9）。

标记框（两组）最优雅的方式是什么？什么是好的动画功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:02:49.107

我先看看[Isotope](http://isotope.metafizzy.co)，它有很多基于网格的内容的排序和动画。

查看演示，尤其是关于[添加元素](http://isotope.metafizzy.co/demos/adding-items.html)的部分。这似乎是你想要的效果。

您可能需要通过添加空/透明项目来“欺骗”它以使其看起来像您建议的布局。

# xcode - 以编程方式更改状态时，NSButton 绑定失败

> ID：13994149
> 
> 赞同：2
> 
> 时间：2012-12-21T16:55:06.017
> 
> 标签：xcode, cocoa, cocoa-bindings, nsbutton

我有一个具有不同实体和属性的核心数据 Mac 应用程序...其中一个属性绑定到 NSButton 复选框...

这是我的问题：如果我用鼠标单击按钮，我可以看到它的状态发生变化（例如从未选中更改为选中），并且绑定属性的状态保存到数据核心，因为如果我关闭并重新打开应用程序，该按钮仍处于选中状态...

但 ...

如果我以编程方式更改此按钮的状态，我仍然可以看到它的状态更改（相同的示例，从未选中更改为选中），但绑定属性的状态未保存到数据核心，如果我关闭并重新打开应用程序，按钮回到未选中状态！

有任何想法吗 ？

## 编辑

好吧，我会尽力解释（对不起我的英语不好）......</p>

我必须对这个名为 Adherents 的实体的一些值进行一些操作和验证（例如，如果 date1> date2 则选中 checkbox1，如果选中 checkbox2，则无论日期比较如何，都会选中 checkbox1 ...</p>

我首先指出了一个解决方案，在“NSManagedObject 子类文件 Adherents.m

```
- (void)awakeFromFetch{

 [super awakeFromFetch];

    // Controle de la cotisation
    aujourdhui = [NSDate date];
    finCotisation = [NSDate dateWithString:[dateCotisation description]];
    controle = [aujourdhui compare:finCotisation];
   if(controle == NSOrderedAscending)
   {
       self.cotisation = [NSNumber numberWithBool:1];
   }
    else if(controle == NSOrderedDescending)
    {
       if ([self.membreHonneur boolValue] == 0)
       {
            self.cotisation = [NSNumber numberWithBool:0];
        }
      else if ([self.membreHonneur boolValue] == 1)
       {
            self.cotisation = [NSNumber numberWithBool:1];
       }
    }
} 
```

像那样，该操作仅在应用程序启动时发生，这很好但还不够……要做到这一点“在路上”（就在用户通过 NSDatePicker 输入或更改日期之后）我建立的最佳解决方案是检查何时日期选择器由用户编辑......似乎我只能在 AppDelegate.m 文件中执行此操作（尝试在 Adherents.h 中声明“IBOutlet NSDatePicker *champDate;”，但是后来，我无法使用复选框连接插座在Interface Builder ...）中，我似乎也无法从那里访问和操作实体值（“self.cotisation”在AppDelegate.m中使用时带来了一个未知属性，我找不到如何声明它在 AppDelegate.h 中正确）。

所以，我的解决方案是在 AppDelegate 中进行这些操作，比较 NSDatePicker 的值并作用于 NSButton 复选框状态……

```
- (void)awakeFromNib {

    [champDate setTarget:self];
    [champDate setAction:@selector(checkDate:)];

}

-(void)checkDate:(id)object {
   finCotisation = [NSDate dateWithNaturalLanguageString:[champDate stringValue]];
   aujourdhui = [NSDate date];
   NSComparisonResult controle = [aujourdhui compare:finCotisation];
    if(controle == NSOrderedAscending){
        [bouttonCotisation setState:TRUE];
    }
    else if(controle == NSOrderedDescending){
        [bouttonCotisation setState:FALSE];
   }
} 
```

但是，当这样做时，绑定失败......所以，我必须同时做：监控 NSDatePicker 并以编程方式更改我的 AppDelegate.m 中的复选框状态，并且还使用 Adherents.m 中的 AwakeFromFetch 检查和更改实体值，我认为这是一个当一切都绑定时，真是胡说八道^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T11:56:27.030

我不确定我是否了解您的问题的具体情况，但收集了这么多：

*   从外部看到的数据模型对象具有以下属性
    *   两个日期值
    *   一个布尔值
    *   第二个布尔值，应根据其他三个值具有不同的值
*   您只更新方法中的依赖值`awakeFromFetch`，因此在运行时更改数据时不会更新它，因此您在 AppDelegate 中手动更改复选框。

我发现这种方法有两个问题：

1.  使用绑定时，您应该只更改模型数据以更新 UI，而不是直接调用 UI 元素的设置器。
2.  如果您有一个完全依赖于其他属性的属性，请不要单独保存它（缓存原因除外，但这会使它更加复杂）。只需即时计算即可。

我假设您的模型类如下所示：

```
@interface
@property (strong) NSDate *date1;
@property (strong) NSDate *date2;
@property (assign BOOL someBool;
@end 
```

现在我们以同样的方式声明将依赖属性添加到头文件中：

```
// readonly because it cannot be changed directly, only the values it depends on can be changed
@property (assign, readonly) BOOL dependentBool; 
```

但是对于这个属性，我们自己在@implementation 中实现getter：

```
-(BOOL)dependentBool
{
    if (NSOrderedAscending = [self.date1 compare:self.date2])
        return YES;

    if (self.someBool)
        return YES;

    return NO;
} 
```

这样，每当有人检查dependentBool 属性时，它都会返回正确的结果。您现在可以将您的复选框绑定到dependentBool。但是，如果您更改任何值，它取决于复选框将不会更新，因为它不知道值已更改。为了解决这个问题，我们将以下方法添加到模型类实现中：

```
+(NSSet *)keyPathsForValuesAffectingDependentBool
{
    return [NSSet setWithArray:@[@"date1", @"date2", @"someBool"]];
} 
```

这告诉任何观察该`dependentBool`属性的人（就像复选框在绑定到该属性时所做的那样）它依赖于这些键路径，因此也应该观察这些键路径。

这样，您只需更改`date1`例如的值，绑定到的任何视图`dependentBool`都将相应更改。

注意：要使其正常工作，您必须通过它们的设置器（`[myModelObject setDate1:date]`或）更改属性的值`myModelObject.date1 = date`，而`self.date1 = date`不是直接更改实例变量（`_date1 = date`）。

我希望你能根据你的需要调整这个例子。

# objective-c - 为什么根据 Wikipedia 将“call super”视为反模式？

> ID：13994150
> 
> 赞同：11
> 
> 时间：2012-12-21T16:55:09.873
> 
> 标签：objective-c, cocoa, design-patterns, anti-patterns

维基百科将“call super”归类为反模式，我真的不明白为什么。该模式在 Objective-C/cocoa 中经常使用；例如 init/dealloc、drawrect、awakefromnib 都需要你调用 super。我在这里误解了这个概念吗？

文章链接：[http ://en.wikipedia.org/wiki/Call_super](http://en.wikipedia.org/wiki/Call_super)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T16:57:42.770

正如它在[文章中](http://en.wikipedia.org/wiki/Call_super)所说，调用作为反模式的超级方法是**必要**的，即超级类“期望”您重写该方法以使功能完整——但它这样做并没有明确表示这种期望。它还希望您调用超级实现。两者都是程序运行所必需的。

这是一种反模式，因为无法从代码中推断出程序员的*意图。*如果您的同事决定进行这项工作，他们将不知道您希望班级做什么，因此可能会遇到问题和/或烦恼。

因此，如果您希望方法的某些部分被覆盖，但其他东西需要保留在原地，建议使用[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)，将所有不能替换的东西保留在一个（私有）方法中，然后*调用*另一个 - 完全独立 -*必须*实现它才能使程序工作（在某些语言中，它甚至不会编译）。这样，您可以确保重要的事情保持在它们必须在的位置，并且扩展该类的任何人都将确切地知道要做什么，而对其他实现细节却一无所知。

Objective-C 没有抽象或虚拟方法，但如果调用超级方法，您可以通过显式引发异常来达到相同的效果。这样，如果您的同事忘记覆盖该方法，程序将会崩溃 - 它会崩溃并显示他们可以理解的错误消息，这将使他们能够比一些不稳定的问题更快、更容易地理解和解决问题由于功能不完整，没有解释的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T17:00:57.270

问题的要点是：

> ..但是，语言本身可能无法强制执行此调用中规定的所有条件这一事实使其成为反模式。

所以作者对程序员不得不做一些他们认为语言应该为他们做的事情感到不满。

[维基百科文章Call Super](http://en.wikipedia.org/wiki/Call_super)中提到的解决方案是：

> 解决这些问题的更好方法是使用模板方法模式，其中超类包含必须由子类实现的纯抽象方法，并让原始方法调用该方法

问题是 Objective-c 没有虚函数。它只有消息，因此您无法实现维基百科的建议。

# iphone - 类似路径的表格视图，但带有地图而不是图片

> ID：13994154
> 
> 赞同：1
> 
> 时间：2012-12-21T16:55:23.893
> 
> 标签：iphone, ios, uitableview

我想实现一个以地图为标题的表格视图，并且与带有图片的路径具有相同的效果。但我想保持与地图交互的能力，比如放大/缩小、点击图钉……这可能吗？

我已经能够[在 github 上](https://github.com/Rheeseyb/RBParallaxTableViewController)使用这个项目添加地图视图，但我失去了用户交互

我想解决方案是在第一行添加一个不可见的 mapview 并将触摸事件传递给 tableview 后面的可见 mapview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:53:24.623

将地图视图设置为 UITableView 中的[tableHeaderView](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableView/tableHeaderView)应该是最好的方法。

```
MKMapView *mapView = [[MKMapView alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 200)];
[self.tableView setTableHeaderView:mapView]; 
```

# jquery - 按从数组 jquery 或 JS 或下划线传递的 ID 删除

> ID：13994156
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:55:28.247
> 
> 标签：jquery, arrays, dom

我将 ID 存储在数组中，我需要从我的页面中删除关联的 ID。我感到困惑的部分是传递变量以知道要删除的 ID 我希望我非常接近正确。

```
$.each(diff, function () {
            $('ul#jdl li').remove();
        }); 
```

“diff”是包含 ID 的数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:58:10.533

如果我正确理解您的问题，这应该对您有用：

```
$.each(diff, function (index, value) {
        $('ul#jdl li#' + value).remove();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T16:59:14.237

如果您的数组如下所示，我建议您循环遍历它。

```
var idarray = ["id1","id2","id3"];

for (var i=0;i<idarray.length;i++)
{
 $("#"+idarray[i]).remove();
} 
```

你可以在这里看到一个工作示例[http://jsfiddle.net/h6vGz/](http://jsfiddle.net/h6vGz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:58:03.357

```
$.each(diff, function (index, value) {
    $("#" + value).remove();
}); 
```

由于您使用的是 ID，因此您不需要在选择器中包含 UL 部分。`$("#something").remove()`总是足够的。

此外，您不需要在 ID 之前放置标记名，例如`ul#jdl`. 仅使用它更快更短`#jdl`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:58:24.127

试试这个...

```
for (i=0; i < diff.length; i++) {
    $("#" + diff[i]).remove();
} 
```

# sql - SQL 更新（简单？？）

> ID：13994158
> 
> 赞同：0
> 
> 时间：2012-12-21T16:55:47.450
> 
> 标签：sql, sql-server, tsql, sql-update

我有 2 张桌子

表`Customers`：

```
id,
CustomerName 
```

桌子`CustomerMapping`

```
ID
WrongName,
CorrectedName 
```

我想做的是：

> *如果 TableCustomers.CustomerName = TableCustomerMapping.WrongName，则使用 TableCustomerMapping.CorrectName 更新我的 TableCustomers.CustomerName*

我尝试了此更新语句，但在我放弃并取消查询之前花费了太长时间（6 分钟以上）。我不应该花那么长时间来更新 1000 行。

这是我正在尝试的更新语句，我错过了什么吗？

```
UPDATE i
SET i.CustomerJob = c.CorrectedName
FROM dbo.TableCustomers i
LEFT JOIN dbo.CustomerMapping c ON (i.CustomerJob = c.WrongName);
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:09:38.863

如果这两个表由*`c.CustomerName = m.WrongName`*.

另*请注意*，*`there could be more than one person with same wrong name & correct name`*. 鉴于情况 ( *`not related by IDs`*) 我认为以下 ( *`INNER JOIN or JOIN`*) 将完成这项工作；

```
--Do this select first for safety
select c.CustomerName, m.CorrectedName
from TableCustomers c join TableCustomerMapping m on c.CustomerName = m.WrongName

--Update if okay
update c
set c.CustomerName = m.CorrectedName
from TableCustomers c join TableCustomerMapping m on c.CustomerName = m.WrongName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:11:23.900

不要`LEFT JOIN`... 如果您这样做，您将更新`Customers`表中的每条记录，并将所有不匹配的记录设置为`NULL`... 相反，请执行以下操作`INNER JOIN`：

```
UPDATE c
SET c.CustomerName = cm.CorrectedName
FROM dbo.Customers c
INNER JOIN dbo.CustomerMapping cm ON (c.CustomerName = cm.WrongName); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T17:14:55.780

问题是您正在比较字符串。您的字符串列可能没有索引，因此对于表“TableCustomers”中的每一行，查询必须对“CustomerMapping”进行表扫描。您需要在 WrongName 字段的 CustomerMapping 上添加索引，以便查询优化器避免表扫描并找到所需的数据而不会影响性能。所以创建一个索引（如果您的数据集非常大，可能需要一些时间）。我不确定，但您也可以执行子查询并按 WrongName 对数据进行排序以帮助查询……但最好的选择是索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:00:19.273

也许您可以向 TableCustomerMapping 添加一个外键

```
**TableCustomerMapping**
___________________
ID,
fkCustomerID,
WrongName,
CorrectedName 
```

然后使用它将 2 个表连接在一起，您将只更新 1 条记录

```
UPDATE i
SET i.CustomerJob = c.QBName
FROM dbo.TableCustomers i
LEFT JOIN dbo.CustomerMapping c ON (i.ID= c.fkCustomerID);
GO 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T17:08:00.377

我明白你想做什么。试试这个例子：

```
UPDATE TABLEA
 SET b = TABLEB.b1,
     c = TABLEB.c1,
     d = TABLEB.d1
 FROM TABLEA, TABLEB
 WHERE TABLEA.a = TABLEB.a1
 AND TABLEB.e1 > 40
 GO 
```

我希望你工作

# mysql - phpmyadmin|如何创建事件做2个动作

> ID：13994159
> 
> 赞同：1
> 
> 时间：2012-12-21T16:55:48.997
> 
> 标签：mysql, phpmyadmin

我想创建一个可以执行两个操作的事件，但我不知道如何操作。这是查询：

```
CREATE EVENT rate ON SCHEDULE EVERY 24 HOUR STARTS '2011-12-01 20:00:00' DO SET @p=1
UPDATE users SET rate = (@p:=@p+1) ORDER BY power DESC 
```

我也尝试在操作之间写 AND，但它仍然写错误。

错误是：

```
\#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UPDATE users SET rate = (@p:=@p+1) ORDER BY power DESC' at line 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:09:11.223

您可以将事件的主体包装在[`BEGIN ... END`](http://dev.mysql.com/doc/en/begin-end.html)复合语句块中：

```
CREATE EVENT rate ON SCHEDULE EVERY 24 HOUR STARTS '2011-12-01 20:00:00' DO BEGIN
  SET @p=1;
  UPDATE users SET rate = (@p:=@p+1) ORDER BY power DESC;
END 
```

请注意，每条语句都必须以分号结尾，因此您必须将客户端配置为使用不同的语句分隔符，以便它不会认为第一个遇到的分号是`CREATE EVENT`命令的结尾（如何做到这一点取决于您的客户端, 但在[MySQL 命令行工具](http://dev.mysql.com/doc/en/mysql.html)中，可以使用`DELIMITER` [命令](http://dev.mysql.com/doc/en/mysql-commands.html)，在 phpMyAdmin 中可以设置 SQL 输入框下方的分隔符）。

或者，在这种情况下，您可以使用多表`UPDATE`语法来执行变量初始化，这样您只需要一个简单的语句：

```
CREATE EVENT rate ON SCHEDULE EVERY 24 HOUR STARTS '2011-12-01 20:00:00' DO
  UPDATE   users, (SELECT @p:=0) init
  SET      users.rate = (@p:=@p+1)
  ORDER BY users.power DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:57:22.807

`;`您的陈述后缺少分号。

尝试这个：

```
CREATE EVENT rate ON SCHEDULE EVERY 24 HOUR STARTS '2011-12-01 20:00:00' 
      DO SET @p=1;
UPDATE users SET rate = (@p:=@p+1) ORDER BY power DESC; 
```

# python - 将 Perl 中的套接字使用转换为 Python

> ID：13994163
> 
> 赞同：0
> 
> 时间：2012-12-21T16:56:13.583
> 
> 标签：python, perl, sockets

我有以下子程序：

```
use Socket
...
sub proxy_connect {
   my $iaddr = Socket::inet_aton($proxy);
   my $paddr = Socket::sockaddr_in(81, $iaddr);
   my $proto = getprotobyname('tcp');
   my $fh    = new FileHandle;

   socket($fh, PF_INET, SOCK_STREAM, $proto) or return;

   connect($fh, $paddr) or return;
   $fh->autoflush(1);
   # return a pointer to file handle
   return \$fh;
}
my $mysock = proxy_connect(); 
```

Python 的方法完全不同，我没有返回一个 File 对象，而是返回一个套接字，但我不确定功能是否完全相同：

```
 import socket
  ...
  def proxy_connect():
     """
     Connect to the proxy and return a filehandle for it.
     """
     proxy = "proxy.mydomain.com"
     address = socket.gethostbyname(proxy)
     con = socket.socket(
     socket.AF_INET, socket.SOCK_STREAM)
     con.connect((address, 81))
     return con 
```

我在翻译这个[tunnel-ssh-over-http](http://chris.chiappa.net/ssh-https-tunnel)的正确道路上吗？注意，我是 Perl 的新手，这只是作为一个练习来学习更多关于 Perl 和套接字（在 Python 中）的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:41:18.283

是的，您可以直接进行转换。select() 在 Python 中的行为相同，允许您测试套接字上的数据准备读取。在 Perl 中，他们使用 vec()，但在 Python 中，您测试您的套接字是否在 select() 的返回值中。在他们 sysread/syswrite 的 Perl 中，您将改为使用 socket.recv() socket.send()

do_copy 例程几乎是一个直接的转换，除了 socket.send() 不使用偏移量/长度，因此如果 socket.send() 没有指示整个缓冲区已发送，您将需要自己对缓冲区进行切片。

SELECT 循环的工作方式与 perl 代码中的相同。您将传入要测试可读性的套接字，并执行以下操作：

```
readable, writeable, exceptional = 
      select.select([socket1, socket2], 
                    None, [socket1, socket2])
if socket1 in readable:
   do_copy(socket1, socket2)
if socket2 in readable:
   do_copy(socket2, socket1) 
```

# web-services - SOAPUI 证书认证

> ID：13994164
> 
> 赞同：17
> 
> 时间：2012-12-21T16:56:16.020
> 
> 标签：web-services, authentication, encryption, certificate, soapui

我正在尝试访问远程 Web 服务并检查该服务是否正常工作。要使用我正在使用 SOAPUI 客户端的服务。第一次尝试时，我得到了 403/Forbidden 响应。开发远程服务的团队为我提供了用于提出请求的数字证书。我应该如何使用此证书提出请求。对于在 Web 服务身份验证和肥皂 ui 中使用数字证书的概念，我是一个相当新的概念。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-22T08:16:34.790

您需要为客户端证书身份验证配置soapui。

有很多方法可以做到这一点。

1.  您可以在项目的连接详细信息下添加身份验证选项。
2.  您可以在 ws-auth 选项卡下为请求配置证书

看看下面的链接。它提供了一些基本的设置步骤来协助soapui ~~[SoapUI 配置客户端证书身份验证（soapui 3.6）](http://geekswithblogs.net/gvdmaaden/archive/2011/02/24/how-to-configure-soapui-with-client-certificate-authentication.aspx)~~ [SoapUI 发送请求](https://www.soapui.org/docs/functional-testing/sending-https-requests/)

# websphere - 逗号分隔的 portlet 首选项

> ID：13994167
> 
> 赞同：0
> 
> 时间：2012-12-21T16:56:26.790
> 
> 标签：websphere, portlet, websphere-7

我通过复制 portlet 将相同的 portlet 用于不同的目的。我已将首选项以逗号分隔，例如`xxxx,yyyy`数据点首选项。根据[portletAPI](http://www.bluesunrise.com/portlet-api/javax/portlet/PortletPreferences.html) `getValue()`返回第一个关联值。我只有`xxxx`在检索它时才能获得价值。我想知道如何获得`yyyy`价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:25:10.413

您引用的 portlet API 链接也有一个`getValues()`方法。逗号分隔的首选项应在数组中从`getValues()`.

# r - 如何在 R 中绘制平滑线或 95% 的逐点间隔？

> ID：13994168
> 
> 赞同：0
> 
> 时间：2012-12-21T16:56:27.563
> 
> 标签：r

我有以下图像： ![阴谋](../Images/adcb6e3987b551b13c33d6e1fba158bd.png)

我想平滑红线和蓝线。但我不知道该怎么做。红线和蓝线分别代表黑点的上下 95% 区间。（请注意，我没有使用任何回归公式来获得 95% 的区间）我阅读了有关 loess 函数的信息，但是当我尝试使用它时。我回到同样的情节。那么是否有任何特定的内置 R 函数可以让我平滑这两条线。

或者，有没有办法为这个问题获得**“95% 的点间隔”**？

代码如下：

```
residual.plot <- function(a,b)
{
    log.y1 <- log(a) - b * log(energy)
    fitted.y <- exp(log.y1)
    diff <- count - fitted.y
    #normal approximation
    low.interval <- c()
    high.interval <- c()
    for(i in 1:350)
    {
        low <- diff[i] - sqrt(  exp(log(a) - b * log(energy[i])) )*qnorm(0.975)
        high <- diff[i] + sqrt(  exp(log(a) - b * log(energy[i]))  )*qnorm(0.975)
        low.interval <- append(low.interval, low)
        high.interval <- append(high.interval, high)
    }
    par(mfrow = c(1,1))
    plot(energy, diff, ylim = c(-10,10), type = "p", pch = 7)
    lines(energy, low.interval, type = "p", col = "red", pch = 1)
    lines(energy, high.interval, type = "p", col = "blue", pch = 1)

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T17:26:14.663

首先，再也不敢发布这样的代码了。你犯了两个大罪：

*   你在一个迭代循环中增长对象（那里有很多问题）
*   您没有使用 R 工作矢量化的事实。

也就是说，最简单的方法是使用`lowess`，前提是您的数据中没有 NA 值。你的功能应该是这样的：

```
residual.plot <- function(a,b,count,energy)
{
    log.y1 <- log(a) - b * log(energy)
    fitted.y <- exp(log.y1)
    diff <- count - fitted.y

    #normal approximation
        low <- diff - sqrt(  exp(log(a) - b * log(energy)) )*qnorm(0.975)
        high <- diff + sqrt(  exp(log(a) - b * log(energy))  )*qnorm(0.975)

    par(mfrow = c(1,1))
    plot(energy, diff, ylim = c(-10,10), type = "p", pch = 7)
    lines(lowess(energy, low), type = "p", col = "red", pch = 1)
    lines(lowess(energy, high), type = "p", col = "blue", pch = 1)

} 
```

PS：要使函数有用，您不应依赖函数外部的变量，例如`count`和`energy`。将它们作为参数添加到函数中，以便稍后在使用不同的数据集时使用该函数。

# javascript - 函数调用自身时 Javascript 变量发生变化

> ID：13994172
> 
> 赞同：0
> 
> 时间：2012-12-21T16:56:39.430
> 
> 标签：javascript, recursion

我正在创建一个网页，它将找到一个数字的素数分解。我使用的函数从循环中调用自身。在我自己执行函数后，循环的索引从第二次调用时到达的索引更改。它应该返回数组中的所有素数。这是代码。

```
function pf(num){
    max=Math.floor(Math.sqrt(number));
    factors=[];
    prime=true;
    for(count=2;count<=max;count++){
        ratio=num/count;
        if(ratio%1==0){
            alert(count);//HERE
            factors=pf(ratio);
            alert(count);//HERE
            factors.push(count);
            prime=false;
            break;
        }
    }
    if(prime){
        factors.push(num);
    }
    return factors;
} 
```

假设这段代码以输入 20 运行。第一个警报将显示数字 2，但下一个警报将显示 3。有没有办法使循环的当前索引不因函数的第二次调用而改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:58:34.603

`var`除非您特别希望它们是全局的，否则 您确实应该使用所有变量。`var`使变量成为执行上下文的局部变量，在本例中为函数`pf`. `window`没有它，你所有的变量都是全局的，如果你在浏览器中运行它，可能在上下文中。

我怀疑您的问题发生是因为`max`和/或是`count`全球性的。

做

`var max = Math.floor(Math.sqrt(number));`

和

`for(var count=2;count<=max;count++){`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:02:24.163

函数中的变量都是所谓的全局变量。这意味着它们可以（并且将会）从脚本中的任何地方进行更改。在您的函数完成后，它们也会保留它们的值。所以它们在每个函数调用上都有不同的初始值。

要将变量保留在函数中，您必须将它们定义为本地变量。这可以`var`在第一次定义变量时使用关键字来完成。

写吧

```
function pf ( num ) {
    var max = ...
    var factors = ... 
```

等等。

这是更好和更清洁的方法，可以帮助您避免此类错误。

# git - Netbeans 7.2 Git 克隆 ssh

> ID：13994174
> 
> 赞同：2
> 
> 时间：2012-12-21T16:56:48.400
> 
> 标签：git, netbeans, ssh, netbeans-7, netbeans-plugins

我在 Windows 7 上运行 Netbeans 7.2 并且无法克隆存储库。我以前在 Windows XP 上使用 Netbeans 7.1 并且没有任何问题。

我一直使用的过程是打开 Pageant 并加载我的密钥。然后在 Netbeans`Team > Git > Clone`中，我像这样在我的 repo 中输入一个 then 类型：

```
ssh://server.name/var/git/blah.git 
```

一切都会奏效。

我无法在 Windows 7 中使用 Netbeans 执行此操作。我收到以下错误：

```
ssh://gituser@server.name/var/git/blah.git: session is down 
```

在 Pageant 运行时，我可以很好地使用 putty 和 ssh，而无需使用密码。我还安装了 Git Gui / Bash 并且能够克隆。我只是不能在 Netbeans 中做到这一点。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T20:57:45.917

首先，您需要注册密钥。读[这个](https://netbeans.org/kb/docs/ide/git.html#github)。

# android - 有没有办法跟踪语音识别中特定单词说了多少次？

> ID：13994177
> 
> 赞同：-1
> 
> 时间：2012-12-21T16:57:06.940
> 
> 标签：android, speech-recognition

我一直在阅读 Android 文档和 Google 在语音识别上的搜索，以寻找可以跟踪特定单词被说了多少次或实例的内容。我知道它会返回一个可能匹配的数组列表，以及它对匹配的信心。我想知道的是有没有办法拉出它相信“猫”（例如）在“录音”期间被说了多少次？IE 它认为“cat”被说了 3 次，因此它返回 3 个“cat”实例，并且每个实例都会对其做出反应。有点像说Beetlejuice 3次，他出现了。有没有直接的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:17:36.797

假设您将数据作为 ArrayList 返回

```
ArrayList<String> s = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
        String[] split = s.get(0).split(" ");
        int count = 0;
        for (String t : split) {
            if (t.contains(split[0])) {
                count++;
            }
        }
        //count now equals number of repeats of a word within a phrase 
```

# c++ - CUDA。如何展开前 32 个线程以便并行执行？

> ID：13994178
> 
> 赞同：7
> 
> 时间：2012-12-21T16:57:12.120
> 
> 标签：c++, cuda, gpu

我知道“每个经线都包含连续的、递增的线程 ID，第一个经线包含线程 0”，因此前 32 个线程应该在第一个经线中。另外我知道一个warp中的所有线程都在任何可用的流式多处理器上同时执行。

据我了解，因此，如果只执行一个扭曲，则不需要线程同步。但是，如果我删除`__syncthreads()`倒数第二个`if`块中的任何一个，下面的代码会产生错误的答案。我试图寻找原因，但最终一无所获。我真的希望你的帮助，所以你能告诉我这段代码有什么问题吗？为什么我不能只离开最后`__syncthreads()`得到正确答案？

```
#define BLOCK_SIZE 128

__global__ void reduce ( int * inData, int * outData )
{
 __shared__ int data [BLOCK_SIZE]; 
 int tid = threadIdx.x; 
 int i   = blockIdx.x * blockDim.x + threadIdx.x; 

 data [tid] = inData [i] + inData [i + blockDim.x / 2 ];
 __syncthreads ();

 for ( int s = blockDim.x / 4; s > 32; s >>= 1 ) 
 {
  if ( tid < s ) 
   data [tid] += data [tid + s]; 
  __syncthreads (); 
 } 

 if ( tid < 32 )
 { 
  data [tid] += data [tid + 32];
  __syncthreads (); 
  data [tid] += data [tid + 16];
  __syncthreads (); 
  data [tid] += data [tid + 8];
  __syncthreads (); 
  data [tid] += data [tid + 4];
  __syncthreads (); 
  data [tid] += data [tid + 2];
  __syncthreads (); 
  data [tid] += data [tid + 1];
  __syncthreads (); 
 }
 if ( tid == 0 )
  outData [blockIdx.x] = data [0];
}

void main()
{
...
 reduce<<<dim3(128), dim3(128)>>>(dev_data, dev_res);
...
} 
```

PS我用的是GT560Ti

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T17:07:00.537

您应该将共享内存变量声明为 volatile：

```
__shared__ volatile int data [BLOCK_SIZE]; 
```

您看到的问题是 Fermi 架构和编译器优化的产物。Fermi 架构缺乏直接操作共享内存的指令（它们存在于 G80/90/GT200 系列中）。因此，所有内容都被加载以注册、操作并存储回共享内存。但是编译器可以自由地推断，如果在寄存器中进行一系列操作，而不需要从共享内存进行中间加载和存储，那么代码可以变得更快。这非常好，*除非*您依赖于同一扭曲中的线程的隐式同步来操作共享内存，就像在这种缩减代码中一样。

通过将共享内存缓冲区声明为易失性，您将强制编译器在缩减的每个阶段之后强制执行共享内存写入，并恢复 warp 中线程之间的隐式数据同步。

这个问题在 CUDA 工具包随附（或可能随附）的 Fermi 编程说明中进行了讨论。

# xml - 服务器名称或地址无法解析，为什么？

> ID：13994184
> 
> 赞同：8
> 
> 时间：2012-12-21T16:57:47.830
> 
> 标签：xml, asp-classic, msxml

我在我的 (www.test1.com) 的 asp 页面中使用以下代码

```
url= "http://www.test1.com/test.asp"
    dim http, pxml, http_response
    set http = server.CreateObject("MSXML2.ServerXMLHTTP.3.0")
    http.open "GET", url, 0
    http.setrequestheader "content-type", "text/xml; charset=utf-8"
    http.send "" 
```

但我的页面出现错误，如下所示

```
msxml3.dll error '80072ee7'

The server name or address could not be resolved 
```

但我将请求发送到**同一台服务器（http://www.test1.com）**只是问题所在。但我向任何**其他服务器（如（http://www.test2.com））**发送请求工作正常

为什么同一台服务器出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T01:41:20.947

可能是您的 Web 服务器的 DNS 没有列出自己的名称（确实，它确实发生了！），因此请尝试使用“localhost”或“127.0.0.1”。

如果您在此服务器上安装/启用了 PHP，这里有一个快速的方法来检查它可以解析哪些服务器名称：

```
<?php

function test() {
    $hostname = isset($_POST['hostname']) ? trim($_POST['hostname']) : false;

    if ($hostname) {
        echo "<h2>Hostname: ", htmlspecialchars($hostname), "</h2>\n";

        if ($addrs = gethostbynamel($hostname)) {
            echo "<div>\n";
            var_dump($addrs);
            echo "</div>\n";
        }
        else {
            echo "<p>No records found.</p>\n";
        }
    }
}

?>
<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>Test DNS record retrieval</title>
</head>

<body>
<h1>Test DNS record retrieval</h1>
<?php test(); ?>

<form action="<?php echo $_SERVER['SCRIPT_NAME']; ?>" method="post">
    <table>
        <tr>
            <th>host name:</th>
            <td><input type="text" tabindex="10" name="hostname" size="40" ></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" tabindex="99"></td>
        </tr>
    </table>
</form>

</body>
</html> 
```

# mvvm - 使用 MVVM 绑定在 kendo ui 网格中将特定列设置为可编辑

> ID：13994185
> 
> 赞同：3
> 
> 时间：2012-12-21T16:57:48.923
> 
> 标签：mvvm, kendo-ui

我正在使用剑道 ui 网络网格。我试图弄清楚如何使一列可编辑而另一列不可编辑。Teleriks 文档似乎只涵盖了您声明自己的 dataSource 对象时的情况。但我使用的是 MVVM 声明式绑定。所以我没有明确地创建一个数据源。对于这种情况，我只能找到将整个网格设置为可编辑的文档（通过将 kendoGrid 初始化的配置设置为`editable:true`），而不是如何选择性地将特定列设置为可编辑/不可编辑。

有谁可以帮我离开这里吗？

（Telerik 应该真正查看他们的文档，似乎所有的 api 文档和操作指南都集中在与数据源对象的不太优雅的编程绑定上，这使得人们对如何使用 MVVM 绑定完成同样的事情一无所知）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T22:38:47.960

您可以尝试创建[模板](http://docs.kendoui.com/api/web/grid#columnstemplate-string)列（您没有指定字段只是模板的列），也可以将 dataSource 配置中的[可编辑选项设置为 false。](http://docs.kendoui.com/api/framework/datasource#schemamodel-objectkendodatamodel)

```
var dataSource = new kendo.data.DataSource({
    schema: {
        model: {
            id: "ProductID",
            fields: {
                 ProductID: {
                    //this field will not be editable (default value is true)
                    editable: false
                 }
           }
       }
   } 
```

});

# opengl - 每个三角形的顶点缓冲区对象 + 纹理

> ID：13994188
> 
> 赞同：1
> 
> 时间：2012-12-21T16:58:02.420
> 
> 标签：opengl, glsl, textures, vbo

> **可能重复：**
> [VBO - 没有索引的索引](https://stackoverflow.com/questions/13981217/vbo-indexation-without-indexation)

这是我的问题，我想渲染一个巨大的模型（一百万张脸），我有一个脸的索引缓冲区。

我已经为这个模型自己生成了一个纹理，纹理的每个区域都必须应用于每个三角形。我无法正确展开模型，因为它会花费太多时间，所以一个顶点可以有多个纹理坐标。

没有 VBO 我的渲染器是这样的：

```
glBegin(GL_TRIANGLES);
for (unsigned int i = 0; i < g_pModel->GetNbTriangle(); i++) 
{
    glTexCoord2f(TextCoord[6*i+0],TextCoord[6*i+1]);
    glNormal3f(Normal[3*Triangle[i].x],Normal[3*Triangle[i].x+1],Normal[3*Triangle[i].x+2]);
    glVertex3f(Vertex[Triangle[i].x].x,Vertex[Triangle[i].x].y,Vertex[Triangle[i].x].z);

    glTexCoord2f(TextCoord[6*i+2],TextCoord[6*i+3]);
    glNormal3f(Normal[3*Triangle[i].y],Normal[3*Triangle[i].y+1],Normal[3*Triangle[i].y+2]);
    glVertex3f(Vertex[Triangle[i].y].x,Vertex[Triangle[i].y].y,Vertex[Triangle[i].y].z);

    glTexCoord2f(TextCoord[6*i+4],TextCoord[6*i+5]);
    glNormal3f(Normal[3*Triangle[i].z],Normal[3*Triangle[i].z+1],Normal[3*Triangle[i].z+2]);
    glVertex3f(Vertex[Triangle[i].z].x,Vertex[Triangle[i].z].y,Vertex[Triangle[i].z].z);
}
glEnd(); 
```

使用我的 VBO，我不能使用 glTexCoordPointer，因为它需要与顶点一样多的纹理坐标，这不是我的情况。

有没有办法用 VBO 和我的着色器（我正在使用 GLSL）来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:15:00.243

我已经告诉过您，您必须将共享位置的多个纹理坐标三角形角分解为多个顶点。一个顶点在给定纹理上总是只有一个纹理坐标。如果纹理坐标存在差异，但在同一位置，则您有不同的顶点。

# vb.net - 如何添加需要 Handles 子句的 WithEvents 变量的定义

> ID：13994199
> 
> 赞同：6
> 
> 时间：2012-12-21T16:58:40.897
> 
> 标签：vb.net, events

为了使我的程序在具体案例中更加优雅和更好地组织，我想在我的班级`DataGridView1variable`顶部使用引用变量进行更改`Form1`

```
Private aDgv As DataGridView 
```

并赋值`Form1_Load`

```
aDgv = DataGridView1 
```

之后，我可以在其中使用`aDgv`变量`Form`。
除非在这种情况下：

```
Private Sub aDgv_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles aDgv.KeyDown
aDgv.SelectionMode = DataGridViewSelectionMode.FullRowSelect
'etc...
End Sub 
```

我收到错误的地方：

> Handles 子句需要`WithEvents`在包含类型或其基类型之一中定义的变量。子句后的变量带有蓝色下划线`aDgv`。`Handles`

怎样做才能摆脱错误并开始`Handles aDgv.SomeEvent`工作？
当然，使用引用`aDgv`而不是原始控件名称`DataGridView1`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T17:09:27.523

最小的答案是添加`WithEvents`到`aDgv`：

```
Private WithEvents aDgv As DataGridView 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-27T16:02:15.677

马克赫德的回答也对我有用。但是对于像我这样的初学者来说，这里有一个详细的方法。

*   突出显示代码中带有蓝色下划线的变量
*   按`F12`
*   它会带你到`designer.vb`
*   然后您将立即看到之前突出显示的变量
*   现在只需在`WithEvents`单词后面加上`Friend`单词
*   完毕

# c# - 如何获取 WCF 4.0 Restful 响应带宽消耗？

> ID：13994202
> 
> 赞同：3
> 
> 时间：2012-12-21T16:58:51.507
> 
> 标签：c#, wcf, azure, bandwidth

我有一个托管在 Windows Azure 云服务上的 WCF 4.0 restful 应用程序，我需要知道传出 HTTP 消息的大小，然后再将其发送回客户端。

我需要它，因为我想按带宽消耗向我的服务客户收费。

我有两种方法，如下所示，并且都具有标识客户端的令牌参数。因此，当客户端调用任何方法时，我需要发现响应的大小并注册该客户端和方法的带宽消耗。

这样我就可以为每个客户发送发票。

请注意，响应可能以 XML/JSON 形式返回并由 Gzip 压缩。

有人可以帮帮我吗？

```
[ServiceContract]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Single, Namespace = "")]
public class ZipCodeService
{
    [WebGet(UriTemplate = "/GetAddressByZipCode?token={token}&zipcode={zipcode}")]
    public GetAddressByZipCodeContract GetAddressByZipCode(string zipCode, string token)
    {
        // ...
    }

    [WebGet(UriTemplate = "/GetZipCodeByAddress?token={token}&keywords={keywords}")]
    public GetZipCodeByAddressContract GetZipCodeByAddress(string keywords, string token)
    {
        // ...
    }
} 
```

当我尝试获取http响应，但它被Gzip压缩时，内容长度标头返回null，否则正常返回。即使响应被压缩，我如何获得内容长度？无论如何，内容长度并不表示传出消息的总大小，那么我怎样才能得到传出消息的总大小？

```
public class Global : HttpApplication
{
    protected void Application_EndRequest(object sender, EventArgs e)
    {
        var response = this.Response;

        var str = response.Headers["Content-Length"];
    }
} 
```

任何帮助将不胜感激。

问候，

费尔南多·莫拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:33:39.323

试试看这个：
[How To Intercept a WCF Messages to Track Message Size](http://devlicio.us/blogs/derik_whittaker/archive/2011/02/03/how-to-intercept-a-wcf-message-to-track-message-size.aspx)
或
[WCF Custom Message Encoder & Operation Message Size](http://blogs.microsoft.co.il/blogs/zuker/archive/2012/12/20/wcf-custom-message-encoder-and-operation-message-size.aspx)

# php - LMI Rescue API 和 PHP/SOAP 的问题

> ID：13994206
> 
> 赞同：0
> 
> 时间：2012-12-21T16:59:06.623
> 
> 标签：php, arrays, soap

我正在尝试使用 LogMeIn 的 Rescue API 构建一个快速工具。基本上，我想要的是能够快速启用和禁用技术人员（即使是通过移动设备），而无需登录他们繁琐的管理面板。

我已经弄清楚如何获取 SOAP 查询所需的秘密密码，但是当数据返回时我在处理数据时遇到了一些麻烦。我的迷你应用程序的第一步是确定用户的当前状态，所以我有一个肮脏的快速测试，它为 2 个用户（或他们调用的节点）运行 SOAP 客户端请求到他们的 API URL。我遇到的问题是数据返回时的格式。

这是 SOAP 请求的代码：

```
$authCode = $_SESSION['authCode'];
$user1_status = "";
$user2_status = "";
$soapclient = new SoapClient("https://secure.logmeinrescue.com/api/api.asmx?wsdl");
$iNodeID = $user1; //The value of user1 is defined previous to this bit of code 

$getuserparams = array (
'iNodeID' => $iNodeID,
'sAuthCode' => $authCode
);

$getUserResult = $soapclient->getUser($getuserparams);

.
.
.
//SOAP request for the other user, same stuff 
```

现在，如果我`var_export($getUserResult);`在 SOAP 客户端收到数据后添加，我会得到如下信息：

> stdClass::__set_state(array('getUserResult' => 'getUser_OK', 'oUser' => stdClass::__set_state(array('iNodeID' => 11028674, 'sName' => '技术名称', 'sNick' => '技术名称', 'sEmail' => 'tech.name@email.co.uk', 'sSSOID' => 'tech.name@email.co.uk', 'sDescription' => '', 'eType' => 'Technician', 'bAccountHolder' => false, 'hasMobileAddon' => false, 'eStatus' => 'Offline', )), ))

实际上，我只对技术员的姓名和他的状态感兴趣，以建立一个包含每个人状态的快速表或列表。由于 var_export 数据，我怀疑从 SOAP 客户端返回的东西是一个数组（我只能假设），所以如果我尝试访问它，请执行以下操作：

```
$status = var_export($getUserResult["eStatus"], true);
echo $status; 
```

我得到以下信息：

> 致命错误：不能在第 53 行的 C:\wamp\www\rescue\admin.php 中使用 stdClass 类型的对象作为数组

我四处搜索，发现一堆帖子在这里谈论同样的事情，但我找不到任何关于纯 PHP 的内容，大部分内容都是关于 CMS 的，比如 WordPress。

您能否阐明我应该如何读取这些数据或“将其”放入数组中以正确需要它？

目前，我正在使用一个非常非常丑陋的解决方案，通过硬编码表格中的名称并通过使用 substr 和 str_replace 剪切文本来获取字符串的状态。

将来，我想为这个东西添加其他功能，比如报告，如果我不知道如何正确读取这些数据，恐怕这一切都会被抛在脑后。

非常感谢您可以给我的任何帮助，我对此感到很疯狂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:08:15.987

它返回的是一个对象而不是一个数组，因此您应该尝试使用对象表示法来访问属性：

```
echo $getUserResult->oUser->sName; 
```

`var_dump`如果您使用而不是`var_export`显示重新创建对象所需的代码，而不是直接分解对象本身，这可能会更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:09:04.493

你所拥有的`$getUserResult`是一个`stdClass`对象。这`__set_state()`告诉您的是对象当前设置的属性是什么。在这种情况下，您感兴趣的信息实际上驻留在属性中`stdClass`设置的另一个对象中`oUser`。

为了访问您需要执行的值：

```
$name = $getUserResult->oUser->sName;

$status = $getUserResult->oUser->eStatus;

etc. 
```

# php - 列出目录目录中的文件

> ID：13994209
> 
> 赞同：5
> 
> 时间：2012-12-21T16:59:15.707
> 
> 标签：php

为了循环目录中的所有文件，我在 php 中创建了以下代码：

```
$dir = new DirectoryIterator(dirname(__FILE__));
$files = scandir($dir.'/');
foreach($files as $file) 
{
    echo $file;
    echo "\n";
} 
```

但是我无法列出目录的多个子目录中的所有文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T17:03:27.470

利用`RecursiveDirectoryIterator`

```
<?php

$path = realpath('/etc');

$objects = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path), RecursiveIteratorIterator::SELF_FIRST);
foreach($objects as $name => $object){
    echo "$name\n";
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T17:38:09.517

就这么简单：

```
$dir = dir('DIRECTORY_TO_DISPLAY_HERE');
while (($file = $dir->read()) !== false) {
    if ($file != '..' && $file != '.') {
        echo $file;
    }
}
$dir->close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:06:53.977

试试这个。 [在 php 手册中看到这个](http://php.net/manual/en/class.recursivedirectoryiterator.php)

```
function loop_dir($dir) {
    $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir),
                                              RecursiveIteratorIterator::CHILD_FIRST);
    foreach ($iterator as $path) {
      echo $path
    }
} 
```

# php - Symfony2 在哪里存储简单的 3rd 方类？

> ID：13994212
> 
> 赞同：6
> 
> 时间：2012-12-21T16:59:25.033
> 
> 标签：php, symfony

我是 Symfony2 的新手，我遇到了一些简单的问题，但我不确定如何处理它。我需要使用一个简单的 3rd 方类，但我不确定在项目结构中的何处以及如何存储它。我应该将服务存储在我的 Bundle 中，还是应该将其存储在供应商目录中？如果我将它存储在供应商中，那么将不支持 Symfony 的供应商的库存储在那里不是一个坏习惯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:30:27.810

[通常，您使用Composer](http://getcomposer.com/)将它们包含在您的项目中。我建议你看一下[packagist](http://packagist.org/)，看看你的班级是否有Composer包，否则你不能用composer要求它。

Composer 将您的类放在`vendor`目录中，您应该将所有“供应商”（第 3 方库）放在那里。查看将它们放在该目录中的位置，以便 Composer 自动加载器可以自动加载它。

之后，建议为该特定类创建一个捆绑包。在那里创建服务是最佳实践。例如，如果您的班级是`Foo`您创建一个`Acme\FooBundle`加载`Foo`服务的班级：

```
// src/Acme/FooBundle/DependencyInjection/AcmeFooExtension.php
<?php

namespace Acme\FooBundle\DependencyInjection;

use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Loader\XmlFileLoader;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;

class AcmeFooExtension extends Extension
{
    /**
     * this method loads the Service Container services.
     */
    public function load(array $configs, ContainerBuilder $container)
    {
         $loader = new XmlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));

         // load the src/Acme/FooBundle/Resources/config/services.xml file
         $loader->load('services.xml');
    } 
```

```
<!-- src/Acme/FooBundle/Resources/config/services.xml -->
<?xml version="1.0" encoding="UTF-8" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <!-- Loads the \Foo class as a acme_foo.foo service -->
        <service id="acme_foo.foo"
            class="\Foo"
        ></service>
    </services>

</container> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:11:15.790

Symfony 本身将第 3 方库存储在 vendor 文件夹中。将您的第 3 方课程也放在那里是一个[好习惯](http://symfony.com/doc/current/quick_tour/the_architecture.html#using-vendors)

如果你不知道怎么做，[这个问题](https://stackoverflow.com/questions/10007010/best-approach-to-include-3rd-party-files-with-symfony2)可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:18:33.773

我相信使用服务容器将是一个好习惯。无论如何，服务容器是为存储第三方依赖和节省松散耦合而组成的。

查看[文档](http://symfony.com/doc/current/book/service_container.html)，其中写了如何以及为什么应该使用服务容器。

祝你好运。

# c++ - 访问冲突读取位置 0xcdcdcdd5

> ID：13994213
> 
> 赞同：1
> 
> 时间：2012-12-21T16:59:42.483
> 
> 标签：c++, visual-studio-2010, pointers

请看下面的代码。

**游戏组件.h**

```
#pragma once
#include<time.h>
#include "Position.h"

class GameComponent
{
public:
    GameComponent(int);
    GameComponent();
    ~GameComponent(void);

    virtual void update(const tm*);

    void addPosition(Position *p);

    friend class Position;

private:
    int id;
    Position *position;
}; 
```

**游戏组件.cpp**

```
#include "GameComponent.h"
#include <iostream>
#include <time.h>
#include "DrawableGameComponent.h"
#include "Position.h"

using namespace std;

GameComponent::GameComponent(int v):id(v)
{

}

GameComponent::GameComponent(){}

GameComponent::~GameComponent(void)
{

}

void GameComponent::update(const tm* time)
{
    cout << "ID : " << id << endl;
    cout << "Update: " << time->tm_hour << ":" << time->tm_min << ":" << time->tm_sec << endl;
    position->display();

    //Position::displayPositions();
}

void GameComponent::addPosition(Position *p)
{
    position = p;
    p->display();
    cout << "position working" << endl;
} 
```

**位置.h**

```
#pragma once
class Position
{
    friend class GameComponent;
public:
    Position(int x, int y, int z);
    Position();
    ~Position();
    void display();

private:
    int x;
    int y;
    int z;
}; 
```

**位置.cpp**

```
#include "Position.h"
#include <iostream>

using namespace std;

Position::Position(int x, int y, int z)
{
    this->x = x;
    this->y = y;
    this->z = z;
}

Position::Position(){}

Position::~Position(void)
{
}

void Position::display()
{
    //cout << "Display Working" << endl;
    cout <<"Position " << " X: " << x << " Y: " << y << " Z: " << z << endl; 
} 
```

首先，这不是完整的代码，这是发生错误的代码的一部分。当我运行我的代码时，我得到了错误

```
Unhandled exception at 0x00302d90 in GameEngine.exe: 0xC0000005: Access violation reading location 0xcdcdcdd5. 
```

它指向方法的输出区域（cout << "X" << ........）`display()`（`position`Visual Studio 显示一个黄色数组指向那个地方）。

我用谷歌搜索了这个问题，发现这是因为空指针而发生的，它指向的地方没有。`GameComponent`的方法内部有一个指针分配（将指针参数分配给另一个指针）`addPosition()`。

我相信错误来自那里。请帮我摆脱这个错误

**更新**

以下是我无法 addPosition() 的位置

**测试.cpp**

游戏组件**组件；

```
void Test::add(GameComponent *gameComponent, Position *p)
{

        component[componentCount] = gameComponent;
        component[componentCount]->addPosition(p);
        componentCount++;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T17:03:20.727

`0xCDCDCDCD`是 MSVC 在分配的内存周围放置的一个特殊值，用于在访问无效内存时提醒您（和调试运行时）。

由于您的地址高 0x08，我怀疑您正在添加到指针或数组并试图取消引用它。这可能是一个错误，试图抓取超出数组末尾的项目，或者它可能是释放后正在使用的对象。

> 我用谷歌搜索了这个问题，发现这是因为空指针而发生的，它指向的地方没有。GameComponent 的 addPosition() 方法内部有一个指针分配（将指针参数分配给另一个指针）。

检查以确保该指针有效并且不是`0xCDCDCDCD`或指向填充了该（或其他保护）值的内存。如果编译器正在填充`Position`或插入 vtable 引用，则 segfault 中给出的地址与`X`取消引用时的位置匹配`0xCDCDCDCD`。

# jsp - Struts 1 - Tiles 放置布尔属性

> ID：13994215
> 
> 赞同：1
> 
> 时间：2012-12-21T17:00:08.407
> 
> 标签：jsp, struts, tiles

是否可以将原始类型（如布尔值）作为属性？

```
pageContext.setAttribute("boolValue", boolValue); 
```

进而

```
<tiles:put name="boolValue" beanName="boolValue" type="boolean" /> 
```

在我使用的另一个 Jsp 中：

```
<tiles:useAttribute name="boolValue" id="boolValue" classname="boolean" /> 
```

我收到此错误：

```
PWC6199: Generated servlet error:
string:///BaseBudgetLayout_jsp.java:124: incompatible types
found   : <nulltype>
required: boolean
PWC6199: Generated servlet error:
string:///BaseBudgetLayout_jsp.java:125: inconvertible types
found   : java.lang.Object
required: boolean 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:20:04.743

属性映射不能将基元作为值保存。鉴于它需要`java.lang.Object`，Java 5 自动装箱会默默地将原`boolean`语变成一个`java.lang.Boolean`实例。这在技术上根本不是 a `boolean`，因此您的 Tiles 标签中的类型/类名将不匹配。

相反，使用

```
<tiles:put name="boolValue" beanName="boolValue" type="java.lang.Boolean" /> 
```

和

```
<tiles:useAttribute name="boolValue" id="boolValue" classname="java.lang.Boolean" /> 
```

# struts2 - 如何在我现有的 struts2 项目中集成 struts2 restful 服务

> ID：13994219
> 
> 赞同：1
> 
> 时间：2012-12-21T17:00:18.287
> 
> 标签：struts2, restful-url

在下面的文件中，我刚刚将过滤器类从 更改`filterDispatcher`为`StrutsPrepareAndExecuteFilter`以实现 struts RESTful 服务。否则我没有改变任何东西。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>unsr</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml; classpath:applicationContext.xml</param-value>
    </context-param>

    <!-- Struts 2 -->
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>  
        <init-param>
            <param-name>struts.devMode</param-name>
            <param-value>true</param-value>
        </init-param>
        <init-param>
            <param-name>struts.rest.defaultExtension</param-name>
            <param-value>xml</param-value>
        </init-param>   
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>
            org.nea.individualprofile.web.struts.uniservs.ContextListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>action</servlet-name>
        <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
        <init-param>
            <param-name>application</param-name>
            <param-value>org.abc.web.AppResources</param-value>
        </init-param>
        <init-param>
            <param-name>config</param-name>
            <param-value>/WEB-INF/struts-config.xml</param-value>
        </init-param>
        <init-param>
            <param-name>debug</param-name>
            <param-value>2</param-value>
        </init-param>
        <init-param>
            <param-name>detail</param-name>
            <param-value>0</param-value>
        </init-param>
        <init-param>
            <param-name>validate</param-name>
            <param-value>true</param-value>
        </init-param>

        <load-on-startup>2</load-on-startup>
    </servlet>

    <session-config>
        <session-timeout>60</session-timeout>
    </session-config>

    <mime-mapping>
        <extension>css</extension>
        <mime-type>text/css</mime-type>
    </mime-mapping>

    <welcome-file-list>
        <welcome-file>Index.jsp</welcome-file>
    </welcome-file-list>
    <error-page>
        <error-code>404</error-code>
        <location>/NotFound.jsp</location>
    </error-page>
    <error-page>
        <error-code>400</error-code>
        <location>/NotFound.jsp</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/Error.jsp</location>
    </error-page>
</web-app> 
```

在下面的文件中，我为 struts restful 服务添加了所有常量标签。以上 3 包括我已经在我现有的项目中使用的顶部，该项目在过去 1 年中运行良好。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd ">
<struts>    
    <include file="struts-default.xml"/>
    <include file="struts-employee.xml"/>
    <include file="struts-test.xml"/>

    <constant name="struts.mapper.class" value="composite" />
    <constant name="struts.mapper.composite" value="rest,struts"/>  
    <constant name="struts.convention.package.locators" value="example"/>
    <constant name="struts.convention.action.suffix" value="Controller"/>
    <constant name="struts.convention.action.mapAllMatches" value="true"/>
    <constant name="struts.convention.default.parent.package" value="rest-default"/>
 </struts> 
```

下面是我为宁静服务制作的课程。其中 Employee 是我的 POJO 课程

```
package org.abc.individualprofile.web.rest.example;

import java.util.Collection;

import org.apache.struts2.convention.annotation.Namespace;
import org.apache.struts2.rest.DefaultHttpHeaders;
import org.apache.struts2.rest.HttpHeaders;
import org.abc.ia.services.util.uniserv.UniServGrantInfo;
import org.abc.spring.services.interfaces.uniservs.UniservSearchInterface;

import com.opensymphony.xwork2.ModelDriven;
import com.opensymphony.xwork2.ValidationAwareSupport;

public class TestController extends ValidationAwareSupport implements ModelDriven<Employee> {

    private UniServGrantInfo ugiObj = new UniServGrantInfo();
    private Collection< Employee > list;

    public HttpHeaders index(){
        restGrantInfoList = uniservService.showAllgrants("ITSMAXK", "ALL", "ALL", "ALL");
        return new DefaultHttpHeaders("index").disableCaching();
    }

    public Employee getModel() {        
        return (Employee) (list!= null ? list: ugiObj);
    }
} 
```

我面临两个问题：

1.  当我输入这个 (localhost:7001/unsr/test.json) URL 时，它没有达到我的方法
2.  我现有的工作应用程序现在不工作

# crystal-reports - 将水晶报表文件中的数据提取到sql中

> ID：13994222
> 
> 赞同：0
> 
> 时间：2012-12-21T17:00:30.533
> 
> 标签：crystal-reports, crystal-reports-2008

我需要从数千个数据中提取数据`crystal report 2008 files`到 SQL 数据库中。我需要的数据是

*   水晶文件名
*   存储过程水晶正在使用
*   服务器
*   使用的数据库 SP
*   显示的字段
*   摘要信息，例如作者
*   关键词、评论、主题
*   参数

    等等。

有谁知道我如何做到这一点，也许有一个代码示例。有人告诉我这可以使用 VB 来完成，但不知道该怎么做。任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:41:19.880

这将向您展示如何设置连接信息。您基本上可以使用相同的代码来获取连接信息：

```
Imports CrystalDecisions.CrystalReports.Engine
Imports CrystalDecisions.Shared
Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, _
    ByVal e As System.EventArgs) Handles Button1.Click
        Dim cryRpt As New ReportDocument
        Dim crtableLogoninfos As New TableLogOnInfos
        Dim crtableLogoninfo As New TableLogOnInfo
        Dim crConnectionInfo As New ConnectionInfo
        Dim CrTables As Tables
        Dim CrTable As Table

        cryRpt.Load("PUT CRYSTAL REPORT PATH HERE\CrystalReport1.rpt")

        With crConnectionInfo
            .ServerName = "YOUR SERVER NAME"
            .DatabaseName = "YOUR DATABASE NAME"
            .UserID = "YOUR DATABASE USERNAME"
            .Password = "YOUR DATABASE PASSWORD"
        End With

        CrTables = cryRpt.Database.Tables
        For Each CrTable In CrTables
            crtableLogoninfo = CrTable.LogOnInfo
            crtableLogoninfo.ConnectionInfo = crConnectionInfo
            CrTable.ApplyLogOnInfo(crtableLogoninfo)
        Next

        CrystalReportViewer1.ReportSource = cryRpt
        CrystalReportViewer1.Refresh()
    End Sub
End Class 
```

来自：http: [//vb.net-informations.com/crystal-report/vb.net_crystal_report_load_dynamically.htm](http://vb.net-informations.com/crystal-report/vb.net_crystal_report_load_dynamically.htm)

您应该能够通过探索 ReportDocument.ReportObjects 来了解其他内容

# playframework - 更改播放区快照编号

> ID：13994225
> 
> 赞同：2
> 
> 时间：2012-12-21T17:00:45.100
> 
> 标签：playframework

运行时使用 Play 2.0 框架

```
play dist 
```

我总是得到：

```
xyz-1.0-SNAPSHOT.zip 
```

如何增加该数字，或在每次构建时手动指定它？最终结果将是：

```
xyz-1.1-SNAPSHOT.zip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:05:56.753

更改文件中的和`appVersion`/或。`appName``project/Build.scala`

它将在下次创建具有新值的 dist 包。

# ruby-on-rails - 如何使用 xml 进行设备认证示例

> ID：13994233
> 
> 赞同：0
> 
> 时间：2012-12-21T17:01:22.863
> 
> 标签：ruby-on-rails, xml, blackberry, devise, ruby-on-rails-3.2

我目前正在开发一个移动应用程序，人们需要使用移动应用程序的 xml 从移动应用程序进行身份验证并在服务器端进行设计。

我以前从未使用过xml，并且只是第一次尝试，所以我想知道我是否可以获得设计身份验证的xml示例或任何代码示例作为使用用户名和密码以及自定义创建会话操作的答案成功和失败登录的 xml 响应会很棒。谢谢你。

# magento - 我可以在“添加新”按钮的 magento 网格中更改“创建 url”吗

> ID：13994240
> 
> 赞同：2
> 
> 时间：2012-12-21T17:01:59.747
> 
> 标签：magento, grid

我想要的是更改“添加新”按钮的操作

```
 class World_Exporter_Block_Adminhtml_Attribute extends    Mage_Adminhtml_Block_Widget_Grid_Container{
    public function __construct()
    {

            $location = str_replace('new', 'newMap', $this->getCreateUrl());

            $this->_controller = 'adminhtml_attribute';
            $this->_blockGroup = 'exporter';
            $this->_headerText = Mage::helper('exporter')->__('Attribute Manager ');
            $this->_addButtonLabel = Mage::helper('exporter')->__('Add Item');

            parent::__construct();

            $this->setCreateUrl($location);

                $this->_addButton('add', array(
                 'label'     => $this->getAddButtonLabel() ,
                'onclick'   => 'setLocation(\'' . $location .'\')',
                'class'     => 'add',
             ));

            // echo $this->getCreateUrl();
    }
} 
```

经过这么多尝试后，我仍然能够将“newAction”更改为任何其他..请帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T17:02:13.797

Yevgeny 的回答很好，但我会在他的代码中更改一些小东西：

```
public function __construct()
{
    $this->_controller = 'adminhtml_collection';
    $this->_blockGroup = 'story';
    $this->_headerText = Mage::helper('customer')->__('Manager');

    //Replace the first argument "add" by something else,
    //or both your new button and the original add button
    //won't be visible.
    $this->_addButton('btnAdd', array(
        'label' => Mage::helper('story')->__('Add Item'),
        'onclick' => "setLocation('" . $this->getUrl('*/*/new', array('page_key' => 'collection')) . "')",
        'class' => 'add'
    ));

    //Moved parent's constructor here (not necessary I think)
    parent::__construct();

    //Remove original add button
    $this->_removeButton('add');
} 
```

此行删除原始*添加*按钮，只留下包含新操作的新按钮：

```
$this->_removeButton('add'); 
```

**注意**：请务必在调用后删除原始按钮：

```
parent::__construct(); 
```

否则原始按钮将保留在网格中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T09:53:48.923

```
public function __construct()
{
    $this->_controller = 'adminhtml_collection';
    $this->_blockGroup = 'story';
    $this->_headerText = Mage::helper('customer')->__('Manager');
    parent::__construct();
    $this->_addButton('add', array(
        'label' => Mage::helper('story')->__('Add Item'),
        'onclick' => "setLocation('" . $this->getUrl('*/*/new', array('page_key' => 'collection')) . "')",
        'class' => 'add'
    ));

} 
```

# batch-file - 如何从一个具有依赖关系的批处理文件启动多个批处理文件？

> ID：13994250
> 
> 赞同：6
> 
> 时间：2012-12-21T17:02:22.930
> 
> 标签：batch-file

我想运行一个批处理文件，启动其他批处理文件。我查看了此处发布的类似问题：[如何在 .BAT 文件中运行多个 .BAT 文件](https://stackoverflow.com/questions/1103994/how-to-run-multiple-bat-files-within-a-bat-file)

我遵循了这个例子（特别是最后一个建议）并且它工作了......部分。它确实启动了我需要的批处理文件。但是，为了使应用程序正常运行，必须打开其中一些批处理文件，然后运行它们的程序几秒钟，然后再启动下一个批处理文件，否则它们将不会被注册。具体来说，第一个批处理文件启动一个 Web 应用程序服务器 (JBOSS 5.1)，然后下一个批处理文件打开一个池管理器，然后其他两个启动分发服务器。当我运行调用其他批处理文件时，它们几乎同时启动，并且它们不相互注册。我什至可以用批处理文件来做到这一点吗？还是我必须进入其他批处理文件的代码并在那里进行更改？我想不惜一切代价避免这种情况。

这是我到目前为止所拥有的：

```
start cmd /k CALL D:\jboss-5.1.0.GA-jdk6\jboss-5.1.0.GA\bin\run.bat

start cmd /k CALL batch1.bat

start cmd /k CALL batch2.bat

start cmd /k CALL batch3.bat 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T19:48:32.117

您可以删除`start cmd /k`并使用`CALL`.

```
CALL D:\jboss-5.1.0.GA-jdk6\jboss-5.1.0.GA\bin\run.bat
CALL batch1.bat
CALL batch2.bat
CALL batch3.bat 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T17:54:40.780

**回答：**

将`/wait`选项添加到启动命令。

```
WAIT        Start application and wait for it to terminate. 
```

**例子：**

```
start /wait cmd /k CALL D:\jboss-5.1.0.GA-jdk6\jboss-5.1.0.GA\bin\run.bat

start /wait cmd /k CALL batch1.bat

start /wait cmd /k CALL batch2.bat

start /wait cmd /k CALL batch3.bat 
```

否则，只需在开始之间使用 ping 延迟。（见user706837的回答）

**参考：**

[`Technet`](http://technet.microsoft.com/en-us/library/cc772390%28v=ws.10%29.aspx), [`Rob`](http://www.robvanderwoude.com/batchfiles.php), [`SS64`](http://ss64.com/),[`DosTips`](http://www.dostips.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:25:28.683

每当我有依赖于另一个的批处理文件时，我要么： 1\. 嵌套它们；意思是，如果batch1 需要在batch2 之前运行，那么我在batch1 中添加batch2。2\. 在 batch2 中打一个“睡眠”电话。这只有在您相当确定 batch1 的启动持续时间时才有可能。

一个示例睡眠命令是：

`ping 127.0.0.1 -n 4 > null`

这将使批处理文件等待 3 秒。（因为在 4 个回声中的每一个之间只有 3、1 秒的睡眠）

例子：

```
start cmd /k CALL D:\jboss-5.1.0.GA-jdk6\jboss-5.1.0.GA\bin\run.bat
ping 127.0.0.1 -n 4 > null
start cmd /k CALL batch1.bat
ping 127.0.0.1 -n 4 > null
start cmd /k CALL batch2.bat
ping 127.0.0.1 -n 4 > null
start cmd /k CALL batch3.bat 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-19T11:04:26.427

```
There are multiple ways for that.

1.

rem echo call A

CALL a.bat

rem echo call B

CALL b.bat

rem echo call C

CALL c.bat

rem pause

--------------------

2.

echo call A

start cmd /k CALL a.bat

echo call B

start cmd /k CALL b.bat

echo call C

start cmd /k CALL c.bat

pause

---------------------

Here the difference is-

start cmd /k

   It creates these many instances. So we can see multiple number of CMD prompts.

CALL

   Each descendent CALL waits for the completion of the previous CALL. 
```

# tfs - 阻止用户选项，使用阻止其他用户签出签出

> ID：13994252
> 
> 赞同：0
> 
> 时间：2012-12-21T17:02:31.510
> 
> 标签：tfs

TFS 2010 中是否有一个选项可以防止其他用户使用以下选项签出文件？

“签出 - 防止其他用户签出和签入。”

# c# - 如何编写自定义 ASP.NET MVC HTML Helper，如 Html.TextBoxFor 并设置正确的名称属性

> ID：13994253
> 
> 赞同：7
> 
> 时间：2012-12-21T17:02:37.393
> 
> 标签：c#, asp.net-mvc

我想要定制`Html.DateTimePickerFor(a => a.Fields[0].Id, value)`

所以结果应该是这样的：

```
<div name="Fields[0].Id"></div> 
```

目前我使用`Html.DatetimePicker("Fields[0].Id", value)`它并且它工作得很好，但我想生成动态名称。

所以问题是如何设置正确的`"name"`属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:11:48.257

试试这个。这个对我有用。

```
 public static MvcHtmlString DateTimePickerFor<TModel, TProp>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProp>> expression, object htmlAttributes)
    {
        string name   = ExpressionHelper.GetExpressionText(expression);
        ... rest of code here
    } 
```

魔力来自`System.Web.Mvc.ExpressionHelper.GetExpressionText()`。从表达式中获得名称后，您可以将其应用于您的 div。

[获取表达式文本（）](http://msdn.microsoft.com/en-us/library/ee428401%28v=vs.98%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:10:50.657

尝试这样的事情（改编自工作代码）：

```
public static IHtmlString DateTimePickerFor<TModel, TValue>(
    this HtmlHelper<TModel> helper,
    Expression<Func<TModel, TValue>> expression,

    // other input parameters as needed

) {
    // metadata gives you access to a variety of useful things, such as the
    // display name and required status
    var metadata = ModelMetadata.FromLambdaExpression( expression, helper.ViewData );
    string markup = ""; // markup for your input            

    var name = helper.NameFor( expression ); // getting the name

    return MvcHtmlString.Create( markup  );
} 
```

# ios - 按下时以编程方式移除 UIBarButtonItem 上的灯光？

> ID：13994254
> 
> 赞同：0
> 
> 时间：2012-12-21T17:02:44.483
> 
> 标签：ios, uibutton, uibarbuttonitem, popover

我知道我可以创建一个 UIButton 并使用 UIButton 初始化 UIBarButtonItem。有了这个解决方案，我们可以避免这个问题。

这里的解决方案：

[如何以编程方式删除/避免 UIBarButtonItem 上的小白色飞溅灯](https://stackoverflow.com/questions/8170641/how-to-remove-avoid-small-white-splash-light-on-uibarbuttonitem-programatically)

但我需要 UIBarButtonItem 来调用 Popover，而 popover 只能从 UIBarButtonItem 调用

```
[self.myPickerPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 
```

**presentPopoverFromBarButtonItem:sender**

然后，当我尝试使用 UIButton 解决方案时，应用程序崩溃，因为我是从 Button 而不是从 BarButtonItem 呈现 Popover。

有什么想法可以解决这个问题吗？任何想法删除灯？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:59:29.263

只需为 UIBarButtonItem 而不是 UIButton 调用 presentPopoverFromBarButtonItem。

```
[self.myPickerPopover presentPopoverFromBarButtonItem:--UIBarButtonItem here, not UIButton -- permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 
```

请参阅如何从 UIButton 获取 UIBarButtonItem： [stackoverflow.com/a/9578399/1691231](https://stackoverflow.com/a/9578399/1691231)

# sql - 使用 JOIN 查找正确记录的更新表

> ID：13994259
> 
> 赞同：1
> 
> 时间：2012-12-21T17:03:00.457
> 
> 标签：sql, tsql

我正在尝试更新表中的记录，这需要我使用 INNER JOIN 来查找正确的记录。

```
 SELECT T2.*
   FROM Schema.Table2 T2 INNER JOIN 
     Schema.Table1 T1 ON T2.Key_Column = T1.Key_Column
   WHERE T2.ID = @ID AND T1.Code = '1' 
```

试过了

```
UPDATE Schema.Table2 T2
SET T2.col1 = @Var1,
    T2.col2 = @Var2,
    T2.col3 = @Var3
WHERE T2.Key_Column = (SELECT T2.*
                       FROM Schema.Table2 T2 INNER JOIN 
                       Schema.Table1 T1 ON T2.Key_Column = T1.Key_Column
                       WHERE T2.ID = @ID AND T1.Code = '1') 
```

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:05:08.670

您不需要子选择：

```
UPDATE T2
SET T2.col1 = @Var1,
    T2.col2 = @Var2,
    T2.col3 = @Var3
FROM Schema.Table2 T2 INNER JOIN 
     Schema.Table1 T1 ON T2.Key_Column = T1.Key_Column
WHERE T2.ID = @ID AND T1.Code = '1' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T17:07:51.937

怎么样

```
UPDATE Schema.Table2
        SET
            col1 = @Var1,
            col2 = @Var2,
            col3 = @Var3
    FROM
            Schema.Table2 T2
        INNER JOIN 
            Schema.Table1 T1 
                ON T2.Key_Column = T1.Key_Column
    WHERE 
            T2.ID = @ID 
        AND 
            T1.Code = '1' 
```

# c#-4.0 - ASP.NET Web API 上传多部分 MIME

> ID：13994262
> 
> 赞同：0
> 
> 时间：2012-12-21T17:03:02.477
> 
> 标签：c#-4.0

我正在使用 Visual Studio 2010，代码不起作用 FileData 并且 FormData 为空。我用萤火虫检查了帖子，它有值。

我的 nuget 包版本是 ASP.NET Web API 4.0.20710.0

我从这里“http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2”举了一个例子

请参阅下面的图片

[http://screencast.com/t/5fhj0CfgiG](http://screencast.com/t/5fhj0CfgiG)

[http://screencast.com/t/KCsPizDmC](http://screencast.com/t/KCsPizDmC)

“http://screencast.com/t/hhGFGaSjV” ---> 发布图片

当我使用 HttpContext.Current.Request 时，我得到了变量。

我测试了框架 4.5 的应用程序并且工作正常，我认为可能是框架 4 的问题。

我想可能是我的视觉工作室，所以我在另外 3 台电脑上测试它，我遇到了同样的问题。

谢谢

```
[HttpPost]
public Task<HttpResponseMessage> PostFormData()
{
    // Check if the request contains multipart/form-data.
    if (!Request.Content.IsMimeMultipartContent())
    {
        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
    }

    List<string> files = new List<string>();
    List<string> formData = new List<string>();

    string root = HttpContext.Current.Server.MapPath("~/App_Data");
    MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(root);

    Collection<HttpContent> values = provider.Contents;

    // Read the form data and return an async task.
    var task = Request.Content.ReadAsMultipartAsync(provider).
        ContinueWith<HttpResponseMessage>(t =>
        {
            if (t.IsFaulted || t.IsCanceled)
            {
                Request.CreateErrorResponse(HttpStatusCode.InternalServerError, t.Exception);
            }

            // This illustrates how to get the file names.
            foreach (MultipartFileData file in provider.FileData)
            {
                files.Add(file.Headers.ContentDisposition.FileName);
                files.Add("Server file path: " + file.LocalFileName);
                Trace.WriteLine(file.Headers.ContentDisposition.FileName);
                Trace.WriteLine("Server file path: " + file.LocalFileName);
            }

            // Show all the key-value pairs.
            foreach (var key in provider.FormData.AllKeys)
            {
                foreach (var val in provider.FormData.GetValues(key))
                {
                    formData.Add(string.Format("{0}: {1}", key, val));
                    Trace.WriteLine(string.Format("{0}: {1}", key, val));
                }
            }
            return Request.CreateResponse(HttpStatusCode.OK);
        });

    return task;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:59:47.720

ReadAsMultiPartAsync 提供程序 FileData 属性没有值，因为您似乎没有发布任何二进制数据，例如每个屏幕截图的图像：[Post Screenshot](http://screencast.com/t/KCsPizDmC)。FileData 只有在您的网页上有一个值并且当然浏览并选择要上传的文件时才会有值。具有讽刺意味的是，您使用的代码适用于 4.0 .NET 框架，因为 4.5 框架使用 await 和 async 关键字进行异步工作。[有关更多信息MultipartFileData 示例](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)，请参阅此链接。看来您的问题可能是 FormData.AllKeys。不确定这是否是“提取”您的帖子数据。

# jquery - 我没有让我的 jquery 菜单在下面的代码中向下滑动

> ID：13994264
> 
> 赞同：0
> 
> 时间：2012-12-21T17:03:08.903
> 
> 标签：jquery

当鼠标移到一个 id="non_tech" 的元素上时，没有让 div_tech div 向下滑动，该元素位于另一个 div 中，鼠标滑过“事件”
相关的 html 代码是

```
<div class="events">
   <img src="arrow.png" alt="arrow" class="img_arw" />
   <table class="tab_evnts">
      <tr>
         <td class="eve_mentd" id="tech">
            <a href="#">
                <span class="eve_men">Technical</span>
            </a>
         </td>
      </tr>
      <tr>
         <td class="eve_mentd" id="non_tech">
            <a href="#">
               <span class="eve_men">Non- Technical</span>
            </a>
         </td>
      </tr>
      <tr>
         <td class="eve_mentd" id="gamers">
            <a href="#">
               <span class="eve_men">Gamer&#39;s Inn</span>
            </a>
         </td>
      </tr>
   </table>
   <div class="tech_div">
   </div>
</div>

<table >
<tr>
<td class="menu"><a href="#" title="Home">Home</a></td>
<td class="menu"><a href="#" id="eves">Events</a></td>
<td class="menu"><a href="#" title="Tuneback">Tuneback</a></td>
<td class="menu"><a href="#" title="Registration">Registration</a>
</td><td class="menu"><a href="#"title="Helpdesk">Helpdesk</a></td>
</tr>
</table> 
```

相关的jquery代码是

```
$(document).ready(function() {
    $('#eves').mouseenter(function() {
        $('.events').stop().slideDown("fast");
    }, function() {
        $('.events').stop().slideUp("fast");
    });
    $('#non_tech').hover(function() {

        $("tech_div").slideDown("slow");
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:05:26.827

你的错误在选择器中

```
$('#eves').mouseenter(function() { 
```

在您的标记中，您定义了一个如此命名的类，而不是一个 id。试试这个

```
$('.eves').mouseenter(function() { 
```

好吧...我不确定使用表格来滑动菜单是否可行，也许你应该试试 ul。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:16:23.317

`mouseenter`不带两个功能..我认为您正在寻找`.hover()`或组合`mouseenter`and`mouseout`

看起来您缺少**类选择器**

```
$(".tech_div").slideDown("slow");
   ^---------  Missing the class Selector 
```

* * *

```
$('#eves').on({
    mouseenter: function() {
        $('.events').stop().slideDown("fast");
    },
    mouseout: function() {
        $('.events').stop().slideUp("fast");
    }
});

$('#non_tech').hover(function() {
    $(".tech_div").slideDown("slow");
});​ 
```

**更新**

```
$('#eves').on({
    mouseenter: function() {
        $('.events').stop().slideDown("fast");
    }
});

$('#non_tech').hover(function() {
    $(".tech_div").slideDown("slow");
}, function() {
    $(".tech_div").slideUp("slow");
});​ 
```

**[检查小提琴](http://jsfiddle.net/bHRLv/1/)**

# ruby-on-rails - 在哪里使用引擎在 rails 3.2.8 应用程序中创建会话表？

> ID：13994271
> 
> 赞同：1
> 
> 时间：2012-12-21T17:03:39.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-engines

在 rails 3.2.8 应用程序中，我们`authentify`为用户身份验证创建了一个可安装的 rails 引擎。我们的问题是在哪里创建会话表，在 rails 应用程序（主应用程序）还是在引擎中`authentify`？

如果我们在 Rails 应用程序中创建会话表，那么访问会话变量将与使用 session[:variable_name] 的常规 Rails 应用程序相同。我们测试了在引擎 authentify 中创建会话表，并且`session[:user_id]`在 authentify 中定义的无法`session[:user_id]`在其他 Rails 引擎中访问。 `authentify_session[:user_id]`也不能正常工作。

# java - 按钮单击事件不起作用

> ID：13994272
> 
> 赞同：-2
> 
> 时间：2012-12-21T17:03:41.560
> 
> 标签：java, android

我正在尝试切换视图，但是当我在第二个视图中时，后退事件单击不起作用..我不知道出了什么问题。

请查看我的代码并帮助我！

[第1部分](http://pastebin.com/kV52cbWh)

[第2部分](http://pastebin.com/Ke1iWz01)

```
public class t extends Activity implements OnClickListener {
   Button volta;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.janela2);

      volta = (Button) findViewById(R.id.button2);
      volta.setOnClickListener(this);

   }

   @Override
   public void onClick(View v) {
      if (v == volta) {
         startActivity(new Intent(t.this, MainActivity.class));
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:08:27.297

如果您想要两种布局，请使用 viewflipper。如果您想要两个活动（java 类）和两个布局分别使用：

```
Intent i = new Intent (this, myClass.class);
startActivity(i); 
```

启动 Activity 而不是 setcontentview

所以在这里：

```
public void onClick(View v) {
                       startActivity(new Intent (MainActivity.this, t.class));
                                         OR IN THE CASE OF T.CLASS:
                       startActivity(new Intent (t.this, MainActivity.class));
               } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:15:46.810

您必须覆盖 onBackPressed。如下更改您的 MainActivity

```
public class MainActivity extends Activity {

        private boolean goBack = false;           

        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);

                Button sobre = (Button) findViewById(R.id.button1);
                  sobre.setOnClickListener(new OnClickListener() {
                   public void onClick(View v) {
                           goBack = true;
                           setContentView(R.layout.janela2);
                   }
                   });

        }

        @Override
        public void onBackPressed() {
        //If you have switched to R.layout.janela2 then go back
        if (goBack){
            setContentView(R.layout.activity_main);
            goBack = false;
            return;
            }
        //else do default action
        super.onBackPressed();
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:44:46.517

只需执行以下代码，希望对您有所帮助

## MainActivity.java

```
public class MainActivity extends Activity { 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            Button sobre = (Button) findViewById(R.id.button1);
            sobre.setOnClickListener(new OnClickListener() {
               public void onClick(View v) {

               Intent intent = new Intent(MainActivity.this, t.class);
               startActivity(intent);
               }
           });
    }
 } 
```

## 在 t.java 中

```
public class t extends Activity{

    Button volta;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.janela2);
    }

 @Override
 public void onStop() {
    super.onStop();
    finish();
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:20:05.727

`onBackPressed()`如果要在应用程序中返回按钮功能，则必须覆盖 方法。IE

```
public void onBackPressed() {

     Intent start = new Intent(CurrentClass.this,Next_Activity.class);
      startActivity(start);
     finishActivity(0);
 } 
```

# visual-c++ - 对话框应用程序和库之间的链接错误

> ID：13994275
> 
> 赞同：2
> 
> 时间：2012-12-21T17:03:56.800
> 
> 标签：visual-c++, mfc

我有一个曾经完美运行的对话框应用程序。它使用 MFC。我想将一些类移动到一个单独的库中（在同一个解决方案中），所以我在同一个解决方案中创建了一个新项目，选择了 Win32 控制台应用程序、静态库和 MFC，并将这些类移动到新项目中。图书馆项目似乎编译得很好。

在原始项目中，我添加了对新库的引用。

我现在收到这些错误，不知道如何解决它们。如果我编辑项目属性并选择*链接器/输入/忽略所有默认库*，我会收到更多错误。

```
1>afxnmcdd.lib(wincore2.obj) : error LNK2005: "void __stdcall DDX_Control(class CDataExchange *,int,class CWnd &)" (?DDX_Control@@YGXPAVCDataExchange@@HAAVCWnd@@@Z) already defined in nafxcwd.lib(wincore2.obj)
1>afxnmcdd.lib(wincore2.obj) : error LNK2005: "public: int __thiscall CWnd::ExecuteDlgInit(void *)" (?ExecuteDlgInit@CWnd@@QAEHPAX@Z) already defined in nafxcwd.lib(wincore2.obj)
1>afxnmcdd.lib(afxctrlcontainer2.obj) : error LNK2005: "void __cdecl AfxRegisterMFCCtrlClasses(void)" (?AfxRegisterMFCCtrlClasses@@YAXXZ) already defined in nafxcwd.lib(afxctrlcontainer2.obj)
1>afxnmcdd.lib(afxctrlcontainer2.obj) : error LNK2005: "protected: void __thiscall CMFCControlContainer::PreUnsubclassControl(class CWnd *)" (?PreUnsubclassControl@CMFCControlContainer@@IAEXPAVCWnd@@@Z) already defined in nafxcwd.lib(afxctrlcontainer2.obj)
1>afxnmcdd.lib(afxctrlcontainer2.obj) : error LNK2005: "public: int __thiscall CMFCControlContainer::SubclassDlgControls(void)" (?SubclassDlgControls@CMFCControlContainer@@QAEHXZ) already defined in nafxcwd.lib(afxctrlcontainer2.obj)
1>afxnmcdd.lib(afxctrlcontainer2.obj) : error LNK2005: "public: static int __stdcall CMFCControlContainer::UTF8ToString(char const *,class ATL::CStringT<char,class StrTraitMFC<char,class ATL::ChTraitsCRT<char> > > &,int)" (?UTF8ToString@CMFCControlContainer@@SGHPBDAAV?$CStringT@DV?$StrTraitMFC@DV?$ChTraitsCRT@D@ATL@@@@@ATL@@H@Z) already defined in nafxcwd.lib(afxctrlcontainer2.obj)
1>.\Debug\application-ui.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-08T20:04:39.470

在您的静态库中，转到 STDAFX.H 并注释掉以下预处理器宏：

```
#define _AFX_NO_MFC_CONTROLS_IN_DIALOGS 
```

# c# - Membership.GetUser()，无法连接到 SQL Server 数据库

> ID：13994282
> 
> 赞同：4
> 
> 时间：2012-12-21T17:04:16.050
> 
> 标签：c#, asp.net-mvc-4, asp.net-membership

我开始使用 ASP.net MVC4，并使用 Internet 应用程序模板创建了一个项目。

我在 UserProfile 默认模型和表中添加了一些自定义字段，我还将它重命名为“UserModel”，它工作得很好（登录、注册等）

我现在正在尝试对另一个实体执行 SQL 请求，因此我需要获取当前登录用户的 ID。我发现我必须用来`Membership.GetUser()`访问当前用户，但我现在完全陷入了这个错误：

```
 A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

SQLExpress database file auto-creation error:

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +5295167
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +242
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover) +5307115
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) +145
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) +920
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) +307
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) +434
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) +5309659
   System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions) +38
   System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) +5311874
   System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions) +143
   System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry) +83
   System.Data.SqlClient.SqlConnection.Open() +96
   System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString) +76

[HttpException (0x80004005): Unable to connect to SQL Server database.]
   System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString) +131
   System.Web.Management.SqlServices.SetupApplicationServices(String server, String user, String password, Boolean trusted, String connectionString, String database, String dbFileName, SqlFeatures features, Boolean install) +89
   System.Web.Management.SqlServices.Install(String database, String dbFileName, String connectionString) +27
   System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile(String fullFileName, String dataDir, String connectionString) +386

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17929 
```

这是我的代码：

```
namespace AppTest.Controllers
{
    public class ThreadController : Controller
    {
        private DalContext db = new DalContext();

        public PartialViewResult OwnThreads()
        {
            MembershipUser currentUser = Membership.GetUser();
            int userGuid = (int) currentUser.ProviderUserKey;
            //List<ThreadModel> OwnThread = db.Threads.Where(t => t.Author.UserId == userGuid).ToList();
            return PartialView();
        }
} 
```

这是我的数据层：

```
namespace AppTest.DataAccessLayer
{
    public class DalContext : DbContext
    {
        public DalContext()
            : base("DefaultConnection")
        {
        }

        public DbSet<UserModel> Users { get; set; }

        public DbSet<CommentModel> Comments { get; set; }

        public DbSet<ThreadModel> Threads { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }

    }
} 
```

为什么我要`Membership.GetUser()`引起这个错误？

我什至不明白数据库的链接是什么，因为对我的数据库的其他访问工作正常。所以我真的不明白。

非常感谢你的帮助。

* * *

**编辑：**这是我的 web.config 文件，在 user489998 的回答后编辑

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <sectionGroup name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection, DotNetOpenAuth.Core">
      <section name="messaging" type="DotNetOpenAuth.Configuration.MessagingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
      <section name="reporting" type="DotNetOpenAuth.Configuration.ReportingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
      <section name="oauth" type="DotNetOpenAuth.Configuration.OAuthElement, DotNetOpenAuth.OAuth" requirePermission="false" allowLocation="true" />
      <section name="openid" type="DotNetOpenAuth.Configuration.OpenIdElement, DotNetOpenAuth.OpenId" requirePermission="false" allowLocation="true" />
    </sectionGroup>
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-Soombu-20121217073143;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-Soombu-20121217073143.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <membership defaultProvider="SqlProvider" userIsOnlineTimeWindow="15">
      <providers>
        <clear />
        <add name="SqlProvider" connectionStringName="DefaultConnection" applicationName="Soombu" type="System.Web.Security.SqlMembershipProvider" />
      </providers>
    </membership>
    <compilation debug="true" targetFramework="4.5">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.3.0.0" newVersion="1.3.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.AspNet" publicKeyToken="2780ccd10d57b246" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.1.0.0" newVersion="4.1.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780ccd10d57b246" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.1.0.0" newVersion="4.1.0.0" />
      </dependentAssembly>
    </assemblyBinding>
    <!-- This prevents the Windows Event Log from frequently logging that HMAC1 is being used (when the other party needs it). -->
    <legacyHMACWarning enabled="0" />
    <!-- When targeting ASP.NET MVC 3, this assemblyBinding makes MVC 1 and 2 references relink
             to MVC 3 so libraries such as DotNetOpenAuth that compile against MVC 1 will work with it.
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
                <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
            </dependentAssembly>
        </assemblyBinding>
         -->
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <system.net>
    <defaultProxy enabled="true" />
    <settings>
      <!-- This setting causes .NET to check certificate revocation lists (CRL) 
                 before trusting HTTPS certificates.  But this setting tends to not 
                 be allowed in shared hosting environments. -->
      <!--<servicePointManager checkCertificateRevocationList="true"/>-->
    </settings>
  </system.net>
  <dotNetOpenAuth>
    <messaging>
      <untrustedWebRequest>
        <whitelistHosts>
          <!-- Uncomment to enable communication with localhost (should generally not activate in production!) -->
          <!--<add name="localhost" />-->
        </whitelistHosts>
      </untrustedWebRequest>
    </messaging>
    <!-- Allow DotNetOpenAuth to publish usage statistics to library authors to improve the library. -->
    <reporting enabled="true" />
    <!-- This is an optional configuration section where aspects of dotnetopenauth can be customized. -->
    <!-- For a complete set of configuration options see http://www.dotnetopenauth.net/developers/code-snippets/configuration-options/ -->
    <openid>
      <relyingParty>
        <security requireSsl="false">
          <!-- Uncomment the trustedProviders tag if your relying party should only accept positive assertions from a closed set of OpenID Providers. -->
          <!--<trustedProviders rejectAssertionsFromUntrustedProviders="true">
                        <add endpoint="https://www.google.com/accounts/o8/ud" />
                    </trustedProviders>-->
        </security>
        <behaviors>
          <!-- The following OPTIONAL behavior allows RPs to use SREG only, but be compatible
                         with OPs that use Attribute Exchange (in various formats). -->
          <add type="DotNetOpenAuth.OpenId.RelyingParty.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth.OpenId.RelyingParty" />
        </behaviors>
      </relyingParty>
    </openid>
  </dotNetOpenAuth>
  <uri>
    <!-- The uri section is necessary to turn on .NET 3.5 support for IDN (international domain names),
             which is necessary for OpenID urls with unicode characters in the domain/host name.
             It is also required to put the Uri class into RFC 3986 escaping mode, which OpenID and OAuth require. -->
    <idn enabled="All" />
    <iriParsing enabled="true" />
  </uri>
</configuration> 
```

我现在收到此错误：找不到存储过程“dbo.aspnet_CheckSchemaVersion”。

我搜索了这个错误，我发现的只是一些关于 aspnet_regsql.exe 的东西，我什至在我的 PC 上都没有。我在 Visual Studio 2012 中使用嵌入式 SQL 服务器。我现在真的迷路了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:20:41.970

您是否检查了您在 Web 配置中使用的成员资格提供程序的连接字符串？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-14T13:15:02.277

而不是这个：

```
Membership.GetUser() 
```

用这个 ：

```
var user = UserManager.FindById(User.Identity.GetUserId()); 
```

或这个 ：

```
ApplicationUser user = db.Users.FirstOrDefault(x => x.Id == UserName); 
```

除了 x.Id 您可以根据您的 User 类中的字段使用任何替代方法，例如，如果您有字段“Email”，您可以使用：

```
 ApplicationUser user = db.Users.FirstOrDefault(x => x.Email == somv.UserName); 
```

# wpf - 如何在 WPF 应用程序中动态调整标签的大小？

> ID：13994286
> 
> 赞同：0
> 
> 时间：2012-12-21T17:04:38.220
> 
> 标签：wpf, dynamic, resize, wpf-controls, label

我需要知道如何`label`在 WPF 应用程序中动态调整 a 的大小。

* * *

我已经[在本文](http://www.codeproject.com/Articles/71792/WPF-Draggable-Label)中找到了一个示例，它已经实现了同时拖动和调整标签大小。我深入研究了代码，为了简短起见，我发现`OnMouseMove`标签的内部事件，它会检查鼠标光标的形状，如果是`Hand`，它将进行拖动，如果是其中任何一个，`resizing arrows`它将相应地调整大小. 看看这个。你会看到的。`resizing arrows`在这个特定的例子中，当鼠标悬停在标签的边框上时，我无法找出光标形状是如何变化的。

**所以**

我要么需要找出*“当鼠标悬停在标签的边框上时如何将鼠标光标的形状更改为调整箭头的大小”*，**或者**要找到一种动态调整标签大小的新方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:23:02.993

更改光标是通过`this.Cursor`属性完成的。

我打开了文章中的代码，看看他们是怎么做的……

**如果未**`OnMouseMove`单击鼠标左键，则光标会更改：

 **```
Point currentLocation = e.MouseDevice.GetPosition(wnd);
       ......
       ......
const int dragHandleWidth = 3;

var bottomHandle = new Rect(0, height - dragHandleWidth, width, dragHandleWidth);
var rightHandle = new Rect(width - dragHandleWidth, 0, dragHandleWidth, height);

Point relativeLocation = wnd.TranslatePoint(currentLocation, this);

if (rightHandle.Contains(relativeLocation))
{
    this.Cursor = Cursors.SizeWE;
}
else if (bottomHandle.Contains(relativeLocation))
{
    this.Cursor = Cursors.SizeNS;
}
else
{
    this.Cursor = Cursors.Hand;
} 
```

换句话说，他们检查当前鼠标位置是否在底部或右边框的 3 px 内，如果是，他们会相应地更改光标...

您可以轻松更改此逻辑以满足您的需求....**

# ios - UI TextField Delegate 方法 textFieldShouldReturn: 的返回值是什么意思？

> ID：13994289
> 
> 赞同：2
> 
> 时间：2012-12-21T17:05:08.263
> 
> 标签：ios, cocoa-touch

苹果文档提供：

> 询问代理文本字段是否应处理按下返回按钮。
> 
> ```
> - (BOOL)textFieldShouldReturn:(UITextField *)textField 
> ```
> 
> 参数`textField`按下返回按钮的文本字段。 `Return Value` `YES`文本字段是否应该为返回按钮实现其默认行为；否则，`NO`。
> 
> 讨论 每当用户点击返回按钮时，文本字段都会调用此方法。您可以使用此方法在点击按钮时实现任何自定义行为。

我的问题是返回值有什么作用？我一直在此方法中实现行为，因此返回的内容没有区别。这不是执行该操作的正确方法吗？

例如，如果我实现了一个搜索功能，我应该在这个方法中还是在其他地方触发搜索操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T17:16:04.350

这是当用户点击 Return 键盘键（无论它被标记为什么）时触发操作的正确方法。

委托方法的返回值`textFieldShouldReturn:`几乎无关紧要。如果您正在处理单个文本字段，那么这绝对没关系。

不久前我遇到了一个问题，这让我意识到在正确的情况下，返回值确实很重要。我有一个带有几个文本字段的屏幕，然后是一个文本视图。我正在使用此文本字段委托方法将第一响应者从文本字段更改为文本字段到文本视图。我发现如果我`YES`在这个委托方法中返回，然后让文本视图成为第一响应者，则换行符被发送到文本视图。

因此，`NO`为了安全起见，我现在总是从这个委托方法返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:15:55.803

当您按下键盘上的返回按钮时，将`textFieldShouldReturn`调用。我从未经历过返回值之间的任何差异。

自定义示例：

如果当用户从第一个文本字段按下返回按钮时您有两个文本字段，您可以通过以下方式将焦点放在第二个字段上：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    NSLog(@"textFieldShouldReturn:");
    if (textField.tag == 1)
    {
        UITextField *passwordTextField = (UITextField *)[self.view viewWithTag:2];
        [passwordTextField becomeFirstResponder];
    }
    else
    {
        [textField resignFirstResponder];
    }
    return YES;
} 
```

**因此，您可以使用此委托方法来触发搜索功能。**

# php - 如何使用 php 使用 Youtube Api v3 喜欢 Youtube 视频

> ID：13994290
> 
> 赞同：1
> 
> 时间：2012-12-21T17:05:11.797
> 
> 标签：php, youtube, youtube-api

由于 Youtube Api V2 不再支持特定视频。谁能解释一下如何用 youtube api v3 点赞一个视频？我总是收到以下回复：

```
 Response

400 Bad Request

- Show headers -

{
 "error": {
  "errors": [
   {
    "domain": "youtube.part",
    "reason": "unexpectedPart",
    "message": "contentDetails",
    "locationType": "parameter",
    "location": "part"
   }
  ],
  "code": 400,
  "message": "contentDetails"
 }
} 
```

请求是：

```
Request

POST https://www.googleapis.com/youtube/v3/activities?part=snippet&key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer ya29.AHES6ZQUI8Gn7j93QZBmmdlDe7Ei-iqYseYAKAxyf3qTOHHwDHb-dA
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "contentDetails": {
  "like": {
   "resourceId": {
    "videoId": "video-id",
    "kind": "youtube#video"
   }
  }
 }
} 
```

该部分是=片段

我正在关注这些文档：[https ://developers.google.com/youtube/v3/docs/activities/insert](https://developers.google.com/youtube/v3/docs/activities/insert)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:39:58.437

答案已经在评论中，但要稍微提升一点：[YouTube API v3: Like a video in Python](https://stackoverflow.com/questions/13460699/youtube-api-v3-liking-a-video-in-python)有更多关于喜欢视频的信息，尽管 Python 中有示例。

重要的是，喜欢视频是通过`playlistItems.insert()`电话完成的，而不是`activities.insert()`电话。这是一个常见的混淆来源，我已经要求我们的技术作家尝试在文档中澄清问题。

# ruby - 如何使设置差异对大小写不敏感？

> ID：13994295
> 
> 赞同：0
> 
> 时间：2012-12-21T17:05:22.120
> 
> 标签：ruby

我有一个类，其中数据存储为一个[集合](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html)，我希望能够比较该类的对象，以便元素的字母大小写无关紧要。例如，如果集合包含字符串元素，则`"a"`和应该没有区别`"A"`。

为此，我尝试将`eql?`set 成员的方法定义为不区分大小写，但这对Set 中的方法[`-`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html#method-i-2D)（别名）没有影响。`difference`那么，我应该如何对`-`大小写不敏感呢？

下面的代码说明了这个问题：

```
require 'set'

class SomeSet
  include Enumerable

  def initialize; @elements = Set.new; end

  def add(o)
    @elements.add(o)
    self
  end

  def each(&block)              # To enable +Enumerable+
    @elements.each(&block)
  end

  def difference(compared_list)
    @elements - compared_list
  end
end

class Element
  attr_reader :element

  def initialize(element); @element = element; end

  # This seems to have no effect on +difference+
  def eql?(other_element)
    element.casecmp(other_element.element) == 0
  end
end

set1 = SomeSet.new
set2 = SomeSet.new
set1.add("a")
set2.add("A")

# The following turns out false but I want it to turn out true as case
# should not matter.
puts set1.difference(set2).empty? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:24:44.020

好的，首先，您只是存储来自 的字符串`SomeSet#add`，您需要存储 的实例`Element`，如下所示：

```
def add(o)
  @elements.add(Element.new(o))
  self
end 
```

你需要在你的类中实现一个`hash`方法。`Element`

您可以转换`Element#@element`为小写，并传递其哈希值。

```
def hash
  element.downcase.hash
end 
```

完整代码和演示：[http ://codepad.org/PffThml2](http://codepad.org/PffThml2)

编辑：对于我的 O(n) 插入评论，上面：

插入是 O(1)。据我所见，`eql?`仅与`hash`2 个元素一起使用是相同的。正如我们在`hash`元素的小写版本上所做的那样，它将被很好地分布，并且`eql?`不应该被调用太多（如果它被调用的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:16:37.327

从文档：

> 每对元素的相等性根据 Object#eql? 和 Object#hash，因为 Set 使用 Hash 作为存储。

也许您还需要实现 Object#hash。

```
require 'set'

class String2
  attr_reader :value

  def initialize v
    @value = v
  end

  def eql? v
    value.casecmp(v.value) == 0
  end

  def hash
    value.downcase.hash
  end
end

set1 = Set.new
set2 = Set.new
set1.add(String2.new "a")
set2.add(String2.new "A")

puts set1.difference(set2).empty? 
```

# css - CSS 样式链接

> ID：13994300
> 
> 赞同：0
> 
> 时间：2012-12-21T17:05:54.377
> 
> 标签：css, animation, html

是否可以对我的所有三个 div 使用一种样式以使其简短而简单，并保持动画正常工作？任何帮助深表感谢。

[jsFiddle](http://www.jsfiddle.net/db5uS/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T17:08:17.003

你的意思是将css应用于所有三个元素？如果是这样，您只需要这样做：

```
.a, .b, .c {
  width: 15px;
  height: 15px;
  background: #dbdbdb;
  border-radius: 50px;
  display: inline-block;
}
.a {animation-delay: 1s;
  animation: fade 1s forwards;}
.b {animation-delay: 2s;
  animation: fade 2s forwards;}
.c {animation-delay: 3s;
  animation: fade 3s forwards;}
@keyframes fade {
0%   {opacity:0;}
50%   {opacity:1;}
100% {opacity:0;}}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:14:38.527

可能是这样的[jsFiddle](http://jsfiddle.net/db5uS/6/)：

```
.a {
  animation-delay: 1s;
  animation: fade 1s forwards;}

.b {
  animation-delay: 2s;
  animation: fade 2s forwards;}

.c {
  animation-delay: 3s;
  animation: fade 3s forwards;}

.d{
  width: 15px;
  height: 15px;
  background: #dbdbdb;
  border-radius: 50px;
  display: inline-block;}

@keyframes fade {
0%   {opacity:0;}
50%   {opacity:1;}
100% {opacity:0;}}​ 
```

然后您的 HTML 将如下所示：

```
<div class="a d"></div>
<div class="b d"></div>
<div class="c d"></div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:15:02.927

我对此表示怀疑，因为你的动画属性都是不同的，所以它们需要不同的类。但是您当然可以通过将所有公共属性保留在自己的类中来缩短 CSS，如下所示：

```
.x {
  width: 15px;
  height: 15px;
  background: #dbdbdb;
  border-radius: 50px;
  display: inline-block;
}

.a {

  animation-delay: 1s;
  animation: fade 1s forwards;
}

.b {
  animation-delay: 2s;
  animation: fade 2s forwards;
}

.c {
  animation-delay: 3s;
  animation: fade 3s forwards;
}

@keyframes fade {
0%   {opacity:0;}
50%   {opacity:1;}
100% {opacity:0;}} 
```

像这样使用：

```
<div class="x a"></div>
<div class="x b"></div>
<div class="x c"></div> 
```

# string - 将字符串转换为列表

> ID：13994301
> 
> 赞同：0
> 
> 时间：2012-12-21T17:05:54.627
> 
> 标签：string, list

我有以下字符串：

```
['####\n# .#\n#  ###\n#*@  #\n#  $ #\n#  ###\n####'] 
```

我想将它转换为带有子列表的列表，其中每个子列表都包含 之前的文本`"\n"`，这意味着我试图让它看起来像这样：

```
['#### ,'# .#, '#  ###', '#*@  #', '#  $ #', '#  ###', '####'] 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:08:13.553

大多数语言（我猜这是 Python）都有一个[`split`](http://docs.python.org/2/library/stdtypes.html#str.split)用于此目的的函数：

```
result = yourString.split("\n"); 
```

请注意，这`['###...###']`不是字符串，而是*包含字符串的列表*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:12:08.687

在 perl 中：

```
my $your_string = "['####\n# .#\n# ###\n#@ #\n# $ #\n# ###\n####']";
my @list = split (/\\n/, $your_string);

print join (', ', @list) . "\n"; 
```

# wpf - 模板未加载

> ID：13994304
> 
> 赞同：0
> 
> 时间：2012-12-21T17:05:59.870
> 
> 标签：wpf, xaml, templates, styles

我有一个 WPF 模板，但在启动应用程序时它没有显示。WPF 中没有错误，任何地方都没有。只是没有使用模板。如何找出问题所在？

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="MoveThumb.xaml"/>
    <ResourceDictionary Source="ResizeDecorator.xaml"/>
    <ResourceDictionary Source="RotateDecorator.xaml"/>
</ResourceDictionary.MergedDictionaries>

<!-- ContentControl style to move, resize and rotate items -->
<Style x:Key="DesignerItemStyle" TargetType="ContentControl">
    <Setter Property="MinHeight" Value="50"/>
    <Setter Property="MinWidth" Value="50"/>
    <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ContentControl">
                <Grid DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                    <Control Name="RotateDecorator"
                 Template="{StaticResource RotateDecoratorTemplate}"
                 Visibility="Collapsed"/>
                    <s:MoveThumb Template="{StaticResource MoveThumbTemplate}"
                     Cursor="SizeAll"/>
                    <Control x:Name="ResizeDecorator"
                 Template="{StaticResource ResizeDecoratorTemplate}"
                 Visibility="Collapsed"/>
                    <ContentPresenter Content="{TemplateBinding ContentControl.Content}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="Selector.IsSelected" Value="True">
                        <Setter TargetName="ResizeDecorator" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="RotateDecorator" Property="Visibility" Value="Visible"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

```
<!-- RotateDecorator Template -->
<ControlTemplate x:Key="RotateDecoratorTemplate" TargetType="Control">
    <Grid>
        <my:RotateThumb Margin="-18,-18,0,0" VerticalAlignment="Top" HorizontalAlignment="Left"/>
        <my:RotateThumb Margin="0,-18,-18,0" VerticalAlignment="Top" HorizontalAlignment="Right">
            <my:RotateThumb.RenderTransform>
                <RotateTransform Angle="90" />
            </my:RotateThumb.RenderTransform>
        </my:RotateThumb>
        <my:RotateThumb Margin="0,0,-18,-18" VerticalAlignment="Bottom" HorizontalAlignment="Right">
            <my:RotateThumb.RenderTransform>
                <RotateTransform Angle="180" />
            </my:RotateThumb.RenderTransform>
        </my:RotateThumb>
        <my:RotateThumb Margin="-18,0,0,-18" VerticalAlignment="Bottom" HorizontalAlignment="Left">
            <my:RotateThumb.RenderTransform>
                <RotateTransform Angle="270" />
            </my:RotateThumb.RenderTransform>
        </my:RotateThumb>
    </Grid>
</ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:13:32.410

尝试重新**排序字典和模板**，看看它是否有效，

都是关于**ORDER**的，因为即使您没有针对相同的 UIElement ，最后一个字典有时也会**覆盖他以前的字典（模板）！**

# google-docs - 从谷歌表单的电子表格中获取数据并将其粘贴到另一个谷歌电子表格

> ID：13994306
> 
> 赞同：1
> 
> 时间：2012-12-21T17:06:09.497
> 
> 标签：google-docs

我创建了一个可以计算距离的 Google 表格。在表格的电子表格中，我使用公式来添加所有输入的距离。我需要从“总距离”单元格中获取数据并将其应用到另一个 Google 电子表格中。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T19:46:39.940

是的（例如[这里](https://webapps.stackexchange.com/questions/43782/importrange-formula-query-to-query-data-in-another-file)提到的）。

假设您的电子表格的键（来自表格）是：`1TvTfgJaH-KpXZm-yfR2vcArcftrmhT8Z-CrIAA40C-w`
您的工作表名称有：`Form Responses 1`并且
包含“总距离”的单元格有：`B6`例如：

```
=importrange("1TvTfgJaH-KpXZm-yfR2vcArcftrmhT8Z-CrIAA40C-w","Form Responses 1!B6") 
```

应提示您允许连接。

# ssis - ssis 2008，在表达式生成器上将对象转换为字符串

> ID：13994310
> 
> 赞同：0
> 
> 时间：2012-12-21T17:06:37.940
> 
> 标签：ssis

我将 SSIS 用于 Sql server 2008。

我在 Expression 属性的字符串变量上声明了一个路径：

```
"C:\\data\\Documents\\dt\\local." + @[User::Record] + ".xlsx" 
```

User::Record 是 Object 类型。

我想知道如何将它从 Object 转换为 String 以便我可以在路径上分配它。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:46:49.667

`Expression`被评估为`compile time`。因此变量 User::Record 被初始化为`System.Object type`。它不包含任何值 。

不要将其声明为表达式，而是尝试使用 a`script task`将路径分配给字符串变量。

```
Dts.Variables["User::Path"].Value =
"C:\\data\\Documents\\dt\\local." + Dts.Variables["User::Record"].Value.ToString() + ".xlsx" 
```

我假设在将路径分配给字符串变量之前，您在 User::Record variable 中存储了一些值。否则，即使在上述脚本任务代码之后，您的路径变量也将保存该值

```
C:\data\Documents\dt\local.System.Object.xlsx 
```

# xcode - 如何从不同的 UITableViewController 更改另一个 UITableViewController 的值，所有内容都在同一个视图上？

> ID：13994317
> 
> 赞同：0
> 
> 时间：2012-12-21T17:06:57.503
> 
> 标签：xcode, uiview, uitableview

在一个视图中，我有这个结构 vista1 UIView -> tabla1 UITableView -> tabla1_controller UITableViewController vista2 UIView -> tabla2 UITableView -> tabla2_controller UITableViewController

```
I use views because depending of the orientation I move around the views.

Everything works fine, each tableviewcontroller gets data from sqlite and show the custom cells.

I want to add a behavior, when the user selects a cell in the second table, I want to change the content of the first table.

The first tableView gets information from a NSArray, how do I change 
So how can I make this happen? 
```

这是第二个 tableviewcontroller

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

        /* I dunno how to reference the nsarray of the first table here */
        first_table_array = ....

        [tabla1 reloadData];        
    } 
```

在这种情况下，有两个 tableviewcontroller，但真正的问题是，如何从一个 viewcontroller 执行另一个 tableviewcontroller 的函数/更改变量？

例如，在 tabla2_controller (UITableViewController) 中，当用户单击 table2 的一行时，如果两个表都在各自的视图中并且两个视图同时显示，我该如何执行 [tabla1_controller reload]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:23:16.137

在 tabla2_controller 中，创建一个如下所示的变量

在 .h 文件中

```
@property (nonatomic, retain) UITableViewController *table1Ref; 
```

在 .m 文件中

```
@synthesize table1Ref; 
```

然后，当您创建 tabla2_controller 时，将 tabla1_controller 设置为此变量的值，如下所示。

```
tabla2_controller *t2c = [[UITableViewController alloc] init];
t2c.table1Ref = t1c; //t1c is tabla1_controller 
```

现在，在 tabla2_controller 的 didSelectRowAtIndexPath 中，执行以下操作。

```
tabla1_controller *t1c = self.table1Ref;
[t1c.tableView reloadData]; 
```

# fortran - fortran 77 in 95 程序的接口

> ID：13994319
> 
> 赞同：-1
> 
> 时间：2012-12-21T17:07:14.507
> 
> 标签：fortran, implementation, fortran77, fortran95

我对fortran很陌生，只用fortran 95和2003编写。现在我有一个主要用95编写的程序，但它完全是fortran 77语法，还包含一些77个函数。

现在我需要另一个程序中的功能，但不想重写整个程序。我的想法是更换

```
program my_prog 
```

和

```
module my_mod
subroutine my_prog() 
```

替换似乎不起作用。编译器指出，语法来自

```
subroutine my_prog() 
```

是错的。有没有人对该主题有一些经验，或者知道是否可以在不重写代码的情况下实现代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:51:32.710

模块子例程 sub 的正确语法是

```
module name_of_the_module

  use whatever

  implicit none

  !some variables and interfaces

  contains

    subroutine sub
      !here is the code of your subroutine
    end subroutine sub

end module name_of_the_module 
```

否则，应注意，您可以从较新的代码调用 FORTRAN 77 中的代码。它（除了一些例外）仍然是有效的 Fortran 2008 代码，只是采用了旧样式。唯一的例外是您不能在一个源文件中混合免费和固定源格式。这也可能是你的问题。

最好的办法是使旧函数和子例程也符合免费源格式（请参阅[此处](http://fortranwiki.org/fortran/show/Continuation+lines)的“交叉格式” ）并将它们放入我上面显示的模块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T15:36:54.483

仅将子程序打包到模块中可能在某些情况下有效，但在其他情况下可能无效。Fortran 77 的某些功能现在已被宣布过时。你有几个选择。

1.  **编译器开关：** 许多编译器提供编译时开关来编译遗留代码。这取决于编译器到编译器，并且将来可能会改变

2.  **使用工具：** 人们编写的工具可以让您将 f77 代码转换为 f90/95。为此，请参阅： http: [//www.atmos.illinois.edu/courses/atms391-sp11/Fortran-converters.html](http://www.atmos.illinois.edu/courses/atms391-sp11/Fortran-converters.html)

3.  **手动更新源代码：** 有些人在 do-loops 中使用了浮点变量。使用上面讨论的自动工具可能很难做到这一点。在存在像 (goto) 这样的遗留语句的情况下，您可能必须手动工作。为此，请参阅以下链接：

[http://www.cisl.ucar.edu/zine/96/fall/articles/3.f90.conversion.html](http://www.cisl.ucar.edu/zine/96/fall/articles/3.f90.conversion.html)

[http://iprc.soest.hawaii.edu/users/furue/improve-fortran.html](http://iprc.soest.hawaii.edu/users/furue/improve-fortran.html)

从长远来看，您需要手动逐行检查代码并自己进行更改。这是最便携的解决方案。

# javascript - 使用表单插入 PhoneGap 数据库

> ID：13994322
> 
> 赞同：0
> 
> 时间：2012-12-21T17:07:27.127
> 
> 标签：javascript, html, sql, cordova, appmobi

我想制作一些表单，这些表单将保存到 PhoneGap 数据库中（那个在 index.html 中声明）。请注意，我要链接的代码不是 index.html，而是另一个。我尝试将这些表单的值设为变量，然后使用 PhoneGaps javascript 用这些变量填充数据库。

[链接到我的代码](http://pastebin.com/CZcgpuc7)

我也想知道这一点： * 如果我构建了这个应用程序，我是否能够存储这些数据并能够重新启动我的手机并且它仍然存在？或者如果我这样做，数据会丢失吗？* 我是否必须在每个 HTML 站点上定义一个数据库，或者我能否以某种方式将当前 HTML 文件中的这些数据“插入”到 index.html 中声明的数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:26:04.113

让我们尝试解决您的问题：

手机上的数据 [有多持久：Android 和 iOS 上的本地存储有多持久？](https://stackoverflow.com/questions/7750857/how-permanent-is-local-storage-on-android-and-ios)

## Edit.html 与 index.html

您是否尝试过使用这段代码调用数据库：

```
db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000); 
```

Ofc 填写您自己创建原始数据库时使用的名称。- Opendatabase 要么创建数据库，要么打开它。

# drupal-6 - 密码重置链接在drupal 6中不起作用

> ID：13994325
> 
> 赞同：1
> 
> 时间：2012-12-21T17:07:50.607
> 
> 标签：drupal-6, password-recovery

当用户获得这样的用户密码重置链接时，密码重置像这样[http://digitalsuite.unitedway.org/user/reset/3/1356108765/5ff18af572734c897f4d7a2946983a87](http://digitalsuite.unitedway.org/user/reset/3/1356108765/5ff18af572734c897f4d7a2946983a87)

它不会自动让他们登录，他们没有收到任何消息，只是立即进入登录屏幕。这是在哪里编码的，所以我可以调试正在发生的事情？谢谢戴安娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:14:42.687

当试图找出在 Drupal 中从哪里开始调试时，通常有助于查看定义相关页面的 hook_menu 实现。Hook_menu "...使模块能够注册路径，以定义 URL 请求的处理方式。"

在这种情况下，用户模块的[user_menu 函数](http://api.drupal.org/api/drupal/developer!hooks!core.php/function/hook_menu/6)[在 user.module 文件](http://drupalcode.org/project/drupal.git/blob/01567a63437da3a09afee312ce5b16a5acdeaf16:/core/modules/user/user.module#l1092)中定义。

```
$items['user/reset/%/%/%'] = array(
  'title' => 'Reset password',
  'page callback' => 'drupal_get_form',
  'page arguments' => array('user_pass_reset', 2, 3, 4),
  'access callback' => TRUE,
  'type' => MENU_CALLBACK,
  'file' => 'user.pages.inc',
); 
```

请注意，“页面参数”指向位于[user.pages.inc 文件](http://drupalcode.org/project/drupal.git/blob/01567a63437da3a09afee312ce5b16a5acdeaf16:/core/modules/user/user.pages.inc#l98)中的“user_pass_reset” 。那将是开始调试的好地方。

# azure - Microsoft.Practices.EnterpriseLibrary.WindowsAzure.TransientFaultHandling RetryPolicy 和 Microsoft.ServiceBus.dll

> ID：13994328
> 
> 赞同：1
> 
> 时间：2012-12-21T17:07:54.553
> 
> 标签：azure, cloud, servicebus

希望这是一个简单的，我正在做一些愚蠢的事情。我在 VS 2012 中的 .Net 4.5 上有一个 Web 应用程序，它在某些时候调用一个方法，该方法又向 Azure 中的服务总线发送消息。然后在本地运行的服务检索此消息并对其进行处理。伟大的。

但是，我一直收到异常（VS 设置为在未处理时中断），这在 Microsoft.ServiceBus.dll 版本 1.6.0.0 上给出了熟悉的文件加载异常，机器上的版本是 1.7.xx 或 1.8.xx 我可以成功发送和接收消息，所以我不确定这会产生什么影响！但它仅在通过 Microsoft.Practices.EnterpriseLibrary.WindowsAzure.TransientFaultHandling 命名空间中的 ExecuteAction 方法通过非常有用的 RetryPolicy 类调用服务总线调用时发生。我只能假设这个组件是针对 1.6.0.0 构建的，但我似乎拥有最新版本。

有没有其他人遇到过这个问题以及如何最好地解决它？运行两个版本的 Microsoft.ServiceBus 是否明智？IE。1.6.0.0 用于云服务，1.7/1.8.xx 用于 Web 应用程序？我在哪里可以获得 1.6.0.0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:41:22.787

Windows Azure SDK 1.6 包含 Microsoft.ServiceBus.dll 1.6（即 2011 年 11 月发布的版本）。你可以[从这里得到它](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/14/windows-azure-sdk-1-6-build-1-6-41103-1601-installation-walkthrough.aspx)

现在，您确定 EnterpriseLibrary 正在寻找该特定版本吗？过去（我不记得确切的时间），在安装 SDK 时将 SB 程序集添加到 GAC，因此库可能期望 SB 程序集被 GACced。在使用超过一年的旧版本的服务总线 dll 之前，您可能希望使用融合日志来验证这一点。

# javascript - 透明度.js 嵌套的普通值

> ID：13994331
> 
> 赞同：1
> 
> 时间：2012-12-21T17:07:58.130
> 
> 标签：javascript, coffeescript, template-engine, transparency.js

我想知道为什么以下不起作用：

咖啡脚本：

```
post =
  title:    'Hello World',
  post:     'Hi there it is me',
  comments: [
    name: 'John',
    text: 'That rules'
  ,
    name: 'Arnold',
    text: 'Great post!',
    tags: ['a', 'b', 'c']
  ]

directives =
  tags:
    tag: 
      text: (target) -> this.value

$('.container').render post, directives 
```

模板：

```
<div class="container">
  <h1 class="title"></h1>
  <p class="post"></p>
  <div class="comments">
    <div class="comment">
      <span class="name"></span>
      <span class="text"></span>
      <div class="tags">
        <span class='tag'></span>
      </div>
    </div>
  </div>
</div> 
```

它不会渲染嵌套的普通标签，也不会为它们执行指令函数

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T08:11:41.340

这是正确的指令集：

```
directives =
  comments:
    tags:
      tag:
        text: (target) -> this.value 
```

指令不会像普通值那样通过跳过未提及的顶层来级联，因此您必须包含该`comments`层。

# ios - 我是否需要为每个 iOS 报亭问题创建单独的 IAP？

> ID：13994334
> 
> 赞同：0
> 
> 时间：2012-12-21T17:08:10.967
> 
> 标签：ios, app-store-connect, in-app-purchase, newsstand-kit

我需要支持在 iOS 报亭应用程序中购买单期杂志（而不仅仅是免费或付费订阅）。

我是否需要在 iTunesConnect 中为每个问题手动创建一个新的 IAP，或者我可以以某种方式自动执行此操作（就像报亭元数据的[atom 提要](https://itunesconnect.apple.com/docs/NewsstandAtomFeedSpecification.pdf)，如问题封面 URL、标题、摘要等）？

后续问题：如果它不是报亭应用程序，那会让事情变得更容易/更糟（以支持购买单期）？其他“普通”应用如何处理频繁添加的新付费内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:36:12.760

为了回答我自己的问题，总结一下 Apple 开发者论坛上的一些主题：

*   是的，如果您想出售单个问题，您必须为每个问题设置一个（非消耗性）IAP。

*   去年秋天，iTunesConnect 中添加了“Transporter”，以允许从命令行上传和管理 IAP。请参阅[WWDC12 幻灯片](http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_305__whats_new_in_itunes_connect_for_app_developers.pdf)。您可以在 ITC 的“管理您的应用程序”页面底部找到用户指南和 XML 规范。

# php - PHP Function Preg Match 拉第二张图片而不是第一张图片

> ID：13994336
> 
> 赞同：2
> 
> 时间：2012-12-21T17:08:14.693
> 
> 标签：php, arrays, preg-match

我的php代码中的函数：

```
private function get_first_images($html){
    preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $html, $matches);
    if(isset($matches[1]) && isset($matches[1][0]) && !empty($matches[1][0])){
        return $matches[1][0];
    }else{
        return false;
    }
} 
```

正在拉第二张图片而不是第一张。这是它正在查看的 xml 示例：

```
<![CDATA[
<a href="http://mls-photos.diversesolutions.com/355/1246202/0-full.jpg?15054836" target="_blank"><img src="http://mls-photos.diversesolutions.com/355/1246202/0-medium.jpg?15054836" alt="Property Photo" /></a><br /><br /><img src="http://cdn1.diverse-cdn.com/idx-v2/mls-icons/rein.png" alt="Mls Icon" /><br /><br /><b>3 beds, 2 full, 1 part baths</b><br />Home size: 1,700 sq ft<br />Lot Size: 0 sq ft<br />Property Type: Residential, Residential / Detached<br />MLS Number: 1246202<br />Community: North Norfolk<br />Tract: East Beach<br /><br /><br />Beautiful New Home With Wrap Around Porch, 10 Ft. Ceilings On First Floor, Hardwood Floors, Custom Cabinets, Granite, One Block To The Beach. Real Cedar Shake Exterior. Corner Lot. Carriage House Unfinished. <br /><br />Listed with Keller Williams Realty<br /><hr noshade="noshade" /><br /><b>Brought to you by Virginia Beach Real Estate Team, Keller Williams Realty. Call me today at 757-215-4246, or visit my website at <a href="http://www.vbret.com" target="_blank">www.vbret.com</a>!</b><br /><br /><p>Users of this Site are granted a limited, nonexclusive license to use the Site and its listing content for personal and noncommercial use only.
 </p>
 <p>
 Real Estate Information Network, Inc. (REIN) updates its listings on a daily basis. Data last updated: 12/21/12 7:55 AM PST. Some properties which appear for sale on this website may have subsequently sold or may no longer be available.
 </p>
 <p>
 All Information Deemed Reliable But Not Guaranteed.
 </p>
 <p>
 REIN's listings are based upon data submitted by its Broker Members, and REIN therefore makes no representation or warranty regarding the accuracy of the data. All users of REIN's listings database should confirm the accuracy of the listing information directly with the listing agent. This data and information is protected under Federal Copyright laws. Federal law prohibits, among other acts, the unauthorized copying or alteration of, or preparation of derivative works from, all or any part of copyrighted materials, including certain compilations of data and information. COPYRIGHT VIOLATORS MAYBE SUBJECT TO SEVERE FINES AND PENALTIES UNDER FEDERAL LAW.
 </p><hr noshade="noshade" />
]]> 
```

如何修复它以使其拉出第一个图像而不是第二个图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:11:50.700

您需要使 + ungreedy ：

```
private function get_first_images($html){
    preg_match_all('/<img.+?src=[\'"]([^\'"]+)[\'"].*>/i', $html, $matches);
    if(isset($matches[1]) && isset($matches[1][0]) && !empty($matches[1][0])){
        return $matches[1][0];
    }else{
        return false;
    }
} 
```

# c++ - C++：授予成员函数友谊前向声明？

> ID：13994343
> 
> 赞同：-1
> 
> 时间：2012-12-21T17:08:27.203
> 
> 标签：c++, friend, access-control, forward-declaration

我在 C++ 中遇到了友谊问题。我有两个类，A 和 B，其中 B 的定义使用了 A 的某个实例。我还想让 B 中的成员函数访问 A 中的私有数据成员，从而授予它友谊。但现在的难题是，对于 A 类定义中的友谊声明，B 类尚未定义，因此 IDE（VS 2010）不知道该怎么做。

```
#include <iostream>
using namespace std;

class B;

class A {
    friend int B::fun(A A);//B as yet undefined here
    int a;
};

class B {
    int b;
public:
    int fun(A inst);
};

int B::fun(A A)
{
    int N = A.a + b;//this throws up an error, since a is not accessible
    return N;
} 
```

我看过[为什么这个朋友功能不能访问班级的私人成员？](https://stackoverflow.com/questions/2500670/why-this-friend-function-cant-access-a-private-member-of-the-class)但是那里使用前向声明的建议`class B;`似乎不起作用。我怎样才能直接解决这个问题（即不求助于交`class B`朋友`class A`，或者让 B 从 A 继承或引入一个`getA()`函数）？我还查看[了从不同的头文件中定义的类中为函数授予友谊](https://stackoverflow.com/questions/11813568/granting-friendship-to-a-function-from-a-class-defined-in-a-different-header)，但我的类在一个 .cpp 文件中（最好保持这种方式），而不是在单独的头文件中，我这样做了反正也不想给整个班级的友谊。同时，[C++前向声明，友元函数问题](https://stackoverflow.com/questions/3183710/c-forward-declaration-friend-function-problem)提供了一个稍微简单的问题的答案——我不能仅仅改变定义的顺序。同时， http: [//msdn.microsoft.com/en-us/library/ahhw8bzz.aspx](http://msdn.microsoft.com/en-us/library/ahhw8bzz.aspx)提供了另一个类似的示例，但是该示例无法在我的计算机上运行，​​所以我需要检查一些编译器标志吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:11:03.993

换来换去？

```
class A;

class B
{
public:
int fun(A inst);
private:
int b;
};

class A
{
friend int B::fun(A A);
private:
int a;
};

int B::fun(A A)
{   int N = A.a + b;
return N;
} 
```

# ruby-on-rails - Rails 3 联系表

> ID：13994346
> 
> 赞同：0
> 
> 时间：2012-12-21T17:08:31.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我最近关注了一个关于如何在 Rails 3 中为我正在构建的站点添加联系表单的教程。当我创建该页面并尝试实现表单时，我已经有了一个联系人控制器和视图。当它说它是时，我开始意识到也许教程不在rails 3中。我不断收到一个我似乎无法弄清楚的错误（Notifications:Class 的未定义方法`deliver_contact'）。我尝试从教程中更改一些内容，但没有任何效果。有什么指导可以帮助我吗？我正在考虑删除我所做的事情并使用联系表格重新开始，但想检查一下是否有人有想法。谢谢！该网站的链接如下，我完全按照那里的内容进行操作。

[http://metatroid.com/article/How%20To:%20Contact%20Form%20in%20Rails](http://metatroid.com/article/How%20To:%20Contact%20Form%20in%20Rails)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:16:41.277

采用

```
Notifications.contact(params[:email]).deliver 
```

[更多信息](http://guides.rubyonrails.org/action_mailer_basics.html)

# ios - iOS - NSLocalizedString 只返回密钥字符串

> ID：13994348
> 
> 赞同：8
> 
> 时间：2012-12-21T17:08:32.027
> 
> 标签：ios, objective-c, localization, nslocalizedstring

我在调试我的`NSLocalizedString`实现时遇到了一些麻烦。应该很简单，但是无论我做什么，该函数都只返回`KEY`字符串。

我正在使用 XCode 4.5 和 iOS6，所以我：

1.  添加了一个名为`File.strings`.
2.  在我的项目设置中，我添加了英语和西班牙语作为语言设置。
3.  单击文件检查器中的“本地化”，并确保选择了英语和西班牙语选项，并且选择了我的目标的目标成员资格。
4.  添加`"KEY" = "TestEnglish";`到我的英语`File.strings`
5.  添加`"KEY" = "TestSpanish";`到我的西班牙语中`File.strings`
6.  添加`NSLog(@"Localization: %@\n", NSLocalizedString(@"KEY", nil));`到我的`.m`文件中。

当我运行应用程序时，该值`"KEY"`始终显示在`NSLog`.

为了更深入地了解这一点，我也尝试了这个：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
NSString *str = [[NSBundle bundleWithPath:path] localizedStringForKey:@"KEY" value:@"" table:nil];
NSLog(@"Localization: %@\n", str); 
```

`"KEY`并且仍然打印了值" ，但是，`path`它是一个有效的路径。

有谁知道如何调试这个？我觉得我已经阅读了所有 SO 问题/答案，但没有任何建议有帮助。

我意识到当它无法匹配键时`NSLocalizedString`返回`KEY`字符串，但我不知道如何调试我的应用程序可能与键不匹配的原因。

我还删除/清理了应用程序大约十几次。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T17:30:56.273

如果您指定`table:nil`，`NSBundle`则将尝试从默认表（ 中的表`SOMELANG.lproj/Localizable.strings`）中获取本地化。如果您在其他地方进行了本地化，则应使用`table:@"File"`（或`NSLocalizedStringFromTable()`以类似方式使用宏）显式指定表：

```
NSString *value = NSLocalizedStringFromTable(@"key", @"File", nil); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-07T19:48:04.910

将 InfoPlist.strings 文件重命名为 Localizable.strings（双击），然后您将获得该键的正确字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T13:47:35.913

在我的情况下，问题在于字符串的情况：“bla.bla.blabla.Book **S** lot”，而 Localizable.strings 将其定义为“bla.bla.blabla.Book **s** lot”

因此，请仔细检查密钥字符串的大小写是否正确。更好的是，复制粘贴。

# jquery - grails actionsubmit 绕过 jquery 验证

> ID：13994350
> 
> 赞同：0
> 
> 时间：2012-12-21T17:08:42.633
> 
> 标签：jquery, grails

我有这个取消按钮。如何绕过 Jquery 验证？

```
<g:actionSubmit value="Cancel" action="create"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:36:30.557

根据 jquery 文档，如果您不希望按钮触发验证，只需添加一个名为 cancel 的类。所以，它是 <g:actionSubmit value="Cancel" class="cancel"/>

# php - 了解准备好的语句 - PHP

> ID：13994363
> 
> 赞同：6
> 
> 时间：2012-12-21T17:09:57.977
> 
> 标签：php, mysql, sql, prepared-statement, sql-injection

我正在为一所大学的财政援助办公室做一个学校项目。该项目正在生产中，除了这里和那里的一些小调整外，大部分工作已经完成。我对寒假（现在）的主要关注是安全和尽我所能防止任何违规行为。人们告诉我要转向准备好的陈述。除了插入数据外，我在很大程度上理解它们。

我有两种形式：登录表单和学生登录表单。学生登录表单输入学生来办公室的原因。然后提交该表格，然后通过一个表格检索该数据，该表格向辅导员显示学生正在等待看到的内容。

我的问题是，虽然每个走进经济援助办公室的学生都有自己独特的问题（大部分时间），但现在让我感到困惑的是：

我是否需要提前考虑并预先进行插入查询，或者是否有办法进行“动态”查询，因为有一个学生评论框，并且它是完全独一无二的，所以我将如何创建一个查询？

```
<?php
define('DB_Name', 'dbtest');
define('DB_User', 'root');
define('DB_Password', 'testdbpass');
define('DB_Host', 'localhost');

$link = mysql_connect(DB_Host, DB_User, DB_Password);

if (!$link) {
  die ('Could Not Connect: ' . mysql_error ());
}

$db_selected = mysql_select_db(DB_Name, $link);

if (!db_selected) {
  die('Can Not Use ' . DB_name . ': ' . mysql_error());
}

$value1 = $_POST ['anum'];
$value2 = $_POST ['first'];
$value3 = $_POST ['last'];
$value4 = $_POST ['why'];
$value5 = $_POST ['comments'];

$sql = "INSERT INTO `dbfinaid` (anum, first, last, why, comments) VALUES ('$value1', '$value2', '$value3', '$value4', '$value5')";

if (!mysql_query($sql)) {
  die('Error : ' . mysql_error());
}

mysql_close(); 
```

正如我被告知这样做的那样，我很容易受到 SQL 注入的影响。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T17:16:39.230

一旦你阅读了[PHP 的 PDO](http://php.net/manual/en/book.pdo.php)，你就可以像这样重写你的代码

```
$dbh = new PDO('mysql:host=localhost;dbname=dbtest', $user, $pass);

try {
  $query = $dbh->prepare("INSERT INTO `dbfinaid` (anum, first, last, why, comments) VALUES (:anum, :first, :last, :why, :comments)");

  $query->bindParam(':anum',     $_POST['anum'],     PDO::PARAM_INT);
  $query->bindParam(':first',    $_POST['first'],    PDO::PARAM_STR);
  $query->bindParam(':last',     $_POST['last'],     PDO::PARAM_STR);
  $query->bindParam(':why',      $_POST['why'],      PDO::PARAM_STR);
  $query->bindParam(':comments', $_POST['comments'], PDO::PARAM_STR);

  $query->execute();
}
catch (PDOException $e) {
  die("error occured:" . $e->getMessage());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T17:28:51.873

基于@maček 的答案，这是做同样事情的另一种方法。我觉得这更容易：

```
$dbh = new PDO('mysql:host=localhost;dbname=dbtest', $user, $pass);

try {
  $query = $dbh->prepare("INSERT INTO `dbfinaid` (anum, first, last, why, comments)
    VALUES (:anum, :first, :last, :why, :comments)");

  $params = array_intersect_key($_POST, array_flip(array('anum', 'first', 'last', 'why', 'comments')));
  $query->execute($params);
}
catch (PDOException $e) {
  error_log($e->getMessage());
  die("An error occurred, contact the site administrator.");
} 
```

我更喜欢将 SQL 错误输出到日志，并向用户显示不同的错误，不会将它们与代码细节混淆。

# javascript - 处理与 javascript 的任何用户交互

> ID：13994365
> 
> 赞同：0
> 
> 时间：2012-12-21T17:10:02.420
> 
> 标签：javascript, jquery, javascript-events, user-inactivity

> **可能的重复：**
> [优雅地检测 JavaScript 中的空闲时间](https://stackoverflow.com/questions/667555/detecting-idle-time-in-javascript-elegantly)

在我正在开发的 Web 应用程序中，在应用程序的每个页面上，当在设定的时间内没有任何事情发生时，页面应该会自动更改。我认为设置`window.location`将用于后半部分。

但是，当谈到检测到什么都没有发生时，我有点卡住了。我认为将所有键盘和鼠标事件绑定到单个处理程序可以做到这一点，但我想知道是否有更好的方法。有没有人这样做过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:23:07.597

[在 JavaScript 中优雅地检测空闲时间](https://stackoverflow.com/questions/667555/detecting-idle-time-in-javascript-elegantly)似乎错过了窗口上的**模糊**和**焦点**事件。基本方法如您所建议的那样，但我会仔细查看您正在绑定的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:27:36.970

不是在 Web 服务器上运行您的网站吗？Web 服务器（例如 Tomcat）可以检查会话是否超时。

在 tomcat 的 web.xml 中，您将添加或更改设置：

```
<session-config>
    <session-timeout>60</session-timeout>
 </session-config> 
```

如果会话超时，您可以重定向到另一个页面。

这是一个例子：

[https://stackoverflow.com/a/1027592/1916258](https://stackoverflow.com/a/1027592/1916258)

# php - 将 html 输入作为变量发送到 jquery，然后将其发送到 PHP

> ID：13994367
> 
> 赞同：0
> 
> 时间：2012-12-21T17:10:23.180
> 
> 标签：php, javascript, jquery

我是 jquery 的新手，我最近才发现它的惊人用途，所以请放轻松。

我想要做的是有一个 html 输入文本框，有一个变量立即解析输入，并通过 jquery 将包含输入文本框字符串的变量发送到 php switch 语句中。

从 jquery 到 php 的部分有效，但从将动态输入文本框传输到 jquery 的变量中的部分没有。

这是我所拥有的：

```
 <script src="jquery-1.8.3.js"></script>
   <input id="in" type="text" onchange="myFunction()" />
   <script>
 function myFunction()
 {
  var a = document.getElementById("in");
  }
  // i am trying to make this var a equal to what is typed in the input box so that it can go into the "jsvar: a" part //
  $(document).ready(function(){

  $("button").click(function(){

  $.post("runphp.php", {  jsvar: a}, function(jsvar){ alert(jsvar);
     });
     });
     });
     </script>
     <button>Run php switch statement with input</button> 
```

“runphp.php”文件只是一个有效的 switch 语句

```
 <?php 
   switch($_POST['jsvar'])
    {
     case "pass": 
      echo "<3"; break;
     case "other stuff":
     echo "</3"; break;
      default:
     echo ":("; 
     }
    ?> 
```

php 部分工作正常。但问题是，例如，如果我声明 var a = "pass" 而不是 onchange & myFunction(); 然后 jquery 部分完美地工作并将该值传递给 jquery 和 php switch 语句，但是当我尝试使 var a = 那个输入框时，它不会通过 php。我尝试制作一个 onchange 函数，但它仍然不会使 var a 等于我在输入框中键入的内容，以便它通过 jquery 传递到 php switch 语句中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:12:31.560

你不见了`.value`

```
var a = document.getElementById("in").value; 
```

**第二**

您正在使用 jquery，如下所示

```
var a = $("#in").val(); 
```

改变JS函数如下

```
$(document).ready(function(){

  $("button").click(function(){

  $.post("runphp.php", {  jsvar: $("#in").val()}, function(jsvar){ alert(jsvar);
     });
     });
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:13:23.103

您也可以使用 jquery 来选择值：

```
var a = $("#in").val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:16:43.027

jQuery 的一大好处是：

`var a = document.getElementById("in");`

变成

`$("#in")`你可以抓住价值`$("#in").val()`

# java - SQLite - Bukkit 插件中的奇数 NPE

> ID：13994371
> 
> 赞同：1
> 
> 时间：2012-12-21T17:10:34.677
> 
> 标签：java, sqlite, minecraft, bukkit

我在使用[PatPeter](http://forums.bukkit.org/members/patpeter.16497/)的[SQLite Bukkit 插件](http://forums.bukkit.org/threads/lib-sqlibrary-database-wrappers-for-all-database-engines.33849/)“SQLibrary”的基于 SQL 的 Bukkit 插件上遇到了一个相当大的错误。[我正在尝试使用来自另一个 SO 线程的第一个解决方案](https://stackoverflow.com/a/1814443/1621561)来确定玩家是否已经输入到数据库中。更多信息可以在[这个论坛主题](http://forums.bukkit.org/threads/registering-doors-to-players.117065/)中找到，但我也会在这里给出一个简短的概述。

这是堆栈跟踪：

![堆栈跟踪](../Images/5974d59b562215d2c8a27cfc8bee64e1.png)

这是可疑的方法，在堆栈跟踪中标记了行：

```
SQLite sqlite; // Set in plugin.onEnable(), which executes before anything
String QUERY_PLAYEREXISTS = "SELECT playername FROM table WHERE playername = ?";
...
public boolean exists(String name) throws SQLException {
    Connection connection = null;
    PreparedStatement statement = null;
    ResultSet resultSet = null;
    boolean exists = false;

    try {
        connection = sqlite.getConnection();
        statement = connection.prepareStatement(QUERY_PLAYEREXISTS); // 109
        statement.setString(1, name.toLowerCase());
        resultSet = statement.executeQuery();
        exists = resultSet.next();
    } finally {
        connection.close();
        statement.close();
        resultSet.close();
    }

    return exists;
} 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:07:23.573

我从未亲自使用过 SQLite，但我会说您可能错误配置了 SQLite 设置`onEnable()`，因为`sqlite.getConnection()`必须返回`null`。尝试在第 109 行之前添加以下代码：

```
if(connection == null) {
   throw new RuntimeException("SQLite connection is null!");
} 
```

如果您在下次运行时遇到 RuntimeException，您可能应该查看您的 SQLite 设置。

# java - Spring MVC 控制器是否查找 id 或名称？

> ID：13994377
> 
> 赞同：1
> 
> 时间：2012-12-21T17:11:12.483
> 
> 标签：java, jquery, spring-mvc, forms

如果我有以下 HTML 表单：

```
<form id="myForm" action="/myFormHandler" method="post">
    <input type="hidden" id="fizz-id" name="fizz" value="3" />
    <input type="hidden" id="buzz-id" name="buzz" value="6" />
</form> 
```

（注意没有提交按钮）。然后我有以下 jQuery：

```
$("#someButton").click(function() {
    $("#myForm").submit();
}); 
```

然后在服务器端（Spring MVC 控制器），是否将隐藏字段**id**或**名称**发送到处理程序方法？

```
@RequestMapping(value = "/myFormHandler.html", method = RequestMethod.POST)
public ModelAndView handleMyForm(
    @RequestParam("fizz-id") String fizz,
    @RequestParam("buzz-id") String buzz) {

    // Should I be looking for "fizz-id" or "fizz"???

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T17:12:37.047

它`name`是发送到服务器的属性，所以在这种情况下，您应该寻找“fizz”。

该`id`属性仅用于客户端交互，它不会在请求中发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:45:54.853

对于 post 请求，它是 HTML 元素的 name 属性，用于使用 request.getParameter 访问它。

# php - 从命令行运行 PHP 脚本

> ID：13994380
> 
> 赞同：3
> 
> 时间：2012-12-21T17:11:16.207
> 
> 标签：php, apache

因此，我正在与 PHP/MySQL 网站上的设计师合作，他希望有一些脚本可以让他的生活更轻松。他非常喜欢使用命令行来处理 git、SASS、node 等内容。我希望他能够像运行程序一样运行我的脚本，而不是通过 PHP 运行它。

所以代替这个：

```
php /path/to/file/create_module.php module_name 
```

我想这样做：

```
myscript create_module module_name 
```

是否可以在 Apache 服务器上使用 PHP 执行此操作？我知道我很可能不得不修改服务器以正确解释它，这很好。我什至不知道从哪里开始，在 Google 上找不到我需要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:14:42.790

您最好的选择是创建一个`alias`.

因此，别名`myscript`实际上会指向命令：`php /path/to/file/create_module.php`然后任何额外的参数都将按类型传递。

在命令行中，执行以下操作：

```
cd /etc/
nano bash.bashrc 
```

在文件的最底部，添加以下文本行：

```
alias "myscript=php /path/to/file/create_module.php" 
```

BASHRC 是在用户登录时运行的脚本，因此每次用户登录系统时都会重新创建别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:14:56.750

我不确定您`myscript`要做什么，但是要通过命令行运行 php 脚本而不指定 php 二进制文件，只需添加 aa `shebang`，例如

```
#!/bin/env php
<?php

// The above expects env is in /bin

$foo = "bar"; 
```

或者你喜欢的完整路径

```
#!/usr/bin/php 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:28:30.430

## 另一种选择：Shell 脚本包装器

`/bin`在您的 中或其他目录中创建一个新的文本文件，`PATH`将其命名为您希望如何调用脚本并为其提供此内容

```
#!/bin/bash
cd /path/to/your/php/scripts/folder
php script.php $* 
```

不要忘记

```
chmod a+x /path/to/bash/script 
```

这样做的好处是您的 PHP 脚本在正确的目录中运行，它可能期望其他资源是它所依赖的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:26:46.890

在 Linux 解决方案上：

```
/usr/bin/php /path/to/file.php 
```

在 Windows 解决方案上：

```
C:\Path\To\PHPExe C:\Path\To\phpfile.php 
```

# nginx - Nginx 一直显示 Welcome to Nginx

> ID：13994381
> 
> 赞同：1
> 
> 时间：2012-12-21T17:11:18.890
> 
> 标签：nginx, centos

我正在使用 Cent OS 6.1。我通过 ./configure 方法从源代码安装了 Nginx。我启动了 nginx 服务器`sudo nginx`，它可以提供 Welcome to Nginx 页面。

但是，当我编辑 /usr/local/nginx/conf/nginx.conf 文件时，我发现更改`...location / {... }...`块没有效果。

例如，改变

```
location / {
    root html;
    index index.htm index.html;
} 
```

至

```
location / {
    root xyz123; #which does not exist
    index index.htm index.html;
} 
```

应该给出 404。但它一直显示欢迎页面。

即使我删除了整个位置块，它仍然显示欢迎页面。但是，如果我将其更改`/usr/local/nginx/html`为`/usr/local/nginx/htmlxyz`显示 404。是否有另一个运行的 conf 文件覆盖了 nginx.conf？

ps我当时做过`sudo nginx -s stop`或`sudo nginx`但`sudo nginx -s reopen`没有帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-21T16:06:12.640

为什么要通过 EPEL 安装。我已经安装了 10 个 nginx 服务器，它正在使用 Node.js。

也许你会得到一些错误？显示完整的 ./config。

Centos 的 Nginx / Php / Mysql 示例：

[https://www.howtoforge.com/installing-nginx-with-php5-and-php-fpm-and-mysql-support-on-centos-6.4](https://www.howtoforge.com/installing-nginx-with-php5-and-php-fpm-and-mysql-support-on-centos-6.4)

默认 centos nginx html 路径：/usr/share/nginx/html/

# jquery - Jquery附加特定标签

> ID：13994382
> 
> 赞同：0
> 
> 时间：2012-12-21T17:11:20.393
> 
> 标签：jquery, html

我想要实现的是我想在 div 中附加所有内容，除了输入按钮。有没有办法我可以`not`在 Jquery 中使用一种方法？而且它只针对我的第一个 span 块。这是一个例子：

[http://jsfiddle.net/HjFPR/64/](http://jsfiddle.net/HjFPR/64/)

## jQuery

```
(function(){
    $('.select_listing').on('click',function () {
       $('.saved_listing').append($(this).parent().find('span').html());
    });
})();​ 
```

## HTML

```
<div class="boxes"> 
    <span> Matt </span>
    <span> 123 Fake Street </span>
    <input type="button" class="select_listing" value="add">
</div>

<div class="boxes"> 
    <span> James </span>
    <span> 123 Real Street </span>
    <input type="button" class="select_listing" value="add">
</div>

<div class="saved_listing"> </div>
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:15:40.493

我认为这可以工作：

```
(function(){

    $('.select_listing').on('click',function () { 
        $('.saved_listing').append($(this).parents(".boxes").find('span'));
    });

})();​ 
```

让我知道。

**编辑**

在这里小提琴：http: [//jsfiddle.net/9NBKN/](http://jsfiddle.net/9NBKN/)

它似乎在移动元素，你想要吗？或者你想要复制元素？

**编辑 2**

更新小提琴以复制而不是移动元素： http: [//jsfiddle.net/9NBKN/3/](http://jsfiddle.net/9NBKN/3/) （基本上我使用了“克隆”方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:19:59.270

这就是你想要的吗？

```
(function(){
    $('.select_listing').on('click',function () {
        // Create a copy of .boxes and append to .saved_listing
        var htmlContent = $(this).closest('.boxes').clone().appendTo('.saved_listing');
        // Remove input
        htmlContent.find('input').remove();
    });
})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:19:17.680

尝试这个：

[http://jsfiddle.net/HjFPR/66/](http://jsfiddle.net/HjFPR/66/)

```
(function() {

    $('.select_listing').on('click', function() {
        // Get the parent, and clone it!
        var pdiv = $(this).parents('.boxes').clone();

        // In the cloned parent, remove the button!
        pdiv.find("input.select_listing").remove();

        // Append to saved_listing the modified pdiv!
        pdiv.appendTo(".saved_listing");
    });

})();​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:32:50.093

只需`each()`遍历所有兄弟姐妹。

[http://jsfiddle.net/HjFPR/72/](http://jsfiddle.net/HjFPR/72/)

```
(function(){

    $('.select_listing').on('click',function () {

        $(this).siblings().each(function() {            
            $('.saved_listing').append($(this).html());
        });

    });

})();​ 
```

**编辑：** 这样，您就不会不必要地向上遍历以向下遍历。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T17:20:50.843

你的问题是这条线`.find('span').html()`

此语句仅获取在 上查询的第一个跨度的 html。在这种情况下你需要循环..

试试下面的方法..

```
(function() {

    $('.select_listing').on('click', function() {
        var $this = $(this);
        var $span = $this.closest('div.boxes').find('span');
        var html = '';
        $span.each(function() {
            html += $(this).html();
        });
        $('.saved_listing').append(html);
    });

})();​ 
```

**[检查小提琴](http://jsfiddle.net/HjFPR/69/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T17:22:06.960

你可以试试这个：

```
$(".boxes").children().not("input[type='button']") 
```

not() 函数将过滤掉选择器中的元素

# vb.net - 我什么时候可以访问表单的成员？

> ID：13994383
> 
> 赞同：0
> 
> 时间：2012-12-21T17:11:20.703
> 
> 标签：vb.net, winforms, events, controls, lifecycle

起初我试过这个：

```
Public Class frmWait

Public Sub New(ByVal uWindowText As String, ByVal uInfoText As String)

    Me.Text = uWindowText
    Me.lblInfoText.Text = uInfoText

End Sub

End Class 
```

但是当我像这样启动表格时

```
 Dim wait As New frmWait("blah", "blah")
            wait.Show() 
```

...它在这一行告诉我“NullReference Exception”：

```
Me.lblInfoText.Text = uInfoText 
```

设置表单的文本工作正常。好的，当我尝试设置文本时，我怀疑标签尚未创建。

然后我尝试了以下。我将文本存储在一个变量中，并希望在创建控件时设置它们。我认为“Form_Load”是一个很好的事件：

```
Public Class frmWait

Private m_sWindowText As String = ""
Private m_sInfoText As String = ""

Public Sub New(ByVal uWindowText As String, ByVal uInfoText As String)

    'we can not set the texts right away because lblInfo does not seem to exist yet

    m_sWindowText = uWindowText
    m_sInfoText = uInfoText

End Sub

Private Sub frmWait_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    Me.Text = m_sWindowText
    Me.lblInfoText.Text = m_sInfoText

End Sub

End Class 
```

但它抛出了同样的错误。Ehhhhh，我什么时候可以设置控件的文本？我犯了初学者的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:14:26.597

不要删除设计师所做的事情:) 它试图帮助你。当你创建

```
Public Sub New(...) 
```

在表格上，它会自动输入：

```
Public Sub New()

    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.

End Sub 
```

`InitializeComponent()`需要准备好表格以供您使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:14:11.503

看起来您缺少 InitializeComponents 调用：

```
Public Sub New(ByVal uWindowText As String, ByVal uInfoText As String)
  InitializeComponents()

  m_sWindowText = uWindowText
  m_sInfoText = uInfoText
End Sub 
```

该方法调用加载使用设计器创建的所有控件。没有那个电话，你的表格是空的。

# oracle - 如何在 pl/sql - Oracle 中交换行值？

> ID：13994387
> 
> 赞同：-2
> 
> 时间：2012-12-21T17:11:38.160
> 
> 标签：oracle, plsql

我在 PL/SQL 中有以下游标：

```
ID     Team     OrigRank     RegSesRank
7844   XXX      2            8
7854   YYY      1            1 
```

我需要能够编写某种 if-else 语句来交换`origRank`值，**如果**它`RegSesRank`大于另一个`RegSesRank`

即上面不会改变，因为`7844`有一个大于`RegSesRank`因此`7854`不`OrigrRank`应该改变，但是，如果有一个更大的，`OrigRank`必须交换。`7854``RegSesRank`

我希望我很清楚。如果您有任何问题，请告诉我，我非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:09:50.407

我不会用 PL/SQL 游标中的 if/else 语句解决这个问题，因为它引用查询的其他行。相反，如有必要，我会使用 an`UPDATE`将所有 origRank 更改为新值。

通常的方式是嵌套的`UPDATE (SELECT ... FROM mytable JOIN ... ) SET origrank = newrank WHERE origrank != newrank`。举个例子，我们需要知道@Joe W 和@Dour High Arch 指出的新排名是如何计算的。

# asp.net - 从 mssql 迁移到 mysql

> ID：13994388
> 
> 赞同：0
> 
> 时间：2012-12-21T17:11:38.123
> 
> 标签：asp.net, mysql, sql-server

> **可能重复：**
> [如何将 MSSQL 数据库迁移到 MySQL？](https://stackoverflow.com/questions/8019144/how-to-migrate-mssql-database-to-mysql)

我正在处理一个 asp.net 4.0 项目， **数据库：Mssql** 我使用 ignyter 软件生成了所有程序、数据访问层和业务层，现在我有一个要求，我被迫将同一个项目转换为mysql..

我有哪些选择？是否有任何工具可以将我所有的表和程序转换为 mysql，.. 以及我的业务和数据访问层..

任何意见或选项都会非常棒，我不想再重做我所有的工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:23:37.167

我确实建议为您的 MSSQL 数据库生成数据库脚本并在 MYSQL 中缓慢加载围栏。要在项目中使用 MySQL，asp.Net 使用此连接器： [MYSQL CON](http://dev.mysql.com/downloads/connector/net/)。

我使用它并且效果很好。我希望你工作。

# java - 在 Java 中缩放光标的适当方法是什么？

> ID：13994391
> 
> 赞同：0
> 
> 时间：2012-12-21T17:11:49.630
> 
> 标签：java, cursor

我有一段代码可以在 paintComponent() 方法中缩放 JPanel，如下所示：

```
g2d.translate(this.getWidth()/2, this.getHeight()/2);
g2d.scale(scale, scale);
g2d.translate(-this.getWidth()/2, -this.getHeight()/2); 
```

我希望这也可以缩放 JPanel 的光标，但事实并非如此。我尝试使用更大的图像创建自定义光标，但它会自动将其大小重新调整为 32x32。是否有一种与系统无关的方式来调整光标大小以匹配我的 JPanel 的比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:34:50.527

据我所知，您可能会“建议”不同大小的光标图像，但操作系统始终拥有最终决定权。请参阅[http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#getBestCursorSize(int](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#getBestCursorSize(int) , int)

# javascript - 使用 Selenium WebDriver 读取 JavaScript 变量

> ID：13994393
> 
> 赞同：67
> 
> 时间：2012-12-21T17:11:55.340
> 
> 标签：javascript, selenium, testng, selenium-webdriver

我正在使用 Selenium WebDriver (Java) 和 TestNG 在我创建的网站上进行一些测试。在这个网站中，我也有 JavaScript，并且在一些函数中，它返回值并通过`console.log()`.

**我想知道 Selenium WebDriver 是否有一种简单的方法可以访问这些 JavaScript 信息，以便我可以使用 TestNG 执行断言。**

我对 Selenium 很陌生，但我知道您可以执行以下操作：

```
WebDriver driver = new ChromeDriver();
driver.findElement(By.id("btn")).click(); 
```

那么有什么类似的方法可以`WebDriver`用来阅读网站上的 JavaScript 吗？

* * *

## 澄清

看起来人们正在假设我正在尝试通过 Selenium “执行” JavaScript 代码。

事实并非如此。相反，我尝试使用 Selenium 存储已经定义的 JavaScript 变量。

基本上，我希望 Selenium 能够获取 JavaScript 变量的值，将其存储在本地，然后对其进行断言测试。

* * *

## 尝试 1

假设我的网站有以下 JS 代码：

```
$(document).ready(function() {
    var foo = $(#"input-field-val").val();

    function returnFoo() {
        return foo;
    }
}); 
```

根据我的阅读和理解，在我单独的 Selenium 测试文件（Selenium.java）中，我应该能够做这样的事情吗？：

```
public class Selenium {
    WebDriver driver = new FirefoxDriver();
    JavascriptExecutor js = (JavascriptExecutor) driver;

    @Test
    public void testSample() {
        driver.get("www.mywebsite.com");
        js.executeScript("alert(returnFoo());");
    }
} 
```

我做了与上面类似的事情，但没有弹出警告框。相反，我收到一条错误消息：

```
Exception in thread "main" org.openqa.selenium.WebDriverException: ReferenceError: returnFoo is not defined 
```

我很确定当它说 JS 变量时我不明白它的含义

> 不应该是闭包或局部变量的一部分

我也尝试在`$(document).ready(function()...`and 设置之上定义一个全局变量，`function returnFoo()`但仍然不起作用。

* * *

## 尝试 2

我已经搬到`foo`了. 这已经修复了我在上面的*尝试 1*中收到的消息。`returnFoo()``$(document).ready(function()...``ReferenceError`

 *我还给了`foo`一个值，所以我的 JS 代码看起来像这样：

```
var foo = "Selenium test run";

$(document).ready(function() {
...
});

function returnFoo() {
    return foo;
} 
```

现在，我很难`returnFoo()`在我的 Selenium 测试中将返回值分配给局部变量。这是我尝试过的：

```
public static void main(String[] args) {
        WebDriver driver = new FirefoxDriver();
        JavascriptExecutor js = (JavascriptExecutor) driver;

        driver.get("http://localhost:8080/HTML5TestApp/prod.html");
        Object val = js.executeScript("window.returnFoo();");
        System.out.println(val);
    } 
```

但是控制台显示`null`的不是**"Selenium test run"**的实际值。

## 尝试 2 - 解决方案

看起来如果我这样做，`Object val = js.executeScript("alert(returnFoo());");`我会得到`foo`.

* * *

## 解决方案

因此，感谢下面 Martin Foot 的解决方案，这是我针对我的问题提出的解决方案。

在我的 JavaScript 文件中，我创建了`var`一个 setter/getter 函数，如下所示：

**index.js**

```
var seleniumGlobal;

$(document).ready(function() {
...
)};

function setSG(toSet) {
    seleniumGlobal = toSet;
}

function getSG() {
    return seleniumGlobal;
} 
```

**SampleTest.java**

```
// Do all the necessary imports

public class SampleTest {
    WebDriver driver = new FirefoxDriver();
    JavascriptExecutor js = (JavascriptExecutor) driver;

    @Test
    public void testPrintVal() {
        String sgVal = (String) js.executeScript("alert(getSG());");
        Assert.assertEquals("new value for seleniumGlobal", sgVal);
    }
} 
```

因此，每当我的 JavaScript 中的某些代码通过 setter 方法设置我的`seleniumGlobal`变量时，我都可以通过我的 Selenium 测试调用它并对其进行断言。

这可能不是最有效的方法，但如果其他人有更好的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-15T16:25:23.807

你所要做的就是：

```
Object val = js.executeScript("return returnFoo();"); 
```

这会给你你正在寻找的东西。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-10-04T00:37:38.740

**无需定义 JavaScript 函数。**也不`alert()`需要。

```
Object result = js.executeScript("return globalVar"); 
```

对于 Python：

```
result = driver.execute_script("return globalVar") 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-21T17:20:55.227

在 Ruby 中，您可以使用`page.execute_script`来评估 JavaScript 变量（如果它可以从 Web 浏览器的范围内访问）。看起来[这里](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/JavascriptExecutor.html)的 Java 中也有类似的方法。

编辑：这可能是一个更适合 JavaScript 单元测试框架（例如[Jasmine](http://en.wikipedia.org/wiki/Jasmine_%28JavaScript_framework%29) ）的用例。*

# xml - 将 XML 转换为等效的 groovy 配置

> ID：13994395
> 
> 赞同：0
> 
> 时间：2012-12-21T17:11:58.690
> 
> 标签：xml, groovy, configuration-files

我在这样的 XML 文档中有一些测试配置：

```
<WapRules>
    <WapRule>
        <RuleTypeId>1</RuleTypeId>
        <IsExact>false</IsExact>
        <Keywords>
            <Keyword>gmail</Keyword>
        </Keywords>
    </WapRule>
    <WapRule>
        <RuleTypeId>2</RuleTypeId>
        <IsExact>false</IsExact>
        <Keywords>
            <Keyword>test</Keyword>
        </Keywords>
    </WapRule>
    <WapRule>
        <RuleTypeId>2</RuleTypeId>
        <IsExact>true</IsExact>
        <Keywords>
            <Keyword>srs</Keyword>
            <Keyword>sample</Keyword>
        </Keywords>
    </WapRule>
</WapRules> 
```

我想将其表示为一个[groovy 配置](http://groovy.codehaus.org/ConfigSlurper)，然后将其插入。

“WapRules”是“WapRule”元素的列表，所以我尝试将其映射到[Config.groovy 文件](http://groovy.codehaus.org/ConfigSlurper)，如下所示：

```
wap_rules = [
    {
        rule_type_id = 1
        is_exact = false
        keywords = ["gmail"]
    },
    {
        rule_type_id = 2
        is_exact = false
        keywords = ["test"]
    },
    {
        rule_type_id = 2
        is_exact = true
        keywords = ["srs", "sample"]
    }
] 
```

现在我在配置中啜饮并尝试访问元素：

```
def cfg = new ConfigSlurper().parse(Config)
println cfg.wap_rules[0].rule_type_id 
```

但输出只有这个：`[:]`

那么如何访问里面的成员`cfg.wap_rules[0]`呢？我将 XML 结构映射到 Config.groovy 有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:07:24.210

得到了答案。我没有正确映射 XML 文档。

以下是我应该如何编写 Config.groovy：

```
wap_rules = [
    [
        rule_type_id : 1,
        is_exact : false,
        keywords : ["gmail"]
    ],
    [
        rule_type_id : 2,
        is_exact : false,
        keywords : ["test"]
    ],
    [
        rule_type_id : 2,
        is_exact : true,
        keywords : ["srs", "sample"]
    ]

] 
```

`wap_rules`现在是地图列表，每个地图的元素都可以轻松访问。

现在我确实可以做到`println cfg.wap_rules[0].rule_type_id`，而且输出确实是`1`

我想当我编写错误的 Config.groovy 时，我太受 JSON 表示的限制（即“我需要一个 JSON 对象列表，每个对象都放在大括号 {} 中”）。

我希望这对其他人有帮助。

# c# - WPF：如何处理鼠标单击按钮内的 Listview？

> ID：13994397
> 
> 赞同：0
> 
> 时间：2012-12-21T17:12:01.950
> 
> 标签：c#, wpf, listview, button

我有一个用于在按钮内显示表格的列表视图。我有一个分配给按钮的单击事件，但是当用户单击列表视图时，会在列表视图中选择一行，并且鼠标单击永远不会冒泡到按钮。

我被困在这一点上，需要一种方法来解决这个问题。我在网上看到的所有示例都是在列表视图中放置一个按钮。我该如何进行这项工作？

![示例截图](../Images/196f27e5da308813dbea0ee522a7c745.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:31:32.570

将`IsHitTestVisible`属性设置为`false`您的`ListView`. 由于它是一个通常处理单击事件的控件，因此这样做会使其忽略它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:27:49.870

如果您不希望首先选择项目，则可以使列表视图无法接收焦点。只需将[Focusable](http://msdn.microsoft.com/en-us/library/system.windows.uielement.focusable.aspx)属性设置为`false`.

由于列表视图无法接收焦点，那么我希望鼠标事件会冒泡到按钮。

# javascript - jQuery UI 小部件工厂和原型？

> ID：13994398
> 
> 赞同：1
> 
> 时间：2012-12-21T17:12:03.483
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-widget-factory

使用 jQuery UI Widget Factory，我如何设置一个在插件的所有实例中保持相同值的属性？（因此，如果值在一个实例中更改，它会在所有实例中更改。）

例如

```
$.widget( "myplugin" , { 

   avalue : 1,

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:50:00.620

一种方法是将值存储在这样的闭包中：

```
(function () {
    var value = 0;

    $.widget('my.plugin', {
        _create: function () {
            value++;
        },
        getValue: function () {
            return value;
        }
    });
})();

$('.element').plugin();
$('.second-element').plugin();

$('.element').plugin('getValue'); // 2 
```

# android - Android 使用 AsyncTask 的最佳方式

> ID：13994400
> 
> 赞同：0
> 
> 时间：2012-12-21T17:12:15.727
> 
> 标签：android

我一直在看这个指南：

[http://developer.android.com/training/basics/network-ops/connecting.html](http://developer.android.com/training/basics/network-ops/connecting.html)

并且想知道下载多个文件的最佳方式是什么。首先，我需要从 url 下载一个文本文件以确定要下载哪些文件。

我是否应该有 2 个单独的 ASyncTask，一个用于下载文件，另一个用于下载其余文件？否则我的依赖于第一个文件的代码会崩溃，因为异步任务没有及时完成。

另外对于进度对话框，我应该为每个文件创建一个新文件还是尝试更新前一个文件？

谢谢

最初我正在为每个要下载的文件创建一个新的 AsyncTask。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:46:03.610

一般来说，如果您希望文件保留在设备上，并且根据下载一个文件的结果下载多个文件，那么您应该

1.  使用 IntentService 下载和存储/解析第一个文件。
2.  使用 IntentService 读取第一次下载的结果，然后下载剩余的文件。如果需要，您可以在通知区域中使用进度条通知。同时，用户可以继续在应用程序中工作，*甚至切换到另一个应用程序*，下载将继续。

IntentService 不受可能杀死 AsyncTask 的 Activity 生命周期更改的影响。

每当您下载数据时，请将其保存在某个地方。您可以随时检查数据是否已过时。另一方面，如果没有连接，用户将拥有最后的“好”数据。

要了解有关 IntentService 的更多信息，请参阅[在后台服务中运行](http://developer.android.com/training/run-background-service/index.html)。示例应用程序中的内容提供程序说明了下载其他文件的“元数据”。该示例还演示了如何在下载前检查连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:17:48.610

没有完美的答案可以涵盖所有可能的情况。

*   如果您对快速运行的 AsyncTask 感到满意，请不要更改任何内容。
*   如果您使用的是 API 9+，您可以切换到该[`DownloadManager`](http://developer.android.com/reference/android/app/DownloadManager.html)课程并让它锻炼细节。

如果您需要参考，[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/q/3028306/1267661)，提供了使用活动 ProgressBar 下载文件的多种方法的示例。

# c# - 即使 app.manifest 设置为以管理员身份运行程序，也获得“访问路径...被拒绝”

> ID：13994403
> 
> 赞同：0
> 
> 时间：2012-12-21T17:12:49.910
> 
> 标签：c#, uac

当我收到路径被拒绝的错误时，我试图从桌面上删除一个文件夹。我什至让我的 app.manifest 以管理员身份启动程序。现在使用下面的代码我可以成功删除文件夹，但这似乎没有必要。

```
 string folder = "c:\\users\\jim\\desktop\\Proto";
  ProcessStartInfo process = new ProcessStartInfo("cmd.exe", @"/C " + @"rmdir " + folder + " /s /q");
  process.Verb = "runas";
  Process p = Process.Start(process);
  p.WaitForExit(); 
```

我正在尝试使用...

```
 string folder = "c:\\users\\jim\\desktop\\Proto";
  Directory.Delete(folder, true); 
```

是否可以使该方法“运行”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:16:54.893

据我所知，只提升一个呼叫/命令是不可能的。您必须启动一个可能被 UAC 阻止的新进程。有些程序似乎不这样做（例如不同的 Windows 对话框），但它们只是在后台调用具有不同参数的另一个进程（或它们自己的可执行文件）。

除此之外：默认情况下，您应该可以完全访问自己桌面上的所有内容。或者您是否正在尝试修改其他用户的桌面？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:25:25.980

首先，运行应用程序的用户应该能够在他们自己的桌面上创建一个文件夹。

如果是上述情况，请删除您放入清单中的内容，但不要使用硬编码路径

```
String desktopFolder = Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory);

Directory.Delete(Path.Combine(desktopFolder,"proto"); 
```

如果正在为另一个其他用户删除此文件夹（并且 admin 是另一个用户，无论是否提升），那么您必须一直以提升的方式运行，（不是一个好主意），或者当您以提升的方式启动另一个进程时做高大上的事情的权利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:18:35.757

看看[这个](https://stackoverflow.com/questions/2021831/admin-rights-for-a-single-method)，它向您展示了如何以管理员用户身份运行单个方法

# symfony - Symfony 2 使用外键获取数据返回未定义索引

> ID：13994406
> 
> 赞同：1
> 
> 时间：2012-12-21T17:13:18.377
> 
> 标签：symfony, foreign-keys, undefined-index

我有 3 个实体：用户、用户角色、用户配置文件。我的用户配置文件实体的主键实际上是来自用户实体的外键，即 UserId。 **每次我尝试使用外键用户 ID 访问 userProfile 时。我总是收到未定义用户 ID 索引的错误。**

这是确切的错误信息

**> 注意：未定义索引：userID in

> C:\wamp\www\SymfonyFolder\vendor\doctrine\orm\lib\Doctrine\ORM\UnitOfWork.php 行 2583**

控制器 ..... ....

```
public function profileAction($id)
    {
        $user = new User();
        $user_repository = $this->getDoctrine()->getRepository('AcmePodUserBundle:User');
        $user = $user_repository->find($id);

        $userprofile = new UserProfile();
        $userprofile_repository = $this->getDoctrine()->getRepository('AcmeUserBundle:UserProfile');       
        $userprofile = $userprofile_repository->find($user);

       return new Response($userprofile); // this is not the actual output i need. I just used this simply to test if userprofile has some value. 
} 
```

用户.orm.yml

```
type:  entity
  table: reg_user
  oneToOne:
  id:
    userID:
      column: user_id
      type: integer
      generator: { strategy: AUTO }
      targetEntity: UserProfile
      mappedBy: userProfileID 
```

用户配置文件.orm.yml

```
type:  entity
  table: users_profile
  id:
    userProfileID:
      associationKey: true
  fields:
    firstName:
      column: first_name
      type: string
      length: 255
      unique: true
      nullable: false
    lastName:
      column: last_name
      type: string
      length: 255
      nullable: false
 oneToOne:
    userProfileID:
      targetEntity: User
      inversedBy: userID
      joinColumn:
        name: fk_user_id
        referencedColumnName: user_id 
```

用户.php

```
class User implements AdvancedUserInterface, \Serializable
{

// @var auto integer
protected $userID;

// @var string
protected $userName;

// @var string
protected $salt;

// @var string - must not persist to DB
protected $plainPassword;

// @var string
protected $password;

// @var string
protected $email;

// @var boolean
protected $isActive;

// @var string
protected $confirmationCode;

// @var datetime
protected $createdAt;

// @var string - must not persist to DB
protected $chooseRole;

// @var for roles fk_role_id - mapped
protected $userRole;

/* _construct() is an instant instance of the entity*/

public function __construct()
{
    date_default_timezone_set('Asia/Manila');
    $this->createdAt = new \DateTime("now");

//all users are inactive upon registration.
//isActive turns 'true' with the use of email confirmation
    $this->isActive = false; 
}

public function __toString()
{
    return strval($this->userID);
}

/**
 * Get userID
 *
 * @return integer 
 */
public function getUserID()
{
    return $this->userID;
}

/**
 * Set userName
 *
 * @param string $userName
 * @return User
 */
public function setUserName($userName)
{
    $this->userName = $userName;

    return $this;
}

/**
 * Get userName
 *
 * @return string 
 */
public function getUserName()
{
    return $this->userName;
}

/**
 * Set salt
 *
 * @param string $salt
 * @return User
 */
public function setSalt($salt)
{
    $this->salt = $salt;

    return $this;
}

/**
 * Get salt
 *
 * @return string 
 */
public function getSalt()
{
    return $this->salt;
}

public function setPlainPassword($plainPassword)
{
    $this->plainPassword = $plainPassword;

    return $this;
}

public function getPlainPassword()
{
    return $this->plainPassword;
}

/**
 * Set password
 *
 * @param string $password
 * @return User
 */
public function setPassword($password)
{
    $this->password = $password;

    return $this;
}

/**
 * Get password
 *
 * @return string 
 */
public function getPassword()
{
    return $this->password;
}

/**
 * Set email
 *
 * @param string $email
 * @return User
 */
public function setEmail($email)
{
    $this->email = $email;

    return $this;
}

/**
 * Get email
 *
 * @return string 
 */
public function getEmail()
{
    return $this->email;
}

/**
 * Set isActive
 *
 * @param boolean $isActive
 * @return User
 */
public function setIsActive($isActive)
{
    $this->isActive = $isActive;

    return $this;
}

/**
 * Get isActive
 *
 * @return boolean 
 */
public function getIsActive()
{
    return $this->isActive;
}

/**
 * Set confirmationCode
 *
 * @param string $confirmationCode
 * @return User
 */
public function setConfirmationCode($confirmationCode)
{
    $this->confirmationCode = $confirmationCode;

    return $this;
}

/**
 * Get confirmationCode
 *
 * @return string 
 */
public function getConfirmationCode()
{
    return $this->confirmationCode;
}

/**
 * Set createdAt
 *
 * @param \DateTime $createdAt
 * @return User
 */
public function setCreatedAt($createdAt)
{
    $this->createdAt = $createdAt;

    return $this;
}

/**
 * Get createdAt
 *
 * @return \DateTime 
 */
public function getCreatedAt()
{
    return $this->createdAt;
}

public function setChooseRole($chooseRole)
{
    $this->chooseRole = $chooseRole;

    return $this;
}

public function getChooseRole()
{
    return $this->chooseRole;
}

/**
 * Set userRole
 *
 * @param CloudPod\UserBundle\Entity\UserRoles $userRole
 * @return User
 */
public function setUserRole(\CloudPod\UserBundle\Entity\UserRoles $userRole = null)
{
    $this->userRole = $userRole;

    return $this;
}

/**
 * Get userRole
 *
 * @return CloudPod\UserBundle\Entity\UserRoles 
 */
public function getUserRole()
{
    return $this->userRole;
}

/**
 * @see \Serializable::serialize()
 */
public function serialize()
{
    return serialize(array(
        $this->userID,
    ));
}

/**
 * @see \Serializable::unserialize()
 */
public function unserialize($serialized)
{
    list (
        $this->userID,
    ) = unserialize($serialized);
}

public function isAccountNonExpired()
{ return true; }

public function isAccountNonLocked()
{ return true; }

public function isCredentialsNonExpired()
{ return true; }

public function isEnabled()
{ return $this->isActive; }

   /**
 * @inheritDoc
 */
public function eraseCredentials()
{
}

public function getRoles()
{
  return array($this->userRole);  
} 
```

}

我认为问题出在我的控制器代码上。有人可以告诉我编码的正确方法吗？PS 我将用户与用户个人资料分开，因为我不想在表格中将用户帐户数据（如用户名、角色等）与其用户信息混为一谈。

# asp.net-mvc - 项目重复显示

> ID：13994415
> 
> 赞同：0
> 
> 时间：2012-12-21T17:14:17.040
> 
> 标签：asp.net-mvc, asp.net-mvc-3

嗨，我正在尝试创建一个动态菜单，但我似乎遇到了一些麻烦。问题是，当运行应用程序时，只有属于最后一个类别的项目会针对所有类别重复显示。

有两个地方我可能犯了错误，但我不能确定是否是我犯的地方我还将发布我正在使用的两个表的图表。这是图表：

![在此处输入图像描述](../Images/a2c908dcf724bb1b16790cd0298a1119.png)

我正在使用 LINQ TO SQL 来访问数据库并创建了一个单独的类来执行此操作。这是用于访问数据的代码。这是我在将项目添加到 Dictionary 时可能犯错误的第一个地方我用调试器跨过这个方法，它似乎没问题我不能确定所以我发布了它：

```
public Dictionary<string , List<string>> subCatByCatList() {
        Dictionary<string , List<string>> SubcatByCat = new Dictionary<string , List<string>>();

        var subcategoriesByCategory = from category in dataContext.Categories
                                      join subcategory in dataContext.SubCategories
                                          on category.CatId equals subcategory.CatId
                                          into cs
                                      select new {
                                          CategoryName = category.CatName ,
                                          SubCategories = cs
                                      };

        List<string> subcategories = new List<string>();

        foreach( var category in subcategoriesByCategory ) {
            string CategoryName = category.CategoryName;
            subcategories.Clear();

            foreach( var subCategory in category.SubCategories ) {
                subcategories.Add(subCategory.SubCatName);
            }
            SubcatByCat.Add(CategoryName , subcategories);
        }
        return SubcatByCat;
    } 
```

第二个地方是当我尝试显示数据时。这是我最有可能认为我在尝试显示数据时犯了错误的地方。这是代码：

```
 @{
                     ComputerStoreDataAccess data = new ComputerStoreDataAccess();
                     Dictionary<string, List<string>> nav = data.subCatByCatList();

                     <ul>
                         @foreach (var category in nav)
                         {
                             <li><a href="#">@category.Key</a></li>

                             foreach (var subcategory in category.Value)
                             {
                                 <div>
                                     <ul>
                                         <li>@subcategory</li>
                                     </ul>
                                 </div>
                             }
                         }
                     </ul>
                 } 
```

**编辑**

![在此处输入图像描述](../Images/81c42c052f295292c69c376e79e02c73.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:26:52.083

在此循环中，您必须在每次迭代时创建`subcategories`对象，否则您将引用 a 中的单个列表`SubcatByCat`：

```
foreach( var category in subcategoriesByCategory ) {
            string CategoryName = category.CategoryName;
            subcategories = new List<string>(); // <-- create new object!

            foreach( var subCategory in category.SubCategories ) {
                subcategories.Add(subCategory.SubCatName);
            }
            SubcatByCat.Add(CategoryName , subcategories);
        } 
```

# android - 为什么 Eclipse 建议我删除微调器 onItemSelected 中的覆盖注释

> ID：13994421
> 
> 赞同：0
> 
> 时间：2012-12-21T17:14:41.037
> 
> 标签：android, spinner

我对这种情况一无所知，日食建议我`@Override`删除`spinner.onItemSelected`? 但我知道itemselected应该是这样的

```
spin.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener()
    {
        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id)
        {
            Object item = parentView.getItemAtPosition(position);
            value = item.toString();
        }

        @Override
        public void onNothingSelected(AdapterView<?> parentView)
        {

        }
    }); 
```

你知道为什么 eclipse 建议我删除它吗？ ![在此处输入图像描述](../Images/f0c7d3cf565d0880db74b53467316412.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:18:09.493

转到树形菜单中的 Eclipse 属性（不是项目特定的，而是整个 Eclipse）：

Java -> 编译器 -> JDK 合规性并将其更改为 1.6。

它应该停止建议您删除覆盖。

# android - 多选移动设备上的框我有一个界面，它使用具有 css 设置高度的多选列表框来填充其他列表。基本上： <select multiple="multiple" size="5" style="height:150px;"><option value="1">one</option> <option value="2">two</option> < option value='3'>three & ID：13994432 赞同：21 时间：2012-12-21T17:15:37.207 标签：android, html, mobile, user-interface, html-select 回答 #1 赞同：4 时间：2012-12-23T01:18:33.100 移动浏览器中的这种行为是为了改善用户体验而设计的。根据Safari Web 内容指南 使用 Select 元素 如果您在网页中使用 select HTML 元素，iOS 会显示一个自定义选择控件，该控件针对使用手指作为输入设备来选择列表中的项目进行了优化。在 iOS 上，用户可以轻拂以滚动列表并点击以从列表中选择一个项目。 话虽如此： 我建议不要与之抗争，而是为了移动用户而利用它 select使用媒体查询为桌面和移动浏览器的元素应用不同的 CSS ； 如果显示的选项数量足够小，请考虑使用<input type="checkbox"> 而不是select因为它的行为在浏览器中是一致的。 回答 #2 赞同：3 时间：2013-10-28T21:43:23.843 我一直在使用类似的界面，它对桌面用户非常有用，但在多选不显示为多行可滚动列表的触摸设备上完全不直观。 似乎您需要一个完全自定义的控件，但我发现两个 Jquery 控件似乎实现了此功能（尽管方式略有不同）。 Eric Hynds Jquery UI 多选：http: //comsim.esac.esa.int/rossim/3dtool/common/utils/jquery/ehynds-jquery-ui-multiselect-widget-f51f209/demos/index.htm Quasi Partikel 可排序可搜索多选小部件：http: //quasipartikel.at/multiselect/ 这两者在手机大小的设备上都显得有些繁琐，尤其是 Quasi Partikel 版本，它使用项目左侧的小“+”来添加它，而 Eric Hynds 允许点击整个项目来选择/取消选择. 两者都可以通过移动特定样式进行改进，以增加我想的关键元素的大小。 回答 #3 赞同：1 时间：2013-01-03T11:07:38.437 据我了解，我认为根据选择的选项重定向到另一个页面会容易得多，除非有一个原因你没有首先选择这个。 我不明白为什么你不能只使用复选框的下拉列表。这些几乎在任何地方都兼容，当然也适用于所有智能手机。 <select name="Dropdown1"> <option value="o1">Option 1</option> <option value="o2">Option 2</option> <option value="o3">Option 3</option> <option value="o4">Option 4</option> </select> 或者 <input type="checkbox" name="checkbox" value="o1">Option 1<br> <input type="checkbox" name="checkbox" value="o2">Option 2 （http://www.w3schools.com/html/tryit.asp?filename=tryhtml_select2和http://www.w3schools.com/html/html_forms.asp）</select>

# css - 通过 chrome 检查复制类/id 的所有 css 属性

> ID：13994435
> 
> 赞同：1
> 
> 时间：2012-12-21T17:15:44.033
> 
> 标签：css, google-chrome

有没有办法在谷歌浏览器中快速复制被检查元素的所有 css 代码？

我发现在设计时，有时更容易通过检查即时更改 css 以找出正确的像素距离，而不是更改代码并刷新页面。

这种能力真的存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:35:56.377

感谢 steveax 的评论，我能够找到答案，我将与您分享

编辑检查的元素后，转到源选项卡并选择定义该元素的适当 CSS，编辑后的属性将出现在那里，您可以定期复制。

显然，直接从样式窗口复制会更舒服..

# c++ - Windows 交叉编译后创建类的段错误

> ID：13994438
> 
> 赞同：0
> 
> 时间：2012-12-21T17:15:53.083
> 
> 标签：c++, segmentation-fault, cross-compiling, sfml

我尝试使用 SFML 2.0 for Windows 创建一个程序，使用带有 mingw32 的 Gentoo Linux。

我不想重新编译 SFML 及其所有依赖项，所以我从[官方网站](http://ss.com)下载了一个编译版本（版本 32 位 - SJLJ）

我已经编译了我的代码，并在 wine 上执行了它，但是当我尝试从 SFML 实例化一个类时它出现了段错误。我尝试过使用 SFML 的静态或动态版本，没有任何变化。

使用调试模式，该`this`值似乎未在 SFML 类上正确初始化。

*我的编译标志：*

```
CXXFLAGS = -W -Wall -ggdb3 -ISFML-2.0-rc/include -DSFML_STATIC
LDFLAGS  = -LSFML-2.0-rc/lib -static-libgcc -static-libstdc++ -mwindows      \
           -lsfml-window-s-d -lsfml-graphics-s-d -lsfml-system-s-d -lws2_32 
```

*主.cpp：*

```
#include <SFML/Window.hpp>

int main() {
  sf::VideoMode vm(800, 600);

  return 0;
} 
```

*酒错误：*

```
wine: Unhandled page fault on write access to 0x00000320 at address 0x4021e9 (thread 0026), starting debugger...
Unhandled exception: page fault on write access to 0x00000320 in 32-bit code (0x004021e9).
Register dump:
 CS:0023 SS:002b DS:002b ES:002b FS:0063 GS:006b
 EIP:004021e9 ESP:0087fd78 EBP:0087fd78 EFLAGS:00010202(  R- --  I   - - - )
 EAX:00000320 EBX:7b896ff4 ECX:0087fdd4 EDX:00000258
 ESI:7ffdf000 EDI:004012b0
Stack dump:
0x0087fd78:  0087fdf8 004013bd 00000320 00000258
0x0087fd88:  00000020 0040c387 00401340 004012b0
0x0087fd98:  0087fdc8 00000000 00000001 7ffdf000
0x0087fda8:  0087fdc8 7ed71ff4 00409fc0 00418d28
0x0087fdb8:  00419370 0087fde0 004013ca 0087fd80
0x0087fdc8:  0087fde8 0040b162 00000001 0000ffff
Backtrace:
=>0 0x004021e9 VideoMode+0x9(this=0x320, modeWidth=0x258, modeHeight=0x20, modeBitsPerPixel=0x40c387) [D:\developpement\sfml-misc\release\2.0-rc1\gcc4-sjlj\debug-static\src\SFML\Window/D:/developpement/sfml-master/src/SFML/Window/VideoMode.cpp:50] in chess (0x0087fd78)
  1 0x004013bd main+0x6c() [/home/bak/projets/bjtu/server architecture/Chess/main.cpp:5] in chess (0x0087fdf8)
  2 0x004010fd in chess (+0x10fc) (0x0087fe88)
  3 0x7b85d80f in kernel32 (+0x4d80e) (0x0087fec8)
  4 0x7bc73ed0 call_thread_func_wrapper+0xb() in ntdll (0x0087fed8)
  5 0x7bc7690d call_thread_func+0x7c() in ntdll (0x0087ffa8)
  6 0x7bc73eae RtlRaiseException+0x21() in ntdll (0x0087ffc8)
  7 0x7bc4c78e call_dll_entry_point+0x61d() in ntdll (0x0087ffe8)
  8 0xf767106d wine_call_on_stack+0x1c() in libwine.so.1 (0x00000000)
  9 0xf767112b wine_switch_to_stack+0x2a() in libwine.so.1 (0xffd55c28)
  10 0x7bc51e6f LdrInitializeThunk+0x2ee() in ntdll (0xffd55c98)
  11 0x7b86371a __wine_kernel_init+0xa19() in kernel32 (0xffd56e38)
  12 0x7bc5269b __wine_process_init+0x25a() in ntdll (0xffd56eb8)
  13 0xf766e5e2 wine_init+0x291() in libwine.so.1 (0xffd56f28)
  14 0x7bf0106b main+0x7a() in <wine-loader> (0xffd57378)
  15 0xf74b6596 __libc_start_main+0xe5() in libc.so.6 (0xffd573f8)
0x004021e9 VideoMode+0x9 [D:\developpement\sfml-misc\release\2.0-rc1\gcc4-sjlj\debug-static\src\SFML\Window/D:/developpement/sfml-master/src/SFML/Window/VideoMode.cpp:50] in chess: movl   %edx,0x0(%eax) 
```

`VideoMode.cpp:50`参考构造函数的结尾，就像我尝试使用的其他 SFML 类一样。

`this`变量未正确初始化：

```
 =>0 0x004021e9 VideoMode+0x9(this=0x320, modeWidth=0x258, ... 
```

`this`取第一个参数的值，并转移所有其他值（第一个 arg 具有第二个值，...）

我已经用几个类进行了测试，结果相同。

从哪里可能是问题？
我想过调用约定之间的区别，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:05:57.193

您似乎以错误的方式为 SFML 初始化 VideoMode，而是尝试使用 VideoMode 作为第一个参数创建一个 Window 对象，就像在前向示例中一样：

```
sf::Window App(sf::VideoMode(800, 600, 32), "SFML Window"); 
```

我想 turials 从这里应该会有所帮助，但它可以解释为什么仅从 raw 分配 VideoMode 会导致段错误。

# dart - 我如何测试 Dart 中函数的存在？

> ID：13994443
> 
> 赞同：8
> 
> 时间：2012-12-21T17:16:15.687
> 
> 标签：dart, dart-mirrors

有没有一种方法可以测试 Dart 中函数或方法的存在，而无需尝试调用它并捕获 NoSuchMethodError 错误？我正在寻找类似的东西

```
if (exists("func_name")){...} 
```

测试一个名为的函数是否`func_name`存在。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T20:32:29.587

您可以使用[镜像 API](http://api.dartlang.org/docs/bleeding_edge/dart_mirrors.html)做到这一点：

```
import 'dart:mirrors';

class Test {
  method1() => "hello";
}

main() {
  print(existsFunction("main")); // true
  print(existsFunction("main1")); // false
  print(existsMethodOnObject(new Test(), "method1")); // true
  print(existsMethodOnObject(new Test(), "method2")); // false
}

bool existsFunction(String functionName) => currentMirrorSystem().isolate
    .rootLibrary.functions.containsKey(functionName);

bool existsMethodOnObject(Object o, String method) => reflect(o).type.methods
    .containsKey(method); 
```

`existsFunction``functionName`仅测试当前库中是否存在带有的函数。`import`因此，语句可用的函数`existsFunction`将返回`false`。

# javascript - .load 在 IE8 中不起作用

> ID：13994444
> 
> 赞同：1
> 
> 时间：2012-12-21T17:16:22.820
> 
> 标签：javascript, jquery, html, internet-explorer-8, load

过去几天我一直在研究这个问题，但无法弄清楚。下面的代码根据当前页面类在外部文件中搜索内容，然后将内容加载到页面上任何匹配的 ID 中。它适用于 Chrome、Firefox、IE9，但最近停止在 IE8 中运行，我不知道为什么。任何想法将不胜感激。

HTML 看起来像这样

```
<body class="jms">
    <div id="mainHomeContent" class="shared"></div>
</body> 
```

jquery 准备就绪

```
$("div.shared").each(function(){
        var Body = $(document).find("body");
        var contentID = ("#" + $(this).attr("id"));
        var pathname = ""

        if(Body.hasClass("pigman")){
            var pathname = "/dev/jmsracing/content/pigman/shared-content-include.html"
        } else if(Body.hasClass("marion-arts")){
            var pathname = "/dev/jmsracing/content/marion-arts/shared-content-include.html"
        } else if(Body.hasClass("jms")){
            var pathname = "/dev/jmsracing/content/jms/shared-content-include.html"
            alert('hello');
        }

        $(contentID).load(pathname + " " + contentID);  
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:00:54.153

我认为他正在迭代同样非常严格的`id`地方，所以这应该是解决方案：`ie`

```
$(function() {
    var Body = $(document).find("body");
    var contentID = ("#" + $(this).attr("id"));
    var pathname = ""

    if (Body.hasClass("pigman")) {
        var pathname = "/dev/jmsracing/content/pigman/shared-content-include.html"
    } else if (Body.hasClass("marion-arts")) {
        var pathname = "/dev/jmsracing/content/marion-arts/shared-content-include.html"
    } else if (Body.hasClass("jms")) {
        var pathname = "/dev/jmsracing/content/jms/shared-content-include.html"
        alert('hello');
    }

    $(contentID).load(pathname + " " + contentID);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:48:03.857

**试试这个：**

```
$("div.shared").each(function () {
    //combined into one var statement...not really necessary.
    var $body = $("body"),
        contentId = "#" + $(this).attr("id"),
        pathname = "";

    //you've declared pathname above no need for "var" each time below
    //also added missing semi colons
    if ($body.hasClass("pigman")) {
        pathname = "/dev/jmsracing/content/pigman/shared-content-include.html";
    } else if ($body.hasClass("marion-arts")) {
        pathname = "/dev/jmsracing/content/marion-arts/shared-content-include.html";
    } else if ($body.hasClass("jms")) {
        pathname = "/dev/jmsracing/content/jms/shared-content-include.html";
        alert('hello');
    }
    // $(this) and $(contentId) are the same element 
    // since you are getting the "id" from "this"
    // us $(this) instead
    $(this).load(pathname + " " + contentId);  
}); 
```

# wordpress - 在 wordpress 中添加加权标签

> ID：13994451
> 
> 赞同：0
> 
> 时间：2012-12-21T17:16:45.083
> 
> 标签：wordpress, tag-cloud

有没有办法可以添加`weighted tags`到wordpress？我需要自定义`tag cloud`小部件以使用不同颜色显示最常用的标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:09:21.710

我也偶然发现了这一点。这是原始标签云小部件的修改功能：

```
<?php 
function my_colorful_tag_cloud( $args = array() ) {
    $defaults = array(
        'smallest' => 10, 'largest' => 22, 'unit' => 'pt', 'number' => 45,
        'format' => 'flat', 'separator' => "\n", 'orderby' => 'name', 'order' => 'ASC',
        'exclude' => '', 'include' => '', 'link' => 'view', 'taxonomy' => 'post_tag', 'echo' => true
    );
    $args = wp_parse_args( $args, $defaults );

    $tags = get_terms( $args['taxonomy'], array_merge( $args, array( 'orderby' => 'count', 'order' => 'DESC' ) ) ); // Always query top tags

    if ( empty( $tags ) || is_wp_error( $tags ) )
        return;

    foreach ( $tags as $key => $tag ) {
        $link = get_term_link( intval($tag->term_id), $tag->taxonomy );

        if ( is_wp_error( $link ) )
            return false;

        $tags[ $key ]->link = $link;
        $tags[ $key ]->id = $tag->term_id;
    }
    $defaults = array(
        'smallest' => 10, 'largest' => 22, 'unit' => 'pt', 'number' => 0,
        'format' => 'flat', 'separator' => "\n", 'orderby' => 'name', 'order' => 'ASC',
        'topic_count_text_callback' => 'default_topic_count_text',
        'topic_count_scale_callback' => 'default_topic_count_scale', 'filter' => 1,
    );

    if ( !isset( $args['topic_count_text_callback'] ) && isset( $args['single_text'] ) && isset( $args['multiple_text'] ) ) {
        $body = 'return sprintf (
            _n(' . var_export($args['single_text'], true) . ', ' . var_export($args['multiple_text'], true) . ', $count),
            number_format_i18n( $count ));';
        $args['topic_count_text_callback'] = create_function('$count', $body);
    }

    $args = wp_parse_args( $args, $defaults );
    extract( $args );

    if ( empty( $tags ) )
        return;

    $tags_sorted = apply_filters( 'tag_cloud_sort', $tags, $args );
    if ( $tags_sorted != $tags  ) { // the tags have been sorted by a plugin
        $tags = $tags_sorted;
        unset($tags_sorted);
    } else {
        if ( 'RAND' == $order ) {
            shuffle($tags);
        } else {
            // SQL cannot save you; this is a second (potentially different) sort on a subset of data.
            if ( 'name' == $orderby )
                uasort( $tags, '_wp_object_name_sort_cb' );
            else
                uasort( $tags, '_wp_object_count_sort_cb' );

            if ( 'DESC' == $order )
                $tags = array_reverse( $tags, true );
        }
    }

    if ( $number > 0 )
        $tags = array_slice($tags, 0, $number);

    $counts = array();
    $real_counts = array(); // For the alt tag
    foreach ( (array) $tags as $key => $tag ) {
        $real_counts[ $key ] = $tag->count;
        $counts[ $key ] = $topic_count_scale_callback($tag->count);
    }

    $min_count = min( $counts );
    $spread = max( $counts ) - $min_count;
    if ( $spread <= 0 )
        $spread = 1;
    $font_spread = $largest - $smallest;
    if ( $font_spread < 0 )
        $font_spread = 1;
    $font_step = $font_spread / $spread;

    $a = array();
    $colors = 6;

    foreach ( $tags as $key => $tag ) {
        $count = $counts[ $key ];
        $real_count = $real_counts[ $key ];
        $tag_link = '#' != $tag->link ? esc_url( $tag->link ) : '#';
        $tag_id = isset($tags[ $key ]->id) ? $tags[ $key ]->id : $key;
        $tag_name = $tags[ $key ]->name;
        $class = 'color-' . ( round( ( $smallest + ( ( $count - $min_count ) * $font_step ) ) - ( $smallest - 1 ) ) );
        $a[] = "<a href='$tag_link' class='tag-link-$tag_id $class' title='" . esc_attr( call_user_func( $topic_count_text_callback, $real_count ) ) . "' style='font-size: " .
            str_replace( ',', '.', ( $smallest + ( ( $count - $min_count ) * $font_step ) ) )
            . "$unit;'>$tag_name</a>";
    }

    $return = join( $separator, $a );

    return apply_filters( 'wp_generate_tag_cloud', $return, $tags, $args );
} 
```

此代码（默认情况下）将为每个标签生成一个标签云，其中包含 13 个可能的类（因为默认值是 min.size=10 和 max.size =22）。为了更改每个标签权重的颜色，只需将这些规则添加到您的 CSS 中：

```
.colorful_tag_cloud a.color-x { color: {color} } 
```

其中“x”是从 1 到 13 的数字

希望这可以帮助。

# php - 不明白为什么我得到：语法错误，意外的 T_STRING

> ID：13994453
> 
> 赞同：0
> 
> 时间：2012-12-21T17:16:51.757
> 
> 标签：php, wordpress, syntax-error

我在第二行的这个函数中得到一个语法错误，意外的 T_STRING：

```
function format_date($unixtime) {
return date(“F”, $unixtime).” “.date(“d”, $unixtime).”, “.date(“Y”, $unixtime);
} 
```

我正在关注本教程[http://tatiyants.com/how-to-use-wordpress-custom-post-types-to-add-events-to-your-site/](http://tatiyants.com/how-to-use-wordpress-custom-post-types-to-add-events-to-your-site/)

我已经按照这封信做了，到目前为止，我只做了复制和粘贴。

在评论中，您可以看到上面的函数丢失了，作者说将它包含在 php 文件中。除了另一个人和我之外，这似乎为所有人解决了这个问题。

那么问题可能与 PHP 或 MySQL 的版本有关？尽管 Netbeans 也表示上面的代码中存在语法错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T17:18:08.607

这是因为您从一篇写得不好的博客文章中复制和粘贴，并且您的代码中有无效的大引号。将它们更改为单引号或双引号：

```
 return date("F", $unixtime)." ".date("d", $unixtime).", ".date("Y", $unixtime); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T17:18:27.300

您使用的双引号是错误的：

```
function format_date($unixtime) {
return date("F", $unixtime)." ".date("d", $unixtime).", ".date("Y", $unixtime);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T17:24:01.210

有区别

```
left double quote       &ldquo; “
right double quote      &rdquo; ” 
```

和

```
double quotation mark   &#34;   &quot;  " 
```

所以你需要使用的是双引号（[php支持](http://in3.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)）`Shift`+`'`或`'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T17:19:21.783

您使用错误的引号。你有花引号，使用`"`或`'`

```
function format_date($unixtime) {
return date("F", $unixtime)." ".date("d", $unixtime).", ".date("Y", $unixtime);
} 
```

# php - 模块之间的 Codeigniter 类继承（线设计）

> ID：13994457
> 
> 赞同：1
> 
> 时间：2012-12-21T17:17:29.087
> 
> 标签：php, codeigniter, module, codeigniter-2

我的 CI2 应用程序正在使用 wiredesigns 模块化布局。

我在一个名为 modules 的文件夹中有一个名为 item 和 product 的两个模块，如下所示：

```
/application
    /modules
        /item
        /product 
```

在 Item 中，我有一个名为 item 的控制器，它的开头是这样的。

```
class Item extends MX_Controller
{
    //code here
} 
```

我需要做什么才能使我的产品控制器在不同的模块中扩展我的项目控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:20:53.580

我的猜测是你正试图让你的代码“干燥”（http://en.wikipedia.org/wiki/Don't_repeat_yourself），这在 CI 中意味着使用像 My_Controller 这样的通用控制器（参见：[http://ellislab. com/codeigniter/user-guide/general/core_classes.html](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)）。

查看 Phil Sturgeon 的观点：http: [//philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY)。

# objective-c - Prepareforsegue 设置标签

> ID：13994459
> 
> 赞同：0
> 
> 时间：2012-12-21T17:17:43.347
> 
> 标签：objective-c, label, uistoryboardsegue

我有一个 prepareforsegue 方法，可以拍照并在不同的视图控制器上显示。所以我需要在显示图片的同时在 secondviewcontroller 上设置一个标签，稍后我将在该标签上做一个随机单词生成器，但现在我只需要设置标签。我尝试将它放在 prepareforsegue 方法中，但它给了我一个错误。这是我的所有代码：

```
//ViewController.m   

     -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
        if([segue.identifier  isEqualToString:@"CameraSegue"] || [segue.identifier isEqualToString:@"LibrarySegue"])
        {

            UIImagePickerController *controller = [segue destinationViewController];
            controller.sourceType = [segue.identifier isEqualToString:@"LibrarySegue"] ?  UIImagePickerControllerSourceTypePhotoLibrary : UIImagePickerControllerSourceTypeCamera;
            controller.delegate = self;

        }
        else if([segue.identifier isEqualToString:@"ShowImageViewController"]){

            UIImage *image = (UIImage*)sender;
            ShowImageViewController *viewController = segue.destinationViewController;
            viewController.pickedImage = image;

            UILabel *label = (UILabel *) sender;
            ShowImageViewController *vc = segue.destinationViewController;
            vc.cap = label;
           //I tried to set the label here
            label.text = @"Hello";

        }
    }

    -(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker{
        [self dismissViewControllerAnimated:YES completion:nil];
    }

    -(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
        UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
        [self dismissViewControllerAnimated:YES completion:^{
            picker.delegate = nil;
            [self performSegueWithIdentifier:@"ShowImageViewController" sender:image];
        }];
    }

//SeconViewController.h
@property(nonatomic, strong) UIImage *pickedImage;
@property (weak, nonatomic) IBOutlet UIImageView *pickedImageView;
@property(nonatomic, retain) IBOutlet UILabel *cap;

//SecondViewController.m

-(void)viewWillAppear:(BOOL)animated{
    self.pickedImageView.image = self.pickedImage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:25:47.637

您正在将其投射`sender`到两个非常不同的事物上。

```
UIImage *image = (UIImage*)sender;
ShowImageViewController *viewController = segue.destinationViewController;
viewController.pickedImage = image;

UILabel *label = (UILabel *) sender;
ShowImageViewController *vc = segue.destinationViewController;
vc.cap = label;
label.text = @"Hello"; 
```

您不能将 UIImage 转换为 UILabel 并期望事情顺利进行。在`prepareForSegue`中，您发送的是图像，而不是标签。

您可以将底部四行更改为：

```
viewController.cap.text = @"Hello"; 
```

`ShowImageViewController`在这种情况下，另一种选择是像为图像所做的那样定义一个新属性。

```
//SecondViewController.h
@property(nonatomic, strong) UIImage *pickedImage;
@property (weak, nonatomic) IBOutlet UIImageView *pickedImageView;
@property(nonatomic, retain) IBOutlet UILabel *cap;
@property (nonatomic, strong) NSString pickedLabel; //New property

-(void)viewWillAppear:(BOOL)animated{
    self.pickedImageView.image = self.pickedImage;
    self.cap.text = self.pickedLabel;
} 
```

然后在`prepareForSegue`

```
UIImage *image = (UIImage*)sender;
ShowImageViewController *viewController = segue.destinationViewController;
viewController.pickedImage = image;
viewController.pickedLabel = @"Hello"; 
```

# c# - 基于对象列表的动态模板

> ID：13994462
> 
> 赞同：-2
> 
> 时间：2012-12-21T17:18:03.250
> 
> 标签：c#, .net, templates, object, dynamic

在以下情况下自动生成模板的最佳方法是什么。

对象组：

```
Article
  |- Id
  |- Text
Gallery
  |- Id
  |- Type
  |- List<Photos>
Video
  |- Id
  |- VideoHash 
```

所有这些对象都位于`var list = new List<dynamic>()`. 所以页面包括：

```
1\. article
2\. gallery
3\. article
4\. video 
```

会有这样的对象：

```
list.Add(Article)
list.Add(Gallery)
list.Add(Article)
list.Add(Video) 
```

现在我的问题是，为特定对象创建模板的最佳方法是什么，然后在生成页面以调用特定模板时，将其与对象数据绑定并作为 .ToString() 发送到浏览器。

是否可以使用.net 或者我必须使用一些模板库？

**更新**

为了澄清问题，我在问从动态列表为网站生成 HTML 代码的最佳技术、库、组件是什么。

想法是我为文章、视频、画廊创建 HTML 模板，然后我运行页面，它将使用从这个动态列表生成的模板生成整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:25:32.777

动态不是类型安全的，也不提供智能感知。在大多数情况下，您应该避免使用它们。改为创建类层次结构

```
public class Item
{
    public int Id { get; set; }
}

public class Article : Item
{
    public string Text { get; set; }
}

public class Gallery : Item
{
    public string Type { get; set; }
    public List<Photo> Photos { get; set; }
}

public class Video : Item
{
    public string VideoHash { get; set; }
} 
```

现在您可以创建项目列表

```
var list = new List<Item>();
lst.Add(new Article { Id = 1, Text = "test" });
lst.Add(new Video { Id = 1, VideoHash = "34Rgw^2426@62#$%" }); 
```

类用作对象的模板。派生类从基类（这里`Id`）继承成员。

* * *

**更新**

T4 模板可能看起来像这样

```
<#@ template inherits="Microsoft.VisualStudio.TextTemplating.VSHost.ModelingTextTransformation" language="C#v3.5" debug="true" hostSpecific="true" #>
<#@ output extension=".html" #>
<#@ Assembly Name="System.dll" #>
<#@ Assembly Name="System.Core.dll" #>
<#@ Assembly name="mscorlib.dll" #>
<#@ Assembly name="C:\Users\Oli\Documents\Proj\CySoft\StackOverflowTests\StackOverflowTests\bin\Debug\StackOverflowTests.exe" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Reflection" #>
<#@ import namespace="StackOverflowTests.CreateHtmlFromClasses" #>
<html>
<head>
    <title>Example</title>
</head>
<body>
    <h1>Example</h1>
    <table style="Width:100%;">
        <# this.AddProperties(new Article { Id = 77, Text = "The quick brown fox." }); #>
    </table>
</body>
</html>
<#+
    private void AddProperties(object obj)
    {
        Type type = obj.GetType();
        var properties = type.GetProperties();#>
        <tr>
            <td>
                <b><#= type.Name #></b>
            </td>
        </tr>
<#+         foreach (PropertyInfo property in properties) {
#>      <tr>
            <td>
                <#= property.Name #>
            </td>
            <td>
                <#= property.GetValue(obj, null).ToString() #>
            </td>
        </tr>
<#+
        }   
    }
#> 
```

这个例子不是一个真实世界的例子，因为它使用了一个对象的值，因为它只存在于运行时。您只会根据类型进行操作。模板引擎无法访问当前项目的类型。因此，您必须将其放置在另一个项目中。

# c# - MVC3 中的多行显示

> ID：13994472
> 
> 赞同：0
> 
> 时间：2012-12-21T17:18:44.523
> 
> 标签：c#, asp.net-mvc-3

我正在开发一个程序，其中一个显示项目被截断。编辑视图使用 TextAreaFor 并且有效。TextAreaFor 中的数据会换行。

```
 <span class="vertical-space spaced-field">@Html.TextAreaFor(m => m.Number, new { style = "width: 175px;"})</span> 
```

但是当视图显示时，它会被截断。

```
 <body>
        @foreach( var item in Model.OrderBy(p => p.EntryDate.Value))
        {
           <tr>
                .
                .
                <td>@item.Number</td>  ------  display truncated. Does not wrap
           </tr>
        }
      </body> 
```

如何使它像在编辑视图中一样包装

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:24:05.627

你有没有声明你的 doctype 和所有其他有趣的东西？

这可能是因为您使用较旧的方法来显示表格。您可以尝试在 CSS 中使用边框等设置表格样式 - 例如：

```
table, td, tr, th{
  border:1px solid #f0f;
}

.onepx{
  width:1px;
}

<div style="max-width:700px;">
  <table>
    <tr><td colspan="2">this is a loooooooooooooooong text</td></tr>
    <tr><td class="onepx">a:</td><td>b</td></tr>
    <tr><td class="onepx">c:</td><td>d</td></tr>
  </table>
<div> 
```

等等 - 我相信你明白了。这可能会阻止它自动显示在兼容性视图中（如果是问题的话）。

最后，因为 IE9 太笨了，你将不得不关闭兼容性视图（如果在页面上启用它），因为域内的所有页面都将在兼容性视图中查看。

# google-app-engine - 如何成为谷歌 appengine 管理员用户（登录：app.yaml 中的管理员）

> ID：13994475
> 
> 赞同：2
> 
> 时间：2012-12-21T17:19:05.950
> 
> 标签：google-app-engine

我从 github 下载了一个 google app engine 应用程序。我可以启动开发服务器，但无法访问下面定义的 /admin/ 页面。

```
handlers:   
- url: /admin/.*  
  script: main.app  
  login: admin 
```

开发或生产服务器如何将一个用户识别为管理员？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T19:31:19.830

对于生产服务器，用户必须有权访问管理控制台：

[https://developers.google.com/appengine/docs/adminconsole/index](https://developers.google.com/appengine/docs/adminconsole/index)

转到[https://appengine.google.com](https://appengine.google.com)，单击权限并添加他们的电子邮件地址。

角色定义在这里：[https ://developers.google.com/appengine/docs/adminconsole/roles](https://developers.google.com/appengine/docs/adminconsole/roles)

在开发服务器上，使用 /_ah/login URL“登录”并选中“管理员”复选框以模拟管理员用户登录：

[https://developers.google.com/appengine/docs/python/tools/devserver#Using_Users](https://developers.google.com/appengine/docs/python/tools/devserver#Using_Users)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:37:03.297

在 devappserver 中有一个以管理员身份登录的复选框（请参阅[https://developers.google.com/appengine/docs/python/tools/devserver#Using_Users](https://developers.google.com/appengine/docs/python/tools/devserver#Using_Users)）。

在生产中，您需要添加到权限选项卡中的管理员列表中（请参阅[https://developers.google.com/appengine/docs/adminconsole/roles](https://developers.google.com/appengine/docs/adminconsole/roles)）。

# css - ie7 - 相对定位的 div 不在其容器中滚动

> ID：13994477
> 
> 赞同：2
> 
> 时间：2012-12-21T17:19:19.333
> 
> 标签：css, internet-explorer, internet-explorer-7, scroll, css-position

我有一个带有滚动条的 div。在其中，我有各种元素，其中一个是与 display:block 和 position:relative; 的链接。这个链接的内部是一个默认定位的img，以及一个应该出现在该img顶部的h3标签，位置：absolute。当我滚动 DIV 时，其他东西滚动正常，但这些元素及其内容保持不变。有关如何解决此错误的任何想法？

这是一个小提琴，大约。代码如下：

[http://jsfiddle.net/Z987x/](http://jsfiddle.net/Z987x/)

```
<a class="slider_link" data-ident="herb-garlic-roast-tenderloin" href="http://superfadlabs.com/clients/carapelli/recipes/herb-garlic-roast-tenderloin">

  <img class="slider_image" src="http://superfadlabs.com/clients/carapelli/images/sections/recipes/share_carousel_images/tenderloin.jpg" alt="Herb &amp; Garlic Roast Tenderloin" style="
    left: 0px;
    top: 0px;
    display: block;
">

  <h4>Herb &amp; Garlic Roast Tenderloin</h4>
</a>

a.slider_link { 
    width:190px; height:220px; position: relative; display: block; margin-bottom:10px;
    h4{ .cubano; font-size:1.8em; position: absolute; color: #fff; top:11px; left:14px; line-height: 110%; padding-right:10px; height:40px; overflow: hidden; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:45:06.567

快速而肮脏的解决方法是`position:relative;`使用该属性添加到容器中`overflow:auto;`。

不过，我强烈建议您考虑重新考虑布局，不要依赖绝对/相对位置，而是尽可能使用浮点数。

更新了 jsfiddle：http: [//jsfiddle.net/Z987x/1/](http://jsfiddle.net/Z987x/1/)

# django - Django Admin _get_empty_form 已弃用？

> ID：13994484
> 
> 赞同：1
> 
> 时间：2012-12-21T17:20:10.503
> 
> 标签：django, django-forms, django-admin

我一直在使用[这里](https://stackoverflow.com/a/10130135/906490)找到的代码的实现，它在我部署的服务器上运行良好`django-admin`。服务器从 django (7cfe8e8fce) 的旧结帐运行。在我的本地机器上，我正在运行当前结帐 (d407164c)。尝试访问该表单时，我收到以下错误和对该`return`行的引用：

```
def _get_empty_form(self, **kwargs):
    return super(ParentInstInlineFormSet, self)._get_empty_form(parent_instance=self.instance)
empty_form = property(_get_empty_form) 
```

错误文字：

```
'super' object has no attribute '_get_empty_form'
Request Method: GET
Request URL:    http://localhost:8000/pmc/admin/pmc_log/reportperiod/add/
Django Version: 1.6.dev20121220194515
Exception Type: AttributeError
Exception Value:    
'super' object has no attribute '_get_empty_form'
Exception Location: /software/django-pmc-daily-log/src/pmc_log/pmc_log/forms.py in _get_empty_form, line 18 
```

去哪儿了`_get_empty_form`？解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:43:41.793

`_`开头的是`_get_empty_form`一个很好的指标，您不应该依赖它的存在 - 看起来它已被删除以支持使用该`empty_form`属性。

尝试修改您的代码以调用`empty_form`父类上的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:45:59.393

我没有使用私有方法`_get_empty_form`，而是使用了`@property`装饰器。

```
@property
def get_empty_form(self, **kwargs):
    if self.instance is not None:
        return super(ParentInstInlineFormSet, self).empty_form(parent_instance=self.instance) 
```

# javascript - Node.js：导出时出现语法错误

> ID：13994491
> 
> 赞同：2
> 
> 时间：2012-12-21T17:20:54.043
> 
> 标签：javascript, node.js

这真的很基础......我刚刚开始使用 Node.js。

我有一个简单的模块

服务器.js

```
var http = require("http");

function start() {
    function onRequest() {
        console.log("Request received");
        response.writeHead(200, {"Content-Type": "text/plain"});
        response.write("Hello World");
        response.end();
    }

    http.createServer(onRequest).listen(8888);
    console.log("Server has started...");
}

export.start = start; 
```

它是从 index.js 中调用的，如下所示

```
var server = require("./server");
server.start(); 
```

但是跑步`node index.js`给了我这个！

```
$ node index.js

d:\SourceRepo\node-sample\server.js:15
export.start = start;
^^^^^^
SyntaxError: Unexpected reserved word
    at Module._compile (module.js:437:25)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (d:\SourceRepo\node-sample\index.js:1:76)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32) 
```

如何解决这个问题？我是 JavaScript 的新手！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T17:23:08.187

您需要使用`exports`, 和一个“s”。

# html - 菜单字体大小不一样

> ID：13994494
> 
> 赞同：0
> 
> 时间：2012-12-21T17:21:02.293
> 
> 标签：html, css, menu, navbar

我的一个朋友最近为我更新了我的网站，不幸的是他不可用，菜单在其他页面上看起来都不错，但在论坛页面上，与其他页面相比，字体大小更小。

这是特定问题的链接。 [http://www.homemadetools.net/forum/](http://www.homemadetools.net/forum/)

你们能否让我知道到底是什么问题，以便我可以相应地更新网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:26:55.973

论坛页面上添加了一个`css.php`样式表，在第 1275 行有这个 CSS 声明：

```
body {
    color: #3E3E3E;
    font-size: 13px;
    line-height: 1.23;
    margin: 0 auto;
    min-width: 650px;
    width: 970px;
} 
```

这里的字体大小会覆盖其他页面上显示的默认字体大小 1em。注意我使用 Firebug 来确定哪些字体大小的 CSS 规则实际应用于这些元素。它是您可能想要熟悉的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:25:10.577

您在在线的**styles.css**`269`和在线的**css.php**中有语法错误`222`：

```
font-size: 13.75 
```

应该：

```
font-size: 13.75px 
```

这似乎可以解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:44:22.240

css.php 中的第 1275 行和第 1257 行（它的输出，而不是源代码）分别具有`body font`or`body font-size`声明，将字体大小设置为 13px，然后将其继承到菜单。要修复它，您可以将`font`css.php（输出）第 222 行的属性设置为

```
font:13.75px !important; 
```

然后它将覆盖任何后续的正文声明并以最少的麻烦解决您的问题。

在进一步检查中，只是缺少“px”面额，这阻止了它在格式正确的正文声明中被选中。您可能可以跳过该`!important`标志，因为没有实际的继承问题。只是糟糕的CSS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:54:09.720

让我澄清一下，您只希望“菜单”而不是论坛部分的字体大小与其他页面相同？

只需检查附加到论坛页面的样式表上的字体大小声明

# qt - 如何在 Qt Creator `.pro.shared` 文件中指定构建、部署和运行配置？

> ID：13994495
> 
> 赞同：6
> 
> 时间：2012-12-21T17:21:22.593
> 
> 标签：qt, qt-creator

我可以从[https://qt-project.org/doc/qtcreator-2.6/creator-sharing-project-settings.html](https://qt-project.org/doc/qtcreator-2.6/creator-sharing-project-settings.html)上的文档中看到如何创建`.pro.shared`标准化编辑器设置的文件。

但是没有提及构建配置、构建步骤、部署方法或运行配置。

我尝试将我的`.pro.user`文件（包括自定义构建、部署和运行配置）重命名为`.pro.shared`，但是当我重新打开项目时，我得到了默认值。

在文件中指定这些设置的正确方法是`.pro.shared`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T11:33:48.493

如此简短的回答：你不能。这些设置是它成为 .user 文件的原因：它们引用特定于一个 Qt Creator 实例的设置。

长答案：我们正在努力更好地支持这个用例，2.6 是朝着这个方向迈出的一大步。使用 2.6，您*可能*能够共享构建/部署/运行设置，*但*您需要确保使用该 .user 文件的每个人都有具有完全相同 id 的兼容工具包。您还需要确保每个人都使用相同的路径来访问源、构建、操作系统等，这在很大程度上限制了它的使用。

例如，这可能适用于由官方 Qt 5 软件包安装的 Qt 5 套件或专门为您的设置创建的套件。这将在您无法严格控制所有开发设置的任何设置中失败！另一方面：如果有人使用非默认设置的创建者（工具包、路径等），那么创建者将丢弃项目的 .user 文件中定义的部分或全部工具包，然后继续，要求使用的套件。这正是您在没有 .shared/.user 文件可用的情况下得到的结果。

请注意，据我所知，没有人测试过这样的设置。所以你很可能会遇到错误和不当行为......如果你这样做：请在[https://bugreports.qt.io/](https://bugreports.qt.io/)提交错误报告；-)

如果您的开发目标只有一个环境，那么您可以通过设置该环境来取得相当大的进展（例如，您只定义了一个编译器/Qt 版本/工具包，这正是您希望每个人都使用的）。即使您根本没有 .user 文件，Creator 也会默认使用该文件。

# jakarta-ee - 如何以编程方式取消选中（取消选择）数据表列中的复选框？

> ID：13994496
> 
> 赞同：1
> 
> 时间：2012-12-21T17:21:40.077
> 
> 标签：jakarta-ee, jsf-2, primefaces

我对如何在 primefaces 中以编程方式启用/禁用复选框有疑问。如果可能的话，我想通过 java 代码控制列复选框的启用/禁用状态。有人可以帮助我吗？

这是我的代码：

```
<p:dataTable id="table" var="some" value="#{someManager.someDataModel}"  
                     selection="#{someManager.chooseSomethings}">

            <p:column binding="#{someManager.columnCheckBox}" selectionMode="multiple"/>
            <p:column>
                <h:outputText value="#{some.nameOfTheSomething}"/>
            </p:column> 
        </p:dataTable> 
```

当我单击数据表的复选框时，所选数据将显示在下面的数据表中：

```
<p:dataList id="selectedDataList"
         value="#{someManager.chooseSomethings}" 
         var="c" rowIndexVar="i">
           <h:outputText id="choseSomeElement" value="#{c.nameOfTheSomething}"/>
           <p:commandLink value="x" process="@this" update=":form:selectedDataList" actionListener="#{userManager.remove}"/>
</p:dataList> 
```

在这个选择列表中，我可以删除单击“X”commandLink 中的任何元素。此 commandLink 从 chooseSomethings 列表中删除数据。当它发生时，我想再次取消选择（禁用）数据表中对应元素的复选框（恢复初始状态）。

可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:57:15.787

primefaces 同步了两个列表。当您从 chooseSomethings 中删除数据时，数据表将显示未选中的复选框。在这种情况下，您只需将数据表的 id 放在 dataList 的更新属性中。像这样：

```
<p:dataTable id="table" var="some" value="#{someManager.someDataModel}"  
                 selection="#{someManager.chooseSomethings}">

        <p:column binding="#{someManager.columnCheckBox}" selectionMode="multiple"/>
        <p:column>
            <h:outputText value="#{some.nameOfTheSomething}"/>
        </p:column> 
    </p:dataTable> 

<p:dataList id="selectedDataList"
     value="#{someManager.chooseSomethings}" 
     var="c" rowIndexVar="i">
       <h:outputText id="choseSomeElement" value="#{c.nameOfTheSomething}"/>
       <p:commandLink value="x" process="@this" update=":form:selectedDataList,:form:table" actionListener="#{userManager.remove}"/> 
```

# c++ - 如何在 MongoDB 文档中存储 unsigned long long (uint64_t) 值？

> ID：13994498
> 
> 赞同：6
> 
> 时间：2012-12-21T17:21:49.770
> 
> 标签：c++, mongodb, twitter, mongodb-query

我想在 MongoDB 文档中存储**unsigned long long (uint64_t)**类型的数字，我该怎么做？

我需要使用 unsigned long long 因为我使用的是使用无符号 64 位整数的 Twitter API [https://dev.twitter.com/docs/twitter-ids-json-and-snowflake](https://dev.twitter.com/docs/twitter-ids-json-and-snowflake)

无符号 64 位整数类型的范围需要用 8 个字节表示，数据范围为 0 到 18,446,744,073,709,551,615。

我正在使用[C++ MongoDB 驱动程序，](http://www.mongodb.org/pages/viewpage.action?pageId=21269361) [BSONArrayBuilder](http://api.mongodb.org/cplusplus/current/classmongo_1_1_b_s_o_n_array_builder.html)类的 append 成员函数没有 unsigned long long 的重载，只有 long long。

当我尝试使用 uint64_t 类型的 id 调用 arrayBuilder.append(id) 时，出现以下错误 G++ 4.7.2：

```
MongoDB/mongo/db/../bson/bson-inl.h:342:9: error: call of overloaded ‘append(const char*&, long long unsigned int&)’ is ambiguous
MongoDB/mongo/db/../bson/bsonobjbuilder.h:167:25: note: mongo::BSONObjBuilder& mongo::BSONObjBuilder::append(const mongo::StringData&, bool)
MongoDB/mongo/db/../bson/bsonobjbuilder.h:175:25: note: virtual mongo::BSONObjBuilder& mongo::BSONObjBuilder::append(const mongo::StringData&, int)
MongoDB/mongo/db/../bson/bsonobjbuilder.h:183:25: note: mongo::BSONObjBuilder& mongo::BSONObjBuilder::append(const mongo::StringData&, unsigned int)
MongoDB/mongo/db/../bson/bsonobjbuilder.h:188:25: note: virtual mongo::BSONObjBuilder& mongo::BSONObjBuilder::append(const mongo::StringData&, long long int)
MongoDB/mongo/db/../bson/bsonobjbuilder.h:244:25: note: virtual mongo::BSONObjBuilder& mongo::BSONObjBuilder::append(const mongo::StringData&, double)
MongoDB/mongo/db/../bson/bsonobjbuilder.h:324:25: note: mongo::BSONObjBuilder& mongo::BSONObjBuilder::append(const mongo::StringData&, mongo::Date_t) 
```

*   我知道[BSON 规范](http://bsonspec.org/#/specification)将 int64 定义为 8 个字节（64 位有**符号整数**）。
*   **我不想为 ID 使用字符串。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T18:12:15.830

`long long`因为 MongoDB/BSON 仅支持带符号的 64 位整数，所以在与数据库交互时，您需要将 64 位无符号值转换为/从。

仍然使用所有 64 位，因此您不会丢失任何可用的无符号范围，对于那些使用最高有效位的值，它只会在数据库中显示为负值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T19:12:29.623

恕我直言，恕我直言，您能做的最好的事情就是重新考虑您不使用字符串作为 ID 的决定，因为：

1.  可能它比你以往任何时候都更有效率，因为在存储 64B 双精度时会产生大量的 bson 内部开销，这通常是 3 个额外的字段和字段名称（参见 'floatApprox'、'top'、bottom' [here](http://books.google.gr/books?id=BQS33CxGid4C&pg=PA18&lpg=PA18&dq=mongodb%20float%20approx%20top%20bottom&source=bl&ots=PqxVCXSQgc&sig=sAMfWYQe7HUmIJIrWXY-eYHcvu4&hl=el&sa=X&ei=YEnXUIikOo_34QTviYHoDw&ved=0CE0Q6AEwAw#v=onepage&q=mongodb%20float%20approx%20top%20bottom&f=false)、[here](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/2Sl5TDH8xE4) 和[here](https://jira.mongodb.org/browse/SERVER-4141?focusedCommentId=62471&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel)）

2.  它已由您使用的 twitter API 作为 id_str 提供，这是有充分理由的

3.  如果您碰巧使用 mongodb map reduce，您将很难在 JS 中转换这些数字

# sql-server - 数据并发 SQL Server 存储过程

> ID：13994499
> 
> 赞同：0
> 
> 时间：2012-12-21T17:22:01.673
> 
> 标签：sql-server, winforms, stored-procedures

我正在使用财务应用程序。它不是我开发的，但我必须解决一个货币问题。用户使用 Windows 窗体应用程序启动一些分析，然后在临时表上，对于每个分析，一个 id 由单独的 id 列生成。然后将数据发送到一些存储过程，以便在不同的表上进行计算和修改。最后计算出来的数据存储在不同的表中，并从临时表中删除 id。

问题是一次只有一个用户可以启动分析。其他人必须等待，因为应用程序说分析 ID 已经存在。实际上，它是这样设计的，现在我必须解决这个问题，所以任何用户都可以同时启动分析。请指导。

# jquery - 如何在 CORS 预检 OPTIONS 请求中发送自定义标头？

> ID：13994507
> 
> 赞同：30
> 
> 时间：2012-12-21T17:22:46.970
> 
> 标签：jquery, xmlhttprequest, options, cors

我正在尝试为 JSON 有效负载发送 CORS 请求。我控制服务器和客户端。

我在这里关注： [https ://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control)

服务器有一个自定义标头，必须与每个请求一起发送。因此，此自定义标头使请求“不简单”，因此必须使用 OPTIONS 请求对请求进行预检。

我可以看到 jquery 发出 OPTIONS 请求，但它没有发送自定义标头。

我试过的方法：

*   使用 beforeSend 选项：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   使用 ajax 预过滤器：http: [//api.jquery.com/jQuery.ajaxPrefilter/](http://api.jquery.com/jQuery.ajaxPrefilter/)

在这两种情况下，浏览器都不会发送自定义标头。

我正在使用 FF 17.0.1，jquery 1.8.3。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-21T21:12:31.697

您的问题不在于 jquery，而[在于 CORS 的工作方式](http://www.w3.org/TR/cors/)。您的 beforeSend 回调可能按预期工作......但无论如何浏览器都不会在预检请求中发送自定义标头。这是设计使然；预检请求的目的是确定允许用户代理（浏览器）发送超出 CORS 规范中定义的“简单”内容的信息。因此，对于用户代理发送任何非简单数据（例如您的自定义标头）作为预检请求的一部分是弄巧成拙的。

要指示用户代理在实际的 CORS 请求中包含您的自定义标头，请[`Access-Control-Allow-Headers`在](http://www.w3.org/TR/cors/#access-control-request-headers-request-header)您的预检响应中包含标头。值得注意的是，如果您不太关心用户代理传输的标头，我相信您可以将`Access-Control-Request-Headers`请求标头字段的值作为`Access-Control-Allow-Headers`您在响应中发送的值回显。

您可能还希望包含[在规范的语法部分中](http://www.w3.org/TR/cors/#syntax)`Access-Control-Allow-*`定义的其他一些标头。

另请参阅[CORS - 如何“预检”httprequest？](https://stackoverflow.com/questions/8685678/cors-how-do-preflight-an-httprequest)

另请参阅[Mozilla 的 CORS 预检示例](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Preflighted_requests)，其中显示了这些标头的实际操作。

# mysql - 为什么mysql选择结果显示“#REF！” 而不是“空”

> ID：13994511
> 
> 赞同：2
> 
> 时间：2012-12-21T17:23:04.710
> 
> 标签：mysql, amazon-ec2

我在 Amazon-ec2 上有一台服务器（带有 miniman 资源的 ubuntu 12）。我在我的mac（i7 cpu）上开发这些东西并在另一个测试服务器（i5 cpu）上测试，它也是ubuntu 12。

我的问题是：当我执行长 SQL 时，在我的 mac 和测试服务器上一切都很好（选择数据的结果显示很好，除了执行时间有点长......在我的 mac 大约是 0.04 秒测试服务器大约需要 10 秒）。

但是，当我在命令行上的 Amazon-ec2 服务器上执行相同的 SQL 时，它显示“#REF！” 不是“NULL”。（执行时间也很长，大约 5 分钟......）

我不知道要搜索的关键字，只搜索“mysql #REF！” 在谷歌和这里，我仍然没有找到任何答案和线索。

是什么导致了这个问题？我该如何解决？对不起我糟糕的英语和你的病人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:39:31.657

我仍然没有找到关于那些“#REF！”的真正原因。但**似乎**我找到了避免它的方法。我猜原因是因为执行时间太长了。所以最后，我们为表添加索引，现在执行时间从 5 分钟下降到 0.2 秒。还有那些“#REF！” 会自动消失。

# java - MongoDB 和 Java

> ID：13994513
> 
> 赞同：0
> 
> 时间：2012-12-21T17:23:06.020
> 
> 标签：java, mongodb, mongodb-java

我正在尝试在 Java Web 服务中使用 MongoDB。

正如 Mongo 教程中所建议的，我应该有一个 MongoClient，让它成为 dbInstance、连接池并调用 dbinstance 来连接到位于 localhost 中的数据库。

所以这就是我所拥有的：

```
private static MongoClient dbInstance = null;

public static DB getDBInstance() {
    if (dbInstance == null) {
        try {
            dbInstance = new MongoClient();
            registerShutdownHook();
        }
        catch (Exception exc) {
            System.out.println("Exception");
        }
    }
    return dbInstance.getDB("SAED");
} 
```

我不明白的是，如果我连接到数据库，我怎么能理解，因为 il mongo 也不起作用（通过启动 mongod 服务）它不会引发异常。

还有一个问题，我有多个线程调用 Class.getDBInstance，我应该同步它吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:43:43.183

当您尝试连接时 mongo 未运行时，您将被抛出异常。

当您执行 MongoClient() 时，它将始终在 localhost 中查找要连接的端口 27017。您还可以对其进行参数化以连接到不同的机器和/或端口。

[您可以在Mongo 文档](http://www.mongodb.org/display/DOCS/Java+Tutorial#JavaTutorial-MakingAConnection)中阅读有关此内容的更多详细信息。

```
MongoClient mongoClient = new MongoClient();
// or
MongoClient mongoClient = new MongoClient( "localhost" );
// or
MongoClient mongoClient = new MongoClient( "localhost" , 27017 ); 
```

关于您的同步问题，是的，您可以在块级别而不是在方法级别进行同步以使其更好。

# php - FuelPHP“无效的数据源名称”错误

> ID：13994520
> 
> 赞同：2
> 
> 时间：2012-12-21T17:23:35.220
> 
> 标签：php, mysql, pdo, fuelphp

我正在尝试设置 FuelPHP 应用程序，但遇到了一个令人费解的问题。每次应用程序尝试连接到数据库时，我都会收到以下错误：

`Fuel\Core\Database_Exception [ Error ]: invalid data source name`

我在 Apache 的 VirtalHost 配置中将 FUEL_ENV 设置为“stage”，并且其中的数据库凭据`fuel/app/config/staging/db.php`似乎是正确的：我可以使用相同的用户名和密码登录 PhpMyAdmin。我不知道还能尝试什么 - 任何建议都将不胜感激。

如果有帮助，我将在运行 Ubuntu 12.04 LTS 的 Amazon EC2 实例上使用 FuelPHP 1.4，在该实例上我通过 apt-get 安装了 MySQL 和 PHP。我有另一个应用程序（在另一个实例上）运行旧版本的 FuelPHP（1.2.1），运行没有问题。

[顺便说一句，这个问题可能与这个](https://stackoverflow.com/questions/11517948/error-invalid-data-source-name-in-fuelphp-migration)问题密切相关，但我将其作为一个单独的问题提出，因为我遇到的问题不仅限于命令行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:28:36.553

好的，这花了很长时间才弄清楚，但事实证明它很容易修复：出于某种原因，在 FuelPHP 1.4 中调用了舞台环境的配置目录`staging`（在以前的版本中是`stage`）。

我不知道这是否是目录命名错误，或者这是否是一个新名称，并且 FuelPHP 中的某处尚未更新以使用它，但我发现将目录名称更改为“阶段”解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T13:34:13.600

在使用 FuelPHP 的 oil 实用程序运行单元测试时，我遇到了同样的问题。如果您遇到此问题，则很可能是配置问题。

要进行调试，请在代码中的某处不工作的地方放置如下内容，以查看 FuelPHP 尝试使用的环境：

```
<?php

echo "env: " . Fuel::$env; 
exit; 
```

就我而言，它表明它正在尝试使用“测试”环境。由于我的应用程序的配置文件夹中没有“测试”文件夹，因此它失败了。

在大多数版本的 FuelPHP 中，您在 .htaccess 文件中设置的 Fuel::$env 将适用于所有版本的 FuelPHP。但是在旧版本中，您可能会遇到此问题。

您可以编辑 bootstrap.php 文件并手动设置您想要的 FuelPHP 环境，或者设置它尝试使用的环境。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T17:36:29.637

Apache Web 服务器：SetEnv FUEL_ENV DEVELOPMENT 希望这对某人有所帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-25T02:30:14.490

对于这些都不起作用的人，请确保两件事

1.  有多个 db.php 文件`/fuel/app/config/development/db.php`。检查@Chad Hutchins 提到的环境并仔细检查用户名和密码是否正确
2.  确保`/var/mysql/mysql.sock`存在。就我而言，我正在使用`/Applications/XAMPP/xamppfiles/var/mysql/mysql.sock`，所以我需要创建一个符号链接。[按照此处的说明进行操作](http://fuelphp.com/docs/installation/troubleshooting.html#oil_db_error)

希望对某人有所帮助

# spring - Apache CXF 和 Spring，但没有 WSDL（递归链接）

> ID：13994524
> 
> 赞同：0
> 
> 时间：2012-12-21T17:23:54.727
> 
> 标签：spring, cxf

我已经使用 Apache CXF (CXFServlet) 和 Spring (ContextLoaderListener) 编写了一个小型示例 Web 服务，我已经注册了 CXFServlet 来监听`/`url。我在 beans.xml 中声明我的 bean。

当我使用 tomcat 启动 Web 服务并转到服务 url 时，我可以看到 Web 服务定义（例如方法、端点、wsdl 链接）。但问题是，当我单击 wsdl 链接时，我并没有得到 WSDL 文件，而是递归地转发回同一页面，但每次都附加了 Web 服务地址的名称：

1.  localhost:8080/Test/accountEndpoint
2.  localhost:8080/Test/accountEndpointaccountEndpoint
3.  localhost:8080/Test/accountEndpointaccountEndpointaccountEndpoint

该服务是一个“代码优先”服务，其中一个 @WebService 注释了 java 接口和一个实现类。

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>Test</display-name>
    <servlet>
            <servlet-name>cxf</servlet-name>
            <display-name>cxf</display-name>
            <description>Apache CXF Endpoint</description>
            <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
            <servlet-name>cxf</servlet-name>
            <url-pattern>/</url-pattern>
    </servlet-mapping>

    <session-config>
            <session-timeout>60</session-timeout>
    </session-config>

    <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>WEB-INF/beans.xml</param-value>
    </context-param>

    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>
</web-app> 
```

**豆类.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jaxws="http://cxf.apache.org/jaxws"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
    <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />

    <bean id="account" class=".....AccountImpl" />

    <jaxws:endpoint id="accountEndpoint" implementor="#account"
        address="accountEndpoint" />
</beans> 
```

据我了解，当我单击链接时，CXF 应该自动生成 WSDL 文件并将其提供给我，所以我不明白为什么没有发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T22:03:21.467

以这种方式指定地址，使用前导斜杠：

```
<jaxws:endpoint id="accountEndpoint" implementor="#account"
    address="/accountEndpoint" /> 
```

抱歉，修改一下，上面的不正确：

你是对的，我可以通过将 CXFServlet 映射到 的“默认”servlet 路径映射来复制行为`/`，我可以自己解决的问题是将其映射到`/*`：

```
<servlet-mapping>
        <servlet-name>cxf</servlet-name>
        <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

# php - 使用 SQL 过滤一系列日期

> ID：13994536
> 
> 赞同：3
> 
> 时间：2012-12-21T17:25:13.437
> 
> 标签：php, mysql, datetime, symfony, filter

我必须从当天开始过滤 SQL 的结果并显示直到当天 + 10 天的所有记录。因此，如果是 12 月 22 日，我应该显示从那天开始的所有记录，而不是 1 月 1 日之后的记录。我怎样才能做到这一点？我尝试了一个像下面这样的简单查询，但它似乎只显示记录直到当月的最后一天，然后而不是显示下一年的记录，而是回到当年的第一个月。

```
SELECT * 
FROM mytable 
WHERE DAY(mydatefield) >= DAY(CURRENT_TIMESTAMP) 
  AND mydatefield <= DATE_ADD(CURRENT_TIMESTAMP, INTERVAL 10 DAY) 
```

**编辑 1**

我正在使用 Symfony 2 + Doctrine 2 查询构建器，因此查询必须与它们兼容

**编辑 2**

我通过使用 eggyal 建议的查询和这个 PHP 代码解决了 Doctrine 2 问题

```
$queryBuilder->where($queryBuilder->expr()->gte('mydatefield', 'CURRENT_DATE()'))->andWhere($queryBuilder->expr()->lte('mydatefield', 'DATE_ADD(CURRENT_DATE(), 10, \'DAY\')')); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T17:30:59.737

问题在于您错误地使用了 MySQL 的[`DAY()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_day)函数，该函数返回*月份的日期*。你应该改用[`DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date); 您还可以使用[`BETWEEN ... AND ...`](http://dev.mysql.com/doc/en/comparison-operators.html#operator_between)比较运算符进行简化：

```
SELECT * 
FROM   mytable 
WHERE  DATE(mydatefield) BETWEEN CURDATE() AND CURDATE() + INTERVAL 10 DAY 
```

请注意，为了从索引优化中受益，您可以改为：

```
SELECT * 
FROM   mytable 
WHERE  mydatefield >= CURDATE() AND mydatefield < CURDATE() + INTERVAL 11 DAY 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T17:30:54.853

你应该可以使用这个：

```
SELECT * 
FROM mytable 
WHERE date(mydatefield) >= date(CURRENT_TIMESTAMP)
  AND date(mydatefield) <= date(DATE_ADD(CURRENT_TIMESTAMP, INTERVAL 10 DAY)) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/592e9/13)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:31:20.143

试试这个

```
SELECT * 
FROM mytable 
WHERE DATE( mydatefield ) BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL 10 DAY 
```

# jquery - Jquery Plugin .Net的成功回调在哪里

> ID：13994541
> 
> 赞同：2
> 
> 时间：2012-12-21T17:25:35.497
> 
> 标签：jquery, asp.net

我正在尝试使用上传 jquery 控件。下面的代码成功连接到我的 ASP.Net 处理程序并正常处理文件。处理后，我需要将一串数据发送回客户端。

[这是](https://github.com/BoSchatzberg/jfu-CSharp-Example/tree/master/jfuExample)我正在处理的示例..

我有一些问题..

1）如何从处理程序将数据发送回客户端

2) 是否有熟悉的人了解在哪里可以捕获 Handlers 成功的代码。我也没有看到一个 OnComplete, done 订阅方法。

这是我的处理程序..

```
 public class FileUpload : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {

            if (context.Request.Files.Count == 0)
            {

                LogRequest("No files sent.");

                context.Response.ContentType = "text/plain";
                context.Response.Write("No files received.");

            }
            else
            {

                HttpPostedFile uploadedfile = context.Request.Files[0];

                string FileName = uploadedfile.FileName;
                string FileType = uploadedfile.ContentType;
                int FileSize = uploadedfile.ContentLength;

                LogRequest(FileName + ", " + FileType + ", " + FileSize);

                string theName=uploadedfile.FileName.Substring(uploadedfile.FileName.LastIndexOf('\\'));

                uploadedfile.SaveAs(HttpContext.Current.Server.MapPath("/Upload") + theName);

                context.Response.ContentType = "text/plain";
                context.Response.Write("{\"name\":\"" + FileName + "\",\"type\":\"" + FileType + "\",\"size\":\"" + FileSize + "\"}");

                context.Response.Write("Hi From Handler");
            }

        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        } 
```

这是我的客户代码..

```
 <script>
            /*global $ */
            $(function () {
                $('#file_upload').fileUploadUI({
                    url: 'FileUpload.ashx',
                    method: 'POST',
                    uploadTable: $('#files'),
                    downloadTable: $('#files'),
                    buildUploadRow: function (files, index) {
                        return $('<tr><td>' + files[index].name + '<\/td>' +
                            '<td class="file_upload_progress"><div><\/div><\/td>' +
                            '<td class="file_upload_cancel">' +
                            '<button class="ui-state-default ui-corner-all" title="Cancel">' +
                            '<span class="ui-icon ui-icon-cancel">Cancel<\/span>' +
                            '<\/button><\/td><\/tr>');
                    },
                    buildDownloadRow: function (file) {
                        return $('<tr><td>' + file.name + '<\/td><\/tr>');
                    },
                    parseResponse: function (data) {
                        alert("yo");
                    }
                });    
            });

        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:44:58.257

> *1）如何从处理程序将数据发送回客户端*

您这样做的方式似乎是正确的，只需将其写入响应流即可。

> *2) 是否有熟悉的人了解在哪里可以捕获 Handlers 成功的代码。我也没有看到一个 OnComplete, done 订阅方法。*

我没有使用过[fileUploadUI](https://github.com/blueimp/jQuery-File-Upload/wiki/API)插件，但是根据文档，*send*方法返回一个 jqXHR 对象，您应该能够将其绑定到成功函数

这是文档中的片段

```
var jqXHR = $('#fileupload').fileupload('send', {files: filesList})
    .success(function (result, textStatus, jqXHR) {/* ... */})
    .error(function (jqXHR, textStatus, errorThrown) {/* ... */})
    .complete(function (result, textStatus, jqXHR) {/* ... */}); 
```

编辑：
应该有两种方法可以绑定到回调，或者通过将它们与选项对象一起传递，或者稍后通过将事件侦听器绑定到小部件元素。

例如：

```
 $('#fileupload').fileupload({
         always: function (e, data) {
           //the jqXHR is a property of the data object        
         },
     //rest of the options
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T20:03:29.610

添加到 Jack 的部分响应中。您可以通过两种方式定义事件回调：

1) 将事件监听器绑定到小部件元素，例如

```
$('#fileupload')
    .bind('fileuploadsend', function (e, data) {/* ... */})
    .bind('fileuploaddone', function (e, data) {/* ... */})
    .bind('fileuploadfail', function (e, data) {/* ... */}) 
```

这些函数将在小部件的回调执行后被调用。因此，使用“fileuploaddone”绑定的函数将在小部件的“done”回调运行后调用。

2) 要完全覆盖小部件的回调，您可以将回调定义为小部件选项的一部分。

```
$('#fileupload').fileupload({
     done: function (e, data) {

     },
     send: function (e, data) {

     },
     //other options 
```

});

所有小部件事件的文档：[https](https://github.com/blueimp/jQuery-File-Upload/wiki/Options) ://github.com/blueimp/jQuery-File-Upload/wiki/Options （搜索“回调选项”）

如果您在 IE9 上遇到 done 或其他回调的问题，那么此处的响应可能会很有用：[blueimp jquery file upload - "done", "complete" 回调不适用于 IE 9](https://stackoverflow.com/questions/10122165/blueimp-jquery-file-upload-done-complete-callbacks-not-working-for-ie-9/10347897#10347897)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T11:34:53.927

我有同样的问题，尝试将返回的数据类型更改为“html”。例如：

```
 $('#fied').fileupload({
        url: 'handler.ashx',
        type: 'POST',
        dataType: 'html',
    }); 
```

在我的情况下工作。

# git - 如何避免将特定文件与 git-pull 合并？

> ID：13994546
> 
> 赞同：6
> 
> 时间：2012-12-21T17:25:51.510
> 
> 标签：git, github, gitignore, git-pull

在我的本地存储库中，我有一个修改后的设置文件，该文件的不同版本存储在 GitHub 上。每当我从 GitHub 拉入本地存储库时，我的本地副本都会更改。

有什么办法可以避免我的本地副本被*git-pull*覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:30:08.730

### 你不能拉取部分提交

虽然您可以做一些花哨的工作来获取分支并仅检查特定文件，但出于实际目的，*git-pull*将合并提交清单中的所有文件。所以，你需要改变你的工作流程。

### 使用示例文件的正确工作流程

如果您需要将文件存储在存储库中，但又不想覆盖本地更改，那么正确的做法是创建一个示例文件，并使用您的 .gitignore 文件来避免将文件的本地副本提交回存储库。例如：

```
# Move the repository-managed copy of the example file, 
# then add the related local filename to your repository's
# .gitignore file.
git mv .rcfile rcfile.example
echo '.rcfile' >> .gitignore

# Commit the necessary files.
git add .gitignore
git commit -m 'Add example file.'

# Copy the repository-managed example to your local file,
# which will not be overwritten on future pulls.
cp rcfile.example .rcfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:30:29.763

这就是[gitignore](http://git-scm.com/docs/gitignore)的用途——还有谷歌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:31:50.243

您需要将设置文件添加到 .gitignore 。在此[链接上阅读更多内容](http://gitready.com/beginner/2009/01/19/ignoring-files.html)

# css - 麻烦（垂直）在另一个具有相对百分比大小的 DIV 中居中文本

> ID：13994549
> 
> 赞同：13
> 
> 时间：2012-12-21T17:26:13.237
> 
> 标签：css, html

**免责声明：**我不相信这是重复的，因为我使用相对大小来生成全屏网格布局而不使用`px`.

**问题：**在这个 jsFiddle [http://jsfiddle.net/X3ZDy/73/](http://jsfiddle.net/X3ZDy/73/)中，我有四个等比例的盒子。它们旨在跨越屏幕宽度并保持方形。其中包含一些样本方形 DIV (40% x 40%)。我正在努力获得一个`lbl`水平和垂直居中的文本标签`bbl`。

我见过（并尝试过）的所有示例都不起作用，因为它们要求我知道标签的高度，或者它们使用了浏览器限制的`table-layout`技巧。我需要按照小提琴对所有相对大小进行此操作。

有人可以帮忙吗？我需要使用纯 CSS（无 JS）解决方案在所有浏览器上工作。我很惊讶在 div 中垂直对齐文本似乎非常棘手。我不介意我们是否使用块或内联元素作为文本标签。

请注意，我不是在寻找 TABLE 解决方案，这是一个需要工作 jsFiddle 的 DIV 和 CSS 难题。

**更多：** 感谢大家的回答，但对于未来的海报，请注意 (width == padding-bottom) 是让我的 DIV 成为**square**的魔法。它是网格布局系统的关键，所以我需要维护它。

**更新** 使用相对尺寸和没有固定高度非常棘手，但我想我终于找到了问题的答案（如下）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-24T15:00:15.953

我想我终于找到了解决问题的方法。问题是我见过的几乎所有其他解决方案都无法应对当孩子大小发生变化并且不知道任何高度时。我需要它来实现响应式所有 % 设计，其中任何地方都没有固定的高度。

我偶然发现了这个 SO 答案[使用 CSS 3 垂直对齐](https://stackoverflow.com/questions/5412912/align-vertically-using-css-3#16026893)，这是我的灵感。

![垂直居中的文本](../Images/2c97e431e1ef1054cac5ddd959edb219.png)

首先，使用全 % 设计，您需要一个零高度的包装元素作为父元素内的定位占位符；

```
<body>
<div class="container">
    <div class="divWrapper">
        <div class="tx">This text will center align no matter how many lines there are</div>
    </div>
</div>
</body> 
```

在这种情况下，我的容器是一个简单的方块图块；

```
.container
{
    margin:2%;
    background-color:#888888;
    width:30%;
    padding-bottom:30%; /* relative size and position on page  */
    float: left;
    position:relative;  /* coord system stop */
    top: 0px; /* IE? */
} 
```

所以没有什么特别的，除了它*没有高度*，这使得元素居中这个普遍问题变得棘手。它需要绝对定位，以便我们可以在子元素中使用定位坐标（我认为这可能需要 IE 中的“顶部”）。

接下来，*绝对*定位的包装器完全覆盖父元素并完全填充它。

```
.divWrapper
{
     position:absolute;
     top:0px;
     padding-top:50%; /* center the top of child elements vetically */
     padding-bottom:50%;
     height:0px;
} 
```

填充意味着任何子元素都将从*父元素*的正中间开始，但是这个包装器本身没有高度并且不占用页面上的空间。

还没有什么新东西。

最后，我们要居中的子元素。这里的技巧是让子元素根据它**自己的高度**垂直向上滑动。你不能使用 50%，因为那是父容器的 50%，而不是我们自己。看似简单的答案是使用转换。我不敢相信我以前没有发现这一点；

```
.tx
{               
    position: relative;
    background-color: transparent;
    text-align: center; /* horizontal centering */

    -webkit-transform: translateY(-50%); /* child now centers itself relative to the  midline based on own contents */
    -moz-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -ms-filter: 'progid:DXImageTransform.Microsoft.Matrix(M11=0.5, M12=0, M21=0, M22=0.5,  SizingMethod="auto expand")'; /*IE8 */
    filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.5, M12=0, M21=0, M22=0.5,  SizingMethod='auto expand'); /*IE6, IE7*/
    transform: translateY(-50%);    
} 
```

这是[小提琴](http://jsfiddle.net/pbf3v/)

但是，我还没有在 IE6+ 上测试过这个，所以如果有人想验证我的矩阵转换，我会很感激的。

# **更新**

事实证明，甚至不需要包装器。这就是正确垂直居中所需的全部内容；

```
.tx
{       
    width:100%;        // +1 to @RonM
    position: absolute;
    text-align: center;
    padding-top:100%;
    -webkit-transform: translateY(-50%); /* child now centers itself relative to the midline based on own contents */
    -moz-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -o-transform: translateY(-50%);
    -ms-filter: 'progid:DXImageTransform.Microsoft.Matrix(Dx=0,Dy=0)'; /*IE8 */
    filter: progid:DXImageTransform.Microsoft.Matrix(Dx=0,Dy=0); /*IE6, IE7*/
    transform: translateY(-50%);    
} 
```

## 和更新的[小提琴](http://jsfiddle.net/danieljsinclair/pbf3v/2/)

但仍然不能在 IE6 中工作 - 看看这些转换，我认为没有 JavaScript 就无法为那个遗留物做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T22:12:10.083

现实情况是，HTML 中唯一具有原生流体垂直对齐的标签是表格单元格。

CSS 没有任何东西可以让你得到你想要的。今天不行。

如果要求是： 1\. 适用于所有浏览器 2\. 流畅的高度 3\. 垂直居中 4\. 没有脚本 5\. 没有表格 6\. 你现在想要解决方案，而不是几年后

您只剩下 1 个选项： 1\. 放弃您的一项要求

否则这个“谜题”是不完整的。这是对您的请求的唯一完整可接受的答案。

......如果我能在这个特殊的挑战上浪费时间得到所有的薪水:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T05:09:40.387

不要自虐；让 IE7 去吧... :) （据此[，](http://gs.statcounter.com/#browser_version-ww-monthly-201211-201211-bar)使用它的人并不多。）

我用两种方法试了一下，一种是 uses `display: table`，另一种是 uses `line-height`。不幸的是，我无法使用 PC，因此它们仅在 Mac 10.8.1、iOS 6.0.1 Safari 和 iOS Simulator 5.0 和 5.1 Safari 上的 Chrome 25.0.1365.1 canary、FF 18 和 Safari 6.0 中进行了测试.

该`display: table`方法在 iOS Simulator 5.0 和 5.1 上存在问题，文本垂直居中不完全。

根据[quirksmode](http://www.quirksmode.org/css/display.html#t06)，该`display:table`方法应与 IE8 及更高版本兼容。[理论上](http://www.quirksmode.org/css/display.html#t03)，line-height 方法*可能*与 IE 6/7 兼容。

为了在每个正方形中创建居中的框，我将样式设置`.box6`为`position: relative`并将`.bc`样式更改为：

```
.bc  {
    position:absolute;
    top: 30%;
    bottom: 30%;
    left: 30%;
    right: 30%;
    overflow: hidden;
} 
```

`.bc`每种方法都会创建一个非常高的容器，在元素内部具有静态高度。静态高度的确切值是任意的，它只需要高于它将包含的内容。

该`display: table`方法将`.bbl`和`.bbl .lbl`样式更改为：

```
.bbl {
  display: table;
  height: 500px;
  padding-top: 50%;
  margin-top: -250px;
  background-color: blanchedalmond;
  width: 100%;
}

.bbl .lbl {
  display: table-cell;
  vertical-align: middle;
  text-align:center;
} 
```

对于该`line-height`方法，HTML 为：

```
<div class="bc">
    <div id="line-h-outter">
        <span id="line-h-inner">a lot more text than in the other blob. The quick brown fox jumped over the lazy dog</span>
    </div>
</div> 
```

CSS：

```
#line-h-outter {
  line-height: 500px;
  vertical-align: middle;
  margin-top: -250px;
  padding-top: 50%;
}

#line-h-inner {
  display: inline-block;
  line-height: normal;
  vertical-align: middle;
  text-align: center;
  width: 100%;
} 
```

[http://jsfiddle.net/X3ZDy/93/](http://jsfiddle.net/X3ZDy/93/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:48:41.053

标题应该**[以未知](http://css-tricks.com/centering-in-the-unknown/)**为中心 ；-)

我使用表格更新了您的示例：http: [//jsfiddle.net/uWtqY/](http://jsfiddle.net/uWtqY/)并且文本在您使用表格描述的框中对齐，但您不想要这个。

添加了一个像这样的表：

```
<table width="100%" height="100%"><tr><td>One line</td></tr> </table></div> 
```

里面 `<div class="lbl">`

只是为了跨浏览器支持。

**编辑**

在做了一些研究之后，确实很难在百分比内对齐元素。尝试了很多东西，但你的代码我不确定它是否适合所有人的设计。那么我的意思是，你可能首先需要构建你的垂直对齐，然后尝试使用百分比。从我在这个领域的经验中，我了解到一个好的方法是从内部元素开始设计，然后在复杂性增加时退出。因此，在所有事情中都有百分比可能不是最好的实现（而且在移动设备上也不是）。

**编辑 2**

在与我的几个工作伙伴以及 HTML 领域的真正极客合并后，答案很明确。要么您支持 < IE7 并且您使用表格或幽灵元素或跨度来做到这一点，要么您使用几篇文章中描述的所有 tequniques 并且您可以支持 >=IE7 。另一种选择是为每个浏览器使用特定的结构。

我认为该链接按原样解释它并有一个不错的标题（**基本上就是您需要的**）：

->**[以未知为中心](http://css-tricks.com/centering-in-the-unknown/)**

希望最好。

PS。参考链接：

*   [http://web.archive.org/web/20091017204329/http://www.zann-marketing.com/developer/20050518/vertically-centering-text-using-css.html](http://web.archive.org/web/20091017204329/http://www.zann-marketing.com/developer/20050518/vertically-centering-text-using-css.html)

*   [http://css-tricks.com/vertically-center-multi-lined-text/](http://css-tricks.com/vertically-center-multi-lined-text/)

*   [http://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

让我知道它是否有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T15:43:03.523

我更新了 CSS 以利用“间隔”类。它放置在您的“bc”div 之前和彩色框内。这给了我我认为你要求的效果。

```
html:
<div class="rgCol boxCol box6" style="background-color:lightgray">
        <div class="spacer"></div>
        <div class="bc">

css
.spacer {width:100%;padding-bottom:30%;display:block; } 
```

我将垫片底部填充了 30%，然后将“bbl”div 的绝对左侧位置移动到 30%（从 2%）。blanchdelemond 盒子保持其形状和大小。

[http://jsfiddle.net/X3ZDy/37/](http://jsfiddle.net/X3ZDy/37/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-13T17:12:07.473

今天我偶然发现了类似的问题 - 垂直和水平居中的方形 div 的子元素具有预先设置的宽度（它们是使用填充技术制成的方形）。我必须在保持纵横比的同时将其用于图像，但是将子元素更改为任何目标元素会很简单。

对于这种情况，不适合行高、边距/填充或显示：表格单元格的解决方法。但是有一个使用`margin: auto`.

HTML：

```
<div class="squareContainer>
    <div class="contentWrapper">
        <img class="imagePreview" alt="Image preview" src="//URL.jpg">
    </div>
</div> 
```

CSS：

```
div.squareContainer {
    position: relative;
    box-sizing: border-box;
    height: 0;
    padding-bottom: 25%;
    width: 25%;
}
div.contentWrapper {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    top: 0;
}
img.imagePreview {
    display: block;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    top: 0;
    margin: auto;  /* This is the important line */
    max-height: 90%;
    max-width: 90%;
} 
```

有用的资源：

[http://jsfiddle.net/mBBJM/1/](http://jsfiddle.net/mBBJM/1/)

[http://codepen.io/HugoGiraudel/pen/ucKEC](http://codepen.io/HugoGiraudel/pen/ucKEC)

希望有帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-30T22:33:33.253

你可以简单地解决这个问题，没有所有的怪异（也许有一天他们会修复 CSS 盒子模型，但在那之前）：

```
<table>
<tr>
<td width="50" height="50" align="center" valign="middle">text</td>
</tr>
</table> 
```

这里的所有都是它的。选择你的宽度和高度，把它放在一个 div 中并称之为好。

从不使用表格的想法是一个非常糟糕的指导方针，以至于自虐。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-01-03T00:52:31.450

你的意思是这样吗？

![图片](../Images/7943c8b19ed4f0e33b730a3ef8acd4d1.png)

```
<div class="mycontainer">
  <div class="rgRow">
    <div class="rgCol" style="background-color:pink">
      <div class="boxCol">BOX1</div>
    </div>
    <div class="rgCol" style="background-color:lightgray">
      <div class="boxCol">
        <div class="boxLabel">a lot more text than in the other blob. The quick brown fox jumped over the lazy dog</div>
      </div>
    </div>
    <div class="rgCol" style="background-color:maroon">
      <div class="boxCol">
        <div class="boxLabel">One liner</div>
      </div>
    </div>
    <div class="rgCol" style="background-color:yellow">
      <div class="boxCol">BOX4</div>
    </div>
  </div>
</div>

.mycontainer
{
    background-color: #000000;
    display: inline-table;
}

.rgRow
{
    width: 100%;
    display: table-row;
}

.rgCol
{
    width: 25%;
    height: 100%;
    text-align: center;
    vertical-align: middle;
    display: table-cell;
}

.boxCol
{
    display: inline-block;
    width: 100%;
    text-align: center;
    vertical-align: middle;
}

.boxLabel
{
    text-align: center;
    vertical-align: middle;
    background-color: blanchedalmond;
    overflow: hidden;
    margin: 2%;
    width: 96%;
    height: 96%;
} 
```

# c# - 在 TcpClient.Read() 中处理 IAC 字节

> ID：13994551
> 
> 赞同：0
> 
> 时间：2012-12-21T17:26:18.377
> 
> 标签：c#, buffer, bytearray, ascii, tcpclient

我正在使用 TcpClient 作为字节数组从 Telnet 服务器读取数据并使用 ASCII 编码器转换为字符串，即：

```
int size;
byte[] buf;
tcpclient.Read(buf,0,MAX_BUFFER_SIZE);
string resp = new System.Text.ASCIIEncoding().GetString(fullBuffer, 0, fullBuffer.Length); 
```

并具有`buf`读取的字节。我想在 中提取（并稍后回答）IAC 命令`buf`，而不是在`resp`. 你有一个有效的建议方法。

我首先想到的是：在`resp`(a) 中查找 "\0xFF" 字符串，如果后面跟着 "\0xFF"，将 "\0xFF\0xFF" 替换为 "\0xFF" (b) 如果不提​​取后面的字节作为 IAC 并回答. `resp.Remove()`两个字符。

这是一个有效的解决方案吗？您是否建议在`byte[]`级别解决它（有没有办法让`byte[]`ASCII 编码器忽略其中的一些值？）或编码后`string`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:32:42.910

> 我首先想到的是：如果后面跟着“\0xFF”，则在相应的（a）中查找“\0xFF”字符串，如果没有将后面的字节提取为IAC，则将“\0xFF\0xFF”替换为“\0xFF”（b）和回答。resp.Remove() 两个字符。

a 部分会起作用，但 b 部分是缺乏的。有几个命令包含超过 2 个字节。您将不得不做更多的工作并确定每个命令应该消耗多少字节。例如，SB 命令将包含可变数量的字节，具体取决于子选项是什么。

# php - 我有一个 PHP 正则表达式，如何为字符数添加条件？

> ID：13994553
> 
> 赞同：1
> 
> 时间：2012-12-21T17:26:30.543
> 
> 标签：php, regex, preg-split

我有一个正则表达式，我在 php 中使用：

```
$word_array = preg_split(
    '/(\/|\.|-|_|=|\?|\&|html|shtml|www|php|cgi|htm|aspx|asp|index|com|net|org|%|\+)/',
    urldecode($path), NULL, PREG_SPLIT_NO_EMPTY
); 
```

它工作得很好。它需要一大块 url 参数，例如：

```
/2009/06/pagerank-update.html 
```

并返回一个数组，如：

```
array(4) {
  [0]=>
  string(4) "2009"
  [1]=>
  string(2) "06"
  [2]=>
  string(8) "pagerank"
  [3]=>
  string(6) "update"
} 
```

我唯一需要的是它**也不返回少于 3 个字符的字符串**。所以`"06"`字符串是垃圾，我目前正在使用 if 语句来清除它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:36:20.667

分裂的魔力。我最初的假设在技术上是不正确的（尽管更容易找到一个解决方案）。因此，让我们检查您的拆分模式：

```
(\/|\.|-|_|=|\?|\&|html|shtml|www|php|cgi|htm|aspx|asp|index|com|net|org|%|\+) 
```

我稍微重新安排了一下。不需要外括号，我将单个字符移到最后的字符类中：

```
 html|shtml|www|php|cgi|htm|aspx|asp|index|com|net|org|[\/._=?&%+-] 
```

这对于一些预先排序。让我们将这种模式称为拆分模式，`s`简而言之并对其进行定义。

您希望匹配不属于 split-at 模式中的那些字符的所有部分，并且至少匹配三个字符。

我可以通过以下模式实现这一点，包括支持正确的拆分序列和 unicode 支持。

```
$pattern    = '/
    (?(DEFINE)
        (?<s> # define subpattern which is the split pattern
            html|shtml|www|php|cgi|htm|aspx|asp|index|com|net|org|
            [\\/._=?&%+-] # a little bit optimized with a character class
        )
    )
    (?:(?&s))          # consume the subpattern (URL starts with \/)
    \K                 # capture starts here
    (?:(?!(?&s)).){3,} # ensure this is not the skip pattern, take 3 characters minimum
/ux'; 
```

或者更小：

```
$path       = '/2009/06/pagerank-update.htmltesthtmltest%C3%A4shtml';
$subject    = urldecode($path);
$pattern    = '/(?(DEFINE)(?<s>html|shtml|www|php|cgi|htm|aspx|asp|index|com|net|org|[\\/._=?&%+-]))(?:(?&s))\K(?:(?!(?&s)).){3,}/u';
$word_array = preg_match_all($pattern, $subject, $m) ? $m[0] : [];
print_r($word_array); 
```

结果：

```
Array
(
    [0] => 2009
    [1] => pagerank
    [2] => update
    [3] => test
    [4] => testä
) 
```

也可以使用相同的原理`preg_split`。有点不同：

```
$pattern = '/
    (?(DEFINE)       # define subpattern which is the split pattern
        (?<s>
    html|shtml|www|php|cgi|htm|aspx|asp|index|com|net|org|
    [\/._=?&%+-]
        )
    )
    (?:(?!(?&s)).){3,}(*SKIP)(*FAIL)       # three or more is okay
    |(?:(?!(?&s)).){1,2}(*SKIP)(*ACCEPT)   # two or one is none
    |(?&s)                                 # split @ split, at least
/ux'; 
```

用法：

```
$word_array = preg_split($pattern, $subject, 0, PREG_SPLIT_NO_EMPTY); 
```

结果：

```
Array
(
    [0] => 2009
    [1] => pagerank
    [2] => update
    [3] => test
    [4] => testä
) 
```

这些例程按要求工作。但这确实有其价格和性能。成本与旧答案相似。

相关问题：

*   [与正则表达式的反匹配](https://stackoverflow.com/q/4660818/367456)
*   [通过分隔符拆分字符串，但如果它被转义则不会](https://stackoverflow.com/q/6243778/367456)

* * *

> 旧答案，进行两步处理（先拆分，然后过滤）

因为您使用的是拆分例程，所以无论长度如何，它都会拆分。

所以你可以做的是过滤结果。您可以使用正则表达式 ( [`preg_filter`](http://php.net/preg_filter)) 再次执行此操作，例如删除所有较小的三个字符的表达式：

```
$word_array = preg_filter(
    '/^.{3,}$/', '$0', 
    preg_split(
        '/(\/|\.|-|_|=|\?|\&|html|shtml|www|php|cgi|htm|aspx|asp|index|com|net|org|%|\+)/',
        urldecode($path), 
        NULL, 
        PREG_SPLIT_NO_EMPTY
    )
); 
```

结果：

```
Array
(
    [0] => 2009
    [2] => pagerank
    [3] => update
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:31:50.403

我猜你正在构建某种 URL 路由器。

检测哪些参数有用，哪些参数不应该是此代码的一部分。短参数是否相关可能因页面而异。

在这种情况下，你不能忽略第一个元素吗？您的页面应该（或“处理程序”）应该知道要使用哪些参数来调用它，它应该进行分类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:38:25.197

我认为，如果您试图从 URL 中获取含义，那么您实际上希望以不需要复杂的正则表达式来获取值的方式编写干净的 URL。

在许多情况下，这涉及使用服务器重定向规则和前端控制器或请求路由器。

所以你构建的是干净的 URL

```
/value1/value2/value3 
```

URL 中根本没有任何`.html`,`.php`等。

在我看来，您没有充分解决进入系统（即 Web 服务器）的问题，以使您的 URL 解析尽可能简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T17:56:37.690

尝试[`preg_match()`](http://php.net/preg_match_all)而不是怎么样`preg_split()`？

模式（使用[断言](http://php.net/manual/en/regexp.reference.assertions.php)）：

```
/([a-z0-9]{3,})(?<!htm|html|shtml|www|php|cgi|htm|aspx|asp|index|com|net|org)/iu 
```

函数调用：

```
$pattern = '/([a-z0-9]{3,})(?<!htm|html|shtml|www|php|cgi|htm|aspx|asp|index|com|net|org)/iu';
$subject = '/2009/06/pagerank-update.html';
preg_match_all($pattern, $subject, $matches);
print_r($matches); 
```

您可以在此处尝试该功能：[functions-online.com/preg_match_all.html](http://www.functions-online.com/preg_match_all.html)

希望这可以帮助

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-21T17:28:39.093

不要使用正则表达式来分解该路径。只需使用`explode`.

```
$dirs = explode( '/', urldecode($path) ); 
```

然后，如果您需要拆分数组的单个元素，请执行此操作，就像最后的“pagerank-update”元素一样。

编辑：

关键是你有两个不同的问题。首先，您要拆分斜杠上的路径元素。然后，您想将文件名分解成更小的部分。不要试图把所有东西都塞进一个试图做所有事情的正则表达式中。

三个离散步骤：

*   $dirs = 爆炸...
*   清除参数 < 3 字符
*   最后分解文件参数

如果您将逻辑分解为离散的逻辑块而不是试图让正则表达式完成所有事情，那就更清楚了。

# ms-access - 循环根据查询编写电子邮件正文

> ID：13994557
> 
> 赞同：0
> 
> 时间：2012-12-21T17:26:44.940
> 
> 标签：ms-access, vba

我想将查询中的所有记录写入电子邮件。

这将写入查询中的第一条记录。

```
MyBodyText = MailList("AccountName") & "   -   " & MailList("ExpirationDate") 
```

我知道我需要某种循环。

MailList 定义如下

```
Set MailList = db.OpenRecordset("qryDateEmail") 
```

```
Option Compare Database
Option Explicit

Public Function ExpirationDate()

Dim strSQL
Dim db As DAO.Database
Dim MailList As DAO.Recordset
Dim MyOutlook As Outlook.Application
Dim MyMail As Outlook.MailItem
Dim Subjectline As String
Dim BodyFile As String
Dim fso As FileSystemObject
Dim MyBody As TextStream
Dim MyBodyText As String
Dim MyDecision As String
Dim strReportName As String
Dim strEnroll As String
Dim strWho As String
Dim strEmail As String

Set fso = New FileSystemObject
Set MyOutlook = New Outlook.Application
Set db = CurrentDb()
Set MailList = db.OpenRecordset("qryDateEmail")

Subjectline$ = "Expiration Date" & " " & Date

Set MyMail = MyOutlook.CreateItem(olMailItem)

Do While Not MailList.EOF
    MyBodyText = MailList("AccountName") & "   -   " & MailList("ExpirationDate")
    MailList.MoveNext
Loop

MyMail.To = "" & ""
MyMail.CC = CurrentUser() & ""

MyMail.Subject = Subjectline$

MyMail.Body = MyBodyText
MyMail.Display

strEmail = Now()
strWho = CurrentUser()

Set MyMail = Nothing
Set MyOutlook = Nothing

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:44:55.473

您可以遍历记录集，将每行中的这些值添加到正文中。

未经测试的空气代码：

```
With MailList
    Do While Not .EOF
        MyBodyText = MyBodyText & !AccountName & _
            "   -   " & !ExpirationDate & vbCrLf
        .MoveNext
    Loop
End With 
```

现在我看到您在问题中添加了类似的代码。问题是代码`MyBodyText`通过循环覆盖了每次的值。追加到`MyBodyText`每次而不是替换文本...

```
MyBodyText = MyBodyText & "new text" 
```

代替 ...

```
MyBodyText = "new text" 
```

# android - ACTION_SHUTDOWN 不起作用

> ID：13994562
> 
> 赞同：1
> 
> 时间：2012-12-21T17:26:58.917
> 
> 标签：android, android-manifest

我正在使用一个简单的广播接收器在设备关闭时发送短信。

我已经在不同的手机上尝试过，它在其中两个上运行良好，但在我的三星 Galaxy S2 和我的三星 Galaxy Xcover 上却不行。

我也尝试了 QUICKBOOT_POWEROFF 操作，但没有。

我在这里错过了什么吗？

# web-services - 使用 Spring 编写第一个 Web 服务

> ID：13994566
> 
> 赞同：0
> 
> 时间：2012-12-21T17:27:14.517
> 
> 标签：web-services, spring, jboss

我正在考虑用 Spring 编写我的第一个 Web 服务。有人可以告诉我互联网上的一个很好的例子吗？我将在 Jboss AS 中运行此服务

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:30:21.403

我想 Spring 的教程应该是你的第一个起点：

[http://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html](http://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html)

# asp.net-mvc-3 - 向控制器提交表单视图

> ID：13994567
> 
> 赞同：0
> 
> 时间：2012-12-21T17:27:23.627
> 
> 标签：asp.net-mvc-3, forms, view, controller, http-post

我的表单视图中有一个表单定义为

```
using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data" })) 
```

此表单包含多个按钮和按钮类型的输入

```
<input type="submit" value="val1" name="action">
<input type="submit" value="val2" name="action">
<input type="submit" value="val3" name="action" />
<button class="button" type="submit" name="action" value="val4">Val4</button> 
```

我有这个视图的 2 个控制器

```
Public ActionResult form{
} 
```

和

```
[HttpPost]
public ActionResult form(String button)
{
  switch (actionType)
  {
    case "val1":
      return RedirectToAction("AnotherView"); 
    case "val2":
      return RedirectToAction("AnotherView2");
    default:
      return RedirectToAction("AnotherView3");
  }
} 
```

但是无论我点击哪个按钮，我都会被重定向到表单中定义的主页

```
using (Html.BeginForm("Index", "Home", 
```

我的问题是如何解决这个问题，我如何确定这个 post 方法在我刚刚输入时绑定到我的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:43:32.170

```
using (Html.BeginForm("action_name", "controllername", FormMethod.GET, new { enctype = "multipart/form-data" })) 
```

使用输入类型选择：

```
<select name="action">
<option value="val1" >val1</option>
<option value="val2" >val2</option>
<option value="val3" >val3</option></select> 
```

和控制器的方法

```
public ActionResult action_name(String action){
   switch (action)
  {
        case "val1":
          return RedirectToAction("AnotherView"); 
        case "val2":
          return RedirectToAction("AnotherView2");
        default:
          return RedirectToAction("AnotherView3");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:40:24.507

如果您指定一个名为`action`MVC 的表单字段，则会将此解释为要路由到的控制器上的操作。因此点击`val1`最终会执行该方法：

```
public ActionResult val1()
{
} 
```

如果此方法不存在，您的错误处理将接管。

解决方案： *不要`action`用作表单域的名称。*

# c# - 当用户处于不同时区时，如何阻止日期/时间比较失败？

> ID：13994572
> 
> 赞同：0
> 
> 时间：2012-12-21T17:27:39.233
> 
> 标签：c#, datetime, timezone

我正在获取可执行文件的“LastWriteTime”，并将其与我设置的内部 DateTime 进行比较。如果 LastWriteTime 小于或等于内部 DateTime，那么我将从数据库中清除两个表。

这段代码在太平洋时区非常适合我。但是，如果用户在另一个时区（例如比我早 4 小时），则它不起作用，因为“LastWriteTime”返回转换为他们时区的时间。例如，我正在寻找“12/12/2012 8:38:12 AM”的值，如果他们比我早 4 小时，该值会自动更改为“12/12/2012 12:38:12 PM”在他们的系统上。

有人可以告诉我我应该在我的代码中修改什么以考虑不同的时区，因此“LastWriteTime”和我的“build2023_EXE_Date”变量都返回相同的日期/时间，所以我对两个日期/时间值的比较不会'无论我的最终用户在哪个时区，都不会失败？

我使用的是 .NET 3.5，而不是 .Net 4.x

```
//http://stackoverflow.com/questions/1600962/displaying-the-build-date
string w_file = "MyEXE.exe";
string w_directory = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) +
                       Path.DirectorySeparatorChar + "MyEXE";

DateTime currentExeTime = File.GetLastWriteTime(System.IO.Path.Combine(w_directory, w_file));

DateTime build2023_EXE_Date = new DateTime(2012, 12, 12, 8, 38, 12); //"12/12/2012 8:38:12 AM"

//We need to truncate the millisecond time off of the EXE LastWriteTime
//or else when we compare to our internal DateTime build2323_EXE_Date value,
//it will not match
//http://stackoverflow.com/questions/1004698/how-to-truncate-milliseconds-off-of-a-net-datetime
currentExeTime = new DateTime(
     currentExeTime.Ticks - (currentExeTime.Ticks % TimeSpan.TicksPerSecond),
            currentExeTime.Kind
            );

if (currentExeTime <= build2023_EXE_Date) //If previous build matches or is before the Build 2023 date then clear these two tables.
{
    //This will fail the comparision if the user is in a different time zone than me.
    //Clear tables
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:33:55.623

除非您特别需要将日期保持在当地时间或有关联的时区，否则我建议您改用通用时间。这使得使用日期变得更加容易，因为它们都比较合理，并且实际上可以提高性能（当您请求时`DateTime.Now`，.NET 调用`DateTime.UtcNow`然后对本地时间执行相对昂贵的调整）。

另一种选择是使用`DateTimeOffset`，它存储带有偏移量的日期（*不是时区！* -例如，DST 会给你不同的偏移量）并使比较像通用的`DateTime`. 不幸的是，虽然，`GetLastWriteTime`不使用`DateTimeOffset`所以这可能不适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:34:05.427

使用`DateTime ToUniversalTime()`方法

# ruby - Ruby，File.new 随机失败

> ID：13994576
> 
> 赞同：0
> 
> 时间：2012-12-21T17:28:21.973
> 
> 标签：ruby, delayed-job

我有一个很好用的脚本，除了它随机无法生成新文件......

这是代码：

```
...
file_log_path = File.join(Rails.root, 'log', "xls_import_#{Time.now.to_i}.log")
@log = File.new(file_log_path, 'w+')
.... 
```

这是delayed_job.log中的错误

```
2012-12-21T18:18:41+0100: [Worker(delayed_job host:webserver2.netbanana.it pid:24482)] LoadDataFromCsv failed with Errno::ENOENT: No such file or directory - /var/www/rails/myapp/releases/20121210093945/log/xls_import_1356110321.log - 0 failed attempts
2012-12-21T18:18:41+0100: [Worker(delayed_job host:webserver2.netbanana.it pid:24482)] PERMANENTLY removing LoadDataFromCsv because of 1 consecutive failures. 
```

其他时候，它有效！有人可以帮助我吗？

- 编辑：

好吧...似乎 Rails.root 使用了错误的部署路径...实际上 /var/www/rails/myapp/releases/20121210093945 不存在。

但是，正如我所说，脚本有时可以工作，有时不能......如果我重新加载延迟作业，我的脚本会工作一些，然后开始失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:31:01.093

如果您使用 Capistrano 来管理您的版本，我猜这是基于路径结构的情况，那么您需要小心引用可以在部署发生后删除的路径。每次部署时都需要重新启动 DelayedJob，否则它可能在孤立目录中工作。

如果可能，您可能希望使用该`shared/log`路径，因为它在部署之间仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:57:03.397

我发现了几个delayed_job 进程（僵尸），仍在运行......将它们全部杀死（不是metalica 的歌曲），现在它可以工作了！

# c# - 如何使用反射或替代以编程方式创建函数调用？

> ID：13994579
> 
> 赞同：8
> 
> 时间：2012-12-21T17:28:37.170
> 
> 标签：c#, reflection

我对反射有点新手。我希望有可能做我想做的事。我一直在通过 ProjectEuler 学习该语言，并且我有一个名为 Problem 的基类。每个单独的 PE 问题都是一个单独的类，即 Problem16。为了运行我的计算，我使用以下代码：

```
using System;
using Euler.Problems;
using Euler.Library;

namespace Euler
{
    static class Program
    {
        [STAThread]
        static void Main()
        {
            Problem prob = new Problem27();
        }
    }
} 
```

我现在已经完成了 50 个问题，我想创建一个循环来运行它们。我的基类 Problem 有一个方法可以将问题编号、答案和在每个类的默认构造函数中调用的执行时间附加到文本文件中。我可以手动更改所有 50 个函数的调用，但随着我继续完成问题，这最终会成为很多工作。

我宁愿以编程方式进行。我希望这个伪代码成为现实：

```
for (int i = 1; i <= 50; i++)
{
    string statement = "Problem prob = new Problem" + i + "();";
    // Execute statement
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T17:36:27.983

有了反射，你可以做更好的事情。

例如，声明一个接口

```
interface IEulerProblem 
{
   void SolveProblem();
} 
```

编写从 IEulerProblem 派生的类。

然后你可以在（技术上）一行漂亮的代码中运行所有内容：

```
Assembly.GetEntryAssembly()
        .GetTypes()
        .Where(t => typeof(IEulerProblem).IsAssignableFrom(t))
        .Where(t => !t.IsInterface && !t.IsAbstract)
        .Select(t => Activator.CreateInstance(t) as IEulerProblem)
        .OrderBy(t => t.GetType().Name).ToList()
        .ForEach(p => p.SolveProblem()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:34:22.683

首先看一下[获取抽象类的所有继承类，](https://stackoverflow.com/a/6944605/209259)它也适用于非抽象类。

然后您可以简单地为每个调用基类上的方法。

```
foreach (problem p in problems)
{
  p.MyMethod()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:34:48.407

是的，这是可能的，您需要阅读 MethodInfo.Invoke：http: [//msdn.microsoft.com/en-us/library/system.reflection.methodinfo.invoke.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.invoke.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:35:10.013

```
var problems = Assembly.GetExecutingAssembly().GetTypes()
                       .Where(t => !t.IsAbstract && typeof(Problem).IsAssignableFrom(t));

foreach(var p in problems)
{
    var euler = Activator.CreateInstance(p) as Problem;
    euler.Solve(); // ??
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T18:29:23.880

As one of the possible solutions, I would like to propose to create list of constructor delegates without the use of reflection.
You will still have to populate the list 50 times, but only once. You will have typesafety though and can specify different constructors for each of the derived classes. Something like this:

```
 List<Func<Test>> tests = new List<Func<Test>>();
            tests.Add(() => new Test1());
            tests.Add(() => new Test2());
            foreach (var constructor in tests)
            {
                Test test = constructor();
            } 
```

# css - 将图像地图区域坐标转换为绝对定位的 Div

> ID：13994581
> 
> 赞同：2
> 
> 时间：2012-12-21T17:28:39.610
> 
> 标签：css, html, imagemap, area

我有一个图像地图，其中包含我想尝试并自动转换为绝对定位的 div 的区域。

我想转换这个：

```
<area shape="rect" coords="662,346,937,426" href="#" /> 
```

对此（包含在绝对 div 中）：

```
<a style="left:662px; top:346px; width:275px; height:80px;" href="#" /> 
```

基本上它归结为转换：

```
<area shape="rect" coords="A,B,C,D" href="#" /> 
```

对此（包含在绝对 div 中）：

```
<a style="left:Apx; top:Bpx; width:C-Apx; height:D-Bpx;" href="#" /> 
```

我想找到一种通过脚本和/或查找/替换来自动执行此操作的方法。我不认为正则表达式会起作用，因为它们不做任何计算（请随意证明我错了）。它可能可以用 Javascript 完成，但我不太了解：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:16:06.313

您可以使用 JQuery 解决此问题：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

<script>
$(document).ready(function() {
    var cords = $('.area1').attr('coords').split(',');
    $('.href1').attr('style', 'left:'+cords[0]+'px; top:'+cords[1]+'px; width:'+ (cords[2]-cords[0]) +'px; height:'+ (cords[3]-cords[1]) +'px')
});​
</script>

<area class='area1' shape="rect" coords="662,346,937,426" href="#" />
<a class='href1' style="left:0; top:0; width:0; height:0;" href="#" ></a>​ 
```

测试：http: [//jsfiddle.net/G8TLm/1/](http://jsfiddle.net/G8TLm/1/)

# c# - Request.UserHostAddress 和 Request.ServerVariables["REMOTE_ADDR"].ToString() 有什么区别

> ID：13994582
> 
> 赞同：45
> 
> 时间：2012-12-21T17:28:48.817
> 
> 标签：c#, asp.net, request

在这里，我可以使用这两种方法中的任何一种。有什么区别，我应该使用哪一个？

**方法一：**

```
 string srUserIp = "";
    try
    {
        srUserIp = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"].ToString();
    }
    catch
    {

    } 
```

**方法二：**

```
 string srUserIp = "";
    try
    {
        srUserIp = Request.UserHostAddress.ToString();
    }
    catch
    {

    } 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-21T17:39:43.467

**简短的回答：**两者是相同的。

**长答案：**要确定两者之间的区别，请使用 Reflector（或您喜欢的任何反汇编程序）。

该`HttpRequest.UserHostAddress`属性的代码如下：

```
public string UserHostAddress
{
    get
    {
        if (this._wr != null)
        {
            return this._wr.GetRemoteAddress();
        }
        return null;
    }
} 
```

请注意，它返回`_wr.GetRemoteAddress()`. 变量是对象的`_wr`一个​​实例`HttpWorkerRequest`。有不同的类派生出来`HttpWorkerRequest`，使用哪一个取决于您使用的是 IIS 6、IIS 7 还是更高版本，以及其他一些因素，但是您将在 Web 应用程序中使用的所有类都具有相同的代码`GetRemoteAddress()`，即：

```
public override string GetRemoteAddress()
{
    return this.GetServerVariable("REMOTE_ADDR");
} 
```

如您所见，`GetRemoteAddress()`只需返回服务器变量`REMOTE_ADDR`。

至于使用哪一个，我建议使用该`UserHostAddress`属性，因为它不依赖于“魔术字符串”。

快乐编程

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T17:31:42.920

没有区别。它们返回完全相同的值。但是，一个是 IntelliSense 友好的，而另一个不是。

# python - 使用 pyodbc 读取 DBF 文件

> ID：13994584
> 
> 赞同：6
> 
> 时间：2012-12-21T17:28:56.123
> 
> 标签：python, database, pyodbc, dbf

在一个项目中，我需要从一个Visual FoxPro数据库中提取数据，它存储在dbf文件中，y有一个数据目录有539个文件我需要考虑，每个文件代表一个数据库表，所以我一直在做一些测试，我的代码是这样的：

```
import pyodbc

connection = pyodbc.connect("Driver={Microsoft Visual FoxPro Driver};SourceType=DBF;SourceDB=P:\\Data;Exclusive=No;Collate=Machine;NULL=No;DELETED=Yes")
tables = connection.cursor().tables()
for _ in tables:
    print _ 
```

这仅打印 15 个表，没有明显的模式，总是相同的 15 个表，我认为这是因为其余的表是空的，但我检查了列表中的一些表（dbf 文件）也是空的，然后，我以为是权限问题，但是所有文件都有相同的权限结构，所以，我不知道这里发生了什么。

有光吗？？

**编辑：** 它没有截断输出，它列出的表不是第 15 个或类似的表

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T20:57:10.370

我做到了！！！！

我正在做的事情有几个问题，在这里我提出了我为解决它所做的事情（在第一次使用 Ethan Furman 的解决方案实施它之后）

首先是驱动问题，原来Windows的DBF驱动是32位的程序，运行在64位的操作系统上，所以，我安装了Python-amd64，这是第一个问题，所以我安装了32位Python。

第二个问题是库/文件问题，据此[，](https://stackoverflow.com/questions/754436/odbc-dbf-files-in-c-sharp) VFP > 7 中的 dbf 文件是不同的，所以我的 pyodbc 库无法正确读取它们，所以我尝试了一些 OLE-DB 库但没有成功，我决定从头开始。

谷歌搜索了一段时间把我带到了[这篇](http://mail.python.org/pipermail/python-win32/2006-March/004420.html)文章，它终于让我明白了这一点

基本上，我所做的如下：

```
import win32com.client

conn = win32com.client.Dispatch('ADODB.Connection')
db = 'C:\\Profit\\profit_a\\ARMM'
dsn = 'Provider=VFPOLEDB.1;Data Source=%s' % db
conn.Open(dsn)

cmd = win32com.client.Dispatch('ADODB.Command')
cmd.ActiveConnection = conn
cmd.CommandText = "Select * from factura, reng_fac where factura.fact_num = reng_fac.fact_num AND factura.fact_num = 6099;"

rs, total = cmd.Execute() # This returns a tuple: (<RecordSet>, number_of_records)

while total:
    for x in xrange(rs.Fields.Count):
        print '%s --> %s' % (rs.Fields.item(x).Name, rs.Fields.item(x).Value)
    rs.MoveNext()        #<- Extra indent
    total = total - 1 
```

它给了我 20 条记录，我用 DBFCommander 检查了这些记录，一切正常

首先，您需要安装[pywin32 扩展](http://sourceforge.net/projects/pywin32/files/pywin32/)（32 位）和[Visual FoxPro OLE-DB 提供程序](http://www.microsoft.com/en-us/download/details.aspx?id=14839)（仅适用于 32 位），在我的情况下是 VFP 9.0

此外，最好阅读w3c 网站上的de [ADO 文档](http://www.w3schools.com/ado/default.asp)

这对我有用。非常感谢回复的人

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T23:33:14.323

我会使用我自己的[dbf 包](http://python.org/pypi/dbf)，代码会是这样的：

```
import dbf
from glob import glob

for dbf_file in glob(r'p:\data\*.dbf'):
    with dbf.Table(dbf_file) as table:
        for record in table:
            do_something_with(record) 
```

一个表是类似列表的，通过它迭代返回记录。记录是list-、dict-和obj-like，迭代返回值；除了遍历记录之外，单个字段可以通过偏移量（`record[0]`对于第一个字段）、使用类字典访问（`record['some_field']`）的字段名或使用类 obj.attr 访问（`record.some_field`）的字段名来访问。

如果您只想将每个`dbf`文件的内容转储到一个`csv`文件中，您可以这样做：

```
for dbf_file in glob(r'p:\data\*.dbf'):
    with dbf.Table(dbf_file) as table:
        dbf.export(table, dbf_file) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T17:51:18.403

我知道这并不能直接回答您的问题，但可能仍会有所帮助。我在使用 ODBC 和 VFP 数据库时遇到了很多问题，而且我发现如果可能的话，将 VFP 表视为自由表通常要容易得多。

使用 Yusdi Santoso 的 dbf.py 和 glob，这里有一些代码可以打开目录中的每个表并运行每个记录。

```
import glob
import os
import dbf

os.chdir("P:\\data")
for file in glob.glob("*.dbf"):
    table = dbf.readDbf(file)
    for row in table:
         #do stuff 
```

# python - 使用 django-celery 的日志中的 Heroku 警告

> ID：13994588
> 
> 赞同：1
> 
> 时间：2012-12-21T17:29:24.863
> 
> 标签：python, django, heroku, python-2.7, django-celery

我正在尝试使用 heroku 部署我的第一个应用程序，但我一直遇到问题。本质上，现在每当我尝试在打开 heroku 的情况下打开我的应用程序时，我都会收到“应用程序错误”页面，告诉我检查我的日志。我成功地完成了本教程，但现在对我自己的项目执行相同的步骤，我没有任何运气。据我从日志中可以看出，我得到的相关警告是：

```
WARNING/MainProcess] celery@ce7e5946-3bc3-4622-856f-863b49f442d4 ready
WARNING/Beat] Reset: Account for new version field
WARNING/Beat] Reset: Account for utc_enabled field
WARNING/Beat] Reset: Account for new tz field 
```

最后三个似乎都源于 celery/beat.py 中的 PersistentScheluler 类，但我不明白为什么。我不知道第一个警告（或者为什么这甚至是一个警告）。有什么见解吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T23:16:47.983

您是否尝试在 Django 设置中将 DEBUG 设置为 True ？

这应该为您提供有关错误的足够信息以修复它。

# python - 在 Linux 上连接 Django 1.4> 与 MS SQL Server 2012

> ID：13994589
> 
> 赞同：1
> 
> 时间：2012-12-21T17:29:29.760
> 
> 标签：python, django, sql-server-2012

将在 Linux 上运行的 Django 1.4 和更新版本与 Microsoft SQL Server 2012 连接的最佳实践是什么？我也想知道使用什么默认服务器排序规则。

我的研究 (http://code.google.com/p/django-pyodbc/) 表明 Django-PyODBC 是最好的解决方案，但他们声称支持 SQL Server 2000 和 2005。他们的功能包括“通过大部分 Django 测试套房。” 我真的在寻找一些可行的东西，并将在需要 python3 的 django 未来版本中得到维护。

我还看到[http://tryolabs.com/Blog/2012/06/25/connecting-sql-server-database-python-under-ubuntu/](http://tryolabs.com/Blog/2012/06/25/connecting-sql-server-database-python-under-ubuntu/)已经过深入研究，但不包括 Django DB 后端模块推荐。

请让我知道该怎么做。

# silverlight-5.0 - Silverlight 5 双击列表框

> ID：13994592
> 
> 赞同：1
> 
> 时间：2012-12-21T17:30:03.577
> 
> 标签：silverlight-5.0

我已经看到很多使用新 Silverlight 5 双击功能的示例。但是，他们都没有展示如何在 ListBox 中捕获双击。

有人有任何关于如何设置的示例/提示吗？

我正在使用 MVVM。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-06T02:53:27.080

您可以通过创建一个记录鼠标点击次数的自定义触发器来做到这一点。一旦`args.ClickCount == 2`通过参数`MouseButtonEventArgs args`为真，你可以调用你需要的逻辑：

```
public class DoubleClickTrigger : TriggerBase<FrameworkElement> 
```

在`<DataTemplate>`for 中，`ListBox`您可以使用上面创建的自定义事件触发器。有关更深入的信息，请参阅以下帖子：

[Silverlight 的双击触发器](https://stackoverflow.com/questions/22996871/double-click-trigger-for-silverlight)

# jdbctemplate - JdbcTemplate 未更新

> ID：13994593
> 
> 赞同：2
> 
> 时间：2012-12-21T17:30:06.183
> 
> 标签：jdbctemplate, spring-jdbc

我正在尝试`batchUpdate`通过 JdbcTemplate 在**ORACLE**数据库上发布一个简单的问题。我不断将更新返回值作为`-2`. 我可以通过简单的 jdbc 完成更新`preparedStatement`。但`JdbcTemplate`不能做同样的事情。JdbcTemplate的返回值到底`-2`意味着什么？

# python - 如何在python中将时区添加到天真的日期时间实例中

> ID：13994594
> 
> 赞同：51
> 
> 时间：2012-12-21T17:30:05.800
> 
> 标签：python, datetime, timezone, pytz

我有一个`datetime`没有时区信息的。我现在正在获取时区信息并想将时区添加到现有的日期时间实例中，我该怎么办？

```
d = datetime.datetime.now()
tz = pytz.timezone('Asia/Taipei') 
```

如何将时区信息添加`tz`到日期时间`a`

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-21T17:31:07.627

用于`tz.localize(d)`本地化实例。从[文档](http://pytz.sourceforge.net/#localized-times-and-date-arithmetic)中：

> 第一种是使用pytz库提供的localize()方法。这用于本地化一个简单的日期时间（没有时区信息的日期时间）：
> 
> ```
> >>> loc_dt = eastern.localize(datetime(2002, 10, 27, 6, 0, 0))
> >>> print(loc_dt.strftime(fmt))
> 2002-10-27 06:00:00 EST-0500 
> ```

如果您*不*使用`tz.localize()`，而是使用`datetime.replace()`，则很可能会使用*历史*偏移量；`tz.localize()`将选择对给定日期有效的正确偏移量。例如，美国东部时区 DST 开始和结束日期随时间而变化。

当您尝试本地化一个模棱两可的日期时间值时，因为它跨越了从夏季时间到冬季时间的过渡期，反之亦然，将咨询时区以查看生成的日期时间对象是否应该`.dst()`返回 True 或 False。`is_dst`您可以使用以下关键字参数覆盖时区的默认值`.localize()`：

```
dt = tz.localize(naive, is_dst=True) 
```

甚至通过设置完全关闭选择`is_dst=None`。在这种情况下，或者在极少数情况下，*没有*为时区设置默认值，不明确的日期时间值会导致引发`AmbiguousTimeError`异常。该`is_dst`标志仅用于不明确的日期时间值，否则将被忽略。

要返回另一种方式，将时区感知对象转回天真对象，请使用`.replace(tzinfo=None)`：

```
naivedt = awaredt.replace(tzinfo=None) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-25T18:22:49.973

如果您知道您的原始日期时间是在您尝试添加的时区中“测量”的，您可以（但可能不应该）使用`replace`而不是`localize`.

```
# d = datetime.datetime.now()
# tz = pytz.timezone('Asia/Taipei')
d = d.replace(tzinfo=tz) 
```

我可以想象两次这可能有意义（第二次发生在我身上）：

1.  您的服务器语言环境设置为不正确的时区，并且您试图`datetime`通过让实例知道这个不正确的时区来更正实例（并且可能稍后将其本地化为“正确”时区，以便 now() 的值与其他时区匹配您将其与（也许是您的手表）进行比较的时间
2.  您想用时区 (tzinfo) 属性“标记”一个`time`实例 ( **NOT** a `datetime`)，以便以后可以使用该属性来形成一个完整的`datetime`实例。

# ruby-on-rails - Rails Rake 测试：运行测试时出错：单位！# Errors running test:units! # <runtimeerror: 9="" 4837="" command="" failed="" with="" status="" (1):="" [ruby="" -i"lib:test"="" -i"="" users="" jake="" .rvm="" gems="" ruby-1.9.3-p286="" 问问题="" 2012-12-21t17:30:09.770="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" errors="" running="" test:units!="" #<runtimeerror:="" rake-10.0.2="" lib"="" "="" lib="" rake="" rake_test_loader.rb"="" "test="" unit="" **="" *_test.rb"="" ]="">这是否意味着我的单元测试文件有问题，或者我的模型有问题？或者两者都可以？ 下面的完整跟踪。 [app:]$ rake test --trace ** Invoke test (first_time) ** Execute test ** Invoke test:run (first_time) ** Execute test:run ** Invoke test:units (first_time) ** Invoke test:prepare (first_time) ** Invoke db:test:prepare (first_time) ** Invoke db:abort_if_pending_migrations (first_time) ** Invoke environment (first_time) ** Execute environment ** Invoke db:load_config (first_time) ** Execute db:load_config ** Execute db:abort_if_pending_migrations ** Execute db:test:prepare ** Invoke db:test:load (first_time) ** Invoke db:test:purge (first_time) ** Invoke environment ** Invoke db:load_config ** Execute db:test:purge ** Execute db:test:load ** Invoke db:test:load_schema (first_time) ** Invoke db:test:purge ** Execute db:test:load_schema ** Invoke db:schema:load (first_time) ** Invoke environment ** Invoke db:load_config ** Execute db:schema:load ** Execute test:prepare ** Execute test:units Run options: # Running tests: ..F Finished tests in 0.411867s, 7.2839 tests/s, 7.2839 assertions/s. 1) Failure: test_should_save_user_with_valid_email_and_password(UserTest) [/Users/jake/Sites/app/test/unit/user_test.rb:9]: Didn't save a valid record 3 tests, 3 assertions, 1 failures, 0 errors, 0 skips ** Invoke test:functionals (first_time) ** Invoke test:prepare ** Execute test:functionals Run options: # Running tests: Finished tests in 0.004578s, 0.0000 tests/s, 0.0000 assertions/s. 0 tests, 0 assertions, 0 failures, 0 errors, 0 skips ** Invoke test:integration (first_time) ** Invoke test:prepare ** Execute test:integration Errors running test:units! # <runtimeerror: command="" failed="" with="" status="" (1):="" [ruby="" -i"lib:test"="" -i"="" users="" jake="" .rvm="" gems="" ruby-1.9.3-p286="" rake-10.0.2="" lib"="" "="" lib="" rake="" rake_test_loader.rb"="" "test="" unit="" **="" *_test.rb"="" ]="">编辑 此错误仅在 rake 返回错误时出现。如果没有错误，这个运行测试的错误也不会出现......好奇和好奇...... 这是您的一项测试未通过时的标准响应。我用一个模型创建了一个空项目，并添加了以下单元测试： require 'test_helper' class BlobTest < ActiveSupport::TestCase test "test errors" do assert false end end 然后我运行它： dhcp168:unittest pmorse$ rake test Run options: # Running tests: F Finished tests in 0.030618s, 32.6605 tests/s, 32.6605 assertions/s. 1) Failure: test_test_errors(BlobTest) [/Users/pmorse/Projects/unittest/test/unit/blob_test.rb:8]: Failed assertion, no message given. 1 tests, 1 assertions, 1 failures, 0 errors, 0 skips Run options: # Running tests: ....... Finished tests in 0.123589s, 56.6393 tests/s, 80.9133 assertions/s. 7 tests, 10 assertions, 0 failures, 0 errors, 0 skips Errors running test:units! # <runtimeerror: command="" failed="" with="" status="" (1):="" [ruby="" -i"lib:test"="" -i"="" users="" pmorse="" .rvm="" gems="" ruby-1.9.3-p194@rails="" rake-10.0.3="" lib"="" "="" lib="" rake="" rake_test_loader.rb"="" "test="" unit="" **="" *_test.rb"="" ]="">我怀疑这是因为 Test::Unit 向 Rake 返回了一个错误代码，而 Rake 正在返回这个输出，这使得它看起来像是有问题。（我想出了点问题：你的测试没有通过。） ruby-on-railsunit-testingtestingrake 4 2 回答 2 This answer is useful 12 这是您的一项测试未通过时的标准响应。我用一个模型创建了一个空项目，并添加了以下单元测试： require 'test_helper' class BlobTest < ActiveSupport::TestCase test "test errors" do assert false end end 然后我运行它： dhcp168:unittest pmorse$ rake test Run options: # Running tests: F Finished tests in 0.030618s, 32.6605 tests/s, 32.6605 assertions/s. 1) Failure: test_test_errors(BlobTest) [/Users/pmorse/Projects/unittest/test/unit/blob_test.rb:8]: Failed assertion, no message given. 1 tests, 1 assertions, 1 failures, 0 errors, 0 skips Run options: # Running tests: ....... Finished tests in 0.123589s, 56.6393 tests/s, 80.9133 assertions/s. 7 tests, 10 assertions, 0 failures, 0 errors, 0 skips Errors running test:units! # <runtimeerror: command="" failed="" with="" status="" (1):="" [ruby="" -i"lib:test"="" -i"="" users="" pmorse="" .rvm="" gems="" ruby-1.9.3-p194@rails="" rake-10.0.3="" lib"="" "="" lib="" rake="" rake_test_loader.rb"="" "test="" unit="" **="" *_test.rb"="" ]="">我怀疑这是因为 Test::Unit 向 Rake 返回了一个错误代码，而 Rake 正在返回这个输出，这使得它看起来像是有问题。（我想出了点问题：你的测试没有通过。） 于 2012-12-31T14:30:24.670 回答 This answer is useful 0 我也遇到了这个问题。 4小时后调查。我发现我定义了一个假设数据库中必须有记录的范围。像 scope :has_no_rep, where('country_id != ?', Country.global.id)` def self.global Country.where(:code => GLOBAL_CODE).first end 然后在初始化测试环境期间“加载”这个范围。将引发一个错误，这将导致问题.. 所以我对这个问题的建议是。为您的开发环境设置一个新的空数据库（实际上。越类似测试的环境越好）。并尝试rails s。这可以帮助您定位错误。而不是模棱两可的“命令失败，状态为 X” 于 2013-07-05T06:14:07.933 回答 Related 1 iphone - 在 Ipad 中通过 XML Parsing 生成动态控件 0 android - Android上的快速傅立叶逆变换算法 2 javascript - Javascript Hide Div 再次出现 1 android - 带有动画的android应用程序的自定义标签栏 1 vb.net - vb.net 中的随机数据库字段 2 ios - 如何使用来自 YQL 股票数据的 JSON 请求？ 2 iphone - 使用 UIScrollView 以编程方式放大图片的小区域 3 java - 将数据推送到堆栈 2 ruby-on-rails - 如何将我的自定义错误 html 更改为两次渲染本身？ 1 ios - 在使用 iOS SDK 进行身份验证时，是否可以从我的后端发出 Facebook API 请求？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</runtimeerror:></runtimeerror:></runtimeerror:></runtimeerror:>

> ID：13994595
> 
> 赞同：9
> 
> 时间：
> 
> 标签：ruby-on-rails, unit-testing, testing, rake

`Errors running test:units! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/Users/jake/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.2/lib" "/Users/jake/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.2/lib/rake/rake_test_loader.rb" "test/unit/**/*_test.rb" ]>`

这是否意味着我的单元测试文件有问题，或者我的模型有问题？或者两者都可以？

下面的完整跟踪。

```
[app:]$ rake test --trace
** Invoke test (first_time)
** Execute test
** Invoke test:run (first_time)
** Execute test:run
** Invoke test:units (first_time)
** Invoke test:prepare (first_time)
** Invoke db:test:prepare (first_time)
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:abort_if_pending_migrations
** Execute db:test:prepare
** Invoke db:test:load (first_time)
** Invoke db:test:purge (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:test:purge
** Execute db:test:load
** Invoke db:test:load_schema (first_time)
** Invoke db:test:purge 
** Execute db:test:load_schema
** Invoke db:schema:load (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:schema:load
** Execute test:prepare
** Execute test:units
Run options: 

# Running tests:

..F

Finished tests in 0.411867s, 7.2839 tests/s, 7.2839 assertions/s.

  1) Failure:
test_should_save_user_with_valid_email_and_password(UserTest) [/Users/jake/Sites/app/test/unit/user_test.rb:9]:
Didn't save a valid record

3 tests, 3 assertions, 1 failures, 0 errors, 0 skips
** Invoke test:functionals (first_time)
** Invoke test:prepare 
** Execute test:functionals
Run options: 

# Running tests:

Finished tests in 0.004578s, 0.0000 tests/s, 0.0000 assertions/s.

0 tests, 0 assertions, 0 failures, 0 errors, 0 skips
** Invoke test:integration (first_time)
** Invoke test:prepare 
** Execute test:integration
Errors running test:units! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/Users/jake/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.2/lib" "/Users/jake/.rvm/gems/ruby-1.9.3-p286/gems/rake-10.0.2/lib/rake/rake_test_loader.rb" "test/unit/**/*_test.rb" ]> 
```

**编辑**

此错误仅在 rake 返回错误时出现。如果没有错误，这个运行测试的错误也不会出现......好奇和好奇......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T14:30:24.670

这是您的一项测试未通过时的标准响应。我用一个模型创建了一个空项目，并添加了以下单元测试：

```
require 'test_helper'

class BlobTest < ActiveSupport::TestCase
  test "test errors" do
    assert false
  end
end 
```

然后我运行它：

```
dhcp168:unittest pmorse$ rake test
Run options: 

# Running tests:

F

Finished tests in 0.030618s, 32.6605 tests/s, 32.6605 assertions/s.

  1) Failure:
test_test_errors(BlobTest) [/Users/pmorse/Projects/unittest/test/unit/blob_test.rb:8]:
Failed assertion, no message given.

1 tests, 1 assertions, 1 failures, 0 errors, 0 skips
Run options: 

# Running tests:

.......

Finished tests in 0.123589s, 56.6393 tests/s, 80.9133 assertions/s.

7 tests, 10 assertions, 0 failures, 0 errors, 0 skips
Errors running test:units! #<RuntimeError: Command failed with status (1): [ruby -I"lib:test" -I"/Users/pmorse/.rvm/gems/ruby-1.9.3-p194@rails/gems/rake-10.0.3/lib" "/Users/pmorse/.rvm/gems/ruby-1.9.3-p194@rails/gems/rake-10.0.3/lib/rake/rake_test_loader.rb" "test/unit/**/*_test.rb" ]> 
```

我怀疑这是因为 Test::Unit 向 Rake 返回了一个错误代码，而 Rake 正在返回这个输出，这使得它看起来像是有问题。（我想出了点问题：你的测试没有通过。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T06:14:07.933

我也遇到了这个问题。

4小时后调查。我发现我定义了一个假设数据库中必须有记录的范围。像

```
scope :has_no_rep, where('country_id != ?', Country.global.id)`

def self.global
  Country.where(:code => GLOBAL_CODE).first
end 
```

然后在初始化测试环境期间“加载”这个范围。将引发一个错误，这将导致问题..

**所以我对这个问题的建议是。为您的开发环境设置一个新的空数据库（实际上。越类似测试的环境越好）。并尝试`rails s`。这可以帮助您定位错误。而不是模棱两可的“命令失败，状态为 X”**

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：（名称错误

> ID：13994613
> 
> 赞同：2
> 
> 时间：2012-12-21T17:31:13.227
> 
> 标签：java, packaging

我的项目位于“\BankPrj”文件夹中

(1).com 文件夹

(2) `Account.java`, `Customer.java`,`TestBanking.java`文件

(3) 主类在`TestBanking.java`

这是错误..

![在此处输入图像描述](../Images/93344832f2c126491ec4f4b1d0de1290.png)

这是我的完整项目

[https://docs.google.com/folder/d/0BzMe2Ya7vhrAem5rcEljc3k1cFE/edit](https://docs.google.com/folder/d/0BzMe2Ya7vhrAem5rcEljc3k1cFE/edit)

请纠正错误。

我从测试文件夹本身执行了 TestBanking.class。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T17:36:30.947

您的包裹是 com.mybank.test

您应该调用的方式是转到文件夹 BankPrj。

现在做 **java -classpath 。com.mybank.test.TestBanking**

现在应该可以了。

请记住，您不能进入文件夹的叶子来执行您的课程。您应该始终停留在根目录（使用包时）并使用完全限定的包名和类名来执行它。

希望这可以帮助！

# asp.net - 向标签控件添加文本

> ID：13994623
> 
> 赞同：1
> 
> 时间：2012-12-21T17:32:05.497
> 
> 标签：asp.net, vb.net

好的，我已经为此奋斗了几天，在任何地方都找不到答案。

我正在使用 Framework 3.5 和 -//W3C//DTD XHTML 1.0 Transitional//EN

现在这是我的问题：

当我升级框架时，我所有的 vb.net 页面都停止了工作。我得到“文本”不是“标签”的成员。他们工作只是在之前找到，现在我没有尝试解决这个问题。我通常是 C# 编码器，但是要转换的页面很多，所以我需要一个解决方案。

这是我尝试过的一些示例：

```
Dim lbl As String = DirectCast(row.FindControl("labelID"), label).Text()
someLabel.Text = Trim(lbl.Text)

Dim lbl As label = TryCast(row.FindControl("labelID"), label)
someLabel.Text = Trim(lbl.Text)

Dim lbl As label = CType(row.FindControl("labelID"), label)  
someLabel.Text = Trim(lbl.Text) 
```

每次尝试都会给我同样的错误。我是否缺少程序集参考或其他内容？这是我正在使用的列表：

```
Imports System.Data.SqlClient
Imports System.Data.SqlTypes
Imports System.Data.Sql
Imports System
Imports System.Data
Imports System.Web.Mail
Imports System.Web.Configuration
Imports System.Object
Imports System.Web.UI.Control
Imports System.Web.UI.WebControls
Imports System.Web.UI.WebControls.MultiView
Imports System.Collections.CollectionBase 
```

**编辑 ：：**

好的，我发现了问题。我有一个非常古老的类，它干扰了 App_Code 文件夹中的演员表。一旦我删除了这个类，我就用它来定义我的标签：

```
Dim lbl As String = CType(row.FindControl("LabelID"), label).Text
someLabel.Text = Trim(lbl) 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:13:07.257

我将它用于我正在工作的列表。将值标签步进到变量，然后将其传递给相同的标签

**C＃**

```
 LinkButton btn = e.CommandSource as LinkButton;  // Identify the link button
            ListViewItem item = btn.NamingContainer as ListViewItem;
            Label lbl1 = item.FindControl("Label1") as Label;
              if (lbl1.Text != "1")
               {
                   lbl1.Text = "1";
               } 
```

**VB**

```
 Dim btn As LinkButton = TryCast(e.CommandSource, LinkButton)
            ' Identify the link button
            Dim item As ListViewItem = TryCast(btn.NamingContainer, ListViewItem)
            Dim lbl1 As Label = TryCast(item.FindControl("Label1"), Label)
              If lbl1.Text <> "1" Then
                lbl1.Text = "1"
              End If 
```

# r - 饼图和图例重叠

> ID：13994624
> 
> 赞同：1
> 
> 时间：2012-12-21T17:32:11.290
> 
> 标签：r

我正在尝试创建一个饼图，就像[这里](http://swarm.cs.pub.ro/~laura/pie.png)一样，但是图例和实际的饼图是重叠的。

我使用的代码在这里：

```
library(ggplot2)
library(grid)

par(mai = c(1,1,1,1))

numb <- c(41, 30, 21, 8)
colors <- c("black", "grey70", "grey30","white")

numb_labels <- round(numb/sum(numb) * 100, 1)
numb_labels <- paste(numb_labels, "%", sep="")
xx <- c("the process of familiarizing with the codebase",
        "the patch review process",
        "the impact on the users of the project",
        "high degree visibility of the contributions")

pie(numb, col=colors, labels=numb_labels, clockwise=TRUE)

legend("top", legend = xx, fill=colors, bty="n") 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:45:20.873

一种解决方案是将参数`xpd=TRUE`与函数一起使用`par()`，然后在绘图区域之外设置图例，并使用图例坐标。

```
par(xpd=TRUE)
pie(numb, col=colors, labels=numb_labels, clockwise=TRUE)
legend(-1.4,1.6, legend = xx, fill=colors, bty="n") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T17:47:35.830

我不知道你为什么附上`ggplot2`。

您可以使用`layout`：

```
par(mai = c(0,0,0,0))
layout(c(1,2),heights=c(0.3,1))
plot.new()
legend("bottom", legend = xx, fill=colors, bty="n")
pie(numb, col=colors, labels=numb_labels, clockwise=TRUE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T12:25:29.490

```
par(mai = c(1,1,4,1), xpd=TRUE)
pie(numb, col=colors, labels=numb_labels, clockwise=TRUE)
legend("top", inset=c(0,-0.5),cex=0.9,legend = xx, fill=colors, bty="n") 
```

注意：插图的第一个元素水平移动图例，第二个元素垂直移动。cex 参数可以调整图例的大小。因此可以通过更改这些参数值来调整您的图例。

# javascript - Knockout JS：使用更改 DOM 的旧验证代码

> ID：13994625
> 
> 赞同：4
> 
> 时间：2012-12-21T17:32:19.023
> 
> 标签：javascript, jquery, knockout.js, knockout-mapping-plugin, knockout-2.0

请参阅底部的编辑。

我的公司拥有庞大的代码库，我们希望开始更有效地使用淘汰赛。但是，我们已经有验证代码来处理客户端验证的所有方面。它使用 jQuery 来显示验证错误消息并清理用户输入。

例如，如果我将类“validate-range”添加到输入中，它将使用 jQuery 更改/聚焦事件来跟踪更改，然后如果值超出范围，它将使用最小/最大值替换它$(输入).val()。由于此验证代码以编程方式进行更改，因此在进行此类更改时，我的淘汰视图模型将不会更新。

这个验证码在系统中随处可见，暂时不能替换，所以为了使用knockout，我必须让它和这个代码一起工作。到目前为止，我尝试的是创建一个自定义值绑定，该绑定添加了一个额外的更改事件处理程序，用于在验证代码更改输入值时更新视图模型。

这在所有情况下都非常有效，除了在 foreach 绑定中（这与使用模板/我想象的绑定相同）。我的更改事件处理程序不会在 foreach 中使用自定义值绑定的任何输入上触发，即使每次可观察数组更改时自定义绑定都会重新应用于 foreach 中的所有输入。

我希望有人以前处理过这个问题，不得不使用现有的 javascript 代码来改变 DOM 值，因此不会更新视图模型。任何帮助是极大的赞赏。

用于自定义绑定、创建视图模型和旧验证代码的 Javascript 代码：

```
// custom value binding for amounts
ko.bindingHandlers.amountValue = {
  init: function (element, valueAccessor) {
    var underlyingObservable = valueAccessor(),

        interceptor = ko.computed({
          read: function () {
            var value = underlyingObservable();
            return formatAmount(value);
          },

          write: function (newValue) {
            var current = underlyingObservable(),
                valueToWrite = parseAmount(newValue);

            if (valueToWrite !== current)
              underlyingObservable(valueToWrite);
            else if (newValue !== current.toString())
              underlyingObservable.valueHasMutated();
          }
        });

    // i apply a change event handler when applying the bindings which calls the write function of the interceptor.
    // the intention is to have the change handler be called anytime the old validation code changes an input box's value via 
    // $(input).val("new value"); In the case of the foreach binding, whenever the observable array changes, and the table rows
    // are re-rendered, this code does get ran when re-applying the bindings, however the change handler doesn't get called when values are changed.
    ko.applyBindingsToNode(element, { value: interceptor, event: { change: function () { interceptor($(element).val()); } } });
  }
};

// view model creation
// auto create ko view model from json sent from server
$(function () {
  viewModel = ko.mapping.fromJS(jsonModel);
  ko.applyBindings(viewModel);
});

// old validation code
$(document).on("focusout", ".validate-range", function () {
  var $element = $(this),
      val = $element.val(),
      min = $element.attr("data-val-range-min"),
      max = $element.attr("data-val-range-max");

  if (val < min)
    // my change handler from custom binding doesn't fire after this to update view model
    $element.val(min);

  if (val > max)
    // my change handler from custom binding doesn't fire after this to update view model
    $element.val(max);

  // more code to show error message
}); 
```

在 foreach 绑定中使用自定义绑定的 HTML 代码：

```
<table>
  <thead>
    <tr>
      <td>Payment Amount</td>
    </tr>
  </thead>
  <tbody data-bind="foreach: Payments">
    <tr>
      <td><input type="text" class="validate-range" data-val-range-min="0" data-val-range-max="9999999" data-bind="amountValue: Amount" /></td>
    </tr>
  </tbody>
</table> 
```

因此，在上面的示例中，如果我在金额文本框中输入“-155”，我的自定义绑定就会运行并将视图模型金额设置为 -155。然后旧验证运行并使用 $(input).val(0) 将文本框的值重新设置为“0”。我的视图模型此时没有更新，仍然反映 -155 值。我的自定义绑定中的更改事件处理程序应该运行以将视图模型更新为 0，但事实并非如此。

编辑：

正如答案中所指出的， .val() 不会触发任何更改事件。我添加的更改事件处理程序没有做任何事情。当验证代码更改 foreach 绑定之外的值时，视图模型被更新的原因是我们的 javascript 代码中的其他地方有逻辑，该逻辑使用模糊事件手动触发更改事件，这反过来又触发了我的自定义绑定运行和更新视图模型。这个模糊事件处理程序直接绑定到文本框，而不是被委托，因此它适用于页面首次呈现时存在的文本框，但不适用于由 foreach 绑定动态插入的文本框。

目前，我只是更改了此逻辑以委托文档中的事件，因此它将包括动态插入的文本框，并且它似乎工作正常。我希望将来能提出更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:57:21.060

调用`$(element).val("some value");`不会触发更改事件。

你需要做：`$(element).val("some value").change();`

# c# - WCF 服务不喜欢单引号

> ID：13994628
> 
> 赞同：5
> 
> 时间：2012-12-21T17:32:33.367
> 
> 标签：c#, wcf, xml-serialization

我正在尝试将一些数据发布到我不拥有的 WCF 服务。我正在使用 XmlSerializer 来格式化消息，这会导致包含单引号的数据出现问题。

有这样的节点

```
...
<FirstName>D'Arcy</FirstName>
... 
```

导致服务抛出“400 bad request”异常。如果我像这样在 Fiddler 中手动构建请求

```
...
<FirstName>D&quot;Arcy</FirstName>
... 
```

然后它工作得很好。

我很困惑为什么需要这样做。各种在线 XML 验证器声称我的原始 XML 是有效的，但 WCF 不喜欢它？有什么方法可以修复/解决方法？

* * *

这是我的代码以防万一：

```
static XmlSerializer RequestSerializer = new XmlSerializer(typeof(Message));
static XmlSerializer ResponseSerializer = new XmlSerializer(typeof(int), new XmlRootAttribute("int") { Namespace = "http://schemas.microsoft.com/2003/10/Serialization/" });
static XmlWriterSettings WriterSettings = new XmlWriterSettings { OmitXmlDeclaration = true, CloseOutput = false, Encoding = new UTF8Encoding(false) };

private static int PostData(Message msg)
{
    var request = (HttpWebRequest)WebRequest.Create("https://...");
    request.ContentType = "text/xml;charset=UTF-8";
    request.Method = "POST";

    using (var writer = XmlWriter.Create(request.GetRequestStream(), WriterSettings))
        RequestSerializer.Serialize(writer, msg);

    using (var response = (HttpWebResponse)request.GetResponse())
    using (var responseStream = response.GetResponseStream())
    {
        return (int)ResponseSerializer.Deserialize(responseStream);
    }
}

[XmlRoot("Order", Namespace = "http://...")]
public class Message
{
    public string City;
    public string Coupon;
    public DateTime CreateDate;
    public string Email;
    public string FirstName;
    public string Language;
    public string LastName;
    public int OrderID;
    public string PostalCode;
    public string ProductID;
    public string Province;
    public string StreetAddress1;
    public string StreetAddress2;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:43:45.577

原来这个 WCF 服务通过使用直接查询（非参数化）将数据插入到他们的数据库中，并且不转义单引号。这也很令人困惑，因为 HTTP 状态 400 对我来说意味着这是反序列化或框架中类似问题的问题。
不好意思打扰大家了:(

# haproxy - HAProxy 随机 HTTP 503 错误

> ID：13994629
> 
> 赞同：16
> 
> 时间：2012-12-21T17:32:37.993
> 
> 标签：haproxy

我们设置了 3 台服务器：

*   服务器 A 使用 Nginx + HAproxy 进行负载均衡
*   后端服务器 B
*   后端服务器 C

这是我们的`/etc/haproxy/haproxy.cfg`：

```
global
        log /dev/log   local0
        log 127.0.0.1   local1 notice
        maxconn 40096
        user haproxy
        group haproxy
        daemon

defaults
        log     global
        mode    http
        option  httplog
        option  dontlognull
        retries 3
        option redispatch
        maxconn 2000
        contimeout      50000
        clitimeout      50000
        srvtimeout      50000
                stats enable
                stats uri /lb?stats
                stats realm Haproxy\ Statistics
                stats auth admin:admin
listen statslb :5054 # choose different names for the 2 nodes
        mode http
        stats enable
        stats hide-version
        stats realm Haproxy\ Statistics
        stats uri /
        stats auth admin:admin

listen  Server-A 0.0.0.0:80    
        mode http
        balance roundrobin
        cookie JSESSIONID prefix
        option httpchk HEAD /check.txt HTTP/1.0
        server  Server-B <server.ip>:80 cookie app1inst2 check inter 1000 rise 2 fall 2
        server  Server-C <server.ip>:80 cookie app1inst2 check inter 1000 rise 2 fall 3 
```

三台服务器都有大量的 RAM 和 CPU 内核来处理请求

浏览时显示随机 HTTP 503 错误：`503 Service Unavailable - No server is available to handle this request.`

并且也在服务器的控制台上：

```
Message from syslogd@server-a at Dec 21 18:27:20 ...
 haproxy[1650]: proxy Server-A has no server available! 
```

请注意，90% 的时间没有错误。这些错误是随机发生的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-06-17T17:24:40.587

我遇到过同样的问题。经过几天拔头发后，我发现了问题。

我有两个 HAProxy 实例正在运行。一个是僵尸，在更新或 haproxy 重启期间不知何故从未被杀死。我在刷新 /haproxy 统计页面时注意到了这一点，并且 PID 会在两个不同的数字之间变化。带有其中一个数字的页面具有荒谬的连接统计信息。确认我做了

```
netstat -tulpn | grep 80 
```

或者

```
sudo lsof -i:80 
```

并看到两个 haproxy 进程正在监听端口 80。

为了解决这个问题，我做了一个“kill xxxx”，其中 xxxx 是带有可疑统计信息的 pid。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-03-06T16:43:07.607

在此处为遇到此完全相同问题但以上列出的解决方案均不适用的其他任何人添加我的答案。请注意，我的回答不适用于上面列出的原始代码。

对于其他可能遇到此问题的人，请检查您的配置，看看您是否错误地将相同的“绑定”行放在配置的多个部分中。Haproxy 不会在启动期间进行检查，我计划将此作为推荐的验证检查提交给开发人员。就我而言，我有 3 个不同的配置部分，我错误地将相同的 IP 绑定放在两个不同的地方。关于是否使用正确的部分或使用不正确的部分，大约是 50/50。即使使用了正确的部分，大约一半的请求仍然得到 503。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T05:50:09.567

您的服务器可能共享一个在特定时间超时的公共资源，并且您的健康检查请求正在同时发出（因此同时将后端服务器拉出）。

您可以尝试使用 HAProxy 选项`spread-checks`来随机进行健康检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-22T20:08:36.860

我遇到了同样的问题，因为 linux 机器上运行了 2 个 HAProxy 服务，但名称/pid/resources 不同。除非我停止不需要的实例，否则所需的实例会随机抛出 503 错误，例如 5 次中的 1 次。

试图使用单个 linux 框进行多个 URL 路由，但在 haproxy 或我定义的 haproxy 配置文件中看起来存在限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-01T09:04:20.063

很难说没有更多细节，但是您是否有可能超出每个后端配置的 maxconn？Stats UI 在前端和单个后端显示这些统计信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-05T12:26:09.190

`option http-server-close`我通过添加到后端解决了我使用 HAProxy 的间歇性 503 。看起来uWSGI（上游）在keep-alive方面做得不好。不知道问题的真正原因是什么，但是在添加了这个选项之后，从那以后就再也没有看到过单一的 503 了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-27T13:21:30.457

例如，不要在 haproxy.cfg 的多个部分中使用“绑定”行，这是错误的

```
frontend stats
bind *:443 ssl crt /etc/ssl/certs/your.pem
frontend Main
bind *:443 ssl crt /etc/ssl/certs/your.pem 
```

像这样修复

```
frontend stats
bind *:8443 ssl crt /etc/ssl/certs/your.pem
frontend Main
bind *:443 ssl crt /etc/ssl/certs/your.pem 
```

# cygwin - 具有特定扩展名的 mv 文件

> ID：13994632
> 
> 赞同：0
> 
> 时间：2012-12-21T17:32:56.713
> 
> 标签：cygwin, move

我在我的 PC 上使用 cygwin，我希望将 /pictures/ （和子目录）中的所有 .nef 文件移动到一个新目录中，但我想保留 nef 文件来自的目录名称。

即 /pictures/vacation2012/image01.nef 和 /pictures/vac09/image01.nef

应该进入

/pictures/nef/vac09/ 和 /pictures/nef/vacation2012/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:39:13.787

你可以这样做：

```
$ cd from_directory
$ (tar cf - `find . -name "*.nef"`) | (cd to_directory; tar xf - )
$ find . -name "*.nef" -exec rm -rf {} \; # be careful with this... 
```

# html - 在悬停时选择以前的兄弟姐妹

> ID：13994633
> 
> 赞同：1
> 
> 时间：2012-12-21T17:33:02.400
> 
> 标签：html, css, css-selectors

我在一个 div 中有两个图像。当用户将鼠标悬停在第二张图片上时，第一张的不透明度应该达到 40%。我的问题是我无法选择`img.first`何时`img.second`悬停。我曾尝试查看通用同级选择器，但这似乎只选择了初始选择器之后的元素。

我知道这可以用 jQuery 完成，但我想知道是否有纯 CSS 解决方案？

```
<div>
  <img class="first" src="#">
  <img class="second" src="#">
</div>

div > img.second:hover ~ img.first { opacity:0.4; filter:alpha(opacity=40); } //failed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:39:22.377

> 我曾尝试查看通用同级选择器，但这似乎只选择了初始选择器之后的元素。

那是对的。因此，使用纯 CSS 选择器这是不可能的。

但是，根据您的布局，您可以使用多个规则和选择器，例如`div:hover`and`img:hover`并使用不透明度值来获得您想要的；有关示例，请参见其他答案。但是，如果您想要一个更简单的解决方案，那么使用 jQuery 会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:39:51.947

尝试类似：

```
div:hover .img {
  opacity: 0.4;
}

div .img:hover {
  opacity: 1;
}

.img {
  display: inline-block;
  background: green;
  width: 100px;
  height: 40px;
} 
```

演示：http: [//jsbin.com/idowoz/2/](http://jsbin.com/idowoz/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:42:34.753

试试这个CSS：

```
div:hover img{
    opacity:0.5            
}
div:hover img:hover{
     opacity:1           
} 
```

​测试：http: [//jsfiddle.net/WpCtL/2/](http://jsfiddle.net/WpCtL/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:48:22.397

你可以做一个技巧，让它看起来像正在发生的事情：http: [//jsfiddle.net/cwxCX/3/](http://jsfiddle.net/cwxCX/3/)

```
<div>    
    <img src="http://placekitten.com/200/200">
    <img src="http://placekitten.com/300/300">
    <img src="http://placekitten.com/400/400">
    <img src="http://placekitten.com/500/500">
</div> 
```

CSS

```
div{
    float:left;
}
img{
    width:100px;
    height:100px;
}
div img{
    float:right;
}

div img:hover ~ img{
    opacity:.4;
} 
```

# java - 可以由字符组成的字符串组合

> ID：13994636
> 
> 赞同：0
> 
> 时间：2012-12-21T17:33:14.647
> 
> 标签：java, combinations

如何从Java中的字符数组集中形成不同的字符串组合

例如，

```
'h' , 'e' , 'l' 
```

结果是，

```
h
e
l
he
eh
le
el
hl
lh
hel
leh
lhe
hle
ehl    
elh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:23:11.023

使用树木。阅读这篇文章：

[http://exceptional-code.blogspot.com/2012/09/generating-all-permutations.html](http://exceptional-code.blogspot.com/2012/09/generating-all-permutations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:39:17.443

尝试这样的事情： -

```
void permute( String input)
{
  int inputLength = input.length();
  boolean[ ] used = new boolean[ inputLength ];
  StringBuffer outputString = new StringBuffer();
  char[ ] in = input.toCharArray( );

  doPermute ( in, outputString, used, inputLength, 0 );

}

  void doPermute ( char[ ] in, StringBuffer outputString, 
                    boolean[ ] used, int inputlength, int level)
  {
     if( level == inputLength) {
     System.out.println ( outputString.toString()); 
     return;
     }

    for( int i = 0; i < inputLength; ++i )
    {       

       if( used[i] ) continue;

       outputString.append( in[i] );      
       used[i] = true;       
       doPermute( in,   outputString, used, length, level + 1 );       
       used[i] = false;       
         outputString.setLength(   outputString.length() - 1 );   
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:17:25.190

定义它的更好方法是将其视为两个独立的操作。

首先，您正在生成输入字符串的所有子集（称为`power set`）

接下来，您将在给定其中一个子集的情况下生成具有指定长度的排列列表。

创建一个执行第一个操作的函数，然后将每个输出集作为输入传递给第二个操作，理论上会生成结果。

在代码中，请按以下方式考虑：

```
// Assuming command line params are the input to this operation.
public static void main (String[] args) {
    Set <Set <String>> powerSet = powerSet(new HashSet <String> (Arrays.asList(args)));
    for (Set <String> subset : powerSet) {
        // Permutations need order
        printPermutations(new ArrayList <String> (subset));
    }
}
/*
 * Power set can be generated recursively by considering the two cases: when an element exists in the set, and when the element doesn't exist in the set.
 */ 
public Set <Set <String>> powerSet (Set <String> set) {
   Set <Set <String>> powerSet = new HashSet <Set <String>> ((int)Math.pow(2, set.size()));
   if (set.size() == 0) {
      powerSet.add(new HashSet <String> ());
      return powerSet;
   }
   Set <String> inputCopy = new HashSet <String> (set);
   for (String element : set) {
      inputCopy.remove(element);
      Set <Set <String>> powerSetWithoutElement = powerSet ( inputCopy );
      for (Set <String> subPowerSet : powerSetWithoutElement ) {
          Set <String> powerSetWithElement = new HashSet <String> (subPowerSet);
          powerSetWithElement.add ( element );
          powerSet.add ( powerSetWithElement );
      }
      powerSet.addAll ( powerSetWithoutElement );
   }

   return powerSet;
}

public static void printPermutations(List <String> input) {
   printSubPermutation(input, 0, input.size());
}

public static void printSubPermutation(List <String> input, int startIndex, int endIndex) {
    for (int i = startIndex; i < endIndex; i++) {
        // Swap from start to i
        String temp = input.get(startIndex);
        input.set(startIndex, input.get(i));
        input.set(i, temp);
        // This does: abc -> abc, abc -> bac, abc -> cba
        if (i == endIndex - 1) {
            output(input); // you've reached one permutation here
        } else {
            printSubPermutation(input, startIndex + 1, endIndex);
        }
        // swap back
        String temp = input.get(startIndex);
        input.set(startIndex, input.get(i));
        input.set(i, temp);
    }
}

public static void output(List <String> output) {
    for(String out : output) {
        System.out.print(out + " ");
    }
    System.out.println();
} 
```

如您所见，这种方法虽然理论上正确，但可能不是最好的方法，因为它使用大量的堆空间和堆栈空间来递归地生成 powerset。另一方面，排列的生成并不那么困难。

# .net - 如何在后台任务运行的情况下优雅地关闭 WPF 应用程序？

> ID：13994640
> 
> 赞同：2
> 
> 时间：2012-12-21T17:33:43.323
> 
> 标签：.net, wpf, c#-4.0

我有一个 WPF 应用程序，我希望它可以在启动时分拆两个数据研究后台任务。这些后台任务将打开、解析和关闭文件，然后更新 SqlServer 数据库中的数据。这些任务都不需要向显示线程返回任何内容。这些后台任务不必运行完成，但我需要避免让文件处于打开状态或 Sql Server 处于意外状态。用户可以在任务开始后随时关闭应用程序。我正在使用 System.Threading.Tasks 命名空间中的资源。举一个例子：

```
var IncorporateTask = Task.Factory.StartNew(CommentIncorporateTask);
var incorporateTaskDone = IncorporateTask.ContinueWith((antecedent) => IncorporateTaskFinalize(), TaskScheduler.FromCurrentSynchronizationContext()); 
```

我是否需要采取任何措施来确保干净地关闭这些线程，并且不会延迟用户关闭应用程序的体验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:55:38.810

您无需担心线程会被干净地终止。您*确实*需要担心定义后台工作的事务边界并确保进程不会在这些边界内终止。

我建议您将 CancellationToken 传递给后台任务。当用户请求退出进程时，您应该：

1.  [取消](http://msdn.microsoft.com/en-us/library/dd321703.aspx)令牌来源。
2.  [等待](http://msdn.microsoft.com/en-us/library/dd235606.aspx)后台任务。您可以通过使用异步延续来做一些更有趣的事情（例如，禁用所有 UI 并显示动画，直到后台任务终止）

然后后台任务负责在相关时检查取消令牌，并在令牌被取消时提前终止，并且这样做不会让您处于不良状态。这实质上是让后台任务负责何时可能发生终止，但允许 UI 尽可能早地请求终止。

# asp.net-mvc-3 - 在同一个解决方案中使用不同项目的模型

> ID：13994641
> 
> 赞同：0
> 
> 时间：2012-12-21T17:33:49.750
> 
> 标签：asp.net-mvc-3, view, model, controller

这可能是[此处](https://stackoverflow.com/q/638699/807223)发布的问题的重复，但我没有找到任何有效的答案。

假设我有使用模型 model1 的 project1。我在同一个解决方案中创建了一个新项目 project2，我想在 project2 的视图中使用 model1。这可能吗？如何在我的视图和 project2 控制器中调用此模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:44:48.217

为什么你不能将你的模型移动到你的两个客户项目都引用的第三类程序集中？这样，您的模型真正定义一次，并且可以被两个项目使用。

按照 Erik 建议的方式进行操作会导致重复的源文件独立编译到每个项目中，而不是真正基于引用的程序集共享相同的代码库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:43:29.237

我不完全确定您要共享的模型的目的（如果您能向我们提供有关如何使用它的更多详细信息，那就太好了），但仅共享模型您可以创建一个新项目在您的项目 1 和 2 所在的同一解决方案中调用 SharedModels，然后在这两个项目中引用 SharedModels 项目。

# .htaccess - 如何在不更改地址栏的情况下将链接重定向到其他链接

> ID：13994644
> 
> 赞同：2
> 
> 时间：2012-12-21T17:34:12.090
> 
> 标签：.htaccess

我想重定向一个链接`http://example.com/username`，`http://example.com/ index.php?id=username` 以便我使用这些 .htaccess 规则：

```
RewriteEngine On    
RewriteBase /    
RewriteCond %{HTTP_HOST} ^(www\.)?example\.com    
RewriteCond %{REQUEST_FILENAME} !-d    
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ([a-z0-9-]+)/? http://example.com?id=$1 [R=301,NC,L] 
```

但有一个问题。URL 被重定向，但是浏览器的地址栏也发生了变化。

如何在不更改地址栏的情况下将链接重定向到其他链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T10:04:34.160

这是一个工作示例：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example.co.uk$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.example.co.uk$
RewriteCond %{REQUEST_URI} !example/
RewriteRule (.*) /foldername/$1 [L] 
```

# javascript - 尝试使用 SoundManager 2 在循环中实现交叉淡入淡出

> ID：13994649
> 
> 赞同：2
> 
> 时间：2012-12-21T17:34:42.897
> 
> 标签：javascript, audio, soundmanager2

所以我有这个应用程序，每次循环播放声音时都需要有淡入淡出效果，以便过渡顺利进行。

我正在使用 SoundManager 2。

更新代码：

```
$(document).ready(function () {
    alert("Testing sound");
    soundManager.flashVersion = 9;  
    soundManager.url = '/assets/soundmanager/swf/';  
    soundManager.onready(function(){
        soundManager.createSound({  
            id:"EngineIdle",  
            url:"/assets/sounds/EngineIdle.ogg",  
            stream: true,  
            autoPlay: true,  
            multiShot: false,
            volume: 0,
            onplay:function() {
                var fadingin = setInterval(fadein, 20);
            },
            onfinish:function() {
                clearInterval('fadingout'); //We declared the interval as a variable earlier so we can cancel it
                soundManager.play('EngineIdle');
            }
        });
        var FadeOutTime = 2;
        soundManager.onPosition('EngineIdle', FadeOutTime, function(){var fadingout = setInterval(fadeout, 20)});
    });

    function fadein() {
        var s = soundManager.getSoundById('EngineIdle');//Again, unoptimal
        if (s.volume == 100) {
            clearInterval('fadingin');
            return
        }
        s.setVolume(s.volume + 20);
    }
    function fadeout() {
        var s = soundManager.getSoundById('EngineIdle'); //This is unoptimal to call each time, but you can fix that
            if (s.volume > 0) {
                s.setVolume(s.volume - 20);
            }
    }
}); 
```

关于如何在同一声音的每个过渡之间获得交叉淡入淡出的循环的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T05:03:20.147

这种方法看起来很笨拙，有几个原因：

*   每次在函数中使用 setTimeout，而不是 setInterval 一次。
*   看来您将 fadeOutSound 称为 onfinish，因此没有时间淡出。
*   从自身调用函数。

ETC

我将在这里发布一些想法，您可以以此为基础。首先，我会废弃您的方法，它既笨拙又不理想。

首先，循环的最佳方式是：

```
soundManager.createSound({  
        id:"EngineIdle",  
        url:"/assets/sounds/EngineIdle.ogg",  
        stream: true,  
        autoPlay: true,  
        multiShot: false,
        volume: 0,
        onfinish:function() {
            soundManager.play(EngineIdle);
        }
}); 
```

这给出了最好的循环，最少的混乱。

然后为您的淡出设置一个监听器，例如：

```
soundManager.onPosition('EngineIdle', FadeOutTime, function(){var fadingout = setInterval(fadeout, 20)}); 
```

然而，FadeOutTime 在结束之前很长时间，您希望它开始褪色。您可以使用`sound.duration - x`, `sound.durationEstimate - x`，或者如果您知道音频的长度，只需输入以毫秒为单位的数量。

注意：`soundManager.onPosition`可能很棘手，它必须在声音初始化后调用。

然后我们需要一个淡出功能

```
function fadeout() {
    var s = soundManager.getSoundById('EngineIdle'); //This is unoptimal to call each time, but you can fix that
    if (s.volume > 0) {
        s.setVolume(s.volume - 20);
    }
} 
```

所以它现在应该淡出，但我们不想`fadeout`永远保持调用，是吗？

让我们在创建声音时更改 onfinish：

```
onfinish:function() {
        ClearInterval('fadingout'); //We declared the interval as a variable earlier so we can cancel it
        soundManager.play(EngineIdle);
} 
```

现在也淡入淡出，当我们创建声音时添加：

```
onplay:function() {
    var fadingin = setInterval(fadein, 20);
} 
```

接着

```
function fadein() {
    var s = soundManager.getSoundById('EngineIdle');//Again, unoptimal
    if (s.volume === 100) {
        clearInterval('fadingin');
        return
    }
    s.setvolume(s.volume + 20);
} 
```

当对声音调用 play 时，它会增加音量，并在达到 100 时取消计时器。

这应该可以帮助您度过难关。不要逐字复制这个代码，我是在分心的时候写的，更多的是作为一个指南。如果它仍然不起作用或者你不明白，请随时询问更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T14:10:00.787

有点晚了，但我为 Soundmanager 音频对象实现了一个基本的淡入淡出循环。

```
this.fadeAudio = function(audio_out, audio_in, time, callback) {
        audio_in.setVolume(0); //Ensuring silent incoming audio
        audio_in.play();
        vol_inc = (time / audio_out.volume) * 2;
        loop = setInterval(function(){
            if(audio_out.volume <= 0) {
                audio_out.setPosition(audio_out.duration); // Manually finishing song
                callback();
                clearInterval(loop);
            }
            audio_out.setVolume(audio_out.volume - 2);
            audio_in.setVolume(audio_in.volume + 2);
        }, vol_inc);
    } 
```

这将运行 50 次，每次将音频音量增加 2%。

`time`是您希望淡入淡出持续的毫秒数。

# replace - Bash 删除后的所有内容

> ID：13994654
> 
> 赞同：1
> 
> 时间：2012-12-21T17:35:06.333
> 
> 标签：replace, sed

我的一个客户的网站被黑了，每个文件中都有 iframe 注入。但是，iframe 注入总是在结束`</html>`标记之后。

`</html>`有没有一种简单的方法使用 Bash使用 sed 之类的东西删除标签后的所有内容？

例如：

```
</html>
p
<nofollow><iframe src="http://xxxxx.com/local.html" width="0" height="0" frameborder="0"></iframe></nofollow>
p
<nofollow><iframe src="http://xxxxx.com/local.html" width="0" height="0" frameborder="0"></iframe></nofollow> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T17:42:02.703

当你上线时就退出：

```
sed -i '/<\/html>/q' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:41:28.760

这就是你要找的：

```
 sed -i '/<\/html>/,$d;$a <\/html>' yourfile 
```

*更新为删除行直到文件结束*

# ajax - JSF2 + Richfaces：Ajax 只会在第二次点击后呈现表格

> ID：13994656
> 
> 赞同：1
> 
> 时间：2012-12-21T17:35:07.210
> 
> 标签：ajax, jsf-2, richfaces

我在 JSF2 中使用 Ajax 渲染时遇到问题。我在表格列中有一个命令按钮，可以从表格中删除一项。当我单击按钮时，将执行操作并从数据库中删除该项目，但它不会从表（视图）中删除。当我第二次单击时，将执行 ajax 渲染，然后更新视图。我不知道是什么原因造成的。起初我认为这可能是 JSF 规范问题 790，但我的行动被解雇了。它只是没有被执行的 ajax 渲染。

我正在使用 JSF 2.1.14 + RichFaces 4.2.3

如果您想提供帮助，这是代码的一部分

```
 <a4j:outputPanel id="ajaxOutputPanel">
        <rich:panel id="panelOrgaoList">
            <div class="results" id="orgaoList">
                <h:outputText value="No results."
                    rendered="#{empty orgaoList.resultList}" />
                <h:form id="formTable">
                    <rich:dataTable id="orgaoTable" var="_orgao"
                        rowClasses="odd-row, even-row"
                        value="#{orgaoList.resultList}"
                        rendered="#{not empty orgaoList.resultList}" 
                        styleClass="stable">
                        <rich:column>
                            <f:facet name="header">
                                <ui:include src="layout/sort.xhtml">
                                    <ui:param name="entityList" value="#{orgaoList}" />
                                    <ui:param name="propertyLabel" value="Id" />
                                    <ui:param name="propertyPath" value="orgao.id" />
                                </ui:include>
                            </f:facet>
                            <h:outputText value="#{_orgao.id}" />
                        </rich:column>
                        <rich:column>
                            <f:facet name="header">
                                <ui:include src="layout/sort.xhtml">
                                    <ui:param name="entityList" value="#{orgaoList}" />
                                    <ui:param name="propertyLabel" value="Name" />
                                    <ui:param name="propertyPath" value="orgao.name" />
                                </ui:include>
                            </f:facet>
                            <h:outputText value="#{_orgao.name}" />
                        </rich:column>
                        <rich:column>
                            <f:facet name="header">
                                <ui:include src="layout/sort.xhtml">
                                    <ui:param name="entityList" value="#{orgaoList}" />
                                    <ui:param name="propertyLabel" value="Tel" />
                                    <ui:param name="propertyPath" value="orgao.tel" />
                                </ui:include>
                            </f:facet>
                            <h:outputText value="#{_orgao.tel}" />
                        </rich:column>
                        <rich:column styleClass="action">
                            <s:link view="/#{empty from ? 'Orgao' : from}.xhtml"
                                propagation="#{empty from ? 'none' : 'default'}"
                                id="orgaoViewId">
                                <f:param name="orgaoId" value="#{_orgao.idOrgao}" />
                                <h:graphicImage value="/img/view2.png" />
                            </s:link>
                         #{' '}
                        <s:link view="/OrgaoEdit.xhtml" propagation="none"
                                id="orgaoEdit" rendered="#{empty from}">
                                <h:graphicImage value="/img/edit2.png" />
                                <f:param name="orgaoId" value="#{_orgao.id}" />
                            </s:link>
                         #{' '}
                         <h:commandButton immediate="true" actionListener="#{orgaoList.remover(_orgao.id)}" image="/img/remove2.png">
                            <f:ajax render=":ajaxOutputPanel :formTable" />
                         </h:commandButton>
                        </rich:column>
                    </rich:dataTable>               
                </h:form>
            </div>
        </rich:panel>
    </a4j:outputPanel> 
```

谢谢！

# c - 为什么 malloc 在没有强制转换的情况下不起作用？

> ID：13994659
> 
> 赞同：1
> 
> 时间：2012-12-21T17:35:20.543
> 
> 标签：c, malloc

请考虑以下代码：

```
#include "stdafx.h"
#include <stdio.h>
#include <assert.h>
#include <stdlib.h>
#include <string.h>

struct Person {
    char *name;
    int age;
    int height;
    int weight;
};

struct Person *Person_create(char *name, int age, int height, int weight)
{
    struct Person *who = (struct Person*) malloc(sizeof(struct Person));
    assert(who != NULL);

    who->name = strdup(name);
    who->age = age;
    who->height = height;
    who->weight = weight;

    return who;
} 
```

奇怪的是

```
struct Person *who = (struct Person*) malloc(sizeof(struct Person)); 
```

我在网上搜索了一下 malloc() 的用法。其中大约一半是用强制转换编写的，其他则不是。在 vs2010 上，没有强制转换`(struct Person*)`会出现错误：

```
1>c:\users\juhyunlove\documents\visual studio 2010\projects\learnc\struct\struct\struct.cpp(19): error C2440: 'initializing' : cannot convert from 'void *' to 'Person *'
1>          Conversion from 'void*' to pointer to non-'void' requires an explicit cast 
```

那么创建指针并为其分配内存的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T17:35:55.580

因为您使用的是 C++ 编译器。

C++ 中需要强制转换`malloc`（假设类型不是）。`void *`在 C 中，它不是必需的，甚至建议不要强制转换`malloc`。

`void *`在 C 中，在赋值期间存在从到所有对象指针类型的隐式转换。

```
void *p = NULL;
int *q = p;  // valid in C, invalid in C++ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:27:40.990

如果您将文件从 struct.cpp 重命名为 struct.c，编译器将执行您期望 C 编译器执行的操作，而不是执行 C++ 编译器应该执行的操作（如上所述）。Visual Studio 带有一个可以同时执行 C 和 C++ 的编译器，因此它只是在创建文件时正确命名文件的情况。

我不确定在 Visual Studio 中重命名文件是否足够，或者是否必须添加一个名为 struct.c 的新文件，将现有文件中的内容复制到其中，然后删除原始 struct.cpp。后者绝对有效。

# arrays - 通过 fortran 中的子例程传递未知大小的数组（在子例程中分配的数组）

> ID：13994660
> 
> 赞同：1
> 
> 时间：2012-12-21T17:35:21.183
> 
> 标签：arrays, fortran, allocation, subroutine

我有一个程序，它在第一个子程序（CALCONE）中创建一个数组，然后我想将它传递给下一个子程序（CALCTWO），然后将其输出到主程序中的文件。我不知道将 INTENT(IN)、INTENT(OUT) 语句放在哪里，因为需要在子例程 CALCONE 中分配数组（因为在我的程序中，长度是在 CALCONE 中确定的）-我已经尝试避免困惑。有人可以帮助将它们放在正确的位置。一旦我有了一个模板，我就会明白它在未来是如何工作的。谢谢。

我已经简化了程序，变量代表了其他不能移动的东西。我只需要一种在子程序之间移动数组的方法，然后在主程序的末尾将其写出来。

```
 program TEST
 implicit none

 integer a,b,c,d,reclen

 a = 1
 b = 2
 c = 3
 d = 4

 call CALCONE(a,b,c,d,array)

 call CALCTWO(e,f,g,h,array)

 inquire(iolength=reclen)array 
 open(unit=8,file='array_output.dat', &
   form="unformatted",access="stream")
 write(unit=8)array       
 close(unit=8)

 END PROGRAM TEST

 SUBROUTINE CALCONE(adummy,bdummy,cdummy,ddummy,arraydummy)
 IMPLICIT NONE

 integer i,j,k
 integer e,f,g,h,N
 !ALLOCATE ARRAY HERE OR IN MAIN PROGRAM?
 real*8,   allocatable  :: arraydummy(:,:)

 e = a + 1
 f = b + 1
 g = c + 1
 h = d + 1

 ! N can only be is calculated here

 allocate(arraydummy(1:N,1:3))

 !POPULATE 'arraydummy'
 !PASS ARRAY BACK OUT TO NEXT SUBROUTINE FOR FURTHER PROCESSING IN CALCTWO
 END SUBROUTINE CALCTWO

 SUBROUTINE CALCTWO(edummy,fdummy,gdummy,hdummy,arraydummy)
 IMPLICIT NONE

 integer e,f,g,h
 !DEFINE HERE ALSO? i.e.
 !real*8,   allocatable  :: arraydummy(:,:)

 e = a + 1
 f = b + 1
 g = c + 1
 h = d + 1

 arraydummy = arraydummy*e*f*g*h

 END SUBROUTINE CALCTWO 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T17:54:30.577

您不必在主程序中分配数组，但您必须在那里声明它并且您必须将它作为参数传递（您这样做）。请注意，该符号`array`未在主程序中定义。

确保为 subs 提供显式接口。因为您使用高级功能（可分配的虚拟参数），所以这是必要的。最好是将它们放在一个模块中。

必须将数组定义为两者中的虚拟参数。我在第一个中将其声明为 intent(out)，因为它是在开头分配的。这不是绝对必要的。

另一种选择是在模块中声明数组并让它由模块过程共享。

免责声明：我没有尝试编译它。

```
 module subs
   integer,parameter :: rp = kind(1d0)

   contains

   SUBROUTINE CALCONE(adummy,bdummy,cdummy,ddummy,arraydummy)
   IMPLICIT NONE

   integer i,j,k
   integer e,f,g,h,N
   !ALLOCATE ARRAY HERE OR IN MAIN PROGRAM?
   real(rp),   allocatable, intent(out) :: arraydummy(:,:)

   e = a + 1
   f = b + 1
   g = c + 1
   h = d + 1

   !N can only be is calculated here

    allocate(arraydummy(1:N,1:3))

   !POPULATE 'arraydummy'
   !PASS ARRAY BACK OUT TO NEXT SUBROUTINE FOR FURTHER PROCESSING IN CALCTWO
   END SUBROUTINE CALCTWO

   SUBROUTINE CALCTWO(edummy,fdummy,gdummy,hdummy,arraydummy)
   IMPLICIT NONE

   integer e,f,g,h
   !DEFINE HERE ALSO? i.e.
   real(rp),   allocatable, intent(inout)  :: arraydummy(:,:)

   e = a + 1
   f = b + 1
   g = c + 1
   h = d + 1

   arraydummy = arraydummy*e*f*g*h

   END SUBROUTINE CALCTWO

 end module subs

 program TEST

 use subs

 implicit none

 integer a,b,c,d,reclen

 real(rp),allocatable :: array

 a = 1
 b = 2
 c = 3
 d = 4

 call CALCONE(a,b,c,d,array)

 call CALCTWO(e,f,g,h,array)

 inquire(iolength=reclen)array 
 open(unit=8,file='array_output.dat', &
   form="unformatted",access="stream")
 write(unit=8)array       
 close(unit=8)

 END PROGRAM TEST 
```

# javascript - 如何将此代码减少到一行？

> ID：13994667
> 
> 赞同：-8
> 
> 时间：2012-12-21T17:36:25.423
> 
> 标签：javascript, node.js, express

我对 javascript、node.js 和 express 非常陌生。我的问题是，如何重构以下代码以使其成为函数内的一行？

```
exports.about = function(req, res){
 var mytime = new Date();
 res.render('about', {title: 'about page', time: mytime.toLocaleDateString() });
}; 
```

换句话说，有没有办法可以压缩 var mytime = new Date(); 和时间： mytime.toLocalDateString() 成一个语句？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T17:37:08.907

你没有。可读性胜过简洁。让机器进行缩小。

* * *

你可以写成`mytime.toLocaleDateString()`，`(new Date()).toLocaleDateString()`但我不推荐它。

我喜欢的样式：

```
exports.about = function(req, res){
  var mytime = new Date();
  res.render('about', {
    title: 'about page',
    time: mytime.toLocaleDateString()
  });
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T17:38:08.657

请参阅[Frits 的回答](https://stackoverflow.com/a/13994677/157247)：可以，但真的有必要吗？你这样做的方式很好而且可读。

但是，如果您真的非常想这样做，可以这样做：

```
exports.about = function(req, res){
 res.render('about', {title: 'about page', time: new Date().toLocaleDateString() });
}; 
```

它看起来有点奇怪，但该`new Date()`部分优先，因此您甚至不需要围绕它的括号（例如，您不需要`time: (new Date()).toLocaleDateString()`）。如果你愿意，你可以拥有它们，但它们不是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:39:24.957

一条线

```
exports.about = function(req, res){ res.render('about', {title: 'about page', time: new Date().toLocaleDateString() }); }; 
```

不过，这很愚蠢。您的原始代码没有任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T17:39:49.593

使这段代码更短不会使它变得更好。我个人会让它更大一点，就像这样：

```
exports.about = function (req, res) {
    var mytime = new Date();
    res.render('about', {
        title: 'about page',
        time: mytime.toLocaleDateString()
    });
}; 
```

*   我在之后添加了一个空格，`function`因为这就是 JSLint 想要的。
*   我在之前添加了一个空格，`{`因为这使它更具可读性。
*   我将所有对象属性放在不同的行上，这样我就不必整天水平滚动（而且现在我可以在每个属性的末尾添加注释，耶！）。
*   最后，我用制表符替换了空格缩进，因为这使所有内容都完美对齐，同时只需要一个按键即可删除或越过它们（如果您的插入符号位于第 4 行的开头，则需要 4 次按键才能移动到您的代码，而单个选项卡只需要一个按键）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T17:39:41.500

你可以这样做，

```
exports.about = function(req, res){
  res.render('about', {title: 'about page', time: new Date().toLocaleDateString() });
}; 
```

但仅此而已。我同意弗里茨·范·坎彭的观点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T17:48:13.060

我的观点是删除 mytime var 是更好的风格，因为您只是获取当前系统时间，而 new Date() 使意图非常清楚。

```
exports.about = function (req, res) {
    res.render('about', {
        title: 'about page',
        time: new Date().toLocaleDateString()
    });
}; 
```

# objective-c - 文件系统事件 API 导致 Finder 锁定？

> ID：13994673
> 
> 赞同：2
> 
> 时间：2012-12-21T17:36:56.500
> 
> 标签：objective-c, macos, cocoa, dropbox, fsevents

我正在使用 Apple 的文件系统事件 API 来监视目录层次结构。我基本上是在逐字使用[Apple 文档中的示例](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/UsingtheFSEventsFramework/UsingtheFSEventsFramework.html)，所以除非有人要求，否则我不会发布我的代码。我的回调将修改后的路径添加到在后台处理的队列中`NSOperationQueue`。

就我的应用程序而言，一切正常。它获取所有预期的事件，处理它们，然后重新开始工作。

另一方面，Finder 在我的应用程序运行时翻转。它是持续 10-15 秒的死亡旋转轮（它们之间有正常行为）。当我的应用程序退出时，或者我注释掉对 的调用时`FSEventStreamStart`，Finder 就可以了。

一个潜在的复杂情况是我正在监视的目录位于 Dropbox 下，因此我假设 Dropbox 守护程序也在以类似的方式监视该目录。我是否以某种方式干扰了它的行为？

我怎么知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:42:35.923

这种情况几天前就停止了，并且再也没有发生过。所以我把它归结为随机的怪异，直到我再次看到它。

# c++ - 如何编写与字节序无关的 C/C++ 代码？

> ID：13994674
> 
> 赞同：37
> 
> 时间：2012-12-21T17:36:56.427
> 
> 标签：c++, c, endianness

我做了一些谷歌搜索，找不到任何关于这个问题的好文章。在实现一个我想要与字节序无关的应用程序时，我应该注意什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-21T17:38:46.033

唯一需要关心字节序的情况是，当您在可能不具有相同字节序的系统之间传输字节序敏感的二进制数据（即非文本）时。正常的解决方案是使用“[网络字节顺序](http://en.wikipedia.org/wiki/Endianness#Endianness_in_networking)”（AKA big-endian）来传输数据，然后根据需要在另一端交换字节。

要将主机字节顺序转换为网络字节顺序，请使用`htons(3)`和`htonl(3)`。要转换回来，请使用`ntohl(3)`和`ntohs(3)`。查看[手册页](http://linux.die.net/man/3/hton)以了解您需要了解的所有内容。对于 64 位数据，[这个问题和答案](https://stackoverflow.com/questions/3022552/is-there-any-standard-htonl-like-function-for-64-bits-integers-in-c)会有所帮助。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-21T19:07:44.667

> 在实现一个我想要与字节序无关的应用程序时，我应该注意什么？

您首先必须认识到字节序何时成为问题。当您必须从外部某个地方读取或写入数据时，它通常会成为一个问题，无论是从文件中读取数据还是在计算机之间进行网络通信。

在这种情况下，字节顺序对于大于字节的整数很重要，因为不同平台在内存中表示的整数不同。这意味着每次您需要读取或写入外部数据时，您需要做的不仅仅是转储程序的内存，或者直接将数据读取到您自己的变量中。

例如，如果您有这段代码：

```
unsigned int var = ...;
write(fd, &var, sizeof var); 
```

您直接写出 的内存内容`var`，这意味着数据将呈现到该数据所在的任何位置，就像它在您自己的计算机内存中所表示的一样。

如果将此数据写入文件，则无论您在大端或小端机器上运行程序，文件内容都会有所不同。因此该代码不是字节序不可知论的，并且您希望避免做这样的事情。

而是专注于数据格式。读/写数据时，总是先决定数据格式，然后再写代码处理。如果您需要阅读一些现有的明确定义的文件格式或实现现有的网络协议，这可能已经为您决定了。

一旦您知道数据格式，而不是直接转储 int 变量，您的代码会执行以下操作：

```
uint32_t i = ...;
uint8_t buf[4];
buf[0] = (i&0xff000000) >> 24;
buf[1] = (i&0x00ff0000) >> 16;
buf[2] = (i&0x0000ff00) >> 8;
buf[3] = (i&0x000000ff);
write(fd, buf, sizeof buf); 
```

我们现在选择了最高有效字节并将其作为缓冲区中的第一个字节，而最低有效字节则放置在缓冲区的末尾。无论主机的字节序如何，该整数都以大字节序格式表示`buf`- 因此此代码与字节序无关。

此数据的使用者必须知道数据以大端格式表示。无论程序在哪个主机上运行，​​这段代码都可以很好地读取该数据：

```
uint32_t i;
uint8_t buf[4];
read(fd, buf, sizeof buf);
i  = (uint32_t)buf[0] << 24;
i |= (uint32_t)buf[1] << 16;
i |= (uint32_t)buf[2] << 8;
i |= (uint32_t)buf[3]; 
```

相反，如果您需要读取的数据已知是小端格式，那么与字节序无关的代码就可以了

```
uint32_t i ;
uint8_t buf[4];
read(fd, buf, sizeof buf);
i  = (uint32_t)buf[3] << 24;
i |= (uint32_t)buf[2] << 16;
i |= (uint32_t)buf[1] << 8;
i |= (uint32_t)buf[0]; 
```

您可以制作一些不错的内联函数或宏来包装和解包您需要的所有 2、4、8 字节整数类型，如果您使用这些并关心数据格式而不是您运行的处理器的字节序，您的代码将不取决于它运行的字节顺序。

这是比许多其他解决方案更多的代码，我还没有编写一个程序，这些额外的工作对性能有任何有意义的影响，即使在 1Gbps+ 的数据周围洗牌时也是如此。

它还避免了未对齐的内存访问，您可以通过例如方法轻松获得

```
uint32_t i;
uint8_t buf[4];
read(fd, buf, sizeof buf);
i = ntohl(*(uint32_t)buf)); 
```

这也可能会导致性能损失（在某些方面微不足道，对其他人来说是许多数量级），并且在无法对整数进行非对齐访问的平台上更糟糕的是崩溃。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-21T17:38:22.750

这可能是一篇适合您阅读[的文章：字节顺序谬误](http://commandcenter.blogspot.com/2012/04/byte-order-fallacy.html)

> 计算机的字节顺序根本不重要，除了编译器编写者等，他们对映射到寄存器块的内存字节分配大惊小怪。您可能不是编译器编写者，因此计算机的字节顺序对您来说一点都不重要。
> 
> 注意短语“计算机的字节顺序”。重要的是外围设备或编码数据流的字节顺序，但是——这是关键点——进行处理的计算机的字节顺序与数据本身的处理无关。如果数据流以字节顺序 B 编码值，那么在计算机上以字节顺序 C 解码值的算法应该是关于 B，而不是关于 B 和 C 之间的关系。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-28T07:51:49.460

几个答案涵盖了文件 IO，这当然是最常见的字节序问题。我将谈到一个尚未提及的：**Unions**。

以下联合是 SIMD/SSE 编程中的常用工具，并且*不*支持字节序：

```
union uint128_t {
    _m128i      dq;
    uint64_t    dd[2];
    uint32_t    dw[4];
    uint16_t    dh[8];
    uint8_t     db[16];
}; 
```

任何访问 dd/dw/dh/db 表单的代码都将以特定于字节序的方式进行。在 32 位 CPU 上，更简单的联合也很常见，这些联合允许更轻松地将 64 位算术分解为 32 位部分：

```
union u64_parts {
    uint64_t    dd;
    uint32_t    dw[2];
}; 
```

因为在这个用例中你很少（如果有的话）想要遍历联合的每个元素，我更喜欢这样写联合：

```
union u64_parts {
    uint64_t dd;
    struct {
#ifdef BIG_ENDIAN
        uint32_t dw2, dw1;
#else
        uint32_t dw1, dw2;
#endif
    }
}; 
```

结果是任何直接访问 dw1/dw2 的代码的隐式字节交换。相同的设计方法也可用于上述 128 位 SIMD 数据类型，尽管它最终会变得更加冗长。

免责声明：由于关于结构填充和对齐的松散标准定义，联合使用通常不受欢迎。我发现联合非常有用并且已经广泛使用它们，而且很长一段时间（15 年以上）我没有遇到任何交叉兼容性问题。对于任何当前针对 x86、ARM 或 PowerPC 的编译器，联合填充/对齐将以预期和一致的方式运行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-21T17:39:23.763

在您的代码中，您几乎可以忽略它 - 一切都取消了。

当您将数据读/写到磁盘或网络时，请使用[htons](http://linux.die.net/man/3/htons)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T19:03:52.483

这显然是一个颇具争议的话题。

一般的方法是设计您的应用程序，以便您只关心一小部分的字节顺序：代码的输入和输出部分。

在其他任何地方，您都应该使用本机字节顺序。

请注意，尽管大多数机器以相同的方式执行此操作，但不能保证浮点和整数数据的存储方式相同，因此要完全确定一切正常，您不仅需要知道大小，还需要知道它是否是整数或浮点数。

另一种选择是仅使用和生成文本格式的数据。这可能几乎同样容易实现，除非您的应用程序的数据输入/输出率非常高且处理量很少，否则性能差异可能很小。并且（对某些人）的好处是，您可以在文本编辑器中读取输入和输出数据，而不是尝试解码输出中字节 51213498-51213501 的值实际上应该是什么，当您遇到问题时编码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T17:43:40.260

如果您需要在 2,4 或 8 字节整数类型和字节索引数组（反之亦然）之间重新解释，那么您需要知道字节顺序。

这经常出现在密码算法实现、序列化应用程序（如网络协议、文件系统或数据库后端），当然还有操作系统内核和驱动程序中。

它通常由像 ENDIAN... 这样的宏检测到。

例如：

```
uint32 x = ...;
uint8* p = (uint8*) &x; 
```

p 指向 BE 机器上的高字节和 LE 机器上的低字节。

使用宏，您可以编写：

```
uint32 x = ...;

#ifdef LITTLE_ENDIAN
    uint8* p = (uint8*) &x + 3;
#else // BIG_ENDIAN
    uint8* p = (uint8*) &x;
#endif 
```

例如，总是得到高字节。

这里有定义宏的方法：[C 宏定义确定大端还是小端机器？](https://stackoverflow.com/questions/2100331/c-macro-definition-to-determine-big-endian-or-little-endian-machine)如果您的工具链没有提供它们。

# jakarta-ee - 做什么 ${球衣版本} pom.xml 中的意思

> ID：13994679
> 
> 赞同：0
> 
> 时间：2012-12-21T17:37:18.390
> 
> 标签：jakarta-ee, maven, jax-rs, pom.xml

我在这里下载了示例气氛 jax-rs 源代码 - [http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.atmosphere.samples%22%20AND%20a%3A%22atmosphere-jaxrs2-聊天%22](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.atmosphere.samples%22%20AND%20a%3A%22atmosphere-jaxrs2-chat%22)

我下载了战争和sources.jar。并且 pom.xml 可以在浏览器中查看 - [http://search.maven.org/remotecontent?filepath=org/atmosphere/samples/atmosphere-jaxrs2-chat/1.0.7/atmosphere-jaxrs2-chat-1.0.7 .pom](http://search.maven.org/remotecontent?filepath=org/atmosphere/samples/atmosphere-jaxrs2-chat/1.0.7/atmosphere-jaxrs2-chat-1.0.7.pom)

我想将这个 pom.xml 中的一些依赖项复制到我自己的 pom.xml 中，但我看到类似 -

```
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <version>${logback-version}</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>${jersey-version}</version>
</dependency> 
```

我假设`${logback-version}`并且`${jersey-version}`是占位符，但它们实际设置在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:41:59.820

在父 pom. 在 pom 的顶部，有一个对父 pom 的引用，它保存了值。

[这个线程](https://stackoverflow.com/questions/9708230/maven-access-properties-on-parent-pom-from-a-child-pom)中的一些更多理由- 基本上，它使版本在多模块项目中保持同步。

父定义看起来像这样：

```
<parent>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>my-parent</artifactId>
  <version>2.0</version>
  <relativePath>../my-parent</relativePath>
</parent> 
```

就像在pom 文档页面的[继承部分中解释的那样。](http://maven.apache.org/pom.html#Inheritance)

# ruby - jruby 和 spree erb 模板有问题

> ID：13994680
> 
> 赞同：1
> 
> 时间：2012-12-21T17:37:24.133
> 
> 标签：ruby, ruby-on-rails-3.2, jruby, erb, spree

我很难使用 spree 1.3.0 和 jruby 1.7.1。看起来 jruby 无法解析 erb 模板，并且有时会给出没有任何意义的字符串分配错误，因为将 ruby​​ 更改为 1.9.3 效果很好（是的，没有错误！）。

我用 WEBrick 和 Trinidad 试过这个，两者的行为方式相同。

如果您能告诉我这里发生了什么，为什么？以及解决此问题的可能方法，我将不胜感激。谢谢！

如果您需要我的任何东西，请告诉我，例如 Gemfile 或任何环境设置。

请参阅以下图片以供参考：

![在此处输入图像描述](../Images/83dc7b93957c839d212ce3bd069b044b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:05:44.483

我发现，这是 jruby 的一个问题，它以一种奇怪的方式处理 deface gem。我想 spree 需要一段时间才能切换到 jruby。现在关闭这个问题，因为没有答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T23:29:20.827

实际上，在自定义 Spree 时，Deface 在 Admin 中最实用。这是我的意见以及许多其他人。

使用 JRuby 时，我使用了以下设置： Rails.application.config.deface.enabled = false

# ruby-on-rails - 每次触发事件时如何设置属性值？

> ID：13994687
> 
> 赞同：0
> 
> 时间：2012-12-21T17:38:08.953
> 
> 标签：ruby-on-rails, ruby, implementation, state, state-machine

我正在使用 Ruby on Rails 3.2.9，我只是想使用[state_machine](https://github.com/pluginaweek/state_machine) gem。我有以下陈述：

```
class Article < ActiveRecord::Base
  state_machine :attribute => :status, :initial => :unconfirmed do
    state :confirmed, :value => 'confirmed'
    state :unconfirmed, :value => 'unconfirmed'

    event :confirm do
      transition :unconfirmed => :confirmed
    end

    event :unconfirm do
      transition :confirmed => :unconfirmed
    end
  end
end 
```

我还有一个模型`confirmed_at`属性，用于在切换到.`Article``:status``:confirmed`

如何将`confirmed_at`属性初始化为当前时间？每次触发事件时，我*应该*如何将其设置为当前时间？`confirmed_at``:confirm`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:49:47.337

看起来`before_transition`就是为了这个。

```
before_transition :confirmed => any - :confirmed, :do => :set_confirmed_at 
```

然后使用该名称添加一个方法：

```
def set_confirmed_at
  self.confirmed_at = Time.now
end 
```

# javascript - 添加事件侦听器Javascript的问题

> ID：13994692
> 
> 赞同：2
> 
> 时间：2012-12-21T17:38:36.490
> 
> 标签：javascript, html, dom-events, addeventlistener

我正在尝试为自己编写一个超级排序的 Javascript 库，只是为了让画布游戏更容易一些。

我想为来自 Javascript 的按键添加事件侦听器，而不是将其作为属性放入。

但每次我这样做时，它都无法正常工作，我真的很沮丧，浪费了我所有的备件，试图弄清楚我什么时候可以做功课！

无论如何，你认为有人能告诉我我哪里出错了吗？对于这段代码，我希望它`alert()`使用刚刚按下的箭头键

这是 index.html

```
<html>
<head>
<script src="spencersjslibrary.js"></script>
</head>
<body>
<div id="blueblock" style="background:blue; width:100px; height:100px;"></div>
<script>addkeylisten("blueblock")</script>
</body>
</html> 
```

这是 spencersjslibrary.js

```
//Keyboard stuff for moving and yeah

//Adding event listener
function addkeylisten(ida) {
    alert(ida)
    var ide = document.getElementById(ida)
    ide.addEventListener("keypress", keycheck(event))
}

//checking what key was pressed and assign string value to "lastkey"
function keycheck(event) {
    var bttn = (event.keyCode);
    switch (bttn) {
        case 38:
            lastkey = "up";
            break;
        case 40:
            lastkey = "down";
            break;
        case 37:
            lastkey = "left";
            break;
        case 39:
            lastkey = "right";
            alert(lastkey)
    }
} 
```

所以我修复`addEventListener`了它，让它在点击事件时也能正常工作，但不是我`keypress`的。

这只是元素类型，就像它可以与画布或正文元素一起使用吗？如果它像一个图像或某种东西，是否必须集中注意力才能听到按键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:41:25.153

语法`ide.addEventListener("keypress",keycheck(event))`不正确。

您需要将其注册为

> ide.addEventListener("keypress",keycheck);

您的代码实际上是在调用处理程序，而不仅仅是注册函数指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:44:52.993

@closure 的回答是正确的。

`ide.addEventListener("keypress", keycheck(event))`将**始终**`keycheck(event)` *立即*执行。这很糟糕，因为`event`没有定义，并且您的处理程序不会被调用`keypress`。

你要找的是这个：

```
ide.addEventListener("keypress", function (event) {
    keycheck(event)); // binds to the input ^
}); 
```

这可以简化为：

```
ide.addEventListener("keypress", keycheck); 
```

因为您实际上可以像 JavaScript 中的变量一样引用函数（这很棒）。

# html - Django 书（表格）

> ID：13994693
> 
> 赞同：0
> 
> 时间：2012-12-21T17:38:39.647
> 
> 标签：html, django, forms

我一直在阅读 Django Book，但在理解表单时遇到了麻烦。

参考： http: [//www.djangobook.com/en/2.0/chapter07.html](http://www.djangobook.com/en/2.0/chapter07.html)

以下让我感到困惑：

```
<html> <head>
 <title>Search</title> </head> <body>
 <form action="/search/" method="get">
    <input type="text" name="q">
    <input type="submit" value="Search">
 </form> </body> </html> 
```

我知道“操作”指示要转到哪个 URL，“名称”确定如何区分传入的 HTTP 响应，但“值”有什么作用？我什么时候需要访问“价值”或如何访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:42:45.613

value="Search" 部分是 HTML。它设置提交按钮上的显示文本。它纯粹是 HTML，与 Django 无关。

如果您真的愿意，您可以通过您的 Django 代码设置该值，但我想这大约是您想要的修改限制。

# php - PHP：输入时限调查

> ID：13994696
> 
> 赞同：1
> 
> 时间：2012-12-21T17:38:57.317
> 
> 标签：php, input, time, limit

我想在有限的时间内进行测验，让用户回答问题，这样他们就不能用谷歌搜索了。不幸的是，如果我使用 JavaScript 之类的客户端语言执行此操作，则很容易绕过此时间保护。有没有办法通过 PHP 做到这一点？它应该是安全的。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:42:40.197

当然，只需告诉用户他们有设定的时间去做，然后像这样设置一个会话变量：

```
session_start();
$_SESSION['to_be_completed_by'] = time() + 60; 
```

以秒为`time()`单位获取当前纪元时间，在这里您给用户一分钟。当他们提交时：

```
if($_SESSION['to_be_completed_by'] <= time()){
    // Completed within the limit
}else {
    // Not completed
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:42:53.013

`$_SESSION['starttime'] = time();`在渲染页面上，然后`$duration = time() - $_SESSION['starttime']`在结果页面上。检查是否`$duration > N`（`N`最大持续时间在哪里）。

这也可以与 javascript 结合使用，以提醒用户他们的时间不多了。

应该注意的是，这需要`session_start()`在页面上调用。

# c# - Web 窗体对象引用未设置为对象的实例

> ID：13994703
> 
> 赞同：2
> 
> 时间：2012-12-21T17:39:21.573
> 
> 标签：c#, asp.net, .net, webforms

> **可能重复：**
> [.NET 中的 NullReferenceException 是什么？](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)

我在单个页面上有一堆标签，需要在页面加载时更新。我知道标签的 ID 是“Label1”-“Label8”，但是当我运行以下代码段时，我得到“对象引用未设置为对象的实例”。在 Label.Text 行上，所以我假设无法找到 Label。

```
int i = 1;
foreach (string sel in selArr)
{
    string labelId = "Label" + i.ToString();
    MySqlCommand cmd = new MySqlCommand(sel, conn);
    MySqlDataReader reader = cmd.ExecuteReader();
    while (reader.Read())
    { 
       Label label = (Label)FindControl(labelId);
       label.Text = "( " + reader["c"] + " )";
    }
    reader.Close();
    i++;
} 
```

我还没有真正尝试过很多其他方法，因为我对 C# 还是很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:42:00.147

FindControl 方法只搜索页面的顶层。它不会对整个页面进行递归搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:03:21.343

您可以像您所做的那样访问您的表单 ID。可能是由于某种可能发生的损坏。试试下面的。

**解决方案 1：**

检查您的**Designer.cs**文件是否有以下类型的标签行。如果不存在，则手动添加。

```
protected global::System.Web.UI.WebControls.Label Label3; 
```

**解决方案 2**

1.  删除designer.cs文件
2.  右键单击父 aspx 文件并选择“转换为 Web 应用程序”
3.  这应该使用所有适当的条目重新创建 Designer.cs 文件

我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:49:12.317

如果你知道标签在哪里，告诉 C#，我相信[jim 已经记录了一个很好的解释](https://stackoverflow.com/a/3841698/1471381)，这不完全是你的答案，但可能会给你这个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T18:36:19.960

如果您的标签控件在另一个控件中，那么您可以使用以下方法递归浏览页面中的所有控件以找到您的目标：

```
protected Control RecursiveFindControl(Control targetControl, string findControlId)
    {
        if (targetControl.HasControls())
        {
            foreach(Control childControl in targetControl.Controls)
            {
                if (childControl.ID == findControlId)
                {
                    return childControl;
                }

                RecursiveFindControl(childControl, findControlId);
            }
        }

        return null;
    } 
```

要使用，它会是这样的：

```
Label label = (Label)RecursiveFindControl(Page, labelId); 
```

# mysql - tomcat 不以 xampp 开头

> ID：13994705
> 
> 赞同：2
> 
> 时间：2012-12-21T17:39:22.093
> 
> 标签：mysql, tomcat, xampp

我在 xampp 中遇到了 mysql 问题，所以我决定重新安装 xampp。我现在似乎对Tomcat有问题。它在控制面板的模块服务列中被勾选为绿色，但是我无法启动它。它只是说“正在尝试启动 Tomcat 服务”。

我也有以下奇怪的症状。我可以在浏览器中访问 htdocs 中的 php 文件。可以预见，唯一的错误是关于旧的 mysql 用户名无法识别的错误。我还可以访问“localhost/phpmyadmin”，然后它会警告我更改默认密码和用户名的重要性。

但是我无法访问“localhost/xampp”；因此无法进行这些更改。

我是一名业余程序员，今天早些时候问了一个关于这个问题的问题，但无济于事。从那以后，我清楚地意识到 Tomcat 出了点问题。因此，这可能是问题的根本原因。

但是，老实说，当我之前让 xampp 运行良好时，我从来不知道 Tomcat 到底做了什么。

我将不胜感激任何帮助。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:56:27.187

你在哪个操作系统上工作（linux/windows/...）。我在win8上工作过，也有类似的问题。Tomcat 无法启动，我必须做的是添加环境变量 JAVA_HOME（java jdk 文件夹的路径），将其添加到路径变量，然后添加 CATALINA_HOME 变量，您可以使用下一行通过 cmd 添加它：

```
set "JAVA_HOME=c:\Program Files (x86)\Java\jdk1.7.0_03"
set "PATH=%JAVA_HOME%\jre\bin;%JAVA_HOME%\bin;%PATH%"
set "CATALINA_HOME=d:\usr\apache-tomcat-7.0.27" 
```

在 c:... 所在的第一行中，将其更改为包含 Java 的目录，并在包含 tomcat 的目录的第三个路径中，检查它们是否是同一类型，我的 xampp 是 x86 和 java x64，但它没有工作在一起，所以我已经安装了 x86 java

还尝试使用 cmd 启动 tomcat（转到 tomcat 文件夹中的 bin 文件夹并键入 startup.bat）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T17:41:27.470

尝试`catalina_start`通过双击它运行。您可以在安装 Tomcat 的目录中找到它。在这样做之前，您可能希望在 CMD 中运行这些命令：

```
set "JAVA_HOME=c:\Program Files (x86)\Java\jdk1.7.0_03"
set "PATH=%JAVA_HOME%\jre\bin;%JAVA_HOME%\bin;%PATH%"
set "CATALINA_HOME=d:\usr\apache-tomcat-7.0.27" 
```

根据JDK和Tomcat的安装路径更改这些命令

# mysql - ASP、MySQL 和 UTF-8

> ID：13994706
> 
> 赞同：4
> 
> 时间：2012-12-21T17:39:22.403
> 
> 标签：mysql, asp-classic, utf-8, odbc

首先，我已经阅读了几乎所有关于此的主题。我已经尝试了所有建议，但我无法解决这个问题。

事情就是这样。我在一个项目中使用 Classic ASP 和 MySQL。一切都很好。如果我写（一个例子） Response.Write("ĞŞÜÇÖİ") 它就像一个魅力。但如果该字符串来自数据库，我会看到“ÄÅÃœÃ‡Ã–Ä°”而不是“ĞŞÜÇÖİ”。当我用 phpMyAdmin 看这个时，没关系。

我使用 Dreamweaver CS6。我保存所有页面 Unicode (UTF-8)。我在包含文件中编写了 Session.CodePage = 65001, Response.CodePage = 65001, Response.Charset = "utf-8" ，每个页面的顶部都有它。我已经编写了元字符集 utf-8。我使用 ODBC 5.2 x64 驱动程序，我的连接字符串有 charset:UTF8;。以及所有 MySQL 设置 utf-8（表、字段、所有内容）。

好吧，我不想使用其他编码，字符集。我在做什么错？看来，是关于数据库的。问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T23:26:57.667

需要使用 charset 参数指定连接字符串中的字符集；请参阅[MySQL ODBC 文档](https://dev.mysql.com/doc/refman/5.5/en/connector-odbc-configuration-connection-parameters.html)。例如添加~~“charset=utf8;”~~ “字符集=ucs2；” 到您的连接字符串。

编辑：我终于有机会对此运行一个简单的测试工具，它确实因 charset=utf8 而失败。但是，由于 VBScript 是在 UCS2 内部运行的，所以我尝试使用 charset=ucs2 并且它工作正常。注意：页面仍然设置为以 UTF-8 格式发送所有输出，只是 VBScript 正在使用 UCS2 从 ODBC 连接中提取数据。工作完成:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:43:03.100

甚至您的连接也应该是 UTF8。在运行其他查询之前运行此查询

```
set names 'utf8' 
```

> SET NAMES 指示客户端将使用什么字符集将 SQL 语句发送到服务器。因此，SET NAMES 'cp1251' 告诉服务器，“来自该客户端的未来传入消息在字符集 cp1251 中。” 它还指定服务器用于将结果发送回客户端的字符集。（例如，如果您使用 SELECT 语句，它指示用于列值的字符集。）

SET NAMES 'x' 语句等效于以下三个语句：

```
SET character_set_client = x;
SET character_set_results = x;
SET character_set_connection = x; 
```

仅供参考：[手动](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)

# sql - 另一个表上同一表的两列的内连接，包括 OR 条件

> ID：13994709
> 
> 赞同：2
> 
> 时间：2012-12-21T17:39:30.143
> 
> 标签：sql, sql-server

表 1 - `USERS`：

```
user_id | email_id         | type
---------------------------------------
000121  | test_20@test.com | EXT
000125  | best_21@test.com | LOT
000128  | lite_21@test.com | EXT 
```

表 2- `HISTORY`：

```
old_user_id | new_user_id | another_type
----------------------------------------
000128      | 000121      | INIT 
```

我`email_id`手头说`test_20@test.com`，我想做一个应该返回 1 的连接查询，如果`user_email_id`我有的话，是在`USERS`表`EXT`中 TYPE 和`HISTORY`表`ANOTHER_TYPE`中`INIT`;

我有一个带有单个联接的查询`old_user_id`。

```
IF EXISTS (SELECT 1 FROM   history cmr (nolock) 
                  INNER JOIN users au (nolock) 
                          ON au.user_id = cmr.old_user_id 
                  AND cmr.another_type = 'INIT  'AND au.type = 'EXT' 
                   AND au.email_id = 'test_20@test.com') 
  SELECT 1 ELSE   SELECT 0 
```

当我查询`test_20@test.com`or`test_20@test.com`时，它应该返回 1。我想为`new_user_id`也添加连接条件。

所以任何一个用户（旧的或新的）都应该`EXT`在`USERS`，并且应该`INIT`在`HISTORY`

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:46:03.013

```
IF EXISTS 
(
SELECT * FROM   history cmr 
Left JOIN users au  ON au.user_id = cmr.old_user_id  AND cmr.another_type = 'INIT  'AND au.type = 'EXT'  AND au.email_id = 'test_20@test.com' 
Left JOIN users au2  ON au2.user_id = cmr.new_user_id  AND cmr.another_type = 'INIT  'AND au2.type = 'EXT'  AND au2.email_id = 'test_20@test.com'
Where (au.user_id is NOT NULL) or (au2.user_id is NOT NULL)
)
SELECT 1 ELSE   SELECT 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:48:57.903

用途`case when`：**BTW`user`是保留关键字。所以你可能想用方括号。**

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/c0012/10)

查询一：

```
SELECT case when 
       EXISTS (Select * From historyT cmr 
       Left Join userT au  
       On (au.user_id = cmr.old_user_id  
       And cmr.another_type = 'INIT'
       And au.type = 'EXT'  
       And au.email_id = 'test_20@test.com')) 
       Then 1
       Else 0
End  Status               
; 
```

查询2：

```
SELECT case when 
   EXISTS (Select * From historyT cmr 
   Left Join userT au  
   On (au.user_id = cmr.old_user_id  
   And cmr.another_type = 'INIT'
   And au.type = 'EXT'  
   And au.email_id = 'test_20@test.com') 
   Left Join userT au2  
   On (au2.user_id = cmr.new_user_id  
   And cmr.another_type = 'INIT' 
   And au2.type = 'EXT'  
   And au2.email_id = 'test_20@test.com'
   And (au.user_id is Not Null) 
   or (au2.user_id is Not Null)))
   Then 1
   Else 0 
```

结束状态；

结果：

```
STATUS
1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T18:32:53.293

试试这个：

```
IF EXISTS (SELECT 1 
           FROM 
                history cmr (nolock) INNER JOIN 
                users au (nolock) 
           ON 
                (au.user_id = cmr.old_user_id or au.user_id = cmr.new_user_id)
           WHERE 
                  cmr.another_type = 'INIT' AND 
                  au.type = 'EXT' AND 
                  au.email_id = 'test_20@test.com') 
  SELECT 1 
ELSE   
  SELECT 0 
```

# ruby-on-rails - 使用 % 进行搜索的分页（kaminari）中的 url 错误

> ID：13994710
> 
> 赞同：0
> 
> 时间：2012-12-21T17:39:32.997
> 
> 标签：ruby-on-rails, kaminari

我在搜索页面上有分页（kaminari），如果我用“50% 折扣”之类的 % 搜索东西，我会得到`http://some.domain.com/50%25+discount`分页有错误 url（没有转义 %）的页面，例如： `http://some.domain.com/50%+discount?page=2`

我做错了吗？还是宝石中的错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:08:58.320

% 是 url 中的特殊字符，不是吗？您将需要您的搜索方法在将查询传递到 url 之前对其进行清理。

我相信您可以使用 gem Stringex 中提供的 String 类的方法来清理搜索词。

[https://github.com/rsl/stringex](https://github.com/rsl/stringex)

从那里github页面。

```
"10% off if you act now".to_url => "10-percent-off-if-you-act-now" 
```

编辑：

你需要有这样的东西（这不是很干净，但它给了你一个想法）

```
class SearchesController < ApplicationController
  def new
     #Form in its view that goes to create via json
  end

  def create
     query = params[:query].to_url
     redirect_to "/search/#{query}"
  end

  def show
    #search paged on params[:query]
  end

end 
```

路线

```
resources :searches, :only => [:new, :create, :show], :new => ""
get "/search" => "searches#new", :via => :get 
```

您会表现得像对待普通对象一样对待它，但实际上从未真正保存它。如果需要，您甚至可以更改 :create 方法的名称以进行解析，但这样内置的 rails 助手和逻辑将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:18:08.520

我的解决方案是

`paginate @entities, :params => { :keyword => CGI.escape(@keyword) }`

在`route.rb`我有

`match "/:keyword" => "route#index", :keyword => /.*/`

# c - 短与 Int Gcc

> ID：13994712
> 
> 赞同：0
> 
> 时间：2012-12-21T17:39:36.853
> 
> 标签：c, time, int, short

与 Loop1 相比，我预计以下程序中的 Loop2 会花费更多时间。但即使在启用优化 (gcc -O2) 之后，我发现这两个循环几乎都需要相同的时间。为什么在我的系统中 sizeof(int)=4 和 sizeof(short)=2 会这样？我期待编译器放置一个简短的乘法指令来乘以短裤，从而缩短时间。

```
#include <stdio.h>
#include <time.h>

float DiffTime(struct timespec Start,struct timespec Stop);

main ()
{
    struct timespec start,stop;    
    int    i;  
    short  a,b,c;
    int    p,q,r;

    a=1;
    b=2;
    c=3;
    p=1;
    q=2;
    r=3;
    clock_gettime (CLOCK_THREAD_CPUTIME_ID, &start);
    for(i=0;i<1000000;i++) // Loop1
    {
        a=b*a;
    }
    clock_gettime (CLOCK_THREAD_CPUTIME_ID, &stop);
    printf("Time taken %11.9fs\n",DiffTime(start,stop));
    clock_gettime (CLOCK_THREAD_CPUTIME_ID, &start);
    for(i=0;i<1000000;i++) // Loop2
    {
        p=q*p;
    }
    clock_gettime (CLOCK_THREAD_CPUTIME_ID, &stop);
    printf("Time taken %11.9fs\n",DiffTime(start,stop));

    printf("%d,%d\n",a,p);        

}

float DiffTime(struct timespec Start,struct timespec Stop)    
{
 long nTime1,nTime2;
 nTime1=Start.tv_sec*1000000000 + Start.tv_nsec ;
 nTime2=Stop.tv_sec*1000000000 + Stop.tv_nsec ;
 return((float)(nTime2-nTime1)/1000000000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:43:03.567

不要期望在性能方面能够对您的编译器进行第二次猜测。您唯一应该期待的是基于您的算法的更好的大 O 时间。

如果手册说数据类型的大小是 X，那就是它声称的全部内容，这就是您应该期望的全部内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:44:18.387

如果启用优化后两个循环都是空的，我不会感到惊讶。您是否尝试将 N 增加 10 倍并查看是否存在差异？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:41:50.243

在大多数 32 位架构（包括 x86）上，乘以 16 位值与 32 位值所用的时间相同。（实际上，它可能会使用完全相同的指令。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:47:12.443

在大多数硬件平台上，只有一种整数执行单元，它将在相同数量的 CPU 周期内执行与大小无关的整数运算。所以乘以`signed char`, `short`, `int`,`long long int`将花费相同的时间，因为它是同一块硬件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T18:26:07.147

正如人们已经说过的那样，处理器 ALU 具有固定的大小，并且会将较小的整数提升到该首选大小。现代处理器至少有 32 位 ALU。还没有人提到的一点是，在 32 位或 64 位机器上，使用较短的类型甚至会产生较慢的代码。由于一些深奥的规则，代码生成器在某些情况下可能需要添加显式符号扩展指令。我在带有 gcc v3 的 SPARC 上的 Solaris 上产生了这种效果，它在代码中添加了大量 16 位截断指令，使得短裤比使用 int 慢得多。

# c# - “DisplayName”子键值显示为空白

> ID：13994726
> 
> 赞同：1
> 
> 时间：2012-12-21T17:40:33.390
> 
> 标签：c#, registry

我制作了一个控制台应用程序来检索我机器上安装 `DisplayName`的所有应用程序的 registryKeys 的“”值。`(RegistryKey.GetValue("DisplayName")`

我采用了成功的方法，并在使用 Autodesk Revit API 的程序中实现了它。问题是，`DisplayName`我正在寻找的特定应用程序没有出现，或者它是一个空白字符串。这在我的简单控制台应用程序中以前没有发生过。我需要这个，因为我需要能够获取安装路径。

有没有人知道为什么相同的方法`DisplayName`在我的控制台应用程序和控制台应用程序中不能一致地显示“”值`Autodesk Revit`？许多`DisplayName`值确实出现了，但有些显然没有。

# c# - 添加 xmlns 属性并以编程方式验证架构

> ID：13994729
> 
> 赞同：1
> 
> 时间：2012-12-21T17:41:01.193
> 
> 标签：c#, .net, xml, xml-validation, xsd-validation

我正在针对可能不包含 xmlns:information 的架构验证 XML 文档。那么，如何将此类文档（或任何没有该架构信息的节点）标记为无效？我之所以这么问，是因为 .NET 只允许您针对已在 XML 文档中正确识别的模式进行验证，并且我想保证没有不符合该模式的 XML 通过。

**如何在不需要添加属性、保存文件并重新加载的情况下验证此架构？**

例如，这有效：

```
 xmlDoc.Load(file);

        xmlDoc.DocumentElement.SetAttribute("xmlns", "http://test.mysite.com/schemas/myschemas");
        xmlDoc.DocumentElement.SetAttribute("xmlns:xsi", "http://www.w3.org/2001/XMLSchema");
        xmlDoc.DocumentElement.SetAttribute("xmlns:schemaLocation", "schemas/myschema.xsd");

        xmlDoc.Save(file);  

        XmlSchema mySchema = XmlSchema.Read(XmlReader.Create("schemas/myschema.xsd"), settings_ValidationEventHandler);

        XmlReaderSettings settings = new XmlReaderSettings();
        settings.ValidationType = ValidationType.Schema;
        settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
        settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
        settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
        settings.Schemas.Add(mySchema);
        settings.ValidationEventHandler += new ValidationEventHandler(settings_ValidationEventHandler);

        XmlReader reader = XmlReader.Create(file, settings);
        xmlDoc.Load(reader); 
```

但这不会：

```
 xmlDoc.Load(file);

        xmlDoc.DocumentElement.SetAttribute("xmlns", "http://test.mysite.com/schemas/myschemas");
        xmlDoc.DocumentElement.SetAttribute("xmlns:xsi", "http://www.w3.org/2001/XMLSchema");
        xmlDoc.DocumentElement.SetAttribute("xmlns:schemaLocation", "schemas/myschema.xsd");

        XmlSchema mySchema = XmlSchema.Read(XmlReader.Create("schemas/myschema.xsd"), settings_ValidationEventHandler);

        xmlDoc.Schemas.Add(mySchema);

        xmlDoc.Validate(settings_ValidationEventHandler); 
```

# callback - 使用 SWIG 包装 C++ 函数指针回调

> ID：13994735
> 
> 赞同：4
> 
> 时间：2012-12-21T17:41:28.990
> 
> 标签：callback, java-native-interface, swig

我正在将桌面和 iOS 应用程序中使用的 C++ 库移植到 Android。我正在使用 SWIG 创建 JNI 代码，并且我已经完成了大约 90% 的工作。我剩下的唯一问题是包装 C++ 库中的回调函数。

在我的主要设备类中，我有以下内容：

```
class Device
{
public:
    void set_receive_callback(ReceiveFunctonPointer func, void *userdata);
}; 
```

回调函数和结构数据具有以下签名：

```
// enum wrapped by SWIG
enum CommandType {
    ...
};

// enum wrapped by SWIG
enum ValueFormat {
    ...
};

// Value map wrapped by SWIG
typedef std::map<int, std::string> ValueMap;

// struct to be passed back.  Already wrapped into Java class by SWiG
struct DeviceReceive {
    void *userdata;
    CommandType command;
    std::string messageId;
    std::string value;
    ValueFormat format;
    ValueMap value_map;
    Device *device;
};

// the callback function signature
typedef void (*ReceiveCallback)(DeviceReceive data); 
```

根据我的阅读，我需要在 Java 中创建某种 DeviceCallback 接口以供使用。那应该很简单，例如：

```
package my.sdk;
import my.sdk.DeviceReceive;

public interface DeviceCallback {
    void handleCallback(DeviceReceive data);
} 
```

我的问题是，使用 SWIG，我如何从回调中获取，`DeviceReceive`从 C++`DeviceReceive`结构创建 java 类，然后调用 Java 回调处理程序。请注意，回调也发生在 C++ 库创建的随机后台线程上。

# sql - 如何将 auto_increment 键插入 SQL Server 表

> ID：13994736
> 
> 赞同：10
> 
> 时间：2012-12-21T17:41:29.553
> 
> 标签：sql, sql-server

我想将行插入到具有唯一、非自动递增主键的表中。

是否有本机 SQL 函数来评估最后一个键并递增它，或者我必须分两步完成：

```
key = select max(primary.key) + 1

INSERT INTO dbo.TABLE (primary.key, field1, fiels2) VALUES (KEY, value1, value2) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-21T17:43:25.453

由于它是自动生成的，所以不要提供它：

```
INSERT INTO bo.TABLE (field1, fiels2) VALUES (value1, value2) 
```

**更新**：如果您的列是`IDENTITY`列，这将起作用。

要为标识列提供显式值，您必须这样做：

```
set identity_insert bo.TABLE on

INSERT INTO bo.TABLE (primary_key, field1, fiels2) VALUES ((SELECT ISNULL(MAX(id) + 1, 0) FROM bo.Table), value1, value2)

set identity_insert bo.TABLE off 
```

但这样做没有令人信服的理由。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-21T18:03:28.460

从您自始至终的评论来看，您在表上有一个不是标识列的主键。

如果您的 SQL Server 版本是 SQL 2012，您应该查看序列：http: [//msdn.microsoft.com/en-us/library/ff878091.aspx](http://msdn.microsoft.com/en-us/library/ff878091.aspx)

在其他版本中，您需要使用主键列的 IDENTITY 属性 (http://msdn.microsoft.com/en-us/library/aa933196(v=sql.80).aspx) 重新创建表，或者使用两步法。

如果您采用两步方法，则需要确保同时运行的插入不会最终使用相同的新值。最简单的方法是将选择和插入组合成一个值并使用可序列化的表提示：

```
CREATE TABLE dbo.Tbl1(id INT PRIMARY KEY, val1 INT, val2 INT)

INSERT INTO dbo.Tbl1(id, val1, val2)
VALUES((SELECT ISNULL(MAX(id)+1,0) FROM dbo.Tbl1 WITH(SERIALIZABLE, UPDLOCK)), 42, 47);

SELECT * FROM dbo.Tbl1; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T20:42:18.637

在我看来，最好的答案是修复你的表，使 PK 列是一个标识列。（请参阅我对 Sebastian Meine 的答案的评论，了解为什么您当前选择的答案不是最好的。）使现有 PK 成为身份列的唯一方法是换出表格。大致：

```
BEGIN TRAN;
-- Rename all constraints in original table
EXEC sp_rename 'dbo.YourOriginalTable.PK_ConstraintName', 'PKConstraint_Backup';
EXEC sp_rename 'dbo.YourOriginalTable.OtherConstraintName', 'OtherConstraintName_Backup';
CREATE TABLE dbo.WorkTable (
    YourPKColumn int identity(1, 1) NOT NULL -- your PK converted to identity
    CONSTRAINT PK_YourOriginalTableConstraintName PRIMARY KEY CLUSTERED,
    AllOtherColumns -- all your other columns exactly as in the original table
);

SET IDENTITY_INSERT dbo.WorkTable ON;
INSERT dbo.WorkTable (YourPKColumn, AllOtherColumns)
SELECT YourPKColumn, AllOtherColumns
FROM dbo.YourOriginalTable WITH (TABLOCKX, HOLDLOCK);

SET IDENTITY_INSERT dbo.WorkTable OFF;

-- Drop all FK constraints from other tables pointing to your table
ALTER TABLE dbo.TableWithFK_1
DROP CONSTRAINT FK_TableWithFK_1_YourOriginalTableSomethingID;

-- Swap out the tables
EXEC sp_rename 'dbo.YourOriginalTable', 'YourOriginalTableBackup';
EXEC sp_rename 'dbo.WorkTable', 'YourOriginalTable';

-- If you didn't add them in the WorkTable creation,
-- add all other removed or needed constraints creation
ALTER TABLE dbo.YourOriginalTable
ADD CONSTRAINT OriginalConstraint (OriginalConstraintColumns);
-- Add back FK constraints from other tables to this one.
COMMIT TRAN; 
```

您现在有一个表，其中有一个标识列，上面有一个聚集的 PK。你可以插入它没有问题。不再有并发问题和**容易出错**`SELECT Max() + 1`的愚蠢垃圾。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T20:02:15.290

如果不存在则创建表 Emp ( eid int(10) not null 主键 auto_increment, name varchar(45) not null, age int(5) default 20, Salary int(5) ) 插入emp值(102,'Ranjan' ,21,450000);

然后尝试下面的 sql 查询。它会自动将***eid***增加到下一个数字。

插入 emp (name,salary) values('Lisma',118500);

从emp中选择*；**

# xml - YQL 查询返回无效的 XML

> ID：13994737
> 
> 赞同：2
> 
> 时间：2012-12-21T17:41:31.367
> 
> 标签：xml, wikipedia, yql

我目前正在使用以下 YQL 语句来抓取网站的页面内容。`{EncodedURI}`我正在抓取的页面在哪里。例如：http%3A%2F%2Fstackoverflow.com

```
SELECT * FROM html WHERE url="{EncodedURI}" 
```

对于大多数 URL，这工作得很好。XML 有效，我的应用程序继续。但是在某些 URL 上会返回无效的 XML。有趣的是，我发现导致此错误的一个 URL 是[http://en.wikipedia.org/wiki/God](http://en.wikipedia.org/wiki/God)。

我从查询中获取了原始响应并将其通过 XML 验证器并得到以下错误：

```
error on line 2 at column 6:XML declaration allowed only at the start of the document 
```

似乎响应末尾附近的 XML 变得混乱，但我无法找到确切的问题。

有任何想法吗？

**更新：**

我在响应结束时更改了 XML：

```
</body></results></query>>!-- Stotal: 288-->
<!-- Lengine9.yql.ac4.yhouocolm-->
< 
```

到

```
</body></results></query><!-- Stotal: 288-->
<!-- Lengine9.yql.ac4.yhouocolm--> 
```

我可以相当轻松地让我的应用程序修改 XML 以使其正常工作，但显然该解决方案并不理想。有人知道如何避免这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:46:47.747

我在 Firefox 中看到了错误。我可以做的解决方法是要求 JSON 响应。只需添加`&format=json`到 REST 调用。例如：[试试这个](http://query.yahooapis.com/v1/public/yql?q=SELECT%20%2a%20FROM%20html%20WHERE%20url=%22http://en.wikipedia.org/wiki/God%22%20&format=json)。至少您不必担心提要甚至不解析。同样，这并不理想，但应该可以。

# svn - 尝试使用 Dreamweaver 来解决 Subversion

> ID：13994738
> 
> 赞同：-1
> 
> 时间：2012-12-21T17:41:33.283
> 
> 标签：svn, dreamweaver

我开始在网站上的团队环境中工作，我真的很想开始使用某种形式的版本控制（我也多次搞砸了我自己的工作，没有它）。

我设置了[VisualSVN 服务器](http://www.visualsvn.com/server/)并使用他们的建议（分支/标签/主干）创建了一个存储库。我在trunk/中有一个网站的当前版本，并且我正在分支中进行重新设计。

当我第一次进行本地复制时，它会将分支/标签/主干与我的本地站点目录混合在一起。我意识到我需要像在服务器上一样创建整个存储库缓存。现在，我有分支/（重新设计文件）、标签/（当前为空）和主干/（公共站点文件）。现在，提交和事情看起来应该如此。

我像往常一样设置了远程服务器和测试服务器。但是，现在我使用的是分支目录，每当我将文件放到测试服务器时，它们都在分支子目录中（不是我想要的）。

我可以只拥有单独的存储库，但我的理解是最好将所有东西放在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:26:28.153

下面是对 Subversion 工作模式的简要概述。

1.  如上所述，您使用三个总体文件夹设置存储库。

2.  **树干**是最新的“好”工作副本所在的地方。如果他们是唯一一个在做某事的人，并且通常不会有大的变化，那么有些人会完成他们全部或大部分的承诺。开始是可以的，但是当您的需求变得更复杂时，您可能会遇到问题。

3.  **分支**文件夹是您存储与您拥有的任务或目标相对应的其他文件夹的位置。如果您正在进行重新设计，那么您会告诉 SVN，“为我创建一个名为 'redesign' 的新分支”。它将`branches/redesign`在服务器上创建所有与主干文件夹相同的文件。

4.  因为你想处理这些文件，你必须*切换*到它们，它告诉 Subversion “从我的本地机器上获取文件`branches/redesign`并将它们放在我的本地机器上，替换我现在拥有的东西。”

5.  您在 Dreamweaver 中工作并*提交*您的更改。它们被推送到分支文件夹中的服务器。你完成了重新设计。现在您想将更改放回主干，以便将来的分支和提交看到它们（以及与您一起工作的任何其他人）。您可以通过切换回主干并**合并**您的工作来做到这一点。这告诉 Subversion “将文件放入`branches/redesign`并找出它们与 的不同之处`trunk`，并将这些差异应用于主干。” 然后检查以确保这正确发生。如果 Subversion 不能自动解决这个问题，有时你会遇到冲突。你手动纠正那些。最后，你再次*提交*。

6.  此时您可以*删除*分支，因为您已经合并并完成了它。

7.  当您准备好一切（可能在重新设计之后）并部署您的站点时，您**标记**它说“这是一个新版本，我想*准确*记住文件的样子，所以我可以回去查看它们如有必要。” 标签就像您文件的快照，永远冻结在时间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:18:05.683

我不知道这是否是在 Dreamweaver 中使用 Subversion、测试服务器等的“正确”方式，但它似乎确实按我预期的方式工作。

而不是访问整个存储库，我只是访问存储库的分支子目录。因此，我的本地副本没有分支、标签或主干。有了这个，按预期放入我的测试服务器功能。

此时，我需要在 Subversion 服务器（与 Dreamweaver 相对）上进行标记、与主干合并等。无论如何，我认为这可能是一种更好的方法。

这一切听起来正常吗？我以前从未真正使用过版本控制（我正在阅读 SVN Book），所以我不确定做所有事情的“正确”方式。我的努力是使用 Dreamweaver 的内置功能，因为这个团队将使用它，我不想使过程过于复杂。我可能最终会成为版本控制管理员，我和其他人将进行日常网站维护。

# c++ - 如何使用新语法

> ID：13994739
> 
> 赞同：4
> 
> 时间：2012-12-21T17:41:34.287
> 
> 标签：c++

当我阅读一些文章时，我发现这条线非常神秘。

```
new (new_ptr + i) T(std::move(old_ptr[i])); 
```

有人可以解释这种语法是如何工作的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T17:45:15.863

好吧，好消息是，这些都不是新语法（但都是`new`语法，嗬嗬！）。在 C++11 中引入了一个正在使用的函数`std::move`，但仅此而已。

该行的语法称为*放置`new`*，并且已经存在了很长时间。*它允许您在内存中一些已分配*的空间创建对象。在这里，已经分配的内存由指针给出`new_ptr + i`。在那里创建的对象的类型是`T`.

放置 new 的一个简单且毫无意义的示例是：

```
int* p = new int(); // Allocate and initialise an int
new (p) int(); // Initialise a new int in the space allocated before 
```

的构造函数`T`正在被传递`std::move(old_ptr[i])`。假设`old_ptr`指向 类型的对象`T`，此移动允许使用*移动构造函数*来`T`创建对象。它基本上假装这`old_ptr[i]`是一个临时`T`对象（即使它实际上可能不是），允许新对象`T`从中窃取。要了解更多信息，请查阅[move semantics](https://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T17:49:31.753

它的一个位置。

```
new (new_ptr + i) T(std::move(old_ptr[i])); 
```

在这里，我们可以将其简化为：

```
new (<destinationLocation>) T(<constructor parameters); 
```

这是正常的 C++03，基本上允许您在预先分配的内存区域中动态创建对象（这是大多数人不会使用的高级技术（除非他们正在构建自己的容器，如对象）） .

std::move() 部分来自 C++11，它正在创建一个特殊的引用类型，允许在类型 T 中使用移动构造函数。

```
new T(std::move(<source Obj>)); 
```

这基本上是说使用源对象创建一个新的 T 并使用移动构造函数来提高效率。这意味着“源 Obj”在移动后将处于未定义状态（因此不可用），但它允许高效的对象创建。

将这两者结合起来，您将使用数组中的元素作为源对象来使用移动构造来放置新的位置。

# wordpress - 在此查询中包括用户自定义帖子类型？

> ID：13994741
> 
> 赞同：0
> 
> 时间：2012-12-21T17:41:40.730
> 
> 标签：wordpress

这会查询所有 WordPress 用户的帖子，但不包括自定义帖子类型。如何指定要包含的自定义帖子类型？

```
<?php
if ( is_user_logged_in() ) {

global $current_user;
      get_currentuserinfo();

echo 'User ID: ' . $current_user->ID . "\n";

//The Query
query_posts('author='.$current_user->ID );

//The Loop
if ( have_posts() ) : while ( have_posts() ) : the_post();
the_title();
echo "<br>";
endwhile; else:
echo "The user has not contributed anything!";
endif;

//Reset Query
wp_reset_query();

} else {
    echo 'Welcome, visitor!';
};
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:49:52.970

[http://codex.wordpress.org/Class_Reference/WP_Query#Type_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Type_Parameters)

`query_posts`使用类似的参数，`WP_Query`因此您可以执行类似...

```
query_posts(arraY(
  'author' => $current_user->ID,
  'post_type' => 'custom_post',
)); 
```

如果您希望显示多个帖子类型，则该`post_type`参数还接受一组帖子类型。

# algorithm - 什么术语描述了在不知道其他坐标的情况下生成坐标的程序/分形生成？

> ID：13994744
> 
> 赞同：2
> 
> 时间：2012-12-21T17:41:54.693
> 
> 标签：algorithm, terminology, fractals, procedural-generation

元胞自动机和中点位移都依赖于网格本身的信息，因为它正在生成以完成生成过程。Perlin/Simplex Noise 是我所知道的唯一一种使用预定地图为任何给定位置生成数据的方法，这种方法可以在不知道其他坐标的情况下计算任何坐标。

我试图描述的这种差异有一个术语吗？希望可以搜索到的东西？

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:42:25.983

我不知道这个术语。我可以建议***邻里独立***吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:25:33.097

您可能正在寻找“无上下文”？

# azure - SQL Azure 和编码 - 缺少国家字符

> ID：13994749
> 
> 赞同：0
> 
> 时间：2012-12-21T17:42:15.587
> 
> 标签：azure, azure-sql-database

我在 SQL Azure 中创建了一个数据库。现在，我对其进行测试，发现编码存在问题。一些字符是通过它们的 ASCII 变体来表示的。请参阅 MS SQL Server Management Studio 的屏幕截图。

![在此处输入图像描述](../Images/91b8f9d0332f2a156a7284eb683f078f.png)

如您所见，缺少一些国家字符，例如 ř、č、ů、ň、ě、ď...

这一定是 SQL Azure 的问题，因为我以前从未见过它，在使用 MS SQL 服务器时。

如何纠正它？在此先感谢，吉克拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T15:06:56.967

根据您提供的描述，我猜测问题出在数据库整理上。

在 Windows Azure 门户中创建 Azure 数据库时，选择**自定义创建**，然后选择正确的**排序规则**

![Azure 数据库排序规则](../Images/86b95b2458e3e78acf78fc88593df4a0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-17T20:04:06.507

在你的字符串之前使用 N ：

```
INSERT INTO ... VALUES N'Příliš žluťoučký kúň' 
```

# pointers - internal_ptr pin_ptr 的问题

> ID：13994753
> 
> 赞同：0
> 
> 时间：2012-12-21T17:42:38.810
> 
> 标签：pointers, c++-cli, pin-ptr

我正在尝试构建一个 cli/c++ ref 类。此类的目的是包装具有某些功能的本机类指针。本机类指针由黑盒工厂方法提供给我。对于我的生活，我无法弄清楚如何固定本机指针使其不动。这是代码中的场景（可以这么说）：

```
public ref class ManagedFoo{
    private: 
        NativeFooClass* myFoo;
    public:
        ManagedFoo(){
            NativeFooFactory factory();
            NativeFooClass* nativePtr = factory.CreateFoo();
            //here is where i get lost 
            //create a pined pointer to the nativePtr
            pin_ptr<NativeFooClass*> pinPtr = &nativePtr;
            //tring to assign pinPtr to the mamaber var= compilation faliuer 
            myFoo = pinPtr;
        }
} 
```

我不断收到：错误 C2440：'='：无法从 'cli::pin_ptr' 转换为 'NativeFooClass*'

我以为编译器对待它们是一样的？我需要静态转换吗？好像不对？？？

我试图固定这个指针的原因是因为当我尝试在一个方法中使用它，然后从 C# 调用这个方法时，我得到一个 AccessViolation 运行时错误“{”试图读取或写入受保护的内存。这通常表明其他内存已损坏。"}"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:50:55.107

你不需要。本机对象存储在不受 .NET 垃圾收集器管理的内存中——它们不会被移动，固定也不会产生任何影响。

简单地

```
 ManagedFoo()
    {
        NativeFooFactory factory; // fixed most-vexing parse
        myFoo = factory.CreateFoo();
    } 
```

应该足够了。

甚至更好

```
 ManagedFoo()
        : myFoo{NativeFooFactory().CreateFoo()}
    {
    } 
```

更新：因为我们发现这个对象不能活得比它的工厂长，

```
 ManagedFoo()
        : myFooFactory{new NativeFooFactory()}
        , myFoo{myFooFactory->CreateFoo()}
    {
    } 
```

尽管我建议使用某种智能指针来确保正确释放本机对象，但可能是我的[`clr_scoped_ptr`](https://codereview.stackexchange.com/q/1695/2150).

# jquery - IE 9 在悬停时重置背景位置（IE 错误？）

> ID：13994756
> 
> 赞同：3
> 
> 时间：2012-12-21T17:42:51.963
> 
> 标签：jquery, html, background, internet-explorer-9

我不敢相信我发现了一些在 IE8 和 IE7 中都有效但在 IE9 中失败的东西。这是我正在处理的页面：[链接到该站点][1]。请注意，在 IE9 中，当悬停链接时，浏览器会在侧边菜单上将背景重置为，`background-position: 0 0`并且只有在此应用后，脚本才会将其设置为动画`background-position: -20px 0`（我希望它首先出现的位置）。是我做错了什么还是存在 IE 错误？还需要一些帮助来修复它。

这是我仅适用于 IE brawsers 的脚本：

**

```
 $('#nav_bar li')
.css( {backgroundPositionX:"-224px",
       backgroundPositionY:"0px"} )
.mouseenter(function(){
    $(this).stop().animate(
        {backgroundPositionX:"-20px"}, 
        {duration:550})
    })

.mouseleave(function(){
    $(this).stop().animate(
        {backgroundPositionX:"-224px",
        backgroundPositionY:"0px"}, 
        {duration:550})
    }) 
```

谢谢您的帮助！

[1]：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:15:26.757

我可以建议以下纯 CSS 解决方案吗？

```
#nav_bar li {
    /* whatever you need for the background image */
    background-position: -224px 0;
    transition: background-position 0.55s ease;
    -webkit-transition: background-position 0.55s ease;
}
#nav_bar li:hover {
    background-position: -20px 0;
} 
```

如果您真的希望它在 IE9 及更低版本中运行（因为它在 IE10 中运行良好），请尝试`backgroundPosition`为自身设置动画，而不是为其组件属性设置动画。

```
$("#nav_bar li")
 .css({backgroundPosition:"-224px 0"})
 .hover(
  function() {$(this).stop().animate({backgroundPosition:"-20px 0"},{duration:550});},
  function() {$(this).stop().animate({backgroundPosition:"-224px 0"},{duration:550});}
 ); 
```

# c# - 这个公共静态获取 IP 函数线程安全吗？HttpContext的使用

> ID：13994758
> 
> 赞同：1
> 
> 时间：2012-12-21T17:42:53.567
> 
> 标签：c#, function, thread-safety, public, httpcontext

IIS 7.5 ASP.net 4.0 C# 4.0

这里的函数是线程安全的吗？假设同时来自不同访客的 1000 个不同的电话

```
public static string ReturnIpAddress()
{
    string srUserIp = "";
    try
    {
        if (HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"] != null)
        {
            srUserIp = HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"].ToString();
        }
        if (string.IsNullOrEmpty(srUserIp))
        {
            srUserIp = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"].ToString();
        }
    }
    catch
    {

    }
    return srUserIp;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:15:39.947

这是超级安全的。您没有更改任何数据，它是静态的，它查询一个不可变的请求对象。

# c# - 在 c# 中限制程序集的权限

> ID：13994763
> 
> 赞同：9
> 
> 时间：2012-12-21T17:43:04.147
> 
> 标签：c#, permissions, .net-assembly

我正在用 C# 开发一个能够动态加载 dll 的应用程序。这些 dll 代表我的“应用程序”。我想限制这些应用程序的权限。例如（我的主要问题之一）阻止访问光盘。因为我的应用程序正在使用我的主应用程序域的功能和实例，所以我不希望它们在单独的沙盒应用程序域中运行。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:27:14.853

既然您提到了磁盘访问，请考虑使用 .Net 的[Code Access Security](http://msdn.microsoft.com/en-us/library/c5tk9z76%28v=vs.100%29.aspx)，它是为此目的而设计的。

> 定义表示访问各种系统资源的权限的权限和权限集。

在不复制文档的情况下，我只想说您的应用程序的代码可能会调用插件的代码，但会限制它执行特定的操作，例如启动新线程或访问磁盘。

以下是您可以限制访问的一些资源：

*   [System.Security.Permissions.FileIOPermission](http://msdn.microsoft.com/en-us/library/system.security.permissions.fileiopermission.aspx)
*   [System.Security.Permissions.RegistryPermission](http://msdn.microsoft.com/en-us/library/system.security.permissions.registrypermission.aspx)
*   [System.Security.Permissions.UIPermission](http://msdn.microsoft.com/en-us/library/system.security.permissions.uipermission.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:14:39.123

我当然不确定如何实现这一切，但看起来可能需要接口 IPermission，我在 SO 上找到了另一个答案，这可能会有所帮助。

[为自定义代码访问安全性实施 IPermission](https://stackoverflow.com/questions/10840772/implementing-ipermission-for-custom-code-access-security)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T18:05:55.800

我不确定我是否了解您希望获得旅行许可的方向。假设您希望“应用程序”告诉主应用程序它*需要*什么（几乎就像 android 应用程序如何向手机发出权限信号），您可以定义`IAccessRights`每个模块实现的接口并定义它想要或可以拥有的访问级别。

```
public interface IAccessRights
{
  Bool CanReadFromDisk { get; }
  Bool CanWriteToDisk { get; };
  Bool CanAccessNetwork { get; }
} 
```

然后由模块为接口实现一个类，并在加载时检查对象并相应地协调权限。如果需要两种方式，请制定一个允许主应用程序设置（允许）模块权限的模式。

旁注：除此之外，我没有看到一种方法来禁止直接调用，例如`File.Delete`不深入了解系统本身（挂钩和其他）。

# jquery - Azure 托管的 WCF 服务导致错误 400

> ID：13994764
> 
> 赞同：1
> 
> 时间：2012-12-21T17:43:07.070
> 
> 标签：jquery, wcf, web-services, azure, get

这应该足够了。如果我去`site/core.svc/dowork`我得到一个 400 错误。

.ajax 调用的结果相同。我哪里做错了？

我正在努力使这个网络可以访问。我将添加一些方法来处理基于浏览器事件的状态管理。

```
[ServiceContract]
public interface Icore
{
    [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Xml)]
    string DoWork();
}

[System.Web.Script.Services.ScriptService]
public class core : Icore
{
    public string DoWork()
    {
        return "hello";
    }
}

<behaviors>
  <endpointBehaviors>
    <behavior name="RestBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="MetadataBehavior">
      <serviceMetadata httpsGetEnabled="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>

<services>
  <!-- Note: the service name must match the configuration name for the service implementation. -->
  <service name="Fusion.core" behaviorConfiguration="MetadataBehavior" >
    <!-- Add the following endpoint.  -->
    <!-- Note: your service must have an http base address to add this endpoint. -->
    <endpoint contract="Fusion.Icore" binding="wsHttpBinding" bindingConfiguration="HttpsBinding" address="" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>

<bindings>
  <basicHttpBinding>
    <binding name="secureBinding">
      <security mode="Transport"/>
    </binding>
  </basicHttpBinding>
  <wsHttpBinding>
    <binding name="HttpsBinding">
      <security mode="Transport">
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:04:05.513

在这种情况下，想要使您的服务*Web 可访问*（可从常规浏览器调用），您需要使用 REST 方法（而不是 SOAP）。

为此，您使用了错误的绑定；您需要使用`webHttpBinding`（而不是`wsHttpBinding`or `basicHttpBinding`，它们是不能从浏览器调用的 SOAP 绑定 - 您需要一个 SOAP 客户端软件）

# javascript - 从 iframe (Javascript) 访问父函数中的变量

> ID：13994767
> 
> 赞同：0
> 
> 时间：2012-12-21T17:43:17.263
> 
> 标签：javascript, function, variables, iframe, parent

我的主页上有一个类似以下的javascript：它只是定义了一个变量

```
test1 = function(){
var bla= "bla";
} 
```

在我的 iFrame 中，我有另一个 javascript，它只产生如下所示的警报

```
alert(parent.test1.bl); 
```

不幸的是，出现了警报窗口，但内容显示“未定义”。如何从父窗口的函数中读取变量？

有趣的是，如果我在父窗口中执行警报并仅从 iFrame 中调用函数，则会弹出警报框并包含消息。但似乎无法从父级读取变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:54:17.610

函数没有属性，对象有。因此，您必须`test1()`在尝试使用其属性之前进行实例化。

```
test1 = function(){
    var bla= "bla";
    this.bl ="notbla";
}

alert(new test1().bl); 
```

注意这里关键字的用法`this`，它指的是新创建的对象，并创建`bl`了一个可以在函数外部读取的属性。`bla`声明 with`var`不能在 之外看到`test1()`，除非您不会创建另一个属性，例如`this.bl = bla;`

您问题的“有趣部分”确实不清楚，无论在哪里调用，您都肯定`alert()`会显示。`undefined`

[MDN 上的函数](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions)和[对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

# javascript - 将参数传递给内联函数

> ID：13994771
> 
> 赞同：6
> 
> 时间：2012-12-21T17:43:25.660
> 
> 标签：javascript, jquery

我想使用带参数的内联函数来设置变量。这是我正在尝试的简化版本（此时显然只是伪代码）：

```
var something = 10;

var something_else = 15;

var dynamic_value = (function(something,something_else){
  if(something == something_else){
    return "x";
  }else{
    return "y";
  }
})(); 
```

在这种情况下，“dynamic_value”应该是“y”。问题是变量“something”和“something_else”在这个内联函数中从未出现过。

如何将参数发送到内联函数？

编辑：我正在使用 jquery，尽管这可能并不真正适用于这个问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T17:45:09.627

调用函数时发送它们

```
var dynamic_value = (function(something, something_else) {
    ...
 })(value_for_something, value_for_something_else); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T17:45:20.857

你需要这样称呼它。

```
var dynamic_value = (function(something,something_else){
  if(something == something_else){
    return "x";
  }else{
    return "y";
  }
})(something,something_else); 
```

原因是当您在函数参数中定义相同的名称时，它们只是参数的名称，变量不会插入那里。最后一行是调用传递实际变量的函数。

此外，您刚刚创建了一个闭包。闭包可以访问包含它的函数中声明的所有变量。这段代码中另一个有趣的事实是，在包含函数级别定义的变量被作为闭包函数一部分的变量所掩盖。原因很明显：闭包处的变量名与包含函数处的变量名相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:49:28.593

我会在这里猜测您`dynamic_value`只想绑定到`something`而不是`something_else`.

```
var base_value = 10;

var something_else = 15;

var dynamic_value = (function(base_value){
    return function (compare) {
        if(base_value == compare){
            return "x";
        } else {
            return "y";
        }
    };
})(base_value);

alert(dynamic_value(something_else));   // "y"
alert(dynamic_value(10));   // "x" 
```

# ruby-on-rails - 在 heroku 上安装 therubyracer，无法构建 gem 原生扩展

> ID：13994772
> 
> 赞同：2
> 
> 时间：2012-12-21T17:43:27.237
> 
> 标签：ruby-on-rails, ruby, ubuntu, heroku

将 Rails 应用程序上传到 Heroku 时一直出错

```
Installing therubyracer (0.11.0)
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for main() in -lpthread... yes
       checking for v8.h... no
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-pthreadlib
       --without-pthreadlib
       --enable-debug
       --disable-debug
       --with-v8-dir
       --without-v8-dir
       --with-v8-include
       --without-v8-include=${v8-dir}/include
       --with-v8-lib
       --without-v8-lib=${v8-dir}/lib
       /tmp/build_3srt9ifqtbs6m/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0/ext/v8/build.rb:42:in `build_with_system_libv8': unable to locate libv8\. Please see output for details (RuntimeError)
       from extconf.rb:22:in `<main>'
       The Ruby Racer requires libv8 ~> 3.11.8
       to be present on your system in order to compile
       and link, but it could not be found.
       In order to resolve this, you will either need to manually
       install an appropriate libv8 and make sure that this
       build process can find it. If you install it into the
       standard system path, then it should just be picked up
       automatically. Otherwise, you'll have to pass some extra
       flags to the build process as a hint.
       If you don't want to bother with all that, there is a
       rubygem that will do all this for you. You can add
       following line to your Gemfile:
       gem 'libv8', '~> 3.11.8'
       We hope that helps, and we apologize, but now we have
       to push the eject button on this install.
       thanks,
       The Mgmt.
       Gem files will remain installed in /tmp/build_3srt9ifqtbs6m/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0 for inspection.
       Results logged to /tmp/build_3srt9ifqtbs6m/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0/ext/v8/gem_make.out
       An error occurred while installing therubyracer (0.11.0), and Bundler cannot continue.
       Make sure that `gem install therubyracer -v '0.11.0'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

Gem 文件的一部分

```
gem 'libv8', '~> 3.11.8'
gem "therubyracer", :platforms => :ruby, :require => 'v8'
group :linux_test do
  #gem "therubyracer", :require => false
  gem "libnotify", :require => false
end
group :production do
  gem "therubyracer-heroku"
  gem "pg"
end 
```

`therubyracer`并且`lib8`肯定是最新的，我刚刚重新安装了它们。

我如何解决它？

PS Ubuntu 12.1，x64。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T17:53:35.877

[在https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)上查看 Heroku Cedar 上的 Rails 3.1+ 资产管道：

> ### 红宝石赛车
> 
> 如果您以前使用`therubyracer`or `therubyracer-heroku`，则不再需要这些 gem，并且强烈建议您不要使用这些 gem，因为这些 gem 会占用大量内存。

如果您`therubyracer`在开发环境中需要 gem，请将其包装在一个组中：

```
group :development do
  gem 'therubyracer', :platforms => :ruby, :require => 'v8'
end 
```

（Heroku 不会安装只存在于一个`development`组中的 gem。）

无论如何，将其从下面的`production`组中删除。

# java - 使用输入文件：输出中位数 (Java)

> ID：13994781
> 
> 赞同：0
> 
> 时间：2012-12-21T17:43:51.467
> 
> 标签：java

我已经为此工作了一段时间，这是我的代码。我已经迷失了一段时间，因为我不知道如何更改数组中的项目数`int m[] = new int[variable]`或删除零/移动数组。零是问题所在，因为我需要对数组进行排序并找到中位数。

这是作业：

> ### 任务描述
> 
> 中位数在统计领域发挥着重要作用。根据定义，它是将数组分成两个相等部分的值。在这个问题中，你要确定一些长整数的当前中位数。
> 
> 假设我们有五个数字 {1,3,6,2,7}。在这种情况下，3 是中位数，因为它的每一侧正好有两个数字。{1,2} 和 {6,7}。
> 
> 如果有偶数个像 {1,3,6,2,7,8} 这样的值，只有一个值不能将这个数组分成相等的两部分，所以我们考虑中间值 {3,6} 的平均值。因此，中位数将是 (3+6)/2 = 4.5。在这个问题中，您必须只打印整数部分，而不是小数部分。结果，根据这个问题，中位数将是 4！
> 
> ### 程序输入
> 
> 输入文件 (c:\codewars\prob06.in) 包含多个整数 X ( 0 <= X < 2^31 ) 并且整数总数 N 小于 10000。输入文件将包含一个“0”到表示整数列表的结尾。当您读入“0”时，您的程序必须退出而不计算数字 0 的新中位数。
> 
> ```
> 1 3 4 60 70 50 2 0 
> ```
> 
> ### 程序输出
> 
> 读入每个数字后，重新计算中位数并将其显示在屏幕上。
> 
> ```
> 1 2 3 3 4 27 4 
> ```

到目前为止，这是我的尝试：

```
import java.util.*;
import java.io.*;

public class Median {
    public static void main (String args[]) {

        String fileName = "textfile.txt";

        //Labels scanner
        Scanner inputStream = null;
        int fileLen=0;
        int[] m = new int[1000];

        try{
            inputStream = new Scanner (new File (fileName));
            LineNumberReader lnr = new LineNumberReader(new FileReader(new File(fileName)));
            lnr.skip(Long.MAX_VALUE);
            fileLen = lnr.getLineNumber();
        }
        catch(Exception e) {
            System.out.println("Could not open the file named: " + fileName);
            System.exit(0);
        }

        int middle = 0;

        for (int counter=0;counter<fileLen && inputStream.hasNextInt();counter++){

            int unChecked = inputStream.nextInt();
            if (unChecked != 0) {
                m[counter]=unChecked;
                removeZeros(m);
                median(m, fileLen);
                //Arrays.sort(m);
            }else if (unChecked == 0){
                counter+=fileLen;
            }
        }
        }

    public static int median(int m[],int fileLen) {
        int[] b = new int[fileLen];
        System.arraycopy(m, 0, b, 0, b.length);
        Arrays.sort(b);
        System.out.println(b[1]);
        if (m.length % 2 == 0) {
        System.out.println((b[(b.length / 2) - 1] + b[b.length / 2]) / 2);
        return (b[(b.length / 2) - 1] + b[b.length / 2]) / 2;
        } else {
        System.out.println(b[b.length / 2]);
        return b[b.length / 2];
        }
    }

    static void removeZeros(int m[]) {

        int counter2=0,counter4=0;
        for(int counter=0;counter<m.length;counter++){
            if (m[counter]!=0){
                counter2++;
                System.out.println(m[counter]);
            }
        }

        int d[] = new int [counter2];
        for(int counter=0;counter<m.length;counter++){
            if (m[counter]==0){
                d[counter4] = m[counter];
                counter4++;
            }
        }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:31:57.283

`getLineNumber`可能总是在您的程序中返回 1（或某个值！= 当前位置）。这将导致不正确的行为`median`并导致您的程序提前终止。所以摆脱`lnr`and`fileLen`并改为传递`counter+1`给中值函数。

一些技巧：

*   只是放在`break;`后面`if (unChecked == 0)`。

*   对于`if (unChecked != 0) ... else if (unChecked == 0)`，您可以删除`if (unChecked == 0)`.

*   摆脱`removeZeros`，功能不符合问题的要求。

*   在每个输入数字上对整个集合进行排序是一个坏主意，请查看[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)以随时对其进行排序。

# ios - iOS 基于摄像头的条码扫描器（通过 URL）

> ID：13994782
> 
> 赞同：9
> 
> 时间：2012-12-21T17:43:53.803
> 
> 标签：ios, html, camera, barcode

如何使用 iOS 设备上的摄像头从网页读取线性（一维，例如 Code 128）条码？

从本质上讲，我想我正在寻找一个免费的条形码扫描仪应用程序，我可以安装在 iPad 上，但我的网络应用程序可以使用它。我想从网络浏览器启动条形码扫描仪，然后接收扫描数据。这个过程在 iOS 上看起来如何？条形码扫描仪应用程序是否需要支持回调方案，`someProtocol://scanBarcode?callback=http://example.com/scan.do%3Fscanned=`以便它可以“重新启动”我的网络应用程序？是否有其他方法可以在 iOS 上的 Web 应用程序和本机应用程序之间完成这种类型的数据传输/交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:29:36.333

与支持 Android 的方式相同，iOS 1.1 上的免费和开源[Zxing 条码扫描仪](https://itunes.apple.com/us/app/barcodes-scanner/id417257150?mt=8)现在支持带有 URL 回调的基于 Web 的扫描。

```
zxing://scan/?ret=http%3A%2F%2Ffoo.com%2Fproducts%2F%7BCODE%7D%2Fdescription&SCAN_FORMATS=UPC_A,EAN_13 
```

只需在回调[URL中](http://code.google.com/p/zxing/wiki/ScanningFromWebPages)[使用`zxing://scan/`](http://code.google.com/p/zxing/wiki/ScanningFromWebPages)带有`{CODE}`占位符的 URL。例如，`http://foo.com/products/01234/description`如果条形码*01234*被扫描，上述示例将加载。

**不幸的是，1.1 版仅支持二维码。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-04T12:15:50.973

对于 UPC/EAN 和 QR，有免费的 iOS（和 Android）应用程序“pic2shop”（由我公司开发），签名如下（字符串 EAN 替换为条形码内容）：

```
pic2shop://scan?callback=YOURURL%3A//EAN 
```

对于其他符号，付费版本“pic2shop pro”具有以下网址：

```
p2spro://scan?formats=EAN13,EAN8,UPCE,ITF,CODE39,CODE128,CODE93,STD2OF5,CODABAR,QR&callback=CALLBACK_URL 
```

该应用程序的网站上有更详细的信息。

# ruby-on-rails - `load_missing_constant'：未初始化的常量 AuthenticatedTestHelper (NameError)

> ID：13994783
> 
> 赞同：1
> 
> 时间：2012-12-21T17:44:11.483
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我有一个旧的 Rails 项目，我需要对其进行更改甚至更新。

我的宝石列表如下所示：

```
*** LOCAL GEMS ***

actionmailer (2.3.14, 2.3.11, 2.3.8, 2.3.5, 2.3.2)
actionpack (2.3.14, 2.3.11, 2.3.8, 2.3.5, 2.3.2)
activerecord (2.3.14, 2.3.11, 2.3.8, 2.3.5, 2.3.2)
activeresource (2.3.14, 2.3.11, 2.3.8, 2.3.5, 2.3.2)
activesupport (3.2.9, 2.3.14, 2.3.11, 2.3.8, 2.3.5, 2.3.2)
addressable (2.3.2)
BlueCloth (1.0.1)
bourne (1.1.2)
bundler (1.2.3)
childprocess (0.3.6)
ffi (1.2.0)
i18n (0.6.1)
json (1.7.5)
libwebsocket (0.1.7.1)
metaclass (0.0.1)
mocha (0.10.5)
multi_json (1.5.0)
mysql (2.8.1)
paperclip (2.3.1.1)
rack (1.1.3, 1.0.1)
rails (2.3.14, 2.3.2)
rake (0.8.7)
rdoc (3.12)
restful_authentication (1.1.6)
rspec (1.3.1)
ruby-net-ldap (0.0.4)
rubygems-bundler (1.1.0)
rubyzip (0.9.9)
rvm (1.11.3.5)
selenium-client (1.2.18)
selenium-webdriver (2.27.2)
shoulda (2.11.3)
shoulda-context (1.0.2)
shoulda-matchers (1.4.2)
thoughtbot-shoulda (2.11.1)
websocket (1.0.6) 
```

当我跑步时，`rake test`我得到：

```
/Users/noah/.rvm/gems/ruby-1.8.7-p371@website/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:469:in `load_missing_constant': uninitialized constant AuthenticatedTestHelper (NameError)
    from /Users/noah/.rvm/gems/ruby-1.8.7-p371@website/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:106:in `const_missing'
    from /Users/noah/.rvm/gems/ruby-1.8.7-p371@website/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:118:in `const_missing'
    from ./test/test_helper.rb:4
    from ./test/functional/admin/articles_controller_test.rb:1:in `require'
    from ./test/functional/admin/articles_controller_test.rb:1
    from /Users/noah/.rvm/gems/ruby-1.8.7-p371@website/gems/rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `load'
    from /Users/noah/.rvm/gems/ruby-1.8.7-p371@website/gems/rake-0.8.7/lib/rake/rake_test_loader.rb:5
    from /Users/noah/.rvm/gems/ruby-1.8.7-p371@website/gems/rake-0.8.7/lib/rake/rake_test_loader.rb:5:in `each'
    from /Users/noah/.rvm/gems/ruby-1.8.7-p371@website/gems/rake-0.8.7/lib/rake/rake_test_loader.rb:5
/Users/noah/.rvm/rubies/ruby-1.8.7-p371/bin/ruby -I"lib:test" "/Users/noah/.rvm/gems/ruby-1.8.7-p371@website/gems/rake-0.8.7/lib/rake/rake_test_loader.rb"  
Errors running test:units and test:functionals! 
```

这是我的测试助手的第一部分：

```
ENV["RAILS_ENV"] = "test"
require File.expand_path(File.dirname(__FILE__) + "/../config/environment")
require 'test_help'
include AuthenticatedTestHelper 
```

任何`include AuthenticatedTestHelper`包含它的地方都会失败。关于为什么会这样的任何想法？

**更新：**

我相信我的问题是restful_authentication 无法生成提供AuthenticatedTestHelper 的文件。

在依赖项内部，我有以下内容：

```
qualified_name = qualified_name_for from_mod, const_name
      path_suffix = qualified_name.underscore
      name_error = NameError.new("uninitialized constant #{qualified_name}")

      file_path = search_for_file(path_suffix)
      if file_path && ! loaded.include?(File.expand_path(file_path)) # We found a matching file to load
        require_or_load file_path
        raise LoadError, "Expected #{file_path} to define #{qualified_name}" unless uninherited_const_defined?(from_mod, const_name)
        return from_mod.const_get(const_name)
      elsif mod = autoload_module!(from_mod, const_name, qualified_name, path_suffix)
        return mod
      elsif (parent = from_mod.parent) && parent != from_mod &&
            ! from_mod.parents.any? { |p| uninherited_const_defined?(p, const_name) }
        # If our parents do not have a constant named +const_name+ then we are free
        # to attempt to load upwards. If they do have such a constant, then this
        # const_missing must be due to from_mod::const_name, which should not
        # return constants from from_mod's parents.
        begin
          return parent.const_missing(const_name)
        rescue NameError => e
          raise unless e.missing_name? qualified_name_for(parent, const_name)
          raise name_error
        end
      else
        puts file_path #added this line
        raise name_error
      end
    end 
```

我已经添加了 puts file_path 这行，这是 nil，所以 rails 也不知道这个文件在哪里。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:19:00.707

通常这个模块应该在`lib/authenticated_test_helper.rb`

如果您找不到它或在其他地方找不到它，您可以简单地在该文件中创建一个空模块，然后逐步实现或存根它。

但是，如果您打算升级到 Rails 3，则无论如何都必须选择另一个身份验证框架（Authlogic、Devise），因为`restful_authentication`它似乎不适用于 Rails 3。

PS：来自的代码`dependencies.rb`对您没有帮助。它只包含从常量派生文件名的代码（在您的情况下为模块）它只是失败了，因为您`authenticated_test_helper`在加载路径中没有命名文件。

# asp.net - Asp.Net MVC3 为 JsonResult 返回零字节

> ID：13994785
> 
> 赞同：0
> 
> 时间：2012-12-21T17:44:20.010
> 
> 标签：asp.net, json, asp.net-mvc-3, kendo-ui, iis-express

我已经完成了我能想到的所有调试，但找不到任何与正在发生的事情完全匹配的东西。这是代码，总之它是在调试荣耀/愚蠢。

```
[AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]
public ActionResult ConciergeRead([DataSourceRequest] DataSourceRequest request)
{
    var concierges = GetConcierges();
    var sorted = concierges.ToDataSourceResult(request);
    var json = Json(concierges, "text/x-json");
    string jsonString = new JavaScriptSerializer().Serialize(json.Data);
    var json2 = Json(sorted, "text/x-json");
    return json;
} 
```

该`ToDataSourceResult`位是 Kendo-UI 的一部分，它是 MVC 的 Telerik 扩展，但排除 Kendo-UI 位并不能解决问题。无论我从哪个浏览器调用，无论是 Ajax 请求还是浏览器中的直接 GET，我都无法获得返回非空响应的路由。同样的事情总是会发生：没有响应体。有响应头，但正文有零字节的数据。

这是在本地运行，活动目录登录集成运行顺利（如果我不登录，我会在父路由上被禁止`/mvc/123/concierges`，如果我直接点击 Ajax 路由）。服务器是通过 Visual Studio 2012 启动的 IIS Express 8.0。

**响应标头**

```
HTTP/1.1 200 OK
Cache-Control: private
Server: Microsoft-IIS/8.0
X-AspNetMvc-Version: 3.0
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?QzpcTGVhZE1hc3RlclxMYXRlc3RccGxhdGZvcm1cTGVhZE1hc3RlclBsYXRmb3JtXEF3bC5MZWFkTWFzdGVyLk12Y1wxMjNcY29uY2llcmdlc1xDb25jaWVyZ2VSZWFk?=
Persistent-Auth: true
X-Powered-By: ASP.NET
Date: Fri, 21 Dec 2012 17:19:38 GMT
Content-Length: 0 
```

**来自直接浏览器的请求标头**获取（这是 chrome，但 FF 是相同的，具有不同的 cookie 和用户代理）

```
GET /mvc/123/concierges/ConciergeRead HTTP/1.1
Host: localhost:7171
Connection: keep-alive
Cache-Control: max-age=0
Authorization: Negotiate oXcwdaADCgEBoloEWE5UTE1TU1AAAwAAAAAAAABYAAAAAAAAAFgAAAAAAAAAWAAAAAAAAABYAAAAAAAAAFgAAAAAAAAAWAAAABXCiOIGAbEdAAAADxZEeKqgJFuPmHxoeEOwIJWjEgQQAQAAAPUXp1AtIpqEAAAAAA==
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: ASP.NET_SessionId=zctn1diidxyookfgq11rx1uy 
```

**来自剑道 UI 发起的 Ajax 请求的请求标头**（这个是 FF，但是等等）

```
GET /mvc/123/concierges/ConciergeRead HTTP/1.1
Host: localhost:7171
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0
Accept: */*
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
X-Requested-With: XMLHttpRequest
Referer: http://localhost:7171/mvc/123/Concierges/
Cookie: ASP.NET_SessionId=4ff34okn0jkkwqi3k0qswb4l
Cache-Control: max-age=0 
```

我采取的步骤

*   调试代码，验证路由是否被正确命中
*   已验证`GetConcierges()`返回数据，序列化为 json，序列化为字符串，并且在整个过程中看起来都是正确的
*   铬、FF 和 IE9
*   不同的接受动词
*   返回类型为 JsonResult 而不是 ActionResult

即使您没有解决方案，我们也非常感谢您提供额外的调试步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:51:03.240

您需要先允许 JSON 结果：

```
var json2 = Json(sorted, "text/x-json"); 
```

作为

```
return Json(json2, JsonRequestBehavior.AllowGet); 
```

它被禁用以防止 JSON 劫持，所以在发送敏感信息时不要使用这个东西（然后在响应的正文中返回敏感数据）

# android - ACTION_SENDTO 不起作用

> ID：13994787
> 
> 赞同：5
> 
> 时间：2012-12-21T17:44:25.417
> 
> 标签：android, email, android-activity, sendto

我想从我的应用程序发送一封电子邮件。所以我使用了以下代码。

```
String uriText = "abcd@gmail.com" + "?subject=" + URLEncoder.encode("Subject") + "&body=" + URLEncoder.encode("some text here");
Uri uri = Uri.parse(uriText);
Intent sendIntent = new Intent(Intent.ACTION_SENDTO);
sendIntent.setData(uri);
startActivity(Intent.createChooser(sendIntent, "Send Email")); 
```

我已经配置了我的 Gmail 和电子邮件应用程序。我在我的 Nexus S (JellyBean) 和 HTC T-Mobile G2 (GingerBread) 上进行了测试。它们都显示“没有应用程序可以执行此操作。”。

有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T17:46:37.163

如果要使用`ACTION_SENDTO`，`Uri`则应使用`mailto:`or`smsto:`方案。所以，试试`mailto:abcd@gmail.com`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T17:50:29.153

如果您`Intent.setData` 用于发送电子邮件，请将您的代码更改为：

```
String uriText = "mailto:someone@example.com" +
                 "?subject=" + URLEncoder.encode("Subject") + 
                 "&body=" + URLEncoder.encode("some text here");
Uri uri = Uri.parse(uriText);
Intent sendIntent = new Intent(Intent.ACTION_SENDTO);
sendIntent.setData(uri);
startActivity(Intent.createChooser(sendIntent, "Send Email")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-15T19:56:30.477

Uri 应该是“mailto”

```
 Intent intent = new Intent(Intent.ACTION_SENDTO);  
 intent.setData(Uri.parse("mailto:"));  
 intent.putExtra(Intent.EXTRA_EMAIL, new String[]{"abc@gmail.com"});  
 intent.putExtra(Intent.EXTRA_SUBJECT,"Order summary of Coffee");
 intent.putExtra(Intent.EXTRA_TEXT,BodyOfEmail);

 if(intent.resolveActivity(getPackageManager())!=null) {
            startActivity(intent);
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-11-28T21:21:27.383

以下代码对我有用，并且更加可靠和灵活。此外，它是用 Kotlin 编写的 :)

```
fun sendEmail(context: Context, mailTo: String? = null, subject: String? = null, bodyText: String? = null) {
    val emailIntent = Intent(Intent.ACTION_SENDTO)
    val uri = Uri.parse("mailto:${mailTo ?: ""}").buildUpon() // "mailto:" (even if empty) is required to open email composers
    subject?.let { uri.appendQueryParameter("subject", it) }
    bodyText?.let { uri.appendQueryParameter("body", it) }
    emailIntent.data = uri.build()
    try {
        context.startActivity(emailIntent)
    } catch (e: ActivityNotFoundException) {
        // Handle error properly
    }
} 
```

# javascript - 禁用提交按钮，直到在数据库上验证字段

> ID：13994788
> 
> 赞同：0
> 
> 时间：2012-12-21T17:44:34.307
> 
> 标签：javascript, html, ajax

我正在使用 AJAX 验证输入到表单字段中的代码，如果它有效，则会显示一条消息说它是有效的，否则他们会收到一条消息它是无效的。这部分没有问题。我要做的下一件事是禁用提交按钮，直到代码有效，否则用户可以输入他们想要的任何内容并仍然转到下载页面。我的脚本如下：

```
$(document).ready(function(){

$("#orgname").change(function() { 

var usr = $("#orgname").val();

if(usr.length >= 2)
{
$("#status").html('<img align="absmiddle" src="images/loader.gif" /> Checking Code...');

$.ajax({ 
type: "POST", 
url: "checkcode.cfm", 
data: "orgname="+ usr, 
success: function(msg){ 

$("#status").ajaxComplete(function(event, request, settings){ 

if(msg == 'OK')
{ 
$("#orgname").removeClass('object_error'); // if necessary
$("#orgname").addClass("object_ok");
 document.getElementById("formsubmit").removeAttribute("disabled");
$(this).html(' <img align="absmiddle" src="images/accepted.png" /> ');
} 
else 
{ 
$("#orgname").removeClass('object_ok'); // if necessary
$("#orgname").addClass("object_error");
$(this).html(msg);
document.getElementById("formsubmit").setAttribute("disabled", "disabled");

}});}});}
else
{
$("#status").html('The Code should have at least 2 characters.');
$("#orgname").removeClass('object_ok'); // if necessary
$("#orgname").addClass("object_error");
}});}); 
```

我也是 AJAX 的新手。如您所见，我将启用和禁用脚本放在正确的位置，但它不起作用。如果我在按钮上使用样式或禁用属性，它将保持禁用状态。同样，如果我在此页面加载时使用 JS 禁用按钮，它会一直处于禁用状态。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:51:14.140

使用`$('#formsubmit').prop('disabled',true);`和`$('#formsubmit').prop('disabled',false);`分别禁用和启用按钮。jQuery 将处理所有浏览器的差异。

# c# - “变量”属性

> ID：13994792
> 
> 赞同：1
> 
> 时间：2012-12-21T17:44:50.730
> 
> 标签：c#, json, wcf, json.net

我正在使用`DataContractJsonSerializer`. 我需要序列化到 json 对象列表，到目前为止我有这个：

```
 List<clsPerson> lstPerson = GetSomeDATA
            var jsonData = new List<Object>();

            var lstObjects = new List<Object>();
            lstObjects.AddRange(lstPerson);

            jsonData.Add(new
                {
                    code = "123456789",
                    data = lstObjects
                    //data = new String[] {"123","123"}
                }
            );

            DataContractJsonSerializer dser = new DataContractJsonSerializer(typeof(List<temp>));
            using (MemoryStream ms = new MemoryStream())
            {
                dser.WriteObject(ms, lstObjects);
                String datos = Encoding.Default.GetString(ms.ToArray());
            } 
```

在此之后，我计划将序列化数据发送到 WCF 服务。事实上，首先我使用了这段代码：

```
 JavaScriptSerializer ser = new JavaScriptSerializer();
            string datos = ser.Serialize(jsonData);
            datos = datos.Remove(0, 1);
            datos = datos.Remove(datos.Length-1, 1);
            using (var writer = new StreamWriter(request.GetRequestStream()))
            {
                dser.WriteObject(writer.BaseStream, jsonData);
                writer.WriteLine(datos);
            } 
```

但是，当我尝试将其发送到 Web 服务时，生成的 json 字符串（对于数据类型）具有 this : `"CreationDate":"\/Date(-62135596800000)\/"`。

所以，我需要一些有关 DataContractJsonSerializer 的帮助，这样我才能以正确的格式发送数据。也欢迎我正在做的任何其他解决方案或建议。

谢谢

# android - 菜单项 InstantiatingTabListener - Android 片段 -

> ID：13994796
> 
> 赞同：0
> 
> 时间：2012-12-21T17:44:57.070
> 
> 标签：android

![菜单项中的问题不显示文本和图标](../Images/c9d96157e4edb9c1a1565c3da6e3531c.png) [1](https://i.stack.imgur.com/KDFyU.png)：http: [//i.stack.imgur.com/WYniI.png](https://i.stack.imgur.com/WYniI.png)

我已经编写了在我的应用程序中显示选项卡菜单的代码。它工作正常，但在某些手机选项卡中不显示文本和图标，如附图所示。我正在使用片段。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    TabHelper tabHelper = getTabHelper();

    CompatTab menuTab = tabHelper.newTab("menu").setText(R.string.tab_section1).setIcon(
            R.drawable.home_icon).setTabListener(
            new InstantiatingTabListener(this, MenuFragment.class));

    tabHelper.addTab(menuTab); 
```

经过大量分类后，我发现下面的代码有问题

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    super.onCreateOptionsMenu(menu);
    //nothing xml written for menu 
} 
```

所以我尝试添加以下代码

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

        case R.id.menufav:
            Intent menuintent = new Intent(this, FavouritesFragment.class);
            startActivity(menuintent);
            break;

        default:
            break;
    }
    return super.onOptionsItemSelected(item);
} 
```

但由于它是片段，我们不能使用意图。它抛出铸造错误。

现在我该如何解决这个问题？我有下面的点击监听器类。我想利用它。

```
 public static class InstantiatingTabListener implements CompatTabListener {

    private final TabCompatActivity mActivity;
    private final Class mClass;

    /**
     * Constructor used each time a new tab is created.
     * 
     * @param activity The host Activity, used to instantiate the fragment
     * @param cls The class representing the fragment to instantiate
     */
    public InstantiatingTabListener(TabCompatActivity activity, Class<? extends Fragment> cls) {
        mActivity = activity;
        mClass = cls;
    }

    /* The following are each of the ActionBar.TabListener callbacks */
    @Override
    public void onTabSelected(CompatTab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        Fragment fragment = tab.getFragment();
        if (fragment == null) {
            // If not, instantiate and add it to the activity
            fragment = Fragment.instantiate(mActivity, mClass.getName());
            tab.setFragment(fragment);
            ft.add(android.R.id.tabcontent, fragment, tab.getTag());
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(fragment);
        }
    }

    @Override
    public void onTabUnselected(CompatTab tab, FragmentTransaction ft) {
        Fragment fragment = tab.getFragment();
        if (fragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(fragment);
        }
    }

    @Override
    public void onTabReselected(CompatTab tab, FragmentTransaction ft) {

    }
} 
```

# cuda - 第二个内核上的cuda“无效参数”错误

> ID：13994799
> 
> 赞同：0
> 
> 时间：2012-12-21T17:45:01.540
> 
> 标签：cuda

我遇到了内核启动问题。我有一个使用一个大内核的程序。由于同步问题，现在我需要将其分成两部分。第一个内核做了一些初始化工作，并获得了传递给第二个内核的参数子集。只运行第一个内核工作正常。由于缺少初始化，仅运行第二个内核在执行时失败，但内核本身已启动。连续运行这两个内核会使第二个内核因“无效参数”错误而失败。如有必要，我将提供代码，但现在无法弄清楚它可能有什么帮助。提前致谢。

编辑：这里请求的启动代码：

```
void DeviceManager::integrate(){
  assert(hostArgs->neighborhoodsSize > 0);
  size_t maxBlockSize;
  size_t blocks;
  size_t threadsPerBlock;
  // init patch kernel
  maxBlockSize = 64;
  blocks = (hostArgs->patchesSize /maxBlockSize);
  if(0 != hostArgs->patchesSize % maxBlockSize){
    blocks++;
  }
  threadsPerBlock = maxBlockSize;
  std::cout << "blocks: " << blocks << ", threadsPerBlock: " << threadsPerBlock << std::endl;
  initPatchKernel<CUDA_MAX_SPACE_DIMENSION><<<blocks,threadsPerBlock>>>(devicePatches, hostArgs->patchesSize);
  cudaDeviceSynchronize();

  //calc kernel
  maxBlockSize = 64;
  blocks = (hostArgs->neighborhoodsSize /maxBlockSize);
  if(0 != hostArgs->neighborhoodsSize % maxBlockSize){
    blocks++;
  }
  threadsPerBlock = maxBlockSize;
  size_t maxHeapSize = hostArgs->patchesSize * (sizeof(LegendreSpace) + sizeof(LinearSpline)) + hostArgs->neighborhoodsSize * (sizeof(ReactionDiffusionCCLinearForm) + sizeof(ReactionDiffusionCCBiLinearForm));
  std::cout << "maxHeapSize: " << maxHeapSize << std::endl;
  cudaDeviceSetLimit(cudaLimitMallocHeapSize, maxHeapSize);
  std::cout << "blocks: " << blocks << ", threadsPerBlock: " << threadsPerBlock << std::endl;
  integrateKernel<CUDA_MAX_SPACE_DIMENSION><<<blocks,threadsPerBlock>>>(deviceNeighborhoods, hostArgs->neighborhoodsSize, devicePatches, hostArgs->patchesSize, hostArgs->biLinearForms, hostArgs->linearForms, deviceRes);
  cudaDeviceSynchronize();
} 
```

内存传输和分配应该不是问题，因为它在仅使用一个内核时工作。

编辑 2：在通过包装函数在调试模式下构建时，我在每次内核调用后检查错误。因此，在每次内核调用之后，都会执行以下操作：

```
cudaError_t cuda_result_code = cudaGetLastError();                        
if (cuda_result_code!=cudaSuccess) {                                      
   fprintf("message: %s\n",cudaGetErrorString(cuda_result_code));
} 
```

很抱歉没有提到这一点，包装器不是我的，很抱歉没有粘贴这个技巧。失败前的输出如下：

```
blocks: 1, threadsPerBlock: 64
maxHeapSize: 4480
blocks: 1, threadsPerBlock: 64
message: invalid argument 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T14:02:43.153

[cudaDeviceSetLimit](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__DEVICE_1gb8a22e29cc297634b0702db0b69f59e7)

**cudaLimitMallocHeapSize**控制 malloc() 和 free() 设备系统调用使用的堆的大小（以字节为单位）。设置 cudaLimitMallocHeapSize 必须**在启动任何**使用 malloc() 或 free() 设备系统调用的内核之前执行，否则将返回**cudaErrorInvalidValue 。**此限制仅适用于计算能力 2.0 及更高版本的设备。尝试在计算能力小于 2.0 的设备上设置此限制将导致返回错误 cudaErrorUnsupportedLimit。

# android - 适用于 Android SDK 的 GStreamer 缺少插件

> ID：13994808
> 
> 赞同：5
> 
> 时间：2012-12-21T17:45:22.493
> 
> 标签：android, android-ndk, gstreamer

*我将包含的教程 5* （基本媒体播放器）中的流 url 更改为 h.264/mp​​3 媒体流（来自其原始 ogv 流），它开始抱怨缺少一些插件。

做了一些谷歌搜索后，我发现了 Prajnashi 的 Android 的 gst-ffmpeg 插件[https://github.com/prajnashi/gst-ffmpeg](https://github.com/prajnashi/gst-ffmpeg)但它肯定不适合 SDK。

如果 SDK 没有所需的插件，我该如何解决这个问题？我是 GStreamer 的新手，不知道如何编译任何现有的 Android 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-24T07:02:23.257

你只需要添加

```
$(GSTREAMER_PLUGINS_CODECS_RESTRICTED) 
```

到 android-tutorial-5 的 jni 文件夹中的 Android.mk

像这样：

```
GSTREAMER_PLUGINS := $(GSTREAMER_PLUGINS_CORE) $(GSTREAMER_PLUGINS_PLAYBACK) $(GSTREAMER_PLUGINS_CODECS) $(GSTREAMER_PLUGINS_NET) $(GSTREAMER_PLUGINS_SYS)  $(GSTREAMER_PLUGINS_CODECS_RESTRICTED) 
```

# php - 如何将页面标识插入评论表？

> ID：13994810
> 
> 赞同：0
> 
> 时间：2012-12-21T17:45:41.507
> 
> 标签：php, jquery, mysql, forms

我正在尝试创建具有多个页面的评论系统（每个页面都有自己的评论）。
例如 - 访问者的两个页面：alegro.php 和 darwin.php

alegro.php

```
<?php 
$page="alegro"; // this variable should identify a page
include "comments.php";
?> 
```

达尔文.php

```
<?php 
$page="darwin";
include "comments.php";
?> 
```

comments.php 有一个commentForm 和一些js 验证代码。
然后comments.php 将所有内容发送到第四个文件——submit.php，它填充dbTable：

```
mysql_query("INSERT INTO comments(page,name,url,email,body) VALUES (
      '$page' // - this is my first try
       $page  // - the second try
'".$arr['page']."' //the third try (after implementing a hidden "page" field into the form).
'".$arr['name']."',
'".$arr['url']."',
'".$arr['email']."',
'".$arr['body']."'
)"); 
```

无论如何 -`$page`值不会写入表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:06:00.507

你为什么用`$page`？

只需插入功能，就像

```
 function insertdata (){
  // do your code of inserting here to database
 } 
```

并在每个文件中`darwin`或`alegro` 仅包含此功能。

榜样

```
 if (isset($_POST['submit_comment']))
      {
      function insertdata() ;
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:07:38.717

**达尔文.php**

```
$page = 'darwin';
include('comments.php'); 
```

**评论.php**

```
<form action="submit.php">
    <input type="hidden" name="page" value="<?php echo $page; ?>" />
    <textarea name="comment"></textarea>
</form> 
```

**提交.php**

```
// $arr array filled
$arr['page'] = $_REQUEST['page'];
mysql_query("INSERT INTO comments(page,name,url,email,body) VALUES (
    '".$arr['page']."',
    '".$arr['name']."',
    '".$arr['url']."',
    '".$arr['email']."',
    '".$arr['body']."'
    )"); 
```

仅供参考 - 不要使用 mysql_* 因为它已被弃用。切换到[PDO](http://php.net/pdo)或[mysqli](http://php.net/mysqli)函数。

# html - CSS3 动画重复

> ID：13994825
> 
> 赞同：12
> 
> 时间：2012-12-21T17:47:12.693
> 
> 标签：html, css

是否可以重复这个 CSS3 动画，所以一旦它完成它就会继续？任何帮助深表感谢。

[jsFiddle](http://www.jsfiddle.net/gFCM5/4/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T17:49:44.373

[动画迭代计数](https://developer.mozilla.org/en-US/docs/CSS/animation-iteration-count)是您正在寻找的。

```
animation-iteration-count: infinite;
-moz-animation-iteration-count: infinite;
-webkit-animation-iteration-count: infinite;
-o-animation-iteration-count: infinite; 
```

更新的小提琴：http: [//jsfiddle.net/HRP4n/1/](http://jsfiddle.net/HRP4n/1/)

# visual-studio-2010 - 在生产 Web 服务器上安装 Visual Studio 的原因

> ID：13994829
> 
> 赞同：4
> 
> 时间：2012-12-21T17:47:41.507
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, visual-studio-2012

是否有正当理由让某人将 Visual Studio 安装在其唯一目的是为传入请求提供服务的 Web 服务器上？说真的，有人可能会这样做有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:54:30.323

一种可能的用途是连接到 Web 服务器并调试某种错误或内存泄漏，这些错误或内存泄漏已被证明无法在开发机器上找到。根据设置，远程调试可能是更好的选择。对我们来说，作为 ISV，它不是，因为我们经常通过 LiveMeeting 和其他非常低效的方式连接到客户系统来诊断生产中的问题。有几次我不得不在客户系统上调试正在运行的进程，我下载并使用了[WinDbg](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)。

调试生产系统的更好选择是使用跟踪、日志记录和内存转储。有人可以使用 Visual Studio 附加到 w3wp.exe 进程并[保存内存转储文件](http://msdn.microsoft.com/en-us/library/vstudio/d5zhxt22.aspx#BKMK_How_to_create_a_dump_file)。但是，如果他们只需要一个内存转储，还有其他更有效的收集方法：[任务管理器](http://support.microsoft.com/kb/931673)、[进程资源管理器](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)等。

也有人可能将它用作查看 XML、配置或 html 文件的非常昂贵的编辑器，但这不是合法用途。

我真诚地希望没有人真正在这台机器上编写代码。如果您有访问权限，您可以快速搜索用户文件夹中的项目文件。

那么有人可能会在生产 Web 服务器上安装 Visual Studio 吗？是的，它可能很有用。但这并不意味着这是一个*好*主意。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-28T14:45:16.650

我对此持不同的观点。是的，正如其他人所说，您可以使用其他工具在 Web 服务器上或远程调试生产支持问题，但在生产 Web 服务器上安装 Visual Studio 是有正当理由的。由于我所工作的业务，我也被置于开发人员处于不利地位的情况下，这是必要的。例如，我现在的雇主从未设置过 QA Web 服务器。所以我坚持进行本地开发并在生产中部署测试站点进行测试。3 年过去了，我仍然没有分配资源来配置新的 Web 服务器。由于公司的政策，基于我的经验的远程访问调试并不是解决生产特定问题的最佳方法，并且在某些情况下是有问题的，并且不是每个人都可以使用的选项。问题的一些示例是防火墙问题、IP/域网络问题和安全问题，因为所有公共 Web 服务器都在 DMZ 上。我的远程调试经验为零，因为我雇主的网络团队不允许我打开端口并使其成为可能，因为服务器位于 DMZ 上。此外，根据您的 Visual Studio 版本，远程调试有问题并且从未工作过（尚未尝试使用新版本，因为我无法在工作中进行）。只要安装该程序以供授权人员使用，我认为将其仅用于紧急生产支持问题没有不利的一面。我个人有无数经验，其中错误特定于生产 Web 服务器，无法在本地或 QA 或开发服务器上重现，而最快和最简单的解决方案是在生产 Web 服务器上调试问题。该修复是在开发和 QA 测试中进行的，然后应用于生产工作，解决工具并不总是报告特定问题。当时最好的解决方案是直接在生产中调试它。我相信会有人说它存在安全风险，但如果应用程序是安全的，我认为在紧急情况下拥有最好的调试工具并没有什么不好的地方。在生产中使用 VS 也有一些影响，例如 IIS 重置，这就是为什么它应该仅限于调试问题。我想补充一点，我只在紧急情况下推荐这个。这也不适用于所有企业，因为有些企业不允许开发人员访问 Web 服务器。在我的例子中，我一直负责 Web 服务器和应用程序本身。此选项的使用范围应仅限于使用其他方法无法解决问题的紧急情况，并且永远不应直接在生产中对问题进行编程修复。最后，有时它可能是必要的，也许您可​​能需要在几个小时后安装它，然后在问题解决后将其删除。

# javascript - 使用 Javascript 函数定义 html 类

> ID：13994830
> 
> 赞同：2
> 
> 时间：2012-12-21T17:47:49.567
> 
> 标签：javascript, html, class

我正在开发一个网站，但遇到了一些麻烦。我想使用 Javascript 函数定义我的类，如下所示：

html代码：

```
<script type="text/javascript" src="../js/active_menu.js"></script>
<a id="demo" class="<script>document.write(myFunction('index.php'));</script>" href="index.php">Home</a> 
```

javascript代码：

```
function myFunction(menu_punkt)
{
var state = 'not_active'
var a = document.URL.split("//");
a = (a[1] ? a[1] : a[0]).split("/"); 
a = a[1];

if (menu_punkt == a){
    state = 'navactive';
}
return state
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:51:44.407

您不能`<script>`在属性内使用标签。可能最简单的更改是这样做：

```
<script type="text/javascript" src="../js/active_menu.js"></script>
<script>document.write('<a id="demo" class="' + myFunction('index.php') + '" href="index.php">Home</a>');</script> 
```

如果您希望禁用 JavaScript 的用户更容易访问您的页面，或者您希望允许 DOM 在不阻塞 JS 执行的情况下继续加载，您可以考虑采用事后更改元素的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:51:01.913

使用`className`属性：

```
document.getElementById("demo").className = myFunction('index.php'); 
```

确保在添加到 DOM*之后* 调用它，否则会失败。`demo``document.getElementById("demo")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:59:00.673

首先，`<script>`从 'class' 值中删除标签，您可以使用 JQuery 使其更加优雅：

```
$(document).ready(function() {
    $('#demo').addClass(myFunction('index.php'))
});

function myFunction(menu_punkt)
{
    var state = 'not_active'
    var a = document.URL.split("//"); 
```

[http://docs.jquery.com/Tutorials:Introducing_$%28document%29.ready%28%29](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)

*如果您不想在函数参数中硬编码页面名称，您可以使用“window.location.href”和“substr”函数进行排序。

[http://www.w3schools.com/jsref/jsref_substr.asp](http://www.w3schools.com/jsref/jsref_substr.asp)

# java - 如何阻止 Apache httpd 拒绝 HTTP PATCH 请求？

> ID：13994833
> 
> 赞同：3
> 
> 时间：2012-12-21T17:48:12.240
> 
> 标签：java, tomcat, apache2, bitnami

我正在使用 Bitnami Tomcat Stack 上的 Java servlet 实现[JSON Patch](https://datatracker.ietf.org/doc/html/draft-ietf-appsawg-json-patch-07)规范。在 servlet 端，我通过覆盖 HttpServlet.service() 方法来处理 HTTP PATCH 方法，如下所示：

```
@Override
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    if (request.getMethod().equals("PATCH"))
        doPatch(request, response);
    else
        super.service(request, response);
} 
```

问题是，当我尝试向 Tomcat 发送 HTTP PATCH 请求时，Apache httpd 以 501“方法未实现”拒绝它。

有没有办法让 Apache httpd 停止这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T17:31:53.210

AJP13 还不支持 HTTP PATCH ( [AJPv13a](http://tomcat.apache.org/connectors-doc/ajp/ajpv13a.html) )。如果您想使用 PATCH，请使用 HTTP 连接您的 Apache Web 服务器和 Tomcat。

# php - 为什么 $_POST 不改变会话？

> ID：13994835
> 
> 赞同：0
> 
> 时间：2012-12-21T17:48:23.640
> 
> 标签：php, html, forms, session

您好，我通过我想构建的脚本变得疯狂。

一切背后的逻辑：

我有一个使用会话的页面。现在，当用户第一次进入该站点时，它会查看是否有`http_accept_language`. 在这种情况下，将创建一个会话并保存首选语言。如果浏览器中没有设置，它将作为默认语言设置手动完成。之后它将直接指向正确的路径。

所以我有这部分：

```
if (!isset($_SESSION['pref_lang'])){
    if (isset($_SERVER["HTTP_ACCEPT_LANGUAGE"])){
        $max   = 0.0;
        $languages = explode(",", (strtolower($_SERVER["HTTP_ACCEPT_LANGUAGE"])));
        foreach($languages as $language){
            $language = explode(';', $language);
            $q    = (isset($language[1])) ? ((float) $language[1]) : 1.0;
            if ($q > $max){
                $max = $q;
                $pref_language = $language[0];
            }
        }
        $pref_language = trim($pref_language);
    }
    elseif (!isset($_SERVER["HTTP_ACCEPT_LANGUAGE"])){
        $pref_language = "en";  
    }
$_SESSION['pref_lang'] = $pref_language;
$pref_language = $_SESSION['pref_lang'];
    if ($basename === "index" ){
        header ('Location: http://www.domain.com/'.$pref_language.'/'.$basename);
    }
} 
```

现在，如果会话已经存在，我想提供一个选项来更改每个站点上的语言设置。因此，我有两个不同的页脚，它们将由 php 包含并取决于 $pref_language 但都包含相同的部分：

```
<form action="'.$_SERVER['PHP_SELF'].'" method="post">      
    <input type="submit" id="de" name="de"/><div>german/div>
</form>
<form action="'.$_SERVER['PHP_SELF'].'" method="post">  
    <input type="submit" id="en" name="fr"/><div>french</div>
</form>and so on... 
```

在 php 解析器之上：

```
if (isset($_SESSION['pref_lang'])){ 
    if (isset($_POST["de"]) ){
        $pref_language = "de";
        $_SESSION['pref_lang'] = $pref_language;
        var_dump($_POST);
    }
    elseif (isset($_POST["fr"]) ){
        $pref_language = "fr";
        $_SESSION['pref_lang'] = $pref_language;
        var_dump($_POST);
    }
}
echo "session exist:".$_SESSION['pref_lang']."<br/>";
$pref_language = $_SESSION['pref_lang'];
var_dump($_POST);
} 
```

现在，当调用页面并按下按钮更改语言时，它将为 var_dump 回显：

```
array(1) { ["fr"]=> string(2) "fr" } 
```

但是当在另一个空白页上通过 print_r 调用会话时，它不会改变。即使重新加载 url，它也会被设置回默认值。

所以如果有人可以给我一个提示来解决我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:20:28.973

`if (isset($_SESSION['pref_lang']))`从您手动设置语言的地方删除，它在逻辑上是无用的。

```
if ( isset($_POST['de']) ){
    $pref_language = "de";
    $_SESSION['pref_lang'] = $pref_language;
} else if ( isset($_POST['fr']) ){
    $pref_language = "fr";
    $_SESSION['pref_lang'] = $pref_language;
}

echo "session exist:".$_SESSION['pref_lang']."<br/>";
$pref_language = $_SESSION['pref_lang'];
var_dump($_POST);
var_dump($_SESSION) //see what this contains as well
} 
```

您还可以通过更改表单来简化整个过程，如下所示：

```
<form action="'.$_SERVER['PHP_SELF'].'" method="post">      
    <input type="submit" id="de" name="setlang" value="de"/><div>german/div>
</form>
<form action="'.$_SERVER['PHP_SELF'].'" method="post">  
    <input type="submit" id="fr" name="setlang" value="fr" /><div>french</div>
</form> 
```

然后 PHP 可以变成这样：

```
if( isset($_POST['setlang']) ) {
    switch($_POST['setlang']) {
        case 'fr':
            $_SESSION['pref_lang'] = 'fr';
            break;
        case 'de':
            $_SESSION['pref_lang'] = 'de';
            break;
        case 'en':
        default:
            $_SESSION['pref_lang'] = 'en';
            break;
    }
} 
```

*此外*，`$_SERVER['PHP_SELF']`在您的输出中使用不是一个好习惯，因为人们可以将代码注入您的页面，即：

`http://yoursite.com.com/form.php/%22%3E%3Cscript%3Ealert(‘xss attack’)%3C/script%3E%3Cbr%20class=%22irrelevant`

请参阅：[PHP_SELF 和 XSS](https://stackoverflow.com/questions/6080022/php-self-and-xss)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:58:00.090

在重置之前先尝试取消设置 $_SESSION['pref_lang'] ，如下所示：

```
 if (isset($_SESSION['pref_lang'])){ 

unset($_SESSION['pre_lang']);

if (isset($_POST["de"]) ){
    $pref_language = "de";
    $_SESSION['pref_lang'] = $pref_language;
    var_dump($_POST);
}
elseif (isset($_POST["fr"]) ){
    $pref_language = "fr";
    $_SESSION['pref_lang'] = $pref_language;
    var_dump($_POST);
}
}
echo "session exist:".$_SESSION['pref_lang']."<br/>";
$pref_language = $_SESSION['pref_lang'];
var_dump($_POST);
} 
```

# java - 在集合中创建新的谓词值集合的代码行最少

> ID：13994838
> 
> 赞同：0
> 
> 时间：2012-12-21T17:48:38.543
> 
> 标签：java, collections

我正在编写一些我有时需要但不经常需要的代码，并且想知道为什么它需要这么多行代码。我需要使用从另一个集合的对象中的方法返回的字符串创建一个新集合。我可能会在该类的三种不同方法上执行此操作三次。我想番石榴中可能有一些东西可以帮助我。就像是：

```
collection = Iterators.collectNotNull( myCollection, new Function...{
    public String apply( MyObject input ) {
        String value = input.getStringValue();
        if ( StringUtils.isEmpty( value )
            return null;
        return value; } ); 
```

我的意思是这对我来说甚至是太多的代码行。但无论哪种方式，我基本上都是在需要的时候写上面的。

所以问题是，谁能用更少的代码更简单地做到这一点？您可以使用现有的主流库，例如 Apache commons 或 Guava。如果您想消除创建匿名内部以获取将返回值的方法的需要，则反射是可以的。以上是我最好的尝试，但我必须编写可重用的“collectNotNull”方法。我宁愿不必。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:53:18.683

如果您的目标是*减少*代码，那么显而易见的方法是最好的。

```
 List<String> list = Lists.newArrayList();
 for (MyObject input : myCollection) {
   String value = input.getStringValue();
   if (!value.isEmpty()) {
     list.add(value);
   }
 } 
```

请参阅[Guava wiki page on functional idioms](https://code.google.com/p/guava-libraries/wiki/FunctionalExplained#Caveats)：它们通常是矫枉过正的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T01:38:37.270

如果 Java 有高阶函数……</p>

好吧，我们不要走那条路。

在 Java 中接近这一点的一种方法是使用[foreach](https://github.com/akuhn/foreach)库

```
for (Collect<Type> each: ForEach.collect(input)) 
    each.yield = each.value.method(); 
for (Reject<String> each: ForEach.reject(ForEach.result())) 
    each.yield = each.value.isEmpty(); 
result = ForEach.result() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:31:13.310

这个：

```
 myCollection.removeAll(Arrays.asList(null, "")); 
```

例子：

```
List<String> myCollection = new LinkedList<String>(Arrays.asList("a", "", "b", null, "c"));
System.out.println(myCollection);
myCollection.removeAll(Arrays.asList(null, ""));
System.out.println(myCollection); 
```

产生：

```
[a, , b, null, c]
[a, b, c] 
```

更新：虽然这不是很普遍，但您可以保留或删除所有与这种方式相同的元素。

在 Java 8（可预览版）中，您可以这样做：

```
myCollection.filter(s -> s != null && !s.isEmpty()) 
```

并对结果做一些事情（add into() 以将它们添加到列表或 map() 进一步等）。

# javascript - TinyMCE变成

> ID：13994839
> 
> 赞同：3
> 
> 时间：2012-12-21T17:48:39.427
> 
> 标签：javascript, jquery, tinymce, codemirror

Tinymce 正在删除我的 img 结束标记并生成无效的 xhtml。

它变成了这个

```
<img src="image.jpg" /> 
```

进入这个

```
<img src="image.jpg" data-mce-src="/../Index/image.jpg"> 
```

我也在使用 codemagic，但是在查看 html 时它仍然显示 . 我也试过包括`<img></img>`，但输出是一样的。

想法？

这是我的选择

```
var tinyMceOptions = {
    mode: 'textareas',
    theme: 'advanced',
    element_format : "xhtml",
    plugins: 'codemagic,wordcount,inlinepopups,sparkimage, sparklink',
    theme_advanced_buttons1: 'formatselect,fontsizeselect,|, bold,italic,underline,|,bullist,numlist,|,outdent,indent,blockquote,|,forecolor,backcolor,|,justifyleft,justifycenter,justifyright,|,sub,sup,|,sparklink,sparkimage,codemagic',
    theme_advanced_buttons2: '',
    theme_advanced_buttons3: '',
    theme_advanced_toolbar_location: 'top',
    theme_advanced_toolbar_align: 'left',
    theme_advanced_resizing: true,
    theme_advanced_statusbar_location: "bottom",
    valid_elements: "*[*]",
    //extended_valid_elements :"script[language<javascript|type|src]",
    skin: 'o2k7',
    width: '575px',
    height: '350px',
    forced_root_block : false,
    theme_advanced_blockformats: 'h1,h2,h3,h4,h5,h6,p',
    relative_urls : false,
    setup : function (ed) {
        ed.onChange.add(function (ed, evt) {
            var val = $('iframe#_contentAreaID_ifr').contents().find('body').html();
                $('._hiddenContentContainer[data-contentid=' + currentTab + '] ._hiddenContentArea').val(val);
            }
        );
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:08:40.487

问题不在于 TinyMCE，而在于我们如何从活动编辑器中获取内容。我们使用 jquery 的`$.html()`方法而不是使用 TinyMce 的`tinyMCE.activeEditor.getContent()`方法检索内容。

我最初遇到[这篇](http://drupal.org/node/1363608)文章谈论的是我遇到的图像标签未输出为 xhtml 的相同问题。这使我看到了[这个](https://stackoverflow.com/questions/4102744/jquery-html-returns-invalid-img)堆栈帖子，它解释了为什么它不起作用。

引用其中一个答案

> .html() 不返回为创建节点而提供的 HTML 或 XHTML 标记，它返回浏览器的相关节点的内部表示。这种内部表示不符合 XHTML，也并非如此——从技术上讲，它是一个内部实现细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:03:50.233

这是 TinyMCE 代码本身的一个问题。

它从未打算与 XHTML 一起使用——如果您确实想与它一起使用，那么您必须编辑核心。

[这是一篇文章，可能会强调如何在 TinyMCE 中使用严格的 XHTML](http://www.gethifi.com/blog/how-to-produce-xhtml-10-strict-markup-with-tinymce)

# java - Spring XML中的“classpath：”和“classpath：/”有什么区别？

> ID：13994840
> 
> 赞同：17
> 
> 时间：2012-12-21T17:48:43.670
> 
> 标签：java, spring, classpath

我正在处理一些 Spring XML 配置文件，有时它们使用`"classpath:/datasource.xml"`，有时`"classpath:datasource.xml"`. 两者之间有区别还是领先的`/`可选/隐含/冗余？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-21T18:11:00.380

我看不出这两者有什么区别。您将看到的最大区别是类路径位置上的相对路径和 *

[这是Spring Resources](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/resources.html)的摘录，查找第 4.7.2.2 节

**Classpath*：**
“classpath*:”前缀也可以与位置路径的其余部分中的 PathMatcher 模式组合，例如“classpath*:META-INF/*-beans.xml”。在这种情况下，解析策略相当简单：在最后一个非通配符路径段上使用 ClassLoader.getResources() 调用来获取类加载器层次结构中的所有匹配资源，然后对每个资源使用相同的 PathMatcher 解析策略上述用于通配符子路径。

这意味着像**"classpath*:*.xml"**这样的模式不会从 jar 文件的根目录中检索文件，而只会从扩展目录的根目录中检索文件。这源于 JDK 的 ClassLoader.getResources() 方法的限制，该方法仅返回传入空字符串的文件系统位置（指示要搜索的潜在根）。

# powershell - PowerShell - SMTP 发送

> ID：13994841
> 
> 赞同：0
> 
> 时间：2012-12-21T17:48:48.280
> 
> 标签：powershell

所以我有一个存储在文本文件中的加密字符串，我可以一次又一次地调用它，这是我的 SMTP 智能主机的密码。这是通过以下方式创建的：

```
Read-Host "Enter the Password:" -AsSecureString | ConvertFrom-SecureString | Out-File C:\EncPW.bin 
```

我现在需要以某种方式将它与 a 一起传递给函数`$username`的`-Credential`参数`Send-MailMessage`。我想我需要把它变成 PSCredential 格式。但我被困住了！

```
$password = cat C:\encPW.bin |  ConvertTo-SecureString
$password

$cred = New-Object -typename System.Management.Automation.PSCredential -argumentlist      $username,$password 
```

到目前为止我有这个，但是当我打印它输出时它是 $password`System.Security.SecureString`并且我得到一个错误：

```
net_io_connectionclosed 
```

当它尝试 SMTP 发送时。

干杯

呼叫到 SMTP 发送：

```
Send-MailMessage -from "TestPS@mydomain.co.uk" -To "someone@mydomain.co.uk" -Subject "Daily Report" -Body "Open Attachment for Report" -smtpServer 85.119.248.54 -Attachments "C:\WSB_Reports\DailyReport.txt" -Credential $cred 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:16:55.443

假设您的用户名和密码正确，您采用的方法似乎是正确的。您的用户名是否以域为前缀，例如`domain\username`？我支持通过以下方式尝试使用手动提供的凭据的命令的建议`Get-Credential`：

```
$cred = Get-Credential 
```

如果您需要验证从安全字符串返回的密码是否正确，可以这样显示：

```
$bstr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($password)
$str =  [System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($bstr)
[System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($bstr)
$str 
```

# c - 从 char 和 int 创建 char*

> ID：13994842
> 
> 赞同：0
> 
> 时间：2012-12-21T17:48:50.617
> 
> 标签：c, char

无论如何，我可以将 char 和 int 组合成 C 中的 char* 吗？

总是只有一个字符和一个 4 位整数。

例如：我有 char "A"，我有一个 int 1234。如何将它们组合成一个 char*，它指向一个带有 "A1234" 的 char 数组？

```
CID[0] = character 
CID[1] = ID & 0xff;
CID[2] = (ID >> 8) & 0xff;
CID[3] = (ID >> 16) & 0xff;
CID[4] = (ID >> 24) & 0xff; 
```

假设字符是一个正确的字符，其值为“A”，而 ID 是一个正确的 int，其值为“1234”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T17:50:25.993

基本字符串格式：

```
char buf[32];
snprintf(buf, sizeof(buf), "%c%d", 'A', 1234); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T17:50:22.517

具有`sprintf`/`snprintf`功能。

示例`sprintf`：

```
char *a = malloc(32);  // allocate enough memory and check malloc's return value 
sprintf(a, "%c%d", my_char, my_int); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T18:01:22.423

要复制您在问题中写的内容并摆脱该`s(n)printf`问题：

```
CID[0] = character 
CID[1] = ID / 1000;
CID[2] = (ID / 100) % 10;
CID[3] = (ID / 10) % 100;
CID[4] = ID % 10; 
```

如果你的编译器足够聪明并且你的处理器有一个好的除法器单元，它肯定会比调用`sprintf`.

编辑：对编译器的智能性和分隔符的优点进行一点说明。编译器通常能够使用移位、加法、减法和避免除法指令将常量乘法和除法转换为替代代码，即使在最快的处理器中也需要一些时间。此处显示的显式转换也将在内部进行`sprintf`（但以更通用的方式）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T17:51:24.517

```
#include <stdio.h>

buf [SIZE];
sprintf(buf, "%c%d", c, d); 
```

什么时候是你的 char`c`和`d`int。

不过要小心缓冲区溢出。H2CO3 的答案显示了一种更安全的选择。

# linux - 如何将值发送到 Zenity 进度条

> ID：13994843
> 
> 赞同：7
> 
> 时间：2012-12-21T17:48:54.323
> 
> 标签：linux, shell, progress-bar, zenity

我编写了一个使用 7zip 备份目录的简单脚本。一切正常，但现在我想向它添加一些图形反馈，添加一个进度条。我知道我可以做到这一点，`zenity`但无论我尝试什么，我似乎都无法让它发挥作用。

我`fgrep`用来找出压缩新文件的时间（“压缩”是 7zip 在屏幕上打印的每一行的第一个单词），以增加条形图。具体的代码行如下：

```
7z a -t7z /home/user/Desktop/Backup.7z /home/user/Desktop/folder_to_backup -mx9 | fgrep Compressing | nl | awk '{print $1/$number_of_files*100}' | zenity --progress --percentage=0 --auto-close 
```

运行this会出现进度条，从0开始，但没有显示进度：操作完成后，进度条突然跳到最后。

我已经用谷歌搜索了一段时间，但我发现的唯一一件事是`zenity progress`似乎有一些问题：D 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T21:20:53.747

看起来您没有在输出中获得命令的进度，请通过在没有`| zenity --progress --percentage=0 --auto-close`管道的情况下运行命令来检查它。

`apt-get install screen`尝试这样的事情来获得你的输出，如果你没有安装它，首先你需要：

```
screen -L bash -c '(while :; do tail ~/screenlog.0 | grep -o "[0-9]*%" | tail -1; done | zenity --progress --auto-close &); 7z a "output.zip" "/path/to/input"' 
```

我将分解命令中最重要的部分：

1.  **screen -L**默认情况下，此标志告诉`screen`命令启动新会话并将所有终端输出记录到文件中`~/screenlog.0`。
2.  **bash -c COMMAND1 生成**一个子shell并`COMMAND1`在其中运行。
3.  **(COMMAND2 &) 生成**另一个将`COMMAND2`在后台启动的子shell。
4.  **尽管 ：;** 开始一个无限循环。
5.  **tail FILE**读取最后 10 行`FILE`.
6.  **grep -o**仅打印匹配行的匹配（非空）部分。
7.  **[0-9]*%**后跟 % 符号的任意数字序列。
8.  **tail -1**读取上一个管道命令的最后一行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-11T10:51:45.047

**不创建临时文件的解决方案**

终于在头痛和流鼻血之后得到它......

线索是，交互式与非交互式缓冲：交互式程序通常对它们的输出进行行缓冲；即，他们写出每一行。非交互式程序等到它们有一个完整的缓冲区，这可能是多行输出。现在，如果您将一个非交互式程序通过管道传输到另一个程序，则第二个程序不会在第一个程序写出完整缓冲区之前获得其输入。

```
cd /home/user
export number_of_files=$(find folder_to_backup -type f | wc -l) && ( find folder_to_backup -print0 -type f -exec sh -c "7z a -t7z /path/to/Backup.7z {} -mx9 -bd | grep Compressing" \; | awk -W interactive -v x="$number_of_lines" '{printf "%d\n", (NR*100/x)}' ) | zenity --progress --percentage=0 --auto-close 
```

我可能需要解释一下：

1.  **cd /home/user**您需要 cd 在您想要 7z-Backup 中目录结构的文件夹中，否则 7z 不会在存档中放置目录结构。

2.  **export number_of_files=$(find folder_to_backup -type f | wc -l)**首先计算要压缩的文件并导出变量以供以后计算。

3.  **find folder_to_backup -print0 -type f** folder_to_backup 必须是相对路径。（见 1。）

4.  **-exec sh -c "7z a -t7z /path/to/Backup.7z {} -mx9 -bd | grep 压缩" \;** 为查找输出的每一行启动一个子shell，并使用管道执行 7z 到 grep。

5.  **awk -W interactive -vx="$number_of_lines" '{printf "%d\n", (NR*100/x)}'**提示awk要交互（-W交互），传播之前导出的变量（-vx= "$number_of_lines")，最后计算并打印百分比（'{printf "%d\n", (NR*100/x)'）。

6.  将所有这些放在括号中，然后将管道放入 zenity。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T23:27:01.053

问题不在于zenity。这是因为 7z 不写入标准输出。（可能使用 tput 或类似命令直接处理终端）。因此你不能将它传递给另一个命令。

如果将命令重定向到文件，您实际上可以看到这一点：

```
 7z a -t7z /home/user/Desktop/Backup.7z /home/user/Desktop/folder_to_backup -mx9 | fgrep Compressing | nl | awk '{print $1}' > 7z.stdout 
```

在我的 7z 版本中，文件如下所示：

```
7-Zip [64] 9.20  Copyright (c) 1999-2010 Igor Pavlov  2010-11-18
p7zip Version 9.20 (locale=en_CA.UTF-8,Utf16=on,HugeFiles=on,4 CPUs)

Scanning

Updating archive test.7z

Compressing  test.file

Everything is Ok 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-14T07:00:17.217

您将需要一个带有代码的子shell，以某种方式监控压缩，例如通过在完成时将文件大小与预期大小相匹配，并回显一个百分比。将该子壳放在进行压缩的子壳内。访问[http://user.cavenet.com/rolandl](http://user.cavenet.com/rolandl)并查看 ftp-user.txt 以获取示例。Bash 子shell 非常方便！

# python - IntelliJ Python 插件和运行类路径

> ID：13994846
> 
> 赞同：24
> 
> 时间：2012-12-21T17:49:04.037
> 
> 标签：python, intellij-idea, classpath, pycharm

我有一个位于 /home/myself/workspace/Project1 的项目，为此我从我设置的 Python 2.7.3 Virtualenv 创建了一个 SDK。
这个项目使用了一些我在可访问目录中的外部代码，例如 /home/myself/LIBRARY；此目录包含几个目录，其中包含代码、文档等
。例如，有一个模块“important_util”位于 /home/myself/LIBRARY/mymodule/important_util.py。

现在，我在 SDK 类路径中添加了整个目录 /home/myself/LIBRARY，在编辑器窗口中它看起来很好。导入和调用被识别，我还可以浏览 LIBRARY 目录中的代码。

问题是，当我尝试运行我的程序时，它在第一次使用 LIBRARY 导入时失败！！！

```
Traceback (most recent call last):
   File "/home/myself/workspace/Project1/my_program.py", line 10, in <module>
      from mymodule import important_util as ut 
      ImportError: No module named mymodule 
```

我还尝试将相同的目录添加到 Sources 部分的“Global Libraries”部分......但没有运气。

我似乎找不到将此代码添加到 Run 类路径的方法，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T21:27:14.693

确保您`__init__.py`在`mymodule`目录中有：

> 需要这些`__init__.py`文件才能使 Python 将目录视为包含包；这样做是为了防止具有通用名称（例如字符串）的目录无意中隐藏了稍后出现在模块搜索路径上的有效模块。在最简单的情况下，`__init__.py`可以只是一个空文件，但它也可以执行包的初始化代码或设置`__all__` 变量，稍后介绍。[©](http://docs.python.org/2/tutorial/modules.html)

**更新**：在 IntelliJ IDEA 中，应将其他目录添加为**Module Dependencies**或配置为`Libraries`（添加到**Dependencies**）而不是`Classpath`Python SDK 的选项卡：

![依赖项](../Images/c8031fc7811f6dda9d5fb50f42ea146c.png)

我已验证此文件夹 ( `D:\dev\lib`) 已添加到`PYTHONPATH`并导入作品中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-22T17:05:00.587

在 IntelliJ 14 中它有点不同，你是这样的模块/鸡蛋：

*   转到文件-> 项目结构
*   现在选择模块，然后选择“依赖项”选项卡
*   单击“+”图标并选择“库”
*   点击“New Library”并选择Java（我知道这很奇怪......）
*   现在选择多个模块/鸡蛋和“确定”。
*   从类别中选择“类”。
*   给你的新库起一个名字，“我的 Python 不是 Java 库”
*   最后点击“添加所选”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-17T12:47:09.690

从版本 2017.1 添加它已再次更改。**文件菜单中没有项目结构**。写下当前程序：

1.  转到首选项/设置。**文件 -> 设置**（IDE 名称 -> macOS 的首选项）

2.  选择**构建、执行、部署**

[![在此处输入图像描述](../Images/48242daddf2f59e7704006ffa77fefb3.png)](https://i.stack.imgur.com/cq77e.jpg)

3.  选择**Python 解释器**

4.  **在项目解释器**的下拉菜单中选择，选择项目所需的Python版本的路径路径。

[![在此处输入图像描述](../Images/3ae52e868fe2cfad9983b270950a5b94.png)](https://i.stack.imgur.com/pnCqQ.jpg)

5.  单击应用并等待几分钟让 IntelliJ 索引 python 包。

现在所有错误都应该消失了，您应该能够在外部库列表中看到项目中使用的 Python。

[![在此处输入图像描述](../Images/9287fa9fbcb5051f7c2c63c86d98cf86.png)](https://i.stack.imgur.com/e9RBi.jpg)

***快乐编码。***

# python - Python 中的事后调试是否允许步进或继续？

> ID：13994847
> 
> 赞同：11
> 
> 时间：2012-12-21T17:49:07.203
> 
> 标签：python, debugging, pdb

我一直在玩事后调试，但遇到了一些问题。考虑以下名为的python脚本`example.py`：

```
k = 0
print 1\. / k
print 'continue ...' 
```

我可以运行它：

```
> python -m pdb example.py 
```

然后进入第 2 行`print 1\. / k`，然后设置`k = 1`，然后继续执行 pdb 命令`c`。

现在，如果我通过事后调试来执行此操作，我将无法继续执行程序。我运行：

```
> python -i example.py 
```

然后在我落入外壳后，我做了一个：

```
import pdb
pdb.pm() 
```

然后我可以像以前一样更改 的值`k`，但我无法继续执行任何程序。Pdb 只是简单地退出。

我找不到任何地方明确指出您不能在事后逐步执行程序。似乎是这样。那么我想了解事后调试的价值。发生错误时检查代码状态的唯一值是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T17:58:11.993

当抛出异常时调用事后分析。

此时，堆栈不再“活动”，您无法再单步执行代码。毕竟刚刚抛出了一个异常，表明代码路径不能再继续了。例如`result`，如果你有这个表达式，你会期望是什么？`result = 1\. / k`

字面上的验尸用于查看患者死亡后（验尸，拉丁文），死因是什么。pdb 事后分析也不例外。你可以看到程序在死亡那一刻的状态，但你不能重新激活死者。

换句话说，事后分析的目的是通过详细检查失败时的程序状态来了解程序失败的原因*。*

该术语尚未在 pdb 手册中明确记录，可能是因为“事后”一词被认为是常用的。[Wikipedia 关于调试](http://en.wikipedia.org/wiki/Debugging#Techniques)的文章顺便提到了它，Python 并不是唯一提供该技术的语言；[Windows 调试器](http://msdn.microsoft.com/en-us/library/windows/hardware/ff542967(v=vs.85).aspx)也提供此功能，[R](http://stat.ethz.ch/R-manual/R-devel/library/utils/html/debugger.html)也提供此功能，其他调试器也提供此功能。

如果您希望从追溯中“重新激活”尸体，请知道有巨大的障碍需要克服。虽然异常的回溯确实包括对堆栈中每个帧的全局和本地命名空间的引用，但实时堆栈包含更多未包含在回溯中的状态，即*无法重建的*状态。这包括[附加到嵌套函数的闭包单元](https://stackoverflow.com/questions/14413946/what-exactly-is-contained-within-a-obj-closure/14414638#14414638)（尤其是当产生闭包的父函数本身不是回溯的一部分时），或处理或块所需的内部簿记`try..except`，或活动或循环使用的迭代器对象。`try..finally``with``for``async for`

对于那些不希望的人，我这样说：*程序被传递了！这个程序没有了！它已经不复存在了！'t's过期去见'是制造商！这不是一个僵硬的！生不如死，不能安息！如果你没有把它钉在追溯上，那就不会推高雏菊了！它的评估循环簿记现在是“历史！'t't off the twig！它踢了水桶，摆脱了它的凡人线圈，跑下窗帘，加入了隐形的流血合唱团！这是一个前程序。*

（向 John Cleese 和 Michael Palin 道歉）。

# javascript - 加载页面后如何立即执行ajax功能？

> ID：13994849
> 
> 赞同：-1
> 
> 时间：2012-12-21T17:49:12.173
> 
> 标签：javascript, jquery

```
jQuery(document).ready(function () {
    setInterval(refreshPartial, 30000)
}); 
```

这将在页面加载后 3 秒开始执行函数。
但是，如果我希望它在页面加载后立即执行并在此之后继续执行 3 秒怎么办？
我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:49:43.690

```
jQuery(document).ready(function () {
    setInterval(refreshPartial, 30000);
    refreshPartial();
}); 
```

*那还不是最难的...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:51:06.497

你不能阻止你。不要使用 setInterval。只需立即调用该函数，例如：

> 刷新部分（）

如果它在 3 秒内结束，您就可以节省时间。3秒后没有必要再次调用相同的函数。

# css - 如何使用css在文本顶部修复图像

> ID：13994854
> 
> 赞同：0
> 
> 时间：2012-12-21T17:49:41.923
> 
> 标签：css, twitter-bootstrap

我不确定如何解决这个问题..

[http://jsfiddle.net/PaDvr/](http://jsfiddle.net/PaDvr/)

我希望将图像放在文本之前，而不是放在文本之上。

的HTML：

```
<div id="photo">
<img style="-webkit-user-select: none" src="http://cdn.androidpolice.com/wp-content/themes/ap1/images/android1.png">
</div>
<div id="text" class="media-body">
    lorem ipsum bla blah...
    </div>​ 
```

的CSS：

```
#photo{
    border: 1px solid black;
    max-width: 100px;
    max-height: 200px;
    min-width: 266px;
    min-height: 286px;
    position: relative;
    left: 32%;
    top: 23px;
}​ 
```

是什么导致图像位于文本之上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:55:07.423

这里有两个问题。首先是您的最大和最小宽度和高度设置。div 的最大高度应至少与图像一样高，并且高于最小高度。[看这里](http://jsfiddle.net/AaUYL/)

```
#photo {
  ...
  max-height: 404px;
} 
```

第二个是您的`relative`定位将其从常规文档流中删除。定位的本质`relative`是，将其向下移动 23px 会将其移动到恰好位于其下方的任何位置上 23px。抵消这种情况的一种方法是向图像添加一个边距底部，该边距等于您的相对偏移量。[在 JSFiddle 上查看](http://jsfiddle.net/KFxXt/)

```
#photo {
  position: relative;
  left: 32%;
  top: 23px;
  margin-bottom: 23px;
} 
```

虽然如果你只是想上下移动图像，我只会使用边距而不是相对定位。[在 JSFiddle 上查看](http://jsfiddle.net/w4bvL/)

```
#photo{
  ...
  margin-left: 32%;
  margin-top: 23px;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:55:30.280

你的 `max-height: 200px;`和`top: 23px;`导致这个问题。如果您将其删除，则它不会重叠。[http://jsfiddle.net/PaDvr/3/](http://jsfiddle.net/PaDvr/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:56:50.873

`max-height: 200px;`从您的 CSS 中删除并添加

```
.​media-body {
    margin-top: 23px;  
}​ 
```

您需要考虑 #photo 中的 top: 23px ，这可以通过设置 .media-body margin-top: 23px; 来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T18:02:02.443

因为 top:xx 推送相对对象，所以添加

```
margin-bottom:23px 
```

ej:

```
#photo{

    border: 1px solid black;

    max-width: 100px;

    max-height: 200px;

    min-width: 266px;

    min-height: 286px;

    position: relative;

    left: 32%;

    top: 23px;

    margin-bottom:23px

}    ​ 
```

测试：http: [//jsfiddle.net/PaDvr/5/](http://jsfiddle.net/PaDvr/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T13:44:14.463

如果您想显示全尺寸图像，上述答案解决了这个问题。

但是，如果您打算将图像缩小到最大 100px 宽并将其限制在照片 div 中，则根本原因是默认情况下引导 CSS 将 max-width:100% 应用于图像，这会导致调整大小关闭.

解决方案是添加一个新类

```
#photo img{
max-width:100px;
} 
```

见[http://jsfiddle.net/PaDvr/28/](http://jsfiddle.net/PaDvr/28/)

然后您可以根据需要使用上面的建议来调整照片 div 的大小

# php - Javascript 将 PHP Json 转换为 javascript 数组

> ID：13994858
> 
> 赞同：8
> 
> 时间：2012-12-21T17:49:46.407
> 
> 标签：php, javascript, json

在我使用的 php 中`json_encode(...)`，然后在 Javascript 中获取值，如下所示：

```
["float","float","float","float"]  // PS: This is a string... 
```

我想把它变成一个普通的javascript数组，像这样：

```
Arr[0] // Will be float
Arr[1] // Will be float
Arr[2] // Will be float
Arr[3] // Will be float 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-21T17:52:52.677

听起来您正在用 JavaScript 检索 JSON 字符串（可能是通过 AJAX？）。如果你需要把它变成一个实际的数组值，你可能想要使用`JSON.parse()`.

```
var retrievedJSON = '["float","float","float","float"]'; // normally from AJAX
var myArray = JSON.parse(retrievedJSON); 
```

如果您实际上是在页面中写出一个值，而不是使用 AJAX，那么您应该能够简单地直接回显 的输出`json_encode`，而无需引用；JSON 本身是有效的 JavaScript。

```
var myArray = <?php echo json_encode($myPhpArray); ?>; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T17:50:57.337

```
var myArray = <?= json_encode($myPhpArray); ?>; 
```

很简单。;-)

例子：

```
<?php
  $myPhpArray = array('foo', 'bar', 'baz');
?>
<script type="text/javascript">
  var myJsArray = <?= json_encode($myPhpArray); ?>;
</script> 
```

应该输出（查看源代码）：

```
<script type="javascript">
  var myJsArray = ["foo","bar","baz"];
</script> 
```

[例子](http://sandbox.onlinephpfunctions.com/code/a7e4605ddf9891877fba49cff3d1e815ea880be8)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-29T09:14:08.743

我建议使用 jquery。php文件应该看起来像这样......

```
//location.php
<?php
$change = array('key1' => $var1, 'key2' => $var2, 'key3' => $var3);
echo json_encode($change);
?> 
```

然后jquery脚本...

```
<script>
$.get("location.php", function(data){
var duce = jQuery.parseJSON(data);
var art1 = duce.key1;
var art2 = duce.key2;
var art3 = duce.key3;
});
</script> 
```

# apache - 多个停放域的重定向不适用于文件名

> ID：13994863
> 
> 赞同：4
> 
> 时间：2012-12-21T17:50:06.127
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, url-rewriting

我的问题对我来说似乎很简单，但我找不到简单的解决方案。这里是：我有一个主域，以及指向该主域的多个域。为了避免重复的内容，我尝试将所有“辅助”或“停放”域重定向到我的主域，以便它解析为：

*   www.parkeddomain1.com => www.maindomain.com
*   www.parkeddomain2.com => www.maindomain.com
*   www.parkeddomain3.com => www.maindomain.com

等等...

现在我发现这个 htaccess 代码是一种包罗万象的解决方案（我更喜欢）：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www.maindomain.com$
RewriteRule ^(.*)$ http://www.maindomain.com/$1 [R=301] 
```

因此，当我只处理简单的停放域而不是带有子文件夹或子文件的停放域时，此代码有效。所以：

*   www.parkeddomain1.com => www.maindomain.com

重定向在这里工作正常但是当我添加一个子文件夹时会发生这种情况：

*   www.parkeddomain1.com/subfolder/ => www.parkeddomain1.com/subfolder/

当我正在寻找的是：

*   www.parkeddomain1.com/subfolder/ => www.maindomain.com/subfolder/

所有这些都是为了避免搜索引擎出现重复内容问题。

感谢所有人提供任何可以指导我找到解决方案的答案。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:39:51.973

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T22:36:57.370

如果您的唯一目的是安抚搜索引擎，您也可以指定一个规范 URL，它告诉搜索引擎一段内容的最终 URL。因此，即使相同的内容由几个不同的查询字符串变体或几个不同的域提供，规范 URL 也会告诉搜索引擎这些只是一个真实 URL 的替代方案。

有关详细信息，请参阅[有关规范 URL 的 Google 网站管理员中心博客](http://googlewebmastercentral.blogspot.co.uk/2009/02/specify-your-canonical.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T08:56:31.913

尝试在 301 后添加“L”

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www.maindomain.com$
RewriteRule ^(.*)$ http://www.newdomain.com/$1 [R=301,L] 
```

# asp.net-mvc - RouteValueDictionary 初始化和 MapRoute 问题

> ID：13994864
> 
> 赞同：3
> 
> 时间：2012-12-21T17:50:08.367
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

这两段代码是一样的吗？

```
RouteValueDictionary dic=new RouteValueDictionary();
dic.Add("controller", "Home");
dic.Add("action", "Index");
RouteTable.Routes.MapRoute("Test", "Test/Something", dic); 
```

和

```
 RouteTable.Routes.MapRoute("Test", "Test/Something", new{controller="Home", action="Index"}); 
```

我在路由表中没有得到相同的路由。当我使用第一个选项时，“控制器”和“动作”键不在`RouteTable.Routes[0].Defaults.Keys`但添加到`RouteTable.Routes[0].Defaults.Values`

你知道我在第一个选项中做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:09:01.913

您可以为第三个参数传递任何类型的对象，但传递的对象必须包含在您的 url 模式中定义的键，因为它是属性。例如

```
 public class test
    {
        public string controller { get; set; }
        public string action { get; set; }
        public string id { get; set; }
    } 

     routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}", 
             new test { action = "Index", controller = "Home", id = "" } 
        ); 
```

在这种情况下，您的对象必须包含`controller`, `action`,`id`属性。

# windows - 如何在 Windows 7 的关机屏幕显示的消息中添加自定义字符串？

> ID：13994865
> 
> 赞同：5
> 
> 时间：2012-12-21T17:50:13.350
> 
> 标签：windows, message, shutdown

如何将自定义文本添加到关机屏幕，例如 Windows 在关机前安装更新时显示的那些消息？例如，您有一个在关机时执行的备份脚本，并且您想像 Windows 在安装更新时一样通知备份的进度。是否有任何命令行工具，或者一些代码库，甚至是 Windows API 中的东西？

请注意，这*不是*关于如何关闭计算机，*也不*是关于在关闭屏幕中显示消息的*任何*方式，例如控制台应用程序或消息框。这*也不*是关于自定义现有消息，*也不是关于在关机屏幕**之前*显示的任何[关机*对话框*](http://www.codeguru.com/images/article/12967/Nick3.gif)，它允许用户取消关机或继续而不等待程序终止。

 *这是关于了解 Windows 如何以它们在关机时的显示方式实现这些消息的显示，以及如何*添加*要显示的新消息，最好是带有进度信息。为了清楚起见，下面是截图。

![关机画面](../Images/54a925fa3b7436dca1543d4005c2a2da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T15:31:21.063

wmsgapi.dll 中有一个函数 WmsgPostNotifyMessage 正在显示此消息。虽然没有记录，但使用起来应该不成问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T02:45:14.500

这是一个可以通过消息关闭计算机的 C++ 代码。

```
#include <windows.h>

#pragma comment( lib, "advapi32.lib" )

BOOL MySystemShutdown( LPTSTR lpMsg )
{
   HANDLE hToken;              // handle to process token 
   TOKEN_PRIVILEGES tkp;       // pointer to token structure 

   BOOL fResult;               // system shutdown flag 

   // Get the current process token handle so we can get shutdown 
   // privilege. 

   if (!OpenProcessToken(GetCurrentProcess(), 
        TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hToken)) 
          return FALSE; 

   // Get the LUID for shutdown privilege. 

   LookupPrivilegeValue(NULL, SE_SHUTDOWN_NAME, 
        &tkp.Privileges[0].Luid); 

   tkp.PrivilegeCount = 1;  // one privilege to set    
   tkp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED; 

   // Get shutdown privilege for this process. 

   AdjustTokenPrivileges(hToken, FALSE, &tkp, 0, 
  (PTOKEN_PRIVILEGES) NULL, 0); 

   // Cannot test the return value of AdjustTokenPrivileges. 

   if (GetLastError() != ERROR_SUCCESS) 
      return FALSE; 

   // Display the shutdown dialog box and start the countdown. 

   fResult = InitiateSystemShutdown( 
      NULL,    // shut down local computer 
      lpMsg,   // message for user
      30,      // time-out period, in seconds 
      FALSE,   // ask user to close apps 
      TRUE);   // reboot after shutdown 

   if (!fResult) 
      return FALSE; 

   // Disable shutdown privilege. 

   tkp.Privileges[0].Attributes = 0; 
   AdjustTokenPrivileges(hToken, FALSE, &tkp, 0, 
    (PTOKEN_PRIVILEGES) NULL, 0); 

   return TRUE; 
} 
```*

# visual-studio - 将xml嵌入到dll中

> ID：13994874
> 
> 赞同：2
> 
> 时间：2012-12-21T17:50:46.127
> 
> 标签：visual-studio, xamarin.ios, monodevelop

对于我的 UI 系统，它类似于 WPF，但使用 OpenGL 编写跨平台，我需要将 xml 文件嵌入到用于布局用户控件的 DLL 中。~~问题是：默认情况下，MonoTouch 不支持将任何文件嵌入到 dll 中，而 afaik 只有一种解决方案可以解决此问题：将 xml 嵌入到`*.cs`文件中并编译它。~~

~~现在，如果您每次都手动完成这项任务并没有任何乐趣，那么问题是如何为**Visual Studio 和 MonoDevelop**实现这一目标的最佳方法？~~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:50:05.263

MonoTouch 不编译 C# 代码，它使用`smcs`编译器。这与用于 Android 的 Mono 以及最初用于 Moonlight 的编译器相同。

该`smcs`编译器能够将文件嵌入到程序集中，它是这样做的 BCL（例如 mscorlib.dll 的全球化文件），这是 XAML（在 Moonlight 中）的**重要**要求。

# entity-framework - 实体框架 - 确保日期在未来

> ID：13994879
> 
> 赞同：4
> 
> 时间：2012-12-21T17:51:04.280
> 
> 标签：entity-framework, validation, .net-4.0

我们需要验证存储到表中的日期是未来的日期，有没有办法注释属性，以便 EF 代码首先可以验证并生成 db 约束？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:07:03.473

在模型的属性上添加一个属性，例如

```
[DateInTheFuture]
public DateTime ShippingDate { get; set; } 
```

该属性是通常的简单验证属性：

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field, AllowMultiple = false)]
public class DateInTheFutureAttribute : ValidationAttribute
{
    protected override ValidationResult IsValid(object value, ValidationContext context)
    {
        var futureDate = value as DateTime?;
        var memberNames = new List<string>() { context.MemberName };

        if (futureDate != null)
        {
            if (futureDate.Value.Date < DateTime.UtcNow.Date)
            {
                return new ValidationResult("This must be a date in the future", memberNames);
            }
        }

        return ValidationResult.Success;
    }
} 
```

# jquery - 使用 jQuery 选择任何列

> ID：13994883
> 
> 赞同：4
> 
> 时间：2012-12-21T17:51:12.687
> 
> 标签：jquery, html-table

用户是否有可能选择表格的任何列并且我可以使用 jQuery 来实现？

我有这个例子可以玩：http: [//jsbin.com/oluyex/1/edit](http://jsbin.com/oluyex/1/edit)

查询。我不知道如何选择每个 th 的孩子：

```
$(function(){
    $("th").click(function(){
        $(this).("children").css("background-color","red"); 
    });
}) 
```

HTML：

```
<table id="taula" border="1">
<tr>
<th>Header 1</th>
<th>Header 2</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:04:21.960

为此，您需要做的就是获取表头的索引，然后使用该索引将类应用于列中的每个表单元格。您必须遍历每一行以找到适当的表格单元格。- [http://jsfiddle.net/BMGKv/](http://jsfiddle.net/BMGKv/)

```
$('th').click(function() {
    var th_index = $(this).index();
    $('tr').each(function() {
        $(this).find('td').eq(th_index).toggleClass('highlight');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:05:11.403

试试这个：

```
$(function(){
    $("th").click(function(){
      var idx = $(this).index()+1;
      $(this).parent().siblings().find("td").css("background-color","white");
      $(this).parent().siblings().find("td:nth-child("+idx+")").css("background-color","red");  
    });
}) 
```

[在这里](http://jsbin.com/oluyex/5)测试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T17:59:14.440

另一个`th`不是 DOM 中的子项，即使它们在视觉上位于标题下方。您应该提高对树数据结构的理解。

在任何情况下，HTML 表格都是以行为中心的，因此您必须或多或少地手动选择相应列中的每个表格单元格：

```
$("th").on('click', function () {
   $(this).closest('table').find('tr').find('td:eq(' + $(this).index() + ')')
      .css('background-color', 'red');
});​ 
```

[http://jsfiddle.net/VFWBN/](http://jsfiddle.net/VFWBN/)

编辑：使用 nth-child，您可以跳过`.find('tr')`：http: [//jsfiddle.net/VFWBN/1/](http://jsfiddle.net/VFWBN/1/)

# ruby-on-rails - RoR：同一模型中的 has_one 和 has_many 参考？

> ID：13994892
> 
> 赞同：2
> 
> 时间：2012-12-21T17:51:49.763
> 
> 标签：ruby-on-rails, associations, has-many-through

假设我有一个名为 Device 的模型，以及另一个名为 Firmware 的模型（其中包含固件版本号和其他信息）。我想跟踪设备上安装的固件版本的历史记录，还想参考当前版本（可能是也可能不是最新的日期）。

如何设置我的关联，以便我可以指向一种特定的固件配置（当前）以及几种不同的固件配置（历史）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T18:06:09.900

将`device_current_id`整数列添加到固件表，然后：

```
class Device < ActiveRecord::Base
  ...
  has_one :current_firmware, class_name: "Firmware", foreign_key: "device_current_id"
  has_many :firmwares
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T17:58:20.837

在你的协会中使用`:class_name`，如......

设备型号

```
has_one :current_firmware, class_name :firmware
has_many :old_firmwares, class_name :firmware 
```

# html - 无法弄清楚为什么我的 css 的一部分没有正确显示

> ID：13994893
> 
> 赞同：0
> 
> 时间：2012-12-21T17:52:04.860
> 
> 标签：html, css

我正在建立一个站点，并且一直在我的 CSS 中使用“背景颜色”标签来调试每个块（部分）所在的位置。我的“#mainContent”部分遇到了一些问题，无法弄清楚为什么背景颜色（用于调试）没有出现。

这是整个页面代码的 JSFIDDLE 链接：http: [//jsfiddle.net/JGAd6/](http://jsfiddle.net/JGAd6/)

这是与该部分相关的代码：

-- HTML --

```
<div id="mainContentWrapper">

    <div id="mainContent">

        <div id="services">

            <div class="serviceNavLink"><a href="#">Marketing Strategy</a>
                <p>Qui tonx helvetica master cleanse, odd future cupidatat raw 
                denim fugiat et intelligentsia quis semiotics quinoa. Gentrify pork belly consequat synth. Portland ethical salvia, ex sunt mustache flexitarian art party wayfarers. Tousled ennui scenester, nostrud brunch banjo raw denim pug pour-over. Nesciunt synth mlkshk keytar, skateboard fashion axe reprehenderit umami pug bespoke.</p>
            </div>
            <div class="serviceNavLink"><a href="#">Outsourced Marketing</a>
                <p>Qui tonx helvetica master cleanse, odd future cupidatat raw denim 
                fugiat et intelligentsia quis semiotics quinoa. Gentrify pork belly consequat synth. Portland ethical salvia, ex sunt mustache flexitarian art party wayfarers. Tousled ennui scenester, nostrud brunch banjo raw denim pug pour-over. Nesciunt synth mlkshk keytar, skateboard fashion axe reprehenderit umami pug bespoke.</p>
            </div>
            <div class="serviceNavLink"><a href="#">Market Research</a>
                <p>Qui tonx helvetica master cleanse, odd future cupidatat raw 
                denim fugiat et intelligentsia quis semiotics quinoa. Gentrify pork belly consequat synth. Portland ethical salvia, ex sunt mustache flexitarian art party wayfarers. Tousled ennui scenester, nostrud brunch banjo raw denim pug pour-over. Nesciunt synth mlkshk keytar, skateboard fashion axe reprehenderit umami pug bespoke.</p>          
            </div>

        </div>

    </div>  

</div> 
```

-- CSS --

```
#headerWrapper, #topContentWrapper, #mainContentWrapper, #footerWrapper {
width:100%;
clear:both;
}

#headerContent, #topContent, #mainContent, #footerContent {
width:955px;
margin-left: auto;
margin-right: auto;

padding-right: 1em;
padding-left: 1em;
}

#mainContentWrapper {
border:1px solid #000; /* DEBUG ONLY */
background-color: #61e9a1; /* DEBUG ONLY */
}

#mainContent {
font-size: 1.2em;
background-color:ff0000; /* DEBUG ONLY */
line-height: 1.6em;

padding-top: 1em;
padding-bottom: 1em;
}

#services a:hover {
color: #000;
}

#services p {
width:200px;
font-size: 14px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:56:16.550

我想你错过了#？

`background-color:#ff0000; /* DEBUG ONLY */`

[http://jsfiddle.net/JGAd6/1/](http://jsfiddle.net/JGAd6/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:59:28.293

如果您指的是没有出现红色背景，则需要将 CSS 更改为：

```
#mainContent {
font-size: 1.2em;
background-color:#ff0000; /* DEBUG ONLY */
line-height: 1.6em;
overflow:auto;
padding-top: 1em;
padding-bottom: 1em;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/JGAd6/2/)**

我添加了一条规则并为您的背景颜色声明`overflow:auto`插入了一个缺失值。`#`

# javascript - jQuery UI 对话框不出现

> ID：13994896
> 
> 赞同：2
> 
> 时间：2012-12-21T17:52:19.803
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我几乎完全是 JavaScript 和 jQuery 的菜鸟，我无法让基本的对话框正常工作。这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        var dialog = $("#dialog");

        dialog.dialog({
            title: "Dialog",
            modal: true,
            draggable: false,
            resizable: false,
            autoOpen: false,
            width: 500,
            height: 400
        });

        dialog.hide();
    });

    function showDialog() {
        $("#dialog").dialog("open");
    }

    $("ui-widget-overlay").click(function() {
        $(".ui-dialog-titlebar-close").trigger("click");
    });
</script>

<div id="dialog">
    Dialog text.
</div>

<button onclick="showDialog()">Show Dialog</button> 
```

当我点击按钮时，对话框的标题栏出现并且页面的背景变暗，但是有两个问题：

1.  对话框的主体不显示（只显示标题栏）
2.  当我在对话框外部单击时，对话框不会关闭。我必须单击角落的“x”才能关闭对话框。

我一直在这里阅读大量相关问题，但我尝试的任何方法似乎都不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:58:24.323

我相信您遇到的问题来自这一行：

```
dialog.hide(); 
```

我的建议是从对话框 div 中删除所有对话框内容，并在实际显示对话框时填充它。

```
<div id="dialog"></div>

function showDialog()
{
    $("#dialog").html("Dialog Text.");
    $("#dialog").dialog("open");
} 
```

至于处理关闭部分，您是否尝试过将主页中的所有内容嵌套在`<div>`自己的 a 中，然后处理该单击事件？

```
<div id="mainPageDiv">
</div>

$("#mainPageDiv").click(function(){
    $("#dialog").dialog("close");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:35:02.170

只需使用模态对话框并在他们单击覆盖时关闭对话框。此外，您不需要为此添加任何代码`$(document).ready`。

```
function showDialog() {
    var dialog = $("#dialog");

    dialog.dialog({
        title: "Dialog",
        modal: true,
        open: function () { 
            $('.ui-widget-overlay').bind('click', function () {
                dialog.dialog('close'); 
            });
        }
    });
} 
```

[示范](http://jsfiddle.net/3mDLZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:29:31.157

我看到你的：

```
$("ui-widget-overlay").click( 
```

也许应该选择一个类：

```
$(".ui-widget-overlay").click( 
```

这不会发生，因为它不存在，因此您需要将其挂钩到文档。

并且`dialog.hide();`不需要，因为它在成为对话框时会自动隐藏

所以你应该有：

```
 $(document).on('click',".ui-widget-overlay", function() {
        $(".ui-dialog-titlebar-close").trigger("click");
  }); 
```

更简单：（如果您没有其他对话框需要以这种方式处理）

```
$(document).on('click',".ui-widget-overlay", function() {
   $("#dialog").dialog("close");
}); 
```

示例小提琴显示完整的返工代码：http: [//jsfiddle.net/GrFE3/2/](http://jsfiddle.net/GrFE3/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T18:51:11.817

我将此添加为附加答案，因为它以不同的方式处理此问题，更改标记，删除标记中的内联事件处理程序，使用您的按钮并使用您的对话框变量（与您不同，但是...

```
<div id="dialog">
    Dialog text.
</div>

<button id="showDialog">Show Dialog</button> 
```

以及该标记的代码：

```
$(document).ready(function() {
    var dialog = $("#dialog");
    dialog.dialog({
        title: "Dialog",
        modal: true,
        draggable: false,
        resizable: false,
        autoOpen: false,
        width: 500,
        height: 400
    });
    $('#showDialog').click(function() {
        dialog.dialog("open");
    });
    $(document).on('click', ".ui-widget-overlay", function() {
        dialog.dialog("close");
    });
}); 
```

# c++ - 如何让 QLabel 扩展到全宽？

> ID：13994902
> 
> 赞同：11
> 
> 时间：2012-12-21T17:53:01.913
> 
> 标签：c++, qt

无论内容如何，​​我都希望`QLabel`扩展到容器的全宽。（我想要这个，因为我动态设置文本并稍后添加小部件，这会导致它切断部分文本）

```
Widget::Widget(QWidget *parent)
    : QWidget(parent)
{
    this->setFixedSize(100,100);
    QHBoxLayout *layout = new QHBoxLayout;
    this->setLayout(layout);
    QLabel *label = new QLabel;
    label->setStyleSheet("background-color:blue");
    label->setSizePolicy(QSizePolicy::MinimumExpanding, 
                         QSizePolicy::MinimumExpanding);
    label->setText(tr("test"));
    layout->addWidget(label, 0, Qt::AlignTop | Qt::AlignLeft);
}
```

这段代码显示蓝色框没有扩展到整个宽度，为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T19:58:20.357

您必须设置：

```
layout->setContentsMargins(0,0,0,0); 
```

默认情况下，每个 QWidget 或 QFrame 在每个方向上添加 15 个像素的边距。

主要问题是在将小部件添加到布局时设置对齐方式。改为使用`label->setAlignment`。

```
layout->addWidget(label); 
```

我编译了您的代码，它适用于这些更改。

这是最小的示例：

```
#include <QApplication>
#include <QtGui>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QWidget* w = new QWidget;
    w->setFixedSize(100,100);
    QHBoxLayout* layout = new QHBoxLayout;
    layout->setContentsMargins(0,0,0,0);
    w->setLayout(layout);
    QLabel* label = new QLabel;
    label->setAlignment(Qt::AlignTop | Qt::AlignLeft);
    label->setContentsMargins(0,0,0,0);
    label->setStyleSheet("background-color:blue");
    label->setSizePolicy(QSizePolicy::MinimumExpanding,
                     QSizePolicy::MinimumExpanding);
    label->setText("test");
    layout->addWidget(label);
    w->show();
    return a.exec();
} 
```

# c# - 取消阻止特定网站

> ID：13994904
> 
> 赞同：-1
> 
> 时间：2012-12-21T17:53:09.883
> 
> 标签：c#, hosts

在 C# 中使用 hostfile 我可以阻止网站，但我无法取消阻止它们。

```
String path = @"C:\Windows\System32\drivers\etc\hosts";
StreamWriter sw = new StreamWriter(path, true);
sitetoblock = "\r\n127.0.0.1\t" + txtException.Text;
sw.Write(sitetoblock);
sw.Close();

MessageBox.Show(txtException.Text + " is blocked", "BLOCKED");
lbWebsites.Items.Add(txtException.Text);
txtException.Clear(); 
```

在这里，我需要一些帮助来取消阻止从列表框（lbWebsites）中选择的特定站点。有没有办法从主机文件中删除它们？我尝试了很多并查看了其他解决方案，但每个解决方案都出现了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:57:22.920

您需要删除您为阻止该站点而编写的行。最有效的方法是读入hosts文件，然后再写。

顺便说一句，您阻止网站的方法不会非常有效。对于您的使用场景可能没问题，但稍微有点技术含量的人会知道查看 hosts 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:01:21.347

您可以使用 a`StreamReader`将 hosts 文件读入`string`. 然后，初始化 a 的新实例`StreamWriter`以写入收集回来的内容，不包括您要取消阻止的网站。

**例子**

```
string websiteToUnblock = "example.com"; //Initialize a new string of name websiteToUnblock as example.com
StreamReader myReader = new StreamReader(@"C:\Windows\System32\drivers\etc\hosts"); //Initialize a new instance of StreamReader of name myReader to read the hosts file
string myString = myReader.ReadToEnd().Replace(websiteToUnblock, ""); //Replace example.com from the content of the hosts file with an empty string
myReader.Close(); //Close the StreamReader

StreamWriter myWriter = new StreamWriter(@"C:\Windows\System32\drivers\etc\hosts"); //Initialize a new instance of StreamWriter to write to the hosts file; append is set to false as we will overwrite the file with myString
myWriter.Write(myString); //Write myString to the file
myWriter.Close(); //Close the StreamWriter 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:10:08.373

你可以这样做：

```
String path = @"C:\Windows\System32\drivers\etc\hosts";
System.IO.TextReader reader = new StreamReader(path);
List<String> lines = new List<String>();
while((String line = reader.ReadLine()) != null)
    lines.Add(line); 
```

然后你的主机文件的所有行都在行列表中。之后，您可以搜索要取消阻止的站点并将其从列表中删除，直到所需的站点不再在列表中：

```
int index = 0;
while(index != -1)
{
    index = -1;
    for(int i = 0; i< lines.Count(); i++)
    {
        if(lines[i].Contains(sitetounblock))
        {
            index = i;
            break;
        }
    }
    if(index != -1)
        lines.RemoveAt(i);
} 
```

完成后，只需将清理后的列表转换为普通字符串：

```
String content = "";
foreach(String line in lines)
{
    content += line + Environment.NewLine;
} 
```

然后只需将内容写入文件；）

写在我的脑海里，所以不能保证没有错误：P

# c - 在 C (gcc) 代码中出现 SIGABRT 错误

> ID：13994905
> 
> 赞同：-1
> 
> 时间：2012-12-21T17:53:16.030
> 
> 标签：c

我用 C 编写了这段代码，它适用于小输入和我能想到的所有测试用例。但是当一个大文件作为输入时，它会给出 SIGABRT 错误。有人可以解释一下原因吗？

```
#include<stdio.h>
#include<string.h>

void q_sort(char **numbers, int left, int right)
{
    int  l_hold, r_hold,temp;  
    char *pivot;

    l_hold = left;
    r_hold = right;
    pivot = numbers[left];

    while (left < right)
    {
        while (strcmp(numbers[right],pivot)>=0 && (left < right))
            right--;

        if (left != right)
        {
            numbers[left] = numbers[right];
            left++;
        }

        while (strcmp(numbers[left],pivot)<0 && (left < right))
            left++;

        if (left != right)
        {
            numbers[right] = numbers[left];
            right--;
        }
    }

    numbers[left] = pivot;
    temp = left;
    left = l_hold;
    right = r_hold;

    if (left < temp)
        q_sort(numbers, left, temp-1);

    if (right > temp)
        q_sort(numbers, temp+1, right);
}

int main()
{   
    int x,y,i,j;
    int *arr;
    char **str;
    int *count;
    while(1)
    {
        scanf("%d%d",&x,&y);
        if(x==0 && y==0)break;
        str =(char **)malloc(sizeof(char *)*x);
        count=(int*)malloc(sizeof(int)*x);
        i=0;
        while(i<x)
        {
            str[i]=(char *)malloc(sizeof(char)*y);
            scanf("%s",str[i]);
            i++;
        }
        //sizeof(str)/sizeof(*str)
        q_sort(str,0,x-1);// sizeof(str) / sizeof(char *), sizeof(char *),cmp);
        i=0;
        j=0;
        arr=(int *)malloc(sizeof(int)*x);
        while(i<x)
        {
            arr[j]=1;
            while(i<x-1 && strcmp(str[i],str[i+1])==0)
            {
                i++;
                arr[j]+=1;
            }
            j++;
            i++;
        }

        for(i=0;i<x;i++)
        {
            count[i]=0;
        }
        i=0;
        while(i<j)
        {
            count[arr[i]-1]++;
            i++;
        }
        for(i=0;i<x;i++)
        {
            printf("%d\n",count[i]);
        }
        free(count);
        free(arr);
        for(i=0;i<x;i++)
            free(str[i]);
        free(str);

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:07:00.107

给定一个数据文件：

```
20 20
absinthe000001
absinthe000002
...
absinthe000020 
```

Valgrind 警告（反复）：

```
==27941== Conditional jump or move depends on uninitialised value(s)
==27941==    at 0xCB9A: strcmp (mc_replace_strmem.c:721)
==27941==    by 0x100000AAB: q_sort (qs.c:16)
==27941== 
```

我还得到大量包含 1 或 0 的行。

你的下标已经失控了。将下标打印添加到您的快速排序例程中，以查看发生了什么问题。在您读取数据后添加打印，以确保您的数据是您认为应该的。

你说：

> 它适用于小输入和我能想到的所有测试用例

当我尝试：

```
0 20 
```

作为输入，它行为不端：

```
==28056== 
==28056== Invalid read of size 8
==28056==    at 0x100000A63: q_sort (qs.c:12)
==28056==  Address 0x100006160 is 0 bytes after a block of size 0 alloc'd
==28056==    at 0xB823: malloc (vg_replace_malloc.c:266)
==28056==    by 0x100000BB7: main (qs.c:57)
==28056== 
```

当我尝试：

```
1 20
absinthe000001 
```

我打印了一长串 1。当我尝试：

```
2 20
absinthe000001
absinthe000002 
```

我得到一长串交替的 0 和 1。坦率地说，我认为你没有尝试过很多案例。排序代码需要能够正确处理 0、1、2 行。

当然，问题的一部分是你有一个`while (1)`循环，然后你不检查你的`scanf()`电话。

```
while(1)
{
    scanf("%d%d",&x,&y); 
```

测试错误！

```
while (1)
{
    if (scanf("%d%d", &x, &y) != 2)
        break; 
```

不要使用`scanf()`; 新手程序员很难正确使用。我只用 C 语言编程了 25 年。我不使用`scanf()`except 来回答使用它的 SO 问题。我`fgets()`用来读取行并`sscanf()`解析它们；正确处理要简单得多，并且您可以从中获得更好的错误报告（因为您可以报告整个错误行，而不仅仅是在`scanf()`损坏它之后剩下的内容）。

```
char buffer[4096];

while (fgets(buffer, sizeof(buffer), stdin) != 0)
{
    if (sscanf(buffer, "%d%d", &x, &y) != 2)
        break;
    str = (char **)malloc(sizeof(char *)*x);
    count = (int*)malloc(sizeof(int)*x);
    for (i = 0; i < x; i++)
    {
        if (fgets(buffer, sizeof(buffer), stdin) != 0)
            break;
        str[i] = (char *)malloc(sizeof(char)*y);
        if (sscanf(buffer, "%s", str[i]) != 1)
            break;
    } 
```

您应该检查`malloc()`调用结果；如果他们失败了，你会得到一个分段违规或类似的东西。可以说，您应该创建一个格式字符串，以防止在将数据读入`str[i]`.

# javascript - Javascript定时器延迟

> ID：13994910
> 
> 赞同：2
> 
> 时间：2012-12-21T17:53:56.877
> 
> 标签：javascript, timer, html5-canvas, delay

我决定尝试使用 HTML5 的画布，当然这意味着我将尝试编写一个乒乓球游戏。目前，我正试图弄清楚如何限制我的帧速率。这在其他语言中相当容易，但在 Javascript 中找到一种延迟执行的方法似乎有点困难。

这是我到目前为止所拥有的：

```
while(true) {
    var begin = (new Date()).getTime();

    //Draw stuff to the canvas

    var end = (new Date()).getTime();
    if ((end-begin) < 33.333 ) {
        //delay (1000/(30-(end-begin)))
    }
} 
```

显然，由于每个 javascript 引擎的执行方式，帧速率会大不相同，但我想将最大帧速率限制在 30FPS。我真的不明白 setTimeout() 将如何完成这项任务。最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T17:56:51.793

JavaScript中没有`delay`/ `wait`。您可以使用函数[`window.setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)，例如在经过一定时间后调用函数，例如：

```
window.setTimeout(function() {
    // do something interesting
}, 2000 /* but after 2000 ms */); 
```

或者说你想每 33 ms (~30 fps) 绘制一帧，你可以这样编码：

```
window.setInterval(function() {
    // paint my frame 
}, 33); 
```

# php - 为什么这两个计数返回相同的数字？

> ID：13994911
> 
> 赞同：2
> 
> 时间：2012-12-21T17:54:03.293
> 
> 标签：php, postgresql, count

```
$SQL = "SELECT pc.dist_id, pc.route, pc.types,
        COUNT( pc.types = '$type' ) total,
        COUNT( pc.types = '$type' AND pc.options = '1') callbacks

        FROM per_call pc
        WHERE pc.types = '$type'
        GROUP BY pc.dist_id, pc.route, pc.types
        ORDER BY pc.dist_id, pc.route"; 
```

简而言之，我想我是在问 COUNT 如何与 () 中的多个列一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:57:33.147

`Count`也可以：

```
SELECT pc.dist_id, pc.route, pc.types,
COUNT( CASE WHEN pc.types = '$type' THEN 1 END) total,
COUNT( CASE WHEN pc.types = '$type' AND pc.options = '1' THEN 1 END) callbacks

FROM per_call pc
WHERE pc.types = '$type'
GROUP BY pc.dist_id, pc.route, pc.types
ORDER BY pc.dist_id, pc.route 
```

注意：它之所以有效，是因为`COUNT`返回非 NULL 值的数量，并且`CASE`具有默认值`ELSE NULL`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T06:27:51.517

另一个稍短的变体（性能与`CASE`语句大致相同）：

```
SELECT pc.dist_id, pc.route, pc.types
      ,COUNT(NULLIF(pc.types = '$type', FALSE) AS total
      ,COUNT(NULLIF(pc.types = '$type' AND pc.options = '1', FALSE) AS callbacks
FROM   per_call pc
WHERE  pc.types = '$type'
GROUP  BY pc.dist_id, pc.route, pc.types
ORDER  BY pc.dist_id, pc.route; 
```

它背后的原理是： `COUNT`计算所有非空值。
表达式产生一个布尔值，它可以是`TRUE`,`FALSE`或`NULL`。
您只想计算`TRUE`案件。
所以转换`FALSE`为`NULL`，一切都很时髦。

或者，甚至更短，但不是更快：

```
SELECT pc.dist_id, pc.route, pc.types
      ,sum((pc.types = '$type')::int) AS total
      ,sum((pc.types = '$type' AND pc.options = '1')::int) AS callbacks
FROM   per_call pc
WHERE  pc.types = '$type'
GROUP  BY pc.dist_id, pc.route, pc.types
ORDER  BY pc.dist_id, pc.route; 
```

强制`boolean`转换为 1，转换`integer`为0。因此，有效。`TRUE``FALSE``sum()`

既然你有`pc.types = '$type'`as`WHERE`条件，你可以简化为：

```
SELECT pc.dist_id, pc.route, pc.types
      ,COUNT(*) AS total  -- slightly faster, too
      ,COUNT(NULLIF(pc.options = '1', FALSE) AS callbacks
FROM   per_call pc
WHERE  pc.types = '$type'
GROUP  BY pc.dist_id, pc.route, pc.types
ORDER  BY pc.dist_id, pc.route; 
```

# java - 如何获取用户输入的数字并分配给字节

> ID：13994915
> 
> 赞同：1
> 
> 时间：2012-12-21T17:54:22.370
> 
> 标签：java, android

我有一个用于更新值的用户输入对话框。

`byte valScoreAway = 0;`

valScoreAway 的值显示在屏幕上：

`tvScoreAway.setText( valScoreAway );`

这完美地工作。

在程序期间，当单击 TextView tvScoreAway 时，分数将增加。这完美地工作。

如果有错误，我有它，以便 onLongClickListerner() 将使用编辑字段填充对话框。用户将在 EditView 中输入正确的值，然后单击 OK。单击确定按钮时，我试图将用户输入的值分配给 valScoreAway 但它失败了，因为 valScoreAway 是一种`byte`类型并且`userInput.getText()`正在返回一个字符串。

基本上，我需要将值转换为`userInput.getText()`字节类型。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T17:56:15.503

```
Byte.parseByte(userInput.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:05:18.060

您可以将编辑文本输入转换为字节类型。通过使用以下方式：

```
String example = userInput.getText().toString();
example.getBytes(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T18:17:00.290

```
userInput.getText().toString().getBytes(); 
```

//将字符串转换为字节

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T17:57:22.637

你为什么不使用`Integer.parseInt(userInput.getText())`？请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html)

# javascript - 使用 AJAX 加载的 Javascript 和 MVC4 部分视图

> ID：13994923
> 
> 赞同：7
> 
> 时间：2012-12-21T17:54:41.573
> 
> 标签：javascript, debugging, jquery, asp.net-mvc-4, partial-views

`<div>`我有一个 ASP.NET MVC 4 视图，它通过 JQuery AJAX 调用将两个嵌套的部分动态加载到元素中。每个部分都有自己的一大堆 Javascript。为了让这一切正常工作，我目前在`success`每个 AJAX 调用中都有所有的 Javascript：

```
function LoadPartial(someImportantId) {
    $.ajax({
        url: '@Url.Action("LoadThePartial")' + '?id=' + someImportantId,
        type: 'POST',
        async: false,
        success: function (result) {
            $("#partialContainerDiv").html(result);
            //here there be great piles of javascript
        }
    });
} 
```

由于其中有两个部分，每个都需要数百行 Javascript，因此主视图文件变得难以管理。我很想将所有这些脚本代码放入一个单独的 .js 文件中，但我对 Javascript 还很陌生，我严重依赖 Chrome 的脚本调试工具，而且我无法弄清楚如何（以及是否）我可以加载这个脚本文件。我试过了：

*   将脚本包含添加到部分文件中。在这种情况下，partial 的 Javascript 仍然不会在运行时加载，并且[显然在局部视图中包含 include 无论如何都不是一个好主意](https://stackoverflow.com/a/6901351/27457)。

![调试器中没有脚本](../Images/1e72841686fbba7cb3ce47c7b138132f.png)

*   将脚本包括添加到主视图。这行不通。部分的 Javascript 都没有正确附加，这在同步级别上是有意义的。

![东西不起作用](../Images/ec1d909b04d2a64bef8da832d728f692.png)

有什么方法可以让我为 AJAX 加载的部分创建一个单独的 Javascript 文件，并且仍然能够在客户端上调试该部分？更重要的是，我将所有这些用于 AJAX 加载的部分视图的 Javascript 放在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T16:42:09.037

将您的部分脚本包装在主页中包含的函数中；在 AJAX 成功处理程序中调用该函数，在您的部分加载后执行脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-06T15:36:20.060

现在有一个解决方案可以将您的动态 JS 代码放入主要浏览器的 Sources 树视图中，这就是使其可调试所需的全部内容。添加：

```
//# sourceURL=YOUR_FILENAME_OR_FULL_PATH_HERE 
```

`<script>`动态加载的局部视图中标签内的任何位置。在我的实验中，# 后面的空格似乎在 Chrome 中是必需的，而不是在 Firefox 中，这基本上意味着它是必需的。

来源：[https](https://developers.google.com/web/updates/2013/06/sourceMappingURL-and-sourceURL-syntax-changed) ://developers.google.com/web/updates/2013/06/sourceMappingURL-and-sourceURL-syntax-changed和其他几个 Stack Overflow 问题

# apache-flex - Flex mxml 自定义组件 - 如何添加 uicomponents？

> ID：13994928
> 
> 赞同：2
> 
> 时间：2012-12-21T17:54:57.583
> 
> 标签：apache-flex, mxml, custom-component

如何将 uicomponent 传递给 mxml 自定义组件？
例如：我想传入任意数量的按钮，并且我希望我的自定义组件以特定顺序排列它们。

MainApp.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           minWidth="955" minHeight="600" xmlns:local="*"
           >

<local:myComp >
   <s:Button label='Button1' />
   <s:Button label='Button2' />
   <!--I want to add anything else here -->
</local:myComp> 
```

myComp.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
     xmlns:s="library://ns.adobe.com/flex/spark"
     xmlns:mx="library://ns.adobe.com/flex/mx"
     creationComplete="init()"
     width="400" height="300"
     >

<fx:Script>
    <![CDATA[
        private function init():void {
        // how do I access the added components and place them where I want?
        // do I use removeChildren and AddChildren?
        // addItemsHere.addchild(nextButton);
    ]]>
</fx:Script>

<s:HGroup id='addItemsHere' /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:21:10.227

当你的组件扩展`Group`时，你应该使用`addElement`代替`addChild`（并且对于所有其他名称中带有'child'的方法，它应该替换为'element'。因此，对所有元素的访问将是这样的：

```
for(var i:int =0; i < numElements; i++){
   var button:Button = Button(getElementAt(i));
   doWhatIWantWithMyButton(button);
} 
```

`createChildren`如果您知道在创建时要添加什么，最好覆盖组件的方法。

如果您不需要非常具体的按钮放置，您可以将`layout`组件的属性设置为任何所需的布局（例如 VerticalLayout），并且这些布局是可调的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T22:13:25.490

您似乎正在尝试重新创建 SDK 中已经存在的功能。这是[SkinnableContainer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/SkinnableContainer.html)的用途。
根据您的用例，有两种使用方法：

**您只需要为您的自定义组件添加一些自定义图形元素，而不需要额外的行为**

在这种情况下，您可以简单地重用 SkinnableContainer 并为其分配自定义外观，如下所示：

```
<s:SkinnableContainer skinClass="MySkin">
    <s:Button label='Button1' />
    <s:Button label='Button2' />
</s:SkinnableContainer> 
```

使用 MySkin.mxml 可能类似于：

```
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark">

    <fx:Metadata>
        [HostComponent("spark.components.SkinnableContainer")]
    </fx:Metadata> 

    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
    </s:states>

    <s:layout>
         <s:VerticalLayout/>
    </s:layout>

    <s:Label text="I'm a SkinnableContainer"/>

    <s:Group id="contentGroup" width="100%" height="100%">

 </s:SkinnableContainer> 
```

您的按钮现在将自动添加到`contentGroup`; SkinnableContainer 类会为您处理这个问题。请注意，该组**必须**具有该 id；这是必需的 SkinPart。

**你想为你的组件添加一些行为**

该过程是相同的，但您现在将子类化 SkinnableContainer（这通常在纯 ActionScript 中完成），在其中编写一些行为，并将外观分配给此类的实例。

```
public class MyComp extends SkinnableContainer {
    //additional behaviour goes here
} 
```

用法：

```
<local:MyComp skinClass="MySkin">
    <s:Button label='Button1' />
    <s:Button label='Button2' />
</local:MyComp> 
```

# mysql - 索引在 MySQL 中是如何工作的？

> ID：13994937
> 
> 赞同：0
> 
> 时间：2012-12-21T17:55:33.943
> 
> 标签：mysql, indexing

通过查看以下 SO 链接，我找到了很多关于 MySQL 中索引如何工作的信息：[MySQL 索引如何工作？](https://stackoverflow.com/questions/3567981/how-do-mysql-indexes-work)但是，我面临一个`mysql`我无法解决的问题，我不确定它是否与索引有关。

问题是：我在大多数表中都使用了多个索引，而且一切似乎都运行良好。但是，当我将旧的备份数据恢复到现有数据时，数据库的大小不断变大（每次几乎翻倍）。

`DB1`示例：我上周使用了一个名为 mysql 的数据库，我做了一个备份并继续使用`DB1`. 几天后，我需要从那个备份数据库继续，所以我将它恢复到`DB1`.

恢复前`DB1`是大小`115MB`，后来突然变大了`350MB`。

任何人都可以帮助阐明可能发生的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:05:57.940

这并不奇怪。如果您有很多索引，它们占用与数据本身一样多的空间并不罕见。

不过，当您谈论 115MB 与 350MB 时，我猜您获得的查询速度的提高可能值得额外的几百兆磁盘空间。如果没有，那么您可能需要仔细查看您的索引并确保它们实际上都提供了一些好处。

# xml - 如何在 GAE 上使用 jinja 生成 xml 文件？

> ID：13994946
> 
> 赞同：2
> 
> 时间：2012-12-21T17:56:37.580
> 
> 标签：xml, google-app-engine, jinja2

我知道如何使用`jinja2`生成 html 页面作为对 GAE 上的 url 的响应（[https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates](https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates)）。

我需要用来`jinja2`创建一个实际的 xml 文件并将其保存在我的服务器上。

有人使用名为的工具的示例`util`位于[http://blog.notdot.net/2009/10/Blogging-on-App-engine-part-9-Sitemaps-and-review](http://blog.notdot.net/2009/10/Blogging-on-App-engine-part-9-Sitemaps-and-review)或[https://github.com/ Arachnid/bloggart/blob/part9/static.py](https://github.com/Arachnid/bloggart/blob/part9/static.py)（第 47 行）。

UTIL 示例的片段（没关系他正在创建站点地图）：

```
rendered = utils.render_template('sitemap.xml', {'paths': paths})
set('/sitemap.xml', rendered, 'application/xml', False) 
```

可以`Jinja2`做这样的事情吗？

我尝试了很多事情，包括以下内容：

```
data = jinja_environment.get_template('for_xml.html')
fo = open("/myfile.xml","w+")
fo.write(data)
fo.close() 
```

到目前为止，无论我使用`w+`还是`wb`收到错误：

```
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 632, in __init__
raise IOError('invalid mode: %s' % mode)
IOError: invalid mode: w+ 
```

当我`set`在`UTIL`示例中使用时，它说`set`需要 1 个参数而不是 4 个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:08:58.793

Google 应用引擎沙盒不允许您写入文件系统。- 看看[这里](https://developers.google.com/appengine/docs/whatisgoogleappengine?hl=en)*的沙盒*部分。

您引用的站点地图示例将创建对客户端的 XML 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:54:47.727

您不能将文件写入 GAE 服务器，但是可以将文件写入[blobstore](https://developers.google.com/appengine/docs/python/blobstore)或[Cloud Storage](https://developers.google.com/appengine/docs/python/googlestorage/)。请参阅 api，因为它们提供了一些类似 File 的对象来写入。

ps：使用 set 时会出现错误，因为它指的是用户定义的函数，我猜在您的代码中您没有包含该定义，因此您实际上是在使用 set 构造函数，它只接受一个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:52:36.193

当您需要动态站点地图时，为什么不即时创建它。第二：使用 Jinja2，您还可以使用 XML 模板 = 读取 XML 模板，而不仅仅是 html。

结论：创建一个非静态处理程序，用于动态创建“sitemap.xml”，jinja 将呈现您的 sitemap.xml 结果。

# java - Java中静态块的必要性

> ID：13994950
> 
> 赞同：56
> 
> 时间：2012-12-21T17:56:57.390
> 
> 标签：java, static, initialization

我发现在Java中，有一个特性叫做`static block`，它包含了在类第一次加载时执行的代码（我不明白“加载”是什么意思，是不是已经初始化了？）。是否有任何理由在静态块内而不是在构造函数中进行初始化位？我的意思是，即使是构造函数也做同样的事情，在类第一次初始化时做所有必要的事情。静态块有什么构造函数不能完成的吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-21T18:05:36.067

我首先想从您的问题中强调一件事：

> 构造函数做同样的事情，当一个类第一次初始化时做所有必要的事情

这是不正确的。创建类的*实例*时，构造函数会执行所有必要的初始化。当类本身首次加载到内存并初始化时，不会执行任何构造函数（除非该类的实例恰好是作为类初始化的一部分创建的）。这种混淆（在初始化类和初始化类的实例之间）可能是您质疑`static`块的实用性的原因。

如果一个类具有需要复杂初始化的静态成员，`static`则可以使用块。假设您需要某种静态地图（此处的目的无关紧要）。您可以像这样内联声明它：

```
public static final Map<String, String> initials = new HashMap<String, String>(); 
```

但是，如果您想填充一次，则不能使用内联声明来执行此操作。为此，您需要一个`static`块：

```
public static final Map<String, String> initials = new HashMap<String, String>();
static {
    initials.put("AEN", "Alfred E. Newman");
    // etc.
} 
```

如果您想更具保护性，可以这样做：

```
public static final Map<String, String> initials;
static {
    Map<String, String> map = new HashMap<String, String>()
    map.put("AEN", "Alfred E. Newman");
    // etc.
    initials = Collections.unmodifiableMap(map);
} 
```

请注意，您不能将`initials`in-line 初始化为不可修改的地图，因为那样您就无法填充它！您也不能在构造函数中执行此操作，因为只需调用其中一种修改方法（`put`等）就会产生异常。

公平地说，这不是您问题的完整答案。该`static`块仍然可以通过使用私有静态函数来消除：

```
public static final Map<String, String> initials = makeInitials();

private static Map<String, String> makeInitials() {
    Map<String, String> map = new HashMap<String, String>()
    map.put("AEN", "Alfred E. Newman");
    // etc.
    return Collections.unmodifiableMap(map);
} 
```

但是请注意，这并不是`static`像您建议的那样用构造函数中的代码替换块！`static`此外，如果您需要以相互关联的方式初始化多个字段，这将不起作用。

一个`static`块很难替换的情况是一个“主”类，它需要只初始化其他几个类一次。

```
public class Master {
    static {
        SlaveClass1.init();
        SlaveClass2.init(SlaveClass1.someInitializedValue);
        // etc.
    }
} 
```

特别是如果您不想将任何依赖硬连接到`SlaveClass2`on 中`SlaveClass1`，则需要某种类似这样的主代码。这种东西绝对不属于构造函数。

请注意，还有一个称为*实例初始化程序块*的东西。它是在创建每个实例时运行的匿名代码块。（语法就像一个`static`块，但没有`static`关键字。）它对匿名类特别有用，因为它们不能有命名的构造函数。这是一个真实的例子。由于（深不可测）`GZIPOutputStream`没有构造函数或任何可用于指定压缩级别的 api 调用，并且默认压缩级别为无，因此您需要子类化`GZIPOutputStream`以获得任何压缩。你总是可以写一个显式的子类，但是写一个匿名类会更方便：

```
OutputStream os = . . .;
OutputStream gzos = new GZIPOutputStream(os) {
    {
        // def is an inherited, protected field that does the actual compression
        def = new Deflator(9, true); // maximum compression, no ZLIB header
    }
}; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-21T17:58:52.407

在创建类的实例时调用构造函数。

当类加载器加载这个类定义时调用静态块，以便我们可以初始化这个类的静态成员。我们不应该从构造函数初始化静态成员，因为它们是类定义的一部分而不是对象

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-21T19:39:56.370

如果我们初始化一个类，静态初始化程序将运行，这不需要我们实例化一个类。但是只有当我们创建一个类的实例时，构造函数才会运行。

例如：

```
class MyClass
{   
    static
    {
        System.out.println("I am static initializer");
    }
    MyClass()
    {
        System.out.println("I am constructor");
    }

    static void staticMethod()
    {
        System.out.println("I am static method");
    }
} 
```

如果我们运行：

```
MyClass.staticMethod(); 
```

输出：

```
I am static initializer
I am static method 
```

我们从未创建实例，因此不会调用构造函数，而是调用静态初始化程序。

如果我们创建一个类的实例，静态初始化程序和构造函数都会运行。没有惊喜。

```
MyClass x = new MyClass(); 
```

输出：

```
I am static initializer
I am constructor 
```

请注意，如果我们运行：

```
MyClass x; 
```

输出：（空）

声明变量`x`不需要`MyClass`初始化，因此静态初始化程序不会运行。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-21T17:58:41.680

静态初始化程序在加载类时运行，即使您从未创建过该类型的任何对象。

*   并非所有类都需要实例化。构造函数可能永远不会被调用。它甚至可能是私人的。
*   您可能希望在运行构造函数之前访问类的静态字段。
*   静态初始化程序仅在加载类时运行一次。为您实例化的该类型的每个对象调用构造函数。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-21T17:58:32.873

您不能使用构造函数初始化静态变量——或者至少您可能*不应该这样*做，而且它不会特别有用。

尤其是当您尝试初始化需要大量逻辑来生成的静态常量时，这确实应该发生在静态块中，而不是构造函数中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-21T17:58:41.813

它们是两个不同的东西。您使用构造函数来初始化类的一个实例，静态初始化块在加载类时初始化静态成员。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-12-21T17:59:45.977

当您必须执行一些操作时，即使仍然没有创建任何实例，静态块也很有用。例如，用于初始化具有非静态值的静态变量。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-21T18:03:00.990

静态块与构造函数做不同的事情。基本上有两个不同的概念。

静态块在类加载到内存时初始化，这意味着当 JVM 读取你的字节码时。初始化可以是任何东西，它可以是变量初始化或任何其他应该由该类的所有对象共享的东西

而构造函数只为该对象初始化变量。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-21T18:39:01.677

当您要初始化静态字段时，静态块很有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-02-25T13:21:40.823

当您必须执行一些操作时，静态块对构造函数很有用，即使仍然没有创建实例。例如，用于初始化具有非静态值的静态变量。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-08-05T21:31:55.223

您可以理解静态块的一种方法是；它充当构造函数。但是，两者的区别在于 **静态块实例化类或静态变量，而构造函数用于实例化对象变量**

考虑下面的类

```
public class Part{

  String name;
  static String producer;

  public Part(String name){
      this.name = name;
  }

  static {
    producer = "Boeing";
  }

} 
```

从此类创建的对象将生产者设置为波音，但它们的名称因传递的参数而异。例如

```
Part engine = new Part("JetEngine");
Part Wheel = new Part("JetWheel"); 
```

# asp.net - 在用户浏览您的网站时检查用户权限的最佳方法是什么？

> ID：13994952
> 
> 赞同：0
> 
> 时间：2012-12-21T17:57:15.627
> 
> 标签：asp.net, security, validation, authentication, permissions

我对 asp.net 相当陌生，并且很难找到有关此主题的信息。

我正在建立一个允许用户上传视频的网站。例如，如果视频不合适或离题，我可以暂停他们的帐户，以便他们下次登录时，他们将被重定向到“您的帐户已被暂停”页面。我想弄清楚的是处理以下情况的最佳方法是：我在用户刚刚登录后暂停了用户的帐户。所以他们在登录过程中已经通过了验证。我基本上希望用户在执行下一个操作后被重定向到“您的帐户已被暂停”页面。除了在每次回发时检查数据库（这似乎有点低效），处理这个问题的最佳方法是什么？

如果您需要更多信息或更好的示例，请告诉我。

谢谢你的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:50:46.040

这是我的方法。创建一个新的`BasePage`并从此类而不是 System.Web.UI.Page 继承您的 aspx 页面。

```
public class BasePage : System.Web.UI.Page
{
   protected override void OnInit(EventArgs e)
   {
      if (!IsPostBack)
      {
         // I assume you already get the user's profile
         if (User.IsSuspended)
           Response.Redirect("/SuspendedPage.aspx");

         base.OnInit(e);     
      }    
   }
} 
```

**更新：**

在整个应用程序生命周期中，有很多方法可以存储价值。这是其中之一。

```
// Global.asax.cs
void Application_AuthenticateRequest(object sender, EventArgs e)
{
   if (HttpContext.Current.User != null && 
      HttpContext.Current.User.Identity.IsAuthenticated)
   {
      HttpContext.Current.Items["User"] = 
         GetUserByUsername(HttpContext.Current.User.Identity.Name);
   }
} 
```

# asp.net - 每次导航操作时网站重定向到登录页面

> ID：13994956
> 
> 赞同：4
> 
> 时间：2012-12-21T17:57:22.903
> 
> 标签：asp.net, asp.net-mvc, iis, authorization

我有一个 MVC 应用程序，它是一个 API 文档站点，位于表单 auth 后面站点中实际上只有两个页面...主页，其中列出了（在较高级别）站点上的所有端点，以及数据对象。您可以单击这些数据对象/端点中的任何一个，然后转到详细信息页面。

我的每个页面都装饰有该`[Authorize(Roles="role,names,here")]`属性。正如预期的那样，当您进入该站点时，您将被重定向到登录页面，并且任何后续请求都可以正常工作。

但是，昨天该网站开始出现问题，我不知道为什么。初始登录后，您请求的页面加载正常。但是，只要您单击链接导航到任何其他页面，用户就会被重定向到登录页面，并且凭据不再起作用。

关于造成这种情况的任何想法，以及如何解决它？

[编辑] 我不知道为什么，但是我的 sessionState 配置在我的 web.config 中被注释掉了（我没有这样做，正如我所说，这是 48 小时前工作的），但似乎没有注释这个修复了它：

```
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="dbConn"/>
  </providers>
</sessionState> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:16:33.530

最好向我们展示您提供会话的课程。但是使用这个：您将拥有一个像这样的帐户控制器：

```
UserApplication userApp = new UserApplication();
SessionContext context = new SessionContext();
public ActionResult Login()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Login(User user)
        {
            var authenticatedUser = userApp.GetByUsernameAndPassword(user);//you get the user from your application and repository here
            if (authenticatedUser != null)
            {
                context.SetAuthenticationToken(authenticatedUser.UserId.ToString(),false, authenticatedUser);
                return RedirectToAction("Index", "Home");
            }

            return View();
        }

        public ActionResult Logout()
        {
            FormsAuthentication.SignOut();
            return RedirectToAction("Index", "Home");
        } 
```

你的 SessionContext 将是这样的：

```
 public class SessionContext
    {
        public void SetAuthenticationToken(string name, bool isPersistant, User userData)
        {
            string data = null;
            if (userData != null)
                data = new JavaScriptSerializer().Serialize(userData);

            FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, name, DateTime.Now, DateTime.Now.AddYears(1), isPersistant, userData.UserId.ToString());

            string cookieData = FormsAuthentication.Encrypt(ticket);
            HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, cookieData)
            {
                HttpOnly = true,
                Expires = ticket.Expiration
            };

            HttpContext.Current.Response.Cookies.Add(cookie);
        }

        public User GetUserData()
        {
            User userData = null;

            try
            {
                HttpCookie cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
                if (cookie != null)
                {
                    FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(cookie.Value);

                    userData = new JavaScriptSerializer().Deserialize(ticket.UserData, typeof(User)) as User;
                }
            }
            catch (Exception ex)
            {
            }

            return userData;
        }
    } 
```

# javascript - html5 视频快进跳过幻灯片

> ID：13994958
> 
> 赞同：0
> 
> 时间：2012-12-21T17:57:28.283
> 
> 标签：javascript, html, custom-controls, html5-video

我正在尝试创建一个类似幻灯片的视频，如果您单击快进按钮，它会将您带到视频中的某个时间。（和倒带等。）视频是一个长视频，所以如果当前时间小于我已经实现的暂停标记，我只是想让它跳到某个时间。

这是我的 javascript

```
function Fwd(){
        if (video.currentTime < 17.91)
        { video.play(17.91)
        }
        if ( video.currentTime < 35.93 && video.currentTime > 17.91)
        { video.play(35.93)
        }
    } 
```

这是在我的 html < input type="button" value="►►" id="fwdButton" onclick="Fwd()" class="button" /> （减去输入前面的空间）

当达到 17.91 秒时，该按钮将从 17.91 秒开始播放下一个场景，但仅在那时。如果时间小于这个值，它不会跳到 17.91。

请帮忙。我是 JavaScript 新手！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:31:00.297

好的，所以这可行，但我仍然需要弄清楚如何让它自动播放：

```
function Fwd(){
    if (video.currentTime <= 17.91 && video.currentTime >= 0)
    { (video.currentTime = 17.92)
    }
    else if (video.currentTime <= 35.93 && video.currentTime > 17.91)
    { (video.currentTime = 35.94)
            }} 
```

更新：在此处找到自动播放的解决方案：[跳转到 html5 视频中的 currentTime 后自动播放](https://stackoverflow.com/questions/14142366/autoplay-after-jump-to-currenttime-in-html5-video)

# objective-c - 将背景图像设置为 UITableView 节标题

> ID：13994961
> 
> 赞同：3
> 
> 时间：2012-12-21T17:57:33.507
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我在网上和 stackoverflow 上搜索过，但找不到一个好的答案。我读过关于

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section` 
```

但那里没有什么可以帮助我。

最接近标题的图像背景的是：

```
headerView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"myBackground.png"]]; 
```

但它将图片显示为无法控制其大小的图案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T18:04:50.007

如果要将图像设置为节标题，请使用：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{

    UIImage *myImage = [UIImage imageNamed:@"loginHeader.png"];
    UIImageView *imageView = [[[UIImageView alloc] initWithImage:myImage] autorelease];
    imageView.frame = CGRectMake(10,10,300,100);

    return imageView;

}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 100;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:04:10.100

您可以将背景颜色设置为带有图像的图案：

```
headerView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"yourImage.png"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:05:14.867

你当然可以。在该方法中`-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`，您需要简单地`UIImageView`用图像实例化 a，为 imageView 对象设置框架并返回 imageView 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T10:37:23.543

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{

    UIView* headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 100)];

    headerView.backgroundColor = [UIColor colorWithWhite:0.5f alpha:1.0f];
    headerView.layer.borderColor = [UIColor colorWithWhite:1.0 alpha:1.0].CGColor;
    headerView.layer.borderWidth = 1.0;

    UILabel* headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(5,headerView.frame.size.height-40, tableView.frame.size.width - 5, 30)];

    headerLabel.backgroundColor = [UIColor clearColor];
    headerLabel.textColor = [UIColor whiteColor];
    headerLabel.font = [UIFont boldSystemFontOfSize:22.0];
    headerLabel.text = @"yourText";
    headerLabel.textAlignment = NSTextAlignmentLeft;

    UIImageView *headerImage = [[UIImageView alloc]initWithFrame:headerView.frame];

    headerImage.image = [UIImage imageNamed:[NSString stringWithFormat:@"image.jpg"]];
    headerImage.contentMode = UIViewContentModeScaleAspectFill;
    [headerImage setClipsToBounds:YES];

    [headerView addSubview:headerImage];
    [headerView addSubview:headerLabel];

return headerView;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 100;
} 
```

# android - Android ArrayAdapter 增加缓存视图以提高性能

> ID：13994962
> 
> 赞同：0
> 
> 时间：2012-12-21T17:57:38.973
> 
> 标签：android, android-arrayadapter, convertview

所以我有一个带有图像和一些由自定义数组适配器挂钩的文本的列表视图。我面临的问题是图像的加载速度仍然有点慢，我不喜欢。我看过谷歌技术讲座，并试图通过重新使用 convertView 的视图来优化我的列表（如果它为空，则膨胀，如果不是，则重新使用）。我还生成了 AsyncTasks 来加载位图，并将 BitmapFactory.Options inSampleSize 设置为 2 的幂，因为图像相对较小。我还使用 ViewHolder 模式来减少 findViewById 调用。

然而，即使这样，当我滚动浏览我的列表时，convertViews 是如何被重用的非常明显，因为随着我向上和向下滚动图像会不断更新。

我在库存的 Android 照片库中注意到的是，我拥有数百张照片，当我快速滚动浏览时，照片最初加载缓慢，但随后被缓存。缓存的数量远远超过屏幕能够显示的数量，所以当我滚动时，最初照片会无缝加载，直到我滚动通过缓存的照片数量，然后重新加载照片再次明显。

有没有办法用 ArrayAdapter 做到这一点？基本上，在我的列表视图中存储超过 9 个视图（我的屏幕能够显示的内容），以便当用户快速向下滚动时，用户必须向下滚动很多，然后才能重用 convertView，从而获得引人注目的图像重新加载？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:38:07.630

使用多个并行线程在后台加载图像。

例如：[向多个线程发送操作](http://developer.android.com/training/multiple-threads/index.html)；示例应用程序从 Picasa 精选照片 RSS 源下载缩略图。希望这可以帮助。

# javascript - ExtJS 将 Ext.app.Controller 转换为 Ext.app.Application

> ID：13994963
> 
> 赞同：0
> 
> 时间：2012-12-21T17:57:41.040
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我正在尝试将扩展的类转换`Ext.app.Controller`为扩展`Ext.app.Application`。因为`Ext.app.Application`是一个子类，`Ext.app.Controller`我假设简单地更改正在扩展的类就可以了，但是，它会导致控制台中出现错误，显示`Uncaught TypeError: Cannot call method 'substring' of undefined`. 错误发生在`this.callParent(arguments)`内部`constructor: function`，有人对可能导致此问题的原因有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:10:26.070

您不能在 Ext.app.Application 类更改中使用构造函数，但 4.2 将附带更改，但在此之前，例如使用启动方法来应用内容。并且不要扩展。

应用程序是一种单例实例，只需通过调用即可初始化

```
Ext.application({
    name: 'MyApp',
    launch: function() {
        Ext.create('Ext.container.Viewport', {
            items: {
                html: 'My App'
            }
        });
    }
}); 
```

尝试运行更多实例会导致问题，但您可以像这样使用 4.2 执行此操作

```
Ext.define('MyApp.Application', {
    extend: 'Ext.app.Application',
    name: 'MyApp'
...
});

Ext.application('MyApp.Application'); 
```

# c# - 获取登录用户的id

> ID：13994967
> 
> 赞同：18
> 
> 时间：2012-12-21T17:57:49.043
> 
> 标签：c#, asp.net-mvc-4, simplemembership

如何获取登录用户的 UserId？我正在使用标准系统生成的 AccountModel。我可以使用以下方式获取用户名：

```
User.Identity.Name 
```

但我没有看到 UserId 字段。我想使用 UserId 作为另一个表的外键。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-12-04T03:09:10.343

试试这个：

```
using Microsoft.AspNet.Identity;
User.Identity.GetUserId(); 
```

这就是它在当前 MVC (MVC5/EF6/VS2013) 模板的部分视图中的完成方式。

如果我错了，请纠正我，因为我已经看过很多 Aviatrix 的答案，但是如果多个用户在数据库中具有相同的名称会发生​​什么？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-21T18:09:33.053

我认为您正在寻找[ProviderUserKey - 从用户的会员数据源获取用户标识符。](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.provideruserkey.aspx)

```
object id = Membership.GetUser().ProviderUserKey 
```

[Membership.GetUser() - 从数据源获取信息并更新当前登录的会员用户的上次活动日期/时间戳。](http://msdn.microsoft.com/en-us/library/system.web.security.membership.getuser.aspx)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-21T21:11:48.083

最好的方法是使用 WebSecurty 类

```
var memberId = WebSecurity.GetUserId(User.Identity.Name); 
```

并且不要忘记`[InitializeSimpleMembership]`在控制器顶部添加:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-19T08:10:07.733

他们已经是很好的答案，但我从你的问题中了解到你想使用 id 从数据库中获取数据。所以这就是你可以做的。

```
public List<ForeignkeyTable> RV()
{
 var email = User.Identity.Name;

Usertable m = db.Uusertables.Where(x => x.user_Email == email).SingleOrDefault();

 var id = m.user_Id;

var p = db.ForeignkeyTable.Where(x => x.user_fk_id == id).ToList();

return p;

} 
```

这样您就可以在外键中返回该 id 的数据库中的所有数据。

# android - 扔在 ListView - 什么方向？

> ID：13994969
> 
> 赞同：1
> 
> 时间：2012-12-21T17:58:09.423
> 
> 标签：android, listview, direction, onfling

有没有办法在附加到 ListView 的 ScrollListener 中获取 Fling 的方向（向上或向下）？我得到了 OnScrollListener.SCROLL_STATE_FLING 没有问题，但我无法得到方向。我是否必须为此编写一个完整的 GestureListener 和 onTouch 侦听器并将其附加到我的 ListView 上，还是有更简单的方法？我只需要Fling的方向而已。感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:43:43.697

> 我是否必须为此编写一个完整的 GestureListener 和 onTouch 侦听器并将其附加到我的 ListView 上，还是有更简单的方法？

您可以像这样简单地使用 OnTouchListener：

```
listView.setOnTouchListener(new OnTouchListener() {
    int before = -1;
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            before = ((ListView) v).getFirstVisiblePosition();
            break;
        case MotionEvent.ACTION_UP:
            int now = ((ListView) v).getFirstVisiblePosition();
            if(now < before)
                Log.v("onTouch", "Scroll Up");
            else if(now > before)
                Log.v("onTouch", "Scroll Down");

        }
        return false;
    }
}); 
```

如果您只想在发生 fling 时收到通知：将当前滚动状态保存在 OnScrollListener 的`onScroll()`方法中，并检查是否是 fling 动作。

# sql-server - 聚集索引上的列顺序

> ID：13994971
> 
> 赞同：2
> 
> 时间：2012-12-21T17:58:12.693
> 
> 标签：sql-server, sql-server-2008-r2

> **可能重复：**
> [SQL Server 聚集索引 - 索引顺序问题](https://stackoverflow.com/questions/344068/sql-server-clustered-index-order-of-index-question)

我知道聚集索引中的列顺序很重要。

我计划在 where 子句中始终涉及的 3 列上添加聚集索引 - 一个 int、bit 和 datetimeoffset 列。此外，datetimeoffset 列存储增量值。

将 datetimeoffset 列作为聚集索引中的第一个列是否有意义？欣赏它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T18:06:47.877

列顺序对所有索引都很重要，而不仅仅是聚集索引。

最佳列顺序由多个因素决定：

您是否会仅使用其中一列而不使用其他列来查询此表？如果您的索引被定义为`ColumnA, ColumnB`... 并且您执行的查询仅使用 过滤`ColumnB`，则无法使用该索引，因为`ColumnB`它不在索引的前沿。

每列中的值的选择性如何？被索引的列中包含的不同值越多，索引就越有效。这也是您可能不想将`bit`列包含在索引中的原因，因为只有 2 个可能的值。更具选择性的列更适合处于领先地位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T18:31:27.060

正如迈克尔所提到的，索引中的列顺序与 WHERE 子句中的内容直接相关。

为了说明这一点，作为测试，我创建了三个表，每个表都有一个不同的列作为聚集索引中的第一列。然后，我用 10,000 行数据填充它们。

对所有三个表执行相同的 SQL 查询会产生非常不同的性能结果：

```
set statistics io on
set statistics time on

select * from DtFirst where DtCol between '4/1/2010' and '6/1/2010'
select * from IntFirst where DtCol between '4/1/2010' and '6/1/2010'
select * from BitFirst where DtCol between '4/1/2010' and '6/1/2010'

set statistics io off
set statistics time off 
```

**统计如下：** 第一个表（日期列在前）
扫描计数 1，逻辑读取**3**
CPU 时间 = 0 毫秒，经过时间 = **0**毫秒。

第二个表（日期列秒）
扫描计数 1，逻辑读取**29**
CPU 时间 = 0 毫秒，经过时间 = **113**毫秒。

第三个表（第三个日期列）
扫描计数 1，逻辑读取**29**
CPU 时间 = 0 毫秒，经过时间 = **145**毫秒。

如您所见，在聚集索引中日期列排在首位的表上查询日期显然会产生更好的结果。

# python - Python 3 - 验证 sendto() 成功

> ID：13994975
> 
> 赞同：6
> 
> 时间：2012-12-21T17:58:26.273
> 
> 标签：python, python-3.x, udp, sendto

我对目标 ip 有 2 个 UDP 响应，一个接一个：

```
sendsock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)
sendsock.bind(('%s' % ip_adr, 1036))

#send first packet
ok_response = "Reception Success, more to come"
str2bytes = bytes(ok_response,'utf-8')
sendsock.sendto(str2bytes, ("%s" % phone.ip_addr, int(phone.sip_port)))

#send second packet
ok_response = "Fun data here"
str2bytes = bytes(ok_response,'utf-8')
sendsock.sendto(str2bytes, ("%s" % phone.ip_addr, int(phone.sip_port))) 
```

我可以通过 Wireshark 看到第二个数据包被发送。但第一个似乎被忽略了。

除非有人可以在我的代码中看到打嗝，否则有没有办法在每个`sendsock.sendto()`实例上执行 if 语句，以确保代码在被确认为已发送之前不会继续？

另外，我应该关闭发送器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T05:47:20.230

UDP 不能保证消息会同步到达，或者它们甚至会完全到达，因此除非您从接收程序发送回确认响应，否则它永远不会真正被确认为已发送。这是提高 UDP 与 TCP 速度的权衡。

但是，您可以`sendto`在 while 循环中检查（发送的字节数）的返回值，并且在发送的字节与原始消息的字节匹配或达到超时值之前不退出 while 循环。

[此外，使用socketserver 模块](http://docs.python.org/3.2/library/socketserver.html#module-socketserver)可能更容易简化处理套接字的过程。

# c# - Win8 Metro 为表格数据构建列

> ID：13994977
> 
> 赞同：7
> 
> 时间：2012-12-21T17:58:32.980
> 
> 标签：c#, xaml, microsoft-metro

在为 Windows 8 创建应用程序时，我理解对远离数据网格设计的重点，如[这个 stackoverflow 问题所示](https://stackoverflow.com/questions/12228119/create-a-table-datagrid-in-windows-8-metro-apps-c-xaml)。我仍然相信在某些情况下以表格格式显示数据仍然是有益的。实际上，默认的 Window 8 应用程序有大量表格数据示例，如下面的屏幕截图所示。它们正是我正在寻找的。

默认天气应用 ![天气应用](../Images/d67bfc036189310b4798de1062fbf602.png)

默认财务应用 ![金融应用](../Images/ed646fefb7938c001d660b23b5b185cb.png)

然而，我的尝试并没有取得成果（我什至无法决定是使用列表框、列表视图还是网格视图）。我似乎无法在我的所有创作中创建列。在互联网上搜索了几分钟后，我发现了[一个 MSDN 答案](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/98dd45b0-0eba-431e-81de-5e12b4b5b2dd)：

> 您需要通过重新模板化 Listview/ListviewItem 创建一个非常自定义的外观

这真的是最好/最简单的方法吗？似乎我的要求很小。数据很小（大约 20 行）、只读且非交互式（如所示的 Window 8 应用程序）。我想要列、列标题和交替行样式。考虑到财务和天气应用程序中存在表格数据的普遍性，必须有人破解了这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:40:21.953

创建您的第一个 Windows 应用商店应用程序的博客阅读器示例说明了如何将模板与列表视图组件一起使用（博客提要是带有模板的列表视图），可在此处获得 C#/XAML：http: [//msdn.microsoft .com/en-us/library/windows/apps/br211380.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)。

# sql - 触发以获取日期之间的差异

> ID：13994978
> 
> 赞同：0
> 
> 时间：2012-12-21T17:58:38.653
> 
> 标签：sql, oracle, sqlplus

```
CREATE TRIGGER ci_insert
AFTER INSERT ON tb 
REFERENCING NEW AS nr
FOR EACH ROW
DECLARE
  date_from DATE;
  date_to   DATE;
  diff  NUMBER;
BEGIN
  SELECT DATE_FROM INTO date_from WHERE id = :nr.id;
  SELECT DATE_TO INTO date_to WHERE id = :nr.id;
  diff = date_to - date_from;
  UPDATE TB SET (diff) VALUES (diff) WHERE id = :nr.id;
END; 
```

我使用 sqlplus，但它不起作用。它甚至没有显示任何错误。会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:39:04.123

错误很少。首先，你必须`FROM`在每一个选择中都有。其次，您将遇到关于变异表的运行时错误 - 您无法读取/写入在行级触发器中触发操作的同一个表。最后，你的`UPDATE`语法错误，它看起来更像`INSERT`; 更新语法是`UPDATE table1 SET field1 = value1 WHERE ....`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:03:22.847

```
CREATE TRIGGER ci_insert
AFTER INSERT ON tb 
REFERENCING NEW AS nr
FOR EACH ROW
DECLARE
  date_from DATE;
  date_to   DATE;
  diff  NUMBER;
BEGIN
  SELECT DATE_FROM INTO date_from from TB WHERE id = :nr.id;
  SELECT DATE_TO INTO date_to from TB WHERE id = :nr.id;
  diff = date_to - date_from;
  UPDATE TB SET (diff) VALUES (diff) WHERE id = :nr.id;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:15:22.987

我想你所需要的就是这个——如果可能的话，我总是在现有的表上尝试我的查询。用 your_table... 替换表名：

```
 Begin
     Update emp_test
        Set empno = (Select trunc(sysdate)-to_date('20-DEC-2012') days_btwn From dual);
   End; 
```

# ruby - 一组字符串并重新打开字符串

> ID：13994983
> 
> 赞同：7
> 
> 时间：2012-12-21T17:58:53.240
> 
> 标签：ruby

试图回答这个问题：[如何使设置的差异对大小写不敏感？](https://stackoverflow.com/questions/13994295/how-can-i-make-the-set-difference-insensitive-to-case)，我正在试验集合和字符串，试图有一个不区分大小写的字符串集。但是由于某种原因，当我重新打开 String 类时，当我将字符串添加到集合时，我的任何自定义方法都不会被调用。在下面的代码中，我看不到任何输出，但我希望至少有一个我重载的运算符被调用。为什么是这样？

编辑：如果我创建一个自定义类，比如 String2，我在其中定义了一个哈希方法等，当我将对象添加到集合时，这些方法会被调用。为什么不是字符串？

```
require 'set'

class String
  alias :compare_orig :<=>
  def <=> v
    p '<=>'
    downcase.compare_orig v.downcase
  end

  alias :eql_orig :eql?
  def eql? v
    p 'eql?'
    eql_orig v
  end

  alias :hash_orig :hash
  def hash
    p 'hash'
    downcase.hash_orig
  end
end

Set.new << 'a' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:34:45.187

查看 的[源代码](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html#method-i-add)，`Set`它使用简单的散列进行存储：

```
def add(o)
  @hash[o] = true
  self
end 
```

所以看起来你需要做的而不是`String`open 是 open `Set`。我没有对此进行测试，但它应该给你正确的想法：

```
class MySet < Set
  def add(o)
    if o.is_a?(String)
      @hash[o.downcase] = true
    else
      @hash[o] = true
    end
    self
  end
end 
```

**编辑**

如评论中所述，这可以以更简单的方式实现：

```
class MySet < Set
  def add(o)
    super(o.is_a?(String) ? o.downcase : o)
  end
end 
```

# php - mysqli->rollback() 会回滚之前提交的每个查询吗？

> ID：13994984
> 
> 赞同：2
> 
> 时间：2012-12-21T17:58:57.327
> 
> 标签：php, transactions, mysqli, commit, rollback

我想知道 mysqli->rollback 是否会回滚所有在回滚之前提交的查询。

例如，在下面的代码中，第一个查询将被提交，但第二个查询将因为拼写错误的“用户名”而失败。这是否意味着回滚之前的查询将或不会被执行？

```
$mysqli->autocommit(FALSE);

$query = "INSERT INTO users (username, password) VALUES ('user123', '1apple')";
$query2 = "INSERT INTO users (**usernam**, password) VALUES ('user987', '2apple')";

if($resrouce = $mysqli->query($query)){

    $mysqli->commit();

    if($resource2 = $mysqli->query($query2)){

        $mysqli->commit();

    }else{

        $mysqli->rollback();

    }

}else{
    $mysqli->rollback();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:03:08.807

事务一旦提交，就不能回滚，只能回滚尚未提交的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:38:21.733

修改第 8 行并在代码的最后添加一行：

```
$mysqli->autocommit(FALSE);

$query = "INSERT INTO users (username, password) VALUES ('user123', '1apple')";
$query2 = "INSERT INTO users (**usernam**, password) VALUES ('user987', '2apple')";

if($resrouce = $mysqli->query($query)){

    //$mysqli->commit(); this not necesary

    if($resource2 = $mysqli->query($query2)){

        $mysqli->commit();

    }else{

        $mysqli->rollback();

    }

}else{
    $mysqli->rollback();
}

$mysqli->close(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-21T18:13:56.970

就我个人而言，我发现 PDO 库比 mysqli 更适合数据库访问。您可以查看： http: [//php.net/manual/en/pdo.begintransaction.php](http://php.net/manual/en/pdo.begintransaction.php)

这正是你所需要的......希望有帮助

# java - 识别监视器小程序正在运行，在多监视器系统中

> ID：13994988
> 
> 赞同：3
> 
> 时间：2012-12-21T17:59:08.333
> 
> 标签：java, applet, position, screen, awt

我有一个在浏览器中运行的按钮的*Applet*，当单击该按钮时会打开一个 JFrame。我想将 JFrame 位置设置为运行浏览器的任何监视器的屏幕中心。因此，如果他们只有一个监视器，则 JFrame 将在此屏幕的中心打开。如果他们有两个监视器并且浏览器位于左侧监视器中，单击该按钮将打开左侧监视器中心的 JFrame。如果浏览器在右监视器显示中，则单击该按钮将导致 JFrame 在右监视器显示的中心打开。

目前我正在使用： -

`Toolkit.getDefaultToolkit()`获取一个 Toolkit 对象，然后调用`Toolkit.getScreenSize()`以获取屏幕尺寸，然后从中计算出中心位置。无论浏览器在哪里，这始终基于左侧监视器。

另外，我知道如果用户碰巧在他们的显示器之间有不同的分辨率，这可能会更加复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:13:29.010

获取 的[`GraphicsConfiguration`，`JApplet`](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#getGraphicsConfiguration%28%29)然后将其传递给 . 的[构造函数`JFrame`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#JFrame%28java.lang.String,%20java.awt.GraphicsConfiguration%29)。您还可以使用它`GraphicsConfiguration`来获得一个用于居中的[边界矩形。](http://docs.oracle.com/javase/6/docs/api/java/awt/GraphicsConfiguration.html#getBounds%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:02:43.363

[`GraphicsDevice`](http://docs.oracle.com/javase/6/docs/api/java/awt/GraphicsDevice.html)将为您提供所有屏幕设备的信息。

它旨在处理您需要的确切场景，只需查看示例代码即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:31:15.770

对于居中，通常可以使用 JFrame。[setLocationRelativeTo(null)](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#setLocationRelativeTo%28java.awt.Component%29)。也许它以默认屏幕为中心？如果参数是小程序怎么办？

# java - 将外部 JAR 文件放在哪里？

> ID：13994997
> 
> 赞同：0
> 
> 时间：2012-12-21T17:59:23.860
> 
> 标签：java

我正在使用 Eclipse IDE，并且知道如何使用外部 JAR。我知道如何将它们添加到构建路径中。我在 eclipse 中得到了完美的输出，但是当我导航到`.class`文件位于命令提示符中的 eclipse 的 bin 文件夹时，当我使用命令时

```
java MySQLConnector 
```

它返回错误，因为找不到类。我认为代码无法找到`MySQLConnector.jar`文件。如何在执行类时添加 JAR 文件。

我已经生成了类文件，我`javac`在编译时使用并没有出错。请告诉我我应该如何进一步进行？

我的班级名称是 Main，我的 mysqlconnector.jar 文件位于 C 驱动器中。我正在使用以下命令：

```
javac -cp c:/mysqlconnector.jar Main.java
java -cp c:/mysqlconnector.jar Main 
```

我没有得到任何编译错误。但是执行类文件后出现错误：错误：无法找到或加载主类Main。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:01:02.453

构建路径与运行时类路径不同。确保 jar 在运行时类路径中可用以避免上述错误。您可以使用`java -cp`标志来设置类路径

例子：

```
java -cp locationToJar yourProgram 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:00:51.253

使用`-cp`并指定 jar 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:01:53.763

在 lib 文件夹中对这些 jar 进行类路径引用。

如果您使用任何外部罐子，那么您可以使用类似下面的东西。

您始终可以创建一个 lib 文件夹并在您的项目中使用。这样，它将始终成为您项目的一部分。您无需在外部搜索这些 jar（除非您的组织正在使用一个公共的 jar 池）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T18:29:12.723

正如 Nambari 所说，构建路径与运行时使用的路径不同。此外，如果您使用外部方法/工具来编译项目，Eclipse 也可能有所不同。首先，您需要识别运行时上下文，然后相应地设置类路径。一些建议： - 将 *.jar 放在最终项目需要它的地方。- 为指向该位置的 Eclipse 设置构建路径以引用您的 jar。