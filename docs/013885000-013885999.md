# StackOverflow 问答 13885000-13885999

# silverlight - How to make a network game on Windows phone (7.5)?

> ID：13885009
> 
> 赞同：2
> 
> 时间：2012-12-14T19:21:54.050
> 
> 标签：silverlight, networking, windows-phone, multiplayer

I'm trying to make a simple app using network. For instance, a tic tac toe multiplayers game. I've read many things but I don't know which is the best. At the beginning, I thought one player makes a server, and other player can connect to the first one over wifi or via internet.

I found these solutions: - Multicast => only for the local network (wifi) - XNA => Only via Xbox live ? - WCF => I never use web services and I don't really know how it works

I want to use an interoperable solution whether I decide to make an Android version.

So, which way or technology should I use ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T19:45:24.367

对于这种类型的通信，您应该使用[Push Notifications](http://msdn.microsoft.com/en-us/library/hh221549.aspx)。使用这些通知，您可以让您的游戏将移动发送到您的服务器，然后您的服务器发送通知，该通知通过推送服务发送给其他用户。

# asp.net-mvc - 在 Razor 视图中显示相关 DB 值：NullReferenceException

> ID：13885015
> 
> 赞同：0
> 
> 时间：2012-12-14T19:22:05.153
> 
> 标签：asp.net-mvc, entity-framework, razor

我有 4 个相关表：Project->ProjectDoc->Comment->CommentReply & Users 其中 3 个表与用户相关。当我尝试获取 User.FirstName 值时，它给了我一个异常指示：

```
Object reference not set to an instance of an object. 
```

所以首先是用户模型。

```
public class User
{
    public int UserID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public virtual ICollection<Comment> Comment { get; set; }
    public virtual ICollection<CommentReply> CommentReply { get; set; }
    public virtual ICollection<Project> Project { get; set; }
} 
```

现在是项目模型。

```
public class Project
{
    public int ProjectID { get; set; }
    public int UserID { get; set; }
    public string Title { get; set; }
    public virtual ICollection<ProjectDoc> ProjectDoc { get; set; }
    public User User { get; set; }
} 
```

现在是剃刀视图。我已经标记了例外情况。

```
@Model.User.FirstName   //exception

@foreach (var doc in Model.ProjectDoc)
{
    @doc.DocTitle
    <br />  
       <div>
           @doc.Comment.Count() comments
       </div>
   foreach (var comment in doc.Comment)
   { 
       <div>
        @comment.CommentVote.Count() 
        votes
        @comment.UserID - user ID<br />

        @comment.User.FirstName  //exception
        @comment.Text
       </div>
       <br />
       foreach (var creply in comment.CommentReply)
       {

          @creply.User.FirstName   //exception
          <br />
          @creply.Text
          <br />
       }
   }
} 
```

如果我删除 User.FirstName 行，那么它工作正常。我需要更改什么才能获得 FirstName 值？您需要更多信息来提供帮助吗？

**更新**：我的控制器，如果有帮助的话。

```
 // GET: /Projects/Details/5

    public ActionResult Details(int id = 0)
    {
        Project project = db.Projects.Find(id);
        if (project == null)
        {
            return HttpNotFound();
        }
        return View(project);
    } 
```

我也试过把控制器改成这个，没用

```
 Project project = db.Projects
          .Include(i => i.User)
          .SingleOrDefault(x => x.ProjectID == id); 
```

**更新 2**：Fluent API 映射问题？

UserID 字段有一个值，但是 User_UserID 值是 NULL，所以我假设我的流利 api 映射不正确（我不想要 User_UserID 列）。

```
 modelBuilder.Entity<User>()
      .HasMany(p => p.Project)
      .WithRequired()
      .HasForeignKey(c => c.UserID)
      .WillCascadeOnDelete(false); 
```

这是造成问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:01:15.207

我想您想使用实体的延迟加载...为了使其工作，导航属性必须标记为虚拟，因此 EF 可以在必要时使用代理类来加载数据。

在您的模型`User`中，类中的属性`Project`未标记为虚拟，因此延迟加载不起作用。

您可以将`User`属性设为虚拟或使用该`Include` [方法](http://msdn.microsoft.com/en-us/library/bb738708.aspx)加载数据而不进行延迟加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:07:59.437

请注意延迟加载...据我所知，您只是从数据库中获取 ProjectDoc 列表。然后，您查看每个 ProjectDoc，对于每个文档，您正在使用导航属性 (@doc.Comment)，然后对于每个评论，您都通过评论回复。

如果我没记错的话，这些调用中的每一个都在访问数据库。您可能需要考虑在一个查询中提取您需要的所有数据，而不是为每个项目访问数据库。

看看[n+1 选择问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)。

# jquery - 单击页面正文时隐藏 div

> ID：13885016
> 
> 赞同：-2
> 
> 时间：2012-12-14T19:22:05.383
> 
> 标签：jquery, html, css

单击外部时，我很难隐藏 div；身体。

```
jQuery(document).ready(function( $ ) {
$('.list_container').hide().before('<div class="listbtn"> </div>');
$('.listbtn').click(function() {
    $('.list_container').animate({width: 'toggle'});
    return false;
 });
 }); 
```

我正在寻找在单击主体时隐藏 .list_container ，最好它会动画切换到隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:43:08.400

您必须在 上绑定和事件`document`，并防止容器本身上的点击传播。

```
$(document).on("click", function() {
    $(".list_container").fadeOut();
});

$(document).on("click", ".list_container", function(event) {
   event.stopPropagation();
}); 
```

看看这个[小提琴](http://jsfiddle.net/rdiaz/THBht/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:46:35.327

您需要对隐藏 div 的文档应用 onclick，对停止向父事件传播或冒泡的 div 应用 onclick：

```
$(document).click(function () {
    $('.list_container').hide();
});

$('.list_container').click(function (e) {
    e.stopPropagation();
}); 
```

# java - 从我在 Apache Poi 中导出的 Excel 中删除特殊字符和符号

> ID：13885017
> 
> 赞同：0
> 
> 时间：2012-12-14T19:22:06.333
> 
> 标签：java, excel, apache-poi

我有这种导出excel文档的方法，但是当我打开excel时，我得到了这种带有奇怪字符和符号的文件，没有格式；有人可以指导我如何解决这个问题吗？

![在此处输入图像描述](../Images/d5f070e710436635006e24efb1f44621.png)

这是我的方法，谢谢帮助；我仍在努力。

```
 public void CrearExcel() throws SQLException {
        //Map param = new HashMap();

        try {
            Connection conn = Conexion.getConnTest();
            PreparedStatement ps = null;
            ResultSet rs = null;
            String sql =
                "SELECT NUM_FICHA, ASPIRANTE.AP_PATERNO, ASPIRANTE.AP_MATERNO, ASPIRANTE.NOMBRE FROM REFERENCIA INNER JOIN ASPIRANTE ON REFERENCIA.FK_ASPIRANTE_ID_ASPIRANTE = ASPIRANTE.ID_USUARIO WHERE NUM_FICHA IS NOT NULL";
            ps = conn.prepareStatement(sql);
            rs = ps.executeQuery();

            HSSFWorkbook hwb = new HSSFWorkbook();
            HSSFSheet sheet = hwb.createSheet("new sheet");

            Row rowhead = sheet.createRow(0);

            rowhead.createCell(0).setCellValue("NUMFICHA");
            rowhead.createCell(1).setCellValue("APELLIDO PATERNO");
            rowhead.createCell(2).setCellValue("APELLIDO MATERNO");
            rowhead.createCell(3).setCellValue("NOMBRE");
            rowhead.createCell(4).setCellValue("EXAMEN1");
            rowhead.createCell(5).setCellValue("EXAMEN2");

            int index = 1;
            while (rs.next()) {
                Row row = sheet.createRow(index);

                row.createCell(0).setCellValue(rs.getInt(1));
                row.createCell(1).setCellValue(rs.getString(2));
                row.createCell(2).setCellValue(rs.getString(3));
                row.createCell(3).setCellValue(rs.getString(4));
                row.createCell(4).setCellValue("");
                row.createCell(5).setCellValue("");
                index++;

            }

            ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
            hwb.write(outByteStream);
            byte[] outArray = outByteStream.toByteArray();

            response.setHeader("Content-Disposition",
                               "attachment; filename=testxls.xls");
            response.setContentType("application/vnd.ms-excel");
            response.flushBuffer();
            OutputStream outStream = response.getOutputStream();
            outStream.write(outArray);
            outStream.flush();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:13:45.577

为什么不直接从工作簿写入响应输出流：

```
HSSFWorkbook hwb = new HSSFWorkbook();
...
OutputStream outStream = response.getOutputStream();
hwb.write(outputStream);
.... 
```

因此，请尝试跳过字节数组（输出流）部分，因为这可能会导致您的问题。

这里[有一些可能会有所帮助的更多信息](http://onjava.com/pub/a/onjava/2003/04/16/poi_excel.html?page=2)。

希望这能让你摆脱困境（或至少在摆脱困境的道路上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:11:03.067

由于 Excel 文件可以接收文本内容，所以不要打印出**二进制**数据，而是尝试打印出**文本**数据。如果这不能解决问题，它至少应该能够为您指明比打印二进制数据更好的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T11:13:03.903

如果您使用某些服务器，这是一个常见的错误。您必须在写入响应之前重置响应：

```
...
response.reset(); 
response.setHeader("Content-Disposition",
                               "attachment; filename=testxls.xls");
... 
```

# c# - Entity Framework相关实体，加载错误

> ID：13885020
> 
> 赞同：0
> 
> 时间：2012-12-14T19:22:37.463
> 
> 标签：c#, asp.net, entity-framework

我遇到了 EF 相关实体的问题。

我有以下代码：

```
public class Customer
{
    public int Id { get; set; }
    [ForeignKey("Id")]
    public virtual Status Status { get; set; }
}

public class Status
{
    public int Id { get; set; }
    public string Description { get; set; }
} 
```

当我得到一个客户实体时，状态属性是延迟加载的，到目前为止一切都很好。但是，状态 obj 是错误的。

例如。我有一个状态 id 为 5 的客户；但是当我得到它时，状态 id 是 1。

上面的实体只是示例。在真实的情况下，所有相关字段的行为都相同。

任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-15T20:21:57.790

解决了

这是我的错误。

我改成这个并且它起作用了。

感谢帮助。

```
public class Customer
{
    public int Id { get; set; }
    public int StatusId { get; set; }
    [ForeignKey("StatusId")]
    public virtual Status Status { get; set; }
}

public class Status
{
    public int Id { get; set; }
    public string Description { get; set; }
} 
```

# php - Passing variables through URL with JQuery

> ID：13885023
> 
> 赞同：0
> 
> 时间：2012-12-14T19:23:05.377
> 
> 标签：php, jquery

I have this but is not working which is a mixed of both answers found here (http://stackoverflow.com/questions/10369432/passing-link-with-parameters-with-jquery)... the alert message comes out empty and therefore the delete.php doesn't do anything

Any comments. I am using JQuery 1.8

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(function(){

  $(".delete").click(function(e){
    var del_id = $(this).attr("id");
    e.preventDefault();
    $.post("../folder/delete.php", { iid: del_id } ,function(data){
    alert(data)
        //change the link to deleted
        $('#'+del_id).replaceWith('<a href="#" class="delete">Deleted</a>');

    });
  });
});

</script>
</head>
<body>
 <a class="delete" id="1" href='#'>Delete 1</a>
 <a class="delete" id="2" href='#'>Delete 2</a>
 <a class="delete" id="3" href='#'>Delete 3</a>
</body>
</html> 
```

**Delete.php is as follows:**

```
<?php 
    extract($_POST); 
    extract($_GET); 
    if ($del_id!=0){ 
        require_once("../includes/include.php"); 
        deleteItem($del_id); 
    } 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:50:18.263

您应该更改以下行

```
if ($del_id!=0) 
```

有了这个

```
if ($iid!=0) 
```

因为你要发送

```
{ iid: del_id } // iid is the variable 
```

从客户端并且`$iid`将在 中可用，`$_POST`因此您可以在没有`extracting`完整`$_POST`阵列的情况下使用

```
if ($_POST['iid']!=0){...} 
```

此外，如果您不从服务器端回显/打印任何内容，那么您将无法在响应中取回任何内容。

# google-chrome-extension - chrome-extension：获取激活标签的网址

> ID：13885025
> 
> 赞同：3
> 
> 时间：2012-12-14T19:23:13.327
> 
> 标签：google-chrome-extension, tabs

我删除了我的一个问题，因为它似乎是一个重复的问题。但实际上我想我想出了一个答案，将我的问题与另一个问题区分开来。

我最初的问题：我想知道是否有一种直接的方法可以找出已激活标签的网址。我在问，因为传递给[chrome.tabs.onActivated.addListener](https://developer.chrome.com/extensions/tabs.html#event-onActivated)的处理程序函数的对象参数不包含激活选项卡的 url，例如[onUpdated.addListener](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)的处理程序。

[这](https://stackoverflow.com/questions/11112270/chrome-extension-attach-properties-to-each-tab)是一个可选的答案，但我正在寻找一个更简单的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T19:23:13.327

问题中链接的答案适用于跟踪标签属性的一般情况。

但是，对于 onActivated 的特殊情况，由于它是关于当前活动的选项卡，您可以简单地使用`chrome.tabs.getSelected`：

```
chrome.tabs.onActivated.addListener(function(object activeInfo) {

   chrome.tabs.getSelected(null,function(tab) {
      var url = tab.url;
      //do something
   });
}); 
```

你说什么？

# android - 在没有上下文的异步任务中获取独立类中的 ORMLite DatabaseHelper

> ID：13885028
> 
> 赞同：1
> 
> 时间：2012-12-14T19:23:22.193
> 
> 标签：android, database, asynchronous, task, ormlite

我有通过按下按钮从服务器异步数据同步的 android 应用程序。但是我需要按钮在应用程序的所有活动中，所以我决定将 updateTask 作为独立类。

在 updateTask 我下载了一些 xml 数据。然后使用 bussines 对象来处理它，最后让这个 bussines 对象处理保存（或更新）到 android db。

根据 ORMLite 教程，我应该通过调用 OpenHelperManager.getHelper(context, DatabaseHelper.class) 来获取 databaseHelper。我的问题是我需要一些目前没有的 OpenHelperManager 上下文。

我认为最好的方法是将活动的上下文传递给 updateTask 但我该怎么做呢？将上下文进一步传递给与任何活动无关的业务对象也不是很奇怪。最后：上下文是什么？它只是代表活动父母还是有更深层次的目的？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T23:31:51.527

这里有几种方法。我很确定这三个都应该工作，但我自己没有测试过它们。

## 方法一

为 AsyncTask 创建一个构造函数，该构造函数接受 Context 并将其存储，以便您可以在它执行时使用它。

**异步任务代码**

```
public class DataProcessor extends AsyncTask<Void, Void, Void>{

    private Context mContext;

    public DataProcessor(Context context){
        this.mContext = context;
    }

    @Override
    protected Void doInBackground(Void... params) {
        DataBaseHelper helper = OpenHelperManager.getHelper(mContext, DatabaseHelper.class)
        // Your code here
    }
} 
```

**实现代码（用于 Activity）**

```
new DataProcessor(this).execute(); 
```

## 方法二

调用`execute`方法时将上下文作为参数传入

**异步任务代码**

```
public class DataProcessor extends AsyncTask<Context, Void, Void>{

    @Override
    protected Void doInBackground(Context... params) {

        Context context = params[0];

        DataBaseHelper helper = OpenHelperManager.getHelper(context, DatabaseHelper.class)
        // Your code here
    }
} 
```

**实现代码（用于 Activity）**

```
new DataProcessor().execute(this); 
```

## 方法三

有一个异步任务可以直接访问的上下文的静态实例。可以在这里找到一种方法：[Static way to get 'Context' on Android?](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

**异步任务代码**

```
public class DataProcessor extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Void... params) {

        DataBaseHelper helper = OpenHelperManager.getHelper(MyApplication.getAppContext(), DatabaseHelper.class)
        // Your code here
    }
} 
```

**实现代码（用于 Activity）**

```
new DataProcessor().execute(this); 
```

# css - Css - 无法更改标签上的垂直位置

> ID：13885030
> 
> 赞同：0
> 
> 时间：2012-12-14T19:23:25.340
> 
> 标签：css, tags

在我的[网站上](http://mmd3e12dae42.keaweb.dk/test/index.html)，我想将 a 标签（黑框）移到中间，但我无法让它工作。我不能影响页面上的其他元素。当我添加顶部时：50%；在萤火虫中，它按照我的意愿向下移动到中间，但我无法使其适用于真实站点。元素的 CSS：

```
.section {
    width: 100px;
    height: 100px;
    background-color: black;    
    position: relative;
    margin-left: 720px;
    top: 50%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:27:08.530

确保您的 a 标签正确嵌套在另一个元素（div、p 等）中，并使用 CSS 设置该元素的位置。

```
<div class="sectionhldr" >
      <a class="section" href="/*destination*/"> My Link</a>
</div> 
```

将位置设置为 div 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:32:45.153

您可以添加`display: inline-block`到您的`.selection`，以便正确呈现元素的高度。

但现在你真正的问题是：你可以使用：`top: 450px`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:34:38.587

尝试...

```
.section {
    width: 100px;
    height: 100px;
    background-color: black;
    position: relative;
    margin-left: -50px;
    left: 50%;
    top: 50%;
    margin-top: -50px;
} 
```

# knockout.js - 淘汰赛：正则表达式和所需的验证重叠？不会通过我的测试

> ID：13885033
> 
> 赞同：1
> 
> 时间：2012-12-14T19:23:28.923
> 
> 标签：knockout.js, jasmine, knockout-validation

在 ViewModel 中，我有一些属性需要和正则表达式验证（在同一属性上），如下所示：

```
// ...other properties...
MaxDays: ko.observable("").extend({
    required: { message: "You have to specify the maximum number of days." },
    pattern: {
        message: "Please enter a valid number.",
        params: '[0-9]+$',
        maxLength: 10
    }
}),
// ...other properties... 
```

我正在使用 Jasmine 进行测试，我注意到如果我分配的值与表达式不匹配，则该值将被忽略，并且它会运行自己的“必需”测试，就好像该属性中没有数据一样。

```
// ... describe, other "it" statements, etc...
it("should complain if there's incorrect data", function () {

    viewModel.MaxDays("Zweiundzwanzig");

    expect(viewModel.errors().length).toBeGreaterThan(0);
    expect(viewModel.errors()).toContain('Please enter a valid number.');

    console.log(viewModel.errors());

});
// ... 
```

当我运行测试时它失败了。错误集合充满了错误，但不是因为我输入了一个应该是数字的字符串。它失败了，因为它认为该属性是空的。我从“必需”而不是“模式”中收到错误消息：

![在此处输入图像描述](../Images/609086d825b17898358151a7a1315562.png)

有趣的是它可以在 UI 上运行，所以如果我在绑定到该属性的字段上输入字符串值，它将触发正则表达式验证并将正确的错误消息放在字段旁边。

谁能指出我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:50:28.963

如果错误类型发生变化，knockout.validation.group.errors() 当前无法正确更新（请参阅[https://github.com/ericmbarnard/Knockout-Validation/issues/218](https://github.com/ericmbarnard/Knockout-Validation/issues/218)）。

我认为这是你的问题。尝试将“MaxDays”设置为正确的值，然后设置为无效值。如果那是您的问题，那应该可以解决测试。

# javascript - Javascript charting library with millisecond precision for X-axis (timeseries)?

> ID：13885038
> 
> 赞同：0
> 
> 时间：2012-12-14T19:23:47.113
> 
> 标签：javascript, charts, time-series

I want to use a open source javascript charting library to plot timeseries data, but my requirement is that it should support millisecond precision for the X-axis. Is there any such out there? How about precision upto seconds?

Additional requirement is that I prefer to do less work in my javascript code. So the ideal solution would be able to read a csv file to get the data and plot. Something like the temperatures.csv example of dygraph: [http://dygraphs.com/index.html](http://dygraphs.com/index.html)

An additional nice to have would be support for multiple Y-axes, but that's probably a whole another question.

Example input data would be:

```
2012-12-12 21:20:01.134000,0.0524060
2012-12-12 21:20:02.374000,0.0635470
2012-12-12 21:20:03.493000,0.0754630
2012-12-12 21:20:04.647000,0.0557800
2012-12-12 21:20:05.693000,0.1131610
2012-12-12 21:20:06.767000,0.0454080
2012-12-12 21:20:07.905000,0.0455790
2012-12-12 21:20:09.194000,0.0543930
2012-12-12 21:20:10.344000,0.0912380
2012-12-12 21:20:11.617000,0.0368600
2012-12-12 21:20:12.760000,0.0895100 
```

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:20:43.140

AmCharts [http://www.amcharts.com/](http://www.amcharts.com/)支持 x 轴和多值轴上的毫秒数。它没有内置的 cvs 加载程序，但有一个如何做到这一点的示例：http://blog.amcharts.com/2011/03/amcharts-javascript-tutorials-part-2.html

# sql - Better way to write large SQLs inside rails models?

> ID：13885040
> 
> 赞同：5
> 
> 时间：2012-12-14T19:24:02.827
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, coding-style

After using a lot of **Arel** that **Rails** provides for sugar code, I am having problems when dealing with large and complex SQLs queries that I couldn't do it very well with **Arel** methods. I like **Arel** for little things, but when it get messy I prefer separate the code.

So, is there any advice on how should I be treating my large **SQLs** inside models? Like, when should I create **SQL Views** for that (as I seen **Rails** do not provide very well, I have to create a migration for that) or create any separate classes in some folder "sqls" and then call from there.

I know that some people use the **<<-SQL** expression

Here is my current example:

```
Question.from(self.questions
                  .select("questions.id")
                  .select("(NOT (questions.last_active_user_id = #{user.id} OR (COALESCE(ss.updated_at > questions.last_active_at, false) OR COALESCE(ds.updated_at > questions.last_active_at, false))))::integer as active")
                  .select("(((NOT((COALESCE(ss.updated_at > questions.created_at, false) OR COALESCE(ds.updated_at > questions.created_at, false))) AND pages.owner_id = questions.user_id) OR (NOT (COALESCE(ss.updated_at > questions.owner_found_important_at, false) OR COALESCE(ds.updated_at > questions.owner_found_important_at, false)) AND owner_found_important_at is not null AND COALESCE(pages.owner_id <> #{user.id}, true))) AND COALESCE(pages.owner_id <> #{user.id}, true) AND (questions.last_active_user_id <> #{user.id}))::integer as owner_active")
                  .select("COALESCE(COUNT(answers.id) = 0, true)::integer as open")
                  .joins("LEFT JOIN seens ss ON questions.slide_id = ss.viewed_id AND ss.viewed_type = 'Slide' AND ss.viewer_id = #{user.id}")
                  .joins("LEFT JOIN seens ds ON questions.document_id = ds.viewed_id AND ds.viewed_type = 'Document' AND ds.viewer_id = #{user.id}")
                  .joins("INNER JOIN documents ON documents.id = questions.document_id")
                  .joins("INNER JOIN lists ON lists.id = documents.list_id")
                  .joins("INNER JOIN pages ON pages.id = lists.page_id")
                  .joins("LEFT OUTER JOIN answers ON answers.question_id = questions.id")
                  .where("questions.reports_count < 2")
                  .group("questions.id, active, owner_active")
                  .as('questions'))
                  .select("SUM(questions.active) as active, SUM(questions.owner_active) as owner_active, SUM(questions.open) as opened, COUNT(questions.id) as total, SUM(CASE WHEN (questions.active > 0 and questions.open > 0) THEN questions.open ELSE 0 END) as opened_active, SUM(CASE WHEN (questions.owner_active > 0 and questions.open > 0) THEN questions.owner_active ELSE 0 END) as opened_active_owner").first 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:46:58.807

`find_by_sql`改为与此处的文档结合使用：

```
Questions.find_by_sql(<<SQL)
select questions.id
  ...
SQL 
```

# powershell - Powershell：监听 Telnet 响应文本

> ID：13885041
> 
> 赞同：3
> 
> 时间：2012-12-14T19:24:06.203
> 
> 标签：powershell, match, telnet

这是可能很容易做到的那些特定的现实世界问题之一。我对我的旧 BBS/终端代码太生疏了，现在不记得了。

我有一个 Powershell 脚本，它打开到远程服务器的 Telnet 会话，然后根据文本文件向该服务器发出命令。它还被设计为将从服务器返回的所有文本吐出到日志中。

```
 ## Read output from a remote host
    function GetRemoteOutput
    {
      ## Create a buffer to receive the response
      $buffer = new-object System.Byte[] 1024
      $encoding = new-object System.Text.AsciiEncoding

      $outputBuffer = ""
      $foundMore = $false

      ## Read all the data available from the stream, writing it to the
      ## output buffer when done.
      do
      {
        ## Allow data to buffer for a bit
        start-sleep -m 10000

        ## Read what data is available
        $foundmore = $false
        $stream.ReadTimeout = 12000

        do
        {
          try
          {
            $read = $stream.Read($buffer, 0, 1024)

            if($read -gt 0)
            {
              $foundmore = $true
              $outputBuffer += ($encoding.GetString($buffer, 0, $read))
              write-host $outputbuffer
            }
          } catch { $foundMore = $false; $read = 0 }
        } while($read -gt 0)
      } while($foundmore)

      $outputBuffer
    } 
```

当我必须等待 Telnet 会话另一端的服务器表明它已准备好时，就会出现问题。上面的实现简单地使用了 Start-Sleep（十秒！），然后发送下一个命令'blind'。

我想做的是，启动一个缓冲区以获取会话服务器发送到我的盒子的内容，然后根据我是否在该缓冲区中看到从终端会话返回的提示触发下一个命令。

示例（这是来自 IBM DS400 San 控制器的提示，脚本的目标）

xxxxxxSANCTRLnnn[A]>

现在，它们的名称将根据它们的位置 (xxxxxx)、正在访问的实际 SAN (nnn) 以及我正在访问的 SAN 中的两个控制器模块（A 或 B）中的哪一个而改变。因此，regex -match 语句对于系统提示的实际“模式匹配”非常有用。我对脚本专家的问题是，哪些方法可以：

1）让脚本在缓冲来自终端的输出时暂停 2）将该输出传递到日志文件 3）在预期的“提示”上进行模式匹配，然后发出下一个命令

提前致谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:51:22.303

怎么办……直到？

做{开始睡眠-sec 1; （并刷新从服务器读取）} 直到 (!$foundMore)

# java - How can I iterate an array of objects that will change a few time a time, but while ensuring all items are iterated?

> ID：13885045
> 
> 赞同：0
> 
> 时间：2012-12-14T19:24:23.363
> 
> 标签：java

I have a Java-based [Bukkit](http://bukkit.org/) plugin (fairly irrelevant to the issue at hand but noteworthy) that will, every 30 minutes, query a web API for updates to pass on to users.

Here is the existing method, which works fine to pass every user to the API:

```
public ApiMessenger()
{        
    TASK_ID = Bukkit.getScheduler().scheduleAsyncRepeatingTask(plugin,new Runnable()
    {
        @Override
        public void run()
        {
            if(Bukkit.getOnlinePlayers().length > 0)
            {
                ApiMessenger.fetchPlayerItems(Bukkit.getOnlinePlayers(),true);
            }
        }
    }, 20*60*30, 20*60*30);
} 
```

However the API will accept, at most, 30 users at a time.

So any server using this plugin that has more than 30 users on at a time will not be able to submit all their users at once, because the rest will be ignored.

What I'm trying to figure out is what kind of setup would allow me to store all the users with some form of a timestamp so that the ApiMessenger method shown above can remember which users have been sent and attempt to send the ones who have been waiting the longest for an update first.

I can manage removing/adding users as they join/leave, but my main concern is first creating a sorted data structure that can be updated as the groups of 30 users are sent.

Unfortunately I don't know which data types in Java to use to create such a structure that can be iterated in an ascending fashion.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:27:29.923

您是否考虑过使用队列？[你可以在这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)用 Java 阅读它。当玩家登录时，只需将他们添加到要处理的玩家队列中即可。然后，只需从列表中弹出 30 个项目并处理它们。然后，您只需将这些用户推到队列的后面即可。如果玩家下线，您可以将他们从队列中移除或检查他们在处理队列时是否在线。如果我理解正确 - 这应该可以帮助您解决问题！

# php - 将变量参数作为另一个值返回？

> ID：13885050
> 
> 赞同：0
> 
> 时间：2012-12-14T19:24:49.610
> 
> 标签：php

我有这个代码：

```
$set = "argument";
function imp_set($set){
    $sql=mysql_query("SELECT $set FROM settings WHERE id=1");
    if($sql){
        $res=mysql_result($sql,0);
    }
    $set = $res;
} 
```

我想`echo("$argument");`显示`$res`价值。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:30:53.293

```
$set = "argument";
function imp_set($set){
    $sql=mysql_query("SELECT $set FROM settings WHERE id=1");
    if($sql){
        $res=mysql_result($sql,0);
    }
    $$set = $res;
    echo $argument;
} 
```

话虽如此，这是一个奇怪的请求，而且您也没有从该函数返回任何内容。考虑到它们引入的混淆，很少有人使用 php“变量”，因为它们令人困惑并且很少值得麻烦。

# android - 安装后看不到 Android SDK Manager 选项；以管理员身份运行无法解决

> ID：13885051
> 
> 赞同：15
> 
> 时间：2012-12-14T19:24:52.100
> 
> 标签：android, eclipse

我已经看到了几种解决方案，但都没有奏效。

我尝试使用“以管理员身份运行”打开 Eclipse。我可以在“Window”、“Preferences”和“Android”下查看到 Android SDK 的导航。我已验证该文件位于该位置。我已经多次重新安装，重新启动和重新启动。我也尝试过更新 Eclipse。

我根本看不到“窗口”下的“Android SDK Manager”选项。

我是 Eclipse 和 Android 开发的新手，第一次尝试设置 IDE。

我担心以前错误地安装了 C/C++ 的 Eclipse 是原因。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-14T20:35:33.617

我认为观点已经被你改变了。

转到 Windows -> Open Perspective->Other 并选择“Java(Default)”并单击 OK。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T11:24:25.443

我已经解决了以下问题：

Window > Custom Perspective（你会看到 Android 和 AVD Manager 被禁用）

命令组可用性 > Android 和 AVD 管理器 > 检查

工具栏可见性 > Android 和 AVD 管理器 > 检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:26:56.253

你在eclipse上安装过Android ADT插件吗？

[http://developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)

# javascript - jQuery中的Grep字符串

> ID：13885055
> 
> 赞同：0
> 
> 时间：2012-12-14T19:25:14.613
> 
> 标签：javascript, jquery

我有一个包含 2 个或更多类名的 jQuery 对象 (thisClass)。我试图弄清楚如何只返回预定数组中的类名。

像这样的东西：

```
var thisClass = $(this).attr("class");
var icons = ["glass","leaf","dog","home"];

[Use grep here to return thisClass only as a single class name that is filtered by, or contained in icons.] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:42:17.947

嗯，首先，`attr`方法返回字符串而不是 jQuery 对象。在这种情况下，它返回所有 CSS 类用空格分隔的字符串。如果没有类，则返回`undefined`. 所以，你可能想试试这个代码：

```
var thisClass = $(this).attr("class");
var result = [];

if(thisClass) {
    thisClass = thisClass.split(' ');
    for(var i = 0; i < thisClass.length; i++) {
        if(icons.indexOf(thisClass[i]) !== -1) {
            result.push(thisClass[i]);
        }
    }
} else {
    // return; or something. There is no classes.
} 
```

# jquery - jQuery Validate set rule使用通配符查找目标字段

> ID：13885056
> 
> 赞同：1
> 
> 时间：2012-12-14T19:25:15.747
> 
> 标签：jquery, jquery-validate

是否有可能通过通配符添加规则？我认为不可能制定这样的规则......

```
$("#form").validate({
        // errorLabelContainer: $("div#error"),
        errorElement: "p",
        errorClass: "form-error",
        rules: {
             $("input[name*='x.child']"): {
                required: true,
                minlength: 5
            }
        }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T22:33:45.873

使用内置`rules()`方法添加规则。 [请参阅文档。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

注意：调用*后***必须**调用该方法。*`.validate()`*

 *[jsFiddle 演示](http://jsfiddle.net/kSFKE/2/)

```
$("#form").validate({
    errorElement: "p",
    errorClass: "form-error"
});

// the following method must come AFTER .validate()
$("input[name*='x.child']").each(function() {
    $(this).rules('add', {
        required: true,
        minlength: 5
    });
}); 
```

当您向表单动态添加字段时，此方法也非常有用。

以下与 custom 结合使用`messages:`。请注意，格式与将规则添加为选项时略有不同`.validate()`...

```
$("input[name*='x.child']").each(function() {
    $(this).rules('add', {
        required: true,
        minlength: 5,
        messages: {
            required: "Required input",
            minlength: jQuery.format("At least {0} characters are necessary")
        }
    });
}); 
```

* * *

如其他地方所述，您还可以像这样创建`class`和使用...

[jsFiddle 演示](http://jsfiddle.net/kSFKE/)

HTML：

```
<input type="text" class="myclass" name="whatever" /> 
```

jQuery：

```
$("#form").validate({
    errorElement: "p",
    errorClass: "form-error"
});

// the following method must come AFTER .validate()
$('#form').find('.myclass').each(function() {
    $(this).rules('add', {
        required: true,
        minlength: 5,
        messages: {
            required: "Required input",
            minlength: jQuery.format("At least {0} characters are necessary")
        }
    });
}); 
```*

# sqlite - 执行没有脱离构造函数

> ID：13885057
> 
> 赞同：0
> 
> 时间：2012-12-14T19:25:22.507
> 
> 标签：sqlite

我正在关注本教程[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

所以我创造了

```
public DatabaseHelper (Context context) {
    super(context, DB_NAME, null, 1);
    //Log.d("LOGI JEM", "MRENDA CONTEXTIT: " + context.toString());
    this.myContext = context;
} 
```

我正在尝试从我的主类中执行它，如教程中所示：

```
DatabaseHelper myDbHelper = new DatabaseHelper();
    //Log.d("LOGI JEM", "MENIHERE MBAS COPY DATABASE MRENDA IF(DBEXISTS): " );
    myDbHelper = new DatabaseHelper(this); 
```

但是eclipse告诉我“构造函数DatabaseHelper（）未定义”并给了我三个修复，但没有一个对我有用。感谢您提供的任何支持...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:31:36.620

那是因为零参数的构造函数是未定义的。您将其定义为获取上下文。由于您没有在第二个区块的第 1 行中给它一个，因此它在抱怨。

另外，为什么要重新分配 myDbHelper 的值？只需使用新的 DatabaseHelper(context) 对其进行一次初始化。

最后，如果您所在的类不是 Context，那么将“this”传递给构造函数将是类型不匹配。

# java - 如何使用 jython 类中的 Java 计时器来安排其中一种类方法？

> ID：13885058
> 
> 赞同：1
> 
> 时间：2012-12-14T19:25:23.880
> 
> 标签：java, jython, python-multithreading

我有一个 jython 类，它作为一个线程运行。我希望它的 run 方法创建一个 java Timer，然后安排我的类的一个函数：

```
class IBTHXHandler(threading.Thread):

    def __init__(self):
        threading.Thread.__init__(self, name='IBTHX Handler Thread')
        self.start()

    def run(self):
        print 'ibthx thread running'
        timer = Timer
        timer.schedule(self.getRealtimeData(), 0, 1000)

    def getRealtimeData(self):
        print 'Getting Realtime Data' 
```

当我运行此代码时，我收到此错误：

```
TypeError: schedule(): 1st arg can't be coerced to java.util.TimerTask 
```

我也试过

```
timer.schedule(self.getRealtimeData, 0, 1000) 
```

这给了我

```
TypeError: schedule(): self arg can't be coerced to java.util.Timer 
```

有没有比使用 Java Timer 更好的方法来解决这个问题？

我查看了使用 python threading.Timer 类，但这给了我一些问题（我想是因为我是从另一个线程中调用它的？？）

无论如何，谢谢你看这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:32:31.080

代码有两个问题。第一个是你忘记了 Timer 后面的 () 来实例化它，第二个是要调度的第一个 arg 必须是一个定时器任务。以下代码应该可以工作。希望这可以帮助！

```
import threading
from java.util import Timer, TimerTask

class MyTimerTask(TimerTask):
    def run(self):
        print 'Getting Realtime Data'

class IBTHXHandler(threading.Thread):

    def __init__(self):
        threading.Thread.__init__(self, name='IBTHX Handler Thread')
        self.start()

    def run(self):
        print 'ibthx thread running'
        timer = Timer()
        timer.schedule(MyTimerTask(), 0, 1000)

IBTHXHandler() 
```

# javascript - 停止多余的刷新：JQuery

> ID：13885059
> 
> 赞同：3
> 
> 时间：2012-12-14T19:25:37.957
> 
> 标签：javascript, jquery

我有很多网站运行我的喊话框脚本，但这里有一个问题：

这个喊话框每 10 秒刷新一次，考虑一下如果它发生在拥挤的网站上会怎样！

它有时会给某些用户带来 javascript 错误

```
$(document).ready(function(){
updateShoutbox();
var auto_refresh = setInterval(
function ()
{
updateShoutbox();
}, 10000); 
```

改变时间段是一种选择，另一种是改善服务器资源。但我在这里有一篇论文：

如果有一种方法可以让这个东西变得更智能，因为它可能会在用户断开连接或没有专注于网站窗口时停止刷新？

我正在寻找一种方法，仅当网站窗口聚焦且互联网连接处于活动状态时才将喊话框刷新。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:30:49.473

在一次小型搜索中，我发现了这个[javascript 实现](http://www.bedroomlan.org/coding/detecting-%E2%80%98idle%E2%80%99-and-%E2%80%98away%E2%80%99-timeouts-javascript)，可以检测用户何时空闲或离开。

例子：

```
var auto_refresh = null;
$(function(){

    setIdleTimeout(2000); // 2 seconds
    setAwayTimeout(4000); // 4 seconds

    document.onIdle = function() { /* something on idle if you want */ }
    document.onAway = function() { if(auto_refresh != null) clearInterval(auto_refresh); }
    document.onBack = function(isIdle, isAway) { auto_refresh = setInterval("updateShoutbox();", 10000); }

    updateShoutbox();
    document.onBack();
}); 
```

当用户离开时，您可以使用此实现停止发送 ajax 请求。

* * *

## 回复评论：

> 好的，但我认为与所问问题更相关的部分是这个库是如何工作的以及它检测到什么，我认为对此进行阐述会得到一个更有用的答案。如果我是 OP，我想知道它是如何检测 onIdle 和 onAway 和 onBack 的，这些甚至与我的问题有关吗？– jfriend00

jfriend00，它使用 jQuery 或原型 api 跟踪文档中的交互事件：

```
function _initJQuery()
{
    _api = _API_JQUERY;
    var doc = $(document);
    doc.ready(function(){
            doc.mousemove(_active);
            try {
                doc.mouseenter(_active);
            } catch (err) { }
            try {
                doc.scroll(_active);
            } catch (err) { }
            try {
                doc.keydown(_active);
            } catch (err) { }
            try {
                doc.click(_active);
            } catch (err) { }
            try {
                doc.dblclick(_active);
            } catch (err) { }
        });
}

function _initPrototype()
{
    _api = _API_PROTOTYPE;
    var doc = $(document);
    Event.observe (window, 'load', function(event) {
        Event.observe(window, 'click', _active);
        Event.observe(window, 'mousemove', _active);
        Event.observe(window, 'mouseenter', _active);
        Event.observe(window, 'scroll', _active);
        Event.observe(window, 'keydown', _active);
        Event.observe(window, 'click', _active);
        Event.observe(window, 'dblclick', _active);
    });
}

// Detect the API
try {
    if (Prototype) _initPrototype();
} catch (err) { }

try {
    if (jQuery) _initJQuery();
} catch (err) { } 
```

然后它使用超时来跟踪用户何时没有与页面交互，基本上，如果用户在超时执行之前进行交互，则该函数清除超时并重新启动它，因此仅在用户不执行时才执行与页面交互：

```
function setIdleTimeout(ms)
{
    _idleTimeout = ms;
    _idleTimestamp = new Date().getTime() + ms;
    if (_idleTimer != null) {
    clearTimeout (_idleTimer);
    }
    _idleTimer = setTimeout(_makeIdle, ms + 50);
    //console.log('idle in ' + ms + ', tid = ' + _idleTimer);
} 
```

当用户返回时，它与页面交互，通过标志检测他离开或空闲，如果他离开则执行 onBack 并再次启动 setTimeout

```
function _active(event)
{
    var t = new Date().getTime();
    _idleTimestamp = t + _idleTimeout;
    _awayTimestamp = t + _awayTimeout;
    //console.log('not idle.');

    if (_idleNow) {
    setIdleTimeout(_idleTimeout);
    }

    if (_awayNow) {
    setAwayTimeout(_awayTimeout);
    }

    try {
    //console.log('** BACK **');
    if ((_idleNow || _awayNow) && document.onBack) document.onBack(_idleNow, _awayNow);
    } catch (err) {
    }

    _idleNow = false;
    _awayNow = false;
} 
```

# android-location - requestLocationUpdates() 最初是否检索缓存位置，然后随后获取新位置？

> ID：13885065
> 
> 赞同：3
> 
> 时间：2012-12-14T19:26:01.330
> 
> 标签：android-location

是否`requestLocationUpdates()`最初检索缓存的位置然后随后获取新位置？

我们正在开发一个使用当前位置搜索本地企业的应用程序。该应用程序大部分时间都运行良好。但是一旦它给出了错误的位置。它返回的不是当前位置，而是一个陈旧的位置。它离这里大约 20 英里，大约有几个小时的历史。在那两个小时内，我没有运行任何其他可能使用 GPS 或网络位置的应用程序。电话一直开着。

该应用程序在带有姜饼的摩托罗拉 Atrix 4G 上运行。由于我们只需要一次位置，我们只需使用我们获得的第一个位置。该应用程序打算在前台接收位置。

请看一下代码，看看是否有任何问题。

```
public class MyLocation {
    LocationManager lm;
    boolean network_enabled=false;
    public static double lat = 0.0;
    public static double lng = 0.0;

    public boolean getLocation(Context context)
    {
        //I use LocationResult callback class to pass location value from MyLocation to user code.
        if(lm==null)
            lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        //exceptions will be thrown if provider is not permitted.
        try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){ex.printStackTrace();}

        //don't start listeners if provider is not enabled
        if(!network_enabled)
            return false;

        if(network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        return true;
    }

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            lat = location.getLatitude();
            lng = location.getLongitude();
            lm.removeUpdates(this);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-17T21:20:27.350

接收缓存位置通常是由调用 getLastKnownLocation(LocationManager.NETWORK_PROVIDER) 引起的。但是，您的代码似乎没有使用此方法。

使用与您描述的应用程序类似的应用程序并使用与您编写的代码类似的代码（没有 getLastKnownLocation(LocationManager.NETWORK_PROVIDER) 的代码），我们观察到 requestLocationUpdates() 在检索“新”位置之前返回缓存位置的时间.

我不相信 requestLocationUpdates() 固有地返回一个陈旧的位置。从机器人文档：

> 在 Android 中获取用户位置是通过回调的方式工作的。您表示您希望通过调用 requestLocationUpdates() 接收来自 LocationManager（“位置管理器”）的位置更新，并传递一个 LocationListener。您的 LocationListener 必须实现多个回调方法，当用户位置更改或服务状态更改时，位置管理器会调用这些回调方法。

在我们的测试中，接收这些陈旧的位置肯定是不常见的，并且似乎会影响旧版本的 android (4.0.4)

对于我们的应用程序，忽略从 requestLocationUpdates() 返回的第一个位置并简单地使用第二个位置就足够了。

# android - Android 4.2 锁屏小部件不可能。漏洞？

> ID：13885066
> 
> 赞同：1
> 
> 时间：2012-12-14T19:26:04.940
> 
> 标签：android, android-4.2-jelly-bean, lockscreen, android-appwidget

当我将 appwidget 定义为仅锁定屏幕（小部件信息 xml 文件中的 android:widgetCategory="keyguard"）时，它仍然可以选择为主屏幕小部件。

运行时检查显示 widgetcategory=2（=仅锁定屏幕），但在主屏幕上时它具有类别 1（=主屏幕）。

只是想知道这是预期行为还是 Android 4.2 错误。4.2 和 4.2.1 中存在问题。在模拟器、Galaxy Nexus 和 Nexus 7 上验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:04:45.337

这感觉像是一个错误，并且[已经提交了错误报告](http://code.google.com/p/android/issues/detail?id=40371)。

# javascript - 安全 jQuery Mobile + Phonegap

> ID：13885071
> 
> 赞同：7
> 
> 时间：2012-12-14T19:26:29.123
> 
> 标签：javascript, html, security, cordova, jquery-mobile

我是智能手机和平板电脑开发 Html 5 的新手，目前正在开发 Html 5、CSS、jQuery Mobile 和 PhoneGap 项目。

应用程序通过 XMLHttpRequest 执行的 SOAP Web 服务与服务器进行通信。新手如何想知道如果我不得不求助于插件、数据加密等，我必须在应用程序中解决什么安全问题，我需要使用所有这些来保证安全。

验证用户名和密码不使用表单。不要在页面之间传递参数。我没有使用 php。我不知道它是否可以规避代码的可见性，因为我正在为 Android 和 iOS 开发。

由于我的经验不足，暂时在.js中使用全局变量来保存用户名和密码，以便访问其他方法的网络服务。请就这个安全问题寻求帮助，因为我不知道从哪里开始、继续和结束。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:30:24.320

有一个非常详细的 PhoneGap 和安全性分类：[https ://github.com/phonegap/phonegap/wiki/Platform-Security](https://github.com/phonegap/phonegap/wiki/Platform-Security)

简而言之，如果您担心数据的“无线”传输，请使用带有 SSL 的服务器，就像在 Web 应用程序中一样。如果您担心设备加密，则将其委托给操作系统的默认安全机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:41:11.930

您的特定技术堆栈与任何其他 Web 应用程序没有什么不同。您仍然容易受到大量漏洞的影响。

从它的声音来看，您只关心应该考虑的客户端漏洞。如果是这种情况，您应该考虑很多事情。

1.  如果您使用的是 HTML5，请确保您使用的任何本地 API 都受到保护。OWASP 有一个很好的最佳实践列表，可以遵循[https://www.owasp.org/index.php/HTML5_Security_Cheat_Sheet](https://www.owasp.org/index.php/HTML5_Security_Cheat_Sheet)，其中只有一些可能适用于您的特定应用程序。
2.  您要为 XSRF 或 CSS（跨站点脚本或 XSS）实施的任何类型的防御都是徒劳的。唯一可以全面发挥作用的防御类型是在应用程序的服务器端实现的（在本例中为 PHP）。
3.  此外，如果您希望数据在传输过程中通过 SSL 加密，则必须由服务器（SOAP Web 服务端点）处理。如果这不能完成，那么更复杂的替代方法是使用 WS-Security ( [http://en.wikipedia.org/wiki/WS-Security](http://en.wikipedia.org/wiki/WS-Security) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:35:51.120

与 webapps 相同的安全性和注意事项，切勿在 phonegap 项目中使用来自 parse、stackmob、google 或 bing 地图等 api 的私钥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T00:33:08.137

除了跟进其他评论...我建议使用 HTTPS/SSL + OAUTH（或其他一些基于令牌的机制）而不是在每个请求中传递用户名/密码...尽管简单的 HTTP 身份验证有效。

# android - 在水平条android下方的seekbar中设置拇指

> ID：13885077
> 
> 赞同：0
> 
> 时间：2012-12-14T19:26:46.687
> 
> 标签：android

请问有人知道在xml中或以编程方式在搜索栏下方设置拇指的属性吗？我在我的应用程序中需要这个

```
SeekBar seekBar = new SeekBar(this);
seekBar.setMax(15);
seekBar.setIndeterminate(true);
seekBar.setMinimumWidth(200);

ShapeDrawable thumb = new ShapeDrawable( new OvalShape() );
thumb.getPaint().setColor( 0x00FF00 );
thumb.setIntrinsicHeight( 80 );
thumb.setIntrinsicWidth( 30 );

seekBar.setThumb(thumb);
seekBar.setProgress(1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T07:09:23.343

可能已经晚了...
但是您可以通过这种方式创建图像....
制作一个矩形图像，其中顶部是透明的，底部图像会出现....所以用户会像图像一样看到它在水平的底部..

# mysql - MySQL查询从嵌套集中获取节点的完整路径

> ID：13885081
> 
> 赞同：0
> 
> 时间：2012-12-14T19:27:03.433
> 
> 标签：mysql, postgresql, path, sphinx, nested-sets

我有嵌套的集合表（MySQL），里面有大约 150 万条记录。表结构为：

```
id | name | root_id | lft | rgt | level 
```

我需要获取字符串，其中包含所有父记录的名称加上记录名称，我们称之为“全名”。例如，它将是

```
"United States, California, Los Angeles" 
```

为“洛杉矶”唱片。

我可以使用以下命令查询 ONE 记录的所有名称：

```
SELECT parent.name
FROM location AS node,
     location AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
        AND parent.root_id=node.root_id AND node.id=:id
ORDER BY parent.level 
```

并使用 implode() 构建 full_name

但是此请求仅适用于一条记录，对于多个呼叫而言工作速度太慢。所以现在我想将 'full_name' 添加到 Sphinx 索引（或者可能直接添加到 MySQL）。

问题：

*   是否可以构造这样的 sql 查询，为每条记录选择“full_name”以将其放入 Sphinx 索引？我认为这将是这种情况的理想解决方案。

*   我还尝试更新 MySQL 表，添加“full_name”字段，但我的更新请求需要几天时间才能完成。这是个好主意吗？是否有可能使此更新足够快？

*   我在想，也许我应该转移到 PostgreSQL 并使用分层请求（我没有使用这个数据库的经验，所以不能确定）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:11:51.657

当您说您正在更新表以添加 full_name 字段时，您的意思是您正在为每条记录单独运行上述查询吗？

真的不应该那么慢，你的表上有正确的索引吗？

无论如何，您可以通过只运行一个实际查询来更快地获取所有记录。这里的功能： [http ://www.sitepoint.com/hierarchical-data-database-2/](http://www.sitepoint.com/hierarchical-data-database-2/)

可以轻松修改，更新所有记录。与其打印一个缩进列表，循环的每次迭代都应该运行一个更新语句。除了维护 $right 数组外，还需要维护一个字符串列表。在哪里添加/删除正确的同时添加另一个数组。

```
// start with an empty $right stack
$right = array();
$names = array();

// now, retrieve whole tree
$result = mysql_query('SELECT id, name, full_name, lft, rgt FROM location ORDER BY lft ASC');

// update each row
while ($row = mysql_fetch_array($result)) {
    // only check stack if there is one
    if (count($right)>0) {
        // check if we should remove a node from the stack
        while ($right[count($right)-1]<$row['rgt']) {
            array_pop($right);
            array_pop($names);
        }
    }

    // add this node to the stack
    $right[] = $row['rgt'];
    $names[] = $row['name'];

    if (empty($row['full_name'])) {
        mysql_query("UPDATE location SET full_name='".mysql_real_escape_string(implode(', ',$names))."' WHERE id=".intval($row['id']));
    }
} 
```

如果这仍然很慢，而不是更新原始表，将 full_name（连同 id）插入到一个没有任何索引的新表中。更改表以在 id 列上添加索引，然后运行多表更新，以从临时表更新主表。这会更快，因为它不是零星地更新主要索引，而是在一个大批量上进行。

# sql - 如何使用多个分隔符+JDBC

> ID：13885085
> 
> 赞同：1
> 
> 时间：2012-12-14T19:27:37.483
> 
> 标签：sql, jdbc, ant, plsql

我正在使用 ant 的 jdbc 编译。现在默认分隔符是斜线。有什么办法可以使用多个分隔符。两者都喜欢；和 /

```
<sql driver="oracle.jdbc.driver.OracleDriver"
url="jdbc:oracle:thin:@10.184.133.133:1521:SUPP"
userid="${UsernameB}"
password="${PasswordB}"
onerror="continue"
delimitertype="row"
delimiter="/"
keepformat="yes"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:53:18.263

现在没有改变什么。您可以制作任务的副本并将其更改为您想要的。不过，这不是最简单的解决方案。

我建议您使用 Ant 来：

1.  制作文件的副本
2.  将副本中的所有分号变成斜杠
3.  使用 sql 任务加载副本

# c++ - C ++将各种资源文件链接到一个可执行文件中

> ID：13885086
> 
> 赞同：0
> 
> 时间：2012-12-14T19:27:41.957
> 
> 标签：c++, linker, appletviewer

我创建了一个小型 c++ 程序，它启动了一个显示我的 Java Applet 的 appletviewer。我已将 main.cpp 文件编译为 main.o 文件，现在我想通过将 main.o 文件与我的 applet.class 文件链接来创建单个 .exe 文件。我怎么能这样做？（仅供参考，我正在使用 MinGW 命令行编译器）。有没有办法将 .class 文件和 .html/.htm 文件转换为 .o 文件或另一个目标文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:33:58.733

这就是 jar 文件的用途。在 Java 中部署应用程序应采用 jar 文件的形式。如果您正在编写本机代码包装器来启动虚拟机，那么您做错了。从好的方面来说，将小程序重构为应用程序通常非常简单。只需从 JFrame 继承而不是您正在使用的任何小程序类，然后编译并导出到清单中具有 Main-Class 属性的可执行 jar。

# android - 状态栏通知的点击事件

> ID：13885088
> 
> 赞同：-1
> 
> 时间：2012-12-14T19:27:52.030
> 
> 标签：android

我有一个通知栏（每天 2 个事件）。字符串数组的小列表，获取随机数的方法和下面的代码。

我需要可以单击事件并在该活动（not1 [x]）上打开一个带有字符串变量显示的新活动。

会怎么做？

随机的（）;

```
String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);
        int icon = R.drawable.ic_launcher2;
        CharSequence tickerText = not1[x];
        long when = System.currentTimeMillis();
        Notification notification = new Notification(icon, tickerText, when);
        CharSequence contentTitle = "Title";
        CharSequence contentText = not1[x];;
        Intent notificationIntent = new Intent();
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
        final int HELLO_ID = 1;
        mNotificationManager.notify(HELLO_ID, notification); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:51:06.550

只是改变你的代码

```
Intent notificationIntent = new Intent(context,yourActivityclass);
   PendingIntent contentIntent = PendingIntent.getActivity(context, 0,notificationIntent, 0); 
```

只需使用字符串的代码

```
Intent i = new Intent();
i.putExtra("key", stringValue);

Intent other = new Intent()
other.getStringExtra(key) 
```

# forms - 使用 Symfony 2.1 访问未映射到下划线类的字段值

> ID：13885089
> 
> 赞同：1
> 
> 时间：2012-12-14T19:27:56.683
> 
> 标签：forms, symfony-2.1

我有一个 Doctrine 实体类，像往常一样使用 Symfony 2.1 映射到一个表单类。但是，我还有一个将映射选项设置为 false 的字段，这是一个隐藏字段。我想在树枝模板中访问该字段的值，并在将新实体保存到数据库之前获取控制器内部的值。通常从我使用的树枝访问值

```
{{ form.vars.value.myfieldname }} 
```

但是在这种情况下，我不明白为什么会引发错误：

```
Method "myfieldname" for object "MyBundle\Entity\MyEntity" does not exist 
```

另外，我不明白在将请求绑定到表单后如何从控制器访问该字段的值。通常我可以调用 myentity->getMyfield() 并且我会得到值，但 myfieldname 现在它不是实体属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T10:41:17.953

这应该足够了（它肯定适用于 symfony 2.3）：

```
{{ form.myfieldname.vars.data }} 
```

# vb.net - 将特定日期转换为本地短日期格式

> ID：13885093
> 
> 赞同：3
> 
> 时间：2012-12-14T19:28:10.163
> 
> 标签：vb.net

在我们的应用程序中，我们根据以编程方式确定的月末日期构建日期选择菜单。在美国，日期可能是 2012 年 12 月 31 日。在法国，它可能是 2012 年 12 月 31 日，也可能是我从 CultureInfo 获得的稍微不同的格式。

我的问题是：如果我有一个由应用程序生成的字符串日期，例如 2012 年 12 月 31 日 - 我如何才能为应用程序运行的文化正确格式化它？我无法将字符串转换为日期然后对其进行格式化，因为我不提前知道应用程序在哪种文化中运行以及什么构成有效日期。我是否必须解析短日期格式才能正确显示日期？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:30:45.037

> 我无法将字符串转换为日期然后对其进行格式化，因为我不提前知道应用程序在哪种文化中运行

是的你可以。您可以将其解析为 a`DateTime`并使用当前文化对其进行格式化。

VB.NET：

```
Dim myDate As DateTime 
             = DateTime.Parse("12/31/2012", CultureInfo.InvariantCulture)
Dim cultureAwareShortDate As String =
             = myDate.ToString("d", Thread.CurrentThread.CurrentUICulture) 
```

C＃：

```
var myDate = DateTime.Parse("12/31/2012", CultureInfo.InvariantCulture);
var cultureAwareShortDate
             = myDate.ToString("d", Thread.CurrentThread.CurrentUICulture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:19:44.817

理想情况下，应用程序会将日期生成为 DateTime 而不是 String。然后，您不需要使用 Oded 显示的转换作为第一步。

# sql - 为什么这个删除语句有效？

> ID：13885096
> 
> 赞同：4
> 
> 时间：2012-12-14T19:28:40.347
> 
> 标签：sql, sql-server, sql-server-2008-r2, delete-row

> **可能重复：**
> [SQL 查询如何有两个 from 子句？](https://stackoverflow.com/questions/8011197/how-can-a-sql-query-have-two-from-clauses)

```
delete from machine_placement_group
from (machine_group g
left  join config_chg_req r
   on g.machine_group_id = r.machine_group_id)
join machine_placement_group mg
  on g.machine_group_id = mg.machine_group_id 
```

我不明白这两个陈述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:42:26.030

第一个 from 是可选的，第二个不是。

例如你可以写

```
delete from table1 where id = 10 
```

或者

```
delete table1 where id = 10 
```

但是，如果您要加入其他表，因为此查询是您需要第二个 FROM。

我喜欢这样的风格是使用别名，所以我会写。

```
delete g
--select *
from machine_group g
left  join config_chg_req r
   on g.machine_group_id = r.machine_group_id
join machine_placement_group mg
  on g.machine_group_id = mg.machine_group_id 
```

您注意到我如何在语句中嵌入选择，这使您可以通过仅从选择运行到查询结束来查看在运行报告之前将删除哪些记录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:59:31.447

引用*第二个*FROM的[文档：](http://msdn.microsoft.com/en-us/library/ms189835.aspx)

 *> FROM table_source
> 
> 指定附加的 FROM 子句。**这个对 DELETE 的 Transact-SQL 扩展允许`<table_source>`在第一个 FROM 子句中指定数据并从表中删除相应的行。**
> 
> 这个扩展，指定一个连接，可以用来代替 WHERE 子句中的子查询来标识要删除的行。
> 
> 有关详细信息，请参阅[FROM (Transact-SQL)。](http://msdn.microsoft.com/en-us/library/ms177634.aspx)

所以基本上它会按照锡上所说的那样做。您指定一个附加结果集，从中确定要在原始表中删除的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:54:21.863

我认为它也可以写成

```
delete machine_placement_group
from machine_group g
left  join config_chg_req r
   on g.machine_group_id = r.machine_group_id
join machine_placement_group mg
  on g.machine_group_id = mg.machine_group_id 
```

并作为一个有效的陈述，如

```
Declare @Test Table (id int)
insert into @Test values(1)

delete   dbo.Employee 
from  @test g
join dbo.Employee e on g.id=e.ID 
```

从 @test 中删除任何行，以符合连接条件，例如

```
delete   dbo.Employee 
from  @test g 
```*

# node.js - 将响应与对 node.js 的请求匹配

> ID：13885097
> 
> 赞同：0
> 
> 时间：2012-12-14T19:28:44.773
> 
> 标签：node.js

我在 Web 编程方面相对较新，所以这对某些人来说可能很明显，但对我来说不是。异步请求的请求/响应对如何匹配？在极端情况下，我可能有一个异步 jQuery 请求，它调用使用 node.js 并且也是异步的服务器。如果我进行大量此类调用，请求/响应似乎会混淆。有哪些设施可以确保它们不会混淆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:06:30.520

The requests and their responses cannot get mixed up as you would typically provide a callback function into the function that initiates the request to a server. Node keeps the two together.

for example:

```
http.get("http://www.google.com/index.html", function(res) {
  console.log("Got response: " + res.statusCode);
}).on('error', function(e) {
  console.log("Got error: " + e.message);
}); 
```

The http.get function will initiate a request to google and node will store a reference to your callback function (function(res){...}).

Node will then continue executing your current function (any code that comes after http.get) until a point where it no longer has any code to execute.

As soon as google starts sending a response back and node isn't doing anything else, node finds your function and the corresponding response object will be passed to it, ready for you to use it.

Node is single threaded, which means that it cannot do more than 1 thing at a time. That's why it doesn't call your callback function until it is finished executing the current function **and** google has responded.

Have a look here for more info: [http://nodejs.org/api/http.html#http_class_http_clientrequest](http://nodejs.org/api/http.html#http_class_http_clientrequest)

PS: you don't have to provide a callback function. However, if you don't, you will never know whether the request was successful or not. So it's good practice to always provide one. At the very least it should log any errors.

# windows - 来自命令提示符的 Windows 8 通知服务通知

> ID：13885098
> 
> 赞同：8
> 
> 时间：2012-12-14T19:28:45.293
> 
> 标签：windows, windows-8, notifications

您可以通过命令提示符发送 Windows 8 Windows 通知服务 (WNS) 吗？

示例：sass 样式表编译时的通知

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T00:28:06.477

你想要的（嗯，我想要的，所以我希望你也这样做）是[烤面包机](https://github.com/nels-o/toaster)。

> 一个小的 Win8 控制台通知应用程序。从控制台发布 toast 通知，使其易于集成到现有的批处理脚本等。

只需下载 master.zip 文件，就有一个名为 toast.exe 的编译二进制文件。

从命令提示符或批处理文件：

```
toast -t "Title text" -m "Message text goes here" -p c:\users\me\picture.png 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T19:31:57.490

您可以从任何桌面应用程序发送 Windows 8 通知。

除了从命令提示符项目开始外，它应该与[此示例相同。](http://code.msdn.microsoft.com/windowsdesktop/Sending-toast-notifications-71e230a2#content)

[请参阅此处](http://msdn.microsoft.com/en-us/library/Hh802768)的 msdn 快速入门。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-01T02:02:23.450

有一个名为[snoretoast](https://github.com/KDE/snoretoast)的命令行实用程序。

它有你可以放在某个地方的[二进制文件。](https://github.com/KDE/snoretoast#releases-and-binaries)（一种选择是将提供的“SnoreToast.exe”解压缩到“c:\Windows\System32”文件夹中。该文件夹已经在您的系统上`PATH`，因此该命令将立即从您系统上的任何位置可用）。

一旦安装了二进制文件，您所要做的就是调用命令。例如，

```
SnoreToastGui -t "Way back" -m "Back to the future" 
```

显示标题为“Way back”且消息为“Back to the future”的 Toast 通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-20T14:21:17.920

您可以使用[java-wns](http://fernandospr.github.io/java-wns/)库来创建自定义命令行应用程序以满足您的需求。

# php - 检查作为另一个数组值存在的数组键

> ID：13885101
> 
> 赞同：0
> 
> 时间：2012-12-14T19:29:16.880
> 
> 标签：php, arrays, multidimensional-array, foreach, associative-array

我有一个名为`$menu_array`;的数组 目前看起来像这样

```
 [0] => Array
    (
        [id_parent_menu] => 4
        [parent_info] => test
        [children_menu] => Array
            (
                [0] => Array
                    (
                        [id_child_menu] => 21
                        [children_info] => test
                    )

                [1] => Array
                    (
                        [id_child_menu] => 22
                        [children_info] => test2.
                    )

            )

    ) 
```

等等。

我还有另一个`$access`看起来像这样的数组：

```
 array(
          [4]='true'
          [22]='true'
     ) 
```

我要做的是检查`$access`数组的键是否以 a 形式存在`id_parent_menu`，然后放置一个键和值

```
$menu_array[can_view]='true'; 
```

然后，还要检查如果a键作为 a 存在的`$children_menu`数组内部是否也在其中设置一个值。`$menu_array``$access``id_child_menu``can_view = true`

```
$menu_array['children_menu'][1]['can_view']='true'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:53:49.357

```
foreach ($menu_array as $key => $value){
  if(isset($access[$value['id_parent_menu']]) && $access[$value['id_parent_menu']])
  {
    $menu_array[$key]['can_view']=true;

    foreach($value['children_menu']  as $key2 => $value2)
      if(isset($access[$value2['id_child_menu']]) && $access[$value2['id_child_menu']])
         $menu_array[$key]['children_menu'][$key2]['can_view']=true;
  }

} 
```

（仅当父项可见时，子项才可见。）

# jquery-svg - 使用 jQuery 访问 SVG 并编辑 SVG 路径

> ID：13885103
> 
> 赞同：1
> 
> 时间：2012-12-14T19:29:22.907
> 
> 标签：jquery-svg

请帮我！我用inkscape创建了一些形状并将其保存为SVG，我创建的路径我给了它们ID。现在我已经将SVG文件与我的html链接起来，我知道想用jQuery访问这些路径（id = path123）和开始使用 jQuery 进行编辑和操作。

我的职责是当我将鼠标悬停在其中一条路径上时，它会显示带有一些信息的工具提示。

我试着放一个

PS。我用谷歌搜索并找到了其他使用 jquery 编辑 svg 的示例，但无法找到如何使用从 inkscape 创建的这个文件。

这是我用inkscape创建的svg文件代码

```
 <svg    xmlns:dc="http://purl.org/dc/elements/1.1/"       xmlns:cc="http://creativecommons.org/ns#"       xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"       xmlns:svg="http://www.w3.org/2000/svg"       xmlns="http://www.w3.org/2000/svg"       xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"      xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"       id="svg2"    version="1.1"    inkscape:version="0.48.3.1 r9886"       width="700"    height="700"       sodipodi:docname="dresden_stadtplan.svg">
<metadata
id="metadata8">    <rdf:RDF>
 <cc:Work
    rdf:about="">
   <dc:format>image/svg+xml</dc:format>
   <dc:type
      rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
   <dc:title />
 </cc:Work>    </rdf:RDF>   </metadata>   <defs
id="defs6" />   <sodipodi:namedview
pagecolor="#ffffff"
bordercolor="#666666"
borderopacity="1"
objecttolerance="10"
gridtolerance="10"
guidetolerance="10"
inkscape:pageopacity="0"
inkscape:pageshadow="2"
inkscape:window-width="1600"
inkscape:window-height="837"
id="namedview4"
showgrid="false"
inkscape:zoom="5.8914897"
inkscape:cx="463.20516"
inkscape:cy="383.84894"
inkscape:window-x="-8"
inkscape:window-y="-8"
inkscape:window-maximized="1"
inkscape:current-layer="svg2" />

   <path

style="fill:#ff0000;fill-opacity:1"
d="m 111.31017,341.21991 c -2.83068,-4.51496 -26.313691,-48.71085 -25.978291,-48.89209 0.17497,-0.0946 2.27309,-1.611 4.66248,-3.36987 3.77122,-2.77606 4.34435,-3.81327 4.34435,-7.86208 0,-3.61043 0.76503,-5.42916 3.38636,-8.05049 3.926741,-3.92674 5.434611,-4.11447 11.151301,-1.38837 4.05342,1.93294 4.32884,1.918 8.45895,-0.45899 l 4.26911,-2.45699 3.97763,5.96183 c 2.18769,3.27901 8.85887,14.02037 14.82484,23.86969 l 10.84721,17.90786 -4.5704,4.34874 c -3.52029,3.34955    -4.75046,5.5494 -5.35404,9.57432 -0.54601,3.64109 -1.68911,5.93783 -3.7699,7.57459 -3.43812,2.70442 -5.12529,2.86927 -10.28197,1.00458 -3.29965,-1.19317 -4.31422,-0.99497 -9.01815,1.76172 l -5.30022,3.10614 -1.64926,-2.63059 0,0 z"
id="path5874"
inkscape:connector-curvature="0"

   />    <path
style="fill:#ff0000;fill-opacity:1"
d="m 136.9525,224.92803 c -4.64104,-6.78303 -9.17039,-13.69944 -10.06522,-15.36982 -0.89482,-1.67037 -2.19813,-3.42005 -2.89623,-3.88817 -0.6981,-0.46812 -0.86489,-0.85911 -0.37065,-0.86887 0.49424,-0.01 0.0386,-1.68092 -1.01263,-3.71369 -1.849,-3.57558 -1.82507,-3.76573 0.73484,-5.83862 1.45535,-1.17847 3.47319,-2.60554 4.48408,-3.17126 1.54134,-0.86258 1.62065,-1.60438 0.4914,-4.59612 -1.31441,-3.48227 -1.2229,-3.64001 3.82934,-6.60082 l 5.17594,-3.0333 2.69869,2.53528 c 2.57971,2.42352 2.88973,2.45546 7.03221,0.72462 2.38345,-0.99587 4.76297,-1.81067 5.28783,-1.81067 0.52486,0 4.34695,5.08289 8.49353,11.29531 4.14658,6.21241 9.06194,12.95014 10.92302,14.97273 1.86109,2.02259 3.73484,5.54867 4.16389,7.83573 0.69843,3.72296 0.22206,4.8835 -4.55039,11.08565 -6.26075,8.13632 -7.42181,8.86945 -15.72257,9.92774 -3.45536,0.44053 -7.17715,1.26134 -8.27065,1.82401 -1.64414,0.84601 -3.44832,-1.11101 -10.42643,-11.30973 l 0,0 z"
id="path5876"
inkscape:connector-curvature="0" />   <path
style="fill:#ff0000;fill-opacity:1"
d="m 352.56153,48.087185 c -4.56513,-3.553516 -3.4166,-11.596461 1.9471,-13.63575 4.3333,-1.647519 12.4108,2.836523 11.4099,6.333936 -2.0237,7.071358 -8.8553,10.805959 -13.357,7.301814 z"
id="path5878"
inkscape:connector-curvature="0" />   <path
style="fill:#ff0000;fill-opacity:1"
d="m 359.63348,385.80737 c -1.5929,-1.04299 -4.0692,-2.93115 -5.5028,-4.1959 -1.4626,-1.29025 -2.6066,-1.70243 -2.6066,-0.9391 0,0.74823 -0.4648,1.36043 -1.0329,1.36043 -1.683,0 -2.4824,-5.17834    -1.691,-10.95275 0.6552,-4.77978 1.2379,-5.64302 5.1606,-7.64419 2.432,-1.24076 5.2247,-2.25593 6.2058,-2.25593 0.9812,0 1.7839,-0.52132 1.7839,-1.15849 0,-2.33186 4.3677,-1.05787 9.9292,2.89623 3.1367,2.2301 6.3564,4.05473 7.1549,4.05473 1.975,0 1.8324,3.68793 -0.2491,6.43991 -0.9355,1.23683 -1.7175,3.39099 -1.7377,4.78702 -0.02,1.39603 -0.5667,2.86569 -1.2143,3.2659 -0.6475,0.40022 -0.8774,1.21297 -0.5108,1.80611 0.3665,0.59315 -0.8286,1.07844 -2.656,1.07844 -1.8273,0 -4.3343,0.76541 -5.5712,1.7009 -2.833,2.14283 -3.8693,2.10904 -7.462,-0.24331 z"
id="path5894"
inkscape:connector-curvature="0" />   <path
style="fill:#ff0000;fill-opacity:1"
d="m 444.96169,340.10887 c -3.8258,-2.93457 -6.9799,-5.40725 -7.00909,-5.49484 -0.0292,-0.0876 4.62863,-3.54441 10.35073,-7.68181 5.7221,-4.1374 11.30905,-8.20284 12.41545,-9.03431 1.54897,-1.16406 2.07932,-1.47829 2.30589,-1.36622 0.16184,0.08 3.05442,2.3988 6.42795,5.15277 5.7798,4.71832 6.11684,5.02377 5.84146,5.29402 -0.41909,0.41127 -23.18963,18.46278 -23.29152,18.46452 -0.0467,8.5e-4 -3.21507,-2.39956 -7.04087,-5.33413 z"
id="path3012"
inkscape:connector-curvature="0"/>

   </svg> 
```

谢谢阿尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:49:52.720

在 javascript 中创建一个 SVG 路径对象，如下所示：

```
var pathdata = 'm 111.31017,341.21991 c -2.83068,-4.51496 -26.313691,-48.71085 -25.978291,-48.89209 0.17497,-0.0946 2.27309,-1.611 4.66248,-3.36987 3.77122,-2.77606 4.34435,-3.81327 4.34435,-7.86208 0,-3.61043 0.76503,-5.42916 3.38636,-8.05049 3.926741,-3.92674 5.434611,-4.11447 11.151301,-1.38837 4.05342,1.93294 4.32884,1.918 8.45895,-0.45899 l 4.26911,-2.45699 3.97763,5.96183 c 2.18769,3.27901 8.85887,14.02037 14.82484,23.86969 l 10.84721,17.90786 -4.5704,4.34874 c -3.52029,3.34955    -4.75046,5.5494 -5.35404,9.57432 -0.54601,3.64109 -1.68911,5.93783 -3.7699,7.57459 -3.43812,2.70442 -5.12529,2.86927 -10.28197,1.00458 -3.29965,-1.19317 -4.31422,-0.99497 -9.01815,1.76172 l -5.30022,3.10614 -1.64926,-2.63059 0,0 z'
var svgpath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
svgpath.setAttribute('d', pathdata); 
```

我将您的第一个路径定义复制到 javascript 中。这是你想要达到的目标吗？您还可以创建一个 SVG 对象来操作整个定义。

```
var svgNode = document.createElementNS('http://www.w3.org/2000/svg', 'svg'); 
```

让我更多地了解您的需求，我会尽力提供帮助。

# objective-c - 核心数据保存托管对象上下文 - 错误指针为零

> ID：13885104
> 
> 赞同：0
> 
> 时间：2012-12-14T19:29:31.500
> 
> 标签：objective-c, core-data, pointers

保存对托管对象上下文的更改时出现错误，但我的错误处理程序有问题：错误为零，因此没有给我任何有用的信息。我有两个版本的错误处理程序。这是由 Xcode 生成的，它可以工作（即，日志消息包含有用的错误信息）：

AppDelegate.c

```
- (void)saveContext
{
NSError *error = nil;
NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
if (managedObjectContext != nil)
{
    if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
    {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    } 
}
} 
```

但我希望能够将成功/失败（最终，现在我只是中止）+错误信息传回给调用者，所以我有这个，它不起作用（错误为零，因此没有用有关错误的信息）。

数据库.h

```
+ (BOOL) commit:(NSError **)error; 
```

数据库.c

```
+ (BOOL) commit:(NSError **)error {

AppDelegate *appDelegate = (AppDelegate*) [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *managedObjectContext = appDelegate.managedObjectContext;

if (managedObjectContext != nil)
{
    if ([managedObjectContext hasChanges] && ![managedObjectContext save:error])
    {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
         */
        if (error == nil) {
            NSLog(@"Unresolved error");
            abort();
        } else {
            NSLog(@"Unresolved error %@, %@", *error, [*error userInfo]);
            abort();
            //return FALSE;
        }
    }
    return TRUE;
}
return FALSE;
} 
```

我很确定我的问题在于指针，并且迷失在重定向层中。

[编辑：]调用提交的代码：

```
[Database commit:nil]; 
```

我想知道是否需要在提交方法的开头添加类似的内容，但我不确定指针：

```
if (error == nil) {
    error = [[NSError alloc] init];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:26:25.020

如果`commit:`用`nil`（来自您的评论）调用，那么这可能是错误。您必须使用错误变量的地址调用您的函数：

```
NSError *error = nil;
if (![Database commit:&error]) {
    // commit failed, "error" contains error message.
} 
```

当然，`return NO`而不是`abort()`在方法内部的错误情况下`commit`。

无需在您的`commit`方法中分配错误消息。`[managedObjectContext save:error]`如果保存失败，将执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:27:06.393

我认为您需要在第二个版本中传递错误地址，不是吗？

```
[managedObjectContext save:error] 
```

应该：

```
[managedObjectContext save:&error] 
```

这允许接收方法控制指针（指针指向的）正在引用的内容。

# mysql - while 循环和毫秒

> ID：13885106
> 
> 赞同：0
> 
> 时间：2012-12-14T19:29:43.120
> 
> 标签：mysql, bash, loops

我一直在根据时间戳从我的数据库中删除记录。

我的查询很简单

```
delete from calldetailrecord where StartTime between 1262321999000 AND 1309492799000; 
```

1262321999000 = 2009 年 12 月 31 日星期四 23:59:59 GMT-0500（东部标准时间）

1296449999000 = 2011 年 1 月 30 日星期日 23:59:59 GMT-0500（东部标准时间）

几毫秒，我用过：

[http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/](http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/)进行计算

我想知道如何制作一个while循环来逐月删除数据并在没有更多数据时停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:32:52.627

> 我想知道如何制作一个while循环来逐月删除，当**没有更多数据**时它会停止。

如果要从表中删除所有数据，请使用 truncate 命令。

```
truncate calldetailrecord; 
```

只需一个人`delete`也可以

```
delete from calldetailrecord; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:28:15.130

看起来你想做选择性删除。首先准备要删除的时间段，生成单个查询然后运行它。

```
DELETE FROM calldetailrecord WHERE StartTime BETWEEN 1353897342 AND 1353897592 OR StartTime BETWEEN 1353897754 AND 1353897764; 
```

您应该尽可能少地使用到 db 的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:49:06.343

我认为您将通过这种方式获得更好的性能：

```
Create table  new_table as select *  calldetailrecord where StartTime > 1309492799000

drop table calldetailrecord;
alter table new_table rename to calldetailrecord; 
```

这解决了逐行删除的问题，这将非常慢。

# javascript - jqplot 未在主干.js 视图中触发“jqplotDataClick”事件

> ID：13885110
> 
> 赞同：2
> 
> 时间：2012-12-14T19:30:15.687
> 
> 标签：javascript, jquery, backbone.js, jqplot

我有一个 jqplot 图表作为 Backbone.js 视图的一部分。图表及其数据都加载正常，但鼠标突出显示并单击图表似乎没有注册。它在 jqplot 示例中运行良好。只有当我将它添加到我的 Backbone.js 框架时，它才会停止工作。

我尝试使用“jqplotDataHighlight”和“jqplotClick”，但它们都不会触发事件，**但是“jqplotDataUnhighlight”工作正常**。我无法弄清楚为什么一个有效而另一个无效。

```
//part of Backbone.js View....
        var l2 = [11, 9, 5, 12, 14];    
        var l3 = [4, 8, 5, 3, 6];    
        var l4 = [12, 6, 13, 11, 2]; 

        //this event never triggers
        this.$('#plot3').bind('jqplotDataHighlight',         
           function (ev, seriesIndex, pointIndex, data) { 
               alert('highlight');           
               $('#info1b').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);        
           }); 

           //unhighlight event work just as expected  
        this.$('#plot3').bind('jqplotDataUnhighlight',         
               function (ev) {
                    alert("this worked: unhighlight")            
                    $('#info1b').html('Nothing');        
        });

        //chart load fine, showing all data             
        this.$('#plot3').jqplot([l2, l3, l4],{       
              stackSeries: true,       
              showMarker: false,       
              seriesDefaults: {           
                  fill: true       
              },       
              axes: {           
                 xaxis: {               
                      renderer: $.jqplot.CategoryAxisRenderer,               
                      ticks: ["Mon", "Tue", "Wed", "Thr", "Fri"]           
                 }       
              }    
          });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:58:48.573

好吧，经过数小时的调试，我将回答我自己的问题。这将有望帮助一些像我一样犯错误的可怜的傻瓜。

在我的测试过程中，我添加了所有的 jqplot 插件，我终于发现移动插件覆盖了一些主要的 jqplot 事件处理程序，例如导致问题的 onClich。我删除了移动插件，一切都像一个魅力。

# java - Java UI 程序随机冻结

> ID：13885113
> 
> 赞同：2
> 
> 时间：2012-12-14T19:30:32.390
> 
> 标签：java, swing, debugging, jbutton, freeze

我是一个相对缺乏经验的程序员，从事家庭作业的基本数组生成/搜索程序。我让它工作得很好，但是在我设置搜索键后它会随机冻结（不会抛出任何我可以检测到的异常或错误消息）。然而，真正的问题是我不能总是通过做同样的事情来重现错误。我正在 Eclipse 中编程和运行程序。

这是我的程序的基本结构；为简单起见，我只包括似乎导致问题的设置器和按钮的实际代码。我怀疑这很简单，但我认为这段代码没有理由锁定程序。

```
public class ArraySearcher extends JPanel
                       implements ActionListener  {

private static final long serialVersionUID = 6449138670325520140L;

/**
 * A program description.
 */

// Fields (array and search parameters)
static int key;
static int arraySize;
static int min;
static int max;
static int midpoint;
// (Number of search steps taken by each search algorithm)
static int linSteps;
static int binSteps;
// (JButtons, JLabels, JTextFields, and the log for displaying results)
static JButton runButton, chKeyButton, newArrayButton, exitButton;
static JTextField lStepField, bStepField;
static JTextField keyField;
static JTextField arraySizeField;
static JTextField time;
static JTextArea log;
// (The arrays to be used)
static int[] randArray, sortArray;
// (Makes the output formatting a little easier to read)
public static String newline = "\n", twolines = "\n\n";

// The constructor
public ArraySearcher() {

// Setting up the fields and GUI
    }

// Getters and setters
protected static int getKey() {
    return key;
}

protected static void setKey() {
    boolean success = false;
    // loop and try catch block to deal with the potential parsing exception
    while (success == false) {
        try {
            key = Integer.parseInt(JOptionPane.showInputDialog(
                    "Please enter the number you\nwish to search for:"));
            keyField.setText(Integer.toString(getKey()));
            success = true;
        }

        catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(null, 
                    "There was a number format error.  Please\n" +
                    "input only positive, whole numbers.");
        }
    }
}

    // More getters and setters...

public static void main(String[] args) {
    // Implement the GUI, all other work is handled from
    // there and from within the constructor
    theGUI();
}

private static void theGUI() {
// Set up the GUI and allow user to set min and
// max values for the random number generator

    }

@Override
public void actionPerformed(ActionEvent e) {
    //Handling of the run/restart button.
    if (e.getSource() == runButton) {
    }

    // Handling the Change Key button
    else if (e.getSource() == chKeyButton) {
        setKey();
        chKeyButton.setText("Change Key");
        linSearch(getRandArray());          // Implicit searches triggered by
        binSearch(getRandArray());          // selecting a new search key
    }

    // Handling the New Array button
    else if (e.getSource() == newArrayButton) {
    }

    // Handling of the exit button.
    else if (e.getSource() == exitButton) {
    }
}

// Method for building the array of random numbers; includes an implicit search
// which can be canceled (i.e. just build and return the array) by passing it
// a false condition when it's called
private void arrayBuilder(boolean fullRun) {

}

private void linSearch(int[] arrayIn) {
    // Linear search method

}

private void binSearch(int[] arrayIn) {
    // Binary search method
    int result = -1;            // Location of a positive match; initialized to an impossible result
    int tempMax = arraySize;    // Dynamic maximum index for progressive midpoint calculations
    int tempMin = 0;            // Dynamic minimum index
    int newMid = 0;             // Dynamic midpoint
    int count = 0;              // Counts the steps required to find value
    boolean success = false;    // A loop escape boolean

    log.append("RUNNING BINARY SEARCH" + newline);      
    log.append("SORTING ARRAY..." + twolines);

    sortArray = sort(arrayIn);              // Sort the array prior to searching

    // Array midpoint index calculation
    midpoint = tempMax/2 - tempMin/2;   // Calculation prevents buffer overflow; allows for nonzero minimum
    newMid = midpoint;

    // Search loop
    while (tempMin != tempMax && success == false) {
        if (sortArray[newMid] == key) {
            success = true;
            result = newMid;
            count++;
        }

        else if (sortArray[newMid] < key) {
            tempMin = newMid;
            newMid = tempMax/2 - tempMin/2;
            count++;
        }

        else if (sortArray[newMid] > key) {
            tempMax = newMid;
            newMid = tempMax/2 - tempMin/2;
            count++;
        }
    }
    binSteps = count;
    bStepField.setText(Integer.toString(binSteps));
    log.append(twolines);

    if (result != -1) {
        log.append("Success!  The number " + Integer.toString(key) + " was found " +
                "at array location " + result + "." + newline);
    }
    else if (result == -1) {
        log.append("Failure.  The number " + Integer.toString(key) + 
                " was not found in the array." + newline);
    }

    log.append("The binary search was completed in " + Integer.toString(binSteps) + 
            " steps." + newline + newline);
    log.setCaretPosition(log.getDocument().getLength());

}

private int[] sort(int[] arrayIn) {
    // Method for sorting the random array before
    // performing a binary search
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:12:55.097

做`tempMax/2 - tempMin/2`不会让你达到中点。考虑一个简单的例子：如果`tempMin = 2`和`tempMax = 5`，那么`tempMax/2 - tempMin/2 = 5/2 - 2/2 = 2 - 1 = 1`。

获得中点而不溢出的典型方法是`mid = (min + max) >>> 1`.

# batch-file - 使用 DOS 批处理脚本从 ntp 服务器获取日期？

> ID：13885114
> 
> 赞同：1
> 
> 时间：2012-12-14T19:30:34.840
> 
> 标签：batch-file, dos, ntp

也许有人有一个想法。我想确保系统在我的脚本运行前至少几天内具有正确的日期/年份。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-12T17:16:52.877

我有同样的问题。您可以使用它来比较本地时间和关闭 ntp 池。

```
w32tm /stripchart /samples:1 /computer:es.pool.ntp.org /dataonly 
```

如果差异大于 180 秒，我的脚本会失败。如果您仍然需要它，我可以扩展它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T19:56:32.657

请参阅本指南[http://www.pool.ntp.org/en/use.html](http://www.pool.ntp.org/en/use.html)

> 如果您使用的是最新的 Windows 版本，则可以使用系统内置的 ntp 客户端。作为管理员输入
> 
> `w32tm /config /syncfromflags:manual /manualpeerlist:0.pool.ntp.org,1.pool.ntp.org,2.pool.ntp.org,3.pool.ntp.org`
> 
> 在命令提示符下。这将适用于 Windows 2003 和更高版本。如果您使用旧版本的 Windows，您可以尝试
> 
> `net time /setsntp:"0.pool.ntp.org 1.pool.ntp.org 2.pool.ntp.org"`
> 
> 作为管理员，同样可以通过右键单击任务栏中的时钟，选择“调整日期/时间”并在“互联网时间”选项卡中输入服务器名称来实现。
> 
> [Meinberg为 windows](http://www.meinberg.de/english/sw/ntp.htm)移植了ntp 守护进程。
> 
> 如果您的 Windows 系统是域的一部分，您可能无法独立更新您的计算机时间。有关在 Windows 上设置时间的更多信息，请参阅[Windows 时间服务的工作原理](http://technet.microsoft.com/en-us/library/cc773013%28WS.10%29.aspx)。

还要检查`%date%`和`%time%`环境变量。

# entity-framework - EntityFramework 属性 InverseProperty 如何工作？

> ID：13885122
> 
> 赞同：1
> 
> 时间：2012-12-14T19:31:08.863
> 
> 标签：entity-framework, razor, webmatrix, asp.net-webpages

我正在使用 WebMatrix 和 EntityFramework。

在我的数据库中，我有一个用户表，在我们的业务逻辑中，用户可以创建或更新另一个表的内容，所以我的模型中的用户类是这样的：

```
[Table("Users")]
public class User
{
    [Key]
    public int UserId { get; set; }

    [MaxLength(50), MinLength(5), Required]
    public string UserName { get; set; }

    [MaxLength(16), MinLength(8), Required]
    public string Password { get; set; }

    [MaxLength(50), Required]
    public string Name{ get; set; }

    [MaxLength(50), Required]
    public string LasName1{ get; set; }

    [MaxLength(50), Required]
    public string LasName2{ get; set; }

    public string token { get; set; }

    public DateTime CreatedDateTime { get; set; }

    public DateTime UpdatedDateTime { get; set; }

    [InverseProperty("CreatedBy")]
    public virtual ICollection<Device> CreatedDevices {get; set;}

    [InverseProperty("UpdatedBy")]
    public virtual ICollection<Device> UpdatedDevices {get; set;}

    [InverseProperty("CreatedBy")]
    public virtual ICollection<Cluster> CreatedClusters {get; set;}

    [InverseProperty("UpdatedBy")]
    public virtual ICollection<Cluster> UpdatedClusters {get; set;}

    [InverseProperty("CreatedBy")]
    public virtual ICollection<Region> CreatedRegions {get; set;}

    [InverseProperty("UpdatedBy")]
    public virtual ICollection<Region> UpdatedRegions {get; set;}
} 
```

例如，我的 Region 类如下所示：

```
[Table("Regions")]
public class Region
{
    [Key]
    public int RegionId { get; set; }

    [MaxLength(50), MinLength(5), Required]
    public string Name{ get; set; }

    public virtual ICollection<Cluster> Clusters { get; set; }

    public DateTime CreatedDateTime { get; set; }

    public DateTime UpdatedDateTime { get; set; }

    public Usuario CreatedBy { get; set; } 

    public Usuario UpdatedBy { get; set; }
} 
```

这会在数据库中的实体之间创建必要的关系。现在是我的主要疑问，在我的集群表中有一个 CreatedBy_UserId，所以当我在表中插入或更新条目时，我是否必须传递一个用户对象？我在说这样的话

```
Cluster cluster = new Cluster()
{
   RegionId = regionId,
   CreatedDateTime = createdDateTime,
   UpdatedDateTime = updatedDateTime,
   CreatedBy = currentUser,
   UpdatedBy = currentUser
}; 
```

或者如何将表示外键的 int 传递给表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:59:15.250

如果您的模型中没有外键属性，那么是的，您需要设置导航属性来建立关系。您只需确保将`currentUser`其附加到上下文 - 通过从数据库加载或手动附加。否则 EF 也会创建新用户。一个例子是这样的：

```
using (var context = new MyContext())
{
    context.Users.Attach(currentUser);
    Cluster cluster = new Cluster()
    {
        RegionId = regionId,
        CreatedDateTime = createdDateTime,
        UpdatedDateTime = updatedDateTime,
        CreatedBy = currentUser,
        UpdatedBy = currentUser
    };
    context.Clusters.Add(cluster);
    context.SaveChanges();
} 
```

`SaveChanges`将创建一个`INSERT`设置了正确外键值（等于`currentUser.UserId`）的语句。

# sql-server - 比较具有相同格式的日期的问题

> ID：13885123
> 
> 赞同：2
> 
> 时间：2012-12-14T19:31:09.170
> 
> 标签：sql-server, date, ms-access, format, ms-access-2010

我正在尝试过滤具有时间间隔的表单

开始日期和结束日期都在具有这种格式的文本框中`dd/mm/yyyy`

我的查询`VBA`看起来像这样

```
WHERE (Format([SalesCallDate],'dd/mm/yyyy') BETWEEN #" & Format(txtStartDate, "dd/mm/yyyy") & "#
 AND #" & Format(txtEndDate, "dd/mm/yyyy") & "#)" 
```

我不知道为什么间隔是`01/12/2012`to时`21/12/2012`，我得到的日期是`15/08/1991`. 这就是为什么我想明确说明格式。

SQL 查询的输出是
`WHERE (Format([SalesCallDate],'dd/mm/yyyy') BETWEEN #01/12/2012# AND #21/12/2012#)`

我试过有和没有格式。

我错过了什么吗？

**注意**：`SalesCallDate`是`DateTime`SQL Server 链接表中的字段

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:39:34.870

听起来 txtStartDate 和 txtEndDate 都是未绑定的文本框。将它们的格式属性设置为日期格式。

![格式设置为一般日期的文本框](../Images/bae47cde1677e579b28bf5649157c08e.png)

在日期格式和“显示日期选择器”属性设置为“日期”的情况下，Access 版本 >= 2007 将为您的文本框启用该日期选择器功能。如果您的用户喜欢这样，这是该格式属性的附带好处。

无论如何，日期格式将允许 Access 和 VBA 将这些文本框值解释为日期/时间数据类型：

```
? TypeName(Forms!frmDateRange!txtStartDate.Value)
Date 
```

然后由于`SalesCallDate`是日期/时间类型，您的`WHERE`子句可以直接将该字段与文本框值进行比较。

```
WHERE SalesCallDate BETWEEN
        Forms!frmDateRange!txtStartDate
    AND Forms!frmDateRange!txtEndDate 
```

或者，如果您的表单具有构建包含 SQL 语句的字符串的代码，并且您想要日期范围的日期/时间文字......

```
"WHERE SalesCallDate BETWEEN " & _
    Format(Me.txtStartDate, "\#yyyy-m-d\#")
    " AND " & Format(Me.txtEndDate, "\#yyyy-m-d\#") 
```

# php - if (isset($_SESSION['SESS_USER_ID'])) 需要多个 if/else 语句时出现问题

> ID：13885128
> 
> 赞同：0
> 
> 时间：2012-12-14T19:31:33.917
> 
> 标签：php, if-statement, isset

如果我只使用一次，这个语句就可以正常工作，但当我需要多次使用它时就不行了。我很好奇为什么，但更重要的是我想知道如何解决这个问题。

```
<?php if (isset($_SESSION['SESS_USER_ID'])) { ?>         
<?php }  
else {?>
<?php } 
```

我需要根据用户是否登录来更改页面上的几个项目（菜单项、给用户的消息等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:33:55.257

快速解决方法是：

```
<?php $logged_in = (isset($_SESSION['SESS_USER_ID'])); ?> 
```

然后

```
<?php if ($logged_in) : ?>
   //show secret stuff
<?php else : ?>
   // show public stuff
<?php endif; ?> 
```

*但*

`$_SESSION`在您第一次访问和第二次访问之间出现了问题。您不小心将其设置在某处（使用`=`而不是`==`一种简单的方法），或者您的代码具有在幕后更改它的副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:40:46.487

为了完成你想要的，你不应该在同一个文件中混合 PHP 和 HTML 代码。

大多数当前框架都使用某种模板。如果用户已登录，则显示已登录模板。如果他不是，请显示其他模板。

有许多模板框架是免费的，例如[Smarty](http://www.smarty.net/)和[TWIG](http://twig.sensiolabs.org/)（仅供 Symfony 使用）。

如果你不想使用这些，你应该考虑将你的代码分成不同的文件，仍然是这样的：

```
<html>
[...]
    <body>
    [...]
        <?php 
            if (isset($_SESSION["SESS_USER_ID"])) {
                include("restricted_folder/file_i_want_my_logged_in_user_to_see.php");
            } else {
                include("login_required.php");
            }
        ?>
    [...]
    </body>
</html> 
```

只需记住使“restricted_folder”无法供您的用户直接访问，或者删除访问权限（chmod'ing 文件夹应该这样做）或编写 .htaccess 禁止访问该文件夹。

# crystal-reports - 在水晶报表 2008 的公式字段中合并文本

> ID：13885131
> 
> 赞同：0
> 
> 时间：2012-12-14T19:31:46.820
> 
> 标签：crystal-reports, crystal-reports-2008

我有数据库字段来检查条件并返回多行文本。例如：

> 返回文本 = ''
> 
> ```
>  If TD1 = true then
>       returnText = 'text1'
>  If TD2 = true then
>       returnText = returnText + \n' + 'text2'
>  If TD3 = true then
>       returnText = returnText + \n' + 'text3'
>   return returnText 
> ```

如何使用公式字段执行此操作，或者还有什么方法可以执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:19:22.613

您可以使用公式来做到这一点。不确定您使用什么语法。它更接近 Basic，但这里有一个 Crystal 语法版本：

```
local stringVar returnText = "";

if TD1 = true then
    returnText := "text1";
if TD2 = true then
    returnText := returnText + chr(13) + "text2";
If TD3 = true then
    returnText := returnText + chr(13) + "text3";
returnText 
```

或使用基本：

```
dim returnText as string
returnText = ""

if TD1 = true then
    returnText = "text1"
end if
if TD2 = true then
    returnText = returnText + chr(13) + "text2"
end if
If TD3 = true then
    returnText = returnText + chr(13) + "text3"
end if
formula = returnText 
```

# ios - 连接到 iTunes 以使用推送通知

> ID：13885132
> 
> 赞同：4
> 
> 时间：2012-12-14T19:31:55.573
> 
> 标签：ios, itunes

我们的应用程序刚刚发布了一项重大更新，并且我们有一个用户不断收到此警报：

标题：连接到 iTunes 以使用推送通知

消息：通知可能包括警报、声音和图标标记。

用户点击确定，它只是弹出，不允许用户使用该应用程序。用户已连接到 iTunes 并正在接收来自其他第三方应用程序的通知。用户已多次重启，也多次从应用商店卸载并重新安装该应用。

iPhone 5 运行 6.0.1

谷歌搜索发现这是越狱设备的问题，但该用户不是。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T02:22:00.267

如果用户的设备缺少身份验证令牌，则会发生这种情况。有时可以通过以下方式解决：

1.  将设备连接到计算机并打开 iTunes
2.  确保您已连接到 Internet 并且 iTunes 商店将加载
3.  同步 iOS 设备

但是，如果其他应用程序正在运行，则用户可能拥有过期的身份验证令牌（iPhone 可能与其他人的 Apple ID 或 SIM 卡一起使用，Apple 正在避免向其发送其他人的推送通知。）在这种情况下，唯一的解决方案是对 iPhone 进行干净的还原。

**更新**：作为参考，这里有一篇与该主题[相关的 Apple 支持文章](http://support.apple.com/kb/TS3305)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T21:22:15.300

我对这个问题没有任何第一手经验，但听起来你的代码没有问题。请参阅[此线程](https://discussions.apple.com/message/20514878#20514878)和 [此线程](https://discussions.apple.com/thread/3394511?start=30&tstart=0)。

这很可能是用户的手机或 Apple ID 存在问题，尤其是考虑到只有一位用户报告了该问题。建议用户使用 iTunes 或 iCloud 进行备份/恢复，看看是否能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T09:39:31.670

如果您在 Tethered 越狱中使用 iphone，则此问题通常发生在尝试侦听推送通知的应用程序中。为了解决这个问题

打开您的 RedSnow 选择您的 IPSW，然后按启动选项。

这项工作为我提供了很大的缓解。

# events - 如何使用 PostConstructApplicationEvent 初始化应用程序范围的托管 Bean？

> ID：13885135
> 
> 赞同：1
> 
> 时间：2012-12-14T19:31:57.117
> 
> 标签：events, jsf-2, event-handling, el, systemeventlistener

平台：
JSF (Mojarra) 2.1.14

我正在尝试使用 PostConstructApplicationEvent 初始化应用程序范围的托管 bean，这是因为我有一个重要的约束，即不使用 @PostConstruct 注释，因为所需的构建工具是使用 Java 5 编译的。为此，我在此实现了 SystemEventListener 接口班级

```
public class ApplicationListener implements SystemEventListener {

    private final static Logger LOGGER = Logger
            .getLogger(ApplicationListener.class.getName());

    public boolean isListenerForSource(Object app) {
        boolean isApp = (app instanceof Application);  
        return isApp;
    }

    public void processEvent(SystemEvent event) throws AbortProcessingException {
         try {
        if (event instanceof PostConstructApplicationEvent) {
             Application app = ((PostConstructApplicationEvent) event).getApplication();
             LOGGER.info("PostConstructApplicationEvent is Called");
             FacesContext context = FacesContext.getCurrentInstance();
            MyBean myBean = ((PostConstructApplicationEvent) event).getApplication().evaluateExpressionGet(context,"#{myBean}", MyBean.class);
             myBean.init();
         } catch (Exception e) {
             FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Error while initiliazing app bean", e.getMessage());
             LOGGER.error("Error while initiliazing app bean", e);
         }
        }
    }
} 
```

* * *

问题是我得到了这些例外：

```
2012-12-14 12:19:48,822 INFO [ApplicationListener] - PostConstructApplicationEvent is Called
14/12/2012 12:19:48 PM com.sun.faces.config.ConfigureListener contextInitialized
GRAVE: Critical error during deployment: 
com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! null
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:376)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.NullPointerException
    at com.sun.faces.application.ApplicationImpl.evaluateExpressionGet(ApplicationImpl.java:426)
    at com.myproject.event.ApplicationListener.processEvent(ApplicationListener.java:39)
    at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106)
    at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2169)
    at com.sun.faces.application.ApplicationImpl.invokeListenersFor(ApplicationImpl.java:2145)
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:303)
    at com.sun.faces.config.ConfigManager.publishPostConfigEvent(ConfigManager.java:601)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:370)
    ... 11 more
14/12/2012 12:19:48 PM org.apache.catalina.core.StandardContext listenerStart
GRAVE: Excepción enviando evento inicializado de contexto a instancia de escuchador de clase com.sun.faces.config.ConfigureListener
java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! null
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:290)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! null
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:376)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223)
    ... 10 more
Caused by: java.lang.NullPointerException
    at com.sun.faces.application.ApplicationImpl.evaluateExpressionGet(ApplicationImpl.java:426)
    at com.myproject.event.ApplicationListener.processEvent(ApplicationListener.java:39)
    at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106)
    at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2169)
    at com.sun.faces.application.ApplicationImpl.invokeListenersFor(ApplicationImpl.java:2145)
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:303)
    at com.sun.faces.config.ConfigManager.publishPostConfigEvent(ConfigManager.java:601)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:370)
    ... 11 more
14/12/2012 12:19:48 PM org.apache.catalina.core.StandardContext startInternal
GRAVE: Error listenerStart
14/12/2012 12:19:48 PM org.apache.catalina.core.StandardContext startInternal
GRAVE: Falló en arranque del Contexto [/calibre] debido a errores previos
14/12/2012 12:19:48 PM javax.faces.FactoryFinder$FactoryManager getFactory
GRAVE: La aplicación no se ha inicializado correctamente durante el inicio, no se encuentra la fábrica: javax.faces.application.ApplicationFactory. Attempting to find backup.
14/12/2012 12:19:48 PM com.sun.faces.config.ConfigureListener contextDestroyed
GRAVE: Unexpected exception when attempting to tear down the Mojarra runtime
java.lang.IllegalStateException: Could not find backup for factory javax.faces.application.ApplicationFactory. 
    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:1010)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:342)
    at com.sun.faces.config.InitFacesContext.getApplication(InitFacesContext.java:136)
    at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:328)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4831)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5478)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

现在，我已经开始了解这个问题是 ELContext 已从 InitFacesContext 释放，因此在尝试调用 getELContext() 方法时会抛出 NullPointerException。

所以我的问题是，我在这里做错了什么？我们是否应该在 PostConstructApplicationEvent 期间不以编程方式检索托管 Bean？如果是这样，为什么？

提前感谢任何帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:47:19.683

虽然我无法解释您当前正在处理的堆栈跟踪，

1.  J2SE 5 支持注解，实际上它们是在 5 中引入的。

2.  我可以告诉你 JSF 用一个简单的注释参数来满足你的用例（bean 的急切加载），这将确保你的`@ApplicationScoped`bean 在@启动时被实例化。添加`eager=true`到 @ManagedBean 注释，如

    ```
     @ManagedBean(eager=true) 
    ```

完成工作

# objective-c - exc_bad_access（代码=1，地址=0x2012

> ID：13885140
> 
> 赞同：1
> 
> 时间：2012-12-14T19:32:24.887
> 
> 标签：objective-c, ios, cocoa-touch

我收到此错误：

```
exc_bad_access (code=1, address=0x2012 
```

当我尝试以这种方式从单例接收值时：

```
Draggable* sharedSingleton = [Draggable sharedManagerDraggable];
NSLog(@"%@", sharedSingleton.namePassedToDraggable); 
```

上面的代码放在UIImageView类型的Draggable.m中，里面也有：

```
+ (Draggable *)sharedManagerDraggable
{
static Draggable *sharedManagerDraggable = nil;
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    sharedManagerDraggable = [[Draggable alloc] init];
});
return sharedManagerDraggable;
} 
```

我以这种方式（来自 view controller.m）为 namePassedToDraggable 赋值：

```
#import Draggable.h

Draggable* sharedSingleton = [Draggable sharedManagerDraggable];
    sharedSingleton.namePassedToDraggable = txt.text;
        NSLog(@"%@", sharedSingleton.namePassedToDraggable);
    dragger.tag = img.tag; 
```

在 Draggable.h 我有：

```
+ (Draggable *) sharedManagerDraggable;

@property (nonatomic, assign) NSString* namePassedToDraggable; 
```

为什么我会收到导致应用程序崩溃的错误？我在其他视图控制器中使用相同的方法，效果很好！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T19:37:02.710

```
@property (nonatomic, assign) NSString* namePassedToDraggable; 
```

应该

```
@property (nonatomic, strong) NSString* namePassedToDraggable; 
```

如果该属性不是`strong`，则它不会被保留，它会在您分配它的函数范围的末尾被释放。

# facebook - Facebook Like 按钮 以页面登录

> ID：13885142
> 
> 赞同：2
> 
> 时间：2012-12-14T19:32:41.687
> 
> 标签：facebook, styles, facebook-like, facebook-page

我们正在为我们的大学社交媒体页面使用 facebook like 按钮，但是当有人作为页面登录时，它会显示一张红色背景的大照片，一个更大的白色背景，并带有文本“switch”。我们想知道是否有一种方法可以更改格式，或者 facebook 是否正在做任何事情来增加更多的多功能性，以便我们可以：

1.  删除白色背景，使其在灰色背景上时不会发生冲突，
2.  提供选项，因此当用户以页面身份登录时，它可以显示为当前格式，或者当用户以自己身份登录时，它可以显示为当前格式，或者像按钮一样大小，这样它就不会中断网页的设计。
3.  提供其他颜色选项，而不仅仅是红色，这样它就可以与您的配色方案融为一体，看起来更美观。
4.  可以选择显示什么文本而不是“切换”，这可能不直观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:01:08.347

首先，欢迎来到俱乐部。我们中的许多人都感受到了你的痛苦。不幸的是，你陷入了一些困境。

Facebook 的“喜欢”按钮显示在您页面上的 iFrame 中 - 这意味着 Facebook 控制在那里显示的内容以及为其设置样式的 CSS。因为您不能使用站点中的 CSS 来设置来自单独域的 iFrame 样式，所以没有很好的方法来控制站点上按钮的样式。因此，这有效地淘汰了选项 1、3 和 4。

至于选项2，那可能是您最好的选择...

Facebook 的“切换”按钮始终是相同的大小 - 这意味着它是一个大正方形，而不是某些人使用的较小的单行按钮（我假设你正在使用的那个，对吧？）。通常，我们通过设置 iFrame 的样式`overflow: hidden;`并使用一组 CSS `height`（如果您使用 1 行按钮，通常为 32 像素）来解决任何布局问题。这将切断红色的“切换”按钮，它看起来很难看……但至少它可以让您保持相同的页面布局，而不会因为尺寸错误的按钮丢掉页面元素。

最终，iframe 的情况让 Facebook 有很大的控制权，可以在所有网站上统一他们的“Like”按钮——这非常酷。不幸的是，当某些东西看起来很糟糕时，您没有很多选择来动态更改它。祝你好运！

# mysql - 有没有办法找出我的数据是否通过外键约束连接在 MySQL 中？

> ID：13885143
> 
> 赞同：1
> 
> 时间：2012-12-14T19:32:43.497
> 
> 标签：mysql, sql, key, constraints

我有一张表`barcodes`，里面有 1000 行`barcode`。大多数条形码通过外键约束附加到另一个表（它可以连接到许多不同的表），所以如果我运行以下查询，它会因为约束而出错：

```
delete from barcodes 
```

但是不知何故（由于我在数据库中创建的一些设计缺陷）表中的条形码没有通过任何约束连接，并且只是自由浮动的。

是否有一些简单的查询可以仅拉回未通过约束连接的条形码？像这样的伪代码：

```
select * from barcodes where constraint = null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:46:22.083

约束不在条形码表上，它在依赖于条形码的其他表上。*如果*其他表中存在依赖于这些特定条形码的行，则该约束会阻止您删除特定条形码。所以你需要找出从属表中是否有任何行。

```
SELECT b.*
FROM barcodes b
LEFT OUTER JOIN child_table c ON b.barcode_id = c.barcode_id
WHERE c.barcode_id IS NULL; 
```

说明：该查询尝试将barcodes中的行匹配到假设的表barcode_child，并且barcode_child中没有匹配的行，则OUTER JOIN对所有列都返回NULL，这意味着barcode中的行可以自由删除。

您可能有多个引用条形码的表格。外键约束将在这些表中定义。您可以使用此查询根据条形码找出哪些表有约束：

```
SELECT TABLE_SCHEMA, TABLE_NAME
FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE
WHERE (REFERENCED_TABLE_SCHEMA, REFERENCED_TABLE_NAME, REFERENCED_COLUMN_NAME) =
      ('barcode_schema', 'barcode', 'barcode_id'); 
```

我对barcode_schema 和barcode_id 名称做了假设，您必须更改它们以适应您的环境。

* * *

一旦找到引用条形码的几个表，您可以将一个查询放在一起，一次测试所有这些表，并找到完全没有所有依赖项的条形码：

```
SELECT b.*
FROM barcodes b
LEFT OUTER JOIN child_table1 c1 ON b.barcode_id = c1.barcode_id
LEFT OUTER JOIN child_table2 c2 ON b.barcode_id = c2.barcode_id
LEFT OUTER JOIN child_table3 c3 ON b.barcode_id = c3.barcode_id
...
WHERE COALESCE(c1.barcode_id, c2.barcode_id, c3.barcode_id, ...) IS NULL; 
```

这只是我上面展示的第一个 SELECT 的扩展。将条形码加入其*所有*依赖表，如果在这些表中没有找到匹配项，则其所有列的[COALESCE()](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)仍为 NULL。

# javascript - 如何为外部 js 插件提供 this.$el 参考

> ID：13885146
> 
> 赞同：0
> 
> 时间：2012-12-14T19:32:44.560
> 
> 标签：javascript, jquery, jquery-plugins, backbone.js, backbone-views

我有一个名为 bar.js 的 js 文件。此 javascript 文件包含显示页面外部结构的代码。所以当我做 $('#mainContainer').drawBar(); （drawBar() 是 Bars.js 中的一个函数）它将绘制我页面的外部结构。现在，我正在使用backbone.js。在 app.js 我调用 $('#mainContainer').drawBar();

所以 drawBar() 函数有`<table><tr class='rows_table'><td> ABC</td><td>DEF</td></tr></table>`（这段代码驻留在 bar.js 中）

所以这将附加到我的'mainContainer'。

所以现在，我的问题是，从 app.js 我无法引用以下元素： this.$('.rows_table').css("display","block");

相反，我必须称它为 $('.rows_table').css("display","block");。有没有办法可以在“this.$”参考中引入这个 bar.js 代码？

我可以称之为 this.$('.rows_table') 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:59:51.877

您从中调用的视图`this.$('.rows_table')`应该负责该元素。

每个 Backbone 视图都有一个它负责的 DOM 元素。如果您不设置元素，则它只是一个`<div>`由视图创建的空元素。

您可以在创建视图时通过设置元素来设置`el`元素。

您将需要引用 table 元素，然后：

```
var tableElement = $('table')[0]; // or get the reference in a way specific to your code
var myView = new Backbone.View({
    el : tableElement
}); 
```

现在您可以`this.$('.rows_table')`从视图的方法中调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T19:39:03.173

`this`是 Backbone.View 实例？如果是这样，您应该使用`this.$el.find(".rows_table")`而不是`this.$(".rows_table")`

# iphone - 与屏幕输出相比，xib 文件的奇怪问题

> ID：13885147
> 
> 赞同：0
> 
> 时间：2012-12-14T19:32:49.983
> 
> 标签：iphone, uiviewcontroller, xib

我正在做一个项目，到目前为止问题为零。这是我的第 9 个 VC，突然间我得到了这个奇怪的输出（见图）。我曾尝试删除整个 VC 并创建一个新的（两次），但出现了同样的问题。

我现在只有 .h 和 .m 文件中的默认代码。我自己没有添加任何代码。

这里发生了什么，为什么标签没有对齐？

[iPhone 截图 http://www.bahamapost.com/Stack_1.png](http://www.bahamapost.com/Stack_1.png) [xib 布局 http://www.bahamapost.com/Stack_2.png](http://www.bahamapost.com/Stack_2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:09:54.513

您必须从底部或顶部固定 Label7 和 Label8 的位置。打开 Size Inspector 并选择 Label7，您会在 Autosizing 网格的底部和/或顶部看到一条粗体红线。点击那条粗体红线，它会变成虚线。对 Label8 重复相同的操作。

希望这可以解决您的问题:)

# objective-c - Core Data 自反对多关系

> ID：13885149
> 
> 赞同：2
> 
> 时间：2012-12-14T19:33:02.907
> 
> 标签：objective-c, ios, core-data

需要设置一个与自身具有多对多关系的实体人（自反）。

所以每个人可以有n个子人，基本上是这样的：

![在此处输入图像描述](../Images/cd2caa713b6a0ae56908747dd4f3c2da.png)

Person 是否有两个关系，person 和 sub_person？逆规则如何运作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:51:29.107

如果我正确理解您的要求，您只需定义一个实体*Person*和两个关系：

*   `sub_persons`*作为从Person*到*Person*的多对多关系，
*   `super_person`*作为从Person*到*Person*的一对一关系，

并将它们定义为彼此的反向关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:42:57.743

实体当然可以与自身相关，就像双向链表中的节点与其他节点具有*下一个*和*上一个*关系一样。请记住，实体就像一个类——它是*一种对象*而不是特定对象。因此，例如，您的 Person 实体可能与 Person 有一个*朋友*关系——一个给定的人可能有很多朋友，所有这些朋友也是 Person 的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T19:54:08.907

以这种方式，绝对有可能在 Core Data 中拥有一个与自身相关的对象。在数据模型的 Table, Graph 编辑器中，按住 control 键并从 Person 画出一条线，然后又回到它自己。这会给你一条线，每一端都有一个箭头，都指向 Person。然后重命名关系（parentPerson、subPersons）并在属性检查器中使 subPersons 成为一对多关系。最终结果应如下所示：

![在此处输入图像描述](../Images/4ab39df0628c842cca597529dceb25f2.png)

这种数据管理风格遵循一种称为[复合模式的设计模式](http://en.wikipedia.org/wiki/Composite_pattern)。

# java - 在 for 循环中隔离特定地址的问题

> ID：13885150
> 
> 赞同：0
> 
> 时间：2012-12-14T19:33:03.027
> 
> 标签：java, loops

首先，我正在尝试编写一个允许飞机上有 10 个座位的程序（在 seatArray[] 中已经分配了 10 个座位）。当用户输入他们想要的座位类型（头等舱或教练舱）时，我尝试创建的此方法必须占据该部分的第一个座位并将其标记为保留（先前定义的方法）。我现在有这个形状的方法，带有一个while循环和一个for循环。这是该方法的一部分：

```
`boolean flag = true;
    if (spec.equals("First Class"))
    {

        for(int i = 0; i < 4 ; i++)
        {
            while(flag)
            {
                seatArray[i] = new Seat(i, spec);
                if(seatArray[i].checkSeatAvailability() == true)
                {
                    seatArray[i].reserveSeat();
                    flag = false;
                }
                else
                {
                    flag = true;
                }
            }
        }
    }` 
```

关于我将如何分配它的任何建议，如果没有，那么去下一个座位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:45:26.053

您必须删除 while(flag) 并按如下方式更改代码：

```
 for(int i = 0; i < 4 && flag ; i++)
    {
            seatArray[i] = new Seat(i, spec);
            if(seatArray[i].checkSeatAvailability() == true)
            {
                seatArray[i].reserveSeat();
                flag = false;
            }
            else
            {
                flag = true;
            }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:46:48.067

我会这样定义我的`Seat`班级：

```
public class Seat {
    private static final String ECONOMY = "Economy";
    private static final String FIRST_CLASS = "First Class";
    private String seatingClass = ECONOMY;
    private boolean reserved = false;

    // Default, economy and not reserved. 
    public Seat() {
    }

    public Seat( String seatingClass, boolean reserved ) {
        this.seatingClass = seatingClass;
        this.reserved = reserved;
    }

    public void setIsReserved( boolean reserved ) {
        this.reserved = reserved;
    }

    public boolean isReserved() {
        return reserved;
    }
    // more getters/setters...
} 
```

`isReserved()`稍后您可以使用未预留的座位填充座位数组，如果它们没有使用and预留，您可以通过并预留它们`setIsReserved(..)`。

# c++ - 函数包装器初始化如何在 C++11 中工作？

> ID：13885151
> 
> 赞同：2
> 
> 时间：2012-12-14T19:33:07.350
> 
> 标签：c++, c++11, std-function

如果我有这门课

```
class TextBox : public Widget {
public:
    void addKeyPressHandler(std::function<void (std::string)>);
private:
    std::function<void (std::string)> keyPressHandler;
}; 
```

我如何知道 keyPressHandler 是否已设置？我可以将其初始化为 NULL 然后对其进行测试吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T19:41:29.533

您可以使用`operator bool`成员函数

> 20.8.11.2.3 函数容量[func.wrap.func.cap]
> 
> `explicit operator bool() const noexcept;`
> 
> 返回：如果 *this 有一个目标，则返回 true，否则返回 false。

```
#include <iostream>
#include <functional>
int
main ()
{
        std::function<void()> f;

        std::cout << (bool) f << std::endl;

        f = [](){};
        std::cout << (bool) f << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T19:40:16.083

[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)允许您通过它的`operator bool()`.

例如：

```
if (keyPressHandler)
{
    keyPressHandler(someString);
}
else
    // TODO: Consider queuing events here if you don't want to miss keystrokes.
} 
```

...只有当它有一个有效的目标时才会调用该函数。这意味着它已经被分配了一个函数指针，或者自从它被初始化以来任何其他可调用的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T19:49:06.360

您可以在布尔上下文中对其进行测试（如其他答案所述）

```
if (keyPressHandler)
    ... 
```

或者您可以将其与`nullptr`

```
if (keyPressHandler != nullptr)
    ... 
```

当然，自己查找文档比提出问题并等待答案要快。从 Sean Cline 链接到的文档中可以明显看出，该文档`operator bool()`“检查是否包含有效目标”

# javascript - 使用 onbeforeunload：

> ID：13885154
> 
> 赞同：2
> 
> 时间：2012-12-14T19:33:26.417
> 
> 标签：javascript, jquery, onbeforeunload

```
<script>window.onbeforeunload = function() { return "Sure?"; }</script> 
```

我不希望它询问他们是否选择了“添加评论”按钮……这基本上是在提醒他们是否在不添加评论的情况下开始导航……任何帮助将不胜感激。谢谢。

是否因为我已经有一个 onClick 事件而导致冲突？

```
<input type='button' value='Clear' onClick="setval('CATEGORY',''); 
document.getElementById('CATNAME').innerHTML = '';"> 
```

在此先感谢，我是 stackoverflow 的新手，因此如有必要，请将其放在我身上。; ]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:38:49.530

您可能想查看这篇文章：[如果未提交表单，则触发 onbeforeunload](https://stackoverflow.com/questions/4172671/trigger-onbeforeunload-if-form-is-not-submitted)

提交表单时，您可以将 onbeforeunload 设置为 null。

# php - 受保护的 PDO 表名

> ID：13885156
> 
> 赞同：1
> 
> 时间：2012-12-14T19:33:38.087
> 
> 标签：php, pdo

我正在尝试在帖子中发送表名，但这是否受到足够的保护？

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);                                                                   
$naam = $_POST['naam']; 
$sql = "INSERT INTO ".$naam." (".$rows.") VALUES (".$values.")"; 
```

我也试过

```
$naam = $db->quote($_POST['naam']); 
```

这也不起作用。最佳结果是否足够安全？

另：完整代码

它在我的数据库中插入

> `a1, a2 and a3: d`

什么时候

> a1 = a a2 = s a3 = d

```
try{
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);                                                                   

    $naam = $_POST['naam']; 

    $sql = "
        INSERT INTO ".$naam." (".$rows.")
        VALUES (".$values.")
        ";                                                              

    $stmt = $db->prepare($sql);                                         

 for ($i = $_POST['begin'] ; $i < $iets ; $i++){
     $anum = 'a'.$i;
     $avalue = $_POST[$anum];
     $stmt->bindParam($anum, $avalue, PDO::PARAM_STR);
     printf ("%s, %s||", $anum, $avalue);
    }
    printf ("%s, %s||", $rows, $values);
    $stmt->execute();                                                                                                                                       
}                                                                       
catch(PDOException $e)                                                  
{                                                                       
    echo '<pre>';                                                       
    echo 'Regel: '.$e->getLine().'<br>';                                
    echo 'Bestand: '.$e->getFile().'<br>';                              
    echo 'Foutmelding: '.$e->getMessage();                              
    echo '</pre>';                                                      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:39:47.277

用户可以完全控制将数据插入哪个表。而且你没有充分利用 pdo。在查询中使用参数。

```
$sql = "INSERT INTO table_name (col1,col2) VALUES (:val1, :val2)";

$stmt = $this->_db->prepare($sql); 
$stmt->bindParam(':val1', $value1, PDO::PARAM_INT); 
$stmt->bindParam(':val2', $value2, PDO::PARAM_STRING); 
```

这里的表名是硬编码的，列也是硬编码的。并且这些值将自动转义。

# java - Java SwingWorker 和 TCP 连接无法正常工作

> ID：13885157
> 
> 赞同：0
> 
> 时间：2012-12-14T19:33:42.000
> 
> 标签：java, swing, tcp

我有以下代码，它描述了如果打开一个窗口，它应该呈现一个可见的对话框，连接到服务器并接收数据：

```
private void formWindowOpened(java.awt.event.WindowEvent evt) {                                  
    this.jDialog1.setVisible(true);
    con = new Conexion();
    SwingWorker work = new SwingWorker() {
        @Override
        public Object doInBackground() {
            con.recibirDatos();
            return null;
        }

        @Override
        public void done() {
            jDialog1.dispose();
            jDialog2.setVisible(true);
        }
    };
    work.execute();
} 
```

现在，`Conexion`在客户端方面执行以下操作：

```
public Conexion() {
    try
    {
        this.puerto = 7896;
        this.s = new Socket("localhost", puerto);
        this.entrada = new DataInputStream(s.getInputStream());
        this.salida = new DataOutputStream(s.getOutputStream());
    }
    catch(UnknownHostException e){ System.out.println("Socket: "+e.getMessage()); }
    catch(EOFException e){ System.out.println("EOF: "+e.getMessage()); }
    catch(IOException e){ System.out.println("IO: "+e.getMessage()); }
}

public void recibirDatos() {
    try
    {
        this.salida.writeUTF("sendData");
        System.out.println("Leyendo...");
        this.color = this.entrada.readUTF();
        this.ancho = this.entrada.readInt();
        System.out.println("Datos recibidos: "+color+" "+ancho);
    }
    catch(UnknownHostException e){ System.out.println("Socket: "+e.getMessage()); }
    catch(EOFException e){ System.out.println("EOF: "+e.getMessage()); }
    catch(IOException e){ System.out.println("IO: "+e.getMessage()); }
} 
```

在服务器方面，读取连接时会发生以下情况：

```
public void enviarDatos(String color, int anchoLinea) {
    try
    {
        System.out.println(entradaCliente.readUTF()+"! Enviando datos: "+color+" "+anchoLinea);
        salidaCliente.flush();
        salidaCliente.writeUTF(color);
        salidaCliente.writeInt(anchoLinea);
        System.out.println("Datos enviados.");
    }
    catch(EOFException e){ System.out.println("EOF: "+e.getMessage()); }
    catch(IOException e){ System.out.println("IO: "+e.getMessage()); }
} 
```

问题：

*   `readUTF()`当我执行此操作时，尽管服务器已经发送了数据，但客户端仍然卡住了。
*   如果我只发送和接收一个整数，我会得到值`-1393754107`而不是我发送的数字，但是客户端不会卡住。
*   当我将数据从客户端发送到服务器时，它工作得很好。

可能是什么问题呢？事先谢谢你。

编辑：我还发现，如果在客户端由于 等待而服务器关闭时，客户`readUTF()`端会得到一个`IOException`，这意味着客户端实际上已连接到服务器，但由于某种原因它没有从中读取数据！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:38:51.803

为了完成这项工作，我所做的只是将通常的`DataInputStream`and`DataOutputStream`替换为`ObjectInputStream`and `ObjectOutputStream`。问题解决了，它奏效了。

# c# - UI、业务层和数据访问层之间的实例创建管理

> ID：13885159
> 
> 赞同：0
> 
> 时间：2012-12-14T19:33:49.087
> 
> 标签：c#, .net, architecture

我想知道在标准 3 层应用程序上创建实例的替代方案和最佳实践是什么。

**在用户界面中：**

- 每次我需要调用 BLL 方法时，我应该在表单加载时创建一个 BLL 对象还是创建实例？

**在 BLL 中：**

-我应该在 BLL 构造函数中传递一个新的 DAL 对象还是应该在每个方法中创建 dal？

**达尔：**

目前我的 DAL 传统上是使用 oledb 开发来连接到 AS400 并利用 ado.net 进行所需的操作。每个方法在执行命令完成后打开和关闭连接。

-这个可以吗？或者我应该关注别的东西？

我的要求包括在我的 UI 中具有灵活性的可能性，能够拥有几乎所有可能的 UI 实现案例（网页、winforms 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:24:30.803

如果可以的话，使用依赖注入。这将使您的层保持可测试性和松散耦合......好东西。如果您正在使用服务，那么这可能是您的业务逻辑的首选位置。

然后 BLL 可以实例化 DLL，或者更好地注入它。我认为打开并立即关闭您的数据库连接很好，但请尝试确保您使用的是域帐户或类似的东西，以便您可以利用连接池。

由于您的要求包括 UI 的灵活性，您可能需要考虑 MVP 模式（模型-视图-演示者）。这将允许您使用选择 WinForms、WebForms 或两者作为您的前端。如果这是一个严格的要求，我强烈推荐这个，因为它在这些情况下非常灵活。

这是对高级问题的高级回答，您可以使用很多选项。这只是一个人的想法。如果您想了解更多详情，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:56:08.417

创建您的对象，以便它们可以单独使用，以便可以模拟它们。能够在不依赖“真实”数据库的情况下测试 UI 总是很好的。让你的 BLL 接受你的 DAL 接口，这样你就可以在没有真实数据库的情况下进行模拟和测试，等等。

你应该阅读像 Ninject 或 AutoFac 这样的依赖注入。它们将帮助您将参数传递给每个对象。

如果你最终得到一个只适用于 DAL 的一种实现的 BLL，那就不好了，如果它会影响另一层，那么在一层中进行更改将非常困难。

您的应用程序的某些部分可能会向 DB 发出巨大的请求，并且您觉得您可能不想为 WebPage 而不是在 WebForms 中缓存此响应。如果您只有一个用于检索数据的实例，则很难在不涉及 UI 层的情况下设计一些缓存功能。如果您每次都创建新实例，例如，您可以拥有一个 DAL，它仅使用一个缓存功能包装原始实例。当您可以轻松地告诉您的 web 应用程序使用缓存 DAL 时。

每次使用它们时，我都会创建新对象。

# jquery - Jquery Sticky Plugin 在移动浏览器上损坏

> ID：13885168
> 
> 赞同：0
> 
> 时间：2012-12-14T19:34:43.120
> 
> 标签：jquery, wordpress, jquery-mobile, mobile-browser

我最近为我公司的 WordPress 网站改编了 jQuery 插件“Sticky”。该插件本身是严格的 jQuery，而不是 WordPress 特定的。虽然该插件适用于桌面浏览器，但在移动设备上呈现时会出现样式问题。

如何让页面辨别移动浏览器和桌面浏览器之间的区别，然后执行特定于浏览器的代码？

有问题的网页是：[http ://www.energytoolsint.com/who-we-are/](http://www.energytoolsint.com/who-we-are/)

# java - 从 Java 1.6 切换到 Java 1.7 后出现 memcached 错误

> ID：13885172
> 
> 赞同：4
> 
> 时间：2012-12-14T19:35:09.313
> 
> 标签：java, caching, memcached, distributed-caching

MemcacheD 一直运行良好，直到我们最近从 Java 6 切换到 Java 7。现在我们不断收到如下异常：

```
java.lang.RuntimeException: Exception waiting for value
    at net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1025)
    at net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1042)
...
...
Caused by: java.util.concurrent.ExecutionException: java.lang.RuntimeException: Cancelled
    at net.spy.memcached.internal.OperationFuture.get(OperationFuture.java:169)
    at net.spy.memcached.internal.GetFuture.get(GetFuture.java:62)
    at net.spy.memcached.MemcachedClient.get(MemcachedClient.java:1021) 
```

和这个

```
java.lang.RuntimeException: Failed waiting for store
    at net.spy.memcached.MemcachedClient.mutateWithDefault(MemcachedClient.java:1696)
    at net.spy.memcached.MemcachedClient.incr(MemcachedClient.java:1806)
...
...
Caused by: java.util.concurrent.ExecutionException: java.lang.RuntimeException: Cancelled
    at net.spy.memcached.internal.OperationFuture.get(OperationFuture.java:169)
    at net.spy.memcached.MemcachedClient.mutateWithDefault(MemcachedClient.java:1687)
    ... 75 more 
```

谢谢你的帮助！

# javascript - 为什么带有 json 内容类型的 ajax 帖子发送数据 url 编码？

> ID：13885176
> 
> 赞同：1
> 
> 时间：2012-12-14T19:35:45.977
> 
> 标签：javascript, jquery, ajax

为什么这个调用会像这样显示编码到 URL 上的值？

`http://localhost:49597/api/auth?user=jon&password=123`

我正在使用以下 ajax 调用...

```
$.ajax({ url: "api/auth",
 type: "get", 
 data: { user: "jon", password: "123" },
 dataType: "json", 
 contentType: "application/json; charset=utf-8" 
}); 
```

我希望数据以 json 格式发送...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:37:09.190

`GET`请求没有请求正文，因此所有信息必须作为查询参数存储在 url 中。我还建议不要使用 Javascript 对用户进行身份验证，并且肯定会提出这个`POST`请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:37:18.483

因为它是一个**GET**请求。

`GET`将在查询字符串中发送数据。如果您想避免这种情况，您可以将您的类型更改为**POST** POST 将在请求正文中发送数据。

```
$.ajax({ url: "api/auth",
 type: "post", 
  //other stuff
}); 
```

如果是登录表单，您可能应该使用`POST`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T19:37:41.513

因为代码指定了请求类型`GET`。请求通过`GET`查询字符串传递参数。如果您不想使用查询字符串，则应切换到帖子。

```
$.ajax({ url: "api/auth",
 type: "post", 
 data: { user: "jon", password: "123" },
 dataType: "json", 
 contentType: "application/json; charset=utf-8" 
}); 
```

# android - 恢复默认操作栏布局

> ID：13885179
> 
> 赞同：11
> 
> 时间：2012-12-14T19:35:54.637
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

我将自定义`View`应用于`ActionBar`, 像这样

```
// Inflate the "Done/Discard" custom ActionBar view.
LayoutInflater inflater = (LayoutInflater) DetailsHost.mActionBar
        .getThemedContext().getSystemService(DetailsHost.LAYOUT_INFLATER_SERVICE);
final View customActionBarView = inflater.inflate(
        R.layout.actionbar_custom_view_done_discard, null);

// Show the custom ActionBar view and hide the normal Home icon and title.
DetailsHost.mActionBar.setDisplayOptions(
        ActionBar.DISPLAY_SHOW_CUSTOM,
        ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_SHOW_HOME
                | ActionBar.DISPLAY_SHOW_TITLE);
DetailsHost.mActionBar.setCustomView(customActionBarView, 
        new ActionBar.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT,
                ViewGroup.LayoutParams.MATCH_PARENT)); 
```

（基于 Roman Nuriks 代码）。

如何恢复初始布局？注意：我使用 ActionBarSherlock

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-14T20:16:26.650

## 显示/隐藏自定义操作栏视图

由于您只向栏添加了自定义视图而没有删除标题，因此隐藏该自定义视图就足够了`View`。你可以使用方法`setDisplayShowCustomEnabled()`。只需致电：

```
getActivity().getActionBar().setDisplayShowCustomEnabled(false); 
```

并再次启用家庭功能：

```
getActivity().getActionBar().setDisplayShowHomeEnabled(true); 
```

*（请注意，在所有代码示例中，如果您正在使用操作栏兼容，则使用`getSupportActionBar()`而不是。此外，仅在片段中需要，在活动中指的是活动本身，在大多数情况下）`getActionBar()``getActivity()``this`*

## 恢复操作栏标题

但是，如果您在创建自定义视图时也删除了标题，您还必须再次启用它。

```
getActivity().getActionBar().setDisplayShowTitleEnabled(true); 
```

## 完全恢复

您还可以使用组合选项调用 setDisplayOptions() 方法，以便在一次调用中重新配置操作栏。下面的示例删除了自定义视图并显示了标题。

```
getActivity().getActionBar().setDisplayOptions(
    ActionBar.DISPLAY_SHOW_HOME | ActionBar.DISPLAY_SHOW_TITLE); 
```

有关这些选项的更多详细信息，请参阅[Android API 文档](http://developer.android.com/reference/android/support/v7/app/ActionBar.html#setDisplayOptions(int))。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-19T13:03:09.243

```
ActionBar actionbar;

actionbar = getActionBar();

Button cls = (Button)findViewById(R.id.btn_close);

cls.setOnClickListener(new OnClickListener(){           
    public void onClick(View view){
       actionbar.setDisplayShowCustomEnabled(false);                
   }            
}); 
```

注意： id 为'btn_close' 的按钮位于自定义操作栏布局中。此函数是在 mainactivity 中编写的。

希望这可以帮助！！

# haskell - 将右字符串转换为浮点数

> ID：13885181
> 
> 赞同：2
> 
> 时间：2012-12-14T19:36:15.823
> 
> 标签：haskell

我正在努力转换正确的字符串。我有一个名为 getEval 的方法，它计算一个数学表达式（基本上是一个字符串），我得到它如下：

```
*Main> getEval "3+6"
Right "9" 
```

getEval 的类型是

```
*Main> :t getEval "3+6"
getEval "3+6"
:: (Functor m, Control.Monad.CatchIO.MonadCatchIO m) =>
   m (Either InterpreterError String) 
```

getEval 看起来像这样：

```
getEval str = runInterpreter $ setImports ["Prelude"] >> eval str 
```

如果重要，getEval 使用 Haskell 提示库 (Language.Haskell.Interpreter) 中的 eval 来进行实际的解析和计算。我怎样才能把它变成一个浮点数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:32:09.317

```
getEval str = do
        Right res <-  Interpreter.runInterpreter (Interpreter.setImports
                ["Prelude"] >> Interpreter.interpret str (Interpreter.as ::
                Float))
        return res 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-14T19:50:56.730

```
case getEval "3+6" of
  Right value  = read value :: Float
  Left  errstr = error ("Interpreter error" ++ errstr) 
```

应该做你所期望的。`readsPrec`如果您担心`Read`解析错误，您可能也想看看。

# c - C 计算欧拉数的精度低于预期

> ID：13885182
> 
> 赞同：-3
> 
> 时间：2012-12-14T19:36:23.947
> 
> 标签：c, floating-point

我写了这段代码。我认为这没关系，但是当我运行它时，我得到了一个糟糕的结果。此代码用于计算欧拉数。我会很感激你的回答。

我期望的结果大约是 2.718281828459045，我得到的结果是 2.718281745910644：

*   2.718281828459045（预期）
*   2.718281745910644（实际）

代码：

```
#include <stdio.h>

main() {

    int factor, counter, n = 1;
    float total = 0, division;

    while ( n <= 20 ) {
        counter = 1;
        factor = n;

    while ( counter < n ) {
        factor *= ( n - counter );
        counter++;
    } 

    division = 1.0 / factor;
    total = total + division;
    n++;
    }

    total = total + 1;

    printf( "La constante matematica e vale aproximadamente: %.20f\n", total);

    return 0;  

} /* Finaliza funcion main */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T19:41:15.957

```
while ( n <= 20 ) {
    contador = 1;
    factorial = n;

    while ( contador < n ) {
        factorial *= ( n - contador );
        contador++;
    } 
    // snip
    n++; 
```

`int`，如果是 32 位整数类型，则最多只能容纳`12!`. `13! = 6227020800`对于 32 位整数来说太大了。因此你有溢出，结果是完全错误的。

如果`factorial`是 a`double`或 64 位整数而不是`int`.

您的计算给您的（相对较小的）错误是由于使用`float`而不是`double`for `total`and `division`：

我们计算一个很好的近似值`e`作为`double`

```
Prelude Text.FShow.RealFloat> FD $ exp 1
2.718281828459045090795598298427648842334747314453125 
```

并将其转换为`float`：

```
Prelude Text.FShow.RealFloat> FF $ realToFrac it
2.71828174591064453125 
```

这是你得到的价值：`2.718281745910644`以不同的印刷精度为模。这与我们在计算`exp 1`为浮点数时得到的结果相同：

```
Prelude Text.FShow.RealFloat> FF $ exp 1
2.71828174591064453125 
```

最接近`float`所需结果的值：

```
Prelude Text.FShow.RealFloat> FF 2.718281828459045
2.71828174591064453125 
```

# php - 试图填充 PHP 数组

> ID：13885183
> 
> 赞同：0
> 
> 时间：2012-12-14T19:36:24.310
> 
> 标签：php, arrays, while-loop

在上一页中，我从用户那里获得了名称和 playeys 值的数量。

我希望将它们填充到一个数组中。到目前为止，这是我的代码：

```
<?php

$numberOfPlayers = $_POST['numberOfPlayers'];
$counter = 1;
$playerName = array();

while($counter<=$numberOfPlayers-1){
$playerName[$counter-1]= $_POST[$counter];
$counter=$counter+1;
}  

print_r($playerName);

?> 
```

但是它抛出了一个错误，说“未定义的偏移量：第 8 行 C:\wamp\www\test.php 中的 1”。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T19:38:44.257

只需使用`array_push()`. 或`[]`数组简写。无需使用计数器。

```
while($numberOfPlayers--){
    if(isset($_POST[$numberOfPlayers]))
        $playerName[]= $_POST[$numberOfPlayers];
} 
```

# c# - 如何超时请求/连接

> ID：13885184
> 
> 赞同：0
> 
> 时间：2012-12-14T19:36:25.180
> 
> 标签：c#, asp.net, asp.net-mvc-3

最近，我注意到我的网站被爬虫攻击，打开页面需要很长时间。我以前从未想过，但现在意识到我的 MVC3 应用程序永远不会超时。例如，如果我在`Thread.Sleep(1000 * 60 * 10)`控制器操作中输入（十分钟）并打开页面，10 分钟后我将获得渲染视图。

我已经阅读了大量文章和 SO 问题，但没有运气。我在 localhost 和构建了“Release”的生产服务器上尝试了以下解决方案，但这些解决方案都没有达到我想要的效果。

解决方案1：

在 web.config 中：

```
<location path="ControllerName/ActionName">
    <system.web>
        <httpRuntime executionTimeout="1" />
    </system.web>
</location> 
```

解决方案2：

在控制器动作中

```
HttpContext.Server.ScriptTimeout = 1; 
```

我剩下的唯一想法是计算自请求进入以来经过的时间并将其与当前时间进行比较，如果它大于我的超时限制，则手动抛出和 TimeoutException()。我计划将它放在“OnActionExecution”和“OnActionExecuted”中，但如果请求卡在它们之间的某个地方，我将永远无法判断我是否应该超时。

有没有很好的解决方案来实现这一点？有没有人得到请求超时在 MVC3 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:47:03.237

我不认为超时在这里是一个真正的问题。我非常怀疑您的网站遇到了会话锁定问题，这在受到来自同一来源的大量同时请求的影响时很典型。确保默认禁用会话或将会话标记为只读，并且仅在修改会话的操作上启用它（例如登录控制器）。详情请参阅`SessionStateAttribute`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T04:47:17.387

很好的答案： [IIS Request Timeout on long ASP.NET operation](https://stackoverflow.com/questions/3829202/iis-request-timeout-on-long-asp-net-operation)

如果您已经这样做了，但发现您的会话即将到期，请增加 ASP.NET HttpSessionState.Timeout 值：

例如：

```
// Increase session timout to thirty minutes
Session.Timout = 30; 
```

这个值也可以在你的 web.config 文件中的 sessionState 配置元素中配置：

```
<configuration>
  <system.web>
    <sessionState 
      mode="InProc"
      cookieless="true"
      timeout="30" />
  </system.web>
</configuration> 
```

# perl - 给定/何时是实验性的？

> ID：13885188
> 
> 赞同：11
> 
> 时间：2012-12-14T19:37:11.650
> 
> 标签：perl, syntax, switch-statement

整个“开关”功能是否已成为实验性的？在 Perl 的未来版本不会破坏我的代码的情况下，我可以依赖其中的某些部分吗？一般来说，将稳定功能更改为实验性功能的策略是什么？

## 背景

`use feature "switch"`自 5.10 以来一直在 Perl 中。从 5.10 到 5.14，`perlsyn`似乎表明这是一个稳定的、受支持的功能。

然而，从 5.16`perlsyn` [开始，它开始称其为](http://perldoc.perl.org/5.16.2/perlsyn.html#Switch-Statements)“*实验性*开关功能”，并且对于什么被认为是实验性的变得更加混乱。

部分文档似乎表明该功能的*所有*内容都是实验性的：

> 在“切换”功能下，Perl 获得了实验性关键字`given`、`when`、`default`、`continue`和`break`。

甚至有一整节关于[given 和 when 的实验细节](http://perldoc.perl.org/perlsyn.html#Experimental-Details-on-given-and-when)。

但是，`perlsyn` *还说*“这`foreach`是设置局部化器的非实验性方法”，并给出了一个似乎暗示 foreach/when 不是实验性的示例。

据我所知，“实验性”语言来自[提交 c2f1e22](https://github.com/Perl/perl5/commit/c2f1e229171d1aa65dacd9b3bb09f4298de8fba7)，它引用了[RT #90926 ，即使与](https://rt.perl.org/rt3/Public/Bug/Display.html?id=90926)[RT# 90906](https://rt.perl.org/rt3/Public/Bug/Display.html?id=90906)配对，它仍然没有提供太多上下文。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:53:02.177

> 整个“开关”功能是否已成为实验性的？

不，一直都是。

Upd：哦，哇，也许我错了。我在 5.10.0 或 .1 中找不到提及。也许不是？或者他们可能忘记注意了？无论哪种方式，如果是这样，他们似乎比我想象的更糟！但根据我从那以后看到的情况，我认为我们吸取了教训。（例如，我仍然认为这`values $ref`是一个坏主意，但至少从第一天起它就被标记为实验性的。）

> 在 Perl 的未来版本不会破坏我的代码的情况下，我可以依赖其中的某些部分吗？

从技术上讲，不，尽管开发人员在向后兼容性方面总是很小心。

> 一般来说，将稳定功能更改为实验性功能的策略是什么？

我不认为这种情况会发生。将改为使用弃用过程。

* * *

到目前为止的变化：

*   `given`在 5.18 中从创建词汇`$_`到本地化`$_`（如 foreach 循环）（或者它是否已经在 5.16 中发生？）。

*   5.10.1 在智能匹配方面发生了一些重大变化*。不要使用（智能匹配）5.10.0。

未来可能的变化：

*   智能匹配*的行为仍然是一个热门话题。

* — 没错，这是一个与 given-when 不同的特征，但在大多数人的心目中，它是相同的或密切相关的。

# objective-c - 如何遍历推文以访问地理信息并添加到数组

> ID：13885191
> 
> 赞同：1
> 
> 时间：2012-12-14T19:37:21.280
> 
> 标签：objective-c, loops, twitter, geolocation

我将如何遍历 TWRequest 返回的 JSON 以获取推文的地理信息？我正在使用下面的代码 - 我已经标记了我不确定的位。文本组件工作正常，我只是不确定如何创建地理数据数组并访问它......

```
 - (void)fetchTweets
{
    AppDelegate *delegate = (AppDelegate*)[[UIApplication sharedApplication]delegate];

    //NSLog(@"phrase carried over is %@", delegate.a);

    // Do a simple search, using the Twitter API
    TWRequest *request = [[TWRequest alloc] initWithURL:[NSURL URLWithString:
                                                         [NSString stringWithFormat:@"http://search.twitter.com/search.json?q=%@", delegate.a]] 
                                             parameters:nil requestMethod:TWRequestMethodGET];

    // Notice this is a block, it is the handler to process the response
    [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
     {
         if ([urlResponse statusCode] == 200) 
         {
             // The response from Twitter is in JSON format
             // Move the response into a dictionary and print
             NSError *error;        
             NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error];
             //NSLog(@"Twitter response: %@", dict);

             NSArray *results = [dict objectForKey:@"results"];

             //Loop through the results

             for (NSDictionary *tweet in results) {
                 // Get the tweet
                 NSString *twittext = [tweet objectForKey:@"text"];
                 //added this one - need to check id NSString is ok??
                 NSString *twitlocation = [tweet objectForKey:@"geo"];

                 // Save the tweet to the twitterText array
                 [_twitterText addObject:twittext];

                 //this is the loop for the location
                [twitterLocation addObject:twitlocation];
             }

             dispatch_async(dispatch_get_main_queue(), ^{

[self.tableView reloadData];

             });

         }

         else
             NSLog(@"Twitter error, HTTP response: %i", [urlResponse statusCode]);
     }];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:53:57.900

“geo”已被弃用，可能根本没有填充。我记得它在 Twitter API v1.0 中也被弃用了。试试这个代码：

```
- (void)fetchTweets
{
    AppDelegate *delegate = (AppDelegate*)[[UIApplication sharedApplication]delegate];

    //NSLog(@"phrase carried over is %@", delegate.a);

    // Do a simple search, using the Twitter API
    TWRequest *request = [[TWRequest alloc] initWithURL:[NSURL URLWithString:
                                                         [NSString stringWithFormat:@"http://search.twitter.com/search.json?q=%@", delegate.a]]
                                             parameters:nil requestMethod:TWRequestMethodGET];

    // Notice this is a block, it is the handler to process the response
    [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
     {
         if ([urlResponse statusCode] == 200)
         {
             // The response from Twitter is in JSON format
             // Move the response into a dictionary and print
             NSError *error;
             NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error];
             //NSLog(@"Twitter response: %@", dict);

             NSArray *results = [dict objectForKey:@"results"];

             //Loop through the results

             for (NSDictionary *tweet in results) {
                 // Get the tweet
                 NSString *twittext = [tweet objectForKey:@"text"];
                 //added this one - need to check id NSString is ok??
                 id jsonResult = [tweet valueForKeyPath:@"coordinates.coordinates"];
                 if ([NSNull null] != jsonResult) {
                     if (2 == [jsonResult count]) {
                         NSDecimalNumber* longitude = [jsonResult objectAtIndex:0];
                         NSDecimalNumber* latitude = [jsonResult objectAtIndex:1];
                         if (longitude && latitude) {
                             // here you have your coordinates do whatever you like
                             [twitterLocation addObject:[NSString stringWithFormat:@"%@,%@", latitude, longitude]];
                         }
                         else {
                             NSLog(@"Warning: bad coordinates: %@", jsonResult);
                         }
                     }
                     else {
                         NSLog(@"Warning: bad coordinates: %@", jsonResult);
                     }
                 }

                 // Save the tweet to the twitterText array
                 [_twitterText addObject:twittext];

             }

             dispatch_async(dispatch_get_main_queue(), ^{
                 [self.tableView reloadData];
             });
         }
         else
             NSLog(@"Twitter error, HTTP response: %i", [urlResponse statusCode]);
     }];
} 
```

# c# - 如何从下拉列表中选择的表中选择数据？

> ID：13885195
> 
> 赞同：-1
> 
> 时间：2012-12-14T19:37:30.793
> 
> 标签：c#, asp.net

我在页面上有一个下拉列表，在下拉列表中我有数据库中表的名称。我不知道如何在 gridview 或 datalist 中插入所选表中的数据。

我尝试使用我在学校做的另一个 c# 项目中的代码，但它没有用

编辑：这里添加了答案

```
protected void Button1_Click(object sender, EventArgs e)
{

    OleDbConnection con = new OleDbConnection(connectionString);
     OleDbDataAdapter da = new OleDbDataAdapter (string.Format("SELECT * from {0}", dropDownList.SelectedValue), con);
    DataSet ds = new DataSet();
    da.MissingSchemaAction = MissingSchemaAction.AddWithKey;
    da.Fill(ds);

    GridView1.DataSource = ds.Tables[0];
    GridView1.DataBind();
    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:45:45.273

您可以告诉代码将 dropdowlists 选定项的值放入查询中，如下所示：

```
protected void Button1_Click(object sender, EventArgs e)
{
    OleDbConnection con= new OleDbConnection(connectionString);

    SqlDataAdapter da = new SqlDataAdapter(string.Format("SELECT * FROM {0}",DropDownList1.SelectedValue), con);
    DataSet ds = new DataSet();
    da.MissingSchemaAction = MissingSchemaAction.AddWithKey;
    da.Fill(ds);

    GridView1.DataSource = ds.Tables[0];
    GridView1.DataBind();
    con.Close();
} 
```

我在发布之前已经测试过了，它可以在我的机器上运行。当您这样做时，如果您无法使其正常工作，则问题应该出在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:46:59.540

这很容易做到。我假设你的下拉列表在你的 gridview 中，它也是一个 asp gridview。如果是这种情况，那么如果您捕获了 selectedindexchange 或单击按钮。您必须在 gridview 中找到下拉菜单，然后使用 selectedvalue 属性。找到它看起来像这样（把它放在你的事件处理程序中）

将 ddl 调暗为 dropdownlist = gridview.row(e.rowindex).findcontrol("dropdownID")

Dim val = ddl.selectedvalue

在查找控件方面可能需要进行的唯一更改取决于下拉菜单所在的行类型以及正在使用的事件。如果上面找不到控件，您可以尝试 gridview.row.findcontrol("dropdownID")

获得值后，您可以调用插入的方法并将其作为参数传递:)

# python - 用于相对静态页面的 Python Web 框架

> ID：13885201
> 
> 赞同：3
> 
> 时间：2012-12-14T19:37:47.213
> 
> 标签：python, web

我正在寻找一个好的 Python 框架来开发一个小型应用程序。

基本上，该应用程序可以在 Javascript 中完成（用户在文本框中输入值并计算其他值），但由于 IP（这是学术界），任何人都无法确定这些值是如何计算的。

目前，数据库/用户/等。不是必需的。就模板系统而言，我真的想要 PHP 之类的东西，但是用 Python 代替。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:40:17.637

你可以试试烧瓶： http: [//flask.pocoo.org/](http://flask.pocoo.org/)

它是一种流行的“微框架”，适合您正在寻找的东西，包括一个简单的模板系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T19:42:17.617

对于像这样的简单任务，我强烈推荐使用 Bottle。

[http://bottlepy.org/](http://bottlepy.org/)

它也有一个内置的模板引擎，或者你可以用 Jinja 之类的东西来替换它。

# sql - Derby DB 修改列上的“GENERATED”表达式

> ID：13885204
> 
> 赞同：2
> 
> 时间：2012-12-14T19:37:59.573
> 
> 标签：sql, derby

我正在尝试更改具有如下表的 Derby 数据库：

```
CREATE TABLE sec_merch_categories (
category_id int NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
packageName VARCHAR(100) NOT NULL,
name VARCHAR(100) NOT NULL,
primary key(category_id)
); 
```

我想将`category_id`列更改为：

```
category_id int NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1), 
```

我看到的唯一文档是[IBM 的 DB2](https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/expression_generated_columns?lang=en)，它建议删除表达式，更改表的完整性，然后重新添加表达式。无论如何在德比这样做？

谢谢，

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:18:39.540

您可以使用所需的架构（但名称不同）创建一个新表，然后使用 INSERT INTO ... SELECT FROM ... 将数据从旧表复制到新表（或卸载旧表并重新加载使用复制数据系统过程将其放入新表中），然后使用 RENAME TABLE 将旧表重命名为备用名称，并将新表重命名为所需的名称。

并且，正如上述评论中指出的@a_horse_with_no_name，所有这些步骤都记录在 Apache 网站上的 Derby 文档中。

# jquery - 在 Firefox 中分隔下拉菜单的内容

> ID：13885206
> 
> 赞同：0
> 
> 时间：2012-12-14T19:38:39.463
> 
> 标签：jquery, html, css, firefox

我使用无序列表使用 CSS 和 jQuery 创建了一个下拉菜单。问题是在 Firefox 中列表项的间距不相等。它适用于 Chrome 和 IE。我尝试使用 reset.css 但它也不起作用：http: [//jsfiddle.net/dyUwm/20/](http://jsfiddle.net/dyUwm/20/)

HTML

```
<html>
<body>
<head>
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.8.0/build/cssreset/cssreset-min.css">
</head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<div id='wrapper'>
<ul class="menu">
    <li><a href="#">QUEM SOMOS</a>
        <ul>
            <li><a href="/ViaZen/faces/quemSomos/apresentacao.xhtml">Apresentação</a></li>
            <li><a href="/ViaZen/faces/quemSomos/diretoria.xhtml">Diretoria e Conselhos</a></li>
            <li><a href="/ViaZen/faces/quemSomos/nossaHistoria.xhtml">Nossa História</a></li>
            <li><a href="/ViaZen/faces/quemSomos/nossosMestres.xhtml">Nossos Mestres</a></li>
            <li><a href="/ViaZen/faces/quemSomos/nossaSanga.xhtml">Nossa Sanga</a></li>
        </ul>
    </li>
    <li><a href="#">O ZEN BUDISMO</a>
    <ul>
            <li><a href="/ViaZen/faces/oZenBudismo/pratica.xhtml">Prática</a></li>
            <li><a href="/ViaZen/faces/comoParticipar/retiros.xhtml">Sesshins (Retiros)</a></li>
            <li><a href="/ViaZen/faces/oZenBudismo/datas.xhtml">Datas Comemorativas</a></li>
            <li><a href="/ViaZen/faces/oZenBudismo/textos.xhtml">Textos e Sutras</a></li>
            <li><a href="/ViaZen/faces/oZenBudismo/sugestoes.xhtml">Sugestão de Leituras</a></li>
        </ul>
    </li>  
    <li><a href="#">COMO PARTICIPAR</a> 
        <ul>
            <li><a href="/ViaZen/faces/comoParticipar/programacaoRegular.xhtml">Programação Regular</a></li>
            <li><a href="/ViaZen/faces/comoParticipar/retiros.xhtml">Sesshins (Retiros)</a></li>
            <li><a href="/ViaZen/faces/comoParticipar/doacoes.xhtml">Doações</a></li>
            <li><a href="/ViaZen/faces/comoParticipar/tornarseMembro.xhtml">Tornar-se Membro</a></li>
            <li><a href="/ViaZen/faces/comoParticipar/oficinas.xhtml">Oficinas</a></li>
        </ul>
    </li>
    <li><a href="/ViaZen/faces/vilaZen.xhtml">VILA ZEN</a></li>  
    <li><a href="#">GALERIA DE IMAGENS</a></li>  
    <li><a href="#">MAIS</a>
        <ul>
        <li><a href="/ViaZen/faces/mais/links.xhtml">Links</a></li>
        <!--                                <li><h:link outcome="/mais/links" value="Aconteceu"/></li>-->
        <!--                                <li><h:link outcome="/mais/relatos" value="Relatos de Experiências"/></li>-->
        <!--                                <li><h:link outcome="/mais/links" value="Zen Peacemakers"/></li>-->
        </ul>
    </li> 
</ul>

</div>
</html>
</body> 
```

CSS

```
#wrapper {
    margin:auto;
    width:960px;    
}

#wrapper h1,h2,h3,h4,h5,h6 {
    color:black;

}

#wrapper ul.menu {
    float:left;
    list-style-type:none;
    margin:50px 0 30px 0;
    padding:0;
}

#wrapper ul.menu a {
    color: #666;
    font: bold 12px Lora, serif;
    text-decoration: none;    
}

#wrapper ul.menu li
    {    
        float: left;
        list-style: none;
        padding:0;
        margin-right:20px;
        position: relative;

    }
#wrapper ul.menu li a
    {    display: block;
         text-decoration: none;
        white-space: nowrap
}

#wrapper ul.menu li a:hover
    {    
    color:#163a24;
    }

#wrapper ul.menu li ul
        {    
            margin: 0;
            padding: 0;
            position: absolute;
            visibility: hidden;
            border-radius:10px;
            background: #fff;
            box-shadow: 1px 1px 15px #888888;
        }

#wrapper ul.menu ul li
        {    
        float: none;
        display: inline;
        text-transform:capitalize;
                           }

#wrapper ul.menu ul li a
        {    
        width: auto;
        border-bottom:1px solid #225A37;
                padding:10px;
                }

       #wrapper ul.menu ul li a:hover {
                color:#2E8052;                    
      }                    

#wrapper ul.menu ul li:last-child a                
        {
        border-bottom:none;        
        } 
```

jQuery

```
$(function(){

                $("ul.menu li").hover(function(){

                    $(this).addClass("hover");
                    $('ul:first',this).css('visibility', 'visible');

                }, function(){

                    $(this).removeClass("hover");
                    $('ul:first',this).css('visibility', 'hidden');

                });

                $("ul.dropdown li ul li:has(ul)").find("a:first").append(" &raquo; ");

            }) 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:31:00.013

它在 My FF Browser 上看起来并没有乱七八糟，但通常当发生此类问题时，我将 normalize.css 与 reset.css 结合使用，跨浏览器兼容性始终是一个挑战，但 normalize 会尝试覆盖浏览器的默认样式表以在所有浏览器上以类似方式呈现。

# php - 如何纠正mysql的字体错误

> ID：13885207
> 
> 赞同：2
> 
> 时间：2012-12-14T19:38:42.730
> 
> 标签：php, html, mysql

你好，我正在使用 MYSQL 作为我的数据库。当我使用蒙古字体时。它像 ???? 一样保存在 MYSQL 中。如何纠正这个？ ![这是我的数据库图片](../Images/0e53f5ff4587d4faff68a15c491488e3.png)

当我用英语保存时，它看起来还可以，但在蒙古语中它看起来像？？？在图片里。在屏幕上它也看起来像？？？？

我的 MYSQL 插入代码是：

```
$sql ="INSERT INTO core_network (system_name,sub_cat,location,alarmtype,severity,start_time,end_time,reason,shift_operation)
    VALUES ('$S_name','$subcategory','$city','$a_type','$severity','$S_time','$F_time','$reason','$shift_operation')"; 
```

如何纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T19:47:03.690

```
$connection = mysql_connect($host1, $user, $pass)
or die("Could not connect: ".mysql_error());
mysql_select_db($database1,$connection)
or die("Error in selecting the database:".mysql_error()); 
```

在连接到数据库之后和使用“SELECT”之前使用这个代码：

```
mysql_query("SET CHARACTER SET utf8",$connection); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T19:47:33.560

您需要将[列的排序规则](http://dev.mysql.com/doc/refman/5.5/en/charset-table.html)设置为 UTF-8，例如`utf8_general_ci`.

此外，您还必须确保[连接字符集](http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html)也是 UTF-8，例如通过发出

```
SET NAMES "utf8" 
```

在任何其他 SQL 之前。

# wpf - WPF 中的转换如何工作？

> ID：13885211
> 
> 赞同：0
> 
> 时间：2012-12-14T19:38:54.480
> 
> 标签：wpf, user-controls

我最近`TranslateTransform`在我的 WPF 应用程序中使用了 a 来实现`UserControl`在屏幕上拖动 a。有一个新的bug，当你第一次将它拖到屏幕上的其他地方后，当你点击控件上的“标题栏”时，它会跳回到原来显示的位置。它仍然会跟随鼠标，但最初的跳跃令人不安。

我不知道发生了什么，但这让我想知道。由于 WPF 控件没有自己的 left 或 top 属性，除非您将它们放入 a`Canvas`中，并且无论如何这些都是附加属性，那么 ? 正在修改哪些属性`TranslateTransform`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:50:59.767

WPF 的布局和渲染通道具有转换的内在知识。通过修改 的`X`和`Y`属性`TranslateTransform`，您会导致布局/渲染过程在定位关联的`FrameworkElement`.

换句话说：`TranslateTransform`不是修改其他属性，而是通过修改*其*属性触发另一个布局/渲染通道，从而影响关联的屏幕上的定位`FrameworkElement`。

阅读[此处](http://msdn.microsoft.com/en-us/library/ms750596.aspx)了解更多信息。

# facebook - fb://authorize 是 facebook 的有效 URL 方案吗？

> ID：13885215
> 
> 赞同：3
> 
> 时间：2012-12-14T19:39:28.390
> 
> 标签：facebook

我正在尝试在浏览器中使用本机 facebook 应用程序的身份验证凭据。计划使用`fb://authorize`URL 方案，它似乎不起作用。

有什么方法可以使用本机 facebook 应用程序用户凭据，而不是要求用户在浏览器中再次登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:26:46.157

您只能使用其身份（iOS 上的捆绑 ID，Android 上的 keyhash）已在 Facebook 注册的设备上的本机应用程序执行此操作。在所有情况下，本地应用程序的身份都经过验证，用户必须批准应用程序请求的权限，并且用户可以在隐私设置中撤销这些权限。

如果网站有可能仅仅因为他们在浏览互联网时使用的同一设备上安装了 Facebook 应用程序就可以找出用户的身份，这将侵犯用户的隐私。

# .net - 如何防止 ADO.Net 检查并发冲突？

> ID：13885219
> 
> 赞同：0
> 
> 时间：2012-12-14T19:39:49.470
> 
> 标签：.net, ado.net, dataadapter

我`DataAdapter.UpdateCommand`调用了一个存储过程，除了更新当前记录（例如，删除相关记录）之外，它还执行其他操作。因此，受我的存储过程影响的行可能为零，从而触发以下错误：

```
Concurrency violation: the UpdateCommand affected 0 of the expected 1 records 
```

我知道我可以捕获错误，但我更愿意将 ADO.Net 设置为在特定情况下不检查并发冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:29:25.607

这是我现在想出的一个技巧。我将存储过程中的最后一条语句修改为：

```
--hack to force @@ROWCOUNT to be 1\. needed for ado.net concurrency violation check
DECLARE @Hack BIT; SELECT @Hack = 0; 
```

它产生`@@ROWCOUNT`1，但不返回另一个表。

# java - Connection:Keep-Alive 在 Android 3.x 及更低版本的标头中丢失；Fiddler 报告 Request Missing required Host Header

> ID：13885221
> 
> 赞同：2
> 
> 时间：2012-12-14T19:39:56.087
> 
> 标签：java, android, jsp, tomcat, header

平台：Windows Server 2008 R2 标准 Web 服务器：Apache Tomcat 7.0

我进行了 Tomcat 7.0 的全新安装，除了添加我自己的 Web 应用程序（由几个 JSP 页面组成）并启用 SSL 之外，没有任何改变。它非常小，旨在使用 Android 3.x 及更低版本测试此问题。

对于这些版本，我已经确认 Android 浏览器和 Dolphin 浏览器 9.0.3 都没有连接请求标头，更不用说 Connection:Keep-Alive。也就是说，没有持久的 HTTP 连接。但是，Opera Mobile 12.0.3 确实包含 Connection:Keep-Alive 请求标头。

与此相关的问题是使用 SSL 时，HTTP 代理 Fiddler 正在报告

> HTTP/1.1 请求缺少所需的 HOST 标头

我从 Opera 和 Android/Dolphin 浏览器中看到的区别是前者包含 User-Agent: Opera/9.80...、Connection:Keep-Alive 和 Host:{Web Server} 而后者只包含 Host: {Web Server} . 我在 Host 列的标题为“Tunnel To”的 Fiddler 条目中看到了此信息。我没有看到 Opera 浏览器的此类条目，仅适用于 Android/Dolphin 浏览器。

再次，我想明确一点，这个问题只发生在 Android 3.x 和更低版本上。iOS 没问题。所有主要的桌面浏览器都很好。Android 4.x 很好。

有没有人知道可能是什么问题？

谢谢你。

# sql - 值在 SQL Server Management Studio 中显示为四舍五入，但在提取时不显示

> ID：13885230
> 
> 赞同：3
> 
> 时间：2012-12-14T19:40:42.057
> 
> 标签：sql, sql-server, batch-processing

我已经在 Microsoft SQL Server Mgmt studio 中设置了查询，并且收到了有关 Rate 和 Variable rate 列的有趣结果。

当我在 Management Studio 中运行查询时，我收到以下结果集： 列按以下顺序排列：TradeID、Dealer、IssuanceDate、MaturityDate、Face、Rate、Proceeds、TxnCCY、VariableRate

```
 Trade ID                Dealer   IssuanceDate MaturityDate Face     Rate    Proceeds  TXN CCY Variable Rate
 PERNOD & RICARD            BAR   20121212    20121221  10000000    0.24    9999400 USD NULL
PUT_30 04821QAP6 1ML POOL   BAS   20121022    20130418  100000000   0.28    100000000   USD 0.2075 
```

当我在 Management Studio 之外的批处理文件中运行查询时，我收到以下结果集：

```
Trade ID                Dealer   IssuanceDate MaturityDate Face     Rate    Proceeds  TXN CCY    Variable Rate
PERNOD & RICARD;          BAR;20121212;        20121221;  10000000;0.23999999999999999;9999400;USD;
PUT_30 04821QAP6 1ML POOL;BAS;20121022;        20130418;  100000000;0.28000000000000003;100000000;USD;
       0.20749999999999999 
```

SQL Server Management Studio 为何会舍入该值而我的批处理文件却不是？我需要查看批量提取中的舍入值。我曾尝试将列的数据类型更改为十进制和实数，但只收到错误。

有人对我如何进行这项工作并在我的摘录中显示四舍五入的值有任何建议吗？

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
ALTER PROCEDURE [dbo].[CALYON_TRADES_LIABILITIES_TEST]
-- Add the parameters for the stored procedure here
@BusDate datetime = NULL
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here
 IF @BusDate is null
  BEGIN
DECLARE @yesterday datetime
set @yesterday = DATEADD(D, -1, GETDATE())
set @BusDate = CONVERT(datetime,
convert(varchar(2), datepart(month, @yesterday)) + '/' + convert(varchar(2),datepart
(day, @yesterday)) + '/' + convert(varchar(4), datepart(year, @yesterday))
)
END
Drop table dbo.VariableRateLiabilities
Create table dbo.VariableRateLiabilities
(TradeID VarChar(35) null,
Dealer VarChar(15) null,
IssuanceDate varchar (8) null,
MaturityDate varchar (8) null,
Face numeric (9) null,
Rate float null,
Proceeds numeric null,
TxnCCY VarChar (3) null,
VariableRate float null,
VariableRateDate varchar (8) null)
INSERT INTO dbo.VariableRateLiabilities SELECT DISTINCT
RPT.TradeName as TradeID,
RPT.DealerShortName as Dealer,
CONVERT(varchar(8), RPT.TxnValueDate, 112) as IssuanceDate,
CONVERT(varchar(8), RPT.MaturityDate, 112) as MaturityDate,
RPT.Face,
RPT.Rate,
RPT.Proceeds,
RPT.TxnCCY,
IRI.InterestIdxRate as VariableRate,
CONVERT (varchar (8), IRI.InterestIdxDate, 112) as VariableRateDate
From RPT_TradesIssuance RPT
INNER JOIN LiabilityTrades LT
ON RPT.Price = LT.Price
LEFT OUTER JOIN InterestRateIndexes IRI
ON LT.InterestRateCode = IRI.InterestRateCode
WHERE RPT.SPVId=12
AND RPT.MaturityDate > @BusDate
AND RPT.TxnValueDate <= @BusDate
select TradeId,Dealer,IssuanceDate,MaturityDate,Face,Rate,Proceeds,TxnCCY,VariableRate
from dbo.VariableRateLiabilities
where TradeId NOT LIKE 'PUT%'
UNION
select         a.TradeId,a.Dealer,a.IssuanceDate,a.MaturityDate,a.Face,a.Rate,a.Proceeds,a.TxnCCY,a.VariableRate
from dbo.VariableRateLiabilities a
where a.VariableRateDate in (select MAX(b.VariableRateDate) from      dbo.VariableRateLiabilities b where a.TradeID = b.TradeID)

ORDER BY Dealer,1
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:20:02.927

如果您*可以*在处理货币时避免使用浮点数据类型，那么您可能应该这样做。无论您在哪里看到`float`数据类型，请尝试将其替换为数字。

与普遍看法相反，您不能将任意浮点值四舍五入到两个位置。任何涉及浮点值的计算都可能需要将所有值转换为浮点数，并且它可能会返回一个浮点数。（我在这方面查找了 SQL Server 文档，但还没有找到。）

使用正确的数据类型将解决问题的根本原因。

您*可能*可以通过在正确的时间进行显式强制转换和舍入来解决真正的问题，但每个人每次都必须完全正确地做到这一点。解决根本原因使每个人的生活更轻松。( `cast(float_column_name as numeric(n,m)`，其中 'n' 和 'm' 取决于应用程序。您可以选择`convert()`而不是强制转换。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:34:20.550

您的表定义如下所示：

```
CREATE TABLE dbo.VariableRateLiabilities (
    TradeID VARCHAR(35) NULL
    ,Dealer VARCHAR(15) NULL
    ,IssuanceDate VARCHAR(8) NULL
    ,MaturityDate VARCHAR(8) NULL
    ,Face NUMERIC(9) NULL
    ,Rate NUMERIC(18, 2) NULL
    ,Proceeds NUMERIC NULL
    ,TxnCCY VARCHAR(3) NULL
    ,VariableRate NUMERIC(18, 4) NULL
    ,VariableRateDate VARCHAR(8) NULL
); 
```

你的数据插入看起来像这样（假设原始值是浮点数或类似的东西，所以你需要`CAST`or `CONVERT`）：

```
INSERT INTO dbo.VariableRateLiabilities
SELECT  DISTINCT
        RPT.TradeName AS TradeID
        ,RPT.DealerShortName AS Dealer
        ,CONVERT(VARCHAR(8), RPT.TxnValueDate, 112) AS IssuanceDate
        ,CONVERT(VARCHAR(8), RPT.MaturityDate, 112) AS MaturityDate
        ,RPT.Face
        ,CAST(RPT.Rate AS NUMERIC(18, 2)) AS Rate
        ,RPT.Proceeds
        ,RPT.TxnCCY
        ,CAST(IRI.InterestIdxRate AS NUMERIC(18,4)) AS VariableRate
        ,CONVERT (VARCHAR(8), IRI.InterestIdxDate, 112) AS VariableRateDate
FROM    RPT_TradesIssuance RPT
INNER JOIN LiabilityTrades LT ON RPT.Price = LT.Price
LEFT OUTER JOIN InterestRateIndexes IRI ON LT.InterestRateCode = IRI.InterestRateCode
WHERE   RPT.SPVId = 12
        AND RPT.MaturityDate > @BusDate
        AND RPT.TxnValueDate <= @BusDate; 
```

我不确定当您尝试这样`CAST`的`Rate`and`VariableRate`列时会发生什么，因为这取决于它们在`RPT_TradesIssuance`and`InterestRateIndexes`表中的数据类型。他们也`FLOAT`一样吗？

（请注意，我选择`NUMERIC(18, 2)`和`NUMERIC(18, 4)`作为[数据类型](http://msdn.microsoft.com/en-us/library/ms187752%28v=sql.105%29.aspx)，但您应该根据将存储在这些列中的数据来调整它们。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:17:17.380

您应该在四舍五入之前将`FLOAT`变量转换为。`DECIMAL`

# python - Python 嵌套循环成语

> ID：13885234
> 
> 赞同：24
> 
> 时间：2012-12-14T19:41:12.980
> 
> 标签：python, loops, for-loop, foreach, idioms

我经常发现自己这样做：

```
for x in range(x_size):
    for y in range(y_size):
        for z in range(z_size):
            pass # do something here 
```

在 Python 中有没有更简洁的方法来做到这一点？我正在考虑类似的事情

```
for x, z, y in ... ? : 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-14T19:44:17.767

您可以使用[itertools.product](http://docs.python.org/2/library/itertools.html#itertools.product)：

```
>>> for x,y,z in itertools.product(range(2), range(2), range(3)):
...     print x,y,z
... 
0 0 0
0 0 1
0 0 2
0 1 0
0 1 1
0 1 2
1 0 0
1 0 1
1 0 2
1 1 0
1 1 1
1 1 2 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-14T19:42:40.800

如果您已经`numpy`成为依赖项，[`numpy.ndindex`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndindex.html#numpy.ndindex)那么可以解决问题...

```
>>> for x,y,z in np.ndindex(2,2,2):
...     print x,y,z
... 
0 0 0
0 0 1
0 1 0
0 1 1
1 0 0
1 0 1
1 1 0
1 1 1 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-14T19:44:33.307

使用[`itertools.product()`](http://docs.python.org/2/library/itertools.html#itertools.product)：

```
import itertools
for x, y, z in itertools.product(range(x_size), range(y_size), range(z_size)):
    pass # do something here 
```

从文档：

> 输入迭代的笛卡尔积。
> 
> 等效于生成器表达式中的嵌套 for 循环。
> ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T19:44:46.193

这取决于循环内部的内容。如果处理列表，您可以使用[列表推导](http://docs.python.org/2/tutorial/datastructures.html)

对于更一般的情况，请参阅itertools 上[的这篇文章](https://stackoverflow.com/questions/5759770/python-single-line-cartesian-product-for-loop)。

# c# - 通过字典 > 到 Javascript 数组

> ID：13885236
> 
> 赞同：2
> 
> 时间：2012-12-14T19:41:17.430
> 
> 标签：c#, javascript, .net, arrays

这是我的网络服务

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public Dictionary<string,List<string>> GetCategorias()
{
    var diccionario = new Dictionary<string, List<string>>();
    var categoria = "Recursos Humanos";
    diccionario.Add(categoria,new List<string>());
    diccionario[categoria].Add("Busqueda de recursos");
    diccionario[categoria].Add("Busqueda de recursos humanos");

    var categoria1 = "Informatica";
    diccionario.Add(categoria1, new List<string>());
    diccionario[categoria1].Add("IT");
    diccionario[categoria1].Add("Departamento de Insfractructura");

    //var serializer = new JavaScriptSerializer();
    //string json = serializer.Serialize((object)diccionario);

    return diccionario;
} 
```

我收到的 Javascript 字典是：

```
 function get_Categorias_Comunidades() {
        $.ajax({
            type: "POST",
            url: "Lista_Categoria_comunidad.asmx/GetCategorias",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: llamada_Webservice,
            error: llamada_Error
        });
    }
    function llamada_Webservice(peticion) {
        debugger;

    } 
```

如何将键和值解析为数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:06:43.503

像这样的东西

```
function llamada_Webservice(peticion) {
var categories = peticion;
    for(item in categories{ // Data is saved in the variable named d if it's ASP.NET WebService
        var categoria = item; // The name
        var list = categories[item]; // The array that you could loop thru

    }

} 
```

# javascript - JavaScript 构造函数实例化对象前缀约定

> ID：13885238
> 
> 赞同：0
> 
> 时间：2012-12-14T19:41:37.803
> 
> 标签：javascript, instance, naming, prefix, convention

在 JavaScript 中，从构造函数实例化的对象是否有命名约定？

例如，如果我有一个像这样设置的构造函数：

```
function Dance(style, timing) {
    this.style = style; // for reflection
    this.timing = timing;
}

var waltz = new Dance('waltz' , '3/4');
var rumba = new Dance('rumba' , '4/4'); 
```

所以控制台命令看起来像这样：

> 控制台> waltz.timing
>  3/4
> 
> 控制台> rumba.timing
>  4/4

我正在寻找的是一个约定，说华尔兹和伦巴是实例化的对象；像前缀“o”？

```
var oWaltz = new Dance('waltz' , '3/4');
var oRumba = new Dance('rumba' , '4/4'); 
```

在问这个问题之前，我实际上（*喘不过气来！*）在谷歌上搜索并做了一些功课，并想出了以下内容：

一个。Crockford 的“JavaScript：好的部分”。最值得注意的是，他建议在实际的构造函数中使用大写字母：

> 有一个约定，所有构造函数都以首字母大写命名（第 49 页）。

很好，但我没有看到关于这些构造函数*实例的任何约定。*他所有的例子都以“我的”为前缀，就像这样......

```
var myTango = new Dance('tango' , '4/4'); 
```

> 控制台> myTango.timing
>  4/4

...这是一个很好的例子，但不是一个合理的约定。

湾。我还挖了这个帖子，它把“o”前缀称为“匈牙利方言”，也把它称为过时的： [“o”作为变量前缀是什么意思？](https://stackoverflow.com/questions/5096453/what-does-o-mean-as-a-variable-prefix)

C。我们也有为包含 jQuery 包装集的变量添加前缀的约定，如下所示，这将选择页面上的所有 <button> 标签，创建一个 jQuery 包装集，并将其分配给 $buttons 变量：

```
$buttons = $('button'); 
```

d。最后，在 Google 上搜索“JavaScript 对象实例前缀”会得到私有函数的下划线“_”约定；在这个例子中，如果我们要添加一个私有原型函数，它可能看起来像这样：

```
Dance.prototype._lessonCost = function(minutes) { return ($1.50 * minutes); } 
```

再一次，这并没有任何帮助，这将我带到了这里。

如果你做到了这一步，谢谢你的回答：^）我觉得我错过了一些东西；就像我的技术存在根本缺陷一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:46:38.260

我不确定它是否是标准的，但通常对象的实例以小写字母开头，然后是驼峰字母。我不知道任何前缀，并认为这只会导致一堆额外的代码传递给客户端。

```
var myObject = new MyObject(); 
```

# javascript - 通过限制 Google V8 中的 Javascript 支持来创建更简单的特定领域语言？

> ID：13885239
> 
> 赞同：1
> 
> 时间：2012-12-14T19:41:50.403
> 
> 标签：javascript, google-chrome, v8

是否可以通过限制 Google V8 中的 Javascript 支持来创建更简单的语言？我想将 V8 引擎嵌入到我自己的工具中以运行动态脚本，并且喜欢 V8 预编译源以提高速度的想法。但是，我需要严格限制语言中的可能性。

这意味着没有数据容器（例如数组）的动态分配，没有导入的库，没有递归，没有线程。它在哲学上更类似于 Renderman 着色语言，而不是通用语言。因此，“新”语言要简单得多，由于熟悉的语法以及已经有一个很好的“编译器”（V8），我只考虑 JS。我可能还希望它在 Chrome 的本机代码 (NaCl) 环境中运行脚本代码，Google 似乎正在努力在 V8 中支持该环境。

重新定义 JS 的“语法”或其他定义语言的代码有多容易？

我的另一个选择是从头开始创建一种新的编译语言（也许使用 LLVM 的东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T14:20:47.167

仔细看看 squirrel 语言： [http](http://squirrel-lang.org) ://squirrel-lang.org 来自描述概述：“编译器和虚拟机在大约 7k 行 C++ 代码中组合在一起，并且只增加了大约 100kb-150kb 的可执行文件大小。”

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:28:29.680

对于您想要的所有功能限制，您需要对 V8 进行一次大手术，因为 V8 从来没有为如此激进的修改而设计。

另一种解决方案是*发明*一种类似 JavaScript 的语言（具有您可以施加的所有限制）并将其*编译*成普通的 JavaScript，然后您可以使用 V8（或任何其他 JavaScript 引擎，就此而言）运行。这种方法的著名示例是 GWT（来自 Java）、Dart 和 TypeScript。

# javascript - 将 JavaScript 函数分配给文档元素

> ID：13885241
> 
> 赞同：-1
> 
> 时间：2012-12-14T19:42:01.503
> 
> 标签：javascript, geolocation, element, document

我有以下代码：

```
<script type = "text/javascript">
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(geofields);
        }
    }

    function geofields() {
        if (document.getElementById('starthere').checked == 1) {
            document.getElementById('start').value = position.coords.latitude + " " + position.coords.longitude;
        } else {
            document.getElementById('start').value = '';
        }
    }
</script> 
```

我想`function geofields(){`显示 GeoLocation，将 'start' 元素的值更改为坐标（从 GetLocation() 脚本接收），但它不适用于上面的代码。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:52:30.660

您需要添加`position`参数`geofields`并调用`getLocation`（或将其设置为处理程序）。

```
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(geofields);
    }
}

function geofields(position) {
    if (document.getElementById('starthere').checked == 1) {
        document.getElementById('start').value = position.coords.latitude + " " + position.coords.longitude;
    } else {
        document.getElementById('start').value = '';
    }
}

document.addEventListener('load', getLocation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:53:07.623

来自[MDN](https://developer.mozilla.org/en-US/docs/Using_geolocation)文档：

```
navigator.geolocation.getCurrentPosition(function(position) {
  do_something(position.coords.latitude, position.coords.longitude);
}); 
```

在我看来，您没有将`position`参数传递给您的`geofields`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:49:04.033

尝试将函数调用放在 body 元素的 onload 属性中。

```
<body onload="getLocation();"> 
```

这应该确保在您执行该函数时 dom 已加载。

问候。

# javascript - Jsp会话值

> ID：13885244
> 
> 赞同：0
> 
> 时间：2012-12-14T19:42:19.380
> 
> 标签：javascript, ajax, jsp, session, servlets

我有以下问题，并想检查我是否正确。

```
<title>Exam</title>
</head>
<body>
<% Integer times = (Integer)(session.getAttribute("times")) ;
if (times == null) { times = new Integer(0) ; }
else { times = new Integer(times.intValue() + 1) ;
session.setAttribute("times", times) ;}
%>
times = <%=times %> 
```

用户 A 首次访问 Exam。他收到的页面显示时间=0。假设以下事件完全按照描述的顺序发生，请完成下面的 times= *_ 。*

1.  用户 A 从同一浏览器窗口第二次访问 Exam。他收到回时间= *_* _。

2.  用户 B 第一次从另一台计算机访问 Exam。他收到回时间= *_* _。

3.  用户 A 第三次从另一台计算机访问 Exam。他收到回时间= *_* _。

    1.  1
    2.  无效的
    3.  无效的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:53:25.327

假设您关闭 else 块

```
<title>Exam</title>
 </head>
 <body>
 <% Integer times = (Integer)(session.getAttribute("times")) ;
    if (times == null) { times = new Integer(0) ; }
    else { times = new Integer(times.intValue() + 1) ;}
    session.setAttribute("times", times) ;
 %>
 times = <%=times %> 
```

1.  1
2.  0
3.  0

您上面的答案是错误的，时间永远不会为空。代码所做的是在会话中存储一个整数，并在每次在同一会话中访问它时递增它。

`In same session`表示来自同一台计算机，来自同一浏览器，而不删除 cookie(Jsessionid)。Jsessionid cookie 由 Web 容器创建以跟踪会话。

# javascript - 隐藏几个div，默认显示1，根据链接点击在它们之间切换（显示/隐藏）？

> ID：13885256
> 
> 赞同：4
> 
> 时间：2012-12-14T19:43:10.943
> 
> 标签：javascript, jquery, html, show-hide

我知道显示/隐藏的东西已经被堆栈覆盖到死，但我找不到适合我的解决方案，抱歉。我已经尝试了几种我发现的 JS/jQuery 解决方案，但不能完全按照我想要的方式行事。

我有许多内容非常相似的 div（内容会根据所选版本略有变化），并且都具有完全相同的样式。

### 期望的行为

我希望一个 div 默认显示而所有其他 div 都隐藏。然后，基于链接点击，显示不同版本的 div 并隐藏所有其他内容 div。

### 基本 HTML

```
<div class="container">
  <h1>Header</h1>
  <p>Basic info about page</p>
  <ul>
    <li><a href="#ver1" id="linkToVer1">Version 1</a></li>
    <li><a href="#ver2" id="linkToVer2">Version 2</a></li>
    // More links to other divs
  </ul>

  <div class="content" id="ver1">    // I'd like this div to be the default
     Content here                    // when the page loads. All other divs 
  </div>                             // are hidden until a link is clicked.

  <div class="content" id="ver2">
     Content here
  </div>

  // More content divs
</div> 
```

我将拥有这些内容 div 的十几个不同版本。

JS 或 jQuery 都可以，但首选 jQuery，因为我可能会添加某种显示/隐藏效果。我不太关心 div 或链接的命名结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T19:46:13.277

```
$("div.containter ul li").each(function(){
    $(this).onclick(function(){

       $("div.content").hide();

      $("div" + $(this).attr("href")).show();

    });
}); 
```

把它包在一个`$(document).ready`或任何地方，你应该很高兴去我的朋友。学好代码，以后你就是gosu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:02:33.850

如何添加一些更多的 RESTful 行为。

```
$(function(){
   // get the location hash
   var hash = window.location.hash;
   // hide all
   $('div.content').hide();
   if(hash){
      // show the div if hash exist
      $(hash).show();
   }else{
      // show default 
      $("#ver1").show();
   }
   $("div.containter ul li a").click(function(){
      // hide all
      $('div.content').hide();
      $($(this).attr("href")).show();
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T23:18:16.160

我建议您将`on()`jquery 函数与选择器一起使用。您还可以`div`使用 css 显示默认值。[这](http://jsfiddle.net/rK4DD/4/)是完整的代码。

# sql - 在 UNION 中排序结果集

> ID：13885261
> 
> 赞同：-1
> 
> 时间：2012-12-14T19:43:50.067
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [联合查询的结果顺序](https://stackoverflow.com/questions/10555603/results-order-with-union-query)

我正在使用 SQL Server 2008。

我有 2 个选择加入使用`UNION`. 第二个选择添加一行。我希望这一行始终显示在底部。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:51:17.737

您可以在联合查询的每个部分中包含另一列并使用它进行排序：-

```
select col1, col2, col3 from
(
select col1, col2, col3, 1 as sortorder from table1
union
select col1, col2, col3, 2 as sortorder from table2
) as d
order by sortorder, col1 
```

这会将第二个 select 语句中的行放在第一个语句之后，其中它们将按 col1 的顺序排列。

请注意，当您在内部查询之外进行排序时，使用 union 而不是 union all 的唯一原因是如果您想消除重复项。在这种情况下，重复项必须来自其中一个查询，而不是两个查询共有，因为 sortorder 列使它们在两个查询中不同。所以你可能会想要使用 union all。

# javascript - 在 openlayers 中是否有一种简单的方法来简化绘制多边形中的顶点？

> ID：13885262
> 
> 赞同：0
> 
> 时间：2012-12-14T19:44:00.847
> 
> 标签：javascript, maps, openlayers, openstreetmap

我注意到在 openlayers 中它们有一个内置功能来简化 LineString 的顶点，但我没有看到任何多边形。是否有捷径可寻？这是线串的示例。 [http://openlayers.org/dev/examples/simplify-linestring.html](http://openlayers.org/dev/examples/simplify-linestring.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:45:15.467

一个多边形由一个[OpenLayers.Geometry.LinearRing](http://dev.openlayers.org/releases/OpenLayers-2.7/doc/apidocs/files/OpenLayers/Geometry/Polygon-js.html#OpenLayers.Geometry.Polygon.getArea)组成，它基本上是一个封闭的特殊 LineString。这意味着您可以将 Polygon 转换为 LineString。像这样：

```
var originalAsLinearRing = new OpenLayers.Geometry.LinearRing(originalPolygon.components[0].components);
var originalAsLineString = new OpenLayers.Geometry.LineString(originalAsLinearRing.components); 
```

然后如示例所示简化 LineString 并将 LineString 转换回 Polygon。我相信有一种更优雅的方式，但这也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T16:25:40.137

我根据马丁的回答创建了一个小提琴：http: [//jsfiddle.net/gdonarum/wxnd5gom/](http://jsfiddle.net/gdonarum/wxnd5gom/)

```
var linearRing = new OpenLayers.Geometry.LinearRing(original.components[0].components);
var lineString = new OpenLayers.Geometry.LineString(linearRing.components); 
var newLineString = lineString.simplify(tolerance);
var newLinearRing = new OpenLayers.Geometry.LinearRing(newLineString.getVertices());
var newPolygon = new OpenLayers.Geometry.Polygon(newLinearRing);
var reducedFeature = new OpenLayers.Feature.Vector(newPolygon); 
```

# css - 在水平 ul li 中模拟边框折叠

> ID：13885268
> 
> 赞同：0
> 
> 时间：2012-12-14T19:44:30.320
> 
> 标签：css

我有一个水平的 ul li，li 元素有一个 1 像素的黑色边框。两个相邻元素的边框为 2 像素，因为左右元素的边框合并了。

有什么技巧可以模拟表格边框折叠属性来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:12:19.027

像这样：

```
<ul>
    <li><a href="#">A Link</a></li>
    <li><a href="#">A Link</a></li>
    <li><a href="#">A Link</a></li>
    <li><a href="#">A Link</a></li>
</ul> 
```

css: ​</p>

```
ul, li {
    margin:0;
    padding:0;
    list-style:none
}

li {
    float:left;    
}    

​ul li a {
    display:block;
    padding:3px;
    border-top:1px solid #ff0000;   
    border-bottom:1px solid #ff0000; 
    border-right:1px solid #ff0000; 
}

ul li:first-child a {
    border-left:1px solid #ff0000
} 
```

# list - Scala列表错误

> ID：13885272
> 
> 赞同：4
> 
> 时间：2012-12-14T19:44:47.980
> 
> 标签：list, scala, typing

在学习了很多 Java 和一些 Haskell 之后，我想看看 Scala。从下面的代码中，我收到此错误消息

`type mismatch; found : List[Nothing] => Option[Nothing] required: List[Int] => Option[Nothing]`

我不知道我做错了什么：

```
object MyFirstScalaObject {

  def main(args: Array[String]) {
      lazy val testValues:List[List[Int]] = List((1 to 10).toList, null, List());

      println(  testFunction(last, testValues));
  }

  def testFunction[I, O](f : I => O, inputs : List[I]):
      List[(I, O)] = 
    inputs.zip(inputs.map(f));

  def last[A](xs:List[A]):Option[A] = xs match {
    case x::Nil => Some(x);
    case _::xs => last(xs);
    case _ => None;
  }

} 
```

感谢您的任何建议。

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:05:56.327

由于 scala 中类型推断的工作方式，它无法确定类型参数必须`last`是什么，因此它必须采用过于保守的后备猜测它是`Nothing`.

您可以在调用时显式指定类型`testFunction`：

```
testFunction[List[Int],Option[Int](last, testValues) 
```

或者您可以更完整地记录声明中类型参数之间的关系`testFunction`，这将为类型推断器提供更多信息：

```
def testFunction[A, I[_], O[_]](f : I[A] => O[A], inputs : List[I[A]]): List[(I[A], O[A])] 
```

这明确表示 I 和 O 是类型构造函数（kind * -> *），现在 f 的输入/输出类型更加具体，推理器可以正确推断最后一个函数的 A 参数必须是 Int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T00:18:52.607

一个完全修改和测试的版本，使用了 senia 的想法：

```
object MyFirstScalaObject {
  def main(args: Array[String]) {
      lazy val testValues = List((1 to 10).toList, null, List())
      println(testFunction(testValues)(last))
  }

  def testFunction[I, O](inputs: List[I])(f: I => O): List[(I, O)] =
    inputs.zip(inputs.map(f))

  def last[A](xs: List[A]): Option[A] = xs match {
    case x :: Nil => Some(x)
    case _ :: xs => last(xs)
    case _ => None
  }
} 
```

类型推断从左到右进行；来自一个参数列表的信息用于下一个参数列表。在这段代码中，当你调用`testFunction`Scala 时，可以`I`从第一个参数中推导出来，然后它可以`I`作为函数的输入类型`f`来判断它的类型（即参数`last`是用 应用的`A = Int`），然后它最终得到的值`O`从函数的返回类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T05:25:26.883

我不能告诉你为什么 scala 中的类型推断是这样工作的。

但是在这种情况下，有一种[常见的方法](https://stackoverflow.com/a/4916606/406435)可以帮助编译器 - `parameter sections`.

```
def testFunction[I, O](inputs : List[I])(f: I => O): List[(I, O)] = inputs.zip(inputs.map(f)) 
```

用法：

```
testFunction(testValues)(last) 
```

类似的解决方案是将方法添加`testFunction`到类`List`：

```
class LastsHelper[T](inputs: List[T]) {
  def testFunction[O](f: T => O): List[(T, O)] = inputs.zip(inputs.map(f))
}
implicit def toLastsHelper[T](inputs: List[T]) = new LastsHelper(inputs) 
```

您可以使用以下方法，例如`List`：

```
testValues.testFunction(last) 
```

# visual-studio-2012 - $(ItemPath) 返回错误的路径

> ID：13885274
> 
> 赞同：2
> 
> 时间：2012-12-14T19:45:12.963
> 
> 标签：visual-studio-2012

我刚刚升级到 VS 2012，我有一个外部工具命令，我在其中使用 $(ItemPath) 变量。如果当前文档在解决方案中，则变量返回该文档的路径。但是，如果文档不在解决方案中，它将在下一个选项卡中返回文档的路径。

有谁知道这是否是预期的行为，还是我需要在某处更改设置？

在 VS 2010 中，此命令按我的预期工作。

# jquery - Django ModelChoiceField - 通过 JQuery 选择选项而不删除选项

> ID：13885276
> 
> 赞同：0
> 
> 时间：2012-12-14T19:45:17.897
> 
> 标签：jquery, django, django-forms, django-templates

嗨，我有这样的表格：

```
class ProjectInfoForm(forms.Form):
    module = forms.ModelChoiceField(
        queryset=Module.objects.all().order_by('name'),
    )
    ... 
```

在我的模板中，我有一些 JQuery，我想用它来从模块下拉列表中选择一个选项：

```
 $('#id_module').append('<option value="foo" selected="selected">Foo</option>'); 
```

但是，这实际上删除了我希望仍然可用的所有原始选项。所以我想选择`FOO`但在下面的下拉列表中有其他可用选项`FOO`。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:52:02.633

如果要选择现有选项，可以使用以下选项：

```
$('#id_module').find('option[value="foo"]').attr('selected', true); 
```

# c++ - 不稳定的分析时序

> ID：13885281
> 
> 赞同：0
> 
> 时间：2012-12-14T19:45:54.180
> 
> 标签：c++, profiling, accelerate-framework

我试图从 Accelerate Mac OS X 框架中获得 cblas_dgemm 函数在多次迭代中的平均 MFLOPS/S 速率。这是我正在使用的代码（它通过函数指针 afp 调用 cblas_dgemm）：

```
double benchmark_cblas_matmul(dgemm_fp afp,
   const CBLAS_ORDER Order,
   const CBLAS_TRANSPOSE TransA,
   const CBLAS_TRANSPOSE TransB,
   const int M,
   const int N,
   const int K,
   const double alpha,
   const double *A,
   const int lda,
   const double *B,
   const int ldb,
   const double beta,
   double *C,
   const int ldc)
{
    double mflops_s,seconds = -1.0;
    for(int n_iterations = 1; seconds < 0.1;  n_iterations *= 2)
    {
        seconds = read_timer(); 
        for(int i = 0; i < n_iterations; ++i) 
        {
            (*afp)(Order,TransA,TransB,M,N,K,alpha,A,lda,B,ldb,beta,C,ldc); 
        }
        seconds = read_timer() - seconds;
        mflops_s = (2e-6*n_iterations*N*N*N)/seconds;
    }
    return mflops_s;
} 
```

定时器例程是：

```
double read_timer( )
{
    static bool initialized = false;
    static struct timeval start;
    struct timeval end;
    if( !initialized )
    {
        gettimeofday( &start, NULL );
        initialized = true;
    }

    gettimeofday( &end, NULL );

    return (end.tv_sec - start.tv_sec) + 1.0e-6 * (end.tv_usec - start.tv_usec);
} 
```

该代码通常运行两个 1000x1000 矩阵的乘积。我的问题是这段代码的连续计时非常不可靠；即使外部循环中的时间限制增加到 5 秒，最终速率也会在 20000 到 30000 mflops/s 之间变化。我使用的是带有 OS X 10.8.2 的 2011 Macbook Pro，使用[此内核扩展](https://github.com/nanoant/DisableTurboBoost.kext)关闭了超线程的四核 i5，并且在我进行基准测试时除了终端之外没有运行任何应用程序。有人对如何获得更稳定的时间有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T22:03:38.330

有些混乱是你无法控制的。

所讨论的处理器具有涡轮模式，只要它不受热限制，它就可以比标称时钟速率运行得更快。但是，运行持续的 GEMM 基准会使内核保持在接近峰值的算术吞吐量，这最终将导致内核达到其热包络线的极限，并且时钟将被降低到标称速率，然后是更慢的频率。

假设您看到测量的性能呈下降趋势，这可能是原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:04:03.080

Stephen Canon 的回答可能是正确的。所以延长测试时间直到你得到一个稳定的答案可能是一个好主意。此外，Accelerate[文档](https://developer.apple.com/library/ios/#documentation/Performance/Conceptual/vDSP_Programming_Guide/SampleCode/SampleCode.html#//apple_ref/doc/uid/TP40005147-CH205-CIAEJIGF)中有一些用于测试 Mflops 的代码，它比你的要多得多，所以也许你可以在运行测试之前找到一些关于在 CPU 上调整其他事情的线索。

# javascript - 使用 elementFromPoint() 获取特定的子元素

> ID：13885283
> 
> 赞同：3
> 
> 时间：2012-12-14T19:46:08.287
> 
> 标签：javascript, jquery, html

我有一张`SVG`包含多个`PATH`对象的地图。该地图上有一个叠加图像，所以每当我想在地图上调用某个事件时，我必须使用`elementFromPoint`. 我的函数的结构有点像这样：

```
function CallEvent(e){

$('.overlay-image').hide(0);

var mapObj = document.elementFromPoint(e.clientX, e.clientY);   

$(mapObj).click();

$('.overlay-image').show(0);
} 
```

当我`SHAPE`用于地图时，它工作得很好，但现在我使用 SVG 地图，它不起作用，因为`elementFromPoint`选择了整个`SVG`元素，我需要抓取`PATH`位于用户单击的坐标处的对象。

是否可以使用此功能找到该`PATH`对象？所有`PATH`对象都有 id 和 class。

最后，SVG 地图的结构如下：`<SVG><D><PATH></PATH></D></SVG>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:03:31.347

[jQuery Nearest Element 插件](http://gilmoreorless.github.com/jquery-nearest/)可以满足您的需求。

您可以使用类似`$.nearest({x: 100, y: 100}, 'path')`的方法来识别最近的路径。

# c# - 如何破坏排序列表的排序

> ID：13885285
> 
> 赞同：-2
> 
> 时间：2012-12-14T19:46:14.803
> 
> 标签：c#, asp.net, list, sorting, .net-4.0

> **可能重复：**
> [在 C# 中随机化一个 List<T>](https://stackoverflow.com/questions/273313/randomize-a-listt-in-c-sharp)

我有两个如下列表：

```
List<strig> LS1 = new List<string>();
List<strig> LS1 = new List<string>(); 
```

LS1 里面有 5000 件物品。
LS2 为空。
LS1 是升序排序列表。
现在我想要一个随机列表（从 LS1 创建）并将该列表添加到 LS2！（完全随机）
这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:53:00.980

```
Random rnd = new Random();
var LS2 = LS1.OrderBy(_ => rnd.Next()).ToList(); 
```

但最好使用这个 [Fisher-Yates shuffle](https://stackoverflow.com/questions/9557883/random-plot-algorithm)

# algorithm - 嵌套 显示查询结果 - 还是桌子？

> ID：13885286
> 
> 赞同：1
> 
> 时间：2012-12-14T19:46:20.567
> 
> 标签：algorithm, coldfusion

我正在尝试在宽水平带中以块的形式输出查询集。即，给定按 4 分组的 46 个项目的结果集 -

```
div1<br>1 2<br>3 4
<br>
div2<br>5 6<br>7 8
<br>
........
<br> 
div12<br>45 46 
```

我怎样才能正确地嵌套几个 <CFLOOP> 以正确输出它，并且这样做会更干净吗？最终目标是能够跳转（滚动）到每个 div 作为锚点。

我无法使用表格或 <UL> 提出解决方案。任何正确方向的指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:16:35.457

首先尝试彼得的建议，如果这不起作用，那么这个算法应该可以工作。

```
<cfloop query="q">
  <cfif (q.currentRow-1) % 4 EQ 0>
      <br>div#q.currentRow\4+1#
  </cfif>
  <cfif q.currentRow % 2 EQ 1>
    <br>
  </cfif>
  #q.currentRow#
</cfloop> 
```

您应该自己检查边缘情况。

# google-apps-script - 使用 sendEmail 时可以更改发件人地址吗？

> ID：13885290
> 
> 赞同：31
> 
> 时间：2012-12-14T19:46:25.577
> 
> 标签：google-apps-script

我想知道是否有任何选项可以更改使用 MailApp.sendEmail 发送的电子邮件的 FROM 地址。

我已经构建了一个作为 Web 应用程序发布的表单。学生填写并提交表格，并收到一封电子邮件。我知道如何更改电子邮件的回复地址和发件人姓名。我知道电子邮件使用我的地址作为发件人地址，因为我是脚本的所有者并且应用程序以我的身份运行。

有没有办法将发件人地址设置为属于另一个人，在这种情况下，是教师？我假设实现此目的的一种方法是让他成为脚本所有者并引导他为我们重新发布应用程序，但我宁愿不把它交给他。（据我所知，只有脚本所有者才能发布脚本。）

换句话说，我希望 From 地址代表正在为其创建脚本的客户端，而不是编写它的程序员。

我知道允许脚本从任何人那里发送电子邮件并不是一个理想的功能。我只是想知道是否有人对如何解决我的问题有建议。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-28T16:58:32.627

如果您使用 GMailApp.sendMail（而不是 MailApp.sendEmail），您可以指定 from 作为可选附加参数： [https://developers.google.com/apps-script/reference/gmail/gmail-app#sendEmail(String,字符串，字符串，对象）](https://developers.google.com/apps-script/reference/gmail/gmail-app#sendEmail(String,String,String,Object))

我相信您只能指定已配置 Gmail 帐户的别名。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-14T21:16:06.083

Google 在这方面并不灵活 - 您可以看到的唯一“发件人”地址是属于有权运行脚本的用户的地址。

您可以使用“机器人”谷歌帐户，而不是作为“程序员”运行，例如`DepartmentRobot@ourdomain.com`. 您可以自己开发脚本，然后从机器人重新发布它们。

如果需要，您的管理员可以在 Google Apps 域中创建此伪用户并编辑设置以将其隐藏在 Google Apps 目录中。

学生收到的电子邮件不会来自他们的讲师，但也不会来自您。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-02-14T20:58:19.373

是的，你可以，而且很容易。如果您有多个别名，请使用日志确定您的别名在数组中的哪个位置。然后测试你有正确的阵列位置在日志中使用。

```
var aliases = GmailApp.getAliases()
Logger.log(aliases); //returns the list of aliases you own
Logger.log(aliases[0]); //returns the alias located at position 0 of the aliases array

GmailApp.sendEmail('person@aol.com','From an alias', 'A message from an alias!', {'from': aliases[0]}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-03T11:02:29.587

仅当您向要从中发送邮件的帐户添加别名时才有可能。

**重要：**别名应手动添加**到**所需帐户（在 Gmail 中转到“设置”，然后“帐户”，然后“发送为”）

当你这样做时，你必须在你的脚本中使用 GmailApp 方法，称为“GmailApp.SendEmail()”

首先，您必须从 Gmail 帐户中读取别名：

`var myAliases = GmailApp.getAliases();` 假设您只有一个别名，所以第一个别名将在索引 0 中 ->`myAliases[0]` 在这种情况下，您可以使用如下方法：

```
GmailApp.sendEmail('recipient@yourdomain.con', 'subject', 'body', {from: myAliases[0], name:'Name of the Alias'}); 
```

就是这样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-18T14:49:32.237

为了进一步构建 @RAWdaMedia 和 @mickolasjae 的答案，如果您想使用别名电子邮件发送 html 电子邮件，您可以这样做。

```
// this should contain data to be put in the variable in your html
var data = [data1, data2];
var html = HtmlService.createTemplateFromFile('your-html-file-name');

html.data = data;
var template = html.evaluate().getContent();

var subjectLine = "Your subject line";
var aliases = GmailApp.getAliases()

// this line sends the email using alias email
GmailApp.sendEmail(email, subjectLine, template, {from: aliases[0], htmlBody: template}); 
```

需要注意的几点：

1.  在您的 Gmail 设置中，确保您要使用的电子邮件别名未标记为默认
2.  如果您有多个，请检查您要使用的电子邮件别名的索引并`aliases`相应地更改索引，因此它可能是`aliases[1]`或`aliases[2]`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-08T12:20:12.807

我不确定，但我认为这可能对您的问题有用。我已经寻找了几个小时的解决方案，一个完全陌生的人可以代表你发送邮件，但通过谷歌脚本但它没有用。

虽然您可以更改代码并将整个代码放入 if 循环中，如果特定工作表的特定单元格具有特定单词，您的程序将运行或退出。

如果程序最后运行它，您可以输入命令清除该单元格。

然后您可以指示用户将 Sheet1 的 A1 设置为“发送”并行设置时间驱动触发器以每分钟运行一次。

因此，在提交的一分钟内，您将收到来自您的 ID 的邮件，并猜猜这个人甚至不需要登录谷歌帐户！

您可以要求用户在工作表的右上角检查其他人是否在线。如果是这种情况，他们可以稍后再回来。方法有点粗糙，但它有效。

我是新来的。只是想提供帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-03T02:11:12.103

我想在[上面 chrisb 的答案的](https://stackoverflow.com/a/19640714/4806936)基础上再接再厉，但我还不能发表评论......

正如克里斯布所说：

1.  在您的帐户中为表单创建一个别名。
2.  使用 Gmail.App “从”您创建的别名发送电子邮件。

然后编写 Google Apps 脚本来处理发送到该别名的电子邮件，以便教师的电子邮件出现在您的收件箱中，但来自其他任何人的电子邮件会转发给教师，并将“回复”字段设置为发送电子邮件的人。

# pdf-generation - 使用什么库来生成 PDF

> ID：13885291
> 
> 赞同：-6
> 
> 时间：2012-12-14T19:46:27.933
> 
> 标签：pdf-generation

我应该使用什么在 Java 中生成 PDF。它必须是免费的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:47:33.470

使用[Apache PDFBox](http://pdfbox.apache.org/index.html)或[iText](http://itextpdf.com/)。iText 库是 LGPL 许可证，直到版本 2.1.7 AFAIK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:49:55.340

使用 LaTeX 怎么样？[您可以使用 java 生成 .tex，然后您可以使用命令行http://www.charlietanksley.net/philtex/basics-of-latex-from-the-command-line/](http://www.charlietanksley.net/philtex/basics-of-latex-from-the-command-line/)编译它以生成 PDF

# ios - RestKit 使 UI 无响应

> ID：13885295
> 
> 赞同：3
> 
> 时间：2012-12-14T19:46:44.080
> 
> 标签：ios, restkit

我正在使用 RestKit 0.2 版，当我按如下方式调用 RKRequestOperation 时，我看到它阻塞了 UI（这意味着 UI 变得不稳定/无响应）：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {
NSString *urlString = [NSString stringWithFormat:@"http://localhost:8080/models?offset=%d&rows=%d", _offset, _numRows];
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    RKObjectRequestOperation *operation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[_responseDescriptor]];
    [operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
        NSLog(@"Got models: %@", [result array]);
        [self addModelsToView:[results array]];
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"FAILED!");
    }];

    [operation start];
} 
```

多一点背景：

我这样做是为了将新模型视图加载到一个无限的`UIScrollView`. 我检测到用户何时滚动到视图底部（坐标逻辑已编辑），如上所述使用 RestKit 加载下一组视图，当模型返回时，我将它们加载到`addModelsToView`. 即使我注释掉`addModelsToView`，仍然存在断断续续的逻辑，所以我确定这与 RestKit （或者至少我如何使用它）有关。

根据我对 RestKit 的了解，它确实是异步加载的，所以我很难找到出现断断续续的原因/位置。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T19:54:44.193

调用`start`an`NSOperation`会在您调用它的同一线程上开始同步操作。因此，您在主线程上执行此下载，这将阻止 UI 更新

您应该将操作添加到队列中

RestKit github页面有这个例子：

```
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://restkit.org"];

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://restkit.org/articles/1234.json"]];
RKObjectRequestOperation *operation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[responseDescriptor]];

[manager enqueueObjectRequestOperation:operation]; 
```

# mod-rewrite - mod重写在子目录中不起作用

> ID：13885300
> 
> 赞同：-1
> 
> 时间：2012-12-14T19:47:04.597
> 
> 标签：mod-rewrite

我们的主机提供商将我们的 VPS 更新为 php5 的新编译，然后出现了一个问题。

我们的主站点使用漂亮的链接在 wordpress 上工作得很好（有它自己的`.htaccess`）`mod_rewrite`，但是在一个子目录中，我们使用其他 cms 实现了视频社区（它有自己的`.htaccess`使用 mod rewrite）。

似乎 wordpress`.htaccess` 不允许在`/video/`子目录中重写规则。如果我们删除 wordpress `.htaccess`，我们的视频社区运行良好，但 wordpress 网站停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:00:16.783

在根目录中的 .htaccess 中的 WP-rules**前面**添加以下内容。

```
RewriteRule ^video/ - [L] 
```

# sql - SQL - 空外键

> ID：13885305
> 
> 赞同：3
> 
> 时间：2012-12-14T19:47:23.467
> 
> 标签：sql, null, foreign-keys

请看下面的数据库设计：

```
create table Person (id int identity, InvoiceID int not null) 
create table Invoice (id int identity, date datetime) 
```

目前所有人都有一个`invoiceID`ie the `InvoiceID`is `not null`。

我想扩展数据库，以便某些人没有`Invoice`. 最初的开发者讨厌空值并且从不使用它们。我想保持一致，所以我想知道是否有其他模式可以用来扩展数据库以满足这一要求。如何在不使用空值的情况下解决这个问题？

请注意，以上两个表格仅用于说明目的。它们不是实际的表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:50:26.307

NULL 通常是数据库和编程中非常重要的特性。它与为零或任何其他值显着不同。它最常用于表示没有价值（尽管它也可以表示未知价值，但较​​少用作解释）。如果有些人没有发票，那么您应该真正允许 NULL，因为这与您想要的 Schema 匹配

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T20:17:53.247

正如其他一些答案所建议的那样，在避免空值的同时表示可选关系的唯一方法是使用另一个表。然后，给定人员的行不存在表示该人员没有发票。您可以通过将 person_id 设置为主键或唯一键来强制此表和 Person 表之间的 1:1 关系：

```
CREATE TABLE PersonInvoice (
  person_id INT NOT NULL PRIMARY KEY,
  invoice_id INT NOT NULL,
  FOREIGN KEY (person_id) REFERENCES Person(id),
  FOREIGN KEY (invoice_id) REFERENCES Invoice(id)
); 
```

如果要允许每个人拥有多张发票，则可以将主键声明为列对。

但是这个解决方案是为了满足您避免 NULL 的要求。这是人为的要求。NULL 在数据模型中具有合法的位置。

一些关系数据库理论家，如 Chris Date 避开 NULL，解释说 NULL 的存在会导致关系逻辑中出现一些令人不安的逻辑异常。对于这个阵营来说，如上所示的没有一行是表示缺失数据的更好方法。

但其他理论家，包括撰写关系理论开创性论文的 EF Codd，承认占位符的重要性，占位符表示“未知”或“不适用”。Codd 甚至在 1990 年的一本书中提出 SQL 需要*两个*占位符，一个用于“缺失但适用”（即未知），另一个用于“缺失但不适用”。

对我来说，我们在某些方面使用 NULL 时看到的异常情况就像我们在算术中除以零时看到的未定义结果。解决方案是： *不要那样做*。

但我们当然不应该使用任何非 NULL 值，如 0 或 ''（空字符串）来表示缺失数据。同样，我们不应该使用 NULL，就好像它是一个普通的标量值一样。

我在我的书[SQL Antipatterns: Avoiding the Pitfalls of Database Programming 的](http://pragprog.com/book/bksqla/sql-antipatterns)“对未知的恐惧”一章中写了更多关于 NULL 的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T19:50:24.197

一种常见的模式是将该关联存储在单独的表中。

人员：Id 发票：Id Assoc：person_id, assoc_id

然后，如果一个人没有发票，那么您根本就没有行。这种方法还允许一个人拥有多个发票 ID，这可能是有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T19:55:47.340

您需要将发票/人员关系移动到另一个表。你最终得到

```
create table Person (id int person_identity) 
create table PersonInvoice (id int person_id, InvoiceID int not null)  
create table Invoice (id int identity, date datetime) 
```

对于某些数据库，您需要这个以允许 InvoiceId 作为外键，因为有些数据库不允许在外键中使用 NULLS。

如果一个人只能拥有一张发票，那么 PersonInvoice 可以对 person_id 以及两列一起具有唯一约束。您还可以通过向 invoiceID 字段添加唯一约束来强制发票只有一个人。

# java - 如何从 Map.Entry 投射 Java中的整数

> ID：13885307
> 
> 赞同：0
> 
> 时间：2012-12-14T19:47:26.663
> 
> 标签：java

```
 ArrayList<Map.Entry<Integer, Float>> list = new ArrayList<Map.Entry<Integer, Float>>(datamap.entrySet());
        Collections.sort(list,new floatSort()); 
```

list 是 Map.Entry 但仅包含浮点数。现在我想将该列表与 Float 中的其他 ArrayList 类型进行比较。如何从 Map.Entry 转换为浮动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-12T21:30:04.720

您可以使用`Map.Entry.getValue.toString`然后使用`Integer.parseInt`将其转换`string`为`int`

```
String value = mapentry.getValue.toString;
int intValue = Integer.parseInt(value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:29:57.823

要从条目中获取浮点值，您需要在比较器中获取值。

```
Map.Entry <Integer, Float> entry = ...
float f = entry.getValue (); 
```

# java - 如何将异常写入文本文件

> ID：13885310
> 
> 赞同：0
> 
> 时间：2012-12-14T19:47:48.350
> 
> 标签：java

```
import java.io.*;
class FileWrite 
{
 public static void main(String args[])
  {
  try{
  // Create file 
  FileWriter fstream = new FileWriter("out.txt");
  BufferedWriter out = new BufferedWriter(fstream);
  out.write("Hello Java");
  //Close the output stream
  out.close();
  }catch (Exception e){//Catch exception if any
     // CAN I WRITE THE EXCEPTION TO THE TEXT FILE
   }
  }
} 
```

我正在将文本写入文件。我可以将`catch`块中抛出的异常写入`out.txt`文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:02:21.323

您不应该也可能无法将异常写入文件，其作者可能导致错误。但是您可以尝试使用记录器，如 log4j，正如已经建议的那样，并且在您的 catch 块中。您可以简单地添加以下内容：

```
 private static final Category log = Category.getInstance(MyClass.class.getName());
   ...
   catch (Exception e) {
    logger.log(e.getMessage());
   } 
```

[在此处](http://www.techrepublic.com/article/add-logging-to-your-java-applications/1027665)或在[此帖子](http://javawords.com/2008/01/08/how-to-use-log4j-logging-api/)中了解有关登录的更多信息。另请查看[log4j 文档](http://logging.apache.org/log4j/1.2/manual.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:51:39.720

是的，您可以将异常写入文本文件。但是如果异常发生在您创建 FileWriter 或 BufferedWriter 的行中，那么您将无法根据这些对象的状态使用该对象。您还需要在 try 块之外声明这些对象的实例以启用可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:52:28.343

您不能使用块中的相同`out`变量`try`来写入`out.txt`，因为异常可能已在`try`块中的任何位置引发。这意味着`catch`块中`out`可能未初始化，或者尝试使用它进行写入将导致您当前捕获的相同异常。

您可以尝试在块中再次打开文件`catch`以写入异常，但由于打开和写入同一个文件刚刚失败，因此这不太可能起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T19:49:39.433

在块中调用以下方法`catch`并传递对象。这将完成你的工作：

```
 public static void writeException(Exception e) {
     try {
        FileWriter fs = new FileWriter("out.txt", true);
        BufferedWriter out = new BufferedWriter(fs);
        PrintWriter pw = new PrintWriter(out, true);
        e.printStackTrace(pw);
     }
     catch (Exception ie) {
        throw new RuntimeException("Could not write Exception to file", ie);
     }
  } 
```

作为前。

```
try{
   new NullPointerException();
}
catch(Exception e){
   writeException(e);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T20:33:28.830

```
//breaking code
} catch (Exception e) {
    File f = new File("/tmp/someFileYouCanActuallyWriteOn.txt");
    if (!f.exists())
         f.createNewFile();
    e.printStackTrace(new PrintStream(f));
} 
```

但请考虑[zachary-yates](https://stackoverflow.com/users/8360/zachary-yates)的评论。此外，不鼓励捕获“异常”而不是特定类型 - 但如果您真的想捕获所有内容，请捕获 Throwabble

# html - 如何使所有查看者在 html/css 电子邮件中更容易接受列表项间距？

> ID：13885319
> 
> 赞同：0
> 
> 时间：2012-12-14T19:48:51.553
> 
> 标签：html, css, email, html-lists

首先，这是针对email的，所以我不能把css放在head里，只能放在table、td、ul等。

我将粘贴我的代码片段和它在 IE、Firefox 和 MS Outlook 中的样子的屏幕截图。

```
 <html>
             <head>
             </head>
             <body>
              <table cellpadding="5" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; color:#333; border-left: solid 1px #e9e9e9; border: thin groove #CCCCCC">
                 <tr bgcolor=#FF8100 valign="top">
                   <td style="border-bottom-style: groove; border-bottom-width: thin"><strong>To Do</strong></td>
                   <td style="border-bottom-style: groove; border-bottom-width: thin"><strong>Document</strong></td>
                 </tr>
                 <tr bgcolor=#FFCA99 valign="top">
                   <td>Review
                   </td>
                   <td> 
                     <ul style="margin: 0px 0px 0px 15px;">
                      <li>Good Faith Estimate - outlines all the fees and costs associated with your loan</li>
                      <li>Uniform Residential Loan Application (If your property is in New York, Ohio or Mississippi, please sign this form and upload it to My Status or fax it back to me at @AGENT.FAX.)</li>
                     </ul>
                   </td>
                 </tr>
                </table>
               </body>
              </html> 
```

它在 IE 中看起来很棒，但在 Firefox 中有很大的余量，而在 Outlook 中，只有一小部分项目符号显示出来。

IE：

![浏览器视图](../Images/04e55a7c6d7a32368b38e5b6dc000b2f.png)

火狐：

![FF 视图](../Images/556a23e3c96e2548d47160981bed7ec4.png)

外表：

![展望视图](../Images/acf1c8704fc5abf4f72d2b402ad03db9.png)

我必须假设观众可能会使用所有这些选项来查看这封电子邮件，那么我怎样才能让它看起来普遍呢？我尝试将填充放在 ul 样式中，我尝试制作子弹图像，将其用作 li 背景图像，并且不给 ul 样式......这也不起作用。我尝试的所有内容在 3 次电子邮件视图中至少有 2 次看起来都很糟糕。

我真的很感激帮助！

（Gmail 对 css 的解释是最严格的，所以我必须遵守他们的规则。这些可以在这里找到 -> [http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/) 你可以看到 Android 上的 Gmail 不允许list-style-x，所以我不能使用它们。我只能使用带有所有绿色复选标记的那些。）

谢谢！-冬青

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:29:39.183

将填充放在 td 上，而不是 ul，您可能还需要重置 ul 和 li 元素的样式

```
<html>
         <head>
         </head>
         <body>
          <table cellpadding="5" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; color:#333; border-left: solid 1px #e9e9e9; border: thin groove #CCCCCC">
             <tr bgcolor=#FF8100 valign="top">
               <td style="border-bottom-style: groove; border-bottom-width: thin"><strong>To Do</strong></td>
               <td style="border-bottom-style: groove; border-bottom-width: thin"><strong>Document</strong></td>
             </tr>
             <tr bgcolor=#FFCA99 valign="top">
               <td>Review
               </td>
               <td style="padding-left:15px;"> 
                 <ul style="padding:0px;margin:0;">
                  <li>Good Faith Estimate - outlines all the fees and costs associated with your loan</li>
                  <li>Uniform Residential Loan Application (If your property is in New York, Ohio or Mississippi, please sign this form and upload it to My Status or fax it back to me at @AGENT.FAX.)</li>
                 </ul>
               </td>
             </tr>
            </table>
           </body>
      </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:19:47.340

只需重置 ul 和 li 上的填充/边距就可以了！谢谢@keeg！

使用此代码：

```
 <html>
     <head>
     </head>
     <body>
      <table cellpadding="5" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; color:#333; border-left: solid 1px #e9e9e9; border: thin groove #CCCCCC">
         <tr bgcolor=#FF8100 valign="top">
           <td style="border-bottom-style: groove; border-bottom-width: thin"><strong>To Do</strong></td>
           <td style="border-bottom-style: groove; border-bottom-width: thin"><strong>Document</strong></td>
         </tr>
         <tr bgcolor=#FFCA99 valign="top">
           <td>Review
           </td>
           <td style="padding-left:25px;"> 
             <ul style="padding:0px;margin:0;">
              <li style="padding:0px;margin:0;">Good Faith Estimate - outlines all the fees and costs associated with your loan</li>
              <li style="padding:0px;margin:0;">Uniform Residential Loan Application (If your property is in New York, Ohio or Mississippi, please sign this form and upload it to My Status or fax it back to me at @AGENT.FAX.)</li>
             </ul>
           </td>
         </tr>
        </table>
       </body>
   </html> 
```

它在 IE、Firefox 和 Outlook 中看起来像这样（按从上到下的顺序），由于 Outlook 的看法，这并不完美，但更容易接受：

![带复位](../Images/687224025ab4bd483970997246c8c92d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:43:34.643

并非所有电子邮件客户端都支持填充。为确保列表项之间的间距正确，请勿将其设为列表。对不起。

```
<tr>
<td width="10">&bull;</td><td width="5" style="font-size:1px;">&nbsp;</td><td... content</td>
</tr>
<tr>
<td width="10" height="5" style="font-size:1px; line-height:1px;">&nbsp;</td> etc... 
```

空的 TD 不会在 IE 中显示，没有字体大小的 TD 在 IE 中呈现为默认（比如 12 像素）大小，还有很多很多类似的东西。在空表格单元格上声明一个具有高度和字体大小和行高样式的空行可修复项目之间的空间。

# javascript - dojo/date/locale/format 格式正确，但返回错误的日期？

> ID：13885320
> 
> 赞同：1
> 
> 时间：2012-12-14T19:48:56.747
> 
> 标签：javascript, date, dojo

```
value = date.locale.format(dte, {
   datePattern : "MMMM d, yyyy",
   selector : 'date'
}); 
```

dte = "2012-12-21"
value = "December 20, 2012"

这真的是 DoJo 甚至不知道 21 日是什么日子的末日吗？真的……为什么它转换错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:17:47.503

这可能是时区问题，具体取决于您如何实例化`dte`. “2012-12-21”相当含糊。

例如，我在 UTC+1，所以下面的代码对我来说会有同样的“问题”：

```
dte = new Date("Fri, 21 Dec 2012 23:01:00 GMT");

value = date.locale.format(dte, {
   datePattern : "MMMM d, yyyy",
   selector : 'date'
}); 
```

在这种情况下，值将为我显示“2012 年 12 月 22 日”，因为我的计算机时间是 UTC+1。

# spring - web.xml 中的错误页面设置不起作用

> ID：13885325
> 
> 赞同：1
> 
> 时间：2012-12-14T19:49:12.203
> 
> 标签：spring, exception, exception-handling, web.xml

在我的 portlet 中，我想以一种方式处理所有异常。中配置错误类型`web.xml`。这是我的代码`web.xml`

```
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/WEB-INF/jsp/error.jsp</location>
</error-page> 
```

`error.jsp`

```
<%@ page isErrorPage="true"%>
no available now! 
```

发生`nullpointerexception`时，它不会转到我的`error.jsp`页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:58:41.947

尝试将您的 error.jsp 放在 WEB-INF 文件夹之外`webapps/contextDIR`

```
<error-page>
<exception-type>java.lang.Exception</exception-type>
<location>/error.jsp</location>
</error-page> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:39:47.493

`location`- Web 应用程序中资源**相对于 Web 应用程序根目录的位置**。值应以`/`.

因此，该文件不得位于`WEB-INF`.

旁注：我更喜欢我的错误页面是简单的 HTML 页面而不是 JSP。如果编译/渲染错误 JSP 失败怎么办？显示错误页面时出现错误并不理想。

如果您喜欢这个答案，您可以投票或接受它。

# sql-server - 无法将字符串参数传递给存储过程

> ID：13885326
> 
> 赞同：3
> 
> 时间：2012-12-14T19:49:18.833
> 
> 标签：sql-server, stored-procedures

我搜索了这个网站，发现了一些关于我的问题的主题，但仍然无法完成这项工作....

我只是尝试使用存储过程从 SQL Server 数据库中检索数据。我正在传递一个`SqlDbType.Varchar(50)`类型的参数，但我得到一个 SQL 错误：

> *过程或函数“WyszukajPrzesylki”需要未提供的参数“@Nazwisko”。*

我究竟做错了什么？如果我在 SSMS 中测试它，存储过程就可以工作......

它甚至在我输入时也有效

```
SqlCommand com = new SqlCommand("WyszukajPrzesylki @Nazwisko = Example", con); 
```

你们是我最后的希望，伙计们……我已经因这个问题失去了 2 天的时间，无法再进一步……使用 c# 插入和更新记录没有任何问题……只是这个……

所以这里是SP的代码

```
ALTER PROCEDURE [dbo].[WyszukajPrzesylki] 
-- Add the parameters for the stored procedure here
@Nazwisko varchar(50)
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here
-- SELECT * FROM Przesylki WHERE (NazwiskoAdresata = @NazwiskoAdresata)
SELECT * FROM Przesylki WHERE (Przesylki.NazwiskoAdresata = @Nazwisko)
END 
```

和按钮的动作：

```
SqlConnection con = new SqlConnection(Properties.Settings.Default.Monitoring_PrzesylekString1);
SqlCommand com = new SqlCommand("WyszukajPrzesylki", con);
com.CommandType = CommandType.StoredProcedure;
SqlParameter parametrNazwisko = new SqlParameter("@Nazwisko", SqlDbType.VarChar, 50);
parametrNazwisko.Value = "Dziubak";
com.Parameters.Add(parametrNazwisko);

SqlDataAdapter ad = new SqlDataAdapter(com.CommandText, con);
DataSet ds = new DataSet();

ad.Fill(ds, "id");
con.Close();
DataTable datatableA = ds.Tables[0];
dataGridView1.DataSource = ds;
dataGridView1.DataMember = "id"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:52:58.857

你做的几乎所有事情都是正确的——直到这一行：

```
SqlDataAdapter ad = new SqlDataAdapter(com.CommandText, con); 
```

您正在创建一个 SQL 数据适配器，但仅基于 SQL 语句`com`- 您应该改用它：

```
SqlDataAdapter ad = new SqlDataAdapter(com); 
```

`com`您应该使用已设置的带有参数和所有内容的整个对象 -**而**不仅仅是 SQL 语句文本！

# php - 在php中添加日期时间

> ID：13885328
> 
> 赞同：1
> 
> 时间：2012-12-14T19:49:25.947
> 
> 标签：php, datetime

如果我有：

```
if($date>=$start_interval...){

//Some code

} 
```

其中 $date（当前日期）和 $start_interval 都是日期时间格式——比如 YYYY-MM-DD 00:00:00。我需要做什么才能将一小时（或 60 分钟）添加到 $start_interval？

所以 if 语句将是 - if($date>=$start_interval (+hour)) - 换句话说，如果它在一个多小时后做某事。你会怎么做？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:51:20.107

查看[DateTime](http://us3.php.net/manual/en/book.datetime.php)。它使处理日期变得容易。

```
$now = new DateTime();

$start_interval = new DateTime('2012-12-14 00:00:00');
$start_interval->modify('+1 hour');

if ($now >= $start_interval)
{
     // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:34:21.333

```
<?php

if (strtotime($date) >= strtotime('+1 hour', strtotime($start_interval)) {

//Some code

} 
```

更多信息：[http ://es1.php.net/manual/en/function.strtotime.php](http://es1.php.net/manual/en/function.strtotime.php)

# ruby-on-rails - 考虑到祖先宝石的顶级水平的偏移和限制

> ID：13885329
> 
> 赞同：0
> 
> 时间：2012-12-14T19:49:34.823
> 
> 标签：ruby-on-rails, ancestry

我正在编写一个简单的留言板系统。关于祖先的一件事是它使用单个调用，因此如果我使用限制和偏移量调用，它不会返回一致的顶级元素列表。我需要 @per_page 和 the_offset 来处理分页。

所以我目前有这样的事情：

```
@posts=MbPost.where('forum_id=?',params[:id]).offset(the_offset).limit(@per_page).order('updated_at desc') 
```

但需要偏移量和@per_page 反映顶层（即祖先为NULL）而不是元素总数。

关于如何做到这一点的任何想法？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:02:40.357

您将无法使用单个数据库查询来做到这一点。

原因是，如果分页数为 10，您想显示 10 个顶级帖子（实际上是 15 个帖子），但在下一页中，如果再显示 10 个顶级帖子，您可能会显示 20 个实际帖子。所以分页大小是不同的。

处理该问题的另一种方法是有两个查询：一个用于带有 : 的实际页面，`ancestry is null`并应用限制和偏移量。然后另一个查询获取所有帖子，这些帖子是您在先前查询中拥有的帖子的任何级别子级。

# ruby-on-rails - 如何使用 Capybara 结合 find 和 inside？

> ID：13885336
> 
> 赞同：16
> 
> 时间：2012-12-14T19:50:16.693
> 
> 标签：ruby-on-rails, ruby, rspec, tdd, capybara

以下按预期工作：

```
 within('h2', text: 'foo') do
      should have_content 'bar'
 end 
```

我正在尝试检查父元素，使用`find(:xpath, '..')`

一旦找到一个元素，如何应用`.find(:xpath, '..')`，然后检查***该***元素中的某些内容？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-14T19:53:50.103

当您在其中使用 XPath 定位器时，`within`它应该以`.`（如果它不以`.` 搜索不是在整个文档内`.myclass`而是在整个文档内）开头。

例如：

```
within('.myclass') do
  find(:xpath, './div')
end 
```

或者：

```
find('.myclass').find(:xpath, './div') 
```

@BSeven 的答案中的代码可以写成一行：

```
expect(find("//h2[text()='foo']/..")).to have_text('bar') 
```

或者

```
expect(page).to have_xpath("//h2[.='foo']/..", text: 'bar') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-05T12:11:20.870

使用 2.11 之后的 Rspec 新语法，应该是；

```
within('h2', text: 'foo') do |h|
   expect(h).to have_content 'bar'
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-15T01:28:20.280

以下是一种方法：

```
 within('h2', text: 'foo') do
   within(:xpath, '..') do
     should have_content 'bar'
   end       
 end 
```

# windows-8 - 无法获得未定义或空引用的属性“完成”

> ID：13885338
> 
> 赞同：1
> 
> 时间：2012-12-14T19:50:18.273
> 
> 标签：windows-8, winjs

为什么我在运行以下代码时收到错误消息**“无法获取未定义或空引用的属性‘完成’” ？**

```
new WinJS.Promise(initFunc).then(function () {
                       /* do something that returns a promise */
}).done(function () {
                       /* do something that returns a promise */
}).then(function () {
                       /* do something that returns a promise */
}).done(function () {
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:50:18.273

你只能`done()`在 Promise 链中调用一次，并且必须在链的末尾。在有问题的代码中，`done()`函数在 Promise 链中被调用了两次：

```
new WinJS.Promise(initFunc).then(function () {
}).done(function () {     <====== done() is incorrectly called here--should be then()
}).then(function () {     <====== the call to then() here will throw an error
}).done(function () {             
}); 
```

当您的代码以两个单独的 Promise 链开始并最终在稍后将它们组合在一起时，可能会发生此问题，如下所示：

```
new WinJS.Promise(initFunc).then(function () {
                       /* do something that returns a promise */
}).done(function () {     <====== change this done() to a then() if you combine the two
});                               promise chains

new WinJS.Promise(initFunc).then(function () {
                       /* do something that returns a promise */
}).done(function () {
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:04:59.520

你会得到同样的错误：

```
new WinJS.Promise(initFunc).then(function () {
}).done(function () {
}); 
```

因为你的代码`then`没有返回一个可以调用的承诺`done`。

```
new WinJS.Promise(initFunc).then(function () {
    // Return a promise in here
    // Ex.:
    return WinJS.Promise.timeout(1000);
}).done(function () {
}); 
```

回到您的初始代码，正如您在回答中提到的那样，您不应该将多个链接`done`在一起。

# excel - excel行中的数据分区

> ID：13885342
> 
> 赞同：1
> 
> 时间：2012-12-14T19:50:29.017
> 
> 标签：excel, vbscript, vba

我有一个 excel，大约有 156 列和 2000 行。这里正在审核 36 个任务，其中每个任务由 4 列描述 - 比如说“任务 1 名称”、“任务 1 开始日期”、“任务 1 完成日期”、在 Task1 中花费的总时间”。现在，有时这 4 列中的每一列都可以具有所有值，而有时所有 4 列都没有值。现在目标是找出这样的 4 元组集合，其中至少有一个列数据存在。但是如果数据不存在，那么它将被告知为不需要的集合。所以我需要将这些不需要的列移动到一侧，并将部分归档或完全归档的数据移到一侧。但是非空数据集将从右侧移动如果它的前面有 4 个空白列，则向左，否则。找到下面的输入表：

![在此处输入图像描述](../Images/4555e77890e5f11b845fcdf867830e78.png)

![在此处输入图像描述](../Images/81c7c9029bf409808ad1884ce0690396.png)

![在此处输入图像描述](../Images/79592053281ed3ca168edef9b67437e1.png)

***编辑：***

```
 Sub DataShiftFromLeftToRight(Ob6)

Dim count 
Dim dataArray 
Dim height 
Dim width 
Dim rWidth 
Dim packArray 
Dim i 
Dim j
dim rowArray
dim ColumnInGroup
dim k 
dim b 
    With Ob6 
    .activate
    ColumnInGroup= 4
    height = .Cells(.Rows.count, 1).End(-4162).Row
' assume 1st line is header
' start from 2nd line
If height > 1 Then
    For i = 2 To height'Number of rows

        width = .Cells(i, .Columns.count).End(-4159).Column
        'round width
        'MsgBox(width)
        if (width -1 )mod columnInGroup <> 0 then  
            width = (((width -1)\columnInGroup )+1)* columnInGroup + 1
        end if
        if width > 1 then 'need to change to the column number
            'finding the last unit originally packed 
            redim rowArray(0,width-1)
            rowArray = .range(.cells(i,1), .cells(i,width)).value'here 1 need to change
            'default value
            rWidth = width
            for j = 2 to width  step ColumnInGroup'here j need to change
                if j+ColumnInGroup -1 <= width then 
                    b = false
                    for k = 0 to ColumnInGroup - 1
                        if rowArray(1,j+k) <> "" then 
                            b = true 
                            exit for 
                        end if
                    next 
                    if not b then 
                        rWidth = j - 1
                        exit for
                    end if
                else
                    rWidth = width
                end if
            next

            If width > rWidth Then
                ReDim dataArray(1 ,(width - rWidth))
                dataArray = .Range(.Cells(i, rWidth + 1), .Cells(i, width)).Value

                count = 0

                For j = LBound(dataArray, 2) To UBound(dataArray, 2) Step ColumnInGroup
                    if j+ColumnInGroup - 1<= ubound(dataArray,2) then 
                        b = false
                        for k = 0 to ColumnInGroup - 1
                            if dataArray(1,j+k) <> "" then 
                                b = true 
                                exit for 
                            end if
                        next 
                        if  b then 
                            count = count + 1
                        end if
                    else
                        exit for
                    end if
                Next

                ReDim packArray(0, count * columnInGroup - 1)
                count = 0
                For j = LBound(dataArray, 2) To UBound(dataArray, 2) Step columnInGroup
                    ' we found a "T" Unit
                    if j+columnInGroup -1<= ubound(dataArray,2) then 
                        b = false
                        for k = 0 to ColumnInGroup - 1
                            if dataArray(1,j+k) <> "" then 
                                b = true 
                                exit for 
                            end if
                        next 
                        if  b then 
                            count = count + 1
                            for k = 0 to columnInGroup - 1
                                If j + k <= UBound(dataArray, 2) Then
                                    packArray(0, (count - 1) * columnInGroup  + k ) = dataArray(1, j + k)
                                end if
                            next 
                        end if

                    else
                        exit for
                    end if

                Next

                'clear original data
                .Range(.Cells(i, rWidth + 1), .Cells(i, width)).ClearContents

                'for j = 1 to ubound(packArray,2)
            '       .cells(i,rWidth+j).value = packArray(1,j)
            '   next 
                .Range(.Cells(i, rWidth + 1), .Cells(i, rWidth + count * columnInGroup)).Value = packArray

            End If
        end if
    Next

End If

End With

End Sub 
```

但这是无法产生正确数据输出的代码。***请在这里帮助我***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:45:42.570

此代码将所有“填充”任务向左移动：

```
Sub ShiftTasks()

    Dim wst As Excel.Worksheet
    Dim lRow As Long
    Dim lTask As Long
    Dim lCol As Long

    Const NUM_TASKS As Long = 36
    Const COL_FIRST As Long = 12

    Set wst = ActiveSheet

    With wst

        For lRow = 2 To .UsedRange.Rows.Count
            lTask = 1
            Do While lTask <= NUM_TASKS
                lCol = COL_FIRST + (lTask - 1) * 4
                If Len(.Cells(lRow, lCol).Value) = 0 And _
                   Len(.Cells(lRow, lCol + 1).Value) = 0 And _
                   Len(.Cells(lRow, lCol + 2).Value) = 0 And _
                   Len(.Cells(lRow, lCol + 3).Value) = 0 Then
                    ' make sure there is something to the right to shift over
                    If .Cells(lRow, lCol).End(xlToRight).Column < .Columns.Count Then
                        ' delete the empty cells and shift everything left``
                        .Range(.Cells(lRow, lCol), .Cells(lRow, lCol + 3)).Delete Shift:=xlToLeft
                    Else
                        ' force the loop to the next row
                        lTask = NUM_TASKS + 1
                    End If
                Else
                    lTask = lTask + 1
                End If
            Loop
        Next lRow
    End With

End Sub 
```

# asp.net-mvc - 由于 ExtensionlessUrlHandler，WebAPI 的重写规则失败

> ID：13885343
> 
> 赞同：2
> 
> 时间：2012-12-14T19:50:31.077
> 
> 标签：asp.net-mvc, iis, asp.net-web-api, cross-domain, rewrite

我正在尝试使用 IIS 将请求从我的 ASP.net MVC 4 应用程序重写到我的 ASP.net MVC 4 WebApi。从客户端，我使用 ajax 调用回服务器，然后我希望服务器重写请求以指向 webapi 站点。如果我能让它工作，这应该可以解决任何跨域问题。

我已经按照这篇文章安装了 URL 重写、Web Farm 框架、ARR 和外部缓存：http: [//blogs.iis.net/wonyoo/archive/2011/04/20/how-to-install-application-request-routing -arr-2-5-without-web-platform-installer-webpi.aspx](http://blogs.iis.net/wonyoo/archive/2011/04/20/how-to-install-application-request-routing-arr-2-5-without-web-platform-installer-webpi.aspx)

在 IIS->Application Request Routing->Server Proxy Settings”中，选中“Enable proxy”复选框。

我的重写规则如下所示：

```
<rule name="webapi" stopProcessing =" true" >
  < match url =" webapi/(.*)" />
  < conditions>
    < add input =" {HTTP_HOST}" pattern="web(\.mytest\.com)$" />
  </ conditions>
  < action type =" Rewrite" url= "http://api{C:1}/api/{R:1} " />
</ rule> 
```

如果我在我的 MVC 站点的 web.config 中删除 ExtensionlessUrlHandlers，那真的很好奇，那么我的重写工作就完美了。不幸的是，MVC 路由中断，我的网站不再工作。如果放回 ExtensionlessUrlHandlers，重写失败，MVC 路由按预期工作。

有没有简单的方法来解决这个问题？

# php - 令人困惑的 MySQL 连接表

> ID：13885348
> 
> 赞同：0
> 
> 时间：2012-12-14T19:51:05.910
> 
> 标签：php, mysql, sql, join

我需要帮助构建一个 mysql 查询来加入几个表。我已经盯着它看了一段时间，尝试不同的想法，但我不知道该怎么做。

我有两张桌子：

```
1) TASKS
- id
- name
- description
- date_added
- status

2) T_USERS_ASSIGNED
- id
- task_id
- user_id 
```

第一个表包含任务及其状态。第二个表包含分配给他们的用户。由于单个任务可以分配给多个用户，因此单个任务的 T_USERS_ASSIGNED 中可能有多个记录。

我正在尝试计算分配给特定用户的所有任务，其中任务状态等于 1。

我尝试了这样的事情，但失败了。任何帮助或见解将不胜感激：

```
SELECT `p_tasks_assigned`.`id` as `users`
 FROM
 `p_tasks_assigned` JOIN
 `p_tasks` ON `p_tasks_assigned`.`task_id` = `p_tasks`.`id`
WHERE `p_tasks`.`status` = 1 ANND `p_tasks_assigned`.`user_id` = :user;

$result = $db->prepare (statement above);
$result->bindValue (':user', $_POST['id'], PDO::PARAM_INT);
$result->execute ();
$count_user_open = $result->rowCount (); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:02:10.900

像这样的东西应该工作：

```
SELECT a.user_id
     , COUNT(DISTINCT t.id) AS count_tasks_assigned
  FROM t_users_assigned a
  LEFT
  JOIN tasks t
    ON t.id = a.task_id
   AND t.status = 1
 GROUP BY a.user_id
 ORDER BY a.user_id 
```

* * *

这得到了所有用户。如果您只想返回单个用户的计数，并将 user_id 作为绑定参数传入（正如我刚刚在您的示例中注意到的那样），那么：

```
SELECT COUNT(DISTINCT t.id) AS count_tasks_assigned
  FROM t_users_assigned a
  LEFT
  JOIN tasks t
    ON t.id = a.task_id
   AND t.status = 1
 WHERE a.user_id = :user
 GROUP BY a.user_id
 ORDER BY a.user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:54:57.870

如果我理解正确，您正在寻找用户列表，然后在该用户名旁边是状态为 1 的许多任务。由于可以将多个用户分配给一个任务，因此这些数字的总和可能是大于任务数。如果是这种情况，您的查询将如下所示：

```
SELECT user_id, 
       Count(*) AS count 
FROM   t_users_assigned 
       LEFT JOIN tasks 
              ON t_users_assigned.task_id = tasks.id 
WHERE  status = 1 
GROUP  BY user_id; 
```

# json - CGI 和 xmlhttrequest JSON 响应

> ID：13885353
> 
> 赞同：-2
> 
> 时间：2012-12-14T19:51:18.607
> 
> 标签：json, perl, cgi

我正在做一个 cgi 脚本来读取 XMLHttpRequest，它会用 Json 响应。读取请求的部分完成（例如：注册，添加昵称并传递到数据库）。但是，我怎样才能创建响应？？？在 JSON 中。

你能帮助我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:56:47.153

尝试使用谷歌查询“perl cpan json”...

阅读： http: [//metacpan.org/pod/JSON](http://metacpan.org/pod/JSON)

# c# - 计算 C# 结构的自定义校验和

> ID：13885356
> 
> 赞同：-4
> 
> 时间：2012-12-14T19:51:33.897
> 
> 标签：c#, binary, byte, structure

使用以下结构：

```
public struct ION
{
    public Single a0;
    public Single a1;
    public Single a2;
    public Single a3;
    public Single b0;
    public Single b1;
    public Single b2;
    public Single b3;
    public Double A1;
    public Double A0;
    public UInt32 Tot;
    public Int16 Wnt;
    public Int16 DtLS;
    public Int16 WnLSF;
    public Int16 DN;
    public Int16 DtLSF;
    public Int16 Wn;
    public UInt32 Tow;
    public Int16 bulwn;
    public UInt32 bultow;
    public UInt16 checksum;
} 
```

...如果校验和值“通过将结构分解为 37 个无符号短裤，将它们相加并取结果的最低有效 16 位来计算”，我将如何计算校验和值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:55:08.560

我将首先从结构创建一个字节数组（[参见此处](https://stackoverflow.com/questions/3278827/how-to-convert-structure-to-byte-array-in-c)），然后使用`BitConvert.ToUInt16()`读取`ushort`值并从那里添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:16:27.297

这是一种方法，但这是否符合要求……谁知道呢。cpu字节序重要吗？

```
public struct ION
{
    public Single a0    ;
    public Single a1    ;
    public Single a2    ;
    public Single a3    ;
    public Single b0    ;
    public Single b1    ;
    public Single b2    ;
    public Single b3    ;
    public Double A1    ;
    public Double A0    ;
    public UInt32 Tot   ;
    public Int16  Wnt   ;
    public Int16  DtLS  ;
    public Int16  WnLSF ;
    public Int16  DN    ;
    public Int16  DtLSF ;
    public Int16  Wn    ;
    public UInt32 Tow   ;
    public Int16  bulwn ;
    public UInt32 bultow ;

    public UInt16 checksum
    {
        get
        {
            byte[][] raw =
            {
                BitConverter.GetBytes( a0     ) ,
                BitConverter.GetBytes( a1     ) ,
                BitConverter.GetBytes( a2     ) ,
                BitConverter.GetBytes( a3     ) ,
                BitConverter.GetBytes( b0     ) ,
                BitConverter.GetBytes( b1     ) ,
                BitConverter.GetBytes( b2     ) ,
                BitConverter.GetBytes( b3     ) ,
                BitConverter.GetBytes( A1     ) ,
                BitConverter.GetBytes( A0     ) ,
                BitConverter.GetBytes( Tot    ) ,
                BitConverter.GetBytes( Wnt    ) ,
                BitConverter.GetBytes( DtLS   ) ,
                BitConverter.GetBytes( WnLSF  ) ,
                BitConverter.GetBytes( DN     ) ,
                BitConverter.GetBytes( DtLSF  ) ,
                BitConverter.GetBytes( Wn     ) ,
                BitConverter.GetBytes( Tow    ) ,
                BitConverter.GetBytes( bulwn  ) ,
                BitConverter.GetBytes( bultow ) ,
            } ;
            byte[] cooked = raw.SelectMany( x => x ).ToArray() ;
            uint  accumulator = 0 ;

            for ( int i = 0 ; i < cooked.Length ; i+= 2 )
            {
                ushort value = BitConverter.ToUInt16( cooked , i ) ;
                accumulator += value ;
            }
            return (ushort) accumulator ;
        }
    }

} 
```

或者您可以下拉到不安全的代码并执行以下操作：

```
public UInt16 checksum
{
  get
  {
    uint accumulator = 0 ;
    unsafe
    {
      fixed ( ION* x = &this )
      {
        for ( ushort *p = (ushort*) x ; p < x+1 ; ++p )
        {
          accumulator += *p ;
        }
      }
    }
    return (ushort) accumulator ;
  }
} 
```

但是，如果结构中或结构末尾有任何填充，我不相信您可以保证填充八位字节为零，因此您的结果可能会受到影响。如果你的结构包含奇数个八位字节，你可能会抛出一个异常，试图读取结构的末尾......或计算一个不正确的值。

当然，您可以将结构序列化为内存流，然后将其作为 ushort 流读取：

```
public UInt16 checksum
{
  get
  {
    uint accumulator = 0 ;
    using ( BinaryReader reader = new BinaryReader( new MemoryStream() ) )
    {
      BinaryFormatter bf = new BinaryFormatter();
      bf.Serialize( reader.BaseStream , this ) ;
      reader.BaseStream.Seek(0,SeekOrigin.Begin) ;
      while ( reader.BaseStream.Position < reader.BaseStream.Length )
      {
        ushort value = reader.ReadUInt16() ;
        accumulator += value ;
      }
    }
    return (ushort) accumulator ;
  }
} 
```

但同样，这是对布局、字节顺序和填充的假设。如果结构大小是奇数，你几乎肯定会抛出异常。

# php - 将 html 文本拆分为字符和 html 标签（使用 PHP 和 MySQL）

> ID：13885357
> 
> 赞同：1
> 
> 时间：2012-12-14T19:51:34.743
> 
> 标签：php, html-parsing

我想将 html 文本存储到数据库中，拆分为单个字符。由于文本很长，过程很频繁，因此性能尤为重要。因此，我需要找到一种有效的方法来执行此操作，`PHP`而不会超载构建多个数组。

当然，目的是带有几个标记 html 标记的简单文本，没有嵌套节点。可以考虑用于 BBCode 或类似的东西。我只是想有可能在这个拆分过程中跳过一些标签。

**例子：**

```
$html='This <i>is</i> a <strong>test</test>'; 
```

该字符串应存储在`mysql`数据库中

```
id  character  html_tag
1    T
2    h
3    i
4    s
5
6    i          italic
7    s          italic
8
9    a
10
11   t          strong
12   e          strong
13   s          strong
14   t          strong
15   ! 
```

如何在没有相应 html 标签的情况下捕获单个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:05:44.730

使用快速 XMLReader 解析 Html。

此代码也适用于嵌套标签，`$tags`变量是标签堆栈。在这里，我总是回显最嵌套的标签，即堆栈中的最后一个。

```
$html='This <i>is</i> a <strong>test</strong>!';

$reader=new XMLReader();
$reader->XML('<root>'.$html.'</root>');
// skip root node
$reader->read();
$tags=array('');
while($reader->read())
    switch($reader->nodeType)
    {
        case $reader::ELEMENT:
            $tags[]=$reader->name;
            break;
        case $reader::END_ELEMENT;
            array_pop($tags);
            break;
        default:
            for($i=0;$i<strlen($reader->value);$i++)
                // your insert sql here
                echo "<br/>'".$reader->value[$i]."' ".end($tags);
    } 
```

此外，由于速度至关重要，请考虑将插入缓冲到字符串中并将它们作为批处理运行：

```
INSERT INTO tname (character,html_tag) VALUES('T',''),('h',''); 
```

# c++ - OpenCV 转换慢

> ID：13885359
> 
> 赞同：1
> 
> 时间：2012-12-14T19:51:41.167
> 
> 标签：c++, performance, image-processing, opencv

我有一张格式`cv::Mat` `fooImage`为 1000*1000 像素的图像。`CV_32F`

现在我想显示图像，我使用

```
fooImage.convertTo(displayImage,CV_8UC1) 
```

但是，仅这条线就需要大约 5ms。这正常吗？？如何快速将`CV_32F`Mat 图像转换为`CV_8UC1`?

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:15:44.253

这听起来很慢，但 convertTo() 可能并不是特别适合使用 SSE2 或任何东西。

您正在从 RAM 中读取 4Mb，分配 1Mb，执行 400 万次浮点运算并将 1Mb 写回 RAM，因此毫秒不是不合理的。

您可以编写一个简单的循环来自己将图像数据转换为 uchar，只需将每个值乘以 255.0

您是否包括显示图像的时间？您正在创建一个仍然是 8 位灰度的“displayImage”，在显示时必须将其转换为 RGB 或 RGBA 图像

# javascript - 带有嵌入 iframe 的谷歌地图的粘性光标（webkit 浏览器和 IE）

> ID：13885371
> 
> 赞同：3
> 
> 时间：2012-12-14T19:52:46.667
> 
> 标签：javascript, google-maps, google-chrome, iframe, webkit

当我将谷歌地图（api v3）嵌入到 iframe 中时，我遇到了一些问题。

当我单击地图上的某个位置时，将其拖动直到光标离开 iframe，然后释放鼠标按钮，然后当我将地图移到地图上时，即使我没有按下鼠标按钮，地图也会粘在光标上了。

[http://my.brandtr.ee/public/tmp/test-iframe.html](http://my.brandtr.ee/public/tmp/test-iframe.html)

似乎如果地图嵌入在 iframe 中，那么如果用户在 iframe 之外释放鼠标按钮，则地图不会捕获“mouseup”事件。此问题仅发生在 webkit 浏览器（chrome 23、safari 6）和 IE 上。火狐工作正常。

有人已经有这个问题了吗？这几天一直困扰着我...

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:09:13.690

我不完全确定谷歌地图依赖什么事件来停止拖动地图，但只是在玩你的演示时，我注意到当你`mouseup`进入 iframe 时它会停止。如果您`mouseout`在 iframe 上模拟此事件，Google 地图会认为您放开那里的地图并停止拖动。

我从控制台内部尝试了这段代码，它工作正常：

```
var iframe = document.getElementsByTagName('iframe')[0];
iframe.addEventListener('mouseout', function(e){
    var doc = this.contentDocument || this.contentWindow; // wk/moz vs. ie
    doc = doc.document || doc; // opera
    if (doc.createEvent) {
        var evt = doc.createEvent('MouseEvents');
        evt.initMouseEvent('mouseup', true, false, window, 
            0, e.screenX, e.screenY, e.clientX, e.clientY, 
            false, false, false, false, 0, null
        );
        doc.getElementsByTagName('body')[0].dispatchEvent(evt);
    } else if (doc.createEventObject) { // legacy ie
        var evt = doc.createEventObject(e);
        doc.getElementsByTagName('body')[0].fireEvent('mouseup', e);
    }
}); 
```

这适用于 FF、Safari、Chrome 和 Opera。我在没有应用修复的情况下快速浏览了您在 IE 中的页面。但是，看起来那里甚至没有发生拖动错误，因此可能不值得为这种情况提供。祝你好运！

# android-sdk-tools - 如何在我的应用中搜索不兼容的 Android API 使用情况

> ID：13885379
> 
> 赞同：2
> 
> 时间：2012-12-14T19:53:13.693
> 
> 标签：android-sdk-tools

假设我已将我的 Android 应用程序的 AndroidManifest.xml 设置如下：

`<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/>`

我对如何扫描我的源代码以查找不属于我指定的最低 SDK 版本（在本示例中为 API 级别 8）的一部分的 Android API 调用感兴趣。这样，我可以检查每个有问题的调用以确保它通过反射测试或其他向后兼容性的保证正确包装，这样它就不会使旧设备崩溃。理想情况下，我可以将此调用标记为“安全”，这样它就不会在后续扫描中触发。

例如，假设开发人员在不知情的情况下签入了一些使用 API 的代码`DownloadManager`，该 API 在 API 级别 9 及更高级别中可用。由于我上面的“uses-sdk”声明，MyApp 将在 Android 2.2（API 级别 8）设备上构建、安装和运行。但是一旦代码路径调用该`DownloadManager`2.2 设备上的方法，用户将遇到未解决的虚拟方法异常（崩溃）。这是我试图避免的。

理想情况下，扫描这些可能不兼容的 API 是我可以在构建期间从命令行执行的操作；并且，它将能够处理对 android:minSdkVersion 的更改，而无需进行太多的重组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-27T12:44:06.540

我自己很难找到这个，所以我会很清楚地回答（即使这是一个 2 岁的问题）。

在 Eclipse 中，右键单击项目，单击“Android 工具”>“运行 lint：检查常见错误”。

这将为您提供 lint 可以在您的代码中找到的所有奇怪的列表，包括与您在清单中定义的 minSdkVersion 的不兼容性（可以在“正确性”类别的列表中找到）。

# perl - 通用特征集设计——拆分数据和代码

> ID：13885382
> 
> 赞同：-2
> 
> 时间：2012-12-14T19:53:17.293
> 
> 标签：perl

我是 Perl 编程的新手，想了解以 Perl 模块的形式构建一段代码的最佳方法是什么。它应该提供一个框架，使“数据”可以在不影响代码的情况下增长/缩小。

本质上，程序需要执行 3 个不同的事情（“数据”部分）：

1.  从多个文件（整个文本）中收集文本，具体取决于主机上安装的 RPM（RPM 名称 = 'A'、'B'、'C' 分别为参数）。文件列表将会增长，并且应该存储在一个简单的外部化文件中，该文件应该易于编辑。
2.  在操作系统 (Linux) 上运行操作系统命令并将命令的输出捕获到文本文件中，具体取决于安装在主持人。
3.  在特定数据库上运行数据库命令（我们称之为“DBA”、“DBB”、“DBC”，3 个数据库对应于 3 个主机）并将输出捕获到文本文件，具体取决于哪个 RPM（RPM 名称 = 'A' , 'B', 'C' 分别为参数）安装在主机上。

我需要以如下方式对逻辑进行编程：

1.  必须有一个“RPM 到文件/命令/DB-command”的映射，它很容易与主 Perl 程序分开编辑
2.  文件的数量、它们的名称/位置 + OS + DB 命令预计会发生变化，因此应该可以轻松地与主 Perl 程序分开编辑
3.  RPM 名称和对上述数据的映射可以更改，因此应该很容易与主 Perl 程序分开编辑

到目前为止我研究过的想法：

1.  散列的散列（在 Perl 模块中）
2.  数组数组（在 Perl 模块中）
3.  外部 XML
4.  外部键值对文件

有关执行此操作的最简单和最简单的方法的任何指导？说明性代码将非常有益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:37:26.650

存储配置的方式取决于它的复杂程度，以及对没有对系统进行编程的人必须能够访问它的程度。

将配置存储为 Perl 代码的好处是，解析非常便宜。但是，可能存在安全问题，因为配置文件不会被加载，而是被执行。此外，这是一个可怕的设计。

XML 非常灵活，但是 (a) 手动编辑很糟糕，并且 (b) 处理起来比其他解决方案更昂贵^([需要引用])。

如果您的配置数据可以很容易地表示为键值对，那就去做吧。否则，请查看 JSON 或 YAML，它们将为您提供所需的所有功能（大部分时间）。

* * *

我会以这样的方式编写系统，即在程序开始时加载一个主对象。构造函数将 RPM 类型作为参数，并处理适当的配置文件。

然后，您将为此对象创建一个接口，以便处理文本文件、运行系统命令和运行数据库查询将使用正确的配置值。

只需确保使您的代码美观且通用，这样程序的主要逻辑就不需要知道它正在使用什么 RPM，除非在初始化时。

Perl 类通常同时是一个模块。在合理的情况下，根据需要创建辅助模块。

* * *

*   [Perl 面向对象编程教程](http://perldoc.perl.org/perlootut.html)
*   [YAML 文档](https://metacpan.org/module/YAML)
*   [JSON 文档](https://metacpan.org/module/JSON)

* * *

示例构造函数：

```
package MyObject;
use strict; use warnings; use Carp;
use YAML qw(LoadFile);
my $config_file_dir = "/foo/bar/";
sub new {
   my ($class, $type) = @_;
   do_rpm_type_sanity_check($type) or confess qq(Invalid type given: $!);
   my $self = LoadFile($config_file_dir . $type . ".yaml");
   do_config_sanity_check($self) or confess qq(Really weird configuration: $!);
   bless $self, $class;
} 
```

示例用法

```
#!/usr/bin/perl
use strict; use warnings;
use MyObject;

my $type = magically_get_type();

my $obj = MyObject->new($type);
...; # do something useful with the object. 
```

# html - PHP：制作简单的登录页面

> ID：13885386
> 
> 赞同：0
> 
> 时间：2012-12-14T19:53:32.550
> 
> 标签：html, forms

```
Notice: Undefined index: user in C:\xampp\htdocs\PhpProject1\login.php

Notice: Undefined index: password in C:\xampp\htdocs\PhpProject1\login.php 
```

运行此代码时出现此错误

```
if ( isset($_REQUEST['attempt']) );
{
    $link = mysql_connect('localhost', 'root', '') or die('cant connect to db');
    mysql_select_db('test_user');

    $user = mysql_real_escape_string($_POST['user']);
    $password = (mysql_real_escape_string($_POST['password'])); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:55:38.603

这意味着那些关联键不在您的`$_POST`数组中，这意味着以下两种情况之一：

*   您的表单字段未使用`name="user"`and`name="password"`属性
*   您的表单标签省略了`method="post"`属性

# git - 在 git 合并冲突中，如何保留正在合并的版本？

> ID：13885390
> 
> 赞同：12
> 
> 时间：2012-12-14T19:54:03.040
> 
> 标签：git, version-control, git-tower

我的机器上有两个本地 git 分支——一个名为“v2”的分支和一个名为“master”的分支。我正在将 v2 合并到 master 中，同时签出 master 和 head 分支。

我想将“v2”分支合并到“master”分支中。当我执行合并时，我必须一一解决许多冲突。

对于每个冲突，我如何保留“v2”分支文件而不是文件的“主”分支版本？

Git Tower 针对这些类型的冲突提供给我的选项是：

*   将 FILENAME 标记为手动解析
*   通过保留 FILENAME 来解决
*   通过删除文件名解决
*   恢复他们的 FILENAME 版本
*   在外部应用程序中打开

据我了解，“保留”文件的选项意味着保留“v2”版本（被合并的那个），“删除”文件意味着不添加“v2”版本（而是保留现有的“主”版本）。但是，当我使用删除选项时，它实际上从存储库中完全删除了该文件。

**对于这些类型的冲突，如何保留“v2”分支文件而不是文件的“主”分支版本？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-14T19:59:41.100

即使您使用的是 Git Tower，您也可以下拉到命令行并使用

```
git checkout --theirs file.txt 
```

这里有一些关于它的文档：

[http://gitready.com/advanced/2009/02/25/keep-either-file-in-merge-conflicts.html](http://gitready.com/advanced/2009/02/25/keep-either-file-in-merge-conflicts.html)

如果您只想使用 git tower，请按原样完成合并，然后签出该文件的另一个分支的版本。现在暂存并提交**修改**- 如果可能的话。

Git 已被开发为一个命令行工具。对于我曾经使用过的所有其他工具，我总是在功能上存在差距。我选择拥抱而不是反对 Git 的设计。

此外，您可以连接 Beyond Compare 之类的东西，然后选择问题中提到的“外部工具”。在那里，您可以选择“他们”的一方。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-15T09:00:38.813

如果您希望保留 v2（我希望 master 看起来与 v2 完全一样），我认为最简单的方法是：

*   签出要合并的分支
*   `ours`使用策略将master合并到分支中
*   结帐大师
*   合并分支

它看起来像这样：

```
git checkout v2
git merge -s ours master
git checkout master
git merge v2 
```

如果您只希望这种类型的解决方案仅发生在冲突中，那么您可以执行以下操作：

```
git checkout master
git merge -s recursive -Xtheirs v2 
```

[您可以在此处](http://git-scm.com/docs/git-merge#_merge_strategies)阅读 git 文档中的合并策略。

**更新**：不幸的是，我认为 Git Tower 还没有公开这样做的方法。:-(

# perl - 如何将敏感的 perl 变量保留在文档根目录之外

> ID：13885393
> 
> 赞同：2
> 
> 时间：2012-12-14T19:54:16.533
> 
> 标签：perl

多年来，我一直使用 perl 作为一种在生成动态网站时操作 MySQL 文件的方法。当我在 perl 4 的日子里学到了我的技能时，我采用了一些不一定适用于 perl 5.10 的做法

一种这样的做法是将敏感和静态信息 - 例如 MySQL 用户名和密码 - 作为全局标量变量存储在 blah.cfg 文件中，然后将其放置在文档根目录之外 - 正如我多年来所做的那样。

然后我在我的 perl 顶部附近有一条线：

```
require "./../../data/blah.cfg"; 
```

因此我可以使用变量来访问数据库。

当我添加时，我的问题开始了：

```
use strict;
use warnings; 
```

然后我不能拥有这些全局变量，因为它们当然会抛出错误。因此，今天经过数小时的研究后，我似乎在翻阅信息，发现不应再使用“要求”，而应改为“使用”。这似乎是一场火灾的洗礼：库，包，模块等......如果模块在路径之外，我需要使用 FindBin 来定位它 - 但如果我使用的是 mod_perl 则不需要......

有没有一种简单有效的方法来存储两个简单的变量并以安全的方式检索它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:07:37.867

您可以使用一个实际的配置文件（和类似 Config::Any 的东西），或者如果您继续使用 Perl 模块，只需正确执行即可。

```
use strict;
use warnings;

package MyConfig;

use Exporter qw( import );

our @EXPORT = qw( %config );

our %config = (
   ...
);

1; 
```

然后你可以使用

```
use MyConfig qw( %config );
... $config{...} ... 
```

（不要使用“Config”作为模块名称；它已经存在。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:56:33.583

您可以将文件路径存储在您创建的 perl 模块中。然后，在该模块上创建一个 getter 方法以返回文件路径。

在您的主脚本中，“使用”该模块并在需要文件路径时调用 getter。

使用该模块将类似于全局变量。文件路径只会存储在一个地方（改进维护），但它可以在任何地方访问（甚至是其他脚本）。

我不记得 Perl，但我认为您必须在作为整个系统一部分的任何单独脚本中“使用”您的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:58:44.540

将配置数据存储在配置文件中而不是其他脚本中会更好。有很多模块可以为您解析配置文件。

*编辑：*

为什么首先在文档根目录中有任何代码？总的来说，这似乎是一个坏主意，不管整个敏感的配置问题如何。

# ajax - ASP.NET WebAPI 模型绑定不起作用

> ID：13885396
> 
> 赞同：0
> 
> 时间：2012-12-14T19:54:41.710
> 
> 标签：ajax, asp.net-web-api

在我完成了几个月的项目中，我在控制器中有这个：

```
 public HttpResponseMessage Post(PersonModel model)
 {
 } 
```

我可以发送带有 json 对象内成员的 ajax 帖子，WebAPI 将无缝填充模型中的每个属性。

但是，我刚刚开始了一个新项目并且正在做同样的事情，但是控制器内的模型现在只是空的。绑定似乎被破坏了。ASP.NET WebAPI 上是否发生了一些更改以防止这种情况发生？

这是我的ajax请求：

```
$.ajax({ url: "api/auth", type: "post", data: { username: "jon", password: "123" },dataType: "json", contentType: "application/json; charset=utf-8" }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:36:32.023

您的 ajax 请求内容正文的格式为`application/x-www-form-urlencoded`:
`username=jon&password=123`，但您已将 content-type 设置为`application/json`。因此，Json.NET 序列化程序无法反序列化请求正文内容。

您可以执行以下操作之一：

1.  将 content-type 更改为，`application/x-www-form-urlencoded`而不是将 contentType 显式设置为`application/json`

2.  继续使用`application/json`，但 Json 将您的数据字符串化：
    `data: JSON.stringify({ username: "jon", password: "123" })`

希望这可以帮助。

# android - 每个 NDK 构建都是完整的重建

> ID：13885400
> 
> 赞同：9
> 
> 时间：2012-12-14T19:55:12.723
> 
> 标签：android, android-ndk, makefile

> **可能重复：**
> [防止 ndk-build 自动清理模块](https://stackoverflow.com/questions/13788824/prevent-ndk-build-from-automatically-cleaning-module)

带有 NDK 库的 Android 项目。NDK r8c。在 Cygwin 下编译（这是一个旧项目）。

一堆 C++ 和 C 文件，以及一些通过 LOCAL_LDLIBS 链接的 .a 库。

从前一段时间开始，我注意到每个 NDK 构建都会遍历所有源文件。即使我连续两次调用 ndk-build，在第二次尝试时也会完全重建。我可以看到 .mk 文件中没有任何效果，我调用构建的命令是 vanilla `$NDKPATH/ndk-build`。任何地方都没有 -B 选项。

唯一的问题是：在每次构建中，NDK 都会说以下内容：

```
/cygdrive/c/android-ndk-r8c/build/core/add-application.mk:128: Android NDK: WARNING:
APP_PLATFORM android-9 is larger than android:minSdkVersion 3 in
/cygdrive/d/AppPath/AndroidManifest.xml 
```

请问这是怎么回事？我能以某种方式看到基于什么文件日期`make`决定重建它吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T20:08:20.700

r8c 中有一个已知的错误，即使没有任何源代码更改也会导致完全重建。请参阅[此错误报告](http://code.google.com/p/android/issues/detail?id=39810)。

建议的修复（不是我的）是将 build/core/definitions.mk 的第 289 行从

`$1: $$(__ndk_file_dir)`

到

`$1: | $$(__ndk_file_dir)`

# javascript - Canvas 在 html 中获取整个文档正文并使其隐藏但可绘制

> ID：13885404
> 
> 赞同：0
> 
> 时间：2012-12-14T19:55:23.580
> 
> 标签：javascript, html, css, canvas, document-body

我在关于如何在画布中绘制[http://jsfiddle.net/ArtBIT/kneDX/](http://jsfiddle.net/ArtBIT/kneDX/)的 stackoverflow 问题中发现了这一点，现在我希望画布覆盖我的整个 html 页面。例如：

```
<body>
  <div id="2">
    //code
  </div>
  <div id="2">
    //code
  </div>
</body> 
```

因此画布将附加到页面上，用户可以在页面内容上进行绘制。那么有没有什么方法可以创建画布，以便将 100% 的身体隐藏在绘图线之外？

***编辑：***

如何在上面的代码中不画圆圈连续画线？当您将鼠标移过文本时，还有什么方法可以在文本上绘制一些东西而不选择它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:14:38.393

首先，使画布的`height`和`width`属性等于[页面高度](https://stackoverflow.com/questions/1145850/get-height-of-entire-document-with-javascript)和[页面宽度](https://stackoverflow.com/questions/1038727/how-to-get-browser-width-using-javascript-code)。（获取这些值非常困难，因此请参阅链接问题以了解最佳方法——或者只使用 jQuery。）

接下来，添加一些 CSS 以使画布位于页面的绝对左上角：

```
#canvas {
    position: absolute;
    top: 0;
    left: 0;
} 
```

然后，*不要*像当前那样通过调用来更改画布的背景颜色`ctx.clearTo`。画布[默认是透明的](https://stackoverflow.com/questions/4815166/how-do-i-make-a-transparent-canvas-in-html5)，所以只要不改变背景颜色，你就可以看到它下面的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:02:27.940

传入正确的宽度和高度参数而不是 (200, 200)

使用`window.screen.width`并`window.screen.height`给你这个：http: [//jsfiddle.net/kneDX/878/](http://jsfiddle.net/kneDX/878/)

**更新：**

有了这个，我们最终将画布与窗口一样大，而不是与客户区一样大。请参阅[apsillers 的回答](https://stackoverflow.com/a/13885615/360844)。

# random - 如何在 JFrame 中随机添加（标签）？

> ID：13885408
> 
> 赞同：0
> 
> 时间：2012-12-14T19:55:49.227
> 
> 标签：random, jframe, add

我尝试制作记忆卡游戏...

有没有办法在 JFrame 窗口随机添加（标签）？

我使用 FlowLayout，我有：

```
add(l1);add(l2);add(l3);add(l4); 
```

如果我写这样的东西：

```
add(l3);add(l4);add(l1);add(l2); 
```

改变一系列图像..这就是我想要的......每次都添加不同位置的标签..

如果没有，有没有办法在标签中放置不同行（随机）的图像？我有这种方式来放置图像：

```
imageOfLabel1 = imageOfLabel2 = "im1.jpg"; 
imageOfLabel3 = imageOfLabel4 = "im2.jpg"; 
```

对不起我的英语！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:31:13.873

我不确定 l1、l2、l3 和 l4 的类型是什么。假设它们都是 JLabel 实例。然后你可以创建一个数组，打乱它，然后添加：

```
JLabel[] ls = new JLabel[] {l1, l2, l3, l4};

// shuffle
Random rand = new Random();
for (int i = 0; i < ls.length; i++) {
    int randIndex = rand.nextInt(ls.length);
    JLabel temp = ls[i];
    ls[i] = ls[randIndex];
    ls[randIndex] = temp;
}

for (int i = 0; i < ls.length; i++) add(ls[i]); 
```

# ruby-on-rails-3 - 如何为 excel 工作表单元格设置适当的边框，在 Ruby on Rails 中导出 excel

> ID：13885414
> 
> 赞同：0
> 
> 时间：2012-12-14T19:56:08.233
> 
> 标签：ruby-on-rails-3, export-to-excel, xls

在控制器的索引操作中，我得到了这个：

```
def index
    @vehicles = Vehicle.all
    respond_to do |format|
    format.html
    format.xls
    end
end

I have got this in my index.xls.erb template:
 <table>
      <tr>
        <th>Manufacturer</th>
        <th>Model</th>
        <th>Version</th>
        <th>CC</th>
        <th>BHP</th>
      </tr>
    <% @vehicles.each do |vehicle| %>
      <tr>
        <td><%= vehicle.manufacturer.name %></td>
        <td><%= vehicle.model %></td>
        <td><%= vehicle.version %></td>
        <td><%= vehicle.engine_cc %></td>
        <td><%= vehicle.power_bhp %></td>
       <% end %>
  </table>

 and I have registered the mime_type for xls like this:
 Mime::Type.register 'application/vnd.ms-excel', :xls 
```

但这没有 MS Excel 显示的通常的单元格边框。尝试了 Railscasts 中的建议，即[http://railscasts.com/episodes/362-exporting-csv-and-excel](http://railscasts.com/episodes/362-exporting-csv-and-excel)。但这会在尝试打开文件时导致基本的输入/输出错误（在这种情况下可能是文件格式错误）。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:14:39.813

如果您希望从 rails 创建有效的 excel 数据，请查看 axlsx。本着全面披露的精神，我是 gem 的作者，但它确实是制作 excel (xlsx) 文档的最佳选择。

您可以在此处找到有关 gem 的更多信息： [https ://github.com/randym/axlsx](https://github.com/randym/axlsx)

这里有在 Rails 中使用它的教程：http: [//axlsx.blog.randym.net/](http://axlsx.blog.randym.net/)

还有一些辅助 gem，例如acts_as_xlsx 和 axlsx_rails，它们使模型导出和报告生成变得非常容易。

如果您有任何问题，您通常也可以在

# 自由节点上的 axlsx。

使用 axlsx，您可以执行以下操作：

```
require 'axlsx'
p = Axlsx::Package.new
p.workbook.add_worksheet(:name => 'vehicles') do |sheet|
  sheet.add_row %w(Manufacturer Model Version CC BHP), :style => Axlsx::STYLE_THIN_BORDER
  @vehicles.each do |vehicle|
    data = [vehicle.manufacturer.name, vehicle.model, 
            vehicle.version, vehicle.engine_cc,
            vehicle.power_bhp]
    sheet.add_row data, :style => Axlsx::STYLE_THIN_BORDER
  end
end
p.serialize('vehicles.xlsx') 
```

您还可以做更多的事情，例如自定义样式、图表、超链接、图像等。如果您认为它适合您的开发风格，请试一试。

# java - 按下按钮时播放随机声音文件 - Android

> ID：13885420
> 
> 赞同：0
> 
> 时间：2012-12-14T19:56:43.110
> 
> 标签：java, android

我是一个初学者，我正在尝试制作一个非常简单的应用程序，一个按钮和资产文件夹中的 4 个 .ogg 文件，该按钮将播放上面提到的随机文件。

我只有一个主要课程和一个布局。

这是我所做的，代码没有显示任何错误，但是在模拟器上启动时应用程序立即崩溃。

我的主要课程：-

```
 MediaPlayer player;
AssetFileDescriptor descriptor;
private String[] filelist;

@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_list_item);

player = new MediaPlayer();

Button playSound = (Button)findViewById(R.id.button1);

AssetManager aMan = this.getAssets();
try 
{
 filelist = aMan.list("/assets");
} catch (IOException e1) {
    e1.printStackTrace();
}

playSound.setOnClickListener(new View.OnClickListener() 
{           
    public void onClick(View v) 
    {
        Random randomGenerator = new Random();
        int randomInt = randomGenerator.nextInt(filelist.length);

        try 
        {
            String mediaFile = filelist[randomInt];
            descriptor = getAssets().openFd(mediaFile);
                player.setDataSource(descriptor.getFileDescriptor(),descriptor.getStartOffset(),descriptor.getLength());
            descriptor.close();
            player.prepare();
                        player.start();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
});
} 
```

我的布局：-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:src="@drawable/background"
    android:contentDescription="@string/desc" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="154dp"
    android:layout_marginRight="92dp"
    android:text="@string/button1" />

</RelativeLayout> 
```

这是logcat：-

```
12-14 19:36:56.062: D/AndroidRuntime(540): Shutting down VM
12-14 19:36:56.062: W/dalvikvm(540): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-14 19:36:56.072: E/AndroidRuntime(540): FATAL EXCEPTION: main
12-14 19:36:56.072: E/AndroidRuntime(540): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mbawardi.layan/com.mbawardi.layan.MainActivity}: java.lang.NullPointerException
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.os.Looper.loop(Looper.java:137)
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-14 19:36:56.072: E/AndroidRuntime(540):  at java.lang.reflect.Method.invokeNative(Native Method)
12-14 19:36:56.072: E/AndroidRuntime(540):  at java.lang.reflect.Method.invoke(Method.java:511)
12-14 19:36:56.072: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-14 19:36:56.072: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-14 19:36:56.072: E/AndroidRuntime(540):  at dalvik.system.NativeStart.main(Native Method)
12-14 19:36:56.072: E/AndroidRuntime(540): Caused by: java.lang.NullPointerException
12-14 19:36:56.072: E/AndroidRuntime(540):  at com.mbawardi.layan.MainActivity.onCreate(MainActivity.java:39)
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.app.Activity.performCreate(Activity.java:4465)
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-14 19:36:56.072: E/AndroidRuntime(540):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
12-14 19:36:56.072: E/AndroidRuntime(540):  ... 11 more
12-14 19:36:59.042: I/Process(540): Sending signal. PID: 540 SIG: 9
12-14 19:37:06.032: D/AndroidRuntime(556): Shutting down VM
12-14 19:37:06.032: W/dalvikvm(556): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-14 19:37:06.042: E/AndroidRuntime(556): FATAL EXCEPTION: main
12-14 19:37:06.042: E/AndroidRuntime(556): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mbawardi.layan/com.mbawardi.layan.MainActivity}: java.lang.NullPointerException
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.os.Looper.loop(Looper.java:137)
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-14 19:37:06.042: E/AndroidRuntime(556):  at java.lang.reflect.Method.invokeNative(Native Method)
12-14 19:37:06.042: E/AndroidRuntime(556):  at java.lang.reflect.Method.invoke(Method.java:511)
12-14 19:37:06.042: E/AndroidRuntime(556):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-14 19:37:06.042: E/AndroidRuntime(556):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-14 19:37:06.042: E/AndroidRuntime(556):  at dalvik.system.NativeStart.main(Native Method)
12-14 19:37:06.042: E/AndroidRuntime(556): Caused by: java.lang.NullPointerException
12-14 19:37:06.042: E/AndroidRuntime(556):  at com.mbawardi.layan.MainActivity.onCreate(MainActivity.java:39)
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.app.Activity.performCreate(Activity.java:4465)
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-14 19:37:06.042: E/AndroidRuntime(556):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
12-14 19:37:06.042: E/AndroidRuntime(556):  ... 11 more 
```

应用 ρяσѕρєя K 的解决方案后的第二个 logcat：-

```
12-14 20:19:02.227: D/AndroidRuntime(537): Shutting down VM
12-14 20:19:02.237: W/dalvikvm(537): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-14 20:19:02.247: E/AndroidRuntime(537): FATAL EXCEPTION: main
12-14 20:19:02.247: E/AndroidRuntime(537): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mbawardi.layan/com.mbawardi.layan.MainActivity}: java.lang.NullPointerException
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.os.Looper.loop(Looper.java:137)
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-14 20:19:02.247: E/AndroidRuntime(537):  at java.lang.reflect.Method.invokeNative(Native Method)
12-14 20:19:02.247: E/AndroidRuntime(537):  at java.lang.reflect.Method.invoke(Method.java:511)
12-14 20:19:02.247: E/AndroidRuntime(537):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-14 20:19:02.247: E/AndroidRuntime(537):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-14 20:19:02.247: E/AndroidRuntime(537):  at dalvik.system.NativeStart.main(Native Method)
12-14 20:19:02.247: E/AndroidRuntime(537): Caused by: java.lang.NullPointerException
12-14 20:19:02.247: E/AndroidRuntime(537):  at com.mbawardi.layan.MainActivity.onCreate(MainActivity.java:42)
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.app.Activity.performCreate(Activity.java:4465)
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-14 20:19:02.247: E/AndroidRuntime(537):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
12-14 20:19:02.247: E/AndroidRuntime(537):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:12:03.053

从导入中删除`import android.R;`并导入您的项目 R 文件。或使用

```
descriptor = MainActivity.this.getAssets().openFd(mediaFile); 
```

代替

```
descriptor = MainActivity.this.getAssets().openFd("audioogg/"+mediaFile); 
```

# ios - 在 iOS Core Audio 中 - 查找 OSStatus 错误的最佳方法是什么（即 -43？）

> ID：13885422
> 
> 赞同：5
> 
> 时间：2012-12-14T19:56:46.750
> 
> 标签：ios, core-audio, runtime-error

在 Core Audio中查找**OSStatus**错误（即**-43** ）含义的最佳方法是什么？有没有办法在你的 iOS 代码中处理它们，以便它们可以被格式化以在控制台中显示一个简短的解释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T20:04:32.623

快速浏览后，目前最好的方法似乎是使用 Unix 命令行工具 - macerror - 并输入错误代码作为参数：不确定是否可以调用并获取 macerror 查询的结果我在 iOS 中的 Obj-C 代码打印到控制台中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-28T13:27:49.223

[IOS Dev Weekly](https://iosdevweekly.com/)中最近的一篇文章链接到一个很棒的网页，该网页允许您搜索所有 OSStatus 代码。[绝对值得收藏。](http://www.osstatus.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T11:49:48.460

聚会有点晚了，但我刚刚注意到至少一个错误代码（560226676）实际上是一个四字母代码；它可以在 big-endian 中表示为 '!dat'。搜索它会给出 kAudioDeviceUnsupportedFormatError。

IOW，用这样的小功能打印错误代码不会有什么坏处：

```
char *OSTStr( OSType type )
{
    static union OSTStr {
        uint32_t four;
        char str[5];
    } ltype;
    ltype.four = EndianU32_BtoN(type);
    ltype.str[4] = '\0';
    return ltype.str;
} 
```

# scala - 这是如何“类型不匹配”？

> ID：13885423
> 
> 赞同：4
> 
> 时间：2012-12-14T19:56:51.553
> 
> 标签：scala, scalaquery

```
found   : (Int, String, Option[java.lang.String])
required: (Int, String, Option[java.lang.String]) 
```

相关代码：

```
object M extends Table[(Int, String, Option[String])]("table") {

  def msaid = column[Int]("msaid", O NotNull)
  def name = column[String]("name", O DBType "varchar(255)")
  def shape = column[Option[String]]("shape")
  def * = msaid ~ name ~ shape

  type T = (Int, String, Option[java.lang.String])

  def apply(msa: T) = 1

  def q() = db withSession { s: Session => (for (r <- M) yield M(*)).list()(s) }
                                                                 ^
                                                                 ^
... 
```

我也试过

```
 type T = (Int, String, Option[String]) 
```

最终目标是我希望所有选定的列都转换为具有命名访问器的对象，而不是元组。

```
Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_07). 
```

更新：

这是问题的[要点](https://gist.github.com/4288479)（从上面的代码略微简化，并通过仅使用 Int 消除了任何 String/java.lang.String “混淆”。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:53:58.333

错误消息并没有用来告诉您哪个是 TupleN，尽管我认为这在某些时候得到了改进。不匹配发生在元组和 n 个参数之间。或不。

[修复](https://issues.scala-lang.org/browse/SI-5067)在2.9.2 中。我注意到您的 .sbt 使用 2.9.1 scalaquery，以防万一。scala-tools.org 不是已经过时了吗？抱歉帮了半忙。

作为一个非用户，看起来 Projection2 不是你想要的元组，尽管它是一个产品：

```
class Projection2 [T1, T2] extends (Column[T1], Column[T2]) with Projection[(T1, T2)] 
```

回复：

```
scala> M.column[Int]("id") ~ M.column[Int]("n")
res1: (Int, Int) = Projection2

scala> M(res1)
<console>:23: error: type mismatch;
 found   : (Int, Int)
 required: (Int, Int)
              M(res1)
                ^

scala> M.apply
                                def apply(v: (Int, Int)): Int   

scala> M.apply((1,2))
res3: Int = 1 
```

# apache2 - 无法使用 Mountain Lion（OS X 服务器）和 RVM 启动 Passenger 3.0.18

> ID：13885424
> 
> 赞同：1
> 
> 时间：2012-12-14T19:57:12.633
> 
> 标签：apache2, osx-mountain-lion, passenger

我最近在我的 Mac Mini Server 上进行了 Mountain Lion 的全新安装。

我根据[http://www.phusionpassenger.com](http://www.phusionpassenger.com)上的说明使用 gem 安装了 3.0.18 版，没有看到任何错误。

```
rvmsudo gem install passenger-enterprise-server-3.0.18.gem
rvmsudo passenger-install-apache2-module 
```

这是我在 /etc/apache2/httpd.conf 中的条目，我的用户名被屏蔽了：

```
LoadModule passenger_module /Users/username/.rvm/gems/ruby-1.9.3-p327/gems/passenger-enterprise-server-3.0.18/ext/apache2/mod_passenger.so
PassengerRoot /Users/username/.rvm/gems/ruby-1.9.3-p327/gems/passenger-enterprise-server-3.0.18
PassengerRuby /Users/username/.rvm/wrappers/ruby-1.9.3-p327/ruby 
```

我取消了以下声明的注释：

```
Include /private/etc/apache2/extra/httpd-vhosts.conf 
```

这是一个示例虚拟主机条目。我在文件中有三个。

```
<VirtualHost *:80>
  ServerName www.mydomain.com
  ServerAlias mydomain.com
  PassengerAppRoot /Users/username/Sites/myfolder/
  DocumentRoot /Users/username/Sites/myfolder/public
  <Directory /Users/username/Sites/myfolder/public>
     Allow from all
     AllowOverride all
     Options -MultiViews
  </Directory>
</VirtualHost> 
```

我已经多次重新启动 Apache。以下是来自我的服务器的信息：

```
[~]$ ps -ef | grep Passenger
  501 18804   303   0 12:39PM ttys000    0:00.00 grep Passenger
[~]$ rvmsudo passenger-status
Password:
**ERROR: Phusion Passenger doesn't seem to be running.**
[~]$ rvmsudo passenger-config --version  
3.0.18 
```

我曾尝试对此进行在线搜索。我很惊讶，尽管根据我的理解，Passenger 已经存在了几年，但这个特定错误并没有那么多。我已经在 Phusion 乘客 Google 群组上发布了这个问题，但没有听到任何消息。

任何帮助将不胜感激，越早越好 LOL。说真的，我需要在明天晚上之前启动我的三个网站之一。这是阻止这种情况发生的唯一问题。再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:31:41.643

我继续搜索，但仍然没有为使用 Mountain Lion 的人找到有关此错误的任何信息。经过几天的彻底沮丧后，我决定联系 Phusion，因为我最近购买了其中一个支持包。我得到的支持比我为此付出的代价更值得。我得出的结论是，Lion 和 Mountain Lion 之间的某个地方一定发生了变化，但不知道该去哪里找。

当我将Passenger与Lion Server一起使用时，我在升级到Mountain Lion（OS X Server）后尝试的设置完美运行。经过大量广泛检查后，支持人员决定尝试在**/Library/Server/Web/Config/apache2/httpd_server_app.conf**中的 Web 服务的配置文件中进行我在**/etc/apache2/httpd.conf**中所做的更改. 我所有的 Rails 应用程序都完美加载。显然，其他配置文件要么被忽略，要么被忽略。当支持人员带领我在**/etc/apache2/httpd.conf**中进行尝试并检查日志时，其中没有任何内容。这是他决定尝试更新 Web 服务配置文件的时候。

 ****注意：我必须向 Phusion 的支持团队大声疾呼。当我告诉你他们在大海捞针时，我并没有夸大其词。我创建了几个文件，其中包含他们支持的注释，我希望永远不必再次使用。他们非常出色，而且很容易合作。****

# windows-8 - 数据绑定捕捉模式 Windows 8

> ID：13885432
> 
> 赞同：0
> 
> 时间：2012-12-14T19:58:16.703
> 
> 标签：windows-8

使用 GridView，我绑定到可观察集合中的多个项目。当我进入捕捉模式时，我的 GridView 无法加载任何数据，并且没有任何项目是可点击的。请参阅随附的屏幕截图。我的应用程序在左侧，它显示精选和收藏夹。这是我的代码：

```
public sealed partial class RestaurantHomePage : MenuFinderWin8.Common.LayoutAwarePage
{
    MenuFinderAppServiceClient serviceClient;
    RestaurantRepository repository;
    Geolocator _geolocator = null;
    ObservableCollection<RestaurantLocation> items;

    public RestaurantHomePage()
    {
        this.InitializeComponent();
        if (!Network.IsNetwork())
        {
            return;
        }
        repository = new RestaurantRepository();
        serviceClient = new MenuFinderAppServiceClient();
        _geolocator = new Geolocator();
        items = new ObservableCollection<RestaurantLocation>();
        //BindData();
    }

    void btnAbout_Click(object sender, RoutedEventArgs e)
    {
        Flyout f = new Flyout();
        LayoutRoot.Children.Add(f.HostPopup); // add this to some existing control in your view like the root visual

        // remove the parenting during the Closed event on the Flyout
        f.Closed += (s, a) =>
        {
            LayoutRoot.Children.Remove(f.HostPopup);
        };

        // Flyout is a ContentControl so set your content within it.
        SupportUserControl userControl = new SupportUserControl();
        userControl.UserControlFrame = this.Frame;
        f.Content = userControl;
        f.BorderBrush = new SolidColorBrush(Windows.UI.Color.FromArgb(255, 223, 58, 51));
        f.Width = 200;
        f.Height = 200;
        f.Placement = PlacementMode.Top;
        f.PlacementTarget = sender as Button; // this is an UI element (usually the sender)

        f.IsOpen = true;
    }

    void btnSearch_Click(object sender, RoutedEventArgs e)
    {
        Flyout f = new Flyout();
        LayoutRoot.Children.Add(f.HostPopup); // add this to some existing control in your view like the root visual

        // remove the parenting during the Closed event on the Flyout
        f.Closed += (s, a) =>
        {
            LayoutRoot.Children.Remove(f.HostPopup);
        };

        // Flyout is a ContentControl so set your content within it.
        RestaurantSearchUserControl userControl = new RestaurantSearchUserControl();
        userControl.UserControlFrame = this.Frame;
        f.Content = userControl;
        f.BorderBrush = new SolidColorBrush(Windows.UI.Color.FromArgb(255, 223, 58, 51));
        f.Width = 600;
        f.Height = 400;
        f.Placement = PlacementMode.Top;
        f.PlacementTarget = sender as Button; // this is an UI element (usually the sender)

        f.IsOpen = true;

    }

    void btnViewFavorites_Click(object sender, RoutedEventArgs e)
    {
        App.DataMode = Mode.SavedRestaurant;
        if (repository.GetGroupedRestaurantsFromDatabase().Count() == 0)
        {
            MessageDialog messageDialog = new MessageDialog("You have no saved restaurants.", "No Restaurants");
            messageDialog.ShowAsync();
        }
        else
        {
            this.Frame.Navigate(typeof(RestaurantSearchDetails));
        }
    }

    private async void BindData()
    {
        try
        {
            items = await serviceClient.GetSpecialRestaurantsAsync();

            List<RestaurantLocation> myFavs = repository.GetRestaurantLocations();
            foreach (var a in myFavs)
            {
                items.Add(a);
            }

            this.DefaultViewModel["Items"] = items;
        }
        catch (Exception)
        {
            MessageDialog messsageDialog = new MessageDialog("The MenuFinder service is unavailable at this time or you have lost your internet connection. If your internet is OK, please check back later.", "Unavailable");
            messsageDialog.ShowAsync();
            btnAbout.IsEnabled = false;
            btnSearch.IsEnabled = false;
            btnViewFavorites.IsEnabled = false;
        }
        myBar.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
    }

    /// <summary>
    /// Populates the page with content passed during navigation.  Any saved state is also
    /// provided when recreating a page from a prior session.
    /// </summary>
    /// <param name="navigationParameter">The parameter value passed to
    /// <see cref="Frame.Navigate(Type, Object)"/> when this page was initially requested.
    /// </param>
    /// <param name="pageState">A dictionary of state preserved by this page during an earlier
    /// session.  This will be null the first time a page is visited.</param>
    protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
        BindData();
        // TODO: Assign a bindable collection of items to this.DefaultViewModel["Items"]
    }

    private void itemGridView_ItemClick_1(object sender, ItemClickEventArgs e)
    {
        App.CurrentRestaurantLocation = e.ClickedItem as RestaurantLocation;
        if (App.CurrentRestaurantLocation != null)
        {
            Order order = repository.AddOrder(DateTime.Now, string.Empty, App.CurrentRestaurantLocation.ID);
            App.CurrentOrder = order;
            App.DataMode = Mode.Menu;
            this.Frame.Navigate(typeof(RootViewPage));
        }
    }
} 
```

![点击这里查看附件图片](../Images/01965d5344fa4998e2a1593429a7a3b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:46:47.437

当您切换到快照视图时，您的 gridView 将隐藏，并显示 ListView。您可以通过检查处理 XAML 中从一个到另一个的可视化状态管理器来查看这一点。

因此，**解决方案是**：通过绑定到适当的属性来调整 ListView 中的 ItemTemplate，就像对 GridView 所做的那样；您可能还想更改字体的前景色。此外，您希望在 ListView 中包含 IsItemClickEnabled 和 ItemClick（或 SelectionMode 和 SelectionChanged）。

# mvvm - 使用 MVVM 在全景项目中添加/删除用户控件 - Windows Phone

> ID：13885436
> 
> 赞同：0
> 
> 时间：2012-12-14T19:58:37.533
> 
> 标签：mvvm, windows-phone, panorama-control, dynamic-usercontrols

我有一个全景应用程序，到目前为止，它有两个全景项目，“最近”和“流行”。这些使用来自视图模型的绑定填充数据。我想添加第三个（“搜索”）全景项目，最初只显示一个文本框和一个按钮。

当用户输入文本并单击按钮时，我希望将文本框和按钮替换为显示搜索结果的 ListBox 控件。

我找不到任何关于如何使用 MVVM 模式执行此操作的示例。我没有使用 MVVM 框架，也不想使用，因为我只是在学习这一切。

如果您可以解释或更好，请指出允许我这样做的示例，我将非常感谢您的帮助。如果我在请求中遗漏了任何必需的信息，请告诉我。

真挚地，

卡迈勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:13:28.403

通常对于这样的事情，您的 ViewModel 中有一个属性可以告诉视图要显示什么。对于如何做到这一点，您有很多不同的选择。

一种选择是让列表框绑定到一个 Results 属性。将文本框和按钮放在 Grid 中，并将网格的 Visibility 属性绑定到 Visible 的属性，如果没有结果，则不可见。

有很多不同的方法可以做到这一点。

[这里](https://stackoverflow.com/questions/2097253/collapse-visible-usercontrols-on-buttonclick-with-mvvm-no-swap-mechanism)和[这里](https://stackoverflow.com/questions/5916535/silverlight-mvvm-button-enable-visibility-properties)的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:18:42.883

您可能可以将自定义类的列表绑定到全景 ite 。自定义类包含标题和/或描述以及页面类。

您可以在主视图模型中维护视图。

另一种解决方案是在 xaml 中添加项目并为整个全景项目控件使用相同的视图模型。使用属性，您可以控制每个项目的可见性。

就像科比说的：有很多解决方案。这取决于您的应用程序和要求... :)

# iphone - 有没有办法永久保存游戏数据？

> ID：13885439
> 
> 赞同：1
> 
> 时间：2012-12-14T19:58:45.007
> 
> 标签：iphone, ios, cocoa-touch

因此，当应用程序被删除时，他们可以重新下载并且数据仍然存在。我正在尝试永远存储一些数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:59:57.267

您需要将其存储在云中，并有一个帐户系统供用户登录，以便您知道将哪些数据发送回该客户端。

你可以使用苹果的[iCloud](https://stackoverflow.com/questions/7795629/icloud-basics-and-code-sample)，或者使用[你自己的网络服务](http://blog.nodejitsu.com/create-nodejs-web-services-in-one-line)，或者类似[parse](http://parse.com)的东西。

# c# - OSX 上的 Mono：找不到 gtksharpglie-2.dll

> ID：13885454
> 
> 赞同：7
> 
> 时间：2012-12-14T19:59:43.053
> 
> 标签：c#, macos, mono, gtk

我正在尝试在 C# 中迈出第一步，并希望构建一个空的 GTK 窗口作为我的第一个任务。通过`macports`我安装了以下软件包：

*   单声道@2.10.9
*   gtk-sharp@1.0.10
*   gtk-sharp2@2.12.10

我还使用 Mono 主页上的 MonoDevelop。

我将`gtk-sharp.dll`(from `/opt/local/lib/mono/gtk-sharp-2.0`) 添加到我的参考文献中。我的代码如下所示：

```
using System;
using Gtk;

namespace lolbr_client
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            Console.WriteLine("Loading..");
            Window window = new Window("test");
        }
    }
} 
```

当我编译并运行该代码段时，它似乎找到并包含 GTK 库，它将“正在加载..”打印到控制台，但后面的行`Console.WriteLine()`会导致此错误：

```
System.DllNotFoundException: gtksharpglue-2
  at (wrapper managed-to-native) Gtk.Container:gtksharp_gtk_container_get_focus_child_offset ()
  at Gtk.Container..cctor () [0x00000] in <filename unknown>:0 
```

虽然我的文件系统上不存在那个特定的 .dll，但快速`locate gtksharpglue-2`显示了以下文件：

```
/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libgtksharpglue-2.so
/opt/local/lib/libgtksharpglue-2.a
/opt/local/lib/libgtksharpglue-2.la
/opt/local/lib/libgtksharpglue-2.so 
```

这些文件对我有帮助吗？从这里调试/修复此问题的下一步是什么？我已经在 Google 上进行了搜索，但要么我对这个主题太陌生而无法识别有用的信息，要么就是不存在有用的信息。有人能帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T09:38:11.537

如何运行 GTK Sharp MONO 应用程序（例如使用 Xamarin Studio 编译）的解决方案是执行以下操作：

1.  将您的 mono/gtk-sharp 应用程序编译为 Release

2.  像这样创建 shell 脚本文件（bash）（随意命名）

    ```
    [sharp]!/bin/sh

    export DYLD_FALLBACK_LIBRARY_PATH="/Library/Frameworks/Mono.framework/Versions/Current/lib:$DYLD_FALLBACK_LIBRARY_PATH:/usr/lib"    
    exec /Library/Frameworks/Mono.framework/Versions/Current/bin/mono ./AsketicExcel.exe 
    ```

![在此处输入图像描述](../Images/f886b96c0f4943dd889bebea164a795f.png)

_3。然后你可以运行这个表单终端或者你可以使用这个打包工具[http://sveinbjorn.org/platypus](http://sveinbjorn.org/platypus)并创建普通的 OSX 应用程序:) （在包中包含你在发布目录中的所有文件）

然后为了在其他 Mac 上运行这个应用程序，您需要安装 GTK# 和 Mono 运行时[http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)

最后它看起来像： ![在此处输入图像描述](../Images/8b80803fdd3b9292ed3a2f0716a60cc4.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T22:44:17.220

我找到了问题，我`dllmap`的不完整。

我将以下几行添加到`/Library/Frameworks/Mono.framework/Versions/2.10.9/etc/mono/config`：

```
<dllmap os="osx" dll="libgtk-win32-2.0-0.dll" target="/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libgtk-quartz-2.0.0.dylib" />
<dllmap os="osx" dll="glibsharpglue-2" target="/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libglibsharpglue-2.so" />
<dllmap os="osx" dll="libgthread-2.0-0" target="/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libgthread-2.0.0.dylib" />
<dllmap os="osx" dll="libgthread-2.0-0.dll" target="/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libgthread-2.0.0.dylib" />
<dllmap os="osx" dll="libglib-2.0-0.dll" target="/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libglib-2.0.0.dylib" />
<dllmap os="osx" dll="libgobject-2.0-0.dll" target="/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libgobject-2.0.0.dylib" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T15:50:11.650

也遇到了这个问题，虽然 Fabian 的回答是正确的，但这不是我的解决方案。根据[提交给 Xamarin 的这个错误](https://bugzilla.xamarin.com/show_bug.cgi?id=4544#c3)`dllmap`，需要添加以下条目`/Library/Frameworks/Mono.framework/Versions/Current/etc/mono/config`（删除了几个重复项）。

```
<dllmap os="osx" dll="glibsharpglue-2" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libglibsharpglue-2.so" />
<dllmap os="osx" dll="gthread-2.0.0" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libgthread-2.0.0.dylib" />
<dllmap os="osx" dll="gthread-2.0" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libgthread-2.0.dylib" />
<dllmap os="osx" dll="glib-2.0.0" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libglib-2.0.0.dylib" />
<dllmap os="osx" dll="glib-2.0" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libglib-2.0.dylib" />
<dllmap os="osx" dll="glibsharpglue-2" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libglibsharpglue-2.so" />
<dllmap os="osx" dll="gtksharpglue-2" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libgtksharpglue-2.so" />
<dllmap os="osx" dll="gobject-2.0.0" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libgobject-2.0.0.dylib" />
<dllmap os="osx" dll="gobject-2.0" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libgobject-2.0.dylib" />
<dllmap os="osx" dll="gtk-quartz-2.0.0" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libgtk-quartz-2.0.0.dylib" />
<dllmap os="osx" dll="gtk-quartz-2.0" target="/Library/Frameworks/Mono.framework/Versions/Current/lib/libgtk-quartz-2.0.dylib" /> 
```

# ios - 使用钛创建 XML 文档

> ID：13885458
> 
> 赞同：1
> 
> 时间：2012-12-14T20:00:16.037
> 
> 标签：ios, xml, titanium, titanium-mobile, titanium-modules

我找不到任何示例或预定义的 XML 方法来使用钛创建 XML 文档。是否有任何机构有使用 Titanium [Appcelerator] 创建 XML 文档的示例或方法。对此有什么建议吗？

谢谢兰吉思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:29:50.380

您可能想从 Titanium 的文档开始搜索： [http ://docs.appcelerator.com/titanium/latest/#!/guide/Working_with_XML_Data](http://docs.appcelerator.com/titanium/latest/#!/guide/Working_with_XML_Data)

或者使用专用于操作 XML 的整个命名空间 Titanium.XML： [http ://docs.appcelerator.com/titanium/latest/#!/api/Titanium.XML](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.XML)

# ios - iOS openGL 图像反转

> ID：13885464
> 
> 赞同：3
> 
> 时间：2012-12-14T20:00:55.427
> 
> 标签：ios, image, opengl-es

作为应用程序的一部分，我正在尝试创建图像的反转。在 Apple 的 GLImageProcessing 演示之后，我使用 openGL 实现了一些图像处理。

我的图像是从 .jpg 加载的，并加载到纹理中。我可以愉快地修改对比度和亮度。

但是，在尝试创建反向图像（将黑色换成白色）时，我的结果并不令人满意。我尝试了几种方法，但在设备上没有任何效果。到目前为止，我已经尝试过； `glBlendFunc(GL_ONE_MINUS_DST_COLOR, GL_ZERO);` 这在模拟器中运行良好，但在设备上会产生不稳定的结果。我也试过； `glBlendFunc(GL_ONE_MINUS_SRC_COLOR, GL_ONE_MINUS_DST_COLOR);` 这会像以前一样产生结果。最后，我试过了； `glLogicOp(GL_XOR);` 这只是在图像和黑屏之间切换。

你能建议一个（相对）简单的解决方案来反转我的图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:09:51.070

这个着色器怎么样：

```
void main() {
    vec4 color = texture2D(texture, textureCoordinate);
    float inverted = 1.0 - color.r; 
    vec4 inverted_vec = vec4( vec3(inverted), 1.0);
    gl_FragColor = clamp(inverted_vec, 0.0, 1.0);"
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:48:27.890

如果你可以使用 OpenGL ES 2.0（你应该可以安全地使用，因为在野外只有一小部分只有 1.1 的设备），一个简单的方法是使用我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架及其 GPUImageColorInvertFilter。

以下代码从磁盘加载您的图像，创建一个颜色反转过滤器，应用该过滤器，然后吐出一个 UIImage 供您使用：

```
UIImage *inputImage = [UIImage imageNamed:@"image.jpg"];
GPUImageColorInvertFilter *stillImageFilter = [[GPUImageColorInvertFilter alloc] init];
UIImage *quickFilteredImage = [stillImageFilter imageByFilteringImage:inputImage]; 
```

如果您只想将生成的图像显示到屏幕上，或者将其用作纹理，则可以将过滤器定向到 GPUImageView 或 GPUImageTextureOutput 以避免一些核心图形开销（由于输出 UIImage 的生成）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T11:53:57.657

如果你没有透明度，我建议你先在图像应该是的地方画一个白色矩形（没有纹理，只有纯白色）。然后使用`glBlendFunc(GL_ZERO, GL_ONE_MINUS_SRC_COLOR)`和禁用 alpha 通道`glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_FALSE)`并绘制灰度纹理。如果你不需要透明度，这应该会给你想要的效果，在其他情况下，你应该使用带有纹理的 FBO 来做同样的事情。同样在绘制纹理后重新启用 Alpha 通道。

# python - 使用 Python 编写带分隔符的 CSV 文件

> ID：13885470
> 
> 赞同：2
> 
> 时间：2012-12-14T20:01:38.703
> 
> 标签：python, csv

我是编程新手，也是这个网站的新手，所以对于我可能会说或问的任何愚蠢或“新奇”的事情，我提前道歉。

我目前正在尝试在 python 中编写一个脚本，该脚本将获取项目列表并将它们写入 csv 文件等。如果有意义的话，列表中的每个项目实际上都是两个字符串的列表。本质上，格式是 [[Google, http://google.com], [BBC, http://bbc.co.uk]]，但当然有不同的值。

在 CSV 中，我希望它显示为第一列中每个列表的第一项和第二列中每个列表的第二项。

这是我需要帮助的代码部分：

```
with open('integration.csv', 'wb') as f:
    writer = csv.writer(f, delimiter=',', dialect='excel')
    writer.writerows(w for w in foundInstances) 
```

无论出于何种原因，分隔符似乎被忽略了。当我在 Excel 中打开文件时，每个单元格都有一个列表。使用旧示例，每个单元格都会有“Google, [http://google.com](http://google.com) ”。我希望 Google 在第一列， http: [//google.com](http://google.com)在第二列。所以基本上是“Google”和“http://google.com”，然后是“BBC”和“http://bbc.co.uk”。这可能吗？

在我的代码中，foundInstances 是包含所有项目的列表。总的来说，脚本运行良好，但我似乎无法完成这最后一步。我已经在 stackoverflow 和 Internet 的其他部分中进行了很多环顾四周，但我没有找到任何可以帮助我完成最后一步的东西。

任何意见是极大的赞赏。如果您需要更多信息，我很乐意为您提供。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:36:02.150

在您的 pastebin 代码中，问题出在：

```
foundInstances.append(['http://' + str(num) + 'endofsite' + ', ' + desc]) 
```

在这里，对于数据中的每一行，您创建一个*已经包含*逗号的字符串。这不是你需要的`csv`模块。CSV 模块从您的数据*中*生成逗号分隔的字符串。您需要将数据作为简单的项目列表提供给它`[col1, col2, col3]`。您正在做的是`["col1, col2, col3"]`，它已经将数据打包成一个字符串。试试这个：

```
foundInstances.append(['http://' + str(num) + 'endofsite', desc]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:19:53.173

我刚刚测试了您发布的代码

```
foundInstances = [[1,2],[3,4]] 
```

它工作得很好。它肯定会以格式生成输出 csv

```
1,2
3,4 
```

所以我认为你`foundInstances`的格式错误。如果您以复杂的方式构造变量，您可以尝试添加

```
import pdb; pdb.set_trace() 
```

在 csv 代码中的实际变量使用之前。这使您可以在运行时使用 python 调试器检查变量。有关使用详细信息，请参阅[Python 调试器参考](http://docs.python.org/2/library/pdb.html)。

作为旁注，根据[PEP-8 Style Guide](http://www.python.org/dev/peps/pep-0008/)，变量的名称应该`found_instances`在 Python 中。

# actionscript-3 - 使用 Tween Class AS3 从中心点缩放

> ID：13885485
> 
> 赞同：1
> 
> 时间：2012-12-14T20:02:41.260
> 
> 标签：actionscript-3, apache-flex, flash-cs5

我需要使用 Tween 类 AS3 从其中心点缩放动态文本框。

基本上，我需要在 300 毫秒左右缩小到 50% ......完成后我想再次放大到 100% 并停止动画。

我试图将中心点设置为文本框的中心，但它总是从左边缩放。

好吧，我一直在努力学习 Tween 类的基础知识，我相信它缺少一些好的属性和方法，比如 greensock！

谢谢你。

```
title_txt.text = "Text";

var textScaleX:Tween;
var textScaleY:Tween;

title_txt.addEventListener(MouseEvent.MOUSE_OVER, scaleObj(1,2, 1));

function scaleObj(startUp:int, endUp:int, duration:int){
    textScaleX = new Tween(title_txt, "scaleX", Strong.easeInOut, startUp, endUp, duration, true);
    textScaleY = new Tween(title_txt, "scaleY", Strong.easeInOut, startUp, endUp, duration, true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:37:19.913

文本字段的来源总是在左上角。但是，您可以计算左上角在比例的 50% 处以及 x 和 y 位置的补间以及 scaleX 和 scaleY 值。

50% x 和 y 的快速计算类似于：

50% x = 100% x 位置 + (100% 文本字段宽度)/4

50% y = 100% y 位置 + (100% 文本字段高度)/4

编辑：这是代码中的这种计算的样子：

```
var targetScale:Number = .5;    //scale 50% but any other scale would work here as well
var targetX:Number = title_txt.x + (title_txt.width - title_txt.width * targetScale) / 2;
var targetY:Number = title_txt.y + (title_txt.height - title_txt.height * targetScale) / 2; 
```

我使用自己的补间类，所以我不确定如何使用 Adob​​e 补间类或 TweenLite 类来实现这一点，但如果你将这些数字粘贴在任何补间类中，则文本字段（或任何其原点位于左上角的对象）角）将围绕中心点进行缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:07:11.937

Number 1 tip for tweening:

*   Don't use adobe tweening classes: their functionalities are not good enough.

Use TweenLite: it's easier to use and has more features.

I realise it's not really an answer to your question, but others have already covered that.

# sql - SQL Server 更新与涉及另一个表的案例

> ID：13885486
> 
> 赞同：0
> 
> 时间：2012-12-14T20:02:49.967
> 
> 标签：sql, sql-server

我有 2 张桌子。一个有订单元素（OE），一个有项目信息（PO）。1个项目有很多订单元素。表格的设置方式，项目日期在 PO 中，货币在 OE 中。我需要更新 OE 表中的欧元汇率。我正在尝试做这样的事情

```
 UPDATE [OETest]
    SET [Euro Exchange Rate] = {
    CASE
        WHEN (DATEPART(month, PO.[Project Date Time]) = January)
        THEN 8.143296
        WHEN (DATEPART(month, PO.[Project Date Time]) = February)
        THEN 8.340111
    }
    FROM [POTest] PO, [OETest] OE       
    WHERE OE.[Currency] = 'YUAN' 
```

但是我迷路了（这是我尝试过的许多查询之一）。谁能帮我构建必要的查询并告诉我它为什么有效？

这个特定的查询告诉我关键字 CASE 附近的语法不正确

为了更清楚地说明我要完成的工作：我在 OE 表中有一个欧元汇率列。我有从网站（不在表中）获得的平均每月汇率。我想根据项目的月份和货币来设置这个汇率栏。我将在单独的查询中处理每种货币，因此人民币是我担心此查询的唯一货币。月份在 PO 表中。我需要在案例语句中使用 PO 表中的月份。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T20:10:27.263

```
UPDATE OE -- the alias here rather than the base table name
   SET [Euro Exchange Rate] = 8.143296
  FROM [POTest] PO
  JOIN [OETest] OE ON OE.project_id = PO.project_id -- you need a link       
 WHERE OE.[Currency] = 'YUAN'
    -- the following date range represents January this year
    AND PO.[Project Date Time] >= '20120101'
    AND PO.[Project Date Time] <  '20120201' 
```

如果您根据不同的日期需要不同的值，则只需要一个 case 语句

```
UPDATE OE -- the alias here rather than the base table name
   SET [Euro Exchange Rate] =
       CASE Month(PO.[Project Date Time])
            when 1 then 8.143296
            when 2 then 7.143296
            when 3 then 7.743296
            END
  FROM [POTest] PO
  JOIN [OETest] OE ON OE.project_id = PO.project_id -- you need a link       
 WHERE OE.[Currency] = 'YUAN'
    -- the following date range represents 3 months this year
    AND PO.[Project Date Time] >= '20120101'
    AND PO.[Project Date Time] <  '20120401' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:23:30.173

究竟是什么问题？

我可以看到查询有很多问题。您遇到什么 sql 错误？

无论如何，如果我要尝试做与我“认为”您正在做的事情相同的事情，我会这样做：

```
UPDATE [OETest] OE
SET [Euro Exchange Rate] = 
(SELECT CASE WHEN (DATEPART(month, PO.[Project Date Time]) = 'January')
    THEN 8.143296
    ELSE 0.000000
END ExchageRate
FROM [POTest] PO)      
WHERE OE.[Currency] = 'YUAN' 
```

我在这里要做的是在 SET 块之后选择我想要的结果。在 CASE 语句中，如果我没有从日期部分得到结果，我添加了一个 else。

WHERE 部分应该是 UPDATE 子句上的 WHERE 条件，因为您需要告诉它要更新哪些记录，除非您要更新该 OETest 表中的所有记录。

所以总而言之，你在说

当 Project Date Time 字段的月份部分等于一月时，使用 POTest 表中的值更新 Euro Exchange Rate 字段，并更新 OETest 表中货币值为“YUAN”的记录。

请注意，您可能需要在 SELECT 语句中有一个 WHERE 子句，因为它可能会返回多条记录，而您只需要一个订单来获取 Project Date Time 字段。猜测一下，您可能想要添加一个 where 语句，如下所示：

```
UPDATE [OETest] OE
SET [Euro Exchange Rate] = 
(SELECT CASE WHEN (DATEPART(month, PO.[Project Date Time]) = 'January')
    THEN 8.143296
    ELSE 0.000000
END ExchageRate
FROM [POTest] PO WHERE PO.ProjectID = 100)      
WHERE OE.[Currency] = 'YUAN' 
```

让我知道这是否有帮助。

问候 JT

# python - Django manytomany：添加多个非唯一关系？

> ID：13885492
> 
> 赞同：3
> 
> 时间：2012-12-14T20:03:17.283
> 
> 标签：python, django, django-orm

我正在构建一个将计算机硬件组合在一起的应用程序。这是我第一次使用 django。假设我有以下型号：

```
class Memory(models.Model):
    partNum = models.CharField()
    capacity = models.CharField()

class Computer(models.Model):
    name = models.CharField()
    memory = models.ManyToManyField(Memory)
    # also has cpus, hard drives, and motherboard, but focus on memory for now 
```

一个内存对象可以属于多个计算机对象，一个计算机对象可以有多个内存对象——即多对多。但是，如果计算机使用多个，则需要安装完全相同的记忆棒。

然而 django 的 manytomany 字段（默认情况下？）只允许内存-计算机关系的一个实例，它必须是唯一的。有什么办法吗？

如果我尝试在管理页面中将许多相同的内存对象添加到计算机，它会显示“与这台计算机和内存的计算机-内存关系已经存在”。如果我尝试向 manage.py shell 中的服务器对象添加多次相同的内存对象，则似乎只添加了一个内存对象。如果我尝试手动编辑数据库以获得重复条目，则会收到一条错误消息，指出该条目已存在。我看到在数据库结构中，某种“唯一在一起”的索引正在强制执行。如果我更改表格以删除该子句，那会解决我的问题吗？除非 django 经理比预期的更愚蠢，否则可能不会。

我有哪些选择？编写我自己的中间模型并使用`through`构造？但是我不会使用很酷的 filter_horizo​​ntal 小部件！重写我的计算机模型以具有外键字段加上内存对象数量的字段？但是我不会得到 ManyToMany API 工具。帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T20:38:07.990

编辑：对不起，我没有很好地阅读你的帖子，关于不想使用“通过”。

规避该问题的一种方法是使用“through”参数，您可以在其中手动指定用于多对多关系的中间模型。这样，您应该仍然拥有（大部分）Django 提供的多对多功能。

然后中间模型可以有计数（我会发现它比拥有多个关系更容易管理）：

```
class Memory(models.Model):
    partNum = models.CharField()
    capacity = models.CharField()

class Computer(models.Model):
    name = models.CharField()
    memory = models.ManyToManyField(Memory, through='ComputerMemory')

class ComputerMemory(models.Model):
    memory = models.ForeignKey(Memory)
    computer = models.ForeignKey(Computer)
    count = models.IntegerField() 
```

有关更多信息，请查看 Django 文档：[https ://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany](https://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:20:03.667

不，这不是妥协，即使你不为通过的东西创建另一个表，django 也会创建它来准确记住与每台计算机相关联的内存，所以你自己做更好......这也是允许您在其中获取具有特定内存的特定计算机所需的其他字段

# maven - Maven 无法计算构建计划：无法传输 org.apache.maven.plugins

> ID：13885496
> 
> 赞同：3
> 
> 时间：2012-12-14T20:03:32.830
> 
> 标签：maven, maven-2, proxy, m2eclipse, m2e

每当我尝试更新 Maven 依赖项时，我都会收到类似的错误 -**无法计算构建计划：null**。起初我曾经得到像这样的错误

**无法计算构建计划：未能从[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)传输 org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1缓存在本地存储库中，解析不会重新尝试，直到经过中央的更新间隔或强制更新。原始错误：无法从/到中央（http://repo1.maven.org/maven2）传输工件 org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1：ConnectException**

但是，当我对 settings.xml 文件进行更改并在 settings.xml 中添加存储库和插件存储库时

```
<repository>
    <id>central</id>
    <url>http://central</url>
    <releases><enabled>true</enabled><updatePolicy>always</updatePolicy></releases>
    <snapshots><enabled>true</enabled><updatePolicy>always</updatePolicy></snapshots>
</repository>
<pluginRepository>
    <id>central</id>
    <url>http://central</url>
    <releases><enabled>true</enabled><updatePolicy>always</updatePolicy></releases>
    <snapshots><enabled>true</enabled><updatePolicy>always</updatePolicy></snapshots>
</pluginRepository> 
```

以前的错误已被删除，但现在我收到以下错误：**无法计算构建计划：null** 如何摆脱此错误！以及如何摆脱这个警告

**类路径条目 org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER 不会被导出或发布。运行时 ClassNotFoundExceptions 可能会导致**。我试图快速修复它，但每当我重新打开项目时，它就会再次出现。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:51:09.783

我可以通过在位于 config.xml 的 settings.xml 文件中启用代理来解决这个问题。起初，如上述问题所述，通过在 settings.xml 文件中添加`repository`和尝试不同的解决方案。`pluginRepository`但实际问题出在代理配置上。我在 5 分钟内尝试了 @akb 在[maven 提供的解决方案不起作用](https://stackoverflow.com/questions/5704010/maven-in-5-min-not-working)。为我解决的解决方案是解决方案 #1，因为我的组织的代理设置没有自动配置。只需在 settings.xml 中包含以下数据并执行 mvn clean，然后更新依赖项即可。

```
<proxies>
  <proxy>
    <id>optional</id>
    <active>true</active>
    <protocol>http</protocol>
    <host>webproxy</host>
    <port>8080</port>
    <username>proxyuser</username>
    <password>proxypass</password>
  </proxy>
</proxies> 
```

# html - 如何让浏览器识别表单上访问过的链接 #

> ID：13885497
> 
> 赞同：9
> 
> 时间：2012-12-14T20:03:35.533
> 
> 标签：html, css, hyperlink, anchor, visited

我有一个页面，其中包含 <url>?<parameters> 形式的链接和 <url>?<parameters>#<anchor> 形式的一些链接。后者有几个不同的地方，但一个很容易理解的例子看起来像这样（大约）：

```
<a href="http://www.mu_site.com/forum.php?forum=1&thread=1#p5">My forum #1: Tread 1, go to post 5</a> 
```

现在我将这些样式附加到页面上

```
    .pageContent {
        字号：8pt；
        颜色：#666666；
        字体家族：Tahoma，无衬线；
        文本对齐：左；
    }
    .pageContent A {
        字号：8pt；颜色：#8d8d8d；字体家族：Tahoma，无衬线；
    }
    .pageContent A：悬停{
        颜色：#000000；
    }
    .pageContent A：访问过 {
        颜色：#660000；
    }

```

pageContent 样式在链接所在的地方使用，并且几乎在任何地方都可以正常工作。

令我困惑的是，后一种形式的链接没有被标记为已访问。我已经尝试了不同的 DOCTYPE 设置，但我无法让它工作。我已经在网上搜索了很多次（我遇到这个问题已经一年多了），但要么我不知道要搜索什么，要么它只发生在我身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:41:59.633

你试过这个顺序的样式吗？

```
a:link    { color: red }    /* unvisited links */ <br>
a:visited { color: blue }   /* visited links   */ <br>
a:hover   { color: yellow } /* user hovers     */ <br>
a:active  { color: lime }   /* active links    */ <br> 
```

请参阅参考[http://www.w3.org/TR/CSS21/selector.html#x35](http://www.w3.org/TR/CSS21/selector.html#x35)

# json - 什么时候是在 API 中使用 API 密钥而不是 oAuth 的好时机

> ID：13885498
> 
> 赞同：0
> 
> 时间：2012-12-14T20:03:43.510
> 
> 标签：json, api, rest, oauth

在我的工作中，我们正在决定 API 的标准。

我见过一些 API 使用 API 密钥。我见过其他人使用用户名和密码的完全身份验证（例如 oAuth2）。

通常是否有使用其中一个的好时机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:51:19.250

OAuth 非常适合“三方身份验证”的场景（第一方：您的 API 服务器，第二方：使用您的 API 的应用程序，第三方：代表其使用 API 的用户）。例如，假设 Instagram 应用程序（第二方）代表用户 John Doe（第三方）将照片上传到 Facebook API（第一方）以显示在他的 Facebook 墙上。

但是，许多 API 没有这种 3 方场景——只有一个 API 和一个应用程序，与任何最终用户特定信息无关。例如，如果经纪公司提供股票报价 API，这是一个两方方案，因为股票报价并非特定于最终用户。（但是，如果有一个 API 可以访问某人的股票投资组合，那就是 3 方场景）。

对于 3 方场景，此时 OAuth 几乎已成为标准。对于 2 方场景，即使可以使用 OAuth，但实际上通常使用更简单的身份验证方案（例如，在 URL 中仅使用 API 密钥，并使用 HTTPS 对中介隐藏 URL）。

# java - Java Apache Tomcat v7.0 中的 XML 文件出现问题

> ID：13885500
> 
> 赞同：0
> 
> 时间：2012-12-14T20:03:55.273
> 
> 标签：java, apache, jakarta-ee, tomcat

嘿伙计们，所以我试图将我的表单发送到 src/'包所在的位置'中的类文件。我遇到了问题，因为如果我在 WebContent 文件夹中包含的表单页面上，则 url 是......`http://localhost:8080/Final_Project/Band_roster.jsp`一旦我点击提交，它就会被发送到类文件并将其发送到这个 url。`http://localhost:8080/bandser`这个网址看起来不正确？因此，一旦将其发送到此处，我就会收到 404 错误。我正在使用 xml 文件进行传输。

XML 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <servlet>
  <servlet-name>BandListServ</servlet-name>
  <servlet-class>bandServ.BandListServ</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>BandListServ</servlet-name>
  <url-pattern>/bandser</url-pattern>
</servlet-mapping>

    <error-page>
        <error-code>404</error-code>
        <location>/error_404.jsp</location>
    </error-page>
    <error-page>
        <exception-type>java.lang.Throwable</exception-type>
        <location>/error_java.jsp</location>
    </error-page>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>BandForm.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

这是类文件 url，一旦我点击 properties ，它就会告诉我`\workspace\finalprojectfor_client\src\BandListServ.java`。因此，如果您需要更多信息，请告诉我，我非常感谢您的帮助！

编辑：

同样在 XML 文件中，我收到一条错误消息 -`Referenced file contains errors (http://java.sun.com/xml/ns/javaee/javaee_5.xsd). For more information, right click on the message in the Problems View and select "Show Details..."`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T10:22:06.217

我遇到了这个问题，我用 j2ee 替换了 javaee 并且它起作用了。

# iphone - iPhone info.plist 键在不同的语言环境中使用不同的语言

> ID：13885502
> 
> 赞同：1
> 
> 时间：2012-12-14T20:04:01.687
> 
> 标签：iphone, objective-c, locale, info.plist

我在使用 info.plist 执行检查时遇到了一些问题。

基本上，我使用 info.plist 中的可执行文件名称来查找可执行文件的位置。

plist中可执行文件的key是我需要的“可执行文件”（英文）。但是，我面临的问题是所有语言环境的密钥都不相同。有些地方不一样，有些地方不一样。

我的问题是：无论使用什么语言或语言环境，我如何才能找到可执行文件的位置？

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:36:50.720

你得到可执行文件的路径

```
 NSString *exePath = [[NSBundle mainBundle] executablePath]; 
```

* * *

另请注意，默认情况下，Xcode 为 Info.plist 中的键显示“用户友好”字符串，例如“可执行文件”或“捆绑标识符”：

![在此处输入图像描述](../Images/80cdeddfa28cfd057c87864bd71aa653.png)

但这不是 Info.plist 中的真正键。如果您在 Info.plist 窗口中按住 Ctrl 键并选择“显示原始键/值”，那么您会看到真正的键：

![在此处输入图像描述](../Images/97631b21e0d1d726c1aacb509763c0cc.png)

所以可执行文件的关键是“CFBundleExecutable”，不管你的语言是什么。

# jquery - jQuery新手：如何删除某些子元素

> ID：13885503
> 
> 赞同：-4
> 
> 时间：2012-12-14T20:04:04.540
> 
> 标签：jquery

我需要删除`<br>`父`<address>`元素中的第 2 个和第 3 个元素，以使`City`and`StateCode`位于同一行。这是确切的代码：

```
<address>
    <label>3651 Stardust Drive</label>
    <br>
    <label>Hannibal</label>
    <br>
    <label>MO</label>
    <br>
    <label>63401</label>
</address> 
```

我需要修改 HTML，使其内容如下：

```
3651 Stardust Drive
Hannibal, MO
63401 
```

我必须使用的 html 是因为我将 jQuery Mobile 与 MVC 一起使用。我知道还有其他方法可以做到这一点，但宁愿只编写一个 jQuery 函数来为我修复它。

我最初尝试删除所有换行符，但我需要保留第一个换行符并保留其他换行符......

```
$(document).ready(function() {
     //pretty-up the address & job descriptions
       $('<br>').remove();
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:32:34.047

```
$('<br>').remove(); 
```

这实际上并没有删除任何 br 元素，因为`$('<br>')`创建了一个新的 br 元素（不将其插入任何地方）并且 .remove() 尝试将其从文档中删除（什么都不做）。

要实际删除所有 br 元素，您需要

```
$('br').remove(); 
```

其中`$('br')`查找文档中现有的 br 元素并 .remove() 删除它们。

如果您只想从特定父元素或元素中删除 br 元素，您可以添加到`'br'`选择器（例如将其更改为`'address br'`），或者您可以使用 .find()：

```
var $elems = $('address');
$elems.find('br').remove(); 
```

要将文本从标签元素中提取出来，您可以执行以下操作

```
$elems.find('label').contents().unwrap(); 
```

[您可以在http://api.jquery.org/](http://api.jquery.org/)找到有关我使用的所有 jQuery 方法的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T20:46:14.757

> 编辑：
> 
> > > 我需要删除父“地址”元素中的第二个和第三个“br”元素
> 
> 您需要澄清这一点，因为您想要的示例将邮政编码放在单独的行上。我从字面上理解了你，所以我的回答解决了你提出的最初问题。

首先，`br`如果要直接选择元素，则需要正确选择元素：

`$('br')`

相反，您想从元素中删除`br`除第一个元素之外的所有元素`address`。

因此，从地址元素开始并删除所有`br`不等于第一个标签（列表中的元素 0）。

`$('address').find('br:not(:eq(0))').remove();`

见[jsfiddle](http://jsfiddle.net/ssLQx/)

如果您需要将逗号添加**到**城市标签，只需选择适当的标签然后附加它，[就像这样](http://jsfiddle.net/ssLQx/4/)简单。

如果您需要在城市标签**后**添加逗号，只需选择适当的标签，然后在后添加它，[就像这样](http://jsfiddle.net/ssLQx/5/)。你选择哪一个取决于你在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T20:33:14.997

```
$('<br>').remove(); 
```

（选择**br**的正确语法也是 is`$('br')`和 not `$('<br>')` ）

```
$('<br>') creates a New br element 
```

`$('br').remove()` 删除所有 br 标签..

试试这个

```
 $('address').find('br:eq(1)').remove(); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/3RuYx/)**

# iphone - iOS 上 TWTweetComposeViewController 的 Facebook 等价物？

> ID：13885504
> 
> 赞同：0
> 
> 时间：2012-12-14T20:04:09.890
> 
> 标签：iphone, ios, cocoa-touch

iOS 中的 Facebook 是否存在与 TWTweetComposeViewController 等效的功能？即用户只需实现一个简单的模态视图控制器就可以简单地将消息或图像发布到他们的时间线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:18:47.237

在 iOS6 上，您可以使用以下社交框架：

```
SLComposeViewController *viewController = [SLComposeViewController composeViewControllerForServiceType: SLServiceTypeFacebook];
[self presentViewController:viewController animated:YES completion:nil]; 
```

以下 WWDC2012 演示文稿很好地描述了社交框架的用法。

[WWDC 2012 Session Videos“与Facebook、Twitter和新浪微博的整合](https://developer.apple.com/videos/wwdc/2012/?id=306)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:08:55.073

在 iOS 上可以使用`FBNativeDialog`Facebook SDK3.1 中提供的。See [here](http://developers.facebook.com/ios/features/whats-new-ios-sdk-3.1/) `FBNativeDialog`的外观与`TWTweetComposeViewController`

请参阅Facebook 开发人员文档中的[本教程](http://developers.facebook.com/docs/howtos/share-native-dialogs-ios-sdk/)。

# c# - 从我的流程输出中解析字符串表

> ID：13885505
> 
> 赞同：-1
> 
> 时间：2012-12-14T20:04:24.263
> 
> 标签：c#

我从我的流程输出中接收到这张表`List<string>`：

![在此处输入图像描述](../Images/cbd1ceae40eff55c5282f03a9ff37845.png)

```
List<string> list = new List<string>();
StreamReader reader = tsharkProcess.StandardOutput;

            while (!reader.EndOfStream)
            {
                string read = reader.ReadLine();
                list.Add(read);
            } 
```

解析此表以仅显示 ip 地址、值和亲子关系的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:12:55.003

如果行是制表符分隔的，这将即时读取 ipAddress、值和百分比

```
using(StreamReader reader = tsharkProcess.StandardOutput)
{
   while (!reader.EndOfStream)
   {
       string[] values = reader.ReadLine().Split('\t');
       if (values.Length == 4)
       {
           string ipAddress = values[0];
           string value = values[1];
           string percentage = values[3];
           ...
       }
   }
} 
```

如果没有，那么可以使用 RegEx 来完成。

```
using(StreamReader reader = tsharkProcess.StandardOutput)
{
   while (!reader.EndOfStream)
   {
       string row = reader.ReadLine();
       string[] values = Regex.Split(row, @"\s+", RegexOptions.None);
       if (values.Length == 4)
       {
           string ipAddress = values[0];
           string value = values[1];
           string percentage = values[3];
           ...
       }
   }
} 
```

以及硬核 RegEx 解决方案。

```
public class MyClass
{
    // Lots of code....

    private static Regex regexRowExtract = new Regex(@"^\s*(?<ip>\d+\.\d+\.\d+\.\d+)\s*(?<value>\d+)\s+(?<rate>\d+\.?\d*)\s+(?<percentage>\d+\.?\d*)%\s*$", RegexOptions.Compiled);

    public void ReadSharkData()
    {
        using(StreamReader reader = tsharkProcess.StandardOutput)
        {
            while (!reader.EndOfStream)
            {
                string row = reader.ReadLine();
                Match match = regexRowExtract.Match(row);
                if (match.Success)
                {
                    string ipAddress = match.Groups["ip"].Value;
                    string value = match.Groups["value"].Value;
                    string percentage = match.Groups["percentage"].Value;

                    // Processing the extracted data ...
                }
            }
        }
    }
} 
```

对于 Regex 解决方案，您应该使用：

```
using System.Text.RegularExpressions; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:11:06.407

我会使用正则表达式，也许不是最好的，而是解决它的一种方法。

IP 正则表达式

```
\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b 
```

我没有搜索任何百分比的正则表达式，但我认为它不会那么难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:11:55.297

您可以创建一个正则表达式，它将匹配一行中的不同值，并逐行解析文件。它应该相对容易，因为您的所有值都由空格分隔。

# ios - 使用 Snow Leopard 在 iOS 6 上进行测试

> ID：13885510
> 
> 赞同：0
> 
> 时间：2012-12-14T20:04:35.450
> 
> 标签：ios, xcode

我想在我的 ipad iOS 6 设备上测试我的应用程序。我被告知将我的 Snow Leopard 10.6.8 升级到 Mountain Lion。这将允许我将 XCode 3.2 升级到 XCode 4。但由于几个问题，我无法升级到 Lion。这个问题有什么解决办法吗？

# asp.net - 在gridview中访问控件

> ID：13885511
> 
> 赞同：0
> 
> 时间：2012-12-14T20:04:42.377
> 
> 标签：asp.net

我试图在没有运气的情况下访问网格视图中的控件。我搜索了互联网，没有任何例子可以帮助我。目前，我收到的错误消息是：“对象引用未设置为对象的实例”，指的是这一行：lblErrors.Text = level.SelectedValue;

这是我背后的代码：

```
protected void setRecruitmentSchoolLevel(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        GridView recruitment = (GridView)sender;
        DropDownList level = (DropDownList)e.Row.FindControl("lstLevel");
        lblErrors.Text = level.SelectedValue;
    }
} 
```

这是我的网站代码：

```
 <asp:GridView ID="gridRecruitment" runat="server" DataSourceID="sourceRecruitment" Width="100%"
                        CellPadding="4" EnableModelValidation="True" ForeColor="#333333" OnRowDataBound="setRecruitmentSchoolLevel" 
                        GridLines="None" AutoGenerateColumns="False" AllowSorting="true" DataKeyNames="ID" EmptyDataText="No Recruitments">
                        <Columns>
                            <asp:HyperLinkField HeaderText="ID" DataTextField="ID" DataNavigateUrlFormatString="~/Admin/Recruit/recruit.aspx?ID={0}" DataNavigateURLFields="ID" Target="_blank" SortExpression="ID"/>
                            <asp:BoundField HeaderText="Class" DataField="GraduationYear" SortExpression="GraduationYear"/>
                            <asp:TemplateField HeaderText="Level" SortExpression="LevelName">
                                <ItemTemplate><%#Eval("LevelName") %></ItemTemplate>                                        
                                <EditItemTemplate>
                                    <asp:DropDownList ID="lstLevel" runat="server" DataSourceID="sourceLevels" DataTextField="Abbreviation" DataValueField="ID" SelectedValue='<%#Bind("Level") %>'/>
                                    <asp:SqlDataSource ID="sourceLevels" runat="server" ConnectionString="<%$ ConnectionStrings:DBCS %>" SelectCommand="SELECT Abbreviation, ID FROM Levels WHERE Recruiting = 'True' ORDER BY [Order] DESC"/>                                        
                                </EditItemTemplate>
                            </asp:TemplateField>
                            <asp:CommandField HeaderText="Commands" ShowEditButton="true" ShowDeleteButton="true" />
                        </Columns>
                    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:29:11.313

看看这个问题的答案：[how to access templatefield from code behind](https://stackoverflow.com/questions/4795903/how-to-access-templatefield-from-code-behind) . 回答者谈到使用 RowCreated 和 RowDataBound 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:52:15.413

我想你可以试试这样的

```
protected void gridRecruitment_RowEditing(object sender, GridViewEditEventArgs e)
{
  GridView recruitment = (GridView)sender;
  GridViewRow row= recruitment.Rows[e.NewEditIndex];

  DropDownList level = (DropDownList)row.FindControl("lstLevel");
  lblErrors.Text = level.SelectedValue;

} 
```

# jquery - JQuery UI 嵌套排序：所有嵌套列表/项目都算作根项目之外的一项

> ID：13885514
> 
> 赞同：0
> 
> 时间：2012-12-14T20:04:46.543
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, nested-sortable

我正在使用这个插件： http: [//mjsarfatti.com/sandbox/nestedSortable/](http://mjsarfatti.com/sandbox/nestedSortable/)

这似乎很棒，只是为默认的 jQueryUI 可排序添加了一些额外的选项（https://github.com/mjsarfatti/nestedSortable - 虽然不适用于 1.9+）。

然而，我似乎有一个问题，你可以从这个小提琴中看到：http: [//jsfiddle.net/kzswp/6/](http://jsfiddle.net/kzswp/6/)似乎导致所有嵌套列表项都算作最根项下的一个大项。

此外，如果您将其中一个根项拖动为另一个根项的子项，则排序字符不一致。即使我试图将一个项目设置为已经存在的嵌套列表中的子项目，它似乎也会创建一个新列表来放置该项目。

这是我的标记：

```
<ol type="I" id="top-level-list">
        <li>
            <h3>Category #1</h3>
            <div class="child-items">
                    <ol type="A">
                        <li>
                             <div class="form-row" >
                                <div class="form-item">Question #1</div>
                            </div>
                    <div class="child-items">
                        <ol type="1">
                            <li>
                                <div class="required-parent-response c7ad1cdb-e727-4fb7-b0eb-0f04382dcd86">
                                    <div class="form-row" >
                                        <div class="form-item">Some other question</div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="required-parent-response c7ad1cdb-e727-4fb7-b0eb-0f04382dcd86">
                                    <div class="form-row" >
                                        <div class="form-item">Branch Question - under Question #1</div>
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </div>
            </li>
                    </ol>

                    </div>
        </li>
        <li>
            <h3>Category #2</h3>
            <div class="child-items">
                <ol type="A">
                    <li>
                        <div class="form-row" >
                            <div class="form-item">Category #2 - question 1</div>
                        </div>

                    </li>
                </ol>
            </div>
        </li> 
```

​</p>

我认为问题出`<div class="child-items">`在嵌套列表周围（页面上的其他 JS 我需要这个），但即使在删除它之后：http: [//jsfiddle.net/xJzZU/1/](http://jsfiddle.net/xJzZU/1/)

这只修复了排序字符，但所有子列表及其项目仍然算作一个大项目。

任何人都知道如何在保持`child-items`div 围绕这些嵌套元素的同时解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:05:04.597

首先，您应该在选项中添加`items`和。`toleranceElement`像这样的东西：

```
 $("#top-level-list").nestedSortable({
                //handle: ".ui-icon",
                maxLevels: 3,
                placeholder: "placeholder",
                help: "clone",
                revert: 300,
                opacity: .6,
                forcePlaceholderSize: true,
                tabSize: 40,
                items: 'li',
                toleranceElement: '> *'
            }); 
```

其次，不幸的是，额外的东西`<div class="child-items">`不会真正与**nestedSortable一起**工作：/
那是因为插件期望`ol`'s和`li`'s处于直接的父子关系......如[文档](https://github.com/mjsarfatti/nestedSortable)中所述，每个列表项必须有**一个**或**两个**孩子，其中一个是容差元素，另一个是嵌套列表。

# ios - MKPolygonView 的框架是 [[0,0][0,0]] 或一个点，当向 MKMapView 添加 kml 覆盖时

> ID：13885517
> 
> 赞同：1
> 
> 时间：2012-12-14T20:05:00.790
> 
> 标签：ios, kml, mkoverlay

我正在为 iPhone 创建一个 iOS 应用程序，并尝试在我的地图视图上添加叠加层。我正在使用 Google 地球创建我想要使用的路径，并遵循苹果 KMLViewer 演示。kml 文件似乎根据苹果指令正确解析，并且我的代码没有崩溃，但是返回的帧 MKPolygonView 是 [[0,0],[0,0]] 并且显然没有在地图视图。

一直在尝试研究并找到解决方案，但没有运气。

如果有人可以提供帮助，请提前致谢。

# python - 在 Python 中运行多个查找和替换（在文件夹和子文件夹中的每个文件上）

> ID：13885520
> 
> 赞同：1
> 
> 时间：2012-12-14T20:05:12.937
> 
> 标签：python

我有一个文件夹（课程），其中包含子文件夹和随机数量的文件。我想对这些随机文件运行多个搜索和替换。是否可以进行通配符搜索`.html`并在每个 html 文件上运行替换？

搜索和替换：

*   1)`"</b>"`到`"</strong>"`*   2)`"</a>"`到`"</h>"`*   3)`"<p>"`到`"</p>"`*   此外，所有这些替换都必须在文件夹和子文件夹中的每个文件上运行。

    非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:03:18.003

试试这个，

```
import os
from os.path import walk

mydict = {"</b>":"</strong>", "</a>":"</h>", "<p>":"</p>"}

for (path, dirs, files) in os.walk('./'):
    for f in files:
        if f.endswith('.html'):
            filepath = os.path.join(path,f)
            s = open(filepath).read()
            for k, v in mydict.iteritems():
                s = s.replace(k, v)
            f = open(filepath, 'w')
            f.write(s)
            f.close() 
```

您可以更改`os.walk('./')`为`os.walk('/anyFolder/')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:07:04.803

使用`glob`模块获取`*.html`文件列表。

# android - Android Facebook SDK3.0，会话状态OPENING

> ID：13885521
> 
> 赞同：18
> 
> 时间：2012-12-14T20:05:15.403
> 
> 标签：android, facebook

我正在尝试使用 Facebook SDK 3.0 在我的 android 应用程序中按下按钮时检索访问令牌。我的 Activity 中有一个通用按钮，它执行以下操作：

```
Button facebook = (Button)findViewById(R.id.facebookLoginButton);
    facebook.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Session session = new Session(getApplicationContext());
            Session.setActiveSession(session);
            session.openForRead(new Session.OpenRequest(SignInActivity.this).setCallback(statusCallback));
        }
    }); 
```

然后回调：

```
private class FacebookSessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
            String s=session.getAccessToken();
    }
} 
```

单击该按钮会提示我允许按预期访问我的个人资料，但此回调仅在 SessionState 为“OPENING”时调用一次。在此之后状态不会改变。

我在这里想念什么？我的最终目标实际上只是获得一次访问令牌，我并不真正关心持久化会话或使用它来登录我的应用程序。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-15T02:08:55.153

您需要覆盖 onActivityResult，以便在针对 Facebook for Android（或内联登录）检查凭据后，处理结果并更新会话。添加以下代码：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession()
        .onActivityResult(this, requestCode, resultCode, data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T14:02:21.890

@Lucas Jota：尝试更改请求代码。这对我有用。session.openForRead(new Session.OpenRequest(LoginActivity.this).setCallback(statusCallback).setRequestCode(urRequestCode)); 此外，请确保您的活动没有“单一实例”作为属性。

# javascript - jQuery mousemove 淡入/淡出元素取消元素鼠标悬停的淡入淡出

> ID：13885522
> 
> 赞同：0
> 
> 时间：2012-12-14T20:05:16.123
> 
> 标签：javascript, jquery

我编写了这段代码，当鼠标处于休眠状态时，它会将导航菜单淡出到 50% 的不透明度：

```
var hidden, fadenav, dimNav = function () {
    hidden = true;
    $('#main-nav').animate({'opacity': 0.5}, 200);
};

$('document').ready(function () {
    dimNav();
    $('body').on('mousemove', function (e) {
        if (hidden) {
            $('#main-nav').animate({'opacity': 1}, 200);
            hidden = false;
        }
        if (fadenav !== null) {
            clearTimeout(fadenav);
        }
        fadenav = setTimeout(dimNav, 500);
    });
}); 
```

我想做的是让它在用户将鼠标悬停在`#main-nav`元素上时不会褪色。

我试过这个无济于事：

```
$('#main-nav').on('mouseover mouseout', function (e) {
    if (e.type === 'mouseover') {
        clearTimeout(fadenav);
    } else {
        fadenav = setTimeout(dimNav, 500);
    }
}); 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:02:39.203

好吧，这当然不是更少的代码，但它可能更直接一点：

```
​$('#main-nav').on('mousemove',function(e){
    if(hidden){
        $('#main-nav').animate({'opacity': 1}, 200);
        hidden = false;
    }  
    clearTimeout(fadenav);
    e.stopPropagation();
}); 
```

添加，而不是：

```
$('#main-nav').on('mouseover mouseout', function (e) {
    if (e.type === 'mouseover') {
        clearTimeout(fadenav);
    } else {
        fadenav = setTimeout(dimNav, 500);
    }
}); 
```

你根本不用上课。

这是我的工作示例：http: [//jsfiddle.net/TbwSA/1](http://jsfiddle.net/TbwSA/1)

编辑：我意识到你甚至不需要 mouseout 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:26:30.447

我自己发现了解决方案，并认为它可能值得其他人知道：

首先，您需要执行类似的操作：

```
$('#main-nav').on('mouseover', function (e) {
    if (!$('#main-nav').hasClass('hovered')) {
        $('#main-nav').addClass('hovered');
    }
}).on('mouseout', function () {
    if ($('#main-nav').hasClass('hovered')) {
        $('#main-nav').removeClass('hovered');
    }
}); 
```

然后将`dimNav()`函数更改为：

```
dimNav = function() {
    if (!$('#main-nav').hasClass('hovered')) {
        hidden = true;
        $('#main-nav').css('opacity', '0.5');
    }
}; 
```

如果有人能想到比这更好的方法，请贡献！

# objective-c - NSDateFormatter 没有解析日期字符串

> ID：13885523
> 
> 赞同：0
> 
> 时间：2012-12-14T20:05:19.113
> 
> 标签：objective-c, nsdate

这可能很明显，但我似乎无法将日期字符串转换为 NSDate 对象。尝试：

```
NSDateFormatter *df = [[NSDateFormatter alloc]init];
[df setDateFormat:@"HH:mm:ss"];
NSDate *server = [df dateFromString:result]; 
```

其中结果是 ac# datetime 对象转换为来自 web 服务的字符串。它看起来像“2012 年 12 月 14 日晚上 8:00:27”。“服务器”只是不断出现为零。

另外，在我把它送到 NSDate 之后，我需要找出“服务器”和当前时间之间的差异，以小时-分钟-秒为单位。我应该使用 NSDateComponents 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:07:51.523

```
[df setDateFormat:@"HH:mm:ss"]; 
```

之后

> [ `result`...] 看起来像`"12/14/2012 8:00:27 PM"`

它当然没有您设置的格式，所以您期望什么？您必须设置[正确的格式](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)才能使其正常工作。

# jvm - 虚拟机中的 ejb 调用

> ID：13885525
> 
> 赞同：0
> 
> 时间：2012-12-14T20:05:41.843
> 
> 标签：jvm, virtual-machine, ejb-3.1

我有一个场景，在一台物理机器上运行着两个虚拟机。它们的操作系统都是 GNU/Linux。在它上面运行 uname -a 会给我以下信息：

2.6.32-5-amd64 #1 SMP 2012 年 5 月 6 日星期日 04:00:17 UTC x86_64 GNU/Linux

在 VM A 和 B 上。

我在服务器 A 和 B 上都运行了 jboss app server 7.1.1。在服务器 B 上运行的服务使用 JNDI 调用服务器 A 上的 EJB。

然而，我经常看到这个错误：

> 13:48:27,250 错误 [com.nlg.websched.cron.ConcurrentJobRunner] (WebScheduler_Worker-59) 没有 EJB 接收器可用于处理调用上下文 org.jboss 的 [appName:"something",modulename:infrastructure,distinctname:] 组合。 ejb.client.EJBClientInvocationContext@357b544e: java.lang.IllegalStateException: 没有 EJB 接收器可用于处理调用上下文 org.jboss.ejb.client.EJBClientInvocationContext@357b544e 的 [appName:"something",modulename:infrastructure,distinctname:] 组合org.jboss.ejb.client.EJBClientContext.requireEJBReceiver(EJBClientContext.java:584) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final] 在 org.jboss.ejb.client.ReceiverInterceptor。 handleInvocation(ReceiverInterceptor.java:119) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final] 在 org.jboss.ejb.client。EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final] at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:136) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final] 在 org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:121) [jboss-ejb-client-1.0.5 .Final.jar:1.0.5.Final] 在 org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final ]java:121) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final] 在 org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104) [jboss-ejb-client -1.0.5.Final.jar:1.0.5.Final]java:121) [jboss-ejb-client-1.0.5.Final.jar:1.0.5.Final] 在 org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104) [jboss-ejb-client -1.0.5.Final.jar:1.0.5.Final]

谢谢！

# azure - 你知道一个带有 GUI 的工具来编辑 SQL Azure 联合中的数据吗？

> ID：13885526
> 
> 赞同：2
> 
> 时间：2012-12-14T20:05:41.297
> 
> 标签：azure, azure-sql-database, federation

我正在将应用程序迁移到 SQL Azure 联合，我希望在没有 SQL 的情况下查看和编辑表内容（它只是为了测试）。

使用标准 SQL 数据库（SQL Server 或 SQL Azure），我可以使用其中之一：

*   Management Studio (SSMS) 查看和编辑数据：右键单击表格 > 编辑前 xx 行。

*   Visual Studio：在服务器资源管理器中，我连接到我的数据库，右键单击一个表，然后单击“显示表数据”。

当然，这不适用于 SQL Azure 联合。你知道一个工具（甚至很简单），免费的（如果可能的话），在联盟成员中编辑我的数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T14:06:49.193

`Edit top xxx rows`顺便说一句，连接到 SQL Azure 数据库时，您不能从 SSMS 使用。此选项被禁用（它甚至没有在上下文菜单中列出）。

但是，它适用于 Visual Studio (Visual Studio 2012 SQL Server Explorer)。这很有趣。

它也适用于联邦。您的联邦成员实际上是一个单独的数据库，具有一些奇怪的生成名称。使用 VS SQL Server Explorer 连接到 SQL Azure Server。然后，当您列出树中的所有数据库时，您将在联邦根目录旁边看到其他数据库：

![SQL Azure 联合](../Images/79fcbbfa3058491c25b3840d1b775e3b.png)

现在唯一剩下的就是让您知道哪个`system-xxxxx`数据库对应于哪个联邦成员。您也许可以从[那篇文章](http://msdn.microsoft.com/en-us/library/windowsazure/hh778416.aspx)中找到这一点。以下查询可能会有所帮助：

```
-- Route connection to the federation root
USE FEDERATION ROOT WITH RESET
GO
-- View the federation root metadata
SELECT db_name() [db_name]
SELECT * FROM sys.federations
SELECT * FROM sys.federation_distributions
SELECT * FROM sys.federation_member_distributions ORDER BY federation_id, range_low;
GO 
```

当您只有一个联邦和一个联邦成员时，您的任务相当容易实现（因为您将只有一个`system-xxx-xxx-x`数据库）。但是，一旦您拆分，您将想要找出您需要与哪个确切的联邦成员数据库通信。

**更新**

有一种可靠的方法可以获取特定联合成员的准确数据库名称。您必须连接到要在其中编辑数据的联邦成员。例如，如果我们的联邦被命名`MyFirstFederation`并且联邦分发密钥名称为`FederationKey`，并且我们想要连接到数据`10000`为联邦密钥值的联邦成员，我们执行：

```
USE FEDERATION MyFirstFederation(FederationKey = 10000) WITH RESET
GO 
```

在相同的上下文中，我们执行：

```
SELECT * FROM sys.databases
GO 
```

这将列出`master`和`system-xxxx-yyy-zzz`。前者将是确切的数据库，其中包含 FederationKey 值为 10000 的成员（以及该特定联邦成员范围内的所有其他内容）。

现在我们知道了我们想要在 Visual Studio 2012 SQL Server Explorer 中选择的数据库的确切名称，并且能够直观地编辑内容。虽然它有点慢，但它是您要求的 GUI 工具。

# php - 将数组从 HTML 表单传递给 PHP

> ID：13885527
> 
> 赞同：1
> 
> 时间：2012-12-14T20:05:42.320
> 
> 标签：php, html

这是 HTML：

```
<input type="text" name="shortcut[]" value="a"/> do <input type="text" name="ses[]" value="1" disabled/><br>
<input type="text" name="shortcut[]" value="b"/> do <input type="text" name="ses[]" value="2" disabled/><br>
<input type="text" name="shortcut[]" value="c"/> do <input type="text" name="ses[]" value="3" disabled/><br> 
```

如何将值传递给 PHP 但连接两个数组的索引？

即
在something = a的地方放入数据库值1，
在something = b的地方放入数据库值2
等等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:12:16.320

索引是自动连接的，因为它们是数字数组。

```
$nvals = count($_REQUEST['shortcut']);
for ($i = 0; $i < $nvals; $i++) {
  // do something with $_REQUEST['shortcut'][$i] and $_REQUEST['ses'][$i]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:12:18.370

组合数组：`array_map(null,$_POST['shortcut'],$_POST['ses']);`

但是您当然可以`foreach`超过 2 个中的一个，并通过密钥获取另一个。

请注意，如果您有可能会或可能不会发送的元素（例如复选框），将组保持在一起的唯一方法是事先为它们分配一个编号（`name=sess[1]`,`name=sess[2]`等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:16:58.470

您可以将`shortcut`value 指定为 key，将`ses`value 指定为 value 属性：

```
<input type="text" name="input[a]" value="1" />
<input type="text" name="input[b]" value="2" />
<input type="text" name="input[c]" value="3" /> 
```

在服务器端，您可以使用`foreach`循环来遍历数组：

```
foreach ($_POST['input'] as $shortcut => $ses) {
    // process $shortcut and $ses
} 
```

# javascript - 它说 TypeError: document.getElementById(...) is null

> ID：13885533
> 
> 赞同：35
> 
> 时间：2012-12-14T20:06:09.823
> 
> 标签：javascript, dom, runtime-error, innerhtml, getelementbyid

虽然我向 getElementById 推送了一个参数，但我想知道这个“为空”错误来自哪里？

```
TypeError: document.getElementById(...) is null
[Break On This Error]   

document.getElementById(elmId).innerHTML = value;

Line 75 
```

除此之外，我想知道为什么除非我单击这些播放列表图片之一，否则标题和时间没有显示？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2014-08-01T20:31:23.333

确保脚本放置在您尝试操作的文档**的 BODY 元素的底部**，而不是放在 HEAD 元素中或放置在您想要“获取”的任何元素*之前。*

导入脚本还是内联脚本都没有关系，重要的是放置。您也不必将命令放在函数中；虽然这是一种很好的做法，但您可以直接调用它，但它工作得很好。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-14T20:16:23.610

所有这些结果`null`：

```
document.getElementById('volume');
document.getElementById('bytesLoaded');
document.getElementById('startBytes');
document.getElementById('bytesTotal'); 
```

您需要像这样在 updateHTML 中进行空检查：

```
function updateHTML(elmId, value) {
  var elem = document.getElementById(elmId);
  if(typeof elem !== 'undefined' && elem !== null) {
    elem.innerHTML = value;
  }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-14T20:11:15.577

这意味着`id`传递给的元素`getElementById()`不存在。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-01-12T19:43:10.203

您可以使用**JQuery**来确保文档的所有元素在开始客户端脚本之前都已准备就绪

```
$(document).ready(
    function()
    {
        document.getElementById(elmId).innerHTML = value;
    }
); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-12T06:55:33.567

我得到了同样的错误。就我而言，我在一个页面中有多个具有相同 id 的 div。我重命名了使用的 div 的另一个 id 并解决了这个问题。

所以确认元素是否：

*   以 id 存在
*   没有与 id 重复的
*   确认脚本是否被调用

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-14T20:17:11.520

在您的代码中，您可以找到此函数：

```
// Update a particular HTML element with a new value
function updateHTML(elmId, value) {
  document.getElementById(elmId).innerHTML = value;
} 
```

稍后，您使用几个参数调用此函数：

```
updateHTML("videoCurrentTime", secondsToHms(ytplayer.getCurrentTime())+' /');
updateHTML("videoDuration", secondsToHms(ytplayer.getDuration()));
updateHTML("bytesTotal", ytplayer.getVideoBytesTotal());
updateHTML("startBytes", ytplayer.getVideoStartBytes());
updateHTML("bytesLoaded", ytplayer.getVideoBytesLoaded());
updateHTML("volume", ytplayer.getVolume()); 
```

第一个参数用于“getElementById”，但 ID 为“bytesTotal”、“startBytes”、“bytesLoaded”和“volume”的元素不存在。您需要创建它们，因为它们将返回 null。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-09T04:11:08.720

我有同样的问题。它只是 javascript 的脚本加载得太快了——在 HTML 的元素加载之前。所以浏览器返回 null，因为浏览器找不到你想要操作的元素在哪里。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-02-04T14:35:37.017

在学生的工作中发现了类似的问题，脚本元素放在关闭 body 标记之后，所以很明显，JavaScript 找不到任何 HTML 元素。

但是，还有一个更严重的错误：引用了包含一些代码的外部 javascript 文件，该代码在插入新内容之前删除了某个 HTML 元素的所有内容。注释掉这个引用后，一切正常。

因此，有时错误可能是某些先前调用的 Javascript 更改了内容甚至 DOM，因此稍后调用例如 getElementById 没有意义，因为该元素已被删除。

# javascript - Twitter Intent 链接未在新窗口中打开

> ID：13885535
> 
> 赞同：1
> 
> 时间：2012-12-14T20:06:32.220
> 
> 标签：javascript, twitter, webintents

我创建了一个界面，允许人们从网页上向某些人发推文。为此，我正在利用 Twitter 的网络意图。起初，该页面有一个文本区域，其中包含一个占位符推文，当用户单击回复按钮时，该推文作为文本参数传递，但范围已更改，因此用户应该能够在文本区域中输入文本，单击按钮，并查看带有更新推文的推特弹出窗口，因为用户测试表明，如果人们无法编辑页面上的内容，他们就不太可能向他人发推文。

问题是，虽然这段代码确实更新了 Twitter 意图链接，但它似乎破坏了 Twitter 意图链接的某些功能。最值得注意的是，链接不会像通常那样在小弹出窗口中打开 - 相反，它们会替换当前页面。此外，“in_reply_to”功能是间歇性的 - 某些应该包含要回复的推文的链接不包含，而其他链接则包含。

有人试图做这样的事情吗？如果是这样，有什么建议吗？我在这一点上不知所措。

HTML（我们使用的是 Django，因此是模板逻辑）：

```
<div class="response">
  {%if quote.tweet_id%} 
  <textarea id="twitter_response_text" class="has_tweet_id" maxlength="140">{{quote.twitter_handle}} {{quote.twitter_text_default}}</textarea>          
  <label for="twitter_response_text"><span></span></label>                     
  <a class="hasReply" data-tweet-id="{{quote.tweet_id}}" href="https://twitter.com/intent/tweet?in_reply_to="><button value="respond" data-quote-id="{{quote.id}}"/><img src="{{STATIC_URL}}img/reply_arrow.png"> Reply</button></a>
  {%else%}
  <textarea id="twitter_response_text" maxlength="140">{{quote.twitter_text_default}}</textarea>
  <label for="twitter_response_text"><span></span></label>
  <a href="https://twitter.com/intent/tweet?text="><button value="reply" data-quote-id="{{quote.id}}" /><img src="{{STATIC_URL}}img/reply_arrow.png"> Reply</button></a>
  {%endif%}
</div> 
```

Javascript：

```
$(".response a, .twitteraction a").on("click", function() {

//get text from the textarea of the current slide

var textarea = $(this).parents(".slide").find("#twitter_response_text")
if (textarea.val() !== "") {
  text = textarea.val();
} else {
  text = textarea.text();
}

//maybe we need the handle?
// var handle = $(this).parents(".slide").find("#twitterhandle").text();

//get the link
var link = $(this).attr("href");

//check to see if it needs reply link or regular
if ($(this).hasClass("hasReply")) {

//get the tweet id, stored as data attribute in the anchor
var tweetId = $(this).data("tweet-id");

//construct the query with a twitter id but no handle
var query = encodeURIComponent(tweetId) + "&text=" + encodeURIComponent(text) + "&related=ForecastFacts&original_referer=http://climatecliff.org/";

//add link to anchor
$(this).attr("href", (link + query));

} else {  

//construct the query with text and related
var query = encodeURIComponent(text) + "&related=ForecastFacts&original_referer=http://climatecliff.org/";

//add query to anchor

$(this).attr("href", (link + query));

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:42:17.383

事实证明，有一种方法可以通过自己添加来消除对 platform.twitter.com 的 Javascript 的依赖 - [https://dev.twitter.com/docs/intents](https://dev.twitter.com/docs/intents)

关于间歇性 in_reply_to 链接，出于某种原因，我拥有的数据属性将 1 添加到在 Django 上下文中传递的 tweet_id 中。我不知道为什么，但我继续重构我的代码，只动态添加文本，而不是推文 ID，因为这不会改变。

现在一切正常。

# javascript - 如何编写 angularjs 指令来动态分配范围绑定

> ID：13885538
> 
> 赞同：0
> 
> 时间：2012-12-14T20:06:38.977
> 
> 标签：javascript, angularjs

有没有办法通过指令指定特定元素的范围绑定？

例如：

```
<div g:bind="{width: '=', height: '@'}" width="myWidth" height={{myHeight}}></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:21:25.923

我不这么认为。我相信当你定义对象哈希（即里面的东西`scope: { ... }`）时，你必须使用字符串作为键——你不能在别处“查找”它们。

```
scope: { stringKey1: ..., stringKey2: ... } 
```

AFAIK，只有 compile() 和 link() 函数获得一个[Attributes](http://docs.angularjs.org/api/ng.%24compile.directive.Attributes)对象。您需要该对象来执行您想要的操作，但是在解析“指令定义对象”时您没有它。

# c++ - 如何将 LPARAM lParam 转换为 CString

> ID：13885543
> 
> 赞同：0
> 
> 时间：2012-12-14T20:07:25.360
> 
> 标签：c++, visual-studio, worker-thread

在我的工作线程中，我创建了一条发送到主对话框的消息。一旦主对话框收到消息并进入我的 OnStatusUpdate() 函数，我想从 LPARAM lParam 中提取消息并将其显示在对话框编辑框中。我得到的不是我的信息，而是垃圾。

```
UINT CGDC74xDlg::LeakTstThread( LPVOID pParam )
{
    HWND *phObjectHandle = static_cast<HWND *>(pParam);
    CString strTmp = "It works!";
    CString * message = new CString(strTmp);
    ::PostMessage(*phObjectHandle, WM_LEAK_TEST_THREAD, 0, (LPARAM)message);
    ::Sleep(5000);
    delete phObjectHandle;
    return( 0 );
}

LRESULT CGDC74xDlg::OnStatusUpdate(WPARAM wParam, LPARAM lParam)
{
    LPTSTR lpMessage = (LPTSTR)lParam;
    CString s = lpMessage;
    delete lpMessage;
    GetDlgItem(IDC_EDIT_LEAK_TEST_RESULTS)->SetWindowText(s);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:12:40.537

在您的情况下，`LPARAM`不包含`CString`. 它包含一个指向 a 的指针`CString`。

所以你会像这样获得它：

```
CString *message = (CString*)lParam; 
```

# google-translate - 为什么谷歌翻译搞砸了我的 html 格式？

> ID：13885545
> 
> 赞同：2
> 
> 时间：2012-12-14T20:07:42.937
> 
> 标签：google-translate

我已经实现了谷歌翻译，下拉菜单在左侧菜单栏上。但是，当我翻译成另一种语言时，Google 不会尊重这些
标签。例如，转到此 URL：

[http://test.oil-testimonials.com/essential-oils/8031/headaches-and-nausea-for-various-reasons](http://test.oil-testimonials.com/essential-oils/8031/headaches-and-nausea-for-various-reasons)

然后翻译成德语。你会看到Author、Views等不再单独一行。下面的实际推荐现在也是一大段。任何想法我做错了什么？

谢谢！

# javascript - 只需要允许输入或删除某些字符

> ID：13885554
> 
> 赞同：2
> 
> 时间：2012-12-14T20:08:32.880
> 
> 标签：javascript, jquery

我有一个文本框。我希望用户能够输入的唯一内容是括号。他们也应该只能删除括号。不过，我在这样做时遇到了很多麻烦。

现在我有这样的功能：

```
 '#myTextArea input': function (el, ev) {

        } 
```

我使用了输入，所以它可以处理人们粘贴。

不过，我不确定如何找到从中键入的字符。我尤其不知道如何确保只删除了一个括号。有人知道这样做的好方法吗？

**编辑** 为了澄清，文本框已经填充了文本。用户应该能够在已经存在的文本中添加和删除括号。

**编辑2**

我让它工作了，所以用户只能输入括号。这不考虑粘贴，也不处理删除。仍然不知道如何做到这一点......

```
 '#myTextArea keydown': function (el, ev) {
            if ((ev.keyCode != 48 && ev.keyCode != 57) || ev.shiftKey == false){
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:36:23.837

一种可能的解决方案是在 keyup 事件中以编程方式进行。我只显示插入时的情况（通过按键或粘贴）。

无论是按下字符键还是 Ctrl-V，通常都会有一个子字符串被插入到字符串中。插入符号位置将位于该子字符串的末尾。

我的算法发现该子字符串是两个位置之间的字符串：

*   最长公共前缀的结尾（不同的第一个字符是插入的子字符串的开头）
*   插入符号位置

然后它使用函数 filterString 过滤字符串，该函数将用“”替换所有非括号符号

最后将输入值更新为最长公共前缀 + 过滤字符串 + 插入符号后的文本

你需要这个 jquery 插件来操作插入符号：http: [//jcaret.googlecode.com/](http://jcaret.googlecode.com/)

```
<input id="myTextArea" value="a*(b*(c+d))">
</input>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://jcaret.googlecode.com/files/jquery.caret.1.02.min.js"></script>

<script type="text/javascript">
var old_value = $('#myTextArea').val();

function filterString(a) {
    return a.replace(/[^\(\)]/g,"");
}

$('#myTextArea').keyup(function(){
    var end_of_insertion = $(this).caret().start;
    var new_value = $(this).val();

    var i=0;

    while(i<old_value.length && i<new_value.length && old_value[i]==new_value[i]) {
        i++;
    }
    if(i>=end_of_insertion)return;

    // i now points to first different character in strings old_value and new_value

    new_value = new_value.substr(0,i)
        + filterString(new_value.substr(i,end_of_insertion-i))
        + new_value.substr(end_of_insertion);

    $('#myTextArea').val(new_value).caret({start: end_of_insertion, end: end_of_insertion});
    old_value = new_value;
});
</script> 
```

# java - 在 java 中使用 jMagick 时无法处理大型 pdf 文件（100M 以上）

> ID：13885555
> 
> 赞同：3
> 
> 时间：2012-12-14T20:08:43.003
> 
> 标签：java, performance, image-processing, imagemagick, jmagick

我正在使用 jMagick for java 来处理上传的文件（图像和 pdf 文件）。大多数图像都可以正常工作，但是当我尝试将大型多页 pdf 文件转换为不同大小的图像时，它会消耗大量系统内存（200M pdf 文件大约需要 20G 物理内存），最终失败。我将密度设置为 200，否则图像质量非常差，我什至无法阅读输出图像中的文字。下面是我的代码：

```
 ImageInfo info = new ImageInfo(inputFilePath);
  info.setDensity(200);
  MagickImage image = new MagickImage(info);
  MagickImage[] imageFrames = image.breakFrames();
  for (MagickImage frame : imageFrames) {
    ImageInfo frameInfo = new ImageInfo();
    MagickImage frameDisplay = frame;
    frameDisplay.setFileName(outputFile);
    frameDisplay.writeImage(frameInfo);
  } 
```

我的 java 日志中没有错误或异常，我只是看到进程死了。我尝试在 /usr/share/ImageMagick-6.5.4/config/ 中使用 policy.xml 来限制内存使用量，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE policymap [
<!ELEMENT policymap (policy)+>
<!ELEMENT policy (#PCDATA)>
<!ATTLIST policy domain (delegate|coder|filter|path|resource) #IMPLIED>
<!ATTLIST policy name CDATA #IMPLIED>
<!ATTLIST policy rights CDATA #IMPLIED>
<!ATTLIST policy pattern CDATA #IMPLIED>
<!ATTLIST policy value CDATA #IMPLIED>
]>

<policymap>
    <policy domain="resource" name="memory" value="256MB"/>
</policymap> 
```

但不知何故，它似​​乎不起作用。我正在使用 ImageMagick-6.5.4。非常感谢任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:36:23.000

```
<policymap>
    <policy domain="resource" name="memory" value="256MB"/>
</policymap> 
```

尝试将此部分更新为：

```
<policymap>
    <policy domain="resource" name="memory" value="1000MB"/>
</policymap> 
```

然后再试一次。我假设当您说“JVM 重新启动”时，您的意思是它崩溃了。大概是个`OutOfMemory`例外。根据您提供的信息，没有人可以肯定地说。

# c# - 编译器找不到方法名称

> ID：13885564
> 
> 赞同：2
> 
> 时间：2012-12-14T20:10:19.540
> 
> 标签：c#, xaml, windows-8, assembly-references

'正在用 C# 和 XAML 为 Windows 8 制作应用程序。

我在名为 AppNamespace 的命名空间中定义了两个类，其中一个类在其构造函数中采用一个 3 维布尔数组：

```
 public class Solver
    {
        // Board is a class also in this namespace but I don't think the issue is 
        //there, so I've omitted it's definition
        private Board current;

        // You can see that the class clearly DOES take a parameter of the same type
        // as the array "content" (which is defined later)
        public Solver (bool[, ,] initial)
        {
            // The parameter is then used to construct a "Board" class within the
            // "Solver" class.
            current = new Board(initial);
        }

        // Several methods within the class
     } 
```

所以定义见上。

然后，我在名为“NewPage.xaml”的 gridapp 上创建了一个新页面，在该页面中有一些文本框可以操作数组中的值。（这里似乎没有问题）

然后在'NewPage.xaml.cs'按钮被点击的时候，应该在类上创建一个实例，然后在类内运行一个方法，在顶部的“NewPage.xaml.cs”我定义了一个三维数组如下所示，

```
 // Declare the namespace where the class "Solver" is situated
    using App.Classes;

    namespace App
    {
        // So below is the C# part of the page "PuzzleSolver"
        public sealed partial class PuzzleSolver : App.Common.LayoutAwarePage
        { 
            // Create an array called content
            bool[, ,] content = new bool[9, 9, 9];

            public PuzzleSolver()
            {
                this.InitializeComponent();

                //Set every cell of the created content array to true
                for (int i = 0; i <= 8; i++)
                {
                    for (int j = 0; j <= 8; j++)
                    {
                        for (int k = 0; k <= 8; k++)
                        {
                            content[i, j, k] = true;
                        }
                    }
                }
            }

      /* There are some methods which change information in the array "Content" based on the
         stuff input into the XAML textboxes on the page. */

      // The below method is invoked when a XAML Button is clicked on the page
      // and I intend it to create a "Solver" object, using the "content" array
      // from this page as a parameter
      private void Button_Click_1(object sender, RoutedEventArgs e)
      {
        // So now I create the and pass in the "content" array
        Solver newSolve = new Solver(content);

        newSolve.Solve();
      }
} 
```

问题是，编译器承认“className”是一个类，但说它没有一个带 1 个参数的构造函数，它还说：

> “ProjectName.className 不包含“方法”的定义，并且没有扩展方法“方法”接受 ProjectName.className 类型的第一个参数（您是否缺少 using 指令或程序集引用）

谁能从这些信息中确定我的问题出在哪里？

我对此进行了编辑以显示其他命名空间声明，首先是“Solver.xaml.cs”上的声明：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;
using App.Classes; 
```

现在关于“Solver.xaml”的声明：

```
<common:LayoutAwarePage
    x:Name="pageRoot"
    x:Class="App.Solver"
    DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App"
    xmlns:common="using:App.Common"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <x:String x:Key="PageName">Solver</x:String>
    </Page.Resources> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:12:37.307

`object`是保留关键字，您不能使用它来命名变量。尝试更改名称：

```
className somethingDifferent = new className(content);
somethingDifferent.method(); 
```

此外，您应该使用 Pascal 大小写作为类名，并且 FTLOG 将您的类命名为“className”以外的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T20:16:57.127

当你声明你的实例时，你使用`object`的是变量名。

```
className object = new className(content);
object.method(); 
```

这会导致编译器感到困惑，因为`object`它是一个保留关键字（它总是指代`System.Object`）。

您应该使用更好的名称。但是，`@`如果您愿意，可以使用保留字：

```
className anyNonReservedWord = new className(content);
anyNonReservedWord.method();

// Alternatively
className @object = new className(content);
@object.method(); 
```

您没有`method`在代码中显示声明，因此很难破译，尽管可能是由于相同的问题。

* * *

编辑后编辑：

> 我在名为 AppNamespace 的命名空间中定义了两个类

你的`PuzzleSolver`类在命名空间中`App`，而不是`AppNamespace`。虽然您没有显示您的实际命名空间`Solver`，但我怀疑这是命名空间不匹配。

# python - Python：将符号移动到字符串的开头？

> ID：13885568
> 
> 赞同：3
> 
> 时间：2012-12-14T20:10:34.783
> 
> 标签：python, string, plugins, sublimetext2, reverse

我正在尝试创建一个 Sublime Text 插件（使用 python）来反转所选字符串中单词的顺序。我的主要功能正常工作，但现在我的问题是单词末尾的每个符号（句点、逗号、问号等）都保持原位，我的目标是让所有内容正确反转，以便符号移动到单词的开头。

```
def run(self, edit):
    selections = self.view.sel()

    # Loop through multiple text selections
    for location in selections:

        # Grab selection
        sentence = self.view.substr(location)

        # Break the string into an array of words
        words = sentence.split()

        # The greasy fix
        for individual in words:
            if individual.endswith('.'):
                words[words.index(individual)] = "."+individual[:-1]

        # Join the array items together in reverse order
        sentence_rev = " ".join(reversed(words))

        # Replace the current string with the new reversed string
        self.view.replace(edit, location, sentence_rev) 

    # The quick brown fox, jumped over the lazy dog.
    # .dog lazy the over jumped ,fox brown quick The 
```

我已经能够遍历每个单词并使用 endswith() 方法进行快速修复，但这不会找到多个符号（没有长长的 if 语句列表）或考虑多个符号并将它们全部移动。

我一直在玩正则表达式，但仍然没有一个可行的解决方案，我一直在寻找一种方法来更改符号的索引，但仍然没有......

如果我可以提供更多详细信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:33:57.690

如果您`import re`可以将`split()`行更改为在分词上拆分`\b`：

```
words = re.sub(r'\b', '\f', sentence).split('\f') 
```

[看看这个](https://stackoverflow.com/questions/2713060/why-doesnt-pythons-re-split-split-on-zero-length-matches)为什么你不能只是`split(r'\b')`。以上将为您提供：

```
['', 'The', ' ', 'quick', ' ', 'brown', ' ', 'fox', ', ', 'jumps', ' ', 'over', ' ', 'the', ' ', 'lazy', ' ', 'dog', '.'] 
```

然后您可以轻松地将其反转并将您的符号放在正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:06:44.373

我希望正则表达式是一种更好的方法，但如果它有帮助......

你可以有一个你调用的函数来代替使用 endswith ...

```
def ends_with_punctuation(in_string):
    punctuation = ['.', ',', ':', ';', '!', '?']
    for p in punctuation:
        if in_string.endswith(p):
            return True
    return False 
```

# iphone - 优化 UIColor 动画

> ID：13885577
> 
> 赞同：0
> 
> 时间：2012-12-14T20:11:53.873
> 
> 标签：iphone, xcode, uicolor

我正在努力制作这个我必须在我正在构建的 iPhone 应用程序上显示的 GIF。我现在正在分析应用程序，我意识到我一直被分配到 a`UIColor`并且它几乎使用了手机的所有 CPU。

我整个早上都在努力优化这个用于创建和运行动画的功能。如果有人有一些见解，我将不胜感激。

我只是想把 UIColor 从 for 语句中拉出来，但也许有人会看到我可以用更好的方式做到这一点。

```
- (void)doBackgroundColorAnimation
{
     static NSInteger i = 0;
     int count = 34;
     NSMutableArray *colors = [[NSMutableArray alloc] initWithCapacity:count];
     for (int i=1; i<=34; i++) {
     NSString *strImgName = [NSString stringWithFormat: @"layer%d.png", i];
     UIColor *image = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:strImgName]];
     if (image) {
     [colors addObject:image];
     }
     }

     if (i >= [colors count]) {
     i = 1;
     }
     [UIView animateWithDuration:0.05f
     animations:^{
     self.animationView.backgroundColor = [colors objectAtIndex:i];
     } completion:^(BOOL finished) {
     ++i;
     [self doBackgroundColorAnimation];
     }];
} 
```

**编辑：请求发布代码**

```
NSMutableArray *colors = [[NSMutableArray alloc] initWithCapacity:count];
static NSString *strImgName;
UIColor *image = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:strImgName]];
for (int i=1; i<=34; i++) {
strImgName = [NSString stringWithFormat: @"layer%d.png", i];
if (image) {
[colors addObject:image];
}
} 
```

返回 -[__NSArrayM objectAtIndex:]: index 1 beyond bounds for empty array

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:31:44.107

这是对 H2CO3 评论的更明确的解释：

定义一些类属性：

```
@property (nonatomic, retain) NSMutableArray* colors;
@property (nonatomic, assign) currentColorIndex; 
```

然后有一个单一的颜色初始化例程：

```
- (void)calledDuringInit
{
    self.colors = [NSMutableArray array];

    for (int i=1; i<=34; i++) 
    {
        NSString *strImgName = [NSString stringWithFormat: @"layer%d.png", i];
        UIColor *image = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:strImgName]];
        if (image)
        {
             [self.colors addObject:image];
        }
    }
} 
```

此时 doBackgroundColorAnimation 不需要继续创建颜色数组：

```
- (void)doBackgroundColorAnimation
{
     if (self.currentColorCount >= [self.colors count]) 
     {
         self.currentColorCount = 1;
     }

     [UIView animateWithDuration:0.05f
     animations:^{
         self.animationView.backgroundColor = [self.colors objectAtIndex:self.currentColorCount];
     } completion:^(BOOL finished) {
         ++self.currentColorCount;
         [self doBackgroundColorAnimation];
     }];
} 
```

# mysql - MySQL - 在过去一个月中获得最多“喜欢”的用户

> ID：13885579
> 
> 赞同：0
> 
> 时间：2012-12-14T20:11:54.707
> 
> 标签：mysql, database, unix, social-media-like

我在社区论坛上有一个“喜欢”系统。所有内部喜欢都存储在名为 log_like 的数据库中。

```
CREATE TABLE `log_like` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_member` mediumint(8) NOT NULL,
  `id_message` int(10) NOT NULL,
  `id_poster` mediumint(8) NOT NULL DEFAULT '0',
  `time` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `id_member` (`id_member`),
  KEY `id_message` (`id_message`)
) ENGINE=MyISAM; 
```

我需要获取上个月最喜欢的成员 ID（上面 DDL 中的 id_poster 字段）。所以我可能需要 GROUP 和 COUNT 多少次相同的“id_poster”出现在**过去一个月**的记录中。我想把它限制在最喜欢的 10 个。字段“时间”存储 unix 时间以供参考。

不幸的是，我不知道如何实现这一目标。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:16:37.073

```
select id_poster, count(*) like_count
from log_like
where time > unix_timestamp(date_sub(now(), interval 1 month))
group by id_poster
order by like_count desc
limit 10 
```

如果你有一个索引，那将是最好的`id_poster`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:37:52.440

所以，这就是我最终的结果：

```
SELECT 
  id_poster, 
  COUNT(1) AS like_count
FROM 
  log_like
WHERE 
  time BETWEEN UNIX_TIMESTAMP('2012-11-01') AND UNIX_TIMESTAMP('2012-12-01')
GROUP BY 
  id_poster
ORDER BY 
  like_count 
DESC
LIMIT 10 
```

这样我得到了过去一个月（2012 年 11 月）的最高结果，而不是之前建议的从现在起过去 30 天的结果。（非常感谢 Barmar 所做的所有工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:43:33.370

```
SELECT DISTINCT id, count(*) as '#oflikes' from log_like
WHERE 
  time BETWEEN UNIX_TIMESTAMP('2012-11-01') AND UNIX_TIMESTAMP('2012-12-01')
LIMIT 10; 
```

# python - Python服务器中的多个线程

> ID：13885582
> 
> 赞同：1
> 
> 时间：2012-12-14T20:12:03.860
> 
> 标签：python, multithreading

我正在为学校构建一个小的 Python 服务器脚本，它必须读取文件并将其发送到客户端。

现在，我需要服务器同时响应来自客户端的多个请求。目前它只接受 1 个客户......并且在客户被回答后，它会移动到下一个。

我的老师告诉我使用多个进程/线程来实现这一点。我是 Python 新手，所以我不知道如何管理它。

我怎样才能做到这一点？

这是我的代码：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
s.bind((host,port)) 
s.listen(backlog) 
while 1:
    print "server ready, waiting..."
    client, address = s.accept() 
    print "recvd client", address 
    data = client.recv(size) 
    if data:

        parametro_data = data.split(' ')
        if(parametro_data[0] == '/GET'):

            theFile = parametro_data[1].replace('\r\n','')

            if os.path.isfile(theFile):
                f = open(theFile, 'r')
                for line in f:
                    client.send(line)
                f.close()
            else:
                client.send("File not exists")

    client.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:24:43.973

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:20:48.710

要在您描述的模型中处理此问题，您将取出执行实际文件发送的代码并将其封装在线程中。

```
class HandleClient( threading.Thread ):
 def __init__( self, clientSocket, file_to_read ):
  ...setting up the thread object...
 def run( self ):
  ...sending code... 
```

这将发送文件，以便您的主接受线程能够处理其他客户端。

因此，您的客户流程如下：

新客户端连接 -> 接受连接 -> 创建新的线程对象并调用`start()`方法 -> 线程将文件发送到该客户端，然后关闭连接。

[线程文档](http://docs.python.org/2/library/threading.html)

[threading.Thread 文档](http://docs.python.org/2/library/threading.html#thread-objects)

我还将研究一个线程池，因为您一次只能拥有这么多线程，否则它不会给您带来任何好处，或者如果可能的话，是一个提供服务器功能的框架，您只需要编写业务逻辑，在您的情况下文件的发送。

# c# - 我可以在运行时更改 ReceivedBytesThreshold 吗？

> ID：13885583
> 
> 赞同：1
> 
> 时间：2012-12-14T20:12:08.730
> 
> 标签：c#, serial-port, threshold

我有一个连接到串行端口的外部盒子（实际上是蓝牙，如果这很重要）。

我与盒子的一些通信很短；我认为 11 个字节长，而其他的则很长；像 4096 字节。

我可以将串行端口的 ReceivedBytesThreshold 属性从 11 更改为 4096 并返回等等吗？

如果是这样，有人可以指点我一些可以做到这一点的示例代码吗？

我的基本问题是如何、何时、何地？

# javascript - 使用 Knockout 和 Knockout Validation 验证单选按钮未应用预期的 CSS 类

> ID：13885584
> 
> 赞同：3
> 
> 时间：2012-12-14T20:12:12.707
> 
> 标签：javascript, knockout.js, knockout-validation

我有一个表单，其中有两组单选按钮。在每一组中，用户必须选择一个（我们默认不选择一个，以便用户必须“考虑”选择一个或另一个）。

我正在使用淘汰赛 2.2.0 和最新版本的[淘汰赛验证](https://github.com/ericmbarnard/Knockout-Validation)。我遇到了单选按钮的问题，因为验证将正确确定未选择单选按钮，但是，它没有为单选按钮提供 css 类。如何获得验证以将 css 应用于单选按钮输入？

理想情况下，在确定未选择单选输入后，我想将“invalidElement”的 css 类应用于组中的两个单选按钮。

*注意：它将“invalidElement”的 css 类应用于所有其他输入，单选按钮输入除外。此外，我还考虑编写一些自定义内容以突出显示未选中的单选按钮输入，但我对 Knockout 不太熟悉，无法执行此操作。

```
(function ($) {
    var viewModelSlide1;

    $(function () { // Document ready
        ko.validation.configure({
            decorateElement: true, // Indicates whether to assign an error class to the <input> tag when your property is invalid
            errorElementClass: 'invalidElement',  // The CSS class assigned to validation error messages
            registerExtenders: true,
            messagesOnModified: true, // Indicates whether validation messages are triggered only when properties are modified or at all times
            insertMessages: false, // Indicates whether <span> tags with the validation message will be inserted to the right of your <input> element
            parseInputAttributes: true // Indicates whether to assign validation rules to your ViewModel using HTML5 validation attributes
        });

        function viewModelSlide1Definition() {
            var self = this;

            self.loanPurpose = ko.observable("").extend({ required: true });          
            self.hasAccount = ko.observable("").extend({ required: true });

            //Validation observable(s)
            self.errors = ko.validation.group(self);

            submit: function () {
              if (viewModelSlide1.errors().length == 0) {
                alert('Thank you.');
              } else {
                alert('Please check your submission.');
                viewModel.errors.showAllMessages(); // This will apply the css styles to all invalid inputs except radio buttons
              }
           }

        };

        // Activate knockout.js
        viewModelSlide1 = new viewModelSlide1Definition();

        ko.applyBindings(viewModelSlide1, $("#step-step-0")[0]);

    }); // End document ready
})(jQuery); 
```

带有绑定的 HTML...

```
 <div id="step">
    <fieldset id="custom-step-1" class="step" title="Getting Started">
      <label>Purchase</label><input class="required" type="radio" name="radioLoanPurpose" value="purchase" data-bind="checked: loanPurpose" />
      <label>Refinance</label><input class="required" type="radio" name="radioLoanPurpose" value="refinance" data-bind="checked: loanPurpose" />
      <br />      
      <label>Do you have an account</label>
      <span>Yes</span><input type="radio" name="radioHaveAccount" value="true" data-bind="checked: hasAccount" />
      <span>No</span><input type="radio" name="radioHaveAccount" value="false" data-bind="checked: hasAccount" />
    </fieldset>
  <input type="submit" class="finish" data-bind="click:submit"/>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:58:08.233

我不确定这是否是 KO 或 KO 验证的问题，但使用检查而不是值的绑定无法显示验证器，如[http://jsfiddle.net/uXzEg/1/中所示](http://jsfiddle.net/uXzEg/1/)

这是工作的javascript：

```
$(function () { // Document ready

  var viewModelSlide1Definition = ko.validatedObservable({
      loanPurpose : ko.observable().extend({
      required: true
    }),
    hasAccount: ko.observable().extend({
        required: true
    }),

    submit: function () {
      if (this.isValid()) {
        alert('Thank you.');
      } else {
          console.log(this.hasAccount());
        alert('Please check your submission.');
        this.errors.showAllMessages();
      }
    }

  });

  // Activate knockout.js

  ko.applyBindings(viewModelSlide1Definition);

  }); // End document ready 
```

和html

```
<div id="step">
  <fieldset id="custom-step-1" class="step" title="Getting Started">
    <label>Purchase</label>
    <input type="radio" name="radioLoanPurpose"
    value="purchase" data-bind="value: loanPurpose" />
    <label>Refinance</label>
    <input type="radio" name="radioLoanPurpose"
    value="refinance" data-bind="value: loanPurpose" />
    <br />
    <label>Do you have an account</label> <span>Yes</span>

    <input type="radio" name="radioHaveAccount"
    value="true" data-bind="value: hasAccount" /> <span>No</span>

    <input type="radio" name="radioHaveAccount" value="false"
    data-bind="value: hasAccount" />
  </fieldset>
  <input type="submit" class="finish" data-bind="click:submit" />
</div> 
```

以及导致我的问题

[https://github.com/ericmbarnard/Knockout-Validation/issues/193](https://github.com/ericmbarnard/Knockout-Validation/issues/193)

# ios - 对于更便宜的大片颜色：UIView 或 UIImage

> ID：13885588
> 
> 赞同：2
> 
> 时间：2012-12-14T20:12:18.600
> 
> 标签：ios, user-interface, uiview, uiimageview

假设在你的 UI 设计中，你需要一个纯色的矩形。当然，您可以使用 UIImageView 对象并将其连接到图像，但在某些情况下，只需放入 UIView 并设置背景颜色可能会更快更容易。

我的问题是关于内存和性能方面哪个更便宜。我的直觉是空的 UIView 比图像更容易渲染，图像必须加载文件并将位存储在内存中。

任何人都可以谈论这个吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:13:40.090

设置`backgroundColor`a`UIView`比使用 a 更快/更便宜`UIImageView`，原因很明显：您不必创建或加载图像，窗口服务器不必保留图像的副本，以及窗口服务器的代码用其背景颜色填充视图肯定至少与用缩放的 1x1 图像填充视图的代码一样快。

# java - 我应该如何使用 Amazon S3 存储桶（动态 IP 地址 CDN）的 JAR 文件配置我的 JNLP 文件？

> ID：13885591
> 
> 赞同：5
> 
> 时间：2012-12-14T20:12:34.723
> 
> 标签：java, amazon-s3, cdn, jnlp, java-web-start

我有一个 Amazon S3 存储桶，用于保存我的 Java 应用程序的 .jar 文件。我有一个 Web 服务器，它动态创建并提供一个 JNLP 文件，该文件指向代码库的这个 Amazon S3 存储桶。

JNLP 似乎能够从我的 Amazon S3 存储桶中正确下载 .jar 文件。但是在尝试启动时，出现以下异常：

```
ExitException[ 3]java.io.IOException: Cannot find cached resource for URL: http://s3.amazonaws.com/....     
      at sun.plugin2.applet.JNLP2Manager.prepareLaunchFile(Unknown Source)  
      at sun.plugin2.applet.JNLP2Manager.loadJarFiles(Unknown Source)   
      at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)  
      at java.lang.Thread.run(Unknown Source) 
```

Java 是否使用 IP 地址缓存 .jar 文件？在 java 日志的前面，打印了以下内容：“cache: CacheEntry IP mismatch: 207.171.189.80 != 207.171.187.117”。两个 IP 都解析为 S3。

我有点惊讶我遇到了这个问题，并认为这是一个常见问题，但找不到好的解决方案。如果我将 IP 地址粘贴在 JNLP 文件中：

```
<jnlp spec="1.0" xmlns:jfx="http://javafx.com" codebase="http://207.171.189.80/... 
```

代替：

```
<jnlp spec="1.0" xmlns:jfx="http://javafx.com" codebase="http://s3.amazonaws.com/... 
```

它每次都有效。否则，它通常会因上述异常而中断。

有谁知道一个好的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T02:18:21.760

您的 JNLP 文件的基于 s3 主机名的版本有时是否有效？如果是 - 我预计原因是 Amazon 的 S3 主机名的生存时间值较短。

现在“A”记录仅在 30 秒后过期。这可能意味着在每个 JAR 文件对 S3 的 HTTP 请求之间，DNS 缓存都会过期。所以下一个 JAR 请求将导致另一个 DNS 查找。

我注意到 S3 的 DNS 只返回一个 IP 地址，但它会在 30 秒后轮换。

```
% dig s3.amazonaws.com
;; ANSWER SECTION:
s3.amazonaws.com.        229        IN CNAME   s3.a-geo.amazonaws.com.
s3.a-geo.amazonaws.com.  213        IN CNAME   s3-1.amazonaws.com.
s3-1.amazonaws.com.      28         IN A       176.32.100.200 
```

我不确定 JNLP，但通常 Java 对确保 JAR 文件都从同一个“源”加载非常挑剔。在这种情况下，我猜Java希望“源”表示“相同的IP地址”。

最坏的情况，您可以尝试动态生成您的 JNLP，将其实时放入 S3，然后引导您的客户从那里获取完整的捆绑包？

# maven - Maven 从远程父级继承

> ID：13885595
> 
> 赞同：2
> 
> 时间：2012-12-14T20:12:41.463
> 
> 标签：maven, pom.xml, parent-pom

我的问题是我有几个`git`repos，每个 repos 都由几个`Maven`项目组成，这些都需要从一个共同的`pom.xml`. 换句话说，它们与文件系统无关。对我来说最明显的解决方案是让父母住在一个共同的 Maven 存储库中，但是我还没有找到任何关于这是否可能的参考。

我正在寻找不涉及的解决方案`git submodule`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:41:14.383

父级不必存在于文件系统上。它可以是一个普通的 pom 打包的工件，可以从 maven 存储库下载。所以你应该没问题。

# c++ - 设置新进程的父级

> ID：13885596
> 
> 赞同：1
> 
> 时间：2012-12-14T20:12:43.537
> 
> 标签：c++, windows, dll, parent-child, process

我正在尝试将子进程与外部应用程序正在加载的 dll 相关联。原因是我希望这个子进程在 dll 卸载后立即关闭。

我已经查看了[这个问题](https://stackoverflow.com/questions/53208/how-do-i-automatically-destroy-child-processes-in-windows)以获取指导，但默认情况下，似乎`CreateProcess`将子进程与外部应用程序相关联，而不是调用它的 DLL。

这是一段代码，可以解释我想要实现的目标：

从 DLL 中：

```
// ... Initialize ghJob to JOB_OBJECT_LIMIT_KILL_ON_JOB_CLOSE

if (::CreateProcess( NULL, szCmdline , NULL, NULL, TRUE, CREATE_BREAKAWAY_FROM_JOB , NULL, NULL, &info, &processInfo)) // <-- Here is where I'd like to set the parent to the calling DLL
{
    // SetParent(processInfo.hProcess, dllHinst) <-- This isn't right, but something like this
    AssignProcessToJobObject( ghJob, processInfo.hProcess);
} 
```

对此问题的任何见解将不胜感激，特别是如果我以错误的方式解决这个问题。

# android - 在 Web 视图中直接进入 Android 市场的链接

> ID：13885599
> 
> 赞同：4
> 
> 时间：2012-12-14T20:12:46.797
> 
> 标签：android, android-webview, google-play, webviewclient

在我的 Android 中，如果我单击指向 Play 商店的链接，Android 会自动打开 Play 商店，以便我可以下载该应用程序。

如果该链接位于应用程序的 web 视图中，则会打开一个网页，类似于在桌面上打开的网页。有没有办法解决？我尝试过的链接类型是：

market://details?id=com.alpinereplay.android （在 web 视图中根本不起作用） [https://play.google.com/store/apps/details?id=com.appname.android](https://play.google.com/store/apps/details?id=com.appname.android)（打开像网站一样的桌面）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:16:37.653

我实际上很惊讶这种行为正在发生。你确定这不是你明确做的事情吗？[`shouldOverrideUrlLoading`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)说的文档`WebViewClient`：

> 默认情况下，WebView 将要求 Activity Manager 为 url 选择正确的处理程序。

如果你有一个`WebViewClient`确保你有代码`shouldOverrideUrlLoading`来决定何时启动 Play 商店与加载页面——`WebView`也许通过[解析 URL](http://developer.android.com/reference/android/net/Uri.html#parse%28java.lang.String%29)，[获取方案](http://developer.android.com/reference/android/net/Uri.html#getScheme%28%29)，并`market`为你的 URL 使用方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T09:31:43.810

默认情况下，如果您不设置任何`WebViewClient`

```
webView.loadUrl("market://details?id=your_package"); 
```

方法不起作用，它显示找不到页面。如果你尝试加载一个包含市场链接的页面，如果你没有设置`WebViewClient`，这个页面将在设备浏览器中打开，所以你应该设置一个`WebViewClient`，因为你设置了一个`WebViewClient`; 你应该像[这个答案](https://stackoverflow.com/a/13886357/1503078)建议的那样自己处理市场链接。

但是，即使您没有设置`WebViewClient`. 我认为这是[`shouldOverrideUrlLoading`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29).

```
String html = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"//www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html><head> </head> <body>  <p><a href=\"market://details?id=your_package\">Market Link</a></p>  </body></html>";
webView.loadDataWithBaseURL("", html, "text/html", "UTF-8", ""); 
```

# iphone - transitionWithView 和 animateWithDuration 的问题

> ID：13885603
> 
> 赞同：7
> 
> 时间：2012-12-14T20:13:26.267
> 
> 标签：iphone, ios, xcode, ipad, uianimation

我有问题`transitionWithView`和`animateWithDuration`。我的一个`animateWithDuration`块没有转换，这是一个突然的变化，并且`transitionWithView`不会暂时禁用用户交互。我检查了文档并相信我做的一切都是正确的，但显然有问题。下面是两个代码块：

这是在我的主视图控制器`ViewController`中，它具有三个容器视图/子视图控制器。此块移动容器视图之一，但不会`ViewController`在转换发生时阻止用户进行其他交互。

```
[UIView transitionWithView:self.view duration:0.5 options:UIViewAnimationOptionCurveEaseOut animations:^ {
        CGRect frame = _containerView.frame;
        frame.origin.y = self.view.frame.size.height - _containerView.frame.size.height;
        _containerView.frame = frame;
}completion:^(BOOL finished) {
     // do something   
}]; 
```

这是在我的一个容器视图控制器中。动画似乎没有效果，因为 的文本`productTitleLabel`突然`productDescriptionTextView`变化，好像动画块不存在一样。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    [self.viewController toggleFlavoredOliveOilsTableView];

    if (indexPath.row > 0) {
        NSDictionary *selectedCellDict = [[_flavoredOliveOilsDict objectForKey:@"Unflavored Olive Oils"] objectAtIndex:indexPath.row - 1];

        [UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionTransitionCrossDissolve animations:^ {
            self.viewController.productTitleLabel.text = [_flavoredOliveOilsTableView cellForRowAtIndexPath:indexPath].textLabel.text;
            self.viewController.productDescriptionTextView.text = [selectedCellDict objectForKey:@"Description"];
        }completion:nil];

        if (indexPath.row == 1) {
            [self.viewController setProductDescriptionTextViewFrameForInformationTab];
        }
        else {
            [self.viewController setProductDescriptionTextViewFrameForNonInformationTab];

            //self.viewController.productImageView.image = [UIImage imageNamed:[selectedCellDict objectForKey:@"Image"]];
        }
    }
} 
```

我认为这些问题有些相关，因为我的大多数动画和过渡块都不能完全按预期工作。谢谢你的帮助。

**编辑**

我想要完成的是移动容器视图`ViewController`并设置标签、文本视图和图像视图的文本和图像属性；所有这些都在主视图中。这些属性的详细信息通过子视图控制器发送。`transitionWithView`是在一个被调用的方法`toggleFlavoredOiveOilsTableView`中`didSelectRowAtIndexPath`。我认为问题在于我试图同时调用两个不同的动画/过渡块。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T21:57:59.163

如果一个动画是在另一个正在进行动画的视图的子视图上完成的，则您可以体验到两个动画相互干扰的这种行为。因此，如果您按照`transitionWithView:self.view`代码片段建议的方式执行（即在主视图上），您可能会遇到问题。如果您在不同的子视图上执行这两个动画，问题可能会消失。在下面的原始答案中，我：

*   `transitionWithView`在具有两个`UILabel`控件的子视图上执行；

*   将我的视图控制器包含子视图放在主视图的子视图中，然后将`transitionFromViewController`其约束到该子视图。

当我将两个动画部分放在不同的子视图上时，动画可以同时发生而不会发生意外。

* * *

如果要对两个文本标签内容的变化进行动画处理，可以：

```
[UIView transitionWithView:self.viewController.textLabelsContainerView
                  duration:0.5
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{
                    self.viewController.productTitleLabel.text = [_flavoredOliveOilsTableView cellForRowAtIndexPath:indexPath].textLabel.text;
                    self.viewController.productDescriptionTextView.text = [selectedCellDict objectForKey:@"Description"];
                }
                completion:nil]; 
```

通常我会使用`animateWithDuration`，但 text 属性不是动画属性，所以这就是我使用 的原因`transitionWithView`，确保我有一个用于这些文本字段的容器。但是我尝试使用 为其他控件设置动画`animateWithDuration`，同时为子控制器的变化设置动画，并且效果很好。

为了转换子视图控制器，我使用`transitionFromViewController`动画容器子控制器视图的交换（它[是自定义容器](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW86)系列方法中管理子视图控制器的一部分）。为了促进该过程，我在主视图控制器的视图上放置了一个容器视图，并将子控制器的视图添加为该容器的子视图。这样，当我为孩子的过渡设置动画时，动画很好地限制在该容器视图中。

因此，这里是一些示例代码，用于将视图控制器添加到我的容器视图中，然后是我使用分段按钮在两个子视图控制器之间转换的代码：

```
- (void)addFirstChild
{
    UIViewController *child = [self.storyboard instantiateViewControllerWithIdentifier:@"Stooge"];
    [self addChildViewController:child];

    child.view.frame = self.bottomContainerView.bounds;
    [self.bottomContainerView addSubview:child.view];

    [child didMoveToParentViewController:self];
}

- (void)changedChild
{
    UIViewController *oldController = [self.childViewControllers lastObject];
    UIViewController *newController;

    if (self.segmentedControl.selectedSegmentIndex == 0)
        newController = [self.storyboard instantiateViewControllerWithIdentifier:@"Stooge"];
    else
        newController = [self.storyboard instantiateViewControllerWithIdentifier:@"Marx"];

    [oldController willMoveToParentViewController:nil];
    [self addChildViewController:newController];

    // start off screen below

    CGRect startFrame = self.bottomContainerView.bounds;
    startFrame.origin.y += startFrame.size.height;

    // end up where it's supposed to be, right in the container

    newController.view.frame = startFrame;

    [self transitionFromViewController:oldController
                      toViewController:newController
                              duration:0.5
                               options:0
                            animations:^{
                                newController.view.frame = self.bottomContainerView.bounds;
                            }
                            completion:^(BOOL finished) {
                                [oldController removeFromParentViewController];
                                [newController didMoveToParentViewController:self];
                            }];

} 
```

最重要的是，我对容器子控制器和父控制器中的字段进行动画处理都没有问题。也许我不理解你描述的问题。或者，我们制作动画的方式可能存在一些微妙的差异。如果你想看的话，我已经把[上面的代码](https://github.com/robertmryan/containment-animation)放在了 github 上。

# c++ - pthread_join 因核心转储段错误而崩溃

> ID：13885609
> 
> 赞同：0
> 
> 时间：2012-12-14T20:13:51.407
> 
> 标签：c++, pthreads, segmentation-fault, pthread-join

我有以下代码会导致`pthread_join`调用时出现段错误。对于很多行我很抱歉，但每个字符都可能很重要。如果它很重要，相同的代码在 WinAPI 下运行良好且没有任何错误。

```
void solution_of_matrix(int amount_of_threads,  vector< vector<double> > &matrix)
{
    pthread_t * threads = new pthread_t[amount_of_threads - 1];
    matrix_struct * data = new matrix_struct[amount_of_threads];
    /* ... */
    for (size_t i = 0; i < amount_of_threads; ++i)
    {
        /* ... */
        if (i == amount_of_threads - 1)
        {
            MyThreadProc(&data[i]);
        }
        else
        {   
            pthread_create(&threads[i], 0, MyThreadProc, &data[i]);
        }
    }
    for(int i = 0; i < amount_of_threads; ++i)
        pthread_join(threads[i], 0); // <- ERROR
    delete[] threads;
    delete[] data;
} 
```

并且`MyThreadProc`：

```
void* MyThreadProc(void* lpParam)
{   
    matrix_struct * data = (matrix_struct*)lpParam;
    /*... */

    pthread_mutex_lock(&mutex);
    for (i = (data->i); i < (*data->matrix).size(); i++)
    {       
    if ((*data->matrix)[i][i] == 0 )
        for (j = (data->i + 1); j <(*data->matrix).size(); j++)
            if ((*data->matrix)[j][i] != 0 )
            {
             vector< double > v;
             for(size_t k = 0; k < (*data->matrix)[j].size(); ++k)
                 v.push_back((*data->matrix)[j][k]);

             for( int q = 0; q <  (*data->matrix)[j].size(); q++)
                (*data->matrix)[j][q] = (*data->matrix)[i][q];

             for ( int w = 0; w < (*data->matrix)[i].size(); w++)
                (*data->matrix)[i][w] = v[w];
             break;
            }   
    }

    for (i = (data->i); i < data->i + data->sz ; i++)
    {   
        if ( i !=(*data->matrix).size() - 1)
        {
            tmp = (*data->matrix)[i][i];
            for (j = n; j >= i; j--)    
                    (*data->matrix)[i][j] /= tmp;

            for (j = i+1; j < n; j++)
            {               
                tmp = (*data->matrix)[j][i];
                for (k = n; k >= i; k--)
                    (*data->matrix)[j][k] -= tmp*(*data->matrix)[i][k];         
            }
        }
    }

    pthread_mutex_unlock(&mutex);
    return 0;
} 
```

在许多代码的末尾，我的`struct`：

```
struct matrix_struct
{
    vector< vector<double> > * matrix;
    size_t i, sz;
}; 
```

工作选项是：

```
void solution_of_matrix(int amount_of_threads,  vector< vector<double> > &matrix)
{
    pthread_t * threads = new pthread_t[amount_of_threads];
    matrix_struct * data = new matrix_struct[amount_of_threads];
    /* ... */
    for (size_t i = 0; i < amount_of_threads; ++i)
    {
        /* ... */
        pthread_create(&threads[i], 0, MyThreadProc, &data[i]); //just simplifyed
    }
    for(int i = 0; i < amount_of_threads; ++i)
        pthread_join(threads[i], 0);
    delete[] threads;
    delete[] data;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:19:09.810

您正在加入自己，因为最后一个线程没有启动，而是使用创建其他线程的线程。检查 pthread_join 的错误代码...

# php - 提取 URL 值和名称以使用 PHP 导入？

> ID：13885610
> 
> 赞同：0
> 
> 时间：2012-12-14T20:13:55.303
> 
> 标签：php, html-parsing

我有一个包含此类列表的网页，大约 500 项长：

```
<br><a href="urlvalue" >URL Name 1</a> text</br>
<br><a href="urlvalue" >URL with a longer url</a>text</br>
<br><a href="urlvalue" >URL Name3 and this one too?</a> text</br> 
```

我想将此页面上的数据导入到excel中。所以，我想把这里的数据转换成这样的：

```
URL value  | URL Name | Text 
```

我实际上会满足于：

```
URL value | URL Name 
```

我正在使用这个：

我使用了 simple-html-dom

```
<?php
require ('simple_html_dom.php');
$html = file_get_html('Etext_alt2.html');

foreach($html->find('a') as $element)
    echo $element->href .'<br>'; 
?> 
```

这给了我一个很好的 URL 值列表。

似乎我应该能够访问其他属性，但没有任何效果。

我用错了吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T20:36:20.930

无需解析 HTML 即可完成任务的工作示例：

```
$html = '<br><a href="urlvalue" >URL Name 1</a> text</br>
<br><a href="urlvalue" >URL with a longer url</a>text</br>
<br><a href="urlvalue" >URL Name3 and this one too?</a> text</br>';

preg_match_all('#<br><a href="(.*)" >(.*)</a>(.*)</br>#', $html, $matches, PREG_SET_ORDER);

foreach ($matches as $row) {
    echo "{$row['1']} | {$row['2']} | {$row['3']}" . PHP_EOL;
} 
```

# ruby-on-rails - 如何使用 select_tag 的结果设置 link_to args

> ID：13885612
> 
> 赞同：0
> 
> 时间：2012-12-14T20:14:15.600
> 
> 标签：ruby-on-rails

我有一个看似直截了当的问题，我希望能够将 link_to 上的参数更改为用户选择的内容。我的应用程序不需要登录，因此在登录时设置用户首选项的常用方法不合适。用户像这样从 select_tag 中选择一个选项（我正在使用 Haml）；

```
 = select_tag('bible_version', options_for_select(['NIV','ESV', 'MSG'], :selected => @bible_version)) 
```

这是我的 index 视图的一部分，带有 link_to；

```
 - @verses.each do |verse|
    %tr
      %td= verse.gospel_verse
      %td= link_to 'Read', 'http://www.biblegateway.com/passage/?search=' + verse.gospel_verse + '&version=' + @bible_version 
```

将@bible_version 变量更改为用户选择的值并重置所有链接的最佳方法是什么？我想我需要设置一个 cookie 并且不介意刷新页面或使用 Javascript，但我无法让我的大脑找到一种干净的方式来做到这一点。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:26:37.347

我没有测试下面的代码，但似乎它可以在你的加载功能中工作。

```
$("#bible_version").change(function(){
   $(your_links).attr("href") = $(this).val();
}); 
```

# excel - Excel：自动选择未知数量的单元格

> ID：13885616
> 
> 赞同：1
> 
> 时间：2012-12-14T20:14:40.763
> 
> 标签：excel, vba

我正在尝试通过宏自动格式化 excel 文件，并正在寻找解决方案。

我有两列名为*Last Name*和*First Name*，我想将它们连接成一个名为*Last Name, First Name 的单独列。*

手动完成时这很简单：创建一个执行此操作的单元格，然后拖动该单元格以包含该范围内的所有单元格。尝试自动执行此操作时会出现问题。因为无法提前知道需要拼接的名称数量，所以无法通过拖动来自动选择单元格。

你能帮我自动化吗？

我尝试了复制初始连接单元格，突出显示列，然后粘贴的过程。我还尝试使用仅当“姓氏”和“名字”列中有文本时才返回串联的公式。但是，在这两种情况下，我最终都会得到大约 100,000 行，这严重限制了我操作工作表的能力。

我能想到的最佳解决方案是在固定范围的单元格内创建串联。虽然这会产生无用的细胞，但至少不会有 99,900 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:22:40.147

UsedRange属性可用于[确定](http://msdn.microsoft.com/en-us/library/office/aa218185%28v=office.10%29.aspx)需要在未知数据的工作表上选择多少行/列。[这是一个例子](http://www.mrexcel.com/forum/excel-questions/4413-select-used-range.html#post19503)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:28:27.090

如果需要，您可以使 Excel 自动将公式添加到字段中。只需填写三个销售：名字 - 姓氏 - 公式。`Home -> Style -> Format as Table`然后选择范围并将其格式化为表格（

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:18:31.267

你不能在你的`C1`公式中使用`=A1&" "&B1`它们双击黑色方块并展开函数吗？然后应用过滤器？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T20:24:22.210

这是一个如何获取行的示例！

```
Sub ExampleNames()
Dim MaxRow As Long
Dim i As Long

MaxRow = Worksheet(1).Cells(1, 1).CurrentRegion.Rows.Count  'For Excel 2010 and later

' OR

'MaxRow = Worksheets(1).Cells(1.1).UsedRange.Rows.Count  'For prior Excel Verisons

For i = 1 To MaxRow
    ' your code to string them together
Next i

End Sub 
```

# c++ - 如何有效地将 std::atomic<> 用于非原始类型？

> ID：13885617
> 
> 赞同：49
> 
> 时间：2012-12-14T20:14:41.643
> 
> 标签：c++, multithreading, c++11, thread-safety

[的定义`std::atomic<>`](http://en.cppreference.com/w/cpp/atomic/atomic)似乎显示了它对原始类型或可能是 POD 类型的明显有用性。

你什么时候会用它来上课？

什么时候应该**避免**在课堂上使用它？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-14T21:22:04.490

`std::atomic`在任何可简单复制的类型上可用的操作都是非常基本的。可以构造和销毁`atomic<T>`，可以询问类型`is_lock_free()`，可以加载和存储 的副本`T`，还可以通过各种方式交换 的值`T`。如果这足以满足您的目的，那么您可能比持有显式锁定更好。

如果这些操作还不够，例如，如果您需要直接在值上原子地执行序列操作，或者如果对象足够大以至于复制成本很高，那么您可能希望持有一个您管理的显式锁实现您更复杂的目标或避免做所有使用`atomic<T>`会涉及的副本。

```
// non-POD type that maintains an invariant a==b without any care for
// thread safety.
struct T { int b; }
struct S : private T {
    S(int n) : a{n}, b{n} {}
    void increment() { a++; b++; }
private:
    int a;
};

std::atomic<S> a{{5}}; // global variable

// how a thread might update the global variable without losing any
// other thread's updates.
S s = a.load();
S new_s;
do {
    new_s = s;
    new_s.increment(); // whatever modifications you want
} while (!a.compare_exchange_strong(s, new_s)); 
```

如您所见，这基本上是获取值的副本，修改副本，然后尝试将修改后的值复制回来，必要时重复。您对副本所做的修改可以随心所欲地复杂，而不仅仅限于单个成员函数。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-14T20:17:04.467

它适用于原始类型和 POD 类型。类型必须是`memcpy`-able，所以更通用的类已经出来了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-14T20:34:21.067

标准说

> 原子模板的特化和实例化应具有已删除的复制构造函数、已删除的复制赋值运算符和 constexpr 值构造函数。

如果这与 Pete Becker 的答案完全相同，我不确定。我对此进行了解释，以便您可以自由地专注于自己的课程（不仅是 memcpy-able 课程）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-03T14:32:23.327

对于这种情况，我更喜欢 std::mutex 。尽管如此，我还是尝试了一个糟糕的 mans 基准测试来在单线程（因此完美同步）环境中使用 std::atomics 和 std::mutex 来分析一个版本。

```
#include <chrono>
#include <atomic>
#include <mutex>

std::mutex _mux;
int i = 0;
int j = 0;
void a() {
    std::lock_guard<std::mutex> lock(_mux);
    i++;
    j++;
}

struct S {
    int k = 0;
    int l = 0;

    void doSomething() {
        k++;
        l++;
    }
};

std::atomic<S> s;
void b() {
    S tmp = s.load();
    S new_s;
    do {
        new_s = tmp;
        //new_s.doSomething(); // whatever modifications you want
        new_s.k++;
        new_s.l++;
    } while (!s.compare_exchange_strong(tmp, new_s));
}

void main(void) {

    std::chrono::high_resolution_clock clock;

    auto t1 = clock.now();
    for (int cnt = 0; cnt < 1000000; cnt++)
        a();
    auto diff1 = clock.now() - t1;

    auto t2 = clock.now();
    for (int cnt = 0; cnt < 1000000; cnt++)
        b();
    auto diff2 = clock.now() - t2;

    auto total = diff1.count() + diff2.count();
    auto frac1 = (double)diff1.count() / total;
    auto frac2 = (double)diff2.count() / total;
} 
```

在我的系统上，使用 std::mutex 的版本比 std::atomic 方法快。我认为这是由值的额外复制引起的。此外，如果在多线程环境中使用，繁忙的循环也会影响性能。

总而言之，是的，可以将 std::atomic 与各种 pod 类型一起使用，但在大多数情况下，std::mutex 是首选武器，因为它有意更容易理解正在发生的事情，因此不那么容易与 std::atomic 一起呈现的版本中的错误。

# ruby-on-rails - 如何检查最低权限并以 DRY 方式允许所有父角色权限？

> ID：13885621
> 
> 赞同：0
> 
> 时间：2012-12-14T20:15:02.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan, rolify

假设我有 4 个角色：`user`, `agent`, `admin`, `superadmin`.

每个角色随后对我的应用程序中的所有对象拥有更多权限。

我正在使用 Rolify、CanCan 和 Devise。

我想做的是，每当我想启用某些东西时-说：

```
<%= link_to "Create New User", new_user_registration_path if current_user.has_role? :superadmin %> 
```

我希望该链接显示此人是 an`admin`还是`superadmin`. 我知道我可以简单地做一个`||`- 但这似乎不是很干，特别是因为我必须做`current_user.has_role? :superadmin || current_user.has_role? :admin`。

`agent, admin & superadmin`想象一下，我想访问一些链接/资产。

我如何以干燥的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:23:44.740

为什么你检查角色而不是检查权限？据我所知，cancan 支持`can?`和`cannot?`方法可以帮助您解决问题。你应该写这样的东西

```
<%= link_to "Create New User", new_user_registration_path if can?(:create, User) %> 
```

[关于此功能的有用链接](https://github.com/ryanb/cancan/wiki/Checking-Abilities)

# php - 如何通过另一个值将函数的参数作为变量返回？

> ID：13885623
> 
> 赞同：-3
> 
> 时间：2012-12-14T20:15:18.580
> 
> 标签：php, function, variables

更清楚....：

```
$var = "value";
function func($var){
    $sql=mysql_query("...$var...");
    $res = mysql_result($sql);
    //$var = $res;
}
echo("$value"); 
```

我想从最后一行显示`$res`价值，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:18:37.663

通过分配 $var="value" 并不意味着这是传递给函数的内容。您必须使用所需的任何值调用该函数，并且该值将被放入 func 函数中的 $var 变量中。

如果你这样做了：

```
$var = "value";
function func($var){
    $sql=mysql_query("...$var...");
    $res = mysql_result($sql);
    return $res;
}

$ssn = func($var);  
# you could also do func("value");
echo("$ssn"); 
```

# jquery - 动态设置灯箱中的 href 值

> ID：13885624
> 
> 赞同：0
> 
> 时间：2012-12-14T20:15:29.233
> 
> 标签：jquery, asp.net

```
 $(document).ready(function () {
            var Href = 'http://www.apple.com';
            $("#fancybox-manual-b").click(function () {
                $.fancybox.open({
                    href: Href,
                    type: 'iframe',
                    padding: 5
                });
            });

        });

    <ul>
        <li><a id="fancybox-manual-b" href="javascript:;">Open Window</a></li>
    </ul> 
```

我需要从文本框中获取“Href”值，当有人将网站放入文本框中时，它应该得到它而不是 apple.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:19:18.060

```
$(document).ready(function () {            
     $("#fancybox-manual-b").click(function () {
          $.fancybox.open({
              href: $("#yourTextBoxId").val(), // Your textboxId here
              type: 'iframe',
              padding: 5
          });
     });

}); 
```

确保你用你的文本框 id 代替`yourTextBoxId`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:19:52.070

如果你有一些像这样的html：

```
<input type="text" id="target"> 
```

然后你可以使用 jQuery 的[val](http://api.jquery.com/val/)函数来获取文本框的值`id`：

```
var href = $('#target').val(); 
```

每次有人单击您的 fancybox 链接时，您显然都需要这样做，以便您从文本框中获得最新的值：

```
$(function () {
    $("#fancybox-manual-b").click(function () {
        var href = $('#target').val();
        $.fancybox.open({
            href: href,
            type: 'iframe',
            padding: 5
        });
    });
}); 
```

值得注意的是，如果用户在输入中输入了一些无法解析为现有 url 的文本，您将收到错误消息。

# unix - 我切换到 zsh 但现在 less -S 继续换行；如何获得预期的行为？

> ID：13885628
> 
> 赞同：0
> 
> 时间：2012-12-14T20:15:52.620
> 
> 标签：unix, zsh

我最近切换到zsh，但是现在当我使用less -S时，它不会断线。这是非常令人沮丧的，因为我经常使用较少来查看宽数据表。知道如何解决这个问题吗？

谢谢！乌里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:21:49.040

zsh 可能会弄乱您的 stty 设置并弄错列。尝试 zsh 常见问题解答中标题为“3.9：为什么我的终端以某种方式表现得很有趣？”下的修复。

[http://www.zsh.org/zsh/FAQ](http://www.zsh.org/zsh/FAQ)

# jsf - 为什么不只使用 CDI 支持的 bean（而不是 SFSB）来保存会话信息？

> ID：13885636
> 
> 赞同：1
> 
> 时间：2012-12-14T20:16:34.390
> 
> 标签：jsf, jakarta-ee, ejb, cdi, httpsession

**语境**

简单的 Java EE 6 (JBoss AS 7.1) CRUD Web 应用程序，使用*@Named*支持 bean， JSF 页面的*@SessionScope*：

**问题**

为什么将 HTTP 会话状态存储在 CDI bean 上不是一个好主意？例如，将购物车项目存储在那里。

**评论**

由于它们的会话状态，SFSB 就是为此而设计的，但我读到它们在[实践](https://stackoverflow.com/a/1935476/1341526)中并不容易使用。另外我认为另一个选择是*HttpSession*对象。

我也知道他们拥有的钝化/激活优势。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T12:16:03.373

我认为您对用于 HTTP 会话的“会话”和用于与特定 bean 的会话（在这种情况下为有状态 bean）的会话感到困惑。

它们有不同的用途，但也有重叠。最初，带有 SFSB 的会话用于非 HTTP 远程客户端（Applet 和 Swing 应用程序）。在某种程度上，您可以说它是 HTTP 会话的 RMI 等价物。

当已经有可用的 HTTP 会话时，为此目的使用有状态会话 bean 是没有意义的，您最好使用 HTTP 会话范围 bean。

不过，有状态会话 bean 确实有它们的用途，例如它们能够适应扩展的持久性上下文，并且可以在事务之外保持例如（乐观）锁打开。

在 Java EE 6 Web 应用程序中使用时，您通常希望为有状态会话 bean 分配一个 HTTP 会话范围。否则，即使 bean 有一个内部会话，它也没有连接到任何东西，而是连接到您用来与之通信的代理。

另见：

*   [在有状态 EJB 3.1 bean 中保持会话？](https://stackoverflow.com/a/12063038/472792)
*   [使用有状态会话 Bean 跟踪用户的会话](https://stackoverflow.com/a/8540181/472792)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:08:46.787

以下是 SFSB 的假定好处：

*   SFSB 是事务性的。
*   SFSB 可以被钝化/激活。
*   SFSB 启用扩展的持久性上下文。

为这些付出的代价是异常方案更复杂（回滚、非回滚异常等）、生命周期以及结果调试。

通常，您不需要钝化/激活。为了使设计具有可扩展性，请尽可能少地存储在内存中。通常，也不需要扩展持久性上下文（尽管它们有其用途）。

但是，请求必须以事务方式处理。但是你不需要SFSB。您可以自己处理错误和恢复，以确保您的 HttpSession 是一致的。不过，请确保您使用事务来访问您的后端！

# svn - 强制旧版本为最新版本 - SVN

> ID：13885640
> 
> 赞同：2
> 
> 时间：2012-12-14T20:16:55.210
> 
> 标签：svn

我有一个旧版本，效果很好，我想扭转过去在 SVN 中所做的几个版本。我怎样才能简单地删除这些修订并使 HEAD 成为特定修订。这样，当我按下更新时，它会转到那个版本，而不是真正的当前版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:20:39.167

从`svn`书中：

> **撤消更改**
> 
> 的另一个常见用途`svn merge`是回滚已经提交的更改。假设您在 的工作副本上愉快地工作`/calc/trunk`，并且您发现在修订版 303 中所做的更改`integer.c`是完全错误的。它不应该被提交。您可以使用`svn merge`“撤消”工作副本中的更改，然后将本地修改提交到存储库。您需要做的就是指定反向差异：

```
$ svn merge -r 303:302 http://svn.example.com/repos/calc/trunk
U  integer.c

$ svn status
M  integer.c

$ svn diff
…
# verify that the change is removed
…

$ svn commit -m "Undoing change committed in r303."
Sending        integer.c
Transmitting file data .
Committed revision 350. 
```

[有关更多详细信息，请参阅“撤消更改”部分](http://svnbook.red-bean.com/en/1.0/ch04s04.html)的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:20:50.863

如果您执行 SVN HELP MERGE，请查看显示的第三种形式 (-r N:M)。我相信这是您要使用的方法。

# php - 打印/回显所有从 JSON 字符串对 Facebook 帖子发表评论的人的姓名

> ID：13885643
> 
> 赞同：1
> 
> 时间：2012-12-14T20:17:01.073
> 
> 标签：php, facebook, json, facebook-graph-api

我这里有一个 Json 字符串。[https://graph.facebook.com/402341223174008_403132789761518?access_token=AAACEdEose0cBAKvST4yvRNg0ViRuvwLdKlCSk13x2NWAobGfq0QOASS3yBdsm1e4aZA57ZAfCjSCD0ta2HWjo3ZClgoYlR6CPFFdu877D](https://graph.facebook.com/402341223174008_403132789761518?access_token=AAACEdEose0cBAKvST4yvRNg0ViRuvwLdKlCSk13x2NWAobGfq0QOASS3yBdsm1e4aZA57ZAfCjSCD0ta2HWjo3ZClgoYlR6CFFdu4q7180h8D1P7A87) _ 现在这包含来自 facebook 群组帖子的评论。我想得到所有评论这篇文章的人的名字。

我想要所有名字，并且不应该重复任何名字（因为很多人不止一次评论过）。

我们可以通过

```
$a = file_get_contents ('https://graph.facebook.com/402341223174008_403132789761518?access_token=AAACEdEose0cBAKvST4yvRNg0ViRuvwLdKlCSk13x2NWAobGfq0QOASS3yBdsm1e4aZA57ZAfCjSCD0ta2HWjo3ZClgoYlR6CFFdu4q7180h8D1P7A87');
$json_decoded = json_decode($a);
echo $json_decoded->comments->data[1]->from->name; 
```

下面是完整的 JSON 字符串。请帮我。

```
{
   "id": "402341223174008_403132789761518",
   "from": {
      "name": "\u015e\u0117xy Gi\u0159l",
      "id": "100004829461101"
   },
   "to": {
      "data": [
         {
            "version": 1,
            "name": "Magic box 30k+ With Safe Magicians [ Save App. Sharing ]",
            "id": "402341223174008"
         }
      ]
   },
   "message": "give me linkssssssssssssssssssssss\n\nsubs k liye 20k + must",
   "actions": [
      {
         "name": "Comment",
         "link": "http://www.facebook.com/402341223174008/posts/403132789761518"
      },
      {
         "name": "Like",
         "link": "http://www.facebook.com/402341223174008/posts/403132789761518"
      }
   ],
   "privacy": {
      "value": ""
   },
   "type": "status",
   "created_time": "2012-12-14T15:54:30+0000",
   "updated_time": "2012-12-14T17:38:33+0000",
   "likes": {
      "data": [
         {
            "name": "Jaideep Singh",
            "id": "100002474286855"
         }
      ],
      "count": 1
   },
   "comments": {
      "data": [
         {
            "id": "402341223174008_403132789761518_403133536428110",
            "from": {
               "name": "Gurkaran Singh",
               "id": "100001523330551"
            },
            "message": "https://m.facebook.com/profile.php?id=234028326728478&refid=5\n\nhttps://m.facebook.com/channeVTBP?refid=5\n\nDone ispe krunga \n\nhttps://m.facebook.com/channeVTBP?refid=5",
            "created_time": "2012-12-14T15:57:07+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403133656428098",
            "from": {
               "name": "Nikhil Nikki Varshney",
               "id": "100002729097951"
            },
            "message": "http://m.facebook.com/profile.php?id=514287051931593&refid=5&ref=stream",
            "created_time": "2012-12-14T15:57:48+0000",
            "likes": 2
         },
         {
            "id": "402341223174008_403132789761518_403133766428087",
            "from": {
               "name": "S\u0177\u00ea\u010f S\u0103\u00e5d S\u0127a\u0127",
               "id": "100001550089518"
            },
            "message": "1.\nhttps://www.facebook.com/SaadKaFanPage\n2.\nhttps://www.facebook.com/pages/Mine-Worst-Enemy-Is-Mine-Heart-Its-Of-Mine-But-Beats-For-U/370095696418243\n\nSUBS:\nhttps://www.facebook.com/stub.sm0ker",
            "created_time": "2012-12-14T15:58:20+0000",
            "likes": 3
         },
         {
            "id": "402341223174008_403132789761518_403133856428078",
            "from": {
               "name": "Shandy Orbanto Duplesis",
               "id": "631693473"
            },
            "message": "http://www.facebook.com/whydoihurttheoneilove",
            "created_time": "2012-12-14T15:58:43+0000",
            "likes": 2
         },
         {
            "id": "402341223174008_403132789761518_403133869761410",
            "from": {
               "name": "Nikhil Nikki Varshney",
               "id": "100002729097951"
            },
            "message": "http://m.facebook.com/profile.php?id=356320534384116&refid=5&ref=stream Done page",
            "created_time": "2012-12-14T15:58:47+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403134183094712",
            "from": {
               "name": "Amar Jhutty",
               "id": "100001142236515"
            },
            "message": "https://www.facebook.com/amar.simran1",
            "created_time": "2012-12-14T16:00:01+0000",
            "likes": 2
         },
         {
            "id": "402341223174008_403132789761518_403135436427920",
            "from": {
               "name": "Mandeep Kumar",
               "id": "100001396765502"
            },
            "message": "cc",
            "created_time": "2012-12-14T16:03:50+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403135636427900",
            "from": {
               "name": "\u011c\u1ec3m\u012f\u00f1\u00ee G\u016f\u0155\u0142",
               "id": "1311267291"
            },
            "message": "\u003C3",
            "created_time": "2012-12-14T16:04:20+0000"
         },
         {
            "id": "402341223174008_403132789761518_403136286427835",
            "from": {
               "name": "\u015e\u0117xy Gi\u0159l",
               "id": "100004829461101"
            },
            "message": "ban ja Mandeep Kumar",
            "message_tags": [
               {
                  "id": "100001396765502",
                  "name": "Mandeep Kumar",
                  "type": "user",
                  "offset": 7,
                  "length": 13
               }
            ],
            "created_time": "2012-12-14T16:06:33+0000"
         },
         {
            "id": "402341223174008_403132789761518_403136353094495",
            "from": {
               "name": "Romeo Boy Romy",
               "id": "100001621695238"
            },
            "message": "Page Links\n\nhttp://www.facebook.com/pages/Distance-Doesnt-Matter-I-Love-U/419648838104003?ref=hl\n\nhttp://www.facebook.com/pages/Teens-J\u0025CF\u002585st-Wanna-Have-Fun/306235916151862?ref=hl\n\nhttp://www.facebook.com/pages/L-a-F-u-N-d-E-r-s/291145307562223\n\nSub button\n\nhttp://www.facebook.com/rape.addiicted",
            "created_time": "2012-12-14T16:06:55+0000",
            "likes": 3
         },
         {
            "id": "402341223174008_403132789761518_403136406427823",
            "from": {
               "name": "Mandeep Kumar",
               "id": "100001396765502"
            },
            "message": "w8 net b bc kar raha hai",
            "created_time": "2012-12-14T16:07:13+0000"
         },
         {
            "id": "402341223174008_403132789761518_403136419761155",
            "from": {
               "name": "\u015e\u0117xy Gi\u0159l",
               "id": "100004829461101"
            },
            "message": "added h :D",
            "created_time": "2012-12-14T16:07:21+0000"
         },
         {
            "id": "402341223174008_403132789761518_403136626427801",
            "from": {
               "name": "Gurkaran Singh",
               "id": "100001523330551"
            },
            "message": "mera link add kiyA...???",
            "created_time": "2012-12-14T16:07:59+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403136909761106",
            "from": {
               "name": "S\u0177\u00ea\u010f S\u0103\u00e5d S\u0127a\u0127",
               "id": "100001550089518"
            },
            "message": "mera add Kardiaaa ? :P",
            "created_time": "2012-12-14T16:08:54+0000",
            "likes": 2
         },
         {
            "id": "402341223174008_403132789761518_403137253094405",
            "from": {
               "name": "Ranvijay Singh",
               "id": "100001606084450"
            },
            "message": "\u015e\u0117xy Gi\u0159l aur bhi koi code collect kar raha hai kya?",
            "message_tags": [
               {
                  "id": "100004829461101",
                  "name": "\u015e\u0117xy Gi\u0159l",
                  "type": "user",
                  "offset": 0,
                  "length": 9
               }
            ],
            "created_time": "2012-12-14T16:10:07+0000"
         },
         {
            "id": "402341223174008_403132789761518_403137276427736",
            "from": {
               "name": "Gurkaran Singh",
               "id": "100001523330551"
            },
            "message": "Mera ek aur hai isse bhi krr dena add \nhttps://m.facebook.com/profile.php?id=196541297108554&refid=12\n\nGet mai 4.3k page pe krunga pichle cmmnt me uska link hai",
            "created_time": "2012-12-14T16:10:15+0000"
         },
         {
            "id": "402341223174008_403132789761518_403137373094393",
            "from": {
               "name": "\u015e\u0117xy Gi\u0159l",
               "id": "100004829461101"
            },
            "message": "all added jis like h wo sub added or jitne pe diye utne pe done h",
            "created_time": "2012-12-14T16:10:43+0000"
         },
         {
            "id": "402341223174008_403132789761518_403137476427716",
            "from": {
               "name": "S\u0177\u00ea\u010f S\u0103\u00e5d S\u0127a\u0127",
               "id": "100001550089518"
            },
            "message": "\u015e\u0117xy Gi\u0159l mera sub add hona chahiye bas :D",
            "message_tags": [
               {
                  "id": "100004829461101",
                  "name": "\u015e\u0117xy Gi\u0159l",
                  "type": "user",
                  "offset": 0,
                  "length": 9
               }
            ],
            "created_time": "2012-12-14T16:11:09+0000"
         },
         {
            "id": "402341223174008_403132789761518_403137489761048",
            "from": {
               "name": "Ranvijay Singh",
               "id": "100001606084450"
            },
            "message": "add-> https://www.facebook.com/pages/The-New-Adding-Game/547330385294958?ref=ts&fref=ts",
            "created_time": "2012-12-14T16:11:18+0000"
         },
         {
            "id": "402341223174008_403132789761518_403137586427705",
            "from": {
               "name": "\u015e\u0117xy Gi\u0159l",
               "id": "100004829461101"
            },
            "message": "Ranvijay Singh code collect hogye h ya nai Mandeep Kumar",
            "message_tags": [
               {
                  "id": "100001606084450",
                  "name": "Ranvijay Singh",
                  "type": "user",
                  "offset": 0,
                  "length": 14
               },
               {
                  "id": "100001396765502",
                  "name": "Mandeep Kumar",
                  "type": "user",
                  "offset": 43,
                  "length": 13
               }
            ],
            "created_time": "2012-12-14T16:11:29+0000"
         },
         {
            "id": "402341223174008_403132789761518_403137669761030",
            "from": {
               "name": "Ranvijay Singh",
               "id": "100001606084450"
            },
            "message": "almost",
            "created_time": "2012-12-14T16:11:48+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403137789761018",
            "from": {
               "name": "\u015e\u0117xy Gi\u0159l",
               "id": "100004829461101"
            },
            "message": "fast jaldi collect karo",
            "created_time": "2012-12-14T16:12:18+0000"
         },
         {
            "id": "402341223174008_403132789761518_403137963094334",
            "from": {
               "name": "Amar Jhutty",
               "id": "100001142236515"
            },
            "message": "\u015e\u0117xy Gi\u0159l innocent sthi ko add kro plzz",
            "message_tags": [
               {
                  "id": "100004829461101",
                  "name": "\u015e\u0117xy Gi\u0159l",
                  "type": "user",
                  "offset": 0,
                  "length": 9
               }
            ],
            "created_time": "2012-12-14T16:12:49+0000"
         },
         {
            "id": "402341223174008_403132789761518_403138273094303",
            "from": {
               "name": "Gurkaran Singh",
               "id": "100001523330551"
            },
            "message": "mera second cmmnt me jo page hai vo add kiya",
            "created_time": "2012-12-14T16:13:37+0000"
         },
         {
            "id": "402341223174008_403132789761518_403138506427613",
            "from": {
               "name": "Amar Jhutty",
               "id": "100001142236515"
            },
            "message": "grp me add kr0 rqst apprv plz  https://www.facebook.com/sethikeshav12",
            "created_time": "2012-12-14T16:14:20+0000"
         },
         {
            "id": "402341223174008_403132789761518_403139239760873",
            "from": {
               "name": "Ranvijay Singh",
               "id": "100001606084450"
            },
            "message": "ho gaya",
            "created_time": "2012-12-14T16:16:17+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403139273094203",
            "from": {
               "name": "Ranvijay Singh",
               "id": "100001606084450"
            },
            "message": "\u015e\u0117xy Gi\u0159l",
            "message_tags": [
               {
                  "id": "100004829461101",
                  "name": "\u015e\u0117xy Gi\u0159l",
                  "type": "user",
                  "offset": 0,
                  "length": 9
               }
            ],
            "created_time": "2012-12-14T16:16:27+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403139496427514",
            "from": {
               "name": "Ranvijay Singh",
               "id": "100001606084450"
            },
            "message": "\u0040+[516309891722041:0]\n\u0040+[482377875107230:0]\n\n\u0040+[462209383816146:0]\n\n\u0040+[302864366496860:0]\n\u0040+[320451588070385:0]\n\n\u0040+[128534657305039:0]\n\n\u0040+[133219873500747:0]\n\n\u0040+[305765806191542:0]\n\n\u0040+[194942957309052:0]\n\n\u0040+[291145307562223:0]\n\n\u0040+[257816624274795:0]\n\u0040+[162884670404543:0]\n\u0040+[133525333471256:0]\n\n\u0040+[234028326728478:0]\n\n\u0040+[234028326728478:0]\n\u0040+[387350677987219:0]\n\n\u0040+[514287051931593:0]\n\n\u0040+[267726736638001:0]\n\u0040+[370095696418243:0]\n\n\u0040+[133219873500747:0]\n\n\u0040+[477494305637105:0]\n\n\u0040+[396109510470921:0]\n\n\u0040+[419648838104003:0]\n\u0040+[306235916151862:0]\n\u0040+[291145307562223:0]\n\u0040+[100004832885746:0]",
            "created_time": "2012-12-14T16:17:13+0000"
         },
         {
            "id": "402341223174008_403132789761518_403139533094177",
            "from": {
               "name": "\u015e\u0117xy Gi\u0159l",
               "id": "100004829461101"
            },
            "message": "Ranvijay Singh tumra link",
            "message_tags": [
               {
                  "id": "100001606084450",
                  "name": "Ranvijay Singh",
                  "type": "user",
                  "offset": 0,
                  "length": 14
               }
            ],
            "created_time": "2012-12-14T16:17:22+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403139599760837",
            "from": {
               "name": "Mandeep Kumar",
               "id": "100001396765502"
            },
            "message": "11.Nikhil Nikki Varshney\n12.S\u0177\u00ea\u010f S\u0103\u00e5d S\u0127a\u0127",
            "message_tags": [
               {
                  "id": "100002729097951",
                  "name": "Nikhil Nikki Varshney",
                  "type": "user",
                  "offset": 3,
                  "length": 21
               },
               {
                  "id": "100001550089518",
                  "name": "S\u0177\u00ea\u010f S\u0103\u00e5d S\u0127a\u0127",
                  "type": "user",
                  "offset": 28,
                  "length": 14
               }
            ],
            "created_time": "2012-12-14T16:17:39+0000"
         },
         {
            "id": "402341223174008_403132789761518_403139883094142",
            "from": {
               "name": "Mandeep Kumar",
               "id": "100001396765502"
            },
            "message": "ab kya hua",
            "created_time": "2012-12-14T16:18:25+0000"
         },
         {
            "id": "402341223174008_403132789761518_403139969760800",
            "from": {
               "name": "Mandeep Kumar",
               "id": "100001396765502"
            },
            "message": "6.Arman Khan\n7.Hasan Wasim\n8.\u011c\u1ec3m\u012f\u00f1\u00ee G\u016f\u0155\u0142\n9.Junaid Iqbal\n10.Gurkaran Singh",
            "message_tags": [
               {
                  "id": "1843632012",
                  "name": "Arman Khan",
                  "type": "user",
                  "offset": 2,
                  "length": 10
               },
               {
                  "id": "100002420461463",
                  "name": "Hasan Wasim",
                  "type": "user",
                  "offset": 15,
                  "length": 11
               },
               {
                  "id": "1311267291",
                  "name": "\u011c\u1ec3m\u012f\u00f1\u00ee G\u016f\u0155\u0142",
                  "type": "user",
                  "offset": 29,
                  "length": 11
               },
               {
                  "id": "100004037960610",
                  "name": "Junaid Iqbal",
                  "type": "user",
                  "offset": 43,
                  "length": 12
               },
               {
                  "id": "100001523330551",
                  "name": "Gurkaran Singh",
                  "type": "user",
                  "offset": 59,
                  "length": 14
               }
            ],
            "created_time": "2012-12-14T16:18:48+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403140009760796",
            "from": {
               "name": "Mandeep Kumar",
               "id": "100001396765502"
            },
            "message": "4.HAwty NAwty\n5.Shandy Orbanto Duplesis\n6.Arman Khan\n7.Hasan Wasim\n8.\u011c\u1ec3m\u012f\u00f1\u00ee G\u016f\u0155\u0142\n9.Junaid Iqbal\n10.Gurkaran Singh",
            "message_tags": [
               {
                  "id": "100004659821432",
                  "name": "HAwty NAwty",
                  "type": "user",
                  "offset": 2,
                  "length": 11
               },
               {
                  "id": "631693473",
                  "name": "Shandy Orbanto Duplesis",
                  "type": "user",
                  "offset": 16,
                  "length": 23
               },
               {
                  "id": "1843632012",
                  "name": "Arman Khan",
                  "type": "user",
                  "offset": 42,
                  "length": 10
               },
               {
                  "id": "100002420461463",
                  "name": "Hasan Wasim",
                  "type": "user",
                  "offset": 55,
                  "length": 11
               },
               {
                  "id": "1311267291",
                  "name": "\u011c\u1ec3m\u012f\u00f1\u00ee G\u016f\u0155\u0142",
                  "type": "user",
                  "offset": 69,
                  "length": 11
               },
               {
                  "id": "100004037960610",
                  "name": "Junaid Iqbal",
                  "type": "user",
                  "offset": 83,
                  "length": 12
               },
               {
                  "id": "100001523330551",
                  "name": "Gurkaran Singh",
                  "type": "user",
                  "offset": 99,
                  "length": 14
               }
            ],
            "created_time": "2012-12-14T16:19:05+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403140116427452",
            "from": {
               "name": "\u015e\u0117xy Gi\u0159l",
               "id": "100004829461101"
            },
            "message": "cc apna link jaldi",
            "created_time": "2012-12-14T16:19:28+0000",
            "likes": 1
         },
         {
            "id": "402341223174008_403132789761518_403140156427448",
            "from": {
               "name": "Ranvijay Singh",
               "id": "100001606084450"
            },
            "message": "\u015e\u0117xy Gi\u0159l mera\n \u0040+[100001606084450:0]\n\u0040+[547330385294958:0]",
            "message_tags": [
               {
                  "id": "100004829461101",
                  "name": "\u015e\u0117xy Gi\u0159l",
                  "type": "user",
                  "offset": 0,
                  "length": 9
               }
            ],
            "created_time": "2012-12-14T16:19:40+0000"
         },
         {
            "id": "402341223174008_403132789761518_403140159760781",
            "from": {
               "name": "\u015e\u0117xy Gi\u0159l",
               "id": "100004829461101"
            },
            "message": "2no link apne jaldi fast",
            "created_time": "2012-12-14T16:19:41+0000"
         }
      ],

   }
} 
```

**给我完整的代码。请。任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:28:36.487

检查此代码：

```
<?php

$a = file_get_contents ('https://graph.facebook.com/402341223174008_403132789761518?access_token=AAACEdEose0cBAKvST4yvRNg0ViRuvwLdKlCSk13x2NWAobGfq0QOASS3yBdsm1e4aZA57ZAfCjSCD0ta2HWjo3ZClgoYlR6CFFdu4q7180h8D1P7A87');
$json_decoded = json_decode($a, TRUE);

$comments = $json_decoded['comments']['data'];
$names = array();
foreach($comments as $comment) {
    $names[] = $comment['from']['name'];
}

$names = array_unique($names); 
```

# javascript - 在 IE8 中遍历 DOM 中断的递归 JavaScript 函数

> ID：13885649
> 
> 赞同：3
> 
> 时间：2012-12-14T20:17:20.497
> 
> 标签：javascript, internet-explorer-8

我推迟了在这里发帖，因为我觉得我还没有回馈社区的技能水平，但是这个让我完全难过。

我有一个递归 JavaScript 函数，它将一个计数器附加到节点树中所有 id 和 name 元素的末尾。该功能适用​​于 FF、Chrome、Safari 和 IE9，但不适用于 IE8。

```
function counterAppend(nodes,counter)
{
    var newField = nodes.childNodes;
    for (var i=0;i<newField.length;i++)
    {
        var theName = newField[i].name;
        if (theName)
        {
            newField[i].name = theName + counter;
        }
        var theId = newField[i].id;
        if (theId)
        {
            newField[i].id = theId + counter;
        }

        //recursive part
        if(newField[i].childNodes.length>0)
        {
            newField[i] = counterAppend(newField[i],counter);
        }
    }
    return nodes;
} 
```

我得到了在线错误： newField[i] = counterAppend(newField[i],counter);

在调试中，它说： Breaking on JS runtime error - Object doesn't support this property or method

IE8 和其他浏览器有什么不同，我该如何修改它来解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:23:45.207

为什么要将函数的返回分配给`newField[i]`? 我不知道你期望这会做什么。如果代码只是修改 ids/names 你不应该需要返回值。我应该认为这是让 IE 感到困惑的原因，我不确定为什么它不会让其他浏览器感到困惑......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:13:13.913

**问题：**另外，您收到错误时是否检查过？在收到错误之前，您循环了多少次（如果有的话）？尝试一些输出语句。

一些用于遍历 DOM 的替代算法：[g​​etElementsByTagName() 等效于 textNodes](https://stackoverflow.com/questions/2579666/getelementsbytagname-equivalent-for-textnodes)

请记住，您可能会遇到以下问题。

> IE 不像其他浏览器那样在 childNodes nodeList 中包含纯空白文本节点。我建议您改用 getElementsByTagName() 。这样，您也不必在代码中手动遍历每个级别的节点。

通过[http://www.quirksmode.org/dom/w3c_core.html](http://www.quirksmode.org/dom/w3c_core.html)

> 大多数浏览器都会正确地将标签之间的空白视为仅包含空白字符（例如空格、换行符或制表符）的文本节点，即使空白未呈现，例如标签和标签或中间的空白
> 
> 标签。但是，某些浏览器（主要是 Internet Explorer 8- 和 9+ 的 quirks 模式）根本不会将此空白区域视为文本节点。

通过[http://www.howtocreate.co.uk/tutorials/javascript/dombasics](http://www.howtocreate.co.uk/tutorials/javascript/dombasics)

# django - Django-admin.py startproject --带有模板标签的模板

> ID：13885652
> 
> 赞同：2
> 
> 时间：2012-12-14T20:17:45.723
> 
> 标签：django, django-templates, django-cms

我经常构建和部署 Django CMS 站点。我开始意识到基于模板的 django-admin.py startproject 命令是提高效率的最佳方式，因此我不必总是重复我的设置步骤。

我为此构建了一个小型骨架项目，并且在该项目中有一组基本的 HTMl 文件，我使用以下带有`--extensions`标志的命令：

`django-admin.py startproject --template /envs/cms-setup --extension py,md,html project_name`

我有一个问题，当我将 --extensions 标志传递给命令时，我收到一条错误消息

`django.template.base.TemplateSyntaxError: 'cms_tags' is not a valid tag library: Template library cms_tags not found, tried django.templatetags.cms_tags`

我如何知道 HTML 模板`startproject`及其`--extensions`模板标签，这是可能的还是有人可以指出我的解决方法？

杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:49:33.870

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#templatetag](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#templatetag)是在带有 --extensions 标志的 html 模板中使用项目名称解析变量名称的解决方案

# html - 水平居中左浮动、左对齐项目的列表

> ID：13885655
> 
> 赞同：3
> 
> 时间：2012-12-14T20:17:55.830
> 
> 标签：html, css

我有一个`div`包含几个`section`s。其中一个`section`s 包含一个`ol`，并且它的所有`li`s 都向左浮动。我试图使`ol`收缩在一条线上包含尽可能多`li`的 s ，并水平居中`ol`同时保持`li`s 左对齐。

**这就是我所拥有的：http: [//jsbin.com/ocokog/1/edit](http://jsbin.com/ocokog/1/edit)**

```
<div id="wrapper">
 <section id="section">
  <ol id="list">
   <li id="i0"></li>
   <li id="i1"></li>
   <li id="i2"></li>
   <li id="i3"></li>
   <li id="i4"></li>
  </ol>
 </section>
</div> 
```

非装饰性 CSS：

```
#wrapper {
  width: 85%;
  text-align: center;
}

#section {
  display: inline-block;
}

#list {
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: auto;
}

#list > li {
  width: 100px;
  height: 100px;
  float: left;
} 
```

当`li`s 都可以放在一行上时，列表居中：![一条线居中](../Images/b77443bcbcc0851d7bed2e3567caaf69.png)

当`li`s 落在第二行时，`section`and`ol`增长并且整个事情是左对齐的：![两条线不居中](../Images/ea3e24cd97c219fb25fa008703b4c649.png)

我试图让它看起来像这样（取决于可用的宽度，`section`必要时也可以缩小）：![无论行数如何，整个列表都应居中](../Images/d0ce92ce6f8f6e6dc246b97868fcf636.png)

设置宽度或最大宽度并使用`margin: auto`也不太有效：http: [//jsbin.com/ocokog/6/edit](http://jsbin.com/ocokog/6/edit)

**为什么不`ol`缩水？我怎样才能解决这个问题？**

* * *

这些问题相似但不同：

*   [在 div 或其 <ul> 内居中浮动列表项 <li>](https://stackoverflow.com/questions/6235938/centering-floating-list-items-li-inside-a-div-or-their-ul) - 在接受的答案中，所有列表项都居中
*   [我可以将 <ul> 与左对齐的 <li> 居中吗？](https://stackoverflow.com/questions/3355058/can-i-center-a-ul-with-left-aligned-lis)- 每个项目都有自己的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:51:28.957

`ol`居中。您已将其设置为`65%`宽度。如果在重新调整大小时查看橙色边框，它始终居中。

### 编辑

让我试着重新表述一下。 `ol`是块元素，就像 a`div`是块元素一样。这意味着它填满了它所在的空间。这在您的示例中由橙色边框表示。您想要的是`ol`占用不到 100% 的空间。有很多不同的方法，但你总是从列表开始尽可能多的空间。

其中一种方法是设置宽度。这个问题是你不想要一个固定的宽度。因此，您尝试使用百分比来设置宽度。这是行不通的，因为在许多间隔中，百分比会导致`li`不居中。

另一种方法是设置`ol`. 这与设置宽度相同。

只是没有办法在您也想要的元素中居中`float:left;`。我认为混淆是因为你认为你可以`ol`围绕`li`. 问题是，这不是`ol`工作方式。

# c# - 我在这个算法中缺少什么来找到可能跨越不同日子的两个 TimeSpan 之间的 TimeOfDay？

> ID：13885661
> 
> 赞同：6
> 
> 时间：2012-12-14T20:18:26.483
> 
> 标签：c#, .net, .net-4.0, timespan

我`List<T>`在一天 24 小时内有一个可用时间，还有两个`TimeSpans`minTime 和 maxTime。

我需要在 和 之间找到一天中的时间，`List<T>`但是由于它在多个时区中使用，minTime 和 maxTime 可以在不同的日子里，并且跨越像下午 1 点到第二天凌晨 1 点`minTime``maxTime`

我最接近的是这个，但我觉得我在这里遗漏了一些主要组件，或者因为我对这个`TimeSpan`对象相当陌生，所以做的事情效率很低。我就是想不通是什么...

```
// Make new TimeSpan out of maxTime to eliminate any extra days (TotalHours >= 24),
// then check if time on the MaxTime is earlier than the MinTime
if (new TimeSpan(maxTime.Hours, maxTime.Minutes, maxTime.Seconds) < minTime)
{
    // If time on MaxTime is earlier than MinTime, the two times span separate days,
    // so find first time after minTime OR before maxTime
    nextAvailableTime = Times.FirstOrDefault(p =>
        (p.Time.TimeOfDay >= minTime || (p.Time.TimeOfDay < maxTime))
        && p.Count < ConcurrentAppointments);
}
else
{
    // If time on MaxTime is later than MinTime, the two times are for the same day
    // so find first time after minTime AND before maxTime
    nextAvailableTime = Times.FirstOrDefault(p =>
        (p.Time.TimeOfDay >= minTime && p.Time.TimeOfDay < maxTime)
        && p.Count < ConcurrentAppointments);
} 
```

使用列表`Times`EST（我的当地时间），但是`minTime`和`maxTime`可以基于其他时区。

例如，如果我们针对夏威夷时区运行此算法，我们最终会得到`minTime = new TimeSpan(13, 0, 0)`和`maxTime = new TimeSpan(25, 0, 0)`，因为 8am - 8pm HST = 1pm - 1am EST。

`Times`集合是一个`List<AppointmentTime>`，并且是一个类，`AppointmentTime`如下所示：

```
class AppointmentTime
{
    DateTime Time { get; set; } 
    int Count { get; set; }
} 
```

我很确定我在这里遗漏了一些重要的东西，或者应该有一种我不知道的更有效的方法来做到这一点，但我真的想不出它会是什么。我的算法有问题吗？或者找到可能跨越不同日子的`TimeOfDay`两个更有效的方法？`TimeSpans`

**更新**

我根据[CasperOne 的回答](https://stackoverflow.com/a/13886096/302677)找出了我缺少的东西。我忘记了日期实际上很重要，因为我的时间跨越不同的时区。

使用我上面的夏威夷时区示例，在星期一安排约会会导致在星期日晚上错误地安排夏威夷约会。

我的解决方案是在为 24 小时的“第一个窗口”安排约会之前检查前一天是否有效，并通过`.AddDays(maxTime.Days)`比较来调整约会日期`maxTime`

```
// If time on MaxTime is earlier than MinTime, the two times span separate days,
// so find first time after minTime OR before maxTime if previous day has appointments set as well
var isPreviousDayValid = IsValidDate(AppointmentDate.AddDays(-1));

nextAvailableTime = Times.FirstOrDefault(p =>
    (p.Time.TimeOfDay >= minTime 
        || (p.Time.AddDays(maxTime.Days).TimeOfDay < maxTime && isPreviousDayValid)
    ) && p.Count < ConcurrentAppointments); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:54:14.133

总体思路是，不要比较*时间*，要比较*日期*；将您的窗口从时间转换为日期，剩下的就很容易了。

*您可以为列表中的每个*项目生成一组新[`DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)实例以比较最小值和最大值，使用该[属性](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)作为计算要比较的范围的上限的基础。*[`Date`](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)*

 *这假定您`minTime`总是小于`maxTime`，并且如果[您的窗口覆盖一天以上，您通过在](https://stackoverflow.com/questions/13885661/most-efficient-way-to-find-a-timeofday-between-two-timespan-values-that-may-span/13886096#comment19128422_13885661)[大于 24 小时的](https://stackoverflow.com/questions/13885661/most-efficient-way-to-find-a-timeofday-between-two-timespan-values-that-may-span#comment19128485_13885661)[`Hours`属性](http://msdn.microsoft.com/en-us/library/system.timespan.hours.aspx)值上表示重叠到新一天的范围。[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

*您必须查看前*一天和后一天是否有窗口。例如：

```
 (1)  (2)  (3)  (4)  (5)
----x----x----x----x----x----

(1) - 1/1/1900 11:00 PM - Date component in your list - 1 day + min time
(2) - 1/2/1900 12:05 AM - this is the date and time from your list
(3) - 1/2/1900 01:00 AM - Date component in your list - 1 day + max time
(4) - 1/2/1900 11:00 PM - Date component in your list + min time
(5) - 1/3/1900 01:00 AM - Date component in your list + max time 
```

这意味着您需要创建两个窗口并检查您的：

```
nextAvailableTime = Times.FirstOrDefault(p => {
    // Check count first, get this out of the way.
    if (!(p.Count < ConcurrentAppointments)) return false;

    // The date time and the date component
    DateTime dt = p.Time;
    DateTime d = dt.Date;

    // The windows
    DateTime prevWindowMin = d.AddDays(-1) + minTime;
    DateTime prevWindowMax = d.AddDays(-1) + maxTime;
    DateTime windowMin = d + minTime;
    DateTime windowMax = d + maxTime;

    // Is it in *either* window;
    return
        (prevWindowMin <= dt && dt <= prevWindowMax)||
        (windowMin <= dt && dt <= windowMax);
}); 
```

您的问题并不完全清楚，但如果一天中的时间*不是*列表`Date`中项目的组成部分，您可以替换*该*`p.Time`日期的`Date`组成部分（适当减去一天以创建窗口），它应该工作。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:54:49.033

@Rachel，您能否提供一个反例使其无法使用？

```
nextAvailableTime = Times.OrderBy(i => i.Time).FirstOrDefault(i => i.Count < ConcurrentAppointments &&
    i.Time.TimeOfDay >= minTime &&
    i.Time.TimeOfDay < maxTime
            ); 
```

**[编辑]**

因此，以下应该有效。我理解它的方式，问题是如何有效地找到最小`TimeOfDay`的`AppointmentTime`，遵循 和 之间的`TimeOfDay`最小值。对于 1,000,000 次迭代，Rachel 的代码运行时间约为 0.55 秒`minTime``maxTime`

```
var Times = new List<AppointmentTime>();
var ConcurrentAppointments = 10;
Times.AddRange(new[]{
    new AppointmentTime()
    {
        Count = 0,
        Time = new DateTime(2012, 12, 1, 1, 30, 0)
    },
    new AppointmentTime()
    {
        Count = 0,
        Time = new DateTime(2012, 12, 1, 13, 5, 0)
    },
    new AppointmentTime()
    {
        Count = 0,
        Time = new DateTime(2012, 12, 1, 11, 0, 0)
    }});

var minTime = new TimeSpan(13, 0, 0);
var maxTime = new TimeSpan(25, 0, 0);

// Version 1
// Not so performant, ~0.48 seconds for a loop of 1,000,000 iterations, see Version 2

//nextAvailableTime = Times.OrderBy(i => i.Time).FirstOrDefault(i => i.Count < ConcurrentAppointments &&
//    i.Time.TimeOfDay.TotalSeconds >= Math.Min(maxTime.TotalSeconds % (3600 * 24), minTime.TotalSeconds)
//    );

// Version 2
// Better performance, ~0.12 seconds for 1,000,000 iterations. We calculate the 
// constant value we are comparing with outside the lambda expression

// We calculate the `totalSeconds` variable as the minimum of seconds within the 
// 24h day. For that, we use the `% (3600 * 24)` operation to exclude the days.
var totalSeconds = (int)Math.Min(maxTime.TotalSeconds % (3600 * 24), minTime.TotalSeconds);

// We create a timespan variable called `timeOfDay` which is based on the
// `totalSeconds` variable above. Note that the day is not essential.
var timeOfDay = (new DateTime(1, 1, 1, totalSeconds / 3600, (totalSeconds % 3600) / 60, totalSeconds % 60)).TimeOfDay;

// Returns the `AppointmentTime` with the 01:30 AM. Note, again, that the 
// date of the `AppointmentTime` is not essential
nextAvailableTime = Times.FirstOrDefault(i => i.Count < ConcurrentAppointments &&
                i.Time.TimeOfDay >= timeOfDay
                ); 
```**

# visual-studio-2012 - Windows Azure 体系结构指南 - 第 2 部分 - 代码示例

> ID：13885662
> 
> 赞同：0
> 
> 时间：2012-12-14T20:18:27.043
> 
> 标签：visual-studio-2012, converter

我从这个 url 下载包：http: [//www.microsoft.com/en-us/download/details.aspx?id=27878](http://www.microsoft.com/en-us/download/details.aspx?id=27878) 我有 Visual Studio 2012，我想打开 sln。Visual Studio 2012 将 sln 2010 转换为 2012 但项目不兼容。

你对 VS 2012 有同样的项目吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:50:10.710

您指向的下载实际上与 VS2012 兼容，但是您必须首先确保从以下位置安装适用于 .NET 的 Windows Azure SDK：

[http://go.microsoft.com/fwlink/?LinkID=254364](http://go.microsoft.com/fwlink/?LinkID=254364)

这包括 VS2012 理解示例中包含的项目类型所需的位。

有关适用于 .NET 的 Azure SDK 的更多信息，请访问：http: [//www.microsoft.com/en-us/download/details.aspx?id=35448](http://www.microsoft.com/en-us/download/details.aspx?id=35448)

此外，请检查提取文件夹中的发行说明。它详细介绍了其他要求，例如 SQL Server、ASP.NET MVC 等。

# jquery - 如何在可排序列表中排除元素被拖动？

> ID：13885665
> 
> 赞同：40
> 
> 时间：2012-12-14T20:18:44.937
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

如何从可排序列表中排除元素？例如，有一个类名为“note”的元素我**不想**被**拖动**？

```
 <ul class="sortable">

            <li id="item_3">Item 3</li>
            <li id="item_4">Item 4</li>
            <li id="item_5">Item 5</li>

            <p class="note">This is a note only</p> 
   </ul> 
```

jquery ui 可排序，jquery`not`显然不起作用...

```
$(function() {
    $( ".sortable:not(.note)" ).sortable(
    }).disableSelection();
}); 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-14T20:32:05.620

您需要使用取消。

[请参阅此处](http://jsfiddle.net/Trufa/9KkWn/2/)的工作示例。

JS：

```
$(function() {
    $('.sortable').sortable();
    $('.sortable').disableSelection();
    $('.sortable').sortable({ cancel: '.note' });
});​ 
```

正如@Zephyr 指出的那样，这让您可以通过拖动兄弟姐妹来重新排列位置，如果您想避免这种情况，请使用[owise1 方法](https://stackoverflow.com/a/17710365/463065)：

```
$('.sortable').sortable({
    items : ':not(.note)'
}); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-07-17T21:15:27.727

您可以使用 sortable 的“ [items](http://api.jqueryui.com/sortable/#option-items) ”选项：

```
$( ".sortable" ).sortable({
    items : 'li'
}); 
```

[例子](http://jsfiddle.net/owise1/kK5ky/)

或者...

```
$( ".sortable" ).sortable({
    items : ':not(.note)'
}); 
```

[例子](http://jsfiddle.net/owise1/T7FmK/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-17T14:55:38.137

您可以通过以下方式明确排除项目：

```
$( ".sortable" ).sortable({
     cancel: ".disable-sorting"
}); 
```

# c++ - 如何测试解决“鲜花”采访街挑战的算法

> ID：13885667
> 
> 赞同：2
> 
> 时间：2012-12-14T20:19:00.010
> 
> 标签：c++, algorithm

我在 InterviewStreet 解决挑战“鲜花”：

> 你和你的 K-1 朋友想买 N 朵花。花号 i 有宿主 ci。不幸的是，卖家不喜欢客户购买大量鲜花，因此他试图为之前购买过鲜花的客户更改鲜花价格。更准确地说，如果客户已经购买了 x 朵花，他应该支付 (x+1)*ci 美元来购买第 i 朵花。
> 
> 您和您的 K-1 朋友想要以尽可能少的钱购买所有 N 朵花的方式。

但我的解决方案未能通过测试用例：3、5 和 7，所以我的得分为 7/10。

我已经彻底测试了我的代码，它一直在给我正确的答案，所以我不明白为什么我没有在这个挑战中获得满分。

基本上我的做法是，如果买花的朋友多或相等，我会退还花的价格总和。

如果要买的花比朋友多，那么我会按降序（从贵到便宜）对鲜花的价格进行排序，让朋友一次买一朵。

```
typedef unsigned long long int uint64;
uiRemainder = n % k;

    sort(viFlowersCost.begin(), viFlowersCost.end(), greater<int>()); //Sorted Array Descending

    if(uiRemainder == 0) {
            for(a = 0; a < n; a+=k) {
                    for(b = 0; b < k; ++b) {
                            ui64Result += (x+1)*viFlowersCost[a+b];
                    }
            ++x;
            }
    } else {
            for(a = 0; a < (n/k)*k; a+=k) {
                    for(b = 0; b < k; ++b) {
                            ui64Result += (x+1)*viFlowersCost[a+b];
                    }   
                    ++x;
            }   
            for(b = 0; b <= uiRemainder; ++b) {
                    ui64Result += (x+1)*viFlowersCost[a+b];
            }   
    }   

    cout<<ui64Result; 
```

我的问题是：考虑到以下限制，哪些输入会使我的程序抛出不正确的答案：

约束：

> 1 <= N, K <= 100
> 
> 每朵花不超过1,000,000

我已经测试了极端情况：

N = 99 K = 100 和 100 朵花，价格在 900,000 - 1,000,000 之间，它仍然给了我正确的答案。

例如下面的测试用例：

> 99 100
> 
> 916807 972425 933847 933809 997490 906570 926534 936300 963336 917637 956205 927011 966648 942300 906839 911128 967915 931564 970607 941177 935338 918421 905061 977177 911389 959618 991125 966236 942883 980278 979549 991459 907876 928248 908003 970585 967394 962906 915297 950976 906662 989573 985875 903158 911494 990185 911664 975093 934338 976986 918541 910894 911602 952041 907953 967915 977677 982920 990006 959603 908295 943832 917462 911173 976614 996246 935262 945460 987876 973350 949546 930732 922685 988390 912489 979841 918856 953461 923072 985130 906338 917402 975289 931717 927872 920676 914295 994827 997989 975217 977181 914545 991968 935860 994059 913399 927867 912266 948655 944224

我的程序输出：

> 93697342

根据采访街哪个是正确答案

# objective-c - AFHTTPRequestOperation 不会调用成功或失败块的可能场景有哪些？

> ID：13885669
> 
> 赞同：2
> 
> 时间：2012-12-14T20:19:06.383
> 
> 标签：objective-c, ios, networking, afnetworking

在 iOS 项目上工作，使用 AFNetworking 构建它，发现对于某些请求，AFHTTPRequestOperation 不会调用成功或失败块。

具体情况是当我们尝试下载服务器中不存在的 pdf 文件时：

[http://www.consejotransparencia.cl/data_casos/ftp_casos/C911-12/C911](http://www.consejotransparencia.cl/data_casos/ftp_casos/C911-12/C911) -12_Decisión_Web.pdf

AFHTTPRequestOperation 最终什么都不做，应用程序卡住了。

目标是处理此错误，而不是让应用程序卡住。

任何人都知道如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:21:05.217

也许“ó”字符是问题...尝试使用另一个文件名...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:46:32.263

尝试为您的`NSURLRequest`?

初始化你`NSURLRequest`的`initWithURL:cachePolicy:timeoutInterval:`

```
// sample initialization
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:myURL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30.0]; // 30 seconds timeout interval.
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request]; 
```

看看[这个](https://stackoverflow.com/questions/1252669/handling-a-nsurlrequest-with-timeout-when-using-delegate)处理超时。

# jquery - 网站不适合 Ipad 和 iPhone

> ID：13885678
> 
> 赞同：2
> 
> 时间：2012-12-14T20:19:43.927
> 
> 标签：jquery, html, css

[这是网站：](http://www.canal.es)

问题是屏幕不适应视口（首次加载时两侧没有白边距），并且如果您缩小并查看整个页面，也会产生一个奇怪的大白边距。

我正在使用这个标签来尝试实现但仍然没有太多工作：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, user-scalable=yes">
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

这是我的CSS：

```
body {
background-color:#fff;
font-family:'Droid Sans', arial, sans-serif;
color: #777;
width: 100%;
margin:  0;
}
#page {
width: 950px;
margin: 0px auto;
padding:0px;
background-color:#fff;
z-index: 0;
} 
```

任何想法我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T20:29:49.457

你需要的是一种叫做 CSS 媒体查询的东西。基本上，您为特定的屏幕尺寸创建不同的 CSS 规则。例如

```
@media screen and (max-width: 700px) and (min-width: 520px) {
  body {
    background: red;
  }
} 
```

每当您的浏览器窗口/屏幕宽度大于 520 像素且小于 700 像素时，会将主体背景设置为红色。

尝试在谷歌上搜索“CSS 媒体查询”和“响应式设计”，这将为您指明正确的方向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:16:09.350

您的问题似乎是您的幻灯片和`viewport`标签：

`#slideshow`设置为`width:1083px;`哪个会导致您网站右侧的空白。将其更改为`100%`，这将解决它。即使溢出设置为`hidden`元素

`initial-scale=1.0`是最初加载时的大小。它以 1:1 的像素比率加载，并且没有按比例缩小以查看整个页面。

`width=device-width`正在将页面的宽度设置为设备的宽度，在 iPhone 的 Mobile Safari 上为 320 像素。如果您将其更改为类似`width=950`的内容，则会将视口的宽度设置为等于您网站的宽度，即 950 像素。这将允许用户一直向外扩展并查看站点的整个宽度。Safari 会在页面底部添加空格。

# android - 卡在 android facebook 教程

> ID：13885684
> 
> 赞同：0
> 
> 时间：2012-12-14T20:20:09.727
> 
> 标签：android, facebook

我正在关注 android 教程：http: [//developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/)

并且此行发生错误：

```
new WebDialog.FeedDialogBuilder(getActivity(), 
```

MainActivity 类型的方法`getActivity()`未定义。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:21:09.323

采用

```
new WebDialog.FeedDialogBuilder(MainActivity.this, 
```

代替

```
new WebDialog.FeedDialogBuilder(getActivity(), 
```

因为在示例链接中，他正在使用 Fragment 。在 Fragment [getActivity ()](http://developer.android.com/reference/android/app/Fragment.html#getActivity%28%29) return *Activity 的情况下，此片段当前与之关联*

# extjs - EXT JS 4：不重新加载商店

> ID：13885686
> 
> 赞同：3
> 
> 时间：2012-12-14T20:20:16.147
> 
> 标签：extjs, extjs4, extjs-stores

我有一个`TreeStore`，它最初成功地从一个 json 文件加载它的数据：

```
Ext.define('MM.store.InventoryTree', {
    extend: 'Ext.data.TreeStore',
    requires: 'MM.model.InventoryTree',
    model:'MM.model.InventoryTree',       
    proxy: {
        type: 'ajax',
        api: {
            read : 'json/inventorytree.json'
        },
        root: {
            text: 'Countries',
            expanded: true
        }
    }
}); 
```

我已经尝试了几件事，下面的函数对我来说很有意义，但是有些东西阻止了它实际重新加载。

```
onReloadButtonClick: function(){                
        var store = Ext.getCmp('InventoryTree').getView().getStore();
        store.removeAll(); // this works!
        store.reload(); // this is executed, but nothing happened (no network traffic)
} 
```

也许它加载了它的数据，但视图阻止它显示？我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:50:31.687

可能缺少 ExtJS： [http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-method-reload](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-method-reload)

> 看起来这个 [reload] 方法在 4.1.0 中被取消，但在 4.1.1 中又回来了

您使用的是 4.1.1 吗？

您确定正在执行重新加载吗？如果您在重新加载行之后发出警报，它会显示吗？

# php - 使用 $_GET 重定向用户

> ID：13885688
> 
> 赞同：0
> 
> 时间：2012-12-14T20:20:35.197
> 
> 标签：php, redirect, get

我有一个 php 页面**“view.php”**

但我不希望任何人通过点击或手动输入 www.domain.com/view.php 来直接查看页面，它必须来自 index.php 正在经历一些过程。IE

```
index.php ==> view.php/id=$$$ 
```

我试过**$_SERVER['REQUEST_URI'];**

```
if ($_SERVER['REQUEST_URI'] =='www.domain.com/view.php')
header("location: index.php"); 
```

但没有工作..

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:28:29.623

$_SERVER["REQUEST_URI"] 返回站点根相对路径，即“/view.php”或“/folder/file.php”。所以你的代码应该是`if ($_SERVER["REQUEST_URI"] == "/view.php") { /* ... */ }`. 还建议放置`exit();`在重定向标头之后，以防止后续代码执行。

您也可以像这样使用 $_SERVER["HTTP_REFERER"]`if(!$_SERVER["HTTP_REFERER"] == "http://www.your-domain.com/index.php") { /* ... */ }`

有关详细信息，请参阅[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:30:09.537

尝试使用 POST 变量通过 index.php 文件中的表单发送它

```
<form action="view.php" method="post">
<input type="hidden" vaue="test" name="KEY"/>
</form> 
```

在你的 view.php

```
if(isset($_POST['key'])){
//LOAD FILE
} 
```

虽然有不同的解决方案

# c++ - Boost::spirit 无法识别可选表达式

> ID：13885691
> 
> 赞同：1
> 
> 时间：2012-12-14T20:20:46.683
> 
> 标签：c++, parsing, boost-spirit

我正在学习如何使用[boost::spirit](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/index.html)，即使使用非常简单的解析器，我也面临一些问题。我正在尝试构建一个解析器，它接受由冒号分隔的数字列表（只有 0 或 1）。该列表可以有 3 位或 4 位数字。因此，`0:0:0`并且`1:0:1:0`是有效的，而例如`0:0`或`0:0:0:0:0`不是。

在下面的代码中，您可以看到我如何使用可选运算符来指定第一个数字可能存在或不存在。但是，它不起作用（对 sequence 的解析失败`0:0:0`）。代码有什么问题吗？我会说这是正确的，但我还是刚刚开始学习 Spirit。

```
#include <boost/spirit/include/qi.hpp>

namespace qi = boost::spirit::qi;
namespace phoenix = boost::phoenix;

void parse_tuple(const std::string& tuple) {
    using qi::char_;

    auto begin = tuple.begin();
    auto end = tuple.end();

    bool r = qi::parse(begin, end,
            -(char_('0', '1') >> ':') >> 
              char_('0', '1') >> ':' >>
              char_('0', '1') >> ':' >>
              char_('0', '1')
            );
    if (!r || begin != end)
        throw std::runtime_error("wrong format");
}

int main() {
    parse_tuple("0:0:0"); // It fails for this one
    parse_tuple("0:0:0:0");

    try { parse_tuple("0:0"); } catch (...) {
        std::cout << "expected error\n"; }
    try { parse_tuple("0:0:0:0:0"); } catch (...) {
        std::cout << "expected error\n"; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:50:09.143

这里

> ```
> bool r = qi::parse(begin, end,
>         -(char_('0', '1') >> ':') >> 
>           char_('0', '1') >> ':' >>
>           char_('0', '1') >> ':' >>
>           char_('0', '1')
>         ); 
> ```

可选的 char_ 应该是最后一个而不是第一个。这些规则是按顺序应用的，因此当您解析“0:0:0”时，代码的第一行（可选内容）通过了测试，然后您的规则需要跟随 3 位数字，而不是 2 位。

在我看来，您应该只使用 % 运算符来匹配一个列表，然后检查您是否解析了 3 个或 4 个元素。

**编辑** 或使用[qi::repeat](http://www.boost.org/doc/libs/1_45_0/libs/spirit/doc/html/spirit/qi/reference/directive/repeat.html)来提高可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:31:34.150

这将是最直接的解决方案：

```
bool r = qi::parse(begin, end,
        char_("01") > ':' >
        char_("01") > ':' >
        char_("01") > -(':' > char_("01"))
        ); 
```

完整示例**[http://liveworkspace.org/code/3U0QJW$0](http://liveworkspace.org/code/3U0QJW%240)**：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi = boost::spirit::qi;

void parse_tuple(const std::string& tuple) {
    using qi::char_;

    auto begin = tuple.begin();
    auto end = tuple.end();

    bool r = qi::parse(begin, end,
            char_("01") > ':' >
            char_("01") > ':' >
            char_("01") > -(':' > char_("01"))
            );
    if (!r || begin != end)
        throw std::runtime_error("wrong format");
}

int main() {
    parse_tuple("0:0:0"); // It fails for this one
    parse_tuple("0:0:0:0");

    try { parse_tuple("0:0"); } catch (...) {
        std::cout << "expected error\n"; }
    try { parse_tuple("0:0:0:0:0"); } catch (...) {
        std::cout << "expected error\n"; }
} 
```

# search - 如何使用嵌入 url 跟踪所有在线嵌入视频的网页？

> ID：13885695
> 
> 赞同：-1
> 
> 时间：2012-12-14T20:20:51.627
> 
> 标签：search, reverse, web-crawler

如何使用嵌入 url 跟踪所有在线嵌入视频的网页？

是否有任何搜索引擎会在网页中抓取源代码中嵌入 url 链接的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:03:53.333

**关于“如何跟踪网页”：**

要找出这个 url 嵌入了哪些网页，您需要查看所有这些网页。因此，使用您自己的资源（例如脚本和您的网络连接）执行此操作很可能难以处理。（除非你手头有一个非常大的服务器场。）

**关于“是否有搜索引擎”：**

我怀疑大公司是否会给他们的数据提供这种访问权限，但我不确定。

# php - PHP 返回正确数据，但 AJAX/JQuery 调用不包含 JSON 对象

> ID：13885701
> 
> 赞同：0
> 
> 时间：2012-12-14T20:21:34.140
> 
> 标签：php, javascript, jquery, ajax

你好逻辑思想家！！，我试图从一个用 PHP 编写的函数调用返回的数组中返回一个 JSON 对象。昨天它正在返回对象，但不知何故我设法打破了它。如果有人可以请帮助我将不胜感激。下面是我的 Javascript 和 PHP 中列出的代码......再次感谢可能提供的任何帮助。

--PHP--

```
<?php
class FileSel{

public $event;
public $posUsr;
public $posPass;
public $posAddr;
public $scUsr;
public $scPass;
public $scAddr;
public $cclUsr;
public $cclPass;
public $confName;

//Variable used to hold the connection
var $scp;
//Variable used to hold the final list of files to be displayed to the user to choose from
var $List = array();
//Variable used to hold the list of possible SC files
var $SCFiles = array();
//Variable used to hold the list of possible POS files
var $POSFiles = array();
//Variable used to hold the list of possible CCL files
var $CCLFiles = array();

function __construct(){
    $this->debug = new debug();
}

public function execute(){
    $this->debug->putLog("Made it to FileSel->execute()\n");
    return new Response(true, "Build List executed", json_encode($this->buildList()));
}

public function load_post_data(){
    $this->debug->putLog("Made it to FileSel->load_post_data()\n");
    $this->event = $_POST['event'];
    $this->posUsr = $_POST['pos_user'];
    $this->posPass = $_POST['pos_password'];
    $this->posAddr = $_POST['pos_address'];
    $this->scUsr = $_POST['sc_user'];
    $this->scAddr = $_POST['sc_address'];
    $this->cclUsr = $_POST['ccl_user'];
    $this->cclPass = $_POST['ccl_password'];
    $this->confName = $_POST['confName'];

    if( strlen($this->event) <= 0) return false;
    if( strlen($this->posAddr) <= 0) return false;
    if( strlen($this->posUsr) <= 0) return false;
    if( strlen($this->posPass) <= 0) return false;
    if( strlen($this->scAddr) <= 0) return false;
    if( strlen($this->scUsr) <= 0) return false;
    if( strlen($this->scPass) <= 0) return false;
    if( strlen($this->cclUsr) <= 0) return false;
    if( strlen($this->cclPass) <= 0) return false;
    if( strlen($this->confName) <= 0) return false;

    return true;
}

public function buildList(){
    $this->debug->putLog("Made it to FileSel->buildFileArray()\n");    
    //Build a list of files from the POS
    $this->listPOSFiles();
    //Build a list of files from the SC
    $this->listSCFiles();
    //Build a list of files from the CCL
    $this->listCCLFiles();
    $this->debug->putLog("Building final file list\n");
    //Variable used to keep track of index of final list
    $j=0;

    //Here we are adding POS files to the final list
    foreach($this->POSFiles as $file){
        $this->List[$j] = $file;
        $this->debug->putLog("Added POS File: $file to final file list\n");
        $j++;
    }

    //Here we are adding POS files to the final list
    foreach($this->SCFiles as $file){
        $this->List[$j] = $file;
        $this->debug->putLog("Added SC File: $file to final file list\n");
        $j++;
    }

    //Here we are adding POS files to the final list
    foreach($this->CCLFiles as $file){
        $this->List[$j] = $file;
        $this->debug->putLog("Added CCL File: $file to final file list\n");
        $j++;
    }

    return $this->List;
    }
    }

?> 
```

--Javascript--

```
function displayDialog(){
    //console.log("Made it to displayDialog");
    var fileData = {
        "event" : "createFileSelectDialog",
        "pos_address" : file_pos_address,
        "confName" : file_confName,
        "pos_user" : file_pos_user,
        "pos_password": file_pos_password,
        "ccl_user" : file_ccl_user,
        "ccl_password": file_ccl_password,
        "sc_address" : file_sc_address,
        "sc_user" : file_sc_user,
        "sc_password": file_sc_password
    };

    $.ajax({
        url: './lib/app.php',
        data:  fileData,
        type: 'POST',
        dataType : 'json',
        success: function(data){
            console.log(data);
            alert("Data Loaded: " + data);
        },
        complete: function(data) {
            console.log(data);
            }
        });
    } 
```

如果我可以提供任何其他有助于解决此问题的信息，请告诉我，我会发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:57:36.843

我不熟悉 Response 类；你在使用框架吗？如果是这样，我会查看源代码，看看调用它的构造函数时会发生什么。例如，它是否会自动打印第三个参数以输出，或者您是否必须在实例化对象上手动打印属性或方法，或者可能会返回输出文本？根据功能的不同，它可以简单到将“return new Responce(...)”替换为“echo new Response(...)”。

# c# - 对包含扩展器的分组 ListView 进行排序

> ID：13885704
> 
> 赞同：2
> 
> 时间：2012-12-14T20:21:49.277
> 
> 标签：c#, wpf, listview

我正在使用流行的代码对列表视图项进行排序和分组。排序和分组工作完美。问题是当用户单击列标题进行排序时，所有组都变成即展开或折叠（这取决于 Expander IsExpanded="False"） 我需要的是对列进行排序，使展开器处于当前状态：一些展开，一些折叠. 我还检查了一些示例项目，但它们都有相同的行为。有什么想法，可行吗？提前致谢！

```
<ListView.GroupStyle>
                                <GroupStyle>
                                    <GroupStyle.ContainerStyle>
                                        <Style TargetType="{x:Type GroupItem}">
                                            <Setter Property="Margin" Value="0,0,0,5"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                                        <Expander IsExpanded="False" BorderBrush="#FFA4B97F" 
                                  BorderThickness="0,0,0,1" >
                                                            <Expander.Header>
                                                                <DockPanel>
                                                                    <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" 
                                 Margin="5,0" Width="Auto"/>
                                                                    <TextBlock FontWeight="Bold" 
                                 Text="{Binding Path=ItemCount}"/>
                                                                    <TextBlock FontWeight="Bold" Text=" Items"/>
                                                                </DockPanel>
                                                            </Expander.Header>
                                                            <Expander.Content>
                                                                <ItemsPresenter />
                                                            </Expander.Content>
                                                        </Expander>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </GroupStyle.ContainerStyle>
                                </GroupStyle>
                            </ListView.GroupStyle>

ICollectionView view = CollectionViewSource.GetDefaultView(dataSet.Tables[0]);
                view.GroupDescriptions.Add(new PropertyGroupDescription("NameOfColumnForGrouping"));
                listViewOpportunitiesHistory.ItemsSource = view; 
```

排序：

```
listViewOpportunitiesHistory.Items.SortDescriptions.Add(new SortDescription(field, newDir)); 
```

这是我解决问题的方法：

```
<ListView  x:Name="listViewOpportunitiesHistory" ItemsSource="{Binding}" AlternationCount="2" 
                              IsTextSearchEnabled="False" IsSynchronizedWithCurrentItem="True"   >
            <ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Margin" Value="0,0,0,5"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                        <Grid x:Name="grid_ControlTemplate_listViewOpportunitiesHistory"  Loaded="grid_ControlTemplate_listViewOpportunitiesHistory_Loaded">
                                            <Expander  BorderBrush="#FFA4B97F" BorderThickness="0,0,0,1"  
                                                                   x:Name="expanderControlTemplate" Expanded="expanderExpandCollapse_Expanded" Collapsed="expanderExpandCollapse_Collapsed" >
                                                <Expander.Header>
                                                    <DockPanel>
                                                        <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" 
                                 Margin="5,0" Width="Auto"/>
                                                        <TextBlock FontWeight="Bold" 
                                 Text="{Binding Path=ItemCount}"/>
                                                        <TextBlock FontWeight="Bold" Text=" Items"/>
                                                    </DockPanel>
                                                </Expander.Header>
                                                <Expander.Content>
                                                    <ItemsPresenter />
                                                </Expander.Content>
                                            </Expander>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </ListView.GroupStyle>
            <ListView.View>
                <GridView>
                    <GridView.Columns>      
                       <GridViewColumn Width="Auto" x:Name="listViewOpportunitiesHistoryColumn_Time"  >
                            <GridViewColumnHeader Click="SortClickHistory" Tag="Time"  Content=" Time "  x:Name="listViewOpportunitiesHistoryColumnHeader_Time"  />
                            <GridViewColumn.CellTemplate >
                                <DataTemplate>
                                    <Border BorderBrush ="Gray" BorderThickness="0,0,1,0" Margin="-6,0,-6,0">
                                        <Grid Margin="6,0,6,0" >
                                            <TextBlock Text="{Binding Path=Time, StringFormat='yyyy-MM-dd HH:mm:ss.fff'}" Grid.Column ="0" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" HorizontalAlignment="Left" ToolTipService.ToolTip="{Binding Path=Time}" />
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                       <GridViewColumn Width="Auto" x:Name="listViewOpportunitiesHistoryColumn_AOValue"  >
                            <GridViewColumnHeader Click="SortClickHistory" Tag="AOValue"  Content=" AO Value "  x:Name="listViewOpportunitiesHistoryColumnHeader_AOValue"  />
                            <GridViewColumn.CellTemplate >
                                <DataTemplate>
                                    <Border BorderBrush ="Gray" BorderThickness="0,0,1,0" Margin="-6,0,-6,0">
                                        <Grid Margin="6,0,6,0" >
                                            <TextBlock Text="{Binding Path=AOValue}" Grid.Column ="0" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" HorizontalAlignment="Left" ToolTipService.ToolTip="{Binding Path=AOValue}" />
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>       
                    </GridView.Columns>
                </GridView>
            </ListView.View>  
        </ListView> 
```

后面的代码：

```
private Dictionary<string, bool?> expandStates = new Dictionary<string, bool?>();
        private void grid_ControlTemplate_listViewOpportunitiesHistory_Loaded(object sender, RoutedEventArgs e)
        {
            var grid = (Grid)sender;
            var dc = grid.DataContext as CollectionViewGroup;
            var groupName = (string)dc.Name.ToString();

            //If the dictionary contains the current group, retrieve a saved state of the group
            if (this.expandStates.ContainsKey(groupName))
            {
                var expander = (Expander)grid.FindName("expanderControlTemplate");
                //btn.IsExpanded = this.expandStates[groupName];
                if (this.expandStates[groupName] == true)
                {
                    expander.IsExpanded = true;
                }
                if (this.expandStates[groupName] == false)
                {
                    expander.IsExpanded = false;
                }

            }     
        }     
        private void expanderExpandCollapse_Collapsed(object sender, RoutedEventArgs e)
        {
            var expander = (Expander)sender;
            var dc = (CollectionViewGroup)expander.DataContext;
            var groupName = (string)dc.Name.ToString();

            //Loaded event is fired earlier than the Click event, so I'm sure that the dictionary contains the key
            this.expandStates[groupName] = expander.IsExpanded; //Save the current state
        }
        private void expanderExpandCollapse_Expanded(object sender, RoutedEventArgs e)
        {
            var expander = (Expander)sender;
            var dc = (CollectionViewGroup)expander.DataContext;
            var groupName = (string)dc.Name.ToString();

            //Loaded event is fired earlier than the Click event, so I'm sure that the dictionary contains the key
            this.expandStates[groupName] = expander.IsExpanded; //Save the current state
        } 
```

我从 DataSet 获取数据：

```
ICollectionView view = CollectionViewSource.GetDefaultView(dataSet.Tables[0]); 
 view.GroupDescriptions.Add(new PropertyGroupDescription(FXH.string_GroupBy_OpportunitiesHistory));
 listViewOpportunitiesHistory.ItemsSource = view; 
```

此解决方案基于[WPF ListBox 中的排序和分组 ListItems-GroupItem 折叠和展开](https://stackoverflow.com/questions/4986255/sort-and-group-listitems-in-a-wpf-listbox-groupitem-collapse-and-expand)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:34:11.270

如果您希望每个组的扩展器保存其**IsExpanded**属性，则必须使用数据绑定，或者您必须对**视图**（扩展器本身）进行排序。我认为第一种方法很容易实现。**您需要用于组集合的布尔**值的镜像集合。在 xaml 中，您应该与转换器绑定：

```
<Expander IsExpanded="{Binding Converter={StaticResource MyOwnConverter}}" 
          BorderBrush="#FFA4B97F" 
          BorderThickness="0,0,0,1" >
    <Expander.Header>
        <DockPanel>
            <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" 
                       Margin="5,0" Width="Auto"/>
            <TextBlock FontWeight="Bold" 
                       Text="{Binding Path=ItemCount}"/>
            <TextBlock FontWeight="Bold" Text=" Items"/>
        </DockPanel>
    </Expander.Header>
    <Expander.Content>
        <ItemsPresenter />
    </Expander.Content>
</Expander> 
```

在转换器内部，您可以存储对 ViewModel（或仅对**ICollectionView**）的引用，并存储每个组的当前**IsExpanded**状态并使用它来了解要返回的值。您还应该小心处理**CollectionChanged**事件（如果您的集合在运行时发生更改），以添加或删除组的状态。

# asp.net-mvc - MVC 4控制器中多态数组的JSON反序列化

> ID：13885708
> 
> 赞同：1
> 
> 时间：2012-12-14T20:22:40.553
> 
> 标签：asp.net-mvc, serialization, polymorphism, json.net, deserialization

我使用 MVC 4 我的 ActionController 接收以下 Json：

```
{
    "MainId": 1,
    "Actions": [
        {
            "Attribute1ClassA": 1,
            "Attribute2ClassA": 2
        },
        {
            "Attribute1ClassB": 3,
            "Attribute2ClassB": 4
        },
        {
            "Attribute1ClassC": 5
        }
    ]
} 
```

和控制器：

```
[HttpPost]
public ActionResult Commit(ActionsSummaryViewModel summary)
{
//DO stuff
} 
```

和类声明：

```
public ActionsSummaryViewModel
{
    public int MainId {get;set;}
    public IList<MainClass> {get;set;}
}

public class MainClass
{
}

public class ClassA : MainClass
{
   public int Attribute1ClassA {get;set;}
   public string Attribute2ClassA {get;set;}
}

public class ClassB : MainClass
{
   public int Attribute1ClassB {get;set;}
   public string Attribute2ClassB {get;set;}
}

public class ClassC : MainClass
{
   public int Attribute1ClassC {get;set;}
} 
```

那么现在，当动作控制器接收到 JSON 时，我如何管理 MainClass 的反序列化？因为当我调用该操作时，列表项为空。

如果解决方案的一部分是 Json.NET，我如何为 MVC 4 控制器实现？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:36:22.613

您需要一个属性或一组属性，您可以从中确定要使用该方法的类的类型。使用 JSON.NET，我将传入的 JSON 反序列化为动态对象，然后检查公共属性，确定类型，并使用我的模型类型再次反序列化该类型的值：

```
// I'm assuming here you've already got your raw JSON stored in 'value'
// In my implementation I'm using the Web API so I use a media formatter,
// but the same principle could be applied to a model binder or however 
// else you want to read the value.

dynamic result = JsonConvert.DeserializeObject(value);
switch ((string)result.type)
{
case "typeone":
return JsonConvert.DeserializeObject<ModelOne>(value);
// ...
default: return null;
} 
```

这里有一点额外的开销，因为您要反序列化两次，但在大多数情况下对我来说这是值得的，因为它很容易理解正在发生的事情并根据需要添加新类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T19:01:21.930

您可以使用[Json.NET](http://james.newtonking.com/projects/json-net.aspx)将 JSON 解析为动态对象：

```
using Newtonsoft.Json.Linq:

dynamic data = JObject.Parse("{ 'Name': 'Jon Smith', 'Address': { 'City': 'New York', 'State': 'NY' }, 'Age': 42 }");

string name = data.Name;
string address = data.Address.City; 
```

# asp.net-mvc - 使用存储库模式、实体框架、mvc 的查询太多

> ID：13885710
> 
> 赞同：0
> 
> 时间：2012-12-14T20:22:47.630
> 
> 标签：asp.net-mvc, vb.net, entity-framework, repository-pattern

我仍然有一个问题，但在人们的帮助下，我越来越接近了。

我使用 EF Profiler，我看到当我加载仪表板控制器时，它正在运行许多查询，这些查询“基本上”从数据库中拉回相同的数据。这是我的控制器示例：

```
Public Class DashboardController
    Inherits BaseController

    Private ticketRepo As MaintenanceTicketsRepository

    Public Sub New()
        Me.ticketRepo = New MaintenanceTicketsRepository(New TicketContext)
    End Sub

    Function Chart_OpenItemsByPM() As ActionResult
        Dim tickets As IList(Of MaintenanceTicket) = ticketRepo.GetAll().Include(Function(p) p.Priority).Include(Function(s) s.Status).OrderBy(Function(o) o.PriorityId).ToArray()

        Dim queue As PieChartViewModel() = Mapper.Map(Of MaintenanceTicket(), PieChartViewModel())(tickets)

        Dim ticketCounts = From t In queue _
                           Where t.StatusName = "Open" And _
                           t.PriorityName <> "Not Ready" _
                           Group t By t.PriorityName Into Count() _
                           Select New With {
                               .PriorityName = PriorityName,
                               .Id = Count,
                               .Explosion = If(.PriorityName = "Critical", "True", "False")
                           }

        Return Json(ticketCounts)
    End Function

    Function Grid_OpenItemsByPriority(<DataSourceRequest()> request As DataSourceRequest) As ActionResult
        Dim tickets As IList(Of MaintenanceTicket) = ticketRepo.GetAll().Include(Function(p) p.Priority).Include(Function(s) s.Status).ToArray()

        Dim queue As GridViewModel() = Mapper.Map(Of MaintenanceTicket(), GridViewModel())(tickets)

        Dim ticketCounts = From t In queue _
                           Where _
                           t.StatusId = 1 And _
                           t.CreateDate.Year = Convert.ToDateTime(DateTime.Now).Year _
                           Group t By _
                           Column1 = CType(t.CreateDate.Month, Integer), _
                           Column2 = CType(t.CreateDate.ToString("MMMM"), String) _
                           Into g = Group _
                           Order By Column1 _
                           Select New With {
                               .Id = Column1,
                               .Month = Column2,
                               .Critical = g.Count(Function(t) t.PriorityId = 1),
                               .High = g.Count(Function(t) t.PriorityId = 2),
                               .Normal = g.Count(Function(t) t.PriorityId = 3),
                               .Low = g.Count(Function(t) t.PriorityId = 4),
                               .NotReady = g.Count(Function(t) t.PriorityId = 5),
                               .Total = g.Count(Function(t) t.Id <> Nothing)
                           }

        Return Json(ticketCounts.ToDataSourceResult(request))
    End Function

    Protected Overrides Sub Dispose(disposing As Boolean)
        ticketRepo.Dispose()
        MyBase.Dispose(disposing)
    End Sub
End Class 
```

你会看到有一些函数（通过 ajax 调用到 Kendo Controls 中）但是每个函数都会填充存储库，然后将数据映射到我的视图模型中，然后我需要进行排序并执行真正的过程以获得最终输出. 我在每个函数中都这样做，并且我的页面上的加载时间很长，并且它正在刺激服务器。

关于如何通过一个查询加载 repo 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:50:17.153

我最终使用存储过程来限制返回到我的存储库的数据，从而加快数据访问速度。

# html - 桌面浏览器上的jquery移动按钮

> ID：13885711
> 
> 赞同：0
> 
> 时间：2012-12-14T20:22:48.590
> 
> 标签：html, jquery-mobile

是否可以将某些按钮的 jquery 移动外观和感觉添加到桌面浏览器上？

我包含了 jquery 移动 css 和 js 文件，当我单击按钮时，它正在做一些幕后工作，实际上并没有把我带到我的目的地。当我删除 JS（桌面上出现奇怪行为的原因）时，按钮不会按我想要的方式呈现。

理想情况下，我只想看到呈现按钮的纯 css 和简化的 JS，以便我可以将其添加到我的桌面布局中，如果可以以某种方式这样做，那将适用于我的目的。

我真的不想挖掘所有的 jquery 移动 js 文件并弄清楚那里发生了什么来拼凑这些。

我怎样才能减少我需要在桌面上呈现的按钮与没有移动设备功能的移动设备相同的外观/感觉。

**编辑以下答案：**

这就是我现在在我的桌面页面上调用的内容：

```
<link href="/Content/jquery.mobile.custom.structure.min.css" rel="stylesheet" type="text/css" />
<link href="/Content/jquery.mobile.custom.min.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="/content/mobile/themes/LS.min.css" />
<script src="/Scripts/jquery.mobile.custom.min.js"></script> 
```

并像这样调用按钮：

```
 <a data-role="button" data-theme="a" href="/home/foldit" data-icon="star">
                Fold It
        </a> 
```

这显示了我的按钮的文本表示，而不是呈现按钮。我没有从包中包含的唯一文件是“自定义主题”css 文件，因为我认为我的主题应该替换它。（LS.min.css 文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:29:18.650

对的，这是可能的。

您可以重建 jQuery 移动框架并只使用想要的模块。

去这里： http: [//jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)并只选择你想要的。

```
*We’ve decoupled all of our plugins and have a clear dependency map which allows us to offer the download builder tool (Alpha) to let you build the leanest package possible.* 
```

它仅适用于 jQM 1.1.1 到 1.2

# cocoa - 创建类似于 NSPopOver 的动画

> ID：13885715
> 
> 赞同：1
> 
> 时间：2012-12-14T20:23:25.330
> 
> 标签：cocoa, core-animation, nspopover

我正在处理在父窗口中显示为子窗口的自定义窗口对象。
对于这个对象，我想创建一个类似于 NSPopover 的动画。

我的第一个想法是创建子窗口的屏幕截图，然后使用核心动画对其进行动画处理，最后显示真实的窗口。

在乞求实施之前，我想知道是否存在更好的方法以及您对我的解决方案的看法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:51:48.533

这不是微不足道的。这是我的做法：

```
@interface ZoomWindow : NSWindow
{
    CGFloat animationTimeMultiplier;
}

@property (nonatomic, readwrite, assign) CGFloat animationTimeMultiplier;

@end

@implementation ZoomWindow

@synthesize animationTimeMultiplier;

- (NSTimeInterval)animationResizeTime: (NSRect)newWindowFrame
{
    float multiplier = animationTimeMultiplier;

    if (([[NSApp currentEvent] modifierFlags] & NSShiftKeyMask) != 0) {
        multiplier *= 10;
    }

    return [super animationResizeTime: newWindowFrame] * multiplier;
}

@end

@implementation NSWindow (PecuniaAdditions)

- (ZoomWindow*)createZoomWindowWithRect: (NSRect)rect
{
    // Code mostly from http://www.noodlesoft.com/blog/2007/06/30/animation-in-the-time-of-tiger-part-1/
    // Copyright 2007 Noodlesoft, L.L.C.. All rights reserved.
    // The code is provided under the MIT license.

    // The code has been extended to support layer-backed views. However, only the top view is
    // considered here. The code might not produce the desired output if only a subview has its layer
    // set. So better set it on the top view (which should cover most cases).

    NSImageView *imageView;
    NSImage *image;
    NSRect frame;
    BOOL isOneShot;

    frame = [self frame];

    isOneShot = [self isOneShot];
    if (isOneShot) {
        [self setOneShot: NO];
    }

    BOOL hasLayer = [[self contentView] wantsLayer];
    if ([self windowNumber] <= 0) // <= 0 if hidden
    {
        // We need to temporarily switch off the backing layer of the content view or we get
        // context errors on the second or following runs of this code.
        [[self contentView] setWantsLayer: NO];

        // Force window device. Kinda crufty but I don't see a visible flash
        // when doing this. May be a timing thing wrt the vertical refresh.
        [self orderBack: self];
        [self orderOut: self];

        [[self contentView] setWantsLayer: hasLayer];
    }

    // Capture the window into an off-screen bitmap.
    image = [[NSImage alloc] initWithSize: frame.size];
    [[self contentView] lockFocus];
    NSBitmapImageRep* rep = [[NSBitmapImageRep alloc] initWithFocusedViewRect: NSMakeRect(0.0, 0.0, frame.size.width, frame.size.height)];
    [[self contentView] unlockFocus];
    [image addRepresentation: rep];

    // If the content view is layer-backed the above initWithFocusedViewRect call won't get the content
    // of the view (seems it doesn't work for CALayers). So we need a second call that captures the
    // CALayer content and copies it over the captured image (compositing so the window frame and its content).
    if (hasLayer)
    {
        NSRect contentFrame = [[self contentView] bounds];
        int bitmapBytesPerRow = 4 * contentFrame.size.width;

        CGColorSpaceRef colorSpace = CGColorSpaceCreateWithName(kCGColorSpaceSRGB);
        CGContextRef context = CGBitmapContextCreate (NULL,
                                                      contentFrame.size.width,
                                                      contentFrame.size.height,
                                                      8,
                                                      bitmapBytesPerRow,
                                                      colorSpace,
                                                      kCGImageAlphaPremultipliedLast);
        CGColorSpaceRelease(colorSpace);

        [[[self contentView] layer] renderInContext: context];
        CGImageRef img = CGBitmapContextCreateImage(context);
        CFRelease(context);
        NSImage *subImage = [[NSImage alloc] initWithCGImage: img size: contentFrame.size];
        CFRelease(img);
        [image lockFocus];
        [subImage drawAtPoint: NSMakePoint(0, 0)
                     fromRect: NSMakeRect(0, 0, contentFrame.size.width, contentFrame.size.height)
                    operation: NSCompositeCopy
                     fraction: 1];
        [image unlockFocus];
    }

    ZoomWindow *zoomWindow = [[ZoomWindow alloc] initWithContentRect: rect
                                                           styleMask: NSBorderlessWindowMask
                                                             backing: NSBackingStoreBuffered
                                                               defer: NO];
    zoomWindow.animationTimeMultiplier = 0.3;
    [zoomWindow setBackgroundColor: [NSColor colorWithDeviceWhite: 0.0 alpha: 0.0]];
    [zoomWindow setHasShadow: [self hasShadow]];
    [zoomWindow setLevel: [self level]];
    [zoomWindow setOpaque: NO];
    [zoomWindow setReleasedWhenClosed: NO];
    [zoomWindow useOptimizedDrawing: YES];

    imageView = [[NSImageView alloc] initWithFrame: [zoomWindow contentRectForFrameRect: frame]];
    [imageView setImage: image];
    [imageView setImageFrameStyle: NSImageFrameNone];
    [imageView setImageScaling: NSScaleToFit];
    [imageView setAutoresizingMask: NSViewWidthSizable | NSViewHeightSizable];

    [zoomWindow setContentView: imageView];

    [self setOneShot: isOneShot];

    return zoomWindow;
}

- (void)fadeIn
{
    [self setAlphaValue: 0.f];
    [self orderFront: nil];

    [NSAnimationContext beginGrouping];
    [[NSAnimationContext currentContext] setDuration: 0.3];
    [[self animator] setAlphaValue: 1.f];
    [NSAnimationContext endGrouping];
}

- (void)zoomInWithOvershot: (NSRect)overshotFrame withFade: (BOOL)fade makeKey: (BOOL)makeKey
{
    [self setAlphaValue: 0];

    NSRect frame = [self frame];
    ZoomWindow *zoomWindow = [self createZoomWindowWithRect: frame];
    zoomWindow.alphaValue = 0;

    [zoomWindow orderFront: self];

    NSDictionary *windowResize = @{NSViewAnimationTargetKey: zoomWindow,
                                  NSViewAnimationEndFrameKey: [NSValue valueWithRect: overshotFrame],
                                  NSViewAnimationEffectKey: NSViewAnimationFadeInEffect};

    NSArray *animations = @[windowResize];
    NSViewAnimation *animation = [[NSViewAnimation alloc] initWithViewAnimations: animations];

    [animation setAnimationBlockingMode: NSAnimationBlocking];
    [animation setAnimationCurve: NSAnimationEaseIn];
    [animation setDuration: 0.2];
    [animation startAnimation];

    zoomWindow.animationTimeMultiplier = 0.5;
    [zoomWindow setFrame: frame display: YES animate: YES];

    [self setAlphaValue: 1];

    if (makeKey) {
        [self makeKeyAndOrderFront: self];
    } else {
        [self orderFront: self];
    }
    [zoomWindow close];
} 
```

这是在 NSWindow 类别中实现的。所以你可以打电话：

```
- (void)zoomInWithOvershot: (NSRect)overshotFrame withFade: (BOOL)fade makeKey: (BOOL)makeKey 
```

在任何 NSWindow 上。

我应该补充一点，我无法让两个动画同时运行（淡入淡出和大小），但效果与 NSPopover 的效果非常相似。也许其他人可以解决动画问题。

不用说，这段代码也适用于没有 NSPopover 的 10.6（这就是我首先编写它的原因）。

# javascript - 在 AngularJS 中，如何检测用户何时离开模板/页面？

> ID：13885718
> 
> 赞同：55
> 
> 时间：2012-12-14T20:23:36.610
> 
> 标签：javascript, angularjs, setinterval

我正在使用 Javascript 命令：setInterval。我喜欢在用户离开页面时停止它。

这段代码似乎运行良好：http: [//jsfiddle.net/PQz5k/](http://jsfiddle.net/PQz5k/)

它检测用户何时离开页面。当用户单击链接以转到不同的 HTML 页面或 URL，或者用户重新加载页面时，它会执行 Javascript 代码。

但是，当我从一个 AngularJS 模板转到另一个模板时，它不起作用。例如，如果我在 template1.html，当用户离开 template1.html 转到 template2.html 时，我希望 Javascript 代码在 Controller1.js 中执行某些操作。下面这段代码在 AngularJS 中的等价物是什么？：

```
$(window).on('beforeunload', function() {
    return 'Your own message goes here...';
});​ 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-12-17T15:51:50.060

我认为您有两个控制器，每个模板一个，如下所示：

```
function Controller_1($scope...){
    ...
}
function Controller_2($scope...){
    ...
} 
```

好吧，当您从一个模板切换到另一个模板时，会触发一个名为 $destroy 的事件，您可以在此处阅读它[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope# $destroy](http://docs.angularjs.org/api/ng.$rootScope.Scope#$destroy)

假设我从带有 Controller_1 的模板切换到带有 Controller_2 的模板。Controller_1 有一个我想停止的时间间隔。您可以通过以下方式完成此操作：

```
function Controller_1($scope, $interval...){
    var myInterval = $interval(...);
    $scope.$on("$destroy", function(){
        $interval.cancel(myInterval);
    });
} 
```

这意味着当 Controller_1 的 $scope 被销毁时，将调用事件并清除间隔。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-12-11T18:57:36.143

这是在您离开模板时使用的（也提示确认对话框）：

```
 function Controller_1($scope...){
               var myInterval = setInterval(...);
               $scope.$on('$locationChangeStart', function (event, next, current) {
                    console.log(current);

                    if (current.match("\/yourCurrentRoute")) {
                        var answer = confirm("Are you sure you want to leave this page?");
                        if (!answer) {
                            event.preventDefault();
                        }else{
                            clearInterval(myInterval);
                        }
                    }
                });
               } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-07T15:37:41.293

如果您使用的是 ui-router，那么您可以使用 onExit, 属性

```
 $stateProvider.state('foo', {
        url: '/foo',        
        templateUrl: 'views/foo.html',    
        controller: 'fooController',
        onExit: ['$fooService', function($fooService) => {
            $fooService.hide();//do what u want to do here
        }]

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-15T18:52:48.073

您可以使用观察程序检查位置路径何时更改，如下所示：

```
$scope.$watch(function(){
    return $location.path();
}, function(newPath, oldPath){
   //...Do something
}) 
```

然后，您可以获取旧位置和新位置并执行功能或任何您想要的，

# .net - 如何在 VS2012 中打开 VS2010 解决方案而不迁移或更改任何文件？

> ID：13885719
> 
> 赞同：7
> 
> 时间：2012-12-14T20:23:39.493
> 
> 标签：.net, visual-studio-2012

我在一个使用 Visual Studio 2010 的团队中工作。我开始使用 Visual Studio 2012 来处理我们的 VS2010 解决方案。我了解VS2012可以打开VS2010的解决方案，并保持与VS2010的兼容性。但是我注意到 VS2012 对所有 .sln、.csproj 文件进行了更改。加上 webreference 文件夹中的每个 .datasource 和一些 .Designer.cs 文件。经过这些改动，VS2010仍然可以打开解决方案。

但是我担心的是，当其他开发人员获得最新代码时，他们会加载一堆不应该修改的文件，他们会感到震惊。

我无法解释修改后的文件是好的，或者修改不会伤害任何东西......因为我应该使用VS2010。

有没有办法使用 Visual Studio 2012 并在第一次打开时保持所有文件不变？如果存在这种情况，我猜想在 100% VS2010 兼容模式下使用 VS2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T18:39:25.700

除了少数例外，VS2012 中的项目向后兼容 VS2010。

[这个问题之前已经](https://stackoverflow.com/questions/12095339/visual-studio-2012-doesnt-convert-vs2010-solution)以不同的方式回答过。

另请查看[VS2012 的兼容性](http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx) 它应该可以帮助您确定所做的更改是否会影响您的同事。

# html - 一些子元素不会影响父元素的高度

> ID：13885723
> 
> 赞同：2
> 
> 时间：2012-12-14T20:23:55.003
> 
> 标签：html, css

我正在为我的大学进行设计，但遇到了这个特殊的问题：`<div>`元素的高度不受其内部的影响。

看看这些截图：

![外层 <code><div></code>](../Images/0e88d944b793ff61cce663edfba0fd0e.png)

![内部 <code><label></code>](../Images/25bf7578a9c75a5a032866d56bba54c5.png)

![内部 <code><textarea></code>](../Images/9279d3c75921ccd55b30120272a3d012.png)

[演示](http://jsfiddle.net/shybovycha/dV6Xj/)

*只是为了有点道理：*我试图在不使用表格的情况下（对我来说）构建一些复杂的东西（只有 CSS——尽管我们生活在一个现代网络时代=））。这是我的目标：

![我想要实现的](../Images/0cdaf3f48c9c92f12e5b17e0acdc4869.png)

我有一些又长又乱的 HTML 和 CSS 代码——我真的还不是设计师。这里是：

**HTML：**

```
<html>
    <head>
        <title>verstka</title>

        <link rel="stylesheet" type="text/css" href="verstka.css" media="all" />
    </head>

    <body>
        <div class="top">
            <div class="header angled-stripes">
                <div class="logo"></div>

                <div class="right-menu">
                    <div class="quick-links links">
                        <div class="item">
                            <a href="/">Home</a>
                        </div>

                        <div class="item">
                            <a href="/">Login</a>
                        </div>

                        <div class="item">
                            <span>Sitemap</span>
                        </div>
                    </div>

                    <div class="quick-search">
                        <form action="" method="get" onsubmit="javascript:void(0);">
                            <input type="text" name="q" size="20" />
                            <a href="/" onclick="return false;" class="button">search</a>
                        </form>
                    </div>
                </div>
            </div>

            <div class="top-menu">
                <div class="item">
                    <a href="/" class="products">Products</a>
                </div>

                <div class="item">
                    <a href="/" class="download">Download</a>
                </div>

                <div class="item">
                    <a href="/" class="support">Support</a>
                </div>

                <div class="item">
                    <a href="/" class="contacts">Contacts</a>
                </div>
            </div>
        </div>

        <div class="middle table-positioning">
            <div class="row-positioning">
                <div class="left-column">
                    <div class="content">
                        <div class="block product angled-stripes">
                            <div class="title">BASIC Package</div>

                            <div class="body">
                                <img src="product-green.png" />

                                <span>blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah-blah</span>

                                <div class="links">
                                    <a href="/" class="item">Details</a>
                                    <a href="/" class="item">Download</a>
                                </div>

                                <a href="/" class="button">purchase now</a>
                            </div>

                            <div class="clearer"></div>
                        </div>

                        <div class="block product angled-stripes">
                            <div class="title">FULL Package</div>

                            <div class="body">
                                <span>lorem ipsumlorem ipsumlorem ipsumlorem ipsumlorem ipsumlorem ipsumlorem ipsumlorem ipsumlorem ipsumlorem ipsumlorem ipsumlorem ipsum</span>
                                <div class="links">
                                    <a href="/" class="item">Details</a>
                                    <a href="/" class="item">Download</a>
                                </div>

                                <a href="/" class="button">purchase now</a>
                            </div>

                            <div class="clearer"></div>
                        </div>

                        <div class="block plain">
                            <div class="title">Popular Products</div>

                            <ul class="green-arrow-markered">
                                <li>
                                    <a href="/">Set True Image 9.0</a>
                                </li>

                                <li>
                                    <a href="/">Standard Recorder 6.5</a>
                                </li>

                                <li>
                                    <a href="/">Disk Director Upgrade 4.56</a>
                                </li>

                                <li>
                                    <a href="/">ZippeNotes 6.22</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="footer">
                        &copy;<span class="bolder">Software Company</span>

                        <div class="links">
                            <a href="/" class="item">Privacy Policy</a>
                            <a href="/" class="item">Terms of Use</a>
                            <div class="clearer"></div>
                        </div>
                    </div>
                </div>

                <div class="right-column">
                    <div class="content">
                        <div class="post">
                            <div class="title green-title">Company Address</div>
                            <div class="image"><img src="company-photo.jpg" alt="company photo"></div>
                            <div class="content"></div>
                        </div>

                        <div class="post left-post">
                            <div class="title">Contact Form</div>

                            <form action="#" onsubmit="javascript:void(0);">
                                <div class="input">
                                    <label for="name">Your full name:</label>
                                    <input id="name" name="name" type="text" />
                                </div>

                                <div class="input">
                                    <label for="email">E-mail address:</label>
                                    <input id="email" name="email" type="text" />
                                </div>

                                <div class="input">
                                    <label for="phone">Your phone:</label>
                                    <input id="phone" name="phone" type="text" />
                                </div>

                                <div class="input">
                                    <label for="message">Your message</label>
                                    <textarea name="message" id="message" cols="30" rows="10"></textarea>
                                </div>

                                <input type="submit" />
                            </form>

                            <div class="row">
                                <a href="#" class="button">reset</a>
                                <a href="#" class="button">submit</a>
                            </div>
                        </div>

                        <div class="highlighted-block post">

                            <div class="title green-title">
                                <img src="newsletter" alt="newsletter icon" />

                                <div>
                                    <span class="uppercase">newsletter</span><br /><span class="sub-title">signup</span>
                                </div>
                            </div>

                            <div class="clearer"></div>

                            <form action="#" onsubmit="javascript:void(0);">
                                <label for="newsletter-name">Enter your name, please:</label>
                                <input id="newsletter-name" name="name" type="text" />

                                <label for="newsletter-email">Enter your e-mail, please:</label>
                                <input id="newsletter-email" name="email" type="text" />

                                <a href="#" class="button">subscribe now</a>
                            </form>

                            <div>
                                <strong>Note:</strong>
                                <span>lorem ipsum ololo!</span>
                            </div>
                        </div>

                        <div class="clearer"></div>
                    </div>

                    <div class="footer">
                        <div class="links">
                            <a href="#" class="item">Home</a>
                            <a href="#" class="item">Products</a>
                            <a href="#" class="item">Download</a>
                            <a href="#" class="item">Support</a>
                            <a href="#" class="item">Contacts</a>
                            <a href="#" class="item">Login</a>
                            <a href="#" class="item">Sitemap</a>
                            <div class="clearer"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="bottom">
        </div>
    </body>
</html> 
```

**CSS：**

```
html, body {
    margin: 0 0 80px 0;
    padding: 0;
    background-color: #313131;
    color: #fff;
    font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
    font-size: 12px;
}

a, a:hover, a:visited {
    color: #fff;
}

/*.links .item:nth-child(n+2):before {
    content: '|';
}
*/

.links .item:nth-child(n+2) {
    margin-left: 10px;
    padding-left: 10px;
    border-left: 1px solid #9C9C9C;
}

.links .item {
    color: #9c9c9c;
    float: left;
    display: inline-block;
}

.links a.item:visited {
    color: #9c9c9c;
}

.links a.item:hover {
    color: #9c9c9c;
}

.bolder {
    font-weight: bold;
}

.footer {
    color: #9c9c9c;
}

.middle .left-column .content .block.product:nth-child(n+1) {
    /*background: #8dc63f;*/
    background-color: #86bc3c;
    /*background-size: 25px 25px;*/
    /*box-shadow: 1px 1px 8px #77ad32;*/
}

.middle .left-column .content .block.product:nth-child(n+2) {
    /*background: #ee8911;*/
    background-color: #ee8911;
    /*background-size: 25px 25px;*/
    /*box-shadow: 1px 1px 8px #eb7e0e;*/
}

.middle .left-column .content .block.product .title {
    border-radius: 5px 5px 0 0;
    padding-left: 20px;
    text-shadow: 2px -1px 1px black;
    min-height: 40px;
    line-height: 40px;
    vertical-align: middle;
}

.middle .left-column .content .block.product:nth-child(n+1) .title {
    background: #6ce25d; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: -moz-linear-gradient(top,  #6ce25d 16%, #4ebb30 36%, #bee884 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(16%,#6ce25d), color-stop(36%,#4ebb30), color-stop(100%,#bee884)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #6ce25d 16%,#4ebb30 36%,#bee884 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #6ce25d 16%,#4ebb30 36%,#bee884 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #6ce25d 16%,#4ebb30 36%,#bee884 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #6ce25d 16%,#4ebb30 36%,#bee884 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6ce25d', endColorstr='#bee884',GradientType=0 ); /* IE6-8 */
}

.middle .left-column .content .block.product:nth-child(n+2) .title {
    background: #db8a08; /* Old browsers */
    background: -moz-linear-gradient(top,  #db8a08 17%, #c76307 36%, #ef9366 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(17%,#db8a08), color-stop(36%,#c76307), color-stop(100%,#ef9366)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #db8a08 17%,#c76307 36%,#ef9366 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #db8a08 17%,#c76307 36%,#ef9366 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #db8a08 17%,#c76307 36%,#ef9366 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #db8a08 17%,#c76307 36%,#ef9366 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#db8a08', endColorstr='#ef9366',GradientType=0 ); /* IE6-8 */
}

.middle .left-column .content .block .body .links .item:nth-child(n+2) {
    border-left-color: #fff;
}

.middle .left-column .content .block .body .links .item {
    color: #fff;
}

.middle .left-column .content .block.product .body img {
    width: 30%;
    float: left;
    margin: 10px;
}

.middle .left-column {
    width: 20%;
    max-height: 350px;
}

.middle .right-column {
    width: 65%;
}

.middle .right-column .content {
    background-color: #fff;
    border-radius: 5px;
    border: 3px solid #1c1c1c;
}

.top .header .quick-links .item {
    color: #fff;
}

.top .header {
    font-size: 10pt;
}

.top .header .right-menu {
    display: inline-block;
    position: absolute;
    right: 20px;
    top: 20px;
}

.top .header .right-menu .quick-links {
    display: block;
    float: right;
    margin: 20px 0;
}

.top .header .right-menu .quick-search {
    display: block;
    height: 20px;
    line-height: 10px;
}

.top .header .right-menu .quick-search form {
    margin-right: -10px;
}

.top .header .right-menu .quick-search form * {
    display: inline-block;
    float: left;
    margin: 0 3px;
}

.button {
    color: #fff !important;
    text-transform: uppercase;
    display: inline-block;
    background-color: #a4dff2;
    border: 1px solid #027499;
    text-decoration: none;
    font-family: Arial;
    font-weight: bold;
    text-shadow: #17688d;
    font-size: 10pt !important;
    text-align: center;
    min-width: 70px;
    max-height: 20px;
    padding: 5px 5px;
    border-radius: 3px;
    text-shadow: 1px -1px 1px #000;

    background: #69ace0; /* Old browsers */
    background: -moz-linear-gradient(top,  #69ace0 14%, #207cca 38%, #7db9e8 66%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(14%,#69ace0), color-stop(38%,#207cca), color-stop(66%,#7db9e8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #69ace0 14%,#207cca 38%,#7db9e8 66%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #69ace0 14%,#207cca 38%,#7db9e8 66%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #69ace0 14%,#207cca 38%,#7db9e8 66%); /* IE10+ */
    background: linear-gradient(to bottom,  #69ace0 14%,#207cca 38%,#7db9e8 66%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#69ace0', endColorstr='#7db9e8',GradientType=0 ); /* IE6-8 */
}

.top {
    height: 220px;
}

.top .header {
    background-color: #09aad3;
    /*background-size: 25px 25px;*/
    box-shadow: 1px 1px 8px #0480a7;
    height: 115px;
}

.top .header .logo {
    width: 300px;
    height: 50px;
    margin: 20px 25px;
    border-radius: 6px;
    background-color: #027297;
    position: absolute;
    top: 0;
    left: 0;
    display: inline-block;
}

.top {
    text-align: center;
}

.top .top-menu {
    display: block;
    height: 100px;
    text-align: center;
}

.top .top-menu .item {
    width: 190px;
    height: 100px;
    background-color: #363636;
    display: inline-block;
    margin: 0 -3px;
    vertical-align: middle;
    line-height: 50px;
    /*font-family: Arial;*/
    font-size: 14pt;
    border: 1px solid #000;
    border-radius: 4px;
}

.top .top-menu .item a {
    text-decoration: none;
}

.middle .left-column .content .block .body {
    margin: 10px;
}

.middle .left-column .content .block {
    /*padding: 10px;*/
    border-radius: 10px;
    width: 225px;
    max-width: 225px;
    font-size: 12px;
    margin: 7px;
    border: 3px solid #1b1b1b;
}

.middle .left-column .content .block.plain {
    background-color: #3f3f3f;
    padding: 10px;
    width: 205px;
}

.middle .left-column .content .block .title {
    font-size: 16pt;
}

.middle .left-column .content .block.plain ul {
}

.middle .left-column .footer {
    margin-left: 7px;
}

ul.green-arrow-markered {
    list-style: disc outside url("list-bullet.gif");
    padding-left: 15px;
}

.left-column {
    padding-left: 5px;
}

.clearer {
    clear: both;
}

.angled-stripes {
    /*
    background-color: #09aad3;
    box-shadow: 1px 1px 8px #0480a7;
    linear-gradient(45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent);
    */

    background-image: /* Safari 5 and earlier */
        -webkit-gradient(linear, 100% 100%, 0 0,
        color-stop(.25, rgba(255, 255, 255, 0.2)),
        color-stop(.25, rgba(255, 255, 255, 0)),
        color-stop(.5, rgba(255, 255, 255, 0)),
        color-stop(.5, rgba(255, 255, 255, 0.2)),
        color-stop(.75, rgba(255, 255, 255, 0.2)),
        color-stop(.75, rgba(255, 255, 255, 0)),
        color-stop(1, rgba(255, 255, 255, 0)));

    background-image:   /* Chrome and Webkit Nightly build */
        -webkit-linear-gradient(45deg,
        rgba(255, 255, 255, 0.2) 25%,
        rgba(255, 255, 255, 0) 25%,
        rgba(255, 255, 255, 0) 50%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0.2) 75%,
        rgba(255, 255, 255, 0) 75%,
        rgba(255, 255, 255, 0) 100%
        );

    background-image:   /* Firefox */
        -moz-linear-gradient(45deg,
        rgba(255, 255, 255, 0.2) 25%,
        rgba(255, 255, 255, 0) 25%,
        rgba(255, 255, 255, 0) 50%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0.2) 75%,
        rgba(255, 255, 255, 0) 75%,
        rgba(255, 255, 255, 0) 100%
        );

    background-image:   /* IE10 */
        -ms-linear-gradient(45deg,
        rgba(255, 255, 255, 0.2) 25%,
        rgba(255, 255, 255, 0) 25%,
        rgba(255, 255, 255, 0) 50%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0.2) 75%,
        rgba(255, 255, 255, 0) 75%,
        rgba(255, 255, 255, 0) 100%
        );

    background-image:   /* opera 11+ */
        -o-linear-gradient(45deg,
        rgba(255, 255, 255, 0.2) 25%,
        rgba(255, 255, 255, 0) 25%,
        rgba(255, 255, 255, 0) 50%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0.2) 75%,
        rgba(255, 255, 255, 0) 75%,
        rgba(255, 255, 255, 0) 100%
        );

    background-image:
        linear-gradient(45deg,
        rgba(255, 255, 255, 0.2) 25%,
        rgba(255, 255, 255, 0) 25%,
        rgba(255, 255, 255, 0) 50%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0.2) 75%,
        rgba(255, 255, 255, 0) 75%,
        rgba(255, 255, 255, 0) 100%
        );

    background-size: 15px 15px;
    -moz-background-size: 15px 15px;
    -webkit-background-size: 15px 15px;
    -o-background-size: 15px 15px;
    -ms-background-size: 15px 15px;
}

input[type=submit], input[type=button] {
    display: none;
}

.middle {
    position: relative;
    width: 100%;
    margin: 0;
}

.middle .right-column {
    color: #000;
    width: 80%;
    position: absolute;
    top: 0;
}

.table-positioning {
    display: table;
    width: 100%;
}

.table-positioning .row-positioning {
    display: table-row;
    padding-left: 20px;
}

.table-positioning .row-positioning .cell-positioning {
    display: table-cell;
}

.middle .left-column, .middle .right-column {
    display: table-cell;
}

.middle .right-column .post .title {
    font-size: 16pt;
    color: #09aad3;
}

.green-title {
    color: #4ebb30 !important;
}

.blue-title {
    color: #09aad3 !important;
}

.uppercase {
    text-transform: uppercase;
}

.middle .right-column .post .title {
    padding: 10px 0;
    margin: 10px;
    border-bottom: 1px solid #bebebe;
}

.middle .right-column .post form input, .middle .right-column .post form label, .middle .right-column .post form textarea {
    display: block;
    width: 100%;
}

.middle .right-column .post form input[type=submit], .middle .right-column .post form input[type=button] {
    display: none;
}

.middle .right-column .post .image {
    display: inline-block;
    border: 1px solid #bebebe;
    border-radius: 4px;
    padding: 3px;
}

.middle .right-column .post .image img {
    border: none;
    min-width: 124px;
    min-height: 124px;
    width: 124px;
    height: 124px;
    max-width: 124px;
    max-height: 124px;
}

.middle .right-column .post .content {
    margin: 10px;
    border: none;
    border-radius: 0;
    border-bottom: 1px solid #bebebe;
}

.middle .right-column .post {
    padding: 0 20px;
}

.split-content {
    display: table;
}

.highlighted-block {
    border: 1px solid #bebebe;
    border-radius: 6px;
    background-color: #eeeeee;
    margin: 20px;
    min-height: 420px;
    width: 300px;
    float: right;
    display: inline-block;
}

.middle .right-column .left-post {
    float: left;
    display: inline-block;
    width: 500px;
}

.middle .right-column .left-post .row {
    clear: both;
    display: inline-block;
    float: right;
}

.highlighted-block img {
    display: inline-block;
    float: left;
}

.highlighted-block .title {
    display: block;
    height: 110px;
}

.highlighted-block .title div {
    display: inline-block;
}

.highlighted-block .title img {
    display: inline-block;
    float: left;
    width: 100px;
    margin: 10px;
    height: 100px;
}

.middle .right-column .post .button {
    float: right;
    margin-left: 10px;
}

.middle .right-column .cell-positioning.post {
    margin: 20px;
}

.cell-positioning.wider {
    width: 65%;
}

.middle .right-column .post .input {
    display: block;
    position: relative;
    margin: 10px;
    float: left;
    clear: both;
    width: 100%;
}

.middle .right-column .post .input * {
    display: inline-block !important;
    width: 50%;
}

.middle .right-column .post .input input, .middle .right-column .post .input textarea {
    position: absolute;
    right: 0;
}

.middle .right-column .footer .links {
    float: right;
    margin: 5px 10px;
} 
```

如您所见，我有一个块，`.middle`包含左侧部分`left-column`和右侧部分`.right-column`。

右列仅包含一个元素 - `.content`。但是该容器的元素可以递归地分为几列（*它包含两列，其中一列包含两列，其中一列包含两列......*）。

所以我尝试使用 CSS3`display: table;`和属性。不知何故，它帮助了我。一点点。我试图对我当前的问题应用相同的更改，但它似乎不起作用。所以，我决定尝试*这种**方法*。这样做的问题是，包含标签及其输入的 , 没有按最大子级高度调整大小（远大于，但容器的高度与标签的高度一样大）。`display: table-row;``display: table-column;`*`<div>`*`<div>``<textarea>``<label>`

**根据这些信息，我有两个问题：**

1.  为什么会发生*“错误计算高度”*，我该如何预防？

2.  我应该如何进行布局以使我的代码现代、愚蠢地简单 ( [KISS](http://en.wikipedia.org/wiki/KISS_principle) ) 并且响应迅速？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T20:51:25.817

> 为什么会发生“错误计算高度”之类的事情以及如何预防？

那是因为您在`float`容器内的所有对象上使用。浮点数有点奇怪，所以我推荐阅读[这篇关于它们的 CSS-Tricks 文章](http://css-tricks.com/all-about-floats/)。

简而言之，当您浮动一个元素时，您会将其从文档流中取出。当（非浮动）容器中的所有元素都浮动时，父级认为它没有任何子级，因此崩溃。有几种方法可以解决此问题：

1.  在父容器上设置`overflow: hidden`（仅当容器没有指定高度时才真正有效）
2.  在父容器内的浮动元素之后立即添加`clear: both`到元素（这很好，但如果您专门为此目的添加元素，可能会添加额外的标记）
3.  利用伪元素的力量`:after`（这只适用于支持它的浏览器；好消息是大多数都这样做，尽管可能需要一个 polyfill）。

> 我应该如何布局元素以使我的代码现代、简单（KISS）并且响应迅速？

从我在这里看到的情况来看，你正在做一些让你的工作变得比必要更困难的事情。在我看来，您缺少一些基础知识。

您可能想更多地研究语义标记。你正在经历我们在行业中所说的“divitis”。也就是说，您将事物包装在`<div>`可能更适合其他元素的标签中。

例如，您使用的每个地方，`<div class="item">`您都可以更改为无序列表（`<ul>`），并且每个“项目”都是一个列表项（`<li>`）。这使您免于将课程附加到绝对所有内容。

此外，您不必使用按钮重新发明轮子。有一个`input type=button`和`<button>`元素。使用其中任何一个都将打开`form.submit`您可以挂钩的操作（而不是重新创建它）。

您也不应该需要半打选择器长的 CSS 选择器链。看看[CSS 和 specificity 是如何工作](http://css-tricks.com/specifics-on-css-specificity/)的，否则你会在不久的将来引起自己的偏头痛。

我建议[阅读 Dan Cederholm 的*Handcrafted CSS* and *Bulletproof Web Design*](http://simplebits.com/#books)，以及阅读[A List Apart](http://alistapart.com/)和[CSS-Tricks](http://css-tricks.com)，以便更好地掌握 CSS 和 HTML 的基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:36:37.703

尝试使用

```
.input { overflow: hidden } 
```

它可能会解决您的问题。当您在另一个元素中有浮动元素时，该父元素的高度会受到影响，因为子元素是“浮动的”

# mysql - mysql查找表加入其他3个表，有没有更好的方法？

> ID：13885724
> 
> 赞同：0
> 
> 时间：2012-12-14T20:24:07.047
> 
> 标签：mysql, sql

我有三张桌子

```
USER
USER_ID
USERNAME
[additional fields]

ASSET
ASSET_ID
DISPLAY_NAME
[additional fields]

PAGE
PAGE_ID
[additional fields] 
```

该`USER`表是您所期望的标准`USER`表。`USER`每个用户都可以将资产添加到他们的库中，因此和之间存在一对多的关系`ASSET`。此外，每个`ASSET`页面都由多个页面组成，每个页面都`PAGE`可以有多个仅供该用户查看的注释。我最初的想法是在所有三个表之间都有一个查找表：

```
USER_ASSET_PAGE
UAP_ID
USER_ID
ASSET_ID
PAGE_ID
NOTE 
```

所以现在我必须查询 USER_ASSET_PAGE 表来获取与不同用户的特定文档的特定页面相对应的注释：

```
SELECT NOTE 
FROM USER_ASSET_PAGE
USER_ID = {user_id} AND ASSET_ID = {asset_id} AND PAGE_ID = {page_id} 
```

有没有更好的方法来构建这种类型的数据？感觉可能会出现并发症。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:39:30.557

创建 4 个表

```
**USER**
USER_ID
USERNAME
[additional fields]

**ASSET**
ASSET_ID
USER_CHILD_ID
DISPLAY_NAME
[additional fields]

**PAGE**
PAGE_ID
ASSET_CHILD_ID
[additional fields]

**NOTE**
NOTE_ID
PAGE_CHILD_ID
NOTE_TEXT
[additional fields] 
```

然后要获取数据，请编写 select 语句：

```
select NOTE_TEXT from NOTE inner join PAGE on PAGE_CHILD_ID = PAGE_ID inner join ASSET on ASSET_CHILD_ID = ASSET_ID where USER_CHILD_ID = :USERID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:06:32.523

那么根据你的描述，我个人会使用以下场景：

```
USER {UserID,User_Name},...;
ASSET {AssetID,DISPLAY_NAME,UserID (FK)};
PAGE {PageID,AssetID (FK)...};
NOTE {NoteID,Note,PageID (FK)}; 
```

然后，查询来自特定用户、资产和页面的注释：

```
Select n.NOTE
From NOTE n
inner join PAGE p on p.ID=n.PageID
inner join ASSET a on a.AssetID=p.AssetID
inner join USER u on u.UserID=a.UserID
where u.UserId=x and p.PageID=y and a.AssetID=z 
```

这显然是一种常态化的尝试。当然，这完全取决于您的目标是什么以及要存储的预期数据。使用少量数据，您的非规范化设计就足够了。但是，由于数据量很大，数百名用户拥有数百个页面的多种资产，您的`USER_ASSET_PAGE`表格可能会面临巨大的增长。

My approach would serve better an operational purpose, rather than a "data exploration" one. Later on if you would need to perform some major aggregation on these tables it would be a good idea to denormalize data like you did and look for some optimization as well.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:32:59.303

只需像您描述的那样对数据进行建模。

> 此外，每个资产由多个页面组成

所以`ASSET_ID`在 table 中添加一列`PAGE`。我假设一个 PAGE 不在几个资产之间共享。

> 并且每个页面可以有多个仅供该用户查看的注释。

因此，`NOTE`使用`NOTE_ID`、和来创建一个新表。`PAGE_ID``USER_ID``NOTE`

# excel - 如何阻止excel将数据格式更改为日期？

> ID：13885728
> 
> 赞同：3
> 
> 时间：2012-12-14T20:24:25.440
> 
> 标签：excel, excel-2010, vba

我有一个问题，我找不到脚本。是否有 VBA 脚本或者有人可以创建一个脚本来阻止 Excel 2010 更改数据，例如 1-2 到 2-Jan？

我录制了一个宏，将前三个选项卡的所有行和列更改为文本格式，并将其保存为`XLSTART`文件夹中的个人工作簿。因此，每当我创建一个新的 excel 文件时，都会默认加载个人工作簿。

但是，每当我单击一个新选项卡以及多少个附加选项卡时，都不会复制该格式。只有前三张纸具有文本格式。我的问题是，脚本是否会在我输入时自动保留数据`(1-2, 5-6 etc...)`，并将该设置复制到创建的每个新选项卡？我希望我清楚地表达了我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:02:43.050

将代码复制到 VBAProject 的“Thisworkbook”部分：

```
Private Sub Workbook_NewSheet(ByVal Sh As Object)
    Sh.Range("A1:C1000").NumberFormat = "@"
End Sub 
```

每次创建新工作表时都会执行该代码，将 A:C 列中的前 1000 行格式化为文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:01:39.880

你需要使用VBA吗？如果您以撇号 ( ' ) 开始单元格内容，则内容被视为文本（通过 excel - 无格式），并且撇号不存在，只是它后面的文本。您可以更改脚本以包含撇号。

# opencv - 运行 Pro 的 x86 Windows 8 平板电脑无法使用 Emgu OpenCV 访问集成相机

> ID：13885729
> 
> 赞同：4
> 
> 时间：2012-12-14T20:24:26.920
> 
> 标签：opencv, windows-8, tablet, emgucv

我无法让 Emgu CV 与新的基于 Atom 的 Windows 8 x86 平板电脑上的相机一起使用。这些不是运行 Windows 8 RT 的基于 ARM 的平板电脑，而是在 x86 Atom CPU 上运行完整的 Windows 8 Pro x86。我已经在三星 XE500T1C（Ativ？）的发布版本和 HP ElitePad 900 的预发布版本上尝试了工作代码。

Emgu CV 告诉我：“错误：无法从相机 0 创建捕获”。这个问题可能与新的 Atom 芯片组正在处理一些相机功能有关。我附上了设备管理器的屏幕截图，其中突出显示了有问题的摄像头。

在成像设备下，我们有：
Intel(R) Imaging Signal Processor 2300

在系统设备下，我们有：
相机传感器 OV2720
相机传感器 OV8830
闪光灯 LM3554

![三星 XE500T1C 运行 Windows 8 Pro 32 位](../Images/6f24533b33f70abe6dd7f77aaf8938ce.png)

我搜索了互联网高低，找不到任何有用的东西。我已经联系了惠普，他们正在联系他们的工程师。我尝试了英特尔，我得到的最好的是：http: [//software.intel.com/en-us/articles/sample-windows-store-app-for-camera-picture-taking](http://software.intel.com/en-us/articles/sample-windows-store-app-for-camera-picture-taking)这实际上是用于 Windows 商店应用程序. 虽然它确实有效。

有没有人有任何想法？不用说我陷入困境。另一件事 Emgu CV 在我运行 Windows 8 Pro 的三星 Slate Series 7 上运行良好。它还可以在 32 位 Windows 8 Pro VM 中正常运行。看起来就是这些新的带有英特尔成像信号处理器 2300 的新 Atoms。

感谢大家！

哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:28:16.667

从 2010 年 12 月起，我将 Emgu 回滚到 2.1.1。这似乎与新的 Intel Clover Trail Atoms 配合得很好。

仅供参考：我还尝试了 2013-01-14 的 2.4.9 Alpha，但这不起作用。

# javascript - Google Analytics 样式编号递增

> ID：13885733
> 
> 赞同：0
> 
> 时间：2012-12-14T20:24:44.407
> 
> 标签：javascript, jquery, google-analytics

我正在为一个筹款网站制作一个插件，它会自动更新筹集的金额，而无需刷新。我能够毫无问题地获得新金额，但不是在更新时淡入/淡出，我想让它像 Google Analytics 在实时统计页面上所做的那样计入新数字。

我尝试使用 for 循环来增加，但我认为问题在于增加了延迟。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:28:28.580

您需要两件事：实时数据和显示方式。

对于数据，您可以定期轮询您的服务器，或使用诸如 websockets 之类的东西（或模拟该行为的众多方法之一）。您选择的内容取决于您的需求以及服务器端可用的内容。我个人会将 Node.JS 与 Socket.IO 一起使用。它非常兼容，可以为您提供近乎实时的更新。

现在为了显示它，您可以做一些简单的事情，例如[在 DIV 中“动画”一个数字](https://stackoverflow.com/a/13501577/362536)。[Google Visualization API](https://developers.google.com/chart/interactive/docs/gallery/gauge)中也有方便的仪表和没有的东西。

# asp.net - 如何在回发时刷新reportviewer报告

> ID：13885739
> 
> 赞同：2
> 
> 时间：2012-12-14T20:25:26.037
> 
> 标签：asp.net, .net, reportviewer, rdlc

我在 VS2012 asp.net 中有一个简单的报告，它来自一个 .rdlc 文件，该文件以月份和年份作为参数，这些参数是从它们各自的下拉列表中提取的。我已将下拉菜单设置为自动回发，但我的报告并未刷新以反映新参数。在调试中，它甚至没有命中检索数据的方法。

我是 .net 报告的新手，因此我们将不胜感激。是否需要调用特殊方法以使用新参数重新加载报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T13:52:00.020

您可以使用此代码

```
ReportViewer1.LocalReport.Refresh() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-18T20:33:25.443

这对我有用。即在 ReportViewerWebForm.aspx.cs

```
DropDownList1_SelectedIndexChanged(Object sender,EventArgs e) 
{
    ReportViewer1.LocalReport.Refresh();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T08:53:24.173

我已经使用了这个代码并且工作得很好，希望有用！xReportViewer1.docViewer.DocumentSource = null;

# c# - 语言选择：Windows 应用商店应用程序的 C++ 或 C#？

> ID：13885740
> 
> 赞同：0
> 
> 时间：2012-12-14T20:25:29.733
> 
> 标签：c#, c++, windows-runtime, windows-store-apps, c++-cx

我正在寻找关于哪种语言最好的一般意见。在许多考虑方面最好。

我在 C、C++ 和 Objective-C 方面有很强的背景。我对那些 3 感觉很舒服。我使用的 c# 很少。我在固件和中间件方面工作了十多年，最近开始涉足移动应用程序。主要是 iOS，但现在扩展到 Windows RT。

我即将为我公司的 Windows 应用商店（或 Metro，取决于你想怎么称呼它）编写一个版本。几个月前，我使用 C++/CX 做了一个概念验证。学习它几乎没有障碍（引用类的语法和大量使用命名空间），但那是过去的事了，我现在对此感到很舒服。

我发现的一些缺点是 .net 的大多数示例（MSDN 和私有）都在 c# 中，而在 c++ 中则较少。使用 c++ 回答有关 .net 框架的问题似乎也有点困难。大多数时候人们会发布 ac# 答案，我需要将其移植到 c++ equiv。有时这很容易，有时更难。

我的问题是：值得我和我的公司花时间从 c# 重新开始而不是继续使用 c++ 吗？我需要学习 c#，但我不认为这是一个巨大的负担（实际上很期待）。一些担忧是： * 获得更多工程师来处理此代码。我们公司很快就会发展壮大。会不会更容易找到懂 c# 和 MS 专门的 c++/cx 的工程师？* 通过示例、文章和论坛轻松获得帮助。如果 c# 更常见，那将很有用。* 3rd 方库之间的兼容性（似乎可以从任何主要语言中使用 WinRT 组件） * C# 相对于 C++ 的优势？他们都提供了这个应用程序所需的一切，至少我可以看到。C#有哪些陷阱？* c# 是否以与 C++/CX 相同的方式使用 continution/lambdas 进行异步编程？

还有其他我没有想到的优点/缺点吗？

你怎么看？另外，你有什么经验？你为什么支持你的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:31:29.160

C# 将拥有更好的在线支持（代码示例、问题答案）和更强大的工程师基础。我的意思是，在这种特定情况下，对于这种强烈依赖 Microsoft API 的软件开发。Windows Store 在微软的整体战略中非常重要，而 C# 在他们的语言战略中比 C++ 更重要。因此，C# 是正确的选择，IMO。

* * *

*EDIT (Filip Skakun) 我知道重新提出这个问题可能很难，所以我不能单独回答，但我输入了所有可能有用的文本，所以我想我会在下面添加它：

当然，这由您决定，这可能是一个非常主观的选择，具体取决于您的信念，例如，如果您认为 C# 更高的潜在生产力和更好的工具和文档支持超过了更快、更接近于你已经知道的金属和（稍微主观地）更便携的 C++。根据 tiobe 索引，C++ 的流行度仍然几乎是一门语言的两倍，因此吸引 C++ 开发人员可能比 C# 更容易。C++/CX 是您只需要用于跨程序集通信和与 WinRT 库交谈的东西，但您编写的任何其他代码都应该根据所有专家的建议在标准 C++ 中完成。另请注意，C++/CX 不是托管语言，您不能将其与 .NET 一起使用。它在语法上与作为托管语言的 C++/CLI 非常相似。WinRT 的好处是您可以根据需要或需要使用这两种语言。我将 C# 用于所有 XAML UI、网络、业务逻辑等。有大量示例可用于将 C# 与 XAML 一起使用，而用于 C++ 的示例范围有限，因为它仅适用于并推荐用于带有 WinRT 的 XAML 平台。另一方面，对于任何较低级别的任务，例如处理 DirectX 或 CPU 密集型任务，我使用 C++，因为与直接 DirectX 相比，它的开源 .NET 包装器有更多的文档，并且当你想要挤出所有的CPU 的潜在功率或使用电池的最少能量。有大量用于将 C# 与 XAML 结合使用的示例，而用于 C++ 的示例范围有限，因为它仅适用于并推荐用于具有 WinRT 的 XAML 平台。另一方面，对于任何较低级别的任务，例如处理 DirectX 或 CPU 密集型任务，我使用 C++，因为与直接 DirectX 相比，它的开源 .NET 包装器有更多的文档，并且当你想要挤出所有的CPU 的潜在功率或使用电池的最少能量。有大量用于将 C# 与 XAML 结合使用的示例，而用于 C++ 的示例范围有限，因为它仅适用于并推荐用于具有 WinRT 的 XAML 平台。另一方面，对于任何较低级别的任务，例如处理 DirectX 或 CPU 密集型任务，我使用 C++，因为与直接 DirectX 相比，它的开源 .NET 包装器有更多的文档，并且当你想要挤出所有的CPU 的潜在功率或使用电池的最少能量。

C# 是比 C++ 更简洁的语言，标点符号更少，新的 async/await 关键字使异步调用（您必须在 Windows 8 应用程序中使用）更简洁。它也是一种托管语言，因此在大多数情况下，您可能不需要关心何时释放内存、缓冲区溢出等。调试 C# 代码比 C++ 产生更多确定性的结果（我只花了 2 天时间调试一些 C++ 代码，但我仍然没有'不知道我在找到错误方面走了多远）。维护遗留代码也更容易，因为调试要容易得多。

C++ 更快，因此它也使用更少的电池，您的应用程序将启动更快并且可能使用更少的能量。如果您已经很了解它，那么您可能比那些构建应用程序的托管开发人群更具优势。因为它不使用垃圾回收 - 内存管理更具确定性和轻量级，因此您的动画将更加流畅。

然后还有动机因素。如果你真的想学习 C#——你可能会比你已经知道的语言更快乐、更有动力和更有效率地学习 C#，并且会很乐意花更多的时间来学习它，而不是你愿意花更多的时间来编写另一个 C++ 应用程序。

无论您使用哪种语言，底层 WinRT 库都是相同的，但 .NET 库仅在 .NET 代码中可用，而标准 C++ 库仅在本机代码中可用。

最后——无论你做出什么决定——你总是可以混合使用两种语言。这可能会增加维护成本，因为将来维护代码的人可能需要了解两种语言，而且混合语言平台非常年轻，工具支持的程度略低（例如，您不能进行混合托管+本机远程调试) 和可能更多的错误。出于我之前所说的原因，在许多情况下这是一个非常好的选择。

# list - 产品列表中的 Magento 寻呼机

> ID：13885741
> 
> 赞同：1
> 
> 时间：2012-12-14T20:25:35.163
> 
> 标签：list, magento, product, pager

如何仅在产品列表底部插入寻呼机？

在我想要的产品列表顶部：“按相关性/畅销书/等排序”和“按：表/列表排序项目”，这是我能够做到的。

在产品列表的底部我只想要寻呼机，我尝试在 list.phtml 中插入以下代码

```
<?php echo $this->getPagerHtml() ?> 
```

但是这个 php 代码不能直接在产品列表上工作。

如何使寻呼机在产品列表上工作并显示在底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:02:00.493

您好，您使用以下代码创建新的 toolbar-bottom.phtml 文件，即 **app/design/frontend/(base or default)/(default or yourtheme)/template/catalog/product/list/toolbar-bottom.phtml**

```
<?php if ($this->getCollection()->getSize()): ?>
    <div class="toolbar">
        <div class="pager"> 
            <p class="amount"> 
                <?php if ($this->getLastPageNum() > 1): ?> 
                    <?php echo $this->__('Items %s to %s of %s total', $this->getFirstNum(), $this->getLastNum(), $this->getTotalNum()) ?>
                <?php else: ?> 
                    <strong>
                        <?php echo $this->__('%s Item(s)', $this->getTotalNum()) ?>
                    </strong>
                <?php endif; ?> </p> 
            <div class="limiter"> 
                <label><?php echo $this->__('Show') ?></label> 
                <select onchange="setLocation(this.value)"> 
                    <?php foreach ($this->getAvailableLimit() as $_key => $_limit): ?> 
                        <option value="<?php echo $this->getLimitUrl($_key) ?>"<?php if ($this->isLimitCurrent($_key)): ?> selected="selected"
                        <?php endif ?>
                        <?php echo $_limit ?> 
                    </option> 
                <?php endforeach; ?>
            </select>
            <?php echo $this->__('per page') ?> </div> <?php
        echo
        $this->getPagerHtml()
        ?>
    </div>
    </div>
    <?php  endif ?> 
```

调用**app/design/frontend/(base or default)/(default or yourtheme)/template/catalog/product/list.phtml 中的行底**

getToolbarBlock()->setTemplate('catalog/product/list/toolbar-bottom.phtml')->toHtml();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:37:08.800

您可以通过以下两种方式之一执行此操作。

1) 使用 CSS

```
<div class="category-products">
   <div class='top-toolbar'><?php echo $this->getToolbarHtml() ?></div>

 ...
   <div class='bottom-toolbar'><?php echo $this->getToolbarHtml() ?></div>
</div> 
```

在 CSS 中

```
 .bottom-toolbar .xyz{
    display:none;
 } 
```

2）使用自定义模块覆盖`getToolbarHtml`和

```
$this->getToolbarHtml('top-toolbar');

$this->getToolbarHtml('bottom-toolbar');

public function getToolbarHtml($toolbar_position)
{   
    $this->toolbar_position = $toolbar_position;
    return $this->getChildHtml('toolbar');
} 
```

然后尝试传递`$this->toolbar_position`到每个块以显示您需要的部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T20:13:39.470

我想这就是你想要的。

```
$toolbar = $this->getToolbarBlock();
$toolbar->setCollection($_productCollection);
if($toolbar->getCollection()->getSize() > 0):
echo $toolbar->getPagerHtml(); //Pager
echo $toolbar-> __('Items %s to %s of %s total', $toolbar->getFirstNum(), $toolbar->getLastNum(),
$toolbar ->getTotalNum());
endif; 
```

字体： http: [//mayankpatel104.blogspot.com.br/2012/07/magento-pagination-without-toolbar.html](http://mayankpatel104.blogspot.com.br/2012/07/magento-pagination-without-toolbar.html)

# ruby-on-rails - 回形针图像出现在错误的位置

> ID：13885742
> 
> 赞同：0
> 
> 时间：2012-12-14T20:25:36.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, paperclip

嘿，我有一个 Rails 应用程序，我正在用回形针上传图像....

所以我有一个comic_review 脚手架，我可以上传漫画封面的图片，我还有一个新闻脚手架，我可以在其中发布新闻和图片.....

当我编辑 news/1/edit 并上传图片时，comics_review/1 图片与新闻图片相同，反之亦然。

我检查了视图中的链接以确保我是正确的并且它们似乎没问题...

这是我的看法

主页.html.erb

```
 <h2 style="color: black; font-size: 30px;"><%= @comic_review1.title %></h2>
          <p><%= @comic_review1.content %></p>
          <%= link_to 'Read More...', comic_review_path(@comic_review1) %>               
          <%= image_tag @comic_review1.photo, class: "homepage_comics" %> 
```

新闻/show.html

```
 <%= @news.author %>
          <%= @news.date %>
          <%= image_tag @news.photo, class: 'pull-left', style: 'margin-right: 10px;' %> 
```

这是我的控制器

static_pages_controller.rb

```
 class StaticPagesController < ApplicationController
           def home
         @user = current_user
             @article = Article.first
             @comic_review1 = ComicReview.find(1)
             @comic_review2 = ComicReview.find(2)
             @comic_review3 = ComicReview.find(3)
             @comic_review4 = ComicReview.find(4)
           end

           def comics
             @comic_review1 = ComicReview.find(1)
             @comic_review2 = ComicReview.find(2)
             @comic_review3 = ComicReview.find(3)
             @comic_review4 = ComicReview.find(4)
           end

           def batnews
             @article = Article.first
             @news_all = News.all
           end
           end 
```

这是我的模型

漫画评论.rb

```
 class ComicReview < ActiveRecord::Base
        attr_accessible :content, :credits, :review, :title, :photo, :comicreview
        has_attached_file :photo, :styles => { :small => '400x400' },
        :storage => :s3,
        :s3_credentials => "#{Rails.root}/config/s3.yml",
        :path => ":attachment/activities/:id/:style.:extension",
        :bucket => 'goddam_batman_pics'

        has_many :comments, as: :commentable, dependent: :destroy
        end 
```

新闻.rb

```
 class News < ActiveRecord::Base
        attr_accessible :title, :author, :date, :content, :photo
        has_attached_file :photo, :styles => { :small => '400x400' },
       :storage => :s3,
       :s3_credentials => "#{Rails.root}/config/s3.yml",
       :path => ":attachment/activities/:id/:style.:extension",
       :bucket => 'goddam_batman_pics'
       end 
```

控制器是由脚手架生成的基本控制器

因此，每当我为 news/1 更新照片时，comic_reviews/1 的照片都会获得与 news 相同的照片

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:23:36.033

好的，所以我要做的是在我的模型中我改变了路径

:path => ":attachment/activities/:id/:style.:extension",

至

:path => "/image/:id/:filename",

它似乎正在工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:45:15.570

我很确定问题在于您在两个模型中都为“照片”赋予了相同的名称。尝试命名一张comic_photo 和另一张news_photo，或者探索多态关联。

过时的 Railscast 链接，但给你的想法 - [http://railscasts.com/episodes/154-polymorphic-association](http://railscasts.com/episodes/154-polymorphic-association)

PS - 弄清楚如何在一个查询中加载四个 ComicReviews 而不是在这些控制器中加载四个的奖励积分。

# eclipse-plugin - 将操作与活动图相关联

> ID：13885745
> 
> 赞同：2
> 
> 时间：2012-12-14T20:25:42.863
> 
> 标签：eclipse-plugin, uml, papyrus

如何将序列图中的消息（操作调用）与其实现（方法）关联为活动图？

`I am using Papyrus for modelling.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T20:20:49.130

序列图中的消息传递旨在成为对对象类的方法调用。活动图旨在类似于业务流程的流程图。前者将非常具体和详细；后者将更通用，而不是那么具体。

虽然如果您选择以这种方式建模，它们可能会巧合相关，因为它们不是按照 UML 标准直接相关的，我认为您不会找到可以为您执行此操作的工具。

你可以在这里阅读更多：

[UML 活动图教程](http://www.tutorialspoint.com/uml/uml_activity_diagram.htm)

[UML 序列图教程](http://www.tutorialspoint.com/uml/uml_interaction_diagram.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-10T07:51:22.690

在这种情况下可能存在间接关系。

**方法**通常在类图中的类中定义。

使用**活动图**指定相同的方法。

方法的调用可以显示在**序列图**上。

类图为其余图提供了一种结构备份，强烈建议制作一个（如果您还没有的话）。

# c++ - '.' 之前的预期不合格 ID 令牌（C++ 错误）

> ID：13885746
> 
> 赞同：1
> 
> 时间：2012-12-14T20:25:46.170
> 
> 标签：c++, data-structures, codeblocks

我不断收到此错误，我不知道为什么！请帮忙

```
if(option = '1')
    {
        cout << "What word would you like to do a linear search for?" << endl;
        cin >> word;

        Search.linearSearch(250, word);
        if (comparisons >= true)
        {
            cout << "The word" << word << "was found!" << comparisons << "comparisons were made" << endl;
        }
        else
        {
            cout << "The word was not found" << endl;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:30:00.627

您应该尝试使用 Search::linearSearch(250, word);

# size - opencl 最大工作组大小

> ID：13885747
> 
> 赞同：1
> 
> 时间：2012-12-14T20:25:50.967
> 
> 标签：size, opencl, wavefront, workgroup

Opencl 定义了最大工作组大小。这是什么原因？-是硬件限制还是软件设计？为什么我不能使用任何工作组大小？- 任何情况下，工作组都被“划分”为波前。每个波前确实应该有工作项的数量，这等于计算单元 (CU) 的处理元素 (PE) 的数量。因此，大小为 n 的工作组将是执行于

> 细胞（n/wavefront_size）

# ruby-on-rails - 循环遍历状态 - 范围？红宝石/导轨

> ID：13885750
> 
> 赞同：2
> 
> 时间：2012-12-14T20:26:03.113
> 
> 标签：ruby-on-rails, ruby, loops, state

我希望能够根据模型的当前状态循环遍历模型。

我为我的模型创建了相当简单的状态，如下所示：

```
models/job.rb

class Job < ActiveRecord::Base
  has_many :events, class_name: "JobEvent"

  STATES = %w[bids in_progress complete canceled]
  delegate :bids?, :in_progress?, :complete?, :canceled?, to: :current_state

  def current_state
    (events.last.try(:state) || STATES.first).inquiry
  end 
end 
```

和

```
models/job_event.rb

    class JobEvent < ActiveRecord::Base
      belongs_to :job
      attr_accessible :state

      validates_presence_of :job_id
      validates_inclusion_of :state, in: Order::STATES

      def self.with_last_state(state)
        order("id desc").group("job_id").having(state: state)
      end
    end 
```

状态有效 - 我可以很好地改变状态。我希望能够根据模型的当前状态循环遍历模型。不确定解决此问题的最佳方法。我是范围界定的新手，我正在尝试按如下方式遍历我的状态（不工作）：

```
views/index.html.erb

    <% @current_state_jobs.each do |job|  %>
        <tr>
          <td><%= link_to job.job_number, job %></td>
        </tr>
    <% end %> 
```

看起来上面的方法可行 - 但我收到以下错误：`undefined method 'each' for nil:NilClass`

我应该关注范围还是将每个状态定义为控制器中的方法？也许我应该在循环的开头放一个 if then 语句？有什么想法或推荐阅读吗？

**--- 更新 --- 找到解决方案 ---**

我最终在我的控制器索引方法中为每个状态添加了实例。然后在我的索引中添加一个选项卡式视图，以一次循环遍历每个状态。

例如：

```
class JobsController < ApplicationController
  def index 
    @all = Job.where(:state => ['bids', 'in_progress', 'complete'])  #all job states
    @bids = Job.where(:state => ['bids']) 
    ... and so on for each state
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:50:08.510

好吧，你的`undefined method`错误是因为`@current_state_jobs`当你期望它是一个集合时它是 nil 。您需要在控制器的`index`方法中为其分配一些值。

我不确定你的问题是否足够清楚。您是要遍历所有`Job`实例并执行特定于每个状态的操作，还是要获取一个特定状态的所有作业并遍历这些作业？

如果是后者，您需要一个作用域或类方法，您可以使用它来获取该状态的作业。也许是这样的：

```
class Job < ActiveRecord::Base
  def self.with_state(state)
    joins(:events).where("job_event.state = ?",state)
  end
end

@current_state_jobs = Job.with_state("in_progress") 
```

（你需要这个`current_state`实例方法，除非你在别处使用它）。

# linux - 如何在大容量存储驱动程序枚举时确定操作系统类型

> ID：13885752
> 
> 赞同：0
> 
> 时间：2012-12-14T20:26:08.703
> 
> 标签：linux, linux-kernel, embedded, usb, usb-drive

我想在枚举时找到主机操作系统，并使用大容量存储驱动程序仅选择相应的操作系统映像文件。

例如：“insmod g_mass_storage.ko 文件=/win.iso,mac.iso”

在执行上述命令时，当设备连接到 WINDOWS 时，我需要显示 win.iso 而不是暴露 mac.iso。该命令应类似于“insmod g_mass_storage.ko file=/win.iso”

在执行上述命令时，当设备连接到 MAC 时，我需要显示 mac.iso 而不是暴露 win.iso。该命令应类似于“insmod g_mass_storage.ko file=/mac.iso”。

我将不胜感激任何其他想法/解决这个问题。

# c++ - 在 C++ 中一起使用类和字符串向量？

> ID：13885760
> 
> 赞同：1
> 
> 时间：2012-12-14T20:26:40.180
> 
> 标签：c++, string, class, vector

我只是 C++ 的初学者，我正在尝试让一些向量为我的程序工作，因为我正在尝试编写一个允许用户从文件中添加/编辑/删除以前条目的程序。问题是我无法让我的设置器与向量一起正常工作。我不确定我到底做错了什么。

```
#include <iostream>
#include <cstring>
#include <vector>
using namespace std;

class DVD
{
public:
    //Default constructor
    DVD();
    //Class members
    vector<string> name[5];
    vector<string> length[5];
    vector<string> actora[5];
    vector<string> actorb[5];
    vector<string> year[5];
//Function to set and get DVD Name
void setDVDname(vector<string> name)
    {
        DVDname[5]=name[5];
    }
        vector<string> getDVDname()
    {
        return DVDname;
    }
//Function to set and get DVD length
void setDVDlength(vector<string> length)
    {
        DVDlength=length;
    }
        vector<string> getDVDlength()
    {
        return DVDlength;
    }
//Function to get and get DVD year
void setDVDyear(vector<string> year)
    {
        DVDyear=year;
    }
        vector<string> getDVDyear()
    {
        return DVDyear;
    }
//Function to get and set DVD Actor Alpha
void setDVDactorA(vector<string> actora)
    {
        DVDactorA=actora;
    }
        vector<string> getDVDactorA()
    {
        return DVDactorA;
    }

//Function to get and set DVD Actor Bravo
void setDVDactorB(vector<string> actorb)
    {
        DVDactorB=actorb;
    }
        vector<string> getDVDactorB()
    {
        return DVDactorB;
    }

protected:
private:
    //Variables to hold DVD information
    vector<string> DVDname[5];
    vector<string> DVDlength[5];
    vector<string> DVDactorA[5];
    vector<string> DVDactorB[5];
    vector<string> DVDyear[5];
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:45:05.600

由于您正在制作 DVD 库，因此您可以执行以下操作：

```
class DVD {
    std::string name;
    // etc.
};
std::vector<DVD> library; 
```

该`library`变量将是一个 DVD 列表，可以容纳您计算机内存可以处理的尽可能多的 DVD。使用 an 的目的`std::vector`是不必担心自己管理内存。你只是`library.push_back()`用来添加更多的 DVD。如果您想查看`std::vector`提供的其他方法，请查看[cppreference.com](http://en.cppreference.com/w/cpp/container/vector)。

从逻辑上讲，您希望您的 DVD 类仅表示 DVD，而不是库或 DVD 列表，因此请尝试在代码中将这两个概念分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:34:17.713

你得到任何编译错误是合乎逻辑的吗？

另外，为什么要使用矢量？由于它是一张 DVD，并且您的矢量对应于信息，因此只需删除矢量并将它们变成简单的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:50:50.593

首先删除这个，你不使用它，你也不需要它。您稍后将此实例保存的值设置为私有。同时删除受保护的关键字，你现在不保护任何东西。

```
//Class members
    vector<string> name[5];
    vector<string> length[5];
    vector<string> actora[5];
    vector<string> actorb[5];
    vector<string> year[5]; 
```

第二次在 setDVDName() 上传递一个向量的副本，然后只分配基本上不存在的最后一部分，因为你的向量有 5 个元素并且你请求第 6 个。如果您想要第 5 个元素，则应将其更改为 name[4]。

我假设您想要这样的东西：`DVDName = name;` 另外，更改向量的声明。从

```
//Variables to hold DVD information
vector<string> DVDname[5];
vector<string> DVDlength[5];
vector<string> DVDactorA[5];
vector<string> DVDactorB[5];
vector<string> DVDyear[5]; 
```

至：

```
//Variables to hold DVD information
vector<string> DVDname(5);
vector<string> DVDlength(5);
vector<string> DVDactorA(5);
vector<string> DVDactorB(5);
vector<string> DVDyear(5); 
```

# mysql - SQL 优化大或查询

> ID：13885761
> 
> 赞同：0
> 
> 时间：2012-12-14T20:26:49.073
> 
> 标签：mysql, sql, query-optimization

我正在尝试运行查询以查找两个表上的多个电话号码列之间的任何匹配项，并且它花费的时间太长（> 5 分钟），这是尽可能多地过滤数据。我已经将我可以从两个表中搜索的实际列分离到它们自己的表中，只是为了减少总行数。

**这是来自我继承的遗留应用程序。**

**询问**

```
select count(b.bid) 
from customers_with_phone c,buyers_orders_with_phone b 
where 
   (b.hphone=c.pprim or b.hphone=c.phome or b.hphone=c.pwork or b.hphone=c.pother) 
or (b.wphone=c.pprim or b.wphone=c.phome or b.wphone=c.pwork or b.wphone=c.pother) 
or (b.cphone=c.pprim or b.cphone=c.phome or b.cphone=c.pwork or b.cphone=c.pother) 
group by b.bid; 
```

**表**

```
mysql> show columns from customers_with_phone;
+--------+---------+------+-----+---------+-------+
| Field  | Type    | Null | Key | Default | Extra |
+--------+---------+------+-----+---------+-------+
| pnum   | int(11) | YES  |     | NULL    |       |
| pprim  | text    | YES  |     | NULL    |       |
| phome  | text    | YES  |     | NULL    |       |
| pwork  | text    | YES  |     | NULL    |       |
| pother | text    | YES  |     | NULL    |       |
+--------+---------+------+-----+---------+-------+

mysql> show columns from buyers_orders_with_phone;
+--------+------+------+-----+---------+-------+
| Field  | Type | Null | Key | Default | Extra |
+--------+------+------+-----+---------+-------+
| bid    | text | YES  |     | NULL    |       |
| hphone | text | YES  |     | NULL    |       |
| wphone | text | YES  |     | NULL    |       |
| cphone | text | YES  |     | NULL    |       |
+--------+------+------+-----+---------+-------+ 
```

**解释**

```
+----+-------------+-------+------+---------------+------+---------+------+-------+----------+----------------------------------------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows  | filtered | Extra                                        |
+----+-------------+-------+------+---------------+------+---------+------+-------+----------+----------------------------------------------+
|  1 | SIMPLE      | b     | ALL  | NULL          | NULL | NULL    | NULL |  8673 |   100.00 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | c     | ALL  | NULL          | NULL | NULL    | NULL | 75931 |   100.00 | Using where; Using join buffer               |
+----+-------------+-------+------+---------------+------+---------+------+-------+----------+----------------------------------------------+ 
```

我意识到这两个表都没有主键，因为这些只是我需要搜索的列，我从它们的原始表中提取了这些列。但是使用原始表需要更长的时间，因为要过滤的数据要多得多。

我还有其他与此类似的查询，它们可以处理更多数据，因此如果我可以在合理的时间内使这个查询工作，我可以让其他查询以类似方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:17:21.360

遗留查询很糟糕，对不起。它是完整的笛卡尔积。

数据结构无法有效处理此类查询。您在一个表中有 3 个字段，在另一个表中有 4 个字段，并尝试计算是否有任何一对匹配。

可能每个电话列的主键和键都可以改善此查询，但不确定，但它会使删除/插入/更新性能变差。

顺便说一句，您写了不可能按可空列索引。这是不正确的。

我只能相信激进的解决方案——改变数据结构或添加某种带有触发器的缓存机制。但这很难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:38:57.600

A primary key is not a optimazation. What you need are non clustered index on your telephone text fields (one index per column). With these, you won't need to extract your data to seperate tables.

# java - 在java自定义验证中访问JSF输入字段的最大长度

> ID：13885762
> 
> 赞同：1
> 
> 时间：2012-12-14T20:26:50.663
> 
> 标签：java, validation, jsf, maxlength

我需要访问`maxLength`自`inputField`定义验证。尽管我将`maxLength`其视为 中的字段之一`UIComponent`，但我没有看到相同的吸气剂。

谁能告诉我如何`maxLength`在我的自定义验证器中获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:35:01.837

从理论上讲，如果您将`UIComponent`to 转换为它应该可以工作`HtmlInputText`。然后你可以使用`getMaxlength()`来返回该`maxLength`属性的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:39:34.480

您可以检索为`UIComponent`using定义的属性列表`getAttributes()`。它将返回一个`Map<String,Object>`.

```
Map<String,Object> listAttributes = myUIComponent.getAttributes();
Integer maxLength = (Integer) listAttributes.get("maxLength"); 
```

[UIComponent](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html) - 请参阅 getAttributes 方法。

[java.util.Map](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html) - Map 类的 Javadoc。

# android - 有没有办法在 Android 中明确控制 WiFi 扫描间隔？

> ID：13885767
> 
> 赞同：9
> 
> 时间：2012-12-14T20:27:10.307
> 
> 标签：android, android-wifi, rssi

我目前正在做关于 WiFi 定位的硕士论文，为了测试我的算法，我需要收集一些数据。

为此，我为 Android 编写了一个简短且非常简单的程序，它简单地收集每次扫描找到的所有可用接入点的 RSSI 并将它们保存到文件中。我已经设置了一个`BroadcastReceiver`监听事件的设备`WifiManager.SCAN_RESULTS_AVAILABLE_ACTION`，并且我使用了一个`Timer`（这里称为 tim）来启动一个`WifiManager`名为 wifi 的扫描，如下所示：

```
tim.schedule(new TimerTask(){
        @Override
        public void run(){
            wifi.startScan();
        }
}, 0, 1000); 
```

我现在遇到的问题是，即使我成功启动它们，启动的扫描似乎也不会每秒钟发生一次，并且时不时地还会有其他一些从其他应用程序启动的扫描也被记录下来。

是否有任何简单的方法可以按设定的时间间隔进行扫描并且不接收由其他应用程序启动的扫描？

如果有任何帮助，可以在[https://github.com/while/RSSIMiner](https://github.com/while/RSSIMiner)上找到整个应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:27:12.833

> 有没有简单的方法可以按设定的时间间隔进行扫描？

如果这不好用，恐怕不行。根据我的经验，“硬件相关”的方法可能不像他们的定义所说的那样工作。例如，我曾经创建了一个小应用程序，它每 X 分钟记录一次您的位置。所以我`requestLocationUpdates`用一些`minTime`参数调用。但是我的手机根本忽略了这个`minTime`价值，我会在 GPS 可用时立即从 GPS 获取更新，这不是我想要的。我在这里发布了一个关于它的问题，并得到了[这个](https://stackoverflow.com/a/13555215/797390)答案，从中我们了解到，在果冻豆之前，设备可能会简单地忽略这个值......

*所以*现在可能是类似的东西。我会尝试在最新的 Android 版本上运行此代码。而且我对 Wifi 不太了解，但是 1 秒不是太频繁的扫描间隔吗？也许系统不会忽略扫描请求（所以它会返回`true`）但硬件会？

> 我们可以忽略其他应用程序发起的扫描吗？

据我所知，这里也是负面的。广播中不包含任何额外内容，`SCAN_RESULTS_AVAILABLE_ACTION`因此您无法知道哪个应用程序启动了扫描。

最好的解决方案是定义您的要求。您可以使用`ScanResult.timestamp`来确定是否应该使用此结果。例如，如果您尝试每秒获取每个接入点的 RSSI，您可以将当前的 BSSID 与之前的 BSSID 进行比较。如果当前 BSSID 包含在上一秒的扫描结果中，您可以简单地忽略它。然后，你得到多少结果并不重要。

另一个更简单的解决方案是创建一个布尔值，并在开始扫描时`scanInitiated`将其设置为。`true`接收广播时，仅当`scanInitiated`为时才使用数据`true`，然后设置为`false`。当间隔很短时，这不是那么可靠，但对于长间隔，它会很好用。

# cakephp - CakePHP 简单的表关联帮助

> ID：13885768
> 
> 赞同：0
> 
> 时间：2012-12-14T20:27:11.757
> 
> 标签：cakephp

我真的在为 cakephp 中的表关联而苦苦挣扎，我想做的就是将两个表关联在一起，但是一个表有两个外键到另一个表。

出于某种原因，我无法在 home_id ... 的字段选择表单中显示任何信息。

请参阅下面的数据库图片和相关代码。

我对 cakephp 真的很陌生，但觉得如果我能做到这一点，这将非常有用 - 非常感谢任何帮助。

[数据库模式](http://cakephp.1045679.n5.nabble.com/file/n5712772/db_design.png)

```
class SafcTeam extends AppModel {
    var $name = 'SafcTeam';
    var $displayField = 'name';
    var $validate = array(
            'name' => array(
                    'notempty' => array(
                            'rule' => array('notempty'),
                    ),
            ),
            'badge' => array(
                    'notempty' => array(
                            'rule' => array('notempty'),
                    ),
            ),
    );

    var $hasMany = array(
            'SafcTeam' => array(
                    'className' => 'SafcEvent',
                    'foreignKey' => 'home_id',
            )
    );

}

class SafcEvent extends AppModel {
    var $name = 'SafcEvent';
    var $displayField = 'id';
    var $validate = array(
            'safc_matchtype_id' => array(
                    'numeric' => array(
                            'rule' => array('numeric'),
                    ),
            ),
            'safc_league_id' => array(
                    'numeric' => array(
                            'rule' => array('numeric'),
                    ),
            ),
            'home_id' => array(
                    'numeric' => array(
                            'rule' => array('numeric'),
                    ),
            ),
            'away_id' => array(
                    'numeric' => array(
                            'rule' => array('numeric'),
                    ),
            ),
            'streamer_id' => array(
                    'numeric' => array(
                            'rule' => array('numeric'),
                    ),
            ),
            'safc_channel_id' => array(
                    'numeric' => array(
                            'rule' => array('numeric'),
                    ),
            ),
            'comments' => array(
                    'notempty' => array(
                            'rule' => array('notempty'),
                    ),
            ),
            'safc_profile_id' => array(
                    'numeric' => array(
                            'rule' => array('numeric'),
                    ),
            ),
            'safc_source_id' => array(
                    'numeric' => array(
                            'rule' => array('numeric'),
                    ),
            ),
            'event_info_url' => array(
                    'notempty' => array(
                            'rule' => array('notempty'),
                    ),
            ),
    );

    var $belongsTo = array(
            'SafcMatchtype' => array(
                    'className' => 'SafcMatchtype',
                    'foreignKey' => 'safc_matchtype_id'
            ),
            'SafcLeague' => array(
                    'className' => 'SafcLeague',
                    'foreignKey' => 'safc_league_id'
            ),
            'SafcChannel' => array(
                    'className' => 'SafcChannel',
                    'foreignKey' => 'safc_channel_id'
            ),
            'SafcProfile' => array(
                    'className' => 'SafcProfile',
                    'foreignKey' => 'safc_profile_id'
            ),
            'SafcSource' => array(
                    'className' => 'SafcSource',
                    'foreignKey' => 'safc_source_id'
            ),
            'SafcTeam' => array(
                    'className' => 'SafcTeam',
                    'foreignKey' => 'home_id'
            )
    ); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:07:10.843

Cake 不支持开箱即用的复杂 FK，您可以像这样定义具有条件的关系

```
public $hasMany = array(
    'TheRelation' => array(
        'foreignKey' => false,
        'conditions' => array(
            ... conditions ...
        )
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T19:19:53.903

您必须为 SafcTeam 模型的每个关系使用别名：

```
var $belongsTo = array(

//relationship for your home_id fk
        'SafcHomeTeam' => array(
                'className' => 'SafcTeam',
                'foreignKey' => 'home_id'
        ),

 //relationship for your away_id key
            'SafcAwayTeam' => array(
                    'className' => 'SafcTeam',
                    'foreignKey' => 'away_id'
            )
    ); 
```

以及相关的 safc 团队模型中：

```
var $hasMany = array(
        'SafcHomeTeam' => array(
                'className' => 'SafcEvent',
                'foreignKey' => 'home_id',
        ),
       'SafcAwayTeam' => array(
                'className' => 'SafcEvent',
                'foreignKey' => 'away_id',
        )
); 
```

在您的 SafcEvents 控制器中的操作添加和编辑中添加：

```
//to respect cake conventions need the select list to be plural (Teams <--- with a s at the end)
    $safcHomeTeams = $this->SafcEvent->SafcHomeTeam->find('list');
$safcAwayTeams = $this->SafcEvent->SafcAwayTeam->find('list'); 
```

//还将这些列表传递给视图 $this->set(compact('SafcAwayTeams', 'SafcHomeTeams));

在安全事件视图中添加和编辑

在表格部分：

```
//to respect cake convention to construct your select input properly 
//you need to refere to the list established in the controller ($SafcHomeTeams by using $SafcHomeTeam_id <--singular + "_" + "id")
        echo $this->Form->input('SafcAwayTeam_id'); 
        echo $this->Form->input('SafcHomeTeam_id'); 
```

# java - 二维数组运算

> ID：13885769
> 
> 赞同：0
> 
> 时间：2012-12-14T20:27:13.823
> 
> 标签：java, arrays, 2d

执行此操作的正确代码是什么：

`calculatePercentage`使用参数`int exam[][] int percentages[]`和返回类型调用的新方法`void`？

该方法必须计算所有已入库的百分比`int exam[][]`。存储在其中的对象`exam[][]`是 /20 上的结果。百分比必须为 /100。

非常感谢你，因为我不知道这行得通。

检查[][]中的数据是如何插入的

```
private void insertExamResults(int array[][])
    {
        int[] exam = new int[3];
        for (int teller = 0; teller < 3; teller++)
        {
            int i = 0;
            exam[i] = Integer.parseInt(JOptionPane.showInputDialog("Exams of student " + teller + " (max = 5)"));
            i++;
        }
    } 
```

我写的新方法：

```
public void calculatePercentage(int exam[][], int percentages[])
    {
        for (int i = 0; i < 3; i++)
            for (int j = 0; j < 5; j++)
            {
                //code for the sum of all elements on row
                            //stock this new value in a new array percentages[]
            }
    } 
```

双数组考试有 3 行和 5 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:41:57.043

从这样的事情开始：

```
for (int i=0; i < 8; i++)
   for (int j=0; j < 8; j++)
      board[i][j] = i+j; 
```

# php - 用 wp_pagenavi 查询？

> ID：13885770
> 
> 赞同：0
> 
> 时间：2012-12-14T20:27:15.000
> 
> 标签：php, wordpress

我使用以下代码查询所有帖子

```
<?php
$paged = get_query_var('paged') ? get_query_var('paged') : 1;
query_posts(array(
'post_type'         => 'san-pham',                          'posts_per_page'    => 8,
'paged'         => $paged,
'order'         => 'DESC',
)
);
?>
<?php $i=1; while(have_posts()) : the_post(); ?>
//
<?php $i++; endwhile ?>
<?php if (function_exists('wp_pagenavi')) {
wp_pagenavi(); } ?> 
```

现在我想查询特定类别的所有帖子。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T10:50:58.487

```
<?php 
    $paged = get_query_var('paged') ? get_query_var('paged') : 1;
        $args = array(
        'post_type'  => 'san-pham',  
        'post_status' => 'publish',
        'paged'         => $paged,
        'posts_per_page' => 8,
        'order'         => 'DESC',
);
    $query = new WP_Query($args);  
        if ($query->have_posts()):
            while ( $query->have_posts() ):
                $query->the_post(); 
?>      
        //content
 <?php endwhile; ?>

    <?php if (function_exists('wp_pagenavi')): ?>
        <?php wp_pagenavi( array( 'query' => $query ) ); ?>
    <?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:09:39.953

您可以在 query_posts 数组中添加 category_name

例如

query_posts('showposts=3&category_name=博客&orderby=ID&paged='.$paged);

# php - Capifony 错误失败：“sh -c 'git

> ID：13885771
> 
> 赞同：1
> 
> 时间：2012-12-14T20:27:19.417
> 
> 标签：php, windows, ubuntu, symfony, capifony

我正在尝试使用 capifony 部署我的 symfony 2 应用程序，我已经阅读了文档，但我似乎无法找到解决我的错误的方法。

```
failed: "sh -c 'git clone -q git@***.org:***/***.git public_html/new/releases/20121214201830 && cd public_html/new/releases/20121214201830 && git checkout -q -b deploy f2438d8b8873e7af474c7ad6111090dadc106de0 && (echo f2438d8b8873e7af474c7ad6111090dadc106de0 > public_html/new/releases/20121214201830/REVISION)'" on ***.hostgator.com 
```

我对 webhost 有 shell 访问权限，并且存储库与 ssh 一起工作正常

我希望有人可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:04:06.633

我找到了解决方案，对于为此花费数小时的人来说，这就是解决方案。

*   首先，您应该在 deploy.rb 中启用最高级别的日志记录，这样您就可以看到每条错误消息，而不仅仅是“失败”。要做到这一点：

    # 重要 = 0

    # 信息 = 1

    # 调试 = 2

    # 跟踪 = 3

    # MAX_LEVEL = 3

    logger.level = 记录器::MAX_LEVEL

这是最重要的部分，然后我收到一条消息说我的公钥不正确，只需将您的 ssh 密钥从本地计算机复制到要部署到的计算机，并确保您的 ssh 密钥在您的 git 帐户中

希望这可以为人们节省一些时间

# c# - 数据列表回发问题

> ID：13885772
> 
> 赞同：0
> 
> 时间：2012-12-14T20:27:20.297
> 
> 标签：c#, asp.net

我的 asp.net 页面上有一个 Datalist，`ImageButton`其中`<Item Template>`. 单击an 时`ImageButton`，我使用`ItemCommand`事件设置数据项的边框：

```
 protected void dlProducts_ItemCommand(object source, DataListCommandEventArgs e)
    {
        e.Item.BorderColor = System.Drawing.ColorTranslator.FromHtml("#ff5800");
        e.Item.BackColor = System.Drawing.ColorTranslator.FromHtml("#ffeee5");

    } 
```

这很好用，但是当回发发生时边框会消失。我尝试在页面加载事件中绑定我的数据列表，如下所示：

```
if (!Page.IsPostBack)
        {
            dlProducts.DataSource = ObjectDataSource4;
            dlProducts.DataKeyField = "Product_ID";
            dlProducts.DataBind();
        } 
```

但是回发后边界消失了。是什么赋予了？

这是数据列表标记：

```
<asp:DataList ID="dlProducts" runat="server" CellPadding="5" CellSpacing="5"
           OnItemCommand="dlProducts_ItemCommand"
        RepeatColumns="4" RepeatDirection="Horizontal"
            ondatabinding="dlProducts_DataBinding" 
            onitemdatabound="dlProducts_ItemDataBound"  >
            <ItemTemplate>
                <asp:ImageButton ID="img" ImageAlign="Middle" runat="server" 
            ImageUrl='<%# "~/uploads/profile/" + DataBinder.Eval(Container.DataItem,"ProfileImageName").ToString() %>' 
            onclick="img_Click" />
            </ItemTemplate>
    </asp:DataList><asp:ObjectDataSource ID="ObjectDataSource4" runat="server" SelectMethod="GetAllCompetitorProducts"
        TypeName="DalProduct" OldValuesParameterFormatString="original_{0}">
        <SelectParameters>
            <asp:SessionParameter Name="producttype_id" SessionField="ProductType_id" Type="Int32" DefaultValue="13" />
            <asp:SessionParameter DefaultValue="2009" Name="Year" SessionField="Year" Type="Int32" />
        </SelectParameters>
    </asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:42:59.350

试试这个：

```
 <ItemTemplate>
    <div id="divImg" runat="server">
     <asp:ImageButton ID="img" ImageAlign="Middle" runat="server" 
                ImageUrl='<%# "~/uploads/profile/" + DataBinder.Eval(Container.DataItem,"ProfileImageName").ToString() %>' 
                onclick="img_Click" />

    </div>
 </ItemTemplate> 
```

在 ItemCommand 中

```
 protected void dlProducts_ItemCommand(object source, DataListCommandEventArgs e)
 {
        var divImg = (HtmlGenericControl)e.Item.FindControl("divImg");
        divImg.Style.Add("background-color", "#ffeee5"); 
 } 
```

如您所见，img 控件现在包装在服务器 div 元素中，因此当回发发生时，它会自动从视图状态恢复其状态。话虽如此，它在回发时工作得很好，但如果你重新绑定你的网格，它就会失去它的风格。为了让它在重新绑定后持续存在，在 itemcommand 上将 img 的 id 存储在 viewstate 中并应用相应的样式。

另外，我建议对 div 元素使用类属性，而不是在代码隐藏中应用颜色。

```
divImg.Attributes.Add("class", "classnamewhichhasgroundandbordercolor"); 
```

# javascript - Raphael.js - 向元素注册多个事件

> ID：13885773
> 
> 赞同：3
> 
> 时间：2012-12-14T20:27:19.813
> 
> 标签：javascript, events, raphael

我的问题是我需要处理矩形的多个事件。听起来很简单，例如这行得通

```
 node.click(function(e){
     click(); // this is function defined in same scope, it works ok
  });

  node.mouseout(function(e){
     mouseout();  
  }); 
```

但是，我想自动化这个，所以它应该是这样的：

```
var events = new Array("click", "mouseout");
for(var i in events){
     node[events[i]](function(e){
         events[i](); /*THIS is problem, no matter if it is click or mouseout
                        this always fires function with same name as last item
                        in events array (in this case mouseout) 
                      */
     }
} 
```

你知道为什么我应该如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:29:40.237

您在循环中创建的处理程序共享一个变量。当它们被调用时，变量是循环中的最后一个值。

您必须使用我称之为“冻结闭包”的技术，以便每个处理程序都获得共享变量的单独副本。在您的情况下，更改的共享变量是`i`

你的另一个问题是你想从一个字符串中调用你的函数“click/mouseout”，所以你必须得到函数的句柄，现在你的代码正在尝试调用`"hello"()`它不起作用

您的最后一个问题（但还不是错误）是您不应该使用 Array 构造函数，也不应该使用`for in`循环来迭代数组。

```
function createHandler(eventName) {
    return function(e) {
        window[eventName]();
    }
}

var events = ["click", "mouseout"];
for(var i=0; i < events.length; i++){
     node[events[i]](createHandler(events[i]));
} 
```

上面的例子更容易理解，但你可以使用自调用匿名函数来做同样的事情

```
var events = ["click", "mouseout"];
for(var i=0; i < events.length; i++){
     node[events[i]]((function(eventName){
         return function(e) {
             window[eventName]();
         };
     })(events[i]));
} 
```

# c# - 类当前“级别”的调用方法

> ID：13885774
> 
> 赞同：1
> 
> 时间：2012-12-14T20:27:23.083
> 
> 标签：c#, class, inheritance

**是否可以在类继承中调用当前类方法？**

假设我们有一个 A 类和一个从 A 继承的 B 类。现在两者都有一个“初始化”方法，这意味着它在 B 中被覆盖。现在我**不能**使用“base.initialize”从那里调用 A 的“初始化” . 相反，我试图从较低的类构造函数（所以 A 的构造函数）调用它，它会为所有继承的类调用。

所以现在我想**在 A 的构造函数上调用 A 的“初始化”**。但是当我尝试这样做时，会调用 B 的重写构造函数。

那么有什么可以告诉 VS（或 c#）我正在显式调用我当前所在的类的方法（this.method() 不起作用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:35:06.063

如果将方法标记`Initialize`为虚拟方法，则意味着派生类可以自由地覆盖该方法，可能不会`base.Initialize`在进程中调用。如果发生这种情况不合适，则不要将该方法标记为虚拟方法。

就您而言，听起来您只需要`Initialize`在每个类中使用两个私有方法：

```
public class A
{
    public A()
    {
        Initialize();
    }

    private void Initialize()
    {
    }
}

public class B : A
{
    public B()
    {
        Initialize();
    }

    private void Initialize()
    {
    }
} 
```

或者，您可能想看看[模板方法设计模式](http://en.wikipedia.org/wiki/Template_method_pattern)。你可以这样设计你的类：

```
public class A
{
    public A()
    {
        Initialize();
    }

    private void Initialize()
    {
        // Initialize the base class A.

        // Then call DerivedInitialize. If this is actually a derived object,
        // DerivedInitialize will initialize the derived instance. Otherwise,
        // it won't do anything.
        DerivedInitialize();
    }

    protected virtual void DerivedInitialize()
    {
    }
}

public class B : A
{
    public B()
    {
        Initialize();
    }

    protected override void DerivedInitialize()
    {
        // Initialize B-specific stuff...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:31:13.013

将您的内容放入`A.initialize()`一个新的私有非虚拟方法中。`A`从的构造函数和调用这个新方法`A.initialize()`。

# c++ - 模拟到数字 cplus plus 编程

> ID：13885776
> 
> 赞同：-4
> 
> 时间：2012-12-14T20:27:46.387
> 
> 标签：c++, linux, analog-digital-converter

我正在编写一个模拟到数字设备的编码，其中包括 api 和驱动器以与设备接口。我的问题是我在哪里可以上网找到更多信息来源，以帮助我了解如何处理缓冲区中的位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T20:39:59.550

您的问题在很大程度上依赖于 ADC（模数转换器）的数据表和通信方法。你提供的都没有。

例如，我正在使用通过 SPI 总线与 ARM 7 微控制器通信的 14 位 ADC。ADC 的数据表将告诉我这些位是什么以及它们在我的“缓冲区”中的顺序。

ADC 芯片可以通过 SPI 总线连接，也可以并行访问。哪个是你的？

你如何从你的 Linux 机器上与设备对话？

由于您没有先搜索网络，因此您获得了反对票。您可以通过搜索“linux C++ adc”并搜索您的 ADC 的部件号来获取大量信息。

# eclipse - 在 Eclipse 中使用“F3”键启动独立编辑器

> ID：13885780
> 
> 赞同：2
> 
> 时间：2012-12-14T20:28:11.457
> 
> 标签：eclipse, keyboard-shortcuts

我使用 Eclipse 的“F3”键来调用类、方法或任何东西的定义。

![在此处输入图像描述](../Images/281f2970cc17086dd3c2788a70c3f223.png)

当我在某个类上单击“F3”键时，它不是在 Eclipse 中打开该类，而是打开包含该类的 java 文件。

![在此处输入图像描述](../Images/ad684728ca0b428752fa38deb495aa0e.png)

我在 Eclipse 中的设置有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T22:24:12.893

该问题可能由两个原因引起：

1) 文件关联或内容类型关联配置错误。这可以修复导航到：

Window > Preferences > General > Editors 并确保：

a）“*.java”的*默认*（即第一个）关联编辑器是“Java Editor” b）（如果a）没有解决问题）在“Content Types”选项中，内容类型为“Java Source File " 与 *.java 相关联。

或者可能，

2）如果问题仅发生在某些文件（不是全部）上：

可能您可能在其中一些文件上使用了“打开方式...”选项，因此 Eclipse 会记住该选择，因此下次您尝试打开任何这些文件时，会打开一个外部编辑器而不是默认的内置编辑器一。

AFAIK，有两种可能的方法来解决这个问题，它们都不是非常优雅但有效：

a) 当使用外部编辑器打开某个文件时，右键单击它并选择“打开方式... -> 默认编辑器”。完成此操作后，该文件将不再使用外部编辑器打开。对相同情况下的任何其他文件执行相同操作。

b) 使用全新的工作空间并从头开始导入项目。

# c# - 生成结构以填充树的查询或算法（C#、LINQ）

> ID：13885783
> 
> 赞同：2
> 
> 时间：2012-12-14T20:28:17.823
> 
> 标签：c#, linq, entity-framework

我找不到或想出一个通用且优雅的算法来让我填充树状结构。最简单的例子是博客存档：我有一堆可以按日期选择和排序的记录。我想要一棵树，其中年份可能是最高级别，几个月是下一个级别，而实际的帖子标题又是下一个。

到目前为止，我已经想出了一个可行的简单直接实现，但我确信可以使用 LINQ 等进行改进。这里我只是按日期对记录进行排序并反复检查年份或月份是否发生了变化，然后添加相应的树节点。“BlogEntry”是一个类，它同时引用了父级和子级，后来用于生成 HTML。

我欢迎有关改进算法的建议！

```
IEnumerable<Post> posts = db.Posts.OrderBy(p => p.DateCreated);
var topPost = posts.First();

int curYear = topPost.DateCreated.Year;
int curMonth = topPost.DateCreated.Month;

//create first "year-level" item
var topYear = new BlogEntry { Name = topPost.DateCreated.Year.ToString().ToLink(string.Empty) };
entries.Add(topYear);
var currentYear = topYear;

var topMonth = new BlogEntry { Name = topPost.DateCreated.ToString("MMMM").ToLink(string.Empty), Parent = currentYear };
currentYear.Children.Add(topMonth);
var currentMonth = topMonth;

foreach (var post in posts)
{
    if(post.DateCreated.Year == curYear)
    {
        if (post.DateCreated.Month != curMonth)
        {
            //create "month-level" item
            var month = new BlogEntry { Name = post.DateCreated.ToString("MMMM").ToLink(string.Empty), Parent = currentYear };
            currentYear.Children.Add(month);
            currentMonth = month;

            curMonth = post.DateCreated.Month;
        }

        //create "blog entry level" item
        var blogEntry = new BlogEntry { Name = post.Title.ToLink("/Post/" + post.PostID + "/" + post.Title.ToSeoUrl() ), Parent = currentMonth };
        currentMonth.Children.Add(blogEntry);
    }
    else
    {
        //create "year-level" item
        var year = new BlogEntry { Name = post.DateCreated.Year.ToString().ToLink(string.Empty) };
        entries.Add(year);
        currentYear = year;

        curMonth = post.DateCreated.Month;
        curYear = post.DateCreated.Year;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T11:52:34.710

我创建了一个测试示例，以检查逻辑的正确性。我认为这就是你所需要的。

```
public class BlogEntyTreeItem
{
   public string Text { set; get; }
   public string URL { set; get; }
   public List<BlogEntyTreeItem> Children { set; get; }

   public List<BlogEntyTreeItem> GetTree()
   {
       NWDataContext db = new NWDataContext();
       var p = db.Posts.ToList();

       var list = p.GroupBy(g => g.DateCreated.Year).Select(g => new BlogEntyTreeItem
       {
           Text = g.Key.ToString(),
           Children = g.GroupBy(g1 => g1.DateCreated.ToString("MMMM")).Select(g1 => new BlogEntyTreeItem
           {
               Text = g1.Key,
               Children = g1.Select(i => new BlogEntyTreeItem { Text = i.Name }).ToList()
           }).ToList()
       }).ToList();

       return list;        
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:58:35.100

使用链接[Playing with Linq grouping: GroupByMany ?](http://blogs.msdn.com/b/mitsu/archive/2007/12/22/playing-with-linq-grouping-groupbymany.aspx) [如何使用 LINQ](https://stackoverflow.com/questions/2230202/how-can-i-hierarchically-group-data-using-linq) 对数据进行分层分组？

我首先将我的代码重构为

**解决方案 1**

```
var results = from allPosts in db.Posts.OrderBy(p => p.DateCreated)
        group allPosts by allPosts.DateCreated.Year into postsByYear

        select new
        {
            postsByYear.Key,
            SubGroups = from yearLevelPosts in postsByYear
                        group yearLevelPosts by yearLevelPosts.DateCreated.Month into postsByMonth
                        select new
                        {
                            postsByMonth.Key,
                            SubGroups = from monthLevelPosts in postsByMonth
                                           group monthLevelPosts by monthLevelPosts.Title into post
                                           select post
                        }
        };

foreach (var yearPosts in results)
{
    //create "year-level" item
    var year = new BlogEntry { Name = yearPosts.Key.ToString().ToLink(string.Empty) };
    entries.Add(year);
    foreach (var monthPosts in yearPosts.SubGroups)
    {
            //create "month-level" item
        var month = new BlogEntry { Name = new DateTime(2000, (int)monthPosts.Key, 1).ToString("MMMM").ToLink(string.Empty), Parent = year };
        year.Children.Add(month);
        foreach (var postEntry in monthPosts.SubGroups)
        {
            //create "blog entry level" item
            var post = postEntry.First() as Post;
            var blogEntry = new BlogEntry { Name = post.Title.ToLink("/Post/" + post.PostID + "/" + post.Title.ToSeoUrl()), Parent = month };
            month.Children.Add(blogEntry);                       
        }
    }
} 
```

然后变成更通用的

**解决方案 2**

```
var results = db.Posts.OrderBy(p => p.DateCreated).GroupByMany(p => p.DateCreated.Year, p => p.DateCreated.Month);

foreach (var yearPosts in results)
{
    //create "year-level" item
    var year = new BlogEntry { Name = yearPosts.Key.ToString().ToLink(string.Empty) };
    entries.Add(year);

    foreach (var monthPosts in yearPosts.SubGroups)
    {
            //create "month-level" item
        var month = new BlogEntry { Name = new DateTime(2000, (int)monthPosts.Key, 1).ToString("MMMM").ToLink(string.Empty), Parent = year };
        year.Children.Add(month);

        foreach (var postEntry in monthPosts.Items)
        {
            //create "blog entry level" item
            var post = postEntry as Post;
            var blogEntry = new BlogEntry { Name = post.Title.ToLink("/Post/" + post.PostID + "/" + post.Title.ToSeoUrl()), Parent = month };
            month.Children.Add(blogEntry);
        }
    }
}

................................................

public static class MyEnumerableExtensions
{
    public static IEnumerable<GroupResult> GroupByMany<TElement>(
        this IEnumerable<TElement> elements,
        params Func<TElement, object>[] groupSelectors)
    {
        if (groupSelectors.Length > 0)
        {
            var selector = groupSelectors.First();

            //reduce the list recursively until zero
            var nextSelectors = groupSelectors.Skip(1).ToArray();
            return
                elements.GroupBy(selector).Select(
                    g => new GroupResult
                    {
                        Key = g.Key,
                        Items = g,
                        SubGroups = g.GroupByMany(nextSelectors)
                    });
        }
        else
            return null;
    }
}

public class GroupResult
{
    public object Key { get; set; }
    public IEnumerable Items { get; set; }
    public IEnumerable<GroupResult> SubGroups { get; set; }
} 
```

# wpf - 如何以编程方式重新启动单实例应用程序

> ID：13885787
> 
> 赞同：5
> 
> 时间：2012-12-14T20:28:39.413
> 
> 标签：wpf, restart, single-instance

我的 WPF 程序使用[SingleInstance.cs](http://blogs.microsoft.co.il/blogs/arik/SingleInstance.cs.txt)来确保如果用户尝试通过双击它的快捷方式或其他某种机制来重新启动它，则它只有一个实例正在运行。但是，在我的程序中存在需要重新启动自身的情况。这是我用来执行重启的代码：

```
App.Current.Exit += delegate( object s, ExitEventArgs args ) {
    if ( !string.IsNullOrEmpty( App.ResourceAssembly.Location ) ) {
        Process.Start( App.ResourceAssembly.Location );
    }
};

// Shut down this application.
App.Current.Shutdown(); 
```

这在大多数情况下都有效，但问题是它并不总是有效。我的猜测是，在某些系统上，第一个实例及其`RemoteService`创建的实例尚未终止，这会导致调用 to 启动的进程`Process.Start( App.ResourceAssembly.Location );`终止。

这是我的 app.xaml.cs 中的 Main 方法：

```
[STAThread]
public static void Main() {
    bool isFirstInstance = false;

    for ( int i = 1; i <= MAXTRIES; i++ ) {
        try {
            isFirstInstance = SingleInstance<App>.InitializeAsFirstInstance( Unique );
            break;

        } catch ( RemotingException ) {
            break;

        } catch ( Exception ) {
            if ( i == MAXTRIES )
                return;
        }
    }    

    if ( isFirstInstance ) {
        SplashScreen splashScreen = new SplashScreen( "splashmph900.png" );
        splashScreen.Show( true );

        var application = new App();
        application.InitializeComponent();
        application.Run();

        SingleInstance<App>.Cleanup();
    }
} 
```

如果以编程方式重新启动新实例，那么获取此代码以允许启动新实例的正确方法是什么？我应该添加一个`bool`标志`Restarting`并在`for`循环中等待调用`SingleInstance<App>.InitializeAsFirstInstance`返回 true 吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T20:53:27.957

要做的一件事是，当您调用 Process.Start 时，将参数传递给可执行文件，告诉它这是“内部重启”情况。然后，该进程可以通过等待更长的时间让该进程退出来处理该问题。您甚至可以告诉它 ProcessID 或其他内容，以便它知道要注意什么。

# php - 存储 mysql 口音与 html-entities 的优点/缺点？

> ID：13885790
> 
> 赞同：0
> 
> 时间：2012-12-14T20:29:06.523
> 
> 标签：php, mysql, character-encoding

> **可能重复：**
> [php mysql 字符集：存储国际内容的 html](https://stackoverflow.com/questions/681228/php-mysql-character-set-storing-html-of-international-content)

我想知道我应该将我的口音（ë，é，è...）存储为 HTML-ENTITIES，例如`&euml;`还是直接存储在我的 mysql 数据库中？

我打算将它主要用于`echo`php 或通过 php 搜索引擎搜索。

优缺点都有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:43:22.887

将它们存储在有效的编码中，而不转换为 HTML 实体。[由于Character Sets 和 Collat​​ions](https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)，排序和比较将在数据库中运行良好。

在回声时间（后处理）中对值进行编码始终是一种好习惯。但是过滤（以剥离标签为例）应该在保存（预处理）之前完成。

# qmail - Qmail 日志：很多未经身份验证的发件人

> ID：13885793
> 
> 赞同：1
> 
> 时间：2012-12-14T20:29:13.337
> 
> 标签：qmail

在 qmail 日志中有很多以下行：

```
2012-12-14 18:04:49.314299500 simscan:[9999]:CLEAN (4.00/50.00):2.2875s:Delivery Status Notification (Failure):aa.aa.aa.aa::info@xxxx.it
2012-12-14 18:04:49.657999500 CHKUSER accepted rcpt: from <::> remote <utility-xxxx.it:unknown:aa.aa.aa.aa> rcpt <info@xxx.it> : found existing recipient
2012-12-14 18:04:49.658005500 policy_check: local  -> local info@xxxx.it (UNAUTHENTICATED SENDER)
2012-12-14 18:04:49.658016500 policy_check: policy allows transmission
2012-12-14 18:04:49.658019500 spamdyke[9945]: ALLOWED from: (unknown) to: info@xxxx.it origin_ip: 82.85.185.32 origin_rdns: utility-xxxxx.it auth: (unknown) 
```

和

```
12-14 18:03:57 CHKUSER accepted rcpt: from <::> remote <utility-xxxx.it:unknown:aa.aa.aa.aa> rcpt <info@xxxx.it> : found existing recipient
12-14 18:03:57 policy_check: local  -> local info@xxxx.it (UNAUTHENTICATED SENDER)
12-14 18:03:57 spamdyke[9945]: ALLOWED from: (unknown) to: info@xxxx.it origin_ip: aa.aa.aa.aa origin_rdns: utility-xxxx.it auth: (unknown)
12-14 18:03:59 simscan:[9999]:CLEAN (4.00/50.00):2.4153s:Delivery Status Notification (Failure):aa.aa.aa.aa::info@xxxx.it
12-14 18:04:00 CHKUSER accepted rcpt: from <::> remote <utility-xxxx.it:unknown:aa.aa.aa.aa> rcpt <info@xxxx.it> : found existing recipient
12-14 18:04:00 policy_check: local  -> local info@xxxx.it (UNAUTHENTICATED SENDER)
12-14 18:04:00 spamdyke[9945]: ALLOWED from: (unknown) to: info@xxxx.it origin_ip: aa.aa.aa.aa origin_rdns: utility-xxxx.it auth: (unknown)
12-14 18:04:02 simscan:[9999]:CLEAN (4.00/50.00):2.5481s:Delivery Status Notification (Failure):aa.aa.aa.aa::info@xxxx.it
12-14 18:04:02 CHKUSER accepted rcpt: from <::> remote <utility-xxxx.it:unknown:aa.aa.aa.aa> rcpt <info@xxxx.it> : found existing recipient
12-14 18:04:02 policy_check: local  -> local info@xxxx.it (UNAUTHENTICATED SENDER)
12-14 18:04:02 spamdyke[9945]: ALLOWED from: (unknown) to: info@xxxx.it origin_ip: aa.aa.aa.aa origin_rdns: utility-xxxx.it auth: (unknown) 
```

这是否意味着不需要的东西？谢谢...我对qmail完全陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:14:08.307

可能这些是用户 info@xxxx.it 收到的退回邮件

> 12-14 18:03:57 CHKUSER 接受了 rcpt：来自 <::> 远程 rcpt：找到了现有的收件人

可能有人欺骗了发件人的邮件 ID，并且可能正在执行一些垃圾邮件活动。众所周知，垃圾邮件发送者向随机 ID 发送邮件，其中大多数不存在。作为回报，发件人 ID 会收到一条退回消息。

只需验证它。

# r - 将观测值除以周期平均值。帮助简化代码

> ID：13885796
> 
> 赞同：2
> 
> 时间：2012-12-14T20:29:18.813
> 
> 标签：r, time-series, xts, mean

数据链接： http: [//dl.dropbox.com/u/56075871/data.txt](http://dl.dropbox.com/u/56075871/data.txt)

我想将每个观察值除以那个小时的平均值。例子：

```
2012-01-02 10:00:00     5.23
2012-01-03 10:00:00     5.28
2012-01-04 10:00:00     5.29
2012-01-05 10:00:00     5.29
2012-01-09 10:00:00     5.28
2012-01-10 10:00:00     5.33
2012-01-11 10:00:00     5.42
2012-01-12 10:00:00     5.55
2012-01-13 10:00:00     5.68
2012-01-16 10:00:00     5.53 
```

平均为 5.388。接下来我想将每个观察值除以该平均值，所以... 5.23/5.388, 5.28/5.388, ... 直到结束 5.53/5.388

我有 10 只股票的每小时时间序列：

```
 S1.1h   S2.1h     S3.1h   S4.1h  S5.1h       S6.1h    S7.1h  S8.1h      S9.1h       S10.1h
2012-01-02 10:00:00     64.00   110.7     5.23    142.0  20.75       34.12    32.53  311.9      7.82        5.31
2012-01-02 11:00:00     64.00   110.8     5.30    143.2  20.90       34.27    32.81  312.0      7.97        5.34
2012-01-02 12:00:00     64.00   111.1     5.30    142.8  20.90       34.28    32.70  312.4      7.98        5.33
2012-01-02 13:00:00     61.45   114.7     5.30    143.1  21.01       34.35    32.85  313.0      7.96        5.35
2012-01-02 14:00:00     61.45   116.2     5.26    143.7  21.10       34.60    32.99  312.9      7.95        5.36
2012-01-02 15:00:00     63.95   116.2     5.26    143.2  21.26       34.72    33.00  312.6      7.99        5.37
2012-01-02 16:00:00     63.95   117.3     5.25    143.3  21.27       35.08    33.04  312.7      7.99        5.36
2012-01-02 17:00:00     63.95   117.8     5.24    144.7  21.25       35.40    33.10  313.6      7.99        5.40
2012-01-02 18:00:00     63.95   117.9     5.23    145.0  21.20       35.50    33.17  312.5      7.98        5.35
2012-01-03 10:00:00     63.95   115.5     5.28    143.5  21.15       35.31    33.05  311.7      7.94        5.37
... 
```

而且我想将每个观察值除以小时（定期）的平均值我有一些代码。要制作的代码意味着：

```
#10:00:00, 11:00:00, ... 18:00:00
times <- paste(seq(10, 18),":00:00", sep="")
#means - matrix of means for timeseries and hour
means <- matrix(ncol= ncol(time_series), nrow = length(times))
for (t in 1:length(times)) {
  #t is time 10 to 18
  for(i in 1:ncol(time_series)) {
    #i is stock 1 to 10
    # hour mean for each observation in data
    means[t,i] <- mean(time_series[grep(times[t], index(time_series)), i])
  }
} 
```

我的功能是“完成任务”：

```
for (t in 1:length(times)) {
  # get all dates with times[t] hour
  hours <- time_series[grep(times[t], index(time_series))]
  ep <- endpoints(hours, "hours")

  out <- rbind(out, period.apply(hours, INDEX=ep, FUN=function(x) {
    x/means[t,]
  }))
} 
```

我知道这很糟糕，但它确实有效。我怎样才能简化代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:21:22.393

这是一种方法：

```
# Split the xts object into chunks by hour
# .indexhour() returns the hourly portion for each timestamp
s <- split(time_series, .indexhour(time_series))
# Use sweep to divide each value of x by colMeans(x) for each group of hours
l <- lapply(s, function(x) sweep(x, 2, colMeans(x), FUN="/"))
# rbind everything back together
r <- do.call(rbind, l) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:36:35.983

该`scale`功能可以做到这一点。与`ave`您一起使用可以限制在数小时内进行计算。`dput`在 xts/zoo 对象上发布结果，您将得到快速回复。

# authentication - 如何使用 AngularJS ngView 为未经授权的用户隐藏模板？

> ID：13885805
> 
> 赞同：12
> 
> 时间：2012-12-14T20:29:56.537
> 
> 标签：authentication, angularjs

我有一个基本的 PHP 应用程序，其中用户登录存储在 HTTP 会话中。该应用程序有一个主模板，比如 index.html，它使用 ngView 切换子视图，如下所示

```
<body ng-controller='MainCtrl'>
    <div ng-view></div>
</body> 
```

现在，这个主模板可以通过基本的 PHP 控件进行保护，但我有子模板（即用户列表、添加用户、编辑用户等），它们是纯 html 文件，根据我的路由设置从角度包含。

虽然我能够检查与 http 服务请求有关的身份验证，但一位用户能够导航到子模板 url 并访问它。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T17:17:48.537

我会创建这样的服务：

```
app.factory('routeAuths', [ function() {
  // any path that starts with /template1 will be restricted
  var routeAuths = [{
      path : '/template1.*',
      access : 'restricted'
  }];
  return {
    get : function(path) {
      //you can expand the matching algorithm for wildcards etc.
      var routeAuth;
      for ( var i = 0; i < routeAuths.length; i += 1) {
        routeAuth = routeAuths[i];
        var routeAuthRegex = new RegExp(routeAuth.path);
        if (routeAuthRegex.test(path)) {
          if (routeAuth.access === 'restricted') {
            return {
              access : 'restricted',
              path : path
            };
          }
        }
      }
      // you can also make the default 'restricted' and check only for 'allowed'
      return {
        access : 'allowed',
        path : path
      };
    }
  };
} ]); 
```

并在主/根控制器中监听`$locationChangeStart`事件：

```
app.controller('AppController', ['$scope', '$route', '$routeParams', '$location', 'routeAuths',
  function(scope, route, routeParams, location, routeAuths) {
    scope.route = route;
    scope.routeParams = routeParams;
    scope.location = location;

    scope.routeAuth = {
    };

    scope.$on('$locationChangeStart', function(event, newVal, oldVal) {
      var routeAuth = routeAuths.get(location.path());
      if (routeAuth.access === 'restricted') {
        if (scope.routeAuth.allowed) {
          event.preventDefault();
        }
        else {
          //if the browser navigates with a direct url that is restricted
          //redirect to a default
          location.url('/main');
        }
        scope.routeAuth.restricted = routeAuth;
      }
      else {
        scope.routeAuth.allowed = routeAuth;
        scope.routeAuth.restricted = undefined;
      }
    });

}]); 
```

**演示**：

*   [笨蛋](http://plnkr.co/edit/JlB4i0eOZKbzdObOYBYj)

**参考资料**：

*   [angularjs 服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)
*   [地点](http://docs.angularjs.org/api/ng.$location)

**更新**：

为了完全防止 html 模板访问，最好也在服务器上完成。因为如果您从服务器上的静态文件夹提供 html，用户可以直接访问该文件，例如：root_url/templates/template1.html，从而绕过角度检查器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:59:25.423

如果您想阻止他们访问该页面，请创建一个服务：[http ://docs.angularjs.org/guide/dev_guide.services.creating_services](http://docs.angularjs.org/guide/dev_guide.services.creating_services)

此服务可以由您向 routeParams 注册的所有控制器注入依赖项。

在该服务中，您可以拥有一个功能，该功能将检查该人是否已登录，然后使用[http://docs.angularjs.org/api/重新路由他们（可能返回登录页面？） ng](http://docs.angularjs.org/api/ng) .$location#path。在每个控制器中调用此函数，如下所示：

```
function myController(myServiceChecker){
    myServiceChecker.makeSureLoggedIn();
} 
```

makeSureLoggedIn 函数将检查他们所在的当前 url（使用 $location.path），如果不是允许的，则将它们重定向回允许的页面。

我很想知道是否有办法阻止 routeParams 甚至触发，但至少这会让你做你想做的事。

编辑：还可以在这里查看我的答案，您甚至可以阻止他们访问该页面：

[AngularJS - 检测、停止和取消路由更改](https://stackoverflow.com/questions/13962351/angularjs-detecting-stalling-and-cancelling-route-changes/)

# c# - ZipDotNet 从目录返回文件路径到 zip

> ID：13885809
> 
> 赞同：0
> 
> 时间：2012-12-14T20:30:07.507
> 
> 标签：c#, wpf

我已经设法从档案中获取文件，但我得到了这样的值......

```
ZipEntry://path/to/file 
```

我怎么会像这样得到文件路径......

```
path/to/file 
```

到目前为止，这是我的代码

```
internal static Array GetFiles(string haystack, string needle = "*")
{
  var resources = ZipFile.Read(ResourcePath);
  resources.Password = ResourcePassword;
  return resources.SelectEntries(needle, haystack).ToArray();
} 
```

请注意，这是没有错误检查的基本代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:34:57.107

只需替换每个条目的 ZipEntry 前缀即可。

```
path.Replace("ZipEntry://", ""); 
```

# sql - 是否可以将变量传递给 SQL/DDL 脚本？

> ID：13885811
> 
> 赞同：4
> 
> 时间：2012-12-14T20:30:21.880
> 
> 标签：sql, oracle, schema, ddl

我们有一堆脚本来重新定义我们的数据库。我们运行的脚本调用了一堆其他脚本：

```
@@set_target_schema
@@drop_all

-- do some other stuff - create tables, insert data, etc

commit; 
```

set_target_schema.sql 看起来像：

```
define TARGET_SCHEMA="OUR_APP_NAME" 
```

有没有办法将可选参数传递给我们的顶级脚本，然后将该参数传递给 set_target_schema.sql 并使用该值作为模式的名称（如果提供），否则使用默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:21:40.850

为了能够使用默认值，您可以执行以下操作：

在你的主文件中：

```
SET VERIFY OFF

-- specify as many substitution variable as you need to. 
COLUMN 1 NEW_VALUE 1 noprint
COLUMN 2 NEW_VALUE 2 noprint
REM COLUMN 3 NEW_VALUE 3 noprint
REM ..........
REM COLUMN <N> NEW_VALUE <N> noprint    

SELECT '' "1"
     , '' "2"
  FROM dual
 WHERE 0 = 1;

-- Default values.
select decode('&1', null, 'Default1', '&1') "1" 
     , decode('&2', null, 'Default1', '&2') "2"
 from dual;

-- prints substitution variables' values
@@set_target_schema.sql '&1' '&2'

undefine 1
undefine 2 
```

结果：

```
-- without parameters 
SQL> @c:\main.sql

'DEFAULT 'DEFAULT                                                               
-------- --------                                                               
Default1 Default1    

-- with parameters                                                         
SQL> @c:\main.sql parameter1 parameter2

'PARAMETER 'PARAMETER                                                           
---------- ----------                                                           
parameter1 parameter2 
```

# vba - 使 excel 图表中的特定系列（线）不可见

> ID：13885816
> 
> 赞同：3
> 
> 时间：2012-12-14T20:30:55.307
> 
> 标签：vba, excel

所以我有一个图表，上面有 6 个系列，我希望能够使用一组 ActiveX 复选框使每个系列可见或不可见。到目前为止，复选框似乎工作正常，但我不知道如何使单个系列不可见。我可以使用该系列的属性使其不可见吗？谷歌和微软的帮助并没有为我打开它。

（当然，这并不意味着它不存在......）

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T20:42:49.353

**更新**

等等，我记得我以前遇到过这个。隐藏所需数据的一个好方法是隐藏正在绘制的数据的实际行/列。因此，您的 ActiveX 控件不会触及图表，而是隐藏/取消隐藏图表数据的列/行。

您只需要设置图表数据，使其不会干扰需要显示的任何其他数据。

**为了任何人的利益而留下我原来的答案......**

我刚刚录制了一个宏并用它玩了......

得到了这个伟大的结果：

```
ActiveSheet.ChartObjects("Chart 1").Activate
ActiveChart.SeriesCollection(1).Select

'Turn it on
Selection.Format.Line.Visible = msoTrue
'Turn it off
Selection.Format.Line.Visible = msoFalse 
```

这相当于`No Line`在“格式化数据系列”对话框的“线条颜色”部分中进行选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T20:37:02.093

当我在 Excel 中遇到困难时，我总是尝试录制一个宏，比如 WWBGD？（比尔盖茨会怎么做？）

这是条形图的结果，我将填充设置为“无”：

```
ActiveSheet.ChartObjects("Chart 1").Activate
ActiveChart.SeriesCollection(1).Select
Selection.Format.Fill.Visible = msoFalse 
```

这有帮助吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T20:54:07.257

以上 2对我**不起作用**，以防`ChartType = xlLineMarkers`. 起作用的是：

```
For Each mySeries In .SeriesCollection
    With mySeries
        .Border.LineStyle = xlNone
        .MarkerStyle = xlNone            
        .MarkerBackgroundColorIndex = xlColorIndexNone
    End With
Next 
```

但是，图例仍然显示该行。有必要单独删除该条目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-23T18:14:21.050

在 Excel 2013 中，要使系列不可见，也将其从图例中移除等，请使用过滤器选项 . Vba 示例：

以下代码通过在图表中过滤出/入来隐藏/恢复系列。ActiveSheet.ChartObjects("图表 1").Chart.FullSeriesCollection(1).IsFiltered = True / False

这相当于使用功能区命令设计 +选择数据手动过滤串联/输出（选择CHAR时可用）。

所有系列选项，如破折号颜色、标记等。都恢复不变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-28T15:04:20.467

```
ActiveSheet.ChartObjects("Chart 1").Activate
ActiveChart.SeriesCollection(linenumber).Select
Selection.Format.Fill.Visible = msoFalse 
```

这很好用，选择图表而不是我有 24 行，带有复选框和 24 个条目的列表视图。点击1，它消失，再次点击它的背面。您还可以看到线 dis- 并出现在图例中。

# regex - Oracle Regex 删除小词

> ID：13885819
> 
> 赞同：2
> 
> 时间：2012-12-14T20:31:09.820
> 
> 标签：regex, string, oracle11g

我正在尝试清理一些最初是用户输入的地址目录以供以后处理。删除了数字和特殊字符后，现在我有了如下字符串：

```
ST SOMETHING SOMEWHERE H BL D S 
```

所以，`ST`代表街道、`H`房子等等。这里不想太精确，所以我认为现在只删除 3 个字符以下的内容就足够了，但我似乎无法在 Oracle 中找到正确的正则表达式。试过：

```
SELECT
    regexp_replace('ST SOMETHING SOMEWHERE H BL D S','[\ ^]\w{1,3}[\ $]', ' ')
FROM dual; 
```

产生：

```
ST SOMETHING SOMEWHERE BL S 
```

我希望我只有

```
SOMETHING SOMEWHERE 
```

有人可以帮帮我吗？

（我在 oracle 11g 上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:58:11.117

尝试

```
SELECT
  regexp_replace(
      '<raw string>'
     ,'(^|[[:space:]])([^[:space:]]{1,3}[[:space:]]+)*[^[:space:]]{1,3}([[:space:]]|$)'
     , ' '
  )
FROM dual; 
```

希望这将满足您的需求，问候，卡斯滕

# coffeescript - Coffeescript 中的字符串字面量是什么意思

> ID：13885822
> 
> 赞同：4
> 
> 时间：2012-12-14T20:31:29.130
> 
> 标签：coffeescript

Coffeescript[文档](http://coffeescript.org/#strings)包含以下内容

> 字符串插值、块字符串和块注释 Ruby 风格的字符串插值包含在 CoffeeScript 中。双引号字符串允许使用 #{ ... } 进行插值，而单引号字符串是文字。

有人可以在这里解释*“单引号字符串是文字”的*含义吗？

这是否意味着不会有任何解释？有更多的*javascripty*含义吗？

我问是因为我看到使用单引号字符串与双引号作为对象键时有所不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T20:33:55.950

```
name = "George"

"My Name: #{name}"    ====> "My Name: George"
'My Name: #{name}'    ====> "My Name: #{name}" 
```

*在这种情况下，字面*量意味着它就是您在字符串中所写的字面量

出于这个原因（以及其他一些原因），当字符串是对最终用户有意义的自然语言（例如错误消息）时，我喜欢使用双引号约定。以及对程序有意义的符号的单引号（如属性名称、标志、模块名称等）。

不，这不是你的错，'literal' 这个词在 cs 中有 20 个定义。

# .htaccess - 简单的 .htaccess 重写

> ID：13885826
> 
> 赞同：0
> 
> 时间：2012-12-14T20:31:51.050
> 
> 标签：.htaccess

我在网上查了一下，找不到我在看的东西。我试图将两个不同的教程结合在一起，但仍然没有。

我需要一个改变的 .htaccess 规则：

```
game.php?id=$1&title=$2 
```

至

```
/game/$1/$2.html 
```

我已经让它用一个单词作为 $2 工作，但如果有空格，一切都崩溃了。我目前的代码是

```
RewriteEngine on
RewriteRule    ^game/([A-Za-z0-9-]+)/([A-Za-z0-9-]+)/?$    game.php?id=$1&title=$2 
```

任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:42:22.230

如果只是关于空格，请尝试在方括号中添加“\s”：

```
RewriteRule ^game/([A-Za-z0-9-\s]+)/([A-Za-z0-9-\s]+)/?$ game.php?id=$1&title=$2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:40:53.760

看起来你写的与你要求的相反。目前你的重写将重写

/game/$1/$2.html 到 game.php?id=$1&title=$2

```
RewriteRule  ^game/([^/]+)/([^/]+)/?$ /game.php?id=$1&title=$2 [L] 
```

如果你想要你问的其他方式，它看起来像这样：

```
RewriteCond %{QUERY_STRING} ^id=(.*?)&title=(.*?)$
RewriteRule ^game.php$ /game/%1/%2.html? [L] 
```

# javascript - 触发非冒泡事件jquery

> ID：13885832
> 
> 赞同：1
> 
> 时间：2012-12-14T20:32:16.977
> 
> 标签：javascript, jquery

我想触发一个非冒泡、不可取消的事件。这可能吗？还是我总是必须在事件处理程序中触发 stopPropagation 。

我试过了：

```
someobj.trigger({ type: 'some_event_type', bubbles: false, cancellable:false }); 
```

无济于事。似乎应该有办法做到这一点，但我还没有找到它......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:44:46.253

你可以试试[.triggerHandler](http://api.jquery.com/triggerHandler/)。它：

*   不要冒泡 DOM 层次结构
*   不会导致事件的默认行为发生
*   仅影响第一个匹配的元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:42:48.237

使用 event.stopPropogation 防止事件冒泡。[https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)

# ruby-on-rails - HABTM 和命名约定

> ID：13885833
> 
> 赞同：1
> 
> 时间：2012-12-14T20:32:27.787
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

一段时间以来，我一直在为一个 Rails 问题绞尽脑汁，想验证我的发现。我试图让 Has_and_belongs_to_many 关系正常工作，但无法连接我的两个类，auctionItem 和 category。首先，这是我的迁移文件和解决问题之前的两个类：

迁移文件：

```
class AuctionItemsCategories < ActiveRecord::Migration
  def up
    create_table 'auction_items_categories', :id=>false do |t|
      t.reference :auctionItem_id
      t.references :category_id 
    end
  end

  def down
    drop_table 'auction_items_categories'
  end
end 
```

类别.rb

```
class Category < ActiveRecord::Base
  has_and_belongs_to_many :auction_items
end 
```

拍卖物品.rb

```
class AuctionItem < ActiveRecord::Base
  has_and_belongs_to_many :categories
end 
```

创建 AuctionItem 的实例后，我尝试了

```
auction_item = AuctionItem.last
auction_item.categories 
```

...并得到以下错误：

```
NoMethodError: undefined method `categories' for #<AuctionItem:0x0000010521b870> 
```

经过一番研究，我发现将特定类添加到 has_and_belongs_to_many 有帮助：

类别模型

```
has_and_belongs_to_many :auction_items , :class_name => 'AuctionItem' 
```

auction_item 模型

```
has_and_belongs_to_many :categories , :class_name => 'Category' 
```

这解决了这个问题，我能够访问类别表。我继续尝试在拍卖品中添加一个类别：

```
auction_item.categories << category 
```

然后我收到以下错误：

```
SELECT "auction_items".* FROM "auction_items" INNER JOIN "auction_items_categories" ON "auction_items"."id" = "auction_items_categories"."auction_item_id" WHERE "auction_items_categories"."category_id" = 2
SQLite3::SQLException: no such column: auction_items_categories.auction_item_id: SELECT "auction_items".* FROM "auction_items" INNER JOIN "auction_items_categories" ON "auction_items"."id" = "auction_items_categories"."auction_item_id" WHERE "auction_items_categories"."category_id" = 2
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: auction_items_categories.auction_item_id: SELECT "auction_items".* FROM "auction_items" INNER JOIN "auction_items_categories" ON "auction_items"."id" = "auction_items_categories"."auction_item_id" WHERE "auction_items_categories"."category_id" = 2 
```

如果您注意到，查询正在尝试获取auction_item.id 而不是AuctionItem.id。为了使连接正常工作，我必须将迁移文件更改为以下内容：

```
class AuctionItemsCategories < ActiveRecord::Migration
  def up
    create_table 'auction_items_categories', :id=>false do |t|
      t.integer :auction_item_id
      t.integer :category_id 
    end
  end

  def down
    drop_table 'auction_items_categories'
  end
end 
```

**长话短说/TL DR 版本：**对我来说，似乎当用多个单词命名你的类并使用驼峰式大小写时，如果它有一个下划线，rails 不会将你的复数类名单数化回它的原始状态。例如，我的类名是 AuctionItem ，它变成了模型的auction_items。不是搜索**auctionitem.id**，而是查找的sql 调用是**auction_item.id**，它是auction_items 的单数化版本。为什么不搜索auctionitem.id？以后在制作多词类的关联表时，是否使用单数下划线 id 版本的模型名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:31:42.890

您的原始迁移不正确。它应该如下所示：

```
class AuctionItemsCategories < ActiveRecord::Migration    
  def up
    create_table 'auction_items_categories', :id => false do |t|
      t.references :auction_item
      t.references :category
    end
  end

  def down
    drop_table 'auction_items_categories'
  end
end 
```

使用参考时应指定符号化模型名称。

# performance - 与 AS3 中的严格数据类型类相比，访问通用对象是否不好？

> ID：13885834
> 
> 赞同：2
> 
> 时间：2012-12-14T20:32:27.620
> 
> 标签：performance, actionscript-3, flash, memory

我正在与一位朋友就**通用对象**与**严格数据类型实例**访问进行辩论。

如果我有一个相当大的**JSON**文件要转换为 Flash 中的对象和数据数组，那么最好将这些对象转换为专用于每个对象的严格 AS3 类吗？

根据对象的数量，性能是否会显着下降？

这背后的技术原因是什么？Generic Object 是否比自定义类的 Strict Data-Type 实例在内存中留下更大的足迹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:40:36.010

很难在一般范围内回答这个问题，因为最终“这一切都取决于”。这取决于您正在使用什么类型的对象、如何将这些对象公开给程序的其余部分以及您对运行时环境的要求类型。

一般来说，通用对象很糟糕，因为您不再具有“类型安全性”。一般来说，将对象转换为类型对象会迫使您留下更大的内存占用，因为您需要在运行时运行该类，并且还会迫使您“再次”将无类型对象重新编译为另一种类型的对象，从而导致一些额外的 cpu 周期。

最后它有点归结为这一点，如果您收到的数据暴露给系统的其余部分，那么将其转换为某种类型的对象通常是个好主意。

将其转换为类型化对象，然后处理该对象，提高了代码的可读性并使代码更易于阅读，因为您不必记住数据/键表是使用“图像”、“图像”还是“映射图像”作为访问者来检索某物的图像信息。

此外，如果您更改后端系统以提供其他/重命名密钥，您只需在一个地方进行更改，而不是分散在整个系统中。

希望这个答案有帮助:)

# java - 当具体对象采用不同的构造函数参数时，Java 中的工厂

> ID：13885836
> 
> 赞同：54
> 
> 时间：2012-12-14T20:32:38.070
> 
> 标签：java, design-patterns, factory

我正在尝试在 Java 中实现工厂模式。我有一个名为 Shape 的类，其中 Circle 和 Triangle 扩展了。问题是 Shape 构造函数只获得 2 个参数，而 Circle 获得 3 个参数，Triangle 也是如此（我不会在代码部分显示，因为与 Circle 相同）。为了更好地展示它：

```
 private interface ShapeFactory{
        public Shape create(int x, int y);
    }

    private class CircleFactory implements ShapeFactory{
        public Shape create(float radius, int x, int y){ //error
            return new Circle(radius, x,y);
        }
    } 
```

任何想法如何克服这个问题？我不能从工厂内部接收用户的输入（必须从外部接收）。

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-14T20:59:20.040

你有两个选择：

1）[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory)：

`RectangularShape extends Shape`

`RoundShape extends Shape`

并且`RectangularShapeFactory`和`RoundShapeFactory`

2) [Builder](http://en.wikipedia.org/wiki/Builder_pattern)（参见 Effective Java 中的 Item 2）

```
public Shape {
    private final int x;
    private final int y;
    private final double radius;

    private Shape(Builder builder) {
        x = builder.x;
        y = builder.y;
        radius = builder.radius;
    }

    public static class Builder {
        private final int x;
        private final int y;
        private double radius;

        public Builder(int x, int y) {
            this.x = x;
            this.y = y;
        }

        public Builder radius(double radius) {
            this.radius = radius;
            return this;
        }

        public Shape build() {
            return new Shape(this);
        }    
    }
}

//in client code 

    Shape rectangle = new Shape.Builder(x,y).build();
    Shape circle = new Shape.Builder(x,y).radius(radiusValue).build(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-14T20:39:06.190

你试图做的事情是根本不可能的。如果构造函数参数不同，那么客户端代码将不得不`Circle`为 a`Square`和 a 做不同的工作，而你不能用统一的代码解决这个问题。如果工厂除了处理您认为应该在工厂中发生的构造函数参数之外还有其他工作，那么您需要将其发布到您的问题中并说明您在分解此常见代码工作时遇到的困难。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-14T21:15:34.307

您的所有实现都必须采用相同数量的参数，您有三个选项：

*   让工厂存储附加参数，因此您只需要提供例如中心。
*   让工厂接受所有论据，即使有些工厂可能会忽略其中一些。
*   有一个可变长度的参数。例如'double ...' 问题是调用者需要知道工厂需要什么，这违背了工厂的目的。恕我直言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-14T03:25:42.217

拥有 Shape 接口通常是一个糟糕的设计，因为它非常有限。您需要不同的信息来描述不同的形状。调整大小就是一个很好的例子。对于圆形，您需要更改半径，对于矩形，您需要更改两侧，这意味着传递两个参数而不是一个参数。

您可以通过传递某种形状描述符来克服这个问题，例如实际形状必须适合的矩形。因此，假设您的所有形状都使用类预定义并且您想要缩放它们，则可以正确调整它的大小。如果您想要自定义形状，则必须以某种方式扩展形状描述符以包含自定义形状所需的所有信息，但要与现有形状保持兼容。这不一定很难，您可以添加可以为空的属性或参数。这里我只添加新参数。

```
private interface ShapeFactory{
    public Shape create(float x, float y, float width, float height);
}

private class CircleFactory implements ShapeFactory{
    public Shape create(float x, float y, float width, float height){
        float radius = Math.min(width, height);
        return new Circle(radius, x, y);
    }
} 
```

另一个想法是您通常以这种方式使用工厂（根据您的需要，鞋面也可以很好）：

```
private interface ShapeFactory{
    public Shape create(float x, float y, float width, float height, bool isCircle);
}

private class MyShapeFactory implements ShapeFactory{
    public Shape create(float x, float y, float width, float height, bool isCircle){
        if (isCircle)
            return new Circle(Math.min(width, height), x, y);
        else
            return new Rectangle(width, height, x, y);
    }
} 
```

所以工厂不一定和构造函数有相同的参数。很多人都有这种印象，因为我猜他们试图自动化工厂并且只传递一个类列表而没有任何关于如何实例化它们的信息。自动化 DI 容器也会犯同样的错误。

这里真正重要的是，上层代码是否想知道它返回的是哪种 Shape 实现。但在某些情况下，您可能拥有或重构为某种通用描述符。例如，您不一定有`Shape.scale(width, height)`方法，如果有，您将无法调整圆形或矩形的大小，因为就像构造函数一样，那里的缩放比例是不同的。但是如果你想要的只是调用类似的东西`Shape.draw(canvas)`，那么我想你很高兴。

同时我发现了一个类似的问题，有类似的答案，也许你也可以从中学习：[https ://softwareengineering.stackexchange.com/a/389507/65755](https://softwareengineering.stackexchange.com/a/389507/65755)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-20T21:59:57.487

您可以使用一个类来包装工厂参数，如下所示：

```
public interface ShapeArguments{
}

public class CircleArguments implements ShapeArguments{
 ...

 public CircleArguments(... radius,... x,... y){
    ...
 }
}

private interface ShapeFactory{
        public Shape create(ShapeArguments args);
    }

    private class CircleFactory implements ShapeFactory{
        public Shape create(ShapeArguments args){
            CircleArguments circleArgs = (CircleArguments)args;
            return new Circle(circleArgs.radius, circleArgs.x,circleArgs.y);
        }
    } 
```

如果形状参数之间有任何共同的参数，您可以使用继承来更好地管理它

# java - 使用启发式方法修复错误编码文本的 Java 库

> ID：13885838
> 
> 赞同：6
> 
> 时间：2012-12-14T20:32:42.300
> 
> 标签：java, utf-8, character-encoding, heuristics

我正在处理一个外部 Web 服务，它给了我错误编码（和/或损坏）的字符串`UTF-8`( 可爱的 A 帽子 ( ) 比比皆是。`ISO LATIN``WINDOWS-1252``UTF-8``Â`

我显然无法修复外部 Web 服务如何存储其字符串，从而导致信息丢失。因此，我所知道的 100% 翻译的希望是不可能的。

但我希望有人用 Java 编写了一个启发式字符映射库（不太可能有人会键入 A 帽子）。

如果不是，我想我可以移植这些家伙的 PHP 代码：[https ://stackoverflow.com/a/3521340/318174](https://stackoverflow.com/a/3521340/318174)

**更新和说明：**像@VGR 这样的简单转换将不起作用。我没有原始字节。数据在端点转换不正确（SOAP 服务器可能`getBytes(/*with out correct encoding*/)`已完成，或者数据可能以不正确的格式存储）。当您在 Java 中将字节转换为字符串时，除非编码在任何地方都相同，否则不会保留数据。`ASCII`如果您想到<->之类的东西，这很容易理解`UTF-8`。由于数据不会丢失但经常混淆，因此更复杂`Windows-1252`或`ISO Latin`更复杂。那是因为这些编码可以是两个字节，而不是`UTF-8`.

如果您不相信我，您可以尝试`getBytes()`使用各种编码来回做，并且会看到数据损坏和数据丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:14:58.643

我可能误解了错误编码数据的性质，但 PHP 代码对我来说似乎有点矫枉过正。如果您有作为单个字符传递的 UTF-8 字节，您应该能够执行以下操作：

```
String fix(String s) {
    byte[] bytes = s.getBytes(Charset.forName("windows-1252"));
    return new String(bytes, StandardCharsets.UTF_8);
} 
```

# c - fopen_s 是否容易重构为 CreateFile

> ID：13885842
> 
> 赞同：0
> 
> 时间：2012-12-14T20:33:02.580
> 
> 标签：c, file-io, fopen

程序在 Windows 机器上创建一个文件来记录其进度。在程序结束时，文件被关闭并保留在系统中。具有网络访问权限的用户希望远程打开文件以查看最近记录的条目。

该文件是使用`fopen_s`文档中未提及共享模式打开的。使用 Ansi-C90 是一项要求。

使用的调用如下所示：

```
e += fopen_s(&(logger->logData.fileHandle), fp.Path, "a"); 
```

CreateFile 是我的选择吗？我读到它不是 Ansi-C90。在不破坏任何其他代码的情况下很容易重构
吗？ 我应该针对哪种可能的重构问题编写单元测试？ 还有其他方法可以在我缺少的共享模式下打开文件吗？`fopen_s``CreateFile`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T12:57:23.460

“由 fopen_s 和 _wfopen_s 打开的文件不可共享。如果您要求文件可共享，请使用 _fsopen、_wfsopen 和适当的共享模式常量（例如，_SH_DENYNO 用于读/写共享）。”

（根据约翰内斯的要求，评论变成了答案）

# jquery - 在 JQuery 中，如何使动态生成的 jquery 对话框可以相互拖放？

> ID：13885846
> 
> 赞同：1
> 
> 时间：2012-12-14T20:33:20.223
> 
> 标签：jquery, jquery-ui

我有一些动态生成的 jquery 对话框，可以拖放和调整大小。我希望能够让它们相互融合。这样当你移动父对象时，里面的对象也会随之移动。如果我关闭父对话框，孩子也会关闭。我不确定如何做到这一点。

任何帮助表示赞赏，谢谢。

这是我设置的小提琴的链接。它做我想做的；虽然它是缓慢的，而不是动态的。我想我现在的问题是让整个事情变得动态。如何确定我正在拖动的对象的名称是什么以及我要拖放到的对象的名称是什么？

```
.appendTo is what I need right?  but how to grab the names? 
```

[http://jsfiddle.net/Bladetrick/DGbT3/780/](http://jsfiddle.net/Bladetrick/DGbT3/780/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:04:37.617

可以将一个对话框拖放到另一个对话框中。检查这个[JQFAQ.com](http://jqfaq.com/how-to-enable-droppable-in-jquery-ui-dialog-box/)主题，我认为这会对你有所帮助。

# matlab - 获取给定值的颜色图颜色

> ID：13885847
> 
> 赞同：1
> 
> 时间：2012-12-14T20:33:23.767
> 
> 标签：matlab

我有绘制一些 3D 图形的功能

```
scatter3(mx,my,mz,3,mx.^2+my.^2); % mx, my and mz are vectors 
```

我看到 C 是一个与 X 和 Y 长度相同的向量，因此根据文档，每个点的颜色应该线性映射到当前颜色图中的颜色。

我试过这个：

```
cmap = colormap;
disp(cmap(mx.^2+my.^2)); 
```

但我得到

```
Subscript indices must either be real positive integers or logicals. 
```

有没有更简单的方法来解决这个任务？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:20:03.760

这很容易。Colormap 不返回向量，而是返回矩阵。这是因为每种颜色都有三个分量（红色、绿色和蓝色）。

```
>> size(colormap)

ans =

    64     3

>> test = colormap;
>> test(7, :)

ans =

     0         0    0.9375 
```

编辑...而且，我忘记了一些事情：索引必须是整数，以一种或另一种方式。您可能希望将它们四舍五入或将它们转换为整数。

EDIT2 ...根据您的示例， disp 语句的工作方式如下：

```
disp( cmap(1:( (size(cmap, 1)-1) / (length(mz)-1) ):size(cmap, 1), :) ); 
```

# visual-studio-2010 - 在 Visual Studio 2010 中创建 OpenCL 项目

> ID：13885850
> 
> 赞同：0
> 
> 时间：2012-12-14T20:33:38.743
> 
> 标签：visual-studio-2010, cuda, project, opencl, nvidia

谁能给我一步一步的说明如何在 Visual Studio 2010 中创建 OpenCL 项目。我已经下载了最新版本的 CUDA Toolkit（5.0）并按照本教程进行操作[[http://opencl.codeplex.com/ wikipage?title=OpenCL%20Tutorials%20-%200&referringTitle=OpenCL%20Tutorials]](http://opencl.codeplex.com/wikipage?title=OpenCL%20Tutorials%20-%200&referringTitle=OpenCL%20Tutorials)

但现在我被困住了。在我需要配置依赖项的时候，我不能这样做，因为我在 ProgramFiles`\NVIDIA GPU Computing SDK\OpenCL\common\inc`的文件夹中没有文件夹（我安装了工具包）。`NVIDIA Corporation`我还在我拥有的文件夹中搜索了一些 opencl.lib 文件，但找不到。如果有人可以帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:37:52.693

CUDA Toolkit 5.0 包含头文件 include\CL 和库 lib\\OpenCL.lib。AMD、Intel、Khronos 提供了相同的包含和库……在本教程中，您只需将步骤 2 的子步骤 1、2、3 替换为我提到的路径。

# ruby-on-rails - 用于 PDF 生成的 prawn gem，如果使用 A4 页面大小，则空间不足。导轨 3.2.8

> ID：13885851
> 
> 赞同：1
> 
> 时间：2012-12-14T20:33:41.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, prawn

我有一个 ExportPdf 类，它继承了像这样的 Prawn :: Document -

```
class ExportPdf < Prawn::Document

  def initialize(vehicles, view, page, *args)

   super({:top_margin => 70, :page_size => 'A1'}) 
   @view = view
   @page = page

   file_heading
   table_data
 end

 def table_data
  move_down 30

    table table_data_rows do
    row(0).font_style = :bold
    self.row_colors = ["DDDDDD", "FFFFFF"]
    self.header = true
  end

But I have atleast 20 table columns and the only way to accommodate is by increasing page size as,    
     :page_size => 'A1'. 
```

但这将使其无法打印，因为不再可能以 A4 布局打印。如何减小字体大小或其他东西以容纳所有 20 个表格列并能够以 A4 布局打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:54:42.890

您可能可以使用/添加`cell_style`

例子：

```
:cell_style => { :size => 10,:border_color => "FFFFFF",:text_color => "333333", :padding => 0, :inline_format => true} 
```

更改大小值以更改表格文本的字体大小。

# ruby-on-rails - Rails：在路线中触发？

> ID：13885852
> 
> 赞同：0
> 
> 时间：2012-12-14T20:33:42.923
> 
> 标签：ruby-on-rails

我正在阅读 The Rails 3 Way，但我不明白为什么路线中有一个 proc。我仍然很难掌握 proc/lambda 的使用以及它们的使用方式。

这怎么样：

```
match 'records/:id' => "records#protected",
  :constraints => proc {|req| req.params[:id].to_i < 100 } 
```

不同于：

```
match 'records/:id' => "records#protected",
  :constraints => params[:id].to_i < 100 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:36:38.397

也许您更熟悉 JavaScript？Procs 类似于匿名函数。您的代码的第一个版本大致相当于：

```
{ constraints: function(req) { return req.params["id"] < 100 }} 
```

也就是说，`constraints`被设置为可以在以后评估的代码块。

第二个版本就像写

```
{ constraints: return req.params["id"] < 100 } 
```

也就是说，语法错误，并且`return req.params["id"] < 100`在解释代码时尝试立即评估时逻辑上被破坏，`req`甚至在定义之前。

这是两个版本之间的主要区别，`proc`也是重要的原因：您需要将代码传递到路由中，以便稍后在路由发生时对其进行评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:36:50.923

通过为路由提供 Proc，您可以动态约束路由匹配。它允许您执行可以确定路由是否应该匹配的任意代码。

在您的示例中，您只希望该路由匹配通过`id`小于 100 的请求。确实没有更好的方法来表达该约束 - Proc 确实是最佳选择。

# c++ - Mac OS C++ 和 libstdc++ 文档

> ID：13885853
> 
> 赞同：2
> 
> 时间：2012-12-14T20:33:51.767
> 
> 标签：c++, macos, documentation, std, manpage

我正在使用 AppCode 在 MacOS 上使用 C++ 进行开发，但遇到了一个无论我多么努力都无法克服的问题。我缺少 MacOS 上的 C++ 文档。当我查询 stdc 函数的手册页时，一切都很好，甚至 AppCode 也提供了完美的内联文档。但我不知道如何为 C++ 及其标准库安装文档和手册页。在 linux 上这很简单，并且 yum/apt-get/up2date stdlibc++-doc 工作得很好。

我应该如何让它在 Mac OS 上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:37:33.750

我最好的建议是从 Mac App Store获取[Dash 。](https://itunes.apple.com/us/app/dash-docs-snippets/id458034879?mt=12)这是一个免费的应用程序（通过 IAP 升级消除了一些烦恼；该应用程序绝对值得付费），提供对包括 C++ 在内的多种语言的文档集的访问。它的 C++ 文档基于[cppreference.com](http://en.cppreference.com/w/)。在任何情况下，使用 Dash 都非常容易获得有关您需要的任何 C++ 构造的文档。这是有关文档的屏幕截图`std::vector`：

![在此处输入图像描述](../Images/10fa19dfee6d3f9acec34c5a207f8de1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T23:54:31.597

我不确定 AppCode，但 XCode 默认不安装命令行工具。要安装它们，请启动 XCode，打开 XCode 菜单并选择 Preferences。单击下载选项卡。安装命令行工具。这对我来说至少获得了标准的 C 和 Objective C 库。

# javascript - 使用 Javascript Array.Filter 修改原始数组

> ID：13885866
> 
> 赞同：10
> 
> 时间：2012-12-14T20:35:24.937
> 
> 标签：javascript, arrays, filter, angularjs

我想使用 Javascript 的 array.filter 从数组中删除项目，因为语法优雅且可读。但是，过滤器似乎没有修改原始数组，它只是返回一个新数组，按照您的要求进行过滤。我的问题是，为什么以下工作没有按我的预期工作？

```
$scope.clearList = function () {
  this.list = this.list.filter(function (item) {
    return item.checked == true;
  });

  //...
} 
```

我希望在返回新过滤的数组后， this.list 现在将只保存过滤后的集合。然而，它不是这样工作的。this.list 最终包含完全相同的项目。更改代码以将过滤后的数组保存在中间变量中表明它确实过滤正确。

我现在已经做了一个解决方法，循环通过过滤的版本并将项目从应该过滤的原始列表中拼接出来，但这并不优雅。我只是想错了吗？

* * *

旁注：我正在使用 Angular.js。我不确定这是否重要，但列表来自以下内容：

```
 <div class="list" ng-repeat="list in lists">
    <!-- ... -->
    <ul>
      <li ng-repeat="item in list">
        <div>
          <label>
            <input type="checkbox" ng-model="item.checked"/>
            {{item.name}}
          </label>
          <!-- ... -->
        </div>
      </li>
    </ul>
    <button class="btn clear-selected" ng-click="clearList()">
      Remove Selected
    </button>
  </div> 
```

* * *

编辑以添加调试信息：我引入了一个临时变量，只是为了查看调试器中发生了什么。

```
var temp = this.list.filter(function (item) {
  return item.checked == true;
});

this.list = temp; 
```

在执行之前，this.List 有 5 个项目，temp 是未定义的。第一行执行后，this.List 有 5 项，temp 有 2 项。执行完最后一行后，this.List 有 2 项，temp 有 2 项。

但是，此后绑定到 this.list 的 UI 似乎没有更新。所以与过滤器无关的事情似乎正在发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T22:06:25.227

在角度中，您使用特殊`$scope`变量修改数据，并且在控制器内部`this`指向`$scope`作为执行上下文时，`$scope`这是首选。

当 UI 没有更新时，通常是因为“模型”（或给定范围的属性）的更改是在角度之外完成的。在这种情况下，需要调用 to `$apply`。这会通知 Angular 某些内容发生了变化并更新视图。

但是，这似乎不是您的问题。我有一个工作列表，这里的改动很小[http://plnkr.co/edit/Cnj0fEHSmi2L8BjNRAf5?p=preview](http://plnkr.co/edit/Cnj0fEHSmi2L8BjNRAf5?p=preview)

这是控制器的内容，当您`clearList()`从 UI 调用时，列表中只剩下选中的项目。

```
$scope.list = [
  {name: 'one', checked: true},
  {name: 'two', checked: false},
  {name: 'three', checked: true},
  {name: 'four', checked: false}
];

$scope.clearList = function () {
  $scope.list = $scope.list.filter(function(item) {
    return item.checked === true;
  });
}; 
```

现在，我建议将列表传递给 clearList`clearList(list)`或者更好地使用 Angular 过滤器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T20:43:00.280

```
window.list = [1,2,3,4,5,6];
var clearList = function () {
    this.list = this.list.filter(function (item) { return item % 2 === 0; });
};
clearList();
console.log(window.list); 
```

按预期记录`[2, 4, 6]`，所以我认为您的错误与`filter`.

您确定要修改`this.list`的数组与您稍后要检查的数组相同吗？

# html - 如何选择没有前 n 个字符和最后 m 个字符的字段？

> ID：13885867
> 
> 赞同：0
> 
> 时间：2012-12-14T20:35:28.380
> 
> 标签：html, mysql

我有一个 SELECT 语句试图查看单个表中的数据。数据由 HTML 标记 (`<p>`和`</p>`) 封装。例如，一个领域可能会说：

```
<p>Lorem Ipsum</p> 
```

如何告诉 SELECT 语句打折前 3 个字符和后 4 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:38:08.080

```
SELECT SUBSTRING(data, 4, LENGTH(data)-7) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:35:18.437

如果所有数据的开头只有一个开始标签，最后只有一个结束标签，就像你的例子一样，你可以使用这个：

```
select
  case when instr(data, '</')>instr(data, '>') then
    substring(data, instr(data, '>')+1,instr(data, '</')-instr(data, '>')-1)
  else
    data
  end as stripped_data
from
  your_table 
```

请注意，这也会去除不匹配的标签，例如`<p>Lorem Ipsum</strong>`

# entity-framework - 实体框架在将导航属性对象分配给父对象时对其时间戳进行更新

> ID：13885873
> 
> 赞同：1
> 
> 时间：2012-12-14T20:35:39.607
> 
> 标签：entity-framework

我目前正在处理一个实体框架问题。我搜索了与我的问题相关的问题，但找不到相关的问题。如果您知道已经问过任何类似的问题，感谢您指点我。

我的问题来自我目前正在为我的组织开发的网络应用程序。由于计划中的公共使用，Web 应用程序具有有限的 SQL 权限，将选择、插入和更新限制为实际需要的唯一表。其中一个表是 Users 表，它跟踪允许使用该应用程序的人员，Web 应用程序仅对该表具有 Select 权限。

作为 Web 应用程序目的的一部分，访问用户可以创建表单并将所有权分配给该表单。所有者可以是创建者本人，也可以是 User 表中的其他现有用户。所有者表示为表单实体上的导航属性。

分配所有权只是从代表用户和用户 ID 的 HTML 选择列表中进行选择的简单问题。然后（在服务器上）正在创建的表单实体上的外部用户 ID 设置为代表所选用户所有者的 ID。表单实体被添加到数据库上下文中，并调用 SaveChanges 方法将新表单与设置为指向 User 表中相关行的所有者外键一起保存到数据库中的 Form 表中，基本上是典型的标准创建设想。

接下来发生的事情各不相同，我无法确定导致它有时失败的确切情况。有时保存成功，有时它会失败并显示一条错误消息，指出实体框架试图对用户表执行更新，但由于它没有更新权限而失败。使用 SQL Profiler，我看到生成了一条更新语句，该语句尝试更新代表表单所有者的用户行的时间戳列。

显然，如果我向 Web 应用程序授予更新权限，这个问题就会消失，但是没有理由让它能够更新 User 表，而且它不应该是必需的。如果我只是授予它，它将打开一个潜在的安全漏洞。我的问题是，为什么实体框架在附加到表单实体后会尝试更新导航属性的时间戳列？这只是偶尔会失败，这表明有时决定不需要更新用户所有者的时间戳。附加到正在创建的表单的用户不会以任何方式修改，它只是分配给表单实体上的外键属性的数字。

让我困惑。希望您对正在发生的事情以及我如何解决它有所了解。

欣赏您的见解。

# asp.net - 将 ASP.NET Web 窗体作为 Windows Azure 网站托管

> ID：13885876
> 
> 赞同：6
> 
> 时间：2012-12-14T20:35:48.633
> 
> 标签：asp.net, azure, webforms

我有一个传统的 ASP.NET Web 窗体应用程序。我想在 Windows Azure 中托管应用程序。我是否可以在 Windows Azure 中将 Web 窗体应用程序发布为网站？如果是这样，有人有任何文档吗？我似乎找不到任何东西。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:40:06.780

当然有可能。这是一个很棒的官方教程：[https ://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database)

**编辑：**

就我而言，我使用[Team Foundation Service](https://tfs.visualstudio.com/)[自动部署到](https://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)Azure 。效果很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-13T16:06:44.683

这是新文章，因为已接受答案中的链接已更改

***[另一个例子](https://github.com/Huachao/azure-content/blob/master/articles/app-service-web/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database.md)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T15:46:04.797

@JYL 的答案涵盖了大部分内容，但也意识到 WebForms 应用程序在服务器端会话状态上很大。如果您计划扩展您的 Web 应用程序，那么您将需要一个外部会话状态提供程序。[本文](https://docs.microsoft.com/en-us/azure/app-service-web/web-sites-dotnet-session-state-caching)介绍了如何使用 Redis 缓存或 SQL Server 执行此操作

# c# - 如何在 linq 中编写 EF 以包括小写比较

> ID：13885885
> 
> 赞同：14
> 
> 时间：2012-12-14T20:36:33.430
> 
> 标签：c#, linq, entity-framework

我有这个查询：`select lower(Name) from User`

如何使用 linq to EF 避免用户 linq 反对。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T20:40:24.783

```
var query = context.Users.Select(u => u.Name.ToLower()); 
```

实体框架可以将 String.ToLower 翻译成 SQL。该查询将被翻译为：

```
SELECT 
LOWER([Extent1].[Name]) AS [C1]
FROM [dbo].[Users] AS [Extent1] 
```

# c# - 列表视图中具有相同文本/内容的项目的问题

> ID：13885887
> 
> 赞同：3
> 
> 时间：2012-12-14T20:36:36.143
> 
> 标签：c#, listview, observablecollection

我将列表视图绑定到字符串的 ObservableCollection。

xml:

```
<ListView Margin="4" Name="LvRiserList" DockPanel.Dock="Top" ItemsSource="{Binding GetAllRiserTags, UpdateSourceTrigger=PropertyChanged}">
    <ListView.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}" HorizontalAlignment="Stretch" />
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

代码：

```
public ObservableCollection<string> GetAllRiserTags
{
    get
    {
        var riserTags = new ObservableCollection<string>();
        foreach (var riser in RiserCollection)
        {
            riserTags.Add(riser.Tag);
        }
        return riserTags;
    }
} 
```

单击按钮时，列表会被一个一个填充，并且每个标签都被赋予一个默认值“空”。

该列表将按预期填充列表，但是当我尝试选择其中一项时会出现问题；只有第一个被选中。如果我给标签不同的（唯一的）默认名称，它们会按预期被选中。

知道为什么它会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:44:51.230

删除 ListView.ItemTemplate 并尝试一下。

```
<ListView Margin="4" Name="LvRiserList" DockPanel.Dock="Top" ItemsSource="{Binding GetAllRiserTags, UpdateSourceTrigger=PropertyChanged}">
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:08:42.517

创建一个包含 id 和 value 属性的自定义类。覆盖 GetHash 和 Equals 函数。在您的 Viewmodel 中计算 id 或给它一些唯一值。

绑定到 value 属性。

使用相同值的字符串，如果您不使用自定义类，您将始终遇到此问题:)

# objective-c - iphone 5 和 4 的故事板布局

> ID：13885892
> 
> 赞同：1
> 
> 时间：2012-12-14T20:36:59.233
> 
> 标签：objective-c, layout, storyboard

目前我正在实现我的应用程序的登录屏幕。它包含 3 个图像视图，一个用于徽标，两个用于间隔图像，它包含 2 个按钮。一切都有自定义图像。

它看起来像这样（线条是间隔视图）： ![在此处输入图像描述](../Images/9b7107ee77b0579f01759f3c831b6af2.png)

现在我正在努力解决这个问题。屏幕的中心应该正好在两个按钮之间。但是对于 3.5 英寸和 4 英寸的屏幕，我如何才能实现这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:05:47.910

您对最低 SDK 有什么要求吗？如果您可以使用 iOS 6 作为基准，请查看 AutoLayout。应该能够完成你的工作。

如果不是，您可以将按钮放在一个公共 `container`视图中，那么请务必设置

```
container.center = self.view.center 
```

在`viewDidLoad`那个 ViewController 的方法中。

# c# - 使用复杂类型数组创建soap请求

> ID：13885895
> 
> 赞同：1
> 
> 时间：2012-12-14T20:37:10.960
> 
> 标签：c#, soap

我正在使用一个网络服务，我有这个来自 wsdl：

```
<xs:complexType name="Person">
    <xs:sequence>          
      <xs:element minOccurs="0" maxOccurs="unbounded" name="PersonAddresses" type="ns:PersonAddress" />
    </xs:sequence>
</xs:complexType> 
```

来自 xsd：

```
<!--Complex Type for PersonAddress-->
<xs:complexType name="PersonAddress">
    <xs:sequence>
        <xs:element name="Address" type="Address" minOccurs="0" maxOccurs="1"/>
    </xs:sequence>
</xs:complexType>

<!--Complex Type for Address-->
<xs:complexType name="Address">
    <xs:sequence>
        <xs:element name="Addr1" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Addr2" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="City" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="State" type="xs:string" minOccurs="0" maxOccurs="1"/>
        <xs:element name="Zip" type="xs:string" minOccurs="0" maxOccurs="1"/>
    </xs:sequence>
</xs:complexType> 
```

使用生成的代理，我创建了一个 PersonAddress 集合并向其中添加地址对象。

```
...
var convertedAddresses = new PersonAddress[addressesToCounvert.Count];
for (int i = 0; i < addresses.Count; i++)
{
    convertedAddresses[i] = ConvertAddress(addresses[i]);
}
person.PersonAddresses = convertedAddresses;
... 
```

当我提交请求时，它看起来像这样

```
<PersonAddress>
    <Address>
        ...
    </Address>
</PersonAddress>
<PersonAddress>
    <Address>
        ...
    </Address>
</PersonAddress> 
```

那么我做错了什么......所需的格式是

```
<PersonAddress>
    <Address>
        ...
    </Address>
    <Address>
        ...
    </Address>
</PersonAddress> 
```

感谢您的任何意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:52:22.037

据我所知，您得到的输出与 WSDL/XSD 定义相匹配。基于 WSDL，一个`<Person>`元素可以包含多个`<PersonAddress>`元素。基于 XSD，一个`<PersonAddress>`元素可以包含 0 个或 1 个`<Address>`元素。使用所提供信息的有效构造将是：

```
<Person>
 <PersonAddress>
  <Address>
    ...
  </Address>
 </PersonAddress>
</Person>
<Person>
 <PersonAddress>
  <Address>
      ...
  </Address>
 </PersonAddress>
 <PersonAddress>
  <Address>
      ...
  </Address>
 <PersonAddress>
</Person> 
```

另请注意， 的拼写不一致`<PersonAddress>`。在您提供的 WSDL 代码中，一个`<Person>`元素被定义为包含 0 到多个`<PersonAddresses>`元素（注意“地址”的复数形式）。出于此答案的目的，我假设这只是一个错字，并且确实`<PersonAddresses>`应该像`<PersonAddress>`WSDL 中那样拼写。我想确保指出这一点，以防问题仅仅是您使用了错误的对象（即，可能有一个`<PersonAddresses>`复杂类型允许其中包含 1 到多个`<Address>`元素）

# c# - 从方法传回 UpdatePanel 不会更新

> ID：13885900
> 
> 赞同：0
> 
> 时间：2012-12-14T20:37:32.447
> 
> 标签：c#, asp.net, updatepanel

以下代码在异步回调期间不会更新 UpdatePanel 的内容：

```
 protected void getMoreInfoCommand_Click(object sender, CommandEventArgs e)
    {
        Button button = (Button)sender;
        UpdatePanel updatePanel = (UpdatePanel)button.Parent.Parent;

        updatePanel.ContentTemplateContainer.Controls.Clear();

         switch(e.CommandName)
         {
            case "PERSON":
                 Person.Portal.UserProfile userProfile = new Person.Portal.UserProfile(e.CommandArgument.ToString());
                 updatePanel = getPanel(userProfile, true);
                 break;
         }
    }

   protected UpdatePanel getPanel(object obj, bool more)
    {
        UpdatePanel updatePanel = new UpdatePanel();
        updatePanel.UpdateMode = UpdatePanelUpdateMode.Conditional;
        updatePanel.EnableViewState = true;
        updatePanel.ViewStateMode = System.Web.UI.ViewStateMode.Enabled;
        updatePanel.ChildrenAsTriggers = true;
        StringBuilder htmlBuilder = new StringBuilder();

        switch (obj.GetType().ToString().Trim())
        {
            case "Person.Portal.UserProfile":
                Person.Portal.UserProfile userProfile = (Person.Portal.UserProfile)obj;
                htmlBuilder.Append("<TABLE border='1' cellpadding=3 cellspacing=0 width=20%>");

                htmlBuilder.Append("<tr><td colspan=2>");
                htmlBuilder.Append("<font color='gray' size=2>Person</font>");
                updatePanel.ContentTemplateContainer.Controls.Add(new LiteralControl(htmlBuilder.ToString()));
                htmlBuilder.Length = 0;

                Button morePersonButton = new Button();
                morePersonButton.ID = "morePersonButton";
                morePersonButton.Text = "More";
                morePersonButton.CommandName = "PERSON";
                morePersonButton.CommandArgument = userProfile.ID;
                morePersonButton.Command += new CommandEventHandler(getMoreInfoCommand_Click);

                updatePanel.ContentTemplateContainer.Controls.Add(morePersonButton);

                htmlBuilder.Append("<tr><td align='center' colspan=2>");
                htmlBuilder.Append("<img src='https://webadvisor.oc.edu/pictures/");
                htmlBuilder.Append(userProfile.Pic_ID);
                htmlBuilder.Append(".jpg'>");
                htmlBuilder.Append("</tr>");

                htmlBuilder.Append("<tr><td>");
                htmlBuilder.Append("<B>Name</B><TD>");
                htmlBuilder.Append(userProfile.FirstName + " " + userProfile.LastName);
                htmlBuilder.Append("</tr>");

                htmlBuilder.Append("<tr><td>");
                htmlBuilder.Append("<B>Email Address</B><TD>");
                htmlBuilder.Append(userProfile.EmailAddress);
                htmlBuilder.Append("</tr>");

                htmlBuilder.Append("<tr><td>");
                htmlBuilder.Append("<B>Phone</B><TD>");
                htmlBuilder.Append(userProfile.Phone);
                htmlBuilder.Append("</tr>");                    

                if (more)
                {
                    if (!String.IsNullOrEmpty(userProfile.Office_Number))
                    {
                        htmlBuilder.Append("<tr><td>");
                        htmlBuilder.Append("<B>Office Building</B><TD>");
                        htmlBuilder.Append(userProfile.Office_Number);
                        htmlBuilder.Append("</tr>");    
                    }
                }

                htmlBuilder.Append("</TABLE><BR>");

                updatePanel.ContentTemplateContainer.Controls.Add(new LiteralControl(htmlBuilder.ToString()));

                htmlBuilder.Length = 0;
                break;
        }
        return updatePanel;
    } 
```

但是，如果我执行以下操作，它会起作用：

```
 protected void getMoreInfoCommand_Click(object sender, CommandEventArgs e)
    {
        Button button = (Button)sender;
        UpdatePanel updatePanel = (UpdatePanel)button.Parent.Parent;

        updatePanel.ContentTemplateContainer.Controls.Clear();

         switch(e.CommandName)
         {
            case "PERSON":
                 Person.Portal.UserProfile userProfile = new Person.Portal.UserProfile(e.CommandArgument.ToString());
                 getPanel(userProfile, true, ref updatePanel);
                 break;
         }
    }

    protected void getPanel(object obj, bool more, ref UpdatePanel updatePanel) 
    { 
        ...
    } 
```

我在其他地方使用 getPanel() 并不想改变它的工作方式。我不明白为什么第一个示例不起作用。我错过了什么？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:47:48.537

更新面板已呈现，您必须从其父控件集合中替换更新面板。更改更新面板父级的控件集合将正确更新它。

# java - 在 JBoss AS 7 中休眠是否需要 c3p0 连接池

> ID：13885906
> 
> 赞同：3
> 
> 时间：2012-12-14T20:37:50.480
> 
> 标签：java, hibernate, jboss7.x, c3p0

我的项目处于起步阶段，我在休眠时遇到了一个大问题。我正在使用带有 c3p0 0.9.1.2 的休眠 4.1.8-Final。

我有以下实体类：

```
@javax.persistence.Entity
@Table(name = "CUSTOMER")
public class Customer extends Entity {

    @Transient
    private static final long serialVersionUID = 3326144323537452197L;

    private String customerId;
    private String customerName;
    private boolean active;

    public Customer() {
        super();
    }

    @NaturalId
    @Column(name = "CUSTOMER_ID", nullable = false)
    public String getCustomerId() {
        return customerId;
    }

    public void setCustomerId(String customerId) {
        this.customerId = customerId;
    }

    @Lob
    @Column(name = "CUSTOMER_NAME", nullable = false)
    public String getCustomerName() {
        return customerName;
    }

    public void setCustomerName(String customerName) {
        this.customerName = customerName;
    }

    @Column(name = "ACTIVE", nullable = false)
    public boolean isActive() {
        return active;
    }

    public void setActive(boolean active) {
        this.active = active;
    }
} 
```

如您所见，`customerName`已设置为`Lob`. 现在第一次保存操作给了我以下错误：

```
2012-12-15 01:37:25,670 ERROR [com.edfx.adb.web.controller.AdminController] java.lang.AbstractMethodError: com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.setCharacterStream(ILjava/io/Reader;J)V
2012-12-15 01:37:25,670 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2012-12-15 01:37:25,670 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
2012-12-15 01:37:25,670 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2012-12-15 01:37:25,670 ERROR [com.edfx.adb.web.controller.AdminController]     at java.lang.reflect.Method.invoke(Method.java:601)
2012-12-15 01:37:25,670 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
2012-12-15 01:37:25,670 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
2012-12-15 01:37:25,670 ERROR [com.edfx.adb.web.controller.AdminController]     at $Proxy240.setCharacterStream(Unknown Source)
2012-12-15 01:37:25,670 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.type.descriptor.sql.ClobTypeDescriptor$3$1.doBind(ClobTypeDescriptor.java:83)
2012-12-15 01:37:25,685 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:92)
2012-12-15 01:37:25,685 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:280)
2012-12-15 01:37:25,685 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:275)
2012-12-15 01:37:25,701 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.type.AbstractSingleColumnStandardBasicType.nullSafeSet(AbstractSingleColumnStandardBasicType.java:57)
2012-12-15 01:37:25,701 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2747)
2012-12-15 01:37:25,701 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2722)
2012-12-15 01:37:25,701 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.persister.entity.AbstractEntityPersister$4.bindValues(AbstractEntityPersister.java:2929)
2012-12-15 01:37:25,701 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:57)
2012-12-15 01:37:25,716 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2936)
2012-12-15 01:37:25,716 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3447)
2012-12-15 01:37:25,716 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
2012-12-15 01:37:25,716 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
2012-12-15 01:37:25,716 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:203)
2012-12-15 01:37:25,732 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:183)
2012-12-15 01:37:25,732 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:167)
2012-12-15 01:37:25,732 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:320)
2012-12-15 01:37:25,732 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
2012-12-15 01:37:25,748 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
2012-12-15 01:37:25,748 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
2012-12-15 01:37:25,748 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
2012-12-15 01:37:25,748 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:55)
2012-12-15 01:37:25,748 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
2012-12-15 01:37:25,763 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
2012-12-15 01:37:25,763 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
2012-12-15 01:37:25,763 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:756)
2012-12-15 01:37:25,763 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.internal.SessionImpl.save(SessionImpl.java:748)
2012-12-15 01:37:25,779 ERROR [com.edfx.adb.web.controller.AdminController]     at org.hibernate.internal.SessionImpl.save(SessionImpl.java:744)
2012-12-15 01:37:25,779 ERROR [com.edfx.adb.web.controller.AdminController]     at com.edfx.adb.dao.base.BaseDao.save(BaseDao.java:21)
2012-12-15 01:37:25,779 ERROR [com.edfx.adb.web.controller.AdminController]     at com.edfx.adb.service.CustomerService.addNewCustomer(CustomerService.java:26)
2012-12-15 01:37:25,779 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2012-12-15 01:37:25,779 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
2012-12-15 01:37:25,794 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2012-12-15 01:37:25,794 ERROR [com.edfx.adb.web.controller.AdminController]     at java.lang.reflect.Method.invoke(Method.java:601)
2012-12-15 01:37:25,794 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
2012-12-15 01:37:25,794 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
2012-12-15 01:37:25,794 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
2012-12-15 01:37:25,794 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
2012-12-15 01:37:25,810 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
2012-12-15 01:37:25,810 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
2012-12-15 01:37:25,810 ERROR [com.edfx.adb.web.controller.AdminController]     at $Proxy236.addNewCustomer(Unknown Source)
2012-12-15 01:37:25,810 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2012-12-15 01:37:25,810 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
2012-12-15 01:37:25,826 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2012-12-15 01:37:25,826 ERROR [com.edfx.adb.web.controller.AdminController]     at java.lang.reflect.Method.invoke(Method.java:601)
2012-12-15 01:37:25,826 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
2012-12-15 01:37:25,841 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
2012-12-15 01:37:25,841 ERROR [com.edfx.adb.web.controller.AdminController]     at $Proxy237.addNewCustomer(Unknown Source)
2012-12-15 01:37:25,841 ERROR [com.edfx.adb.web.controller.AdminController]     at com.edfx.adb.web.controller.AdminController.saveCustomer(AdminController.java:25)
2012-12-15 01:37:25,841 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2012-12-15 01:37:25,841 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
2012-12-15 01:37:25,841 ERROR [com.edfx.adb.web.controller.AdminController]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2012-12-15 01:37:25,857 ERROR [com.edfx.adb.web.controller.AdminController]     at java.lang.reflect.Method.invoke(Method.java:601)
2012-12-15 01:37:25,857 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
2012-12-15 01:37:25,857 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
2012-12-15 01:37:25,857 ERROR [com.edfx.adb.web.controller.AdminController]     at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
2012-12-15 01:37:25,857 ERROR [com.edfx.adb.web.controller.AdminController]     at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:148)
2012-12-15 01:37:25,872 ERROR [com.edfx.adb.web.controller.AdminController]     at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
2012-12-15 01:37:25,872 ERROR [com.edfx.adb.web.controller.AdminController]     at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
2012-12-15 01:37:25,872 ERROR [com.edfx.adb.web.controller.AdminController]     at javax.faces.component.UICommand.broadcast(UICommand.java:300)
2012-12-15 01:37:25,872 ERROR [com.edfx.adb.web.controller.AdminController]     at javax.faces.component.UIData.broadcast(UIData.java:1093)
2012-12-15 01:37:25,872 ERROR [com.edfx.adb.web.controller.AdminController]     at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
2012-12-15 01:37:25,888 ERROR [com.edfx.adb.web.controller.AdminController]     at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
2012-12-15 01:37:25,888 ERROR [com.edfx.adb.web.controller.AdminController]     at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
2012-12-15 01:37:25,888 ERROR [com.edfx.adb.web.controller.AdminController]     at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
2012-12-15 01:37:25,904 ERROR [com.edfx.adb.web.controller.AdminController]     at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
2012-12-15 01:37:25,904 ERROR [com.edfx.adb.web.controller.AdminController]     at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
2012-12-15 01:37:25,904 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
2012-12-15 01:37:25,904 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
2012-12-15 01:37:25,904 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:119)
2012-12-15 01:37:25,919 ERROR [com.edfx.adb.web.controller.AdminController]     at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
2012-12-15 01:37:25,919 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
2012-12-15 01:37:25,919 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
2012-12-15 01:37:25,919 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
2012-12-15 01:37:25,935 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
2012-12-15 01:37:25,935 ERROR [com.edfx.adb.web.controller.AdminController]     at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
2012-12-15 01:37:25,935 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
2012-12-15 01:37:25,935 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
2012-12-15 01:37:25,935 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
2012-12-15 01:37:25,950 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
2012-12-15 01:37:25,950 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
2012-12-15 01:37:25,950 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
2012-12-15 01:37:25,950 ERROR [com.edfx.adb.web.controller.AdminController]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
2012-12-15 01:37:25,950 ERROR [com.edfx.adb.web.controller.AdminController]     at java.lang.Thread.run(Thread.java:722) 
```

简而言之，错误消息是：

```
java.lang.AbstractMethodError: com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.setCharacterStream(ILjava/io/Reader;J)V 
```

通过谷歌搜索这个错误，我发现第一个[链接](https://community.jboss.org/message/778589#778589)说降级到休眠 4.1.3-Final 可以解决这个问题。这奏效了。但我的目标是使用最新版本的休眠。我读到hibernate没有太多的连接池。导致何时需要连接池；它将从服务器获取该池。

我的问题是，在 JBoss AS 7 中运行的生产环境中，是否有必要使用第三方 c3p0；如果没有，我可以删除 c3p0；或者有这个问题的解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T23:11:28.410

请更新到 c3p0-0.9.2-pre7。它已经成熟——除非出现意外情况，否则下一个版本将是 c3p0-0.9.2 最终版本。hibernate 最近添加了一些 JDBC4 依赖项。c3p0 还没有完整的 JDBC4 支持（它将，但在 0.9.2 最终确定之后），但 c3p0-0.9.2-pre7 支持这些方法来维护休眠依赖。

0.9.2-pre7 是 0.9.1.2 的替代版本。只需删除 c3p0-0.9.1.2.jar 并替换为 BOTH c3p0-0.9.2-pre7.jar 和 mchange-commons-java-0.2.3.2.jar。或者只使用 Maven 中央 [groupId: com.mchange, artifactId: c3p0, version: 0.9.2-pre7]，让传递依赖处理其余的事情。请参阅文档的最顶部，[http://www.mchange.com/projects/c3p0/](http://www.mchange.com/projects/c3p0/)以获取下载信息等。

休眠时不需要 c3p0。您可以使用其他连接池。但是虽然我有偏见，但我认为c3p0是一个不错的选择！（我是 c3p0 的作者。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-13T08:51:49.977

较新版本的休眠与`0.9.1.1`. 我使用`hibernate-c3p0:4.3.0.CR1`which 明确地依赖于`c3p0:0.9.2.1`.

**可能的原因：**

*   您的项目中可能还有其他一些依赖项使用旧版本的 c3p0 作为传递依赖项
*   由于较旧的组 id 是`c3p0`和较新的`com.mchange`，maven 可能已将它们都添加到类路径中
*   偶然地，类加载器从而`c3p0:c3p0:0.9.1.1`不是加载类`com.mchange:c3p0:0.9.2.1`（尽管 groupId 改变了，包是相同的）

**解决方案**

c3p0 依赖的 grep

```
`$mvn dependency:tree |grep -B5 "c3p0"`
[INFO] +- org.hibernate:hibernate-c3p0:jar:4.3.0.CR1:compile
[INFO] |  \- com.mchange:c3p0:jar:0.9.2.1:compile
[INFO] |     \- com.mchange:mchange-commons-java:jar:0.2.3.4:compile
--
[INFO] +- org.quartz-scheduler:quartz:jar:2.2.1:compile
[INFO] |  \- c3p0:c3p0:jar:0.9.1.1:compile 
```

排除老一辈！

```
<dependency>
    <groupId>org.quartz-scheduler</groupId>
    <artifactId>quartz</artifactId>
    <version>${quartz.version}</version>
    <exclusions>
        <exclusion>
             <groupId>c3p0</groupId>
             <artifactId>c3p0</artifactId>
             <!-- Bcoz this version is incompatible with hibernate -->
         </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-16T11:26:40.780

休眠核心 4.2.8.Final，休眠 c3p0 4.2.8.Final，c3p0 0.9.2.x。有一个类似的问题：java.lang.AbstractMethodError: com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.setNString(ILjava/lang/String;)V

将 c3p0 版本更改为 0.9.5-pre6 并修复了问题。

# html - 显示内容的各种方式有哪些 to a different position instead of default?

> ID：13885911
> 
> 赞同：0
> 
> 时间：2012-12-14T20:38:18.680
> 
> 标签：html, css, iframe

In other words, I am displaying the content of my Code School account in an in the education section of my portfolio site. The header from Code School is too large, for my taste, to be displayed on my page.

![content in the iframe](../Images/4e6661af9bac18a26556f1d03dc6ffd1.png)

So I either want the page within the iframe to load at a predefined position which I can set in the CSS.

Or the other option could be that I just layer the preceding div to cover over that part of iframe. But other than hacks (which I am still open to), I imagine that there is a way within best practices.

My page in question is viewable at [http://jgallardo.me/home/education/](http://jgallardo.me/home/education/)

# hadoop - Apache Pig 错误消息指南

> ID：13885913
> 
> 赞同：2
> 
> 时间：2012-12-14T20:38:31.860
> 
> 标签：hadoop, apache-pig

我正在寻找有关如何解释各种常见 PIG 脚本错误消息的资源。在冒险进入 Google/SO 之前的第一站。

理想情况下，我想要一个单页或可搜索的权威参考列表：

*   常见错误信息
*   可能的原因
*   典型解决方案

知道任何好的参考资料吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:50:25.390

Pig 的[错误处理函数规范](https://cwiki.apache.org/confluence/display/PIG/PigErrorHandlingFunctionalSpecification)包含有关错误类型/代码的详细信息。由于这在最近没有更新，如果发生不清楚的事情，我还建议您查看源代码。

# hibernate - One to many association - Join tables with non primary key column in JPA

> ID：13885916
> 
> 赞同：10
> 
> 时间：2012-12-14T20:38:42.700
> 
> 标签：hibernate, jpa, one-to-many, hibernate-onetomany

I'm working on legacy system, need to read some of the info from database. Below are the table relationship

Vendor (vendorId - pk, vendorEid, name)
VendorContactBridge (bridgeId -pk, vendorEid, contactEid)
Contact (contactId -pk, contactEid, phone)

vendorEid and contactEid are not the primary key of the table but used as join column in Join table VendorContactBridge.

Vendor Entity -

```
@Entity
@Table(name="Vendor")
public class Vendor implements Serializable{

@Id
@Column(name="VENDORID")
private BigDecimal vendorId;

@Column(name="VENDOREID")
private BigDecimal vendorEid;

@OneToMany(fetch = FetchType.EAGER)
@JoinTable(name="VENDORCONTACTBRIDGE", 
joinColumns={@JoinColumn(name="VENDOREID", referencedColumnName="VENDOREID")},
inverseJoinColumns={@JoinColumn(name="CONTACTEID", referencedColumnName="CONTACTEID")})
private Set<Contact> vendorContact;
} 
```

Contact Entity -

```
@Entity
@Table(name="CONTACT")
public class Contact implements Serializable{

@Id
@Column(name="CONTACTID")
private BigDecimal contactId;

@Column(name="CONTATEID")
private BigDecimal contactEId;

@ManyToOne
@JoinTable(name="VENDORCONTACTBRIDGE", 
joinColumns={@JoinColumn(name="CONTACTEID", referencedColumnName="CONTATEID")},
inverseJoinColumns={@JoinColumn(name="VENDOREID", referencedColumnName="VENDOREID")})
private Vendor vendor;
 } 
```

while running the query, getting below exception

> SecondaryTable JoinColumn cannot reference a non primary key.

I removed the Eager fetch which i have given in Vendor entity, i dont get any exception but it doesn't load the collection. What's wrong with association ?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T08:41:09.743

根据[JPA 2.0 规范](http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-oth-JSpec/)第 11.1.21 段 JoinColumn annotaion on page 379

> 对不是被引用表的主键列的被引用列的支持是可选的。使用此类映射的应用程序将不可移植。

似乎 Hibernate 选择不实现这个可选部分。其他实现可能。我在 EclipseLink 上试过，但那个也不起作用（验证失败）。

我看到两个解决方法。一种是调整您的架构以使用主键，从数据库设计理论的角度来看，这将是正确的事情。然而，这可能不是一个选项，因为其他软件依赖于这个模式，这留下了选项二。通过不在 JPA 中修改关系来解决它，只需使用 eid 并自己检索相关对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T13:20:33.523

我找到了解决这个问题的方法。

看这里：

*   [https://stackoverflow.com/a/4525951/527718](https://stackoverflow.com/a/4525951/527718)

# c# - Can I use alternate Receive Buffers?

> ID：13885917
> 
> 赞同：2
> 
> 时间：2012-12-14T20:38:48.940
> 
> 标签：c#, serial-port, buffer

In C#, Can I change the RX buffers ?

i.e., I may have data coming at me at pretty high speed; not exactly sure at this moment (no scopes or timing or anything; hope I never get to that point).

What I'm thinking (if this is possible) is to change Serial port's buffer (to an alternate one) as soon as the DataReceivedHandler takes over, and use the old buffer for data in other parts of the program.

I'm thinking I might have 3 or 4 of these buffers stacked up, which could happen once per second.

I didn't see this sort of question answered; if it does exist, please just point me to it.

Pretty new to this aspect of code, so apologies if this idea is a disaster to avoid. My data is coming at me at BlueTooth speeds and I'm honestly not sure if I'm going to have to throttle it on the other side or whatever.

# jakarta-ee - @ApplicationScoped CDI bean 和 @PersistenceContext - 这安全吗？

> ID：13885918
> 
> 赞同：27
> 
> 时间：2012-12-14T20:38:54.733
> 
> 标签：jakarta-ee, jpa, java-ee-6, cdi

用 CDI 做这样的事情安全吗？

```
@Named
@ApplicationScoped
public class DAO {

   @PersistenceContext
   private EntityManager entityManager;

} 
```

我知道它`EntityManager`本身不是线程安全的，因此不应在共享的全局上下文中使用，例如`@ApplicationScoped`. 但是，由于注入的对象`@PersistenceContext`实际上是一个围绕底层的线程感知包装器`EntityManager`，这样可以吗？

我已经看过有关该主题的其他帖子，但无法为这个特定案例找出权威答案。例如：

[Java CDI @PersistenceContext 和线程安全](https://stackoverflow.com/questions/11063567/java-cdi-persistencecontext-and-thread-safety)

例如，使用 with 看起来是安全的`@Stateless`- 但我不确定这是因为它的工作方式`@Stateless`，还是因为它`@PersistenceContext`本身固有的东西。

**编辑** 我困惑的根源是`@PersistenceContext`注入的`EntityManager`包装器似乎知道当前线程，以便确定是否已经有一个事务正在进行中。所以也许我把线程意识和线程安全混淆了，它们是两个不同的东西。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-15T14:47:31.707

我很确定在这种情况下 CDI 不会为实体管理器创建上下文代理。毕竟，它会在什么范围内？您可能想要类似于假设`@ThreadScoped`或只是的东西`@RequestScoped`，但`@PersistenceContext`不是 CDI 注释，并且 CDI 不会修改其语义。

所以这里发生的是 Java EE 6 平台“托管 bean”注入，它类似于在 Servlet 中注入实体管理器。这两种情况都为您提供了一个不能直接使用线程安全的实例。

> 例如，与@Stateless 一起使用看起来是安全的——但我不确定这是因为@Stateless 的工作方式，还是因为@PersistenceContext 本身固有的一些东西。

这是因为工作方式`@Stateless`。对无状态 bean 上的方法的每个请求（调用）都由容器路由到唯一的实例。容器保证没有两个线程在同一个 bean 中处于活动状态。

使用 CDI，您可以通过将实体管理器封装在请求范围的 bean 中并将其注入到应用程序范围的 bean 中来获得每个请求的类似效果：

```
import javax.enterprise.context.RequestScoped;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

@RequestScoped
public class EntityManagerProvider {

    @PersistenceContext
    private EntityManager entityManager;

    public EntityManager getEntityManager() {
        return entityManager;
    }

} 
```

将其注入到您之前注入实体管理器的 bean 中：

```
@Named
@ApplicationScoped
public class DAO {

   @Inject
   private EntityManagerProvider entityManagerProvider;

} 
```

这将为您提供每个请求的唯一实体管理器。您也可以轻松地将其转换为生产者方法，因此您不必调用`getEntityManager()`注入的提供者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-27T14:26:49.970

这种方法怎么样：

```
    @RequestScoped
    类 EntityManagerProducer {

        @PersistenceContext
        私有实体管理器实体管理器；

        @生产
        @RequestScoped
        公共实体管理器生产实体管理器（）{
          返回这个实体管理器；
        }
    }

```

在任何范围的 CDI Beans 中：

```
@注入
私有实体管理器实体管理器；

```

应该在每个请求中创建实体管理器，当它通过一个它注入的 CDI bean 时创建一个新的实体管理器。在注入的 CDI Bean 中，您将获得一个在请求中使用的实体管理器。如果需要交易，实体经理将加入它。因此，您在每个请求中都会获得一个新的实体管理器，这意味着最后一切都会被清理，并且您不会遇到线程冲突。简单易行，不是吗？

# linux-kernel - Executing block of code without context switch

> ID：13885919
> 
> 赞同：1
> 
> 时间：2012-12-14T20:38:56.487
> 
> 标签：linux-kernel, context-switch, perf

Is there any way to execute a block of code in C without suffering a Context Switch?

I have modified perf stat to sample the counters periodically. While this works, it ends up giving me some bad data points such as 0 cycles x instructions.

I believe that the reason for this happening is because of context switching.

Since my code always pulls cycle counter value before instruction counter, if a context switch were to happen after pulling the cycle counter value, and if the process I was profiling executed for some portion of the scheduling quanta, then when I finally pulled the instruction counter value, it would be 'one ahead' of the cycle counter value that I already pulled.

Is there any way to execute the code-block without allowing a context switch to take place?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:42:03.167

不，没有简单的方法来实现 - 在没有上下文切换的情况下执行代码 - （除非您的代码在内核中运行，但无论如何您都想处理中断）。

[您可以使用clock_gettime(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/clock_gettime.2.html)在 Linux 应用程序中测量时间。仔细阅读[时间（7） 。](http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html)

顺便说一句，您确实需要上下文切换。没有它们，某些计算机可能会过热并损坏。（有些机器用软件处理他们的风扇）。

# javascript - 如何保持 SELECT 元素的宽度小但选项灵活

> ID：13885924
> 
> 赞同：15
> 
> 时间：2012-12-14T20:39:08.490
> 
> 标签：javascript, jquery, html, css

**问题：**

我的下拉列表是动态加载的，其中一些选项很长，这弄乱了我的页面布局。我希望`select`元素的大小很小，但是当展开时，允许用户看到所有 long `options`。为此，我已将 的 设置`width`为`SELECT`固定值，例如`width:200px;`

**预期/期望的行为（在 Chrome 中工作）**

![在此处输入图像描述](../Images/f8e6fa8e5d80bff1985a91982c0c548d.png) **IE8 中的实际行为**

![在此处输入图像描述](../Images/63cb16abc8135e01c65e437acaad90a6.png)

**我试过的：**

```
select{
    overflow:show;
}
option{
    overflow:show;
    width:1000px;
} 
```

**简化的小提琴：**

[http://jsfiddle.net/gCbhq/2/](http://jsfiddle.net/gCbhq/2/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T20:49:00.100

好的。不确定这是否有帮助。我正在使用 Jquery Mobile，我的选择按钮是纯图标（= 28px）。在 IE8 上，我的所有选项也都是 28px。

我用这个修复了它：

```
select { min-width: 150px !important; } 
```

但这仅适用，因为 Jquery Mobile 隐藏了选择并将其自己的元素添加到“顶部”。

唉，这是一个修复 - [http://css-tricks.com/select-cuts-off-options-in-ie-fix/](http://css-tricks.com/select-cuts-off-options-in-ie-fix/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T22:18:02.377

你所能做的就是破解它，让它看起来很接近。`select`仅通过添加/更改单独的 CSS 无法模拟 Chrome 行为。

在不添加任何其他元素的情况下，这是尽可能接近的：

[http://css-tricks.com/examples/SelectCutoffFix/](http://css-tricks.com/examples/SelectCutoffFix/) （点击返回顶部文章了解实现细节）

上述解决方案是您可以根据您的要求做的最好的解决方案，即`select`.

如果您愿意`div`在（没有替换或特殊的 UI 小部件）周围添加一点样式`select`，您可以让它看起来更好一点：

[http://www.getharvest.com/blog/wp-content/uploads/2009/12/select_box_demo.html](http://www.getharvest.com/blog/wp-content/uploads/2009/12/select_box_demo.html)

（详细信息：http: [//www.getharvest.com/blog/2009/12/dropdown-problems-on-internet-explorer/](http://www.getharvest.com/blog/2009/12/dropdown-problems-on-internet-explorer/)）

该解决方案与我所看到的一样接近您正在寻找的东西。话虽这么说，这是一个黑客，并且有一些问题：

*   如果您`option`连续两次选择相同的，则在焦点离开之前不会出现预期的行为`select`
*   打开时`select`，向下箭头按钮消失（因为溢出被​​封闭的 div 隐藏）

上述解决方案会让您更接近一些，但它们看起来都不像我希望的那样优雅。但是，如果您无法向页面添加任何其他内容，那么这些将是您的最佳选择（基于过去无数小时的研究）。是的，这很糟糕，但我们都在同一条船上。

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T05:48:27.480

没有一个确切的解决方案，但你可以给这个小 html 和 css hack 来实现你的目标。 **HTML**

```
<div class="divWrapper">
 <select class="selectBox">
 <option>011111111111111111111111111111111111111111111111111112</option>
 <option>011111111111111111111111111111111111111111111111111112</option>
 <option>011111111111111111111111111111111111111111111111111112</option>
 <option>011111111111111111111111111111111111111111111111111112</option>
 </select>
 </div> 
```

**CSS**

```
.divWrapper{
    width:150px;
    overflow:hidden;
    }

.selectBox{
    width:150px;
    }

.selectBox:focus{
    width:auto;
    } 
```

在这里，我们用一个宽度必须等于选择框 div 的 div 包装选择框。并专注于选择框使其再次自动宽度。

如果您希望 jquery 使用 jquery 部分。当您选择任何选项时，它将按照您定义的方式调整选择框的宽度。[在http://jsfiddle.net/sudhanshu414/5NEWc/2/](http://jsfiddle.net/sudhanshu414/5NEWc/2/)上查看

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T12:46:19.003

我无法重现该行为，但您可以在 css 中尝试：

```
select:focus{width:auto !important;} 
```

但是你也可以看看[JQuery-UI](http://jqueryui.com/)。

[EDIT-1-]：我试图重现 IE 的意外行为。在 7/8/9 我看不到问题。也许您正在使用一个非常旧的 IE？如果可能，请尝试运行版本 8 的更新。

你想做的事，影响深远。我不认为你可以访问孩子们改变他们的外表，同时保持 SELECT 父母在正常大小。您需要解耦这两个元素。您可以尝试为下拉列表实现自己的解决方案，但对于其他浏览器（如其他 IE 版本、Chrome 等）来说，这似乎是正常行为。这可能是浪费工作。

```
$(document).ready(function(){
  $('select').click( function () { 
     //Try to alter the css here - but I'm not sure if this could work.
  }); 
```

[EDIT-2-]：计划[为 JQuery-UI 选择菜单](http://wiki.jqueryui.com/w/page/12138056/Selectmenu)。但如果您考虑使用其他 JQuery 插件，您可以使用[dropkick.js](http://jamielottering.github.com/DropKick/)或[查看此列表](http://www.jquery4u.com/plugins/10-jquery-selectboxdrop-down-plugins/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T01:13:48.133

这是我用作解决此问题的纯 css 解决方案。如果专注于选择推送任何其他页面元素，我只需 z-index 选择：焦点。如果需要，您也可以将 select:focus 宽度设置为 auto，它仍然可以工作。

```
<!DOCTYPE html>
<html lang="en">
  <head>
<style type="text/css">
select:focus {width:300px;}
.cover select {width: 150px;} 
</style>

  </head>
  <body>

<div class="cover">
<select>
 <option>Select Box</option>
 <option>Option One a line of text</option>
 <option>Option Two a longer line of text</option>
 <option>Option Three is a much longer line of text</option>
 <option>Option Four </option>
</select>
</div>

  </body>
</html> 
```

如果您删除“封面”类并仅设置选择的样式，则选择也会在焦点上调整大小。所以你可以选择你希望它以哪种方式显示。

这已经在最新版本的 chrome、firefox 和 IE 中测试过了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T16:49:56.043

不要在 IE 中单独使用 CSS，因为它或多或少是您想要设置样式的操作系统小部件。

尝试一个 selectBox，它使用 JavaScript 插入一些 HTML 和 JavaScript 来模仿 select 的行为，但使用其他 HTML 标记

[https://github.com/revsystems/jQuery-SelectBox](https://github.com/revsystems/jQuery-SelectBox)或这里
[http://www.bulgaria-web-developers.com/projects/javascript/selectbox/](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)

# asp.net-mvc - 在单元测试中检查来自 MVC Web api 的响应类型

> ID：13885925
> 
> 赞同：0
> 
> 时间：2012-12-14T20:39:11.657
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在大脑冻结。

我从网络 api 帖子中得到的回复是；

```
<string>985c4198-8892-4738-8f85-d9adf5ff474a</string> 
```

使用返回；

```
return myGuid.ToString(); 
```

我希望能够对响应进行单元测试，但我一生都想不出该怎么做。我需要能够检查它是否是 Guid。我相信我错过了将响应“反序列化”为 a`typeof(string)`然后 I can的步骤`TryParse()`，但这是我今晚的想法出错的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:42:12.997

就像是

```
Guid g = Guid.Empty();

string webApiResult = GetApiResult();

webApiResult = webApiResult.Replace("<string>", string.Empty);
webApiResult = webApiResult.Replace("</string>", string.Empty);

Assert.IsTrue(Guid.TryParse(webApiResult , out g)); 
```

关键是使用 TryParse，它将返回一个布尔值，指示解析是否成功。

# objective-c - ParseKit 语法不支持“allowsGroupingSeparator”。为什么？

> ID：13885931
> 
> 赞同：2
> 
> 时间：2012-12-14T20:39:40.643
> 
> 标签：objective-c, parsekit

包含数字状态“allowsGroupingSeparator”的 ParseKit 语法似乎不起作用。

```
@allowsGroupingSeparator = YES;
@start = number;
number = Number; 
```

解析包含分组分隔符的数字只会匹配到分隔符的数字。GitHub ParseKit 框架中的任何测试似乎都没有涵盖此语法用例。（此外，其他数字状态似乎都不适用于语法。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:32:23.037

[ParseKit](http://parsekit.com)的开发者在这里。

这是一个疏忽。[我在谷歌代码的主干头中](https://code.google.com/p/parsekit/)`allowsGroupingSeparator`添加了支持。

您上面的用法是正确的，现在应该可以工作了。

# windows - 将 Windows PRIVATEKEYBLOB 转换为 Qt 的 QSslKey

> ID：13885932
> 
> 赞同：2
> 
> 时间：2012-12-14T20:39:52.000
> 
> 标签：windows, qt, ssl, ssl-certificate

我正在开发一个使用 SSL 加密的 Qt 应用程序（Windows 服务）。

我需要从 Windows 证书存储访问证书和关联的私钥，并使用 setLocalCertificate 和 setPrivateKey 将其传递给我的 QSslSocket，它们分别接受 QSslCertificate 和 QSslKey。

我能够从商店获取证书并使用 Windows API '（CertOpenStore、CertFindCertificateInStore）将其设置为 QsslSocket。现在有了证书，我需要提取其私钥并设置为 ssl 套接字。我正在以相同的顺序使用 CryptAcquireCertificatePrivateKey、CryptGetUserKey 和 CryptExportKey Windows API，这给了我一个 Microsoft PRIVATEKEYBLOB，现在我需要将其转换为 QSslKey 可以理解的格式。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T02:23:26.770

解决了！！想到在这里分享解决方案，它可能对某人有所帮助。

```
// Open the certificate store to be searched.
HCERTSTORE hSystemStore = CertOpenStore((LPCSTR)(CERT_STORE_PROV_SYSTEM),  0, NULL,
                             CERT_SYSTEM_STORE_LOCAL_MACHINE, L"MY");

CRYPT_DATA_BLOB dataBlob = {0};
QString password("password"); // your password for the cretificate and private key goes here

if(PFXExportCertStoreEx(hSystemStore, &dataBlob, password.toStdWString().c_str(), NULL,
                            EXPORT_PRIVATE_KEYS | REPORT_NOT_ABLE_TO_EXPORT_PRIVATE_KEY | REPORT_NO_PRIVATE_KEY))
{
    if (dataBlob.cbData > 0)
    {
        dataBlob.pbData = (BYTE*)malloc(dataBlob.cbData);
        if (PFXExportCertStoreEx(hSystemStore, &dataBlob, password.toStdWString().c_str(), NULL,
                                    EXPORT_PRIVATE_KEYS | REPORT_NOT_ABLE_TO_EXPORT_PRIVATE_KEY | REPORT_NO_PRIVATE_KEY))
        {
            EVP_PKEY *pkey;
            X509 *cert;
            STACK_OF(X509) *ca = NULL;
            PKCS12 *p12;
            int i;
            CRYPTO_malloc_init();
            OpenSSL_add_all_algorithms();
            SSLeay_add_all_algorithms();
            ERR_load_crypto_strings();

            BIO* input = BIO_new_mem_buf((void*)dataBlob.pbData, dataBlob.cbData);
            p12 = d2i_PKCS12_bio(input, NULL);

            PKCS12_parse(p12, password.toStdString().c_str(), &pkey, &cert, &ca);
            PKCS12_free(p12);

            if (cert)
            {
                BIO *boCert = BIO_new( BIO_s_mem() );

                PEM_write_bio_X509(boCert, cert);
                if (ca && sk_X509_num(ca))
                {
                    for (i = 0; i < sk_X509_num(ca); i++)
                    {
                        PEM_write_bio_X509(boCert, sk_X509_value(ca, i));
                    }
                }
                char *certStr;
                long len = BIO_get_mem_data(boCert, &certStr);

                QSslCertificate localCertificate(QByteArray::fromRawData(certStr, len));
                mySslSocket->setLocalCertificate(localCertificate);

                BIO_free_all(boCert);
            }

            if (pkey)
            {
                BIO *bo = BIO_new( BIO_s_mem() );
                PEM_write_bio_PrivateKey(bo, pkey, NULL, (unsigned char*)(password.toStdString().c_str()), password.length(), NULL, (char*)(password.toStdString().c_str()));

                char *p;
                long len = BIO_get_mem_data(bo, &p);

                QSslKey key(QByteArray::fromRawData(p, len), QSsl::Rsa);
                mySslSocket->setPrivateKey(key);
                BIO_free_all(bo);
            }
           free(dataBlob.pbData);
        }
    }
}

if(hSystemStore)
    CertCloseStore(hSystemStore, 0); 
```

# oracle - 如何调用 Oracle 过程

> ID：13885936
> 
> 赞同：4
> 
> 时间：2012-12-14T20:40:05.500
> 
> 标签：oracle, stored-procedures, clojure, database-cursor

如何使用Clojure调用一个以字符串和日期为输入并返回一个refcursor作为输出的Oracle存储过程？

```
variable rc refcursor;
exec SOMEDB.PKG.GETPOSITIONS('ABC', to_date('2012-02-07','yyyy-mm-dd'), :rc)
print rc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:31:38.187

我就是这样做的。我已经包含了一些`fn`我用来将字符串转换为 SQL 日期的 helper。

```
(ns foo
  (:require [clojure.java.jdbc :as jdbc]
            [clojure.string :as cs]))

(def conn
  {:classname "oracle.jdbc.OracleDriver"
   :subprotocol "oracle:thin"
   :subname "@//host.name.here:port.here/db.here"
   :user "user"
   :password "pass"})

(defonce ORACLE_CURSOR oracle.jdbc.driver.OracleTypes/CURSOR)

(defn date-to-sql-date [date]
  (java.sql.Date. (.getTimeInMillis
                    (java.util.GregorianCalendar.
                      (+ (.getYear date) 1900) (.getMonth date) (.getDate date)))))

(defn string-to-sql-date [date]
  ;; assumes American date formats
  (if-not (empty? date)
    (date-to-sql-date (java.util.Date. (cs/replace date #"-" "/")))))

(jdbc/with-connection conn
  (with-open [stmt (.prepareCall (jdbc/connection) "{ call SOMEDB.PKG.GETPOSITIONS(?, ?, ?) }")]
    (doto stmt
      (.setString 1 "ABC")
      (.setDate 2 (string-to-sql-date "2012-02-07"))
      (.registerOutParameter 3 ORACLE_CURSOR)
      (.execute))
    (resultset-seq (. stmt getObject 3)))) ;; lazy-sequence 
```

[结果集序列](http://clojuredocs.org/clojure_core/clojure.core/resultset-seq)

**注意：**如果您打算从 a 返回它，您可能需要消耗整个序列，`fn`因为连接将在`fn`返回后立即关闭。

# c++ - 重命名（别名）数组元素 C

> ID：13885938
> 
> 赞同：4
> 
> 时间：2012-12-14T20:40:19.187
> 
> 标签：c++, c

不确定什么是“良好做法”或被认为更“正确”。我有一个数组，我想通过数组名 [] 以外的名称访问单个元素。我可以使用#defines 或指针，也可能是其他方式。

例子：

```
#define value1 myarray[1]

int myarray[SIZE];
value1 = 5; 
```

或者

```
int myarray[SIZE];
int *ptr;
ptr = &myarray[1];
*ptr = 5; 
```

在我看来，#define 路线更简单，使用更少的内存，但可能会带来一堆我不知道的问题。任何见解都会很棒，我喜欢尽可能让我的代码遵循普遍接受的标准。

*编辑：也许有更好的方法。我的最终目标是获得一个将发送到外围端口的阵列。然而，数据由非常不同的数据集组成，单个数组名称不能代表所分配的数据。我的内存非常有限，所以我想避免重复存储每个值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T20:49:12.380

我提出了第三种选择，例如：

```
#define VALUE1_IDX  1

int myarray[SIZE];
myarray[VALUE1_IDX] = 5; 
```

与#1 相比，它的优势在于，您使用 myarray 仍然很明显，而与 #2 相比，优势在于，正如您所说，避免使用指针。我会怀疑，但尚未验证，通过优化，选项#2 不会有额外的内存使用，尽管它看起来很直观。

我认为最好的解决方案会因情况而异，我认为您的两个选项中的任何一个在正确的情况下都是可以辩护的。

编辑：为了回应 Kevin 的评论，首先值得检查的是，当您不集体处理这些值时，是否可以避免使用数组。我意识到在某些情况下这肯定不适用，例如，如果您阅读了长消息并想简单地提取几个关键值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T21:20:45.407

为什么不参考？

```
int A[3];  
int& a1=A[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T21:49:07.880

```
enum {SIZE = 100};

struct Mapping {
  int unused1;
  int value1;
  int unused2;
};

Mapping& AsMapping( int(&array)[SIZE] ) {
  return *reinterpret_cast<Mapping*>(&array);
}

int arr[SIZE];
AsMapping(arr).value1 = 5;
Mapping& values = AsMapping(arr);
values.value1 = 5; 
```

这几乎不需要内存，优化器应该能够擦除所有内容。同时，它是合理可维护的。

在您的 s 上设置对齐`struct`可能是您必须小心的要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T20:50:16.157

`union`s 是别名变量的另一种方式。但不要将此作为建议。如果您依赖别名，它们是危险的（不可移植的）。对于不需要的变量，您应该只使用它们来优化内存使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T22:28:32.000

非定义方法允许您一定程度的类型更正，这是第二种方法所不具备的。

此外，任何理智的编译器生成的实际代码对于两者都是相同的。

总而言之，我更喜欢第二个，因为它是立即显而易见的。另一个问题是#define 可能会导致超出您实际处理的区域范围的问题。

使用后者更明智，因为这意味着其他人不太可能在以后出现并搞砸它......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T21:00:16.480

你可以做这样的事情

```
typedef enum
{
    foo = 0;
    // ... more named values
    bar = SIZE;
} Thing;

int value[SIZE];
value[foo] = 5; 
```

[使用枚举作为数组索引](https://stackoverflow.com/questions/404231/using-an-enum-as-an-array-index)

# css - 为什么我的 div 不能水平对齐？

> ID：13885943
> 
> 赞同：1
> 
> 时间：2012-12-14T20:40:39.390
> 
> 标签：css, html, alignment

问题我想不通。我有一个非常简单的页面布局。容器内的两个 div。顶部的 div div "navigation-block" 包含一个 ul 和 li 的菜单。从 CSS 你会看到它有 30% 的宽度。当前位于“导航块”div 下方的“bio”div 的宽度为 30%。

我想要的只是让“bio” div 浮动到“navigation-block” div 的右侧。我确保“导航块”上没有 clear:both 或 clear:right。我已经在“bio” div 和 display:inline 上尝试了 float:left 和 float:right，但我错过了什么并不高兴。

Html 很简单，没有检查过任何错误。

下面的 CSS

```
.gridContainer {
position:relative;
margin-left: auto;
margin-right: auto;
width: 100%;
height: 100%;   
}

#bio {
width: 30%;
height:auto;
background-color: rgba(256,256,256,0.2);
color: rgba(256,256,256, 0.8);
text-align: center;
border: 1px solid white;
}

#navigation-block {
position:relative;
width:30%;  
} 
```

下面是菜单 CSS 的其余部分

```
ul#sliding-navigation
{
list-style: none;
font-size: .75em;
padding: 0;
}

ul#sliding-navigation li.sliding-element h3,
ul#sliding-navigation li.sliding-element a
{
display: block;
width: 60%;
padding: 2% 2%;
margin: 0;
margin-bottom: 1%;
-webkit-box-sizing: border-box; 
-moz-box-sizing: border-box;
box-sizing: border-box; 
```

}

```
ul#sliding-navigation li.sliding-element h3
{
color: rgba(0, 0, 0, 0.8); 
background-color: rgba(256, 256, 256, 0.6);
font-weight: normal;
border: 1px solid white;

}

ul#sliding-navigation li.sliding-element a
{
color: #000;
background-color: rgba(256, 256, 256, 0.4);
text-decoration: none;
}

ul#sliding-navigation li.sliding-element a:hover { color: rgba(256, 256, 256, 0.8); }

<body>
<div class="gridContainer clearfix">

 <div id="navigation-block">
        <ul id="sliding-navigation">
            <li class="sliding-element"><h3>Zion City Limits</h3></li>
            <li class="sliding-element"><a href="Index.html">Home</a></li>
            <li class="sliding-element"><a href="#">Danny</a></li>
            <li class="sliding-element"><a href="#">Dylan</a></li>
            <li class="sliding-element"><a href="#">Bill</a></li>
            <li class="sliding-element"><a href="#">Rich</a></li>
            <li class="sliding-element"><a href="#">John</a></li>
        </ul>
   </div>

<div id="bio">This is the content for Layout Div Tag </div>
</div>
</body> 
```

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T12:52:23.860

我知道这是一篇旧帖子，但为了帮助遇到这篇文章的下一个人。

```
display: inline-block; 
```

当父 div 的高度不是静态的时，这必须用于在其他 div 内对齐 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:56:46.907

这里有两个选择...

```
 #bio, #navigation-block {
   ...
   display:inline-block
} 
```

或者：

```
#bio, #navigation-block {
   ...
   float: left
} 
```

`div`s 是块级元素，默认情况下不会彼此相邻

# ubuntu - 在 ubuntu 12.04 上安装 python-software-properties

> ID：13885945
> 
> 赞同：4
> 
> 时间：2012-12-14T20:40:48.913
> 
> 标签：ubuntu, apt-get

我正在尝试在 ubuntu 12.04 机器上安装 python-software-properties 包。我不断得到：

```
The following packages have unmet dependencies:
python-software-properties : Depends: python (< 2.7) but 2.7.3-0ubuntu2 is to be installed
                          Depends: python-pycurl but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

Aptitude 显示它尝试安装的版本是 0.75.10.3。当然，我已经运行了 apt-get update。我需要这个来将 ppa 添加到我的 repo 列表中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T21:49:13.443

评论中的这两行完美地总结了您的问题：

> 我看到很多清晰的台词。实际上，整个sources.list 文件看起来像是属于lucid 的。
> 
> 有人告诉我它正在运行 12.04。

在某种程度上是这样，但不是全部。如果不是太多工作，我建议从新安装重新开始。

或者，

1.  [重新生成您的 APT 源](http://repogen.simplylinux.ch/)并将它们放入`/etc/apt/sources.list`.
2.  确保仅`precise`列出/配置源（包括目录中的文件`/etc/apt/sources.list.d`。
3.  运行`sudo apt-get clean`和`sudo apt-get update`。
4.  更新/升级所有软件包（例如`sudo apt-get dist-upgrade`）

但是，这并不能确保所有包都处于干净状态，因此您可能会再次遇到麻烦。

# c# - 如何使用正则表达式获取 div 标签内容

> ID：13885948
> 
> 赞同：0
> 
> 时间：2012-12-14T20:41:05.327
> 
> 标签：c#, regex, html-parsing

我想获取 div 标签的内容。例如：

```
<div id="gameDetailsInner">
<div id="headerText" style="padding-left: 0px !important;padding-top: 0px !important;">
<h1><a href="http://www.abc.com/games.php?flash=7264">abc text</a></h1>
</div>
<div style="min-height: 90px;">
<a href="http://www.abc.com/games.php?param=12345"><img src="http://abc.abc.com/images/7264.jpg" alt="abc" width="120" height="78" id="gameDetailsInnerImg"/>
</a>
How can i get this text with regex?
</div> 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:44:07.817

如果您使用 PHP，则可以使用该`strip_tags()`函数从字符串中删除所有 HTML 标记。

除此之外，您还需要使用适当的 HTML 解析器。您无法使用正则表达式解析 HTML。您需要使用适当的 HTML 解析器。[http://htmlparsing.com](http://htmlparsing.com)列出了许多针对不同语言的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:49:34.070

不幸的是，您不能使用正则表达式可靠地解析 HTML。有关详细信息，请参阅这个著名的问题：[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T13:10:54.327

```
<div.*>([^>]+)</div> 
```

**`div`如果内容就在结尾之前，**Group1**给出的内容`</div>`**

# sql - SQL 中的计算

> ID：13885949
> 
> 赞同：0
> 
> 时间：2012-12-14T20:41:07.520
> 
> 标签：sql, sql-server, sql-server-2000

**我正在寻找在 SQL SERVER 2000 上有效的答案！**
我在 SQL 中有一个表，就像

```
 Jan hours  
    Employee 1 Regular      10
    Employee 1 Overtime     10
    Employee 1 Vacation     1
    Employee 2 Regular      15
    Employee 2 Overtime     15
    Employee 2 Vacation      1 
```

什么是 SQL 查询，以便在同一个表中只有常规和加班时间有条目？所以同一张表中接下来的两个条目看起来像

```
 Emplpyee 1 Total     20
    Emplpyee 2 Total     30 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:44:16.050

我不知道您的列名甚至表结构，但您可以使用以下使用聚合函数和 a 的内容`GROUP BY`：

```
select emp, sum(hours) Total
from yourtable
where type in ('Regular', 'Overtime')
group by emp 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/dca39/2)

如果您的数据未标准化并且员工和类型在同一列中，那么您可以使用以下内容：

```
select 
  replace(replace(emp, 'Regular', ''), 'Overtime', '') Emp,
  sum(hours) total
from yourtable
where emp like '%Regular%'
  or emp like '%Overtime%'
group by replace(replace(emp, 'Regular', ''), 'Overtime', '') 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/12135/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:46:22.010

尝试这个：

```
select 
    left(EmpName, 11) + ' Total',
    SUM(hours)
from 
    emptab
WHERE
    hourstype in ('Regular', 'Overtime')
group by
    EmpName 
```

# ruby-on-rails - Rails 3.2 ActionView::Template::Error javascript_include_tag

> ID：13885951
> 
> 赞同：3
> 
> 时间：2012-12-14T20:41:13.983
> 
> 标签：ruby-on-rails, windows-8, actionview

我在 Windows 7 笔记本电脑上有一个完美的开发环境。今天，我得到了一台新的 Windows 8 笔记本电脑，并试图在上面设置开发环境。安装了 rails 等并创建了新的示例应用程序，它运行良好。然后我克隆了我的应用程序并尝试了。收到以下错误：

```
Completed 500 Internal Server Error in 2354ms

 ActionView::Template::Error ((in C:/....../appname/app/assets/javascripts/gmaps4rails/gmaps4rails.base.js.coffee)):
3: <head>
4:   <title><%=yield :title %></title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8:   <%= render 'layouts/shim' %>
9: </head>
app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb__782381622_56858160'

Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.7/lib/action_dispa 
```

我用谷歌搜索并搜索了 javascript_include_tag 并查看了许多线程，但无法找到解决方案。

感谢解决此问题的任何帮助。

环境信息：

```
$rails -v
Rails 3.2.7

$ruby -v
ruby 1.9.3p327 (2012-11-10) [i386-mingw32] 
```

编辑：我刚刚注意到当我有咖啡脚本文件甚至是一个空文件时会出现这个问题。我仍然不知道如何解决它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T00:19:35.180

检查这个修改 execjs runtimes.rb 为我修复它：

[https://github.com/sstephenson/execjs/issues/81](https://github.com/sstephenson/execjs/issues/81)

我所做的修复是编辑 lib/execjs/runtimes.rb （在我的机器上的 execjs gem 的路径下...c:\Ruby192\lib\ruby\gems\1.9.1\gems\execjs-1.3.0）所以JScript 运行时的定义如下：

```
JScript = ExternalRuntime.new(
  :name        => "JScript",
  :command     => "cscript //E:jscript //Nologo",
  :runner_path => ExecJS.root + "/support/jscript_runner.js",
  :encoding    => 'UTF-8'
) 
```

问题似乎与 Windows 8 中的 JS 运行时有关。不完全确定交易是什么。可能有几种方法可以解决它，安装 node.js、therubyracer 之类的。但这成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T03:21:09.827

In your application.js if you change the *"application"* to *"default"* it will start working. I dont know why but it does.

Reading application.js it feels as if the page will try to seek turbolinks.js in the *assets/javascripts/* folder but can't find that file. When we change it from application to default , it pulls the turbolinks from a default location for the Ruby, not for the application. Just my assumption.

# xcode - 我想知道为什么需要两次单击按钮才能完成此 UIImageView 代码？

> ID：13885954
> 
> 赞同：1
> 
> 时间：2012-12-14T20:41:45.420
> 
> 标签：xcode, cocoa-touch, uiimageview

以供参考：

```
@interface rjhccViewController : UIViewController{

int myInt;

IBOutlet UIImageView *testcontainer;
    IBOutlet UILabel *heightS;
    IBOutlet UILabel *widthS;
}

-(IBAction) img1;
-(IBAction) img2;

@end

-(IBAction)img1{

UIImage *img = [UIImage imageNamed:@"p.jpeg"];
[testcontainer setImage:img];
[testcontainer setFrame:CGRectMake(0,0,50,50)];
int myInt = (int) img.size.height;
NSString *imgheight = [NSString stringWithFormat:@"%i",[[NSNumber numberWithFloat:img.size.height] intValue]];
heightS.text = imgheight;
} 
```

所以我把它附加到一个按钮上。当我单击按钮时，图像会显示并报告高度，但容器不会改变大小。当我再次单击该按钮时，它确实转到了 CGRectMake 的正确位置……不知道为什么？

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:33:05.313

如果在将最后一个设置为 UIImageView 的 image 属性后，需要将 UIImageView 的大小设置为与图像相同，请尝试以下代码：

```
UIImage *img = [UIImage imageNamed:@"p.jpeg"];
[testcontainer setImage:img];
[testcontainer sizeToFit]; 
```

# c# - 如果将字段定义为自动属性，如何获取字段的值？

> ID：13885956
> 
> 赞同：0
> 
> 时间：2012-12-14T20:41:51.770
> 
> 标签：c#, reflection, automatic-properties

如果将字段定义为自动属性，如何获取字段的值？
我不知道为什么，但我第一次遇到如此简单的任务，这种简单的任务被称为`GetValue`这种无法解释的方法，它不能按我的意愿工作，并且通常会抛出各种异常，而不是做它原来的简单工作。

一些代码例如：

```
Class A
{
   public int Age { get; set;}
} 
```

现在假设经过反射，我在 FiledInfo[] 的结构中保存了 A 实例的字段。
现在我在上面的数组中找到了相关的 fieldInfo，他的名字是：
{Int32 k__BackingField} 听起来很奇怪，无论如何..
如何使用 GetValue() 来获取 int 值？正如我所说，我尝试了很多东西..

**编辑：（** 这是部分简化的代码 - 不要生气）

```
private static string foo1<T>(T o)
        {
            var type = o.GetType();
            var fields = type.GetFields(BindingFlags.Public | BindingFlags.Instance | BindingFlags.NonPublic);
           ....
            foo(fields);
         }
}

private static void foo(FieldInfo[] fields)  
        {

            foreach (FieldInfo field in fields)
            {

                if (field.FieldType.IsValueType)
                {
                    var fieldNameLength = field.Name.IndexOf(">") - (field.Name.IndexOf("<")+1);
                    var fieldName = field.Name.Substring(field.Name.IndexOf("<")+1, fieldNameLength);
                    var fieldValue = field.ReflectedType.GetProperty(fieldName).GetValue(field.ReflectedType, null)
                }
             }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:45:54.447

```
A a = new A() { Age = 33 };
var age = a.GetType().GetProperty("Age").GetValue(a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:01:59.217

而不是`var fieldValue = field.ReflectedType.GetProperty(fieldName).GetValue(field.ReflectedType, null)`你应该只是：`var fieldValue = field.GetValue(o, null)`注意你需要传递你的实例`o`。真的，你应该做LB发布的内容并通过名称找到你的属性，或者如果你不知道名称，通过它们枚举通过`myType.GetProperties`

这是修改后的代码以使用属性：

```
private static void foo1<T>(T o)
{
    var type = o.GetType();
    var properties = type.GetProperties(BindingFlags.Public | BindingFlags.Instance | BindingFlags.NonPublic);

    foo(properties, o);
}

private static void foo(PropertyInfo[] properties, object o)
{
    foreach (PropertyInfo property in properties)
    {
        if (property.PropertyType.IsValueType)
        {
            var propertyValue = property.GetValue(o, null);
            //do something with the property value?
        }
    }
} 
```

编辑：您可能希望确保该属性有一个 getter（请参阅：[如何仅找到同时具有 getter 和 setter 的属性？](https://stackoverflow.com/questions/302476/how-do-you-find-only-properties-that-have-both-a-getter-and-setter)），或者它可能是一个自动属性（请参阅：[如何找出一个属性是带有反射的自动实现属性吗？](https://stackoverflow.com/questions/2210309/how-to-find-out-if-a-property-is-an-auto-implemented-property-with-reflection)）但我猜这不一定是您的要求，可能只是正确使用该`GetValue`方法或如何使用反射来检查类型。

编辑：如果您仍然希望使用它们，这里是使用字段的相同代码：

```
private static void foo1<T>(T o)
{
    var type = o.GetType();
    var fields = type.GetFields(BindingFlags.Public | BindingFlags.Instance | BindingFlags.NonPublic);

    foo(fields, o);
}

private static void foo(FieldInfo[] fields, object o)
{
    foreach (FieldInfo field in fields)
    {
        if (field.FieldType.IsValueType)
        {
            var fieldValue = field.GetValue(o);
            //do something with the field value?
        }
    }
} 
```

# openlayers - 如何使用 GML 作为 WMS 的输入

> ID：13885957
> 
> 赞同：2
> 
> 时间：2012-12-14T20:41:55.233
> 
> 标签：openlayers, wms

我有一个 GML 文件，包括 30000 个点。它有 2 个与之相关的值（插值和方差）。我想使用 web 地图服务 (WMS) 显示这个 GML 文件。我怎样才能做到这一点？

# asp.net - Asp.NET 用户身份验证。MySQL，并理解这一切。Asp.net 新手

> ID：13885959
> 
> 赞同：0
> 
> 时间：2012-12-14T20:42:00.670
> 
> 标签：asp.net, mysql, authentication, asp.net-mvc-4

> **可能重复：**
> [学习 ASP.Net 安全/身份验证框架的好教程](https://stackoverflow.com/questions/4240596/good-tutorials-for-learning-the-asp-net-security-authentication-framework)

所以我来自 C++ 背景，涉足 php 会话。我正在开发一个需要身份验证和 MySQL 数据库后端的 MVC4 站点。AKA Complete Newb to Web Dev with ASP.NET。

我目前通过 MySQL 使用 EntityFramework 很好，现在只需要处理会话和身份验证。

我在使用 ASP.NET 的会话和身份验证方面经验为零。我听说过会员/角色提供者，但实际上对它们一无所知。是否有关于身份验证的 .NET 4 权威指南，我可以阅读并理解它是什么以及它是如何工作的，或者这是否是正确的类。

从那里我听说您可以通过更改一些配置将其从使用 mssql 转为使用 mysql，但是我发现的很多内容都较旧，是否也有任何关于资源的建议？

# sql - 比较 SQL 中两个表之间的差异（错误）

> ID：13885961
> 
> 赞同：0
> 
> 时间：2012-12-14T20:42:11.433
> 
> 标签：sql, tsql, delta

我想计算具有完全相同结构的两个表的行之间的增量，但不一定是相同的数据。

表 1（预测）

> 身份证 | 姓名 | 全科医生 | 克| 一种

表1（实际数据）

> 身份证 | 姓名 | 全科医生 | 克| 一种

结果（由 Id 匹配）：

> 身份证 | (GP1-GP2) AS DeltaGP | (G1-G2) 作为 DeltaG | (A1-A2) 作为 DeltaA |

赶上我的漂移？这是为了计算 SSAS 中预测模型的误差

这是我的代码：

```
 SELECT P.[Player_id]
          ,P.[PlayerName]
          ,sum(P.[Games Played])-sum(S.[GamesPlayed]) AS GP
          ,sum(P.[Total Goals])-sum(s.[TotalGoals]) AS Goals
          ,sum(P.[Total Assists])-sum(s.[TotalAssists]) AS Assists   
FROM [PredictionsPlayersHistory] as P   
JOIN [V_StatsPlayers] AS S on p.pLAYER_id = s.Player_id    
where S.LastPlayedDate >= '2010-02-01' and P.Player_id
    = 8471675   group by P.[Player_id],P.[PlayerName]   
order by Goals desc, Assists desc, GP asc 
```

问题是结果不对：

预测（总和）

> PlayerName GP 进球助攻
> 
> 西德尼·克罗斯比 56 28 34

实际数据 (SUM)

> PlayerName GP 进球助攻
> 
> 西德尼·克罗斯比 26 17 24

结果

> 西德尼·克罗斯比 28 -42 -98

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:52:19.770

你可以通过 ID 加入表格吗？如果我做对了：

```
SELECT table1.id, table1.name,
       (table1.gp - table2.gp) as DeltaGP,
       (table1.g - table2.g) as DeltaG,
       (table1.a - table2.a) as DeltaA
FROM table1
JOIN table2
ON table1.id = table2.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:57:53.550

您需要在 id 列上加入两个表：

```
SELECT a.Id,a.Name, a.GP - p.GP AS DeltaGP, a.G - p.G AS DeltaG,  a.A - p.A AS DeltaA
FROM dbo.table1 AS a --actual values
JOIN dbo.table2 AS p --predictions
ON a.Id = p.Id; 
```

有关 SQL Server Joins 的介绍，请查看我的帖子系列：http: [//sqlity.net/en/1146/a-join-a-day-introduction/](http://sqlity.net/en/1146/a-join-a-day-introduction/)

* * *

编辑：如果每个表中的每个玩家都有多行，则需要在加入之前聚合它们：

```
SELECT  a.Id,
        a.Name,
        a.GP - p.GP AS DeltaGP,
        a.G - p.G AS DeltaG,
        a.A - p.A AS DeltaA
FROM    (
          SELECT  Id,
                  Name,
                  SUM(GP) AS GP,
                  SUM(G) AS G,
                  SUM(A) AS A
          FROM    dbo.table1
          GROUP BY Id,
                  Name
        ) AS a --actual values
JOIN    (
          SELECT  Id,
                  SUM(GP) AS GP,
                  SUM(G) AS G,
                  SUM(A) AS A
          FROM    dbo.table2
          GROUP BY Id
        ) AS p
        --predictions
  ON a.Id = p.Id; 
```

根据您的要求，您可能希望使用 AVG 而不是 SUM。

# objective-c - 设置标题标签文本缩进

> ID：13885962
> 
> 赞同：1
> 
> 时间：2012-12-14T20:42:11.627
> 
> 标签：objective-c, cocoa-touch, uilabel

我正在使用带有标题文本标签的自定义表格视图。在 tableview 委托方法 viewForHeaderInSection 我正在设置

```
CGFloat indentWidth = 0.7f;
CGRect frame = headerLabel.frame;
frame.origin.x = indentWidth;
headerLabel.frame = frame; 
```

这不起作用，标题标签仍然粘在 tableview 边框上。我试图改变 indentWidth 但它不是那样工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:47:35.247

尝试这个：

```
headerLabel.frame = CGRectMake( put new rect here ); 
```

# jquery - jquery验证全名字段正则表达式概率

> ID：13885964
> 
> 赞同：0
> 
> 时间：2012-12-14T20:42:12.527
> 
> 标签：jquery, regex, jquery-validate

**在下面的代码中，我使用 jquery 验证..**

问题仅适用于 FullName 字段。当我刚刚将 FullName 输入为“tom”时，它应该向我显示一些错误，但目前没有显示...但是当我输入一些“哈利波特”（或）时harry-potter' ，它不应该显示任何错误....

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>

<script type="text/javascript"   src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script type="text/javascript" src="http://jquery-joshbush.googlecode.com/files/jquery.maskedinput-1.2.1.pack.js"></script>

     <script>

            $(document).ready(function() {

                $('#fullname').focus();

                var validCharactersRegex = new RegExp(/^[a-z -]+$/);
                var doesNotStartWithDashOrSpace = new RegExp(/^[^ -]/);
                var fullname_invalid = function(value) {
                    return validCharactersRegex.test(value) && doesNotStartWithDashOrSpace.test(value) && value.indexOf('  ') == -1 && value.indexOf('--') == -1 && value.indexOf(' -') == -1 && value.indexOf('- ') == -1;
                }

                $.validator.addMethod("custom_fullname", function(value, element) {
                    return fullname_invalid(value);
                }, 'Your Name should be entered like: "blahblah"');

                $('#signup').validate({
                    rules: {
                        fullname: {
                            required: true,
                            custom_fullname: true
                        },                  
                        email: {
                          required: true,
                          email: true
                        }
                    },

                    messages: {
                        fullname : {
                          required: "Please specify your Full Name",             
                          custom_fullname : "Your Name should be entered like: fullname lastname  (or) fullname-lastname"
                        },
                        email: {
                          required: "We need your email address to contact you",
                          email: "Your email address must be in the format of name@domain.com"
                        }
                    }

                });

                $('#signup').on('submit', function(event) {
                    event.preventDefault();
                });

             $("#phone").mask("(9999) 9999999");

            });

              </script> 

        <style>
                .error {color: red;}
        </style>

 </head>

 <body>

    <form id="signup" action="/action">

        Full Name: <input name="fullname" type="text"  maxlength="14" /><br/>
        Email <input id="email" name="email" size="25"  class="required email" /><br/>
        Telephone Number: <input type="text" name="phone" id="phone" /><br/>

    Select Country: <select>
          <option value="South Yorkshire" selected>South Yorkshire</option>
          <option value="Rest of England">Rest of England</option>
          <option value="Wales, Scotland">Wales, Scotland</option>
          <option value="Northern Ireland">Northern Ireland</option>
          <option value="European Union">European Union</option>
          <option value="Rest of World">Rest of World</option>
          <option value="Other">Other</option>
    </select><br/>

        <input type="submit">

    </form>

 </body>
</html> 
```

**请检查某人..**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:32:48.490

以下是如何在单个正则表达式中完成所有操作：

```
var validCharactersRegex = /^[a-z][- a-z]*[- ]{2}[- a-z]*[a-z]$/i;
function fullname_valid(value) {
    return validCharactersRegex.test(value);
}

$.validator.addMethod("custom_fullname", function(value, element) {
    return fullname_valid(value);
}, 'Your Name should be entered like: "blahblah"'); 
```

这要求它以字母开头，以字母结尾，仅包含字母、空格和破折号，并且在其中的某处有空格、破折号、空格破折号或破折号空格的分隔符。

见[小提琴](http://jsfiddle.net/barmar/kE8XX/1/)

# javascript - Javascript拖放图像

> ID：13885970
> 
> 赞同：0
> 
> 时间：2012-12-14T20:42:27.917
> 
> 标签：javascript, drag-and-drop

到目前为止，我在右侧有一组徽标，当您将其拖到左侧的框中时，会弹出另一个图像，该图像是该站点的屏幕截图。

我需要帮助的是，当我将它拖到左侧并出现屏幕截图时，我会喜欢屏幕截图下方的内容。

该网站的链接，该网站的名称，以及该网站的简介。

索引.html

```
<link rel="stylesheet" type="text/css" href="drag.css" />
<title>Drag and Drop</title>
</head>

<body>
    <div id="dragTo" class="dragToArea"><img id="largeImage" /><div id="textual" class="textual"></div></div>
    <div id="dragFrom" class="dragFromArea"></div>
</body>

<script src="drag.js"></script>
</html> 
```

Javascript 文件

```
var Resource = function(thumb,textual){ // Creates a prototype of Resource
    var self = this; // Declares variable self as this( refers to the "Owner" of the function being executed )
    self.thumbImage= document.createElement('img'); // Creates an image tag within dragFrom div
    self.thumbImage.setAttribute('src',thumb); // Sets source of image tag to the called upon variable thumb
    self.thumbImage.setAttribute('class','draggable'); // Creates a class on the image called draggable
    document.getElementById('dragFrom').appendChild(self.thumbImage); // Displays the image with set attributes listed above
    self.thumbImage.setAttribute('id', thumb.slice(12,13))

        self.textual = textual;

    whichicon=thumb.slice(12,13);

    self.dragStartHandler = function(e){
        e.target.style.opacity='0.4'; // Sets the opacity of the draggable image when dragging starts

    };

    self.dragEndHandler = function(e){
        if(isInRightSpot){ // Checks to see if isInRightSpot = true
            e.target.style.opacity='1'; // Resets opacity if isInRightSpot = true
            document.getElementById('largeImage').setAttribute('src', 'images/big' +e.target.id + '.png'); // Sets image tag in dragTo to images/big.png if isInRightSpot = true
                        document.getElementById('textual').innerHTML =  e.target.textual;
        }else{
            e.target.style.opacity='1'; // Resets opacity if isInRightSpot = false

        }
    };

    self.thumbImage.addEventListener('dragstart',self.dragStartHandler); // Adds an event listener for the start of dragging of the image in dragFrom
    self.thumbImage.addEventListener('dragend',self.dragEndHandler); // Adds an event listener for the end of dragging(releasing the image) of the image in dragFrom
}

var isInRightSpot = false; // Declares variable isInRightSpot and sets defualt value of false

var dragToSpot = document.getElementById('dragTo'); // Sets dragToSpot to target the dragTo div

dragToSpot.addEventListener('dragover',draggedOver); // Adds event listener for dragging over
function draggedOver(){
    dragToSpot.style.border = "2px dotted"; // Sets border style of dragTo div
    dragToSpot.style.opacity = "0.7"; // Sets opacity of background of dragTo div
    isInRightSpot = true; // Sets the value of isInRightSpot so that draged image can be dropped
};

dragToSpot.addEventListener('dragleave',draggedOut);// Adds event listener for dragging out
function draggedOut(){
    dragToSpot.style.border = "2px solid #777777"; // Resets border style of dragTo div
    dragToSpot.style.opacity = "1"; // Resets opacity of background of dragTo div
    if (mousedown){                 // ------------------------------------------------------------------------------
        isInRightSpot = false;      // Sets isInRightSPot to false only when the mouse button is in the down position
    }                               // ------------------------------------------------------------------------------
};

var smashingMag =  new Resource('images/thumb1.png','test');
var smashingMag1 = new Resource('images/thumb2.png','22222222222');
var smashingMag2 = new Resource('images/thumb3.png','3333333333333');
var smashingMag3 = new Resource('images/thumb4.png','444444444'); // Creates a variable of smashingMag and sets Resource's thumb to images/thumb.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:09:40.073

为什么不直接在`if(isInRightSpot){`部分中添加代码来检查正在拖动的图像，然后添加适当的信息？

# plot - 使用 QtOctave 绘图时始终不响应/冻结

> ID：13885973
> 
> 赞同：2
> 
> 时间：2012-12-14T20:42:41.200
> 
> 标签：plot, octave

我是新来的。我和这个有同样的问题，[但](https://stackoverflow.com/questions/12032494/octave-always-not-responding-freeze-when-use-plot)只使用 QtOctave；在我的电脑上从未加载过 oct2mat pkg 。打字：

> pkg 卸载 oct2mat

八度返回：

> 错误：未安装包 oct2mat 错误：\share\octave\3.6.2\m\pkg\pkg.m 在第 2170 行，第 9 列

直接在 Octave 中使用绘图功能它可以正常工作，非常奇怪！

有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-09T07:58:18.837

@vinukn 答案的附录，因为它可能太神秘了。

尝试这个：

```
>>> graphics_toolkit
ans = fltk
>>> agts = available_graphics_toolkits
agts = 
{
  [1,1] = fltk
  [1,2] = gnuplot
}
>>> graphics_toolkit(agts{2})   % This sets the graphics toolkit.
>>> plot([1 2 3 4]) 
```

也就是说，默认是 FLTK，我已经设置了 Gnuplot。尝试每一个，它们看起来彼此略有不同。

这是我在 Windows Vista 上使用 QtOctave 默认安装的 Octave 3.6.2。（我尝试了最新的 Octave 版本，内置 GUI，但启动后它从未在窗口中绘制过，所以在这个阶段它无法使用，这很遗憾，因为可能有几行代码需要对其进行更改才能使其正常工作...将等到该问题修复为止。与此同时，Gnuplot 不会冻结。）

此外，[这里是在 Gnuplot 窗口中使用的键列表](https://stackoverflow.com/a/4080778/1143274)。特别注意：

*   右键单击以绘制缩放框。

*   `a`自动缩放（返回默认缩放）。

*   `p`返回到最近的上一个缩放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:28:41.060

不要使用 QtOctave。它已被弃用是有原因的。[请参阅Octave 常见问题解答](http://wiki.octave.org/FAQ#What_about_all_the_Octave_GUIs_I_find_on_Google.3F)中的 GUI 部分以了解 GUI 不起作用的原因。对于诸如绘图和对话窗口之类的东西尤其如此。

请特别注意 QtOctave 和其他人对 Octave 的新版本特别敏感这一事实。您使用的是 Octave 3.6.2，而 QtOctave 在 3.2.X 中被放弃了。您的选择是（按我推荐的顺序）：

1.  单独使用 Octave，不使用 QtOctave；
2.  从开发源构建以使用实验性 GUI；
3.  修复 QtOctave（实际上我根本不推荐这个。它的网站已经关闭，工作量太大，最好用原生 GUI 帮助 Octave 开发人员）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T16:23:14.577

实际上，这个问题背后的原因是默认的图形工具包 fltk 或 qt。Qtoctave 与管道一起使用，fltk 不支持管道，即 fltk 在八度范围内工作。管道不同时支持文本和图像（gui）。解决方案是将默认工具包更改为 gnuplot。

# linux - 创建接受输入的 bash 脚本

> ID：13885974
> 
> 赞同：0
> 
> 时间：2012-12-14T20:42:47.617
> 
> 标签：linux, bash, unix, command-line, terminal

`mongo`我想创建一个类似于, `node`, `redis-cli`,`mysql`等编程解释器的 bash 脚本。

我希望能够使用类似的命令`test`，它的行为类似于上面的示例。

```
thomas@workstation:~$ test
> 
```

我如何做出这样的命令？这个叫什么？

我希望能够获取内容并将其转换为变量。

```
thomas@workstation:~$ test
> hello world
hello world 
thomas@workstation:~$ 
```

一旦我希望能够处理代码中的字符串“hello world”，例如回显它，我只想在按下回车键后获取一个“条目”。

这个叫什么？如何使用 BASH 制作一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:47:29.673

我认为“阅读”是您正在寻找的，不是吗？

这是一些示例的链接：http: [//bash.cyberciti.biz/guide/Getting_User_Input_Via_Keyboard](http://bash.cyberciti.biz/guide/Getting_User_Input_Via_Keyboard)

所以你可以做这样的事情：

```
read -p "Enter your name : " name
echo "Hi, $name. Let us be friends!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T20:44:58.033

很抱歉，这并没有直接回答您，但考虑使用功能更强大的编程语言（如 Python、Ruby 或 Perl）来完成这样的任务可能是值得的。在 Python 中，您可以使用 raw_input() 函数。

```
user_command = raw_input('> ') 
```

会产生你的提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T20:45:35.837

首先，不要命名您的脚本`test`。这会产生太多的混乱。不管你怎么称呼它，你可以做很多事情：

```
#!/bin/sh
printf '> '
read line
echo "$line" 
```

如果您的外壳支持它：

```
#!/bin/sh
read -p '> ' line
echo "$line" 
```

或者

```
#!/bin/sh
printf '> '
sed 1q    # This will print the input.  To store in in a variable: a=$( sed 1q ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T20:55:55.197

```
[spatel@tux ~]$ read a
Hello World!!!!!
[spatel@tux ~]$ echo $a
Hello World!!!!! 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-08T01:41:09.163

Key word that might be useful here is `REPL` (Read–eval–print loop) used primarily for programming languages or coding environments. Your browsers console is a great example of a `REPL`.

[Node allows you use their REPL to build interactive apps.](https://nodejs.org/api/repl.html)

# c++ - boost::property_tree 多久解析一次属性文件？

> ID：13885976
> 
> 赞同：3
> 
> 时间：2012-12-14T20:42:47.317
> 
> 标签：c++, performance, file, boost, properties

我需要从文件中读取属性以影响程序行为。看起来 boost::property_tree 会做得很好。但是，我想知道在获取不同类型的值时，库是否可能会多次读取文件？

出于性能原因，我希望它只有一次。大多数属性将是简单的值，如数字和字符串。但偶尔会有数字列表和字符串列表。

我认为它只解析文件一次，但你永远不知道，因此这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:01:07.437

你控制它，它只读取一次：

```
//
// All that is required to read an xml file into the tree
//

std::ifstream in("region.xml");
boost::property_tree::ptree result_tree;
boost::property_tree::read_xml(in,result_tree); 
```

使用相应的 read_XXX 方法包含正确的标头并读取 ini、json 或 xml 文件到树中。

然后，您可以使用“路径”来访问树中的元素，或者您可以遍历子树

```
BOOST_FOREACH(boost::property_tree::ptree::value_type &v,result_tree.get_child("gpx.rte"))
{
      if( v.first == "rtept" ) //current node/element name
      {
           boost::property_tree::ptree subtree = v.second ;
           //A path to the element is required to access the value
          const int lat = sub_tree.get<double>( "<xmlattr>.lat")*10000.0;
          const int lon = sub_tree.get<double>( "<xmlattr>.lon")*10000.0;
      }
} 
```

或通过路径直接访问：

```
 // Here is simplistic access of the data, again rewritten for flexibility and 
  // exception safety in real code (nodes shortened too)
  const int distVal = 
       result_tree.get<int>
        ( "Envelope.Body.MatrixResponse.Matrix.Route.<xmlattr>.distance")/1000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:02:03.407

每次您想阅读时，您都可以检查文件是否已更改。如果是，那么您可以阅读它。

```
char filename[] = "~/test.txt";
char timeStr[100] = "";
struct stat buf;
time_t ltime;
char datebuf[9];
char timebuf[9];
if (!stat(filename, &buf)) {
    strftime(timeStr, 100, "%d-%m-%Y %H:%M:%S", localtime(&buf.st_mtime));
    printf("\nLast modified date and time = %s\n", timeStr);
}
else {
    printf("error getting atime\n");
}

_strtime(timebuf);
_strdate(datebuf);
printf("\nThe Current time is %s\n",timebuf);
printf("\nThe Current Date is %s\n",datebuf);
time(&ltime);

if (difftime(ltime ,buf.st_mtime) > 0) {
   // Read it.
} 
```

# c++ - 如果我知道 gdb 的类型，如何查看 boost::any 的值

> ID：13885978
> 
> 赞同：7
> 
> 时间：2012-12-14T20:42:57.057
> 
> 标签：c++, boost, gdb, backtrace, boost-any

我有一个核心转储，我正在使用 gdb 查看核心转储。

我想知道是否有一种方法可以检查 gdb 中 boost::any 值的值？

在核心，我有任何提升的地址，所以我尝试将其转换为占位符，看看我是否可以检查这个值，但我没能做到。我知道 boost any 的类型是 unsigned long 那么有没有办法查看知道类型的 any 值？

```
(gdb) print ('boost::any::placeholder')(*(('boost::any'*)0x00007f263fa27730).content)
warning: can't find linker symbol for virtual table for `boost::any::placeholder' value
warning:   found `boost::any::holder<bool>::~holder()' instead
$129 = warning: can't find linker symbol for virtual table for `boost::any::placeholder' value
warning:   found `boost::any::holder<bool>::~holder()' instead
warning: can't find linker symbol for virtual table for `boost::any::placeholder' value
warning:   found `boost::any::holder<bool>::~holder()' instead
{
  _vptr.placeholder = 0x7f2a9a662560
} 
```

对此问题的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:08:43.677

`boost::any``placeholder`有一个保存数据内容的内部类。尝试使用：

```
(gdb) print (*((boost::any::holder<unsigned long>*)((anyInstance).content))).held 
```

# ruby-on-rails - 使用 Thinking Sphinx Rails 项目进行分页

> ID：13885980
> 
> 赞同：1
> 
> 时间：2012-12-14T20:43:04.987
> 
> 标签：ruby-on-rails, ruby, pagination, thinking-sphinx

我正在开发一个为场地设置分页的 Rails 项目（通过思考狮身人面像），我正在尝试为用户设置它。我试图尽可能地模仿场地的功能。我遇到的问题是我只取回 :per_page 指定的结果数量，而不是查询的总结果。如果我将 :per_page 增加到超过总结果，我会显示所有结果以及用于分页的数字链接，但它们不起作用。

在我的控制器中，我正在做

```
@gender = params[:user][:gender] unless params[:user].blank?
@ethnicity = params[:user][:ethnicity] unless params[:user].blank?
@age = params[:user][:age] unless params[:user].blank?
@page = params[:page].blank? ? 1 : params[:page]
@users = User.matches_for_admin({ 
  :gender => @gender,
  :ethnicity => @ethnicity,
  :age => @age,
  :relationship => @relationship,
  :per_page => 20,
}, @page)
@pages = @users[:count] / 20 + ((@users[:count] % 20) > 0 ? 1 : 0) 
```

如果我将 :per_page 设置为 200，我会得到所有结果，并且页面会出现链接（用于分页），但链接不起作用，因为 per_page 高于总结果。

这是我用于分页的辅助函数

```
 def pagination_user(current_page, pages)
    return if pages == 0
    render :partial => 'pagination_user', :locals => { :current_page => current_page.to_i, :pages => pages }
  end 
```

这是设置数字链接的部分

```
<div class="fullWidthPanel lightFilter pagination">
  <ul>
    <li> Pages: </li>
    <% (1..pages).each do |page| %>
      <li>
      <% if page == current_page %>
        <%= page %>
      <% else %>
        <a href="<%= url_for_user_page page %>">
          <%= page %>
        </a>
      <% end %>
      </li>
    <% end %>
  </ul>
  <span class="results">
    <strong>
    Showing results <%= 1 + (current_page-1)*20 %> 
    to <%= [current_page*20, @users[:count]].min %>
    of <%= @users[:count] %>
    </strong>
  </span>
</div> 
```

其中 url_for_user_page 只是设置 url 以使分页工作的搜索选项。

我是新的思考狮身人面像，我很困惑为什么当我让它们设置相同时它适用于场地而不是用户。我得到的结果数量似乎是基于 :per_page 属性，而不是我从查询中实际返回的结果数量。任何对我可能遇到的潜在问题或我正在寻找的东西的任何见解都将不胜感激。

谢谢，

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:21:04.627

NVM 我想通了。搜索中找到的柱数取自 sphinx 搜索的返回结果（基于 per_page）。我必须让分页计数基于：

```
:count => User.search_count("", search_options) 
```

以便它获得所有可能的结果，而不仅仅是使用 sphinx 找到的结果（基于 per_page 值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T08:19:54.067

如果您使用带有页面选项（page、per_page）的 sphinx 搜索，您将获得分页结果的计数。因此，对于以下代码，即使结果有超过 20 条记录，您也会得到 count = 20（与 per_page 计数相同）。

```
users_count = User.search(query, :per_page => 20, :page => params[:page]).populate.count 
```

所以在狮身人面像结果上使用“total_entries”来获取总记录数

```
users = User.search(query, :per_page => 20, :page => params[:page]).populate
users_count = users.total_entries 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:37:44.120

让我告诉你我做了什么。使用 sphinx 搜索后，我将记录的 id 作为数组获取，然后`.where()`使用 id 进行搜索

```
ids = User.search(params[:search_query]).collect{|c| c.id} #will return #==> [1,2,3]
@users = User.where(:id => ids).paginate(:per_page => 10, :page => params[:page]) 
```

# jsf-2 - 如何渲染

> ID：13885981
> 
> 赞同：1
> 
> 时间：2012-12-14T20:43:10.690
> 
> 标签：jsf-2, primefaces

我无法呈现 selectOneMenu 但只能禁用该项目

例如这是有效的：

```
<p:panel header="Field Chooser">  
    <h:panelGrid columns="2" cellpadding="5">  
        <p:selectOneMenu id="l1" value="#{acqBean.gb1}">  
            <f:selectItem itemLabel="Group By" itemValue="" />  
            <f:selectItems value="#{acqBean.level1}" />  
            <p:ajax update="l2" listener="#{acqBean.handleGroupChange}"/>  
        </p:selectOneMenu>  
        <p:selectOneMenu id="l2" value="#{acqBean.gb2}" disabled="#{acqBean.renderLevel2}">  
            <f:selectItems value="#{acqBean.level2}" />  
        </p:selectOneMenu>  
    </h:panelGrid>  
    <p:separator /> 
</p:panel> 

public void handleGroupChange() {
    if (gb1 != null && !gb1.equals("")) {
        level2 = level2Data.get(gb1);
        renderLevel2 = false;
    } else {
        level2 = new HashMap<String, String>();
        renderLevel2 = true;
    }
} 
```

而这个不是：

```
<p:selectOneMenu id="l2" value="#{acqBean.gb2}" rendered="#{acqBean.renderLevel2}">  
            <f:selectItems value="#{acqBean.level2}" />  
        </p:selectOneMenu> 
```

请有任何建议

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T13:51:59.923

您不能对本身有条件渲染的组件进行 ajax 更新。您只能对*始终*呈现的组件进行 ajax 更新。原因很简单，当组件未渲染时，生成的 HTML 代码中基本上没有任何内容可供 JavaScript 基于 ajax 响应选择和操作。

因此，将`<p:selectOneMenu>`带有`rendered`属性的例如放在`<h:panelGroup>`不带属性的 a 中，`rendered`并在您的 ajax 更新中引用它。

```
<p:selectOneMenu id="l1" value="#{acqBean.gb1}">  
    <f:selectItem itemLabel="Group By" itemValue="" />  
    <f:selectItems value="#{acqBean.level1}" />  
    <p:ajax update="l2group" listener="#{acqBean.handleGroupChange}"/>  
</p:selectOneMenu>  
<h:panelGroup id="l2group">
    <p:selectOneMenu id="l2" value="#{acqBean.gb2}" rendered="#{acqBean.renderLevel2}">  
        <f:selectItems value="#{acqBean.level2}" />  
    </p:selectOneMenu>  
</h:panelGroup> 
```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w/9010771#9010771)

# interface - AutoMoqCustomization 是否适用于抽象类？

> ID：13885985
> 
> 赞同：6
> 
> 时间：2012-12-14T20:43:38.560
> 
> 标签：interface, moq, abstract, xunit.net, autofixture

请注意，我对 TDD 有点陌生，所以我会接受一般建议和具体答案。

抽象类和接口都不能被实例化。显然，Moq 可以在第二个测试中给我一个模拟的 ADataFeed 实例。为什么 AutoMoqCustomization 对接口起作用，`IDataFeed`但对抽象类不起作用`ADataFeed`，而是抛出 InvalidOperationException？

其次，AutoFixture 方法（或一般的 TDD）将是什么来驱动可能调用具有构造函数的抽象类的设计来要求和保证某些值，例如在这种情况下的连接字符串？

```
[Theory, AutoMoqData]
public void AllDataFeedsHaveAConectionString(
    IDataFeed sut)
{
    var result = sut.GetConnectionString();
    Assert.Null(result);
}

[Fact]
public void AllDataFeedsRequireAConnectionString()
{
    var expected = Guid.NewGuid().ToString();
    var sut = new Mock<ADataFeed>(expected);
    var result = sut.Object.GetConnectionString();
    Assert.Equal(expected, result);
}

[Theory, AutoMoqData]
public void AllDataFeedsRequireAConnectionString2(
    [Frozen] string expected, 
    ADataFeed sut)
{
    var result = sut.GetConnectionString();
    Assert.Equal(expected, result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T14:15:08.100

具有构造函数的抽象类必须标记为受保护。当构造函数标记为公共时，AutoFixture 不会针对抽象类进行编程，因为这是一个设计错误。

# android - 是否有更好（即更快）的 Android 模拟器用于调试？

> ID：13885987
> 
> 赞同：5
> 
> 时间：2012-12-14T20:44:01.970
> 
> 标签：android, android-emulator

> **可能重复：**
> [慢速安卓模拟器](https://stackoverflow.com/questions/1554099/slow-android-emulator)

有没有比 SDK 自带的更快的 Android 模拟器？一个可以附加到 Eclipse 调试器的？

BlueStacks 或 YouWave 可以用于调试吗？

在此先感谢，巴里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:50:58.337

您*可以*使用 Bluestacks 播放器进行调试。您必须像这样连接它：

```
adb connect 127.0.0.1 
```

它速度很快，但仅适用于 Android 版本 2.3.7。

# wcf - 如何捕获消息大小大于服务（服务器端）接受的异常/故障？

> ID：13885990
> 
> 赞同：2
> 
> 时间：2012-12-14T20:44:14.467
> 
> 标签：wcf, .net-4.5

起初，我想如果我添加了[IDispatchMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.aspx)的实现，也许这会在对限制进行任何检查之前拦截消息大小。我很快发现，事实并非如此。正在运行的服务显然会确保在较低级别上执行此规则。现在我很好奇是否有一种方法可以在服务器级别捕获此类异常并将响应返回给客户端。将[IErrorHandler](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx)实现为 ServiceBehavior 可以解决问题吗？

也许更普遍的问题是：这可以在服务器级别进行跟踪吗？

值得注意的是，我无法控制 WSDL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:10:46.173

消息大小在较低级别（传输级别）进行验证。

没有一种简单的方法可以捕获该异常（WCF 提供的用于处理异常的 IErrorHandling 接口在此级别不起作用）。

一种方法是创建您自己的自定义 wcf 传输通道（参见[此处](http://blogs.msdn.com/b/dmetzgar/archive/2012/10/16/an-updated-custom-wcf-transport-channel-example.aspx)的示例）

请看下面超出配额时生成的异常的样子 - 您可以看到这是从低级别（HttpChannelListener）抛出的。

```
<ExceptionType>System.ServiceModel.ProtocolException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The maximum message size quota for incoming messages (225) has been exceeded. To increase the quota, use the MaxReceivedMessageSize property on the appropriate binding element.</Message>
<StackTrace>
at System.ServiceModel.Channels.HttpInput.ThrowHttpProtocolException(String message, HttpStatusCode statusCode, String statusDescription)
at System.ServiceModel.Channels.HttpInput.ThrowMaxReceivedMessageSizeExceeded()
at System.ServiceModel.Channels.HttpInput.GetMessageBuffer()
at System.ServiceModel.Channels.HttpInput.ParseMessageAsyncResult.DecodeBufferedMessageAsync()
at System.ServiceModel.Channels.HttpInput.ParseMessageAsyncResult.BeginParse()
at System.ServiceModel.Channels.HttpInput.BeginParseIncomingMessage(HttpRequestMessage httpRequestMessage, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.HttpPipeline.EmptyHttpPipeline.BeginParseIncomingMessage(AsyncCallback asynCallback, Object state)
at System.ServiceModel.Channels.HttpPipeline.EnqueueMessageAsyncResult..ctor(ReplyChannelAcceptor acceptor, Action dequeuedCallback, HttpPipeline pipeline, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.HttpPipeline.EmptyHttpPipeline.BeginProcessInboundRequest(ReplyChannelAcceptor replyChannelAcceptor, Action dequeuedCallback, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.HttpChannelListener`1.HttpContextReceivedAsyncResult`1.ProcessHttpContextAsync()
at System.ServiceModel.Channels.HttpChannelListener`1.BeginHttpContextReceived(HttpRequestContext context, Action acceptorCallback, AsyncCallback callback, Object state)
at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:31:21.113

您能做的最好的事情（以及监控这一点的常用方法）是在消息级别启用日志记录。 [http://geekswithblogs.net/mnf/archive/2008/10/03/use-wcf-message-logging.aspx](http://geekswithblogs.net/mnf/archive/2008/10/03/use-wcf-message-logging.aspx)

问题是必须在客户端和服务器上设置 maxMessageSize 属性。因此，如果消息太大而无法在客户端发送或接收，您的服务器将不会知道这一点。

# java - 同时执行两个方法

> ID：13885994
> 
> 赞同：0
> 
> 时间：2012-12-14T20:44:47.507
> 
> 标签：java, multithreading

多年来，我正在开发我的第一个多线程应用程序。我遇到的问题是我需要同时执行两种方法。这是我的引擎类：

```
public class ThreadPoolEngine {

    // create BlockingQueue to put fund transfer objects
    private BlockingQueue<GlobalSearchRequest> searchQueue;

    public ThreadPoolExecutor executor;

    private HashMap<String, GlobalSearchProcessorCallable> callableMap;

    private ArrayList<Future<Integer>> futurList;

    Logger logger = Logger.getLogger(ThreadPoolEngine.class);

    private Integer gthreadCount;
    private Integer gjobPerThread;

    public ThreadPoolEngine(Integer threadCount, Integer jobPerThread) {
        gthreadCount = threadCount;
        gjobPerThread = jobPerThread;
        // create a thread pool with the entered no of threads
        executor = new HammerThreadPoolExecutor(threadCount, threadCount, 0L,
                TimeUnit.MILLISECONDS, new LinkedBlockingQueue<Runnable>());

        searchQueue = new ArrayBlockingQueue<GlobalSearchRequest>(jobPerThread);

        callableMap = new HashMap<String, GlobalSearchProcessorCallable>();

        // create list to store reference to Future objects
        futurList = new ArrayList<Future<Integer>>();
    }

    public void createAndSubmitTasks() {
        // create Callables
        for (int i = 0; i < gthreadCount; i++) {

            GlobalSearchProcessorCallable callable1 = new GlobalSearchProcessorCallable(
                    "SearchProcessor_" + i, searchQueue);
            callableMap.put(callable1.getThreadName(), callable1);

            // submit callable tasks
            Future<Integer> future;
            future = executor.submit(callable1);
            futurList.add(future);
        }
    }

    public void populateSearchQueue() throws InterruptedException {
        // put orderVO objects in BlockingQueue
        KeywordFactory key = KeywordFactory.getInstance();

        for (int i = 0; i < gjobPerThread*gthreadCount; i++) {
            // this method will put SearchRequest object in the order queue
            try {
                searchQueue.put(new GlobalSearchRequest(key.getRandomPhrase(3)));
            } catch (KeywordNoDataFileException e) {
                e.printStackTrace();
            }
        }
    }

    public void printProcessorStatus() throws InterruptedException {
        // print processor status until all orders are processed
        while (!searchQueue.isEmpty()) {
            for (Map.Entry<String, GlobalSearchProcessorCallable> e : callableMap
                    .entrySet()) {
                logger.debug(e.getKey() + " processed order count: "
                        + e.getValue().getProcessedCount());
            }
            Thread.sleep(1000);
        }
    }

    public void shutDown(boolean forceShutdown) {
        if (!forceShutdown) {
            // shutdown() method will mark the thread pool shutdown to true
            executor.shutdown();
            logger.debug("Executor shutdown status " + executor.isShutdown());
            logger.debug("Executor terninated status "
                    + executor.isTerminated());

            // Mark threads to return threads gracefully.
            for (Map.Entry<String, GlobalSearchProcessorCallable> orderProcessor : callableMap
                    .entrySet()) {
                orderProcessor.getValue().setRunning(false);
            }
        } else {

            for (Future<Integer> f : futurList) {
                f.cancel(true);
            }

            // shutdown() method will mark the thread pool shutdown to true
            executor.shutdownNow();
        }
    }

    public void printWorkersResult() {
        for (Future<Integer> f : futurList) {
            try {
                Integer result = f.get(1000, TimeUnit.MILLISECONDS);
                logger.debug(f + " result. Processed orders " + result);
            } catch (InterruptedException e) {
                logger.error(e.getMessage(), e);
            } catch (ExecutionException e) {
                logger.error(e.getCause().getMessage(), e);
            } catch (TimeoutException e) {
                logger.error(e.getMessage(), e);
            } catch (CancellationException e) {
                logger.error(e.getMessage(), e);
            }
        }
    }
} 
```

好的，我有一个主类实例化这个类并调用这个类的两个方法，populateSearchQueue 和 createAndSubmitTasks 来运行我的工作类并处理搜索队列中的项目。

populateSearchQueue 方法的问题可能需要很长时间才能构建（我打算一次用十亿个查询来锤击系统）并且可能需要大量内存。java中有没有一种方法可以让我的主类同时调用populateSearchQueue和createAndSubmitTasks，这样工作线程就可以在队列仍然由populateSearchQueue方法构建的同时开始处理队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:28:00.277

我实际上解决了它。我再次阅读了我的代码，并意识到创建线程池需要很短的时间。因此，调用`createAndSubmitTasks`创建线程池并为每个线程池分配一个等待做某事的工作类。完成该方法后，我现在有 1000 个线程池坐在那里无所事事。然后在我调用的那一刻`populateSearchQueue`，那些在移动到下一个方法所需的几毫秒内处于空闲状态的工作线程现在开始从队列中抓取作业，我得到了我想要的结果。将东西放入队列的方法是在工作线程从该队列中抓取作业并运行它们的同时进行处理。

所以我颠倒了我调用方法的顺序。这是一件美丽的事情。

# c# - 动态加载文件夹中的 winforms 图标

> ID：13885997
> 
> 赞同：2
> 
> 时间：2012-12-14T20:44:52.617
> 
> 标签：c#, .net, winforms, icons

我需要将 winform 图标更改为在目录中找到的图标。这需要以与 Web 浏览器处理网站图标加载相同的方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:10:25.493

如果这将是动态的，您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.100%29.aspx)并监视文件夹中创建和更改的事件以进行文件更改。

```
private void fileSystemWatcher1_Changed(object sender, System.IO.FileSystemEventArgs e)
{
    if (e.Name == "myIcon.ico")
    {
        this.Icon = new Icon(e.FullPath);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:03:42.590

在构造函数或表单的加载事件中设置图标属性（确保图标存在于应用程序目录中）：

```
Icon = new Icon("favicon.ico"); 
```