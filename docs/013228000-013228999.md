# StackOverflow 问答 13228000-13228999

# emacs - 组织模式嵌套属性？

> ID：13228001
> 
> 赞同：3
> 
> 时间：2012-11-05T07:50:52.507
> 
> 标签：emacs, elisp, org-mode

[组织手册](http://orgmode.org/manual/Properties-and-Columns.html#Properties-and-Columns)说*“属性是与条目关联的键值对”*。一个合适[的键值数据结构](http://en.wikipedia.org/wiki/Associative_array)可以在一个值中存储任何东西，包括另一个关联数组。但属性似乎不能。

*   **我可以模拟嵌套属性吗？**
*   如果我不能，**它应该如何在理论上优雅地实现？**

通过大量使用[Property API](http://orgmode.org/manual/Property-API.html#Property-API)来实现无数功能，嵌套属性可以为 org-mode 提供许多可能性。脑海中浮现的示例包括：键值数据库、图形数据库、将复杂的语义元数据添加到条目、语义 Web 应用程序，甚至是文本任务。

[2009 年，在 org-mode 邮件列表中讨论了ID 标记](http://thread.gmane.org/gmane.emacs.orgmode/11896/)的类似想法（[线程的所有帖子](http://lists.gnu.org/archive/cgi-bin/namazu.cgi?query=[Orgmode]+Feature+request%3A+IDs+on+anything+&submit=Search!&idxname=emacs-orgmode&max=20&result=normal&sort=score)）。ID 标记的想法与我从 Org-mode 概括 org-mode 属性语法的另一个愿望切线相关[：使用特殊的抽屉里的属性](https://stackoverflow.com/q/13228158/596361)。不幸的是，ID 标记引入了更多新语法，我希望在当前的 org 模式功能内启用嵌套数据增量存储。

[Babel](http://orgmode.org/worg/org-contrib/babel/index.html)可能是一个解决方案，但它需要使用编程语言并且可能会限制灵活性。最好只使用属性 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-30T20:01:37.957

这是你的想法：

```
** subheading
   :PROPERTIES:
   :my-prop:  (:property-1 red :property-2 (nested-prop . 5))
   :END:`

#+BEGIN_SRC emacs-lisp
    (defun get-my-prop-value (property)
       (interactive)
       (plist-get
       (read (org-entry-get (point) "my-prop"))
       property))
#+END_SRC

#+RESULTS:
: get-my-prop-value

#+BEGIN_SRC emacs-lisp
    (get-my-prop-value :property-2)
#+END_SRC

#+RESULTS:
: (nested-prop . 5) 
```

# vb.net - 无法点击 CheckBox_CheckedChanged 事件

> ID：13228003
> 
> 赞同：0
> 
> 时间：2012-11-05T07:50:59.660
> 
> 标签：vb.net, winforms

我在检查特定复选框时尝试检查一个条件。下面是代码

```
Private Sub CheckBox4_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 CheckBox4.CheckedChanged
        If CheckBox4.Checked Then
            check_CL()
        万一
```

我放了一个调试器来检查控件是否会进入这个事件，但它不会。请告诉我有什么问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:19:09.047

从您的论点看来，您已经执行了适当的步骤。我建议你应该寻找这段代码：

```
 RemoveHandler CheckBox4.CheckedChanged, AddressOf CheckBox4_CheckedChanged 
```

您可能在代码中的某处有未注册的处理程序，`.vb`或者`.designer.vb`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T07:55:53.720

您是否尝试过使用完整的代码来查看它是否有效？

```
If CheckBox4.Checked = True Then
  check_CL()
End If 
```

# symfony - Symfony2.1 中未添加基本模板路径

> ID：13228011
> 
> 赞同：1
> 
> 时间：2012-11-05T07:52:04.303
> 
> 标签：symfony, twig, symfony-2.1

找不到模板 form_div_layout.html.twig

树枝加载器中的路径：

```
Array ( [0] => /var/www/nrp.new-generation.com.ua/vendor/knplabs/knp-menu/src/Knp/Menu/Resources/views ) 
```

为什么不添加默认路径？

错误：

```
Unable to find template "form_div_layout.html.twig" in Service:AbstractService::layout.html.twig at line 27. 
```

Twig_Loader_Exception：

```
Twig_Error_Loader: Unable to find template "form_div_layout.html.twig" (looked into: /var/www/{path}/vendor/knplabs/knp-menu/src/Knp/Menu/Resources/views). 
```

编辑：

我替换了 TwigLoader 中的默认 TemplateNameParser 以添加我的 logik 加载模板。

我的模板名称解析器：

```
 <?php

namespace NRP\Bundles\ServiceBundle\Twig;

use Symfony\Bundle\FrameworkBundle\Templating\TemplateNameParser as BaseTemplateNameParser,
    Symfony\Component\Templating\TemplateReferenceInterface;

/**
 *
 */
class TemplateNameParser extends BaseTemplateNameParser
{
  /**
   * {@inheritdoc}
   */
  public function parse($name)
  {
    if ($name instanceof TemplateReferenceInterface) {
      return $name;
    }
    else if (isset($this->cache[$name])) {
      return $this->cache[$name];
    }

    // If not service prefix
    if (strpos($name, 'Service:') !== 0) {
      return parent::parse($name);
    }

    // Find template
    $name = str_replace(':/', ':', preg_replace('#/{2,}#', '/', strtr($name, '\\', '/')));

    if (false !== strpos($name, '..')) {
      throw new \RuntimeException(sprintf('Template name "%s" contains invalid characters.', $name));
    }

    $parts = explode(':', $name);
    if (4 !== count($parts)) {
      throw new \InvalidArgumentException(sprintf('Template name "%s" is not valid (format is "Service:{ServiceName}:{Section}:{template}.{format}.{engine}").', $name));
    }

    $elements = explode('.', $parts[3]);
    if (3 > count($elements)) {
      throw new \InvalidArgumentException(sprintf('Template name "%s" is not valid (format is "Service:{ServiceName}:{Section}:{template}.{format}.{engine}").', $name));
    }

    $engine = array_pop($elements);
    $format = array_pop($elements);

    $template = new TemplateReference($parts[1], $parts[2], implode('.', $elements), $format, $engine);

    if (!$template->hasService()) {
      throw new \RuntimeException(sprintf('Not found service "%s".', $template->get('service')));
    }

    return $this->cache[$name] = $template;
  }
} 
```

并添加到服务：

```
<!-- Twig file system loader -->
<service id="nrp.twig.name_parser" class="NRP\Bundles\ServiceBundle\Twig\TemplateNameParser">
  <argument type="service" id="kernel" />
</service>
<service id="twig.loader" class="Symfony\Bundle\TwigBundle\Loader\FilesystemLoader">
  <argument type="service" id="templating.locator" />
  <argument type="service" id="nrp.twig.name_parser" />
</service> 
```

如果禁用此加载程序，一切正常！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:45:04.750

这个问题解决了！

解决方案：

替换参数templating.name_parser.class；

例子：

```
<parameters>
    <!-- Parameter for TemplatingNameParser -->
    <parameter key="templating.name_parser.class">NRP\Bundles\ServiceBundle\Twig\TemplateNameParser</parameter>
  </parameters> 
```

# google-analytics - 如何从谷歌分析漏斗可视化中获取数据？

> ID：13228019
> 
> 赞同：0
> 
> 时间：2012-11-05T07:52:55.537
> 
> 标签：google-analytics

我正在使用 GA API for java 来访问来自 GA 的数据。我需要从漏斗可视化中获取值，例如：“购物车”值。如果有人知道同样的事情，那么我需要你的帮助..

谢谢，
维平迪曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:37:35.137

漏斗可视化只是由对 URL 的唯一页面浏览量构成的。因此，如果您知道流程中的步骤，您只需调用 GA，然后在每个步骤中自己进行计算。然后，如果您需要退出页面之类的东西，或者类似的东西，您可以使用正确的维度进行另一个调用，例如 ga:nextPagePath 以查看人们在每个步骤中的去向。

# linux - 为什么 uboot 使用 arm-linux-gcc 作为默认 arm CROSS_COMPILE？

> ID：13228025
> 
> 赞同：1
> 
> 时间：2012-11-05T07:53:43.943
> 
> 标签：linux, u-boot

我对工具链、arm-eabi-gcc、arm-linux-gcc 和 arm-elf-gcc 非常陌生。

对于 arm-linux-gcc 和 arm-elf-gcc，在我看来，只是使用了不同的 libc。

但是 arm-eabi-gcc 和 arm-linux-gcc 有什么区别？

我认为 arm-eabi-gcc 没有内置在 libc 中。我对吗 ？

如果没有，你能帮我纠正一下吗？

还有为什么 uboot 使用 arm-linux-gcc 作为默认的 arm 交叉编译器？

据我所知，uboot不需要那个libc来依赖。

所以这是我的问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:44:04.263

它被称为工具链的 the`target alias`或 the `target-triplet`，它的用途基本上是从其他工具链和您拥有的本机工具链中识别该工具链。它会告诉您构建工具链的架构、ABI 和目标主机，例如：

> **arm-none-gnueabi**：裸机（无操作系统）gnu ABI
> 
> **arm-linux-eabi**：为托管系统生成二进制文件（运行 Linux 环境）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:59:39.960

GCC 编译器`*gcc`是一个运行其他程序的驱动程序。所以运行

```
arm-linux-gcc -v -O -Wall helloworld.c -o hellworld-linux-gcc
arm-elf-gcc -v -O -Wall helloworld.c -o hellworld-elf-gcc
arm-eabi-gcc  -v -O -Wall helloworld.c -o helloworld-eabi-gcc 
```

你就会明白其中的区别。他们可能都运行一些`cc1`程序进行汇编代码的转换，一些`as`程序将汇编程序代码汇编为目标代码，一些`ld`程序与一些标准库进行链接。他们也可能运行一些[collect2](http://gcc.gnu.org/onlinedocs/gccint/Collect2.html)包装一些链接等。

您可能还想简单地运行`arm-linux-gcc -v`或了解您的编译器是如何配置的，以及它们的精确版本`arm-elf-gcc -v`。`arm-eabi-gcc -v`

# mysql - MySQL设计；带有变量的视图或存储过程

> ID：13228026
> 
> 赞同：0
> 
> 时间：2012-11-05T07:53:56.580
> 
> 标签：mysql, sql, stored-procedures, view, sql-view

我必须执行一个复杂的查询，从 7-8 个表中选择几列。

我们不想用编程语言（PHP - Symfony 1.4/Propel 1.4 在我们的例子中）编写该查询，而是创建一个视图或存储过程，以便为开发人员提供非常简单的选择查询。我很困惑什么会更好。

我们需要以下格式的查询：

```
SET @PlayerId = 1;

SELECT CASE WHEN mat.player1id = @PlayerId THEN mat.player2id ELSE mat.player1id END as opponent
    /*plus many other columns*/
FROM `wzo_matches` as mat /*plus few other tables*/
WHERE (mat.player1id =@PlayerId OR mat.player2id=@PlayerId)
    /*plus other join conditions*/ 
```

观点的问题是，`SET @PlayerId=xx`陈述。我们事先不知道玩家 ID，但会通过 PHP 传递。我希望这是排除观点的原因；有什么解决方法吗？

其他选项将是存储过程。唯一的问题是，它将为每个查询创建一个新视图，因此数据库的操作将非常繁重。

有人可以建议最好的方法，以便开发人员可以从上述查询中获取所需的数据，而无需在 PHP 中编写上述复杂查询。（显然通过 SP 或从那里查看和简单的选择查询）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:01:40.100

```
CREATE PROCEDURE SELECT_PLAYER(p INT) SET @PlayerId  = p
SELECT CASE WHEN mat.player1id = @PlayerId THEN mat.player2id ELSE mat.player1id END as opponent
    /*plus many other columns*/
FROM `wzo_matches` as mat /*plus few other tables*/
WHERE (mat.player1id =@PlayerId OR mat.player2id=@PlayerId)
    /*plus other join conditions*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:53:03.680

根据[Can I create view with parameter in MySQL 的回复？](https://stackoverflow.com/questions/2281890/can-i-create-view-with-parameter-in-mysql)，我的问题通过以下查询得到解决：

```
create function getPlayer() returns INTEGER DETERMINISTIC NO SQL return @getPlayer;

create view getPlay as
    SELECT
        CASE WHEN play.hiderid = getPlayer() THEN play.seekerid ELSE play.hiderid END AS opponent, play . * 
        FROM odd_play play, odd_match mat
        WHERE (seekerid = getPlayer() OR hiderid = getPlayer())
        AND play.id = mat.latestplay;

select play.*
from (select @getPlayer:=1 p) ply, getPlay play; 
```

# c++ - 错误：在 '&' 标记之前需要 ',' 或 '...'

> ID：13228028
> 
> 赞同：0
> 
> 时间：2012-11-05T07:54:13.660
> 
> 标签：c++, operator-overloading

**错误：**

```
expected ‘,’ or ‘...’ before ‘&amp;’ token
randomNumberMagnifier.h:32: error: ISO C++ forbids declaration of ‘randomNumberMagnfier’ with no type
randomNumberMagnifier.h:32: error: ‘std::ostream& randomNumberMagnifier::operator<<(std::ostream&, int)’ must take exactly one argument
[singha1@cs1 p4]$ 
```

这是不断出现的错误。我几乎已经复制了重载的代码`operator<<`来打印用户这些运算符的值。

**。H：**

```
#ifndef RANDOMNUMBERMAGNIFIER_H
#define RANDOMNUMBERMAGNIFIER_H
#include <iostream>
#include <fstream>

using namespace std;
class randomNumberMagnifier
{
  int addFactor;
  int multFactor;
  bool addOn;
  bool multOn;
  int randomNumber;
  static const int MAX_ADD_FACTOR = 100;
  static const int MAX_MULT_FACTOR = 20;
  static const int MAX_RANDOM = 200;

 public:
  randomNumberMagnifier();

  randomNumberMagnifier(const randomNumberMagnifier& arandom);
  //~randomNumberMagnifer();                                                         

  randomNumberMagnifier& operator=(const randomNumberMagnifier& rhs );
  //  randomNumberMagnifier& operator==(const randomNumberMagnfier& rhs );           
  ostream&  operator<<(ostream& o, const randomNumberMagnfier& rhs );
  randomNumberMagnifier(bool aState, bool mState);

  int randomMagnifier();

  int getAdd();
  int getMult();

  bool getAddState();
  bool getMultState();

  int getRandomNumber();

  void display(ostream& out) const;

};
#endif 
```

**.cpp：**

```
ostream& operator<<(operator& out, const randomNumberMagnifier& rhs)
{
  rhs.display(out);
  return out;
  //cout << this->getAdd()=rhs.getAdd();                                                  
  /*                                                                                      
  cout << this->multFactor;                                                               
  cout << this->addOn;                                                                    
  cout << this->multOn;                                                                   
  cout << this->randomNumber;                                                             
  */
}

void randomNumberMagnifier :: display(ostream& out)const
{
  out << addFactor << multFactor << randomNumber;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:56:16.837

```
 ostream&  operator<<(ostream& o, const randomNumberMagnfier& rhs ); 
```

`randomNumberMagnfier`拼写错误。

**编辑**

为了澄清你得到的第二个错误：

> 错误：'std::ostream& randomNumberMagnifier::operator<<(std::ostream&, const randomNumberMagnifier&)' 必须只取一个参数

您需要将其实现为非成员函数。

据我所知，您无法将其作为班级成员实施的原因来自标准中的 13.5.2.1：

> `13.5.2`二元运算符
> 
> `1`二元运算符应由具有一个参数的非静态成员函数（9.3）或具有两个参数的非成员函数实现。因此，对于任何二元运算符 @，x@y 可以解释为 x.operator@(y) 或 operator@(x,y)。如果运算符函数的两种形式都已声明，则 13.3.1.2 中的规则确定使用哪种解释（如果有）。

也就是说，如果您要重载一个二元运算符并且它是一个成员函数，那么它必须采用一个参数。您需要两个参数，因此您必须使用非成员函数。

# php - 如何使用键数组遍历多维数组？

> ID：13228030
> 
> 赞同：2
> 
> 时间：2012-11-05T07:54:18.560
> 
> 标签：php

假设我有一个任意键数组：

```
$keys = array('foo', 'bar', 'baaz'); 
```

我想使用该键数组来遍历多维数组，以使数组`$values`中的每个元素都是`$keys`数组的一个级别`$values`。例如，给定`$keys`上面的数组，我正在寻找相当于：

```
$values['foo']['bar']['baaz'] 
```

或者：

```
$values[$keys[0]][$keys[1]][$keys[2]] 
```

但我不知道`$keys`数组中有什么或它有多大，所以我不能像这样硬编码它。

有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:57:12.277

```
$value = $values;
foreach ($keys as $key) {
    $value = $value[$key];
}
echo $value; 
```

# git - 当在 github 上删除分叉仓库时，分叉仓库是否被删除？

> ID：13228037
> 
> 赞同：1
> 
> 时间：2012-11-05T07:55:05.160
> 
> 标签：git, github

我在 github 上创建了一个 repo。如果分叉的 repo 已被删除，我的 repo 分支是否被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:02:49.970

**除非它是私人回购：**

> 请注意：删除私人回购将删除回购的所有分叉。删除公共回购不会。

-- [https://help.github.com/articles/deleting-a-repo](https://help.github.com/articles/deleting-a-repo)

# debugging - Windows phone 8 模拟器调试不起作用

> ID：13228038
> 
> 赞同：14
> 
> 时间：2012-11-05T07:55:20.887
> 
> 标签：debugging, visual-studio-2012, windows-phone-7.1, windows-phone, windows-phone-8

错误：指定的通信资源（端口）已被另一个应用程序使用

*   这只发生在 Hyper-V 模拟器上，旧的 7.1 模拟器工作正常。
*   Blend 2012 的部署工作正常。
*   在 Hyper-V 管理器中删除虚拟机没有帮助
*   删除 %user%\AppData\Local\Microsoft\Phone Tools\CoreCon 没有帮助

我的输出是：

```
1>------ Deploy started: Project: Proj1, Configuration: Debug Any CPU ------
1>Deploying C:\Users\Валентин\Projects\Proj1\Bin\Debug\Proj1.xap...
1>Connecting to Emulator WVGA 512MB...
1>The application is already installed on the device. Checking if an incremental deployment is possible...
1>Doing incremental deployment...
1>Updating information related to modified files...
1>Deployment of C:\Users\Валентин\Projects\Proj1\Bin\Debug\Proj1.xap succeeded.
========== Deploy: 1 succeeded, 0 failed, 0 skipped ========== 
```

最后状态栏消息：

```
Launching TaskHost.exe failed 
```

我在 WP8 模拟器、Windows 8 64 位上为 WP、WP 7.1 项目使用 VS2012 express。

奇怪的是，它早些时候运行良好，但由于某种原因今天停止运行。

请分享你的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T02:45:50.530

尝试在我的设备上调试应用程序时发生了这种情况。我通过卸载应用程序并重新部署它来修复它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-05T07:04:25.030

有一个解决方法：

*右键单击您的项目并选择部署。这会将所有必要的代码复制到模拟器。之后，您可以像往常一样自由地按 F5。*

![在此处输入图像描述](../Images/295aef5d9f2dbe6eaf8b891530d6eee3.png)

* * *

原创文章[http://blog.masterdevs.com/a-specified-communication-resource-port-is-already-in-use-by-another-application/](http://blog.masterdevs.com/a-specified-communication-resource-port-is-already-in-use-by-another-application/)。谢谢乔希。[_](http://blog.masterdevs.com/author/josh/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-09T14:32:35.933

我没有运气尝试了其他答案，它解决了我在设备或模拟器上部署应用程序（右键单击项目 - >部署），之后该端口再次空闲以启用调试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T16:28:41.013

我遇到了同样的错误，但不知道为什么。我偶然发现了这个解决方案（请参阅下面的链接）并记住我已经更改了我的命名空间，这就是问题所在。

如果您进入您的 csproj 文件，请确保这已更改。

```
<SilverlightAppEntry>TheOldNamespace.App</SilverlightAppEntry> 
```

参考 ：

[Windows Phone 7 - 应用程序无法启动，没有错误，只是加载时退出](https://stackoverflow.com/questions/6654028/windows-phone-7-app-doesnt-start-no-errors-just-bails-on-load)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T01:42:29.697

我也遇到了同样的问题，决定试一试：如果你有一个账号微软包含俄文名字和姓氏，那么你需要切换到一个包含英文字母的本地账号，在它下运行VS然后调试一个正在运行的应用程序，然后您可以返回您的 Microsoft 帐户，调试也将起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T11:16:25.733

运行`XdeCleanup.exe`，并尝试重新启动计算机。通常在这里解决问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-19T22:06:39.107

这总是在我第一次启动调试器并启动 Windows Phone 模拟器时发生。以下是我为解决此问题而采取的步骤。

1）启动调试器并让它启动模拟器 2）它超时（通常） 3）关闭模拟器 4）再次启动调试器并让它重新启动模拟器

出于某种原因，它第一次启动时永远无法连接到我。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-07T07:22:17.650

就我而言，上述所有解决方案均无效。

所以，我做了什么来解决同样的问题：我从我的项目中手动删除了`Bin`and`obj`文件夹，该文件夹是在每个项目构建时自动生成的。我重建了解决方案并将其部署到模拟器。这解决了我的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-01T14:56:14.750

这很容易解决。

```
 Microsoft.Phone.Controls.Toolkit.dll file add in the Service Refrence folder.
    Then In project right click on "sevice refernce" folder > include in project.
    rebuild the project 
```

成功运行项目

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-27T16:18:49.477

好吧，我也有同样的情况`Error: a specified communication resource (port) is already in use by another application`，我试过了，它对我有用。

您只需`Project.sln`在 Blend for Visual Studio 中打开文件。去`menu>project>Run project`！！！它将 Xap 文件安装到您的手机上，没有任何错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-23T05:06:36.857

我遇到了同样的问题，结果证明是网络连接的问题。尝试在您的机器与任何网络断开连接的情况下启动调试会话。

# css - 仅部分显示精灵

> ID：13228039
> 
> 赞同：0
> 
> 时间：2012-11-05T07:55:34.363
> 
> 标签：css, performance, stylesheet, sprite, css-sprites

我试图在我的 asp.net 主页底部制作一个精灵图像，以减少 http 请求的数量。我查看了所有编码，找不到任何错误。这是图像：

![5 个社交媒体按钮](../Images/2718a0be5eb97af0d3b2efa3457859be.png)

但由于某种原因，我的 google+ 图片没有显示；它仅显示 5 个社交媒体按钮中的 4 个。这是 jsfiddle，它也不显示 google+ 按钮：

[JSFiddle - 社交媒体按钮](http://jsfiddle.net/jasonpaulweber/R8Eu8/)

感谢任何可以在这方面提供任何指导的人！

SE 希望我在此处包含代码，尽管它在 Fiddle 上。但无论如何，这是我的样式表中的内容：

```
.homepage{
width:23px;
height:23px;
background-image: url(http://www.ussvision.com/images/sprite-homepage.jpg); 
background-repeat:no-repeat;
}
.fbook{
background-position: 0px 0px;
}
.twit{
background-position: -25px 0px;
}
.yt{
background-position: -50px 0px;
}
.goog{
background-position: -103px 0px;
}
.linked{
background-position: -150px 0px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T08:00:01.243

.goog 的位置应该是`-75px 0px`：见[http://jsfiddle.net/R8Eu8/1/](http://jsfiddle.net/R8Eu8/1/)

编辑：和 .linked 应该是`-103px, 0px`.

# iphone - MKMapView 上未出现注释

> ID：13228042
> 
> 赞同：0
> 
> 时间：2012-11-05T07:55:53.833
> 
> 标签：iphone, objective-c, ios, xcode, mkmapview

`MKMapView`我已经根据来自 Google Places 的数据设置并绘制了注释。这是我正在使用的代码：http: [//pastie.org/5187978](http://pastie.org/5187978)。

但是这些注释不会显示在地图上。我试图记录它们，似乎它们都已成功添加 - 但它们只是没有出现在地图上。

这真的很奇怪。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T05:51:29.017

这可能不是您的问题，而只是为了帮助其他人 - 通过将注释的坐标粘贴到一些在线地图（如 maps.bing.com）中来检查以确保注释的坐标存在于真实地图上。例如，如果您的坐标向后，则注释将被添加，然后被系统静默丢弃。

# c++ - 在 QPolygon 中找到完全包含的正方形？

> ID：13228045
> 
> 赞同：0
> 
> 时间：2012-11-05T07:56:03.590
> 
> 标签：c++, qt, polygon, intersection

我正在寻找一种方法来找到完全包含在 QPolygon 内的一组正方形，这不一定是凸的。到目前为止，我的幼稚方法如下所示：

```
QRectF boundingRect(mShape->boundingRect());
for (int x = boundingRect.x() - 1; x < boundingRect.width(); x++)
{
    for (int y = boundingRect.y() - 1; y < boundingRect.height(); y++)
    {
        QRectF rect(x, y, 1, 1);
        QPolygonF cell(rect);
        QPolygonF intersection = mShape->polygon().intersected(cell);
        if (!intersection.empty())
        {
            // Cell is fully contained
        }
    }
} 
```

当我可视化结果时，它看起来像这样：

![不会遗漏与多边形相交的单元格](../Images/b1ba2ce04bb5eb130f86209766ecd4eb.png)

这几乎是我想要的，除了与多边形的“轮廓”相交的单元格不应该存在。有谁知道我如何构建一组完全在多边形“内部”的正方形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:07:44.503

假设较大的多边形是凸的（在您的示例中），检查正方形的所有四个角是否都在较大的多边形内就足够了。在较大的多边形上使用 containsPoint 方法。

# php - 如何根据搜索结果插入多条记录

> ID：13228047
> 
> 赞同：0
> 
> 时间：2012-11-05T07:56:08.713
> 
> 标签：php, mysql

插入基于搜索结果的多条记录时出现问题。搜索字段工作正常。但问题是插入不起作用。此外，在我插入记录之前，我必须编辑任何我想要的“等级”字段部分。这是我的代码。

```
<?php
require_once('../../_includes/initialize.php');
?>

<html><br />

<form action="search.php" method="POST">
<?php
echo "<b><center>Search Results</center></b><br><br>";

if (isset($_POST['search_name'])) {

    $search_name = $_POST['search_name'];
if (!empty($search_name)) { 

$query="SELECT * FROM students WHERE course like                          '%".mysql_real_escape_string($search_name)."%'";

$result=mysql_query($query);
$num=mysql_num_rows($result);

if (($num) >=1) {
//echo 'Found.';

$i=0;
while ($i < $num) {
$id=mysql_result($result,$i,"id");
$f_name=mysql_result($result,$i,"f_name");
$g=mysql_result($result,$i,"dump");

?> 

<input name="id" type="text" value="<?php echo @$id; ?>" size="40" />
<input name="f_name" type="text" value="<?php echo @$f_name; ?>" size="40" />
<input name="a" type="text"  value="<?php echo $g; ?>" size="40" />

<br />

<?php
$i++;
}   

} else {

echo 'No results found.';
}  
}
}

?>
<?php
if (isset($_POST['Submit_Grade'])) {

$query = "INSERT INTO samplestudgrade (id, name, grade) VALUES ('".$_POST["id"]."','".$_POST["f_name"]."','".$_POST["a"]."')";
            $query_run = mysql_query($query);

            }

?>

<input name="search_name" type="text" value="search..." />
<input type="submit" value="Search"/>
<input type="submit" name="Submit_Grade" value="submit" />
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:19:51.553

试试这个代码：

**编辑：**

```
<html><br />

    <form action="search.php" method="POST">
        <?php
        echo "<b><center>Search Results</center></b><br><br>";

        if (isset($_POST['search_name'])) {

            $search_name = $_POST['search_name'];
            if (!empty($search_name)) {

                $query = "SELECT * FROM students WHERE course like '%" . mysql_real_escape_string($search_name) . "%'";

                $result = mysql_query($query);
                $num = mysql_num_rows($result);

                if (($num) >= 1) {
                    //echo 'Found.';

                    $i = 0;
                    while ($i < $num) {
                        $id = mysql_result($result, $i, "id");
                        $f_name = mysql_result($result, $i, "f_name");
                        $g = mysql_result($result, $i, "dump");
                        ?> 

                        <input name="id[]" type="text" value="<?php echo @$id; ?>" size="40" />
                        <input name="f_name[]" type="text" value="<?php echo @$f_name; ?>" size="40" />
                        <input name="a[]" type="text"  value="<?php echo $g; ?>" size="40" />

                        <br />

                        <?php
                        $i++;
                    }
                } else {

                    echo 'No results found.';
                }
            }
        }
        ?>
        <?php
        if (isset($_POST['Submit_Grade'])) {
            $ctr = 0;
            foreach ($_POST['id'] as $id) :
                if ($_POST["a"] >= 75) {
                    $status = "Passed";
                } elseif ($_POST["a"] >= 73) {
                    $status = "Conditional";
                } elseif ($_POST["a"] >= 70) {
                    $status = "Failed";
                } else {
                    $status = "Incomplete";
                }
                $query = "INSERT INTO samplestudgrade (id, name, grade, status) VALUES ('" . $id . "','" . $_POST["f_name"][$ctr] . "','" . $_POST["a"][$ctr] . "','" . $status . "')";
                $query_run = mysql_query($query);
                $ctr++;
            endforeach;
        }
        ?>

        <input name="search_name" type="text" value="search..." />
        <input type="submit" value="Search"/>
        <input type="submit" name="Submit_Grade" value="submit" />
    </form>
</html> 
```

# perl - 使用模式匹配反转输入行前 3 个单词的顺序

> ID：13228048
> 
> 赞同：-1
> 
> 时间：2012-11-05T07:56:13.957
> 
> 标签：perl

我在 Perl 中有一个问题：使用替换运算符反转每个输入行的前三个单词的顺序。保持间距不变，并打印每个结果行。

我该如何解决这个问题？任何想法？在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:00:42.287

试试这个

```
$line =~ s/^(\s*)(\w+)(\s+)(\w+)(\s+)(\w+)/$1$6$3$4$5$2/; 
```

没有发布完整的代码，因为它似乎是家庭作业或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:30:48.407

虽然 awk 没有被标记。可能您想了解 awk 解决方案：

```
awk '{x=$3" "$2" "$1;$3=$2=$1=""; print x,$0}' your_file 
```

# iphone - 多个摄像头视图显示相同的摄像头馈送

> ID：13228051
> 
> 赞同：2
> 
> 时间：2012-11-05T07:56:35.713
> 
> 标签：iphone, objective-c, ios

我想显示相机的多个视图，所有视图都显示相同的相机馈送，但在一个大视图中的不同视图。就像应用商店中的 Nostalgio 应用一样。

我已经尝试过图像选择器控制器以及 AVCapture Sessions 似乎对我没有任何用处。

任何指针/解决方案将不胜感激。

# php - 选择框值应在多个页面中访问

> ID：13228052
> 
> 赞同：1
> 
> 时间：2012-11-05T07:56:40.423
> 
> 标签：php

我有一个带有日期的选择框。选择日期时，它将显示带有所选日期的特定发票。到目前为止，它可以正常工作。我需要的是，如果我转到另一个页面并返回，选择框应该选择我之前选择的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:09:34.483

使用get方法。见[这里](http://php.net/manual/en/reserved.variables.get.php)。提交后，只需在 URL 重定向上设置日期即可。然后使用 get 方法获取日期的值。试试下面的代码。

```
$_POST['date'] = $date;

header('location: currentpage.php?date={$date}'); 
```

然后当返回表单时，检查 get 方法的变量是否存在，如果存在，检查选项是否等于提交日期。

```
<select name="date">
    <option 
    <?php
        if (isset($_GET['date'])) {
            if ($_GET['date'] == '12-25-12') { echo "selected"; }
        }
    ?>
    >12-25-12</option>
</select> 
```

# php - 如何仅使用 htaccess 为图像重写 URL

> ID：13228053
> 
> 赞同：0
> 
> 时间：2012-11-05T07:56:41.483
> 
> 标签：php, .htaccess, url-rewriting

这是我的图片的当前 URL -

```
http://www.mysite.com/files/thumb/133/595 
```

在萤火虫中检查它时，这是图像标签下的代码 -

```
<img src="http://www.mysite.com/files/thumb/133/595" alt="This is text"> 
```

现在我希望像这样更改上述 URL -

```
http://www.mysite.com/files/thumb/133/595/This-is-text.jpg 
```

图像扩展名（`.jpg`在这种情况下）自动添加到图像类型上，并且 alt 文本被添加到链接中，空格被替换为`-`.

我怎样才能做到这一点？通过`htaccess`或其他一些方法（项目在`php`）。

如何重写我的 htaccess 文件，此更改仅适用于图像。（重写中的新手）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:29:28.247

您不能在 htaccess 中执行此操作，因为“**这是文本”**替代文本永远不会发送到服务器，并且只是 HTML 标记的一部分。您需要更改您的站点，而不是：

```
<img src="http://www.mysite.com/files/thumb/133/595" alt="This is text"> 
```

在整个网站的每个地方，它们看起来像这样：

```
<img src="http://www.mysite.com/files/thumb/133/595/This-is-text.jpg" alt="This is text"> 
```

不确定您的网站是如何构建的，这是否是某些脚本中的单行更改，或者这是否涉及对每个文件的搜索和替换。一旦你有了它，如果你想使用 mod_rewrite*将这些 URL 重写**回**原来的*，那么你会做这样的事情：

```
RewriteEngine On
RewriteRule ^/?files/thumb/([0-9]+)/([0-9]+)/.+\.jpg$ /files/thumb/$1/$2 [L] 
```

本质上，在 2 个数字之后放弃任何东西。

# php - 告诉 zend 路由器给每个 url 加上前缀

> ID：13228055
> 
> 赞同：2
> 
> 时间：2012-11-05T07:56:46.333
> 
> 标签：php, zend-framework, url, routing

我正在使用 zend 框架 1.12 开发一个网站。

但是客户端使用的是没有重写能力的 IIS，所以我需要重新配置 zend 以创建类似`index.php/controller/action`而不是`/controller/action`.

我看到的最简单和最不痛苦的方法是以某种方式告诉 zend 路由器`index.php`在它生成的每个 url 中放置一个前缀。

问题是，这是否可能以及如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:22:20.380

我找到了适合我的解决方案。

如果其他人有这个问题，这就是我在 Bootstrap.php 中的内容：

```
$router = Zend_Controller_Front::getInstance()->getRouter();
$router->removeDefaultRoutes();
$router->addRoute('default', new Zend_Controller_Router_Route('index.php', array('controller' => 'index', 'action' => 'index')));
$router->addRoute('compat', new Zend_Controller_Router_Route('/:controller/:action/*', array('controller' => 'index', 'action' => 'index'))); 
```

# c# - 使用（类）未知函数

> ID：13228056
> 
> 赞同：1
> 
> 时间：2012-11-05T07:56:47.577
> 
> 标签：c#

我检查了一个表格是否已经打开。如果不是，它将打开，如果是，它将激活表单 + 使用 SwitchTab(int i) 函数。这是一些代码：

```
public partial class Insert : Form {
    public Insert() {
        InitializeComponent();
    }

    public Insert(int tab) : this() {
        SwitchTab(tab);
    }

    public void SwitchTab(int tab) {
        tabControl1.SelectedIndex = tab;
    }
}

private void OpenInsert(int tab) {

        // Loop through all forms
        foreach (Form f in Application.OpenForms) {

            // Check if form of Insert type is found
            if (f.GetType() == typeof(Insert)) {
                f.Activate();

                // Unknown function
                f.SwitchTab(tab)

                return;
            }
        }

        // Not found, open form
        Insert insert = new Insert(tab);
        insert.Show();
    } 
```

这背后的原因是插入表单有多个选项卡，如果单击菜单中的其他按钮，我想切换选项卡。问题是我想调用 SwitchTab() 函数的地方，编译器不知道它是一个 Insert 类，但它只有在它是时才通过。那么有什么方法可以强制让它知道它是插入的一个实例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:03:42.243

如果无法将对象强制转换为类，则使用`as`返回进行强制转换。`null`此外，编译器检查是否可以进行强制转换：

```
 foreach (Form f in Application.OpenForms) {

        var fI = f as Insert;
        // Check if form of Insert type is found
        if (fI != null) {
            fI.Activate();
            fI.SwitchTab(tab);
            return;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:16:48.813

使用 linq 你可以这样做：

```
private void OpenInsert(int tab)
{
    var insert = Application.OpenForms.OfType<Insert>().FirstOrDefault();
    if (insert == null)
    {
        insert = new Insert(tab);
        insert.Show();
    }
    else
    {
        insert.Activate();
        insert.SwitchTab(tab);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T08:17:22.830

```
var form = Application.OpenForms.OfType<Insert>().FirstOfDefault();
if(form != null) {
  form.Activate();
  form.SwitchTab(tab);
} else {
  form = new Insert(tab);
  insert.Show();
}//if 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T08:00:39.507

你必须告诉它是这样的：

```
((Insert)f).SwitchTab(tab) 
```

这将尝试将表单转换为它，但如果不是，则会抛出异常。但是既然你检查了它，应该没有问题:-)

# xcode - 使以前的应用程序与 Iphone 5 兼容

> ID：13228060
> 
> 赞同：-1
> 
> 时间：2012-11-05T07:57:17.380
> 
> 标签：xcode

应用程序上的图像看起来不错。底部有一个空白屏幕，因为图像不适合 iPhone 屏幕的大小。是否有任何简单快捷的解决方案，或者我必须为 iPhone 5 制作单独的屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:52:24.993

我的问题解决了最好的方法是如果您的应用程序是一个小应用程序并且在其中使用较少的视图，则制作单独的视图。

# expressionengine - 如何对 ExpressionEngine {reverse_related_entries} 进行分页

> ID：13228063
> 
> 赞同：0
> 
> 时间：2012-11-05T07:57:35.867
> 
> 标签：expressionengine

我很惊讶我以前没有遇到过这种情况，或者至少我忘记了我是如何让它工作的。

我有一个标准的 EE 关系字段。在这种情况下，我有一个“产品”频道，每个产品都属于“设计师”频道中的一个条目。

我很明显想要一个页面来列出一个设计师的所有产品。我的第一次尝试是这样的：

```
{exp:channel:entries channel="designers" url_title="{segment_3}" limit="1"}

    {reverse_related_entries channel="products" limit="15"}
        {snippet_product_grid}
        {snippet_paginate}
    {/reverse_related_entries}

{/exp:channel:entries} 
```

根据EE 文档中的[轶事证据](http://expressionengine.com/legacy_docs/modules/weblog/reverse_related_entries.html#3668)，您不能对反向相关条目进行分页。那么解决方案是什么？`url_title`鉴于设计师的身份，有没有办法轻松获取所有产品条目 ID ？还是我必须求助于使用 SQL？

有什么办法可以使用[Stash](https://github.com/croxton/Stash)插件解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:22:16.750

janvl 对 playa 说的话。使用 stash，您想使用 Mark Croxton 为 {exp:stash:get_list} 添加分页功能的 dev 分支

[https://github.com/croxton/Stash/tree/dev#expstashget_list-tag-pair](https://github.com/croxton/Stash/tree/dev#expstashget_list-tag-pair)

尚未在本地沙箱上测试此代码，但下面的代码应该可以帮助您入门

```
{exp:channel:entries channel="designers" url_title="{segment_3}" limit="1"}
    {exp:stash:set_list name="related_products" parse_tags="yes"}
        {reverse_related_entries channel="products"}
            {stash:st_item_title}{title}{/stash:st_item_title}
        {/reverse_related_entries}
    {/exp:stash:set_list}
{/exp:channel:entries}

{exp:stash:get_list name="related_products" parse_tags="yes" parse_conditionals="yes" prefix="my_prefix" paginate="bottom"}

    {if my_prefix:count == 1}<ul>{/if}
        <li>{st_item_title}</li>
    {if my_prefix:count == my_prefix:total_results}</ul>{/if}

    {if my_prefix:no_results}
        <p>No related products</a></p>
    {/if}

    {my_prefix:paginate}
        {pagination_links}
            <ul>
                {first_page}
                        <li><a href="{pagination_url}" class="page-first">First Page</a></li>
                {/first_page}

                {previous_page}
                        <li><a href="{pagination_url}" class="page-previous">Previous Page</a></li>
                {/previous_page}

                {page}
                        <li><a href="{pagination_url}" class="page-{pagination_page_number} {if current_page}active{/if}">{pagination_page_number}</a></li>
                {/page}

                {next_page}
                        <li><a href="{pagination_url}" class="page-next">Next Page</a></li>
                {/next_page}

                {last_page}
                        <li><a href="{pagination_url}" class="page-last">Last Page</a></li>
                {/last_page}
            </ul>
        {/pagination_links}
    {/my_prefix:paginate}

{/exp:stash:get_list} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T09:16:54.317

你可以使用 playa 来建立你的关系。

据我所知，您应该能够在 playa 中对相关条目进行分页： [https ://getsatisfaction.com/pixelandtonic/topics/pagination_in_playa#reply_6602199](https://getsatisfaction.com/pixelandtonic/topics/pagination_in_playa#reply_6602199)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:00:18.467

是的，您可以对 Playa 关系进行分页，因为它们的行为类似于指向另一个通道的嵌入式第二个循环。因此，您可以选择 stash 路线（当然，除了这种分页需求之外，它还提供许多好处），或者如果您将关系字段转换为 Playa 字段，您也可以采用这种方式进行分页。

# google-maps - 多个标记侦听器

> ID：13228064
> 
> 赞同：0
> 
> 时间：2012-11-05T07:57:39.620
> 
> 标签：google-maps, google-maps-markers, infowindow

我正在使用谷歌地图 javascript api，标记侦听器。当我点击标记信息窗口应该弹出。在 for 循环中，我添加了多个（在本例中为 3 个）标记。这是代码：

```
 for (z = 0; z < 3; z++) {
            arrMarkers.push( new google.maps.Marker({
            position: flightPlanCoordinates[arrCoords.length-1],
            map: map, title: 'Kraj', clickable: true
            }));        

            arrInfoWindow.push( new google.maps.InfoWindow({
                content: 'Hello world'
            }));

            google.maps.event.addListener(arrMarkers[z], 'click', function() {
                    arrInfoWindow[z].open(map, arrMarkers[z]);
            });
       } 
```

信息窗口不弹出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:33:38.897

你不能在 arrInfoWindow 上推送信息窗口，它需要分开
试试这个

```
for (z = 0; z < 3; z++) 
{
  arrMarkers.push( new google.maps.Marker({
  position: flightPlanCoordinates[arrCoords.length-1],
  map: map, title: 'Kraj', clickable: true
  }));        

  var infoWindow = new google.maps.InfoWindow({
      content: 'Hello world'
  });
  arrInfoWindow.push( infoWindow );

  google.maps.event.addListener(arrMarkers[z], 'click', function() {
          arrInfoWindow[z].open(map, arrMarkers[z]);
  });
} 
```

# nsis - 用于在升级成功完成页面上显示自述文件链接或 URL 的 NSIS 脚本

> ID：13228069
> 
> 赞同：2
> 
> 时间：2012-11-05T07:58:13.627
> 
> 标签：nsis

我的要求是在升级成功完成页面上显示自述文件或 URL。是否可以在升级完成页面上显示自述文件或 URL 链接？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T08:18:28.010

[MUI](http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html)完成页面同时支持自述文件复选框和可点击的 URL：

```
!define MUI_FINISHPAGE_SHOWREADME "$instdir\readme.txt" ; Can also be a URL
!define MUI_FINISHPAGE_LINK "Visit my homepage"
!define MUI_FINISHPAGE_LINK_LOCATION "http://example.com"
!insertmacro MUI_PAGE_FINISH 
```

如果您真的需要，您甚至可以使用 MUI_FINISHPAGE_RUN_FUNCTION 并获取 3 个 URL...

# continuous-integration - 循环 Cruisecontrol.net 中的参数值

> ID：13228070
> 
> 赞同：1
> 
> 时间：2012-11-05T07:58:19.460
> 
> 标签：continuous-integration, cruisecontrol.net

我已经为我的项目设置了 Cruisecontrol 构建，我需要在多个环境中运行它。这是我目前使用的：

```
<parameters>
    <selectParameter>
        <name>Environment1</name>
        <display>Environment1</display>
        <allowedValues>
            <value name="No">No</value>
        <value name="Yes">Yes</value>
        </allowedValues>
    </selectParameter>
    <selectParameter>
        <name>Environment2</name>
        <display>Environment2</display>
        <allowedValues>
            <value name="No">No</value>
        <value name="Yes">Yes</value>
        </allowedValues>
    </selectParameter>
    <selectParameter>
        <name>Environment3</name>
        <display>Environment3</display>
        <allowedValues>
            <value name="No">No</value>
        <value name="Yes">Yes</value>
        </allowedValues>
    </selectParameter>
</parameters>

<conditional>
    <conditions>
    <compareCondition value1="Environment1" evaluation="equal" value2="Yes" />
    </conditions>
    <tasks>
        <msbuild>
            <executable>C:\WINDOWS\Microsoft.NET\Framework\v3.5\MSBuild.exe</executable>
            <workingDirectory>$[DirectoryOfBuildScript]</workingDirectory>
            <projectFile>MSBuild.proj</projectFile>
            <buildArgs>/v:n /p:Environment=Environment1;Version=$[BuildVersion];</buildArgs>
            <targets>Deploy</targets>
            <timeout>3000</timeout>
            <logger>ThoughtWorks.CruiseControl.MsBuild.XmlLogger,C:\Program Files\CruiseControl.NET\webdashboard\bin\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
        </msbuild>
    </tasks>
</conditional>

<conditional>
    <conditions>
    <compareCondition value1="Environment2" evaluation="equal" value2="Yes" />
    </conditions>
    <tasks>
        <msbuild>
            <executable>C:\WINDOWS\Microsoft.NET\Framework\v3.5\MSBuild.exe</executable>
            <workingDirectory>$[DirectoryOfBuildScript]</workingDirectory>
            <projectFile>MSBuild.proj</projectFile>
            <buildArgs>/v:n /p:Environment=Environment2;Version=$[BuildVersion];</buildArgs>
            <targets>Deploy</targets>
            <timeout>3000</timeout>
            <logger>ThoughtWorks.CruiseControl.MsBuild.XmlLogger,C:\Program Files\CruiseControl.NET\webdashboard\bin\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
        </msbuild>
    </tasks>
</conditional>

<conditional>
    <conditions>
    <compareCondition value1="Environment3" evaluation="equal" value2="Yes" />
    </conditions>
    <tasks>
        <msbuild>
            <executable>C:\WINDOWS\Microsoft.NET\Framework\v3.5\MSBuild.exe</executable>
            <workingDirectory>$[DirectoryOfBuildScript]</workingDirectory>
            <projectFile>MSBuild.proj</projectFile>
            <buildArgs>/v:n /p:Environment=Environment3;Version=$[BuildVersion];</buildArgs>
            <targets>Deploy</targets>
            <timeout>3000</timeout>
            <logger>ThoughtWorks.CruiseControl.MsBuild.XmlLogger,C:\Program Files\CruiseControl.NET\webdashboard\bin\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
        </msbuild>
    </tasks>
</conditional> 
```

如您所见，所有条件语句中只有环境名称不同。有什么方法可以通过循环选择的环境名称来概括我的构建调用（版本不会有所不同）。像这样的东西：

```
// Conceptually I want a for loop which iterates through the selected environments
foreach(environmentName in selectedEnvironments)
{
    <tasks>
        <msbuild>
            <executable>C:\WINDOWS\Microsoft.NET\Framework\v3.5\MSBuild.exe</executable>
            <workingDirectory>$[DirectoryOfBuildScript]</workingDirectory>
            <projectFile>MSBuild.proj</projectFile>
            <buildArgs>/v:n /p:Environment=environmentName;Version=$[BuildVersion];</buildArgs>
            <targets>Deploy</targets>
            <timeout>3000</timeout>
            <logger>ThoughtWorks.CruiseControl.MsBuild.XmlLogger,C:\Program Files\CruiseControl.NET\webdashboard\bin\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
        </msbuild>
    </tasks>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:50:23.107

我会考虑对这些东西使用预处理器。预处理器中似乎有 for-each 元素，尽管我没有看到它在任何地方记录。但是 CCNet 资源中有一些测试显示了如何使用它。

关于这个问题，我创建了一个类似的概念证明，我认为您应该能够轻松地使其适应您的条件。我没有构建某些环境，而是提供要 ping 的域列表。

提供*定义*域，以免重复两次或更多次：

```
<cb:define name="domains">
    ['facebook', 'twitter', 'wired']
</cb:define> 
```

然后以同样的方式定义参数：

```
<cb:define name="paramDef">
    <selectParameter>
        <name>$(domainName)</name>
        <display>$(domainName)</display>
        <allowedValues>
            <value name="No">No</value>
            <value name="Yes">Yes</value>
        </allowedValues>
    </selectParameter>
</cb:define> 
```

...对于任务：

```
<cb:define name="condTask">         
    <conditional>
        <conditions>
            <compareCondition>
                <value1>$[$(domainName)]</value1>
                <value2>Yes</value2>
                <evaluation>Equal</evaluation>
                <ignoreCase>true</ignoreCase>
            </compareCondition>
        </conditions>
        <tasks>
            <exec executable="ping">
                <buildArgs>$(domainName).com</buildArgs>
            </exec>
        </tasks>
    </conditional>
</cb:define> 
```

*（注意value1*中的奇怪结构- 它匹配名称，然后评估该名称的值）

现在我们已经准备好了一切，所以我们可以生成我们需要的东西。对于参数：

```
<parameters>
    <cb:for-each iterator-name="i" iterator-expr="$(domains)">
        <cb:scope domainName="$(i)">    
            <cb:paramDef />
        </cb:scope>
    </cb:for-each>
</parameters> 
```

...对于任务也是如此：

```
<tasks>
    <cb:for-each iterator-name="i" iterator-expr="$(domains)">
        <cb:scope domainName="$(i)">    
            <cb:condTask />
        </cb:scope>
    </cb:for-each>
</tasks> 
```

就是这样。我需要 ping 的下一个域只需将其放入*域*数组中。

一些注意事项：

*   *cb:scope*元素覆盖实际定义的值。
*   *在上述情况下，所需的值采用 Environment1、Environment2、Environment3 等形式，使用预处理器的常规for*循环可能会更容易一些（文档中的示例）
*   预处理器文档： http: [//cruisecontrolnet.org/projects/ccnet/wiki/Configuration_Preprocessor](http://cruisecontrolnet.org/projects/ccnet/wiki/Configuration_Preprocessor)

# c# - 如何使用 linq 获取字典对象的变量

> ID：13228077
> 
> 赞同：2
> 
> 时间：2012-11-05T07:58:47.877
> 
> 标签：c#, linq, dictionary

我有一个对象

```
class foo {
  public int bar;
  public string s;
} 
```

那是在字典里

```
Dictionary<String, foo> mm = new Dictionary<String, foo>(); 
```

我想实现一个使用 LINQ 的方法来获取所有`values`字典并返回所有“bar”变量的列表。我认为这应该很容易使用 linq，但我还没有设法完成相关示例。

```
public int[] getList() {
  return mm.Values.bar <- something like that but with linq
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T08:00:57.853

您可以使用`Enumerable.Select`和`ToArray()`：

```
int[] bars = mm.Select(kv => kv.Value.bar).ToArray(); 
```

# javascript - Highcharts 不显示从 JSON 推送的系列

> ID：13228081
> 
> 赞同：0
> 
> 时间：2012-11-05T07:58:53.690
> 
> 标签：javascript, jquery, json, highcharts

我很难找出我在 Highcharts 中设置图表系列的方式有什么问题。图表轮廓呈现，但系列没有，这表明数据集有问题。解析后，拉入的 JSON 数据看起来很好（顶部附近注释掉的硬编码数据块是数据的外观），我查看了 Highcharts API 并尝试了其他方法无济于事。我想知道我是否只是将数据推错了？我的 javascript/jquery 知识非常基础。谢谢！

```
 data.push([xval, yval]); 
```

[Jsfiddle 链接](http://jsfiddle.net/u4kaC/6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:09:09.753

修改了您的代码，以便图形呈现[http://jsfiddle.net/u4kaC/13/](http://jsfiddle.net/u4kaC/13/)

您应该在

```
$.getJSON(...) 
```

我已经移动了这段代码

```
var chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container'
                },
                xAxis: {
                    type: 'datetime'
                },
                series: [{
                    data: data
                }] 
```

在你构建你的“数据”数组之后。问题是您试图在触发 getJson(..) 函数的回调并创建“数据”对象之前绘制图形，这导致“数据”对象始终为空，因此图形不是被画了:)

这是函数的外观

```
$.getJSON('http://api.cosm.com/v2/feeds/79903/datastreams/Temperature.json?start=2012-10-31T14:01:46Z&end=2012-11-03T17:01:46Z&interval=3600?key=dNSiSvXZtR6QBUqbzll4CCgnngGSAKxIQVFSeXBneGpqWT0g', 
        function(inData) 
        {
            var xval = new Date();
            dateStart = Date.parse(inData.datapoints[0].at);
            for (i=0; i<inData.datapoints.length; i++)
            {
                var yval = parseFloat(inData.datapoints[i].value);
                xval = Date.parse(inData.datapoints[i].at);
                var x = [xval, yval];                   

                data.push({x: xval, y:yval});

             });

             var chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container'
                },
                xAxis: {
                    type: 'datetime'
                },
                series: [{
                    data: data
                }]
               }
             }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:24:36.250

只是一个小的修正 - 在上面的答案中，图表是在 for 循环内创建的，导致为数据中的每个点启动一个图表。通过将图表启动移到循环之外来纠正这一点：http: [//jsfiddle.net/highcharts/u4kaC/15/](http://jsfiddle.net/highcharts/u4kaC/15/)。

```
$.getJSON('http://api.cosm.com/v2/feeds/79903/datastreams/Temperature.json?start=2012-10-31T14:01:46Z&end=2012-11-03T17:01:46Z&interval=3600?key=dNSiSvXZtR6QBUqbzll4CCgnngGSAKxIQVFSeXBneGpqWT0g', function(inData) {
    var xval = new Date();
    dateStart = Date.parse(inData.datapoints[0].at);
    for (i = 0; i < inData.datapoints.length; i++) {
        var yval = parseFloat(inData.datapoints[i].value);
        xval = Date.parse(inData.datapoints[i].at);
        var x = [xval, yval];

        data.push(x);
    }
    //data.push({x: xval, y:yval});
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            type: 'datetime'
        },
        series: [{
            data: data}]
    });
}); 
```

# google-chrome - ":focus" 伪类在 Chrome 中不起作用

> ID：13228085
> 
> 赞同：3
> 
> 时间：2012-11-05T07:59:25.007
> 
> 标签：google-chrome, css, pseudo-class

我正在为我的按钮使用 :focus 伪类（按下时）。它在 Firefox 上运行良好，但在 Chrome 中不会改变其状态。有什么解决方法吗？

**CSS：**

```
.btn:focus {
    box-shadow: 1px 1px 1px #586601 inset;
    text-shadow: -1px -1px 1px #000000;
} 
```

（这是一个带有“btn”类的输入标签。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T08:10:36.843

您需要区分`:focus`和`:active`，请参阅[文档](http://www.w3schools.com/cssref/sel_active.asp)。

> 选择`:focus`器用于选择具有焦点的元素。
> 
> 选择`:active`器用于选择活动链接并为其设置样式。
> 
> 单击链接时，链接将变为活动状态。

您应该将样式更改为：

```
.btn:active, .btn:focus {
   box-shadow: 1px 1px 1px #586601 inset;
   text-shadow: -1px -1px 1px #000000;
} 
```

> 注意：`:active`必须`:hover`在 CSS 定义之后（如果存在）才能生效！

[演示](http://jsfiddle.net/RPdkk/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:15:07.737

如果您希望按钮在单击时获得焦点（chrome 显然不会为您做到这一点），您可以手动完成。使用 jQuery：

```
$(".btn").on("click",function(){
  $(this).focus()
} 
```

小提琴：http: [//jsfiddle.net/HSWDc/](http://jsfiddle.net/HSWDc/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-31T15:06:27.773

尝试以下操作：

```
-webkit-box-shadow: 1px 1px 1px #586601 inset;
-moz-box-shadow: 1px 1px 1px #586601 inset;
-webkit-text-shadow: -1px -1px 1px #000000;
-moz-text-shadow: -1px -1px 1px #000000; 
```

# php - PHP 套接字 GET 请求

> ID：13228093
> 
> 赞同：1
> 
> 时间：2012-11-05T07:59:48.823
> 
> 标签：php, sockets

我正在使用以下脚本向站点发送 GET 请求，但是，我不断收到错误消息，服务器没有响应。

1.  我已经运行了 wireshark 来查看由于运行这个脚本而产生的任何流量，但是没有流量。
2.  我可以从浏览器连接到站点，也可以使用 file_get_contents 函数检索内容，但是使用套接字，我无法做到这一点。

这是使用套接字将请求发送到站点的代码，如果连接不成功，它会返回错误：“服务器没有响应”。

```
<?php

error_reporting(0);
set_time_limit(0);
ini_set("default_socket_timeout", 5);

function http_send($host, $packet)
{
    if (!($sock = fsockopen($host, 80)))
        die( "\n[-] No response from {$host}:80\n");

    fwrite($sock, $packet);
    return stream_get_contents($sock);
}

$host="http://example.com";
$path="/";
$packet  = "GET {$path} HTTP/1.0\r\n";
$packet .= "Host: {$host}\r\n";
$packet .= "Connection: close\r\n\r\n";

http_send($host, $packet);

?> 
```

那么，上面的代码有什么问题导致无法发送 GET 请求呢？

在我看来没问题，它将形成 GET 请求的 HTTP 请求标头并存储在 $packet 变量中。

$host 是目标站点名称。

然后它调用函数 http_send 来发送请求。

错误输出：[-] [http://example.com:80没有响应](http://example.com:80)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:25:31.047

```
$fp = fsockopen("127.0.0.1", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    $out = "GET /out.php HTTP/1.1\r\n";
    $out .= "Host: 127.0.0.1\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);
    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
} 
```

out.php 包含

```
 <?php
 echo 'got in'; 
```

获得的输出

```
 HTTP/1.1 200 OK Date: Mon, 05 Nov 2012 08:23:11 GMT Server: Apache/2.2.21 (Win32)
     mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1 X-Powered-By: 
    PHP/5.3.8 Content-Length: 6 Connection: close Content-Type: text/html got in 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:05:15.683

通过为and`fsockopen`传入参数来查看返回的错误：`errno``errstr`

```
if (!($sock = fsockopen($host,80,$err_no,$err_str)))
    die($err_no.': '.$err_str); 
```

# android - Android AsyncTask - 执行顺序

> ID：13228096
> 
> 赞同：11
> 
> 时间：2012-11-05T08:00:03.893
> 
> 标签：android, android-asynctask

我面临一个关于 AsyncTasks 执行顺序的问题。

我的问题是：

假设我有 2 个 AsyncTask 实现：**MyAsyncTask1**和**MyAsyncTask2**

以下列方式调用：

```
new MyAsyncTask1 ().execute ();
new MyAsyncTask2 ().execute (); 
```

是否保证**MyAsyncTask1在****MyAsyncTask2**之前执行？可以肯定的一件事是，它们没有并行执行，因为使用了默认执行程序，即**SERIAL_EXECUTOR**。问题在于执行顺序：哪个会先执行？？

如果未确定执行顺序，如何强制执行 AsyncTasks 的执行顺序？

我需要的是在**MyAsyncTask2**之前执行**MyAsyncTask1**，尽管我在**MyAsyncTask2**之前调用**MyAsyncTask1**的执行，但情况并非总是如此。

我实际上拥有的是一个自定义活动：

```
public abstract class CustomActivity extends Activity {

    @Override
    protected void onCreate ( Bundle savedInstanceState ) {
        super.onCreate ( savedInstanceState );
        new MyAsyncTask2 ().execute ();
    }
} 
```

还有另一个继承自自定义活动的活动：

```
public class MainActivity extends CustomActivity {

    @Override
    protected void onCreate ( Bundle savedInstanceState ) {
        new MyAsyncTask1 ().execute ();
        super.onCreate ( savedInstanceState );
    }
} 
```

所以如果我使用**MainActivity**，**MyAsyncTask1**应该在**MyAsyncTask2**之前执行，至少这是我需要的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T08:10:50.353

确保两个线程（基本上就是 AsyncTasks）按您想要的顺序执行的唯一方法是在第一个线程完成时启动第二个线程。

在您的情况下，为了保持实现抽象并且不必在 AsyncTask1 中实际调用 AsyncTask2 `onPostExecute`（Anup 和 Sanket 建议的方式，如果您想混合它们也可以），请进行 AsyncTask1 call `super.executeAsyncTask2()`，其中`executeAsyncTask2()`是您的 CustomActivity 中的一个方法启动第二个 AsyncTask

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T11:08:16.130

为了“链接”任意数量的 AsyncTask，我所做的是让我的 AsyncTask 接收自定义回调作为参数。你只需要像这样定义它：

```
public interface AsyncCallback(){
    public void onAsyncTaskFinished();
} 
```

您的 AsyncTask 实现构造函数应该有一个 AsyncCallback 作为参数，如下所示：

```
private AsyncCallback callback;

public AsyncTaskImplementation(AsyncCallback callback){
    //Do whatever you're doing here
    this.callback = callback;
} 
```

当然如果他们有更多的参数，不要删除它们。

然后，就在结束之前`onPostExecute`，介绍一下：

```
if (callback != null) callback.onAsyncTaskFinished(); 
```

因此，如果您传递回调，AsyncTask 将在主线程中执行您的回调。如果您不想执行任何回调，只需通过`null`

因此，要调用您的 AsyncTask 链，您只需编写以下代码：

```
new AsyncTask1(new AsyncCallback(){

    public void onAsyncTaskFinished(){
         new AsyncTask2(null).execute();
    }

}).execute(); 
```

我希望这可以帮助你 ;-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:05:40.660

在第一个 Aysnc 任务结束时调用你的第二个异步任务（即在`onPostExecute()`你的第一个异步任务的方法结束时）

```
//first async task's onPostExecute method

onPostExecute()
{
//do your stuff and call second async task

new MyAsyncTask2 ().execute ();

} 
```

这将保证在第一个任务之后以简单而优雅的方式执行第二个任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T08:08:04.143

在任务 1 的 onPostExecute 中调用 2nd Task 为

```
@Override
protected void onPostExecute(String string){//String or whatever u passed
    new MyAsyncTask2 ().execute ();
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-05T08:05:25.877

AsyncTask 在后台执行，因此在您的情况下，第一个代码将启动 task1 并立即启动 task2 .. 所以调用

```
new MyAsyncTask2 ().execute (); 
```

这在 Task1 的 postexecute 中

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-05T08:08:03.707

不要让事情变得复杂，并尽量保持你的设计简单和干净。两个 AsyncTask 之间的竞争取决于它们在覆盖的方法中进行的处理量。从逻辑上讲，如果您希望 AsyncTask1 在 AsyncTask2 之前完成，则只需将第二个 Async 的代码块添加到第一个 Async 中。

**或者从你的第一个异步的onPostExecute**启动你的第二个异步 - 但就个人而言，这似乎没有必要。

# java - 将 getPosNumber() 与 JOptionPane 一起使用

> ID：13228104
> 
> 赞同：0
> 
> 时间：2012-11-05T08:00:42.510
> 
> 标签：java

我一直在使用 Scanner 来使用此代码，但我想使用 JOptionPane 来使用此代码，并带有 getPosNumber。我尝试了 compareTo()，但它不起作用。谢谢！

```
int height;
int length;

length = getPosNumber("What is the length of the rectangle?");
height = getPosNumber("What is the height of the rectangle?"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:07:37.693

```
length =  getPosNumber( Integer.parseInt( JOptionPane.showInputDialog( "What is the length of the rectangle?"))); 
```

参考 API：[http ://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html)

# cross-browser - X.509 数字签名/加密工作流程/库建议？

> ID：13228106
> 
> 赞同：3
> 
> 时间：2012-11-05T08:00:57.090
> 
> 标签：cross-browser, cross-platform, public-key-encryption, digital-certificate

我的特定用例是我必须访问存储在客户端上的数字证书，并使用它们在客户端和服务器端执行签名、验证、加密和解密的任务。对于后面的部分，有很多很多的解决方案。症结在于能够访问存储在客户端上的证书。

请注意，我说的是“存储在客户端上的证书”，这是故意含糊不清的。我不想将想法限制在系统存储、用户存储、浏览器存储、加密令牌、java 密钥存储等任何地方。

多年来，我使用了以下方法。在他们每个人旁边，我给出了优点和缺点。

1.  CAPICOM/ActiveX。虽然这是最容易使用的，但它限制了用户在 Windows 上使用 IE。更糟糕的是，它现在已被弃用，仅适用于 32 位。
2.  Java 小程序。这是跨平台和跨浏览器的，但浏览器中的 java 并不像人们希望的那样普遍，并且正在迅速消失（显然 Apple 最近删除了它）。因此，让用户下载和安装 JRE 更加麻烦。此外，用户必须执行相对技术性的任务，即为签名者设置无限强度的加密扩展才能工作。

我听说过/想到过但进展不大的事情

1.  大多数 JavaScript 解决方案。他们实现了 RSA 算法，但他们没有办法访问客户端证书存储中的数字证书。他们中的大多数会生成一个新的密钥对。
2.  闪光/弹性。Flash/flex 似乎是最普遍的客户端技术。他们已经可以访问摄像头和麦克风等客户端硬件。如果他们可以访问证书存储区，那就太好了。
3.  微软网站上给出的 CAPICOM 的替代方案。它规定了 CAPICOM 的替代方案，这些替代方案主要是使用 .NET 框架做事。这对于桌面客户端非常有用。但是对于“脚本”，他们在“重要说明”中非常清楚地说明您必须编写自己的 activex 控件。这让我们回到了第一方。

我正在寻找的是一种方法来克服/解决访问客户端上的证书存储的主要问题。我不是在寻找关于 RSA 算法的讨论，或者为什么 PKI 是愚蠢的，或者是非对称加密的替代方案，或者使用 Web 应用程序以外的架构，或者在 Apple 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:07:06.810

我最好的选择仍然是小程序，因为这可能是最跨平台的东西。或者，我可以开发自己的 activeX 并限制我的范围。

请记住，客户端证书访问是重要的安全事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:13:01.933

我们的 SecureBlackbox 库有一个分布式加密插件，可以满足您的需求。目前客户端模块进行签名，但可以由用户扩展（我们提供完整的源代码）。您将[在我们的网站](http://www.eldos.com/sbb/desc-dc.php)或[此 SO 答案](https://stackoverflow.com/a/10656679/47961)中找到附加组件的详细说明。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-14T07:32:20.270

[披露：我为 CoSign 工作]

将证书存储在客户端上的一种安全替代方法是将它们存储在安全的集中式 SSCD（安全签名创建设备）上。本地证书（智能卡等）的一个问题是在客户端/服务器或基于 Web 的应用程序中安全地使用它们。

集中式 SSCD 可以非常巧妙地处理这个问题。用户仍然需要向SSCD**验证**自己的身份，但 SSCD 本身持有证书并进行签名。*身份验证步骤*可以包括 2 因素身份验证，包括一次性密码 (OTP)、生物识别等。我们有客户在做所有这些。

这个想法是拥有安全的客户端身份验证，但将安全签名集中作为网络上的一项服务。

请参阅此[说明](http://www.arx.com/digital-signature/cosign-central)。也可作为基于云的解决方案提供。

ps，此答案涵盖了如何安全登录基于 Web 的应用程序的更一般的问题。我同意它不包括使用用户的智能卡或客户端替代品进行签名的具体问题（OP 故意含糊不清）。

# adobe - Adobe flash CS6 ActionScript 2 中的抛物线

> ID：13228109
> 
> 赞同：1
> 
> 时间：2012-11-05T08:01:27.437
> 
> 标签：adobe, actionscript-2, flash-cs6

在学校，我一直在创建一个可以教你如何处理抛物线的游戏。唯一的问题是；我不知道如何在**Adob​​e flash cs6 ActionScript 2**中创建抛物线。我需要能够在“游戏中”插入一个完全插入时应该出现的抛物线公式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T14:26:12.440

我使用curveTo函数管理这个，它绘制二次贝塞尔曲线。所以这里是[贝塞尔](http://www.math.fsu.edu/~rabert/TeX/parabola/parabola.html)抛物线：

```
function drawLineOrCurve(mc_where,from,to,props,controlPoint){
    (props[2]==null)?props[2]=100:null;//bugsquash!
    mc_where.lineStyle(props[0],props[1],props[2]);
    mc_where.moveTo(from[0],from[1]);
    (controlPoint==null)?
    mc_where.lineTo(to[0],to[1]):
    mc_where.curveTo(controlPoint[0],controlPoint[1],to[0],to[1]);
    return [from[0],from[1],to[0],to[1],controlPoint[0],controlPoint[1]];
}

this.createEmptyMovieClip("tool",100);

function parabolaSlope(x,a,b,c){
//https://en.wikipedia.org/wiki/Parabola
    return a*x*x+x*b+c;
}

props=[2,0xff00ff]; //linestyle

a = 1;
b = 6;
c = 0;
x = 10; //max x value

from=[-x,parabolaSlope(x,a,b,c)];
to=[x,parabolaSlope(x,a,b,c)];
controlPoint=[0,-parabolaSlope(x,a,b,c)]; //[this is why control point is negative here][2]
//

drawLineOrCurve(tool,from,to,props,controlPoint); //draw it

trace("(x,y)from "+tool._x+":"+tool._y+" to "+x+":"+parabolaSlope(x,a,b,c));

tool._x=Stage.width/2; //center movieclip
tool._y=Stage.width/2;
tool._rotation = 180; //flash has inverted Y axis
scaleFactor = Stage.height/parabolaSlope(x,a,b,c)*100;
tool._yscale = tool._xscale = scaleFactor; 
```

[这就是控制点在这里为负的原因](http://apex.infogridpacific.com/dcp/svg-primitives-parabolas.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T17:55:25.533

您需要一个字段来输入方程式。将这个字段连接到我之前给出的代码，以获得完全回答的问题。

```
tool._yscale = tool._xscale = 100//scaleFactor;
/////////////////////////////////////
//GUI
_root.createEmptyMovieClip("texte",102);
texte.createTextField("formula",103,5,5,100,20);
texte.formula.text = "-2x^2+4x+8"//"place math here";//
texte.formula.type = "input";
texte.formula.border = true;
texte.formula.restrict = "0-9\\+\\x\\-\\^";
//mediate
var _a:Number = 0; //parsed coeficients
var _b:Number = 0; //will be stored
var _c:Number = 0; //here as numbers
//housekeeping
function forMe(i,from,to){return Number(ar[i].substring(from,to))}
//user gave us input
function parseInput(str){
//prepare values
            arr = str.split("-");
            ar = new Array();//temp
    if(arr.length>1){
        for(i=0;i<arr.length;i++){
            ((arr[i]!="")&&(i!=0))?ar[i]="-"+arr[i]:ar[i] ="+"+arr[i]}}
    else{ar=arr}
    for(i=0;i<ar.length;i++){
        arr[i] = ar[i].split("+")} //trace(arr.join());
        ar = arr.join().split(",");
    for(i=0;i<ar.length;i++){
        (ar[i]=="")?ar[i]="+":null;}
    //assign values
    for(i=0;i<ar.length;i++){
        hasX = ar[i].indexOf("x");//shorthands
        hasL = ar[i].indexOf("^");
        isNeg = ar[i].indexOf("-");

        if(hasX!=-1){
            if(hasL!=-1){
                if(isNeg!=-1){
                    a=-forMe(i,0,hasX);}
                else{
                    a=forMe(i,0,hasX);}}
            else{
                (isNeg!=-1)?b=-forMe(i,0,hasX):b=forMe(i,0,hasX);}}
        else{
            (isNeg!=-1)?c=-ar[i]:c=ar[i];}}
    //these need to be reassigned..
    from=[-x,parabolaSlope(x,a,b,c)];
    to=[x,parabolaSlope(x,a,b,c)];
    controlPoint=[0,-parabolaSlope(x,a,b,c)];
}
//event, might be a propper button, your choise!
onMouseUp=function(){
    parseInput(texte.formula.text);
    tool.clear();
    drawLineOrCurve(tool,from,to,props,controlPoint);
} 
```

as2 中没有 RexEx，我认为这里也不需要 Scale_factor。

# c - C - 对“sqrt”的未定义引用

> ID：13228111
> 
> 赞同：0
> 
> 时间：2012-11-05T08:01:43.047
> 
> 标签：c

> **可能重复：**
> [C 编程 sqrt 函数](https://stackoverflow.com/questions/4120592/c-programming-sqrt-function)

我在 C 语言中遇到了一个奇怪的问题。我已将库包含在标题中，例如该`pow(x,n)`函数也可以正常工作。另一方面，下一个代码根本不运行：

```
float calcArea(double edgeA){
    double s=edgeA;
    float area = sqrt(s);
    return area;
} 
```

但是当我更改`sqrt(s)`为`sqrt(45)`（或任何其他自然数）时，它不会产生任何问题。我还`sqrt()`多次检查了该函数，只要参数是变量，它仍然没有。

任何解决此问题的建议都会有所帮助，在此先感谢

**编辑：我正在使用 Eclipse**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T08:04:14.280

您应该告诉编译器链接数学库。在 Linux 上，您应该使用

```
 gcc -Wall -g yoursource.c -o yourprog -lm 
```

参数的顺序`gcc`很重要：首先是源文件，然后是目标文件，然后是从高层到低层的库。

至于为什么使用它不会发生错误`sqrt(42)`是因为`gcc`可能会不断折叠并内联它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T08:03:46.550

您应该在编译时链接数学库

```
-lm 
```

您没有说您使用的是哪个编译器，但对于 Visual Studio，您可以尝试以下操作：

[http://www.steptools.com/support/stdev_docs/help/settings_vc10.html#link](http://www.steptools.com/support/stdev_docs/help/settings_vc10.html#link)

编辑：对于日食，请参阅[帮助](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Freference%2Fcdt_u_prop_general_pns_lib.htm)

# java - Eclipse - 移动语句

> ID：13228112
> 
> 赞同：2
> 
> 时间：2012-11-05T08:01:49.680
> 
> 标签：java, eclipse, ide

有没有办法让 eclipse 模拟 Intellij 语句式 ctrl+shift+up ctrl+shift+down 行移动？（比如改变缩进，或移动代码块）？

UPD，请原谅，alt up/down 确实改变了缩进。但是接下来呢：

```
@Override
protected void onStart() {
    super.onStart();
    if(currentPath == null || currentPath.length() == 0) {
        showDirectoryView(settings.getRootUri());
    }       
} 
```

光标站在方法声明上，我使用 alt down

```
@Override
    super.onStart();
protected void onStart() {
    if(currentPath == null || currentPath.length() == 0) {
        showDirectoryView(settings.getRootUri());
    }       
} 
```

Intellij 只是将此方法与下一个方法交换，与代码块相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:08:20.353

`ALT + Up/Down Arrow`- 用于 Eclipse 中的行缩进。

*这将选择更多行并将它们全部移动。*

# windows - 在写入磁盘之前捕获对文件的写入并制作副本？

> ID：13228113
> 
> 赞同：3
> 
> 时间：2012-11-05T08:01:51.050
> 
> 标签：windows, filesystems, filesystemwatcher

我希望我的程序能够在另一个程序更改文件内容之前制作文件的副本。我查看了 FileSystemWatcher，但我认为这对我没有帮助，因为我没有看到任何关于能够捕捉或防止事件的事情。

我想到的一个解决方案是检测程序何时以写入权限打开文件，并在此时在内存中制作副本。我不知道如何检测文件何时被另一个程序打开。

万一我想要的结果不清楚，这里有一个例子。音频文件链接到系统上多个用户的音乐文件夹以节省磁盘空间。如果用户想要修改音乐文件的元数据，或对文件应用某种音频效果，则修改不应影响其他用户的副本。用户应在进行更改时自动获得自己的副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:11:28.173

感谢@RaymondChen 在评论中提到卷影复制服务！

这正是我所需要的。回到我原来的帖子中的例子；音频文件链接到用户目录后，我的程序可以创建卷的卷影副本，以便在更改链接文件后，我的程序可以恢复影子副本，并将修改后的文件移动到相应用户的目录。

# header - AFNetworking 似乎没有使用 AFJSONRequestOperation 发送授权标头

> ID：13228115
> 
> 赞同：5
> 
> 时间：2012-11-05T08:02:00.910
> 
> 标签：header, authorization, afnetworking

我正在尝试使用 AFNetworking 和 AFJSONRequestOperation 发送授权标头。如果我在 setAuthorizationHeaderWithToken 之后对 httpClient 进行 NSLog，它会显示它在标头中，但是当我检查它发送到的服务器时，它似乎没有收到 Authorization 标头（它接收其他部分）。

AFJSONRequestOperation 是否对未添加授权部分的标头执行某些操作？

 ````
NSURL *url = [NSURL URLWithString:kBaseURL];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

 NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"/" parameters:params];   

[httpClient setAuthorizationHeaderWithToken:@"test"];

AFJSONRequestOperation *operation = nil;

operation = [AFJSONRequestOperation
             JSONRequestOperationWithRequest:request
             success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

             }
             failure:^(NSURLRequest *request , NSHTTPURLResponse *response, NSError *error , id JSON ){

             }];

[operation start]; 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:46:36.273

您是否尝试过在`NSMutableURLRequest`使用 httpClient 创建（在此代码块中似乎不需要可变）之前添加标头？看起来您直到创建请求之后才添加令牌标头，在这种情况下，AFJSONRequestOperation 甚至从未看到标头，因为实际上在该函数的[源代码](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m#L397-399)中`AFHTTPClient`只是添加 HTTP 标头的便捷方法名称“授权”`

# ruby - 在 Ruby 中，我应该将大文件（由 4 个字符组成）视为文本还是二进制文件？

> ID：13228116
> 
> 赞同：0
> 
> 时间：2012-11-05T08:02:17.947
> 
> 标签：ruby, text, binary

我现在要在 Ruby 中操作大文件。

我要做的是将标题行添加到一个千兆字节大小的文件中，该文件包含一系列没有换行符的字符，并将结果输出到一个新文件中。（如下示例所示）。序列中的每个位置都可以有四个字符之一（a、c、g、t）

我的问题是

1.  我应该以二进制文件还是文本文件的形式打开千兆字节大小的文件和输出文件？

2.  我想知道一个示例代码。（如果可能的话，我不想一次将千兆字节大小的文件的所有数据加载到我的计算机内存中。）

谢谢。

* * *

示例 假设程序名称为 add-header-giga（第一个参数是 header-line，第二个参数指定输入文件名。输出文件名是 output-file）

```
>cat 千兆字节大小文件.txt
cctgcaggagcagagcaaagaggtggccatccgcatctttcgggctgccagtttcgctcctggaggctgtgcag....

>add-header-giga DNA-sequence-from-Homo-Sapiens giga-byte-size-file.txt

>cat 输出文件
来自智人的 DNA 序列
cctgcaggagcagagcaaagaggtggccatccgcatctttcgggctgccagtttcgctcctggaggctgtgcag....

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:22:45.640

如果没有换行符，那没关系。二进制与文本仅在对换行符的处理上有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:22:28.510

这样的事情可能会完成这项工作：

```
# Here you should check if you arguments are valid first

header = "#{ARGV[0]}\n"
file_to_read = ARGV[1]
file = IO.read(file_to_read)
open(file_to_read, 'w') { |f| f << header << file} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:36:03.503

```
....

outf = File.open("tagged_file.out", "w")
outf.write(hdr)

CHUNK = 65536
File.open(file_to_read, "r") do |inf|
    while buf = inf.read(CHUNK)
      outf.write(buf)
    end
end 
```

# xcode - 体系结构 i386 的未定义符号：ld：未找到体系结构 i386 的符号

> ID：13228118
> 
> 赞同：1
> 
> 时间：2012-11-05T08:02:45.107
> 
> 标签：xcode

在我的项目中搞砸了，所以我创建了新项目并在其中添加了与我之前的项目相同的文件，但编译后我收到以下错误。

```
Undefined symbols for architecture i386:  "_OBJC_CLASS_$_MainViewController", referenced from: objc-class-ref in HomeViewController.o ld: symbol(s) not found for architecture i386 
```

我尝试了一切，我清理并构建了。重置模拟器。即使清理了缓存，但它没有帮助。我使用的是 xcode 4.4.1，请问有人知道如何解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T00:02:56.067

看起来您的 MainViewController.m 文件未添加到目标中。单击左侧导航窗格中的文件。然后，在 Xcode 的右侧面板中，通过选中您的应用旁边的框，确保 MainViewController 在您的应用中具有目标成员资格。

# linq-to-sql - 在 Linq-to-SQL 中过滤时我无法获得适当的结果

> ID：13228126
> 
> 赞同：0
> 
> 时间：2012-11-05T08:03:22.687
> 
> 标签：linq-to-sql

我有以下可以编译的 Linq-to-SQL 代码，但为什么变量`products` 没有被填充？

```
NorthwindDataContext ndc= new NorthwindDataContext();

var countries= new []{"Uk", "France" ," Germany"};

var productCountries =  from product in ndc.Products
                        join supplier in ndc.Suppliers 
                            on product.SupplierID equals supplier.SupplierID
                        select new {Product=product, Country= supplier.Country};

var products = from productCountry in productCountries
               where countries.Contains(productCountry.Country)
               select productCountry.Product; 
```

我认为这是因为我必须`productCountries`首先使用 foreach 获取，我尝试这样做，将我使用的查询结果插入到`productCountries`类型列表中`Products`，但这不起作用。

你能帮我找出我怎样才能被`products`填满吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:50:07.513

首先对于查询使用 SQL Profiler。

还有关于 countries.Contains(productCountry.Country) 似乎这不正确的查询。

我还没有运行它，但查看查询它看起来如此。您需要将 where 条件放在表的列上，但是您在数组列表中执行。

# objective-c - removeWithCompletionHandler 错误

> ID：13228139
> 
> 赞同：7
> 
> 时间：2012-11-05T08:04:17.360
> 
> 标签：objective-c, ios, game-center

启动时，我试图通过在每个设备上调用此方法以编程方式清除我的设备之间的游戏中心服务器上的所有比赛：

```
/**
 *  called to authenticate the players game centre id
 */
- (void)authenticateLocalUser
{
    if (!self.gameCentreAvailable)          return;

    NSLog(@"Authenticating Local User.");

    if ([GKLocalPlayer localPlayer].authenticated == NO)
    {
        [[GKLocalPlayer localPlayer] setAuthenticateHandler:^(UIViewController* viewcontroller, NSError *error)
        {
            NSLog(@"Inside Authentication Handler.");

            //  if there was no error, and we got a valid view controller to display
            if (!error && viewcontroller)
            {
                //  get a handle to the app delegate
                AppDelegate *delegate       = [UIApplication sharedApplication].delegate;

                //  use the view controller in the app delegate to present the authentication view controller
                [delegate.viewController presentViewController:viewcontroller animated:YES completion:
                ^{
                    //  once the view controller has been displayed, register the change in authentication
                    [self authenticationChanged];
                }];

                //  set this class as the event handler delegate
                GKTurnBasedEventHandler *event  = [GKTurnBasedEventHandler sharedTurnBasedEventHandler];
                event.delegate                  = self;
            }

            //  load all of the matches the player is currently a part of
            [GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray *matches, NSError *error)
            {
                NSLog(@"Error loading matches: %@", error);

                //  for each match
                for (GKTurnBasedMatch *match in matches)
                {
                    //  log the id of the match
                    NSLog(@"ID of match we are removing: %@", match.matchID);

                    //  and then remove it
                    [match removeWithCompletionHandler:^(NSError *error)
                    {
                        NSLog(@"Error removing match: %@", error);
                    }];
                }
            }];
        }];
    }
    else
        NSLog(@"Already Authenticated.");
} 
```

但是，该方法不起作用，而是在控制台中收到此错误：

> 2012-11-05 08:32:39.699 纺纱 [6266:907] 删除匹配时出错：错误域 = GKErrorDomain 代码 = 17 “请求的操作无法完成，因为一个或多个参数无效。” UserInfo=0x1e5b2140 {NSLocalizedDescription=请求的操作无法完成，因为一个或多个参数无效。}

发生的唯一错误是在 removeWithCompletionHandler 内部：其他一切都很好，并且没有错误。

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:43:53.853

从 removeWithCompletionHandler 的参考资料中：

> 在本地玩家作为活跃参与者的比赛上调用此方法是一个编程错误。

[http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html)

您没有检查以确保匹配适合删除。您可能必须在“删除”之前结束用户的匹配。此外，这种方法通常是为了让用户选择删除游戏，而不是自动删除。

# c# - 正确的做法是： $attachment = $logdir +'\'+ $logFileName 在 PowerShell 中？

> ID：13228142
> 
> 赞同：0
> 
> 时间：2012-11-05T08:04:50.630
> 
> 标签：c#, .net, powershell

> **可能重复：**
> [如何规范化 PowerShell 中的路径？](https://stackoverflow.com/questions/495618/how-to-normalize-a-path-in-powershell)

我想在这个文件名构造中去掉 +'\'+ ：

```
$attachment = $logdir +'\'+ $logFileName 
```

在 PowerShell 脚本中。

PS中组合目录名和文件名的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T08:09:32.537

尝试：

```
$attachment = join-path -path $logdir -Childpath $logfilename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:37:28.127

有很多选择，@Christian 的方式是正式的方式。这是另一个使用变量扩展的选项：

```
$attachment = "$logdir\$logFileName" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:06:24.573

```
$attachment =  [IO.Path]::Combine($logdir, $logFileName) 
```

# excel - 从vbscript自动填充Excel文件中的Excel用户表单

> ID：13228146
> 
> 赞同：3
> 
> 时间：2012-11-05T08:05:31.737
> 
> 标签：excel, vba, vbscript, userform

我有一个 Excel 文件，其中包含宏、函数和用户表单，可帮助用户在此 Excel 文件中正确填写数据。我需要编写一个访问其中一个用户窗体的 VBScript。自动填充它。我知道如何调用工作簿中确实存在的 VBA 宏。

```
objExcel.Application.Run"'CAM0500040F10_SW_Quality_Assurance_Report_Template (05-11-2012).xlsm'!new_document()" 
```

但现在我需要能够从我的代码中填写用户表单。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:11:43.067

一种方法是使用`SendKeys`这样的功能

```
SendKeys "Value1{Tab}Value2{Return}" 
```

上面的代码将用字符串“Value1”填充第一个字段，然后焦点将转移（因为发送了 TAB）然后第二个字段将获得“Value2”。如果您需要按 Enter 键，那么您也可以这样做。

您可以在此处阅读有关 SendKeys 功能、可以键入的键等的更多信息 [http://msdn.microsoft.com/en-us/library/office/aa202943(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/office/aa202943(v=office.10).aspx)

# silverlight - 将自定义字体设置为 Web 浏览器控件，windows phone 7/ 7.5

> ID：13228147
> 
> 赞同：3
> 
> 时间：2012-11-05T08:05:31.907
> 
> 标签：silverlight, windows-phone-7, webbrowser-control, custom-font

对于我的 Windows Phone 应用程序，我需要加载一个网页（一篇博客文章）。所以我使用了网络浏览器控件并设置了 url。然后我需要为网页内容添加自定义字体。我坚持下去。我尝试将“FontFamily”属性添加到 Web 浏览器控件，但没有任何反应。任何人都知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:44:26.263

Windows Phone 7 和 7.5 上的 Internet Explorer 不支持自定义字体，例如 EOT、TTF/OTF 和 WOFF 字体。

[MSDN](http://msdn.microsoft.com/en-us/library/ff462082%28v=vs.92%29.aspx)上的来源：

> Internet Explorer Mobile 中不支持的功能：
> ...
> 可下载字体，例如 EOT、TTF/OTF 和 WOFF 字体

也许您应该下载博客文章内容并将其显示在像[RichTextBox](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.richtextbox%28v=vs.95%29.aspx)这样的 Silverlight 控件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:45:19.877

[可以在此处找到](http://blogs.msdn.com/b/iemobile/archive/2010/11/10/supported-fonts-on-ie-for-windows-phone-7.aspx)Windows Phone IE 浏览器支持的字体列表。这些是您唯一可用的字体，无法指定或加载不同的字体。用于呈现页面的字体由 HTML/CSS 决定，而不是控件的`FontFamily`属性`WebBrowser`。

# arrays - 如何在Matlab中找到与指定索引最近的索引

> ID：13228152
> 
> 赞同：7
> 
> 时间：2012-11-05T08:06:11.657
> 
> 标签：arrays, matlab, vector, indexing

我在 MATLAB 中有两个向量，A 和 B。B 包含一些索引（1 到结尾）。我有一个随机索引 R（在向量索引的范围内）。我想编写一个函数（或语句）来选择 A[z]，其中 z 是不包含在 B 中的与 R 最接近的数字（即索引）。

例子：

```
A = [2 3 6 1 9 7 4 5 8]
B = [3 4 5 6 7 8]
R = 5 
```

函数必须返回 3，因为最近的索引是 2，因为 5-2<9-5 并且 2 不在 B 中，所以 A[2] = 3;

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T08:25:51.290

改进雅各布的答案，这是正确的解决方案：

```
[result, z] = min(abs(R - setxor(B, 1:numel(A)))) 
```

在你的情况下，产生`z = 2`和`result = A(2) = 3`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:25:58.870

如果我理解正确，您可以先进行排除，以找到不在 B 中的索引，即`excl = A(setxor(B,1:length(A)))`. 然后很容易得到这样的最小值`excl(min(abs(R-excl)))`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:59:55.907

请注意 setdiff 和 setxor 函数对结果进行排序。

```
tmpSet = R - setdiff(1:numel(A),B);
[~,z] = min(abs(tmpSet));
z = tmpSet(z);
Result = A(R-z); 
```

问题中的相同示例：

```
A = [2 3 6 1 9 7 4 5 8]
B = [3 4 5 6 7 8]
R = 5

tmpSet = 5 - {1 2 9} = {4 3 -4}
z = 2
z = 3
Result = A(5-3) = A(2) = 3 
```

谢谢你的想法。

# javascript - jQuery 菜单 - 在调整大小时将 div 附加到另一个 div

> ID：13228156
> 
> 赞同：1
> 
> 时间：2012-11-05T08:06:25.450
> 
> 标签：javascript, jquery, html

我对以下菜单有疑问：

[http://jsfiddle.net/H4hxA/1/](http://jsfiddle.net/H4hxA/1/)

因此，脚本所做的是，当您调整 div 的大小时，当空间不足时，它会将主菜单项（框）放入隐藏的容器中（从颜色中可以看出）。在 div 的最后一点附加一个下拉 div，这样当点击时，隐藏的 div 就会显示出来。

```
$(document).ready(function(){
//call the method on load
methodToFixLayout();        

$(window).bind("resize", methodToFixLayout);

function methodToFixLayout( e ) {
    var tLengthHiddenIcons = 0;
    var tSublinksMain = 0;
    var sublinkWidth = 0;
    var totalIconWidth = 0;        
    var winWidth = 0;        
    var totalIconsWidth = 24; //icon width of the dropdown

    var memberContainerWidth = 0;        
    var totalMemberIconsWidth = 0;

    //remove element to position it at the bottom
    $("#pDropdown").remove();
    $("#profileMenuHolder div.clear").remove();
    $("#hiddenIcons div.clear").remove();
    $(".block_listing div.clear").remove();        

    $("#profileMenuContainer div.profile-sublink").each(function (index, domEle)
    {                        
        // domEle == this
        totalIconsWidth += $(domEle).width();
        winWidth = $('#profileMenuHolder').width();    
        if (winWidth - totalIconsWidth > 104)
        {    
            if($('#hiddenIcons').find(domEle).length == 1)
            {         
                $(domEle).css('background-color','#999')                
                $('#profileMenuHolder').append(domEle);
            }
        }         
        else
        {
            if($('#profileMenuHolder').find(domEle).length == 1){
                $(domEle).css('background-color','#FF0')    
                $(domEle).prependTo("#hiddenIcons");
            }
        }                
    });

    //if the hidden container is visible, enable the css for the dropdown on resize
    if($("#hiddenIcons").is(':visible'))
    {
        $('<div id="pDropdown" class="dropdown active">DROP</div>').appendTo("#profileMenuHolder");
    }
    else
    {
        $('<div id="pDropdown" class="dropdown">DROP</div>').appendTo("#profileMenuHolder");
    }
    //clear floats for both div containers
    $('<div class="clear"></div>').appendTo("#profileMenuHolder");
    $('<div class="clear"></div>').appendTo("#hiddenIcons");
    $('<div class="clear"></div>').appendTo(".block_listing");

    tLengthHiddenIcons = $('#hiddenIcons .profile-sublink').length;
    //only show the dropdown if the container width doesn't satisfy the icons
    if(tLengthHiddenIcons == 0)
    {            
        $('#pDropdown').css("display", "none");  
        $('#hiddenIcons').css("display", "none");
        //$('#profileMenuHolder').css("max-width", "1100px");              
    }
    else
    {
        $('#pDropdown').css("display", "block");  
        //$('#profileMenuHolder').css("max-width", "1150px");
    }
    //on click of the dropdown
    $("#pDropdown").click(function(){        
        jQuery('#hiddenIcons').toggle();
        jQuery('.arwdwn-icon').toggleClass('arwdwn-icon_active');
        jQuery('#pDropdown').toggleClass('active');
    });
}
}); 
```

的HTML：

```
<div id="profileMenuContainer">
        <div id="profileMenuHolder">
            <div class="profile-sublink">1</div>
            <div class="profile-sublink">2</div>
            <div class="profile-sublink">3</div>
            <div class="profile-sublink">4</div>
            <div class="profile-sublink">5</div>
            <div class="profile-sublink">6</div>
            <div class="profile-sublink">7</div>
            <div class="profile-sublink">8</div>
            <div class="profile-sublink">9</div>
            <div class="profile-sublink">10</div>
            <div class="profile-sublink">11</div>        
            <div id="pDropdown" class="dropdown">DROP</div>
        </div>

        <div id="hiddenIcons">
        </div>
    </div> 
```

CSS：

```
body{
        padding:0;
        margin:0;
    }
    #profileMenuHolder{background-color:#CFC; width:auto; display:block;}
    #hiddenIcons{background-color:#C09; max-width:400px; display:none; position:absolute;}
    .profile-sublink{background-color:#999; width:100px; height:100px; display:block; float:left; margin:0; padding:0;}    
    .clear{clear:both;}    
    .dropdown{display:none;float:left;background-color:#444; width:50px; height:50px;}
    #pDropdown.active{background-color:#111FFF;}

    #container{margin: 20px 300px 10px 200px;border:1px solid #111;}
    #profileMenuContainer{overflow: hidden;min-width:100px;}
    .image{float:left; width:155px; height:155px; border:1px solid #111;}
    .details{float: left;background-color:red;max-width:500px;} 
```

问题：

该脚本运行良好，但不幸的是它没有保持项目的顺序。我试图通过在循环中指定如果循环内的项目是选定的项目，则不要附加 div 来解决问题。我也尝试过 appendTo 和 prependTo div，但它仍然失去了位置。

我已经搜索了 3 天，但仍然找不到解决方案。我曾想过在这种情况下使用 sortable ，但是它以这种方式工作吗？希望我说清楚了，如果您无法理解脚本中的某些内容，我会更好地解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:03:05.000

它失去了位置，因为附加的元素`#hiddenIcons`保持在相同的位置，而其他项目位于顶部。你可以尝试这样的事情：http: [//jsfiddle.net/H4hxA/2/](http://jsfiddle.net/H4hxA/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:06:40.403

将此行更改`$(domEle).prependTo("#hiddenIcons");`为`$(domEle).append("#hiddenIcons");` 然后它将按您的意愿正常工作。对于 egs[测试小提琴](http://jsfiddle.net/H4hxA/3/)

# windows - 截屏后无法访问缓冲区数据

> ID：13228157
> 
> 赞同：0
> 
> 时间：2012-11-05T08:06:29.680
> 
> 标签：windows, graphics, buffer, gdi

我们正在尝试开发一种解决方案，其中需要远程监控来自 Windows XP 机器的桌面屏幕。

根据我们的经验，我们发现基于 GDI 的方法比 DirectX 前端缓冲区捕获更快。

在 GDI 中，我们得到屏幕的句柄，如下所示。

```
// Get the Desktop windows handle and device context

  hDesktopWnd=GetDesktopWindow();
  hDesktopDC=GetDC(hDesktopWnd);

// Get the handle to the existing DC and create a bitmap file object    

  HDC         hBmpFileDC=CreateCompatibleDC(hDesktopDC);
  HBITMAP     hBmpFileBitmap=CreateCompatibleBitmap(hDesktopDC,nWidth,nHeight);

//    Assign the object in Memory DC to the bitmap and perform a bitblt

  SelectObject(hBmpFileDC,hBmpFileBitmap);
  BitBlt(hBmpFileDC,0,0,nWidth,nHeight,hDesktopDC,0,0,SRCCOPY|CAPTUREBLT);

// Assign the bitmap handle to a CImage Object

  CImage m_temp;
  m_temp.Attach(hBmpFileBitmap);
  m_temp.Save("d:\\Images\\Image10.bmp"); 
```

此操作将 m_temp CImage 对象保存在给定路径的硬盘驱动器上，这意味着该对象实际上保存了来自屏幕的数据。但是在我的应用程序中，我想处理桌面缓冲区中的图像，我需要为其提供图像数据缓冲区指针。但是当我调用应该返回数据指针的函数 m_temp.GetBits() 时，我在那里得到 NULL 指针。（我可以看到 m_temp 持有正确的高度、宽度、位/像素数据值，但图像数据缓冲区指针为 NULL）

甚至像这样的功能

```
BITMAP bitmap;
GetObject(hBmpFileBitmap, sizeof(BITMAP), &bitmap);
BYTE *pucInputImage = (BYTE*) bitmap.bmBits;   -> Returns NULL 
```

或者

```
BYTE* pucImage = NULL;
GetBitmapBits(hBmpFileBitmap,nWidth*nHeight*4,(LPVOID)pucImage); 
```

在变量 pucImage 中也返回 NULL。唯一有效的是

```
pBuf=malloc(bmpInfo.bmiHeader.biSizeImage)
GetDIBits(hdc,hBitmap,0,bmpInfo.bmiHeader.biHeight,pBuf,&bmpInfo,DIB_RGB_COLORS); 
```

这里我们需要传递 pBuf 变量（预先分配了图像的大小），GetDIBits 将数据从 bitmpa 句柄复制到这个 pBuf 缓冲区中。这需要额外的 15 毫秒。

据我所知，在 bitblt 操作期间会发生数据传输，不知何故，我觉得我应该能够摆脱这种额外的数据传输，避免每帧 15 毫秒的延迟。

我想到的另一件事是因为桌面窗口需要对用户进行写保护，并且 HDC hBmpFileDC 是从 DesktopDC 派生的，它可能继承了原始 DC 的写保护属性。如果是这种情况，是否有某种方法可以为新创建的变量标记此写保护（如下所示）

```
 HDC         hBmpFileDC=CreateCompatibleDC(hDesktopDC);

  HBITMAP     hBmpFileBitmap=CreateCompatibleBitmap(hDesktopDC,nWidth,nHeight); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:23:36.443

这里有同样的问题，但在 VB 语言中。我认为问题在于我们在内存对象中创建了一个独立于设备的对象，但源是一个**DDB**（设备相关位图），因为桌面位图托管在 VRAM 中，它必须有一个 VRAM 指针，而不是 RAM，所以这样函数 like`GetObject`和 others 返回一个`null pointer`. `.bmwidth`, `.bmheight`, ,之类的所有其他内容`.bmtype`都可以。我对此感到非常沮丧，因为我需要将图像作为压缩+传输的流来处理。

# emacs - 组织模式：在抽屉中使用特殊属性

> ID：13228158
> 
> 赞同：2
> 
> 时间：2012-11-05T08:06:40.033
> 
> 标签：emacs, elisp, org-mode

[组织手册](http://orgmode.org/manual/Special-properties.html#Special-properties)说特殊属性*“不应用作属性抽屉中的键”*。但是，我想在更高级别上使用 org-mode，并且我想将所有特殊属性放在`:PROPERTIES:`抽屉中。

这可以用于许多原因，例如，我可以编写一个外部解析器，它可以理解 org-mode 文件，它只包含具有属性的条目，而无需了解 TODO、标签、优先级及其在标题中的语法. 这应该会改变所有 org-mode 命令的行为，这些命令通常遵循 ad hoc org-mode 语法。例如，`org-todo`将更改`TODO`抽屉中的属性，而不是更改标题，等等。

换句话说，**我想概括一下 org-mode 语法。我如何在理论和实践中做到这一点？我应该知道什么和做什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:18:08.833

唯一的方法（理论上和实践上）是重写 org-mode 来启用它。现有代码假定特殊属性（已关闭、已调度等）位于抽屉外，紧挨在标题下方，待办事项必须紧跟在星号和 :tags: 之后的第一行。标签应该最容易重新路由到抽屉，因为某些功能已经这样做了。关闭、计划和截止日期是明确定义和可移动的。将待办事项状态放在抽屉中可能是一项艰巨的工作。

# java - 多线程的执行顺序

> ID：13228164
> 
> 赞同：5
> 
> 时间：2012-11-05T08:06:58.733
> 
> 标签：java, multithreading

假设我们有这种情况：

```
class Stack{

public void main{

ChildThread1 t1 = new ChildThread1;
ChildThread1 t2 = new ChildThread1;
ChildThread1 t3 = new ChildThread1;

//then we make some ChildThread2 objects and some ChildThread3 objects

ChildThread2 s1 = new ChildThread2;
//...

ChildThread3 v1 = new ChildThread3;
//...

//now we let all threads start in mix order
t1.start();
v1.start();
//...

SOP("All threads are ready");

//then we let them run with join()
t1.join();
t2.join();
t3.join();

s1.join();
//...

v1.join();
//... 
```

每种类型的线程在运行时都会打印出自己独特的语句。

我注意到每次执行程序时，输出总是不同的。例如，来自 ChilThread1 t1 的语句将在输出中间打印而不是开始（因为 t1 首先开始）或者语句“所有线程都准备好”将在线程执行中间弹出（例如：ChilThread2 是'所有线程都准备好了' 跑步 ）

所以我试图找到答案，我找到了这个网站：[http](http://www.avajava.com/tutorials/lessons/how-do-i-use-threads-join-method.html) ://www.avajava.com/tutorials/lessons/how-do-i-use-threads-join-method.html 该网站基本上说没有保证订单使用 start() 时的执行时间

那么我是否可以假设这种奇怪的打印顺序是因为 start() 不保证执行顺序？这个原因是否也适用于“所有线程都准备好”的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T08:12:37.773

线程的全部意义在于它们可以同时执行。如果您想确保完成事情的特定顺序，您要么必须放弃使用线程，要么使用显式同步。

> 那么我是否可以假设这种奇怪的打印顺序是因为 start() 不保证执行顺序？

这是正确的。当你`start`是一个线程时，主线程和新创建的线程之间基本上存在竞争条件。这意味着对于两个线程之间发生的事情的相对顺序无话可说。如果要确保特定排序，请使用同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:12:20.030

当您启动一个线程时，启动的线程将与所有已经运行的线程并行运行。线程调度程序在可用处理器上分派各种线程，每个线程轮流获得一些处理器时间。但是处理器，分配给每个线程的顺序和时间取决于操作系统线程调度程序，您绝对无法保证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-16T04:43:30.330

保持线程执行顺序的简单方法是使用信号量

```
public class Semaphore {

int value;

public Semaphore(int intialValue) {
    this.value = intialValue;
}

public synchronized void p() {
    while (value <= 0) {
        try {
            this.wait();
        } catch (InterruptedException e) {
        }

    }
    value = value - 1;
}

public synchronized void v() {
    value = value + 1;
    this.notify();
} 
```

}

```
public class ThreadSync {

static Semaphore semaphore = new Semaphore(0);

public static void main(String[] args) {
    // t1 should be executed before t2
    Thread t1 = new Thread(new Runnable() {

        @Override
        public void run() {
            semaphore.p();
            System.out.println("executing " + Thread.currentThread().getName());
        }
    });
    Thread t2 = new Thread(new Runnable() {

        @Override
        public void run() {
            System.out.println("executing " + Thread.currentThread().getName());
            semaphore.v();
        }
    });

    t1.setName("Thread 1");
    t2.setName("Thread 2");
    t2.start();
    t1.start();

} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T08:12:00.740

> 那么我是否可以假设这种奇怪的打印顺序是因为 start() 不保证执行顺序？

是的。你说的对。

> 这个原因是否也适用于“所有线程都准备好”的问题？

是的。又对了。你`SOP`是由主线程运行的。所以，有可能在有机会执行它`t1`之前打印一些东西。`main``SOP`

# java - ZipOutputStream 离开 size=-1

> ID：13228168
> 
> 赞同：3
> 
> 时间：2012-11-05T08:07:06.663
> 
> 标签：java, io, zipoutputstream

我正在`ZipOutputStream`使用非常标准的代码创建一个 zip 文件。`ZipInputStream`出于某种原因，当我将其作为`ZipEntry`has读回时`size=-1`。文件名正确存储在`ZipEntry`.

（当我使用我的操作系统工具制作一个 zip 文件然后将其读回时，大小是正确的，所以我认为问题`ZipOutputStream`出在`ZipInputStream`.

上下文是一个 Spring MVC 控制器。

我究竟做错了什么？谢谢。

这是代码：

```
// export zip file
String file = "/Users/me/Desktop/test.jpg";
FileInputStream fis = new FileInputStream(file);
FileOutputStream fos = new FileOutputStream(file+".zip");
ZipOutputStream zos = new ZipOutputStream(fos);
zos.putNextEntry(new ZipEntry("test.jpg"));
byte[] buffer = new byte[1024];
int bytesRead;
while ((bytesRead = fis.read(buffer)) > 0) {
    zos.write(buffer, 0, bytesRead);
}
zos.closeEntry();
zos.close();
fis.close();

// import same file
String file2 = "/Users/me/Desktop/test.jpg.zip";
FileInputStream fis2 = new FileInputStream(file2);
ZipInputStream zis = new ZipInputStream(fis2);
ZipEntry entry = zis.getNextEntry();
// here: entry.getSize() = -1, zip.buf is an array of zeros... 
// but if I unzip the file on my OS I see that the original file has been zipped... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:18:05.607

您必须从流中获取下一个条目，如下例所示：

[http://www.roseindia.net/tutorial/java/corejava/zip/zipentry.html](http://www.roseindia.net/tutorial/java/corejava/zip/zipentry.html)

当您手动设置大小时，它肯定会给您一个结果，就像您显示的“64527”一样。你最好看看 zip 示例。他们会给你一个清晰的形象。另外：[从现有的 OutputStream 创建 Java-Zip-Archive](https://stackoverflow.com/questions/4016818/create-java-zip-archive-from-existing-outputstream)

试试看，像这样：

```
 String inputFileName = "test.txt";
        String zipFileName = "compressed.zip";

        //Create input and output streams
        FileInputStream inStream = new FileInputStream(inputFileName);
        ZipOutputStream outStream = new ZipOutputStream(new FileOutputStream(zipFileName));

        // Add a zip entry to the output stream
        outStream.putNextEntry(new ZipEntry(inputFileName));

        byte[] buffer = new byte[1024];
        int bytesRead;

        //Each chunk of data read from the input stream 
        //is written to the output stream
        while ((bytesRead = inStream.read(buffer)) > 0) {
            outStream.write(buffer, 0, bytesRead);
        }

        //Close zip entry and file streams
        outStream.closeEntry();

        outStream.close();
        inStream.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:09:06.273

似乎 entry.getSize() 根本不可靠：[Why ZipInputStream can't read the output of ZipOutputStream?](https://stackoverflow.com/questions/4169370/why-zipinputstream-cant-read-the-output-of-zipoutputstream)

上面的帖子提供了一个合适的解决方法。

# visual-studio-2010 - 如何以编程方式启用 Visual Studio 扩展

> ID：13228178
> 
> 赞同：2
> 
> 时间：2012-11-05T08:08:06.337
> 
> 标签：visual-studio-2010, vsix

我创建了一个 Visual Studio 扩展并将其打包到 Visual Studio 设置中。现在，当我安装设置时，vsix 已安装并且在扩展管理器窗口中也可以看到，但它处于禁用状态。我已经尝试过为扩展添加注册表项等方法......但同样没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:33:43.593

您应该将`ProvideAutoLoad`属性添加到您的包类并在加载时指定 UI 上下文。对于自动加载 vsix，你应该这样写：

```
[ProvideAutoLoad(VSConstants.UICONTEXT.NotBuildingAndNotDebugging_string)]
public sealed class MyVSIX : Package 
```

# javascript - 我需要验证一个复选框

> ID：13228180
> 
> 赞同：0
> 
> 时间：2012-11-05T08:08:25.597
> 
> 标签：javascript

这是我的代码：

```
<script>                        
function validate(form) {   
    fail = validate_department(form);
    if (fail == "") { 
        return true;
        } else { 
            alert(fail);
            return false;
        }
    }
</script>
<script> 
    function validate_department(form) {
        if(!(form.operations.checked == true) && !(form.marketing.checked == true) && !(form.training.checked == true)){ return "You must enter at least one of the following: marketing, training, or operations.\n"; 
        }
        return "";
    }   

</script>
<form method="post" action="checkbox.php" onSubmit="return validate(this)">
<input type="checkbox" name="operations" value="operations" /> Operations <br>
                        <input type="checkbox" name="marketing" value="marketing" /> Marketing <br>
                        <input type="checkbox" name="training" value="training" /> Training
<input id="submit" type="submit" name="submit" value="Signup" />                        
</form> 
```

如果我不检查任何内容，我想收到一条消息，告诉我我必须至少检查一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:06:16.463

试试这个`validate`功能。

```
function validate(form) {   
    fail = validate_department(form);
    if (fail == "") {
        for (var i = 0; i < form.elements.length; i++) {
            if (form.elements[i].type && (form.elements[i].type.toLowerCase() == 'checkbox')) {
                fail = "Please tick a checkbox at least one.";
                break;
            }
        }
    }
    if (fail != "") {
        alert(fail);
        return false;
    } else {
        return true;
    }
} 
```

# javascript - SSRS - 转到 URL - 添加 JavaScript 不起作用

> ID：13228183
> 
> 赞同：0
> 
> 时间：2012-11-05T08:08:32.857
> 
> 标签：javascript, ssrs-2008, reporting-services

> **可能重复：**
> [在新的空白窗口中打开报告链接 URL](https://stackoverflow.com/questions/2143295/open-report-link-url-in-new-blank-window)

我正在使用 SSRS 2008。

我的报告上有一个文本框，当我将 Action 属性更改为“转到 URL”并添加[http://www.example.com](http://www.example.com)时，它确实有效。但是，如果我尝试使用应该可以工作的 JavaScript，它就不会。

我已经尝试了所有这些，但这些都不起作用。

*   javascript:void(window.open(' [http://www.example.com](http://www.example.com) '))
*   javascript:history.go(-1)
*   javascript:void(window.open(' [http://www.example.com','_blank](http://www.example.com) '))
*   javascript:history.back(1)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-05T23:25:33.177

我不同意您的说法：“那应该可行”。

报告操作中的 IMO javascript 是一种“技术”（hack），产品不支持或供应商记录：http: [//msdn.microsoft.com/en-us/library/ms157159(v=sql.100)。 aspx](http://msdn.microsoft.com/en-us/library/ms157159(v=sql.100).aspx)

取决于各种因素，它可能会起作用，也可能不会起作用。

祝你好运！

# c# - 如何配置应用程序以在具有高 DPI 设置（例如 150%）的机器上正确运行？

> ID：13228185
> 
> 赞同：112
> 
> 时间：2012-11-05T08:08:57.787
> 
> 标签：c#, winforms, fonts, dpi, dpi-aware

我在 C# 中创建了一个简单的 Winforms 应用程序。当我在具有高 DPI 设置（例如 150%）的机器上运行应用程序时，应用程序会按比例放大。到现在为止还挺好！但不是用更大的字体大小渲染字体，所有文本也只是按比例放大。这当然会导致文本非常模糊（在按钮等所有控件上）。

Windows 不应该负责正确呈现文本吗？例如，我的应用程序的标题栏呈现清晰明了。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-05T08:37:17.103

一旦超过 100%（或勾选“XP 风格 DPI 缩放”复选框的 125%），Windows 默认会接管 UI 的缩放。它通过让您的应用程序将其输出呈现到位图并将该位图绘制到屏幕来实现。该位图的重新缩放使文本不可避免地看起来模糊。一种称为“DPI 虚拟化”的功能，它使旧程序可以在高分辨率显示器上使用。

您必须明确让它知道您可以通过将`<dpiAware>`元素添加到清单来处理更高的 DPI 设置。MSDN 页面[在这里，](http://msdn.microsoft.com/en-us/library/windows/desktop/ee308410%28v=vs.85%29.aspx)但它不完整，因为它省略了 UAC 设置。项目+添加新项目，选择“应用程序清单文件”。编辑清单文本或复制/粘贴：

```
<?xml version="1.0" encoding="utf-8"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0" xmlns:asmv3="urn:schemas-microsoft-com:asm.v3" >
    <assemblyIdentity version="1.0.0.0" name="MyApplication.app"/>
    <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
        <security>
            <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
                <requestedExecutionLevel level="asInvoker" uiAccess="false" />
            </requestedPrivileges>
        </security>
    </trustInfo>
    <asmv3:application>
        <asmv3:windowsSettings xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">
            <dpiAware>true</dpiAware>
        </asmv3:windowsSettings>
    </asmv3:application>
</assembly> 
```

您还可以在 Main() 方法中调用 SetProcessDPIAware()，例如，如果您使用 ClickOnce 进行部署，则必须这样做：

```
 [STAThread]
    static void Main() {
        if (Environment.OSVersion.Version.Major >= 6) SetProcessDPIAware();
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());             // Edit as needed
    }

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    private static extern bool SetProcessDPIAware(); 
```

* * *

更新，如果您使用 VS2015 Update 1 或更高版本，这个常见的需求最终会更容易一些。添加的manifest已经有相关指令了，去掉注释即可。

* * *

搜索关键字，以便我可以找到此帖子：dpiAware

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-12-04T05:58:40.127

可以以两种不同的模式开发应用程序。

第一个是声明我们的应用程序是非 DPI 感知的（不声明任何内容将默认为此）。在这种情况下，操作系统将以**预期的 96 DPI**渲染我们的应用程序，然后执行我们之前讨论的位图缩放。结果将是一个看起来模糊的应用程序，但布局正确。

第二个选项是将应用程序声明为可识别 DPI。在这种情况下，操作系统不会进行任何缩放，而是让您的应用程序根据屏幕的原始 DPI 进行渲染。在 per-monitor-DPI 环境中，您的应用程序将以所有屏幕中最高的 DPI 呈现，然后此位图将按比例缩小到每个显示器的适当大小。缩小比例会比放大比例带来更好的观看体验，但您可能仍会注意到一些模糊性。

如果您想避免这种情况，您必须将您的应用程序声明为可感知每个监视器的 DPI。然后你必须检测你的应用程序何时被拖过不同的显示器并根据当前显示器的 DPI 进行渲染。

声明 DPI 感知是在清单文件中完成的。

参考以下链接 [stackoverflow](https://stackoverflow.com/questions/4075802/creating-a-dpi-aware-application)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-13T08:10:45.167

使用 .NET Framework 4.7 和 Windows 10 Creators Update (1703) 或更高版本，您必须执行以下操作来为您的 Windows 窗体应用程序配置高 DPI 支持：

**声明与 Windows 10 的兼容性。**

为此，请将以下内容添加到您的`manifest`文件中：

```
<compatibility xmlns="urn:schemas-microsoft.com:compatibility.v1">
  <application>
    <!-- Windows 10 compatibility -->
    <supportedOS Id="{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}" />
  </application>
</compatibility> 
```

**`app.config`在文件中启用每个显示器的 DPI 感知。**

Windows 窗体引入了一个新的[System.Windows.Forms.ApplicationConfigurationSection](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/winforms/index)元素，以支持从 .NET Framework 4.7 开始添加的新功能和自定义。要利用支持高 DPI 的新功能，请将以下内容添加到您的应用程序配置文件中。

```
<System.Windows.Forms.ApplicationConfigurationSection>
  <add key="DpiAwareness" value="PerMonitorV2" />
</System.Windows.Forms.ApplicationConfigurationSection> 
```

**重要的**

在以前版本的 .NET Framework 中，您使用清单来添加高 DPI 支持。不再推荐这种方法，因为它会覆盖 app.config 文件中定义的设置。

**调用静态 EnableVisualStyles 方法。**

这应该是应用程序入口点中的第一个方法调用。例如：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form1());   
} 
```

这样做的好处是支持动态 DPI 场景，其中用户在启动 Windows 窗体应用程序后更改 DPI 或比例因子。

来源：[Windows 窗体中的高 DPI 支持](https://docs.microsoft.com/en-us/dotnet/framework/winforms/high-dpi-support-in-windows-forms)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-06T18:48:16.680

这些建议都没有对我有用，但是，在我`Form.Font = new`从 中删除 ...之后发生了一些事情`Form.Design.cs`，表单开始正确重新缩放，如果 Font 在构造函数中定义或根本没有定义，它就可以工作。为什么？其他人可能能够解释，我只能谈论我所做的更改，并花了几分钟时间弄清楚这是我正在处理的表单的根本原因。希望能帮助到你。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-21T00:22:49.107

至少从 Visual Studio 2017 开始，您只需添加一个清单文件并取消注释此部分：

```
<application xmlns="urn:schemas-microsoft-com:asm.v3">
    <windowsSettings>
        <dpiAware xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">true</dpiAware>
    </windowsSettings>
</application> 
```

# android - 如何在 Android 的 OpenGL ES 2.0 中对大纹理进行采样

> ID：13228188
> 
> 赞同：3
> 
> 时间：2012-11-05T08:09:05.563
> 
> 标签：android, opengl-es-2.0, glsl

我现在正在尝试使用片段着色器来处理纹理上的图像。但是，我发现片段着色器仅支持 10 位浮点数，因此当屏幕长度为 1280 像素时，我无法获取存储在像素中的值，因为我无法使用 10 位来采样 1280 像素.

我想知道如何准确地获得大纹理上的像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:29:43.147

浮点数有 3 种不同的精度格式。[OpenGL ES 着色语言参考](http://www.khronos.org/files/opengles_shading_language.pdf)说：

1.  `highp`: 16 位，浮点范围：-2^62 到 2^62，整数范围：-2^16 到 2^16
2.  `mediump`: 10 位，浮点范围：-2^14 到 2^14，整数范围：-2^10 到 2^10
3.  `lowp`: 8 位，浮点范围：-2 到 2，整数范围：-2^8 到 2^8

为了能够从 >1024x1024 纹理中采样，您必须`highp`通过将以下代码放在`GLSL`程序开头来切换精度。

```
precision highp float; 
```

# tomcat - Tomcat Realm 可以访问现有的 servlet

> ID：13228190
> 
> 赞同：0
> 
> 时间：2012-11-05T08:09:18.423
> 
> 标签：tomcat, servlets

我想实现可以从 servlet 类调用授权方法的自定义领域。该 servlet 部署到具有现有应用程序的服务器。

我想我可以从那个领域发送 http 请求，还是有更好的方法来进行这种通信？使用带有 rmi 的 servlet？通过 JNDI 查找获取 servlet？

有任何想法吗？

# android - android中的音频歌曲混合器以编程方式

> ID：13228196
> 
> 赞同：26
> 
> 时间：2012-11-05T08:09:56.527
> 
> 标签：android, audio, audio-player

我想创建一个混音器（DJ 音乐曲目）类的应用程序，它可以创建音频歌曲的 Dj 混音器。用户可以选择一个音乐歌曲轨道，该轨道可以与两个或多个单独的节奏、贝司或节拍轨道混合，以创建新的修改后的 Dj 音乐。

我对此进行了大量研究，但找不到任何想法或线索。

如果有人对此有任何想法或参考网址，请分享。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-12T11:07:37.513

Android 上没有内置库支持音频混合（将两个音频输入流合并为一个输出流）。支持音频混合的 Java`javax.sound`库没有移植到 Android - Google 小组与 Google 工程师 Diane Hackborn 关于不移植到 Android 的决定进行了一次有趣的[讨论](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/VD2V7ENFrgs)`javax.sound`。

看起来您必须从头开始开发自己的解决方案。关于如何将两个音频流合并为一个的 SO，有几个有用的答案：

[混合音频文件](https://stackoverflow.com/questions/2191408/mixing-audio-files)

[Android 中的音频编辑](https://stackoverflow.com/questions/8265494/audio-editing-in-android)

[Android - 将多个静态波形混合到一个 AudioTrack 中](https://stackoverflow.com/questions/11820802/android-mixing-multiple-static-waveforms-into-a-single-audiotrack)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T04:01:21.563

听起来最难的部分是一次播放多个曲目，其余的可以通过 UI 完成。一个可能对您有所帮助的链接是[如何同时播放多个 ogg 或 mp3 ..？](https://stackoverflow.com/questions/9866927/how-to-play-multiple-ogg-or-mp3-at-the-same-time)可以在[此处](http://developer.android.com/reference/android/media/SoundPool.html)找到 SoundPool 的文档，该文档可让您一次播放多个声音。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-01T05:06:30.373

已经晚了，但如果有人需要，可以使用[AudioMixer-android 。](https://github.com/rajib010/android_audio_mixer)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-18T05:27:08.483

```
File dir;
dir = new File(Environment.getExternalStorageDirectory().getAbsolutePath());
dir.mkdirs();

//Audio Mixer for two .raw file into single .wav file...
void AudioMixer() {
    File file_play1 = new File(dir, "Neww.raw");
    int shortSizeInBytes = Short.SIZE / Byte.SIZE;
    int bufferSizeInBytes = (int) (file_play1.length() / shortSizeInBytes);
    short[] audioData = new short[bufferSizeInBytes];

    try {
        InputStream inputStream = new FileInputStream(file_play1);
        BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);
        DataInputStream dataInputStream = new DataInputStream(bufferedInputStream);

        InputStream inputStream1 = getResources().openRawResource(R.raw.trainss); //Play form raw folder
        BufferedInputStream bufferedInputStream1 = new BufferedInputStream(inputStream1);
        DataInputStream dataInputStream1 = new DataInputStream(bufferedInputStream1);

        int i = 0;
        while (dataInputStream.available() > 0 && dataInputStream1.available() > 0) {
            audioData[i] = (short) (dataInputStream.readShort() + dataInputStream1.readShort());
            i++;
        }

        dataInputStream.close();
        dataInputStream1.close();
        AudioTrack audioTrack = new AudioTrack(
                AudioManager.STREAM_MUSIC,
                11025,
                AudioFormat.CHANNEL_CONFIGURATION_MONO,
                AudioFormat.ENCODING_PCM_16BIT,
                bufferSizeInBytes,
                AudioTrack.MODE_STREAM);
        audioTrack.write(audioData, 0, bufferSizeInBytes);

        //merge two .raw files in  single .raw file...
        File file_record = new File(dir, "testing.raw");
        try {
            OutputStream outputStream = new FileOutputStream(file_record);
            BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(outputStream);
            DataOutputStream dataOutputStream = new DataOutputStream(bufferedOutputStream);

            for (int j = 0; j < audioData.length; j++) {
                dataOutputStream.writeShort(audioData[j]);
            }
            dataOutputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        //Convert that .raw (testing.raw) file into .wav (testingNew.wav) file 
        File des = new File(dir, "testingNew.wav");
        try {
            rawToWave(file_record, des);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    }
}

//convert .raw file to .wav File...
private void rawToWave(final File rawFile, final File waveFile) throws IOException {
    byte[] rawData = new byte[(int) rawFile.length()];
    DataInputStream input = null;
    try {
        input = new DataInputStream(new FileInputStream(rawFile));
        input.read(rawData);
    } finally {
        if (input != null) {
            input.close();
        }
    }

    DataOutputStream output = null;
    try {
        output = new DataOutputStream(new FileOutputStream(waveFile));
        // WAVE header
        writeString(output, "RIFF"); // chunk id
        writeInt(output, 36 + rawData.length); // chunk size
        writeString(output, "WAVE"); // format
        writeString(output, "fmt "); // subchunk 1 id
        writeInt(output, 16); // subchunk 1 size
        writeShort(output, (short) 1); // audio format (1 = PCM)
        writeShort(output, (short) 1); // number of channels
        writeInt(output, SAMPLE_RATE); // sample rate
        writeInt(output, SAMPLE_RATE * 2); // byte rate
        writeShort(output, (short) 2); // block align
        writeShort(output, (short) 16); // bits per sample
        writeString(output, "data"); // subchunk 2 id
        writeInt(output, rawData.length); // subchunk 2 size
        // Audio data (conversion big endian -> little endian)
        short[] shorts = new short[rawData.length / 2];
        ByteBuffer.wrap(rawData).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().get(shorts);
        ByteBuffer bytes = ByteBuffer.allocate(shorts.length * 2);
        for (short s : shorts) {
            bytes.putShort(s);
        }
        output.write(bytes.array());
    } finally {
        if (output != null) {
            output.close();
        }
    }
}

private void writeInt(final DataOutputStream output, final int value) throws IOException {
    output.write(value >> 0);
    output.write(value >> 8);
    output.write(value >> 16);
    output.write(value >> 24);
}

private void writeShort(final DataOutputStream output, final short value) throws IOException {
    output.write(value >> 0);
    output.write(value >> 8);
}

private void writeString(final DataOutputStream output, final String value) throws IOException {
    for (int i = 0; i < value.length(); i++) {
        output.write(value.charAt(i));
    }
}

//playing merged file...
private void playWavFile() {
    MediaPlayer recorded_audio_in_sounds = new MediaPlayer();
    String outputFile = Environment.getExternalStorageDirectory().getAbsolutePath() + "/testingNew.wav";
    try {
        if (recorded_audio_in_sounds != null) {
            if (recorded_audio_in_sounds.isPlaying()) {
                recorded_audio_in_sounds.pause();
                recorded_audio_in_sounds.stop();
                recorded_audio_in_sounds.reset();
                recorded_audio_in_sounds.setDataSource(outputFile);
                recorded_audio_in_sounds.prepare();
                recorded_audio_in_sounds.setAudioStreamType(AudioManager.STREAM_MUSIC);
                recorded_audio_in_sounds.start();
                recorded_audio_in_sounds.start();
            } else {
                recorded_audio_in_sounds.reset();
                recorded_audio_in_sounds.setDataSource(outputFile);
                recorded_audio_in_sounds.prepare();
                recorded_audio_in_sounds.start();
                recorded_audio_in_sounds.setVolume(2.0f, 2.0f);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# php - Twitter API 用户查找 1000 个用户

> ID：13228197
> 
> 赞同：1
> 
> 时间：2012-11-05T08:09:59.737
> 
> 标签：php, mysql, twitter

我正在尝试使用[此 API 调用](http://api.twitter.com/1/users/lookup.format)从我的数据库中获取 1000 多个 Twitter 用户。但是，Twitter 查找每次调用只允许 100 个用户，那么如何使用 10 个调用呢？

如果我的数据库中有 2232 个用户，并且我想查找所有用户并获取他们的详细信息，该怎么做？将计算所有正在搜索的用户，将其分解为 100 个元素的数组，调用 100，并将响应添加回数据库，然后移动到下一个 100。

我正在使用`tmhOAuth`Twitter 库。

编辑：我能够使用此代码完成它，但我的下一个问题是如何将这些值绑定回我的帐户？因为 screen_name 是一个条目，而不是数组的 KEY，所以我该怎么做呢？

```
 $accounts = $this->accounts->getAll();
    $accounts_chunk = array_chunk($accounts,100);
    foreach($accounts_chunk as $accounts){
        $screen_names = "";
        $last_key = end(array_keys($accounts));
        foreach($accounts as $k => $account){
            $screen_names .= $account->screen_name;
            if($last_key == $k){
                $screen_names .= "";
            } else {
                $screen_names .= ",";
            }          
        }
            $code = $this->twitter->request('GET', $this->twitter->url("1/users/lookup"),array('screen_name' => $screen_names));
            echo "<pre>";print_r(json_decode($this->twitter->response));echo "</pre>";
    } 
```

但是如何使用这个更新数据库中的值..我做了一个检查，但响应的顺序总是改变，所以不能使用当前的键..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:40:28.767

嗨，这里有一些简单的步骤来完成这项任务

> 1：从您的数据库中获取屏幕名称，限制为 100
> 2：用逗号加载（用逗号连接它们）
> 3：将这 100 个发送给用户/查找调用并获取数据
> 4：（重要）如果您收到“速率限制”错误超过” THEN USE PROXY
> 代理将给您另一个机会，让您下次调用 100 个用户
> 5：解码 json 并将数据发送到 db（重要）如果您使用用户的 id 而不是屏幕名称，那么更新 db 将很容易

还有问题在这里留言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:21:56.033

您可以循环通过最大用户数，并且每百次循环通过一百个用户并在那里执行您的 Twitter 魔术。

```
$iNumUsers = 2232; // or a mysql_num_rows-like result;

for($i = 0; $i < $iNumUsers; $i++) {

  if($i % 100 == 0) {

    for($j = $i; $j < 100; $j++) {

      // your twitter-code here
    }   
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:50:42.563

Twitter [API](https://dev.twitter.com/docs/api/1.1/get/users/lookup)说

> 强烈建议您对较大的请求使用 POST。

因此，请尝试将您的 2,000 个 ID 发布给他们。

关于你问题的第二部分

> 响应的顺序总是改变，所以不能使用当前的键..

从您的用户 IDd 数组开始 -`$ids`

从 Twitter 获取响应为`$tl`

```
// Place the users into an array
$sortedUsers = array();
foreach ($tl as $user) {
    $user_id = $user->id;
    // $tl is *unsorted* - but $ids is *sorted*. So we place the users from $tl into a new array based on how they're sorted in $ids
    $key = array_search($user_id, $ids);
    $sortedUsers[$key] = $user;
}

    // Sort the array by key so the most recent is at the top
ksort($sortedUsers); 
```

# lua - Lua fork 并发进程

> ID：13228200
> 
> 赞同：4
> 
> 时间：2012-11-05T08:10:14.600
> 
> 标签：lua, fork

我想从 lua 脚本同时执行后台进程

喜欢 ：

```
a = io.popen("deploy.exp" .. ip1):read("*a")
b = io.popen("deploy.exp" .. ip2):read("*a") 
```

其中 a,b 是不断运行的进程。当我按上述方式执行此操作时，b 只会在 a 完成时运行。deploy.exp 脚本是一个expect 脚本，用于ssh 一些服务器，并执行一些命令。然后我需要从 a 和 b 获取一些文本。对此有任何想法吗？我尝试了 ExtensionProposal API。当我尝试时，我收到一条错误消息，上面写着：“ *** glibc detected****free()：下一个大小无效（快速）：0x08aa2300 ** * abort"。*

 *部分代码是

```
for k,v in pairs(single) do
command =  k .. " 1 " ..  table.concat(v, " ")
local out = io.pipe()
local pro = assert(os.spawn("./spaw.exp " .. command,{
      stdout = out,  
}))
if not proc then error("Failed to aprogrinate! "..tostring(err)) end
print(string.rep("#", 50))
local exitcode = proc:wait()
end 
```

有没有人对此有任何经验（或建议/我们应该在哪里看）？或者给我一个样品？谢谢

顺便说一句：我尝试了 luaposix，但我无法通过 posix.fork() 找到任何示例。有没有人可以分享一个？TKS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:14:09.530

posix.fork() 是[luaposix 库](https://github.com/luaposix/luaposix)的一部分，可以通过[luarocks](http://luarocks.org/)安装。它的工作方式与[fork(3)](http://linux.die.net/man/3/fork)大致相同；它创建父进程的副本，并且它们都将在调用 fork() 之后执行所有操作。fork() 的返回值在子进程中为 0，否则为刚刚生成的子进程的 PID。这是一个人为的例子：

```
local posix = require "posix"
local pid = posix.fork()

if pid == 0 then 
  -- this is the child process
  print(posix.getpid('pid') .. ": child process")

else 
  -- this is the parent process
  print(posix.getpid('pid') .. ": parent process")

  -- wait for the child process to finish
  posix.wait(pid) 

end

-- both processes get here
print(posix.getpid('pid') .. ": quitting") 
```

这应该输出如下内容：

```
$ lua fork.lua 
27219: parent process
27220: child process
27220: quitting
27219: quitting 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:14:14.013

您可能想尝试[Lua Lanes](http://kotisivu.dnainternet.net/askok/bin/lanes/)（或从[这里](https://github.com/LuaLanes/lanes)），它是 Lua 的可移植线程库。*

# java - Springs MVC JSON 响应并将其转换为 JS 对象

> ID：13228203
> 
> 赞同：2
> 
> 时间：2012-11-05T08:10:28.513
> 
> 标签：java, javascript, spring, jakarta-ee, spring-mvc

我有一个问题，如何从 Springs MVC 发送 JSON 对象，以便我可以将其转换为我的 HTML 页面上的 JavaScript 对象。

我以传统方式执行此操作：下面是 Java Servlet 的片段，它设置请求属性并将其转发到 JSP 页面。

```
 JSONObject jsonObj = new JSONObject();
   jsonObj.put("name","test");
   jsonObj.put("age",24);
   request.setAttribute("jsonObj",jsonObj);
   request.getRequestDispatcher("test.jsp").forward(request,response); 
```

在 JSP 中，我检索为：

```
 <script type="text/javascript">
    var jsonObj =<%=request.getAttribute("jsonObj"); %>;
    alert("name = "+jsonObj.name+" ; age = "+jsonObj.age); // This will output name and age from the JSON Object
   </script> 
```

所以我需要问的是如何在 Springs MVC 中做同样的事情。如何从 Dispatcher Servlet 发送 JSONObject，并将其转换为我的 JSP 页面中的 JS 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T08:41:51.970

使用 ObjectMapper 的一种简单方法。它将从您的对象创建一个 JSON 字符串。并且您可以将其发送到您的视图/jsp。

我放了一个我这样做的控制器的小例子（只是剪断了）。

```
@Controller
public class UsersSettingsController {

    @Autowired
    UserSettingsDefaultService userSettingsService;

    @RequestMapping(value="/userSettings/dynamic/userSettings", method=RequestMethod.GET)
    public ModelAndView get() throws Exception {
        ModelAndView mav = new ModelAndView();
        ObjectMapper mapper = new ObjectMapper();

    User user = (User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    UserSettings userSet = userSettingsService.getUserSettingsByUser(user);

    mav.addObject("userSettingsJSON", mapper.writeValueAsString(userSet));

    mav.setViewName("userSettings/dynamic/filter");

        return mav;
    }
} 
```

或者，您可以像在示例中那样一步一步地在您的 Contoller 中创建 JSON 对象。然后你不需要映射器，只需将字符串发送到你的视图。

在 JSP 中，您将这样的 json 字符串加载到 JS var 中：

```
var jsonString = '${userSettingsJSON}'; 
```

要从 JSON 字符串获取元素或进行解析，请参阅： http: [//www.json.org/js.html](http://www.json.org/js.html)。
我是一个 KnockOut 框架的粉丝，我会用它来做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:33:14.253

**我认为你应该使用ajax（例如jquery），以下是spring mvc**

```
@RequestMapping(value = "/admin/new/list", method = RequestMethod.GET)
@ResponseBody
public List<News> list()
{
  return newsDao.findAll();
} 
```

在 jsp 页面中，您可以使用 ajax util（例如 jquery）

```
$.ajax({
            type: "GET",
            url: '<c:url value="/admin/new/list"/>',
            cache:false,
            dataType :'json',
            success: function(data){
                 alert(data);               
           }
    }); 
```

数据是json对象不知道上面是不是你需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:30:47.220

根据您的要求，我建议您使用 JSON 作为数据类型的 AJAX 调用。

例如 ：

```
$.ajax({
                    url: "getFormatIdDescMap?compId="+compId,
                    global: false,
                    type: "POST",
                    dataType:"json",
                    contanttype:'text/json',
                    async:false,
                    error:function(){
                        alert("Error during retrieving the foramt ID List");
                    },
                    success: function(data){                                                
                        //REMOVE ALL THE OLD VALUES OF FORMAT DROP DOWN
                        removeDropDownVals('formatList');

                        var optn;
                        for(var index=0;index<data.formatKeys.length;index++){
                            optn = document.createElement("option");
                            document.getElementById("formatList").options.add(optn);
                            optn.text =data.formatDescs[index];
                            optn.value=data.formatKeys[index];  
                        }
                    }
                });

            }); 
```

在上面的代码中，我正在准备一个基于公司 ID 的新格式列表。您可以迭代响应。

它将根据您的要求提供响应文本。但这里请注意，.. 如果您在响应中获得 json 数组，它将包含方括号中的数据，如 ..[1,2,3] 并且如果您在 JSON 对象中获得响应，那么它将以卷曲显示{"data",[1,2,3]} 等大括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T09:22:38.110

一个更简单的方法是在 maven 中包含 Jackson 依赖项并使用 @ResponseBody 返回对象的 JSON 表示，而无需手动编写操作。

看看下面的例子，你不应该写任何 JSON 代码的翻译。

[http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/)

# javascript - 无法从地理编码回调/函数中提取结果

> ID：13228221
> 
> 赞同：0
> 
> 时间：2012-11-05T08:13:12.517
> 
> 标签：javascript, callback

我无法从以下函数中提取数据，该函数仅适用于作为下一行的警报（内容），但显然必须将其删除！请问我做错了什么？

```
var address = [];
var content;
geocoder.geocode({'latLng': Marker.getPosition()}, function(responses, status) {
    if (status == google.maps.GeocoderStatus.OK) {
        if (responses && responses.length > 0) {
            address = (responses[0].formatted_address).split(',');
            for (i =0; i < address.length; i++) {
                content += '<div>' + address[i] + '</div>';
            }
        }
    } 
});

content += content '<br>Last line</div>'; 
```

上述行根本不包括上述地理编码内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:14:11.060

回调是异步的，您只能在回调内部使用该值。

```
content += content '<br>Last line</div>'; 
```

将在回调触发之前执行。

[请阅读](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_get_and_use_the_server_response_from_an_AJAX_request.3F)有关处理 AJAX 获取的服务器数据的内容。

# python - 遍历xml在python中不起作用

> ID：13228223
> 
> 赞同：1
> 
> 时间：2012-11-05T08:13:32.717
> 
> 标签：python, xml, xml-parsing

我的 XML：

```
<animals>
  <animal name="fox" fullname="fullfox"></animal>
  <animal name="dog" fullname="halfdog"><food>milk</food><food>rice</food><food>meat</food>   </animal>
  <animal name="cow" fullname="doublecow"><food>grass</food></animal>
  <animal name="blabla" fullname="fullbla"></animal>
</animals> 
```

我正在尝试解析这个 XML 以获得与输出相同的 XML。

```
doc    = ET.parse("an.xml")
root = doc.getroot() #Returns the root element for this tree.
root_new  = ET.Element("animals") 
for child in root:
    name = child.attrib['name']
    fullname = child.attrib['fullname']

for g in root.findall("*/food"):
    animal    = ET.SubElement(root_new, "animal") 
    food     = ET.SubElement(animal, "food")   
    food.text = g.text
    animal.set("name",name)               
    animal.set("fullname",fullname) 

tree = ET.ElementTree(root_new)
tree.write(sys.stdout) 
```

但我只得到最后一个值

```
<animals>
  <animal fullname="fullbla" name="blabla"><food>milk</food></animal>
  <animal fullname="fullbla" name="blabla"><food>rice</food></animal>
  <animal fullname="fullbla" name="blabla"><food>meat</food></animal>
  <animal fullname="fullbla" name="blabla"><food>grass</food></animal>
</animals> 
```

而且食物节点也错了，如何像我输入的 XML 一样进行迭代？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:25:56.753

你需要一个嵌套循环：

```
for child in root:
    name             = child.attrib['name']
    fullname         = child.attrib['fullname']
    # create "animal" here
    animal    = ET.SubElement(root_new, "animal") 
    animal.set("name",name)               
    animal.set("fullname",fullname)
    for g in child.findall("food"):
        # create "food" here
        food     = ET.SubElement(animal, "food")   
        food.text = g.text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:27:24.677

你的代码应该是这样的

```
doc    = ET.parse("test.xml")
root = doc.getroot() #Returns the root element for this tree.
root_new  = ET.Element("animals") 
for child in root:
    name             = child.attrib['name']
    fullname         = child.attrib['fullname']
    animal    = ET.SubElement(root_new, "animal") 
    animal.set("name",name)               
    animal.set("fullname",fullname) 

    for g in child.findall("food"):
        food = ET.SubElement(animal, "food")   
        food.text = g.text

tree = ET.ElementTree(root_new)
tree.write(sys.stdout) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T08:22:55.107

有两个问题。第一个是你的缩进 - 我假设那些是嵌套循环。第二个问题是您正在使用`root.findall`，这意味着您将获取所有`food`项目，无论它们位于哪个节点。试试这个：

```
...
for child in root:
    name = child.attrib['name']
    fullname = child.attrib['fullname']
    animal = ET.SubElement(root_new, 'animal')
    for g in child.findall("food"):
        food = ET.SubElement(animal, "food")   
        food.text = g.text
        animal.set('name', name)               
        animal.set('fullname', fullname) 
```

# asp.net - favicon 未使用 ASP.net 在服务器端显示

> ID：13228226
> 
> 赞同：1
> 
> 时间：2012-11-05T08:14:05.867
> 
> 标签：asp.net, html, favicon

我像这样使用了图标

```
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="icon" href="favicon.ico" type="image/ico" /> 
```

但是当我在本地主机上运行时它没有显示。我写了这段代码，`merr.html`我在 localhost 主机上运行，​​它没有显示。如果我从 Windows 资源管理器中双击，则会显示该图标。你知道怎么解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:52:21.483

我用清除缓存浏览器（firefox）解决了这个问题，然后我重新启动浏览器并显示了图标。谢谢

# ios - 从不兼容的类型“double”分配给“double*”

> ID：13228230
> 
> 赞同：1
> 
> 时间：2012-11-05T08:14:53.493
> 
> 标签：ios, database, sqlite, double

我有一个 SQLite 数据库，其中包含一些 double 类型的字段，我必须提取此值并将它们放入实例变量中，但出现此错误

```
 Assigning to 'double *' from incompatible type 'double' 
```

这是代码：

数据库表.h

```
 @interface DatabaseTable : NSObject {
sqlite3 * database;

   }

   //........
   @property (nonatomic, assign)double *latitude; //latitude is a field of type double
   @property (nonatomic, assign)double *longitude; //longitude is a field of a type double

   @end 
```

数据库表.m

```
 //.....
    while (sqlite3_step(statement) == SQLITE_ROW) {

       DatabaseTable * rowTable =[[ChinaDatabaseTable alloc]init];
           //.......

           rowTable.latitude =sqlite3_column_double(statement, 15); //here the error
           rowTable.longitude =sqlite3_column_double(statement, 16);//here the error

           //.....
     } 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T08:19:36.050

您不需要`*`在 int、float、bool 等原始类型之前放置 a。

因此，将代码更改为：

```
 @property (nonatomic, assign)double latitude; //latitude is a field of type double
   @property (nonatomic, assign)double longitude; //longitude is a field of a type double 
```

如果您需要创建一个指针变量，那么您的代码就可以了。

但是您不能将值直接分配给原始类型的指针值。

如果您需要分配地址值，您需要这样做：

```
double temp = sqlite3_column_double(statement, 15);
rowTable.latitude = &temp; 
```

# ios - 如何将长整数时间转换为 NSString 或 NSDate 以显示时间？

> ID：13228232
> 
> 赞同：8
> 
> 时间：2012-11-05T08:14:57.747
> 
> 标签：ios, nsdate, long-integer

我得到了一个 Java 日期的序列号，它转换为长整数，例如“1352101337000”。我遇到的问题是如何将这个长整数分析回 NSDate 或 NSString 以便我可以清楚地知道序列号显示的时间。

有人对此案有解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T08:15:47.817

用这个，

```
NSTimeInterval timeInMiliseconds = [[NSDate date] timeIntervalSince1970]; 
```

要改回来，

```
NSDate* date = [NSDate dateWithTimeIntervalSince1970:timeInMiliseconds]; 
```

根据[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html)，

**NSTimeInterval：**用于指定时间间隔，以秒为单位。

*typedef double NSTimeInterval;*

它是双重类型。

要将日期转换为字符串，

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss zzz"];

//Optionally for time zone converstions
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"..."]];

NSString *stringFromDate = [formatter stringFromDate:myNSDateInstance];

[formatter release]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-08T10:54:50.000

# 迅速

此答案已针对 Swift 3 进行了更新，因此不再使用`NSDate`.

执行以下步骤将长整数转换为日期字符串。

```
// convert to seconds
let timeInMilliseconds = 1352101337001
let timeInSeconds = Double(timeInMilliseconds) / 1000

// get the Date
let dateTime = Date(timeIntervalSince1970: timeInSeconds)

// display the date and time
let formatter = DateFormatter()
formatter.timeStyle = .medium
formatter.dateStyle = .long
print(formatter.string(from: dateTime)) // November 5, 2012 at 3:42:17 PM 
```

# 笔记

*   由于自 1970 年以来 Java 日期`long`以毫秒为单位存储为整数，因此这是可行的。但是，在使用上述方法将任何旧整数转换为日期之前，请确保此假设成立。如果您[以秒为单位转换时间间隔，](https://stackoverflow.com/a/37699089/3681880)那么当然不要除以 1000。
*   还有其他方法可以进行转换并显示字符串。请参阅[这个更完整的解释](https://stackoverflow.com/a/33343958/3681880)。

# php - Magento 中的控制器覆盖

> ID：13228235
> 
> 赞同：2
> 
> 时间：2012-11-05T08:15:07.847
> 
> 标签：php, magento, overriding, magento-1.7, mage

你好朋友我需要超越 magento 核心控制器

我想覆盖一个`Mage\ImportExport\controllers\Adminhtml\ExportController.php`

在我的`community\compnyname\modulename\controllers\Adminhtml`

这是我的`config.xml in \compnyname\modulename\etc`

```
<?xml version="1.0" encoding="utf-8"?>
<config>
    <modules>
        <company_module>
            <version>1.0</version>
        </company_module>
    </modules>
    <global>
        <rewrite>
            <company_module>
                <from><![CDATA[#^/controller/adminhtml/#]]></from>
                <to>/controller/adminhtml/</to>
            </company_module>
        </rewrite>
    </global>
</config> 
```

这是我的控制器代码`\compnyname\modulename\controllers\Adminhtml\ExportController.php`

```
<?php
require_once('/Mage/ImportExport/controllers/Adminhtml/ExportController.php');
class company_module_ImportExport_Controller_Adminhtml_ExportController extends Mage_ImportExport_Adminhtml_ExportController
{
    function indexAction()
    {
        echo "i am called";die;
    }
}
?> 
```

请帮助我覆盖控制器

我的代码哪里有问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T10:11:24.587

自 Magento 1.3 (2009) 以来，不推荐使用这样的重写。[你可以在这里](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)阅读更多关于它的信息。

您想要做的是如下所示：

```
<admin>
    <routers>
        <adminhtml>
            <args>
                <modules>
                    <companyname_exportproduct before="Mage_ImportExport_Adminhtml">Companyname_ExportProduct_Adminhtml</companyname_exportproduct>
                </modules>
            </args>
        </adminhtml>
    </routers>
</admin> 
```

你的类名和要求看起来也有点不对劲。最好不要使用 php 结束标记来结束 php 类文件，因为它可能会意外包含一个空格，从而弄乱发送的标头顺序。

话虽如此，我会将您的类文件更改为：

```
<?php
require_once('Mage/ImportExport/controllers/Adminhtml/ExportController.php');
class Companyname_ExportProduct_Adminhtml_ExportController extends Mage_ImportExport_Adminhtml_ExportController
{
    function indexAction()
    {
        echo "i am called";die;
    }
} 
```

以防万一你忘记了我在 app/etc/modules 中包含了你必须拥有的文件以使你的模块处于活动状态：

```
<config>
    <modules>
        <Companyname_ExportProduct>
            <active>true</active>
            <codePool>community</codePool>
        </Companyname_ExportProduct>
    </modules>
</config> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:57:03.693

检查以下链接。**[链接 1](http://www.webspeaks.in/2011/03/override-controllers-in-magento.html)****[链接 2](http://lrysoft.wordpress.com/2011/12/09/magento-core-controller-over-ride-and-magento-route/)**希望对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-23T10:06:58.153

这是关于控制器包含路径的一个小通知。

如果打开**Magento 编译器模式**，此包含路径**可能会导致错误**。

 **```
require_once 'Mage/ImportExport/controllers/Adminhtml/ExportController.php'; 
```

取而代之的是，它**很好用**

```
require_once Mage::getModuleDir('controllers', 'Mage_ImportExport').DS.'Adminhtml_ExportController.php'; 
```

会更安全。希望这可以帮助..**

# android - 图库正在加载所有图像，但图库应一次加载一张图像

> ID：13228237
> 
> 赞同：1
> 
> 时间：2012-11-05T08:15:14.657
> 
> 标签：android, memory, bitmap, android-gallery

我创建了一个画廊，用于显示具有pinchzoom 的图像，并通过触摸转到下一个和上一个。我曾经访问过[https://github.com/kilaka/ImageViewZoom](https://github.com/kilaka/ImageViewZoom)库。我看到画廊首先上传了所有图像，然后它正在显示图像，这是一个很好的活动。但是画廊最多可以上传 4MB 的图片，如果图片大小超过 4MB，那么它会给我们带来 Bitmap outofmemory 错误。我已经习惯了 bitmap.recycle() 但它回收了所有图像。

在这里做任何方式，所以我的画廊从 sdcard 一张一张地上传图像，当我通过触摸转到下一张或上一张图像时，我当前的图像内存应该被删除。下一张图片应该上传到画廊内存中。所以我的画廊可以上传一些图片。

这是我的代码，此代码是来自访问[https://github.com/kilaka/ImageViewZoom](https://github.com/kilaka/ImageViewZoom)的链接 ：-

```
 gallery = new GalleryTouch(this);
       gallery = (GalleryTouch) findViewById(R.id.image);
       gallery.setSpacing(20);
       arrayAdapter = new ArrayAdapter<ImageView>(this, -1) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                bookM= position;        return getItem(position); 
                        }
        };

if(!(it.isEmpty() )) {
       Collections.sort(it); 
    for(int i=0; i<it.size();i++) {
            ImageViewTouch imageView = new ImageViewTouch(imageTouch.this);
            imageView.setLayoutParams(new Gallery.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            final Options options = new Options();
            options.outHeight = (int) scaleHeight; 
            options.outWidth = (int) scaleWidth;   
            options.inScaled = true;
            options.inPurgeable = true;
            options.inSampleSize = 2;
            String photoURL = it.get(i);
            bitmap = BitmapFactory.decodeFile(photoURL,options);
            imageView.setImageBitmap(bitmap);
                arrayAdapter.add(imageView); 
        }
       gallery.setAdapter(arrayAdapter); 
        } 
```

注意：- 在这段代码中，“it”是 List it 的一个变量；并列出具有来自 sd 卡的图像路径列表，例如 sdcard/images/one.jpg 、 sdcard/images/two.jpg ........ 等。

请专家帮助我，谢谢您的重要时间。

# jquery - Mobilize.js - 避免加载不必要的文件

> ID：13228239
> 
> 赞同：2
> 
> 时间：2012-11-05T08:15:18.470
> 
> 标签：jquery, html, jquery-mobile, mobile, mobilize.js

我正在使用[Mobilize.js 框架](http://mobilizejs.com/)并已移动我的网站。一切正常，网站在桌面和移动设备上看起来都符合预期。

我的网站的桌面版本包含一些*沉重*的背景图片。但是我没有在移动版本中包含背景或任何其他图像，因此即使在低带宽手机上也能尽可能快地加载。

但是我面临的**问题**是，当网站在手机中打开时，即使在移动版中不需要它，它仍然会加载*沉重的背景图像。*根据[**官方文档**](http://cdn.mobilizejs.com/docs/trunk/manual/introduction.html#how-it-works)，一旦检测到移动浏览器，它就应该停止加载图像和其他文件。

这是页面的结构`<head>`

```
<script src="js/jquery-1.8.2.min.js"></script>

<script>
    //to define the structure of the mobile version
    function mobilizeCustomInit()
    {
        ...
    }
</script>   

<!-- load the core mobilize js file -->
<script type="text/javascript" src="/mobilize/js/mobilize.core.min.js"></script> 

<!-- set the cdn options -->
<script type="text/javascript">
    mobilize.cdnOptions.baseURL = "http://mywebsite.com/mobilize";
</script>

<!-- css stylesheet - CSS FOR DESKTOP ONLY -->
<link rel="stylesheet" href="main.css"> 
```

从上面的`<head>`结构可以明显看出，我在 mobilize.js 文件之后包含了桌面样式表（其中定义了仅桌面背景图像样式）。因此 mobilize.js 文件将首先加载并执行，并且应该停止“main.css”文件（或至少在此 css 文件中使用的图像）加载，但它没有发生。

那么，当网站在移动设备中打开时，我应该怎么做才能阻止加载桌面版本的 css 文件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:22:55.143

参考此示例 html 页面 - [https://github.com/mobilizejs/mobilize.js/blob/master/integrations/example/sample.html](https://github.com/mobilizejs/mobilize.js/blob/master/integrations/example/sample.html)

你应该打电话

```
 <script type="text/javascript">

        // Called when mobilize.js is autoloading and init() is called
        function mobilizeCustomInit() {

             // Add new Javascript and CSS files to mobile
             // file loading list

             // Note: Slashdot at the beginning of the filename
             // indicates that the file path is relative to the HTML file location.
             // This is an internal trick of mobilize.js.
             mobilize.cdnOptions.javascriptBundles.push("./mobilize.yoursite.js");
             mobilize.cdnOptions.cssBundles.push("./mobile-style.css");                 
        }            
    </script> 
```

这样您就可以加载特定的移动 js 和 css。

# java - else 语法错误

> ID：13228240
> 
> 赞同：1
> 
> 时间：2012-11-05T08:15:22.340
> 
> 标签：java

可能有一个简单的问题，但是无论我在哪里搜索，似乎问题是 if 语句末尾的分号，问题是 eclipse 给了我语法错误，要求在 else if 语句中删除我的 else，这几乎发生时间对我来说，我最终会使用多个 IF。

```
 if(saleStatus == false || offerPrice <= currentOffer)
        {
            System.out.print("Error, sale is not open");
            return false;
        }

        else if(currentOffer >= reservePrice)
        {
            saleStatus = false;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:17:29.337

如果您指定它会返回某些内容，则您的函数可以采用的每条路径都**必须返回一个值。**

在这种情况下，您可能已将其指定为

```
access_modifier boolean function_name(params){
...             // ^return type 

} 
```

因此，所有代码路径都必须返回一个布尔值。 **在您的代码中，**如果它采用`else...`路径并退出而不返回任何内容，则这是不允许的。

```
 else if(currentOffer >= reservePrice)
        {
            saleStatus = false;
            //return something here (null if you don't care)
        }
//or return something here (which all code-paths hit) 
```

如果您使用像**[Eclipse](http://www.eclipse.org/)**这样的 IDE ，它可以提前警告您这样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:17:33.620

您的块中没有`return`声明。`else`如果在您的方法中声明了返回类型，则如果代码进入 else 块，该方法将不知道要返回什么。

在其中或在 (*) 之后放置一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:26:15.503

在第一个 if 中，您返回一个值，因此指定“else”没有意义，因为该方法的其余部分未执行。

一些开发人员为了代码质量避免在函数中使用多个返回语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T10:03:53.910

我将您的代码包装在一个类声明中，使用最少的附加声明，并在整个 if-else 结构之后返回，Eclipse 没有显示错误。我建议编写一个类似的最小完整程序来显示问题，并将其发布。

第二个测试不需要“else if”而不是“if”，但它应该是无害的。

```
 public class Bad {
    boolean saleStatus;
    int offerPrice;
    int currentOffer;
    int reservePrice;

    public  boolean problem() {
      if(saleStatus == false || offerPrice <= currentOffer)
      {
          System.out.print("Error, sale is not open");
          return false;
      }

      else if(currentOffer >= reservePrice)
      {
          saleStatus = false;
      }
      return true;
    } 
  } 
```

# iphone - 如何从 viewcontroller 到 tableviewcontroller

> ID：13228244
> 
> 赞同：1
> 
> 时间：2012-11-05T08:15:38.557
> 
> 标签：iphone, objective-c, ios, ipad, tableview

我有`UIViewController`3 个图像和 3 个按钮。我想要它，这样当你按下一个按钮时，它会显示一个可能的项目列表，`UITableViewController`其中可以填充`UIImages`. 但是，每个列表都会根据按下的按钮而有所不同。

我尝试过使用 segues 和模态函数，但没有成功。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:36:36.977

制作 3 组图像数组，在每个按钮上单击发送相应的数组，并`cell.imageview.image` 在 indexpath 的帮助下通过访问数组的每个位置为每个设置图像

# php - Facebook 400 错误请求我第二次使用应用程序

> ID：13228247
> 
> 赞同：0
> 
> 时间：2012-11-05T08:16:01.670
> 
> 标签：php, facebook

我只在移动设备上收到此错误。登录重定向正常工作，用户被正确重定向回应用程序。我没有错误。然后，如果我第二次访问该应用程序（第一次使用后的几秒钟）file_get_contents 会抛出一个 400 错误请求 - 这是代码 - 非常感谢帮助:-)

$code = $_REQUEST["code"]; if(empty($code)) { $my_url = 'https://m.facebook.com/apps/'.$app_id.'/?sid='.$surveyid.'&country='.$country; $dialog_url = "https://www.facebook.com/dialog/oauth?client_id="。$app_id 。“&redirect_uri=”。urlencode($my_url) 。"&scope=user_birthday";

```
 echo("<script> top.location.href='" . $dialog_url . "'</script>");
        exit();
        }

        $my_url = 'https://m.facebook.com/apps/'.$app_id.'/?sid='.$surveyid.'&country='.$country;
        $token_url = "https://graph.facebook.com/oauth/access_token?"
        . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
        . "&client_secret=" . $app_secret . "&code=" . $code;

        $response = file_get_contents($token_url);
        $params = null;
        parse_str($response, $params);

        $graph_url = "https://graph.facebook.com/me?access_token=" 
        . $params['access_token'];

        $user = json_decode(file_get_contents($graph_url));

        $me['id']=$user->id;
        $me['gender']=$user->gender;
        $me['first_name']=$user->first_name;
        $me['last_name']=$user->last_name;
        $me['birhtday']=$user->birthday; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:22:49.497

您是否第二次检查会话是否可用？

我看到会话变量可能丢失了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:32:35.663

> 然后，如果我第二次访问应用程序（第一次使用后的几秒钟）file_get_contents 会抛出 400 错误请求

如果您使用 PHP SDK 而不是“手动”对 API 执行请求，您会收到一个错误消息的异常，该错误消息应该解释正在发生的事情 - 请考虑在未来使用它，它会做很多事情更容易，包括调试。

* * *

至于当前的问题，您似乎`code`每次都在尝试将参数交换为新的访问令牌——但这在未来将不再可能，请参阅[https://developers.facebook.com/roadmap/#december -2012](https://developers.facebook.com/roadmap/#december-2012)，“OAuth 授权码的新安全限制”：

> 我们将只允许一次将授权代码交换为访问令牌

对于新创建的应用程序，此迁移默认启用 - 您现在可以禁用它，它应该可以按预期工作。但是在 2012 年 12 月 5 日之后，您必须有一个可以工作的解决方案，而无需尝试多次将代码交换为访问令牌。

# javascript - 条件 IE 语句 - 运行脚本

> ID：13228248
> 
> 赞同：-2
> 
> 时间：2012-11-05T08:16:20.640
> 
> 标签：javascript, internet-explorer, conditional-comments

我有一个蹩脚的问题：

如果我使用类似的东西：

```
<!--[if IE]>
     Random text
<![endif]--> 
```

我在 IE 中打开页面 (9) 我自然会看到“随机文本”的文字。一切都好。

如果我使用：

```
<!--[if IE]>
<script type="text/javascript">
    alert("aaa);
</script>
<![endif]--> 
```

没发生什么事。

我需要为 IE 运行一个特定的脚本...any1 可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T08:18:37.197

您的 Javascript 中有语法错误。试试这个：

```
<!--[if IE]>
<script type="text/javascript">
    alert("aaa");
</script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:17:40.497

使用脚本检查它是否是 IE。
编辑：实际上在这里查看一些[答案](https://stackoverflow.com/questions/4411551/if-browser-is-internet-explorer-run-an-alternative-script-instead)，它们正是您想要的。
例如，一个人发布了这个解决方案，它使用了一种非常不同的方法

```
<script>runFancy = true;</script>
<!--[if IE]>
<script type="text/javascript">
    runFancy = false;
 </script> // <div>The HTML version for IE went here</div>
<![endif]--> 
```

# ios - UIView 作为 AlertView

> ID：13228250
> 
> 赞同：0
> 
> 时间：2012-11-05T08:16:39.140
> 
> 标签：ios, xcode

我正在做一个项目，我必须显示一个自定义警报视图，类似于![uiview-as-alertview](../Images/563d3b5f7223291121e80ab1b5f18c42.png)

我发现，自定义 UIAlertView 是一种错误的方法！所以实现它的方法是使用 UIView，它会像 UIAlertView 一样使用动画弹出和弹出。

我还看到了一些 SO [问题]：[如何自定义 iOS 警报视图？](https://stackoverflow.com/questions/2600779/how-can-i-customize-an-ios-alert-view)和[问题]：[UIView Popup like UIAlertView](https://stackoverflow.com/questions/6965795/uiview-popup-like-uialertview) 我仍然面临问题，比如 AlertView 没有出现。任何人都可以分享一些很好的教程。

//谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:21:13.757

系统`UIAlertView`会创建自己的`UIWindow`，因此它可以漂浮在您的正常`UIWindow`. 您可能想尝试这种方法。如果你这样做了，你可能会在[这个答案中找到一些关于使用 extra `UIWindow`s 的](https://stackoverflow.com/a/8239705/77567)有用提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:54:00.877

您可以使用**模态视图控制器**

模态视图控制器只是一个以模态形式呈现的 UIViewController 类。

要以模态方式呈现视图控制器，您可以使用以下方法：

```
- (void)presentModalViewController:(UIViewController *)modalViewController animated:(BOOL)animated; 
```

将 Frame 更改为 50% 的视图，您可以对其应用不同的动画以进行表示。

以下是可用的模态过渡样式

```
yourModelViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
yourModelViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
yourModelViewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
yourModelViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl; 
```

**示例代码：**

```
UIViewController *controller = [[MyViewController alloc] init];
controller.frame = yourFrame;
UIViewAnimationTransition trans = UIViewAnimationTransitionCurlUp;
[UIView beginAnimations: nil context: nil];
[UIView setAnimationTransition: trans forView: [self window] cache: YES];
[self.view presentModalViewController: controller animated: NO];
[UIView commitAnimations]; 
```

# python - 子图是重叠的轴标签

> ID：13228254
> 
> 赞同：13
> 
> 时间：2012-11-05T08:16:49.693
> 
> 标签：python, layout, plot, matplotlib

我在 python 中创建了一个包含多个子图的图形。我还在图中的一些轴上添加了各种轴标签。举些例子：

```
plt.xlabel('Phase ($^\circ$)',fontsize=10) 
```

不过我注意到，当生成最终图形时，允许其他子图重叠并掩盖轴标签的文字。

有没有办法阻止这种情况发生？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-01-13T08:52:11.727

只需添加以下内容：

```
plt.tight_layout() 
```

我希望它有所帮助。[链接到文档。](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.tight_layout.html)

# windows-7 - 如何让bat在inno设置中以管理员身份运行

> ID：13228262
> 
> 赞同：0
> 
> 时间：2012-11-05T08:17:23.030
> 
> 标签：windows-7, inno-setup

> **可能重复：**
> [如何在 Windows 启动时以管理员身份自动运行程序？](https://stackoverflow.com/questions/5427673/how-to-run-a-program-automatically-as-admin-on-windows-startup)

我正在开发一个安装程序，它将在安装后运行 bat（将 bat 的文件名放在运行部分中），并将 bat 位置放在以下 reg 中，以便在用户登录时运行 bat。根：HKLM；子项： SOFTWARE\Microsoft\Windows\CurrentVersion\Run；

在 Win7 上，bat 在这两种情况下都不能以管理员身份运行，有什么方法可以让 bat 以管理员身份运行？

谢谢！

# jenkins - 如何发布构建结果？

> ID：13228264
> 
> 赞同：3
> 
> 时间：2012-11-05T08:17:33.173
> 
> 标签：jenkins

我对詹金斯有意见。我不知道如何发布构建结果。构建后，我创建了带有结果的 zip 文件，我想显示该 zip 文件的链接。
怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:25:52.590

在构建的配置页面上，您需要添加构建后选项“归档工件”。在文本字段中输入要归档的文件的路径。

# ruby-on-rails - 使用soap协议将ruby on rails系统连接到标准Microsoft Web服务时，我应该使用哪些库/方法？

> ID：13228269
> 
> 赞同：0
> 
> 时间：2012-11-05T08:18:33.953
> 
> 标签：ruby-on-rails, soap, heroku, webservice-client

我正在寻找与 API 连接（文档：[http](http://carsolize.com/carsolize_API_v2.5.pdf) ://carsolize.com/carsolize_API_v2.5.pdf ）。

要朝着好的方向开始，您将如何做到这一点？（我会使用什么宝石/方法？，任何提示都非常感谢！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:02:47.290

我推荐使用 Savon：[https](https://github.com/savonrb/savon) ://github.com/savonrb/savon它可以帮助您巧妙地创建 SOAP 请求。[在此处](http://savonrb.com/)查看文档。

# css - CSS div宽度不起作用

> ID：13228277
> 
> 赞同：37
> 
> 时间：2012-11-05T08:19:05.193
> 
> 标签：css, width

我有一个奇怪的问题。我的 div 的一个宽度不起作用。我的 CSS 就像

```
.product_info
{
    margin-top:10px;
    background:#444;
    width:850px;

}
.product_image
{
    width:350px;
    text-align:center;
    float:left;
    padding:8px;
    border:1px solid #e9e9e9;
    background:#fff;
}
.product_details
{
    float:left;
    width:400px;
    margin-left:25px;
    font-size:14px;
    font-family:"Helvetica";
    background:#d71414;
} 
```

我的 HTML 文件是

```
<div class="product_info">
                <div class="product_image">

                </div>

                <div class="product_details">
                    <div class="selection">
                    <form action="{$path_site}{$indeex_file}" method="post">
                    Size
                    {foreach name = feach item = k from = $product_size}
                        <input type="radio" name="size" value="{$k.product_size}" />{$k.product_size}
                    {/foreach}

                    </div>

                    <div class="selection">
                    No. of pieces <input type="text" name="quantity">

                    </div>
                    <div class="prc">
                        <span class="WebRupee">Rs.</span> {$product_info->product_cost}.00
                            </div>

                    <div class="buy_btn"><input type="submit" value="BUY" /></div>
                    </form>
                </div>
            </div> 
```

但正如您在附图中看到的那样，我`div` `product_info`的宽度不是`850px`，出了什么问题![在此处输入图像描述](../Images/566d41f5edd76ce3f2abc675c8d9aee9.png)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2018-06-27T18:33:09.860

`display: flex` **在父元素上**也改变了如何`width`和`height`工作。禁用收缩/增长`flex: 0 0 auto;`，或使用`min-width`and`max-width`代替。

width和height基本失去了原意，会充当a `flex-basis`，见[geddski: The Difference Between Width and Flex Basis](http://gedd.ski/post/the-difference-between-width-and-flex-basis/)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-01-30T09:39:15.667

尝试

显示：块

它应该工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-05-06T05:43:04.450

`display: inline-block;`为我工作

例子：

```
label {
    min-width: 90px;
    display: inline-block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T08:22:28.387

我希望你看起来像这样：- [http://tinkerbin.com/MU2CUpre](http://tinkerbin.com/MU2CUpre)

实际上，您已经`floating`在您的`child div's`和没有使用过`clear`您的`parent div`. 所以我在**父 div**`cleared`中有你的`parent div`通过，而这个子 div也可以正常工作......`overflow:hidden;`**`cleared``.product_details`**

 ****CSS**

```
.product_info
{
    margin-top:10px;
    background:#444;
    width:850px;
    overflow:hidden;
}

.product_details
{
    float:left;
    width:400px;
    margin-left:25px;
    font-size:14px;
    font-family:"Helvetica";
    background:#d71414;
    clear:both;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-18T14:06:39.600

使用该`clear: both;`物业。

```
.product_info {clear: both;} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-05T08:20:32.480

嗨，现在定义你的班级`.product_into` `overflow:hidden;`

***[现场演示](http://tinkerbin.com/fTZb7JgP)***

像这样

```
.product_info{
overflow:hidden;
} 
```

# =======

**或选项 2**

定义一个 CSS

**CSS**

```
.clr{
clear:both;
} 
```

把这个放在`div`最后一行**关闭**`.product_info` **课程**

```
<div class="product_info">
                <div class="product_image">

                </div>

                <div class="product_details">
                    <div class="selection">
                    <form action="{$path_site}{$indeex_file}" method="post">
                    Size
                    {foreach name = feach item = k from = $product_size}
                        <input type="radio" name="size" value="{$k.product_size}" />{$k.product_size}
                    {/foreach}

                    </div>

                    <div class="selection">
                    No. of pieces <input type="text" name="quantity">

                    </div>
                    <div class="prc">
                        <span class="WebRupee">Rs.</span> {$product_info->product_cost}.00
                            </div>

                    <div class="buy_btn"><input type="submit" value="BUY" /></div>
                    </form>
                </div>
                  <div class="clr"></div>
            </div> 
```

***[现场演示选项二](http://tinkerbin.com/N7Qm0GIV)*****

# iphone - 我们可以更新存储在 NSUserDefault 中的数组吗

> ID：13228280
> 
> 赞同：3
> 
> 时间：2012-11-05T08:19:16.143
> 
> 标签：iphone, ios, nsuserdefaults

我将值存储在一个数组中，并将该数组存储在 中`NSUserDefault`，然后我需要更新该数组可以这样做。如果那怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:53:40.080

首先检索当前数据。

```
 NSArray *tempNew = [[NSArray alloc]init];
    tempNew = [storeData objectForKey:@"accounts"];
    [tempArr addObjectsFromArray:tempNew]; 
```

更新：

```
 [tempArr addObject:str];
    [storeData setObject:tempArr forKey:@"accounts"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:29:35.183

`NSUserDefaults`就像是一样`NSDictionary`，因此您可以使用相同的方法通过将另一个对象设置为键值来更新字典`-setObject:forKey:`。

例如，当您尝试以下代码时

```
NSUserDefaults *usr=[NSUserDefaults standardUserDefaults];
NSArray *arr= [NSArray arrayWithObjects:[NSNumber numberWithInt:1],[NSNumber numberWithInt:2], nil];
[usr setObject:arr forKey:@"num"];
NSLog(@"usr %@",[usr arrayForKey:@"num"]);

NSUserDefaults *usr1=[NSUserDefaults standardUserDefaults];
NSArray *arr= [NSArray arrayWithObjects:[NSNumber numberWithInt:2],[NSNumber 
                          numberWithInt:3], nil];
[usr setObject:arr forKey:@"num"];
NSLog(@"user1 %@",[usr1 arrayForKey:@"num"]); 
```

你会得到

用户名 (1, 2) 用户名​​ (2, 3)

在控制台中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:36:30.833

只需将数组重新存储在用户默认值中并调用`synchronize`.

**例如：**

存储您的阵列...

```
NSMutableArray *yourArray = .... // whatever you did to create your data

// store your data in the NSUserDefaults
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:yourArray forKey:@"myArray"];
[defaults synchronize]; 
```

...然后在您的应用程序中的某个其他时间更新它！

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

// retrieve your data from the NSUserDefaults
NSMutableArray *yourArray = [defaults objectForKey:@"myArray"];

// edit the data, for example add some object.
[yourArray addObject:someNewObject]; 

// update the defaults
[defaults setObject:yourArray forKey:@"myArray"];
[defaults synchronize]; 
```

# android - 使用 PublicKey + Base64 加密对字符串进行加密

> ID：13228281
> 
> 赞同：0
> 
> 时间：2012-11-05T08:19:18.587
> 
> 标签：android, encryption, rsa, public-key

我有一个字符串格式的 RSA 公钥，我想使用与 Base 64 相同的字符串加密一个字符串。这是我为此使用的代码：

```
function encrypt(String pin){ 
  String key = "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAiOnM5t6w2ZD6dpA4/MzSTAOt0IYpnsmGSAIfIVgGntI+fI4wbvUvMIhaLN3fHrjyuNGFdYw+yuoXYkapajt6VTZJniaatSiq6bwQ7R0UAop6haFSAwjnmReqexJvcKyqUsTfcfFypPpsYRewh/48/jmc/6ND+ugxDd52prkPUrbj+nnO0z3DBoUCpgDMRvW2hWXv6kZ654gp+wIAQnxbdwRMy6FZbrHjkA3tc6U0CHK+KjxAfzWAK+yI+ofskM4qk50J7y9hUZ7lLikqWZWKiqh8xiDk1kgu+FIjVh+fylKpa3gWmPPn0fSpBJjuenc1OQVmZ718a3388DjzFlYOLwIDAQAB";
  byte[] sigBytes2 = Base64.decode(key, Base64.DEFAULT);
  Log.d("WS", "new key is: " + key);
  try {
    PublicKey publicKey = KeyFactory.getInstance("RSA")
        .generatePublic(new X509EncodedKeySpec(sigBytes2));
    encryptedBase64PIN = encode(publicKey, pin);
    Log.d("WSA", "encoded key is: " + encryptedBase64PIN);
    // getSecToken();
  } catch (Exception e) {
    e.printStackTrace();
  }
}

public static String encode(Key publicKey, String data)
    throws NoSuchAlgorithmException, NoSuchPaddingException,
    InvalidKeyException, IllegalBlockSizeException, BadPaddingException {

  byte[] byteData = data.getBytes(); // convert string to byte array

  Cipher cipher = Cipher.getInstance("RSA/ECB/NoPadding");       
  cipher.init(Cipher.ENCRYPT_MODE, publicKey);      
  byte[] encryptedByteData = cipher.doFinal(byteData);

  String s = Base64.encodeToString(encryptedByteData, Base64.NO_WRAP);
  return s; // convert encrypted byte array to string and return it
} 
```

当我将相同的输出发送到服务器时，它显示“无法解密 PIN”。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:25:37.287

> 当我将相同的输出发送到服务器时，它显示“无法解密 PIN”。为什么是这样？

这可能有*很多*原因。如果您有服务器解密的代码，请将其添加到您的问题中。

原因可能包括：

*   加密方式错误。你已经选择`RSA/ECB/NoPadding`了，但服务器可能期待别的东西？

*   Base64 编码——服务器肯定期待这个吗？

*   消息是“无法解密 PIN”。如果`data`您要加密的是 PIN，您确定您应该加密 ASCII 字节吗？

# jsf - 范围是什么 在 JSF 中？

> ID：13228282
> 
> 赞同：11
> 
> 时间：2012-11-05T08:19:21.013
> 
> 标签：jsf

我已经看到 2 次来自先前浏览的页面的变量可能会干扰或替换下游查看的页面中的变量（例如 ah:datatable "var"）。

那么 ui:param 的范围是什么？有没有办法控制它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T11:49:35.140

它基本上在 EL 上下文中设置了一个新的变量映射。另见[源代码`ParamHandler`](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-impl/2.1.0/com/sun/faces/facelets/tag/ui/ParamHandler.java)：

```
94     public void apply(FaceletContext ctx, UIComponent parent)
95             throws IOException {
96         String nameStr = this.name.getValue(ctx);
97         ValueExpression valueVE = this.value.getValueExpression(ctx,
98                 Object.class);
99         ctx.getVariableMapper().setVariable(nameStr, valueVE);
100    } 
```

注意第 99 行（如 Mojarra 2.1.0 中）。这会[`VariableMapper`从 EL 上下文中](http://docs.oracle.com/javaee/6/api/javax/el/ELContext.html#getVariableMapper%28%29)检索，然后使用[as 值](http://docs.oracle.com/javaee/6/api/javax/el/VariableMapper.html#setVariable%28java.lang.String,%20javax.el.ValueExpression%29)[在其上设置一个变量映射`ValueExpression`](http://docs.oracle.com/javaee/6/api/javax/el/VariableMapper.html#setVariable%28java.lang.String,%20javax.el.ValueExpression%29)。

这基本上具有“全球”范围。因此，如果变量名是“foo”，那么在同一个 EL 上下文（基本上是当前的 HTTP 请求）中评估的*每个*单个 EL 表达式都将由变量映射器中指定的值表达式评估. 这具有比`var`重复组件（如果有）更高的优先级。所以这可能确实会导致冲突和“空”的中继器。

最好给 the`<ui:param>`或 the`<h:dataTable var>`不同的名称。例如，您可以选择在所有`<ui:param>`(and `<c:set>`) 变量前面加上`_`or 。

# php - php中的选择框没有在jQuery中获取选定的值

> ID：13228295
> 
> 赞同：0
> 
> 时间：2012-11-05T08:20:10.963
> 
> 标签：php, jquery

我有一个选择框

```
<select id="addressbook_user" name="addressboook_user">
   <?php 
      $asql = "SELECT *  from demo_addressbook WHERE user_created_id IN(SELECT id FROM demo_user WHERE user_name = '$get_user_name') AND type = 1 ";                        
      //    $result = mysql_query($query);
      //    mysql_real_escape_string($asql);
      $aresult  = mysql_query($asql) or die (mysql_error());
      while($arow_list=mysql_fetch_assoc($aresult)){
   ?>                       
   <option value="<?php echo $arow_list['guest_name']; ?>"><?php echo $arow_list['guest_name']; ?></option>
   <?php                                    
      }
   ?>
</select> 
```

这是我获取此值的 jQuery 代码。

```
function save() {
    alert($("#addressboook_user").val());
    var selectVal = $('#addressboook_user :selected').val();
    alert(selectVal);
    var user = $("#addressboook_user").val();
}​ 
```

我的问题是选择框有选择的值，那么为什么我的jQuery代码警报始终显示未定义？

请帮帮我，真的很沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:22:32.063

您还没有使用选择框的 ID

改变

```
alert($("#addressboook_user").val()); 
```

到

```
alert($("#addressbook_user").val()); 
```

# android - 箭头键选择文本，如 swype

> ID：13228300
> 
> 赞同：0
> 
> 时间：2012-11-05T08:20:33.890
> 
> 标签：android

我正在学习 android 编程并承担了创建自己的 IME 的任务。我正在使用 LatinIME 作为基础并创建我自己的 SWYPE 键盘。

如何使用 SWYPE 中的箭头键实现选择文本？我已经实现了箭头键并且可以移动光标，但不知道如何进行选择。可能只是我必须设置一些我不知道的标志。

InputConnection.setSelection(start, end) 是一个可用的函数，但也不知道如何正确设置这些值。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:25:52.377

知道了。只需要发送：

```
sendDownUpKeyEvents(KeyEvent.KEYCODE_SHIFT_LEFT); 
```

* * *

8 小时 = 1 行。现在需要睡觉

# mysql - MySQL查询性能突然变慢

> ID：13228301
> 
> 赞同：1
> 
> 时间：2012-11-05T08:20:35.943
> 
> 标签：mysql, performance

我有一个 MySQL (InnoDB) 数据库，其中包含行数在 1 000 000 到 50 000 000 之间的表。晚上有一个聚合作业，它计算一些信息并将它们写入报告表。

拳头作业执行速度非常快。每个查询在 100 毫秒到 1 秒之间执行。之后，几乎每个查询都非常慢。

示例查询是：

```
SELECT count(*) FROM tableA 
  JOIN tableB ON tableA.id = tableB.tableA_id 
```

该查询的执行计划显示将使用两个表的索引。

重要的是 CPU、I/O、内存使用率非常低。MySQL 服务器版本：5.5.28，默认设置（刚刚安装在 Windows 7 开发人员计算机上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:53:28.803

从提供的信息很难判断。我假设您已经完成了 EXPLAIN 等操作。在以前的经验中，我的一个查询突然变慢了，我意识到某个字段突然填充了大量数据。可以尝试使用 count(tableA.id)，而不是使用 count(*)。

看看这是否有帮助或提供更多信息来调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:26:31.667

也许，这不是真正的查询，而是写入报告表，这很慢。我会尝试两件事：

*   衡量报告表`insert`的性能`update`
*   重新排序您的工作。取一个慢的到前面，看第一个作业快还是先跑的作业快

# stored-procedures - 如何识别 DB2 中存储过程的最后执行时间？

> ID：13228302
> 
> 赞同：1
> 
> 时间：2012-11-05T08:20:43.140
> 
> 标签：stored-procedures, db2

我想找出存储过程最后一次执行的时间，以便我可以删除未使用的存储过程。一种方法是扫描代码并找出已使用的存储过程列表并删除未使用的存储过程，因为存储过程的数量以千计，我想知道 DB2 中是否有一个选项可以轻松找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:18:12.670

您没有说您使用的是什么平台或版本的 DB2。

如果您在 DB2 for Linux/UNIX/Windows 上运行并且在 V9.7 或更高版本上，您可以查看 中的`LASTUSED`列`SYSCAT.PACKAGES`，该列可以`SYSCAT.PROCEDURES`通过 连接`SYSCAT.ROUTINEDEP`：

```
select 
   proc.procschema
  ,proc.procname
  ,pkg.lastused
from 
   syscat.procedures proc
  ,syscat.routinedep rd
  ,syscat.packages   pkg
where 
   proc.specificname =  rd.routinename
   and rd.bname      =  pkg.pkgname
   and pkg.lastused  <> '01/01/0001'
order by 
   pkg.lastused desc; 
```

如果从未执行过某个过程，则 LASTUSED 将具有值“01/01/0001”。上面的查询过滤掉了这些。

另外，请注意，您可能想要过滤，`PROCSCHEMA`所以您看不到所有系统存储过程......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:37:49.177

如果没有明确的日志记录或跟踪，就不可能为我们数据库的每个存储过程获取此信息。但是，我们可以通过使用 - sys.dm_exec_procedure_stats 获取当前缓存在服务器上的存储过程的此详细信息以及许多其他相关信息。这是一个系统动态视图，可返回缓存存储过程的聚合性能统计信息。

此视图为每个缓存的存储过程计划返回一行，并且该行的生命周期与存储过程保持缓存状态一样长。当从缓存中删除存储过程时，相应的行将从该视图中删除。

```
USE DBName    // replace with your DB name
GO  
SELECT   
 O.name,  
 PS.last_execution_time  
FROM   
 sys.dm_exec_procedure_stats PS   
INNER JOIN sys.objects O   
 ON O.[object_id] = PS.[object_id]   
GO 
```

上面的脚本将返回当前数据库的所有缓存存储过程的名称及其最后执行时间。

更多详情，请查看[这里](http://msdn.microsoft.com/en-us/library/cc280701.aspx)

在 DB2 中，我认为您可以安排存储过程在特定时间、间隔或发生指定事件时运行。管理任务调度程序管理这些请求。

程序

要安排存储过程的执行：

```
Add a task for the administrative task scheduler by using the ADMIN_TASK_ADD stored procedure. When you add your task, specify which stored procedure to run and when to run it. Use one of the following parameters or groups of parameters of ADMIN_TASK_ADD to control when the stored procedure is run: 
```

间隔 - 存储过程以指定的定期间隔执行。时间点 - 存储过程将在指定时间执行。trigger-task-name - 存储过程将在指定任务发生时执行。trigger-task-name trigger-task-cond trigger-task-code - 存储过程是在指定的任务和任务结果发生时执行。

或者，您还可以使用以下一个或多个参数来控制存储过程何时运行：

begin-timestamp 最早允许执行时间 end-timestamp 最新允许执行时间 max-invocations 最大执行次数

当存储过程运行的指定时间或事件发生时，管理任务调度程序调用 DB2® 中的存储过程。

1.  可选：任务执行完成后，使用 ADMIN_TASK_STATUS 函数检查状态。此函数返回一个表，其中一行指示每个计划任务的最后执行状态。如果计划任务是存储过程，则 JOB_ID、MAXRC、COMPLETION_TYPE、SYSTEM_ABENDCD 和 USER_ABENDCD 字段包含空值。在 DB2 错误的情况下，SQLCODE、SQLSTATE、SQLERRMC 和 SQLERRP 字段包含 DB2 通过调用存储过程返回的信息。

有关 ADMIN_TASK_STATUS 的更多信息，[请单击此处](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.admin/src/tpc/db2z_schedulingstoredprocedure.htm)

# linux - 如何在 Red Hat Linux 上将 Node.js 应用程序设置为服务

> ID：13228305
> 
> 赞同：2
> 
> 时间：2012-11-05T08:20:49.950
> 
> 标签：linux, node.js, service, redhat

我创建了一个 node.js 应用程序。它是一个带有 Express 框架的 Web 服务器。我可以用命令启动它`node server.js`。此应用程序部署在 Red Hat Enterprise 服务器上。

我希望这个应用程序可以：

1.  操作系统启动时自动启动。
2.  崩溃时自动重启。

我认为OS服务可以满足我的要求，对吧？是否有任何线索如何在 Red Hat 上将 Node.js 应用程序设置为服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:33:47.107

您可以使用[forever](https://github.com/nodejitsu/forever)`node.js`作为服务运行，并将 nginx webserver 作为前端服务器运行，更多详细信息请[点击此处](https://stackoverflow.com/questions/5009324/node-js-nginx-and-now)

# php - 在 PHP 中，为什么不显示解析错误？

> ID：13228306
> 
> 赞同：193
> 
> 时间：2012-11-05T08:20:50.870
> 
> 标签：php, syntax, parse-error

我正在运行以下[PHP](http://en.wikipedia.org/wiki/PHP)代码：

```
<?php 
    </script>
?> 
```

没有解析错误，**输出为**“ `?>`”（[示例](http://ideone.com/0FbOdx)）。

在类似的情况下，我确实收到了解析错误：

```
<?php 
    </div>
?> 
```

> 解析错误：语法错误，意外的 '<' in ...

为什么不`<?php </script> ?>`给出同样的错误？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-11-05T08:23:39.607

这一定是因为[有多种方式可以启动一段 PHP 代码](http://www.php.net/manual/en/language.basic-syntax.phpmode.php)：

*   `<? ... ?>`（称为`short_open_tag`）

*   `<?php ... ?>`（真的是标准）

*   `<script language="php"> ... </script>`（不建议）

*   `<% ... %>`（在 5.3.0 之后已弃用并删除了 ASP 样式标签）

显然，您可以以一种方式打开 PHP 块，并以另一种方式关闭它。不知道那个。

因此，在您的代码中，您打开了块使用`<?`但 PHP 识别`</script>`为更接近。发生的事情是：

```
<?php       <----- START PHP
</script>   <----- END PHP
?>          <----- JUST GARBAGE IN THE HTML 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-11-05T08:29:12.863

在 PHP 中，您可以使用`script`标签打开一个 PHP 块。

所以你可以使用

```
<script language="php">
    echo 'hello world';
</script> 
```

因此，在您的示例中，您将正常的打开标签 ,`<?php`与结束标签. 混合在一起`</script>`。所以解析器假定结束脚本标记之后的所有文本都是正常的`HTML`。

阅读*[从 HTML 中转义的](http://www.php.net/manual/en/language.basic-syntax.phpmode.php)*更多信息。

# c# - Windows 窗体中窗体销毁的成员组件

> ID：13228307
> 
> 赞同：1
> 
> 时间：2012-11-05T08:21:06.157
> 
> 标签：c#, winforms, multithreading

我在 C#/Windows 窗体中有一个项目，我有一个简单的表单`PictureBox`，我从后台线程绘制图像。如果我在绘图处于活动状态时关闭表单，则后台线程在尝试执行调用以更新位图时崩溃，这是非常合乎逻辑的。我尝试放置一个`AutoResetEvent`析构函数将等待的，以便析构函数在所有绘图完成并且后台线程知道它应该退出之前不会返回。但我得出的结论是崩溃发生在析构函数执行之前，所以我开始怀疑，表单的组件在什么时候被破坏了？我假设在析构函数之前？那么等待绘图完成的安全地方是什么？覆盖`Dispose()`并在那里做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:32:26.513

这就是我的想法，`Dispose(bool disposing)`Designer 文件中已经有一个方法，例如`MainForm.Designer.cs`.

我会在该方法的开头放置一些代码来关闭/完成后台线程。而 a`AutoResetEvent`或 a`ManualResetEvent`将是一个很好的方法。

# android - android应用程序的应用程序名称是否可以有两个对齐？

> ID：13228314
> 
> 赞同：3
> 
> 时间：2012-11-05T08:22:15.317
> 
> 标签：android, android-layout, android-ui

我很想在一个 android 应用程序的标题中实现两个对齐。根据我的要求，标题需要有一个左对齐的“名称”和一个右对齐的“版本号”。

到目前为止，我尝试做的是测试 AndroidManifest.xml 文件的应用程序标记的 label 属性是否接受 html，但它似乎不接受 :(。另外从其他一些类似的问题中，我了解到可以使用自定义主题更改标题的样式。但这并不能回答我的问题：

> “我们可以有两个不同的对齐方式（比如左和右），或者在这种情况下两个不同的主题，应用程序名称的各个部分？”

PS：下面附上所需应用程序标题的屏幕截图。

![在此处输入图像描述](../Images/b0a7fdbd9f023b14854c80957072ab8e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:59:29.323

您可以创建自定义标题栏 .. 这是示例代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.i_main);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.i_title);

    final TextView titleLeft = (TextView) findViewById(R.id.title_left);

    final TextView titleRight = (TextView) findViewById(R.id.title_right);
    titleLeft.setText("Checker");
    titleRight.setText("Version 5.44");

} 
```

**i_title.xml**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/title_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="app name" />

    <TextView
        android:id="@+id/title_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="app version" />

</RelativeLayout> 
```

# php - 评分帖子的实现算法

> ID：13228319
> 
> 赞同：0
> 
> 时间：2012-11-05T08:22:35.940
> 
> 标签：php, algorithm, sorting

我正在使用 PHP 开发算法。我有大约一百万个帖子。每个帖子都有很多评论，喜欢和观点。

例如：有 3 个帖子。

*   帖子 1 评分为 3000（我有一个固定公式来使用评论、喜欢和视图来计算此结果）
*   帖子 2：2000
*   帖子 3：1000

在存储这些帖子时，我使用 time() 节省了时间；也称为 Unix 时间戳

*   发帖1次：1352099640（评分3000）
*   发帖2次：1352099660（评分2000）
*   发帖3次：1352099680（评分1000）

我有以下条件来显示帖子；

1.  显示评分高的帖子
2.  如果帖子比其他帖子老，但评分比其他帖子高。在最短时间排名高的帖子下方显示此类帖子。

我正在考虑两件事。

1.  帖子评分高
2.  发布时间。

如果帖子在最短的时间内具有高利率，那么它将是该网站上的第一个帖子。如果 Post 在最长时间内的费率很高，那么它将是第二个帖子.. 我如何写下条件

我如何在 PHP 中编写这些条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:26:39.107

我认为这与其说是程序问题，不如说是设计问题。如果意图是评分越高，帖子显示的越高，然后检查对评分进行排序并从列表中降级，首先将评分最高的帖子放在顶部。如果这不是您想要的，那么这更多的是算法不清楚的问题。

# android - 活动未从广播接收器接收自定义广播意图

> ID：13228320
> 
> 赞同：0
> 
> 时间：2012-11-05T08:22:37.060
> 
> 标签：android, android-intent, broadcastreceiver

我有一个广播接收器（**BackgroundReceiver**），它监听包删除，然后将包名称广播到一个活动（**AnalyzeActivity**）

***背景接收器.java***

```
public static final String REMOVED_INTENT = "com.analyze.project.RemovedReceiver";

    public void onReceive(Context context, Intent intent) {
        String actionStr = intent.getAction();
        if (Intent.ACTION_PACKAGE_REMOVED.equals(actionStr)) {
            Uri uri = intent.getData();
            String pkg = uri != null ? uri.getSchemeSpecificPart() : null;
            Log.i("Logging Service", "Package Removed: " + pkg);
            //Toast.makeText(context, "Package Removed:" + pkg, Toast.LENGTH_SHORT).show();

            Intent c = new Intent();
            c.setAction(REMOVED_INTENT);
            c.putExtra("Package", pkg);
            context.sendBroadcast(c);
        }
    } 
```

我在我的**AnalyzeActivity**中动态注册接收器并监听来自**BackgroundReceiver的自定义广播意图**

***分析活动.java***

```
 @Override
        protected void onResume() {
            super.onResume();
            // Register Sync Recievers
            IntentFilter intentToReceiveFilter = new IntentFilter();
            intentToReceiveFilter.addAction(BackgroundReceiver.REMOVED_INTENT);
            this.registerReceiver(mIntentReceiver, intentToReceiveFilter, null, mHandler);
            mReceiversRegistered = true;

        }

    final BroadcastReceiver mIntentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String Package = intent.getStringExtra("Package");
        if (intent.getAction().equals(BackgroundReceiver.REMOVED_INTENT)) {
                Toast.makeText(context, "(A) Package Removed: " + Package, Toast.LENGTH_SHORT).show();
                Log.i("Package Removed", "(A) Package Removed: " + Package);
            }

        }
    }; 
```

但我的 Activity 似乎根本无法接收广播意图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:53:29.033

使用它在您的 onResume 中注册广播

```
IntentFilter filter = new IntentFilter(BackgroundReceiver.REMOVED_INTENT);

mIntentReceiver intentToReceiveFilter = new mIntentReceiver();

registerReceiver(intentToReceiveFilter,filter); 
```

并使用它从包删除广播接收器发送广播

```
Intent intent = new Intent(BackgroundReceiver.REMOVED_INTENT);
intent.putExtra("Package", pkg);
context.sendBroadcast(intent); 
```

请让我知道它是否解决了您的问题

# c - 强制其他翻译单元中的内联函数

> ID：13228326
> 
> 赞同：9
> 
> 时间：2012-11-05T08:23:14.300
> 
> 标签：c, gcc, inline

gcc 手册的这一部分非常晦涩，经过反复尝试，我无法理解 forceinline 属性的用法。

我正在定义一个对象和某些函数来操作该对象。这些函数中很少有可以使用原子指令，我希望编译器内联这些函数。但是我不想在头文件中编写这些函数并像在 linux 内核中那样使用“静态内联”声明它们。

有没有办法强制 gcc 从另一个翻译单元内联函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T08:25:25.040

您可以使用该`always_inline`属性，例如：

```
void foo () __attribute__((always_inline)); 
```

从[文档](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Function-Attributes.html)

> always_inline 通常，除非指定优化，否则函数不会内联。对于声明为内联的函数，即使未指定优化级别，此属性也会内联函数。

**注意1**`inline` ：如果使用`always_inline`属性，则无需使用

**注意2**：如果函数不能被内联，你会得到一个警告，例如，如果在编译时定义不可用，但是，在更高的优化下，gcc 仍然可以将它内联到调用者中，也有一个特定的开关：

```
-funit-at-a-time 
```

从[文档](http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/Optimize-Options.html)：

> 优化级别 -O2 及以上，特别是启用一次单元模式，这**允许编译器在编译函数时考虑从文件中的后续函数获得的信息**。在一次单元模式下一次将多个文件编译为单个输出文件**允许编译器在编译每个文件时使用从所有文件中获得的信息**。

**注意3**：不需要显式原型，因此您可以在函数定义中使用属性：

```
__attribute__((always_inline)) void foo() {
   //some code
} 
```

另请参阅此[讨论](http://gcc.gnu.org/ml/gcc-help/2007-01/msg00051.html)，它回答了您的一些问题。

# java - 将 JavaScript 中的 JavaObjects 调用到 Applet

> ID：13228332
> 
> 赞同：1
> 
> 时间：2012-11-05T08:24:15.393
> 
> 标签：java, javascript, jsp, applet

我正在寻找一种将保存在 Http Session 中的 JavaObjects 返回到 Applet 的方法。我正在使用 JSP，因此我可以通过以下方式在会话中返回对象：

```
<%request.getAttribute("Object")%>; 
```

所以现在我想将此对象返回给一个小程序方法

```
document.applet.method(<%=request.getAttribute("Object")%>); 
```

但这根本行不通。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:30:25.547

你可以简单地参考[这个链接](https://stackoverflow.com/questions/5766521/how-do-you-store-java-objects-in-httpsession)

它向您展示了如何使用会话对象来携带对象，尝试一下，它应该可以工作

# excel - Excel VBA。这个宏会产生随机排列吗？

> ID：13228334
> 
> 赞同：3
> 
> 时间：2012-11-05T08:24:16.713
> 
> 标签：excel, vba

我现在依靠这个宏来产生随机序列，我只是想检查我得到的序列是否确实是随机的（嗯，显然计算机可以做到的最好的随机序列）。

```
Sub Random()
For x = 1 To Selection.Rows.Count
   r = Int(Rnd(1) * (Selection.Rows.Count) + 1)
   For z = 1 To Selection.Columns.Count
       y = Selection.Cells(x, z).Formula
       Selection.Cells(x, z).Formula = Selection.Cells(r, z).Formula
       Selection.Cells(r, z).Formula = y
   Next z
Next x
End Sub 
```

很抱歉这个非常行人的问题，但我需要对此保持平静。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T08:25:22.797

在该行之后添加此`For`行

```
Randomize Timer 
```

这将确保您永远不会再次获得相同的随机数，因为它使用计时器作为生成数字随机性的种子。

你的代码应该是

```
Sub Random()
For x = 1 To Selection.Rows.Count
   Randomize Timer
   r = Int(Rnd(1) * (Selection.Rows.Count) + 1)
   For z = 1 To Selection.Columns.Count

       y = Selection.Cells(x, z).Formula
       Selection.Cells(x, z).Formula = Selection.Cells(r, z).Formula
       Selection.Cells(r, z).Formula = y
   Next z
Next x
End Sub 
```

# c - 建议一种修复气体和电荷计算的方法

> ID：13228335
> 
> 赞同：1
> 
> 时间：2012-11-05T08:24:22.250
> 
> 标签：c, function, pointers

```
#include <stdio.h>
#include <math.h>
#define BASELINE 75.6
#define CONST1 0.11430
#define CONST2 0.12989
#define CONST3 0.22944
#define CONST4 0.32146
#define GAS_BASELINE 12.6
#define CONST5 1.13309
#define CONST6 1.35349

void getInput( long *preElecRead, long *currElecRead, long *preGasRead, long *currGasRead);
double calcOutput( double *kwhConsumed, double *thermsConsumed, double *elecCharges, double *gasCharges, double *totalDue,
            long preElecRead, long currElecRead, long preGasRead, long currGasRead);
void printOutput(long preElecRead, long currElecRead, long preGasRead, long currGasRead,double kwhConsumed, double thermsConsumed,
             double elecCharges, double gasCharges, double totalDue );
double calcKWH(long preElecRead, long currElecRead);
double calcGasTherms(long preGasRead, long currGasRead);
double calcElecCharges(double* kwhConsumed);
double calcGasCharges(double thermsConsumed);
double round100th(double n);
double calcTotalDue(double* gasCharges, double* elecCharges);

int main(void)
{   //Declaration
    long preElecRead;
    long currElecRead;
    long preGasRead;
    long currGasRead;
    double kwhConsumed;
    double thermsConsumed;
    double elecCharges;
    double gasCharges;
    double totalDue;
    //Statement
    getInput(&preElecRead, &currElecRead, &preGasRead, &currGasRead);
    calcOutput(&kwhConsumed, &thermsConsumed, &elecCharges, &gasCharges, &totalDue, preElecRead,
            currElecRead, preGasRead, currGasRead);
    printOutput(preElecRead, currElecRead, preGasRead, currGasRead, kwhConsumed, thermsConsumed, elecCharges, gasCharges,totalDue);

    return 0;
}   //end main

void getInput( long *preElecRead, long *currElecRead, long *preGasRead, long *currGasRead)
{
    printf("Enter previous & current electric meter readings: ", preElecRead, currElecRead);
    scanf("%ld %ld", preElecRead, currElecRead);
    printf("Enter previous & current gas meter readings: ", preGasRead, currGasRead);
    scanf("%ld %ld", preGasRead, currGasRead);
}

double calcOutput( double *kwhConsumed, double *thermsConsumed, double *elecCharges, double *gasCharges, double *totalDue,
            long preElecRead, long currElecRead, long preGasRead, long currGasRead)
{
    *kwhConsumed = calcKWH(preElecRead, currElecRead);
    *thermsConsumed = calcGasTherms(preGasRead, currGasRead);
    *elecCharges = calcElecCharges(kwhConsumed);
    *gasCharges = calcGasCharges(*thermsConsumed);
    *totalDue =  calcTotalDue(gasCharges, elecCharges);
}

double calcKWH(long preElecRead, long currElecRead)
{
    double kwh;

    kwh = (double)currElecRead - (double)preElecRead;

    return kwh;
}

double calcGasTherms(long preGasRead, long currGasRead)
{
    double gas;

    gas = (double)currGasRead - (double)preGasRead;

    return gas;
}

double calcElecCharges(double* kwhConSumed)
{
    double elecCharge ;
    if (*kwhConSumed > 0 && *kwhConSumed <= BASELINE)
    {
        elecCharge = *kwhConSumed * CONST1;
    }
        else
            if ( *kwhConSumed > BASELINE && *kwhConSumed <= (1.3*BASELINE))
                {
                    elecCharge = *kwhConSumed * CONST2;
                }
                else
                   if ( *kwhConSumed > (1.3*BASELINE) && *kwhConSumed <= (2.0*BASELINE))
                    {
                        elecCharge = *kwhConSumed *  CONST3;
                    }
                        else
                            if (*kwhConSumed > 2.0*BASELINE)
                            {
                                elecCharge = *kwhConSumed * CONST4;
                            }
   return  round100th(elecCharge);
}
double calcGasCharges(double thermsConsumed)
{
    double gas;
    // check if therms < 0 and <= baseline
    if (thermsConsumed > 0 && thermsConsumed <= GAS_BASELINE) gas = thermsConsumed * CONST5;
        else
            if (thermsConsumed > GAS_BASELINE) gas = thermsConsumed * CONST6;
    return round100th(gas);

}

double round100th(double n)
{
    if(n > 0 )
    {
        n = (n + 50) / 100 * 100;
    }
    else
    {
        return n = 0;
    }
    return n;
}

double calcTotalDue(double* gasCharges, double* elecCharges)
{
    double i;

    i = (double)(*gasCharges)+ (double)(*elecCharges);// calc total

    return i;
}

void printOutput(long preElecRead, long currElecRead, long preGasRead, long currGasRead,double kwhConsumed, double thermsConsumed,
             double elecCharges, double gasCharges, double totalDue )
{
    printf("Electric:\n");
    printf("Previous: %ld, Current: %ld,     KWH Used: %0.0lf, Charges: %.2lf\n", preElecRead, currElecRead, kwhConsumed, elecCharges);

    printf("Gas:\n");
    printf("Previous: %ld, Current: %ld,  Therms Used: %0.0lf, Charges: %.2lf\n", preGasRead, currGasRead, thermsConsumed, gasCharges);

   printf("Total Charges: %60.2lf", totalDue);
} 
```

嗨，我对这段代码有疑问，我完成了代码，但不知何故，我的电荷和气体电荷输出与我教授使用的测试运行输出不同，我想我可能没有使用正确的公式计算气体电荷和电荷。谁能告诉我计算气体电荷和电荷的正确公式

这是我的输出

```
Enter previous & current electric meter readings: 80000
80500
Enter previous & current gas meter readings: 990
1030
Electric:
Previous: 80000, Current: 80500,     KWH Used: 500, Charges: 210.73
Gas:
Previous: 990, Current: 1030,  Therms Used: 40, Charges: 104.14
Total Charges:                                                       314.87
Process returned 0 (0x0)   execution time : 21.512 s
Press any key to continue. 
```

这是测试运行输出：

```
Enter previous & current electric meter readings: 80000
80500
Enter previous & current gas meter readings: 990
1030
Electric:
Previous: 80000, Current: 80500,     KWH Used: 500, Charges: 135.78
Gas:
Previous: 990, Current: 1030,  Therms Used: 40, Charges: 135.78
Total Charges:                                                       271.56 
```

如您所见，气体电荷和电荷的输出在使用相同输入时是不同的。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:35:11.727

你不能指望有人知道你想使用什么公式:) 但我认为你的问题在于代码而不是公式。尝试这个：

```
double calcElecCharges(double* kwhConSumed)
{
    double elecCharge ;
    if (*kwhConSumed > 0 && *kwhConSumed <= BASELINE)
    {
        elecCharge = *kwhConSumed * CONST1;
    }
    else
    {
        if ( *kwhConSumed > BASELINE && *kwhConSumed <= (1.3*BASELINE))
            {
                elecCharge = *kwhConSumed * CONST2;
            }
            else
            {
                if ( *kwhConSumed > (1.3*BASELINE) && *kwhConSumed <= (2.0*BASELINE))
                {
                    elecCharge = *kwhConSumed *  CONST3;
                }
                else if (*kwhConSumed > 2.0*BASELINE)
                {
                    elecCharge = *kwhConSumed * CONST4;
                }
                else 
                {
                  //*kwhConSumed < (1.3*BASELINE) || *kwhConSumed > (2.0*BASELINE)
                  //What now??
                }
            }
    }
   return  round100th(elecCharge);
}
double calcGasCharges(double thermsConsumed)
{
    double gas;
    // check if therms < 0 and <= baseline
    if (thermsConsumed > 0 && thermsConsumed <= GAS_BASELINE) 
        gas = thermsConsumed * CONST5;
    else if (thermsConsumed > GAS_BASELINE) 
        gas = thermsConsumed * CONST6;
    else
    {
      //thermsConsumed < 0
      //What now??
    }

    return round100th(gas);

} 
```

或者提供您从教授那里获得的公式，以便有人可以检查您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:55:44.977

先说一些高层的意见。

```
double calcOutput(...); 
```

不返回任何内容，并且由于它接收指向它应该影响的所有变量的指针，因此不需要返回任何内容。应该声明

```
void calcOutput(...); 
```

下一个，

```
double calcElecCharges(double* kwhConsumed); 
```

不会更改消耗的 KWh 的数量，因此传递指向它的指针是没有意义的。它的亲属`calcGasCharges()`将平原`double`作为论据，因此应该如此`calcElecCharges()`。

在`getInput()`中，您将无关的参数传递给`printf()`调用：

```
printf("Enter previous & current electric meter readings: ", preElecRead, currElecRead)
printf("Enter previous & current gas meter readings: ", preGasRead, currGasRead); 
```

这并没有真正的危害，因为`printf()`只是忽略了格式字符串所需的参数之外的参数，但这是一种不好的风格。

现在是一个实现错误，

```
double round100th(double n)
{
    if(n > 0 )
    {
        n = (n + 50) / 100 * 100;
    }
    else
    {
        return n = 0;
    }
    return n;
} 
```

几乎没有像盖子上所说的那样，它基本上将 50 添加到正值并返回 0 作为负值。后者可能是有意的，但对于前者，我相信你想将值四舍五入到小数点后两位，这 - 忽略浮点表示的更精细点 - 将通过乘以 100 来实现，四舍五入到最接近的整数除以 100，

```
if (n > 0) {
    n = round(100.0*n)/100.0;
} 
```

这仍然几乎不能产生所需的输出，但在不知道计算费用的实际公式应该是什么的情况下，我们无法诊断。

# microsoft-sync-framework - 在将客户端的数据库与 Sql server 数据库同步之前在 C# 中的自定义代码

> ID：13228336
> 
> 赞同：0
> 
> 时间：2012-11-05T08:24:33.140
> 
> 标签：microsoft-sync-framework

我正在使用 Microsoft Synch Service Framework 4.0 将 Sql server 数据库表与 Ipad 端的 SqlLite 数据库同步。

我想自定义 C# 代码。客户端将向我发送一些参数，例如带有同步服务的 SessionId。根据参数，代码将决定是否继续同步。现在，下面的代码用于初始化同步服务。我在哪里可以放置用于处理参数的自定义代码。基本上，

If (Session Id already exists) // 继续同步

else { 不要继续同步 }

我相信使用拦截器可以做到这一点：请求、响应或冲突拦截器。谁能提供一个例子，以便我可以在同步之前编写业务逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:56:32.930

我认为您应该编写一个请求拦截器。

这是关于如何编写一个的快速/基本[介绍。](http://blogs.msdn.com/b/rameshvanaparthy2/archive/2011/01/06/sync-upload-request-intercptor-for-business-logic-implementation-and-validation.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:45:40.927

好吧，我在从服务器下载更改时使用拦截器时遇到了一些问题。客户端通过标头向我发送“Server_Code”。

```
if (serverCode == "DEV") 
{ 
     foreach (IOfflineEntity entity in context.IncomingChanges) 
     { 
        context.RejectChange(entity, "Invalid Server"); 
     } 
} 
```

当客户端从服务器下载更改时，我得到 IncomingChanges 值 = 0。因此我不能拒绝更改。

如何使用过滤器进行同步。即同步将根据客户端发送的参数进行。如果客户端发送 SessionId，那么同步只会发生在那个特定的 SessionId 上。

有任何想法吗？

# csv - csv 我可以引用空字段吗

> ID：13228342
> 
> 赞同：2
> 
> 时间：2012-11-05T08:25:04.973
> 
> 标签：csv

我知道我可以像这样格式化 csv 文件

"值","va,lue1","值""ue"

我可以这样引用空值吗（第一个值是空值）

“”、“值 1”、“值 2”

谢谢。

# android - 使用syncadapter将联系人添加到电话簿后如何获取联系人的Contact_Id？

> ID：13228344
> 
> 赞同：1
> 
> 时间：2012-11-05T08:25:16.273
> 
> 标签：android, android-contacts, android-syncadapter

我正在使用 android 示例同步适配器示例代码将我的应用程序的联系人数据库与电话簿同步，并且我需要使用同步适配器插入后立即分配给他们的 Contact_Id 更新我的联系人数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-01T02:11:13.813

如果您使用 ContentResolver.insert 操作，则 id 嵌入在返回的 URI 中。你可以这样得到它：

```
Uri resultUri = ContentResolver.insert(ContactsContract.RawContacts.CONTENT_URI, contentValues);
if (rawContactId != null) {
    String rawContactId = String.valueOf(ContentUris.parseId(resultUri);
} 
```

# expressionengine - 基于时间的条件

> ID：13228346
> 
> 赞同：8
> 
> 时间：2012-11-05T08:25:21.080
> 
> 标签：expressionengine

是否可以通过服务器时间触发 EE 中的条件？

```
{if servertime == 'midnight to 13:00'}
      do this
{if:else}
      do something else
{/if} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T10:04:11.717

当然，您可以将`{current_time}`全局变量用于基本条件。使用您的示例，以下是我们检查时间是否在午夜和 13:00 之间的方法：

```
{if
    '{current_time format="%H%i"}' >= '0000' AND
    '{current_time format="%H%i"}' <= '1300'
}
    It's between 00:00 and 13:00
{if:else}
    It isn't.
{/if} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T08:56:06.367

如果您不反对在模板中使用一点 php，那么用户指南有一个基本示例可以帮助您：[http ://expressionengine.com/user_guide/modules/channel/channel_entries.html#start-on](http://expressionengine.com/user_guide/modules/channel/channel_entries.html#start-on)

还有这个插件[http://devot-ee.com/add-ons/cc-time-difference](http://devot-ee.com/add-ons/cc-time-difference)可能会派上用场。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T09:38:47.150

重申一下 Jean 所说的 - 如果您正在做这样的事情，您需要确保您的 DST（夏令时）配置正确。

如果您不使用 FocusLab Config - 只需将以下内容放入您的 config.php（在 system/expressionengine/config/ 中）

```
 $config['daylight_savings'] = ((bool) date('I')) ? 'y' : 'n'; 
```

这将为您动态排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T14:57:03.930

您还需要注意 DST 设置。解决此问题的一种方法是使用 FocusLab 的 Master Config 修复它，以便自动处理 DST。

# java - 根据条件在按钮单击时显示确认弹出窗口

> ID：13228351
> 
> 赞同：0
> 
> 时间：2012-11-05T08:25:30.750
> 
> 标签：java, jsf, primefaces

我有一个`p:commandButton`点击，我需要在列表中添加一些值。在我的托管 bean 中，我正在验证必须添加的值，如果它验证为 false，我必须显示一个确认弹出窗口。这是我的代码 -

```
<p:commandButton id="add" value="Add" type="submit"                                      action="#{bean.doAdd}" ajax="false"
update=":List"/> 
```

在 bean 中，单击“添加”按钮，

```
public String doAdd() throws Exception {
        if(response != null) {
            if(keyList.contains(response))  {
                if(!responseList.contains(response)) {
                    responseList.add(response);
                } 
            } else {
               //Have to display confirmation popup.
            }
            response = "";
        }

        return response;
    } 
```

我正在使用 jsf 2.0 和 primefaces 3.0。有人可以告诉我如何显示 bean 的弹出窗口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:05:26.280

您可以使用`RequestContext`在托管 bean 中运行 js 代码

确保它是一个 ajax 调用 - 没有`ajax="false"`

像这样

```
RequestContext context = RequestContext.getCurrentInstance();  
context.execute("YourDialogwidgetVar.show()"); 
```

我假设您定义了一些对话框...

```
<p:confirmDialog id="confirmDialog" message="Hello"  
                header="Header" widgetVar="YourDialogwidgetVar">  
</p:confirmDialog> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:58:33.743

此代码可能对您有所帮助。

```
private boolean valid = true; 

public void doAdd() {
    valid = false;
}

<p:dialog id="basicDialog" header="Basic Dialog" visible="#{!testBean.valid}">
    <h:outputText value="Message!" />
</p:dialog>

<h:commandButton id="modalDialogButton" value="Modal" action="#{testBean.doAdd}"/> 
```

# java - Java daemon 最好的跨平台解决方案？

> ID：13228353
> 
> 赞同：0
> 
> 时间：2012-11-05T08:25:41.450
> 
> 标签：java, cross-platform, daemon

我必须建立`Java` `daemon`一个一旦开始就会一直在工作（并监听一个打开的套接字）的进程`Linux`，`Windows`和`Mac`。

我在网上看到了一些解决方案，但没有发现任何一致且广泛使用的解决方案。开发人员使用什么来完成此类任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:30:12.157

最简单的方法是创建批处理文件（win）/shell脚本（linux）并在inittab（linux）或windows启动中调用它。这让生活更轻松。在那个批处理/shell文件中，只需调用带有参数的java二进制文件

[java后台/守护进程/服务跨平台最佳实践](https://stackoverflow.com/questions/326509/java-background-daemon-service-cross-platform-best-pratices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:43:40.190

在 windows 的 ac 程序中使用系统执行命令中的 javaw 来制作 windows 中“最好的”守护程序。然后在启动时将 c 程序加载到注册表中，或将其放在启动文件夹中，但这很容易被您的客户编辑，这可能是不可取的。

否则，命令提示符窗口将一直困扰您/您的客户。

对于 linux & mac 等...很简单，只需将 java 命令加载到 init.d

不知道我是否更喜欢 java 作为守护进程....与 ac 守护进程相比，它有点笨重。

# linux-kernel - Linux内核如何处理mousedev.c中PS/2鼠标的双击事件

> ID：13228361
> 
> 赞同：1
> 
> 时间：2012-11-05T08:25:58.217
> 
> 标签：linux-kernel, linux-device-driver, device-driver

我正在尝试详细了解 Linux 内核如何处理鼠标中断。

我能够追踪从 i8042.c 中的中断开始到 mousedev.c 中的事件的流程。[在 Linux 内核 3.6 的第 230 行 mousedev.c](http://lxr.free-electrons.com/source/drivers/input/mousedev.c#L230)中的函数 mousedev_key_event() 中，我看到按钮事件已被解码。但我很想知道如何处理双击事件。

我尝试寻找必须检测到第二次点击的时间间隔。我确实找到了一个用于触摸板的触摸板，它是在同一文件[line#51](http://lxr.free-electrons.com/source/drivers/input/mousedev.c#L51)中定义的“tap_time” ，但不适用于外部 PS/2 鼠标。有人可以帮我弄清楚吗？

# java - 以最安全的方式使用准备好的语句

> ID：13228362
> 
> 赞同：6
> 
> 时间：2012-11-05T08:26:08.967
> 
> 标签：java, sql, validation, jdbc, prepared-statement

从安全验证的角度来看，两者之间是否有区别：

`stmt.setObject(1, theObject);`

和

`stmt.setString(1, theObject);`?

我知道在这种情况下`theObject`是一个`String`，但我有兴趣使该代码的一部分更通用以涵盖其他情况，并且想知道输入验证的安全性是否受到影响

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:47:39.640

使用 s 是可以的，`setObject()`因为 jdbc 会尝试对所有`java.lang.*`类型进行类型解析。

但是，以这种方式将任意 SQL 字符串传递给数据库存在潜在问题 -**安全漏洞**：如果没有对用于构建 SQL 字符串的任何参数进行非常明智的验证，您可能会受到各种类型的 SQL 插入攻击。

谨防将 untyped 传递`null`给`setObject()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:37:04.267

恕我直言

鉴于 JDBC 是围绕数据库服务器的一个非常轻量级的包装器（除了为数据库生成 SQL 以直接解释之外，它几乎没有其他作用），我希望

```
stmt.setObject(1, theObject); 
```

完全一样

```
stmt.setString(1, theObject == null ? "null" : theObject.toString())`; 
```

当数据库处理生成的 SQL 并查找它是否适合它时，将发生“类型验证”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:05:26.690

答案似乎与提供者相关，并且取决于驱动程序的实现。我检查了当前 postgresql 驱动程序的来源，这两个调用是相等的。

如果驱动程序不知道类型，则会引发异常。

```
/** code from ./org/postgresql/jdbc2/AbstractJdbc2Statement.java */
public void setObject(int parameterIndex, Object x) throws SQLException
{
    checkClosed();
    if (x == null)
        setNull(parameterIndex, Types.OTHER);
    else if (x instanceof String)
        setString(parameterIndex, (String)x);
    else if (x instanceof BigDecimal)
        setBigDecimal(parameterIndex, (BigDecimal)x);
    else if (x instanceof Short)
        setShort(parameterIndex, ((Short)x).shortValue());
    else if (x instanceof Integer)
        setInt(parameterIndex, ((Integer)x).intValue());
    else if (x instanceof Long)
        setLong(parameterIndex, ((Long)x).longValue());
    else if (x instanceof Float)
        setFloat(parameterIndex, ((Float)x).floatValue());
    else if (x instanceof Double)
        setDouble(parameterIndex, ((Double)x).doubleValue());
    else if (x instanceof byte[])
        setBytes(parameterIndex, (byte[])x);
    else if (x instanceof java.sql.Date)
        setDate(parameterIndex, (java.sql.Date)x);
    else if (x instanceof Time)
        setTime(parameterIndex, (Time)x);
    else if (x instanceof Timestamp)
        setTimestamp(parameterIndex, (Timestamp)x);
    else if (x instanceof Boolean)
        setBoolean(parameterIndex, ((Boolean)x).booleanValue());
    else if (x instanceof Byte)
        setByte(parameterIndex, ((Byte)x).byteValue());
    else if (x instanceof Blob)
        setBlob(parameterIndex, (Blob)x);
    else if (x instanceof Clob)
        setClob(parameterIndex, (Clob)x);
    else if (x instanceof Array)
        setArray(parameterIndex, (Array)x);
    else if (x instanceof PGobject)
        setPGobject(parameterIndex, (PGobject)x);
    else if (x instanceof Character)
        setString(parameterIndex, ((Character)x).toString());
    else if (x instanceof Map)
        setMap(parameterIndex, (Map)x);
    else
    {
        // Can't infer a type.
        throw new PSQLException(GT.tr("Can''t infer the SQL type to use for an instance of {0}. Use setObject() with an explicit Types value to specify the type to use.", x.getClass().getName()), PSQLState.INVALID_PARAMETER_TYPE);
    }
} 
```

# android - Webview android 应用程序强制关闭

> ID：13228366
> 
> 赞同：0
> 
> 时间：2012-11-05T08:26:25.790
> 
> 标签：android

大家好，我是android开发的新手，我收到以下错误有什么帮助吗？提前致谢

```
package com.example.gossipmate.mobi;
import android.os.Bundle;
import android.app.Activity;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class Gossipmate extends Activity 
{
    final Activity activity = this;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.activity_gossip_mate);
        final WebView webView = (WebView) findViewById(R.id.webview);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                activity.setTitle("Loading");
                activity.setProgress(progress * 100);

                if (progress == 100)
                    activity.setTitle(R.string.app_name);
            }

        });
        webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                // Handle the error
            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }

        });

        webView.loadUrl("http://www.gossipmate.x10.bz");

    }} 
```

以上是我的应用程序的代码，错误如下所示

```
11-05 13:34:06.329: W/dalvikvm(595): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-05 13:34:06.429: E/AndroidRuntime(595): FATAL EXCEPTION: main
11-05 13:34:06.429: E/AndroidRuntime(595): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.gossipmate.mobi/com.example.gossipmate.mobi.GossipMate}: java.lang.ClassNotFoundException: com.example.gossipmate.mobi.GossipMate in loader dalvik.system.PathClassLoader[/data/app/com.example.gossipmate.mobi-1.apk]
11-05 13:34:06.429: E/AndroidRuntime(595):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
11-05 13:34:06.429: E/AndroidRuntime(595):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-05 13:34:06.429: E/AndroidRuntime(595):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-05 13:34:06.429: E/AndroidRuntime(595):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-05 13:34:06.429: E/AndroidRuntime(595):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-05 13:34:06.429: E/AndroidRuntime(595):  at android.os.Looper.loop(Looper.java:123)
11-05 13:34:06.429: E/AndroidRuntime(595):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-05 13:34:06.429: E/AndroidRuntime(595):  at java.lang.reflect.Method.invokeNative(Native Method)
11-05 13:34:06.429: E/AndroidRuntime(595):  at java.lang.reflect.Method.invoke(Method.java:507)
11-05 13:34:06.429: E/AndroidRuntime(595):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-05 13:34:06.429: E/AndroidRuntime(595):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-05 13:34:06.429: E/AndroidRuntime(595):  at dalvik.system.NativeStart.main(Native Method)
11-05 13:34:06.429: E/AndroidRuntime(595): Caused by: java.lang.ClassNotFoundException: com.example.gossipmate.mobi.GossipMate in loader dalvik.system.PathClassLoader[/data/app/com.example.gossipmate.mobi-1.apk]
11-05 13:34:06.429: E/AndroidRuntime(595):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
11-05 13:34:06.429: E/AndroidRuntime(595):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
11-05 13:34:06.429: E/AndroidRuntime(595):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
11-05 13:34:06.429: E/AndroidRuntime(595):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-05 13:34:06.429: E/AndroidRuntime(595):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
11-05 13:34:06.429: E/AndroidRuntime(595):  ... 11 more
11-05 13:34:06.539: W/ActivityManager(61):   Force finishing activity com.example.gossipmate.mobi/.GossipMate
11-05 13:34:07.109: W/ActivityManager(61): Activity pause timeout for HistoryRecord{406d08c8 com.example.gossipmate.mobi/.GossipMate} 
```

清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.gossipmate.mobi"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".GossipMate"
        android:label="@string/title_activity_gossip_mate" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

以上是我正在使用的清单代码我确定我已经注册了活动

在我用 m 更改 M 并开始一个新项目后，该应用程序现在可以正常运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:12:51.797

检查 Manifest 文件中 Activity 名称的拼写，它是错误的。它应该`Gossipmate`代替`GossipMate`.

**更新**

尝试将此行放在清单 `android:name="com.example.gossipmate.mobi.Gossipmate"`中，而不是`android:name=".GossipMate"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:39:42.067

在你`AndroidManifest.xml.`的活动名称中`android:name=".GossipMate"`与`m`mate 是大写字母，在活动中它在哪里`Gossipmate`！！！

检查[java.lang.RuntimeException：无法实例化活动 ComponentInfo](https://stackoverflow.com/questions/4688277/java-lang-runtimeexception-unable-to-instantiate-activity-componentinfo)

# php - imagemagick 不使用 php

> ID：13228370
> 
> 赞同：0
> 
> 时间：2012-11-05T08:26:41.530
> 
> 标签：php, delegates, imagemagick, postscript

我已经在我的 Windows 服务器上安装了 imagemagick，当我在 CMD 中尝试时它成功转换了文件，但是当我在 php 中使用以下代码时： -

```
$im = new imagick( 'arc.pdf[0]' );    
$im->setImageColorspace(255);    
$im->setResolution(300, 300);    
$im->setCompressionQuality(95);    
$im->setImageFormat('jpeg');    
$im->writeImage('thumb.jpg');    
$im->clear();    
$im->destroy(); 
```

它给出了以下错误： -

> ImagickException：无法打开图像“arc.pdf”：第 10 行 C:\wamp\www\test\test.php 中没有这样的文件或目录@error/blob.c/OpenBlob/2638

我也试过

```
$im = new imagick( 'C:\wamp\www\test\arc.pdf' );    
$im->setImageColorspace(255);    
$im->setResolution(300, 300);    
$im->setCompressionQuality(95);    
$im->setImageFormat('jpeg');    
$im->writeImage('thumb.jpg');    
$im->clear();    
$im->destroy(); 
```

然后它给出：-

> ImagickException: Postscript delegate failed `C:\wamp\www\test\arc.pdf':No such file or directory @error/pdf.c/ReadPDFImage/679 in C:\wamp\www\test\test.php 在线10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:21:41.843

ImageMagick 需要 PostScript 才能读取 PDF 文件。那很可能是你的问题。

从这里获取它：[http](http://www.ghostscript.com/download/gsdnld.html) ://www.ghostscript.com/download/gsdnld.html安装并重试。

# ios - Facebook iOS SDK，针对 FBSession 的异常，*** -[FBSession close] 中的断言失败

> ID：13228372
> 
> 赞同：3
> 
> 时间：2012-11-05T08:26:47.443
> 
> 标签：ios, facebook, session, ios5, facebook-ios-sdk

我正在为 ios 使用 facebook sdk 3.0.8。当我尝试使用 facebook 登录时，它工作正常，但有时当我在注销后尝试登录时，应用程序崩溃了。

这是异常消息

```
*** Assertion failure in -[FBSession close], /Users/jacl/src/ship/ios-sdk/src/FBSession.m:342 
```

你能告诉我哪里出错了吗？

**这是 AppDelegate 中的代码**

```
 - (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // attempt to extract a token from the url
    return [FBSession.activeSession handleOpenURL:url]; 
}

- (void)applicationWillTerminate:(UIApplication *)application {

    [self.session close];
}

#pragma mark Template generated code

// FBSample logic
// It is possible for the user to switch back to your application, from the native Facebook application, 
// when the user is part-way through a login; You can check for the FBSessionStateCreatedOpenening
// state in applicationDidBecomeActive, to identify this situation and close the session; a more sophisticated
// application may choose to notify the user that they switched away from the Facebook application without
// completely logging in
- (void)applicationDidBecomeActive:(UIApplication *)application {
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */

    // FBSample logic
    // this means the user switched back to this app without completing a login in Safari/Facebook App
    if (self.session.state == FBSessionStateCreatedOpening) {
        // BUG: for the iOS 6 preview we comment this line out to compensate for a race-condition in our
        // state transition handling for integrated Facebook Login; production code should close a
        // session in the opening state on transition back to the application; this line will again be
        // active in the next production rev
        //[self.session close]; // so we close our session and start over
    }
} 
```

**视图控制器内的代码**

```
-(IBAction)connectWithFacebook{
         DemoAppDelegate *appDelegate = (TotallyCuteAppDelegate *) [[UIApplication sharedApplication]delegate];
        if (!appDelegate.session.isOpen && (appDelegate.session.state != FBSessionStateCreated))
        {
            appDelegate.session = [[FBSession alloc] init];
        }

        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"publish_actions",
                                @"email",
                                nil];
        //app crashes here
        [FBSession openActiveSessionWithPermissions:permissions allowLoginUI:YES 
                                  completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                      if (session.isOpen) 
                                      {
                                        NSLog(@"LoginVC->Session is open");
                                        appDelegate.session=session; 
                                        [userDefaults setObject:appDelegate.session.accessToken forKey:@"facebook_token"];
                                        [userDefaults setObject:paramFBId forKey:@"facebook_id"];

                                      }
                                      else
                                      {
                                          NSLog(@"LoginVC->Session is not open");
                                      }
                                  }//end completionHandler
         ];

}

-(IBAction)logout:(id)sender{
    DemoAppDelegate *appDelegate = (TotallyCuteAppDelegate *) [[UIApplication sharedApplication]delegate]; 

    if (appDelegate.session.isOpen) {
        [appDelegate.session closeAndClearTokenInformation];

        [[NSUserDefaults userDefaults] removeObjectForKey:@"facebook_id"];
        [[NSUserDefaults userDefaults] removeObjectForKey:@"facebook_token"];
      } 
} 
```

**编辑：**

删除了以下代码，现在它工作正常

```
 if (!appDelegate.session.isOpen && (appDelegate.session.state != FBSessionStateCreated))
            {
                appDelegate.session = [[FBSession alloc] init];
            } 
```

这是更新的代码

```
 -(IBAction)connectWithFacebook{
        if ([InternetChecker isConnected]) 
        {
            DemoAppDelegate *appDelegate = (TotallyCuteAppDelegate *) [[UIApplication sharedApplication]delegate];

    /* Removed following if block
           if (!appDelegate.session.isOpen && (appDelegate.session.state != FBSessionStateCreated))
            {
                appDelegate.session = [[FBSession alloc] init];
            }
    */
            NSArray *permissions = [[NSArray alloc] initWithObjects:
                                    @"publish_actions",
                                    @"email",
                                    nil];

            [FBSession openActiveSessionWithPermissions:permissions allowLoginUI:YES 
                                      completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                          if (session.isOpen) 
                                          {
                                            NSLog(@"LoginVC->Session is open");
                                            appDelegate.session=session; 
                                            [userDefaults setObject:appDelegate.session.accessToken forKey:@"facebook_token"];
                                            [userDefaults setObject:paramFBId forKey:@"facebook_id"];

                                          }
                                          else
                                          {
                                              NSLog(@"LoginVC->Session is not open);
                                          }
                                      }//end completionHandler
             ];
        } 
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T08:29:57.950

看FBSession.m，里面的断言`close`如下：

```
NSAssert(self.affinitizedThread == [NSThread currentThread], @"FBSession: should only be used from a single thread"); 
```

您是`-close`从创建会话的线程以外的线程调用的吗？

进一步研究这一点。您在滥用 API。你正在创造

```
appDelegate.session = [[FBSession alloc] init]; 
```

但是你在打电话

```
[FBSession openActiveSessionWithPermissions ... 
```

这会创建一个全新的会话。这意味着您从未打开过`appDelegate.session`，因此您不应该尝试关闭它。你应该做的是以下内容：

```
[FBSession openActiveSessionWithPermissions ...
appDelegate.session = [FBSession activeSession]; 
```

另一种选择是只做：

```
appDelegate.session = [[FBSession alloc] init];
[appDelegate.session openWithCompletionHandler: ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T07:16:13.727

您应该在主线程上执行您的代码

```
dispatch_async(dispatch_get_main_queue(), ^{
    [FBSession openActiveSessionWithPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:^(FBSession *session,
                                                  FBSessionState status,
                                                  NSError *error) {
                                                       // do something
                                                  }];
}); 
```

# visual-studio-2010 - VS 2010 中不同大小的对话框

> ID：13228373
> 
> 赞同：0
> 
> 时间：2012-11-05T08:26:50.297
> 
> 标签：visual-studio-2010, mfc, dialog

我的 MFC 应用程序中有两个对话框，我希望它的大小相同，并在设计视图中调整它们的大小，但状态栏中显示的对话框大小不同。

对话框具有相同的属性。

怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:37:48.127

问题在于对话框中使用的不同字体。仍然不明白为什么字体会影响对话框的测量单位。

# php - php未定义的偏移错误

> ID：13228374
> 
> 赞同：1
> 
> 时间：2012-11-05T08:26:53.083
> 
> 标签：php

运行以下代码：

```
 preg_match("/^top\-sites\-csv\_(.+)\_/i", $file, $matches);
    $site_id = $matches[1]; 
```

它不断生成此通知：

```
PHP Notice:  Undefined offset 
```

我猜它发生在正则表达式找不到匹配项时。问题是脚本在 cron 上，我的错误日志很快就变大了，然后需要手动清理..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:29:07.137

在使用ist 之前检查`$matches`using ：[`isset()`](http://de2.php.net/manual/en/function.isset.php)

```
if(isset($matches[1])){
  $site_id = $matches[1];
  // do more here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:30:08.573

如果[`preg_match`](http://php.net/preg_match)没有找到匹配项，`$matches`则为空数组。因此，您应该`preg_match`在访问之前检查是否找到匹配项`$matches[1]`

# mysql - mysql查询使用循环ID删除结果

> ID：13228375
> 
> 赞同：0
> 
> 时间：2012-11-05T08:26:58.777
> 
> 标签：mysql

我有这个 sql 查询，我必须提供 ID 才能工作（在这个例子中是 100）

```
SELECT * FROM students_subjects WHERE student_id 
NOT IN 
(SELECT student_id FROM students_info WHERE class_id=(SELECT class_id FROM groups WHERE group_id=(SELECT group_id FROM teacher_groups_subjects WHERE t_g_s_id=**100**))) 
```

我想从表 teacher_groups_subjects 中选择所有行并为每个 ID (t_g_s_id) 运行上面的查询

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:08:04.450

可能是这样的：-

```
SELECT * 
FROM students_subjects a 
LEFT OUTER JOIN students_info b ON a.student_id = b.student_id
LEFT OUTER JOIN groups c ON b.class_id = c.group_id
LEFT OUTER JOIN teacher_groups_subjects d ON c.group_id = d.group_id
WHERE b.student_id IS NULL 
```

# iphone - 使用 TFHpple 在 iOS 中解析 HTML？

> ID：13228376
> 
> 赞同：0
> 
> 时间：2012-11-05T08:27:02.803
> 
> 标签：iphone, html, objective-c, ios

我是 iOS 新手。我想像这样解析 HTML 页面：

```
<div class="main_menu">
          <ul class="sf-menu">
            <li class="current"><a href="#" class="sifrme_active">Holiday Tours</a>
              <ul>
                <li><a href="about-holiday-tours.html">About Us</a></li>
                <li><a href="Mohammed-el-decken.html">Mohammed El Decken</a></li>
                <li><a href="Yehia-El-Decken.html">Yehia El Decken</a></li>
              </ul>
            </li>
            </li>
            <li><a href="#" class="sifrme_active">Vacation Packages</a>
              <ul>
                <li><a href="Slov-2-Spain.html">Slov2Spain</a></li>
                <li><a href="Swiss-Alps.html">Swiss Alps</a></li>
                <li><a href="fall-hike.html">Fall Hike</a></li>
                <li><a href="nile-valley.html">Nile Valley</a></li>
                <li><a href="sahlala.html">Sahlala</a></li>
                <li><a href="Safar-El-Layaly.html">Safar El Layaly</a></li>
                <li><a href="cruising-sinai.html">Cruising Sinai</a></li>
                <li><a href="siwa-oasis.html">Siwa Siwa</a></li>
                <li><a href="Silk-Road.html">Silk-Road</a></li>
                <li><a href="French-Alps.html">French Alps</a></li>
              </ul>

            </li>
     ->         <li><a href="#">Weekend Trips</a><ul>
     ->         <li><a href="hiking.html">Hiking</a></li>
     ->         <li><a href="Sandboarding.html">Sandboarding</a></li>
     ->         <li><a href="Horseriding.html">Horse Riding</a></li>
     ->         <li><a href="GoCycle.html">GoCycle</a></li>
     ->         <li><a href="Islamic-Tour.html">Islamic Tour</a></li>
              </ul>
            </li>
            <li><a href="holiday-tours-reservation.html">Reservation</a> </li>
          </ul>
        </div>
      </div> 
```

我想访问箭头和我无法通过 XPathQuery 获取它们的周末旅行？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:46:36.417

```
NSArray *data = [xpath searchWithXPathQuery:@"//li//a//child::text()"]; 
```

搜索数据

```
for (int i = 0; i < data.count; i++) {
  TFHppleElement *element = [data objectAtIndex:i];
  NSLog(@"%@", [element content]);
} 
```

查看里面的数据，你可以检查如何得到你想要的。

这是一个 xPath 语法教程页面： [http ://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

# ruby - 在应用程序中获取机架映射目录

> ID：13228378
> 
> 赞同：1
> 
> 时间：2012-11-05T08:27:10.103
> 
> 标签：ruby, sinatra, passenger, rack

假设我有一个 config.ru，例如：

```
map '/foo' do
  run MyApp
end 
```

和一个 Sinatra 应用程序，例如：

```
class MyApp < Sinatra::Base
  use Rack::Session::File, key: 'rack.session', domain: 'my.domain.com', path: '/foo', expire_after: 86400 * 14, secret: 'mysecret'
end 
```

如何使 MyApp 与`/foo`用于访问它的请求目录（在这种情况下）无关？我发现它`request.script_name`包含这个目录，但我不能将它用于语句的`path:`参数，`use Rack::Session::File`因为它在从乘客启动应用程序时尚未定义，但仅在稍后将请求发送到应用程序时才定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:11:33.707

Unfortunately it's impossible even with dirty hacks.

So I suppose it's possible to do via two different ways:

1.  External configuration file e.g. routes.yml (config.ru uses it for `map` statement, application to discover such prefix in url);
2.  Environment variable (I've chosen this because it's easy to configure on Heroku.

# actionscript-3 - 如何计算来自其他物理对象的反射轨迹？

> ID：13228382
> 
> 赞同：0
> 
> 时间：2012-11-05T08:27:29.393
> 
> 标签：actionscript-3, physics, game-physics

有没有一种简单的方法可以计算出子弹在颈背的预期轨迹？我需要建立类似这条路径的东西，反映不超过一两个菩提。比如台球游戏。我的游戏没有重力。

![在此处输入图像描述](../Images/7b3203aa0de35724221098c54e641d62.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:01:56.060

从一个固定的矩形开始。我假设您可以确定子弹将击中哪个边缘。如果它撞击水平边缘（恒定 Y），则反转轨迹的 Y 分量；如果它撞击垂直边缘（恒定 X），则反转速度的 X 分量。

在圆的情况下，你必须找到从圆心到撞击点的射线，然后反转平行于该射线的速度分量（你知道如何找到平行于a的向量的分量吗？给定向量？）。

如果物体可以移动，而且子弹的速度远大于物体的速度，那么你只需要物体的瞬时位置——就子弹而言，它们是静止的。

如果对象以与子弹速度相当的速度移动，则必须能够进行简单的坐标变换，以便移入和移出对象的框架。例如，如果对象的速度为 (2,3) 而子弹的速度为 (-5, 9)，那么在对象的框架中，对象是静止的，子弹的速度为 (-7, 6)。然后你可以计算这个帧中的碰撞（对象是静止的），然后变换回来。例如，如果对象是一个矩形并且子弹击中它的底部边缘，子弹的速度变为（-7，-6），我们将其转换回世界框架：（-5，-3）。

# objective-c - 如何将对象附加到 NSMutableArray？

> ID：13228387
> 
> 赞同：0
> 
> 时间：2012-11-05T08:27:54.920
> 
> 标签：objective-c, ios

我想更新一个可变数组。我有一个数组“ListArray”，另一侧有一些键，如“desc”、“title”（单击按钮）。我有一个数组名称 newListArray，它来自 Web 服务，具有不同的数据，但具有相同的键，如“描述”“标题”。所以我想在 "ListArray" 中添加该数据。不想替换数据只是在相同的键上添加数据。这样我就可以在 tableview 中显示它。

..........所以我的问题是如何在“ListArray”中添加数据。或以任何其他方式在表格视图中显示该数据但替换旧的只是想更新数据

```
 NSMutableArray *newListArray =  (NSMutableArray*)[[WebServices sharedInstance] getVideoList:[PlacesDetails sharedInstance].userId tokenValue:[PlacesDetails sharedInstance].tokenID mediaIdMin:[PlacesDetails sharedInstance].minId mediaIdMax:[PlacesDetails sharedInstance].maxId viewPubPri:@"Public_click"];

NSDictionary *getNewListDic = [[NSDictionary alloc] initWithObjectsAndKeys:newListArray,@"videoList", nil];

[listVidArray addObject:getNewListDic];

NSArray *keys = [NSArray arrayWithObjects:@"desc",@"url",@"media_id",@"img",@"status",@"media_id_max",@"fb_url",@"title", nil] ;

NSMutableDictionary *dict = [NSMutableDictionary dictionary];

for(int i = 0 ; i < [listVidArray count] ; i++)
{

    for( id theKey in keys) 
    {
       // NSMutableArray *item = [NSMutableArray array];

        NSLog(@"%@",theKey);

        NSLog(@"%@",keys);

        [dict setObject:[[[listVidArray objectAtIndex:i]valueForKey:@"videoList"] valueForKey:theKey] forKey:theKey];

//        [dict  setObject:[newListArray valueForKey:theKey] forKey:theKey];

    }
} 
```

![在此处输入图像描述](../Images/1a5db79c980e7ab911e8df2677fdd260.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:35:51.043

如果我没有误解你的问题，你可以这样做：

```
[listArray addObjectsFromArray:newListArray];
[_tableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:34:54.810

如果你 newListArray 与 oldListArray 完全不同，那么清除旧的，并使用新的数据来适应它。

否则，您需要合并两个数组。一种方法是检查 newListArray 中的数据是否在 oldListArray 中，然后决定是否将其添加到 oldListArray 中。

当 oldListArray 更新时，调用`-reloadData`tableView。

# c++ - 变量总是有默认值而不是我计算的值

> ID：13228391
> 
> 赞同：0
> 
> 时间：2012-11-05T08:28:17.680
> 
> 标签：c++, visual-c++

```
#include <iostream>
using namespace std;

class Fraction {
private:
    int num;    
    int denom;

public:
    Fraction() {
        num = 0;
        denom = 1;
    } 
    Fraction(const Fraction& ref) { 
        num = ref.num;
        denom = ref.denom;
    } 
    Fraction(int arg) {

        num = arg;

        denom = 1;
    }

    Fraction(int arg, int arg2) {
        num = arg;
        if (arg2 == 0)
            denom = 1;
        else 
            denom = arg2; 
    } 
    ~Fraction() {   
    }
    void setnum(int arg) {
        num = arg;
        return;
    }

    void setdenom(int arg) {
        if(arg) {
            denom = arg;
        } else {
            denom = 1;
            }
        return;
    }
    int getnum() const {
        return num;
    }
    int getdenom() const {
        return denom;
    }
};

int main() {  
    menu();
    return 0;
}

Fraction::Fraction add(Fraction& arg1, Fraction& arg2) {
    Fraction temp;
    temp.setnum((arg1.getnum() * arg2.getdenom()) + (arg1.getdenom() * arg2.getnum()));
    temp.setdenom(arg1.getdenom() * arg2.getdenom());   
    return temp;    
}

Fraction::Fraction init() {
    int num;
    int denom;

    cout << "num: ";
    cin >> num;

    cout << "denom: ";
    cin >> denom; 

    Fraction info(num, denom);

    return info;
}

void print(Fraction& info) {
    cout << "num: " << info.getnum() << endl;
    cout << "denom: " << info.getdenom() << endl;
    return;
} 

void menu() {
    int option;

    do {
        cout << "Select an option (use integer value only): ";
        cin >> option;  

            switch(option) {
        case 1:
            initializingMenu();
            break;

        case 2:
            addingMenu();
            break;

        case 3:
            printingMenu();
            break;

        case 4:
            cout << "Have Fun!" << endl;
            break;

        default:
            cout << "Wrong option!" << endl;
        }

} while (option != 0);
    return;
}

void initializingMenu() {

    Fraction a;
    Fraction b;
    Fraction c;
    int option;

    do {
        cout << "Select an option (1, 2, or 3): ";
        cin >> option;  

        switch(option) {
        case 1:
            cout << "\nCalling init() - Stand Alone...\n" << endl;
            a = init();
            b = init();
            break;

        case 2:
            menu();
            break;

        default:
            cout << "\nWrong option!" << endl;
            initializingMenu();
        }
} while (option != 0);
    return;
}

void addingMenu() {
    Fraction a;
    Fraction b;
    Fraction c;
    int option; 
    do {

        cout << "Select an option (1, 2, 3 or 4): ";
        cin >> option;  

        switch(option) {

        case 1:
            cout << "\nCalling add() - Stand Alone...\n" << endl;
            c = add(a,b);
            break;

        case 2:
            menu();
            break;

        default:
            cout << "\nWrong option!" << endl;
            addingMenu();
        }

} while (option != 0); 
    return;
}

void printingMenu() {

    Fraction a;
    Fraction b;
    Fraction c;
    int option;

    do {
         cout << "Select an option (1, 2, or 3): ";
         cin >> option;  

        switch(option) {
        case 1:
            cout << "\nCalling print() - Stand Alone...\n" << endl;
            print(c);
            break;

        case 2:
            menu();
            break;

        default:
            cout << "\nWrong option!" << endl;
            printingMenu();
        }  
} while (option != 0);
    return;
} 
```

我正在制作一个将两个分数相加的程序

我正在尝试使用菜单来做到这一点

我有四个菜单：

主菜单：提供进入其他菜单的选项

初始化菜单：输入 num 和 denom

添加菜单：添加分数

打印菜单：打印添加的分数

**麻烦：所以我运行程序并按顺序浏览菜单： main > init > add > print 但是当我打印时，结果是错误的，例如，1/2 和 1/2 假设给我 2/2 但是当我打印，它给我 0/1，这是默认构造函数**

我有另一个程序，它可以工作： [添加两个分数](https://stackoverflow.com/questions/13226012/add-two-fraction)

从网站上的程序来看，我认为它有效，因为我将它们放在同一个菜单中，但对于这个，我认为是因为我分开了，所以打印没有从类中获得 num 和 denom 值

**所以我想问，我该如何解决这个问题？以及为什么当我用菜单将它们分开时我无法得到真正的结果**

对不起我的英语不好和这么多代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:42:50.240

您将分数声明为每个函数中的局部变量，它们与其他函数中声明的那些没有任何联系。最好的方法是将整个菜单框架更改为一个类，如下所示：

```
class Menus
{
  Fraction a, b, c;
public:
  void mainMenu();
  void initializingMenu();
  void addingMenu();
  void printingMenu();
}; 
```

然后，在菜单成员函数中，使用类的成员变量——这些将保留它们的值，正是你所需要的。

您的 main() 将如下所示：

```
int main() {
    Menus menus;
    menus.mainMenu();

    return 0;
} 
```

我还建议让 mainMenu() 在循环中运行直到退出并让其他菜单返回到它，而不是每次都调用它。这只是不必要地加深了您的调用堆栈。

# jquery - jquerymobile 1.2 的日期时间选择器

> ID：13228393
> 
> 赞同：0
> 
> 时间：2012-11-05T08:28:23.287
> 
> 标签：jquery, mobile, cordova

我正在为最新的 jQuery mobile 寻找一个好的 datetimepicker 插件。我的应用程序正在使用phonegap。有人可以推荐一个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:38:51.453

谷歌搜索 JQM 日期选择器...第一个结果... [JQM-datebox 示例](http://dev.jtsage.com/jQM-DateBox/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T13:54:34.803

我刚刚为日期和时间构建了一个，两次翻转

[https://github.com/ngethe/jQM-DateBoxNgethe](https://github.com/ngethe/jQM-DateBoxNgethe)

# c - 字符串复制中的分段错误

> ID：13228395
> 
> 赞同：0
> 
> 时间：2012-11-05T08:28:25.250
> 
> 标签：c, pointers, segmentation-fault, strcpy

我收到内部 while 循环的分段错误错误。

```
char **c;
c=(char **)malloc(3*(N-1)*sizeof(char *));

for(int i=0;i<3*(N-1);)
{
    char *temp;
    gets(temp);
    while(*temp!='$')
    {
        j=0;
        while(*temp!=' ')
        {
            *(c[i]+j)=*(temp+j);
            j++;
        }
        i++;
    }
    i++;
} 
```

很抱歉缩进不当。我知道操作 char * 字符串会导致错误。但我不确定这个错误。我试图将 tmp 字符串分成三个不同的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:29:44.407

您只是为`3 * (N - 1)`字符串指针分配空间，而没有为字符本身分配空间。指针也未`temp`初始化，但您仍在使用`gets()`. 这会导致未定义的行为。

此外，您不应该在 C[中转换 , 的返回值。`malloc()`](https://stackoverflow.com/a/605858/28169)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:29:45.510

没有为`temp`变量分配内存。

```
char *temp;
gets(temp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:49:10.280

1）`temp`应该是一块内存（缓冲区）来复制`gets`字符串。

```
char *temp = malloc (256 * sizeof(char)); /* 256 as example*/ 
```

2) 对于线路

```
while(*temp!='$') 
```

和

```
while(*temp!=' ') 
```

我们希望为两个循环找到`temp`指针（例如`temp++`）的一些增量，但没有。这会导致问题

如果我能猜到您的需要，请在建议您的代码修复后（我没有测试它）

```
char **c;
c=(char **)malloc(3*(N-1)*sizeof(char *));

char copy[256];
char temp[256], *p;

for(int i=0;i<3*(N-1);i++)
{
    p = temp;
    gets(p);
    while(*p!='$')
    {
        j=0;
        while(*p!=' ')
        {
            *(copy+j)=*p;
            j++;
            p++;
        }
        if(*p=='\0')
            break;
        p++;
    }
    copy[j] = '\0'
    c[i] = strdup(copy); // allocate memory with size of copy string and then copy the content of copy to allocated memory
} 
```

# git - 对 git 工作流程的建议

> ID：13228396
> 
> 赞同：0
> 
> 时间：2012-11-05T08:28:33.330
> 
> 标签：git

我希望这里的巫师可以帮助我。我过去使用过 Mercurial，所以我熟悉 DVCS 的概念。然而，这是我第一次使用 git 的工作流程略有不同。从本质上讲，它涉及层次结构，并且可能使用镜像。我希望得到的层次结构如下

```
Root Repo  
^  
|  
|_____<MIRROR>______>Primary Repo  
                     ^  
                     |  
                     |________<CLONE>____> Developer  
                     |  
                     |________<CLONE>____> Developer 
```

我想设置主仓库有两个原因：

1.  位置/减少带宽使用，而不是每个开发人员从/向根存储库拉/推
2.  通过审查清理代码，只有经过批准的代码才会进入 Root Repo

我见过其他工作流程，其中主仓库变成了一种缓存仓库，每个人都推送到根仓库，但这不是我想要的。我见过的另一个工作流程是每个人都向审阅者发送一封电子邮件，要求他/她进行更改，但这还不可行，因为团队已经习惯了 SVN，我希望尽可能地熟悉它。

我到目前为止所尝试的：

1.  使用镜像标志克隆主仓库。
2.  从主仓库克隆到本地。
3.  测试修改，然后检查到本地 repo。
4.  将代码推送到主仓库。
5.  从 Root Rep 拉取（git 远程更新）
6.  git status 现在显示远程更改，而我的不可见
7.  尝试使用全新的 Primary Repo 克隆（不显示我的更改）

我想知道这个工作流程是否可行（听起来应该可行）。更有可能是我搞砸了。欢迎任何和所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:32:30.640

看看 Gerrit+Jenkins。可以设置 Jenkins 来验证构建，然后审阅者可以在代码审查期间批准代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T08:40:02.957

你为什么担心每个人都推到一个回购？Git 非常高效。除非您不处理源代码（大图像或视频），否则没有理由增加您提出的复杂性。

至于工作流程，这就是我正在使用的： http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T11:42:00.847

你想要的应该是可行的（免责声明 - 我没有测试过这个）：

**设置**

*   设置根仓库 (R)
*   创建主仓库（P）作为 R 的克隆。这将 R 设置为 P 的上游仓库。
*   创建本地开发人员存储库（D1，D2，...）作为 P 的克隆（再次将 P 设置为 D* 的上游）。

**工作流程**

*   开发人员在 D* 中开发。当满意时，他们推到P。
*   开发人员会定期从 P 中获取信息，以了解同事所做的更改。
*   您定期检查 P 中的代码，如果认为合适，将其推送到 R(*)。

那能解决你的问题吗？

* * *

至于你尝试了什么：

> 从 Root Rep（git 远程更新）拉取 git status 现在显示远程更改，而我的不可见

这看起来像是一个误解。`git remote update`不是“拉”——拉是*:-)*`git pull`。`git remote update`仅更新远程数据的缓存副本 - 您必须拉动才能将更改实际提取到本地分支中。如果您`git pull`是根存储库内部的主存储库，您应该会看到更改。

(*) 您可以在 P 中推入 R，也可以在 R 中从 P 拉出 - 结果是一样的。

# rest - Rest Client Debugger 测试上传图片

> ID：13228398
> 
> 赞同：1
> 
> 时间：2012-11-05T08:28:36.140
> 
> 标签：rest

我被困在以下场景中，我希望过去成功做到这一点的人可以帮助我解决这个问题。

我正在使用 REST CLIENT DEBUGGER，它用于执行 HTTP GET 和 POST 以获得所需的结果。我正在使用 android 并需要将图像从手机上传到服务器，但我不确定如何使用 Chao 编写的 REST CLIENT DEBUGGER 测试结果。

我使用的IDE：Titanium Situation:Upload an image from phone to server

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:20:31.787

使用某种 Base64 编码器并对图像进行编码。快速搜索出现： [http ://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)

将编码器提供的文本复制到您的 POST 的 BODY 到 Web 服务。将服务器上的图像从 base 64 解码为您想要的图像格式。

我不记得我从谁那里得到这段代码的，但它不是我的源代码（C# 源代码）。

```
private Image Base64ToImage(string base64String)
        {
            Image image = null;
            try
            {
                // Convert Base64 String to byte[]
                byte[] imageBytes = Convert.FromBase64String(base64String);
                MemoryStream ms = new MemoryStream(imageBytes, 0,
                  imageBytes.Length);

                // Convert byte[] to Image
                ms.Write(imageBytes, 0, imageBytes.Length);
                image = Image.FromStream(ms, true);

            }
            catch (Exception ex)
            {
                writeException(ex);
            }

            return image;
        } 
```

然后我将图像转换为 png，这在 C# 中相对容易。

# azure - 备份 Azure VM VHD

> ID：13228400
> 
> 赞同：1
> 
> 时间：2012-11-05T08:28:43.533
> 
> 标签：azure, azure-storage

计划使用 Azure 的 VM 来托管 SQL 和 IIS。不使用本地存储，而是使用异地冗余存储。

备份此环境的最佳解决方案是什么？在本地复制 VHD？

我打算将驱动器转移到可以安装在 Hyper-V 中的东西上？那可能吗？如果需要，很高兴购买产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:42:21.780

VM 的永久性磁盘存储在 Blob 存储中。这意味着您可以利用拍摄这些磁盘（blob）的快照等功能。

为了创建快照，您可以使用 REST API、[.NET SDK](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.cloudblob.createsnapshot.aspx)甚至[Cerebrata 的 Cloud Storage Studio](http://yossidahan.wordpress.com/2012/06/15/taking-vhd-snapshot-with-windows-azure-virtual-machines/)。如果您需要备份，您可以下载快照并将其安装在 Hyper-V 中。

# javascript - 如何在 and a HTML preview match?

I have a `<textarea></code> element. When the user fills it, you can see the spaces they made and when they pressed Enter to jump to the next line.<</h1> <blockquote> <p>ID：13228401</p> <p>赞同：3</p> <p>时间：2012-11-05T08:28:44.353</p> <p>标签：javascript, html, textarea, richtextbox</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：9</p> <p>时间：2012-11-05T08:39:42.363</p> </blockquote> <p>你可能想要这样的东西：</p> <pre><code><p style="white-space: pre-wrap"></p> <p style="white-space: pre"></p> <pre></pre> pre-wrap: Whitespace is preserved by the browser. Text will wrap when necessary, and on line breaks pre: Whitespace is preserved by the browser. Text will only wrap on line breaks Acts like the <pre> tag in HTML </code></pre> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：1</p> <p>时间：2012-11-05T08:32:53.597</p> </blockquote> <p>如果您只是将在 textarea 中输入的内容作为 html 输出，您会看到这一点。对于初学者，您可以用 . 替换所有空格，<code>&nbsp;</code>用 . 替换所有换行符<code><br></code>。或者将输出放入<code><pre></code>标签中。（在任何一种情况下，您还需要用实体替换一些其他字符。）</p> </body> </html></textarea>`

# jquery - 使用 .eq() 查找具有相同类的多个 Divider 的索引

> ID：13228402
> 
> 赞同：0
> 
> 时间：2012-11-05T08:28:56.437
> 
> 标签：jquery, jquery-selectors, indexing

我想知道如何影响多个 div 中的某个跨度索引。

[**小提琴**](http://jsfiddle.net/videsignz/tyjaD/3/)

我在其他 3 个 Div 中有 3 个可点击的 Div 和 3 个跨度集，就像这样......

**HTML**

```
<div class='clickable'>DIV</div>
<div class='clickable'>DIV</div>
<div class='clickable'>DIV</div>

<div class='spanset'>
<span>SPAN</span><br/>
<span>SPAN</span><br/>
<span>SPAN</span><br/>
<div>

<div class='spanset'>
<span>SPAN</span><br/>
<span>SPAN</span><br/>
<span>SPAN</span><br/>
<div>

<div class='spanset'>
<span>SPAN</span><br/>
<span>SPAN</span><br/>
<span>SPAN</span><br/>
<div> 
```

现在这是我的 JQuery 来影响点击时的正确跨度（错误在这里）

**jQuery**

```
$('.clickable').on('click', function() {

    $('span').css({'color': 'black' });

    x = $(this).index();

    $('.spanset span').eq(x).css({
        'color': 'red'
    });

}); 
```

似乎它正在将跨度作为一个整体进行索引，而不是从它们的每个容器 div（spanset 类）中对它们进行索引

我确信这与 JQuery 中的这个选择器有关

```
 $('.spanset span').eq(x) 
```

最终，当我单击 div 1 时，我希望每个 spanset 的第一个 span 受到影响，而不仅仅是页面上的第一个也是唯一一个 span。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:43:57.257

这里的其他答案建议使用循环，您不需要，只需使用`:eq`伪选择器即可。

例如。

```
$('span:eq(' + x + ')', '.spanset').css({
    'color': 'red'
}); 
```

[这是一个演示](http://jsfiddle.net/4jbMg/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:40:28.647

**更新后的版本**

```
// using the loop here, instead of internally by jQuery, gives use access to the
// `.clickable`s index without recalculating it on every click
$('.clickable').each(function (n) {
  // attach the handler
  $(this).on('click', function () {
    // get all spans
    $('.spanset span')

    // reset
    .css({color: 'black'})

    // filter the elements using `n` from the outer scope, profiting from
    // native implementations for `nth-child`
    .filter(':nth-child(' + (2*n + 1) + ')') // the used formula depends on the
                                             // actual markup. This one accounts
                                             // for the <br /> tags
    // apply new styles
    .css({color: 'red'});
  });
}); 
```

[http://jsfiddle.net/CcM2K/](http://jsfiddle.net/CcM2K/)

**旧版**

```
$('.clickable').on('click', function () {
    // get the index of the clicked element within it's parent
    var clickedIdx = $(this).index();

    // reset all span elements (could also use removeClass(), hide(), ...)
    $('.spanset span').css({
        color: 'black'

    // get only those spans that have the same index within their parents
    }).filter(function (idx) {
      // for this we use the spans index in the complete list, get the modulo of
      // that index and the index of the clicked element
      return idx % 3 === clickedIdx; // the literal 3 should be the number
                                     // of total clickable divs. If that number
                                     // is subject to change, a count here or in
                                     // the parent scope would be appropriate.
    // apply new css to only those filtered spans
    }).css({
        color: 'red'
    });
});​ 
```

[http://jsfiddle.net/ntTJA/1/](http://jsfiddle.net/ntTJA/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:41:45.463

您没有正确关闭 spanset 的 div 标签。将它们全部从 更改`<div>`为`</div>`。

这是另一种方式：

```
$('span').css({'color': 'black' });

x = $(this).index();
$('.spanset').each(function(){
    $('span',this).eq(x).css({
       'color': 'red'
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T08:42:42.827

可以使用`:nth-child()`选择器

```
$('.clickable').on('click', function() {  
     /* $(this).index() won't work due to clickable has more siblings than just clickable*/  
      var idx=$('.clickable').index(this)
    $('.spanset span:nth-child('+(idx+1)+')').css({
        'color': 'red'
    });

}); 
```

API 参考 [http://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T08:42:51.763

看看这个[http://jsfiddle.net/tyjaD/33/](http://jsfiddle.net/tyjaD/33/)

```
$('.clickable').on('click', function() {

$('span').css({'color': 'black' });

x = 2 * $(this).index() + 1;

$('.spanset span:nth-child(' + x + ')').css({
    'color': 'red'
    });

});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T08:34:35.817

试试这个[jsbin](http://jsbin.com/oxilik/1/edit)

```
$('.spanset').each( function(){
    $(this).children('span').eq(x).css(...)
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T08:34:27.953

您可以使用`each`JQuery 的功能来做到这一点：

```
$('.clickable').on('click', function() {

    $('span').css({'color': 'black' });

    x = $(this).index();

    $('.spanset').each(function(spanset){
        $(this).children().eq(x).css({
            'color': 'red'
        });            
    });
});​ 
```

# android - Android中的距离计算？

> ID：13228408
> 
> 赞同：-2
> 
> 时间：2012-11-05T08:29:43.627
> 
> 标签：android, distance, google-places-api

我对 android 谷歌地图非常陌生，我编写了用于查找两个地方之间的距离的代码：

私有字符串 getDistance（最终字符串开始，最终字符串结束）{

```
 new Thread(new Runnable() {
                @Override
                public void run() {
     float distance = 0.0f;
               StringBuffer url = new StringBuffer("http://maps.googleapis.com/maps/api/directions/json?origin=");
                 url.append(start.replace(" ", "").trim().toString());
                 url.append("&destination=");
                 url.append(end.replace(" ", "").trim().toString());
                 url.append("&mode=transit");
                 url.append("&language=en-EN");
                 url.append("&sensor=false");

                 DefaultHttpClient httpClient = new DefaultHttpClient();
                 HttpGet httpGet = new HttpGet(url.toString());
                 HttpResponse httpResponse = httpClient.execute(httpGet);
                 HttpEntity httpEntity = httpResponse.getEntity();
                 String line = EntityUtils.toString(httpEntity);

                 JSONObject jsonObject = new JSONObject(line);
                 JSONArray jsonarray = jsonObject.getJSONArray("routes").getJSONObject(0).getJSONArray("legs");

                 for (int i = 0; i < jsonarray.length(); i++) {
                     JSONObject obj = jsonarray.getJSONObject(i);
                     distance  = Float.valueOf(obj.getJSONObject("distance").getString("text").replace("km", ""));
                     System.out.println("Distance == " + obj.getJSONObject("distance").getString("text").replace("km", ""));
                 }

              BigDecimal   kmVal = BigDecimal.valueOf(distance);
              System.out.println("===========distance=============="+kmVal);

            } catch (Exception e) {
                e.printStackTrace();
            }
                }
                }).start();

            return distance  ;

    } 
```

我得到的距离相差 30 公里。我多出 30 公里，而不是实际距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:38:41.160

试试这个链接，它将毫无疑问地帮助你。

*   [如何使用它们的经度和纬度值计算两个位置之间的距离](https://stackoverflow.com/questions/6981916/how-to-calculate-distance-between-two-locations-using-their-longitude-and-latitu)
*   [计算两个地理位置之间的距离](https://stackoverflow.com/questions/8049612/calculating-distance-between-two-geographic-locations)
*   [android中两个地图点或纬度之间的距离](https://stackoverflow.com/questions/4813828/distance-between-two-map-point-or-lat-long-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:41:17.217

您不必查询谷歌地图来获取两个地方之间的距离。如果您知道这两个地方的纬度和经度，您就可以构建`Location`对象并使用它的`distanceTo()`方法，该方法将为您提供以米为单位的确切距离。

```
Location from = new Location("");
from.setLatitude(yourStartLatitude);
from.setLongitude(yourStartLongitude);

Location to = new Location("");
to.setLatitude(yourEndLatitude);
to.setLongitude(yourEndLongitude);

float distance = from.distanceTo(to); // The distance in meters 
```

# grails - 覆盖约束错误消息在 Grails 中不起作用

> ID：13228418
> 
> 赞同：0
> 
> 时间：2012-11-05T08:30:19.727
> 
> 标签：grails, internationalization, grails-2.0

我正在尝试覆盖 grails 的 minSize 约束的默认错误消息，但我总是得到默认消息。我在 message.properties 文件中编写了以下代码

```
Student.firstName.invalid.min.size.message 
```

我也尝试使用完整的包名，但仍然没有运气。有没有人可以帮助我？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:46:48.193

要使用的正确消息代码在 grails 用户指南中每个约束的参考页底部指定。在[minSize](http://grails.org/doc/latest/ref/Constraints/minSize.html)的情况下，您需要

```
className.propertyName.minSize.notmet 
```

# php - PHP 上传限制不影响。大文件在 /tmp 文件夹中

> ID：13228421
> 
> 赞同：5
> 
> 时间：2012-11-05T08:30:44.453
> 
> 标签：php, file-upload, temporary-files

我的网络服务器有问题。我将 PHP 配置为最大上传大小为 300MB。我更改了 php.ini 中的 2 个选项 php_value upload_max_filesize 300MB php_value post_max_size 300MB

这工作正常。但最近我注意到 /tmp 文件夹中有很大的文件（这是 PHP 的临时文件夹）。有 3 个大小为 1.5GB 的文件并继续增长。文件名就像临时 php 文件 /tmp/php* ***** **(*********一些随机代码）。***

 ***我检查了写入这些文件的过程是我为上传而创建的 PHP 脚本。

所以我的问题是为什么 PHP 上传和发布限制对这些文件没有影响？可能是什么原因？也许PHP首先将所有上传的数据保存到临时目录，然后才计算大小并检查它是否好？

我感谢任何评论。

更新。这可以像 - http 客户端发送一个没有内容长度的请求，所以 php 不能使用 post_max_size 来限制影响。PHP 将所有内容写入磁盘，因为不知道 POST 请求的站点和其中的文件是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:34:33.173

您需要在 php.ini 中设置 upload_max_filesize 和 post_max_size 的值：

```
; Maximum allowed size for uploaded files.
upload_max_filesize = 300M

; Must be greater than or equal to upload_max_filesize
post_max_size = 300M 
```

或在 .htaccess

```
php_value upload_max_filesize 300M
php_value post_max_size 300M 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-05T06:42:27.827

尝试设置一个`tmp`空间更大且没有限制的新目录，而不是系统默认（`/tmp`）。您可以通过更改`php.ini`文件中的默认目录来执行此操作：

```
upload_tmp_dir = /scratch/custom_temp 
```

或在 php 脚本中覆盖：

```
<?php
    ini_set('upload_tmp_dir', '/scratch/custom_temp');
?> 
```***

# node.js - 2 个 nodejs 服务器之间的 SSL 身份验证

> ID：13228422
> 
> 赞同：1
> 
> 时间：2012-11-05T08:31:00.530
> 
> 标签：node.js, ssl, express, socket.io

我按照[本](http://www.gettingcirrius.com/2012/06/securing-nodejs-and-express-with-ssl.html)指南使用 SSL 客户端身份验证来保护我当前的快速应用程序（我正在使用 socket.io 模块进行 websockets）。我的应用程序需要多个 node.js 服务器，我需要在它们之间发送消息。

让 A 和 B 成为两个 node.js 服务器，假设 B 想与 A 开始通信。现在我只是使用 socket.io-client 模块在它们之间打开一个套接字，但这不是对我来说有效的选择：任何知道 A 的 URL 的人都可以打开一个 websocket 并开始向 A 发送消息。A 需要以某种方式验证它是否真的可以依赖 B。

可能吗？我没有找到任何满足我需求的 node.js 模块。

# javascript - 将 android 大屏幕缩放到 iphone 屏幕分辨率和密度 (Phonegap Build)

> ID：13228423
> 
> 赞同：0
> 
> 时间：2012-11-05T08:31:01.327
> 
> 标签：javascript, android, html, ios, cordova

我在 phonegap 构建中开发了一个应用程序并准备发布，因为我看到它在 iphone 分辨率下运行良好。当我尝试使用 samsung note 时，我发现屏幕分辨率不太好，因为应用程序看起来很小并且最小化了所有内容。我如何缩放应用程序并适合屏幕，就像它适合 iPhone 屏幕一样？谢谢您的回复。

```
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1.0, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:53:36.263

```
$(document).ready(function() { 
$('meta[name=viewport]').attr('content','width=1024, user-scalable=no'); 
}); 
```

在应用正确的缩放后似乎可以禁用用户缩放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:19:25.310

如果您想在不使用本机代码的情况下解决此问题，例如，如果您使用 Phonegap 构建服务，您可以设置 target-densitydpi=160 或其他值。这将为设备设置 dpi（每英寸点数）。这样，内容的大小将在不同设备上相似。标准值：

*   低分辨率：目标密度dpi=120
*   中等分辨率：目标密度dpi=160
*   高分辨率：目标密度dpi=240

据我了解，您可以使用 70-400 之间的任何值。

**警告：**我刚刚在我自己的 Phonegap 应用程序上使用了它，并且在我目前正在研究的不可点击区域遇到问题。我的应用程序在 DOM 上有点复杂和繁重，所以我不确定这是否会给您带来问题。只需确保在实现此功能后广泛测试所有点击/点击事件。

# ssh - 写入失败：管道损坏

> ID：13228425
> 
> 赞同：44
> 
> 时间：2012-11-05T08:31:02.817
> 
> 标签：ssh, terminal

我有一个无头 Ubuntu 服务器。我从我的 Mac 通过 SSH 在服务器上运行了一个命令（snapraid 同步）。指挥部说大约需要6个小时，所以我把它留了一个晚上。

今天早上我下来时，Mac 上的终端说：“写入失败：管道损坏”

我不确定该命令是否完全执行。这是超时问题吗？如果是这样，我怎样才能让 SSH 连接在一夜之间保持活跃？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-19T16:22:31.867

这应该可以解决 Mac osX 版本的问题：10.8.2

添加：

```
ServerAliveInterval 120
TCPKeepAlive no 
```

到这个文件：

```
~/.ssh/config 
```

或者，如果您希望它是 SSH 客户端中的全局更改，请[到此文件](https://superuser.com/questions/364304/how-do-i-configure-ssh-on-os-x)

/private/etc/ssh_config

“ServerAliveInterval 120”基本上是说每隔 120 秒用 NULL 数据包“ping”服务器，而“TCPKeepAlive no”表示不设置 SO_KEEPALIVE 套接字选项（因为您不应该在已经设置 ServerAliveInterval 的情况下需要它，显然它是“可欺骗的” "或一些奇怪的)。

服务器同样有一些可以设置为相同效果的东西（ClientKeepAliveInterval），但通常您无法控制这些设置。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-09-25T18:25:07.307

您可以为此使用“屏幕”实用程序。只需通过 SSH 连接到服务器，通过执行“screen”命令启动屏幕会话，在那里启动您的命令并断开连接（不要退出屏幕会话）。当您认为您的命令已经完成时，您可以连接到服务器并附加到您的屏幕会话，您可以在其中查看命令执行结果/进度（以防万一）。

有关详细信息，请参阅“人屏”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-21T10:09:44.853

这应该可以解决 ubuntu 和 linux mint 添加的问题：

```
ServerAliveInterval 120
TCPKeepAlive yes 
```

到 /etc/ssh/ssh_config 文件

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-27T14:41:00.080

我会推荐 tmux 而不是 screen，它是一个（可以说）更好的 screen[竞争对手](https://superuser.com/questions/236158/tmux-vs-screen)

```
tmux new-session -s {name} 
```

该命令创建一个会话。之后您想要连接的任何时间：

```
tmux a -t {name} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-28T16:39:07.810

有两种解决方案

1.  更新服务器并重新启动服务器 sshd

`echo "ClientAliveInterval 60" | sudo tee -a /etc/ssh/sshd_config`

2.  更新客户端

`echo "ServerAliveInterval 60" >> ~/.ssh/config`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-04T09:32:09.033

在尝试更改 sshd_config (ClientAliveInterval, ClientMaxCount,TCPKeepAlive...) 中的许多上述参数后，没有任何改变。我花了数小时和数天在论坛和博客上寻找解决方案......

似乎禁止与 ssh/sftp 连接的管道损坏问题来自 ChrootDirectory 上的权限设置。ChrootDirectory 必须由具有 755 权限的 root/root 拥有 较低权限 765/766/775... 不起作用，但更强（例如 700）如果您需要向连接的用户授予写入权限，您可以给它在子目录中。如果 chroot 归 sftpUser:sftpGroup 所有，它也不会工作......

```
chroot-> root:root 755
| 
---subdirectories-> sftpUser:sftpGroup 700 up to 770 
```

希望它会有所帮助

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-15T06:38:21.390

如果您在编辑 /etc/ssh/sshd_config 后仍有问题，或者您的机器上根本不存在 ~/.ssh/config，那么我强烈建议您重新安装 ssh。这个解决方案花了大约一分钟时间来解决“Broken pipe”错误和“close by remote host”错误。

```
sudo apt-get purge openssh-server

sudo apt update

sudo apt install openssh-server 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-29T19:12:00.620

jeremyforan 的回答是正确的，但是我发现如果您尝试使用**scp**，则有必要明确地将其指向如上所述配置的配置文件，它似乎不遵守配置的正常层次结构。例如：

```
scp -F ~/.ssh/config myfile joe@myserver.com:~ 
```

有效，而省略 -F 仍会导致管道损坏错误。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-02-21T08:57:58.657

Ubuntu：
`ssh -o ServerAliveInterval=5 -o ServerAliveCountMax=1 user@x.x.x.x`

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2018-04-14T17:45:32.803

我使用带有两条互联网输入线的华硕路由器。我将我的 IP 指定给某条线路，它可以工作。

# php - 单击时将 1 个输入的值更改为另一个输入的值

> ID：13228428
> 
> 赞同：0
> 
> 时间：2012-11-05T08:31:19.750
> 
> 标签：php, jquery

另一个 JQuery 问题，我想根据另一个隐藏输入的值更改隐藏输入的值。我已经遇到了一些麻烦。到目前为止，这是我的代码。这是行不通的，但我认为您已经可以了解我要对此做什么：

HTML 代码：

```
<div>
    <div id="search_result_fake_container">
    <div id="search_result_fake_div2"></div>

    <form method="GET" id="getattendees">
    <input type="text" id="search_result_fake2" value="<?php if(!empty($event_selected)){echo $event_selected;} else{echo "Select Event";}?>" name="event_name">

    <input type="hidden" id="search_result_fake2_id" value="<?php if(!empty($event_selected)){echo $event_selected;} else{echo "0";}?>" name="event_id">
    </form>

    </div>

    <div id="search_result_present_list2">

        <?php foreach ($events as $events1): ?>
        <div class="search_result_list_item2" id="search_result_item_12" style="text-align:center;"><?php echo $events1['event_name']; ?></div>
        <input type="hidden" id="event_id" value="<?php echo $events1['event_id']; ?>">
        <?php endforeach ?>

    </div>
    </div> 
```

和jQuery：

```
$("#search_result_fake_div2").live("click", function () {
        $("#search_result_present_list2").show("fast");
        $('body').one('click',function() {
            $("#search_result_present_list2").hide();
              });
             event.stopPropagation();

    });

    $(".search_result_list_item2").live("click", function () {
        $("#search_result_fake2").val($(this).html());
        $("#search_result_fake2_id").val($("#event_id").val());

        $("#getattendees").trigger('submit');
        $("#search_result_present_list2").hide();
    }); 
```

我使用 GET 只是为了检查值是否在移动，我不确定这条线`$("#search_result_fake2_id").val($("#event_id").val());`是否真的有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:48:52.543

将`event`参数添加到您的`#search_result_fake_div2`点击处理程序，如下所示：

```
("#search_result_fake_div2").live("click", function (event) {
                                                       ^--------HERE 
```

因为否则当您稍后尝试使用它时，您将遇到 javascript 运行时错误：

```
event.stopPropagation(); 
```

# c# - 使用 Windows Phone 8 模拟器时失去互联网连接

> ID：13228439
> 
> 赞同：3
> 
> 时间：2012-11-05T08:32:36.313
> 
> 标签：c#, visual-studio-2012, windows-phone-8

当我运行 Windows 8 手机模拟器时，我的 PC 无法上网。我是无线网络顺便说一句。

我在装有 Visual Studio 2012 的 Windows 8 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:54:05.770

使用有线网络连接。我是认真的，当我们半年前开始使用 WP8 SDK 时，我们办公室里的每个人都切换到了电缆。

# iphone - UIActivityIndi cator 作为 UITableView 页脚显示设备中的不同行为

> ID：13228441
> 
> 赞同：0
> 
> 时间：2012-11-05T08:32:56.143
> 
> 标签：iphone, ios, ipad

AM 使用`UIActivityIndicator`视图作为`UITableViewFooter`，在模拟器中工作正常，但在设备中显示不同的行为，认为这是由于操作系统更改而发生的。有时它适合屏幕的宽度并且看起来被放大了，在其他情况下只是消失了，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:08:49.970

自己找到了原因，将 UIActivityIndi​​cator 添加为页脚会导致某些设备出现问题，因此如果您仍需要显示页脚，最好使用诸如“正在加载...”之类的文本。否则向 UITableView 添加一个额外的单元格并将 UIActivityIndi​​cator 添加到最后细胞。在我的情况下，错误是在 3GS 中测试时，在其他设备中没有问题。

问候

# java - 等到子线程完成，但不要阻塞主线程

> ID：13228442
> 
> 赞同：3
> 
> 时间：2012-11-05T08:32:57.470
> 
> 标签：java, multithreading, swing, executorservice

我一直在研究一个 java GUI 应用程序，它在特定操作上执行一些任务。我一直在使用 ExecutorService 完成这项任务。现在使用多个线程工作正常，但问题是我不想阻止我的 GUI。用户可能想要取消当前操作并可能请求另一个操作。但是在使用 ExecutorService 时，我的主线程被阻塞了。我想等待我的子线程完成，使用 ExecutorService 调用，同时仍然能够在 GUI 上工作。

更新后的代码是：

```
 ExecutorService child = Executors.newCachedThreadPool();
ExecutorService es = Executors.newCachedThreadPool();

@Action
public void doAction() {
    /** Some Code goes here */
    if(Condition){
        if(!(es.isTerminated()||es.isShutdown())){
            es.shutdownNow();
            es = Executors.newCachedThreadPool();
        }
        es.execute(new Runnable() {
            public void run() {
                if(!(child.isTerminated()||child.isShutdown())){
                    child.shutdownNow();
                    child = Executors.newCachedThreadPool();
                }
                for(loopConditions){
                    child.execute(new Runnable() {
                        public void run() {
                            //Perform Some Task Here
                        }
                    });
                }
                child.shutdown();
                try {
                    boolean finshed = child.awaitTermination(5, TimeUnit.MINUTES);
                } catch (InterruptedException ex) {
                    child.shutdownNow();
                    Logger.getLogger(MySearchView.class.getName()).log(Level.SEVERE, null, ex);
                }
                System.out.println("All Child Threads finished Execution");
            }
        });
        es.shutdown();
        try {
            boolean finshed = es.awaitTermination(5, TimeUnit.MINUTES);
        } catch (InterruptedException ex) {
            es.shutdownNow();
            Logger.getLogger(MySearchView.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println("All Threads finished Execution");
        /**
        * Code that should run after all Threads finishes their Execution
        */
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:47:17.673

您没有按照`Executor`预期的方式使用 s 。它们应该是长期存在的，在应用程序启动时创建并在最后拆除。不要在正常处理过程中使用`shutdownNow`和。`awaitTermination`

如果您想等待任务的结果，请调用提交时返回`get()`的那个。`Future`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:36:23.093

我会使用 ScheduledExecutorService 在 5 秒后自行关闭。

# php - 从表中获取重复计数和数据

> ID：13228447
> 
> 赞同：1
> 
> 时间：2012-11-05T08:33:22.087
> 
> 标签：php, sql

我有3个这样的表：

表格1

```
+-ID-+-table_3_id-+
|  1 |          1 |
|  2 |          1 |
|  3 |          2 |
+----+------------+ 
```

表_2

```
+-ID-+-table_1_id-+-name--+-value-+
|  1 |          1 | Name1 | Data1 |
|  2 |          1 | Name2 | Data2 |
|  3 |          1 | Name3 | Data3 |
|  4 |          2 | Name1 | Data1 |
|  5 |          2 | Name2 | Data4 |
|  6 |          2 | Name3 | Data5 |
|  7 |          3 | Name1 | Data6 |
|  8 |          3 | Name2 | Data2 |
+----+------------+-------+-------+ 
```

表 3 包含 ID 和与该问题无关的其他数据。但是，我需要能够过滤`table_3_id`.

这就是我需要的：表 2 有多行，其中包含 table_1 中行的信息。我需要有一个查询来检查“数据”列中是否存在具有相同“名称”的重复项。我需要的结果是这样的（使用 WHERE table_3_id = 1）：

```
+-table_3_id-+-name--+-value-+-duplicate-+
|          1 | Name1 | Data1 | true      |
|          1 | Name2 | Data2 | false     |
|          1 | Name3 | Data3 | false     |
+------------+-------+-------+-----------+ 
```

或者，如果可能，只返回实际重复的 table_2 中的数据。“重复”字段也可以是一个计数，因为我确实知道具有相同 table_3_id 的行数。

我希望我的问题已经足够清楚了。如果不够清楚，我会尝试改进它。我已经尝试过使用连接和子查询，但是我的 SQL 知识不足以进行这样的高级查询。我更喜欢在单个查询中而不是在 PHP 中的多个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:34:57.603

您可以使用以下内容：

```
select Name
from table
group by name
having count(*) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:52:00.543

如果有重复，您需要检查 Table_2 中的每一行。这可以通过子查询来完成，如下所示：

```
SELECT 
    B.Table_3_ID
    ,A.Name 
    ,A.Value
    ,(SELECT COUNT(*) FROM Table_2 C
        WHERE C.Name = A.Name AND C.Value = A.Value)
    AS DuplicateCount
FROM Table_2 A
INNER JOIN Table_1 B
    ON A.Table_1.ID = B.ID 
```

我的SQL可能有一些错误，尤其是表别名，因为我目前没有语法检查，但原理应该可以。

# twisted - 如何在 twisted.words oscar (icq) 中将好友添加到好友列表

> ID：13228452
> 
> 赞同：2
> 
> 时间：2012-11-05T08:33:47.063
> 
> 标签：twisted, icq, twisted.words

我有一个小型机器人在 ICQ 上与用户交流，它使用 Twisted.Words、Oscar 协议。我需要查看他们的在线状态，但这似乎只有在我的好友列表中有他们时才有可能。那么问题来了：

如何在 Twisted.Words Oscar 的好友列表中添加好友？

这很奇怪，但在 API 文档中似乎没有任何内容，而且我在 oscar.py 源代码中找不到任何好的线索。:\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:33:00.350

经过数小时查看 oscar.py 的代码和 OSCAR 协议文档后，我终于想出了一个解决方案。

所以我们开始吧。转到此示例 中的函数**gotBuddyList(self, l) ：** [http ://twistedmatrix.com/documents/current/words/examples/oscardemo.py](http://twistedmatrix.com/documents/current/words/examples/oscardemo.py)

您可能有自己的类似物，即收到 SSI 时调用的回调函数。它是这样绑定的：

```
self.requestSSI().addCallback(self.gotBuddyList) 
```

所以在这个 gotBuddyList(self, l) 函数中你把这个：

```
self.groupAll = l[0][0] 
```

就我而言，这包含我的好友列表中的第一个好友组（它是预先手动创建的，来自常规 ICQ 客户端）。**l**变量是从服务器接收到的SSI，它包含您的好友组、这些组中的好友以及其他内容，例如设置或其他内容。这是根据 OSCAR 文档。

我要将我的好友添加到我列表中的第一组。如果您有自己的案例或想要创建更灵活的解决方案，则必须对此进行更多调查。

接下来，当您想在好友列表中添加新好友时，请执行此操作（假设这仍在您的 BOSConnection 的实现类方法之一中）：

```
buddy = oscar.SSIBuddy(the_uin_to_add)  # put the UIN of the buddy to add in the argument
try:
    buddyID = max(self.groupAll.usersToID.itervalues()) + 1    # incrementing the buddyID
except ValueError:       # if the group is empty yet
    buddyID = 1
self.groupAll.addUser(buddyID, buddy)   # adding it to the group
self.addItemSSI(buddy)      # actually sending the stuff to the server 
```

在这里，您的好友现在在您的列表中。如果他在线，您将立即收到一个*updateBuddy*事件，其中包含有关他的在线状态等信息。

在这里，我无法真正理解 buddyID 是什么。没有任何信息可以解释。但我最终假设它只是好友所在组内的一个内部 ID。它被限制为 32767。我决定从 1 开始，每次从组中的最高值开始递增 1。

那是我的全部了。我希望它可以帮助某人一次。如果您可以添加任何内容或纠正我，我会很高兴看到您的评论！

# javascript - 使用图形 api 的 Facebook 用户搜索返回一个空数组

> ID：13228454
> 
> 赞同：0
> 
> 时间：2012-11-05T08:34:12.820
> 
> 标签：javascript, facebook, api, facebook-graph-api

如果查询不具体，我会在用户搜索中得到一个空数组。

意思是，当我使用： [https://graph.facebook.com/search?q=shlomi.schwartz&type=user&access_token=AAAAAAITEghMBAE5LVc14njXWThH8LE8kxGlCYAUwShVMmNSFixn85pk1baLMAC8gJaqX5QHVEOpwebUv5ilYiW09yThHCxaMJdQa9QZDZD](https://graph.facebook.com/search?q=shlomi.schwartz&type=user&access_token=AAAAAAITEghMBAE5LVc14njXWThH8LE8kxGlCYAUwShVMmNSFixn85pk1baLMAC8gJaqX5QHVEOpwebUv5ilYiW09yThHCxaMJdQa9QZDZD)

我得到结果

但是，如果我从用户名中删除 1 个字母，我将得到一个空数组： [https://graph.facebook.com/search?q=shlomi.schwart&type=user&access_token=AAAAAAITEghMBAE5LVc14njXWThH8LE8kxGlCYAUwShVMmNSFixn85pk1baLMAC8gJaqX5QHVEOpwebUv5ilYiW09yThHCxaMJdQa9QZDZD](https://graph.facebook.com/search?q=shlomi.schwart&type=user&access_token=AAAAAAITEghMBAE5LVc14njXWThH8LE8kxGlCYAUwShVMmNSFixn85pk1baLMAC8gJaqX5QHVEOpwebUv5ilYiW09yThHCxaMJdQa9QZDZD)

我正在尝试为用户搜索实现自动完成输入，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:57:26.843

谷歌是你的朋友，它自 7 月以来报告了错误。 [http://developers.facebook.com/bugs/104388699704651/](http://developers.facebook.com/bugs/104388699704651/)

# java - Hibernate 双向多对多关联创建重复项

> ID：13228455
> 
> 赞同：8
> 
> 时间：2012-11-05T08:34:22.627
> 
> 标签：java, hibernate, caching

[我的问题与二级缓存的 Hibernate Bi-Directional ManyToMany Updates](https://stackoverflow.com/questions/2951350/hibernate-bi-directional-manytomany-updates-with-second-level-cache)非常相似

我上课如下图

```
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
@Entity 
public class A{
     private int id;
     private List<B> listB;

     ...
     @Cache (usage = CacheConcurrencyStrategy.TRANSACTIONAL)
     @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE}, targetEntity = B.class)
     @JoinTable(name = "A_B", joinColumns = { @JoinColumn(name = "a_id") }, 
        inverseJoinColumns = { @JoinColumn(name = "b_id") })
     public List<B> getListB() {
         return listB ;
     }
}

@Cache (usage = CacheConcurrencyStrategy.TRANSACTIONAL)
@Entity
public class B{
     private int id;
     private List<A> listA;

     @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE}, targetEntity = A.class)
     @JoinTable(name = "A_B", joinColumns = { @JoinColumn(name = "b_id") }, inverseJoinColumns = { @JoinColumn(name = "a_id") })
     public List<a> getListA() {
         return listA ;
     }

     public void addToA(A a) {
         a.getListB().add(this);
     }
} 
```

正如在多对多关系中所预期的那样，我一直在更新双向关系的双方。

现在我面临的问题是，当我尝试添加/更新集合中的项目时会弹出重复的条目。以下是我用来持久化实体的代码...

```
b.getA().clear() ;
...
...
b.getListA().add(A) ;
b.addToA(A) ;
em.saveOrUpdate(b) ; 
```

以下是从日志中获取的 Hibernate 触发的查询。

```
delete from A_B where b_id=?

insert into A_B (b_id, a_id) values (?, ?)
insert into A_B (b_id, a_id) values (?, ?)

delete from A_B where a_id=?

insert into A_B (a_id, b_id) values (?, ?)
insert into A_B (a_id, b_id) values (?, ?)
insert into A_B (a_id, b_id) values (?, ?)
insert into A_B (a_id, b_id) values (?, ?) 
```

我在哪里错了？如何摆脱正在插入的重复项？缓存正在被正确刷新，但重复的条目是唯一的问题！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T08:37:01.947

这是经典！

问题是您的两个映射都是所有者，一个应该是所有者，一个应该是反向的。因为两者都是所有者，所以对其中任何一个的更改都会导致插入数据库；有一个所有者和一个逆，将只有一组插入。

您应该能够重写`B::getListA`为：

```
 @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE}, mappedBy = "listB")
 public List<A> getListA() 
```

并让一切正常。

注意只有拥有方作为`@JoinTable`注解。通常，数据库的任何给定位都映射到JPA 应用程序中的*一个*位置。如果您发现自己绘制了两次地图，请仔细查看是否有更好的方法来做到这一点。

顺便说一句，您不需要`targetEntity`属性；JPA 提供者可以从泛型中解决这个问题。

# iphone - 请将此设备连接到 Xcode 以安装开发支持文件

> ID：13228456
> 
> 赞同：6
> 
> 时间：2012-11-05T08:34:24.657
> 
> 标签：iphone, xcode, xamarin.ios

我正在使用 Monotouch 开发 iPhone 应用程序。我的应用程序现在运行良好，我想测试更多。

但是，突然之间，我遇到了这个我以前从未见过的错误。谷歌帮不了我，我希望你能。

```
error MT0000: Unexpected error - Please file a bug report at http://bugzilla.xamarin.com
System.Exception: Could not find developer tools for this device. Please connect this device to Xcode to install the development support files.
  at MonoTouch.Installation.Device.MountDeveloperImage () [0x00000] in <filename unknown>:0 
  at MonoTouch.Installation.Installer.KillApplication (MonoTouch.Installation.Device d, System.String appId) [0x00000] in <filename unknown>:0 
  at MonoTouch.Installation.Installer+<KillApplication>c__AnonStorey7.<>m__8 (MonoTouch.Installation.Device d) [0x00000] in <filename unknown>:0 
```

[我在这里](http://pastebin.com/9anpZgzd)的 Pastebin 上发现了这个问题。就这样。

上周，一切正常。我清理了我的项目，构建并重建它，重新启动系统，打开 XCode，用 XCode 打开视图（以加载 Xcode 项目），没有任何效果。而现在，没有一个应用程序可以正常运行。

也许这是由 XCode 更新引起的？还是这是由 iOS 更新 (6.0.1) 引起的？

**编辑：**我还联系了 Xamarin 支持中心。我会保持联系。

**编辑 2：**这是来自 Xamarin 支持的答案

> 这是我们知道的一个问题，并已在 MonoTouch 6.0.6（目前处于 beta 通道中）中解决了这个问题。如果您不想更新到 MonoTouch 6.0.6， 可以在[https://bugzilla.xamarin.com/show_bug.cgi?id=8166](https://bugzilla.xamarin.com/show_bug.cgi?id=8166)上发布关于该错误的解决方法，您可以申请解决该问题。
> 
> 我希望这有帮助。

我首先指出问题的 MJJames 回答是有效的。非常感谢。

我尝试修复并反馈。

**编辑 3：** 我将更新频道（*MonoDevelop > Check for Updates*）更改为**Beta**，并下载了 MonoTouch 和 MonoDevelop beta 更新。它再次起作用。Xamarin，MJJames，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T10:06:03.743

Xamarin 已将 MonoTouch 6.0.6 发布到 Beta 更新频道，如果您可以运行 Beta，这可以解决问题。

[http://docs.xamarin.com/ios/releases/MonoTouch_6/MonoTouch_6.0#MonoTouch_6.0.6](http://docs.xamarin.com/ios/releases/MonoTouch_6/MonoTouch_6.0#MonoTouch_6.0.6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T17:53:54.163

如果您尝试使用 XCode 的 beta 版本，您可能需要手动将 Xamarin Studio 指向它。至少如果您使用的是 Xamarin Studio 5.9 或更高版本。

来自[https://forums.xamarin.com/discussion/18658/xcode-6-beta](https://forums.xamarin.com/discussion/18658/xcode-6-beta)：

> 你好，
> 
> 是的，只需在 Xamarin Studio 首选项 -> 项目 -> SDK 位置 -> Apple 设置页面中更改 Apple SDK 位置。单击 Browse 按钮​​并导航到 Applications 文件夹中的 XCode6-Beta5.app。

用更现代的东西替换 XCode6-Beta5-app 位置：

![在此处输入图像描述](../Images/41f014c25e30647b7416e898fe35035b.png)

然后，如果您收到提及 DetectSdkLocations 的错误，[您可能需要重新启动](http://forums.xamarin.com/discussion/40392/the-detectsdklocations-task-failed-unexpectedly)。

# c++ - 操作二维数组的可能优化

> ID：13228465
> 
> 赞同：1
> 
> 时间：2012-11-05T08:34:47.603
> 
> 标签：c++, c, linux, optimization

我有一个由二维字符数组表示的图像，我需要对这个图像执行一些操作并将结果存储在另一个二维数组中，这些操作从计算相邻单元格的平均值到重新排序行不等。我可以做哪些优化来获得更好的性能？欢迎任何可能的技术（例如引用的位置、内联汇编……）

我`c`在 linux x86_64 机器上使用

PS：我有原始彩色图像，每个像素由一组 RGB 值表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:48:57.960

*   首先，为每个 rgb 三元组分配 4 个字节。
*   每行的开头都有一个指针，然后可以通过指针交换来完成洗牌
*   将您的 API 计划为`void process_row(int *out_row, int *in_row, int *row_above, int *row_below);`

*   一些 RGB 计算可以与普通整数算术并行计算。

    *   例如 00rrrrrrrr 00bbbbbbbb 00gggggggg 适合单个 32 位整数。
        可以添加其中的 4 个而不会溢出，然后只需将结果右移 2 位
        并使用 0011111111 0011111111 0011111111 b 进行掩码
        （这当然需要对数据进行预处理和后处理）
    *   在64位处理器上打包`00 rr 00 gg 00 bb 00 aa`也是可行的办法
*   可能更简单的方法是使用[__sse 内在函数](https://stackoverflow.com/questions/7156908/sse-intrinsic-functions-reference)，从中只需一小步...
*   内联汇编器
*   还有一个包[ORC](http://code.entropywave.com/orc/)，它实现了[便携式 SIMD](https://stackoverflow.com/questions/981787/good-portable-simd-library)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:18:32.260

您可以使用一维数组代替二维数组，这将大大提高缓存命中率。这将优化程序运行时间。

# html - 重复单个 CSS 对象

> ID：13228470
> 
> 赞同：2
> 
> 时间：2012-11-05T08:35:14.287
> 
> 标签：html, css

我想用纯 CSS 制作一个类似斑马的图案。一个工作有多个跨度实例来生成重复。[这是代码](http://jsfiddle.net/troymeren/6v3QS/)。

```
<div id="wrap">    
 <span class="one"></span>
 <span class="two"></span>
 <span class="three"></span>
 <span class="four"></span>
 <span class="five"></span>
</div> 
```

​我知道使用 x-repeating 条纹会更容易，但我想知道**是否可以在**`<span>`不使用 a或`<div>`类似的多个实例的情况下使用纯 CSS 制作：

```
<div id="wrap">    
 <span></span>
</div>

#wrap span {
 background: #000;
 /* stripe shape coordinates */

 repeat: x-repeat; /* something like this */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:41:05.500

如果您不介意放弃对旧浏览器的支持，您可以使用`:nth-child()`：

```
#wrap span:nth-child(odd) {background-color:#000} 
```

[MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:43:43.457

我认为这个[线程](https://stackoverflow.com/questions/3664224/css-zebra-stripe-background-without-image)是你正在寻找的，特别是这样的[东西](http://css3wizardry.com/2010/08/19/css3-gradients-and-patterns/)。这是用于制作图案的 css3 渐变。基本上，您为背景创建一个图案，然后让该图案重复。但是，较旧的浏览器将无法使用，但我不知道这是否是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:42:51.860

试试[这个](http://www.w3.org/TR/selectors/#nth-child-pseudo)：

```
span:nth-child(2n+1) /* represents every odd-numbered child of its parent */
span:nth-child(odd)  /* same */ 
```

# maven - 如何访问 maven.build.timestamp 进行资源过滤

> ID：13228472
> 
> 赞同：119
> 
> 时间：2012-11-05T08:35:37.563
> 
> 标签：maven, timestamp, maven-3

我正在使用 maven 3.0.4 并希望我的应用程序可以访问构建时间戳。为此，我在`.properties`文件中放置了一个占位符，并让 Maven 在构建时进行过滤。虽然这对 , 工作正常`${project.version}`，`${maven.build.timestamp}`但不能代替过滤。

该属性似乎在构建时可用 - 我可以使用它来修改工件名称：

`<finalName>${project.artifactId}-${maven.build.timestamp}</finalName>`

那么为什么它不能用于资源过滤呢？而且，更重要的是，我如何使其易于访问？

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-11-05T09:04:29.720

我发现[了这篇文章](https://dzone.com/articles/stamping-version-number-and)，解释说由于[maven 中的错误](https://issues.apache.org/jira/browse/MRESOURCES-99)，构建时间戳不会传播到过滤器。解决方法是将时间戳包装在另一个属性中：

```
<properties>
   <timestamp>${maven.build.timestamp}</timestamp>
   <maven.build.timestamp.format>yyyy-MM-dd HH:mm</maven.build.timestamp.format>
</properties> 
```

然后过滤按预期工作

```
buildTimestamp=${timestamp} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-10-23T00:07:14.863

我可以确认 Maven 3.x`{maven.build.timestamp}`现在正在“工作”。显然，他们[解决](http://svn.apache.org/viewvc?view=revision&revision=1742471)了这个问题。不再需要额外`properties`的解决方法。

但是，请注意您的“过滤”插件（maven-resources-plugin）是最新的。它需要相对较新，因此如果`mvn help:effective-pom`显示旧版本（例如：2.6），请将其撞到较新的版本，为我修复它，例如 3.x：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-resources-plugin</artifactId>
  <version>3.1.0</version>
</plugin> 
```

`<properties><timestamp>...`不再需要解决方法...

这也澄清了为什么它在 IntelliJ 中工作而不是在命令行中工作。IntelliJ 可能使用他们自己的“修改/内部”maven 常量，所以它在那里工作，但不是来自 maven 命令行。

另请注意，如果您向 pom 添加过滤资源目录，您可能还需要“重新添加”默认目录，它会丢失，例如：

```
 <resource>
    <directory>src/main/resources-filtered</directory> <!-- to get "maven.build.timestamp" into resource properties file -->
    <filtering>true</filtering>
  </resource>
  <resource>
    <directory>src/main/resources</directory> <!-- apparently have to add this is you have the other... -->
  </resource> 
```

注意如果你使用 spring boot 作为你的父母，你必须使用 @maven.build.timestamp@[代替](https://stackoverflow.com/questions/35417086/maven-resource-filtering-with-spring-boot-could-not-resolve-placeholder)。另请注意，如果您使用的是 Spring Boot `META-INF/build-info.properties`，则可以选择由`spring-boot-maven-plugin`您可以[读取](https://www.vojtechruzicka.com/spring-boot-version/)`BuildProperties`的文件创建一个文件（为了方便阅读，Spring 提供了一个bean）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-06T12:06:54.773

为了丰富其他人的 Stackoverflow 内容，像我一样，发现这篇文章是解决`${maven.build.timestamp}`. 这不是 maven 错误，而是 m2e 的预期行为，如[本文](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388874#c4)所示。

因此，我认为我们不能指望解决方案被“纠正”，因为据我了解，纠正涉及概念问题。

就我而言，我所做的是使用[其他帖子](https://stackoverflow.com/a/16675480)`buildnumber-maven-plugin`中描述的插件 () 。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-28T08:13:58.353

在 pom 项目级别添加 Maven 属性没有考虑正确的本地时区，因此时间戳可能会出现错误：

```
<properties><timestamp>${maven.build.timestamp}</timestamp></properties> 
```

使用 build-helper-maven-plugin 将正确的时区和当前夏令时应用于时间戳：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.9.1</version>
            <executions>
                <execution>
                    <id>timestamp-property</id>
                    <goals>
                        <goal>timestamp-property</goal>
                    </goals>
                    <configuration>
                        <name>timestamp</name>
                        <pattern>yyyy-MM-dd HH:mm:ss</pattern>
                        <timeZone>Europe/Zurich</timeZone>
                    </configuration>
                </execution>
            </executions>
        </plugin>
     </plugins>
     <resources>
         <resource>
             <directory>src/main/resources</directory>
             <filtering>true</filtering>
         </resource>
     </resources>
 </build> 
```

打包时，Maven 将替换 /resources 文件夹中的任何令牌时间戳，例如 resources/version.properties ：

build.timestamp=${timestamp}

然后，您可以在您的应用程序中加载此属性文件。

# php - htaccess 用于子目录以防止脚本执行

> ID：13228473
> 
> 赞同：3
> 
> 时间：2012-11-05T08:35:41.677
> 
> 标签：php

我有权限为 777 的子目录“图像”，可以从该文件夹中的访问者上传图像。有 .htaccess 文件以防止脚本执行和更高的安全性

```
<Files ^(*.jpeg|*.jpg|*.JPEG|*.JPG|*.png|*.gif)>
    order deny,allow
    deny from all
</Files>

<FilesMatch "\.(php|pl|py|jsp|asp|htm|shtml|sh|cgi)$">
ForceType text/plain
</FilesMatch> 
```

但是当我在浏览器中请求 images/page.php 时，它正在工作**，这意味着 .htaccess 不起作用**。我想阻止这个文件夹成为可执行文件。

**我的 .htaccess 文件中是否有任何错误**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-20T05:39:31.537

这里还有一条评论，我建议对您的脚本规则进行不区分大小写的检查，即：

```
<FilesMatch "(?i)\.(php5|php4|php|php3|php2|phtml|pl|py|jsp|asp|htm|shtml|sh|cgi)$">
    ForceType text/plain
</FilesMatch> 
```

这适用于我们的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:56:17.320

当然，您可以访问所有 .php 文件，因为您只是禁止访问图像文件。我认为第一个正则表达式的末尾也应该有一个 $ 。也许你的意思是这样的：

```
<Files *>
    order deny,allow
    deny from all
</Files>

<Files ^(*.jpeg|*.jpg|*.JPEG|*.JPG|*.png|*.gif)$>
    order deny,allow
    allow from all
</Files>

<FilesMatch "\.(php|pl|py|jsp|asp|htm|shtml|sh|cgi)$">
    ForceType text/plain
</FilesMatch> 
```

# iphone - 最近上传到 App Store 的 iPhone 应用程序在启动时崩溃

> ID：13228474
> 
> 赞同：2
> 
> 时间：2012-11-05T08:35:42.033
> 
> 标签：iphone, ios, crash, app-store

我将我的 iPhone 应用程序的新版本上传到了 App Store。它是在昨天发布的。问题是应用程序在启动时就崩溃了。我得到的崩溃日志如下。任何帮助都会非常显着。

这是我的崩溃日志，

```
Incident Identifier: 7868F4D2-C13E-4D97-995F-A69F85022F8C
CrashReporter Key:   113c3b5b073754be0c5c2b9758ca6b6d2afa09e6
Hardware Model:      iPhone3,1
Process:         Ph_PDF [623]
Path:            /var/mobile/Applications/85E5F394-9006-431D-8F40-4780112F0343/Ph_PDF.app/Ph_PDF
Identifier:      Ph_PDF
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-11-05 11:13:04.916 +0530
OS Version:      iPhone OS 5.0 (9A334)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x96f6c04c
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x37ff9fbc objc_msgSend + 16
1   Ph_PDF                          0x000178ae 0x1000 + 92334
2   UIKit                           0x32e2c7e4 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1180
3   UIKit                           0x32e263b6 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 390
4   UIKit                           0x32df491a -[UIApplication handleEvent:withNewEvent:] + 1010
5   UIKit                           0x32df43b8 -[UIApplication sendEvent:] + 48
6   UIKit                           0x32df3d26 _UIApplicationHandleEvent + 5802
7   GraphicsServices                0x339dfe0c PurpleEventCallback + 876
8   CoreFoundation                  0x30e2e54c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
9   CoreFoundation                  0x30e2e4ee __CFRunLoopDoSource1 + 134
10  CoreFoundation                  0x30e2d33c __CFRunLoopRun + 1364
11  CoreFoundation                  0x30db04d6 CFRunLoopRunSpecific + 294
12  CoreFoundation                  0x30db039e CFRunLoopRunInMode + 98
13  UIKit                           0x32e25450 -[UIApplication _run] + 544
14  UIKit                           0x32e2273c UIApplicationMain + 1084
15  Ph_PDF                          0x0000250c 0x1000 + 5388
16  Ph_PDF                          0x000024c0 0x1000 + 5312 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:40:27.383

这是 objc_msgSend，您正在对不响应相应选择器的对象调用方法...

可能不再包含在 SDK 或指定 iOS 版本中的已弃用方法，也许您忘记链接特定库以获取发布版本？

您是否针对您的应用声称支持的所有 iOS 版本测试了您的应用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:50:31.923

您是否会使用 Core Data 并修改您的 Core Data 实体结构？

如果您可以提供一些关于您的应用使用哪种技术以及自应用商店上一个工作版本以来您所做的更改的一些见解，那将有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:36:49.583

png 粉碎可能会导致应用程序在某些情况下崩溃。那是因为当应用程序无法正确获取图像进行显示时，它会崩溃。我认为在您的情况下，该应用程序在启动时崩溃了。请先检查您的启动画面图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T11:51:46.740

最后我发现了问题。当我迁移到新的 XCode 时，我将 Google Analytics Library 更新到了需要支持 armv7s 架构的新版本。它在新的 XCode 中运行良好。但是我从具有 XCode 3.2.5 的旧 Mac 上传了二进制文件。当我正在构建它时，它不会出错。但是当应用程序在设备中运行时，它会崩溃。我将谷歌分析库恢复到旧版本，问题就解决了。

谢谢你们的支持。。：）

# c# - 从十六进制字符串到字节数组 C#

> ID：13228475
> 
> 赞同：1
> 
> 时间：2012-11-05T08:35:48.280
> 
> 标签：c#, hex, bytearray

我输入了字符串：“0080801D803480002A1168301FE16E09”，当我使用代码将其转换为 byteArray 时：

```
Convert.ToByte(inputWrite.Substring(i, 2), 16); 
```

我在第一个位置得到字节数组=“0”，但我需要有“00”，所以当我再次将它转换为字符串时，开始时不要得到“08”而是“00”。我进入了`string "080801D80348002A1168301FE16E9"`并且像这样我错过了一些重要的0，我需要从最后一个字符串再次转换为字节并转换为十进制值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:42:21.687

`0`一旦你在一个数组中有你的再见，和之间就没有区别了`00`。

您需要做的是，将这些字节转换回字符串时，请确保将所有前导零放回。您可以通过调用来做到这一点

```
string byteAsTwoDigitString = myByte.ToString("X2"); 
```

表示“`X`十六进制”，`2`表示“至少有两位数”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:52:26.587

你似乎把事情搞糊涂了。因为每个字节由两个字符表示，所以字节数组将比字符串短两倍。解析回来时，您必须确保每个字节都必须转换为双字符字符串，*即使它小于 0x10*，即不需要第二个字符。

也就是说，您可以使用以下 LINQ oneliner：

```
string convertedBack = string.Join(string.Empty, bytes.Select(x => x.ToString("X2")).ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:37:53.390

您也可以使用 LINQ 执行此操作：

```
 public static byte[] StringToByteArray(string hex) {
return Enumerable.Range(0, hex.Length)
                 .Where(x => x % 2 == 0)
                 .Select(x => Convert.ToByte(hex.Substring(x, 2), 16))
                 .ToArray();
 } 
```

你也可以参考[这个](http://www.codeproject.com/Articles/4086/Converting-Hexadecimal-String-to-from-Byte-Array-i)

# visual-studio-2010 - 使用 Visual Studio 2010 的 TFS 客户端错误

> ID：13228480
> 
> 赞同：2
> 
> 时间：2012-11-05T08:36:11.597
> 
> 标签：visual-studio-2010

每当我尝试执行与 TFS 相关的任何操作时，VS2010 TFS 客户端都会出现这个奇怪的错误。

> 找不到方法：'System.String Microsoft.TeamFoundation.VersionControl.Client.ExtendedItem.get_LockOwnerDisplayName()'

更多背景：我在我的机器上使用 TFS 构建服务，
后来我卸载了 TFS 构建服务.. 之后我开始遇到这个问题。

我还修复了 VS 2010 (Pro edition) 并重新安装了 VS 2010 SP1 。重新安装了 TFS 构建服务，也重新安装了 tfs 电动工具，但问题仍然存在。

![TFS 客户端错误](../Images/3cef1e90a5d83ae23195d9ce8e3fe3cf.png) 任何线索如何修复/解决这个问题？
有什么方法可以修复 VS2010 的 TFS 客户端部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:15:47.327

安装以下修补程序后，问题得到修复。

[修复：Visual Studio 2010 SP1 的修补程序可用于添加对 Visual Studio Team Foundation 服务预览的兼容性支持](http://support.microsoft.com/kb/2581206)

来自上述网站的有趣点：

> 注意以下修补程序包括在 Visual Studio 2010 SP1 发布后发布的所有 Team Foundation 客户端修补程序。

希望这对其他人也有帮助。
（我想这一定刷新了我的 VS2010 TFS 客户端文件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T11:45:34.383

另一种解决方案：将项目绑定并重新绑定到 TFS 服务器。它解决了我的问题。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:21:23.680

在 Windows Update 将更新 KB2813041 安装到 Visual Studio 2010 后，我也遇到了同样的问题。在我**卸载**了这个单独的更新后，它又开始工作了。

以下是卸载单个更新的方法。转到控制面板 > Windows 更新 > 查看更新历史记录 > 已安装的更新（出现在对话框顶部的一句话中）。然后，滚动浏览更新列表以查找 Visual Studio，然后右键单击要卸载的更新并单击卸载。

希望这可以帮助某人。

谢谢，

安迪

# java - 简单框架：消除序列化 XML 中不需要的空白

> ID：13228481
> 
> 赞同：2
> 
> 时间：2012-11-05T08:36:12.440
> 
> 标签：java, whitespace, simple-framework

**问题**：

> 使用 Simple 框架时如何从序列化的 XML 中消除不必要的空白字符？

**细节：**

让我们考虑一下来自 Simple framework 网站的[这个非常基本的示例。](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#start)XML 输出为：

```
<example index="123">
   <text>Example message</text>
</example> 
```

我如何指示序列化程序输出它呢？

`<example index="123"><text>Example message</text></example>`

我检查了`org.simpleframework.xml.stream.Style`界面，但它似乎只能处理单个元素和属性*名称*，而不是内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T16:23:10.917

您可以`Format`为此使用类：

**用法：**

```
final Format format = new Format(0);

Serializer ser = new Persister(format);
ser.write(new Example(123, "Example message"), new File("out.xml")); 
```

* * *

假设您的`Example`班级看起来像这样：

```
@Root
public class Example
{
    @Attribute(name="index", required=true)
    private int index;
    @Element(name="text", required=true)
    private String text;

    public Example(int index, String text)
    {
        this.index = index;
        this.text = text;
    }

    // ...

} 
```

您将使用上面的代码获得以下 XML (File `out.xml`) ：`Serializer`

```
<example index="123"><text>Example message</text></example> 
```

# php - 更新选择内容而不重新加载表单

> ID：13228485
> 
> 赞同：0
> 
> 时间：2012-11-05T08:36:28.333
> 
> 标签：php, javascript, ajax

我有一个很长的表单，其中有许多 HTML 表单选择从 MySQL 表中提取数据 - 当客户意识到他们想要的部门值尚未输入时，通常会在填写表单的中途进入系统所以不在列表中。

我添加了一个用于添加部门的简化弹出窗口的链接，但添加后它不会出现在选择列表中，因为该选择的内容基于初始查询运行时页面负载上可用的内容 - 如何我可以在无需提交然后编辑、无需刷新/重新加载页面且客户端不会丢失他们当前添加的数据的情况下获得更新的选择吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:41:47.210

是否阅读了您的要求，因为它太长了）但是您是否尝试过 javascript？只有使用 javascript 才能在分页加载后更改表单值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:43:06.297

在该弹出窗口上提交表单时，将其与 ajax 一起保存在数据库中，并作为响应获取插入的数据...然后在 ajax 成功时在 select 中添加新选项（返回数据）

# java - 对于每个循环，读取一行

> ID：13228488
> 
> 赞同：-4
> 
> 时间：2012-11-05T08:36:32.367
> 
> 标签：java

```
for (String line = br.readLine(); line != null; line = br.readLine()) 
```

我知道每个循环，但在开始和结束时很少混淆，我知道`br.readline()`按行读取文本文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:39:08.897

我不知道问题是什么，但是......

```
for (String line = br.readLine(); line != null; line = br.readLine()) {
    // do loop
} 
```

是相同的

```
String line = br.readLine();
while(line != null) {
    // do loop
    line = br.readLine();
} 
```

不过我更喜欢

```
for(String line; (line = br.readLine()) != null;) {
   // do loop
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:45:54.370

中的[`For`循环语句`Java`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)定义为 (C&P)：

```
for (<initialization>; <termination>; <increment>) {
    statement(s)
} 
```

使用此版本的 for 语句时，请记住：

*   初始化表达式初始化循环；它在循环开始时执行一次。
*   当终止表达式的计算结果为 false 时，循环终止。
*   每次循环迭代后都会调用增量表达式；这个表达式增加或减少一个值是完全可以接受的。

因此，在您的表达式中，您正在初始化一个字符串：

```
String line = br.readLine(); 
```

当这不正确时，循环将结束：

```
line != null; 
```

那就是：在你做之后

```
line = br.readLine()) 
```

并得到`null`.

# vb.net - 如何在 vb.net 中的 cellclick 事件上的 DataGridView 中在运行时跟踪对象

> ID：13228489
> 
> 赞同：0
> 
> 时间：2012-11-05T08:36:38.160
> 
> 标签：vb.net, datagridview, runtime

当我单击 datagridview 中的单元格时，根据我的功能，将打开一个对话框。我填充对话框中的所有值并将对话框值动态存储到对象中。

其他行遵循相同的过程。

现在我应该如何坚持所有的对象值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:24:24.413

您可以尝试将它们保存在列表中

假设您的对象的名称是 myObject ，具有属性、Id、Name 和 Amount

然后每次保存对象时，您都可以将其添加到该列表中：

```
 Dim myList As New List(Of myObject)

' Fill your object with dialog values
dim tempObj as new myObject
tempObj.Id=
tempObj.Name=
tempObj.Amount=

'When you want to save the object'
 myList .Add(tempObj)
'You can do all together and avoid the creation of tempObj:
 'myList .Add(New myObject() With {.Id= 10,.Name="dad",.Amount=122}) 
```

如果您需要更多帮助，您需要提供更多信息。

# iphone - 以编程方式将图像粘贴到图像上

> ID：13228491
> 
> 赞同：0
> 
> 时间：2012-11-05T08:37:00.807
> 
> 标签：iphone, objective-c, ios, uiimageview

我有这个功能，可以截取我的应用程序上的一个小屏幕截图`UIView`，我的问题是我想在这个图像中添加一个位于我的图像文件夹中的背景。我要添加的背景未显示在当前视图上，我只想在保存图像之前以编程方式将其粘贴到屏幕截图图像后面。可能吗？

（我不想创建一个带有背景的新视图，而不是添加屏幕截图图像，而不是再次拍摄屏幕截图。太多了）

可以说这是已拍摄的图像：

```
 ______
 /      \
/        \
\        /
 \______/ 
```

这是与图像一起的背景图像：

```
 _________________
|                 |
|     ______      |
|    /      \     |
|   /        \    |
|   \        /    |
|    \______/     |
|                 |
|_________________| 
```

这是我的代码：

```
- (void)takeScreenShotAndSaveIt:(CGPoint)center
{
    // IMPORTANT: using weak link on UIKit
    if(UIGraphicsBeginImageContextWithOptions != NULL)
    {
        UIGraphicsBeginImageContextWithOptions(smallview.frame.size, NO, 0.0);
    } else {
        UIGraphicsBeginImageContext(smallview.frame.size);
    }

    [smallview.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // Save image to iPhone documents directory
    NSData * imgData = [[NSData alloc] initWithData:UIImagePNGRepresentation(viewImage)];
    NSString * filename = [NSString stringWithFormat:@"MeasureScreenShot.png"];
    NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString * documentsDirectory = [paths objectAtIndex:0];
    NSString * path = [documentsDirectory stringByAppendingPathComponent:filename];
    [imgData writeToFile:path atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:42:49.083

如果我正确理解您要执行的操作，请尝试以下操作：

```
- (void)takeScreenShotAndSaveIt:(CGPoint)center
{
  ...
  [backgroundImageView.layer renderInContext:UIGraphicsGetCurrentContext()];
  [smallview.layer renderInContext:UIGraphicsGetCurrentContext()];
  UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  ... 
```

`backgroundImageView`包含背景图像的 UIImageView在哪里。您只需在同一上下文中渲染两个视图。如果您更喜欢将背景作为图像而不是视图来处理，您可以使用：

```
[bckImage drawAtPoint:CGPointZero blendMode:kCGBlendModeNormal alpha:1.0]; 
```

# java - 如何使用 OpenOffice API 将 HTML 文本放入 OpenOffice 文档

> ID：13228494
> 
> 赞同：4
> 
> 时间：2012-11-05T08:37:04.990
> 
> 标签：java, html, api, openoffice.org, uno

让我们看看这个例子：

1.  我有`HTML`标记文本：

    ```
    <font size="100">Example text</font> 
    ```

2.  我有`*.odt`（OpenDocument 文本）文档，我想在其中放置此 HTML 文本，其格式取决于 HTML 标记（在此示例中，`font`标记应省略，文本`Example text`在结果文件中应具有 100 磅大小的字体`*.odt`）。

我更喜欢（但这不是严格的要求）使用 OpenOffice UNO API for Java 来实现这一点。有没有办法使用简单的 UNO API 内置 HTML-odt 转换器或类似的东西将此文本注入*文档正文（或者我必须**手动*浏览文本中的标签，然后使用 OO UNO API 放置具有特定格式的文本- 例如字体大小）？`HTML``*.odt`*`HTML`*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T09:06:31.807

好的，这就是我为实现这一目标所做的（`OpenOffice UNO Api`与 JAVA 一起使用）：

1.  将文档加载`odt`到我们要放置`HTML`文本的位置。
2.  转到要放置`HTML`文本的位置。
3.  将文本保存`HTML`在系统的临时文件中（也许可以不使用 http URL 保存，但我没有测试它）。
4.  [按照此](http://wiki.openoffice.org/wiki/Documentation/DevGuide/Text/Inserting_Text_Files)说明插入`HTML`odt并将 URL 传递给临时文件（记住将系统路径转换为路径）。`HTML``OO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:35:43.550

也许你可以使用[JODConverter](http://www.artofsolving.com/opensource/jodconverter/guide/supportedformats)或者你可以使用来自[xhtml2odt的 xslt](http://xhtml2odt.org/)*

# c++ - 派生类的朋友可以访问哪些变量？

> ID：13228497
> 
> 赞同：-1
> 
> 时间：2012-11-05T08:37:32.213
> 
> 标签：c++, class, friend, derived

为了简化我的问题，我有这样的事情：

```
class Base {

private:

protected:
    int a,b;
    string c;

public:
    [some functions here]

}

class Derived : public Base{

    [some variables and functions]

friend void function();

}

void function(){

int d[a][b];
[stuff]

} 
```

基本上，我的 void 函数需要访问基类的受保护类中的东西。我想保留在受保护部分中定义的这些变量。无论如何，函数必须与 Derived 类成为朋友，才能访问 a 和 b？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:48:21.280

您可以在中定义私有方法`Derived`：Derived 中的任何方法都可以访问 Base 的受保护成员。

Function 是 Derived 的朋友，因此它可以调用 Derived 中的那些私有方法，进而访问 Base 的受保护成员。

* * *

*编辑以回复下面的评论*

`get_a()`成员方法和`a`成员数据是其类的成员。这些成员的实例存在于它们的类的实例中。它们只存在于实例中，因此要访问它们，您需要通过类的实例来访问它们。

例如，像这样：

```
class Derived : public Base{

    [some variables and functions]

    friend void function(Derived& derived);
};

void function(Derived& derived)
{
     int a = derived.get_a();
     int b = derived.get_b();
     // I don't know but even the following might work
     int c = derived.a; // able to access field of friend's base class.
}

void test()
{
    Derived* derived = new Derived();
    function(*derived);
    delete derived;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T18:53:30.437

您的函数需要通过 Derived 类的实例访问 a 和 b，如下所示

```
void function()
{
Derived objectDerived;
int d[objectDerived.a][objectDerived.b];
[stuff]
} 
```

# django - Django：将原始html（来自数据库）显示为html，而不是呈现

> ID：13228498
> 
> 赞同：34
> 
> 时间：2012-11-05T08:37:32.377
> 
> 标签：django, django-templates

我使用tinymce 创建了一个富文本区域。我现在已将其保存到我的数据库并希望显示它。它以带有标签等的 html 格式保存在数据库中。为了显示它，我尝试过：

在视图中：

```
content = get_content_from_db()
render_to_response("template.html", {"content":content}) 
```

在模板中：

```
{{content}} 
```

这显示带有标签的内容，如下所示：

```
<strong>My text</strong> 
```

而不是仅将文本显示为粗体。

我也尝试过使用逐字标记，但这（doh！）显示为：

```
{{content}} 
```

我该怎么做？我需要以不同的方式保存它吗？我以保存任何其他 TextArea 的方式保存它，但字段是 blob。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-05T08:40:19.040

使用[`safe`过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#safe)

```
{{ content|safe }} 
```

# jsf - 是否可以在richfaces数据表中定义标签“var”的动态值？

> ID：13228504
> 
> 赞同：3
> 
> 时间：2012-11-05T08:38:01.330
> 
> 标签：jsf, richfaces

是否可以在richfaces数据表中定义标签“var”的动态值？

我有一个内部包含丰富数据表的组件，我想使用自定义的“var”名称。

我这样做

零件：

```
<rich:extendedDataTable id="#{id}_list" cellspacing="0" rows="#{rows}" var="#{itemName}"
                            value="#{data}"> 
```

页：

```
<wh:list id="f" data="#{deviceListBean.data}" rows="20" itemName="item"> 
```

但我得到这样的例外：

```
javax.servlet.ServletException: var cannot be EL-expression
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:606) 
```

我希望能够使用自定义“var”名称。可能有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:56:44.017

这是一个技巧（`name`属性`ui:param`可以是 EL 表达式）：

```
<ui:param name="#{itemName}" value="#{item}"/>
<rich:extendedDataTable var="item" value="#{data}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:40:47.433

`var`是您用来引用数据表中循环的每个项目的名称。

你会做类似的事情

```
<rich:extendedDataTable id="#{id}_list" cellspacing="0" rows="#{rows}" var="_dataItem"
                        value="#{data}"> 
```

并且在数据表里面，可以`_dataItem`用来引用当前值

```
<rich:column>
  <h:outputLabel value="#{_itemData.myValue}"/>
</rich:column> 
```

把它想象成定义以下`for`

```
for(Item _dataItem : data) {
   System.out.println(_dataItem.myValue);
} 
```

# javascript - 在 iFrame 上覆盖 jQuery Modal

> ID：13228505
> 
> 赞同：0
> 
> 时间：2012-11-05T08:38:08.570
> 
> 标签：javascript, jquery

我有一个 iframe，里面有一个 Modal，

有没有办法让我在 iFrame 宽度/高度上显示模态**对话框**？

所以假设我的 iframe 是 200x200 并且我的模态是 300x300，是否可以在 iframe 边界“外部”显示模态而不将模态附加到父页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:45:57.647

`iframe`在这种情况下您不能使用。如果您想控制 中的其他页面`iframe`，请使用一些 div。您可以使用[$.load()](http://api.jquery.com/load/)来获取其他页面的内容。然后你可以控制你想要的水。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:41:03.140

不，这是不可能的——如果没有从您的`iframe`托管代码到父页面的某种形式的消息传递，就不可能。

# java - JLabel 与 J 中的文本不符

> ID：13228509
> 
> 赞同：2
> 
> 时间：2012-11-05T08:38:32.407
> 
> 标签：java, swing

我有这种奇怪的恼人情况。我有一个插入文本的 JTextPane。Alogn with text，也有链接作为 JLabels。下面是一张快照： ![在此处输入图像描述](../Images/a4e5339aa1c1eeebaea70df072220b8a.png)

现在的问题是：为什么 JLabel（A HTML 链接）与同一行上的文本不平行？它略低于。文本为“Calibri”，字体为 14。JLabel：

```
label.setForeground(Color.blue);    
label.setFont(new Font("Check",Font.BOLD,14));                
makeLinkable(label, new LinkMouseListener()); 
```

请帮忙。JLabel 背后的链接是：`<html><a href="file:///C:/Users/Jatin/Documents/NetBeansProjects/ImageRename/log/2012-10-5%20Time%2013-52-1.csv"> file:///C:/Users/Jatin/Documents/NetBeansProjects/ImageRename/log/2012-10-5%20Time%2013-52-1.csv</a></html>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:48:56.857

看一下 JComponent#setAlignmentY(...): [java - 如何将 JLabel 适当地添加到 JEditorPane？- 堆栈溢出](https://stackoverflow.com/questions/12151158/how-to-appropriately-adding-jlabel-to-jeditorpane)

```
import java.awt.*;
import javax.swing.*;
public class BaselineTest {
  public JComponent makeUI() {
    JLabel label1 = makeLabel();
    JLabel label2 = makeLabel();
    String s = "For detailed infomation refer: ";
    JTextPane textPane = new JTextPane();
    textPane.replaceSelection(s);
    textPane.insertComponent(label1);

    Dimension d = label2.getPreferredSize();
    int baseline = label2.getBaseline(d.width, d.height);
    label2.setAlignmentY(baseline/(float)d.height);
    textPane.replaceSelection("\n\n"+s);
    textPane.insertComponent(label2);

    return new JScrollPane(textPane);
  }
  private static JLabel makeLabel() {
    JLabel label = new JLabel("2012-10-05");
    label.setForeground(Color.BLUE);
    label.setOpaque(false);
    return label;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new BaselineTest().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

# javascript - 嵌入具有固定尺寸的 Windows 媒体视频并能够通过 javascript 访问对象的问题

> ID：13228510
> 
> 赞同：1
> 
> 时间：2012-11-05T08:38:32.873
> 
> 标签：javascript, object, video, embed, wmv

我正在尝试使用播放列表将 Windows Media Video 嵌入到网页中，并且需要通过 javascript 访问播放状态更改事件和剪辑。因此我尝试了几种嵌入的可能性：

对象标签：

似乎是可取的方法，但这不会缩放 Windows 媒体播放器。[意思是，如果我在这里](https://stackoverflow.com/questions/164/embedding-windows-media-player-for-all-browsers/699#699)写一个对象标签并将大小设置为 320x240 但 WMV 具有更高的尺寸（例如 640x480），则 windows 媒体播放器总是将大小调整为视频尺寸。这会破坏页面布局，因此无法使用。这里有什么建议吗？我尝试了播放器可用的每个参数选项，没有效果。通过 javascript 访问同样适用于 play.currentMedia。

嵌入代码

试过这个：

```
<embed allowscriptaccess="always" allowScriptAccess="always" showcontrols="1" showstatusbar="0" showdisplay="0" type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" id="MediaPlayer1" name="MediaPlayer1" ShowStatusBar="true" EnableContextMenu="false" autostart="false" width="320" height="240" loop="false" src="PLAYLIST" /> 
```

这适用于 FF、IE6 和 8（也许还有其他 - 这些是需要显示它的浏览器）。视频以 320x240 的强制尺寸显示 - 好。因为我需要访问播放器以通过 javascript 检查播放状态并在视频更改时采取行动（因为输入是播放列表），所以这在这里不起作用，因为我无法访问像 currentMedia 这样在对象标签中工作的播放器属性方法。有没有办法以某种方式访问​​播放器播放列表？

我有点卡住了，因为没有解决方案符合强制视频大小和能够使用 javascript 访问播放器内部的要求。也许有人知道一个好的解决方案，我愿意接受建议 - 谢谢！

# c# - 使用 MEF 组合部件时出现异常

> ID：13228512
> 
> 赞同：1
> 
> 时间：2012-11-05T08:38:34.773
> 
> 标签：c#, visual-studio-2010, .net-4.0, mef

我正在尝试了解 MEF 并对此做了一些示例。但是，当我尝试在下面执行这个特定代码时，我遇到了一个例外。

**ConsoleApplication2.程序**

```
using System.ComponentModel.Composition;
using System.ComponentModel.Composition.Hosting;
using System.Reflection;

namespace ConsoleApplication2
{
    class Program 
    {
     [Import(typeof(Contracts.IInput))]
     public Contracts.IInput myinterface { get; set; }

    public void Method()
    {
        var catalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());
        var container = new CompositionContainer(catalog);
        container.ComposeParts(container );
        Console.WriteLine(myinterface.IsValid());
    }

    public static void Main(string[] args)
    {
        var obj = new Program();
        obj.Method();
        Console.ReadLine();
    }

   }
} 
```

我有一个用于定义接口的单独项目。

```
namespace Contracts
{
   public interface IInput
    {
      //All classes that inherit IInput must implement the IsValid Property.
      string IsValid();
    }
} 
```

在另一个单独的项目中，我使用了一个导出类。

```
 using System.ComponentModel.Composition;
 using Contracts;

 namespace Plugin
 {
    [Export(typeof(Contracts.IInput))]
    public class Plugin : IInput
    {
        public string IsValid()
        {
             return "1";
        }
    }
 } 
```

现在，所有这些都在同一个“bin\Debug”文件夹中生成（两个库文件和一个可执行文件）。但是在到达代码时执行，“composeParts(this)”会发生如下异常，

```
Object reference not set to an instance of an object. 
```

当我尝试更改“Composeparts(container)”时，还有另一个异常，如下所示，

**> 合成产生了单个合成错误。根本原因是

> 下面提供。查看 CompositionException.Errors 属性以获取更多详细信息。
> 
> 1) 无法填充集合“ConsoleApplication2.Program.myinterface”，因为它没有实现 ICollection 或者是只读的。如果集合不是 IEnumerable 或 T[] 它必须实现 ICollection 并且可以预先初始化或使用默认构造函数可写。
> 
> 导致：无法激活部分“ConsoleApplication2.Program”元素：ConsoleApplication2.Program --> ConsoleApplication2.Program **

1.  你能告诉我哪里出错了吗？
2.  我认为 composeparts(this) 和 composeparts(container) 都是相同的，因为我使用了 Assembly.GetExecutingAssembly()。如果是这样，那么为什么会抛出两个不同的异常？

我用过 importmany 之类的

```
class Program 
 {
    [ImportMany(typeof(Contracts.IInput))]
    public IEnumerable<Contracts.IInput> myinterface { get; set; }

    public void Method()
    {
        var catalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());
        var container = new CompositionContainer(catalog);

        try
        {
            container.ComposeParts(container);
            foreach (var i in myinterface)
                Console.WriteLine(i.IsValid());
        }
        catch (CompositionException compositionException)
        {

            Console.WriteLine(compositionException.ToString());
        }

    } 
```

但在这种情况下，myinterface 仍然为 null，这会引发 null 引用异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:48:30.050

有2个问题：

第一：`Import`不使用`ImportMany`。

***或者*** 由于`ImportMany`需要一个集合，所以你应该使用这样的东西：

`public IEnumerable<Contracts.IInput> myinterface { get; set; }`

第二：

正如您不能`Import`在构造函数中使用具有属性的属性（这就是[导入构造函数](http://brendanforster.com/mef-import-vs-importingconstructor.html)的用途），您也不能在程序的 Main 函数中访问它们。

例如，这将起作用：

```
var catalog = new AggregateCatalog();
//Add all the parts found in all assemblies in
//the same directory as the executing program

catalog.Catalogs.Add(
                new DirectoryCatalog(
                    Path.GetDirectoryName(
                    Assembly.GetExecutingAssembly().Location
                    )
                )
            );

var container = new CompositionContainer(catalog);
container.ComposeParts(container);

// Use the container to get a value for myinterface
myinterface = container.GetExportedValue<Contracts.IInput>();
Console.WriteLine(myinterface.IsValid()); 
```

# asp.net-mvc - 关于 MVC 4 和 jQuery 的教程或书籍

> ID：13228514
> 
> 赞同：3
> 
> 时间：2012-11-05T08:38:36.827
> 
> 标签：asp.net-mvc, jquery-mobile, asp.net-mvc-4

我一直在寻找关于集成 MVC 4 和 jQuery Mobile（Visual Studio 2012）的高级教程或书籍。我正在构建“仅限移动”网站（不是桌面网站，它们也适合移动设备，但仅限移动网站）。

我发现的大多数教程和书籍一般都在谈论 Asp.net MVC4，并且只用一两章介绍 MVC 4 中仅限移动设备的新功能（基本上他们只是提到 Visual Studio 2012 中的新项目模板“移动应用程序”但他们没有深入了解 jQuery mobile 和 MVC 4) 的集成。

其他教程只是解释了 mvc 4 和 jquery mobile 的“基础知识”（类似于 hello-world 的教程）。我正在寻找一些更高级和专业的教程或书籍，主要针对移动站点的**mvc 4** **和** **jquery mobile**，人们可以更有效地学习使用两个世界的力量：mvc 4 和 jquery mobile

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:44:32.873

您将在 codeproject 中获得一些实际示例。

[jQuery 和 MVC 4](http://www.codeproject.com/Articles/413099/HTML5-jQuery-Mobile-and-ASP-NET-MVC-4-Using-the-Vi)

# c# - 停止将excel导出为pdf

> ID：13228520
> 
> 赞同：0
> 
> 时间：2012-11-05T08:38:55.387
> 
> 标签：c#, excel, pdf, export

好吧，在过去的两个月里，我一直在将 Excel 工作表导出为 PDF，而今天早上我的代码刚刚停止这样做。我的应用程序的所有其他功能都运行良好，但是当我运行“Excel to PDF”部分时，它只会**冻结整个应用程序**。在此之后我尝试调试它，但它再次冻结它而没有显示出任何问题的迹象。这是我的导出代码：

```
xlSheet.ExportAsFixedFormat(XlFixedFormatType.xlTypePDF, path + file_name, XlFixedFormatQuality.xlQualityStandard, true, false, System.Type.Missing, System.Type.Missing, false, System.Type.Missing); 
```

知道为什么会发生这种情况或以其他方式导出 excel2pdf 吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:28:26.127

我的 Excel/VBE 环境有时会弄乱内存：最琐碎的代码无法按预期工作，行为不稳定等。通常重新启动计算机会有所帮助。

# azure - 如何在生产和开发之间移动表格内容？

> ID：13228522
> 
> 赞同：0
> 
> 时间：2012-11-05T08:39:03.000
> 
> 标签：azure, azure-storage, azure-table-storage

我有数据存在于云表存储中，我想将其移至开发服务器。

我曾经使用 Clumsy Leaf 表资源管理器，但我似乎经常遇到无法移动所有数据的问题。当我尝试导入从云导出的数据时，它在中途出现错误。

我还有其他选择可以在一个位置和另一个位置之间移动数据吗？

顺便说一句，我注意到之前有人问过这个问题，但那是在 2011 年，建议的做法不起作用。请不要投票关闭它，因为我希望自 2011 年以来情况有所改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:23:03.967

不久前，我写了一篇关于不同 Azure 存储和服务管理工具的博客文章。大多数提到的工具仍然有效，并且自从我写这篇文章以来它们可能有所改进。查看[http://gshahine.com/blog/archives/2010/11/04/azure-service-management-tools/](http://gshahine.com/blog/archives/2010/11/04/azure-service-management-tools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:52:00.080

如果您正在寻找其他工具，我建议您查看 Cerebrata 工具 (http://www.cerebrata.com)。您可以使用 Cloud Storage Studio 或 Azure 管理 Cmdlet 从云中下载数据并上传到开发存储中。

希望这可以帮助

# android - 如何在 Unity 3D 中运行时加载 3d 对象

> ID：13228525
> 
> 赞同：1
> 
> 时间：2012-11-05T08:39:05.920
> 
> 标签：android, iphone, unity3d, augmented-reality

我想在运行时加载 3d 对象。这个 3d 对象（可能是任何“.fbx”文件格式，如 Qualcomm 示例项目““ImageTarget”包含“teapot.fbx”）从任何保存的文件夹或 iphone 中的共享目录加载。如果有人知道请帮助我，这对我有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:25:10.753

他们的问题是你真的想从**任何**文件夹加载模型。

如果是这样，通常你会使用[WWW](http://docs.unity3d.com/Documentation/ScriptReference/WWW.html)类来加载东西。尽管据我所知，如果您使用**WWW**加载Unity，Unity 不会自动将您的**.fbx**文件转换为模型。与图像的纹理不同。您将不得不自己解析它。**对于.obj**文件，这很容易，但我对**.fbx**格式了解不多。

 ******我不知道您是否可以在 Android 应用程序中使用[C# File API 。](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)

其他方式不允许您从**任何**文件夹加载模型。这些是：

*   Resources.Load 将文件从 Resources 文件夹加载到内存中。Resources 文件夹在最终构建中编译成一个大的打包文件。
*   从 StreamingAssets 文件夹加载未在程序集中编译但保持原样的文件。[虽然我在 Android 应用程序中没有看到](http://docs.unity3d.com/Documentation/Manual/StreamingAssets.html)。******

# delphi - 我在快捷方式不存在时打开快捷方式，为什么不显示此对话框？

> ID：13228527
> 
> 赞同：0
> 
> 时间：2012-11-05T08:39:12.547
> 
> 标签：delphi, winapi, shortcut

我`ShellExecute`用来打开快捷方式

代码 ：

```
ShellExecute(Handle, 'open', 'C:\Users\hi2012\AppData\Roaming\Microsoft\Windows\Recent\xxx.gif.lnk', nil, nil, SW_SHOWNORMAL) 
```

如果**xxx.gif**存在，则代码可以打开它，如果不存在，则不提供任何内容。

但是，当我用 Windows 资源管理器打开它时，它会显示：

![在此处输入图像描述](../Images/1926465b887b8920adbc5d5bd5b2024c.png)

我想当我使用代码打开一个不存在的快捷方式时，它也可以显示，我该怎么办？

`ShellExecute`这是打开快捷方式的错误方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:01:22.883

[`ShellExecute`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb762153.aspx)失败时不显示对话框。它不会代表您删除文件。该对话框由`Explorer`应用程序显示。

为了处理错误，您需要检查调用的返回值`ShellExecute`。如果该返回值大于 32，则调用成功。否则出现错误。文档中列出了可能报告的错误。

为了更好地处理错误，请使用[`ShellExecuteEx`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb762154.aspx). 如果调用`ShellExecuteEx`失败，那么您可以通过调用获取错误代码`GetLastError`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:36:55.057

You should use [`IShellLink::Resolve`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774952.aspx) to resolve the shortcut yourself. `IShellLink::Resolve` offers flags to control whether to show search UI.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T21:52:52.557

您可以[从 .lnk 文件的上下文弹出菜单中调用“打开”](http://blogs.msdn.com/b/oldnewthing/archive/2004/09/30/236133.aspx)。这将为您提供与在资源管理器中双击 .lnk 文件相同的行为：

```
function SHBindToParent(pidl: PItemIDList; const riid: TIID; out ppv; out ppidlLast: PItemIDList): HResult; stdcall; external 'shell32.dll' name 'SHBindToParent';

procedure ExecuteFile(const AWnd: HWND; const AFileName: String);

  function GetUIObjectOfFile(wnd: HWND; const pszPath: WideString; const riid: TGUID; out ppv): HRESULT;
  var
    pidl: PItemIDList;
    sfgao: DWord;
    psf: IShellFolder;
    pidlChild: PItemIDList;
  begin
    DWord(ppv) := 0;
    Result := SHParseDisplayName(PWideChar(pszPath), nil, pidl, 0, sfgao);
    if SUCCEEDED(Result) then
    try
      Result := SHBindToParent(pidl, IID_IShellFolder, psf, pidlChild);
      if SUCCEEDED(Result) then
      try
        Result := psf.GetUIObjectOf(wnd, 1, pidlChild, riid, nil, ppv);
      finally
        psf := nil;
      end;
    finally
      CoTaskMemFree(pidl);
    end;
  end;

const
  SCRATCH_QCM_FIRST = 1;
  SCRATCH_QCM_LAST  = $7FFF;
var
  pcm: IContextMenu;
  Menu: HMENU;
  Info: TCMInvokeCommandInfo;
  Id: UINT;
begin
  if SUCCEEDED(GetUIObjectOfFile(AWnd, PChar(AFileName), IID_IContextMenu, pcm)) then
  try
    Menu := CreatePopupMenu;
    if Menu <> 0 then
    try
      if SUCCEEDED(pcm.QueryContextMenu(Menu, 0, SCRATCH_QCM_FIRST, SCRATCH_QCM_LAST, CMF_DEFAULTONLY)) then
      begin
        Id := GetMenuDefaultItem(Menu, 0, 0);
        if Id <> UINT(-1) then
        begin
          FillChar(Info, SizeOf(Info), 0);
          Info.cbSize := SizeOf(info);
          Info.hwnd := Handle;
          Info.lpVerb := MAKEINTRESOURCEA(Id - SCRATCH_QCM_FIRST);
          SetLastError(pcm.InvokeCommand(Info));
          if GetLastError <> 0 then
            RaiseLastOSError;
        end;
      end;
    finally
      DestroyMenu(Menu);
    end;
  finally
    pcm := nil;
  end;
end; 
```

同样应该通过调用带有 SEE_MASK_INVOKEIDLIST 标志的 ShellExecuteEx 来归档。

# html - 屏蔽相对于其父级居中的图像

> ID：13228528
> 
> 赞同：1
> 
> 时间：2012-11-05T08:39:25.167
> 
> 标签：html, css

我的背景有两个部分：一个重复的图案和一个在中心的固定图像 - 这样做是这样的：

```
body {
    background: url('http://www.bathroomsandkitchenstoo.com/BK/home_files/Tile_background2.jpg');
}
#center {
    position: fixed;
    height: 100%;
    width: 100%;
    background: transparent url('http://www.cadenhead.org/workbench/gems/floating-head-of-canterbury.jpg') no-repeat center center;
}
​
<body>
    <div id="center">&nbsp;</div>
    <div><!-- page content, br's here as example to show how #center is "fixed" --><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></div>
</body> 
```

请参阅[jsfiddle.net/Ps9JV](http://jsfiddle.net/Ps9JV/ "我遇到的前两张图片，对不起")。

![](../Images/ba5f8c1f53832e149f309f72faa3ef96.png)

我想要做的是将固定图像保持在中央，但将其遮盖到主体左上角的 300px x 300px 正方形，如下所示。有没有跨浏览器的方法可以在没有 javascript 的情况下做到这一点？

![](../Images/aa0717fc79d88fe082b4f0c16a3eda59.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:20:16.663

有可能`calc`，看[这里](http://jsfiddle.net/vVCFF/)

```
body {
    background: url('http://www.bathroomsandkitchenstoo.com/BK/home_files/Tile_background2.jpg');
}
#c {
    position:fixed;
    width:100%;
    height:100%;
    margin: 50%;
}
#center {
    /* image is 450px x 300px */
    width: -moz-calc(525px - 50%);
    width: -webkit-calc(525px - 50%);
    width: -o-calc(525px - 50%);
    width: calc(525px - 50%);
    height: -moz-calc(450px - 50%);
    height: -webkit-calc(450px - 50%);
    height: -o-calc(450px - 50%);
    height: calc(450px - 50%);
    margin-top: -150px;
    margin-left: -225px;
    background: transparent url('http://www.cadenhead.org/workbench/gems/floating-head-of-canterbury.jpg') no-repeat top left;
} 
```

# asynchronous - 如何在单个应用程序中使用 gevent 和 tornado？

> ID：13228534
> 
> 赞同：3
> 
> 时间：2012-11-05T08:40:06.447
> 
> 标签：asynchronous, tornado, gevent, greenlets

我正在同一个应用程序中使用 gevent 和 tornado，以便可以抑制不支持 tornado ioloop 的库以使用 gevent 进行异步操作。我想我需要运行两个真正的系统线程，一个专用于 Tornado 的 ioloop，另一个专用于 gevent 的循环。但是，尝试在系统线程中调用任何 gevent 函数会返回`not implemented Error`, `gevent cannot be used inside threads`。因此，我也尝试了猴子修补线程，如下面的片段所示

```
from gevent import monkey; monkey.patch_all()
from random import choice
import gevent
import requests
import tornado.ioloop
import tornado.web
import threading
import Queue

q = Queue.Queue()

i = 0
def synchronous_get_url(url, callback=None):
    global i
    i += 1
    d = i

    print('bar %d getting %s' % (d, url))
    requests.get(url)
    print('bar %d finished getting %s' % (d, url))
    if callback:
        callback()

class GreenEventLoop(threading.Thread):
    daemon = True
    def run(self):
        while True:
            url, callback = q.get()
            gevent.spawn(synchronous_get_url, url, callback) 
```

继续……

```
class MainHandler(tornado.web.RequestHandler):

    @tornado.web.asynchronous
    def get(self):
        print 'Received get request'
        urls = [
            'http://google.com',
            'http://apple.com',
            'http://microsoft.com',
            'http://github.com',
            'http://sourceforge.com',
        ]

        q.put((choice(urls), self._on_fetch), block=False)
        self.write("submitted url to queue")

    def _on_fetch(self):
        print 'Finishing in the handler\n'
        try:
            self.finish()
        except:
            pass

# Start GEvent Loop
green_loop = GreenEventLoop()
green_loop.start()

# Start Tornado Loop
application = tornado.web.Application([
    (r"/", MainHandler),
    ], debug=True)
application.listen(7001)
tornado.ioloop.IOLoop.instance().start() 
```

在一个单独的进程中，在命令行上，我运行以下命令。

```
from gevent import monkey; monkey.patch_all()
import gevent
import requests
count = 0
def get_stuff(i):
    global count
    res = requests.get('http://localhost:7000/')
    count += 1
    print count, res, i

lets = [gevent.spawn(get_stuff, i) for i in range(15)]
gevent.joinall(lets) 
```

这允许同时检索 15 个 url，并在收到它们时返回响应。我不太明白为什么上面的代码完全有效。如果线程被 gevent 修补并变成绿色线程，这意味着一次只有一个线程在运行，这意味着当 gevent 关闭获取新响应时，tornado 的 ioloop 将阻塞并且不会处理新请求，直到旧请求回来。有人可以解释 gevent 如何与 Tornado 的 ioloop 交互吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:48:14.853

I suggest you look at [motor](http://emptysquare.net/blog/motor-internals-how-i-asynchronized-a-synchronous-library/) lib it's async wrapper around pymongo driver. It's uses greenlets to adopt synchronous pymongo code for tornado callbacks style. So I think it should be good place to find some ideas.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T17:40:47.067

基本思想是使用 gevent 对系统线程进行猴子补丁，然后在 python 'threads' 下运行 tornado，这些线程实际上是 gevent greenlets。

[如何一起使用gevent和tornado](https://ntucker.true.io/ntucker/using-tornado-libararies-inside-gevent/)

# select - 使用 DB2 选择旧数据状态

> ID：13228535
> 
> 赞同：0
> 
> 时间：2012-11-05T08:40:16.060
> 
> 标签：select, db2

是否可以访问 DB2 数据库中的旧数据状态？

甲骨文有条款

```
选择...截至时间戳
```

去做吧。DB2 有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:46:59.533

是的，您可以选择在过去/将来有效/将要有效的一组行。这在 DB2 中称为 Time Travel，但您必须配置/创建具有额外列的表才能激活此功能。这是 DB2 10 中的新功能，但我认为它并非在所有版本中都可用。

有关更多信息，请查看：[http ://www.ibm.com/developerworks/data/library/techarticle/dm-1204db2temporaldata/](http://www.ibm.com/developerworks/data/library/techarticle/dm-1204db2temporaldata/)

请记住，有两个概念：业务时间和应用程序时间，当同时使用这两个概念时，称为双时间。

# facebook - 在 Facebook 评论审核工具上没有评论

> ID：13228539
> 
> 赞同：0
> 
> 时间：2012-11-05T08:40:29.487
> 
> 标签：facebook, comments

在此页面中： http: [//daytona.bg/model/damska-tunika-751-sreb-tsip_2702/](http://daytona.bg/model/damska-tunika-751-sreb-tsip_2702/)

我为 facebook 评论插入了以下代码：

```
<head>
    <meta property="fb:admins" content="1816718833"/>
    <meta property="fb:app_id" content="443454829050436"/>
</head>
<body>
    <div class="fb-comments" data-href="/model/damska-tunika-751-sreb-tsip_2702/" data-num-posts="5" data-width="960"></div>
</body> 
```

但在审核工具页面上，我没有看到任何评论： [https ://developers.facebook.com/tools/comments?id=443454829050436&view=queue](https://developers.facebook.com/tools/comments?id=443454829050436&view=queue)

顺便说一句，在我更改我的应用程序 ID 之前一切正常（我错误地删除了我的旧应用程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T06:17:56.983

您应该在“data-href”上使用完整的 URL。就像是：

```
<div class="fb-comments" data-href="http://www.exemple.com/model/damska-tunika-751-sreb-tsip_2702/"> 
```

# android - Robolectric 无法膨胀 DialogFragment 中的视图

> ID：13228540
> 
> 赞同：1
> 
> 时间：2012-11-05T08:40:37.070
> 
> 标签：android, android-inflate, robolectric, android-dialogfragment

我正在尝试测试 a 的以下方法`DialogFragment`：

```
@Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        View rootView = View.inflate(getActivity(), R.layout.fragment_fileproperties_layout, null);
        thumbImageView = (ImageView) rootView.findViewById(R.id.filePropertiesThumb);
        nameTextView = (TextView) rootView.findViewById(R.id.filePropertiesName);
        typeTextView = (TextView) rootView.findViewById(R.id.filePropertiesTypeValue);
        locationTextView = (TextView) rootView.findViewById(R.id.filePropertiesLocationValue);
        sizeTextView = (TextView) rootView.findViewById(R.id.filePropertiesSizeValue);
        numberOfFilesLayout = (LinearLayout) rootView
                .findViewById(R.id.filePropertiesNumOfFilesLayout);
        numberOfFilesTextView = (TextView) rootView
                .findViewById(R.id.filePropertiesNumOfFilesValue);
        lastModifiedLayout = (LinearLayout) rootView
                .findViewById(R.id.filePropertiesLastModifiedLayout);
        lastModifiedTextView = (TextView) rootView
                .findViewById(R.id.filePropertiesLastModifiedValue);
        hiddenCheckbox = (CheckBox) rootView.findViewById(R.id.filePropertiesHiddenCheckbox);
        hiddenCheckbox.setOnCheckedChangeListener(this);
        typeCategoryTextView = (TextView) rootView.findViewById(R.id.filePropertiesCategoryType);
        infoCategoryTextView = (TextView) rootView.findViewById(R.id.filePropertiesCategoryInfo);
        attributesCategoryTextView = (TextView) rootView
                .findViewById(R.id.filePropertiesCategoryAttributes);
        populateViews();
        if (selectedFiles.size() == 1) {
            if (selectedFiles.get(0).isFile()) {
                populateViewsFile();
            } else {
                populateViewsFolder();
            }
        } else {
            populateViewsMultiple();
        }
        toggleHiddenOnExit = false;
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setView(rootView).setTitle(R.string.properties)
                .setPositiveButton(android.R.string.ok, this)
                .setNegativeButton(android.R.string.cancel, this);
        return builder.create();
    } 
```

该`populateViews()`方法如下所示：

```
private void populateViews() {
        final int backgroundColor = getResources().getColor(android.R.color.darker_gray);
        final int textColor = getResources().getColor(android.R.color.black);
        typeCategoryTextView.setText(R.string.type);
        typeCategoryTextView.setBackgroundColor(backgroundColor);
        typeCategoryTextView.setTextColor(textColor);
        infoCategoryTextView.setText(R.string.info);
        infoCategoryTextView.setBackgroundColor(backgroundColor);
        infoCategoryTextView.setTextColor(textColor);
        attributesCategoryTextView.setText(R.string.attributes);
        attributesCategoryTextView.setBackgroundColor(backgroundColor);
        attributesCategoryTextView.setTextColor(textColor);
    } 
```

现在，在测试方法中看起来是这样的：

```
@Test
    public void testCreateDialogForAFile() {
        file = new File(Environment.getExternalStorageDirectory(), "/file.txt");
        try {
            file.createNewFile();
        } catch (IOException e) {
            LogUtils.e(e.getMessage(), e);
        }
        List<File> files = new ArrayList<File>();
        files.add(file);
        dialog.setSelectedFiles(files);
        assertNotNull("onCreateDialog not null", dialog.onCreateDialog(null));
        file.delete();
    } 
```

这是一个例外：

```
java.lang.NullPointerException
    at com.foo.bar.fragment.dialog.FooDialogFragment.onCreateDialog(FooDialogFragment.java:93)
    at com.foo.bar.fragment.dialog.FooDialogFragmentTest.testCreateDialogForAFile(FooDialogFragmentTest.java:77)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:292)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75) 
```

`Views`没有充气，测试失败。这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:47:08.083

原因是在[Robolectric](https://github.com/pivotal/robolectric/blob/master/src/main/java/com/xtremelabs/robolectric/shadows/ShadowDialogFragment.java)中没有正确实现 ShadowDialogFragment。有`show()`方法实现，没有`onCreateDialog()`。一种解决方案可能是自己实现它并推送到存储库。

## 编辑：

我已阅读您的评论，并仔细查看了来源。该对话框是在`show()`阴影实现的方法中创建和附加的。

在测试视图之前尝试调用 show() ：

```
dialogFragment.show(fragmentManager, "tag");
assertNotNull("dialog not null", dialogFragment.getDialog()); 
```

[这](https://stackoverflow.com/a/12903280/538169)将帮助你`FragmentManager`。

# javascript - 在提交时使用 jQuery 验证单选按钮

> ID：13228541
> 
> 赞同：1
> 
> 时间：2012-11-05T08:40:37.383
> 
> 标签：javascript, jquery, forms, validation

我想使用 jQuery 验证我的表单。它有一组单选按钮。

我为一组单选按钮或解决方案找到了多种解决方案，您必须在其中具体说明有哪些组名。

像这里： [用 jquery 验证单选按钮？](https://stackoverflow.com/questions/11886274/validate-radio-buttons-with-jquery)

问题是，表单是在运行时生成的。问题保存在 txt 文件中（不要问，这是学校练习）。生成的 HTML 代码如下所示：

```
<p>What&#039;s your gender? 

<input type="radio" name="gender" value="m" />Male 
<input type="radio" name="gender" value="f" />Female 

</p>

<p>

How satisfied are you with out support? 
<input type="radio" name="satisfaction" value="0%" />Not at all 
<input type="radio" name="satisfaction" value="25%" />Not very much 
<input type="radio" name="satisfaction" value="75%" />It was ok 
<input type="radio" name="satisfaction" value="100% />It was very satisfying

</p> 
```

js 文件是使用 Twig 生成的，因此可以循环遍历所有单选按钮组，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:06:55.877

您需要先添加所有组（页面加载会很好，但请确保组数组在全局范围内），然后在提交表单/单击按钮时单独验证每个组

```
var groups = [];
$(function() {
    $("input[type=radio][name]").each(function() {
      // Add the unique group name to the array
      groups[$(this).attr("name")] = true;
    });
});
$("button").click(function() {
    $.each(groups, function(i, o) {
      // For each group, check at least one is checked
      var isValid = $("input[name='"+i+"']:checked").length;
      alert(i + ": " + isValid);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:02:24.317

我让它像这样工作

```
var groups = [];
$(function() {
    $("input[type=radio][name]").each(function() {
      // Add the unique group name to the array
      if (groups[groups.length - 1] != $(this).attr("name")) groups.push($(this).attr("name"));
    });
});
$('form').submit(function () {
    var isValid = true;

    $.each(groups, function(i, o) {
      // For each group, check at least one is checked
      if (isValid) isValid = $("input[name='"+o+"']:checked").length;  
    });

    if (!isValid) return false;

    return true;
}); 
```

感谢 Blade0rz！

# emacs - 省略emacs 23和24之间的区别，或其他

> ID：13228545
> 
> 赞同：1
> 
> 时间：2012-11-05T08:40:49.213
> 
> 标签：emacs, elisp

我之前在 emacs 23 上对 cscope 的精细键绑定：

```
(define-key global-map [(control ,)]  'cscope-pop-mark) 
```

现在在 emacs 24 上出现错误

```
Debugger entered--Lisp error: (invalid-read-syntax ")")
eval-buffer(#<buffer  *load*<3>> nil "/home/ted/.emacs.d/ted.el" nil t)  ; Reading at      buffer position 12743 
```

我尝试在 *scratch* 中进行评估，然后出现以下错误，但 emacs 23 返回正常：

```
Debugger entered--Lisp error: (invalid-read-syntax ")")
  read(#<buffer *scratch*>)
  preceding-sexp()
  eval-last-sexp-1(t)
  eval-last-sexp(t)
  eval-print-last-sexp()
  call-interactively(eval-print-last-sexp nil nil) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:09:49.663

所以让我们填写tripleee指出的评论的相关部分：

另一个麻烦的原因是键序列符号的矢量符号：而不是 [(control ,)] 和 [(control ')]，你应该写 [(control ?,)] 和 [(control ?')]，这样可以在旧的 Emacsen 中也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:06:12.320

这`[(control ,)]`是 Emacs 24 中的无效语法。将其拼写为`[(control \,)]`，错误将消失，但不会改变含义，也不会失去与旧版 Emacsen 的兼容性。

# iphone - 如何将 searchController 与两个数组一起使用

> ID：13228553
> 
> 赞同：0
> 
> 时间：2012-11-05T08:41:46.523
> 
> 标签：iphone, ios

我的(和) 中有`two arrays`(first names, Last names)我想在这个. 我用两个字符串创建了类。`TableView``cell.textLabel``cell.detailTextLabel``TableView`

```
@interface clientContent : NSObject { }
@property (nonatomic, strong) NSString *clName;
@property (nonatomic, strong) NSString *clLast;
@end 
```

然后我在主类（有表视图）中创建了数组并添加了这样的信息

```
 for (int i = 0; i < PQntuples(clientQuery); i++)
{
    clientContent *cc = [[clientContent alloc] init];
    cc.clName = [[NSString alloc] initWithUTF8String:PQgetvalue(clientQuery, i, 0)];
    cc.clLast = [[NSString alloc] initWithUTF8String:PQgetvalue(clientQuery, i, 1)];
    [allClients addObject:cc];
} 
```

在此之后，我将其加载到`tableView`；

```
clientContent *cc = [allClients objectAtIndex:indexPath.row];
    cell.textLabel.text = cc.clName;
    cell.detailTextLabel.text = cc.clLast;
} 
```

然后我用

```
-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString 
```

如何使它正确？看不懂。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:45:07.227

您应该重写 searchDisplayController:shouldReloadTableForSearchString: UISearchDisplayController 的委托方法，并根据需要为 searchResultsTableView 过滤数据源数组。

您可以在数组（clientContent 对象数组）上应用谓词并更改 dataSource 数组。使用谓词，您可以在两个字段（clName 和 clLast）上过滤您的数组。

您可以从[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html获得与谓词相关的帮助](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)

# c - 二叉搜索树节点删除

> ID：13228565
> 
> 赞同：0
> 
> 时间：2012-11-05T08:42:46.607
> 
> 标签：c, binary-search-tree, nodes

我正在实现一个从二叉搜索树中删除节点的功能。函数的原型已经设置好了，我也改不了，是学校作业。我的代码：

```
typedef struct tBSTNode {
    char Key;                                                                 
    struct tBSTNode * LPtr;                                
    struct tBSTNode * RPtr;  
} *tBSTNodePtr; 

void BSTDelete (tBSTNodePtr *RootPtr, char K) {
  tBSTNodePtr *tmp;

  if (*RootPtr != NULL) {
    if (K < (*RootPtr)->Key)
        BSTDelete(&(* RootPtr)->LPtr, K);
    else if (K > (*RootPtr)->Key)
        BSTDelete(&(* RootPtr)->RPtr, K);
    else {
            if ((* RootPtr)->LPtr == NULL) {
                /* there is only right branch or none*/
                tmp = RootPtr;
                *RootPtr = (* RootPtr)->RPtr;
                free(*tmp);
                *tmp = NULL;
            }
            else if ((* RootPtr)->RPtr == NULL) {
                /* there is only left branch or none*/
                tmp = RootPtr;
                *RootPtr = (* RootPtr)->LPtr;
                free(*tmp);
                *tmp = NULL;
            }
            else
                /* there are both branches, but that is for another topic*/
        }
    }
} 
```

此代码可以正常工作，以防没有分支连接到我要删除的节点。我预计***tmp = NULL;存在问题** 行，我将地址丢失到分支的其余部分，但另一方面，如果不包括此行，我将得到一个 SEGFAULT，我正试图找出原因。

编辑：

好的，现在我知道错误在哪里了。这是愚蠢的错误，我应该使用**tBSTNodePtr tmp;** 而不是**tBSTNodePtr *tmp;**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:31:42.403

您在使用指针时遇到问题。如果我们有`sometype *ptr`，我们检查这个 ptr 是否涉及我们写的一些空间`(ptr!=NULL)`。 `*ptr`指的是值本身，例如您的结构。阅读有关 C 中指针类型的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:24:31.887

你的删除逻辑是错误的

```
 if ((* RootPtr)->LPtr == NULL) {
                /* there is only right branch or none*/
                tmp = RootPtr;
                *RootPtr = (* RootPtr)->RPtr;
                free(*tmp);
                *tmp = NULL;
            } 
```

在此代码中，您正在删除所需的节点，但不添加该节点的子根

```
 if ((* RootPtr)->LPtr == NULL) {
                /* there is only right branch or none*/
                tmp = RootPtr;
                *RootPtr = (* RootPtr)->RPtr;
                free(*tmp);
                *tmp = NULL;
                insert(RootPtr);  //insert the child node again in the tree
            } 
```

# java - mvc 架构会影响 SEO 吗？

> ID：13228568
> 
> 赞同：0
> 
> 时间：2012-11-05T08:42:49.983
> 
> 标签：java, model-view-controller, jakarta-ee, seo

我的 Web 应用程序中有我的 MVC 架构。现在流程如下：

```
starter.jsp -> SERVLET ->view.jsp 
```

现在 view.jsp 期望某些请求参数出现在请求对象中。

当使用上述工作流程调用 view.jsp 时，一切正常。但是如果直接调用 view.jsp 则它不会在请求中获得预期的属性并转发到 error.jsp

现在搜索引擎会直接调用view.jsp吗？还是会从 starter.jsp 传输到 view.jsp？

详细示例：

```
main page has a href to a article.
href ="servlet?id=xyz"

Now servlet gets the id from request.
Servlet gets details for id from DB , puts the Object obtained from DB as request attribute 
idDetails
And forwards to view.jsp
View.jsp gets request attribute idDetails
So view.jsp expects idDetails to be present as request attribute 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:45:19.257

SEO和MVC之间没有相关性。MVC 管理应用程序的**内部，而 SEO 是一些****外部**调整。如果它们以某种方式相关，那么我认为您的应用程序有问题。

如果某些文件是公开的，因此搜索引擎可以看到它们，那么它们很可能会被编入索引。如果有疑问，您可以随时检查您在谷歌中的页面，例如使用`site:`前缀。

所以关键是，如果你能看到它，谷歌就能看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:21:56.913

我同意亚当的回答。SEO 和 MVC 架构根本不相关。

如果您担心会发生什么如果“CRAWLES”将直接访问您的 view.jsp 页面，那么我建议您在应用程序中使用过滤器和拦截器。

所以在这里你的拦截器/过滤器将拦截传入的请求并将其过滤掉，如果它们是由“爬虫算法”或“可疑用户”直接发出的。

# php - 使用 composer 在本地安装 symfony2 供应商时出错

> ID：13228582
> 
> 赞同：2
> 
> 时间：2012-11-05T08:43:40.377
> 
> 标签：php, symfony, composer-php

我希望我的措辞正确，但我正在尝试将供应商安装到我刚刚从 SVN 下载的 symfony2 项目中，但我不断收到此错误，

```
 [Symfony\Component\Config\Exception\FileLoaderLoadException]                                                                        
  Cannot import resource "parameters.ini" from "/Users/john/Sites/trunk/awesome/app/zone/config/../../config/config.yml".  

  [InvalidArgumentException]                                                                                                 
  The file "parameters.ini" does not exist (in: /Users/john/Sites/trunk/awesome/app/zone/config/../../config, ).  

Script Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::clearCache handling the post-install-cmd event terminated with an exception

  [RuntimeException]                                                         
  An error occurred when executing the "'cache:clear --no-warmup'" command. 
```

显然它似乎在寻找错误的目录，但我不确定哪个文件指向这些文件。

另外，我对 Symfony 很陌生，所以我不确定从哪里开始解决问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:57:21.920

我想你有这样的东西`app/config/config.yml`

```
imports:
    - { resource: parameters.ini } 
```

而你还没有`parameters.ini`归档

该`parameters.ini`文件用于 Symfony 2.0，现在，在 Symfony 2.1 中（如果你使用 composer，我想你使用 Symfony 2.1）这个文件变成了`parameters.yml`，所以请检查这个“错误”并重试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:31:30.767

我猜`parameters.ini`文件没有放入您的存储库，因为它存储敏感数据（如数据库密码）。

您应该在本地创建它。有些人将模板文件放入存储库，因此查找名为`parameters.ini.dist`. 如果没有这样[的文件，请从 symfony 标准版中获取原始文件](https://github.com/symfony/symfony-standard/blob/2.0/app/config/parameters.ini)并使其适应您的环境。

正如其他人指出的那样，Symfony 2.1**默认**`parameters.yml`使用而不是. 如果你愿意，你仍然可以使用 ini 文件。如果您有文件或想开始使用它，请按照其他答案中的说明进行操作。`parameters.ini` **`parameters.yml`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-05T07:36:28.803

我通过删除`vendor`目录并`composer install`再次运行来解决此问题。**

# java - 除非外部循环的值非零，否则 3 个 for 循环的内部不会运行，但只有在最里面的循环内减去时才会运行

> ID：13228585
> 
> 赞同：0
> 
> 时间：2012-11-05T08:43:43.667
> 
> 标签：java, for-loop, multidimensional-array, char

我知道这是一篇很长而且可能令人困惑的帖子……但我真的不知道是什么原因造成的……所以我尽我所能解释。我不知道如何简洁地描述这个问题，这让我很难寻找其他解决方案。

无论如何，首先是一点背景。该程序在所有可能的 8 个方向上读取 2D 数组以查找单词（该程序基本上是一个自动单词查找）。

我有二维数组，我正在搜索它，寻找给定的字符串。为此，我有 3 个循环：

*   第一个循环（循环 x）选择起始 x 坐标
*   第二个循环（循环 y）选择起始 y 坐标
*   最后一个循环（循环 L）从外部循环的 (x,y) 坐标给定的位置开始检查长度为 L 的单词。

但是，在外部循环增加到 1 之前，程序似乎不会进入 L 的循环。因此，我无法开始在第 1 列（x = 0）中搜索单词，第一个被访问的是第 2 列 (x=1)。**当其他两个循环中的任何一个的值低于 1 时，就好像有一个 if 语句阻止 for 循环运行**。更重要的是，这只**发生**在我减去数组的索引位置时，而不是当我添加它们时。

为了澄清最后一点，我通过一次将字符添加到字符串来搜索单词。因此，当向前阅读时，三个字母的单词 'cat' 将由位置 x 处的字符串 'c' 组成，然后我们在位置 x+1 处将 char 'a' 添加到字符串中，然后在该字符串中添加 char ' t' 来自位置 x+2。这基本上写为 arr[x+L][y]，用于向前搜索一个单词。但是，我也想找到倒写的单词。所以为此我有一个循环添加arr [xL] [y]。**似乎这个错误只发生在我从数组中的索引中减去 L 时，并且只发生在减去它的值上（所以对于 [x-1][y]，x=0 不会进入for 循环，但 y=0 可以。**

这是（缩短的）代码：

```
public void searchPuzzle(String[][] Puzzle){

    //For Each Coordinate X,Y
    for(int x=0; x<Puzzle.length; x++){//For each x position

        for(int y=0; y<Puzzle[x].length; y++){//For each y position

            //RESET or INITAITE strings for searching in all 8 directions
            String F="", B="", U="", D="", DiFU="", DiFD="", DiBU="", DiBD="";

            //SEARCH FORWARD
            for(int L = 0; L < Puzzle.length-x; L++){ //search for word of length L
                F = F+Puzzle[x+L][y];
                //System.out.println(F);
                if(isWord(F)){
                    //System.out.println(F);
                }
            }

            //SEARCH BACK 
            System.out.println("X:" + x + " Y: "+y);
            for(int L = 0; L < x; L++){ //search for word of
                System.out.println("X:" + x + " Y: "+y);
                B = B+Puzzle[x-L][y];
                System.out.println(B);
                if(isWord(B)){
                    //System.out.println(B);
                }
            }
            System.out.println("--");

            //SEARCH DIAGONALLY - BACK & UP
            for(int L = 0; L < smaller(x,y); L++){
                DiBU = DiBU+Puzzle[x-L][y-L];
                if(isWord(DiBU)){
                    //System.out.println(DiBU);
                }
            } 
```

*   向前搜索

完美运行（因为 F+Puzzle[x+L][y] 只涉及加法）。所以对于这个程序，它应该从 arr[0][0] 开始读取。

*   搜索返回

有我提到的错误，但只有x值是错误的。这意味着 x=0 永远不会被传递到循环 SEARCH BACK 中，因此循环以 x=1 开始。请注意，代码有 B+Puzzle[xL][y] 所以对于这个程序，程序从 arr[1][0] 开始读取。

*   搜索对角线 - 备份和向上

x 和 Y 都有这个错误。由于“DiBU+Puzzle[xL][yL]”，x=0 和 y=0 都不会进入循环。所以对于这个程序，程序从 arr[1][1] 开始阅读。

编辑：我尝试简单地减去 1（如在 B+Puzzle[xL-1][y] 中），但这只会导致它从正确的位置开始，但会缩短一列。

**TL;DR** 除非外部两个循环的值大于 0，否则无法读取三个 for 循环的最内层。但只有当我从所述最内层 For 循环内的数组索引中减去值时，才会出现此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:52:32.700

我认为将前向和后向搜索分开会更简单，至少在您完成所有工作之前是这样。一次只做一件事，并且认真地去做。

如果 x 为零，则不执行第二个循环的任何迭代的原因在于循环条件：

```
 for(int L = 0; L < x; L++) 
```

L 永远不会小于 0，因此如果 x 为 0，则永远不会满足条件 L < x，并且循环执行零次迭代。

假设 y 为 0，x 为 2。元素 [2][0]、[1][0] 和 [0][0] 可以是三个字母的单词。对于 L=0 和 L=1，您将只进行两次迭代。

这两个问题都可以通过将条件更改为 L <= x 再进行一次迭代来解决。

考虑循环条件非常非常重要。在许多简单的情况下，“<”测试是合适的，但并非总是如此。在这种情况下， L==x 会导致查看您想要的数组的元素 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:03:28.850

我认为有一个逻辑问题：

```
 //SEARCH BACK 
        for(int L = 0; L < x; L++){ //search for word of
            B = B+Puzzle[x-L][y];
            //System.out.println(B);
            if(isWord(B)){
                //System.out.println(B);
            }
        } 
```

如果单词`CAT`写`TAC`在矩阵的开头，您将找不到它。也许你想做：

```
 //SEARCH BACK 
        for(int L = Puzzle.length-x - 1; L >=0 ; L--){ 
            B = B+Puzzle[L-x][y];
            //System.out.println(B);
            if(isWord(B)){
                //System.out.println(B);
            }
        } 
```

那么，***你为什么要向后搜索***？？？每次向前搜索时，您都可以在另一侧连接一个单词。意思是 ：

```
 String forwardword;
       String backwardword; 
       for(int L = 0; L < Puzzle.length-x; L++){ //search for word of length L
            forwardword = forwardword +Puzzle[x+L][y];
            backwardword = Puzzle[x+L][y] + backwardword; // <<HERE

            if(isWord(forwardword)){
                //System.out.println(forwardword);
            }
            if(isWord(backwardword)){
                //System.out.println(backwardword);
            }                

        } 
```

# windows-phone-7 - 关于 Windows Phone 上的任务管理器

> ID：13228586
> 
> 赞同：-2
> 
> 时间：2012-11-05T08:43:48.640
> 
> 标签：windows-phone-7, windows-phone-8

我正在开发一个 windows phone 应用程序，假设我的应用程序正在运行，用户单击开始键，我的应用程序将进入后台，然后下一个用户长按返回键，将显示任务管理器。我的问题在这里：当我的应用程序被带到后台时，如何更新它的屏幕截图？我不想在任务管理器中公开我的应用程序的任何内容，我可以这样做吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:46:31.857

> 当我的应用程序被带到后台时，如何更新它的屏幕截图？

你不能。而且它不是任务管理器，而是“快速应用切换”，让用户在应用之间轻松切换。您看到的屏幕截图将是您的应用程序在前台时的最后一个屏幕。

而且您的应用程序**不会**在后台运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:46:23.697

否 - 您无法更改应用切换 UI 中显示的图像。这是内置的操作系统功能。

# web-applications - 从客户端工作站提取文件

> ID：13228587
> 
> 赞同：0
> 
> 时间：2012-11-05T08:43:55.453
> 
> 标签：web-applications, web

我需要在没有用户交互的情况下将文件上传到我的服务器，文件是在用户离线时生成的，并且需要在他们在线时进行上传。用户知道我们将运行一个替代应用程序来处理离线数据收集。

我试图避免将任何应用程序安装到他们的工作站进行上传，我确实用 Java 和 .NET 编写了应用程序来执行此操作，但我想将整个事情保留为 Web 应用程序。

主题中的用户在上网时已经在使用我的网站。

当它们在我的网站上时，有什么方法可以提取这些文件？我猜如果我尝试从 Workstation 上的某个位置打开/读取/上传文件，我会遇到安全问题。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:13:16.870

> 当它们在我的网站上时，有什么方法可以提取这些文件？

不可以。网站不能让浏览器从用户的文件系统上传任意文件。这对安全来说太可怕了。

用户要么必须手动选择文件，要么您需要在用户的计算机上安装执行上传的软件。

# matlab - matlab，空间分布的测量

> ID：13228589
> 
> 赞同：1
> 
> 时间：2012-11-05T08:43:59.040
> 
> 标签：matlab, spatial, spread

在 3D 邻域中有数据点（见附图），我想定义一个空间分布的度量，以接受或拒绝数据集作为进一步分析的候选者。一种度量可能是 3D 子体积（边界框）中有多少单元被邻域占用。另一个是数据如何沿每个轴延伸。是否有其他更好的衡量空间分布的标准？谢谢 ![在此处输入图像描述](../Images/9878308936d1700fd62fdb97e9aac6b9.png)

# iphone - 我无法从自定义类中保存 NSUserdefaults

> ID：13228591
> 
> 赞同：0
> 
> 时间：2012-11-05T08:44:08.917
> 
> 标签：iphone, objective-c, ios, xcode

我从自定义类中保存时遇到问题。我试图在 NSUserDefaults 的代码中的某个位置保存错误，但它不起作用。

H 文件：

```
#import <Foundation/Foundation.h>
@interface Errors : NSObject<NSCoding>
@property (nonatomic,strong) NSString*  type;
@property (nonatomic,strong) NSString*  verNum;
@property (nonatomic,strong) NSString*  title;
@property (nonatomic,strong) NSString*  content;
@property (nonatomic,strong) NSString*  source;
@property (nonatomic,strong) NSString*  userId;
@property (nonatomic,strong) NSNumber*  videoId;

@end 
```

M 文件：

```
#import "Errors.h"
@implementation Errors
@synthesize verNum;
@synthesize type;
@synthesize title;
@synthesize content;
@synthesize source;
@synthesize userId;
@synthesize videoId;

- (void)encodeWithCoder:(NSCoder *)encoder{
    [encoder encodeObject:self.verNum forKey:@"verNum"];
    [encoder encodeObject:self.type forKey:@"type"];
    [encoder encodeObject:self.title forKey:@"title"];
    [encoder encodeObject:self.content forKey:@"content"];
    [encoder encodeObject:self.source forKey:@"source"];
    [encoder encodeObject:self.userId forKey:@"userId"];
    [encoder encodeObject:self.videoId forKey:@"videoId"];
}

- (id)initWithCoder:(NSCoder *)decoder{
    self = [super init];
    if( self != nil ) {
        self.verNum = [decoder decodeObjectForKey:@"verNum"];
        self.type = [decoder decodeObjectForKey:@"type"];
        self.title = [decoder decodeObjectForKey:@"title"];
        self.content = [decoder decodeObjectForKey:@"content"];
        self.source = [decoder decodeObjectForKey:@"source"];
        self.userId = [decoder decodeObjectForKey:@"userId"];
        self.videoId = [decoder decodeObjectForKey:@"videoId"];
    }
    return self;
}
@end 
```

保存：

```
errorsDitalis = [[Errors alloc]init];
errorsDitalis.verNum = (NSString *) [[request userInfo] objectForKey:@"verNum"];
errorsDitalis.type =(NSString *)  [[request userInfo] objectForKey:@"type"];
errorsDitalis.title =(NSString *)  [[request userInfo] objectForKey:@"title"];
errorsDitalis.content =(NSString *)  [[request userInfo] objectForKey:@"content"];
errorsDitalis.source =(NSString *)  [[request userInfo] objectForKey:@"source"];
errorsDitalis.userId =(NSString *)  [[request userInfo] objectForKey:@"userId"];
errorsDitalis.videoId =(NSNumber *)  [[request userInfo] objectForKey:@"videoId"];
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setObject:errorsDitalis forKey:@"ErrorList"];
[userDefaults synchronize]; 
```

加载：

```
Errors * newError = [[Errors alloc]init];
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
newError = [userDefaults objectForKey:@"ErrorList"]; 
```

它只是为 newErrors 返回 nil。我尝试使用[此](https://stackoverflow.com/questions/3000220/best-way-to-save-to-nsuserdefaults-for-custom-class)帮助，但没有奏效。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:12:37.780

我想我应该这样做：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:self.errorsDitalis] forKey:@"ErrorList"];
    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

并不是：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setObject:errorsDitalis forKey:@"ErrorList"];
[userDefaults synchronize]; 
```

并加载：

```
newError = (Errors *)[NSKeyedUnarchiver unarchiveObjectWithData:[[NSUserDefaults standardUserDefaults] objectForKey:@"ErrorList"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:58:46.577

尝试

```
[self setVerNum:[decoder decodeObjectForKey:@"verNum"]]; 
```

代替

```
self.verNum = [decoder decodeObjectForKey:@"verNum"]; 
```

我相信你应该在调用时使用设置器`initWithCoder`

# hosts - 我应该什么时候在 system32 中配置 hosts 文件？

> ID：13228592
> 
> 赞同：1
> 
> 时间：2012-11-05T08:44:16.200
> 
> 标签：hosts

当我需要访问一些 url 时，我会修改 System32 中“hosts”文件的内容。

我对此感到困惑。

我应该何时更改此文件？这个文件能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:55:04.087

我通常认为主机文件是我的本地 DNS。

如您所知，互联网是由计算机组成的，每台计算机都有自己唯一的 IP 地址。因此，例如，在命令行中，如果您 p​​ing google（通过命令：ping www.google.com），您将获得 google 的 IP 地址的响应。就我而言，它返回 173.194.77.99。现在，如果我在浏览器的地址栏中输入这个数字并按回车键，它将带我去谷歌。

然而，记住这些数字真的很难，因此一些聪明的人发明了 DNS 服务器（域名服务器）。这些计算机的工作是将 IP 地址映射到 URL，因此它就像一个包含大量 IP 地址信息的表格，因此例如 google 有一个条目 3。现在，当您在地址栏中键入 google.com 时，该地址将被带到 DNS 服务器，并返回相应的 IP 地址，您的浏览器将被带到该站点。

现在，hosts 文件用于创建一个类似的表来包含 IP/名称信息。我在本地网络上使用它来给计算机命名，所以我不想说去计算机 192.168.0.001，我会说去计算机“巴塞罗那”或计算机“多伦多”，这取决于我如何命名它。

希望这会有所帮助，干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:47:04.520

hosts 文件是操作系统中用于将主机名映射到 IP 地址的计算机文件。hosts 文件是纯文本文件，通常命名为 hosts。

参考。 [http://en.wikipedia.org/wiki/Hosts_%28file%29](http://en.wikipedia.org/wiki/Hosts_%28file%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:47:04.150

如果您的系统无法找到主机名的 IP 地址，那么您可以在此处明确提及该 IP 地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T08:48:11.497

在发明 DNS 服务器之前，该文件设法将域解析为 IP 地址。

例如：example.org --> 123.56.13.25

# c# - '=' 附近的语法不正确... .ashx 文件中的错误

> ID：13228598
> 
> 赞同：-8
> 
> 时间：2012-11-05T08:44:35.323
> 
> 标签：c#, asp.net

我正在尝试从数据库中检索图像并将其显示给 gridview。但它显示 .ashx 文件中的错误

```
SqlCommand command = new SqlCommand(
    "select Image from ImageStore where ImageID=" + imageid, connection); 
SqlDataReader dr = command.ExecuteReader(); dr.Read(); 
context.Response.BinaryWrite((Byte[])dr[0]); 
```

> '=' 附近的语法不正确

如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:59:48.620

由于您尚未发布代码，因此假设您使用 .aspx 文件并且您已经渲染了 gridview 控件和所有内容。确保您已使用添加图像控制

`<asp:Image ID="imgPhoto" runat="server" ImageUrl = '<%#"ImageHttpHandler.ashx?ProductID="+Eval("ProductID")%>'/>`

HTTP 处理程序可以访问应用程序上下文。这包括请求用户的身份（如果已知）、应用程序状态和会话信息。当请求 HTTP 处理程序时，ASP.NET 调用相应处理程序的 ProcessRequest 方法。您在处理程序的 ProcessRequest 方法中编写的代码会创建一个响应，该响应会被发送回发出请求的浏览器。

在获取图像的方法中使用return stmt as

```
 return (Byte[])dtProductsPhoto.Rows[0][0]; 
```

确保您已使用在 Web.config 文件中注册处理程序

```
 <httpHandlers>
  <add verb="*" path="*ImageHttpHandler.ashx"
                  type="GridView.ImageHttpHandler,GridView" /> 
```

希望它有效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:27:01.747

做这样的事情：

```
if(imageid != null)
{
    SqlCommand command = new SqlCommand("
          select Image from ImageStore where ImageID=" + imageid, connection); 
    SqlDataReader dr = command.ExecuteReader();
    dr.Read();
    context.Response.BinaryWrite((Byte[])dr[0]);
}
else
{
    SqlCommand command = new SqlCommand("
          select Image from ImageStore where ImageID=0", connection); 
    SqlDataReader dr = command.ExecuteReader();
    dr.Read();
    context.Response.BinaryWrite((Byte[])dr[0]);
} 
```

# iphone - 水平分页滚动视图中缺少 UICollectionView 对齐逻辑

> ID：13228600
> 
> 赞同：57
> 
> 时间：2012-11-05T08:44:42.870
> 
> 标签：iphone, ios, xcode, cocoa-touch, uicollectionview

我有一个`UICollectionView`，它工作正常，直到我开始滚动。先来几张图： ![在此处输入图像描述](../Images/4aee4c5c1311fa107775eb7978758d6c.png)

如您所见，它很棒。当我开始滚动（启用分页）时，第一个有点离屏： ![在此处输入图像描述](../Images/24df8961db342f5b2d5d16665c5982af.png)

这就是问题。最初我的视图有 3 个视图，我只想滚动并显示 3 个视图。但是当它滚动（启用分页）时，它会隐藏一点第一个视图，并从下一页显示下一个第一个视图的一点点。

这是一个视频，因为它有点难以解释： [问题视频（Dropbox）](https://www.dropbox.com/s/84g5zfn4e68qg17/bug-collectionview.mov)

这是我的`UICollectionView`设置图片： ![在此处输入图像描述](../Images/0715066b7a0b7f30a9653a322a873410.png)

如果有人可以提供帮助，那就太好了！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-11-22T23:38:19.000

根本问题是 Flow Layout 不是为支持分页而设计的。要实现分页效果，您将不得不牺牲单元格之间的空间。并仔细计算单元格框架，使其可以被集合视图框架分割，没有余数。我会解释原因。

说下面的布局是你想要的。

![在此处输入图像描述](../Images/f25e5658cce2088718aea884b0759bc3.png)

请注意，最左边的边距（绿色）不是单元格间距的一部分。它由流布局部分插图确定。由于流布局不支持异构间距值。这不是一项微不足道的任务。

因此，在设置了间距和插图之后。以下布局是您将得到的。

![在此处输入图像描述](../Images/1d3fb7f98b768c51e44f9711c0ba1cfa.png)

滚动到下一页后。您的单元格显然没有按照您的预期对齐。

![在此处输入图像描述](../Images/d76da126ece5ef6690167e6b961d8074.png)

使单元格间距为 0 可以解决此问题。但是，如果您想要页面上的额外边距，它会限制您的设计，尤其是当边距与单元格间距不同时。它还要求视图框架必须能被单元框架整除。有时，如果您的视图框架不固定（考虑到旋转情况），这会很痛苦。

## 真正的解决方案是继承 UICollectionViewFlowLayout 并覆盖以下方法

```
- (CGSize)collectionViewContentSize
{
    // Only support single section for now.
    // Only support Horizontal scroll 
    NSUInteger count = [self.collectionView.dataSource collectionView:self.collectionView
                                               numberOfItemsInSection:0];

    CGSize canvasSize = self.collectionView.frame.size;
    CGSize contentSize = canvasSize;
    if (self.scrollDirection == UICollectionViewScrollDirectionHorizontal)
    {
        NSUInteger rowCount = (canvasSize.height - self.itemSize.height) / (self.itemSize.height + self.minimumInteritemSpacing) + 1;
        NSUInteger columnCount = (canvasSize.width - self.itemSize.width) / (self.itemSize.width + self.minimumLineSpacing) + 1;
        NSUInteger page = ceilf((CGFloat)count / (CGFloat)(rowCount * columnCount));
        contentSize.width = page * canvasSize.width;
    }

    return contentSize;
}

- (CGRect)frameForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CGSize canvasSize = self.collectionView.frame.size;

    NSUInteger rowCount = (canvasSize.height - self.itemSize.height) / (self.itemSize.height + self.minimumInteritemSpacing) + 1;
    NSUInteger columnCount = (canvasSize.width - self.itemSize.width) / (self.itemSize.width + self.minimumLineSpacing) + 1;

    CGFloat pageMarginX = (canvasSize.width - columnCount * self.itemSize.width - (columnCount > 1 ? (columnCount - 1) * self.minimumLineSpacing : 0)) / 2.0f;
    CGFloat pageMarginY = (canvasSize.height - rowCount * self.itemSize.height - (rowCount > 1 ? (rowCount - 1) * self.minimumInteritemSpacing : 0)) / 2.0f;

    NSUInteger page = indexPath.row / (rowCount * columnCount);
    NSUInteger remainder = indexPath.row - page * (rowCount * columnCount);
    NSUInteger row = remainder / columnCount;
    NSUInteger column = remainder - row * columnCount;

    CGRect cellFrame = CGRectZero;
    cellFrame.origin.x = pageMarginX + column * (self.itemSize.width + self.minimumLineSpacing);
    cellFrame.origin.y = pageMarginY + row * (self.itemSize.height + self.minimumInteritemSpacing);
    cellFrame.size.width = self.itemSize.width;
    cellFrame.size.height = self.itemSize.height;

    if (self.scrollDirection == UICollectionViewScrollDirectionHorizontal)
    {
        cellFrame.origin.x += page * canvasSize.width;
    }

    return cellFrame;
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes * attr = [super layoutAttributesForItemAtIndexPath:indexPath];
    attr.frame = [self frameForItemAtIndexPath:indexPath];
    return attr;
}

- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray * originAttrs = [super layoutAttributesForElementsInRect:rect];
    NSMutableArray * attrs = [NSMutableArray array];

    [originAttrs enumerateObjectsUsingBlock:^(UICollectionViewLayoutAttributes * attr, NSUInteger idx, BOOL *stop) {
        NSIndexPath * idxPath = attr.indexPath;
        CGRect itemFrame = [self frameForItemAtIndexPath:idxPath];
        if (CGRectIntersectsRect(itemFrame, rect))
        {
            attr = [self layoutAttributesForItemAtIndexPath:idxPath];
            [attrs addObject:attr];
        }
    }];

    return attrs;
} 
```

注意，上面的代码片段只支持单节和水平滚动方向。但扩展并不难。

此外，如果您没有数百万个细胞。缓存那些 UICollectionViewLayoutAttributes 可能是个好主意。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-03-16T20:14:19.350

您可以在 UICollectionView 上禁用分页并使用自定义页面宽度/偏移量实现自定义水平滚动/分页机制，如下所示：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset
{
    float pageWidth = 210;

    float currentOffset = scrollView.contentOffset.x;
    float targetOffset = targetContentOffset->x;
    float newTargetOffset = 0;

    if (targetOffset > currentOffset)
        newTargetOffset = ceilf(currentOffset / pageWidth) * pageWidth;
    else
        newTargetOffset = floorf(currentOffset / pageWidth) * pageWidth;

    if (newTargetOffset < 0)
        newTargetOffset = 0;
    else if (newTargetOffset > scrollView.contentSize.width)
        newTargetOffset = scrollView.contentSize.width;

    targetContentOffset->x = currentOffset;
    [scrollView setContentOffset:CGPointMake(newTargetOffset, 0) animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-09-22T15:04:11.347

这个答案已经晚了，但我一直在玩这个问题，发现漂移的原因是**行间距**。如果您希望*UICollectionView/FlowLayout*以单元格宽度的精确倍数进行分页，则必须设置：

```
UICollectionViewFlowLayout *flowLayout = (UICollectionViewFlowLayout *)collectionView.collectionViewLayout;
flowLayout.minimumLineSpacing = 0.0; 
```

您不会认为行距在水平滚动中起作用，但显然确实如此。

就我而言，我正在尝试从左到右分页，一次一个单元格，单元格之间没有空间。每翻一页，就会从所需位置产生一点点漂移，而且它似乎是线性累积的。 **每回合约 10.0 分**。我意识到**10.0**是流布局中**minimumLineSpacing**的默认值。当我将其设置为**0.0**时，没有漂移，当我将其设置为边界宽度的一半时，每个页面都会漂移边界的一半。

更改**minimumInteritemSpacing**没有*效果*。

编辑——来自[UICollectionViewFlowLayout](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewFlowLayout_class/Reference/Reference.html#//apple_ref/occ/instp/UICollectionViewFlowLayout/minimumLineSpacing)的文档：

> @property (nonatomic) CGFloat minimumLineSpacing;
> 
> 讨论
> 
> ...
> 
> 对于垂直滚动网格，此值表示连续行之间的最小间距。**对于水平滚动网格，此值表示连续列之间的最小间距。** 此间距不适用于页眉和第一行之间或最后一行和页脚之间的空间。
> 
> 此属性的默认值为 10.0。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-12-02T05:00:29.723

![在此处输入图像描述](../Images/90bb29811716bd367f3bd8509b10fcc3.png)

以下文章中的解决方案既优雅又简单。主要思想是通过传递所有 contentOffset 值在您的 collectionView 顶部创建滚动视图。

[http://b2cloud.com.au/tutorial/uiscrollview-paging-size/](http://b2cloud.com.au/tutorial/uiscrollview-paging-size/)

应该说通过实现这个方法：

```
- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity; 
```

我没有像 pagingEnabled = YES 那样实现流畅的动画。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-08-06T00:49:41.017

我知道这个问题很老，但对于任何偶然发现这个问题的人来说。

要纠正此问题，您只需将 MinimumInterItemSpacing 设置为 0 并减小内容的框架。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-08-30T11:51:55.093

@devdavid 出现在 flowLayout.minimumLineSpacing 为零。

也可以在布局编辑器中完成，将 Lines 的 Min Spacing 设置为 0：

[![更简单的方法](../Images/8e65e222dfd62eaa5b771e761382926b.png)](https://i.stack.imgur.com/wF25L.png)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-11-18T10:43:27.667

我想我理解这个问题。我也会试着让你明白。

如果您仔细观察，您会发现此问题只是逐渐发生，而不仅仅是在第一页滑动时发生。

![在此处输入图像描述](../Images/99c7a7626980389a1467db143f4b18b9.png)

如果我理解正确，目前在您的应用程序中，每个 UICollectionView 项目都是我们看到的那些圆角框，并且您在它们之间有一些恒定的偏移量/边距。这就是导致问题的原因。

相反，您应该做的是创建一个 UICollectionView 项目，该项目是整个视图宽度的 1/3，然后在其中添加该圆形图像视图。要参考图像，绿色应该是您的 UICollectionViewItem 而不是黑色。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-11-13T13:35:19.210

你自己滚`UICollectionViewFlowLayout`吗？

如果是这样，添加`-(CGPoint) targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity`将帮助您计算滚动视图应该停止的位置。

这可能有效（注意：未经测试！）：

```
-(CGPoint) targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset
                             withScrollingVelocity:(CGPoint)velocity
{
  CGFloat offsetAdjustment = MAXFLOAT;
  CGFloat targetX = proposedContentOffset.x + self.minimumInteritemSpacing + self.sectionInset.left;

  CGRect targetRect = CGRectMake(proposedContentOffset.x, 0.0, self.collectionView.bounds.size.width, self.collectionView.bounds.size.height);

  NSArray *array = [super layoutAttributesForElementsInRect:targetRect];
  for(UICollectionViewLayoutAttributes *layoutAttributes in array) {

    if(layoutAttributes.representedElementCategory == UICollectionElementCategoryCell) {
      CGFloat itemX = layoutAttributes.frame.origin.x;

      if (ABS(itemX - targetX) < ABS(offsetAdjustment)) {
        offsetAdjustment = itemX - targetX;
      }
    }
  }

  return CGPointMake(proposedContentOffset.x + offsetAdjustment, proposedContentOffset.y);
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-05-21T05:12:50.573

我的答案基于答案[https://stackoverflow.com/a/27242179/440168](https://stackoverflow.com/a/27242179/440168)但更简单。

![在此处输入图像描述](../Images/3767acdb77fd00d05b3ac9be20aba78f.png)

您应该放在`UIScrollView`上面`UICollectionView`并给它们相同的大小：

```
@property (nonatomic, weak) IBOutlet UICollectionView *collectionView;
@property (nonatomic, weak) IBOutlet UIScrollView *scrollView; 
```

然后配置`contentInset`collection view，例如：

```
CGFloat inset = self.view.bounds.size.width*2/9;
self.collectionView.contentInset = UIEdgeInsetsMake(0, inset, 0, inset); 
```

`contentSize`滚动视图：

```
self.scrollView.contentSize = CGSizeMake(self.placesCollectionView.bounds.size.width*[self.collectionView numberOfItemsInSection:0],0); 
```

不要忘记设置滚动视图的委托：

```
self.scrollView.delegate = self; 
```

并实现主要魔法：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView == self.scrollView) {
        CGFloat inset = self.view.bounds.size.width*2/9;
        CGFloat scale = (self.placesCollectionView.bounds.size.width-2*inset)/scrollView.bounds.size.width;
        self.collectionView.contentOffset = CGPointMake(scrollView.contentOffset.x*scale - inset, 0);
    }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-11-18T14:08:22.393

你`UICollectionView`的宽度应该是单元格大小宽度+左右插图的精确乘积。在您的示例中，如果单元格宽度为 96，则`UICollectionView`' 宽度应为`(96 + 5 + 5) * 3 = 318`. 或者，如果您希望保持 UICollectionView 的 320 宽度，则您的单元格大小宽度应为`320 / 3 - 5 - 5 = 96.666`.

如果这没有帮助，`UICollectionView`当应用程序运行时，您的宽度可能与 xib 文件中设置的不同。要检查这一点 - 添加一条`NSLog`语句以在运行时打印输出视图的大小：

```
NSLog(@"%@", NSStringFromCGRect(uiContentViewController.view.frame)); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-14T05:02:04.240

这是我遇到的同样的问题，我在另一篇文章中发布了我的解决方案，所以我会在这里再次发布。

我找到了一个解决方案，它涉及 UICollectionViewFlowLayout 的子类化。

我的 CollectionViewCell 大小为 302 X 457，我将最小行距设置为 18（每个单元格 9pix）

当您从该类扩展时，有一些方法需要被覆盖。其中之一是

*   (CGSize)collectionViewContentSize

在这种方法中，我需要将 UICollectionView 中的总宽度相加。这包括 ([datasource count] * widthOfCollectionViewCell) + ([datasource count] * 18)

这是我的自定义 UICollectionViewFlowLayout 方法....

```
-(id)init
{
    if((self = [super init])){

       self.itemSize = CGSizeMake(302, 457);
       self.sectionInset = UIEdgeInsetsMake(10, 10, 10, 10);
       self.minimumInteritemSpacing = 0.0f;
       self.minimumLineSpacing = 18.0f;
       [self setScrollDirection:UICollectionViewScrollDirectionHorizontal];
   }
    return self;
}

-(CGSize)collectionViewContentSize{
   return CGSizeMake((numCellsCount * 302)+(numCellsCount * 18), 457);
} 
```

这对我有用，所以我希望其他人觉得它有用！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-07-07T05:43:23.097

您还可以将视图的宽度设置为“320+间距”，然后将页面启用设置为是。每次都会滚动“320+间距”。我认为这是因为页面启用将滚动视图的宽度而不是屏幕的宽度。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-06T10:48:11.120

我想我确实有解决这个问题的办法。但如果它是最好的，我不会。

`UICollectionViewFlowLayout`确实包含一个名为`sectionInset`. 因此，您可以将 Inset 部分设置为您需要的任何内容，并使 1 页等于一个部分。因此，您的滚动应该自动适合页面（=部分）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-07-11T09:56:27.820

我在分页时遇到了类似的问题。即使单元格插图都是 0 并且单元格的宽度和高度大小与 完全相同`UICollectionView`，但分页还是不正确的。

我注意到的听起来像是这个版本（`UICollectionView`iOS 6）中的一个错误：我可以看到，如果我`UICollectionView`使用宽度 = 310 像素或更高、高度 = 538 像素的 a，我就有麻烦了。但是，如果我将宽度减小到 300 像素（相同的高度），我就可以完美地工作了！

供将来参考，希望对您有所帮助！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-07-31T14:34:33.693

当我尝试在具有部分插入和单元格和行间距的 3 x 3 单元格网格上进行水平分页时遇到了类似的问题。

我的答案（在尝试了许多建议之后——包括子类化 UICollectionViewFlowLayout 和各种 UIScrollView 委托解决方案）很简单。我只是使用 UICollectionView 中的部分，将我的数据集分成 9 个项目（或更少）的部分，并利用 numberOfSectionsInCollectionView 和 numberOfItemsInSection UICollectionView 数据源方法。

UICollectionView 的水平分页现在可以很好地工作。我向目前在类似情况下撕毁头发的任何人推荐这种方法。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-13T04:44:49.947

如果您使用 UICollectionView 的默认流布局并且不希望每个单元格之间有任何空间，则可以通过以下方式将其 miniumumLineSpacing 属性设置为 0：

```
((UICollectionViewFlowLayout *) self.collectionView.collectionViewLayout).minimumLineSpacing = 0; 
```

# objective-c - 导入restkit JSONParser错误

> ID：13228602
> 
> 赞同：0
> 
> 时间：2012-11-05T08:44:55.153
> 
> 标签：objective-c, ios, restkit

我在我的项目中使用 restkit 我试图通过以下方式设置解析器的配置
：

```
[[RKParserRegistry sharedRegistry] setParserClass:[RKJSONParserJSONKit class] forMIMEType:@"text/javascript"]; 
```

我在 restkit 文档中导入了解析器的库

```
#import <RestKit/JSONKit.h> 
```

但总是错误

> **使用未声明的标识符“RKJSONParserJSONKit”**

我也尝试通过从其位置导入标头来修复它：

```
#import <RestKit/Code/Support/Parsers/JSON/RKJSONParserJSONKit.h> 
```

它不起作用，但是当我尝试复制解析器所需的文件并将其作为文件添加到我的项目中时，liker 给了我：

> 重复符号 _OBJC_METACLASS_$_RKJSONParserJSONKit 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/RKJSONParserJSONKit.o /Users/reserveout/Desktop/ReserveOutApplication/ Build/Products/Debug-iphonesimulator/libRestKit.a(RKJSONParserJSONKit.o) 重复符号 _OBJC_CLASS_$_RKJSONParserJSONKit 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects- normal/i386/RKJSONParserJSONKit.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(RKJSONParserJSONKit.o) 重复符号 _RKLogInitialize 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/RKLog.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator /libRestKit.a(RKLog.o) 重复符号 _RKLogConfigureFromEnvironment 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/RKLog.o /Users /reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(RKLog.o) 重复符号 _RKLogLevelForString 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication .build/Objects-normal/i386/RKLog.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(RKLog.o) 重复符号_RKLogValidationError in：/Users/reserveout/Desktop/ReserveOutApplication/ Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/RKLog.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(RKLog.o)重复符号 _RKLogIntegerAsBinary 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/RKLog.o /Users/reserveout/Desktop/ReserveOutApplication/Build/ Products/Debug-iphonesimulator/libRestKit.a(RKLog.o) 重复符号 _lcl_configure_by_component 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/ Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号 _lcl_configure_by_identifier 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/ i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号 __lcl_component_identifier 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication。build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号_lcl_configure_by_header in:/用户/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/ libRestKit.a(lcl.o) 重复符号 __lcl_component_header 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/ Reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit。一个（lcl.o）重复符号_lcl_configure_by_name在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o/Users/reserveout/ Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号 __lcl_component_name 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/ Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号__lcl_level_header in：/Users/reserveout/Desktop/ReserveOutApplication/Build/中间体/ReserveOutApplication。build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号__lcl_level_header_1 in:/用户/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/ libRestKit.a(lcl.o) 重复符号 __lcl_level_header_3 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/ Reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号 __lcl_level_name 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/ Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号 __lcl_version 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/ i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) ld：架构 i386 clang 的 19 个重复符号：错误：链接器命令失败，退出代码 1（使用 -v 查看调用）/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator /libRestKit.a(lcl.o) 重复符号 __lcl_version 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users /reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) ld：架构 i386 clang 的 19 个重复符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator /libRestKit.a(lcl.o) 重复符号 __lcl_version 在：/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users /reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) ld：架构 i386 clang 的 19 个重复符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号 __lcl_version 在：/Users/reserveout/Desktop/ReserveOutApplication/ Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) ld：架构 i386 的 19 个重复符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) 重复符号 __lcl_version 在：/Users/reserveout/Desktop/ReserveOutApplication/ Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator/libRestKit.a(lcl.o) ld：架构 i386 的 19 个重复符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator /libRestKit.a(lcl.o) ld：架构 i386 的 19 个重复符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）/Users/reserveout/Desktop/ReserveOutApplication/Build/Intermediates/ReserveOutApplication.build/Debug-iphonesimulator/ReserveOutApplication.build/Objects-normal/i386/lcl.o /Users/reserveout/Desktop/ReserveOutApplication/Build/Products/Debug-iphonesimulator /libRestKit.a(lcl.o) ld：架构 i386 的 19 个重复符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:53:47.190

1.  RestKit 默认配置为使用 JSONKit
2.  您的导入错误，这不会导入您想要的内容。

试试这个，但这是 Wile E. Coyote 的解决方案

```
#import "RestKit/Code/Support/Parsers/JSON/RKJSONParserJSONKit.h" 
```

3.如果真的要复制资源，只复制头文件，不要复制源文件（.m）

# iphone - Iphone Youtube Fullscreen Webapp（独立）无音频（BUG？）

> ID：13228603
> 
> 赞同：3
> 
> 时间：2012-11-05T08:45:11.217
> 
> 标签：iphone, web-applications, youtube, youtube-api, iphone-standalone-web-app

.

我使用标准嵌入代码在网页（不是“APP”而是“WEBAPP”）上嵌入了一个 Youtube 视频，
如下 Youtube 视频所示。

当我从标准 Safari 快捷方式（主屏幕）打开我的页面时，一切正常，并且我确实有音频当我从自定义图标快捷方式（主屏幕）打开我的页面时，它会显示全屏“独立”（webapp 样式）然后视频再次播放正常，但是：没有音频！

因为我使用了标准的嵌入代码，并且因为它可以在标准的非独立环境中工作：
这对我来说似乎是一个错误。（iPhone 或 Youtube）

我知道 Youtube API 论坛已关闭，虽然他们提到我应该在这里问，
所以我希望任何 Youtube-Api 工作人员（你好......Jarek？）都会回复可疑的错误。

我在这里的第一个帖子......希望它是一个正确的帖子。

iPhone4s,iOS 6.0.1

.

- -/ 更新 / - -

当我们链接到视频（非嵌入）时，它可以在两种模式下工作。（独立或野生动物园）
就像我们确实在两种模式下都有音频。

但这实际上意味着我们不能为 iPhone（和其他）嵌入视频，
即：我们不能在页面上/上播放视频。

找到这个后，您可能会认为“这不是什么大灾难，因为即使我们嵌入它仍然会在独立播放器中打开”......“所以你也可以简单地链接到它”。
但这会杀死独立模式（webapp），因为：

*   当我们链接到在同一页面中打开时，没有返回（到上一页）选项。
*   当我们链接以在新页面中打开时，同样的事情......不回去了。
*   在这两种情况下，Safari 浏览器都会出现！
    （我们通过使用自定义图标使其充当 web 应用程序来避免这种情况）。

结果，我们的访问者迷路了，因为他看不到如何返回主页（站点索引）
，唯一的出路是关闭并从 iPhone 的主屏幕（图标）再次加载页面，
或者重新输入 URL是不是很麻烦...喧嚣？（抱歉不是母语英语）。

此外，在嵌入时，我们被迫使用 200 px 的最小高度
（没有控制栏的最小嵌入，即：控件设置为“0”）
，以获得没有大黑条的 16:9 嵌入，那么宽度需要为 356 px，
在无调整大小模式下太大以适应 iPhone。它将使用很多空间，现在覆盖或部分
隐藏在您将在（非滚动）页面上拥有的其他内容和按钮之下。

它是我们需要的一长串设置（不调整大小...等），以使移动网站（webapp）看起来不错并且直观地工作...更改一个会导致其他无法预料的问题。

除了“播放列表”之外，它们还可以在两种模式下工作......但它们没用！
我的意思是，如果您的列表中有 200 个视频..您如何期望访问者观看他喜欢的视频 nr 56？，
这将永远接受！
因为没有缩略图（比如在一个完整的桌面页面上）可以直接去那里，
所以现在它是：播放 nr1 等到（safari/Qt）播放器控件出现点击下一步按钮......
和这样做 55 次，直到你得到你想要的那个？

所以无论如何你看它，有用的嵌入（或链接）是不可能的。
除非这是一个错误（将在 iPhone 10 之前解决？）
或者如果有人知道如何更好地做到这一点？

.

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:03:26.333

您需要使用对象而不是 iframe。奇怪地有同样的问题。

[http://www.shockoe.com/blog/embedded-youtube-videos-wont-play-sound-through-speakers-when-played-from-web-apps-added-to-homescreen-fix/](http://www.shockoe.com/blog/embedded-youtube-videos-wont-play-sound-through-speakers-when-played-from-web-apps-added-to-homescreen-fix/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T13:52:43.473

ios7 上的相同错误。如果在 webapp 中查看页面，播放 iframe 嵌入代码 youtube 时没有声音

# ruby-on-rails-3 - Rails LEFT OUTER JOIN 加载多个模型

> ID：13228604
> 
> 赞同：1
> 
> 时间：2012-11-05T08:45:16.370
> 
> 标签：ruby-on-rails-3

我有一个名为 Entry 的模型，它有很多：entry_states。EntryState 有一个名为 :read 的属性。

无论是否有 entry_state，我都想获取所有条目，所以我认为 LEFT OUTER JOIN 是[在 Coding Horror 上查看左外连接的最佳方式](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

但是，我还想在结果中包含一个 EntryState 属性。所以我有一个看起来像这样的查询：

```
entries = Entry.select('entries.*, entry_states.read').
joins("LEFT OUTER JOIN entry_states ON entries.id = entry_states.entry_id AND entry_states.user_id = #{user_id}") 
```

这个问题是 entry_states 对象在此之后不可用。

我可以获得如下读取状态：

```
entries.first.read
>> t 
```

`true`这给了我原始列值，但这是一个布尔列，因此返回或返回会很棒`false`

如果我能得到整个 EntryState 对象，那就更好了。我试过使用 .includes(:entry_state)，但我还没有找到一种方法来包含外部连接条件`AND entry_states.user_id = #{user_id}`

# filter - Google Site Search API - 使用多个属性进行过滤

> ID：13228607
> 
> 赞同：1
> 
> 时间：2012-11-05T08:45:19.160
> 
> 标签：filter, google-search-api, google-custom-search

是否可以使用多个页面地图属性过滤 Google 自定义搜索结果？

例如，我想使用元标记`category_name`和`site_section`. 我尝试以不同的方式执行此操作，包括以下方式，但它不起作用：

```
?q=search_term+more:p:metatags-category_name:filter_term,more:p:metatags-site_section:filter_term 
```

我查看了[Google 开发人员文档](https://developers.google.com/custom-search/docs/structured_search#filter_by_attribute)，但它仅显示使用具有多个关键字的一个属性进行过滤。

# database - 如何将带有'字符的简单字符串插入oracle数据库

> ID：13228609
> 
> 赞同：3
> 
> 时间：2012-11-05T08:45:29.660
> 
> 标签：database, oracle, insert

所以我的问题是我需要将公司名称插入某个数据库。它工作正常，但是当我尝试插入时，例如 Mc'Donalds 它不起作用，因为它在真正结束之前找到结束。所以当我尝试这样做时：

```
Inert into mydatabase (name, adress) values ('Mc'Donalds', 'somewhere') 
```

它崩溃了。是否有一些像 \ 这样的字符可以忽略它？感谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T08:47:05.157

要转义保留字符，如`'`，您可能需要将撇号字符加倍。请参阅[http://www.orafaq.com/faq/how_does_one_escape_special_characters_when_writing_sql_queries](http://www.orafaq.com/faq/how_does_one_escape_special_characters_when_writing_sql_queries)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T09:23:13.793

要完整，您还可以使用 q 函数：`q'[Mc'Donalds]'`

另请参阅此博客条目： [http ://www.talkapex.com/2009/03/q-function-escape-single-quotes.html](http://www.talkapex.com/2009/03/q-function-escape-single-quotes.html)

# javascript - 单击框阴影阴影 - Javascript（不是 jquery）

> ID：13228615
> 
> 赞同：1
> 
> 时间：2012-11-05T08:46:13.183
> 
> 标签：javascript, css

我希望在单击图像时出现阴影。我现在不使用 Jquery，所以如果可能的话，提供一个 java-script 解决方案。这是我的小提琴：http: [//jsfiddle.net/zUNhD/7/](http://jsfiddle.net/zUNhD/7/)

我还希望框阴影仅在当前选择的任何项目上处于活动状态。（最后点击的项目应该是唯一有阴影的项目）

```
 window.onload = function(){
var box1 = document.getElementById('thumbs');
var box1Div1 = box1.getElementsByTagName('input');
var img1 = box1Div1[0]
    console.log(img1);

    img1.onclick = function(){
    img1.setAttribute("class", "BoxShadow");
   };
   }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:31:44.620

从评论扩展：

您可以使用`:active`选择器来响应“点击”事件，并使用`:focus`选择器来响应“焦点”事件：

```
input:active, input:focus{
    box-shadow:2px 2px 2px blue;
} 
```

[小提琴](http://jsfiddle.net/zUNhD/29/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:51:22.360

您的代码中尚未调用该函数。

```
window.onload = function(){
var box1 = document.getElementById('thumbs');
var box1Div1 = box1.getElementsByTagName('input');
var img1 = box1Div1[0];      
img1.onclick = function(){
img1.setAttribute("class", "DropShad");
};
}(); 
```

这是工作小提琴... [http://jsfiddle.net/zUNhD/18/](http://jsfiddle.net/zUNhD/18/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:17:29.517

有关代码的一些简化，请参阅[此 jsfiddle](http://jsfiddle.net/E2w5K/)。css 类没有正确分配，它应该在前面加一个点。将您的脚本标签放在结束`</body>`标签附近并使用：

```
var box1 = document.getElementById('thumbs');
var box1Div1 = box1.getElementsByTagName('input');
var img1 = box1Div1[0]

img1.onclick = function(){
  img1.className = "DropShad";
}; 
```

# java - Java 反模式名称？包含对象的对象包含...等

> ID：13228617
> 
> 赞同：8
> 
> 时间：2012-11-05T08:46:13.963
> 
> 标签：java, refactoring, anti-patterns

对于包含...的对象的对象是否有名称或特定规则，等等。我正在使用一个复杂的系统，该系统通常具有运行 5-10 层深的对象。我听说这样做的一个原因是一次将大量数据从服务器传递到客户端，有没有更好的方法来做到这一点？

编辑：它似乎是一些反模式的组合。域模型应该被清理，以下反模式是异味：Train Wreck Pattern 和[Everything but the kitchen-sink map](http://blogs.msdn.com/b/ebattalio/archive/2006/11/16/anti-pattern-kitchen-sink-maps.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T08:51:09.020

我不知道这种对象树的名称。但是一个众所周知的反模式是**火车残骸模式**，当代码使用过多的方法链接时就会出现这种模式。

```
objA.getChildB().getChildC().getChildD()....getChildZ().performSomeAction(); 
```

包装所有内容是一个很好的经验法则

```
.getChildC().getChildD()....getChildZ().performSomeAction(); 
```

成一个方法

```
objA.getChildB() 
```

让我们调用这个方法`performSomeActionDeepDownTheObjectTree()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T08:55:47.157

这看起来像是一个变质的域模型（不是反模式名称，顺便说一句:) 它源于存在定义明确的域模型这样的东西的错觉。实际上，问题域的**某些**方面可以被优雅地建模，但在更精细的细节层次上，有例外上的例外和特殊情况下的特殊情况，每个特定于单个服务方法，这破坏了这种优雅。

许多嵌套对象的出现通常是不断将域模型“研磨”到更细粒度的结果，希望每个实例变量都可以在不同的上下文中重用。有一个突破点，重用每个域属性的教条命令不再有意义。

我的出路是停止尝试创建一个万能的域模型，并使用专门为每个服务调用设计的对象。这些对象可能依赖于一些定义良好的域对象，但会以不干扰其他服务调用的方式单独添加任何特定信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T08:53:31.890

该术语是“面向对象”，其中您通过定义对象类将大型复杂问题分解为较小的问题，每个对象都封装了问题的一小部分。对象交互的方式是通过消息传递，并且对象通过从它们包含的对象开始来查找要传递消息的其他对象。

问题越大越复杂，将其分解为可管理的部分所需的工作就越多，因此获得的对象层数就越多。有时，简单的小问题会被严重分解成大量对象，但这并不会使面向对象本身成为一种反模式。

* * *

> 主要问题只是数据对象通过嵌套以及包含不相关的数据而变得太大。示例：您正在对鸟类进行分类，而不是一个简单的鸟类对象，您收到一个对象鸟类，包含羽毛、喙、可能的寄生虫、空气、可能的HousesNestsCanBeIn 和食物类型，食物类型包含水果、昆虫、蠕虫、种子，种子包含橡树、榆树, thistle, possibleAnimalsThatCanEatSeeds 等等 –</p>

Everything but the [kitchen-sink map](http://blogs.msdn.com/b/ebattalio/archive/2006/11/16/anti-pattern-kitchen-sink-maps.aspx)反模式可能是最合适的。

> 给定一个具有许多复杂规则的复杂流程，所有内容（业务逻辑、相关和不相关的过程等）都被塞进地图中。

解决此问题的最佳方法是使用过滤操作，您可以在其中指定强类型接口，例如`interface BirdList extends Iterable<Bird> {}`，查询系统提供了一个由足够数据支持的实现来支持该接口。

您的 API 可以提供许多不同的接口，例如`BirdList`and `BirdFeedingHabitMap`,`BirdNestingHabitMap`等。客户端可以提出他们需要的接口列表，查询系统分析它们，获取数据，并使用[代理类](http://docs.oracle.com/javase/1.3/docs/guide/reflection/proxy.html)组装一个公开查询的实现类导致类型安全的方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T08:58:25.913

> 包含包含……等的对象的对象

被称为列表，非常好；）

但你是对的，长序列的方法调用几乎没有问题，而且干净的代码气味称为**不恰当的亲密关系**。

不恰当的亲昵可以`increase coupling, decrease cohesion`，有悖`law of demeter`常理`tell, don't ask`。

**参考资料**：如果您查找这些术语，您会发现很多答案。特别好的是[内聚和耦合](http://msdn.microsoft.com/en-us/magazine/cc947917.aspx)以及 Robert C. Martin 的书[敏捷软件开发、原则、模式和实践](https://rads.stackoverflow.com/amzn/click/com/0135974445)。

# objective-c - 如何读取 novacaine 中的 VBR 音频（相对于 PCM）

> ID：13228618
> 
> 赞同：0
> 
> 时间：2012-11-05T08:46:18.473
> 
> 标签：objective-c, core-audio, signal-processing, accelerate-framework

[novacaine](https://github.com/alexbw/novocaine#readme)的创建者提供了示例代码，其中从文件中读取音频数据并将其馈送到环形缓冲区。但是，当创建文件阅读器时，输出被强制为 PCM：

```
- (id)initWithAudioFileURL:(NSURL *)urlToAudioFile samplingRate:(float)thisSamplingRate numChannels:(UInt32)thisNumChannels
{

...

    // We're going to impose a format upon the input file
    // Single-channel float does the trick.
    _outputFormat.mSampleRate = self.samplingRate;
    _outputFormat.mFormatID = kAudioFormatLinearPCM;
    _outputFormat.mFormatFlags = kAudioFormatFlagIsFloat;
    _outputFormat.mBytesPerPacket = 4*self.numChannels;
    _outputFormat.mFramesPerPacket = 1;
    _outputFormat.mBytesPerFrame = 4*self.numChannels;
    _outputFormat.mChannelsPerFrame = self.numChannels;
    _outputFormat.mBitsPerChannel = 32;

} 
```

我正试图通过允许它为 novacaine 项目做出贡献

*   从 iPod 库中读取（只能通过 AVAssetReader 访问，而不是音频文件服务库）
*   读写 VBR 数据包而不是 PCM。

所以这就是我上面的等效功能的样子（见注：部分）

```
- (id)initWithAudioAssetURL:(NSURL *)urlToAsset samplingRate:(float)thisSamplingRate numChannels:(UInt32)thisNumChannels
{
    self = [super init];
    if (self)
    {

        // Zero-out our timer, so we know we're not using our callback yet
        self.callbackTimer = nil;

        // Open a reference to the audio Asset Track and setup the reader
        self.assetURL = urlToAsset;
        AVURLAsset *songAsset = [AVURLAsset URLAssetWithURL:self.assetURL options:nil];
        NSError * error = nil;
        AVAssetReader* reader = [[AVAssetReader alloc] initWithAsset:songAsset error:&error];
        AVAssetTrack* track = [songAsset.tracks objectAtIndex:0];

        //NOTE: we use the track's native settings here, as opposed to forcing it to be PCM
        //like the example above
        _readerOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:track
                                                                  outputSettings:NULL];

        _nativeTrackASBD = [self getTrackNativeSettings:track];

        [reader addOutput:_readerOutput];
        [reader startReading];

        // Set a few defaults and presets
        self.samplingRate = thisSamplingRate;
        self.numChannels = thisNumChannels;
        self.latency = .011609977; // 512 samples / ( 44100 samples / sec ) default

        // Arbitrary buffer sizes that don't matter so much as long as they're "big enough"
        self.outputBufferSize = 100000; //buffer sample sizes vary around 60-70k, we keep it @ 100k to be safe
        self.numSamplesReadPerPacket = 8192;
        self.desiredPrebufferedSamples = self.numSamplesReadPerPacket*2;

        //NOTE: these buffers are float, where as the above audio code is in SInt16
        self.outputBuffer = (float *)calloc(2*self.samplingRate, sizeof(float));
        self.holdingBuffer = (float *)calloc(2*self.samplingRate, sizeof(float));

        // Allocate a ring buffer (this is what's going to buffer our audio)
        ringBuffer = new RingBuffer(self.outputBufferSize, self.numChannels);

        // Fill up the buffers, so we're ready to play immediately
        [self bufferNewAudioFromAsset];

    }
    return self;
} 
```

查看代码，似乎一切都是浮点数（音频缓冲区、输出格式等）。这有什么原因吗？（请记住，iOS 音频规范格式是 SInt16，*而不是*浮点数）.. 例如在 Novocaine::renderCallback 函数中查看：

```
else if ( sm.numBytesPerSample == 2 ) // then we need to convert SInt16 -> Float (and also scale)
{
    float scale = (float)INT16_MAX;
    vDSP_vsmul(sm.outData, 1, &scale, sm.outData, 1, inNumberFrames*sm.numOutputChannels);

    for (int iBuffer=0; iBuffer < ioData->mNumberBuffers; ++iBuffer) {  

        int thisNumChannels = ioData->mBuffers[iBuffer].mNumberChannels;

        for (int iChannel = 0; iChannel < thisNumChannels; ++iChannel) {
            vDSP_vfix16(sm.outData+iChannel, sm.numOutputChannels, (SInt16 *)ioData->mBuffers[iBuffer].mData+iChannel, thisNumChannels, inNumberFrames);
        }
    }

} 
```

为了使该库与读写 VBR 数据兼容，我必须更改哪些内容？

一个

# python - 使用装饰器创建类

> ID：13228620
> 
> 赞同：2
> 
> 时间：2012-11-05T08:46:30.893
> 
> 标签：python, decorator, fsm

我已经`Finite state machine`在 python 中实现了一个。这可行，但实现状态需要编写不必要的代码。

```
class State:
    def __init__(self):
        <do something>

    def __call__():
       <do something different>

class ConcreteState(State):
    def __init__(self):
       super().__init__()

    def __call__():
        super().__call__()
       <do concrete state implementation> 
```

是否可以`decorator`像下面的例子那样实现一个具体的状态？

```
@StateDecorator
def concreteState():
   <do concrete state implementation> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:53:44.670

就像是：

```
def StateDecorator(implementation):
    class StateImplementation(State):
        def __call__(self):
            super().__call__()
            implementation()
    return StateImplementation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:53:35.280

这很丑陋，但是由于装饰器可以返回任何东西，所以它可以返回一个类而不是一个函数：

```
def StateDecorator(fn):
    class cls(State):
        def __call__(self):
            super().__call__()
            fn(self)
    return cls

@StateDecorator
def concreteState(self):
    print("cc", self)

concreteState
<class '__main__.cls'> 
```

请注意，这可能会混淆您正在使用的任何静态分析工具。

# zope - 用于开发环境的 Zope 构建

> ID：13228622
> 
> 赞同：0
> 
> 时间：2012-11-05T08:46:35.227
> 
> 标签：zope, buildout

是否可以让 Zope2 buildout 将 python 文件解压缩到它们的正常目录中，就像标准 python 模块所做的那样，而不是在单独的 .egg 目录下？它使调试时更容易查找文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T10:16:18.017

“常规”设置不太支持命名空间包，其中多个鸡蛋共享一个顶级名称（例如`plone.app`and`zope`等）

使用构建[`collective.recipe.omelette`配方](http://pypi.python.org/pypi/collective.recipe.omelette)构建“常规”设置，它使用符号链接为您提供所有使用的鸡蛋的可搜索结构。

```
[buildout]
parts =
    omelette
    ...

[omelette]
recipe = collective.recipe.omelette
eggs = ${instance:eggs} 
```

您将在 中找到结果`parts/omelette`。请注意，此结构使用符号链接，因此如果您使用类似`find`或`ack`确保将它们配置为遵循符号链接的工具（例如`find parts/omelette -L`和`ack --follow`）。

*Python 本身不*使用omelette 目录结构，它纯粹用于从构建中使用的所有鸡蛋中呈现一个连贯的库结构。

请注意，对于 Windows，您还需要安装[junction 实用程序](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)才能使配方正常工作。

# air - Adobe air (HTML+JS) 防止图像、输入和文本区域的右键单击事件

> ID：13228628
> 
> 赞同：0
> 
> 时间：2012-11-05T08:47:06.983
> 
> 标签：air, adobe

我正在开发一个 Adob​​e Air 应用程序。它基于html和js。所以有`img`,`input`和`textarea`标签，当右键单击时会显示一个原生菜单。例如，右键单击`img`标签，它会显示一个带有**保存图像**菜单项的本机菜单。

我试过使用普通的javascript方法，比如`event.preventDefault()`，它根本不起作用。

那么如何防止那些原生菜单呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T07:37:35.773

我发现 7 个月后很容易解决这个问题。这是关于`contextmenu`。

## 例子：

这是一个`<img>`现在。

```
<img src="https://www.google.com/images/srpr/logo4w.png"> 
```

为它添加一个`contextmenu`事件监听器，并阻止它的默认行为。

```
<img id="a" src="https://www.google.com/images/srpr/logo4w.png" >

<script>
  $('#a').on('contextmenu', function(e) {
    e.preventDefault();
    e.stopPropagation();
  });
</script> 
```

然后默认菜单消失。

## 演示[jsfiddle.net](http://jsfiddle.net/Witcher42/VQWF7/)

# elgg - ELGG 主题插件显示此插件无效：缺少所需的文件“start.php”。错误

> ID：13228629
> 
> 赞同：2
> 
> 时间：2012-11-05T08:47:07.573
> 
> 标签：elgg

嗨，我是 Elgg 框架的新手，我正在寻找更改我网站的主题，我使用了海洋主题、pab_theme、puritythree_theme，并且我在管理页面中打开了插件，我无法激活主题

```
seatheme

This plugin is invalid: The required file "start.php" is missing.

Check the Elgg documentation for troubleshooting tips 
```

上面的信息是显示的，所以我怎么能改变主题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T07:29:27.567

每个插件（和主题都是插件）都需要在插件目录的根目录中有一个 start.php 文件。所以路径应该类似于：Elgg/mod/seatheme/start.php

主题需要驻留在 mod 目录中，并且必须有一个启动文件。如果由于某种原因它没有，那么你会得到那个错误。

您真的要加载三个主题吗？一般人只加载一个。我不认为这是错误的原因。

如果您花一些时间阅读 Elgg 文档会很好，特别是： http: [//docs.elgg.org/wiki/Themes](http://docs.elgg.org/wiki/Themes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T18:52:07.373

我有同样的问题，但我找到了解决方案。您必须下载主题的 zip 文件，解压缩文件，打开文件，如果在其中找到另一个文件，则必须将该文件发送到 mod 文件。基本上该目录将是 Theme->Theme-> 其余包含 start.php 的文件。

因此，您必须将第二个文件夹发送到 mod 文件夹。

# bash - Net-snmp (get/walk) 的 shell 脚本效率不高

> ID：13228630
> 
> 赞同：0
> 
> 时间：2012-11-05T08:47:08.707
> 
> 标签：bash, shell, snmp, net-snmp

```
#!/bin/bash
for i in `seq 1 3000`
do
    index=`snmpget -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067.4.1.1.1.$i` 
done

for i in `seq 1 3000`
do
    upload=`snmpget -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067.4.1.1.10.$i` 
done

for i in `seq 1 3000`
do
    download=`snmpget -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067.4.1.1.11.$i` 
done 
```

（ubuntu-12.04）上面是我的shell脚本......每次执行snmpget命令它都会返回一个整数并将值存储在上述三个变量中......问题是数据表有9000个值。因此，使用此脚本会消耗过多的时间和 bettelnake。

任何人都可以建议我一些简单的“SNMPWALK”（或其他任何东西）使用脚本，我可以将所有这些数据存储到单个数组 [9000] 或三个解析中，在三个不同的数组中，索引为 1 到 3000.so我可以尽可能地减少时间。

例如： snmpwalk -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067 给出所有值，但我不知道如何将所有这些存储在具有不同索引的数组中。..................................................... ......

看到我在下面尝试过：但是给我错误...

```
cat script.sh

 #!/bin/sh
OUTPUT1=$(snmpbulkwalk -Oqv -c public -v 2c localhost 1.3.6.1.2.1.2.2.1.1 2> /dev/null)
i=1
for LINE in ${OUTPUT1} ;
    do
        OUTPUT1[$i]=$LINE;
        i=`expr $i + 1`
    done

sh script.sh
j4.sh: 6: j4.sh: OUTPUT1[1]=1: not found
j4.sh: 6: j4.sh: OUTPUT1[2]=2: not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:04:33.537

尝试这样的事情：

```
OID="1.3.6.1.4.1.21067.4.1.1"

declare -a index=($(snmpwalk-v 2c -c public -Oqv localhost ${OID}.1))
declare -a upload=($(snmpwalk-v 2c -c public -Oqv localhost ${OID}.10))
declare -a download=($(snmpwalk-v 2c -c public -Oqv localhost ${OID}.11))

echo "retrieved ${#index[@]} elements"
echo"#${index[1]}: up=${upload[1]} down=${download[1]} 
```

请注意，一般来说，我建议使用一些高级语言（如*python*）而不是*bash*来更有效地使用 snmp ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T16:46:29.903

我建议您检索的表是否使用 SNMPTABLE 而不是 walk 或 get。

# jquery - 根据文本匹配查找段落ID

> ID：13228631
> 
> 赞同：0
> 
> 时间：2012-11-05T08:47:23.323
> 
> 标签：jquery

当我传递文本“选择列表”或“删除列表”时，如何获取段落的 ID。

```
"<p id="section_548540600_title" class="CollapseExpand CollapseExpand_active" title="Collapse / Expand"><a href="javascript:void(0);">Selection List</a></p>"

"<p id="section_362548963_title" class="CollapseExpand CollapseExpand_active" title="Collapse / Expand"><a href="javascript:void(0);">Deletion List</a></p>" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T08:50:54.027

假设我正确理解了您的问题，您可以使用[`:contains`](http://api.jquery.com/contains-selector/)选择器根据元素的文本内容匹配元素：

```
// Where `someString` is "Selection List" or "Deletion List":
var id = $("p:contains('" + someString + "')").attr("id"); 
```

* * *

**更新**

请注意，上述方法假设您只有一个包含每个字符串的元素。如果有其他元素包含相同的字符串，您可能需要不同的方法来确保元素*仅*包含该字符串：

```
var id = $("p").filter(function () {
             return $.trim($(this).text()) === "Test";
         }).attr("id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:50:25.763

将 HTML 字符串传递给 jQuery 将为您提供该字符串的 DOM 表示，然后您可以像通常操作实际存在于 DOM 中的任何节点一样操作它。在你的情况下：

```
$(htmlString).attr('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:52:01.500

如果你的意思是，点击段落，你可以这样做：

HTML : (将类添加到锚标记)

```
 "<p id="section_548540600_title" class="CollapseExpand CollapseExpand_active" title="Collapse / Expand"><a href="javascript:void(0);" class='myclass'>Selection List</a></p>" 
```

JS：

```
 $(".myclass").on({

       click : function(e){
          req_id = $(this).parent().attr("id");

        }
     }); 
```

# facebook - 开发者：缺少隐私政策‏ - 没有及时更新

> ID：13228641
> 
> 赞同：1
> 
> 时间：2012-11-05T08:47:51.267
> 
> 标签：facebook, email, privacy, policy

我收到了两封来自 facebook 的电子邮件，要求提供隐私政策链接，但我无法及时完成。我有超过 8000 个活跃用户，现在没有人可以连接到我的论坛。我猜他们终止了应用程序？我确实将链接添加到我的应用程序中，但它仍然无法正常工作。我环顾四周，看看是否有其他人经历过同样的事情。我如何联系 Facebook 并解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:25:45.480

> 我猜他们终止了应用程序？

检查您的应用仪表板——通常，作为第一项措施，您的应用会进入沙盒模式。

添加缺少的策略链接，然后再次尝试将其退出沙盒模式。

# facebook - 如何在 facebook 中使用 php 发送应用请求

> ID：13228643
> 
> 赞同：0
> 
> 时间：2012-11-05T08:47:55.897
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我有一个已在 facebook 注册的应用程序。我想添加一个向我在 facebook 中的所有朋友发送应用程序请求的选项。我需要通过身份验证和请求继续向所有朋友发送应用请求的权限来做到这一点。这我想在 php 中实现。请朋友们帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:55:23.770

我相信您必须使用仅通过 JavaScript 可用的“请求对话框”来执行此操作。有关如何执行此操作的更多信息和示例，请参见以下页面：

[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:05:24.960

只有 JavaScript 弹出窗口才有可能，并且您可以发送多少请求是有限制的。无论如何，一次向您的所有朋友发送应用程序请求都被视为垃圾邮件，即使有可能，您也不应该这样做。

[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

当然，您可以使用“to”参数来指定要将请求发送给的朋友：

```
function sendRequestToRecipients() {
 FB.ui({method: 'apprequests',
    message: 'My Great Request',
    to: '499802820,499802852'
  }, requestCallback);
} 
```

# android-listview - Android：ListView 仅显示最后一个数组元素

> ID：13228648
> 
> 赞同：1
> 
> 时间：2012-11-05T08:48:30.790
> 
> 标签：android-listview

亲爱的开发者

我是新手。在 ListView 中运行时，我只会在 ListView 中显示数组的最后一个元素......我已经彻底研究了网络，并找到了一些对问题的参考，但没有一个对我的案例有帮助。

下面我将列出自定义数据库助手、布局 XML、Activity、LogCat 打印的代码。你会注意到我已经包含了一个 TextView 以及 ListView ......这只是为了帮助调试...... TextView 工作得很好。我也在运行一个 Log 指令......这个打印来记录有问题的变量。所有变量都打印正确。

.....布局文件：activity_vehicles_fp.xml .......

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableVehicleAdd"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical">

        <TableRow
            android:id="@+id/rowTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
            android:id="@+id/lblTitle"
            android:layout_weight="0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/title_VehicleFP"
            android:textSize="20dp" 
            android:layout_marginTop="10dp"
            android:layout_marginBottom="30dp"
            android:gravity="center"/>

        </TableRow>

        <TableRow      
            android:id="@+id/rowListView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" > 

        <ListView
                android:id="@android:id/list"
                android:layout_weight="1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="vertical"

        />
         </TableRow>

                <TableRow      
            android:id="@+id/rowTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" > 

        <TextView
                android:id="@+id/listTV"

                android:layout_width="fill_parent"
                android:layout_height="fill_parent"

        />

        </TableRow>

       </TableLayout> 
```

==================================================== =======

现在这里是数据库助手的部分... EngenDataClass.java ：

```
 public List<Vehicles> getAllVehicles() {
        List<Vehicles> vehicleList = new ArrayList<Vehicles>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_VEHICLES;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Vehicles vehicle = new Vehicles();

                vehicle.setRegNumber(cursor.getString(1));
                vehicle.setMake(cursor.getString(2));

                // Adding vehicle to list
                vehicleList.add(vehicle);
            } while (cursor.moveToNext());
        }

        // return Vehicle List
        return vehicleList;

    } 
```

==================================================== =====

这是活动部分 [VehiclesActivityFP.java] ：

```
 public class VehiclesActivityFP extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_vehicles_fp); 

      final EngenDataClass db = new EngenDataClass(this);

        ListView listView = getListView(); 
        List<Vehicles> vehicles = db.getAllVehicles();       
        // Listing all Vehicles via TextView
        Log.d("Reading: ", "Reading all Vehicles ..");

        for (Vehicles allVeh : vehicles) {
            String vehicleList = (allVeh.getMake() + "\t" + allVeh.getRegNumber() + "\n");
            String[] values = new String []{ (vehicleList )};

          // Assign adapter to ListView
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,(values));
            listView.setAdapter(adapter);

          //Print to TextView
            TextView myTextView = (TextView) findViewById(R.id.listTV); 
            myTextView.append(vehicleList.toString());

          //Writing Vehicles to log
            Log.d("vehicleList: ", vehicleList.toString());  
            Log.d ("values : ", values.toString());
            Log.d ("values : ", vehicles.toString());

       }          

  } 
```

==================================================== =======================

这是 LogCat ：

```
11-05 10:38:10.267: D/Reading:(866): Reading all Vehicles ..
11-05 10:38:10.267: D/vehicleList:(866): TEST   TEST
11-05 10:38:10.267: D/values :(866): [Ljava.lang.String;@41214360
11-05 10:38:10.267: D/values :(866): [com.BIM.engen.log.Vehicles@41213fc8, com.BIM.engen.log.Vehicles@412140c0, com.BIM.engen.log.Vehicles@41214170, com.BIM.engen.log.Vehicles@41214220]
11-05 10:38:10.277: D/vehicleList:(866): TEST   TEST
11-05 10:38:10.277: D/values :(866): [Ljava.lang.String;@412152c0
11-05 10:38:10.277: D/values :(866): [com.BIM.engen.log.Vehicles@41213fc8, com.BIM.engen.log.Vehicles@412140c0, com.BIM.engen.log.Vehicles@41214170, com.BIM.engen.log.Vehicles@41214220]
11-05 10:38:10.277: D/vehicleList:(866): TESTRR TESTTT
11-05 10:38:10.277: D/values :(866): [Ljava.lang.String;@41215ed0
11-05 10:38:10.277: D/values :(866): [com.BIM.engen.log.Vehicles@41213fc8, com.BIM.engen.log.Vehicles@412140c0, com.BIM.engen.log.Vehicles@41214170, com.BIM.engen.log.Vehicles@41214220]
11-05 10:38:10.287: D/vehicleList:(866): SE PAULA
11-05 10:38:10.287: D/values :(866): [Ljava.lang.String;@41216b60
11-05 10:38:10.287: D/values :(866): [com.BIM.engen.log.Vehicles@41213fc8, com.BIM.engen.log.Vehicles@412140c0, com.BIM.engen.log.Vehicles@41214170, com.BIM.engen.log.Vehicles@41214220]
11-05 10:38:10.487: I/Choreographer(866): Skipped 43 frames!  The application may be doing too much work on its main thread.
11-05 10:38:10.827: I/Choreographer(866): Skipped 61 frames!  The application may be doing too much work on its main thread. 
```

==================================================== ===================

您经验丰富的指导将不胜感激。

威廉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:57:16.140

您创建一个新适配器，并将其分配给每个元素的列表。

1.  首先创建你的数组。
2.  将此数组分配给您的适配器
3.  将此适配器分配到您的列表

所以 ：

```
 List<String> list = new ArrayList<String>();

      for (Vehicles allVeh : vehicles) {
           String vehicle = (allVeh.getMake() + "\t" + allVeh.getRegNumber() + "\n");
           list.add(vehicle)
      }

      String [] values = list.toArray(new String[list.size()]);

      // Assign adapter to ListView
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,(values));
        listView.setAdapter(adapter); 
```

# node.js - 无法使用 express 处理 node.js 域的异常

> ID：13228649
> 
> 赞同：15
> 
> 时间：2012-11-05T08:48:37.943
> 
> 标签：node.js, express, exception, dns, node.js-domains

我想使用 Node.js 域来捕获异常。到目前为止它正在工作，但是有一个地方我无法让域来捕获异常。回调中的 exception2 在 domain.on('error') 处理程序中被捕获和处理，但 exception1 没有被捕获。奇怪的是，当异常 1 被抛出时，它并没有像我期望的那样关闭 Node。这是我的示例应用程序：

```
var domain = require('domain');
var request = require('request');
var express = require('express');

var serverDomain = domain.create();
serverDomain.on('error', function(err) {
  console.log("Server Domain Error: " + err);
});

var app;

serverDomain.run(function() {
  app = express();
  app.listen(3000);
});

app.use(function(req, res, next) {

  var reqDomain = domain.create();
  reqDomain.add(req);
  reqDomain.add(res);
  reqDomain.on('error', function(err) {
    console.log("Req Domain Error: " + err);
    reqDomain.dispose();
    next(err);
  });

  next();
});

app.get('/', function(req, res) {
  var uri = "http://google.com";

  exception1.go();

  request.get({url:uri, json: {}},
    function (error, response, body) {
      if(response.statusCode === 200) {
        exception2.go();
        res.send('Success getting google response');
      }
    });
}); 
```

为了让异常 2 执行，我注释掉异常 1。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-05T20:57:54.823

问题是异常发生在[Connect 的路由](https://github.com/senchalabs/connect/blob/master/lib/proto.js#L129-L149)期间，它有一个[围绕其执行](https://github.com/senchalabs/connect/blob/master/lib/proto.js#L160-L195)`try/catch`的块，以及一个默认的错误处理程序，当在非生产模式下运行时打印出堆栈跟踪详细信息。由于异常是在 Express 内部处理的，因此它永远不会到达您的外层以供域处理。

它的不同之处在于路由`exception2`的处理函数`'/'`直接由该 Connect 块执行，与通过 Express 的原始调用在同一个堆栈中。第二个异常发生在*回调*中，在某些 I/O 操作返回之后，因此由源自 Node 的事件循环 I/O 处理程序的堆栈执行，因此`try/catch`Express 无法捕获该异常并保存应用服务器。事实上，如果你注释掉所有领域的东西，并且绊倒`exception2`它会使 Node.js 崩溃。

由于只有未处理的异常被路由到域机制，并且由于在其上方的调用堆栈中`exception1`有一个`try/catch`可见的，所以异常被处理，而不是转发到域。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T00:05:43.290

Connect-domain 允许您捕获连接模块的所有错误，包括 express。

连接域 [https://github.com/baryshev/connect-domain](https://github.com/baryshev/connect-domain)

express3 的示例：http: [//masashi-k.blogspot.com/2012/12/express3-global-error-handling-domain.html](http://masashi-k.blogspot.com/2012/12/express3-global-error-handling-domain.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-19T10:10:11.203

@user1007983

不，在生产中，Connect/Express 中仍然存在 try/catch 处理。解决它的方法是在“根”中添加您自己的 try/catch 块，然后您可以使用它在连接发送错误响应之前向域发出“错误”事件。

```
try {
    // .. code here ..
} catch (err) {
    domain.emit('error', err);
} 
```

绕过它的另一种方法是与处理程序断开连接，例如将代码包装在 setImmediate 块中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T15:52:02.677

我已经尝试过`try/catch`块（这可能与您对异步代码的想法不同）。我以几种不同的方式尝试了节点**域**。但是我无法处理在 3rd 方库（续集）中引发的异常。为什么我得到了异常？嗯，这是因为生成的 SQL 格式不正确。（我的错）。

Anywho，对我和我的（小）项目最有效的解决方案是**[永远](https://github.com/nodejitsu/forever)**使用。让异常发生，但如果发生，请再次启动节点。我怀疑这是最优雅的解决方案，但它适用于我和我的小项目。

对于较大的项目，结合**[集群 API](http://nodejs.org/api/cluster.html#cluster_cluster)**的域可能是一个不错的选择。

**[温斯顿](https://github.com/flatiron/winston#handling-uncaught-exceptions-with-winston)**是另一个选择。与 winston结合可能会很酷，`forever`这样如果您确实遇到异常，您可以让[winston 给您发送电子邮件](https://github.com/wavded/winston-mail)，这样您就可以修复代码。同时，`forever`很乐意为您重新启动应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-14T14:24:39.513

我在测试基于域的错误处理时遇到了这个问题。

我采用了 Issac 在此处建议的方法，并进行了一些小的更改：使用“domain.active”获取当前活动的域并在其上发出错误事件，并且我使用了一个包装函数来避免修改所有我的处理函数：

```
domainWrapper = function(func) {
    return function(req, res) {
        try {
            return func(req, res);
        } catch (err) {
            domain.active.emit('error', err);
        }
    }
} 
```

然后改变了这种事情：

```
app.get('/jobs', handlerFunc); 
```

对此：

```
app.get('/jobs', domainWrapper(handlerFunc)); 
```

# typescript - 带有打字稿的 JSRender

> ID：13228652
> 
> 赞同：1
> 
> 时间：2012-11-05T08:48:44.953
> 
> 标签：typescript, jsrender

那里有任何 JSRender 打字稿实现吗？

我想从打字稿文件中调用 .render() 方法，但没有 JSRender.js 的打字稿实现

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:22:33.853

可能还没有，但您可以首先将您自己的`jsrender.d.ts`文件添加到您的程序中以获得您需要的部分。由于它是一个 jQuery 插件，您需要添加到 JQuery 界面。

```
/// <reference path="./jquery.d.ts" />

interface JQuery {
    render(data: any);
}

$("body").render(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T05:53:09.873

如果您想要一个快速的解决方案来工作（或测试）

```
var testWrapper :any = $;
testWrapper.render(""); 
```

# xcode - 如何使用 iOS6 从 iPad 中的照片库中选择图像？

> ID：13228655
> 
> 赞同：1
> 
> 时间：2012-11-05T08:48:58.243
> 
> 标签：xcode, ipad, ios6, uiimagepickercontroller

我尝试使用 iOS6 实现从 iPad 中的照片库中挑选图像的代码，但它不起作用。我尝试的代码如下所示。

```
UIImagePickerController *imagePickerController=[[UIImagePickerController alloc] init];

    imagePickerController.delegate=self;

    UIPopoverController *popover=[[UIPopoverController alloc] initWithContentViewController:imagePickerController];

    popover.delegate=self;

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum]) {

        imagePickerController.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;

        [popover presentPopoverFromRect:CGRectMake(400, 400, 0, 0) inView:self.view
                permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

    }
} 
```

谁能告诉我这个问题的解决方案。

任何帮助将不胜感激

# javascript - 当悬停的元素被另一个元素覆盖时不会触发 mouseout

> ID：13228656
> 
> 赞同：5
> 
> 时间：2012-11-05T08:48:59.690
> 
> 标签：javascript, javascript-events

`mouseout`我最近在 javascript 中发现了一个奇怪的事件行为。请看我的小提琴：http: [//jsfiddle.net/Uf3xQ/25/](http://jsfiddle.net/Uf3xQ/25/)

当我将鼠标悬停在按钮上时，`mouseenter`会触发该事件。当我离开按钮时，`mouseout`事件被触发。到现在为止还挺好。

现在，当我将鼠标悬停，然后单击并且单击事件显示放置在按钮上的 div 时，该`mouseout`事件也将被触发。

`setTimeout`但是，当 div 在使用例如短暂延迟后显示时，mouseout 事件将不会被触发，直到我移动鼠标。

你能向我解释这种行为吗？

**更新：** 我将错误提交给铬，他们确认了。见这里：[http ://code.google.com/p/chromium/issues/detail?id=159389](http://code.google.com/p/chromium/issues/detail?id=159389)

该错误也出现在 Opera、Safari（常见的 WebKit）和 IE 中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T01:29:59.617

尝试在叠加层上使用委托来使事件冒泡。
**编辑** 小提琴今天很慢，我最初发布的小提琴没有我使用的代码片段。

这确实适用于 jQuery 版本（1.8.2）选择的 jsBIN fork 链接：http: [//jsbin.com/ugeniq/3/edit](http://jsbin.com/ugeniq/3/edit)

**编辑 2** 我刚刚意识到没有 div 的鼠标/悬停/移出不起作用。我已经更新了代码，所以现在它可以在有和没有 div 覆盖的情况下工作。

```
var fail = true;

var button = document.getElementById("button");
var overlay = document.getElementById("overlay");
var log = document.getElementById("log");

button.addEventListener('click', function() {
    if (fail) {

        // mouseout won't be fired until you move the mouse
        window.setTimeout(function() {
            overlay.style.display = 'block';
        }, 0);

    } else {

        // mouseout event is fired instantly
        overlay.style.display = 'block';

    }

    log.innerHTML += 'over' + "<br>";

}, false);

button.addEventListener('mouseover', function() {
    log.innerHTML += 'over' + "<br>";
}, false);

button.addEventListener('mouseout', function() {
    log.innerHTML += 'out' + "<br>";
}, false);

$(overlay).delegate(button, 'mouseover', function() {
        log.innerHTML += 'over' + "<br>";
});

$(overlay).delegate(button, 'mouseout', function() {
        log.innerHTML += 'out' + "<br>";
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:22:02.027

它似乎是一个不起眼的浏览器错误（在 中`Chrome`）。`Firefox`似乎工作正常。我不确定其他浏览器。

我用原生 js 替换了所有内容，以使其更清晰：

[http://jsfiddle.net/qLCY3/4/](http://jsfiddle.net/qLCY3/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T09:39:59.070

我浏览了 WebKit bugzilla 并且[https://bugs.webkit.org/show_bug.cgi?id=4117](https://bugs.webkit.org/show_bug.cgi?id=4117)似乎是您的错误，您应该在错误中添加一条新评论，并带有指向您的测试用例的链接，因为测试用例在错误似乎丢失了（404 错误）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T13:45:28.420

解决这个问题的最好办法是把button和overlay包装起来，把mouseover和mouseleave改成这个包装器。

//HTML

```
<div class="helper">
  <div class="overlay"></div>
  <button class="button">Foo</button>
</div> 
```

// JS

```
var fail = true;
$$('.helper').addEvent('mouseover', function() {
    console.log('over');
});

$$('.helper').addEvent('mouseleave', function() {
    console.log('out');
});

$$('.button').addEvent('click', function() {
    if(fail) {

        // mouseout won't be fired until you move the mouse
        window.setTimeout(function() {
            $$('.overlay').setStyle('display','block');
        }, 0);

    } else {

        // mouseout event is fired instantly
        $$('.overlay').setStyle('display','block');

    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T01:22:40.707

只需将鼠标移出覆盖层并使其淡出或您想要它做的任何事情。我让它在你的小提琴中保持警惕试试看。

```
 $$('.button').addEvent('mouseover', function() {
console.log('over'); 
```

});

```
 $$('.overlay').addEvent('mouseout', function() {
   alert("ee"); 
```

});

# ios - 无法将 NSString 正确转换为 NSDate

> ID：13228660
> 
> 赞同：-1
> 
> 时间：2012-11-05T08:49:21.340
> 
> 标签：ios, nsdate, nsdateformatter

我在使用日期格式化程序时遇到问题。我正在设置日期格式并以适当的方式传递日期字符串（我认为）。但是结果日志显示了一些其他日期并且 GMT 值已经丢失。我在这里做错了什么？有谁可以帮我离开这里吗 ？

```
 NSDateFormatter *newFormatter = [[[NSDateFormatter alloc] init] autorelease];
  [newFormatter setDateFormat:@"yyyy-mm-dd hh:mm:ss zzz"];

  NSDate *lObjDate = [newFormatter dateFromString:@"2012-11-05 01:45:03 GMT+05:30"];

  NSLog(@">>>>> %@",lObjDate); 
```

* * *

```
 >>>>> 2012-01-04 20:15:03 +0000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:23:00.070

你可以试试：

```
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss Z"]; 
```

# php - PHP setcookie 在 IE8 上不起作用

> ID：13228664
> 
> 赞同：1
> 
> 时间：2012-11-05T08:49:47.243
> 
> 标签：php

以下代码不适用于 IE8。我尝试了 print_r ($_COOKIE) 但它返回了 array(); 请帮我。

```
 1 <?php
  2 $currentTime = time();
  3 
  4 $cookieName   = "go.hyde";
  5 $cookiePath   = "/";
  6 $cookieDomain = $_SERVER['SERVER_NAME'];
  7 $cookieValue  = strval($currentTime);       // value is issue time (Unix Time)
  8 $cookieExpire = strval($currentTime + 600); // expire is 10 minutes after issuing cookie
  9 
 10 setcookie($cookieName,
 11     $cookieValue,
 12     $cookieExpire,
 13     $cookiePath,
 14     $cookieDomain);
 15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:53:02.523

尝试不使用 cookie 路径和 cookie 域

```
setcookie($cookieName,$cookieValue,$cookieExpire); 
```

检查 IE 中是否启用了 cookie

**============== 编辑 =================**

我想我明白了，试试这个：

```
<?
$currentTime = time();
$cookieName   = "gohyde";
$cookieValue  = strval($currentTime);       // value is issue time (Unix Time)
$cookieExpire = strval($currentTime + 600); // expire is 10 minutes after issuing cookie 
setcookie($cookieName,
$cookieValue,
$cookieExpire);
echo $_COOKIE[$cookieName];
?> 
```

没有 cookie 路径和 cookie 域。和不 ”。” cookie 名称中的点。

# c++ - 分段错误 C++ | 谁能指出我正确的方向？

> ID：13228666
> 
> 赞同：-4
> 
> 时间：2012-11-05T08:49:50.927
> 
> 标签：c++, segmentation-fault

我写了这段代码来找到动态时间扭曲的最佳扭曲路径，它返回一个结构。

```
static inline double min (double x, double y,double z )
{
    if(x < y && x < z)
    return x;
    else if(y < x && y < z)
    return y;
    else if(z < x && z < y)
    return z;
}

struct backtracking_result
{
   vector<int> i;
   vector<int> j;
};

backtracking_result backtracking(vector<vector<double> > mGamma)
{
    backtracking_result br;
    cout<<"test"<<mGamma.size()<<endl;
    int i=mGamma.size();
    cout<<"test"<<endl;
    int j=mGamma.at(0).size();
    cout<<"test"<<endl;
    cout<<i<<j<<endl;   
    do
    {
         cout<<"test"<<endl;
         if(i == 1)
            j=j-1;
         else if(j == 1)
            i=i-1;
         else
         {
            if(mGamma[i-1][j] == min(mGamma[i-1][j],mGamma[i][j-1],mGamma[i-1][j-1]))
             i=i-1;
            else if(mGamma[i][j-1] == min(mGamma[i-1][j],mGamma[i][j-1],mGamma[i-1][j-1]))
                 j=j-1;
            else
            {
                i=i-1;
                j=j-1;
            }
         }
    br.i.push_back(i);
    br.j.push_back(j);
  }while((i > 1)&&(j > 1));

  return br;
} 
```

当我调用这个函数时，从 gdb 调试器中得到这个错误

```
Program received signal SIGSEGV, Segmentation fault.
0x000000000041eafb in VectorDTW::backtracking(std::vector<std::vector<double, std::allocator<double> >, std::allocator<std::vector<double, std::allocator<double> > > >) () 
```

错误在哪里？

堆栈跟踪 ：

```
#0  0x000000000041eb17 in VectorDTW::backtracking(std::vector<std::vector<double, std::allocator<double> >, std::allocator<std::vector<double, std::allocator<double> > > >) ()
#1  0x0000000000420195 in VectorDTW::fastdynamic(std::vector<DollarRecognizer::Point2D, std::allocator<DollarRecognizer::Point2D> >&, std::vector<DollarRecognizer::Point2D, std::allocator<DollarRecognizer::Point2D> >&) ()
#2  0x000000000041d18b in main () 
```

答案帮助我找出了问题，我在从矩阵计算 i 和 j 后添加了这两行，

```
i=i-1;
j=j-1; 
```

现在程序不会尝试访问最后一个元素。谢谢 。但我仍然无法理解拒绝投票的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:55:45.800

既然`j`是内部的大小`vector<double>`，`mGamma[i-1][j]`就不存在了。您有典型的非一错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:00:44.737

我认为您应该进行更好的检查`mGamma.size()`，`mGamma.at(0).size()`因为如果*mGamma*的大小为 0，您将访问一个不存在*的 (0)位置。*
如果`mGamma.size()`不是 0，而是`at(0).size()`0，您将进入代码的 else 部分，访问带有负索引的向量，从而导致段错误。

# c# - LINQ获取子数组

> ID：13228668
> 
> 赞同：2
> 
> 时间：2012-11-05T08:49:58.633
> 
> 标签：c#, linq, substring

我有一个`byte[]`，我想提取数组的一部分并将其转换为字符串。我想使用 LINQ 并在一行中完成。这是我能找到的最好的，但它让我失望了。

```
String id = new String(payload.Skip(60).Take(92-60+1).ToString()); 
```

将有效载荷[60]提取到有效载荷[92]并将其转换为字符串。有没有更好的办法？而且我仍然遇到这种语法的一些错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:10:21.620

不需要 linq。[ASCIIEncoding.GetString](http://msdn.microsoft.com/en-us/library/38b953c8.aspx)

```
var str = Encoding.ASCII.GetString(payload, 60, 92-60+1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:58:32.600

您可以尝试以下操作：

```
string.Concat((object[])payload.Skip(60).Take(92-60+1).Cast<object>().ToArray()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:59:06.267

试试这个。

```
String id =Encoding.ASCII.GetString(payload.ToArray().Skip(60).Take(92-60+1).ToArray()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T08:59:56.930

假设一个 UTF8 编码的字符串，你可以像这样使用 linq：

```
Encoding.UTF8.GetString(bytes.Skip(60).Take(32).ToArray()); 
```

一个更直接有效的解决方案是：

```
Encoding.UTF8.GetString(bytes, 60, 32); 
```

这避免了复制数组的部分，并且用秒表快速检查显示它快了 20 倍。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:15:56.753

首先，您应该使用一些编码将您的字节数组转换为字符串（在我看来，与将字节数组转换为字符串的其他方法相比，这是一种安全的方法），并且这种编码取决于您的字节数组格式，并且您更了解它。

其次，因为你有一个数组，所以最好使用内置的数组函数[`Array.Copy`](http://msdn.microsoft.com/en-us/library/z50k9bft.aspx)，因为这比 linq 更快，而且你不需要遍历数组的 92 个元素，你只需要遍历 33 个元素。

```
var secondArray = new byte[92-60+1];
Array.Copy(payLoad, 60, secondArray, 0, 92-60+1);
UTF8Encoding encoding = new UTF8Encoding();
string result = encodin.GetString(secondArray); 
```

# import - 将实时网站导入本地主机

> ID：13228670
> 
> 赞同：0
> 
> 时间：2012-11-05T08:50:03.640
> 
> 标签：import, amazon-ec2, localhost

我正在为我的网站使用 Amazon EC2 实例，该实例现已上线。

我正在努力将最新版本的实时网站导入我的本地服务器。我将网站存档并下载，下载数据库并在本地主机中解压缩到“www/”然后创建和导入数据库后，本地主机不会加载网站。在 localhost 页面上，它将路径更改为“受限页面”，但甚至不显示（加载）受限页面。

将实时网站从 EC2 导入本地主机的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:02:19.980

抱歉，数据库已损坏。我们必须通过一一安装所有内容来提取数据并重新创建整个站点。

# jboss - Jboss 5 AS 集群创建的大量多播流量

> ID：13228674
> 
> 赞同：1
> 
> 时间：2012-11-05T08:50:37.090
> 
> 标签：jboss, cluster-computing

我们有一个使用多播的 2 个节点的 Jboss 5 AS 集群，一切正常，服务器能够发现并创建集群

但问题是这些服务器会产生大量的多播流量，这会影响共享同一网络的其他服务器的网络性能。

我是 Jboss 集群的新手，有什么方法可以使用单播（点对点）而不是多播？或者配置多播，使其对网络的其余部分没有问题？你能给我推荐一些可以帮助我摆脱这个问题的文档、博客文章或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:18:21.917

在这里没有得到任何答案，但这可能对将来的某人有所帮助，我们设法通过以下方式解决它

在启动脚本中为 jboss 设置以下 TTL 属性

```
-Djgroups.udp.ip_ttl=1 
```

这会将多播消息的跳数限制为 1。这不会减少集群 JBoss 之间的网络流量，但会阻止它向外传播。

如果您在同一子网中有其他服务器受到泛洪问题的影响，那么您可能必须切换到 TCP 堆栈并进行单播而不是多播

```
-Djboss.default.jgroups.stack=tcp 
```

jboss deploy 中还有更多用于集群的配置文件，您应该查看。

```
server/production/deploy/cluster/jboss-cache-manager.sar/META-INF/jboss-cache-manager-jboss-beans.xml 
```

和 JGroups 配置中的其他 conf 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:41:37.003

如果由于某种原因多播不是一个选项，它由于网络拓扑而无法工作，我们可以使用单播。

使用单播集群而不是 UDP mcast。打开您的配置文件并查看文件 jgroups-channelfactory-stacks.xml 并找到名为“tcp”的堆栈。该堆栈仍然仅将 UDP 用于多播发现。如果低 UDP 流量没问题，您不需要更改它。如果它是或 mcast 不起作用，您将需要配置 TCPPING 协议并配置 intial_hosts 在哪里寻找集群成员。

之后，您需要告诉 JBoss Cache 使用这个堆栈，打开 jboss-cache-manager-jboss-beans.xml，其中为每个缓存定义了一个堆栈。您可以在此处将其从 udp 更改为 tcp，也可以在启动 AS 时简单地使用该属性，只需添加：

`-Djboss.default.jgroups.stack=tcp`

# python - 从 CruiseControl.NET 运行 python 脚本

> ID：13228677
> 
> 赞同：0
> 
> 时间：2012-11-05T08:50:51.477
> 
> 标签：python, cruisecontrol.net, nant

是否可以从 Cruisecontrol.Net 运行 python 脚本？是否有可以使用的 CCNEt 任务或 nant 任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:33:51.900

我不认为有一个内置的 python 任务，但你应该能够通过制作一个 exec 任务来执行它。

# javascript - jQuery for-loop with :eq / get - 压缩面包屑

> ID：13228679
> 
> 赞同：1
> 
> 时间：2012-11-05T08:50:55.600
> 
> 标签：javascript, jquery, for-loop

我在压缩面包屑时遇到问题。如果面包屑到达许多元素，并且跨越多行，我希望一些起始元素被压缩（“...”）。

**前 1**

```
var height = $('#breadcrumbsContainer > span').height();
var length = $('#breadcrumbsContainer > span span').length;

while (height > 17) {

 for (var j = 1; j < length; j++) {
    if ($('#breadcrumbsContainer > span').get(j).find('a').text() != "...") {
        if ($('#breadcrumbsContainer > span').get(j).find('a').text("..."));
    }
    j++;
 }
}; 
```

**前 2**

```
var height = $('#breadcrumbsContainer > span').height();
var length = $('#breadcrumbsContainer > span span').length;

while (height > 17) {

for (var j = 1; j < length; j++) {
    if ($('#breadcrumbsContainer > span:eq(j) a').text() != "...") {
        if ($('#breadcrumbsContainer > span:eq(j) a').text("..."));
    }
    j++;
} 
```

};

在 for 循环中不使用 ".get(j)" 或 :eq(j) 的情况下，一切都很好。每次我运行代码时，它似乎都需要第一个元素，而不是 (j = **1** ) 的第二个元素。（我不想压缩根节点）

jsFiddle 示例：http: [//jsfiddle.net/TPqfK/3/](http://jsfiddle.net/TPqfK/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:30:04.573

**替代解决方案：**我的原始答案仍在下方，但我正在考虑如何以不同的方式执行此操作，因此创建了以下代码的[**演示**](http://jsfiddle.net/ZByff/)，其中更改`BREADCRUMBS_MAX_WIDTH`为更大或更小的值将允许或多或少*的省略*和更改`.last()`to`.first()`将使更高级别的面包屑首先被*省略*:-)

JavaScript（需要 jQuery）

```
var BREADCRUMBS_MAX_WIDTH = 700;

function crumbsWidth() {
  var width = 0;
  $('#breadcrumbs li').each(function() {
    width += $(this).outerWidth();
  });
  return width;
}

while (crumbsWidth() >= BREADCRUMBS_MAX_WIDTH && $('#breadcrumbs li').length - 2 !== $('#breadcrumbs li.ellipsis').length) {
  $('#breadcrumbs li:not(:first-child):not(:last-child):not(.ellipsis)').last().addClass('ellipsis');
} 
```

CSS

```
#breadcrumbs {
  margin:0;
  padding:0;
  list-style-type:none;
  font-size:0;
}
#breadcrumbs li {
  display:inline-block;
  font-size:16px;
  padding-left:4px;
}
#breadcrumbs li:not(:first-child):before {
  content:'\002192  ';
}
.ellipsis {
  width:60px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
} 
```

HTML

```
<ul id="breadcrumbs">
  <li>Lorem ipsum dolor</li>
  <li>sit amet, consectetur</li>
  <li>adipisicing elit, sed</li>
  <li>do eiusmod tempor</li>
  <li>incididunt ut labore</li>
  <li>et dolore magna aliqua</li>
  <li>Ut enim ad minim</li>
</ul> 
```

**原答案：**

最初，在添加小提琴之前，我在运行代码时遇到了一些问题，我将首先介绍。

`while (height > 17)`控制流语句可能导致无限循环，这可能导致 100% CPU 并可能导致浏览器或选项卡崩溃。我在小提琴中看到您提供了一种跳出循环的方法，但是问题中的代码应该真正完整地描述了问题。

存在一个选择器问题，`$('#breadcrumbsContainer > span')`因为您使用的是 CSS Child 组合`>`器，它只返回直接子代而不是所有后代。在您的小提琴中使用此标记：

```
 <div id="breadcrumbsContainer">
    <span id="ctl00_breadcrumb">
      <span><a style="text-decoration: none;" href="#">Min startside</a></span>
      <span></span>
      <span><a style="text-decoration: none;" href="#">dfa as dfdsa dsa fdsfas</a></span>
      <span></span>
      <span><a style="text-decoration: none;" href="#">a fdsa fsd adsfdsasad fdsa</a></span>
      <span></span>
      <span><a style="text-decoration: none;" href="#">test aff for log og opr sds</a></span>
      <span></span>
      <span><a style="text-decoration: none;" href="#">TESTs sds</a></span>
      <span></span>
      <span>anders er awesome</span>
    </span>
  </div>​ 
```

选择器正在查找`<span id="ctl00_breadcrumb">`而不是面包屑跨度。所以你可能需要纠正它`$('#breadcrumbsContainer span span')`

这仍然无法解决问题，因为 using`$('#breadcrumbsContainer span span').get(j)`会导致 JavaScript 错误，因为[`.get()`](http://api.jquery.com/get/)返回的是 DOM 元素而不是 jQuery 包装的对象，因此您无法调用`.find()`它。

使用第二个示例[`:eq()`](http://api.jquery.com/eq-selector/)也将不起作用，因为`j`变量是选择器字符串的一部分，而不是变量值，并且不会在 jQuery 中导致错误。所以，

```
$('#breadcrumbsContainer > span:eq(j) a') 
```

应该

```
$('#breadcrumbsContainer > span:eq(' + j + ') a') 
```

然而，随着所有这些变化，由于操作方式的原因，生成的选择器仍然无法工作`:eq()`。从文档

> :eq 过滤与前面的表达式匹配的元素集

所以`$('#breadcrumbsContainer span span')`将选择所有面包屑和间隔元素，然后应用过滤器。所以`:eq(0)`将是第一个面包屑和`:eq(1)`第一个*间隔跨度*。

因此，采取所有这些更改，我们最终得到：

```
for (var j = 2; j < length; j++) { // <--- starts at 2 (do not change first breadcrumb)
    if ($('#breadcrumbsContainer span span:eq(' + j + ') a').text() != "...") {
       if ($('#breadcrumbsContainer span span:eq(' + j + ') a').text("..."));
    }
    j++;
} 
```

**注意：**上面的循环可以工作，但效率不高，原因如下：

1.  `<span>`可以删除填充面包屑的空元素，以便使用 CSS 分隔每个面包屑
2.  `<ul><li></li></ul>`例如，使用更多语义标记来描述数据
3.  选择`:eq()`器是 jQuery 扩展，不是 CSS 规范的一部分，使用 :eq() 的查询无法利用原生 DOM querySelectorAll() 方法提供的性能提升^([**[docs]**](http://api.jquery.com/eq-selector/))
4.  使用[广泛支持](http://caniuse.com/#search=text-overflow)的CSS 属性`text-overflow:ellipsis`并更改每个面包屑的*宽度*可能比更改`<a>`文本更简单。

# c# - ASP .NET MVC - 从视图中获取对象模板字符串结果

> ID：13228681
> 
> 赞同：1
> 
> 时间：2012-11-05T08:51:00.527
> 
> 标签：c#, asp.net-mvc

我正在重新打开我的问题，因为它已被设置为重复而不是重复 - 或者将其标记为重复的人应该向我解释为什么它是重复的............ [https://stackoverflow。 com/questions/13227988/html-displayfor-result](https://stackoverflow.com/questions/13227988/html-displayfor-result)

如何在 C# 类中获取方法 Html.DisplayFor() 的结果，例如在 View 模型中甚至在 Controller 中？而不是在 View Aspx 或 Razor 中。

[编辑] 事实上，我有一个要显示的表格，根据记录的数量，我使用 Telerik 表格或简单的 HTLM 表格。

目前，我的视图中有一个函数可以获取要为每列显示的字符串，因此我对两个表使用相同的格式。

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<ViewModels.OrderViewModel>" %>

<script runat="server" type="text/C#">

public string GetCellValue (String columnName, Order order)
{
        string value = "";
        switch (columnName)
        {
            case "Ref":
                value = order.order.Reference.ToString(); break;
            case "Etc":
                value = Html.DisplayFor(p => order.order.Etc).ToHtmlString();break;             
            case "Payment date": 
                foreach (Executions ex in order.executions)
                {
                    value += ex.Date.Date.ToString("yyyy-MM-dd") + " ";
                }
                break; 
```

例如，我想将此函数移出 ViewModel 中的视图，但我不知道如何从视图中调用函数 Html.DisplayFor()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:13:04.203

不明白你为什么要这样做，但是......

```
using System.Web.Mvc;
using System.Web.Mvc.Html;

class Example {    

    void Method()
    {
       HtmlHelper<TModel> Html = new HtmlHelper<TModel>();
       MvcHtmlString result = Html.DisplayFor(prop => Model.Prop);
    }
} 
```

编辑后，如果将 GetCellValue 移动到另一个地方，也许你只需要做

```
 MvcHtmlString result = new MvcHtmlString(order.order.Etc); 
```

因为，它应该只将其值显示为字符串（除非您已为其设置模板）。

# javascript - 需要更新 iframe 两次才能正常工作

> ID：13228682
> 
> 赞同：2
> 
> 时间：2012-11-05T08:51:01.777
> 
> 标签：javascript, iframe

我做了这个计算器：

[http://snuletek.org/arma2coordcalc/](http://snuletek.org/arma2coordcalc/)

我在网站上遇到了 iframe 问题。第一次输入一些坐标进行转换时，它可以正常工作，但如果您随后输入一些其他坐标，则必须按两次等号，以便 iframe 更新。

这是一些示例坐标：

[151,[10504.9,2857.15,0.00293732]]

[5,[2645.41,1941.31,0.00133705]]

[40,[1565.65,2059.92,0.00142217]]

所以我的问题是，什么会导致这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:40:48.930

您可以销毁整个 iframe 并重新加载它。这将导致它每次加载。

在 js.js 文件中将加载代码更改为：

```
$('#mapUrl').fadeOut(400, function() {
  height = $(document).height() * 0.8;
  $('#mapUrl').remove();
  $('<iframe id="mapUrl" src="'+getUrl+'" height="'+height+'"width="100%">').delay(200).appendTo('body').hide();
  $('#mapUrl').delay(400).fadeIn(400); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:32:55.957

删除或注释掉该行，

```
$('#mapUrl').attr('src',''); 
```

来自javascript文件'js.js'，它应该可以正常工作。

# python - 关于Python的两个问题

> ID：13228686
> 
> 赞同：-3
> 
> 时间：2012-11-05T08:51:11.783
> 
> 标签：python

```
def punctuation(x,y):
 if len(x) == 0:
     return y

 if '.' in x[0]:
     x[1] = x[1].capitalize()
     return punctuation(x[1:],y.append(x[0]))
 elif '!' in x[0]:
     x[1] = x[1].capitalize()
     return punctuation(x[1:],y.append(x[0]))
 elif '?' in x[0]:
     x[1] = x[1].capitalize()
     return punctuation(x[1:],y.append(x[1]))
 else:
     return punctuation(x[1:],x[0])

 z = ['!a','b'] 
 punctuation(z,[]) 
```

希望得到 ['!a','b'] ，这意味着如果第一项包含 (!,?,.)，则第二项变为大写

```
Q3_p1 = "Enter the digit on the phone (0-9): "
Q3_p2 = "Enter the number of key presses (>0): "

def enter_msg(n):
    x=raw_input(Q3_p1)
    y=raw_input(Q3_p1)
    Jay = Jay_chou(x,y)
    return Jay

 def Jay_chou(d,n):

     if d==0: return " " 
     elif d==1: return [".", ",", "?"][n%3-1]
     elif d==2: return ["a", "b", "c"][n%3-1]
     elif d==3: return ["d", "e", "f"][n%3-1]
     elif d==4: return ["g", "h", "i"][n%3-1]
     elif d==5: return ["j", "k", "l"][n%3-1]
     elif d==6: return ["m", "n", "o"][n%3-1]
     elif d==7: return ["p", "q", "r", "s"][n%4-1]
     elif d==8: return ["t", "u", "v"][n%3-1]
     else: return ["w", "x", "y", "z"][n%4-1]

 enter_msg(2) 
```

我不知道为什么我看到这个错误：

```
Enter the digit on the phone (0-9): 1

Enter the digit on the phone (0-9): 1

['1', '1']

TypeError: not all arguments converted during string formatting 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:58:48.607

对于第二个问题：

你将字符串传递给`Jay_Chou()`in `Jay = Jay_chou(x,y)`，而不是你应该传递整数。在您的情况下，该`n%3`部分实际上尝试进行字符串格式化而不是模数运算。

`raw_input()`返回字符串，您需要使用将它们转换为整数`int()`

所以你得到这个错误：

```
In [13]: '1'%3
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-13-39edc619f812> in <module>()
----> 1 '1'%3

TypeError: not all arguments converted during string formatting 
```

**尝试这个：**

`Jay = Jay_chou(int(x),int(y))`

然后它输出：

```
Enter the digit on the phone (0-9): 3
Enter the digit on the phone (0-9): 4
d

#and for 1,1:

Enter the digit on the phone (0-9): 1
Enter the digit on the phone (0-9): 1
. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:07:14.857

对于第一个问题，您可以执行以下操作：

```
import itertools as it
the_list = ['a!', 'b']
result = [the_list[0]]
my_iter = iter(the_list)
next(my_iter)   #my_iter.next() for python2

for i,(a,b) in enumerate(it.izip(the_list, my_iter)):
    if set('.?!').intersection(a):
        result.append(b.capitalize())
    else:
        result.append(b) 
```

您的代码中的问题是您调用：

```
punctuation(x, y.append(something)) 
```

该`append`方法返回`None`，因此递归调用的第二个参数类型错误。

你必须这样做：

```
y.append(something)
punctuation(x, y) 
```

# php - 整合Paypal链式支付和直接支付？

> ID：13228691
> 
> 赞同：1
> 
> 时间：2012-11-05T08:51:53.497
> 
> 标签：php, payment-gateway, paypal, paypal-adaptive-payments

我想使用 Paypal API 进行链式支付（自适应支付），但我不希望用户不会离开我的网站，所以我还需要使用 DoDirectPayment ...

是否可以将它们两者结合起来？我找不到这个问题的答案...

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:56:43.690

它们都是来自 PayPal 的两个不同 API 套件的一部分。链式支付来自 Adaptive Payments API，DoDirectPayment 来自 PayPal Payments Pro（直接版）。因此，请确保您根据需要注册他们。

正如 Prash 提到的，对于使用 PayPal 帐户的链式付款，您必须重定向到 PayPal。但不是使用完整的浏览器重定向 - 您可以使用嵌入式支付体验，该体验使用 iframe/迷你浏览器窗口，为您的用户提供更多上下文体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:44:02.893

用户必须离开您的网站才能登录 PayPal，但之后他们会被重定向回您的网站，您可以在其中处理付款。

# jquery - 淡出后重新显示

> ID：13228696
> 
> 赞同：6
> 
> 时间：2012-11-05T08:52:01.213
> 
> 标签：jquery

请我确认我这样做是正确的：

我有一条消息希望在显示后淡出。

jQuery fadeOut 设置 display: none 一旦不透明度为零。

因此，当我想通过设置 visibility: visible 再次显示相同的消息时，消息将不会显示，因为 display: none 仍然设置。

所以这就是我所做的：

```
 $("#message6").fadeOut(600, function(){
            $("#message6").css("display","");
            $("#message6").css("visibility","hidden");              
        }); 
```

这工作得很好。看起来不是很优雅。

我在这里错过了什么吗？有没有一种巧妙的方法来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T08:56:07.450

你为什么不这样做：

```
$("#message6").fadeOut(600); 
```

并再次显示您的信息：

```
$("#message6").show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:56:01.243

为什么不这样

```
$(document).ready(function() {
        $('#myLabel').fadeOut(1000, function() {
            $(this).html(""); //reset the label after fadeout
        });
    });​ 
```

**[样本](http://jsfiddle.net/bXuMM/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:55:39.683

我一直对 jQuery`.fadeIn()`和`.fadeOut()`方法有奇怪的问题，所以通常我只是为不透明度设置动画。如果您只是隐藏和展示事物，那么这种方法没有任何问题。

```
$('#message6').animate({opacity:0}, 200); 
```

如果您不想要任何类型的淡入淡出动画，您可以只使用`.hide()`and`.show()`方法，或`.css({opacity:0})`，或`.animate()`具有`0`动画持续时间的方法。

# ios - Facebook iOS SDK 3.1 在随后调用 FBSession openWithBehavior 时崩溃

> ID：13228700
> 
> 赞同：7
> 
> 时间：2012-11-05T08:52:12.353
> 
> 标签：ios, facebook, sdk

如果我们在调用 closeAndClearTokenInformation 之后调用 openWithBehavior，则会导致 EXC_BAD_ACCESS。无论是使用原生 iOS 内置对话框还是快速切换对话框之一。

我们第一次登录FB的代码：

```
if (![FBSession activeSession]) {
    #ifdef FREE_APP
        NSString* suffix = @"free";
    #else
        NSString* suffix = @"paid";
    #endif
    FBSession *session = [[[FBSession alloc] initWithAppID:@"111111111111111"
                            permissions:permissions
                        urlSchemeSuffix:suffix
                     tokenCacheStrategy:nil] autorelease];
    [FBSession setActiveSession:session];
} 
else if ([FBSession activeSession].isOpen)
    [[FBSession activeSession] close];

[[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent
              completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                     [self sessionStateChanged:session state:state error:error];
                                 }]; 
```

我们的代码要注销，之后上面的代码在 openWithBehavior 之后失败：

```
[[FBSession activeSession] closeAndClearTokenInformation]; 
```

我最初使用的是 openActiveSessionWithReadPermissions 而不是 openWithBehavior，如 3.1 文档中所述，它不会崩溃，但从 FB 应用程序/Safari 切换回来的应用程序不起作用。也许是因为需要后缀？如果修复应用程序切换并返回最简单，请告知。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T18:36:34.420

当我在 5.x 模拟器中运行时，我从 openWithBehavior 中看到了一个额外的、非常有用的错误消息，然后在源代码中查找它，这使得事情变得更加清晰：

```
if (!(self.state == FBSessionStateCreated ||
      self.state == FBSessionStateCreatedTokenLoaded)) {
    // login may only be called once, and only from one of the two initial states
    [[NSException exceptionWithName:FBInvalidOperationException
                             reason:@"FBSession: an attempt was made to open an already opened or closed session"
                           userInfo:nil]
     raise];
} 
```

我已将代码更改为在调用 openWithBehavior 之前始终创建一个新会话，这似乎很高兴。

更新：这是检查活动会话的更新代码，然后关闭它，然后总是实例化一个新的会话......

```
 - (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

      if ([FBSession activeSession])
         [[FBSession activeSession] closeAndClearTokenInformation];

      #ifdef FREE_APP
         NSString* suffix = @"free";
      #else
         NSString* suffix = @"paid";
      #endif

      NSArray *permissions = [[NSArray alloc] initWithObjects:@"email", nil];

      FBSession *session = [[FBSession alloc] initWithAppID:mFacebookID
                                               permissions:permissions
                                           urlSchemeSuffix:suffix
                                        tokenCacheStrategy:nil]; 

      [FBSession setActiveSession:session];

      If (allowLoginUI == YES) {
        NSLog(@"Calling openWithBehavior");
        [[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent
                                   completionHandler:^(FBSession *session, FBSessionState state, NSError *error)
                                   {
                                      [self sessionStateChanged:session state:state error:error];
                                   }
        ];
     } else if(session.state == FBSessionStateCreatedTokenLoaded) {
        NSLog(@"Calling openWith completion handler");
        [session openWithCompletionHandler:^(FBSession *_session, FBSessionState status, NSError *error)
                                            {   [self sessionStateChanged:session state:status error:error];}
        ];
     }

     [session release];   

     return true;
  } 
```

# asp.net - 单击按钮从数据库中更新数据

> ID：13228706
> 
> 赞同：-1
> 
> 时间：2012-11-05T08:52:54.130
> 
> 标签：asp.net, sql-server

我有一个剑道下拉菜单，在选定的 id 值上，我想在按钮单击事件上更新数据库中特定行的数据。但我的 dat 没有更新，旧值一次又一次地显示。请建议我怎么做。我的代码是

```
<script src="Js/jquery1.7.1.min.js" type="text/javascript"></script>
<script src="CSS/kendo.min.js" type="text/javascript"></script>
</head>
<body>
<script type="text/javascript">
  $(document).ready(function(){
    $("#multi").kendoDropDownList();
    $("#editor").kendoEditor();
 });
</script>
<form id="form1" runat="server">
<div>
   Select Template: <select id="multi" runat="server"></select>
</div>
<br />
<div>
  Template Name: <input type="text" id="txtName" name="Name" runat="server" />
</div>
<div>
Description:<textarea name="comments" id="txtComment" cols="25" rows="5"   
runat="server"></textarea>
<br />
</div>
<div>
Active: <input type="checkbox" id="chkActive" name="vehicle" runat="server" />
</div>
<div id="example" class="k-content">
<textarea id="editor" rows="10" cols="30" style="width:740px;height:440px"   
runat="server"></textarea>
</div>
<div>

<button type="button" id="btnUpdate" runat="server"   onserverclick="    
btnUpdate_onclick" >Save</button>

</div>
</form>
</body> 
```

我的 .cs 代码是

```
 protected void Page_Load(object sender, EventArgs e)
{

    Bind();
}

private void Bind()
{
    SqlConnection con = new SqlConnection("Data Source=ST0022;Initial 
Catalog=QuickMove_Globe;User ID=sa;Password=good");
    SqlDataAdapter da = new SqlDataAdapter();
    DataSet ds = new DataSet();
    da.SelectCommand = new SqlCommand("Select * from Templates", con);
    con.Open();
    da.SelectCommand.ExecuteNonQuery();
    da.Fill(ds);
    con.Close();
    multi.DataTextField = "ID";
    multi.DataValueField = "Name";
    multi.DataValueField = "Description";

    multi.DataSource = ds.Tables[0];
    multi.DataBind();
}

protected void btnUpdate_onclick(object sender, EventArgs e)
{

    SqlConnection con = new SqlConnection(@"Data Source=ST0022;Initial 
Catalog=QuickMove_Globe;Persist Security Info=True;User ID=sa;Password=good");
    SqlCommand cmd= new SqlCommand("Update_Temp", con);

    cmd.CommandType = CommandType.StoredProcedure;
    //passing parameters
    cmd.Parameters.AddWithValue("@ID", Convert.ToInt32(multi.SelectedIndex));
    cmd.Parameters.AddWithValue("@Name",Convert.ToString(txtName.Value));
    cmd.Parameters.AddWithValue("@Description", Convert.ToString(txtComment.Value));
    cmd.Parameters.AddWithValue("@Content", Convert.ToString(editor.Value));
    cmd.Parameters.AddWithValue("@Active", (chkActive.Value).ToString());

    SqlDataAdapter da = new SqlDataAdapter();

    da.UpdateCommand=cmd;
    con.Open();

    cmd.ExecuteNonQuery();
    con.Close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:54:31.423

您可能想考虑添加一些错误处理，但试试这个。您不需要存储过程中的返回。您需要做的其他事情是整理您的绑定。您将错误的值绑定到下拉列表。值需要是 ID 和 Text，无论您想显示什么。然后在更新 Convert.ToInt32(multi.SelectedIndex) 应该是 SelectedValue 而不是 SelectedIndex。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
       Bind();
    }

}

        protected void btnUpdate_onclick(object sender, EventArgs e)
    {

        SqlConnection con = new SqlConnection(@"Data Source=ST0022;Initial 
 Catalog=QuickMove_Globe;Persist Security Info=True;User ID=sa;Password=good");
        SqlCommand cmd = new SqlCommand("Update_Temp", con);

        cmd.CommandType = CommandType.StoredProcedure;
        //passing parameters
        cmd.Parameters.AddWithValue("@ID", Convert.ToInt32(multi.SelectedIndex));
        cmd.Parameters.AddWithValue("@Name", Convert.ToString(txtName.Value));
        cmd.Parameters.AddWithValue("@Description", Convert.ToString(txtComment.Value));
        cmd.Parameters.AddWithValue("@Content", Convert.ToString(editor.Value));
        cmd.Parameters.AddWithValue("@Active", (chkActive.Value).ToString());
        con.Open();

        cmd.ExecuteNonQuery();
        con.Close();

        Bind();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:22:51.003

检查下拉列表中的正确值是否将用于代码隐藏方法。您可以更改按钮命令，如下所示：

```
<asp:Button ID="btnUpdate" runat="server" 
            onclick="btnUpdate_Click" Text="Save" /> 
```

# php - 无法启用 CURL - Windows 7 64 位上的 WAMP - PHP 5.3.13 Apache 2.2.22

> ID：13228709
> 
> 赞同：3
> 
> 时间：2012-11-05T08:53:04.083
> 
> 标签：php, curl, windows-7, wamp

好的，我已经阅读[了这个](https://stackoverflow.com/questions/10939248/php-curl-not-working-wamp-on-windows-7-64-bit)和[这个](https://stackoverflow.com/questions/1343514/how-to-get-curl-to-work-with-php-on-windows-wamp)。

我做了以下事情：

1.  `extension=php_curl.dll`在两者`c:\wamp\bin\apache\apache2.2.22\php.ini`中启用`c:\wamp\bin\php\php5.3.13\php.ini`
2.  [在此处](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)下载 curl并替换`php_curl.dll`为`c:\wamp\bin\php\ext\`
3.  添加`c:\wamp\bin\php\php5.3.13\`到 PATH （因为`libeay32.dll`并`ssleay32.dll`在那里）。顺便说一句，我的 PATH 如下：
    `C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\wamp\bin\php\php5.3.13\`
4.  复制并粘贴到`libeay32.dll`和`ssleay32.dll``c:\Windows``c:\Windows\System32`
5.  多次重启Apache

phpinfo() 中仍然绝对没有 curl 的迹象。

这里错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T09:09:25.547

无需走捷径安装 Wamp，我建议单独安装 Apache、MySql 和 Php 堆栈。
我也在 wamp 中遇到了这个 curl 问题，所以我转而单独安装它们。您可以按照这些链接详细描述和幻灯片来配置所有三个：-
1\. Mysql
[http://www.webdevelopersnotes.com/how-do-i/install-mysql-windows-7.php](http://www.webdevelopersnotes.com/how-do-i/install-mysql-windows-7.php)
2\. Apache
[http:// /www.webdevelopersnotes.com/how-do-i/install-apache-windows-7.php](http://www.webdevelopersnotes.com/how-do-i/install-apache-windows-7.php)
3.Php
[http://www.webdevelopersnotes.com/how-do-i/install-PHP-windows-7.php](http://www.webdevelopersnotes.com/how-do-i/install-PHP-windows-7.php)

这是一次性的过程，是执行事情的标准方式。您也可以查看这个（Win 7 相同）：-
[http://www.scribd.com/doc/11197274/Installation-of-Drupal-on-Windows-XP-using-Apache-Mysql-and-PHP](http://www.scribd.com/doc/11197274/Installation-of-Drupal-on-Windows-XP-using-Apache-Mysql-and-PHP)

希望能帮助到你 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:00:29.120

您需要从此处获取*固定版本*的 curl（页面底部）：[http ://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-对于-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)

原始答案：[https ://stackoverflow.com/a/10977022/965907](https://stackoverflow.com/a/10977022/965907)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T06:05:26.623

为我工作了这个 curl dll

```
(php_curl-5.4.3-VC9-x64.zip)
http://www.mediafire.com/file/3ay381k3cq59cm2/php_curl-5.4.3-VC9-x64.zip 
```

从[http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/找到](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)

阿帕奇 - 2.4.2 php - 5.4.3

# javascript - 在提交按钮的事件中给出一个确认弹出框并允许或不允许提交

> ID：13228713
> 
> 赞同：0
> 
> 时间：2012-11-05T08:53:32.780
> 
> 标签：javascript, asp.net

我有提交按钮。单击它时，我必须从数据库中检查特定字段的值，然后弹出确认窗口，然后根据是或否允许/禁止保存。我该怎么做。在使用确认 JS 函数时，它通过了语句和无论如何运行保存过程。

我的按钮事件

```
 protected void btnSubmit_Click(object sender, EventArgs e) 
{

                    string ListExam = string.Empty;
                    DataTable dt = BussObjGoalCert.CheckPlannedStatus(custObjGoalCert);
                    if (dt.Rows.Count != 0)
                    {
                        for (int i = 0; i < (dt.Rows.Count); i++)
                        {
                            ListExam = ListExam + (dt.Rows[i]["MultipleExamPlanned"]) + ";";
                        }
                        lblExamMultiple.Text = ListExam;
                        string myScript2 = "confirm('Unselected exam planned under other certification will also be unplanned.Do you wish to continue?');";
                        ClientScript.RegisterStartupScript(this.GetType(), "myScript", "confirm('Unselected exam planned under other certification will also be unplanned.Do you wish to continue?');", true);

                    }
                    Result = BussObjGoalCert.InsertGoalCertification(custObjGoalCert);
} 
```

所以我正在做的是从后端检查一些数据，然后尝试有条件地调用确认函数。它被调用，但随后插入语句也会运行，而与人选择的内容无关。如何在 JS 函数中完成数据库检查。我需要在后面的代码中完成。但允许/禁止完全保存。这是如何完成的。我没有按照答案中的建议使用 OnCLientCLick。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:57:58.940

尝试这个

如果你有asp按钮

```
<asp:Button runat="server" ID="btn" 
OnClientClick="return confirm('Are you surely want to submit (server button) ?');"
Text="Server button" /> 
```

如果您有提交 HTML 按钮

```
<input type="submit" 
onclick="return confirm('Are you surely want to submit (client button) ?');"
value="Client button" /> 
```

**更新**

如果你想这样做

1.  执行一些服务器端代码
2.  要求用户确认
3.  在用户确认后执行更多服务器端代码

然后应该做以下

1.  创建网络服务。
2.  使用 Jquery 或 Javascript 通过该 Web 服务执行您的服务器端代码。
3.  在您的 Web 服务请求的完成（成功）事件上显示确认框。
4.  如果用户单击`YES`执行服务器端回调或执行另一个 Web 服务请求以执行要在用户确认后执行的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:22:17.257

您的问题有一个解决方案。请按照以下步骤操作：

1.）在按钮的 OnClientclick 事件调用**pagemethod**并在其中传递要在数据库中检查的值。

2.) **pagemethod**用于在客户端调用服务器端静态方法并返回结果。

3.）如果数据存在则返回布尔值，如果数据存在则返回false。

4.）当标志为真时，如果确认为真，则显示**确认框**，然后再次调用服务器方法并更新信息，然后将真返回给 OnClientClick 事件。

或者

如果确认为假，则向 OnClientClick 事件返回假。

您可以在[这里](http://www.c-sharpcorner.com/UploadFile/086dd0/lightbox-in-Asp-Net-connected-with-sqlserver/)查看我的文章。希望这对您有所帮助。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:59:45.517

```
try this

 <asp:Button ID="btnsave" runat="server" Text="Save" OnClientClick="javascript:return Checkdelete();"/>

function Checkdelete() {
return confirm("Are you sure you want to Save the records");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T08:58:07.903

我认为您正在尝试提交按钮上的 onclick 事件。在表单元素中尝试 onsubmit="return confirm('Are You sure to submit')"

# android - 设置 ArrayList < HashMap < String, Object >> 值

> ID：13228714
> 
> 赞同：1
> 
> 时间：2012-11-05T08:53:33.680
> 
> 标签：android

我想添加类似`ArrayList<HashMap<String, Object>>`意图的价值，并`Activity`通过broadc传递。像这样的代码：

```
ArrayList<HashMap<String, Object>> listItem = new ArrayList<HashMap<String, Object>>();
intent1.putParcelableArrayListExtra("listItem", listItem); 
```

但它有错误：

> Intent 类型中的方法`putParcelableArrayListExtra(String, ArrayList<? extends Parcelable>)`不适用于参数`(String, ArrayList<HashMap<String,Object>>)`

具体怎么用`putParcelableArrayListExtra`？通过实现Parcelable接口，可以返回`ArrayList < HashMap < String, Object > >`Object吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:58:24.447

而是使用`putParcelableAArrayListExtra`, 使用`putExtra`方法。因此，将您的代码更改为以下内容：

```
ArrayList<HashMap<String, Object>> listItem = new ArrayList<HashMap<String, Object>>();
intent1.putExtra("listItem", listItem); 
```

并使用`getSerializableExtra()`, 让 arraylist 回到下一个活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:02:46.003

由于 ArrayList 实现了 Serializable，因此您无需执行任何特殊操作即可将其提供给

只需使用`Intent.putExtra()`将值放入并用于`getSerializableExtra()`将数组列表返回到下一个活动。

# joomla - joomla 中的其他菜单

> ID：13228722
> 
> 赞同：0
> 
> 时间：2012-11-05T08:54:05.523
> 
> 标签：joomla, joomla2.5

我使用 joomla 2.5，我创建了一个菜单来放入模块中。

在我的模板*索引*中，我有这个

```
 <div id="wrapper-header-left" class="column grid_6">
                        <?php if ($this->countModules('mod_imagenMenu')): ?>
                            <jdoc:include type="modules" name="mod_imagenMenu" style="none"/>
                        <?php endif; ?>
                        <?php if ($this->countModules('mod_izquierdo')): ?>
                            <jdoc:include type="modules" name="mod_izquierdo" style="none"/>
                        <?php endif; ?>
                    </div>
                        <div id="wrapper-header-right" class="column grid_10">
                            <?php if ($this->countModules('mod_extranet')): ?>
                                <jdoc:include type="modules" name="mod_extranet" style="none"/>
                            <?php endif; ?>
                            <div id="Menu_Principal">
                                <ul class="menu">
                                    <?php if ($this->countModules('mod_menuPrincipal')): ?>
                                        <jdoc:include type="modules" name="mod_menuPrincipal" style="none"/>
                                    <?php endif; ?>
                                </ul>
                            </div>
                        </div> 
```

`mod_izquierdo`在这个模块里面我想显示一个菜单

在`default.php`这个模块的文件中，我调用菜单

```
<div class="conozca">
    <p>Conozca más sobre Arq/p>
        <ul>

            <!--<li><a href="#">¿Cómo adquirir Arq?</a></li>
            <li><a href="#">¿Qué equipos componen Arq?</a></li> -->
        </ul>   
</div> 
```

但是当我渲染页面时，我看不到菜单，如果我把这一行

```
<jdoc:include type="modules" name="mod_ar_menu" style="none"/> 
```

在索引中，我显示了重复的菜单。

我的错误是什么，我可以将菜单放在模块内吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:43:23.987

你真的不应该像那样调用模板中的特定模块，如果你不得不做出改变，这会让你的生活变得更加困难。您需要了解的第一件事是模板中的 index.php 应该只包含模块位置。它应该看起来更像这样 -

```
<div id="wrapper-body" class="row">
        <jdoc:include type="modules" name="top" style="none"/>
        <div class="clr"></div>

        <div id="content" class="column grid_16">
        <jdoc:include type="modules" name="top-middle" style="none"/>
        <jdoc:include type="component" />
        <jdoc:include type="modules" name="bottom-middle" style="none"/>
        </div>
        <div class="clr"></div>

        <jdoc:include type="modules" name="left-column" style="none"/>
        <div class="clr"></div>

        <jdoc:include type="modules" name="right-column" style="none"/>
        <div class="clr"></div>

        <jdoc:include type="modules" name="bottom" style="none"/>
        <div class="clr"></div>
    </div> 
```

该页面应该用于创建站点的基本结构。如果您想真正花哨，您可以使每个模块位置可折叠，以便在特定页面上未使用的任何位置都不会输出任何代码。看起来像这样 -

```
 <?php if ($this->countModules('top')) : ?>
        <div id="top"><jdoc:include type="modules" name="top" style="none" /></div>
        <?php endif; ?> 
```

一旦您确定了您的位置，您现在可以创建模块实例并将它们分配给您希望它们显示的位置以及您希望它显示的页面。在扩展菜单中，单击模块管理器链接。在那里您将创建新模块。在模块参数中，可以选择要在哪个模块位置显示模块。在此下方，您还可以选择要在哪个菜单项上显示模块。您可以选择全部、无、排除选择或仅在选择时。

这样做可以很容易地管理您的模块。它允许您将多个模块放在特定位置，然后选择它们在该位置中的顺序。例如，您可以将菜单模块、登录模块和图像旋转器模块都放在左栏中。它还使您的代码更简洁，因为您不必像您尝试做的那样在模块中调用模块。这只会使您的网站难以管理，并且会降低性能。

# linux - htaccess rewriterule windows/linux ，域到子页面

> ID：13228724
> 
> 赞同：0
> 
> 时间：2012-11-05T08:54:14.777
> 
> 标签：linux, windows, .htaccess, redirect

我定义了 .htaccess 规则：

```
# *** Presmerovania ***

RewriteEngine on

#www.domosskuchyne.sk
rewritecond %{http_host} ^www\.kuchynskelinkymoderne\.sk$ [nc]
rewriterule ^(.*)$ http://www.domosskuchyne.sk/bosch [r=301,nc] 
```

在 Windows 上，我被重定向到“ [http://www.domosskuchyne.sk/bosch](http://www.domosskuchyne.sk/bosch) ”，但在 linux 服务器上，我只被重定向到主页“ [http://www.domosskuchyne.sk](http://www.domosskuchyne.sk) ”而不是子页面 (/bosch)。

这个重写规则有问题吗？.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:34:06.410

已解决 - Htaccess 很好，浏览器会记住 301 重定向，因此在没有删除浏览器缓存之前，重定向不会改变，tnx 寻求帮助。

# android - 如何使用返回 SOAP 对象的 PhoneGap 调用 WCF Web 服务？

> ID：13228726
> 
> 赞同：0
> 
> 时间：2012-11-05T08:54:27.767
> 
> 标签：android, cordova

谁能告诉我，如何使用返回 SOAP 对象的 PhoneGap/HTML5/Jquery 调用 WCF Web 服务？我想从 phonegap 应用程序调用 WCF 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:59:06.030

尝试这个。可能这会对你有所帮助。因为我已经使用它完成了网络服务

```
 <script type="text/javascript">

       $(function () {
           var url = "http://localhost/newed/WebService.asmx/GetList?format=json";
           $.ajax({
               contentType: "application/json; charset=utf-8",
               url: url,
               dataType: "jsonp",
               success: function (r) {
                   var i = 0;
                   for (i = 0; i < r.d.length; i++) {
                       alert(r.d[i]["firstName"].toString());

                   }
               },

               error: function (xr, msg, e) { debugger; alert(e); }
           });
       }); 
```

# assembly - 如何创建将文件作为参数的 msdos .com 程序

> ID：13228729
> 
> 赞同：1
> 
> 时间：2012-11-05T08:54:37.313
> 
> 标签：assembly, dos, 16-bit

如何创建一个接受文件作为参数的 .com 程序。.com 程序将从命令行解释器执行。我打算用汇编语言编写程序。这是它应该如何工作的。假设程序`DecToHex.com`在用户输入的命令行（在 MSDOS 中）

```
DecToHex.com afile.dec 
```

然后程序转换`afile.dec`为十六进制并创建另一个名为`afile.hex`

PS：这个要在MSDOS汇编语言中完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:42:01.880

IIRC，MSDOS 存储从 CS:0080h 开始的命令行参数。

您应该能够使用`debug.exe dectohex.com infile outfile` Then disassemble / dump memory from cs:0 来验证这一点并搜索字符串。

正如弗兰克所提醒的那样，MSDOS 不知道 asciiz，它显然使用了 pascal 类型的字符串格式。必须逐字节解析字符串字节——我想命令行参数将按原样存在。例如。连续的空格不会被截断。

# linux - 进程监听 Windows 上的哪个端口

> ID：13228734
> 
> 赞同：0
> 
> 时间：2012-11-05T08:55:00.200
> 
> 标签：linux, windows, networking

在 Windows 和 Linux 上，如何找出哪个进程正在侦听哪个端口？是否有一些应用程序明确监控？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:59:45.520

一些很棒的工具是由现在归微软所有的 Sysinternals 制作的。

你想要的是 Tcpview，它会显示端口和打开它们的应用程序，以及 PID 和其他好东西。Tcpview 是基于 Windows 的，但它们也有命令行版本。所有这些工具都是免费的。

[这是微软 sysinternals 下载的链接](http://technet.microsoft.com/en-us/sysinternals/bb545021.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:09:42.313

Windows 和 Linux 都`netstat`内置了 -command，尽管它们的使用方式不同。

在 Windows 上：（`netstat -a -b`列出侦听和连接的端口）

在 Linux 上：（`netstat -l -p`仅列出监听端口）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:00:01.140

不确定 stackoverflow 是否适合这个问题，也许[http://www.superuser.com](http://www.superuser.com)会是一个更好的选择。

虽然从我的头顶：

*   Linux 具有提供此信息的命令`lsof`。`netstat`
*   Windows`ProcessExplorer`应该提供此信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T09:04:45.253

在 Linux 中，您可以使用该`ss`命令转储套接字信息。它还提供有关客户端活动端口号的信息。更多细节可以在这里找到 [http://linux.die.net/man/8/ss](http://linux.die.net/man/8/ss)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:06:18.797

在 Windows 7 上，您可以使用

```
netstat -b -a

netstat /?

-b      Displays the executable involved in creating each connection or
          listening port. In some cases well-known executables host
          multiple independent components, and in these cases the
          sequence of components involved in creating the connection
          or listening port is displayed. In this case the executable
          name is in [] at the bottom, on top is the component it called,
          and so forth until TCP/IP was reached. Note that this option
          can be time-consuming and will fail unless you have sufficient
          permissions.
-o      Displays the owning process ID associated with each connection. 
```

在 Linux 上使用，`-p`需要 root 权限。

```
#netstat -p

#netstat -h
-p, --programs           display PID/Program name for sockets 
```

# c# - C# Timer 获取带参数的静态方法？

> ID：13228738
> 
> 赞同：0
> 
> 时间：2012-11-05T08:55:07.833
> 
> 标签：c#, timer, setinterval

我有以下功能来获取 yahoo weater rss 项目。我想运行这个方法特定的时间间隔。

```
public static Weathers GetYahooWeatherRssItem(string rssUrl, XNamespace yWeatherNS)
{
    XDocument rssXml = XDocument.Load(rssUrl);
    //yWeatherNS = "http://xml.weather.yahoo.com/ns/rss/1.0";

    var feeds = from feed in rssXml.Descendants("item")
                select new Weathers
                {
                    Title = feed.Element("title").Value,
                    Link = feed.Element("link").Value,
                    Description = feed.Element("description").Value,
                    Temp = Int32.Parse(feed.Element(yWeatherNS + "condition").Attribute("temp").Value),
                    Text = feed.Element(yWeatherNS + "condition").Attribute("text").Value,
                    ConditionCode = Int32.Parse(feed.Element(yWeatherNS + "condition").Attribute("code").Value),
                    Date = DateTimeManager.TrimZoneAndParse(feed.Element(yWeatherNS + "condition").Attribute("date").Value)
                    //Latitute = float.Parse(feed.Element(yWeatherNS + "lat").Attribute("latitute").Value),
                    //Longtitute = float.Parse(feed.Element(yWeatherNS + "lon").Attribute("longtitute").Value)
                 };

    return feeds.FirstOrDefault();
} 
```

我试图在 app_start.cs 中做这样的事情：

```
public static class TimerEventsInitializations
{
    public static void InitializeWeatherReader()
    {
        Timer t = new Timer(1000);
        t.Elapsed += new EventHandler(YahooWeatherManager.GetYahooWeatherRssItem("", "http://xml.weather.yahoo.com/ns/rss/1.0"));
        t.Start();
    }
} 
```

但这是错误的方式。（错误：方法名称已扩展）。我怎样才能做到这一点？它不一定是计时器。可能有另一种方法可以在特定时间间隔内调用此函数。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:03:23.270

错误是明确的。您必须提供方法名称，而不是操作。

例子 ：

```
public static class TimerEventsInitializations
{
    public static void InitializeWeatherReader()
    {
        Timer t = new Timer(1000);
        t.Elapsed += new EventHandler(MyEventHandler);
        t.Start();
    }

    public static void MyEventHandler()
    {
       YahooWeatherManager.GetYahooWeatherRssItem("", "http://xml.weather.yahoo.com/ns/rss/1.0")
    }
} 
```

# iphone - 嵌入 Segue 不向后兼容

> ID：13228745
> 
> 赞同：3
> 
> 时间：2012-11-05T08:55:42.173
> 
> 标签：iphone, objective-c, ios, ios5, uistoryboard

我在我的应用程序中添加了 Embed-Segues，我刚刚意识到这与 iOS 5.0 不兼容。

我在启动时收到以下错误：

```
'NSInvalidUnarchiveOperationException', 
reason: 'Could not instantiate class named UIStoryboardEmbedSegueTemplate' 
```

在我拥有自己的自定义“EmbedSegue”类之前，它的作用几乎相同。

有没有办法在 iOS 5.0 中解决这个问题，还是我必须恢复我所做的更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T14:17:57.750

事实证明，Embed segue 是 iOS 6.0 独有的功能。很遗憾，Xcode 没有在这里警告我，将目标操作系统版本设置为 > 5.0。

# android - 如何访问连接到远程机器的安卓手机

> ID：13228746
> 
> 赞同：0
> 
> 时间：2012-11-05T08:55:44.223
> 
> 标签：android

我需要访问连接到远程 windows/linux 机器的 android 手机来运行自动化脚本。有什么方法可以执行 adb 命令？请建议我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:38:18.287

这是答案，要远程访问android设备，手机必须root才能完全控制。

我们需要在通过 USB 线连接设备的机器上执行命令 –> adb tcpip port_number，（端口可以是 5554 到 6000 之间的任何奇数端口，不应与分配的其他端口冲突）以分配特定端口到连接的设备。然后从任何计算机上，我们可以像 adb connect ip_addres_of_phone:port number 一样连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:30:56.070

在你的 shell 脚本中

```
adb shell "command" 
```

也许 adb 命令将不可用，要使该命令可用，您必须下载 android SDK，然后添加您的路径环境变量

```
;/android-sdk-path/tools;/android-sdk-path/platform-tools 
```

警告不要用它替换您的路径环境变量，而是将其添加到当前字符串的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T12:24:26.907

您需要在您的 PC 上下载一个 vnc 客户端（例如 UltraVNC 或 TightVNC），并在您的 android 设备上下载一个 vnc 服务器。作为 vnc 服务器，从 Play 商店尝试 alpha vnc lite。它不需要 root 并且可以在几乎所有 Android 设备上开箱即用。

# java - 如何使用 Web Start 和安装程序部署 jar？

> ID：13228749
> 
> 赞同：2
> 
> 时间：2012-11-05T08:55:50.793
> 
> 标签：java, deployment, jar, java-web-start

我有一个 Java 桌面应用程序，现在我们将它作为 jar 分发到主应用程序的安装程序中（目前 Java 应用程序只是一个导入器/导出器）。但是由于 jar 比主应用程序更新得更频繁，我们正在考虑让它通过 Java Web Start 运行，因此它在启动时会独立更新。

我的问题是如何在安装程序中分发它，所以如果用户没有互联网，它会使用安装程序中的 jar 包（并复制到主应用程序文件夹中）但是当他启动并有互联网时，Java Web Start 会更新它?

*编辑：*我考虑制作两个 JNLP 文件，一个用于本地启动，一个用于在线启动，以便更新，但随后他们需要共享缓存的 jar，因此不会安装两次，我不知道这是否是可能的。

*编辑，更多解释：*

也许我没有很好地解释它。我有一个本机应用程序，并通过下载和 CD 作为 MSI 分发。通过这个应用程序，我们分发了主应用程序用来将数据交换为其他格式的 Java 应用程序（一个 jar）。MSI 安装本机应用程序并复制 jar（不是真正安装）。现在，如果用户有互联网并且发布了新的更新，则会下载并安装完整的 MSI（更新安装）。好？

好吧，我们喜欢使用 Java Web Start 以更时尚的方式只更新 jar，因此当 jar 独立于主应用程序运行时，它会更新。这有一个问题，如果我们只将它部署为 Java Web Start，如果用户将应用程序安装在没有互联网的计算机上（例如将 MSI 放在笔式驱动器或 cd 中），他将无法使用它，因为因为他没有互联网，所以他无法下载 jar。

现在是我的问题来了，我可以在 MSI 中部署 jar，但通过 Java Web Start 执行，所以如果用户有互联网，它会得到更新，但如果他没有互联网，它仍然可以使用 MSI 中的捆绑 jar ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:20:13.220

> ..我可以在 MSI 中部署 jar，但通过 Java Web Start 执行，所以如果用户有互联网，它会更新，但如果他没有互联网，它仍然可以在 MSI 中使用捆绑 jar？

好的，我在这里制定一个计划，这*可能*是可行的。

让我们假设 MSI 能够做以下事情。

*   如果缺少可用的版本或版本太低，请安装 JRE。JRE 需要包含在 MSI 中（以避免需要网络）。
*   将 JWS 启动文件和 Jar(s)（以及本机..）作为临时文件解压缩到本地文件系统。
*   使用“IMPORT-OPTIONS”调用[javaws 工具](http://docs.oracle.com/javase/7/docs/technotes/tools/share/javaws.html)，将代码库设置为本地文件系统中它们被解压的位置。

此时，应安装桌面图标和快捷方式，并准备启动程序。在 JNLP 中指定一些额外的选项非常重要——特别`offline-allowed`是为了确保应用程序。如果互联网不可用，仍然可以启动。

**警告：** 我对 MSI 没有任何经验，我使用导入选项的经验仅限于从构建文件中调用它们（在开发期间）。

# javascript - 在 Backbone.Marionette 中调用集合的添加事件的自定义方法

> ID：13228750
> 
> 赞同：0
> 
> 时间：2012-11-05T08:55:58.177
> 
> 标签：javascript, backbone.js, marionette

我正在为我的项目使用 Backbone.Marionette。我有一个场景，我希望在集合中添加模型时执行自定义方法。因为我正在使用集合视图，我注意到 Marionette 本身做了很多事情（比如追加新添加项目的内容和绑定到“所有”事件等）所以我怎样才能添加我自己的功能而不会错过木偶必须提供的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:12:01.650

Marionette 对集合和模型有一些特殊的绑定（[ItemView Docs](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.itemview.md)）。

所以我认为你可以在你的视图中添加类似的东西：

```
collectionEvents: {
    "add": "on_add"
},

on_add: function(){
     //Your logic here
} 
```

# magento - 单个页面上的多个寻呼机

> ID：13228756
> 
> 赞同：0
> 
> 时间：2012-11-05T08:56:17.057
> 
> 标签：magento

在我的客户评论页面

有 2 个寻呼机

我不知道如何删除寻呼机请帮助我

我是一个magento初学者

![在此处输入图像描述](../Images/19ad084eddb12074d706154e315a9e07.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:13:39.277

工具栏部分将放置在您的主题“review/customer/list.phtml”上。如果在那里找不到，您可以在基本主题文件夹中找到此文件。只需评论这一行

```
<?php echo $this->getToolbarHtml() ?> 
```

就是这样。你完成了。

# php - 数组中的 PHP 搜索

> ID：13228757
> 
> 赞同：0
> 
> 时间：2012-11-05T08:56:19.973
> 
> 标签：php, arrays, search

我们有一个数组，例如：

```
$my_array = array('Software Engineering', 'Civil Engineering', 'Hardware Engineering', 'BL AH Engineering'); 
```

现在我有一个“$q”变量，我想在数组的值之间进行搜索，删除不包含 $q 的键，这是我的代码：

```
foreach($my_array as $key => &$value){
    if (stripos(($value), $q) === false){
        unset($my_array[$key]);
    }
} 
```

现在如果我们设置 $q = 'eer'：

```
var_dump($my_array);
array
  0 => string 'Software Engineering' (length=20)
  1 => string 'Civil Engineering' (length=17)
  2 => string 'Hardware Engineering' (length=20)
  3 => &string 'BL AH Engineering' (length=17) 
```

如您所见，没有任何内容被删除，因为所有 $values 在 'Engineering' 中都有 'eer' 没关系，但现在我设置`$q = 'eer civil'`了，现在：

```
var_dump($my_array);
array
  empty 
```

所有的项目都被删除了，但实际上“土木工程”包含“eer”和“土木”，所以它不应该被删除，我怎么能做到这一点？我可能会用'空间'爆炸 $q 但它不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:09:13.920

不确定这是否是正确的答案，但今天我找到了一个类，它允许您使用通配符在数组中进行搜索。

来源：[http ://www.phpclasses.org/package/7696-PHP-Search-for-patterns-in-arrays-using-wildcards.html](http://www.phpclasses.org/package/7696-PHP-Search-for-patterns-in-arrays-using-wildcards.html)

例子：

“5\. 从数组键和值中搜索数组，其中包含单词“one”，它可以是键或值中的任何位置”

```
$result = $array_search -> array_like($array, '%one%', 'both', false ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:04:50.297

使用`explode`应该工作：

***更新***

使用`preg_split`and`trim`去掉多个/前导/尾随分隔符。

```
$array = array('Software Engineering', 'Civil Engineering', 'Hardware Engineering', 'BL AH Engineering');
$query = ' eer   civil ';
$query = preg_split('/\s+/', trim($query));
foreach ($array as $key => $value) {
    foreach ($query as $q) {
        if (stripos($value, $q) === false) {
            unset($array[$key]);
            break;
        }
    }
}
var_dump($array); 
```

[http://codepad.org/r3jJX1aP](http://codepad.org/r3jJX1aP)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:13:35.063

`explode`应该解决你的问题

```
<?php 

$my_array = array('Software Engineering', 'Civil Engineering', 'Hardware Engineering', 'BL AH Engineering');

$str = "eer Software";
$str = explode(' ', $str);

foreach ($my_array as $key => $result) {
    foreach($str as $q){
        if (stripos(($result), $q) === false){
            unset($my_array[$key]);
        }
    }
}

var_dump($my_array);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T09:05:24.490

如果要检查多个值，请将它们传递到一个数组中，这样`$q`将是一个字符串数组，而不是一个字符串，如下所示：

```
$q = array('eer'); // USE THIS FOR ONE parameter
//$q = array('Civil,'eer'); //USE THIS for several
foreach($my_array as $key => &$value){
    foreach($q as $qval) {
       if (stripos(($value), $qval) === false){
           unset($my_array[$key]);
       }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-05T08:59:21.173

试试 array_search() 函数： [http ://php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)

是在数组中搜索的更好方法。

# iphone - 无论旋转如何锁定方向

> ID：13228758
> 
> 赞同：0
> 
> 时间：2012-11-05T08:56:27.640
> 
> 标签：iphone, objective-c, ios, orientation

我有一个`UITabBar`嵌入`UINavigation`了一些视图的应用程序。在一个特定的导航视图上，我正在显示图形/图表，最好将它们显示`landscape`为 iPhone 向左或向右旋转。该应用程序的其余部分更适合肖像。因此，无论用户如何物理旋转设备，我都想“强制”包含图形的视图以横向加载。我试过了：

```
#pragma mark - Rotation
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

但这似乎对视图没有任何作用。如果我在“支持的界面方向”中为我的目标选择“横向左”图标，那么它允许整个应用程序在设备旋转时重新定位。有没有办法将我的应用程序锁定为所有普通视图的纵向并锁定包含图形的视图的横向，以便应用程序忽略实际的设备方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:29:11.710

你说的对。在标签栏应用程序中，它不是`shouldAutorotateToInterfaceOrientation`被调用的单个视图控制器的 : 方法。仅调用选项卡栏控制器`shouldAutorotateToInterfaceOrientation`来确定视图是否以及如何定向。

`shouldAutorotateToInterfaceOrientation`但是，无论如何，各个视图控制器都应该相应地实现。这些方法仍然用于在推或拉视图控制器时确定动画效果的方向。

我自己从未尝试过以下操作：您可以尝试对标签栏控制器进行子类化，并`shouldAutorotateToInterfaceOrientation`根据当前向用户显示的视图做出相应的响应。**但我担心 Apple 有充分的理由强迫我们为标签栏应用程序中的所有视图支持相同的方向。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:51:05.070

首先，我使用的是 iOS 6 SDK。

我正在使用自定义 TabBar 控制器。并通过以下代码集控制该 TabBar 控制器的方向

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // You do not need this method if you are not supporting earlier iOS Versions
    return [self.selectedViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

- (NSUInteger)supportedInterfaceOrientations
{
    return [self.selectedViewController supportedInterfaceOrientations];
}

- (BOOL)shouldAutorotate
{
    return YES;
} 
```

并且视图控制器应该包含

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orientation {
    return UIInterfaceOrientationIsLandscape(orientation);
} 
```

这就是我所做的并且能够将视图锁定为横向或纵向（在我的情况下）。强制可能是您可以放置​​一个警报视图，说明用户将设备转为横向并向他显示图表。只是一个建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:32:46.130

`ViewController`在横向模式下需要特别尝试：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight );

} 
```

# php - 按索引位置组合三个数组

> ID：13228759
> 
> 赞同：1
> 
> 时间：2012-11-05T08:56:27.973
> 
> 标签：php, arrays

经过几次尝试，我无法找到一种有效的方法来做到这一点。我目前有一个函数正在运行`preg_match_all`并返回三个这样的数组；

```
array(3) {
    ["name"] => 
        array(3) { 
             0 => "Google Chrome 22.0.1229.94",
             1 => "LastPass for Chrome 2.0.7",
             2 => "Chromatic 0.2.3"
        }

    ["link"] => 
        array(3) {
            0 => "/app/mac/32956/google-chrome",
            1 => "/app/mac/42578/lastpass-for-chrome",
            2 => "/app/mac/32856/chromatic"
        }

    ["description"] =>
        array(3) {
            0 => " - Modern and fast Web browser."
            1 => " - Online password manager and form filler for Chrome."
            2 => " - Easily install and updated Chromium."
    }
} 
```

我需要能够像这样组合三个数组；

```
array(3) {
    array(3) {
        ["name"]        = "Google Chrome 22.0.1229.94",
        ["link"]        = "/app/mac/32956/google-chrome",
        ["description"] = " - Modern and fast Web browser."
    }

    array(3) {
        ["name"]        = "LastPass for Chrome 2.0.7",
        ["link"]        = "/app/mac/42578/lastpass-for-chrome",
        ["description"] = " - Online password manager and form filler for Chrome."
    }

    array(3) {
        ["name"]        = "Chromatic 0.2.3",
        ["link"]        = "/app/mac/32856/chromatic",
        ["description"] = " - Easily install and updated Chromium."
    }
} 
```

我一直在尝试`count( $values )`并做一个 for 循环来制作新数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:05:04.153

对于您的特定情况，这是我的看法，因为您的原始数组是`$results`：

```
for ($i=0; $i<3;$i++) {
   $combined[$i]['name'] = $results['name'][$i];
   $combined[$i]['link'] = $results['link'][$i];
   $combined[$i]['description'] = $results['description'][$i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:59:30.797

我会继续建议您*真正*要寻找的是以下`PREG_SET_ORDER`标志`preg_match_all`：

```
preg_match_all('/.../', $foo, $bar, PREG_SET_ORDER); 
```

[http://php.net/preg_match_all](http://php.net/preg_match_all)

否则：

```
$results = array();
foreach ($matches as $key => $values) {
    foreach ($values as $index => $value) {
        $results[$index][$key] = $value;
    }
} 
```

# php - jQuery加载函数转义数据

> ID：13228760
> 
> 赞同：0
> 
> 时间：2012-11-05T08:56:29.520
> 
> 标签：php, javascript, jquery, escaping

我对 jQuery 的加载函数有一个奇怪的问题。它转义了 jQuery 从加载函数返回的 HTML 内容。我将 PHP 文件中的 HTML 输出加载到 div 中。我使用这个功能：

```
function XXX(file,divName,functionToCall)
{
    $("#" + divName).load(file,null,function()
    {
        functionToCall();
    });
}; 
```

PHP 文件的 HTML 输出：

`<div onClick="xxx(0,'xxx')" id="xxx"></div>`

Jquery 将其转换为：

`<div onClick="xxx(0,\'xxx\')" id="xxx"></div>`

由于这个约定，我不能使用 onClick 函数，它不再有效。我无法弄清楚我做错了什么，有人知道导致这个问题的原因以及如何以一种好的方式解决这个问题吗？我已经阅读了有关堆栈溢出的其他相关问题，但我找不到如何避免转义的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:04:16.617

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:03:05.983

这与您的 PHP 实现而不是 javascript 有关。当 PHP 输出你的 html 时，它被设置为转义引号。

# visual-studio-2008 - OpenCV 2.4.3rc 和 CUDA 4.2：“OpenCV 错误：不支持 GPU”

> ID：13228762
> 
> 赞同：7
> 
> 时间：2012-11-05T08:56:36.633
> 
> 标签：visual-studio-2008, opencv, cuda, gpu

我在这张专辑里上传了几张截图：http: [//imgur.com/a/w4jHc](http://imgur.com/a/w4jHc)

我正在尝试在 Visual Studio 2008 的 OpenCV 中启动并运行 GPU。我正在运行 OpenCV GPU 示例代码之一，bgfg_segm.cpp。但是，当我编译（没有编译错误）时，它会抛出“OpenCV 错误：无 GPU 支持”。

*   Windows 7，32 位
*   视觉工作室 2008
*   带有驱动程序版本 301.27 的 nVidia Quadro 1000M
*   OpenCV 2.4.3rc（使用附带的预编译库）
*   CUDA 工具包 4.2，CUDA SDK。

我可以在 C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\bin\win32\Release 中运行 .exe 文件而不会出现任何错误，因此 CUDA 似乎正在运行。

我真的希望你能提供帮助，因为我觉得我必须在这里遗漏一些明显的东西。任何想法或建议都将受到高度赞赏。

**编辑 2012 年 11 月 9 日：**

我最终按照 sgar91 的指示进行操作，现在看来一切正常！

**一个旁注：**当您输入时`Environment Variables`，请查看 CUDA 的路径。我的一个有一个反斜杠 ( ) 之前这样的`\`太多了。对 CUDA 及其 SDK 有三个引用，因此请查看它们。也许这只是一次侥幸。我不确定这是否重要。`bin``C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\\bin;`

**另一个旁注：**我安装了 Visual Studio 2010 Express，并注意 sgar91 的说明适用于 Visual Studio 2010（又名“vc10”）。它在 Visual Studio 2008（又名“vc9”）或 Visual Studio 2012（又名“vc11”）中不起作用，因为没有用于 vc9 和 vc11（仅 vc10）的 OpenCV 2.4.3 的预构建 lib 文件。另外，请注意，如果您使用的是 64 位 Windows，则应按照他的指南将所有 X86 路径（32 位）更改为 X64（64 位），并且在 Visual Studio 中，您需要从 Win32 更改解决方案平台（顶部的下拉菜单，调试或发布旁边的中间）到 x64。

**还有一个旁注：** OpenCV 2.4.3 支持 CUDA 4.2（或者更确切地说，这些库是用 CUDA 4.2 编译的）。如果您安装 CUDA 5.0，它将无法正常工作。它会引发错误消息。想不起来是哪个。如果您绝对需要 CUDA 5.0，您必须等待 OpenCV 将其包含在未来版本中，或者通过 CMake 编译您自己的库。

我运行了下面的代码（它来自[这里](http://opencv.willowgarage.com/wiki/OpenCV_GPU#Short_Sample)，但我必须更正其中的一行以使其编译）并编译并显示图像，所以我希望这意味着一切正常？

```
#ifdef _DEBUG
#pragma comment(lib,"opencv_gpu243d")
#pragma comment(lib,"opencv_core243d")
#pragma comment(lib,"opencv_highgui243d")
#else
#pragma comment(lib,"opencv_core243")
#pragma comment(lib,"opencv_highgui243")
#pragma comment(lib,"opencv_gpu243")
#endif

    #include <iostream>
    #include "opencv2/opencv.hpp"
    #include "opencv2/gpu/gpu.hpp"

    int main (int argc, char* argv[])
    {
        try
        {
            cv::Mat src_host = cv::imread("file.png", CV_LOAD_IMAGE_GRAYSCALE);
            cv::gpu::GpuMat dst, src;
            src.upload(src_host);

            cv::gpu::threshold(src, dst, 128.0, 255.0, CV_THRESH_BINARY);

            cv::Mat result_host(dst);
            //cv::Mat result_host = dst;         //old line commented out
            cv::imshow("Result", result_host);   //new line added by me
            cv::waitKey();
        }
        catch(const cv::Exception& ex)
        {
            std::cout << "Error: " << ex.what() << std::endl;
        }
        return 0;

    } 
```

我无法让 C:\opencv\samples\gpu 中的任何代码工作。它编译，但随后引发错误。但是搞砸了，我会以某种方式解决这个问题的:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T11:28:42.123

您正在使用那些在没有 GPU 支持的情况下编译的 OpenCV 二进制文件。

`C:\opencv\build\x86\...`没有 GPU 支持。

您必须使用文件夹中存在的二进制文件和 lib 文件`build\gpu`。

`C:\opencv\build\gpu\x86\...`有 GPU 支持。

**更新：**

程序：

在 Visual Studio 2010 中，转到项目属性。在 VC++ 目录中，您将看到以下页面：

**在Include Directories**文本框中添加 OpenCV`include`文件夹的路径。确保多个路径用分号分隔，并且任何路径中都没有空格。

 ****同样，在库目录**文本框中添加`lib`GPU 和非 GPU 版本的 OpenCV 文件夹路径。（不要忘记分号）

 ****重要提示：**在框中写入路径时，先写入 GPU 路径，然后再写入非 GPU 路径。

![在此处输入图像描述](../Images/c5a1574d85f190394286cbba374a9be8.png)

下一步是添加`bin`OpenCV 文件夹的路径。但不是在visual studio中，而是在`Path`环境变量中，如下所示：

![在此处输入图像描述](../Images/a76dade7f961fe71fb3c99c89cdf0afc.png)

*   右键点击`My Computer`
*   转到属性
*   转到`Environment Variables`部分
*   编辑系统变量`Path`
*   追加`C:\OpenCV\build\gpu\x86\vc10\bin` **和** `C:\OpenCV\build\x86\vc10\bin`到路径。不要忘记用分号分隔不同的值。另外---> **GPU 是第一位**的。
*   保存并退出。

重新启动 Visual Studio。链接器和`#include`指令现在将识别 OpenCV 库。由于我们还添加了 GPU 库的路径，因此 OpenCV 将提供完整的 GPU 支持。

要使用 OpenCV 的 GPU 功能，您只需执行以下操作：

*   `#include opencv2/gpu/gpu.hpp`
*   在项目属性部分的附加依赖项字段中指定`opencv_gpu243d.lib`调试配置或`opencv_gpu243.lib`发布配置。`Linker->Input`

**一些附加信息：**

在 Visual Studio 中，有一种简单的方法可以链接库，而不是在项目属性中指定它们。

只需在代码的开头写下这些行：

```
#ifdef _DEBUG
#pragma comment(lib,"opencv_core243d")
#pragma comment(lib,"opencv_highgui243d")
#else
#pragma comment(lib,"opencv_core243")
#pragma comment(lib,"opencv_highgui243")
#endif 
```****

# python - 使用多处理模块更新 Tkinter GUI

> ID：13228763
> 
> 赞同：5
> 
> 时间：2012-11-05T08:56:43.857
> 
> 标签：python, tkinter, multiprocessing

我一直在尝试使用 Multiprocessing 模块来更新 Tkinter GUI，但是当我运行此代码时，它给出了 Pickling 错误。

```
# Test Code for Tkinter with threads
import Tkinter
from multiprocessing import Queue
import multiprocessing
import time

# Data Generator which will generate Data
def GenerateData():
    global q
    for i in range(10):
        print "Generating Some Data, Iteration %s" %(i)
        time.sleep(2)
        q.put("Some Data from iteration %s \n" %(i))

def QueueHandler():
    global q, text_wid
    while True:
        if not q.empty():
            str = q.get()
            text_wid.insert("end", str)

# Main Tkinter Application
def GUI():
    global text_wid
    tk = Tkinter.Tk()
    text_wid = Tkinter.Text(tk)
    text_wid.pack()
    tk.mainloop()

if __name__ == '__main__':
# Queue which will be used for storing Data
    tk = Tkinter.Tk()
    text_wid = Tkinter.Text(tk)
    q = multiprocessing .Queue()
    t1 = multiprocessing.Process(target=GenerateData,args=(q,))
    t2 = multiprocessing.Process(target=QueueHandler,args=(q,text_wid))
    t1.start()
    t2.start()
    text_wid.pack()
    tk.mainloop() 
```

错误：

```
PicklingError: Can't pickle <type 'thread.lock'>: it's not found as thread.lock 
```

如果我删除参数`text_wid`，则不会报告错误，但不会使用队列中的数据更新文本小部件。

**更新 ：**

我修改了代码，以便在队列中有值时调用函数来更新 GUI，从而防止 Tkinter 小部件被传递给单独的进程。现在，我没有收到任何错误，但小部件未使用数据更新。但是，如果我使用混合模块`Threading`，`Multiprocessing`即创建一个单独的线程来处理队列中的数据，那么它可以正常工作。我的问题是为什么当我在单独的进程中运行处理程序代码时它不起作用。我是否没有正确传递数据。下面是修改后的代码：

```
# Test Code for Tkinter with threads
import Tkinter
import multiprocessing
from multiprocessing import Queue
import time
import threading

# Data Generator which will generate Data
def GenerateData(q):
    for i in range(10):
        print "Generating Some Data, Iteration %s" %(i)
        time.sleep(2)
        q.put("Some Data from iteration %s \n" %(i))

def QueueHandler(q):
    while True:
        if not q.empty():
            str = q.get()
            update_gui(str)
            #text_wid.insert("end", str)

# Main Tkinter Application
def GUI():
    global text_wid
    tk = Tkinter.Tk()
    text_wid = Tkinter.Text(tk)
    text_wid.pack()
    tk.mainloop()

def update_gui(str):
    global text_wid
    text_wid.insert("end", str)

if __name__ == '__main__':
# Queue which will be used for storing Data
    tk = Tkinter.Tk()
    text_wid = Tkinter.Text(tk)
    q = multiprocessing.Queue()
    t1 = multiprocessing.Process(target=GenerateData,args=(q,))
    t2 = multiprocessing.Process(target=QueueHandler,args=(q,))
    t1.start()
    t2.start()
    text_wid.pack()
    tk.mainloop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:06:02.070

你错过了一个重要的部分，你应该用`__main__`陷阱保护你的电话：

```
if __name__ == '__main__': 
    q = Queue.Queue()
    # Create a thread and run GUI & QueueHadnler in it
    t1 = multiprocessing.Process(target=GenerateData,args=(q,))
    t2 = multiprocessing.Process(target=QueueHandler,args=(q,))

    .... 
```

请注意，队列是作为参数传递的，而不是使用全局的。

编辑：刚刚发现另一个问题，您应该`Queue`从`multiprocessing`模块中使用，而不是从`Queue`：

```
from multiprocessing import Queue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T17:18:16.453

```
# Test Code for Tkinter with threads
import Tkinter as Tk
import multiprocessing
from Queue import Empty, Full
import time

class GuiApp(object):
   def __init__(self,q):
      self.root = Tk.Tk()
      self.root.geometry('300x100')
      self.text_wid = Tk.Text(self.root,height=100,width=100)
      self.text_wid.pack(expand=1,fill=Tk.BOTH)
      self.root.after(100,self.CheckQueuePoll,q)

   def CheckQueuePoll(self,c_queue):
      try:
         str = c_queue.get(0)
         self.text_wid.insert('end',str)
      except Empty:
         pass
      finally:
         self.root.after(100, self.CheckQueuePoll, c_queue)

# Data Generator which will generate Data
def GenerateData(q):
   for i in range(10):
      print "Generating Some Data, Iteration %s" %(i)
      time.sleep(2)
      q.put("Some Data from iteration %s \n" %(i))

if __name__ == '__main__':
# Queue which will be used for storing Data

   q = multiprocessing.Queue()
   q.cancel_join_thread() # or else thread that puts data will not term
   gui = GuiApp(q)
   t1 = multiprocessing.Process(target=GenerateData,args=(q,))
   t1.start()
   gui.root.mainloop()

   t1.join()
   t2.join() 
```

# sql - 在 PostgreSQL 中将值从表移动到另一个表

> ID：13228765
> 
> 赞同：0
> 
> 时间：2012-11-05T08:56:45.813
> 
> 标签：sql, postgresql

您好，我有一个带有此类表的 PostgreSQL 9.1 数据库[表已简化]

![在此处输入图像描述](../Images/bc27d9b9da0e2a585545520666266a22.png)

现在我只使用表：account、account_word 和 word。但我想将一组单词添加到我的数据库中。所以我创建了表 wordgroup 和 wordgroup_word。现在不再需要我的表 account_word，所以我想将所有单词从 account_word 移动到 wordgroup_word。一般来说：

**我想将所有帐户的单词移动到他的单词组，其中组的“is_all”为真，然后删除 account_word 表**

有人可以帮我实现这一目标吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:24:41.220

将所有单词从 account_word 移动到 wordgroup_word。

```
 insert into wordgroup_word 
    select  wordgroup_id, word_id
    from account_word aw join wordgroup wg 
    on aw.account_id = wg.account_id 
    and is_all=true 
```

# c++ - 将 Similary 功能代码合并到模板中

> ID：13228766
> 
> 赞同：1
> 
> 时间：2012-11-05T08:56:47.333
> 
> 标签：c++, templates

我必须编写以下类型的代码

```
if ( itr->second == "char" ) 
{
    MemberProperty<Owner,char> *ptr = (MemberProperty<Owner, char> *)GetterSetterItr->second;
    pw->writeChar(itr->first.c_str() ,(pOwner->*(ptr->m_Getter))());
} else if ( itr->second == "wchar" ) {
   MemberProperty<Owner,wchar_t> *ptr = (MemberProperty<Owner, wchar_t> *)GetterSetterItr->second;
   pw->writeWideChar(itr->first.c_str() ,(pOwner->*(ptr->m_Getter))());
} 
```

会有很多类型，是否有任何 c++ 技巧，最好是模板技巧，以将其减少到对此类代码的一次调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:08:44.517

假设 writeChar() 和 writeWideChar() 除了参数类型之外是相同的，您可以像这样重构代码：

```
if (it->second == "char")
  pw->writeChar<char>(itr->first, GetterSetterItr->second);
else if (itr->second == "wchar")
  pw->writeChar<wchar_t>(itr->first, GetterSetterItr->second); 
```

然后在 *pw 为实例的类中，将 writeChar 和 writeWideChar 替换为模板成员函数：

```
template <typename CharType>
void writeChar(std::string str, /*the type of GetterSetterItr->second*/ arg) {
  MemberProperty<Owner, CharType> *ptr = (MemberProperty<Owner, CharType>*)arg;
  // the rest of code of old writeChar() and writeWideChar()
} 
```

# elasticsearch - 从弹性搜索中检索多值数组

> ID：13228768
> 
> 赞同：1
> 
> 时间：2012-11-05T08:56:57.100
> 
> 标签：elasticsearch

我无法在索引中获取方面。基本上我想在一个单独的数组中获取特定方面的详细信息，比如“公司”

我尝试了很多查询，但都在 facet array 下得到了整个 facet。我怎样才能在 facet array 中只获得特定的 facet

我的索引是[https://gist.github.com/4015817](https://gist.github.com/4015817)

请帮帮我。我被困在这里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:39:14.020

考虑到您的数据结构有多复杂，提取此信息的最简单方法可能是使用[脚本字段](http://www.elasticsearch.org/guide/reference/api/search/script-fields.html)：

```
curl "localhost:9200/index/doc/_search?pretty=true" -d '{
    "query" : {
        "match_all" : {

        }
    },
    "script_fields": {
        "entity_facets": {
            "script": "result=[];foreach(facet : _source.Categories.Types.Facets) {if(facet.entity==entity) result.add(facet);} result",
            "params": {
                "entity": "Country"
            }

        },
        "first_facet": {
            "script": "_source.Categories.Types.Facets[0]"    
        }

    }
}' 
```

# powershell - Powershell查找特定行（查询）psobject

> ID：13228769
> 
> 赞同：0
> 
> 时间：2012-11-05T08:56:59.527
> 
> 标签：powershell, psobject

我是 Powershell 的新手。我正在为最简单的任务而苦苦挣扎。

好的。这是一个非常愚蠢的问题，但是我创建了一个 PSObject ...添加了成员​​（4 列，ID，Name，Status，TagFile；许多行）...我有一个循环...对于每个 i（迭代) ...我希望它使用我的对象中 ID = i 的行的值。

真的不难。我用谷歌搜索并没有想出足够清晰或简洁的答案来帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:42:33.367

这将返回 ID 值为 1 的行

```
$myPSObject | ? { $_.id -eq 1 } 
```

从那里您可以根据需要调整查询

# atmega - 快速 PWM 和 Atmega1280

> ID：13228770
> 
> 赞同：0
> 
> 时间：2012-11-05T08:57:01.590
> 
> 标签：atmega, pwm

您好我有一些问题要了解如何将计时器绑定到引脚，因此我的代码没有运行......

```
#include <avr/io.h>

void init_PWM(void)
{
    TCCR0A|=(1<<WGM00)|(1<<WGM01)|(1<<COM0A1)|(1<<CS00);

    //Set OC0 PIN as output. It is  PB3 on ATmega16 ATmega32

    DDRB|=(1<<PB7);
}

void setPWM(uint8_t duty)
{
   OCR0A = duty;
}

void main (void)
{
   uint8_t brightness = 0;
   init_PWM();

   for (brightness=0; brightness<=255; brightness++)
   {
      setPWM(brightness);
      _delay_ms(100);
   }
} 
```

我的问题是如何将定时器分配给 PB7 ？

我的目标是使用 FastPWM 模式在 PB7 上闪烁 LED...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:51:54.767

对于 mega1280 是 TCCR0B 中的 CS00 而不是 TCCR0A

```
void init_PWM(void) {
    TCCR0A|=(1<<WGM00)|(1<<WGM01)|(1<<COM0A1);
    TCCR0B|=(1<<CS00);
    DDRB|=(1<<PB7);
} 
```

# ruby-on-rails - Imperavi Redactor + RubyOnRails + Amazon S3

> ID：13228772
> 
> 赞同：6
> 
> 时间：2012-11-05T08:57:06.297
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave, fog

我需要将[Imperavi Redactor](http://imperavi.com/redactor/)与[Amazon S3](http://aws.amazon.com/s3/)集成。但不是 JavaScript，而是希望我的 RubyOnRails 应用程序执行上传过程，我已经使用了[fog](http://fog.io/)、[carrierwave](https://github.com/jnicklas/carrierwave)和[imperavi-rails](https://github.com/tanraya/imperavi-rails)。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-26T09:23:15.770

您可以 fork [redactor-rails](https://github.com/SammyLin/redactor-rails) gem 并将资产替换为您购买的 redactor 版本。它就像一个魅力。

# operating-system - 多处理器架构中的堆栈指针和程序状态字是如何维护的？

> ID：13228773
> 
> 赞同：1
> 
> 时间：2012-11-05T08:57:06.443
> 
> 标签：operating-system, multiprocessing, processor, cpu-registers, computer-architecture

在多处理器架构中，寄存器是如何组织的？

例如，在 4 核处理器中，一次至少可以运行 4 个进程。
堆栈指针、程序状态寄存器和程序计数器是如何组织的？

其他通用寄存器呢？

我的猜测是，每个内核都会有一组单独的寄存器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T09:41:23.267

想象一下 4 台完全独立的计算机，每台计算机都有一个单核 CPU。4核计算机就是这样；除了：

*   所有 CPU 共享相同的物理地址空间（并且都可以使用相同的 RAM、PCI 设备等）
*   可以设计中断/IRQ 控制器，以便操作系统可以告诉它哪个 CPU/s 应该被 IRQ 中断
*   CPU 通常能够相互发送信号（例如“处理器间中断”）
*   一些 CPU 可能共享一些缓存
*   一些 CPU 可能共享一些控制寄存器（例如，用于电源管理、缓存配置等）
*   对于现代 CPU，一些 CPU 可能共享部分或全部执行单元（SMT、超线程等）
*   对于现代系统（内存控制器内置在物理芯片中），一些 CPU 可能共享相同的内存控制器

其中大部分对大多数软件来说都是“不可见的”。除非您正在编写控制电源管理的操作系统的一部分，否则您不需要关心电源管理是否在 CPU 之间共享；除非您正在编写操作系统/内核的低级 IRQ 处理，否则您不需要关心 IRQ 如何到达设备驱动程序等。

这同样适用于实际存在的 CPU 数量。操作系统/内核通常确保应用程序只需要关心更高级别的抽象（例如“线程”）。这种更高级别的抽象如何工作取决于操作系统——通常（对于大多数操作系统）操作系统/内核试图通过“足够快”地在它们之间切换来提供所有线程同时运行的错觉（如果只有 4 个 CPU最多 4 个线程实际上同时运行），但它通常比这复杂得多（涉及线程优先级、抢占规则等）并且（即使它相对罕见）它可能非常不同（例如，对于某些系统，同一线程可能会同时在多个 CPU 上运行，以实现容错/冗余目的；对于某些系统，可能只有一个函数队列及其数据，其中多个函数同时运行；ETC）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:40:19.593

多处理器意味着在同一个平台上至少有两个独立的处理器——通常在同一个主板上

*   一个子集是分布式多处理，例如，两台 PC 被编程为具有两个处理器的单个系统

多核意味着大部分或全部 CPU 在单个芯片上多次复制。- 这也意味着堆栈、状态、程序计数器和所有通用寄存器都被复制。

*   [超线程](http://en.wikipedia.org/wiki/Hyper-threading)是一种技术，管道的每个阶段都执行来自不同进程的命令。

多处理意味着在操作系统级别上，一个进程所包含的所有内容都会时不时地切换。

[多线程](https://computing.llnl.gov/tutorials/pthreads/#Thread)是多处理的轻量级变体，其中线程例如共享相同的代码段和相同的数据段、相同的文件描述符等，但具有唯一的堆栈（当然还有唯一的状态寄存器和程序计数器）

*   也意味着一般的多处理（硬件架构）

# c# - 检测仅包含空格的输入

> ID：13228778
> 
> 赞同：0
> 
> 时间：2012-11-05T08:57:29.027
> 
> 标签：c#, asp.net, web-services

我有一个供用户注册的网页，我已经对其进行了测试并运行了它，我正在使用空格进行测试，没有输入任何单词进行注册，这意味着用户可以在不输入任何单词的情况下仅使用空格进行注册。所以我不想要这发生在我的网页上。

任何有一些我可以用来验证这一点的代码的人......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:14:21.983

您可以使用方法：[`string.IsNullOrWhiteSpace`](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:03:47.083

您可以通过多种方式验证用户输入。其中之一是使用内置的 Visual Studio Vaidator 控件，并确保每个控件都绑定到表单中的文本框，并选择其 preoperty 以确保在提交表单之前填写该字段。

另一种方法是从后面的代码中进行验证。像这样的东西：

```
if (firstName.Trim()=="" || lastName.Trim()=="")
{
    return False;
}
else
{
    return True;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:32:29.323

无论是简单的`string.IsNullOrWhiteSpace`

或者如果您真的想使用您选择的答案，您应该将其编辑为：

```
if (firstName ! = null && lastName ! = null)
{
    if (firstName.Trim()=="" || lastName.Trim()=="")
    {
        return False;
    }

    else
    {
        return True;
    }
}
else return False; 
```

# php - Yii RBAC AuthManager 和 Bizrules 的问题

> ID：13228781
> 
> 赞同：0
> 
> 时间：2012-11-05T08:57:42.913
> 
> 标签：php, yii, rbac

示例：我想允许某人仅更新特定的博客文章。

我认为规则会这样排列，但它不起作用：

```
$auth->createOperation('update_post_category', '', 'return ( $params["category"] == $data["category"] );');

$role = $auth->createRole('PostEditor');
$role->addChild('update_post_category');

$auth->assign('PostEditor', 'username', null, array('category' => 7)); 
```

查看 Yii 代码我明白为什么。但是我将如何实施呢？我可以为每个作业添加一个 bizrule，但我认为这相当臃肿；一定有更好的方法吧？

# linq-to-sql - 实体 null - Linq to SQL

> ID：13228782
> 
> 赞同：0
> 
> 时间：2012-11-05T08:57:53.850
> 
> 标签：linq-to-sql, constructor, null

我需要帮助...

我有我手动创建的实体。

```
public class Project()
{
 public Project Data {get;set;}
 public string ProjectID { get; set; }
 public string AreaID { get; set; }
 public string Country { get; set; }
} 
```

其中属性“Project”是 SQLmetal 创建的表。

我还用 SQLmetal 创建了我的类，希望有自己的实体。现在我尝试在构造函数中解析它们，例如：

```
public Project()
{
 ProjectID = Data.ProjectID;
 AreaID = Data.AreaID;
 Country = Data.Country;
} 
```

但是当我使用

```
projects.Select(p => new Project { Data = p }); 
```

构造函数中的 Data 属性为空。

知道为什么吗？我将如何更好地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:40:02.130

是的，因为初始化程序

```
var x = new Project { Data = p }; 
```

相当于

```
var x = new Project();
x.Data = p; 
```

该`Data`属性是在构造函数之后设置的。

您可以通过创建一个将 Data 作为参数的构造函数来解决它

```
public Project(Data data)
{
    this.Data = Data;
    ProjectID = Data.ProjectID;
    AreaID = Data.AreaID;
    Country = Data.Country;
} 
```

并调用构造函数

```
projects.Select(p => new Project(p)); 
```

# java - 如何临时禁用 JOptionPane 输入对话框上的确定按钮？

> ID：13228788
> 
> 赞同：0
> 
> 时间：2012-11-05T08:58:04.307
> 
> 标签：java, swing, joptionpane

我的问题是如何暂时禁用 JOptionPane 输入对话框上的确定按钮，直到按下一个键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:24:30.763

这是一个例子：

```
JPanel pan = new JPanel(new BorderLayout());
final JTextField txt = new JTextField(10);
final JButton ok = new JButton("OK");
ok.setEnabled(false);

ok.addActionListener(new ActionListener()
{
    @Override
    public void actionPerformed(ActionEvent e)
    {
        String input = txt.getText();
        System.out.println("The input is: " + input);

        /* close the dialog */
        Window w = SwingUtilities.getWindowAncestor(ok);
        if(w != null) w.setVisible(false);
    }
});

txt.getDocument().addDocumentListener(new DocumentListener()
{
    @Override
    public void removeUpdate(DocumentEvent e)
    {
        if(e.getDocument().getLength() == 0) ok.setEnabled(false);
    }

    @Override
    public void insertUpdate(DocumentEvent e)
    {
        if(e.getDocument().getLength() > 0) ok.setEnabled(true);
    }

    @Override
    public void changedUpdate(DocumentEvent e){}
});

pan.add(txt, BorderLayout.NORTH);
JOptionPane.showOptionDialog(null, pan, "The Title", JOptionPane.NO_OPTION, JOptionPane.PLAIN_MESSAGE, null, new JButton[]{ok}, ok); 
```

# java - 单例配置类？具体例子

> ID：13228795
> 
> 赞同：3
> 
> 时间：2012-11-05T08:58:27.543
> 
> 标签：java, apache-commons-config

我已经开始阅读 Apache commons 文档，但它非常广泛，所以我希望有人可以回答一个简单的问题，所以我不需要阅读所有内容就可以开始使用它进行基本配置。我很快就失去了耐心——没有“快速入门章节”，在决定是否要使用该库之前，我不需要了解所有细节。

我想要（我认为是一个常见的用例）一个具有静态方法的类，该类提供属性的查找。

例如在类 Foo 我可以使用

```
Settings.config.getString("paramter"); 
```

在哪里

```
 import org.apache.commons.configuration.Configuration;
 import org.apache.commons.configuration.DefaultConfigurationBuilder;
 /**
  * Settings configuration class
  */
 public class Settings  {

     private static final DefaultConfigurationBuilder factory = new DefaultConfigurationBuilder("config.xml"); 
     public static final Configuration config= factory.getConfiguration();

} 
```

问题是工厂方法可以抛出异常！所以这段代码不能编译，一个类也不能抛出异常，所以我怀疑我需要做更多的编码。

我怀疑有一个简单的解决方案。但它肯定不能打电话

```
DefaultConfigurationBuilder factory = new DefaultConfigurationBuilder("config.xml"); 
Configuration config= factory.getConfiguration(); 
```

在我想阅读配置的每个班级中？

* * *

我试过了：

```
public class Settings  {
 public static final Configuration config;
 static {
     try {
    DefaultConfigurationBuilder factory; 
    factory = new DefaultConfigurationBuilder("config.xml") ; 
         config = factory.getConfiguration();
     }
     catch (ConfigurationException e) {
         // Deal with the exception
    config=null;
    System.exit(1);
     }
 }
} 
```

但我得到编译错误：

```
 error: variable config might already have been assigned
   [javac]      config=null; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:02:18.853

您可以将要初始化的代码放在`config`静态初始化程序块中并在那里处理异常。例如：

```
public class Settings {
    public static final Configuration config;

    static {
        Configuration c = null;
        try {
            DefaultConfigurationBuilder factory = new DefaultConfigurationBuilder("config.xml");
            c = factory.getConfiguration();
        }
        catch (SomeException e) {
            // Deal with the exception
            c = null;
        }

        config = c;
    }
} 
```

# ruby - 如何在部署失败时运行 Capistrano 任务

> ID：13228797
> 
> 赞同：0
> 
> 时间：2012-11-05T08:58:38.043
> 
> 标签：ruby, capistrano

使用 Capistrano 我想在部署失败时运行清理/拆卸任务，例如当 shell 命令失败时。

经过相当广泛的搜索后，我找不到任何东西。

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:09:24.750

看看 Capistrano 源代码：

*   [https://github.com/capistrano/capistrano/blob/master/lib/capistrano/recipes/deploy.rb](https://github.com/capistrano/capistrano/blob/master/lib/capistrano/recipes/deploy.rb)
*   [https://github.com/capistrano/capistrano/blob/master/lib/capistrano/configuration/execution.rb](https://github.com/capistrano/capistrano/blob/master/lib/capistrano/configuration/execution.rb)

这取决于你的任务如何。基本上，有一些用于回滚的片段：

```
task :my_task do
  on_rollback { "rm -rf data_dir" }
  exec "mkdir data_dir"
  exec "some commands for preparaing data in data_dir" 
end
after "deploy:create_symlink", :my_task 
```

在上述情况下，`my_task`应该在事务中运行。是的，它已经在事务中，因为它是创建事务`deploy:create_symlink`的子任务。`deploy`

如果你想`my_task`独立运行（不是`cap deploy`进程的子任务）。您应该创建另一个如下所示的任务，并从命令行运行`cap my_task_standalone`。

```
task :my_task_standalone do
  transaction do
    my_task
  end
end 
```

# android - 具有自定义适配器的 ListView 未更新

> ID：13228802
> 
> 赞同：0
> 
> 时间：2012-11-05T08:58:53.880
> 
> 标签：android, listview, custom-adapter

每当更新或删除任何项目时，我都想更新列表视图。我尝试了很多选项，但没有一个有效。这是列表视图的代码：

```
public class HelloBubblesActivity extends Activity {
    private com.warting.bubbles.DiscussArrayAdapter adapter;
    private ListView lv;
    private LoremIpsum ipsum;
    private EditText editText1;
    private static Random random;
    Runnable m_handlerTask;
    TextView tv ;
    LinearLayout ll;
    Handler m_handler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_discuss);

        lv = (ListView) findViewById(R.id.listView1);

        adapter = new DiscussArrayAdapter(getApplicationContext(), R.layout.listitem_discuss);

        lv.setAdapter(adapter);

        ll = (LinearLayout)findViewById(R.id.wrapper);
        m_handler = new Handler();
        addItems();
        ReduceTimeIteration();

    }

     public void ReduceTimeIteration()
     {
            adapter.clear();
            ((BaseAdapter) lv.getAdapter()).notifyDataSetChanged();
            adapter.notifyDataSetChanged();
            adapter.notifyDataSetInvalidated();
            lv.invalidate();
            lv.requestLayout();
            Log.d("Adapter: ", "Adapter is changed");
     }
    private String addItems() {
        String a = "Hello bubbles";
        adapter.add(new OneComment(true,a));
        return a;
    }
} 
```

这是自定义适配器的代码：

```
public class DiscussArrayAdapter extends ArrayAdapter<OneComment> {

    private TextView countryName;
    private List<OneComment> countries = new ArrayList<OneComment>();
    private LinearLayout wrapper;
    static View row ;

    @Override
    public void add(OneComment object) {
        countries.add(object);
        super.add(object);
    }

    public DiscussArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public int getCount() {
        return this.countries.size();
    }

    public OneComment getItem(int index) {
        return this.countries.get(index);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        row = convertView;
        if (row == null) {
            LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.listitem_discuss, parent, false);
        }

        wrapper = (LinearLayout) row.findViewById(R.id.wrapper);

        OneComment coment = getItem(position);

        countryName = (TextView) row.findViewById(R.id.comment);

        countryName.setText(coment.comment);

        countryName.setBackgroundResource(coment.left ? R.drawable.bubble_yellow : R.drawable.bubble_green);
        wrapper.setGravity(coment.left ? Gravity.LEFT : Gravity.RIGHT);

        return row;
    }

    public Bitmap decodeToBitmap(byte[] decodedByte) {
        return BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length);
    }

} 
```

在列表视图中，我想删除所有使用的视图`adapter.clear()`，然后想更新列表视图。但即使在调用 adapter.clear() 之后，列表视图仍然保持不变。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:07:01.923

我建议您通过以下方式创建适配器：

```
// declared in activity
private List<OneComment> countries = new ArrayList<OneComment>(); 

// in onCreate()
adapter = new DiscussArrayAdapter(getApplicationContext(), R.layout.listitem_discuss, countries); 
```

然后调用`countries.clear(); adapter.notifyDataSetChanged();`清除列表视图。因为您现在基本上是在使用您的“国家/地区”（列表）来判断适配器的大小以及要在该列表中获取的项目。

# dojo - Dijit 垂直布局

> ID：13228804
> 
> 赞同：1
> 
> 时间：2012-11-05T08:59:05.367
> 
> 标签：dojo

我需要在 ContentPane 内（一个在另一个下）创建一个按钮列表作为“单列垂直网格”。我没有在 dijit ref 中找到这样的布局小部件。指导。

我可以使用什么？将 (addChild) 元素添加到内容窗格时如何获得新行？

有 dojox 网格容器，但对我来说看起来有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:55:29.997

我知道这是最不优雅的方法，但它是独一无二的：您可以创建一个包含按钮的自定义 div-domNode，如下所示：

```
 var btn1=new dijit.form.Button({...});
    var btn2=new dijit.form.Button({...});

    // custom div-domNode
    var buttons = dojo.create('div');

    // filling it with the domNodes of your buttons separated by a <br> node
    dojo.create(btn1.domNode,null,listOfButtons);
    dojo.create('br',null,listOfButtons);
    dojo.create(btn2.domNode,null,listOfButtons); 
```

并将其显示在您的 ContentPane 中

```
 myContentPane.set('content', buttons); 
```

ul 或 table 也可以。最后让我说，我很惭愧自己不知道更好的答案。希望它是你所要求的。

# azure - 从 Azure 表存储中获取分区

> ID：13228809
> 
> 赞同：0
> 
> 时间：2012-11-05T08:59:28.013
> 
> 标签：azure, azure-storage, azure-table-storage

在我的表存储中，每个分区有 10.000 个元素。现在我想将整个分区加载到内存中。然而，这需要很长时间。我想知道我是否做错了什么，或者是否有办法更快地做到这一点。这是我的代码：

```
 public List<T> GetPartition<T>(string partitionKey) where T : TableServiceEntity
        {
            CloudTableQuery<T> partitionQuery = (from e in _context.CreateQuery<T>(TableName)
                                                 where e.PartitionKey == partitionKey
                                                 select e).AsTableServiceQuery<T>();

            return partitionQuery.ToList();
        } 
```

这是它应该完成的方式，还是它们等同于批量插入以再次将元素从表中取出？

非常感谢，克里斯蒂安

**编辑**

我们在 blob 存储中也提供了所有数据。这意味着，一个分区被完全序列化为 byte[] 并保存在一个 blob 中。当我从 blob 存储中检索它并随后对其进行反序列化时，它比从表中获取它要快得多。快了将近10倍！怎么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:26:38.017

在您的情况下，我认为关闭更改跟踪可能会有所作为：

```
context.MergeOption = MergeOption.NoTracking; 
```

查看 MSDN 以了解其他可能的改进：[.NET and ADO.NET Data Service Performance Tips for Windows Azure Tables](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/d84ba34b-b0e0-4961-a167-bbe7618beb83)

**编辑：**要回答为什么 blob 存储中的大文件更快的问题，您必须知道在单个请求中可以获得的最大记录数是 1000 项。这意味着，要获取 10.000 个项目，您需要在 blob 存储上执行 10 个请求而不是 1 个单个请求。此外，在使用 blob 存储时，您不会通过 WCF 数据服务，这也会产生很大的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:30:31.543

此外，请确保您使用的是第二代 Azure 存储……如果您在支持它的数据中心，它本质上是“免费”升级。它使用 SSD 和升级的网络拓扑。

[http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx](http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)

Microsoft 不会迁移您的帐户，只需重新创建它，您就可以“免费升级”到第二代 Azure 存储。

# c++ - 如何为守护进程 C++ 设置标准错误

> ID：13228817
> 
> 赞同：1
> 
> 时间：2012-11-05T08:59:55.430
> 
> 标签：c++, linux

我正在使用一些第三方库，它使用 stderr 打印错误并且它没有提供任何日志回调。我正在使用 linux`daemon`调用来创建进程的守护进程。

有没有办法可以在守护进程调用后将 stderr 设置为文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:02:45.543

使用`open`系统调用打开文件，然后执行以下操作：`dup2(filefd, 2)`. 这将设置`stderr`为打开的文件。然后就可以了`close(filefd)`。你可以做`open`before call `daemon`，但我不推荐 the `dup2`and later `close`until after after call `daemon`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:12:08.230

在使用第三方库的代码中，您可以“重新路由”stderr 流。
例如：

```
std::ofstream outputFileStream;
outputFileStream.open ("outputfile.txt");

std::streambuf * yourStreamBuffer = outputFileStream.rdbuf();
std::cerr.rdbuf(yourStreamBuffer);

std::cerr << "Ends up in the file, not std::cerr!";

outputFileStream.close(); 
```

# javascript - 由于内容安全策略，谷歌地图 api 脚本确实加载

> ID：13228825
> 
> 赞同：13
> 
> 时间：2012-11-05T09:00:09.150
> 
> 标签：javascript, jquery, google-maps, google-chrome-extension, content-security-policy

我正在制作一个谷歌浏览器扩展，我想在其中使用谷歌地图。问题是当我运行我的脚本时它给了我这个错误

```
Refused to load script from 'https://maps.googleapis.com/maps/api/js?key=XXXXXXXXXXXXXXXX&sensor=false' because of Content-Security-Policy. 
```

这是我的清单文件

```
{
  "name": "Name",
  "version": "1.0",
  "manifest_version": 2,
  "background": { 
    "scripts": [
      "js/script.js"
    ] 
  },
  "description": "Desc",
  "browser_action": {
    "default_icon": "images/icon.png",
    "default_title": "Title",
    "default_popup": "html/popup.html"
  },
  "permissions": [ 
    "http://*/",
    "http://*.google.com/",
    "http://localhost/*"
  ],
  "content_security_policy": "script-src 'self' http://google.com; object-src 'self'" 
```

}

我正在添加这样的脚本

```
<script src="../js/libs/jquery.js"></script>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=XXXXXXXXXXXXXX&sensor=false"></script>
  <script src="../js/plugins/easing.js"></script>
  <script src="../js/script.js"></script> 
```

为什么我一次又一次地收到这个错误？请帮忙...

**更新一**

我将这两个权限添加到清单文件但仍然无法正常工作

```
"https://maps.google.com/*",
"https://maps.googleapis.com/*", 
```

**更新二**

我也使用了这种 content_security_policy

```
"content_security_policy": "default-src 'none'; style-src 'self'; script-src 'self'; connect-src https://maps.googleapis.com; img-src https://maps.google.com" 
```

但以上对我也不起作用

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-05T11:14:47.673

我认为这里的问题是您没有正确设置 Google Maps URL 的内容安全策略。您应该将清单文件中的“content_security_policy”更改为以下内容：

```
"content_security_policy": "script-src 'self' https://maps.googleapis.com https://maps.gstatic.com; object-src 'self'" 
```

这仅仅意味着您允许从自我/当前页面和“https://maps.googleapis.com”运行脚本。

试试这个，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T07:05:17.317

我遇到了同样的问题，并通过将 API URL 从 http 替换为 https 版本来解决。

在 HTML 中来自：

```
<script type='text/javascript' src='http://maps.google.com/maps/api/js?v=3.3&sensor=false'></script> 
```

到：

```
<script type='text/javascript' src='https://maps-api-ssl.google.com/maps/api/js?v=3.3&sensor=false'></script> 
```

然后在 manifest.json 中将[https://maps-api-ssl.google.com](https://maps-api-ssl.google.com)添加到 CPS

我不知道你是否还需要这些信息。但是我在谷歌上搜索并花了一些时间但找不到直接的答案，所以我在这里写信希望它能帮助任何人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-10-11T09:09:41.433

内容安全策略使您免受 XSS 攻击。但这意味着您需要[明确地将外部资源列入白名单](https://developers.google.com/web/fundamentals/security/csp/)。您可以通过提供额外的 HTTP 标头或通过以下`<meta>`标记来实现：

```
<meta http-equiv="Content-Security-Policy" 
    content="default-src 'self' data: gap: ws: ; 
    style-src 'self' https: *.googleapis.com; 
    script-src 'self' https: *.googleapis.com;
    media-src 'none'; 
    font-src *;
    connect-src *;
    img-src 'self' data: content: https: *.googleapis.com;"> 
```

# jquery - 从 bxSlider 的寻呼机中删除数字

> ID：13228828
> 
> 赞同：1
> 
> 时间：2012-11-05T09:00:15.547
> 
> 标签：jquery, bxslider

我尝试使用 z-index: -1, color: transparent 和 visibility: hidden 等来从 bxSlider 寻呼机中删除数字，以便它只留下图像点。'color: transparent' 适用于除 IE 7 和 8 之外的所有浏览器上的文本。

用于 IE7 和 IE8 的 CSS 解决方案似乎根本不起作用。

任何帮助都可以从脚本本身中删除数字或能够使用 CSS 删除 IE7 和 8 中的文本。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T07:27:20.617

尝试`font-size:0;` 为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T08:09:06.010

@charlietfl 是对的，但 'text-indent' 仅适用于块或浮动元素。

尝试这个 ：

```
a{display:block; text-indent:-9999px} or

a{float:left; text-indent:-9999px} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T14:08:01.527

文本缩进不适用于 bxSlider 中的寻呼机。尝试将此代码添加到您的CSS：

```
.pager-link {color:transparent;} 
```

这将隐藏数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-24T11:56:10.220

默认的 BxSlider CSS 具有将`text-indent`文本隐藏在屏幕之外的属性集。如果您看到幻灯片编号，则可能是您忘记包含`bxslider.css`文件。

检查[BxSlider 示例](http://bxslider.com/examples/carousel-demystified)- 它们都不需要任何特殊格式来隐藏数字并仅显示点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-15T21:01:38.107

这将构建空`<a>`标签：

```
$('#bxslider').bxSlider({
    buildPager: function(slideIndex) {
        return '';
    }
}); 
```

# c++ - 是否可以使用 cmake 创建 WinRT 项目？

> ID：13228829
> 
> 赞同：18
> 
> 时间：2012-11-05T09:00:25.477
> 
> 标签：c++, visual-studio-2012, windows-runtime, cmake

要创建 WINRT 项目，我们需要 CMake >= 2.8.10 并且：

1.  将项目类型设置为 Windows Store App(CMAKE: SET_TARGET_PROPERTIES(target PROPERTIES VS_WINRT_EXTENSIONS TRUE)
2.  为 WinRT 编译添加编译器标志 /ZW(CMAKE: ADD_DEFINITIONS(-ZW))
3.  添加 App.xaml.h、App.xaml.cpp
4.  添加 App.xaml 以便 VS 从中生成一些额外的文件（CMAKE：如何？）
5.  添加带有描述的 Package.appxmanifest，以便 VS 使用它（CMAKE：HOW？）

谢谢你。

更新：引用此问题的 CMake 错误报告在这里[0013749：如果没有变通方法，无法从 CMake 定位 Windows 8 RT。](http://public.kitware.com/Bug/view.php?id=13749)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T11:43:08.153

CMake 家伙正在研究它： [cmake.org 上的错误报告](http://www.cmake.org/Bug/print_bug_page.php?bug_id=13511)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-27T14:04:33.750

这是完全可行的。自从最初提出这个问题以来，情况发生了很大变化。最显着的变化是：

*   自 Visual Studio 2017 起，Visual Studio 原生支持 CMake（请参阅Visual *Studio*[中的 CMake 支持](https://blogs.msdn.microsoft.com/vcblog/2016/10/05/cmake-support-in-visual-studio/)）。不再需要单独下载 CMake，并让它生成 .sln 和 .vcxproj 文件。CMake 是 Visual Studio 安装的一部分，可以被 Visual Studio 的项目管理基础结构和构建系统解析。
*   C++/CX 不再是生产和使用 Windows 运行时组件的唯一方法。[C++/WinRT](https://github.com/Microsoft/cppwinrt)提供 Windows 运行时 API 表面的标准 C++ 语言投影，能够使用和生成 Windows 运行时组件。

通过这些更改，您可以使用 CMake 创建构建 Windows 运行时应用程序的 C++ 项目。C++/WinRT 是标准 C++，Visual Studio 2017 提供内置的 CMake 支持。

# android - 当 edittext 以编程方式更改时禁用键盘

> ID：13228831
> 
> 赞同：0
> 
> 时间：2012-11-05T09:00:37.467
> 
> 标签：android

我正在制作一个带有加号和减号按钮和一个编辑文本的数字选择器。

当用户单击加号按钮时，edittext 中的文本应该会发生变化，如果用户单击 edittext，则会出现一个键盘。

在我的galaxy gio（android 2.3.6）上一切正常，但在我的galaxy tab 10.1（android 3.0）上，每次点击加号或减号按钮时都会弹出键盘。

所以简而言之，我想在以编程方式更改编辑文本时禁用键盘，但是当用户单击编辑文本时，我希望键盘显示出来。

有任何想法吗？

编辑：我不能使用 XML 属性，只能使用 java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:05:33.303

使用这个在你的加号和减号按钮隐藏软键盘

```
InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        inputMethodManager.hideSoftInputFromWindow(
                Youredittext.getWindowToken(), 0); 
```

这通过设置编辑文本单击列表器来显示编辑文本，并在该单击列表器中使用以下代码

```
InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        inputMethodManager.toggleSoftInput(0, InputMethodManager.SHOW_IMPLICIT); 
```

# android - Android 上的 VPN 客户端：有关 VPN 客户端和使用隐藏 API 的问题

> ID：13228834
> 
> 赞同：1
> 
> 时间：2012-11-05T09:01:01.433
> 
> 标签：android, vpn

我需要监控 VPN 流量，即我需要读取传入和传出的 VPN 流量。

为此，我正在尝试创建自己的 VPN 客户端，但我没有找到任何“android.net.VpnService”的工作示例，我查看了 android 示例应用程序 ToyVpn，但它不起作用，我收到以下异常：

```
E/ToyVpnService(2302): Got java.net.PortUnreachableException: 
E/ToyVpnService(2302): Got java.net.SocketException: sendto failed: ECONNREFUSED (Connection refused) 
```

此外，任何地方都没有提到“如何设置用户名”。

它读到我们可以使用隐藏的 API，但这需要 root 访问权限，现在我没有 root 手机......

关于这种（隐藏 API）方法，我想问的是，使用隐藏 API 的应用程序是创建自己的 VPN 客户端还是使用 android 的默认客户端？如果他们使用android的默认客户端，那么这仍然可以读取传入和传出的流量吗？

我正在寻找一些关于使用“android.net.VpnService”创建我自己的 vpn 客户端的指南或工作示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:52:50.523

> 我需要监控 VPN 流量，即我需要读取传入和传出的 VPN 流量。

除非这是您自己入侵后门的 VPN 实现，否则出于明显的安全原因，这最好是不可能的。

> 我收到以下异常

即兴发挥，我的猜测是您没有运行 ToyVPN 服务器组件，或者您的测试环境无法访问它。然而，自从我玩 ToyVPN 以来已经有一段时间了，而且我不是它的代码库专家。

> 此外，任何地方都没有提到“如何设置用户名”。

我不记得 ToyVPN 有“用户名”的概念。

> 它读到我们可以使用隐藏的 API，但这需要 root 访问权限

隐藏的 API 与 root 访问无关。

> 他们是创建自己的 VPN 客户端还是使用 android 的默认客户端？

您必须询问您所指的任何应用程序的作者。

> 如果他们使用android的默认客户端，那么这仍然可以读取传入和传出的流量吗？

只有它们生成的“传入和传出流量”。出于明显的安全原因，应该不可能监视其他应用程序的 VPN 流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T16:55:31.273

> 我需要监控 VPN 流量，即我需要读取传入和传出的 VPN 流量。

这是一个模棱两可的问题，因为 VPN 有传入和传出流，并且应该实现传入和传出隧道流。

对于传统的 VPN，您必须同时协调两者；一方面建立到 VPN 服务器的隧道连接，并将 VpnService 接口的输入流写入隧道输出流，另一方面将隧道响应写回接口输出流。

与 Mark 在他的回答中所说的相反，您确实将原始网络请求作为 VpnService 接口的输入流。请记住，您正在获取将通过网络接口进行通信的原始字节，因此您实际上必须不遗余力地解析 IP 数据包及其 TCP 或 UDP 有效负载。

# javascript - 在 url 的请求参数中传递“#”哈希符号在 Firefox 中不起作用

> ID：13228835
> 
> 赞同：11
> 
> 时间：2012-11-05T09:01:13.947
> 
> 标签：javascript, ajax, firefox, xmlhttprequest

我正在使用 AJAX 进行 struts 操作，一切都很好，但是 Firefox 存在问题，当我将 URL 中的参数作为请求参数传递时，如果该参数最后包含 hash(#) 符号，则 firefox 会删除所有内容在该符号之后并将该参数发送到没有它的操作。

例如，如果我在 Firefox 中通过了 test123#abcd，那么我在动作类中只得到 test123，而不是 test123#abcd，这对我的要求来说是不可取的。对于 IE，它工作得很好。有什么方法可以提取完整的参数，包括 Firefox 中的 # 符号。

如果我还需要发布 Java 操作代码，请告诉我，谢谢。

JS 片段

```
var valuePassword=test123#abcd;

    var url = "/test/ChangePwdAjax.do?newPass="+valuePassword;
            var xmlHTTP = getXMLHTTPRequest(); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-05T09:03:50.310

利用

```
var url = "/test/ChangePwdAjax.do?newPass="+ encodeURIComponent(valuePassword); 
```

这会将您编码`valuePassword`为一个有效的 URL 组件，该组件可以作为 URL 中的查询字符串传递

另一方面，您应该使用`decodeURIComponent`从编码字符串中获取值

```
var value = decodeURIComponent(valuePasswordPassed); 
```

要了解有关此的更多信息，[请转到此处](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:13:00.610

当您更改数据时，您必须执行 http POST 请求。不是 GET 请求。这将自动解决您的问题，而无需对您的密码进行编码。

```
xmlhttp.open("POST", "/test/ChangePwdAjax.do", true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.send("newPass=" + valuePassword); 
```

# android - 我应该使用 AlarmManager 还是 Handler？

> ID：13228843
> 
> 赞同：15
> 
> 时间：2012-11-05T09:01:48.467
> 
> 标签：android, alarmmanager, android-handler

我正在编写一个不断轮询设备传感器的应用程序，并且每隔一段时间应该将一些统计信息写入文件。这可能快到一秒钟一次，也可能慢到一分钟一次。我应该使用`Handler's` `postDelayed()`方法还是只安排它`AlarmManager`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-09-24T09:57:22.727

这应该可以帮助您区分`Handler`和`AlarmManager`。 [[来源]](https://plus.google.com/+AndroidDevelopers/posts/GdNrQciPwqo?pid=6192956249638257586&oid=108967384991768947849)

尽管已经同意这些主要适用于 API 23。这是一个新版本。

[![后台工作、警报和您的 Android 应用程序的流程图](../Images/1488993f4298ee2382c56d087e140233.png)](https://i.stack.imgur.com/xsx43.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-05T09:35:54.237

如果应用程序应该在待机状态下工作，那么`AlarmManager`. 如果没有那么`Handler`。
`AlarmManager`将唤醒 CPU，因此它将消耗更多电池，而`Handler`在待机状态下将无法工作。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-11-04T17:03:23.673

根据以下关键点确定您的设计：

**AlarmManager：** 它的优点`AlarmManager`是即使设备处于深度睡眠模式（CPU 关闭）它也能正常工作。当闹钟触发时，它会点击`BroadcastReceiver`and in `onReceive`，它会获取唤醒锁（如果您使用`WAKEUP`过类似`RTC_WAKEUP`or的闹钟类型`ELAPSED_TIME_WAKEUP`）。完成后`onReceive()`它会释放唤醒锁。

但大多数时候它对我不起作用。因此，我获得了自己的唤醒锁，`onReceive()`并在最后释放它们以确保我真正获得 CPU。

它不起作用的原因是当多个应用程序同时使用一个资源（例如阻止系统挂起的唤醒锁）时，框架会在这些应用程序之间分配 CPU 消耗，尽管不一定相等。因此，如果它很关键，最好获取唤醒锁并执行此操作。

**定时器和处理程序：** `Handler`定时器不能在深度睡眠模式下工作，这意味着当设备处于睡眠状态时，任务/可运行项将不会按计划运行。它们不计算睡眠时间，这意味着执行任务的延迟将仅在活动模式下计算。因此，实际延迟将是延迟给定 + 深度睡眠所花费的时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T09:10:01.970

我会说这取决于轮询间隔。我想在你的情况下它相当低（大约几秒钟），所以你应该采用 Handler 方式，或者使用 Timer 类。

AlarmManger 是一个更高级别的服务，处理此用例涉及更大的开销。当警报触发时，您需要使用 BroadcastReceivers 进行处理。这意味着每次处理其中一个警报时，您都需要为您感兴趣的传感器注册侦听器，恕我直言，这是非常低效的。

# python - 解析 FB GraphAPI 图片调用到最终 URL

> ID：13228847
> 
> 赞同：0
> 
> 时间：2012-11-05T09:02:13.227
> 
> 标签：python, django, facebook-graph-api

我正在开发一个显示用户/朋友照片的应用程序。在大多数情况下，我可以从相册中提取照片，但是对于用户/相册封面照片，给出的只是对象 ID，以下 URL 为其提供了图像：

`https://graph.facebook.com/1015146931380136/picture?access_token=ABCDEFG&type=picture`

查看时会将用户重定向到图像文件本身，例如：

`https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/420455_1015146931380136_78924167_s.jpg`

我的问题是，是否有 Pythonic 或 GraphAPI 方法来解析最终图像路径并避免将访问令牌发送给最终用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:36:39.807

要获取封面照片的实际图片网址，首先您可以调用 facebook api 来获取封面图片，然后提取`url`字段，`PHP`我会执行以下操作：

```
$cover = $facebook->api("$album_id?fields=picture&access_token=ABVHDG");
$cover_url = $cover['picture']['data']['url']; //this $cover_url is image file itself from host fbcdn-photos-a.akamaihd.net 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:37:48.087

facebook 图形 api url 执行 302 重定向到实际具有用户头像的 CDN url。您可以使用轻松找到它`urllib2`

```
>>> import urllib2
>>> url = "http://graph.facebook.com/4/picture"
>>> req = urllib2.Request(url)
>>> res = urllib2.urlopen(req)
>>> finalUrl = res.geturl()
>>> finalUrl
'http://profile.ak.fbcdn.net/hprofile-ak-prn1/157340_4_3955636_q.jpg' 
```

或者为图片调用 JSON 版本的 Graph api：

[http://graph.facebook.com/4/?fields=picture&type=large](http://graph.facebook.com/4/?fields=picture&type=large)

解码它，得到`url`：

```
{
   "id": "4",
   "picture": {
      "data": {
         "url": "http://profile.ak.fbcdn.net/hprofile-ak-prn1/157340_4_3955636_q.jpg",
         "is_silhouette": false
      }
   }
} 
```

尖端：

1.  不要在 http 可以工作的地方使用 https，它在 avatar api 中工作。http更快。
2.  您不需要 access_token 来查询图形 api 的图片，它也可以在没有 access_token 的情况下工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:11:45.080

像这样进行 Graph API 调用，您将获得真实的 URL：

> https://graph.facebook.com/[fbid]?fields=picture

顺便说一句，您不需要访问令牌。

# java - 如何检测电池电量不足：Android？

> ID：13228849
> 
> 赞同：13
> 
> 时间：2012-11-05T09:02:19.690
> 
> 标签：java, android

当设备的电池电量不足时，我想关闭我的应用程序。我在清单中添加了以下代码。

```
 <receiver android:name=".BatteryLevelReceiver" 
         <intent-filter>
            <action android:name="android.intent.action.ACTION_BATTERY_LOW" />
            <action android:name="android.intent.action.ACTION_BATTERY_OKAY" />
        </intent-filter>
 </receiver> 
```

以及接收器中的以下代码

```
public class BatteryLevelReceiver extends BroadcastReceiver 
{

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Toast.makeText(context, "BAttery's dying!!", Toast.LENGTH_LONG).show();
        Log.e("", "BATTERY LOW!!");
    }
} 
```

我在模拟器上运行应用程序并使用 telnet 更改电池电量。它会更改电池电量，但不显示任何吐司或日志。

我错过了什么？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-05-14T19:20:42.267

您可以在 中注册您的接收器`AndroidManifest.xml`，但请确保您要过滤的操作是

**`android.intent.action.BATTERY_LOW`**

并不是

**`android.intent.action.ACTION_BATTERY_LOW`**

（您在代码中使用过）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-22T21:29:31.527

k3v 是正确的。

文档中实际上存在错误。它特别说使用`android.intent.action.ACTION_BATTERY_LOW`. 但是放入清单的正确操作是`android.intent.action.BATTERY_LOW` 在这里查看：http: [//developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

（无法投票给 k3v 的答案，没有足够的 StackOverflow 点东西......）

更新：我现在可以并且确实对 k3v 的回答进行了投票:-)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-05T09:07:40.293

在代码中注册您的接收器，而不是在`AndroidManifest`文件中。

```
registerReceiver(batteryChangeReceiver, new IntentFilter(
    Intent.ACTION_BATTERY_CHANGED)); // register in activity or service

public class BatteryChangeReceiver extends BroadcastReceiver {

    int scale = -1;
    int level = -1;
    int voltage = -1;
    int temp = -1;

    @Override
    public void onReceive(Context context, Intent intent) {
        level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
        scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
        temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1);
        voltage = intent.getIntExtra(BatteryManager.EXTRA_VOLTAGE, -1);
    }
}

unregisterReceiver(batteryChangeReceiver);//unregister in the activity or service 
```

`null`或者用接收器听电池电量。

```
Intent BATTERYintent = this.registerReceiver(null, new IntentFilter(
        Intent.ACTION_BATTERY_CHANGED));
int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
Log.v(null, "LEVEL" + level); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-12T19:45:17.000

使用**上下文寄存器注册**。如果您的目标是 Android 8.0 或更高版本，则不能使用清单声明的接收器。将此代码粘贴到您的主要活动中以进行注册。

```
 BroadcastReceiver receiver = new BatteryLevelReceiver();
        IntentFilter filter =new IntentFilter(BatteryManager.EXTRA_BATTERY_LOW);
        filter.addAction(Intent.ACTION_BATTERY_LOW);
        this.registerReceiver(receiver, filter); 
```

你很高兴 **PS**模拟器不应该处于充电状态

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-23T13:30:58.330

也许模拟器不响应`BATTERY_LOW`和`BATTERY_OKAY`消息。在真正的 Android 设备上试用。

# javascript - 在标签之间切换而无需重新加载

> ID：13228850
> 
> 赞同：3
> 
> 时间：2012-11-05T09:02:23.730
> 
> 标签：javascript, jquery, html, css, ajax

我在内容中有两个标签：*Comerciales - Legales*

这些选项卡中的每一个都应显示文件列表，就像现在显示的那样。

我想让它在用户单击**Legales**时隐藏**Comerciales**选项卡的文件并且该选项卡变为活动状态（获取活动类并将其从**Comerciales**中删除）并仅显示属于 Legales 的文件。

我尝试过隐藏和淡入，但我无法将活动类放到当前选项卡中。有人可以帮我吗？

这是我的标记：

```
 <ul class="pdf_documents clearfix">
            <li class="active"><a href="javascript:void(0)">Comerciales</a></li>
            <li><a href="javascript:void(0)">Legales</a></li>
        </ul>
        <div class="pdf_box">
            <div class="pdf_file">
                <img src="images/pdf.png" alt="pdf" width="70" height="70">
                <p>Ficha Técnica</p>
            </div>
            <div class="pdf_file">
                <img src="images/pdf.png" alt="pdf" width="70" height="70">
                <p>Ficha Descriptiva</p>
            </div>
            <div class="pdf_file">
                <img src="images/pdf.png" alt="pdf" width="70" height="70">
                <p>Último informe</p>
            </div>
            <div class="pdf_file">
                <img src="images/pdf.png" alt="pdf" width="70" height="70">
                <p>Informes anteriores</p>
            </div>
            <div class="pdf_file">
                <img src="images/pdf.png" alt="pdf" width="70" height="70">
                <p>Folleto completo</p>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:28:54.567

看到这个小提琴：http: [//jsfiddle.net/MrZdh/](http://jsfiddle.net/MrZdh/)

我为您的标记添加了更多类，以便更容易添加 jQuery 处理程序。

```
 <ul class="pdf_documents clearfix">
        <li class="tab-com active"><a href="javascript:void(0)">Comerciales</a></li>
        <li class="tab-leg"><a href="javascript:void(0)">Legales</a></li>
    </ul>
    <div class="pdf_box">
        <div class="pdf_file comerciales">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Ficha Técnica</p>
        </div>
        <div class="pdf_file legales">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Ficha Descriptiva</p>
        </div>
        <div class="pdf_file comerciales">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Último informe</p>
        </div>
        <div class="pdf_file legales">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Informes anteriores</p>
        </div>
        <div class="pdf_file comerciales">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Folleto completo</p>
        </div>
    </div> 
```

Legales 内容（由相应的类标记）默认通过 display:none 隐藏。

然后选项卡单击处理程序可能如下所示：

```
 $('.tab-com a').click(function(e){
        //make all tabs inactive
        $('.pdf_documents a').removeClass('active');
        //then make the clicked tab active
        $(this).addClass('active');    
        $('.pdf_box .legales').hide();
        $('.pdf_box .comerciales').show();
    });

    $('.tab-leg a').click(function(e){
        //make all tabs inactive    
        $('.pdf_documents a').removeClass('active');
        //then make the clicked tab active
        $(this).addClass('active');
        $('.pdf_box .comerciales').hide();
        $('.pdf_box .legales').show();
    }); 
```

或者是的，使用 kalpesh patel 的回答中的一些标签插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:20:50.390

由于您没有发布您的JS代码，我不知道您错在哪里：

我建议您可以使用 jqueryui 的选项卡：

[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

有许多示例演示如何实现选项卡。去谷歌上查询。

更多资源：

[http://www.jacklmoore.com/notes/jquery-tabs](http://www.jacklmoore.com/notes/jquery-tabs)

[http://jqueryfordesigners.com/jquery-tabs/](http://jqueryfordesigners.com/jquery-tabs/)

[http://www.apricot-studios.com/lab/jquery/jquery-tabs-tutorial.php](http://www.apricot-studios.com/lab/jquery/jquery-tabs-tutorial.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:24:57.547

如果你愿意使用一些已经存在的插件而不是尝试这个插件，你可以轻松地让它以你想要的方式工作，而且如果你想学习技巧，你也可以使用其中的代码。

希望能帮助到你。

[jquery 内容面板切换器](http://code.google.com/p/jquery-content-panel-switcher/)

# jquery - 未捕获的类型错误：对象 [对象对象] 没有方法“自动完成”

> ID：13228852
> 
> 赞同：5
> 
> 时间：2012-11-05T09:02:31.357
> 
> 标签：jquery, jquery-ui

我不断收到错误：Uncaught TypeError: Object [object Object] has no method 'autocomplete'。它工作正常，直到几天前，我似乎无法找到问题所在。似乎 jquery-ui 正在加载，所以我不明白为什么该方法不起作用。

我的代码：

```
<link href="css/redmond/jquery-ui-1.9.1.custom.css" rel="stylesheet">
<script src="js/jquery-1.8.2.js"></script>
<script src="js/jquery-ui-1.9.1.custom.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$(function() {
    $(function() {
        $( "#tags" ).autocomplete({
            source: "autocomplete_members.php?term="+ $("#tags").val()
        }).data( "autocomplete" )._renderItem = function( ul, item ) {
        var inner_html = '<a href="#" onclick="setId(\'' + item.id + '\');"><img src="' + item.img + '" width="40px" height="40px" style="vertical-align: middle;padding-bottom: 2px;padding-right: 4px;" />' + item.value + '</a>';
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append(inner_html)
            .appendTo( ul );
        };
    });
});

function setId(val){
    document.getElementById("member-id-text").value = val;
};
});
</script>

-------------------------------------------HTML-----------------------------------

<input id="tags" size="35"/>
<input type="hidden" name="member-id-text" id="member-id-text" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T13:20:57.943

我发现了问题。我在使用 JQuery 但不使用 JQueryUI 的页面上包含了一个标题，由于某种原因，这些冲突（仍然不完全确定为什么）包括标题中的 JQueryUI 脚本解决了这个问题。感谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:06:54.250

您可以删除标题或更改标题的位置，包括。

将您的标题放在文件的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T08:39:56.030

我也遇到了同样的问题，我换`<div id="header">`了`<div id="topheader">`。问题解决了。还是不知道怎么

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-18T18:54:40.737

试试这个：jQuery.noConflict();

# java - 使用 Spring 3.1.3 时 EclipseLink 2.4.1 抛出的 TransactionRequiredException

> ID：13228854
> 
> 赞同：3
> 
> 时间：2012-11-05T09:02:37.103
> 
> 标签：java, spring, jpa, eclipselink

我正在尝试设置以下组件：

*   EclipseLink 2.4.1
*   春天 3.1.3
*   玻璃鱼 3.1.2
*   Derby 嵌入式数据库

到目前为止，这些东西正在运行。但是一旦我想在我的 JPA 上下文中坚持一些东西，`TransactionRequiredException`就会抛出 a：

```
javax.persistence.TransactionRequiredException: 
Exception Description: No transaction is currently active
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionWrapper.throwCheckTransactionFailedException(EntityTransactionWrapper.java:113)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionWrapper.checkForTransaction(EntityTransactionWrapper.java:50)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.checkForTransaction(EntityManagerImpl.java:1776)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.flush(EntityManagerImpl.java:780)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
    at $Proxy439.flush(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    at $Proxy439.flush(Unknown Source)
    at backend.dao.StoredObjectDAO.save(StoredObjectDAO.java:39)
    at backend.service.StorageService.setObjectForKey(StorageService.java:35)
    at backend.controller.StoredObjectController.setObjectForKey(StoredObjectController.java:40)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:604)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:565)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680) 
```

事务管理器的设置如各种教程中所述，甚至 Eclipse 通过在 linenumber 窗格旁边使用相关图标指示切入点来识别 aspectj 编织。因为我正在使用`@Transactional`注释，所以我正确设置`<tx:annotaion-driven />`为“on”。

但是，我仍然遇到同样的异常。有人知道在使用这些图书馆时是否需要特定的设置吗？请在下面找到所有必要的文件。

谢谢，马努

* * *

## 更新

终于离开了 Spring 并使用了另一个堆栈：

*   Google Guice（依赖注入）
*   泽西岛（REST 库）
*   Eclipse 链接 (JPA)

我不得不继续，那个时候这个解决方案更加务实。也许再给春天一次机会。

无论如何，谢谢大家的所有投入！:-)

* * *

## applicationContext-jpa.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:load-time-weaver />
    <context:annotation-config />
    <tx:annotation-driven transaction-manager="transactionManager" />

    <import resource="applicationContext-dataSource.xml" />

    <bean id="jpaAdapter" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
        <property name="databasePlatform" value="org.eclipse.persistence.platform.database.DerbyPlatform" />
        <property name="showSql" value="true" />
    </bean>
    <bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter" ref="jpaAdapter" />
        <property name="persistenceXmlLocation" value="classpath:/META-INF/persistence.xml"/>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
        <property name="dataSource" ref="dataSource" />
        <property name="jpaDialect" ref="jpaDialect" />
    </bean>

    <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

</beans> 
```

## applicationContext-dataSource.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xsi:schemaLocation="http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <jee:jndi-lookup id="dataSource" jndi-name="jdbc/backend" />

</beans> 
```

## 持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="backend" transaction-type="JTA">
        <!-- 
            jta-data-source is only used for the IDE. Spring/Runtime uses the
            data source from applicationContext-dataSource.
        -->
        <jta-data-source>jdbc/backend</jta-data-source>

        <class>backend.model.StoredObject</class>

        <exclude-unlisted-classes>true</exclude-unlisted-classes>
    </persistence-unit>
</persistence> 
```

## StoredObjectDAO.java

```
@Repository
@Transactional
public class StoredObjectDAO implements IStoredObjectDAO {

    @PersistenceContext
    private EntityManager entityManager;

    @Override
    @Transactional(readOnly = true)
    public Collection<StoredObject> listAll() {
        TypedQuery<StoredObject> query = entityManager.createQuery("select s from StoredObject s", StoredObject.class);
        Collection<StoredObject> results = query.getResultList();
        return results;
    }

    @Override
    public void save(StoredObject storedObject) {
        entityManager.persist(storedObject);
        entityManager.flush(); // <---- throws Exception
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:12:30.257

如果您从服务类调用 DAO 方法，请避免注释 DAO 方法 @Transactional。而是将您的 Service 类方法注释为事务性的。这背后的原因是，您可能需要在一个事务下调用多个 DAO 方法。如果您的所有 DAO 方法都是事务性的，这可能会导致问题。因此，如果您将服务方法注释为事务性的，则可以在一个事务下调用任意数量的 DAO 方法。

如果发生任何异常，如果您注释服务类事务，则整个事务将被回滚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T07:35:16.657

缺少使用`readonly`属性和`propagation`模式。默认`propagation`模式是`REQUIRED`. 这就是为什么，您的编码将假设如下，

```
@Transactional(readOnly = true, propagation=Propagation.REQUIRED)
public Collection<StoredObject> listAll() {
    ......
} 
```

**Point** :使用传播模式 `readonly`时，连接会抛出异常。`REQUIRED`

**答：**如果您想使用`readonly`连接，`propagation`模式将是`SUPPORTS`。

```
@Transactional(readOnly = true, propagation=Propagation.SUPPORTS)
    public Collection<StoredObject> listAll() {
    ......
} 
```

供参考：[交易策略](http://www.ibm.com/developerworks/java/library/j-ts1/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T15:48:35.900

错误似乎 EclipseLink 正在使用 EntityTransactionWrapper 而不是 JTATransactionWrapper 我希望如果配置为使用 JTA，就像这篇文章中的情况一样： [Spring + Eclipselink + JtaTransactionManager = javax.persistence.TransactionRequiredException](https://stackoverflow.com/questions/6929309/spring-eclipselink-jtatransactionmanager-javax-persistence-transactionrequ)

您可能想要验证正在使用的persistence.xml 是否标记为JTA，并且是您显示的那个，因为它可能是另一个persistence.xml 在您的类路径中被拾取。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T09:24:20.407

当前没有交易处于活动状态？表示没有开始 entityTransacton

你能试一下吗

```
@Override
public void save(StoredObject storedObject) {
    entityManager.getTransaction().begin();
    entityManager.persist(storedObject);
    entityManager.flush(); // <---- throws Exception
} 
```

但是为开始和提交保留一个单独的方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-07T10:56:08.420

您不需要持久单元中的提供者吗？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-07T11:22:28.730

根据 Spring 文档

```
<tx:annotation-driven/> only looks for @Transactional on beans in the same application context it is defined in. 
This means that, if you put <tx:annotation-driven/> in a WebApplicationContext for a DispatcherServlet, it only checks for @Transactional beans in your controllers, and not your services. 
```

请验证，您已正确配置

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-09T00:22:08.767

根据[Spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)，它对默认值的描述如下：

> “tx:annotation-driven”元素上的“proxy-target-class”属性控制为使用@Transactional 注释注释的类创建什么类型的事务代理。如果 proxy-target-class 属性设置为 true，则创建基于类的代理。如果 proxy-target-class 为 false 或省略该属性，则创建基于标准 JDK 接口的代理。

由于您的案例是基于类的代理，因此您需要像这样添加此属性：

> tx:annotation-driven proxy-target-class="true" transaction-manager="transactionManager"

你甚至可以失去属性：

> 事务管理器="事务管理器"

因为它无论如何都是默认的......！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-04T07:11:25.793

如果您使用 transaction-type="JTA" 那么在 web 容器 ex: Tomcat 中，您需要使用 JOTM 来管理事务并在 Tomcat 和 Spring 中配置它。

而且，在文件 persistence.xml 中，您需要添加以下行：

```
 <properties>

<property name="eclipselink.target-server" value="org.eclipse.persistence.transaction.jotm.JotmTransactionController"/>

</properties> 
```

# javascript - 了解 JavaScript 中的 OOP

> ID：13228864
> 
> 赞同：1
> 
> 时间：2012-11-05T09:03:20.430
> 
> 标签：javascript, jquery

我对理解 javascript 面向对象的开发非常陌生。所以我正在阅读 jQuery 源代码并试图通过对我的自定义库实现相同的概念来理解，尽管目标不是复制代码，而是以 OOP 方式创建少数函数。这是我的代码..

```
(function (window) {
var myCustomClass = function () {
    debugger;
    return new myCustomClass.mycustomFunction.Init();
};
myCustomClass.mycustomFunction= myCustomClass.prototype = {
    Init: function () {
        return this;
    },
    alert: function () {
        alert('I got called');
    }
};
window.$ = window.mQuery = myCustomClass;
})(window); 
```

并尝试以这种方式使用：

```
 mQuery().alert(); 
```

但它给出了一个错误，我试图弄清楚但无济于事。我想，我缺少一些概念，请指引我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:15:44.393

查看 jQuery 源代码并尝试模仿它的概念不一定是开始您的 javascript OOP 学习曲线的好方法。我建议您从一些更简单的基础书籍开始，然后在尝试从源代码中理解一个相当复杂的库之前逐步提高。

如果您正在寻找一种从构造函数“ *jQuery 样式*”链接函数的方法，您可以尝试以下简单模式作为入门：

```
var myCustomClass = function() {
    // initialize a new instance
    if(!(this instanceof myCustomClass)) {
        return new myCustomClass();
    }
};
myCustomClass.prototype = {
    constructor: myCustomClass,
    // add some custom methods
    alert: function() {
        window.alert.apply(window, arguments);
        return this;
    },
    write: function(str) {
        document.body.innerHTML = str;
        return this;
    }
};

myCustomClass().alert('foo').write('bar'); 
```

​</p>

# .net - 如何创建flowdocument目录

> ID：13228869
> 
> 赞同：1
> 
> 时间：2012-11-05T09:03:35.987
> 
> 标签：.net, wpf, flowdocument, tableofcontents

我创建了一个流文档。如果文档被打印或保存到文件中，我想在文档的开头添加一个 TOC。

在流文档中创建 TOC 的正确方法是什么？它可以自动创建还是应该添加目录作为循环所有段落/部分的最后一件事并手动将它们添加到表中？如果手动创建是要走的下一个问题是如何确定段落/节所在的页码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:15:08.847

我没有找到自动执行此操作的方法。但以下工作：

1.  为 TOC 保留一个页面
2.  构建剩余的文档
3.  在保留页上插入 TOC 并循环遍历剩余部分并逐行生成 TOC。各部分的页码可使用`DynamicDocumentPaginator`

注意：如果 TOC 将跨越多个页面，则需要不止一次迭代。

# php - 使用 canvas.todataurl() 的 jQuery 帖子大小限制

> ID：13228870
> 
> 赞同：2
> 
> 时间：2012-11-05T09:03:45.667
> 
> 标签：php, jquery, canvas

我正在尝试使用 jQuery post 和 php 将 canvas.todataurl() 图像（getUserMedia）上传到服务器来处理数据，但我遇到了一些问题。我上传的所有图片最终都被损坏了，一半的图片丢失了。我还有一个 MySQL 数据库，用于存储与图像相关的数据（标题、文本、日期等）。似乎我拥有的相关数据越多，图像损坏的越多。

因此，我想知道这是浏览器限制还是与 jQuery post 有关。我还检查了 PHP max_post_size，它是 16mb，所以这应该不是问题。我无权访问服务器设置。我对此感到很困惑，我该怎么办？是否可以将 canvas.todataurl() 划分为多个部分然后发布？

JavaScript

```
window.addEventListener('DOMContentLoaded', function() {

var video = document.getElementById('videoStream');
var canvas = document.getElementById('canvasImage');
var status = document.getElementById('status');
var button = document.getElementById('button');
//var others = document.getElementById('others');
var imageHolder;
document.getElementById('form').style.display = 'none';
var image = null; //  kuvan datauri joka lähtee php:lle

window.URL || (window.URL = window.webkitURL || window.mozURL || window.msURL); 
navigator.getUserMedia || (navigator.getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia);

// toString : function() {return "video,audio";} canarya varten
if (navigator.getUserMedia) {
    navigator.getUserMedia({video: true, audio: false, toString : function() {return "video,audio";}}, onSuccess, onError);
} else {
    status.innerText = "getUserMedia is not supported in your browser, sorry :(";
}

function onSuccess(stream) {

    var source;
    if (window.webkitURL) {
        source = window.webkitURL.createObjectURL(stream);
    } else {
        source = stream; // Opera ja Firefox
    }

    video.width = 500;
    video.height = 375;
    video.autoplay = true;
    video.src = source;

}

function onError() {

    status.innerText = "Please allow access to your webcam.";

}

button.addEventListener('mousedown', function() {

    // Poistetaan aikaisempi kuva jos sellaista on
    //document.body.removeChild(imageHolder);

    // luodaan kuva uudestaan
    imageHolder = document.createElement('figure');
    imageHolder.id = 'imageHolder';
    document.body.appendChild(imageHolder);
    img = document.createElement('img');
    imageHolder.appendChild(img); 

    // kuva on yhtäsuuri kuin video
    canvas.width = video.width;
    canvas.height = video.height;
    img.width = 350;
    img.height = 225;

    // piirretään canvasille kuva videosta
    var context = canvas.getContext('2d');
    context.drawImage(video, 0, 0, canvas.width, canvas.height);

}, false);

button.addEventListener('mouseup', function() {      
    // Canvasilta kuvaksi levylle tallentamista varten
    canvas.style.display = 'none';
    video.style.display = 'none';
    button.style.display = 'none';
    others.style.display = 'none';
    document.getElementById('form').style.display = 'block';
    image = canvas.toDataURL('image/png');
    img.src = image;
}, false);

// jquery post
$('#send').click(function(){
    var image2 = image.replace('data:image/png;base64,', '');
    $.post('upload.php',
    {
            title: $('#title').val(),
            blog: $('#blog').val(),
            category: $('#category').val(),
            author: $('#author').val(),
            imagename: image2
    });
});

}, false); 
```

PHP上传.php

```
define('UPLOAD_DIR', 'images/');
$img = $_POST['imagename'];
$img = str_replace(' ','+', $img);
$data = base64_decode($img);
$file = UPLOAD_DIR . uniqid() . '.png'; 
$success = file_put_contents($file, $data);
print $success ? $file : 'Tiedoston tallennus ei sitten onnistu millään...';
$imagename = $file; // this is the file name for the MySQL database 
```

我的问题是（我认为） image = canvas.toDataURL('image/png'); 和 jQuery 帖子。canvas.toDataUrl() 字符串大约有 700 000 个字母长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:22:51.180

你可能想试试这个：

```
<?php 
$decoded = ""; 
for ($i=0; $i < ceil(strlen($encoded)/256); $i++) 
   $decoded = $decoded . base64_decode(substr($encoded,$i*256,256)); 
?> 
```

我从这里得到它：[http ://www.php.net/manual/en/function.base64-decode.php#92980](http://www.php.net/manual/en/function.base64-decode.php#92980)

该代码基本上尝试对base64 字符串进行*部分解码。*我还没有测试过这个。我从来没有处理过像你正在使用的那样大的 base64 图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T06:14:40.260

拆分它，使用两个变量并在 php 中合并，工作正常。;-)

```
var resourcelength_all = resource.length;
var resourcelength_split = resourcelength_all / 2;
var resource_part1 = resource.substr(0, resourcelength_split);
var resource_part2 = resource.substr(resourcelength_split, resourcelength_all); 
```

# mysql - 将 CASE WHEN 与 GROUP BY 一起使用

> ID：13228875
> 
> 赞同：1
> 
> 时间：2012-11-05T09:04:11.717
> 
> 标签：mysql, sql, group-by, case

背景：我正在尝试显示一个带有标题的表格：id、full_name、position_7、position_8、position_9...等如果一个人是 7 月和 8 月的在职员工，那么 2012_Jul 和 2012_Aug 将显示在 position_7 和 8在一条线上。如果我不使用 GROUP BY，我会得到输出但只有 2 行。发生这种情况的原因是因为在 BLMths 表中，由于受雇超过 1 个月，一个人将有多个条目。

下面的查询将成功获取每个人的 id、full_name 和月份……如果我不使用 GROUP BY。但问题是，如果我忽略使用 GROUP BY，我的表中的每个人都会有 4 行（或更多行）。当我确实使用 GROUP BY 时，我希望为每个人输出 1 行，但我需要的表中的数据并不全部存在。

有谁知道我做错了什么？或者有谁知道为什么当我使用 GROUP BY 时，我的一些 CASE 语句中的数据似乎丢失了？

我知道这个问题的答案必须很简单，但我似乎无法解决它。任何帮助表示赞赏。提前谢谢了。

```
SELECT Blm.Ags, Blmths.Id, Ie.Full_Name, Blmths.Month,
       CASE month
       WHEN "2012-07-01" THEN 1
           ELSE NULL
       END AS Position_7,
       CASE month
       WHEN "2012-08-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_8,
       CASE Blmths.Month
       WHEN "2012-09-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_9,
       CASE month
       WHEN "2012-10-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_10,
       CASE Blmths.Month
       WHEN "2012-11-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_11,
       CASE Blmths.Month
       WHEN "2012-12-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_12,
       CASE month
       WHEN '2013-01-01' THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_1,
       CASE month
       WHEN "2013-02-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_2,
       CASE month
       WHEN "2012-03-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_3,
       CASE Blmths.Month
       WHEN "2013-04-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_4,
       CASE Blmths.Month
       WHEN "2013-05-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_5,
       CASE Blmths.Month
       WHEN "2013-06-01" THEN Date_Format(Blmths.Month, '%Y_%b')
           ELSE NULL
       END AS Position_6
  FROM Bogus_Leadership_Months AS Blmths, Injection_Employees AS Ie,
Bogus_Leadership_Members AS Blm
  WHERE Blmths.Id = Blm.Id
    AND Ie.Ags = Blm.Ags
    AND Ie.Centre_Id = '666'
  GROUP BY Blm.Ags 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:56:11.460

你需要更具体。这是针对什么数据库？它以什么方式不起作用？是发生错误还是没有返回您需要的结果？'我需要的表中的数据并非全部存在' 是什么意思？

如果每人有多个记录会发生什么，您希望如何**聚合**数据？

我猜你*可能*想要这些方面的东西（缩短）：

```
SELECT Blm.Ags, Blmths.Id, Ie.Full_Name,
   SUM(CASE Blmths.month
   WHEN "2012-07-01" THEN 1
       ELSE NULL
   END) AS Position_7
FROM Bogus_Leadership_Months AS Blmths, Injection_Employees AS Ie,
Bogus_Leadership_Members AS Blm
  WHERE Blmths.Id = Blm.Id
    AND Ie.Ags = Blm.Ags
    AND Ie.Centre_Id = '666'
  GROUP BY Blm.Ags, Blmths.Id, Ie.Full_Name 
```

这按月给出了那个人的统计数据。

我看不到您所追求的数据示例-您可以重新发布吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:19:35.897

```
 SELECT max(Blmths.Id), Ie.Full_Name, Blmths.Month,Blm.Ags FROM 
    (SELECT Blm.Ags,Blmths.Id, Ie.Full_Name, Blmths.Month 
    CASE month
           WHEN "2012-07-01" THEN 1
               ELSE NULL
           END AS Position_7,
           CASE month
           WHEN "2012-08-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_8,
           CASE Blmths.Month
           WHEN "2012-09-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_9,
           CASE month
           WHEN "2012-10-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_10,
           CASE Blmths.Month
           WHEN "2012-11-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_11,
           CASE Blmths.Month
           WHEN "2012-12-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_12,
           CASE month
           WHEN '2013-01-01' THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_1,
           CASE month
           WHEN "2013-02-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_2,
           CASE month
           WHEN "2012-03-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_3,
           CASE Blmths.Month
           WHEN "2013-04-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_4,
           CASE Blmths.Month
           WHEN "2013-05-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_5,
           CASE Blmths.Month
           WHEN "2013-06-01" THEN Date_Format(Blmths.Month, '%Y_%b')
               ELSE NULL
           END AS Position_6
      FROM Bogus_Leadership_Months AS Blmths, Injection_Employees AS Ie,
    Bogus_Leadership_Members AS Blm
      WHERE Blmths.Id = Blm.Id
        AND Ie.Ags = Blm.Ags
        AND Ie.Centre_Id = '666') AS GRPBYCOL 
   GROUP BY  Ie.Full_Name, Blmths.Month,Blm.Ags,GRPBYCOL 
```

# wpf - OpenTK、SharpGL 和 WPF

> ID：13228878
> 
> 赞同：12
> 
> 时间：2012-11-05T09:04:18.037
> 
> 标签：wpf, opengl, graphics, opentk

我即将开始一个新项目。有些决定是我无法控制的：其中一些是使用 WPF 和 OpenGL。

但是，我已将 OpenGL 选项缩小到两个：OpenTK 或 SharpGL。SharpGL 有一个 WPF 控件，而 OpenTK 只有一个 Windows 窗体控件，这使得我必须将它嵌入到 Windows 窗体主机中：-/ 虽然我不介意空域限制，但我确实希望有不错的性能，因为我正在构建一个实时应用程序。不是游戏，但仍然是实时的。

在 Windows 窗体主机上使用 OpenTK 与使用带有“纯”WPF 控件的 SharpGL 相比，我的程序会对性能造成多大影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T09:22:51.900

说到性能，我其实只能给你一个答案：自己做一个基准测试！但是，当您要求进行详尽的猜测时：

SharpGl*需要*的间接步骤更少，因为它将 Windows 窗体主机控件作为“中间”blitting 目标。不过，对此持保留态度，我既没有查看源代码，也没有自己测试过。

但实际上：性能应该非常相似。归根结底，计算繁重的操作可能是渲染本身，这是由 OpenGL 完成的。Blitting 完成的结果应该只需要一小部分时间。所以我希望，无论你如何决定，这些选项都不会真正影响你的表现。

为了论证：让我们假设渲染本身（OpenGL 部分）需要 16 毫秒，所以我们的理论性能约为 60 FPS。框架 A 增加了 1 毫秒的开销，框架 B 增加了 4 毫秒的开销。即使在开销上有这么大的差异，框架 a 的渲染速度约为 58 FPS，而框架 B 的渲染速度约为 50 FPS。因此，在这两种情况下，应用程序都应该保持可用。

但令我困惑的是你对这方面有多少疑惑。最后，您正在使用 OpenGL 进行工作，如果事情变糟，简单地切换底层实现应该不会太麻烦？界面对我来说似乎并没有太大的不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T15:20:09.900

我会说使用 OpenTK，或者如果您使用 SharpGL 更舒服，那么在 Winforms 模式下使用它并将其嵌入到 WPF 应用程序中。

原因是 OpenGL 驱动程序知道如何使用随每个 winforms 控件提供的窗口句柄。在 WPF 应用程序中，只有一个窗口句柄，即主窗口之一。您可以尝试使用它，但我认为它会带来太多问题。

如果您不希望将事物直接渲染到屏幕上，并且您考虑使用 PixelBufferObject 或 RenderBufferObject，那么您可能会在 WPF 模式下使用 SharpGL（它渲染到 RenderBufferObject，然后将生成的缓冲区放在图像，可能使用 WritableBitmap 左右），或者您可以自己做同样的事情。

# spring - 我想使用spring security处理数据库连接异常

> ID：13228879
> 
> 赞同：1
> 
> 时间：2012-11-05T09:04:18.373
> 
> 标签：spring, exception, servlets, spring-security

我收到以下错误：-**登录错误。原因：无法获取 JDBC 连接；嵌套异常是 com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown database 'dbname'**当我尝试连接错误的数据库时。但我想处理该异常并想显示一些自定义消息。

这是我的配置文件：- **Spring-security.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!--<http pattern="/abc/**" security="none" /> -->

    <http auto-config="true" use-expressions="true">

        <intercept-url pattern="/admin*" access="hasRole('SYS_ADMIN')" />
        <intercept-url pattern="/cab-stop-admin*" access="hasAnyRole('SYS_ADMIN','CABSTOP_ADMIN')" />
        <intercept-url pattern="/driver*" access="hasAnyRole('DRIVER','SYS_ADMIN','CABSTOP_ADMIN')" />
        <intercept-url pattern="/customer*" access="hasAnyRole('CUSTOMER','SYS_ADMIN','CABSTOP_ADMIN')" />

        <form-login login-page="/login" default-target-url="/role-check"
            authentication-failure-url="/login?error=true" />
            <remember-me key="_spring_security_remember_me"/>
        <logout logout-success-url="/login" />

         </http> 

         <authentication-manager> 
        <authentication-provider> 
        <password-encoder hash="md5"  />
        <jdbc-user-service data-source-ref="fmsDataSource"  
        users-by-username-query="select Username,Password, 'true' as enabled from login_details where Username=?"
        authorities-by-username-query="select u.Username, ur.Role_Name from login_details u, role_master ur where u.Role_Master_Id = ur.Role_Master_Id and u.Username =? " />
    </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

**登录.jsp**

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ page contentType="text/html;charset=UTF-8"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<jsp:include page="header.jsp" />

<html>
<head>
<title><spring:message code="message.home" /></title>
</head>

<body>
<c:if test="${not empty param.error}">
    <font color="red"><br /> Login error. 
    Reason : ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message} </font>

</c:if>
<form  name="loginForm" onsubmit="return validateForm();">
<h1><spring:message code="message.login" /></h1>
<table>
    <tr>
        <td align="right"><spring:message code="message.username"
            text="default text" /></td>
        <td><input type="text" name="j_username" id="j_username" autofocus="autofocus"/></td>
    </tr>
    <tr>
        <td align="right"><spring:message code="message.password"
            text="default text" /></td>
        <td><input type="password" name="j_password" /></td>
    </tr>

    <tr>
        <label  for='_spring_security_remember_me'>
                        Remember me:
                        <input type='checkbox' name='_spring_security_remember_me' value="on"/>
    </tr>

    <tr>
        <td colspan="2" align="right"><input type="submit"
            value="<spring:message code="message.login" />" /></td>
        <td colspan="2" align="right"><a href="<%=request.getContextPath()%>/customer/register"><spring:message
            code="message.register" text="default text" /></a></td>
    </tr>
    <tr>
        <td colspan="2" align="right"><a href="<%=request.getContextPath()%>/forgot-password"><spring:message
            code="message.forgotpassword" text="default text" /></a></td>
    </tr>
</table>
</form>
</body>
<jsp:include page="footer.jsp" />
</html> 
```

**休眠配置.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:p="http://www.springframework.org/schema/p"
     xmlns:context="http://www.springframework.org/schema/context"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
     http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
     http://www.springframework.org/schema/tx
     http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
     http://www.springframework.org/schema/aop 
     http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

    <context:component-scan base-package="com.cabfms.dao"/>

  <!-- enable the configuration of transactional behavior based on annotations -->
  <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="fmsDataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        p:driverClassName="${db.driverClassName}" p:url="${db.url}"
        p:username="${db.username}" p:password="${db.password}" />

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="fmsDataSource" />
        <property name="packagesToScan" value="com.cabfms.entities" />
        <property name="hibernateProperties">

            <props>
                <prop key="hibernate.format_sql">true</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="javax.persistence.validation.mode">none</prop>
            </props>
            <!--<props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="javax.persistence.validation.mode">none</prop>
                <prop key="hibernate.current_session_context_class">${hibernate.current_session_context_class}</prop>
                <prop key="hibernate.connection.pool_size">${hibernate.connection.pool_size}</prop>
                <prop key="hibernate.c3p0.min_size">${hibernate.c3p0.min_size}</prop>
                <prop key="hibernate.c3p0.max_size">${hibernate.c3p0.max_size}</prop>
                <prop key="hibernate.c3p0.timeout">${hibernate.c3p0.timeout}</prop>
                <prop key="hibernate.c3p0.max_statements">${hibernate.c3p0.max_statements}</prop>
                <prop key="hibernate.c3p0.idle_test_period">${hibernate.c3p0.idle_test_period}</prop>

            </props>

        --></property>
    </bean>

      <!--Transaction Manager Added -->  
    <bean id = "transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name = "sessionFactory" ref = "sessionFactory" />
</bean>

</beans> 
```

**web.xml**

```
<web-app>

    <display-name>Web Application</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/dispatcher-servlet.xml,
            /WEB-INF/hibernate-config.xml,
            /WEB-INF/spring-security.xml,
            /WEB-INF/application-context.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <!-- Spring MVC -->
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <!--<url-pattern>/services/*</url-pattern> -->
        <!--<url-pattern>/views/*</url-pattern> -->
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping><!--

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

-->
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/error-page</location>
</error-page>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:45:13.613

您可以让您的应用程序容器处理此类异常。

应用程序中未捕获的异常可以转发到部署描述符 ( `web.xml`) 中定义的错误页面。

```
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/error</location>
</error-page> 
```

您只需要输入您想要处理的异常类型和在应用程序错误时将用户转发到的位置。

请记住让匿名用户可以看到此错误页面，以防在成功验证之前发生错误。

```
<sec:intercept-url pattern="/error" access="permitAll"/> 
```

# sql - 数据库中的类别实现

> ID：13228880
> 
> 赞同：1
> 
> 时间：2012-11-05T09:04:21.357
> 
> 标签：sql, mongodb, database-design, nosql

我正在构建一个涉及用户和教师的系统。然而，在这个特定的系统中，我想对教师进行分类，但棘手的部分是类别是动态的，因此它们可以随时更改。

我必须有一些功能，因为我正在开发后端；

*   第一个是**showAllCategories()**，它显示所有**主要**类别。
*   其次是**showSubcategories()**显示 category() 的子类别
*   第三个是**showContent()**，在这种情况下显示教师的信息。

在询问强大的 Stack-Overflowers 如何有效实施之前，我想我可以使用双向链表方法，在类别表**CategoryName**、**Before**、**After**、**Content**中，如果类别没有之后，内容将指向老师的桌子。这是我的经典 SQL 方法，但是我使用的是**MongoDB**，由于我是初学者，我想知道在这种特殊情况下是否可以利用 NoSQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:17:21.890

MongoDb 原生支持 Array 类型，它的行为实际上更像一个列表。使用[`$push`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24push)and[`$pull`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pull)您可以在这样的数组字段中添加和删除元素。[`$addToSet`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24addToSetand%24each)甚至确保没有重复。

现在是如何存储类别的问题。您可以使用主要类别制作一个集合`categories`，它们将有一个字段，每个字段都包含子类别的数组：

```
{"_id": "science", "sub": ["chemist", "physicist", "biology"]}
{"_id": "languages", "sub": ["english", "german", "spanish"]} 
```

`teacher`另一方面，您的集合将包含一系列嵌入式文档，即教师的类别。它们是`categories`集合中的重复项，减去了教师视图中不需要的字段。这样可以避免连接，因为它们在 MongoDB 中不存在。

```
{
 "_id": ObjectId(...),
 "name": {"first": "Foo", "last": "Bar"},
 "categories": ["chemist", "biology"]
} 
```

其余的我相信你可以想出来。

**补充：**总之，使用MongoDB提供的灵活类型，不用担心数据冗余。经常嵌入文档，不要忘记索引。

# jakarta-ee - 我可以将 Liferay 用作内容管理系统 (CMS) 吗？

> ID：13228881
> 
> 赞同：1
> 
> 时间：2012-11-05T09:04:27.910
> 
> 标签：jakarta-ee, content-management-system, liferay

有一个很老的网站是用一个封闭的内容管理系统（CMS）编写的。此系统不再受支持。我想重写这个网站。因为它现在无法扩展并且有很多错误。

显然，这个系统不好。

我想使用Liferay。

我知道 Liferay 允许用户使用 portlet 通过单个站点配置对不同应用程序的访问。

我对这个功能感兴趣 -

*   创建内容的工具；
*   组织内容方面的联合工作；
*   管理内容：存储、版本控制、依从性访问、流量控制工具；
*   ...
*   发布内容；
*   以适合导航、搜索的形式呈现信息；

等等

即所有的东西，允许许多内容管理系统（CMS）。我可以将 Liferay 用作内容管理系统 (CMS) 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:45:27.110

Liferay 的核心是一个通用的portlet 容器。它组织了页面，在这些页面上显示了 portlet。它管理身份验证、安全性等。

Liferay 带有预制的portlet 来管理Web 内容：它是*Journal* portlet。[请参阅文档中](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/using-liferay-web-content-manageme-1)的相应部分。它支持版本控制、国际化、模板化、基于角色的安全性、工作流。

它涵盖了您描述的需求领域。我不知道它是否涵盖了您的*确切要求，因为它们不是很精确（如上所述，这些只是要求的“领域”）。*

在内部，Liferay 使用可以通过编程或多或少轻松访问的服务。内容存储在数据库中。文档通过称为“FileSystemHook”的一层抽象存储。因此，文件可以存储在文件系统中，或者 JCR 存储库中，或者（可能）存储在数据库本身中。JCR 是管理内容的标准，如果使用这个选项，我想它也可以通过某些接口访问。

所有这一切都使 Liferay 成为一个非常可扩展的开箱即用或定制开发平台，但它也有复杂性的成本。

*PS：过去两年我没有积极使用Liferay，所以其中一些信息可能已经过时了。*

# php - 如何在ajax页面刷新时重新声明变量

> ID：13228891
> 
> 赞同：0
> 
> 时间：2012-11-05T09:05:11.510
> 
> 标签：php, javascript, ajax, symfony, slideshow

我的页面中有几个不同的地方我渲染它以设置这样的变量

```
<script>
videoContent[{{ ordernumber }}]='video={{ c.data[0] }}&height={{ c.data[1] }}&width={{ c.data[2] }}&codec={{ c.data[3] }}&fullscreen={{ data5 }}';
</script> 
```

我的问题是我用ajax刷新了整个页面，当我这样做时，这段代码不再执行。我不能真正为脚本块设置一个 id，因为其中许多块将被循环出，我不知道要调用哪一个 eval()。

我可以以某种方式将此声明附加到像“myDeclarationObject”这样的函数或对象，然后在该对象上调用 eval() 以及页面刷新吗？

我知道我可以学习 javascript 的具体细节，但我的时间很短，如果你单枪匹马开发一个应用程序，你需要学习很多东西 =)

更多示例代码...

```
<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'>
<head>
  <title>$title</title>
  <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
  <script src="/symfony/web/script/jquery-1.8.2.min.js" type='text/javascript'></script>
  <script src="/symfony/web/script/slideshow.js" type='text/javascript'></script>
  <script type='text/javascript'>
  /* set globals */
  var newContent = 'blank';
  var currentUri = '/symfony/web/app.php/Screen/showContainer/39';
  /* fire the slideshow from slide 1 once document is finished loading */
  $(document).ready(function(){
    console.log('start of slideshow');
    slideshow(1);
  </script>
</head>
<body id="slideshow_body">
  <script id='pauseTimesScript' type='text/javascript'>
  /* initialize the array to keep track of which slides have videocontent */
  try {
        videoContent=null;
        videoContent=undefined;
        videoContent = new Array();         
        /*alert('satte först till null, deklarerade sedan om.');*/
  } catch(e) {
        videoContent = new Array();         
        /*alert('deklarerade utan att först sätta null.');*/
  }
  /* Define pauseTimes (array holding duration of each slide) */
  try {
        pauseTimes=null;
        pauseTimes=undefined;
        pauseTimes = new Array();   
        setPauseTimes();        
        /*alert('satte först till null, deklarerade sedan om.');*/
  } catch(e) {
        pauseTimes = new Array();   
        setPauseTimes();        
        /*alert('deklarerade utan att först sätta null.');*/
  }
  /* This function sets pausetimes as well as initializes the array for videocontent */
  function setPauseTimes() {  
    pauseTimes[1]=2000;
    videoContent[1]=null;
    pauseTimes[2]=15000;
    videoContent[2]=null;
    pauseTimes[3]=2000;
    videoContent[3]=null;
    pauseTimes[4]=2000;
    videoContent[4]=null;
    pauseTimes[5]=1000;
    videoContent[5]=null;
    pauseTimes[6]=0;
    videoContent[6]=null;
  }
  </script>
  <div id="avbrott">
    Tillfälligt avbrott, visar cachelagrat innehåll sedan 2012-11-05 10:23:31
  </div>
  <div id="canvas">
    <div class="slide" id="slide1">
      <div id="slide_bg">
      <div id="preview_title">
        Egypt rocks!
        </div>
        <div></div>
        <p id="preview_data_6">Lorem ipsum
        dolor sit amet, consectetur adipiscing elit. Suspendisse feugiat
        pharetra eros, vitae ullamcorper tellus condimentum sit amet.
        Pellentesque habitant morbi tristique senectus et netus et malesuada
        fames ac turpis egestas. Suspendisse in leo erat. Aliquam interdum
        molestie tortor, nec lacinia mauris viverra eget. Suspendisse aliquam
        tempor scelerisque. Proin vel purus nunc. Pellentesque ut sapien
        libero.<br /></p>
      </div>
    </div>
    <div class="slide" id="slide2">
      <div id="slide_bg">
      <img src="/symfony/web/style/images/ajax-loader3.gif"  /></div>
      <div id="no_preview_text"></div>
            <script id="videoContentScript2">
      videoContent[2]='video=video.avi&height=800&width=600&codec=h264&fullscreen=0';
      </script>
    </div>
    <div class="slide" id="slide3">
      <div id="slide_bg">
      <div id="preview_title">
        info
        </div>
        <div></div>
        <p id="preview_data_6">In ornare
        fringilla convallis. In cursus pellentesque elit a iaculis. Fusce
        rutrum rutrum neque quis molestie. Fusce id lacus in est iaculis
        eleifend venenatis eget ante. Sed eget augue sed nisl scelerisque
        fermentum eget at arcu. Donec placerat turpis non sapien scelerisque
        tempus. Etiam imperdiet urna sit amet nulla convallis a facilisis dui
        scelerisque. Ut sed eros a velit venenatis lacinia ut id risus. Duis
        aliquam augue in erat malesuada ut eleifend justo condimentum. Praesent
        quis urna nisl. Vestibulum suscipit tincidunt nisl id tincidunt. Nunc
        ac ante sed lectus scelerisque blandit. Fusce ultrices, nulla nec
        porttitor dapibus, tellus libero fringilla odio, semper tincidunt
        mauris velit eu augue. Duis ut massa sed nibh auctor malesuada id eget
        ipsum.</p>
      </div>
    </div>
    <div class="slide" id="slide4">
      <div id="slide_bg">
      <div id="preview_title">
        Lite lek
        </div>
        <div></div>
        <p id="preview_data_6">Morbi ac
        rhoncus velit. Nunc blandit urna eu mi tempus volutpat. Quisque vel
        eros tortor. Sed fringilla, magna sit amet luctus imperdiet, urna
        libero dapibus nulla, in facilisis sapien ante nec ipsum. Maecenas
        suscipit orci nec turpis iaculis porttitor. Proin blandit tortor a
        magna porttitor malesuada. Sed porta quam sodales est sollicitudin
        vitae mattis quam consequat. Cum sociis natoque penatibus et magnis dis
        parturient montes, nascetur ridiculus mus. Ut eget accumsan ligula.
        Fusce a urna in diam sollicitudin ullamcorper. Donec et tellus quis
        justo scelerisque fermentum. Nunc molestie malesuada odio laoreet
        fermentum. Proin vel vestibulum nunc. Aliquam odio sem, elementum vel
        bibendum sit amet, ullamcorper quis tortor. Donec tempus massa
        pellentesque metus ornare eget laoreet enim porta. Nullam facilisis
        tempus neque vitae bibendum.</p>
      </div>
    </div>
    <div class="slide" id="slide5">
      <div id="slide_bg">
      <div id="preview_title">
        Feel the rythm
        </div>
        <div></div>
        <p id="preview_data_6"><br />
        <br />
        <br />
        <br />
        The rythm of the night =p</p>
      </div>
    </div>
    <div class="slide" id="slide6">
      <div id="slide_bg">
      <div id="preview_title">
        skipme
        </div>
        <div></div>
        <p id="preview_data_6">skipme</p>
      </div>
    </div>
  </div>
</body>
</html> 
```

您可能会注意到，每个 id 为 slide1、slide2 等的 div 都是根据某个模板循环出来的。除了 slide2 之外的所有幻灯片都是模板类型，没有我所说的这个脚本块，但是 slide2 有，而且可能还有更多。

有没有一种将这些数据放入的好方法，而不是像我在这里那样渲染一个脚本块？

在我初始化数组 videoContent 并用空值声明它时，页面还不知道它将用这个值填充数组的 number2。

这是幻灯片和 ajaxUpdate 脚本：

```
/* The actual slideshow function (calling itself for each new slide) */
function slideshow(slide) {

    if(pauseTimes[slide]==null) {
        console.log('no slide defined, so update the whole thing');
        ajaxUpdate();
    }
    else if (pauseTimes[slide]==0) {
        console.log('pauseTime is zero so move to next slide');
        slideshow(slide+1);
    }
    else if (pauseTimes[slide]>0) {
        /* if there is another slide after the one currently showing... */
        skip=0; //wheather to skip this slide
        //check for video stuff
        if(videoContent[slide] != null) {

            if (parent.xPos) {
                myXpos = Math.round(parent.xPos)
            }
            else {
                myXpos = 0;
            }

            if (parent.yPos) {
                myYpos = Math.round(parent.yPos)
            }
            else {
                myYpos = 0;
            }           

            //These position variables are set by a script in screen_base.html.twig
            positionString = '&x=' + myXpos + '&y=' + myYpos;

            //the videoContent[slide] is populated from the template for the video slide
            videoCallstring = 'http://127.0.0.1/index.php?' + videoContent[slide] + positionString;

            //call by ajax:
            window.skip=1;
            jQuery.ajax({
                 url:    videoCallstring,
                 success: function(result) {
                        window.skip=1;
                             /*
                              if(result.isOk == false) {
                                  alert(result.message);
                              }
                              else {
                                  alert("success =)");
                              }
                              * */
                        },
                 async:   false
            });             
        }
        else {
            //do nothing
        }       

        if (skip == 1) {
            slideshow(slide+1);
        }
        else {
            $('#slide'+slide).
            fadeIn(1500,function(){}).
            delay(pauseTimes[slide]).
            fadeOut(1500,function(){slideshow(slide+1);});
        }
    }
}

    /* The update routine at the end of each slideshow */
function ajaxUpdate() {

    //Load current uri again asynchroneously

    var jqxhr = $.get(currentUri)
      .success(function(data) {

            newContent = data; 

            //make sure we got the end token (</body>) so that our transmission wasn't interrupted in the middle of the request
            endtoken_test = newContent.search('</body>');

            //strip of everything before starttoken (<body>)
            newContent = newContent.substring(newContent.indexOf('<body id="slideshow_body">') +26 );

            //strip of everything after endtoken (</body>)
            newContent = newContent.slice(0, newContent.lastIndexOf("</body>"));

            if (endtoken_test != -1) {
                //We found the endtoken which means the whole page was returned

                //replace the innerHTML of body with the new stuff
                document.getElementById('slideshow_body').innerHTML=newContent;

                //Ta bort skylten om tillfälligt avbrott (om den visades)
                document.getElementById('avbrott').style.display = 'none';

                //update the pausetimes
                ie_compatible_eval(document.getElementById('pauseTimesScript').innerHTML)

                //update the videoContents
                /* Loop out the scriptblocks in a try/catch way, loop until max number in pauseTimes is reached */

                //run the slideshow anew
                slideshow(1);
            }
            else {      
                /* if no content (or at least not all of it) could not be downloaded from server */
                document.getElementById('avbrott').style.display = 'block';
                slideshow(1);
            }

      })
      .error(function() {

            newContent = 'blank'; 

            /* if no content (or at least not all of it) could not be downloaded from server */
            document.getElementById('avbrott').style.display = 'block';
            slideshow(1);

      });   

}

/* eval() som även funkar i explorer, används för att uppdatera paustiderna */

function ie_compatible_eval(code) {
    var dj_global = this; // global scope reference

    if (window.execScript) {
        window.execScript(code); // eval in global scope for IE
        return null; // execScript doesn’t return anything
    }

    return dj_global.eval ? dj_global.eval(code) : eval(code); //eval för andra browsers
} 
```

Servreside 是一个 symfony2 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:03:44.583

我的幻灯片中有几张不同的幻灯片，我在其中渲染它以设置这样的变量

```
<script>
//define the function for later use (page updates)
function videoContentUpdate1() {    
    videoContent[1]='video={{ data0 }}&height={{ data1 }}&width={{ data2 }}&codec={{ data3 }}&fullscreen={{ data5 }}';
}
//run it the first time (later on this will not run it by itself, we have to call the function specifically.
videoContentUpdate1();
</script> 
```

当我的页面使用 ajax 刷新时，我使用此代码在每次刷新整个页面（幻灯片）时重新运行 videoContentUpdateX()：

```
 //update the videoContents
            for (var i=1;i<(pauseTimes.length+1);i++)
            { 
                try {
                    var x = window['videoContentUpdate'+i];
                    x();
                }
                catch(e) {
                    //do nothing since we will not have a function named that for every slide, error is expected
                }
            } 
```

我不知道这是否是一种好方法，但它工作正常=）

# java - 拆分字符串java返回值

> ID：13228892
> 
> 赞同：0
> 
> 时间：2012-11-05T09:05:12.627
> 
> 标签：java, arrays, string, split

我正在寻找一种方法来实现以下问题。

从一个字符串开始我尝试返回一个字符串[]等于

```
new String[]{Q},{ec.Qh},{ec.Q2} 
```

有人有什么建议吗？

至今：

```
 String a="Q={{ec.Qh}{ec.Q2}}";

    int index_first = a.indexOf("="); 
    String name= a.substring(0,index_first); 
    String temp=a.substring(index_first+1, a.length());
    temp=temp.replaceAll("\\{\\{","");
    temp=temp.replaceAll("\\}\\{","\\,");
    temp=temp.replaceAll("\\}\\}","");
    String[] synonyms=temp.split(",");

    //for(int i =0;i<synonyms.length;i++){System.out.println(synonyms[i]);}

    String[] result=new String[]{name,synonyms} // does not work! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:09:23.707

您可以这样使用 StringTokenizer：

```
new StringTokenizer(string, "{}") 
```

请注意，StringTokenizer 在指定字符 (`}`和`{`) 上拆分并且*不*返回这些字符。您应该使用遍历标记器结果`nextToken()`并将结果添加到`List<String>`.

它在这里很有用，因为它很简单，但[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)说明这`StringTokenizer`是一个遗留类，所以你应该谨慎使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:12:43.373

您可以使用

```
String s = "Q={{ec.Qh}{ec.Q2}}";
String[] parts = s.split("(=\\{\\{|}\\{|}})");
System.out.println(Arrays.toString(parts)); 
```

印刷

```
[Q, ec.Qh, ec.Q2] 
```

# java - 需要根据给定的主文件编写用于创建键值对本地化文件的脚本

> ID：13228898
> 
> 赞同：0
> 
> 时间：2012-11-05T09:05:27.987
> 
> 标签：java, php, yaml

我有 9 种语言的键值格式（.java 文件）的本地化资源文件。我需要根据英文文件（en.yml）中存在的键创建 9 个其他本地化文件。后一个就像前一个的子集，可能包含一些额外的键。基于 en.yml 文件中给出的键，我需要从 java 文件中选择字符串（对于所有 9 个文件）并创建相应的本地化（yml）文件对于每种语言。

我需要编写一个脚本，我可以随时运行它来创建基于英文 yml 文件的 yml 文件，从上面提到的基本 java 文件中挑选字符串。

任何机构都可以帮助我编写脚本。哪种语言会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:41:50.137

如果我正确理解您的问题；您有 9 个带有翻译值的 .java 文件（.properties 格式？），以及一个带有英文字符串的 .yml 文件。您正在寻找一个与 .java 文件中的值匹配的脚本，并根据英文 .yml 文件中的键将它们写入新的 .yml 文件。

你说你需要一个可以随时运行的脚本。我认为这是因为可能的未来更新，以及管理所有翻译等？

如果您必须处理多个翻译，我认为最好保留一个单独的翻译电子表格或数据库，并使用它来生成您需要的文件。这更容易，因为您可以在一个中心位置添加或更新值，并且您可以编写脚本或宏来生成您需要的翻译文件（.strings 或 .xml 或其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:16:06.337

加载英文属性文件：

```
Properties properties = new Properties();
try {
   properties.load(new FileInputStream("path/filename"));
 } catch (IOException e) {
   ...
 } 
```

对于您需要支持的每种语言：创建名为 %filename%_%LANG%.properties 的 .properties 文件。加载相关语言特定属性。遍历您的英语键枚举并将相应的（特定于语言的）值放入本地化文件中：

```
// create localized .properties file and load values for look-up
for(String key : properties.stringPropertyNames()) {
   String value = properties.getProperty(key);
   // put the value in the localized file;
} 
```

# symfony - Symfony2：如何在进行 login_check 之前更改实体管理器

> ID：13228903
> 
> 赞同：0
> 
> 时间：2012-11-05T09:05:57.093
> 
> 标签：symfony, login, doctrine-orm, dbal

我有两个 dbal 连接。一种是静态的，在 config.yml 中定义，一种是动态定义。当我在控制器中需要它时，我会设置连接参数，例如主机、数据库名称、密码等......

我需要在执行登录检查操作（或在此操作中）之前设置动态连接。这是因为我的“用户”实体根据 URL 在不同的数据库中。所以我不能把动态连接定义放在 config.yml 文件中。

我使用该方法来设置我需要的实体管理器：

```
public function switchConnection($connectionParam=array()) 
{ 
    $conn = array_merge(
            array('host'=>'127.0.0.1', 'port'=>'3306', 'dbName'=>'myDatabaseName', 'user'=>'myUser', 'pass'=>'myPass',  'driver'=>'pdo_mysql', 'connection'=>'default', 'em'=>'default')
        , $connectionParam);

    $dbalConnectionTo=sprintf('doctrine.dbal.%s_connection', $conn['connection']); 
    $connection = $this->container->get($dbalConnectionTo); 
    $connection->close(); 
    $refConn = new \ReflectionObject($connection); 
    $refParams = $refConn->getProperty('_params'); 
    $refParams->setAccessible('public');

    $params = $refParams->getValue($connection); 
    $params['dbname'] = $conn['dbName']; 
    $params['user'] = $conn['user']; 
    $params['host'] = $conn['host']; 
    $params['port'] = $conn['port'];
    $params['password'] = $conn['pass']; 
    $params['driver'] = $conn['driver']; 
    $params['charset']='UTF8';

    $refParams->setAccessible('private');
    $refParams->setValue($connection,$params); 
    $this->container->get('doctrine')->resetEntityManager($conn['em']); 
    return; 
} 
```

我可以更改“login_check”操作代码以按我的方式设置实体管理器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:02:36.653

通常，在特定条件下更改默认数据库连接是不好的做法。此外，用户需要加载任何（登录）请求，而不仅仅是登录请求。

但是当然有一种 symfony 方法可以实现从不同的数据库加载用户。

您将需要实现自己的 UserProvider 以从不同的数据库连接加载用户。[这](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Security/UserProvider.php)是用户提供者的示例。

# https - 在域模式下设置 SSL mod_cluster JBOSS AS7

> ID：13228910
> 
> 赞同：1
> 
> 时间：2012-11-05T09:06:29.060
> 
> 标签：https, jboss

我正在尝试按照域模式集群的说明在 Jboss 域模式集群中设置**[SSL](http://middlewaremagic.com/jboss/?p=2147)**。

现在我需要在 SSL 中运行这些集群节点。我在 domain.xml 中添加了以下配置，允许我在 SSL 上以域模式运行每个集群。如果我有两个节点以 100 和 200 的偏移量运行，那么我可以分别在 https 上的 8543 和 8643 访问应用程序，因为 jboss SSL 的默认端口是 8443。

```
<subsystem xmlns="urn:jboss:domain:web:1.0" default-virtual-server="default-host">
            <connector name="http" protocol="HTTP/1.1" socket-binding="http" scheme="http" redirect-port="443"/>
            <connector name="https" protocol="HTTP/1.1" socket-binding="https" scheme="https" enable-lookups="false" secure="true">
                <ssl name="ssl" password="mypassword" certificate-key-file="<path to truststore file>/jbossHttps.keystore" protocol="TLSv1" verify-client="true"/>
            </connector> 
```

关于添加系统属性的建议很少，我也这样做了。

```
<system-properties>
     <property name="javax.net.ssl.trustStore" value="<path to truststore file>"/>
</system-properties> 
```

问题是我希望使用**mod_cluster**通过 HTTPS 运行我的应用程序，以便以 `https://myapplication/`

我在这里缺少哪些其他配置更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:45:41.270

最后经过数小时的搜索，没有可用的单一文档/信息来源。最后按照详细步骤帮助配置 mod_cluster + ssl + jboss7.x

# 生成服务器证书

注意：如果您已经创建了证书，则可以忽略此部分。

**在运行 Apache + mod_ssl 的服务器上** 生成私钥 首先，使用 openssl 命令在运行 Apache webserver 的 Linux 服务器上生成一个私钥，如下所示。

```
[root@s4-app-dev jbossuser]# mkdir /etc/httpd/conf/certs
[root@s4-app-dev jbossuser]# openssl genrsa -des3 -out www.xyz.com.key 1024 
```

**生成证书签名请求 (CSR)** 使用上面的生成密钥，您应该使用 openssl 生成证书请求文件 (csr)，如下所示。

```
[root@s4-app-dev jbossuser]# openssl req -new -key www.xyz.com.key -out www.xyz.com.csr 
```

**生成自签名 SSL 证书** 出于测试目的，您可以使用 openssl 命令生成有效期为 1 年的自签名 SSL 证书，如下所示。

```
[root@s4-app-dev jbossuser]# openssl x509 -req -days 365 -in www.xyz.com.csr -signkey www.xyz.com.key -out www.xyz.com.crt 
```

# Apache SSL 配置

如果您已经将 mod_cluster 配置为侦听端口 80，则删除该虚拟主机条目并进行以下配置。如下创建 ssl.conf。

```
[root@s4-app-dev jbossuser]# vi /etc/httpd/conf.d/ssl.conf
This is the Apache server configuration file providing SSL support.
# It contains the configuration directives to instruct the server how to
# serve pages over an https connection. For detailing information about these
# directives see <URL:http://httpd.apache.org/docs/2.2/mod/mod_ssl.html>
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.
#

LoadModule ssl_module modules/mod_ssl.so

#
# When we also provide SSL we have to listen to the
# the HTTPS port in addition.
#
Listen 1.1.1.1:443

##
##  SSL Global Context
##
##  All SSL configuration in this context applies both to
##  the main server and all SSL-enabled virtual hosts.
##

#   Pass Phrase Dialog:
#   Configure the pass phrase gathering process.
#   The filtering dialog program (`builtin' is a internal
#   terminal dialog) has to provide the pass phrase on stdout.
SSLPassPhraseDialog  builtin

#   Inter-Process Session Cache:
#   Configure the SSL Session Cache: First the mechanism
#   to use and second the expiring timeout (in seconds).
SSLSessionCache         shmcb:/var/cache/mod_ssl/scache(512000)
SSLSessionCacheTimeout  300

#   Semaphore:
#   Configure the path to the mutual exclusion semaphore the
#   SSL engine uses internally for inter-process synchronization.
SSLMutex default

#   Pseudo Random Number Generator (PRNG):
#   Configure one or more sources to seed the PRNG of the
#   SSL library. The seed data should be of good random quality.
#   WARNING! On some platforms /dev/random blocks if not enough entropy
#   is available. This means you then cannot use the /dev/random device
#   because it would lead to very long connection times (as long as
#   it requires to make more entropy available). But usually those
#   platforms additionally provide a /dev/urandom device which doesn't
#   block. So, if available, use this one instead. Read the mod_ssl User
#   Manual for more details.
SSLRandomSeed startup file:/dev/urandom  256
SSLRandomSeed connect builtin
#SSLRandomSeed startup file:/dev/random  512
#SSLRandomSeed connect file:/dev/random  512
#SSLRandomSeed connect file:/dev/urandom 512

#
# Use "SSLCryptoDevice" to enable any supported hardware
# accelerators. Use "openssl engine -v" to list supported
# engine names.  NOTE: If you enable an accelerator and the
# server does not start, consult the error logs and ensure
# your accelerator is functioning properly.
#
SSLCryptoDevice builtin
#SSLCryptoDevice ubsec

##
## SSL Virtual Host Context
##

<VirtualHost _default_:443>

# General setup for the virtual host, inherited from global configuration
#DocumentRoot "/var/www/html"
#ServerName www.example.com:443

# Use separate log files for the SSL virtual host; note that LogLevel
# is not inherited from httpd.conf.
ErrorLog logs/ssl_error_log
TransferLog logs/ssl_access_log
LogLevel warn

#   SSL Engine Switch:
#   Enable/Disable SSL for this virtual host.
SSLEngine on

#   SSL Protocol support:
# List the enable protocol levels with which clients will be able to
# connect.  Disable SSLv2 access by default:
SSLProtocol all -SSLv2

#   SSL Cipher Suite:
# List the ciphers that the client is permitted to negotiate.
# See the mod_ssl documentation for a complete list.
SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW

#   Server Certificate:
# Point SSLCertificateFile at a PEM encoded certificate.  If
# the certificate is encrypted, then you will be prompted for a
# pass phrase.  Note that a kill -HUP will prompt again.  A new
# certificate can be generated using the genkey(1) command.
SSLCertificateFile /etc/httpd/conf/certs/www.xyz.com.crt

#   Server Private Key:
#   If the key is not combined with the certificate, use this
#   directive to point at the key file.  Keep in mind that if
#   you've both a RSA and a DSA private key you can configure
#   both in parallel (to also allow the use of DSA ciphers, etc.)
SSLCertificateKeyFile /etc/httpd/conf/certs/www.xyz.com.key

#   Server Certificate Chain:
#   Point SSLCertificateChainFile at a file containing the
#   concatenation of PEM encoded CA certificates which form the
#   certificate chain for the server certificate. Alternatively
#   the referenced file can be the same as SSLCertificateFile
#   when the CA certificates are directly appended to the server
#   certificate for convinience.
#SSLCertificateChainFile /etc/pki/tls/certs/server-chain.crt

#   Certificate Authority (CA):
#   Set the CA certificate verification path where to find CA
#   certificates for client authentication or alternatively one
#   huge file containing all of them (file must be PEM encoded)
#SSLCACertificateFile /etc/pki/tls/certs/ca-bundle.crt

#   Client Authentication (Type):
#   Client certificate verification type and depth.  Types are
#   none, optional, require and optional_no_ca.  Depth is a
#   number which specifies how deeply to verify the certificate
#   issuer chain before deciding the certificate is not valid.
#SSLVerifyClient require
#SSLVerifyDepth  10

#   Access Control:
#   With SSLRequire you can do per-directory access control based
#   on arbitrary complex boolean expressions containing server
#   variable checks and other lookup directives.  The syntax is a
#   mixture between C and Perl.  See the mod_ssl documentation
#   for more details.
#<Location />
#SSLRequire (    %{SSL_CIPHER} !~ m/^(EXP|NULL)/ \
#            and %{SSL_CLIENT_S_DN_O} eq "Snake Oil, Ltd." \
#            and %{SSL_CLIENT_S_DN_OU} in {"Staff", "CA", "Dev"} \
#            and %{TIME_WDAY} >= 1 and %{TIME_WDAY} <= 5 \
#            and %{TIME_HOUR} >= 8 and %{TIME_HOUR} <= 20       ) \
#           or %{REMOTE_ADDR} =~ m/^192\.76\.162\.[0-9]+$/
#</Location>

#   SSL Engine Options:
#   Set various options for the SSL engine.
#   o FakeBasicAuth:
#     Translate the client X.509 into a Basic Authorisation.  This means that
#     the standard Auth/DBMAuth methods can be used for access control.  The
#     user name is the `one line' version of the client's X.509 certificate.
#     Note that no password is obtained from the user. Every entry in the user
#     file needs this password: `xxj31ZMTZzkVA'.
#   o ExportCertData:
#     This exports two additional environment variables: SSL_CLIENT_CERT and
#     SSL_SERVER_CERT. These contain the PEM-encoded certificates of the
#     server (always existing) and the client (only existing when client
#     authentication is used). This can be used to import the certificates
#     into CGI scripts.
#   o StdEnvVars:
#     This exports the standard SSL/TLS related `SSL_*' environment variables.
#     Per default this exportation is switched off for performance reasons,
#     because the extraction step is an expensive operation and is usually
#     useless for serving static content. So one usually enables the
#     exportation for CGI and SSI requests only.
#   o StrictRequire:
#     This denies access when "SSLRequireSSL" or "SSLRequire" applied even
#     under a "Satisfy any" situation, i.e. when it applies access is denied
#     and no other module can change it.
#   o OptRenegotiate:
#     This enables optimized SSL connection renegotiation handling when SSL
#     directives are used in per-directory context.
#SSLOptions +FakeBasicAuth +ExportCertData +StrictRequire
<Files ~ "\.(cgi|shtml|phtml|php3?)$">
    SSLOptions +StdEnvVars
</Files>
<Directory "/var/www/cgi-bin">
    SSLOptions +StdEnvVars
</Directory>

#   SSL Protocol Adjustments:
#   The safe and default but still SSL/TLS standard compliant shutdown
#   approach is that mod_ssl sends the close notify alert but doesn't wait for
#   the close notify alert from client. When you need a different shutdown
#   approach you can use one of the following variables:
#   o ssl-unclean-shutdown:
#     This forces an unclean shutdown when the connection is closed, i.e. no
#     SSL close notify alert is send or allowed to received.  This violates
#     the SSL/TLS standard but is needed for some brain-dead browsers. Use
#     this when you receive I/O errors because of the standard approach where
#     mod_ssl sends the close notify alert.
#   o ssl-accurate-shutdown:
#     This forces an accurate shutdown when the connection is closed, i.e. a
#     SSL close notify alert is send and mod_ssl waits for the close notify
#     alert of the client. This is 100% SSL/TLS standard compliant, but in
#     practice often causes hanging connections with brain-dead browsers. Use
#     this only for browsers where you know that their SSL implementation
#     works correctly.
#   Notice: Most problems of broken clients are also related to the HTTP
#   keep-alive facility, so you usually additionally want to disable
#   keep-alive for those clients, too. Use variable "nokeepalive" for this.
#   Similarly, one has to force some clients to use HTTP/1.0 to workaround
#   their broken HTTP/1.1 implementation. Use variables "downgrade-1.0" and
#   "force-response-1.0" for this.
SetEnvIf User-Agent ".*MSIE.*" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0

#   Per-Server Logging:
#   The home of a custom SSL log file. Use this when you want a
#   compact non-error SSL logfile on a virtual host basis.
CustomLog logs/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

</VirtualHost>

LoadModule slotmem_module modules/mod_slotmem.so
LoadModule manager_module modules/mod_manager.so
LoadModule proxy_cluster_module modules/mod_proxy_cluster.so
LoadModule advertise_module modules/mod_advertise.so

NameVirtualHost 1.1.1.1:443
MemManagerFile /var/cache/httpd

<VirtualHost 1.1.1.1:443>
    <Location /mod_cluster_manager>
        SetHandler mod_cluster-manager
        Order deny,allow
        Allow from all
    </Location>
    KeepAliveTimeout 60
    MaxKeepAliveRequests 0
    ManagerBalancerName testcluster
    AdvertiseFrequency 5

    DocumentRoot "/var/www/html"
    ErrorLog logs/ssl_error_log
    TransferLog logs/ssl_access_log
    LogLevel warn

    SSLEngine on

    SSLProtocol all -SSLv2

    SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW

    SSLCertificateFile /etc/httpd/conf/certs/www.xyz.com.crt
    SSLCertificateKeyFile /etc/httpd/conf/certs/www.xyz.com.key
    SSLCertificateChainFile /etc/httpd/conf/certs/www.xyz.com.crt
    <Files ~ "\.(cgi|shtml|phtml|php3?)$">
        SSLOptions +StdEnvVars
    </Files>
    <Directory "/var/www/cgi-bin">
        SSLOptions +StdEnvVars
    </Directory>
    <Directory "/var/www/html">
         AllowOverride None
         Order allow,deny
         Allow from all
    </Directory>
</VirtualHost> 
```

完成这些更改后，您应该能够通过 SSL [https://1.1.1.1/][1] 访问 Apache

# 为 mod_cluster 和 SSL 升级 Jboss

Jboss 7.1.1.Final 不适用于 mod_cluster 和 SSL 配置。它基本上忽略了 mod_cluster 的 SSL 证书配置。我们需要升级到更高的 Jboss 例如从 Git [https://github.com/jbossas/jboss-as/tree/7.1.3.Final](https://github.com/jbossas/jboss-as/tree/7.1.3.Final) 如果你已经安装了 Maven 3

```
$ mvn install 
```

如果你没有 Maven 3

```
$ ./build.sh 
```

# 使用 KeyTool 创建自签名证书

将密钥对生成到密钥库 (JKS) 中，用于 RSA：

```
[root@s4-app-dev jbossuser]# keytool -genkey -keyalg RSA -keysize 2048 -keystore xyz_keystore.jks -alias xyz 
```

将服务器证书导入密钥库

```
[root@s4-app-dev jbossuser]# keytool -import -alias xyz -file /etc/httpd/conf/certs/www.xyz.com.crt -storetype JKS -keystore /home/jboss-as-7.1.1.final/keystore/xyz_keystore.jks 
```

列出密钥库内容

```
[root@s4-app-dev jbossuser]# keytool -list -keystore /home/jboss-as-7.1.1.final/keystore/xyz_keystore.jks
Jboss mod_cluster ssl configuration 
```

在 domain.xml 中添加信任库和密码的系统属性。

```
<property name="javax.net.ssl.trustStore" value="<path to keystore>/keystore/xyz_keystore.jks"/>
<property name="javax.net.ssl.trustStorePassword" value="xyzmanish"/> 
```

修改 mod_cluster 子系统以现在监听 444 并使用我们配置的密钥库。

```
<subsystem xmlns="urn:jboss:domain:modcluster:1.1">
  <mod-cluster-config advertise-socket="modcluster" connector="ajp" proxy-list="1.1.1.1:443" advertise-security-key="xyzmanish">
   <dynamic-load-provider>
         <load-metric type="busyness"/>
   </dynamic-load-provider>
   <!-- SSL/TLS configuration for mod_cluster advertise-security-key -->
   <ssl password="xyzmanish" key-alias="xyz" ca-certificate-file="<path to key store>/keystore/xyz_keystore.jks"  certificate-key-file="<path to key store>/keystore/xyz_keystore.jks" cipher-suite="ALL" protocol="TLSv1"/>
  </mod-cluster-config>
</subsystem>> 
```

进行此更改后，重新启动 JBOSS 服务器并尝试通过 Apache over SSL 访问您的应用程序。

# c# - 将 EF 项目公开给 WCF 服务

> ID：13228913
> 
> 赞同：0
> 
> 时间：2012-11-05T09:06:42.740
> 
> 标签：c#, wcf, visual-studio, entity-framework-5

我已经使用 EF5（我们称之为 EF5）制作了一个复杂的解决方案，这个解决方案工作得非常好，并且有一个 Logic.cs 文件，位于 app_code，它具有访问、控制和修改这个解决方案的多个功能，到目前为止一切都很好.

我希望我的企业客户能够访问这些功能，并且我想通过使用 WCF 来公开这些功能。

我做的步骤如下。

1.  将 WCF 项目添加到 EF5 项目所在的解决方案中。
2.  为我想向客户公开的每个功能编写“OperationContract”。
3.  尝试通过调用 EF5 函数来实现每个函数。

问题在于实现，VS 无法识别 logic.cs 文件，因此我无法调用这些函数并将我的 EF5 项目公开给我的客户。

我是 WCF 的新手，显然我在这里做错了什么。

我的问题是，如何向 WCF 公开 .cs 类中的 EF5 项目功能？

我相信我犯的主要错误是我没有制作 WCF 项目并在其中添加了 EF5 项目，但我并不完全确定。

以下是显示我将 EF5 引用添加到 WCF 项目的步骤的屏幕截图。

![在此处输入图像描述](../Images/e1ad8dcaf220ecbf6a28a5a867a38419.png)

![在此处输入图像描述](../Images/d8d1efd4a4d5d91bd272f69d0a300af7.png)

![在此处输入图像描述](../Images/78a214e750f0ee1983099ecdff66f0b3.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:11:30.370

您需要从 WCF 项目中添加对 EF5 项目的引用。

您还需要确保在 Logic.cs 中调用的所有函数都是公开的。

还要确保您正在“使用”声明这些函数的命名空间。

# grails - 在 HQL 查询中执行加法/减法？

> ID：13228915
> 
> 赞同：1
> 
> 时间：2012-11-05T09:06:59.757
> 
> 标签：grails, hql

我正在使用 grails 1.3.7。我有一个这样的域类产品：

```
class Product = {
   String name
   Float price
   Float discount = 0.0
} 
```

我正在使用 HQL 在我的表中执行搜索（请不要问我为什么不使用`createCriteria`and `findAllBy`，我的结构比一个产品域要详细得多）。我需要在特定的 maxPrice 和 minPrice 之间进行搜索，所以我这样做：
`select p from Product p where p.price between :minPrice and :maxPrice`

我传递了需要的参数并且一切正常。现在我需要更改 HQL 查询，以便它在折扣价内进行搜索。我该怎么做：
`select p from Product p where p.price between :minPrice - p.discount and :maxPrice - p.discount`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:50:21.627

显然你可以这样做：
`select p from Product p where p.price - p.discount between :minPrice and :maxPrice`

# csv - Jmeter 不接受 csv 输入文件

> ID：13228918
> 
> 赞同：3
> 
> 时间：2012-11-05T09:07:06.323
> 
> 标签：csv, input, jmeter

当我想使用 *CSV Data Set Config*时，我不断收到此异常：

[csv 配置屏幕 http://www.tinyuploads.com/images/RiFs0s.jpg](http://www.tinyuploads.com/images/RiFs0s.jpg)

文件 data2.txt 仅包含一列：

```
num
19000716285
1148227951
2413658651 
```

我已经尝试了所有可以想象但没有效果的方法。

**java.lang.IllegalArgumentException：无法读取文件标题行**

**原因：java.io.FileNotFoundException: D:\aaa（访问被拒绝）**

```
2012/11/05 09:56:21 ERROR - jmeter.threads.JMeterThread: Test failed! java.lang.IllegalArgumentException: Could not read file header line
    at org.apache.jmeter.services.FileServer.reserveFile(FileServer.java:282)
    at org.apache.jmeter.config.CSVDataSet.iterationStart(CSVDataSet.java:132)
    at org.apache.jmeter.control.GenericController.fireIterationStart(GenericController.java:410)
    at org.apache.jmeter.control.GenericController.fireIterEvents(GenericController.java:402)
    at org.apache.jmeter.control.GenericController.next(GenericController.java:154)
    at org.apache.jmeter.control.GenericController.nextIsAController(GenericController.java:211)
    at org.apache.jmeter.control.GenericController.next(GenericController.java:172)
    at org.apache.jmeter.control.GenericController.nextIsAController(GenericController.java:211)
    at org.apache.jmeter.control.GenericController.next(GenericController.java:172)
    at org.apache.jmeter.control.LoopController.next(LoopController.java:108)
    at org.apache.jmeter.control.GenericController.nextIsAController(GenericController.java:220)
    at org.apache.jmeter.control.GenericController.next(GenericController.java:172)
    at org.apache.jmeter.control.LoopController.next(LoopController.java:108)
    at org.apache.jmeter.threads.AbstractThreadGroup.next(AbstractThreadGroup.java:86)
    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:253)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.FileNotFoundException: D:\aaa (Access is denied)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at org.apache.jmeter.services.FileServer.createBufferedReader(FileServer.java:398)
    at org.apache.jmeter.services.FileServer.readLine(FileServer.java:325)
    at org.apache.jmeter.services.FileServer.readLine(FileServer.java:309)
    at org.apache.jmeter.services.FileServer.reserveFile(FileServer.java:280)
    ... 15 more 
```

**编辑**现在我完全删除了 CSV 数据集配置节点，我仍然遇到异常......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:41:59.510

尝试对 csv 文件使用绝对路径，特别是如果您正在进行远程测试，但请确保在所有服务器上创建相同的文件夹结构。

我认为您显示的堆栈跟踪与您显示的屏幕截图或 csv 数据集配置无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T07:48:43.243

可能您将在记录控制器的深处或其他地方拥有另一个 CSV 数据集配置元素。删除它并试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-03T10:58:16.250

> 编辑现在我完全删除了 CSV 数据集配置节点，我仍然遇到异常......

见[https://stackoverflow.com/a/31204662/5077415](https://stackoverflow.com/a/31204662/5077415)

使用`Ctrl+F`+`CSV`并找到另一个`CSV Data Set Config`空的节点`Filename`。删除这个空`CSV Data Set Config`节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-03T14:19:16.420

这是一个权限问题。如果您使用的是 Windows 操作系统，请单击 D 盘并转到属性 -> 安全和编辑。使用添加按钮并输入您的姓名，然后单击检查姓名按钮，希望您的姓名会弹出。单击确定并让自己完全控制。

也可以使用 JMeter 文件夹和 Program files 下的 Excel 文件夹来执行此操作。如果您仍有权限问题，请咨询系统管理员。

# hadoop - 在 MapReduce Job 配置中设置参数

> ID：13228922
> 
> 赞同：4
> 
> 时间：2012-11-05T09:07:17.783
> 
> 标签：hadoop, mapreduce

有什么方法可以在作业配置中设置参数，`Mapper`并且可以从`Reducer`.

我尝试了下面的代码

在映射器 中`map(..)` ：：`context.getConfiguration().set("Sum","100");` 在减速器中`reduce(..)`：：`context.getConfiguration().get("Sum");`

但在 reducer 中，值返回为`null`.

有什么方法可以实现这一点或我遗漏的任何事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:12:47.730

据我所知，这是不可能的。作业配置在运行时由作业跟踪器序列化为 XML，并复制到所有任务节点。对 Configuration 对象的任何更改只会影响该对象，该对象是特定任务 JVM 的本地对象；它不会更改每个节点的 XML。

一般来说，您应该尽量避免任何“全局”状态。它违反 MapReduce 范式，通常会阻止并行性。如果您绝对必须在 Map 和 Reduce 阶段之间传递信息，并且您无法通过通常的 Shuffle/Sort 步骤来完成，那么您可以尝试写入分布式缓存或直接写入 HDFS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:11:28.220

如果您使用新的 API，您的代码应该可以正常工作。您是否在创建工作开始时创建了这个“总和”属性？例如像这样

```
Configuration conf = new Configuration();
conf.set("Sum", "0");
Job job = new Job(conf); 
```

如果不是你最好使用

```
context.getConfiguration().setIfUnset("Sum","100"); 
```

在您的映射器类中解决问题。这是我唯一能看到的。

# visual-studio-2010 - 即使当前构建未成功，Visual Studio 2010 也会启动代码 - 如何禁用？

> ID：13228928
> 
> 赞同：2
> 
> 时间：2012-11-05T09:07:51.323
> 
> 标签：visual-studio-2010, build

在我的工作场所，当我单击“>”（调试）按钮时，我的 C# 项目首先构建，然后仅在构建正常时运行。

在其他地方，无论构建如何，最后一次成功的构建都会运行。这很烦人。

我在弄清楚如何禁用它时遇到了一些小问题。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:16:07.863

工具 -> 选项 -> 项目和解决方案 -> 构建和运行

“运行时，发生构建或部署错误时”有一组下拉选项。默认值为“提示启动”，但您的可能设置为“启动旧版本”

![在此处输入图像描述](../Images/71d068efa0bcaac45b7c7d1c2a39f4cc.png)

# java - 读取文件并将文件中的数据发送到 JTable

> ID：13228933
> 
> 赞同：0
> 
> 时间：2012-11-05T09:08:04.903
> 
> 标签：java, swing, file-io, jtable, tablemodel

```
public void showTotalSummary()
        {
            JFrame totalSummary = new JFrame("Total Leave Credit Summary");
            totalSummary.setSize(970, 523);
            totalSummary.setResizable(false);
            totalSummary.setLocationRelativeTo(null);
            totalSummary.setVisible(true);              

            panelTotalSummary = new JPanel();               
            panelTotalSummary.setBorder ( (Border) new TitledBorder ( new EtchedBorder (), "Display Area" ) );
            totalSummary.add(panelTotalSummary);

            String[] headings = {"Employee No.", "Employee Names", "Vacation Leave", "Tardiness", "Sick Leave", "Nonattendances", "Total Leave Earned "};                   

            String [][] data = {{"01", "Adlawan","10.50","2.50","20", "4", "30.50"},
                                {"02","Angeles","20.10","5.90","25","6","45.10"},
                                {"03","Benenoso","30.70","7.60","34","8","64.70"},
                                {"04","Bermas","20","4.10","25","3","45"}};

            JTable totalSummaryTable = new JTable(data, headings);              
            totalSummaryTable.getTableHeader().setFont( new Font( "Tahoma" , Font.BOLD, 12 ));
            Font f = new Font("Arial", Font.ITALIC, 13);                    
            totalSummaryTable.setFont(f);           
            totalSummaryTable.setGridColor(Color.BLUE);
            totalSummaryTable.setPreferredScrollableViewportSize(new Dimension(900, 400));
            totalSummaryTable.setFillsViewportHeight(true);

            JScrollPane jcp = new JScrollPane(totalSummaryTable);               
            jcp.setVerticalScrollBarPolicy ( ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS );   
            panelTotalSummary.add(jcp); 

        } 
```

使用这些代码，我能够将数据发布到我的 JTable。我的问题是如何从文件中读取数据并从该文件中获取数据并将数据发送到 JTable 中的一行？我知道如何从文件中读取数据并将这些数据发送到 JTextField。我将如何执行相同的过程，但不是将数据发送到 JTextField，而是希望将文件中的数据从 JTabel 发送到一行。任何人的任何持有将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:25:07.690

你需要做的是实现你自己的*TableModel*。[这个关于“如何使用表格”的](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)教程将有助于理解表格在 Swing 中的工作方式。

基本上，您需要做的是创建一个类来扩展[AbstractTableModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)并至少为以下三个方法提供实现：

```
public int getRowCount();
public int getColumnCount();
public Object getValueAt(int row, int column); 
```

您可以使用您的模型，以便它可以将其数据保存在数组、向量或哈希映射中，或者它可以从外部源获取数据，例如读取文件并从中获取数据。

# ruby-on-rails - 使用 CanCan 和 Twitter Bootstrap 进行设计的 Rails 教程

> ID：13228938
> 
> 赞同：3
> 
> 时间：2012-11-05T09:08:39.203
> 
> 标签：ruby-on-rails, ruby, device, cancan, twitter-bootstrap-rails

无法运行这个开源项目[http://railsapps.github.com/tutorial-rails-bootstrap-devise-cancan.html](http://railsapps.github.com/tutorial-rails-bootstrap-devise-cancan.html.I)。我使用的是 Ruby version1.9.3p286 和 Rails 3.2.8。我已经成功安装了所有 gem，但是当尝试从 RubyMine 运行时，输出如下：

```
/Users/st/.rvm/rubies/ruby-1.9.3-p286/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /Users/st/projects/rails3-bootstrap-devise-cancan/script/rails server -b 0.0.0.0 -p 3000 -e development
/Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find diff-lcs-1.1.3 in any of the sources (Bundler::GemNotFound)
    from /Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/spec_set.rb:83:in `map!'
    from /Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/spec_set.rb:83:in `materialize'
    from /Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/definition.rb:113:in `specs'
    from /Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/definition.rb:158:in `specs_for'
    from /Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/definition.rb:147:in `requested_specs'
    from /Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/environment.rb:23:in `requested_specs'
    from /Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:11:in `setup'
    from /Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler.rb:116:in `setup'
    from /Users/st/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/setup.rb:17:in `<top (required)>'
    from /Users/st/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /Users/st/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /Users/st/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /Users/st/projects/rails3-bootstrap-devise-cancan/config/boot.rb:6:in `<top (required)>'
    from /Users/st/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/st/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/st/projects/rails3-bootstrap-devise-cancan/script/rails:5:in `<top (required)>'
    from -e:1:in `load'
    from -e:1:in `<main>'
Process finished with exit code 1 
```

我的宝石文件：

```
source 'https://rubygems.org'
gem 'rails', '3.2.8'
gem 'sqlite3'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
gem "rspec-rails", ">= 2.11.0", :group => [:development, :test]
gem "email_spec", ">= 1.2.1", :group => :test
gem "cucumber-rails", ">= 1.3.0", :group => :test, :require => false
gem "database_cleaner", ">= 0.8.0", :group => :test
gem "launchy", ">= 2.1.2", :group => :test
gem "capybara", ">= 1.1.2", :group => :test
gem "factory_girl_rails", ">= 4.1.0", :group => [:development, :test]
gem "bootstrap-sass", ">= 2.1.0.0"
gem "devise", ">= 2.1.2"
gem "cancan", ">= 1.6.8"
gem "rolify", ">= 3.2.0"
gem "simple_form", ">= 2.0.3"
gem "quiet_assets", ">= 1.0.1", :group => :development 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:10:17.400

它找不到`diff-lcs-1.1.3`gem，尝试运行 bundle install 或手动安装 gem。

编辑：看到你的 gem 文件，它不见了

```
gem "diff-lcs", "1.1.3" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T10:38:08.583

@Baboon 解决方案的一点补充，尝试删除 Gem.lock 文件并`bundle install`再次运行

但是，一旦您对示例感到满意，您可能会对[“rails composer”](http://railsapps.github.com/rails-composer/)感兴趣以生成您的 rails 骨架

高温高压

# python - 在 python 中打印对象的约定

> ID：13228939
> 
> 赞同：4
> 
> 时间：2012-11-05T09:08:41.180
> 
> 标签：python, python-3.x

是否有任何标准约定可以在 python 中打印对象。我知道如果我只是尝试打印对象，它将打印内存地址，但我想覆盖该方法并能够打印对象的人类可读格式以帮助调试。

人们是否遵循任何标准约定，或者它不是定义这种方法的好方法，而是有更好的选择？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T09:33:09.277

您可以覆盖`__str__`或`__repr__`方法。

没有关于如何实现该`__str__`方法的约定；它可以只返回您想要的任何人类可读的字符串表示形式。然而，关于如何实现该`__repr__`方法有一个约定：它应该返回对象的字符串表示，以便可以从该表示重新创建对象（如果可能的话），即`eval(repr(obj)) == obj`.

假设你有一个 class `Point`，`__str__`并且`__repr__`可以这样实现：

```
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    def __str__(self):
        return "(%.2f, %.2f)" % (self.x, self.y)
    def __repr__(self):
        return "Point(x=%r, y=%r)" % (self.x, self.y)
    def __eq__(self, other):
        return isinstance(other, Point) and self.x == other.x and self.y == other.y 
```

例子：

```
>>> p = Point(0.1234, 5.6789)
>>> str(p)
'(0.12, 5.68)'
>>> "The point is %s" % p  # this will call str
'The point is (0.12, 5.68)'
>>> repr(p)
'Point(x=0.1234, y=5.6789)'
>>> p  # echoing p in the interactive shell calls repr internally
Point(x=0.1234, y=5.6789)
>>> eval(repr(p))  # this echos the repr of the new point created by eval
Point(x=0.1234, y=5.6789)
>>> type(eval(repr(p)))
<class '__main__.Point'>
>>> eval(repr(p)) == p
True 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T09:11:19.620

[`__str__`](http://docs.python.org/3/reference/datamodel.html#object.__str__)在类中为您正在打印的对象 实现函数。

如果您要为无法更改的类打印对象，那么提供自己的`print`函数相当简单，因为您使用的是 Python 3。

编辑：通常返回的字符串`__str__`将特定于类，但至少足以识别对象。字符串的确切格式将根据类和公共属性而有所不同。

Edit2：这是一个描述国家/地区的类的简单（缩减）示例：

```
def __str__(self):
    return "{0:<32} {1:>010}".
        format(self.__name, self.__population) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T11:23:12.703

如果您的对象可以以允许重新创建的方式表示，则覆盖该`__repr__`函数。例如，如果您可以使用以下代码创建对象：

```
MyObject('foo', 45) 
```

应该`__repr__`返回。`"MyObject('foo', 45)"`然后，您不需要实现`__str__`.

但是如果对象太复杂以至于你不能那样表示它，那就重写吧`__str__`。然后，您应该返回一些东西，既清楚地表明该对象不能被重新创建，并且它是一个对象。因此，不要 return `"foo:45"`，因为它看起来像一个字符串，或者`{'foo': 45}`因为它看起来像一个字典，这会让你在调试时感到困惑。

我建议您保留括号，例如`<MyObject foo:45>`. 这样一来，很明显您一直在打印一个对象，而且很明显，这不仅仅是`MyObject('foo', 45)`重新创建对象的写入问题，而是存储了更多数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T09:22:41.710

打印有关对象（类实例）的自定义信息的标准方法是使用`__str__`方法：

```
class A:
    var = 1

    def __str__(self):
        return 'Accessing from print function, var = {0}'.format(self.var) 
```

在这种方法中，您可以显示您想要的任何信息

```
a = A()
print(a)
>>> Accessing from print function, var = 1 
```

# ios - 引导模式运行时 MDM 推送通知？

> ID：13228943
> 
> 赞同：2
> 
> 时间：2012-11-05T09:08:50.317
> 
> 标签：ios, notifications, push, mdm

我需要通过 MDM 安装企业应用程序。

我的 MDM 实现通常有效。

但是，如果我使用引导模式，推送通知不会发送到在引导模式下运行的设备，因此不会安装应用程序。为什么？

这一般可以吗？

有没有办法以静默强制方式安装应用程序（没有“服务器将安装应用程序......你想要它吗？”警报）。

我实际上需要一个更新过程，如下所示：

1.  App x 正在运行，但需要更新。因为它是一个信息亭设备（iPad 在引导模式下运行应用程序 x），它应该自动发生而无需用户交互。客户可能会使用该信息亭设备进行交互。
2.  应用程序 x 正在自行关闭并更改为显示锁定屏幕“维护，请稍候...”的应用程序 y（即来自我的服务器的通知并通过一个技巧`[[UIApplication sharedApplication] openURL:xxx]`）
3.  App x 已在步骤 2 中关闭，正在由 MDM 在后台进行更新。
4.  App x 已完成更新。
5.  将向应用程序 y 发送一个信号，以便它切换回更新的应用程序 x。

x 和 y 之间的切换可以直接在代码中实现。这不是问题。但我坚持发送启动此过程的推送通知。:-(

# symfony1 - 在 Symfony/propel 中运行视图查询

> ID：13228944
> 
> 赞同：0
> 
> 时间：2012-11-05T09:08:52.407
> 
> 标签：symfony1, symfony-1.4, propel

我在 Symfony 1.4/Propel 1.4 中有一个现有项目

出于数据库优化的目的，我创建了几个表的视图。功能/视图查询如下：

```
create function getPlayer() returns INTEGER DETERMINISTIC NO SQL return @getPlayer;

create view getPlay as
SELECT
    CASE WHEN play.hiderid = getPlayer() THEN play.seekerid ELSE play.hiderid END AS opponent, play . * 
    FROM odd_play play, odd_match mat
    WHERE (seekerid = getPlayer() OR hiderid = getPlayer())
    AND play.id = mat.latestplay; 
```

创建上述视图后，我可以编写以下简单的 SQL 查询来有效地获取所需的数据。

```
select play.*
from (select @getPlayer:=1 p) p, getPlay play; 
```

现在的问题是，如何在 Symfony/Propel 1.4 中编写这个查询。有人可以建议如何在推进 1.4 中编写该查询吗？

**在 J0K 评论后编辑**

我正在尝试关注

```
class GetplayPeer extends BaseGetplayPeer {
    static public function getOpponents($player){
        $con = Propel::getConnection();
        $sql = "select play.* from (select @getPlayer:=:player p) ply, getPlay play;";
        $stmt = $con->prepare($sql);
        $stmt->bindParam(":player",&$player,PDO::PARAM_INT);
        $rs = $stmt->execute();
        //$opponents = GetplayPeer::populateObjects($rs);
        echo "opponents=<pre>";print_r($rs);exit;
    }
} // GetplayPeer 
```

我得到`1`的是输出，这不是预期的输出。

# objective-c - 为什么 self.view 的高度和宽度与子视图的高度和宽度不同？

> ID：13228952
> 
> 赞同：0
> 
> 时间：2012-11-05T09:09:37.557
> 
> 标签：objective-c, ios, xcode, views, dimensions

无论方向如何，主屏幕和 self.view 始终保持相同的宽度和高度尺寸（即使 self.view 确实正确调整大小以适应当前设备方向）背后的逻辑是什么，而子视图当设备方向改变时，self.view 返回修改后的宽度和高度尺寸？

```
NSLog(@"screen bounds w: %f, h: %f", [[UIScreen mainScreen] bounds].size.width,[[UIScreen mainScreen] bounds].size.height );

NSLog(@"self.view frame w: %f, h: %f", self.view.frame.size.width, self.view.frame.size.height );

NSLog(@"myView frame w: %f, h: %f", _myView.frame.size.width, _myView.frame.size.height ); 
```

日志输出画像

```
2012-11-05 16:15:11.152 test[2807:11303] screen bounds w: 320.000000, h: 480.000000
2012-11-05 16:15:11.153 test[2807:11303] self.view frame w: 320.000000, h: 460.000000
2012-11-05 16:15:11.153 test[2807:11303] myView frame w: 320.000000, h: 460.000000 
```

日志输出景观

```
2012-11-05 16:14:38.800 test[2807:11303] screen bounds w: 320.000000, h: 480.000000
2012-11-05 16:14:38.801 test[2807:11303] self.view frame w: 300.000000, h: 480.000000
2012-11-05 16:14:38.801 test[2807:11303] myView frame w: 480.000000, h: 300.000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:20:30.390

这取决于为您的子视图设置的[autoSizingMask](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)属性。

我假设您没有使用iOS 6.0 的[AutoLayout](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)功能。如果你这样做了，那么你需要更多地查看 iOS 6.0 中的约束设置。

默认情况下，您的视图的自动调整大小蒙版是“缩放以填充”，请参见附图。您可以根据您的要求为您的子视图设置相同的值。在 Apple 文档中查看更多关于 Struts 和 Springs 的信息。

如果自动调整大小不符合您的要求，那么您将需要实现您的自定义方法来布局您的视图更改方向。像下面这样的东西；

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [UIView animateWithDuration:duration animations:^{
        [self layoutForOrientation:toInterfaceOrientation];
    }];
}

#pragma mark - Layout views

- (void)layoutForOrientation:(UIInterfaceOrientation)orientation {
    if (UIInterfaceOrientationIsPortrait(orientation))
        [self layoutPortraitViews];
    else
        [self layoutLandscapViews];
}

- (void)layoutLandscapViews {
    // Layout your landscape views
}

- (void)layoutPortraitViews {
   // Layout your portrait views
} 
```

![主视图的默认自动调整大小掩码](../Images/702ad29c3f92787cec39319ab29b6a53.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:28:16.983

实际上它不仅仅是自动调整大小的面具。所以当你改变设备的方向时，屏幕的物理特性保持不变。如果您将视图设置为自动旋转，则会为您转换宽度和高度。因此，当要求具有翻译视图的屏幕尺寸时，它的 imp。让您根据`self.view.center`or`self.view.bounds`而不是在 上进行计算`self.view.frame`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:33:33.990

`[UIScreen mainScreen]`对于 iPhone，总是`320w`和`480h`（`568h`对于 iPhone5）。正在为纵向拍摄
尺寸。`[UIScreen mainScreen]`

根据您的，设备状态栏在您的应用中可见`NSLog`。因此，您有`300h`横向和`460h`纵向。

# iphone - 如何在同一个应用程序中支持 iOS5 和 ios6 地图？

> ID：13228958
> 
> 赞同：-1
> 
> 时间：2012-11-05T09:10:19.553
> 
> 标签：iphone, ios5, ios6, mapkit

我应该怎么做才能在我的应用程序中支持这两种地图，我的意思是带有 iOS 5 的 iPhone 会看到谷歌地图，而 iOS 6 设备会看到新地图

我很高兴获得教程的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:44:17.993

加载地图的选择是由 iOS 本身做出的。当您在 iOS 5 上时，您只需要注意不要使用在 iOS 6 上添加的方法（检查目标是否响应选择器或使用宏具有不同的代码） 新地图支持以前地图系统的所有方法。如果您的项目支持 iOS 5，当应用在 iOS5 上执行时，您会看到 Google 地图，在 iOS6 上执行时会看到 Apple 地图。

恕我直言，如果您是 iOS 编程新手，一个好的方法是针对 iOS 5 目标进行开发并在 iOS 5 模拟器和设备上进行测试。然后，当您迁移到 iOS 6 时，一切都应该正常工作，但会*自动*在 Apple 地图上运行:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:18:31.607

谷歌已经发布了他们自己版本的谷歌地图作为 SDK

[https://developers.google.com/maps/mobile-apps](https://developers.google.com/maps/mobile-apps)

[https://developers.google.com/maps/documentation/ios/](https://developers.google.com/maps/documentation/ios/)

# r - 在R中以唯一值（或计数出现次数）合并不同长度的数据帧？

> ID：13228962
> 
> 赞同：0
> 
> 时间：2012-11-05T09:10:35.090
> 
> 标签：r, list, count, dataframe, histogram

在进行了三个实验，每个实验都在一个数字列表中。

```
data1 = c(1,1,1,2,2)
data2 = c(2,2,3,3,3,4)
data3 = c(1,1,1,4,4,4,4,4,4, 5, 6) 
```

现在我想计算每个实验中每个数字的出现次数。我这样做`table`，因为 hist 使用类中点（关于 histo 的好处是，我可以给它唯一值的列表）

```
# save histograms
result = list()
result$values[[1]] = as.data.frame(table(data1), stringsAsFactors=F)
result$values[[2]] = as.data.frame(table(data2), stringsAsFactors=F)
result$values[[3]] = as.data.frame(table(data3), stringsAsFactors=F)

str(result) 
```

现在我只有一个不同长度的数据框列表，但我想要一个包含相同长度列表的数据框（我想减去它们）

```
nerv=data.frame(names=c(1, 2, 3, 4, 5, 6))
nerv[[2]] = c(3, 2, 0, 0, 0, 0)
nerv[[3]] = c(0, 2, 3, 1, 0, 0)
nerv[[4]] = c(3, 0, 0, 6, 1, 1) 
```

是否可以以某种方式告诉`table()`要计算哪些值？或者是否有另一个函数允许对另一个列表（`count unique(data1, data2, data3)`在 data1 中）中的值列表进行计数器？

或者我应该合并 data.frames 并将零填充到空白处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:39:08.603

这将生成数据框：

```
lev <- unique(c(data1, data2, data3)) # the unique values

data.frame(names = lev,
           do.call(cbind,
                   lapply(list(data1, data2, data3),
                          function(x) table(factor(x, levels = lev))))) 
```

诀窍是将数值向量转换为具有指定水平的因子。该函数`table`使用所有级别。

输出：

```
 names X1 X2 X3
1     1  3  0  3
2     2  2  2  0
3     3  0  3  0
4     4  0  1  6
5     5  0  0  1
6     6  0  0  1 
```

# jquery - 构建或下载 jQuery 文件？

> ID：13228965
> 
> 赞同：0
> 
> 时间：2012-11-05T09:10:47.063
> 
> 标签：jquery, jquery-plugins

我正在尝试使用在 Google 上找到的教程构建菜单。一切都很简单，但我无法构建或下载 jQuery 文件。

我正在使用的教程在[这里](http://net.tutsplus.com/tutorials/javascript-ajax/jquery-os-x-style-dock-and-stack-navigation/)。

我正在做教程“jQuery OS X Dock #1 (Horizo​​ntal)”的第一部分及其 3 个步骤。

这是我无法正确处理的部分。

> JavaScript
> 我们将从 jQuery 1.3.2 开始引入我们的 JavaScript 文件。fisheye-iutil.min.js 文件是 Fisheye 插件及其依赖的 iutil.js 文件的组合。我们将创建最后一个文件并将初始化扩展坞所需的 JavaScript 放入其中。
> 
> 1) %MINIFYHTML80326fa6f009adb1c85139aad3bf695d10%

有人可以告诉我如何在那里构建这个文件，或者如何引用它或其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:14:02.913

可能是这个文件：

[鱼眼-iutil.min.js](http://code.google.com/p/cssdock/downloads/detail?name=fisheye-iutil.min.js)

奇怪的是，在教程中没有其他人注意到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:41:46.540

通过查看示例，您可以直接从[Fisheye-iutil.min.js 中获取](http://d2o0t5hpnwv4c1.cloudfront.net/358_jquery/example%20files/js/fisheye-iutil.min.js)

# ribbon - 适用于 Outlook 2007 和 Outlook 2010 的一个功能区 XML

> ID：13228966
> 
> 赞同：2
> 
> 时间：2012-11-05T09:10:48.117
> 
> 标签：ribbon, outlook-addin, outlook-2007, outlook-2010, ribbonx

我正在尝试使用 Ribbon XML 在 Outlook 2010 和 2007 上创建自定义功能区，我有一个用于功能区的 XML 文件，它适用于 Outlook 2010，功能区出现并且正在工作。但它不适用于 Outlook 2007。由于 Outlook 2007 没有功能区，因此在 GetCustomUI() 函数中，我使用 Application.Version 检查 Outlook 版本，如果版本 >= 14，则它将加载 XML 文件，如果它 < 14，那么我调用了一个子程序来使用 commandbarcontrol 创建菜单栏，但这不起作用。在 Outlook 2007 启动期间未加载加载项。

```
Protected Overrides Function CreateRibbonExtensibilityObject() As Microsoft.Office.Core.IRibbonExtensibility
  Return New MyRibbon
End Function

Public Function GetCustomUI(ByVal ribbonID As String) As String Implements Microsoft.Office.Core.IRibbonExtensibility.GetCustomUI
        If iOfficeVersion >= 14 Then
           Return GetResourceText("MyRibbon.xml")
        ElseIf iOfficeVersion < 14 Then
           'Load commandbar UI
        End If
End Function 
```

如何使用功能区 XML 功能同时支持 Outlook 2010 和 2007？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:38:15.910

我发现了问题。问题是 Office.dll（C:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office14\Office.dll）的属性“嵌入互操作类型”设置为 False。此文件在用户 PC 中不可用。

# java - JAVA类实现和扩展问题

> ID：13228967
> 
> 赞同：1
> 
> 时间：2012-11-05T09:10:48.593
> 
> 标签：java, class, interface, eclipse-juno, zest

我们有 2 个与项目相关的 JAVA 类，分别称为*AGraph*和*CallGraph*。我们还有一个名为*Graphism*的接口，由*AGraph*实现。我们有一个名为*GraphSnippet*的抽象类，它基本上创建了 ZEST 图的可视化。

现在，我们希望*CallGraph*扩展*AGraph*。我的愚蠢疑问是，*CallGraph*是否也需要实现接口*Graphism*？

接下来，不是让*GraphSnippet成为**Graph*类的实例（ *Graph*是 ZEST 包中的预定义类），我们希望它成为 CallGraph 的实例，*以便*CallGraph 和 AGraph 的功能*成为*实现*的*一部分。而且因为我们在后期需要*AGraph*类，所以我们不能真正淘汰这个类并在*CallGraph*中实现它的所有方法。

有人可以帮助我们如何开始吗？我们这些 JAVA 新手很难想出办法吗？

PS：我们正在开发 Eclipse-JUNO。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T09:13:18.823

> 现在，我们希望 CallGraph 扩展 AGraph。我的愚蠢疑问是，CallGraph 是否也需要实现接口 Graphism？

是的，但你不必做任何事情。因为它是从 AGraph 扩展而来的，所以它已经实现了 Graphism。您不必在代码中的任何地方标记它。

# sql - 如何组合这些 SQL 查询，使其可以显示一个输出？

> ID：13228969
> 
> 赞同：0
> 
> 时间：2012-11-05T09:10:50.807
> 
> 标签：sql

需要帮助将此查询的输出组合在一起。如何完成？？TQ

```
select facility, route, operation, script_id 
from F_ROUTEOPER
where facility = 'A01' and operation in ('6910','7976')
AND src_erase_date is null
and (script_id not in ('PHQ-LOTCHKRV','PHQ-LOTCHK') or script_id is null)  
AND (route NOT LIKE '9EL%' AND route NOT LIKE '9TB%'
AND route NOT LIKE 'BLB%' AND route NOT LIKE 'BWR%' AND route NOT LIKE 'CRL%')

select facility, route, operation, script_id 
from F_ROUTEOPER
where facility = 'A01' and operation in ('6912','7976') 
AND src_erase_date is null
and (script_id not in ('PHQ-LOTCHKRV','PHQ-LOTCHK') or script_id is null)  
AND (route NOT LIKE '9EL%' AND route NOT LIKE '9TB%'
AND route NOT LIKE 'BLB%' AND route NOT LIKE 'BWR%' AND route NOT LIKE 'CRL%')

select facility, route, operation, script_id 
from F_ROUTEOPER
where facility = 'A01' and operation in ('7344','7976') 
AND src_erase_date is null
and (script_id not in ('PHQ-LOTCHKRV','PHQ-LOTCHK') or script_id is null)  
AND (route NOT LIKE '9EL%' AND route NOT LIKE '9TB%'
AND route NOT LIKE 'BLB%' AND route NOT LIKE 'BWR%' AND route NOT LIKE 'CRL%')

select facility, route, operation, script_id 
from F_ROUTEOPER
where facility = 'A01' and operation in ('8344','7976')
AND src_erase_date is null
and (script_id not in ('PHQ-LOTCHKRV','PHQ-LOTCHK') or script_id is null)  
AND (route NOT LIKE '9EL%' AND route NOT LIKE '9TB%'
AND route NOT LIKE 'BLB%' AND route NOT LIKE 'BWR%' AND route NOT LIKE 'CRL%') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:13:16.650

将所有值合并`operation`到一个 IN... 即

```
operation in ('6910','7976','6912','7344','8344') 
```

你的其他条件完全一样。完整的查询

```
select facility, route, operation, script_id 
  from F_ROUTEOPER
 where facility = 'A01'
   and operation in ('6910','7976','6912','7344','8344')
   AND src_erase_date is null
   and (script_id not in ('PHQ-LOTCHKRV','PHQ-LOTCHK') or script_id is null)  
   AND (route NOT LIKE '9EL%' AND
        route NOT LIKE '9TB%' AND
        route NOT LIKE 'BLB%' AND
        route NOT LIKE 'BWR%' AND
        route NOT LIKE 'CRL%') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T09:15:11.040

关键字 UNION 应该非常适合您。看看这里的文档 - [http://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T09:14:24.247

这四个查询似乎是相同的 excpet 谓词`AND operation In ..`，您可以将这个谓词组合成四个查询，如下所示：

```
select facility, route, operation, script_id 
from F_ROUTEOPER
where facility = 'A01' and operation in ('6910','7976', '6912', '8344','7976')
... 
```

但是，您可以使用`UNION`(implicit distinct 或`UNION ALL`根据需要组合来自不同查询的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T09:15:04.917

将 的值合并为`operation`一个`IN`：

```
select facility, route, operation, script_id 
from F_ROUTEOPER
where facility = 'A01' and operation in ('6910','7976', '6912', '7344', '8344') 
    AND src_erase_date is null 
    AND (script_id not in ('PHQ-LOTCHKRV','PHQ-LOTCHK') or script_id is null)  
    AND (route NOT LIKE '9EL%' AND route NOT LIKE '9TB%' AND route NOT LIKE 'BLB%' AND 
         route NOT LIKE 'BWR%' AND route NOT LIKE 'CRL%') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:12:18.200

如果所有查询都具有相同数量的列、相同的列名和相同的数据类型，则使用`UNION`或`UNION ALL`

```
select col1,col2,col3 from table1 
union
select col4 as col1,col5 as col2,col6 as col3 from table 2 
```

# php - 执行（“触摸”）；未在 PHP 中运行

> ID：13228974
> 
> 赞同：3
> 
> 时间：2012-11-05T09:11:21.423
> 
> 标签：php, linux, unix, exec

我需要使用我的 php 脚本修改文件日期更改。[在我的本地主机上，我使用了在 Windows 7 中运行的 XAMPP。我使用 PHP touch](http://www.php.net/manual/en/function.touch.php)没有问题，并且可以正常工作。

然而，当我将它上传到我的产品时，LINUX OS PHP`touch`不再工作了。我对其进行了调查，发现 Linux 不允许 PHP`touch`或不允许任何人更改文件修改日期。

这就是为什么我改用[exec("touch filename.txt")](http://php.net/manual/en/function.exec.php)并且它可以正常工作的原因，但是当我使用此代码时

```
exec("touch -t 201204040000.00 filename.txt"); 
```

它没有做它必须做的事情，我在这里错过了什么吗？

这些是我的参考：

*   [Linux / Unix 命令：触摸](http://linux.about.com/library/cmd/blcmdl_touch.htm)
*   [3 UNIX/Linux touch 命令示例](http://linux.101hacks.com/unix/touch/)

**编辑**

```
ls -l filename.txt
-rw-r--r-- 1 2012-11-04 12:00 filename.txt //supposed that 2012-11-04 12:00 is the original mod date of the file 
```

如果我运行此代码：

```
exec("touch filename.txt");
ls -l filename.txt
-rw-r--r-- 1 2012-11-05 11:00 filename.txt //supposed that 2012-11-05 11:00 is the current timestamp 
```

正如大家所见，上面的代码在我身上正常工作。但如果我这样运行它：

```
exec("touch -t 201204040000.00 filename.txt");
ls -l filename.txt
-rw-r--r-- 1 2012-11-05 11:00 filename.txt //The mod date doesn't changed at all. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:18:12.333

我运行了你的命令，它确实做了它应该做的事情：

```
php -r 'exec("touch -t 201204040000.00 filename.txt");'
ls -l filename.txt
-rw-r--r-- 1 2012-04-04 00:00 filename.txt 
```

也许如果您告诉我们您的期望，我们可以为您提供更多帮助。

# c# - 在 Visual Studio (Windows Mobile) 中打开数据库

> ID：13228990
> 
> 赞同：0
> 
> 时间：2012-11-05T09:12:31.203
> 
> 标签：c#, database, visual-studio, sqlite, windows-mobile

我尝试使用 Visual Studio 2008 打开数据库，但出现错误：没有这样的表。

我使用 SQLiteAdmin 创建了数据库并添加到项目中（查看 -> 服务器资源管理器 -> 数据连接 -> 添加 -> SQLiteDatabaseSource）

此外，该数据库（myDatabase.sqlite）位于项目的文件夹中，并且 SQLiteAdmin 中的查询：“SELECT Descriptcion FROM Productos”是可以的。

我试图更改数据源的路径，但错误仍然存​​在。

对不起我的英语不好。谢谢！！！

```
 string myConnString = "Data Source = myDatabase.sqlite";
   string mySelectQuery = "SELECT Descripcion FROM Productos";
   SQLiteConnection sqConnection = new SQLiteConnection(myConnString);
   SQLiteCommand sqCommand = new SQLiteCommand(mySelectQuery, sqConnection);
   sqConnection.Open();

   try
   {
       SQLiteDataReader sqReader = sqCommand.ExecuteReader(); //ERROR in run ###

       while (sqReader.Read())
       {
            Console.WriteLine(sqReader.GetInt32(0) + ", " + sqReader.GetString(sqReader.GetOrdinal("Descripcion")));
       }

            sqReader.Close();

    }

    finally
    {
            sqConnection.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:08:57.037

您的连接字符串必须是数据库的路径。

```
private const string fmtConnStr = @"Data Source=\\AppFolder\\data.db;Version=3;"; 
```

# dhtml - 如何在不单击标题的情况下对 DHTMLX 网格进行排序

> ID：13228994
> 
> 赞同：1
> 
> 时间：2012-11-05T09:12:43.920
> 
> 标签：dhtml, dhtmlx

我在 jsp 页面上使用 DHTMLX 网格。从服务器端我正在加载一些数据。一旦将数据加载到网格上，我希望数据以排序方式进行。我发现有一种方法 `"grid.sortRows(col, type, order);"`，但它仅在您单击任何标题时才有效，我希望默认情况下数据将以排序方式出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:53:03.687

```
mygrid.load(YOUR_URL, function() {
    // we are in callback
    mygrid.sortRows(0, "str", "des"); // sorts grid
    mygrid.setSortImgState(true, 0, "des"); // sets icon to sort arrow
}); 
```

# c# - WCF 错误：405 方法不允许

> ID：13228995
> 
> 赞同：19
> 
> 时间：2012-11-05T09:12:47.680
> 
> 标签：c#, wcf, jsonp, cors

对这个问题发疯。我有一个包含 2 个项目的解决方案，其中一个是带有 jquery ajax 调用的普通旧 html，而另一个是 WCF 服务。html 页面将向 WCF 服务发出 ajax 调用以获取 json 字符串并将其用于显示目的。

现在的问题是，每当我在调试模式下运行时，html 页面和 WCF 都将以不同的端口启动。这在我执行测试时为我创建了一个跨域问题（即在 Firefox 中调用 type = OPTIONS 时出现 405 Method Not Allowed 错误）。我会三重检查我的 ajax 脚本上的调用方法，并且 WCF 服务是相同的（GET）。

我会搜索谷歌，但发现要么我必须安装扩展程序，要么在 IIS 上执行一些配置，我发现这很麻烦，因为我正在做的事情很简单。按照一个示例，我将在 web.config 中添加以下配置，但它不起作用：

```
 <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="crossDomain" crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="MobileService.webHttpBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="MyServiceBehavior">
          <serviceMetadata httpGetEnabled="true"  />
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <services>
      <service name="MobileService.SimpleMemberInfo" behaviorConfiguration="MyServiceBehavior">
        <endpoint address="" binding="webHttpBinding" contract="MobileService.IMemberInfo" bindingConfiguration="crossDomain" behaviorConfiguration="MobileService.webHttpBehavior">
        </endpoint>
      </service>
    </services>
  </system.serviceModel>
  <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Methods" value="GET" />
        <add name="Access-Control-Allow-Headers" value="Content-Type, Accept" />
      </customHeaders>
    </httpProtocol>
    <modules runAllManagedModulesForAllRequests="true"/>
    <directoryBrowse enabled="true"/>
    </system.webServer> 
```

任何人有任何想法摆脱这个烦人的问题？

**编辑：**补充一点，我正在使用与 VS Studio 2012 一起提供的 IIS Express 运行调试

**添加 WCF 代码并更新 web.config**

```
[ServiceContract]
public interface IMemberInfo
{
    [WebInvoke(Method = "GET",
           BodyStyle = WebMessageBodyStyle.Wrapped,
           ResponseFormat = WebMessageFormat.Json
    )]
    [OperationContract]
    string GetMemberInfoById();
    // TODO: Add your service operations here
} 
```

我的脚本：

```
$(document).ready(function () {
    $.ajax("http://localhost:32972/SimpleMemberInfo.svc/GetMemberInfoById", {
        cache: false,
        beforeSend: function (xhr) {
            $.mobile.showPageLoadingMsg();
        },
        complete: function () {
            $.mobile.hidePageLoadingMsg();
        },
        contentType: 'application/json',
        dataType: 'json',
        type: 'GET',
        error: function () {
            alert('Something awful happened');
        },
        success: function (data) {
            var s = "";

            s += "<li>" + data + "</li>";
            $("#myList").html(s);

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T09:39:20.837

您需要使用 JSONP 进行跨域调用以绕过浏览器限制，并将您的 web.config 更新为`crossDomainScriptAccessEnabled`设置为 true 以绕过服务器限制。这里的答案中有一个很好的例子：[how to Avoid cross domain policy in jquery ajax for sumption wcf service?](https://stackoverflow.com/questions/5686059/how-to-avoid-cross-domain-policy-in-jquery-ajax-for-consuming-wcf-service)

您可能还会遇到 GET 请求问题。尝试此处列出的修复： [使 WCF Web 服务与 GET 请求一起工作](https://stackoverflow.com/questions/944678/making-a-wcf-web-service-work-with-get-requests)

总而言之，您需要一个看起来像这样的 web.config：

```
<bindings>
  <webHttpBinding>
    <binding name="crossDomain" crossDomainScriptAccessEnabled="true" />
  </webHttpBinding>
</bindings>
<behaviors>
  <endpointBehavior>
    <behavior name="restBehavior">
      <webHttp />
    </behavior>
  </endpointBehavior>
  <serviceBehavior>         
     <behavior name="MyServiceBehavior">
        <serviceMetadata httpGetEnabled="true"  />
        <serviceDebug includeExceptionDetailInFaults="true"/>
     </behavior>
  </serviceBehavior>
</behaviors>
<services>
  <service name="..." behaviorConfiguration="MyServiceBehavior">
    <endpoint address="" binding="webHttpBinding" bindingConfiguration="crossDomain" 
              contract="..." behaviorConfigurations="restBehavior" /> 
  </service>
</services> 
```

（请注意，服务和端点都附加了行为，分别允许 webHttp 调用和 httpGet 调用，并且绑定显式启用了跨域访问）。

...这样装饰的服务方法：

```
[ServiceContract]
public interface IMyService
{
    [WebGet] // Required Attribute to allow GET
    [OperationContract]
    string MyMethod(string MyParam);
} 
```

...以及使用 JSONP 的客户端调用：

```
<script type="text/javascript">
$(document).ready(function() {
    var url =  "...";
    $.getJSON(url + "?callback=?", null, function(result) { // Note crucial ?callback=?
       // Process result
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-21T10:25:36.920

然而，它是一个旧线程，但我想添加我对我面临的问题以及我为 CORS 工作所获得的解决方案的评论。我正在以下环境中开发 Web 服务：

1.  WCF 网络服务。
2.  .NET 3.5 框架。
3.  在现有的 asp.net 网站中添加了 wcf 网络服务。
4.  视觉工作室 2008

大多数人提到在 web.config`crossDomainScriptAccessEnabled`下的标签中添加属性。`<webHttpBinding>`我不确定这是否有效，但它在 3.5 版本中不可用，所以我别无选择。我还发现在 web.config 中添加以下标签会起作用......

`<httpProtocol> <customHeaders> <add name="Access-Control-Allow-Origin" value="*" /> <add name="Access-Control-Allow-Methods" value="GET" /> <add name="Access-Control-Allow-Headers" value="Content-Type, Accept" /> </customHeaders> </httpProtocol>`

但没有运气...不断收到 405 方法不允许的错误

在与这些选项进行了很多努力之后，我找到了另一种解决方案，可以根据下面给出的动态将这些标头添加到 global.asax 文件中......

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
    if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
    {
        HttpContext.Current.Response.AddHeader("Cache-Control", "no-cache");
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept, Authorization");
        HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
        HttpContext.Current.Response.End();
    }
} 
```

并从 web.config 中删除。发布网站并继续到客户端 jquery/ajax...您将从 api 调用中获取数据。祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-02T14:45:10.217

对我有用的是启用 IIS 的 WCF 相关功能： [![在此处输入图像描述](../Images/6bd7fcacbcb4fc8dcb51454c1ec9aacb.png)](https://i.stack.imgur.com/izE6e.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-17T16:48:35.997

只是想在底部附加一些与 CORS 返工有关的问题 - 它的问题是，如果您的输入不支持 GET 和 POST 方法，则 OPTIONS 请求实际上并没有返回正确的允许标头。它实际上并没有查看 WCF 端点上实际允许哪些方法 - 它只是在客户端执行 OPTIONS 请求时人为地说“GET，POST”允许应用程序中的每个端点（这实际上是客户端询问什么）支持）。

这可能没问题，如果你不是真的依赖 OPTIONS 方法中的信息来返回一个有效的方法列表（就像一些 CORS 请求的情况一样） - 但如果你是，你需要做类似的事情这个问题的解决方案： [How to handle Ajax JQUERY POST request with WCF self-host](https://stackoverflow.com/questions/15369619/how-to-handle-ajax-jquery-post-request-with-wcf-self-host)

基本上，每个端点都应该实现：

`Webinvoke(Method="OPTIONS", UriTemplate="")`

并调用一个适当的方法，该方法将适当的标头加载到调用者的响应中（包括该端点的适当的“访问控制允许方法”列表）。托管的 WCF 端点不会自动为我们执行此操作，这有点糟糕，但这是一种允许更好地控制端点的解决方法。在该解决方案中，在端点实现中加载了正确的响应标头：

```
public void GetOptions()
    {
        // The data loaded in these headers should match whatever it is you support on the endpoint
        // for your application. 
        // For Origin: The "*" should really be a list of valid cross site domains for better security
        // For Methods: The list should be the list of support methods for the endpoint
        // For Allowed Headers: The list should be the supported header for your application

        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*");
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Methods", "POST, GET, OPTIONS");
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Headers", "Content-Type, Accept, Authorization");
    } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-12-22T13:12:11.510

尝试使用。 `WebInvoke(Method = "POST")` 代替`WebInvoke(Method = "GET")`

# android - 使用具有相同应用签名的活动

> ID：13228998
> 
> 赞同：0
> 
> 时间：2012-11-05T09:12:54.780
> 
> 标签：android

我是android的初学者。我创建了一个测试应用程序，它包含 9 个用于各种目的的活动，在清单文件中注册为 LAUNCHER ACTIVITY。但是，我使用运行配置选项一次只运行一项活动。如果我在启动应用程序后断开设备与 PC 的连接并从 LAUNCHER 应用程序重新启动它。然后，它显示我在此设备上安装的具有相同应用程序签名的第一个活动。

谁能帮我理解为什么不维护该活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:11:37.127

我认为它应该起作用。

您的所有活动都不能是 Manifest 文件中的 LAUNCHER 活动。一项活动可以是 LAUNCHER。所有其他活动都可以通过意图启动。

例如，第一页（例如，WelcomeScreen.java）将是启动器活动。然后在单击某个按钮或任何其他事件时，您将不得不调用

```
startActivity(new Intent (this, NextActivity.java)) 
```

依此类推.. 当您再次启动应用程序时，WelcomeScreen.java 将再次显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:17:03.577

创建不同的活动并将它们全部分配为启动器活动不是正确的方法。应该只有一个 Launcher 活动，您的应用程序流程将通过该活动启动。您可以使用以下代码启动其他活动

```
startActivity(new Intent (ActivityA.this, ActivityB.java)); 
```

如果您有 9 个启动器活动，那么在您的设备中，同一应用程序的不同活动将有 9 个不同的图标，这根本不合适！

# android - 如何从 Android 的收件箱中删除多条消息或单条消息？

> ID：13228999
> 
> 赞同：2
> 
> 时间：2012-11-05T09:12:54.797
> 
> 标签：android, message, android-contentresolver

我在内容解析器的帮助下访问了收件箱中的所有消息，但现在的问题是我想从收件箱中删除多条消息或一条消息。我发现所有消息的删除功能不是单条消息或多条消息。我将所有消息存储在 ArrayList 中。任何帮助将不胜感激。

我的阅读消息代码是：-

```
Uri uriSMSURI = Uri.parse("content://sms/inbox");
Cursor cur = getContentResolver().query(uriSMSURI , null, null, null,
                null);
        startManagingCursor(cur);

        int size=cur.getCount();

        if (cur.moveToFirst()) 
        {

            for(int i=0;i<size;i++)
            {
                    InboxField tempInboxField = new InboxField();
                    tempInboxField.body = cur.getString(cur.getColumnIndexOrThrow("body"));
                    tempInboxField.protocol = cur.getString(cur.getColumnIndexOrThrow("protocol"));
                    tempInboxField.type =cur.getString(cur.getColumnIndexOrThrow("type"));
                    tempInboxField.status = cur.getInt(cur.getColumnIndexOrThrow("status"));
                    tempInboxField.address =cur.getString(cur.getColumnIndexOrThrow("address"));
                    String tempdate =cur.getString(cur.getColumnIndexOrThrow("date"));
                    tempInboxField.id = cur.getInt(cur.getColumnIndexOrThrow("_id"));
                    tempInboxField.person = cur.getString(cur.getColumnIndexOrThrow("person"));
                    Long timestamp = Long.parseLong(tempdate);    
                    Calendar calendar = Calendar.getInstance();
                    calendar.setTimeInMillis(timestamp);
                    Date finaldate = calendar.getTime();
                    tempInboxField.date = finaldate.toString();
                    arrayList.add(tempInboxField);
                    cur.moveToNext();
                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:43:44.623

您可以使用以下方法删除一条消息：

```
Uri deleteUri = Uri.parse("content://sms");
int count = 0;
Cursor c = context.getContentResolver().query(deleteUri, null, null,
        null, null);
while (c.moveToNext()) {
   try {
   // Delete the SMS
   String pid = c.getString(0); // Get id;
   String uri = "content://sms/" + pid;
   count = context.getContentResolver().delete(Uri.parse(uri),
               null, null);
   } catch (Exception e) {

   }
} 
```

如果要删除对话线程，可以使用以下内容：

```
String uri = "content://sms/conversations/" + pid;
getContentResolver().delete(Uri.parse(uri), null, null); 
```

其中 pid 是线程的 ID。