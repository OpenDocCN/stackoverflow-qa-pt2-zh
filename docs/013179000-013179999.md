# StackOverflow 问答 13179000-13179999

# multidimensional-array - 如何从多维数组中提取值

> ID：13179000
> 
> 赞同：2
> 
> 时间：2012-11-01T14:18:01.110
> 
> 标签：multidimensional-array

我有这个多维数组：

```
大批
(
    [汽车] => 数组
        (
            [响应码] => 200
            [福特] => 数组
                (
                    [开始] => 0
                    [计数] => 20
                    [型号] => 972000
                    [结果] => 数组
                        (
                            [0] => 数组
                                (
                                    [日期] =>
                                    [点击网址] => xx
                                    [网址] => xx
                                    [dispurl] => xx
                                    [标题] => xx
                                    [摘要] => xx
                                )

                            [1] => 数组
                                (
                                    [日期] =>
                                    [点击网址] => xx
                                    [网址] => xx
                                    [dispurl] => xx
                                    [标题] => Txx
                                    [摘要] => xx
                                )

```

我需要从**[model]** (972000)中检索值

对我来说真的很难。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:23:03.023

```
<?php
$array = array(
    "foo" => "bar",
    42    => 24,
    "multi" => array(
             "dimensional" => array(
                     "array" => "foo"
         )
    )
);

var_dump($array["foo"]);
var_dump($array[42]);
var_dump($array["multi"]["dimensional"]["array"]);
?> 
```

[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:20:37.630

如果您将数组分配给变量说 $arry 那么它将是

```
$arry['car']['ford']['model'] 
```

还有其他技术可以从数组中的每辆“汽车”中获取“模型”，这就是您要找的吗？

# javascript - 无法按下拉列表中的选定值过滤数据表

> ID：13179003
> 
> 赞同：5
> 
> 时间：2012-11-01T14:18:23.043
> 
> 标签：javascript, html, datatables

我正在使用 jQuery 插件 DataTables。我有一个包含 HTML 输入和选择的数据表。当我使用 DataTable 搜索过滤器过滤结果并搜索具有选定值“打开”的所有下拉列表时，没有任何变化。

我相信这种情况正在发生，因为表中的每个下拉列表都具有相同的选项，并且过滤器正在搜索它们并返回所有结果，因为它们都匹配。

如何让过滤器仅搜索所选值而不是下拉列表的所有选项？

我试图找到一个解决方案，但我能找到的只是这样的结果：

*   [下拉过滤 jquery 数据表](https://stackoverflow.com/questions/9616841/dropdown-filter-jquery-datatables)
*   [自定义过滤器](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/customFilters.html)

这些都涉及为每列添加自定义过滤器，我只想使用现有的 DataTable 过滤器。

### 例子

[问题的实时示例](http://jsfiddle.net/575L8/1/)，搜索“打开”或“关闭”

### 代码

```
<table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input name="name" type="text" value="Need more memory" id="name1"></td>
                <td><select name="status" id="status1">
                        <option value="2">Closed</option>
                        <option selected="selected" value="1">Open</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><input name="name" type="text" value="Can't connect" id="name2"></td>
                <td><select name="status" id="status2">
                        <option selected="selected" value="2">Closed</option>
                        <option value="1">Open</option>
                    </select>
                </td>
            </tr>
        </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-05T07:42:18.053

现在，您可以在数据表`data-search`上使用属性。[参考](https://datatables.net/manual/data/orthogonal-data#HTML-5)`<td>-element`

```
<tr>
    <td>
       <input name="name" type="text" value="Need more memory" id="name1">
     </td>
     <td data-search="Open">
        <select name="status" id="status1">
          <option value="2">Closed</option>
          <option selected="selected" value="1">Open</option>
        </select>
     </td>
    </tr>
<tr> 
```

[小提琴](http://jsfiddle.net/575L8/21/)

[我在 datatables.net 上的类似问题](https://datatables.net/forums/discussion/38067/how-to-filter-rows-on-selected-dropdownlist-value#latest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:37:31.960

有一种更好的方法可以将下拉列表放入您的单元格中。当然，这是可以搜索的。您可以观看有关此技术的[官方教程。](http://code.google.com/p/jquery-datatables-editable/wiki/CustomCellEditors)

# 客户端

## 下拉列表创建

当你初始化插件时，你可以这样做：

```
<script type="text/javascript">
   $(document).ready(function () {
      $('#datatable').dataTable().makeEditable({
         sUpdateURL: "UpdateData.php",//Server side file accepting AJAX call.
         "aoColumns": [//Column settings.
         {},//1st column with default settings.
         {//2nd column to a drop-down list.
            indicator: 'Saving...',
            loadtext: 'Loading...',
            type: 'select',//This will make it a drop-down list.
            onblur: 'submit',
            data: "{'open':'Open','closed':'Closed'}"
         }]
      });
   });
</script> 
```

关键是数据部分。您可以在此处定义列表的选项。你也可以通过 PHP 动态地添加这部分。一个选项的语法如下。

```
'variable_sent_to_UpdateData.php':'Text that will be displayed' 
```

每个选项都应该用逗号分隔。

## 列名

您还可以重命名列，如[官方教程](http://code.google.com/p/jquery-datatables-editable/wiki/EditCell)中所示，因此当它们传递到服务器时，DataTables 不会在`<th>`标记后命名它们：

```
<script type="text/javascript">
   $(document).ready(function () {
      $('#datatable').dataTable(
         aoColumns: [//Rename columns contained by AJAX call.
            {sName: "name"},
            {sName: "status"}
         ]
      ).makeEditable({
         //Previous stuff...
      });
   });
</script> 
```

# 服务器端

毕竟，您只需要在以下位置更新您的数据库`UpdateData.php`：

```
$id = $_REQUEST['id'];//The id tag of your table's row.
$column = $_REQUEST['columnName'];//Column where the cell was edited.
$value = $_REQUEST['value'];//The new value.
$columnPosition = $_REQUEST['columnPosition'];
$columnId = $_REQUEST['columnId'];
$rowId = $_REQUEST['rowId'];

switch ($column)
{
   case 'name':
      //Do SQL update...
      echo $value;
      break;
   case 'status':
      //Do SQL update...
      echo $value;
      break;
   default: echo 'Error';
} 
```

`echo`（返回）`$value`变量很重要，因为：

*   表示更新成功。
*   该值将是表中的新值。
*   如果您返回其他内容，它将被视为一条错误消息，该消息将显示在弹出窗口中，并且不会在表格中显示任何更改。

# servlets - How to get the resources (Images/JSP/CSS) and their properties which got involved in Servlet Response

> ID：13179011
> 
> 赞同：1
> 
> 时间：2012-11-01T14:18:45.120
> 
> 标签：servlets, httpresponse, servlet-filters

Once I got the servlet response,I need to check what are the resources involved in it.

Like the below

> 1) What is JSP/HTML's relative path,name which is coming as a servlet response
> 
> 2) What is the Images/CSS/Scripts involved in the response view files (JSP/HTML)

Can filter be useful at this point or any other approach, if it is then how? Any guidelines will be great help.

# javascript - Calculation based on radio button selection PDF FORM JS

> ID：13179012
> 
> 赞同：1
> 
> 时间：2012-11-01T14:18:45.663
> 
> 标签：javascript, forms, pdf, adobe

I am trying to have the "values" of radio buttons change, dependent on the selection of other radio buttons. (This is for a PDF Form in Adobe Pro (not designer)

The code which I have tried (inserted on the SingleTotal field) is as follows: however it is not calculating:

```
// Custom Calculate script
(function(){

//declare vars

var oFldSec1 = this.getField("A");
var oFldSec2 = this.getField("B");
var oFldSec3 = this.getField("C");
var oFldSel = this.getField("Options Single");
var oFldSub = this.getField("SingleTotal");

if(oFldSec1.checked) {

     switch(oFldSel.value)
   {
      case "boy":
        event.value = 30;
        break;
      case "girl":
        event.value = 35;
        break;
        default:
        event.value = 0;
        break;
   }
}
else if(oFldSec2.checked) {

switch(oFldSel.value)
   {
      case "boy":
        event.value = 40;
        break;
      case "girl":
        event.value = 45;
        break;
        default:
        event.value = 0;
        break;
   }
}

}) 
```

Any help will be greatly appreciated. Thank you :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:12:42.297

从文档，`radiogroups and checkgroups do not use the value property to store their current state`所以你在那里不走运。

尝试：

```
(function() {

    //declare vars
    var oFldSub = getField("SingleTotal");
    var total = 0;

    var selectedPlan =  getField("PlanOptions").valueAsString;
    var selectedSingle = getField("OptionsSingle").valueAsString;

    if (selectedPlan == "A") {

        switch (selectedSingle) {
        case "boy":
            total = 30;
            break;
        case "girl":
            total = 35;
            break;
        default:
            total = 0;
            break;
        }
    }
    else if (selectedPlan == "B") {

        switch (selectedSingle) {
        case "boy":
            total = 40;
            break;
        case "girl":
            total = 45;
            break;
        default:
            total = 0;
            break;
        }
    }
    event.value = total;
})() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:41:08.473

如果您只是简单地相加或相乘，我会退出 VBA 并尝试“值是以下字段的*__ ”。*

例如，将字段计划 A 的导出值设为 0，将计划 B 的值设为 10，男孩的值为 30，女孩的值为 35。

然后，无论总数应该去哪里，告诉该字段将其值计算为 PlanA、PlanB、Boy、Girl 的总和

如果选择了 PlanA 并选择了女孩，则值为 35。

# gridview - How add css class to CGridview cell (in Yii), related on another value

> ID：13179013
> 
> 赞同：3
> 
> 时间：2012-11-01T14:18:45.947
> 
> 标签：gridview, yii, yii1.x

I have list of files. In array data provider i have fields: approved, filename, uploaded etc.

I want to add css class bold to cell filename, but with condition if approved == 1. This is part of my view

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $provider,
    'filter' => $model,
    'columns' =>
        array(
            array(
                'name' => 'file_name',
                'header' => 'Filename',
                'filter' => '',
                'htmlOptions' => array(
                    'class' => ($data['approved']) ? (1) : (0)
                ),
            ), 
```

I can use $data['approved'] in value, but not in htmlOptions.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T14:39:17.027

您正在寻找的是[http://www.yiiframework.com/doc/api/1.1/CGridColumn#cssClassExpression-detail](http://www.yiiframework.com/doc/api/1.1/CGridColumn#cssClassExpression-detail)

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $provider,
    'filter' => $model,
    'columns' =>
        array(
            array(
                'name' => 'file_name',
                'header' => 'Filename',
                'filter' => '',
                'cssClassExpression' => '$data["approved"] == 1 ? "bold" : ""',
            ), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T04:46:44.953

```
array(   'name'=>'Status',
           //'value'=>'$data->getYesNoText()',
           'filter' => '',
            'cssClassExpression' => '$data["Status"] == "Allocated" ? "Allocated" : ""',
            'cssClassExpression' => '$data["Status"] == "Pending" ? "Pending" : ""',
             // 'value' => '($data->Status !== "Allocated")?$data->bold($data->Status):$data->Status',
               ) , 
```

# html - Dreamweaver convert frames to divs

> ID：13179016
> 
> 赞同：1
> 
> 时间：2012-11-01T14:18:56.443
> 
> 标签：html, frame, dreamweaver

I have an index.html that's split into 3 frames. I want to change it to divs. The "convert tables to ap divs" is grayed out, is there anything I can do? I was following the instructions from here: [http://www.ehow.com/how_8598389_convert-frames-divs-dreamweaver.html](http://www.ehow.com/how_8598389_convert-frames-divs-dreamweaver.html)

If the convert doesn't work for frames is there any other way to do it?

Thanks, AZ

# android - 如何在android中使用Parcelable接口通过意图将包含drawable参数的对象传递给另一个活动

> ID：13179024
> 
> 赞同：2
> 
> 时间：2012-11-01T14:19:10.480
> 
> 标签：android, android-intent, android-activity, drawable, parcelable

我想使用 Parcelable 接口将包含可绘制字段的对象传递给另一个 Activity。但问题是，在 `public void writeToParcel(Parcel parcel, int flags)`类中的重写方法（其对象必须发送）中，我不能有“parcel.writeDrawable”类型的方法。所以我可以通过其他领域，但不能通过 Drawable。实现 Parcelable 接口后，我在我的类中添加了以下方法。

```
public static final Parcelable.Creator<ImageInfo> CREATOR = new Parcelable.Creator<ImageInfo>() {

    public ImageInfo createFromParcel(Parcel source) {
        return new ImageInfo(source);
    }

    public ImageInfo[] newArray(int size) {
        return new ImageInfo[size];
    }
};

public int describeContents() {
    return 1;
}

public void writeToParcel(Parcel parcel, int flags) {
    parcel.writeString(name);   
    parcel.writeString(price);
    parcel.writeString(urlOfImage);
} 
```

并使用以下代码，我将我的对象置于意图中

```
Bundle b = new Bundle();
b.putParcelable("parse", imageInfo);
intentTrackIntHome.putExtras(b); 
```

所以我必须做些什么来传递那个可绘制的字段。

我知道我可以使用共享首选项、sd 卡、全局应用程序类、静态字段；但我不想使用它。因为将来我的代码可能会改变，所以我想要健壮的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:04:09.007

将您的 Drawable 转换为位图并将其发送到另一个活动。

```
Bitmap bitmap = ((BitmapDrawable)d).getBitmap();
intent.putExtra("Bitmap", bitmap); 
```

获取，那个意图

```
Bitmap bitmap = (Bitmap)this.getIntent().getParcelableExtra("Bitmap"); 
```

有关更多详细信息，请[点击此链接](http://glorious-arvind.blogspot.in/2012/11/convert-your-drawable-to-bitmap-and.html)

# sql - How to speed up a "max()-searching" SQL Subquery

> ID：13179025
> 
> 赞同：3
> 
> 时间：2012-11-01T14:19:11.157
> 
> 标签：sql, subquery, max

I have created this good but slow working SQL-Statement to search the highest price from a pricelist linked to an item from the itemlist. Known is the items itemnr:

```
SELECT i.ItemNr, i.ItemId, x.maxprice
  FROM itemlist i,
       pricelist p,
       (SELECT MAX (p2.price) AS maxprice, p2.ItemId
          FROM pricelist p2
         GROUP BY p2.ItemId) x
 WHERE i.ItemNr = 4711
   AND i.ItemId = p.ItemId
   AND i.ItemId = x.ItemId
   AND p.price = x.maxprice 
```

The itemlist holds about 100000 items and the pricelist about 1000000 prices. This statement is realy slow. I am afraid that the db-server searches the whole pricelist for every item I search.

I know the itemnr. But can I somehow search the correponding itemid and "send" this itemid to the subquery? So the subquery can find the highest price of this item quickly??? Or is there an other solution for my problem?

Help please.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:26:19.700

我已将不需要的 JOIN 删除回`pricelist`，因为您没有从中选择任何列：

```
select i.ItemNr, i.ItemId, x.maxprice
from itemlist i
inner join (
    select MAX(price) as maxprice, ItemId
    from pricelist
    group by ItemId
    ) x on i.ItemId = x.ItemId
where i.ItemNr = 4711 
```

一旦您提供了一些有关我可以提出建议的信息，一些索引调整可能会有所帮助。

# css - Disadvantages of using empty div tags for styling purposes?

> ID：13179028
> 
> 赞同：4
> 
> 时间：2012-11-01T14:19:22.217
> 
> 标签：css, html, background-image

Are there any disadvantages (aside from muddier code) to using empty elements on a page simply for styling purposes?

For instance, using some empty `<div>`s with different texture background images to lie fixed behind page content.

The obvious one is that you're technically blurring the separation between structure and presentation layers. If I'm ok with that aspect of it, I'm just wondering if this poses any SEO, performance, or other issues.

Any links or evidence that point me in either direction would be great! Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:27:32.430

从语义上讲，我认为不会。如果只是一些空元素。但是，与其使用空的 DIV 来显示多个背景，为什么不直接使用 CSS3 的背景和边框模块呢？在这个 3 级模块中，您可以为一个元素指定多个背景，我假设您的情况是 body 元素。

您可以在此处了解更多信息：[http ://www.sitepoint.com/mastering-css3-multiple-backgrounds/](http://www.sitepoint.com/mastering-css3-multiple-backgrounds/)

有关 DIV 元素及其与 SEO 的相关性的更多信息，请查看此链接：[http ://blog.ucvhost.com/advantages-of-div-tag-from-seo-prospective](http://blog.ucvhost.com/advantages-of-div-tag-from-seo-prospective)

# python - Comparing speed of non-matching regexp

> ID：13179030
> 
> 赞同：9
> 
> 时间：2012-11-01T14:19:28.113
> 
> 标签：python, regex, perl

The following Python code is incredibly slow:

```
import re
re.match( '([a]+)+c', 'a' * 30 + 'b' ) 
```

and it gets worse if you replace 30 with a larger constant.

I suspect that the parsing ambiguity due to the consecutive `+` is the culprit, but I'm not very expert in regexp parsing and matching. Is this a bug of the Python regexp engine, or any reasonable implementation will do the same?

I'm not a Perl expert, but the following returns quite fast

```
perl -e '$s="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaab"; print "ok\n" if $s =~ m/([a]+)+c/;' 
```

and increasing the number of 'a' does not alter substantially the execution speed.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T14:42:12.293

我假设 Perl 足够聪明，可以将两个`+`s 合并为一个，而 Python 不是。现在让我们想象一下引擎会做什么，如果它没有被优化掉的话。请记住，捕获通常很昂贵。另请注意，两个`+`s 都是贪婪的，因此引擎将尝试在一个回溯步骤中使用尽可能多的重复。每个要点代表一个回溯步骤：

*   引擎尽可能多地使用`[a]`，并消耗所有三十个`a`。然后它不能再往前走了，所以它离开了第一次重复并**捕获了**30`a`秒。现在下一次重复开始了，它试图与另一个重复消耗更多，`([a]+)`但这当然不起作用。然后`c`失败匹配`b`。
*   回溯！扔掉`a`被内在重复消耗的最后一个。在此之后，我们再次离开内部重复，因此引擎将**捕获**29`a`秒。然后另一个`+`开始，再次尝试内部重复（消耗第 30 次`a`）。然后我们再次离开内部重复，这也离开了捕获组，所以第一个捕获被丢弃，引擎**捕获**最后一个`a`。`c`不匹配`b`。
*   回溯！扔掉另一个`a`里面。我们**捕获**28`a`秒。捕获组的第二个（外部重复）消耗了被**捕获**`a`的最后 2秒。不匹配。**`c``b`**
***   回溯！现在我们可以在第二个其他重复中回溯并丢弃两个`a`s 中的第二个。剩下的那一个会被**俘虏**。然后我们第三次进入捕获组，**捕获**最后一个`a`。`c`不匹配`b`。*   回溯！`a`在第一次重复中降至 27秒。**

 **这是一个简单的可视化。每一行代表一个回溯步骤，每组括号表示一次内部重复的消耗。大括号表示为该回溯步骤*新*捕获的那些，而在该特定回溯步骤中不重新访问普通括号。我省略了`b`/`c`因为它永远不会匹配：

```
{aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa}
{aaaaaaaaaaaaaaaaaaaaaaaaaaaaa}{a}
{aaaaaaaaaaaaaaaaaaaaaaaaaaaa}{aa}
(aaaaaaaaaaaaaaaaaaaaaaaaaaaa){a}{a}
{aaaaaaaaaaaaaaaaaaaaaaaaaaa}{aaa}
(aaaaaaaaaaaaaaaaaaaaaaaaaaa){aa}{a}
(aaaaaaaaaaaaaaaaaaaaaaaaaaa){a}{aa}
(aaaaaaaaaaaaaaaaaaaaaaaaaaa)(a){a}{a}
{aaaaaaaaaaaaaaaaaaaaaaaaaa}{aaaa}
(aaaaaaaaaaaaaaaaaaaaaaaaaa){aaa}{a}
(aaaaaaaaaaaaaaaaaaaaaaaaaa){aa}{aa}
(aaaaaaaaaaaaaaaaaaaaaaaaaa)(aa){a}{a}
(aaaaaaaaaaaaaaaaaaaaaaaaaa){a}{aaa}
(aaaaaaaaaaaaaaaaaaaaaaaaaa)(a){aa}{a}
(aaaaaaaaaaaaaaaaaaaaaaaaaa)(a){a}{aa}
(aaaaaaaaaaaaaaaaaaaaaaaaaa)(a)(a){a}{a} 
```

和。所以。上。

请注意，最后引擎还将尝试所有组合的子集`a`（仅回溯到前 29`a`秒，然后通过前 28`a`秒）只是为了发现，这`c`也不匹配`a`。

正则表达式引擎内部的解释基于散布在[regular-expressions.info](http://www.regular-expressions.info/)周围的信息。

为了解决这个问题。只需删除其中一个`+`s。或者`r'a+c'`，如果您**确实**想要捕获`a`s use的数量`r'(a+)s'`。

最后，回答你的问题。我不会认为这是 Python 正则表达式引擎中的错误，而只是（如果有的话）缺乏优化逻辑。这个问题通常不是可以解决的，所以引擎假设你必须自己处理灾难性的回溯并不是太不合理。如果 Perl 足够聪明，能够识别出足够简单的情况，那就更好了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T14:41:42.517

通过删除嵌套量词重写您的正则表达式以消除[“灾难性回溯”](http://www.regular-expressions.info/catastrophic.html)（请参阅[​​此问题](https://stackoverflow.com/questions/12014991/python-regular-expression-why-does-this-not-work)）：

```
re.match( '([a]+)+c', 'a' * 30 + 'b' )
# becomes
re.match( 'a+c', 'a' * 30 + 'b' ) 
```**

# drupal-6 - 带有 reCaptcha 模块的 drupal 6 站点上有很多垃圾邮件

> ID：13179032
> 
> 赞同：1
> 
> 时间：2012-11-01T14:19:32.403
> 
> 标签：drupal-6, recaptcha, spam

有人知道垃圾邮件发送者如何在 drupal 6 站点上注册用户吗？我在注册页面上使用了 reCaptcha 模块，但垃圾邮件发送者注册了用户。在日志中我有这条消息“被验证码模块阻止：挑战“reCAPTCHA”（通过模块“recaptcha”），用户回答“reCAPTCHA”，但解决方案是“1”。”，来自用户/注册页面，垃圾邮件发送者使用暴力或者是 reCaptcha 模块中的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:05:37.177

我发现垃圾邮件发送者手动注册。[以前在这里](https://wordpress.stackexchange.com/questions/2943/why-do-i-get-comment-spam-even-with-akismet-and-captcha)讨论过的不幸的生活事实。我发现的最佳解决方案是用 Mollem 来赞美[reCaptcha](http://drupal.org/project/mollom)。结果好多了。

# delphi - Sending text over a named pipe crashes Delphi application

> ID：13179036
> 
> 赞同：0
> 
> 时间：2012-11-01T14:19:45.100
> 
> 标签：delphi, delphi-2009, named-pipes

I have a Delphi application, which sends piece of text to a named pipe via call

```
SendMessageToNamedPipe(hPipe, CurMsg); 
```

It works fine for some messages, but sending other texts leads to a crash of the application.

The only difference between normal and "crashing" messages I'm aware of is that the crashing messages contain lots of Cyrillic characters.

How should I encode them in order for the aforementioned call to be executed properly?

**Update 1**: Here's the implementation of `SendMessageToNamedPipe`.

```
procedure SendMessageToNamedPipe(hPipe:THandle; msg:string);
  const
    OUT_BUF_SIZE = 100;
  var
    dwWrite : DWORD;
    lpNumberOfBytesWritten : LongBool;
    utf8String : RawByteString;
    sendBuf: array[0..OUT_BUF_SIZE] of WideChar;
  begin
    utf8String := UTF8Encode(msg);

    sendBuf[0] := #0;
    lstrcatw(sendBuf, PChar(msg));

    lpNumberOfBytesWritten := WriteFile(hPipe, sendBuf, OUT_BUF_SIZE, dwWrite, NIL);

    if not lpNumberOfBytesWritten then
    begin
      OutputDebugString(PChar('Sending error: ' + SysErrorMessage(GetLastError)));
    end
    else
    begin
      OutputDebugString(PChar('Message sent, dwWrite: ' + IntToStr(dwWrite)));
    end;
  end; 
```

**Update 2**: Version of the function, which seems to work.

```
procedure SendMessageToNamedPipe(hPipe:THandle; msg:string);
const
    OUT_BUF_SIZE = 200;
var
  dwWrite : DWORD;
  Success : LongBool;
  msgToSend : PChar;
  utf8String : RawByteString;
  sendBuf: array[0..OUT_BUF_SIZE-1] of WideChar;
  AnsiCharString : PAnsiChar;
begin
    OutputDebugString(PChar('SendMessageToNamedPipe.Length(msg): ' +     IntToStr(Length(msg))));
    OutputDebugString(PChar('Sending message: ' + msg));

    utf8String := UTF8Encode(msg);

    sendBuf[0] := #0;
    lstrcatw(sendBuf, PChar(msg));

    Success := WriteFile(hPipe, sendBuf, Length(sendbuf), dwWrite, NIL);

    if not Success then
    begin
      OutputDebugString(PChar('Sending error: ' + SysErrorMessage(GetLastError)));
    end
    else
    begin
      OutputDebugString(PChar('Message sent, dwWrite: ' + IntToStr(dwWrite)));
    end;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T14:34:54.560

由于 Windows 管道函数将写入管道的数据视为二进制流，因此写入的数据类型可能导致崩溃是不合理的。

但是 SendMessageToNamedPipe 既不是 Delphi 库函数也不是 Windows API 调用。我认为您需要查看 SendMessageToNamedPipe 正在做什么，因为几乎可以肯定这就是错误所在。您可能想问以下问题：CurMsg 的数据类型是什么？SendMessageToNamedPipe 如何计算要写入管道的字节数？

**更新：**

阅读您添加到问题中的 SendMessageToNamedPipe 的实现：

1.  sendBuf 是 OUT_BUF_SIZE+1 个宽字符。您可能打算将其定义为数组 [0..OUT_BUF_SIZE-1]。我一直看到这个错误。（但这不是崩溃的原因。）

2.  utf8String 已分配但从未使用过。

3.  我认为崩溃的原因是 lstrcatw(sendBuf, PChar(msg))。如果传入的字符串长度大于 OUT_BUF_SIZE + 1 个字符，它会崩溃，因为这会溢出缓冲区 sendBuf。

4.  如果不是 lpNumberOfBytesWritten 的测试是错误的。或者更重要的是，WriteFile 的返回值是一个布尔值，表示写入是否成功，而不是写入的字节数。WriteFile 在退出时修改 dwWrite 的值以给出写入字节数的计数。

5.  刚刚发现另一个：WriteFile 正在发送 OUT_BUF_SIZE *bytes*，但 OUT_BUF_SIZE 是 sendBuf 中字符数的计数，而不是字节数。Delphi 2009 中的 Char 是 2 个字节（utf-16）。（但是好的代码总是使用 SizeOf(Char) 而不是 2，因为它可能会在未来的 Delphi 版本中改变，并且在过去已经改变过一次。）

正如大卫所写，在将 msg 写入管道之前，您实际上不需要将其复制到不同的缓冲区。表达式 PChar(msg) 返回指向以 null 结尾的 Chars 数组开头的指针，该数组包含 msg 中的数据。

反思您的代码，我会问您是否清楚管道另一端的程序是否期望接收 utf-16 字符串或 utf-8 字符串（甚至是 ANSI 字符串） ）。您需要解决这个问题，然后相应地修改 SendMessageToNamedPipe。（此外，如果它需要一个以 null 结尾的字符串，而不是一个固定长度的缓冲区，您应该只发送预期的字节数，而不是 OUT_BUF_SIZE 字节。）

**在下面回复您的评论：**

1.  您上面的代码不会将 utf-8 写入管道。它写入 utf-16。尽管您调用了 UTF8Encode，但您将结果扔掉了，正如我上面提到的。

2.  您可以将 utf8String 作为要发送的缓冲区直接传递给 WriteFile，方法如下：PRawByteString(utf8String)。该表达式返回指向 utf8String 中第一个字符的指针，就像我在上面解释的 PChar(msg) 一样。

3.  您需要传递正确的字节数以写入 WriteFile，而不是 OUT_BUF_SIZE。由于它是一个 utf-8 字符串，一个字符可以占用 1 到 4 个字节。但碰巧的是，Delphi 的 Length 函数在应用于 Utf8String 或 RawByteString 时返回*字节数，因此您可以编写 Length(utf8String)+1。*+1 包含终止#0 字符，它不包含在长度计数中。（如果您传递的是 utf-16 字符串 Length 将返回字符数，因此需要乘以 SizeOf(Char)）。

[如果您仍然不清楚，那么您可能会从阅读Delphi 和 Unicode](http://edn.embarcadero.com/article/images/38980/Delphi_and_Unicode.pdf)中受益匪浅。

# jquery - 交互式美国地图功能

> ID：13179037
> 
> 赞同：1
> 
> 时间：2012-11-01T14:19:46.193
> 
> 标签：jquery, map

我正在使用来自 newsignature (http://newsignature.github.com/us-map/) 的 jquert 制作一个非常酷的交互式我们地图。单击时，我无法弄清楚如何为每个州输入唯一信息。换句话说，当用户点击华盛顿时，他们将获得某些信息，而不是点击阿肯色州时。甚至可能具有对内容进行样式化的能力。

我正在使用的当前代码是：

```
$(document).ready(function() {
  $('#map').usmap({
    'stateSpecificStyles': {
      'AK' : {fill: '#0F253F'}
    },
    'stateSpecificHoverStyles': {
      'HI' : {fill: '#0F253F'}
    },

    'mouseoverState': {
      'HI' : function(event, data) {
        //return false;
      }
    },

    'click' : function(event, data) {
      $('#alert')
        .text('Click '+data.name+'  copy ')
        .stop()
        .css('backgroundColor', '#ff0')
        .animate({backgroundColor: '#ddd'}, 1000);
    }
  });

}); 
```

我希望看到的是，当您单击特定状态时，它会显示有关该状态的信息与每个状态的相同信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:32:48.450

嗯，他们点击的状态是在`data.name`属性中。有很多方法可以解决这个问题。你试过什么？

```
$('#map').usmap({
  // The click action
  click: function(event, data) {
    var description = "No state info loaded for this state.";
    switch(data.name)
    {
        case 'IL':
            description = 'You clicked on the Land of Lincoln!';
            break;
        case 'MO':
            description = 'You clicked on the Show-Me State!';
            break;
        // etc
    }
    $('#clicked-state')
      .text(description)
      .parent().effect('highlight', {color: '#C7F464'}, 2000);
  }
}); 
```

实际上，现在我查看了更多文档，您还可以像这样创建特定于状态的方法：

```
$('#map').on('usmapclickIL', function(event, data) {
    $('#clicked-state')
      .text('You clicked on the Land of Lincoln!')
      .parent().effect('highlight', {color: '#C7F464'}, 2000);
}); 
```

# javascript - How do I test if an object exists in a Javascript array?

> ID：13179038
> 
> 赞同：4
> 
> 时间：2012-11-01T14:19:45.773
> 
> 标签：javascript, jquery, json

I've seen other questions, and I've tried the filter function, but I'm not sure if I'm using it correctly.

Essentially I have an array of objects that looks like this:

```
[{"hour":"6 am", "date":"2012-12-01"},{"hour":"7 am", "date":"2012-12-01"}] 
```

I'm looping through a set period of days, and on each day I'm looping through the hours between 6am and 9pm. If the hour(as in the hour on that specific date) exists in the above array. I want to mark it as available in a new object that I then pass to a new array. Below is the code I'm currently using.

```
for(var i = 0; i < dayCount; i++){//Loop through the days that exist in the schedule
    day = new Object();
    day.date = Date.parse(startDate).add(i).days();
    day.dayName = weekday[day.date.getDay()]
    day.hours = new Array();
    for(var j = 6; j < 22; j++){ //Loop through hours of the day seeing if they're available/scheduled, etc.
        if(j<=12){
            thisHour = j +' am';
        } else{
            thisHour = j-12 + ' pm';        
        }
        var thisIsAvailable = $(assignedHours).filter(function(){
                return assignedHours.hour == thisHour && assignedHours.date == day.date.toString("yyyy-MM-dd");
            });
        var thisIsScheduled = 0;
        day.hours.push({hour: thisHour,available: thisIsAvailable, scheduled: thisIsScheduled});
    }
daysInSchedule.push(day);
} 
```

A couple notes. I use .toString() on the day.date property because it is formatted in JS Date format and the value I'm comparing it against is in the MYSQL Date format. I've alerted (talk about old school debugging) thisIsAvailable.length, and I get 0 everytime. Any ideas are appreciated. Thanks!

EDIT: Just realized I forgot to tell you all something very important. The array I give you is contained in the variable Named assignedHours. Sorry about leaving that out.

EDIT 2: To clarify, my question is in the bit between the two code excerpts. I'm trying to see if one of the objects in the given array matches the day and hour in the loop, and nested loop I'm running through. If it does I want to pass that on to a new object which I then push into the hours array of the day. If not then I still pass the object but with a 0 value for it being available.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:28:06.487

我怀疑您的问题在于您使用 jQuery 方法的`filter`方式：

```
var thisIsAvailable = $(assignedHours).filter(function(){
    return assignedHours.hour == thisHour && assignedHours.date == day.date.toString("yyyy-MM-dd");
}); 
```

如果我没记错的话，`assignedHours.hour`将永远是未定义的，因为它总是引用你的`assignedHours`数组（你希望它引用你正在过滤的当前元素，即*里面* `assignedHours`的元素）。

你可能想要做这样的事情：

```
var thisIsAvailable = $(assignedHours).filter(function(array_key){
    return this.hour == thisHour && this.date == day.date.toString("yyyy-MM-dd");
}); 
```

* * *

**Edit1：**正如@Kevin B 所指出的，`$.grep`它更适合过滤数组，因为它不会在您的数组周围创建 DOM 包装器：

```
$.grep(assignedHours, function(el) {
    return el.hour == thisHour && el.date == day.date.toString("yyyy-MM-dd");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:30:12.197

应 OP 的要求从评论提升为答案：

> 您应该检查`this.hour`并`this.date`在您的过滤器功能中。

# qt - 为表中的特定列设置最大 sizehint

> ID：13179040
> 
> 赞同：2
> 
> 时间：2012-11-01T14:19:49.313
> 
> 标签：qt, qt4, qtableview

我有下表（显示为`QTableView`，并使用`QAbstractTableModel`派生类作为表模型）：

![在此处输入图像描述](../Images/48a3e21df4ff86ac18d010fdcd0a7b5e.png)

如您所见，某些列占用了太多空间，例如“比特率”或“长度”列。如何为特定列设置 sizehint，或以某种方式限制它的最大大小？

我试过使用`horizontalHeader`'s `setMinimumSectionSize`，但它似乎对桌子没有影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:23:29.090

您可以尝试使用`setColumnWidth`.`QTableView`

[http://doc.qt.io/qt-4.8/qtableview.html#setColumnWidth](http://doc.qt.io/qt-4.8/qtableview.html#setColumnWidth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:31:32.367

`resizeColumnToContents`in`QTableView`用于根据用于呈现列中每个项目的委托的大小提示调整给定列的大小。

```
void QTableView::resizeColumnToContents ( int column ) 
```

使用这个只会调整可见列的大小。

[http://doc.qt.io/qt-4.8/qtreeview.html#resizeColumnToContents](http://doc.qt.io/qt-4.8/qtreeview.html#resizeColumnToContents)

# javascript - 自动调整 iFrame 大小

> ID：13179046
> 
> 赞同：1
> 
> 时间：2012-11-01T14:20:21.157
> 
> 标签：javascript, html, css

我终于搞定了 iframe 的跨域功能。我现在遇到的问题是第一页很长。当您单击 iframe 中的链接到较小页面时，iframe 不会自动调整大小，并且您在前一页高度的底部也有一个很大的间隙。

我正在使用的代码如下：

外部域上的代码：

```
<!DOCTYPE html>
<head>
</head>
<body onload="parent.postMessage(document.body.scrollHeight, 'http://target.domain.com');">
 <h3>Got post?</h3>
 <p>Lots of stuff here which will be inside the iframe.</p>
</body>
</html> 
```

要显示 iframe 的主域上的代码：

```
<script type="text/javascript">
  function resizeCrossDomainIframe(id, other_domain) {
    var iframe = document.getElementById(id);
    window.addEventListener('message', function(event) {
      if (event.origin !== other_domain) return; // only accept messages from the specified domain
      if (isNaN(event.data)) return; // only accept something which can be parsed as a number
      var height = parseInt(event.data) + 32; // add some extra height to avoid scrollbar
      iframe.height = height + "px";
    }, false);
  }
</script>

<iframe src='http://example.com/page_containing_iframe.html' id="my_iframe"  onload="resizeCrossDomainIframe('my_iframe', 'http://example.com');"> 
```

有没有人有任何想法如何修改它，如果他们能展示我必须修改的内容？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:41:41.410

首先，您必须问自己为什么要使用 iframe。如果您可以通过另一种方式（AJAX！）完成此操作，那可能是最好的。但是，我看到这个成功的唯一方法：

```
__________________
|A                |
|  ____________   |
|  |B          |  |
|  |           |  |
|  |  |C|      |  |
|  |___________|  |
|_________________| 
```

假设 A 的 url 为`http://foo.com`， B 的 url 为`http://bar.com`。B 中的任何脚本都不能影响 A。A 中的任何脚本都不能影响 B 中的页面。这是浏览器安全协议。

A 可以对 B 做的唯一一件事就是影响 src 以有效地更改 iframe 中的页面。我们可以利用它来发挥我们的优势。

在 B 中创建一个新的 iframe (C)。C 需要来自与 A 相同的服务器，所以让我们给它一个`http://foo.com/iframeheight.html`. 将其放在 iframe B 的底部（在`</body>`iframe 页面上的之前）：

```
ifrm = document.createElement("IFRAME"); 
ifrm.setAttribute("src", "http://foo.com/iframeheight.html#" + document.documentElement.scrollHeight); 
ifrm.style.width = 0+"px"; 
ifrm.style.height = 0+"px"; 
document.body.appendChild(ifrm); 
```

因为 A 和 C 的 URL 相同，所以浏览器会允许它们相互影响。`http://foo.com/iframeheight.html`应该包含一个函数来告诉 A 调整 B 的大小：

```
window.top.getElementById('my_iframe').height = window.location.hash.substring(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:51:57.253

如果您从子域加载到 iframe，那么这可以避免“权限被拒绝”：

[http://madskristensen.net/post/Iframe-cross-domain-JavaScript-calls.aspx](http://madskristensen.net/post/Iframe-cross-domain-JavaScript-calls.aspx)

# jquery - 使用媒体查询停止 jQuery

> ID：13179056
> 
> 赞同：2
> 
> 时间：2012-11-01T14:20:40.077
> 
> 标签：jquery, media

简单的问题我可以停止带有媒体查询的 jquery 函数吗？

我有一个 jQuery 幻灯片，我想在窗口达到手机大小时停止它，以便调整布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:41:45.577

`Media Queries`是一个`CSS3`概念，而不是 JavaScript 功能。因此，在 javascript 中使用媒体查询意味着，在支持实现中，查询浏览器的 CSS API 以获取值。

## 使困惑？

`window.matchMedia()`就是你从 javascript 中调用的内容

```
var mq = window.matchMedia( "(min-width: 500px)" );
if (mq.matches) {  
    // window width is at least 500px  
}  
else {  
    // window width is less than 500px  
} 
```

这又把我们带到了经典的问题，“*浏览器对它的支持是什么？* ”！*在我看来，这相当低，因为这依赖于现代*浏览器
中更常见的功能。

 *## 有希望吗？

有一个`js`项目允许从浏览器查询事务状态，封装在名为[Enquire.js](http://wickynilliams.github.com/enquire.js/)的干净 api 调用后面，并带有一些[解释和 tuts](http://css-tricks.com/enquire-js-media-query-callbacks-in-javascript/)

## 资源：

[http://www.sitepoint.com/javascript-media-queries/](http://www.sitepoint.com/javascript-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:34:34.957

如果您的意思是 css3 媒体查询，我不知道有什么方法可以。

但是这样的事情：

```
function windowSizeCheck(){
  if($(window).width() > (minSizeforSlideShow) && $(window).height() > (minHeightforSlideShow){
    doSlideShowStuff();
  }
} 
```

...可能会成功。在加载和调整事件大小时调用它 ( `$(window).resize()`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:32:31.350

我认为这是不可能的，尽管有人可能会证明我错了；

如果屏幕宽度小于 768 像素，我们会通过重新排列我们的菜单来处理我们网站上的类似问题。所以你可以在 document.ready() 上做这样的事情

```
if ($(window).width() > 767) {
  // Start jquery slideshow here
} 
```

我们还通过将宽度检查包装在一个函数中来解决浏览器的大小调整问题。

```
$(window).resize(function() {
            StartSlideshow();
        });

function StartSlideshow() {
    if ($(window).width() > 767) {
      // Start jquery slideshow here
    }
} 
```

如果你这样做，你还需要调用 document.ready 上的函数！*

# algorithm - 查找从一个图节点到另一个图节点的所有路径的逻辑

> ID：13179057
> 
> 赞同：0
> 
> 时间：2012-11-01T14:20:41.937
> 
> 标签：algorithm, logic, combinations

我有一个棘手的逻辑问题，我正在尝试创建一个算法来解决它，但我正在努力解决它。

考虑以下数据：

```
A to B
A to C
A to D
A to E
B to C
B to D
B to E
C to D
C to E
D to E 
```

如您所见，这有效地产生了这样的模型：`A - B - C - D - E`

您只能朝一个方向（从左到右）前进，而我要编写的是一种算法，可以计算出两点之间的所有可能组合，即

如果我想从`A`所有`E`可能的组合变成这样：

```
A - E 
A - D - E
A - C - E
A - B - E
A - C - D - E
A - B - D - E
A - B - C - E
A - B - C - D - E 
```

我想就是这样。

有人可以帮助我解决这个问题的逻辑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:35:33.410

首先，考虑如何表示单个“跃点”：每个节点都需要一个其相邻节点的列表。首先构建这些节点。

您还需要一种从节点池中查找节点的方法（按其名称？）。也许将它们放在地图中？

蛮力算法将从请求的节点开始并递归地跟踪所有跃点，观察循环，直到到达请求的末端，传递一个列表——将其用作下推堆栈，以记录路径。每次到达请求端时，将列表的内容保存到 Path 集合中。如果你遇到了死胡同（没有链接到请求的一端），请备份你的递归并继续前进。

根据您对速度的需求，您可以扩展您的数据结构以保存一些预先计算的路径。

尝试用伪代码和 Java 来解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:46:19.550

您的问题最好表述为：“*对于给定的有向图，列出可以从某个节点到另一个节点的所有可能路径。* ”请参阅[Graph Algorithm To Find All Connections Between Two Arbitrary Vertices](https://stackoverflow.com/questions/58306/graph-algorithm-to-find-all-connections-between-two-arbitrary-vertices?rq=1)

你可以用递归解决它：

`Paths(NodeSequence start, Node finish, ListOfNodeSequences result)`将节点序列的空白列表作为第三个参数，并且对于`Node n`可以通过从`start`添加`start`+`n`到`result`if `n`is 的一跳到达的每个节点序列`finish`，否则调用`Paths`with`start + n`作为第一个参数。

递归可能不一定是解决此问题的资源最有效的方法，但编写代码的工作量并不大。上面的结果假设你会初始化一个空的结果变量，它会被递归函数修改而不是返回，所以有点奇怪，但是我给出的版本应该是最省力的。

不完整的解决方案（省略不相关的实现细节）：

```
public class Node {
    public String name;

    public boolean Equals(Node other) {
        throw new NotImplementedException();
    }
};

public class NodeSequence {
    private ArrayList<Node> nodes;

    public NodeSequence() {
        nodes = new ArrayList<Node>();
    }

    public NodeSequence Plus(Node n) {
        // Returns this NodeSequence with n appended to the end
        throw new NotImplementedException();
    }

    public Node Last() {
        throw new NotImplementedException();
    }
}

public void paths(NodeSequence start, Node finish, ArrayList<NodeSequence> results) {
    Node startNode = NodeSequence.Last();

    ArrayList<Node> nextStops;
    // Populate nextStops with every node that is directly after startNode

    // Recursive block
    for (Node n : nextStops) {
        if (n.Equals(finish)) 
            results.Add(start.Plus(n));
        else 
            Paths(start.Plus(n), finish, results);
    }
}

ArrayList<NodeSequence> findAllPaths(Node start, Node finish) {
    ArrayList<NodeSequence> allPaths = new ArrayList<NodeSequence>();

    // This line will take a while
    paths(start, finish, allPaths);

    return allPaths;
} 
```

`findAllPaths`会给你结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:29:26.433

我认为逻辑可能如下：

1.  维护一个字符列表/数组，例如

    ```
     char[] chars = {'A','B', 'C', 'D','E'}; 
    ```

2.  创建3个索引变量，begin = 0，end = chars.length-1，index = 0；
3.  **为每个范围打印**实现 2 个嵌套的 for 循环，

     **```
     for begin =0 to end
          collect chars[beign]
          for indx end -begin to end
              collect chars[indx] 
    ```** 

 **我认为这会做到这一点。

一个示例逻辑如下：

```
 char[] chars = {'A','B', 'C', 'D','E'};
 List<Character> charList = new ArrayList<Character>();
 for (int begin=0; begin <chars.length; begin++){
   for (int index=begin; index <chars.length; index++){
     charList.add(chars[begin]);
     for (int indx1=chars.length-index; indx1 <chars.length-begin; indx1++){
        charList.add(chars[indx1+begin]);
     }
     System.out.println(charList);
     charList.clear();
   }
 } 
```

应该将结果打印为：

```
[A]
[A, E]
[A, D, E]
[A, C, D, E]
[A, B, C, D, E]
[B]
[B, E]
[B, D, E]
[B, C, D, E]
[C]
[C, E]
[C, D, E]
[D]
[D, E]
[E] 
```**

# asp.net-mvc-3 - Unobtrusive AJAX 不验证“不需要”字段的自定义属性

> ID：13179058
> 
> 赞同：1
> 
> 时间：2012-11-01T14:20:48.333
> 
> 标签：asp.net-mvc-3

我正在尝试通过 Unobtrusive AJAX 表单在 MVC 3 中实现客户端验证。

```
 public class PhoneNumberAttribute : RegularExpressionAttribute, IClientValidatable
{
    private const string Message = " must be a valid phone number";
    public PhoneNumberAttribute()
        : base(@"^[\s\d\+\(\)]+$")
    {
        ErrorMessage = "{0}" + Message;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        return new List<ModelClientValidationRule>() {
            new ModelClientValidationRule{
                ValidationType="phonenumber",
                  ErrorMessage= metadata.DisplayName + " " + Message
            } 
        };
    }
} 
```

模型：

```
 public class MyModel
{
    [DisplayName("Phone Number")]        
    [PhoneNumber]
    public string PhoneNumber{ get; set; }
 } 
```

HTML

```
 <% using (Ajax.BeginForm("Contact", new AjaxOptions() { UpdateTargetId = "ajaxcontactform", 
     OnBegin = "ShowProcessing", 
     OnComplete = "HideProessing",
     InsertionMode = InsertionMode.Replace
 }))
 {%>
           <%: Html.ValidationSummary()%>

 <%: Html.TextBoxFor(m => m.PhoneNumber, new { Class = "contacttextform" })%>
 <input id="sendBtn" name="send" type="submit" class="contactformbutton" value="Send" />
<%}%> 
```

我已经为具有 [Required] 属性以及自定义验证属性的字段包含了必需的 .js 文件和其他客户端验证工作。

请建议为什么它不适用于 PhoneNumber 字段？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:24:22.387

C# 代码只是验证的一方面。您所做的一切都是定义元数据来执行验证。您还需要使用不显眼的 JavaScript 注册验证，在 JavaScript 中，请参阅

[不显眼的收集验证](https://stackoverflow.com/questions/12266793/unobtrusive-validation-of-collection)

和

[http://odetocode.com/Blogs/scott/archive/2011/02/22/custom-data-annotation-validator-part-ii-client-code.aspx](http://odetocode.com/Blogs/scott/archive/2011/02/22/custom-data-annotation-validator-part-ii-client-code.aspx)

**编辑** 看过之后，我想知道您是否在想这个。我不明白你为什么需要`IClientValidatable`，因为你所做的一切都是继承自`RegularExpressionAttribute`，请尝试以下操作：

```
public class PhoneNumberAttribute : RegularExpressionAttribute
{
    private const string Message = " must be a valid phone number";
    public PhoneNumberAttribute()
        : base(@"^[\s\d\+\(\)]+$")
    {
        ErrorMessage = "{0}" + Message;
    }

} 
```

# c++ - 避免 C++ 中的结构填充

> ID：13179059
> 
> 赞同：7
> 
> 时间：2012-11-01T14:20:50.043
> 
> 标签：c++, memory-management, data-structures, struct

在我的代码中，我有以下内容`struct`：

```
struct foo {
 int a;
 int b;
}; 
```

在`b`中，仅存储 0 到 100 之间的值。所以一般来说，我可以用`char`. `struct`但是由于填充效果，大小是相同的。由于我的代码包含具有数百万个条目`vectors`的`sets`这些结构，因此如果我能以某种方式规避填充，它将使内存使用量减少三分之一以上。有没有可能做到这一点，例如其他一些行为相同的（增强）数据容器？

编辑：我在 Linux 系统上同时使用 GNU 和 Intel 编译器：

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T14:38:43.693

[正如社区所建议的那样，将我的评论作为答案移动:)]

这取决于编译器。你需要的是使用`struct` `pack`ing。

对于 Visual Studio，您需要`#pragma pack`，对于`gcc`，您需要使用属性`packed`。

有关详细信息，请参阅[C++ 结构对齐问题](https://stackoverflow.com/questions/1455458/c-struct-alignment-question)

[希望对您有所帮助，抱歉，我现在无法真正测试它，但这就是您所需要的]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:32:59.820

如果不使用特殊`#pragma`的 s 来控制结构填充/对齐，您可以将它们拆分`a`并`b`存储在*单独* `vector`的 s 中，并通过索引“匹配”它们。

至于`set`s，即使您可以轻松地将结构拆分为其组成部分（从纯粹的逻辑角度来看，您可能无法做到 - `set`s 没有索引），您仍然需要为动态内存管理对齐付费，这很可能抹去你可能获得的任何优势。

# windows-8 - 为 Windows Store 应用程序从 3DS max 导出 3D 模型

> ID：13179061
> 
> 赞同：3
> 
> 时间：2012-11-01T14:21:06.863
> 
> 标签：windows-8, directx-11, windows-store-apps

我有一个 Windows 8 应用程序想法，即使用在 Autodesk 的 3ds Max 中绘制的 3D 模型。我想要实现的是将这些模型（没有动画）导出到具有适当格式的一些文件中，然后使用 C++ 和 DirectX 11 从 Windows 应用商店应用程序中读取该文件并将其呈现在屏幕上。

看起来这并不容易。

根据下面的链接，微软没有生产环境的解决方案。

[http://answers.flyppdevportal.com/categories/metro/gameswithdirectx.aspx?ID=6eac65ae-9221-4999-a7b8-e9d62bb0c495](http://answers.flyppdevportal.com/categories/metro/gameswithdirectx.aspx?ID=6eac65ae-9221-4999-a7b8-e9d62bb0c495)

在上面的链接中，建议可以使用 Autodesk 的 FBX 格式进行导出，下面链接中的工具可能有助于将文件转换为 .SDKMESH 格式，该格式可以在 Windows Store 应用程序中读取（我可以证明是正确的）。

[http://blogs.msdn.com/b/chuckw/archive/2012/04/25/samples-content-exporter-update.aspx](http://blogs.msdn.com/b/chuckw/archive/2012/04/25/samples-content-exporter-update.aspx)

问题是该工具需要 Visual Studio 2010，可能还需要 DirectX SDK 以及其他一些东西来构建执行转换的可执行文件。

有没有人实施过这样的事情？或者你有什么更好的主意来做我想做的事吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:06:25.953

事后回答我自己的问题。

MSFT 看起来更上一层楼。Visual Studio 2012 有一个内置的编辑器，可以导入“.FBX”和“.OBJ”，可能还有一些其他格式。该工具可视化模型并将导入的文件编译为“.CMO”格式。该文件由您的程序读取以构建网格和其他内容。msdn 中有几个示例显示了如何读取“.CMO”文件，包括下面给出的一个。

这是更好地解释事情的示例：

[http://code.msdn.microsoft.com/Visual-Studio-3D-Starter-455a15f1](http://code.msdn.microsoft.com/Visual-Studio-3D-Starter-455a15f1)

第 9 频道视频：

[http://channel9.msdn.com/posts/Visual-Studio-3D-StarterKit](http://channel9.msdn.com/posts/Visual-Studio-3D-StarterKit)

ps：别忘了看视频中的 Towers of Hanoi3D 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:23:43.927

您可以导出为 obj 格式，然后为它创建自定义加载器非常容易，因为它只是一个文本文件。有点工作，但没有什么太复杂的。

[对象格式](http://en.wikipedia.org/wiki/Wavefront_.obj_file)

您还可以使用 assimp 来加载各种模型（将它用于我的小引擎，它就像一个魅力）。

[Assimp网站](http://assimp.sourceforge.net/)

# c++ - 用于测试 std::vector 内容的 Oneliner

> ID：13179064
> 
> 赞同：2
> 
> 时间：2012-11-01T14:21:17.663
> 
> 标签：c++, boost, tdd, googletest, c++98

这样做更方便的方法是什么：

```
EXPECT_EQ(mock->params.size(), 2);
EXPECT_EQ(mock->params[0], "firstCall");
EXPECT_EQ(mock->params[1], "secondCall"); 
```

上面的一个问题是，在进行测试驱动开发时，测试用例会崩溃，其中 mock->params 的大小将首先为零，然后再编写实际的测试代码。

顺便说一句，我不允许使用 GoogleMock，因为它需要某些我无法使用的编译器标志。我可以使用std和boost。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:35:08.607

您可以尝试使用[Boost.Assign](http://www.boost.org/doc/libs/1_51_0/libs/assign/doc/index.html)。例如，[list_of](http://www.boost.org/doc/libs/1_51_0/libs/assign/doc/index.html#list_of)序列可以与向量进行比较：

[现场演示](http://ideone.com/mPzKTS)

```
#include <iostream>
#include <ostream>
#include <vector>
#include <boost/assign/list_of.hpp>
using namespace std;
using namespace boost::assign;

int main()
{
    vector<int> v;
    v.push_back(0);
    v.push_back(1);
    cout << (v == list_of(0)(1) ) << endl;
    cout << (v == list_of(1) ) << endl;
    cout << (v == list_of(1)(2) ) << endl;
} 
```

输出是：

```
1
0
0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:48:53.560

不是一个班轮，但应该做你想做的事：

```
std::vector<std::string> expected;
expected.push_back("firstCall");
expected.push_back("secondCall");
EXPECT_EQ(mock->params,expected); 
```

否则，我建议使用`ASSERT_EQ()`第一个测试来防止您的测试用例崩溃，正如@Rook 在他的评论中所说的那样（这就是它的设计目的）。

**更新：** 使用 Boost Assign 作为@Evgeny Panasyuk 的回答表明它应该是这样的：

```
EXPECT_EQ(mock->params,list_of("firstCall")("secondCall")); 
```

如果我正确理解了这一点（从答案中看不太清楚，而且我个人从未使用过它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T02:31:50.510

您可以使用[Google Mock](http://code.google.com/p/googlemock)（Google Mock 是 Google Test 的配套模拟框架）丰富的匹配器库来编写清晰的测试断言：

```
#include <gtest.h>
#include <gmock.h>

using testing::ElementsAre;

TEST(Foo, Bar) {
  EXPECT_THAT(mock->params, ElementsAre("firstCall", "secondCall"));
} 
```

当违反测试条件时，该断言也会产生明确的信息。

# programming-languages - 为什么微软用c、c++而不是c#来开发windows？

> ID：13179066
> 
> 赞同：0
> 
> 时间：2012-11-01T14:21:24.143
> 
> 标签：programming-languages

我发现 windows 是用[c, c++](https://stackoverflow.com/a/580300/894563)编写的。C# 可能使您比 C/C++ 更有效率。用 c,c++ 开发 windows 的原因是什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:25:33.523

奇怪的问题，我们应该如何知道微软使用 c/c++ 的动机？我唯一的猜测是 c++ 出现在 c# 之前大约 17 年，而普通的 c 出现得更早，因此他们开始使用 c/c++，只是懒得切换语言。

# android - 从 NDK 获取 EMEI 或手机 ID

> ID：13179070
> 
> 赞同：0
> 
> 时间：2012-11-01T14:21:36.147
> 
> 标签：android, c++, c, android-ndk

如何从 ndk 支持获取电话 EMEI 或电话 ID。

我可以使用设备中的任何其他独特信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:34:51.143

[JNI](http://developer.android.com/guide/practices/jni.html)（它提供了 NDK 和 SDK 之间的桥梁）是可能的。

通过这种方式，您可以使用 Java API 获取设备的 IMEI（[`TelephonyManager`](http://developer.android.com/reference/android/telephony/TelephonyManager.html)在此处可用）。

# python - 查找所有“<”和“&”，但不是 CDATA 部分中的那些

> ID：13179072
> 
> 赞同：-2
> 
> 时间：2012-11-01T14:21:57.317
> 
> 标签：python, regex

[编辑]：

我知道正则表达式不是用来解析 XML 的，但**我的问题是为什么在 Python 中不能编译正则表达式。**

我期待关于在那个正则表达式中**什么不起作用而****不是为什么使用它不是一个好**主意的答案（我不明白反对票）。

[/编辑]

我正在尝试根据[此文档](http://www.w3.org/TR/xml/#syntax)编写一个逃避 XML 标记竞争的函数，我认为最好的解决方案是逃避所有不在 CDATA 部分中的“<”和“&”。

我对正则表达式有基本的了解，所以我环顾四周，发现[了这一页](http://chase-seibert.github.com/blog/2009/01/31/regular-expression-negative-lookahead-part-ii.html)和[这一](https://stackoverflow.com/questions/462831/regular-expression-to-escape-html-ampersands-while-respecting-cdata)页。

显然，与“&”一起使用的正则表达式是：

```
&(?!(?:[a-zA-Z][a-zA-Z0-9]*|#\d+);)(?!(?>(?:(?!<!\[CDATA\[|\]\]>).)*)\]\]>) 
```

但它在 python 中不起作用，事实上，如果我尝试使用它，我有：

```
In [1]: import re

In [2]: x = re.compile('&(?!(?:[a-zA-Z][a-zA-Z0-9]*|#\d+);)(?!(?>(?:(?!<!\[CDATA\[|\]\]>).)*)\]\]>)')
---------------------------------------------------------------------------
error                                     Traceback (most recent call last)
<ipython-input-2-2884ec1d2f4e> in <module>()
----> 1 x = re.compile('&(?!(?:[a-zA-Z][a-zA-Z0-9]*|#\d+);)(?!(?>(?:(?!<!\[CDATA\[|\]\]>).)*)\]\]>)')

/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/re.pyc in compile(pattern, flags)
    188 def compile(pattern, flags=0):
    189     "Compile a regular expression pattern, returning a pattern object."
--> 190     return _compile(pattern, flags)
    191 
    192 def purge():

/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/re.pyc in _compile(*key)
    243         p = sre_compile.compile(pattern, flags)
    244     except error, v:
--> 245         raise error, v # invalid expression
    246     if len(_cache) >= _MAXCACHE:
    247         _cache.clear()

error: unexpected end of pattern 
```

这让我觉得那个正则表达式不是为python编写的。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:38:55.680

您的正则表达式无法编译，因为Python 的模块`(?> ...)`不支持原子分组（又名“独立子表达式”）的语法。[PyPI 上](http://pypi.python.org/pypi/regex)`re`有一个可用的实验性重新实现，它确实支持原子组和其他不错的功能，所以你可以尝试一下。`re`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:26:25.410

XML 不是常规语言。因此，您无法使用正则表达式正确解析它。

改为使用和自定义 XML 解析器，例如[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。

如需更全面的答案，请参阅相关问题[“RegEx match open tags except XHTML self-contained tags”](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

# sharepoint - 根据下拉列表中的值更改具有特定视图的 SharePoint 页面

> ID：13179076
> 
> 赞同：1
> 
> 时间：2012-11-01T14:22:05.467
> 
> 标签：sharepoint, listview, sharepoint-designer, sharepoint-list

我在一个 SharePoint 网站中有三个页面，我们将它们称为 ViewA.aspx、ViewB.aspx 和 ViewC.aspx。

这三个视图都有 List View Webpart，它们都从同一个列表中获取数据。让我们称之为 DetailList

我已经设计了所有三个页面，以便它们只从 DetailList 中获取几个列。在列表视图 Web 部件中。

在这个列表（DetailList）中，我有一个下拉（选择）列，可以说选项 A、B 和 C。

当有人来并在列表中输入数据时（+添加新项目）。我如何做到这一点，如果该人从下拉列中选择选项 A，添加的项目可以出现在 ViewA.aspx 上，但不能出现在 ViewB.aspx 和 ViewC.aspx 上，以及与 B 和 C 类似的过程。

我拥有的唯一资源是 SharePoint Designer 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:33:04.233

为每个视图添加一个带有值的选择字段将允许视图过滤该值。这是最少的工作量。

如果您想提高解决方案的可用性...

编辑 Newform.aspx 以添加内容编辑器 webpart 将允许您添加 jQuery 函数以基于查询字符串设置适当的字段（即？DefaultFieldXTo=ViewB）

最后一步是找到一种方法来确保 Add New Item 链接添加了适当的查询字符串（可能又是 jQuery 内容编辑器 webpart 的工作）

或者，可以在视图本身上制作过滤器，以根据已捕获的字段显示不同的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:12:09.150

我想通了。

我为列表视图使用了过滤器。它可以按需要工作。

# mysql - MySQL 从触发器调用带有 select 语句的过程 - “不允许从触发器返回结果集”

> ID：13179077
> 
> 赞同：1
> 
> 时间：2012-11-01T14:22:08.377
> 
> 标签：mysql, stored-procedures, triggers, procedures

这是 SQL 向导的一个。之前有人问过类似的问题，我知道问题出在哪里，但是我在重写过程中的 select 语句以避免返回结果集并返回触发器想要的全局变量时遇到了麻烦。

对于一些背景知识，我在这里尝试完成的是使用一组触发器来调用程序，这些程序将在插入或更新行时计算相对于表中具有相同gene_id 的其他行的值的百分位数.

（使用 PMA 分隔符设置为 |）

计算百分位值的过程工作正常

```
DROP PROCEDURE IF EXISTS gecg_relative_expr_compendium |

CREATE PROCEDURE gecg_relative_expr_compendium( IN in_gene_id varchar(24), IN in_fpkm double, OUT percentile float(4,2) ) 
BEGIN 
    SET @row := 0;
    SELECT fpkm, ( (rank / @row) *100 ) AS percentile
    FROM (
        SELECT fpkm, @row := @row +1 AS rank, gene_id
        FROM gene_expression_cufflinks_gene
        WHERE gene_id = in_gene_id
        ORDER BY fpkm ASC
    ) AS p
    WHERE fpkm = in_fpkm;
END | 
```

我可以这样称呼它：

```
CALL gecg_relative_expr_compendium('ENSG00000251948', 19367800, @percentile) 
```

回报：

```
fpkm    percentile
19367800    100.0000 
```

我的触发器：

```
DROP TRIGGER IF EXISTS insert_gecg_relative_expr |

CREATE TRIGGER insert_gecg_relative_expr

 BEFORE INSERT ON `gene_expression_cufflinks_gene` FOR EACH ROW  
 BEGIN  
    CALL gecg_relative_expr_compendium(NEW.gene_id, NEW.fpkm, NEW.fpkm_percentile_compendium) ;
 END  | 
```

当我插入触发触发器的行时，它会失败（为清楚起见，修剪了不相关的列）

```
 INSERT INTO `mctp`.`gene_expression_cufflinks_gene` (
`gene_id` ,
`fpkm`,
`fpkm_percentile_compendium` ,
`fpkm_percentile_origin_tissue` ,
`fpkm_percentile_collection_tissue` ,
`fpkm_percentile_sample_cancer`
)
VALUES ('ENSG00000239906','555', NULL , NULL , NULL , NULL , NULL , NULL) 
```

最终，我希望我的触发器将计算出的 NEW 百分位值插入到要插入的行中，例如 NEW.fkpm_percentile_compendium。出于性能原因，需要预先计算这些百分位值，因为该表将超过 500m 行，并且最终必须根据关系计算其他百分位值，从而导致过多的连接。

我有一个模糊的想法，即解决方案应该涉及 SELECT INTO 变量而不是简单的 select 语句，但这会破坏我的程序。

```
DROP PROCEDURE IF EXISTS gecg_relative_expr_compendium |

CREATE PROCEDURE gecg_relative_expr_compendium( IN in_gene_id varchar(24), IN in_fpkm double, OUT percentile float(4,2) ) 
BEGIN 
    SET @row := 0;
    SELECT fpkm, ( (rank / @row) *100 ) AS percentile INTO fpkm, percentile
    FROM (
        SELECT fpkm, @row := @row +1 AS rank, gene_id
        FROM gene_expression_cufflinks_gene
        WHERE gene_id = in_gene_id
        ORDER BY fpkm ASC
    ) AS p
    WHERE fpkm = in_fpkm;
END | 
```

给我：

```
#1327 - Undeclared variable: fpkm 
```

所以我的问题是

1> 如何在同一程序中访问我选择 INTO 的新变量？

2> 如何在不返回结果集的情况下将变量返回到触发器？

非常感谢你的帮助。

* * *

更新>>这里是工作程序和触发器：

```
DROP PROCEDURE IF EXISTS gecg_relative_expr_compendium |
CREATE PROCEDURE gecg_relative_expr_compendium( IN in_gene_id varchar(24), IN in_fpkm double, OUT out_fpkm double, OUT out_percentile float(5,2)  ) 
BEGIN 
    SET @row := 0;
    SELECT fpkm, ( (rank / @row) *100 ) AS percentile
    FROM (
        SELECT fpkm, @row := @row +1 AS rank, gene_id
        FROM gene_expression_cufflinks_gene
        WHERE gene_id = in_gene_id
        ORDER BY fpkm ASC
    ) AS p
    WHERE fpkm = in_fpkm
    LIMIT 1 
    INTO out_fpkm, out_percentile;
END |

DROP TRIGGER IF EXISTS insert_gecg_relative_expr |

CREATE TRIGGER insert_gecg_relative_expr

 BEFORE INSERT ON `gene_expression_cufflinks_gene` FOR EACH ROW  
 BEGIN  
    CALL gecg_relative_expr_compendium(NEW.gene_id, NEW.fpkm, @f, @p);
    SET NEW.fpkm_percentile_compendium = @p;
 END  
| 
```

触发器在插入时对行运行百分位数计算。现在进行下一个任务，在与该gene_id 匹配的所有其他行上运行该过程。呵呵。

xoxoxox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:30:10.290

想到两件事：

1）这是奇怪的语法：

```
SELECT fpkm, ( (rank / @row) *100 ) AS percentile INTO fpkm, percentile 
```

在此 select 语句之后，您不能使用 'fpkm'。

2）它有点做作，但从过程中“返回”值的一种方法是将它们放入临时表中。然后从调用过程中选择它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:30:54.113

```
SELECT fpkm, ( (rank / @row) *100 ) AS percentile INTO fpkm, percentile
                                                       ^^^^ 
```

有你未声明的变量。可能应该是`in_fpkm`或其他名称。

# couchdb - CouchDB：如何使用 _revs_diff 获取文档修订 ID

> ID：13179091
> 
> 赞同：5
> 
> 时间：2012-11-01T14:22:41.963
> 
> 标签：couchdb

我尝试测试 couchDB 的 _revs_diff api 以获取文档修订。这是我使用的命令

```
curl -X POST http://******:******@localhost:5984/grocery-sync/_revs_diff -H "Content-type:application/json" 
```

结果是

```
{"error":"unknown_error","reason":"badarg"} 
```

有谁知道这样做的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:35:10.083

根据[CouchDB wiki page](http://wiki.apache.org/couchdb/HttpPostRevsDiff)，`_revs_diff`如果给定文档的修订无效，将返回一个值。没有给出使用`curl`的例子。

查看[这个发布问题的邮件列表](http://permalink.gmane.org/gmane.comp.db.couchdb.user/14773)似乎是您需要包含文档和修订信息，如下所示：

```
$ curl -X POST -H "Content-type:application/json" \
   http://*:*@localhost:5984/grocery-sync/_revs_diff \
   -d '{"0d63eac0ca9a37daa062b23853a4cf4d":["1-e9e4e9c76323a267ff4f780f9f979b9f", "12-3286453e55eb2c401bc194670075f942"]}' 
```

其中字典键 ( `0d63...cf4d`) 是文档 ID，数组是修订 ID。在此示例中，两个修订版 (`1-...`和`12-...`) 都存在于数据库中，因此响应为

```
{} 
```

如果我提供缺少的修订 ID（我发明的）：

```
$ curl -X POST -H "Content-type:application/json"  \
  http://*:*@localhost:5984/grocery-sync/_revs_diff \
  -d '{"0d63eac0ca9a37daa062b23853a4cf4d":["1-abcdef"]}' 
```

回应是

```
{"0d63eac0ca9a37daa062b23853a4cf4d":{"missing":["1-abcdef"]}} 
```

# ruby-on-rails - 将有关在 ruby on rails 中生成报告的所有逻辑放置在哪里的最佳位置是什么？

> ID：13179093
> 
> 赞同：0
> 
> 时间：2012-11-01T14:22:47.143
> 
> 标签：ruby-on-rails, code-organization, project-organization

我有许多模型用于获取数据并生成报告。

报告不需要存储，即它不是活动记录。

但肯定有大约 80 行代码可以为报告生成数据。

我应该把这些线放在哪里？

它们目前在控制器中，但由于控制器应该很薄，我不确定这是否是最好的地方。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T14:54:49.733

我会在应用程序中创建一个名为 的目录`reports`，并将我的所有报告都放在那里。

只要文件名和类遵循正常约定，rails 中的 app 目录中的所有内容都可以找到。

例如，如果您有以下内容`app/reports/example_report.rb`：

```
class ExampleReport
  def initialize
    ...
  end
end 
```

您将能够从您的控制器中使用它：

```
class SomethingController < ApplicationController
  def something
    example = ExampleReport.new
    ...
  end
end 
```

依赖模型的报告被认为是应用程序域的一部分，这就是我推荐 app 目录的原因。在应用程序中添加子目录的便利性意味着您可以在应用程序中保持不同角色的逻辑分离。不难猜测某事的实现在哪里。控制器在`app/controllers`，模型在`app/models`，因此报告在`app/reports`。例如，如果您要向您的应用程序添加通用服务类，它们可以进入`app/services`.

相反，它们不属于 lib，因为它们不能以通用方式运行。为了进一步说明这一点，只有您可以设想在*任何*rails 项目中使用的代码才属于 lib 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:45:21.097

我会说类似的东西属于辅助方法/方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:51:21.513

当您的业务逻辑与持久性无关时，您可以将其放置在模型中，而无需从 ActiveRecord 继承。看：

*   [使 ActiveRecord 模型变薄](https://solnic.codes/2011/08/01/making-activerecord-models-thin/)
*   [ActiveRecord 是个问题](http://blog.steveklabnik.com/posts/2011-12-30-active-record-considered-harmful#activerecord_is_the_problem)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T14:48:32.327

`Helpers`应该是放置该代码的更好地方，

还要确保用于获取/处理数据的纯逻辑相关代码仍应转到`model`

# html - Dashed Table border changing to solid?

> ID：13179100
> 
> 赞同：2
> 
> 时间：2012-11-01T14:23:05.273
> 
> 标签：html, css, css-tables

See this example:

[http://jsfiddle.net/sM3hT/](http://jsfiddle.net/sM3hT/)

A normal table styled as follows:

```
table {
 width:100%; 
 border-collapse:collapse;
}
td {
  border:1px dashed black;
  padding:5px;
}
th {
 background:orange;
} 
```

You'll notice that the border dashing is not spaced evenly, sometimes even appearing as a solid line. Is this something inherent to dashed borders?

I've also tried applying the dashed borders to the tr instead of td, thinking that these are all the same length so the spacing would be even, but that didn't help either.

Is this something that cannot be changed?

Note: This is safari 6, it may work as advertised in other browsers.

I've included a screenshot of what it looks like at a certain width:

![enter image description here](../Images/f3abf903733050ea22e768b0aa57456d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:38:50.930

I’m afraid the problem is inherent to dashed borders of adjacent cells, or adjacent elements in general. The problem is that browsers do the dashing for each element’s border separately, so the dashes won’t generally be evenly spaced when seen considering e.g. the borders of cells of a row as one line.

The problem is probably best avoided by using e.g. a solid border of a lighter color instead, e.g. `border: 1px solid gray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:44:32.137

There is small bug in safari when it comes to rendering dotted/dashed borders [this](http://phrogz.net/css/SafariZeroPxBorderOverride.html) article might/might not helpful reading

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T14:41:46.850

```
tr { border-bottom:1px dashed black; } 
```

or

```
tr { border-bottom:1px dashed black!important; } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T15:09:49.890

Bugs dessapear:

The problem is solve really whoit ampliate column text in minimum : you look whith this table:

```
<table class="mytabletable grid" cellpadding="0" cellspacing="0">
    <thead>

        <tr class="header gradient header_padding_0">
            <th class="column_1">
                <div class="column_inner">Analysis</div>
            </th>
            <th class="column_2">
                <div class="column_inner">Effect Size</div>
            </th>
            <th class="column_3">
                <div class="column_inner">Small</div>
            </th>
            <th class="column_4">
                <div class="column_inner">Medium</div>
            </th>
            <th class="column_5">
                <div class="column_inner">Large</div>
            </th>
            <th class="column_6">
                <div class="column_inner">Notes</div>
            </th>
        </tr>
    </thead>
    <tfoot>
        <tr class="border footer_border_top">
            <td colspan="6">
                <div class="column_inner"></div>
            </td>
        </tr>
        <tr class="footer gradient footer_padding_0 hide_border_top_1 hide_border_bottom_1">
            <td class="column_1">
                <div class="column_inner">Chi-Square tests</div>
            </td>
            <td class="column_2">
                <div class="column_inner">Cohen's **w**</div>
            </td>
            <td class="column_3">
                <div class="column_inner">0.10</div>
            </td>
            <td class="column_4">
                <div class="column_inner">0.30</div>
            </td>
            <td class="column_5">
                <div class="column_inner">ampliate</div>
            </td>
            <td class="column_6">
                <div class="column_inner"></div>
            </td>
        </tr>
        <tr class="border footer_border_bottom">
            <td colspan="6">
                <div class="column_inner"></div>
            </td>
        </tr>
        <tr class="sticky-false">
            <td colspan="6"></td>
        </tr>
    </tfoot>
    <tbody>
        <tr class="row_1 row_padding_0 first_row row_odd">
            <td class="column_1 first_column">t-test</td>
            <td class="column_2">Cohen's **d**</td>
            <td class="column_3">0.20</td>
            <td class="column_4">anchor</td>
            <td class="column_5">0.80</td>
            <td class="column_6 last_column"></td>
        </tr>
        <tr class="row_2 row_padding_0  row_even">
            <td class="column_1 first_column">F-test</td>
            <td class="column_2">Cohen's **f**</td>
            <td class="column_3">0.10</td>
            <td class="column_4">0.25</td>
            <td class="column_5">0.40</td>
            <td class="column_6 last_column"></td>
        </tr>
        <tr class="row_3 row_padding_0  row_odd">
            <td class="column_1 first_column">F-test</td>
            <td class="column_2">eta^2</td>
            <td class="column_3">0.01</td>
            <td class="column_4">0.06</td>
            <td class="column_5">0.14</td>
            <td class="column_6 last_column">SPSS provides</td>
        </tr>
        <tr class="row_4 row_padding_0  row_even">
            <td class="column_1 first_column">Correlation</td>
            <td class="column_2">Pearson r</td>
            <td class="column_3">0.10</td>
            <td class="column_4">0.30</td>
            <td class="column_5">0.50</td>
            <td class="column_6 last_column">SPSS provides</td>
        </tr>
        <tr class="row_5 row_padding_0  row_odd">
            <td class="column_1 first_column">Correlation Differences</td>
            <td class="column_2">Cohen's **q**</td>
            <td class="column_3">0.10</td>
            <td class="column_4">0.30</td>
            <td class="column_5">ochenta</td>
            <td class="column_6 last_column">Fisher z transformation</td>
        </tr>
        <tr class="row_6 row_padding_0 last_row  hide_border_bottom_1 row_even">
            <td class="column_1 first_column">Proportions (%s)</td>
            <td class="column_2">Cohen's **h**</td>
            <td class="column_3">0.20</td>
            <td class="column_4">0.50</td>
            <td class="column_5">0.80</td>
            <td class="column_6 last_column">Arcsine transformation</td>
        </tr>
    </tbody>
</table>​ 
```

# c - 标准 C 库和系统调用如何协同工作？

> ID：13179102
> 
> 赞同：5
> 
> 时间：2012-11-01T14:23:08.830
> 
> 标签：c, compiler-construction, kernel, glibc, standard-library

我最近对编译器、标准库和内核的内部工作产生了兴趣。在搜索标准 C 库的源代码时，我遇到了 Glibc。但是在Glibc的官网上是这样写的：`the library which defines the ''system calls'' and other basic facilities such as open, malloc, printf, exit...`

所以我猜Glibc实际上并没有提供标准C库的源代码，而是提供了这些函数的系统调用，然后内核来处理它们，对吗？

我想更多地了解这些事情。例如，C 程序中如何执行`sin`、`printf`和`strlen`, 函数？如果 Glibc 只提供系统调用，那么这些函数的实际源代码在哪里？内核如何执行它们？在哪里可以找到执行这些功能的内核部分的源代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:34:12.813

C 库是一个用户态库，*几乎*与任何库一样。

系统调用是内核提供的接口。它们与 C 标准无关。它们是特定于操作系统的。类 UNIX 操作系统之间存在一些相似之处，但这是一个不同的主题。

C 库中实现的一些函数最终会以一种或另一种方式调用系统调用。但这与任何其他图书馆都是一样的。

我建议查看 OpenBSD 的 C 库。Android手机也使用它。它简单明了，并且有据可查。你可以在[这里](http://www.openbsd.org/cgi-bin/cvsweb/src/lib/libc/)找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:34:55.127

Glibc 提供库函数的代码，也提供系统调用定义。只有一小部分提供的函数是真正的系统调用。其他人将其代码放在库中，要么在内部完成所有工作，要么通过内部调用将其委托给内核。您可以在各种 libc 源代码中查看它们的工作原理。Glibc、Eglibc、Newlib、Dietlibc 等的源代码适合您。

尽管有可能让操作系统对任何 libc 调用都有系统调用，但由于许多原因，它没有完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:34:17.997

你可以在[这个页面](http://asm.sourceforge.net/syscall.html)感受一下系统调用。它很旧，但为您提供了想法和指向内核中实现调用的文件的指针。在一个典型的 Unix 系统中，只有几百个系统调用。例如，您可以看到 sys_open 或 sys_write。当您查看 fopen 或 open 之类的调用时，最终它们都映射到 sys_open。诸如 printf 或将映射写入 sys_write 之类的东西。

内核调解诸如访问文件之类的事情，因此需要成为一个瓶颈，但是库通过将这些调用包装在有用的抽象中来使访问这些调用变得更容易，对于给定的系统调用，通常不止一个。库本身不提供系统调用，它设置了一些东西，然后捕获到内核，内核实现它们。系统调用实际上是 libc 程序所针对的内核的 API。

有些调用，如 strlen，根本不需要内核访问，该调用可以只查看已经分配的内存。

从用户空间探索这个的一个好工具是[strace](http://linux.die.net/man/1/strace)。给定一个程序，它将显示该程序进行的所有系统调用。您可以使用它来梳理 libc 调用如何映射到系统调用。

# signalr - IIS 6 / windows server 2003 R2 上的 SignalR 配置

> ID：13179103
> 
> 赞同：2
> 
> 时间：2012-11-01T14:23:11.233
> 
> 标签：signalr, signalr-hub

当我访问部署在 IIS 6 / winSrv 2003 r2 上的 Web 应用程序上的信号器/集线器 URL 时，我收到错误 404。

我试过 runAllManagedModulesForAllRequests = true 和 false。但是我在其中一个#issues 中发现了一条评论，说这是针对II7 和> 的。

此外，我将通配符映射设置为 v4.0.30319\aspnet_isapi.dll 并且仍然得到相同的错误 404。

IIS 6 日志错误：

> W3SVC1 127.0.0.1 GET /devweb/signalr/hubs - 80 - 127.0.0.1 Mozilla/4.0+（兼容；+MSIE+7.0；+Windows+NT+5.2；+Trident/4.0；+.NET+CLR+1.1.4322 ;+.NET+CLR+2.0.50727;+.NET+CLR+3.0.4506.2152;+.NET+CLR+3.5.30729;+.NET4.0C;+.NET4.0E) 404 0 3

当我在 Win7 上部署到 IIS 7 时工作正常。我还需要让它在 IIS 6 上运行，以便可以将其部署给一些客户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:05:53.780

您是否将映射设置为“所有动词”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T08:09:03.127

[这个](http://blogs.microsoft.co.il/ranw/2011/01/11/configure-your-aspnet-application-that-uses-routing-in-iis-6/)解决方案对我有用。

1.  转到 IIS 管理器中的 Asp.Net 应用程序的属性
2.  点击配置
3.  单击插入（插入通配符应用程序映射）
4.  粘贴路径aspnet_isapi.dll：c:\windows\microsoft.net\framework\v4.0.30319\aspnet_isapi.dll
5.  取消选中：验证文件是否存在
6.  按确定并关闭所有对话框。

# c# - 在 Silverlight 4 中动态加载字体

> ID：13179106
> 
> 赞同：0
> 
> 时间：2012-11-01T14:23:25.207
> 
> 标签：c#, .net, silverlight, asynchronous, silverlight-4.0

我有以下内容（就本文*而言，字体列表实际上要短得多*）：

```
private static ObservableCollection<FontFamily> colFontFamilies = new ObservableCollection<FontFamily>()
{
     new FontFamily("/PrintVites;component/Fonts/Fonts.zip#Trajan Pro"),
     new FontFamily("/PrintVites;component/Fonts/Fonts.zip#Futura Std Light"),
     new FontFamily("/PrintVites;component/Fonts/Fonts.zip#GeosansLight")
}; 
```

这些是当前嵌入的字体。如何在应用程序加载后使用 WebClient 对象异步加载这些？我必须将它们放在一个 zip 文件中，还是可以单独加载每个字体文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:05:01.560

通过将字体放在一个 zip 文件中并使用 WebClient 对象读取它们，我自己想出来了。

# javascript - nodejs中的单例模式 - 需要吗？

> ID：13179109
> 
> 赞同：108
> 
> 时间：2012-11-01T14:23:35.677
> 
> 标签：javascript, node.js, design-patterns, singleton

我最近看到[了这篇](http://simplapi.wordpress.com/2012/05/14/node-js-singleton-structure/)关于如何在 Node.js 中编写单例的文章。我知道以下`require` [国家](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)的文件：

> 模块在第一次加载后被缓存。多次调用`require('foo')`可能不会导致模块代码被多次执行。

因此，似乎每个必需的模块都可以轻松地用作单例，而无需单例样板代码。

**问题：**

上面的文章是否提供了关于创建单例的解决方案？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-01T14:35:58.343

以上所有内容都过于复杂。有一种观点认为设计模式显示出实际语言的缺陷。

具有基于原型的 OOP（无类）的语言根本不需要单例模式。您只需动态创建一个（吨）对象，然后使用它。

至于 node 中的模块，是的，默认情况下它们是缓存的，但是如果你想热加载模块更改，可以对其进行调整。

但是，是的，如果你想全部使用共享对象，把它放在一个模块导出中就可以了。只是不要将它与“单例模式”复杂化，在 JavaScript 中不需要它。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2016-08-10T13:31:36.837

## 这基本上与 nodejs 缓存有关。干净利落。

[https://nodejs.org/api/modules.html#modules_caching](https://nodejs.org/api/modules.html#modules_caching)

(v 6.3.1)

> ## 缓存
> 
> 模块在第一次加载后被缓存。这意味着（除其他外）每次调用 require('foo') 都将返回完全相同的对象，如果它会解析为同一个文件。
> 
> 多次调用 require('foo') 可能不会导致模块代码被多次执行。这是一个重要的特点。有了它，可以返回“部分完成”的对象，从而允许加载传递依赖项，即使它们会导致循环。
> 
> 如果你想让一个模块多次执行代码，那么导出一个函数，然后调用那个函数。
> 
> ## 模块缓存注意事项
> 
> 模块根据其解析的文件名进行缓存。由于模块可能会根据调用模块的位置（从 node_modules 文件夹加载）解析为不同的文件名，因此不能保证 require('foo') 将始终返回完全相同的对象，如果它会解析为不同的文件.
> 
> 此外，在不区分大小写的文件系统或操作系统上，不同的解析文件名可以指向同一个文件，但缓存仍会将它们视为不同的模块，并会多次重新加载文件。例如， require('./foo') 和 require('./FOO') 返回两个不同的对象，无论 ./foo 和 ./FOO 是否是同一个文件。

所以简单来说。

如果你想要一个单身人士；**导出一个对象**。

如果您不想要单例；**导出一个函数**（并在该函数中做东西/返回东西/任何东西）。

*要非常清楚，如果您正确执行此操作，它应该可以工作，请查看[https://stackoverflow.com/a/33746703/1137669（Allen](https://stackoverflow.com/a/33746703/1137669) Luce 的回答）。它在代码中解释了由于不同解析的文件名而导致缓存失败时会发生什么。但是，如果您总是解析为相同的文件名，它应该可以工作。*

## **2016 年更新**

[使用 es6 符号在 node.js 中创建一个真正的单例](https://derickbailey.com/2016/03/09/creating-a-true-singleton-in-node-js-with-es6-symbols/) **另一个解决方案**：[在此链接中](https://blog.logrocket.com/design-patterns-in-node-js/)

## **2020 年更新**

这个答案是指**CommonJS**（Node.js 自己的导入/导出模块的方式）。Node.js 很可能会切换到**ECMAScript 模块**：[https ://nodejs.org/api/esm.html](https://nodejs.org/api/esm.html) *（如果您不知道，ECMAScript 是 JavaScript 的真名）*

迁移到 ECMAScript 时，请先阅读以下内容：[https ://nodejs.org/api/esm.html#esm_writing_dual_packages_while_avoiding_or_minimizing_hazards](https://nodejs.org/api/esm.html#esm_writing_dual_packages_while_avoiding_or_minimizing_hazards)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-11-16T23:45:43.327

**不会。** 当 Node 的模块缓存失败时，单例模式就会失败。我修改了示例以在 OSX 上有意义地运行：

```
var sg = require("./singleton.js");
var sg2 = require("./singleton.js");
sg.add(1, "test");
sg2.add(2, "test2");

console.log(sg.getSocketList(), sg2.getSocketList()); 
```

这给出了作者预期的输出：

```
{ '1': 'test', '2': 'test2' } { '1': 'test', '2': 'test2' } 
```

但是一个小的修改会破坏缓存。在 OSX 上，执行以下操作：

```
var sg = require("./singleton.js");
var sg2 = require("./SINGLETON.js");
sg.add(1, "test");
sg2.add(2, "test2");

console.log(sg.getSocketList(), sg2.getSocketList()); 
```

或者，在 Linux 上：

```
% ln singleton.js singleton2.js 
```

然后将`sg2`要求行更改为：

```
var sg2 = require("./singleton2.js"); 
```

和*bam*，单例被击败：

```
{ '1': 'test' } { '2': 'test2' } 
```

我不知道有一种可以接受的方法来解决这个问题。如果你真的觉得有必要做一些类似单例的东西并且可以污染全局命名空间（以及可能导致的许多问题），你可以将作者`getInstance()`和`exports`行更改为：

```
singleton.getInstance = function(){
  if(global.singleton_instance === undefined)
    global.singleton_instance = new singleton();
  return global.singleton_instance;
}

module.exports = singleton.getInstance(); 
```

也就是说，我从来没有在生产系统上遇到过需要做这样的事情的情况。我也从来没有觉得需要在 Javascript 中使用单例模式。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-11-01T16:43:36.437

进一步查看模块文档中的[模块缓存警告：](http://nodejs.org/api/modules.html#modules_module_caching_caveats)

> 模块根据其解析的文件名进行缓存。由于模块可能会根据调用模块的位置（从 node_modules 文件夹加载）解析为不同的文件名，**因此不能保证**require('foo') 将始终返回完全相同的对象，如果它会解析为不同的文件.

因此，根据您在需要模块时所处的位置，可以获得模块的不同实例。

听起来模块**不是**创建单例的简单解决方案。

**编辑：**或者他们可能**是**. 像@mkoryak 一样，我无法提出单个文件可能解析为不同文件名（不使用符号链接）的情况。但是（正如@JohnnyHK 评论），不同目录中文件的多个副本`node_modules`将分别加载和存储。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-11-01T14:32:36.123

像这样的 node.js（或浏览器 JS）中的单例是完全没有必要的。

由于模块是缓存和有状态的，因此您提供的链接上给出的示例可以更简单地重写：

```
var socketList = {};

exports.add = function (userId, socket) {
    if (!socketList[userId]) {
        socketList[userId] = socket;
    }
};

exports.remove = function (userId) {
    delete socketList[userId];
};

exports.getSocketList = function () {
    return socketList;
};
// or
// exports.socketList = socketList 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-11-01T14:31:08.827

在 js 中做单例不需要什么特别的东西，文章中的代码也可以是：

```
var socketList = {};

module.exports = {
      add: function() {

      },

      ...
}; 
```

在 node.js 之外（例如，在浏览器 js 中），您需要手动添加 wrapper 函数（在 node.js 中自动完成）：

```
var singleton = function() {
    var socketList = {};
    return {
        add: function() {},
        ...
    };
}(); 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2017-08-05T12:50:56.723

**这里唯一使用 ES6 类的答案**

```
// SummaryModule.js
class Summary {

  init(summary) {
    this.summary = summary
  }

  anotherMethod() {
    // do something
  }
}

module.exports = new Summary() 
```

需要这个单例：

```
const summary = require('./SummaryModule')
summary.init(true)
summary.anotherMethod() 
```

这里唯一的问题是您不能将参数传递给类构造函数，但可以通过手动调用`init`方法来规避。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-06-06T15:33:36.143

单例在 JS 中很好，它们只是不需要那么冗长。

在节点中，如果您需要一个单例，例如在服务器层的各种文件中使用相同的 ORM/DB 实例，您可以将引用填充到全局变量中。

只需编写一个模块，如果它不存在则创建全局变量，然后返回对其的引用。

@allen-luce 在这里复制了他的脚注代码示例：

```
singleton.getInstance = function(){
  if(global.singleton_instance === undefined)
    global.singleton_instance = new singleton();
  return global.singleton_instance;
};

module.exports = singleton.getInstance(); 
```

但重要的是要注意，*不需要*`new`使用关键字。任何旧的对象、函数、iife 等都可以工作——这里没有发生 OOP 巫术。

 *如果您在一个返回对它的引用的函数中关闭某个 obj 并将该函数设为全局函数，那么即使重新分配全局变量也不会破坏已经从它创建的实例，尽管这可能很有用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-15T15:53:35.763

保持简单。

*foo.js*

```
function foo() {

  bar: {
    doSomething: function(arg, callback) {
      return callback('Echo ' + arg);
    };
  }

  return bar;
};

module.exports = foo(); 
```

然后就

```
var foo = require(__dirname + 'foo');
foo.doSomething('Hello', function(result){ console.log(result); }); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-10T09:25:56.420

## 如果要使用类，它是最短和最漂亮的

```
module.exports = new class foo {...} 
```*

# twitter-bootstrap - bootstrap scrollspy sidenav 不工作 - 选择的最后一项

> ID：13179119
> 
> 赞同：3
> 
> 时间：2012-11-01T14:24:02.447
> 
> 标签：twitter-bootstrap

我正试图让一个粘性的自我突出显示 sidenav 工作，并且有一段时间弄清楚我错过了什么。内容包括 data-spy="scroll" data-target=".sidenav" 属性，但只有 sidenav 中的最后一项被突出显示，并且没有任何 sidenav 项目在滚动时突出显示。我有一个示例 jsfiddle：

[http://jsfiddle.net/b8JkE/](http://jsfiddle.net/b8JkE/)

（调整结果窗格的宽度，使 .sidenav 浮动到左侧）

按照文档[http://twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

$('.sidenav') 是 affix()'ed。div.sidenav 有一个 ul w/class="nav nav-tabs nav-stacked"。有一个带有 data-spy="scroll" data-target=".sidenav" 的内容 div，然而，在页面加载时，导航中的最后一项被突出显示，滚动时没有任何更新。我错过了什么？

html:

```
 <div class="container">
    <div class="row">
      <div class="span2 sidenav-parent">
        <div class="sidenav">
          <ul class="nav nav-tabs nav-stacked">
            <li><a href="#a">a</a></li>
            <li><a href="#b">b</a></li>
            <li><a href="#c">c</a></li>
            <li><a href="#d">d</a></li>
            <li><a href="#e">e</a></li>
          </ul>
        </div>
      </div>
      <div class="span10" id="gimmelove" data-spy="scroll" data-target=".sidenav">
        <h4 id="a">a</h4><p>Trust fund seitan letterpress, keytar raw denim keffiyeh etsy art party before they sold out master cleanse gluten-free squid scenester freegan cosby sweater. Fanny pack portland seitan DIY, art party lo cavore wolf cliche high life echo park Austin. Cred vinyl keffiyeh DIY salvia PBR, banh mi before they sold out farm-to-table VHS viral locavore cosby sweater. Lomo wolf viral, mustache readymade thundercats keffiyeh craft beer marfa ethical. Wolf salvia freegan, sartorial keffiyeh echo park vegan.</p>
        <h4 id="b">b</h4><p>Trust fund seitan letterpress, keytar raw denim keffiyeh etsy art party before they sold out master cleanse gluten-free squid scenester freegan cosby sweater. Fanny pack portland seitan DIY, art party lo cavore wolf cliche high life echo park Austin. Cred vinyl keffiyeh DIY salvia PBR, banh mi before they sold out farm-to-table VHS viral locavore cosby sweater. Lomo wolf viral, mustache readymade thundercats keffiyeh craft beer marfa ethical. Wolf salvia freegan, sartorial keffiyeh echo park vegan.</p>
        <h4 id="c">c</h4><p>Trust fund seitan letterpress, keytar raw denim keffiyeh etsy art party before they sold out master cleanse gluten-free squid scenester freegan cosby sweater. Fanny pack portland seitan DIY, art party lo cavore wolf cliche high life echo park Austin. Cred vinyl keffiyeh DIY salvia PBR, banh mi before they sold out farm-to-table VHS viral locavore cosby sweater. Lomo wolf viral, mustache readymade thundercats keffiyeh craft beer marfa ethical. Wolf salvia freegan, sartorial keffiyeh echo park vegan.</p>
        <h4 id="d">d</h4><p>Trust fund seitan letterpress, keytar raw denim keffiyeh etsy art party before they sold out master cleanse gluten-free squid scenester freegan cosby sweater. Fanny pack portland seitan DIY, art party lo cavore wolf cliche high life echo park Austin. Cred vinyl keffiyeh DIY salvia PBR, banh mi before they sold out farm-to-table VHS viral locavore cosby sweater. Lomo wolf viral, mustache readymade thundercats keffiyeh craft beer marfa ethical. Wolf salvia freegan, sartorial keffiyeh echo park vegan.</p>
        <h4 id="e">e</h4><p>Trust fund seitan letterpress, keytar raw denim keffiyeh etsy art party before they sold out master cleanse gluten-free squid scenester freegan cosby sweater. Fanny pack portland seitan DIY, art party lo cavore wolf cliche high life echo park Austin. Cred vinyl keffiyeh DIY salvia PBR, banh mi before they sold out farm-to-table VHS viral locavore cosby sweater. Lomo wolf viral, mustache readymade thundercats keffiyeh craft beer marfa ethical. Wolf salvia freegan, sartorial keffiyeh echo park vegan.</p>
      </div>
    </div>
  </div>​ 
```

CSS：

```
body { margin-top: 20px; }
#gimmelove { background-color:#f3f3f3; }
.sidenav .active a { font-weight:600; background-color:#f3f3f3; } 
```

​ js：

```
$('.sidenav').affix(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T09:40:18.300

我自己也遇到过类似的问题。首先，将 data-spy="scroll" 和 data-target=".sidenav" 属性添加到 body 标签。当在 DOM 中更深地添加时，它无法正常工作，这样 nav 元素就在添加属性的位置之外。

例如

```
<body data-spy="scroll" data-target=".sidenav" > 
```

另外需要注意的一点是，当导航切换到固定位置时，它会更改 a、b、c、d 部分从顶部的偏移量，因此之前为这些部分计算的位置不再准确。

这是您将属性添加到正文标记的示例：http: [//jsfiddle.net/b8JkE/50/](http://jsfiddle.net/b8JkE/50/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-09T21:07:05.237

您通常将`data-spy`and`data-target`属性添加到 body 标记。混淆的根源在于您可以将这些数据属性添加到内容周围的其他元素中。事实上，您可以将这些数据属性添加到页面中另一个元素的“spy”，但该元素必须有自己的嵌套滚动条。一个元素不会触发滚动事件，除非它有自己的滚动条。 [这是您更新的 JSFiddle，我在其中添加了一个滚动条。](http://jsfiddle.net/e3TMv/)

顺便说一句，您还可以使用 JavaScript 方法而不是使用数据属性来连接 scrollspy。

所以你在这里有几个选择。

**选项 1** ：向 body 标签添加 `data-spy`和属性。`data-target`

```
<body data-spy="scroll" data-target=".sidenav"> 
```

**选项 2**：监视页面中的子元素，但要确保该元素有自己的滚动条。

```
<div data-spy="scroll" data-target=".sidenav" 
 style="overflow-y:scroll; height:200px;"> 
```

**选项 3**：`scrollspy()`通过 JavaScript 调用方法，指定 body/scrollbar 元素和目标导航。

```
<script>
        $(function() {
            $('body').scrollspy({ target: '.sidenav' });
        });
</script> 
```

这是一个演示页面：[http ://www.lawruk.com/blog/60/twitter-bootstrap-fixed-navigation-with-scrollspy-example](http://www.lawruk.com/blog/60/twitter-bootstrap-fixed-navigation-with-scrollspy-example)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T00:33:24.660

我有同样的问题。我通过更改 Javascript 以`scrollspy()`在第一个锚点上应用该方法来解决它：

```
$('#a').scrollspy(); 
```

哦，就像其他人说的那样，`data-spy`and`data-target`属性也应该在 body 标记中。

# javascript - 全日历日视图中的自定义泳道

> ID：13179121
> 
> 赞同：3
> 
> 时间：2012-11-01T14:24:11.967
> 
> 标签：javascript, jquery, fullcalendar

在全日历中，我不想按颜色区分事件，而是想在日视图中的垂直“泳道”中显示它们，例如

```
 Calendar 1 | Calendar 2 | Calendar 3
  9am  event 1      event 2
 10am                            event 3
 11am               event 4      event 5
 12am  event 6 
```

等等

关于最佳和最快方法的任何建议，例如我的第一个想法是

a) 为事件设置样式以赋予它们宽度和水平偏移，例如，对于四个车道，事件将是 25% 的宽度，日历 2 事件将被留下=包含日视图的 25%。日历标题可以添加到日历组件上方。

b) 将多个日历组件放在页面上并排放置。

有点早期的头脑风暴，而不是我知道的具有特定正确答案的东西。

# python - 如何从 python 更改 Linux 用户密码

> ID：13179126
> 
> 赞同：4
> 
> 时间：2012-11-01T14:24:34.323
> 
> 标签：python, linux, passwords, python-2.7

我在从 python 更改 Linux 用户密码时遇到问题。我已经尝试了很多东西，但我无法解决这个问题，这是我已经尝试过的示例：

sudo_password 是 sudo 的密码，sudo_command 是我希望系统运行的命令，用户是从列表中获取的，是我要更改密码的用户，newpass 是我要分配给“用户”的密码

```
 user = list.get(ANCHOR)
    sudo_command = 'passwd'
    f = open("passwordusu.tmp", "w")
    f.write("%s\n%s" % (newpass, newpass))
    f.close()
    A=os.system('echo -e %s|sudo -S %s < %s %s' % (sudo_password, sudo_command,'passwordusu.tmp', user))
    print A
    windowpass.destroy() 
```

'A' 是执行 os.system 的返回值，在本例中为 256。我也试过

```
 A=os.system('echo  %s|sudo -S %s < %s %s' % (sudo_password, sudo_command,'passwordusu.tmp', user)) 
```

但它返回相同的错误代码。我用“passwd”命令尝试了其他几种方法，但都没有成功。使用“chpasswd”命令我试过这个：

```
 user = list.get(ANCHOR)
    sudo_command = 'chpasswd'
    f = open("passwordusu.tmp", "w")
    f.write("%s:%s" % (user, newpass))
    f.close()
    A=os.system('echo %s|sudo -S %s < %s %s' % (sudo_password, sudo_command,'passwordusu.tmp', user))
    print A
    windowpass.destroy() 
```

还有：

```
 A=os.system('echo %s|sudo -S %s:%s|%s' % (sudo_password, user, newpass, sudo_command))
    @;which returns 32512
    A=os.system("echo %s | sudo -S %s < \"%s\"" % (sudo_password, sudo_command,  "passwordusu.tmp"))
    @;which returns 256 
```

我也像这样尝试了“mkpasswd”和“usermod”：

```
 user = list.get(ANCHOR)
    sudo_command = 'mkpasswd -m sha-512'
    os.system("echo %s | sudo -S %s %s > passwd.tmp" % (sudo_password,sudo_command, newpass))
    sudo_command="usermod -p"
    f = open('passwd.tmp', 'r')
    for line in f.readlines():
        newpassencryp=line
    f.close()
    A=os.system("echo %s | sudo -S %s %s %s" % (sudo_password, sudo_command, newpassencryp, user))
    @;which returns 32512 
```

但是，如果您访问[https://www.mkpasswd.net](https://www.mkpasswd.net)，对“newpass”进行哈希处理并替换为“newpassencryp”，它会返回 0，这在理论上意味着它已经正确，但到目前为止它并没有更改密码。

我已经在互联网和 stackoverflow 上搜索了这个问题或类似问题，并尝试了暴露的解决方案，但同样没有成功。

我真的很感激任何帮助，当然，如果您需要更多信息，我很乐意提供！

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:28:23.170

运行此命令的用户必须具有 sudo 权限才能在`passwd`没有密码的情况下运行该命令。

```
>>> from subprocess import Popen
>>> proc = Popen(['/usr/bin/sudo', '/usr/bin/passwd', 'test', '--stdin'])
>>> proc.communicate('newpassword') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T16:52:08.663

尝试对管道中的 passwd 命令使用“--stdin”选项。引用手册页：

```
    --stdin
      此选项用于指示 passwd 应该读取新的
      来自标准输入的密码，可以是管道。

```

另一种选择，如果您的 Linux 有 usermod 命令，作为 root（或通过 sudo），您可以使用“-p”选项显式设置（加密）密码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-21T14:28:55.850

我今天遇到了同样的问题，我写了一个简单的包装器`subprocess`来调用`passwd`命令并`stdin`输入新密码。此代码不是万无一失的，仅在以不提示输入旧密码的 root 身份运行时才有效。

```
import subprocess
from time import sleep

PASSWD_CMD='/usr/bin/passwd'

def set_password(user, password):
    cmd = [PASSWD_CMD, user]
    p = subprocess.Popen(cmd, stdin=subprocess.PIPE)
    p.stdin.write(u'%(p)s\n%(p)s\n' % { 'p': password })
    p.stdin.flush()
    # Give `passwd` cmd 1 second to finish and kill it otherwise.
    for x in range(0, 10):
        if p.poll() is not None:
            break
        sleep(0.1)
    else:
        p.terminate()
        sleep(1)
        p.kill()
        raise RuntimeError('Setting password failed. '
                '`passwd` process did not terminate.')
    if p.returncode != 0:
        raise RuntimeError('`passwd` failed: %d' % p.returncode) 
```

如果您需要 passwd 的输出，您也可以传递`stdout=subprocess.PIPE`给`Popen`调用并从中读取。就我而言，我只对操作是否成功感兴趣，所以我只是跳过了那部分。

**安全考虑：**不要使用类似的东西，`echo -n 'password\npassword\n | passwd username'`因为这会使密码在进程列表中可见。

## 须藤

既然你想使用`sudo passwd <username>`我建议你添加一个新行`/etc/sudoers`（`visudo`用于那个！）

```
some_user ALL = NOPASSWD: /usr/bin/passwd 
```

Sudo 不会询问密码，`some_user`脚本将按预期运行。

或者，只需添加一个额外的`p.stdin.write(u'%s\n' % SUDO_PASSWORD)`行。这样`sudo`会先收到用户密码，然后再`passwd`收到新的用户密码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T10:59:35.373

[`usermod`](http://linux.die.net/man/8/usermod)- 基于版本：

```
#!/usr/bin/env python
from crypt      import crypt
from getpass    import getpass
from subprocess import Popen, PIPE

sudo_password_callback = lambda: sudo_password # getpass("[sudo] password: ")
username, username_newpassword = 'testaccount', '$2&J|5ty)*X?9+KqODA)7'

# passwd has no `--stdin` on my system, so `usermod` is used instead
# hash password for `usermod`
try:
    hashed = crypt(username_newpassword) # use the strongest available method
except TypeError: # Python < 3.3
    p = Popen(["mkpasswd", "-m", "sha-512", "-s"], stdin=PIPE, stdout=PIPE,
              universal_newlines=True)
    hashed = p.communicate(username_newpassword)[0][:-1] # chop '\n'
    assert p.wait() == 0
assert hashed == crypt(username_newpassword, hashed)

# change password
p = Popen(['sudo', '-S',  # read sudo password from the pipe
           # XXX: hashed is visible to other users
           'usermod',  '-p', hashed, username],
          stdin=PIPE, universal_newlines=True)
p.communicate(sudo_password_callback() + '\n')
assert p.wait() == 0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-17T21:32:09.327

对于那些 --stdin 不是一个选项的人：

```
import subprocess
cmd = "bash -c \"echo -e 'NewPassword\\nNewPassword' | passwd root\""
subprocess.check_call(cmd, shell=True) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-18T22:33:43.803

如前所述，不幸的是，在命令行上传递密码并不是很安全。此外，并非每个实现都可以使用“ `--stdin`” for 之类的东西。因此这里有一个更安全的版本，使用：`passwd``passwd``chpasswd`

```
def setPassword(userName:str, password:str):
    p = subprocess.Popen([ "/usr/sbin/chpasswd" ], universal_newlines=True, shell=False, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    (stdout, stderr) = p.communicate(userName + ":" + password + "\n")
    assert p.wait() == 0
    if stdout or stderr:
        raise Exception("Error encountered changing the password!") 
```

解释：

随着`subprocess.Popen`我们启动一个`chpasswd`. 我们通过管道将用户名和密码传递给`chpasswd`. `chpasswd`然后将使用为当前操作系统定义的设置更改密码。`chpasswd`如果没有发生错误，将保持完全沉默。因此，如果发生任何类型的错误，上面的代码将引发异常（无需仔细查看实际错误）。

# android - 系统更新后安卓模拟器无法启动

> ID：13179129
> 
> 赞同：1
> 
> 时间：2012-11-01T14:24:54.493
> 
> 标签：android, android-emulator

我最近将我的 Lubuntu 版本 11.4 更新到了 11.10。之前，我启动模拟器没有问题。现在，当我尝试从 AVDM 启动模拟器时，会出现“正在启动 Android 模拟器”窗口，完全加载并消失。没有更多的事情发生。模拟器既没有出现在 DDMS 中，所以没有我可以发布的任何日志条目。当我在终端中输入“adb devices”时，我得到一个空列表。另一个奇怪的事情是，当我尝试在 AVDM 中删除一个模拟器时，在我尝试启动它之前，当然会出现错误消息：“android Virtual Device ist current running in an emulator and cannot be deleted”出现。也许它与启动问题有关。（我知道如何通过删除 ./android/avd/myemulator 文件手动删除模拟器。) 是不是图形有问题？更新系统后，出现黑屏，所以我不得不修改 xorg.conf 文件。我添加了 1900x1200 的额外分辨率。我已经尝试使用不同的 API 级别和不同的皮肤/解决方案属性和不同的屏幕解决方案启动模拟器。感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:28:21.160

我以前见过这个。我只会删除您正在启动的旧模拟器。并重新创建一个新的（使用不同的名称）。

否则，您能否提供更多信息：您使用的是哪个版本的 Android 模拟器？你在用HAXM吗？

最重要的是，从全新的 AVD\Emulator 实例开始通常可以解决这些奇怪的问题。

# jsp - 在下拉列表中拉取所有数据库值

> ID：13179132
> 
> 赞同：0
> 
> 时间：2012-11-01T14:25:00.043
> 
> 标签：jsp, jdbc

我有一个从数据库中获取下拉值的 jsp。这里我想要的是获取所有用户的数据。我的查询如下

```
SELECT type, SUM(Update_Count) FROM Scope1 where type in ('Updates','Multibases','DAIS','Acds','Legis','LegAll') and Specialist in ('Rakesh') and (RECVD_DATE >='04/01/2012' and RECVD_DATE <='04/30/2012') group by type 
```

在这里，我有 2 个用户，分别是 hari 和 rakesh。当我在下拉列表中选择全部时，我希望我的 jsp 提供以下查询。

```
 SELECT type, SUM(Update_Count) FROM Scope1 where type in ('Updates','Multibases','DAIS','Acds','Legis','LegAll') and Specialist in ('Rakesh','Hari') and (RECVD_DATE >='04/01/2012' and RECVD_DATE <='04/30/2012') group by type 
```

我使用的jsp如下。

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <%@include file="DBCon.jsp" %>
    <!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8" />

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#from" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onClose: function( selectedDate ) {
                $( "#to" ).datepicker( "option", "minDate", selectedDate );
            }
        });
        $( "#to" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onClose: function( selectedDate ) {
                $( "#from" ).datepicker( "option", "maxDate", selectedDate );
            }
        });
    });
    </script>

    </head> 
    <body><form name="Reports" method="post" action="DropDown.jsp"><table><tr>

                     <td>From</td><td><input type="text" id="from" name="from"></td></tr>

                     <tr><td>To</td><td><input type="text" id="to" name="to"></td></tr>
                     <tr><td>Select user:</td><td><select name="user" id="user">

            <option value="">Select User</option>
            <%
            try{
                ps=con.prepareStatement("Select Distinct Specialist from Scope1");
                rs=ps.executeQuery();
                while(rs.next()){
              %>
                <option value="<%String user1=rs.getString(1);out.println(user1);%>"><%out.println(user1);%></option>
                <%
            }
            out.println("<select>");
            }
            catch(Exception e)
                                       {
                out.println(e);
            }
            %>

                             </select></td></tr>
                     <tr><td>
        Select Type:</td><td><select name="type" id="type">
            <option value="">Select Type</option>
            <option value="'Updates','Multibases','DAIS','Acds','Legis','LegAll'">All</option>
            <%
            try{
                ps=con.prepareStatement("Select Distinct type from Scope1");
                rs=ps.executeQuery();
                while(rs.next()){
        %>
                <option value="'<%String type1=rs.getString(1).trim();out.print(type1);%>'"><%out.println(type1.trim());%></option>
                <%
            }
            out.println("<Select>");
            }
            catch(Exception e)
                                       {
                out.println(e);
            }
            %>
                            </select></td></tr>
                     <tr><td><input type="submit" value="Generate" id="sub1" name="sub1"></td></tr>
        </table> </form>   </body>
</html> 
```

和检索我使用下面的代码

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <%@include file="DBCon.jsp" %>
    <!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body><table>
        <%
        String a=request.getParameter("type").trim();
        String b=request.getParameter("user").trim();
        String c=request.getParameter("from").trim();
        String d=request.getParameter("to").trim();
        try{
            String sql=("SELECT type, SUM(Update_Count) FROM Scope1 where type in ("+a+") and Specialist='"+b+"' and (RECVD_DATE >='"+c+"' and RECVD_DATE <='"+d+"') group by type");
            out.print(sql);
            //ps1=con.prepareStatement("SELECT type, SUM(Update_Count) FROM Scope1 where type in ("+a+") and Specialist='"+b+"' and (RECVD_DATE >='"+c+"' and RECVD_DATE <='"+d+"') group by type");
            //rs1=ps1.executeQuery();
            while(rs1.next())
            {
            %>
            <tr><td><%=rs1.getString(1)%></td><td><%=rs1.getString(2)%></td></tr>
            <%
            }
        }
        catch(Exception e)
        {
            out.println(e);
    }
%>
   </table> </body>
</html> 
```

我也希望下面的行也是动态的，即没有选项值，它应该从数据库中获取。

```
<option value="'Updates','Multibases','DAIS','Acds','Legis','LegAll'">All</option> 
```

请帮我 。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:11:25.487

在执行选择查询并检索数据的类中创建一个方法。将这些数据保存在 ArrayList 中。

在您的 jsp 调用该方法并结合使用 html 和 java (scriplet) 填充下拉框

JSP：

```
<%
ArrayList list = yourClass.getData();
int size = list.size();
%>
<select name="someName">
<%
for (int i=0;i<size;i++) 
{  
String s = (String)list.get(i);
%>

<option value="<%=s%>" ><%=s%></option>

<%}%>

    </select> 
```

如果上面的代码令人困惑或没有意义，那么你应该多学习一下 JSP 和 html

此外，在使用 JSP 之前，您应该已经知道如何运行查询或使用 java 核心方法。对于运行查询的方法，最好创建一个具有 2 个属性（值、文本）组合的类。ArrayList 应该包含的元素不是字符串，而是您创建的类。当您运行查询时，您需要一个要显示的值和一个要使用的值：

JSP：

```
<%

ArrayList list = yourClass.getData();
int size = list.size();

%>

<select name="someName">

<%for (int i=0;i<size;i++) 
{  

YourClass obj = (YourClass)list.get(i);

%>

<option value="<%=obj.getValue()%>" ><%=obj.getText()%></option>

<%}%>

</select> 
```

# powershell - 如何创建一个函数并在同一个脚本中调用它

> ID：13179134
> 
> 赞同：1
> 
> 时间：2012-11-01T14:25:04.553
> 
> 标签：powershell, powershell-2.0

我需要帮助在脚本中创建函数以及在调用该函数的同一脚本中。我已经测试了这段代码：

```
function FUNC1() {
$source="C:\Folder\file.txt"
$destination="\\Server\folder"
$searchFiles = Get-Content "$source"
foreach($filename in $searchFiles){ 
    Test-Path $destination\$filename 
    }
}

function FUNC2() {
$source="C:\Folder\file.txt"
$destination="\\Server\folder"
$searchFiles = Get-Content "$source"
foreach($filename in $searchFiles){ 
    Move-Item C:\folder\$filename $destination -force
    }
}

if (!(FUNC1)) {FUNC2} 
```

但是，当测试 FUNC1 是否为假时，它不会移动任何东西。当我单独运行函数中的代码时，一切正常。将它们作为功能放在一起，它不起作用。我不想创建一个单独的 function.ps1 来调用，我宁愿从代码中调用我的函数。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:33:22.290

`FUNC1`如果`$searchFiles`其中有两个或多个文件名，将返回一个（布尔值）数组。

这始终是正确的，即使它只包含多个`$false`值（因为您正在测试数组，而不是它包含的值）。否定 this (the `!`) 将始终给出，因此永远不会执行`$false`the 的内容。`if`

您的方法似乎很奇怪，执行所有测试，然后移动测试显示该文件的任何内容。我本来期望像这样的：

```
Get-Content "$source" | 
  Where-Object { -not (Test-Path $destination\$_) } |
  Foreach-Object { Move-Item C:\folder\$_ $destination } 
```

它将遍历 中的所有行`$source`，忽略目标位置存在该名称的文件并将文件移动到目标位置的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:41:39.107

您的语法令人困惑，“！（FUNC1）”将始终为$ false。FUNC1 的结果是一个变量（数组类型），而不是 $null，将被视为 true，因此 !(FUNC1) 将为 $false。您可以将这两个功能合二为一：

```
function FUNC1() {
    $source="C:\Folder\file.txt"
    $destination="\\Server\folder"

    $searchFiles = Get-Content "$source"
    foreach($filename in $searchFiles){ 
        if(-not (Test-Path $destination\$filename))
        {
            Move-Item C:\folder\$filename $destination -force
        } 
    }
} 
```

# ruby-on-rails - 使用 Rails + Devise，我如何“手动”验证会话 cookie？

> ID：13179136
> 
> 赞同：3
> 
> 时间：2012-11-01T14:25:16.927
> 
> 标签：ruby-on-rails, devise, warden

我有一个使用 Devise (2.1.2) 进行身份验证的 Rails (3.2.5) 应用程序。

假设我有这个会话 cookie：

```
session_cookie = {
  "session_id"           => "{SESSION_ID}",
  "_csrf_token"          => "{CSRF_TOKEN}",
  "warden.user.user.key" => ["User", [{USER_ID}], "{ENCRYPTED_PASSWORD}"]
} 
```

有没有一种方法可以“手动”验证它，即通过直接调用 Devise 或 Warden 上的方法来确保它不是伪造的？我在想象这样的事情：`Devise::SomeModule.is_session_cookie_valid?(session_cookie)`，但是在查看 gems 的代码时，没有发现任何似乎可以做到这一点的东西。

如果信息`session_cookie`不够，我还需要什么？

# fortran - Fortran“调用”语句：它实际上可以调用什么？

> ID：13179137
> 
> 赞同：2
> 
> 时间：2012-11-01T14:25:28.080
> 
> 标签：fortran, fortran90, subroutine, fortran77

我继承了大约 400 行写得很奇怪的 Fortran 77 代码，我试图一步一步地分析它，以便在我的脑海中清晰。

无论如何，我有一个类似标题的文件（实际上是一个`.h`，但其中的代码是 fortran 而不是 C/C++），其中只有两个语句，称为`getarg.h`：

```
character*80 serie
integer ln 
```

然后我有另一个`.f`名为的 fortran 文件 () `getserie.h`，其中包含以下代码：

```
subroutine getserie(serie, ln)
include 'getarg.h'
call getarg(1, serie)
ln = index(serie, ' ') - 1
return
end 
```

我的问题是：我可以`call`创建一个仅包含变量声明的外部文件吗？这样做有什么效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T14:43:23.693

不，您只能调用子例程。这意味着指定为 的子程序`subroutine`。但是，子例程的定义不必在源文件中。它只需要在链接时提供。

该`getarg`子例程可能是您的编译器的一个内在子例程，它[获取命令行参数](http://gcc.gnu.org/onlinedocs/gfortran/GETARG.html)。这意味着编译器会自动将子程序的代码提供给链接器。

该文件`getarg.h`不会以任何方式调用。它的内容只是直接复制到`include`语句所在的地方。

在某些情况下，您需要提供被调用子例程的（显式）接口，但在更高版本的 Fortran 90 和更高版本中。在这些现代版本中，您通常将子例程和函数放在模块中，以便编译器可以检查您是否正确调用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:24:54.700

大多数 FORTRAN*实现*的一个特殊特性是`CALL`可以调用几乎任何外部符号。当然，只调用`SUBROUTINE`s 是有道理的。这是可能的，因为众所周知的 FORTRAN 调用约定——所有实际参数都通过地址传递，即所有实际传递给子程序的参数都是相同类型的——它们都是指针。甚至常量也是通过地址传递的 - 包含常量值的内存位置的地址。这允许编译器生成对任何子例程的调用，而无需提供显式原型。它只是将所有参数指针压入堆栈（在具有基于堆栈的调用约定的平台上）或将它们加载到相应的寄存器中（在具有寄存器调用约定的平台上）并向符号的地址发出汇编`call`指令，用作子程序中的名字`CALL`陈述。如果这样的符号在链接时存在，链接器将生成一个可执行文件，否则它将抱怨未解析的符号引用并且不会生成任何可执行文件。

函数调用也是如此。编译器用来从数组索引操作告诉函数调用的唯一特性是（非内在）函数被声明为`EXTERNAL`. 特殊`EXTERNAL`指定是必要的，因为调用函数和访问数组元素的语法是相同的。还有一些特殊的预定义函数，称为内在函数，编译器可以在内部识别它们（例如`SIN`）。也有内在的子程序，但大多数只是库子程序。

因此，每当您遇到一个`CALL foo(...)`语句并且您不知道它是什么`foo`时，您应该查阅您的编译器手册以查看是否存在同名的内在函数。如果没有，它可能是在代码中的某个地方定义的 - 查找`SUBROUTINE foo`. 如果不是，它应该是从外部库导出的子例程，链接到程序中，或者只是语法错误。

这一切都非常容易出错，因为可以很容易地提供与子例程期望的完全不同类型的实际参数，或者甚至可以提供不同数量的实际参数，编译器仍然会愉快地编译代码。当然，这样的程序在运行时通常会崩溃或产生无意义的结果。这就是为什么要`flint`开发专门的程序，以便从整体上检查源代码中编译器无法检测到的问题（例如参数类型不匹配、实际参数数量错误等）。Fortran 90 通过引入接口解决了这个问题。接口在某些情况下是强制性的，但通常可用于提供编译时参数检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T13:37:35.093

如前所述，这里唯一奇怪的是包含文件名称的可疑选择。（.h 扩展名和内在符号名称的不相关使用）。（是的，我知道 getarg 不是迂腐标准的 f77，而是一个扩展）

将变量声明放在包含文件中是（/was）常见的做法，以确保程序单元之间的声明一致。毫无疑问，该文件也“包含”在调用程序中，并确保您的字符串在任何地方都以相同的长度声明。

这就是说在这个例子中它肯定是没有必要的。您可以将字符串声明为假定长度，因此请代替包含：

```
character serie*(*)
integer ln 
```

以及主程序中的正常声明，并摆脱包含文件的混乱。

（现在有人会告诉我上世纪初的一些编译器不支持假定长度的字符串声明）..

# vba - ＃价值！从 VBA 设置显示的大纲级别后的错误

> ID：13179138
> 
> 赞同：9
> 
> 时间：2012-11-01T14:25:28.440
> 
> 标签：vba, excel, excel-2010

我已将问题简化为以下测试用例：

1.  创建一个新的工作簿；

2.  输入一个常数值，例如`123`进入`Sheet1!A1`；

3.  定义一个名称，例如`foo`，指代公式`=CHOOSE(!$A$1, Sheet1!$A$1)`；

4.  将常数值`1`输入`Sheet2!A1`；

5.  将公式输入`=foo`到其他单元格中`Sheet2`，例如：观察结果，正如预期的那样，结果是在上面的步骤 2`Sheet2!B1`中输入的值；`Sheet1!A1`

6.  创建然后运行包含以下代码的 VBA 过程：

    ```
    Sheets("Sheet1").Outline.ShowLevels 1 
    ```

您会注意到步骤 5 中的单元格现在包含`#VALUE!`错误。

此外，简单的工作表重新计算（无论是使用`F9`键还是`Application.Calculate`方法）都不能解决问题：必须从 VBA执行*完全*`Application.CalculateFull`重新计算（使用方法），或者从交互式 UI*完全重建*`CTRL`（使用+ `ALT`+ `SHIFT`+`F9`组合键）。

通过反复试验，我确定了这种情况的出现：

*   `CHOOSE()`index 参数必须涉及相对工作表单元格引用（不是常量或绝对工作表引用）；

*   被索引的`CHOOSE()`值参数必须涉及对另一张表的引用；

*   显示的大纲级别的更改必须来自 VBA*程序*（而不是来自交互式 UI 或 VBA 即时窗口中的大纲控件）；和

*   方法调用（其`ShowLevels`参数无关紧要）必须应用于在任何值（尽管不是索引）参数中引用的工作表`CHOOSE()`。

这是怎么回事？

我非常希望在`CHOOSE()`不触发此错误的情况下将我在值参数中引用的工作表折叠到其最高大纲级别，因为从 UX 的角度来看，完全重新计算我的实际工作簿（仍然只有几秒钟）是不可取的。

解决方法的建议（同时仍然使用包含`CHOOSE()`函数的定义名称以及相对表索引参数）将是最受欢迎的！

我的平台：Windows 7 Home Premium（SP1，64 位）上的 Excel 2010（14.0.6123.5001，32 位）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:40:36.057

The problem is with your named formula: `=CHOOSE(!$A$1, Sheet1!$A$1)`, specifically the `!A1`

The leading `!` is invalid (without a preceeding sheet name, eg `Sheet1!$A$1` *is* valid). Just specify a sheet and your problem goes away.

I suspect this may not satisfy you, depending on *why* you used `!A1` in the first place. If it's that you want `=foo` to use an index value from `A1` *on the sheet the formula `=foo` is placed on* use `INDIRECT("A1")` instead of `!A1`

* * *

BTW I think your may have found a bug, or at least undefned behaviour, in that the formula `=CHOOSE(!$A$1, Sheet1!$A$1)` is invalid and should *always* return a `#Value` error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:25:03.810

如果包含此 UDF，它是否给出正确的行为？

```
Public Function fooUDF(inCell As Range)
    fooUDF = ThisWorkbook.Worksheets(inCell.Value).Range("A1").Value
End Function 
```

使用 UDF 而不是定义的名称/公式可能会对性能产生影响。它采用 in 参数也可能存在问题，而您的原始方法没有。这可以通过运行一个宏来为每个工作表引入一个工作表定义的公式来规避，如下所示：（不包括循环遍历所有必要工作表的部分）

```
Public Sub InsertName()
    ThisWorkbook.Worksheets("Sheet2").Names.Add Name:="fooformula", _
        RefersToR1C1:="=fooudf(Sheet2!R1C1)"
End Sub 
```

# jms - 我如何订阅activemq以在消费者处理消息时得到通知

> ID：13179144
> 
> 赞同：2
> 
> 时间：2012-11-01T14:25:56.223
> 
> 标签：jms, monitoring, activemq

我实际上正在寻找来自 ActiveMQ 的咨询或任何其他替代支持，以便在与 Consumer 关联的 MessageListener 完成处理消息时通知我。

MessageDelivered 咨询似乎会在代理收到消息后立即通知。此外，MessageConsumed 咨询声称在消费者收到消息时进行通知。

- - - - - - - - - - - - 更新 - - - - - - - - - - - - - -----

请在下面找到代码片段：

```
public class SampleListener implements MessageListener {

    private Session session;

    public SampleListener(Session session) {
        this.session = session; 
    }

    public void onMessage(Message message) {
        try {
             // do something
             session.commit();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

public class SampleConsumer {

    private boolean stopConnection = false;

    public static void main(String[] args) {
        new SampleConsumer().start();
    }

    public void start() {
            ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
            Connection connection;
            try {
                connection = connectionFactory.createConnection();
                connection.start();
                Session session = connection.createSession(true, Session.SESSION_TRANSACTED);
                Destination destination = session.createTopic("test");
                MessageConsumer messageConsumer = session.createConsumer(destination);
                messageConsumer.setMessageListener(new SampleListener(session));

                try {
                    synchronized (this) {
                        while (!stopConnection) {
                            wait();
                        }
                    }
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    session.close();
                    connection.close();
                }

            } catch (JMSException e) {
                e.printStackTrace();
            }
        }
    }

    public void stop() {
        synchronized (this) {
            stopConnection = true;
            notify();
        }
    }
}

public class SampleProducer implements MessageListener {

    private boolean messageDelivered;

    @Test
    public void shouldTestSomething() throws JMSException, InterruptedException {
        producerConnection = new ActiveMQConnectionFactory("tcp://localhost:61616").createConnection();
        producerConnection.start();
        Session session = producerConnection.createSession(true, SESSION_TRANSACTED);

        Destination destination = session.createTopic("test");
        MessageConsumer advisoryConsumer = session.createConsumer(AdvisorySupport.getMessageConsumedAdvisoryTopic(destination));
        advisoryConsumer.setMessageListener(this);

        Message message = session.createTextMessage("Hi");
        Destination destination = session.createTopic("test");
        MessageProducer producer = session.createProducer(destination);
        producer.setDeliveryMode(DeliveryMode.PERSISTENT);
        producer.send(message);
        session.commit();

        synchronized (this) {
            while (!messageDelivered) {
                wait();
            }
        }

        session.close();

        // some assertions
    }

    public void onMessage(Message message) {
        // do something

        synchronized (this) {
            messageDelivered = true;
            notify();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:52:17.410

默认情况下不启用某些建议。链接：

[http://activemq.apache.org/advisory-message.html](http://activemq.apache.org/advisory-message.html)

可以通过将 policyEntry 添加到 activemq.xml [http://activemq.apache.org/xml-configuration.html来启用禁用的建议](http://activemq.apache.org/xml-configuration.html)

将以下内容添加到 activemq.xml：

```
 <destinationPolicy>
        <policyMap>
          <policyEntries>
            <policyEntry topic=">" advisoryForConsumed="true" />
            <policyEntry  queue=">" advisoryForConsumed="true" />
            ..            
          </policyEntries>
        </policyMap>
    </destinationPolicy> 
```

在消费者中启用咨询并调用 session.commit() 后，将传递咨询。

如果您使用的是嵌入式代理，您只需将 activemq.xml 放在类路径上并使用以下命令启动代理：

```
BrokerService broker = BrokerFactory.createBroker("xbean:activemq.xml",true); 
```

（我没有找到任何方法在不使用 activemq.xml 的情况下启用禁用的建议）。

# vb.net - 微软 sql 服务器 2008

> ID：13179146
> 
> 赞同：0
> 
> 时间：2012-11-01T14:25:59.950
> 
> 标签：vb.net, sql-server-2008-r2

我第一次使用 vb.net 和 ms sqlserver 2008 创建了一个图书馆管理软件。好吧，我有以下问题----

1 - 我是否必须在服务器上创建 sql 身份验证或 windows 身份验证，并且该数据库应该由有权访问**其他**计算机上的管理员用户的任何用户访问。

2--我必须将此软件（包括数据库在内的所有文件）传输到其他计算机，所以如何使用vb.net在其他计算机上执行安装和卸载

提前谢谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:36:06.140

有可能的。我将以下连接字符串用于我的测试服务器：

```
Server=sqlServer;Database=APL;Integrated Security=SSPI; 
```

对我来说它有效。我的设置如下：无域、数据库服务器、客户端服务器。同一网络，数据库服务器的用户名为：x，密码：y。客户端服务器也一样。

如果您使用的是域服务器，这应该可以工作。

# node.js - 如何在节点检查器中搜索文件

> ID：13179157
> 
> 赞同：2
> 
> 时间：2012-11-01T14:26:47.407
> 
> 标签：node.js, node-inspector

我第一次在 Ubuntu 上使用节点检查器，尝试调试 Express 应用程序。

当我运行该程序并`http://0.0.0.0:8080/debug?port=5858`在 Chromium 或 Google Chrome 中打开时，它似乎可以工作，并且所有脚本都加载到“脚本”选项卡中。

但是有数百个文件，似乎缺少以下选项：

*   折叠脚本树以仅查看目录
*   或在树中搜索文件。

在任何地方都可以选择，还是有替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:59:54.343

在 Chrome 中，您可以使用快捷方式搜索源文件`Ctrl + O`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:40:26.303

AFAIK 没有办法按文件名过滤脚本，尽管我也有同样的问题并且已经四处寻找。我发现的唯一改进是，如果您使用[Google Chrome Canary](https://tools.google.com/dlpage/chromesxs)构建，您可以选择显示为可折叠文件夹树或文件路径的平面列表。

# java - Spring 3.1 contextInitializerClasses 不能使用 web.xml Context-Param 在 WebLogic 10.3.6 上工作

> ID：13179160
> 
> 赞同：7
> 
> 时间：2012-11-01T14:27:01.837
> 
> 标签：java, mongodb, spring-mvc, weblogic, weblogic-10.x

我正在尝试从属性文件中读取属性，其文件名对于我们的每个环境都不同，例如 local.properties、dev.properties 等。这些属性文件将仅包含其相应 mongodb 实例的连接信息，例如主机、端口和数据库名称。通常这种事情会在我们的应用服务器中使用 JNDI 定义来完成，但目前还没有针对 Mongo 的实现。

由于我使用的是 WebLogic 10.3.6，因此我无法使用 Servlet 3.0 规范，因此无法使用 Spring 的 Java 配置，目前只能使用 XML。因此，我尝试使用的方法是在我的 web.xml 中定义一个 contextInitializerClass 上下文参数，然后将其设置为实现 ApplicationContextInitializer 并手动设置 Spring 活动配置文件的类。但是，在 WebLogic 启动或重新部署时，都没有调用我的自定义初始化程序类，我的配置文件也没有设置。

**我的问题是**，Spring 的 contextInitializerClass 是否依赖于 Servlet 3.0，还是我还缺少其他东西？

我定义的代码：

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<context-param>
    <param-name>contextInitializerClass</param-name>
    <param-value>com.myapp.spring.SpringContextProfileInit</param-value>
</context-param>

<!-- Location of spring context config -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
</context-param>
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>      
... 
```

**SpringContextProfileInit.java**

```
public class SpringContextProfileInit implements ApplicationContextInitializer<ConfigurableWebApplicationContext> {

    private static final Logger log = LoggerFactory.getLogger(SpringContextProfileInit.class);

    public SpringContextProfileInit() {
        log.debug("Got the constructor");
    }

    @Override
    public void initialize(ConfigurableWebApplicationContext ctx) {
        ConfigurableWebEnvironment environ = ctx.getEnvironment();
        log.debug("Got the environment, no profiles should be set: "+ environ.getActiveProfiles());

        /*
        * Here I am setting the profile with a hardcoded name.  In the real app,
        * I would read from a separate properties file, always named app.properties
        * which would live on the app server's classpath.  That app.properties file
        * would contain a property directing the Spring Profile to use.
        */
        environ.setActiveProfiles("local");
        log.debug("Now should be set to local: "+ environ.getActiveProfiles());
        ctx.refresh();
    }

} 
```

**servlet-context.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mongo="http://www.springframework.org/schema/data/mongo" 
    xmlns:c="http://www.springframework.org/schema/c"
xmlns:p="http://www.springframework.org/schema/p" 
xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xmlns:cache="http://www.springframework.org/schema/cache"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
http://www.springframework.org/schema/data/mongo
http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
    http://www.springframework.org/schema/data/jpa
    http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
    http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">
<context:property-placeholder properties-ref="deployProperties" />
...
<beans profile="local">
    <bean id="deployProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean"
            p:location="WEB-INF/local.properties" />
</beans>
<beans profile="beast, dev">
    <bean id="deployProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean"
            p:location="WEB-INF/dev.properties" />
</beans>
</beans> 
```

当我尝试部署应用程序时，出现异常： `NoSuchBeanDefinitionException:No bean named 'deployProperties' is defined` 如果未设置配置文件，这是预期的。我的日志没有显示我的任何调试语句都已打印。我还尝试将 contextInitializerClass 参数移动为我的 DispatcherServlet 的 init-param，但这给出了相同的结果。

我的限制是

1.  我无法从我的 Maven 脚本中设置配置文件，因为我们公司使用相同的工件来推送到所有环境。

2.  我也无法更改 WebLogic 的版本或使用最新的 servlet 规范，因为它依赖于容器。

我目前的版本是：

*   Spring 3.1.2.RELEASE
*   WebLogic 10.3.6
*   javax.servlet-api 2.5

有没有其他人看到这个问题并且知道如何加载我的初始化程序类？还是有更好的方法来做我想做的事情？

这看起来与另一个尚未回答的发帖者的问题有关：[Spring MVC 3.1 Using Profiles for environment specific Hibernate settings](https://stackoverflow.com/questions/10018812/spring-mvc-3-1-using-profiles-for-environment-specific-hibernate-settings)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T00:57:23.167

我认为 context-param 的名称是错误的，应该`contextInitializerClasses`不是`contextInitializerClass`，这可能是您的 ApplicationContextInitializer 没有被拾取的原因

此外，您似乎缺少`ContextLoaderListener`web.xml 文件中的条目，也请尝试添加：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

这是加载`contextConfigLocation`标签中指定的bean配置xml文件的文件

# asp.net - 使用 wcf 进行消息传递的双向通信

> ID：13179164
> 
> 赞同：0
> 
> 时间：2012-11-01T14:27:20.040
> 
> 标签：asp.net, wcf, c#-4.0

我正在使用 WCF 服务在我们的 asp.net 应用程序中创建一个消息传递模块。该功能就像登录用户可以与其他登录用户通信一样。这种类型的功能我已经通过使用 Web 服务完成了，但是现在在这个应用程序中我想使用 WCF。

在我之前的应用程序中，我们会以固定的时间间隔调用 Web 服务方法来获取消息，但这种方法不需要在服务器上创建负载，这是我们希望在这个新应用程序中避免的。

所以我想要类似的东西

当用户向其他用户发送消息（调用 WCF 服务并存储消息）时，应为该用户发出通知，然后在该目标用户调用 WCF 服务以获取他们的消息之后。

或者

WCF 服务直接将消息转发给目标用户

请建议我是否可以使用 wcf。？或者什么是避免不必要的服务呼叫的最佳方法。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:46:53.043

这是signalR的链接：

[http://signalr.net/](http://signalr.net/)

您实际上可以通过 nuget 控制台安装它。这是一些演练和介绍的几个链接：

[http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

[http://channel9.msdn.com/Shows/Web+Camps+TV/Damian-Edwards-and-David-Fowler-Demonstrate-SignalR](http://channel9.msdn.com/Shows/Web+Camps+TV/Damian-Edwards-and-David-Fowler-Demonstrate-SignalR)

祝你好运！

# tfs - 如何在 TFS 2012 浏览器中查看所有工作项

> ID：13179165
> 
> 赞同：2
> 
> 时间：2012-11-01T14:27:23.600
> 
> 标签：tfs

当登录到 TFS 2012 浏览器并在工作项屏幕上时，它只显示分配给您的工作项。

![这是我在工作项页面上的视图的屏幕截图](../Images/d42d8a4503034ddd8addb2bda5e3c3e1.png)

我目前以项目管理员身份登录并拥有所有权限。但它只显示分配给我的工作项。无论如何，我可以查看为项目创建的所有工作项吗？或者可能在不以其他用户身份登录的情况下过滤其他用户的工作项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:32:11.290

您正在查看一个名为“分配给我”的查询。为所有工作项创建一个新查询并查看它，或者在屏幕截图左下方的“共享查询”部分下选择一个不同的查询。

# java - Java如何迭代Map

> ID：13179172
> 
> 赞同：0
> 
> 时间：2012-11-01T14:27:48.480
> 
> 标签：java, iterator

我有一个自定义地图，其中 Device 是我的名为 Device 的类的实例。

```
devices = new HashMap<String, Device>(); 
```

我尝试了 StackOverflow 建议的几个迭代器和 for 循环，但它们似乎都产生错误，我不知道为什么。

示例错误：

![在此处输入图像描述](../Images/44baba8644555a59c6e9c596f95c9dc6.png)

和

![在此处输入图像描述](../Images/340691ec844848a4b14d57873d32b0d6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:33:59.430

看起来 的声明`devices`不正确。它应该是：

```
Map<String, Device> devices; 
```

不是原始（“已擦除”）类型，`Map`. 现代编译器应该给你使用原始类型的警告。注意编译器警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:32:19.853

你可以试试这个：

```
HashMap<String, Device> devices = new HashMap<String, Device>();

// do stuff to load devices

Device currentDevice;
for (String key : devices.keySet()) {

    currentDevice = devices.get(key);
    // do stuff with current device

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:38:45.030

在第一种情况下，您只需给

for(Map.Entry entry:devices.entrySet()){}

就足够了，你不需要在那里投射 Map.Entry(String,Device) 。在第二种情况下，当您从条目中获取值时，它返回 Object 值，因此您需要强制转换为您的特定实例。所以您必须给出

设备设备=（设备）pairs.getValue（）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:42:16.387

有 3 种方法可以迭代地图 1) 使用 For-Each 循环迭代条目。2) 使用 For-Each 循环遍历键或值。3) 使用迭代器进行迭代。（为此，您可以使用泛型或不使用泛型进行迭代）

```
 Map map = new HashMap();
Iterator entries = map.entrySet().iterator();
while (entries.hasNext()) {
    Map.Entry entry = (Map.Entry) entries.next();
    Integer key = (Integer)entry.getKey();
    Integer value = (Integer)entry.getValue();
    System.out.println("Key = " + key + ", Value = " + value);
} 
```

# android - 对 Android 中的请求代码值有什么建议吗？

> ID：13179179
> 
> 赞同：31
> 
> 时间：2012-11-01T14:28:16.377
> 
> 标签：android

现在我使用随机数作为请求代码。因此，每次我为 startActivityForResult 添加新活动时，我都需要检查所有其他此类活动以避免冲突。可能有任何定义价值的实践，不可碰撞的设计？你怎么看？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-01T16:24:15.910

实际上，您不需要检查所有活动，如果您在不同活动中具有相同的值也没关系。

请求代码的想法是，您可以在 Activity X 中`onActivityResult()`区分您开始使用的不同请求的结果`startActivityForResult()`。

因此，如果您`startActivityForResult()`的活动中有 3 个不同的调用，则需要 3 个不同的请求代码才能区分它们`onActivityResult()`- 这样您就可以分辨出哪个*结果*属于哪个*start*。但是，如果你有另一个活动 Y，你正在做类似的事情，那么当请求代码与活动 X 中的相同时，这并不重要。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-01T15:11:10.350

增加一个数字保证不会发生冲突（直到它换行）。除非您大量使用它们，否则实际上不应该发生。

您可以在项目中添加一个为您提供编号的类。例如

```
public class GlobalStuff {
    private static final AtomicInteger seed = new AtomicInteger();
    public static int getFreshInt() {
        return seed.incrementAndGet();
    }
} 
```

现在在您的代码中，每当您需要使用数字而不是

```
public void doSomething() {
    startActivityForResult(intentA, 342);
} 
```

做它喜欢

```
private static final int REQUEST_CODE = GlobalStuff.getFreshInt();
public void doSomething() {
    startActivityForResult(intentA, REQUEST_CODE);
} 
```

并且您不会两次使用相同的号码是安全的。至少当代码在同一个进程中运行时。

唯一的问题是您不能在`switch`语句中使用这些数字（如`case REQUEST_CODE:`），因为 switch 需要在编译时已知的数字

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-04-13T12:23:58.513

如果您仍然需要检查活动的结果并且喜欢视觉上抛光的结构，请检查此方法。

在活动类中声明内部类：

```
class RequestCode {
    static final int IMPORT = 100;
    static final int WRITE_PERMISSION = 101;
} 
```

开始活动时使用代码：

```
startActivityForResult(intent, RequestCode.IMPORT); 
```

检查结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == RequestCode.IMPORT && resultCode == RESULT_OK) {
        //...
    }
} 
```

# seam3 - 使用 RequestParam 没有 jsf 页面的支持 bean 的隔离测试

> ID：13179180
> 
> 赞同：0
> 
> 时间：2012-11-01T14:28:16.987
> 
> 标签：seam3, jboss-arquillian

我想做一个比较简单的测试。正在测试的类（简化但你明白了）：

```
@Named
@RequestScoped
public class SomeController {

    @Inject
    @RequestParam("someId")
    Long someId;

    public SomeClass getSomeClass() {

        return new SomeClass(someId);
    }
} 
```

和测试：

```
@RunWith(Arquillian.class)
public class SomeControllerTest {

    @Inject
    private SomeController controller;

    @Deployment
    public static Archive<?> createTestArchive() throws IOException {
    // trimmed out

    }

    @Test
    public void testNullGoalModelInjection() {
    //placeholder test so there are no errors during build

    // I am happy to use setter injection and do
    controller.setSomeId(1);

    // even better if I could get that injected in too
    assertNotNull(controller.getSomeClass());
    }

} 
```

在尝试中，我得到了例外：

```
java.lang.IllegalStateException: Attempted to inject an HttpServletRequest before it has been initialized. 
```

这是有道理的。

我真正想知道的是：

有没有办法通过 Arquillian（或其他东西）测试这样的 bean，而不涉及创建 jsf 页面，然后使用 jsfunit / warp / 或其他一些机制来调用 http 请求？

换句话说，我如何通过测试调用 http 请求，这将为我生成这个 bean - 但不需要 jsf 文件等就位。

感谢您的任何帮助/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:49:13.357

JBossAS7 使用通过 JMX 调用测试的 Arquillian 协议，因此根本没有 HttpRequest 可用。

尝试更改与 JBossAS7 交互时使用的协议，如下所述： [https ://community.jboss.org/message/722871#722871](https://community.jboss.org/message/722871#722871)

现在测试通过 HTTP 调用到 servlet，并且您的测试应该运行。

# java - Eclipse JUNO - 编辑 .class

> ID：13179187
> 
> 赞同：1
> 
> 时间：2012-11-01T14:28:24.890
> 
> 标签：java, eclipse, eclipse-plugin

我已将 .jar 导入到我的项目中。有一些文件 .class 但我无法更改这些文件。我必须补充一下，我有 Juno Eclipse，我正在使用 Java1.6 是否可以使用 eclipse 或其他软件编辑 .class？

已经给你加分了，谢谢帮助，很好的支持。[关闭]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:32:12.313

您不能直接编辑 .class 文件。这些文件是编译 java 类的结果。你必须得到原始的类文件，修改它然后编译它。有一些方法可以直接做到这一点，例如[BCEL](http://commons.apache.org/bcel/)，但通常只在运行时在非常特殊的情况下出于必要而完成，这不是常见的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:30:29.980

您不能在编译时直接编辑 .class 文件。您需要 .java 文件才能使用它。您可以在类上使用 java 反编译器，生成源代码，然后重新编译它们。

[JD-GUI](http://java.decompiler.free.fr/?q=jdgui) - 我以前用过这个。有一个插件，但我觉得独立应用程序往往工作得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:33:24.377

可能您需要的是在项目中导入/编辑文件，而不是`.class`文件。`.class`文件是由 JVM 解释的机器可读文件。但是，如果您已经知道这一点，并且想知道如何查看生成`.class`文件的代码，则可以使用[JD](http://java.decompiler.free.fr/)之类的 java 反编译器。在 Eclipse 中，您可以使用[此](http://java.decompiler.free.fr/?q=jdeclipse)插件为您自动反编译该类。

# sql - SQL查询通过外键依赖获取表名

> ID：13179188
> 
> 赞同：1
> 
> 时间：2012-11-01T14:28:27.093
> 
> 标签：sql, sql-server, tsql, foreign-keys

如何构建查询以按外键依赖顺序获取 SQL Server 中的表名？

如果有一个表 XYZ，它是主表，其他 2 个表具有外键约束，那么我希望表 XYZ 首先出现。

这是为了能够以正确的顺序创建表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:14:17.953

此查询将按其依赖顺序返回表：

```
 ;WITH vwTableDependancy AS (
        SELECT 
            tables.object_id Dependant , NULL Parent
        FROM 
            sys.tables
        LEFT OUTER JOIN
            sys.foreign_keys
        ON
            foreign_keys.parent_object_id = tables.object_id
        WHERE
            foreign_keys.parent_object_id IS NULL
        UNION    
        SELECT 
            parent_object_id Dependant, referenced_object_id Parent
        FROM 
            sys.foreign_keys
    )
    , vwTableHierarchy AS (
        SELECT Dependant,Parent, 0 lvl FROM vwTableDependancy WHERE Parent IS NULL
        UNION ALL
        SELECT 
            vwTableDependancy.Dependant,vwTableDependancy.Parent , lvl+1
        FROM 
            vwTableDependancy 
        INNER JOIN
            vwTableHierarchy
        ON
            vwTableDependancy.Parent = vwTableHierarchy.Dependant
    )
    SELECT 
         OBJECT_NAME(Dependant) Dependant
        ,OBJECT_NAME(Parent) Parent
        , lvl  
    FROM 
        vwTableHierarchy
    ORDER BY 
        lvl ASC
    OPTION(MAXRECURSION 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T18:19:10.710

```
select * from sys.tables st
join sys.foreign_keys sfk on st.object_id = sfk.parent_object_id 
where sfk.name = 'Foreign_Key' 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-01T14:48:55.487

您可以在下表中找到所需的信息：

```
select * from sys.tables
select * from sys.foreign_keys
select * from sys.foreign_key_columns 
```

从那里，构建将按照您的需要执行的脚本。

# .net - 设置Datasource后DataGridView为空

> ID：13179189
> 
> 赞同：2
> 
> 时间：2012-11-01T14:28:27.540
> 
> 标签：.net, vb.net, winforms, datagridview

我查看并发现了一个类似的问题，但没有解决我的问题 - 另一个问题是[datagridview-is-blank-after-change-datasource-at-runtime](https://stackoverflow.com/questions/9963416/datagridview-is-blank-after-changing-datasource-at-runtime)

我确信这是一个简单的问题，答案更简单。在我的第一个 Windows 窗体应用程序上工作并发现一些与 ASP.Net 有很大不同的东西:)

所以在这个应用程序中，我有以下内容：

*   主表格
*   此表单上的工具栏，打开第二个表单以设置应用程序设置
*   第二种形式有一个带有各种文本框/复选框/组合列表/按钮的选项卡控件（2 个选项卡）
    *   所有这些都完美地工作。
*   在第二个表单的第二个选项卡上，以及更多文本框等，我添加了一个 DataGridView；称为printerListGrid

在此表单的代码视图中，我试图将 List(Of Printer) 绑定到它

```
printerListGrid.DataSource = AppContext.printers.printerList 
```

当我运行我的应用程序并转到表单/选项卡时，DataGridView 是空白的。

我也试过：

```
 printerListGrid.Columns.Clear()
    printerListGrid.AutoGenerateColumns = True
    printerListGrid.DataSource = AppContext.printers.printerList 
```

再次 - 它是空白的。

在调试时，我可以看到我的打印机列表包含 2 个`printer`对象。通过查看属性的内容，我还可以看到这些已设置为 printerListGrid `.DataSource`。然而，DataGridView 仍然是空白的。

我猜必须有某种方法来重新渲染网格？

为了代码公开；这就是`List(Of Printer)`

```
 Public Structure Printer
        Public id As Integer
        Public name As String
        Public material As Enums.Materials
        Public outputFolder As String
    End Structure 
```

让我知道您是否需要提供帮助的更多代码/描述。

**更新：**

我忘了提。我正在尝试设置`DataSource`在`Private Sub`表单加载事件中调用的`MyBase.Load`

**更新#2**

我继续玩这个，试图让它工作 - 我可能完全误解了控件及其目的..无论如何，我也尝试了以下方法：

```
 printerListGrid.AutoGenerateColumns = False

    Dim col As DataGridViewColumn = New DataGridViewTextBoxColumn()
    col.DataPropertyName = "name"
    col.HeaderText = "Name"
    printerListGrid.Columns.Add(col)

    col = New DataGridViewTextBoxColumn()
    col.DataPropertyName = "material"
    col.HeaderText = "Material"
    printerListGrid.Columns.Add(col)

    col = New DataGridViewTextBoxColumn()
    col.DataPropertyName = "outputFolder"
    col.HeaderText = "Output Folder"
    printerListGrid.Columns.Add(col)

    printerListGrid.DataSource = AppContext.printers.printerList 
```

这至少会导致网格显示行；看起来像 2。但它们没有填充来自`List(Of Printer)`...的数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:20:19.813

发现我做错了什么。基本上试试这个：

```
Public Structure Printer
    Property id As Integer
    Property name As String
    Property material As Enums.Materials
    Property outputFolder As String
End Structure 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:32:19.077

The fields that are being bound need to be properties, not public variables. For example, if you replace your structure with the following you will see the id's in the grid. You'd have to do the same property switch for your other variables as well to have them show up.

```
 Public Structure Printer
        Private _id As Integer
        Public Property id() As Integer
            Get
                Return _id
            End Get
            Set(ByVal value As Integer)
                _id = value
            End Set
        End Property

        Public name As String
        Public material As Materials
        Public outputFolder As String

    End Structure 
```

# actionscript-3 - AS3 文本显示问题

> ID：13179190
> 
> 赞同：0
> 
> 时间：2012-11-01T14:28:29.153
> 
> 标签：actionscript-3, text, textfield

我一直试图让它工作几个小时，我已经在网上查找并按照示例进行操作，但最后我找到的每一种方法都会出现空白屏幕。我正在尝试制作一个 15x15 的随机字母网格，但没有任何反应，编译时也没有错误或警告。这是代码：

```
 package  {

    import flash.display.MovieClip;
    import flash.text.*;

    public class WordSearch extends MovieClip {

        var startX:uint = 0;
        var startY:uint = 0;

        var randomletter:uint = (Math.random() * 26);
        var letter:TextField = new TextField();

        public function WordSearch(){

        letter = new TextField();

        for ( var row:uint = 0; row < 15; row++ )
        {

            for ( var column:int = 0; column < 15; column++ )
            {
                switch(randomletter)
                {
                    case 1:
                        letter.text = "%";
                        letter.x = startX;
                        letter.y = startY;
                        addChild(letter);
                }
                startX = startX + 16
            }

            startX = 0
            startY = startY + 16
             }
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:41:15.820

您是否将 WordSearch 添加到舞台？

```
var ws:WordSearch = new WordSearch();
stage.addChild(ws); 
```

您发布的代码不会向舞台添加任何内容，因此不会显示任何内容。

# dos - 是否可以在一行中使用 DOS 回显执行数学计算？

> ID：13179192
> 
> 赞同：2
> 
> 时间：2012-11-01T14:28:39.717
> 
> 标签：dos

例如，我可以做

`echo 3 + 5`

并得到`8`？

是否可以使用日期进行计算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:32:06.527

你可以用`set /a`一个数学表达式来计算：

```
set /a x=3+5
echo %x% 
```

编辑：这是一个单行：

```
@for /f usebackq %i in (`set /a 3 + 5`) do @echo %i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:52:34.610

对于第一个问题，您可以使用 & 链接命令在一行中完成。

```
set /a x=3+5 & echo %x% 
```

至少这在[windows7中有效](/questions/tagged/windows7 "显示标记为“windows7”的问题")

# c# - 有没有办法在 LINQ 中捕获导致异常的谓词？

> ID：13179200
> 
> 赞同：0
> 
> 时间：2012-11-01T14:29:19.357
> 
> 标签：c#, linq, exception, exception-handling

假设我有一些陈述，例如：

```
List<string> list = new List<string> {"1", "1", "2", "3", "4"};
try
{
    Class1 c = new Class1
        {
            s1 = list.Single(s => s == "1"),
            s2 = list.Single(s => s == "2"),
            s3 = list.Single(s => s == "3"),
            s4 = list.Single(s => s == "4")
        };
}
catch (InvalidOperationException ex)
{
    Console.WriteLine(ex.Message);
} 
```

而且我肯定会`catch`在这一行出现错误“输入序列包含多个元素”的块：

```
s1 = list.Single(s => s == "1") 
```

所以，我只是好奇，有没有办法在`catch`块中显示错误谓词？如果我们会看到类似“序列中存在重复元素“1””之类的信息，这对于修复错误将非常有用。甚至是字符串格式的完整谓词。我可以以某种方式查看这些信息并显示或记录它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:46:18.693

如果您确实需要有关谓词及其参数的信息，那么您可以创建自己的`Single`扩展方法（它将被调用而不是默认方法），它实际上会包装默认`Single`调用，但它会接收`Expression`（表示 lambda 表达式的表达式树）而不是`Func`（lambda 表达式）：

```
public static T Single<T>(this IEnumerable<T> sequence, 
                          Expression<Func<T, bool>> predicate)
{
    try
    {
        return sequence.Single(predicate.Compile());
    }
    catch (InvalidOperationException ex)
    {
        Console.WriteLine("Error on predicate " + predicate);
        throw;
    }            
} 
```

在线`s1 = list.Single(s => s == "1")`它会抛出一个异常并写出漂亮的错误信息：

`Error on predicate s => s == "1"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:39:54.500

不，抛出的异常 ( `InvalidOperationException`) 是通用的，不会给出那种细节。堆栈跟踪将开始于`Single()`并且不显示传入的谓词。

如果您需要该级别的详细信息，您可以在单独的语句中设置属性，以便您可以从堆栈跟踪中获取行号，或者您可以对数据进行“预检查”以确保它符合您的条件独特性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T14:39:07.380

```
List<string> list = new List<string> {"1", "1", "2", "3", "4"};
string sValue=null;
try
{
    sValue="1";
    Class1 c = new Class1
    {
       s1 = list.Single(s => s == sValue),

    };
}
catch (InvalidOperationException ex)
{
    Console.WriteLine("s => s == "+ sValue);
} 
```

# shell - 移动文件的正则表达式

> ID：13179201
> 
> 赞同：1
> 
> 时间：2012-11-01T14:29:22.057
> 
> 标签：shell

我在 shell 脚本中有这段代码。它的作用是删除文件名中包括点 (.) 在内的所有扩展名，并仅返回名称，如`/home/user/filename`. 但问题是我希望它甚至删除目录结构并只返回这样的文件名`filename`。

这是仅删除扩展名的代码。

```
filename="/home/user/filename.php.txt.doc"      
newname=${filename%%.*}
echo $newname
/home/user/filename 
```

有没有办法只获取文件名而不包括目录扩展名？

```
filename 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:31:30.400

尝试`"${filename##*/}"`获取文件的名称。

```
$ filename="/home/user/filename.php.txt.doc"      
$ newname=${filename%%.*}
$ newname=${newname##*/}
$ echo $newname
filename 
```

或者，使用`basename`：

```
$ filename="/home/user/filename.php.txt.doc"      
$ newname="$(basename ${filename%%.*})"
$ echo $newname 
```

您也可以使用单个 sed 命令执行此操作，但它有点不可读，所以我不会：

```
$ sed 's|.*/\([^\.]*\).*|\1|g' <<< "$filename"
filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:34:45.963

您可以使用`awk`以获取`filename`带有字段分隔符的最后一个字段`/`：

```
newname=$(echo "$newname" | awk -F"/" '{print $NF}') 
```

将此行添加到您的代码中：

```
filename="/home/user/filename.php.txt.doc"      
newname=${filename%%.*}
newname=$(echo "$newname" | awk -F"/" '{print $NF}')
echo $namename 
```

输出：

```
filename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:35:54.270

```
newname=$(basename "$filename")
newname=${newname%%.*}
echo $newname
filename 
```

# html - IntelliJ问题查看html问题

> ID：13179206
> 
> 赞同：0
> 
> 时间：2012-11-01T14:29:34.753
> 
> 标签：html, intellij-idea, syntax-highlighting

有没有办法让 IntelliJ 在“问题”或“项目”视图中显示 html 文件中出现的问题？例如，我创建了一个无效的 html 文件，其中包含一个无效标记的红线。但是，该错误仅显示在本地文件中，而不显示在“项目”视图或“问题”视图中。

我已经设置了一个范围来包含项目的所有文件，但似乎没有捕获 html 文件。

基本上我正在寻找一种方法来确定我的哪些html文件是无效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:33:18.977

请使用`Analyze`| **使用适当的配置文件检查代码**以获取所有文件（或指定目录/范围中的文件）的结果。在 IDEA 12 中，它移至`Code`| **检查代码**菜单。

# javascript - TypeScript 将方面应用于类

> ID：13179210
> 
> 赞同：3
> 
> 时间：2012-11-01T14:29:51.917
> 
> 标签：javascript, typescript

有什么方法可以挂钩 TypeScript 中类的声明过程？

例如考虑以下课程

```
class Foo extends Bar
{
      constructor() { super(); }
} 
```

我目前通过像这样手动调用我的编织器来将方面应用于这种类型：

```
weaver.applyAspects(Foo); 
```

这意味着我修改了类中某些方法的行为。我宁愿看到这只是通过在上述情况下继承“Bar”超类而自动发生。

在构造函数中做一些时髦的东西似乎是错误的，因为这将适用于每个新实例，而不仅仅是原型本身。

我想我可以覆盖 __extends 函数（在生成的 javascript 输出中使用），但这似乎也有点时髦。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:11:47.530

如果你想在 TypeScript 中使用 AOP，你可以通过提供定义来使用现有的 AOP 框架。这是一个使用 jQuery.aop 的完整示例。

以这种方式使用 AOP 不会影响您现有的任何定义，因为 AOP 代码在您正在横切的代码上是不可见的。

*aop.d.ts*

```
declare class Advice {
    unweave(): void;
}

declare interface PointCut {
    target: Object;
    method: string;
}

declare class Aop {
    before: (pointCut: PointCut, advice: Function) => Advice[];
    after: (pointCut: PointCut, advice: Function) => Advice[];
    afterThrow: (pointCut: PointCut, advice: Function) => Advice[];
    afterFinally: (pointCut: PointCut, advice: Function) => Advice[];
    around: (pointCut: PointCut, advice: Function) => Advice[];
    introduction: (pointCut: PointCut, advice: Function) => Advice[];
}

interface JQueryStatic {
    aop: Aop;
} 
```

*应用程序.ts*

```
/// <reference path="jquery.d.ts" />
/// <reference path="aop.d.ts" />

class ExampleClass {
    exampleMethod() {
        alert('Hello');
    }
}

jQuery.aop.before(
    { target: ExampleClass, method: 'exampleMethod' },
    function () { alert('Before exampleMethod'); }
);

jQuery.aop.after(
    { target: ExampleClass, method: 'exampleMethod' },
    function () { alert('After exampleMethod'); }
);

var example = new ExampleClass();
example.exampleMethod(); 
```

示例来源：[带有 TypeScript 的 AOP](http://www.stevefenton.co.uk/Content/Blog/Date/201211/Blog/AOP-With-TypeScript/)。

**更新**

要将相同的关注点添加到类和所有兼容的类中，您不能重用基类点。这是因为包装器是原来的基类函数，包装在点中，这对于扩展基类的类将是错误的实现。

唯一有效的情况是，如果您的函数仅在这种情况下调用`super()`，它无论如何都会起作用。

以下是我如何将相同的关注点添加到许多类 - AopHelper 只需要在您的程序中存在一次：

```
/// <reference path="jquery.d.ts" />
/// <reference path="aop.d.ts" />

class ExampleClass {
    exampleMethod() {
        alert('Hello');
    }
}

class SecondClass extends ExampleClass {
    exampleMethod() {
        alert('World');
    }
}

class AopHelper {
    static weave(targets: Object[], method: string, point: Function, advice: Function) {
        for (var i = 0; i < targets.length; i++) {
            point({ target: targets[i], method: method }, advice );
        }
    }
}

var classes: any[] = [ExampleClass, SecondClass];

AopHelper.weave(classes, 'exampleMethod', jQuery.aop.before, () => { alert('Before exampleMethod'); });
AopHelper.weave(classes, 'exampleMethod', jQuery.aop.after, () => { alert('After exampleMethod'); });

var example = new SecondClass();
example.exampleMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-11T04:35:35.530

[https://github.com/agentframework/agentframework](https://github.com/agentframework/agentframework)

这是另一个使用最新装饰器功能的 TypeScript AOP。

您可以使用装饰器添加自己的拦截器

假设以下是您想要的行为

```
class Directory {
    public getRoot(): string {
        try {
            return this._root.path;
        }
        catch(err) {
            return null;
        }
    }
} 
```

您可以在 AgentFramework 中执行以下操作

```
@agent('DirAgent')
class Directory {
     @failure(null)
     public getRoot(): string {
         return this._root.path;
     }
} 
```

@failure(null) 是一个开箱即用的属性，它将`null`在方法抛出错误时返回给定值。您还可以更改为@failure('')、@failure(0)、@failure(false) 以使您的代码更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T08:43:48.700

为了在 typescript 中成功实现 AOP 技术，我建议使用[kaop-ts](https://github.com/k1r0s/kaop-ts/)

还要检查这个[答案](https://stackoverflow.com/questions/39407298/how-to-implement-aop-in-angular-2)

```
class Component extends SomeOtherComponent {
  ...
  @beforeMethod(YourHttpService.getCached, '/url/to/html')
  @beforeMethod(YourHtmlParser.template)
  invalidate (parsedHtml?: any) {
    this.element.append(parsedHtml)
  }
}
...
componentInstance.invalidate()
// explanation below 
```

# java - AndroidPlot 和 RectRegion 行为

> ID：13179211
> 
> 赞同：1
> 
> 时间：2012-11-01T14:30:00.900
> 
> 标签：java, android, charts, androidplot

您好，我正在尝试显示 bmi 图的矩形。

但是矩形将在滚动事件中被剪切和隐藏

**编辑：**绿色矩形应该是

点 A(-infinity, 21) 点 B(+infinity, 21) 点 C(+infinity, 26) 点 D(-infinity, 26)

但是 B 点是 (12.10, 21) //12.10 是日期 12-10-2012

```
 // optimal_range
    LineAndPointFormatter optFormat = new LineAndPointFormatter(Color.TRANSPARENT, Color.TRANSPARENT, Color.TRANSPARENT);
    XYRegionFormatter rf = new XYRegionFormatter(optimal_color_fill);
    RectRegion rr = new RectRegion(Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY, optimal[0], optimal[1]);

    Number xDummy[] = { Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY };
    Number yDummy[] = { optimal[1], optimal[1] };
    XYSeries optSerie = new SimpleXYSeries(Arrays.asList(xDummy), Arrays.asList(yDummy), "");
    mySimpleXYPlot.addSeries(optSerie, optFormat); 
```

![矩形问题](../Images/e6d5f89a26125e718ba11275b1c5590e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:05:01.383

自从我查看此代码以来已经有一段时间了，我从未对区域做过任何事情，但我认为如果您平移和缩放以使数据不在屏幕上，那么屏幕外的点就不会被绘制出来，这会导致您所看到的。为了使事情正确，需要将离开屏幕的线段剪辑到屏幕边缘。

# ios - IOS 5 和 IOS6 之间的 NSURLConnection、NSOperationQueue 行为 - UI 冻结！！-

> ID：13179216
> 
> 赞同：2
> 
> 时间：2012-11-01T14:30:13.687
> 
> 标签：ios, uiviewcontroller, nsurlconnection, freeze, nsoperationqueue

我正在尝试为IOS上的url下载实现排队机制。为此，我将 NSURLConnection 用于网络访问部分，并将它们排入 NSOperationQueue 类的静态实例（在 UIController 之间共享）。下载开始时，我使用来自 NSURLConnectionDownloadDelegate 的回调更新 UI 进度条。有一个UIControllerview，一个UIView。队列在 ViewLoad 中创建，并分配给定义为 UIControllerView 属性的指针

```
//UIControllerView Code
    - (void)viewDidLoad
    {
        [super viewDidLoad];
        self.myDownloadQueue = [NSOperationQueue sharedOperationQueue];   
    } 
```

并且实施遵循[这里的建议](https://stackoverflow.com/questions/1356873/sharing-nsoperationqueue-across-view-controllers)

通过一个按钮开始下载，创建一个新的 NSURLConnection，并通过 SetDelegateQueue 将其分派到 NSOperationQueue：

```
- (IBAction)startDownload:(UIButton *)sender {
    NSString *url = @"<myURL blablabl>";

    NSURLRequest *req = [NSURLRequest requestWithURL:[NSURL URLWithString:url]
                                         cachePolicy:NSURLRequestUseProtocolCachePolicy
                                     timeoutInterval:30];
    NSURLConnection *urlConn = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:NO];
    [urlConn setDelegateQueue:self.myDownloadQueue];
    [urlConn start];
    NSLog(@"adding a new task for url %@",[[urlConn currentRequest] URL ]);
    //Sets the UI
    self.awProgress1.progress=0;
} 
```

UIViewController 实现了 NSURLConnectionDataDelegate 协议，用于方法

```
 @interface awViewController : UIViewController <NSURLConnectionDownloadDelegate>
        @end
    ...snip....
        @implementation
        - (void)connection:(NSURLConnection *)connection didWriteData:(long long)bytesWritten totalBytesWritten:(long long)totalBytesWritten expectedTotalBytes:(long long)expectedTotalBytes
{snip.. updates the progress bar here using performSelectorOnMainThread:@selector()..
}
        - (void)connectionDidResumeDownloading:(NSURLConnection *)connection totalBytesWritten:(long long)totalBytesWritten expectedTotalBytes:(long long)expectedTotalBytes{...snip...}
        - (void)connectionDidFinishDownloading:(NSURLConnection *)connection destinationURL:(NSURL *)destinationURL{....snip...}

        @end 
```

在 IOS6 上，代码工作正常，UI 栏会随着 UIViewController 接收到 [connection didWriteData:] 调用而更新。然而，在 IOS5 上，当 url 完全下载时，UI 冻结.... 逐步调试表明，在这两种情况下，下载结束时代码都达到了 IOS 运行时间，即它没有卡在我的代码中的某个地方。下载过程中用户界面很好，我可以按按钮等...

如果我将 NSURLCONnection 设置为在主线程中运行，即通过删除

```
[urlConn setDelegateQueue:self.myDownloadQueue];
[urlConn start]; 
```

然后代码再次在 IOS5 上运行。但这不是我想要的，我希望下载在后台线程中执行。

我错过了什么？在 IOS5 上是否需要做一些内务处理？当 NSURLConnection 完成时，问题似乎确实发生了，因为 UI 在下载过程中很好。感谢您的帮助 ！-A
PS：示例代码可用，只是不想让屏幕过于混乱......

# yii - 如何扩展 CMssqlCommandBuilder 并在模型中使用扩展类

> ID：13179218
> 
> 赞同：3
> 
> 时间：2012-11-01T14:30:15.163
> 
> 标签：yii

我正在`YII`使用`MSSQL`

`CMssqlCommandBuilder`尝试使用分页时出现问题。我使用了 http://code.google.com/p/yii/issues/detail?id=1501 中给出`comment#7`的[代码](http://code.google.com/p/yii/issues/detail?id=1501)

我编辑了`CMssqlCommandBuilder`，我的代码运行良好。

现在的问题是我不想更改我想扩展一个类并使用该类的类`Yii`。`CMssqlCommandBuilder``CMssqlCommandBuilder`

如何告诉我的模型类使用新的扩展类而不是`CMssqlCommandBuilder`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:20:18.100

覆盖`getCommandBuilder()`扩展 CActiveRecord 的基础模型类中的 。 [http://www.yiiframework.com/doc/api/1.1/CActiveRecord#getCommandBuilder-detail](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#getCommandBuilder-detail)

```
class MyActiveRecord extends CActiveRecord
{
    public function getCommandBuilder()
    {
        return new MyMssqlCommandBuilder($this->getDbConnection()->getSchema());
    }
} 
```

不确定这是否是“正确的方法”。

我可能更适合做以下事情：

```
class MyActiveRecord extends CActiveRecord
{
    private $_builder;
    public function getCommandBuilder()
    {
        if($this->_builder!==null)
            return $this->_builder;
        else
            return $this->_builder = new MyMssqlCommandBuilder($this->getDbConnection()->getSchema());
    }
} 
```

# java - ZK 分页 gui 组件调整大小

> ID：13179220
> 
> 赞同：0
> 
> 时间：2012-11-01T14:30:35.910
> 
> 标签：java, zk

在 ZK 中是否可以更改用于导航的 GUI 上可见的高度/宽度组件？

```
<toolbar>
   <paging id="pagenavi" pageSize="10"  />
   <paging id="pagenavi" pageSize="10" height="50px" width="50px"/>  //something like this
</toolbar> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T05:05:44.207

我认为没有 zk 构建方式来实现它，但是您可以覆盖分页元素使用的元素的 CSS 的宽度和高度属性。
[Zk 覆盖 CSS](http://books.zkoss.org/wiki/ZK%20Style%20Guide/ZK%20Class%20Concept/Overwriting)

# php - prblem插入数据库：文本和html格式

> ID：13179227
> 
> 赞同：-1
> 
> 时间：2012-11-01T14:31:01.867
> 
> 标签：php, mysql, syntax, insert, comma

我在将数据（文本和 HTML 格式）插入 mysql 字段 LONGTXT 时遇到问题。这是错误

```
 public 'error' => string 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''&lt;p&gt;

Haec subinde Constantius audiens et quaedam referente Thalassio doc' at line 1' (length=226) 
```

错误，几乎清楚。我使用了所有的保护功能（编码格式，引用，禁用html......）我想到了另一种方法，我创建了两个处理逗号，分号和斜杠的函数下面是函数addslashes的代码：

```
FUNCTION addText($txt)
    {
        IF(get_magic_quotes_gpc()==false)
                {
                RETURN utf8_encode(addslashes($txt));
                }else{
                RETURN utf8_encode($txt);
                }

    } 
```

保护逗号功能：

```
FUNCTION protect_virgules($txt)
    {
        IF($txt!='')
        {
            $x = strlen($txt);
            $newTxt = '';
            FOR($i=0;$i<=$x;$i++)
            {
                    IF($txt[$i]==',' || $txt[$i] == ';')
                    {

                        $newTxt.= '\\'.$txt[$i];
                    }
                    else
                    {
                        $newTxt.=$txt[$i];
                    }
            }
            RETURN htmlentities($newTxt);               
        }
        else
        RETURN '0';
    } 
```

插入php函数：

```
 public function insert($table,$data){  

    $this->last_insert_id = NULL;

    $fields = "";
    $values = "";
    foreach($data as $fld => $val){
        $values .= trim($this -> escape($val)).",";
         $fields .= $fld.",";

    }
    $values = '"'.substr($values,0,strlen($values)-1).'"';
    $fields = '"'.substr($fields,0,strlen($fields)-1).'"';
    $tab=array($this->escape($table),$fields,$values,"@last_id");
    $this->CALL_SP("sp_insert",$tab);
    if ( $result = mysqli_query( $this->linkId, "SELECT @last_id AS last_inserted_id" ) ) {
        while ($row = mysqli_fetch_assoc($result))
        {
            $this->last_insert_id = $row['last_inserted_id'];
        }
    }

    return  $this->queryId;
} 
```

插入 SQL 过程代码：

```
 BEGIN
 SET @stmt_sql=CONCAT("INSERT INTO ", tableName, "  (",fields,")VALUES(", param ,")");
 PREPARE stmt FROM @stmt_sql;
 EXECUTE stmt;
 DEALLOCATE PREPARE stmt;
 SELECT LAST_INSERT_ID() into last_id;
END 
```

语法错误总是扼住我的喉咙。请问你能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:53:07.333

**不要** `utf8_encode`，除非您想将字符串从 Latin-1 转换为 UTF-8。
**不要**使用`addslashes`或依赖魔术引号；`stripslashes`如果您无法将其关闭，请关闭魔术引号或用于反转其效果。
**不要**手动替换和转义单个字符，除非您有非常具体的原因。

**使用适合您的数据库的转义机制进行**一次**转义*。*如果您正在使用`mysql_*`（不再使用它），请使用`mysql_real_escape_string`. 如果您正在使用`mysqli_*`，使用~~`mysqli_real_escape_string`或更好~~的准备好的语句。如果您使用 PDO，请使用准备好的语句。**

 **有关该主题的更长、更详细的讨论，请参阅[The Great Escapism（使用文本中的文本需要知道的内容） 。](http://kunststube.net/escapism)

您当前的“准备好的语句”是无用的，因为它根本没有将查询与值分开。您只是像往常一样连接所有值，然后一次性强制它们通过准备好的语句。也不需要存储过程，这都可以使用客户端 API 更好地完成。

所以：

1.  [按照手册中的说明](http://www.php.net/manual/en/security.magicquotes.disabling.php)禁用魔术引号。
2.  [按照手册中的说明](http://www.php.net/mysqli_prepare)使用准备好的语句。
3.  用于`mysqli::insert_id`获取[手册中解释](http://www.php.net/manual/en/mysqli.insert-id.php)的最后一个插入 ID 。
4.  没有4。**

# git - Git post-receive hook不触发外部脚本

> ID：13179232
> 
> 赞同：4
> 
> 时间：2012-11-01T14:31:16.750
> 
> 标签：git, bash, hook

这是我到目前为止所做的：

1.  我有一个托管网站及其 git 存储库的服务器。
2.  我有一个名为的用户`git`拥有所有存储库，并且能够以任何用户身份登录而无需输入密码。
3.  我在我的 repo`post-receive`的目录中创建了一个名为的钩子。`hooks`
4.  我还创建了一个名为`gitpull`自动将信息拉到站点的脚本。

当我输入以下命令时一切正常：

```
su - git -c "/git/sitename.git/hooks/post-receive" 
```

但是当我从我的开发机器中推送一些东西时，它不会运行脚本`gitpull`。

这是我的文件：

*   `/etc/gitpull`：

    ```
    #!/bin/bash
    su - $1 -c "cd ~/www;git pull;" 
    ```

*   `/git/sitename/hooks/post-receive`：

    ```
    #!/bin/bash
    /etc/gitpull sitename 
    ```

我怎样才能解决这个问题？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:00:08.143

钩子需要被标记为可执行，`post-receive`否则 git 不会运行它。当您使用 进行测试时`sh -c`，您将绕过执行权限检查。

我敢打赌，如果你跑步，它会起作用`chmod a+x /git/sitename.git/hooks/post-receive`。

* * *

所以不是这样的吧？

哦，`su`运行时提示输入密码，不是吗？您不能为钩子提供输入，因此您需要确保您可以`/git/sitename.git/hooks/post-receive`作为您的普通用户帐户自行输入，并且无需您进行任何交互即可运行它。

# c - 如何在 x11 的根窗口上书写？

> ID：13179240
> 
> 赞同：2
> 
> 时间：2012-11-01T14:31:42.787
> 
> 标签：c, x11, xlib, xserver

我已经阅读了很多类似这个标题的问题，但没有一个能找到适合我需要的答案。

我想在我的根窗口（用 C 语言）上写一些东西，以显示诸如正常运行时间之类的东西作为示例。问题是：我想一直把它作为*背景*！有一种方法可以使用背景图像并在其上绘制并将其设置为背景，但这很难看。另一种方法是写入根窗口并一直刷新它，所以如果另一个窗口覆盖并发现我打印的东西，它几乎会立即刷新。但这并不是真正的答案，因为能源/cputime 很昂贵。

亲切的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:13:20.523

只需添加公开事件处理程序并在将 ExposeNotify 事件发送给您时执行您的代码。不要忘记设置暴露事件输入掩码：`XSelectInput(display, root, ExposureMask)`以便将事件发送到您的客户端（每个窗口事件掩码分别存储每个客户端）

# java - J2ME 模拟器没有响应

> ID：13179242
> 
> 赞同：0
> 
> 时间：2012-11-01T14:31:51.930
> 
> 标签：java, emulation, netbeans-7, midlet

我试图在 J2ME 中做一个简单的 hello world 程序，我在 ubuntu 12.04 上使用 Netbeans 7.2.1。包你好世界；

```
import javax.microedition.lcdui.*;
import javax.microedition.midlet.*;

/**
 * @author mashombo
*/

public class Midlet extends MIDlet {

private TextBox tb;
private Display display = null;

public void helloworld(){
tb = new TextBox("Hello world Midlets"," -samboga", 100, 0);
}
public void startApp() {
    if(display == null){
    display = Display.getDisplay(this);
    display.setCurrent(tb);
    }
}

public void pauseApp() {
}

public void destroyApp(boolean unconditional) {
}

} 
```

当我尝试运行上述代码时，模拟器没有响应我尝试按下模拟器右侧的启动按钮，没有任何反应。这是我运行时的输出

```
Starting emulator in execution mode
Running with storage root /home/mashombo/j2mewtk/2.5.2/appdb/DefaultGrayPhone
Running with locale: en_ZA.UTF-8
/dev/dsp: No such file or directory
Running in the identified_third_party security domain 
```

你能帮忙看看我有什么遗漏吗？我是 Netbeans 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:49:10.303

As far as I know /dev/dsp is a device to work with OSS. Try to load it with this command:

```
modprobe snd-pcm-oss 
```

# visual-studio-2010 - 无法使用 .msi 更新 Windows 服务

> ID：13179243
> 
> 赞同：4
> 
> 时间：2012-11-01T14:31:54.660
> 
> 标签：visual-studio-2010, windows-services, windows-installer

**问题：**

我制作了一个 Windows Service i VS2010 (C#) 和一个相应的 .msi 来安装和启动它。版本、产品代码、升级代码等设置正确。RemovePreviousVersions 设置为 true。工作正常。

现在我想做一个新版本的服务，我希望更新后的 .msi 来更新服务，而不需要用户先手动卸载旧服务。

我要做的是：

1.  我更新了我的服务的源代码
2.  在 .msi 项目中，我更改了版本号和 ProductCode（同时保持 UpgradeCode 不变）
3.  我重建整个事情。

但是，当我之后启动更新的 .msi 时，它会失败并显示以下消息：“错误 1001 .... 服务的实例已经在运行”。

**问题：**

*   为什么在安装更新版本之前没有自动卸载服务？

*   我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:46:51.200

对于这种情况，Windows Installer 5.0 的更改并不重要，它们指的是故障配置。

由于从控制面板手动卸载应用程序会删除该服务，因此很明显安装新版本不会删除以前的服务。要检查为什么需要创建详细日志并检查 RemoveExistentProducts 标准操作。要创建日志，请使用此命令

> msiexec /i {msi 路径} /l*v file.log

您应该知道您必须更改前三个版本号之一，以确保操作系统将新软件包视为升级，第四个被忽略。此外，您应该确保软件包具有相同的安装类型，即每个用户或每个机器。如果安装类型不同，则跳过升级。

# ios - RestKit 和 Bump API - 标头搜索路径问题

> ID：13179251
> 
> 赞同：1
> 
> 时间：2012-11-01T14:32:32.180
> 
> 标签：ios, header, linker, restkit, bump

我在我的应用程序中使用了 RestKit，也需要链接 Bump 框架。

因此，在添加和链接**libBump.a**和其他需要的框架之后，我得到了典型的`"clang: error: linker command failed with exit code 1 (use -v to see invocation)"`和 73 个其他 Mach-O-Linker 错误。

经过一些试用后，我看到我的标题搜索路径设置为`"$(BUILT_PRODUCTS_DIR)/../../Headers"`. 如果我把它们拿出来（比如在 Bump 提供的 Bump Test Project 中），它会编译但给我错误`'RestKit/RestKit.h' file not found`

有人知道如何解决这个问题吗？

# android - Flex android画廊将图像共享到我的应用程序获取文件路径

> ID：13179254
> 
> 赞同：2
> 
> 时间：2012-11-01T14:32:41.353
> 
> 标签：android, apache-flex, gallery, share, filepath

当用户在他的 android 手机上打开图库上的图像时，他可以选择通过此菜单上列出的应用程序共享此图片。所以，我想在这个共享菜单中显示我的应用程序，当用户单击它时 - 我的应用程序启动并获取要共享的图像的文件路径。现在我尝试这些：

在 MyApp-app.xml 上编写

```
<android>
    <manifestAdditions><![CDATA[
        <manifest android:installLocation="auto">
        <application>
            <activity android:excludeFromRecents="false">
                    <intent-filter>
                        <action android:name="android.intent.action.MAIN"/>
                        <category android:name="android.intent.category.LAUNCHER"/>
                    </intent-filter>
                <intent-filter>
                    <action android:name="android.intent.action.SEND" />
                    <category android:name="android.intent.category.DEFAULT" />
                    <data android:mimeType="image/*" />
                </intent-filter>
                </activity>
        </application>
            <uses-permission android:name="android.permission.INTERNET"/>
        </manifest> 
    ]]></manifestAdditions>
</android> 
```

如何获取图像的文件路径以在应用程序中使用它？我正在尝试在 mxml 文件上编写此代码：

```
protected function application_preinitializeHandler(event:FlexEvent):void
        {
            NativeApplication.nativeApplication.addEventListener(
                InvokeEvent.INVOKE, onInvoke);
        }

        private function onInvoke(event:InvokeEvent):void
        {
            // some code to get filepath of Image
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T17:50:31.433

我有一个类似的弹性应用程序。我的应用程序在它用于存储的 sd 卡的根目录中有一个文件夹。我还编写了一个 android 服务作为我的 flex 应用程序的本机扩展。当用户从 android 库中选择共享时，它会启动我的本机扩展服务，然后将所选图像复制到我的 flex 应用程序文件夹内的“共享”文件夹中。当我的 flex 应用程序启动或变为活动状态时，它会检查此文件夹中的任何文件。

它不是世界上最优雅的解决方案，但它对我有用。

# javascript - 模板作为 Handlebars.js 中的变量

> ID：13179262
> 
> 赞同：1
> 
> 时间：2012-11-01T14:32:53.503
> 
> 标签：javascript, internationalization, ember.js, handlebars.js

我正在创建一个国际化的 Ember.js 应用程序，为此我正在使用[Ember-I18n](https://github.com/jamesarosen/ember-i18n "Ember-I18n")。这在大多数情况下都可以正常工作，但现在考虑语言字符串：

```
'To do some action {{link}}' 
```

哪里`{{link}}`需要用一些链接替换。翻译字符串不能被分解，因为 的位置`{{link}}`可能因语言而异。因此，我需要找到一种方法来获取链接；这当然是另一个带有翻译的模板，例如：

```
<a {{action someAction}}>{{t click_here}}</a> 
```

到目前为止，我已经尝试了几件事：使用自定义块助手为链接创建自定义视图；但我还没有得到任何工作。

这样做的最佳方法是什么？换句话说，如何将渲染的模板作为变量插入到 Ember.js 中的另一个模板中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:47:27.797

我不使用该库来翻译我的应用程序，但正如我从其文档中了解到的那样，这可能有效：

1）像这样为模板创建一个视图：

```
var view = Em.View.create({
  templateName: "mytemplate",
  link: "http://emberjs.com",
}); 
```

2) 在您的模板中使用 Ember-I18n 提供的绑定：

```
<a {{action someAction}}>{{t click_here linkBinding="view.link"}}</a> 
```

假设翻译字符串在“click_here”键中。

更多信息：[https ://github.com/jamesarosen/ember-i18n#bind-interpolated-values](https://github.com/jamesarosen/ember-i18n#bind-interpolated-values)

# node.js - 云存储网站共享两台服务器

> ID：13179264
> 
> 赞同：1
> 
> 时间：2012-11-01T14:32:59.897
> 
> 标签：node.js, amazon-web-services, cloud, cloud-hosting

我有一个在单个服务器上运行的云存储网站。我希望它就像在存储服务器上下载和上传，在另一台服务器上处理 mysql 查询和其他部分的 Webapp 源。

但在这种情况下，两个服务器的带宽将被平等使用。因为，在这种情况下，如果用户从处理网站部分的服务器上传文件，那么由 php 处理的临时文件也将使用该服务器和存储服务器的配额。

有没有其他方法可以做到这一点。

我可以在这个或任何其他方式中使用node.js，它可以完成。我确实有网站的 api 系统，但这没有任何意义，我想直接将我的文件上传到另一台服务器，而不必连接到服务网站的主服务器。

我这样做是为了省钱。别无其他。请不要说买更便宜的服务器，因为，我想实施这项技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:03:39.723

只要您的应用服务器和存储服务器在同一个可用区，并且您使用它们的私有 IP 地址在它们之间传输数据，您就不会产生任何带宽费用。如果您说，将您的文件放在 s3 中，而不是拥有第二个 ec2 实例，只要您在同一区域有 ec2 应用服务器和 s3 存储桶，那么您根本不会有任何带宽费用。

因此，鉴于此，您的带宽使用可能对您来说并不那么重要，您无需将文件直接上传到存储服务器或从客户端上传到 s3。

# java - ant build.compiler 用法

> ID：13179267
> 
> 赞同：3
> 
> 时间：2012-11-01T14:33:06.640
> 
> 标签：java, ant, javac

> **可能重复：**
> [覆盖 Ant javac 任务中的编译器属性](https://stackoverflow.com/questions/235363/override-the-compiler-attribute-in-an-ant-javac-task)

在 Ant 中，我究竟如何使用`build.compiler`选项或[任务](http://ant.apache.org/manual/Tasks/javac.html)[的`<javac>`](http://ant.apache.org/manual/Tasks/javac.html)`compiler`属性？

我尝试了设置`compiler="javac1.5"`，但是当我在十六进制编辑器中打开生成的类文件时，类版本仍然显示为`32`十六进制（版本 1.6）——直到我设置`JAVA_HOME`指向我的 JDK 1.5 安装。（在那之前，它一直指向我的 JDK 1.6 安装。）所以它似乎`JAVA_HOME`取代了该`compiler`属性——在这种情况下，该属性的目的是什么？

和属性似乎确实可以正常*工作*`source`。当我指定版本时，生成的类文件确实具有正确的版本。`target`*`target`*

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T15:04:58.327

该属性的目的是能够选择类似`gcj`或`jikes`代替标准 JDK 编译器的东西。 `javac1.5`（`javac1.6`等等）只是`modern`标准编译器的别名，它的定义只是为了支持默认值与正在运行的 JDK 匹配的规则（`build.compiler`因此默认值为1.3 及更高版本以及1.2 及更低版本）。`javac1.x``x``modern``classic`

如果要编译将在 1.5 上运行的类，则需要使用`source="1.5" target="1.5"`并将引导类路径设置为指向 1.5 类库，以确保不会调用 1.6 或更高版本中引入的方法。*

# php - Symfony 2 Bundle - 安装图片资源

> ID：13179268
> 
> 赞同：2
> 
> 时间：2012-11-01T14:33:12.647
> 
> 标签：php, symfony, twitter-bootstrap, assetic

我通过将相关文件复制到以下位置为 Twitter Bootstrap 创建了一个包：

*   `src/Acme/BootstrapBundle/Resource/public/js`
*   `src/Acme/BootstrapBundle/Resource/public/css`
*   `src/Acme/BootstrapBundle/Resource/public/img`

接下来，我执行`php app/console assets:install web`将捆绑资源复制到 web 文件夹，在我的 twig 模板中，我可以使用assetic 来拉入 css 和 javascript，这工作正常。

我遇到的问题是 vanilla bootstrap css 指向 web 根目录中的 /img 以获取图像资源，这些资源实际上位于`/web/bundles/bellabootstrap/img`

我可以手动将这些文件复制到所需位置，甚至创建符号链接，但我想知道正确的 Symfony / Assetic 方法是什么。

请注意，我对如何为 Bootstrap 执行此操作感兴趣 - jqueryui/jquery-datatables 等以及其他 3rd 方库具有完全相同的问题。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T08:27:46.523

不久前，我发现了正确的解决方案：

[http://symfony.com/doc/current/cookbook/assetic/asset_management.html#fixing-css-paths-with-the-cssrewrite-filter](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#fixing-css-paths-with-the-cssrewrite-filter)

Assetic（一个很棒的软件）可以通过各种过滤器运行你的 CSS，解决这个问题的一个是 ccsrewrite，正如 Symfony 文档中所解释的，它将修复你的 CSS 文件中包含的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:08:19.450

对于 JQuery UI（平滑主题），我有：

```
src/Acme/YourBundle/Resources/public/css/smoothness
src/Acme/YourBundle/Resources/public/css/smoothness/jquery-ui-1.8.16.custom.css
src/Acme/YourBundle/Resources/public/css/smoothness/images
src/Acme/YourBundle/Resources/public/css/smoothness/images/ui-bg_flat_75_ffffff_40x100.png 
```

... 和其他图像文件（就像它们来自 jquery.com 站点一样）。

在树枝上我有：

```
<link type="text/css" rel="stylesheet" href="{{ asset('bundles/acmeyour/css/smoothness/jquery-ui-1.8.16.custom.css') }}"></link> 
```

无需关心 png 文件的位置，因为一个好的 writen css 会为您处理它。另一方面，{{asset() }} 方法指向正确的目录，因此您不必担心。

# jquery - 通过单击 div + jquery 滚动和自动居中 DIV 的内部和外部来更改类

> ID：13179276
> 
> 赞同：0
> 
> 时间：2012-11-01T14:33:41.053
> 
> 标签：jquery, class, html, toggle, swap

我想用“class-1”制作一个水平的盒子，当你点击其中任何一个时，它的类应该变成“class-2”，而其他盒子仍然是“class-1”。

当您单击另一个随机框时，该框应更改为“class-2”，所有其他框应更改为“class-1”。

像这样[http://daniel-libeskind.com/projects](http://daniel-libeskind.com/projects)

有任何想法吗？我试过切换，但它不起作用。

它也将是一个 wordpress 网站。

* * *

# **更新！**

感谢布鲁诺和其他人，我已经达到了某个点。现在我被困在一个新的水平！

像我之前提到的网站一样，单击 DIV 后如何使它们居中？如何使用自动居中 DIV 和动态内容添加 jQuery 滚动？

提前致谢。

**到目前为止的所有代码（也许有人觉得它有用）**

这是java部分：

```
 <script type="text/javascript">
    var toggler = (function(_window) {
        var current = null, 
        clazz = {
            opened: 'second',
            closed: 'first',
            content: 'box-in'
        }, 
        addEvent = function(element, event, func, capture) {
            if ( _window.addEventListener ) {
                element.addEventListener(event, func, capture);
            } else if ( window.attachEvent ) {
                _window.attachEvent('on' + event, func);    
            }
        }, 
        handler = function(event) {
            if ( current !== null && current !== event.target ) {
                toggle(current);
            }

            toggle(event.target);
        }, 
        toggle = function(target) {
            var content = null, 
            re = {
                opened: new RegExp(clazz.opened, "g"), 
                closed: new RegExp(clazz.closed, "g")
            }, 
            i;

            for ( i = 0; i < target.childNodes.length; i++ ) {
                if ( target.childNodes[i].nodeType == 1 ) {
                    if ( target.childNodes[i].id === clazz.content ) {
                        content = target.childNodes[i];
                        break;
                    }
                }
            }

            if ( re.opened.test(target.className) ) {
                target.className = (target.className).replace(re.opened, clazz.closed);
                content.style.display = 'none';
                current = null;
            } else {
                target.className = (target.className).replace(re.closed, clazz.opened);
                content.style.display = 'block';
                current = target;
            }
        };

        return {
            init: function(element) {
                var el = document.getElementById(element), 
                boxes = el.childNodes, 
                box, i;

                for ( i = 0; i < boxes.length; i++ ) {
                    if ( boxes[i].nodeType == 1 ) {
                        box = document.getElementById(boxes[i].id);
                        addEvent(box, 'click', handler, false);
                    }
                }
            }
        };
    })(window); 
```

这是**CSS**

```
#full {margin:0 auto; overflow: auto; height:100%; width:1050px;} #toggler {float:left; margin-right:-30000px;} .box{float:left; margin:2px;} .first{width:300px; height:200px; background:#999;-webkit-transition:all ease-in-out 0.3s;} .second{width:380px; height:400px; background:#000; -webkit-transition:all ease-in-out 0.3s; overflow:hidden;} #box-in {display:none; font-family:Tahoma, Geneva, sans-serif; padding:20px;} #box-title{color:#FFF; font-size:16px; padding-bottom:5px;} #box-content{color:#888; font-size:12px; text-align:justify;} 
```

和**HTML**

```
<div id="full">
<div id="toggler">
    <!-- IMPORTANT: ID of these div boxes MUST be unique -->
    <div id="box1" class="box first">
        <div id="box-in">
            <div id="box-title">Lorem Ipsum Du Si Amet</div>
            <div id="box-content"></div>
        </div>
    </div>

    <div id="box2" class="box first">
        <div id="box-in">
            <div id="box-title">Praesent tempor mattis viverra.</div>
            <div id="box-content"></div>
        </div>
    </div>

    <div id="box3" class="box first">
        <div id="box-in">
            <div id="box-title">Title 3</div>
            <div id="box-content">Content 3</div>
        </div>
    </div>

    <div id="box4" class="box first">
        <div id="box-in">
            <div id="box-title">Title 3</div>
            <div id="box-content">Content 3</div>
        </div>
    </div>
</div>

<script type="text/javascript">
    toggler.init('toggler'); // -> ID of the wrapper DIV (e.g above at line 38)
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:58:41.653

你可以试试

```
$(".class").click( function( ) {

    $(".class").not( this ).removeClass("class-2").addClass("class-1");

    $(this).removeClass("class-1").addClass("class-2");

}); 
```

[在这里](http://jsfiddle.net/bGmPE/1/)提琴

# javascript - JS中的自执行和调用函数

> ID：13179280
> 
> 赞同：3
> 
> 时间：2012-11-01T14:33:50.497
> 
> 标签：javascript, jquery, html, function

我想要一个函数，它可以被其他函数访问以调用它，并且在声明时应该自我执行。

像：

```
function some(var_one, var_two)
{
    // do something
}(var_one, var_two); // declare and execute (doesn't work)

function add_pair()
{
    // do something
    some(James, Amber);
} 
```

执行此操作的正确语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:46:34.543

您不能调用函数声明。声明后面的一对括号根本不会做任何事情。你可以这样做：

```
var some;
(some = function (var_one, var_two) {
    console.log(var_one, var_two);
})("a", "b");

​some("b", "c");​​​​ 
```

上面的示例将记录“a，b”，然后是“b，c”。但这看起来有点乱。你可以坚持你所拥有的并像往常一样调用该函数：

```
function some(var_one, var_two) {
    console.log(var_one, var_two);
}
some("a", "b"); 
```

* * *

**更新**

请注意，通过将函数声明更改为表达式（这是我上面的第一个示例中发生的情况），您删除了在函数似乎在源中声明*之前*调用函数的能力，因为声明被提升到范围的顶部它们出现，并且分配发生在适当的位置。使用函数声明，以下示例可以完美运行：

```
some("a", "b"); // Call it before it appears to be declared
function some(var_one, var_two) {
    console.log(var_one, var_two);
} 
```

我真的看不出有什么理由需要将声明和调用合并为一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:42:41.807

不，你不能同时声明和执行（除非在 IE 中，创建两个不同的函数）。看看[http://kangax.github.com/nfe/](http://kangax.github.com/nfe/)

如果您的函数没有返回值，您可以利用它并让函数返回自身，使其成为分配给变量的立即执行命名函数表达式：

```
var someGlobal = (function some(args) {
    // do something
    return some;
})(now_args);

// then
someGlobal(James, Amber); 
```

最好使用声明*和*调用，以使事情更清晰。

# javascript - setTimeout 不打印连续数字，因为关闭

> ID：13179282
> 
> 赞同：2
> 
> 时间：2012-11-01T14:33:56.313
> 
> 标签：javascript

> **可能重复：**
> [在 for 循环中设置超时并将 i 作为值传递](https://stackoverflow.com/questions/5226285/settimeout-in-a-for-loop-and-pass-i-as-value)

```
for (var i = 0; i < 5; i++) {
    setTimeout(function (i) {
        console.log(this.i)
    }, 1000);
} 
```

这会打印`5`五次。如何编写循环以便打印`0, 1, 2, 3, 4`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T14:36:27.320

将其包装在一个自动执行的闭包中：

```
for (var i = 0; i < 5; i++) (function(i) {
    setTimeout(function() {
        console.log(i)
     }, 1000);
})(i); 
```

注意： setTimeout 的函数表达式的参数没有被使用，所以我把它拿出来了。此外，使用全局变量也不好。`var`使用关键字创建变量。

你也不需要`this.i`；只需使用`i`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T14:39:52.493

像这样：

```
for (var i = 0; i < 5; i++) {
    (function (i) {
        setTimeout(function () {
            console.log(i)
        }, 1000);
    })(i);
} 
```

这里的重要因素是**JavaScript 只有函数作用域***，因此为每个循环创建不同作用域的唯一方法是将循环的内脏包装在一个函数中。这样你的函数就会为循环的迭代`setTimeout`创建一个闭包。`i`

编辑：

*`let`关键字出现在[ES6](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let)中，它使您能够声明块作用域的局部变量。如果不启用实验性功能，Chrome 31 不支持它，因此请务必[检查兼容性](http://kangax.github.io/es5-compat-table/es6/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T14:37:58.950

试试这个：

```
var i=0;
var fn;
fn=function(){
      console.log(i)
      i++;
      if(i<=4)setTimeout(fn,1000);
   }
setTimeout(fn,1000); 
```

这将每秒钟输出一个数字五次。

# git - 查找谁删除了一个 git 分支

> ID：13179283
> 
> 赞同：11
> 
> 时间：2012-11-01T14:33:56.713
> 
> 标签：git

有人删除了一个远程 git 分支（我没有它的本地副本）。是否可以找到谁以及何时删除了分支？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:37:52.617

如果您有权访问远程存储库（并且是最近完成的），您可以使用它`reflog`来找出分支何时被删除。然后，您可以在该提交上创建一个分支以在需要时恢复它。

[gitolite 文档](http://sitaramc.github.com/concepts/reflog.html)提供了更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T14:42:42.260

一般来说，不，除非您使用各种挂钩来执行某种日志记录，或配置`git-daemon`为记录连接，或者如果您使用`ssh`连接，您的`syslog`配置可能已经捕获了足够的信息来关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-06T11:55:41.493

我知道这是旧的，但也许有人会发现它很有用如果您的 git 服务器是 Bitbucket 服务器并且您可以访问数据库，您可以运行以下查询：

```
select p.project_key, r.slug, pr.ref_id, pr.change_type, pr.from_hash, pr.to_hash, nu.name, a.created_timestamp from sta_repo_push_ref pr join sta_repo_activity ra on ra.activity_id = pr.activity_id join repository r on r.id = ra.repository_id join project p on p.id = r.project_id join sta_activity a on a.id = pr.activity_id join sta_normal_user nu on nu.user_id = a.user_id where p.project_key = '<project_key>' and r.slug = '<repository_slug>' and to_hash like '0000000%' and ref_id='refs/heads/<branch_name>' order by a.created_timestamp desc; 
```

确保替换项目密钥和存储库以及分支名称。执行后会在name栏找到用户名

# java - 休眠映射异常：无法确定类型

> ID：13179285
> 
> 赞同：0
> 
> 时间：2012-11-01T14:34:05.203
> 
> 标签：java, hibernate

我发现了很多关于此类错误的链接，但我没有找到任何解释 Enumtypes 的内容。我下载了最新的休眠 jar 文件，但没有用！

错误堆栈跟踪：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [dao-hbm.xml]: Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: ca.ups.tundra.dao.MessageSystemUserType, at table: History, for columns: [org.hibernate.mapping.Column(SCANMSGSYS)]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1338)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:423)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4701)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5204)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5199)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.hibernate.MappingException: Could not determine type for: ca.ups.tundra.dao.MessageSystemUserType, at table: History, for columns: [org.hibernate.mapping.Column(SCANMSGSYS)]
    at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:292)
    at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:276)
    at org.hibernate.mapping.Property.isValid(Property.java:207)
    at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:458)
    at org.hibernate.mapping.SingleTableSubclass.validate(SingleTableSubclass.java:66)
    at org.hibernate.cfg.Configuration.validate(Configuration.java:1149)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1334)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:814)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:732)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)
    ... 23 more 
```

以下是我的 EnumUserType 类：

```
import org.hibernate.usertype.UserType; 

public class EnumUserType<E extends Enum<E>> implements UserType { 
```

扩展 EnumUserType 类：

```
public class MessageSystemUserType extends EnumUserType<MessageSystem> { 
```

以下是我的枚举类：

```
public enum MessageSystem { OPSYS, GIPLD, AA, CISCME,LOCAL, TFCS,LH, XPLD, CDC } 
```

在我添加最后两个枚举类型之前，它运行良好。

编辑：这就是我映射枚举的方式，

```
<property name="messageSystem" type="ca.ups.tundra.dao.MessageSystemUserType" length="10" column="SCANMSGSYS"/> 
```

解决此问题或有关错误的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:13:55.250

检查依赖关系的 web.xml 文件，无论它们是否良好。检查 .classpath filr 以获取 jar 文件的路径，这可能是一种解决方案。检查丢失的 jar 文件，这些文件可能在项目的类路径中，但不在你的 lib 中，反之亦然

```
<classpathentry exported="true" kind="lib" path="../hibernateVersion.jar">
   <attributes>
       <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
   </attributes>
</classpathentry> 
```

# c# - 为什么 if 语句表达式不被视为条件？

> ID：13179287
> 
> 赞同：1
> 
> 时间：2012-11-01T14:34:13.157
> 
> 标签：c#, nullreferenceexception

我有一个组合框，其中包含日期列表。我想确保用户实际选择了一个日期。所以，我有以下内容：

```
 if (cmbDateSelecter.SelectedItem.ToString().ToLower().Contains("select") || 
            cmbDateSelecter.SelectedItem.ToString().ToLower().Contains("seleccione") || 
            cmbDateSelecter.SelectedItem == null) 
```

默认项目是“选择日期”，所以我正在检查这是否是所选项目。这曾经是自己工作的，出于某种我还没有弄清楚的原因，开始抛出 NullReferenceExceptions。所以，我添加了空检查。但是，我仍然遇到异常。但如果我这样做：

`if(cmbDateSelecter.SelectedItem == null)`

现在，我知道我可以先进行空检查，一切都会变得很糟糕。我的问题是为什么它在抛出异常之前不评估所有表达式？如果其中一个是真的，在我的表达式的情况下（作为空检查），为什么它仍然会抛出异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T14:36:06.817

它不会在抛出之前评估所有条件，因为在 C#（以及几乎所有其他编程语言）中，[逻辑 OR 运算符](http://msdn.microsoft.com/en-us/library/6373h346%28v=vs.110%29.aspx)会[进行短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。即使它*确实*评估了它们，它*仍然*会抛出，因为评估前两个条件中的任何一个都涉及尝试访问空对象。所以这种行为不会提供解决方案。

但是，短路评估正是允许您通过`null`在开头移动检查来解决问题的方法：如果测试返回`true`，则编译器知道整个表达式将是`true`并跳过评估抛出的表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:37:10.490

它从左到右评估并使用短路评估，因此您需要：

```
if (cmbDateSelecter.SelectedItem == null ||
    cmbDateSelecter.SelectedItem.ToString().ToLower().Contains("select") || 
    cmbDateSelecter.SelectedItem.ToString().ToLower().Contains("seleccione")
) 
```

另一点是您的测试有点脆弱，因为您依赖于“请选择”选项的特定字符串。由于这无疑是第一个选项，您可以改为使用：

```
if (cmbDateSelector.SelectedIndex <= 0)
{
    ... nothing selected ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-16T02:29:28.120

语句括号内的表达式`if`只是 type 的普通表达式`bool`。它不是条件列表。

似乎以`if`错误的方式向您介绍了该声明。这不是一种特殊情况——它是一般情况的一个实例：C# 中的语句接受一个表达式，然后对表达式的求值结果做一些事情。其他例子是：

*   `return expression;`- 将返回表达式的值
*   `while (expression) statement;`只要表达式仍然存在，就会执行*语句*`true`
*   `do statement; while (expression);`只要表达式保持为真，就执行*语句*`false`，但至少执行一次，即使表达式开始时也是如此。

这些以及更多的共同点是它们都*评估表达式*以确定其值。如果在表达式求值期间抛出任何异常，则表达式求值立即停止，并开始搜索异常处理程序。

它在所有现代编程语言中几乎都以相同的方式工作，所以这是一个将伴随你一生的课程。

请注意，即使是“短路评估”之类的东西也不会改变这一点：

```
private bool NotGood(){throw new Exception();}

if (a || b) 
```

这将首先评估`a`. 如果`a`为真，则评估停止。只有 if `a`is false 才会`b`被评估。仍然，

```
if (NotGood() || b) 
```

将抛出异常并且永远不会评估`b`.

* * *

PS 我曾使用过对“条件”具有不同语义的系统。特别是，规则引擎和其他此类系统处理系统行为的声明形式。这样的系统可能会做一些事情，比如并行评估条件的所有部分，甚至将异常视为一个值，也许是`false`.

# c# - 解析列表 对于所有值

> ID：13179296
> 
> 赞同：0
> 
> 时间：2012-11-01T14:34:41.553
> 
> 标签：c#, list, parsing, generics

我有许多存储在列表中的类。我正在尝试创建一个接受 List 作为泛型类型并将适当列表中每个元素的内容作为字符串返回的方法。

这是许多类之一的示例。这将被定义为 List<Player>：

```
public class Player
{
    public int PlayerId { get; set; }
    public string PlayerName { get; set; }
    public string FavoriteThing { get; set; }
} 
```

我仍然在这里努力使语法正确：

```
 public static string GetStringOfData<T>(List<T> data)
    {
        string dataString = string.Empty;
        var type = data.GetType();

        // Insert magic here to get values for PlayerId, PlayerName, etc...

        return dataString;
    } 
```

我们怎样才能做到这一点？我正在使用 C# 4.0。

**更新** 我使用的类是从 edmx 模型生成的，连接到数据库。这是一个报告工具，它将解析各种表格并通过电子邮件向用户报告错误。用户特别要求能够查看所有字段的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:42:00.077

每种类型都继承`ToString`自`object`. `ToString`在你的类中覆盖。

```
public class Player
{
    ...
    public override string ToString()
    {
        return String.Format("Player [ID = {0}, Name = {1}]",
                             PlayerId, PlayerName);
    }

} 
```

然后你可以使用非泛型`IEnumerable`来处理它们。（为什么要限制自己`List<T>`是否可以与 共进午餐`IEnumerable`？后者将与`List<T>`、数组、`SortedLists<T>`、`HashSet<T>`、 、根本不基于集合的`IEnumerable<T>`算法实现一起使用，...）`IEnumerable`

```
public static string GetStringOfData(IEnumerable data)
{
    var sb = new StringBuilder();

    foreach (object o in data) {
        sb.Append(o).Append("; ");
    }    
    if (sb.Length >= 2 ) {
        sb.Length -= 2;
    }    
    return sb.ToString();
} 
```

这适用于几乎任何类型的集合。

* * *

注意：重写`ToString`具有积极的副作用，即调试器将向您显示此字符串，而不仅仅是显示类型名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:41:08.160

您应该能够执行以下操作：

```
 foreach(T item in data)
        {
            var props = item.GetType().GetProperties();
            foreach(var prop in props)
            {   
                dataString += prop.GetValue(item, null);
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:41:04.983

这里有几个选项。

你可以让你所有的类都实现一些接口，比如

```
IDataString 
```

其中包括从对象获取字符串数据的方法。然后您的方法可以只接受这些列表，并返回一个字符串：

```
public static string GetStringOfData(List<IDataString> data)
    {
        StringBuilder sb = new StringBuilder();
        foreach(var dm in data)
        {
          sb.append(dm.InterfaceMethod());
        }

        return sb.ToString()
    } 
```

您还可以在所有对象中覆盖 ToString，并且只接受对象列表。代码将是相似的。这是假设您不介意失去正常的 ToString 功能。

你可以用refelction来做到这一点，我认为这是你在问题中所追求的，但你只是要连接所有公共字符串字段吗？这有点慢，而且更丑陋，但可以肯定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T14:43:57.857

首先在每个类中覆盖`ToString()`方法：

```
public class Player
{
    public int PlayerId { get; set; }
    public string PlayerName { get; set; }
    public string FavoriteThing { get; set; }
    public override string ToString()
    {
        return this.PlayerId.Tostring() + " " + PlayerName + " " + FavoriteThing;
    }
} 
```

然后在您的方法中连接从类实例返回的所有字符串：

```
public static string GetStringOfData<T>(List<T> data)
        {
            StringBuilder dataBuilder = new StringBuilder();
            foreach (object o in data)
            {
                dataBuilder.Append(o.ToString());
                dataBuilder.Append(" ");
            }

            return dataBuilder.ToString();
        } 
```

`StringBuilder`请注意，由于性能问题，最好使用连接字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T14:45:06.510

您期待的魔法可能是反射：在运行时确定属性并获取列表中每个项目的值。

代码如下：

```
public static string GetStringOfData<T>(List<T> list)
{
    var stringBuilder = new StringBuilder();

    var properties = typeof(T).GetProperties()
        .Where(p => !p.GetIndexParameters().Any());

    foreach (var item in list)
    {
        foreach (var propertyInfo in properties)
        {
            stringBuilder.AppendFormat("{0}={1};",
                                        propertyInfo.Name,
                                        propertyInfo.GetValue(item, null));
        }
        stringBuilder.AppendLine();
    }

    return stringBuilder.ToString();
} 
```

# php - 删除列表后比较列表

> ID：13179298
> 
> 赞同：0
> 
> 时间：2012-11-01T14:34:45.157
> 
> 标签：php, jquery

我在一个页面上工作，我需要从一个列表中拖动项目，将它们放在放置区域中，然后使用提交按钮将它们的放置顺序与答案键进行比较。基本上是一个非常简单的拖放测验。我的问题是找出实现这一目标的最佳方法。我知道少量的 JQuery 和 PHP，所以任何帮助将不胜感激。

```
<ul id="answerList">
    <li><a draggable="true" href"#" id="one">Question 1</li>
    <li><a draggable="true" href"#" id="two">Question 2</li>
    <li><a draggable="true" href"#" id="three">Question 3</li>
</ul>

<ul id="answerDrop">
    <li>Drop Answer Here</li>
</ul>

<div id="submitBtn">
     <input type="button">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:54:12.557

这是您的 HTML：

```
<ul id="answerList">
    <li><a draggable="true" href"#" id="one">Question 1</li>
    <li><a draggable="true" href"#" id="one">Question 2</li>
    <li><a draggable="true" href"#" id="one">Question 3</li>
</ul> 
```

首先，ID 必须是唯一的。

在您的放置区域：

```
<ul id="answerDrop">
    <li>Drop Answer Here</li>
</ul> 
```

要查看拖放项目的内容，您可以使用：

```
$('#answerDrop a').each(function() {
      alert($(this).attr('id'));
}) 
```

它们将按照显示的顺序出现，但您确实需要获取唯一的 ID 才能分辨出哪个是哪个。

# javascript - 高图表 - 图表未加载但未显示任何错误

> ID：13179299
> 
> 赞同：0
> 
> 时间：2012-11-01T14:34:48.230
> 
> 标签：javascript, json, highcharts

我是 JSON 和 High Charts 的新手。我需要显示带有高图表的动态线。我为此使用 JSON 格式。我真的很困惑我的代码有什么问题。我在 Firebug 中没有收到任何错误，但图表没有呈现。下面是我的 JSON。

```
{
"data": [
    {
        "AccountName": "test@test.com",
        "Campaign": [
            {
                "id": 1138,
                "name": "Samsung Corporate v2",
                "accountid": 106680966134773,
                "FBImpression": 0,
                "CLImpression": 78,
                "FBClick": 0,
                "CLClick": 0,
                "FBSpent": 0,
                "CLSpent": 0,
                "FBConnection": 0,
                "CLConnection": 0
            },
            {
                "id": 1133,
                "name": "Samsung Corporate Fan Gate oCPM",
                "accountid": 106680966134773,
                "FBImpression": 0,
                "CLImpression": 90,
                "FBClick": 0,
                "CLClick": 0,
                "FBSpent": 0,
                "CLSpent": 0,
                "FBConnection": 0,
                "CLConnection": 0
            },
            {
                "id": 647,
                "name": "Samsung Corporate Fan Gate",
                "accountid": 106680966134773,
                "FBImpression": 0,
                "CLImpression": 0,
                "FBClick": 0,
                "CLClick": 0,
                "FBSpent": 0,
                "CLSpent": 0,
                "FBConnection": 0,
                "CLConnection": 0
            },
            {
                "id": 646,
                "name": "Samsung Corporate Timeline",
                "accountid": 106680966134773,
                "FBImpression": 0,
                "CLImpression": 0,
                "FBClick": 0,
                "CLClick": 0,
                "FBSpent": 0,
                "CLSpent": 0,
                "FBConnection": 0,
                "CLConnection": 0
            },
            {
                "id": 1548,
                "name": "Sauza Tequila v2.0",
                "accountid": 108139269338750,
                "FBImpression": 0,
                "CLImpression": 0,
                "FBClick": 0,
                "CLClick": 0,
                "FBSpent": 0,
                "CLSpent": 0,
                "FBConnection": 0,
                "CLConnection": 0
            },
            {
                "id": 953,
                "name": "Samsung Corporate Timeline O C P M",
                "accountid": 106680966134773,
                "FBImpression": 0,
                "CLImpression": 0,
                "FBClick": 0,
                "CLClick": 0,
                "FBSpent": 0,
                "CLSpent": 0,
                "FBConnection": 0,
                "CLConnection": 0
            },
            {
                "id": 738,
                "name": "MSN EN FB",
                "accountid": 106388236165899,
                "FBImpression": 0,
                "CLImpression": 0,
                "FBClick": 0,
                "CLClick": 0,
                "FBSpent": 0,
                "CLSpent": 0,
                "FBConnection": 0,
                "CLConnection": 0
            },
            {
                "id": 1511,
                "name": "Samsung Passions Program",
                "accountid": 106680966134773,
                "FBImpression": 2786134,
                "CLImpression": 2786134,
                "FBClick": 566,
                "CLClick": 566,
                "FBSpent": 679.77001953125,
                "CLSpent": 679.77001953125,
                "FBConnection": 396,
                "CLConnection": 358
            },
            {
                "id": 917,
                "name": "Samsung Passion App",
                "accountid": 106680966134773,
                "FBImpression": 0,
                "CLImpression": 0,
                "FBClick": 0,
                "CLClick": 0,
                "FBSpent": 0,
                "CLSpent": 0,
                "FBConnection": 0,
                "CLConnection": 0
            },
            {
                "id": 1606,
                "name": "Samsung Corporate v2 oCPM",
                "accountid": 106680966134773,
                "FBImpression": 0,
                "CLImpression": 0,
                "FBClick": 0,
                "CLClick": 0,
                "FBSpent": 0,
                "CLSpent": 0,
                "FBConnection": 0,
                "CLConnection": 0
            }
        ]
    }
]
} 
```

这是我的html文件。

```
<script src="jquery.min.js" type="text/javascript"></script>
<script src="highcharts.js"></script>
<div id="errq" style="height: 400px"></div>
<script>
    $(document).ready(function() {
        var options = {
            chart: {
                renderTo: 'errq',
                type: 'line'
            },
            title: {
                text: 'shannon.way'
            },
            tooltip: {
                formatter: function() {
                    return this.series.name + ':' + '<b> ' + this.y + '</b>';
                },
                style: {
                    fontSize: '10px'
                }

            },
            credits: {
                enabled: false
            },
            yAxis: {
                title: {
                    text: ''
                },

            },
            xAxis: {
                labels: {
                    enabled: false
                }
            },
            series: [{
                name: 'Budget Spent',

                data: []},
            {
                name: 'Impressions',
                data: []},
            {
                name: 'Clicks',
                data: []},
            {
                name: 'Likes',
                data: []}

                                    ]
        };
        $.getJSON('accounts.json', null, function(data) {
            var str = JSON.stringify(data);

    /* options.series[0].data = data[0].CLImp;    
                         options.series[1].data = data[0].CLClick;  
                 options.series[2].data =    data[0].CLSpent;  
                 options.series[3].data = data[0].CLLikes;  
                      chart = new Highcharts.Chart(options);*/

            var json_parsed = $.parseJSON(str);
            var CLimp = new Array();
            for (var u = 0; u < json_parsed.data.length; u++) {
                var user = json_parsed.data[u];
                for (i = 0; i < user.Campaign.length; i++) {
                    CLimp[i] = parseInt(user.Campaign[i].CLImpression);

                }

            }
            var imp = CLimp.join(",");
            alert(imp);
            options.series[0].data = imp;
            chart = new Highcharts.Chart(options);
        });
    });​
</script> 
```

当我`alert(imp);`得到`78,90,0,0,0,0,0,2786134,0,0`但无法弄清楚为什么图表没有呈现时。请在这方面给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:06:45.627

Highcharts 不期望字符串格式的数据，而是数组格式的数据。您的问题是您将数组转换为字符串：

```
 var imp = CLimp.join(",");
        alert(imp);
        options.series[0].data = imp; 
```

只需直接使用数组，它应该可以工作：

```
 options.series[0].data = CLimp; 
```

[jsFiddle](http://jsfiddle.net/6Ac24/)的工作示例。

# google-maps - getPlaces() 函数的 Google Maps Places API 问题

> ID：13179303
> 
> 赞同：1
> 
> 时间：2012-11-01T14:34:55.277
> 
> 标签：google-maps, google-maps-api-3

有人能告诉我为什么 getPlaces() 函数在下面返回一个空格字符串吗？

在 head 元素中，我有指向 Google 地图脚本的链接

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&v=3.exp&key=MyKey&libraries=places"></script> 
```

Javascript代码：

```
jQuery(window).load(function() {
  var map = new google.maps.Map(document.getElementById('mapCanvas'), {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    streetViewControl: false
  });
  var defaultBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(41.7033177, -93.0573533),
    new google.maps.LatLng(41, -93)
  );

  map.fitBounds(defaultBounds);

  var input = document.getElementById('addressSearch');
  var searchBox = new google.maps.places.SearchBox(input);
  var markers = [];

  google.maps.event.addListener(searchBox, 'places_changed', function() {
    var places = searchBox.getPlaces();

    for (var i = 0, marker; marker = markers[i]; i++) {
      marker.setMap(null);
    }

    markers = [];
    var bounds = new google.maps.LatLngBounds();

    for (var i = 0, place; place = places[i]; i++) {
      var place = places[i];
      var marker = new google.maps.Marker({
        map: map,
        title: place.name,
        position: place.geometry.location,
        draggable: true
      });
      markers.push(marker);

      bounds.extend(place.geometry.location);
    }
    map.fitBounds(bounds);
    if (markers.length == 1) map.setZoom(17);
  });

  google.maps.event.addListener(map, 'bounds_changed', function() {
    var bounds = map.getBounds();
    searchBox.setBounds(bounds);
  });
}); 
```

此代码取自 Google 的开发人员站点，来自带有文本搜索字段的示例，因此它应该可以正常工作。2天前，它工作正常。现在没有了。问题是该`getPlaces()`方法返回一个带有空格字符的字符串，而不是它应该返回的数组。我在这里想念什么？

**更新：**好的，我的问题还不够清楚。起作用的是搜索框中的自动完成功能。什么不起作用是`places_changed`事件，特别是行

```
var places = searchBox.getPlaces(); 
```

该`places`变量应该包含一个数组，以便在下一个`for`循环中，它将创建一个标记数组并将它们放在地图上。相反，它返回的是一个空字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T16:38:53.793

代替：

```
var searchBox = new google.maps.places.SearchBox(input); 
```

尝试：

```
var searchBox = new google.maps.places.Autocomplete(input); 
```

而不是

```
var places = searchBox.getPlaces(); 
```

尝试

```
var place = searchBox.getPlace(); 
```

# mysql - MySQL为什么不使用JOIN加ORDER的主键？

> ID：13179308
> 
> 赞同：5
> 
> 时间：2012-11-01T14:35:17.123
> 
> 标签：mysql, indexing, sql-order-by, left-join

这是给你的一个整洁的（显然是 MySQL）：

```
# 设置东西
如果存在则删除数据库 index_test_gutza;
创建数据库 index_test_gutza；
使用 index_test_gutza；

创建表客户订单（
    id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
    发票 MEDIUMINT UNSIGNED NOT NULL DEFAULT 0,
    主键（id）
);
插入到 customer_order
    （身份证，发票）
    价值观
    (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 5);

创建表 customer_invoice (
    id MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT,
    invoice_no MEDIUMINT UNSIGNED DEFAULT NULL，
    invoice_pdf LONGBLOB，
    主键（id）
);
插入到 customer_invoice
    (id, invoice_no)
    价值观
    (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 5);

# 好的，这是牛肉
解释
    选择 co.id
    FROM customer_order AS co;

解释
    选择 co.id
    FROM customer_order AS co
    按 co.id 订购；

解释
    选择 co.id，ci.invoice_no
    FROM customer_order AS co
    左加入 customer_invoice AS ci ON ci.id=co.invoice;

解释
    选择 co.id，ci.invoice_no
    FROM customer_order AS co
    左加入 customer_invoice AS ci ON ci.id=co.invoice
    按 co.id 订购；

```

底部有四个 EXPLAIN 语句。前两个结果完全符合您的期望：

```
+----+-------------+--------+-------+-------------- -+---------+---------+------+------+-----------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+--------+-------+-------------- -+---------+---------+------+------+-----------+
| 1 | 简单 | 合作 | 索引 | 空 | 初级 | 3 | 空 | 5 | 使用索引 |
+----+-------------+--------+-------+-------------- -+---------+---------+------+------+-----------+

```

第三个已经很有趣了——注意 customer_order 中的主键是如何不再使用的：

```
+----+-------------+--------+--------+------------- --+---------+---------+-------------- --+--------+--------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+--------+--------+------------- --+---------+---------+-------------- --+--------+--------------+
| 1 | 简单 | 合作 | 全部 | 空 | 空 | 空 | 空 | 5 | |
| 1 | 简单 | 词 | eq_ref | 初级 | 初级 | 3 | index_test_gutza.co.invoice | 1 | 使用索引 |
+----+-------------+--------+--------+------------- --+---------+---------+-------------- --+--------+--------------+

```

然而，第四个是 zinger - 只需*在主键上*添加 ORDER BY就会导致 customer_order 上的文件排序（这是可以预料的，因为它已经在上面感到困惑）：

```
+----+-------------+--------+--------+------------- --+---------+---------+-------------- --+--------+----------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+--------+--------+------------- --+---------+---------+-------------- --+--------+----------------+
| 1 | 简单 | 合作 | 全部 | 空 | 空 | 空 | 空 | 5 | 使用文件排序 |
| 1 | 简单 | 词 | eq_ref | 初级 | 初级 | 3 | index_test_gutza.co.invoice | 1 | 使用索引 |
+----+-------------+--------+--------+------------- --+---------+---------+-------------- --+--------+----------------+

```

文件排序！虽然我从不使用 customer_order 表中的主键进行订购，以及 customer_invoice 表中的主键用于 JOIN。那么，以所有好的和正确的名义，**为什么它会突然切换到文件排序？！更重要的是，我该如何避免这种情况？**作为记录，我很乐意接受一个书面答案，解释为什么**不能**避免（如果是这样的话。）

正如您现在可能怀疑的那样，这实际上是在生产中发生的，尽管这些表绝不是巨大的（只有数百条记录），但发票表（包含 PDF 文件）上的文件排序在我运行时正在杀死服务器与上述类似的查询（我需要这些查询以了解哪些订单已开具发票，哪些未开具发票）。

在你问之前，我设计了数据库，我认为我可以安全地将 PDF 文件存储在该表中，因为我*从*不需要任何搜索查询——我总是手头有它的主键！

# 更新（评论概要）

以下是以下评论中建议的概要，因此您不必阅读所有内容：

*   *您应该在 customer_order.invoice 上添加一个键* - 我实际上在生产中尝试过，它没有区别（因为它不应该）
*   *你应该使用`USE INDEX`*-- 试过了，没用。我也试过`FORCE INDEX`了——也没有结果（没有任何变化）
*   *您过度简化了用例，我们需要实际的生产查询*——我可能在第一次迭代中剥离了太多，所以我更新了它（我只是`, ci.invoice_no`在`SELECT`最后几个查询中添加了）。作为记录，如果有人真的很好奇，这里是生产查询，完全一样（检索订单的最后一页）：

```
选择
    corder.id,
    corder.public_id,
    CONCAT(buyer.fname," ",buyer.lname) 作为买家名称，
    corder.status,
    电汇付款，
    corder.reserved AS R,
    corder.tracking_id!="" 作为 A,
    corder.payment_received 作为 pay_date，
    invoice.invoice_no AS inv,
    invoice.receipt_no AS 收据，
    invoice.public AS pub_inv，
    proforma.proforma_no AS 教授，
    proforma.public AS pub_pf,
    评分，
    corder.rating_comments!="" AS got_comment
从
    绳索
在buyer.id=corder.buyer 上左加入用户作为买家
LEFT JOIN invoice as invoice ON invoice.id=corder.invoice
LEFT JOIN invoice as proforma ON proforma.id=corder.proforma
订购方式
    编号 DESC
限制 400, 20;

```

上面的查询（同样，这正是我在生产中运行的）大约需要 14 秒才能运行。这是在生产环境中执行的简化查询，如上面的用例所示：

```
选择
    corder.id,
    invoice.invoice_no
从
    绳索
LEFT JOIN invoice ON invoice.id=corder.invoice
订购方式
    corder.id DESC
限制 400, 20;

```

这个需要 13 秒才能运行。请注意*，只要我们谈论的*是结果的最后一页（我们是），LIMIT 就没有任何区别。也就是说，当涉及文件排序时，检索最后 12 个结果或所有 412 个结果之间绝对没有显着差异。

# 结论

ypercube 的答案不仅正确，而且不幸的是它似乎是唯一合法的答案。我试图进一步将条件与字段分开，因为`SELECT * FROM corder`如果corder本身包含LONGBLOB（并且从子查询中的主查询复制字段是不优雅的），子查询最终可能会涉及大量数据，但不幸的是它似乎没有工作：

```
选择
    corder.id,
    corder.public_id,
    CONCAT(buyer.fname," ",buyer.lname) 作为买家名称，
    corder.status,
    电汇付款，
    corder.reserved AS R,
    corder.tracking_id != "" AS A,
    corder.payment_received AS pay_date,
    invoice.invoice_no AS inv,
    invoice.receipt_no AS 收据，
    invoice.public AS pub_inv，
    proforma.proforma_no AS 教授，
    proforma.public AS pub_pf,
    评分，
    corder.rating_comments!="" AS got_comment
从
    绳索
在buyer.id = corder.buyer 上左加入用户作为买家
LEFT JOIN invoice AS invoice ON invoice.id = corder.invoice
LEFT JOIN invoice AS proforma ON proforma.id = corder.proforma
在哪里 corder.id 在 (
    选择编号
    发件人
    ORDER BY id DESC
    限制 400,20
)
订购方式
    corder.id DESC；

```

此操作失败，并显示以下错误消息：

```
错误 1235 (42000): 这个版本的 MySQL 还不支持 'LIMIT & IN/ALL/ANY/SOME 子查询'

```

我正在使用 MySQL 5.1.61，它在 5.1 家族中相当新（显然这在 5.5.x 中也不支持）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:20:04.497

你能试试这个版本吗（它基本上首先获取`corder`表的 420 行，保留其中的 20 行，然后执行 3 个外连接）：

```
SELECT
    corder.id,
    corder.public_id,
    CONCAT(buyer.fname," ",buyer.lname) AS buyer_name,
    corder.status,
    corder.payment,
    corder.reserved AS R,
    corder.tracking_id != "" AS A,
    corder.payment_received AS pay_date,
    invoice.invoice_no AS inv,
    invoice.receipt_no AS rec,
    invoice.public AS pub_inv,
    proforma.proforma_no AS prof,
    proforma.public AS pub_pf,
    corder.rating,
    corder.rating_comments!="" AS got_comment
FROM
    ( SELECT * 
      FROM corder
      ORDER BY
        id DESC 
      LIMIT 400, 20
    )
    AS corder
LEFT JOIN user as buyer ON buyer.id = corder.buyer
LEFT JOIN invoice AS invoice ON invoice.id = corder.invoice
LEFT JOIN invoice AS proforma ON proforma.id = corder.proforma
ORDER BY
    corder.id DESC ; 
```

# ruby - 为什么 is_prime 的值不会随着每个循环而改变？

> ID：13179309
> 
> 赞同：-2
> 
> 时间：2012-11-01T14:35:17.857
> 
> 标签：ruby, boolean

下面是来自 Codeacademy.com 的一些代码。有一点我不明白：为什么 is_prime 的值不会随着循环的每次迭代而改变？例如，测试数字 8，可能是循环导致 is_prime 对于值 2 和 3 为假，但对于 4，它变为假（因为您可以除以 4）。但是，对于 5,6 和 7，它又是真的。那么为什么在循环结束时，即使在 5,6 和 7 之后，该值仍保持为假，这会使它再次为真？

```
def prime(n)
  puts "That's not an integer." unless n.is_a? Integer
  is_prime = true
  for i in 2..n-1
    if n % i == 0
      is_prime = false
    end
  end
  if is_prime
    puts "#{n} is prime!"
  else
    puts "#{n} is not prime."
  end
end

prime(2)
prime(9)
prime(11)
prime(51)
prime(97) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:39:57.870

您所描述的行为是如果这样写会发生什么：

```
for i in 2..n-1
  if n % i == 0
    is_prime = false
  else
    is_prime = true
  end
end 
```

但是在您的代码中没有`else`. 如果数字不可整除，则不会发生任何事情，因此变量保持原样。

# c++ - Boost.Regex 分隔符解析

> ID：13179311
> 
> 赞同：1
> 
> 时间：2012-11-01T14:35:29.637
> 
> 标签：c++, regex, boost, delimiter

这是一个相当简单的问题，我只是在 boost 文档或任何其他 boost 正则表达式示例/教程中都找不到它。

假设我想使用这个实现标记一个字符串：

```
boost::regex re("[\\sXY]+");
std::string s;

while (std::getline(std::cin, s)) {
  boost::sregex_token_iterator i(s.begin(), s.end(), re, -1);
boost::sregex_token_iterator j;
  while (i != j) {
     std::cout << *i++ << " ";
  }
  std::cout << std::endl;
} 
```

问题是分隔符表达式不会被迭代。我还需要分隔符字符串。我怎样才能确定这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:34:19.063

如果我理解正确，除了遍历标记之外，您还想遍历分隔符。创建另一个用于查找由您的正则表达式标识的令牌的令牌迭代器还不够吗？

```
 boost::sregex_token_iterator i(s.begin(), s.end(), re, -1);

 boost::sregex_token_iterator j;
 //now find the tokens that match the regex -> the delimiters
 boost::sregex_token_iterator begin(s.begin(), s.end(), re), end;
 while (i != j)
   {
     std::cout << *i++ << " ";
     if( begin != end)
       {
         std::cout << "(delimiter = " << *begin++ << ") ";
       }
   } 
```

# javascript - 如何仅在单击特定条件时启用功能

> ID：13179314
> 
> 赞同：0
> 
> 时间：2012-11-01T14:35:33.700
> 
> 标签：javascript, jquery

嗨，我有 3 个按钮，分别称为 1.ADD、2.EDIT、3.DELETE ......以及一个 id=comp_map 的地图......我正在使用 Open Street Maps......

```
function addComp() {

     $("#comp_map").click(function() {
          if (event.type !== 'mousemove') {
                var containerPoint = comp_map.mouseEventToContainerPoint(event),
                layerPoint = comp_map.containerPointToLayerPoint(containerPoint),
                latlng = comp_map.layerPointToLatLng(layerPoint)            
                alert("Marker Location: "+latlng);
            }
    });

}

   function editComp() {
        // disable the map click
    }

    function delComp() {
        // disable the map click
    } 
```

我的问题是我只想`$("#comp_map").click`在单击添加按钮时工作...但是当单击其他按钮（例如编辑，删除）时，此功能不应该工作...这是正确的方法还是我的方法是错误的纠正我...谢谢...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:53:32.620

因此，您需要跟踪应用程序/按钮的状态，以便在单击地图时可以根据该状态以不同方式处理交互：

在你的 JS

```
$(function() {
  //set default action to add. If no default set action = false
  var action = 'add';
  //Bind to button clicks and update stored state
  $('body').on('click', 'button', function(e){
    var newAction = $(e.target).data('action');
    if ($(e.target).data('action')) {
      action = newAction;
    }
  });
  //bind to map clicks and handle based on current action state
  $("#comp_map").click(function(e) {
    //you might want this conditional in your addComp() fn depending on what you need in editComp()/delComp()
    if (e.type !== 'mousemove') {
      e.preventDefault();
      switch (action) {
         case "add": 
            addComp(e);
            break;
         case "edit":
            editComp(e);
            break;
         case "delete":
            delComp(e);
            break;
         default:
            return false
            break;
      }
    }
  })
  function addComp(e) {
      var containerPoint = comp_map.mouseEventToContainerPoint(event),
        layerPoint = comp_map.containerPointToLayerPoint(containerPoint),
        latlng = comp_map.layerPointToLatLng(layerPoint)            
        alert("Marker Location: "+latlng);
  }
  function editComp(e) {
      // disable the map click
  }
  function delComp(e) {
      // disable the map click
  }
}); 
```

然后在您的 HTML 中为您要选择的操作设置数据属性（您还可以`selected`在单​​击时设置一个类以显示当前操作：

```
<button data-action="add">Add</button>
<button data-action="edit">Edit</button>
<button data-action="delete">Delete</button> 
```

# c++ - 如何告诉 scons 使用 C++11 标准

> ID：13179316
> 
> 赞同：7
> 
> 时间：2012-11-01T14:35:36.997
> 
> 标签：c++, c++11, scons

我不知道如何告诉 scons 接受 c++11 标准：

**SConstruct 文件：**

```
env=Environment(CPPPATH='/usr/include/boost/',
                CPPDEFINES=[],
                LIBS=[],
                SCONS_CXX_STANDARD="c++11"
                )

env.Program('Hello', Glob('src/*.cpp')) 
```

**cpp文件：**

```
#include <iostream>
class A{};
int main()
{
  std::cout << "hello world!" << std::endl;
  auto test = new A; // testing auto C++11 keyword
  if( test == nullptr ){std::cout << "hey hey" << std::endl;} // testing nullptr keyword
  else{std::cout << " the pointer is not null" << std::endl;}
  return 0;
}; 
```

**调用 scons 时的错误消息：**

```
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
g++ -o src/hello_world.o -c -I/usr/include/boost src/hello_world.cpp
src/hello_world.cpp: In function 'int main()':
src/hello_world.cpp:13:8: error: 'test' does not name a type
src/hello_world.cpp:15:7: error: 'test' was not declared in this scope
src/hello_world.cpp:15:15: error: 'nullptr' was not declared in this scope
scons: *** [src/hello_world.o] Error 1
scons: building terminated because of errors. 
```

显然它不明白`auto`并且`nullptr`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T14:43:14.193

我不确定`SCONS_CXX_STANDARD`SCons 是否支持。

相反，如果您使用的是 GCC 4.7 或更高版本，请尝试`-std=c++11`按如下方式传递给编译器：

```
env=Environment(CPPPATH='/usr/include/boost/',
                CPPDEFINES=[],
                LIBS=[],
                CXXFLAGS="-std=c++0x"
                ) 
```

如[本问题](https://stackoverflow.com/q/10613126/1158895)所述，您可能需要`-gnu++11`

# android - 适用于 Android 的 TestFlight 替代品

> ID：13179318
> 
> 赞同：5
> 
> 时间：2012-11-01T14:35:50.330
> 
> 标签：android, ios, testflight, over-the-air

是否有人对适用于 Android 或 iOS 的 TestFlight 的替代方案有建议？自从 TestFlight 宣布放弃对 Android 的支持后，这一点变得更加重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-22T11:52:32.360

**[HockeyApp](http://hockeyapp.net/)**是一种著名的 TestFlight 替代方案。

~~没有第一手经验，但由于 TestFlight 正式~~[放弃 Android 支持](http://www.infoq.com/news/2014/02/apple-buys-testflight?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global)（到 2014 年 3 月 21 日） ，我将评估 HockeyApp 。

**更新**：我已经使用 HockeyApp 进行测试版分发，它可以很好地作为 TestFlight 的替代品。（虽然还没有尝试过 Android SDK 以获得更高级的功能。）

一些相关的博客资源：

*   [“为什么我搬到 HockeyApp”](http://digitalflapjack.com/blog/2012/jun/19/hockeyapp/)
*   [“我最近从 TestFlight 切换到 HockeyApp，再开心不过了”](http://collindonnell.com/2012/05/28/hockeyapp-is-awesome/)

**[TestFairy](http://testfairy.com/)**是另一个有趣的工具，它出现在关于 TestFlight 的 Android 停产[的Twitter 对话中。](https://twitter.com/kaivirkki/status/437126525415342080)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:41:41.560

您不需要像 Android 试飞之类的东西，因为在多个设备上安装 Android 应用程序没有什么特别要求。没有配置等概念。

您可以在基本上任何 Android 设备或模拟器上安装任何 Android 应用程序（打包为 APK），只需将其复制到设备上，然后在其上运行安装命令。

因此，您只需提供下载 APK 的位置（基本上从任何地方），而不是 TestFlight。您可以在 Dropbox 文件夹、网站（您创建的东西，或者您的 Jenkins\CI 服务器的输出页面）上、通过拇指驱动器，甚至通过电子邮件发送 APK 来提供它。

归根结底，因为 Android 没有与 iOS 相同的打包限制，所以分发测试版本要容易得多，所以 TestFlight（或等效的）并不是真正必要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T15:57:30.130

您可以 在所有平台上使用[**Appaloosa-Store**](http://www.appaloosa-store.com/)

尤其，

```
Android    
iOS     
Windows Phone 
```

**[在此处](http://www.appaloosa-store.com/)**查看详细信息****

 **![在此处输入图像描述](../Images/961bad29dd179eb4b36386cfad00d6e9.png)**

# .htaccess - 如何将 http://www.mydomain.com/test/ 重定向到 http://mydomain.com/test/

> ID：13179319
> 
> 赞同：1
> 
> 时间：2012-11-01T14:35:50.880
> 
> 标签：.htaccess

这段代码对我不起作用：

```
RewriteCond %{HTTP_HOST} ^www.mydomain.com [NC]
RewriteRule ^(.*) http://mydomain.com/$1 [L,R=301] 
```

我已经测试了很多东西，包括[Generic htaccess redirect www to non-www](https://stackoverflow.com/questions/234723/generic-htaccess-redirect-www-to-non-www)，但它并没有解决我的问题。

任何机构都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:21:00.747

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^my-domain\.com$ [NC]
RewriteRule ^(.*)$ http://my-domain.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:38:52.013

我用它解决了

```
RewriteCond %{HTTP_HOST} ^www.mydomain.com [NC]
RewriteRule .* http://mydomain.com%{REQUEST_URI} [R=301,L] 
```

# php - 数据收集这是如何完成的？

> ID：13179322
> 
> 赞同：0
> 
> 时间：2012-11-01T14:35:55.703
> 
> 标签：php, database, api

我很想了解该网站如何以及从何处获取数据： [http](http://elophant.com/developers/docs) ://elophant.com/developers/docs 我很难相信游戏开发人员只是将所有这些数据实时（或接近）交给elophant 的开发者。例如，他如何能够检索有关正在进行的游戏的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:39:17.137

根据页脚中的注释，“由 Riot Inc. 慷慨提供的图像和数据。”

我想这是在类似网站上所说的：http: [//www.leagueofstats.com/faq](http://www.leagueofstats.com/faq)

> 你从哪里得到你的数据？我们从 Riot 服务器获取数据。基本上，我们假装是英雄联盟客户端，我们使用“查找玩家”功能来下载您最近的游戏、排名统计等。

# php - 使用大量数据创建查询的最佳方法是什么？

> ID：13179326
> 
> 赞同：0
> 
> 时间：2012-11-01T14:36:13.297
> 
> 标签：php, mysql, sql

我有大约 360 行数据，我需要为 SQL 进行 360 查询，有没有什么快速的方法可以将所有数据放入一个查询中，而不必将它们全部分开，例如这里只有 3 行数据我有：

```
 1,81,32
   1,101,82
   1,60,65 
```

我必须将这些数据变成查询，所以这 3 个看起来像：

```
 INSERT INTO `Fixtures` (weeks, HomeID, AwayID) Values (1,81,32);
   INSERT INTO `Fixtures` (weeks, HomeID, AwayID) Values (1,101,82);
   INSERT INTO `Fixtures` (weeks, HomeID, AwayID) Values (2,60,65); 
```

但是我有 360 行这样的，所以很难将这些全部变成查询的 1 by 1，有没有更快的方法来做到这一点，就像一个查询将它们全部插入一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:38:03.643

您通常可以使用 INSERT...SELECT 语法。

此语法因数据库而异，但通常类似于：

```
INSERT INTO `Fixtures` (weeks, HomeID, AwayID) 
select 1,81,32
union all select 3,31,22 
```

另一种变化是：

```
INSERT INTO Fixtures
    (`weeks`, `HomeID`, `AwayID`)
VALUES
    (1, 81, 32),
    (3, 31, 22)
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:39:54.147

我假设 MySQL 是因为您已使用 PHP 对其进行了标记，但大多数数据库都允许[在一个查询中进行多次插入](http://dev.mysql.com/doc/refman/5.5/en/insert.html)，因此您的查询如下所示：

```
INSERT INTO `Fixtures` (weeks, HomeID, AwayID) Values (1,81,32), (1,101,82), (2,60,65); 
```

还是您的意思是通过代码而不是手动制作插入文本。在这种情况下，我们需要知道数据现在在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:40:16.183

如果它在一个文件中，使用`file()`，它将逐行分隔它们。

```
$file = 'test.txt';

$lines = file($file); 

foreach ($lines as $line)
{
  // Can build an output of the inserts to use as an .sql file, or actually call the db to insert
  $output .= 'INSERT INTO Fixtures (weeks, HomeID, AwayID) Values (' . trim($line) . ')'; 
} 
```

# c++ - 用win32 api c++打开jpeg

> ID：13179327
> 
> 赞同：0
> 
> 时间：2012-11-01T14:36:18.667
> 
> 标签：c++, api, winapi

我有一个用 ResEdit 创建的简单对话框

```
BOOL CALLBACK AppDlgProc(HWND hDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
  switch(uMsg)
  {

  case WM_INITDIALOG:
    SetClassLongPtr(hDlg, GCLP_HICON, (long)LoadIcon(0, IDI_APPLICATION));
    return 1;
  case WM_COMMAND:
    switch(wParam)
    {
    case IDOK:
      return 0;
    case IDCANCEL:
      EndDialog(hDlg, 0);
    }
     switch(wParam)
            {
                 case IDC_BUTTON1:
                    MessageBox(hDlg, "Hello, World!", "Bottone premuto", MB_OK);
                break;
            }

  }
  return 0;
} 
```

我想知道是否有办法按下按钮并显示 JPG 图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:44:42.623

您可以使用以下[`ShellExecute()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)功能：

```
ShellExecute(NULL,
             "open",
             "C:\\path\\to\\jpg\\my.jpg",
             NULL,
             NULL,
             SW_SHOWDEFAULT); 
```

# visual-studio-2010 - 如何将字符串保存到 Visual Basic 数组中？

> ID：13179340
> 
> 赞同：1
> 
> 时间：2012-11-01T14:36:57.607
> 
> 标签：visual-studio-2010, vbc

我想知道如何将字符串保存到数组中。这是一个初学者问题，但我真的需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T22:21:32.627

字符串数组以多种方式创建。在 VB.NET 语言中，您可以在**初始化语句**中创建包含所有数据**的数组**。例如：

 **```
Dim arrayName() As String = {"string1", "string2", "string3"} 
```

您可以**预先分配**数组，然后分别为其*内存位置***分配值**。例如：

 *```
Dim newArray(0 to 2) As String
newArray(0) = "string1"
newArray(1) = "string2"
newArray(2) = "string3" 
```***

# mysql - MySQL 日志文件中的警告

> ID：13179345
> 
> 赞同：0
> 
> 时间：2012-11-01T14:37:20.777
> 
> 标签：mysql, triggers, warnings

我在 MySQL 5.5.27 的错误日志中收到以下警告。有人可以告诉我如何解决这个问题吗？

> [警告] 由于 BINLOG_FORMAT = STATEMENT，使用语句格式写入二进制日志的不安全语句。语句是不安全的，因为它调用插入到 AUTO_INCREMENT 列中的触发器或存储函数。无法正确记录插入的值。语句：插入 Alt_Address ( `AddressType`, `EntityNo`, `SeqNo`, `Name`, `Address1`, `Address2`, `City`, `State`, `PostCode`, `Contact`, `PhoneNo`, `PhoneExtension`, `FaxNo`, `SPLC_Code`, `DateLastChange`, `ExportAddress1`, `ExportAddress2`, `ExportAddress3`, `ExportAddress4`, `ExportAddress5`, `ExportPhoneNo`, `ExportInspectionReqd`, `JV_Branch`, `JV_Yard`, `JV_Supplier`, `JV_MaterialPrefix`, `EDIBuilt`, `ExcludeAutoBuild`, `LastUpdatedBy`, `LastUpdatedProgramNo`)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:46:47.787

这*可能*没什么好担心的。[http://bugs.mysql.com/bug.php?id=64758](http://bugs.mysql.com/bug.php?id=64758)

触发器是否有效？

# object - 从主干集合 Fetch() 获取数据

> ID：13179347
> 
> 赞同：0
> 
> 时间：2012-11-01T14:37:23.210
> 
> 标签：object, collections, backbone.js

我对 Backbone 比较陌生，我试图在我的服务器端代码之间来回传递数据。我有一个集合设置：

```
var AppCollection = Backbone.Collection.extend({

    model: AppModel,

    url: 'data.php'

}); 
```

然后在我看来，我有我的初始化拉：

```
initialize: function(){
    items = this.collection.fetch();
    console.log(items);
} 
```

哪个输出`items`对象。我试图`console.log(items.responseText)`打印出返回的 JSON 的内容，但我得到了`undefined`.

这是我在控制台中看到的内容`console.log(items)`：

![在此处输入图像描述](../Images/33698f70fde095fe5cd7447c8a712c6d.png)

我的目标只是输出那个 responseText。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T14:53:33.587

正如[主干文档](http://backbonejs.org/#Collection-fetch)所说，`.fetch()`返回一个`jQxhr`对象。

有两种可能的实现方式，您可以像这样将成功和错误回调写入 fetch：

```
this.collection.fetch({
  success : function(collection, response) {
    // code here
  },

  error : function(collection, response) {
    // code here
  }
}); 
```

或者您可以将事件绑定到集合成功加载后触发的集合的重置方法。

```
this.collection.bind("reset", method_name); 
```

您可以在 上访问该集合`method_name`，因为它将在执行`fecth()`ajax 后执行。但我建议使用第一种方式，因为第二种方式有自己的其他用例。

# wordpress - Wordpress 联系表 7 自定义简码

> ID：13179355
> 
> 赞同：12
> 
> 时间：2012-11-01T14:37:46.793
> 
> 标签：wordpress, shortcode, contact-form-7

联系表格 7 有一些简码，例如 [_date] 来获取今天的日期。但我想显示一周后的日期。

因此，我需要为 Contact form 7 创建一个自定义简码，其中包含 [next_week] 并在收到的电子邮件中显示正确的日期。

在哪里以及如何为 Contact form 7 创建自定义简码？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T09:47:59.423

将以下内容添加到您的functions.php

```
wpcf7_add_shortcode('custom_date', 'wpcf7_custom_date_shortcode_handler', true);

function wpcf7_custom_date_shortcode_handler($tag) {
    if (!is_array($tag)) return '';

    $name = $tag['name'];
    if (empty($name)) return '';

    $next_week = date('Y-m-d', time() + (60*60*24*7)); 
    $html = '<input type="hidden" name="' . $name . '" value="' . $next_week . '" />';
    return $html;
} 
```

现在在 CF7 GUI 类型的“表单”字段中`[custom_date next_week]`

现在您可以`[next_week]`在消息正文中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-28T03:13:28.117

这对响应方来说有点晚了，但是当我想将自定义简码添加到我的表单和消息正文时，我一直看到这篇文章。我希望能够插入短代码而无需在 CF7 中特别注册它们，并且通常只在消息正文中（CF7 似乎无法做到这一点）。

这是我最终做到的方式：

```
// Allow custom shortcodes in CF7 HTML form
add_filter( 'wpcf7_form_elements', 'dacrosby_do_shortcodes_wpcf7_form' );
function dacrosby_do_shortcodes_wpcf7_form( $form ) {
    $form = do_shortcode( $form );
    return $form;
}

// Allow custom shortcodes in CF7 mailed message body
add_filter( 'wpcf7_mail_components', 'dacrosby_do_shortcodes_wpcf7_mail_body', 10, 2 );
function dacrosby_do_shortcodes_wpcf7_mail_body( $components, $number ) {
    $components['body'] = do_shortcode( $components['body'] );
    return $components;
};

// Add shortcode normally as per WordPress API
add_shortcode('my_code', 'my_code_callback');
function my_code_callback($atts){
    extract(shortcode_atts(array(
        'foo' => 'bar'
    ), $atts));

    // do things
    return $foo;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-21T03:12:42.823

我的解决方案很简单。做任何你想要的短代码并将其放在联系表格区域。只是不要忘记执行以下操作：仅将以下代码放在 functions.php 中，您的短代码将起作用：

add_filter('wpcf7_form_elements', 'do_shortcode');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-05T15:30:12.860

CF7 中有两种类型的标签：*表单标签*（联系表单本身）和[*邮件标签*](https://contactform7.com/special-mail-tags/)（电子邮件）——[阅读更多](https://contactform7.com/tag-syntax/)。

* * *

1.  自定义**表单标签**：

    要添加自定义表单标签，您可以在操作挂钩上使用`wpcf7_add_form_tag()`函数（[阅读更多](https://contactform7.com/2015/01/10/adding-a-custom-form-tag/)）。`wpcf7_init`

    *接受的答案中的`wpcf7_add_shortcode()`函数被认为已弃用并被此函数替换。*

2.  自定义**邮件标签**：

    我没有找到任何内置功能来添加自定义邮件标签，但我相信这里有多种可能的解决方法：

    1.  启用自定义简码（不要忘记事先创建简码处理程序）：

        *   对于邮件组件，根据[DACrosby 的回答](https://stackoverflow.com/questions/13179355/wordpress-contact-form-7-custom-shortcodes/#33382282)。
        *   对于整个邮件（所有组件），使用`wpcf7_special_mail_tags`过滤器：

    ```
    function my_special_mail_tag( $output, $name, $html ) {
        if ( 'myshortcode' === $name ) {
            $output = do_shortcode( "[$name]" );
        }
        return $output;
    }
    add_filter( 'wpcf7_special_mail_tags', 'my_special_mail_tag', 10, 3 ); 
    ```

    2.  将带有预填充数据的自定义隐藏表单标签添加到表单中，然后在邮件中使用它`[my-custom-form-tag-with-some-prepopulated-data]`：`wpcf7_add_form_tag()`如上所述，自定义表单标签应使用 注册。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-01T14:44:01.960

我以前没有这样做过，但我认为短代码是由 wordpress 本身管理的（即使对于像 CF7 这样的插件也是如此）。

创建简单短代码的示例是：

```
//[foobar]
function foobar_func( $atts ){
 return "foo and bar";
}
add_shortcode( 'foobar', 'foobar_func' ); 
```

放在functions.php中。

更多信息：[http ://codex.wordpress.org/Shortcode_API](http://codex.wordpress.org/Shortcode_API)

或者您可以使用这样的插件来完成工作：[http ://wordpress.org/extend/plugins/shortbus/](http://wordpress.org/extend/plugins/shortbus/)

# html - 如何确保自动完成功能适用于特定领域？

> ID：13179357
> 
> 赞同：1
> 
> 时间：2012-11-01T14:37:53.080
> 
> 标签：html, cross-browser

浏览器如何识别是否应使用自动完成提示特定字段（如用户名）？他们是否使用某种正则表达式来匹配字段`name`属性？我需要遵循一个标准来确保这一点吗？

我问这个是因为在某些网站上，浏览器无法建议任何历史数据。

简而言之，我问的是与此人试图实现的目标**完全相反的问题：**

[您如何在 Web 表单字段/输入标签上禁用浏览器自动完成功能？](https://stackoverflow.com/questions/2530/how-do-you-disable-browser-autocomplete-on-web-form-field-input-tag)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:47:14.810

使用 HTML5：

```
 <form action="demo_form.asp" method="get" autocomplete="on">
 First name:<input type="text" name="fname" /><br />
 E-mail: <input type="email" name="email" /><br />
 <input type="submit" />
 </form> 
```

来源：[http ://www.w3schools.com/html5/att_form_autocomplete.asp](http://www.w3schools.com/html5/att_form_autocomplete.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:46:53.323

根据我的经验，它基于匹配输入标签的名称或 id 属性。这就是为什么您通常会发现用户名、电子邮件和姓名字段往往会在许多不同的网站上自动完成。

我认为匹配必须是准确的，而不是字段上的正则表达式或部分匹配。

# jenkins - Jenkins 中的 Doxygen 插件：OUTPUT_DIRECTORY 错误

> ID：13179364
> 
> 赞同：7
> 
> 时间：2012-11-01T14:38:11.897
> 
> 标签：jenkins, doxygen

Doxyfile 所在的我的应用程序的根是： `/home/aaa/public_html`

我想在以下位置生成文档： `/home/bbb/public_html/ccc`

它运作良好，但不适用于 Jenkins：我得到了错误`hudson.AbortException: The output directory doesn't exist.`

我的 Jenkins 工作的工作空间是： `/var/lib/jenkins/jobs/Doxy1/workspace`

我很努力，但它不会工作。我能做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T10:00:36.620

我找到了解决方案。

我没有使用插件，而是在 Jenkins 中使用 Doxygen 生成命令创建了自由式作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T19:06:20.127

从 0.16 版开始，Doxygen 插件提供了生成文档的构建步骤。

见[https://wiki.jenkins-ci.org/display/JENKINS/Doxygen+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Doxygen+Plugin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T08:39:28.680

我发现错误`hudson.AbortException: The output directory doesn't exist`是指 Doxygen 配置文件中的 OUTPUT_DIRECTORY 变量。

对于 Doxygen 插件，您必须考虑三件事（至少从 0.15 开始）。

在 Jenkins 任务的 Doxygen 插件配置中：

*   **Doxyfile 路径**：此路径必须与 Jenkins 任务工作区相关。并指向包含 Doxygen 配置的 .doxy 文件。
*   **运行 doxygen**的文件夹：Jenkins 任务工作区中的文件夹。

在 Doxygen 配置文件中：

*   **OUTPUT_DIRECTORY 变量**：这个变量设置我们想要生成 Doxygen 输出的目录。它可以是相对的或绝对的。如果它是相对的，它将与运行 Doxygen 的文件夹相关。如果我们想将 Doxygen 输出保留在运行 Doxygen 的同一文件夹中，我们应该将此 OUTPUT_DIRECTORY 变量留空。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-02T03:13:36.007

我发现如果`publish doxygen`构建步骤`doxyfile path`字段包含额外的空格，我会收到此错误。确保您的 doxyfile 路径没有任何尾随空格或其他空白字符。我的 doxygen 插件版本是 0.18。

# c++ - 使用 Uncrustify 格式化构造函数成员初始化

> ID：13179365
> 
> 赞同：3
> 
> 时间：2012-11-01T14:38:16.437
> 
> 标签：c++, uncrustify

我正在使用 uncrustify 0.56，我想知道是否可以像这样格式化构造函数：

```
MyClass::MyClass(int arg1, int arg2, int arg3) : m_arg1(arg1), m_arg2(arg2), m_arg3(arg3) {}

// shall be formatted to

MyClass::MyClass(int arg1, int arg2, int arg3) : 
   m_arg1(arg1), 
   m_arg2(arg2), 
   m_arg3(arg3)
{
} 
```

我找不到任何选择。这是可能的还是有另一种代码美化器/工具来实现这种格式？

提前致谢 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T15:25:26.063

`Uncrustify 0.59`：

```
# Whether to indent the stuff after a leading class colon.
# The term "class colon" refers to both 'class Dog: public Animal'
#                                                 ^
# and 'Dog::Dog(): Animal(), _fur(BLACK)'.
#                ^
indent_class_colon = true

# Add or remove a newline around a class colon.
# Related to <pos_class_colon>, <nl_class_init_args>, and <pos_comma>.
nl_class_colon     = force

# Add or remove newline after each ',' in the constructor member initialization.
nl_class_init_args = force 
```

目前，`Uncrustify`是我所知道的最灵活和可配置的野兽。我过去曾尝试过不同的代码格式化程序，包括非免费的。但是，我发现它们要么缺少一些重要的选项，要么包含令人讨厌的错误，其中包括：Eclipse CDT、AStyle、Jindent 等的内置代码格式化程序。

# c# - 此 C# 速记片段的 VB 等效项

> ID：13179367
> 
> 赞同：3
> 
> 时间：2012-11-01T14:38:26.010
> 
> 标签：c#, vb.net

我想知道是否有一种方法可以在VB中编写以下代码。（现在等效的 VB.NET 代码看起来太冗长了）

```
List<DemoUsers> users = new List<DemoUsers>();
users.Add(new DemoUsers
{
    UserName = "name1",
    UserAddress = "Address1"
}); 
```

现在我正在用 VB.NET 编写它

```
Dim users As New List(Of DemoUsers)

Dim usr1 As New DemoUsers()
usr1.UserName = "name1"
usr1.UserAddress = "Address1"

users.Add(usr1) 
```

VB.NET 是否有等效的 C# 简写？也叫这个 C# 中的速记方法。

PS：无法谷歌这个速记符号可用性，因为我不知道它叫什么。有名字可以称呼它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T14:43:59.933

这是一个[对象初始化器](http://msdn.microsoft.com/en-us/library/bb384062.aspx)，它[也存在于 VB 中](http://msdn.microsoft.com/en-us/library/bb385125.aspx)：

```
New DemoUsers With { .UserName = "name1", .UserAddress = "Address1" } 
```

请注意，如果您还使用*集合初始化程序*，您的 C# 可能会更干净：

```
var users = new List<DemoUsers>
{
    new DemoUsers { UserName = "name1", UserAddress = "Address1" }
}; 
```

是的，[集合初始化器也存在于 VB 中](http://msdn.microsoft.com/en-us/library/dd293617.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T14:42:30.293

你可以看一下[`With`关键字](https://stackoverflow.com/questions/283749/the-vb-net-with-statement-embrace-or-avoid)：

```
Dim usr1 As New DemoUsers()

With usr1
    .UserName = "name1"
    .UserAddress = "Address1"
End With 
```

您也可以在[对象初始化器](http://msdn.microsoft.com/en-us/library/bb385125.aspx)中使用它：

```
Dim usr1 As New DemoUsers With { .UserName = "name1", 
                                 .UserAddress = "Address1" } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T14:41:24.400

```
Dim users As New List(Of DemoUsers)()
users.Add(New DemoUsers() With { _
    Key .UserName = "name1", _
    Key .UserAddress = "Address1" _
}) 
```

我用[http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T14:43:53.147

这是使用名为[Object Initializer](http://msdn.microsoft.com/en-us/library/bb384062.aspx)的功能。

[有关VB.Net 中的对象初始化程序，](https://stackoverflow.com/a/3254219/444610)请参阅此 SO 答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T14:41:32.173

它被称为[对象初始化器](http://msdn.microsoft.com/en-us/library/bb385125.aspx)：

```
Dim cust1 As New Customer With {.Name = "Toni Poe", 
                                .City = "Louisville"} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T14:43:20.397

它称为对象初始化器语法。

在 VB 中

```
Dim usr1 As New DemoUsers() With
{
    .UserName = "name1",
    .UserAddress = "Address1"
} 
```

# php - Wordpress get_post_meta（）在functions.php中不起作用

> ID：13179370
> 
> 赞同：0
> 
> 时间：2012-11-01T14:38:36.997
> 
> 标签：php, wordpress

我在 WP 中有一个名为“工作”的自定义帖子类型，每次自定义字段“社交媒体”的值为“是”时，都需要向管理员发送一封电子邮件。以下代码可以正常发送邮件，但不包括电子邮件中的自定义字段值：

```
function email_members($post_ID)  {
global $post;
if ( 'work' == get_post_type($post_ID) ){
    $social = get_post_meta($post_ID, 'socialmedia', true);
    mail('me@example.com', get_the_title($post_ID), $social);
}
return $post_ID;
}

add_action('publish_work', 'email_members'); 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:21:16.963

摆脱`global $post`（似乎没有使用），并添加一些`var_dump();`行以准确显示变量包含的内容，帮助您查明错误。

另外，您提到您想在`socialmedia`“是”时发送电子邮件，但是您的代码中没有检查吗？

```
function email_members($post_ID)  {

    var_dump($post_ID);
    var_dump(get_post_type($post_ID));

    if ( 'work' == get_post_type($post_ID) ){

        $social = get_post_meta($post_ID, 'socialmedia', true);
        var_dump($social);

        if ( $social === 'yes' ) {
            mail('me@example.com', get_the_title($post_ID), $social);
        }

    }

    die(); // Remove this after testing, it'll stop WP redirecting you so you can see what your variables contain.

    return $post_ID;
}

add_action('publish_work', 'email_members'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:29:09.543

在发送电子邮件之前检查元值。

```
if( 'yes' == ($social = get_post_meta($post_ID, 'socialmedia', true)) )
{
  mail('me@example.com', get_the_title($post_ID), $social);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:41:05.633

如果您已经通过函数传递了 $post_ID，那么全局的意义何在？怎么样 ...

```
if(get_post_type($post_ID) === "work"){ 
    // do stuff 
} 
```

确保它确实返回“工作”...

```
var_dump(get_post_type($post_ID); 
```

此外，除非我们知道您在哪里使用该功能。例如在循环中，在循环外？我们真的帮不了多少，也帮不了多少，我真的帮不了多少。

# facebook - 我如何知道 Facebook 中的用户何时将内容发布到他的时间线？

> ID：13179378
> 
> 赞同：0
> 
> 时间：2012-11-01T14:38:53.797
> 
> 标签：facebook, facebook-graph-api

我如何知道 Facebook 用户何时通过我的 Facebook 应用发布内容？

我不想使用普通的轮询方法，如果我的应用程序增长到 2000 个用户，它会非常耗费服务器。

我的应用程序需要获取用户的帖子并在其中搜索特殊标签，例如#Send_To_App，以便获取这些帖子并将其复制到其他地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:48:11.933

可以肯定的是，如果他们通过您的应用发布内容，那么您现在应该在他们发布内容时！如果您为此使用 javascript，那么您可以使用 event.subscribe

```
 https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/ 
```

如果您使用 php 或类似的东西来点击图形 api，那么它很可能会为您返回一个已创建对象的 ID，您可以存储该 ID，然后使用 FQL 查询来检索这些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:46:48.907

只是我发现我应该使用订阅实时更新（它在某种程度上是应用程序设置中的隐藏选项）

# android - Android：以编程方式创建的联系人未与 Gmail 帐户同步

> ID：13179380
> 
> 赞同：3
> 
> 时间：2012-11-01T14:39:02.013
> 
> 标签：android, contacts

我可以使用以下方法在我的应用程序中创建一个新联系人：

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
int rawContactInsertIndex = ops.size();
ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)
        .withValue(RawContacts.ACCOUNT_TYPE, null)
        .withValue(RawContacts.ACCOUNT_NAME, null).build());
ops.add(ContentProviderOperation
        .newInsert(ContactsContract.Data.CONTENT_URI)
        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID,
                rawContactInsertIndex)
        .withValue(Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE)
        .withValue(Phone.NUMBER, "9X-XXXXXXXXX").build());
ops.add(ContentProviderOperation
        .newInsert(Data.CONTENT_URI)
        .withValueBackReference(Data.RAW_CONTACT_ID,
                rawContactInsertIndex)
        .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE)
        .withValue(StructuredName.DISPLAY_NAME, "Mike Sullivan")
        .build());
try {
    ContentProviderResult[] res = getContentResolver().applyBatch(
            ContactsContract.AUTHORITY, ops);
} catch (RemoteException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (OperationApplicationException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

它工作正常，我可以看到已创建联系人，但是当我将联系人与我的 Gmail 帐户同步时，我在 Gmail 联系人中看不到该联系人。

注意：如果我使用设备的本机联系人应用程序创建联系人并与 Gmail 同步，我可以在 Gmail 中看到该联系人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:15:44.293

一些我是怎么想出来的......

你可以使用

```
ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)
        .withValue(RawContacts.ACCOUNT_TYPE, "com.google")
        .withValue(RawContacts.ACCOUNT_NAME, "xxxxx@gmail.com")
        .build()); 
```

其中，`com.google`是帐户类型，`xxxxx@gmail.com`是您要与之同步的帐户 ID。

谢谢

# php - php的方面包括（解析）

> ID：13179383
> 
> 赞同：0
> 
> 时间：2012-11-01T14:39:12.707
> 
> 标签：php, seo, html-parsing

使用 php include 包含对网页语义至关重要的方面是否安全，例如搜索引擎。

例如，您可以`<h1></h1>`将页面的标题全部转移到包含中吗？只是作为一个例子，谷歌蜘蛛真的能够看到这些标题吗？是否存在一种...被动解析...如果您愿意，它不会看到依赖于脚本执行的html？

或者这种排除是客户端脚本（如javascript）独有的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:46:21.127

Google 永远不会看到原始 PHP 代码，因为那意味着您的服务器配置错误。您用于构建网页的服务器端语言/进程与最终用户无关，他们应该看到的只是 html。

因为蜘蛛看到的只是那个 html，所以不管你是从一个普通的旧 .html 文件、一个 .php 文件、一个 .whatever_extension_you_want 文件等提供它...只要它看起来像一个网络页面到达客户端时。

例如，您可以走一个可笑的极端，让网页的每一个**字符都只包含一个字符，例如**

小于.txt：

```
< 
```

h.txt：

```
h 
```

.txt：

```
t 
```

m.txt：

```
m 
```

l.txt：

```
l 
```

大于.txt

```
> 
```

索引.php：

```
<?php
include('less_than.txt');
include('h.txt');
include('t.txt');
include('m.txt');
include('l.txt');
include('greater_than.txt'); 
```

丑陋得可怕，效率低得可笑，但这是用户将在浏览器的“查看源代码”中看到的内容：

```
<html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:48:22.930

这与您的要求相似，请尝试代码...

索引.php

```
<html>
<head>
</head>
<body>
  <?php include("header.php"); ?>
  <p><?php echo $superhero;?></p>
</body>
</html> 
```

头文件.php

```
<h1>This is a page</h1>
<?php
    // create a variable that we want to show in the main page
    $superhero = "batman";
?> 
```

以上应该输出类似

```
<html>
<head>
</head>
<body>
  <h1>This is a page</h1>
  <p>batman</p>
</body>
</html> 
```

# facebook - Facebook App Insights 添加应用与用户接受

> ID：13179387
> 
> 赞同：3
> 
> 时间：2012-11-01T14:39:27.897
> 
> 标签：facebook, facebook-insights

在洞察力-> 用户选项卡上。名为“用户趋势”的图表显示“添加的应用程序”。

我相信这意味着他们“看到了安装对话”，或者“重新添加了他们之前可能已卸载的应用程序”。

如果您查看“用户”下的“增长”选项卡。对我来说，很明显是新用户接受了身份验证对话（这是创建用户的原因）。

为什么这些数字会不同？（通常Growth->Accepted Auth Dialogue 较小#）。

另外一般来说，某处是否有洞察力指南？我找遍了，一个也找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:45:22.020

以下是 Insights 上来自 Facebook 的一些文档： [https](https://developers.facebook.com/docs/insights/) ://developers.facebook.com/docs/insights/ https://developers.facebook.com/blog/post/554/

# css - 自动扩大导航按钮之间的间隙 - CSS

> ID：13179389
> 
> 赞同：1
> 
> 时间：2012-11-01T14:39:30.490
> 
> 标签：css, navigation, expandable, gaps-in-visuals

我正在使用 CSS 进行顶部导航。一些按钮浮动到左侧，而一些按钮浮动到右侧。中间有空的间隙按钮。如何使该间隙自动扩展，以便整个顶部导航占据页面的 100%？

这是示例图像的链接：

[![](../Images/fe707d878b24d0892a9a809612e97ce5.png)](https://i.stack.imgur.com/nKdSw.png)

HTML：

```
<div class="row clearfix">
    <div class="top_nav">
        <ul>
            <li>
            <div class="ui-nav-button first">
                <a class="button first" href="#"><i class="icon-home"></i></a>
            </div>
            </li>
            <li>
            <div class="ui-nav-button">
                <a class="button" href="#">About</a>
            </div>
            </li>
            <li>
            <div class="ui-nav-button">
                <a class="button" href="#">Contact</a>
            </div>
            </li>
            <li>
            <div class="ui-nav-button">
                <a class="button empty">.</a>
            </div>
            </li>
            <li>
            <div class="ui-nav-button">
                <a class="button dropdown" href="#">Hi, Michael<i class="icon-sort-down"></i></a>
            </div>
            </li>
            <li>
            <div class="ui-nav-button last">
                <a class="button logout last" href="#"><i class="icon-off"></i></a>
            </div>
            </li>
        </ul>
    </div>
</div> 
```

CSS：

```
/* Clear fix */
.clearfix:before,
.clearfix:after {
    content: " ";
    display: table; 
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
}

.top_nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.top_nav ul li {
    display: inline;

}

div[class*="ui"] {
    vertical-align: top;
    display: -moz-inline-stack;
    float: left;
    position: relative;
    height: 44px;

    margin-bottom: 3px;
    background-color: #444444;

    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;

    zoom: 1;
    *display: inline;
}

.top_nav a.button, .top_nav div[class*="ui"] {
    -webkit-border-radius: 0px;
    -moz-border-radius: 0px;
    border-radius: 0px;
}

.button {
    float: left;
    position: relative;
    bottom: 3px;
    height: 28px;
    line-height: 32px;
    padding: 8px 30px;
    background-color: #f7f7f7;
    text-decoration: none;
    letter-spacing: 0.1em;
    color: #777777;
    font-weight: bold;
    border-left: 1px solid #cecece;
    font-family: sans-serif;

    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}

.input:focus {
    outline: none;
    border-color: #9d9d9d;
}

.button i {
    position: relative;
    line-height: 23px;
    top: 1px;
}

.dropdown_nav  {
    display: none;
}

/* Set your empty space with */
.button.empty {
    width: auto;
    text-indent: -9999px;
}

.button.dropdown i {
    margin-left: 15px;
    margin-right: -15px;
}

.button.first, div[class*="ui"].first  {
    border: 0px;

    -webkit-border-top-left-radius: 3px !important;
    -webkit-border-bottom-left-radius: 3px !important;
    -moz-border-radius-topleft: 3px !important;
    -moz-border-radius-bottomleft: 3px !important;
    border-top-left-radius: 3px !important;
    border-bottom-left-radius: 3px !important;
}

.button.last, div[class*="ui"].last  {
    -webkit-border-top-right-radius: 3px !important;
    -webkit-border-bottom-right-radius: 3px !important;
    -moz-border-radius-topright: 3px !important;
    -moz-border-radius-bottomright: 3px !important;
    border-top-right-radius: 3px !important;
    border-bottom-right-radius: 3px !important;
}

.button.first, .button.last {
    padding: 8px 15px;
}

.button[href]:hover {
    bottom: 4px;
    -webkit-transition-property: top, bottom;
    -moz-transition-property: top, bottom;
    -o-transition-property: top, bottom;
    -ms-transition-property: top, bottom;
    transition-property: top, bottom;
    -webkit-transition-duration: 0.05s;
    -moz-transition-duration: 0.05s;
    -o-transition-duration: 0.05s;
    -ms-transition-duration: 0.05s;
    transition-duration: 0.05s;
}

.button[href]:active {
    bottom: 0px;
}

.button i {
    font-size: 19px;
} 
```

CSS/HTML 链接：http: [//jsfiddle.net/xRCqx/](https://jsfiddle.net/xRCqx/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:27:19.820

这是干净的代码。

HTML：

```
<div class="row clearfix">
    <div class="top_nav">
        <ul>

            <li>
            <div class="ui-nav-button">
                <a class="button" href="#">About</a>
            </div>
            </li>
            <li>
            <div class="ui-nav-button">
                <a class="button" href="#">Contact</a>
            </div>
            </li>

            <li>
            <div class="ui-nav-button">
                <a class="button dropdown" href="#">Hi, Michael<i class="icon-sort-down"></i></a>
            </div>
            </li>

        </ul>
    </div>
</div> 
```

CSS：

```
.clearfix:before,
.clearfix:after {
    content: " ";
    display: table;
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
}

.top_nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.top_nav ul li {
    display: inline;

}

div[class*="ui"] {
    vertical-align: top;
    display: -moz-inline-stack;
    float: left;
    position: relative;
    height: 44px;

    margin-bottom: 3px;
    background-color: #444444;

    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;

    zoom: 1;
    *display: inline;
}

.top_nav a.button, .top_nav div[class*="ui"] {
    -webkit-border-radius: 0px;
    -moz-border-radius: 0px;
    border-radius: 0px;
}

.button {
    float: left;
    position: relative;
    bottom: 3px;
    height: 28px;
    line-height: 32px;
    padding: 8px 30px;
    background-color: #f7f7f7;
    text-decoration: none;
    letter-spacing: 0.1em;
    color: #777777;
    font-weight: bold;
    border-left: 1px solid #cecece;
    font-family: sans-serif;

    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}

.input:focus {
    outline: none;
    border-color: #9d9d9d;
}

.button i {
    position: relative;
    line-height: 23px;
    top: 1px;
}

.dropdown_nav  {
    display: none;
}

/* Set your empty space with */
.button.empty {
    width: auto;
    text-indent: -9999px;
}

.button.dropdown i {
    margin-left: 15px;
    margin-right: -15px;
}

.button.first, div[class*="ui"].first  {
    border: 0px;

    -webkit-border-top-left-radius: 3px !important;
    -webkit-border-bottom-left-radius: 3px !important;
    -moz-border-radius-topleft: 3px !important;
    -moz-border-radius-bottomleft: 3px !important;
    border-top-left-radius: 3px !important;
    border-bottom-left-radius: 3px !important;
}

.button.last, div[class*="ui"].last  {
    -webkit-border-top-right-radius: 3px !important;
    -webkit-border-bottom-right-radius: 3px !important;
    -moz-border-radius-topright: 3px !important;
    -moz-border-radius-bottomright: 3px !important;
    border-top-right-radius: 3px !important;
    border-bottom-right-radius: 3px !important;
}

.button.first, .button.last {
    padding: 8px 15px;
}

.button[href]:hover {
    bottom: 4px;
    -webkit-transition-property: top, bottom;
    -moz-transition-property: top, bottom;
    -o-transition-property: top, bottom;
    -ms-transition-property: top, bottom;
    transition-property: top, bottom;
    -webkit-transition-duration: 0.05s;
    -moz-transition-duration: 0.05s;
    -o-transition-duration: 0.05s;
    -ms-transition-duration: 0.05s;
    transition-duration: 0.05s;
}

.button[href]:active {
    bottom: 0px;
}

.button i {
    font-size: 19px;
} 
```

# ios - 在 iOS 中使用 Facebook 注册

> ID：13179391
> 
> 赞同：0
> 
> 时间：2012-11-01T14:39:32.457
> 
> 标签：ios, facebook-ios-sdk

根据[facebook 文档](https://developers.facebook.com/features/ios6-sdk-integration/)，有一种方法可以`Sign In`在您的 iOS 应用程序中使用 Facebook，但是，有什么方法可以`Sign Up`使用他们的 API 吗？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:07:16.577

一种解决方法可能是使用适用于 iOS 框架的 Windows Azure：http: [//bit.ly/PAwAGx](http://bit.ly/PAwAGx)

但是我还没有使用它，只是阅读它。

# search - 在 SHOPIFY 中添加“每页项目”下拉框

> ID：13179392
> 
> 赞同：4
> 
> 时间：2012-11-01T14:39:32.403
> 
> 标签：search, drop-down-menu, shopify, liquid

我正在shopify上建立一个网上商店。我想在显示我的产品的页面上添加一个下拉框，我可以在其中选择每页显示的项目数（即 25、50、100）。

关于从哪里开始以及shopify中是否有任何短代码可以帮助我做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-13T17:29:59.660

这是收藏页面的解决方案；试试下面的代码：

```
<div class="sort-per-page">
 <label for="sel1">Show per page:</label>
 <select id="sel1" class="num">
 <option value="/collections/{{ collection.handle }}?view=9" {% if limit == 9 %}selected="selected"{% endif %}>9</option>
 <option value="/collections/{{ collection.handle }}?view=12" {% if limit == 12 %}selected="selected"{% endif %}>12</option>
 <option value="/collections/{{ collection.handle }}?view=24" {% if limit == 24 %}selected="selected"{% endif %}>24</option>
 <option value="/collections/{{ collection.handle }}?view=36" {% if limit == 36 %}selected="selected"{% endif %}>36</option>
 </select>
</div>

<script>
$(document).ready(function(){
    jQuery('.sort-per-page select.num').on('change', function(){
      window.location.replace(jQuery(this).val());
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T15:26:08.993

有一件事情是肯定的。您将处理集合。渲染集合时，您可以选择要显示的产品数量。进一步 Shopify 具有您设置和控制的分页。

因此，您可以通过封装内置的 Liquid Collection 渲染变量来渲染您的选择机制。

或者，您可以将集合中的所有产品渲染到某个客户端数据结构中（这可能需要一些时间，具体取决于产品的数量），然后使用您自己的算法和想法渲染任意数量的产品。

# php - 在 Codeigniter 中创建大型动态查询的最佳方法？

> ID：13179393
> 
> 赞同：0
> 
> 时间：2012-11-01T14:39:32.533
> 
> 标签：php, mysql, codeigniter

该方案是一个报告应用程序。迄今为止，我使用过的 MVC 应用程序通常具有响应一个特定问题（即`get_username_from_id($id)`）的模型方法。我想要做的是有一个查询可以根据选中的复选框以多种不同的方式响应。

所以 - 例如，我的查询中可能只有一件事，或者它可能有 100 件事。我这样做的方式，它很快就变得一团糟。例如，我最终会做这样的事情：

```
if(in_array("id", $grain)){
    $sql .= "table.id id, ";
} 
```

这种事情有最佳实践吗？或者甚至是一种处理组的方法，所以没有更多额外的代码？我知道这是一种开放式的，我什至可能没有正确地表达我的问题。非常感谢那些可以插话并帮助我提出正确问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:57:43.010

我使用这样的东西：

```
function apply_filters ($filters)
{
        if(isset($filters['user_id']) AND !empty($filters['user_id']))
        {
                $this->db->where('user_id', $filters['user_id']);
        }
}
function get ($filters)
{
        $this->apply_filters($filters);
        return $this->db->get('favourites')->result();
}
function update ($filters, $data)
{
        $this->apply_filters($filters);
        $this->db->update('favourites', $data);
} 
```

您应该能够根据需要扩展 apply_filters 函数。这个问题省略了很多关于你想要做什么的细节以及真实数据和代码的样本，所以这是我迄今为止可以建议的。

# image - SVG如何绘制到精确的像素大小

> ID：13179394
> 
> 赞同：2
> 
> 时间：2012-11-01T14:39:41.160
> 
> 标签：image, svg

SVG`<image>`元素需要具有宽度和高度属性。图像被缩小/拉伸以适应这些尺寸。

但是，并不总是可以提前知道图像的尺寸。例如，用户可能会上传 PNG 文件。

我想制作 SVG 将图像绘制到它的自然像素尺寸 - 无需收缩/拉伸，也无需提前查询图像的尺寸。我不在乎图像是否会覆盖 SVG 的其他部分。

这可能吗？

# python - Django 事务和并发

> ID：13179401
> 
> 赞同：3
> 
> 时间：2012-11-01T14:39:58.320
> 
> 标签：python, database, django, concurrency

我有一个视图需要对涉及需要锁定的共享资源的数据库执行更新（实现很复杂，但本质上只是一个共享计数器）。

为了保护自己免受竞争条件的影响，我使用的代码大致如下：

```
@transaction.commit_manually
def do_it(request):
    affected_models = Something.objects.select_for_update(blah = 1)

    for model in affected_models:
        model.modify()
        model.save()

    transaction.commit() 
```

这是`commit_manually`,`select_for_update()`的用法`save()`吗？我怎样才能写一个测试来证实这一点？例如，我找不到 Django 在事务之间触发的信号；我不能只是运行它并希望出现并发问题并得到处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:57:17.487

为什么不在那里使用`commit_on_success`？

我认为查询本身应该如下所示：

```
Something.objects.select_for_update().filter(...) 
```

我不认为 django 对`select_for_update`你可以断言的内容有什么特别的。我脑海中唯一的断言是`assertTrue(queryset.query.select_for_update)`。它什么都不测试，只有在有人意外（？）删除呼叫时才可能有用。

即使您为此运行条件问题提出了一些单元测试，我认为将其放入项目中也不明智。

而是专注于测试您的代码，而不是数据库行为。

# windows-ce - Windows Embedded Compact 7 是否支持 EGL？

> ID：13179402
> 
> 赞同：-1
> 
> 时间：2012-11-01T14:40:01.630
> 
> 标签：windows-ce, egl

Windows Embedded Compact 7.0 是否支持企业[生成语言 (EGL) ？](http://en.wikipedia.org/wiki/EGL_%28programming_language%29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:51:19.050

看起来答案是肯定的。

详细信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/hh300132.aspx](http://msdn.microsoft.com/en-us/library/hh300132.aspx)

# alfresco - Alfresco - 使用 javascript 提交动态表单到 upload.post

> ID：13179406
> 
> 赞同：0
> 
> 时间：2012-11-01T14:40:17.090
> 
> 标签：alfresco, alfresco-share

我正在尝试为 Alfresco 开发的 dashlet 遇到问题。这是一个使用 HTML 5 的拖放和文件 API 的简单拖放文件上传 dashlet。对于`drop`事件监听器，我调用了以下函数，这似乎是所有问题的原因：

```
function handleFileSelect(evt) {
  var files = evt.target.files || evt.dataTransfer.files,
      tmpForm, tmpDest, tmpMeta, tmpType, tmpName, tmpData;

  dropZone.className = "can-drop";
  evt.stopPropagation();
  evt.preventDefault();

  for (var i=0,f;f=files[i];i++) {

    tmpForm = document.createElement('form');
    tmpDest = document.createElement('input');
    tmpDest.setAttribute('type', 'text');
    tmpDest.setAttribute('name', 'destination');
    tmpDest.setAttribute('value', destination);
    tmpForm.appendChild(tmpDest);
    tmpMeta = document.createElement('input');
    tmpMeta.setAttribute('type', 'text');
    tmpMeta.setAttribute('name', 'mandatoryMetadata');
    tmpMeta.setAttribute('value', window.metadataButton.value);
    tmpForm.appendChild(tmpMeta);
    tmpType = document.createElement('input');
    tmpType.setAttribute('type', 'text');
    tmpType.setAttribute('name', 'contenttype');
    tmpType.setAttribute('value', "my:document");
    tmpForm.appendChild(tmpType);
    tmpName = document.createElement('input');
    tmpName.setAttribute('type', 'text');
    tmpName.setAttribute('name', 'filename');
    tmpName.setAttribute('value', f.name);
    tmpForm.appendChild(tmpName);
    tmpData = document.createElement('input');
    tmpData.setAttribute('type', 'file');
    tmpData.setAttribute('name', 'filedata');
    tmpData.setAttribute('value', f);
    tmpForm.appendChild(tmpData);

    Alfresco.util.Ajax.request({
      url: Alfresco.constants.PROXY_URI_RELATIVE + "api/upload",
      method: 'POST',
      dataForm: tmpForm,
      successCallback: {
        fn: function(response) {
          console.log("SUCCESS!!");
          console.dir(response);
        },
        scope: this
      },
      failureCallback: {
        fn: function(response) {
          console.log("FAILED!!");
          console.dir(response);
        },
        scope: this
      }
    });
  }
} 
```

服务器以 500 响应，如果我打开 Web 脚本的调试级别日志记录，upload.post 将返回：

```
DEBUG [repo.jscript.ScriptLogger] ReferenceError: "formdata" is not defined. 
```

至少对我来说，这表明上面的表格没有正确提交（如果有的话）。在使用 Chrome 开发工具深入研究时，我注意到请求有效负载看起来与 REST 客户端之类的东西截然不同。上面的代码导致`Content-Type: application/x-www-form-urlencoded`使用 REST 客户端或 Alfresco Share 的标准上传器使用`Content-Type: multipart/form-data`. 如果我需要使用 提交表单`multipart/form-data`，写出请求正文（带有边界、内容处置等）以包含正在上传的文件的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:31:17.767

我放弃了通过 javascript 创建表单 HTML 元素的想法，并假设如果浏览器支持 File API 和 Drag and Drop API，它们很可能也支持 XMLHttpRequest2 API。根据[HTML5 File Upload to Java Servlet](https://stackoverflow.com/questions/7114087/html5-file-upload-to-java-servlet)，上面的代码现在为：

```
function handleFileSelect(evt) {
  var files = evt.target.files || evt.dataTransfer.files,
      xhr = new XMLHttpRequest();

  dropZone.className = "can-drop";
  evt.stopPropagation();
  evt.preventDefault();

  for (var i=0,f;f=files[i];i++) {
    formData = new FormData();
    formData.append('destination', destination);
    formData.append('mandatoryMetadata', window.metadataButton.value);
    formData.append('contenttype', "my:document");
    formData.append('filename', f.name);
    formData.append('filedata', f);
    formData.append('overwrite', false);

    xhr.open("POST", Alfresco.constants.PROXY_URI_RELATIVE + "api/upload");
    xhr.send(formData);
  }
} 
```

稍后添加必要的事件侦听器。看起来，库存和标准的 Alfresco AJAX 方法大量修改了正在发出的底层请求，这使得人们很难简单地发送一个`FormData()`对象。

# c++ - 检查一个特定进程是否正在使用 C++ 的 Windows 上运行

> ID：13179410
> 
> 赞同：4
> 
> 时间：2012-11-01T14:40:56.300
> 
> 标签：c++, windows

psapi 或 windows.h 中是否有任何函数来获取所需的进程'仅通过进程名称（例如：“chrome.exe”）运行而没有获取所有进程。

编辑：

如果有人需要通过运行所有进程列表来获取所需的进程信息，我可以在此处粘贴我的代码。它适用于 xp 机器并使用 vs 2008 编译。

我也为我的问题找到了解决方案！但是根据[msdn](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)，该函数已经通过进程运行并检查没有扩展名的名称。很快它就会搜索“chrome”并返回 chrome.*

这个函数有一个很好的优势，它以列表的形式返回进程，它可能是一个 exe 可能与可能的实例一起运行。缺点是需要 CLR，它的运行速度比 psapi 函数慢，并且它有额外的转换要求，例如 String^ 到 wchar 或 String（我没有测试过）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-09T06:36:32.523

上面的答案适用于win 8。这里没有 wstring 的东西并且剥离了路径

```
#include <tlhelp32.h>
DWORD FindProcessId(char* processName)
{
    // strip path

    char* p = strrchr(processName, '\\');
    if(p)
        processName = p+1;

    PROCESSENTRY32 processInfo;
    processInfo.dwSize = sizeof(processInfo);

    HANDLE processesSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, NULL);
    if ( processesSnapshot == INVALID_HANDLE_VALUE )
        return 0;

    Process32First(processesSnapshot, &processInfo);
    if ( !strcmp(processName, processInfo.szExeFile) )
    {
        CloseHandle(processesSnapshot);
        return processInfo.th32ProcessID;
    }

    while ( Process32Next(processesSnapshot, &processInfo) )
    {
        if ( !strcmp(processName, processInfo.szExeFile) )
        {
          CloseHandle(processesSnapshot);
          return processInfo.th32ProcessID;
        }
    }

    CloseHandle(processesSnapshot);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T05:40:01.437

```
#include "stdafx.h"
#include <windows.h>
#include <tlhelp32.h>
#include <iostream>

using namespace std;

DWORD FindProcessId(const std::wstring& processName);

int main(int argc, char* argv[])
{

  bool bAnyBrowserIsOpen = false;

  if ( FindProcessId(L"chrome.exe") || FindProcessId(L"firefox.exe") || FindProcessId(L"iexplore.exe"))
  {
     bAnyBrowserIsOpen = true;
  }

  return 0;
}

DWORD FindProcessId(const std::wstring& processName)
{
  PROCESSENTRY32 processInfo;
  processInfo.dwSize = sizeof(processInfo);

  HANDLE processesSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, NULL);
  if ( processesSnapshot == INVALID_HANDLE_VALUE )
    return 0;

  Process32First(processesSnapshot, &processInfo);
  if ( !processName.compare(processInfo.szExeFile) )
  {
    CloseHandle(processesSnapshot);
    return processInfo.th32ProcessID;
  }

  while ( Process32Next(processesSnapshot, &processInfo) )
  {
    if ( !processName.compare(processInfo.szExeFile) )
    {
      CloseHandle(processesSnapshot);
      return processInfo.th32ProcessID;
    }
  }

  CloseHandle(processesSnapshot);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-24T13:09:53.250

您可以使用上面给出的 CreateToolhelp32Snapshot。如果您需要定期轮询进程，请在发现进程运行后保存进程 ID，然后使用 OpenProcess 进行检查。这要快很多倍，但请注意操作系统会回收 PID，因此您必须处理它。

如果您对流程的内部有所了解（甚至可以控制它），还有其他选项，例如检查：

*   命名内存对象的存在（使用 CreateFileMapping）
*   命名互斥体的存在（使用 OpenMutex）

此问题的答案中提供了更多详细信息：[Fast way to check for a specific process running](https://stackoverflow.com/questions/29142727/fast-way-to-check-for-a-specific-process-running)

# javascript - 不使用 CSS3 围绕左下边缘枢轴旋转图像

> ID：13179411
> 
> 赞同：2
> 
> 时间：2012-11-01T14:41:01.577
> 
> 标签：javascript, jquery, rotation

我想旋转一张图片，就像[鼓膜的色板](http://tympanus.net/Tutorials/SwatchBook/index3.html)一样工作。
但我宁愿不使用，et CSS 3，因为前面的链接需要。
我宁愿在 js 上进行所有旋转，每个实例都使用[JQueryRotate](http://code.google.com/p/jqueryrotate/)，除了以图像为中心的旋转点之外，这很棒。

而不是指出一个库，我想学习一个很好的图像旋转方法，特别是如何改变旋转的点，在那个方法中，所以我可以实现我的色板效果想。

但如果你知道有一个图书馆可以做到这一点，我也会非常喜欢它。

谢谢

**编辑：**

在写这个问题时，我意识到了一些事情。我可以放大该图像的持有人。虽然不是很明亮也不是很优雅，或者很好，但它是一个开始。我要检查[x3ro](https://stackoverflow.com/users/124257/x3ro)提出的建议：[图像旋转算法](https://stackoverflow.com/questions/484573/image-rotation-algorithm)

html片段：

```
<script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>
<div id="dvImg" style="position:relative;border: 1px solid black;">
    <img src="https://www.google.com/images/srpr/logo3w.png" id="image" style="position:absolute;top:0;left:12px;margin:auto;border: 1px solid black;">
<div> 
```

js片段：

```
$("#dvImg").width($("#image").width()*2);
$("#dvImg").height($("#image").height()*2);
$("#image").css({ left: $("#image").width() + "px", top: $("#image").height()});

$("#image").mouseover(function() {
    $("#dvImg").rotate({animateTo:90});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:48:27.327

如果你想自己做旋转，看看这个问题：[图像旋转算法](https://stackoverflow.com/questions/484573/image-rotation-algorithm)。当然，它不是 JavaScript 特定的解释，但它应该或多或少容易地转换为基于画布的解决方案。我还没有看过 jQueryRotate 实现，但它可能也值得研究。

也就是说，可能没有关于“如何使用左下角的枢轴点旋转图像”的 JavaScript 特定教程：D

* * *

正如@Jasper 所指出的那样，很高兴知道虽然`canvas`IE9 之前的IE 版本不支持它本身，但即使在早期版本中，也有一些方法和方法可以获取（大部分）画布API，正如[ExplorerCanvas](http://code.google.com/p/explorercanvas/)所展示的那样.

# java - Java SE、OOP、对象、类

> ID：13179419
> 
> 赞同：-2
> 
> 时间：2012-11-01T14:41:32.800
> 
> 标签：java

你好我叠了哪一种方式可以很好的解决下面的问题？我想检查或检索最长的评论我不知道你有一些吗？

```
public class Day {
    private Date date;
    private int temperature;
    private String comments ;
    Weather weather;
   Day( Date date, int temperature, String comments){
       this.date=date; 
            this.temperature=temperature;
       this.comments=comments;
   }
 public Date getDate(){
     return  date;
 }
    public void setDate(Date date){
               this.date=date;
    }
    public int getTemperature(){
        return  temperature;

    }
    public  void setTemperature(int temperature){
        this.temperature=temperature;

    }
    public String getComments(){
        return  comments;

    }
    public void setComments(String comments){
        this.comments=comments;
    }
    public Boolean longestComment(String longcom){
        StringTokenizer st=new StringTokenizer(comments);
       String s;
           st.countTokens();
        if(st.hasMoreTokens()){
            return true;
        }
        return  false;
    }

        public void testComent(String longcom){
            if  (longestComment(longcom)){
             System.out.println("The longest comment is:" +longcom);
            }
        }

       public  static  void main (String args []){
           Calendar c=new GregorianCalendar();

             Day day=new Day(c.getTime(),20,"Today is normal temperature");
                day.testComent("Tomorrow is going to be the highest degree for ever in this summer");
           day.testComent("Yesterday was the coldest temperature");
           day.testComent("Next week is going to be the coldest temperature ever");
       }
} 
```

我想检查哪个评论是最长的请一些建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:10:42.123

```
import java.util.ArrayList;
import java.util.GregorianCalendar;
import java.util.Calendar;
import java.util.Date;

public class Day {
   private Date date;
   private int temperature;
   private ArrayList<String> comments = new ArrayList<String>() ;
   Weather weather;

   Day( Date date, int temperature, String comment){
      this.date=date; 
      this.temperature=temperature;
      this.comments.add(comment);
   }
   public Date getDate(){
      return  date;
   }
   public void setDate(Date date){
      this.date=date;
   }
   public int getTemperature(){
      return  temperature;

   }
   public  void setTemperature(int temperature){
      this.temperature=temperature;

   }
   public ArrayList<String> getComments() {
      return comments;

   }
   public void addComment(String comment){
      this.comments.add(comment);
   }
   public String longestComment() {
      int length = 0;
      String longestComment = "";
      for ( String comment : comments )
      {
         if ( comment.length() > length )
         {
            length = comment.length();
            longestComment = comment;
         }
      }
      return longestComment;
   }

   public  static  void main (String args []){
      Calendar c=new GregorianCalendar();

      Day day=new Day(c.getTime(),20,"Today is normal temperature");
      day.addComment("Tomorrow is going to be the highest degree for ever in this summer");
      day.addComment("Yesterday was the coldest temperature");
      day.addComment("Next week is going to be the coldest temperature ever");
      System.out.println("the longest comment is:");
      System.out.println( day.longestComment() );
   }
} 
```

输出：

```
the longest comment is: 
Tomorrow is going to be the highest degree for ever in this summer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:03:29.780

通过这种方法，您最终可以获得具有最长评论的 Day 对象，并且您的 testComment 方法将打印最长的评论。那是你所期望的吗

```
public boolean longestComment(String longcom){

    if(longcom.length() > this.comments.length()){
        this.comments = longcom;
        return true;
    }
    return  false;
} 
```

# actionscript-3 - Flash 推荐帧率 - 2012

> ID：13179424
> 
> 赞同：0
> 
> 时间：2012-11-01T14:41:43.797
> 
> 标签：actionscript-3, flash, frame-rate

在 Flash 应用程序中推荐使用的 FPS（帧速率）是多少？

既适用于游戏，也适用于简单的应用程序。

*   让我们假设即使是简单的应用程序也是 Flash 应用程序并且它们确实使用动画。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T15:05:39.053

这个问题没有绝对的答案，但我会附和我的方法。

横幅广告：18fps

应用：32fps

高端动画：60fps

游戏：取决于开销。理想情况下，您测试您的游戏并不断提高您的 FPS，直到您开始看到延迟。

# .net - 判断dll是否存在

> ID：13179427
> 
> 赞同：0
> 
> 时间：2012-11-01T14:41:45.397
> 
> 标签：.net, file, exists, createobject

我想在 VBA 代码中使用 DotNet-dll。但我希望能够在使用 CreateObject 声明对象之前确定 dll 是否存在。

是否可以在不使用 Regasm 的情况下使用 dotnet dll？

我有一个 MS Access 数据库，我只想将 dll 放入与 mdb 文件相同的目录中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:05:46.513

这里似乎有两个问题。我会尝试回答第二个。我最近为 Crystal Reports 构建了一个用于 ms-access 的 .net DLL，并在没有 Regasm 的计算机上测试了 COM 接口。我发现这个链接是最有用的。
[http://www.simple-talk.com/dotnet/visual-studio/build-and-deploy-a-.net-com-assembly/](http://www.simple-talk.com/dotnet/visual-studio/build-and-deploy-a-.net-com-assembly/)
它展示了如何创建一个 msi 安装程序。

# forms - as3 - 遍历所有文本字段？

> ID：13179431
> 
> 赞同：0
> 
> 时间：2012-11-01T14:41:50.480
> 
> 标签：forms, actionscript-3, post

我在 as3 flash 中有一个带有文本字段和单选按钮的表单，它们的“实例名称”全部连续设置，例如：field_1 field_2 field_3 ...等

AS3 代码中是否有一种简单的方法可以遍历所有这些字段并在数组中获取它们的值？理想情况下，我想要一个简单的循环来获取值（所以如果缺少值，我可以添加一个简单的弹出窗口），然后使用填充的数组简单地使用 URLRequest 发布它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:16:07.977

如果您想要一种工作量更少且更易于维护的方式（如果将来文本​​的数量会发生变化，或者您需要在其他表单上重用代码或不想打扰实例名称），那么您可以这样做类似于下面的代码。

请记住，这假定您的所有文本字段都是同一父级的子级并且在该父级的范围内（因此在时间轴中包含所有文本字段的帧上）

```
function validateTextFields(){
    var tmpTf:TextField;
    var i:int = numChildren;
    while(i--){ //iterate through all the display objects on this timeline
        tmpTf = getChildAt(i) as TextField;
        if(tmpTf){
            //now that you have the textfield, you can check for an appropriate value, or send the value to a server, or store it in an array etc.

            //check if the value is blank, if so set the background to red
            if(tmpTf.text == ""){
                tmpTf.background = true;
                tmpTf.backgroundColor = 0xFF0000;
            }else{
                tmpTf.background = false;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:01:24.303

听起来您想使用 for 语句。我还使用了一个多维数组来存储实例名称以及它们包含的文本。我喜欢使用变量 _path 来定义我的代码范围。

```
var _path = this;
var text_ar:Array = new Array(['instance_1',''],['instance_2',''],['instance_3','']);    //instance name, instance text.

for(var i=0; i<ar.length; i++)
{
     text_ar[i][1] = _path[text_ar[i][0]].text
}

trace( text_ar[1][1] ); //Traces the text that's entered in instance_1\. 
```

# visual-studio-2010 - 缺少清单异常 Visual Studio 2010 项目从 2003 年、2008 年转换

> ID：13179432
> 
> 赞同：0
> 
> 时间：2012-11-01T14:41:55.653
> 
> 标签：visual-studio-2010, visual-c++, unmanagedresources

我有一个最初使用 Visual Studio 2003 创建的 Win Forms C++ 解决方案，转换为 2008（成功），现在我正在尝试将其转换为 Visual Studio 2010。

该解决方案构建时没有错误，然后在运行时尝试从表单的资源加载图像列表时出现缺少的清单异常。异常发生在以下代码行：

```
this->m_imageList->ImageStream = (__try_cast<System::Windows::Forms::ImageListStreamer *  >(resources->GetObject(S"m_imageList.ImageStream"))); 
```

我想我发现了问题，如果我使用 2008 程序集的 ildasm 检查清单，我会看到以下表格资源：

```
.mresource public SDTP.SDTPDataMonitorForm.resources
{
  // Offset: 0x00000000 Length: 0x00006DB0
} 
```

2010 程序集的清单如下所示：

```
.mresource public SDTPnet.SDTPDataMonitorForm.resources
{
  // Offset: 0x00000000 Length: 0x00004F57
}
.mresource public '..\\temp\\Debug\\SDTP.SDTPDataMonitorForm.resources' as '..$temp$Debug$SDTP.SDTPDataMonitorForm.resources'
{
  // Offset: 0x00008E80 Length: 0x00004F57
} 
```

我确定它找不到它，因为第一个实例中有额外的“net”文本，而第二个实例中有额外的 ..$temp$Debug 。

所以最后，我的问题是：我在项目设置中的哪里解决这个问题？..\temp\Debug 是项目路径的一部分......如果我将“中间目录”设置更改为 $(Configuration) 我现在得到：

```
.mresource public 'Debug\\SDTP.SDTPDataMonitorForm.resources' as Debug$SDTP.SDTPDataMonitorForm.resources
{
  // Offset: 0x00008E80 Length: 0x00004F57
} 
```

在仍然产生异常的清单文件中。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:54:08.070

右键单击 .resx 文件并选择属性并编辑“资源逻辑名称”

# iphone - NSDateComponents 指定上午/下午？

> ID：13179433
> 
> 赞同：1
> 
> 时间：2012-11-01T14:41:59.403
> 
> 标签：iphone, objective-c, cocoa-touch, nsdatecomponents

我正在使用`NSDateComponents`以下字符串建立日期：

```
"2014-05-17 02:39:00 PM +0000" 
```

当我设置所有组件并返回我得到的 NSDate 时（参见下面的方法）：

```
"2014-05-17 02:39:00 AM +0000" 
```

我的问题是，有没有办法将 AM/PM 指定为`NSDateComponent`，或者如果源日期是 PM，我是否只需将 12 添加到我的小时？

```
- (NSDate *)dateFromYear:(int)year month:(int)month day:(int)day hour:(int)hour minute:(int)minute {
    NSDateComponents *components = [[NSDateComponents alloc] init];
    [components setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
    [components setYear:year];
    [components setMonth:month];
    [components setDay:day];
    [components setHour:hour];
    [components setMinute:minute];
    NSCalendar *calendar = [NSCalendar currentCalendar];
    return [calendar dateFromComponents:components];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:03:39.497

显然，[NSDateComponents](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)似乎没有指定这一点。苹果自己的文档是这样说的：

> 重要提示：一个 NSDateComponents 对象本身是没有意义的；您需要知道它是根据什么日历解释的，并且您需要知道这些值是单位的绝对值还是单位的数量。

除了您的 12 小时逻辑之外，您还可以交替使用使用 AM/PM 的 NSDate 类[dateWithNaturalLanguageString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/occ/instm/NSCalendar/dateByAddingComponents%3atoDate%3aoptions%3a)并以某种方式将其用于您的目的。

# c# - 在单元格中找不到任何控件

> ID：13179436
> 
> 赞同：0
> 
> 时间：2012-11-01T14:42:01.627
> 
> 标签：c#, asp.net

```
 private void btnSaveStudy_Click(object sender, EventArgs e)
        {
            string valueFromlbl = string.Empty;

            for(int i = 0; i < tableContent.Rows.Count; i++)
            {
                for(int j = 0; j < tableContent.Rows[i].Cells.Count; j++)
                {
                    foreach(Control ctrl in tableContent.Rows[i].Cells[j].Controls)
                    {
                        Label lbl = ctrl as Label;
                        if(lbl != null)
                        {
                            valueFromlbl = lbl.Text;
                        }
                    }
                }
            }
        }

protected void Page_Load(object sender, EventArgs e)
{
HtmlTable table = null;
                HtmlTableRow row = null;
                HtmlTableCell cell = null;
                studyNumber = studyNumber + 1;
                uniqueID = uniqueID + 1;

                for(int i = 0; i < 5; i++)
                {
                    table = new HtmlTable();
                    row = new HtmlTableRow();

                    tableContent.Controls.AddAt(i, row);
                    for(int j = 0; j < 3; j++)
                    {
                        cell = new HtmlTableCell();
                        cell.Attributes.Add("Class", "csstablelisttd");
                        row.Attributes.Add("Class", "csstextheader");
                        row.Controls.AddAt(j, cell);

                        if(i == 0 && j == 0)
                        {
                            cell.InnerText = "Study : " + Convert.ToInt32(studyNumber);

                        }
                        else if(i == 1 && j == 0)
                        {
                            cell.InnerText = "Modality" + " : " + modality;
                        }
                        else if(i == 2 && j == 0)
                        {
                            cell.InnerText = "Start Date" + " : " + DateTime.Now.ToString("dd-MMM-yyyy");
                        }
                        else if(i == 3 && j == 0)
                        {
                            cell.InnerText = "Accession Number" + " : " + accessionNumber;
                        }
                        else if(i == 4 && j == 0)
                        {
                            Button btnSaveStudy = new Button();
                            btnSaveStudy.ID = "btnSaveStudy" + uniqueID;
                            btnSaveStudy.Text = "Save";
                            btnSaveStudy.Attributes.Add("Class", "cssbutton");
                            cell.Controls.Add(btnSaveStudy);
                            btnSaveStudy.Click += new EventHandler(btnSaveStudy_Click);
                        }
                        if(i == 1 && j == 1)
                        {
                            cell.InnerText = "AE Title" + " : " + schedule_Station_AE_Title;
                        }
                        else if(i == 1 && j == 2)
                        {
                            cell.InnerText = "Station Name" + " : " + schedule_Station_Name;
                        }
                        else if(i == 2 && j == 1)
                        {
                            cell.InnerText = "Start time" + " : " + startTime;
                        }
                        else if(i == 3 && j == 1)
                        {
                            cell.InnerText = "End time" + " : " + endTime;
                        }

                        else if(i == 2 && j == 2)
                        {
                            Label lblPriority = new Label();
                            lblPriority.ID = "lblPriority" + uniqueID;
                            lblPriority.Text = "Priority : ";
                            DropDownList ddlPriority = new DropDownList();
                            ddlPriority.ID = "ddlPriority" + uniqueID;
                            ddlPriority.Attributes.Add("Class", "csstextbox");
                            ddlPriority.Items.Add(new ListItem("MEDIUM", "4"));
                            ddlPriority.Items.Add(new ListItem("STAT", "1"));
                            ddlPriority.Items.Add(new ListItem("HIGH", "2"));
                            ddlPriority.Items.Add(new ListItem("ROUTINE", "3"));
                            ddlPriority.Items.Add(new ListItem("LOW", "5"));
                            cell.Controls.Add(lblPriority);
                            cell.Controls.Add(ddlPriority);
                        }
                        else if(i == 3 && j == 2)
                        {
                            Label lblStudy = new Label();
                            lblStudy.ID = "lblStudy" + uniqueID;
                            lblStudy.Text = "Study : ";
                            DropDownList ddlStudyList = new DropDownList();
                            ddlStudyList = BindStudy(ddlStudyList, Convert.ToInt32(acqModalityID), uniqueID);
                            ddlStudyList.Attributes.Add("Class", "csstextbox");
                            cell.Controls.Add(lblStudy);
                            cell.Controls.Add(ddlStudyList);
                        }
                    }
                }
            }}
I have added controls to table cell but not find any control 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:54:29.703

这似乎是执行顺序的问题。请记住，直到单击事件之后才会添加控件。因此，当您的按钮单击触发时，需要重新添加控件，然后才能检查它们是否存在。

（我会将此作为评论发布，但显然，由于我是新手，我没有足够的积分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:49:46.157

以 root 身份传入 Page 并查看您要查找的控件是否返回

```
private Control FindControlRecursive(Control rootControl, string controlID)
{
    if (rootControl.ID == controlID) return rootControl;

    foreach (Control controlToSearch in rootControl.Controls)
    {
        Control controlToReturn = 
            FindControlRecursive(controlToSearch, controlID);
        if (controlToReturn != null) return controlToReturn;
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:52:46.273

您只是忘记将表格本身添加到页面的控件集合中。

```
Page.Controls.Add(table); 
```

（最好将其添加到容器控件中，例如`PlaceHolder`或`Panel`代替）

# ruby-on-rails - 为什么 Mongoid/Moped 在生产 Rake 任务中向 Airbrake 抛出 Timeout::Error？

> ID：13179437
> 
> 赞同：0
> 
> 时间：2012-11-01T14:42:01.643
> 
> 标签：ruby-on-rails, rake, mongoid, airbrake, moped

我的生产安装有问题。我有几个成功运行的预定 rake 任务。但是，我收到了`Timeout::Error: execution expired`很多来自 Airbrake 的电子邮件。

但是，奇怪的是：Rake 任务全部成功完成。我正在 cron 命令中捕获 stdout/stderr，并且错误不会出现在日志中。我还在 rake 任务的末尾添加了简单的打印语句来验证它们的完成。

我该如何进一步解决这个问题？

这是其中一封电子邮件的堆栈跟踪：

```
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/connection.rb:203
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/connection.rb:203
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/connection.rb:235
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/connection.rb:203
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/connection.rb:260
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/connection.rb:260
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/connection.rb:259
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/connection.rb:153
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/connection.rb:30
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/node.rb:507
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/node.rb:122
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/node.rb:527
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/node.rb:542
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/node.rb:526
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/node.rb:515
[GEM_ROOT]/gems/newrelic_moped-0.0.3/lib/newrelic_moped/instrumentation.rb:24
[GEM_ROOT]/gems/newrelic_rpm-3.4.2.1/lib/new_relic/agent/method_tracer.rb:242
[GEM_ROOT]/gems/newrelic_moped-0.0.3/lib/newrelic_moped/instrumentation.rb:20
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/node.rb:70
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/node.rb:376
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/cluster.rb:112
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/cluster.rb:125
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/cluster.rb:125
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/cluster.rb:78
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/cluster.rb:147
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/session/context.rb:108
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/session/context.rb:50
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/database.rb:76
[GEM_ROOT]/gems/moped-1.2.5/lib/moped/query.rb:36
[GEM_ROOT]/gems/mongoid-3.0.5/lib/mongoid/contextual/mongo.rb:69
[GEM_ROOT]/gems/mongoid-3.0.5/lib/mongoid/contextual.rb:18
[PROJECT_ROOT]/lib/tasks/reminders.rake:7
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/task.rb:205
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/task.rb:205
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/task.rb:200
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/task.rb:200
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/task.rb:158
/usr/lib/ruby/1.9.1/monitor.rb:211
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/task.rb:151
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/task.rb:144
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/application.rb:116
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/application.rb:94
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/application.rb:94
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/application.rb:94
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/application.rb:133
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/application.rb:88
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/application.rb:66
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/application.rb:133
[GEM_ROOT]/gems/rake-0.9.2.2/lib/rake/application.rb:63
[GEM_ROOT]/gems/rake-0.9.2.2/bin/rake:33
[GEM_ROOT]/bin/rake:19
[GEM_ROOT]/bin/rake:19 
```

# visual-studio-2010 - 来自 Win32 API 的 GPU 信息

> ID：13179438
> 
> 赞同：1
> 
> 时间：2012-11-01T14:42:01.597
> 
> 标签：visual-studio-2010

是否可以使用 Win32 API 从注册表中剔除显卡名称和显卡驱动程序版本？语言为C#，环境为VS2010。

# asp.net-mvc - ASP.NET MVC3 HtmlPasswordFor 如何使其在发布方法后不重置

> ID：13179440
> 
> 赞同：1
> 
> 时间：2012-11-01T14:42:10.707
> 
> 标签：asp.net-mvc, asp.net-mvc-3, security, passwords

基本上我有一个 HtmlPasswordFor(m => EmployeeID)，我有一个名为“Go”的按钮。一旦我点击 Go 文本框，我实际上不希望密码消失或清除字段密码。
我该怎么做？

之前 ![在此处输入图像描述](../Images/f3749e82dd849f1be15b83fb7a81d360.png)

之后 ![在此处输入图像描述](../Images/a29b61b2773bbe5956ad919a3cd282d8.png) 我不想重置我的员工 ID。我想将密码保存在 **** 中，但在下一次发帖时我需要密码。

## 控制器

```
 [HttpGet]
    public ActionResult MainForm()
    {
        var model = new VTViewModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult MainForm(VTViewModel model, string buttontype)
    {
        if (ModelState.IsValid)
        {
            string EmployeeID = (Convert.ToInt64(model.EmployeeBinaryID, 2)).ToString();
            if (buttontype == "Go")
            {
                // GET Fields depending on the serial number.

                model.ListFields = logic_model.getFormInfo(model.SerialNumber, EmployeeID);
                if (model.ListFields[0].return_num == "0")
                {
                    model.Go = true;
                    // Set Process
                    // Set Header Token
                    // Set Header Title

                    ViewData["HEADER"] = model.ListFields[0].HeaderName + " | " + model.ListFields[0].TubeType + " | " + model.ListFields[0].ProductLine;
                }
                else
                {
                    model.DisplayMessage = helper.checkErrors(model.ListFields[0].return_num);
                }
            }
            else if (buttontype == "Submit")
            {
                model.HeaderToken = model.ListFields[0].HeaderToken; 
                string header = model.HeaderToken;
                string check = "";                                                        
                string return_num = model.ListFields[0].return_num; 
                // If the submission worked

                //SUBMIT HERE INTO DB then Clear
                List<string> values_to_submit = new List<string>(); // Creates a list to store the values to submit
                for (int i = 0; i < model.ListFields.Count; i++)
                {
                    // Fills in the hidden values.
                    if (model.ListFields[i].isHidden)
                    {
                        if (model.ListFields[i].Token == "SNT" || model.ListFields[i].Token == "SNC")
                        {
                            model.ListFields[i].Value = model.SerialNumber;
                        }
                        else if (model.ListFields[i].Token == "USR")
                        {
                            model.ListFields[i].Value = EmployeeID;
                        }
                        else if (model.ListFields[i].Token == "TMS")
                        {
                            model.ListFields[i].Value = "0";
                        }
                    }

                    // If it is a check box do the right conversion.
                    if (model.ListFields[i].DataType == "DATA-CKBOX")
                    {
                        //string convertedValue = helper.trueFalseStringtToIntBool(model.ListFields[i].Value);
                        string convertedValue = helper.boolToInt(model.ListFields[i].BoolValue).ToString();
                        model.ListFields[i].Value = convertedValue;
                    }

                    values_to_submit.Add(model.ListFields[i].Token + model.ListFields[i].Value);

                }

                check = logic_model.helperSubmit(values_to_submit, header, 1);

                if (check == "Submitted")
                {
                    ModelState.Clear();
                    VTViewModel clear_model = new VTViewModel(); // Creates an empty model
                    clear_model.DisplayMessage = "Submitted\n" + model.SerialNumber + "\n" + DateTime.Now;
                    return View(clear_model);
                }
                else
                {
                    model.DisplayMessage = check; // Sets the display message to the error.
                }

            }
            else if (buttontype == "Clear")
            {
                // Clears the screen and model
                ModelState.Clear();
                VTViewModel clear_model = new VTViewModel(); // Creates an empty model
                return View(clear_model);
            }
        }
        return View(model);

    } 
```

## 看法

```
 div>
         <fieldset>
         <table id="main_table">
                <tr>
                    <td>@Html.LabelFor(m => m.SerialNumber)</td>
                    <td>@Html.LabelFor(m => m.EmployeeBinaryID)</td>
                </tr>
                <tr>
                    <td>@Html.TextBoxFor(m => m.SerialNumber)</td>
                    <td>@Html.PasswordFor(m => m.EmployeeBinaryID, new { autocomplete = "off" }) </td>
                </tr>

                <tr><td><input type="submit" value="Go" name="buttontype" class="submit_button" id="btn"/><br /><br /></td></tr>
         </table>
         </fieldset>
         <br /> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:02:05.640

`Html.PasswordFor`可能出于安全原因，永远不会呈现该值。您可以解决此问题，但您必须改用在 ~/Views/Shared/EditorTemplates/Password.cshtml 处`Html.EditorFor`装饰`EmployeeID`属性`[DataType(DataType.Password)]`并添加以下编辑器模板

```
@Html.Password("", ViewData.TemplateInfo.FormattedModelValue, new { @class = "text-box single-line password" }) 
```

您还可以`[UIHint]`仅为该特定属性使用和创建模板。

# javascript - Twitter javascript 无法正常工作？

> ID：13179443
> 
> 赞同：1
> 
> 时间：2012-11-01T14:42:15.573
> 
> 标签：javascript, twitter

我在我的网站上为 twitter 小部件使用以下代码，它最近停止运行。谁能告诉我为什么？我的网站是[http://www.lookbookcookbook.com/](http://www.lookbookcookbook.com/)

谢谢！

```
<div style="top left no-repeat; padding-left: 0px;" id="twitter_div">
<ul id="twitter_update_list"></ul>
<a id="twitter-link" style="display:block;text-align:right;" href="http://twitter.com/lookbookcook" target="_blank">follow us...</a>
</div>
<script src="http://twitter.com/javascripts/blogger.js" type="text/javascript"></script>
<script src="http://twitter.com/statuses/user_timeline/lookbookcook.json?callback=twitterCallback2&count=5" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:45:31.587

Twitter API 最近有一些重大变化。

首先，任何地方都被淘汰了（所以如果你基于它，它自然会停止工作）。

其次，在没有明确版本控制的情况下使用任何 twitter API，它也会被逐步淘汰（因此您必须在 API 调用中放入`v1`or或类似的东西）。`v1.1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:51:03.983

您引用的脚本：[https](https://twitter.com/statuses/user_timeline/lookbookcook.json?callback=twitterCallback2&count=5) ://twitter.com/statuses/user_timeline/lookbookcook.json?callback=twitterCallback2&count=5生成错误。

看看你是否可以[在这里生成一个新的小部件](https://twitter.com/settings/widgets/new)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:05:35.010

感谢您的帮助，我现在可以正常工作了。

而不是使用

```
http://twitter.com/statuses/user_timeline/yournamehere.json?callback=twitterCallback2&count=5 
```

将其替换为

```
https://api.twitter.com/1/statuses/user_timeline/yournamehere.json?callback=twitterCallback2&count=5 
```

# jquery - 以前隐藏的字段的jQuery验证器

> ID：13179446
> 
> 赞同：0
> 
> 时间：2012-11-01T14:42:24.373
> 
> 标签：jquery, jquery-validate

有一个基于无线电隐藏/可见的字段。

因此，在加载页面时，我们根据无线电值使其可见隐藏

```
 $(document).ready(function() {

        if(edit) {
          populateData();
        }

        $(radio).change(function(){
            //here also we show hide text box based on radio value
        })

        function PopulateData() {
            //This does select radio and based on same show / hide text field
        }

       $("myForm").validate(); // attaching validate . At this point field could be hidden or visible

       $(savebutton).click(function(){

         /*This does not validate text 
          field (visibleBasedOnRadio) which was hidden and made visible by either of above */

          if( $("myForm").valid() == false) {
              return false;
          }
       });
    });

<form id="myForm">
<radio>
  <option 1>
  <option 2>
</radio>

<input type="text" id="visibleBasedOnRadio" class="required" style="display:none"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:38:22.190

我不知道您为演示逻辑使用什么框架。我会尽量做到通用。

让我们在表单中添加两个变量。

1.  radioButtonValue - 保存所选单选按钮的值。例如，选项 1 或选项 2。您可以为此字段设置默认值，以便在页面加载时默认选择该特定选项。
2.  valueOfTheVisibleField - 此字段保存输入文本框的值，一旦选择单选按钮，该文本框就可见。

    ```
    <form>
      <input type="radio" name="radioButtonValue" value="option1"> Option 1<br> //This is checked.
      <input type="radio" name="radioButtonValue" value="option2"> Option 2<br>
      <input type="text" id="visibleBasedOnRadio" class="required" name="valueOfTheVisibleField" style="display:none"/>
    </form> 
    ```

现在在您的验证中首先检查单选按钮的值。仅当其值为 option2 时，即显示必填字段时...仅检查文本框值是否存在。如果不是，不要做任何与 valueOfTheVisibleField 字段相关的事情，因为它是隐藏的。

# android - 在android中返回复选框的选中状态

> ID：13179449
> 
> 赞同：2
> 
> 时间：2012-11-01T14:42:28.617
> 
> 标签：android, listview, checkbox

> **可能重复：**
> [Android 使用光标适配器在 ListView 中保存复选框状态](https://stackoverflow.com/questions/2406937/android-save-checkbox-state-in-listview-with-cursor-adapter)

我有一个`ListView`，其中每个项目都包含一些`text(name,id)`和一个复选框。有一个按钮可以从`ListView`页面返回。因此，用户检查了一些项目并返回到上一页。还有一个按钮是这个页面返回`ListView`页面。当他/她回来时，我想向他/她展示他/她之前选择了哪些项目。

我知道`SharedPreferences`，但我不想使用它，因为我不想在用户重新启动应用程序时保存该状态。我只希望在应用程序运行时使用它。我做了一些工作，保存他选择的数据，并在他回来时检查它。但我无法检查复选框。我希望有人会说我在这里做错了什么。我使用xml中的复选框，而不是以编程方式。

```
public class MyCustomArrayAdapter extends ArrayAdapter<Model> {

    private final List<Model> list;

    private final  Activity context;

    public static ArrayList<String> friendName=new ArrayList<String>();
    public static ArrayList<String> friendBirthdate=new ArrayList<String>();
    public static ArrayList<String> friendId=new ArrayList<String>();
    public static ArrayList<String> getSelectedFriendId;
    public MyCustomArrayAdapter(Activity context, List<Model> list) 
    {
        super(context, R.layout.list_layout, list);

        this.context = context;
        this.list =  list ;
    }

    public static int count=0;
    static class ViewHolder 
    {
        protected TextView text, sub;
        protected CheckBox checkbox;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View view = null;

        if (convertView ==null)
        {
            LayoutInflater inflator = context.getLayoutInflater();

            view = inflator.inflate(R.layout.list_layout, null);

            final ViewHolder viewHolder = new ViewHolder();

            viewHolder.text = (TextView)view.findViewById(R.id.label);

            viewHolder.text.setTextColor(Color.WHITE);

            viewHolder.sub = (TextView)view.findViewById(R.id.sub);

            viewHolder.sub.setTextColor(Color.GRAY);

            viewHolder.checkbox = (CheckBox)view.findViewById(R.id.check);

            if(SelectionPage.get_selectedFriendId()!=null)   //checking whether user checked something earlier
            {
                getSelectedFriendId=SelectionPage.get_selectedFriendId();   //get checked userid from when user selects something

                for( int x = 0 ; x < getSelectedFriendId.size() ; x++ )
                {
                    for(int a=0;a<list.size();a++)
                    {
                        if(list.get(a).getId().contains(getSelectedFriendId.get(x)))
                        {
                            Toast.makeText( context, "matched..", Toast.LENGTH_SHORT).show();
                            viewHolder.checkbox.setChecked(true); //this doesn't check checkbox which is the problem!
                        }
                    }
                }
            }
            viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener()
            {
                public void onCheckedChanged(CompoundButton buttonView,boolean isChecked)
                {
                    Model element = (Model)viewHolder.checkbox.getTag();

                    if(buttonView.isChecked())
                    {
                        count++;

                        friendName.add(element.getName().toString());
                        friendBirthdate.add(element.getPlace().toString());
                        friendId.add(element.getId().toString());
                    }
                    else
                    {
                        friendName.remove(element.getName().toString());
                        friendBirthdate.remove(element.getPlace().toString());
                        friendId.remove(element.getId().toString());
                        count--;
                    }
                }
            });

            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));

        } 
        else 
        {
            view = convertView;
            ((ViewHolder)view.getTag()).checkbox.setTag(list.get(position));
        }

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).getName());
        holder.sub.setText( list.get(position).getPlace());
        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:51:13.910

您是否在视图的内容更改后触发代码以刷新列表视图？有时您必须这样做，否则 ListView 会做谁知道。有一堆命令，比如 invalidateViews() 可以做到这一点。让 getView 中的视图本身无效也可能有效

代码肯定可以使用优化，但这是另一个话题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:13:54.990

感谢大家的回复。玩了 2 个小时后我自己得到了答案。我在检查之前选择了哪个项目方面带来了一些变化。在下面为像我一样面临同样问题的人提供我的更新代码。

```
 if(SelectionPage.get_selectedFriendId()!=null)
    {
        String s=list.get(position).getId().toString();

        getSelectedFriendId=SelectionPage.get_selectedFriendId();

        for( int x = 0 ; x < getSelectedFriendId.size() ; x++ )
        {
            if(s.contains(getSelectedFriendId.get(x)))
            {
                Toast.makeText( context, "matched!..", Toast.LENGTH_SHORT).show();
                holder.checkbox.setChecked(true);

            }
        }
    } 
```

# ios - UIalertView 不调用 alertView:clickedButtonAtIndex

> ID：13179450
> 
> 赞同：0
> 
> 时间：2012-11-01T14:42:30.037
> 
> 标签：ios, uialertview

我有一个名为 MatchmakingServer 的类有一个方法如下：

```
- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state 
```

{

```
switch (state)
{
    case GKPeerStateAvailable:
        break;

    case GKPeerStateUnavailable:
        break;

        // A new client has connected to the server.
    case GKPeerStateConnected:
        if (_serverState == ServerStateAcceptingConnections)
        {
            if (![_connectedClients containsObject:peerID])
            {
                NSString *peerID2 =[self displayNameForPeerID:peerID];
                self.PeerId=peerID;
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oops:("
                                                                message:[NSString stringWithFormat:@"%@:%@ %@",@"device",peerID2,@"want to join your session"]
                                                               delegate:self
                                                      cancelButtonTitle:@"NO"
                                                      otherButtonTitles:nil];

                [_connectedClients addObject:peerID];
                NSLog(@"the orginal peerID %@",peerID);
                [self.delegate matchmakingServer:self clientDidConnect:peerID];
            }
        } 
```

还

```
@interface MatchmakingServer : NSObject <GKSessionDelegate,UIAlertViewDelegate> 
```

**为什么 alertView 不调用 clickedButtonAtIndex 的任何想法**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:45:35.583

您没有在屏幕上显示警报视图，您只是在初始化它。插入

```
[alert show]; 
```

在初始化代码之后，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:54:47.427

您需要调用`[alert show];`方法并`UIAlertViewDelegate`在`UIViewController.h`文件中采用。

# image - 使用 SIFT 时如何减少描述符的数量？

> ID：13179453
> 
> 赞同：0
> 
> 时间：2012-11-01T14:42:34.600
> 
> 标签：image, sift, descriptor, decrement, keypoint

我已经使用 SIFT 来查找关键点和描述符，现在我想减少描述符的数量，因为例如对于大小为 256x256 的图像，它给了我 120000 个描述符，这很耗时。请让我知道如何减少描述符数量的任何建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T16:55:29.720

对于仅包含 65536 (256x256) 像素的图像，您不能有 120000 个关键点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T17:34:21.137

关键点的数量等于筛选描述符的数量，除非我们使用多尺度提取。拉卢卡是正确的。您不能在该图像中拥有 120 000 个关键点，但我们可以拥有 120 000 个描述符，正如我所说，如果您在多尺度过程中提取特征。请告知我们您所做工作的更多细节，尤其是您正在使用的实现。

# arduino - 从 /dev/ttyACM0 读取输出会导致小猎犬板冻结（嵌入的东西）

> ID：13179459
> 
> 赞同：5
> 
> 时间：2012-11-01T14:42:47.023
> 
> 标签：arduino, embedded-linux, freeze, beagleboard

从结果中读取输出`cat /dev/ttyACM0`会导致小猎犬板冻结。当我拔下 USB 串口时它会解冻。

所以基本上我的设置是一个通过 USB 连接到我的笔记本电脑的小猎犬板，它通过 COM6 与它通信。我们还通过网络共享将其连接到网络。我还从 Arduino Teensy++ 控制器连接了另一个 USB。该控制器通过 USB 串口向 Beagle 板发送数据。本练习的重点是从 USB 串行读取数据。

我使用的阅读过程是`cat /dev/ttyACM0`。这导致打印前 2 行数据，然后整个 beagle 板冻结。当你拔下 teensy++ 时，它会打印出 10-20 行（假设缓冲区包含什么）。不知道为什么会这样。

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:41:25.190

检查您发送数据的速度，我发现如果您向 arduino 发送数据太快，您可能会填满 arduino 缓冲区并且它似乎被锁定了。尝试为输出数据添加延迟，或者确保 arduino 足够快地清空缓冲区。

# objective-c - Xcode 的自动布局仅在 viewDidAppear 中有效，这是非常有问题的

> ID：13179462
> 
> 赞同：10
> 
> 时间：2012-11-01T14:42:58.290
> 
> 标签：objective-c, ios, xcode

将我的项目升级到 iOS 6 后，我意识到自动布局仅在 viewDidAppear 中有效，并且我的大部分代码都希望视图的框架在 viewDidLoad 中可用。这种限制使非常好的自动布局功能对我来说几乎毫无用处。有什么建议可以帮助我使用自动布局吗？

例如，有时开发人员需要根据自动布局选择放置特定子视图的位置来调整有关子视图的信息。在用户已经看到子视图之后，开发人员才能确定子视图的最终位置。用户不应该看到这些信息调整，而是一次看到最终结果。

更具体地说：如果我想根据自动布局放置视图的位置更改视图中的图像怎么办？我无法查询该位置，然后在没有用户看到这种情况发生的情况下更改图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T14:48:25.510

作为一般规则，视图框架/边界不应依赖于`viewDidLoad`.

`viewDidLoad`只有在以编程方式或通过 .nib/.xib 文件创建视图后，才会调用该方法。此时，视图尚未设置，仅加载到内存中。

您应该*始终*在其中一个中进行视图布局，或者`viewWillAppear`在`viewDidAppear`视图准备好呈现后调用这些方法。

作为测试，如果您`NSLog(@"frame: %@", NSStringFromCGRect(self.view.frame));`同时使用`viewDidLoad`和`viewWillAppear`方法，您将看到只有后一种方法返回与包裹在您的视图周围的任何其他元素（例如`UINavigationBar`和`UITabBar`）相关的实际视图大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T10:37:01.380

正如@charshep 在评论中所说，调用`view.layoutIfNeeded()`viewWillAppear 可以解决问题。

引用他的原始评论

> 我在推动表格视图时无法在正确的滚动位置出现 [...]，因为布局直到 viewWillAppear 之后才发生。这意味着滚动计算是在设置正确大小之前发生的，因此结果是关闭的。对我有用的是调用 layoutIfNeeded，然后调用代码来设置 viewWillAppear 中的滚动位置。

# c++ - Boost 如何序列化 STL 容器？

> ID：13179463
> 
> 赞同：1
> 
> 时间：2012-11-01T14:43:01.623
> 
> 标签：c++, serialization, boost

我需要知道 Boost::Serialize 如何与 STL 容器一起工作 - 例如地图、矢量和列表。

具体来说，它是否在所有实际容器数据本身之前保存了整个容器的大小？

我可以读取该大小以了解 STL 容器的大小吗？

我在 Win7、64 位和 Visual Studio 2010 上。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:49:32.840

这是 boost 序列化`std::vector`s 的源代码：http: [//www.boost.org/doc/libs/1_38_0/boost/serialization/vector.hpp](http://www.boost.org/doc/libs/1_38_0/boost/serialization/vector.hpp)

`std::set`s： http: [//www.boost.org/doc/libs/1_38_0/boost/serialization/set.hpp](http://www.boost.org/doc/libs/1_38_0/boost/serialization/set.hpp)

`std::list`s： http: [//www.boost.org/doc/libs/1_38_0/boost/serialization/list.hpp](http://www.boost.org/doc/libs/1_38_0/boost/serialization/list.hpp)

`std::vector`很明显它确实如此。如果您查看[http://www.boost.org/doc/libs/1_38_0/boost/serialization/collections_load_imp.hpp](http://www.boost.org/doc/libs/1_38_0/boost/serialization/collections_load_imp.hpp)实现头文件，我们会看到：

```
collection_size_type count;
//...
ar >> BOOST_SERIALIZATION_NVP(count); 
```

在`load_collection`函数中。`std::list`和序列化程序都`std::set`直接调用它。

# java - BeanWriter 禁止输出空列表

> ID：13179465
> 
> 赞同：0
> 
> 时间：2012-11-01T14:43:06.517
> 
> 标签：java, xml, javabeans, betwixt

我有以下豆：

```
public class ContractBean {

    private List<String> listNd;

    private String nd;

    public List<String> getListNd() {
        return listNd;
    }

    public void setListNd(final List<String> listNd) {
        this.listNd = listNd;
    }

    public String getNd() {
        return nd;
    }

    public void setNd(final String nd) {
        this.nd= nd;
    }

} 
```

我使用 apache Betwixt 从我的 bean 输出 XML。

```
final BeanWriter beanWriter = new BeanWriter(outputWriter);
beanWriter.getXMLIntrospector().getConfiguration().setAttributesForPrimitives(false);
beanWriter.getBindingConfiguration().setMapIDs(false);
beanWriter.enablePrettyPrint();
beanWriter.setWriteEmptyElements(false);
beanWriter.getBindingConfiguration().setObjectStringConverter(new CustomObjectStringConverter());
beanWriter.write(obj); 
```

我的 bean的`listND`属性是`null`，但我仍然得到：

```
 <contract>
    <listNd/>
    <nd>22222</nd>
  </contract> 
```

如何从输出 XML 中删除空列表？

# java - 检票页面已过期

> ID：13179474
> 
> 赞同：1
> 
> 时间：2012-11-01T14:43:36.440
> 
> 标签：java, jakarta-ee, web-applications, wicket

我们有一个 java web 应用程序（使用 wicket）有几个 http 请求从我的页面到其他 url 有时我们的页面过期页面过期出现在 Firefox 中但没有出现在 chrome 中我们认为这是因为 wicket 完成的地址更改可能是为了安全原因如果这认为是真的，如何防止检票口地址改变

所以我的问题是：为什么我的页面的网址经常从“http://IPaddress:8080/myApp/myPage”变为“http://IPaddress:8080/myApp/myPage/?x=nLoy8Gx3J9W9GGieNNBndQ”变为“http:// IP地址：8080/myApp/?x=a8T-eIw8IixNrgLDxszosg”等等。请注意，我的页面上有一个简单的提交表单。

我问它是因为我们认为我们的页面过期原因与 url 更改有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:18:57.377

当在页面存储中找不到当前请求的页面时，将显示页面过期页面。这可能有不同的原因：

*   http 会话已过期，因此该会话的所有页面都已从页面存储中删除。使用 检查会话到期间隔`((HttpServletRequest)getRequestCycle().getRequest().getContainerRequest()).getSession().getMaxInactiveInterval()`。
*   已超出存储大小，并且已删除存储中的页面。用 . 检查大小`getSession().getApplication().getStoreSettings().getMaxSizePerSession()`。
*   将页面保存到页面存储期间发生了一些错误，现在无法从页面存储中检索页面。

# android - 在画布上绘制图片

> ID：13179482
> 
> 赞同：1
> 
> 时间：2012-11-01T14:44:12.430
> 
> 标签：android, paint

我已经编写了在图像上绘制文本的代码，它工作正常我在 potrait 模式下捕获图像，但是当我在横向模式下捕获图像时应用程序崩溃，我收到异常 Java.lang.IllegalStateException: Immutable bitmap pass to Canvas构造函数

```
Canvas canvas = new Canvas(photo);
                    Typeface tf = Typeface.create(Typeface.SANS_SERIF, Typeface.BOLD);
                    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
                    paint.setStyle(Style.FILL);
                    paint.setTypeface(tf);
                    paint.setColor(Color.WHITE);
                    paint.setStrokeWidth(12); 
                    canvas.drawBitmap(photo, 0, 0, paint);
                    canvas.drawText(topaste, 10, 115, paint);
                    image.setImageBitmap(photo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:49:12.880

基本上，画布对象需要一个新的位图来绘制，传入你的不可变图像会破坏稍后绘制操作的要点。下面的代码为画布创建一个新的位图。您将需要替换宽度和高度变量以匹配您的用例：

```
Bitmap b = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888)
Canvas canvas = new Canvas(photo); 
```

# android - Android 使用广播检查 Internet 连接

> ID：13179487
> 
> 赞同：4
> 
> 时间：2012-11-01T14:44:36.283
> 
> 标签：android

我想为我的互联网连接检查实现一个广播接收器。如果连接不存在，只需完成（）；它。但我仍然在搞乱上下文。请检查我的以下代码。

```
/**
 * This broadcast receiver is awoken after boot and registers the service that
 * checks for new photos from all the known contacts.
 */

public class ConnectionDetector extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) {

    boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY,false);

     if(noConnectivity){

         ((Activity)context).finish();
         //Show Warning Message
         //Close Application the way i suggested
     }

    }

} 
```

AndroidManifest

```
 <receiver      android:name=".ConnectionDetector"
                        android:label="NetworkConnection">
        <intent-filter>
            <action     android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
        </intent-filter>
        </receiver> 
```

日志猫：

```
11-01 22:40:29.179: E/AndroidRuntime(29531): FATAL EXCEPTION: main
11-01 22:40:29.179: E/AndroidRuntime(29531): java.lang.RuntimeException: Unable to start receiver in.wptrafficanalyzer.actionbarsherlocknavtab.ConnectionDetector: java.lang.ClassCastException: android.app.ReceiverRestrictedContext
11-01 22:40:29.179: E/AndroidRuntime(29531):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:1809)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at android.app.ActivityThread.access$2400(ActivityThread.java:117)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at android.os.Looper.loop(Looper.java:130)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at android.app.ActivityThread.main(ActivityThread.java:3691)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at java.lang.reflect.Method.invokeNative(Native Method)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at java.lang.reflect.Method.invoke(Method.java:507)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at dalvik.system.NativeStart.main(Native Method)
11-01 22:40:29.179: E/AndroidRuntime(29531): Caused by: java.lang.ClassCastException: android.app.ReceiverRestrictedContext
11-01 22:40:29.179: E/AndroidRuntime(29531):    at in.wptrafficanalyzer.actionbarsherlocknavtab.ConnectionDetector.onReceive(ConnectionDetector.java:29)
11-01 22:40:29.179: E/AndroidRuntime(29531):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:1798)
11-01 22:40:29.179: E/AndroidRuntime(29531):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T15:02:38.923

您在 BroadcastReciever 中获得的上下文不是 Activity。BroadcastReciever 在活动之外工作，并且不依赖于活动，除非您专门制作它。

抛开在不通知用户的情况下仅完成互联网问题活动的不良做法，您可以执行以下操作：

```
public abstract class ConnectionAwareActivity extends Activity {

protected final IntentFilter mIntentFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION); // A filter for a BR. We want to listen to internet changes
protected final ConnectionDetector mConnectionDetector = new ConnectionDetector(); // Creating an instance of our BR for activity to use

@Override
protected void onResume() {
    super.onResume();
    try {
        registerReceiver(mConnectionDetector, mIntentFilter); // Activity gets shown, we register a BR and it starts to receive notifications about internet changes
    } catch (Exception exc) {
        // whoops
    }
}

@Override
protected void onPause() {
    super.onPause();
    try {
        unregisterReceiver(mConnectionDetector); // Try to unregister BR, since when activity is not visible to user, we don't want to perform any operations on internet change
    } catch (Exception exc) {
        // whoops
    }
}

// Your BR that is encapsulated in Activity and therefore has access to it's methods, since it has access to Activity instance
protected class ConnectionDetector extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
        if (noConnectivity) {
            finish();
        }

    }
} 
```

}

将其用作其他活动的超类（此活动从 Activity 扩展，将其更改为其他活动），必须在连接错误时终止。

这是非常基本的变体并且有些错误，因为您最好更喜欢组合而不是超类

# android - Android - 如何在 listView 中移动滚动条

> ID：13179490
> 
> 赞同：1
> 
> 时间：2012-11-01T14:44:41.833
> 
> 标签：android, android-layout

> **可能重复：**
> [以编程方式滚动到 Android ListView 中的特定位置](https://stackoverflow.com/questions/7561353/programmatically-scroll-to-a-specific-position-in-android-listview)

我有一个带有滚动条的列表视图。我想将滚动条向下移动几个像素。

```
android:scrollY="20dp" 
```

我尝试在我的 listView 中设置它，但没有任何变化。

关于如何实现偏移的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:58:30.037

您可以使用 setSelectionFromTop 在后面的代码中设置它

[http://developer.android.com/reference/android/widget/ListView.html#setSelectionFromTop(int](http://developer.android.com/reference/android/widget/ListView.html#setSelectionFromTop(int) , int)

我认为 scrollY 更适合滚动视图。从外观上看，我没有在列表视图上尝试过它，我认为它在列表视图中不起作用。

如果您看到文档 listview xml 非继承属性仅以下几点，我认为您也不能从 xml 滚动：

android:divider android:dividerHeight android:entries android:footerDividersEnabled android:headerDividersEnabled

我检查了 AbsListView 他们也没有允许你这样做的属性..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:38:43.783

对于这个问题，您应该使用以下代码创建一个自定义滚动条。

```
 <layer-list  xmlns:android="http://schemas.android.com/apk/res/android">
        <item
            android:top="15dp">
            <shape android:shape="rectangle" >                    
                <solid android:color="#421700"/>                     
            </shape>                
        </item>           
    </layer-list> 
```

使用属性将其设置为视图

```
android:scrollbarThumbVertical 
```

# c# - 预定义行上的文本

> ID：13179492
> 
> 赞同：3
> 
> 时间：2012-11-01T14:44:45.850
> 
> 标签：c#, algorithm, graphics, gdi+

我有一条折线（`PointF[]`），一些`string`和`Graphics`对象。现在我想在我的线上画这个字符串。

这是一个例子：

![在此处输入图像描述](../Images/782d5b466f5e4edf780cccae1980e612.png)

是否有任何算法可以以最简单的方式做到这一点？

**[编辑]** 好的，我尝试了@endofzero 的代码并稍作修改。这是整个解决方案（带有角度和距离计算）：

```
private static void DrawBrokenString(Graphics g, IList<PointF> line, string text, Font font)
{
    g.SmoothingMode = SmoothingMode.AntiAlias;
    g.TextRenderingHint = TextRenderingHint.AntiAlias;
    Pen pen = new Pen(Brushes.Black);

    for (int index = 0; index < line.Count - 1; index++)
    {
        float distance = GetDistance(line[index], line[index + 1]);

        if (text.Length > 0)
        {
            for (int cIndex = text.Length; cIndex >= 0; cIndex--)
            {
                SizeF textSize = g.MeasureString(text.Substring(0, cIndex).Trim(), font);
                if (textSize.Width <= distance)
                {
                    float rotation = GetAngle(line[index], line[index + 1]);

                    g.TranslateTransform(line[index].X, line[index].Y);
                    g.RotateTransform(rotation);

                    if (index != line.Count - 2)
                    {
                        g.DrawString(text.Substring(0, cIndex).Trim(), font, new SolidBrush(Color.Black),
                                 new PointF(0, -textSize.Height));
                    }
                    else
                    {
                        g.DrawString(text.Trim(), font, new SolidBrush(Color.Black),
                                 new PointF(0, -textSize.Height));
                    }

                    g.RotateTransform(-rotation);
                    g.TranslateTransform(-line[index].X, -line[index].Y);

                    text = text.Remove(0, cIndex);
                    break;
                }
            }    
        }
        else
        {
            break;
        }

        g.DrawLine(pen, line[index].X, line[index].Y, line[index + 1].X, line[index + 1].Y);
    }
}

private static float GetDistance(PointF p1, PointF p2)
{
    return (float) Math.Sqrt(Math.Pow(p2.X - p1.X, 2) + Math.Pow(p2.Y - p1.Y, 2));
}

private static float GetAngle(PointF p1, PointF p2)
{
    float c = (float) Math.Sqrt(Math.Pow(p2.X - p1.X, 2) + Math.Pow(p2.Y - p1.Y, 2));

    if (c == 0)
        return 0;

    if (p1.X > p2.X)
        return (float) (Math.Asin((p1.Y - p2.Y)/c)*180/Math.PI - 180);

    return (float) (Math.Asin((p2.Y - p1.Y)/c)*180/Math.PI);
} 
```

现在我只需要一件事来完成我的问题。我不希望字符串相互重叠。有任何想法吗？啊，当我们不能在路径上画一个字符串时（因为有太多的断点，它应该画在线的上方（中间顶部）。

这是不需要的重叠的示例：

![在此处输入图像描述](../Images/69b6dc9278ac3320635c276b26c21ab7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:52:04.077

这是一个如何在虚线之后绘制文本的简单示例。

```
 private static void DrawBrokenLine(PointF[] line, string text, Graphics g, Font font)
    {
        for (int index = 0; index < line.Length - 1; index++)
        {
            float distance = distanceBetween(line[index], line[index + 1]);

            if (text.Length > 0)
            {
                for (int cIndex = text.Length; cIndex >= 0; cIndex--)
                {
                    SizeF textSize = g.MeasureString(text.Substring(0, cIndex).Trim(), font);
                    if (textSize.Width <= distance)
                    {
                        float rotation = angleBetween(line[index], line[index + 1]);

                        g.TranslateTransform(line[index].X, line[index].Y);
                        g.RotateTransform(rotation);

                        g.DrawString(text.Substring(0, cIndex).Trim(), font, new SolidBrush(Color.Black),
                            new PointF(0, -textSize.Height));

                        g.RotateTransform(-rotation);
                        g.TranslateTransform(-line[index].X, -line[index].Y);

                        text = text.Remove(0, cIndex);
                        break;
                    }
                }
            }
            else
                break;
        }
    } 
```

如果您希望它只在单词之间的空格处中断，则必须更改它在测量时缩短字符串的方式。

**编辑**

为了修复角落上的文本重叠，我为它添加了一个计算：

```
 private static void DrawBrokenLine(PointF[] line, string text, Graphics g, Font font)
    {
        float lastOverlap = 0;

        for (int index = 0; index < line.Length - 1; index++)
        {
            float distance = distanceBetween(line[index], line[index + 1]);

            float angleOfLines = 180;
            if (index < line.Length - 2)
            {
                angleOfLines = angleBetweenLines(line[index], line[index + 1], line[index + 2]);
            }

            if (text.Length > 0)
            {
                SizeF textSize = g.MeasureString(text, font);
                float overlap = 0;
                if (angleOfLines < 180)
                {
                    if (angleOfLines <= 90)
                    {
                        overlap = (textSize.Height / 1.5f) / (
                            Convert.ToSingle(Math.Tan((angleOfLines / 2) * Math.PI / 180))
                            );
                    }
                    else
                    {
                        overlap = Convert.ToSingle(
                            Math.Sin(angleOfLines * Math.PI / 180) * (textSize.Height / 1.5f));
                    }
                }

                for (int cIndex = text.Length; cIndex >= 0; cIndex--)
                {
                    textSize = g.MeasureString(text.Substring(0, cIndex).Trim(), font);

                    if (textSize.Width <= distance - overlap - lastOverlap)   //notice the subtraction of overlap
                    {
                        float rotation = angleBetween(line[index], line[index + 1]);

                        g.TranslateTransform(line[index].X, line[index].Y);
                        g.RotateTransform(rotation);

                        g.DrawString(text.Substring(0, cIndex).Trim(), font, new SolidBrush(Color.Black),
                            new PointF(lastOverlap, -textSize.Height));

                        g.RotateTransform(-rotation);
                        g.TranslateTransform(-line[index].X, -line[index].Y);

                        text = text.Remove(0, cIndex);
                        break;
                    }
                }

                lastOverlap = overlap;
            }
            else
                break;
        }
    }

    private static float angleBetweenLines(PointF A, PointF B, PointF C)
    {
        float angle1 = 360 - angleBetween(A, B);
        float angle2 = 360 - angleBetween(B, C);

        if (angle1 < 0)
            angle1 += 360;
        if (angle2 < 0)
            angle2 += 360;

        float delta = 180 + angle1 - angle2;

        if (delta < 0)
            delta += 360;
        if (delta > 360)
            delta -= 360;

        return delta;
    } 
```

![在此处输入图像描述](../Images/a6c83ef00d4cc0ad9f3ca88f13a5cd7e.png)

我的示例有一个警告：如果您注意到，我将文本高度除以一个特殊数字。我`MeasureString`无法返回文本的准确高度，因此我尝试手动更正。

关于在线条上方画一个字符串（因为中断太多），这取决于你想如何检测这种情况（什么构成太多，文本应该放在哪里，应该倾斜吗？）。也许如果您可以提供您想到的这种情况的示例图像，这将有助于澄清。

# c++ - 如果我有足够的 RAM，会发生内存分页吗？

> ID：13179495
> 
> 赞同：3
> 
> 时间：2012-11-01T14:45:05.180
> 
> 标签：c++, memory, paging

我正在编写一个高性能服务器应用程序（在 Linux 上），我正在尝试获得一条快速的关键路径。我担心在我的操作过程中内存分页和内存交换到磁盘（延迟毫秒级）。

我的问题是，如果我在服务器上有很多内存（比如 16GB）并且我的内存利用率保持在 6-10GB 左右，而且我知道同一个盒子上没有其他进程。应用启动暖机后能否保证不漏页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:52:19.440

这不能保证。Linux 的默认行为是有时使用 RAM 来缓存文件，这可以提高某些工作流程的性能。这意味着有时即使内存未全部使用，内存页也会被换出。

您可以使用 mlock/mlockall 将进程的页面锁定在内存中。有关`man 2 mlock`更多信息，请参阅。

# sftp - Mule Esb CE sftp出站端点调用表单代码（自定义java转换器）

> ID：13179506
> 
> 赞同：0
> 
> 时间：2012-11-01T14:45:32.790
> 
> 标签：sftp, esb, mule

是否可以通过代码调用 sftp 出站端点并发送文件？我在 java 代码中（在自定义转换器中）有一个 File 对象的引用，我想调用 sftp 出站端点并传递该 File 引用。这是可行的吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:21:54.077

通过它`FileInputStream`，应该可以。

```
muleContext.getClient().dispatch("sftp://...", new FileInputStream(file), null); 
```

如果没有，您必须将其传递给`byte[]`.

请注意，这`dispatch`是异步的：在 SFTP 通信发生时，调用将立即返回。如果您想等到它完成，请使用`send`超时作为最后一个参数。

由于您配置了多个 SFTP 连接器，因此您必须在 URL 中指定连接器名称。假设你想使用 调度`SFTP_Upload_Connector`，你必须使用：

```
muleContext.getClient().dispatch("sftp://...?connector=SFTP_Upload_Connector", new FileInputStream(file), null); 
```

如果要设置特定的目标文件名，请将其作为`filename`属性映射中命名的属性传递，例如使用：

```
muleContext.getClient().dispatch("sftp://...?connector=SFTP_Upload_Connector", new FileInputStream(file), Collections.singletonMap("filename", "somen_ame")); 
```

# c# - WPF DataGrid PreviewMouseDown 未按预期处理右键单击

> ID：13179509
> 
> 赞同：6
> 
> 时间：2012-11-01T14:45:41.277
> 
> 标签：c#, wpf, datagrid, mouseevent

我在用户控件中设置了一个带有 PreviewMouseDown 事件的 DataGrid。这个想法是，当用户将鼠标移动到单元格中时，它会根据单元格的内容设置要运行的动作，并且无论用户单击哪个鼠标按钮，动作都会运行。
我的事件处理程序（C#）：

```
private void LadderMouseClick(object sender, System.Windows.Input.MouseButtonEventArgs e)  {
        if (m_ActiveAction != null) {
            m_ActiveAction();
        }
        e.Handled = true;
    } 
```

我的数据网格（XAML）：

```
<DataGrid AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" CanUserReorderColumns="False" CanUserResizeColumns="False" CanUserSortColumns="False"  EnableRowVirtualization="True"  ItemsSource="{Binding Source={StaticResource sourceCollection}}" Name="DataGrid" RowDetailsVisibilityMode="Collapsed" IsReadOnly="True" Height="600" MouseLeave="DataGrid_MouseLeave" MouseEnter="DataGrid_MouseEnter" PreviewMouseDown="LadderMouseClick" PreviewMouseDoubleClick="LadderMouseDoubleClick" VerticalScrollBarVisibility="Hidden" SelectionUnit="Cell" SelectionMode="Single"> 
```

这有效，并且当用户在 DataGrid 上单击右键或左键时正确运行该操作。然而，问题是当用户右键单击时，他们的鼠标所在的单元格被选中（单元格周围出现黑色边框）；当他们左键单击时不会发生这种情况。

为什么他们的行为不同？他们不应该以同样的方式处理吗？我错过了什么非常简单的东西吗？

提前致谢！

编辑：
到目前为止，我已经尝试过 DataGrid.UnselectAll()、DataGrid.UnselectAllCells()、DataGrid.SelectedIndex = -1 和 DataGrid.CurrentCell = default(DataGridCellInfo)。他们都没有为我工作。

编辑#2：
如果有帮助，我将使用 DataGridTemplateColumns 和 TextBlocks 来显示我的数据。这会导致这种行为吗？

解决方案：[Peter Hansen](https://stackoverflow.com/users/564495/peter-hansen)
的建议 解决了这个问题，即向 DataGrid 以及 PreviewMouseDown 事件添加一个 PreviewMouseRightButtonDown 事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:23:05.600

我认为您看到的是单元格的边框，当它具有焦点时正在显示。

您可以通过将其厚度设置为 0 来删除它，如下所示：

```
<DataGrid.CellStyle>
    <Style TargetType="DataGridCell">
        <Setter Property="BorderThickness" Value="0" />
    </Style>
</DataGrid.CellStyle> 
```

**更新：**
显然，当您设置`PreviewMouseDown`要处理的事件时，DataGrid 仅在您使用鼠标左键时停止选择单元格。

您还必须处理`PreviewMouseRightButtonUp`以阻止右键单击选择单元格。

我认为这会解决你的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:53:37.060

您应该能够调用 DataGrids 附带的 UnselectAllCells 方法。它看起来像这样：

```
dataGrid.UnselectAllCells(); 
```

在执行点击操作后调用它，它应该删除单元格选择。

编辑：我认为您的 dataGrid.UnselectAllCells() 没有调用，因为您仍在 PreviewMouseDown 事件中。尝试进行相应的 PreviewRightMouseButtonUp 事件并在此处取消选择您的单元格。调用此方法的时间可能对其成功至关重要。

# c# - 如何在 C# 2012 版中正确清理 Excel 互操作对象

> ID：13179510
> 
> 赞同：4
> 
> 时间：2012-11-01T14:45:45.620
> 
> 标签：c#, .net-3.5, marshalling, com-interop, excel-interop

我正在用 C# 编写一个应用程序，它将通过互操作打开一个 Excel 电子表格（目前是 2007 年），做一些魔术，然后关闭。“神奇”部分并不重要，因此该应用程序将包含对 Excel 生成的许多 COM 对象的许多引用。

我以前写过这种应用程序（实际上写了太多次），但我从来没有找到一种舒适的、“好闻”的方法来与 COM 对象交互。问题的部分原因在于，尽管进行了大量研究，但我仍然不能完全理解 COM，部分原因在于互操作包装器隐藏了很多可能不应该隐藏的内容。来自社区的许多不同的、相互矛盾的建议只会让事情变得更糟。

如果你不能从标题中看出，我已经完成了我的研究。标题暗示了这篇文章：
[如何正确清理 Excel 互操作对象？](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects-in-c-sharp)

2008 年第一次被问到，这个建议在当时真的很有帮助而且很可靠（尤其是“永远不要在 com 对象中使用 2 点”位），但现在似乎已经过时了。2010 年 3 月，Visual Studio 团队发布了一篇博客文章，警告其他程序员[Marshal.ReleaseComObject [is] 被认为是危险](http://blogs.msdn.com/b/visualstudio/archive/2010/03/01/marshal-releasecomobject-considered-dangerous.aspx)的。文章参考了两篇文章，[cbrumme 的 WebLog > ReleaseComObject](http://blogs.msdn.com/b/cbrumme/archive/2003/04/16/51355.aspx)和[The mapping between interface pointers and runtime callable wrappers (RCWs)](http://blogs.msdn.com/b/mbend/archive/2007/04/18/the-mapping-between-interface-pointers-and-runtime-callable-wrappers-rcws.aspx)，暗示人们一直在错误地使用ReleaseComInterop（cbrumme：“如果你是一个客户端应用程序，使用的数量不多在您的托管代码中自由传递的 COM 对象，您不应使用 ReleaseComObject")。

**有没有人有一个中等复杂的应用程序的例子，最好使用多个线程，它能够成功地在内存泄漏（应用程序关闭后 Excel 继续在后台运行）和 InvalidComObjectExceptions 之间导航？**我正在寻找允许 COM 对象在创建它的上下文之外使用但在应用程序完成后仍然可以清理的东西：一种可以有效跨越托管的内存管理策略的混合体/非托管划分。

参考讨论此问题的正确方法的文章或教程将是一个非常受欢迎的替代方案。我最好的 Google-fu 努力返回了明显不正确的 ReleaseComInterop 方法。

* * *

**更新：（**
*这不是答案）*
我在发布后不久发现了这篇文章：
[Jake Ginnivan 的 VSTO 和 COM 互操作](http://jake.ginnivan.net/vsto-com-interop)

我已经能够通过扩展方法实现他将 COM 对象包装在“AutoCleanup”类中的策略，我对结果非常满意。尽管*它没有提供允许 COM 对象跨越创建它们的上下文边界并且仍然使用 ReleaseComObject 函数*的解决方案，但它至少提供了一个简洁且易于阅读的解决方案。

这是我的实现：

```
class AutoCleanup<T> : IDisposable {

    public T Resource {
        get;
        private set;
    }

    public AutoCleanup( T resource ) {
        this.Resource = resource;
    }

    ~AutoCleanup() {
        this.Dispose();
    }

    private bool _disposed = false;
    public void Dispose() {
        if ( !_disposed ) {
            _disposed = true;
            if ( this.Resource != null && 
                 Marshal.IsComObject( this.Resource ) ) {
                Marshal.FinalReleaseComObject( this.Resource );
            } else if ( this.Resource is IDisposable ) {
                ( (IDisposable) this.Resource ).Dispose();
            }
            this.Resource = null;
        }
    }

}

static class ExtensionMethods {

    public static AutoCleanup<T> WithComCleanup<T>( this T target ) {
        return new AutoCleanup<T>( target );
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:58:49.087

您现在有 COM 代理管理的 NetOffice 概念吗？NetOffice 使用 com 代理的包装类和 IDisposable 模式。NetOffice 保持代理的父->子关系。处理工作表，并且从实例（单元格，样式）等中创建的所有子项也被处理。您还可以使用特殊事件或静态属性来观察应用程序中打开代理的数量。

看看这个文档片段： http://netoffice.codeplex.com/wikipage?title= [Tec_Documentation_English_Management](http://netoffice.codeplex.com/wikipage?title=Tec_Documentation_English_Management)

您可以在教程文件夹中找到一些用于 com 代理管理的精彩项目

# c# - 模型和主窗体之间的顺序中断c#

> ID：13179511
> 
> 赞同：1
> 
> 时间：2012-11-01T14:45:51.580
> 
> 标签：c#, visual-studio

我有两个表格表格1是主要表格表格二是模型表格我想将表格设置如下：

表格1

```
private void button1_Click(object sender, EventArgs e)
{
        Form2 f2 = new Form2();
        f2.Show(this);

} 
```

上面将设置 form2 的 form1 所有者，并且会显示 form2，但问题是这会在按下 Alt+Tab 键时破坏表单的顺序，因此我尝试了另一种方式，如下所示。

```
 private void button1_Click(object sender, EventArgs e)
 {
        Form2 f2 = new Form2();
        f2.ShowDialog(this);

 } 
```

这是可行的，但问题是对话形式不允许我最大化/最小化和关闭

我的表单 2 是无边框表单，它设置为在特定位置显示以适合主表单 1。我的目标是不在 Alt+Tab 列表中显示 form2，当我关闭 form2 时，form1 将立即显示而不会破坏表单的顺序。

当我在第一个条件下按 Alt+Tab 键并尝试关闭 form2 时，显示的另一个应用程序而不是我不想要的 form1。

这个问题有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:38:10.560

听起来您确实可以将第二种形式作为自定义控件。

请参阅[Microsoft 的文档](http://msdn.microsoft.com/en-us/library/649xahhe.aspx)和[这组示例](http://www.akadia.com/services/dotnet_user_controls.html)。

将其视为标准控件，例如`Button`、`DataGridView`、`TextBox`或类似的控件，但您可以完全控制它。您可以显示或隐藏它，您不必担心它的位置，它不会将焦点从父窗体上移开，等等。你可以把你想要的任何其他控件放在里面，封装它们的所有逻辑，等等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T14:57:53.830

一个可能的技巧是在将子表单打开为模态表单后保持父表单处于活动状态，以便您也可以最大化/最小化您的父表单。扩展方法：

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
static extern bool EnableWindow(IntPtr hWnd, bool enable);
public static DialogResult ShowDialogSpecial(this Form formToBeShown, Form parent)
{
    parent.BeginInvoke(new Action(() => EnableWindow(parent.Handle, true)));
    formToBeShown.ShowDialog(parent);

    return formToBeShown.DialogResult;
} 
```

您可以致电：

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 f2 = new Form2();
    //additionally do f2.ShowInTaskbar = false to make sense.
    f2.ShowDialogSpecial(this);
} 
```

这不会让子表单真正充当非模态表单，因为子表单可以覆盖父表单。

# python - 如何在 Pymol 中设置 RGB 颜色

> ID：13179512
> 
> 赞同：1
> 
> 时间：2012-11-01T14:45:51.587
> 
> 标签：python, visualization, scientific-computing, pymol

请问 Pymol 是否允许用户通过用户定义的值设置原子颜色？例如，我想通过生化特征为所有原子着色，羽毛被认为是 RGB 值，比如 [RGB] 等于 [feature1 feature2 feature3]，我该如何在 Pymol 中做到这一点？

另外，如果我已经为原子着色，我可以获得颜色值吗？我尝试使用 cmd.getcolor()，但它返回的值不被识别为 RGB 颜色，我可以调用 Pymol 中的任何其他函数来获取原子颜色吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:25:36.173

请参考 pymolwiki 页面[颜色](http://pymolwiki.org/index.php/Color)和[设置颜色](http://www.pymolwiki.org/index.php/Set_Color)。

首先，使用您的特征定义一组颜色（请记住将特征值标准化为 [0,1] 或 [0, 255]）：

```
set_color mycol1, [feature1R, feature1G, feature1B]
set_color mycol2, [feature2R, feature2G, feature2B]
... 
```

然后您可以使用自定义颜色为原子着色：

```
# color all alpha Carbons to mycol1:
color mycol1, n. CA
# color all backbone Nitrogens to mycol2:
color mycol1, n. N 
```

要获取原子颜色，请参阅“[获取原子颜色](http://www.pymolwiki.org/index.php/Color#Getting_Atom_Colors)”。假设你有一个命名的原子`youratom`并且你想为它获取颜色：

```
atomcolor = []
iterate youratom, atomcolor.append(cmd.get_color_tuple(color))
print atomcolor[0] 
```

`atomcolor[0]`是一个 RGB 值在 [0,1] 范围内的元组。

# css - 即使没有margin-top，区域也不会向下移动

> ID：13179513
> 
> 赞同：0
> 
> 时间：2012-11-01T14:45:53.983
> 
> 标签：css, position

我试图在 485 宽的图片旁边获得描述，我是按照自己的方式进行的，但是当尝试添加具有相同图片和描述的新行时，如下所示：

[![图片](../Images/7a058040a516bf68f1e44e89f17eba5f.png)](https://i.stack.imgur.com/pjHMU.png)
[（来源：[gyazo.com](http://gyazo.com/7395b2748a947cdab0247b485bc391b5.png)）]

但是当我复制并粘贴完全相同的代码行并将 margin-top 添加到该 div 时，甚至`<br />`它不会在它们之间留出任何空间，这就是它现在的样子：

[![img2](../Images/6eb9c5126a8305381c00c59d9e4506bf.png)](https://i.stack.imgur.com/HVjDh.png)
[（来源：[gyazo.com](http://gyazo.com/83bd43135137d7e33c9b2074645fe43e.png)）]

是什么原因造成的？很有意思..

我正在使用 twitter 引导框架。代码：

```
<body>
<div class="container">
  <div class="works">
  <div class="field1">
     <div class="work1">
        <span class="title-col">Client: <span class="name-col">Joshua</span></span><br />
        <span class="title-col">Description: <span class="name-col">A suavely, asthetic, betting website based <br />off of the widely expanding MOBA game League of Legends.<br />
It was a great honor doing this design, gaming  <br />websites are always fun!</a>
<br />
   <br />
<span class="title-col">Category:</span> <div class="tag_webdesign"></div>
     </div>
         <img class="examplefloat" src="img/p1.png"/>
     </div>
<br />
       <div class="field1">
     <div class="work1">
        <span class="title-col">Client: <span class="name-col">Joshua</span></span><br />
        <span class="title-col">Description: <span class="name-col">A suavely, asthetic, betting website based <br />off of the widely expanding MOBA game League of Legends.<br />
It was a great honor doing this design, gaming  <br />websites are always fun!</a>
<br />
   <br />
<span class="title-col">Category:</span> <div class="tag_webdesign"></div>
     </div>
         <img class="examplefloat" src="img/p1.png"/>
     </div>

  </div>
</div>
<br />
</body> 
```

CSS

```
.name-col {
color: #d3d3d3;
}

.title-col {
color: #b2b2b2;
float: left;
position: relative;
top: 7px;
}

.field2 {
margin-top: 50px;
}

.works {
margin-top: 10%;
}
.examplefloat {
float: left;
border: solid 1px #000;
margin-left: 50px;
}

.tag_webdesign {
  background-image: url("../img/web-design.png");
width: 89px;
height: 37px;
float: left;
}

.work1 {
float: left;
} 
```

实时预览：

[http://justxp.plutohost.net/themetheory/portfolio.html](http://justxp.plutohost.net/themetheory/portfolio.html)

是什么导致了这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:50:28.037

将此规则添加到您的 CSS

```
.field1 {
    margin-bottom: 30px;
    overflow: hidden;
} 
```

这将清除容器中的浮动元素并在其底部`.field1`应用边距。`30px`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:51:11.077

找到`</div>`与`<div class="works">`

在上面添加`</div>`：

```
<div style="clear:both"></div> 
```

应该是这样的............

```
<body>
<div class="container">
  <div class="works">
  <div class="field1">
     <div class="work1">
        <span class="title-col">Client: <span class="name-col">Joshua</span></span><br />
        <span class="title-col">Description: <span class="name-col">A suavely, asthetic, betting website based <br />off of the widely expanding MOBA game League of Legends.<br />
It was a great honor doing this design, gaming  <br />websites are always fun!</a>
<br />
   <br />
<span class="title-col">Category:</span> <div class="tag_webdesign"></div>
     </div>
         <img class="examplefloat" src="img/p1.png"/>
         <div style="clear:both></div> //MY ADDITION
     </div>
<br />
       <div class="field1">
     <div class="work1">
        <span class="title-col">Client: <span class="name-col">Joshua</span></span><br />
        <span class="title-col">Description: <span class="name-col">A suavely, asthetic, betting website based <br />off of the widely expanding MOBA game League of Legends.<br />
It was a great honor doing this design, gaming  <br />websites are always fun!</a>
<br />
   <br />
<span class="title-col">Category:</span> <div class="tag_webdesign"></div>
     </div>
         <img class="examplefloat" src="img/p1.png"/>
         <div style="clear:both></div> //MY ADDITION
     </div>

  </div>
</div>
<br />
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:51:16.787

您想要做的是在您的 .field1 div 上使用 clearfix 解决方案：[https ://stackoverflow.com/a/1633170/1778054](https://stackoverflow.com/a/1633170/1778054)

本质上，将其添加到您的 CSS 中：

```
/* For modern browsers */
.field1:before,
.field1:after {
    content:"";
    display:table;
}
.field1:after {
    clear:both;
}
/* For IE 6/7 (trigger hasLayout) */
.field1 {
    zoom:1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:51:31.193

如果你采取浮动：左; 关闭 .examplefloat （用于图像）类，它将解决边距问题。

# c# - CSV 文件解析为列表，公开列表以针对 SQL 表进行解析

> ID：13179514
> 
> 赞同：0
> 
> 时间：2012-11-01T14:45:56.337
> 
> 标签：c#, sql-server, webforms

将 csv 文件解析为 webapp 表单中的列表。

如何将列表公开，以便我可以调用它并在其他类中使用它？我基本上需要根据 SQL 表中的数据解析列表中的数据。

```
public partial class _Default : System.Web.UI.Page
{
    protected void UploadBtn_Click(object sender, EventArgs e)
    {

        if (FileUpload.HasFile)
        {

            string filename = Path.GetFileName(FileUpload.FileName);

            using (FileStream stream = new FileStream(ConfigurationManager.AppSettings["temp_dir"].ToString().Trim() + filename, FileMode.Open, FileAccess.Read, FileShare.Read))
            { 
                using (StreamReader read = new StreamReader(stream))
                {
                    List<string[]> members = new List<string[]>();
                    int j = 0;

                    while (!read.EndOfStream)
                    {

                        string line = read.ReadLine();
                        string[] values = line.Split(',');

                        if(j==0)
                        {
                            j++;
                            continue;
                        }

                        long nbr = Convert.ToInt64(values[0]);
                        int lnbr = Convert.ToInt32(values[1]);
                        int value = Convert.ToInt32(values[2]);
                        members.Add(values); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:59:49.683

如果您的目标是同时检查 SQL，您只需将`List`声明上移一点。然后在解析 CSV 后，启动 SQL 代码。

```
protected void UploadBtn_Click(object sender, EventArgs e)
{
    List<string[]> members = new List<string[]>();

    /* parse upload file */

    /* check against SQL table */ 
```

# python - Python 到 .bat 的转换

> ID：13179515
> 
> 赞同：5
> 
> 时间：2012-11-01T14:46:10.277
> 
> 标签：python, windows, batch-file

我希望 Windows 上的用户能够运行我的 Python 程序，所以我想将其转换为`.bat`文件。有没有办法转换它？我试过搜索，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:00:16.953

除非您的脚本很简单，否则无法将其“翻译”成批处理文件。但是存在两种选择：

*   创建一个批处理文件来运行 python 脚本
*   尝试将脚本编译成可执行文件

第一个选项是微不足道的。只需像这样创建一个批处理文件：

```
@ECHO OFF
PATH_TO_PYTHON\python.exe PATH_TO_SCRIPT.py 
```

如果您在公司环境中，您可以在网络上安装 python 并创建一个批处理文件以从那里运行脚本。否则，您将需要用户安装 python。如果 python 在他们的路径上，那么批处理文件可以简化为：

```
@ECHO OFF
python PATH_TO_SCRIPT.py 
```

或者，有一些选项可以尝试将脚本编译成 .exe 文件。我从来没有在他们身上取得过任何成功，但[py2exe](http://www.py2exe.org/)似乎是最常见的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:47:35.377

不，我认为你不能合理地期望这样做。

批处理文件由 Windows 命令解释器执行，这是一种更为原始的方式。

Python 是一种成熟的编程语言，具有用于各种任务的丰富而强大的标准模块库。Windows 命令解释器所能做的就是像一个破碎的外壳。

另一方面，Python 在 Windows 上可用，因此只需告诉用户安装它并直接运行您的程序即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-17T18:49:22.773

你可以通过两种方式做到这一点：

1.  创建一个扩展名为 .bat 的普通文本文件并写入

```
@ECHO OFF

"python.exe location" "your file.py location" 
```

2.  创建一个扩展名为 .bat 的普通文本文件并写入

```
"python.exe location" "your file.py location"
pause 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-12-19T07:31:36.827

只需创建一个包含这两行的批处理文件：

```
yourfilename.py
pause 
```

然后通过双击运行批处理文件。

# ios - 绘制的文本突出显示。核心文本？别的什么？

> ID：13179521
> 
> 赞同：1
> 
> 时间：2012-11-01T14:46:22.943
> 
> 标签：ios, iphone, ipad

我想绘制突出显示的文本部分，但我没有任何想法，我该怎么做。

结果，我想要： ![在此处输入图像描述](../Images/fba6e35127a6cf73102adee097afae29.png)

![在此处输入图像描述](../Images/6c32b97614b4060846b3f3aa14d78839.png)

图片上的标题是一个属性字符串，我在其中找到主题标签并将其绘制为蓝色。标题中的昵称 - 一个简单的 NSString。我想显示用户想要查找的矩形和文本。您有什么想法吗，如何在绘制的字符串中找到 NSRange 的 CGRects？

PS：我想检测其他图像作品的最后一个字符的坐标。

# c# - 如何在 c# 的控制台应用程序中将位图保存为 png

> ID：13179522
> 
> 赞同：-1
> 
> 时间：2012-11-01T14:46:26.197
> 
> 标签：c#, bitmap, png, console-application

我正在用 c# 做一个控制台应用程序。在这个应用程序中，我必须创建一个 png 类型的位图，并且它必须存储在某个定义的路径中（比如 C: 或 D: 驱动器）。

在 Windows 应用程序中，我有以下代码来创建位图，它将显示在图片框中。

```
void CreateBitmap()
{
    System.Drawing.Bitmap flag = new System.Drawing.Bitmap(10, 10);
    for( int x = 0; x < flag.Height; ++x )
      for( int y = 0; y < flag.Width; ++y )
        flag.SetPixel(x, y, Color.White);
      for( int x = 0; x < flag.Height; ++x )
        flag.SetPixel(x, x, Color.Red);
    pictureBox1.Image = flag;
} 
```

如何使用控制台应用程序创建并将其存储在指定路径中？

我已将代码更改如下，但仍然存在错误：

```
static void CreatePng(string[] binvalues)
{
    String aName = System.Reflection.Assembly.GetExecutingAssembly().Location;
    String aPath = System.IO.Path.GetDirectoryName(aName);
    string[] ExecDirectories = System.IO.Directory.GetDirectories(aPath);

    System.Drawing.Bitmap flag = new System.Drawing.Bitmap(10, 10);

    for (int x = 0; x < flag.Height; ++x)
        for (int y = 0; y < flag.Width; ++y)
            flag.SetPixel(x, y, Color.White);
    for (int x = 0; x < flag.Height; ++x)
        flag.SetPixel(x, x, Color.Red);
    flag.Save(aPath, System.Drawing.Imaging.ImageFormat.Png);
} 
```

它在 flag.save 似乎有问题的最后一行显示运行时错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:52:14.270

使用相同的代码，而不是分配给 a `PictureBox`，调用`Save()`位图上的方法：

```
flag.Save("yourpath", System.Drawing.Imaging.ImageFormat.Png); 
```

请注意，您可能必须`System.Drawing`在控制台应用程序中添加对的引用，因为默认情况下它不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T09:24:53.680

您可以尝试以下代码-：

```
public bool ResizeImage(string OriginalFilepath, string NewFilepath)
{
  Bitmap original = (Bitmap)Image.FromFile(OriginalFilepath);
  Bitmap resized = new Bitmap(original, new Size(Width,Height));
  resized.Save(NewFilepath.png);      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:52:36.257

现在，我自己从来没有使用 C# 做过这个，所以更倾向于的人可能会提供帮助，但这就是我能找到的。

1）您需要将图像数据存储在`Bitmap`. 从你已经在做的事情来看`flag`

2）您需要在以下位置调用该`save()`函数`Bitmap`：

```
flag.Save(filename, ImageFormat.Png); 
```

3）`filename`将是`String`您定义的。这相当容易，因为您只需让应用程序提示用户输入路径并保存即可。

问题？

免责声明：我从[这个页面](https://stackoverflow.com/questions/2205742/c-sharp-bitmap-save-transparancy-doesnt-save-in-png)收到了我的信息。关于保存可以从中挖掘的png的“正确”方法有很多讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:53:09.360

用这个：

```
flag.Save(filename, System.Drawing.Imaging.ImageFormat.Png); 
```

1.  您不需要将图像添加到`PictureBox`. 您有一个控制台应用程序并且`PictureBox`是一个可视控件。
2.  对于未来的问题，如果您先花最少的时间搜索 SO 或其他来源以获得答案，那就太好了
3.  该问题未正确标记。如果你想保存一个`System.Drawing.Bitmap`它不能被标记`BitmapImage`，因为这仅适用于 WPF。我改变了这个。

# 64-bit - amd64 和 x86 的单独源代码包

> ID：13179523
> 
> 赞同：0
> 
> 时间：2012-11-01T14:46:27.647
> 
> 标签：64-bit, 32bit-64bit, deb, fmod

我正在尝试为 Debian 打包当前稳定版本的[FMOD](http://www.fmod.org "FMOD")。我的问题是 amd64 和 x86 架构有单独的源代码压缩包。如何处理这种情况？

我首先尝试创建单独的 fmodex32 和 fmodex64 包，它们都提供了一个名为的虚拟包，`fmodex`但这种方法失败了，因为 fmodex-dev 应该需要 fmodex 的确切版本。虚拟包永远不会满足对特定版本的依赖。

# tapestry - 如何导入外部 JavaScript 文件？

> ID：13179524
> 
> 赞同：6
> 
> 时间：2012-11-01T14:46:29.020
> 
> 标签：tapestry

我需要导入一个托管在另一台服务器上且不属于我的应用程序资产的 JS 文件。

如何从组件中导入它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:38:43.720

我最终设置了环境并从内部`JavaScriptSupport`调用：`importJavaScriptLibrary``setupRender()`

```
@Environmental
private JavaScriptSupport javaScriptSupport;

public void setupRender() {
    this.javaScriptSupport.importJavaScriptLibrary("URL-to-JS-file");
} 
```

# php - phpMyAdmin - 不显示选择结果

> ID：13179530
> 
> 赞同：5
> 
> 时间：2012-11-01T14:46:51.043
> 
> 标签：php, mysql, phpmyadmin

我的 phpMyAdmin 安装似乎工作得很好。我可以处理数据库和表格，并在表格中插入数据集。

*但*我看不到表中的数据集。如果我尝试通过在表格导航中选择“浏览”来让它显示数据集，我会收到以下消息：

```
Showing rows 0 - 0 ( 1 total, Query took 0.0061 sec) 
```

但是表格仍然是空的，并且没有出现错误消息。

我可以使用 php 获取数据。

*   PHP版本：5.2.6
*   MySQL 版本：5.0.45
*   phpMyAdmin 版本：3.5.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:45:33.243

phpMyAdmin 不允许您浏览空表。在顶部选项卡上浏览或禁用一个大红叉。因此，如果 Browse 在 phpMyAdmin 中可用，那是什么问题。有几次我浏览了一个只有 1 条记录的表，我以为我没有得到结果。在我的匆忙中，我没有意识到有唱片放映。很容易错过 1 行记录。

![在此处输入图像描述](../Images/001599e6429e15ca2edb0565abfbb5b9.png)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T17:18:23.947

我无法在 phpMyAdmin 3.5.4 和 4.0 中重现该问题。如果数据在那里，数据应该是可见的。

你能提供你使用的表结构吗？

无论如何，您应该更新到一些较新的版本，可能是 4.0 或更高版本。随时在[http://sourceforge.net/p/phpmyadmin/bugs上报告问题](http://sourceforge.net/p/phpmyadmin/bugs)

# python - 如何从 dir() 引用其他范围

> ID：13179535
> 
> 赞同：1
> 
> 时间：2012-11-01T14:47:13.967
> 
> 标签：python, introspection

我想知道在其他范围内有什么可用的，或者某个类的实例有多少正在运行，等等。诸如此类的事情。

让它甜蜜而短暂

```
print dir()
def func():
    #print dir(magic_keyword)
    print dir()
func() 
```

用于从函数内部和外部获得相同结果的“magic_keyword”是什么？

我正在检查[在 python 中调用 dir()](https://stackoverflow.com/questions/8109066/calling-dir-in-python)但这个问题从未真正得到回答。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:48:24.230

您正在寻找[`locals()`](http://docs.python.org/2/library/functions.html#locals)和[`globals()`](http://docs.python.org/2/library/functions.html#globals)功能。

`dir()`，不带参数，返回等价的`locals().keys()`。

`globals()`本质上与`locals()`模块范围相同，但在函数中它返回模块范围变量。

```
>>> dir()
['__builtins__', '__doc__', '__name__', '__package__']
>>> locals().keys()
['__builtins__', '__name__', '__doc__', '__package__']
>>> def foo():
...     return locals().keys(), globals().keys()
... 
>>> foo()
([], ['__builtins__', '__name__', 'foo', '__doc__', '__package__']) 
```

# r - R: sapply 打印结果

> ID：13179536
> 
> 赞同：0
> 
> 时间：2012-11-01T14:47:22.687
> 
> 标签：r, sapply

我有这样做的代码：

```
sapply(unique(groups.50),function(g)data$SEQUENCE_ID[groups.50 == g]) 
```

但是在 RGui 窗口中，我只能向上滚动查看一些结果。前 10 个左右没有显示在窗口中（可能是因为我的数据太大）。如何让它显示所有内容，或者如何打印前 10 个结果？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:02:02.013

对于滚动浏览大型数据集，`page`函数 with`method='print'`也非常方便。它还有一个额外的好处，就是不会让您的命令历史记录与输出混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:50:29.850

你可以试试

```
x<-sapply(unique(groups.50),function(g)data$SEQUENCE_ID[groups.50 == g])
head(x) 
```

但是您可能应该改用tapply？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:49:36.977

假设您的函数输出是一个向量，将其保存到一个对象，然后是子集：

```
a <- sapply(unique(groups.50),function(g)data$SEQUENCE_ID[groups.50 == g])
a[1:10] 
```

或使用`head`：

```
head(sapply(unique(groups.50),function(g)data$SEQUENCE_ID[groups.50 == g]),n=10) 
```

# ios - 自动旋转适用于 iOS 6，但在 iOS 5 中会出现奇怪的行为

> ID：13179541
> 
> 赞同：0
> 
> 时间：2012-11-01T14:47:35.363
> 
> 标签：ios, ios5, ios6, autorotate

我似乎遇到了与这篇文章相反的问题：

[iOS 6 中的自动旋转有奇怪的行为](https://stackoverflow.com/questions/12526054/autorotate-in-ios-6-has-strange-behaviour)

当我向 Apple 提交我的付费应用程序时，XCode 让我在我的测试设备上更新到 iOS 6。我使用 XCode 中的 GUI 将我的应用程序设置为仅在 iPhone 上以纵向模式显示，在 iPad 上仅以横向模式显示。这适用于我的 iOS 6 iPhone 和 iPad。然而，在 iOS 5 中，iPad 允许应用程序旋转到纵向，将我的按钮显示在不应该存在的类似信箱的黑色区域中，并且反复崩溃。

我正在使用导航控制器和情节提要。

我知道 shouldAutorotateToInterfaceOrientation 在 iOS 6 中已被弃用，但认为它仍应在 iOS 5 中调用，我尝试了以下操作：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        if ((UIDeviceOrientationIsLandscape(UIDeviceOrientationLandscapeLeft))||(UIDeviceOrientationIsLandscape(UIDeviceOrientationLandscapeRight))) {
            return YES;
        }
        else return NO;
    }
    else
    {
        if ((UIDeviceOrientationIsLandscape(UIDeviceOrientationPortrait))||(UIDeviceOrientationIsLandscape(UIDeviceOrientationPortraitUpsideDown))) {
            return YES;
        }
        else return NO; }
    // Return YES for supported orientations
} 
```

上面的代码似乎什么也没做。我把它放在我的每个视图控制器中；看来我真的应该把它放在我的导航控制器中，但是因为我以图形方式设置它，我不知道该怎么做。我必须继承我的导航控制器并在代码中完成所有事情吗？必须有一种方法可以为此使用情节提要设置！

（注意：我没有使用 AutoLayout 并且显然不能，因为我包含了一些不喜欢它的软件。）

这可能是什么原因造成的？我想在太多人购买该应用程序并抱怨之前修复它！提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:59:12.053

我认为代码应该是这样的，在你使用“ **interfaceOrientation** ”的地方，将参数传递给方法进行比较：

```
 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    if ((UIDeviceOrientationIsLandscape(interfaceOrientation))||(UIDeviceOrientationIsLandscape(interfaceOrientation))) {
        return YES;
    }
    else return NO;
}
else
{
    if ((UIDeviceOrientationIsLandscape(interfaceOrientation))||(UIDeviceOrientationIsLandscape(interfaceOrientation))) {
        return YES;
    }
    else return NO; } 
```

# 32bit-64bit - Eclipse 在使用 inttypes.h 中的 PRId64 时显示语法错误

> ID：13179552
> 
> 赞同：3
> 
> 时间：2012-11-01T14:48:05.930
> 
> 标签：32bit-64bit, eclipse-cdt

当我做

```
#include <inttypes.h>
long long value = 0;
printf("An 8 byte long integer value: %"PRId64".", value); 
```

Eclipse 在 printf 行中显示了一个语法错误。有人知道如何摆脱它吗？这是我所知道的让 printf 同时在 32 位和 64 位架构上工作的唯一方法，而且每隔几行就会出现 Eclipse 错误，这使得很难看到真正的问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T13:58:52.447

[这个问题在这里](http://www.eclipse.org/forums/index.php/mv/msg/458015/1018221/#msg_1018221)得到了回答。

您需要在 Project Properties->C/C++ General->Paths and Symbols 中添加 __STDC_FORMAT_MACROS。

# wordpress - CMS 追踪工具

> ID：13179553
> 
> 赞同：-4
> 
> 时间：2012-11-01T14:48:11.780
> 
> 标签：wordpress, joomla, content-management-system, e-commerce, virtuemart

我正在为货运（货物）转运/物流公司开发网站。它将基于 CMS（Joomla 或 Wordpress）。我需要的是具有此功能的组件/插件（可以是商业的）：（不必完全以这种方式工作）它可以是简单的电子商务/virtuemart 扩展，无论它是否接近。

1.  客户端登录
2.  添加他的跟踪号（货物/订单号）
3.  他将看到他的货物状态和当前位置。

货物状态可以通过管理员在 CMS 后端手动管理。

不必完全以这种方式工作，但基本思想是这样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:00:08.313

joomla 或 wordpress 无关紧要，这些都是您必须做的事情。

在开始之前，巩固您的业务目标：

您是否完全了解您要实现的业务成果和目标？您了解如何衡量实施的成功吗？示例：销售和营销指标。

快速资格：

该扩展是否适用于您的 Joomla 版本？扩展是否属于预期类别？扩展品牌名称有多受欢迎？什么是扩展类型（组件、模块、插件）？您是否列出了可能的扩展选择的长短列表？扩展是否满足您的托管要求？扩展是 GPL 吗？扩展是否编码？是否对部分或所有文件进行了编码？官方 Joomla 资源目录上的扩展评分是多少？评分数是多少？扩展受欢迎程度和下载量是多少？

满足业务目标的关键功能：

功能 A) < 在此输入您的具体功能要求 > 功能 B) < 在此输入您的具体功能要求 > 功能 C) < 在此输入您的具体功能要求 > 功能 D) < 在此输入您的具体功能要求 > 功能 E) < 在此输入您的具体功能要求此处的具体功能要求 >

其他次要特点：

您是否了解您需要的全部功能列表（验证码类型、嵌入文章的能力、数据库存储、确认、样式选项……）是否不必要地使站点安装复杂化（例如：工作扩展，而您只有 3-4 个工作)?

安全问题/类似诈骗的互联网做法：

您了解与安装此扩展程序相关的安全问题和问题吗？开发商/公司可以信任吗？公司在线声誉如何？他们的扩展是否列在 Joomla 扩展目录中？扩展存在多长时间了？扩展是否包含或需要反向链接？它们是隐藏链接吗？广告插入控制面板或前端？分机是否包含回拨功能？只有当扩展程序可以在没有开发人员服务器连接的情况下正常工作时，他们才会受到欢迎，可以在没有 call home 的情况下安装它，并且它只调用 home 进行版本检查。扩展的公共版本是否包含安全风险？它是否列在易受攻击的扩展列表中？

法律/许可

它是否限制每个域/安装的使用？它是否限制扩展的分布？是否需要保密协议？它是否将非 GPL 媒体文件的使用限制为域/安装？JED 中没有列出扩展名吗？它是否限制每个域/安装的支持？是否需要付费才能删除所有者可见或隐藏的链接？

用户体验

它是否为网站访问者提供专业的用户体验？网站管理员的用户体验是什么？

搜索引擎优化

扩展是否遵循最佳行业 SEO 实践？扩展是否支持搜索引擎友好的 URL？

社区

扩展是否具有稳固和有利的社区观点？

演示

有演示版还是轻量版？

作者/公司

什么是扩展网站？谁是开发人员或开发团队？扩展路线图是什么？官方扩展容易下载吗？是否有常见问题解答、书面教程和培训？

测试安装

在您的测试安装中尝试扩展之前，您是否准备好测试安装来评估扩展？

最初设定

你了解如何设置测试安装，有时间、资源、知识、经验等吗？您是否必须手动复制扩展文件才能安装？

维护

扩展是否易于维护？扩展容易更新吗？最后一个版本是什么时候发布的？安全补丁是否及时发布？扩展开发的阶段是什么？扩展是否会修改 Joomla 核心文件？您是否必须将文件/文件夹权限设置为 777 才能安装和运行？卸载扩展程序后，站点或管理员是否返回错误？扩展团队是否提供良好的技术支持？

成本

扩展是免费/商业的吗？该插件是否需要一次性付款或会员订阅？

阅读有关[如何选择 Joomla 的更多信息！扩展](http://khmerjoomla.org/tutorial/joomla-artilces/37-joomla-tutorial/75-how-to-choose-a-joomla-extensions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:40:59.370

您可以使用任何评价良好的 Joomla 表单组件来做到这一点，您可以在[http://extensions.joomla.org找到这些组件](http://extensions.joomla.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:26:41.800

如果您最终使用 Joomla，请查看名为 Fabrik - [http://www.fabrikar.com](http://www.fabrikar.com)的扩展程序，这将使您能够维护自定义条目列表（数据库表）并让最终用户能够搜索通过它（按各个字段过滤）。您可以根据用户名等限制每个用户可以看到哪些记录（货件）。

我已经为货运代理创建了一些网站，包括货物跟踪站点和一件事我可以肯定地说 - 如果他们已经使用 TMS（运输管理系统），他们已经拥有跟踪/状态信息，他们不会喜欢在另一个系统中双重输入的想法。如果此数据在其他地方可用并在那里实时跟踪，Fabrik 很容易配置为连接到外部数据库。

看他们的教程，真的很强大。祝你好运。

# c# - 通过 [] 运算符访问字符串中的 char 更快还是通过 [] 运算符访问 char[] 中的 char 更快？

> ID：13179554
> 
> 赞同：3
> 
> 时间：2012-11-01T14:48:14.743
> 
> 标签：c#, string, performance

我有一个简单的问题。我正在使用`string`C# 中的一个巨大的东西，我反复浏览它并通过`[]`运算符访问单个字符。将`string`a 转换为 a`char[]`并在数组上使用`[]`运算符`char`更快还是我的方法更快？还是两者都一样？我希望我的程序快速成为前沿。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T14:50:31.717

如果您需要*绝对最快*的实现，那么您可以`unsafe`使用指针：

```
string s = ...
int len = s.Length;
fixed (char* ptr = s)
{
   // talk to ptr[0] etc; DO NOT go outside of ptr[0] <---> ptr[len-1]
} 
```

然后避免范围检查**，但是**：

*   需要`unsafe`
*   如果你越界，你是罪魁祸首

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:51:21.440

首先：你应该*测量*. 没有人可以在没有测量的情况下明确回答这个问题。

在这种特殊情况下，一切都表明`string`直接访问更好：字符串在几乎每种语言中都被实现为字符数组，并且`char[]`手动将字符串转换为需要立即分配另一个*巨大*的内存量。那可不好。

但我不会相信我自己的话。*测量*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:51:22.490

`string`将 a 转换为的一个明显缺点`char[]`是需要复制：由于 C# 中的字符串是*不可变*的，而数组是*可变*的，因此您的代码最终会复制整个巨大的字符串！这几乎肯定会使转换后的潜在速度增益（如果有的话）相形见绌。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-01T14:50:22.350

`string` *是*`char[]`引擎盖下的数组。所以从字面上看没有区别。

这里更大的问题是，试图在堆栈中优化这一点可能是浪费时间，在其他地方可能会有更好的改进。

# ruby - Dojo BorderContainer 小部件不会呈现

> ID：13179556
> 
> 赞同：0
> 
> 时间：2012-11-01T14:48:21.017
> 
> 标签：ruby, ruby-on-rails-3, dojo

我用 Maqetta 创建了一个布局。现在我想将逻辑添加到布局中。因此，我从 Maqetta 下载了整个工作区并将文件/库导入到一个新的 Rails 项目中。起初我遇到了一些问题，Rails 没有加载 dojo,js 文件，但我已经解决了这个问题。
现在我有另一个问题。页面不会呈现。除了一个小部件（一个按钮）之外，我已经将所有内容都注释掉了，这很好用。但是，如果我撤消此操作，则不会发生任何事情。不幸的是，我也没有从 dojo 收到任何警告/错误或类似的东西。
经过一番尝试，我更改了 parseOnLoad 属性，现在我收到了警告：

> 未处理的错误：尝试使用 id==appLayout 注册小部件，但该 id 已注册

这是包含标签：

```
<%= javascript_include_tag "lib/dojo/dojo/dojo", :'data-dojo-config' => "'async':true,
        'packages':[{'name':'maqetta','location':'../../maqetta'},{'name':'gridx','location':'../gridx'},{'name':'clipart','location':'../../clipart'},{'name':'shapes','location':'../../shapes'},
        {'name':'maqettaSamples','location':'../../../samples'},{'name':'zazl','location':'../../zazl'},{'name':'widgets','location':'../../custom'}]" %> 
```

这是 HTML 部分（我已经简化了它，现在我只是使用教程中的示例）：

```
<body class="claro" data-maq-flow-layout="true" data-maq-ws="collapse" id="myapp" data-maq-appstates="{}">

<input type="button" data-dojo-type="dijit.form.Button" intermediateChanges="false" label="Search" iconClass="dijitNoIcon" onclick="alert('hi');"></input>
<div
id="appLayout" class="demoLayout"
data-dojo-type="dijit/layout/BorderContainer"
data-dojo-props="design: 'headline'">
    <div
    class="centerPanel"
    data-dojo-type="dijit/layout/ContentPane"
    data-dojo-props="region: 'center'">
        <div>
            <h4>Group 1 Content</h4>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
        <div>
            <h4>Group 2 Content</h4>
        </div>
        <div>
            <h4>Group 3 Content</h4>
        </div>
    </div>
    <div
    class="edgePanel"
    data-dojo-type="dijit/layout/ContentPane"
    data-dojo-props="region: 'top'">Header content (top)</div>
    <div
    id="leftCol" class="edgePanel"
    data-dojo-type="dijit/layout/ContentPane"
    data-dojo-props="region: 'left', splitter: true">Sidebar content (left)</div>
</div> 
```

这是解析器：

```
require(["dojo/parser","dojo/domReady!"], function(parser){
     parser.parse();
}); 
```

我现在尝试了几个小时，但我仍然像一开始一样一无所知。有人知道我可以尝试什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:58:44.633

> 未处理的错误：尝试使用 id==appLayout 注册小部件，但该 id 已注册

这个错误是因为你解析了两次。一次加载，第二次在 require 语句中。第二个解析将尝试注册具有相同 id 的第二个小部件，因此出现错误。

删除其中一个解析调用，并为边框容器指定特定的宽度和高度。

```
<div id="appLayout" class="demoLayout" 
  data-dojo-type="dijit/layout/BorderContainer"
  data-dojo-props="design: 'headline'"     
  style="width: 800px; height: 400px"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:40:43.937

请参阅[http://livedocs.dojotoolkit.org/dijit/layout/BorderContainer#setting-sizes](http://livedocs.dojotoolkit.org/dijit/layout/BorderContainer#setting-sizes)，最近的父级为`hasLayout`真（例如位置：相对）必须设置宽度+高度。此外，为 BorderContainer 设置宽度+高度。

# android - Android如何将PDF文件作为字节数组传递给意图

> ID：13179559
> 
> 赞同：4
> 
> 时间：2012-11-01T14:48:21.810
> 
> 标签：android, pdf, tags

我有一个活动允许用户使用默认的 pdf/电子书查看器打开加密的 pdf 文件。加密的pdf文件的解密结果是一个字节数组。我想将该字节数组传递给以 PDF 格式打开该字节数组的意图。意图实例化是这样的：

```
PackageManager pm = PackageManager;
Intent intentPdf = pm.GetLaunchIntentForPackage("com.adobe.android"); 
```

这可能吗？pdf阅读器（Adobe /任何其他）可以从字节数组中理解它是PDF文件吗？我尝试使用 Bundle.PutByteArray 和 Intent.putExtra 但它不起作用。

```
var bundle = new Bundle();
bundle.PutByteArray("key", inputFileData);
intentPdf.PutExtra("name", bundle);
StartActivity(intentPdf); 
```

inputFileData 是我的字节数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:53:03.333

我认为捆绑包的最大大小非常小，最好将 URI 传递给解密的 pdf 的 pdf 阅读器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T23:21:39.140

> pdf阅读器（Adobe /任何其他）可以从字节数组中理解它是PDF文件吗？

可能不是。欢迎您联系这些应用程序的开发人员并询问他们。而且，正如其他人指出的那样，由于尺寸问题，这是一个坏主意。此外，如果您启动的 PDF 查看器碰巧启动了自己的任务，[您的字节数组将可以被设备上的任何应用程序读取](http://commonsware.com/blog/2011/06/30/warning-activity-intent-extras-public.html)。

或者，欢迎您使用`ContentProvider`像[这样](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe)的，您可以在其中制定一些一次性`Uri`结构，因此一旦 PDF 查看器使用`Uri`，其他任何东西都不能。

或者，欢迎您编写自己的基于字节数组的 PDF 查看器。

# c# - 在 WPF 中创建曲线控件

> ID：13179562
> 
> 赞同：1
> 
> 时间：2012-11-01T14:48:29.487
> 
> 标签：c#, wpf

可以在 WPF 中创建一个看起来像这样的控件（例如按钮）吗？

![曲线控制](../Images/d23a3fedd540a9f99c1bb980a18f28be.png)

实际上，我想绘制 4 个按钮，以便将它们定位为一个圆圈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:30:35.050

以下 XAML 可能会让您大致了解如何从按钮模板中的路径开始。然而，它错过了一些重要的东西，比如 MouseOver 和 Pressed 状态的视觉反馈。

```
<Grid>
    <Grid.Resources>
        <StreamGeometry x:Key="SegmentGeometry">M 5,0 A 10,10 0 0 0 15,10 L 15,15 A 15,15 0 0 1 0,0 Z</StreamGeometry>
        <ControlTemplate x:Key="ButtonTemplate">
            <Viewbox>
                <Path Fill="Transparent" Stroke="Black" StrokeThickness="1"
                      Data="{StaticResource SegmentGeometry}"/>
            </Viewbox>
        </ControlTemplate>
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Template" Value="{StaticResource ButtonTemplate}"/>
        </Style>
    </Grid.Resources>
    <Button Width="100" Height="100" Style="{StaticResource ButtonStyle}">
        <Button.LayoutTransform>
            <RotateTransform Angle="135"/>
        </Button.LayoutTransform>
    </Button>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:35:05.657

使用坐标/路径/几何图形并不简单。尝试使用Microsoft 的[Expression Blend](http://www.microsoft.com/expression/products/Blend_Overview.aspx)。它是一个类似于 Photoshop 的 UI，但仅适用于 Xaml。:)

# python - 如何让 VBO 与 Python 和 PyOpenGL 一起工作

> ID：13179565
> 
> 赞同：10
> 
> 时间：2012-11-01T14:48:33.880
> 
> 标签：python, opengl, pygame, vbo, vertex-buffer

以下 Python 程序应在窗口的右上象限中绘制一个白色三角形。

```
import pygame
from OpenGL.GL import *
from ctypes import *

pygame.init ()
screen = pygame.display.set_mode ((800,600), pygame.OPENGL|pygame.DOUBLEBUF, 24)
glViewport (0, 0, 800, 600)
glClearColor (0.0, 0.5, 0.5, 1.0)
glEnableClientState (GL_VERTEX_ARRAY)

vertices = [ 0.0, 1.0, 0.0,  0.0, 0.0, 0.0,  1.0, 1.0, 0.0 ]
vbo = glGenBuffers (1)
glBindBuffer (GL_ARRAY_BUFFER, vbo)
glBufferData (GL_ARRAY_BUFFER, len(vertices)*4, (c_float*len(vertices))(*vertices), GL_STATIC_DRAW)

running = True
while running:

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    glClear (GL_COLOR_BUFFER_BIT)

    glBindBuffer (GL_ARRAY_BUFFER, vbo)
    glVertexPointer (3, GL_FLOAT, 0, 0)

    glDrawArrays (GL_TRIANGLES, 0, 3)

    pygame.display.flip () 
```

它不会抛出任何错误，但不幸的是它不会绘制三角形。

我还尝试将缓冲区数据作为 NumPy 数组提交：

```
glBufferData (GL_ARRAY_BUFFER, len(vertices)*4, np.array (vertices, dtype="float32"), GL_STATIC_DRAW) 
```

也没有绘制三角形。PyOpenGL... YU NO 绘制 VBO 吗？

我的系统：Python 2.7.3；OpenGL 4.2.0；Linux Mint Maya 64 位

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T15:15:17.130

好的，我刚刚找到它：

调用的第 4 个参数`glVertexPointer`必须`None`表示一个 NULL 指针

```
glVertexPointer (3, GL_FLOAT, 0, None) 
```

我发誓，我昨晚搜索了几个小时并没有看到。

# asp.net - 选择文本后 IE 9 浏览器冻结

> ID：13179566
> 
> 赞同：0
> 
> 时间：2012-11-01T14:48:45.113
> 
> 标签：asp.net

在asp.net中选择文本“示例数据”禁用文本框后，IE 9浏览器冻结

`<asp:TextBox ID="FirstName" runat="server" Text="Sample Data" Enabled="false" />`

# javascript - 如何在 iScroll 中使用嵌套列表/保护内部滚动动作的外部滚动？

> ID：13179573
> 
> 赞同：3
> 
> 时间：2012-11-01T14:48:58.193
> 
> 标签：javascript, iscroll

我想要一个可滚动的容器，它使用 iScroll4 托管一个可滚动的列表。我让一切都靠自己运行：

[http://jsfiddle.net/BH2F3/](http://jsfiddle.net/BH2F3/)

（预览版无法使用，请下载本地试用）

现在的问题是：

当我在列表上执行滚动操作时，外部容器也会滚动。如何保护外部容器不滚动并仅将滚动操作应用于嵌套列表？我已经尝试“捕捉”到列表但没有成功。我必须绑定到“onBeforeScrollStart”吗？

官方实现是 : `onBeforeScrollStart: function (e) { e.preventDefault(); }`，所以我希望外部容器不会滚动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:48:58.193

刚发现：

这不是默认预防问题，而是事件冒泡问题。

解决方案是覆盖 onBeforeScrollStart ！

```
 onBeforeScrollStart: function (e) { 
            e.preventDefault();
            e.stopPropagation();
            }, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-09T01:17:36.803

对于当前版本，该事件`beforeScrollStart`没有参数`event`。这可以通过以下方式完成：

```
iscroll.on('beforeScrollStart', function() {
    scroll.disable();
});
iscroll.on('scrollEnd', function() {
    scroll.enable();
}) 
```

# css - 无论文本长度如何，都将图像定位在最右侧

> ID：13179576
> 
> 赞同：0
> 
> 时间：2012-11-01T14:49:04.433
> 
> 标签：css

我希望图像位于 200px 跨度的最右侧。相反，它位于“hello”文本的末尾，并且由于“hello”小于 200px，因此它不会位于 200px 跨度的最右侧。

```
<span>Hello</span>

span {
   background-image: url("image.gif");
   background-position:right center; 
   background-repeat: no-repeat;
   min-width: 200px;
   width: 200px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:55:52.683

您不能在跨度（内联元素）上设置宽度。

将其设置为`display: inline-block`，它将起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T15:01:49.370

从我所见，似乎没有理由将跨度保持在 200 像素。如何在右侧添加一些与图像大小相同的填充，再加一点？例如，如果您的 image.gif 为 16px 宽，则执行以下操作：

```
padding-right:20px; 
```

并摆脱宽度和最小宽度。这样您就不必担心显示和浏览器兼容性问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:53:51.013

如果您的设计允许，我会尝试制作 span display = block。

```
span  {
    display:block;
    background-image: url("image.gif");
    background-position:right center; 
    background-repeat: no-repeat;
    min-width: 200px;
    width: 200px;} 
```

我认为您可能必须这样做才能让 SPAN 尊重宽度。不幸的是，它会将下一组元素踢到下一行。

# vim - 如何检查 SuperTab 和 jedi-vim 是否被激活？

> ID：13179582
> 
> 赞同：5
> 
> 时间：2012-11-01T14:49:30.080
> 
> 标签：vim, supertab, jedi-vim

如标题所述，如何检查插件是否已加载？

当我点击*制表符*（对于 SuperTab）时，我得到的只是插入文件中的普通字符“制表符”，当我点击*ctrl-space*时，我只是被抛出插入模式（与点击*ESC*的行为相同）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T14:58:48.737

该`:scriptnames`命令列出了所有已获取的脚本；检查其输出中的插件名称。如果丢失，则可能是由于安装错误或`'runtimepath'`不正确。

或者，如果您知道插件应该定义的映射

```
:verbose imap <Tab> 
```

将显示映射以及设置的脚本。

以编程方式，最好检查规范的包含保护`if exists('g:loaded_pluginname')`或通过`if exists(':PluginCommand')`.

# android - 在运行时更改选项菜单 - invalidateOptionsMenu()

> ID：13179589
> 
> 赞同：24
> 
> 时间：2012-11-01T14:49:48.107
> 
> 标签：android, menu

我正在创建一个菜单，其中一个项目用于锁定对象。单击此项目时，应使用按钮重新创建菜单以解锁该项目。我为此创建了两个菜单。这工作正常。我读到在 Android 版本 >= 11 中，在显示菜单时不再调用 onPrepareOptionsMenu，我必须调用 invalidateOptionsMenu()。所以我将构建目标（在清单和属性中）更改为 11，并在 4.0.3 的 AVD 上运行应用程序。该程序仍然运行良好，但我认为它不应该了，我应该检查一下

```
if (Build.VERSION.SDK_INT >= 11)
{
  invalidateOptionsMenu();
} 
```

这是我的代码：

```
public class MainActivity3 extends Activity{

    boolean locked;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        locked = false;
    }

      @Override
      public boolean onCreateOptionsMenu(Menu menu){
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.changing_menu1, menu);

            return true;
        }

        @Override
        public boolean onPrepareOptionsMenu(Menu menu) {

            menu.clear();
            MenuInflater inflater = getMenuInflater();

            if (locked) {
                inflater.inflate(R.menu.changing_menu2, menu);
            }
            else {
                inflater.inflate(R.menu.changing_menu1, menu);
            }

        return super.onPrepareOptionsMenu(menu);
        }

        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {

          case R.id.Menu1:
          break;

          case R.id.Menu2 :
          break;

          case R.id.Menu3 :
          locked = !locked;
          break;

           }
        return true;
        }
} 
```

所以菜单仍然在 4.0 中刷新/重新创建。我对 invalidateOptionsMenu(); 的用法有误解吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-01T15:35:19.740

`invalidateOptionsMenu()`被添加以使我们能够强制`onCreateOptionsMenu()`再次调用。 `onPrepareOptionsMenu()`每次调用菜单时仍然调用。

您在上面尝试实现的是何时使用的一个很好的示例， `invalidateOptionsMenu()`但由于向后兼容，您需要同时执行以下操作：

```
if (Build.VERSION.SDK_INT >= 11) {
  invalidateOptionsMenu();
}

@Override
public boolean onCreateOptionsMenu(Menu menu){
    if (Build.VERSION.SDK_INT >= 11) {
        selectMenu(menu);
    }
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if (Build.VERSION.SDK_INT < 11) {
        selectMenu(menu);
    }
    return true;
}

private void selectMenu(Menu menu) {
    menu.clear();
    MenuInflater inflater = getMenuInflater();

    if (locked) {
        inflater.inflate(R.menu.changing_menu2, menu);
    }
    else {
        inflater.inflate(R.menu.changing_menu1, menu);
    }
} 
```

# html - html idml 查看器

> ID：13179590
> 
> 赞同：4
> 
> 时间：2012-11-01T14:49:56.967
> 
> 标签：c#, html, idml

我正在尝试实现一个[c#](/questions/tagged/c%23 "显示标记为“c#”的问题") idml 到 html 转换器。我设法生成了一个类似于 indesign 导出生成的单个平面 html 文件。

我想做的是生成与 indesign 视图尽可能相似的 html，例如 html idml 查看器。为此，我需要找到适合文本框的文本，我可以提取故事文本内容，但我真的找不到将这些内容拆分为框架/页面的方法。

有什么办法可以实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:13:56.800

仅仅从故事中提取文本是不够的。文本的布局方式由`TextFrames`文档控制`Spread`。每个`TextFrame`都有一个`ParentStory`属性，显示它从哪个故事加载文本，每个框架都有决定布局的尺寸。对于无线程的文本框架（即一个故事 <> 一个框架），这就是您所需要的。

对于螺纹框架，您需要使用`PreviousTextFrame`和`NextTextFrame`属性来创建链。IDML 中没有任何内容可以告诉您在线程链中的每个帧中适合多少文本，您需要根据计算出的文本尺寸（或使用蛮力试错法）自己进行计算。

您可以在主 designmap.xml 中找到价差：

```
<idPkg:Spread src="Spreads/Spread_udd.xml" /> 
```

并且展开将包含一个或多个 TextFrame 节点：

```
<Spread Self="udd" ...>
    <TextFrame Self="uf7" ParentStory="ue5" PreviousTextFrame="n" NextTextFrame="n" ContentType="TextType">...</>
    ...
</Spread> 
```

这将反过来链接到一个特定的故事：

```
<Story Self="ue5" AppliedTOCStyle="n" TrackChanges="false" StoryTitle="$ID/" AppliedNamedGrid="n">...</> 
```

（在此示例中，帧没有线程化，因此`'n'`值。

所有这些都在 IDML 文档中，您可以在此处与其他 InDesign 开发人员文档一起找到：http: [//www.adobe.com/devnet/indesign/documentation.html](http://www.adobe.com/devnet/indesign/documentation.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T14:15:21.750

Microsoft 和 Adob​​e 提出了一个名为 Regions 的新 CSS 模块，它允许您将 tekst 流式传输到多个容器中。请记住，您将永远无法创建看起来与 Indesign 文档完全相同的 html 页面。

[http://www.w3.org/TR/css3-regions/](http://www.w3.org/TR/css3-regions/)

目前只有 IE10 和 webkit nightly 支持：[http ://caniuse.com/#feat=css-regions](http://caniuse.com/#feat=css-regions)

# php - 需要一次 php 函数和变量

> ID：13179599
> 
> 赞同：1
> 
> 时间：2012-11-01T14:50:35.290
> 
> 标签：php, function, variables, require

我正在寻找一些使用 PHP 函数的帮助。目前我的网站结构如下：

索引.php：

```
<?php   
require_once( 'page_elements.php' );
?>
<body>

<?php echo content();?>

</body> 
```

page_elements.php：

```
<?php
function content() {
?>
<div class='main'> 
  <img class='main' src="<?=$ImgName?>"> </img> 
</div>
<?php
} ?> 
```

if 语句：

```
if (isset($_SESSION['basket_total']))
{

$basket_total = $_SESSION['basket_total'];

if($basket_total !== '0')
{

    $ImgName = 'img/basket.php';    

}
else
{

    $ImgName = 'img/basket_empty.php';

}
} 
```

我想要做的是能够在函数 content() 中不涉及的 if 语句中定义 $ImgName 但如果我将它包含在另一个文件中，包括 'if_statement.php' 或另一个函数，那么它不会'不认识变量。

抱歉，这是我第一次构建这样的网站，我发现它有点混乱。

提前喝彩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:55:52.223

首先，你不要用另一个“img”标签关闭一个“img”标签......

```
function content(){
    echo'
    <div class="main">
        <img class="main" src="'.$imgname.'" alt="" title="">
    </div>
    ';
} 
```

是正确的做事方式。现在关于您的问题，我无法理解您的目标，但是您的意思可能是a.la ...

```
function content(){
    $imgname = include "file.php";
    echo'
    <div class="main">
        <img class="main" src="'.$imgname.'" alt="" title="">
    </div>
    ';
} 
```

而 if_statement.php 将类似于...

```
if(isset($_SESSION['basket_total'])){
    return $_SESSION['basket_total'];
}else{
    return "img/basket.php";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:58:11.310

这将解决您当前遇到的问题，但我会喜欢上面建议的 Ionut Flavius Pogacian 并研究 MVC

```
<?php   
    require_once( 'page_elements.php' );
    $image_name = "batman.jpg";
?>
<body>
    <?php echo content($image_name);?>
</body> 
```

page_elements.php：

```
<?php
function content($image_name) {
?>
<div class='main'> 
  <img class='main' src="<?=$image_name?>" /> 
</div>
<?php
} ?> 
```

# javascript - 使用 jquery 修改克隆的 html

> ID：13179602
> 
> 赞同：0
> 
> 时间：2012-11-01T14:50:43.460
> 
> 标签：javascript, jquery, ajax

我正在尝试打开一个不错的弹出窗口来编辑域对象。

为此，我在页面上的不可见 div 中隐藏了一个弹出模板。当用户单击按钮时，我尝试使用 ajax 加载域对象，填充模板并显示它。

问题是只有模板内的第一个字段被填充。

模板：

```
 <div class="popup" id="addDriverPopup">
        <div class="close"></div>

        <hr class="both"/>

        <div class="container  radius">
            <form action="/driver/manageDriver" method="post" name="driverForm" id="driverForm" >
                <input type="hidden" name="id" id="id" value="" />
                <div class="title"><span>Uus autojuht </span><hr class="line"/></div>
                <p class="name">Nimi </p>
                <p class="input"><input type="text" name="firstName" id="firstName" value="" /></p>

                <p class="name">Perekonna nimi </p>
                <p class="input"><input type="text" name="lastName" id="lastName" value="" /></p>
                <p class="name">Isikukood </p>
                <p class="input"><input type="text" name="personalId" id="personalId" value="" /></p>
                <p class="name">Telefoni number </p>
                <p class="input"><input type="text" name="phoneNumber" id="phoneNumber" value="" /></p>
            </form>

        </p>
        </div>
    </div> 
```

Javascript：

```
 $jq.ajax({
  url: 'show',
  dataType: 'json',
  data: {driverId: driverId},
  success: function( data ) {
        var popup = $jq('#addDriverPopup').clone();
        popup.find("#id").val(data.id);
        popup.find("#firstName").val(data.firstName);
        popup.find("#lastName").val(data.lastName);
        popup.find("#personalId").val(data.personalId);
        popup.find("#phoneNumber").val(data.phoneNumber);

        alert(popup[0].innerHTML); // only id field is field in the template.

  },
  error: function(xhr, error) {
      alert(error);
      unblockUI();
  }
}); 
```

警报（）的输出：

```
 <div class="close"></div>
        <hr class="both">

        <div class="container  radius">
            <form action="/driver/manageDriver" method="post" name="driverForm" id="driverForm">
                <input name="id" id="id" value="1271672" type="hidden">
                <div class="title"><span>Uus autojuht </span><hr class="line"></div>
                <p class="name">Nimi </p>
                <p class="input"><input name="firstName" id="firstName" value="" type="text"></p>
                <p class="name">Perekonna nimi </p>
                <p class="input"><input name="lastName" id="lastName" value="" type="text"></p>
                <p class="name">Isikukood </p>
                <p class="input"><input name="personalId" id="personalId" value="" type="text"></p>
                <p class="name">Telefoni number </p>
                <p class="input"><input name="phoneNumber" id="phoneNumber" value="" type="text"></p>
            </form>
        <p></p>
        </div> 
```

从服务器返回的数据：

```
{"id":1271745,"firstName":"Burak","lastName":"Torum","personalId":"123456","phoneNumber":"123456"} 
```

我仔细检查了元素 ID 是否有错别字。调试显示找到了正确的元素。

我错过了什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:57:54.267

尝试改变

```
alert(popup[0].innerHTML); 
```

到

```
alert(popup.html()); 
```

此外，我在您提供的代码中没有看到“#addDriverPopup”元素……是在 DOM 上的某个地方吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:58:42.267

是由什么`#addDriverPopup`制成的？

问题可能是ID冲突。因为您正在克隆，所以您最终会得到多个具有相同值的 id。

结果可能只是某种冲突。可能要考虑上课。

根据我下面的评论：

```
$jq.ajax({
  url: 'show',
  dataType: 'json',
  data: {driverId: driverId},
  success: function( data ) {

        $("#id").val(data.id);
        $("#firstName").val(data.firstName);
        $("#lastName").val(data.lastName);
        $("#personalId").val(data.personalId);
        $("#phoneNumber").val(data.phoneNumber);

        $jq('#addDriverPopup').dialog({
                 close: function(){
                       //Do stuff here to clean up, this syntax may be a bi
                      }
        });

  },
  error: function(xhr, error) {
      alert(error);
      unblockUI();
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:00:50.167

正如@rcdmk 的问题评论中所指出的，这似乎是一个平台问题。

我不得不重构代码以将可编辑的表单而不是 json 返回给客户端。解决方案不太优雅，但跨平台:)

# sql - 具有空值的计算列

> ID：13179603
> 
> 赞同：1
> 
> 时间：2012-11-01T14:50:50.363
> 
> 标签：sql, sql-server

我正在创建一个视图（使用 MS sql 2008），并将计算字段创建为`COLUMN1 + COLUMN2`. 一切都很好，但是：两者`COLUMN1`都可`COLUMN2`以为 NULL。

我想遵循以下规则：

*   2 + 2 = 4
*   2 + 空 = 2
*   空 + 2 = 2
*   0 + 0 = 0
*   空 + 空 = 空

如果我使用 ISNULL(column2, 0)，那么将遵循所有规则，但不会遵循最后一条。

我需要如何创建视图

```
CREATE VIEW dbo.test
AS
SELECT COLUMN1, COLUMN2, (????????) AS CALCULATEDCOL FROM dbo.TabTest;
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:56:07.747

```
create view dbo.test AS 
    select
        column1, 
        column2,
        case
            when column1 is null and column2 is null then null
            -- or when isnull(column1, column2) is null then null
            else isnull(column1, 0) + isnull(column2, 0)
        end as CALCULATEDCOL 
    from dbo.TabTest 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T14:57:15.287

```
CASE  
      WHEN COALESCE(COLUMN1, COLUMN2) IS NULL THEN NULL
      ELSE ISNULL(COLUMN1, 0) + ISNULL(COLUMN2, 0)
END 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T15:01:32.517

您可以在没有`case`声明的情况下执行此操作：

```
select coalesce(column1+column2,
                coalesce(column1, 0) + column2,
                column1 + coalesce(column2, 0)
               ) 
```

（该函数`coalesce`等价于`isnull`，除了`coalesce`是标准 SQL 并且可以接受两个以上的参数。）

`case`使用语句没有缺点。我只是提供这个作为替代方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T14:53:55.547

改用`CASE`表达式。像这样：

```
CREATE VIEW dbo.test AS 
  SELECT 
    COLUMN1, 
    COLUMN2,
    CASE  
      WHEN COLUMN1 IS NULL AND COLUMN2 IS NULL THEN NULL
      WHEN COLUMN1 IS NULL THEN 0 + COLUMN2
      WHEN COLUMN2 IS NULL THEN 0 + COLUMN1
      ELSE COLUMN1 + COLUMN2
    END AS CALCULATEDCOL 
  FROM dbo.TabTest; 
GO 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T17:14:29.823

它比人们想象的要简单，当有一个名为 COALESCE 的标准函数时，使用 CASE 来解决这个问题是一种浪费，只需将您的问号替换为：

```
COALESCE(col1 + col2, col1, col2) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T14:53:07.050

您可以使用 a`CASE`来处理最后一个条件：

```
CREATE VIEW dbo.test
AS
 SELECT column1,
        column2,
        CASE
            WHEN column1 IS NULL
                THEN column2 + 0
            WHEN column2 IS NULL
                THEN column1 + 0
            WHEN column1 IS NOT NULL AND column2 IS NOT NULL
                THEN column1 + column2
        ELSE NULL
        END AS calculatedcol
  FROM  dbo.tabtest; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T14:56:57.540

您的规则似乎是“将空值视为零，除非两个字段都为空，在这种情况下，返回空值。” 我会用 , 来解决这个问题`case`，以分隔两个规则：

```
CASE WHEN column1 is null and column2 is null then null
ELSE ISNULL(column1,0) + ISNULL(column2,0)
END 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-01T14:57:04.380

使用案例系统，您可以处理两个值都为空的情况，因为它们中的任何一个都为空

```
CREATE VIEW dbo.test
AS
  SELECT COLUMN1, COLUMN2, 
    CASE WHEN (COLUMN1 IS NULL AND COLUMN2 IS NULL) THEN NULL 
    ELSE ISNULL(COLUMN1,0)+ISNULL(COLUMN2,0) 
    END  AS CALCULATEDCOL 
FROM dbo.TabTest;
GO 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-01T14:58:39.480

您可以使用[case](http://msdn.microsoft.com/en-us/library/ms181765.aspx)关键字来实现此目的。

这些线上的东西

```
SELECT CASE 
WHEN COLUMN1 IS NULL AND COLUMN2 IS NULL THEN NULL 
WHEN COLUMN1 IS NULL AND... etc... 
```

# linux - 如何在 Linux 中搜索日志文件中的两个不同日期

> ID：13179604
> 
> 赞同：3
> 
> 时间：2012-11-01T14:50:50.080
> 
> 标签：linux, date, sed, awk, grep

我正在使用基于 RPM 的发行版，我想动态搜索日志文件以查找今天和昨天的日期以输出报告。字符串必须是动态的（ no egrep "\b2012-10-[20-30]\b" ）意味着我可以采用相同的单行或脚本并在文件中搜索今天的日期和昨天的日期并打印一些输出. 基本上搜索特定条目的日志文件。

这是我得到的，但我想用动态的东西替换 egrep：

```
grep "No Such User Here" /var/log/maillog | egrep "\b2012-10-2[3-4]\b" | cut -d "<" -f 3 | egrep -o '\b[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}\b' | cut -d "@" -f 2 | sort -d |uniq -ci | awk -F" " '{ print "Domain: " $2 " has been sent " $1 " messages that got a No Such User Here error." }' 
```

任何帮助表示赞赏。我正在寻找很可能使用 date 命令的东西

```
date "+%Y-%m-%d" 
```

但我需要使用 %d 并搜索当天和昨天。这可以做到吗？

非常感谢任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:01:01.913

如果您有 GNU 日期：

```
$ x=$(date "+%Y-%m-%d")
$ y=$(date "+%Y-%m-%d" -d "-1 day")
$ egrep "($x|$y)" file 
```

x 包含当前日期，y 包含昨天的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:07:53.687

使用 GNU awks 时间函数：

```
gawk 'BEGIN{
   today     = strftime("%Y-%m-%d")
   yesterday = strftime("%Y-%m-%d",systime()-24*60*60)
}
$0 ~ "(" today "|" yesterday ")"
' file 
```

# python - python的set()的C中是否有等价物？

> ID：13179605
> 
> 赞同：4
> 
> 时间：2012-11-01T14:50:58.597
> 
> 标签：python, c, set

我在 python 的 set() 变量类型的 C 中寻找一些等价物有什么想法吗？这是关于集合[http://docs.python.org/2/library/sets.html的 python 文档](http://docs.python.org/2/library/sets.html)

你能解释/链接我的帮助吗？请

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T14:54:10.010

不，没有。Python 数据类型依赖于很多关于 Python 对象的东西，而您通常在 C 中使用的更底层的数据根本没有这些东西。

就像能够可靠地比较两个“对象”，无论它们的类型或内部结构如何。

当然，您对自己的数据了解得越多，就越容易推出自己的数据。

如果您想使用库，我建议您查看[glib 的哈希表。](http://developer.gnome.org/glib/2.31/glib-Hash-Tables.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-24T15:01:38.437

随意使用[我的头文件](https://github.com/NirupamReddy2/Set_Header_File_for_C_Language)轻松地用 C 语言执行所有集合操作。按照[链接](https://github.com/NirupamReddy2/Set_Header_File_for_C_Language)，请通过 README.md 文件了解它。

# ruby - 产生一个数组

> ID：13179607
> 
> 赞同：0
> 
> 时间：2012-11-01T14:51:03.963
> 
> 标签：ruby

不确定我的问题是否正确，但总的来说，我会执行以下操作：

给定如下代码片段：

```
[{ <some events>, "close"}, { <some other events>, "close"}].each do |events|
    it "should handle events" do
        ...
    end
    ...
end 
```

我想增加事件的数组。假设有 2 种*关闭*方式：（`"close"`相同）和`"stop"`. 这意味着，我想编写一些代码来检查 4 个序列：`[{<some events>, "close"}, {<some other events>, "close"}, {<some events>, "stop"}, {<some other events>, "stop"}]`.

什么是正确的（在 Ruby 中风格良好的）编码方式？

**更新**：`<some events>`and`<some other events>`是字符串序列（这只是为了澄清）。

**更新 N2：** `stop`在更`close`一般的情况下，也可以出现在序列的中间。

**更新 N3：***可能*只是有一个最终序列`do`会更方便。我在这里可能错了。

**更新 N4：**示例（只是为了说明一切）：

> 初始消息：“open”、“click_btn1”、“click_btn2”、“open”、“click_btn2”、“click_btn3”、
> 
> 所需结果：“打开”、“click_btn1”、“click_btn2”、“关闭”“打开”、“click_btn1”、“click_btn2”、“关闭”“打开”、“click_btn2”、“click_btn3”、“停止”“打开”、“click_btn2”、“click_btn3”、“停止”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:16:22.767

只是有嵌套的迭代。

```
[some_events, some_other_events].each do |event|
  ["close", "stop"].each do |close_or_stop|
    ...
  end
end 
```

或者可能

```
[some_events, some_other_events].product(
["close", "stop"]) do |event, close_or_stop|
  ...
end 
```

# excel - 用于比较值和复制数据的 Excel VB 脚本

> ID：13179611
> 
> 赞同：-1
> 
> 时间：2012-11-01T14:51:11.097
> 
> 标签：excel, copy, compare, vba

我的电子表格设置如下：

表 1：
A 列：从单元格 A2 开始的唯一字母数字值
B 列 - 字母数字值（非唯一）

表 2：
A 列：从单元格 A2 开始的唯一字母数字值
B 列：空

我想要一个函数来比较`Sheet1.ColumnA`和`Sheet2.ColumnA`，当找到匹配项时，将数据从 复制`Sheet1.ColumnB`到`Sheet2.ColumnB`。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:15:05.590

这是通过`VLOOKUP()`. 在这种情况下，您应该在 sheet2 B 列中放入以下函数（写入 B2，然后将其拖到末尾）：

`=IFERROR(VLOOKUP(A2,Sheet1!A:B,2,FALSE),"")`

`VLOOKUP()`对于许多“普通”Excel用户每天都会遇到的所有这些问题，这是一个非常强大的功能。

`IFERROR()`用于在 sheet1 的表中找不到 sheet2 中的唯一 ID 的情况。

# android - ActionBarSherlock 中的强制溢出菜单

> ID：13179620
> 
> 赞同：26
> 
> 时间：2012-11-01T14:51:22.077
> 
> 标签：android, android-actionbar, actionbarsherlock, android-holo-everywhere

我希望在 ICS 之前的设备 (2.3 - 2.1) 上使用 4.0+ 溢出菜单。我将 HoloEverywhere 与 ActionBarSherlock 一起使用。

我尝试了以下解决方案：

[ActionBarSherlock & HoloEverywhere - 强制溢出？](https://stackoverflow.com/questions/10509510/actionbarsherlock-holoeverywhere-forcing-overflow)

但它不起作用，因为`absForceOverflow`不存在。它是在最新版本中删除还是什么？我检查了`R`ABS 和 HE 库项目的文件，但该字段根本不存在。

我的应用程序的主题设置为`@style/Holo.Theme.Sherlock.Light`，这是我试图继承并将`absForceOverflow`参数集添加到的主题`true`。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-26T15:33:53.453

从 ActionbarSherlock 4.2 开始，我们失去了管理溢出菜单可见性的能力。要使其正常工作，您需要结合两种方法：

1.  要强制 Android 3.x (honeycomb) 及更高版本的菜单可见性，您需要使用[此](https://stackoverflow.com/a/11438245/676369)hack + 添加检查 Android 版本：

    ```
    public static final int DEVICE_VERSION   = Build.VERSION.SDK_INT;
    public static final int DEVICE_HONEYCOMB = Build.VERSION_CODES.HONEYCOMB;
    if (DEVICE_VERSION >= DEVICE_HONEYCOMB)
        // Code from answer above 
    ```

2.  预蜂窝设备的打开菜单：

    *   打开`ActionBarSherlock/src/com/actionbarsherlock/internal/view/menu/ActionMenuPresenter.java`，转到方法`reserveOverflow`
    *   将原件替换为：

        public static boolean reserveOverflow(Context context) { return true; }

    这将强制菜单显示...

    *   但是当点击菜单按钮菜单弹出不显示。为此，我们需要在您的**活动**类中覆盖它：

        ```
        @Override
        public boolean onKeyUp(int keyCode, KeyEvent event) {
            if (DEVICE_VERSION < DEVICE_HONEYCOMB) {
                if (event.getAction() == KeyEvent.ACTION_UP &&
                    keyCode == KeyEvent.KEYCODE_MENU) {
                    openOptionsMenu();
                    return true;
                }
            }
            return super.onKeyUp(keyCode, event);
        } 
        ```

在此操作之后，您应该拥有适用于所有 Android 版本的绝对有效的溢出操作栏菜单。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-12T09:49:04.800

正如[Siddharth Lele 所指出的](https://stackoverflow.com/a/13180285/813951)，它已在最后一个 ABS 版本中被删除，以便与实际的 Action Bar 表现相同。所以乍一看放弃显示这个菜单是最好的选择。

但是，在我看来，某些设备的屏幕上显示溢出菜单而其他设备不显示是 Android 操作栏的一个重大设计缺陷。原因如下：

在具有硬件菜单键的设备中，菜单不会显示在操作栏中。最近设备的趋势是将硬件按钮的数量减少到最低限度，因为它被认为对用户更友好（并且因为 iphone 只有一个按钮，所以他们复制了这种设计）。其他制造商确实包含菜单按钮，但它是隐藏的，除非你按下它（是的，当你不再需要灯时它会亮起。这不是一个明智的设计，但同样，当所有按钮都关闭时，手机看起来更 iphonish）。

为了更好地理解这一点，让我们看一个例子： *用户`A`有一个带有菜单键的设备。他正在使用他最喜欢的邮件客户端。配置邮件帐户的选项与常用选项（帮助、关于等）一起放置在溢出菜单中。他想添加第二个帐户，但不知道如何访问此菜单。屏幕上没有任何信息可以帮助他意识到该做什么。所以用户`A`问他的朋友`B`，他也在使用这个邮件客户端。用户`B`拥有最新的 Nexus N+1 Googlephone，并且他能够在操作栏中查看溢出图标，因为他的设备没有硬件菜单键。他展示`A`了如何通过打开此菜单添加第二个帐户。用户`A`现在完全糊涂了，因为他们使用的是相同的应用程序版本。沮丧，`A`可能会认为问题出在他的手机太旧了。`B`也很困惑。*

在这一点上，您可能会同时考虑两者`A`，并且`B`是不知道如何使用智能手机的傻瓜。但与桌面应用程序不同的是，绝大多数智能手机用户只知道他们设备的基础知识。他们以前的手机很可能是一个带有简单固件的键盘设备。电池没电了，他们去商店换了，但没货了。他们本可以在互联网上订购一个，但它比购买一部新手机要贵。因此，他们出售了一款支持触摸屏的手机，因为这就是如今的手机。现在他们必须面对一台配备成熟操作系统的小型计算机。更糟糕的是，这款手机只附带“快速入门指南”，要获得完整的手册，他们必须从互联网上下载 pdf。你猜怎么了？他们不会。

如果您正在开发移动应用程序，您应该假设用户可能对计算机、操作系统或类似应用程序一无所知。您应该使 GUI 在不同设备上看起来相似，以便人们可以学习并记住如何使用它。不要责怪 Action Bar 设计者：如果用户喜欢`A`或`B`不知道如何进入选项菜单**，那首先是你的错**。这就是为什么您应该包含一种访问始终可见的选项屏幕的方法。

后退键也会发生类似的事情。有些设备可能有硬件返回键，较新的设备通常没有。但是每当我们可以返回我们的应用程序时，我们总是会在操作栏中显示那个类似箭头的按钮，对吧？是的，我知道一个按钮在“导航树”中导航，而另一个按钮“回到过去”，但这也是另一个设计缺陷：对于普通用户来说，返回只是返回。他在屏幕上有这个按钮，他也可以使用硬件按钮，但这是可选的。溢出菜单也应该这样做。

因此，如果您（像我一样）认为这是一个重要的按钮，请不要放弃。**提供一个常规的主选项菜单并用相关的子菜单填充它。**将其设为操作按钮并为其分配一个描述性图标，甚至是像“菜单”这样的文字描述。您还可以模仿溢出菜单图标，只需使用以下可绘制对象之一：

```
 // For ActionBarSherlock
    abs__ic_menu_moreoverflow_normal_holo_dark.png
    abs__ic_menu_moreoverflow_normal_holo_light.png

    // For ActionBar
    ic_menu_moreoverflow_normal_holo_light.png
    ic_menu_moreoverflow_normal_holo_dark.png 
```

此外：将图像复制粘贴到您的项目 res 文件夹中。您永远无法知道 ABS 的未来版本或 ActionBar 的下一个实现是否会包含它们。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-01T15:28:29.927

如果您使用的是 4.2.0 版，那么`.ForceOverflow`主题实际上已被删除。

**来源：** [版本 4.2.0 变更日志](https://github.com/JakeWharton/ActionBarSherlock/blob/master/CHANGELOG.md#readme)

变更日志摘录：

```
Add SearchView widget for standard search interaction (API 8+ only)
Fix: ShareActionProvider in the split action bar no longer fills the entire screen.
Fix: ShareActionProvider now does file I/O on a background thread.
Fix: Automatically correct ColorDrawable not respecting bounds when used as a stacked background.
Fix: Ensure fragments collection is present before dispatching events.
Fix: XML-defined onClick searches the correct context for the declared method.
Fix: Ensure action mode start/finish callbacks are invoked on the activity for the native action bar.
Fix: Allow tab callbacks to have a fragment transaction instance for any FragmentActivity.
Fix: Ensure CollapsibleActionView callbacks are dispatched in both native and compatbility action bars.
Fix: Remove .ForceOverflow themes. These never should have been included. 
```

如果您绝对需要强制溢出，则需要下载早期版本的 ABS。您可以在此处根据其发布历史获取下载列表：http: [//actionbarsherlock.com/download.html](http://actionbarsherlock.com/download.html)

我个人仍然使用 ABS 版本 4.1.0，因为我目前不想在我的应用程序中进行辅助更改。我也在我的`theme.xml`：

```
<style name="MyTheme" parent="@style/Theme.Sherlock.ForceOverflow">
    <item name="android:windowBackground">@color/background</item>
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
</style>

<style name="MyTheme.ForceOverflow">
    <item name="absForceOverflow">true</item>
</style> 
```

在为 中的 an 应用主题时`Activity`，`manifest.xml`我将其用作属性：`"@style/Theme.SociallyYOU"`

同样，如果您必须绝对强制溢出，您可能还想在此处的另一个问题中阅读 CommonsWare 的想法：[https](https://stackoverflow.com/a/12872537/450534) ://stackoverflow.com/a/12872537/450534 。

**注意：**话虽如此，如果权衡并不重要，最好使用最新版本。通过发布我如何强制溢出菜单，我既不建议您使用旧版本，也不建议您这样做。它只是告诉你可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-02T15:44:58.747

我发现 Exterminator13 的答案在某些类型的 Android 设备上不起作用（我认为总数很小），但为了适应尽可能多的设备，我使用对话框并使用带有 android:showAsAction="always" 的菜单作为溢出菜单按钮。毕竟actionbarsherlock的溢出菜单的效果是通过源码实现的，如果不是那么麻烦，何不自己实现效果呢。如果你懂中文，也可以看看[我的博客](http://www.cnblogs.com/jiangz/p/3404469.html)。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/more"
        android:icon="@drawable/overflow"
        android:showAsAction="always" 
    />
</menu> 
```

```
private Dialog popupDialog;
private Boolean popupState=false;

    public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        this.finish();
        return true;
    case R.id.more:
        if (!popupState) {
            showPop();
        }else {
            popupDialog.dismiss();
        }
    default:
        return super.onOptionsItemSelected(item);
    }
}

private void showPop(){
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(ResID, null);
    ListView listView = (ListView) view.findViewById(ResID);
    listView.setAdapter(yourOwnAdapter);
    popupDialog = new Dialog(WifiAuthWireActivity.this);
    popupDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    popupDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.WHITE));
    popupDialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
    popupDialog.setContentView(view);
    // Calculate ActionBar height
    TypedValue tv = new TypedValue();
    ActionBar maActionBar=getSupportActionBar();
    int actionBarHeight=maActionBar.getHeight();
    if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
    {
        actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
    }
    WindowManager.LayoutParams wmlp = popupDialog.getWindow().getAttributes();
    wmlp.gravity = Gravity.TOP | Gravity.RIGHT;
    wmlp.x+=12;
    wmlp.y+=actionBarHeight;
    popupDialog.getWindow().setAttributes(wmlp);
    popupDialog.show();
} 
```

# .net - 是否可以在 VS2010 的单元测试中执行 Web 服务时以交互方式调试它？

> ID：13179621
> 
> 赞同：0
> 
> 时间：2012-11-01T14:51:22.880
> 
> 标签：.net, vb.net, web-services, unit-testing, visual-studio-debugging

基本上，我有一个非常标准的 Web 服务调用，在一个 DLL 项目中，在构建的调试服务器下运行。

看起来像这样

```
<WebInvoke(Method:="POST", BodyStyle:=WebMessageBodyStyle.Bare, UriTemplate:="")>
Public Function POSTOrder(httpPostOrder As Contract.APIOrder) As Contract.Response.Order
    ....
    Return (httpResponse)
End Function 
```

如果我运行项目，我可以使用 fiddler 向它发送 XML POST 请求，如果我在上述函数中设置断点，它就会被命中。

现在，我想为这个函数设置一个简单的单元测试，所以我添加了一个测试项目和这个测试：

```
<TestMethod()>
Public Sub TestPostOrder()
    Dim r As String
    Dim w As New Net.WebClient

    W.Headers.Add("Content-Type", "application/xml")
    Dim x =
            <?xml version="1.0"?>
            <order_info>
                <event_id>103153</event_id>
                <id>1</id>
                .....
            </order_info>
    r = w.UploadString("http://localhost:15034/orders/?api_key={sometext}", "POST", x.ToString)
End Sub 
```

我知道，这不是世界上最伟大的单元测试，但这不是现在的重点。

所以，当我运行这个测试时，它确实通过并且成功了。我什至可以调试单元测试，单步执行它，然后看到 UPLOADSTRING 调用确实成功并返回了有效信息。

但是，如果我在正在测试的实际函数中设置断点，它永远不会被命中。

我发现了这个问题

[我可以在运行 VS 单元测试时进行调试吗？](https://stackoverflow.com/questions/5200758/can-i-debug-while-running-a-vs-unit-test)

但我试过了，没有骰子。

我猜我没有在单元测试中配置正确的东西，所以它没有在可以调试的上下文中启动实际的 DLL，但到目前为止，我什么也没发现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:02:38.530

是的你可以。

确保您的调试器连接到托管实际服务的正确进程（IIS 或 Cassini 进程），而不是单元测试（它只是一个客户端）。

我会做的是：

*   设置一个 VS 实例来调试 Web 进程
*   使用调试实例设置任何需要的断点
*   使用另一个 VS 实例运行测试

# amazon-s3 - 如何在java中将s3对象直接下载到内存中

> ID：13179623
> 
> 赞同：29
> 
> 时间：2012-11-01T14:51:34.720
> 
> 标签：amazon-s3, task

是否可以直接下载`S3object`到`Java`内存中并在我完成任务后将其删除？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-01T19:52:20.853

使用[AWS SDK for Java](http://aws.amazon.com/sdkforjava/)和[Apache Commons IO](http://commons.apache.org/io/)，如下所示：

```
//import org.apache.commons.io.IOUtils

AmazonS3 s3  = new AmazonS3Client(credentials);  // anonymous credentials are possible if this isn't your bucket
S3Object object = s3.getObject("bucket", "key"); 
byte[] byteArray = IOUtils.toByteArray(object.getObjectContent()); 
```

不确定“将其删除”是什么意思，但`IOUtils`在将对象转换为字节数组后会关闭对象的输入流。如果您的意思是要从 s3 中删除该对象，那很简单：

```
s3.deleteObject("bucket", "key"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-21T16:53:26.130

从 AWS JAVA SDK 2 开始，您可以使用`ReponseTransformer`将响应转换为不同类型。（参见[javadoc](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/S3Client.html#getObject-software.amazon.awssdk.services.s3.model.GetObjectRequest-software.amazon.awssdk.core.sync.ResponseTransformer-)）。

以下是将对象作为字节获取的示例

```
GetObjectRequest request = GetObjectRequest.builder().bucket(bucket).key(key).build()
ResponseBytes<GetObjectResponse> result = bytess3Client.getObject(request, ResponseTransformer.toBytes())

// to get the bytes
result.asByteArray() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-17T08:05:16.820

例如，将文件数据转换为字符串：

```
S3Object s3object = s3.getObject(new GetObjectRequest(bucketName, key));
S3ObjectInputStream inputStream = s3object.getObjectContent();
StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-21T23:42:44.760

这是最好的做法。

```
S3Object object = s3.getObject("bucket", "key"); 
byte[] byteArray = IOUtils.toByteArray(object.getObjectContent()); 
```

# c# - 如何在 ASP.Net 上创建拼写检查控件

> ID：13179624
> 
> 赞同：0
> 
> 时间：2012-11-01T14:51:35.753
> 
> 标签：c#, asp.net, .net, visual-studio-2010, spell-checking

我需要在 Web 应用程序中创建/使用拼写检查器控件，该控件检测单词错误并用红线在它（错误单词）下划线，当右键单击该单词时，它会提供建议的正确单词，例如`Microsoft word`.

我需要在客户端而不是服务器端完成此操作，因为当用户在文本框中写入时，检查器会自动检测单词而不按“按钮”并转到服务器，我还需要包含我的字典而不使用控制字典。

我需要明确的代码来实现这个功能。

我用谷歌搜索了这个问题，并没有找到明确的代码只是算法或服务器端代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:57:14.743

有很多免费的拼写检查器可以下载，比如“JSPELL”。谷歌搜索“基于 Javascript 的拼写检查器”会返回一些不错的结果。

# ios - 使用 NSURLCache 为 UIWebView 预加载本地资源

> ID：13179625
> 
> 赞同：4
> 
> 时间：2012-11-01T14:51:49.433
> 
> 标签：ios, uiwebview, nsurlcache

我正在开发一个在 UIWebView 中显示本地存储内容（HTML 文件）的 iOS 应用程序。

问题是从 HTML 引用的一些资产（例如字体和图像）在第一次加载时需要很长时间。我认为问题的解决方案是在将这些资产用于 UIWebView 之前以某种方式使用 NSURLCache 缓存这些资产，但这似乎会造成一些麻烦。

到目前为止我已经尝试过：

*   子类化 NSURLCache 并覆盖`cachedResponseForRequest`，以便它返回一个响应，其中包含预加载在 NSData 对象中的资产。预加载是在`init`方法中完成的。被覆盖的`cachedResponseForRequest`似乎被调用了，但由于某种原因，UIWebView 仍然从文件系统加载资产。

*   用于在 UIWebView 中使用`storeCachedResponse:forRequest:`之前缓存包含资产的 NSCachedURLResponse 对象。

这些似乎都没有帮助。关于在哪里寻找问题的任何建议？

# objective-c - 使用 libqrencode 库

> ID：13179627
> 
> 赞同：1
> 
> 时间：2012-11-01T14:51:52.840
> 
> 标签：objective-c, cocoa

我在我的可可项目中加载了 libqrencode 库，但我不确定如何准确使用它。我有一个文本字段，您可以在其中输入文本，一旦完成，您单击一个按钮，然后我使用 NSLog 记录该文本。现在我想对该文本进行编码以便以后能够使用它并从中生成一个二维码，所以在手册中说要使用这种格式

```
QRcode* QRcode_encodeString (const char * string,
                int version,
                QRecLevel level,
                QRencodeMode hint,
                int casesensitive 
) 
```

我不确定如何在我的方法中使用它来记录结果

```
- (IBAction)GenerateCode:(id)sender {

NSString *urlText = [[NSString alloc] initWithFormat:@"%@", [_urlField stringValue]];

NSLog(@"The url is %@", urlText); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:03:55.877

您需要从 NSString 实例获取 const char *。这已在 SO 上多次回答，但[这里有一个](https://stackoverflow.com/questions/4366799/nsstring-and-const-char-conversion). 一旦你这样做了，你可以直接调用 QRCode_encodeString() 并传递你想要的任何参数。

如果你需要更多细节，你必须尝试一些东西，发布你的代码，并描述它是如何不适合你的，这样我们就可以更直接地帮助你，而不仅仅是为你编写它。

# postgresql - pgpool-II 认证失败

> ID：13179628
> 
> 赞同：7
> 
> 时间：2012-11-01T14:51:56.033
> 
> 标签：postgresql, postgresql-9.1, pgpool

我正在使用配置为主热备用的两个 PostgreSQL 9.1 中的 pgpool-II 3.2.1。

尝试从 PGAdmin 进行身份验证时，我得到：

```
Error connecting to the server: FATAL:  password authentication failed for user "postgres" 
```

在 pgpool 日志中，我看到：

```
2012-11-01 14:40:13 LOG:   pid 3023: connection received: host=89.xxx.xxx.xxx port=57150
2012-11-01 14:40:13 DEBUG: pid 3023: Protocol Major: 1234 Minor: 5679 database:  user: 
2012-11-01 14:40:13 DEBUG: pid 3023: SSLRequest from client
2012-11-01 14:40:13 DEBUG: pid 3023: pool_ssl: SSL requested but SSL support is not available
2012-11-01 14:40:13 DEBUG: pid 3023: read_startup_packet: application_name: pgAdmin III - Browser
2012-11-01 14:40:13 DEBUG: pid 3023: Protocol Major: 3 Minor: 0 database: postgres user: postgres
2012-11-01 14:40:13 DEBUG: pid 3023: new_connection: connecting 0 backend
2012-11-01 14:40:13 DEBUG: pid 3023: new_connection: connecting 1 backend
2012-11-01 14:40:13 DEBUG: pid 3023: pool_ssl: SSL requested but SSL support is not available
2012-11-01 14:40:13 DEBUG: pid 3023: pool_ssl: SSL requested but SSL support is not available
2012-11-01 14:40:13 DEBUG: pid 3023: pool_read_message_length: slot: 0 length: 12
2012-11-01 14:40:13 DEBUG: pid 3023: pool_read_message_length: slot: 1 length: 12
2012-11-01 14:40:13 DEBUG: pid 3023: pool_do_auth: auth kind:5
2012-11-01 14:40:13 DEBUG: pid 3023: trying md5 authentication
2012-11-01 14:40:13 DEBUG: pid 3023: password does not match: frontend:md5286c9c7c4ac8a365170e0f448c99ad48 pgpool:md5cf0e9615c13af6243edfd11d2461d12e
2012-11-01 14:40:13 DEBUG: pid 3023: do_md5failed in slot 0 
```

真正奇怪的是，日志中的 md5 哈希值会随着每个请求而变化，因此与我在 /usr/local/etc/pool_passwd 和 /usr/local/etc/pcp.conf 中设置的哈希值相比并没有什么意义

你能帮我找出配置问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T07:08:47.627

发现问题了！

`pg_md5`它与 pgpool 一起提供了一个不正确的 md5（当我使用它时）。在我用 PostgreSQL 数据库中的 md5 在配置中替换它之后，它就可以工作了。您可以通过运行以下 SQL 查询来获取 DB md5：

```
select passwd from pg_shadow where usename = 'username'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-26T11:08:22.350

这取决于您如何使用“pg_md5”...如果您不包括用户名，那么它将生成错误的 MD5，因为毫无疑问，它在 salt 中使用：

```
root:/usr/local/etc# pg_md5 password1
7c6a180b36896a0a8c02787eeafb0e4c 
```

但是，如果您使用正确的语法，那么您会自动将正确的条目放入您的 pool_password 文件中：

```
root:/usr/local/etc# pg_md5 -m -u greg password1
root@1:/usr/local/etc# grep greg: pool_passwd
greg:md53c5b45b54c89f8af9074a2ad371e2c12 
```

# css - 哪个 CSS 类控制引导程序预输入的活动元素？

> ID：13179629
> 
> 赞同：0
> 
> 时间：2012-11-01T14:51:59.150
> 
> 标签：css, twitter-bootstrap

> **可能重复：**
> [哪些 CSS 元素控制引导程序的滚动间谍活动/悬停？](https://stackoverflow.com/questions/13128214/what-css-element-controls-bootstraps-scrollspys-active-hover)

哪些 CSS 类控制引导程序预输入的活动元素？

我知道它添加了“活动”类，但是哪个类是活动的子类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:46:45.443

由`ul`Typeahead 创建的被分配类`typeahead`。

所以你可能正在寻找类似的东西：
`ul.typeahead li.active`

# silverlight - 在一个 CameraCaptureTask 中捕获多张图片 Windows Phone

> ID：13179633
> 
> 赞同：0
> 
> 时间：2012-11-01T14:52:06.583
> 
> 标签：silverlight, windows-phone-7, c#-4.0

是否可以使用 Windows Phone 在一个 CameraCaptureTask 中捕获多张图片？如何 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:22:14.037

这里似乎有两种解决方案

1.  易于实施（但从用户体验的角度来看不是很好）

    在 CameraCaptureTask.Completed 上触发新的 CameraCaptureTask.Show，直到获得所需数量的图片。

2.  实现自己的 MultipleCameraCaptureTask

    [在 Windows Phone 应用程序中使用相机](http://msdn.microsoft.com/en-us/magazine/hh708750.aspx)

    [适用于相机和照片的 Windows Phone 示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx#BKMK_CameraAndPhotos)

也可以看看CameraCaptureTask是如何使用reflector实现的；您有机会重用某些类/用户界面。

# c# - EF 4.3 Code First：具有复合主键和外键的按类型表 (TPT)

> ID：13179634
> 
> 赞同：6
> 
> 时间：2012-11-01T14:52:07.737
> 
> 标签：c#, ef-code-first, entity-framework-4.3, composite-primary-key, table-per-type

因此，我尝试将 Code First 与 Fluent 一起使用来映射具有一种派生类型的基类，其中表架构是按类型排列的表。此外，派生类型与也具有复合外键的另一种类型具有多对一关系。（这些表上的键是不可更改的，并且名称完全匹配。）

这是我在 CSharp 中尝试实现的示例：

```
public class BaseType
{
    public int Id;
    public int TenantId;
    public int Name;
}

public class DerivedType : BaseType
{
    public int Active;
    public int OtherTypeId;
    public OtherType NavigationProperty; 
} 
```

这是配置类中的配置：

```
public BaseTypeConfiguration()
{
     ToTable("BaseTypes", "dbo");

     HasKey(f => new { f.Id, f.TenantId});

     Property(f => f.Id)
         .HasColumnName("BaseTypeId")
         .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
}

public DerivedTypeConfiguration()
{
    ToTable("DerivedTypes", "dbo");

    //OtherType has many DerivedTypes
    HasRequired(dt=> dt.OtherTypeNavigation)
        .WithMany(ot=> ot.DerivedTypes)
        .HasForeignKey(dt=> new { dt.OtherTypeId, dt.TenantId});
} 
```

据我所知，我的映射设置正确（例如，我遵循了许多具有这种确切情况但只有一个列标识符的教程和示例）

当我尝试查询这些实体时，我得到的异常是： `The foreign key component 'TenantId' is not a declared property on type 'DerivedType'.`

当我尝试使用`new`关键字在类型上显式声明这些属性时，我得到一个异常，说存在重复的属性。

**来自 EF 团队的**答复****

 **> 这是 EF 不支持在基类型中定义属性然后将其用作派生类型中的外键的更基本限制的一部分。不幸的是，这是一个很难从我们的代码库中移除的限制。鉴于我们没有看到很多对此的请求，因此我们不打算在现阶段解决此问题，因此我们将关闭此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:03:25.500

我认为这就是你要找的：

```
[Table("BaseType")]
public class BaseType
{
    [Key, DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Id {get;set;}
    [Key]
    public int TenantId { get; set; }
    public int Name { get; set; }
}

[Table("Derived1")]
public class DerivedType : BaseType
{
    public int Active { get; set; }
    public int OtherTypeId { get; set; }
    public virtual OtherType NavigationProperty {get;set;}
}

[ComplexType]
public class OtherType
{
    public string MyProperty { get; set; }

}

public class EFCodeFirstContext : DbContext
{
    public DbSet<BaseType> BaseTypes { get; set; }
    public DbSet<DerivedType> DerivedTypes { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<BaseType>().HasKey(p => new { p.Id, p.TenantId });
        base.OnModelCreating(modelBuilder);
    }
} 
```

![上面的代码导致：](../Images/a9a8116cd3aee620a9cd629a7bcf8d54.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-23T19:17:12.550

根据他们的支持，目前尚不支持。我在这里为类似的堆栈问题创建了一个案例，作者更新了案例结果。

[https://stackoverflow.com/a/14880084/1791547](https://stackoverflow.com/a/14880084/1791547)**

# jquery - jQuery 代码在 Ajax 调用返回后停止执行

> ID：13179635
> 
> 赞同：1
> 
> 时间：2012-11-01T14:52:09.703
> 
> 标签：jquery, loading

我只是尝试设置具有动态数据库控制的管理区域。它工作得很好，我已经设置了添加、删除和更新记录。问题是当我第一次运行代码时一切正常！我的意思是，如果我想删除记录，我按一次它就会删除。但后来我无法删除其他记录，我必须刷新我的整个页面才能再次执行（再次打开数据库等等）

这是我的代码：

```
//------------------------ loading manage area -----------------------------
$(document).ready(function(){
    $('#sitesAddForm').hide();
    $('#select_table').change(function(){
    var val = $(this).val(); //is calling to the value of the options from the dropdown menu and so i can select between the tables of the database.
//-------loads forms when database changeing------
switch (val)
    {
    case 'sites':
        $('#sitesAddForm').show();

    case 'graphic':             
        $('#sitesAddForm').hide();
    }   
//---
//---------loads the database---------
$.post('manage_query.php', {value: val}, function(data){
        $('#displayer').html(data);
        //-------------------------------deleteing&updating zone----------
        $('a').click(function(e){
        e.preventDefault();
        var siteID = $(this).attr("id");
        $.post('manage_query.php', {siteDelete: siteID, value: 'sites'},
        function(deleted){
            $('#displayer').html(deleted);
        });
}); 
```

它只是代码的一部分，但问题在这里，在最后一行之后

```
$('#displayer').html(已删除);
```

已执行，代码不再工作。但我仍然可以看到结果。

php代码：

```
if(isset($_POST['siteDelete'])){
    $siteDelete = $_POST['siteDelete'];
    mysql_query("DELETE FROM sites WHERE id=$siteDelete");
    echo 'Site deleted successfully';
} 
```

所有结果都只是写入一个 html div 中，id 为“displayer”

我希望我说清楚了

# iphone - 推送通知徽章增加和php脚本

> ID：13179636
> 
> 赞同：3
> 
> 时间：2012-11-01T14:52:11.150
> 
> 标签：iphone, badge

我使用服务器上的 php 脚本向我的设备发送推送通知。脚本代码是

```
<?php    
// Put your device token here (without spaces):
$deviceToken = 'a14b6212fa69a2b1c2dde4547a50c711fd40b9787cc029800584890d72a9f5db';

// Put your private key's passphrase here:
$passphrase = 'ujyfljnhjgby123';

// Put your alert message here:
$message = 'Delivery 33 message!';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
'ssl://gateway.sandbox.push.apple.com:2195', $err,
$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
'badge' => +1,
'alert' => $message,
'sound' => 'default'
);

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) .       $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
echo 'Message not delivered' . PHP_EOL;
else
echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

在我的 AppDelegate.m 中有这样的代码

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
[UIApplication sharedApplication].applicationIconBadgeNumber = [[[userInfo objectForKey:@"aps"] objectForKey: @"badgecount"] intValue];

 } 
```

问题是 - 当我收到多个通知时，为什么我的徽章中的数字没有更新？看起来它只是替换

```
'badge' => +1, 
```

每一次。我究竟做错了什么？你能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-30T06:46:39.013

您必须从服务器端执行此操作。就我而言，我是通过 php 和 mysql 完成的。这是我的数据库 ![在此处输入图像描述](../Images/1b4e007ef296860118f20051681c0cf9.png)

我添加了一个字段 badgecount，每次使用此代码将推送发送到设备时，我都会增加徽章计数

```
 $query = "SELECT badgecount FROM pushnotifications WHERE device_token = '{$device_token}'";
    $query = $this->db->query($query);
    $row = $query->row_array();
    $updatequery = "update pushnotifications set badgecount=badgecount+1 WHERE device_token ='{$device_token}'";
    $updatequery = $this->db->query($updatequery);
    $device = $device_token;
    $payload['aps'] = array('alert' => $pushmessage, 'badge' =>$row["badgecount"]+1, 'sound' => 'default');
    $payload = json_encode($payload); 
```

我还制作了另一个 api 来制作 badgcount 0 ，它在

```
- (void) application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

因此，当看到通知时，它在服务器中再次为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:44:12.397

您不能`badge`在有效负载中传递相对值。+1 将简单地变为 1。如果您想增加或减少，您需要跟踪服务器上的当前徽章编号，并在有效负载中传递新的绝对值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-23T05:46:07.520

我对此不是 100% 确定，但 +1 只会说 1，我认为你需要“+1”。

```
$body['aps'] = array(
'badge' => '+1',
'alert' => $message,
'sound' => 'default'
); 
```

编辑：实际上，这可能只是针对 UrbanAirship 的，因为我考虑了一下……

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T15:05:52.240

首先在 appDelegate.m 中使用以下方法注册通知

```
 - (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devicetoken { 

Check the reponse here

} 
```

# javascript - 用Javascript计算不起作用

> ID：13179637
> 
> 赞同：-1
> 
> 时间：2012-11-01T14:52:13.117
> 
> 标签：javascript, jquery

我想用 Javascript 计算但有奇怪的问题。它只是将 1 添加到我的 String 但它应该计算它。我正在使用 parseInt() 函数将我的字符串转换为 Int，并且计算如下：`sec = sec + 1;`

```
 var calc= parseInt($(this).find("input[name=calc]").val());
                calc = calc + 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:04:16.490

如果不想，您的字符串不能为空`NaN`。首先检查你是否得到一个空字符串：

```
var cal = null;

if ( $(this).find("input[name=calc]").val() ) {

    cal = parseInt( $(this).find("input[name=calc]").val(), 10 );
    cal++;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:54:13.807

```
if(!!sec){ 
    sec = parseInt(sec, 10) + 1;

    alert(sec);
} 
```

或者，在您的场景中：

```
var fieldvalue = $(this).find("input[name=calc]").val(), calc;

if(!!fieldvalue){
    calc = parseInt(fieldvalue, 10);

    calc += 1;

    alert(calc);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:54:19.907

你有更多的代码要表达吗？它可能只是出现 1，因为 sec 未设置为数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:05:38.997

在 javascript 中，+ 运算符用于字符串的添加**和连接。**由于 javascript 是弱类型的，因此您必须添加有关类型的信息。这里有两个解决方案：

*   从字符串中减去 0

    秒 = (sec-0) + 1;

*   将一元 + 运算符添加到字符串

    秒 = (+秒) + 1;

# e-commerce - 使用信用卡购买时，PayPal 网站支付专业版不会向商家发送电子邮件

> ID：13179642
> 
> 赞同：1
> 
> 时间：2012-11-01T14:52:41.507
> 
> 标签：e-commerce, paypal

我们已经实施了 PayPal 网站支付专业版。一切似乎都像魅力一样运作。

但是，当用户使用信用卡购买商品时，我的商家没有收到来自 Paypal 的电子邮件。但是，当使用他们的 PayPal 帐户购买时，电子邮件可以正常发送。

这是正常行为吗？或者，我需要在我的设置中修复什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:18:19.177

卖家账户应该会收到正常的电子邮件通知，告知他们已收到 PayPal 付款，但不会向买家发送电子邮件。这是故意的，因为如果买家开始收到 PayPal 通知，他们可能会不高兴，因为他们特别要求 CC 而不是 PayPal。

使用 Payments Pro 时，通常由您自己创建和发送电子邮件收据/通知。

也就是说，您在这里提到的是您的商家账户没有收到任何东西，这通常是指卖家账户。如果发生了这种情况，那么我建议致电 PayPal 支持人员或在 www.paypal.com/mts 提交票证，让他们知道发生了什么。

# c# - jQuery 对话框中的 MVC3 数据未回发到服务器

> ID：13179643
> 
> 赞同：2
> 
> 时间：2012-11-01T14:52:44.057
> 
> 标签：c#, jquery, asp.net, asp.net-mvc-3

我是 MVC3 的新手，但我正在编写 MVC3 应用程序需要在 jQuery 对话框中加载 DateTime 列表，但是当我回发到服务器时，不会发送 DateTime 列表。

我厌倦了像这样为列表中的每个日期添加一个隐藏元素

```
@for (int i = 0; i < Model.ListOfDates.Count; i++)
{
    @Html.HiddenFor(x => x.ListOfDates[i])
} 
```

但是在尝试更改 jQuery datepicker 中的日期时出现以下错误：

> Microsoft JScript 运行时错误：无法设置属性“currentDay”的值：对象为空或未定义

有人可以告诉我我做错了什么吗？我创建了一个测试应用程序来演示：

模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Stupid_Dates_Test.Models
{
    public class Model
    {
        public string StringProperty { get; set; }
        public int IntProperty { get; set; }
        public List<DateTime> ListOfDates { get; set; }
    }
} 
```

控制器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Stupid_Dates_Test.Models;

namespace Stupid_Dates_Test.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            Model m = new Model();
            m.StringProperty = "This is a string property";
            m.IntProperty = 100;
            m.ListOfDates = new List<DateTime>();
            m.ListOfDates.Add(new DateTime(2012, 11, 1));
            m.ListOfDates.Add(new DateTime(2012, 11, 2));
            m.ListOfDates.Add(new DateTime(2012, 11, 3));
            m.ListOfDates.Add(new DateTime(2012, 11, 4));
            m.ListOfDates.Add(new DateTime(2012, 11, 5));
            return View(m);
        }

        public void Save(Model m)
        {
            // Save Code
        }
    }
} 
```

看法

```
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>
<link href="../../Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />

@model Stupid_Dates_Test.Models.Model
<form id="frmMain" action="">
@Html.EditorFor(x => x.StringProperty)
@Html.EditorFor(x => x.IntProperty)

@*@for (int i = 0; i < Model.ListOfDates.Count; i++)
{
    @Html.HiddenFor(x => x.ListOfDates[i])
}*@

<a href="javascript:ShowDates()">Edit List of Dates</a>
<div id="dlgDates" style="display: none;">
    @for (int i = 0; i < Model.ListOfDates.Count; i++)
    {
        @Html.EditorFor(x => x.ListOfDates[i])
    }
</div>
</form>
<script type="text/javascript">
    $(document).ready(function () {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1;
        var yyyy = today.getFullYear();
        if (dd < 10) { dd = '0' + dd }
        if (mm < 10) { mm = '0' + mm }
        today = mm + '/' + dd + '/' + yyyy;
        $(":input[data-datepicker]").datepicker({ defaultDate: today });
    });

    function ShowDates() {
        $("#dlgDates").dialog({
            autoOpen: true,
            closeOnEscape: false,
            width: 500,
            height: 400,
            resizable: false,
            title: "Dates",
            modal: true,
            draggable: false,
            open: function () {
                $("#dlgDates").show();
            },
            buttons: {
                "Save": function () {
                    $.ajax({
                        type: "POST",
                        url: '/Home/Save/',
                        data: $("#frmMain").serialize(),
                        success: function () {
                            // Save Code
                            alert('Saved successfully!');
                            $('#dlgDates').dialog('destroy');
                        },
                        error: function () {
                            alert('Error');
                        }
                    });
                }
            }
        });
    }
</script> 
```

日期时间编辑器模板

```
@model System.DateTime
@Html.TextBox("", (Model == null ? "" : Convert.ToDateTime(ViewData.TemplateInfo.FormattedModelValue).ToShortDateString()), new { data_datepicker = true }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:16:17.603

有几个相关的问题：1）选择器错误。:input[data-datepicker] 根据我的理解选择 type="date-datepicker" 的输入。Html.TextBoxFor 呈现类型为“文本”的输入，请尝试向输入字段添加一个类，以便您可以使用 input.datepck 之类的内容来选择它们。

2）当您使用 jQuery 对话框插件时，日期字段不会被发送到服务器（它们不会显示在 http 请求中

# c# - 日期时间差

> ID：13179645
> 
> 赞同：-7
> 
> 时间：2012-11-01T14:52:47.957
> 
> 标签：c#

如何计算 2 之间的差异`DateTimes`？

```
DateTime a = DateTime.Now;
DateTime b = DateTime.Now.AddHours(1);
int differenceInMilliseconds; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:55:58.417

减号超载，使用[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.totalmilliseconds.aspx)：

```
double differenceInMilliseconds = (b - a).TotalMilliseconds; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:57:07.683

`DateTime`值可以彼此相减，从而产生 a 的实例`TimeSpan`。

所以

```
DateTime a = DateTime.Now;
DateTime b = a.AddHours(1);

TimeSpan difference = b - a;
double differenceInMilliseconds = difference.TotalMilliseconds; 
```

请注意， TotalMilliseconds 是 a `double`，而不是`int`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:55:28.260

希望这可以帮助...

[DateTime.Subtract 方法 (DateTime)](http://msdn.microsoft.com/en-us/library/8ysw4sby.aspx)

# python - WSGI 与 PYthon/Django 的怪异：交替提供新旧版本的应用程序

> ID：13179647
> 
> 赞同：3
> 
> 时间：2012-11-01T14:53:01.653
> 
> 标签：python, django, apache, deployment, wsgi

我从来没有深入研究过像 WSGI 这样的服务器技术是如何在底层工作的，我认为直到现在我才基本了解......

**这种行为的解释是什么？**：在 Apache2/WSGI/Django 设置上，在开发服务器上获取新代码并通过执行规定“重新加载”它之后`touch myapp.wsgi`，事情开始变得奇怪。在连续刷新浏览器时，我会得到旧版本的应用程序（在推送新代码之前）或新版本，随机！就像一些线程/进程仍在为旧代码提供服务，而有些线程/进程已经从磁盘加载了新代码......**对此有什么简单的解释，如何在不重新启动 apache 的情况下正确“重新加载”我的应用程序？**或者我在哪里可以找到关于 WSGI、FCGI 等工作方式的简单（更好的是图形/示意图）解释。

注意：*我不是 devops 人，但我被迫与这样的事情争吵，我正在寻找任何“浓缩”、“速成课程类型”的知识，而不是所有的完整文档组件...*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:20:18.697

您可能没有使用守护程序模式。读：

*   [http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html](http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html)
*   [http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)

关于 mod_wsgi 设置的 Django 文档对使用守护程序模式必须执行的操作不够清楚。现在已经解决了。

*   [https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/)

# html - 用于垃圾邮件保护的电子邮件屏蔽真的很重要吗？

> ID：13179648
> 
> 赞同：1
> 
> 时间：2012-11-01T14:53:02.090
> 
> 标签：html, email, spam-prevention

多年来，我一直在使用不同的技术来屏蔽电子邮件地址，范围从将不同部分组合在一起的 javascript 到使用从右到左的 CSS 方法等。

但这真的重要吗？在我看来，编写一个解析大多数这些方法的爬虫仍然很简单。大多数电子邮件收割机真的那么落后吗？

# jquery - JSON AJAX url 想要更多

> ID：13179650
> 
> 赞同：0
> 
> 时间：2012-11-01T14:53:04.273
> 
> 标签：jquery, ajax, d3.js

我正在使用 D3 通过他们的 choropleth 示例创建一些县数据。我正在使用 d3.json 选项与 jquery .ajax。我有一个 URL，当我使用它时它不会加载。经过一番研究，我发现网络服务需要一个额外的参数：

```
 {'county': {'year': 2002,'stat': 'crime'}} 
```

所以到这个网址的连接一直在我身上失败。

我尝试为 Web 服务添加额外的必需参数，如下所示：

```
d3.json("http://url/states", function (json) {
    data = "{'county': {'year': 2002,'stat': 'crime'}}"
    //basic d3 stuff from here below
    counties.selectAll("path")
        .attr("class", quantize);
    dataType = json,
        contentType = "application/json; charset=utf-8";
}); 
```

如果没有通话中的这些参数，我就无法连接，我不知道如何合并它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:57:20.230

可能是单引号没有被视为有效语法。您可以在[JSONLint.com验证您的语法](http://jsonlint.com)

改用双引号

```
data = '{"county": {"year": 2002, "stat": "crime"}}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:39:15.643

**您的部分问题是您尝试在用于处理 Web 服务响应**的代码中配置对要调用的 Web 服务的请求。

[如果您无法在 url 中传递所需的参数（例如http://web.service.com/states?level=county&year=2002&stat=crime](http://web.service.com/states?level=county&year=2002&stat=crime)），d3 似乎无法为您提供所需的灵活性。要解决这个问题，您必须退回到原始 JavaScript 并构造适当的 XMLHttpRequest，如下所示：[最简单的 SOAP 示例](https://stackoverflow.com/questions/124269/simplest-soap-example-using-javascript)。或者，如果您正在使用诸如 jquery 或 dojo 之类的库，则可能有更方便的方法来实现相同的目标。

从请求中获得结果后，您可以使用与结果一起发送的数据（假设是 json）并插入 d3 进行可视化。

# c++ - “只有非静态成员函数可以是虚拟的”

> ID：13179665
> 
> 赞同：0
> 
> 时间：2012-11-01T14:53:55.220
> 
> 标签：c++, visual-c++

出现错误，但不理解行为：

```
class A {
    virtual void foo() = 0;
    virtual int bar();
} 
```

在这里，我收到错误“只有非静态成员函数可能是虚拟的”，我为`bar();`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:54:45.003

错误信息具有误导性，问题是`bar`没有返回类型，这是非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:04:07.430

静态成员在类的所有实例之间（静态地）共享，而虚函数则公开动态行为并允许根据对象类型进行不同的执行。所以拥有静态虚函数是没有意义的。

此外，您提供的代码没有静态函数，因此请在此处发布完整版本。

# drupal-7 - drupal openlayers 弹出窗口仅显示 1 项

> ID：13179670
> 
> 赞同：1
> 
> 时间：2012-11-01T14:54:13.117
> 
> 标签：drupal-7, openlayers

我已将项目添加到地图中。一切都很好，除非我有多个具有相同地理位置的项目，它们应该都列在弹出窗口中，而现在只显示 1 个项目。我已经用 2 个具有相同地理位置的项目进行了尝试。当我单击标记时，弹出窗口中只显示一个。如果我取消发布该项目，则会显示另一个。但由于某种原因，一次只能出现一个。我查看了代码以查看两者是否都存在，但只有一个存在。

无法弄清楚出了什么问题。我已确保视图中的 openlayer 数据层允许显示所有项目并且不限制事物。

任何人都知道这是为什么？

谢谢。詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T10:56:51.267

您必须为此使用标记集群行为。在 openlayers -> maps -> your map -> behavior 下，有聚类功能。

# c# - 捕获 RichTextBox 中的所有异常

> ID：13179673
> 
> 赞同：0
> 
> 时间：2012-11-01T14:54:20.977
> 
> 标签：c#, winforms, exception, richtextbox, messagebox

我正在尝试将一个xml文件加载到界面中，并且基于xml文件中的数据可能会有很多异常，所以我想一次捕获所有异常。我得到了大约 15 个异常并显示一次`RichTextBox`或其他东西或在`MessageBox`.

```
for (int i = 0; i < this.SortedLaneConfigs.Count; i++)
    {
         if(this.SortedLaneConfigs[i].CheckConsistency())
            {
                throw new DataConsistencyException(String.Format("Lane #{0} NOT consistent : {1}", i, e.Message)
            }
    }

if (this.SortedLaneConfigs[i - 1].EndB > this.SortedConfigs[i].BeginB)
    {
        throw new DataConsistencyException(String.Format("Lanes {0} & {1}  overlap", i - 1, i));
    }

    this.SortedLaneConfigs.ForEach(
        laneConfig =>
        {
            if (this.SortedLaneConfigs.FindAll(item => item.Id == laneConfig.Id).Count != 1)
                {
                    new DataConsistencyException(String.Format("Id \"{0}\" present more than once", laneConfig.Id));
                }
        }); 
```

我知道，我可以捕获异常并以这种正常方式将其显示在消息框中。

```
 try
    {
         this.SortedLaneConfigs[i].CheckConsistency();
    }
catch (Exception e)
    {
        MessageBox.Show("Error message below: \n\"" + String.Format("Configs #{0} NOT consistent : {1}", SortedLaneConfigs[i].Id, e.Message) + "\"", "Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
    } 
```

我用谷歌搜索了它，我找到了这 2 个链接，链接 1：http: [//blogs.elangovanr.com/post/Catch-multiple-Exceptions-together-in-C.aspx](http://blogs.elangovanr.com/post/Catch-multiple-Exceptions-together-in-C.aspx)链接 2 ： [一次捕获多个异常？](https://stackoverflow.com/questions/136035/catch-multiple-exceptions-at-once)

我如何从这两个链接中调整建议的解决方案，以便在 RichTextBox 或其他东西或消息框中一次显示所有异常。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:03:49.827

如果我错了，请纠正我，但我认为您想要处理可能发生的 15 种不同的异常，并`RichTextBox`在一次拍摄中显示它们。您可以使用`try...catch`捕获它们中的每一个，收集到一个列表中，然后创建一个[AggregateException](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)。将其传递给`RichTextBox`并显示所有包含的错误。这是一个代码示例：

```
private void Form1_Load(System.Object sender, System.EventArgs e)
{
    Dictionary<int, int> dict = GetDictionaryWithData();
    try {
        DoProcessing(dict);
    } catch (AggregateException ex) {
        RichTextBox1.Text = ex.ToString;
    }
}

private Dictionary<int, int> GetDictionaryWithData()
{
    Dictionary<int, int> dict = new Dictionary<int, int>();
    {
        dict.Add(5, 5);
        dict.Add(4, 0);
        dict.Add(3, 0);
        dict.Add(2, 2);
        dict.Add(1, 0);
    }
    return dict;
}

private void DoProcessing(Dictionary<int, int> dict)
{
    List<Exception> exceptions = new List<Exception>();
    for (int i = 0; i <= dict.Count - 1; i++) {
        int key = dict.Keys(i);
        int value = dict.Values(i);
        try {
            int result = key / value;
        } catch (Exception ex) {
            exceptions.Add(ex);
        }
    }
    if (exceptions.Count > 0)
        throw new AggregateException(exceptions);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:06:11.197

您可以连接 Exception.Message 字符串并将它们显示在您喜欢的任何位置：首先创建 StringBuilder 实例，然后再输入您的方法：

```
StringBuilder exBuilder = new StringBuilder(); 
```

然后执行您的方法并附加异常消息：

```
try
{
         this.SortedLaneConfigs[i].CheckConsistency();
}
catch (Exception e)
{
        exBuilder.Append("Error message below: \n\"" + String.Format("Configs #{0} NOT consistent : {1}", SortedLaneConfigs[i].Id, e.Message) + "\"");
        exBuilder.Append(Environment.NewLine);
} 
```

完成后，您可以获得字符串`exBuilder.ToString();`

```
richTextBox1.Text = exBuilder.ToString(); 
```

**编辑：** 假设你有一个表格，上面有`RichTextbox`和`Button`。如果`Button`启动您的方法，那么用例可以是这样的：

```
public partial class Form1 : Form
{
        StringBuilder exBuilder;
        public Form2()
        {
            InitializeComponent();
            exBuilder = new StringBuilder();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            exBuilder.Clear();
            MyMethod();
            //and all your other methods that have exBuilder.Append in their try-catch blocks
            richTextBox1.Text = exBuilder.ToString();
        }

        void MyMethod()
        {
            try
            {
                //you code or whatever
            }
            catch(Exception e)
            {
                exBuilder.Append("Error message below: \n\"" + String.Format("Configs #{0} NOT consistent : {1}", parameter, e.Message) + "\"" + Environment.NewLine);
            }
        }
} 
```

# ios - 使用 IOS 登录 Facebook

> ID：13179674
> 
> 赞同：-1
> 
> 时间：2012-11-01T14:54:20.683
> 
> 标签：ios

所以这是我的困惑：

我被要求构建一个与现有 Web 应用程序一样工作的移动应用程序。Web 应用程序使用 FB 登录来验证用户身份，我需要在 ios/Android 中执行相同的操作。最简单的解决方案是使用 webview 并简单地在本机应用程序中查看 web 应用程序。这在用户使用 FB 登录之前效果很好。弹出FB登录窗口，可以登录，但是重定向到url失败，只显示一个白屏。

我的研究指出了 FBSessionDelegate 的一个问题，但我不确定这是否是问题所在。

理想情况下，我喜欢使用示例 Hackbook FB 应用程序，并在登录后将用户重定向到 Web 应用程序，但我对两者之间的身份验证路径有点迷茫。

非常感谢任何想法或帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:56:22.887

看看[Facebook 的指南](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)？

# knockout.js - Knockjs 映射数组未附加到父对象

> ID：13179675
> 
> 赞同：0
> 
> 时间：2012-11-01T14:54:29.023
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

如果服务器是 JSON，我使用 knockoutjs.mapping 来映射现有对象返回。

该对象类似于购物车编辑器[示例](http://knockoutjs.com/examples/cartEditor.html)，项目的主要区别已经存在。

这是我的尝试[http://jsfiddle.net/9ej3r/](http://jsfiddle.net/9ej3r/)

映射很简单：

```
var mapping = {
            'Items': {
                create: function(options) {
                    return new InvoiceItem(options.data);
                },
                key: function(data){
                    return ko.utils.unwrapObservable(data.ID);
                }
            }
        }; 
```

当我单击删除时，我收到错误：“this.Items in undefined”

我在这里做错了什么？如何调整购物车编辑器示例以使用现有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:09:10.200

您已经被`this`javascript 的工作原理所困扰。

因为当您的`removeItem`方法被调用时，`this`将是实际项目，例如`InvoiceItem`不是，`Invoice`所以您需要捕获变量中的“其他”`this`并在您的函数中使用它来访问`Invoice`.

所以你`removeItem`应该看起来像这样：

```
var self = this;

this.removeItem = function (item) { 
   self.Items.remove(item);
} 
```

另请参阅此[演示](http://jsfiddle.net/nemesv/zs3UU/)。

您应该注意，[购物车编辑器示例](http://knockoutjs.com/examples/cartEditor.html)`removeLine`在方法中也使用了这种技术

```
var self = this;
self.removeLine = function(line) { self.lines.remove(line) }; 
```

# python - Django服务器错误

> ID：13179678
> 
> 赞同：1
> 
> 时间：2012-11-01T14:54:34.893
> 
> 标签：python, django

我似乎无法弄清楚为什么我突然开始列出服务器错误。有任何想法吗？

完整的追溯：

```
Traceback (most recent call last):
  File "C:\Python27\lib\wsgiref\handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Python27\lib\site-packages\django\contrib\staticfiles\handlers.py", line 67, in __call__
    return self.application(environ, start_response)
  File "C:\Python27\lib\site-packages\django\core\handlers\wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "C:\Python27\lib\site-packages\django\core\handlers\base.py", line 179, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File "C:\Python27\lib\site-packages\django\core\handlers\base.py", line 221, in handle_uncaught_exception
    return debug.technical_500_response(request, *exc_info)
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 66, in technical_500_response
    html = reporter.get_traceback_html()
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 286, in get_traceback_html
    c = Context(self.get_traceback_data())
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 244, in get_traceback_data
    frames = self.get_traceback_frames()
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 390, in get_traceback_frames
    pre_context_lineno, pre_context, context_line, post_context = self._get_lines_from_file(filename, lineno, 7, loader,
 module_name)
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 371, in _get_lines_from_file
    context_line = source[lineno].strip('\n')
IndexError: list index out of range
[01/Nov/2012 10:46:55] "GET /home HTTP/1.1" 500 59
Traceback (most recent call last):
  File "C:\Python27\lib\wsgiref\handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Python27\lib\site-packages\django\contrib\staticfiles\handlers.py", line 67, in __call__
    return self.application(environ, start_response)
  File "C:\Python27\lib\site-packages\django\core\handlers\wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "C:\Python27\lib\site-packages\django\core\handlers\base.py", line 179, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File "C:\Python27\lib\site-packages\django\core\handlers\base.py", line 221, in handle_uncaught_exception
    return debug.technical_500_response(request, *exc_info)
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 66, in technical_500_response
    html = reporter.get_traceback_html()
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 286, in get_traceback_html
    c = Context(self.get_traceback_data())
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 244, in get_traceback_data
    frames = self.get_traceback_frames()
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 390, in get_traceback_frames
    pre_context_lineno, pre_context, context_line, post_context = self._get_lines_from_file(filename, lineno, 7, loader,
 module_name)
  File "C:\Python27\lib\site-packages\django\views\debug.py", line 371, in _get_lines_from_file
    context_line = source[lineno].strip('\n')
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:07:36.303

我不知道您使用的是任何类型的网络服务器，还是只是开发服务器。在任何情况下，关闭您正在使用的任何服务器，并清理项目中的所有 .pyc 文件。重新启动网络服务器，您应该一切顺利。

最常见的是编译文件和源文件不匹配。至于为什么会发生这种情况，没有任何线索，但它过去曾发生在我身上：做上述为我解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:03:19.060

所以我终于弄明白了……我设置了 debug = False，只是为了看看会发生什么，因为回溯包含 debug.py。无论如何，我仍然是一个初学者，甚至不知道这是否真的有意义，但是在我在我的设置中更改 debug = False 之后，我得到了一个新的回溯，它告诉我我的一个 CHOICES 在我的一个表格不匹配。我完全不明白为什么这会使开发服务器崩溃，但我修复了它，现在它可以工作了。因此，要澄清问题所在：

```
#forms.py

PAYMENT_PLAN = {
    ('A', 'A'),
    ('B', 'B'),
    ('C', 'C'),
}

class SurveyForm(ModelForm):
    class Meta:
        model = Survey
        widgets = {
            'pay_plan': Select(choices=PAY_PLAN),
            ...
        } 
```

因此，带有 debug=False 的新回溯声明：

```
NameError: name 'PAY_PLAN' is not defined 
```

所以无论如何，我解决了这个问题，现在它又可以工作了。因此，如果有人遇到同样的问题，请尝试将 debug=False 设置为看看会发生什么，也许它会帮助您解决问题。

# css - 如何覆盖css img属性？

> ID：13179679
> 
> 赞同：3
> 
> 时间：2012-11-01T14:54:35.797
> 
> 标签：css, html, overriding

我注意到[twitter bootstrap](http://twitter.github.com/bootstrap/) (2.2.1) 和Internet Explorer 中的[广告库之间存在奇怪的冲突。](http://coffeescripter.com/code/ad-gallery/)

原来 bootstrap.min.css 中的这行导致问题并且图像不显示：

```
img{max-width:100%;width:auto\9;height:auto;vertical-align:middle;border:0;-ms-interpolation-mode:bicubic;} 
```

当我删除这两个时，一切正常：

```
width:auto\9;height:auto; 
```

但是，我没有删除那些我试图覆盖这些属性，但到目前为止这些都没有奏效：

```
.ad-gallery img{width:default;height:default;}
.ad-gallery img{width:none;height:none;}
.ad-gallery img{width:auto;height:auto;} 
```

如何覆盖这些属性？

顺便提一句。google chrome 和 Mozilla firefox 没有任何问题。[您可以从此处](http://bedavaemlaksitesi.com/adgallery-bootstrap-conflict/ilan-detay.html)使用原始 bootstrap min css 文件检查示例，该文件不起作用。

[这是从此处](http://bedavaemlaksitesi.com/adgallery-bootstrap-conflict/ilan-detay-2.html)修改 bootstrap-modified.min.css 的工作示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:29:04.950

**正如所观察到的， img**的父**div**（具有类**ad-image**）具有以下内联样式：

 **```
 left: 230px;
    top: 160px;
    width: 0px;
    height: 0px; 
```

这实际上是您的**img**的宽度和高度也为零的原因。

哦，我知道您没有放置这些样式，因为它在 Chrome（或 FF）中具有不同的价值。那么，问题出在哪里？是的，没错，它来自 JavaScript。

我检查了您使用**jquery.ad-gallery.js**的插件并进行了一些调试。

I found out that the plugin is computing the dimension and position of the **ad-image** container using the dimension of the **img**. The dimension of the img is acquired using the dimension of the preloaded (cached) image.

The problem with IE is that it's returning back zero-value dimensions for the image causing its parent, which height and width are computed using it, to also have zero-value dimensions.

Try to check if you can solve this JS issue. I believe that once this is solved, your issue will also be solved without additional CSS styles.

As a **work-around**, add the following rule to your css:

```
 .ad-image {
        left: 0 !important;
        top: 0 !important;
        width: inherit !important;
        height: inherit !important;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T14:09:11.177

JS

```
$(function(){
    var galleries = $('.ad-gallery').adGallery({
        effect: ($.browser.msie) ? 'none' : 'slide-hori',
        callbacks: {
            afterImageVisible: function() {
                if ($.browser.msie) {
                    var img = this.current_image.find('img');
                    var size = this._getContainedImageSize(img.width(), img.height());
                    img.width(size.width).height(size.height);
                    img.css('margin-left', (this.current_image.width() - img.width()) / 2);
                    img.css('margin-top', (this.current_image.height() - img.height()) / 2);
                }
            }
        }
    });
}); 
```

CSS

```
<!--[if IE]>
<style>
    .ad-gallery .ad-image {
        left: 0 !important;
        top: 0 !important;
        width: inherit !important;
        height: inherit !important;
    }
</style>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:04:29.647

我相信 DOM 的选择器层次结构有问题。尝试：

```
.ad-gallery img{width:auto!important;} 
```**

# mysql - 使用 MySQL 从子查询中创建字符串？

> ID：13179681
> 
> 赞同：0
> 
> 时间：2012-11-01T14:54:40.577
> 
> 标签：mysql, sql, string, function

我希望做的是**在查询**中从表中创建一个字符串，以便我可以将该字符串放在我正在创建的另一个查询中。说，我有这张桌子：

```
index | position   | name
----------------------------------------
1     | member     | John Smith
2     | chair      | Mary Jones
3     | member     | Mary Jones
4     | contact    | Grace Adams
5     | director   | Grace Adams
6     | member     | Grace Adams
7     | treasurer  | Bill McDonnell
8     | vice chair | Bill McDonnell
9     | member     | Ishmael Rodriguez 
```

我正在寻找如下结果：

```
name               | positions
----------------------------------------
John Smith         | member
Mary Jones         | chair,member
Grace Adams        | contact,director,member
Bill McDonnell     | treasurer,vice chair
Ishmael Rodriguez  | member 
```

我希望我可以使用 CONCAT_WS() 的一些变体来获得我的结果，就像这样......

```
SELECT
a.NAME,
CONCAT_WS(
    ',',
    (
        SELECT
            position
        FROM
            TABLE
        WHERE
            NAME = a.NAME
    )
)AS positions FROM --------------- 
```

显然，这不适合我。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:55:35.350

使用**[GROUP_CONCAT ^([文档])](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)**

```
SELECT name, GROUP_CONCAT(position) result
FROM tableName
GROUP BY name
ORDER BY `index` 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/fe974/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:55:57.510

[**`GROUP_CONCAT`**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)像这样使用：

```
SELECT name, GROUP_CONCAT(position SEPARATOR ',')
FROM Table
GROUP BY name 
```

# java - 通过 XSD 架构验证 JSON

> ID：13179686
> 
> 赞同：3
> 
> 时间：2012-11-01T14:55:00.353
> 
> 标签：java, xml, json, filter, xsd

我有从 servlet 过滤器中的 http 请求正文获得的 JSON 对象。我需要通过 XSD 架构对其进行验证。主要的复杂性是，当我将此 JSON 对象转换为 XML 时，缺少 XMLRootElement 并且没有命名空间（但在 XSD 命名空间中存在），因此验证失败。

此外，我无法将此 JSON 解组为 POJO，因为此 Web 过滤器广泛用于大量 Web 服务。

有任何想法吗？

# android - 进度对话框仅在异步任务中显示很短的时间，并且活动加载很慢

> ID：13179687
> 
> 赞同：3
> 
> 时间：2012-11-01T14:55:02.723
> 
> 标签：android, android-asynctask, android-progressbar

我正在开发我的第一个 Android 应用程序，我想显示一个进度对话框，直到在 doInBackground 方法中处理一个 xml 文件。加载此活动以响应 onclick 事件。出乎意料的是，活动需要几秒钟才能显示出来，并且进度对话框显示的时间很短（几毫秒）。

这是我的代码。我使用 AsyncTask 作为内部类。我只是找不到哪里出错了。

```
public class WhatToSee extends ListActivity {
ListView whatToSee;
ArrayList<HashMap<String, String>> whatToSeeInfo = new ArrayList<HashMap<String, String>>();
WhatToSeeAdapter adapter;
String cityName;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.whattosee);
    cityName = getIntent().getStringExtra("name");
    whatToSee = (ListView) findViewById(android.R.id.list);
    adapter= new WhatToSeeAdapter(this, whatToSeeInfo);
    whatToSee.setAdapter(adapter);
    new WhatToSeeLoader().execute();
}

public class WhatToSeeLoader extends AsyncTask<Void, String, String> {
    ProgressDialog progress = new ProgressDialog(WhatToSee.this);
    String url = "http://wearedesigners.net/clients/clients12/tourism/fetchWhatToSeeList.php";
    final String TAG_MAIN = "item";
    final String TAG_ID = "itemId";
    final String TAG_NAME = "itemName";
    final String TAG_DETAIL = "itemDetailText";
    final String TAG_MAP = "itemMapData";
    final String TAG_ITEM_IMAGE = "itemImages";
    final String TAG_MAP_IMAGE = "mapImage";
    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(url); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element
    NodeList nl = doc.getElementsByTagName(TAG_MAIN);

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        progress.setMessage("Loading What To See List");
        progress.setIndeterminate(true);
        progress.show();

    }

    @Override
    protected String doInBackground(Void... params) {
        // TODO Auto-generated method stub
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(TAG_ID, parser.getValue(e, TAG_ID));
            map.put(TAG_NAME, parser.getValue(e, TAG_NAME));
            map.put(TAG_DETAIL, parser.getValue(e, TAG_DETAIL));
            map.put(TAG_MAP, parser.getValue(e, TAG_MAP));
            map.put(TAG_MAP_IMAGE, parser.getValue(e, TAG_MAP_IMAGE));
            map.put(TAG_ITEM_IMAGE, parser.getValue(e, TAG_ITEM_IMAGE));

            // adding HashList to ArrayList
            whatToSeeInfo.add(map);
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        adapter.notifyDataSetChanged();
        progress.dismiss();

    }

} 
```

}

有人可以帮我吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:02:39.480

很可能调用`String xml = parser.getXmlFromUrl(url); // getting XML`会减慢您的代码。它在主线程中执行，我希望它（从它的名字）做一些与网络相关的工作，这些工作基本上不应该在 UI 线程中完成（例如在 Yours`doInBackground`方法中）。
因此，要修复尝试将与 xml 相关的初始化人员移到`doInBackground()`.

# javascript - 电话号码的 Javascript 验证（数字、空格、点、连字符）

> ID：13179690
> 
> 赞同：0
> 
> 时间：2012-11-01T14:55:09.750
> 
> 标签：javascript, validation

所以我对字母数字`(/^[A-Za-z0-9,\+-]+$/)`进行了验证，但是我想要对只允许数字、空格、点和连字符的电话号码进行验证。我会用什么代码来检查这些。

谢谢本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:04:48.157

> 根据我的规范，它只有数字、空格、点和连字符。那是任何顺序和任何长度

那将是：

```
/^[0-9 \.-]+$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:06:36.967

看到[这个参考](http://www.regular-expressions.info/reference.html)，

```
/^[\d\s\.\-]+$/ 
```

`\d`是数字，`\s`是空格，`\.`是点，`\-`是连字符。表示and 中的“一个或多个”字符， and
分别`+`匹配`[`字符串`]`的开头和结尾。`^``$`

如果您的电话号码以国家/地区代码开头，您可能还需要一个加号作为第一个非空白字符

```
/^(?:\s*\+)?[\d\s\.\-]+$/ 
```

在这里，`(?:`..`)`表示“不为该组创建引用”，`*`表示前一个字符的零个或多个，`\+`是加号，`(`..`)?`表示“此组是可选的”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T21:21:43.757

我只是在处理类似问题时想到了这个。这应该可以解决大多数美国和国际号码。

```
/(?<optional>[+])?(?:(?<countryCode>\d)[.-]?)?[\s]?\(?(?<areaCodes>\d{3})\)?[.-]?[\s]?(?<codeOne>\d{3})[.-]?[\s]?(?<codeTwo>\d{4,})/g 
```

如您所见，前面的 + 是*可选*的，*countryCode*是可选的，后面可以跟, ***。-***或空格，*areaCode*是强制性的，它必须完全匹配三个数字，后跟剩余的数字。

# c# - Azure 表服务 2012 年 10 月版中的投影，不使用字符串来引用列

> ID：13179691
> 
> 赞同：1
> 
> 时间：2012-11-01T14:55:11.787
> 
> 标签：c#, azure, azure-storage, azure-table-storage

在以前版本的表存储 API 中，我们不得不使用上下文和`new`表达式来处理服务器端的投影以节省带宽：

```
var result =
    GetContext().CreateQuery<MyEntity>(TABLENAME)
    .Where(...)
    .Select(e => new { e.ColumnToProject }) //convenient to have the real reference to the entity's properties here
    .AsTableServiceQuery().ToList().Select(ee => ee.ColumnToProject); 
```

在2012 年 10 月 API 的[本指南](https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#header-14)中，微软使用带有 EntityResolver 的 DynamicTableEntity 来处理投影。语法不必要地复杂，单词的东西是您需要使用字符串来引用列名。

```
var result =
    tableReference.ExecuteQuery(
        new TableQuery<DynamicTableEntity>()
            .Where(...)
            .Select(new[] {"ColumnToProject"}),
        (key, rowKey, timestamp, properties, etag) => 
            properties["ColumnToProject"].GuidValue) //lets say ColumnToProject contains a guid in this example
    .ToList() 
```

有没有更漂亮的方法来使用新的 API 版本进行投影？特别是这样我就可以使用对列名的真实引用而不是字符串，如果稍后在实体中更改属性名称，这将非常不方便并且容易忘记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:50:28.753

不幸的是，它看起来不像。（我自己在寻找更漂亮的方式时发现了你的问题）

根据描述更改的团队博客条目；

> 请注意，对于此版本，我们没有提供 IQueryable 实现，因此将应用程序迁移到 2.0 版本并希望利用新表实现的开发人员需要使用提供的语法重建他们的查询。

[Windows Azure 存储客户端库 2.0 表深入了解](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx)

# html - 网站上的动画图片

> ID：13179693
> 
> 赞同：-5
> 
> 时间：2012-11-01T14:55:16.750
> 
> 标签：html, css

为 5 张图片/照片制作动画有多容易？

例如[http://artyougrewupwith.com/](http://artyougrewupwith.com/)

![在此处输入图像描述](../Images/706dcda57395eeb1afd3b03d6e36f611.png)

用于实现此效果的最佳语言是什么？

问候

茶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:05:05.410

你可以做一个动画 gif（这是相当古老的技术），或者你可以用 javascript 设置一个计时器来切换图像源。我建议使用 javascript 代码。这是一个示例：

```
var i=0;
var imageSrcs=['image1.png','image3.png','image3.png','image4.png','image5.png'];
var imageElement=document.getElementById('imageToAnimate');
setInterval(
   function(){
      imageElement.src=imageSrcs[i];
      i=(i+1)%(imageSrcs.length+1);
   },1000)//Every 1000 milliseconds 
```

这将以 1/秒的速度循环遍历阵列中的图像，并在到达终点后重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:56:35.567

至少有两种方法可以做到这一点（不包括 Flash）：

**JavaScript：**

今天最常见的方法可能是使用 JavaScript。自己从头开始编写它可能需要一些时间，尤其是如果您不习惯编写 JavaScript。但是，如果您可以使用像[jQuery](http://jquery.com/)这样的库，那么有很多插件可以做到这一点。

这是一个例子：

*   [http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)

**CSS**

通过 CSS3 添加的功能，CSS 变得越来越强大，也可以用它来完成幻灯片放映。Smashing Magazine 有[一篇](http://coding.smashingmagazine.com/2012/04/25/pure-css3-cycling-slideshow/)关于如何实现的文章。这是一个可能看起来像[的示例。](http://www.alessioatzeni.com/CSS3-Cycle-Image-Slider/)

此解决方案的缺点是浏览器对新 CSS 功能的支持有限。

# ruby-on-rails-3 - Rails TextHelper“突出显示”方法用于不区分大小写的搜索

> ID：13179695
> 
> 赞同：0
> 
> 时间：2012-11-01T14:55:24.223
> 
> 标签：ruby-on-rails-3

我正在使用 Rails TextHelper“突出显示”方法突出显示搜索字符串。

```
<%= simple_format highlight("Some test text", "some") %> 
```

但是，它似乎区分大小写。这个函数有不区分大小写的版本吗？或者也许我错过了一些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:21:12.943

杜哦！事实证明，Highlight 方法已经不区分大小写了。

我在行前检查了字符串是否包含查询文本。我使用了 ruby​​ .include？不区分大小写的方法！

```
<% if query && faq.answer.downcase.include?(query.downcase) %> 
  <%= highlight(excerpt(faq.answer, query, :radius => 100), query) %>
<% else %>
  <%= truncate(faq.answer, :length => 200) %> 
<% end %> 
```

在包含上使用小写字母？检查使它工作。

# node.js - 玉：动态图片网址

> ID：13179700
> 
> 赞同：0
> 
> 时间：2012-11-01T14:55:30.647
> 
> 标签：node.js, pug

我正在尝试在玉中设置图像网址...

我有这个：`img(src = 'http://192.168.1.8:8081')`

我需要用服务器地址自动更改192.168.1.8...

例如，如果我从办公室连接到我的服务器，我的 url 应该变成`img(src = 'http://myPUBLICserveraddress:8081')`

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:03:17.870

我是用 Dust.js 做的，但是原理应该是一样的。我这样做的方法是在应用程序上为开发和生产设置一个`hostname`and属性（在and`port`中分配），然后在模板中，我只做 Dust.js 相当于：`app.configure('development')``app.configure('production')`

```
- if (port)
    img(src="http://#{host}:#{port}")
- else
    img(src="http://#{host}") 
```

我得到了我正在寻找的东西，这是基于环境（开发与生产）的正确链接。

# c++ - 哪些模拟框架适用于 cppunit？

> ID：13179701
> 
> 赞同：5
> 
> 时间：2012-11-01T14:55:34.393
> 
> 标签：c++, unit-testing, mocking, cppunit

我正在为一个大型`C++`项目实施单元测试基础设施，由于政治原因，我几乎可以肯定[`CppUnit`](http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page)会被推为单元测试框架。

我正在尝试识别与[CppUnit](http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page)混合的模拟框架。我找到[了 mockpp](http://mockpp.sourceforge.net/index-en.html)，我听说[`Google Mock`](http://code.google.com/p/googlemock/)应该可以。

与哪些框架一起工作[`CppUnit`](http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:09:13.160

模拟库通常独立于单元测试框架。他们完成了两项不同的工作，坦率地说，没有太多理由互相交谈。他们整合的地方是回答这些问题：

*   我应该什么时候创建我的模拟对象？
*   我应该什么时候用我的期望初始化模拟对象？
*   我应该何时验证模拟是否按预期调用？

你在测试中的适当点这样做。

例如，检查 opmock。 [http://sourceforge.net/projects/opmock/](http://sourceforge.net/projects/opmock/)

根据他们的 wiki，opmock 很容易从 CppUnit 测试中调用。见[http://sourceforge.net/p/opmock/wiki/Using%20Opmock%20with%20other%20unit%20testing%20frameworks/](http://sourceforge.net/p/opmock/wiki/Using%20Opmock%20with%20other%20unit%20testing%20frameworks/)

# ios - UICollectionView 双向滚动

> ID：13179703
> 
> 赞同：22
> 
> 时间：2012-11-01T14:55:37.763
> 
> 标签：ios, scroll, uicollectionview, uicollectionviewlayout

我用`UICollectionView`垂直卷轴做了一个。

单元格的宽度大于屏幕宽度，所以我创建了一个`customFlowLayout`基于`UICollectionViewFlow`布局返回正确计算的内容大小。

但是，这不起作用。当单元格的宽度小于屏幕宽度时，它可以工作。这是否意味着我们在垂直滚动中的宽度不能超过屏幕宽度？

水平滚动也是一样，但是高度`CollectionView`限制为屏幕高度。

有什么办法让它工作吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-16T23:28:13.423

正如其他人已经说过的那样，`UICollectionView`只能使用流布局滚动一个方向。但是，您无需创建自定义布局或使用第三方库即可轻松完成此操作。

当您在故事板中展示您的视图时，您可以将您的`UICollectionView`嵌入文件放入`UIScrollView`. 将滚动视图设置为水平滚动和`UICollectionView`垂直滚动。然后将 设置`UICollectionView.delaysContentTouches`为 true 以便触摸将传递到`UIScrollView`并且不认为您正在尝试滚动集合视图。

当您设置 时`UICollectionView`，将其大小和单元格的大小设置为您实际希望它们的大小（比实际屏幕宽）并相应地布置它们。

现在在包含`UIViewController`将此代码放入视图生命周期中

```
 - (void)viewDidLayoutSubviews {
        self.myScrollView.contentSize = self.myCollectionView.frame.size;
    } 
```

从字面上看，这就是完成您所描述的内容所需要做的一切。现在，您的滚动视图应该允许您水平滚动以查看整个单元格，并且您的 collectionView 应该垂直滚动您的单元格。

快乐编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T12:52:23.203

在你可以这样做之前，你必须使用不同类型的布局。流布局将其项目表示为列表，并根据可用宽度在单元格中跨越这些项目。如果您想同时进行水平和垂直滚动，则需要以某种方式指定网格的列数。FlowLayout 没有。一个简单的解决方案是创建 UICollectionViewLayout 的子类并覆盖 collectionViewContentSize 以使其将 width = 重新调整为一行单元格宽度的总和（这是需要知道你想要多少列的地方），加上任何额外的间距他们。如果您的单元格每列的大小相同，这将正常工作，类似于网格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:10:57.040

我不确定我是否理解你的问题。

但是，如果您制作了自定义布局，请确保您已实现：

```
- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath; 
```

并且您的布局属性框架和大小设置为您的“大单元”索引路径的正确值。

还要确保您已实施：

```
- (CGSize) collectionViewContentSize; 
```

该方法返回集合 View 的 contentSize。如果 contentSize.width > youAppFrame.width 你应该有水平滚动。高度和垂直滚动相同。

还要确保您的 collectionView 允许滚动，并且您的布局使用以下方法正确准备：

```
- (void)prepareLayout 
```

顺便说一句，对于您的布局，您是否超载`UICollectionViewLayout`或`UICollectionViewFlowLayout`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-07T12:07:02.370

您应该将 UITableView 嵌入到 UIScrollView 中。ScrollView 和 TableView 将具有相同的高度但不同的宽度。这样 UITableView 将垂直滚动， UIScrollView 将水平滚动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-11T06:46:10.107

Xcode 11+，斯威夫特 5。

我解决了我的问题，我准备了[视频](https://www.youtube.com/watch?v=qMrH5_Yj5hM)和[代码](https://github.com/AhmAbdallah/CustomCollectionView)

# java - ComboBox 将所有值加在一起作为一个值

> ID：13179704
> 
> 赞同：1
> 
> 时间：2012-11-01T14:55:42.323
> 
> 标签：java, swing, arraylist, jcombobox

我现在正在制作一个应用程序，现在我需要用我从 arrayList 类型的另一个类中获得的所有值填充一个组合框。

这是我用来填充组合框的代码：

```
public void setComboBox(){
    MessageConsole mc = new MessageConsole(textArea);
    //The redirectOut will redirect the text from the System.out.prtnln to the text area.
    mc.redirectOut();
    List<String> arrayList = new ArrayList<String>();
    if(gf.loadCombo("config") != null){
    arrayList.addAll(gf.loadCombo("config"));
        for (int i = 0; i < arrayList.size(); i++) {
            String s = arrayList.get(i);
            configName.removeItem(s);
            configName.addItem(s);
        }
    }
} 
```

这是另一个类的代码：

```
public Collection<String> loadCombo(String property) {
    //Check if the property file is present in the given directory.
    if(cf.checkProperty()==true){
        //Check is there are any properties saved in the property file.
        if(cf.getProperty() != null){
            Properties prop = new Properties();
            FileInputStream fis;
            try {
                fis = new FileInputStream("config.properties");
                prop.load(fis);

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //Check if the properties match with the entered configuration.
            List<String> arrayList = new ArrayList<String>();
            arrayList.addAll(cf.getProperty());
            Collection<String> propertyList = new ArrayList<String>();
            for (int i = 0; i < arrayList.size(); i++) {
                String s = arrayList.get(i);
                if(s.startsWith(property)){
                    System.out.println("This value has been added to the arrayList from the other class: "+s);
                    propertyList.add(cf.getPropertyValue(s));
                }
            }
            return propertyList;
        }

        //The system prints a message of the missing properties.
        else{
            System.out.println("You need to save a configuration first.");
        }
    }

    //The system prints a message of the missing property file.
    else{
        System.out.println("The property file is either missing or could not be found. in de Load class");
    }
    return null;
} 
```

以下是结果的屏幕截图：

![在此处输入图像描述](../Images/7c31a089ff3069778e24f08189d249e7.png)

如您所见，所有值都作为 1 long String"[3, 2, 1]" 添加到组合框中。谁能告诉我为什么会这样？

提前致谢，

洛达努德

PS我希望这是问我问题的正确方法，我希望我的问题足够清楚，让每个人都能理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:24:40.840

乍一看，问题可能是以下两种情况之一：

1.  该`loadCombo`方法返回值“[3 2 1]”。更具体地说，来自`cf.getProperty()`. 从提供的上下文中不清楚`cf`是什么。
2.  值“[3 2 1]”在您的代码中的其他位置添加到您的组合框中。如果可能是这种情况，请尝试使用`configName.removeAllItems()`而不是删除然后添加集合中的每个项目。

此外，在您的`loadCombo`方法中，您将 config.properties 文件加载到 Properties 对象中，然后对其不执行任何操作。看来您的意图是从该文件而不是`cf`对象加载配置属性。

# cordova - build.phonegap.com 在多大程度上是跨平台的？

> ID：13179706
> 
> 赞同：0
> 
> 时间：2012-11-01T14:55:42.800
> 
> 标签：cordova, mobile

根据他们主页 build.phonegap.com 上的描述，您可以使用 Xcode 为 IOS 开发应用程序，然后以某种方式将其提交到 build.phonegap.com，它会为您提供适用于所有移动平台的构建。

那是对的吗？有那么容易吗？如果不是，请解释。

如果我使用的是 IOS 插件，例如[ChildBrowser 插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser)，它还能工作吗？

![在此处输入图像描述](../Images/2ff6d7af092c4a25a2bb308ce27bfa73.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:45:49.003

是的，只要确保您没有编写任何 iOS 特定代码即可。

> 前往[https://build.phonegap.com/docs/plugins](https://build.phonegap.com/docs/plugins)并向下滚动到 Childbrowser 插件。您将看到在线构建服务支持该插​​件。请参阅我之前关于此主题的回答以及如何编辑 config.xml 文件：[单击此处](https://stackoverflow.com/questions/15384252/phonegap-barcodescanner-sharing-plugin/15408997?noredirect=1#comment21811299_15408997)

# c++ - 比较整数会产生奇怪的结果

> ID：13179711
> 
> 赞同：0
> 
> 时间：2012-11-01T14:55:54.940
> 
> 标签：c++

我试图了解通常的算术转换并尝试测试：

```
(static_cast<unsigned char>(std::numeric_limits<unsigned char>::max()) > static_cast<signed char>(-1)) 
```

这评估为真，这没关系，但根据算术转换它应该导致假（最后一个项目符号）：

> > 对操作数执行积分提升，如下所示：
> 
> 如果任一操作数是 unsigned long 类型，则另一个操作数将转换为 unsigned long 类型。
> 
> 如果不满足前面的条件，并且如果一个操作数是 long 类型而另一个是 unsigned int 类型，则两个操作数都将转换为 unsigned long 类型。
> 
> 如果不满足上述两个条件，并且其中一个操作数是 long 类型，则将另一个操作数转换为 long 类型。
> 
> 如果不满足上述三个条件，并且其中一个操作数是 unsigned int 类型，则将另一个操作数转换为 unsigned int 类型。
> 
> 如果上述条件都不满足，则两个操作数都转换为 int 类型。

最后一个项目符号表示，如果不满足其他条件，则两个操作数都将转换为 int 类型。在此 unsigned char(max_char) 之后，位模式将仅填充为 1，而 signed char(-1) 将具有仅以 1 填充的位模式。这意味着 1 > 1 == false，但我得到了正确的结果。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:00:25.050

没错，最后一个项目符号是使用的项目符号，因此两个操作数都转换为 type `int`。左边是`(unsigned char)255`，右边是`(signed char)-1`。由于 255 和 -1 都可以表示为`int`，因此它们分别转换为`(int)255`和`(int)-1`，并且由于 255 大于 -1，因此返回`true`。

# visual-studio - git 和 subversion 的插件在同一个 IDE

> ID：13179713
> 
> 赞同：2
> 
> 时间：2012-11-01T14:55:57.387
> 
> 标签：visual-studio, git, svn, version-control

是否可以在同一个 IDE 上使用两个不同的源代码管理插件？

（颠覆和 git）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:57:03.227

是的。
VS 通常会找出每个项目使用哪个源代码管理插件。

如果没有，您可以通过单击工具、选项、源代码管理来告诉它使用哪一个。

# linux - RedHat Enterprise Linux 6 上的进程超出线程堆栈大小限制？

> ID：13179717
> 
> 赞同：4
> 
> 时间：2012-11-01T14:56:08.773
> 
> 标签：linux, linux-kernel, pthreads, redhat, ulimit

我有几个在 RHEL 6.3 上运行的进程，但由于某种原因，它们超出了线程堆栈大小。

例如，Java 进程在启动时在运行时被赋予 -Xss256k 的堆栈大小，而 C++ 进程在实际代码中使用 pthread_attr_setstacksize() 被赋予 1MB 的线程堆栈大小。

然而，出于某种原因，这些过程并没有遵守这些限制，我不确定为什么。

例如，当我运行

```
pmap -x <pid> 
```

对于 C++ 和 Java 进程，我可以看到每个线程都有数百个“匿名”线程（我已经确认是这些进程中的每一个创建的内部工作线程），但是每个分配的值是 64MB，而不是设置的限制以上：

```
00007fa4fc000000 168 40 40 rw--- [ anon ] 
00007fa4fc02a000 65368 0 0 ----- [ anon ] 
00007fa500000000 168 40 40 rw--- [ anon ] 
00007fa50002a000 65368 0 0 ----- [ anon ] 
00007fa504000000 168 40 40 rw--- [ anon ] 
00007fa50402a000 65368 0 0 ----- [ anon ] 
00007fa508000000 168 40 40 rw--- [ anon ] 
00007fa50802a000 65368 0 0 ----- [ anon ] 
00007fa50c000000 168 40 40 rw--- [ anon ] 
00007fa50c02a000 65368 0 0 ----- [ anon ] 
00007fa510000000 168 40 40 rw--- [ anon ] 
00007fa51002a000 65368 0 0 ----- [ anon ] 
00007fa514000000 168 40 40 rw--- [ anon ] 
00007fa51402a000 65368 0 0 ----- [ anon ] 
00007fa518000000 168 40 40 rw--- [ anon ] 
... 
```

但是，当我使用所有 64MB 的“匿名”线程在上述进程中运行以下命令时

```
cat /proc/<pid>/limits | grep stack 

Max stack size 1048576 1048576 bytes 
```

它显示的最大线程堆栈大小为 1MB，所以我对这里发生的事情有点困惑。此外，调用这些程序的脚本也设置了“ulimit -s 1024”。

应该注意的是，这似乎只发生在使用非常高端的机器（例如 48GB RAM，24 个 CPU 内核）时。该问题不会出现在功能较弱的机器上（例如 4GB RAM、2 个 CPU 内核）。

任何帮助理解这里发生的事情将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:39:36.910

事实证明，RHEL6 2.11 改变了线程模型，使得每个线程尽可能分配到自己的线程池，因此在更大的系统上，您可能会看到它占用了 64MB。在 64 位上，允许的最大线程池数更大。

解决此问题的方法是添加

```
export LD_PRELOAD=/path/to/libtcmalloc.so 
```

在启动进程的脚本中（而不是使用 glibc2.11）

有关这方面的更多信息可从以下网址获得：

Linux glibc >= 2.10 (RHEL 6) malloc 可能会显示过多的虚拟内存使用情况 [https://www.ibm.com/developerworks/mydeveloperworks/blogs/kevgrig/entry/linux_glibc_2_10_rhel_6_malloc_may_show_excessive_virtual_memory_usage?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/kevgrig/entry/linux_glibc_2_10_rhel_6_malloc_may_show_excessive_virtual_memory_usage?lang=en)

glibc bug malloc 为多线程应用程序使用过多内存 [http://sourceware.org/bugzilla/show_bug.cgi?id=11261](http://sourceware.org/bugzilla/show_bug.cgi?id=11261)

Apache hadoop 通过设置 MALLOC_ARENA_MAX [https://issues.apache.org/jira/browse/HADOOP-7154解决了这个问题](https://issues.apache.org/jira/browse/HADOOP-7154)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:17:41.383

[使用setrlimit(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/setrlimit.2.html)`/proc/1234/limits`设置报告的堆栈大小（可能由[PAM](http://en.wikipedia.org/wiki/Linux_PAM)子系统在登录时设置）。

我不知道为什么实际的堆栈段似乎每个都是 64Mb。也许您的大型服务器使用[大页面](http://en.wikipedia.org/wiki/Huge_pages)（但您的桌面没有）。

您可能会在调用程序的脚本中调用`setrlimit`（可能使用内置的`ulimit`bash 或内置的`limit`zsh）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:25:28.810

您可以使用`ulimit -s <size_in_KB>`设置进程的最大堆栈大小。您也可以看到当前限制使用`ulimit -s`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T04:26:09.640

@rory根据您的回答，64mb块地址应该是堆地址，但是现在地址就像00007fa50c02a000一样，是堆栈地址，对吗？

# javascript - 如果我在 javascript 中使用 alert(element) 会发生什么？

> ID：13179725
> 
> 赞同：-6
> 
> 时间：2012-11-01T14:56:46.063
> 
> 标签：javascript

它总是只显示'null'。我试图找出当您输入警报（元素）时会发生什么，而不是警报（元素.id）或任何其他属性，而是像按钮或td这样的实际元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:58:30.977

那么它不是一个元素，而是 `null`. 如果它真的是一个元素，它会调用`.toString()`它，这会产生一个类似的字符串`"[object HTMLDivElement]"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:59:55.270

如果传递给[`alert`](https://developer.mozilla.org/en-US/docs/DOM/window.alert)，它将在放入警告框之前转换为字符串。将 DOM 元素转换为字符串通常会调用[`Object.prototype.toString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)，因此您会看到类似`"[object HTMLSomeElement]"`.

相反，如果您看到`null`，很可能您并没有真正选择 DOM 元素，因为您的`element`变量具有该值`null`（不太可能：字符串表示为 的其他东西`"null"`）。这可能是如果您`document.getElementById`在实际加载 DOM 之前调用（或类似方法），`null`如果未找到任何元素，则返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:00:58.840

```
<div id="element"></div>
<script>
var element = document.getElementById("element");
alert(element);
</script> 
```

它将显示 [Object HTMLDivElement] 而不是 null，您能否更清楚地说明您的上下文中的元素是什么？

# javascript - 不能为多个属性扩展 KO 映射

> ID：13179726
> 
> 赞同：0
> 
> 时间：2012-11-01T14:56:49.260
> 
> 标签：javascript, jquery, knockout.js, jquery-templates

KO 初学者：在搜索结果模块的以下实现中，我使用映射插件将 searchData JSON 数组映射到我的视图模型。我还创建了两个额外的属性来显示我的一些数据的操纵版本：

```
define('searchresults', ['ko', 'lodash', 'datacontext', 'moment'], function (ko, _, datacontext, moment) {

    var get = function (term) {
        amplify.request("appsearch", { 'searchterm': term }, function (searchData) {

            var viewModel = {};

            var mapping = {
                'untilNow' : {
                    create: function (options) {
                        var innerModel = ko.mapping.fromJS(options.data);
                        innerModel.untilNow = moment(innerModel.lastSentDate()).fromNow();
                        return innerModel;
                    }
                },
                'iconClass': {
                    create: function (options) {
                        var innerModel = ko.mapping.fromJS(options.data);
                        innerModel.iconClass = "icon-" + innerModel.type();
                        return innerModel;
                    }
                }
            };

            viewModel.searchResults = ko.mapping.fromJS(searchData, mapping.untilNow);
            ko.applyBindings(viewModel);
        });
    };
    return {
        get: get
    };
}); 
```

这被调用以填充以下模板：

```
<div id="contacts" class="view animated fadeInLeft">

    <h3>Search results for {{#routeData}}{{term}}{{/routeData}}</h3>
    <ul data-bind="template: { name: 'searchresults-template', foreach: searchResults }"></ul>

</div>

<script type="text/html" id="searchresults-template">

    <!--<li data-bind="attr: {'class': iconClass}">-->
    <li>
        <h4><span data-bind="text: type"></span></h4>
        <p><b>When created:</b> <span data-bind="text: untilNow"></span></p>
        <p><b>By:</b> <span data-bind="text: createdBy"></span></p>        
        <p><b>Company:</b> <span data-bind="text: company"></span></p>
        <hr/>
    </li>

</script>

<script>
    require(['searchresults'], function (searchresults) {
        var searchTerm = "{{#routeData}}{{term}}{{/routeData}}";
        searchresults.get(searchTerm);
    });
</script> 
```

我无法理解的是：

*   为什么`mapping.untilNow`我不能只使用映射，因为显然 KO 只需要一个 {}。因此，我无法使用 iconClass，因为它变得未定义。
*   我做错了什么，我必须重复 innerModel 实现。我怎样才能从属性 KO 风格中抽象出来！
*   此外，我发现我必须将 ko.mapping 分配给 viewModel.searchResults 而不仅仅是 viewModel，但它是我可以让 mt 模板迭代的唯一方法。

我不了解KO的一些基本方面吗？这是获取数据并将其应用到模板并添加一些方法来操作部分数据的正确方法吗？

谢谢一堆

searchData 的示例流：

```
[
    {
        "type": "Campaign",
        "lastSentDate": "/Date(634873003155215782)/",
        "createdBy": "Stephen Parker",
        "company": "Virgin Media"
    },
    {
        "type": "Person",
        "lastSentDate": "/Date(1198908717056-0700)/",
        "createdBy": "John Smith",
        "company": "Concep LTD"
    },
    {
        "type": "Campaign",
        "lastSentDate": "\/Date(1239018869048)\/",
        "createdBy": "Stephen Parker",
        "company": "Virgin Media"
    },
    {
        "type": "Company",
        "lastSentDate": "/Date(1198908717056-0700)/",
        "createdBy": "Stephen Parker",
        "company": "Virgin Media"
    }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:40:59.807

```
define('searchresults', ['ko', 'lodash', 'datacontext', 'moment'], function (ko, _, datacontext, moment) {

    var get = function (term) {
        amplify.request("appsearch", { 'searchterm': term }, function (searchData) {

            var resultsItem = function (data) {
                var self = this;
                self.id = ko.observable(data.id);
                self.type = ko.observable(data.type);
                self.lastSentDate = ko.observable(data.lastSentDate);
                self.createdBy = ko.observable(data.createdBy);
                self.company = ko.observable(data.company);
                self.untilNow = ko.computed(function () {
                    return moment(self.lastSentDate()).fromNow();
                });
                self.iconClass = ko.computed(function() {
                    return "icon-" + self.type().toLowerCase();
                });
            };

            var dataMappingOptions = {
                key: function(data) {
                    return data.id;
                },
                create: function (options) {
                    return new resultsItem(options.data);
                }
            };

            var viewModel = {
                searchResults: ko.mapping.fromJS([])                
            };

            ko.mapping.fromJS(searchData, dataMappingOptions, viewModel.searchResults);
            ko.applyBindings(viewModel);
        });
    };
    return {
        get: get
    };
}); 
```

# shell - 从脚本调用时 pkill -F 不起作用

> ID：13179729
> 
> 赞同：2
> 
> 时间：2012-11-01T14:56:58.867
> 
> 标签：shell

我正在尝试编写一个终止进程的 shell 脚本。进程的 pid 存储在一个名为`foobar.pid`. BSD pkill 有一个选项 -F，它接受一个 pidfile 并杀死匹配的进程。完美的！

所以我的脚本中有这一行：

```
pkill -F foobar.pid # doesn't work 
```

但它不起作用。如果我手动输入命令，它可以工作。是什么赋予了？更长，但据我所知，在脚本中有效的替代方案：

```
pid=$(cat foobar.pid)
kill $pid # works 
```

现在证明问题不在于：

*   脚本无法读取 pidfile
*   不允许脚本终止进程。

我还尝试将 shebang 更改为`#!/bin/bash`，以防`sh`会踢出一些奇怪的兼容模式或其他东西。没运气。

系统规格：

```
$ uname -a
Darwin Babar.local 12.2.0 Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64 x86_64
$ bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)
Copyright (C) 2007 Free Software Foundation, Inc. 
```

完整脚本：

```
#!/bin/sh
pid=$(cat foobar.pid)
kill $pid # works
# pkill -F foobar.pid # doesn't work
rm foobar.pid 
```

# symfony - 多对一自定义字段 - 独一无二

> ID：13179732
> 
> 赞同：0
> 
> 时间：2012-11-01T14:57:06.157
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我正在使用外部表加入 2 个实体，正是这种方式： http: [//www.prowebdev.us/2012/07/symfnoy2-many-to-many-relation-with.html](http://www.prowebdev.us/2012/07/symfnoy2-many-to-many-relation-with.html)

我想了解为什么我们需要一个 ID 作为外部表中的主键？

我宁愿将这两个外键作为主键，这样我可以确保同一关系没有重复条目。不 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:16:40.353

我认为 Doctrine 只希望每个表都具有 Id 字段，但是您可以强制 Doctrine 检查外键组合是否唯一：

```
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;
...
/*
 * @UniqueEntity({"foreign_key1", "foreign_key2"})
 * ...
 */
class JoinTable
{
    ...
} 
```

# jquery - blueimp/jQuery-File-Upload 与 Codeigniter 2.1

> ID：13179738
> 
> 赞同：1
> 
> 时间：2012-11-01T14:57:19.637
> 
> 标签：jquery, file, codeigniter, upload, blueimp

我尝试将[带有 CodeIgniter 2.1 的 jQuery File Upload 6.5](https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-6.5-with-CodeIgniter-2.1)安装到我的 Codeigniter 脚本中，但我遇到了一些问题。

起初，我使用带有“模块化扩展 - HMVC（版本 5.4）”的 2.1.3 CI 版本作为第三方进入我的应用程序文件夹。

我想通过使用 blueimp/jQuery-File-Upload 创建一个模块“上传”。我已按照那里描述的说明进行操作，但没有任何效果。

问题是我在开发者控制台中遇到错误：

```
Uncaught TypeError: Cannot read property 'length' of null      main.js:31
POST url/upload/upload_img 500 (Internal Server Error)     jquery.js:8416 
```

*我开始上传时显示 500 错误。事实上，upload_img 网址从未打开过。*

这是我的代码：

**应用程序/配置/常量.php**

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

define('FOPEN_READ',                            'rb');
define('FOPEN_READ_WRITE',                      'r+b');
define('FOPEN_WRITE_CREATE_DESTRUCTIVE',        'wb'); // truncates existing file data, use with care
define('FOPEN_READ_WRITE_CREATE_DESTRUCTIVE',   'w+b'); // truncates existing file data, use with care
define('FOPEN_WRITE_CREATE',                    'ab');
define('FOPEN_READ_WRITE_CREATE',               'a+b');
define('FOPEN_WRITE_CREATE_STRICT',             'xb');
define('FOPEN_READ_WRITE_CREATE_STRICT',        'x+b');

// Define Ajax Request
define('IS_AJAX', isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest'); 
```

**应用程序/配置/路由**

```
$route['upload'] = 'upload/upload';
$route['upload/upload_img'] = 'upload/upload/upload_img';
$route['upload/deleteImage'] = 'upload/upload/deleteImage';
$route['upload/get_files'] = 'upload/upload/get_files'; 
```

**应用程序/模块/上传/控制器/上传**

[和这个控制器](https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-6.5-with-CodeIgniter-2.1)一模一样。唯一的变化在于构造：

```
 function __construct() {
    parent::__construct();
    $this->load->helper(array('form', 'url'));

        //Set relative Path with CI Constant
        $this->setPath_img_upload_folder("uploads/dress/img/");
        $this->setPath_img_thumb_upload_folder("uploads/dress/img/thumbnails/");
        //Delete img url
        $this->setDelete_img_url(base_url() . '/upload/deleteImage/');
        //Set url img with Base_url()
        $this->setPath_url_img_upload_folder(base_url() . "uploads/dress/img/");
        $this->setPath_url_img_thumb_upload_folder(base_url() . "uploads/dress/img/thumbnails/");

  }
  public function index() {
  $this->load->view('upload_form');
  } 
```

**js/main.js**

与原始帖子中描述的完全相同。

**应用程序/模块/上传/查看/upload_form**

```
<!DOCTYPE HTML>
<!--
/*
 * jQuery File Upload Plugin Demo 6.11
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
-->
<html lang="en">
<head>
<!-- Force latest IE rendering engine or ChromeFrame if installed -->
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
<meta charset="utf-8">
<title>jQuery File Upload Demo</title>
<meta name="description" content="File Upload widget with multiple file selection, drag&amp;drop support, progress bar and preview images for jQuery. Supports cross-domain, chunked and resumable file uploads. Works with any server-side platform (Google App Engine, PHP, Python, Ruby on Rails, Java, etc.) that supports standard HTML form file uploads.">
<meta name="viewport" content="width=device-width">
<!-- Bootstrap CSS Toolkit styles -->
<link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap.min.css">
<!-- Generic page styles -->
<link rel="stylesheet" href="/blueimp/css/style.css">
<!-- Bootstrap styles for responsive website layout, supporting different screen sizes -->
<link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-responsive.min.css">
<!-- Bootstrap CSS fixes for IE6 -->
<!--[if lt IE 7]><link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-ie6.min.css"><![endif]-->
<!-- Bootstrap Image Gallery styles -->
<link rel="stylesheet" href="http://blueimp.github.com/Bootstrap-Image-Gallery/css/bootstrap-image-gallery.min.css">
<!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
<link rel="stylesheet" href="/blueimp/css/jquery.fileupload-ui.css">
<!-- CSS adjustments for browsers with JavaScript disabled -->
<noscript><link rel="stylesheet" href="/blueimp/css/jquery.fileupload-ui-noscript.css"></noscript>
<!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body>

<div class="container">

    <!-- The file upload form used as target for the file upload widget -->
    <form id="fileupload" action="upload/upload_img" method="POST" enctype="multipart/form-data">
        <!-- Redirect browsers with JavaScript disabled to the origin page -->
        <noscript><input type="hidden" name="redirect" value="http://blueimp.github.com/jQuery-File-Upload/"></noscript>

        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row fileupload-buttonbar">
            <div class="span7">
                <!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-success fileinput-button">
                    <i class="icon-plus icon-white"></i>
                    <span>Add files...</span>
                    <input type="file" name="userfile" multiple>
                </span>
                <button type="submit" class="btn btn-primary start">
                    <i class="icon-upload icon-white"></i>
                    <span>Start upload</span>
                </button>
                <button type="reset" class="btn btn-warning cancel">
                    <i class="icon-ban-circle icon-white"></i>
                    <span>Cancel upload</span>
                </button>
                <button type="button" class="btn btn-danger delete">
                    <i class="icon-trash icon-white"></i>
                    <span>Delete</span>
                </button>
                <input type="checkbox" class="toggle">
            </div>

            <!-- The global progress information -->
            <div class="span5 fileupload-progress fade">
                <!-- The global progress bar -->
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                    <div class="bar" style="width:0%;"></div>
                </div>
                <!-- The extended global progress information -->
                <div class="progress-extended">&nbsp;</div>
            </div>
        </div>
        <!-- The loading indicator is shown during file processing -->
        <div class="fileupload-loading"></div>
        <br>
        <!-- The table listing the files available for upload/download -->
        <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
    </form>

</div>
<!-- modal-gallery is the modal dialog used for the image gallery -->
<div id="modal-gallery" class="modal modal-gallery hide fade" data-filter=":odd" tabindex="-1">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">&times;</a>
        <h3 class="modal-title"></h3>
    </div>
    <div class="modal-body"><div class="modal-image"></div></div>
    <div class="modal-footer">
        <a class="btn modal-download" target="_blank">
            <i class="icon-download"></i>
            <span>Download</span>
        </a>
        <a class="btn btn-success modal-play modal-slideshow" data-slideshow="5000">
            <i class="icon-play icon-white"></i>
            <span>Slideshow</span>
        </a>
        <a class="btn btn-info modal-prev">
            <i class="icon-arrow-left icon-white"></i>
            <span>Previous</span>
        </a>
        <a class="btn btn-primary modal-next">
            <span>Next</span>
            <i class="icon-arrow-right icon-white"></i>
        </a>
    </div>
</div>
<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
            <td>
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
            </td>
            <td class="start">{% if (!o.options.autoUpload) { %}
                <button class="btn btn-primary">
                    <i class="icon-upload icon-white"></i>
                    <span>Start</span>
                </button>
            {% } %}</td>
        {% } else { %}
            <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>Cancel</span>
            </button>
        {% } %}</td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
                <i class="icon-trash icon-white"></i>
                <span>Delete</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.js"></script>
<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="/blueimp/js/vendor/jquery.ui.widget.js"></script>
<!-- The Templates plugin is included to render the upload/download listings -->
<script src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
<!-- Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo -->
<script src="http://blueimp.github.com/cdn/js/bootstrap.min.js"></script>
<script src="http://blueimp.github.com/Bootstrap-Image-Gallery/js/bootstrap-image-gallery.min.js"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="/blueimp/js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="/blueimp/js/jquery.fileupload.js"></script>
<!-- The File Upload file processing plugin -->
<script src="/blueimp/js/jquery.fileupload-fp.js"></script>
<!-- The File Upload user interface plugin -->
<script src="/blueimp/js/jquery.fileupload-ui.js"></script>
<!-- The main application script -->
<script src="/blueimp/js/main.js"></script>
<!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ -->
<!--[if gte IE 8]><script src="js/cors/jquery.xdr-transport.js"></script><![endif]-->
</body> 
</html> 
```

所有链接（js和css）都在工作，我检查了两次。

**.htaccess**

也许问题就在这里，导致在表单的操作中使用“jquery-file-upload.appspot.com”，脚本工作。

```
<IfModule mod_rewrite.c>

    Options +FollowSymLinks -Indexes
    RewriteEngine on

    # NOTICE: If you get a 404 play with combinations of the following commented out lines
    #AllowOverride All
    #RewriteBase /

    # Restrict your site to only one domain
    #RewriteCond %{HTTP_HOST} !^www\.
    #RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    <IfModule mod_php5.c>
        RewriteRule ^(.*)$ index.php/$1 [L]
    </IfModule>

    <IfModule !mod_php5.c>
        RewriteRule ^(.*)$ index.php?/$1 [L]
    </IfModule>

</IfModule>

#prevent access to htaccess file
<Files .htaccess>
 order allow,deny
 deny from all

</Files>

#disable directory browsing
Options All -Indexes
IndexIgnore * 
```

# python - 尝试使用 python 和 mechanize 解析 Dropbox 事件页面时出现 403 错误

> ID：13179739
> 
> 赞同：2
> 
> 时间：2012-11-01T14:57:27.163
> 
> 标签：python, mechanize, dropbox, http-status-code-403, scrape

我使用此脚本来获取某个目录的所有文件更新列表。然后我解析该列表以获取我在该目录中一直处于活动状态的时间段列表。这样我就可以快速查看我在该项目上花费了多少时间，并知道要向我的客户收取什么费用。

我写了一个小python脚本，改编自：[https ://github.com/jncraton/PythonDropboxUploader](https://github.com/jncraton/PythonDropboxUploader)

[我添加了底部功能以从https://www.dropbox.com/events?ns=false&n=50](https://www.dropbox.com/events?ns=false&n=50)检索特定事件页面

我在 2 个月前使用过该脚本，它运行良好，但现在我收到 403：禁止错误：

```
eventSrc = self.browser.open(req).read() 
```

可能 DropBox 试图阻止像我这样的爬虫来推动程序员使用他们的 API，但不幸的是，API 不支持列出事件。

任何人都可以帮我让它再次工作吗？

这是创建连接的python代码：

```
import mechanize
import urllib
import re
import json

class DropboxConnection:
""" Creates a connection to Dropbox """

email = ""
password = ""
root_ns = ""
token = ""
browser = None

def __init__(self, email, password):
    self.email = email
    self.password = password

    self.login()
    self.get_constants()

def login(self):
    """ Login to Dropbox and return mechanize browser instance """

    # Fire up a browser using mechanize
    self.browser = mechanize.Browser()

    self.browser.set_handle_equiv(False)
    self.browser.set_handle_redirect(True)
    self.browser.set_handle_referer(True)
    self.browser.set_handle_robots(False)

    self.browser.addheaders = [('User-agent', 'Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:14.0) Gecko/20120722 Firefox/14.0.1')]

    # Browse to the login page
    self.browser.open('https://www.dropbox.com/login')

    # Enter the username and password into the login form
    isLoginForm = lambda l: l.action == "https://www.dropbox.com/login" and l.method == "POST"

    try:
        self.browser.select_form(predicate=isLoginForm)
    except:
        self.browser = None
        raise(Exception('Unable to find login form'))

    self.browser['login_email'] = self.email
    self.browser['login_password'] = self.password
    self.browser['t'] = "1230"

    # Send the form
    response = self.browser.submit()

def get_constants(self):
    """ Load constants from page """

    home_src = self.browser.open('https://www.dropbox.com/home').read()

    try:
        self.root_ns = re.findall(r"root_ns: (\d+)", home_src)[0]
        self.token = re.findall(r"TOKEN: '(.+)'", home_src)[0]
    except:
        raise(Exception("Unable to find constants for AJAX requests"))

def upload_file(self, local_file, remote_dir, remote_file):
    """ Upload a local file to Dropbox """

    if(not self.is_logged_in()):
        raise(Exception("Can't upload when not logged in"))

    self.browser.open('https://www.dropbox.com/')

    # Add our file upload to the upload form
    isUploadForm = lambda u: u.action == "https://dl-web.dropbox.com/upload" and u.method == "POST"

    try:
        self.browser.select_form(predicate=isUploadForm)
    except:
        raise(Exception('Unable to find upload form'))

    self.browser.form.find_control("dest").readonly = False
    self.browser.form.set_value(remote_dir, "dest")
    self.browser.form.add_file(open(local_file, "rb"), "", remote_file)

    # Submit the form with the file
    self.browser.submit()

def get_dir_list(self, remote_dir):
    """ Get file info for a directory """

    if(not self.is_logged_in()):
        raise(Exception("Can't download when not logged in"))

    req_vars = "ns_id=" + self.root_ns + "&referrer=&t=" + self.token

    req = urllib2.Request('https://www.dropbox.com/browse' + remote_dir, data=req_vars)
    req.add_header('Referer', 'https://www.dropbox.com/home' + remote_dir)

    dir_info = json.loads(self.browser.open(req).read())

    dir_list = {}

    for item in dir_info['file_info']:
        # Eliminate directories
        if(item[0] == False):
            # get local filename
            absolute_filename = item[3]
            local_filename = re.findall(r".*\/(.*)", absolute_filename)[0]

            # get file URL and add it to the dictionary
            file_url = item[8]
            dir_list[local_filename] = file_url

    return dir_list

def get_download_url(self, remote_dir, remote_file):
    """ Get the URL to download a file """

    return self.get_dir_list(remote_dir)[remote_file]

def download_file(self, remote_dir, remote_file, local_file):
    """ Download a file and save it locally """

    fh = open(local_file, "wb")
    fh.write(self.browser.open(self.get_download_url(remote_dir, remote_file)).read())
    fh.close()

def is_logged_in(self):
    """ Checks if a login has been established """
    if(self.browser):
        return True
    else:
        return False

def getEventsPage(self, n):
    if(not self.is_logged_in()):
        raise(Exception("Can't get event page when not logged in"))

    url = 'https://www.dropbox.com/next_events'
    values = {'cur_page': n, 'ns_id': 'false'}
    data = urllib.urlencode(values)
    req = mechanize.Request(url, data)

    # print url + '?' + data

    eventSrc = self.browser.open(req).read()
    return eventSrc 
```

这是解析事件页面的循环：

```
from dbupload import DropboxConnection
from getpass import getpass
from bs4 import BeautifulSoup
import re
import parsedatetime.parsedatetime as pdt
import parsedatetime.parsedatetime_consts as pdc
c = pdc.Constants()
p = pdt.Calendar(c)

email = "myemail@gmail.com"  # raw_input("Enter Dropbox email address:")
password = getpass("Enter Dropbox password:")

dateFile = open('all_file_updates.txt', "wb")
try:
    # Create the connection
    conn = DropboxConnection(email, password)
except:
    print("Connection failed")
else:
    print("Connection succesful")

n = 250
found = 0
while(n >= 0):
    eventsPageSrc = conn.getEventsPage(n)
    soup = BeautifulSoup(eventsPageSrc)

    table = soup.find("table", {"id": "events"})
    for row in table.findAll('tr'):
        link = row.find("a", href=re.compile('^https://dl-web.dropbox.com/get/ProjectName'))
        if(link != None):
            dateString = row.find("td", attrs={'class': 'modified'}).string
            date = p.parse(dateString)
            dateFile.write('Date: ' + str(date) + '    file: ' + link.string + '\n')
            found = found + 1
    n = n - 1
    print 'page: ' + str(n) + ' Total found: ' + str(found) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T17:30:04.770

在 def get_constants(self): 改变

```
self.token = re.findall(r"TOKEN: '(.+)'", home_src)[0] 
```

至

```
self.token = re.findall(r'TOKEN: "(.+)"', home_src)[0] 
```

Dropbox 改变了它存储常量的方式

希望能帮助到你。

# accessibility - Asp.Net Form ...下拉元素的可访问性

> ID：13179743
> 
> 赞同：0
> 
> 时间：2012-11-01T14:57:39.793
> 
> 标签：accessibility, wai-aria

我有一个 asp.net 网页，我正在寻找使表单可访问的不同方法。

在**示例 #1**中，我有一个与下拉列表关联的标签，在**示例 #2**中，我有一个带有下拉列表描述的 Aria-Label 标记。

最初的设计没有用于下拉菜单的标签，因此添加它们会破坏表单的外观和流程。下拉菜单用于过滤，并在页面顶部内嵌。下拉菜单下有两个按钮，一个用于过滤下拉列表中的内容，另一个用于重置表单，以便显示所有结果而不进行过滤。

我的问题是......添加 Aria-Label 标签是否可以接受，或者是否真的需要关联标签？

**示例 #1**

```
asp:Label id="lbProgramName" runat="server" Text="Program Name:" AssociatedControlID="ddlProgramName

asp:DropDownList id="ddlProgramName" runat="server" CssClass="span5" 
```

**示例 #2**

```
asp:DropDownList ID="ddlProgramName" runat="server" CssClass="span5" aria-label="Program Names" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:27:16.090

如果你有一个视觉标签（比如你的 asp:Label 带有 AssociatedControlId 属性），你不需要 aria-label。仅当描述性文本和控件之间没有关联时，才使用 aria-label。

# c++ - 如何在 C++ while 循环中创建自动递增数组？

> ID：13179749
> 
> 赞同：1
> 
> 时间：2012-11-01T14:57:56.007
> 
> 标签：c++, arrays, string, while-loop

我有一个使用 stringstream/getline() 解析字符串的 while 循环，但是我在处理循环中的结果时遇到了麻烦。循环将字符串分成 3 个部分，并将每个单词放入该循环循环的变量“word”中。但是，我怎样才能将每个部分存储在变量或数组中，以便我可以在 while 循环之外使用它？

循环

```
string word;
    stringstream stream(cmdArgs.c_str());
    while( getline(stream, word, ' ') )
          // Manipulate results 
```

变量“cmdArgs”是字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:00:55.190

```
string word;
vector<string> words;
stringstream stream(cmdArgs.c_str());
while( getline(stream, word, ' ') )
{
    words.push_back(words);
}
// Manipulate results 
```

见矢量类：[http ://www.cplusplus.com/reference/stl/vector/](http://www.cplusplus.com/reference/stl/vector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:12:02.427

使用向量可以将字符串分解为单词并单独存储每个单词，无论有多少：

```
string word;  
stringstream stream(cmdArgs.c_str());  
vector<string> words;  
while( getline(stream, word, ' ') )  
{  
    words.push_back(word);  
} 
```

如果您确信正好有 3 个单词，您也可以只使用一个普通数组：

```
string word;  
stringstream stream(cmdArgs.c_str());  
string words[3];  
int index = 0;  
while( getline(stream, word, ' ') )  
{  
    words[index++] = word;  
} 
```

但是如果传入的字符串比您预期的要长，您会溢出该数组。

# ios - IOS 5 CoreData 按字符串属性排序不起作用

> ID：13179750
> 
> 赞同：1
> 
> 时间：2012-11-01T14:58:02.133
> 
> 标签：ios, string, sorting, core-data

我有一个属性`imageName`，它是一个**字符串** 并设置为被**索引**。

我正在尝试以此对我的获取结果**进行****排序****`imageName`**

 **它仅在我第一次进入进行此获取的 viewController 时起作用。下一次似乎结果是任意排序的（即使它是从 UINavigationController 弹出并重新创建的）。

字符串的形式为：`hair001.png`, `hair002.png`, `hair003.png`,...

这是我执行提取的方式：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"AvProperty"];

request.predicate = [NSPredicate predicateWithFormat:@"type = %d && isPrototype=%@",type,[NSNumber numberWithBool:YES]];
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"imageName" ascending:YES]]; 

NSError *error;
NSArray *properties = [self.context executeFetchRequest:request error:&error]; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:14:32.770

确保您的视图控制器在重新出现时得到适当的更新。在`viewWillAppear`您可以向获取的结果控制器发送一条`performFetch:`消息以刷新您的表格视图。**

# html - 如何将 HTML 文件索引到 Apache SOLR？

> ID：13179754
> 
> 赞同：3
> 
> 时间：2012-11-01T14:58:07.417
> 
> 标签：html, apache, solr, indexing, inverted-index

默认情况下 SOLR 接受 XML 文件，我想对数百万个已抓取的 URL（html）执行搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:41:44.323

通常，第一步我会建议使用 SolrJ 或类似方法来滚动您自己的应用程序来处理索引，而不是直接使用 DataImportHandler 进行。

只需编写您的应用程序并将这些网页的内容输出为 SolrInputDocument 中的一个字段。我建议在该应用程序中剥离 HTML，因为它可以让您更好地控制。此外，您可能希望获取该页面中的一些数据，例如`<title>`，并将其索引到不同的字段。另一种方法是在您的一个字段上使用[HTMLStripTransformer](http://wiki.apache.org/solr/DataImportHandler#HTMLStripTransformer)以确保它将 HTML 从您发送到该字段的任何内容中去除。

你是如何抓取所有这些数据的？如果您使用的是[Apache Nutch](http://nutch.apache.org)之类的东西，它应该已经为您完成了大部分工作，允许您插入 Solr 服务器的连接详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:17:56.507

Solr CEL 可以接受 HTML 并对它们进行索引以进行全文搜索：[http ://wiki.apache.org/solr/ExtractingRequestHandler](http://wiki.apache.org/solr/ExtractingRequestHandler)

```
curl "http://localhost:8983/solr/update/extract?literal.id=doc1&commit=true" -F "myfile=@tutorial.html" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-03T11:49:08.260

您可以很好地使用 solr 索引下载的 html 文件。

这是我进行索引的最快方式：

```
curl http://localhost:8080/solr/update/extract?stream.file=/home/index.html&literal.id=www.google.com 
```

这`stream.file`是您的 html 文件的本地路径，并且`literal.id`是来自`index.html`.

# logback - logback ThresholdFilter 如何做相反的事情

> ID：13179773
> 
> 赞同：6
> 
> 时间：2012-11-01T14:59:13.037
> 
> 标签：logback

我需要一个只通过所有信息和 LESS 而不是信息等的过滤器。我以前在 logback 的某个地方看到过这个。我的完整 xml 在这里，我想要信息而不是去标准输出（不写过滤器，因为我知道这是可能的）......

```
<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter"> 
        <level>info</level>
    </filter>

    <layout class="ch.qos.logback.classic.PatternLayout">
        <pattern>%date{ISO8601} %X{sessionid}-%X{user} %caller{1} %-4level: %message%n</pattern>
    </layout>
</appender>

<appender name="STDERR" class="ch.qos.logback.core.ConsoleAppender">
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter"> 
        <level>warn</level>
    </filter>

    <layout class="ch.qos.logback.classic.PatternLayout">
        <pattern>%date{ISO8601} %X{sessionid}-%X{user} %caller{1} %-4level: %message%n</pattern>
    </layout>
    <target>System.err</target>
</appender> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T19:10:32.590

终于想通了……

```
<?xml version="1.0" encoding="UTF-8" ?>
<configuration scan="true" scanPeriod="30 seconds">
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.core.filter.EvaluatorFilter">      
          <evaluator class="ch.qos.logback.classic.boolex.GEventEvaluator"> 
            <expression>
               e.level.toInt() &lt;= INFO.toInt()
            </expression>
          </evaluator>
          <OnMismatch>DENY</OnMismatch>
          <OnMatch>NEUTRAL</OnMatch>
        </filter>

        <encoder>
            <pattern>%date{ISO8601} %X{sessionid}-%X{user} %caller{1} %-4level: %message%n</pattern>
        </encoder>
    </appender>

    <appender name="STDERR" class="ch.qos.logback.core.ConsoleAppender">
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter"> 
            <level>warn</level>
        </filter>

        <encoder>
            <pattern>%date{ISO8601} %X{sessionid}-%X{user} %caller{1} %-4level: %message%n</pattern>
        </encoder>
        <target>System.err</target>
    </appender>

    <appender name="TEMP" class="com.alvazan.play.logging.CassandraAppender">
        <appender-ref ref="STDOUT"/>
    </appender>

    <root>
        <level value="INFO" />
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="STDERR"/>
        <!-- appender-ref ref="TEMP"/-->
    </root>
</configuration> 
```

# c - 预处理器对“# “？

> ID：13179775
> 
> 赞同：7
> 
> 时间：2012-11-01T14:59:16.830
> 
> 标签：c, c-preprocessor

我刚刚遇到一个**C**文件，其中包含预处理器指令和如下所示的行：

```
# 9 "filename" 
```

我以前从未见过这样的台词。他们的意思是什么？我猜这些是预处理器指令，但是预处理器对它们做了什么？

此外，对于某些行，字符串甚至不代表现有文件名......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:09:27.007

我相信这是使用[#line](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.vacpp6m.doc%2Flanguage%2Fref%2Fclrc09lc.htm)预处理器指令的另一种方式。

例如你可以写：

```
// you could write #line 7 "filename"  or
// # 7 "filename"  or
// # 7  or
#line 7
int main(void)
{
      printf("%d\n", __LINE__); 
```

他们都会给你（在这种情况下）`10`。`stdout`

关于“文件名”部分的注释是可选的且未经验证（这就是为什么它可以是任何东西，甚至是不存在的文件）。我提供的链接中解释了它的使用 -
`If you specify a file name, the compiler views the next line as part of the specified file. If you do not specify a file name, the compiler views the next line as part of the current source file.`

# java - 我无法编译我的 servlet 代码

> ID：13179777
> 
> 赞同：0
> 
> 时间：2012-11-01T14:59:28.077
> 
> 标签：java

我在编译 java servlet 时遇到了很大的问题。据我所知，我已经完成了我需要做的所有事情，我已经正确安装了 Tomcat 7，并且 Tomcat 正在运行。据我了解，我需要将 servlet.jar 包添加到我的类路径中。

我已经通过编辑类路径环境变量来做到这一点：

```
CLASSPATH=C:\Program Files\Apache Software Foundation\Tomcat 7.0\lib\servlet-api.jar 
```

不幸的是，仍然没有运气，我无法编译 java servlet，而且我仍然收到有关缺少符号的警告`javax.servlets.`

我正在使用 Window 7。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:19:50.243

Tomcat 已经带有与 Servlet 相关的 jar 文件。您无需担心它们。通过将它们添加到类路径中，您已经使它们可供您的应用程序编译。但不包括在应用程序构建中。

如果您的编译器抱怨，`javax.servlets.`那么您的类路径中缺少 Java EE jar。您需要将 Java EE jar 文件添加到您的类路径（应用程序类路径）。[您可以按照此](https://stackoverflow.com/questions/3358220/where-can-i-download-j2ee-jar-from)下载它们。但请确保您没有将它们包含在您的构建中。

# django - 将第 3 方 Django 应用程序维护为 Git 子模块

> ID：13179778
> 
> 赞同：2
> 
> 时间：2012-11-01T14:59:37.593
> 
> 标签：django, git, git-submodules, django-apps

我知道这是完全可能的，而且很多人已经在这样做了，但是我的问题略有不同，我还没有找到解决方案：

让第 3 方 Django App 的结构如下：

*   django 模块
    *   模块
        *   **初始化**.py
        *   视图.py
        *   模型.py
    *   要求.txt
    *   安装程序.py

我只想将`module`目录捆绑为子模块，因为这样我只需键入“module.views”即可访问views.py 文件。如果我导入 django-module 目录，我将不得不编写 django-module.module.views 来访问模块文件，这是不可行的。

我的目的是修改模块并偶尔向原始存储库发出拉取请求。是否有我可以遵循的工作流程，或者为此目的的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:07:04.660

## 点提示

Pip 支持[可编辑包](http://www.pip-installer.org/en/latest/requirements.html#the-requirements-file-format)和[使用 git 检索包](http://www.pip-installer.org/en/latest/requirements.html#git)，因此您可以创建一个 virtualenv，使用 pip 安装包，并在需要时使用 pip 更新它们。

所以你可以添加：

```
-e git://git.myproject.org/MyProject.git@da39a3ee5e6b4b0d3255bfef95601890afd80709#egg=MyProject 
```

让您`requirements.txt`检索该确切的提交。

* * *

## 建议的工作流程

我认为解决您的问题的最佳方法如下：

*   制作包的私有分支
*   在分叉存储库的特定开发分支中编辑包
*   在需求文件中使用来自 fork 开发分支的包。

*   如果您愿意，请使用 pip 更新您正在使用它的分叉包。

*   当您准备好发出拉取请求时，拉取源，将您的工作分支重新设置为 origin/master，然后从您的 fork 的主分支发出拉取请求。

这意味着您在三个地方存在代码：

*   原始仓库（您无权访问的地方）
*   您的分叉回购（您在分叉上工作的地方）
*   无论 pip 在哪里安装它（你在哪里使用你的叉子）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:02:12.730

最佳实践是使子模块保持原样。

将第 3 方模块作为子模块添加到应用程序后，下一步是确保将“django-module”目录添加到 python 路径。只要 django-module 在您的 python 路径上，您就可以像往常一样通过键入“module.views”来使用子模块。

# php - 是否可以将信息放入可放置的 div 并将其存储在数据库中

> ID：13179783
> 
> 赞同：0
> 
> 时间：2012-11-01T14:59:51.097
> 
> 标签：php, javascript, jquery

我正在尝试拖放名称标签，请参见[此处](http://jsfiddle.net/Kxtvg/132/)并将拖入可放置 div 的名称标签存储起来，然后将它们放入我的数据库中。所以我基本上想检查一下可放置框中是否有值并有一个提交按钮。在提交操作时，我想确保值在可放置的 div 中并将数据存储在数据库中。我想知道我是否`<?php isset() ?>`可以通过包含jquery（如果可能）或仅使用jquery（如果可能）使用该`val()`属性来使用查询。如果我知道我在问什么，我将不胜感激是可能的，以及任何其他可以帮助我前进的技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:08:09.370

```
$('#sortcard, #dropbox, #dropbox1').droppable({
    accept: '.sorting',
    hoverClass: 'border',
    tolerance: 'touch',
    drop: function(e, ui) {

    ...

    $.post("ajax.php", 
          {data: $(this).text()}, 
          function(data) {
               alert("Data saved.");
          });
    }
});​ 
```

在“drop”事件中进行 AJAX 调用。

# sql - 多对多的唯一性

> ID：13179785
> 
> 赞同：3
> 
> 时间：2012-11-01T14:59:54.380
> 
> 标签：sql, postgresql, many-to-many

我无法弄清楚谷歌的哪些术语，所以帮助标记这个问题或只是以相关问题的方式向我指出会有所帮助。

我相信我有一个典型的多对多关系：

```
CREATE TABLE groups (
  id integer PRIMARY KEY);

CREATE TABLE elements (
  id integer PRIMARY KEY);

CREATE TABLE groups_elements (
  groups_id integer REFERENCES groups,
  elements_id integer REFERENCES elements,
  PRIMARY KEY (groups_id, elements_id)); 
```

我想要一个约束，即给定的一组elements_ids只能有一个groups_id。

例如，以下是有效的：

```
groups_id | elements_id
        1 | 1
        1 | 2
        2 | 2
        2 | 3 
```

以下内容无效，因为第 1 组和第 2 组将是等效的。

```
groups_id | elements_id
        1 | 1
        1 | 2
        2 | 2
        2 | 1 
```

不是每个元素子集都必须有一个组（这不是幂集），但可能会形成新的子集。我怀疑我的设计不正确，因为我实际上是在谈论将组添加为单个实体。

如何为元素子集创建标识符而不存在重复子集的风险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:16:08.950

这是一个有趣的问题。

一种解决方案，尽管是一个笨拙的解决方案，是将 groups_id 和 elements_id 的串联存储在 groups 表中：1-1-2 并使其成为唯一索引。

尝试在插入新行之前搜索重复的组，将对性能造成巨大影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:55:03.340

以下查询会吐出有问题的组 ID：

```
with group_elements_arr as (
    select groups_id, array_agg(elements_id order by elements_id) elements 
    from group_elements 
    group by groups_id )
select elements, count(*), array_agg(groups_id) offending_groups 
    from group_elements_arr 
    group by elements 
    having count(*) > 1; 
```

根据大小`group_elements`和它的变化率，你可能会按照这条线将一些东西塞进触发器观察`group_elements`中。如果这还不够快，您可以具体`group_elements_arr`化为由触发器管理的真实表。

`FOR EACH STATEMENT`而且我认为，触发器应该是`INITIALLY DEFERRED`为了轻松建立一个新小组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:51:07.157

来自用户 ypercube 的这个链接最有帮助： [对 set 的唯一约束](https://dba.stackexchange.com/questions/22186/unique-constraint-on-a-set)。简而言之，每个人都说的有点是正确的。

这是一个权衡的问题，但这里是最好的选择：

a) 将散列或元素值的其他组合添加到 groups 表并使其唯一，然后使用触发器填充 groups_elements 表。这种方法的优点是，只要您拒绝对 groups_elements 的裸更新，它就会保留查询能力并强制执行约束。缺点是它增加了复杂性，并且您现在已经在数据库中引入了诸如“如何唯一地表示一组元素”之类的逻辑。

b) 保持表格原样并使用您的访问层控制对 groups_elements 的访问，无论是存储过程还是其他方式。这具有保留查询能力并保持数据库本身简单的优点。但是，这意味着您正在将分析约束移至访问层，这必然意味着您的访问层需要更复杂。还有一点就是，它把数据应该是什么和数据本身分开了，这有利有弊。如果您需要更快地访问集合是否已经存在，您可以单独解决该问题。

# c++ - 分别声明和初始化结构？

> ID：13179786
> 
> 赞同：2
> 
> 时间：2012-11-01T14:59:55.843
> 
> 标签：c++, visual-c++

我可以单独声明和初始化结构吗？

```
Ref refType(string strRef) {
    Ref ref;
    if (regex_match(strRef.begin(), strRef.end(), rxIdentifier)) {
        ref = { Var, strRef };
    } else if (regex_match(strRef.begin(), strRef.end(), rxConstant)) {
        ref = { Const, strRef };
    }
    return ref;
} 
```

似乎不起作用。Visual Studio 抱怨`{`初始化结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:04:57.103

您可以在 C++11 中执行此操作，但这不是初始化 - 它是赋值。

[http://coliru.stacked-crooked.com/a/819b79c4ee428537](http://coliru.stacked-crooked.com/a/819b79c4ee428537)

```
#include <iostream>
using namespace std;
struct S
{
   int a;
};
int main()
{
   S b;
   b={1};
   cout << b.a;
   b={2};
   cout << b.a;
   return 0;
} 
```

注意，VS2010 和 VS2012[不支持初始化列表](http://www.cpprocks.com/a-comparison-of-c11-language-support-in-vs2012-g-4-7-and-clang-3-1/)

* * *

编辑：顺便说一句，您可以将您的代码转换为：

```
Ref refType(string strRef) {
    if (regex_match(strRef.begin(), strRef.end(), rxIdentifier)) {
        Ref ref = { Var, strRef };
        return ref;
    } else if (regex_match(strRef.begin(), strRef.end(), rxConstant)) {
        Ref ref = { Const, strRef };
        return ref;
    }
} 
```

* * *

另一种方法是使用 Boost.Optional，但在这种情况下您需要构造函数：

```
Ref refType(string strRef)
{
    boost::optional<Ref> ref;
    if(strRef=="1")
    {
        ref=Ref(Var,strRef);
    }
    else
    {
        ref=Ref(Const,strRef);
    }
    return ref.get();
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T15:14:09.427

是的，但仅限于 C99 和 C++11。旧版本的 C 和 C++ 不支持这样的东西。

在 C99 中，它们被称为*复合文字*，它们看起来像这样：

```
typedef struct Point
{
    int x, y;
} Point;
...
Point p;
p = (Point){3, 4}; 
```

在 C++11 中，它们被称为*扩展初始化列表*，它们看起来像这样：

```
struct Point
{
    int x, y;
};
...
Point p;
p = {3, 4}; 
```

然而，正如 Evgeny Panasyuk 所指出的，Visual Studio 尚未完全符合 C++11 标准。Visual Studio 2010 是在 C++11 标准最终确定之前发布的，即便如此，它也没有完全符合当时的标准草案。显然 VS2012 也没有完全赶上。

因此，Visual Studio 尚不支持扩展初始值设定项列表。Visual Studio 也不支持 C99，微软已经表示他们不打算在短期内支持 C99。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:01:21.037

不，你不能，在 C++`Ref ref;`中是初始化，随后的分配是......好吧，分配。

# iphone - 应用内购买自动更新订阅

> ID：13179788
> 
> 赞同：1
> 
> 时间：2012-11-01T15:00:05.253
> 
> 标签：iphone, ios, in-app-purchase, storekit

我有一个销售虚拟电话号码的应用程序。当用户订阅时，我们会提供一个新的虚拟号码，用户可以在应用程序中管理这个号码。之后，用户可以接听电话，但不必通过应用程序接听电话。我的意思是，在初次购买后，用户无需打开应用程序即可使用该服务，但我需要一种每月检查订阅状态的方法。我的问题是，即使用户不再打开应用程序，我是否可以在服务器中设置一个 cron 来检查下一个收据？是否可以出售不是通过应用程序提供的订阅服务？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T06:42:42.617

您可以使用 Apple 的 Auto-renewable 订阅来为您的用户提供服务。

1.  当用户第一次购买订阅时，将收据存储在服务器中。

2.  在服务器数据库中维护每个用户的订阅到期日期。

3.  [运行 cron 作业并通过苹果 API http://tinyurl.com/ay2labm](http://tinyurl.com/ay2labm)检查订阅的“活动状态”

4.  根据状态，您可以将服务扩展到您的用户。

    [http://tinyurl.com/aeh9f84](http://tinyurl.com/aeh9f84)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:22:01.203

看看这个管理 IAP 和推送通知的服务.. [http://urbanairship.com/](http://urbanairship.com/)

如果您的服务符合自动更新订阅的条件，您可以使用它（这很棘手，因为如果应用程序不提供内容，他们会拒绝此服务。在此处查看更多信息：http: [//developer.apple.com/library/ios/#文档/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T21:19:56.450

I've not done this myself, but the gist I get from the store docs is that you will verify the receipt and get an updated transaction if the subscription has been renewed. So presumably on your server you have some indication of when the original subscription was purchased and the time, so you would check before it expires and get the new transition.

I'd suggest maybe using push notification if this were to fail, to engage the user to update/renew.

# r - 是否有更好的语法来对 R 中的数据框进行子集化？

> ID：13179792
> 
> 赞同：7
> 
> 时间：2012-11-01T15:00:19.147
> 
> 标签：r, dataframe, subset

我想有条件地对数据框进行子集化*而不*引用数据框。例如，如果我有以下内容：

```
long_data_frame_name <- data.frame(x=1:10, y=1:10) 
```

我想说：

```
subset <- long_data_frame_name[x < 5,] 
```

但相反，我不得不说：

```
subset <- long_data_frame_name[long_data_frame_name$x < 5,] 
```

plyr 和 ggplot 处理得非常好。是否有任何软件包可以使数据框的子集化同样漂亮？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T15:20:33.590

听起来您正在寻找**data.table**包，它实现了您所描述的索引语法。（`data.table`对象本质上`data.frame`是具有附加功能的 s，因此您几乎可以在使用“普通旧”数据框架的任何地方继续使用它们。）

包的作者 Matthew Dowle在他对[这个流行的 SO [r]-tag 问题](https://stackoverflow.com/questions/1296646/how-to-sort-a-dataframe-by-columns-in-r)`[.data.table()`的回答中论证了 's 索引语法的优势。他在那里的回答也可以直接回答你上面的问题！

这是一个例子：

```
library(data.table)
long_data_table_name <- data.table(x=1:10, y=1:10) 

subset <- long_data_table_name[x < 5, ]
subset
#    x y
# 1: 1 1
# 2: 2 2
# 3: 3 3
# 4: 4 4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T16:00:01.403

是的：

```
newdata <- subset(mydata, sex=="m" & age > 25) 
```

或者

```
newdata <- subset(mydata, sex=="m" & age > 25 , select=weight:income) 
```

参考： http: [//www.statmethods.net/management/subset.html](http://www.statmethods.net/management/subset.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T16:11:38.250

美丽是主观的，不是吗？为了分享其他解决方案，还有这个`sqldf`包：

```
library(sqldf)
subset <- sqldf("select * from long_data_frame_name where x < 5") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-18T02:23:17.393

尝试 dplyr，在发布并回答此问题后发布。它非常适合许多常见的数据帧处理任务。

```
library(dplyr)
subset <- filter(long_data_frame_name, x > 5) 
```

或者，等效地：

```
subset <- long_data_frame_name %>% filter(x > 5) 
```

# ruby-on-rails - Rails：输入正确的用户名/密码后，用户身份验证未重定向

> ID：13179798
> 
> 赞同：0
> 
> 时间：2012-11-01T15:00:32.413
> 
> 标签：ruby-on-rails, redirect, http-headers, authentication

我有一个 Rails 应用程序，由于某种原因，我的登录操作不起作用。我输入了正确的用户名/密码，但它不会重定向到所需的“菜单”操作。它只是每次都将我重定向到登录操作（我已将其设置为在登录不成功时发生）。我说`unless session[:user_id]`。当我故意输入错误的密码时，闪烁消息是正确的，它显示“无效的用户名/密码”，当输入正确的密码时，它并不意味着它识别它，不知何故没有创建会话。下面是我的代码

应用控制器

```
protected
def confirm_logged_in
    unless session[:user_id]
        flash[:notice] = "Please Log In"
        redirect_to(:controller => 'access', :action => 'login')
        return false
    else
        return true
    end
end 
```

访问控制器（魔法应该发生的地方）

```
Class AccessController < ApplicationController

layout 'admin'

before_filter :confirm_logged_in, :except => [:login, :attempt_login, :logout]

def index
    menu
    render('menu')
end

def menu
    #display text & links
end

def login
    #login form
end

def attempt_login
    authorised_user = AdminUser.authenticate(params[:username], params[:password])
    if authorised_user
        flash[:notice] = "You are now logged in"
        redirect_to(:action => 'menu')
    else
        flash[:notice] = "Invalid username/password"
        redirect_to(:action => 'login')
    end
end

def logout
    session[:user_id] = nil
    session[:username] = nil
    flash[:notice] = "You have been logged out"
    redirect_to(:action => 'login')
end

end 
```

管理员用户模型

```
require 'digest/sha1'

class AdminUser < ActiveRecord::Base

# because we created a migration to change the name of the users tabe to admin_users we have   to specify
# set_table_name("admin_users")
# or we can change the class name and file name like we did
attr_accessible :first_name, :last_name, :username, :email 
attr_accessor :password
attr_protected :hashed_password, :salt

scope :named, lambda {|first,last| where(:first_name => first, :last_name => last)}

has_and_belongs_to_many :pages
has_many :section_edits
has_many :sections, :through => :section_edits

EMAIL_REGEX = /^[A-Z0-9._%+-]+@[A-Z)0-9.-]+\.[A-Z]{2,4}$/i

validates_presence_of :first_name
validates_presence_of :last_name
validates_presence_of :username

validates_length_of :first_name, :maximum => 25
validates_length_of :last_name, :maximum => 50
validates_length_of :username, :within => 3..25

validates_length_of :password, :within => 8..25, :on => :create

validates_uniqueness_of :username

validates :email, :presence => true, :length => {:maximum => 100}, :format => EMAIL_REGEX, :confirmation => true

before_save :create_hashed_password
after_save :clear_password

def self.authenticate(username="", password="")
user = AdminUser.find_by_username(username)
if user && user.password_match?(password)
  return user
else
  return false
end
end

def password_match?(password="")
hashed_password == AdminUser.hash_with_salt(password,salt) 
end

def self.make_salt(username="")
Digest::SHA1.hexdigest("User #{username} with #{Time.now} to make salt")
end

def self.hash_with_salt(password="", salt="")
Digest::SHA1.hexdigest("Put #{salt} on the #{password}")
end

private

def create_hashed_password
unless password.blank?
  self.salt = AdminUser.make_salt(username) if salt.blank?
  self.hashed_password = AdminUser.hash_with_salt(password,salt)
end
end

def clear_password
self.password = nil
end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:34:32.163

我找到了解决方案。这很简单。问题是我在登录时没有创建会话，这就是登录无法识别会话的原因，因为它们没有初始化。在访问控制器中，我只是将其更改为：

```
def attempt_login
    authorised_user = AdminUser.authenticate(params[:username], params[:password])
    if authorised_user
        session[:user_id] = authorised_user.id
        session[:username] = authorised_user.username
        flash[:notice] = "You are now logged in"
        redirect_to(:action => 'menu')
    else
        flash[:notice] = "Invalid username/password"
        redirect_to(:action => 'login')
    end
end 
```

修改的是添加到代码中的两个会话行

# apache - 如何通过防火墙允许特定 IP？

> ID：13179799
> 
> 赞同：0
> 
> 时间：2012-11-01T15:00:33.253
> 
> 标签：apache, ip, localhost, firewall, vpn

我有一个本地 Apache 服务器，我希望它可以从其他机器访问。我发现关闭（外部的，基于 Windows 的）防火墙后是可能的。

我可以在不关闭防火墙的情况下从特定 IP 访问它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:41:19.263

转到*Windows 防火墙*GUI 并从“*例外”选项卡添加例外 ..添加例外时，您可以更改其范围并可以在“**自定义列表*”下提供特定 IP ..

请确保未选中*Windows 防火墙*GUI下*常规选项卡*上的*不允许例外复选框。*

 **瞧，您的 Apache 服务器现在可以从特定 IP 访问，而无需关闭防火墙..！！**

# c# - 使用多个连接将 linq 转换为 lambda

> ID：13179802
> 
> 赞同：10
> 
> 时间：2012-11-01T15:00:39.670
> 
> 标签：c#, linq, lambda

我正在尝试将此 linq 查询转换为 lambda

```
 var query = (from a in context.Table_A
                         join u in context.Table_B  on a.scored equals u.userid
                         join u2 in context.Table_B on a.scorer equals u2.userid
                         from cs in a.Table_C //(Table_A is related to Table_C)
                         where (a.date>= startdate && a.date < enddate)
                         select new MSViewModel
                         {
                             scored= u.User.name,
                             scorer= u2.User.name,
                             subject_name = cs.Subject.name,
                             score = cs.score,
                             categoryid = cs.id,
                         })
                            .AsEnumerable()
                            .GroupBy(t => t.scored)
                            .ToList(); 
```

到目前为止，这就是我所拥有的。我有点迷失了下一步该做什么。

```
 var tobi = db.Table_A.Join(db.Table_B,a=>a.scored,u=>u.userid,
                    (a,u) => new {scored=u.User.name });
                    db.Table_A.Join(db.Table_B,a1=>a1.scorer,u2=>u2.userid, 
                    (a,u2)=> new {scorer= u2.User.name}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-01T15:08:33.787

首先，我同意 Arran 的评论：查询表达式将更容易处理。我完全同意在有意义的地方使用 lambda 形式，但查询表达式中的连接通常*要*简单得多。

话虽如此，您基本上需要模仿[透明标识符](http://blogs.msdn.com/b/wesdyer/archive/2006/12/22/transparent-identifiers.aspx)。下面的代码未经测试，但对我来说似乎有点可信。

```
var query = context.Table_A
                   .Join(context.Table_B, a => a.scored, u => u.userid,
                         (a, u) => new { a, u })
                   .Join(context.Table_B, p => p.a.scorer, u2 => u2.userid,
                         (p, u2) => new { p, u2 })
                   .SelectMany(q => q.p.a.TableC, (q, cs) => new { q, cs })
                   .Where(r => r.q.p.a.date >= startdate && r.q.p.a.date < enddate)
                   .Select(q => new MSViewModel {
                                  scored= r.q.p.u.User.name,
                                  scorer= r.q.u2.User.name,
                                  subject_name = r.cs.Subject.name,
                                  score = r.cs.score,
                                  categoryid = r.cs.id,
                                })
                   .AsEnumerable()
                   .GroupBy(t => t.scored)
                   .ToList(); 
```

基本上`p`and`q`和`r`是这里的透明标识符。你有三个，因为你有两个连接和一个后续`from`子句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T15:32:09.053

要扩展我的评论，如果您有 Resharper：

**Resharper 显示将 LINQ 转换为 Lambada 的选项** ![在此处输入图像描述](../Images/d039c0f2141fab2d05e88d676504fe19.png)

**转换后：** ![在此处输入图像描述](../Images/217c34581745b46339e1406e5f2cf79a.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T15:28:48.713

试试这个：

```
 var query = (_context.Table_A.Join(_context.Table_B, a => a.scored, u =>
    u.userid,
    (a, u) => new {a, u}).Join(_context.Table_B,
    @t => @t.a.scorer,
    u2 => u2.userid,
    (@t, u2) => new {@t, u2}).
    SelectMany(@t => _context.Table_A, (@t, cs) => new MSViewModel()
    {
    scored = @t.@t.u.User.name,
    scorer= @t.u2.User.name,
    subject_name = @t.cs.Subject.name,
    score = @t.cs.score,
    categoryid = @t.cs.id,
    })).AsEnumerable()
    .ToList(); 
```

# google-app-engine - 带有或条件的 Google 搜索

> ID：13179803
> 
> 赞同：0
> 
> 时间：2012-11-01T15:00:49.697
> 
> 标签：google-app-engine

我需要用 OR 条件做一个谷歌搜索新闻。我尝试了以下但不工作“测试车”+“咖啡”+“药丸”

所以它应该在 Test Car or Cofee or Pills 的新闻中返回我的结果。

我需要以这种方式与每个人单独进行，因为结果我将输入到应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:56:35.970

App Engine 不直接支持这样的析取查询，因为查询规划器执行它们的效率比您执行的要高。相反，进行 3 个单独的查询并合并结果（如果需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:03:10.767

你有没有尝试过：

```
"Test Car" OR "Coffee" OR "Pills" 
```

来自： http: [//support.google.com/websearch/bin/answer.py ?hl=en&answer=136861](http://support.google.com/websearch/bin/answer.py?hl=en&answer=136861)

# java - Java中的按位运算：测试“1010101111011”中是否设置了位？

> ID：13179804
> 
> 赞同：3
> 
> 时间：2012-11-01T15:00:52.693
> 
> 标签：java, bit-manipulation, bit

假设我有一些用户输入（作为字符串），例如“11010011011”。

现在我想检查是否在特定位置设置了一点点（每个数字都应该作为一个标志）。

注意：我将用户的输入作为字符串接收。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:02:27.623

您可以按原样使用字符串 - 假设您要检查左侧的第一位：

```
if (input.charAt(0) == '1') { // 
```

或者，如果您想使用[BitSet](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)，您可以循环初始化它：

```
String input = "11010011011";
BitSet bs = new BitSet(input.length());
int i = 0;
for (char c : input.toCharArray()) {
    if (c == '1') bs.set(i);
    i++;
} 
```

然后检查是否设置了第 i 位：

```
boolean isSet = bs.get(i); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T15:06:17.310

如果要使用按位运算，则首先将字符串转换为整数并使用位掩码进行测试：

```
int val = Integer.parseInt("11010011011", 2);
System.out.println(val & (1<<0)); //First bit
System.out.println(val & (1<<1)); //Second bit
System.out.println(val & (1<<2)); //Third bit
..... 
```

# php - 将退货另存为

> ID：13179808
> 
> 赞同：0
> 
> 时间：2012-11-01T15:01:01.907
> 
> 标签：php

我正在使用 php 将 textarea 保存到文件中，然后想在包含“text.txt”中使用；。如何将所有 textarea 的返回另存为`<br>`？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T15:01:34.313

该函数[`nl2br`](http://php.net/manual/en/function.nl2br.php)正是这样做的，因此在保存之前在输入上调用它。

# class - 类方法返回字典错误

> ID：13179811
> 
> 赞同：0
> 
> 时间：2012-11-01T15:01:15.940
> 
> 标签：class, vba

我的班级“联系人”有以下字段：

```
Private Name As String
Private CurDate As Date
Private Dict As Dictionary

Private Sub Class_Initialize()
    Set Dict = New Dictionary
End Sub
Private Sub Class_Terminate()
    Set Dict = Nothing
End Sub 
```

（这应该在构造函数中`Set Dict = New Dictionary`吗？）并遵循字典字段的获取属性：

```
Public Property Get Get_Dict() As Dictionary
    Get_Dict = Dict
End Property 
```

现在在我的代码中我有：

```
Dim Contact1 As New Contact
Contact1.Set_Contact x, y, z

Dim TempDic As New Dictionary
Set TempDict = Contact1.Get_Dict 
```

它不编译：“参数不是可选的”。如果我在 Get_Dict 属性中显然没有参数，这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:14:27.567

应该使用：

```
Public Property Get Get_Dict() As Dictionary
   Set Get_Dict = Dict
End Property 
```

当我们将引用分配给对象时。

# perl - 将分离的字符重新格式化为情侣

> ID：13179818
> 
> 赞同：1
> 
> 时间：2012-11-01T15:01:36.970
> 
> 标签：perl, sed, awk

输入：

```
rs001 A C T G C G T T
rs002 C C T T G G A A 
```

输出1：

```
rs001 AC TG CG TT
rs002 CC TT GG AA 
```

输出2：

```
rs001 1 1 1 2
rs002 2 2 2 2 
```

好的，所以基本上我想将任何两个相似的核苷酸（如 AA、CC、TT 或 GG）替换为 2，并将任何两个不同的核苷酸（如 AT、TA、CG、.. 等）替换为 1，同时考虑到输入应该是首先转换为 out1，然后转换为 out2。此外，我们在每一行中有很多字段（如 200 列），所以这里需要循环。

这是我尝试过的：

```
cat input | awk '{ for (x = 2; x <= NF; x = x+2) print $x$(x+1) }' 
```

结果太奇怪了，谁能告诉我为什么我出不去1？！我在 awk 循环中犯了什么错误？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:10:16.627

为了第一，

```
sed 's/ \([ACGT]\) / \1/g' input >out1 
```

这将在每隔一个核之后删除空间。它匹配两侧有空格的核苷酸；下一场比赛将从上一场比赛结束的地方开始。

对于第二个，

```
sed 's/\([ACGT]\)\1/2/g;s/[ACGT][ACGT]/1/g' out1 >out2 
```

这会将两个相邻的相同字母替换为 2，然后将任何剩余的相邻两个字母替换为 1。

这假设你有 Linux；其他`sed`方言可能需要稍作修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:15:19.693

```
awk '{
   out1 = out2 = $1
   for (i=2;i<=NF;i+=2) {
      out1 = out1 FS $i $(i+1)
      out2 = out2 FS ($i == $(i+1) ? 2 : 1)
   }
   print out1 > "out1"
   print out2 > "out2"
}' input 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:09:33.900

以下是修复`awk`脚本以获取输出 1 的方法：

```
awk '{ printf "%s ", $1; for (x = 2; x <= NF; x = x + 2) {printf "%s%s ", $x, $(x+1)} printf "\n"}' input 
```

`print`默认情况下在末尾添加一个新行，因此您必须使用格式化字符串`printf`来指定您想要新行的确切位置。

（也在开始处添加`printf "%s ", $1;`以在每行开头打印标题）

编辑：Triplee 的解决方案看起来比我的要优雅得多——你应该放弃 awk 并选择他的 =)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:54:05.570

这可能对您有用（GNU sed）：

```
sed -re 's/ (.) / \1/g;w out1' -e 's/([ACTG])\1/2/g;s/[ACTG]./1/g' file >out2 
```

# android - 如何隐藏我的应用程序创建的 sd 卡中的文件？

> ID：13179819
> 
> 赞同：2
> 
> 时间：2012-11-01T15:01:37.310
> 
> 标签：android

> **可能重复：**
> [使用 Java 在 Windows 上隐藏文件/文件夹](https://stackoverflow.com/questions/1294989/make-a-file-folder-hidden-on-windows-with-java)

我想将文件插入 sd 卡并且文件不应该正常可见，它应该只能通过我的应用程序可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:14:38.037

无法从文件浏览器中隐藏 SD 卡上的文件。但如果您有不希望 android 索引并在 avi 或 mp3 文件等媒体播放器中显示的文件，您只需要创建一个名为 `.nomedia`在与您的媒体文件相同的目录中。

# ruby-on-rails - Rails 中的 JSON 性能

> ID：13179820
> 
> 赞同：0
> 
> 时间：2012-11-01T15:01:44.483
> 
> 标签：ruby-on-rails, json, mongoid, activemodel

我正在 Rails 应用程序中对我的索引操作运行查询，如果您查看日志，它会非常快：

```
Started GET "/apartments?within=-74.01798248291016%2C40.746346606483826%2C-73.8943862915039%2C40.79314877043915&per_page=500" for 127.0.0.1 at 2012-11-01 16:58:21 +0200
Processing by ApartmentsController#index as JSON
  Parameters: {"within"=>"-74.01798248291016,40.746346606483826,-73.8943862915039,40.79314877043915", "per_page"=>"500"}
MONGODB (228ms) development['$cmd'].find({"count"=>"apartments", "query"=>{:status=>"available", :coordinates=>{"$within"=>{"$box"=>[[-74.01798248291016, 40.746346606483826], [-73.8943862915039, 40.79314877043915]]}}}, "fields"=>{:neighborhood_id=>0}}).limit(-1)
MONGODB (445ms) development['apartments'].find({:status=>"available", :coordinates=>{"$within"=>{"$box"=>[[-74.01798248291016, 40.746346606483826], [-73.8943862915039, 40.79314877043915]]}}}, {:neighborhood_id=>0}).limit(500).sort([[:qs, :desc]])
Completed 200 OK in 9737ms (Views: 8816.0ms) 
```

如果数据库查询只需要 445 毫秒，为什么 JSON 需要将近 10 秒来呈现并通过网络发送回？

有没有更快的方法将`@apartments`集合呈现为 JSON？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:12:46.877

使用不同的 JSON 序列化程序？

[https://rubygems.org/gems/oj](https://rubygems.org/gems/oj)

# httpclient - HttpClient 4 的 SSL“Peer not Authenticated”错误 - 在某些情况下有效，但在其他情况下无效

> ID：13179823
> 
> 赞同：4
> 
> 时间：2012-11-01T15:01:50.447
> 
> 标签：httpclient, apache-httpclient-4.x

我有一个 *.mydomain.com 的通配符证书（名称已更改以保护无辜者……那不是真正的域 :)）

使用正确实现的 Java HttpClient 4 时（在 FF 中未发现该问题），通过 HTTPS 对 api.mydomain.com 进行的服务调用是成功的，而对 mydomain.com 的非生产子域（developer.mydomain）进行的服务调用相同.com、api-beta.mydomain.com、api-uat.mydomain.com）使用下面的测试工具代码生成此异常：

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:397)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:573)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
at com.mydomain.httpclientexample.HttpClientTestv2.main(HttpClientTestv2.java:54) 
```

虽然 developer.mydomain.com、api-beta.mydomain.com 和 api-uat.mydomain.com 上的 SLL 证书似乎与 api.mydomain.com 上的 WC 证书相同，但在 api.mydomain 上看不到异常。 com 但它在其他子域上。该代码适用于 api-na.mydomain.com 并且应该适用于非生产子域。

有任何想法吗？

客户端代码：如您所见，我可以轻松更改要调用的 ADDRESS_VALIDATION_SERVICE_URI。api.mydomain.com 一个没有 SSLPeerUnverifiedException 的作品；其他三个 URI 抛出异常......

```
package com.mydomain.httpclientexample;

import java.io.IOException;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

public class HttpClientTestv2 {

//public final static String ADDRESS_VALIDATION_SERVICE_URI = "https://developer.mydomain.com/v1.0/stores/MYSTORE/address/validate.xml";
public final static String ADDRESS_VALIDATION_SERVICE_URI = "https://api-beta.mydomain.com/v1.0/stores/MYSTORE/address/validate.xml";
//public final static String ADDRESS_VALIDATION_SERVICE_URI = "https://api-uat.mydomain.com/v1.0/stores/MYSTORE/address/validate.xml";
//public final static String ADDRESS_VALIDATION_SERVICE_URI = "https://api.mydomain.com/v1.0/stores/MYSTORE/address/validate.xml";
public final static String APIKEY_ATTRIBUTE_NAME = "apikey";
public final static String APIKEY_ATTRIBUTE_VALUE = "2c90bc83e821364ffa557486c3e2a44e";

/**
 * @param args
 */
public static void main(String[] args) {

    DefaultHttpClient httpclient = new DefaultHttpClient();  
    HttpPost httpPost = new HttpPost(ADDRESS_VALIDATION_SERVICE_URI);
    System.out.println("executing request" + httpPost.getRequestLine());  

    //set a request header 
    httpPost.setHeader(APIKEY_ATTRIBUTE_NAME , APIKEY_ATTRIBUTE_VALUE);

    //add the xml body   
    StringEntity postBody = null;
    try {
        postBody = new StringEntity(getXMLDoc(),"UTF-8"); 
    } catch (UnsupportedEncodingException uee) {
        System.out.println("----------------------------------------");
        System.out.println("Exception Caught in UnsupportedEncodingException catch block");
        System.out.println("----------------------------------------");

        uee.printStackTrace();
    }   

    httpPost.setEntity(postBody);

    HttpResponse response;
    try {
        response = httpclient.execute(httpPost);

        HttpEntity entity = response.getEntity();  
        System.out.println("----------------------------------------");  
        System.out.println(response.getStatusLine());  

        if (entity != null) {  
            System.out.println("Response content length: " + entity.getContentLength());
            System.out.println("Content:" + EntityUtils.toString(entity));
            EntityUtils.consume(entity);
            //          entity.consumeContent();  
        }  

    } catch (ClientProtocolException e) {

        System.out.println("----------------------------------------");
        System.out.println("Exception Caught in ClientProtocolException catch block");
        System.out.println("----------------------------------------");

        e.printStackTrace();
    } catch (IOException e) {

        System.out.println("----------------------------------------");
        System.out.println("Exception Caught in ClientProtocolException catch block");
        System.out.println("----------------------------------------");

        e.printStackTrace();
    }  

    // When HttpClient instance is no longer needed,   
    // shut down the connection manager to ensure  
    // immediate deallocation of all system resources  
    httpclient.getConnectionManager().shutdown();          

}

private static String getXMLDoc() {

    StringBuffer XMLDoc = new StringBuffer("<?xml version=\"1.0\" encoding=\"UTF-8\"?><AddressValidationRequest xmlns=\"http://api.mydomain.com/schema/checkout/1.0\">") 
    .append("<Header><MaxAddressSuggestions>5</MaxAddressSuggestions></Header>") 
    .append("<Address><Line1>17243 S. Mill Ln</Line1><Line2/><City>Ocean View</City><MainDivision>DE</MainDivision><CountryCode>US</CountryCode><PostalCode>19970</PostalCode></Address>") 
    .append("</AddressValidationRequest>"); 

    return XMLDoc.toString();

}

} 
```

# ruby-on-rails - 如何将 Pry 与 Cucumber / Capybara 一起使用？

> ID：13179825
> 
> 赞同：3
> 
> 时间：2012-11-01T15:01:58.967
> 
> 标签：ruby-on-rails, cucumber, capybara, pry

我应该怎么做才能使用 Pry 来调试我的 Cucumber 步骤？这是一个例子。

```
When 'I download a PDF via "$label"' do |label|
  old_body = page.body
  click_link(label)
  page.driver.instance_variable_set '@body', page.body.pdf_to_text
  binding.pry
end 
```

当我使用该步骤运行单个场景时，我可以访问 Pry 控制台

```
[1] pry(#<Cucumber::Rails::World>)> 
```

但我什么也写不出来。似乎它停止工作了。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:31:51.710

在将 Rails 升级到 3.2.10 + Capybara 到 2.0.2 之后，我再次做了同样的事情，现在 Pry 可以完美运行。

# python - 与函数参数混淆以及为什么不需要按名称调用参数

> ID：13179826
> 
> 赞同：0
> 
> 时间：2012-11-01T15:01:59.870
> 
> 标签：python, function, parameters, scope

首先，我使用的是 Python3

我正在阅读 Khanacademy 关于函数的 Python 教程：

[定义阶乘函数](http://www.khanacademy.org/science/computer-science/v/defining-a-factorial-function)

这是代码：

```
def factorial(number):
    product = 1
    for i in range(number):
        product = product * (i+1)
    return product

user_input = int(input("enter a number that you want to factorial: "))
factorial_of_user_input = factorial(user_input)
print(factorial_of_user_input) 
```

我很难解释我的困惑，所以请多多包涵。我不明白以下内容： Sal 命名参数**number**。但随后，**数字**消失了。

最初，在函数教程之前，**user_input**被命名为**number**后跟**print(number)**。你得到输入，称之为**number**然后你打印**number**，这非常有意义，因为它很好而且一致。

不幸的是，现在，对我来说，这种一致性被打破了。您如何更改使变量名称与参数名称不同并使其起作用？因为一致性被打破了，我认为它会爆炸。在我看来，我是这样看的：该函数在桶中查找一个名为**number**的整数。如果你没有从那个确切的桶中给它一个整数，它就不会工作 - 有点像将一个圆形钉子插入一个矩形。

Python 使用了什么魔法来确定**user_input与****number**相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:54:22.890

该`factorial`函数对它自己的代码块（缩进部分）之外发生的事情一无所知。当您将参数传递给它时，名称不会与它们一起传递。函数看到的只是你传入了一个整数对象。函数声明中括号的目的（`(number)`在这种情况下）是为传递给函数的对象分配名称。

简而言之，虽然在函数外部输入称为`user_input`，但它作为无名整数传递给函数，并且函数负责通过其定义为自己命名对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:10:41.433

number 是给`factorial`函数的名称，这就是所有语法含义：您输入一个参数，在`factorial`函数内部它被称为名称。名字`user_input`不相关，你也可以写 `factorial(5)`。

这在其他语言中也类似。例如，在 C++ 中，您可以编写一个函数

```
int square(int input_number){ return input_number*input_number ; } 
```

你可以这样称呼它`square(5)`

您对正在发生的事情的看法是自洽的，但这不是 python 或其他语言的工作方式。具体来说，您说*该函数在存储桶中查找具有数字名称的整数。*

当您声明一个与示例中类似的函数时，您会说您提供的任何值都将在内部被称为`number`. 但是，有一种方法可以获得您期望的行为。在python中它看起来像这样：

```
def myfunction():
    print(some_value) 
```

在这种情况下，`some_value`必须存在并在*范围*（或您所称的存储桶）中以该名称为人所知。所以，你需要这样做才能使这项工作：

```
def myfunction():
    print(some_value)
some_value=3
myfunction() 
```

作为一个相反的例子，想象如果你想输入一个不知道特定名称的值，你会做类似的事情

```
def myfunction(a,b,c): 
    print(("a ",a," b ",b,"c ",c))
j=4
myfunction(1,j,5+2)
gives('a ', 1, ' b ', 4, 'c ', 7) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:58:42.003

这归结为[名称空间。](http://bytebaker.com/2008/07/30/python-namespaces/)

您需要了解您所处的**范围**。在 python 中，范围由函数、类和模块分隔。在您的情况下，您首先需要了解功能范围。

如果我有这样的代码块：

```
def function1(var1):
    print var1

var1 = 'Variable 1'
function1(var1) #will print: Variable 1
function1('var1 is just for use inside the function') #will print: var1 is just for use...
print var1 #will print: Variable 1, because we never did any assignment outside of the function 
```

它表明函数内部的 var1 不是函数外部的 var1。有名为`global`and的命名空间`local`。要随时查看每个范围内的变量，python 调用了两个内置函数`globals()`，`locals()`它将向您显示所有变量及其值在您调用的范围内的字典（映射到值的名称）。

# drupal-7 - 任务计划 IE 9 和强制文档模式使用 IE 9 标准 X-UA 无法正常运行

> ID：13179827
> 
> 赞同：0
> 
> 时间：2012-11-01T15:02:01.037
> 
> 标签：drupal-7, internet-explorer-9, x-ua-compatible

我正在通过计划任务全屏运行 IE 9。但是，当 IE 9 打开我的网站时，它默认使用 IE 7 标准。我的网站使用的是 drupal 7。

我已经将我的元标记放在标题上。

```
http-equiv="X-UA-Compatible" content="IE=edge" 
```

我使用“-k”作为全屏运行 IE 的参数，是否有等效参数可以强制 IE 9 使用 IE 9 标准作为文档模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:04:12.223

您只能更改兼容性视图设置。IE->工具->兼容性视图设置。在启动期间没有要使用的参数。

# jquery - jQuery AJAX 在生产服务器上不起作用

> ID：13179831
> 
> 赞同：2
> 
> 时间：2012-11-01T15:02:04.927
> 
> 标签：jquery, asp.net, ajax, webmethod

这是我在这里的第一篇文章。任何帮助都是极好的。我正在尝试使用 jQuery 和 AJAX 从我的 aspx 页面调用 vb.NET 子例程。当我在我的 PC (Windows XP SP2) 上运行 VS 2008 的页面时，它运行良好。当我将站点复制到生产服务器 Windows Server 2008 时，它什么也没做。没有错误或任何东西。我试过用 IE 的脚本调试器进行调试。几天来我一直试图解决这个问题，但一无所获。

这是脚本：

```
<script type = "text/javascript">
    function AjaxTest() {
        $.ajax({
            type: 'POST',
            url: "Test.aspx/AjaxTestSub",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            async: true,
            cache: false,
            success: OnSuccess,
            failure: function (response) {
                alert("Didn't work!");
            }
        });
    }
    function OnSuccess(response) {
        alert("Worked!");
    }
</script> 
```

这是简单的子程序：

```
<WebMethod()> Public Shared Sub AddPOToTrailer()
    MsgBox("Made it to Subroutine!")
End Sub 
```

我确定我遗漏了很多信息，所以请询问您是否能想到任何可能有帮助的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:03:25.277

您不能`MsgBox()`从服务器端代码调用。
摆脱那个电话，一切都应该正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:07:34.510

如果要测试调用是否返回数据，可以使用 Response.Write 而不是 MsgBox。请记住，您可能需要使用 Response.Clear 和 Response.Flush，具体取决于您管理代码的方式。如果它是一个 HttpHandler 或 Web 服务调用，你应该没问题，但如果你正在调用一个网页，如果你没有指示服务器在你写完后停止 Response.End，它将呈现页面内容（即 HTML）您的内容到输出流。

希望这可以帮助。

# php - CI 控制器未加载

> ID：13179838
> 
> 赞同：0
> 
> 时间：2012-11-01T15:02:32.433
> 
> 标签：php, codeigniter, codeigniter-2

我有一个使用 CI 版本 2.1.3 在本地安装的 xampp 上运行的站点。代码已放在 git 存储库中。
我将代码克隆到另一台机器上的目录中（也使用相同的路径运行 xammp install）。

现在在“另一台机器”上，它拒绝加载 CI_Controller 类，并给出错误消息；

```
Fatal error: Class 'CI_Controller' not found in C:\dev\www\my_site\system\core\CodeIgniter.php on line 244 
```

我已经向 system/core/Codeigniter 添加了一些代码来检查发生了什么。这是...

```
// Load the base controller class
require BASEPATH.'core/Controller.php';

function &get_instance()
{
        if (file_exists(BASEPATH.'core/Controller.php')) {
            echo 'file exists<br />';
            if (class_exists('CI_Controller')) {
                echo 'class exists<br />';
            } else {
                echo 'no class<br />';
            }
        } else {
            echo 'no file found<br />';
        }

    return CI_Controller::get_instance();
} 
```

结果输出是...

```
file exists
no class

Fatal error: Class 'CI_Controller' not found in C:\dev\www\my_site\system\core\CodeIgniter.php on line 244 
```

所以它正在寻找类，但没有加载它，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:16:37.063

像往常一样，问题在于困倦的开发人员！
我在配置中启用了完整登录，发现它引发了有关数据库类的错误；这是因为我在数据库配置文件中有错字。

改变了它，现在一切都很好。

# grails - 会话超时后的springSecurity提交表单

> ID：13179842
> 
> 赞同：1
> 
> 时间：2012-11-01T15:02:51.857
> 
> 标签：grails, spring-security

我对 Grails 应用程序中的 SpringSecurity 插件有一个小问题。

用户加载表单并让会话过期。提交表单后，用户被重定向到登录页面。成功登录后，用户被重定向回处理表单提交的控制器/操作，但该方法现在是 GET 而不是 POST。

是否可以在不允许通过 GET 方法访问控制器/操作的情况下修复此行为？

提前致谢

# javascript - KendoUI Grid 数据源到 json

> ID：13179844
> 
> 赞同：1
> 
> 时间：2012-11-01T15:03:09.177
> 
> 标签：javascript, json, asp.net-mvc-4, kendo-ui

我从 Grid 获取数据作为 json 对象时出错

```
$('#AttachmentsGrid').data('kendoGrid').dataSource.view().toJSON() 
```

> TypeError: $("#AttachmentsGrid").data("kendoGrid").dataSource.view().toJSON 不是函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:06:45.273

利用

```
JSON.stringify($('#AttachmentsGrid').data('kendoGrid').dataSource.view()) 
```

# php - Symfony 2.1 安全跨子域

> ID：13179849
> 
> 赞同：4
> 
> 时间：2012-11-01T15:03:13.263
> 
> 标签：php, symfony, symfony-2.1

在应用程序上运行 Symfony 2.1，我们有不同的代码沙箱。例如。

*   `aequasi.someurl.com`
*   `dev.someurl.com`
*   `hotcarl.someurl.com`

我似乎无法弄清楚为什么，但是当我登录时`aequasi`，我去`hotcarl`，我需要再次登录。当我这样做时，它会让我退出`aequasi`.

所有沙箱都使用相同的数据库进行身份验证

我有这个`config.yml`：

```
framework:
    session:
        cookie_domain: .someurl.com
        domain:        .someurl.com 
```

我也`php.ini`设置了使用相同的网址

此外，session_id 是相同的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:36:03.623

使用数据库或内存作为 Session 存储。这允许您在三个不同的 symfony 应用程序（每个应用程序都有自己的沙箱）之间共享会话数据。这将消除应用程序缓存之间的不一致并允许您使用 *.domain.com 类型的 cookie。

Symfony2 为替代会话存储提供了几个驱动程序。

[http://symfony.com/doc/current/components/http_foundation/session_configuration.html#custom-save-handlers](http://symfony.com/doc/current/components/http_foundation/session_configuration.html#custom-save-handlers)

# c++ - 如何在 2 个不同的共享库中调用具有相同符号的函数？

> ID：13179853
> 
> 赞同：4
> 
> 时间：2012-11-01T15:03:31.103
> 
> 标签：c++, shared-libraries, qnx

我有几个用 C++ 编写的同一个库的版本。我需要并排比较它们。这些库使用相同的命名空间、函数名并采用相同的参数。

当我同时链接两个或多个库时，是否有任何方法可以控制我使用哪个版本的库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T15:29:01.683

您不能链接具有相同符号的两个库并访问两者。但是，您可以构建自己的瘦包装库来消除两个版本库的歧义：

*   定义一个抽象类`Wrapper`，使用抽象虚函数来练习目标库的功能
*   在一个调用的类中定义一个实现，`Wrapper`该类`WrapperImpl`从虚拟方法调用目标库
*   定义一个独立的方法`Wrapper *MakeImpl`返回`new WrapperImpl()`
*   `WrapperImpl`多次编译成静态库，每次都链接不同版本的目标库。**关键：**传递`-DWrapperImpl=WrapperImplV1 -DMakeImpl=MakeImplV1`给编译器，使用`V1`, `V2`, `V3`, 等等，用于不同的版本。您应该最终得到多个库。
*   将您的主测试仪与这些多个库链接

此时，您的主测试人员可以访问通过预处理器重命名创建的独立函数`MakeImplV1`、`MakeImplV2`等。使用这些函数通过目标库的不同版本获取该调用的实例。`MakeImplV3``MakeImpl``Wrapper`

# ios - 如何为 UILabel 字体更改设置动画？

> ID：13179856
> 
> 赞同：1
> 
> 时间：2012-11-01T15:03:40.060
> 
> 标签：ios, animation, label

我正在创建一个字体大小为 0 的标签，我想放大它，同时让它消失。一件重要的事情是我想调整标签大小和位置到中心和视图（它可以是 iphone 或 ipad）。在我的代码中，我必须从大字体开始，以获得其他建议？

我的代码：

```
UILabel* swipeLabel = [[UILabel alloc] initWithFrame:self.view.frame];
[swipeLabel setText:NSLocalizedString(@"Swipe to change", @"Swipe label text")];
[swipeLabel setTextColor:[UIColor whiteColor]];
[swipeLabel setTextAlignment:UITextAlignmentCenter];
[swipeLabel setFont:[UIFont systemFontOfSize:2]];
[swipeLabel setAdjustsFontSizeToFitWidth:YES];
[swipeLabel setBackgroundColor:[UIColor clearColor]];
[swipeLabel setNumberOfLines:1];

[self.view addSubview:swipeLabel];

[UIView animateWithDuration:1.5 delay:0 options:UIViewAnimationOptionAllowAnimatedContent animations:^{
     CGFloat scaleFactor = 10.0f;
     swipeLabel.transform = CGAffineTransformMakeScale(scaleFactor, scaleFactor);
    [swipeLabel setAlpha:0];
 } completion:^(BOOL finished) {

 }]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:57:23.110

```
[UIView beginAnimations:nil context:nil];
label.transform = CGAffineTransformMakeScale(0.5,0.5);
[UIView commitAnimations]; 
```

这将使字体 %50 的大小更小。

# javascript - jQuery幻灯片在元素上具有不同的动画

> ID：13179858
> 
> 赞同：2
> 
> 时间：2012-11-01T15:03:46.120
> 
> 标签：javascript, jquery, css, jquery-animate, slideshow

我想构建一个 jQuery 幻灯片，其中每个“幻灯片”中的 HTML 元素的动画效果不同。

这意味着向左滑出的 3 个 div 交错排列，因此 2 个会有延迟，被下一个“幻灯片”以相同方式但从右侧进入的等效 div 替换。

还有 2 个 div 需要淡出以被下一个将淡入的“​​幻灯片”中的内容替换。

这是我必须从头开始写的东西吗？或者是否有一些插件可以定制来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:15:14.423

在您对您的要求过于具体之前，请查看易于使用的插件提供哪些过渡和效果。然后根据您选择的库可以实现的目标来设置您的要求。

我强烈推荐 Nivo Slider [http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)看看你能不能用他们提供的东西达到令人满意的结果。

我对[http://jquery.malsup.com/cycle/也有很好的经验](http://jquery.malsup.com/cycle/)

两者都易于实现并提供各种过渡和效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:06:33.873

'80 个很棒的 jQuery 滑块插件' [http://www.tripwiremagazine.com/2012/10/jquery-slider.html](http://www.tripwiremagazine.com/2012/10/jquery-slider.html)

# c# - 迭代集合时出现实体框架异常

> ID：13179860
> 
> 赞同：0
> 
> 时间：2012-11-01T15:03:54.450
> 
> 标签：c#, asp.net-mvc, entity-framework

我已经构建了一个简单的文件管理器，它从两个表中提取数据，文件夹和文件。当您上传文件时，它会被写入服务器上的磁盘。当我需要删除一个文件夹及其所有子文件夹、子文件夹文件和父文件夹文件时，我选择该文件夹，然后单击删除，这将执行下面的控制器操作。

**更新** 如果我更改对 .ToList() 的任何后续调用，它会起作用。

```
 [HttpPost]
    public JsonResult DeleteFolder(int folderID)
    {
        var repo = new FileManagerRepository();

        var folder     = repo.GetFolder(folderID);
        var subfolders = repo.GetSubFolders(folderID).ToList();
        var files      = repo.GetFiles(folderID).ToList();

        // delete sub-folders
        if (subfolders.Count() != 0)
        {
            foreach (var subfolder in subfolders)
            {
                // delete sub-folder files
                var subfiles = repo.GetFiles(subfolder.folder_id).ToList();
                if (subfiles.Count() != 0)
                {
                    foreach (var file in subfiles)
                    {
                        repo.DeleteFile(file.file_id);
                        System.IO.File.Delete(Server.MapPath("/content/upload/" + file.file_name));
                    }
                }
                repo.DeleteFolder(subfolder.folder_id);
            }
        }
        // delete files
        if (files.Count() != 0)
        {
            foreach (var file in files)
            {
                repo.DeleteFile(file.file_id);
                System.IO.File.Delete(Server.MapPath("/content/upload" + file.file_name));
            }
        }
        // delete the folder            
        if (folder != null)
        {
            repo.DeleteFolder(folder.folder_id);                
        }
        repo.Save();
        return new JsonResult();
    } 
```

现在这里是 FileManagerRepository

```
 public class FileManagerRepository
{
    private readonly iau_idahoEntities db = new iau_idahoEntities();

    public IQueryable<folders> GetParentFolders()
    {
        return db.folders.Where(f => f.parant_folder_id == 0);
    }

    public IQueryable<folders> GetSubFolders()
    {
        return db.folders.Where(f => f.parant_folder_id != 0);
    }
    public IQueryable<folders> GetSubFolders(int folder_id)
    {
        return db.folders.Where(f => f.parant_folder_id != 0 && f.parant_folder_id == folder_id);
    } 

    public IQueryable<Files> GetFiles(int id)
    {
        return db.Files.Where(f => f.folder_id == id);
    }

    public Files GetFile(int id)
    {
        return db.Files.SingleOrDefault(f => f.file_id == id);
    }

    public void UpdateDownloadCount(int id)
    {
        var file = GetFile(id);
        file.downloaded += 1;         
    }
    public void AddFolder(int parentFolderID, string folderName)
    {
        var folder = new folders { create_date = DateTime.Now, parant_folder_id = parentFolderID, folder_name = folderName };
        db.folders.AddObject(folder);
    }

    public void DeleteFolder(int folder_id)
    {
        var folder = db.folders.SingleOrDefault(f => f.folder_id == folder_id);
        db.folders.DeleteObject(folder);
    }
    public void Save()
    {
        db.SaveChanges();
    }

    public void AddFile(int folder_id,string filename, string description)
    {
        var file = new Files { 
            folder_id = folder_id, 
            file_name = filename, 
            file_extension = filename.Substring(filename.Length - 3, 3), 
            description = description,
            downloaded = 0, 
            physical_name = filename.Substring(0, filename.Length - 4), 
            upload_date = DateTime.Now 
        };
        db.Files.AddObject(file);            
    }

    internal void DeleteFile(int fileID)
    {
        var fileToDelete = db.Files.SingleOrDefault(file => file.file_id == fileID);
        db.Files.DeleteObject(fileToDelete);
    }

    internal folders GetFolder(int folderID)
    {
        return db.folders.SingleOrDefault(folder => folder.folder_id == folderID);
    }
} 
```

问题是我不断收到以下 EF 异常： **已经有一个打开的 DataReader 与此命令关联，必须先关闭**

我尝试将 MultipleActiveResultSets = true, 添加到 web.config 中的连接字符串，但仍然出现异常。我知道为什么会抛出这个异常，但我不知道如何做我需要做的事情并防止它抛出异常。

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:07:20.230

`var subfolders = repo.GetSubFolders(folderID);`将行更改为`var subfolders = repo.GetSubFolders(folderID).ToList();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:17:08.457

如果我将对存储库的所有后续调用更改为 ToList()，那么所有工作都应该如此。

```
 var folder     = repo.GetFolder(folderID);
    var subfolders = repo.GetSubFolders(folderID).ToList();
    var files      = repo.GetFiles(folderID).ToList();

    // delete sub-folders
    if (subfolders.Count() != 0)
    {
        foreach (var subfolder in subfolders)
        {
            // delete sub-folder files
            var subfiles = repo.GetFiles(subfolder.folder_id).ToList(); 
```

# hash - 如何从 bash 或 python 对主机名进行颜色编码？

> ID：13179861
> 
> 赞同：1
> 
> 时间：2012-11-01T15:03:55.013
> 
> 标签：hash, text-coloring

我正在寻找一个简单的解决方案，它可以为每个主机名提供一个 RGB 颜色。

我打算用它来设置 iTerm2 中的选项卡颜色，这样我就可以根据它的颜色选择轻松找到正确的主机。

现在，我不能使用所有的 3 字节，因为在某些情况下差异可能太微妙了，而且我需要禁止太暗太亮的颜色。

基于此，我只能假设我可以安全地为每种颜色使用 5 位，这会给我提供 2^15 = 128 种颜色可供选择。我可以处理将数字转换为 R、G、B 值的公式；）

所以我需要的是一段简单的代码，它会给我一个字符串（主机名）的 15 位散列。

如果这在 bash 中可行，那将是完美的，但我也接受 Python 变体。 

该解决方案必须在 Debian、RedHat 和 OS X 上运行，而无需安装额外的实用程序或库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:38:15.463

```
#!/bin/bash
MD5="md5sum"
if [[ $OS == 'darwin' ]]; then MD5="md5" ; fi
HASH=`hostname -s | ${MD5}`
echo -n -e     "\033]6;1;bg;red;brightness;$((0x${HASH:0:2}))\a\033]6;1;bg;green;brightness;$((0x${HASH:2:2}))\a\033]6;1;bg;blue;brightness;$((0x${HASH:4:2}))\a" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-14T10:08:22.540

`color`不带参数使用时自动支持随机颜色

将以下行添加到`~/.profile`or `~/.zshrc`：

```
PRELINE="\r\033[A"

function random {
    echo -e "\033]6;1;bg;red;brightness;$((1 + $RANDOM % 255))\a"$PRELINE
    echo -e "\033]6;1;bg;green;brightness;$((1 + $RANDOM % 255))\a"$PRELINE
    echo -e "\033]6;1;bg;blue;brightness;$((1 + $RANDOM % 255))\a"$PRELINE
}

function color {
    case $1 in
    green)
    echo -e "\033]6;1;bg;red;brightness;57\a"$PRELINE
    echo -e "\033]6;1;bg;green;brightness;197\a"$PRELINE
    echo -e "\033]6;1;bg;blue;brightness;77\a"$PRELINE
    ;;
    red)
    echo -e "\033]6;1;bg;red;brightness;270\a"$PRELINE
    echo -e "\033]6;1;bg;green;brightness;60\a"$PRELINE
    echo -e "\033]6;1;bg;blue;brightness;83\a"$PRELINE
    ;;
    orange)
    echo -e "\033]6;1;bg;red;brightness;227\a"$PRELINE
    echo -e "\033]6;1;bg;green;brightness;143\a"$PRELINE
    echo -e "\033]6;1;bg;blue;brightness;10\a"$PRELINE
    ;;
    *)
    random
    esac
}

#color    #uncomment to enable automatically set random color when tab created 
```

每次创建新的 iterm2 选项卡后，使用命令`color`自动为其赋予新的/随机颜色。

如果您希望在创建时自动设置 iterm2-tab 颜色，则 .just 添加`color`到`.zshrc`/的末尾`.profile`或就在`function color`

上`Host 1`。行`color`更改为`color red`; 上`host 2`。行`color`chang to `color blue`; 等如果更多主机，只需添加更多颜色设置，如示例中所示。

然后，每次打开相应的主机 ssh 终端，选项卡颜色都会根据需要更改。

# objective-c - NSMain Bundle 找不到视频文件

> ID：13179866
> 
> 赞同：0
> 
> 时间：2012-11-01T15:04:09.950
> 
> 标签：objective-c, xcode

我正在尝试在我的应用程序中播放视频，但我无法这样做，因为当我尝试使用 NSMainBundle 查找文件时，它一直返回 null，我不明白为什么。这是我的代码

```
NSString *filepath = [[NSBundle mainBundle] pathForResource:@"big-buck-bunny-clip" ofType:@"m4v"];

    NSLog(@"%@", filepath); 
```

我不明白的是它可以很好地找到声音文件，因为我在主包中有一个 mp3 声音文件，当我使用它来找到它时，它很好，但是对于视频它什么也没找到。我的包中有一个 mp4 和一个 m4v 视频文件，当我尝试查找其中任何一个时它返回 null。我尝试清除缓存，从模拟器中删除应用程序，再次运行它但同样的事情。它快把我逼疯了。

以前有人遇到过这个问题吗？我错过了什么？？我已经从

[http://mobile.tutsplus.com/tutorials/iphone/mediaplayer-framework_mpmovieplayercontroller_ios4/](http://mobile.tutsplus.com/tutorials/iphone/mediaplayer-framework_mpmovieplayercontroller_ios4/)

并准确地复制了代码，但仍然为空。

任何帮助将非常感激！！

编辑：

我快速创建了一个新项目并复制了视频，并且从那里打印得很好，那么为什么在这个应用程序中找不到任何视频？很诡异！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:33:48.510

Maybe it is because you have not added the video to your bundle, check your project's setting. That copy resource(I forget the accurate name).

# ruby-on-rails - 缺少内存会导致图像处理失败吗？

> ID：13179867
> 
> 赞同：0
> 
> 时间：2012-11-01T15:04:10.777
> 
> 标签：ruby-on-rails, imagemagick, carrierwave, rmagick

我有一个 512MB 的 Rackspace 盒子，我在上面运行 3 个使用 Ruby on Rails 编写的网站（每月访问 4500-5000 次）。

我正在使用 Carrierwave 和 RMagick 来调整我上传到网站的图像的大小，但这最近因一般错误而停止工作（图像无法处理）。

我不知道为什么这会突然失败，只能认为它是在我部署应用程序 #3 时开始的。RAM 的数量是否会导致图像处理失败？

谢谢

罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:32:12.577

罗宾 -

试试 Mini_magick 宝石。我听说在 rmagick 中调整图像大小可能需要 100MB，所以如果做很多缩略图之类的事情可能会导致内存问题，尤其是。在共享主机站点上。Mini_magick 可与 ImageMagick 和 GraphicsMagick 库一起使用，并使用 Mogrify 通过命令行运行，因此占用的内存更少。

但是，我不能使用 mini-magick，因为 Imagelists 似乎不受支持，而这正是我所需要的。

[https://github.com/minimagic/minimagick](https://github.com/minimagic/minimagick)

最诚挚的问候，马克

# android - 仅将拖放操作强制为水平

> ID：13179869
> 
> 赞同：2
> 
> 时间：2012-11-01T15:04:11.187
> 
> 标签：android, drag-and-drop

我想只用图像视图创建一个自定义双光标滑块，我发现了如何拖动光标（它是一个图像视图），但我想强制拖放只能在水平方向上，因为此时滑块的光标可以拖动到屏幕上的任何位置：D

有什么提示吗？

# jquery - JQuery Mobile 在不同内容的同一页面上滑动

> ID：13179872
> 
> 赞同：3
> 
> 时间：2012-11-01T15:04:18.847
> 
> 标签：jquery, jquery-mobile

是否可以在 JQuery Mobile 中使用相同页面和不同内容的滑动？我有一个详细信息列表，我可以在具有交易效果的列表之间进行滑动。我会避免使用不同的名称剪切和粘贴同一页面并在它们之间导航，如下所示：

```
<div data-role="page" id="page" class="custom-page">....</div>
<div data-role="page" id="page_next" class="custom-page">....</div>
<div data-role="page" id="page_previous" class="custom-page">....</div> 
```

是否可以使用 $.mobile.changePage 并使用不同的参数调用同一页面，例如列表的索引？有一些替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:25:46.770

我真的不明白重复的问题

```
 <div data-role="page" id="..."></div> 
```

元素，因为这就是 JQM 的工作方式，而页面 shell 本身并没有太多的“额外包袱”。

要回答您的问题：

是的，您可以`changePage`使用不同的参数多次调用同一页面。只要确保您设置`allowSamePageTransitions`为`true` 全局或`changePage`呼叫本身。JQM 将重新请求该页面并将其添加到 DOM，因此您最终会在其中两次获得相同的页面。

当然，您也可以“滑动”内容，但不能使用 JQM 开箱即用。看看[Github上的](https://github.com/jquery/jquery-mobile)[JQM 分页](http://filamentgroup.com/lab/jquery_mobile_pagination_plugin/)或内容加载是如何工作的。

但是，要做到这一点，您需要设置内容何时可用的例程（动态加载与加载时在页面上）它应该定位的位置（因为您要滑动它需要向左和向右您正在查看的内容）以及如何处理哈希和浏览器历史记录（如果您不在“contentSwipe”上更改它，您将无法返回浏览器）。

**底线：**
这是为了避免重复使用 JQM 页面外壳而大惊小怪，恕我直言，与仅使用三个页面和开箱即用的 JQM 相比，所有额外的努力都是不值得的。

不过，我希望这能让你开始朝任何方向发展。

# android - 如何对列表视图中的项目进行编号？

> ID：13179876
> 
> 赞同：3
> 
> 时间：2012-11-01T15:04:46.333
> 
> 标签：android, sqlite, listview, simplecursoradapter

我想知道如何为我的列表视图项目设置一个从 1 到 n 的数字。该列不包含在我的 sqllite 数据库中。

我想使用一个自定义的简单光标适配器，它有一个名为 labelNumber 的文本视图，并在第一次调用 newView 和 bindview 时将数字设置为 1，并在每次调用后递增值。

这是正确的方法还是有更好的方法。显然这是为了帮助列表视图的导航以了解您当前的位置？

**更新 - 代码正在工作检查下面的评论**

```
public class ProgressAdapter extends SimpleCursorAdapter {
private Context context;
private int layout;
private ViewHolder viewHolder;
    // create an integer to use as a number holder
private int n;

static class ViewHolder {
    public TextView number;
    public TextView setsText;
    public TextView repsText;
    public TextView weightText;
    public TextView completeText;
    public ImageView mgImage;
}

public ProgressAdapter(Activity context, int layout, Cursor c,
        String[] from, int[] to) {
    super(context, layout, c, from, to);
    this.context = context;
    this.layout = layout;

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    Cursor c = getCursor();
    viewHolder = new ViewHolder();
    final LayoutInflater inflater = LayoutInflater.from(context);
    View v = inflater.inflate(layout, parent, false);
    // get the number using the cursor position
            // add 1 to the int to start at 1 instead of 0
    n = c.getPosition()+ 1;
            String lineNumber = Integer.toString(n);

    int setsColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_SETS);
    String sets = c.getString(setsColumn);

    int repsColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_REPS);
    String reps = c.getString(repsColumn);

    int weightColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_WEIGHT);
    String weight = c.getString(weightColumn);

    viewHolder.number = (TextView) v.findViewById(R.id.labelNumber);
    viewHolder.setsText = (TextView) v.findViewById(R.id.labelSets);
    viewHolder.repsText = (TextView) v.findViewById(R.id.labelReps);
    viewHolder.weightText = (TextView) v.findViewById(R.id.labelWeight);

    if ( viewHolder.setsText != null && viewHolder.repsText != null
            && viewHolder.weightText != null
            ) {
        viewHolder.number.setText(lineNumber);
        viewHolder.setsText.setText(sets);
        viewHolder.repsText.setText(reps);
        viewHolder.weightText.setText(weight);

    }
    return v;
}

@Override
public void bindView(View v, Context context, Cursor c) {
    viewHolder = new ViewHolder();
            // use cursor to get the integer and add 1 to position
    c = getCursor();
    n = c.getPosition()+ 1;
            String lineNumber = Integer.toString(n);
    int setsColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_SETS);
    String sets = c.getString(setsColumn);

    int repsColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_REPS);
    String reps = c.getString(repsColumn);

    int weightColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_WEIGHT);
    String weight = c.getString(weightColumn);

    // set the fields for the view
    viewHolder.number = (TextView) v.findViewById(R.id.labelNumber);
    viewHolder.setsText = (TextView) v.findViewById(R.id.labelSets);
    viewHolder.repsText = (TextView) v.findViewById(R.id.labelReps);
    viewHolder.weightText = (TextView) v.findViewById(R.id.labelWeight);

    if (viewHolder.setsText != null && viewHolder.repsText != null
            && viewHolder.weightText != null
            ) {
        viewHolder.number.setText(lineNumber);
        viewHolder.setsText.setText(sets);
        viewHolder.repsText.setText(reps);
        viewHolder.weightText.setText(weight);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:17:17.347

```
public class ProgressAdapter extends SimpleCursorAdapter {
private Context context;
private int layout;
private ViewHolder viewHolder;
// create an integer to use as a number holder
private int n;

static class ViewHolder {
public TextView number;
public TextView setsText;
public TextView repsText;
public TextView weightText;
public TextView completeText;
public ImageView mgImage;
}

public ProgressAdapter(Activity context, int layout, Cursor c,
    String[] from, int[] to) {
super(context, layout, c, from, to);
this.context = context;
this.layout = layout;

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
Cursor c = getCursor();
viewHolder = new ViewHolder();
final LayoutInflater inflater = LayoutInflater.from(context);
View v = inflater.inflate(layout, parent, false);
// get the number using the cursor position
n = c.getPosition();
        // add 1 to the int to start at 1 instead of 0
n = n+1;
int setsColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_SETS);
String sets = c.getString(setsColumn);

int repsColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_REPS);
String reps = c.getString(repsColumn);

int weightColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_WEIGHT);
String weight = c.getString(weightColumn);

viewHolder.number = (TextView) v.findViewById(R.id.labelNumber);
viewHolder.setsText = (TextView) v.findViewById(R.id.labelSets);
viewHolder.repsText = (TextView) v.findViewById(R.id.labelReps);
viewHolder.weightText = (TextView) v.findViewById(R.id.labelWeight);

if ( viewHolder.setsText != null && viewHolder.repsText != null
        && viewHolder.weightText != null
        ) {
    viewHolder.number.setText(n+"");
    viewHolder.setsText.setText(sets);
    viewHolder.repsText.setText(reps);
    viewHolder.weightText.setText(weight);

}
return v;
}

@Override
public void bindView(View v, Context context, Cursor c) {
viewHolder = new ViewHolder();
        // use cursor to get the integer
c = getCursor();
n = c.getPosition();
        // add one to the value to start at 1 instead of 0
n = n+1;
int setsColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_SETS);
String sets = c.getString(setsColumn);

int repsColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_REPS);
String reps = c.getString(repsColumn);

int weightColumn = c.getColumnIndex(ExerciseDbAdapter.KEY_WEIGHT);
String weight = c.getString(weightColumn);

// set the fields for the view
viewHolder.number = (TextView) v.findViewById(R.id.labelNumber);
viewHolder.setsText = (TextView) v.findViewById(R.id.labelSets);
viewHolder.repsText = (TextView) v.findViewById(R.id.labelReps);
viewHolder.weightText = (TextView) v.findViewById(R.id.labelWeight);

if (viewHolder.setsText != null && viewHolder.repsText != null
        && viewHolder.weightText != null
        ) {
    viewHolder.number.setText(n+"");
    viewHolder.setsText.setText(sets);
    viewHolder.repsText.setText(reps);
    viewHolder.weightText.setText(weight);
}

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:30:41.437

尝试覆盖 getview..,。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater=(LayoutInflater)appContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView=inflater.inflate(layout, null, true);

    EditText txt=(EditText)convertView.findViewById(R.id.labelNumber);

    txt.settext(position + 1);   //position starts from 0 thats why add 1

    return convertView;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T16:01:16.047

```
public class myAdapter extends SimpleCursorAdapter {

//    globle variable

public myAdapter() {
    //constructor
}

@Override
public int getCount() {
    return 0;
}

@Override
public Object getItem(int arg0) {
    return null;
}
@Override
public long getItemId(int arg0) {
    return 0;
}

    @Override
public View getView(int position, View convertView, ViewGroup parent) {
LayoutInflater inflater=(LayoutInflater)appContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
convertView=inflater.inflate(layout, null, true);

EditText txt=(EditText)convertView.findViewById(R.id.labelNumber);

txt.settext(position + 1);   //position starts from 0 thats why add 1

return convertView;
}

} 
```

这是完全简单的光标适配器..,。

# database - 从 Visual Basic 2012 中的数据库开始

> ID：13179879
> 
> 赞同：0
> 
> 时间：2012-11-01T15:04:54.150
> 
> 标签：database, visual-studio, sqlite

我的故事是：我刚开始使用 Visual Basic，并使用简单的脚本语言，如 AS2-3 AutoIt，甚至使用 VB 和 C# 中的一些简单程序，但我不知道使用数据库，所以我来问几个问题来启动我的编码引擎.

1.  我是否需要安装任何程序或下载任何文件才能开始使用数据库？（研究 SQLite 但仍然不知道如何使其工作）

2.  对于在我的独立 Windows 应用程序中保存和恢复磁盘上的变量，您有什么建议？（即使 .txt 文件也适用于我的 ATM）

3.  是否有任何简单的教程可以解释独立程序中数据库的使用？

# java - Java 序列化——处理瞬态对象时的异常

> ID：13179885
> 
> 赞同：1
> 
> 时间：2012-11-01T15:05:09.277
> 
> 标签：java, serialization

## 更新

感谢大家的大力帮助，在这里我必须添加一个关于异常的可能原因：

如果您在域类中添加`readObject()`和`writeObject()`（如下面的类大学），并且您必须`ObjectOutputStream.writeObject()`在 main() 方法中调用方法，那么请确保：

---不要将`ObjectOutputStream.close()`方法放在域类中。它将导致异常，因为由于该对象已关闭，因此对该对象进行操作是非法的（程序如何读取文件或在文件已关闭后关闭文件？）。

我知道这是一个小问题，但调试起来非常微妙，因为异常不会说明任何事情。因此，这是记录在案的一点点。

* * *

我尝试实现一个简单的片段来破坏瞬态对象的序列化，即序列化瞬态对象的原始字段，然后通过 ObjectInputStream 反序列化这些原始字段，最后用它们组成一个新对象。场景是这样的：

```
public class College implements Serializable{
    private static final long serialVersionUID = 1L;

    private String name;
    private transient City city; //transient
    private String zipCode;

    // constructors & getter/setters

private void writeObject(ObjectOutputStream os){
    try {
        os.defaultWriteObject();
        os.writeInt(city.getCode());
        os.writeInt(city.getPopulation());
        os.writeObject(city.getName());
        os.flush();
        os.close(); // update: not good practice, may throw exception.
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

private void readObject(ObjectInputStream os){
    try {
        os.defaultReadObject();
        int code = os.readInt();
        int population = os.readInt();
        String name = (String)os.readObject();
        City theCity = new City(code, name, population);
        System.out.println(theCity.toString());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
} 
```

这里是城市类

```
public class City {
    // the primitive & String fields
    private int code;
    private String name;
    private int population;

    // getter/setters

} 
```

这是编写和读取`college`对象的可爱代码（有点笨拙，抱歉）

```
public class GeneralTest {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    City city = new City(375, "New York", 380897);
    College college = new College("NYU", city, "10289");
    College readCollege = null;
    City readCity = null;

    System.out.println("Before serialization -- City: ["+city.toString()+"], College: ["+college.toString()+"]");

    try {
        FileOutputStream fs = new FileOutputStream("college.foo");
        ObjectOutputStream os = new ObjectOutputStream(fs);
        os.writeObject(college);
        os.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        FileInputStream fis = new FileInputStream("college.foo");
        ObjectInputStream ois = new ObjectInputStream(fis);
        readCollege = (College)ois.readObject();

        //get values to compose a city object
        int id = ois.readInt();
        int population = ois.readInt();
        String name = ois.readUTF();
        readCity = new City(id, name, population);

        ois.close();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    System.out.println("After serialization -- City: ["+readCity.toString()+"], College: ["+readCollege.toString()+"]");
}

} 
```

然后我得到了这个异常并且`readCollege`and`readCity`显然是空的:(

```
java.io.IOException: Write error
    at java.io.FileOutputStream.writeBytes(Native Method)
    at java.io.FileOutputStream.write(FileOutputStream.java:282)
    at java.io.ObjectOutputStream$BlockDataOutputStream.drain(ObjectOutputStream.java:1847)
    at java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(ObjectOutputStream.java:1756)
    at java.io.ObjectOutputStream.writeNonProxyDesc(ObjectOutputStream.java:1257)
    at java.io.ObjectOutputStream.writeClassDesc(ObjectOutputStream.java:1211)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1395)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeFatalException(ObjectOutputStream.java:1547)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:333)
    at serialized.GeneralTest.main(GeneralTest.java:27)
java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.readByte(ObjectInputStream.java:2721)
    at java.io.ObjectInputStream$BlockDataInputStream.readUTFChar(ObjectInputStream.java:3113)
    at java.io.ObjectInputStream$BlockDataInputStream.readUTFBody(ObjectInputStream.java:3010)
    at java.io.ObjectInputStream$BlockDataInputStream.readUTF(ObjectInputStream.java:2819)
    at java.io.ObjectInputStream.readUTF(ObjectInputStream.java:1050)
    at serialized.College.readObject(College.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1848)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at serialized.GeneralTest.main(GeneralTest.java:40)
java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2553)
    at java.io.ObjectInputStream.skipCustomData(ObjectInputStream.java:1899)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at serialized.GeneralTest.main(GeneralTest.java:40)
Exception in thread "main" java.lang.NullPointerException
    at serialized.GeneralTest.main(GeneralTest.java:52) 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:14:06.577

这是您输出的代码部分

```
 FileOutputStream fs = new FileOutputStream("college.foo");
    ObjectOutputStream os = new ObjectOutputStream(fs);
    os.writeObject(college);
    os.close(); 
```

您创建流，编写`college`对象，然后关闭它。

这是您正在阅读的部分：

```
 FileInputStream fis = new FileInputStream("college.foo");
    ObjectInputStream ois = new ObjectInputStream(fis);
    readCollege = (College)ois.readObject(); 
```

至此，您已经阅读了您所写的所有内容。你以前写过大学，现在你读了。

然后你去这样做：

```
 //get values to compose a city object
    int id = ois.readInt();
    int population = ois.readInt();
    String name = ois.readUTF();
    readCity = new City(id, name, population); 
```

你怎么能指望在这里读到任何东西？你只写了`college`。然后你读`college`回（进入`readCollege`参考。然后你试图再读两个整数和一个字符串？这些数据应该从哪里来？没有什么可读的了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:14:16.220

将您的 ois.readUTF() 替换为 ois.readObject() 并将其转换为字符串。

```
String name = (String) ois.readObject(); 
```

没有编译/尝试过...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:24:01.900

当您执行此行时：

```
readCollege = (College)ois.readObject(); 
```

之后的流中就没有任何东西了。

因此，您未来阅读同一流的尝试会在逻辑上抛出`java.io.EOFException`：（此外，请注意替换`readUTF()`by `readObject()`）

```
//get values to compose a city object
        int id = ois.readInt();   // there's nothing more !! throws exception!
        int zip = ois.readInt();
        String name = (String)ois.readObject(); 
```

实际上，您在写入流时没有添加自定义值。

因此，一个解决方案示例，添加专门用于添加所需元素的三行`City`：

```
try {
        FileOutputStream fs = new FileOutputStream("college.foo");
        ObjectOutputStream os = new ObjectOutputStream(fs);
        os.writeObject(college);
        os.writeInt(1); //adding the id !
        os.writeInt(75019); //adding the zip !
        os.writeObject("name"); //adding the name !
        os.close();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

当然，读取字段的顺序必须与写入期间的顺序**相同**。

**评论后更新：**

事实上，您已经通过您的方法读取了类`City`内的自定义值，因此这些行是无用的：`College``readObject()`

```
int id = ois.readInt();
int population = ois.readInt();
String name = (String)ois.readObject();   // remove them all 
```

为什么 ？？？因为正如我之前解释的那样，他们只是抛出了`java.io.EOFException`因为没有更多可阅读的内容。

这是一个有效的全局代码：

```
class College implements Serializable {
    private static final long serialVersionUID = 1L;

    private String name;
    private transient City city; //transient
    private String zipCode;

    College(String name, City city, String zipCode) {
        this.name = name;
        this.city = city;
        this.zipCode = zipCode;
    }

    private void readObject(ObjectInputStream os) {
        try {
            os.defaultReadObject();
            int code = os.readInt();
            int population = os.readInt();
            String name = (String) os.readObject();
            this.city = new City(code, name, population);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void writeObject(ObjectOutputStream os) {
        try {
            os.defaultWriteObject();
            os.writeInt(1);
            os.writeInt(200);
            os.writeObject("thename");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public City getCity() {
        return city;
    }

    public void setCity(City city) {
        this.city = city;
    }

    public String getZipCode() {
        return zipCode;
    }

    public void setZipCode(String zipCode) {
        this.zipCode = zipCode;
    }
}

class City {
    // the primitive & String fields
    private int code;
    private String name;
    private int population;

    City(int code, String name, int population) {
        this.code = code;
        this.name = name;
        this.population = population;
    }

    public int getCode() {
        return code;
    }

    public void setCode(int code) {
        this.code = code;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getPopulation() {
        return population;
    }

    public void setPopulation(int population) {
        this.population = population;
    }

    // getter/setters
}

public class Launcher {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        City city = new City(375, "New York", 380897);
        College college = new College("NYU", city, "10289");
        College readCollege = null;
        City readCity = null;

        System.out.println("Before serialization -- City: [" + city.toString() + "], College: [" + college.toString() + "]");

        try {
            FileOutputStream fs = new FileOutputStream("college.foo");
            ObjectOutputStream os = new ObjectOutputStream(fs);
            os.writeObject(college);
            os.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            FileInputStream fis = new FileInputStream("college.foo");
            ObjectInputStream ois = new ObjectInputStream(fis);
            readCollege = (College) ois.readObject();
            readCity = readCollege.getCity();

            ois.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("After serialization -- City: [" + readCity.toString() + "], College: [" + readCollege.toString() + "]");
    }

} 
```

# playframework-2.0 - 开发时securesocial假登录

> ID：13179886
> 
> 赞同：5
> 
> 时间：2012-11-01T15:05:14.147
> 
> 标签：playframework-2.0, securesocial

我正在使用securesocial它工作正常，但现在每次我更改一些scala代码时，我都必须再次登录。在开发模式下是否有可能在会话中伪造用户，所以我不必经常登录？

谢谢，

乔里斯·维伦斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-27T01:59:42.300

SecureSocial 默认使用默认 Play 缓存来存储身份验证器（将 cookie 与登录用户匹配）。默认播放缓存是 EHCache，它是使用您可以在 jar 中找到的 ehcache.xml 配置的。默认配置严格存储在内存中，这意味着当应用程序重新启动时，它会丢失所有值。幸运的是，覆盖 EHCache 配置以写入磁盘非常容易。

将 jar 中的 ehcache.xml 复制到您的配置目录。添加`<diskStore path="java.io.tmpdir"/>`并更改`diskPersistent`为`true`

所以我的看起来像这样：

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../config/ehcache.xsd" updateCheck="false">
<diskStore path="java.io.tmpdir"/>
<defaultCache
        maxElementsInMemory="10000"
        eternal="false"
        timeToIdleSeconds="120"
        timeToLiveSeconds="120"
        overflowToDisk="false"
        maxElementsOnDisk="10000000"
        diskPersistent="true"
        diskExpiryThreadIntervalSeconds="120"
        memoryStoreEvictionPolicy="LRU"
        />
</ehcache> 
```

如果您有兴趣了解如何配置其余部分，请参阅 ehcache-failsafe.xml 文件中的一些文档，该文件也在 Play jar 中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-04T03:10:16.240

发生这种情况是因为在 DEV 模式下，当您更改代码时，Play 会重新启动应用程序。因此，示例用户服务中的数据会丢失。

# c# - 使用 File.Copy 仅复制较新的文件？

> ID：13179887
> 
> 赞同：0
> 
> 时间：2012-11-01T15:05:18.577
> 
> 标签：c#, .net-4.0

我有点困惑`File.Copy`。最初，我删除了整个目录结构，然后从源路径复制到目标路径，但这需要一段时间。现在我正在做的只是在目标路径上创建目录结构，如果它不存在的话。如果存在，我只想复制较新的文件。删除删除后，复制速度非常快，但我不确定它是否真的在复制较新的文件。如果我这样做`File.Copy(source,target)`，这是否仅在文件不存在时复制文件？如果我这样做`File.Copy(source,target,true)`，这是否会复制文件，无论它是否更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:07:28.237

`File.Copy(source,target,true)`将覆盖文件 - 无论它是否更新。

`Copy`没有逻辑来确定文件的新颖性或正确的操作。

您需要自己实现此逻辑 - 如果您只想复制较新的文件，则需要比较两个文件的创建日期并仅复制较新的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:09:47.003

您应该使用[FileInfo 类](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)并比较逻辑中的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:10:06.240

> 如果我执行 File.Copy(source,target)，这是否仅在文件不存在时复制文件？

`IOException`如果目标文件已经存在（无论它是否较新）[，File.Copy(source, target)](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)将抛出一个。

如果您的代码使用它“运行得很快”，我假设您在某处“吞下异常”（即有`try`一个空`catch`块）。那是邪恶的，因为它让你的程序“看起来”就像它在正常工作时一样正常工作。不要那样做！它使调试成为一场噩梦。

> 如果我执行 File.Copy(source,target,true)，这是否会复制文件，无论它是否更新？

是的。

如果您希望基于某些属性复制文件，您可以使用[File](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)或[FileInfo 类](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx) [（*[有什么区别？](https://stackoverflow.com/q/1324788/87698)*）]来获取此信息。您可以在“创建时间”、“上次访问时间”和“上次写入时间”之间进行选择（取决于您如何定义“较新”）。

# php - 检查外部网站注册密钥

> ID：13179888
> 
> 赞同：0
> 
> 时间：2012-11-01T15:05:23.240
> 
> 标签：php, parsing

我想创建简单的序列号检查器，但需要在其他域上进行检查

在`www.my_site_1.com`

表格代码

```
<form action="install.php" method="post">
Serial : <input type="text" name="serial" id="serial">
<input type="submit" value="Install">
</form> 
```

我认为我需要使用解析来从`check.php`任何信息中获取结果如何做到这一点。~ 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:10:14.333

您应该能够在 action 属性中设置 POST/GET URL 并将序列号直接传递给 check.php。在您的情况下，您想发送一个我假设的 GET 变量。

install.php 看起来像：

```
<form action="http://my_site_2.com/check.php" method="GET">
Serial : <input type="text" name="serial" id="serial">
<input type="submit" value="Install">
</form> 
```

# c# - 在 WPF/C# 中为多个对象创建 Visual Studio 属性窗口

> ID：13179892
> 
> 赞同：0
> 
> 时间：2012-11-01T15:05:50.603
> 
> 标签：c#, wpf

我正在创建一个程序，用户正在创建一个操作列表。可能的操作都有多个需要指定的属性。我想在列表框中显示这些属性，类似于 Visual Studio 在设计模式下显示对象属性的方式。字符串获取文本框，布尔值获取复选框等。我已经弄清楚如何在列表中显示对象的成员，但我正在努力弄清楚如何为每个控件创建回调。基本结构如下：

```
 void createPropertyList(object move)
    {
        Type type = move.GetType();
        FieldInfo[] fields = type.GetFields();
        propertyListBox.Items.Clear();

        foreach (var field in fields)
        {
            string name = field.Name;
            object temp = field.GetValue(move);

            if (temp is double)
            {
                double value = (double)temp;
                Label l = new Label();
                l.Content = name;

                TextBox t = new TextBox();
                t.Text = value.ToString("0.0000");                    

                // put it in a grid, format it, blah blah blah    

                propertyListBox.Items.Add(grid);
            }

            // reflect on other types
        }
    } 
```

我假设将涉及一个 lambda，但我如何恢复 FieldInfo 数组以实际引用这些成员，以便我可以将用户的输入放回对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:21:34.837

抱歉，我应该查看 FieldInfo。GetValue 有一个对应的 SetValue。奇迹般有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:27:54.857

您需要为所有类型的控件创建状态更改事件处理程序。

例如文本框

```
...
TextBox t = new TextBox();
t.Tag=name;
t.KeyUp+=t_KeyUp; 
```

在哪里

```
private void t_KeyUp(object sender, KeyEventArgs e)
{
    TextBox source = (sender as TextBox);
    MessageBox.Show("Field "+source.Tag + " is changed. New value is "+source.Text);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:24:37.680

您可能会考虑使用 Binding 和 DependencyPropertys 来绑定各种控件。它是一种更 WPF 的方式来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:45:40.240

您已经可以控制：http: [//msdn.microsoft.com/en-us/library/aa302326.aspx](http://msdn.microsoft.com/en-us/library/aa302326.aspx)

# linux - ubuntu 11.04下的clang ++链接问题与libc ++

> ID：13179896
> 
> 赞同：1
> 
> 时间：2012-11-01T15:05:58.273
> 
> 标签：linux, clang, linker-errors, libc++, clang++

我在ubuntu 11.04下编译了libc++，做了软链接

```
#>ln -sf libc++.so libc++.so.1.0
#>ln -sf libc++.so.1 libc++.so.1.0 
```

在 /usr/lib 下，也是 stl 头文件的软链接

```
#> ln -sf /my_INSTALL_PATH/libcxx/include/* v1/ 
```

在 /usr/include/c++ 下

当我编译一个小的多线程 hello world 示例时，编译返回以下错误：

```
/usr/bin/ld: cannot find -lc++
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:15:26.320

实际上我在软链接中犯了错误，应该是：

ln -sf libc++.so.1.0 libc++.so ln -sf libc++.so.1.0 libc++.so.1

抱歉打扰

# android - Android：如何将数据读入主要活动

> ID：13179899
> 
> 赞同：1
> 
> 时间：2012-11-01T15:06:08.857
> 
> 标签：android, sqlite

我正在尝试开发一个在主要活动中显示用户课程列表的应用程序。这些数据存储在 SQLite 中。如果用户希望添加更多课程，他们可以通过按下按钮将他们带到新活动。我创建了一个数据库，但是我在读取数据方面遇到了困难。我查看了很多文档，但似乎有各种方法没有任何一致的实现。有没有人有什么建议？

我尝试使用 SimpleCursorAdapter 获取数据，将其放入 int 数组并在列表视图中显示信息。

日志猫

```
10-21 02:08:20.042: E/AndroidRuntime(7044): Uncaught handler: thread main exiting due to uncaught exception
10-21 02:08:20.062: E/AndroidRuntime(7044): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mycoursetimetable/com.example.mycoursetimetable.MyCourses}: java.lang.ClassCastException: android.widget.LinearLayout
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.os.Looper.loop(Looper.java:123)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.app.ActivityThread.main(ActivityThread.java:4363)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at java.lang.reflect.Method.invokeNative(Native Method)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at java.lang.reflect.Method.invoke(Method.java:521)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at dalvik.system.NativeStart.main(Native Method)
10-21 02:08:20.062: E/AndroidRuntime(7044): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.app.ListActivity.onContentChanged(ListActivity.java:234)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:201)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.app.Activity.setContentView(Activity.java:1622)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at com.example.mycoursetimetable.MyCourses.onCreate(MyCourses.java:39)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-21 02:08:20.062: E/AndroidRuntime(7044):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
10-21 02:08:20.062: E/AndroidRuntime(7044):     ... 11 more
10-21 02:08:20.082: I/dalvikvm(7044): threadid=7: reacting to signal 3
10-21 02:08:20.082: E/dalvikvm(7044): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
10-21 02:08:22.082: I/Process(7044): Sending signal. PID: 7044 SIG: 9 
```

activity_my_courses 布局

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    >

    <Button
        android:id="@+id/labelAddCourseButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:onClick="addCourseButton"
        android:padding="10dp"
        android:text="@string/CourseName" />

    <ListView 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/list"
         android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout> 
```

主要活动

```
public class MyCourses extends ListActivity {

    static final String TEST = "com.example.mycoursetimetable.TEST";
    String [] MODULE;
    private database MODULEDATABASE;  
    ListView listContent;

    Cursor cursor;

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_my_courses);

       listContent =(ListView)findViewById(R.id.contentlist);
       MODULEDATABASE = new database(this);

       cursor = MODULEDATABASE.getData();
       String [] from = new String[]{database.KEY_MODULECODE,database.KEY_MODULENAME}; 
```

int[] to = new int[] {R.id.labelModuleCode, R.id.labelEditModuleFull}; cursorAdapter CA = new cursorAdapter(this,R.layout.listcourses, cursor, from, to, 0);

```
 listContent.setAdapter(CA);

        }

        class cursorAdapter extends SimpleCursorAdapter {

        private Context context;
        private int layout;

        public cursorAdapter(Context context,int layout, Cursor cursor,String [] from, int[] to, int flag)
        {
            super(context,layout, cursor, from, to, flag);
            this.context = context;
            this.layout = layout;
        } 
```

}

数据库类

公共类数据库{

```
public static final String KEY_ROWID = "_id";
public static final String KEY_MODULECODE = "module_code";
public static final String KEY_MODULENAME = "module_name";
public static final String KEY_MODULETYPE = "module_type";
public static final String KEY_MODULEDAY = "module_day";
public static final String KEY_MODULESTART = "module_start";
public static final String KEY_MODULEEND = "module_end";
public static final String KEY_MODULELOCATION = "module_location";
public static final String KEY_MODULECOMMENTS = "module_comments";

private static final String DATABASE_NAME = "module_database";
private static final String DATABASE_TABLE = "my_modules";
private static final int DATABASE_VERSION = 1;

private DbHelper myHelper;
private final Context myContext;
private SQLiteDatabase moduleDatabase;

private static class DbHelper extends SQLiteOpenHelper {

    public DbHelper(Context context){
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + DATABASE_TABLE +  " (" +
                    KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    KEY_MODULECODE + " TEXT NOT NULL, " +
                    KEY_MODULENAME + " TEXT NOT NULL, " +
                    KEY_MODULELOCATION + " TEXT NOT NULL, " +
                    KEY_MODULECOMMENTS + " TEXT NOT NULL); "
                );

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABEL IF EXISTS " + DATABASE_TABLE);
        onCreate(db);

    }

}

public database(Context c){
    myContext = c;
}

public  database openToWrite()throws SQLException{
    myHelper = new DbHelper(myContext);
    moduleDatabase = myHelper.getWritableDatabase();
    return this;
}

public  database openToRead()throws SQLException{
    myHelper = new DbHelper(myContext);
    moduleDatabase = myHelper.getReadableDatabase();
    return this;
}
public void close(){
myHelper.close();
}

public long createEntry(String moduleCode, String moduleName,  String moduleLocation, String moduleComments) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_MODULECODE,moduleCode);
    cv.put(KEY_MODULENAME,moduleName);
    cv.put(KEY_MODULELOCATION,moduleLocation);
    cv.put(KEY_MODULECOMMENTS,moduleComments);
    return moduleDatabase.insert(DATABASE_TABLE,null,cv);
    // TODO Auto-generated method stub

}

public Cursor getData() {

    String[] columns = new String [] {KEY_ROWID,KEY_MODULECODE, KEY_MODULENAME};
    Cursor c = moduleDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

    return c;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:23:17.550

我怀疑问题只是您在运行游标之前忘记打开数据库。但我不确定这是*唯一*的问题，因为你没有把你收到的错误（请下次做），所以我用完整的扩展`cursoradapter`而不是简单的扩展进行了重写，在希望以后能更直接、更灵活。这只是我的偏好，但我不明白为什么`SimpleCursorAdapter`如果要扩展它，为什么会使用更强大的。在您的 listactivity 课程中：

```
 MODULEDATABASE = new database(this);
    MODULEDATABASE.openToRead(); // don't forget this part!
    cursor = MODULEDATABASE.getData();

    listContent = (ListView)findViewById(R.id.contentlist);
    TestCursorAdapter ca = new TestCursorAdapter(this, cursor, 0);
    listContent.setAdapter(ca); 
```

这是适配器：

```
public class TestCursorAdapter extends CursorAdapter {

    private LayoutInflater viewInflater;

    public TestCursorAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        // TODO Auto-generated constructor stub
        viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public void bindView(View v, Context context, Cursor c) {
        TextView text_modulecode = (TextView)v.findViewById(R.id.labelModuleCode);
        TextView text_modulename = (TextView)v.findViewById(R.id.labelEditModuleFull);

        text_modulecode.setText(c.getColumnIndex("module_code"));
        text_modulename.setText(c.getColumnIndex("module_name"));
//      ^ set above to your real column locations, if incorrect 
    }

    @Override
    public View newView(Context context, Cursor c, ViewGroup parent) {
        View v = viewInflater.inflate(R.layout.listcourses, parent, false);
        return v;
    }

} 
```

此外，我希望您不要忘记“TABLE” `db.execSQL("DROP TABEL IF EXISTS " + DATABASE_TABLE);`在您的数据库类中拼写错误：

# html - 使用 xsl:element 标签进行 html 转换

> ID：13179902
> 
> 赞同：5
> 
> 时间：2012-11-01T15:06:11.553
> 
> 标签：html, xslt, tags

我正在将 xsl 文档转换为 html，如下所示：

```
 <xsl:template match="/">
    <html>
      <head>
        <title>Title</title>
      </head>
      <body>
        Blah-blah
      </body>
    </html>
  </xsl:template> 
```

这是正确的方式吗？或者，也许，使用 of`xsl:element`更好？我没有看到这种变体的例子：

```
 <xsl:template match="/">
    <xsl:element name="html">
      <xsl:element name="head">
        <xsl:element name="title">
          Title
        </xsl:element>
      </xsl:element>
      <xsl:element name="body">
        Blah-blah
      </xsl:element>
    </xsl:element>
  </xsl:template> 
```

哪个变体是正确的？
最好的祝福。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:23:45.280

文字结果元素（即您的第一种方法）更短，更易于键入且更易于阅读。我建议`xsl:element`仅在您想根据输入数据动态计算元素名称和/或命名空间的情况下使用，例如

```
<xsl:template match="*">
  <xsl:element name="{translate(local-name(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')}">
     <xsl:apply-templates/>
  </xsl:element>
</xsl:template> 
```

在其他情况下，我会像您的第一个示例一样使用文字结果元素。但就结果而言，没有对错之分，两种变体都给出了相同的结果树。

# ant - 如何在 ant 中检查 Websphere MQ 版本？

> ID：13179908
> 
> 赞同：2
> 
> 时间：2012-11-01T15:06:24.387
> 
> 标签：ant, ibm-mq, websphere-mq-fte

我正在运行一个脚本，我想在其中检测 WebSphere MQ 版本，如果这个版本是 7.1，那么我想运行一个`runmqsc`来设置通道身份验证。我这样做：

```
 <if>
        <or>
            <os name ="AIX">
            <os name ="Linux">
        </or>
    <then>
        <loginfo>Checking the installed MQ version.</loginfo>
             <osexec commandbase="su" dir="/bin" mode="osexec">

            <args>
                  <arg value="-"/>
                          <arg value="- ${mq_admin_name}"/>
                          <arg value="-c"/>
                          <arg line="dspmqver | grep Version"/>

            </args>
             </osexec>

        <if>
             <not>
              <not>
               <contains casesensitive="yes" substring="7.1.0.0" string="${result.output}"/>
              </not>
             </not>
        <then>
           ...........
           .......... 
```

在此之后，我使用`runmqsc`. 但问题是字符串`{result.output}`为空。该`dspmqver`命令未正确执行..有人可以建议为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:47:01.903

`dspmqver`这篇文章的标题“如何在 ant 中检查 Websphere MQ 版本？”、未正确执行的结论以及缺少诊断信息之间存在一些不匹配。

*   问题不在于如何在 Ant 中检查 WebSphere MQ 版本，而是如何在 Ant 中执行异常处理和诊断。
*   `dspmqver`不支持未正确执行的结论。显示的代码没有任何迹象表明它甚至可以执行`dspmqver`。
*   没有显示执行实际执行和设置`result`属性的代码部分。

我的建议如下：

1.  验证`osexec`填充`result.error`. 我只是猜测如果存在`result.output`. 如果`osexec`不填充它，请使用它填充的内容`STDERR`或修改它以执行某些操作（`STDERR`如果尚未填充）。
2.  右下角`</osexec>`，添加`<loginfo>Call to dspmqver returned: STDOUT='${result.output}', STDERR='${result.error}'</loginfo>`
3.  如果没有返回任何内容，请删除`grep`. 如果它与搜索字符串不完全匹配，该`dspmqver`命令应该返回*一些东西*到`STDERR`or`STDOUT`并且将其过滤掉。`grep`
4.  `dspmqver`如果仍然没有返回任何内容，请挑战甚至正在执行的假设。如果是，它要么返回*一些东西*，要么剪切一个 FDC 文件。任何其他行为都将是一个错误，`dspmqver`并且无法通过 Ant 或响应这篇文章来解决。

基本上，分而治之。继续删除东西，直到你得到输出。这将隔离问题。打印有用的诊断信息，这样一旦你隔离了问题，你就会知道它是什么。

# python - Python：TixBalloon，使用 StringVar() 作为消息

> ID：13179909
> 
> 赞同：0
> 
> 时间：2012-11-01T15:06:26.210
> 
> 标签：python, tkinter, tooltip, tix

我正在使用 TixBalloon 在 GUI 中生成工具提示，一些 Entry 小部件我希望工具提示或状态消息成为 StringVar() 变量的文本。所以代码看起来像：

```
from Tkinter import *
from Tix import *
root = Tk()
status = Label(root, height = 3, width=30, bd=1,bg='yellow',wraplength = 210)
status.grid(row = 0,column = 0,pady = 10)
bal = Balloon(root,statusbar = status)
frame_1 = Frame(root,relief=RIDGE,bd = 2)
frame_1.grid(row=1,column = 0)
Angles = [StringVar(),StringVar()]
Angles[0].set('0')
Angles[1].set('1')

#Incomming
label_in = Label(frame_1,text = "TH_in")
label_in.grid(row = 0,column = 0)

entry_in = Entry(frame_1, width = 20, textvariable = Angles[0])
entry_in.grid(row = 0,column = 1)

#Outgoing
label_out = Label(frame_1,text = "TH_out")
label_out.grid(row = 1,column = 0)

entry_out = Entry(frame_1, width = 20, textvariable = Angles[1])
entry_out.grid(row=1,column=1)

#tool tip / status bar
bal.bind_widget(label_in,balloonmsg='Incidence Angle',statusmsg = Angles[0].get())
bal.bind_widget(label_out,balloonmsg='Detector Angle',statusmsg = Angles[1].get())
root.mainloop() 
```

但是，这只会在状态框中显示“Angles[0]”和“Angles[1]”的原始值，而不会在输入框中的文本更改时更新它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:09:58.453

您可以使用[`StringVar.trace`](http://effbot.org/tkinterbook/variable.htm)绑定一个回调，该回调将在 StringVar 更改时调用。据推测，您可以使用该回调来更改`statusmsg`in （尽管我对and`bal`一无所知，所以我可能是错的）。`Tix``Balloon`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:24:32.323

气球 Tix 小部件是由实际的 Tkinter/Tix 小*部件组成的大型小部件。*

您可以通过检索`Label`消息`bal.subwidget('message')`，从而可以在 the`Entry`和 the之间共享变量`Balloon`。`Label`

```
bal.subwidget('message')["textvariable"] = Angles[0] 
```

`Balloon`但是，每个条目/工具提示对都需要一个实例，因为`message`标签在气球实例的所有工具提示之间共享。

# php - 用拉丁对应物替换外来字符，用连字符替换空格 (PHP)

> ID：13179910
> 
> 赞同：0
> 
> 时间：2012-11-01T15:06:26.243
> 
> 标签：php, regex, preg-replace, str-replace

我有这个代码：

```
$header = 'weird character->>>ÅÅÖÄ';
$header = strtolower(str_replace(array('  ', ' '), '-', preg_replace('/[^a-zA-Z0-9 s]/', '', trim($header)))); 
```

它应该输出`weird-characteraaoa`，但它没有。它只是删除了 ÅÅÖÄ 字母。知道为什么这不起作用吗？如果这与它有关，我正在使用 UTF-8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:28:43.803

我想你可能想创建一个如下的自定义函数并使用它：

```
function normalize ($string) {
   $table = array('Å'=>'A', 'Ä'=>'A','Ö'=>'O');
   return strtr($string, $table);
} 
```

请添加您要使用的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:08:28.947

这是一个难题，因为并非所有语言都能与 ASCII 字符很好地匹配。

[但是，@AlixAxel 拥有我在他的phunction framework](https://github.com/alixaxel/phunction/blob/master/phunction/Text.php#L249)中见过的当前最好的实现。

```
 public static function Slug($string, $slug = '-', $extra = null)
    {
        return strtolower(trim(preg_replace('~[^0-9a-z' . preg_quote($extra, '~') . ']+~i', $slug, self::Unaccent($string)), $slug));
    }

    public static function Unaccent($string)
    {
        if (extension_loaded('intl') === true)
        {
            $string = Normalizer::normalize($string, Normalizer::FORM_KD);
        }

        if (strpos($string = htmlentities($string, ENT_QUOTES, 'UTF-8'), '&') !== false)
        {
            $string = html_entity_decode(preg_replace('~&([a-z]{1,2})(?:acute|caron|cedil|circ|grave|lig|orn|ring|slash|tilde|uml);~i', '$1', $string), ENT_QUOTES, 'UTF-8');
        }

        return $string;
    } 
```

# c# - IE8 中的对象预期 JScript 错误

> ID：13179914
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:06:36.770
> 
> 标签：c#, javascript, jquery, asp.net

大多数情况下 dis 可能是重复的。但我不知道为什么会出现这个错误。我的脚本代码。

```
 $(document).ready(function () {        
            $(function () {
                $('input[name=Quantity]').blur(allownumbers);
            });

           function allownumbers() {
            alert('ad');
            var elements = document.getElementsByName('Quantity');
            alert(elements);
            for (var i = 0; i < elements.length; i++) {  
            if (elements[i].value == '' || elements[i].value < 1) {
                alert('Please enter a valid value');                    
                return false;
            }
            else if (elements[i].value > 100) {
                alert('Please enter a value less than 100');                
                return false;
            }
            }               
            return true;            
            }​
    }); 
```

我的页面代码：

```
 <input id="Quantity" type="text" class="TxtBox" name="Quantity" value="@item.Quantity" onblur="return allownumbers()" maxlength="3"/> 
```

我拥有的脚本参考是

```
<script src="~/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>  
<script src="~/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"> 
```

我的代码有什么问题。任何建议.. 编辑：

当我不在文本框中调用它时，甚至不会调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:12:53.410

您复制了脚本引用。您只需要包含每个脚本一次（最好是缩小版本，除非它是您正在积极调试和编写的脚本）。其次，您的初始化例程需要一些帮助。

```
$(document).ready(function () {        
        $('input[name=Quantity]').blur(allownumbers);
});

function allownumbers() {
        alert('ad');
        var elements = document.getElementsByName('Quantity');
        alert(elements);
        for (var i = 0; i < elements.length; i++) {  
        if (elements[i].value == '' || elements[i].value < 1) {
            alert('Please enter a valid value');                    
            return false;
        }
        else if (elements[i].value > 100) {
            alert('Please enter a value less than 100');                
            return false;
        }
        }               
        return true;            
        }​ 
```

现在，allownumbers 不必在原始块之外，但对我来说，它有助于保持我的范围干净。其次，$(document).ready 确保您的文档可以使用，因此 JQuery 调用不需要 $(function () {})。

所以消除重复的脚本引用，你应该很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:12:12.310

您的`allownumbers`函数在全局范围内不存在（它很好地包含在最外层的处理程序中，这很好；全局范围已经被污染了），但这就是通过字段标记上的属性`ready`连接的旧式 DOM0 处理程序的地方寻找它。这就是为什么当字段模糊时，您会收到该错误。`onblur="..."``Quantity`

由于您稍后已经通过 jQuery 正确连接它（在您的*内部* `ready`处理程序中），只需`onblur`从字段标记中完全删除该属性。

其他注意事项：

*   您使用`ready`了两次：首先是显式地使用，然后是通过将函数引用传递给 来隐式地在回调中使用`$`，这是同一事物的简写形式。您可以删除内部的，除了调用其中的函数之外，它什么也不做。

*   您正在加载未缩小和缩小的脚本。选择一组，而不是两者。

# python - 解析和混合 Steam API 调用

> ID：13179917
> 
> 赞同：2
> 
> 时间：2012-11-01T15:07:08.707
> 
> 标签：python, django, steam-web-api

我正在使用 Django 环境，我想从 Steam 中提取统计信息。然而，Steam 的 API 非常愚蠢，因为它们有大约 20 个不同的 URL，我想从中获取信息的主要两个是：

*   [http://steamcommunity.com/id/STEAM_USERNAME/games?tab=all&xml=1](http://steamcommunity.com/id/STEAM_USERNAME/games?tab=all&xml=1)
*   [http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=KEY&steamids=STEAM_ID](http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=KEY&steamids=STEAM_ID)

我正在使用 Python 请求库来`GET`处理来自 Steam 的数据。

```
import requests
import json
from xml.dom.minidom import parseString

STEAM_API_URL = 'http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002'
STEAM_API_KEY = 'XXXXX'
STEAM_USERNAME = 'niteshade'

# Make request to steamcommunity.com with the username to get the 64-bit Steam ID
username_r = requests.get('http://steamcommunity.com/id/{0}/games?tab=all&xml=1'.format(STEAM_USERNAME))
steamid = str(parseString(username_r.text.encode('utf-8')).getElementsByTagName('steamID64')[0].firstChild.wholeText)
totalgames = parseString(username_r.text.encode('utf-8')).getElementsByTagName('game').length

data = {
    'key': STEAM_API_KEY,
    'steamids': steamid,
}

user_r = requests.get(STEAM_API_URL, params=data)
#user_r.json['response']['players'][0].update({'totalgames'.encode('utf-8'): totalgames}) 
```

当我查询时，`steamcommunity.com`我得到了类似的东西：

```
<gamesList>
    <steamID64>12345</steamID64>
    <steamID>aSteamID</steamID>
    <games>
        <game>
            <appID>201790</appID>
            <name>Orcs Must Die! 2</name>
            <logo>http://media.steampowered.com/steamcommunity/public/images/apps/201790/c345d9b205f349f0e7f4e6cdf8af4d0b7d242505.jpg</logo>
            <storeLink>http://steamcommunity.com/app/201790</storeLink>
            <hoursLast2Weeks>2.2</hoursLast2Weeks><hoursOnRecord>14.3</hoursOnRecord>
            <statsLink>http://steamcommunity.com/id/niteshade/stats/201790</statsLink>
            <globalStatsLink>http://steamcommunity.com/stats/201790/achievements/</globalStatsLink>
        </game>
        <game>
            <appID>113200</appID>
            <name>The Binding of Isaac</name>
            <logo>http://media.steampowered.com/steamcommunity/public/images/apps/113200/d9a7ee7e07dffed1700cb8b3b9482105b88cc5b5.jpg</logo>
            <storeLink>http://steamcommunity.com/app/113200</storeLink>
            <hoursLast2Weeks>0.2</hoursLast2Weeks>
            <hoursOnRecord>22.8</hoursOnRecord>
            <statsLink>http://steamcommunity.com/id/niteshade/stats/BindingOfIsaac</statsLink>
            <globalStatsLink>http://steamcommunity.com/stats/BindingOfIsaac/achievements/</globalStatsLink>
        </game>
        <game>
            <appID>19680</appID>
            <name>Alice: Madness Returns</name>
            <logo>http://media.steampowered.com/steamcommunity/public/images/apps/19680/16eb0cc15cde07377c0cb3bffa6d92bbc6dd72b2.jpg</logo>
            <storeLink>http://steamcommunity.com/app/19680</storeLink>
        </game>
    </games> 
```

从`api.steampowered.com`我得到这个：

```
{
    "response": {
        "players": [
            {
                "steamid": "12345",
                "communityvisibilitystate": 3,
                "profilestate": 1,
                "personaname": "aSteamID",
                "lastlogoff": 1351676021,
                "profileurl": "http:\/\/steamcommunity.com\/id\/aSteamID\/",
                "avatar": "http:\/\/media.steampowered.com\/steamcommunity\/public\/images\/avatars\/b2\/b261f66a17bfa6c95b24f8b4c6b58bb3776d57e4.jpg",
                "avatarmedium": "http:\/\/media.steampowered.com\/steamcommunity\/public\/images\/avatars\/b2\/b261f66a17bfa6c95b24f8b4c6b58bb3776d57e4_medium.jpg",
                "avatarfull": "http:\/\/media.steampowered.com\/steamcommunity\/public\/images\/avatars\/b2\/b261f66a17bfa6c95b24f8b4c6b58bb3776d57e4_full.jpg",
                "personastate": 4,
                "realname": "Real Name",
                "primaryclanid": "103582791429705688",
                "timecreated": 1250966723,
                "loccountrycode": "GB"
            }
        ]       
    }
} 
```

基本上，为了能够从中获得任何东西`api.steampowered.com`，我需要一个 Steam ID。为此，我调用了`steamcommunity.com`网站，该网站返回一个带有 Steam ID 的 XML 文件，等等。我需要的信息如下（使用 XML/JSON 响应中的名称）：

### 播放器

*   蒸汽机
*   人名
*   个人资料网址
*   朋友（我相信需要另一个 API 调用）
*   人格化
*   游戏总数
*   阿凡达全

### 游戏

*   应用ID
*   姓名
*   标识
*   hoursLast2Weeks

对于游戏总数，我想我只需`<game>`计算`steamcommunity.com`. 它起作用了，因为我能够计算它们，但我似乎无法将`totalgames`字段添加到来自`api.steampowered.com`. 其次，并非所有`<game>`节点都有`<hoursLast2Weeks>`子节点，我只想要那些有子节点的。第三，我只想得到玩家的朋友总数。我不是在开玩笑，我知道我必须使用另一个`GET`，但问题是将它添加到 JSON 中。

我的主要问题是尝试添加到 JSON 响应中，我查看了 SO 上的其他示例，尝试关注它们，但我不确定我在哪里出错了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T15:39:26.500

更改 json 数据非常简单：

```
jsondata = json.loads(json_input_string)
jsondata['newkey'] = new_value
json_output_string = json.dumps(jsondata) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:39:50.800

为了满足添加`totalgames`到`players`响应中的每个元素：

```
import json
response = '{"response": {"players": [{"steamid": "12345","communityvisibilitystate": 3,"profilestate": 1,"personaname": "aSteamID","lastlogoff": 1351676021,"profileurl": "http:\/\/steamcommunity.com\/id\/aSteamID\/","avatar": "http:\/\/media.steampowered.com\/steamcommunity\/public\/images\/avatars\/b2\/b261f66a17bfa6c95b24f8b4c6b58bb3776d57e4.jpg","avatarmedium": "http:\/\/media.steampowered.com\/steamcommunity\/public\/images\/avatars\/b2\/b261f66a17bfa6c95b24f8b4c6b58bb3776d57e4_medium.jpg","avatarfull": "http:\/\/media.steampowered.com\/steamcommunity\/public\/images\/avatars\/b2\/b261f66a17bfa6c95b24f8b4c6b58bb3776d57e4_full.jpg","personastate": 4,"realname": "Real Name","primaryclanid": "103582791429705688","timecreated": 1250966723,"loccountrycode": "GB"}]}}'
data = json.loads(response)
for player in data["response"]["players"]:
    # add code to get game count by player here                  
    # set to zero for this example
    totalgames = 0
    player["totalgames"] = totalgames

print json.dumps(data, sort_keys=True, indent=4) 
```

# java - jackson xml反序列化内联数组

> ID：13179920
> 
> 赞同：13
> 
> 时间：2012-11-01T15:07:32.053
> 
> 标签：java, xml, arrays, jackson, deserialization

如何反序列化这种奇怪的 XML。在我看来，缺少道具实体（围绕道具），但我无法更改此 XML（Web 服务）的来源。

```
<parents>
  <parent name="first">
    <description><![CDATA[Description for the first-Entity]]></description>
    <prop name="level">
      <value><![CDATA[1]]></value>
    </prop>
    <prop name="enabled">
      <value><![CDATA[true]]></value>
    </prop>
    <prop name="version">
      <value><![CDATA[1.0-beta3]]></value>
    </prop>
  </parent>
  <parent name="second">...</parent>
  ...
</parents> 
```

我的实体是

```
public class Test {
    @Test
    public void deserializerTest() throws JsonParseException, JsonMappingException, IOException {
        ObjectMapper om = new XmlMapper();
        List<Parent> xml = om.readValue(new File("./test.xml"),
            new TypeReference<List<Parent>>() {});
    }
}

public class Prop {
    @JacksonXmlProperty(isAttribute = true)
    public String name;

    @JacksonXmlText
    public String value;
}

@JacksonXmlRootElement
public class Parent {
    @JacksonXmlProperty(isAttribute = true)
    public String name;

    public String description;

    // 1\. alternative with List
    public List<Prop> prop;

    // 2\. alternative with Map
    @JsonDeserialize(using = PropDeser.class)
    public Map<String, String> prop;
} 

public static class PropDeser extends JsonDeserializer<Map<String, String>> {

    @Override
    public Map<String, String> deserialize(JsonParser jp,
            DeserializationContext ctxt) throws IOException,
            JsonProcessingException {
        Map<String, String> ret = new HashMap<String, String>();
        boolean eof = false;
        while (jp.hasCurrentToken()) {
            JsonToken t = jp.getCurrentToken();
            switch (t) {
            case END_OBJECT:
                if (eof) {
                    return ret;
                }
                eof = true;
                break;
            case VALUE_STRING:
                ret.put(jp.getCurrentName(), jp.getText());
                break;
            default:
                eof = false;
                break;
            }
            jp.nextValue();
        }
        return null;
    }

} 
```

## 1.替代

创建一个异常'无法从 JSON 字符串实例化类型 [简单类型，类 my.test.Prop] 的值；没有单字符串构造函数/工厂方法（通过引用链：my.test.Parent["prop"]）'

我不想要一个简单的字符串列表。我需要两者：名称和价值。所以我想到了`Map<String, String>`通过创建自己的反序列化器来使用...

## 2.替代

该错误似乎是 PropDeser.deserialize() 方法消耗了父级的结束标记。

```
java.lang.NullPointerException
at com.fasterxml.jackson.databind.deser.impl.BeanPropertyMap.find(BeanPropertyMap.java:160)
at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:287)
at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:112)
at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:226)
at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:203)
at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:23)
at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:2575)
at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:1766)
at my.test.Test.deserializerTest(Test.java:57) 
```

是否有可能在*XML-stream*中向后迭代？该方法如何知道何时停止？我没有任何线索。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T04:19:55.123

应该可以使用 Jackson XML 模块 2.1 处理“未包装”样式的列表元素，使用`@JacksonXmlElementWrapper(useWrapping=false)`.

结构应该是这样的：

```
@JacksonXmlRootElement(localName="parents")
public class Parents {
  @JacksonXmlElementWrapper(useWrapping=false)
  public List<Parent> parent;
}

public class Parent {
  @JacksonXmlProperty(isAttribute=true)
  public String name;

  public String description;

  @JacksonXmlElementWrapper(useWrapping=false)
  public List<Prop> prop;
}

public class Prop {
  @JacksonXmlProperty(isAttribute=true)
  public String name;

  public String value;
} 
```

所以你的解决方案非常接近。

请注意，如果使用内部类，则它们需要在声明中包含“静态”。我用 2.1.4 对此进行了测试，它对我有用。

# c# - C# 5 异步功能的哪个 .NET 版本

> ID：13179923
> 
> 赞同：6
> 
> 时间：2012-11-01T15:07:36.657
> 
> 标签：c#, .net, asynchronous

用户必须在他们的计算机上安装哪个版本的 .NET，以便开发人员使用 C# 5 中更新的异步功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T15:09:00.377

C# 异步功能使用 .Net 4.5 中引入的类

但是，您也可以[使用来自 NuGet 的 Async Targetting Pack](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)，其中包括 .Net 4.0 的这些类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:11:11.567

这实际上取决于。默认情况下，只有 .NET 4.5 项目支持异步/等待功能。但是使用 Async 目标包，您可以使用 Visual Studio 2012 编译 .NET 4 项目，并且仍然使用 async/await 功能。

您可以从[https://www.microsoft.com/en-us/download/details.aspx?id=29576](https://www.microsoft.com/en-us/download/details.aspx?id=29576)下载。请注意，这是相当旧的版本，预计很快会发布更新的版本。您可以通过 NuGet 从此链接[https://nuget.org/packages/Microsoft.Bcl.Async](https://nuget.org/packages/Microsoft.Bcl.Async)获取它。

# android - 带有物理的 Android 3D 对象

> ID：13179925
> 
> 赞同：4
> 
> 时间：2012-11-01T15:07:38.183
> 
> 标签：android, 3d, opengl-es-2.0, 3d-engine

我从事 Android 程序员已经有一段时间了，但我从未接触过 3D 图形（OpenGL 2 ES）。

为了使这个问题保持简单，这与我需要做的大致相同...

一块有纹理的材料，在风中挥动，我想在 GLSurfaceView 中绘制我希望能够控制风速，但真正好的是能够通过触摸移动材料。因此将涉及某种物理引擎。

这个问题是为有经验的 3D 图形开发者准备的。你会怎么做，我需要什么工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:10:11.343

听起来像 3D 布料模拟。来自搅拌机维基：

> 布料模拟是 CG 最难的方面之一，因为它是一个看似简单的现实世界项目，被认为是理所当然的，但实际上具有非常复杂的内部和环境相互作用。经过多年的发展，Blender 有了一个非常强大的布料模拟器，用于制作服装、旗帜、横幅等。布料与其他移动物体、风和其他力以及一般的空气动力学模型相互作用并受其影响，所有这些都在您的控制之下。

请参阅：[http ://wiki.blender.org/index.php/Doc:2.4/Manual/Physics/Cloth](http://wiki.blender.org/index.php/Doc:2.4/Manual/Physics/Cloth)

Google Code 上有一个 Android 项目，它实现了一个随风飘扬的旗帜：

[http://code.google.com/p/waving-flag-android/](http://code.google.com/p/waving-flag-android/)

我希望这可以帮助你。

# spring.net - Spring.Net Quartz 调度和代码配置

> ID：13179926
> 
> 赞同：2
> 
> 时间：2012-11-01T15:07:40.800
> 
> 标签：spring.net, quartz.net, spring.codeconfig

有没有办法使用代码配置而不是 xml 文件在 Spring.Net 中配置 Quartz 调度（Spring.Scheduling.Quartz）？

在使用 Spring.Net 设置 Quartz 作业时，我想完全避免使用配置文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:12:33.277

这是一个使用与 CodeConfig 粘合在一起的程序化和基于 XML 的作业调度的示例。

```
[Definition]
public virtual IScheduler Scheduler()
{
    var scheduler = SchedulerFactory().GetScheduler();
    var dataCleanUpJob = JobBuilder.Create<DataCleanUpJob>()
        .WithIdentity("DataCleanUpJob", "System")
        .StoreDurably(true)
        .Build();

    ITrigger dataCleanUpTrigger = TriggerBuilder.Create().WithSimpleSchedule(x => x.WithIntervalInHours(1)).Build();
    scheduler.ScheduleJob(dataCleanUpJob, dataCleanUpTrigger);

    scheduler.StartDelayed(TimeSpan.FromSeconds(10));
    return scheduler;
}

[Definition]
public virtual ISchedulerFactory SchedulerFactory()
{
    var properties = new NameValueCollection();

    // job initialization plugin handles our xml reading, without it defaults are used
    properties["quartz.plugin.xml.type"] = "Quartz.Plugin.Xml.XMLSchedulingDataProcessorPlugin, Quartz";
    properties["quartz.plugin.xml.fileNames"] = "~/quartz_jobs.config";

    var factory = new StdSchedulerFactory(properties);
    return factory;
} 
```

这里的关键点是为调度程序工厂和实际调度程序提供单例，以便它们可以从 Spring 上下文中使用。

# ruby-on-rails-3 - CanCan 和布尔用户授权 - 安全风险？

> ID：13179927
> 
> 赞同：0
> 
> 时间：2012-11-01T15:07:42.653
> 
> 标签：ruby-on-rails-3, security, devise, cancan, rails-admin

对于在 rails_admin 中的用户上使用多个“角色”，CanCan 似乎是一个不错的选择。因此，我在用户模型中添加了一个布尔属性“admin”，并告诉 CanCan 仅当它存在时才允许访问 rails_admin。

但这不是安全问题吗？我怎么能确定没有人能够更改属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:34:41.783

我会先说我对 Rails 的了解是有限的。但是，向对象添加布尔属性，这不是最终的（或任何无法更改的红宝石等价物）。此外，您需要在应用程序中添加一些防御性编码（例如按合同设计）。拥有可变属性的继承风险始终是一个问题。缓解这种情况的一种潜在方法是使用数据库或使用由受信任来源管理的证书（这样用户就不能轻易伪造证书并欺骗您的系统）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:10:29.893

不要将`admin`属性放在可访问的方法中，因此没有人可以更改其值。

# git - Git - 如何从给定范围内的提交中获取所有消息？

> ID：13179928
> 
> 赞同：1
> 
> 时间：2012-11-01T15:07:44.910
> 
> 标签：git

是否有任何简单的方法可以仅将提交消息作为纯文本获取，而输出中没有任何其他信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:18:42.203

我想`git log --pretty=format:%B <from>..<to>`这就是你所追求的。

例如对于我的一个项目：

```
$ git log --pretty=format:%B 35548842b09..HEAD

Changes quoting to fix transcoding on windows

Removes an unneeded puts statement

Updates the readme

Updates streamroller.bat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:11:48.997

您可以使用以下命令执行此操作：

```
git log --since --before 
```

[了解更多信息](http://gitref.org/inspect/#log)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:14:12.983

`git log --format=format:%b`仅显示提交的主体或`git log --format=format:%s`主题，而不显示任何其他信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:17:15.493

试试`git log --format=%B`。尝试`man git-log`更多选择。

# servicebus - Microsoft Service Bus 1.0 无法与客户端域外的服务器通信

> ID：13179937
> 
> 赞同：3
> 
> 时间：2012-11-01T15:08:33.770
> 
> 标签：servicebus

我已经在加入域的服务器上安装了 Service Bus 1.0。

通过在加入同一域的 PC 上运行的客户端应用程序，我能够创建队列、消息等。我使用连接字符串指定同一域中用户的凭据。一切正常。

从域外 PC 上运行的客户端应用程序，没有任何效果。我认为这与如果客户端应用程序不在同一个域上，则无法使用服务器域中的用户这一事实有关，因此我还尝试使用包含 SharedSecretIssuer 和 ShareSecretValue 的连接字符串。通过这种方法，我得到：

获取“https://servicebus01.dns1.XXXXXX.com:9355/XXXXXServiceBus/WRAPv0.9/”的令牌时，令牌提供程序服务不可用。内部异常包含“远程服务器返回错误：（404）未找到。”。

任何人都知道是否可以与该服务器域之外的服务总线服务器进行通信？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:13:44.713

或者，即使您的客户端未加入域，您也可以使用 OAuthTokenProvider。

创建命名空间管理器和工厂后，在执行任何操作之前：

namespaceManager.Settings.TokenProvider = TokenProvider.CreateOAuthTokenProvider(new Uri[] { new Uri("https://servicebus01.dns1.XXXXXX.com:9355") }, new NetworkCredential("user", "password", "domain" ))

messingFactory.GetSettings().TokenProvider = TokenProvider.CreateOAuthTokenProvider(new Uri[] { new Uri("https://servicebus01.dns1.XXXXXX.com:9355")}, new NetworkCredential("user", "password", "领域”））;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:34:41.497

我发现了问题！

运行客户端应用程序的计算机根本没有加入域。即使客户端`s and server`的域之间不存在信任，它也必须加入域。

奇怪的限制...

# css - 使用什么工具来比较和减少通过 css 样式表复制的内容？

> ID：13179938
> 
> 赞同：1
> 
> 时间：2012-11-01T15:08:35.720
> 
> 标签：css, compare, diff

我有 2 个 CSS 文件。第一个是“默认”css 文件（用于从相同模板启动的所有网站）。第二个是我们应用程序中*真正的*一个。这两个文件都包含在主母版页中。

我注意到*有人*复制或重新定义了一些类似的风格。

例如，我们`.aligndroite {text-align: right;}`在两个文件中都有（尽管**格式不一样**（第一个是 1 行声明，第二个是 3 行））。

虽然还*不错*，但我想删除声明两次的样式。

我想要一个工具来比较这两个文件并告诉我两个文件中都存在哪些声明。那存在吗？

[这个问题](https://stackoverflow.com/questions/225672/what-tool-to-use-to-compare-and-reduce-css-style-sheets)指向[这个工具](http://www.alanhart.co.uk/tools/compare-css.php)，它确实......与我需要的完全相反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:14:25.077

大多数浏览器都内置了它作为“元素检查器”——您将能够看到一个元素的所有 CSS 声明以及哪些属性被覆盖。

其余的实际上是手动清理过程。没有快速而肮脏的自动工具。

您可能想要启动第三个“合并”样式表，您可以将检查器的 CSS 复制/粘贴到其中。理想情况下，您应该能够在当前样式表和新样式表之间进行交换，并且两者看起来都一样。

# jquery - Jquery Cycle 插件：一个页面上有多个幻灯片的多个寻呼机计数器

> ID：13179941
> 
> 赞同：0
> 
> 时间：2012-11-01T15:08:42.110
> 
> 标签：jquery, plugins, cycle

我有一个页面计数器 - 带有（1/9）系统 - 用于一页上的多个幻灯片。我的问题是：当我单击一个幻灯片时，它不仅会影响该幻灯片的页面计数器，还会影响该页面上存在的不同幻灯片的所有页面计数器...

如果有人能解决我的问题，我将不胜感激。

**这是我的 JQuery 代码：**

```
<script type='text/javascript'>

        $(document).ready(function() {
            $('.slidecontein .slideshow').each(function(){
                $(this).cycle({
                    speed:1, 
                    timeout: 0,
                    next: $('.slideright', $(this).parent()),
                    prev: $('.slideleft', $(this).parent()),
                    after: function onAfter(curr,next,opts) {
                        var caption = (opts.currSlide + 1) + ' / ' + opts.slideCount;
                        $('.counter').html(caption);
                    }
                });
            });
        });
    </script> 
```

**这是我的 html 代码示例**

```
<div class="slidecontein"> 
 <div class="slideleft"> </div>
 <div class="slideright"> </div>

 <div class="slideshow"> 
 <div class="slide1">
 <img src="../imgs/01.jpg">
 </div>

  <div class="slide2">
 <img src="../imgs/02.jpg"> 
 </div>

 <div class="slide3">
 <img src="../imgs/03.jpg">
 </div>

    </div> <!-- END slideshow -->

       <div id="counter"></div>     <!-- my pages-counter -->

</div><!-- END slidecontein -->

<div class="slidecontein"> 
 <div class="slideleft"> </div>
 <div class="slideright"> </div>

 <div class="slideshow"> 

<div class="slide1">
 <img src="../imgs/10.jpg">
 </div>

  <div class="slide2">
 <img src="../imgs/11.jpg"> 
 </div>

 </div> <!-- END slideshow -->
 <div id="counter"></div>            <!-- my page counter -->
 </div><!-- END slidecontein --> 
```

我也试过这个：

```
var ss=$(this).closest('.slidecontein') 
```

但仍然无法正常工作（它破坏了幻灯片）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:37:27.067

您在选择器 '.slidecontein .slideshow' 上使用 .each() 方法，该方法不是唯一的，以确保这将匹配多个元素。基本上，您的 .cycle() 方法代码一次控制多个幻灯片。

您最好为每个幻灯片容器分配一个 ID，并在每个幻灯片容器上单独使用 .cycle() 方法。这样他们都将被独立控制。

# emacs - 根据主要模式更改字体

> ID：13179942
> 
> 赞同：3
> 
> 时间：2012-11-01T15:08:43.770
> 
> 标签：emacs, fonts, major-mode

有没有办法根据主要模式更改字体？如果是这样，怎么做？我通常使用比例字体，但只针对dired模式和shell模式，我想切换到非比例字体。这些模式没有特殊的面，只是使用默认的面，所以不能只通过设置字体来完成。我希望能够根据主要模式自动切换，也许使用钩子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:12:07.273

[使用模式挂钩，使用面部重新映射功能](http://www.gnu.org/software/emacs/manual/html_node/elisp/Face-Remapping.html)挂钩您为当前缓冲区重新映射面部的函数：

```
(defun use-monospace ()
  "Switch the current buffer to a monospace font."
  (face-remap-add-relative 'default '(:family "Monospace")))

(add-hook 'dired-mode-hook 'use-monospace)
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:41:22.157

如上所述定义自己的函数的另一种选择是使用`buffer-face-mode`. 通常这将`variable-pitch`用于启用它的缓冲区，但由于您想使用可变间距字体作为默认字体，您可以将其更改为`fixed-pitch`：

```
(setq buffer-face-mode-face 'fixed-pitch)
(add-hook 'dired-mode-hook 'buffer-face-mode)
(add-hook 'shell-mode-hook 'buffer-face-mode) 
```

# vba - 对具有许多搜索目标的大量文件进行搜索优化

> ID：13179948
> 
> 赞同：0
> 
> 时间：2012-11-01T15:09:17.673
> 
> 标签：vba, search

我正在编写一个必须在 VBA 中的脚本。目标是在大约 3500 个文件 (450mb) 中搜索 200 多个不包含彼此的字符串。什么会更有效，分别搜索每个标签的文件并在找到字符串后从文件中取出（我只需要知道它在那里），或者我应该在每一行中搜索每个标签通过保存必须打开每个文件 200 多次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:20:30.737

对于大多数文件来说，打开这样的脚本是最耗时的部分，因为它需要磁盘，甚至可能需要网络操作，而不仅仅是 RAM 内存操作（目前速度更快）。

因此，建议打开 1 个文件并检查其中的 200 多个字符串以及该检查之后的任何内容。然后移动到下一个文件。

# ruby-on-rails - rails 3 设计避免访问 /sign_in 路径

> ID：13179953
> 
> 赞同：0
> 
> 时间：2012-11-01T15:09:27.350
> 
> 标签：ruby-on-rails, devise, routes

我使用 devise for rails 3.2 进行身份验证。我已将默认路由从设计更改为：

```
devise_scope :user do
    get 'signin' => 'devise/sessions#new', :as => :new_user_session
    post 'signin' => 'devise/sessions#create', :as => :user_session
    match 'signout' => 'devise/sessions#destroy', :as => :destroy_user_session,
          :via => Devise.mappings[:user].sign_out_via
  end 
```

现在我的登录和注册表单在根站点上。如何避免访问 127.0.0.1:3000/signin 但仅授予对 127.0.0.1:3000 的访问权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:50:41.560

想要它无法访问？从路由中删除它，因此用户无法访问它。

# jquery - jQuery Sticky Nav 和响应式设计的问题

> ID：13179954
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:09:28.397
> 
> 标签：jquery, navigation, responsive-design, sticky, browser-width

我遇到了一个问题，我无法在向下滚动页面时使用此代码修复粘性导航。

我希望 js 不做任何事情如果浏览器窗口宽度低于 720 像素，它可以工作，但仅在第一页加载时有效。我的意思是，如果我在粘性导航处于活动状态时调整窗口大小，即使我在 720 像素以下调整窗口大小，它仍然保持活动状态。这是jQuery：

```
//Sticky Navi
jQuery(function($) {

// grab the initial top offset of the navigation 
var sticky_navigation_offset_top = $('.main-navigation').offset().top;
var browserWidth = $( window ).width();

// our function that decides weather the navigation bar should have "fixed" css position or not.
var sticky_navigation = function(){
    var scroll_top = $(window).scrollTop(); // our current vertical position from the top

    // if we've scrolled more than the navigation, change its position to fixed to stick to top,
    // otherwise change it back to relative
    if (scroll_top > sticky_navigation_offset_top && browserWidth > 720) { 
        $('.main-navigation').css({ 'position': 'fixed', 'top':0, 'z-index':999999, 'opacity': 0.9, 'box-shadow': '0px 3px 5px #393939' })
    } else {
        $('.main-navigation').css({ 'position': 'relative', 'opacity': 1, 'box-shadow': 'none' }); 
    }   
};

// run our function on load
sticky_navigation();

// and run it again every time you scroll
$(window).scroll(function() {
     sticky_navigation();
  });

}); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:40:43.580

就像我在评论中所说的那样，没有你的 HTML 和 CSS，我将无能为力，但这里有一些可行的方法。你有一个奇怪的功能需要修复。

```
function sticky_navigation() {

// grab the initial top offset of the navigation
var sticky_navigation_offset_top = $('.main-navigation').offset().top;
var browserWidth = $(window).width();
var scroll_top = $(window).scrollTop(); // our current vertical position from the top

// if we've scrolled more than the navigation, change its position to fixed to stick to top,
// otherwise change it back to relative
if ((scroll_top > $('.main-navigation').height()) && (browserWidth > 720)) {
    $('.main-navigation').css({ 'position': 'fixed', 'top':0, 'z-index':999999, 'opacity': 0.9, 'box-shadow': '0px 3px 5px #393939' });
} else {
    $('.main-navigation').css({ 'position': 'relative', 'opacity': 1, 'box-shadow': 'none' });
    }   
};

// and run it again every time you scroll
$(window).scroll(function() {
    sticky_navigation();
}); 
```

摆弄垃圾 HT​​ML：http: [//jsfiddle.net/cm4t6/](http://jsfiddle.net/cm4t6/)

# jquery - jQuery 从文本框中提取 HTML 内容

> ID：13179962
> 
> 赞同：1
> 
> 时间：2012-11-01T15:09:58.887
> 
> 标签：jquery, html

我有一个从 html 标签中清除一些属性的函数。我想添加一个文本框来插入 HTML 源并将其全部清理干净，但我找不到使用文本框的方法（仅使用 .val() 或 .html() 没有帮助）。

一个例子：

HTML IN - 插入到文本框中

```
<tr>
<td nowrap="" valign="top" width="47">
          <p align="center">Out</p>
</td>
    <td nowrap="" valign="top" width="92">
          <p align="right">268.292,00</p>
</td>
</tr> 
```

HTML OUT - 在单击事件上 ->此代码出现在文本框（或另一个）中，因此我可以复制/粘贴它

```
<tr>
<td>
          <p>Out</p>
</td>
    <td>
          <p>268.292,00</p>
</td>
</tr> 
```

许多问题都在谈论文本框，但没有什么能真正让我走上正轨……

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:39:35.063

如果您使用`input type="text"`，则可以使用`val()`，但是，如果您使用 a `textarea`，则必须使用`html()`，因为框内的文本存储在开始和结束标记之间，而不是作为文本框的属性。

您可以像这样将文本从一个文本框传输到另一个文本框：

```
$(function(){
    $('#textarea2').html($('#textarea1').html());
}); 
```

jsFiddle[在这里](http://jsfiddle.net/w4VXq/)

编辑：其实那是垃圾。您可以使用`val()`

# c# - c#中的连续2个游戏

> ID：13179969
> 
> 赞同：2
> 
> 时间：2012-11-01T15:10:19.717
> 
> 标签：c#, .net, winforms, visual-studio-2010, visual-c#-express-2010

![董事会](../Images/4f4c6a3a16a6188e8dae8fd6a5fc2544.png)

上面是电路板的图像

我发现很难弄清楚如何在不使用蛮力枚举的情况下连续检测 2 种颜色以确定获胜者。

我有一个算法，我一直在尝试实现它，但我似乎无法让它工作，任何人都知道如何做到这一点.. 会很有帮助，谢谢..

我想检测获胜者对角线垂直和水平..

ps 我通常不寻求解决方案，但这次我真的需要一些帮助。非常感谢

这是我为程序提供的代码，可让您放心

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

        private Button[] btns;
        private Button[] btns2;
        private Button[] btns3;
        public Color[] col;
      //  public var x;

        public Form1()
        {
            InitializeComponent();

            btns = new Button[2] { button2, button3 };
            btns2 = new Button[2] { button4, button5 };
            btns3 = new Button[2] { button9, button8 };
            col = new Color[2] { Color.Red, Color.Yellow };
           Color x = col[0];
            Color y = col[1];

        }

        private void Form1_Load(object sender, EventArgs e)
        {

            foreach (var btn in btns)
            {
                btn.Enabled = false;
                btn.BackColor = Color.LightCyan;
            }

            foreach (var btn in btns2)
            {
                btn.Enabled = false;
                btn.BackColor = Color.LightCyan;
            }
            foreach (var btn in btns3)
            {
                btn.Enabled = false;
                btn.BackColor = Color.LightCyan;
            }
        }

        public int state;
        int cc = 0;
        private void button1_Click(object sender, EventArgs e)
        {
            foreach (var btn in btns)
            {
                  {
                    if (!btn.Enabled)
                    {
                        btn.Enabled = true;

                        if (cc == 0)
                        {
                            cc = 1;
                            btn.BackColor = col[0];

                        }
                        else
                        {
                            cc = 0;
                            btn.BackColor = col[1];
                        }

                        return;
                    }

                }
            }       
        }

        private void button6_Click(object sender, EventArgs e)
        {
            foreach (var btn in btns2)
            {
                if (!btn.Enabled)
                {
                    btn.Enabled = true;

                    if (cc == 0)
                    {
                        cc = 1;
                        btn.BackColor = col[0];
                    }
                    else
                    {
                        cc = 0;
                        btn.BackColor = col[1];

                    }

                    return;
                }
            }
        }

        private void button7_Click(object sender, EventArgs e)
        {

            foreach (var btn in btns3)
            {
                if (!btn.Enabled)
                {
                    btn.Enabled = true;

                    if (cc == 0)
                    {
                        cc = 1;
                        btn.BackColor = col[0];
                    }
                    else
                    {
                        cc = 0;
                        btn.BackColor = col[1];

                    }

                    return;
                }
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:26:21.357

您不应该使用按钮执行此逻辑。创建一个实现逻辑的游戏类，您可以通过包含 X 和 Y 参数的函数调用来控制它。

然后在每次单击按钮时，您都会调用游戏逻辑，就像`game.MakeMove(0, 0);`单击左上角的按钮一样。

这样做的好处：它是可测试的，用户界面可以很容易地改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:19:03.070

两种选择。更简单的方法是创建一个`Button[][]`数组，然后填充它以匹配按钮的实际位置。然后您可以通过索引检查其他按钮。

更复杂的是创建一个子类，`Button`它知道它自己在网格中的位置（`X`和`Y`属性），并且知道如何找到相邻的按钮。然后，您可以获得相同颜色的所有相邻按钮的列表，并以这种方式建立一个链。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:19:19.153

这就是我认为没有任何代码的逻辑方法，因为我目前正在工作并且无法测试任何东西。您需要安排您的按钮或部件或您的游戏最终将在某种二维数组/集合中，并为 X 和 Y 轴设置相应的值。

单击按钮时，您只需检查相关的触摸按钮即可检查潜在匹配项。例如。让我们假设左下角的按钮位于位置 0,0。如果单击它，您只需检查 1,0 和 0,1 处的按钮，看看它们是否是相同的颜色，就知道已经进行了匹配。

无论您需要多少匹配，这都可以轻松扩展为有效集合。它还允许您避免“蛮力”方法。在与以前完全相同的情况下，如果您连续查找 4 个并且 0,1 不是相同的颜色，您不需要检查 0,2 或 0,3 或沿该轴的任何其他内容，因为我们已经知道那里没有比赛。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T15:25:36.740

您应该考虑使用多维数组来表示您的数据 - 按钮。换句话说，一个矩阵。

基本上，您可以像这样声明您的按钮：

```
private Button[,] buttons = new Button[2, 3]; 
```

MSDN 页面解释[了多维数组的工作原理](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.71%29.aspx)。

然后，您可以迭代数组以检测任何逻辑 - 水平、垂直、对角线匹配等。您可以编写如下内容：

```
bool hasAWinner = false;
// for each line
for (int i = 0; i < 2; i++)
    Dictionary<Color, int> numberOfbuttonsWithColor = new Dictionary<Color, int>();
    numberOfbuttonsWithColor[Color.Red] = 0;
    numberOfbuttonsWithColor[Color.Yellow] = 0;

    // detect if there is at least two buttons of the same color
    for (int j = 0; j < 3; j++) {
        Color currentButtonColor = buttons[i,j].BackColor;
        numberOfbuttonsWithColor[currentButtonColor]++;
        if (numberOfbuttonsWithColor[currentButtonColor] == 2) {
            hasAWinner = true;
            break;
        }
    }

    if (hasAWinner) break;
}

// execute victory actions
if (hasAWinner) {
    Console.writeline(String.format("Color {0} wins!", currentButtonColor);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T15:24:17.100

这个怎么样。

以每个按钮的列和行命名。即btn00（左上角）、btnNN（右下角，N为行数和列数，假设为正方形）等。

在每个事件处理程序上，保存单击按钮的名称及其颜色。然后遍历每种颜色的单击按钮集合并比较索引。如果您找到两个符合以下条件的按钮名称，则它是连续两个：

```
if ((Math.Abs(index0ButtonA - index0ButtonB) == 1 && index1ButtonA == index1ButtonB) || ( Math.Abs(index1ButtonA - index1ButtonB) == 1 && index0ButtonA == index0ButtonB)
{
     twoInARow = true;
} 
```

# c# - Visual Studio 属性网格：接受 Int 属性的空字符串

> ID：13179971
> 
> 赞同：0
> 
> 时间：2012-11-01T15:10:28.423
> 
> 标签：c#, visual-studio, propertygrid

我有一个包含各种值类型（包括整数）的属性网格。一些 int 属性具有 DefaultValueAttribute，指定一个默认值，例如 -1。

如果用户输入空字符串，Visual Studio 会提示“属性值无效；'' 无法转换为 Int32”。无论如何将空字符串解释为恢复为默认值？

我们实现了一个自定义的 PropertyDescriptor，但是在VS 转换为对象值类型*之后调用了 SetValue() 方法。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:26:32.233

创建一个派生类`Int32Converter`并将其附加到您的属性。覆盖其`ConvertFrom`方法以插入您想要的行为。最佳情况下，您将使用设置为 PropertyDescriptor 的 DefaultAttribute 以使其可重用。

如果您想了解如何`BaseNumberConverter.ConvertFrom`完成，请使用反射器工具。

# wordpress - wordpress 多站点 wp-admin 重定向到登录

> ID：13179972
> 
> 赞同：0
> 
> 时间：2012-11-01T15:10:39.873
> 
> 标签：wordpress

WordPress 亩

我在使用 IE 的 IIS 上的 Wordpress 多站点上遇到了以下挑战。

当我尝试`wp-admin`在子站点级别访问时，我被重定向到登录名，该登录名永远不会显示。

例如，如果我在子站点上并将 wp-admin 添加到我的地址，我的浏览器（即 9）会将我重定向到：

```
wp-admin%2F&reauth=1, which does not display a login page. 
```

登录到顶部站点的 wp-admin 可以正常工作，例如当我输入时： `main/wp-admin`我被重定向到`.../wp-logpin.php`，如果我重新加载 (F5) 页面，我可以登录。

剧情变厚了！一旦我登录到主站点，我就可以`main/subsite` `/wp-admin`成功浏览。

环境 - 版本。3.4.2\. 在 IIS 上

我是 WordPress、MySQl 和 PHP 的新手，但对这一切印象深刻。任何关于课件的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:30:23.250

问题已解决 - 我对被重定向到主 WP-Admin 页面的主要担忧是，我的多站点中的博主将能够访问其他博客仪表板，因为他们在顶部输入，即 bolgsite/wp-admin 而不是 blogsite/subsite /wp-管理员。

这是基于刚刚为子站点创建管理员用户然后在顶级 wp-admin 登录的错误假设。WP 只允许访问子站点仪表板。

结论 - 如果专门为子站点创建管理员，则唯一可见的仪表板将针对该子站点，无论用户在何处访问 wp-admin 页面。完全有道理。

# c# - 发送电子邮件错误：邮箱不可用。客户端主机被拒绝

> ID：13179977
> 
> 赞同：0
> 
> 时间：2012-11-01T15:10:40.990
> 
> 标签：c#, asp.net, class, smtp, smtpclient

当我在调试模式下按下发送按钮到来自“txtMail”（接收者）的特定地址时，我收到这个“弹出”错误：

> MailerException 未被用户代码处理
> 邮箱不可用。
> 服务器响应是：4.7.1 客户端主机被拒绝：找不到您的主机名，[IP]

代码实际上跳过了最后一行，即：

```
 catch(Exception ex)
            {
                throw new MailerException(ex.Message, ex);
            } 
```

我认为代码本身没有问题，但这是整个代码，所以也许有人可以发现问题：

```
public void SendMail()
        {
            System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();

            // Mail from
            if (!string.IsNullOrEmpty(this.mailFrom))
                message.From = new MailAddress(this.mailFrom);
            else
                message.From = from;

            if (!IsValidEmailAddress(message.From.Address))
                throw new MailAddressException("From address " + message.From + " is not valid");

            //message.From =   from;
            // Add recipients
            if (_RecipientNames.Count == 0)
                throw new RecipientException("No recipients added");

            StringBuilder Recipients = new StringBuilder();
            for(int i = 0; i < _RecipientEmailAddresses.Count; i++)
            {
                if (_RecipientNames[i].ToString().Length > 0)
                    message.To.Add(new MailAddress((string)_RecipientEmailAddresses[i], (string)_RecipientNames[i]));
                else
                    message.To.Add(new MailAddress((string)_RecipientEmailAddresses[i]));
            }

            foreach (MailAddress ma in this._Bcc)
                message.Bcc.Add(ma);

            if (this._ReplyToAddress != null)
                message.ReplyTo = this._ReplyToAddress;

            message.Subject     = _Subject;
            message.IsBodyHtml = this.isHtmlMail;
            message.BodyEncoding = this.BodyEncoding;

            // Priority
            message.Priority = this.priorityLevel;

            // Load template file?
            if (_TemplateFile.Length > 0)
            {
                message.Body = GetMailTemplateContents();
            }
            else
                message.Body = _MailBody;

            // Attachments given?
            if (this.attachments.Count > 0)
            {
                foreach (Attachment a in this.attachments)
                    message.Attachments.Add(a);
            }

            SmtpClient client = new SmtpClient(_SmtpServer);
            try
            {
                client.Send(message);
            }
            catch(System.Web.HttpException ex)
            {
                throw new MailerException(ex.Message,ex);
            }
            catch(System.Runtime.InteropServices.COMException ex)
            {
                // Rethrow the exception
                throw new MailerException(ex.Message, ex);

            }
            catch(Exception ex)
            {
                throw new MailerException(ex.Message, ex);
            } 
```

有人可能会说，这实际上是我尝试传送到的服务器返回的错误代码。（邮箱已满、邮箱地址无效等）

无论哪种方式，还是需要由邮件服务器的管理员解决？有谁可能知道为什么会发生此错误？

如果需要，愿意提供任何其他/更多信息。
提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:16:10.457

这看起来像是接收 SMTP 服务器拒绝了该邮件。我猜它试图对您的 IP 和主机名进行反向查找，但找不到匹配项。这是一种常见的反垃圾邮件做法。

# javascript - 如何在 JavaScript 中制作 3D 对象数组？

> ID：13179979
> 
> 赞同：0
> 
> 时间：2012-11-01T15:10:47.750
> 
> 标签：javascript

```
lyricsInp = document.getElementById("lyrics").value;
var lines = lyricsInp.split("\n");
for (i = 0; i < lines.length; i++) {
    holder[0][i] = new Array();
    words = lines[i].replace(/[ \t\r]+/g, "###").split("###");
    for (j = 0; j < words.length; j++) {
        holder[0][i][j].word = words[j];
        holder[0][i][j].startT = 0;
        holder[0][i][j].endT = 0;
    }
} 
```

在这里，我需要每个支架元素保留`word,` `startT`and `endT`，但这不起作用。我该如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:14:46.667

声明`holder[0][i][j]`为对象字面量：

```
for (j = 0; j < words.length; j++) {
    holder[0][i][j] = {};

    holder[0][i][j].word = words[j];
    holder[0][i][j].startT = 0;
    holder[0][i][j].endT = 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:15:06.577

```
lyricsInp =  document.getElementById("lyrics").value;
var lines = lyricsInp.split("\n");
for (i=0;i<lines.length;i++){
    holder[0][i] = new Array();
    words = lines[i].replace(/[ \t\r]+/g,"###").split("###");
    for (j=0;j<words.length;j++){
        holder[0][i][j] = {
                word: words[j],
                startT: 0,
                endT: 0
            };
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:17:59.333

```
var holder = [[]];

var lyricsInp = document.getElementById("lyrics").value,
    lines = lyricsInp.split("\n");
for (var i = 0; i < lines.length; i++) {
    holder[0][i] = [];
    var words = lines[i].replace(/[ \t\r]+/g, "###").split("###");
    for (var j = 0; j < words.length; j++) {
        holder[0][i][j] = {
            word: words[j],
            startT: 0,
            endT: 0
        };
    }
} 
```

# warnings - ESXi 5 中的“奇偶校验正在进行中”警告

> ID：13179985
> 
> 赞同：1
> 
> 时间：2012-11-01T15:11:13.400
> 
> 标签：warnings, storage, vmware, esxi

将 8 个硬盘驱动器连接到 RAID5 并进行快速初始化后，我的 ESXi 显示 8 个警告，显示“奇偶校验正在进行中”。在旧的 vmware 论坛中，我发现 RAID 可能仍在构建中，但为什么我可以使用数据存储？

任何想法这个警告意味着什么以及如何摆脱它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:15:11.487

没错，突袭仍在建设中。这可能需要几个小时，具体取决于：

*   突袭控制器，
*   磁盘速度
*   磁盘大小。

如果您的 RAID 控制器没有启用回写（或不支持它），则该时间将相当长。

# php - 从组合框中显示/隐藏字段集

> ID：13179989
> 
> 赞同：0
> 
> 时间：2012-11-01T15:11:26.983
> 
> 标签：php, combobox, show-hide, fieldset

嗨，我有一个这样的组合框：

```
<select name="tayuda" id="mySelect">
 <option value="" selected>Seleccionar</option>             
 <option value="Denuncia" <?=($info['tayuda']=='Denuncia')?'selected':''?>>Denuncia</option>
 <option value="Reclamo" <?=($info['tayuda']=='Reclamo')?'selected':''?>>Reclamo</option>
 <option value="Consulta" <?=($info['tayuda']=='Consulta')?'selected':''?>>Consulta</option>
 <option value="Otro" <?=($info['tayuda']=='Otro')?'selected':''?>>Otro</option>
</select> 
```

如果选择了选项 value="Consulta" 或者没有选择，我想隐藏 3 个字段集。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:15:15.353

在选择控件上实现更改事件。检查值，如果值为 COnsulta 或为空，则隐藏文件集（将其 css 可见性属性设置为隐藏）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:39:27.030

也许是这样的？

```
 function hideField(){
    var e = document.getElementById("mySelect");
     var strUser = e.options[e.selectedIndex].value;

     if( strUser == 'Consulta' ) {
        $("#fieldset1").hide();
        $("#fieldset2").hide();
        $("#fieldset3").hide();
     }
     else if( strUser == '' ) {
        $("#fieldset1").hide();
        $("#fieldset2").hide();
        $("#fieldset3").hide();
     }

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:48:15.173

你可以看看这里

[选择选项时 JQuery 隐藏 Div](https://stackoverflow.com/questions/5328456/jquery-hide-div-when-option-is-selected)

需要稍作修改。

```
jQuery(document).ready(function() {
   jQuery("#mySelect").change(function() {
      var opt-selected = jQuery(this).find("option:selected").val()
      if(opt-selected == "Consulta" || opt-selected == "") {
         jQuery("fieldset.multiples").hide();
      } else {
         jQuery("fieldset.multiples").show();
      }

   });
}); 
```

可能需要一些CSS

```
.multiples {
  display: none;
} 
```

# functional-programming - 使用函数式编程模仿数学中的置换函数

> ID：13179991
> 
> 赞同：1
> 
> 时间：2012-11-01T15:11:41.500
> 
> 标签：functional-programming, wolfram-mathematica, permutation

我正在创建一个集合的所有可能排列，比如 {1,2,3}，因为我每次都可以选择两个数字。我知道这可以使用 permutations 函数来完成，但我的列表可能非常大，并且在创建如此巨大的矩阵之后，对其进行任何操作都需要很长时间。因此，我编写了以下递归函数来满足我的需求：

```
h=Table[Null,{}]    
myset = {1, 2, 3};
numOfBins = 2;
h=Table[Null,{numOfBins}];
rec[x_] := (
   If[
    x <= numOfBins,
    Do[
     h[[x]] = j; 
     rec[x + 1],
     {j, 1, Length[myset]}
     ],
    Print[h]
    ]
   );
rec[1] 
```

此代码的结果是：

```
{1,1}
{1,2}
{1,3}
{2,1}
{2,2}
{2,3}
{3,1}
{3,2} 
{3,3} 
```

现在我想知道如何使用函数式编程来做到这一点，也许是 Nest 或 NestWhile ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:22:08.487

如果您只请求长度为 2 的排列，Mathematica 可以相当快地返回结果。

```
AbsoluteTiming[Permutations[Range[500], {2}]] 
```

![长度排列2](../Images/b7319c9db9aaa31d1d601b97799a48ce.png)

Mathematica 不会首先生成所有排列，然后选择长度为 2 的排列。它甚至无法处理查找 500 项列表的所有排列的任务。

```
Permutations[Range[500]] 
```

![所有排列](../Images/581a126fe12f03fbea196d8ad4209b78.png)

# jquery - 调整默认边距

> ID：13179998
> 
> 赞同：0
> 
> 时间：2012-11-01T15:11:54.253
> 
> 标签：jquery, jquery-mobile

我在标题中有一个图像，当我将其包装`<img>`在`<a>`标签中时，图像被移位。我假设`<a>`标签具有导致此问题的默认边距或填充。如何删除`<a>`jquery-mobile 中标签的默认边距或填充？

```
<div data-role="header" data-position="fixed" class="shadow">
        <a href="#CheckInPage" data-role="none" id="newheader">
            <img id="goHeaderLogo" src="images/go.gif" alt="go Logo"/>
        </a>
        <h2>Locations Near Me</h2>
</div> 
```

我试过这个：

```
<script>
        $('#newheader').css("margin",'0px');
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:52:25.063

找出需要修改的样式的最佳方法是使用诸如 firebug 或浏览器的开发人员工具之类的东西来检查各个元素

试试这个（我曾经`margin-left: 50px`看到更好的区别）

```
 <style>
  .ui-header .ui-btn-left {
    margin-left: 50px;
  }
 </style> 
```

你得到这个
![在此处输入图像描述](../Images/0f3bbc282128e7334f9c3992f1d57371.png)