# StackOverflow 问答 14289000-14289999

# git - 如何构建 video.js

> ID：14289001
> 
> 赞同：0
> 
> 时间：2013-01-12T00:48:46.067
> 
> 标签：git, build, video.js

build.sh 已从源代码树中删除，删除下的 git 上的注释是您应该使用 rake 来构建它。我曾尝试使用 ruby​​ 从源代码树构建 video.js，但未能成功。有人有任何可以帮助构建这个项目的提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:08:44.333

[根据开发人员的说法](https://github.com/zencoder/video-js/commit/9293076b75a119a1bb4af20e28d86bf7e177549b#commitcomment-2334570)，您应该能够使用 Rake 构建它

```
rake build:current 
```

如果失败，那么您的 Rake 设置或依赖项可能存在问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:17:14.213

要使用 rake 构建 videojs，您需要安装 httparty gem

```
gem install httparty 
```

希望对其他人有所帮助。

# jquery - 中心缩放（宽度/高度/顶部/左侧）平滑

> ID：14289010
> 
> 赞同：1
> 
> 时间：2013-01-12T00:49:42.560
> 
> 标签：jquery, events

因此，我将 Flash 小部件转换为 HTML/CSS/JS，并且在模拟图像的中心缩放效果时遇到了问题。

所以，目前我在 HTML 中有这样的结构：

```
<div id="outer">
  <img />
</div> 
```

使用类似于以下的 CSS：

```
#outer{
  width: 690px;
  height: 440px;
  position: relative;
}
#outer img{
  width: 690px;
  height: 440px;
  position: absolute;
  top: 0px;
  left: 0px;
} 
```

然后在 jQuery 中，我这样做是为了创建缩放效果：

```
$image = $("#outer img");
scale = 1.16;
var w = parseInt($image.data("width")); //Set earlier to 690px
var h = parseInt($image.data("height")); //Set earlier to 440px
$image
  .animate({
    width: w*scale,
    height: h*scale,
    left: -(((w*scale) - w)/2),
    top: -(((h*scale) - h)/2)
  }, 5000, "linear"); 
```

[jFiddle在这里](http://jsfiddle.net/DusRy/1/)

我发现的这张特定图片有点难以看清，但（出于某种原因）在我的客户给我的图片中更容易看到。我看到的是锯齿状/摇晃/抖动的运动，我认为这可能是因为左/上/宽/高的十进制值排列得不够好，无法始终保持居中。

有没有更好的方法来解决这个问题，或者可能有一个可以产生更好结果的缓动函数？

如果有什么我可以澄清的，请告诉我。

谢谢！

**编辑：**我已经开始考虑是否可以编写一个缓动函数，每次左/上减少 1 时将宽度/高度增加 2 以使其始终保持居中，但我不确定如何在 jQuery 中解决这个问题。我试着弄乱函数的`step`参数，`animate`但我不知道如何强制左/上属性仅增加/减少整数值（整数）......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T01:43:25.733

你总是可以尝试 CSS3 动画，但是它有一个很大的问题，IE9 不支持它......

但是它非常顺利，请在此处查看结果：http: [//jsfiddle.net/YSJQu/](http://jsfiddle.net/YSJQu/)

```
#outer img {
    (...)
    animation:zoom 5s;
    -moz-animation:zoom 5s; /* Firefox */
    -webkit-animation:zoom 5s; /* Safari and Chrome */
    -o-animation:zoom 5s; /* Opera */
}

@keyframes zoom {
    from { transform:scale(1) }
    to { transform:scale(1.2) }
}
@-moz-keyframes zoom {
    from { -moz-transform:scale(1) }
    to { -moz-transform:scale(1.2) }
}
@-webkit-keyframes zoom {
    from { -webkit-transform:scale(1) }
    to { -webkit-transform:scale(1.2) }
}
@-o-keyframes zoom {
    from { -o-transform:scale(1) }
    to { -o-transform:scale(1.2) }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:56:59.527

动画一直是 HTML 中的难点。一些解决方案在台式机上运行顺畅，但在移动设备上运行不那么顺畅，反之亦然，它们在不同浏览器中的表现通常也不同。

如果您来自 Flash 背景，我可以轻松推荐[GSAP JS](http://www.greensock.com/gsap-js/)。它将比 jQuery执行*得更好。*它基于 javascript，并且对于 JS 和 AS 具有几乎相同的语法。

它们还提供了很好的[速度测试](http://www.greensock.com/js/speed.html)。也许你想试试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T02:06:20.577

[**jsFiddle DEMO**](http://jsfiddle.net/pRup7/)第二个例子

处理缩放要求的一个很棒的 jQuery 库是[**.transit() 插件**](http://ricostacruz.com/jquery.transit/)。

```
$(".thumbnail-1").hover(
    function () {
     $(this).stop(true,true).transition({ scale: 1.3 });
  }, 
    function () {
    $(this).stop(true,true).transition({ scale: 1.0 });
  }
); 
```

# javascript - 如何用纯 JavaScript 编写这个 JQuery 函数？

> ID：14289018
> 
> 赞同：1
> 
> 时间：2013-01-12T00:50:48.837
> 
> 标签：javascript

你能帮我以最有效的方式用纯 JavaScript 编写这个函数吗？

```
//Selects all elements matched by <input> that have a name value 
//exactly equal to myname.
$("input[@name=myname]") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T00:55:27.983

```
var els = document.getElementsByTagName("input"),
    arr = [];

for (var i = 0, l = els.length; i < l; i++) {
    if (els.name === "myname") {
        arr.push(els);
    }
}

console.log(arr); 
```

或者对于现代浏览器：

```
var arr = document.querySelectorAll("input[name='myname']");
console.log(arr); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T00:58:25.063

这是你想要的：

```
document.getElementsByName("myname"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T00:56:01.150

假设表单中的每个元素都有一个唯一的名称，这种方法是最快的：

```
var element = document.MyForm.getElementsByName('myname')[0]; 
```

`document.querySelectorAll()``name`如果由不同标签的元素共享可能会更快，但[支持有限](http://caniuse.com/queryselector)。

# regex - 如果一个字符跟随另一个字符，我不想要匹配，这是可选的

> ID：14289022
> 
> 赞同：0
> 
> 时间：2013-01-12T00:51:38.877
> 
> 标签：regex, perl, string-matching

我想匹配“错误”的任何变体（假设全面不区分大小写），它后面可能有也可能没有字符，可能有也可能没有“s”。

例如，如果它具有以下内容，则返回匹配的行：

```
text error: more text
text error more text
text errors more text
text errors( more text
text errors: more text
text errors:more text 
```

但是如果后面有一个等号，我不希望它返回该行。例如：

```
text errors= more text 
```

基本上，当“错误”或“错误”后面有一个“=”符号时，它总是“错误”。

我想不出更多的东西：

```
(?i)errors?[^\=] 
```

不区分大小写，字符 e、r、r、o、r，也许还有一个 s，后面不跟一个“=”是我的阅读方式。

```
1 sample text, more text, errors=123456 more text more text
2 drops=0 link status good errors=0 adapter
3 Error: process failed to start
4 process [ERROR] failed
5 this line might have both ERROR and error=5555 and more text
6 there might be a line that has error=0x02343329 ERROR and more text 
```

我希望返回第 3、4、5 和 6 行，而不是 1 或 2。

没有成功。我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:32:17.193

这么多答案，所有答案都如此接近。你想要的是这样的：`/error(?!s=)/im`

您不需要使用内联组，而是使用 /i 标志。

我可能误解了你的问题，我不确定。但是，如果您也想禁止`error=blah`，只需使用即可`/error(?!s?=)/im`。

演示+说明：[http ://regex101.com/r/oE1eQ9](http://regex101.com/r/oE1eQ9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:24:06.140

所以你想匹配“error”，只要它后面没有“=”或“s=”。这很简单：

```
/error(?!=|s=)/ 
```

你甚至可以把它写成

```
/error(?!s?=)/ 
```

如果你真的想尽可能匹配“错误”（为了设置`${^MATCH}`或其他东西），你可以使用

```
/error(?![s=])|errors(?!=)/ 
```

您遇到问题是因为`[^=]`// 匹配“ `s`”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:55:25.750

尝试使用前瞻断言：

```
(?i)errors?(?!\=) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T00:58:29.900

逻辑 OR 怎么样？

```
(?i)error[^s=]|errors[^=] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T01:29:45.530

尝试：

```
(?i)\berror(?!s?=) 
```

单词锚点，后跟`error`，只要它后面不跟可选的`s`然后是等号。

`(?!...)`是一个否定的前瞻，并且在它不消耗文本的意义上也是一个锚（像`^`and ）（它是一个零宽度的断言）。`$`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T03:06:50.327

哦亲爱的。很多人认为他们知道正则表达式！

在你自己的正则表达式`(?i)errors?[^\=]`中（正如有人所说，`=`不需要转义，但它没有害处）`[^\=]`并不完全意味着“后面没有等号”，它的意思是“后面跟着一个不是等号的字符”。`error`除非在字符串末尾，否则两者相同，因此`'error' =~ (?i)errors?[^\=]`返回 false。

“不后跟等号”需要负前瞻，所以乍一看它看起来像你想要`(?i)errors?(?!=)`的，但如果正则表达式引擎发现`errors=`它会回溯并尝试在没有可选的情况下进行匹配`s`，看看它是否可以获得整个模式以这种方式匹配，然后会成功，因为`errors`后面`error`没有等号。

要解决此问题，您需要无回溯结构`(?>...)`，一旦找到匹配项，就不允许回溯。正则表达式可以满足`(?i)(?>errors?)(?!=)`您的需要。

最后，为了允许在“不久之后”拒绝等号，`error`或者`errors`在它之前需要一些可选的空格，给`(?i)(?>errors?)(?!\s*=)`.

这个程序演示

```
use strict;
use warnings;

while (<DATA>) {
  chomp;
  printf "%-70s %s\n", $_, /(?i)(?>errors?)(?!\s*=)/ ? 'YES' : 'NO';
}

__DATA__
text error: more text
text error more text
text errors more text
text errors( more text
text errors: more text
text errors:more text
text errors= more tex
text errors = more tex
text error= more tex
text error = more tex
1 sample text, more text, errors=123456 more text more text
2 drops=0 link status good errors=0 adapter
3 Error: process failed to start
4 process [ERROR] failed
5 this line might have both ERROR and error=5555 and more text
6 there might be a line that has error=0x02343329 ERROR and more text 
```

**输出**

```
text error: more text                                                  YES
text error more text                                                   YES
text errors more text                                                  YES
text errors( more text                                                 YES
text errors: more text                                                 YES
text errors:more text                                                  YES
text errors= more tex                                                  NO
text errors = more tex                                                 NO
text error= more tex                                                   NO
text error = more tex                                                  NO
1 sample text, more text, errors=123456 more text more text            NO
2 drops=0 link status good errors=0 adapter                            NO
3 Error: process failed to start                                       YES
4 process [ERROR] failed                                               YES
5 this line might have both ERROR and error=5555 and more text         YES
6 there might be a line that has error=0x02343329 ERROR and more text  YES 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-12T01:25:23.790

零宽度前瞻是一个很好的答案。尝试：

```
 (?i)(?!errors?=)error 
```

其中“ `(?!errors?=)`”的意思是“向前看以检查它是否与“错误？=”不匹配。

更新：这是为了解释问题中原始正则表达式`(?i)errors?[^\=]`的一个问题：复杂性是“贪婪”（man perlre）如何以及何时不像它可能的那样贪婪，引用：

> 默认情况下，量化的子模式是“贪婪的”，也就是说，它会尽可能多地匹配（给定一个特定的起始位置），同时仍然允许模式的其余部分匹配。

注意句子的第二部分。原始表达式`(?i)errors?[^\=]`将匹配“errors=”（或“errors”），因为“s?” 允许匹配0次以允许“[^=]”匹配“s”。这就是为什么它匹配 6 个编号的行。

当这样的匹配（*、+、？和其他）被拒绝时，正则表达式引擎内部发生的事情称为“回溯”，匹配备份并尝试不同的路径以查看是否可以更好地匹配*整个*正则表达式。独立子表达式 (?>)、环视 (?=) (?!) 及其否定形式可以防止或限制回溯，就像使用交替一样，似乎每个人都有不同的偏好，因为我认为它们中的大多数都出现在某个地方。尽管到目前为止似乎没有人使用“占有” ?+ 形式对您的原始正则表达式进行最小的无回溯更改：

```
errors?+[^\=] 
```

# jquery - 内容在立方体下方移动

> ID：14289027
> 
> 赞同：0
> 
> 时间：2013-01-12T00:52:31.900
> 
> 标签：jquery, html, css, twitter-bootstrap

你能告诉如何使内容固定。我的意思是当我在大屏幕上看到它时用户调整窗口大小时内容不应该低于立方体图像当我在像 13 英寸这样的小屏幕笔记本电脑中看到它时它没有问题它的问题提供下面的代码

[http://jsfiddle.net/AJ5JW/](http://jsfiddle.net/AJ5JW/)

```
<section id="main" style="padding: 0px;">
            <div class="inner clearfix defieContainer" style="">
              <img alt="cube" class="cubeImage" src="http://www.defie.co/designerImages/cube.png">
                  <div class="defieHomepageContent">
                    <span style="color: #06546a; font-weight: bold; font-size: 14px;  ">Defie Cloud Buisness Solutions</span> helps companies of all sizes to enhance business operation, to refine the process and optimize technology, to reduce company 
                    expenses on IT maintenance, Hardware upgrade. And more importantly, to change 
                    the way businesses operate.
                    <div id="primary">
                      <section class="primary">
                        We Offer:
                        <ul class="homePageLists" style="">
                            <li style="padding-bottom: 5px; list-style: none; ">
                              <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                                 All-in-One Business Management Solutions
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; ">
                              <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                              Cloud-based File Management
                            </li>
                            <li style="padding-bottom: 5px; list-style: none; ">
                              <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                              Real-Time Access from any where, any time and on any devices
                            </li>
                        </ul>
                      </section>
                    </div>
                  </div>
            </div>
        </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:02:50.470

我在浏览器中查看了您的代码，内容没有在框上方移动，我正在从 23 英寸显示器查看，即使我调整它的大小，它也不会显示在框下方。

# php - 简单的mysql选择错误限制

> ID：14289031
> 
> 赞同：0
> 
> 时间：2013-01-12T00:53:10.120
> 
> 标签：php, mysql, sql

这是错误消息和我的代码。我只是没有看到错误。

描述：

```
您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'key='cbd1f3bb822e8617b624301774287490d3fcd97e' LIMIT 1' 附近使用正确的语法

```

询问：

```
SELECT * 
FROM wp_wpsc_api_keys 
WHERE name='MichelleAllen17' 
AND key='cbd1f3bb822e8617b624301774287490d3fcd97e' 
LIMIT 1 
```

欢迎任何关于我的 sql 中可能出现的问题的想法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T00:54:19.973

`KEY`是保留关键字，必须用反引号转义。

```
SELECT  * 
FROM    wp_wpsc_api_keys 
WHERE   name = 'MichelleAllen17' AND 
        `key` = 'cbd1f3bb822e8617b624301774287490d3fcd97e' 
LIMIT   1 
```

*   [MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:55:17.560

在字段名称周围加上反引号

```
...where `name`=... `key` 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T01:00:13.057

作为反引号的替代方案，另一种“最佳实践”模式是使用 table_name 或方便的表别名来限定所有列名，例如

```
SELECT t.*
  FROM wp_wpsc_api_keys t 
 WHERE t.name='MichelleAllen17'
   AND t.key='cbd1f3bb822e8617b624301774287490d3fcd97e'
 LIMIT 1 
```

这可以防止 MySQL 将列名“key”视为保留字。

让我们明确一点：查询中的问题不在于缺少反引号……问题是 MySQL 将查询文本中的标记（在本例中为“键”）视为保留字，而不是名称的列。解决方案是防止 MySQL 将该标记视为关键字。使用反引号是实现此目的的一种方法，但不是必需的。

使用反引号是完全有效的，并且可以与限定列名一起完成。当列名包含空格或特殊字符时，需要使用反引号。这是相同的查询，表名和列名用反引号括起来：

```
SELECT t.*
  FROM `wp_wpsc_api_keys` t 
 WHERE t.`name`='MichelleAllen17'
   AND t.`key`='cbd1f3bb822e8617b624301774287490d3fcd97e'
 LIMIT 1 
```

我只是碰巧发现不得不查看或键入不必要的反引号很烦人。即使不是必需的，使用击键（对我来说）使列名合格（“ `t.`”）更有用，因为我习惯于在有多个表时看到列名合格一个查询（对于很多非常有用的查询来说，这经常发生。）

# asp.net - 使用 datepicker 控件 ASP.NET VB 中的值更新数据库

> ID：14289033
> 
> 赞同：0
> 
> 时间：2013-01-12T00:53:16.097
> 
> 标签：asp.net, vb.net, formview

对于可能是新手的问题，请提前道歉。（asp.net 新手，VB 编码，最佳控件零知识）。请尊重我对 AJAX 控件或使用 MVC 并尝试最小化 javascript 不感兴趣。就技术而言，我需要做的事情非常简单。

我正在开发一种允许用户编辑数据库数据的表单。我选择使用 FormView，这样我就可以像传统的 vba 应用程序一样对其进行格式化。如果我允许 VWD 自动格式化控件，我可以将数据源设置为我的数据库表，并且数据库中的值会成功显示。我也可以使用此表单编辑数据库中的所有内容。

然而，老板讨厌输入日期。

我无法找到具有数据源功能的日期选择器控件，该控件的工作方式类似于在 formview 中自动构建的文本框（绑定到数据源功能）。所以，我假设不存在。我需要一些保证，我*认为*我需要做的是正确的方法。

而不是通过前端自动的东西使用 FormView 控件的数据源，我应该改为

*   放置这些数据选择器控件之一，这些控件只是将日历与表单视图中所有日期字段的文本框结合起来（不尊重那些构建它们的人，只是不敢相信它们没有更丰富的功能，这似乎非常需要给出数字可用的日期选择器）
*   在 Page_Load 中声明我的数据源并加载所有控件（如果它们具有使用 FindControl 的现有数据）
*   使用 Data_Bound 块利用 FindControl 从每个控件中检索选定的值，并为 Update 构建动态 SQL 字符串
*   使用块后面的代码之一声明和更新我的数据库，可能在 DataBound 中

我在正确的轨道上吗？我没有经验可以对我的假设充满信心。拜托，如果有更简单的方法，我会接受，但我必须让它“漂亮”。欢迎提出任何形式的控制建议。

---进一步了解我的问题这里有一些代码证明我实际上已经尝试解决这个问题......在我的 FormView 代码块中，我有：

```
<asp:FormView ID="FormView1" runat="server" DataKeyNames="MASTERID_Action" 
    DataSourceID="srcAction">
<EditItemTemplate>
MASTERID_Action:
<asp:Label ID="MASTERID_ActionLabel1" runat="server" 
Text='<%# Eval("MASTERID_Action") %>' />
<br />
Action_Description:
<asp:TextBox ID="Action_DescriptionTextBox" runat="server" 
Text='<%# Bind("Action_Description") %>' />
<br />
Action_Target:
<asp:TextBox ID="Action_TargetTextBox" runat="server" 
Text='<%# Bind("Action_Target") %>' />
<br />
Action_Captured:
<asp:TextBox ID="Action_CapturedTextBox" runat="server" 
Text='<%# Bind("Action_Captured") %>' />
<br />
Action_Declined:
<asp:TextBox ID="Action_DeclinedTextBox" runat="server" 
Text='<%# Bind("Action_Declined") %>' />
<br />
Action_AgreedDate:
<ewc:CalendarPopup ID="CalendarPopup1" runat="server" Culture="en-AU" 
PostedDate="" SelectedDate='<%# Bind("Action_AgreedDate") %>' 
SelectedValue="01/14/2013 08:47:54" UpperBoundDate="12/31/9999 23:59:59" 
VisibleDate="01/14/2013 08:47:54" />
<br />
         ...
</EditItemTemplate> 
```

我的数据库将此 Action_AgreedDate 保存为可为空。当我查看 ItemTemplate（在浏览器中）时，日期显示为 0.000（因为它是一个文本字段并绑定到 Action_AgreedDate，没有发生错误），当我单击编辑转到 EditItemTemplate 时，我收到此错误：从类型转换键入“日期”的 DBNull' 无效。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidCastException：从“DBNull”类型到“Date”类型的转换无效。

源错误：

第 95 行：
第 96 行：Action_AgreedDate：第 97 行：' 第 99 行：SelectedValue="01/14/2013 08:47:54" UpperBoundDate="12/31/9999 23:59:59"

我可以很容易地将其翻译为“控件找到了一个空字段并且不知道如何处理它”；问题是，我不知道该怎么办。我已经检查了该字段的属性（CalendarPOP 字段以查看是否有处理空值的设置，但对我来说没有什么明显的。我目前正在尝试在线查找有关控件的更多文档。（我已经联系了 eWorld 和希望他们能够回应。）

我还应该补充一点，如果我请求一条已经有 Action_AgreedDate 的记录，我不会收到任何错误，因为数据库中存在一个值供控件显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:15:14.840

我认为最好的方法是使用[jQuery](http://jquery.com/)和[jQuery UI](http://jqueryui.com/)，它们有一个[日期选择器](http://jqueryui.com/datepicker/)，可以附加到 FormView 中的常规 ASP.NET 文本框。因此，如果您的 FormView 代码看起来像这样，例如：

```
 <asp:FormView ID="FormView1" runat="server" DataKeyNames="id" DataSourceID="SqlDataSource1">
        <EditItemTemplate>
            id:
            <asp:Label ID="idLabel1" runat="server" Text='<%# Eval("solution_id") %>' />
            <br />
            date_modified:
            <asp:TextBox ID="date_modifiedTextBox" runat="server" Text='<%# Bind("date_modified") %>' />
            <asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" CommandName="Update" Text="Update" />
            <asp:LinkButton ID="UpdateCancelButton" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" />
        </EditItemTemplate>
        <ItemTemplate>
            id:
            <asp:Label ID="idLabel" runat="server" Text='<%# Eval("solution_id") %>' />
            <br />
            date_modified:
            <asp:Label ID="date_modifiedLabel" runat="server" Text='<%# Bind("date_modified") %>' />
        </ItemTemplate>
    </asp:FormView> 
```

您可以使用 jQuery UI 运行类似的东西来获取 date_modified 文本框上的日期选择器：

```
$('[id$=date_modifiedTextBox]').datepicker() 
```

该`$('[id$=date_modifiedTextBox]')`部分是使用 jQuery 选择 ASP.NET 控件所必需的，如果它只是一个普通元素，您可以使用`$('.className')`或`$('#id')`类似的东西。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:03:59.310

问题解决了。

我在 4GuysFromRolla.com 上看到一篇关于 RJS POP 日历的文章 (http://preview.tinyurl.com/cerm9xv)，它勾选了所有方框。成功实现了，因为日历和指定的文本框是分开的，所以不用绑定！它工作得很好。4GuysFromRolla 又一次救了我的培根……

# c# - 如何在 .NET 2.0/Windows 上使用 MonoDevelopo 编译 LINQBridge

> ID：14289034
> 
> 赞同：1
> 
> 时间：2013-01-12T00:53:19.297
> 
> 标签：c#, compiler-construction, mono, monodevelop

我无法使用 MonoDevelop 为 .NET 2.0 编译 LINQBridge。主要问题是 MD 在框架和编译器版本之间存在关联。我想做的是在2.0框架上使用3.0版本的编译器，用MD可以吗？顺便说一句，它可以在 VS2008 和 SharpDevelop 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:33:35.057

在 MonoDevelop 中，右键单击您的**项目**（不是您的解决方案），然后单击“选项”。转到“构建”下的“常规”并更改“目标框架”下拉列表下的框架。

您可以从那里编译大多数框架！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:22:03.550

这是一个众所周知的 MonoDevelop 问题（xbuild 没有这个错误），

[https://bugzilla.novell.com/show_bug.cgi?id=566247](https://bugzilla.novell.com/show_bug.cgi?id=566247)

必须等到某一天 MonoDevelop 家伙修复它。

# javascript - 如何替换换行符？

> ID：14289035
> 
> 赞同：0
> 
> 时间：2013-01-12T00:53:25.537
> 
> 标签：javascript

我正在尝试用 javascript 中的逗号替换换行符，但代码似乎不起作用。

```
var data = "Series
Manga
Games
Artbooks
Visual Novels"
var output = data.replace(/(\r\n|\n|\r)/gm,",");
alert(output); 
```

在这里你可以看到一个在线版本[http://jsfiddle.net/CBvpS/](http://jsfiddle.net/CBvpS/) 有人知道如何修复它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T00:57:33.563

当您的输入字符串在语法上正确时效果很好：

```
var data = "Series\nManga\nGames\nArtbooks\nVisual Novels"
var output = data.replace(/\r?\n/gm,",");
alert(output); 
```

[http://jsfiddle.net/7V8rg/1/](http://jsfiddle.net/7V8rg/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:57:03.330

Javascript 没有像 php 那样的多行变量，除非您手动 escape( `\`) 行尾。此外，这不算作换行，因此您也必须插入`\n`s 来修复它。否则，[您的代码可以正常工作](http://jsfiddle.net/Daedalus/CBvpS/1/)，尽管有一些小的修改。

```
var data = "Series\n \
Manga\n \
Games\n \
Artbooks\n \
Visual Novels";
var output = data.replace(/(\r\n|\n|\r)/gm,",");
alert(output); 
```

但是请注意，如果您的数据来自示例，输入文本区域，您当然不必担心转义行尾，它会按应有的方式处理数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T00:57:09.553

JavaScript 不允许您继续使用新行的字符串，除非您在行尾添加反斜杠。例如：

```
var string = "a \
string is \
here"; 
```

话虽如此，如果您从其他来源检索了一些文本并想要替换新行，那么您应该只需要这样的东西：

```
string = string.replace(/\n/g, ','); 
```

# c# - 将 LINQ 与连接和新对象选择子句一起使用会导致异常

> ID：14289043
> 
> 赞同：1
> 
> 时间：2013-01-12T00:54:49.080
> 
> 标签：c#, .net, linq, sqlite, exception-handling

我正在使用一个 SQLite 数据库，其中有一个表 Activity(Id, Name)、一个表 Craft(Id, Name) 和一个链接这两个 ActivityCraft(Id, activity_ref,craft_ref, Paired) 的表。

使用的上下文：

```
public DbSet<Activity> Activities { get; set; }
public DbSet<Craft> Crafts { get; set; }
public DbSet<ActivityCraft> ActivityCrafts { get; set; } 
```

我正在尝试为 ActivityCraft 中的所有活动条目找到特定工艺的“配对”值。

以下查询返回 ActivityCraft 表中提到的特定工艺的活动列表

```
var query2 = from a in context.Activities
             join ac in context.ActivityCrafts on a.Id equals ac.activity_ref
             where ac.craft_ref == SelectedCraftId
             select a; 
```

但是需要的是 Activity.Name 和 ActivityCraft.Paired 所以我尝试了以下失败

```
var query = from a in context.Activities
            join ac in context.ActivityCrafts on a.Id equals ac.activity_ref
            where ac.craft_ref == SelectedCraftId
            select new
            {
                xN = a.Name,
                xP = ac.Paired
            }; 
```

似乎在查询执行时简单地更改选择子句会导致异常。

> 调用的目标已抛出异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:43:35.543

我正在回答，但感谢 abatishchev 和 casperOne 的婴儿床。

问题是由于使用 BOOLEAN 作为 Paired 列的类型。SQLite 没有本机 BOOLEAN 类型，它使用 INT - 这在构建匿名类型时也会导致问题。

我通过将 Db 类型更改为 INTEGER 并更改值来解决问题。

我确实尝试将 BOOLEAN 保留在 Db 中，并使用 long 作为等效的 c# 类型。这不起作用，我不确定为什么，但它仍然给出构造错误，就好像它试图从“true”/“false”字符串创建类型 long。
注意：SQLite 文档说 BOOLEAN 在内部存储为 INTEGER 值或 0 或 1

# javascript - 如何将 JSON 字符串转换为具有不同结构的 JSON 字符串

> ID：14289044
> 
> 赞同：2
> 
> 时间：2013-01-12T00:54:54.860
> 
> 标签：javascript, json

我正在构建一个应用程序，其中从第三方系统检索数据作为 JSON 字符串。我需要将此 JSON 字符串转换为具有不同结构的另一个 JSON 字符串，以便它可以与内部 Javascript 库中定义的预先存在的函数一起使用。

理想情况下，我希望能够使用 Javascript 在客户端计算机上执行此转换。

我已经将 JSONT 视为实现此目的的一种手段，但该项目似乎没有得到积极维护：

[http://goessner.net/articles/jsont/](http://goessner.net/articles/jsont/)

有没有事实上的方法来实现这一目标？还是我必须推出自己的映射代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:07:07.480

您不应该将 JSON 传递到内部 JavaScript 库中。您应该将 JSON 解析为 JS 对象，然后对其进行迭代，将其转换为新格式

例子

```
var json = '[{"a": 1:, "b": 2}, {"a": 4:, "b": 5}]';
var jsObj = JSON.parse(json);
// Transform property a into aa and property b into bb
var transformed = jsObj.map(function(obj){
    return {
       aa: obj.a,
       bb: obj.b
    }
});

// transformed = [{aa:1, bb:2},{aa:4, bb:5}]

If you really want JSON you'd just call JSON.stringify(transformed) 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

这是另一个更复杂转换的答案[如何用标准 json 制作 jquery Datatable 数组？](https://stackoverflow.com/questions/14209408/how-to-make-a-jquery-datatable-array-out-of-standard-json/14209703#14209703)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T01:15:23.743

另一种选择是使用 XSLT。由于 JSON 有 SAX 读取器和写入器，因此您可以愉快地使用带有 JSON 的 XSLT 编写。没有可怕的 JSON 到 XML 并且需要继续进行反向转换。见：[http ://www.gerixsoft.com/blog/json/xslt4json](http://www.gerixsoft.com/blog/json/xslt4json)

我绝对可以看到使用基于 XML 的语言转换 JSON 的讽刺意味——但这似乎是一个不错的选择。

否则，您可能最好编写自己的映射代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T01:06:31.703

从主页上我可以看出，JSONT 项目是关于将 JSON 转换为完全不同的格式（即 JSON => HTML）。

编写自己的映射代码会简单得多，可能只是作为`from_json()`您正在创建的对象的方法（因此`YourSpecialObject.from_json(input);`返回从 JSON 数据生成的该对象的实例）。

根据您的问题，我不确定这是否适合您的用例，但希望其他人很快会有更好的答案。

# junit - 如何使用 PowerMockito 模拟静态方法？

> ID：14289056
> 
> 赞同：4
> 
> 时间：2013-01-12T00:56:59.520
> 
> 标签：junit, mockito, powermock

我在用：

```
 <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-api-mockito</artifactId>
        <version>${powermock.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-module-junit4</artifactId>
        <version>${powermock.version}</version>
        <scope>test</scope>
        <exclusions>
            <exclusion>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

我正在尝试使用以下调用测试一段代码：

```
final KeyPairGenerator kpg = KeyPairGenerator.getInstance(KEY_PAIR_ALGORITHM, DEFAULT_PROVIDER); 
```

这两个常量是字符串类型，所以我调用：

```
java.security.KeyPairGenerator.getInstance(String algorithm, String provider) 
```

我试过了：

```
import static org.mockito.Mockito.when;

import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mockito;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest(KeyPairGenerator.class)
public class TestClass {

    private static final String DEFAULT_PROVIDER = "BC";
    private static final String KEY_PAIR_ALGORITHM = "RSA";

    @Test
    public void test() throws NoSuchAlgorithmException, NoSuchProviderException {
        final KeyPairGenerator kpg = Mockito.mock(KeyPairGenerator.class);
        PowerMockito.mockStatic(KeyPairGenerator.class);
        when(KeyPairGenerator.getInstance(KEY_PAIR_ALGORITHM, DEFAULT_PROVIDER)).thenReturn(kpg);
    }
} 
```

我尝试过替换`when(KeyPairGenerator.getInstance(KEY_PAIR_ALGORITHM, DEFAULT_PROVIDER)).thenReturn(kpg);`，`PowerMockito.doReturn(kpg).when(KeyPairGenerator.class);`但似乎都没有让我到达我想要的地方，因为我仍然得到 NoSuchProviderException。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T17:40:49.937

您可能想尝试更改您的行 @PrepareForTest 语句。

从：

```
@PrepareForTest(KeyPairGenerator.class) 
```

到：

```
@PrepareForTest(ClassThatCallsTheStaticMethod.class) 
```

# c# - 按回车/回车键时文本框编辑不结束

> ID：14289058
> 
> 赞同：0
> 
> 时间：2013-01-12T00:57:01.847
> 
> 标签：c#, windows-phone-7, textbox

我在我的页面上添加了一个文本框，当我点击它时，键盘会显示出来，我可以编辑它的内容，但是当我点击键盘上的 ENTER/RETURN 按钮时，编辑不会停止。如何结束它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:45:55.507

如果按下的键是 Key.Enter，您应该监听和关注其他控件的`KeyUp`事件。`TextBox`

# php - Joomla - 通过 MVC 组件模型获取表时间戳

> ID：14289066
> 
> 赞同：0
> 
> 时间：2013-01-12T00:57:39.330
> 
> 标签：php, mysql, joomla

我正在尝试从 joomla 表中获取最后修改的时间戳。我试图通过一个模型函数来拉它。

```
function timeStamp() {
    $db = JFactory::getDBO();
    $query = "
        SELECT UPDATE_TIME
            FROM   information_schema.tables
            WHERE TABLE_SCHEMA = 'singleprop'
            AND TABLE_NAME = 'jos_mls'";
    $db->setQuery($query);
    $timestamp = $db->loadResult();
    return $timestamp;
} 
```

Joomla 是否提供了一种在我尝试做的之外的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:10:41.120

你可以这样做：[https](https://github.com/joomla/joomla-platform/blob/staging/libraries/joomla/database/query.php#L726) ://github.com/joomla/joomla-platform/blob/staging/libraries/joomla/database/query.php#L726 即getCurrenttimestamp()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:19:31.507

答案是这样的：

```
function timeStamp() {
    $db = JFactory::getDBO();
    $query = "
        SELECT information_schema.`TABLES`.UPDATE_TIME
            FROM information_schema.`TABLES`
            WHERE information_schema.`TABLES`.TABLE_NAME =  'jos_mls';";
    $db->setQuery($query);
    $timestamp = $db->loadResult();
    return $timestamp;
} 
```

# javascript - 在 div 上提交带有 onclick 的表单

> ID：14289067
> 
> 赞同：1
> 
> 时间：2013-01-12T00:58:07.233
> 
> 标签：javascript, forms, onclick

```
<div onclick="javascript:document.form5577.submit(); return false">
<form action="https://www.url.com/" method="post" id="form5577">
Blah
</form>
</div> 
```

我在我的 ASP.NET 站点上有这个，并尝试了一些我见过的变体（包括将 div 放在表单中），但我无法让它工作。它只是一个需要在点击时提交表单的 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:59:54.177

```
<div onclick="javascript:document.getElementById('form5577').submit();">
<form action="https://www.url.com/" method="post" id="form5577">
Blah
</form>
</div> 
```

# ocaml - 如何在数组和字符串上编写仿函数？

> ID：14289069
> 
> 赞同：3
> 
> 时间：2013-01-12T00:58:12.953
> 
> 标签：ocaml

我想使用以下签名使我的代码在字符串和数组（实际上是任何可索引类型）上通用：

```
module type Indexable = sig
  type 'a t
  val get : int -> 'a t -> 'a
end 
```

`module MyCode (I : Indexable) = struct ... end`

但当然我不能将我的签名应用于字符串，如下所示：

```
module StrMyCode = MyCode(struct
  type 'a t = string
  let get i a = a.[i]
end) 
```

有没有办法解决这个问题？或者也许是一种不同的方法？我知道我可以在最坏的情况下使用字符数组，但我宁愿将我的代码从丑陋的演员中拯救出来，这是我之前想到的事情，所以我想得到一个明确的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T11:49:03.470

GADT 可以与函数化方法一起使用：

```
module type Indexable = sig
  type 'a t
  val get: int -> 'a t -> 'a
end

module MyCode(I:Indexable) = struct
 let head x = I.get 0 x
end 
```

数组当然可以简单地制作`Indexable`：

```
module IndexableArray = struct
  type 'a t = 'a array
  let get i x = x.(i)
end 
```

对于字符串，您可以只使用带有单个构造函数的 GADT。但是请注意，您必须为 get 放置一些类型注释以强制多态类型（否则，推断的类型是`int -> char t -> char`）：

```
module IndexableString = struct
  type 'a t = String: string -> char t
  let of_string s = String s
  let get: type a. int -> a t -> a =
    fun i s -> match s with String s -> s.[i]
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T01:31:19.787

这是我使用 GADT 制作的东西。我只是绕着他们转，所以这里可能有点不对劲。但据我所知，它似乎有效（使用 OCaml 4）：

```
type _ indexable =
    | A : 'a array -> 'a indexable
    | C : string -> char indexable

let index (type s) (x: s indexable) i : s =
    match x with
    | A a -> a.(i)
    | C s -> s.[i]

let main () =
    let x = A [| 1; 2 |] in
    let y = C "abc" in
    Printf.printf "%d\n" (index x 0);
    Printf.printf "%c\n" (index y 1) 
```

如果我加载到顶层，我会得到这个：

```
val index : 'a indexable -> int -> 'a = <fun>
val main : unit -> unit = <fun>
# main ();;
1
b
- : unit = ()
# 
```

这可能不像您正在寻找的那样普遍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T01:37:13.070

如果将可索引的元素类型声明为单独的类型，则可以执行以下操作：

```
module type Indexable = sig
  type t
  type elt
  val get : int -> t -> elt
end

module IndexableString : Indexable = struct
  type t = string
  type elt = char
  let get i a = a.[i]
end

module MyCode (I : Indexable) = struct
  (* My code implementation *)
end

module StrMyCode = MyCode(IndexableString) 
```

对于数组，您可以或多或少地做同样的事情：

```
module ArrayIndexable = struct
    type elt = char
    type t = char array
    let get i a = a.(i)
end 
```

现在，如果您希望保留数组的一些灵活性，您可以将上面的内容更改为仿函数：

```
module ArrayIndexable (E : sig type e end) : Indexable with type elt = E.e =
struct
    type elt = e
    type t = elt array

    let get i a = a.(i)
end 
```

它比您正在寻找的多态版本更冗长，但它可以让您统一编码两种“可索引”类型。

# spring-mvc - 弹簧：网址不起作用

> ID：14289077
> 
> 赞同：1
> 
> 时间：2013-01-12T00:58:58.433
> 
> 标签：spring-mvc

我有一个无法加载视图名称的标签。我的 servlet 上下文是测试。我定义了网址：

```
<spring:url var="editContactUrl" value="/next" /> 
```

下面是标签：

```
 <a href="${editContactUrl}">Try Again</a> 
```

我得到的只是 spring:url 中的值（“/next”）被忽略的 servlet 上下文，如下所示：

```
http://localhost:8080/test 
```

有人可以启发我吗？谢谢。哦，是的，我还尝试在 spring:url 中指定上下文并得到相同的结果。

编辑：我要做的只是将引用路由到控制器，即：

```
@Controller
@RequestMapping("/*")
public class HomeController {

private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

@RequestMapping(value = "/next", method = RequestMethod.GET)
public String next(Locale locale, Model model) {
    logger.info("Welcome home! The client locale is {}.", locale);

    Date date = new Date();
    DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG,   DateFormat.LONG, locale);

    String formattedDate = dateFormat.format(date);

    model.addAttribute("serverTime", formattedDate );

    return "next";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:05:25.477

我不清楚你为什么使用

```
@RequestMapping("/*") 
```

你是控制器类。在类级别，您应该定义基本路径。在方法级别，您应该改进更具体的映射。但是请尝试：

```
@RequestMapping("/") 
```

此外，您可以尝试使用：

```
<c:url var="editContactUrl" value="/next"/> 
```

代替：

```
<spring:url var="editContactUrl" value="/next"/> 
```

它应该提供类似的功能。

# javascript - phonegap 在本地文件系统中保存订单

> ID：14289079
> 
> 赞同：0
> 
> 时间：2013-01-12T00:59:08.327
> 
> 标签：javascript, jquery, ajax, json, cordova

嗨，我正在使用 phonegap 开发购物应用程序。我想给用户一个选项来保存他们的订单并在他/她觉得方便时完成。我的问题我在哪里保存订单数据。移动设备的本地文件系统或本地数据库？我想将订单以 json 格式保存在本地文件中。请为我建议最好的选择。一个片段也将受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:36:27.077

您还可以使用[HTML5 localStorage](http://diveintohtml5.info/storage.html)作为文件存储的更简单替代方案。我一直在使用 localStorage 的封装版本来促进 get/set 操作并减少命名空间污染。请参阅下面的代码库：

```
/**
 * The class is designed to facilitate flexible permanent storage of key value
 * pairs utilzing HTML5 localStorage.
 *
 * @class LocalMap
 * @author Zorayr Khalapyan
 * @version 10/25/2012
 */
var LocalMap = function ( name ) {
    var that = {};

    //Prevent compatability issues in different execution environments.
    if ( !localStorage ) {
        localStorage = {};
    }

    if ( !localStorage[name] ) {
        localStorage[name] = "{}";
    }

    var setMap = function ( map ) {
        localStorage[name] = JSON.stringify( map );
    };

    that.getMap = function () {
        return JSON.parse( localStorage[name] );
    };

    /**
     * Stores the specified (key, value) pair in the localStorage
     * under the map's namespace.
     */
    that.set = function ( name, object ) {
        var map = that.getMap();
        map[ name ] = object;
        setMap( map );
    };

    that.get = function ( name ) {
        var map = that.getMap();
        return typeof( map[ name ] ) !== "undefined" ? map[name] : null;
    };

    that.importMap = function ( object ) {
        var map = that.getMap();
        var key;
        for ( key in object ) {
            if (object.hasOwnProperty(key)) {
                map[key] = object[key];
            }
        }
        setMap(map);
    };

    that.length = function () {
        var map = that.getMap();
        var size = 0, key;
        for (key in map) {
            if (map.hasOwnProperty(key)) size++;
        }
        return size;
    };

    that.erase = function () {
        localStorage[name] = JSON.stringify({});
    };

    that.isSet = function (name) {
        return that.get(name) != null;
    };

    that.release = function (name) {
        var map = that.getMap();
        if (map[name]) {
            delete map[name];
        }
        setMap(map);
    };

    that.deleteNamespace = function(){
        if (localStorage.hasOwnProperty(name)) {
            delete localStorage[name];
        }
    };

    return that;

};

LocalMap.destroy = function () {
    for ( var item in localStorage ) {
        if ( localStorage.hasOwnProperty( item ) ) {
            delete localStorage[ item ];
        }
    }
};

LocalMap.exists = function (name) {
    return (localStorage[name]) ? true : false;
}; 
```

下面是 get 和 set 函数的单元测试：

```
test( "Test set()", function() {
    var map = LocalMap('test-namespace');

    ///
    map.set("var-1", "val-1");
    map.set("var-2", "val-2");
    map.set("var-3", "val-3");
    //

    ok(map.isSet("var-1"), "A variable should be successful set.");
    ok(map.isSet("var-2"), "A variable should be successful set.");
    ok(map.isSet("var-3"), "A variable should be successful set.");
});

test( "Test get()", function() {
    var map = LocalMap('test-namespace');

    map.set("var-1", "val-1");
    map.set("var-2", "val-2");
    map.set("var-3", "val-3");

    ///
    var var1 = map.get("var-1");
    var var2 = map.get("var-2");
    var var3 = map.get("var-3");
    var var4 = map.get("var-4");
    //

    equal(var1, "val-1", "A set variable should be succesfully retreived.");
    equal(var2, "val-2", "A set variable should be succesfully retreived.");
    equal(var3, "val-3", "A set variable should be succesfully retreived.");
    equal(var4, null, "A variable that was not set should not be retreived.");
}); 
```

希望这会有所帮助，如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:11:53.457

How about the below code? I copied it [from here](https://stackoverflow.com/questions/14260127/is-there-a-free-lib-accessing-to-html5-database-sqlite/14270291#14270291). Actually I like its code.

```
// define dbContext & entities------------------------------------
var DemoDataContext = function () {
    nova.data.DbContext.call(this, "Demo", "1.0", "Demo DB", 1000000);

    this.users = new nova.data.Repository(this, User, "users");
    this.roles = new nova.data.Repository(this, Role, "roles");
};

DemoDataContext.prototype = new nova.data.DbContext();
DemoDataContext.constructor = DemoDataContext;

var User = function () {
  nova.data.Entity.call(this);
  this.name = "";
  this.password = "";
  this.birthYear = 1980;
  this.createdDate = new Date();
  this.deleted = false;
};
User.prototype = new nova.data.Entity();
User.constructor = User;

var Role = function () {
nova.data.Entity.call(this);
this.name = "";
this.createdDate = new Date();

};
Role.prototype = new nova.data.Entity();
Role.constructor = Role;
// end define dbContext & entities------------------------------------

// service methods----------------------------------------------------
function getAllUsers(callback) {
new DemoDataContext().users.toArray(function (users) {
    alert(users.length);
    callback(users);
});
}

function getUserByName(name, callback) {
  new DemoDataContext().users.where("name='" + name + "'").toArray(function (users) {
    callback(users.firstOrDefault());
  });
}

function addRole(roleName, callback) {
  var role = new Role();
  role.name = roleName;
  var db = new DemoDataContext();
  db.roles.add(role);
  db.saveChanges(callback);
}

function updateUserPassword(username, password, callback) {
  getUserByName(username, function (user) {
    if (user == null) {
        throw "no user found.";
    }
    user.password = password;
    var db = new DemoDataContext();
    db.users.update(user);
    db.saveChanges(callback);
  });
}

function deleteUserByName(name, callback) {
  getUserByName(name, function (user) {
    if (user == null) {
        throw "no user found.";
    }
    var db = new DemoDataContext();
    db.users.remove(user);
    db.saveChanges(callback);
  });
}

// end service methods---------------------------------------------------- 
```

# c - 从 Linux 内核模块共享内存以供用户空间进程访问

> ID：14289081
> 
> 赞同：9
> 
> 时间：2013-01-12T00:59:37.657
> 
> 标签：c, linux, memory, kernel

我有一个 Linux 内核模块，它在它的初始化例程中将一个 4KB 大小的结构写入内核内存。我想做的是使这个内存共享，以便单个用户空间进程可以对该结构具有只读访问权限。

有人告诉我要避免使用 IOCTLS，因为它们不是执行此操作的最佳方法，因此从我所读到的最佳方法是使用该函数`mmap`，但是我有点困惑关于如何在 C 中实现我需要的东西。

我确实看过使用该功能`shmget`，但似乎这是为需要 IPC 功能的用户空间应用程序设计的。

任何建议，甚至更好的简单示例将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:13:43.333

您不能使用像 mmap 这样的直接访问机制安全地执行此操作，因为这样任何人都可以使用它。

> > 在 Linux 中，**用户内存和内核内存是独立的，并且在不同的地址空间中实现。**地址空间是虚拟化的，这意味着地址是从物理内存中抽象出来的。因为地址空间是虚拟化的，所以可以存在很多。实际上，内核本身驻留在一个地址空间中，每个进程都驻留在自己的地址空间中。这些地址空间由虚拟内存地址组成，允许具有独立地址空间的许多进程引用相当小的物理地址空间（机器中的物理内存）。这不仅方便，而且安全，因为每个地址空间都是独立和隔离的，因此是安全的。
> > 
> > 但这种安全性是有代价的。**因为每个进程（和内核）可以有相同的地址来引用不同的物理内存区域，所以不可能立即共享内存。**（[来源](http://www.ibm.com/developerworks/linux/library/l-kernel-memory-access/index.html)）

# android - 表面视图中的倒计时定时器

> ID：14289088
> 
> 赞同：1
> 
> 时间：2013-01-12T01:00:19.080
> 
> 标签：android, timer

我正在尝试创建一个倒数计时器并将其显示在画布上。这是我显示它的方式。

```
public class DrawView extends SurfaceView {
private Paint textPaint = new Paint();
Bitmap GameBg;
DisplayMetrics metrics;
int screenWidth = 0;
int screenHeight = 0;
Rect dest;
Paint paint;
String timer;
public DrawView(Context context) {
     super(context);
     // Create out paint to use for drawing
     textPaint.setARGB(255, 200, 0, 0);
     textPaint.setTextSize(60);
     // This call is necessary, or else the 
     // draw method will not be called. 
     setWillNotDraw(false);

     GameBg = BitmapFactory.decodeResource(getResources(),R.drawable.gembackground);
     metrics = context.getResources().getDisplayMetrics();
     screenWidth = metrics.widthPixels;
     screenHeight = metrics.heightPixels;
     dest = new Rect(0, 0, screenWidth, screenHeight);
     paint = new Paint();
     paint.setFilterBitmap(true);

     new CountDownTimer(60000, 1000) {

         public void onTick(long millisUntilFinished) {
             timer = String.valueOf(millisUntilFinished / 1000);
         }

         public void onFinish() {
         }
         }.start();

     }

     @Override
     protected void onDraw(Canvas canvas){
     // A Simple Text Render to test the display
     canvas.drawBitmap(GameBg, null, dest, paint);
     canvas.drawText(timer, screenWidth - 50, screenHeight - 50, paint);

     } 
```

}

我可以显示计时器，但它不倒计时。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:04:47.630

您永远不会对`timer`. 尝试这样的事情：

```
 new CountDownTimer(60000, 1000) {
     public void onTick(long millisUntilFinished) {
         timer = String.valueOf(millisUntilFinished / 1000);
         invalidate(); // Force the View to redraw
     }

     public void onFinish() {}
 }.start(); 
```

# javascript - querySelectorAll 与 parentNode 中的伪选择器有关的问题

> ID：14289091
> 
> 赞同：1
> 
> 时间：2013-01-12T01:00:39.210
> 
> 标签：javascript, dom

我有这样的结构：

```
<div>
  <a></a>
  <p></p>
  <p></p>
</div> 
```

而且我所有的 p 都已经在一个*真实的*数组中了：

```
var p = [].slice.call( document.querySelectorAll('div p') ); 
```

我可以使用第一个项目，`p[0]`但我需要`first-child`（在这种情况下是相同的）所以我尝试了`querySelectorAll`，但这样做没有得到任何结果：

```
p.forEach(function( el ) {
  console.log( el.parentNode.querySelectorAll('p:first-child') ) //=> empty
}); 
```

如果我这样做，`el.parentNode.querySelectorAll(':first-child')`我会得到`<a>`这不是我想要的。如何过滤`first-child`数组中的 p？

**编辑：**我尝试创建一个虚拟元素并使用克隆重新创建结构以找到我的元素，虽然它有点工作我不确定这是最好的主意......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T01:06:53.670

CSS3 中有一个`first-of-type`伪类。我不认为它得到了广泛的支持。伪类是一个谓词，它选择任何类型的元素，这些`first-child`元素是其父子节点列表中的第一件事。因为它`<a>`是第一位的，所以它是唯一会被“击中”的东西`:first-child`。

*编辑——根据*[caniuse](http://caniuse.com)的说法，哇实际上`:first-of-type`现在似乎得到了很好的支持。

# gridview - extJS 本地数据存储上的无限滚动

> ID：14289096
> 
> 赞同：4
> 
> 时间：2013-01-12T01:01:33.550
> 
> 标签：gridview, extjs, infinite-scroll

是否可以在手动加载其数据存储的 extJS (4.1) 网格中进行无限滚动？

```
myStore = Ext.create('Ext.data.Store', {
    fields:givenStoreFields,
    data: [[]],
});

myGrid = Ext.create('Ext.grid.Panel', {
    store: myStore,
    columns: givenColumns,
}); 
```

就我而言，我从服务器获取数据，调整数据，然后手动加载到存储中。

```
myStore.loadData(fetchedAndTweaked); 
```

由于 fetchedAndTweaked 包含许多行，因此渲染速度非常慢，并且会减慢整个浏览器的速度。因此，我想向 myGryd 和 myStore 添加参数以进行“无限”滚动（在数据集 fetchedAndTweaked 上）。

**但是**：我找到的所有示例，数据存储都有一些代理/阅读器等。

//谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T02:22:25.033

[如果您按照 Ext JS 4.1.3 文档中的](https://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.Store-cfg-buffered)`buffered: true`说明在商店中使用配置，则可以： .

> **buffered** : Boolean 允许 Store 在页面缓存中预取和缓存记录页面，然后满足来自此页面缓存的加载要求。
> 
> 要使用缓冲存储，请通过加载第一页来启动该过程。呈现的行数是自动确定的，并且请求和缓存保持缓存准备好滚动所需的页面范围。例子：
> 
> ```
> myStore.loadPage(1); // Load page 1 
> ```
> 
> PagingScroller 被实例化，它将监视网格中的滚动，并根据需要从页面缓存中刷新视图的行。当视图的滚动在预取数据任一端附近的数据上绘制时，它还会将新数据拉入页面缓存。
> 
> 从预取数据触发视图刷新的边距是 Ext.grid.PagingScroller.numFromEdge、Ext.grid.PagingScroller.leadingBufferZone 和 Ext.grid.PagingScroller.trailingBufferZone。
> 
> 触发将更多数据加载到页面缓存中的边距是leadingBufferZone 和 trailingBufferZone。
> 
> 默认情况下，只有 5 页数据缓存在页面缓存中，当视图向下移动通过数据集时，页面“滚动”出缓冲区。将此值设置为零意味着页面缓存中不会滚动任何页面，并且最终整个数据集可能会出现在页面缓存中。只要数据集没有达到天文比例，这有时是可取的。
> 
> 通过将 SelectionModel 配置为在这些记录循环出存储的主集合时不丢弃其集合中的记录，可以跨页面边界维护选择状态。这是通过像这样配置 SelectionModel 来完成的：
> 
> ```
> selModel: {
>     pruneRemoved: false
> } 
> ```
> 
> 默认为：假
> 
> 可用时间：4.0.0

如上所述，您还必须将`pageSize`商店上的配置设置为您想要的。

**一句警告：**您找不到任何具有无限滚动的本地商店的示例，因为使无限滚动可行的记录数超过了您应该合理地保留在本地商店中的记录数。

换句话说，渲染并不是唯一降低浏览器速度的因素，它也是您尝试在本地处理的数据量。

如果您觉得需要实现无限滚动，则可能是时候转换为远程加载的数据存储了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T13:00:13.543

升级后我发现这在 extJS 4.2(beta) 中要容易得多。无限滚动与数据存储分离。IE 使用什么类型的数据存储并不重要。排序也可以按您的意愿工作。

```
store = Ext.create('Ext.data.SimpleStore',{
        autoLoad: true,
            pageSize:100,
            data:[
                []
            ], 
     }

Ext.require('Ext.grid.plugin.BufferedRenderer') 
var grid = Ext.create('Ext.grid.
             plugins: 'bufferedrenderer',
             store : store,
        }
//I load matrix data directly in the store for speed
store.loadRawData(matrixData); 
```

应用程序**现在**快得多了。

# node.js - 使用 Node.js 中的 Mongoose 在 MongoDB 中查找文档时出现奇怪的响应

> ID：14289098
> 
> 赞同：1
> 
> 时间：2013-01-12T01:01:53.613
> 
> 标签：node.js, mongodb, mongoose

提前感谢您对此的帮助，非常感谢！

我在一个新项目中使用 Node.js、MongoDB 和 Mongoose，我只是在尝试访问`find()`数据库中的文档。为简洁起见，我将只包含下面的 Mongoose 代码（我现在并没有做更多的事情）：

```
var mongoose = require('mongoose');

mongoose.connect('mongodb://<username>:<password>@<sub-domain>.mongolab.com:<port>/<db>');

var schema = { email_address: String, invite: String }
  , Users = mongoose.model('Users', new mongoose.Schema(schema));

console.log(Users.findOne({ 'email_address': 'jonathon@foo.bar' }, function(err, doc) { return doc; })); 
```

我很确定应该只是将返回的内容回显`doc`到 Node.js 控制台（终端），但我得到的是：

```
{ options: { populate: {} },
  safe: undefined,
  _conditions: { email_address: 'jonathon@foo.bar' },
  _updateArg: {},
  _fields: undefined,
  op: 'findOne',
  model: 
   { [Function: model]
     modelName: 'Users',
     model: [Function: model],
     options: undefined,
     db: 
      { base: [Object],
        collections: [Object],
        models: {},
        replica: false,
        hosts: null,
        host: '<sub-domain>.mongolab.com',
        port: <port>,
        user: '<username>',
        pass: '<password>',
        name: '<db>',
        options: [Object],
        _readyState: 2,
        _closeCalled: false,
        _hasOpened: false,
        db: [Object] },
     schema: 
      { paths: [Object],
        subpaths: {},
        virtuals: [Object],
        nested: {},
        inherits: {},
        callQueue: [],
        _indexes: [],
        methods: {},
        statics: {},
        tree: [Object],
        _requiredpaths: undefined,
        options: [Object] },
     collection: 
      { collection: null,
        name: 'users',
        conn: [Object],
        buffer: true,
        queue: [Object],
        opts: {} },
     base: 
      { connections: [Object],
        plugins: [],
        models: [Object],
        modelSchemas: [Object],
        options: {},
        Collection: [Function: NativeCollection],
        Connection: [Function: NativeConnection],
        version: '3.5.4',
        Mongoose: [Function: Mongoose],
        Schema: [Object],
        SchemaType: [Object],
        SchemaTypes: [Object],
        VirtualType: [Function: VirtualType],
        Types: [Object],
        Query: [Object],
        Promise: [Function: Promise],
        Model: [Object],
        Document: [Object],
        Error: [Object],
        mongo: [Object] } } } 
```

显然，我只是用这些`<username>`位混淆了我的真实凭证，它们在我的代码中都是正确的。

数据库中确实有一个与条件匹配的文档，即使从`findOne`方法中删除条件也不会产生任何结果！

我对 Node.js 相当陌生，所以我可以解释你的答案，所以我知道下次它会很有帮助！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T01:12:20.827

将您的代码更改为：

```
Users.findOne({ 'email_address': 'jonathon@foo.bar' }, function(err, doc) {
 console.log(doc); 
}); 
```

我从你的代码中看不到，但我认为你正在将 mongoose 函数的值写入控制台......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T01:13:14.267

我完全忘记了，Node.js 是异步的，所以该行`console.log(Users.findOne({ 'email_address': 'jonathon@foo.bar' }, function(err, doc) { return doc; }));`确实回显到控制台，尽管数据库尚未返回任何文档！

相反，该`console.log`方法应该在`find`的回调中，例如：

```
Users.find({}, function(err, doc) { console.log(doc); }); 
```

# c# - C#/.NET 和 JavaScript：确定 .js 文件的隐式导出和导入

> ID：14289100
> 
> 赞同：0
> 
> 时间：2013-01-12T01:01:59.403
> 
> 标签：c#, javascript, .net, import, export

有什么方法可以解析或建模 JavaScript 文件的内容并确定它需要哪些未定义的引用，以及它导出哪些引用？

我正在寻找一种方法来自动确定 Web 应用程序的巨大 JavaScript 文件集合的正确加载顺序。每个文件本质上都是一个模块，但许多文件具有奇怪的名称和额外的实用程序类型代码片段；代码及其组织非常迟钝，如果不能自动化，我们将手动执行数周。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:12:06.280

这是一个广泛的问题，这可能意味着一个重要的解决方案。首先是查看[Jurassic](http://jurassic.codeplex.com/)之类的东西，看看它是否可以让您查看它的 AST，并计算出在哪个范围内解析了哪些变量。如果这些要在浏览器中运行，还要考虑在 Javascript 中，全局范围是`window`对象，您可以通过它“导入”和“导出”，这可以别名为谁知道什么所以你需要做一些事情的数据流分析。

一种可能的替代方法是查看缩小器的实现（我会尝试[UglifyJS](https://github.com/mishoo/UglifyJS)，因为它明确支持解析为 AST 然后在其上构建缩小），因为这听起来像是他们在确定他们需要做哪些变量名称时不应该缩写。也就是说，缩小器被允许不精确并接受误报，这对您来说可能是个问题。

# javascript - JQuery Accordion - 最后一个单元格翻转面

> ID：14289102
> 
> 赞同：2
> 
> 时间：2013-01-12T01:02:05.337
> 
> 标签：javascript, jquery, jquery-ui-accordion

我真的不知道如何为此想出一个描述性的标题。我要做的几乎就是让这个手风琴列表项在单击时跳转到页面的另一侧。目前手风琴从左到右打开 - 但最后一个单元格没有向右跳，而是保持在原地。我怎样才能让最后一个单元格向右跳而不是留在原地。

这样做的目的是将图片放在选项卡中，并在浏览链接的开头和结尾将它们放在一起。

[JSFiddle 示例](http://jsfiddle.net/DYEwB/1/)- 单击最后一个单元格

**HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>Accordion</title>
    <link rel="stylesheet" type="text/css" href="redo.css" />
</head>
<body>
    <div id="hc1" class="haccordion">
        <ul>
            <li>
                <div class="hpanel">
                    <div class="preview" id="p1"></div>
                    <div class="contentContainer">
                        <div class="content">

                        </div>
                    </div>
                </div>
            </li>

            <li>
                <div class="hpanel">
                    <div class="preview" id="p2"></div>
                    <div class="contentContainer">

                    </div>
                </div>
            </li>

            <li>
                <div class="hpanel">
                    <div class="preview" id="p3"></div>
                    <div class="contentContainer">

                    </div>
                </div>
            </li>

            <li>
                <div class="hpanel">
                    <div class="preview" id="p4"></div>
                    <div class="contentContainer">
                    asdf
                    </div>
                </div>
            </li>

            <li>
                <div class="hpanel">
                    <div class="preview" id="p5"></div>
                    <div class="contentContainer">

                    </div>
                </div>
            </li>
        </ul>
    </div>
<!-- Scripts -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript" src="accordion.js"></script>
<!-- End Scripts -->
</body> 
```

**CSS**

```
*
{
    margin:0px;
    padding:0px
}

html, body
{
    height:100%;
    width: 100%;
}

#hc1, #hc1 ul, #hc1 li
{
    height: 100%;
}

#hc1, #hc1 ul 
{
    width: 100%;
}

.preview
{
    width: 50px;
    float: left;
    height: 100%;
    background-color: #E48525
}

#p1{background-color: #231F20}
#p2{background-color: #4F4E4F}
#p3{background-color: #919191}
#p4{background-color: #C4C4C3}
#p5{background-color: #E8E8E8}
/*
#p1{background-color: red}
#p2{background-color: blue}
#p3{background-color: green}
#p4{background-color: black}
#p5{background-color: orange}
*/
.contentContainer
{
    background-color: gray;
    margin: 0 auto;
    width: 100%;
    height: 100%;
}

/* -- Start Accordion -- */
.haccordion{
padding: 0;
}

.haccordion ul{
margin: 0;
padding: 0;
list-style: none;
overflow: hidden; /*leave as is*/
}

.haccordion li{
margin: 0;
padding: 0;
display: block; /*leave as is*/
overflow: hidden; /*leave as is*/
float: left; /*leave as is*/
}
/* -- End Accordion -- */ 
```

**Javascript**

```
var haccordion={
    //customize loading message if accordion markup is fetched via Ajax:
    ajaxloadingmsg: '<div style="margin: 1em; font-weight: bold"><img src="ajaxloadr.gif" style="vertical-align: middle" /></div>',

    accordioninfo: {}, //class that holds config information of each haccordion instance

    expandli:function(accordionid, targetli){
        var config=haccordion.accordioninfo[accordionid]
        var $targetli=(typeof targetli=="number")? config.$targetlis.eq(targetli) : (typeof targetli=="string")? jQuery('#'+targetli) : jQuery(targetli)
        if (typeof config.$lastexpanded!="undefined") //targetli may be an index, ID string, or DOM reference to LI
        {
            config.$lastexpanded.stop().animate({width:config.paneldimensions.peekw}, config.speed); //contract last opened content
            config.$lastexpanded.removeClass('active');
        }
        $targetli.stop().animate({width:$targetli.data('hpaneloffsetw')}, config.speed) //expand current content
        config.$lastexpanded=$targetli
        if($targetli.attr('class') != 'active')
        $targetli.addClass('active');
    },

    urlparamselect:function(accordionid){
        var result=window.location.search.match(new RegExp(accordionid+"=(\\d+)", "i")) //check for "?accordionid=index" in URL
        if (result!=null)
            result=parseInt(RegExp.$1)+"" //return value as string so 0 doesn't test for false
        return result //returns null or index, where index is the desired selected hcontent index
    },

    getCookie:function(Name){
        var re=new RegExp(Name+"=[^;]+", "i") //construct RE to search for target name/value pair
        if (document.cookie.match(re)) //if cookie found
            return document.cookie.match(re)[0].split("=")[1] //return its value
        return null
    },

    setCookie:function(name, value){
        document.cookie = name + "=" + value + "; path=/"
    },

    loadexternal:function($, config){ //function to fetch external page containing the entire accordion content markup
        var $hcontainer=$('#'+config.ajaxsource.container).html(this.ajaxloadingmsg)
        $.ajax({
            url: config.ajaxsource.path, //path to external content
            async: true,
            error:function(ajaxrequest){
                $hcontainer.html('Error fetching content.<br />Server Response: '+ajaxrequest.responseText)
            },
            success:function(content){
                $hcontainer.html(content)
                haccordion.init($, config)
            }
        })
    },

    init:function($, config){
            haccordion.accordioninfo[config.accordionid]=config //cache config info for this accordion
            var $targetlis=$('#'+config.accordionid).find('ul:eq(0) > li') //find top level LIs
            config.$targetlis=$targetlis
            config.selectedli=config.selectedli || [] //set default selectedli option
            config.speed=config.speed || "normal" //set default speed

//KEY_CHANGE_BEGIN
            var maxWidth    = $targetlis.parent ().width ();
            $targetlis.each ( function () { maxWidth -= $(this).outerWidth (true); } );

            $targetlis.each(function(i){
                var $target=$(this).data('pos', i) //give each li an index #

                var lclMaxWidth     = maxWidth + $target.find ('.hpanel:eq(0)').outerWidth (true);
                $target.css ('width', config.paneldimensions.fullw);

                //get offset width of each .hpanel DIV (config.dimensions.fullw + any DIV padding)
                var hpaneloffsetw   = $target.find ('.hpanel:eq(0)').outerWidth (true);
                if (hpaneloffsetw > lclMaxWidth)
                    hpaneloffsetw   = lclMaxWidth;

                $target.data('hpaneloffsetw', hpaneloffsetw);
                $target.css ('width', '');
//KEY_CHANGE_END

                $target.click(function(){
                        haccordion.expandli(config.accordionid, this)
                    config.$lastexpanded=$(this);
                })
                if (config.collapsecurrent){ //if previous content should be contracted when expanding current
                        config.$lastexpanded.removeClass('active');
                    $target.click(function(){
                        $(this).stop().animate({width:config.paneldimensions.peekw}, config.speed); //contract previous content
                    })
                }
            }) //end $targetlis.each
            var selectedli=haccordion.urlparamselect(config.accordionid) || ((config.selectedli[1] && haccordion.getCookie(config.accordionid))? parseInt(haccordion.getCookie(config.accordionid)) : config.selectedli[0])
            selectedli=parseInt(selectedli)
            if (selectedli>=0 && selectedli<config.$targetlis.length){ //if selectedli index is within range
                config.$lastexpanded=$targetlis.eq(selectedli)
                config.$lastexpanded.css('width', config.$lastexpanded.data('hpaneloffsetw')) //expand selected li
            }
            $(window).bind('unload', function(){ //clean up and persist on page unload
                haccordion.uninit($, config)
            }) //end window.onunload
    },

    uninit:function($, config){
        var $targetlis=config.$targetlis
        var expandedliindex=-1 //index of expanded content to remember (-1 indicates non)
        $targetlis.each(function(){
            var $target=$(this)
            $target.unbind()
            if ($target.width()==$target.data('hpaneloffsetw'))
                expandedliindex=$target.data('pos')
        })
        if (config.selectedli[1]==true) //enable persistence?
            haccordion.setCookie(config.accordionid, expandedliindex)
    },

    setup:function(config){
        //Use JS to write out CSS that sets up initial dimensions of each LI, for JS enabled browsers only
        document.write('<style type="text/css">\n')
        document.write('#'+config.accordionid+' li{width: '+config.paneldimensions.peekw+';\nheight: '+config.paneldimensions.h+';\n}\n')
        document.write('#'+config.accordionid+' li .hpanel{width: '+config.paneldimensions.fullw+';\nheight: '+config.paneldimensions.h+';\n}\n')
        document.write('<\/style>')
        jQuery(document).ready(function($){ //on Dom load
            if (config.ajaxsource) //if config.ajaxsource option defined
                haccordion.loadexternal($, config)
            else
                haccordion.init($, config)
        }) //end DOM load
    }
}

haccordion.setup({
    accordionid: 'hc1', //main accordion div id
    paneldimensions: {peekw:'50px', fullw:'100%', h:'100%'},
    selectedli: [4, false], //[selectedli_index, persiststate_bool]
    collapsecurrent: false //<- No comma following very last setting!
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:32:02.480

这是：tinker.io/f7fe4/12

这是所有版本中最简单的更改，只需将第一个预览浮动到右侧。可以通过编程方式或使用 css 完成（在 IE7+ 中可能有问题）：

```
$('#hc1 li .preview').first().css('float','right'); 
```

或者

```
#hc1 li:first-child .preview {
    float:right;
} 
```

--

这是您正在寻找的效果吗？

[https://tinker.io/f7fe4/8](https://tinker.io/f7fe4/8)

这是相同的效果，带有“更平滑”的动画（但它使外部 div 仍然在屏幕上）

[https://tinker.io/f7fe4/9](https://tinker.io/f7fe4/9)

这就是我一开始以为你在说的

[https://tinker.io/f7fe4/4](https://tinker.io/f7fe4/4) （这会将最左侧的单元格弹出到右侧并打开它，有点像无限滑块）

# wpf - MainWindow 上的复选框，将值设置为位于底层 UserControls 上的控件

> ID：14289103
> 
> 赞同：0
> 
> 时间：2013-01-12T01:02:16.233
> 
> 标签：wpf, mvvm, binding, checkbox, mainwindow

在 MainWindow 类中，我有一个复选框，用于控制 UserControls 中的许多对象（如网格、列表视图等）使用的属性

```
 <CheckBox Content="Show objects ID" Name="showID" IsChecked="False" /> 
```

比定义的属性，

```
 public Visibility ShowObjectIDasVisibility
    {
        get { return showID.IsChecked.Equals(true) ? Visibility.Visible : Visibility.Collapsed; }
    } 
```

我有更多这样的返回布尔值，宽度取决于目标控件应该使用的内容。

我设法绑定位于 UserControl 对象中的控件以使用此属性，如下所示：

```
<TextBlock Visibility="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=ShowObjectIDasVisibility}" /> 
```

但它仅适用于创建此 TextBlock 时，我可以根据需要多次切换复选框，并且 TextBlock 将根据第一个值保持可见或不可见。

我应该如何正确地做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:15:03.430

`INotifyPropertyChanged`您可以使用以下接口代替接口`DependencyProperty`：

```
public Visibility ShowObjectIDasVisibility
    {
        get { return (Visibility)GetValue(ShowObjectIDasVisibilityProperty); }
        set { SetValue(ShowObjectIDasVisibilityProperty, value); }
    }
    public static readonly DependencyProperty ShowObjectIDasVisibilityProperty =
        DependencyProperty.Register("ShowObjectIDasVisibility", typeof(Visibility), typeof(MainWindow), new PropertyMetadata(Visibility.Collapsed)); 
```

现在，要显示/隐藏您`TextBlock`需要更改`ShowObjectIDasVisibility`值。

例如，您可以通过添加到复选框`Click="OnShowID_Click`和后面的代码来做到这一点

```
private void OnShowID_Click(object sender, RoutedEventArgs e)
    {
        ShowObjectIDasVisibility = ShowObjectIDasVisibility == System.Windows.Visibility.Visible ? System.Windows.Visibility.Collapsed : System.Windows.Visibility.Visible;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:31:08.060

如果您的绑定是正确的。您只需要确保您的代码类在绑定到视图的类中实现 INotifyPropertyChanged 接口，并且您在每个复选框状态更改时引发 RaisePropertyChanged 事件。有关更多详细信息，请参见[此处](http://www.codeproject.com/Articles/41817/Implementing-INotifyPropertyChanged)的示例。

# java - 如何将数据传回父活动

> ID：14289105
> 
> 赞同：4
> 
> 时间：2013-01-12T01:02:20.150
> 
> 标签：java, android

在我的应用程序上，我看到有多个活动......

```
 Main
              |
     --------------------
   Login                 |
     |                   |
     --------------- Dashboard
                         |
     -----------------------------------------
     |                   |                   |
 Activity1           Activity2            Activity3 
```

如果用户登录，它将绕过登录并直接进入仪表板。然后我看到仪表板启动了其他活动。目前，我的主要活动如下：

```
public class MainActivity extends Activity {
    User user = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        startActivity(new Intent(this, LoginActivity.class));
    }
} 
```

我试图找到显示如何将数据从我的登录活动传递回 Main 的示例代码，但我一直在苦苦挣扎。我可以找到许多关于如何将数据从父活动传递到子活动的示例，但反之则不然。

PS - 如果我的应用程序没有走上正轨，请告诉我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T01:04:41.437

您是否查看过 startActivityForResult？

请参阅本教程： [http ://www.mybringback.com/tutorial-series/12186/android-startactivityforresult-example/](http://www.mybringback.com/tutorial-series/12186/android-startactivityforresult-example/)

# css - IE9 quirks mode input type=button width padding 和文字长度成正比，怎么挤？

> ID：14289106
> 
> 赞同：0
> 
> 时间：2013-01-12T01:02:31.787
> 
> 标签：css, internet-explorer-9, quirks-mode

我有一个按钮渲染问题。我处于 IE9 怪癖模式。它是 html 框架（不是 iframe）中的遗留代码，目前我对 quirks 模式别无选择。我已经去掉了所有的 css 和 javascript，所以我相信我只能使用默认的 IE9 渲染。

问题是这样的：按钮文本左右的填充似乎与文本的长度成正比。也就是说，文本越长，填充越宽。客户坚持要求某些按钮最多包含 20 个字符的文本，并且这些按钮在按钮内文本左右两侧的大量死区中构建（即，可以说是 padding-left 和 padding-right），以至于布局严重损坏。

由于按钮文本从 7 到 20 个字符不等，我也不能轻易地做固定宽度的按钮。我想要完成的是固定的 padding-left 和 padding-right。我能想到的最好的方法是 ems 中的内联宽度，例如，

```
<input value="The Big Whateverest" type="button" style="width:11em;"> 
```

我尝试使用内联样式填充/边距，但这只会让事情变得更糟。有什么建议么？

编辑：根据解决方案，部分难题是按钮位于表格单元格内。如果您在这里是因为您需要知道这一点，请务必点击 Adam 解决方案中的链接以了解完整问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:40:19.747

您可以通过更改为来调整[此解决方案](http://www.brownbatterystudios.com/sixthings/2006/02/14/standards-friendly-ie-button-width-fix/)以适应您的情况，如下所示：`.button``input`

```
<style>
input {
    padding: 0 .25em;
    width: auto;
    overflow:visible;
}
</style>

<!--[if IE]>
<style>
input {
    width: 0;
}
</style>
<![endif]--> 
```

# python - 同时读/写python subprocess.Popen

> ID：14289107
> 
> 赞同：1
> 
> 时间：2013-01-12T01:02:40.320
> 
> 标签：python, cgi, subprocess, python-interactive

我有一个简单的 C 程序，它的工作方式如下： 请求输入 Print it 再次请求另一个输入 Print

现在我正在使用 python 来调用这个程序。

```
import subprocess

sobj = subprocess.Popen("./cprog", stdin = subprocess.PIPE, stdout = subprocess.PIPE)
sobj.stdin.write("2 3\n")
sobj.stdin.close()
sobj.stdout.read() 
```

这工作正常。同样与沟通它的工作正常。

但是当我尝试做这样的事情时它不会工作

```
sobj = subprocess.Popen("./cprog", stdin = subprocess.PIPE, stdout = subprocess.PIPE)
sobj.stdout.readline()
sobj.stdin.write("2 3\n")
sobj.stdin.close()
sobj.stdout.read() 
```

以下是几件事： 1\. 我看到了 pexpect，但我认为我们应该提前给出程序要求的内容。2\. 我可以重新打开封闭的子流程管道吗？

我将上面的脚本用作 CGI，我不知道为什么，但 subprocess.call 不起作用。谁能解释为什么？

编辑：

我正在做一个基于 Web 的项目，用户使用 C、C++ 或 JAVA 编写代码并在浏览器上执行它们。所以首先我想到了使用 PHP，但我找不到调用程序并以交互方式运行它们的方法。然后我看到了python子进程模块。当我使用 subprocess.call 时，解释器中的一切工作正常。但是相同的 python 程序将其保存为 .cgi 并在浏览器中打开它时不起作用。然后我开始查看 subprocess.popen。但是有了这个，我需要在开始时提供所有输入，然后运行代码。我想要做的是在浏览器中运行一个交互式会话。

编辑2：所以我想要的是用户在浏览器中运行程序并在需要时在提供的文本框中输入输入，并且该输入被重定向到子进程的标准输入并基于它输出。

编辑 3：cprog.c

```
 #include <stdio.h>
 int main() {
   int x;
   printf("Enter value of x: \n");
   scanf("%d", &x);
   printf("Value of x: %d\n", x);
   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:24:56.737

我假设您的 C 应用程序显示一个提示并希望用户在同一行输入他们的输入，并且在您上面的`readline()`调用中您试图获得提示。

如果是这种情况，`readline()`将永远阻塞，因为它正在等待换行符并且永远不会看到它。如果您将此调用转换为简单的`read(X)`（`X`一次读取的字节数是多少），那么您可能会有更好的运气，尽管您应该处理部分输入（即循环收集输入，直到您看到整个迅速的）。您可能会看到的唯一其他问题是 C 应用程序是否在提示用户之前没有刷新输出，但如果是这种情况，我希望您在交互式会话中也能看到该问题。

当在像 Apache 这样的网络服务器的上下文中运行时，使用类似这样的东西通常是一个坏主意，`subprocess`因为它们涉及分叉额外的进程，而这通常是一件很难管理的事情。这是因为 fork 进程复制了父进程的大部分状态，有时这会导致问题。我并不是说它不起作用，我只是说如果你不小心，你可能会给自己制造一些微妙的问题，如果这就是你使用`subprocess`.

但是，要提供更多有用的建议，您需要准确描述调用 subprocess 时看到的错误。例如，很可能会抛出一个异常，该异常可能会出现在您的网络服务器日志中——在此处重现该异常将是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:53:43.797

> 当我直接通过终端运行 C 程序时，它工作正常。但是当我使用上面提供的第二个代码运行相同的程序时，没有任何打印。

您看不到任何输出的原因是 C stdio 在程序以非交互模式运行时使用块缓冲。请参阅[我的答案，该答案演示了几种解决方案：`pty`, `stdbuf`,`pexpect`](https://stackoverflow.com/a/12471855/4279) . 如果您可以更改 C 代码，那么您也可以[明确地 fflush 输出或使其成为 unbuffered](https://stackoverflow.com/a/3746795/4279)。

如果您可以一次提供所有输入并且输出是有界的，那么您可以使用`.communicate()`：

```
from subprocess import Popen, PIPE

p = Popen(["./cprog"], stdin=PIPE, stdout=PIPE, stderr=PIPE,
          universal_newlines=True)
out, err = p.communicate("2\n") 
```

* * *

> 所以我想要的是用户在浏览器中运行程序并在需要时在提供的文本框中输入输入，并且该输入被重定向到子进程的标准输入并基于它的输出。

基于[ws-cli 示例](https://stackoverflow.com/a/11729467/4279)：

```
#!/usr/bin/python
"""WebSocket CLI interface.

Install: pip install twisted txws

Run: twistd -ny wscli.py

Visit http://localhost:8080/
"""
import sys
from twisted.application import strports # pip install twisted
from twisted.application import service
from twisted.internet    import protocol
from twisted.python      import log
from twisted.web.resource import Resource
from twisted.web.server  import Site
from twisted.web.static  import File

from txws import WebSocketFactory # pip install txws

class Protocol(protocol.Protocol):
    def connectionMade(self):
        from twisted.internet import reactor
        log.msg("launch a new process on each new connection")
        self.pp = ProcessProtocol()
        self.pp.factory = self
        reactor.spawnProcess(self.pp, command, command_args)
    def dataReceived(self, data):
        log.msg("redirect received data to process' stdin: %r" % data)
        self.pp.transport.write(data)
    def connectionLost(self, reason):
        self.pp.transport.loseConnection()

    def _send(self, data):
        self.transport.write(data) # send back

class ProcessProtocol(protocol.ProcessProtocol):
    def connectionMade(self):
        log.msg("connectionMade")
    def outReceived(self, data):
        log.msg("send stdout back %r" % data)
        self._sendback(data)
    def errReceived(self, data):
        log.msg("send stderr back %r" % data)
        self._sendback(data)
    def processExited(self, reason):
        log.msg("processExited")
        self._sendback('program exited')
    def processEnded(self, reason):
        log.msg("processEnded")

    def _sendback(self, data):
        self.factory._send(data)

command = './cprog'
command_args = [command]

application = service.Application("ws-cli")

echofactory = protocol.Factory()
echofactory.protocol = Protocol
strports.service("tcp:8076:interface=127.0.0.1",
                 WebSocketFactory(echofactory)).setServiceParent(application)

resource = Resource()
resource.putChild('', File('index.html'))
strports.service("tcp:8080:interface=127.0.0.1",
                 Site(resource)).setServiceParent(application) 
```

其中`index.html`：

```
<!doctype html>
<title>Send input to subprocess using websocket and echo the response</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js">
</script>
<script>
// send keys to websocket and echo the response
$(document).ready(function() {
    // create websocket
    if (! ("WebSocket" in window)) WebSocket = MozWebSocket; // firefox
    var socket = new WebSocket("ws://localhost:8076");

    // open the socket
    socket.onopen = function(event) {
    // show server response
    socket.onmessage = function(e) {
        $("#output").text(e.data);
    }

    // sent input
    $("#entry").keyup(function (e) {
        socket.send($("#entry").attr("value")+"\n");
    });
    }
});
</script>
<pre id=output>Here you should see the output from the command</pre>
<input type=text id=entry value="123"> 
```

并且`cprog.c`：

```
#include <stdio.h>
int main() {
  int x = -1;
  setbuf(stdout, NULL); // make stdout unbuffered

  while (1) {
    printf("Enter value of x: \n");
    if (scanf("%d", &x) != 1)
        return 1;
    printf("Value of x: %d\n", x);
  }
  return 0;
} 
```

# knockout.js - Knockoutjs 映射

> ID：14289109
> 
> 赞同：0
> 
> 时间：2013-01-12T01:03:03.717
> 
> 标签：knockout.js, knockout-mapping-plugin

使用 knockoutjs 映射插件是否可以仅使子元素可观察？

我有大量以下格式的数据（400/500 条记录），自动映射真的很慢，因为它使每个字段都可以观察到，但我只需要让孩子可以观察到。

我将如何手动使子字段可观察而忽略其他字段？

另外，处理最后大量数据的最佳方法是什么？任何带有 knockoutjs 代码的服务器端分页都会很棒。

谢谢。

```
{
    “名称”：“约翰·史密斯”，
    “年龄”：32，
    “受雇”：是的，
    “地址”： {
        "street": "第一大道 701 号",
        “城市”：“桑尼维尔，CA 95125”，
        “国家”：“美国”
    },
    “孩子们”： [
        {
            “姓名”：“理查德”，
            “年龄”：7
        },
        {
            “姓名”：“苏珊”，
            “年龄”：4
        },
        {
            “姓名”：“詹姆斯”，
            “年龄”：3
        }
    ]
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:15:36.257

您不必将整个对象传递给映射函数，只需要将您想要映射的部分。由于您只想映射子数组，请将其传递给映射器。

```
var data = {
    "name": "John Smith",
    "age": 32,
    "employed": true,
    "address": {
        "street": "701 First Ave.",
        "city": "Sunnyvale, CA 95125",
        "country": "United States"
    },
    "children": [
        {
            "name": "Richard",
            "age": 7
        },
        {
            "name": "Susan",
            "age": 4
        },
        {
            "name": "James",
            "age": 3
        }
    ]
};

data.children = ko.mapping.fromJS(data.children); 
```

否则，您可以使用映射选项来指定要复制其他字段（而不是映射它们）。

```
var mappingOptions = {
  'copy': [
    'name',
    'age',
    'employed',
    'address'
  ]
};
var mapped = ko.mapping.fromJS(data, mappingOptions); 
```

# javascript - 仅在不存在时才包含库

> ID：14289115
> 
> 赞同：0
> 
> 时间：2013-01-12T01:04:31.443
> 
> 标签：javascript, requirejs, typescript

我正在观看关于 TypeScript 的 Pluralsight 课程，他们正在讨论使用`requirejs`AMD 从第三方 (jQuery) 加载库。但是，显示的方式看起来总是拉入图书馆，`shim:{}`我很好奇是否有一种方法可以仅在它不存在的情况下将其拉入？

还是`shim`考虑到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:47:28.643

如果您`requirejs`多次使用并请求同一个模块，那么给您同一个模块就足够聪明了。

它使用模块缓存来做到这一点。

如果模块的路径不同，它将再次加载它（例如，具有不同相对路径的相同资源，因为它正在从不同级别的子文件夹中使用）。

# postgresql - 无法启动服务器，可能是由于 .conf 放错了位置。如何验证原因并查找/替换 .conf？

> ID：14289116
> 
> 赞同：2
> 
> 时间：2013-01-12T01:04:31.680
> 
> 标签：postgresql, configuration

我是 psql 的新手，并且遇到了一些我认为是由放错位置的 .conf 文件引起的问题。当我尝试登录之前创建的数据库时出现错误

```
$ psql corporation
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting 
```

根据[psql 文档](http://www.postgresql.org/docs/9.1/static/server-start.html)，看起来服务器没有运行并且 ps 确认了这一点。由于我不记得上次使用 psql 时必须启动它，所以我有点困惑，但它似乎很容易修复。不幸的是，我启动服务器的尝试没有奏效。使用文档建议的第一种方法让我

```
$ postgres -D /usr/local/pgsql/data
postgres cannot access the server configuration file "/usr/local/pgsql/data/postgresql.conf": No such file or directory 
```

而第二种方法导致

```
$postgres -D /usr/local/pgsql/data >logfile 2>&1 &
[1] 3165 
```

ps 确认这些方法都没有启动 postgres，当我尝试打开数据库时，再次检查，它返回的错误消息与以前略有不同。

```
psql: could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/tmp/.s.PGSQL.5432"?
[1]+  Exit 2                  postgres -D /usr/local/pgsql/data > logfile 2>& 
```

[如何在 Mac OS X 上启动 PostgreSQL 服务器？](https://stackoverflow.com/questions/7975556/how-to-start-postgresql-server-on-mac-os-x)似乎相关，但有一些差距。仅仅运行 initdb 是不够的，而且我似乎没有 .conf.sample。我只需要从头开始创建一个新的 .conf 还是什么？作为参考，我正在运行 Snow Leopard，我最初尝试手动安装 psql，但最终安装了 brew 然后 brew 安装 psql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:08:00.533

你试过做一个`find`吗？

```
sudo find / -name postgresql* 
```

# objective-c - Objective-C 终端输出窗口

> ID：14289118
> 
> 赞同：0
> 
> 时间：2013-01-12T01:04:38.153
> 
> 标签：objective-c, window, output

> **可能重复：**
> [是否可以 NSLog() 没有时间和日期戳，以及自动换行符？](https://stackoverflow.com/questions/3487226/is-it-possible-to-nslog-without-the-time-and-date-stamps-and-the-automatic-ne)

这可能是一个愚蠢的问题，但我无法找到答案。

当我的程序以 Objective-c 结束时，每次 NSLog 打印一些内容时，它都会写下这个输出的日期和时间。

我如何告诉 X-Code 不要打印这些信息？

我在屏幕上看到了这个：

```
--2013-01-11 18:57:53.016 GraphicObject[3084:403] -

|***2013-01-11 18:57:53.019 GraphicObject[3084:403] |

|***2013-01-11 18:57:53.020 GraphicObject[3084:403] |

|***2013-01-11 18:57:53.021 GraphicObject[3084:403] |

---2013-01-11 18:57:53.022 GraphicObject[3084:403] - 
```

我试图打印这个：

```
-----
-***-
-***-
-***-
----- 
```

谢谢你们！

# javascript - 分离父母和孩子的触摸事件

> ID：14289121
> 
> 赞同：0
> 
> 时间：2013-01-12T01:04:42.407
> 
> 标签：javascript, jquery, html

我将 jquery 用于我的 Web 应用程序。我希望它适用于桌面浏览器和触摸屏设备的移动浏览器。

我有一个 div，里面有一些元素：

```
 <div class="well listItem element-div alert-error" data-state="removing">
     <strong>Item title</strong> <small>Items count</small>
     <div class="pull-right" style="margin-top: -5px;">
      <a class="btn btn-success approve-button"><i class="icon-ok icon-white"></i></a>
      <a class="btn btn-danger cancel-button"><i class="icon-remove icon-white"></i></a>
     </div>
</div> 
```

我捕获了 .listItem 类（顶级 div）的 click 和 touchend 事件以及每个 a 元素（对于 .approve-button 和 .cancel-button）的相同事件，但是当我在“a”元素上单击桌面浏览器时，它工作正常，当我在 iOS Safari 浏览器或 WindowsPhone InternetExplorer 中按下“a”元素时，仅适用于父 div 的事件，但不适用于“a”。如果我删除父 div 的事件侦听器，则“a”元素的事件在移动浏览器中可以正常工作。我希望 parent-div 事件在我触摸它的空闲空间时起作用，并且当我触摸“a”元素时 - 我只希望“a”事件监听器继续。你能告诉我如何将它们分开吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:47:12.593

您是否尝试过检查事件目标？

```
$(".listItem").on("click", function(event){
  if (event.target === this) {
    // clicked exactly on this element
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T15:06:03.627

我遇到了类似的问题，只是我的内容更嵌套。**您想使用:not**选择器排除您希望处理其他事件的区域（div、类或其他），如下所示：

```
<article>
    <div class="title">
        <span class="title"></span>
        <div class="buttons">
            <div class="minimize">+</div>
            <div class="remove">x</div>
        </div>
    </div>
    <div class="post">
        ...
    </div>
</article> 
```

使用 jQuery：

```
$("article :not(.buttons, .minimize, .remove)").click(function (event) {
    // toggle display value of div.post
}); 
```

**这会在article**内的任何地方触发点击事件，除了**.buttons**、**.minimize**和**.remove** div。

# objective-c - ObjectiveFlickr & Xcode 4.5.2

> ID：14289125
> 
> 赞同：1
> 
> 时间：2013-01-12T01:05:02.910
> 
> 标签：objective-c, ios6, xcode4.5, objectiveflickr

我正在尝试将[ObjectiveFlickr](https://github.com/lukhnos/objectiveflickr)集成到我的项目中 - 一切似乎都运行良好，但是一旦我执行以下操作：

```
[request callAPIMethodWithGET:@"flickr.photos.getRecent" arguments:[NSDictionary dictionaryWithObjectsAndKeys:@"1", @"per_page", nil]] 
```

我收到一个非常糟糕的访问错误。我一直试图解决这个问题一段时间，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:24:17.507

错误地在本地声明变量 - 将请求和上下文变量设置为属性（即实例变量），它消除了 exc bad access 错误。

# cordova - 在 iPhone 应用程序中购买实体产品

> ID：14289128
> 
> 赞同：1
> 
> 时间：2013-01-12T01:05:54.013
> 
> 标签：cordova, paypal, payment-gateway

我正在制作一个应用程序，客户可以通过该应用程序浏览实物产品目录（我将运送给他们）。我仍在决定使用哪个支付网关……经过研究，我决定两个最佳选择是 PayPal Express Checkout（移动集成）或 Zooz。

我正在使用 PhoneGap 开发应用程序，并注意到 Zooz 发布了一个很棒的 PhoneGap 插件，只是想知道我是否可以使用它来销售实体产品？在研究这个时，我看到了很多关于应用内购买的信息，我知道这不是我想要的，但人们似乎将应用内购买和实体产品视为同一件事。我可以用 Zooz 卖实物吗？

也将不胜感激任何一种选择的经验:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:49:26.650

您可以使用任何支付网关销售实物商品。我认为您所看到的有关应用内购买的情况是，除非您使用他们的付款方式，否则 Apple 不会批准此类应用程序。因此，您仍然可以使用您想要的任何网关构建应用程序，但您无法将其添加到 iTunes 商店。你只需要自己分发它。

# android - Android 上 USB 麦克风的 AudioSource 值

> ID：14289136
> 
> 赞同：7
> 
> 时间：2013-01-12T01:07:10.753
> 
> 标签：android, audio, usb

根植于 MK809/Android 4.1.1 的音频捕获应用程序。没有内置麦克风，所以我尝试使用 USB 麦克风，连接时在*设置/声音/声音设备管理器/声音输入设备*中正确检测为“USB 音频设备” 。

要传递给 AudioRecord 构造函数的这个设备的 AudioSource 值是多少（第一个参数）。我尝试了 MediaRecorder.AudioSource 中的每一个，都没有奏效。我只对读取捕获缓冲区感兴趣，而不是保存到文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T21:40:07.557

回答我自己的问题。以下值确实有效：DEFAULT、MIC、CAMCORDER，可能还有其他值，因为它是唯一的输入设备。

我试图使用 48000 的采样率（适用于 Windows）并且 AudioRecord 创建失败：

错误/AudioRecord(1615)：无法获取记录源 1 的音频输入错误/AudioRecord-JNI(1615)：创建 AudioRecord 实例时出错：初始化检查失败。ERROR/AudioRecord-Java(1615): [android.media.AudioRecord] 初始化本机 AudioRecord 对象时出现错误代码 -20。

考虑到使用相同的 agruments 集调用 getMinBufferSize() 不会返回预期的错误，这有点误导信息。我认为这是设备的有效采样率。将其设置为 44100（保证）解决了这个问题。

USB 音频输入设备可以在 Android 上运行，至少在 Jelly Bean 上。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T22:38:07.710

FWIW，这是特定于实现的（不同平台供应商和 OEM 之间可能会有所不同）。

在我使用过的设备上，如果 AudioSource 是或`DEFAULT`，则会选择 USB 附件的麦克风，并且音频 HAL 中支持的 USB 音频录制的唯一采样率是 8、16 和 48 kHz（尽管 AudioFlinger 能够重新采样到一定范围内的其他速率）。`MIC``VOICE_RECOGNITION`

# c# - 如何使用 Bass.NET 处理来自声卡输出的音频数据

> ID：14289137
> 
> 赞同：0
> 
> 时间：2013-01-12T01:07:17.223
> 
> 标签：c#, bass, bass.dll

我想使用 Bass.NET 使用 BASS_ChannelGetData 方法捕获和处理数据。我见过的示例使用这个通过 Bass.NET 库播放音频文件然后对其进行采样，但是我希望对我的声卡输出的数据进行采样，以便我可以捕获和处理来自第三方音频播放器的音频数据，例如例如 Spotify。

```
Bass.BASS_ChannelGetData(handle, buffer, (int)BASSData.BASS_DATA_FFT256); 
```

我将如何获得允许我处理这些数据的句柄？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:57:04.517

Bass.BASS_RecordInit 确实返回了一个句柄，但是如果您仔细查看文档，他们确实仅将它用于*播放*（实际启动）记录通道。他们的代码示例使用回调来检索音频示例。

查看 Bass.BASS_RecordStart 方法文档。

```
private RECORDPROC _myRecProc; // make it global, so that the GC can not remove it 
private int _byteswritten = 0;
private byte[] _recbuffer; // local recording buffer
...
if ( Bass.BASS_RecordInit(-1) )
{
  _myRecProc = new RECORDPROC(MyRecording);
  int recHandle = Bass.BASS_RecordStart(44100, 2, BASSFlag.BASS_RECORD_PAUSE, _myRecProc, IntPtr.Zero);
  ...
  // start recording
  Bass.BASS_ChannelPlay(recHandle, false);
}
...
private bool MyRecording(int handle, IntPtr buffer, int length, IntPtr user)
{
  bool cont = true;
  if (length > 0 && buffer != IntPtr.Zero)
  {
    // increase the rec buffer as needed 
    if (_recbuffer == null || _recbuffer.Length < length)
      _recbuffer = new byte[length];
    // copy from managed to unmanaged memory
    Marshal.Copy(buffer, _recbuffer, 0, length);
    _byteswritten += length;
    // write to file
    ...
    // stop recording after a certain amout (just to demo) 
    if (_byteswritten > 800000)
      cont = false; // stop recording
  }
  return cont;
} 
```

请注意，您应该能够在该回调中使用 BASS_ChannelGetData 而不是 Marshal.Copy。

你的意思是 resample 而不是 sample ？如果是这样，那么 BassMix 类将处理该工作。

# database - Guid（随机整数）与聊天应用程序的常规整数主键

> ID：14289139
> 
> 赞同：0
> 
> 时间：2013-01-12T01:07:40.060
> 
> 标签：database, performance, security, primary-key, guid

我不是在问一般的“guid vs ints哪个更好”的问题。我知道，或者至少认为我知道他们都有特定的场景，其中一个比另一个更好。但是我确实有一个特定的场景，我正在编写一个聊天应用程序。我启动应用程序时所有主键都是整数。但是在做了一些研究之后，我意识到我可能在应用程序中存在安全漏洞，因为我正在将主键传递给用户的浏览器以获取不同的实体请求，例如聊天室、谈话者等。人们会同意可以猜测后续主键，因此用户可以更改其他用户的会话和状态。为了防止这种情况，我正在考虑使用 guid 作为我的主键，但后来另一个想法让我想到了。关于性能的思考。由于这是一个聊天应用程序，如果应用程序承受重负载（例如同时有 10 或 100 多个用户同时使用），那么使用 guid 真的会降低我的性能，例如，我没有足够的信息来在这里做出选择。简而言之，我的问题是，我是否需要将主键更改为 guid 以帮助更难猜测主键，或者是否有其他方法可以在不求助于 guid 的情况下保护我的应用程序。如果问题不够清楚，请告诉我，我会澄清，谢谢。我是否需要将我的主键更改为 guid 以帮助更难猜测主键，或者是否有其他方法可以在不求助于 guid 的情况下保护我的应用程序。如果问题不够清楚，请告诉我，我会澄清，谢谢。我是否需要将我的主键更改为 guid 以帮助更难猜测主键，或者是否有其他方法可以在不求助于 guid 的情况下保护我的应用程序。如果问题不够清楚，请告诉我，我会澄清，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T01:28:25.187

不，您不需要将主键更改为 GUID。这不一定会给您任何额外的安全性，并且可以说[是默默无闻的安全性](http://en.wikipedia.org/wiki/Security_through_obscurity)。

使用 GUID 使攻击者无法猜测另一个用户的 ID 或聊天室的唯一密钥。但是，如果它们被传输，它不会阻止他们看到 ID，然后能够执行您当前担心的任何操作。

相反，当用户对数据库发出请求时，您必须验证他们是否被允许访问该数据。例如，他们应该只能检索自己的用户信息，或其他用户的基本用户信息（如句柄，但不能检索电子邮件地址）。

# html - 使用作按钮的 div 中的文本不可标记

> ID：14289140
> 
> 赞同：1
> 
> 时间：2013-01-12T01:07:46.053
> 
> 标签：html, text, appearance

我真的很喜欢将`div`元素用作按钮的概念。最重要的是，样式的完全自由在我看来这样做是一个真正的好处。

我现在遇到的问题如下：在我的一个小项目中，我有一个部分，用户可以输入一些值来存储这些数据。这种包含输入字段和其他输入元素的单个输入元素用于记录一张账单。为了允许用户输入多于一张账单，我制作了一个`div`基于按钮，每次点击添加一个额外的输入元素。

![在此处输入图像描述](../Images/9085c387078d3a2c5e60caa6f466d101.png)

现在，假设用户要记录 8 个账单，他将在此按钮上单击 7 次，而且速度很快。您知道，如果您双击文本，它会被标记，这会导致按钮的外观非常难看。

![在此处输入图像描述](../Images/29af2eac4711098467d6e91a4bbed38d.png)

有没有办法为''text not markable''设置一个div属性？我真的很想在没有图像的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T01:10:05.347

从这个网站：

```
#yourTable {
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    user-select: none;
} 
```

[信用在这里](https://stackoverflow.com/a/1319158/785241)。请记住，IE 也不会总是在意。

# mysql - mySQL查询忽略NOT IN函数

> ID：14289148
> 
> 赞同：0
> 
> 时间：2013-01-12T01:09:27.513
> 
> 标签：mysql

此查询正在处理和运行，但它完全忽略了 NOT IN 部分

```
SELECT * FROM `offers` as `o` WHERE `o`.country_iso = '$country_iso' AND `o`.`id` 
not in (select distinct(offer_id) from aff_disabled_offers 
where offer_id = 'o.id' and user_id = '1') ORDER by rand() LIMIT 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:18:58.023

也许您的“不在”查询不返回任何内容。

不应该

```
where offer_id='o.id' 
```

是

```
where offer_id=o.id 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:25:46.973

guido 有答案......看起来你打算创建一个相关的子查询。 `'o.id'`被视为文字。

一些注意事项：

您通常需要某种保证，即`NOT IN`谓词中的子查询不会返回 NULL 值。如果您没有从数据库强制执行该保证，则`WHERE/HAVING return_expr IS NOT NULL`在子查询中添加 a 足以为您提供该保证。

那个相关的子查询会在大集合上吃掉你的午餐，性能方面。ORDER BY rand() 也一样。

通常，反连接模式在大型集合上效率更高：

```
SELECT o.*
  FROM offers o
  LEFT
  JOIN aff_disabled_offers d
    ON d.user_id = '1'
   AND d.offer_id = o.id
 WHERE d.offer_id IS NULL
   AND o.country_iso = '$country_iso'
 ORDER BY rand()
 LIMIT 7 
```

# c# - 在后面的代码中设置自定义用户控件的属性

> ID：14289149
> 
> 赞同：1
> 
> 时间：2013-01-12T01:09:32.380
> 
> 标签：c#, asp.net, user-controls

我发现这个问题显示了自定义用户控件（ascx）上的属性可以作为 HTML 属性内联分配：[UserControl (*.ascx) 中的自定义属性？](https://stackoverflow.com/q/5239478/266535)

这很好用，但是如果我在我的页面上注册一个自定义用户控件并想在我的代码中设置/获取该控件的属性怎么办？

ASPX：

```
<%-- I can assign ActivePage inline and this works fine --%>
<wd:NavBar ID="MyNavBar" runat="server" ActivePage="navbarItem1" /> 
```

ASPX.CS：

```
 // I need to change the ActivePage 
        if (what == "internal")
        {
            RunInternalComparison();
            MyNavBar.ActivePage = "navbarItem1";
        }
        else if (what == "external")
        {
            RunExternalComparison();
            MyNavBar.ActivePage = "navbarItem2";
        } 
```

这就是我想做的，但它不起作用。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:14:09.313

干！这实际上有效。我猜 Visual Studio 不是自动生成控件。只需添加`protected NavBar MyNavBar;`到我的页面顶部即可解决问题。我希望其他人觉得这很有用。

# html - 如何安排div内联？

> ID：14289153
> 
> 赞同：1
> 
> 时间：2013-01-12T01:09:45.453
> 
> 标签：html, css

HTML：

```
<div id="header">
    <div id="logo" class="block"><h1>Logo place</h1></div>
    <div id="navigation" class="block">
        <ul>
            <li><a href="index.html" class="current"><span class="meta">Homepage</span><br />Home</a></li>
            <li><a href="about.html"><span class="meta">Who are we?</span><br />About</a></li>
            <li><a href="contact.html"><span class="meta">Get in touch</span><br />Contact Us</a></li>
        </ul>
    </div>
</div> 
```

CSS：

```
#header .block{
    padding: 5px;
    display: inline-block;
    vertical-align: top;
}

#header #logo{
    float: left;
    vertical-align: middle;
}

#header #navigation{
    float: right;
    vertical-align: top;
}

#navigation li{
    display: inline-block;
}
#navigation li a {
    font-family:arial,sans-serif !important;
    display:block;
    padding:44px 0 0;
    text-decoration:none;
    color:#000000;
    font-size:14px;
    font-weight:bold;
} 
```

[http://jsfiddle.net/nonamez/gGrrm/](http://jsfiddle.net/nonamez/gGrrm/)

![在此处输入图像描述](../Images/c93f6fde04b24145b9d024d6e6af6ba6.png)

所以，我需要拿起 div 一点，它会与 logo 几乎处于同一水平。如果需要，可以有一个`height`. 可能有人可以为我的问题提供一些线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T01:16:03.200

您的菜单不在顶部的原因是因为

```
#navigation li a 
```

有填充：

```
padding:44px 0 0; 
```

所以通过将此行更改为：

```
padding:0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:16:21.277

为什么不使用位置：相对；底部：20px；

无论您要寻找什么结果，都是这样的……

[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_position_relative](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_position_relative)

# android - Android - AsyncTask 返回字符串数组

> ID：14289154
> 
> 赞同：-1
> 
> 时间：2013-01-12T01:09:54.053
> 
> 标签：android, json, android-asynctask

我之前问了一个问题，提到了与在 ListView 中显示 JSON 数据有关的错误。我被指向 AsyncTask，这让我非常困惑。我希望在我的 AsyncTask 中解析 JSON 数据并将其设置为 String[] 数组。顺便说一句，我阅读了文档。我需要关于如何做到这一点的帮助。这是我的错误代码：

```
class ShowTitlesTask extends AsyncTask<String[], Integer, String[]> {

    @Override
    protected String[] doInBackground(String[]... params) {
            URL jsonURL = new URL("http://gdata.youtube.com/feeds/api/users/illbehonest/uploads?v=2&alt=jsonc");
            URLConnection jc = jsonURL.openConnection();
            InputStream is = jc.getInputStream();
            String jsonTxt = IOUtils.toString(is);

            JSONObject json = (JSONObject) JSONSerializer.toJSON(jsonTxt);

            JSONObject jdata = json.getJSONObject("data");

            JSONArray jentry = jdata.getJSONArray("items");
            for (int entryNumber = 0; entryNumber<=25; entryNumber++){
                    JSONObject entry = jentry.getJSONObject(entryNumber);
                    String[][] jtitle = {entry.getString("title")};
                    params = jtitle;
            }
            return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:18:23.483

尝试这个：

```
 @Override
    protected String[] doInBackground(String[]... params) {
            List<String> result = new ArrayList<String>();                
            URL jsonURL = new URL("http://gdata.youtube.com/feeds/api/users/illbehonest/uploads?v=2&alt=jsonc");
            URLConnection jc = jsonURL.openConnection();
            InputStream is = jc.getInputStream();
            String jsonTxt = IOUtils.toString(is);

            JSONObject json = (JSONObject) JSONSerializer.toJSON(jsonTxt);

            JSONObject jdata = json.getJSONObject("data");

            JSONArray jentry = jdata.getJSONArray("items");
            for (int entryNumber = 0; entryNumber<=jentry.lenght(); entryNumber++){
                    JSONObject entry = jentry.getJSONObject(entryNumber);
                    result.add(entry.getString("title");
            }

            return result.toArray(new String[result.size()]);
    } 
```

顺便说一句，您使用的一些方法会`doInBackground`抛出不同的异常，因此您必须用一个`try/catch`块将它们包围起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:20:57.177

我不知道这是否是您唯一的问题，但在您的方法标题中，您显示该方法返回

`String[]`

但你实际上回来了`null`

# java - 适用于安卓的 PDF 查看器 API

> ID：14289156
> 
> 赞同：5
> 
> 时间：2013-01-12T01:10:14.020
> 
> 标签：java, android, pdf

> **可能重复：**
> [实现 PDF 阅读器的代码示例](https://stackoverflow.com/questions/11152956/example-of-code-to-implement-a-pdf-reader)

**是否有可用于我的应用程序的免费 PDF 查看器？**

我正在寻找一个 PDF 查看器，它可以搜索、突出显示文本、查看用户想要的页面，并且不会更改 PDF 文件的内容。与 Adob​​e Reader 类似，但适用于可以在应用程序中实现的 Android。

您可以将我链接到相同的问题或源代码。

**编辑：**

我发现了这个问题“ [Pdf viewer api/library for android app sample code?](https://stackoverflow.com/questions/6728920/pdf-viewer-api-library-for-android-app-sample-code) ”但我认为他正在寻找一个**Reader**。这个问题“ [pdf viewer library for android](https://stackoverflow.com/questions/7894212/pdf-viewer-library-for-android) ”我读到查看pdf应该是本机的，解决方案是使用外部应用程序。

如果我使用外部应用程序，我希望外部应用程序以编程方式接受 PDF 文件路径、要查看的页面和用于搜索的关键字，但我认为外部应用程序不会让我这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T05:04:23.233

使用下面的代码使用 PDFViewer.jar 库读取 PDF，它将解决您的问题。

第一个.java

```
public class First extends ListActivity {

    String[] pdflist;
    File[] imagelist;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);

        File images = Environment.getExternalStorageDirectory();
        imagelist = images.listFiles(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return ((name.endsWith(".pdf")));
            }
        });
        pdflist = new String[imagelist.length];
        for (int i = 0; i < imagelist.length; i++) {
            pdflist[i] = imagelist[i].getName();
        }
        this.setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, pdflist));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        String path = imagelist[(int) id].getAbsolutePath();
        openPdfIntent(path);
    }

    private void openPdfIntent(String path) {
        try {
            final Intent intent = new Intent(First.this, Second.class);
            intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
            startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

二.java

```
public class Second extends PdfViewerActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

    public int getPreviousPageImageResource() {
        return R.drawable.left_arrow;
    }

    public int getNextPageImageResource() {
        return R.drawable.right_arrow;
    }

    public int getZoomInImageResource() {
        return R.drawable.zoom_in;
    }

    public int getZoomOutImageResource() {
        return R.drawable.zoom_out;
    }

    public int getPdfPasswordLayoutResource() {
        return R.layout.pdf_file_password;
    }

    public int getPdfPageNumberResource() {
        return R.layout.dialog_pagenumber;
    }

    public int getPdfPasswordEditField() {
        return R.id.etPassword;
    }

    public int getPdfPasswordOkButton() {
        return R.id.btOK;
    }

    public int getPdfPasswordExitButton() {
        return R.id.btExit;
    }

    public int getPdfPageNumberEditField() {
        return R.id.pagenum_edit;
    }
} 
```

并在清单文件中声明了这两个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:17:30.273

If you want an API, I don't think there are any free ones. I recently had to build one into an app for my employer, we ended up having a choice of 3 paid libraries, the cheapest of which was around $1K/app. If you just want to launch it in an external app, you can download a free one and launch the view intent on the file.

# c# - 分布式事务可选连接器

> ID：14289157
> 
> 赞同：0
> 
> 时间：2013-01-12T01:10:14.090
> 
> 标签：c#, mysql

我们需要一个使用 C# 运行分布式应用程序。我们发现 .net 连接器与 mysql 的问题不支持这个。我们发现了这个声称支持它的 devar 产品。任何有使用头脑的经验的人来分享它是如何工作的，或者有没有更好的工具？

# xcode - 以 JSON 格式获取 reddit 提要并解析它

> ID：14289159
> 
> 赞同：2
> 
> 时间：2013-01-12T01:10:26.453
> 
> 标签：xcode, json, tableview

我正在尝试解析来自 reddit.com 的 JSON 提要，然后将其显示在表格视图中。JSON 看起来像这样：

```
{
kind: Listing
data: {
modhash: 3lmt2d4hq6797af804da91bde566bd067ddee68e1e7f8e0dda
children: [
{
kind: t3
data: {
domain: imgur.com
banned_by: null
media_embed: { }
subreddit: funny
selftext_html: null
selftext: 
likes: null
link_flair_text: null
id: 16e9so
clicked: false
title: I left my dog unattended with the 2 year old...
num_comments: 166
score: 2213
approved_by: null
over_18: false
hidden: false
thumbnail: http://c.thumbs.redditmedia.com/DaoiOlvtdjaPBG3n.jpg
subreddit_id: t5_2qh33
edited: false
link_flair_css_class: null
author_flair_css_class: null
downs: 2481
saved: false
is_self: false
permalink: /r/funny/comments/16e9so/i_left_my_dog_unattended_with_the_2_year_old/
name: t3_16e9so
created: 1357963292
url: http://imgur.com/zGMxP
author_flair_text: null
author: ShaneNickerson
created_utc: 1357934492
media: null
num_reports: null
ups: 4694
}
...more items here
} 
```

这是我的 tableview 控制器代码：

```
 #import "mainRedditFunViewController.h"
    #define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)

    #define kjsonURL [NSURL URLWithString: @"http://reddit.com/r/funny/.json"
@interface mainRedditFunViewController ()

@end

@implementation mainRedditFunViewController

- (void)viewDidLoad

{

    [super viewDidLoad];

    dispatch_async(kBgQueue, ^{

        NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://reddit.com/r/funny/.json"]];

        [self performSelectorOnMainThread:@selector(fetchedData:)
                               withObject:data waitUntilDone:YES];

    });

}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

{

    // Return the number of sections.

    return 1;

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] ;
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    NSDictionary *appsdict = [jsonResults objectAtIndex:indexPath.row];

    NSString *VersionString = [appsdict objectForKey:@"url"];

    NSString *priceString = [appsdict objectForKey:@"author"];

    NSURL *imageURL = [NSURL URLWithString:[appsdict objectForKey:@"thumbnail"]];

    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];

    UIImage *imageLoad = [[UIImage alloc] initWithData:imageData];

    cell.textLabel.text = [appsdict objectForKey:@"title"];

    cell.detailTextLabel.text = [NSString stringWithFormat:@"URL: %@ Author: $ %@ USD",VersionString,priceString];

    cell.imageView.image = imageLoad;

    return cell;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{

    // Return the number of rows in the section.

    return [jsonResults count];

}

- (void)fetchedData:(NSData *)responseData {

    NSError* error;

    NSDictionary* json = [NSJSONSerialization

                          JSONObjectWithData:responseData

                          options:kNilOptions

                          error:&error];

    jsonResults = [json objectForKey:@"data.children"];

    [self.tableView reloadData];

}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

但是，输出完全为空。无论如何我可以解决它吗？我之前用另一个（较小的）提要尝试过，效果很好。我确定我是否正确地进行了 JSONPath 格式设置，因为我看起来像这样：

```
-kind
 ->data
  ->children
    ->data (my items)
    ->data
    ->data
    ... 
```

我会很感激我得到的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:52:55.347

对不起，这个答案来晚了！希望还是需要的。。。

我稍微修改了您的代码以访问返回的 Json 结果的子级别。

您当然有正确的想法，但只需要在您的 fetchedData 方法中添加一些字典。如果您在 NSJSONSerialization 下的方法中添加这些字典；

```
 NSDictionary* json = [NSJSONSerialization

                      JSONObjectWithData:data

                      options:kNilOptions

                      error:&error];

//NSArray *Fullarray = [[NSArray alloc] initWithObjects:json, nil];

_jsonResult = [[NSMutableArray alloc] init];

NSDictionary *dataDict = [json objectForKey:@"data"];
NSDictionary *chilrenDict = [dataDict objectForKey:@"children"];

for (NSDictionary *informationFromChild in chilrenDict) {
    NSLog(@"chil %@", chilrenDict);
    [_jsonResult addObject:chilrenDict];
} 
```

然后在您的 tableView cellForRow 中将您的 appsDict 更改为此

```
NSDictionary *appsdict = [[_jsonResult objectAtIndex:indexPath.row] objectForKey:@"data"]; 
```

那应该修复代码并填充tableView ...您也可以通过检查来对此进行检查

```
NSLog(@"count %i", [_jsonResult count]); 
```

![表格视图中填充的数据](../Images/c808fb98440976c91f5ff6d9e03fa9c8.png)

让我知道这是否有帮助，快乐的编码。吨

# android - 按下后退按钮时调用方法

> ID：14289160
> 
> 赞同：3
> 
> 时间：2013-01-12T01:10:30.953
> 
> 标签：android, database, list, refresh

我的应用程序中有一个列表。在另一个活动中，用户从数据库中删除一行并返回到主要活动（我在这里使用 finish()）。当它返回时，已从数据库中删除的行仍在列表中。如果用户按下刷新按钮，它就会消失。
如何自动刷新它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T01:12:12.993

覆盖您原来的 Activity（当用户按下返回时显示的那个）`onResume()`，所以它看起来像：

```
@Override
protected void onResume()
{
  refreshListMethod();
  super.onResume();
} 
```

`refreshListMethod();`是您选择刷新列表的任何方法，因为您说：

> 用户按下刷新按钮，它消失了。

所以把这种方法变成一种方法，这样你就可以在需要的地方使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:13:50.030

重新创建`Activity`当您单击列表项时，您可以调用然后`finish()`在删除新行后`ListActivity`重新`Activity`创建`Intent``Activity`

# asp.net - 以编程方式将 PagedControlID 分配给 DataPAger

> ID：14289162
> 
> 赞同：0
> 
> 时间：2013-01-12T01:10:46.797
> 
> 标签：asp.net, viewstate, page-lifecycle, datapager

所以我正在努力解决，我相信更多的是页面生命周期/视图状态问题。我有一个托管三个 ListView 控件的页面。任何时候都只能看到一个。我想使用单个 DataPager，以编程方式将 DataPager 的 PagedControlID 分配给可见 ListView 的 ID。可能需要指出 DataPager 包含在用户定义的用户控件 (ASCX) 中，它主要只是传递给 DataPager。

该错误似乎很简单......

```
[InvalidOperationException: No IPageableItemContainer was found. Verify that either the DataPager is inside an IPageableItemContainer or PagedControlID is set to the control ID of an IPageableItemContainer.]
System.Web.UI.WebControls.DataPager.LoadControlState(Object savedState) +628838
   System.Web.UI.Control.LoadControlStateInternal(Object savedStateObj) +137
   System.Web.UI.Page.LoadAllState() +342
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2533 
```

这是当前的事件顺序。

1.  我有一个“摘要”页面，它链接到显示 ListView(s) 的“详细信息”页面。

2.  当我单击“SUMMARY”页面中的链接时，控制权被转移（未重定向）到“DETAIL”页面，允许我通过 Page.PreviousPage 属性将“SUMMARY”页面的属性转发给“DETAIL”页。

3.  在目标“DETAIL”页面的 OnInitComplete 事件中，我将“PreviousPage”中的属性值分配给新“DETAIL”页面中的属性。

    ```
    protected override void OnInitComplete(EventArgs e)
    {
        IExceptionPage previousPage = (PreviousPage != null) ? ((IExceptionPage)PreviousPage) : null;
        if (previousPage != null)
        {
            this.ActiveListID       = previousPage.ActiveListID;
            this.ActionType         = previousPage.ActionType;
            this.CategoryTheme      = previousPage.CategoryTheme;
            this.ExceptionCode      = previousPage.ExceptionCode;
        }
    } 
    ```

4.  这些“详细”页面属性只是读取和写入 ViewState，因此通过在 OnInitComplete 事件中为这些属性分配值，我希望这些值将在此页面上的未来回发之间保持不变。这些属性之一是我希望 DataPager 绑定到的 ListView 的 ID。

    ```
    public String ActiveListID
    {
        get { return (String)ViewState["ActiveListID"]; }
        set { ViewState["ActiveListID"] = value; }
    } 
    ```

5.  现在在 OnPreLoad 事件中，我将 DataPager 控件的 PagedControlID 属性设置为存储在 ViewState 属性中的 ListView 的 ID。

6.  页面的初始加载没有问题。

7.  当我尝试执行任何发回页面的操作时，就会出现问题。在 OnInitComplete 和 OnPreLoad 事件处理程序之间会引发“InvalidOperationException”错误。

查看错误，似乎没有正确设置 Pager 的 PagedControlID 属性。我不明白为什么。

1.  寻呼机不应该记住之前设置的 PagedControlID 吗？不是存储在Pagers自己的ViewState中吗？

2.  如果不是，那么为什么在 OnPreLoad 之前抛出错误，其中 ViewState 跟踪已打开（这与 Microsoft 的[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datapager.pagedcontrolid%28v=vs.90%29.aspx)不一致，他们在 OnLoad 事件中将其设置为向下）？

3.  我试图在 PreLoad 事件之前在 OnInit 事件中设置 PagedControlID，但我遇到了一个问题，即我在最初加载页面时设置的 ID 不再存在于 ViewState 中，因此我得到了一个 NULL 值。我也不明白为什么没有将 ID**保存**到 ViewState。根据[我引用的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)，在 OnInitComplete 事件中设置它应该包含在跟踪的 ViewState 值中。

如果有人对此有任何想法，我将不胜感激。

谢谢，G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:59:43.880

根据堆栈跟踪，在`InvalidOperationException`加载视图状态*之前*`LoadControlState`调用它。如果您没有以声明方式设置（在 .ascx 中），那么在页面生命周期的这一点上它仍然是一个空字符串。*`PagedControlID`*

 *MSDN 库示例在一个重要方面与您的代码不同：`DataPager`动态*构造*、初始化并添加到页面。`LoadControlState`在添加到页面之前不会调用`DataPager`，此时`PagedControlID`已经初始化。

ASP.NET 团队似乎并不真正打算支持`PagedControlID`动态设置的属性。我想您唯一可以尝试的是模拟 MSDN Library 示例并`DataPager`动态添加。*

# c++ - LNK1120：1 个未解析的外部符号和 LNK2019：未解析的外部符号

> ID：14289170
> 
> 赞同：1
> 
> 时间：2013-01-12T01:12:42.497
> 
> 标签：c++, matrix, external, lnk2019

我一直遇到这两个错误，我似乎找不到有效的解决方案。

> LNK1120：1 个未解决的外部因素
> 
> 错误 1 ​​错误 LNK2019：函数“public: class Vector3D __thiscall Vertex::GetPosition( void)" (?GetPosition@Vertex@@QAE?AVVector3D@@XZ)

我认为这与我的 Matrix 运算符和 Vector 3d 类中的构造函数有关 任何帮助将不胜感激，因为我对 C++ 很陌生

```
#ifndef MATRIX4_H
#define MATRIX4_H

#include "Vector3D.h"

class Matrix4
{
    public:
    Matrix4();
    Matrix4(const Matrix4& rhs);
    ~Matrix4();

    Vector3D Matrix4::operator *(Vector3D vector)
    {
        Vector3D newVector;

        newVector.SetVector_X((m[0][0] * vector.GetVector_X()) + (m[0][1] * vector.GetVector_Y()) + (m[0][2] * vector.GetVector_Z()) + m[0][3]);
        newVector.SetVector_Y((m[0][0] * vector.GetVector_X()) + (m[1][1] * vector.GetVector_Y()) + (m[1][2] * vector.GetVector_Z()) + m[1][3]);
        newVector.SetVector_Z((m[0][0] * vector.GetVector_X()) + (m[2][1] * vector.GetVector_Y()) + (m[2][2] * vector.GetVector_Z()) + m[2][3]);
        return Vector3D(newVector.GetVector_X(),newVector.GetVector_Y(),newVector.GetVector_Z());

    }

    void SetMatrix(float matrix[4][4])
    {
        memcpy(m,matrix,sizeof(matrix));
    }

    private:
      float m[4][4];
   }; 
   #endif 
```

Vector3D.h 文件

```
#ifndef VECTOR3D_H
#define VECTOR3D_H

class Vector3D
{
  public:
    Vector3D();
    Vector3D(const Vector3D& rhs);
    ~Vector3D();

    Vector3D(float VectorX, float VectorY, float VectorZ)
    {
        x=VectorX;
        y=VectorY;
        z=VectorZ;
    }

    void SetVector3D(float vector_X, float vector_Y, float vector_Z)
    {
        x = vector_X;
        y = vector_Y;
        z = vector_Z;
    }

    void SetVector_X(float vector_X)
    {
        x=vector_X;
    }

    void SetVector_Y(float vector_Y)
    {
        y=vector_Y;
    }

    void SetVector_Z(float vector_Z)
    {
        z=vector_Z;
    }

    float GetVector_X()
    {
        return x;
    }

    float GetVector_Y()
    {
        return y;
    }

    float GetVector_Z()
    {
        return z;
    }

    Vector3D GetVector()
    {
        return Vector3D(x,y,z);
    }

private:
    float x;
    float y;
    float z;

   };
  #endif 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T01:18:40.427

它说链接器找不到`Vector3D(const Vector3D& rhs);`. 此构造函数在您的向量类中声明，但未定义。

您是否在文件的某处实现了构造函数`.cpp`，并且您的编译器是否知道该文件？

C/C++ 编译是这样工作的：首先，您有许多所谓的“编译单元”——通常，每个`.cpp`文件都是一个这样的编译单元。您的程序由链接在一起的所有这些单独的单元组成（“链接”过程，发生在编译之后）。每个在某处调用的函数都必须只定义**一次**在某些编译单元中，除非它是内联定义的（如您的类的其他方法）。如果声明了一个方法，但没有定义，编译器不会抱怨——只有链接器会抱怨。想象一下编译单元具有适合其他单元的相应“套接字”的“套接字”和“连接器”。编译过程只是创建这些单元，假设特定的“套接字”形状（由声明给出），而链接器实际上试图将每个“套接字”与它的“连接器”连接起来。因此，您会看到编译过程如何成功，但链接却没有。

链接器错误可能很难解决，尤其是在您还没有经验的情况下。它们可能有很多原因：

*   缺少实现/定义
*   定义存在，但不知何故未编译（因为文件未传递给编译器等）
*   不同版本的库等。

还有很多..

**编辑：**除此之外，您应该通过 const 引用传递向量，并通过调用它的构造函数来创建 newVector，而不是创建默认构造对象然后分配。`return statement`并且也不需要最后的构造。改进的代码：

```
Vector3D Matrix4::operator *(const Vector3D& vector)
{
    return Vector3D(
        (m[0][0] * vector.GetVector_X()) + (m[0][1] * vector.GetVector_Y()) + (m[0][2] * vector.GetVector_Z()) + m[0][3],
        (m[0][0] * vector.GetVector_X()) + (m[1][1] * vector.GetVector_Y()) + (m[1][2] * vector.GetVector_Z()) + m[1][3],
        (m[0][0] * vector.GetVector_X()) + (m[2][1] * vector.GetVector_Y()) + (m[2][2] * vector.GetVector_Z()) + m[2][3]
    );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T01:17:26.267

您的实现`Vector3D`似乎缺少复制构造函数的实际实现，因此存在未解决的外部错误。如果您不打算复制 Vector3D 对象，则不能`Matrix::operator*`按值传递它，因为这会触发复制。

也就是说，我认为没有任何理由声明和实现复制构造函数，`Vector3D`因为它只包含 POD 类型，编译器生成的复制构造函数可以正常工作。析构函数也是如此，没有需要管理的资源，所以让编译器完成它的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T01:18:10.757

你实现了`Vector3D`默认构造函数、复制构造函数和析构函数吗？您显示了标题，但没有显示实现文件。链接器抱怨缺少`Vector3D::Vector3D(Vector3D const&)`.

# freemarker - 参数化 freemarker 内置

> ID：14289177
> 
> 赞同：1
> 
> 时间：2013-01-12T01:14:07.343
> 
> 标签：freemarker, built-in

freemarker中表达式的内置部分可以参数化吗？如果是这样，怎么做？

例如，可以使用以下内置函数格式化日期：

```
${openingTime?string.short}
${openingTime?string.medium}
${openingTime?string.long}
${openingTime?string.full} 
```

string.short/string.medium/... 内置名称也可以参数化吗？

例如，我想做类似的事情：

```
${openingTime?${mydatefmt}} 
```

其中 mydatefmt 是 'string.short' 或任何有效格式。

这样就可以轻松地更改 freemarker 页面上的日期格式。

我想将更改限制为页面/文件，而不是全局应用。

是否需要将类似的内容放入可能预测可能需要的所有可能类型的日期格式的 Freemarker 宏中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:26:59.287

一种方法是使用`openingTime?string(pattern)`，其中 pattern 可以是任何类型的计算结果为字符串的表达式。但它非常冗长且有点慢，因为模式将一次又一次地重新解析。

另一种方法是设置`date_format`,`time_format`和`datetime_format`FreeMarker 设置，然后只写`${openingTime}`. （实际上，如果`openingTime`不是 的`javax.sql`子类`java.util.Date`，则必须编写`${openingTime?datetime}`，因为 Java API 不知道 date-time、time 和 date-only 的区别，但这是另一回事。） FreeMarker 设置可以全局设置（更好的说法是，在`Configuration`级别上），在模板级别上（但你通常不这样做），或者在`Environment`. 请参阅[http://freemarker.org/docs/pgui_config_settings.html](http://freemarker.org/docs/pgui_config_settings.html)。最后一个也可以在 FTL 中完成，例如`<#setting datetime_format = 'yyyy-MM-dd HH:mm:ss zzzz'>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:05:23.273

您必须明确指定格式模式：`${openingTime?string("yyyy-MM-dd HH:mm:ss zzzz")}`

日期格式可以是表达式，例如 : `${openingTime?string(mydatefmt)}`。

# php - Zend 框架 - 未指定参数

> ID：14289179
> 
> 赞同：0
> 
> 时间：2013-01-12T01:14:20.463
> 
> 标签：php, zend-framework, zend-route

我这里有个小问题。我目前正在尝试使用 Zend Router Rewrite，但出现此错误：

```
Fatal error: Uncaught exception 'Zend_Controller_Router_Exception' with message 'alias is not specified' 
```

这是我的路线代码：

```
// BLOG -> CATEGORIES -> LIST ARTICLES
$route = new Zend_Controller_Router_Route(
    '/blog/categories/:alias',
    array(
        'module'     => 'blog',
        'controller' => 'categories',
        'action'     => 'list'
    )
);
$router->addRoute('blog-categories-list', $route); 
```

我试图访问的 URL 是：`/blog/categories/general/`.

为什么我会收到此错误？

PS：我没有指定默认值，`:alias`因为我也有这条路线：

```
// BLOG -> CATEGORIES
$route = new Zend_Controller_Router_Route(
    'blog/categories/',
    array(
        'module'     => 'blog',
        'controller' => 'categories',
        'action'     => 'index'
    )
);
$router->addRoute('blog-categories', $route); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:17:27.747

此错误可能来自您尝试使用路由输出链接的地方，例如 URL 帮助程序：

```
$this->url(array(), 'blog-categories-list') 
```

它告诉您您也需要将“别名”传递给它。

# safari - 在没有 Safari 的 Windows 中创建 .webarchive？

> ID：14289181
> 
> 赞同：2
> 
> 时间：2013-01-12T01:14:28.703
> 
> 标签：safari, webkit, webarchive

有没有办法使用 Windows 而不使用 Safari 将网站转换为 Safari 的 .webarchive？

我知道这是一个奇怪的请求，但我需要创建 .webarchive 文件并将它们加载到 UIWebView 中，并且（由于我无法控制的各种原因）使用 Safari 或 Mac 不是一种选择。

我在想 Webkit 可能有一些可用的方法，但运气不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T01:52:44.200

以下是不相关问题的替代方案：

*   [将 HTML 页面转换为 dataURI](https://stackoverflow.com/questions/9238890/)
*   [使用 HTML5 Canvas 截屏](https://stackoverflow.com/questions/4912092/)

# r - 有条件地从 data.frame 中删除重复项

> ID：14289182
> 
> 赞同：2
> 
> 时间：2013-01-12T01:14:33.007
> 
> 标签：r, dataframe, subset

我试图弄清楚如何根据变量的重复值对我的数据集进行子集化`s`，同时考虑`id`到与行的关联。

假设我的数据集是：

```
dat <- read.table(text = "
        id     s          
        1      2     
        1      2     
        1      1      
        1      3     
        1      3     
        1      3     
        2      3     
        2      3     
        3      2     
        3      2", 
header=TRUE) 
```

我想做的是，对于每个`id`，只保留第一行`s = 3`。结果`dat`将是：

```
 id     s          
        1      2     
        1      2     
        1      1      
        1      3         
        2      3         
        3      2     
        3      2 
```

我已经尝试同时使用`duplicated()`和`which()`使用`subset()`，但我不会去任何地方。主要问题是隔离“块”的第一行是不够的`s = 3`，因为在某些情况下（如在`id = 1`and之间`id = 2`）3 在一个 id 和另一个之间的重叠。你会采用哪种策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:37:54.503

像这样：

```
subset(dat, s != 3 | s == 3 & !duplicated(dat)) 
#    id s
# 1   1 2
# 2   1 2
# 3   1 1
# 4   1 3
# 7   2 3
# 9   3 2
# 10  3 2 
```

请注意，使用它`subset`可能很危险（请参阅[为什么 `[` 比 `subset` 更好？](https://stackoverflow.com/questions/9860090/in-r-why-is-better-than-subset)），因此更长但更安全的版本是：

```
dat[dat$s != 3 | dat$s == 3 & !duplicated(dat), ] 
```

# html - 类中的字体和 Id

> ID：14289184
> 
> 赞同：0
> 
> 时间：2013-01-12T01:15:11.990
> 
> 标签：html, class, css, fonts

这是两个类似代码，一个使用 id，另一个使用 class：Css 代码 {1}：

```
.section{ margin-bottom:25px; }
    .last{ margin-bottom:0px; }
    .section-name{  font-family: 'Sulphur' ; font-size:20px; padding-bottom:10px; color:#2F6AB3;  } 
```

html代码{1}：

```
<h2 class="section-name">Personal Details</h2> 
```

CSS代码{2}：

```
 .section{ margin-bottom:25px; }
    .last{ margin-bottom:0px; }
    #section-name{  font-family: 'Sulphur' ; font-size:20px; padding-bottom:10px; color:#2F6AB3;  } 
```

html代码{2}：

```
 <h2 id="section-name">Personal Details</h2> 
```

在第一个 Code {1} 类中，它没有显示正确的字体系列“Sulphur”。但在第二个代码 {2} 中，它显示正确的字体：“硫磺”。所以我需要知道为什么？有两个原因，两个提高我的开发技能，因为我在这里我想使用这个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:29:01.403

当我测试这段代码时，它对我来说很好：

```
<!DOCTYPE HTML>
<html>
<head>
    <style type="text/css">
        .section{ margin-bottom:25px; }
        .last{ margin-bottom:0px; }

        .section-name{  font-family: 'Sulphur' ; font-size:50px; padding-bottom:10px; color:#2F6AB3;  }

        #section-name{  font-family: 'Sulphur' ; font-size:10px; padding-bottom:10px; color:#2F6AB3;  }
    </style>
</head>
<body>
<h2 class="section-name">Personal Details</h2>
<h2 id="section-name">Personal Details</h2>
</body>
</html> 
```

您应该向我们展示您的完整代码。

# google-apps-script - 无法在 Google Apps 脚本 (GAS) 的面板中生成背景图片

> ID：14289187
> 
> 赞同：0
> 
> 时间：2013-01-12T01:15:21.200
> 
> 标签：google-apps-script

我的印象是 .setStyleAttribute 应该支持“backgroundIamge”，以允许用户通过以下方式在面板中设置背景图像：

`setStyleAttribute("backgroundImage","url('myImageUrl')");`

但是，当我尝试以下操作时：

```
var panel = app.createVerticalPanel().setId('panel')
  .setStyleAttribute('text-align', 'center')
  .setStyleAttribute('zIndex', '3')
  .setStyleAttribute('position', 'fixed')
  .setStyleAttribute('left', 10)
  .setStyleAttribute('top', 10)
  .setWidth(250)
  .setHeight(150)
  .setStyleAttribute('backgroundImage',"url('https://myImage.png')"); 
```

我无法在面板中生成背景图像。有趣的是完全相同的代码会在按钮中生成背景图像。我也尝试过“背景”和“背景图像”，但无济于事。面板不支持“背景图像”还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:26:59.610

我想通了...您需要使用 createAbsolutePanel 或将空标签添加到其他类型的面板。

# sql - Razor VB - 如果请求变量为空，则传递 Null 值

> ID：14289190
> 
> 赞同：1
> 
> 时间：2013-01-12T01:15:27.707
> 
> 标签：sql, vb.net, sql-server-2005, razor

我一直在努力寻找解决方案，但没有运气。我对 VB 和 SQL 还很陌生，但这应该不会太难。我继承了很多代码，没有太多空间来更改 db 属性类型或任何东西。

我正在尝试使用 Razor 中的参数运行 UPDATE 查询，如下所示：

```
 Dim updateCommand = "UPDATE [tblJobRating] SET [ProjectManagement] = @0, [ProjComments] = @1, [Schedule] = @2, [SchedComments] = @3 WHERE [JobRatingID] = @4" 
```

所有有问题的列都需要 INT 值，但我有一个例外，我需要传递一个空值（传递另一个数字或零是不行的）。本质上是用户的“N/A”值。

我从 Post 请求中分配变量，如下所示：

```
Dim projMgmt = Request.Form('projMgmt')
' ...
Dim sched = Request.Form('sched') 
```

我的“N/A”值现在没有发布任何值（或者它可以是一个字符串，如果需要，我可以检查 IsNumber，我猜）。但是当我调用查询执行时，它输入的值是 0。

```
db.Execute(updateCommand, projMgmt, projComments, sched, schedComments, ratingId) 
```

它需要为 NULL 值才能使后端正常工作。我尝试过类型检查和传递`Nothing`,`System.Data.SqlTypes.SqlInt32.Null`等，但它要么给出转换错误，要么设置为 0。我怎样才能正确传递它？

**编辑：**我遗漏了 db.Execute 方法中的第一个参数，传入了 updateCommand。为清晰起见进行了编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:29:13.453

问题出在您的 vb 变量定义中。我假设你有一个整数，它必须是一个可空的（整数）一直到 SQL。这也可以写成整数？。

# f# - 将数据共享到嵌入式 FSI 会话中

> ID：14289192
> 
> 赞同：4
> 
> 时间：2013-01-12T01:15:45.320
> 
> 标签：f#

我有一个现有的应用程序，我希望能够在其中拥有自己的 FSI 会话。虽然不是标准的 FSI 会话，但我希望能够使用我的应用程序中的数据预先填充 FSI 会话。

举个例子。在我的应用程序中，发生了一个现有的过程。数据已创建，我启动 FSI 会话。FSI 会话将预加载已计算的数据。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:14:53.883

今天最正确的答案是使用[F# Compiler Services](http://fsharp.github.io/FSharp.Compiler.Service/)。交互式服务允许[在您的应用程序中嵌入 F# 交互式](http://fsharp.github.io/FSharp.Compiler.Service/interactive.html)。

其他选项：

1.  您可以将数据格式化为有效的 F# 代码并将其执行到 FSI 中，或者将数据序列化为字符串并使用 F# 反序列化。在这种情况下，Mathias Brandewinder 的文章“[使用 FSI 从 .NET 应用程序执行 F# 代码](http://www.clear-lines.com/blog/post/Using-FSI-to-execute-FSharp-code-from-a-dot-NET-app.aspx)”可能对您有用。
2.  准备一个 API 来访问您的数据。例如，基于从 .NET 4.0 开始可用的[MemoryMappedFile 。](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx)在 FSI 会话开始后立即添加对您的程序集的引用（使用[FSI 指令](http://msdn.microsoft.com/en-us/library/dd233175.aspx)#r）并通过自定义 API 获取数据。
3.  使用 WCF 在两个进程之间进行通信。请参阅[Phillip Trelford 的回答](https://stackoverflow.com/questions/7527619/communication-between-processes-using-wcf-and-f/14757118#14757118)。

# jquery - 适用于 Google App Engine 的 DataTables 数据管理器 (CRUD) 插件

> ID：14289208
> 
> 赞同：0
> 
> 时间：2013-01-12T01:18:26.400
> 
> 标签：jquery, google-app-engine, jquery-datatables

我找到了 Google[的 DataTables Data Manager (CRUD) Add-on](http://jquery-datatables-editable.googlecode.com/svn/trunk/index.html)。我想知道这个插件是否可以与 Google App Engine (python) 一起使用，因为我的网站是由 GAE 开发的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:55:17.640

从[文档](http://jquery-datatables-editable.googlecode.com/svn/trunk/inline-edit.html)：

> 您将需要处理更新 AJAX 请求（本例中为 UpdateData.php）并接受以下参数的页面：
> 
> 1.  value - 包含用户编辑的单元格的新文本值
> 2.  id - 更新记录的 id（id 放置在单元格周围的标签中）
> 3.  columnId - 已编辑单元格的列的位置（隐藏列也被计算在内）
> 4.  columnPosition - 已编辑单元格的列的位置（不计算隐藏列）
> 5.  rowId - 包含已编辑单元格的行的 ID
> 
> 如果操作成功完成，服务器端页面应返回用户在编辑期间输入的值。否则，它应该返回错误消息。

这意味着您将需要编写自己的界面来处理更新，以及填充表中的数据。这是一个 jQuery 插件，完全在客户端。服务器端可以是任何东西，包括在 GAE 上运行的 python 应用程序。

# javascript - 防止 scrollTop 或 scrollTo 函数上的滚动事件

> ID：14289209
> 
> 赞同：1
> 
> 时间：2013-01-12T01:18:31.833
> 
> 标签：javascript, jquery

我正在做一个小 jQuery 插件，我遇到了一个问题。

我阅读了所有互联网但没有找到相关的答案......

我不得不说我根本不想阻止滚动，它有点复杂：

我有一个使用 jQuery 函数在窗口上滚动的系统`scrollTop(int y)`，但这与本机 javascript 相同`scrollTo(int y)`（或者`scrollBy`，确实如此）

当这些函数被调用时，它们会触发一个“滚动”事件。而且我不希望这些函数触发这个事件，所以我想阻止它。

jQuery`event.preventDefault();`不起作用，显然会导致它阻止事件处理函数中的事件操作，所以我只希望这个滚动事件甚至不被触发。

我将非常感谢您的帮助，因为我不知道如何做到这一点。

# javascript - Javascript 检查函数参数

> ID：14289213
> 
> 赞同：4
> 
> 时间：2013-01-12T01:19:43.627
> 
> 标签：javascript, oop, function

如何检查函数是否没有收到任何参数？例如，我希望能够创建一个接受多个输入的自定义函数，如下所示：

```
clear();      // clear all
clear('a');   // clear a
clear('b');   // clear b
clear('c');   // clear c
clear('d');   // clear d 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T01:20:48.213

您可以检查参数是否为[`undefined`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/undefined)：

```
function clear(variable) {
    if (variable === undefined) { ... }
} 
```

或简单地检查数量[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)：

```
function clear(variable) {
    if (arguments.length === 0) { ... }
} 
```

# c# - 控制台应用宿主wcf服务交互

> ID：14289214
> 
> 赞同：2
> 
> 时间：2013-01-12T01:19:57.963
> 
> 标签：c#, .net, wcf, console-application, servicehost

由控制台应用程序托管的 WCF 服务可以与所述控制台应用程序交互以执行 Console.WriteLine() 即最简单的方法是什么。

一些代码：

合同：

```
[ServiceContract(Name = "IProdsService")]
public interface IProdsService
{
    [OperationContract(Name = "Alert",IsOneWay=true)]
    void Alert(string msg);
} 
```

服务：

```
public class ProdsService : IProdsService
{
    //IProdsService.Alert implementation
    public void Alert(string msg)
    {
        //TODO: Send Alert to Console Application!
    }
} 
```

控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        ServiceHost prodService = new ServiceHost(typeof(ProdsService));
        ServiceDescription serviceDesciption = prodService.Description;
        prodService.Open();
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:43:17.967

以下是运行主机和客户端的示例，其中主机可以在控制台上记录消息。在你的例子中，我不确定你为什么设置`IsOneWay=true`. 对于这种特定情况，一种方法不是您想要的。另外，我在以下示例中使用了 net.tcp 绑定；它也应该与任何其他绑定一起使用。

基本上在示例中，用户的条目被发送到主机服务，该服务在控制台上回显消息。

```
[ServiceContract]
public interface IProdsService
{
    [OperationContract]
    void Alert(string msg);
}

/// <summary>
/// Host Class
/// </summary>
public class ProdsService : IProdsService
{
    public ProdsService()
    {
        Console.WriteLine("Service instantiated.");
    }

    public void Alert(string msg)
    {
        Console.WriteLine(msg);
    }
}

/// <summary>
/// Client proxy wrapper
/// </summary>
public class ProdsServiceClient : ClientBase<IProdsService>, IProdsService
{
    public ProdsServiceClient()
    {
    }

    public ProdsServiceClient(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) :
        base(binding, remoteAddress)
    {
    }

    public void Alert(string msg)
    {
        base.Channel.Alert(msg);
    }
}

class Program
{
    static ManualResetEvent _reset;

    static void Main(string[] args)
    {
        string host = "localhost";
        int port = 8888;

        //ManualResetEvent is used for syncing start/stop of service.
        _reset = new ManualResetEvent(false);

        var action = new Action<string, int>(Start);
        var result = action.BeginInvoke(host, port, null, null);

        //Wait for svc startup, this can be synced with resetEvents.
        Thread.Sleep(2000);

        //Create a client instance and send your messages to host
        using (var client = new ProdsServiceClient(new NetTcpBinding(), new EndpointAddress(string.Format("net.tcp://{0}:{1}", host, port))))
        {
         client.Alert("Test message");

         string msg = string.Empty;
         do
         {
            Console.Write("Type a message to send (X to exit): ");
            msg = Console.ReadLine();
            client.Alert(msg);
         }
         while (!msg.Trim().ToUpper().Equals("X"));
        }

        //Signal host to stop
        _reset.Set();
        action.EndInvoke(result);

        Console.Write("Press any to exit.");
        Console.ReadKey();
    }

    static void Start(string host, int port)
    {
        string uri = string.Format("net.tcp://{0}:{1}", host, port);
        //var server = new ProdsService();
        ServiceHost prodService = new ServiceHost(typeof(ProdsService));
        prodService.AddServiceEndpoint(typeof(IProdsService), new NetTcpBinding(), uri);
        Console.WriteLine("Service host opened");
        prodService.Open();

        //Wait until signaled to stop
        _reset.WaitOne();
        Console.WriteLine("Stopping host, please wait...");
        prodService.Close();
        Console.WriteLine("Service host closed");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:32:00.603

呃，我的错，只是从警报操作中调用console.writeline就可以了，我被单向愚弄并且没有得到错误......所以这对我来说不再是单向......

# python - 不明白为什么这不能正确总结

> ID：14289215
> 
> 赞同：7
> 
> 时间：2013-01-12T01:20:39.353
> 
> 标签：python

```
grades = [100, 100, 90, 40, 80, 100, 85, 70, 90, 65, 90, 85, 50.5]

def grades_sum(grades):
    sum = 0
    for i in grades:
        sum += grades[i]
print(grades_sum(grades)) 
```

那是我的代码，我试图理解为什么我会得到一个索引外的回溯。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T01:22:13.940

遍历列表将返回列表中的项目，而不是项目的索引。您编写的正确代码如下所示：

```
def grades_sum(grades):
    total = 0
    for grade in grades:
        total += grade 
    return total 
```

当然，正如其他人已经回答的那样，使用[`sum`](http://docs.python.org/2/library/functions.html#sum).

如果您确实需要其他索引，则可以这样使用[`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)：

```
def grades_sum(grades):
    total = 0
    for i, grade in enumerate(grades):
        total += grade #or grades[i] 
    return total 
```

或者，如果您根本不关心检索该项目

```
def grades_sum(grades):
    total = 0
    for i in range(len(grades)):
        total += grades[i] 
    return total 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-12T01:22:10.480

您不需要这样做，`grade[i]`因为您已经在引用列表中的元素 - 您需要做的就是用普通旧的替换它`i`

但是，已经有一个内置函数 -`sum`

```
print(sum(grades)) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-12T01:22:25.167

`for i in grades:`遍历`grades`. 它不会遍历索引。

要修复您的代码，只需使用`i`而不是`grades[i]`.

不要害怕使用`print`语句。它们非常适合调试代码。

# ruby - 我在 Mac OS X 上收到“RVM 不是函数”错误，并且没有发布的解决方案有效

> ID：14289217
> 
> 赞同：16
> 
> 时间：2013-01-12T01:20:54.653
> 
> 标签：ruby, rvm

我在 Mac OS x 10.8.2（“Mountain Lion”）上，并且成功安装了 RVM 1.17.8 及其依赖项。我可以使用它来安装 Ruby 版本，但是如果没有出现此错误`rvm install 1.9.2`，我将无法执行：`rvm use <version>`

```
RVM is not a function, selecting rubies with 'rvm use ...' will not work.

You need to change your terminal emulator preferences to allow login shell.
Sometimes it is required to use `/bin/bash --login` as the command.
Please visit https://rvm.io/integration/gnome-terminal/ for a example. 
```

我在 ~/.bash_profile 中有以下内容，我已将其设置为在`source ~/.bash_profile`启动终端窗口时使用 运行：

```
export SVN_EDITOR=vim
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
[ -r ~/.bashrc ] && source ~/.bashrc 
```

我试过 running `source ~/.rvm/scripts/rvm`，它运行时没有返回错误，但是当我尝试使用 RVM 在终端会话中设置 Ruby 版本时，我仍然收到“RVM is not a function”错误。

我还尝试使用`rvm implode`. 我的想法已经用完了，我似乎无法在网上找到更多解决方案。帮助？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-12T02:06:50.520

确保您的 shell 初始化文件设置正确：

```
rvm get head --auto-dotfiles 
```

然后转到您的终端模拟器首选项并启用**登录 shell**，有时它需要使用`/bin/bash --login`。还要确保在更改设置后完全关闭终端并重新打开它。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-12T16:33:35.717

该解决方案最终出现在 RVM[帮助和支持](https://rvm.io/support/)页面上，位于“.bash_profile 未在 OSX 上加载”部分。似乎问题在于我将终端设置为使用“默认登录 shell”打开，当我将其更改为使用 Preferences/Setup 中的命令“/usr/bash”打开时，“source ~/.rvm/ scripts/rvm" 开始工作，并且 rvm 现在被识别为一个函数。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-07-24T00:38:09.527

寻找.profile，如果存在，删除它！.zshrc 的 loof，如果存在，请将其删除！现在，使用 vi 编辑您的 .bash_profile，添加这一行

`[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"`

现在，关闭所有控制台服务并再次打开，使用 `$ rvm gemset use global`

为我工作好！

# ruby-on-rails - 在生产环境中运行“rake test”？

> ID：14289222
> 
> 赞同：3
> 
> 时间：2013-01-12T01:21:52.933
> 
> 标签：ruby-on-rails, ruby, rake

我想在生产环境中的 Cron 作业中运行单元测试。由于我可以使用的机器数量的限制，我只能在 1 台生产机器上运行这些单元测试。我没有开发机器/环境。让我们想象一下是这种情况（即使它不是一个现实和糟糕的设置），我根本无法改变它：）

是否可以在生产环境中运行**“rake test”**甚至**“rake test RAILS_ENV=test”**？如果我这样做，它是否总是在测试数据库上运行测试，而不是在生产数据库上运行？确实如此，环境是否只能在测试范围内“测试”？

显然，我可以对此进行测试，但因为我不想冒生产数据的风险，所以在这样做之前我宁愿有一个明确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T01:30:29.857

是的，这会很好。确保您指定`RAILS_ENV`已经拥有的环境变量，并且在`database.yml`文件中配置了测试数据库。

# php - 远程 PHP getimagesize()/ 检查是否存在

> ID：14289230
> 
> 赞同：0
> 
> 时间：2013-01-12T01:22:30.993
> 
> 标签：php, timeout, getimagesize

我正在使用 getimagesize() 来收集远程加载的图像信息。

问题是如果远程服务器在请求上花费的时间太长或者图像不存在并且我得到错误超时。我能做些什么来防止这种情况发生，这样如果需要 15 秒才能自动加载请求，然后返回一些返回 null $width、$height 和 $type 的代码？

```
if($siteImage != "None"){
list($width, $height, $type) = getimagesize($siteImage);
if(!filter_var($siteImage, FILTER_VALIDATE_URL, FILTER_FLAG_HOST_REQUIRED)){
    die("fillDiv('checkImage','<font color=\"red\">Image is not valid URL type.</font>');");
}elseif($width != "468" || $height != "60"){
    die("fillDiv('checkImage','<font color=\"red\">Incorrect size.</font>');");
}elseif($type != "1" && $type != "2" && $type != "3"){
    die("fillDiv('checkImage','<font color=\"red\">Incorrect image type. (.jpg .gif .png) only</font>');");
}else{
    print("fillDiv('checkImage','');");
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T01:32:27.967

你有两个选择。

1 使用 getimagesize 但在两行中，并隐藏错误消息。检查返回值

```
$aSize = @getimagesize($url);
if ($aSize) {
    // You have a return values
    list($width, $height, $type) = $aSize;
} else {
    // No return values
    $width = 0;  // etc
} 
```

2 用户[cUrl](http://php.net/manual/en/book.curl.php)将文件复制到本地。您可以使用 curl 更好地控制时间，也可以检查文件是否存在或下载时间过长等。一旦在本地复制，请在本地文件上使用 getimagesize()。如果文件不是真正的图像，它只会失败。快速在线示例：[http ://www.weberdev.com/get_example.php3?ExampleID=4009](http://www.weberdev.com/get_example.php3?ExampleID=4009)

# reverse-engineering - OllyDbg - 非侵入式调试

> ID：14289231
> 
> 赞同：2
> 
> 时间：2013-01-12T01:22:32.590
> 
> 标签：reverse-engineering, ollydbg

有没有办法/插件让 Olly 充当非侵入式调试器。非侵入式调试器不使用 Windows 调试 API。相反，它们仅通过读取和写入目标地址空间来工作。例如，WinDbg 具有这种非侵入性模式 (/pv)，并且有一个开源的（但不幸的是粗糙的）非侵入性调试器，称为 Obsidian。

> PS：我要解决的问题如下：我想调试一个只能由父程序（比如说X）启动的程序（我们称之为Y）。但是 X 充当 Y 的调试器（防止 Olly 附加到 Y）。此外，X 有一些反调试技术。即使在 X 的地址空间上设置了断点`CreateProcessW`和`DebugActiveProcess`（这是 AFAIK 唯一能够使 X 调试 Y 的两个函数），也没有任何反应——即，它们似乎从未被调用过。
> 
> 非侵入式调试器可以让我直接调试 Y。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:05:34.430

不，Ollydbg 是一种侵入式调试器。它使用 Windows 调试 API。在您的情况下，使用 WinDBG 调试目标似乎是最好的方法。

# html - 平行四边形菜单

> ID：14289232
> 
> 赞同：1
> 
> 时间：2013-01-12T01:23:11.660
> 
> 标签：html, css

我在这里偶然发现了一个问题。我创建了一个菜单栏，其中包含几个带有列表和链接标签的可点击平行四边形菜单项。

不幸的是，菜单栏现在出现了问题。每当我尝试悬停菜单项的重叠部分时，它会自动选择下一个右侧的菜单项。例如，当我尝试单击 HOME 的尖部分（与菜单项 ABOUT 重叠）时，将选择菜单项 ABOUT。

我希望每个菜单项的所有区域都可以分别单击，而不受相邻菜单项的任何干扰。请问有什么帮助和建议吗？

[http://i.stack.imgur.com/NDKNF.png](http://i.stack.imgur.com/NDKNF.png) [http://i.stack.imgur.com/gnhzt.png](http://i.stack.imgur.com/gnhzt.png)

这是HTML代码：

```
<ul class="header" id="navlist">
    <li id="home"><a href="#"></a></li>
    <li id="about"><a href="#"></a></li>
    <li id="benchmark"><a href="#"></a></li>
    <li id="service"><a href="#"></a></li>
    <li id="work"><a href="#"></a></li>
    <li id="client"><a href="#"></a></li>
    <li id="contact"><a href="#"></a></li>
</ul> 
```

这是CSS：

```
#navlist {
    position:relative;
}

#navlist li {
    margin:0;padding:0;list-style:none;position:absolute;top:0;
}

#navlist li,
#navlist a {
    height:31px;display:block;
}

#home {
    left:0px;
    width:112px;
    background:URL('../headbar/navmap.png') 0px 0px;
}

#home a:hover {
    background:URL('../headbar/navmap.png') 0px -31px;
} 
```

对于另一个菜单项，例如 about、client 和其他菜单项，遵循与 home 相同的规则。

# javascript - 使用 oauth2 检索 Google 地方信息 client_id

> ID：14289234
> 
> 赞同：0
> 
> 时间：2013-01-12T01:23:51.153
> 
> 标签：javascript, google-maps-api-3, oauth-2.0, google-plus, google-places-api

是否可以使用 oauth2 检索 Google Places client_id？我能够检索包括 id 和 Google+ 个人资料网址在内的 Google+ 信息，但我需要一种方法将 oauth2 用户与 Google Places“client_id”联系起来。

我已经能够包含 oauth2 弹出窗口中列出的 Places 范围，并要求用户授予访问资源的权限，但无法弄清楚如何检索经过身份验证的用户的 client_id。

**范围：**

```
var scopes = 'https://www.googleapis.com/auth/plus.me https://maps.google.com/maps/feeds/ https://www.googleapis.com/auth/places'; 
```

**Google+ API 加载**

虽然我可以成功检索到 plus 数据，但是 places api 似乎没有暴露任何数据。这是我尝试过的：

```
function makeApiCall() {
    /* the plus api does retrieve data, but a similar call to places does not
    gapi.client.load('plus', 'v1', function () {
        var request = gapi.client.plus.people.get({
            'userId': 'me'
        });
        request.execute(function (resp) {
            $(".google-signin").find("img").attr('src', resp.image.url).css('height', '32').css('width', '32');
            $("#login-msg").text('Welcome: ' + resp.displayName);
            $("img.vote").css('visibility', 'visible');
        });
    });
    */
    gapi.client.load('places', 'v1', function () {
        debugger
        // the gapi.client does not contain a "places" object 
        var request = gapi.client.places.get({
            'userId': 'me'
        });
        request.execute(function (resp) {
            debugger
        });
    });
} 
```

对此问题的任何澄清表示赞赏。

**澄清编辑**

也许我没有说清楚。Google Places API 鼓励创建与特定地点（商业）相关联的事件。我们正在根据 Google Places API*搜索*和*详细信息*响应生成列表（原型位于 top-60.bunkerhill.com，跟随一个或多个链接）以某种方式将 Places Detail 响应数据与 Google Sign-On 相关联；还是我在这里遗漏了一些重要的东西？

所以问题是“用户是否可以登录到任何可用的 Google OAuth API，该 API 提供了一些可用于将用户与 Places Details 条目相关联的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:40:43.440

Google Places API 与 G+ API 不同。

查看[https://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)以获取有关访问地方数据的说明（请注意，您不为此 API 使用 OAuth - 您只需在 http 中包含来自 developers.google.com/console 的密钥要求）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T23:27:47.407

关于已澄清的问题：不，用于创建事件的 Places API 身份验证和授权仅通过开发人员（和您的 API 密钥），而不是可能与您的应用程序交互的最终用户。

对于此特定示例，您（开发人员）可以创建与地点相关联的事件，但您有责任进一步关联您希望与该事件的创建相关联的最终用户，并将其存储如果您愿意，您的应用程序中的元数据。

是否有理由让 Places API 本身理解这种对您的应用程序有益的关系？

# c - 在对其他数组进行类型转换后获取结构中的第一个字符数组

> ID：14289235
> 
> 赞同：1
> 
> 时间：2013-01-12T01:23:55.830
> 
> 标签：c, arrays, pointers, casting, struct

在类型转换后以正确的方式访问结构的某些元素时遇到问题。这是我的代码：

```
void get_description(struct shmstruct *ptr/*, int number*/) {
    char buff[MESGSIZE];
    struct shmData *dparse;
    snprintf(buff, MESGSIZE, "%s", &ptr->msgdata[0]);
    dparse = (struct shmData *) buff;
    printf("Number: %s", dparse->number);
    printf("Description: %s", dparse->description);
} 
```

现在的问题是，我得到了数字，比如 123，而且还有第一行中的描述 ->
**printf("Number: %s", dparse->number);**
喜欢：123 描述

我怎样才能只得到号码？

（附言

```
struct shmData{
    char number[4];
    char description[1020];
}; 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:29:55.213

听起来这个数字不是以空结尾的。您拥有该`number`领域，然后紧随其后您拥有该`description`领域。 `printf()`假设您给它一个以 nul 结尾的字符串，并且它将继续运行，直到它遇到终止的 nul 字符。在您的情况下，似乎没有终止该`number`字段的 nul ，因此`printf()`请继续前进并获得该字段`description`。

可以将所有四个字符`number`都用于数字吗？

如果数字只有 3 位或更少，那么您可以将终止的 nul 直接放入`number`缓冲区。如果您可能需要从那里读取一个 4 位数字，则需要将这些数字复制到至少 5 个字符的临时缓冲区中，然后 nul 终止。

```
// max 3 digits:
dparse->number[3] = '\0'; // ensure nul-termination of number

// max 4 digits:
#define DPARSE_NUMBER 4  /* size of number field in dparse */
char temp[DPARSE_NUMBER + 1];
strncpy(temp, dparse->number, sizeof(temp));
temp[sizeof(temp) - 1] = '\0'; // strncpy() does not guarantee to nul-terminate, so we must do this 
```

`strncpy()`不保证 nul 终止，这是不幸的。所以我们应该总是在最后一个位置放一个终止的 nul 字符，这样无论如何，它都是 nul 终止的。请注意，有时`strncpy()`会为我们放置一个 nul，但确保它在那里并没有什么坏处。

# winapi - MFC - 当最大化子窗口的标题很长时，MDI 主框架标题被截断

> ID：14289238
> 
> 赞同：0
> 
> 时间：2013-01-12T01:24:05.033
> 
> 标签：winapi, mfc

我有一个使用 MDI 的 MFC 应用程序，类似于 MFC Scribble 示例/教程。当子窗口最大化时，主框架窗口的标题/标题会自动调整，以便附加子窗口的标题，如“Scribble - [Scribb1]”。当子窗口的标题很长时，会被截断。整个标题的长度似乎限制在 160 个字符左右。有没有办法增加这个限制并显示更多字符？我想覆盖 WM_NCPAINT 来重绘标题是一种方法，但如果有的话，我更喜欢其他简单的解决方案。我已经尝试覆盖 OnUpdateFrameTitle() 并且它似乎不适用于整个组合标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:39:48.473

覆盖 OnUpdateFrameTitle 并调用自己的 UpdateFrameTitleForDocument 实现将不起作用。Amit 在发布之前已经尝试过您的解决方案。

这甚至没有被 MFC 实现。MFC 没有引入 MDI 窗口。自从我记得作为 Windows 操作系统的一部分以来，MDI 框架窗口就存在了。

MFC 内部的默认 MFC 实现根据需要调用定义为 DefFrameProc 的特殊 MDI 窗口过程。

出于某种神秘原因，Windows 实现将窗口文本（显示在 MDI 框架的标题栏上）截断为 160 个字符，包括在处理 WM_SETTEXT 消息时终止 0。这可能是旧计算机的残余，没有太多内存可以浪费，所有缓冲区大小都保持在最低限度。

这可能是没有太多内存可浪费的旧计算机的残余，所有缓冲区大小都保持在最低限度，文件名是 8.3，总共 12 个字符。

为了满足您的要求并显示全文，您必须进行一些更改。

幸运的是，我找到了改变这种行为的非常简单的方法，符合我的 MEMC 要求。

在您的主框架类中覆盖 DefWindowProcan 并更改代码如下：

```
LRESULT CMainFrame::DefWindowProc(UINT message, WPARAM wParam, LPARAM lParam)
{
    if(WM_SETTEXT == message)
    {
        // if set text (called from UpdateFrameTitleForDocument)
        // do not call DefWindowProc
        return CWnd::DefWindowProc(message, wParam, lParam);
    }

    // otherwise call DefWindowProc that in turn calls DefFrameProc
    return CMDIFrameWndEx::DefWindowProc(message, wParam, lParam);
} 
```

现在构建并运行。

这适用于 MFC 应用程序的 classinc 和 Visual Studio 样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:53:46.120

看看内部调用 CFrameWnd::UpdateFrameTitleForDocument() 方法的 CFrameWnd::OnUpdateFrameTitle。它会变魔术。它是一种虚拟方法。您可以在 CMainFrm 类中覆盖 OnUpdateFrameTitle 并根据需要设置窗口标题。

如果您不知道，MFC 库是完全随源提供的。CFrameWnd 源代码在 winfrm.cpp 中（搜索此文件，您将了解您的 PC 上 MFC 的源代码在哪里）

# javascript - 在客户端对淘汰赛网格进行排序

> ID：14289245
> 
> 赞同：0
> 
> 时间：2013-01-12T01:25:54.877
> 
> 标签：javascript, sorting, data-binding, knockout.js, client

我对我认为淘汰赛基本上是免费的有问题。

我有一个 foreach 循环，在淘汰赛中完成，它创建表行。

在这个循环之外，我有表格标题，我想让列标题触发客户端排序。

我已经看到了可观察的数组函数 sort()，但我似乎无法让它触发。跟进，很难进行升序/降序排序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:58:17.050

我能够通过这篇文章实现它。小提琴正是我所需要的，它是所需绑定的一个很好的例子。

[Knockoutjs - 对大型 observablearray 进行排序](https://stackoverflow.com/questions/12743265/knockoutjs-sorting-a-large-observablearray)

我通过在我的模型中包含一个排序方向变量来扩展它，我在排序时会切换它。

# linq - Linq 按子列表对象属性过滤

> ID：14289246
> 
> 赞同：1
> 
> 时间：2013-01-12T01:26:12.660
> 
> 标签：linq, entity-framework, linq-to-sql

我正在尝试返回以下列表中产品类别为“绿色”的所有供应商，我确信它很简单，但我很挣扎：

```
 public class Supplier
    {
        public int SupplierID { get; set; }
        public string Name { get; set; }
        public List<Product> Products { get; set; }
    }

    public class Product
    {
        public int ProductID { get; set; }
        public string Name { get; set; }
        public Category Category { get; set; }
    }

    public class Category
    {
        public int ID { get; set; }
        public string Name { get; set; }

        public Category(int ID, string Name)
        {
            this.ID = ID;
            this.Name = Name;
        }
    }

    public void FilterList()
    {
        //Get All Suppiers That Have Products In 'Green' Category
        List<Supplier> GreenSupplierList = FullSupplierList.Where(x => x.Products.SelectMany(y => y.Category.Name == "Green")).ToList();
    }

    public List<Supplier> FullSupplierList
    {
        get
        {

            //Create List Object To Be Filter
            List<Supplier> supplierList = new List<Supplier>();
            int productCount = 0;
            for (int i = 0; i < 10; i++)
            {
                Category category;
                if (i > 3)
                    category = new Category(i, "Red");
                else
                    category = new Category(i, "Green");

                Supplier s = new Supplier();
                s.SupplierID = 1;
                s.Name = "Supplier " + i.ToString();
                s.Products = new List<Product>();

                for (int j = 0; j < 10; j++)
                {
                    productCount += 1;

                    Product p = new Product();
                    p.ProductID = productCount;
                    p.Name = "Product " + productCount.ToString();
                    p.Category = category;
                    s.Products.Add(p);
                }
                supplierList.Add(s);
            }
            return supplierList;
        }
    } 
```

FullSupplierList 只是一个简单的方法来返回填充列表以使用或此示例，但在 FilterList 方法中，我试图编写正确的 linq 语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T01:29:16.883

```
FullSupplierList.Where(s => s.Products.Any(p => p.Category.Name == "Green"))
                .ToList(); 
```

# grails - 在 Backbone 视图中嵌入 Handlebars 模板，反之亦然

> ID：14289249
> 
> 赞同：0
> 
> 时间：2013-01-12T01:26:34.020
> 
> 标签：grails, backbone.js, handlebars.js

我正在开发一个带有使用 Handlebars 模板的客户端 Backbone 视图的 Grails 应用程序。现在，文件中的视图`.js`和模板都在`.html`文件中。这些`.js`文件一起汇总成一个应用程序包文件，可以压缩、缓存等。`.html`文件使用 Include 插件内联，并直接显示在生成的 HTML 源代码中。

这有几个烦恼。

1.  为了便于开发，我想将它们放入一个文件中，这样您就不必每次想要处理视图时都查找并打开两个文件，并且您不会冒险加载`.js`但不包括或`.html`反之亦然。
2.  我希望模板本身具有压缩、缓存等优势，而不是每次生成 HTML 时都重复。

我可以看到一些方法来做（1） - 例如，将标签包装`.js`在`<script>`标签中并将其直接嵌入`.html`- 但它们失去了（2）的好处。我可以看到一些方法来做 (2)——例如，使用 Handlebars-Resources 插件预编译 Handlebars 模板，并将它们视为任何其他 Javascript——但这不会让你得到 (1)。

我想理想情况下我会将 HTML 嵌入`.js`文件中。但我不想要内联字符串；我希望我的 IDE 清楚地知道 HTML 是 HTML，并具有所需的所有完成和错误检查优势。有没有一种干净的方法可以做到这一点？还是我没有想到的另一种选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:56:04.360

1.  从代码可维护性的角度来看，将视图代码嵌入`<script>`标签将是一场噩梦，我怀疑它甚至会起作用。在代码文件中嵌入 HTML 更加可怕。即使您可以使用 grep 和胶带将一些设置组合在一起，我很确定没有 IDE 可以理解它并为您提供所需的语法高亮显示。

    **只需将您的 IDE 窗口/选项卡排列在一起，不要想太多。**

2.  使用 Handlebars[预编译](http://handlebarsjs.com/precompilation.html)支持。这很棒。

# c# - 只读通用集合接口

> ID：14289250
> 
> 赞同：1
> 
> 时间：2013-01-12T01:26:52.520
> 
> 标签：c#, collections

好的，我一直在尝试找到执行只读通用集合接口的最佳方法，这就是我想出的：

```
public delegate Boolean EnumerateItemsDelegate<ItemType>(ItemType item);
public delegate Boolean EnumerateItemsDelegate(Object item);

public interface IReadOnlyObjectCollection<out ItemType>
{
    Boolean ContainsItem(Object item);
    Array CopyToArray();
    void EnumerateItems(EnumerateItemsDelegate enumerateItemsDelegate);

    UInt32 Count { get; }
    UInt32 Capacity { get; }
}

public interface IReadOnlyCollection<ItemType> : IReadOnlyObjectCollection<ItemType>
{
    Boolean ContainsItem(ItemType item);
    Array<ItemType> CopyToArray();
    void EnumerateItems(EnumerateItemsDelegate<ItemType> enumerateItemsDelegate);

    UInt32 Count { get; }
    UInt32 Capacity { get; }
} 
```

这是为了回避 Microsoft 集合接口的大问题......无法将派生的只读集合分配给基本集合。

```
IReadOnlyObjectCollection<String> s;
IReadOnlyObjectCollection<Object> o = s; 
```

显然，这些接口并不理想，因为您仍然必须使用“对象”而不是实际类型，但我认为这在没有仅编译时泛型的情况下尽可能接近。如果你们看到任何巨大的问题或缺点，我将不胜感激......

# sql - 正确使用 count(*) 和 group by 函数

> ID：14289252
> 
> 赞同：1
> 
> 时间：2013-01-12T01:26:59.843
> 
> 标签：sql

在 sql 中，您可以将 GROUP BY 函数与国家之类的列一起使用吗？（这将是一个 char/varchar）

```
SELECT country, population, COUNT(*) AS count_cities
FROM list_of_cities
GROUP BY country; 
```

写这个更好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T01:30:22.713

```
SELECT country, SUM(population) AS country_population, COUNT(*) AS count_cities 
FROM list_of_cities 
GROUP BY country; 
```

# android - 从背景片段中隐藏进度对话框

> ID：14289253
> 
> 赞同：2
> 
> 时间：2013-01-12T01:27:00.107
> 
> 标签：android, android-fragments, android-viewpager, progressdialog

我遇到以下问题。我实现了一个带有标签和 viewpager 的导航来浏览我的片段。到目前为止，这工作正常。但是这些片段都是通过 Async Task 加载数据的，因此它们正在显示一个进度对话框。哪个是 self 也在正常工作。我的问题是，由于 Viewpager 不仅加载了实际片段，而且还加载了它旁边的片段。所以我看到错误的进度对话框。有什么方法可以实现进度对话框对其片段保持可见的行为（因此，当用户在异步任务完成加载之前移动到下一个选项卡时，用户会被告知）但在其他任何地方都没有？

希望很清楚，我想说什么。谢谢你的帮助。

最好的祝愿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:26:01.777

进度对话框可以是挂在所有内容前面的“对话框”，也可以是就地放置的视图。因此，我的建议是在片段中制作全屏（或仅部分屏幕）布局并显示进度对话框。如果用户移动到不同的片段，它将与片段的其余部分一起移动。如果您将它设置在顶部 Z 级别，使其全屏并捕获所有点击它（并吞下它们，这样它们就不会以 z 顺序向下级联到下方的布局中）我相信您将拥有您所需要的'正在描述为您想要的结果。

关键是不要在代码中动态使用 ProgressDialog，而只是您刚刚放置在 XML 中的 View 版本。

编辑：我说的是其中之一......

```
<ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         /> 
```

# jquery-ui - 删除骨干关系集合中未发生的事件

> ID：14289255
> 
> 赞同：1
> 
> 时间：2013-01-12T01:27:53.810
> 
> 标签：jquery-ui, backbone.js, backbone-relational

下面的代码位于渲染函数中的 Backbone.View 中。我正在使用 Backbone.Relational 和 jQuery UI Sortable。

```
var scopedThis = this;

// make this container a sortable container
this.$el.sortable({
    connectWith: '.wlProductsInRoomContainer',
    revert: true,
    stop: function(){
        scopedThis.getNewSortOrders();
},
receive: function(e, r){

    // get model from newly passed in product
    var prodModel = r.item.data().productView.model;

    // add model to this collection but pass silent so collection add event doesn't get ran
    scopedThis.collection.add(prodModel, { silent: true });

},
remove: function (e, r){

    // get model from product that has left this sortable
    var prodModel = r.item.data().productView.model;

    // remove this model from this collection
    scopedThis.collection.remove(prodModel);

    console.log(scopedThis.collection);

}
}); 
```

问题发生在可排序的删除功能中。离开可排序的元素在其 .data() 中包含其对应的模型。所以我们从那里检索它并尝试从这个集合中删除它，但是在之后记录集合时，模型永远不会被删除。让这特别奇怪的是，它上面的接收函数使用相同的精确模型来添加完美的工作。有任何想法吗？感谢您的帮助！

# go - 无法将数据（类型接口 {}）转换为类型字符串：需要类型断言

> ID：14289256
> 
> 赞同：212
> 
> 时间：2013-01-12T01:27:57.603
> 
> 标签：go, type-mismatch

我很新，我正在玩这个[通知](https://github.com/bitly/go-notify/blob/master/notify.go)包。

起初我的代码看起来像这样：

```
func doit(w http.ResponseWriter, r *http.Request) {
    notify.Post("my_event", "Hello World!")
    fmt.Fprint(w, "+OK")
} 
```

我想在上面的函数中添加换行符，`Hello World!`但不是在上面的函数中`doit`，因为这很简单，但是在后面的函数中`handler`如下所示：

```
func handler(w http.ResponseWriter, r *http.Request) {
    myEventChan := make(chan interface{})
    notify.Start("my_event", myEventChan)
    data := <-myEventChan
    fmt.Fprint(w, data + "\n")
} 
```

之后`go run`：

```
$ go run lp.go 
# command-line-arguments
./lp.go:15: invalid operation: data + "\n" (mismatched types interface {} and string) 
```

经过一番谷歌搜索后，我[在 SO 上找到了这个问题](https://stackoverflow.com/a/4801045/11926)。

然后我将我的代码更新为：

```
func handler(w http.ResponseWriter, r *http.Request) {
    myEventChan := make(chan interface{})
    notify.Start("my_event", myEventChan)
    data := <-myEventChan
    s:= data.(string) + "\n"
    fmt.Fprint(w, s)
} 
```

这是我应该做的吗？我的编译器错误消失了，所以我想这很好吗？这有效率吗？你应该做不同的事情吗？

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2013-01-12T02:25:44.003

根据[Go 规范](http://golang.org/ref/spec#Type_assertions)：

> 对于接口类型的表达式 x 和 T 类型，主表达式 x.(T) 断言 x 不是 nil 并且存储在 x 中的值是 T 类型。

“类型断言”允许您声明接口值包含某个具体类型或其具体类型满足另一个接口。

在您的示例中，您断言数据（类型接口{}）具有具体类型字符串。如果你错了，程序会在运行时恐慌。你不需要担心效率，检查只需要比较两个指针值。

如果您不确定它是否是字符串，您可以使用两个返回语法进行测试。

```
str, ok := data.(string) 
```

如果 data 不是字符串，则 ok 将为 false。然后通常将这样的语句包装到 if 语句中，如下所示：

```
if str, ok := data.(string); ok {
    /* act on str */
} else {
    /* not string */
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-12-03T10:58:00.173

## 类型断言

`type assertion`这在 golang中被称为，这是一种常见的做法。

这是[go 之旅](https://tour.golang.org/methods/15)的解释：

> 类型断言提供对接口值的底层具体值的访问。

```
t := i.(T) 
```

> 该语句断言**接口值**i 持有**具体类型**T 并将底层 T 值分配给变量 t。
> 
> 如果 i 没有持有 T，则该语句将引发恐慌。
> 
> 为了测试接口值是否持有特定类型，类型断言可以返回两个值：基础值和报告断言是否成功的布尔值。

```
t, ok := i.(T) 
```

> 如果 i 持有 T，则 t 将是基础价值，并且 ok 将为真。
> 
> 如果不是，ok 将是 false，t 将是类型 T 的零值，并且不会发生恐慌。

注意：**值`i`应该是接口类型**。

## 陷阱

即使`i`是接口类型，`[]i`也不是接口类型。因此，为了转换`[]i`为它的值类型，我们必须单独进行：

```
// var items []i
for _, item := range items {
    value, ok := item.(T)
    dosomethingWith(value)
} 
```

## 表现

至于性能，它可能比直接访问实际值要慢，如[this stackoverflow answer](https://stackoverflow.com/a/28027945/1925083)所示。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-06-24T08:28:15.527

```
//an easy way:
str := fmt.Sprint(data) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-05-21T08:52:47.643

正如@ρяσѕρєя 所要求的，可以在[https://golang.org/pkg/fmt/#Sprint](https://golang.org/pkg/fmt/#Sprint)找到解释。相关解释可以在[https://stackoverflow.com/a/44027953/12817546](https://stackoverflow.com/a/44027953/12817546)和[https://stackoverflow.com/a/42302709/12817546](https://stackoverflow.com/a/42302709/12817546)找到。这是@Yuanbo的完整答案。

```
package main

import "fmt"

func main() {
    var data interface{} = 2
    str := fmt.Sprint(data)
    fmt.Println(str)
} 
```

# javascript - 检查重复的用户名

> ID：14289263
> 
> 赞同：0
> 
> 时间：2013-01-12T01:29:35.357
> 
> 标签：javascript, jquery, ajax

我正在为我的移动应用程序创建一个注册页面，并希望检查用户/客户端输入的重复用户名

我在页面上有一个按钮，单击该按钮可检查用户名的可用性。但是，我还想自动合并，如果尚未这样做，当客户端单击提交/转到步骤 3 时，我想使用 Ajax 检查重复的用户名，如果存在重复，则刷新相同的页面带有重复的错误消息，否则继续执行步骤 3。

在我的 HTML 文件中，我有一些执行以下操作的 js：

```
$("#check-username").click(function() {
(...this works as I am able to click the CHECK button
and see if the username exists) 
```

我有另一个 js 文件，它来源于我的 HTML，它执行以下操作：

```
submitHandler : function() {
 $("#reg1").hide();
 $("span#step").html("2");
 $("#check-username").click;
 $("#reg3").show();
 scrollTop();
} 
```

当我单击转到下一步即 reg3 时，它不会对检查用户名进行验证。我调用 check-username 的方法/语法是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:35:09.773

```
 $("#check-username").click;
                           ^^----- Missing Braces 
```

应该是

```
 $("#check-username").click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:55:21.070

问题是只有在验证 ajax 请求从服务器返回后，您才需要转到第 3 步。您还需要查看服务器的响应以查看它是否重复。例如：

```
$("#check-username").click(function() {
    validateUser();
});

function validateUser(){
    return $.ajax({
        url: '/path/to/validate'
    });
} 
```

还有你的提交处理程序的东西：

```
submitHandler : function() {
     $("#reg1").hide();
     $("span#step").html("2");

     validateUser()
        .done(function(r){
            //for example...
            if(r.isValidUser){
                $("#reg3").show();
                scrollTop();
            }
        });
} 
```

# php - 使用 AJAX 生成 Dwolla 访问令牌而不是重定向到他们的网页？

> ID：14289268
> 
> 赞同：0
> 
> 时间：2013-01-12T01:30:24.453
> 
> 标签：php, redirect, oauth, paypal, dwolla

查看[Dwolla 的 API 文档](https://developers.dwolla.com/dev/pages/auth)并在我的站点上尝试[oauth.php 示例代码（代码如下所示）](https://github.com/Dwolla/dwolla-php/blob/master/examples/oauth.php)，我不清楚是否可以在不重定向到 Dwolla 页面的情况下生成访问令牌。

从我的网站重定向到他们的网站再回到我的网站从 UI/UX 的角度来看真的很糟糕，并且并不比 Paypal 提供的糟糕界面更好。

有谁知道如何使用 AJAX 生成 Dwolla 访问令牌？

```
<?php
// Include the Dwolla REST Client
require '../lib/dwolla.php';

// Include any required keys
require '_keys.php';

// OAuth parameters
$redirectUri = 'http://localhost:8888/oauth.php'; // Point back to this file/URL
$permissions = array("Send", "Transactions", "Balance", "Request", "Contacts",   "AccountInfoFull", "Funding");

// Instantiate a new Dwolla REST Client
$Dwolla = new DwollaRestClient($apiKey, $apiSecret, $redirectUri, $permissions);

/**
 * STEP 1: 
 *   Create an authentication URL
 *   that the user will be redirected to
 **/

if(!isset($_GET['code']) && !isset($_GET['error'])) {
$authUrl = $Dwolla->getAuthUrl();
header("Location: {$authUrl}");
}

/**
 * STEP 2:
 *   Exchange the temporary code given
 *   to us in the querystring, for
 *   a never-expiring OAuth access token
 **/
 if(isset($_GET['error'])) {
echo "There was an error. Dwolla said: {$_GET['error_description']}";
}

else if(isset($_GET['code'])) {
$code = $_GET['code'];

$token = $Dwolla->requestToken($code);
if(!$token) { $Dwolla->getError(); } // Check for errors
else {
    session_start();
    $_SESSION['token'] = $token;
    echo "Your access token is: {$token}";
} // Print the access token
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:00:37.890

TL;DR - 不，这不是 OAuth 的工作方式

* * *

OAuth 方案的重点是在您要使用的服务（在本例中为 Dwolla）的网站上进行身份验证。通过强制用户转到他们的页面，它确保了一些事情：

1.  用户被告知他们正在使用外部服务，其服务条款可能与您的应用程序不同
2.  让用户了解您的应用程序为该服务请求的功能。在 dwolla 的情况下，您的应用程序可以请求不同级别的功能，包括转账，因此让您的用户意识到这一点很重要！

[您可以在http://oauth.net/](http://oauth.net/)阅读有关 OAuth 的更多信息

# ruby-on-rails - 我正在尝试将 ruby on rails git 部署设置到 AWS Elastic Beanstalk；“eb init”失败

> ID：14289271
> 
> 赞同：2
> 
> 时间：2013-01-12T01:30:35.013
> 
> 标签：ruby-on-rails, amazon-web-services, amazon-elastic-beanstalk

从我的仓库中运行`eb init`似乎可以很好地通过配置选项，但最后给出：

```
local variable 'fullpath' referenced before assignment 
```

配置文件似乎在 .elasticbeanstalk 中创建正常，但“eb start”给出了相同的错误：

```
local variable 'fullpath' referenced before assignment 
```

任何建议，将不胜感激。

更多详细信息： http: [//docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html)

[http://ruby.awsblog.com/post/Tx2AK2MFX0QHRIO/Deploying-Ruby-Applications-to-AWS-Elastic-Beanstalk-with-Git](http://ruby.awsblog.com/post/Tx2AK2MFX0QHRIO/Deploying-Ruby-Applications-to-AWS-Elastic-Beanstalk-with-Git)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:39:51.423

这很可能是因为它在您的系统上找不到`AWSDevTools`文件夹（从源代码来看）。您应该将整个文件夹移动到根目录，例如：

```
/AWSDevTools 
```

此外，它们中似乎存在一个错误，该错误`core.py`会阻止将任何有用的内容打印到控制台。

但是，您可以修改`logconfig.json`文件并找到以下行：

```
"root": {
    "level": "NONE"
}, 
```

把它改成这样：

```
"root": {
    "level": "DEBUG"
}, 
```

当您运行`eb init`或`eb start`再次运行时，它将创建一个名为`eb-cli.log`. 往里看会告诉你它期望文件夹在哪里。

另请参阅此[论坛主题](https://forums.aws.amazon.com/thread.jspa?messageID=399709#jive-message-408956)。

# ios - 抬起键盘时向上移动元素

> ID：14289275
> 
> 赞同：1
> 
> 时间：2013-01-12T01:31:56.070
> 
> 标签：ios, objective-c, iphone, xcode

我正在进行与以下功能类似的聊天：

![在此处输入图像描述](../Images/2c1959d732e240689e3faa195d398624.png)

当用户单击消息气泡时，我需要它来提升 UITextField 和 UITableView （当然是文本框上方的表格视图）。同样，当他们发送或收回消息时，它应该回到原来的状态。

我尝试了[此处发布的解决方案](https://stackoverflow.com/questions/8704137/keeping-object-on-top-of-keyboard-in-the-event-of-becomefirstresponder-or-resign/8704371#8704371)

两个通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHideOrShow:) name:UIKeyboardWillHideNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHideOrShow:) name:UIKeyboardWillShowNotification object:nil]; 
```

和实际功能：

```
- (void)keyboardWillHideOrShow:(NSNotification *)note
{
    NSDictionary *userInfo = note.userInfo;
    NSTimeInterval duration = [[userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];
    UIViewAnimationCurve curve = [[userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey] intValue];

    CGRect keyboardFrame = [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    CGRect keyboardFrameForTextField = [self.myTextField.superview convertRect:keyboardFrame fromView:nil];

    CGRect newTextFieldFrame = self.myTextField.frame;
    newTextFieldFrame.origin.y = keyboardFrameForTextField.origin.y - newTextFieldFrame.size.height;

    [UIView animateWithDuration:duration delay:0 options:UIViewAnimationOptionBeginFromCurrentState | curve animations:^{
        self.myTextField.frame = newTextFieldFrame;
    } completion:nil];
} 
```

但它有两个问题：

1.  我不知道如何提升键盘顶部的 tableview
2.  当键盘回落时，输入框完全消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:07:27.060

这可能会有所帮助....不能归功于它，但对于我的生活，我不记得它来自哪里...虽然曾经帮助我完成了一个项目，所以这就是我使用它的方式。

当基于 BOOL 值 YES 或 NO 调用/关闭键盘时，这将上下移动视图。这种方式还允许您对它的其他方面有更多的控制。

```
- (void) animateTextField: (UITextField*) textField up: (BOOL)up
{
const int movementDistance = 100;
const float movementDuration = 0.3f;
int movement = (up ? -movementDistance : movementDistance);

[UIView beginAnimations: @"anim" context: nil];
[UIView setAnimationBeginsFromCurrentState: YES];
[UIView setAnimationDuration: movementDuration];
self.view.frame = CGRectOffset(self.view.frame, 0, movement);
[UIView commitAnimations];
} 
```

然后实现它：

```
-(IBAction)goingup:(id)sender
{
   //Bounces the text field up for editing
   [self animateTextField: yourtextfield up: YES];} 
}

-(IBAction)backdown:(id)sender
{
   //Bounces it back when keyboard is dismissed 
   [self animateTextField: yourtextfield up: NO];   
} 
```

将操作连接到您的文本字段 Editing did begin 和 Editing did end outlets 并且您已设置。

希望有帮助。

# function - 执行此 nasm 函数后，main 不会继续。它没有错误地退出

> ID：14289276
> 
> 赞同：0
> 
> 时间：2013-01-12T01:32:06.903
> 
> 标签：function, assembly, x86, nasm

我从main通过以下方式调用该函数：

```
 main:
;memory alocation ect
call    encode 
```

编码函数看起来像这样：它执行一个简单的 RLE 算法。

```
encode:
;IN eax - pointer a memoria elejere
;IN ecx - sor hossza
;OUT eax -pointer az eredmeny elejere
;OUt ecx -a kiirt sor hossza
;elso char 
```

这里读取第一个字符

```
;push eax
push ebp
xor ebp,ebp
push esi
push edi
push eax
xor edi,edi 
```

这里它分配内存：

```
;lefoglal memoria eredmenynek
mov ebx,eax
mov eax,ecx
call mem_alloc
;esi legyen eredmeny memoria kezdete
mov esi,eax
mov eax,ebx
;eax ismet a memoria poiter

xor edx,edx
mov dl,[eax]
; push eax
; xor eax,eax
; mov al,dl
; call io_writeint
; call mio_writeln
; pop eax

;lastChar az elso char
mov [lastChar],dl 
```

主循环循环到“向量”

```
inc ebp 
;dec ecx
.goloop:
mov dl,[eax+ebp]
xor ebx,ebx
mov bl,[lastChar]
cmp dl,bl
jne .newChar
xor ebx,ebx
mov bl,[count]
inc bl
mov [count],bl

.backloop:
loop .goloop

.newChar:

mov [esi+edi],bl
inc edi
mov byte[esi+edi],-1
inc edi
mov bl,[count]
mov [esi+edi],bl
inc edi
mov byte[count],0
cmp ecx,0
ja .backloop

.veg:
mov ebx,esi
mov edx,edi 
pop edi
pop esi
pop eax

pop ebp
pop eax
mov eax,ebx
mov ecx,edx 

ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:50:30.787

看来您将四个寄存器压入堆栈但弹出五个。

当你调用一个地址时，指令指针被压入堆栈，然后处理器跳转到你指定的标签/地址。当 RET 被执行时，它会从堆栈中弹出并跳转到它弹出的地址。RET 期望 CALL 压入堆栈的地址将是堆栈中的下一个字，但是当您弹出的寄存器多于您压入的寄存器时，您已经弹出了这个字节。

你可以试试最后一个

```
push eax 
```

出你的代码。

# java - 为什么在 strings.xml 中颠倒字符串数组中的声明顺序会改变事情？

> ID：14289279
> 
> 赞同：2
> 
> 时间：2013-01-12T01:32:24.993
> 
> 标签：java, android

我的数组在我的 strings.xml 文件中声明如下：

```
<string-array name="metal_array">
    <item >Copper</item>
    <item >Aluminum</item>
</string-array>
 <string-array name="temperature_array">
    <item >60C&#x00B0;, 140F&#x00B0;</item>
    <item >75C&#x00B0;, 167F&#x00B0;</item>
    <item >90C&#x00B0;, 194F&#x00B0;</item>
</string-array> 
```

以及在活动的 onCreate() 方法中添加的适配器：

```
 Spinner metalSpinner = (Spinner) findViewById(R.id.metal_spinner);
    ArrayAdapter<CharSequence> metalAdapter = ArrayAdapter.createFromResource(this, R.array.metal_array, android.R.layout.simple_spinner_item);
    metalAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    metalSpinner.setAdapter(metalAdapter);

    Spinner temperatureSpinner = (Spinner) findViewById(R.id.temperature_spinner);
    ArrayAdapter<CharSequence> temperatureAdapter = ArrayAdapter.createFromResource(this, R.array.temperature_array, android.R.layout.simple_spinner_item);
    temperatureAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    temperatureSpinner.setAdapter(temperatureAdapter); 
```

无需对activity.xml 文件进行任何更改，只需切换在strings.xml 文件中声明两个数组的顺序即可反转该数组放置到哪个微调器中。这对我来说毫无意义，因为一切都是按名称引用的。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T01:38:17.047

数组 XML 被编译成类文件，其中它们的名称变成基于整数的 ID。当您更改顺序时，它们会重新编译并且元素会获得新的 ID。对你来说，任何使用旧 ID 的类文件都会以有趣的方式表现。

# ruby-on-rails-3 - 使用 Paperclip 升级到 Rails 3.2 时出错：write_inheritable_attribute

> ID：14289292
> 
> 赞同：0
> 
> 时间：2013-01-12T01:36:03.490
> 
> 标签：ruby-on-rails-3, paperclip

我正在将应用程序从 Rails 3.1 升级到 3.2，我得到：

```
NoMethodError (undefined method `write_inheritable_attribute' for #<Class:0x0000010a190dd8>):
  app/models/test_file.rb:37:in `<class:TestFile>'
  app/models/test_file.rb:1:in `<top (required)>'
  app/models/ability.rb:44:in `initialize' 
```

该错误适用于此型号代码：

```
has_attached_file :logo,  
:styles => {:medium => "300x200>", :thumb => "150x60>" },  
:storage => :s3,  
:s3_credentials => "#{::Rails.root.to_s}/config/s3.yml",  
:path => "/logos/:style/:id/:filename" 
```

`write_inheritable_attribute`我的应用程序代码中没有任何地方的实例。如果上述内容被删除，则应用程序中类似代码的下一个实例（即使用 Paperclip 的任何地方）都会重复该错误。

```
# Gemfile
gem 'rmagick'
gem "paperclip", :git => "git://github.com/thoughtbot/paperclip.git" 
```

我认为这个问题*可能*与 Paperclip 的内部代码有关。你知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:30:49.967

:s3_credentials => "#{Rails.root}/config/s3.yml",

# c# - Windows8 幻灯片 API

> ID：14289296
> 
> 赞同：0
> 
> 时间：2013-01-12T01:36:36.023
> 
> 标签：c#, xaml, windows-8, slideshow

我正在学习 Windows8 编程并想用 C#/Xaml 开发 Photo SlideShow 应用程序。我可以在后面的代码中获取图片列表，但我不知道如何显示这些图片并控制图像转换。

我想控制预装的“照片”windows8 应用程序等图片。有没有好的API和控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:48:12.690

[FlipView](http://msdn.microsoft.com/library/windows/apps/BR242678)将是一个不错的选择；有关更多信息，请参阅[添加 FlipView 控件](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh780617.aspx)。

[Windows Dev Center](http://dev.windows.com)上有一个[FlipView 控件示例](http://code.msdn.microsoft.com/windowsapps/FlipView-control-sample-18e434b4)，但似乎只有 JavaScript 代码是可下载的。

# c++ - 运行时错误（SIGKILL）

> ID：14289300
> 
> 赞同：1
> 
> 时间：2013-01-12T01:37:12.693
> 
> 标签：c++, runtime-error, sigkill

我是编码新手，我不确定为什么这段代码会出现这个错误：运行时错误（SIGKILL）。谢谢。代码是天真的 Dijkstra 算法。此代码在批量测试用例上运行。因此是最外层的循环。样本输入： 3 3 2 1 2 5 2 3 7 1 3 3 3 1 2 4 1 3 7 2 3 1 1 3 3 1 1 2 4 1 3

输出 - 12 5 NO

```
 #include <cstdio>
int weight [10003][10003];
bool seen [10003];
int  dist[10003];
#define oo 100000000
int main(){
//    freopen("dij.out","w",stdout);
   int rounds;
  scanf("%d",&rounds);
    for(int i=0;i<rounds;i++){
        for(int me=0;me<10003;me++){ //initialising for next batch
            seen[me]=false;
        }
        for(int you=0;you<10003;you++){ // initialising for next batch
            for(int u=0;u<10003;u++){
                weight[you][u]=0;
            }
        }
        int v,k;
        scanf("%d %d",&v,&k);
        for(int j=0;j<k;j++){
            int a,b,c;
            scanf("%d %d %d",&a,&b,&c);
            weight[a][b]=c;
            weight[b][a]=c;
        }
        for(int z=0;z<=v;z++){
            dist[z]=oo;
        }
        int start,end;
        scanf("%d %d",&start,&end);
        dist[start]=0;
        while(true){ //dijkstra's
            int closest=-1;
            for(int bla=1;bla<=v;bla++){
                if(!seen[bla]&&(closest==-1||dist[bla]<dist[closest])){
                    closest=bla;
                }
            }
            if(closest==-1){
                break;
            }
            seen[closest]=true;
            for(int adj=1;adj<=v;adj++){
                if(weight[closest][adj]>0){
                    if(dist[closest]+weight[closest][adj]<dist[adj]){
                        dist[adj]=dist[closest]+weight[closest][adj];
                    }
                }
            }
        }
        if(dist[end]==oo){
            printf("NO\n");
        }else{
            printf("%d\n",dist[end]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-20T14:08:35.413

您可能在执行代码时没有提供“**自定义输入”。**这就是发生在我身上的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-12T17:21:29.933

我的代码运行了一个无限循环，它没有提供输出，这就是它抛出 SIGKILL 错误的原因。我在循环中放了一个带有随机字符串的打印语句，当我再次运行代码时，它会无限输出该字符串。那就修好了。

# magento - 如何将我的 magento 连接到银行帐户

> ID：14289301
> 
> 赞同：1
> 
> 时间：2013-01-12T01:37:24.493
> 
> 标签：magento, e-commerce, magento-1.7

我安装了一个 magento 并准备好了，唯一的事情是我无法进行实际交易并从我的银行取钱。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T01:44:07.540

您需要获得一个商家帐户。这些提供者有很多，但要非常小心，法律和财务陷阱与提供者一样多。

您可能会在 Merchant Maverick 等网站上找到一些有趣的读物：[http](http://www.merchantmaverick.com) ://www.merchantmaverick.com ，所有在线商家都应该阅读他们对“清算损害赔偿”的讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T03:49:13.520

Peter 的回答是必读的，但如果您想快速入门，Paypal 是内置的，并且提供了与 Magento 的完美集成。这应该可以帮助您入门（当然您需要注册一个 Paypal 帐户并将其链接到您的银行）： http: [//www.magentocommerce.com/knowledge-base/entry/setting-up-paypal-为您的magento商店/](http://www.magentocommerce.com/knowledge-base/entry/setting-up-paypal-for-your-magento-store/)

# mysql - MyISAM 表不断崩溃。如何去寻找原因或调试它？

> ID：14289302
> 
> 赞同：0
> 
> 时间：2013-01-12T01:37:26.440
> 
> 标签：mysql, myisam, elgg

在我管理的一个站点上，我有一个设置为 MISAM 的表，并且它经常崩溃。每次自动修复都失败，只好进去运行`REPAIR TABLE`命令。我已经查看了可能的解决方案，例如这个：[MySQL 表被标记为崩溃](https://stackoverflow.com/questions/11869377/mysql-table-is-marked-as-crashed/11869634#11869634) ，看起来最好的方法可能是将表更改为 InnoDB。

但是，该表有一个 FULLTEXT 索引，如果我可以将其删除，那就没问题了，但是该站点运行在一个框架上（特别是 Elgg），所以我不知道我可能会遇到什么样的损坏或问题稍后，所以这可能不是一个好的选择。

所以对于我的问题：我怎样才能找到崩溃的原因？该站点位于 Web 主机上，并在 PHP 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T11:12:57.837

这可能是由于同一张表上的大量连接然后在 my.cnf 文件中分配。

由于 MyISAM 锁定了表并且所有线程都保留在等待列表中。

# c# - 如何以编程方式提取应用名称和版本号？

> ID：14289313
> 
> 赞同：0
> 
> 时间：2013-01-12T01:41:14.817
> 
> 标签：c#, exception-handling, error-handling, windows-phone-8, azure-mobile-services

我想在 UnhandledException 事件中填充一个 WAMS 表，并且我有以下代码：

```
private async void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs args)
{
    if (Debugger.IsAttached)
    {
        // An unhandled exception has occurred; break into the debugger
        Debugger.Break();
    }
    PLATYPIRUS_WAMS_EXCEPTIONLOG pruwamsel = new PLATYPIRUS_WAMS_EXCEPTIONLOG();
    pruwamsel.appNameAndVersion = "Platypi R Us for WP8 v. 3.14";
    pruwamsel.ExceptionMsg = args.ExceptionObject.Message;
    pruwamsel.InnerException = args.ExceptionObject.InnerException.ToString();
    pruwamsel.ExceptionToStr = args.ToString();
    pruwamsel.dateTimeOffsetStamp = DateTimeOffset.UtcNow;
    await App.MobileService.GetTable<PLATYPIRUS_WAMS_EXCEPTIONLOG>().InsertAsync(pruwamsel); 
} 
```

...但我真的不想硬编码应用程序名称和版本。如何以编程方式提取这些？

## 更新

结合这两个想法，我最终得到：

```
private async void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs args)
{
    if (Debugger.IsAttached)
    {
        // An unhandled exception has occurred; break into the debugger
        Debugger.Break();
    }

    string appName;
    string appVersion;
    var xmlReaderSettings = new XmlReaderSettings
    {
        XmlResolver = new XmlXapResolver()
    };

    using (var xmlReader = XmlReader.Create("WMAppManifest.xml", xmlReaderSettings))
    {
        xmlReader.ReadToDescendant("App");

        appName = xmlReader.GetAttribute("Title");
        appVersion = xmlReader.GetAttribute("Version");
    }

    PLATYPIRUS_WAMS_EXCEPTIONLOG pruwamsel = new PLATYPIRUS_WAMS_EXCEPTIONLOG();
    pruwamsel.appNameAndVersion = string.Format("{0} {1}", appName, appVersion);
    pruwamsel.ExceptionMsg = args.ExceptionObject.Message;
    pruwamsel.InnerException = args.ExceptionObject.InnerException.ToString();
    pruwamsel.ExceptionToStr = args.ExceptionObject.ToString();
    pruwamsel.dateTimeOffsetStamp = DateTimeOffset.UtcNow; 
    await App.MobileService.GetTable<PLATYPIRUS_WAMS_EXCEPTIONLOG>().InsertAsync(pruwamsel); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T01:51:37.323

应用程序名称和版本在 WMAppManifest.xml 文件中注册。

通过使用此[示例](http://code.msdn.microsoft.com/Generating-a-Windows-Phone-9d19f939)并将引用“ProductID”的部分替换为“Title”和“Version”，我设法获得了以下代码：

```
var xmlReaderSettings = new XmlReaderSettings
{
    XmlResolver = new XmlXapResolver()
};

using (var xmlReader = XmlReader.Create("WMAppManifest.xml", xmlReaderSettings))
{
    xmlReader.ReadToDescendant("App");

    var AppName = xmlReader.GetAttribute("Title");
    var AppVersion = xmlReader.GetAttribute("Version");
} 
```

# css - CSS表格透明度

> ID：14289314
> 
> 赞同：1
> 
> 时间：2013-01-12T01:41:13.987
> 
> 标签：css, transparency

是否可以通过使用 css 使表格内的所有内容在悬停时透明 - 例如

```
<table><tr><td> AN IMAGE </td> <td> SOME TEXT </td></tr></table> 
```

所以如果图像或文本悬停，两者都会变得透明？再次 - 仅使用 css。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T01:47:41.567

你可以试试：

```
table:hover { opacity: .5 } 
```

...如果您想调整所需的透明度*（从 0 到 1 的任何值）*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T01:43:44.527

```
table:hover td { visibility: hidden; } 
```

# mysql - 在 XAMPP 中将 JSP 连接到 MySql

> ID：14289317
> 
> 赞同：0
> 
> 时间：2013-01-12T01:41:25.793
> 
> 标签：mysql, database, jsp

我在这里有我的示例代码：

```
<%@ page import="java.sql.*" %> 
<%@ page import="java.io.*" %> 

<% 
/* Create string of connection url within specified format with machine name, port number and database name. Here machine name id localhost and database name is usermaster. */ 
String connectionURL = "jdbc:mysql://localhost/ekoh"; 

// declare a connection by using Connection interface 
Connection connection = null; 

// Load JBBC driver "com.mysql.jdbc.Driver"
Class.forName("com.mysql.jdbc.Driver").newInstance(); 

/* Create a connection by using getConnection() method that takes parameters of string type connection url, user name and password to connect to database. */ 
connection = DriverManager.getConnection(connectionURL, "root", "");

// check weather connection is established or not by isClosed() method 
if(!connection.isClosed())
%>
<font size="+3" color="green"></b>
<% 
out.println("Successfully connected to " + "MySQL server using TCP/IP...");
connection.close();
}
catch(Exception ex){
%>
</font>
<font size="+3" color="red"></b>
<%
out.println("Unable to connect to database.");
}
%> 
```

我的数据库名称是“ekoh”，我使用了没有密码的 root 帐户。我仍然不知道为什么它到现在还不能工作。你能给我一些替代代码来运行吗？:) nb 我在 XAMPP 中使用 tomcat 和 MySql 编写 JSP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-09T21:20:31.000

需要做的是[下载 MySQL 连接器 jar 文件](https://dev.mysql.com/downloads/connector/j/5.1.html)，然后将其放在`/WEB-INF/lib`项目文件夹的文件夹路径中。

# javascript - 带配置的 NodeJS 模块 - 从 require 或 module.exports 实例化

> ID：14289323
> 
> 赞同：3
> 
> 时间：2013-01-12T01:42:29.047
> 
> 标签：javascript, node.js

我正在开发一个具有多个功能的 node.js 模块。
模块本身需要一些配置才能启动（会有默认值......可以被覆盖 - 例如文件路径）

导出函数时首选方法是什么？允许从 require 语句实例化它，并将配置对象（可选）传递给构造函数？

```
var MyModule = require('myModule);

var myModule = new MyModule({
    name: "test name"
});

myModule.doThing(function(x){

}); 
```

在模块中有这个：

```
module.exports = function MyModule(){
        MyModule.prototype.config = {name: "default name"}

            function doThing(cb){
                //do stuff
                cb();
            }
} 
```

或者，从模块中的 exports 语句创建一个实例，然后像这样使用它：

```
var myModule = require('myModule);

myModule.config = {name: "test name"}

myModule.doThing(function(x){

}); 
```

相反，在模块中有这个：

```
module.exports = exports = MyModule();

function MyModule(){
MyModule.prototype.config = {name: "default name"}

    function doThing(cb){
        //do stuff
        cb();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T14:59:01.090

我会说让您的用户在实例化时提供一个对象，将默认值放在原型中。您可能还想提供一个配置功能，这允许您（现在或将来）验证键/值，并且您的用户可以在实例化后设置配置。

```
// Module

var Mod = module.exports = function Mod (opts) {
  opts = (opts === Object(opts)) ? opts :  {};

  // This allows users to instanciate without the `new` keyword
  if (! (this instanceof Mod)) {
    return new Mod(opts);
  }

  // Copy user provided configs to this.config
  for (var key in opts) if ({}.hasOwnProperty.call(opts, key)) {
    this.config[key] = opts[key];
  }
};

Mod.prototype.config = {
  foo : 'foo',
  bar : 'bar'
};

Mod.prototype.configure = function configure (key, val) {
  this.config[key] = val;
  return this;
};

// Usage

const Mod = require('/path/to/mod');

var i1 = new Mod;

var i2 = Mod();

var i3 = new Mod({
  foo: 'bar'
});

var i4 = Mod({
  foo: 'bar'
});

i4.configure('bar', 'baz');

var i5 = (new Mod).configure('bar', 'baz'); 
```

**编辑**

正如 Jake Sellers 在评论中指出的那样，这不是 CommonJS 模块中的标准 API 模式。更好的解决方案是导出一个返回您正在创建的任何对象的函数。

**更重要的是**，我永远不建议将配置放入原型中。这样做会使所有孩子共享配置对象。因此，对它的任何修改也会影响所有孩子。真丢人，写这篇废话的时候我还不是初学者。双重感谢杰克；）

更好的实现：

```
// Keep defaults private
var defaults = {
  foo : 'foo',
  bar : 'bar'
};

// Construct
var Mod = function Mod (opts) {
  opts = (opts === Object(opts)) ? opts :  {};

  // This allows users to instanciate without the `new` keyword
  if (! (this instanceof Mod)) {
    return new Mod(opts);
  }

  this.config = {};
  // Copy user provided configs to this.config or set to default
  for (var key in defaults) if (defaults.hasOwnProperty(key)) {
    if ({}.hasOwnProperty.call(opts, key)) {
      this.config[key] = opts[key];
    }
    else {
      this.config[key] = defaults[key];
    }
  }
};

// Let the user update configuration post-instanciation
Mod.prototype.configure = function configure (key, val) {
  this.config[key] = val;
  return this;
};

// Export a function that creates the object
exports.createMod = function createMod (opts) {
  return new Mod(opts);
};

// Export the constructor so user is able to derive from it
// or check instanceof
exports.Mod = Mod;

// USAGE

var mod = require('/path/to/mod');

var i1 = mod.createMod({ foo : 'bar' });

i1.configure('bar', 'baz'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:02:28.953

这取决于您是否希望模块的用户能够仅使用一个预定义的实例（您在`module.exports`其上创建的实例），或者您是否希望他们能够创建自己的实例（然后您需要导出构造函数作为一个函数，而不是它的返回值）。

如果你去写一个构造函数，我会选择第二个选项（让用户创建实例）——除非它是你提供的单例对象。

# ruby-on-rails - 英国邮政编码验证器

> ID：14289324
> 
> 赞同：2
> 
> 时间：2013-01-12T01:42:38.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, postal-code, custom-validators

是否有任何宝石可以验证英国邮政编码？喜欢

```
validates :postcode, existence: true 
```

我不仅想检查格式。我需要检查邮政编码是否真的存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:49:09.083

看看这个网站[http://www.freepostcodes.org.uk/](http://www.freepostcodes.org.uk/)

> 军械测量局已在开放许可下发布了完整的邮政编码数据库。

网站上有指向数据库的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:46:41.467

使用此列表 www.doogal.co.uk/UKPostcodes.php 并在该列表中检查它怎么样？

# c# - 从字符串中删除货币金额

> ID：14289325
> 
> 赞同：-1
> 
> 时间：2013-01-12T01:42:42.763
> 
> 标签：c#

我想从页面中删除所有货币符号和金额。

示例我的字符串：

“这是 10,000 美元的金额，还不够 20 美元。但是让他们获利 200.45 美元。”

输出：

“这是数量不够。但要让他们获利。”

如何通过 c# 代码删除。

如果有人可以给我正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:47:04.920

既然您以`Regex`表格形式提出：

```
var s = "This is $10,000 amount is not enough $20\. But Make $200.45 profit them.";
var replaced = Regex.Replace(s, @"\$\d*,?\d*\.?\d+", string.Empty); 
```

# php - 使用 raphaeljs 的动态饼图数量

> ID：14289327
> 
> 赞同：0
> 
> 时间：2013-01-12T01:43:10.533
> 
> 标签：php, javascript, raphael, parameter-passing, pie-chart

我正在尝试可视化存储在 MySQL 数据库中的投票结果。我在数据库中有问题和这些问题的答案，每个答案都有 5 个数值。在下面的列表中，Q 代表问题文本，数字是该问题的答案。

```
Q1 - 45,32,12,1,6
Q2 - 23,2,14,0,53
..
..
Q7 - ... 
```

如果您考虑上面的场景，我需要在屏幕上显示 7 个不同的饼图。但是，问题的数量不是固定的，它们可能会增加或减少。在这种情况下，屏幕上的饼图数量也可能会增加或减少。

目前，我正在为饼图使用以下代码：

```
function displayChart() {

    var r = Raphael("holder");
    pie = r.piechart(100, 100, 70, [<?php echo($startValues) ?>], { legend: ["%%.% - 5 Stars","%%.% - 4 Stars","%%.% - 3 Stars","%%.% - 2 Stars","%%.% - 1 Star"], "colors":["#1a9641","#a6d96a","#d9ef8b","#fdae61","#d7191c"], legendpos: "east"});
    //blue-red colors ["#0571b0","#92c5de","#e7e7e7","#f4a582","#ca0020"]

    pie.each(function(){
        this.sector.scale(0, 0, this.cx, this.cy);
        this.sector.animate({ transform: 's1 1 ' + this.cx + ' ' + this.cy }, 1000, "bounce");
    });

    pie.hover(function () {
        this.sector.stop();
        this.sector.scale(1.1, 1.1, this.cx, this.cy);

        if (this.label) {
            this.label[0].stop();
            this.label[0].attr({ r: 7.5 });
            this.label[1].attr({ "font-weight": 800 });
        }
    }, function () {
        this.sector.animate({ transform: 's1 1 ' + this.cx + ' ' + this.cy }, 300, "bounce");

        if (this.label) {
            this.label[0].animate({ r: 5 }, 500, "bounce");
            this.label[1].attr({ "font-weight": 500 });
        }
    });
};

window.onload = function () {

    displayChart();

}; 
```

并将输出渲染到

```
<div id='holder' style='height:200px;'></div> 
```

我可以在屏幕上动态显示问题（我的意思是我从数据库中获取的文本），但无法处理饼图。如果你能帮助我，我会很高兴。

无论我尝试什么，我都**无法**动态对齐饼图，也无法让它们显示不同的结果。

我也不确定如何将这些值传递给函数，不知何故标准定义不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:44:38.500

我不确定这是否是你要找的。

我已经制作了一系列您的问题值

```
var vals = [
[ 1,2,3,4,5],  
[ 3,5,8,9,1],  
[ 10,100,150,20,70]  
]; 
```

然后根据它们在数组中的索引来偏移饼图。

```
pie = r.piechart(100, (200*loop)+100, 70, vals[loop], { legend: ["%%.% - 5 Stars","%%.% - 4 Stars","%%.% - 3 Stars","%%.% - 2 Stars","%%.% - 1 Star"], "colors":["#1a9641","#a6d96a","#d9ef8b","#fdae61","#d7191c"], legendpos: "east"}); 
```

不可能这么简单吧？

这是[示例](http://jsfiddle.net/amadanNM/BVWZq/)

# java - Java：在字段或构造函数中初始化 ArrayList？

> ID：14289328
> 
> 赞同：8
> 
> 时间：2013-01-12T01:43:21.780
> 
> 标签：java, arraylist, field

如果 ArrayList 未初始化为字段，则在将项目添加到 ArrayList 时出现 NullPointerException。谁能解释为什么？

当我将 ArrayList 初始化为字段时工作：

```
public class GroceryBill {

private String clerkName;
private ArrayList<Item> itemsInGroceryList = new ArrayList<Item>();

private double total;

//Constructs a grocery bill object for the given clerk
public GroceryBill(Employee Clerk) {

    this.clerkName = Clerk.getEmployeeName();
    this.total = 0.0;

}

public void add(Item i) {

    itemsInGroceryList.add(i);
}

} 
```

当我将 ArrayList 声明为字段然后在 Class 构造函数中初始化它时不起作用：

```
public class GroceryBill {

private String clerkName;
private ArrayList<Item> itemsInGroceryList;

private double total;

//Constructs a grocery bill object for the given clerk
public GroceryBill(Employee Clerk) {

    this.clerkName = Clerk.getEmployeeName();
    this.total = 0.0;
    ArrayList<Item> itemsInGroceryList = new ArrayList<Item>();

}

public void add(Item i) {

    itemsInGroceryList.add(i);
}

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T01:45:10.950

因为构造函数中的版本正在创建一个新变量，该变量恰好与您的成员字段命名相同，并且成员字段仍未设置。这称为变量遮蔽，其中新创建的变量遮蔽/隐藏成员字段。

您需要摆脱构造函数中的类型声明，以便引用成员变量：

```
public GroceryBill(Employee Clerk) {
    itemsInGroceryList = new ArrayList<Item>();
} 
```

你甚至可以明确地使用`this`：

```
public GroceryBill(Employee Clerk) {
    this.itemsInGroceryList = new ArrayList<Item>();
} 
```

# javascript - html5 画布不会在坐标 (0,0) 处填充文本

> ID：14289331
> 
> 赞同：10
> 
> 时间：2013-01-12T01:43:39.830
> 
> 标签：javascript, html, canvas, html5-canvas

为什么画布不为任何东西做任何事情`fillText(text, 0,0)`但为它工作`fillText(text, 10, 10)`？

`fillText(text, 0,0):` [http://jsfiddle.net/kFhQm/4/](http://jsfiddle.net/kFhQm/4/)

`fillText(text, 10, 10):` [http://jsfiddle.net/kFhQm/5/](http://jsfiddle.net/kFhQm/5/)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-12T01:47:04.140

第二个参数是文本基线的 Y 坐标（默认`textBaseline`为`"alphabetic"`），因此当您使用 时，文本将绘制在可见元素*上方*。`canvas``0`

[js小提琴](http://jsfiddle.net/WRVYq/)。

您可以使用不同的数字，或者将`textBaseline`属性更改为合适的值，例如`"top"`.

```
ctx.textBaseline = "top"; 
```

[js小提琴](http://jsfiddle.net/LY5wS/)。

# html - 我从 Facebook 获得了点赞按钮代码，但没有出现

> ID：14289332
> 
> 赞同：0
> 
> 时间：2013-01-12T01:43:43.120
> 
> 标签：html, facebook

我完全是关于 HTML 网页设计和 Android 应用程序构建的，所以当我考虑尝试获取用户时，我会参考我的 Facebook 页面并从 Facebook 开发人员那里获取 Like 按钮代码，但是当我插入代码时，它并没有节目！

```
<body>

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=347485521975925";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="https://www.facebook.com/pages/Warriors-of-Atlantis/512072738825326" data-send="true" data-width="450" data-show-faces="true" data-font="lucida grande" data-colorscheme="dark"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:08:01.843

我可能使用了一个稍微过时的类似框版本，但我的工作代码看起来有点不同。尝试将 < div id="fb-root"></div> 放在开始脚本标记之前。

# javascript - 我在页面中放置 Dojo 小部件时遇到问题

> ID：14289334
> 
> 赞同：0
> 
> 时间：2013-01-12T01:44:01.817
> 
> 标签：javascript, dojo, widget

我有一个简单的小部件：

```
define(["dojo/_base/declare", "dijit/_WidgetBase", "dojo/dom-construct"],
function(declare, WidgetBase, domConstruct){

    return declare("gijit.workflow.debug.combi", [WidgetBase], {
        startup: function(){
            alert("started");
        },
        buildRendering: function(){

            var container = domConstruct.create("div", {innerHTML:"test"}, this.domNode, "first");
            var rad1 = domConstruct.create("input", {type:"radio"}, container, "first");
            var rad1 = domConstruct.create("input", {type:"radio"}, container, "last");
        }
    });
}); 
```

和一个简单的加载页面：

```
<!DOCTYPE html>
<html >
<head>

<link rel="stylesheet" href="../../../css/tcs-style-dijit.css" />

<script>dojoConfig = {parseOnLoad: false}</script>
<script src="../../../js/dojo/dojo.js" data-dojo-config="async: true"></script>
<!-- <script src="../../../js/gijit/workflow/debug/combi.js"></script> -->
<script>
require(["dojo/dom", "gijit/workflow/debug/combi", "dojo/parser",
        "dojo/_base/window"], function(dom, combi, parser, window) {
    var widget = new combi();
    widget.placeAt(window.body());
//  widget.startup();
});
</script>
</head>
<body id="dd" class="tcs">
</body>
</html> 
```

但是，我收到以下错误：

组件返回失败代码：0x80004003 (NS_ERROR_INVALID_POINTER) [nsIDOMHTMLBodyElement.appendChild] domain">http:// *domain* : *port* /js/dojo/dojo.js Line 15

我已将错误隔离到尝试将小部件放置在 HTML 中的地步：

```
widget.placeAt(window.body()); 
```

我无法弄清楚是什么导致了这个问题，希望能得到一些帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:33:46.973

目前您调用`window.body()`的 DOM 尚未被解析，因此它返回`undefined`. 要求[`dojo/domReady!`](http://dojotoolkit.org/reference-guide/1.8/dojo/domReady.html)插件作为最后一个模块加载：

```
require([
    "dojo/dom",
    "gijit/workflow/debug/combi",
    "dojo/parser",
    "dojo/_base/window",
    "dojo/domReady!"  // ==> wait for the DOM to be ready
], function(dom, combi, parser, win) {
    var widget = new combi();
    widget.placeAt(win.body());
    widget.startup();
}); 
```

请注意，作为最佳实践，我建议不要通过将模块分配给局部变量来隐藏`window`对象，而是使用。`dojo/_base/window``window``win`

# java - 数组存储异常

> ID：14289336
> 
> 赞同：-4
> 
> 时间：2013-01-12T01:44:21.653
> 
> 标签：java, arrays, interface, casting

我的问题是关于我得到的 ArrayStoreException 。它位于我粘贴在下面的 YaSort 类的第 45 行：

```
result[m] = (Object) input[m]; 
```

显然，我正在尝试分配不兼容的类型，但我不明白这是如何发生的。

这是我的代码：

（抱歉，stackoverflow 不允许我发布两个以上的链接，所以我必须在此处复制粘贴代码。

DVD类，要比较的一个：

```
// A single DVD.

import java.text.NumberFormat;

public class DVD implements Comparable {
private String title, director;
private int year;
private double cost;
private boolean bluray;

public DVD(String title, String director, int year, double cost,
        boolean bluray) {
    this.title = title;
    this.director = director;
    this.year = year;
    this.cost = cost;
    this.bluray = bluray;
}

public String toString() {
    NumberFormat myFormat = NumberFormat.getCurrencyInstance();

    String description = myFormat.format(cost) + "\t" + year + "\t" +
            title + "\t" + director;
    if (bluray)
        description += "\t" + "Blu-ray";

    return description;
}

    public String getTitle() {
        return title;
    }

    public int compareTo(Object input) {
        return title.compareTo(((DVD)input).getTitle());
    }

    public boolean equals(Object input) {
        return title.equals(((DVD)input).getTitle());
    }
} 
```

YaSort 类，其中包括两种排序算法。我正在使用第二个，插入排序：

```
// implements various sorting algorithms for the Comparable interface

import java.lang.reflect.Array;

public class YaSort {
public static Comparable[] selectionSort(Comparable[] input) {
    int largestOne;
    Comparable temp;
    Comparable[] result;
    result = input.clone();

    for (int k = 0; k < result.length - 1; k++) {
        largestOne = k;

        for (int j = k + 1; j < result.length; j++) {
            if (result[largestOne].compareTo(result[j]) < 0) {
                largestOne = j;
            }
        }

        temp = result[k];
        result[k] = result[largestOne];
        result[largestOne] = temp;
    }

    return result;
}

public static Comparable[] insertionSort(Comparable[] input) {

    // don't forget to remove empty references in the input
    Object temp;
    Object[] result;
    int nonEmptyInput = 0;

    for (int i = 0; i < input.length; i++) {
        if (input[i] != null)
            nonEmptyInput++;
    }

    result = (Object[]) Array.newInstance(input.getClass(), nonEmptyInput);

    for (int m = 0; m < nonEmptyInput; m++)
        result[m] = (Object) input[m];

    if (result.length > 1) {
        for (int k = 1; k < result.length; k++) {
            for (int j = 1; j <= k; j++) {
                if (((Comparable)result[k - j]).compareTo(result[k - j    + 1]) < 0) {
                    temp = ((Comparable)result[k - j + 1]);
                    result[k - j + 1] = result[k - j];
                    result[k - j] = temp;
                }
            }
        }
    }

    return (Comparable[]) result;
}
} 
```

DVDCollection 类，它代表一个 DVD 集合（doh！）：

```
// Represents a collection of DVD movies.

import java.text.NumberFormat;

public class DVDCollection {
private final int INITIAL_SIZE = 100;
private DVD[] members;
private int count; // really?
private double totalCost;

public DVDCollection() {
    members = new DVD[INITIAL_SIZE];
    count = 0;
    totalCost = 0.0;
}

public void addDVD(String title, String director, int year, double cost,
        boolean bluray) {
    if(count == members.length)
        increaseSize();

    members[count] = new DVD(title, director, year, cost, bluray);
    totalCost += cost;
    count++;

    members = (DVD[]) YaSort.insertionSort(members);

//        Object members2 = new Object[members.length];
//        members2 = YaSort.insertionSort(members);
//        for (int k = 0; k < members.length; k++) {
//            System.out.println(members2[k].getClass());
//        }
}

private void increaseSize() {
    DVD[] temp = new DVD[members.length * 2];

    for (int k = 0; k < members.length; k++)
        temp[k] = members[k];

    members = temp;
}

public String toString() {
    NumberFormat fmt = NumberFormat.getCurrencyInstance();

    String report = "*******************************************\n";
    report += "My DVD Collection\n\n";

    report += "Number of DVDs: " + count + "\n";
    report += "Total cost: " + fmt.format(totalCost) + "\n";
    report += "Average cost: " + fmt.format(totalCost / count);

    report += "\n\nDVD List:\n\n";

    for (int nDvd = 0; nDvd < count; nDvd++)
        report += members[nDvd].toString() + "\n";

    return report;
}
} 
```

类电影，用于测试其他一切是否正常：

```
public class Movies {
public static void main(String[] args) {
DVDCollection movies = new DVDCollection();

movies.addDVD("The Godfather", "Francis Ford Coppola", 1972, 24.95, true);
movies.addDVD("District 9", "Neill Blokamp", 2009, 19.95, false);
movies.addDVD("Iron Man", "Jon Favreau", 2008, 15.95, false);
movies.addDVD("All About Eve", "Joseph Mankiewicz", 1950, 17.50, false);
movies.addDVD("The Matrix", "Andy & Lana Wachowski", 1999, 19.95, true);

System.out.println(movies);

movies.addDVD("Iron Man 2", "Jon Favreau", 2010, 22.99, false);
movies.addDVD("Casablanca", "Michael Curtiz", 1942, 19.95, false);

System.out.println(movies);
}
} 
```

顺便说一句，我知道当数据的大小预计会发生变化时使用数组没有多大意义，但我正在尝试研究的书给出了这样的例子。我还有另一个带有 ArrayLists 的版本，但它有不同的问题。

谢谢你的帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:15:28.483

在 java 中，数组也是类。因此，在数组上调用 .getClass() 将返回数组类，而不是数组中包含的元素的类。

使用[.getClass().getComponentType()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getComponentType%28%29)确定包含的类，并使用它通过 newInstance 创建一个数组。[或者使用Arrays.copyOf()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28T%5B%5D,%20int%29)创建一个精确的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:01:23.170

问题在于这一行：

```
result = (Object[]) Array.newInstance(input.getClass(), nonEmptyInput); 
```

输入的类型是 of `Comparible[]`，但我认为您打算输入 type `Comparible`。为此，请尝试：

```
result = (Object[]) Array.newInstance(Comparable.class, nonEmptyInput); 
```

# ruby-on-rails - 不断增长的 Rails 应用程序中的 I18n

> ID：14289340
> 
> 赞同：0
> 
> 时间：2013-01-12T01:45:07.603
> 
> 标签：ruby-on-rails, internationalization

我有一个不断增长的 Rails 应用程序，它将支持不同的语言。因此，当某些东西被实施时，将会有新的语言字符串，它们不会被当场翻译成所有可用的语言。我应该检查语言文件是否完整，如果是，我应该怎么做？如果没有，我应该如何处理丢失的字符串。我的想法是使用英语作为所有语言的后备语言环境，并在命中后备后端时自动创建问题单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:50:21.133

对于后备：

```
config.i18n.fallbacks = true
config.i18n.fallbacks = [:en] 
```

不要等待回退发生才知道有*回*退。有一个搜索所有 en i18n 的任务，并尝试在所有语言中找到它。

这样，您将在部署之前找到所有缺少的语言环境

# security - 无法使用 System.Web.Security 命名空间在本地运行 .Net 网站

> ID：14289344
> 
> 赞同：0
> 
> 时间：2013-01-12T01:45:29.053
> 
> 标签：security, asp.net-membership

我接管了这个 4.0 webforms 网站，并从前开发人员那里得到了完全相同的代码。

它在他的本地机器上运行良好，但它在我的本地机器上与“System.Web.Security”命名空间有任何关系。

如果我在它失败的地方设置一个断点并尝试进入该命名空间的代码，它不会让我走得更远。它只是不会执行与命名空间有关的任何事情。所有三种主要浏览器都会发生这种情况

由于这个论坛不允许任何附件，我不能再给你看。

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:36:31.530

原来是我们这边的一个简单权限问题，不允许我的 id 访问数据库。

# payment - 条纹与平衡

> ID：14289347
> 
> 赞同：19
> 
> 时间：2013-01-12T01:46:14.787
> 
> 标签：payment, stripe-payments, balanced-payments

我正在协助开发与美国许多承包商合作的绘画服务后端。我们一直在使用 Stripe，但该企业一直在使用他们银行的 ACH 服务插件向承包商付款，这需要 3-5 天，并且必须手动完成。

Balanced 似乎是 Stripe + 具有出色 API 的次日 ACH 支付，使一切自动化。这是对服务的准确描述吗？我很困惑为什么在这种情况下你会使用 Stripe 而不是 Balanced。如果我没看错的话，这是假设它也是一个像 Stripe 这样的商家账户 + 支付网关。

仍在思考如何最好地完成这项工作。谢谢大家。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-15T00:14:43.527

## 条纹：

*   收费卡
*   [ACH 支出](https://stripe.com/docs/tutorials/sending-transfers)
*   [定期计费](https://stripe.com/docs/subscriptions)
*   网络挂钩
*   OAuth 商家注册
*   2.9% + 30¢ 每次充电
*   在您可以支付之前持有资金 7 天
*   以美元或加元计费

## 均衡：

*   授权和收费卡
*   [ACH 支出](https://www.balancedpayments.com/payouts)
*   [ACH 借记](https://www.balancedpayments.com/ach-debits)
*   完全由 API 驱动的商家注册
*   [代管账户](http://en.wikipedia.org/wiki/Escrow#Internet_escrow)
*   [定期计费](https://github.com/balanced/billy)
*   网络挂钩
*   每次收费 2.9% + 30 美分，每 ACH 积分 25 美分（[批量定价计算器](https://www.balancedpayments.com/pricing)）
*   资金可立即用于支付（与 Stripe 的 7 天滚动准备金相比）
*   美元收费

简而言之，根本区别在于 Stripe 专注于将资金存入*您*的账户，而 Balanced 专注于将资金存入，将其保留到订单完成，*然后*支付给您的商家。

您可以使用 Stripe 收款并使用 Balanced 轻松支付，您遇到的最大问题是流动性问题，因为您必须先将资金从 Stripe 转移到 Balanced，然后才能支付或创建一个浮动7天。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T19:03:36.173

如果您有想要进行销售的子代理或附属公司，但您也需要收取总费用的百分比，Stripe 也很棒。我们最近在一个以事业为导向的网站上实现了这一点，该网站支持为更小、更个人的事业筹集捐款。这是 Stripe API 更有趣的特性之一。子帐户可以即时创建并通过简单的电子邮件验证激活，从而创建用于配置在线联盟计划的一站式商店。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T20:29:17.813

两者都适用于特定的事情，例如平衡可以让您在一个锅中（在他们的托管中）从团体中收集资金，然后将其支付。Stripe 适用于自动计费。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-04-03T21:34:08.633

Stripe 是一家成熟的公司，拥有完善的界面和支持。平衡是一夜之间的飞行。
我有一个使用 Balanced 的站点和一个使用 Stripe Connect 的站点，这是决定性的区别。

*   Balanced 更改了他们的 API 并彻底破坏了所有交易。他们甚至没有发送电子邮件。条纹从来没有发生过。
*   平衡一次“阻止我们的网站进行审查”。我们的市场在没有通知或电子邮件的情况下崩溃了。（当我给他们发电子邮件时没有任何解释，只是回复了它）。
*   balance.js 加载可能需要 10-15 秒，导致页面挂起（我们实现延迟加载只是为了平衡，但页面并不总是在需要时准备好）。
*   IRC 支持：Balanced 有约 40 个不活跃用户和约 10 个在线 ATM 用户[在美国半夜没有用户，不活跃用户没有 AI 个性]。Stripe 至少有 100 个活跃用户，而且我似乎可以在需要的时候得到答案。
*   等等

Balanced 有一个杀手级功能 - 您的用户可以注册并立即开始销售，他们无需验证自己即可销售，只需收款即可。
如果很容易进入系统，他们更有可能坚持到底。但风险是真实存在的，不应忽视。

此外，如果重要的话，Stripe 可以接受多种货币的付款这一事实也可能是一个杀手级功能。

# google-chrome - 如何清除 Chromium 浏览器的图标缓存

> ID：14289348
> 
> 赞同：5
> 
> 时间：2013-01-12T01:46:17.867
> 
> 标签：google-chrome, browser, browser-cache

我更新了显示在浏览器选项卡上的网站图标。我清除了 chromium 浏览器（Ubuntu 的 Chrome 版本）的数据：

'清除浏览数据'->选择'从时间开始'并检查所有内容->单击'清除浏览数据'

但是，我仍然得到我的旧图标。

知道如何清除该缓存吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T01:51:43.977

在另一个选项卡中打开网站图标 URL 并执行 Shift+Reload 以解决此问题。

例如，如果 Favicon URL 是[http://www.example.com/favicon.ico](http://www.example.com/favicon.ico)，请在新选项卡中打开它并执行 Shift+Reload。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-06T18:34:56.477

您可以使用随机 get var 发送同一 ico 的不同版本（如果您的文件是 .php）

```
<link href="ico.png?v=<?php echo rand(9999999,9999999999);?>" rel="icon" type="image/x-icon"/> 
```

# ruby-on-rails - Rails url_for 来自带参数的字符串

> ID：14289351
> 
> 赞同：0
> 
> 时间：2013-01-12T01:46:23.600
> 
> 标签：ruby-on-rails, url-for

我有一个我正在尝试制作的站点本地 tinyurl，所以我需要显示与控制器操作不对应的 URL 的完整路径，这不起作用：

```
url_for("tiny/#{identifier}", :only_path => false) 
```

因为`url_for`接受字符串的那个不接受任何参数。

我怎样才能做到这一点？

根据评论编辑：

配置/路由.rb：

```
get 'tiny/:id' => "original_controller#show", :constraints => {:id => /\d+/}
get 'tiny/:name' => "original_controller#by_name" 
```

耙：

```
GET    /tiny/:id(.:format)                        original_controller#show {:id=>/\d+/}
GET    /tiny/:name(.:format)                      original_controller#by_name 
```

# android - 如果 GPS 无法获取位置，请在 Android 中切换到网络

> ID：14289353
> 
> 赞同：2
> 
> 时间：2013-01-12T01:46:43.900
> 
> 标签：android, networking, gps

我正在尝试基于 GPS 或网络获取位置，但问题是如果我基于 GPS 位置获取位置详细信息需要花费大量时间。因此，我想实现一种方法，如果 GPS 信号非常低，则使用网络提供商获取位置。如何确定 GPS 信号？如果这有问题吗？GPS信号即使在开阔的天空中也总是很低，因此它总是会到达网络提供商？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:20:44.963

添加 lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, ll); 它将开始使用网络获取 gps。使用 location.getProvider() 您应该能够区分它是 gps 还是网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:11:09.640

您是使用 LocationManager.GetLastKnownLocation 轮询位置，还是通过 requestLocationUpdates 异步获取更新？

首先，使用 GPS_PROVIDER 查询位置。如果返回 null，则查询 NETWORK_PROVIDER

如果您收到通知，请同时请求。然后您可以实现 onStatusChanged 来判断 GPS 何时可用，如果可用则忽略网络更新，或者如果不可用则使用它们（位置对象告诉您提供者是什么）。

# javascript - 如何用不同的数字替换字符串中的每个数字？

> ID：14289354
> 
> 赞同：5
> 
> 时间：2013-01-12T01:46:58.577
> 
> 标签：javascript, regex, string

> **可能重复：**
> [如何增加字符串中的每个数字？](https://stackoverflow.com/questions/8432865/how-to-increase-each-number-in-a-string)

在 JavaScript 中，如何用该数字替换字符串中的每个数字`+ 20`？

所以，这个字符串：`"min: 300px and max: 600px, min: 800px"`

最终会成为`"min: 320px and max: 620px, min: 820px"`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T01:48:34.560

也许是最短的版本：

```
"min: 300px and max: 600px, min: 800px".replace(/\d+/g, function(c) {
    return parseInt(c, 10) + 20;
}); 
```

# scala - 从 Scala 2.9.2 中的 scala 运行器的类路径中排除 scalacheck

> ID：14289357
> 
> 赞同：1
> 
> 时间：2013-01-12T01:47:05.813
> 
> 标签：scala, jar, classpath, read-eval-print-loop, scalacheck

一个`scalacheck`jar 意外地包含在 Scala 2.9.2 的标准发行版的`lib`目录中，以及标准的 scala 运行时类（例如`scala-library.jar`）。这是被发现的，并为后续的 Scala 发行版[修复。](https://issues.scala-lang.org/browse/SI-6121)

我想运行 scala 2.9.2 解释器并使用不同版本`scalacheck`的`lib`.

我试过了：

```
$ LOAD_SCALACHECK='import org.scalacheck.Gen; println(Gen.choose(0, 1).sample.get)'
$ scala -e "$LOAD_SCALACHECK"
$ scala -nobootcp -e "$LOAD_SCALACHECK"
$ scala -Dscala.usejavacp=false -e "$LOAD_SCALACHECK"
$ scala -Dscala.usejavacp=false -nobootcp -e "$LOAD_SCALACHECK" 
```

所有这些仍然使用`scalacheck.jar`. 除了从中删除 jar 之外，还有什么方法`lib`可以运行解释器，将类路径中的 jar 排除在外`lib`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:55:01.877

你总是可以切除闯入者，至少对于非 SBT 管理的 Scala 来说……如果你在 SBT 管理的 Scala 中这样做，我很确定 SBT 会把它放回去。

在 SBT 情况下，您可以尝试撤销所有读取该 JAR 的权限。我不知道类加载器在这种情况下会做什么，但希望它足够强大，可以跳过它并继续查看类路径......

# javascript - JavaScript：onclick 使用 iframe 删除 div

> ID：14289358
> 
> 赞同：0
> 
> 时间：2013-01-12T01:47:06.220
> 
> 标签：javascript, facebook, html, iframe, facebook-like

嗨，我试图在单击其中的 facebook like 按钮后删除 div 但不能这样做，这是我的代码

```
<div onclick="this.parentNode.parentNode.removeChild(this.parentNode);">
<iframe id='theiframe' scrolling='no' frameBorder='0' allowTransparency='true'            src='http://www.facebook.com/widgets/like.php?href="www.facebook.com/makestream"&amp;layout=standard&amp;show_faces=true&amp;width=53&amp;action=like&amp;colorscheme=light&amp;height=80' style='width:53px;height:23px;overflow:hidden;border:0;opacity:"0.8";filter:alpha(opacity="0.8");'></iframe>
</div> 
```

有没有办法在点击 facebook like 按钮后删除 div 或 ifreme ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:14:05.493

您无法在 iframe 区域中捕获 click 事件，因为它由 iframe 本身处理并且不会冒泡到 DIV 父级。SO上的这个问题可能对您有帮助：[捕获点击围绕iframe的div](https://stackoverflow.com/questions/3690812/capture-click-on-div-surrounding-an-iframe)

不过，我可以想象一种解决方法：使用 Facebook 的 SDK 并在“赞”按钮上的操作上注册一个侦听器（请参阅此[facebook 文档](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)）。这篇文章[“如何在点击 Facebook Like 按钮时执行 JavaScript”](http://www.techjam.gr/2011/web-design/execute-javascript-facebook-button-clicked/)给出了一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:05:14.077

当有人点击赞按钮时，Facebook 提供回调函数： [https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

```
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T01:48:31.250

我不确定你的 JavaScript。

尝试这个：

```
<div onclick="this.parentNode.removeChild(this);">
<!-- iframe -->
</div> 
```

**更新：**

我不认为这是可能的。

FB Like 按钮上的 click 事件不会传播到 iframe 之外。

这是一个例子：http: [//jsfiddle.net/kboucher/pdvdH/](http://jsfiddle.net/kboucher/pdvdH/)

# ruby - Ruby - 从文本或 html 解析电子邮件

> ID：14289364
> 
> 赞同：11
> 
> 时间：2013-01-12T01:48:19.180
> 
> 标签：ruby

据我了解，在给定文档中扫描电子邮件时，Regex 并不是最好的选择。我想知道是否有任何替代方案？或者一些我不知道的最佳实践方式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T02:25:55.677

对于解析作业，依赖库总是一个好主意。你是对的，一个库总是比正则表达式更详细地处理这个问题，考虑不同的情况等等。

[Mail](https://github.com/mikel/mail)是一个用于解析电子邮件的 Ruby 库：

> Mail 是一个用于 Ruby 的 Internet 库，旨在以简单的 ruby​​esque 方式处理电子邮件的生成、**解析**和发送。
> 
> [...] Mail 设计有一个非常简单的面向对象系统，它真正打开了您正在解析的电子邮件消息，如果您知道自己在做什么，您可以直接摆弄电子邮件的最后一点。

以下是如何访问电子邮件内容的示例：

```
mail = Mail.read('/path/to/message.eml')

mail.envelope.from   #=> 'mikel@test.lindsaar.net'
mail.from.addresses  #=> ['mikel@test.lindsaar.net', 'ada@test.lindsaar.net']
mail.sender.address  #=> 'mikel@test.lindsaar.net'
mail.to              #=> 'bob@test.lindsaar.net'
mail.cc              #=> 'sam@test.lindsaar.net'
mail.subject         #=> "This is the subject"
mail.date.to_s       #=> '21 Nov 1997 09:55:06 -0600'
mail.message_id      #=> '<4D6AA7EB.6490534@xxx.xxx>'
mail.body.decoded    #=> 'This is the body of the email... 
```

它还使您能够解析多部分电子邮件，以及测试和提取附件。

# java - 当我有意图时，我可以在哪里放置布局？

> ID：14289370
> 
> 赞同：2
> 
> 时间：2013-01-12T01:49:22.653
> 
> 标签：java, android, charts, achartengine

我想在android中使用图表，我在下面的类中使用[这个](http://www.achartengine.org/)框架将在启动时使用：

```
public class ChartDemo extends ListActivity {

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent=  new SalesStackedBarChart().execute(this);
    startActivity(intent);

  } 
```

[在此处](http://achartengine.googlecode.com/svn-history/r425/trunk/achartengine/demo/org/achartengine/chartdemo/demo/ChartDemo.java)查看 ChartDemo 类的详细信息

详细类 SalesStackedBarChart[在这里](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/SalesStackedBarChart.java?r=450)

什么时候开始活动（意图），我有一个这样的图表：![在此处输入图像描述](../Images/54455624bf426d7f6b033f16fd71f9ec.png) 但我想将此图表用于带有按钮的布局，textview....我该怎么做？感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:24:34.890

看看[这个](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)例子。它准确地向您展示了您的需求。

此外，[这](https://stackoverflow.com/questions/4062161/android-i-am-using-achartengine-library-for-graphs-but-not-able-to-integrate-a/4079692#4079692)将对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:51:05.583

执行以下步骤：

1.  使用按钮创建布局。
2.  将该自定义图表视图包含到布局中。

做任何你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T02:22:11.817

我不确定我是否正确理解了您的问题，但是如果您问如何使用按钮（而不是 onCreate）来启动它，那么您需要将 startActivity 代码放入按钮 onClick 处理程序中......

最简单的方法是这样的：

XML...

```
<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:onclick="openChart"
android:text="Open Chart"
/> 
```

然后在您的活动代码中

```
public void openChart(View v){
    Intent intent=  new SalesStackedBarChart().execute(this);
    startActivity(intent);
} 
```

# lucene - Lucene JSON 查询语法

> ID：14289375
> 
> 赞同：0
> 
> 时间：2013-01-12T01:50:10.113
> 
> 标签：lucene, elasticsearch

我正在尝试查询其中包含边缘 ngram 的 Elasticsearch 包装的 Lucene 索引，并且无法理解文档以弄清楚如何对其应用布尔运算符。我有这个：

```
{
  "query":{
  "bool":{
    "should":[
      {
        "match":{
          "name.partial":"+henry +james"
        }
      }
    ]
  }
}} 
```

那是行不通的（我得到了有 henry 和没有 james 的结果，反之亦然），“henry james”或 henry AND james 也没有——无论如何我都会得到同样的结果。如何获得我想要的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:42:57.233

您应该为此使用[query_string](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)查询。如果您使用匹配查询，我认为您唯一能做的就是指定查询和要使用的运算符，如下所示：

```
{
    "match" : {
        "message" : {
            "query" : "this is a test",
            "operator" : "and"
        }
    }
} 
```

# cuda - 在 cuda 内核中生成随机数

> ID：14289378
> 
> 赞同：0
> 
> 时间：2013-01-12T01:50:40.847
> 
> 标签：cuda, gpgpu, normal-distribution

我正在编写一个 cuda 程序，我需要在其中生成一个随机变量，该变量将通过遵循正态分布生成。我希望将随机变量的值限制在 0 到 8 之间。所以我希望在内核函数中生成随机变量，然后将随机变量结果用于进一步使用。我打算为此目的使用 cuRAND 库。我一直在尝试使用 curand_normal 设备 api 来生成值，但没有任何成功。如果有人可以向我提供内核函数代码，那将非常有帮助。感谢您的所有帮助。

下面提供的代码是我在 gpu 中搜索的 cpu 实现：

```
 #include "stdafx.h"
    #include <iostream>
    #include <random>

    using namespace std;
    int _tmain(int argc, _TCHAR* argv[])
    {
        const int nrolls=10000;  // number of experiments
        const int nstars=100;    // maximum number of stars to distribute
        int i;
        default_random_engine generator;
        normal_distribution<double> distribution(0.0,3);

       for (i=0;i<=nstars;i++)
       {   int number = distribution(generator);
           printf("%d\n\n",number);
        }

        return 0;
    } 
```

我想补充一点，我不懂 C++，我只是按照我在其他网站上看到的其他代码编写了这个程序。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T07:40:26.227

[这是此代码](http://docs.nvidia.com/cuda/curand/index.html#topic_1_3_6)的改编版，它将产生一组近似“正常”分布的随机数，可以采用大约 0 到 8 之间的离散值。我不明白评论中要求范围为 0 到 8均值为 0。

```
#include <stdio.h>
#include <stdlib.h>
#include <cuda.h>
#include <curand_kernel.h>
#include <math.h>
#define SCALE 2.0
#define SHIFT 4.5
#define DISCRETE
#define BLOCKS 1024
#define THREADS 512

#define CUDA_CALL(x) do { if((x) != cudaSuccess) { \
    printf("Error at %s:%d\n",__FILE__,__LINE__); \
    return EXIT_FAILURE;}} while(0)

__global__ void setup_kernel(curandState *state)
{
    int id = threadIdx.x + blockIdx.x * blockDim.x;
    /* Each thread gets different seed, a different sequence
       number, no offset */
    curand_init(7+id, id, 0, &state[id]);
}

__global__ void generate_normal_kernel(curandState *state,
                                int *result)
{
    int id = threadIdx.x + blockIdx.x * blockDim.x;
    float x;
    /* Copy state to local memory for efficiency */
    curandState localState = state[id];
    /* Generate pseudo-random uniforms */
    for(int n = 0; n < 10; n++) {
        x = (curand_normal(&localState) * SCALE)+SHIFT;
        /* Discretize */
#if defined DISCRETE
        x = truncf(x);
#endif
    }
    /* Copy state back to global memory */
    state[id] = localState;
    /* Store last generated result per thread */
    result[id] = (int) x;
}

int main(int argc, char *argv[])
{
    int i;
    unsigned int total;
    curandState *devStates;
    int *devResults, *hostResults;
    int device;
    struct cudaDeviceProp properties;

    CUDA_CALL(cudaGetDevice(&device));
    CUDA_CALL(cudaGetDeviceProperties(&properties,device));

    /* Allocate space for results on host */
    hostResults = (int *)calloc(THREADS * BLOCKS, sizeof(int));

    /* Allocate space for results on device */
    CUDA_CALL(cudaMalloc((void **)&devResults, BLOCKS * THREADS *
              sizeof(int)));
    /* Set results to 0 */
    CUDA_CALL(cudaMemset(devResults, 0, THREADS * BLOCKS *
              sizeof(int)));

    /* Allocate space for prng states on device */
    CUDA_CALL(cudaMalloc((void **)&devStates, THREADS * BLOCKS *
                  sizeof(curandState)));

    /* Setup prng states */
    setup_kernel<<<BLOCKS, THREADS>>>(devStates);

    /* Generate and use uniform pseudo-random  */
    generate_normal_kernel<<<BLOCKS, THREADS>>>(devStates, devResults);

    /* Copy device memory to host */
    CUDA_CALL(cudaMemcpy(hostResults, devResults, BLOCKS * THREADS *
        sizeof(int), cudaMemcpyDeviceToHost));

    /* Show result */
    if (THREADS*BLOCKS > 20){
      printf("First 20 stored results:\n");
      for (i=0; i<20; i++)
        printf("%d\n", hostResults[i]);
      }

    total = 0;
    for(i = 0; i < BLOCKS * THREADS; i++) {
        total += hostResults[i];
    }
    printf("Results mean = %f\n", (total/(1.0*BLOCKS*THREADS)));

    /* Cleanup */
    CUDA_CALL(cudaFree(devStates));
    CUDA_CALL(cudaFree(devResults));
    free(hostResults);
    return EXIT_SUCCESS;
} 
```

您也可以轻松修改此代码以生成连续值正态分布（浮点数）。

正态分布的两个参数是均值和标准差。这些使用 SHIFT 和 SCALE 参数表示。SHIFT 将平均值从零移动。SCALE 修改标准偏差（从 1.0，到 SCALE 指示的任何值）。因此，您可以使用 SHIFT 和 SCALE 参数来获得您想要的分布。请注意，随机数生成器的实值输出的截断会影响统计信息。您可以通过调整 SCALE 或 SHIFT 来对此进行调整，或者您可以从`truncf()`, 切换到某种形式的舍入。

你可以编译这个：

```
nvcc -arch=sm_20 -o uniform uniform.cu 
```

假设您有 cc2.0 或更高版本的 GPU。

如果没有，可以编译：

```
nvcc -o uniform uniform.cu 
```

在这种情况下，编译器警告 double 被降级为 float 是可以忽略的。

`THREADS`并且`BLOCKS`是机器范围内的任意选择。您可以修改这些以适合您自己代码的特定启动配置。

# ruby-on-rails - Rails3：从 Mailer 中访问 request.host

> ID：14289382
> 
> 赞同：1
> 
> 时间：2013-01-12T01:51:10.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, helper

我正在尝试从 Rails 中的 Mailer访问`request.host`（理想情况下）。`host_with_port`对 request.host 的实际调用是在 Helper 中：

```
#/app/helpers/confirmations_helper
module ConfirmationsHelper
  def email_confirm_url(token)
    "http://#{request.host_with_port}/confirm/#{token}" # failure: undefined method
  end
end

#/app/mailers/user_mailer
class UserMailer < ActionMailer::Base
  default from: "email@domain.com"

  add_template_helper(ConfirmationsHelper) #get access to helpers/confirmations_helper.rb

  def email_confirmation(user)
    @user = user
    @url = "http://www.domain.com/"
    mail(to: user.email, subject: "Email Confirmation")
  end
end

#config/environments/development.rb
...
config.action_mailer.default_url_options = { :host => "localhost:3000" } 
```

我得到的错误是：

```
 ActionView::Template::Error:
   undefined method `host' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-14T23:23:35.490

采用

```
 ActionMailer::Base.default_url_options[:host] 
```

在您的 Mailer 中访问 c​​onfig/environments/ 中配置的主机我相信，这是最简单的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T02:40:35.720

```
ActionView::Template::Error:
  undefined method `host' for nil:NilClass 
```

这是在告诉你那`request`是`nil`。这是因为在您的控制器范围之外*（即在类扩展中`ActionMailer::Base`）* `request`不存在。

您需要将`request`对象或您需要的部分*( `request.host_with_port`)*传递给邮件程序，就像您`user`在`email_confirmation`.

* * *

所以你有一个类似这样的创建方法

```
def create
  @user = User.new

  @user.assign_attributes(params[:user])
  @user.save

  @user.send_email_confirmation
end 
```

在您的`User`模型中，您有这样的`send_email_confirmation`方法

```
class User < ActiveRecord::Base
  def send_email_confirmation
    UserMailer.email_confirmation(self).deliver
  end 
```

你的邮件`email_confirmation`看起来像

```
def email_confirmation(user)
  @user = user
  @url = "http://www.domain.com/"
  mail(to: user.email, subject: "Email Confirmation")
end 
```

**从您的模型**向邮件发送请求不是最好的主意。您应该保持更清晰的关注点分离。这是您的问题的一部分，也是您在尝试将`request`控制器操作中的某些内容传递到邮件模板时发现不必要的复杂性的原因。

我可能建议的是创建一个工人阶级。**[在这里](https://stackoverflow.com/questions/13888409/in-rails-where-is-right-place-to-put-methods-that-need-to-be-available-anywher/13888438#13888438)**，我解释了如何在其中设置类`lib/`- 相同的概念可以应用于类似`lib/your_app/workers/user.rb`.

你可以在这堂课中有以下内容

```
module YourApp
  module Workers
    module User
      extend self

      def create!(params, options{})
        options.reverse_merge! host: ""

        user = User.new

        user.assign_attributes(params)
        user.save

        UserMailer.email_confirmation(user, host).deliver

        user
      end
    end
  end
end 
```

您的控制器操作可以简单地是

```
def create
  @user = ::YourApp::Worker::User.create!(params[:user], host: request.host_with_port)
end 
```

您的邮件方法现在看起来像

```
def email_confirmation(user, host)
  @user = user
  token = "" # define token somehow
  @url = "#{host}/confirm/#{token}"
  mail(to: user.email, subject: "Email Confirmation")
end 
```

最后，您可以`send_email_confirmation`从您的模型中删除以及`email_confirm_url`从您的助手中删除方法，因为它们不再使用。需要注意的两件事

*   我上面的例子不包括任何验证/错误检查的方式
*   我的示例对`token`定义和使用的位置进行了假设

正如你所看到的，通过引入这个“工人”类，功能完全分离，没有重复。

# iphone - 在后台线程上使用 Azure iOS 工具包 SDK

> ID：14289385
> 
> 赞同：3
> 
> 时间：2013-01-12T01:51:29.430
> 
> 标签：iphone, ios, objective-c, azure-storage

我有一个持久队列，它在后台线程上执行任务。这对于用户离线等情况非常有用，并且任务需要持续到完成。任务排队，然后执行，直到成功完成。此队列在后台线程上运行。效果很好。

我的问题是，当我尝试从后台线程调用 Windows Azure iOS 工具包时，它永远不会返回。无论是使用委托模式还是块模式实现。例如：

```
[storageClient fetchBlobContainerNamed:@"myContainer" withCompletionHandler:^(WABlobContainer *container, NSError *error) {
    ....
}]; 
```

永远不会调用完成处理程序。我已经确认 Azure 工具包不喜欢在后台线程上被调用。当它被分流到主线程时，相同的代码执行得很好。然而，这打破了我的整个持久任务队列。

关于如何让 Azure 工具包 SDK 从后台线程运行的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:38:13.087

你能用最简单的复制品[在这里提交一个错误吗？](https://github.com/WindowsAzure/azure-mobile-services/issues)我们将进行调查。

# database-design - 与 NoSQL 数据库的多对多关系

> ID：14289386
> 
> 赞同：22
> 
> 时间：2013-01-12T01:51:33.480
> 
> 标签：database-design, nosql, many-to-many, taxonomy, document-oriented-db

我想使用 NoSQL 数据库为我的 node.js 应用程序实现分类结构（地理术语）。我有一个与 MySQL 相似的分类结构，但现在是前进并学习新东西的时候了，所以我决定尝试不同的方法并为我的测试应用程序使用 NoSQL（面向文档）。分类结构很简单 - 有五个不同的级别：国家（*即*英国）→ 地区（英格兰）→ 县（默西塞德郡）→ 城市/城镇/村庄（利物浦）→ 城市的一部分（Toxteth）。

显而易见的选择是使用树形结构，但细节在于细节——历史上一些城镇属于其他县。这个想法是用这些术语标记出生在某些城市或城镇的人，然后用地理标签过滤他们，所以我必须尊重利物浦或曼彻斯特（以及其他）在某些人出生时是兰开夏郡的一部分这一事实. 否则，任何用户使用我的地理过滤器获得的结果都是不正确的。

示例：John Doe 于 1957 年出生在布莱克本（兰开夏郡）。保罗·布朗于 1960 年出生在利物浦（兰开夏郡，现为默西塞德郡）。乔治亚·多伊 (nee Jones) 5 年后出生在威勒尔（柴郡，现在的默西塞德郡）。他们的儿子林戈于 1982 年出生在利物浦（当时的默西塞德郡）。

约翰出生于兰开斯特，保罗是兰开斯特和默西塞德，乔治亚同时来自柴郡和默西塞德，林戈来自默西塞德。所以当我按县搜索时，它们应该相应地分类。但是，由于遵循国家现代结构的简单一对多结构，它们永远不会被过滤掉。

如何使用 NoSQL（首先是面向文档的）解决方案来实现尊重其结构复杂性的集合？我用谷歌搜索了它并对 stack* 进行了一些研究，但仍然不知道下一步该做什么。在我看来，有几种可能的方法可以解决它：

1.  使用类似 SQL 的数据结构：

    ```
    {
        {'name': 'United Kingdom', 'unique_id': 1},
        {'name': 'England', 'unique_id': 2, 'parents': [1]},
        {'name': 'Merseyside', 'unique_id': 3, 'parents': [2]},
        {'name': 'Lancashire', 'unique_id': 4, 'parents': [2]},
        {'name': 'Liverpool', 'unique_id': 5, 'parents': [3, 4]},
    } 
    ```

2.  使用带有一些引用的树结构：

    ```
    {    
        {'name': 'United Kingdom', 'unique_id': 1
            {'name': 'England', 'unique_id': 2]
                {'name': 'Merseyside', 'unique_id': 3]
                    {'name': 'Liverpool', 'unique_id': 5, 'alternate_parents': [4]},
                },
                {'name': 'Lancashire', 'unique_id': 4},
            },
        },
    } 
    ```

3.  使用没有引用的树结构（一对多）并手动将“alternate parent”标签添加到文档中：

    ```
    {    
        {'name': 'United Kingdom', 'unique_id': 1
            {'name': 'England', 'unique_id': 2]
                {'name': 'Merseyside', 'unique_id': 3]
                    {'name': 'Liverpool', 'unique_id': 5},
                },
                {'name': 'Lancashire', 'unique_id': 4},
            },
        },
    } 
    ```

4.  坚持使用 SQL。

5.  尝试实现无数据库分类。

请给我关于这件事的建议。我是任何 NoSQL 的新手（目前我没有设计过这样的数据库），所以对我来说有一个真正的设计问题。

而且我是堆栈的新手*，所以如果我在这篇文章中做错了什么，请随时纠正我:) 谢谢！

**编辑** 我选择@Jonathan 回答作为解决方案。我认为它更适合我的需求（将有其他文档存储在我的数据库中并用这些术语标记它们），尤其是 @Valentyn 建议的 mapReduce 功能。

但是，如果您的应用程序不需要文档集合，@Philipp 建议的图形数据库（基于关系而不是文档）可能是最好的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T20:20:11.137

由于您发表的评论，当您说“NoSQL”时，我假设您的意思是“MongoDB”。还有很多其他通常称为 NoSQL 的数据库技术完全不同，但这个似乎就是你的意思。

1.  这不是一个好主意，因为要获得整个分类链，您需要执行多个数据库查询，这通常应该避免。

2.  3\. 单个文档是一棵巨大的树也不是一个好主意，因为 MongoDB 每个文档有 16MB 的限制。当您创建巨大的、单一的文档时，您可能会达到这个限制。

我认为 MongoDB 可能不是您用例的最佳解决方案。您是否考虑过使用[图形数据库](http://en.wikipedia.org/wiki/Graph_database)？MongoDB 针对独立存在的自包含文档进行了优化。但是图形数据库的重点是数据集，其中有很多实体，这些实体由它们与其他实体的关系定义。这看起来很像您的用例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T02:07:30.593

首先，如果您不熟悉基本原理，则很难在 NoSQL 和 SQL 数据库之间进行选择。如果这是您要存储的唯一数据，请使用关系 (SQL)。如果有更多数据（我假设）并且它需要更多交织模式，请坚持使用 NoSQL。

我会在这方面采取关系路线，以防止它变得过于复杂......开始几个集合；一个用于国家、地区等。不要因为在 NoSQL 数据库中使用关系 (SQL) 类型的模式而气馁；大多数时候，它们是最好的解决方案。

然后，在每个子组中，都有一个命名父组的字段。

例如：

```
{
    {'name': 'United Kingdom'},
    {'name': 'United States'}
}

{
    {'name': 'England', 'parent': 'United Kingdom'},
    {'name': 'California', 'parent': 'United States'}
} 
```

这样，您的数据集就不会变得如此嵌套以至于返回的数据无法管理。然后你就可以轻松地抓取国家和相应的地区......等。

祝你好运！

**编辑：回答OP的问题：**

（首先，我推荐 MongoDB——它是一个很好的解决方案。）

1.  因为当您开始使用 MongoDB 时，您会意识到它将数据并排存储在硬盘上。如果你编辑这样一个巨大的记录，它很可能会被推到磁盘的后面，使你的硬盘驱动器类似于瑞士奶酪。一旦达到这一点，您将不得不进行修复以再次凝聚它。此外，这样数据更容易在您的应用程序中分离，这样，如果您需要对数据做一些事情，您不必将其应用于整个对象。我假设您将拥有一个大型数据集，因为世界上有许多不同的位置。

2.  不要太担心这种事情。如果您打算大量更改名称，您可以使用父母的 ID 并将孩子与 ID 匹配。我这样做是因为我认为您不需要更改位置数据库。

3.  我会使用嵌套文档来存储多个父级，而不是一个数组。这样，它可以更容易地被查询和索引。我会使用以下方法：

    ```
    {
        {
            'name': 'England,
            'parent': {
                1: 1,
                568: 1
            }
         }
     } 
    ```

这样你就可以运用你的索引想法并找到 where `db.region.$.568`=`1`

# c# - 我怎样才能让一个窗口看起来像一个框架？

> ID：14289391
> 
> 赞同：1
> 
> 时间：2013-01-12T01:52:57.937
> 
> 标签：c#, .net, windows, trayicon, window-style

当您单击托盘中的操作中心、电源、网络或声音图标时，它应该看起来像出现的小框。它需要有没有标题栏的玻璃边框。

![在此处输入图像描述](../Images/9a3d606af64a8276a86a340c807f3513.png)

它还需要是固定大小且不可调整大小。感谢任何能提供帮助的人！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:00:48.313

需要将ControlBox设置为false，清除标题文字，设置边框样式。既然你说你想要相当大的边框，但不允许调整它的大小，你也可以设置最小和最大尺寸。最后，为了防止鼠标光标显示调整大小的光标，如果[WM_NCHITTEST](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645618%28v=vs.85%29.aspx)结果位于其中一个边框上，我们将覆盖它们：

```
private void Form1_Load(object sender, EventArgs e)
{
    this.ControlBox = false;
    this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.Sizable;
    this.MinimumSize = this.MaximumSize = this.Size; 
    this.Text = "";                
}
const int WM_NCHITTEST = 0x0084;
const int HTBOTTOM = 15;
const int HTBOTTOMLEFT = 16;
const int HTBOTTOMRIGHT = 17;
const int HTLEFT = 10;
const int HTRIGHT = 11;
const int HTTOPLEFT = 13;
const int HTTOPRIGHT = 14;
const int HTTOP = 12;
const int HTCLIENT = 1;
protected override void WndProc(ref Message m)
{
    base.WndProc(ref m);
    if (m.Msg == WM_NCHITTEST)
    {
        Console.WriteLine(m.Result.ToString());
        switch (m.Result.ToInt32())
        {
            case HTBOTTOM:
            case HTBOTTOMLEFT:
            case HTBOTTOMRIGHT:
            case HTLEFT:
            case HTRIGHT:
            case HTTOPLEFT:
            case HTTOPRIGHT:
            case HTTOP:
                m.Result =(IntPtr) HTCLIENT;
                break;
        }
    }
} 
```

# c - 在c中的while循环期间/之后无法清除字符串

> ID：14289405
> 
> 赞同：0
> 
> 时间：2013-01-12T01:56:21.497
> 
> 标签：c, string, if-statement, while-loop

我有一个代码可以扫描目录中的所有文件以查找目标单词，并将它们打印到一个新文件中。现在的问题是在while循环读取一个文件并将一个变量存储到字符串中（例如customer）之后，如果正在读取的下一个文件没有目标单词，它仍然显示存储在前一个字符串中的结果文件。如果当前文件没有目标词，我的目标是让它显示“N/A”。

我尝试了几种方法来清除 while 循环末尾或开头的字符串，但它们中的大多数都不起作用，它们中的大多数只会给我一个 coredump 错误。没有想法，任何帮助将不胜感激！

代码（为便于阅读而缩短）：

```
int main(int argc, char** argv)
{   
    char           directory[100];
    char           buff[100];
    char           delims[] = " :=";
    char*          result = NULL;
    char*          customer;
    char*          device;
    char*          buffer;
    int            i = 0;
    DIR*           FD;
    struct dirent* in_file;
    int            c = 0;

    printf("Enter directory:");                                   
    scanf("%s",directory);

    FILE* ft = fopen("workorderlist.csv", "w");    /* Open file to write to*/
    if (ft == NULL)
    {
        puts("Cannot open target file");
        exit(1);
    }

    fprintf (ft, "Work Order,Customer,Device,Test_Prog,Software,DUT_board_id,Corl box\n");

    /* Open Directory */
    if (NULL == (FD = opendir(directory))) 
    {
        puts("Cannot open directory");

        return 1;
    }

    while ((in_file = readdir(FD))) 
    {
        if (!strcmp (in_file->d_name, "."))
        {
            continue;
        }

        if (!strcmp (in_file->d_name, ".."))    
        {
            continue;
        }

        /* Open files to read from  */  
        buffer = (char*)malloc(100);
        sprintf(buffer, "%s/%s", directory, in_file->d_name);

        size_t len = strlen(buffer);
        if (len >= 4 && memcmp(buffer + len - 4, ".wor", 4) == 0)   /* checks if file ends with .wor */
        {
            FILE* fs = fopen(buffer, "r");       /* open file to read */

            if (fs == NULL)
            {
                puts("Cannot open source file");

                return 1;
            }

            /* Scanning each file for targeted words: */
            while (fgets(buff, 100, fs) != NULL)      
            {   
                result = strtok( buff, delims );          
                while (result != NULL)
                {   
                    if ((strcmp(result, "Customer") == 0))
                    { 
                        result = strtok(NULL,delims);  
                        customer = (char*)malloc((strlen(result)+1)*sizeof(char));
                        strcpy(customer, result);
                        for (i = 0; i < strlen(customer) + 1; i++)
                        {
                            if (customer[i] == '\n')
                            {
                                break;
                            }
                        }

                        customer[i] = ' ';
                    }

                    if (strcmp(result, "device") == 0)
                    { 
                        result = strtok(NULL, delims);  
                        device = (char*)malloc((strlen(result) + 1) * sizeof(char));
                        strcpy(device, result);
                        for (i = 0; i < strlen(device) + 1; i++)
                        { 
                            if(device[i] == '\n')
                            {
                                break;
                            }
                        }

                        device[i] = ' ';
                    }

                    result = strtok(NULL,delims);
                }   
            }

            if (customer == '\0')
            {
                customer = "N/A";
            }

            if (device == '\0')
            {
                device = "N/A";
            }

            fprintf(ft, "%s,%s,%s,%s,%s,%s,%s\n", 
                    in_file->d_name, customer, device, testprog, 
                    software, dutboardid, corlbox);

             printf(in_file->d_name);
             printf("\n");
             fclose (fs) ;
             c++;
        }
    }

    printf("Total Workorders Found: %d (Info saved to workorderlist.csv)\n", c);
    fclose(ft);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:07:13.793

首先，客户/设备是字符串。你不应该为它做 == 比较。例如，您可以比较字符串的第一个字符：`device[0] == '\0';` 您应该在循环开始之前进行字符串初始化。您可以通过使用带有已知值的 strcpy 或任何其他字符串操作函数来实现此目的。您在循环之前用于初始化字符串的值是您稍后将使用 strcmp 或类似方法测试的值。与 int 或任何其他 C 数据类型一样，但您需要操作函数。

顺便说一句，您还没有在此处的问题中发布您的读取文件循环吗？

希望这可以帮助。

# actionscript-3 - 应用程序设计模式 AS3

> ID：14289407
> 
> 赞同：0
> 
> 时间：2013-01-12T01:56:41.887
> 
> 标签：actionscript-3, events, design-patterns, data-binding, flash-builder

只是想我会分享一些我发现的东西来帮助跨应用程序传递数据我想知道其他人对此有何看法在 May 应用程序中的任何地方使用，所以这就是我想出的。

我扩展 Application 类并包装在一个抽象函数中，该函数在任何地方注册任何组件的函数，并在最顶层捕获它并传递到我选择的任何地方。

```
public class AxApplication extends Application
{
    public var ___registeredEvents:Array = new Array();
    public var ___registeredFunctions:Array = new Array();
    function AxApplication()
    {
        super();
    }
    public function localRegisterForEvent(e:Event,func:*,caller:*):void
    {
        caller.addEventListener(e.type,localCallerEventHandler,true,3);
        caller.addEventListener(e.type,localCallerEventHandler,false,3);
        ___registeredEvents.push(e);
        ___registeredFunctions.push(func);
    }
    public function localCallerEventHandler(e:*):void
    {
        if(e!=null)
        {
            for(var i:int = 0 ; i<  ___registeredEvents.length; i++)
            {
                if(e.type == ___registeredEvents[i].type)
                {
                    ___registeredFunctions[i](e); 
```

//注册的函数被调用 //没有实现垃圾回收！

```
 }
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:53:05.040

我认为这不是一个非常有用的解决方案。为什么？因为您将 AxApplication 引用分散在应用程序周围。视图和模型实例根本不需要对应用程序的任何引用。最好实现一个使用简单 eventBus 属性的控制器层，如下所示：

```
private static const _EVENT_BUS:IEventDispatcher = FlexGlobals.topLevelApplication;

protected final function eventBus():IEventDispatcher {
  return _EVENT_BUS;
} 
```

如果你实现一个基本视图控制器/中介器（取决于你来自哪个框架），你根本就没有对非框架类的任何引用，这使得它具有高度的可重用性。它只是对用于调度系统范围事件的 Application 单例的简单重用。您在视图控制器/调解器中注册侦听器并相应地更新视图或模型。例如，RobotLegs 也使用系统范围的事件调度程序。

为什么不直接使用 parentApplication 方法？因为您无法实现测试（IDE 生成的测试运行程序不会扩展您的 AxApplication）或者只是在不同的应用程序中拉取组件/模型 - 这基本上是不可能的。

# javascript - 在 Chrome 中检测和清除表单域

> ID：14289410
> 
> 赞同：-1
> 
> 时间：2013-01-12T01:57:31.423
> 
> 标签：javascript, jquery, google-chrome

前几天我在构建表单时遇到了一个问题。输入框有一个类型“数字”。在 Chrome 中，输入字段显示向上/向下箭头。单击向上或向下按钮时，我无法检测到更改，因此我使用 CSS 删除了按钮。这很简单，但并没有解决我所有的问题。

我在现场进行了一些验证（使用 keyup）。如果我在该字段中输入一个数字，它可以正常工作，但如果我在该字段中输入一个字母，我无法检测到它。

在 FF 和 IE 中使用 .val() 可以很好地获取字段的值（数字或字母），但在 Chrome 中，就没有那么多了。如果字段中有字母，我也找不到清除字段的方法。使用 .val('') 只需将光标移动到左侧。

正如我所说，这个问题是特定于使用 Chrome 的。对于所有其他浏览器，我的代码工作正常。

关于可用于解决此问题的代码的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:13:43.650

问题都围绕着“数字”类型的输入。

HTML5 草案定义：

值清理算法如下：如果元素的值不是有效的浮点数，则将其设置为空字符串。

[http://www.w3.org/TR/html5/forms.html#number-state](http://www.w3.org/TR/html5/forms.html#number-state)

尝试执行 .val() 来检索其中包含非数字的 type=number 输入只会返回空字符串。看起来 Chrome 的实现是在实际检索任何值之前将字段的值设置为空字符串。

至于使用 .val('') 重置字段并且无法识别 keyup，此代码似乎可以工作[http://jsfiddle.net/hVVSA/2/](http://jsfiddle.net/hVVSA/2/)

JS

```
var $input = $('input').keyup(function(){
  console.log("here");
});

$('#clearfield').click(function(){
  console.log('val was '+$input.val());
  $input.val('');
}); 
```

HTML

```
<input type="number" />

<button id="clearfield">clear</button> 
```

# c# - linq 查询来解析我的类

> ID：14289418
> 
> 赞同：1
> 
> 时间：2013-01-12T01:58:16.860
> 
> 标签：c#, linq

我需要出于某种目的解析我的类，以便为每个属性提供特定的文本字符串。

```
 namespace MyNameSpace
    {
        [MyAttribute]
        public class MyClass
        {

            [MyPropertyAttribute(DefaultValue = "Default Value 1")]
            public static string MyProperty1
            {
                get { return "hello1"; }
            }

            [MyPropertyAttribute(DefaultValue = "Default Value 2")]
            public static string MyProperty2
            {
                get { return "hello2"; }
            }

        }
    } 
```

这是我的 linq 查询，用于解析此类所在的文件

```
var lines =
    from line in File.ReadAllLines(@"c:\someFile.txt")
        where line.Contains("public static string ")
    select line.Split(' ').Last();

    foreach (var line in lines)
    {
         Console.WriteLine(string.Format("\"{0}\", ", line));
    } 
```

我正在尝试输出以下内容，但我不知道如何为此编写 linq 查询。

```
{"MyProperty1", "Default Value 1"}
{"MyProperty2", "Default Value 2"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:16:08.593

这个怎么样？

```
foreach (var propertyInfo in typeof (MyClass).GetProperties()) {
    var myPropertyAttribute =
        propertyInfo.GetCustomAttributes(false).Where(attr => attr is MyPropertyAttribute).SingleOrDefault<MyPropertyAttribute>();
    if (myPropertyAttribute != null) {
        Console.WriteLine("{{\"{0}\",\"{1}\"}}", propertyInfo.Name, myPropertyAttribute.DefaultValue);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:13:39.847

正则表达式可能是一个更简单的解决方案：

```
var str = File.ReadAllLines(@"c:\someFile.txt");
var regex =
    @"\[MyPropertyAttribute\(DefaultValue = ""([^""]+)""\)\]" +
    @"\s+public static string ([a-zA-Z0-9]+)";

var matches = Regex.Matches(str, regex);

foreach (var match in matches.Cast<Match>()) {
    Console.WriteLine(string.Format("{{\"{0}\", \"{1}\"}}", 
        match.Groups[2].Value, match.Groups[1].Value));
} 
```

样本输出：

```
{"MyProperty1", "Default Value 1"}
{"MyProperty2", "Default Value 2"} 
```

演示：http: [//ideone.com/D1AUBK](http://ideone.com/D1AUBK)

# python - 当整个文件太大时如何在python中使用mmap

> ID：14289421
> 
> 赞同：17
> 
> 时间：2013-01-12T01:59:30.673
> 
> 标签：python

我有一个 python 脚本，它逐行读取文件并查看每一行是否与正则表达式匹配。

我想在搜索之前通过使用内存映射文件来提高该脚本的性能。我研究了 mmap 示例：[http ://docs.python.org/2/library/mmap.html](http://docs.python.org/2/library/mmap.html)

我的问题是当文件对于我的机器内存（4GB）来说太大（15GB）时如何映射文件

我读了这样的文件：

```
fi = open(log_file, 'r', buffering=10*1024*1024)

for line in fi: 
    //do somemthong

fi.close() 
```

由于我将缓冲区设置为10MB，就性能而言，它与我mmap 10MB的文件一样吗？

谢谢你。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-12T02:04:25.777

首先，您机器的内存无关紧要。这是相关的进程[*地址空间*](http://en.wikipedia.org/wiki/Virtual_address_space)的大小。对于 32 位 Python，这将低于 4GB。使用 64 位 Python 就绰绰有余了。

这样做的原因[`mmap`](http://en.wikipedia.org/wiki/Mmap)不是[将文件映射](http://en.wikipedia.org/wiki/Memory-mapped_file)到物理内存，而是映射到[*虚拟内存*](http://en.wikipedia.org/wiki/Virtual_memory)。`mmap`ped 文件就像您的程序的特殊交换文件一样。考虑这一点可能会有点复杂，但上面的维基百科链接应该会有所帮助。

所以，第一个答案是“使用 64 位 Python”。但显然这可能不适用于您的情况。

显而易见的替代方法是在前 1GB 中进行映射，然后对其进行搜索、取消映射、在下一个 1GB 中进行映射，等等。执行此操作的方法是为方法指定`length`and`offset`参数`mmap`。例如：

```
m = mmap.mmap(f.fileno(), length=1024*1024*1024, offset=1536*1024*1024) 
```

但是，您正在搜索的正则表达式可以在前 1GB 中找到一半，在第二个中找到一半。因此，您需要使用窗口化——在前 1GB 中映射、搜索、取消映射，然后在部分重叠的 1GB 中映射，等等。

问题是，您需要多少重叠？如果您知道匹配的最大可能大小，则不需要更多。如果你不知道……好吧，如果不破坏你的正则表达式，就没有办法真正解决问题——如果这不是很明显，想象一下你怎么可能在一个 1GB 的窗口中找到一个 2GB 的匹配。

回答您的后续问题：

> 由于我将缓冲区设置为10MB，就性能而言，它与我mmap 10MB的文件一样吗？

与任何性能问题一样，如果它真的很重要，您需要对其进行测试，如果不重要，请不要担心。

如果你想让我猜：我认为`mmap`这里可能更快，但只是因为（正如 JF Sebastian 暗示的那样）循环和调用`re.match`128K 次可能会导致你的代码受 CPU 限制而不是 IO 限制。但是您可以在没有 的情况下优化它`mmap`，只需使用`read`. 那么，会`mmap`比`read`? 考虑到所涉及的大小，我希望`mmap`在旧 Unix 平台上的性能会快得多，在现代 Unix 平台上大致相同，而在 Windows 上会慢一些。（如果您使用，您仍然可以从`mmap`over`read`或`read`+中获得巨大的性能优势，但这与这里无关。）但实际上，这只是一个猜测。`lseek``madvise`

最令人信服的使用理由`mmap`通常是它比`read`基于 - 的代码更简单，而不是它更快。当您甚至必须使用窗口时`mmap`，并且当您不需要进行任何搜索时`read`，这就不那么引人注目了，但是，如果您尝试以两种方式编写代码，我希望您的`mmap`代码最终会有点更具可读性。（特别是如果您尝试从明显的`read`解决方案中优化缓冲区副本。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T23:12:42.447

我来尝试使用`mmap`是因为我`fileh.readline()`在一个几十 GB 大小的文件上使用过，并希望让它更快。Unix`strace`实用程序似乎显示文件现在以 4kB 块读取，至少 strace 的输出在我看来打印速度很慢，我知道解析文件需要很多小时。

```
$ strace -v -f -p 32495
Process 32495 attached
read(5, "blah blah blah foo bar xxxxxxxxx"..., 4096) = 4096
read(5, "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"..., 4096) = 4096
read(5, "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"..., 4096) = 4096
read(5, "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"..., 4096) = 4096
^CProcess 32495 detached
$ 
```

到目前为止，这个线程是唯一解释我不应该尝试`mmap`太大的文件。我不明白为什么还没有一个辅助函数，比如`mmap_for_dummies(filename)`它会在内部执行 os.path.size(filename) 然后执行 normal`open(filename, 'r', buffering=10*1024*1024)`或执行`mmap.mmap(open(filename).fileno())`. 我当然想避免自己摆弄滑动窗口方法，但该功能是否会做一个简单的决定是否`mmap`对我来说就足够了。

最后提一下，我仍然不清楚为什么互联网上的一些例子`open(filename, 'rb')`没有解释地提到（例如[https://docs.python.org/2/library/mmap.html](https://docs.python.org/2/library/mmap.html)）。如果有人经常想在 for 循环中使用该文件并`.readline()`调用我不知道我应该以模式打开`'rb'`还是只打开`'r'`模式（我想有必要保留`'\n'`.

感谢您提到这个`buffering=10*1024*1024)`论点，这可能比更改我的代码以获得一些速度更有帮助。

# javascript - 如何检查 img src 是否已加载

> ID：14289425
> 
> 赞同：2
> 
> 时间：2013-01-12T02:00:37.493
> 
> 标签：javascript, jquery, load

这个案例 ：

```
<img id = 'img1' src ="a.jpg" />

$('#img1').attr('src','b.jpg'); 
```

动态改变图片资源，资源会被重新加载，问题是，如何通过id/img路径等检查重新加载是否完成...？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:03:26.607

进入[`load`活动](http://api.jquery.com/load-event/)：

```
$("img").load(function () {
    alert('loaded!');
});
$("img").attr("src", "b.jpg"); 
```

**示例：http:** [//jsfiddle.net/6zAN7/4/](http://jsfiddle.net/6zAN7/4/)

# javascript - jQuery“幻灯片”效果绕过

> ID：14289426
> 
> 赞同：2
> 
> 时间：2013-01-12T02:00:46.287
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在使用 jQuery“幻灯片”效果制作一个小网站。我在 3 个 div 标签上多次使用它。我有一个 div 标签触发另一个 div 标签滑入/滑出。我希望每个“行”有一个“动态”（移动的）div 标签和一个“静态”（触发动态的）。我遇到的问题是，每当单击“静态”后隐藏“动态”标签时，下一个“静态”div 标签会向上移动一行，使其看起来非常糟糕。如果我不够清楚，我会在最后提供一个 JSFiddle。单击瘦 div 以使较胖的 div 移动。

的HTML：

```
<div class="tabs">
<div id="static1" class="static"></div>
<div id="dynamic1" class="dynamic"></div>
<br><div id="static2" class="static"></div>
<div id="dynamic2" class="dynamic"></div>
<br><div id="static3" class="static"></div>
<div id="dynamic3" class="dynamic"></div>
</div> 
```

JS：

```
$("#static1").click(function() {
    $("#dynamic1").toggle("slide", { direction: "right" }, 1000);
});
$("#static2").click(function() {
    $("#dynamic2").toggle("slide", { direction: "right" }, 1000);
});
$("#static3").click(function() {
    $("#dynamic3").toggle("slide", { direction: "right" }, 1000);
}); 
```

CSS：

```
.dynamic {
overflow: hidden;
width: 100px;
height: 150px;
background: #ccc;
border-top:1px solid #000;
border-right:0px solid #000;
border-bottom:1px solid #000;
border-left:1px solid #000;
float: right;
background:url('../img/bg_tile.jpg') #333d43;
}

.static {
width: 20px;
height: 150px;
background: #ccc;
border: 1px solid #000;
float: right;
background:url('../img/bg_tile.jpg') #333d43;
}

.tabs {
overflow: hidden;
float: right;
} 
```

**JSFiddle：http:** [//jsfiddle.net/3T9je/](http://jsfiddle.net/3T9je/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:21:22.773

您需要 1）清除`.dynamic`样式上的左浮动和 2）清除样式上的右浮动，`.static`如下所示：

```
.dynamic {
   ...
   clear:left;
}

.static {
   ...
   clear:right;
} 
```

演示： http: [//jsfiddle.net/3QfCf/2/show](http://jsfiddle.net/3QfCf/2/show)
来源：http: [//jsfiddle.net/3QfCf/2/](http://jsfiddle.net/3QfCf/2/)

虽然无法准确解释原因。我尝试在静态上清除两者，但这会导致布局问题。

编辑：我还删除了不需要的`<br>`标签

# mysql - 在具有数百万行的 MySQL 表中进行高效查找

> ID：14289427
> 
> 赞同：2
> 
> 时间：2013-01-12T02:00:46.677
> 
> 标签：mysql, lookup, latency, large-data

我有一个包含大约 2000 万行的 CSV 文件，我想在我的 Web 应用程序中使用它。数据是邮政编码到实际街道地址的映射，格式如下：

```
[zip_or_postal_code] [street_number] [street_name] [city] [state_or_province] [country] 
```

我的目标是将我的查找（按邮政编码搜索）保持在 200 毫秒以下。

我不确定这是否会有所作为，但我计划执行以下操作：

*   将`state/province`、`country`和`city`列移动到它们自己的表中并引用我的主表中的那些，以避免不必要的膨胀。
*   一些邮政编码覆盖多个街道和地址，因此我将合并数据并拥有 1 个邮政编码并将多个地址存储在类似 varchar 的东西中。这应该从表中减少几百万行。

我可以做哪些优化来帮助提高查找速度？例如，Google 的反向地理定位 API 在 300 毫秒内返回结果，其中包括 HTTP 开销。他们是怎么做到的呢？

另外，我对使用其他数据库持开放态度，但由于我已经在使用 MySQL，那会更好。

**编辑**：查找将*始终*通过邮政编码完成，例如：给定邮政编码 12345，我需要返回街道#(s)/name(s)、城市、州和国家/地区。但是，街道#(s)/name(s) 将存储为单个字符串字段，因此我的应用程序将负责解析它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T02:15:04.903

2000 万行对于 MySQL 来说并不算多。只需索引邮政编码，它会很快。速度低于 200 毫秒。无需在表之间拆分。当结果集很大时，MySQL 确实会变慢，但您似乎不会遇到这个问题。对于像您这样的基本查询，MySQL 可以处理数亿条记录。

您将需要调整 MySQL 设置以使其使用更多内存。默认设置非常低。

MySQL 确实支持空间索引。因此，您可以提取邮政编码的经度/纬度并使用空间索引进行邻近搜索。不过，您似乎不是在寻找那个。

如果你真的想要非常非常快的东西，那就走你想的路线，但使用 memcache 或 redis。您可以使用邮政编码作为查找键。您仍然需要一个基于持久磁盘的数据存储来从中加载数据。我不认为 memcache/redis 是必要的，但它是一个选项。

# json - 如何让 jsontypeinfo 在未知类型上返回 null？

> ID：14289429
> 
> 赞同：1
> 
> 时间：2013-01-12T02:00:49.537
> 
> 标签：json, jackson

我有如下代码。

```
 @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = "type", visible = true, defaultImpl = Default.class)
@JsonSubTypes({ 
    @Type(value = T1.class, name = "t1"), 
    @Type(value = T2.class, name = "t2"),}
) 
public abstract class T{
} 
```

其他班级可能会预订

```
class Foo{
T t;
T anotherT;
} 
```

`type`但是，如果未知，它将返回一个 Default 实例。如果我没有指定 defaultImp，jackson 只会抛出异常。

```
 Could not resolve type id 't3' into a subtype of T 
```

我已经`DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES`设置为假了。

我需要的是如果类型不是't1'或't2'，只需将值设置为null，然后继续解析。我该怎么做？

谢谢

# c++ - 架构 x86_64 的未定义符号：“_alloca”

> ID：14289433
> 
> 赞同：0
> 
> 时间：2013-01-12T02:02:50.847
> 
> 标签：c++, macos, g++, alloca

我正在尝试制作项目[polyworld](http://web.archive.org/web/20120717080031/http://www.beanblossom.in.us/larryy/BuildingPolyworld.html)但编译 qt_clust.o 时出错

```
g++ -o bin/qt_clust .bld/qt_clust/tools/clustering/qt_clust.o -L/usr/lib -L/usr/local/lib -L/usr/include -lz -lgsl -lgslcblas -lgomp 
```

并得到

```
"_alloca", referenced from:
      __Z38find_valid_neighbors__measureNeighborsP7ClusterRSt6vectorIiSaIiEEP22GeneDistanceDeltaCacheP19PopulationPartition.omp_fn.4 in qt_clust.o
     (maybe you meant: ParsedCluster* std::vector<ParsedCluster, std::allocator<ParsedCluster> >::_M_allocate_and_copy<__gnu_cxx::__normal_iterator<ParsedCluster const*, std::vector<ParsedCluster, std::allocator<ParsedCluster> > > >(unsigned long, __gnu_cxx::__normal_iterator<ParsedCluster const*, std::vector<ParsedCluster, std::allocator<ParsedCluster> > >, __gnu_cxx::__normal_iterator<ParsedCluster const*, std::vector<ParsedCluster, std::allocator<ParsedCluster> > >))
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我很确定问题出在这个文件上：[https ://github.com/JaimieMurdock/polyworld/blob/master/tools/clustering/qt_clust.cpp](https://github.com/JaimieMurdock/polyworld/blob/master/tools/clustering/qt_clust.cpp)

我在 OSX Mountain Lion 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:13:08.627

如果您更改了这些行：

```
 float dists[clusterNeighborCandidates.size() - (i+1)];

    compute_distances( distance_deltaCache,
                       neighborPartition->genomeCache,
                       clusterNeighborCandidates,
                       i, i+1, clusterNeighborCandidates.size(),
                       dists ); 
```

对此：

```
 ::std::vector<float> dists(clusterNeighborCandidates.size() - (i+1));

    compute_distances( distance_deltaCache,
                       neighborPartition->genomeCache,
                       clusterNeighborCandidates,
                       i, i+1, clusterNeighborCandidates.size(),
                       &(dists[0]) ); 
```

我敢打赌这个问题会消失。

问题是原始代码在堆栈上有一个动态大小的数组。编译器生成的代码调用“alloca”来从堆栈分配内存。不幸的是，该功能是非标准的，并且通常具有不为人知的历史。

动态大小的数组虽然是合法的 C99，但不是合法的 C++03 或 C++11。我认为 g++ 和 clang 都支持它们作为扩展。但显然这种支持在 OS X 下略有破坏。

`::std::vector`巧妙地回避了这个问题。它不会在堆栈上分配数组。它在堆上分配它。

# c# - 复制分离的 SQL Server 数据库时出错

> ID：14289437
> 
> 赞同：0
> 
> 时间：2013-01-12T02:03:31.880
> 
> 标签：c#, sql-server

我正在用 C# 构建一个应用程序。作为一项要求，我需要将数据库从一个本地驱动器移动到另一个驱动器。

在阅读了建议的论坛后，移动数据库的最佳方法是：

*   分离数据库
*   移动数据库
*   附加数据库

我能够使用以下代码成功分离数据库：

```
userConn = new SqlConnection(userdatabase);
userConn.Open();

addConn = new SqlConnection(addInfo);
addConn.Open();

string UserString = "sp_detach_db @DBName, @skipchecks";

SqlCommand cmd = new SqlCommand(UserString, userConn);
cmd.Parameters.AddWithValue("@DBName", userConn.Database);
cmd.Parameters.AddWithValue("@skipchecks", false);
cmd.ExecuteNonQuery();
cmd.Dispose();

cmd = new SqlCommand(UserString, addConn);
cmd.Parameters.AddWithValue("@DBName", addConn.Database);
cmd.Parameters.AddWithValue("@skipchecks", false);           
cmd.ExecuteNonQuery();
cmd.Dispose(); 
```

这工作得很好。但是，我无法移动数据库文件。它抛出一个异常：

> 该进程无法访问文件“*.mdf”，因为它正被另一个进程使用

知道有什么问题吗？

# jquery - 如何使用一串数据执行 jQuery 帖子？

> ID：14289438
> 
> 赞同：0
> 
> 时间：2013-01-12T02:03:43.173
> 
> 标签：jquery, asp.net, vb.net, post

所以我想创建一个“POST”到另一个页面。我想像下面那样做......

```
$.ajax({

    type: "POST",
    url: "maintain.aspx",
    data: { key1:value1, key2:value2, key3:value3 },
    success: function(msg){
        alert("Done!");
    }

}); 
```

问题是我没有变量形式的数据。相反，我以格式如下的字符串提供数据......

```
&myvar=1&thisguy=dave&thatguy=martin 
```

如何从该字符串中获取键/值信息到`data: {}`ajax 调用部分？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T02:08:33.647

该`data`属性可以是您拥有的对象，也可以是查询字符串。因此，您可以简单地按原样使用它。（尽管您可能需要去掉前导`&`）。

```
$.ajax({
    type: "POST",
    url: "maintain.aspx",
    data: "myvar=1&thisguy=dave&thatguy=martin",
    success: function(msg){
        alert("Done!");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:11:08.803

试试这个

```
var str = "&myvar=1&thisguy=dave&thatguy=martin";

var params = str.split('&');

var objData = {};
for (var i = 0; i < params.length; i++) {
  if (params[i] !== '') {
    var attrs = params[i].split('=');
    if (attrs.length) {
      objData[attrs[0]] = attrs[1];
    }
  }
}

$.ajax({
  type: "POST",
  url: "maintain.aspx",
  data: objData,
  success: function (msg) {
    alert("Done!");
  }

});
console.log(objData) 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/uR8UD/)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T02:35:11.720

对困惑感到抱歉。这是一个例子：

```
var url = "?param1=123&param2=222&param3=aaaa";
var json = {param1: " + getQueryString(url, param1)  + ", param2: " + getQueryString(url, param2)  + "}

function getQueryString(url, param){
        var currentURL ="";
        currentURL = url;
        var separar = currentURL.split("&");
        var value = "";
        for (i = 0; i < separar.length; i++) {
            var separarValue = separar[i].split("=");
            if (separarValue[0] == a) {

                value = separarValue[1];
                break;
            }
        }
        return value;
    } 
```

# scheme - 关于 Scheme 的缺点和点表示法

> ID：14289439
> 
> 赞同：2
> 
> 时间：2013-01-12T02:04:03.137
> 
> 标签：scheme, cons

给定

```
#;> (cons (cons 1 2) 3)
((1 . 2) . 3) 
```

当我们尝试

```
#;> (cons 3 (cons 1 2))
(3 1 . 2) 
```

什么决定了在哪里`.`使用？这些构造的内存表示是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:29:31.460

方案实现通常以列表形式打印看起来像列表的东西：

```
-> (cons 1 (cons 2 '()))
'(1 2) 
```

在您的示例中，`(cons 3 (cons 1 2))`如果不是最后一个，它将是一个列表`2`。因此，您的实现会尽最大努力将其打印为列表，直到`2`. 另一个示例不包含任何看起来像列表的部分，因此它只是作为嵌套对打印。

# scala - 在akka中手动创建actor层次结构

> ID：14289440
> 
> 赞同：6
> 
> 时间：2013-01-12T02:04:06.540
> 
> 标签：scala, akka, actor

我的应用程序需要能够创建演员的树形结构。我想这样做的标准方法是将实例化代码放在演员中，以便他们可以实例化他们的孩子。我宁愿采用的方法是能够在给定路径上实例化一个演员。比如在mySystem中创建actor A，然后可以直接创建akka://mySystem/A/B等actor。是否存在这样的功能？这将大大简化我的代码。

编辑：现在我不在手机上，让我详细说明一下。

说我有课

```
class myActor extends actor 
```

我需要制作这些的n路树。而不是在接收函数中实例化自己的孩子所需的代码，例如

```
case Create(n:Int) => {} 
```

我希望通过不包含任何内容来简化 myActor 代码，而是能够在我的代码开头手动创建我的层次结构。所以理想情况下是这样的（假设假设静态函数“create”）：

```
val sys = ActorSystem("mySystem")
Akka.Actors.Create("akka://mySystem/a", new myActor())
Akka.Actors.Create("akka://mySystem/a/b", new myActor())
Akka.Actors.Create("akka://mySystem/a/c", new myActor()) 
```

这将创建演员树：

```
 a
 / \
b   c 
```

现在，这存在吗？有没有更好的方法来做到这一点，而不会使我的演员代码与实例化代码混淆？

编辑，第 2 轮：

好的，看起来这个功能不存在。相反，我创建了一个 actor 的子特征，并将我所有的实例化代码强制放入其中，这样我的具体实现类仍然很整洁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T20:16:08.287

您的问题从解决方案的假设开始，不幸的是它不包括对问题的描述。

Actor 树首先被理解为监督层次结构：父级处理其子级的故障，父级的生命周期限制其子级的生命周期。一个演员是否应该是另一个演员的孩子需要通过考虑这些含义来确定。

我这么说是因为您的问题暗示您正在根据其他一些标准对监督树进行建模，很可能将其滥用为具有`system.actorFor`查找机制的注册表。可能在极少数情况下有效，但我不建议先验；我宁愿在调度员演员中放置一个散列图并让它处理查找。如果您通过测量得出结论认为其性能不够好，您可以使用[路由器](http://doc.akka.io/docs/akka/2.1.0/java/routing.html)扩大规模。

现在回答您的问题：每个父母都需要创建自己的孩子，这意味着它必须以一种或另一种方式包含执行此操作的代码。您可以`Props`向下传递层次结构以使其部分可配置，但您不应该解决[监督的含义](http://doc.akka.io/docs/akka/2.1.0/general/supervision.html)；问问自己如果其中一个叶子失败了会发生什么，然后问自己当中间参与者重新启动时，是否应该重新启动和/或杀死假定的叶子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T04:24:50.640

Create root actor, from within root actor create your tree with `actorFor`. Use `application.conf` in classpath for static configuration of hierarchy of names, or create some constant structure of addresses. The other option is parse paths and create children in overriden `preStart`. There are different schemes for supervising children lifecycle, do restart and routing messages transparently through a single actor.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T02:34:03.747

每个演员都有父母。为了做你想做的事，你需要一个`Actor`类作为所有其他演员（除了根演员）的父级。由于父 Actor 是监督 Actor 的同义词，因此您需要有一些方法来指定应用于这些父 Actor 的监督策略。

我想您可以定义一个通用父`Actor`级以放置到参与者层次结构的内部位置并编写一个方法来分解参与者路径名称并创建由一个或多个这些路径决定的层次结构。您可能想要一种方法来指定监督策略，并且至少`receive`需要在叶子参与者中安装的功能。

由于只有一个actor可以创建它的子actor，父actor必须响应创建子actor（其他父actor或叶子actor）的消息，以某种方式`Actor`为叶子actor选择要实例化的子类。

但是要回答你的问题，没有内置的东西可以做到这一点。我认为它没有足够的通用性来证明将其添加到 Akka 本身是合理的。

# c# - 描述和值作为整数的枚举

> ID：14289441
> 
> 赞同：0
> 
> 时间：2013-01-12T02:04:07.293
> 
> 标签：c#, enums, data-annotations

我正在创建一个下拉列表，我需要用 inegerlike 定义一个枚举

```
Public enum Example
{
  [Description("Any")]
  0,
  [Description("1")]
  1,
  [Description("2")]
  2
} 
```

我想将整数和值也显示为整数。

它给出语法或编译错误。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:08:08.077

```
public enum Example
{
  [Description("Any")]
  Any = 0,
  [Description("1")]
  One = 1,
  [Description("2")]
  Two = 2
} 
```

# actionscript-3 - 应用程序加载屏幕中的 AS3 AIR

> ID：14289446
> 
> 赞同：0
> 
> 时间：2013-01-12T02:04:30.707
> 
> 标签：actionscript-3, air, starling-framework

我想知道是否有人可以分享一些关于如何最好地实现应用程序加载屏幕的想法。

我正在使用适用于 iOS 和 Android 的 Starling 和 Feathers UI 构建一个移动应用程序，有时当单击菜单项以转到新页面时，由于被调用页面上舞台上的组件需要几秒钟。我想显示一个通用的“正在加载...请稍候”屏幕，该屏幕将显示一条消息和一个加载微调器，每次请求新页面时都会显示该微调器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:18:30.330

它被称为闪屏，它可以是一个简单的 jpeg。Adobe 帮助[在这里](http://help.adobe.com/en_US/flex/mobileapps/WSa122979b4619725672e48c412a3e152164-8000.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T22:36:47.957

这就是它的实际完成方式，当您将用户引导到帧时，您使加载程序 MovieClip 可见，加载程序影片剪辑是一个简单的动画，如下所示： [加载程序 http://www.pockettorah.com/wp-内容/应用程序/图像/loader.gif](http://www.pockettorah.com/wp-content/app/images/loader.gif)

1.  制作一个movieclip，并在实例名称中将其命名为loader，并像上面一样对其进行动画处理
2.  在代码的顶部，说`loader.visible = false;`
3.  在您的代码中，在`gotoAndStop`/`gotoAndPlay`或之后，说`loader.visible = true;` 没有真正的显示方式，通常它只是在处理数据时显示的假动画。

# java - 消息代理和缓冲区

> ID：14289447
> 
> 赞同：0
> 
> 时间：2013-01-12T02:04:38.850
> 
> 标签：java, rabbitmq, messaging

很抱歉这个新手问题，但是像 RabbitMQ 这样的消息代理是否可以替代我们自己的消息缓冲区？这意味着如果我们有快速的生产者和缓慢的消费者，使用消息代理来处理队列还是我仍然需要实现自己的队列缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:07:33.287

您的场景确实建议使用 JMS 解决方案，例如 RabbitMQ。这是存在这些队列解决方案的主要原因。如果您预计会有一个巨大的瓶颈，即生产者数量超过您负担得起的消费者数量，您可能必须以更复杂的方式配置您的队列。但是，您不必实现自己的缓冲区。

# android - Android：从 SQL 脚本文件创建数据库而不将数据返回到活动

> ID：14289450
> 
> 赞同：-1
> 
> 时间：2013-01-12T02:05:07.713
> 
> 标签：android, database, sqlite, installation

我已经完成了我的作业；我知道从活动中查询 SQLite 数据库的所有方法。

问题是所有示例都假设我想将数据库中的数据“加载”到 FIRST Activity 屏幕上。

但是当我的应用程序的第一个活动被加载时，我不想从数据库中获取任何数据；我只想：

(1) 检查是否已经创建了 db 文件（如果设置例程已经运行）。

（2）如果db存在，加载SECOND Activity（用ContentProvider/Loaders等），这样用户就可以开始添加数据了。

或者

(2) 如果数据库不存在，在第一个活动中运行安装程序（从 *.sql 文件创建数据库/表并在需要的地方插入虚拟数据）......然后加载第二个活动（使用 ContentProvider/Loaders 等），以便用户可以开始添加数据。

对我来说，创建 db/tables 的简单操作不应该需要 ContentProvider 的所有 OVERHEAD 以及一堆游标和加载器。

有没有人可以为我指出一个简单的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:00:44.457

Yaqub 的链接很有帮助...

...我所做的是在 DBConstants 类中创建公共静态最终字符串数组，其中包含在首次运行时创建数据库的命令。

# ruby-on-rails - 使用 meta_where gem 的 meta_search

> ID：14289451
> 
> 赞同：0
> 
> 时间：2013-01-12T02:05:12.483
> 
> 标签：ruby-on-rails, meta-search, meta-where

我正在使用 meta_search 和 meta_where gem。在我的控制器文件中：

```
@search = Project.where('end <= ?', Time.zone.now) 
@search = @search.search(params[:search]) 
```

当我运行此代码时，我在浏览器中出现这样的错误

```
PG::Error: ERROR:  syntax error at or near "end" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:58:08.507

您可能没有关于项目的“结束”列，这可能意味着您有迁移但忘记使用 运行它`rake db:migrate`，或者需要进行迁移以添加该列。如果列名是 end_date，你可以这样做：

`rails g migration add_end_date_to_projects end_date:date`

然后运行迁移。

编辑：'end' 是 PostgreSQL 中的保留字，所以我认为该列需要重命名。

见：[http ://www.postgresql.org/docs/8.3/static/sql-keywords-appendix.html](http://www.postgresql.org/docs/8.3/static/sql-keywords-appendix.html)

# ruby-on-rails - 如何显示哈希数据？

> ID：14289455
> 
> 赞同：0
> 
> 时间：2013-01-12T02:05:35.147
> 
> 标签：ruby-on-rails

```
<% @user.dids.each_with_index{ |did, i| %>
  <li><%=h @user.dids %></li>
<% } %> 
```

显示的结果

```
#<Did:0x7fc4c55f4bf0>#<Did:0x7fc4c55f4ba0>#
<Did:0x7fc4c55f4b50>#<Did:0x7fc4c55f4b00>#
<Did:0x7fc4c55f4a88>#<Did:0x7fc4c55f4a10>#
<Did:0x7fc4c55f49c0>#<Did:0x7fc4c55f4970> 
```

我几乎睡着了，没想到，告诉我如何显示哈希数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:40:36.330

您可以在 rails 中使用调试功能

```
<%= debug @user %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:02:03.540

首先，你的循环有点奇怪。在我看来你应该有

```
<% @user.dids.each_with_index{ |did, i| %>
  <li><%=h did %></li>
<% } %> 
```

`@user.dids`在您的版本中，您将在每次迭代中打印整个内容。

另外，类是如何`Did`定义的？如果您在 Rails 中并且`Did`是 ActiveRecord 模型，那么您应该可以使用该`.to_json`方法（[此处](http://apidock.com/rails/ActiveRecord/Serialization/to_json)的选项和信息）：

```
<% @user.dids.each_with_index{ |did, i| %>
  <li><%=h did.to_json %></li>
<% } %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T03:13:55.817

好的，我睡得很好

```
<% @user.dids.each_with_index{ |did, i| %>
  <li><%= did.did %></li>
<% } %> 
```

感谢同事的帮助

# json - 带有连字符的 HTML 元素属性名称会自动转换为驼峰式

> ID：14289459
> 
> 赞同：4
> 
> 时间：2013-01-12T02:06:27.180
> 
> 标签：json, angularjs, html, hyphenation

我正在构建一个自定义 AngularJS 指令来创建一个谷歌地图，并且我已经将一些谷歌地图选项存储在我的标签内的自定义属性中：

```
<googlemap zoom-control="true" …&gt;</googlemap> 
```

Angular 的指令编译方法有参数`(tElement, tAttrs, transclude)`；当我登录`tAttrs`到控制台时，该对象的属性名称已将连字符转换为 camelCase：

![扩展的 $tAttrs 对象的 Chrome 开发工具的屏幕截图（属性名称已转换为有效格式）](../Images/43b81862e8bea5f5c82049f672b4ada1.png)

谁在做这件事——Angular 还是浏览器（在 Firefox 和 Chrome 中检查）？我可以依靠这种行为吗？

PS 当我检查 DOM 时，html 元素的属性仍然有连字符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T02:29:02.400

Angular 正在这样做。是的，您可以依赖它：

从[属性](https://docs.angularjs.org/api/ng/type/$compile.directive.Attributes)页面：

> 指令编译/链接函数之间的共享对象，其中包含规范化的 DOM 元素属性。这些值反映了当前的绑定状态 {{ }}。规范化是必要的，因为所有这些在 Angular 中都被视为等效：
> `<span ng:bind="a" ng-bind="a" data-ng-bind="a" x-ng-bind="a">`

# php - 通过 php 中的单选按钮 onclick 处理程序更新 mysql 中的标志

> ID：14289465
> 
> 赞同：0
> 
> 时间：2013-01-12T02:07:26.650
> 
> 标签：php, mysql, onclick, radio-button, flags

我想更新 mysql 表中的列。基本上，该列是该数据库表条目的标志。

列的修改是将所有值重置为 0 并将所需的行设置为 1，因此我有*post.php*文件，它看起来像

```
<?php
require_once('class.uuid.php');

$connection = mysql_connect("---logindetailshere---");
$db = mysql_select_db("---dbnamehere---",$connection);

switch($_REQUEST['action']){
    case ...
        break;
    case ...
            break;
    case 'changeDisp':
        changeDisp($_REQUEST['uid']);
        break;
}

mysql_close($connection);

...

function changeDisp($uid){
    global $connection, $db;
    $q_string = "UPDATE Questions SET Displayed = 0";
    $query = mysql_query($q_string,$connection) or die( sendError(mysql_error() . '<br/><br/>' . $q_string) );
    $q_string = "UPDATE Questions SET Displayed = 1 WHERE Uid='${uid}'";
    $query = mysql_query($q_string,$connection) or die( sendError(mysql_error() . '<br/><br/>' . $q_string) );
}

?> 
```

在网页上，我在项目旁边显示项目和单选按钮，目的是选择单选按钮并发布为所选项目设置标志 1，因此我有一个*item.php*文件

```
 <?php
        $i = 1;
        foreach ($qitem as &$q) {
            $options = explode(";", $q["Options"]);
            $displayed = '';
            if ($q["Displayed"] == 1) { $displayed='checked="yes"'; }

            echo("<div class='item' name='".$q["iUid"]."'>");
            echo("<div class='count'>".$i.".</div>");
            echo ("<div class='radio'><input type='radio' onclick='changeDisp(&#34;".$q["Uid"]."&#34;)' name='disp' ".$displayed."></div>");
            echo("<div class='left'>");
            echo("<h4>".$q["Value"]."</h4>");
            echo("<div class='details'>Typ: ".$q["Type"]."</div>");
            echo("<div class='details'>Skala: ".$options[0]." / ".$options[1]."</div>");
            echo("</div>");
            echo("</div>");
            $i++;
        }   
    ?> 
```

在这里，我使用单选按钮来选择相关项目，我使用萤火虫检查了唯一的 id 值，这些值很好，我只想单击任何单选按钮并想触发该`onclick=changeDisp()`功能。

我不知道为什么页面不会自行重新加载并将选定的标志更改为 1。你能帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:43:24.117

如果不使用 javascript、jQuery 或 ajax 调用，就不能使用 onclick 函数调用 php 函数。您可以创建一个 ajax 脚本来 从**item.php页面调用****post.php**并将结果返回给您。

这是创建所需功能的示例。这假设它`$uid`来自单选按钮，而不是实际的用户输入。如果用户可以直接输入一些你需要使用**准备好的语句**

```
 function changeDisp($uid)
{
$Mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);
    if ($Mysqli->connect_errno)
    {
        echo "Failed to connect to MySQL: (" . $Mysqli->connect_errno . ") " . $Mysqli->connect_error;
        $Mysqli->close();
    }           
    $query = "UPDATE Questions SET Displayed = 1 WHERE Uid='".$uid."'";     
    $update = $Mysqli->query($query);
    if($update)
    {
        return true;
    }
    return false;
} 
```

# html - 避免在 CSS 中换行

> ID：14289467
> 
> 赞同：0
> 
> 时间：2013-01-12T02:07:31.553
> 
> 标签：html, css

我的`HTML`结构如下：

```
<div id="id1">
   <h1>my name </h1><h3><a href="mailto:myemail_id">myemailid@xyz.com</a></h3>
</div> 
```

代码会自动`<h3>`在下一行显示。但是，我希望它旁边`<h1>`没有任何换行。

CSS：

```
#id1{
    width: 900px;
    padding: 30px; 
    background: #FFF;
    text-align:center;
}

#id1 h3{
    font-family:Arial;
    white-space:nowrap
} 
```

如何修改以达到我想要的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:09:10.443

您可以使用更多语义标记或简单地使用 CSS 修改元素：

```
#id1 h1, #id1 h3 { display: inline; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T02:12:38.943

默认情况下，HTML 标题行为`display: block`。因此它们不会与任何其他`relative`元素共享同一行。

将它们的显示设置为`inline-block`，它们将按照您的预期一个接一个地渲染。

# javascript - 回调中的递归

> ID：14289468
> 
> 赞同：0
> 
> 时间：2013-01-12T02:07:35.117
> 
> 标签：javascript, node.js, asynchronous, callback

我在节点模块中有一个函数，它是一组三个嵌套回调，它工作得很好，给了我需要的线性，因为每个嵌套回调都依赖于前一个回调的数据。问题是第二个函数的回调需要冒泡并递归调用其父函数。它与外部 API 进行通信。这是实际代码，变量重命名以混淆我的超级顶级 sekrit 业务逻辑：

```
exports.account_usage = function (req, res) {

  var domainID = req.body.domains,
    startDate = req.body.date_start,
    endDate = req.body.date_end,
    accountItems = {},
    usage = {},
    domainStats = {},
    page = 0;
  //req.cs is a module that communicates with an external API to gather usage data
  req.cs.exec("listAccountItems", {
    "listall": "true",
      "domainid": domainID
  },

  function (error, result) {
    accountItems = result.item;
    console.log("listAccountItems callback");

    //Get Usage Records

    req.cs.exec("listUsageRecords", {
      "startdate": startDate,
        "enddate": endDate,
        "domainid": domainID,
        "page": page,
        "pagesize": 2000 //try not to DDOS the server. only fetch 2000 records at a time
    }, function (error, result) {
      usage = req._.extend(usage, result.usagerecord); //this is underscore
      console.log("Usage Records: " + usage.length);
      page++;
      //right here, if result.length === 2000, I need to call
      // listUsageRecords until result.length < 2000

      //got list of  Usage,
      //now process usage here

      //filter usage item 1
      var bytesrecords1 = req._.filter(usage, function (usage) {
        return (usage.usagetype === 4);
      });
      //sum
      var bytes1 = req._.reduce(bytesrecords1, function (memo, record) {
        return memo + parseInt(record.rawusage, 10);
      }, 0);
      console.log("Bytes1: " + bytes1);
      domainStats.bytes1 = (((bytes1 / 1000) / 1000) / 1000).toFixed(4);

      //filter usage item 2
      var bytesrecords2 = req._.filter(usage, function (usage) {
        return (usage.usagetype === 5);
      });
      //sum
      var bytes2 = req._.reduce(bytesrecords2, function (memo, record) {
        return memo + parseInt(record.rawusage, 10);
      }, 0);
      console.log("Bytes2: " + bytes2);
      domainStats.bytes2 = (((bytes2 / 1000) / 1000) / 1000).toFixed(4);

      req._.each(accountItems, function (account) {
        //get runnning hours
        var recs = req._.filter(usage, function (usage) {
          return (usage.accountid === account.id && usage.usagetype === 1);
        });
        account.usage = req._.reduce(recs, function (memo, record) {
          return memo + parseInt(record.rawusage, 10);
        }, 0);

        //filter all the recs for each usage type, 1-14
        console.log("Account Usage: " + account.usage);
        console.log("Account ID: " + account.name);
      });

      console.log("ready to render");
      res.render('usage', {
        "title": "Usage Report",
        "domain": domainStats
      });

    });
  });

}; 
```

实际代码也在这个小提琴中：[http://jsfiddle.net/3wTQA/1/][1] 我一直使用谷歌，直到我的手指流血，我不知道如何阻止内部回调继续的递归。API 需要来自外部 API 的分页，以防止在需要获取大型数据集的情况下远程系统上的 DDOS。

编辑：这是实际代码，经过注释和清理，并附有一些我试图提取的数据示例：http: [//jsfiddle.net/3wTQA/1/](http://jsfiddle.net/3wTQA/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:10:05.027

好的，我得到它的工作。我使用 async.whilst 函数留在回调中，直到获取所有数据。我是这样做的：

```
exports.account_usage = function (req, res) {

  var domainID = req.body.domains,
    startDate = req.body.date_start,
    endDate = req.body.date_end,
    accountItems = {},
    usage = {},
    domainStats = {},
    page = 0;
  //req.cs is a module that communicates with an external API to gather usage data
  req.cs.exec("listAccountItems", {
    "listall": "true",
      "domainid": domainID
  },

  function (error, result) {
    accountItems = result.item;
    console.log("listAccountItems callback");

    //Get Usage Records
async.whilst(
function(){return count === pagesize},
function (callback){
    req.cs.exec("listUsageRecords", {
      "startdate": startDate,
        "enddate": endDate,
        "domainid": domainID,
        "page": page,
        "pagesize": 2000 //try not to DDOS the server. only fetch 2000 records at a time
    }, function (error, result) {
       usage.usagerecord = usage.usagerecord.concat(result.usagerecord);
       count = result.usagerecord.length;

      console.log("Usage Records: " + usage.length);
      page++;
      callback();
      //now process usage here
},
function (err) {
      //filter usage item 1
      var bytesrecords1 = req._.filter(usage, function (usage) {
        return (usage.usagetype === 4);
      });
      //sum
      var bytes1 = req._.reduce(bytesrecords1, function (memo, record) {
        return memo + parseInt(record.rawusage, 10);
      }, 0);
      console.log("Bytes1: " + bytes1);
      domainStats.bytes1 = (((bytes1 / 1000) / 1000) / 1000).toFixed(4);

      //filter usage item 2
      var bytesrecords2 = req._.filter(usage, function (usage) {
        return (usage.usagetype === 5);
      });
      //sum
      var bytes2 = req._.reduce(bytesrecords2, function (memo, record) {
        return memo + parseInt(record.rawusage, 10);
      }, 0);
      console.log("Bytes2: " + bytes2);
      domainStats.bytes2 = (((bytes2 / 1000) / 1000) / 1000).toFixed(4);

      req._.each(accountItems, function (account) {
        //get runnning hours
        var recs = req._.filter(usage, function (usage) {
          return (usage.accountid === account.id && usage.usagetype === 1);
        });
        account.usage = req._.reduce(recs, function (memo, record) {
          return memo + parseInt(record.rawusage, 10);
        }, 0);

        //filter all the recs for each usage type, 1-14
        console.log("Account Usage: " + account.usage);
        console.log("Account ID: " + account.name);
      });

      console.log("ready to render");
      res.render('usage', {
        "title": "Usage Report",
        "domain": domainStats
      });

    });
  });
}),

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:27:59.233

我认为您可以`pages`在包含`biglistofresults`.

```
biglistofresults = {};
function pages(id, page) {
    page = page || 0;
    module.exec("anotherAPIcall", {"id": id, "page": page }, 
        function (error, result) {
            if (result.length === 2000) { //there is probably more data
                biglistofresults = _.extend(biglistofresults, result);
                pages(id, page + 1);
            }
    );
}
module.exec("externalAPIcall", {"listall": "true", "domainid": domainID}, 
    function (error, result) {
        _.map(result, pages);
}); 
```

# visual-c++ - 有没有办法在 VC++ 的 CDialog 中散焦字段？

> ID：14289471
> 
> 赞同：0
> 
> 时间：2013-01-12T02:08:18.460
> 
> 标签：visual-c++, lost-focus, cdialog

当我使用 VC++ 的 CDialog 项目制作对话框时，我无法在此对话框（CDialog）上散焦任何字段。我想要做的是当我用鼠标单击该字段的外部时如何使某些字段散焦。

感谢您的任何建议和意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:59:27.313

唯一明显的问题：为什么？为什么要从控件中分散焦点，并且（可能）不将焦点放在任何控件上？对话框中的某些控件应该具有键盘焦点！

但是，`SetFocus`只要您`WM_MOUSE*`在`CDialog`.

# javascript - 更改间隔

> ID：14289473
> 
> 赞同：0
> 
> 时间：2013-01-12T02:08:45.153
> 
> 标签：javascript

有没有可能`setInterval`，然后在运行 180 次后，减慢间隔时间？

基本上在大约 15 分钟后，我希望计时器每分钟只运行一次，然后在大约一个小时后将间隔设置为每小时运行一次。我希望有一种方法可以做到这一点，而不必`setInterval`在 a中嵌入`setInterval`a `setInterval`。

```
var c = 0;
var interval = 5000;
var timer;
timer = setInterval(function(){
    checkActivity();
    c++;
    if(c > 180){
        interval = 60000;
    }
}, interval); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:10:23.450

尝试这样的事情：

```
var c = 0;
var timer = setInterval(function() {
    checkActivity();
    c++;
    if( c == 180) {
        clearInterval(timer);
        timer = setInterval(arguments.callee,60000);
    }
},5000); 
```

# javascript - Mobiscroll onBeforeShow，设置Value

> ID：14289475
> 
> 赞同：0
> 
> 时间：2013-01-12T02:09:12.610
> 
> 标签：javascript, jquery, mobiscroll

如何使用 mobiscroll 调用 onBeforeShow 事件？

```
$('#starttime').mobiscroll('setValue', value).time({
        theme: 'jqm',
        display: 'modal',
        mode: 'clickpick',
        stepMinute: 10,
        onBeforeShow:  
 }); 
```

我需要在它显示之前设置时间。如果我尝试在文档准备就绪时执行此操作，则输入字段尚未准备好值...

**编辑**

我试过了：

```
$('#starttime').mobiscroll('setValue', value).time({
        theme: 'jqm',
        display: 'modal',
        mode: 'clickpick',
        stepMinute: 10,
        onBeforeShow: function(html, inst) {
            start = $('#starttime').val();
            var a = moment();
            var value = a.format('h:mm A');

            }
        }); 
```

但后来我收到错误消息：'值未定义'......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:31:44.163

你必须提供一个回调函数。

```
$('#starttime').mobiscroll('setValue', value).time({
        theme: 'jqm',
        display: 'modal',
        mode: 'clickpick',
        stepMinute: 10,
        onBeforeShow: function (html, inst) {
            //Gets called before the scroller appears. The function receives the jQuery object containing the generated html and the scroller instance as parameters
        }
 }); 
```

[http://docs.mobiscroll.com/23/mobiscroll-core](http://docs.mobiscroll.com/23/mobiscroll-core)

# java - java mysql - 如何快速执行许多复杂的计算？

> ID：14289476
> 
> 赞同：1
> 
> 时间：2013-01-12T02:09:15.233
> 
> 标签：java, mysql, bigdata

我有以下问题：

我正在寻找相似之处。因此，我有一个包含 200000 个条目的大源表和包含 10000 个条目的第二个表。现在我正在为每个表检索一个条目集，并将源表中的每一行与 java 中第二个表中的每一行进行比较（我正在使用一些 NeedleMan Gotoh 算法和类似的更复杂的算法）。这意味着要进行 10 亿次比较，这实在是太多太慢了……

目标是一个具有所有相似性的表（来自源表的 id、来自第二个表的 id 和相似性值）或至少类似于每个条目的最佳匹配（或最佳 x 匹配）......

谁能给我一些建议以在“正常”时间内进行此类计算？

**编辑**

主表

```
---+------+-------------+---------+-------+
id | name | address     | country | plz   | ...
---+------+-------------+---------+-------+
20 | Sony | Main Str. 1 | US      | 10000 |
---+------+-------------+---------+-------+ 
```

第二张表

```
---+------+-------------+---------+-------+
id | name | address     | country | plz   | ...
---+------+-------------+---------+-------+
30 | Soni | MainStr. 1  | US      | 10000 |
---+------+-------------+---------+-------+ 
```

目标（相似度表）：

```
---+---------------+--------------+-----------+
id | id_source_tbl | id_second_tbl| similarity|
---+---------------+--------------+-----------+
1  | 20            | 30           | 0.99      |
---+---------------+--------------+-----------+ 
```

simil_value 是一个值，表示源表中的公司与第二个表中的公司相同的可能性有多大

结果表明，这两行代表同一家公司...这两个条目只是因为拼写错误而有所不同...（0.99 是相似度，非常高 => 公司相同）相似度是用针线工计算的wunsch gotoh 算法（将 char 与 char 进行比较并考虑字符串中的位置等等......错别字应该导致高相似度值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:14:18.997

这听起来像是一个令人尴尬的并行问题，因此作为第一步，您可以在多个内核和机器上进行分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:17:54.657

通常让 MySQL 执行数据选择比检索海量数据集然后使用您自己的算法对其进行过滤更有意义。听起来您所做的只是一个相当简单的连接操作，例如：

```
SELECT source_id_column, second_id_column, similarity_column
FROM source_table, second_table
WHERE source_table.similarity_column = second_table.similarity; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T02:53:55.033

在 SQL 中，您可以将其表示为：

选择 t1.id 作为 id1，t2.id 作为 id2，calculate_similarity(t1.name, t2.name) 作为来自 t1 交叉连接 t2 的相似度

现在，您要将相似度表定义为：

```
create table similarity (
    SimilarityID int not null auto_increment,
    id1 int,
    id2 int,
    similarity float
) 
```

然后插入如下：

```
insert into similarity(id1, id2, similarity)
    select t1.id as id1, t2.id as id2,
           calculate_similarity(t1.name, t2.name) as similarity
    from t1 cross join
         t2 
```

SQL 引擎应该并行执行交叉连接以及相似度计算。也许您有办法限制查询，例如要求公司处于相同的状态或以相同的字母开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:52:32.710

其实问题是我自己做的...

我的解决方案如下：
1）不要重用连接，总是用相应的 ResultSet 关闭它们
2）使用事务
3）将工作拆分到线程
4）如果你和我一样，有单行的结果（一个单行的所有相似之处条目）并想在这个子结果上计算一些东西（就像在我的情况下，对于我想计算排名的所有相似之处），在 java 中执行此操作并使用子结果！！！！而不是事后在mysql中做

结果对我来说是大约 1 天的计算时间而不是 3 周...

谢谢您的帮助

# javascript - 具有不同颜色选项的浮动线菜单/导航

> ID：14289478
> 
> 赞同：0
> 
> 时间：2013-01-12T02:09:34.860
> 
> 标签：javascript, jquery, css, menu

我正在尝试[将此菜单](http://www.menucool.com/horizontal/menu-code?menu=1&skin=2&p=1)用于我的 wordpress 网站。

我只是想知道如何使每个悬停/选择的导航项的浮动线更改颜色，因为目前它是红色（`background-color:#800; height:2px;`）。

这就是我想要实现的目标：
菜单 1 - 悬停的浮动线是绿色，
菜单 2 - 浮动线是黄色，
菜单 3 - 红色，菜单 4 - 蓝色等等。

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:16:13.493

有一种更“CSS”的方法可以实现这一点，但使用一些 javascript，您可以获得一些可读性很强的东西。使用这种方法，您的页面将需要正确初始化浮动线 ( `.hightlight`) 和导航边框 ( `#sses1 > ul`)。

理想的解决方案是为每个浮点线创建一个类，但这是我仅使用 javascript 得到的：

```
<!-- added individual classes for nav items -->
<div id="sse1">
  <div id="sses1">
    <ul>
      <li><a class="nav-item-1" href="?menu=1&skin=2&p=Javascript-Menus">Javascript Menus</a></li>
      <li><a class="nav-item-2" href="?menu=1&skin=2&p=Horizontal-Menus">Horizontal Menus</a></li>
      <li><a class="nav-item-3" href="?menu=1&skin=2&p=Web-Menus">Web Menus</a></li>
    </ul>
  </div>
</div> 
```

在加载正文或窗口之前：

```
 function customHandleMenu() {
        // get nav selector
        var nav = $('#sses1 > ul');

        // get float line selector
        var floatLine = $('.highlight'); // .hightlight must exist at this point

        // get colors for the current page
        var defaultBGcolor = floatLine.css('background-color');
        var defaultBorderColor = floatLine.css('border-color');
        var defaultNavBorderColor = nav.css('border-bottom-color');

        // change background-color and border-color on mouseenter event

        $('.nav-item-1').on({
            mouseenter: function () {
                setColors({floatColor:'#0f0', borderColor:'#0f0'});
            }
        });

        $('.nav-item-2').on({
            mouseenter: function () {
                setColors({floatColor:'#ee0', borderColor:'#ee0'});
            }
        });

        $('.nav-item-3').on({
            mouseenter: function () {
                setColors({floatColor:'#05f', borderColor:'#05f'});
            }
        });

        /*
           ...
        */

        // put back default colors on the mouseleave event
        $('#sses1 > ul > li').on({
            mouseleave: function() {
              setColors({floatColor:defaultBGcolor, borderColor:defaultNavBorderColor});
            }
        });

        function setColors(args) {
            if (typeof args.floatColor != "undefined") {
                floatLine.css('background-color', args.floatColor);
            }

            if (typeof args.borderColor != "undefined") {
                floatLine.css('border-color', args.borderColor);
                nav.css('border-bottom-color', args.borderColor);
            }
        }
    } 
```

为确保选择器仅在 .highlight 存在时使用，我建议将原始 javascript 的结尾修改为：

```
function initMenu() {
    sse1.builMenu();
    customHandleMenu();
}

if (window.addEventListener) {
    window.addEventListener("load", initMenu, false);
}
else if (window.attachEvent) {
    window.attachEvent("onload", initMenu);
}
else {
    window["onload"] = initMenu;
} 
```

看看[这个 jsfiddle](http://jsfiddle.net/aRRD3/5/)。

PS：事件链稍作修改以适应 jsfiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:42:45.990

您所要求的实际上并非微不足道。该插件的作者实际上是根据您将鼠标悬停的位置为 li 元素的“li.highlight”、宽度和左定位设置动画。您可以通过更改此项目的 CSS 定义轻松更改此项目的颜色。例如，要将其设为黄色，只需在菜单的 css 文件下方包含此 css 定义：

```
#sses1 li.highlight {
    background-color: yellow;
    top: 36px;
    height: 2px;
    border-bottom: solid 1px yellow;
    z-index: 1;
    position: absolute;
    overflow: hidden;
} 
```

我知道这不是完整的解决方案...但是，如果您有野心，您可以根据 .highlight 元素所在的 li 元素更改 javascript 添加一个新类。

# android - Android：可在 ViewPager 内滚动

> ID：14289482
> 
> 赞同：0
> 
> 时间：2013-01-12T02:10:56.790
> 
> 标签：android, webview, touch, android-viewpager, scrollable

我将自定义 WebView 放入自定义 ViewPager： [https ://github.com/JakeWharton/Android-DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)

我已将 ViewPager 设置为垂直方向的页面，这与我的 WebView 滚动的方向相同，但 ViewPager 会拦截所有触摸事件。

所以它应该如何工作是 WebView 滚动直到它到达末尾，然后一旦它在滚动结束时，应该允许 ViewPager 分页到下一页。

我想，在 ViewPager 中，我需要找出当触摸事件发生时，可能响应事件的子视图列表，看看它们是否可滚动并适当地响应。

如果 ViewPager 忽略了触摸事件，我如何才能找出将接收触摸事件的潜在子视图列表？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-08T21:30:53.670

从 Android 的 ViewPager 中获得启示。

```
/**
 * Tests scrollability within child views of v given a delta of dx.
 *
 * @param v View to test for horizontal scrollability
 * @param checkV Whether the view v passed should itself be checked for scrollability (true),
 *               or just its children (false).
 * @param dx Delta scrolled in pixels
 * @param x X coordinate of the active touch point
 * @param y Y coordinate of the active touch point
 * @return true if child views of v can be scrolled by delta of dx.
 */
protected boolean canScroll(View v, boolean checkV, int dx, int x, int y) {
    if (v instanceof ViewGroup) {
        final ViewGroup group = (ViewGroup) v;
        final int scrollX = v.getScrollX();
        final int scrollY = v.getScrollY();
        final int count = group.getChildCount();
        // Count backwards - let topmost views consume scroll distance first.
        for (int i = count - 1; i >= 0; i--) {
            // TODO: Add versioned support here for transformed views.
            // This will not work for transformed views in Honeycomb+
            final View child = group.getChildAt(i);
            if (x + scrollX >= child.getLeft() && x + scrollX < child.getRight() &&
                    y + scrollY >= child.getTop() && y + scrollY < child.getBottom() &&
                    canScroll(child, true, dx, x + scrollX - child.getLeft(),
                            y + scrollY - child.getTop())) {
                return true;
            }
        }
    }

    return checkV && ViewCompat.canScrollHorizontally(v, -dx);
} 
```

它实际上遍历整个视图层次结构并进行命中测试以查看触摸是否位于视图边界内，如果是，则检查该视图是否可以滚动。

# python - “无法连接到‘localhost’(10061) 上的 MySQL 服务器”python 中的错误

> ID：14289484
> 
> 赞同：1
> 
> 时间：2013-01-12T02:11:29.570
> 
> 标签：python, mysql, database-connection, mysql-python

就在今天，我决定要学习 python，因为我个人喜欢它的语法和感觉。我是一个非常年轻的开发人员，我真的很想学习一门新的编程语言，因为我只精通`JavaScript`（尤其是 javascript），`PHP`所以我决定使用`Python`. Python 看起来很像 javascript execpt，因为它们不使用花括号来定义新块。当然，它的功能要强大得多。

我了解到您可以`MySQL`使用`MySQLdb`.

但是当我使用以下代码时，我遇到了问题。

```
db = MySQLdb.connect(host="localhost", user="methodjs_postes", passwd="********", db="methodjs_postes"); 
```

我收到这个大错误：

```
Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    db = MySQLdb.connect(host="localhost", user="methodjs_postes", passwd="********", db="methodjs_postes");
  File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)") 
```

我真正关注的主要部分是`Can't connect to MySQL server on 'localhost' (10061)`部分。（但如果你也解释其他部分会很好）

我不明白为什么我会遇到这个问题。我用`localhost`在我的`PHP`，它工作得很好。而且我做`import`了`MySQLdb`我认为不是错误的事情，因为那时它甚至不会尝试连接。

我正在使用`python 2.7`，我将使用 3.3（已下载），但`MySQLdb`最多仅支持 2.7。

使用时`select User,Host,Password from mysql.user where User like '%methodjs_postes%';`出现以下错误：

`SELECT command denied to user 'methodjs'@'localhost' for table 'user'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-17T20:25:04.740

只需将 localhost 替换为 127.0.0.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:54:14.857

[https://chat.stackoverflow.com/rooms/22618/discussion-between-shawn31313-and-suku](https://chat.stackoverflow.com/rooms/22618/discussion-between-shawn31313-and-suku)

根据聊天，结论是：-“您的 mysql 主机是远程机器，不允许远程 mysql 连接”

# javascript - JQuery在提交表单后更改表单url

> ID：14289485
> 
> 赞同：1
> 
> 时间：2013-01-12T02:12:06.433
> 
> 标签：javascript, jquery

我遇到了一个奇怪的问题，我在提交表单后更改了表单 url。我已经更改了表单字段，它们正在完美地改变，但操作 url 没有改变......这是 HTML 代码..

```
<form action="" method="post" id="payment-form">
    <input type="hidden" id="email" name="email" value="">
    ....
</form> 
```

## jQuery 代码

```
$.ajax({
    url: form_url,
    type: 'post',
    context:this,
    data: $("#payment-form").serialize(),
    dataType: 'json',
    success: function(data) {
        if(data.success) {
            $('#payment_form').attr("action", data.url);
            $('#email').val(data.email);
            alert($("#payment-form").attr('action'));
            //$("#payment-form").submit();

        }
        else {
            $('#error').html(data.errors).addClass('error').fadeIn("slow").fadeOut(9000);
        }
    }
}); 
```

警报显示我没有网址，这是为什么呢？

## 更新

我已经设置`$('#payment_form').attr("action", data.url);`它没有显示 url，但`alert(data.url)`显示了 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:18:52.490

改变

```
$(this).attr("action", data.url); 
```

到

```
$('#payment-form').attr("action", data.url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:25:34.770

更新：原因是标记中的空操作参数。如果您将其完全排除在标记之外，则可以在您`data.url`从 ajax 调用返回时由 jQuery 设置该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T02:19:40.477

`this`在成功回调中不是形式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T02:25:00.430

我没有看到带有 ID 的元素`payment_form`：

```
$('#payment_form').attr("action", data.url); 
```

试试这个：

```
$('#payment-form').attr("action", data.url); // <--- notice the 'dash' instead of the underscore 
```

# static-linking - 在静态二进制文件上使用 dlsym

> ID：14289488
> 
> 赞同：7
> 
> 时间：2013-01-12T02:12:31.720
> 
> 标签：static-linking, dlopen, dlsym

是否有希望`dlopen(NULL, ...)`为静态编译的二进制文件运行和获取符号？

例如，如果程序是动态编译的并且我使用`-rdynamic`.

```
$ gcc -o foo foo.c -ldl -rdynamic
$ ./foo bar
In bar! 
```

但是`-static`我收到一条神秘的错误消息：

```
$ gcc -static -o foo foo.c -ldl -rdynamic
/tmp/cc5LSrI5.o: In function `main':
foo.c:(.text+0x3a): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
$ ./foo bar
/lib/x86_64-linux-gnu/: cannot read file data: Is a directory 
```

来源`foo.c`如下：

```
#include <dlfcn.h>
#include <stdio.h>

int foo() { printf("In foo!\n"); }
int bar() { printf("In bar!\n"); }

int main(int argc, char**argv)
{
  void *handle;
  handle = dlopen(NULL, RTLD_NOW|RTLD_GLOBAL);
  if (handle == NULL) {
    fprintf(stderr, "%s\n", dlerror());
    return 1;
  }

  typedef void (*function)();
  function f = (function) dlsym(handle, argv[1]);
  if (f == NULL) {
    fprintf(stderr, "%s\n", dlerror());
    return 2;
  }
  f();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T06:33:53.123

> 有没有希望运行 dlopen(NULL, ...) 并为静态编译的二进制文件获取符号？

不。

在大多数 UNIX 上，您甚至无法同时链接`-static`和`-ldl`。可以使用 glibc，但这样做的效用*非常*有限。基本上，此功能仅用于支持 /etc/nsswitch.conf，仅此而已。

进行您所做的动态查找也*没有任何意义。*

如果您试图允许其中一个`foo`，`bar`或者`baz`根据命令行参数被调用，只需放入一个表，例如

```
struct { const char *fname, void (*fn)(void) } table[] =
  { {"foo", &foo}, {"bar", &bar}, ...};

for (int i = 0; i < ...; ++i)
  if (strcmp(argv[1], table[i].fname) == 0)
    // found the entry, call it
    (*table[i].fn)(); 
```

如果您尝试“可能”调用`foo`（如果已链接），并且不执行任何其他操作，请使用弱引用：

```
extern void foo(void) __attribute((weak));

if (&foo != 0) {
  // foo was linked in, call it
  foo();
} 
```

# java - 如何将字符串数组转换为 ArrayList

> ID：14289491
> 
> 赞同：1
> 
> 时间：2013-01-12T02:12:41.210
> 
> 标签：java

> **可能重复：**
> [在 Java java 中将数组分配给 ArrayList](https://stackoverflow.com/questions/3746639/assigning-an-array-to-an-arraylist-in-java)
> [：如何将此字符串转换为 ArrayList？](https://stackoverflow.com/questions/3898548/java-how-to-convert-this-string-to-arraylist)
> [如何将字符串转换为 ArrayList？](https://stackoverflow.com/questions/7347856/how-to-convert-a-string-into-an-arraylist)

我有这个`String`：

```
["word1","word2","word3","word4"] 
```

上面的文本不是数组，而是服务器通过 GCM（Google Cloud Messaging）通信返回的字符串。更具体地说，在 GCM 类中，我有这个：

```
protected void onMessage(Context context, Intent intent) {

String message = intent.getExtras().getString("cabmate");

   } 
```

消息的价值`String`是 `["word1","word2","word3","word4"]`

有没有办法将它转换成Java`List`或`ArrayList`Java？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:19:26.483

```
Arrays.asList(String[]) 
```

返回一个`List<String>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:51:50.940

像这样的东西：

```
/*
@invariant The "Word" fields cannot have commas in thier values or the conversion
to a list will cause bad field breaks. CSV data sucks...
*/
public List<String> stringFormatedToStringList(String s) {
  // oneliner for the win:
  return Arrays.asList(s.substring(1,s.length()-1).replaceAll("\"","").split(","));
  // .substring  removes the first an last characters from the string ('[' & ']')
  // .replaceAll removes all quotation marks from the string (replaces with empty string)
  // .split brakes the string into a string array on commas (omitting the commas)
  // Arrays.asList converts the array to a List
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T02:20:10.690

```
String wordString = "[\"word1\", \"word2\", \"word3\", \"word4\"]";
String[] words = wordString.substring(1, wordString.length() - 2).replaceAll("\"", "").split(", ");
List<String> wordList = new ArrayList<>();
Collections.addAll(wordList, words); 
```

这将做你想要的。请注意，我故意拆分`", "`以删除空格，`.trim()`在 for-each 循环中调用每个字符串然后添加到`List`.

# hadoop - 如何将 mysql DDL 转换为 hive DDL

> ID：14289495
> 
> 赞同：1
> 
> 时间：2013-01-12T02:13:16.917
> 
> 标签：hadoop, schema, translation, hive

给定一个包含用于在 MySQL 数据库中创建表的 DDL 的 SQL 脚本，我想将该脚本转换为 Hive DDL，以便我可以在 Hive 中创建表。我本可以自己编写一个解释器，但我认为我可能会错过一些细节（例如数据格式转换、int、bigint、时间、日期等），因为我对 hive DDL 非常陌生。

我看过这个线程[How to transfer mysql table to hive?](https://stackoverflow.com/questions/4632514/how-to-transfer-mysql-table-to-hive) ，其中提到了 sqoop [http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html](http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html)。但是，据我所知，sqoop 肯定会翻译 DDL，但只是作为中间步骤（因此无法找到翻译后的 DDL）。我是否错过了以 MySQL DDL 作为输入输出翻译的命令？

例如，我的 MySQL DDL 如下所示：

```
CREATE TABLE `user_keyword` (
  `username` varchar(32) NOT NULL DEFAULT '',
  `keyword_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`username`,`keyword_id`),
  KEY `keyword_id` (`keyword_id`),
  CONSTRAINT `analyst_keywords_ibfk_1` FOREIGN KEY (`keyword_id`) REFERENCES `keywords` (`keyword_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

输出 Hive DDL 如下：

```
CREATE TABLE user_keyword (
  username string,
  keyword_id int,
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:23:00.063

我实际上认为这是不支持的，但是在查看 Source 之后，我在[HiveImport.java](https://git-wip-us.apache.org/repos/asf?p=sqoop.git;a=blob_plain;f=src/java/org/apache/sqoop/hive/HiveImport.java;hb=trunk)中看到了：

```
/**
 * @return true if we're just generating the DDL for the import, but
 * not actually running it (i.e., --generate-only mode). If so, don't
 * do any side-effecting actions in Hive.
 */
private boolean isGenerateOnly() {
  return generateOnly;
}

/**
 * @return a File object that can be used to write the DDL statement.
 * If we're in gen-only mode, this should be a file in the outdir, named
 * after the Hive table we're creating. If we're in import mode, this should
 * be a one-off temporary file.
 */
private File getScriptFile(String outputTableName) throws IOException {
  if (!isGenerateOnly()) {
    return File.createTempFile("hive-script-", ".txt",
        new File(options.getTempDir()));
  } else {
    return new File(new File(options.getCodeOutputDir()),
        outputTableName + ".q");
  }
} 
```

所以基本上你应该能够只`--generate-only`使用在 cujunction 中使用的选项生成 DDL，`--outdir`并且你的表将在指定的输出目录中创建并以你的表命名。

例如，根据您提供的链接：

```
sqoop import --verbose --fields-terminated-by ',' --connect jdbc:mysql://localhost/test --table employee --hive-import --warehouse-dir /user/hive/warehouse --fields-terminated-by ',' --split-by id --hive-table employee --outdir /tmp/mysql_to_hive/ddl --generate-only 
```

将创建`/tmp/mysql_to_hive/ddl/employee.q`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-21T21:57:57.127

或者，可以使用**create-hive-table**工具来做到这一点。create-hive-table 工具使用基于先前导入 HDFS 的数据库表或计划导入的数据库表的表定义填充 Hive 元存储。这有效地执行了**sqoop-import 的 --hive-import**步骤，**而无需运行**前面的导入。例如，

> sqoop create-hive-table --connect jdbc:mysql://localhost/demo -username root --table t2 --fields-terminated-by ',' --hive-table t2

此命令将根据 MySQL 中同一张表的 schema 创建一个空白的 hive 表 t2，而不导入数据。

# ruby-on-rails - FactoryGirl 不接受属性覆盖

> ID：14289503
> 
> 赞同：0
> 
> 时间：2013-01-12T02:14:44.247
> 
> 标签：ruby-on-rails, rspec, factory-bot

我确信这是一个微不足道的错字，但我没有看到。这段代码是在削减到最低限度之后，我仍然看到这个语法错误。原谅我的愚蠢，因为我知道，一旦你向我展示我没有看到的东西，我就会感觉到！

```
FactoryGirl.define do
  factory :user do
    name "a name"
  end
end

@goodguy = FactoryGirl.create (:user, {:name => "a"}) 
```

给我：

```
/Users/pitosalas/.rvm/gems/ruby-1.9.3-p194@repeatsurvey/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load': /Volumes/MonsterHD/mydev/repsurv/spec/models/access_control_spec.rb:29: syntax error, unexpected ',', expecting ')' (SyntaxError)
      @goodguy = FactoryGirl.create (:user, {:name => "a"})
                                           ^
/Volumes/MonsterHD/mydev/repsurv/spec/models/access_control_spec.rb:29: syntax error, unexpected '}', expecting keyword_end
      @goodguy = FactoryGirl.create (:user, {:name => "a"}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:21:15.280

摆脱之后的空间`create`

```
@goodguy = FactoryGirl.create(:user, {:name => "a"}) 
```

例如

```
[3] pry(main)> FactoryGirl.create (:staff_user, {:first_name => "ben"})
SyntaxError: unexpected ',', expecting ')'
FactoryGirl.build (:staff_user, {:first_name => "ben"})
                               ^
[3] pry(main)> FactoryGirl.create(:staff_user, {:first_name => "ben"})
=> #<User::Staff id: 1, ... 
```

* * *

解释一下，当您在方法名称后放置一个空格时，方法调用中的所有内容都将被视为参数 #1**与**`(...)`空格一起使用的替代方法是省略括号。

 **```
@goodguy = FactoryGirl.create :user, {:name => "a"} 
```

你会得到一个错误，因为 Ruby 试图将其`(:user, {:name => "a"})`作为一个表达式进行评估，这当然没有任何意义。

```
[7] pry(main)> (:user, {:name => "a"})
SyntaxError: unexpected ',', expecting ')'
(:user, {:name => "a"})
       ^ 
```**

# php - 查找访问者是否喜欢我的 Facebook 页面

> ID：14289511
> 
> 赞同：0
> 
> 时间：2013-01-12T02:15:36.193
> 
> 标签：php, javascript, facebook

嗨，我正在寻找一种方法来了解我网页的访问者是否喜欢我的 Facebook 粉丝专页？有知道的吗？如果它可以用javascript完成会更好，但如果它是在php中则不是问题。谢谢你。

已编辑：我也想知道访问者之前是否喜欢我的粉丝专页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:26:06.063

如果你想使用 Javascript，当点击赞按钮时，Facebook 会提供一个回调：

```
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You liked the URL: ' + response);
    }
); 
```

您可以在那里找到更多详细信息： [https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:41:49.993

似乎有一种方法可以知道访问者是否喜欢您的页面。

您可以查看此页面： [如何使用 Facebook 的 API 检查用户是否喜欢我的 Facebook 页面或 URL](https://stackoverflow.com/questions/5093398/how-to-check-if-a-user-likes-my-facebook-page-or-url-using-facebooks-api/5100287#5100287)

# wordpress - Nginx 使用 .htacess 吗？如果没有，那么我的 WordPress 网站如何使用 .htaccess？

> ID：14289512
> 
> 赞同：0
> 
> 时间：2013-01-12T02:15:45.010
> 
> 标签：wordpress, .htaccess, nginx

我问这个问题是因为我在 Nginx 服务器上有一个 WordPress 博客，它显然有一个 .htacess 文件；但是，一位同事告诉我 Nginx 不使用 .htaccess。如果 Nginx 不使用 .htacess，那么它使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:09:33.213

仅仅因为文件夹中有一个 .htaccess 文件并不意味着它被 nginx 以任何方式使用。

您可以通过 nginx 配置文件设置 nginx 以使用 WordPress。[http://wiki.nginx.org/WordPress](http://wiki.nginx.org/WordPress)

# makefile - 依赖于目录下所有文件（包括子目录内）的 Makefile 规则

> ID：14289513
> 
> 赞同：55
> 
> 时间：2013-01-12T02:15:50.200
> 
> 标签：makefile, wildcard, gnu-make, glob

我的 Makefile 中的一条规则将整个目录 ( `res/`) 压缩到 ZIP 文件中。*显然，当目录下的任何*文件`res/`发生变化时，都需要执行此规则。因此，我希望规则将该目录下的所有文件作为先决条件。我该如何执行此规则？

[在启用该`globstar`选项](https://unix.stackexchange.com/questions/49913/recursive-glob/49917#49917)的Bash中，您可以使用通配符模式获取该目录中所有文件的列表`res/**/*`。但是，如果您在 Makefile 中将其指定为先决条件，它似乎不起作用：

```
filename.jar: res/**/* 
```

即使在`touch`ing 中输入文件后`res/`，Make 仍然会报告

```
make: `filename.jar' is up to date. 
```

很明显，它没有识别出这种模式。

如果我将目录本身声明为先决条件：

```
filename.jar: res 
```

那么 Make 在文件被修改时不会重新执行（我认为`make`只查看目录本身的修改日期，只有在添加、删除或重命名直接子项时才会更改）。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-12T03:20:11.197

这：

```
filename.jar: $(wildcard res/**/*) 
```

至少在某些平台上似乎有效。

**编辑：**

或者更好的是，打个结：

```
filename.jar: $(shell find res -type f) 
```

# javascript - 跨不同对象同步画笔

> ID：14289514
> 
> 赞同：1
> 
> 时间：2013-01-12T02:16:06.370
> 
> 标签：javascript, d3.js, synchronize, brush, parallel-coordinates

我增强了平行坐标的原始实现[https://github.com/syntagmatic/parallel-coordinates](https://github.com/syntagmatic/parallel-coordinates)。当前的可视化看起来像这样[http://xmashallax.xm.funpic.de/bc/test_csv.html](http://xmashallax.xm.funpic.de/bc/test_csv.html)：

![在此处输入图像描述](../Images/41875bf849d279487e49017e681cdfde.png)

基本上，现在有 3 个不同的平行坐标小部件以具有不同轴顺序的矩阵形式排列。

我当前的目标是在这些行之间同步画笔，我不知道如何实现这一点。我有 3 个不同的对象，并希望它们立即同步更改（如果可能）。假设我在圆柱体的第 1 行创建了一个画笔。现在第 2 行和第 3 行圆柱体应该将该画笔应用于其数据。

已经实现了“刷子”处理程序，但我的问题是通过回调或类似的方式通知其他处理程序（在我写这篇文章时，我会想到观察者模式）。尽管我在原始代码中花费了很多时间，但我仍然不了解每个细节并需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:22:28.427

是的，你应该使用观察者模式。

# java - .NET 等效于 Java 有界通配符 (IInterf )？

> ID：14289518
> 
> 赞同：6
> 
> 时间：2013-01-12T02:16:40.997
> 
> 标签：java, .net, generics, covariance, bounded-wildcard

我一直在尝试将一些使用（有界）通配符泛型的 Java 代码转换为 C#。我的问题是，Java 似乎允许泛型类型在与通配符一起使用时既是协变的又是逆变的。

[这是处理更简单的有界通配符情况的前一个[问题](https://stackoverflow.com/q/14277441/11545)的衍生产品]

**Java** - 作品：

```
class Impl { }

interface IGeneric1<T extends Impl> {
    void method1(IGeneric2<?> val);
    T method1WithParam(T val);
}

interface IGeneric2<T extends Impl> {
    void method2(IGeneric1<?> val);
}

abstract class Generic2<T extends Impl> implements IGeneric2<T> {

    // !! field using wildcard 
    protected IGeneric1<?> elem;

    public void method2(IGeneric1<?> val1) {
        val1.method1(this);

        //assignment from wildcard to wildcard
        elem = val1;
    }
}

abstract class Generic<T extends Impl> implements IGeneric1<T>, IGeneric2<T> {

    public void method1(IGeneric2<?> val2) {
        val2.method2(this);
    }
} 
```

**C#** - 不编译...

```
class Impl { }

interface IGeneric1<T> where T:Impl {
  //in Java:
  //void method1(IGeneric2<?> val);
    void method1<U>(IGeneric2<U> val) where U : Impl; //see this Q for 'why'
                                 // https://stackoverflow.com/a/14277742/11545

    T method1WithParam(T to);
}

interface IGeneric2<T>where T:Impl {
    void method2<U>(IGeneric1<U> val) where U : Impl;
}

abstract class Generic2<T, TU>: IGeneric2<T> //added new type TU
    where T : Impl
    where TU : Impl
{
  //in Java:
  //protected IGeneric1<?> elem;
    protected IGeneric1<TU> elem;

  //in Java:
  //public void method2(IGeneric1<?> val1) 
    public void method2<U>(IGeneric1<U> val) 
        where U : TU //using TU as constraint
    {
        elem = val;  //Cannot convert source type 'IGeneric1<U>' 
                     //to target type 'IGeneric1<TU>'
    }
    public abstract void method1WithParam(T to);
}

abstract class Generic<T> : IGeneric1<T>, IGeneric2<T> where T : Impl
{
  //in Java:
  //public void method1(IGeneric2<?> val2) 
    public void method1<U>(IGeneric2<U> val2) where U : Impl
    {
         val2.method2(this);
    }

    public abstract T method1WithParam(T to);
    public abstract void method2<U>(IGeneric1<U> val) where U : Impl;
    public abstract void nonGenericMethod();
} 
```

如果我更改`interface IGeneric1<T>`为`interface IGeneric1<out T>` 上述错误消失，但`method1WithParam(T)`抱怨方差：

```
Parameter must be input-safe. Invalid variance: The type parameter 'T' must be
contravariantly valid on 'IGeneric1<out T>'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T13:28:41.643

让我首先说，这肯定开始看起来像一个设计审查是有序的。原始的 Java 类聚合了一个`IGeneric1<?>`成员，但在不知道其类型参数的情况下，不可能以`method1WithParam`类型安全的方式调用它。

这意味着`elem`只能用于调用其`method1`成员，其签名不依赖于 的类型参数`IGeneric1`。因此`method1`可以分解为非通用接口：

```
// C# code:
interface INotGeneric1 {
    void method1<T>(IGeneric2<T> val) where T : Impl;
}

interface IGeneric1<T> : INotGeneric1 where T : Impl {
    T method1WithParam(T to);
} 
```

在此之后，可以改为`class Generic2`聚合一个成员：`INotGeneric1`

```
abstract class Generic2<T>: IGeneric2<T> where T : Impl
{
    protected INotGeneric1 elem;

    // It's highly likely that you would want to change the type of val
    // to INotGeneric1 as well, there's no obvious reason to require an
    // IGeneric1<U>
    public void method2<U>(IGeneric1<U> val) where U : Impl
    {
        elem = val; // this is now OK
    }
} 
```

当然，现在你不能调用`elem.method1WithParam`，除非你求助于强制转换或反射，即使已知这样的方法存在并且它是通用的，带有一些未知类型`X`作为类型参数。但是，这与 Java 代码的限制相同；只是 C# 编译器不会接受此代码，而 Java 只会在您尝试调用`method1WithParam1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T12:34:12.797

Java 不允许类型既是变体又是协变的。你所拥有的是一种错觉，因为当你`IGeneric1<?> elem`在类中声明时`Generic2`，你没有使用它的方法`T method1WithParam(T val);`；因此 Java 认为这个声明没有任何问题。但是，一旦您尝试通过`elem`.

为了说明这一点，下面将一个函数添加`test()`到`Generic2`类中，该函数将尝试调用该`elem.method1WithParam()`函数，但这会导致编译器错误。攻击行已被注释掉，所以需要重新安装才能重现错误：

```
abstract class Generic2<T extends Impl> implements IGeneric2<T> {

    // !! field using wildcard 
    protected IGeneric1<?> elem;

    public void method2(IGeneric1<?> val1) {
        val1.method1(this);

        //assignment from wildcard to wildcard
        elem = val1;
    }

    public void test() {
        Impl i = new Impl();

                // The following line will generate a compiler error:
        // Impl i2 = elem.method1WithParam(i); // Error!
    }
} 
```

Java 编译器的这个错误证明我们不能将泛型类型同时用作协变和逆变。即使某些声明似乎证明相反。使用 C# 编译器，在出现编译错误之前，您甚至没有机会接近：如果您尝试将接口声明`IGeneric1<T extends Impl>`为变体`IGeneric1<out T extends Impl>`; 你会自动得到一个编译错误`T method1WithoutParam();`

其次，我查看了[Java 通配符泛型 <?> 的参考 .NET 等价物与协变和反变？](https://stackoverflow.com/questions/14277441/net-equivalent-for-java-wildcard-generics-with-co-and-contra-variance)但我必须承认，我不明白为什么这可以被视为一种解决方案。类型限制，例如`<T extends Impl>`与无界通配符参数化类型 ( `<?>`) 或方差 ( `<? extends Impl>`) 无关，我不明白如何将秒替换为第一个可以被视为通用解决方案。但是，在某些情况下，如果您确实不需要使用通配符参数化类型 ( `<?>`) 或变体类型而不是 yes，则可以进行此转换。但是，如果您没有真正在 Java 代码中使用它们，那么也应该更正这一点。

使用 Java 泛型，您可能会引入很多不精确性，但使用 C# 编译器不会有这种机会。考虑到在 C# 中，类和结构是完全可具体化的，因此不支持方差（协变和逆变），这一点尤其正确。您只能将其用于接口的声明和委托；如果我没记错的话。

最后，当涉及到多态性时，通常会倾向于使用不必要的泛型类型；有或没有通配符参数化类型和方差。这通常会导致代码冗长而复杂；难以阅读和使用，甚至更难编写。我强烈建议您查看所有这些 Java 代码，看看是否真的有必要拥有所有这些东西，而不是只有多态性或多态性与泛型但没有方差或通配符参数化类型的组合的更简单的代码。

# json - 如何在 TextMate、Emacs、BBEdit 或 Sublime Text 2 中缩进 JSON 数据？

> ID：14289522
> 
> 赞同：11
> 
> 时间：2013-01-12T02:17:24.453
> 
> 标签：json, emacs, textmate, sublimetext2, bbedit

[**更新：**发布此问题 8 小时后，[JSON 包](https://github.com/textmate/json.tmbundle)的作者收到了该问题的通知并修复了它。]

我在一个文件中有以下 JSON 数据`application.json`，显示在这篇文章的末尾，并且我使用了带有[JSON 包](https://github.com/textmate/json.tmbundle)、Emacs、BBEdit 和 Sublime Text 2 的 TextMate 来正确缩进它，但似乎它们都不能。

TextMate 和 Sublime Text 2 都坚持第一个`{`不应该缩进，第一个主要问题是`"child": {`. `}`TextMate 和 Sublime Text 2都拒绝对齐`"child": {`. Emacs 不断为每一行进一步缩进，而 BBEdit 似乎根本没有重新缩进功能（可能是这样吗？）。

有没有办法正确缩进文件，或者 TextMate 和 Sublime Text 2 是否都为 JSON 数据做正确的事情？

```
[ 
{
    "settings": [ "master" ],
    "appPort": "8666",
    "specs": {
        "frame" : {
            "type" : "HTMLFrameMojit",

            "config": {
                "deploy": true,
                "child": {
                    "type" : "HelloWorldMojit"
                    },
                    "assets": {
                        "top": {
                            "css": [
                            "/static/HelloWorldMojit/assets/index.css"
                            ]
                        }
                    }
                }
            }
        }
        },
        {
            "settings": [ "environment:development" ],
            "staticHandling": {
                "forceUpdate": true
            }
        }
        ] 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-10-17T14:26:11.840

我[找到](https://blog.scottlowe.org/2013/11/11/making-json-output-more-readable-with-bbedit/)了一个简单且运行良好的 BBEdit 解决方案。

将以下脚本放入
`~/Library/Containers/BBEdit/Data/Library/Application Support/BBEdit/Text Filters/FormatJSON.sh`（在 MacOS 11 Big Sur 或更高版本上）

对于 MacOS 10.15 Catalina 及更低版本，请使用以下位置：`~/Library/Application Support/BBEdit/Text Filters/FormatJSON.sh`

```
#!/bin/bash
python -m json.tool 
```

1.  在 BBEdit 中打开一个 JSON 文件。无需重新启动 BBEdit，因为 BBEdit 非常棒！
2.  选择**文本 > 应用文本过滤器 > FormatJSON**

我用一个单行包含 3,612,683 个字符的 JSON 文件对此进行了测试。BBEdit 打开此文件并重新格式化，但未显示“Spinning Beachball of Death”忙等待鼠标光标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T10:48:19.690

我刚刚在捆绑包中更正了这个问题，对于 2.0 用户，捆绑包应该在 24 小时内更新并进行更正。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-08T08:23:57.263

解决方案 1：使用`Python`

这个答案类似于[这个](https://stackoverflow.com/a/19429447/2987755)答案，除了我`python file`用来做 JSON 格式。

1.  退出`bbedit`应用程序，如果它是打开的，
2.  将以下脚本[pretty-json.py](https://github.com/dineshbhagat/mac-configurations/blob/master/bbedit/pretty-json.py)放在 `~/Library/Application\ Support/BBEdit/Text\ Filters/`路径中

```
#!/usr/bin/env python
# You can change above she-bang line depending on your Mac configuration

import sys
import json

def main():
    input = sys.stdin.read()
    try:
        obj = json.loads(input)
    except Exception as e:
        print input + "\n\nERROR: " + str(e)
        return 1
    print(json.dumps(obj, indent=2))
    return 0

if __name__ == '__main__':
    sys.exit(main()) 
```

3.  要进行测试，请在 BBEdit 中打开一个 JSON 文件。

4.  选择`Text`--> `Apply Text Filter`-->`pretty-json.py`

5.  如果您遇到格式错误等任何问题，则上述脚本将在新文件中添加错误，并且不会更改原始 JSON。[这个](https://stackoverflow.com/a/19429447/2987755)答案
    不是这样

参考：[https ://gist.github.com/brokaw/95ade1358954cd97d0f2c8e992e14b08](https://gist.github.com/brokaw/95ade1358954cd97d0f2c8e992e14b08)

欲了解更多信息：请参阅[此](https://github.com/dineshbhagat/mac-configurations/tree/master/bbedit)

上面的过滤器适用于较小的 JSON 文件，但如果 JSON 文件很大（~ 40MB），那么格式化会很慢。

要解决此问题，请使用以下解决方案

解决方案 2：使用`jq`

为了更快的 json 格式化，

1.  安装[jq](https://stedolan.github.io/jq/download/) `brew install jq`
2.  `fast-json-pretty.sh`在与上述文件位置相同的位置添加文件
3.  重启bbedit。

```
#!/bin/bash
 jq 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-12T03:39:45.210

根据[http://jsonprettyprint.com/](http://jsonprettyprint.com/) Textmate 和 Sublime 没有做正确的事情。

你用的是什么版本的 Emacs？

在 24.2.1 中，您的 JSON blob 完美缩进，没有问题`js-mode`（Emac 的默认 javascript 主要模式）。

* * *

如果您进行任何重要的 Javascript 开发，我建议您检查 js2-mode [https://github.com/mooz/js2-mode](https://github.com/mooz/js2-mode)，它将 Emacs 变成一个很棒的 JS IDE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-22T07:23:10.030

## 崇高漂亮的 JSON

[Sublime Pretty JSON](https://github.com/dzhibas/SublimePrettyJson)缩进第`{`一口井。这就是我得到的：

```
[
  {
    "settings": [
      "master"
    ],
    "appPort": "8666",
    "specs": {
      "frame": {
        "type": "HTMLFrameMojit",
        "config": {
          "deploy": true,
          "child": {
            "type": "HelloWorldMojit"
          },
          "assets": {
            "top": {
              "css": [
                "/static/HelloWorldMojit/assets/index.css"
              ]
            }
          }
        }
      }
    }
  },
  {
    "settings": [
      "environment:development"
    ],
    "staticHandling": {
      "forceUpdate": true
    }
  }
] 
```

* * *

**安装**

在 Sublime Text 2 中：首选项 => 包控制 => 安装包 => “Pretty Json” => 重新启动 Sublime => 选择 JSON 文本 => 按：

*   Linux: ctrl+alt+j
*   窗口：ctrl+alt+j
*   OS X：cmd+ctrl+j

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-27T11:43:13.743

这是一个简单地使用 Google Chrome 或 NodeJS 本身的解决方案，方法如下：

只需打开 Google Chrome 开发工具或 NodeJS 提示符，然后输入

```
obj = 
```

并将对象复制并粘贴到其中，所以它就像

```
obj = [
      { 
        // etc 
```

现在，在谷歌浏览器中，只需输入

```
JSON.stringify(obj, null, 4) 
```

你将拥有格式化的 JSON。在 NodeJS 中，由于它会逐字打印`\n`，因此您可以使用

```
console.log(JSON.stringify(obj, null, 4)) 
```

如果您希望缩进只有 2 个空格，只需使用`2`而不是`4`.

如果您希望缩进是制表符而不是空格，只需使用

```
JSON.stringify(obj, null, "\t") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-30T07:05:54.977

1.  `fast-json-pretty.sh`在中创建一个脚本文件`~/Library/Application\ Support/BBEdit/Text\ Filters/`
2.  插入以下脚本：

```
#!/usr/bin/env bash
/usr/local/bin/jq . 
```

3.  按如下方式应用文本过滤器：`Menu bar`--> `Text`--> `Apply Text Filter`-->`fast-json-pretty`

这是 DKB 的 JQ 脚本版本的重新设计版本，因为至少对我而言，它需要完整路径和末尾的点 (.) 才能完成这项工作。

# iphone - 使用RMPhoneFormat在objective-c中使用国际代码验证电话号码

> ID：14289528
> 
> 赞同：1
> 
> 时间：2013-01-12T02:18:15.903
> 
> 标签：iphone, ios, objective-c

我正在尝试使用 rmaddy 开发的 RMPhoneFormat 类使用国际代码验证电话号码。它适用于美国号码，例如：

```
RMPhoneFormat *fmt = [[RMPhoneFormat alloc] initWithDefaultCountry:@"us"];
BOOL valid = [fmt isPhoneNumberValid:@"+19998887766"]; 
```

但是，对于瑞士号码（使用国际代码时去掉前导零，即 0779998877 变为 +41779998877）确实有效。以下代码表示该数字无效，即使它不是。

```
RMPhoneFormat *fmt = [[RMPhoneFormat alloc] initWithDefaultCountry:@"ch"];
BOOL valid = [fmt isPhoneNumberValid:@"+41779998877"]; 
```

请注意，如果没有国际代码和前导零，则可以正确验证：

```
RMPhoneFormat *fmt = [[RMPhoneFormat alloc] initWithDefaultCountry:@"ch"];
BOOL valid = [fmt isPhoneNumberValid:@"0779998877"]; 
```

有人知道如何使用这个类来验证国际代码的电话号码吗？

先感谢您！

# angularjs - Angular：推送，然后删除一个项目

> ID：14289530
> 
> 赞同：3
> 
> 时间：2013-01-12T02:18:59.393
> 
> 标签：angularjs

用例：用户创建一个新任务，该任务必须通过 API 向上游发送。当该 API 返回成功时，我将其添加到显示范围。我可以正常工作：

```
$http.post('some_url', newtask).success(function(data) {
  $scope.tasks.push(data);
}); 
```

（newtask 是前面定义的一个简单对象，这里没有展示）。

问题是，API 很慢（虽然可靠），而我希望它感觉像一个实时应用程序。所以我想立即将新任务推送到 $scope，然后在 API 返回成功时将其替换为“真实”任务。所以我在上面加上：

```
$scope.tasks.push(newtask); // Add to UI immediately (provisionally) 
```

现在发生的是立即添加新任务，然后在 API 返回时添加任务的*第二个*副本。所以我想做的是在添加第二个副本后立即*删除第一个副本。*

我似乎无法找到一种方法来做到这一点。还是我的方法全错了？（我承认，这种方法确实有点像 hack，所以我愿意接受建议）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:42:19.757

在成功回调函数中，我建议您将新任务（从 API 返回）与任务数组中的最后一个任务进行比较。如果它们匹配，您无需执行任何操作。（如果它们不匹配，您需要删除最后一项并抛出某种错误指示。）

```
$http.post('some_url', newtask).success(function(data) {
   if($scope.tasks[$scope.tasks.length-1] === data) {
      // do nothing, we already added it before
   } else {
     ... error handling here
   }
}); 
```

如果用户一次不能添加多个任务（在 API 返回之前），并且您确实想删除然后添加，只需对数组使用正常的 JavaScript 操作删除最后一项，然后添加 API 值：

```
$http.post('some_url', newtask).success(function(data) {
    $scope.tasks.pop();
    $scope.tasks.push(data);
}); 
```

Angular 应该会注意到模型的变化并自动为您更新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T08:43:53.073

```
//Push the new task immediately
$scope.tasks.push(newtask);

//When API return check for error if error just pop out the added task
$http.post('some_url', newtask).success(function(data) {
    if($scope.tasks[$scope.tasks.length-1] !== data) {
        $scope.tasks.pop();
    } 
}); 
```

# c++ - 重载多个运算符时出现“不匹配”错误

> ID：14289539
> 
> 赞同：0
> 
> 时间：2013-01-12T02:20:13.280
> 
> 标签：c++, templates, linked-list, overloading

我试图重载“+”运算符和“=”运算符，如下所示：

```
template<class T>
class LinkedList {     
 public:
  LinkedList();
  LinkedList(const LinkedList<T> &list);        //Copy Constructor! Allocating new memory!
  ~LinkedList();
  void PushNode(T new_data);
  void Delete(LinkedNode<T> *pnode);
  bool CopyDelete(LinkedNode<T> *pnode);
  bool CopyDeleteMiddle(); 
  void Show();
  int get_length();
  void Clear();
  LinkedList<T> operator+(LinkedList<T> &list);  //Overloading '+' operator
  LinkedList<T> &operator=(LinkedList<T> &list); //Overloading '=' operator
  LinkedNode<T> *head;
  LinkedNode<T> *tail;

 private:
  int length;
};

template <class T>
LinkedList<T>& LinkedList<T>::operator=(LinkedList<T> &list)
{
  if (&list != this) {
    Clear();
    LinkedNode<T> *pnode = list.head;
    while(pnode)
    {
      PushNode(pnode->data);
      pnode = pnode->next;
    }
  }
  return *this;
}

template <class T>
LinkedList<T> LinkedList<T>::operator+(LinkedList<T> &list)
{
  int carry = 0;
  LinkedList<T> sum_list;
  LinkedNode<T> *pnode = list.head;
  LinkedNode<T> *pnode_this = head;
  if (!pnode || !pnode_this)
    throw("Invalid list!");

  T digit, digit_this, digit_sum;
  while(pnode || pnode_this)
  {
    if (!pnode) {
      digit = 0;
      digit_this = pnode_this->data;
      pnode_this = pnode_this->next;
    } else if (!pnode_this) {
      digit = pnode->data;
      digit_this = 0;
      pnode = pnode->next;
    } else {
      digit = pnode->data;
      digit_this = pnode_this->data;
      pnode = pnode->next;
      pnode_this = pnode_this->next;
    }
    digit_sum = digit + digit_this + carry;
    if (digit_sum >=10) {
      digit_sum-=10;
      carry = 1;
    } else {
      carry = 0;
    }
    sum_list.PushNode(digit_sum);

  }
  return sum_list;
} 
```

在我的主要功能中，我创建了三个这样的对象：

```
LinkedList<int> list1;
LinkedList<int> list2;
LinkedList<int> sum; 
```

然后我添加了两个列表并将结果存储在 sum 中：

```
sum = list1+list2; //error occurred here! 
```

我关于 LinkedList 类的所有声明和定义都在 MySinglyLinkedList.h 中，我的主要功能在 2_4.cc 中。

我在Linux(Ubuntu)中使用GCC 4.5.2编译2_4.cc，遇到如下错误：

> 2_4.cc：在函数“<code>int main(int, char**)”中：
> 
> 2_4.cc:39:15: 错误: '<code>sum = LinkedList<T>::operator+(LinkedList<T>&) [with T = int](((链表<int>&)(& list2)))'</p>
> 
> MySinglyLinkedList.h:171:16：注意：候选人是：`LinkedList<T>& LinkedList<T>::operator=(LinkedList<T>&) [with T = int]`

我的重载函数有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:48:35.210

参考参数：

```
LinkedList<T>& LinkedList<T>::operator=(LinkedList<T> &list)
LinkedList<T> LinkedList<T>::operator+(LinkedList<T> &list) 
```

应更改为 const-ref：

```
LinkedList<T>::operator=(const LinkedList<T> &list)
LinkedList<T> LinkedList<T>::operator+(const LinkedList<T> &list) 
```

至于通过值传递并使用[复制交换习惯用法](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)`operator=`会更好：

```
LinkedList<T>::swap(LinkedList<T> & rhs) {
    using std::swap;
    swap(head, rhs.head);
    swap(tail, rhs.tail;
}

LinkedList<T>& LinkedList<T>::operator=(LinkedList<T> list) {
    this->swap(list);
    return *this;
} 
```

注意：这需要正确实现复制构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:33:07.993

参数 tot operator= 应该是一个 const 引用。临时（operator+ 的结果）不能绑定到非常量引用。

# xml - 需要帮助来使用 XSLT 进行 XML 到 XML 的转换

> ID：14289542
> 
> 赞同：-1
> 
> 时间：2013-01-12T02:20:54.403
> 
> 标签：xml, xslt

我正在尝试使用 xslt 来读取输入 xml 的内容并生成输出 xml 。我能够使用 xslt 生成输出 xml，但无法将数据从输入 xml 复制到生成的输出 xml。现在我已经直接硬编码了 xsl 文件中的值。

下面是输入 xml 和预期的输出 xml 以及 XSL 。

需要帮助修改 xsl 以从输入 xml 中读取元素和属性数据，并将它们放入生成的输出 xml 的对应元素/属性中

输入xml

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
<ns0:Envelope xmlns:ns0="urn:test.com:xi:testsoap2soap">
<Header>
  <m_Header mustUnderstand="0">
     <m_SessionID>SessionID1</m_SessionID>
  </m_Header>
</Header>
<Body>
  <Generate>
     <iPolicyID>473441</iPolicyID>
     <sNoticeTypeID>C</sNoticeTypeID>
     <iAdvDays>0</iAdvDays>
     <PolicyQuestions arrayType="npts:wspPolicyQuestion[0]" nil="true" offset="[0]" type="SOAP-ENC:Array">
        <wspPolicyQuestion>
           <iQuestionID/>
           <mQuestion/>
           <sStateID/>
           <mAnswer/>
           <BasePolicyType/>
           <SysPolicyType/>
        </wspPolicyQuestion>
     </PolicyQuestions>
     <sReasonID>myReason</sReasonID>
     <mReasonText>myreasontext</mReasonText>
     <Agencies arrayType="npts:wspAgency[0]" nil="true" offset="[0]" type="SOAP-ENC:Array">
        <wspAgency>
           <iAgencyID/>
           <Address/>
           <sName1/>
           <sAgen800/>
           <sAgencyRefNbr/>
        </wspAgency>
     </Agencies>
     <iUnderwriterID>0</iUnderwriterID>
     <iFaxID>7284</iFaxID>
     <PopupQuestions arrayType="npts:wspPopupQuestion[0]" nil="true" offset="[0]" type="SOAP-ENC:Array">
        <wspPopupQuestion>
           <iPopUpID/>
           <mText/>
           <cVarType/>
           <sVarLen/>
           <sReasonID/>
           <mAnswer/>
           <ISNID/>
           <BasePolicyType/>
        </wspPopupQuestion>
     </PopupQuestions>
     <ExtraNotices arrayType="npts:wspExtraNotice[0]" nil="true" offset="[0]" type="SOAP-ENC:Array">
        <wspExtraNotice>
           <iExtraNoticeID/>
           <iAddressID/>
           <sName1/>
           <sName2/>
           <mText/>
        </wspExtraNotice>
     </ExtraNotices>
     <dtMail>2013-01-08</dtMail>
     <iMailLeadDays>0</iMailLeadDays>
     <dtEffective>2013-01-25</dtEffective>
     <iMailingTypeID>77</iMailingTypeID>
     <bDateAutoCalc>false</bDateAutoCalc>
     <sAsOfPhrase/>
     <sFreeformTitle/>
     <mFreeformText/>
     <FreeformReceipients>0</FreeformReceipients>
     <RemittanceSlip arrayType="npts:wspRemittanceSlip[5]" nil="true" offset="[0]" type="SOAP-ENC:Array">
        <wspRemittanceSlip>
           <FieldName>DocType</FieldName>
           <FieldValue>7</FieldValue>
        </wspRemittanceSlip>
        <wspRemittanceSlip>
           <FieldName>ScanLine</FieldName>
           <FieldValue>027 0018949170X013091774 01012013 7 00000002559600 1</FieldValue>
        </wspRemittanceSlip>
        <wspRemittanceSlip>
           <FieldName>BPNumber</FieldName>
           <FieldValue>1009738961</FieldValue>
        </wspRemittanceSlip>
        <wspRemittanceSlip>
           <FieldName>RefNumber</FieldName>
           <FieldValue>00018949170X01309177</FieldValue>
        </wspRemittanceSlip>
        <wspRemittanceSlip>
           <FieldName>CouponName</FieldName>
           <FieldValue>ABC Company</FieldValue>
        </wspRemittanceSlip>
     </RemittanceSlip>
     <sRemittanceSlipLayout>remit_slip_bpr.txt</sRemittanceSlipLayout>
     <sRemittanceSlipTemplate>remit_slip_bpr.pdf</sRemittanceSlipTemplate>
     <PrintAction>32</PrintAction>
     <CopyOptions>0</CopyOptions>
     <CCListOptions>0</CCListOptions>
  </Generate>
 </Body>
 </ns0:Envelope>
 </soapenv:Body>
 </soapenv:Envelope> 
```

输出xml

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header>
    <npts:m_Header xmlns:npts="urn:TestService" SOAP-ENV:mustUnderstand="0">
        <m_SessionID>SESSIONID1</m_SessionID>
    </npts:m_Header>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
    <npts:Generate xmlns:npts="urn:TestService">
        <iPolicyID>473441</iPolicyID>
        <sNoticeTypeID>C</sNoticeTypeID>
        <iAdvDays>0</iAdvDays>
        <npts:PolicyQuestions xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-SCH="http://www.w3.org/2001/XMLSchema-instance" SOAP-ENC:arrayType="npts:wspPolicyQuestion[0]" SOAP-SCH:nil="true" SOAP-ENC:offset="[0]" SOAP-SCH:type="SOAP-ENC:Array"/>
        <sReasonID>myreason</sReasonID>
        <mReasonText>myreasontext</mReasonText>
        <npts:Agencies xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-SCH="http://www.w3.org/2001/XMLSchema-instance" SOAP-ENC:arrayType="npts:wspAgency[0]" SOAP-SCH:nil="true" SOAP-ENC:offset="[0]" SOAP-SCH:type="SOAP-ENC:Array"/>
        <iUnderwriterID>0</iUnderwriterID>
        <iFaxID>728477</iFaxID>
        <npts:PopupQuestions xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-SCH="http://www.w3.org/2001/XMLSchema-instance" SOAP-ENC:arrayType="npts:wspPopupQuestion[0]" SOAP-SCH:nil="true" SOAP-ENC:offset="[0]" SOAP-SCH:type="SOAP-ENC:Array"/>
        <npts:ExtraNotices xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-SCH="http://www.w3.org/2001/XMLSchema-instance" SOAP-ENC:arrayType="npts:wspExtraNotice[0]" SOAP-SCH:nil="true" SOAP-ENC:offset="[0]" SOAP-SCH:type="SOAP-ENC:Array"/>
        <dtMail>2013-01-08</dtMail>
        <iMailLeadDays>0</iMailLeadDays>
        <dtEffective>2013-01-25</dtEffective>
        <iMailingTypeID>77</iMailingTypeID>
        <bDateAutoCalc>false</bDateAutoCalc>
        <sAsOfPhrase/>
        <sFreeformTitle/>
        <mFreeformText/>
        <FreeformReceipients>0</FreeformReceipients>
        <npts:RemittanceSlip xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-SCH="http://www.w3.org/2001/XMLSchema-instance" SOAP-ENC:arrayType="npts:wspRemittanceSlip[5]" SOAP-ENC:offset="[0]" SOAP-SCH:type="SOAP-ENC:Array">
            <wspRemittanceSlip>
                <FieldName>DocType</FieldName>
                <FieldValue>7</FieldValue>
            </wspRemittanceSlip>
            <wspRemittanceSlip>
                <FieldName>ScanLine</FieldName>
                <FieldValue>027 0018949170X013091774 01012013 7 00000002559600 1</FieldValue>
            </wspRemittanceSlip>
            <wspRemittanceSlip>
                <FieldName>BPNumber</FieldName>
                <FieldValue>1009738961</FieldValue>
            </wspRemittanceSlip>
            <wspRemittanceSlip>
                <FieldName>RefNumber</FieldName>
                <FieldValue>00018949170X01309177</FieldValue>
            </wspRemittanceSlip>
            <wspRemittanceSlip>
                <FieldName>CouponName</FieldName>
                <FieldValue>ABC Company</FieldValue>
            </wspRemittanceSlip>
        </npts:RemittanceSlip>
        <sRemittanceSlipLayout>remit_slip_bpr.txt</sRemittanceSlipLayout>
        <sRemittanceSlipTemplate>remit_slip_bpr.pdf</sRemittanceSlipTemplate>
        <PrintAction>32</PrintAction>
        <CopyOptions>0</CopyOptions>
        <CCListOptions>0</CCListOptions>
    </npts:Generate>
</SOAP-ENV:Body>
 </SOAP-ENV:Envelope> 
```

xsl 用于获取输出 xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                           xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                           xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope"
                           xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
                           xmlns:npts="urn:TestService"
                           xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
                           xmlns:SOAP-SCH="http://www.w3.org/2001/XMLSchema-instance"
                           xmlns:ns0="urn:test.com:xi:testsoap2soap">
   <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
   <xsl:template match="/">
<xsl:element name="SOAP-ENV:Envelope">
<xsl:element name="SOAP-ENV:Header">
<xsl:element name="npts:m_Header">
<xsl:attribute name="SOAP-ENV:mustUnderstand"><xsl:value-of select="m_Header/@mustUnderstand"/></xsl:attribute>
<xsl:element name="m_SessionID">SESSIONID1</xsl:element>
</xsl:element>
</xsl:element>
<xsl:element name="SOAP-ENV:Body">
<xsl:element name="npts:Generate">
<xsl:element name="iPolicyID">473441</xsl:element>
<xsl:element name="sNoticeTypeID">C</xsl:element>
<xsl:element name="iAdvDays">0</xsl:element>
<xsl:element name="npts:PolicyQuestions">
<xsl:attribute name="SOAP-ENC:arrayType">npts:wspPolicyQuestion[0]</xsl:attribute>
<xsl:attribute name="SOAP-SCH:nil">true</xsl:attribute>
<xsl:attribute name="SOAP-ENC:offset">[0]</xsl:attribute>
<xsl:attribute name="SOAP-SCH:type">SOAP-ENC:Array</xsl:attribute>
</xsl:element>
<xsl:element name="sReasonID">myreason</xsl:element>
<xsl:element name="mReasonText">myreasontext</xsl:element>
<xsl:element name="npts:Agencies">
<xsl:attribute name="SOAP-ENC:arrayType">npts:wspAgency[0]</xsl:attribute>
<xsl:attribute name="SOAP-SCH:nil">true</xsl:attribute>
<xsl:attribute name="SOAP-ENC:offset">[0]</xsl:attribute>
<xsl:attribute name="SOAP-SCH:type">SOAP-ENC:Array</xsl:attribute>
</xsl:element>
<xsl:element name="iUnderwriterID">0</xsl:element>
<xsl:element name="iFaxID">728477</xsl:element>
<xsl:element name="npts:PopupQuestions">
<xsl:attribute name="SOAP-ENC:arrayType">npts:wspPopupQuestion[0]</xsl:attribute>
<xsl:attribute name="SOAP-SCH:nil">true</xsl:attribute>
<xsl:attribute name="SOAP-ENC:offset">[0]</xsl:attribute>
<xsl:attribute name="SOAP-SCH:type">SOAP-ENC:Array</xsl:attribute>
</xsl:element>
<xsl:element name="npts:ExtraNotices">
<xsl:attribute name="SOAP-ENC:arrayType">npts:wspExtraNotice[0]</xsl:attribute>
<xsl:attribute name="SOAP-SCH:nil">true</xsl:attribute>
<xsl:attribute name="SOAP-ENC:offset">[0]</xsl:attribute>
<xsl:attribute name="SOAP-SCH:type">SOAP-ENC:Array</xsl:attribute>
</xsl:element>
<xsl:element name="dtMail">2013-01-08</xsl:element>
<xsl:element name="iMailLeadDays">0</xsl:element>
<xsl:element name="dtEffective">2013-01-25</xsl:element>
<xsl:element name="iMailingTypeID">77</xsl:element>
<xsl:element name="bDateAutoCalc">false</xsl:element>
<xsl:element name="sAsOfPhrase"></xsl:element>
<xsl:element name="sFreeformTitle"></xsl:element>
<xsl:element name="mFreeformText"></xsl:element>
<xsl:element name="FreeformReceipients">0</xsl:element>
<xsl:element name="npts:RemittanceSlip">
<xsl:attribute name="SOAP-ENC:arrayType">npts:wspRemittanceSlip[5]</xsl:attribute>
<xsl:attribute name="SOAP-ENC:offset">[0]</xsl:attribute>
<xsl:attribute name="SOAP-SCH:type">SOAP-ENC:Array</xsl:attribute>
<xsl:element name="wspRemittanceSlip">
<xsl:element name="FieldName">DocType</xsl:element>
<xsl:element name="FieldValue">7</xsl:element>
</xsl:element>
<xsl:element name="wspRemittanceSlip">
<xsl:element name="FieldName">ScanLine</xsl:element>
<xsl:element name="FieldValue">027 0018949170X013091774 01012013 7 00000002559600 1</xsl:element>
</xsl:element>
<xsl:element name="wspRemittanceSlip">
<xsl:element name="FieldName">BPNumber</xsl:element>
<xsl:element name="FieldValue">1009738961</xsl:element>
</xsl:element> 
<xsl:element name="wspRemittanceSlip">
<xsl:element name="FieldName">RefNumber</xsl:element>
<xsl:element name="FieldValue">00018949170X01309177</xsl:element>
</xsl:element>
<xsl:element name="wspRemittanceSlip">
<xsl:element name="FieldName">CouponName</xsl:element>
<xsl:element name="FieldValue">ABC Company</xsl:element>
</xsl:element>
</xsl:element>
<xsl:element name="sRemittanceSlipLayout">remit_slip_bpr.txt</xsl:element>
<xsl:element name="sRemittanceSlipTemplate">remit_slip_bpr.pdf</xsl:element>
<xsl:element name="PrintAction">32</xsl:element>
<xsl:element name="CopyOptions">0</xsl:element>
<xsl:element name="CCListOptions">0</xsl:element>
 </xsl:element>
</xsl:element>
</xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:30:23.347

不要使用一个匹配“/”的模板并手动创建输出，而是使用[身份转换](http://www.w3.org/TR/xslt#copying)，然后只覆盖您需要的内容。

此外，为了将来参考，您不需要使用`xsl:element`/`xsl:attribute`除非您动态创建名称/前缀。大多数情况下，您可以将元素/属性直接写入样式表。

有太多的分析试图找出你的输入/输出之间的差异，所以这里有一个例子可以帮助你完成`npts:Generate`。以此为基础，您应该能够自己完成它。如果您在解决其余问题时遇到问题，请返回具体问题，我相信有人会提供帮助。

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" 
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:ns0="urn:test.com:xi:testsoap2soap"
    xmlns:npts="urn:TestService"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="soapenv:*">
        <xsl:element name="SOAP-ENV:{local-name()}">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="*[namespace-uri()='']">
        <xsl:element name="{name()}">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="soapenv:Envelope|soapenv:Body">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="ns0:Envelope">
        <xsl:element name="SOAP-ENV:{local-name()}">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="Header|Body" priority="1">
        <xsl:element name="SOAP-ENV:{local-name()}">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="m_Header|Generate" priority="1">
        <xsl:element name="npts:{local-name()}">
            <xsl:apply-templates select="@*|node()"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="m_Header/@mustUnderstand">
        <xsl:attribute name="SOAP-ENV:mustUnderstand">
            <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**（通过`ntps:Generate`）

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Header>
        <npts:m_Header xmlns:npts="urn:TestService" SOAP-ENV:mustUnderstand="0">
            <m_SessionID>SessionID1</m_SessionID>
        </npts:m_Header>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <npts:Generate xmlns:npts="urn:TestService">
            <!--Any decendants from this point 
            are unchanged.-->
            <iPolicyID>473441</iPolicyID>
            <sNoticeTypeID>C</sNoticeTypeID>
            <iAdvDays>0</iAdvDays>
            <PolicyQuestions arrayType="npts:wspPolicyQuestion[0]"
                nil="true"
                offset="[0]"
                type="SOAP-ENC:Array">
                <wspPolicyQuestion>
                    <iQuestionID/>
                    <mQuestion/>
                    <sStateID/>
                    <mAnswer/>
                    <BasePolicyType/>
                    <SysPolicyType/>
                </wspPolicyQuestion>
            </PolicyQuestions>
            <sReasonID>myReason</sReasonID>
            <mReasonText>myreasontext</mReasonText>
            <Agencies arrayType="npts:wspAgency[0]"
                nil="true"
                offset="[0]"
                type="SOAP-ENC:Array">
                <wspAgency>
                    <iAgencyID/>
                    <Address/>
                    <sName1/>
                    <sAgen800/>
                    <sAgencyRefNbr/>
                </wspAgency>
            </Agencies>
            <iUnderwriterID>0</iUnderwriterID>
            <iFaxID>7284</iFaxID>
            <PopupQuestions arrayType="npts:wspPopupQuestion[0]"
                nil="true"
                offset="[0]"
                type="SOAP-ENC:Array">
                <wspPopupQuestion>
                    <iPopUpID/>
                    <mText/>
                    <cVarType/>
                    <sVarLen/>
                    <sReasonID/>
                    <mAnswer/>
                    <ISNID/>
                    <BasePolicyType/>
                </wspPopupQuestion>
            </PopupQuestions>
            <ExtraNotices arrayType="npts:wspExtraNotice[0]"
                nil="true"
                offset="[0]"
                type="SOAP-ENC:Array">
                <wspExtraNotice>
                    <iExtraNoticeID/>
                    <iAddressID/>
                    <sName1/>
                    <sName2/>
                    <mText/>
                </wspExtraNotice>
            </ExtraNotices>
            <dtMail>2013-01-08</dtMail>
            <iMailLeadDays>0</iMailLeadDays>
            <dtEffective>2013-01-25</dtEffective>
            <iMailingTypeID>77</iMailingTypeID>
            <bDateAutoCalc>false</bDateAutoCalc>
            <sAsOfPhrase/>
            <sFreeformTitle/>
            <mFreeformText/>
            <FreeformReceipients>0</FreeformReceipients>
            <RemittanceSlip arrayType="npts:wspRemittanceSlip[5]"
                nil="true"
                offset="[0]"
                type="SOAP-ENC:Array">
                <wspRemittanceSlip>
                    <FieldName>DocType</FieldName>
                    <FieldValue>7</FieldValue>
                </wspRemittanceSlip>
                <wspRemittanceSlip>
                    <FieldName>ScanLine</FieldName>
                    <FieldValue>027 0018949170X013091774 01012013 7 00000002559600 1</FieldValue>
                </wspRemittanceSlip>
                <wspRemittanceSlip>
                    <FieldName>BPNumber</FieldName>
                    <FieldValue>1009738961</FieldValue>
                </wspRemittanceSlip>
                <wspRemittanceSlip>
                    <FieldName>RefNumber</FieldName>
                    <FieldValue>00018949170X01309177</FieldValue>
                </wspRemittanceSlip>
                <wspRemittanceSlip>
                    <FieldName>CouponName</FieldName>
                    <FieldValue>ABC Company</FieldValue>
                </wspRemittanceSlip>
            </RemittanceSlip>
            <sRemittanceSlipLayout>remit_slip_bpr.txt</sRemittanceSlipLayout>
            <sRemittanceSlipTemplate>remit_slip_bpr.pdf</sRemittanceSlipTemplate>
            <PrintAction>32</PrintAction>
            <CopyOptions>0</CopyOptions>
            <CCListOptions>0</CCListOptions>
        </npts:Generate>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

# php - 如何同时运行 2 个 PHP 脚本（非阻塞）来监控 popen 命令？

> ID：14289547
> 
> 赞同：3
> 
> 时间：2013-01-12T02:22:11.313
> 
> 标签：php, jquery, listener, popen, progress

**如何同时（同步）运行 2 个 PHP 脚本来监控 popen 命令？**

我有一个脚本启动这样的命令：

```
7za a -t7z -mx9 backup.7z "H:\Informatique\*" 
```

我想在使用 jQuery 和 PHP 的页面上显示压缩的进度。

运行此命令的 php 脚本如下所示：

```
 if( ($fp = popen("7za a -t7z ".$GLOBALS["backup_compression"]." \"".$backuplocation.$backupname."\" \"".$pathtobackup."\"", "r")) ) {
        while( !feof($fp) ){

            $fread = fread($fp, 256);
            $line_array = preg_split('/\n/',$fread);
            $num_lines = count($line_array);
            $_SESSION['job'][$jobid]['currentfile'] = $_SESSION['job'][$jobid]['currentfile']+$num_lines;
            $num_lines = 0;
            flush();
        }
        pclose($fp);
    } 
```

jQuery 调用 7za 脚本，然后 jquery每 1000 毫秒调用一次侦听器 ( *listener.php )。*listener.php 页面包含以下代码：

```
session_start();
$jobid = $_GET['jobid'];

if(!isset($_SESSION['job'][$jobid])) { $arr = array("error"=>"Job not found"); echo json_encode($arr); exit(); };
$arr = array(
    "curfile" => $_SESSION['job'][$jobid]['currentfile'],
    "totalfiles" => $_SESSION['job'][$jobid]['totalfiles'],
);
echo json_encode($arr);
$jobid = null;
$arr = null;
exit(); 
```

在 jquery 调用完成后（使用侦听器并且我们从服务器得到响应），我们会以正常的方式显示信息，例如：`$("currentfile").text(data['curfile']);`

问题是监听器处于无限循环中等待第一个脚本完成......这不是监听器的工作......它在一切结束时监听......当你倾听时，它是为了知道什么正在发生。:P

你知道发生了什么，我该如何解决这个问题？或者也许你可以帮助我解决这个问题的新方法？

与往常一样，欢迎提出任何建议。谢谢你。

**编辑**

jQuery脚本：

```
function backup_launch(jobid) {
    x('jobid: '+jobid+' on state '+state);

    x('Listener launched');
    listen(jobid);

    timeout = setTimeout("listen('"+jobid+"')", 500);
    $.ajax({
        url:'backup.manager.php?json&jobid='+jobid+'&state='+state, 
        dataType:'json', 
        success:function(data)
        {
            state = 3;
        }
    });
}
function listen(jobid) {

    $.ajax({
        url:'backup.listener.php?json&jobid='+jobid, 
        dataType:'json', 
        success:function(data)
        {
            var curfile = data['curfile'];
            var totalfiles = data['totalfiles'];
            var p = curfile * 100 / totalfiles;
            x('File '+curfile+' out of '+totalfiles+' progress%: '+p);
            timeout = setTimeout("listen('"+jobid+"')", 500);

        }
    });
} 
```

**编辑 2** 我找到了 Gearman (http://gearman.org/)，但我根本不知道如何实现它，它需要是可移植的/独立的......我会尝试对此进行调查。

**编辑 3**

*backup.manager.php*页面的完整代码。该脚本正在发送响应，但在后台执行该工作。

在返回任何结果之前，listen.php 页面仍在等待命令完成。

```
$jobid = isset($_GET['jobid']) ? $_GET['jobid'] : 0;

//Make sure jobid is specified
if($jobid == 0) { return; } 

header("Connection: close");
@ob_end_clean();
ignore_user_abort();
ob_start();

echo 'Launched in backgroud';

$size = ob_get_length();
header("Content-Length: ".$size);
ob_end_flush();
flush();

$_SESSION['job'][$jobid]['currentfile'] = 0;

// 3\. When app appove backup, 
//  - Write infos to DB
//  - Zip all files into 1 backup file
$datebackup = time();
$bckpstatus = 1; //In progress

$pathtobackup = $_SESSION['job'][$jobid]['path'];

/*
$query = "INSERT INTO backups (watchID, path, datebackup, checksum, sizeori, sizebackup, bckpcomplete)
        VALUES ($watchID, '{$path}', '{$datebackup}', '', '{$files_totalsize}', '', '{$bckpstatus}')"; 

$sth = $db->prepare($query);

$db->beginTransaction();
$sth->execute();
$db->commit();
$sth->closeCursor();
*/

$backupname = $jobid.".".$GLOBALS["backup_ext"];
$backuplocation = "D:\\";

if( ($fp = popen("7za a -t7z ".$GLOBALS["backup_compression"]." \"".$backuplocation.$backupname."\" \"".$pathtobackup."\"", "r")) ) {
    while( !feof($fp) ){

        $fread = fread($fp, 256);
        $line_array = preg_split('/\n/',$fread);
        $num_lines = count($line_array);
        $_SESSION['job'][$jobid]['currentfile'] = $_SESSION['job'][$jobid]['currentfile']+$num_lines;
        $num_lines = 0;
        sleep(1);
        flush();
    }
    pclose($fp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:44:05.860

杰里米，

几个月前，我回答了一个关于在 *NIX/PHP 环境中运行服务器端批处理作业的类似问题。如果我理解正确，您的要求会有所不同，但答案中可能会有一些帮助。

[从我的网站运行批处理文件](https://stackoverflow.com/questions/13617185/run-a-batch-file-from-my-website/13618558#13618558)

## 编辑

这是您的客户端代码的修改版本。您会看到我更改的主要内容是：

*   移动`listen(jobid);`到 backup_launch 的成功处理程序中。
*   添加错误处理程序，以便您可以观察错误。

其他一切都只是编程风格的问题。

```
function backup_launch(jobid) {
    x(['jobid: ' + jobid, 'on state', state].join(' '));
    $.ajax({
        url: 'backup.manager.php',
        data: {
            'json': 1,
            'jobid': jobid,
            'state': state
        }
        dataType: 'json',
        success:function(data) {
            state = 3;
            x("Job started: " + jobid);
            listen(jobid);
            x("Listener launched: " + jobid);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            x(["backup.manager error", textStatus, errorThrown, jobid].join(": "));
        }
    });
}
function listen(jobid) {
    $.ajax({
        url: 'backup.listener.php',
        data: {
            'json': 1
            'jobid': jobid
        },
        dataType: 'json', 
        success: function(data) {
            var curfile = data.curfile;
            var totalfiles = data.totalfiles;
            var p = curfile * 100 / totalfiles;
            x(['File', curfile, 'out of', totalfiles, 'progress%:', p].join(' '));
            timeout = setTimeout(function() {
                listen(jobid);
            }, 500);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            x(["Listener error", textStatus, errorThrown, jobid].join(": "));
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:52:18.720

我决定为每个单独的文件调用命令。

它会变慢，但管理文件原因错误以及哪些文件已正确插入存档会更安全。

我会尝试更快地找到一些东西，例如存档的目录有 10 000 个图标文件。也许一次 5 个文件，而不是一次一个文件。

此代码用于测试目的，代码根本**没有针对**生产进行优化。

index.html jquery 脚本：

```
var state = 0;
var jobid = '';
var timeout;
var jobfiles;
var jobpaths = [];
$(document).ready(function() {
    $("button").click(function(e) {
        e.preventDefault();

        console.log('Sending');
        var path = $("input").val();
        x('state 1 getting info - infpb');
        state = 1;
        $.ajax({
            url:'backup.manager.php?json&path='+encodeURI(path)+'&type=0&state='+state, 
            dataType:'json', 
            success:function(data)
            {

                jobid = data['stats']['jobid'];
                jobfiles = data['stats']['totalfiles'];
                var jobsize = data['stats']['totalsize'];
                for(var i = 0, len = jobfiles; i < len; i++) {
                    jobpaths.push(data[i]['File']);
                }
                state = 2;
                x('state 2 - infpb stop (Information retrieved, launch backup) '+jobfiles+' files with '+jobsize+' bytes');
                backup_launch(jobid);

            }
        });
    });
});
function x(x) {
    $("#l").append(x+"<br>");   
}
var curfileid = 0;
function backup_launch(jobid) {
    x('jobid: '+jobid+' on state '+state);
    $.ajax({
        url:'backup.manager.php',
        data: {
            'json': 1,
            'jobid': jobid,
            'state': state,
            'path': jobpaths[curfileid]
        },
        dataType:'json', 
        success:function(data)
        {

            if(curfileid < jobfiles) {
                x((curfileid+1)+' / '+jobfiles);
                    curfileid++;
                    backup_launch(jobid);
            }
        },
        error: function(jqXHR, textStatus, errorThrown) {
            x(["backup.manager error", textStatus, errorThrown, jobid].join(": "));
        }
    });
}
function listen(jobid) {

    $.ajax({
        url:'backup.listener.php?json&jobid='+jobid, 
        dataType:'json', 
        success:function(data)
        {
            var curfile = data['curfile'];
            var totalfiles = data['totalfiles'];
            var p = curfile * 100 / totalfiles;
            x('File '+curfile+' out of '+totalfiles+' progress%: '+p);
            timeout = setTimeout("listen('"+jobid+"')", 500);

        }
    });
} 
```

备份管理器.php

```
set_time_limit(0);
require('../functions.php');
session_start();

$keepCPUlow_lastlookup = time();
$keepCPUlow_mindelay = 60;
function keepCPUlow() {
    global $keepCPUlow_lastlookup, $keepCPUlow_mindelay;
    if((time() - $keepCPUlow_lastlookup) > $keepCPUlow_mindelay) {
        $keepCPUlow_lastlookup = time();
        getSysload(75, 1000);   // Max %, wait time in ms
    }
}

$state = isset($_GET['state']) ? $_GET['state'] : 0;
if($state == '1') {
    //
    $json = isset($_GET['json']) ? true : false;// Result should be in json format
    $path = isset($_GET['path']) ? $_GET['path'] : ''; // Path of the file or folder to backup
    $type = isset($_GET['type']) ? $_GET['type'] : ''; // Type - not very useful, for now

    //0\. Assign a jobid for this job, it will help retrieve realtime information about this task
    $jobid = hash('md4', (time().uniqid().session_id()));
    //Store the current status (0) job not started
    $_SESSION['job'][$jobid]['status'] = 0; //Not started... yet

    // 1\. Retrive list of files and stats
    $fileslist = array(); //Will contain the list of files
    $files_totalsize = 0; // Total size of files

    // Check if file or folder
    if(is_dir($path)) {
        //Path is a folder, get the list of files
        $files = getFilelist($path);

        foreach($files as $file) { //For each files
            if(!is_dir($file['File'])) { //That is not a directory
                $files_totalsize = $files_totalsize+$file['Filesize']; //Increment toal size
                $cpumon = keepCPUlow(); //if($cpumon[1]) echo ">CPU BURN".$cpumon[0]."<";

            }
        }

        $files_total = count($files); // Number of files
    } else {
        $files_totalsize = $files_totalsize+getFilesize($path);

        $files_total = 1;
    }

    $files['stats'] = array("totalfiles"=>$files_total, "jobid"=>$jobid, "totalsize"=>$files_totalsize);

    //Store infos in session
    $_SESSION['job'][$jobid]['totalfiles'] = $files_total;
    $_SESSION['job'][$jobid]['totalsize'] = $files_totalsize;
    $_SESSION['job'][$jobid]['path'] = is_dir($path) ? $path.'\\*' : $path;
    $_SESSION['job'][$jobid]['currentfile'] = 0;
    $_SESSION['job'][$jobid]['currentfile_path'] = '';
    $_SESSION['job'][$jobid]['bname'] = "SafeGuard_".$jobid.".".$GLOBALS["backup_ext"];
    $_SESSION['job'][$jobid]['blocation'] = "D:\\";

    // 2\. return to app and wait for ready confirmation
    if(isset($_GET['json'])) {
        echo json_encode($files);
    }
    exit();
}
else if($state == '2') {

    $jobid = isset($_GET['jobid']) ? $_GET['jobid'] : 0;
    $_SESSION['job'][$jobid]['currentfile'] = 0;

    // 3\. When app appove backup, 
    //      - Write infos to DB
    //      - Zip all files into 1 backup file
    $datebackup = time();
    $bckpstatus = 1; //In progress

    //$pathtobackup = $_SESSION['job'][$jobid]['path'];
    $pathtobackup = isset($_GET['path']) ? $_GET['path'] : "--";

    $backupname = $_SESSION['job'][$jobid]['bname'];
    $backuplocation = $_SESSION['job'][$jobid]['blocation'];
    /*
    $query = "INSERT INTO backups (watchID, path, datebackup, checksum, sizeori, sizebackup, bckpcomplete)
            VALUES ($watchID, '{$path}', '{$datebackup}', '', '{$files_totalsize}', '', '{$bckpstatus}')"; 

    $sth = $db->prepare($query);

    $db->beginTransaction();
    $sth->execute();
    $db->commit();
    $sth->closeCursor();
    */

    if( ($fp = popen("7za a -t7z ".$GLOBALS["backup_compression"]." \"".$backuplocation.$backupname."\" \"".$pathtobackup."\"", "r")) ) {
        while( !feof($fp) ){

            fread($fp, 256);
            $num_lines = 1;
            $_SESSION['job'][$jobid]['currentfile'] = $_SESSION['job'][$jobid]['currentfile']+$num_lines;
            $num_lines = 0;

            flush();
            echo '1';
        }
        pclose($fp);
    }

} 
```

# ruby-on-rails - 通过定义虚拟属性在 Rails 表单验证中获取 current_user

> ID：14289550
> 
> 赞同：1
> 
> 时间：2013-01-12T02:22:17.007
> 
> 标签：ruby-on-rails, ruby, validation, virtual-attribute

Rails 表单验证旨在最容易地进入模型。但我需要确保当前用户具有提交帖子所需的权限，并且该`current_user`变量只能在控制器和视图中访问。

[我在一个类似](https://stackoverflow.com/questions/4235898/rails-custom-validation-that-requires-current-user-information)的问题中找到了这个答案：

> 您可以为 定义一个`:user_gold`虚拟属性`Book`，将其设置在您可以访问的控制器中`current_user`，然后将其合并到您的`Book`验证中。`

如何使用我的帖子和用户控制器进行设置，以便`current_user`在模型中可以访问变量？

# 解决方案：

正如@Deefour 的回答所指出的那样，从应用程序设计的角度来看，这整个事情都是错误的。我更改了它，因此除非条件为真，否则我的视图不会呈现表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T02:31:28.603

“类似的问题”是说你可以做这样的事情

```
class YourModel < ActiveRecord::Base
  attr_accessor :current_user

  # ...
end 
```

然后在你的控制器动作中你可以做类似的事情

```
@your_model = YourModel.find(params[:id])
@your_model.current_user = current_user
@your_model.assign_attributes(params[:your_model])

if @your_model.valid?
  # ... 
```

然后您可以使用`self.current_user`within`YourModel`的验证方法。

* * *

**请注意**，我认为这不是您应该做的，因为我不认为这种“验证”与**“授权”**一样多。未经授权的用户甚至不应该能够获得`YourModel`可以保存对实例的此类更新的操作部分。

* * *

至于按要求使用 Pundit 进行授权，您将在`app/policies/your_model.rb`

```
class YourModelPolicy < Struct.new(:user, :your_model)
  def update?
    user.some_privilege == true # change this to suit your needs, checking the "required privileges" you mention
  end
end 
```

将 Pundit 包含在您的`ApplicationController`

```
class ApplicationController < ActionController::Base
  include Pundit
  # ...
end 
```

然后，在您的控制器操作中，您可以简单地执行

```
def update
  @your_model = YourModel.find(params[:id])
  authorize @your_model

  # ... 
```

该`authorize`方法将调用`YourModelPolicy`'s`update?`方法*（它调用与您的操作相匹配的方法 +`?`默认情况下）*，如果返回虚假值，将导致 403 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T02:34:17.103

授权不应该在模型中进行。模特已经有很多责任了，你不觉得吗？

那是控制器的事情，实际上您可以使用诸如[cancan](https://github.com/ryanb/cancan)之类的 gem 在其他地方使用逻辑，并且在控制器中您可以执行以下操作：

```
authorize! :create, Post 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T02:44:35.480

您可以像这样在模型中定义“虚拟属性”：

```
class Book < ActiveRecord::Base
  attr_accessor :current_user
end 
```

它的值可以直接在你的控制器中设置，如下所示：

```
class BooksController < ApplicationController
  def create
    book = Book.new
    book.current_user = current_user
    book.save!
  end
end 
```

在模型的验证例程中，您可以像访问任何其他 ActiveRecord 字段一样访问它：

```
def validate_user_permission
  errors[:current_user] = "user does not have permission" unless current_user.is_gold?
end 
```

我不记得 ActiveRecord 是否属于这种情况，但您可以通过控制器中的批量分配方法（如`create`、`update`和）设置虚拟属性`new`：

```
def create
  Book.create!(current_user: current_user)
end 
```

为此，您可能必须在模型中添加以下行以启用该虚拟属性的批量分配：

```
attr_accessible :current_user 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T05:20:45.313

我同意 Ismael - 这通常在控制器中完成。这不是模型的属性，而是权限问题，与控制器业务逻辑有关。

如果您不需要像 CanCan 这样的宝石的所有功能，您可以自己扮演角色。

```
class BooksController < ApplicationController

  before_filter :gold_required, :only => :create

  def create
    book = Book.new
    book.save!
  end

  # Can be application controller
  private
  def gold_required
    return current_user && current_user.is_gold?
  end

end 
```

您可能还想将过滤器放在“新”方法上。

# html - 居中/左对齐 div

> ID：14289558
> 
> 赞同：1
> 
> 时间：2013-01-12T02:24:17.737
> 
> 标签：html, css

有人可以帮我处理这段代码吗？

**HTML：**

```
<div id="container">
  <div class="block"> </div>
  <div class="block"> </div>
  <div class="block"> </div>
  <div class="block"> </div>
</div> 
```

**CSS：**

```
#container {
  margin:auto;
  text-align:center;
  padding:10%;
}
.block {
  width:240px;
  height:300px;
  background: red;
  display:inline-block;
} 
```

[jsfiddle](http://jsfiddle.net/LBabj/)

我想要它使整个容器在中间对齐，但是当底部有一个额外的块时，它应该向左移动。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:38:06.867

这有效：

**HTML：**

```
#container {
  margin:auto;
  text-align:center;
  width:70px;
  overflow:hidden;} 
```

**CSS：**

```
.block {
  width:24px;
  height:30px;
  float:left;
  margin:5px 5px;
  background: red;} 
```

请参阅此处的[jsfiddle](http://jsfiddle.net/LBabj/2/)。我更改了尺寸，以便更容易看到，但您可以根据您的网站重新调整它们。基本上，您需要`overflow:hidden;`并设置容器的宽度，使其每行只能容纳 2 个块，以便下一个块位于下方并与左侧对齐。另外，请记住 id 在您的页面中必须是唯一的；如果您需要多个具有相同定义的元素，则必须使用类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:34:23.013

我会`float: left`在块 id 中使用，从 css 中删除容器并使用类而不是 id，因为 id 必须使用一次：

HTML：

```
<div>
    <div class="block"> </div>
    <div class="block"> </div>
    <div class="block"> </div>
    <div class="block"> </div>
</div> 
```

CSS：

```
.block {
    width:40%;
    height:300px;
    margin: 5%;
    float: left;
    background: red;
    display:block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T00:10:54.183

我用@media 查询解决了我自己的问题：

```
@media screen and (max-width: 840px) {
.portfolio_container {
    width:512px;
    }
}

@media screen and (max-width: 580px) {
.portfolio_container {
    width:255px;
    }
} 
```

我知道媒体查询与旧版浏览器不兼容！但至少所有最新版本都支持它！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T02:27:35.937

试试这个 jQuery 插件来帮助你组织 DIV。desGridLayout： [http ://des.deletesoft.com:8080/?go=8](http://des.delestesoft.com:8080/?go=8)

# c# - 如何调用这个方法？

> ID：14289561
> 
> 赞同：0
> 
> 时间：2013-01-12T02:24:45.027
> 
> 标签：c#

我只是一个编程新手，我做了一个函数，只是一个愚蠢的问题和一个非常愚蠢的问题。请不要粗鲁，我如何从不同的表单或类调用这个函数。甚至以相同的形式

```
public void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
            for (int i = 0; i <= dtInfo.Rows.Count - 2;i++ )
            {
                Battery = Convert.ToDateTime(dtInfo.Rows[i].Cells[5].Value.ToString());
                Oil = Convert.ToDateTime(dtInfo.Rows[i].Cells[14].Value.ToString());
                Fran = Convert.ToDateTime(dtInfo.Rows[i].Cells[12].Value.ToString());
                lastkm = int.Parse(dtInfo.Rows[i].Cells[13].Value.ToString());

            batt = Battery - DateTime.Now;
            doil = Oil - DateTime.Now;
            dfran = Fran - DateTime.Now;

            if (batt.Days <= 7)
            {
               dtInfo.Rows[i].Cells[5].Style.BackColor = Color.Green;

            }
            if (doil.Days <= 7)
            {
                dtInfo.Rows[i].Cells[14].Style.BackColor = Color.Green;
            }
            if (dfran.Days <= 7)
            {
                dtInfo.Rows[i].Cells[12].Style.BackColor = Color.Green;

            }
            if (lastkm <= 500)
            {
                dtInfo.Rows[i].Cells[13].Style.BackColor = Color.Green;
            }

        }
    } 
```

已编辑

![第一个打开的表格](../Images/35f62d85cf80d1e7c900704f12f613b3.png) 当我第一次打开我的表单时，颜色会发生变化，然后当我重新打开它时 ![重新打开的表格](../Images/a0f89079c91df853eb299e261e744f1e.png) 它不会改变，但是当我跟踪代码时，颜色的值发生了变化，但单元格中的颜色没有变化

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T02:28:14.400

那是一个事件处理程序，您不能自己引发事件，除非：

1.  该类公开了一个受保护的（甚至是公共的）方法来直接触发它，但这通常不会在 .NET 类中发生。

2.  您可以通过执行实际事件所代表的操作来触发它——在您的情况下，当您的网格和源之间的数据绑定完成时。

不过，您可以调用该方法，但它没有任何相关含义，因为您不会引发事件。尽管如此，如果事件逻辑无关紧要并且您只想执行该代码，您可以通过以下方式完成：

```
dataGridView1_DataBindingComplete(null, null); 
```

但在这种情况下，您可以将该方法的内容包装在一个简单的方法中，该方法返回类型为`void`，没有参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:29:44.007

dataGridView1_DataBindingComplete() 只是一个普通的旧方法

```
dataGridView1_DataBindingComplete(this, new RoutedEventArs()); 
```

如果你想从同一个对象调用它，应该这样做。

如果您想重用该部分代码，我将采用该方法中的所有内容并创建一个单独的公共方法，以便您可以从其他地方和其他对象调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T02:29:53.220

这完全取决于函数所在的位置。如果您将它与表单放在同一类下，则可以在同一范围内调用它。但据我所知，这是一个事件处理程序，您不需要调用它，因为它处理 dataGridView 事件“DataBindingComplete”。有关它的更多信息，请访问[此](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.databindingcomplete.aspx)。

但是，如果您出于某种原因需要调用它，您可以这样做：

```
dataGridView1_DataBindingComplete(null, null) 
```

# android - Android，让动画文本像星球大战第一部分一样在屏幕上向上滚动

> ID：14289565
> 
> 赞同：6
> 
> 时间：2013-01-12T02:25:33.520
> 
> 标签：android, animation, credits

我正在尝试在我的 android 应用程序中创建动画。

我想要动画像星球大战电影的学分一样，文字逐渐上升。如果有其他方法可以做到这一点，我想知道。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T02:38:31.153

尝试这个 ：

将这段代码放在 res/anim/animationfile.xml 中的 xml 文件中

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/linear_interpolator" >

<translate
    android:duration="5000" ---> set your time here
    android:fromYDelta="-100%p"
    android:toYDelta="100%p" /> </set> 
```

现在要设置动画，请执行以下操作：

```
Animation translatebu= AnimationUtils.loadAnimation(this, R.anim.animationfile);
tv.setText("Some text view.");
tv.startAnimation(translatebu); 
```

这就是你粗略的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T03:40:51.777

这是一个非常好的动画示例

[http://android-er.blogspot.com/2012/02/various-effect-of-interpolator-in.html](http://android-er.blogspot.com/2012/02/various-effect-of-interpolator-in.html)

# linux - Linux DNS 解析拒绝某些名称

> ID：14289572
> 
> 赞同：1
> 
> 时间：2013-01-12T02:26:33.823
> 
> 标签：linux, dns

当我注意到一个奇怪的差异时，我正在玩通配符域（考虑将它们用于未来的项目）。

我的域配置了通配符 DNS 条目 ( `*.vgoc.info`)。我试过 pinging `a_.vgoc.info`，在 Linux 上，我得到了

```
$ ping a_.vgoc.info
ping: unknown host a_.vgoc.info 
```

但是，在 OS X 上，我得到

```
$ ping a_.vgoc.info
PING vgoc.info (174.2.65.138): 56 data bytes 
```

在 Windows 上也是如此。

有谁知道Linux是否有一些拒绝某些模式的特殊“名称验证”？例如，`ping a_b.vgoc.info`并且`ping a__b.vgoc.info`工作正常，但`ping a-.vgoc.info`没有。

根据我对 DNS 规范的阅读，这样的名称并不违法。是否有其他限制此类名称的参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:04:52.543

这可能是因为您的域名根据[RFC 1035](http://www.ietf.org/rfc/rfc1035.txt)不合法。域名的每一部分（点之间）称为“标签”，以下是标签的语法：

```
<label> ::= <letter> [ [ <ldh-str> ] <let-dig> ]
<ldh-str> ::= <let-dig-hyp> | <let-dig-hyp> <ldh-str>
<let-dig-hyp> ::= <let-dig> | "-"
<let-dig> ::= <letter> | <digit> 
```

请注意，下划线是不合法的，标签不能以连字符开头或结尾。

# mysql - MySQL选择最常发生或平均

> ID：14289574
> 
> 赞同：1
> 
> 时间：2013-01-12T02:27:22.683
> 
> 标签：mysql

我有一个要从中选择的 MySQL 表：

1) 任一“最常出现”的值，如果有任何普遍存在的话

2）或“平均值”值，如果没有最常出现的值。

示例表 1：

```
value
1
2
3
4 
```

所有值都是平等发生的，因此我想采取`AVG(`value`)`

示例表 2：

```
value
1
2
2
3 
```

值`2`占优势，因此我想选择值 2。

什么mysql查询会这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:05:43.990

从 Gordon 的回答开始，我测试并更正了 SQL Fiddle 中的 SQL 查询：

```
SELECT IF(t4.numcnts = 1, t1.avgvalue, t2.topvalue) AS result 
 FROM (select avg(value) as avgvalue from test) t1 
 CROSS JOIN (select value as topvalue from test group by value order by count(*) desc limit 1) t2 
 CROSS JOIN join (select count(distinct cnt) as numcnts from 
    (select count(*) as cnt from test group by value) t3) t4 
```

这是带有两个测试表的小提琴（切换 test2 进行测试以在特定值占优势时查看结果）：[http ://sqlfiddle.com/#!2/76914/3](http://sqlfiddle.com/#!2/76914/3)

我的更改是在子句中使用`IF`而不是`CASE`语句，`SELECT`并为子选择添加必要的表别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:46:34.183

以下方法计算这两个值，然后在它们之间进行选择：

```
select (case when numcnts = 1 then avgvalue else topvalue end)
from (select avg(value)  as avgvalue from t) cross join
     (select value  as topvalue from t group by value order by count(*) desc limit 1) cross join
     (select count(distinct cnt) as numcnts from (select count(*) as cnt from t group by value)) 
```

注意：如果顶部有平局，但也有其他值，则返回任意值。在这种情况下，您没有指定要做什么。

此外，该 SQL 未经测试，因此可能存在语法错误。

# c++ - 如何使用 Xcode 和 c++ 将日志消息发送到控制台应用程序？

> ID：14289583
> 
> 赞同：3
> 
> 时间：2013-01-12T02:29:33.173
> 
> 标签：c++, xcode, logging, console

如何使用 Xcode 和 c++ 将日志消息发送到 Console.app？我可以访问的唯一代码是 c++ 源代码，而不是 Objective-C。此外，商店中的其他开发人员需要能够使用 Mac 控制台应用程序 (Console.app) 跟踪日志消息，因此不能选择使用 Xcode 控制台。我基本上是在寻找`NSLog(...)`替代品。像这样简单的东西。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T03:17:41.887

如果要写入系统日志，可以使用 syslog() 如下：

```
openlog("foo", (LOG_CONS|LOG_PERROR|LOG_PID), LOG_USER);
syslog(priority, "%s", "a message");
closelog(); 
```

但是，我发现写入自己的日志文件更方便，Console.app 可以读取该文件。这让我可以进行比 syslog() 支持的更高级的格式化，而且我也不必在系统日志中的许多其他消息中寻找我的消息。

下面是我如何为一个名为“foo”的程序执行此操作：

1.  获取当前用户的主目录。您可以通过使用 getuid() 和 getpwuid() 来获取 passwd 结构，并从中分析主目录字符串来做到这一点。
2.  将“/Library/Logs/foo.log”附加到主目录字符串。
3.  使用它作为 fopen() 的路径参数来为日志文件创建一个 FILE*。
4.  然后使用标准的 fprintf()、fflush() 等调用写入日志文件。
5.  在程序执行结束时关闭日志文件。

您可以通过打开 Files > ~/Library/Logs 在 Console.app 中查看结果。文件“foo.log”将在那里并包含您的日志记录的内容。

# java - 将静态方法应用于存储在子类中的数据

> ID：14289588
> 
> 赞同：0
> 
> 时间：2013-01-12T02:31:10.523
> 
> 标签：java

我正在开发一个类来访问有关存储在 Jar 文件中的类库的信息并运行为每个类库定制的操作。它包含从 Jar 文件加载本地化字符串等的方法。

```
public class CodeBundle {
    public static String str(String id) {
        ...
    }

    ...
} 
```

我需要能够知道我试图从哪个库加载信息，所以我希望能够使用代表每个库的子类，例如：

```
public class JAppFramework extends CodeBundle {
    ...
} 
```

所以现在在作为 JApp 框架一部分的代码中，我希望能够调用`JAppFramework.str("...")`以从 JApp 框架资源包中加载字符串。如果我有另一个库，例如`TestLibrary`，我希望能够调用`TestLibrary.str("...")`以从测试库的资源包中加载字符串。我所做的是在`CodeBundle`调用`getFile()`中定义了一个方法，该方法将返回从中加载库的 Jar 文件。然后该`str()`方法将使用它来加载本地化字符串。

问题在于，据我所知，其中的静态方法`CodeBundle`只能访问存储在类中的数据，而不能访问其任何子类中的数据。`CodeBundle`

由于各种原因，我不能使用“getClass().getResource(name)”来加载资源。

有什么办法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:41:12.997

您可以尝试使用单例：

```
public abstract class CodeBundle { // or even an interface
    public abstract String str(String id);
}

public final class JAppFramework extends CodeBundle {
    private static final CodeBundle INSTANCE = new JAppFramework();

    // private constructor
    private JAppFramework() {
        // whatever
    }

    // get the instance
    public static CodeBundle getInstance() { return INSTANCE; }

    // Implement str() here
}

// Create other singletons as needed 
```

在您的代码中：

```
CodeBundle bundle = JAppFramework.getInstance();
bundle.str(whatever); 
```

当然，这是一个非常简单的例子。将需要的任何字段/方法/构造函数/构造函数参数放入`CodeBundle`- 因为它是抽象的，所以无法实例化。

# android - Android 和行星渲染

> ID：14289591
> 
> 赞同：8
> 
> 时间：2013-01-12T02:31:16.943
> 
> 标签：android, opengl-es, glsl, rajawali

我正在学习如何在 android 上进行 3D 开发。我从一个带有一些云的简单旋转行星开始。在过去的两天里，我一直在尝试为地球添加大气辉光。我在网上查看并尝试使用着色器，但无法走远。

我的问题是，实现这一目标的最佳方法是什么？我朝正确的方向轻推可能就是我所需要的。

我附上了一张我目前拥有的星球的截图，以及我为之奋斗的最终目标。

感谢您的任何帮助。

现在的进展：

![在此处输入图像描述](../Images/879f780d878a751889e5b9233a4f3a43.png)

最终目标：http: [//25.media.tumblr.com/tumblr_m06q7l7BpO1qk01v6o1_500.png](http://25.media.tumblr.com/tumblr_m06q7l7BpO1qk01v6o1_500.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T14:00:41.813

您需要的通常是在后期处理渲染过程中完成。例如：

Pass -1：将行星模型渲染为 FBO 纹理附件。Pass- 2：设置屏幕四边形，并将上一个通道的纹理附加为采样器均匀。

然后在片段着色器中应用发光效果。对于发光，有很多方法可以做到。例如，您可以在第一遍中绘制行星的轮廓，给它填充颜色，然后使用 smoothstep() 将其模糊。然后在后期处理中传递给您把它放在主行星纹理下。事实上[，在这里](http://glsl.heroku.com/)你可以看到很多关于如何为圆形物体发光的代码示例。

还有一件事。添加基于模糊的发光可以极大地影响移动设备的性能。有一种称为“距离场”的技术。[Valve](http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf)用它来抗锯齿字体。但它也可以用来做发光。您创建一次行星轮廓的距离场纹理纹理副本，然后在后期处理过程中使用它来做平滑发光效果。幸运的是你有生成它的功能。[在这里](http://contourtextures.wikidot.com/)你可以找到论文和如何完成它的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T20:09:25.623

看起来你想要边缘照明。这不需要任何额外的通行证。

cf [http://oneclick-code.blogspot.co.uk/2012/01/ios-opengl-es-20-lighting-models-for.html](http://oneclick-code.blogspot.co.uk/2012/01/ios-opengl-es-20-lighting-models-for.html)

注意：示例中有很多额外的东西，但关键是：您将每个顶点的法线与相机的视图向量的方向进行比较。当它们成直角时，（点积 == 0）应用“全”光。当它们平行时（点积 == 长度），应用零光。

```
varying mediump vec3   OUT_View;
varying mediump vec3   OUT_Light;
varying mediump vec3   OUT_Normal;                                     
varying mediump vec2   OUT_TexCoord;
uniform sampler2D EXT_TEXTURE_01;
uniform sampler2D EXT_TEXTURE_02;
uniform sampler2D EXT_TEXTURE_03;
uniform sampler2D EXT_TEXTURE_04;

void main(void)
{
    highp vec4  vDiffuseColor = vec4( 0.0, 0.0, 0.5, 1.0 );
    highp float fDiffuseFactor = 0.2 + max ( dot ( OUT_Normal, OUT_Light ), 0.0 );
    highp vec4  clr;

    if ( fDiffuseFactor < 0.3 )
        vDiffuseColor = vDiffuseColor * 0.1;
    else
    if ( fDiffuseFactor < 0.7 )
        vDiffuseColor = vDiffuseColor * 0.5;
    else
    if ( fDiffuseFactor < 0.8 )
        vDiffuseColor = vDiffuseColor;
    else
        vDiffuseColor = vDiffuseColor * 1.3;

    gl_FragColor = vDiffuseColor;
} 
```

# ios - iOS 将 CollectionView 添加到故事板 UI 构建器中的另一个视图

> ID：14289592
> 
> 赞同：1
> 
> 时间：2013-01-12T02:31:26.530
> 
> 标签：ios, storyboard, uicollectionview, childviews

刚开始使用 iOS，并尝试使右侧的集合视图成为左侧视图的子视图。我似乎无法将其拖入。我认为部分问题是在导航的左侧（工作区的左侧），集合视图被称为场景。要创建我想要放置集合视图的视图，我只需将一个新的视图控制器拖到工作区中，然后进行控制+单击将其添加到主选项卡视图。我想要在集合视图上方的另一个视图，但首先要做的是......

我必须以编程方式执行此操作吗？

![在此处输入图像描述](../Images/6e847080edbf69cca453fbff0219b2ec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:08:31.100

UICollectionView 来自 UIScrollView:UIView，因此您可以在 IB 或代码中添加：

像tableView一样，将delegate和datasource拖到ViewController。如果你想要更多colleliotionView，创建更多flowlayouts。

# uitableview - 如何使用来自 tableview 原型单元格的弹出框 segue

> ID：14289596
> 
> 赞同：1
> 
> 时间：2013-01-12T02:31:50.170
> 
> 标签：uitableview, prototype, uipopovercontroller, uistoryboardsegue

我正在尝试使用表格视图原型单元格中的弹出框segue。

如果我使用模态segue，它工作正常，但由于某种原因，当我使用弹出框时，我收到以下错误：

无法编译连接：=> categoryPicker => >

我可以通过代码完成这一切，但我想使用情节提要来做到这一点。

# jquery - jQuery post - 为什么会有重复的请求？

> ID：14289603
> 
> 赞同：0
> 
> 时间：2013-01-12T02:32:51.417
> 
> 标签：jquery, ajax

我有这个代码：

```
$(window).scroll(function () { 

    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {

        var site_url = $("#site_url").val();
        var post_url = site_url+"index.php/ajax/get_more_users";
        $("#loading_more_users").show();
        var users_page = $("#users_page").val();

        //alert("y");
        $.post(post_url, {'page': users_page}, function(data){              
                //alert("x");
            $("#loading_more_users").hide();
            $("#left_members_collumn").append(data);
            $("#users_page").val(eval(Number(users_page)+1));

        });

   }
}); 
```

任何人都可以告诉我为什么在滚动底部时 $.post 会执行一次、两次或三次？我得到重复的内容。main函数执行的很好，但是不知道为什么会有多个ajax请求。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:37:47.617

滚动多次触发，条件满足您的 if 条件。你可以做些什么来防止这种情况发生，设置一个布尔值来表示你正在发布，所以你不会发布两次：

```
var isPosting = false;
$(window).scroll(function () { 

    if (!isPosting && $(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
        isPosting = true;
        var site_url = $("#site_url").val();
        var post_url = site_url+"index.php/ajax/get_more_users";
        $("#loading_more_users").show();
        var users_page = $("#users_page").val();

        //alert("y");
        $.post(post_url, {'page': users_page}, function(data){              
                //alert("x");
            $("#loading_more_users").hide();
            $("#left_members_collumn").append(data);
            $("#users_page").val(eval(Number(users_page)+1));
            isPosting = false;

        });

   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T02:41:44.913

每次滚动时，您都会执行 ajax 请求，因为您将此函数绑定到`$(window).scroll()`函数。如果您`if`返回 true，那么您将执行`ajax request`.

要驱逐它，您可以使用`one`jquery 中的函数函数：

```
$(window).one('scroll', function () { 

    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {

        var site_url = $("#site_url").val();
        var post_url = site_url+"index.php/ajax/get_more_users";
        $("#loading_more_users").show();
        var users_page = $("#users_page").val();

        //alert("y");
        $.post(post_url, {'page': users_page}, function(data){              
            //alert("x");
            $("#loading_more_users").hide();
            $("#left_members_collumn").append(data);
            $("#users_page").val(eval(Number(users_page)+1));
        });
   }
}); 
```

# c# - MVVM 多用户界面

> ID：14289612
> 
> 赞同：0
> 
> 时间：2013-01-12T02:34:53.547
> 
> 标签：c#, .net, mvvm, web

我有一个在 MVVM 中很好地构建的 WPF 项目，带有一些 WCF Web 服务，现在我想要添加另一个用户界面（Web 或移动）。

Views 和 ViewModels 当前被封装在一个 WPF 项目中。如果我想创建一个新的 Web 界面，在 Web 项目中利用 ViewModel 逻辑的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:41:43.800

这是将视图模型和视图保存在单独项目中的一个很好的理由，视图项目引用视图模型项目。照原样，您必须让 Web 用户界面项目引用所有 WPF 代码才能获得所需的视图模型代码。我不知道将 WPF 项目重构为两个项目对您来说有多可行，但如果我处于您的位置，我会考虑这一点。

# magento - Magento 内容不显示

> ID：14289614
> 
> 赞同：2
> 
> 时间：2013-01-12T02:35:12.280
> 
> 标签：magento

这是我第一次使用 Magento。我已经安装了带有自定义主题的 Magento。当我从仪表板添加类别和产品时，它们不会显示在网站上，只是空白内容（页眉、侧边栏和页脚工作正常，更准确地说，你可以在[这里](http://robotsepeti.com)看到）

我从站点地图中找到了 CSS 消失[的添加产品。](http://robotsepeti.com/index.php/robotis-ollo-starter.html)这可能是什么原因？为什么类别和内容没有出现在网站上？为什么产品页面上的css坏了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:44:55.737

Magento 被设计为尽可能高效，学习曲线最初可能会让第一次遇到它的人望而生畏。有几件事可以尝试：

1.  确保在目录 > 类别 > 管理类别中找到您创建的类别，将“包含在导航菜单中”选项设置为“是”（这应该会自动为您“创建”导航栏）
2.  在站点的管理部分，导航到系统 > 索引管理并选择所有并重新索引它们
3.  在管理部分，导航到系统 > 缓存管理并刷新缓存

在开发站点时，有时需要最后两个步骤来查看有关 Magento 安装的最新信息。可以让您的生活更轻松的是在缓存管理页面中，选择所有缓存类型并选择暂时禁用它们。使网站上线后，您需要重新启用它们。

# java - 实现一个大小有限的 TimeWindowBuffer

> ID：14289619
> 
> 赞同：0
> 
> 时间：2013-01-12T02:36:22.020
> 
> 标签：java, algorithm, data-structures, timeout, buffer

我昨天去面试了。我想不出一个编程问题的解决方案，我想在这里得到一些想法。问题是：

我需要在 Java 中实现一个*TimeWindowBuffer*，它存储用户随着时间的推移不断收到的数字。缓冲区有一个*maxBufferSize*。用户想知道过去几秒的平均值，一个用户传入的*timeWindow*（所以这是一个滑动窗口）。我们可以从系统中获取当前时间（例如`System.currentTimeMills()`在 Java 中）。*TimeWindowBuffer*类是这样的：

```
public class TimeWindowBuffer {
  private int maxBufferSize;
  private int timeWindow;

  public TimwWindowBuffer(int maxBufferSize, int timeWindow) {
     this.maxBufferSize = maxBufferSize;
     this.timeWindow = timeWindow;
  }

  public void addValue(long value) {
     ...
  }

  public double getAvg() {
     ...
     return average;
  }

  // other auxiliary methods
} 
```

例子：

比如说，一个用户每秒收到一个号码（用户可能不会以一定的速率收到一个号码），并且想知道**过去 5 秒的平均值**。
**输入**：
maxBufferSize = 5, timeWindow = 5 (s)
numbers={-5 4 -8 -8 -8 1 6 1 8 5}
**输出**（我在这里列出公式来说明，但用户只需要结果）：-
5 / 1 (t=1)
(-5 + 4) / 2 (t=2)
(-5 + 4 - 8) / 3 (t=3)
(-5 + 4 - 8 - 8) / 4 (t= 4)
(-5 + 4 - 8 - 8 - 8) / 5 (t=5)
(4 - 8 - 8 - 8 + 1) / 5 (t=6)
(-8 - 8 - 8 + 1 + 6 ) / 5 (t=7)
(-8 - 8 + 1 + 6 + 1) / 5 (t=8)
(-8 + 1 + 6 + 1 + 8) / 5 (t=9)
(1 + 6 + 1 + 8 + 5) / 5 (t=10)

由于没有指定*TimeWindowBuffer*的数据结构，所以一直在考虑保留一对 value 及其添加的时间。所以我对底层缓冲区的声明是这样的：

```
 private ArrayList<Pair> buffer = new ArrayList<Pair>(maxBufferSize); 
```

在哪里

```
class Pair {
  private long value;
  private long time;
  ...
} 
```

由于 Pair 是按时间顺序添加的，因此我可以对列表进行二进制搜索并计算落入*timeWindow*的数字的平均值。问题是缓冲区有一个*maxBufferSize*（尽管 ArrayList 没有），当缓冲区已满时我必须删除最旧的值。而且该值仍然可以满足*timeWindow*但现在它已取消记录，我永远不会知道它何时到期。

我被困在这里当前。

我不需要直接的答案，但在这里有一些讨论或想法。如果对问题和我的描述有任何混淆，请现在告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:46:32.760

我喜欢这样的小谜题。我没有编译这段代码，也没有考虑到生产使用时必须做的所有事情。就像我没有设计一种将缺失值设置为 0 的方法一样 - 即，如果不是在每个刻度上都输入一个值。

但这会给你另一种思考方式......

```
public class TickTimer
{
  private int tick = 0;
  private java.util.Timer timer = new java.util.Timer();

  public TickTimer(double timeWindow)
  {
    timer.scheduleAtFixedRate(new TickerTask(),
          0, // initial delay
          Math.round(1000/timeWindow)); // interval
  }

  private class TickerTask extends TimerTask
  {
    public void run ()
    {
      tick++;
    }
  }

  public int getTicks()
  {
    return tick;
  }
}

public class TimeWindowBuffer
{
  int buffer[];
  TickTimer timer;

  final Object bufferSync = new Object();

  public TimeWindowBuffer(int maxBufferSize, double timeWindow)
  {
    buffer = new int[maxBufferSize]; 
    timer = TickTimer(timeWindow);
  }

  public boolean add(int value)
  {
    synchronize(bufferSync)
    {
      buffer[timer.getTicks() % maxBufferSize] = value;
    }
  }

  public int averageValue()
  {
    int average = 0;

    synchronize(bufferSync)
    {
      for (int i: buffer)
      {
        average += i;
      }
    }

    return average/maxBufferSize;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:15:38.433

您的问题可以概括为使用常量内存来计算流的一些统计信息。

`time`对我来说，它是一个作为键和值的堆（优先队列）`value`，至少`time`在顶部。

当您收到一个新的`(time,value)`，将其添加到堆中。如果堆大小大于缓冲区大小，只需删除堆中的根节点，直到堆足够小。

此外，通过使用堆，您可以`time`在 O(1) 时间内获得缓冲区（即堆）中的最小值，因此只需删除根（具有最小值的节点`time`），直到清除所有过时的对。

对于统计数据，保留一个整数`sum`。当您将一个新对添加到堆中时，`sum = sum + value of pair`. 当您从堆中删除根时，`sum = sum - value of root`.

# paypal - 重新激活暂停的订阅时是否有 PayPal IPN？

> ID：14289621
> 
> 赞同：4
> 
> 时间：2013-01-12T02:36:43.433
> 
> 标签：paypal, paypal-ipn, paypal-subscriptions

`txn_type`当贝宝定期付款被暂停时，将发送具有以下任一情况的 IPN

```
recurring_payment_suspended
recurring_payment_suspended_due_to_max_failed_payment 
```

问题：是否有 IPN 通知重新激活，例如：

```
recurring_payment_reactivated 
```

我找不到关于 SO、Google 和[https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNandPDTVariables的任何信息](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNandPDTVariables)

或者有谁知道为什么 PayPal 会提供一个 IPN 来告诉我们何时暂停定期付款，而不是何时重新激活它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T03:53:41.650

我刚刚在沙盒上测试了这个场景。我使用创建了一个新配置文件，`CreateRecurringPaymentsProfile`并立即`recurring_payment_profile_created`按预期获得了 IPN。

然后，我暂停了配置文件，`ManageRecurringPaymentsProfileStatus`并立即`recurring_payment_suspended`按预期获得了 IPN。

然后我使用 重新激活了配置文件`ManageRecurringPaymentsProfileStatus`，但我没有从该操作中获得任何新的 IPN。

基于这些发现，我会说，不，你也不会在生产中得到一个。

也就是说，我总是建议在`GetRecurringPaymentsProfileDetails`用户登录您网站的付费区域（或尝试访问任何需要有效个人资料的任何内容）时使用 API 检查个人资料的当前状态。

# excel - 根据另一个单元格的条件将文件夹名称放入一个单元格

> ID：14289622
> 
> 赞同：0
> 
> 时间：2013-01-12T02:37:04.743
> 
> 标签：excel, vba

> **可能重复：**
> [使用 FSO 根据满足的条件将文件夹名称插入单元格](https://stackoverflow.com/questions/14270561/using-fso-to-insert-folder-name-into-cell-based-on-criteria-being-met)

这是我正在尝试做的事情：

*   检查以查看最后一个带有数据的单元格在“A”列中的位置（有效）
*   将数据粘贴到“A”列到 wbkVer.Worksheets("Cutsheets") （作品）
*   找到文件夹的名字，就是fsoFol.Name（works）
*   对于“A”中每个粘贴的单元格，检查一个值。
*   如果有一个值，我需要将 fsoFol.Name 放在偏移量（0,5）中——这应该能够引用 firstRange 变量，但是每个单元格，我不知道该怎么做——或者最好的方法。（不起作用）
*   如果没有价值，请跳过它。

建议？先感谢您。

```
 Dim FSO As Object, fld As Object, Fil As Object
    Dim fsoFile As Object
    Dim fsoFol As Object

    Set FSO = CreateObject("Scripting.FileSystemObject")
    Set fld = FSO.getfolder(folderPath)

    If FSO.folderExists(fld) Then
        For Each fsoFol In FSO.getfolder(folderPath).subfolders
            For Each fsoFile In fsoFol.Files
                If Mid(fsoFile.Name, InStrRev(fsoFile.Name, ".") + 1) = "xls" Then
    fileName = fsoFile.Name
    Application.ScreenUpdating = False
    Set wbkCS = Workbooks.Open(fsoFile.Path)

    If fileName Like "V*.xls" Then
    wbkCS.Worksheets("Cut Sheet").Range("S4:S2000").Copy
       With wbkVer.Worksheets("Cutsheets")
    Set firstRange = .Range("A" & .Rows.Count).End(xlUp).Offset(1, 0) 
        firstRange.PasteSpecial xlPasteValues
    For Each firstRange.Value in wbkVer.Worksheets("Cutsheets")
        If firstRange.Value <> "" Then
        firstRange.Offset(0, 5).Value = fsoFol.Name
                  End If
            Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:29:19.233

`For Each a In b` 您的循环语法是错误的：`b`返回一个集合（在这种情况下，`Cells`in a `Worksheet`，`a`必须是该集合成员的类型（在这种情况下为 `Range.

所以正确的语法是

```
For Each firstRange in wbkVer.Worksheets("Cutsheets") 
```

也就是说，你真的不想这样做。循环将做的是检查工作表上的*每个*单元格（数十亿！），这*太慢*了。此外，它会跑掉，因为每次它找到一个非空白单元格时，它都会创建另一个单元格来触发`If`.

**更新**

根据您的评论，我认为您想要的是：

*   对于您刚刚粘贴在`A`非空白列中的每个单元格，将 的值`fsoFol.Name`放入列中`F`

如果是这样，试试这个（从`wbkCS.Worksheets("Cut Sheet").Range("S4:S2000").Copy`下替换）

```
Dim rngSource As Range
Set rngSource = wbkCS.Worksheets("Cut Sheet").Range("S4:S2000")
With wbkVer.Worksheets("Cutsheets")
    Set firstRange = .Range("A" & .Rows.Count).End(xlUp).Offset(1, 0).Resize(rngSource.Rows.Count, 1)
    firstRange.Value = rngSource.Value
    firstRange.SpecialCells(xlCellTypeConstants).Offset(0, 5) = fsoFol.Name
End With 
```

# jquery - jQuery 秒计数器未显示在 Fancybox 内联中

> ID：14289623
> 
> 赞同：0
> 
> 时间：2013-01-12T02:37:28.427
> 
> 标签：jquery, fancybox

```
var counter = 5;
var timer = setInterval(function () {
    seconds--;
    $('#regmsg').html('Successful! Message will close in ' + counter);
    if (counter == 0) {
        $.fancybox.close();
        parent.location.reload();
    }
}, 1000);
$.fancybox({
    href: '#regmsg',
    type: 'inline',
    'closeBtn': false
}); 
```

我想要时间显示，`#regmsg`但它只显示“成功！” 而不是消息的其余部分。问题是什么？我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:46:27.800

更改`seconds`为`counter`。

```
var counter = 5;
var timer = setInterval(function () {
    counter--; // <- here
    $('#regmsg').html('Successful! Message will close in ' + counter);
    if (counter == 0) {
        $.fancybox.close();
        parent.location.reload();
    }
}, 1000); 
```

[演示](http://jsfiddle.net/ricardolohmann/Cxxx5/)

# perl - 访问时触发数组元素计算

> ID：14289624
> 
> 赞同：3
> 
> 时间：2013-01-12T02:37:32.723
> 
> 标签：perl

是否有任何 Perl API 可以让我在读取数组元素时执行代码？我在想类似的东西（或者也许可以？）[Variable::Magic](https://metacpan.org/module/Variable%3a%3aMagic)，我该怎么做？最终目标是本质上重新计算任何访问（延迟评估）的元素值，但我不想将 , 之类的函数限制`grep`为`map`不可`natatime`用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:06:10.883

CPAN 上有几个用于惰性数组的模块。 [Data::Lazy](https://metacpan.org/module/Data%3a%3aLazy)、[Variable::Lazy](https://metacpan.org/module/Variable%3a%3aLazy)、[Tie::Array::Lazy](https://metacpan.org/module/Tie%3a%3aArray%3a%3aLazy)和[Variable::Magic](https://metacpan.org/module/Variable%3a%3aMagic)。

Data::Lazy 和 Tie::Array::Lazy 都打成平手。绑定非常慢，比普通数组慢约 10 倍，比对象慢约 3 倍。捆绑可能会扼杀懒惰的性能优势。

变量::懒惰是不同的。它实际上是在编译时使用 Devel::Declare 魔法将变量替换为一大段代码。不幸的是，它似乎只适用于标量。：-/

变量::魔法是……魔法。它更多地用于注释变量而不是控制它们。

我建议改为反转问题。将事物写成一个可以随心所欲地懒惰的对象。与领带相比，这更快、更灵活、可能更具特色且错误更少。对于 grep、map 等，提供一个[重载](http://perldoc.perl.org/overload.html#Overloadable-Operations)它以便它可以用作数组 ref。重载不会是懒惰的，但是 grep 和 map 无论如何都必须在整个列表上工作，并且 tie 不会对你有任何好处。并且对象可能能够提供更高效的搜索和变换方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T15:26:31.180

惰性列表是我们[`List::Gen`](https://metacpan.org/module/List%3a%3aGen)的强项之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T15:53:06.227

您可能会发现 brian d foy 的这篇文章很有用：[http](http://www.effectiveperlprogramming.com/blog/300) ://www.effectiveperlprogramming.com/blog/300 。特别是这段代码对和（无限）绑定数组进行惰性求值。

```
use 5.012;

{
package Tie::Array::InfiniteSquares;

    use parent qw(Tie::Array);
    use Carp qw(carp);
    use Config qw(%Config);

    # mandatory methods
    sub TIEARRAY {
        bless {}, $_[0];
        }
    sub FETCH {
        my( $self, $index ) = @_;
        $index ** 2;
        }

    sub FETCHSIZE { 0x7F_FF_FF_FF } # still problems here

    sub STORE     { carp "You can't touch this!" }
    sub STORESIZE { carp "You can't touch this!" }
    sub EXISTS    { 1 }
    sub DELETE    { carp "You can't touch this!" }

}

tie my @array, 'Tie::Array::InfiniteSquares';

while( my( $index, $value ) = each @array )
    {
    say "Item is $value at index $index";
    } 
```

现在假设您的实际数据集不是无限的，那么当您正确构建绑定类时，您可以`each`进行惰性评估。`map`, `grep`,`for`等会在行动之前评估整个列表，但它们仍然可以工作。

# c# - 将带有封装 int 的字符串解析为包含要忽略的其他数字的数组

> ID：14289625
> 
> 赞同：3
> 
> 时间：2013-01-12T02:37:36.867
> 
> 标签：c#, arrays, string, parsing, int

在我的编码过程中，我遇到了一个涉及解析这样的字符串的问题：

> {15} 有 194 个红气球，{26} 有 23 个贴纸，{40} 有 12 个千斤顶，......

我的代码涉及将句子和数字都拉到两个单独的数组中。我已经解决了涉及使用 a 将句子解析为自己的数组`*.Remove(0, 5)`的问题，以消除第一部分，该部分的问题是我必须确保文件始终写入涉及 {##} 的标准但是它并不像我想要的那样优雅，因为有时数字会是 {3}，我会被迫使它成为 {3}。

因为字符串也有可能包含其他数字，所以我无法先简单地解析出整数。

```
int?[] array = y.Split(',')
            .Select(z =>
            {
                int value;
                return int.TryParse(z, out value) ? value : (int?)null;
            })
            .ToArray(); 
```

所以无论如何回到手头的问题，我需要能够将“{##}”解析成一个数组，每个数组都有自己的元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:58:12.923

[这是使用积极的前瞻/后视](http://www.regular-expressions.info/lookaround.html)来做到这一点的一种方法：

```
string s = "{15} there are 194 red balloons, {26} there are 23 stickers, {40} there are 12 jacks";

// Match all digits preceded by "{" and followed by "}"
int[] matches = Regex.Matches(s, @"(?<={)\d+(?=})")
    .Cast<Match>()
    .Select(m => int.Parse(m.Value))
    .ToArray(); 

// Yields [15, 26, 40] 
```

# python - Python 随机随机

> ID：14289631
> 
> 赞同：-1
> 
> 时间：2013-01-12T02:38:30.507
> 
> 标签：python, random

```
if Airplane==1:
 while icounter<4:
    ifuelliter=random.randrange(1,152621)
    #litter/kilometer
    LpK=152620/13500
    km=LpK*ifuelliter

    ipca=random.randrange(0,50)
    ipcb=random.randrange(0,50)
    ipcc=random.randrange(0,812)

    #3D space distance calculation
    idstance= math.sqrt((icba-ipca)**2 + (icbb-ipcb)**2 + (icbc-ipcc)**2)

    totaldist=km-idstance

    if totaldist>0:
          print "You have enoph fuel to get to New York AirPort"
          print ipca1,ipcb2,ipcc3
          icounter=3

    if totaldist<=0:

         print "You dont have enoph fuel to get to New York AirPort please go to the nearest one or you will die"
         print ipca,ipcb,ipcc
         icounter=icounter+1` 
```

我怎样才能做到这一点

```
ipca=random.randrange(0,50)
ipcb=random.randrange(0,50)
ipcc=random.randrange(0,812) 
```

每次随机数都会循环下去，而不是每次其他数字。例如：没有：

```
812
512
321
815
600
700

```

是的：

```
800
600
550
320
50
1

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:47:13.867

如果您希望随机数减少，但仍希望它们均匀分布，则确实需要预先生成所有值，然后按降序对它们进行排序：

```
xs = [random.randrange(0, 50) for _ in range(4)]
xs.sort(reverse=True) 
```

以下是对所有三个随机值执行此操作的方法，用于`zip`从每个列表中获取一个值：

```
a_list = [random.randrange(0, 50) for _ in range(4)]
b_list = [random.randrange(0, 50) for _ in range(4)]
c_list = [random.randrange(0, 812) for _ in range(4)]

a_list.sort(reverse=True)
b_list.sort(reverse=True)
c_list.sort(reverse=True)

for ipca, ipcb, ipcc in zip(a_list, b_list, c_list):
    distance = math.sqrt(ipca*ipca + ipcb*ipcb + ipcc*ipcc)
    # ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:52:09.910

您已经控制了最大值，只需传入最后一个值即可获得小于该值的新值。

```
value = 1000
for x in xrange(10):
    value = random.randrange(value)
    print value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T02:40:40.247

您可以考虑之前的随机数：

```
number = random.randrange(0, 850)

while icounter < 4:
    if number == 0:
        print 'Number is zero'
        break

     number = random.randrange(0, number) 
```

如果你需要一个统一的分布，你必须使用这样的东西：

```
def random_numbers(n=6, minimum=0, maximum=850):
    numbers = [random.randrange(minimum, maximum) for i in xrange(n)]
    numbers.sort(reverse=True)

    return numbers 
```

# asp.net - 覆盖特定列的元素中的 CSS 样式

> ID：14289633
> 
> 赞同：-1
> 
> 时间：2013-01-12T02:38:34.277
> 
> 标签：asp.net, css, asp.net-mvc-3

我对 CSS/html 有点陌生。我正在尝试使用 tablesorter 包含这个 jquery 插件，它基本上可以让你的列排序。当单击表的标题以按升序/降序对列进行排序时，它看起来会更改类类型。我正在尝试遵循本教程：[http ://weblogs.asp.net/hajan/archive/2011/02/09/table-sorting-amp-pagination-with-jquery-in-asp-net-mvc.aspx](http://weblogs.asp.net/hajan/archive/2011/02/09/table-sorting-amp-pagination-with-jquery-in-asp-net-mvc.aspx)

所以在我的一个专栏中，能够排序是没有意义的，因为它都是一样的。我从一个 asp.net/mvc3 应用程序开始，我指的是最后一列，您可以在其中单击“详细信息”。由于这不会改变，我希望该列中没有向上/向下箭头。原始的 css 看起来像：

```
table.tablesorter {
    font-family:arial;
    background-color: #CDCDCD;
    margin:10px 0pt 15px;
    font-size: 11pt;
    width: 100%;
    text-align: left;
}
table.tablesorter thead tr th, table.tablesorter tfoot tr th {
    background-color: #e6EEEE;
    border: 1px solid #FFF;
    font-size: 10pt;
    padding: 4px;
}
table.tablesorter thead tr .header {
    background-image: url(themes/base/images/bg.gif);
    background-repeat: no-repeat;
    background-position: center right;
    cursor: pointer;
}
table.tablesorter tbody td {
    color: #3D3D3D;
    padding: 4px;
    background-color: #FFF;
    vertical-align: top;
}
table.tablesorter tbody tr.odd td {
    background-color:#F0F0F6;
}
table.tablesorter thead tr .headerSortUp {
    background-image: url(themes/base/images/asc.gif);
}
table.tablesorter thead tr .headerSortDown {
    background-image: url(themes/base/images/desc.gif);
}
table.tablesorter thead tr .headerSortDown, table.tablesorter thead tr .headerSortUp {
    background-color: #8dbdd8;
} 
```

所以我想我可以添加：

```
table.tablesorter thead .nostyle {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background-color: #8dbdd8;
} 
```

然后在我不想要样式的标题中，执行以下操作：

```
 <th class="#nostyle"></th> 
```

但这不起作用。我这样做对吗？或者，还有更好的方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:39:43.923

因为你的课不对。类`#nostyle`不匹配`.nostyle`。`.nostyle`匹配元素`class="nostyle"`

```
<th class="nostyle"></th> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:41:21.603

为什么不简单地禁用对这些列的排序？

[http://tablesorter.com/docs/#Configuration](http://tablesorter.com/docs/#Configuration)

查找“标题”设置：

headers Object null 用于按列控制的指令对象，格式为： headers: { 0: { option: setting }, ... } 例如，禁用对表的前两列进行排序： headers: { 0 ：{分拣机：假}，1：{分拣机：假}}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T02:40:38.903

如果你用过

```
table.tablesorter thead .nostyle 
```

你的班级应该是 'nostyle' 而不是 '#nostyle' 例如：

```
 <th class="nostyle"></th> 
```

# c - C中的_Thread_local存储类说明符？

> ID：14289634
> 
> 赞同：6
> 
> 时间：2013-01-12T02:39:13.293
> 
> 标签：c, c11, thread-local-storage, storage-class-specifier

[我在C How to Program 7th](https://rads.stackoverflow.com/amzn/click/com/013299044X)一书中读到了一个关于一些新的标准 C 存储类的注释，名为`_Thread_local`：

> 新的 C 标准增加了存储类说明符`_Thread_local`，这超出了本书的范围。

我在谷歌和这里寻找它，但没有出现。有人可以给我一些关于它的链接吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T02:51:19.637

标记有的变量`_Thread_local`被赋予“线程”存储持续时间——也就是说，它们在线程开始时分配，在线程结束时释放。这些变量对于线程来说是“本地的”，因为每个线程都有自己的变量副本。这与静态存储持续时间（整个程序的变量的一个实例）形成对比。有关详细信息，请参阅[http://en.cppreference.com/w/c/language/storage_class_specifiers 。](http://en.cppreference.com/w/c/language/storage_class_specifiers)

# c - 如果语句不起作用？

> ID：14289635
> 
> 赞同：0
> 
> 时间：2013-01-12T02:39:27.893
> 
> 标签：c, if-statement, scanf

我是编程的菜鸟。我只是想问一下以下代码有什么问题：

```
scanf("%i", &battlechoice);

printf("BCHOICE WAS:%i\n", battlechoice);

if (battlechoice=4) //fleeing
{
    fleechance=rand() % 100;
    if (fleechance <= 49)
    {
        printf("You attempt to flee...\n");
        sleep(2000);
        printf("Oh dear! You failed to flee! Gamover!\n");
        printf("Thank you for playing! -Anthony\n");
        sleep(7000);
        exit(0);
    } 
    else
    {
        printf("You succeeded in fleeing! You will be returned to town\nshortly...\n\n\n\n\n");
        sleep(3000);
        break;
    }
}        //end fleeing

else if (battlechoice=1) //attacking
{
    //player damage gen
    printf("You commence the attack...\n");
    sleep(750);
    damagemax = rand() % lvl * 1.4;

    damageoutcome = damagemax + damagemin;
} 
```

发生的事情是它正在执行两个 if 语句，即使它们都有不同的条件？怎么了？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T02:44:49.267

您将赋值运算符`=`与等于运算符混淆了`==`。改为这样写：

```
if (battlechoice == 4) 
```

等等。

一些 C 程序员使用“Yoda 条件”来避免在这些情况下意外使用赋值：

```
if (4 == battlechoice) 
```

例如这不会编译，捕捉错误：

```
if (4 = battlechoice) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:16:07.280

你正在写 if(battlechoice=4) 用 if(battlechoice==4) 更正它

因为 '=' 和 '==' 运算符都是不同的

'=' 是赋值运算符，'==' 是比较运算符

请参阅 C 中的运算符链接 [http://www.tutorialspoint.com/cplusplus/cpp_operators.htm](http://www.tutorialspoint.com/cplusplus/cpp_operators.htm)

# angularjs - $http 在 AngularJS 中上传文件进度

> ID：14289637
> 
> 赞同：25
> 
> 时间：2013-01-12T02:39:35.553
> 
> 标签：angularjs

如何从上传图像的 AngularJS $http POST 请求中获取“进度”事件？是否可以在客户端执行此操作，或者我是否需要服务器在接收数据时报告进度？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-01-30T06:26:20.890

使用纯角度：

```
function upload(data) {
    var formData = new FormData();
    Object.keys(data).forEach(function(key){formData.append(key, data[key]);});
    var defer = $q.defer();
    $http({
        method: 'POST',
        data: formData,
        url: <url>,
        headers: {'Content-Type': undefined},
        uploadEventHandlers: { progress: function(e) {
            defer.notify(e.loaded * 100 / e.total);
        }}
    }).then(defer.resolve.bind(defer), defer.reject.bind(defer));
    return defer.promise;
} 
```

和其他地方......

```
// file is a JS File object
upload({avatar:file}).then(function(responce){
    console.log('success :) ', response);
}, function(){
    console.log('failed :(');
}, function(progress){
    console.log('uploading: ' + Math.floor(progress) + '%');
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-14T18:08:02.783

You can also use the simple/lightweight [angular-file-upload](https://github.com/danialfarid/angular-file-upload) directive that takes care of these stuff. It supports drag&drop, file progress/abort and file upload for non-HTML5 browsers with FileAPI flash shim

```
<div ng-controller="MyCtrl">
  <input type="file" ng-file-select="onFileSelect($files)" multiple>
</div> 
```

JS:

```
//inject angular file upload directive.
angular.module('myApp', ['angularFileUpload']);

var MyCtrl = [ '$scope', '$upload', function($scope, $upload) {
  $scope.onFileSelect = function($files) {
    //$files: an array of files selected, each file has name, size, and type.
    for (var i = 0; i < $files.length; i++) {
      var $file = $files[i];
      $upload.upload({
        url: 'my/upload/url',
        file: $file,
        progress: function(e){}
      }).then(function(data, status, headers, config) {
        // file is uploaded successfully
        console.log(data);
      }); 
    }
  }
}]; 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-12T03:48:41.307

我不认为 $http.post() 可以用于此。

至于客户端，它应该与 HTML5 浏览器一起使用，但您可能必须创建自己的 XMLHttpRequest 对象和`onprogress`侦听器。请参阅[AngularJS：跟踪同时上传的每个文件的状态以](https://stackoverflow.com/questions/13591345/angularjs-tracking-status-of-each-file-being-uploaded-simultaneously)获取想法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-12T14:09:18.910

我认为 Angular 没有内置的东西来处理上传。

我认为你最好的选择是使用[jQuery File Upload 之](http://blueimp.github.com/jQuery-File-Upload/)类的东西。解决方案的一个想法是创建一个`{progress:0}`默认返回的服务，然后在其内部实现 jQuery File Upload 的进度更新回调，然后简单地不断更新进度。由于 Angular 的绑定，上传进度会同步。

```
angular.module('myApp.services', [])
  .factory('Uploader', function() {
  var uploaderService = {};

  var status = { progress: 0 };

  uploaderService.upload = function(inputEl) {
    inputEl.fileupload({
      /* ... */
      progressall: function (e, data) {
        status.progress = parseInt(data.loaded / data.total * 100, 10);
      }
    });
  };

  return uploaderService;
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-23T19:42:56.830

这是另一个解决方案：

```
window.XMLHttpRequest = (function (orig) {
    if (orig) {
        var intercept = [],
            result = function () {
            var r = new orig();

            if (r.upload) {
                $(r).on(
                    'abort error load loadend loadstart progress',
                    function (e) {
                        $(document).trigger('upload.XHR', e);
                    }
                );
            }

            if (intercept.length) {
                intercept[0].push({
                    request:r
                });
            }

            return r;
        };

        result.grab = function (f) {
            intercept.unshift([]);
            f();
            return intercept.shift();
        };

        return result;
    }

    return function () {
        try { return new ActiveXObject("Msxml2.XMLHTTP.6.0"); } catch (e1) {}
        try { return new ActiveXObject("Msxml2.XMLHTTP.3.0"); } catch (e2) {}
        try { return new ActiveXObject("Msxml2.XMLHTTP"); } catch (e3) {}
        throw new Error("This browser does not support XMLHttpRequest.");
    };
}(window.XMLHttpRequest)); 
```

笔记：

*   AngularJS 当前将引用存储`window.XMLHttpRequest`为私有`XHR`变量，然后像这样使用它`new XHR()`：我怀疑这会不会改变，所以上面类似 shim 的代码应该可以正常工作。

*   Mozilla 有一些扩展：`XMLHttpRequest`接受可选参数。上面的代码没有处理这个问题，但是 AngularJS 并没有使用这些扩展。

*   一种可能的用途（如果您想显示所有当前请求，并可能实现一些“取消”按钮）：

```
$(document).on('upload.XHR', function (_e, e) {
   switch (e.type) {
       // do your thing here
   }
}); 
```

*   另一种可能的用途：

```
var list = window.XMLHttpRequest.grab(function () {
    // start one or more $http requests here, or put some code
    // here that indirectly (but synchronously) starts requests
    $http.get(...);
    couchDoc.save();
    couchDoc.attach(blob, 'filename.ext');
    // etc
});

list[0].request.upload.addEventListener(...); 
```

*   或者，您可以将这两种方法与对上面代码的一些修改结合起来。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-04T10:50:21.507

你可以在我使用简单的角度函数上传文件和 $scope.progressBar 变量来检查上传进度的地方使用它...

```
$scope.functionName = function(files) {
   var file = files[0];
   $scope.upload = $upload.upload({
   url: 'url',
   method: 'POST', 
   withCredentials: true, 
   data: {type:'uploadzip'},
   file: file, // or list of files ($files) for html5 only 
 }).progress(function(evt) {
   console.log('percent: ' + parseInt(100.0 * evt.loaded / evt.total));
   $scope.progressBar = parseInt(100.0 * evt.loaded / evt.total);
 }).success(function(data, status, headers, config) {
   console.log('upload succesfully...')
 }).error(function(err) {
   console.log(err.stack);
 }) 
} 
```

# php - 文本区域的 ID 或类别？

> ID：14289644
> 
> 赞同：0
> 
> 时间：2013-01-12T02:40:28.030
> 
> 标签：php, jquery

我正在从头开始制作工具提示。工具提示的代码已添加到下方。

以下代码的问题：

工具提示在聚焦或模糊文本区域时淡入和淡出，但问题是，所有工具提示（对应于所有元素的工具提示）同时淡入和淡出。

第二个问题是文本区域的值在所有工具提示中都是相同的，即第一个文本区域的值。

**PHP**

```
<?php for($j; $j<5; $j++) { ?>
<tr>
<td style="position:relative"><?php echo CHtml::activeTextArea($PackageDeal,"package[$j][1]") ; ?>
    <div style="color:#0D776e;font-size:15px;font-family:calibri;padding:1%;margin:0 0.5%;;word-wrap:break-word;display:none;z-index:100;width:200px;mion-height:25px;position:absolute;top:30px;"></div>
</td>
</tr> 
<?php }?> 
```

**jQuery**

```
<script src="jquery-1.8.3.min.js"></script>
<script>$(document).ready(function(){
        $("textarea").focus(function(){
            $("td div").fadeIn(400).css({"background-color":"#E7F1F0","border":"1px solid #86BBB6"});
            $("td div").html($("textarea").val());
        });
        $("textarea").blur(function(){
            $("td div").fadeOut(400).css({"background-color":"#E7F1F0","border":"1px solid #86BBB6"});

        });
        $("textarea").keyup(function(){
            $("td div").html($("textarea").val());
            });
            });
</script> 
```

问题是我在**PHP** *for*循环中使用了这个工具提示，并且我尝试了各种方法以使工具提示能够正常工作。我需要询问是否应该为工具提示（div 元素）和文本区域保留一个 Id / Class，以便显示的文本在所有方面都不同，并且所有这些都不会同时显示。另外我想知道这是否是与 jquery、php 或 html 相关的问题。提前致谢！

PS工具提示适用于单个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:46:08.333

因为您的页面将有很多`<td><div></div></td>`来自生成的 HTML（由 PHP）生成的 s 和所有匹配`td div`项，所以如果您要调用，它们都会显示`$('td div').//so on`

因此，您需要指定要显示哪一个，并且在您的情况下，您希望靠近元素`focused`or的那个`blurred`。jQuery 擅长于此。

```
$("textarea").focus(function(){
    var targetArea = $(this);
    targetArea.siblings('div').fadeIn(400).css({"background-color":"#E7F1F0","border":"1px solid #86BBB6"})
        .html(targetArea.val());
}); 
```

此外，根据@joeltine 的回答，您还需要仅显示该文本区域的 html，因此也可以`$(this)`在您的`html`调用参数中使用相同的内容。

为了性能，您可能希望将它们链接在一起并缓存`$(this)`到上面的变量 -`$`构造函数很昂贵。

还有一件事，你似乎设置`css`了它何时淡入淡出，但它们不是必需的 - 当你可以将它设置在一个`css`文件中时。如果您事先设置它们的样式，则无法看到它们的样式，并且`display: none`无论如何它们都不会显示（由 ）。

```
$("textarea").focus(function(){
    var targetArea = $(this);
    targetArea.siblings('div').fadeIn(400).html(targetArea.val());
}); 
```

在 CSS 中：

```
/* You really want to apply this css to all "td div" for this one! */
td div {
   background-color: #E7F1F0;
   border: 1px solid #86BBB6;
   /* More styles for tooltips, such as display: none; position: relative; etc... */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:47:41.607

将 a`class`用于您的`textarea`, ie`myTxtArea`并使用`$(this)`like

```
$("textarea.myTxtArea").focus(function(){
   var el=$(this);
   el.closest("td").find("div").fadeIn(400).css({"background-color":"#E7F1F0","border":"1px solid #86BBB6"});
   el.closest("td").find("div").html(el.val());
}); 
```

[**一个例子在这里**](http://jsfiddle.net/r8yxj/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T02:48:53.923

@luiges90 解决了您的一个问题...我还将提到您的工具提示都显示相同值（页面上第一个文本区域中的值）的原因是因为您的选择器`$('textarea')`正在选择页面上的所有文本区域。当你调用 .val() 时，默认情况下，它只返回集合中第一个元素的值。简而言之，在您的焦点事件中，只需使用以下内容：

```
$("textarea").focus(function(){
    var $this = $(this);
    $this.siblings('div').fadeIn(400).css({"background-color":"#E7F1F0","border":"1px solid #86BBB6"})
        .html($this.val());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T03:08:12.090

这就是我所说的：

**HTML**

```
<table>
  <tbody>
    <tr>
      <td>
        <textarea class="editable">This is a texarea.</textarea>
        <div class="uneditable"></div>
      </td>
    </tr>
    ... More rows ...
    <tr>
      <td>
        <textarea class="editable">This is a texarea.</textarea>
        <div class="uneditable"></div>
      </td>
    </tr>
  </tbody>
</table> 
```

**jQuery**

注意`textarea.editable`、`text.uneditable`、`$(this).siblings('.uneditable')`和的使用`$(this).next('div.uneditable')`。这里`div.uneditable`有点无缘无故，但我提供它作为过度选择的演示（如果还有一个`span.uneditable`或任何*下一步*与`div.uneditable`...一起流动）。

```
$(document).ready(function () {
  var $editable = $('textarea.editable');

  $editable
      .focus(focus)
      .blur(blur)
      .keyup(keyup);

  function focus() {
    $(this).siblings(".uneditable").fadeIn(400).css({
      "background-color": "#E7F1F0",
      "border": "1px solid #86BBB6"
    })
    .html($(this).val());
  }

  function blur() {
    $(this).siblings('.uneditable').fadeOut(400).css({
      "background-color": "#E7F1F0",
      "border": "1px solid #86BBB6"
    });
  }

  function keyup() {
    $(this).next("div.uneditable").html($(this).val());
  }
}); 
```

[http://jsfiddle.net/fuFuT/](http://jsfiddle.net/fuFuT/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-12T02:48:20.177

之所以全部同时走，是因为你全选，`$("textarea")`返回所有匹配的元素。

为了防止这种行为，请创建它（为了便于阅读，我没有包含事件函数）

```
// Do things for each matching elements, separately
$("textarea").each(function() {
    $(this).focus();
    $(this).blur();
    $(this).keyup();
}); 
```

至于工具提示的 id / 类：通常最好将 CSS 保留在外部，因此在这种情况下，为工具提示提供 CSS 类会更好。

# objective-c - 地图坐标不解码

> ID：14289652
> 
> 赞同：2
> 
> 时间：2013-01-12T02:41:10.057
> 
> 标签：objective-c, mkannotation, nscoding, nsarchiving

在我的应用程序中，我试图保存地图上的图钉，以便用户在应用程序终止后打开应用程序时它们就在那里。我已经使我的 mkAnnotation 类符合 NSCoding，并实现了两个必需的方法。注释都存储在单例类的 NSMutableArray 中，所以我真的只是想将数组保存在单例类中。一切都被很好地编码，但我认为它们没有被解码。这是一些代码：这是我的 MKAnnotation 类：

```
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

@interface MapPoint : NSObject <MKAnnotation, NSCoding>
{
}

- (id)initWithAddress:(NSString*)address
        coordinate:(CLLocationCoordinate2D)coordinate
                title:(NSString *)t;

@property (nonatomic, readwrite) CLLocationCoordinate2D coordinate;

//This is an optional property from MKAnnotataion
@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly, copy) NSString *subtitle;
@property (nonatomic) BOOL animatesDrop;
@property (nonatomic) BOOL canShowCallout;

@property (copy) NSString *address;
@property (nonatomic, copy) NSString *imageKey;
@property (nonatomic, copy) UIImage *image;

@end 

@implementation MapPoint

@synthesize title, subtitle, animatesDrop, canShowCallout, imageKey, image;
@synthesize address = _address, coordinate = _coordinate;

-(id)initWithAddress:(NSString *)address
       coordinate:(CLLocationCoordinate2D)coordinate
            title:(NSString *)t {
    self = [super init];

    if (self) {
        _address = [address copy];
        _coordinate = coordinate;

        [self setTitle:t];

        NSDate *theDate = [NSDate date];

        subtitle = [NSDateFormatter localizedStringFromDate:theDate
                                                  dateStyle:NSDateFormatterShortStyle
                                                  timeStyle:NSDateFormatterShortStyle];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)aCoder {

    [aCoder encodeObject:_address forKey:@"address"];

    NSLog(@"ENCODING coordLatitude %f coordLongitude %f ", _coordinate.latitude, _coordinate.longitude);
    [aCoder encodeDouble:_coordinate.longitude forKey:@"coordinate.longitude"];
    [aCoder encodeDouble:_coordinate.latitude forKey:@"coordinate.latitude"];

    [aCoder encodeObject:title forKey:@"title"];
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super init];
    if (self) {
        [self setAddress:[aDecoder decodeObjectForKey:@"address"]];

        NSLog(@"DECODING coordLatitude %f coordLongitude %f ", _coordinate.latitude, _coordinate.longitude);
        _coordinate.longitude = [aDecoder decodeDoubleForKey:@"coordinate.longitude"];
        _coordinate.latitude = [aDecoder decodeDoubleForKey:@"coordinate.latitude"];

        [self setTitle:[aDecoder decodeObjectForKey:@"title"]];
    }
    return self;
}

@end 
```

这是我的单身课程：

```
#import <Foundation/Foundation.h>
@class MapPoint;

@interface Data : NSObject
{
NSMutableArray *_annotations;
}

@property (retain, nonatomic) NSMutableArray *annotations;

+ (Data *)singleton;
- (NSString *)pinArchivePath;
- (BOOL)saveChanges;

@end

@implementation Data

@synthesize annotations = _annotations;

+ (Data *)singleton {
    static dispatch_once_t pred;
    static Data *shared = nil;
    dispatch_once(&pred, ^{
        shared = [[Data alloc] init];
        shared.annotations = [[NSMutableArray alloc]init];
    });
    return shared;
}

- (id)init {
    self = [super init];
    if (self) {
        NSString *path = [self pinArchivePath];
        _annotations = [NSKeyedUnarchiver unarchiveObjectWithFile:path];
        if (!_annotations) {
            _annotations = [[NSMutableArray alloc]init];
        }
    }
    return self;
}

- (NSString *)pinArchivePath {
    NSArray *cachesDirectories = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);

    NSString *cachesDirectory = [cachesDirectories objectAtIndex:0];

    return [cachesDirectory stringByAppendingPathComponent:@"pins.archive"];
}

- (BOOL)saveChanges {
    NSString *path = [self pinArchivePath];

    return [NSKeyedArchiver archiveRootObject:[Data singleton].annotations
                                       toFile:path];
}

@end 
```

在地图视图控制器上的 viewDidLoad 方法中，我尝试将注释放置在地图上的单例数组中：

```
for (MapPoint *mp in [Data singleton].annotations) {
        [_worldView addAnnotation:mp];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:29:11.393

主要问题在于`singleton`这些行中的方法：

```
dispatch_once(&pred, ^{
    shared = [[Data alloc] init];
    shared.annotations = [[NSMutableArray alloc]init]; //<-- problem line
}); 
```

该`shared = [[Data alloc] init];`行解码并初始化`annotations`数组。

然后该`shared.annotations = [[NSMutableArray alloc]init];`行重新创建并重新初始化`annotations`数组**，从而丢弃刚刚解码的注释**，因此单例总是返回一个空数组。

删除`shared.annotations = [[NSMutableArray alloc]init];`线。

正如评论中已经提到的，另一个引起混淆的小问题是`NSLog`坐标被解码的位置。`NSLog`应该是在解码完成*之后。*

# forms - CakePHP 获取表单查询，错误：发生内部错误

> ID：14289655
> 
> 赞同：1
> 
> 时间：2013-01-12T02:41:22.913
> 
> 标签：forms, cakephp, get

我使用`get`表单来搜索关键字。(CakePHP 2.2.5)

我看到奇怪的问题。首先来自[CakePHP 文档](http://book.cakephp.org/2.0/en/controllers/request-response.html#accessing-querystring-parameters)：`$foo = $this->request->query('value_that_does_not_exist');`给

> 错误：发生内部错误。
> 
> > 方法查询不存在

我在控制器和视图中都试过了。根据手册，它可用于：

> ...以无错误的方式读取 url 查询数组。

顺便提一句，

```
$foo = $this->request->query['value_that_exist']; 
```

工作正常，但我必须用“isset()”检查它</p>

它是一个 CakePHP 错误吗？我用全新`2.2.5`安装进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:32:28.767

不，这不是错误。该`query()`方法是在 CakePHP 2.3.0-beta 中引入的（参见[http://bakery.cakephp.org/articles/lorenzo/2012/10/28/cakephp_2_3_0-beta_released#cakerequest](http://bakery.cakephp.org/articles/lorenzo/2012/10/28/cakephp_2_3_0-beta_released#cakerequest)），因此它在 CakePHP 2.2.5 中不可用.

# c++ - 如何将 C++ 库作为共享对象文件 (.so) 加载到 Python 中？

> ID：14289656
> 
> 赞同：0
> 
> 时间：2013-01-12T02:41:24.737
> 
> 标签：c++, python

我是一个 Python 人，为一个客户构建一个基于 Linux 的 Web 服务，该客户希望我与一个小型 C++ 库进行交互，他们目前正在与一堆基于 Windows 的 VB 应用程序一起使用该库。

他们向我保证，这个库相当简单（我猜就他们而言），他们只需要知道如何最好地编译并将它交付给我，这样我就可以在 Linux 下的 Python 中使用它。

我已经阅读了一些关于`ctypes`库和其他选项（SWIG 等）的信息，但由于某种原因，我还没有真正理解这个概念，并且仍然不知道如何告诉他们我需要什么。

我很确定让他们用 , etc 重写它`Python.h`，所以我希望有一种方法可以简单地让他们在 Linux 上将其编译为 .so 并将其导入 Python。这样的事情可能吗？如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:46:21.593

不，这样的事情是不可能的。

要么他们必须提供 Python 绑定，要么你提供。你们中的任何一个都可以通过以下任何一种方式做到这一点：

*   直接使用`<Python.h>`写一个C扩展模块。
*   `boost::python`用于使编写扩展模块更容易（尤其是当他们使用 C++ 而不是 C 时）。
*   使用 SWIG、SIP 或类似工具部分自动化扩展模块的编写。
*   用于以[`Cython`](http://www.cython.org)类 Python 语言而不是 C 或 C++ 编写扩展模块。
*   在 Python 中使用`ctypes`。

对于非常简单的情况（特别是如果他们实际上将 C 接口导出到他们的 C++ 代码），`ctypes`可能是最简单的解决方案。否则，我建议先看看 Cython。但无论如何，你将不得不围绕其中一种解决方案思考——或者说服他们这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:45:42.013

由于 C++ ABI 的复杂性（例如名称修改），使用 ctypes 直接从 Python 加载 C++ 库通常很困难且特定于平台。

我建议您创建一个可以轻松地用 ctypes 包装的简单 C API，或者使用 SWIG 为 Python 生成包装器类型和适当的扩展模块。

# python - 性能问题，Python vs C

> ID：14289657
> 
> 赞同：0
> 
> 时间：2013-01-12T02:41:32.410
> 
> 标签：python, c, python-imaging-library

我正在使用 PIL 进行图像处理，并且尝试将彩色图像转换为灰度图像，因此我编写了一个 Python 函数来执行此操作，同时我知道 PIL 已经`convert`为此提供了一个函数。

但是我用 Python 编写的版本大约需要 2 秒才能完成灰度，而 PIL 的转换几乎是即时的。所以我阅读了 PIL 代码，发现我编写的算法几乎相同，但 PIL`convert`是用 C 或 C++ 编写的。

那么这是导致性能不同的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:07:19.933

是的，用 Python 和 C 编写相同的算法，C 实现会更快。对于通常称为 CPython 的 Python 解释器来说，这绝对是正确的。另一个实现 PyPy 使用 JIT，因此可以实现令人印象深刻的速度，有时与 C 实现一样快。但是在CPython下运行，Python会比较慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T05:11:05.417

如果要进行图像处理，可以使用

OpenCV(cv2)、SimpleCV、NumPy、SciPy、Cython、Numba ...

OpenCV、SimpleCV SciPy 已经有很多图像处理程序。

NumPy 可以以 c 速度对数组进行操作。

如果您想要 Python 中的循环，您可以使用 Cython 将带有静态声明的 Python 代码编译到外部模块中。

或者你可以使用 Numba 进行 JIT 转换，它可以将你的 python 代码转换为机器二进制代码，并且会给你接近 c 的速度。

# c# - 在 Where() 子句中使用 FirstOrDefault()

> ID：14289658
> 
> 赞同：0
> 
> 时间：2013-01-12T02:41:36.340
> 
> 标签：c#, sql-server, linq, entity-framework, linq-to-sql

当我知道它应该返回至少一个结果时，我有一个 LINQ 查询没有返回任何结果。我正在动态构建查询。在我到达过滤掉所有结果的行之前，我查看了调试器中的结果集，它包含数百行。在这一行之后，当它确实应该包含至少一个时，它包含 0。

```
query = query.Where(x => 
    x.Lineages.FirstOrDefault().Sire.Contains(options.PedigreeContains)); 
```

在这种情况下，“x”表示一个名为“Horse”的实体。'options.PedigreeContains' 只是一个字符串值。Lineages 表如下所示：

```
ID         HorseID         Sire       Dam        etc... 
```

我什至可以在调试器中拉出一个 Horse 实体（我知道应该返回一个作为结果的实体），检查 Lineages 属性并查看它已完全填充，包括与我的搜索匹配的 Sire 值。所以一切似乎都应该正常工作，除了我正在使用的 LINQ 查询显然存在一些问题。

有没有人认为我正在做的事情有任何本质上的错误，这会导致过滤掉我知道应该存在的结果？

**编辑：**为澄清起见，这是一对一的关系。我知道 Lineages 对象存在，我知道只有一个，而且我知道它匹配。只是由于某种原因它返回零结果，所以我认为我编写查询的方式可能存在问题。如果该查询应该按照其编写的方式工作（减去所有额外的“可能性”，如果不存在血统，不止一个等），那么它一定是我代码中其他地方的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:56:30.127

实际上回答您的问题：**不。您的查询本质上没有任何问题。**它一定是查询构造、数据库结构或数据中其他地方的问题。

调试时，不要枚举和验证结果计数，而是复制`query`表达式值并查看生成的 SQL 的样子。您可以在更改`IQueryable query`. 其他建议，例如 @Jalalx 使用 .Any() 来避免 @John Saunders 指出的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:51:05.887

`Lineages`如果返回的第一个不`Sire`包含所需的内容，则您无法订购`option.PedigreeContains`. 在这种情况下，结果集将为空，而不管`Sire`.`Lineages`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T02:44:16.957

如果`FirstOrDefault`返回“默认”怎么办？你会得到一个`NullReferenceException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T02:49:28.620

如果您在拥有它的地方执行 FirstOrDefault() ，那么您不是在可能有许多公牛中选择第一个，所以如果后面的一个与您的匹配，您将找不到它？

```
query = query.Where(x => 
    x.Lineages.FirstOrDefault(lineage => lineage.Sire.Contains(options.PedigreeContains))).Sire; 
```

# extjs - 为什么在 Sencha touch 2 上 TabPanel 默认布局是垂直的？

> ID：14289659
> 
> 赞同：0
> 
> 时间：2013-01-12T02:41:40.173
> 
> 标签：extjs, tabpanel

我正在跟进 Sencha touch 教程并制作简单的 Tabbar。
但是tabbar的布局顺便显示为垂直的。
反正我不能换成水平的。
我做错了什么吗？

教程是[http://senchalearn.github.com/Tabs-and-Toolbars/](http://senchalearn.github.com/Tabs-and-Toolbars/)
我的代码在下面..

索引.html

```
<!DOCTYPE html>
<html>
<head>
    <title>Sencha</title>
    <link rel="stylesheet" href="app.css" type="text/css">

    <script type="text/javascript" src="touch/sencha-touch-all.js"></script>
    <script type="text/javascript">
        Ext.Loader.setConfig({
            enabled: true,
            pathes: {'Ext':'touch/src'}
        });
    </script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body></body>
</html> 
```

应用程序.js

```
Ext.application({
    name: 'Sencha',

    views: ['Main'],

    launch: function() {
        Ext.Viewport.add({
            xclass: 'Sencha.view.Main'
        });
    }
}); 
```

主.js

```
Ext.define('Sencha.view.Main', {
    extend: 'Ext.TabPanel',
    config: {
        tabBar: {
            docked: 'bottom',
            layout: {
                pack: 'center'
            }
        },
        items: [
            {title: 'Home', iconCls: 'more'},
            {title: 'Schedule'},
            {title: 'Setting'}
        ]
    }
}); 
```

但是结果显示是这样的..

[http://goo.gl/YoPPr](http://goo.gl/YoPPr)

如何将布局更改为水平？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:51:54.960

```
Ext.define('Sencha.view.Main', {
extend: 'Ext.TabPanel',
config: {
    layout: 'hbox',
    ...
} 
```

# ruby-on-rails - 如何根据表中的当前值检查rails中的单选按钮标签

> ID：14289667
> 
> 赞同：0
> 
> 时间：2013-01-12T02:42:34.317
> 
> 标签：ruby-on-rails, model, radio-button, return-value, checked

我有一组产品设置。对于每个设置，我想添加一对单选按钮“启用和禁用”来表示设置状态。用户可以单击按钮更改 current_setting 表中的设置状态。我有两个产品 A 和 B，状态为与A相关的所有设置都是“启用”，B的所有状态都是“禁用”。我的问题是，当我刷新网页时，A和B的单选按钮是相同的。它们都被选中“禁用”。

我测试了以下功能： CurrentSetting.setting_enabled？和 DefaultSetting.default_enabled?。测试结果表明，这些函数返回都可以返回预期的结果，即与A相关的所有设置的启用状态为真（“启用”），对于B为假（“禁用”）。但是 A 的按钮被选中“禁用”。

刷新网页后，如何使单选按钮显示每个设置的当前启用状态？有人可以帮我一个忙吗？

视图中的 rhtml 是：

```
 <%@settings.each do |setting|%>
     <%setting_enabled = CurrentSetting.setting_enabled?(@product_id,setting.id)%>
        <!-- Setting on -->
        <%= radio_button_tag("settings[#{setting.key_name}]", "enabled", :checked=> setting_enabled) %>
        <!-- Setting off -->
        <%= radio_button_tag("settings[#{setting.key_name}]", "disabled", :checked=> !setting_enabled) %>
        <%= "#{setting.display_name}" %> 
        <br/>
      <%end%> 
```

模型 current_setting.rb 中的函数是：

```
 def self.setting_enabled? db_id, default_setting_id
         current_setting = CurrentSetting.find(:first,
                   :conditions => ['db_id = ? and default_setting_id= ? ', db_id, default_setting_id ])

        if  current_setting==nil
           return DefaultSetting.default_enabled?(default_setting_id)   #return default enabled state for this setting 
        else
           return current_setting.enabled
        end 
     end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:54:24.210

您在评论中提到您正在运行 1.2.x 版本的 rails。所以基于此： [http ://apidock.com/rails/v1.2.0/ActionView/Helpers/FormTagHelper/radio_button_tag](http://apidock.com/rails/v1.2.0/ActionView/Helpers/FormTagHelper/radio_button_tag)

```
<%= radio_button_tag("settings[#{setting.key_name}]", "enabled", setting_enabled) %>
<%= radio_button_tag("settings[#{setting.key_name}]", "disabled", !setting_enabled) %> 
```

# iphone - 如何在collectionView中重新加载补充视图

> ID：14289669
> 
> 赞同：30
> 
> 时间：2013-01-12T02:42:57.590
> 
> 标签：iphone, ios, objective-c, ipad

是否有一种简单的方法可以仅在 UICollectionViewFlowLayout 中重新加载补充视图？我不想重新加载整个事情。有可能这样做吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-12T05:01:37.747

查看文档后，我不确定是否要重新加载单个补充视图，但您可以使用`reloadSections:`更新 UICollectionView 中的 1 个或多个部分。([文档](https://developer.apple.com/documentation/uikit/uicollectionview#//apple_ref/doc/uid/TP40012177-CH1-SW39)) 因此，当节标题需要更新时，您可以调用：

目标-C：

```
[self.collectionView reloadSections:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, 3)]]; 
```

迅速：

```
self.collectionView?.reloadSections(IndexSet(0 ..< 3)) 
```

恰好调用：

```
- (UICollectionReusableView *)collectionView: (UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath {

       //Place logic for handling update here...
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-25T03:01:08.613

如果您想从控制器更改补充视图的布局或大小，请使用`[self.collectionView.collectionViewLayout invalidateLayout]`。如果您只想刷新补充视图，请使用。`[supplementaryView setNeedsDisplay]`如果补充视图很复杂和/或将更改其尺寸，请使用两者。

# android - 读取资产文件夹中的文本文件（phonegap）

> ID：14289670
> 
> 赞同：2
> 
> 时间：2013-01-12T02:43:01.443
> 
> 标签：android, cordova, file-handling

我想阅读放置在我的资产文件夹中的文本文件。我不想将该文件复制到 /sdcard 或手机内存。是否可以读取该文件。如果是的话..请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:21:28.923

使用 Ajax 很容易。试试下面的代码：

```
$.ajax({
    url:"myFile.txt", // relative path to www folder
    type:"get",
    contentType:"application/text",
    success: function(text){
        //todo: 
    }
}); 
```

# magento-1.7 - 如何使用折扣代码将金额奖励添加到购物车

> ID：14289671
> 
> 赞同：0
> 
> 时间：2013-01-12T02:43:04.223
> 
> 标签：magento-1.7, discount

我正在尝试建立购买商店。因此，它与传统网站相反。我需要创建优惠券，为向我销售产品的客户提供奖励。但是，折扣代码不允许这样做。你知道我需要在哪里更改 phtml、xml 或 php 文件或需要更改的文件。

例如，

如果客户使用促销代码出售他们的商品，我们将额外提供 5 美元。但我想知道他们使用了哪些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:28:19.740

您需要为此使用自定义扩展。您需要创建或从第三方购买。如果您已经有那个，请提及。

# android - 如何在listview android中动态显示图像？

> ID：14289679
> 
> 赞同：2
> 
> 时间：2013-01-12T02:44:21.503
> 
> 标签：android, image, listview

（我在 res/drawable 中有图像，数据库中的图像名称）我已经完成将图像从 res/drawable 显示到列表视图，但图像显示相同的图片..我想显示与其他图像不同的图像....

如何从可绘制文件夹更改图像 ID（使用 setImageResource()）。我的可绘制文件夹包含超过 1 个图像，我想使用已存储的数据库中的名称更改这些图像..

这是我的教程中的代码...

> //数据库的结果（image2.jpg）

```
public KontakItemListBaseAdapter(Context context, ArrayList<KontakItemDetails> results) {
    itemDetailsrrayList = results;
    l_Inflater = LayoutInflater.from(context);
}

public int getCount() {
    return itemDetailsrrayList.size();
}

public Object getItem(int position) {
    return itemDetailsrrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    try{
    ViewHolder holder;
    if (convertView == null) {
        convertView = l_Inflater.inflate(R.layout.kontak_details_view, null);
        holder = new ViewHolder();
        holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
        holder.txt_itemDescription = (TextView) convertView.findViewById(R.id.itemDescription);
        holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txt_itemName.setText(itemDetailsrrayList.get(position).getName());
    holder.txt_itemDescription.setText(itemDetailsrrayList.get(position).getItemDescription());

    holder.itemImage.setImageResource(R.drawable.iddy);

    }catch (Exception ex) {
        throw new Error("kontakitemlistadapter :"+ex.toString());

    }
    return convertView;
}

static class ViewHolder {
    TextView txt_itemName;
    TextView txt_itemDescription;
    TextView txt_itemPrice;
    ImageView itemImage;
} 
```

我想我的问题在这里..

> > holder.itemImage.setImageResource(R.drawable.iddy);

如何将 R.drawable.iddy 更改为路径名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:10:11.167

您可以将数组中的所有 Drawables id 获取为：

```
private Integer[] images;

Field[] list = R.drawable.class.getFields();
int count = 0, index = 0, j = list.length;

images = new Integer[count];
try {
   for(int i=0; i < j; i++)
    images[index++] = list[i].getInt(null);
 } catch(Exception e) {} 
```

现在使用 images Array 将 Adapter 的 getView 方法中的 Image src 设置为：

```
holder.itemImage.setImageResource(images[position]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:09:26.593

根据上下文更改可绘制参考

```
holder.itemImage.setImageResource(R.drawable.iddy); 
```

# android - 什么小部件可用于实现可点击的轮盘赌桌？

> ID：14289681
> 
> 赞同：1
> 
> 时间：2013-01-12T02:44:27.727
> 
> 标签：android, android-widget

在 Java Swing 中，我可以使用 JPanel 自定义表格中每个区域的单击按钮；但是，对于 Android，没有这样的等效 JPanel。那么我应该使用什么小部件来实现这种行为呢？更具体地说，表格中的每个数字都应该是可点击的。 ![在此处输入图像描述](../Images/6e2ea15a17b59b2b7e80465767fe8f5d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:20:36.050

You could make them custom buttons in a `TableLayout` or use a [GridView](http://developer.android.com/guide/topics/ui/layout/gridview.html) and incorporate it like a `ListView`

# prolog - 如何计算每个数字的频率？

> ID：14289686
> 
> 赞同：3
> 
> 时间：2013-01-12T02:45:00.893
> 
> 标签：prolog, swi-prolog, dcg

有一个大数据文件，其格式为：

```
111111  11 22 33 44 55 66 77
222222  21 22 23 29 99 98 00
......  .. 
```

那么我如何使用 prolog 来计算每个数字的频率？

真挚地！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T02:56:34.400

你有两个问题：解析文件和计算频率。

对于解析文件，我建议使用`library(pio)`. 以这种方式，您可以使用[dcg](/questions/tagged/dcg "显示标记为“dcg”的问题")来处理文件。因此，我建议您先了解 DCG。它们是 Prolog 描述/生成和解析文本的方式。它们甚至比这更笼统。但首先，只是这样看待它。

然后，您可以结合计算频率。为了使这对于非常大的数据也有效，请参阅[此问题](https://stackoverflow.com/questions/12939794/stack-overflow-in-prolog-dcg-grammar-rule-how-to-handle-large-lists-efficiently/12942551)。

# c++ - 为什么我删除两次相同的内存时没有错误？

> ID：14289694
> 
> 赞同：3
> 
> 时间：2013-01-12T02:46:52.543
> 
> 标签：c++, memory

MySinglyLinkedList.h：

```
#include <iostream>

template<class T> class LinkedList;

template<class T>
class LinkedNode {   
 public:
  LinkedNode(T new_data):data(new_data) {; }

 private:
  friend class LinkedList<T>; 
  LinkedNode<T> *next;
  T data;
};

template<class T>
class LinkedList {   
 public:
  LinkedList();
  ~LinkedList();
  void PushNode(T new_data);
  void Delete(LinkedNode<T> *pnode);
  void Show();

 private:
  LinkedNode<T> *head; //Head pointer
  LinkedNode<T> *tail; //Tail pointer
  int length;          //Length of the list
};

//Initialize an empty list when creating it
template<class T>
LinkedList<T>::LinkedList()
{
  head = tail = NULL;
  length = 0;
}

//delete all the nodes when deconstructing the object
template<class T>
LinkedList<T>::~LinkedList()
{
  LinkedNode<T> *ptr = head;
  while (ptr)
  {
    LinkedNode<T> *ptr_del = ptr;
    ptr = ptr->next;
    Delete(ptr_del);
  }
}

//Add one node to the tail of the list
template<class T>
void LinkedList<T>::PushNode(T new_data)
{
  LinkedNode<T> *pnew_node = new LinkedNode<T>(new_data);
  pnew_node->next = NULL;
  if (!length) {
    head = tail = pnew_node;
    length++;
  } else {
    tail->next = pnew_node;
    tail = pnew_node;
    length++;
  }
}

//Delete the node pointed by pnode
template<class T>
void LinkedList<T>::Delete(LinkedNode<T> *pnode)
{
  LinkedNode<T> *ptr = head;
  if (pnode==head) {
    head = pnode->next;
  } else {
    while(ptr->next != pnode)
    {
      ptr = ptr->next;
    }    
    ptr->next = pnode->next;
  }
  if(pnode == tail)
     tail = ptr;

  delete pnode;
  length--;
}

template<class T>
void LinkedList<T>::Show()   //Print all the contents in the list
{
  LinkedNode<T> *pnode = head;
  while(pnode)
  {
    std::cout << pnode->data << std::endl;
    pnode = pnode->next;
  }
  std::cout << "In total: " << length << std::endl;  
} 
```

主要功能如下：

```
#include "MySinglyLinkedList.h"
#include <cstdlib>
#include <ctime>

using namespace std;

int main(int argc, char *argv[])
{
  //list_len is the length of the list
  int list_len = 5;
  srand(time(0));
  if (argc > 1)
    list_len = atoi(argv[1]);

  LinkedList<int> test_list;   //Create the first list: test_list

  for (int i = 0; i < list_len; i++)
  {
    //The elements in the list are random integers
    int cur_data = rand()%list_len;      
    test_list.PushNode(cur_data);
  }
  test_list.Show();

  LinkedList<int> test2 = test_list;  //Create the second list: test2
  test2.Show();

  return 0;
} 
```

由于我在这里没有定义任何复制构造函数，因此在创建第二个列表时将调用默认的复制构造函数并进行位复制，结果`test_list`将`test2`指向同一个链表。因此，当两个对象被解构时，列表的第一个节点将被删除两次。但事实是，当我使用 GCC 编译程序时，并没有发生任何错误，并且它在 Linux 中运行成功。**我不明白为什么没有发生错误。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T02:58:42.033

删除一个已经被删除的指针会导致未定义的行为，所以任何事情都可能发生。如果您想*确保*没有任何事情发生，请在删除后将指针设置为 null。删除`null`什么都不做，也不会导致错误。

参见：[C++ 删除（维基百科）](http://en.wikipedia.org/wiki/Delete_(C%2B%2B))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:03:49.383

根据 Diego 的回答，C++ 标准允许删除 NULL 指针。编译器无法知道第二次删除指针时将包含什么值（即它可能为 NULL），因此它别无选择，只能允许它符合标准。

# python - python multiprocessing.connection 报告“AuthenticationError：收到的摘要错误”

> ID：14289701
> 
> 赞同：1
> 
> 时间：2013-01-12T02:48:31.613
> 
> 标签：python, multiprocessing

我有一个 python 应用程序，它创建一个子进程，打开一个套接字与之通信，然后在套接字上创建一个 multiprocessing.connection 对象。连接对象使用共享密钥（随机生成）和 hmac 来确保不允许其他进程通过连接进行通信。

在 Linux 上，这可以完美运行。在 Windows 上，我收到错误：

```
multiprocessing.AuthenticationError: digest received was wrong 
```

密钥是一串随机生成的位，在通过其标准输入发送到子进程之前被腌制：

```
authkey = ''.join([chr(random.getrandbits(7)) for i in range(20)]) 
```

我已经仔细检查了连接两端的密钥是否匹配：

```
 print "key:", ' '.join([str(ord(x)) for x in authkey]) 
```

服务器启动：

```
 l = multiprocessing.connection.Listener(
         ('localhost', int(port)), authkey=authkey) 
```

..客户端开始于：

```
 c = multiprocessing.connection.Client(
         ('localhost', int(port)), authkey=authkey) 
```

两个进程都在同一台机器上运行，使用相同版本的 python。

更奇怪的是，我发现如果我修复了密钥（比如 authkey='test'），那么我在第一次运行程序时仍然会收到 AuthenticationError，但在后续运行时不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:54:17.877

解决方案似乎是使用`os.urandom`生成密钥而不是上面显示的方法。我不知道为什么这会产生任何影响——无论哪种情况，我们都在传递随机字节字符串。从安全的角度来看，该解决方案也更正确，因为 getrandbits 不适合加密使用。

# php - 如何在没有 SSL 的情况下保护用户身份验证？

> ID：14289704
> 
> 赞同：-1
> 
> 时间：2013-01-12T02:49:19.047
> 
> 标签：php, android, authentication, ssl

我正在构建一个 Android 云应用程序，要求用户在远程 PHP/MySql 服务器上进行身份验证。就目前而言，我正在使用基本的 http post 请求来执行此操作。我知道这很危险，因为任何人都可以嗅探通信并窃取凭据。除了使用 https/SSL 来解决这个问题之外，还有其他解决方案吗？

如果我必须使用 SSL，是否有一个会话管理库可以让我在每次用户联系服务器时无需通过 SSL 重新发送用户凭据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:01:06.303

[这个答案应该可以帮助你](https://stackoverflow.com/questions/6947221/secure-authentication-without-ssl)。里面有几个很好的答案。简而言之：您有一些选择，但最好还是使用 SSL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:06:40.700

请记住，即使您获得了安全身份验证，所有其他内容仍然容易受到嗅探。HTML 文件以纯文本形式返回，其中可能包含敏感信息。SSL 是*专门*为这项工作而设计的。

您无需重新发送凭据，SSL 是相当透明的“即插即用”。

使用 PHPSESSID（默认为`session_start()`）来跟踪用户。

# android - Android 小部件：显示 RAM

> ID：14289706
> 
> 赞同：2
> 
> 时间：2013-01-12T02:49:40.507
> 
> 标签：android, android-widget

我正在尝试为我的应用程序创建一个小部件，以显示设备的 CPU 使用率、电池电量和剩余 RAM；不是存储空间。

CPU 级别和电池充电代码工作正常；但 RAM 代码没有。我已经读过，为了在 AppWidgetProvider 中使用 .getSystemService() ，您必须将上下文从活动传递到此处。

问题是，当该方法尝试使用 ActivityManager 设置 systemService 时，它​​会抛出：

```
01-11 21:29:21.468: E/AndroidRuntime(30759): java.lang.RuntimeException: Unable to instantiate receiver com.example.myfirstappex.AppWidget: java.lang.NullPointerException 
```

我已将问题缩小到这段代码：

```
 import com.example.myfirstappex.MainActivity;

    public class AppWidget extends AppWidgetProvider {
    ...
    public long getRam()
{

    MemoryInfo mi = new MemoryInfo();

    Context mainCon = MainActivity.getAppContext();
    ActivityManager activityManager = (ActivityManager)mainCon.getSystemService(Context.ACTIVITY_SERVICE);

    activityManager.getMemoryInfo(mi);

    long availableMegs = mi.availMem / 1048576L;

    //Returning the value
    return(availableMegs);

}
    ...
    } 
```

关于如何解决此问题的任何想法？还是在小部件中获取和显示 RAM 的替代方法？

编辑：整个错误日志是：

```
 01-11 22:21:32.426: E/AndroidRuntime(32059): FATAL EXCEPTION: main
    01-11 22:21:32.426: E/AndroidRuntime(32059): java.lang.RuntimeException: Unable to start receiver com.example.myfirstappex.AppWidget: java.lang.NullPointerException

    01-11 22:21:32.426: E/AndroidRuntime(32059):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2383)

    01-11 22:21:32.426: E/AndroidRuntime(32059):    at android.app.ActivityThread.access$1500(ActivityThread.java:141)

    01-11 22:21:32.426: E/AndroidRuntime(32059):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1310)

    01-11 22:21:32.426: E/AndroidRuntime(32059):    at android.os.Handler.dispatchMessage(Handler.java:99)

     01-11 22:21:32.426: E/AndroidRuntime(32059):   at android.os.Looper.loop(Looper.java:137)

     01-11 22:21:32.426: E/AndroidRuntime(32059):   at android.app.ActivityThread.main(ActivityThread.java:5039)

     01-11 22:21:32.426: E/AndroidRuntime(32059):   at java.lang.reflect.Method.invokeNative(Native Method)

     01-11 22:21:32.426: E/AndroidRuntime(32059):   at java.lang.reflect.Method.invoke(Method.java:511)

     01-11 22:21:32.426: E/AndroidRuntime(32059):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)

     01-11 22:21:32.426: E/AndroidRuntime(32059):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)

     01-11 22:21:32.426: E/AndroidRuntime(32059):   at dalvik.system.NativeStart.main(Native Method)

    01-11 22:21:32.426: E/AndroidRuntime(32059): Caused by: java.lang.NullPointerException

    01-11 22:21:32.426: E/AndroidRuntime(32059):    at com.example.myfirstappex.AppWidget.getRam(AppWidget.java:82)

    01-11 22:21:32.426: E/AndroidRuntime(32059):    at com.example.myfirstappex.AppWidget.onUpdate(AppWidget.java:35)

    01-11 22:21:32.426: E/AndroidRuntime(32059):    at android.appwidget.AppWidgetProvider.onReceive(AppWidgetProvider.java:66)

    01-11 22:21:32.426: E/AndroidRuntime(32059):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2376)

    01-11 22:21:32.426: E/AndroidRuntime(32059):    ... 10 more 
```

这仅在主应用程序未运行时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:26:33.163

根据错误日志，您的问题在 AppWidget.java 的第 82 行。基于预感，我认为是`ActivityManager activityManager = ...`。但是，如果那不是第 82 行，请查看那里。

除此之外，如果我是对的，您将需要从其他地方获取上下文。以下方法是您的`AppWidget`课程的一部分：

```
onDeleted(Context context, int[] appWidgetIds)
onDisabled(Context context)
onEnabled(Context context)
onReceive(Context context, Intent intent)
onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) 
```

当你调用 时`getRam()`，你应该`Context`从你当前使用的任何方法传递一个对象；在这种情况下，就是`onUpdate()`. 然后，您需要修改`getRam()`以使用它：

```
public long getRam(Context context) {
    // ...
    ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    // ...
} 
```

# java - DataSnap Delphi XE3 和 Android 4.0 没有函数返回选择？

> ID：14289709
> 
> 赞同：2
> 
> 时间：2013-01-12T02:50:03.540
> 
> 标签：java, android, delphi

我在使用我通过datasnap在Delphi中创建的webservice时，在android 4.0版本中出现错误，在android 2.0版本中运行流畅，在4.0版本中更多生成异常，不知道为什么 **“javaandroid. DBX 异常”**

我在 Delphi 中的选择

```
 function TServerMethods1.GetDados_Clientes(Codigo: string; out Nome: string): string;
    var
     sSQL: string;
     begin
        sSQL := ' SELECT CAST(CODIGO AS VARCHAR(30))AS CODIGO, NOME '+
           '   FROM CLIENTES '+
           '  WHERE ATIVO = ''Sim'' '+
           '  AND CAST(CODIGO AS VARCHAR(30)) = '+ QuotedStr(Codigo);  

        with CDS_Tabelas do
        begin
          Close;
          CommandText := sSQL;
          Open;
          Nome := FieldByName('CODIGO').AsString + ' - ' +  FieldByName('NOME').AsString;
          Result := Nome;
        end;
      end; 
```

在生成 embarcadero 的 java 代理类中，所以这个方法

```
 public static class GetDados_ClientesReturns {
     public String Nome;
     public String returnValue;
  }

  public GetDados_ClientesReturns GetDados_Clientes(String Codigo)
        throws DBXException {
     DSRESTCommand cmd = getConnection().CreateCommand();
     cmd.setRequestType(DSHTTPRequestType.GET);
     cmd.setText("TServerMethods1.GetDados_Clientes");
     cmd.prepare(get_TServerMethods1_GetDados_Clientes_Metadata());
     cmd.getParameter(0).getValue().SetAsString(Codigo);
     getConnection().execute(cmd);
     GetDados_ClientesReturns ret = new GetDados_ClientesReturns();
     ret.Nome = cmd.getParameter(1).getValue().GetAsString();
     ret.returnValue = cmd.getParameter(2).getValue().GetAsString();
     return ret;
  } 
```

我说过要使用**AsyncTask。**，但我无法运行代码

```
 public class BuscaCliente extends AsyncTask<Void, Void, Void> {

    private ProgressDialog progress;
    private Context context;

    protected void onPreExecute() {
        // Cria novo um ProgressDialogo e exibe
        progress = new ProgressDialog(context);
        progress.setMessage("Aguarde...");
        progress.show();

    }

    protected Void doInBackground(Void... arg0) {
        DSRESTConnection conn = getConnection();
        TServerMethods1 serv = new TServerMethods1(conn);

        try {
            String idCharCodItem = edtCliente.getText().toString();
            String[] idNumItem = idCharCodItem.split("-");

            GetDados_ClientesReturns ret;
            ret = serv.GetDados_Clientes(idNumItem[0]);

            if (ret.Nome.equals(" - ")) {
                Alerta.mostrarAtencao(VendaClienteActivity.this,
                        getString(R.string.msg_clientenaolocalizado), 0,
                        false);
                carregando(false);
                // permanece no mesmo focus
                edtCliente.setText("");
                edtCliente.setFocusableInTouchMode(true);
                edtCliente.requestFocus();

            } else {
                // parametro = 0 significa 'Não', 1 significa 'Sim'
                if (parametroBLOQUEIA_CLIENTE_S_REG_ENTR() == 1) {
                    // ai verifica se o cliente tem registro do entrada
                    if (verificaIDCliente() != Integer
                            .parseInt(idNumItem[0])) {
                        Alerta.mostrarAtencao(
                                VendaClienteActivity.this,
                                getString(R.string.msg_clientesemregentrada),
                                0, false);
                        carregando(false);

                        // permanece no mesmo focus
                        edtCliente.setText("");
                        edtCliente.setFocusableInTouchMode(true);
                        edtCliente.requestFocus();
                    } else {
                        mudaFocusCliente();
                        // recebe o nome e o id do cliente
                        edtCliente.setText(ret.Nome);
                    }
                } else {
                    mudaFocusCliente();
                    // recebe o nome e o id do cliente
                    edtCliente.setText(ret.Nome);
                }
            }

        } catch (Exception e) {
            Toast.makeText(VendaClienteActivity.this, e.toString(),
                    Toast.LENGTH_LONG).show();
        }

        return null;
    }

    protected void onPostExecute(Void result) {
        progressDialog.dismiss();
    }

} 
```

谁能帮我做到这一点？

谢谢你。

* * *

日志猫

```
 01-12 07:54:38.139: D/AndroidRuntime(16712): Shutting down VM
   01-12 07:54:38.139: W/dalvikvm(16712): threadid=1: thread exiting with uncaught   exception (group=0x40018578)
   01-12 07:54:38.139: E/AndroidRuntime(16712): FATAL EXCEPTION: main
   01-12 07:54:38.139: E/AndroidRuntime(16712): java.lang.NullPointerException
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at android.app.Dialog.<init>(Dialog.java:141)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at android.app.AlertDialog.<init>(AlertDialog.java:63)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at android.app.ProgressDialog.<init>(ProgressDialog.java:80)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at android.app.ProgressDialog.<init>(ProgressDialog.java:76)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at  br.com.azsolucoes.azcomanda.activities.VendaClienteActivity$BuscaCliente.onPreExecute(Venda       ClienteActivity.java:2061)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at  android.os.AsyncTask.execute(AsyncTask.java:391)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at  br.com.azsolucoes.azcomanda.activities.VendaClienteActivity.setFocusEdit(VendaClienteActivi       ty.java:285)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at br.com.azsolucoes.azcomanda.activities.VendaClienteActivity$7.onClick(VendaClienteActivity.       java:1026)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at  android.view.View.performClick(View.java:2485)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at  android.view.View$PerformClick.run(View.java:9080)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at  android.os.Handler.handleCallback(Handler.java:587)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at android.os.Handler.dispatchMessage(Handler.java:92)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at android.os.Looper.loop(Looper.java:130)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at android.app.ActivityThread.main(ActivityThread.java:3687)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at java.lang.reflect.Method.invokeNative(Native Method)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at java.lang.reflect.Method.invoke(Method.java:507)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
   01-12 07:54:38.139: E/AndroidRuntime(16712):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

**我在没有AsyncTask**的情况下使用 2.0 版中的代码

 **```
 private void pesquisarClientes() {
    dialog = ProgressDialog.show(this, "Aguarde...",
            "Pesquisando registros.", false, true);
    dialog.setIcon(R.drawable.ic_launcher);
    dialog.setCancelable(false);

    DSRESTConnection conn = getConnection();
    TServerMethods1 serv = new TServerMethods1(conn);

    try {
        String idCharCodItem = edtCliente.getText().toString();
        String[] idNumItem = idCharCodItem.split("-");

        GetDados_ClientesReturns ret;
        ret = serv.GetDados_Clientes(idNumItem[0]);

        if (ret.Nome.equals(" - ")) {
            ShowMensagem.showMessage("Atenção!",
                    MensagensCentralizadas.msg_clientenaolocalizado, this);
            // permanece no mesmo focus
            edtCliente.setText("");
            edtCliente.setFocusableInTouchMode(true);
            edtCliente.requestFocus();

        } else {
            // parametro = 0 significa 'Não', 1 significa 'Sim'
            if (parametroBLOQUEIA_CLIENTE_S_REG_ENTR() == 1) {
                // ai verifica se o cliente tem registro do entrada
                if (verificaIDCliente() != Integer.parseInt(idNumItem[0])) {
                    ShowMensagem
                            .showMessage(
                                    "Atenção!",
                                    MensagensCentralizadas.msg_clientesemregentrada,
                                    this);
                    // permanece no mesmo focus
                    edtCliente.setText("");
                    edtCliente.setFocusableInTouchMode(true);
                    edtCliente.requestFocus();
                } else {
                    mudaFocusCliente();
                    // recebe o nome e o id do cliente
                    edtCliente.setText(ret.Nome);
                }
            } else {
                mudaFocusCliente();
                // recebe o nome e o id do cliente
                edtCliente.setText(ret.Nome);
            }
        }

        finalizaDialogo(false, "");
        // desabilita o dialog
        dialog.dismiss();
    } catch (Exception e) {
        // desabilita o dialog
        dialog.dismiss();
        finalizaDialogo(true, e.toString());
    }
} 
```

* * *

我使用这段代码来到这里

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    this.getWindow().clearFlags(
            WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    setContentView(R.layout.tela_vendacli);

    // versão 4.0 android
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy); 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T18:26:17.770

在他的方法声明中

```
function TServerMethods1.GetDados_Clientes(Codigo: string; out Nome: string): string; 
```

如果结果已经是字符串就不需要用out了，如果可以放为var，但不是必须的。

```
function TServerMethods1.GetDados_Clientes(Codigo: string; var Nome: string): string; 
```

重新生成代理并注意结果不是 null 或 nil。

代理不是或不能误会它，但他不能为 TJsonObject 制作一个 TJsonNull。**

# sql - 根据第三张表中的字段，将一张表中的多条记录合并为另一张表中的一个字段

> ID：14289710
> 
> 赞同：-1
> 
> 时间：2013-01-12T02:50:04.473
> 
> 标签：sql

我有三张桌子：

```
Table 1: 
pid, name, address  
1    Dale  BLANK

Table 2: 
pid, moid  
1    12

Table 3: 
moid, address  
12    123 Main   
12    12 South   
12    99 North 
```

对于输出我需要：

```
Table 1: 
pid, name, address   
1    Dawn  123 Mian,12 South,99 North 
```

如何将表 3 中的多个地址组合成表 1 中的一个地址字段，将两个表与表 2 中的信息链接起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:57:53.917

您可以通过连接执行此操作：

```
select table1.pid, table1.name,
       group_concat(table3.address, ', ')
from table2 join
     table1
     on table2.pid = table1.pid join
     table3
     on table2.moid = table3.moid
gorup by table1.pid 
```

该函数`group_concat`并非在所有数据库中都存在。. . 其他字符串聚合函数是`listagg`和`ws_concat`。希望您没有使用 SQL Server，因为那里的字符串连接更难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:59:56.847

您没有指定您使用的 RDBMS。在 MySQL 中，您可以使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en//group-by-functions.html#function_group-concat)：

```
select t1.pid,
  t1.name,
  group_concat(t3.address) Address
from table1 t1
left join table2 t2
  on t1.pid = t2.pid
left join table3 t3
  on t2.moid = t3.moid
group by t1.pid, t1.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/bdc03/2)

编辑#1，如果你想要`UPDATE`这个结果的表，那么`UPDATE`语句将如下所示：

```
update table1 t1
set address = (SELECT group_concat(t3.address)
               FROM table2 t2
               left join table3 t3
                on t2.moid = t3.moid
               where t1.pid = t2.pid
               group by t1.pid, t1.name); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/13308/1)

~~如果您使用的是 Oracle 11g+，那么您可以使用以下[`ListAgg()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)功能：~~

 ~~```
select t1.pid,
  t1.name,
  listagg(t3.address, ', ') WITHIN GROUP (ORDER BY t1.pid) Address
from table1 t1
left join table2 t2
  on t1.pid = t2.pid
left join table3 t3
  on t2.moid = t3.moid
group by t1.pid, t1.name 
```~~ 

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/b61b7/3)

在 SQL Server 中，您可以使用[`FOR XML PATH`](http://msdn.microsoft.com/en-us/library/ms190922.aspx)来获取结果：

```
select t1.pid,
  t1.name,
  STUFF((SELECT DISTINCT ', '+ t3.address
         FROM table3 t3
         LEFT JOIN table2 t2
           ON t2.moid = t3.moid
         WHERE t1.pid = t2.pid
         FOR XML PATH('')), 1, 1, '') Address
from table1 t1
group by t1.pid, t1.name 
```

~~请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d6c11/2)~~

所有这些都会产生结果：

```
| PID | NAME |                    ADDRESS |
-------------------------------------------
|   1 | Dale | 12 South,99 North,123 Main | 
```

# jquery - jquery获取内部文本

> ID：14289713
> 
> 赞同：0
> 
> 时间：2013-01-12T02:50:26.987
> 
> 标签：jquery

这是一些代码：

```
jQuery.each(comments, function(i, comment)
{
    cl.append("<div class='comment_entry' id='" + comment.id + "' style='background-color: " + colors[color] + ";'><div class='ce_time'>" + comment.time + "</div><div class='ce_poster'>" + comment.poster_name + "</div><div class='ce_comment' id='ce_comment'>" + comment.comment + "</div></div>");
    color = 1 - color;
});

jQuery(".comment_entry").click(function()
{
    //alert(this.ce_comment);
    alert(jQuery('this').find('#ce_comment').text());
}); 
```

我在这里做的是动态添加 DIV。然后，我按他们的类向 DIV 添加一个点击事件。单击 DIV 时，它应显示 DIV ID 'ce_comment' 中的文本。相反，我得到一个空白。我知道 DIV 中有文本，因为我可以在页面上看到它。

那么，在这种情况下访问文本的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:51:48.650

删除周围的引号`this`。

```
jQuery(this).find('#ce_comment').text() 
```

# android - 解密 AES 加密的 .ts 文件

> ID：14289718
> 
> 赞同：-3
> 
> 时间：2013-01-12T02:51:13.040
> 
> 标签：android, http-streaming

我想在 Android 中使用 AES 128 位加密简单地解密加密的 ts 文件。我知道如果我玩 m3u8，那么 Player 可以处理这个问题，但我想直接访问 ts 并且想单独播放这些，所以需要在播放之前对其进行解密。

让我知道可用于相同的合适的 Java 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:03:33.243

假设您知道用于加密文件的密钥，您可以使用以下内容：

```
public static void decrypt() {
    try {
        Log.d(C.TAG, "Decrypt Started");

        byte[] bytes = new BigInteger(<your key>, 16).toByteArray();

        FileInputStream fis = new FileInputStream(<location of encrypted file>);

        FileOutputStream fos = new FileOutputStream(<location of decrypted file>);
        SecretKeySpec sks = new SecretKeySpec(bytes, <encryption type>);
        Cipher cipher = Cipher.getInstance(<encryption type>);
        cipher.init(Cipher.DECRYPT_MODE, sks);
        CipherInputStream cis = new CipherInputStream(fis, cipher);
        int b;
        byte[] d = new byte[8];
        while ((b = cis.read(d)) != -1) {
            fos.write(d, 0, b);
        }
        fos.flush();
        fos.close();
        cis.close();
        Log.d(C.TAG, "Decrypt Ended");
    } catch (NoSuchAlgorithmException e) {
        Log.d(C.TAG, "NoSuchAlgorithmException");
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        Log.d(C.TAG, "InvalidKeyException");
        e.printStackTrace();
    } catch (IOException e) {
        Log.d(C.TAG, "IOException");
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        Log.d(C.TAG, "NoSuchPaddingException");
        e.printStackTrace();
    }
} 
```

将所有内容替换为适合您文件的内容，一切顺利`<`。`>`

# php - 使用 PHP exec() 加速后端的可行性

> ID：14289719
> 
> 赞同：5
> 
> 时间：2013-01-12T02:51:19.040
> 
> 标签：php, shell, exec, php-java-bridge

我从[PHP exec() 性能](https://stackoverflow.com/questions/14277910/php-exec-performance)中了解到，运行 exec() 会产生开销，但在大型程序或网站中，将后端的一部分用另一种语言编写并让 PHP 使用 exec 调用程序不是有益的吗？

例如，我编写/运行了一个包含大量字符串操作的测试——PHP 用了 2.3 秒，而 Java 用了 0.52 秒，C++ 用了 0.33 秒。速度差异已经很明显了。如果我多线程操作，时间可能会更快。我还发现并行性可以通过类似的东西来实现

```
exec("./largeoperation > mydir/$dirname.data &"); 
//or
exec('java Backend > /dev/null 2>&1 &'); 
```

有了所有这些好处，除了需要用另一种语言编写代码之外，我不明白为什么我不应该将后端的更多部分委托给用另一种语言编写的更快的程序。另外，我知道存在像[Working with Php-Java Bridge](https://stackoverflow.com/questions/5389689/working-with-php-java-bridge)这样的桥，但我不确定使用它是否会比简单的 exec() 快得多。有没有人有更多关于 exec() 的细节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T03:37:54.703

虽然您*可以*使用`exec`和朋友将工作分配给其他程序，但您尝试做的事情最好使用[消息队列](http://en.wikipedia.org/wiki/Message_queue)系统来完成。一个设计良好的消息队列可以让你用你需要的任何语言编写工作程序。当您需要用另一种语言、环境或服务器做某事时，它们是一个很好的解决方案。

有*很多消息队列，但我是*[Gearman](http://gearman.org)的忠实粉丝。它是由为我们带来 memcached 的同一个人构建的。看看[PECL 扩展](http://php.net/book.gearman)。

# php - 会话未恢复

> ID：14289725
> 
> 赞同：1
> 
> 时间：2013-01-12T02:52:33.167
> 
> 标签：php, session

我有以下情况

File1.php 启动会话并设置 $_SESSION['foo'] = 'Hello';

File2.php 启动会话并使用 $_SESSION['foo'] 没有问题

File3.php 启动会话并毫无问题地使用 $_SESSION['foo'] 在 File3 产生的输出中如下：

```
<img id="graph" src="Graph.php" alt="Graph" /> 
```

现在，当 Graph.php 文件运行时，它会启动会话，但 $_SESSION['foo'] 不存在。

之后，如果我刷新 File3，$_SESSION['foo'] 就不再存在了。

如果我回到 File2，同样的事情，$_SESSION['foo'] 会丢失。

我将问题归结为 Graph.php 中的 session_start() 行。如果我完全清空 Graph.php 并将 session_start() 行放入其中，则会出现问题。如果我删除 session_start() 仍然是空文件，问题就会出现。

我真的很困惑。有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:34:07.687

听起来您的 Graph.php 正在用一个新的空会话覆盖会话 cookie。您在 Graph.php 中跳过的“普通”PHP 文件的开头是否包含代码？可能是您`ini_set`用来更改此跳过的启动代码中的某些会话选项（例如会话文件目录`'session.save_path'`）。

# jquery - “！function（$）{}（window.jQuery）”是什么意思？

> ID：14289726
> 
> 赞同：3
> 
> 时间：2013-01-12T02:52:55.677
> 
> 标签：jquery, twitter-bootstrap

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)
> [!function ($) { $(function(){ }) }(window.jQuery) 做什么？](https://stackoverflow.com/questions/10896749/what-does-function-function-window-jquery-do)

“！function（$）{}（window.jQuery）”是什么意思？

```
<script type="text/javascript">
    !function($){
        //some codes here
    }(window.jQuery)
</script> 
```

这个js原代码url：<a href="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js" rel="nofollow noreferrer">http://twitter.github.com/引导/资产/js/bootstrap-dropdown.js

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T02:56:39.330

行首的 将您的函数转换为函数表达式，它与更流行的[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)形式`!`具有基本相同的效果¹：

```
(function($){}(window.jQuery));
//which in turn is the same as
(function($){})(window.jQuery); 
```

然后通过`window.jQuery`作为`$`参数传递立即调用它。这对于能够`$`在函数内部使用引用 jQuery 非常有用，而与页面是否具有 jQuery[`noConflict`](http://api.jquery.com/jQuery.noConflict/)模式无关。

在开发第三方使用的插件时，这种方法非常常见（并且[推荐）。](http://docs.jquery.com/Plugins/Authoring)

更多解释：函数声明不能​​是表达式的一部分，因此当您将 function 关键字放在 a 内`()`或在其前面加上一元运算符时，它会被解释为[function expression](http://kangax.github.com/nfe/#expr-vs-decl)。

`(function(){}())`¹和之间有一个细微的区别`!function(){}()`：虽然括号只是将函数计算为函数表达式形式的函数对象，但一元`!`将做同样的事情并翻转函数表达式的返回值。由于您没有将此值分配给任何东西，因此它只会被丢弃。

加载时间为 1 个字节，`!`而执行时间为操作成本。这两者都不应超过毫秒/微秒的一小部分。这主要是编码风格偏好的问题。

# design-patterns - 访问多个不同数据源的设计模式

> ID：14289727
> 
> 赞同：1
> 
> 时间：2013-01-12T02:53:11.840
> 
> 标签：design-patterns

我有一个案例，我需要从 sybase 数据库中读取/查询，然后操作这些检索到的数据并将它们写入我们自己的自定义数据源，该数据源是基于 xml 的持久存储（不是文件）。我们有自己的 API 来保存/从我们的数据源检索信息（这既不是数据库也不是文件）。我们有自己的 API 来读取和写入这个自定义数据源（持久）

你能建议一个通用的设计模式来处理这种情况吗？此外，作为示例的骨架代码片段将不胜感激。

PS：今天是sybase，明天我们可能会转到其他数据库。

谢谢，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:47:32.140

我相信这就是[数据访问对象 (DAO)](http://en.wikipedia.org/wiki/Data_access_object)模式的用途。它从有关底层数据源的特定细节中抽象出来，无论它是什么：数据库、xml 文件等。

# oauth-2.0 - 使用 JWT 的 OAuth 中客户端身份验证和授权授予之间的区别

> ID：14289728
> 
> 赞同：5
> 
> 时间：2013-01-12T02:53:17.787
> 
> 标签：oauth-2.0, jwt

我一直在阅读[此规范](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-jwt-bearer-04)以将 JWT（JSON Web 令牌）与 OAuth 结合使用。

在[2.1](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-jwt-bearer-04#section-2.1)和[2.2](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-jwt-bearer-04#section-2.2)中，它说 JWT 可以用作授权授予或客户端身份验证。

据我了解，身份验证是为了识别某些东西（这个用户就是他声称的那个人），而授权是检查用户是否被允许做他所要求的事情。

JWT 作为授权授予是有意义的，因为请求是通过签名来隐式标识的。大多数支持此方法的 API 都使用 JWT 作为授权授予。请参阅[salesforce](http://help.salesforce.com/help/doc/en/remoteaccess_oauth_jwt_flow.htm)和[google](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。

这就是让我感到困惑的地方。**为什么需要将 JWT 身份验证作为一个单独的东西？** *在什么情况/用例下需要 JWT 身份验证？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-19T21:17:22.043

**1\. JWT 作为授权授予**

**在这种情况下，客户端以某种未指定的方式获得了 JWT，它可以在令牌端点上呈现给授权服务器，以代表发出 JWT 的一方**获取访问令牌（和可选的刷新令牌）。这可能是最终用户（或资源所有者）本人，但 JWT 通常也可以由受信任的第 3 方（其他用户或组织）签名。这可以适用于公共和机密客户。

请注意，这将代码与授权服务器紧密绑定的更常规的授权代码授予替换*为*更灵活的机制，其中授权 (JWT) 可能由第 3 方发布，从而启用跨管理边界工作的联合系统。

*JWT 将是短暂的，仅供一次性使用。*

**2\. JWT 作为客户端认证**

在这种情况下，客户端向令牌端点提供一个 JWT，作为需要与令牌端点交互的任意授权类型（甚至可能是 JWT 授权授权！）的流的一部分；一个典型的例子是授权代码授权，其中客户端收到资源所有者同意的*代码*，需要在令牌端点交换访问令牌（和可选的刷新令牌），并且客户端使用 JWT 对自己进行身份验证。

这意味着/定义/需要一个机密客户端，而 JWT 替代了更常规（且难以管理）的客户端机密。

*JWT 将长期存在并多次使用。*

# ruby-on-rails - 在关联上使用 class_name 时接受_nested_attributes_for

> ID：14289733
> 
> 赞同：2
> 
> 时间：2013-01-12T02:54:40.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

这是代码：

用户.rb

```
class User < ActiveRecord::Base
    # So we can reference the user's Client information with user.as_client
    has_one :as_client, :class_name => 'ClientAccount'
    accepts_nested_attributes_for :as_client
end 
```

form.html.erb

```
<%= f.label :first_name %>
<%= f.text_field :first_name %>

<%= f.fields_for :as_client do |c| %>
  <%= c.label :website %>
  <%= c.text_field :website %>
<%= end %> 
```

现在，当我提交表单时，会发送以下内容：

```
{"user"=>{"first_name"=>"Name", "as_client_attributes"=> "website"=>"http://website.com"}}, "commit"=>"Update User"} 
```

我得到这个错误：

```
Can't mass-assign protected attributes: as_client_attributes 
```

我怎样才能使这项工作？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T03:08:42.460

您需要添加`attr_accessible :as_client_attributes`User 模型，以便您可以通过`accepts_nested_attributes_for`.

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# php - 使用 PHP 下载一个非常大的 XML 文件

> ID：14289735
> 
> 赞同：0
> 
> 时间：2013-01-12T02:54:44.597
> 
> 标签：php

我目前编写了一个脚本，开始从网上下载一个大的 (1.3GB) XML 文件，但我遇到了许多问题。这是我的代码：

```
 function readfile_chunked ($filename) { 
      $chunksize = 1*(1024*1024); 
      $buffer = ''; 
      $handle = fopen($filename, 'rb'); 
      if ($handle === false) { 
        return false; 
      } 
      while (!feof($handle)) { 
        $buffer = fread($handle, $chunksize); 
        //print $buffer; 

        $myFile = "test.xml";
        $fh = fopen($myFile, 'a') or die("can't open file");
        fwrite($fh, $buffer);
        fclose($fh);
      } 
      return fclose($handle); 
    } 
```

第一个（也是主要）问题是下载时出现以下错误：

`Fatal error: Maximum execution time of 30 seconds exceeded in /Applications/MAMP/htdocs/test/test.php on line 53`

据我了解，这基本上是一个超时，我已经阅读了有关更改 php.ini 中的超时设置的信息，但我意识到当这个应用程序上线时，我将无法在共享服务器上编辑 php.ini 文件.

这个问题让我进入下一个问题——我想实施某种错误检查和预防。例如，如果与服务器的连接断开，我希望能够在连接恢复时恢复。我意识到这可能是不可能的。另一种方法是比较本地和远程的文件大小？

我还需要在我的请求中添加一个 Accept-Encoding: gzip HTTP 标头。

这最终会让我得到某种我想要的进度通知，大概是不断地用 JavaScript 轮询比较本地和远程文件大小？

然而，前两点将是最重要的，因为目前我无法下载我需要的文件。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:25:03.187

关于你关于超时的问题。我建议将该任务作为 cron 作业运行。从命令行运行 PHP 时，最大执行时间的默认设置为 0（无时间限制）。通过这种方式，您将避免猜测下载文件需要多长时间，这取决于各种因素。我相信大多数共享主机都允许您运行 cron 作业。

对于下载恢复和 gzip，我建议使用 PEAR 包[HTTP_Download](http://pear.php.net/manual/en/package.http.http-download.php)

> 它支持 HTTP 压缩、缓存和部分下载、恢复和发送原始数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T09:18:36.360

我在 php 中遇到了类似的问题，并插入了以下代码来解决执行时间问题：

忽略用户中止（真）；设置时间限制（0）；ini_set('memory_limit', '2048M');

# javascript - 使用 ¼ ½ ¾ 之类的符号将数字转换为分数（在谷歌电子表格中）

> ID：14289736
> 
> 赞同：1
> 
> 时间：2013-01-12T02:54:45.643
> 
> 标签：javascript, google-apps-script, google-sheets, formula, fractions

我想将数字转换为 Google 电子表格中的分数（我使用的是最新的 Firefox，Windows 7）。经过一番搜索，我设法找到了这个对我很有效的公式（它将单元格 A1 转换为分数）：

=IF(INT(A1)=A1,A1,IF(INT(A1)>0 ; INT(A1) &" " ; "")&(INDEX(SPLIT((TEXT( MOD(A1;1);"000000000000000E000 ")); "E");1;1))/GCD((索引(SPLIT((TEXT(MOD(A1;1); "000000000000000E000"));"E");1;1));( 10^(-1*INDEX(SPLIT((TEXT(MOD(A1;1);"000000000000000E000")); "E");1;2))))&"/"& (10^(-1*索引（分割（（文本（MOD（A1；1）；“000000000000000E000”））；“E”）；1；2）））/GCD（（索引（分割（（文本（MOD（A1；1））；“ 000000000000000E000"));"E");1;1));(10^(-1*INDEX(SPLIT((TEXT(MOD(A1;1);"000000000000000E000"));"E");1; 2）））））

我想做的是使用 ¼ ½ 和 ¾ 之类的符号（例如，公式将 1.5 转换为“1 ½”）。这些是我从 Microsoft Word 中复制和粘贴的符号。他们可以很好地粘贴到 Google 电子表格中，但是作为文本粘贴，所以我猜我需要将 Concatenate 添加到这个公式中，但我不知道如何。

我在单元格 A1 中的值将始终是 0.25 的倍数（例如 0.5 或 2 或 3.75 等），因此我只需要符号 ¼ ½ 和 ¾。

如果有人知道如何最好使用公式或其他脚本来做到这一点，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:07:43.337

考虑到您只有 0.25 的倍数，以下公式为您服务。如果您的值不是 0.25 的倍数，它将失败。

```
=IF(INT(A1)=A1,A1,IF(INT(A1)>0 ; INT(A1) &" " ; "")&(if(A1-INT(A1)>0.5; "¾"; if(A1-INT(A1)>0.25; "½"; "¼")))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:31:16.130

Javascript 中已经实现了各种小数到分数的转换器，例如[这个](http://www.dynamicguru.com/javascript/javascript-function-to-convert-decimal-fraction/).

该函数可以导入并用作自定义电子表格函数。它是用等效的 ASCII 或 Unicode 字符替换分数的简单扩展。

自定义函数将比实现复杂的电子表格函数更具可读性。

```
=dec2frac(A1) 
```

# ssl - 如何使用 httparty ruby gem 验证 ssl 证书？

> ID：14289738
> 
> 赞同：1
> 
> 时间：2013-01-12T02:56:31.387
> 
> 标签：ssl, openssl, httparty

我假设它在下面使用 OpenSSL。有没有好的设置方法：

```
https.verify_mode = OpenSSL::SSL::VERIFY_PEER 
```

在你的课上，包括`httparty`？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:28:24.590

朱利安最终像这样解决它：[https ://github.com/coinbase/coinbase-ruby/commit/7bd9b6576bd267001202d21082a4c151fc87e4c4](https://github.com/coinbase/coinbase-ruby/commit/7bd9b6576bd267001202d21082a4c151fc87e4c4)

他添加了一些额外的注释：

在大多数情况下，您可以从权威机构获取实际的证书链：[https ://www.digicert.com/digicert-root-certificates.htm](https://www.digicert.com/digicert-root-certificates.htm)

或者像这样的东西也可以：

```
openssl s_client -showcerts -connect yourwebsite.com:443 
```

# ruby-on-rails - 在 Ruby on Rails 中本机/在 He roku 上读取二进制 PList

> ID：14289754
> 
> 赞同：1
> 
> 时间：2013-01-12T02:59:13.920
> 
> 标签：ruby-on-rails, heroku, info.plist

我需要从应用程序的 Info.plist（捆绑版本号）中提取一些数据，这是苹果公司完成的二进制 XML。PList gem 只进行写入，而 Plist4r 需要命令行 plutil（据我所知），我无法在 Heroku 上访问它。

那么，有人有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:19:44.940

我遇到了同样的问题并决定使用这个 gem：[https ://github.com/ckruse/CFPropertyList](https://github.com/ckruse/CFPropertyList)

# java - 通过制作循环链表来防止java垃圾收集？

> ID：14289755
> 
> 赞同：1
> 
> 时间：2013-01-12T02:59:29.350
> 
> 标签：java, garbage-collection

> **可能的重复：**
> [Java 中的垃圾收集和循环引用](https://stackoverflow.com/questions/1910194/garbage-collection-in-java-and-circular-references)

每当内存空间不足时，Java 就会运行它的垃圾收集器。它通过删除未引用的对象来实现。那么如果一个对象有一个指向它自己的指针，或者任何一个总是有一个指向它的指针的循环指向结构呢？垃圾收集器会失败还是会识别出我们为使其失败而做出的任何此类阴险尝试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:09:26.550

Java 垃圾收集器不会回收静态或局部变量指向的对象的任何内存，或者从这些对象链接（递归）的任何对象。因此，如果您有大型链接的对象树，如果有一个变量指向树或循环的任何根，垃圾收集器将不会回收该空间。

只要没有静态或局部变量指向循环中的对象，循环中链接的对象的内存就会被回收。因此，如果您希望垃圾收集有效地工作，请确保在不再需要对象时清空变量。

垃圾收集器确实检测并且不关心对象是否以循环方式链接。唯一重要的是是否可以从变量中访问对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T03:21:47.790

“A 引用对象 B 和 B 引用 A”称为隔离岛。GC 足够聪明，可以检测到这样的事情。如果没有对岛中任何对象的引用，则整个岛都有资格进行垃圾收集

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T03:37:18.260

对象是否被收集取决于垃圾收集算法

*   **引用计数GC**，不会收集循环引用
*   但是，**现代 GC 算法**通常通过从根集开始遍历堆来确定对象的收集资格。

垃圾收集器将收集**无法从根**引用集访问的对象（当前局部变量、静态引用、堆栈帧的操作数堆栈）。这意味着即使是被其他一些对象引用的对象仍然可以被收集。

因此，即使引用了每个对象，如果没有其他引用路径从根集传递到形成循环的对象，**您的循环指针结构也会被收集。**

另请参阅[什么触发了 Java 垃圾收集器](https://stackoverflow.com/q/14278793/772000)。

# html - 我不明白的重点 标签

> ID：14289756
> 
> 赞同：0
> 
> 时间：2013-01-12T02:59:31.627
> 
> 标签：html

它有什么作用？你把它放在文本周围，它什么也没做。

`<article> </article>`具有相同的效果`<p> </p>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:02:44.773

`<article>`[只是 HTML5 中引入的用于语义](http://html5doctor.com/lets-talk-about-semantics/)的块级元素。

把它想象成`<blockquote>`元素。您可以使用`<div class="blockquote">`，但为什么呢？`<blockquote>`已经在那里并完成了工作。`<div>`您可以使用更有意义的元素，而不是让s 嵌套六深。

看看[HTML5 参考](http://www.w3.org/TR/html-markup/article.html)是怎么说的：

> article 元素代表构成文档或站点的独立部分的内容部分；例如，杂志或报纸文章，或博客条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:04:59.867

从根本上说，HTML 旨在传达内容和语义。`<article>`衬托出代表整个可独立分发的内容的页面部分，而`<p>`仅衬托页面内的段落。

从[HTML 规范](http://www.w3.org/TR/html5/sections.html#the-article-element)：

> 该`article`元素表示文档、页面、应用程序或站点中的自包含组合，即原则上可独立分发或可重复使用，例如在联合中。这可以是论坛帖子、杂志或报纸文章、博客条目、用户提交的评论、交互式小部件或小工具，或任何其他独立的内容项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T03:08:24.970

HTML`<article>`标签用于表示一篇文章。更具体地说，`<article>`标签中的内容独立于网站上的其他内容（即使它可能是相关的）。其中 as`<p>` 标签用于定义页面中的段落

我们只有一个标题和一些内容，但它本身就足够有意义

```
<article>
        <h1>Apple</h1>
        <p>The <b>apple</b> is the pomaceous fruit of the apple tree...</p>
        ...
</article> 
```

# oracle - 以编程方式将列添加到 Oracle 表

> ID：14289758
> 
> 赞同：0
> 
> 时间：2013-01-12T02:59:35.453
> 
> 标签：oracle, plsql, add

我正在尝试做一些非常简单的事情......让我举个例子。假设我有一个包含几列的表，我们将其中一列称为“u”。此列只有 3 个不同的值，即。0、1 和 2。我想创建三个额外的列 u_0、u_1 和 u_2，如下所示：

```
If u = 0, then u_0 = 1, u_1 = 0 and u_2 = 0
If u = 1, then u_0 = 0, u_1 = 1 and u_2 = 0
If u = 2, then u_0 = 0, u_1 = 0 and u_2 = 1 
```

这只是一个例子。有几个像 u 这样的列，具有三个以上不同的值，我需要为所有这些变量添加类似的列。是否可以在 Oracle PL/SQL 中编写一个可以有效执行此操作的程序？谢谢和问候， Dibyendu

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T08:09:25.240

虚拟列怎么样？您必须手动添加它们，但这些值是以编程方式计算（和更新）的：

```
ALTER TABLE mytable ADD (u_0 NUMBER GENERATED ALWAYS
    AS (CASE u WHEN 0 THEN 1 ELSE 0 END) CHECK (u_0 IN (0,1))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T12:08:29.423

我认为以下存储过程可以满足您的需要：

```
create or replace procedure expandcolumn 
(
  colname in varchar2  
) as 
  v_max integer;
  v_col_index integer := 0;
  v_sql_ddl varchar2(2000) := 'alter table demo add (';
  v_sql_update varchar2(2000) := 'update demo set ';
  v_sep varchar2(3) := ', ';
begin
  -- Retrieve the maximum value of the column so we know how many columns to add
  execute immediate 'select max(' || colname || ') from demo' into v_max;

  -- Starting from zero, prepare the DDL and UPDATE statements for each new column
  for v_col_index in 0..v_max loop
    if v_col_index = v_max then
      v_sep := null; -- We don't need a comma separator after the last column
    end if;

    v_sql_ddl := v_sql_ddl || colname || '_' || v_col_index || ' number(1)' || v_sep;
    v_sql_update := v_sql_update || colname || '_' || v_col_index ||
      '=decode(' || colname || ',' || v_col_index || ', 1, 0)' || v_sep;
  end loop;

  v_sql_ddl := v_sql_ddl || ')';

  execute immediate v_sql_ddl; -- Add the new columns to the demo table
  execute immediate v_sql_update; -- Set the new column values (implicit commit)
end expandcolumn; 
```

使用您希望扩展为多列的原始列名调用它，例如

```
create table demo (u number(1));
insert into demo values (0);
insert into demo values (2);
insert into demo values (1);
commit;
exec expandcolumn('U');
select * from demo;

         U        U_0        U_1        U_2
---------- ---------- ---------- ----------
         0          1          0          0
         2          0          0          1
         1          0          1          0 
```

当然，您可能需要参数化更多的东西（例如表名和列宽），但为了简单起见，我将它们省略了。

# mysql - Mysql Pivot Table：如何获取行和列总计并添加条件列？

> ID：14289760
> 
> 赞同：0
> 
> 时间：2013-01-12T03:00:06.520
> 
> 标签：mysql

我有 2 个名为 tabItem 和 tabBin 的表。现在通过如下所述的代码以数据透视表格式获取数据。现在下面的代码按预期工作，但我无法添加列和行总计字段。

现在行总数不是基于行中的所有单元格，而是我希望仅对一行中的以下单元格求和，列标题为 1D + 2B + BRG + BHT，我无法找到这样做的方法，我们需要将此列命名为“总计”。

我还需要添加另一列，它将打印以下内容：

1.  如果 1D + 2B < SO 那么“1 CORD”
2.  如果 Total < SO + ROL 那么“2 CSTK”

同样，还有许多其他条件，例如 10~15 个条件，我只是不知道如何编写代码，因为提到的所有代码都是通过在 google 上搜索编写的，但现在我无法找到答案，我不在都精通mysql。任何帮助将不胜感激。

```
select 
 `tabItem`.name as "Item Code:Link/Item:150",
 `tabItem`.description as "Description::300",
 ifnull(`tabItem`.re_order_level,0) as "ROL:Currency:50",
 ifnull(`tabBin`.reserved_qty,0) as "SO:Currency:50",
 ifnull(`tabBin`.ordered_qty,0) as "PO:Currency:50",
 ifnull(min(case when `tabBin`.warehouse="DEL20A" then `tabBin`.actual_qty end),0) as "1D:Currency:50",  
 ifnull(min(case when `tabBin`.warehouse="BGH655" then `tabBin`.actual_qty end),0) as "2B:Currency:50",    
 ifnull(min(case when `tabBin`.warehouse="RG-BGH655" then `tabBin`.actual_qty end),0) as "BRG:Currency:50",    
 ifnull(min(case when `tabBin`.warehouse="HT-BGH655" then `tabBin`.actual_qty end),0) as "BHT:Currency:50",    
 ifnull(min(case when `tabBin`.warehouse="FG-BGH655" then `tabBin`.actual_qty end),0) as "BFG:Currency:50",    
 ifnull(min(case when `tabBin`.warehouse="SLIT-DEL20A" then `tabBin`.actual_qty end),0) as "DSL:Currency:50",    
 ifnull(min(case when `tabBin`.warehouse="RG-DEL20A" then `tabBin`.actual_qty end),0) as "DRG:Currency:50",    
 ifnull(min(case when `tabBin`.warehouse="FG-DEL20A" then `tabBin`.actual_qty end),0) as "DFG:Currency:50", 
 ifnull(min(case when `tabBin`.warehouse="TEST-DEL20A" then `tabBin`.actual_qty end),0) as "DTS:Currency:50",    
 ifnull(min(case when `tabBin`.warehouse="REJ-DEL20A" then `tabBin`.actual_qty end),0) as "DRJ:Currency:50",   
 ifnull(min(case when `tabBin`.warehouse="RM-DEL20A" then `tabBin`.actual_qty end),0) as "DRM:Currency:50",    
 ifnull(min(case when `tabBin`.warehouse="RM-BGH655" then `tabBin`.actual_qty end),0) as "BRM:Currency:50"  
 from
 `tabItem`
 left join `tabBin` on
 `tabItem`.name = `tabBin`.item_code
where
 `tabBin`.item_code <>""
 and `tabBin`.item_code = `tabItem`.name    
group by `tabItem`.name
order by `tabItem`.name asc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:08:18.797

尝试使用子查询来执行此操作。使用您的查询。. .

```
select t.*,
       ("1D:Currency:50" + "2B:Currency:50" + "BRG:Currency:50" + "BHT:Currency:50"
       ) as tot1,
       (case when "1D:Currency:50" + "2B:Currency:50" < "SO:Currency:50"
             then '1 CORD'
             when ("1D:Currency:50" + "2B:Currency:50" + "BRG:Currency:50" + "BHT:Currency:50" < "SO:Currency:50" + "ROL:Currency:50"
             then  "2 CSTK"
         end)
from (<your query>) t 
```

这应该让您了解如何进行。

# javascript - jquery .live() 和 .append()

> ID：14289767
> 
> 赞同：0
> 
> 时间：2013-01-12T03:02:21.480
> 
> 标签：javascript, ajax, jquery, jquery-append

因此，我目前正在使用 .append() 向网页上的所有帖子添加功能，但是当页面上加载了其他帖子时，附加功能不会包含在新内容中 - 我正在尝试想出一种方法来确保所有新内容也具有附加功能。

```
$(this).append('<div id="new_feature></div>'); 
```

像这样的东西？

```
$(this).live().append('<div id="new_feature></div>'); 
```

也许有一种方法可以让它不断地附加在一个循环中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:27:42.997

有 DOMNodeInserted 事件：

```
$('button').click(function() {
  $('#appendme').append($('<div class="inner">').text(Math.random()));

})

$('#appendme').on('DOMNodeInserted','.inner',function() {
 console.log(this); 
}); 
```

[演示](http://jsfiddle.net/oceog/JcBvc/)

更新：这似乎在 IE 中不起作用，`propertychnage`也尝试事件处理程序（`$('#appendme').on('DOMNodeInserted,propertychange'`）但我不确定，现在没有 IE 来检查这个。

update2：Domnode* 根据 mdn 似乎已弃用，他们告诉使用[MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)对象代替

update3：似乎这里不是 MutationEvents 的跨浏览器解决方案，请参阅[这个答案](https://stackoverflow.com/a/7749629/815386)，所以我的建议是使用上面的代码，如果支持事件并回`setTimeOut`退到或 livequery 选项。

update4：如果你只依赖`.append()`你可以这样补丁`jQuery.fn.append()`：

```
jQuery.fn.append=function() {
                return this.domManip(arguments, true, function( elem ) {
                        if ( this.nodeType === 1 || this.nodeType === 11 ) {
                                this.appendChild( elem );                             
                                $(elem).trigger('appended');
                        }
                });
        };

$('button').click(function() {
  $('#appendme').append($('<div class="inner">').text(Math.random()));

})

$('#appendme').on('appended','.inner',function() {
 console.log(this); 
}); 
```

[演示2](http://jsfiddle.net/oceog/JcBvc/2/)

可能更正确的是`jQuery.fn.domManip`像[这里一样恶搞](http://jsfiddle.net/oceog/JcBvc/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T03:10:12.850

`jQuery`文档：

> 不再推荐使用 .live() 方法，因为更高版本的 jQuery 提供了没有缺点的更好方法。

您可以使用可以每 n 毫秒`setTimeout()`检查一次新s 的功能。`<div>`

```
$(function(){
    setInterval("Check4NewDivs();",1000);
}); 
```

所以说`this`是一个带有 的 div `class="comment newdiv"`，所以当它第一次出现在页面上时，它有一个类`newdiv`可以让函数知道它只是动态创建的。

```
function Check4NewDivs(){
    $(".comment .newdiv").each(function(){
        $(this).append('<div class="new_feature"></div>').removeClass("newdiv");
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T03:07:24.187

`append`不是`appened`。_
`live`是一个已弃用的事件处理程序。它不是这样使用的。改为使用`on`。 [http://api.jquery.com/live/](http://api.jquery.com/live/)

因此，当您单击 时，将运行以下代码`selector`。

```
$(document).on('click', 'selector', function() {
    $(this).append('<div id="new_feature></div>');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T03:08:14.800

不，没有标准的方法可以做到这一点。有一个关于在插入 DOM 元素等时触发的事件的提议，但你不能依赖它。

而是依赖于：

*   （最好）回调 - 只要调用函数确保存在这样的附加片段，只要你拉一些东西（但在你成功地从服务器拉出来并插入 DOM 之后，而不是更早），或者
*   持续检查 - 就像使用 in `setInterval()`or `setTimeout()`，但这将是不必要的处理，你永远不会得到即时追加，除非你将一直执行处理繁重的检查，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T03:08:15.527

使用加载功能：

```
$(item).on('load',function(){
    $(this).append('<div id="new_feature"></div>');
}); 
```

这将在项目加载后添加附加项目作为回调。我也会选择某种动态 ID 创建者，而不是总是附加具有相同 ID 的东西，但这只是我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-14T21:00:45.543

您必须绑定到页面上已存在的元素。我写了一个例子，我在其中制作附加内容。

[JSFiddle 上的演示](https://jsfiddle.net/oud8Lnqt/ "JSFiddle 上的演示")

HTML

```
<div id="container">
  <div id="features">
  </div>
  <br />
  <a href='#' id='clickme'>click me to add feature</a>
</div> 
```

JS

```
$(function() {
  $('#clickme').on('click', function(e) {
    $('#features').append('<div class="new_feature">new feature</div>');
  });

  $('#features').on('click', '.new_feature', function() {
    alert('i am live.');
  });
}); 
```

# javascript - jquery幻灯片点击链接

> ID：14289768
> 
> 赞同：0
> 
> 时间：2013-01-12T03:02:37.627
> 
> 标签：javascript, jquery, html, click, href

首先，对不起，如果我不会说一口流利的英语。

`div`我的问题是当我单击使用 jQuery 的链接时如何制作幻灯片？

我有这个：

```
<script type="text/javascript">
    function slide(div) {
        if($(div).css('display') === 'none'){ 
            $(div).delay(300).slideUp(500);
            return false;
        } else { 
            $(div).delay(300).slideUp(500);
            return false;
        }  
    }
</script>

<a href="#" onclick="slide('#div1');">Click here</a>

<div id="div1" style='display: none'>
    this will show
</div> 
```

有谁知道问题是什么？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:11:57.763

这将修复你的功能，你总是在使用`slideUp`，这样`display`永远不会改变

```
function slide(div) {
    if($(div).css('display') === 'none'){ 
        $(div).delay(300).slideDown(500);
        return false;
    } else { 
      console.log('2');
        $(div).delay(300).slideUp(500);
        return false;
    }  
} 
```

改为使用`slideToggle`。

```
<a href="#" class="handler">Click here</a>

<div id="div1" style='display: none'>
    this will show
</div>

$('.handler').click(function() {
    $('#div1').slideToggle(500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:16:50.360

jQuery 的[.slideUp()](http://api.jquery.com/slideUp/)专门用于隐藏元素。

如果要专门显示 div，请使用[.slideDown()](http://api.jquery.com/slideDown/)显示。如果您想在显示/不显示之间切换，
也可以使用[.slideToggle() 。](http://api.jquery.com/slideToggle/)

只需将您`.slideUp(`的 ' 更改为`.slideDown(`'。

看到[这个 jsFiddle](http://jsfiddle.net/q54RR/1/)

# c++ - Windows Phone：登录到控制台

> ID：14289770
> 
> 赞同：9
> 
> 时间：2013-01-12T03:02:46.957
> 
> 标签：c++, logging, windows-phone, windows-phone-8, direct3d

免责声明：*我对 MSFT 技术界很陌生，大约一个月前才开始开发 Windows Phone。*

我无法弄清楚如何从 C# 和 C++ (Direct3D) Windows Phone 8 应用程序中将信息记录到 Visual Studio 输出窗口。这可能吗？

我正在调试模式下构建，目标是 Windows Phone 8，在 XDE 模拟器中运行，我的开发机器是安装了 VS2012 Ultimate 的 Windows 8 机器。我的应用程序运行良好，我的 Direct3D 场景渲染正常，但我无法记录任何内容！这使得跟踪代码执行变得困难，并迫使我使用断点（在许多情况下这可能会过大）。

我一直在广泛搜索并尝试了许多方法（OutputDebugString 就是其中之一）。我在 MSDN 上看不到任何关于此的内容 - 为什么在任何地方都没有记录？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T18:10:45.477

是的，可以将 WP8 C++ 中的调试字符串写入 VS2012 的输出窗口。我实际上有一个例子[here](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8#Native:_Interoperability_between_DirectX_and_C.2B.2B.2C_and_XAML_and_C.23)。

1)从 C++调用**OutputDebugString 。**

```
void Direct3DInterop::MyButtonWasClicked()
{
    OutputDebugString(L"Button was clicked!");
} 
```

2) 在运行应用程序之前，请确保从项目属性中的托管调试器更改为本机调试器。

![项目属性中的本机调试器](../Images/cbeff4fa696d0705c35eac2e5aa7cbc5.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T03:43:48.377

我相信[System.Diagnostics.Debug中的方法（特别是](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug%28v=vs.95%29.aspx)[WriteLine()](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.writeline%28v=vs.95%29.aspx)的重载）有效……尽管我没有在 C++ 应用程序中尝试过它们。

# google-chrome - 在 Chrome 中从 browserAction 创建新标签

> ID：14289777
> 
> 赞同：5
> 
> 时间：2013-01-12T03:03:49.950
> 
> 标签：google-chrome, google-chrome-extension, tabs, browser-action

更新：在另一个中找到了解决方案；显然我之前抄错了！这有效：

```
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.create({'url': chrome.extension.getURL('f.html')}, function(tab) {
    // Tab opened.
  });
}); 
```

来源：[Google Chrome 扩展程序 - 单击工具栏图标时打开新选项卡](https://stackoverflow.com/questions/3188384/google-chrome-extensions-open-new-tab-when-clicking-a-toolbar-icon)

* * *

我正在尝试创建一个新选项卡并将其设置为 background.html 单击 BrowserAction 按钮，但单击时没有任何反应。

（这是对书签侧边栏进行某种 apish 模仿的先驱，因为没有可用的侧边栏。）

* * *

**清单.json**

```
{
    "name": "Bookmarks Bar",    
    "permissions": 
        [
            "bookmarks",
            "tabs"
        ],
    "version": "0.0",
    "manifest_version": 2,
    "description": "A bookmarks sidebar for Chrome.",

    "background": { "scripts": ["background.js"]},

    "browser_action":
        {
            "default_icon": "icon.png",
            "default_title": "Bookmarks Sidebar"
        }
} 
```

* * *

**背景.js**

```
// Called on browser_action click.
chrome.browserAction.onClicked.addListener(function(tabs.Tab tab) 
    {
        chrome.tabs.create({"url": chrome.extension.getURL("background.html"), "selected": true});
    }); 
```

* * *

background.html 页面目前只是一个带有一些文本的虚拟页面。当我尝试将其添加到 Chrome 时，没有出现任何错误（这并不意味着太多）。

我在这里查看了其他一些类似的问题，但是我发现的结果使我陷入了这个……仍然卡住，并且无法正常工作。感谢您的帮助，如果我需要进一步澄清任何事情，请告诉我。

（我为这个愚蠢的问题道歉，但自从我使用 javascript 以来已经有好几年了，这是我第一次尝试 Chrome 扩展。）

# regex - 使用 std::tr1::regex 用冒号标记

> ID：14289781
> 
> 赞同：0
> 
> 时间：2013-01-12T03:05:07.170
> 
> 标签：regex, tr1

我正在研究一个准 SCPI 命令解析器，我想根据冒号拆分一个字符串，忽略带引号的字符串。如果冒号之间没有文本，我想得到一个空字符串。

如果我在 EditPad Pro 7.2.2 中使用这个正则表达式，它**完全**符合我的要求。(([^:\"']|\"[^\"] *\"|'[^']* ')+)？

例如，使用以下数据字符串： :foo:::bar:baz

我得到 6 次点击：[empty],foo,[empty],[empty],bar,baz

到目前为止，一切都很好。但是，在我的代码中，使用 std::tr1::regex，我得到了**9 个**具有相同数据字符串的命中。似乎每次非空击后**我**都会获得额外的空击。

```
void RICommandState::InitRawCommandEnum(const std::string& full_command)
{
    // Split string by colons, but ignore text within quotes.
    static const std::tr1::regex split_by_colon("(([^:\"']|\"[^\"]*\"|'[^']*')+)?");

    raw_command_list.clear();
    raw_command_index = 0;

    DebugPrintf(ZONE_REMOTE, (TEXT("InitRawCommandEnum FULL '%S'"), full_command.c_str()));

    const std::tr1::sregex_token_iterator end;
    for (std::tr1::sregex_token_iterator it(full_command.begin(),
                                            full_command.end(),
                                            split_by_colon);
         it != end;
         it++)
    {
        raw_command_list.push_back(*it);
        const std::string temp(*it);
        DebugPrintf(ZONE_REMOTE, (TEXT("InitRawCommandEnum '%S'"), temp.c_str()));
    }

    DebugPrintf(ZONE_REMOTE, (TEXT("InitRawCommandEnum hits = %d"), raw_command_list.size()));
} 
```

这是我的输出：

```
InitRawCommandEnum FULL ':foo:::bar:baz'
InitRawCommandEnum ''
InitRawCommandEnum 'foo'
InitRawCommandEnum ''
InitRawCommandEnum ''
InitRawCommandEnum ''
InitRawCommandEnum 'bar'
InitRawCommandEnum ''
InitRawCommandEnum 'baz'
InitRawCommandEnum ''
InitRawCommandEnum hits = 9 
```

最重要的问题是如何让我的正则表达式搜索为每个由冒号分隔的标记产生一个（并且只有一个）命中？我的搜索表达式有问题吗？

或者我可能误解了结果？非空字符串后面的空字符串有特殊含义吗？如果是这样，是什么？如果是这样的话，那么简单地忽略它们是正确的解决方案吗？

作为一个附带问题，我非常好奇为什么我的代码的行为与 EditPad Pro 不同。EditPad 是一个有用的测试环境，用于试验正则表达式，很高兴知道其中的陷阱是什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T22:18:19.580

我仍然不清楚空字符串的含义是什么，但我可以通过忽略它们来解决它们。我跟踪搜索字符串中命中的位置，并且只处理字符串中更远的结果。

这是我的代码，未经修改。请注意，我的正则表达式搜索表达式略有不同，但这对答案并不重要。

```
void RICommandState::InitRawCommandEnum(const std::string& full_command)
{
    // Split string by colons, but ignore text within quotes.
    static const std::tr1::regex split_by_colon("(?:[^:\"']|\"[^\"]*\"|'[^']*')*");

    raw_command_list.clear();
    raw_command_index = 0;

    std::tr1::sregex_iterator::difference_type minPosition = 0;
    const std::tr1::sregex_iterator end;
    for (std::tr1::sregex_iterator it(full_command.begin(),
                                      full_command.end(),
                                      split_by_colon);
         it != end;
         it++)
    {
        if (it->position() >= minPosition)
        {
            raw_command_list.push_back(it->str());
            minPosition = it->position() + it->length() + 1;
        }
    }
} 
```

# javascript - Very simple jQuery UI tooltip not working

> ID：14289782
> 
> 赞同：3
> 
> 时间：2013-01-12T03:05:38.200
> 
> 标签：javascript, jquery, jquery-ui, tooltip

I replicated the example of this site: [http://jqueryui.com/tooltip/#default](http://jqueryui.com/tooltip/#default)

Html:

```
<h3 title='this is the title of hello world'>hello world</h3> 
```

JS:

```
$(document).ready(function() {
  $(document).tooltip();
}); 
```

But it's still shows the regular tooltip only.

JSFiddle with added CSS resource: [http://jsfiddle.net/HjPtJ/](http://jsfiddle.net/HjPtJ/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T03:05:38.200

As you can read here [http://api.jqueryui.com/tooltip/](http://api.jqueryui.com/tooltip/) the tooltip widget is added in jQuery UI version 1.9, the JSFiddle has jQuery UI 1.8 added.

# php - 将缩进列表解析为布尔树

> ID：14289785
> 
> 赞同：2
> 
> 时间：2013-01-12T03:06:13.213
> 
> 标签：php, parsing, tree, indentation

我有一段文字如下

```
foo
and foo2
and bar
    or something
    and somethingElse
        or somethingElse2
        or somethingElse3
and baz
    or godknows
    or godknows2 
```

这应该解释为：

```
(
            foo
            && foo2
    && (bar || (something && (somethingElse || somethingElse2 || somethingElse 3)))
    && (baz || godknows || godknows2)
) 
```

目前我正在逐行阅读。我知道我需要测量缩进并解析下一行的表达式，以便找出当前行也属于的表达式，但是我无法弄清楚如何在不消耗下一行的情况下有效地做到这一点.

这似乎是一种具有递归解决方案的问题，但它正在逃避我。

输入格式不固定，我只是希望能够将一个相对可读的表达式变成一个布尔树，所以如果你能用更合适的格式回答，仍然可读，请做:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:26:42.037

使用这种缩进风格的 Python 通过维护一堆缩进级别来进行解析。在看到新行时，它通过查看当前深度是否增加来确定它是否已从前一行缩进。如果是这样，Python 会假装在输入流中插入了一个名为“INDENT”的不可见符号。然后它将新的深度压入堆栈。

如果缩进减少，Python 会反复弹出堆栈并假装一个名为“DEDENT”的不可见符号被插入到输入流中，直到缩进级别与堆栈上的值匹配。

您可以通过将“INDENT”和“DEDENT”替换为 ( 和 ) 来非常轻松地适应这种方法。之后您需要通过确保 ( 标记插入前一个变量之前进行小的转换，但我希望这不会太难。

通过这种更改，您应该能够非常轻松地解析它。例如，脚本

```
A
and B
    or C
       and D
or E 
```

会变成

```
A and (B or (C and D))) or E 
```

希望这可以帮助！

# android - 如何在android中有问题地打开视频录制

> ID：14289786
> 
> 赞同：-1
> 
> 时间：2013-01-12T03:06:27.177
> 
> 标签：android, android-camera

有没有办法打开相机并开始录制场景并在以编程方式后停止？我对此进行了谷歌搜索，但无法获得任何有用的信息。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:14:13.877

有时[开发者指南](http://developer.android.com/guide/topics/media/camera.html)比在网上寻找代码片段更节省时间。

# javascript - 更新 Javascript 对象

> ID：14289795
> 
> 赞同：0
> 
> 时间：2013-01-12T03:07:33.063
> 
> 标签：javascript

首先，这里的 javascript newb 正在做一个小宠物项目，试图在这方面做得更好。我正在构建一个 Image 对象

```
function Image (id, name, height, width) {
    this.id     = id;
    this.name   = name;
    this.height = height;
    this.width  = width;
} 
```

首要任务是写我能做的 id 和 name。

```
var image = new Image(
    json.revision_images[i].id, 
    json.revision_images[i].OrgImageName,
    json.revision_images[i].galleryid
); 
```

我的下一步是为对象的每个实例添加高度和宽度，这是我在围绕对象概念时遇到的问题。

我有一个小功能可以获取参考缩略图的自然高度和宽度。

```
function checkImageDimensions (id) 
{
     var img = $("#" + id);
     naturalDimension = getNatural(img);
} 
```

我该如何分配

```
this.height = naturalDimension.oHeight;
this.width = naturalDimension.oWidth; 
```

到基于 id 的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:12:56.937

正如kirugan所说，`Image`已经是浏览器中的现有功能。最好重命名你的。除此之外：

将您的图像对象存储在地图中，由 ID 键入：

```
var images = {};
// somewhere
images[json.revision_images[i].id] = new MyImage(
   json.revision_images[i].id, 
   json.revision_images[i].OrgImageName,
   json.revision_images[i].galleryid
);
// and
function checkImageDimensions (id) {
   var naturalDimension = getNatural($("#" + id));
   images[id].width = naturalDimension.width;
   images[id].height = naturalDimension.height;
} 
```

# java - 在 Netbeans 中创建 JAR 文件时出现清单文件问题

> ID：14289797
> 
> 赞同：4
> 
> 时间：2013-01-12T03:08:02.243
> 
> 标签：java, netbeans, jar

我想使用 clean 和 build 选项在 Netbeans 中创建一个 jar 文件。jar 文件已创建，但清单文件未更新；这意味着主类没有在清单文件中设置，所以当我运行 jar 文件时，它有“无法加载主类”的错误。

我该如何处理以及如何在项目属性中添加主类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T12:32:20.903

希望您没有在项目设置中设置主类。

所以右键单击项目。然后去属性。

在该屏幕上，您可以看到运行配置。

有地方配置你的jar文件的主类。所以在那里配置你的主类，然后按确定。

然后清理并重建项目。

在该清单文件应该更新之后。 ![看这个屏幕截图。](../Images/95880866d34f6f27521198704aa4d0fe.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T15:23:03.147

可能是您正在使用 shift+F6 键运行您的项目。您应该通过按 F6 键运行您的项目一次，然后 netbeans 会提供选择主类的选项，然后在清理和构建之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T04:00:26.643

右键单击 netbeans 项目并选择“属性”，然后选择“运行”。有选择主类的选项。从那里选择主类。然后单击“确定”。完成此操作后，在构建 jar 文件之前至少运行一次项目。

# javascript - grunt.js grunt-init 问题

> ID：14289799
> 
> 赞同：2
> 
> 时间：2013-01-12T03:08:13.430
> 
> 标签：javascript, shell, gruntjs

我最近迁移到 grunt-cli 并放弃了 global grunt v0.3.x。我正在尝试全局安装 grunt-init 并遇到了一个问题，即由于缺少 bin 文件或你有什么，它没有被添加到 PATH 中，所以我在 github repo 问题跟踪器中找到了问题 29（https： //github.com/gruntjs/grunt-init/issues/29)，卸载 grunt-init，运行 npm cache clear 并重新安装 grunt-init@0.2.0rc3 所以 shell 至少可以识别 grunt-init 命令，但不能当我尝试运行 grunt-init --help （或任何其他 grunt-init 命令）时，出现致命错误

```
$ grunt-init --help
Fatal error: Cannot call method 'apply' of undefined 
```

或尝试搭建模板

```
$ grunt-init gruntfile
Running "init:gruntfile" (init) task
Warning: Cannot call method 'apply' of undefined Use --force to continue.
Aborted due to warnings. 
```

有任何想法吗？

咕噜版本

```
$ grunt --version
grunt-cli v0.1.6 
```

和 Grunt 初始化版本

```
$ grunt-init --version
grunt-init v0.2.0rc3
grunt v0.4.0rc5 
```

我难住了。

# cakephp - 提交后CakePHP表单输入为空

> ID：14289805
> 
> 赞同：-1
> 
> 时间：2013-01-12T03:08:30.237
> 
> 标签：cakephp, input, get

```
echo $this->Form->create('Driver', array('type' => 'get'));
echo $this->Form->input('name');
echo $this->Form->end('Search'); 
```

结果 $this->request:

```
query => array(
    'name' => 'some name'
) 
```

问题是搜索后输入表单为空，尽管`$this->request->query['name'] = 'some name'`
在将表单更改回时一切都按预期工作`post`

> 编辑。包括模型和控制器。对于测试，我使用全新安装。型号（Driver.php）：

```
App::uses('AppModel', 'Model');
class Driver extends AppModel {
  public $displayField = 'name';
} 
```

> 控制器（DriversController.php）：

```
App::uses('AppController', 'Controller');
class DriversController extends AppController {
    public function index() {
        $drivers = $this->Driver->find('all');
        $this->set(compact('drivers'));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:07:37.130

在您的控制器代码中，您没有向我们展示您尝试访问提交的表单值的位置，因此我将尝试提供一些一般信息以帮助您移动。

要访问您的表单数据，您需要冷却使用请求。要确切了解发生了什么，请在您的控制器中输入以下之一...

```
print_r($this->request->data); 
```

或者

```
print_r($this->request); 
```

其中任何一个都会向您显示使用 CakePHP 注册的任何数据。

如果您想使用您的模型保存此存档。利用...

```
$this->Driver->save($this->request->data) 
```

您可能想先检查它是否是一个帖子......让我们完成代码......

```
public function submit() {
    if ($this->request->is('post')) {
        $this->Driver->create();
        if ($this->Driver->save($this->request->data)) {
            $this->Session->setFlash('Saved.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('FAILED');
        }
    }
} 
```

上面的信息可以在[这里](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html#adding-posts)更详细地阅读。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T04:20:39.750

You can set form values by assigning to $this->data.

```
$this->data = $this->request->query; 
```

# python - 如何从 openCV + python 导出 1x 速度视频

> ID：14289808
> 
> 赞同：0
> 
> 时间：2013-01-12T03:08:43.307
> 
> 标签：python, opencv, frame-rate

我当前使用 opencv 录制视频的模式看起来像这样

```
import cv    

capture=cv.CaptureFromCAM(self.deviceID)
img_size=cv.GetSize(cv.QueryFrame(capture))

#create a writer object for the video
writer=cv.CreateVideoWriter(
        filename='temp.avi',
        fourcc=cv.CV_FOURCC('M','J','P','G'),
        fps=15,
        frame_size=img_size,
        is_color=1)

while True:
    #grab the frame
    img=cv.QueryFrame(capture)

    #write frame to video
    cv.WriteFrame(writer,img)

    #if 'Enter' or 'Esc' key is pressed, end video capture
    c = cv.WaitKey(7) % 0x100
    if c == 27 or c == 10:
        break 
```

问题是我必须提前手动设置每秒帧数。我已经将图像存储在一个列表中并跟踪已经过去了多少时间，但这只是导出一个没有帧的文件：

```
import cv
import time

capture=cv.CaptureFromCAM(self.deviceID)
img_size=cv.GetSize(cv.QueryFrame(capture))

imgList=[]

zero=time.time()
while True:
    #grab the frame
    img=cv.QueryFrame(capture)

    imgList.append(img)

    cv.ShowImage("Window1",img)

    #if 'Enter' or 'Esc' key is pressed, end video capture
    c = cv.WaitKey(7) % 0x100
    if c == 27 or c == 10:
        break
duration=time.time()-zero

framesPerSecond=len(imgList)/duration)
writer=cv.CreateVideoWriter(
        filename='temp.avi',
        fourcc=cv.CV_FOURCC('M','J','P','G'),
        fps=framesPerSecond,
        frame_size=img_size,
        is_color=1)

for i in imgList:
    cv.writeFrame(writer,i) 
```

有点卡住。任何关于替代方法的建议或对我现有代码的调整都会非常有帮助。

# facebook - 我只想从 facebook graph api 获取用户的公开帖子

> ID：14289809
> 
> 赞同：3
> 
> 时间：2013-01-12T03:08:45.630
> 
> 标签：facebook

我只想从用户那里获得公开帖子。例如，当我运行以下查询时 - [https://graph.facebook.com/search?q=buy+AND+nokia+AND+lumia&limit=100&type=post](https://graph.facebook.com/search?q=buy+AND+nokia+AND+lumia&limit=100&type=post)

我从类别 = 社区获得帖子。我只想从用户而不是社区那里获取帖子。有没有办法过滤结果

# three.js - 画布渲染器中的覆盖材料

> ID：14289810
> 
> 赞同：0
> 
> 时间：2013-01-12T03:08:58.017
> 
> 标签：three.js

如果用户的浏览器不支持 WebGL，我会退回到 CanvasRenderer。出于性能原因，我希望在使用 CanvasRenderer 时仅渲染线框。但是我无法让 overrideMaterial 使用它。它可以很好地与 WebGLRendererer 一起工作，如下所示：

```
scene.overrideMaterial =  new THREE.MeshBasicMaterial({ color: 0xffffff, wireframe: true }); 
```

在 CanvasRenderer 中，这似乎没有任何效果，使 FireFox 无法响应，因为代码对于除了最简单的模型之外的所有模型来说都太重了。

以前，我通过遍历场景几何图形并仅覆盖“真实”材质，直接用线框材质替换了所有对象材质。这种方法有效，但会使材质和对象管理变得混乱，因为我希望模型中存在材质信息，即使它们没有被渲染。

是否可以将 scene.overrideMaterial 与 CanvasRenderer 一起使用？或者其他强制线框渲染的方式？我正在使用 r54。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:39:27.307

不，`CanvasRenderer`不支持`scene.overrideMaterial`。我认为你已经用尽了你的选择。

我会小心使用`MeshBasicMaterial`作为替代。仅当您的场景仅包含网格时才这样做 - 例如，没有线。

三.js r.54

# android - 使用 URL 的逐帧动画返回 null Drawable

> ID：14289811
> 
> 赞同：0
> 
> 时间：2013-01-12T03:09:04.727
> 
> 标签：android, url, bitmap, android-asynctask, android-animation

我想创建一个逐帧动画并从 URL 下载 Drawable。

**问题：** 是否可以从 onPostExecute 或 imageButton 中检索 bitmapDrawable？我想不出更简单的方法

以下代码不完整，我不知道如何从中检索`bitmapDrawable`，`onPostExecute`所以我从我现在拥有的内容中得到了一个 null Drawable。

**主要片段**

```
public class PrincipalFragment extends Fragment {

    private int mNum;
    private AnimationDrawable mframeAnimation = null;
    private static final int DELAY = 500;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments() != null ? getArguments().getInt("num") : 1;
    }

    /**
     * The Fragment's UI is just a simple text view showing its
     * instance number.
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.scrollview, container, false);

          ImageButton i = (ImageButton)v.findViewById(R.id.imageButton1);
          i.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                ImageButton button = (ImageButton)v;
                String principal = "principal";
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    button.setColorFilter(0x8066bbdd);
                    return true;
                } else if (event.getAction() == MotionEvent.ACTION_UP) {
                    button.setColorFilter(null);
                    Intent i = new Intent(getActivity(), SubView.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    i.putExtra("query", principal);
                    startActivity(i);
                    return true;
                }
                return false;
            }
        });
          ImageButton i2 = (ImageButton)v.findViewById(R.id.imageButton2);
          i2.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                ImageButton button = (ImageButton)v;
                String principal2 = "principal2";
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    button.setColorFilter(0x8066bbdd);
                    return true;
                } else if (event.getAction() == MotionEvent.ACTION_UP) {
                    button.setColorFilter(null);
                    Intent i = new Intent(getActivity(), SubView.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    i.putExtra("query", principal2);
                    startActivity(i);

                    return true;
                }
                return false;
            }
        });

          ImageDownloader.Mode mode = ImageDownloader.Mode.CORRECT;

          ImageDownloader imageDownloader = new ImageDownloader();
          imageDownloader.setMode(mode);          
          BitmapDrawable frame1 = imageDownloader.download(URLnames.URLS[0], i, getResources());
          BitmapDrawable frame2 = imageDownloader.download(URLnames.URLS[1], i2, getResources());

          int reasonableDuration = 2500;
            mframeAnimation = new AnimationDrawable();
            mframeAnimation.setOneShot(false);
            mframeAnimation.addFrame(frame1, reasonableDuration);
            mframeAnimation.addFrame(frame2, reasonableDuration);

            ImageView img = (ImageView) v.findViewById(R.id.img_animated);
            img.setImageDrawable(mframeAnimation);
            mframeAnimation.setVisible(true, true);

            img.post(new Starter());

        return v;
    }

    class Starter implements Runnable {
        public void run() {
            mframeAnimation.start();
        }
}

} 
```

**ImageDownloader.class**

```
public class ImageDownloader {
    private static final String LOG_TAG = "ImageDownloader";

    public enum Mode { NO_ASYNC_TASK, NO_DOWNLOADED_DRAWABLE, CORRECT }
    private Mode mode = Mode.NO_ASYNC_TASK;
    private Resources r = null;

    /**
     * Download the specified image from the Internet and binds it to the provided ImageView. The
     * binding is immediate if the image is found in the cache and will be done asynchronously
     * otherwise. A null bitmap will be associated to the ImageView if an error occurs.
     *
     * @param url The URL of the image to download.
     * @param imageView The ImageView to bind the downloaded image to.
     * @param resources 
     */
    public BitmapDrawable download(String url, ImageView imageView, Resources resources) {
        resetPurgeTimer();
        Bitmap bitmap = getBitmapFromCache(url);
        BitmapDrawable bitmapDrawable = new BitmapDrawable(r, bitmap);
        this.r = resources;

        if (bitmap == null) {
            bitmapDrawable = forceDownload(url, imageView);

        } else {
            cancelPotentialDownload(url, imageView);
            imageView.setImageBitmap(bitmap);

        }
        return bitmapDrawable;

    }

    /*
     * Same as download but the image is always downloaded and the cache is not used.
     * Kept private at the moment as its interest is not clear.
       private void forceDownload(String url, ImageView view) {
          forceDownload(url, view, null);
       }
     */

    /**
     * Same as download but the image is always downloaded and the cache is not used.
     * Kept private at the moment as its interest is not clear.
     * @param resources 
     * @return 
     */
    private BitmapDrawable forceDownload(String url, ImageView imageView) {
        // State sanity: url is guaranteed to never be null in DownloadedDrawable and cache keys.
        BitmapDrawable bitmapDrawable;
        if (url == null) {
            imageView.setImageDrawable(null);
            return null;
        }

        if (cancelPotentialDownload(url, imageView)) {
            switch (mode) {
                case NO_ASYNC_TASK:
                    Bitmap bitmap = downloadBitmap(url);
                    addBitmapToCache(url, bitmap);
                    imageView.setImageBitmap(bitmap);
                    break;

                case NO_DOWNLOADED_DRAWABLE:
                    imageView.setMinimumHeight(156);
                    BitmapDownloaderTask task = new BitmapDownloaderTask(imageView);
                    task.execute(url);
                    break;

                case CORRECT:

                    task = new BitmapDownloaderTask(imageView);
                    DownloadedDrawable downloadedDrawable = new DownloadedDrawable(task);
                    imageView.setImageDrawable(downloadedDrawable);
                    imageView.setMinimumHeight(156);
                    task.execute(url);

                    break;
            }
        }
        return null;

    }

    /**
     * Returns true if the current download has been canceled or if there was no download in
     * progress on this image view.
     * Returns false if the download in progress deals with the same url. The download is not
     * stopped in that case.
     */
    private static boolean cancelPotentialDownload(String url, ImageView imageView) {
        BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);

        if (bitmapDownloaderTask != null) {
            String bitmapUrl = bitmapDownloaderTask.url;
            if ((bitmapUrl == null) || (!bitmapUrl.equals(url))) {
                bitmapDownloaderTask.cancel(true);
            } else {
                // The same URL is already being downloaded.
                return false;
            }
        }
        return true;
    }

    /**
     * @param imageView Any imageView
     * @return Retrieve the currently active download task (if any) associated with this imageView.
     * null if there is no such task.
     */
    private static BitmapDownloaderTask getBitmapDownloaderTask(ImageView imageView) {
        if (imageView != null) {
            Drawable drawable = imageView.getDrawable();
            if (drawable instanceof DownloadedDrawable) {
                DownloadedDrawable downloadedDrawable = (DownloadedDrawable)drawable;
                return downloadedDrawable.getBitmapDownloaderTask();
            }
        }
        return null;
    }

    Bitmap downloadBitmap(String url) {
        final int IO_BUFFER_SIZE = 4 * 1024;

        // AndroidHttpClient is not allowed to be used from the main thread
        final HttpClient client = (mode == Mode.NO_ASYNC_TASK) ? new DefaultHttpClient() :
            AndroidHttpClient.newInstance("Android");
        final HttpGet getRequest = new HttpGet(url);

        try {
            HttpResponse response = client.execute(getRequest);
            final int statusCode = response.getStatusLine().getStatusCode();
            if (statusCode != HttpStatus.SC_OK) {
                Log.w("ImageDownloader", "Error " + statusCode +
                        " while retrieving bitmap from " + url);
                return null;
            }

            final HttpEntity entity = response.getEntity();
            if (entity != null) {
                InputStream inputStream = null;
                try {
                    inputStream = entity.getContent();
                    // return BitmapFactory.decodeStream(inputStream);
                    // Bug on slow connections, fixed in future release.
                    return BitmapFactory.decodeStream(new FlushedInputStream(inputStream));
                } finally {
                    if (inputStream != null) {
                        inputStream.close();
                    }
                    entity.consumeContent();
                }
            }
        } catch (IOException e) {
            getRequest.abort();
            Log.w(LOG_TAG, "I/O error while retrieving bitmap from " + url, e);
        } catch (IllegalStateException e) {
            getRequest.abort();
            Log.w(LOG_TAG, "Incorrect URL: " + url);
        } catch (Exception e) {
            getRequest.abort();
            Log.w(LOG_TAG, "Error while retrieving bitmap from " + url, e);
        } finally {
            if ((client instanceof AndroidHttpClient)) {
                ((AndroidHttpClient) client).close();
            }
        }
        return null;
    }

    /*
     * An InputStream that skips the exact number of bytes provided, unless it reaches EOF.
     */
    static class FlushedInputStream extends FilterInputStream {
        public FlushedInputStream(InputStream inputStream) {
            super(inputStream);
        }

        @Override
        public long skip(long n) throws IOException {
            long totalBytesSkipped = 0L;
            while (totalBytesSkipped < n) {
                long bytesSkipped = in.skip(n - totalBytesSkipped);
                if (bytesSkipped == 0L) {
                    int b = read();
                    if (b < 0) {
                        break;  // we reached EOF
                    } else {
                        bytesSkipped = 1; // we read one byte
                    }
                }
                totalBytesSkipped += bytesSkipped;
            }
            return totalBytesSkipped;
        }
    }

    /**
     * The actual AsyncTask that will asynchronously download the image.
     */
    class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap> {
        private String url;

        private final WeakReference<ImageView> imageViewReference;

        public BitmapDownloaderTask(ImageView imageView) {
            imageViewReference = new WeakReference<ImageView>(imageView);
        }

        /**
         * Actual download method.
         */
        @Override
        protected Bitmap doInBackground(String... params) {
            url = params[0];
            return downloadBitmap(url);
        }

        /**
         * Once the image is downloaded, associates it to the imageView
         */
        protected void onPostExecute(Bitmap bitmap) {
            if (isCancelled()) {
                bitmap = null;
            }

            addBitmapToCache(url, bitmap);

            if (imageViewReference != null) {
                ImageView imageView = imageViewReference.get();
                BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);
                // Change bitmap only if this process is still associated with it
                // Or if we don't use any bitmap to task association (NO_DOWNLOADED_DRAWABLE mode)
                if ((this == bitmapDownloaderTask) || (mode != Mode.CORRECT)) {
//                  imageView.setImageBitmap(bitmap);
                    BitmapDrawable bitmapDrawable = new BitmapDrawable(r, bitmap);
                    imageView.setImageDrawable(bitmapDrawable);
                }
            }

        }
    }

    /**
     * A fake Drawable that will be attached to the imageView while the download is in progress.
     *
     * <p>Contains a reference to the actual download task, so that a download task can be stopped
     * if a new binding is required, and makes sure that only the last started download process can
     * bind its result, independently of the download finish order.</p>
     */
    static class DownloadedDrawable extends ColorDrawable {
        private final WeakReference<BitmapDownloaderTask> bitmapDownloaderTaskReference;

        public DownloadedDrawable(BitmapDownloaderTask bitmapDownloaderTask) {
            super(Color.BLACK);
            bitmapDownloaderTaskReference =
                new WeakReference<BitmapDownloaderTask>(bitmapDownloaderTask);
        }

        public BitmapDownloaderTask getBitmapDownloaderTask() {
            return bitmapDownloaderTaskReference.get();
        }
    }

    public void setMode(Mode mode) {
        this.mode = mode;
        clearCache();
    }

    /*
     * Cache-related fields and methods.
     * 
     * We use a hard and a soft cache. A soft reference cache is too aggressively cleared by the
     * Garbage Collector.
     */

    private static final int HARD_CACHE_CAPACITY = 10;
    private static final int DELAY_BEFORE_PURGE = 10 * 1000; // in milliseconds

    // Hard cache, with a fixed maximum capacity and a life duration
    private final HashMap<String, Bitmap> sHardBitmapCache =
        new LinkedHashMap<String, Bitmap>(HARD_CACHE_CAPACITY / 2, 0.75f, true) {
        @Override
        protected boolean removeEldestEntry(LinkedHashMap.Entry<String, Bitmap> eldest) {
            if (size() > HARD_CACHE_CAPACITY) {
                // Entries push-out of hard reference cache are transferred to soft reference cache
                sSoftBitmapCache.put(eldest.getKey(), new SoftReference<Bitmap>(eldest.getValue()));
                return true;
            } else
                return false;
        }
    };

    // Soft cache for bitmaps kicked out of hard cache
    private final static ConcurrentHashMap<String, SoftReference<Bitmap>> sSoftBitmapCache =
        new ConcurrentHashMap<String, SoftReference<Bitmap>>(HARD_CACHE_CAPACITY / 2);

    private final Handler purgeHandler = new Handler();

    private final Runnable purger = new Runnable() {
        public void run() {
            clearCache();
        }
    };

    /**
     * Adds this bitmap to the cache.
     * @param bitmap The newly downloaded bitmap.
     */
    private void addBitmapToCache(String url, Bitmap bitmap) {
        if (bitmap != null) {
            synchronized (sHardBitmapCache) {
                sHardBitmapCache.put(url, bitmap);
            }
        }
    }

    /**
     * @param url The URL of the image that will be retrieved from the cache.
     * @return The cached bitmap or null if it was not found.
     */
    private Bitmap getBitmapFromCache(String url) {
        // First try the hard reference cache
        synchronized (sHardBitmapCache) {
            final Bitmap bitmap = sHardBitmapCache.get(url);
            if (bitmap != null) {
                // Bitmap found in hard cache
                // Move element to first position, so that it is removed last
                sHardBitmapCache.remove(url);
                sHardBitmapCache.put(url, bitmap);
                return bitmap;
            }
        }

        // Then try the soft reference cache
        SoftReference<Bitmap> bitmapReference = sSoftBitmapCache.get(url);
        if (bitmapReference != null) {
            final Bitmap bitmap = bitmapReference.get();
            if (bitmap != null) {
                // Bitmap found in soft cache
                return bitmap;
            } else {
                // Soft reference has been Garbage Collected
                sSoftBitmapCache.remove(url);
            }
        }

        return null;
    }

    /**
     * Clears the image cache used internally to improve performance. Note that for memory
     * efficiency reasons, the cache will automatically be cleared after a certain inactivity delay.
     */
    public void clearCache() {
        sHardBitmapCache.clear();
        sSoftBitmapCache.clear();
    }

    /**
     * Allow a new delay before the automatic cache clear is done.
     */
    private void resetPurgeTimer() {
        purgeHandler.removeCallbacks(purger);
        purgeHandler.postDelayed(purger, DELAY_BEFORE_PURGE);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:13:22.250

我可以让它工作的唯一方法是使用**`Asynctask.get();`**，有人说这不是正确的方法，因为可能会冻结 UI，应该使用回调接口，很长一段时间后我无法让回调工作，**`Asynctask.get();`**现在是工作，代码是：

```
public Bitmap download(String url, ImageView imageView, Resources resources) throws InterruptedException, ExecutionException {
        resetPurgeTimer();
        Bitmap bitmap = getBitmapFromCache(url);

        this.r = resources;

        if (bitmap == null) {
            bitmapDrawable = forceDownload(url, imageView);

        } else {
            cancelPotentialDownload(url, imageView);
            imageView.setImageBitmap(bitmap);

        }
        return bitmapDrawable;

    }

    /*
     * Same as download but the image is always downloaded and the cache is not used.
     * Kept private at the moment as its interest is not clear.
       private void forceDownload(String url, ImageView view) {
          forceDownload(url, view, null);
       }
     */

    /**
     * Same as download but the image is always downloaded and the cache is not used.
     * Kept private at the moment as its interest is not clear.
     * @param resources 
     * @return 
     * @throws ExecutionException 
     * @throws InterruptedException 
     */
    private Bitmap forceDownload(String url, ImageView imageView) throws InterruptedException, ExecutionException {
        // State sanity: url is guaranteed to never be null in DownloadedDrawable and cache keys.
        Bitmap bitmap = null;
        if (url == null) {
            imageView.setImageDrawable(null);
            return null;
        }

        if (cancelPotentialDownload(url, imageView)) {
            switch (mode) {
                case NO_ASYNC_TASK:
                    Bitmap bitmap2 = downloadBitmap(url);
                    addBitmapToCache(url, bitmap2);
                    imageView.setImageBitmap(bitmap2);
                    break;

                case NO_DOWNLOADED_DRAWABLE:
                    imageView.setMinimumHeight(156);
                    BitmapDownloaderTask task = new BitmapDownloaderTask(imageView, this);
                    task.execute(url);
                    break;

                case CORRECT:

                    task = new BitmapDownloaderTask(imageView, this);
                    DownloadedDrawable downloadedDrawable = new DownloadedDrawable(task);
                    imageView.setImageDrawable(downloadedDrawable);
                    imageView.setMinimumHeight(156);
                    task.execute(url);
                    bitmap = task.get();
                    break;
            }
        }
        return bitmap; 
```

# r - 对 R 中 k 个变量的正值求和

> ID：14289815
> 
> 赞同：3
> 
> 时间：2013-01-12T03:09:45.897
> 
> 标签：r, sum, stata

我想首先找到一个`max of 0 or j`where`j`是任何变量，然后将这些求和为一个 dataframe 的 k (k=1,2,...k) 变量`data`。在`stata`，我做了如下：

```
 gen sum=max(0,x)+max(0,y)+max(0,z)+...+max(0,k) 
```

在`R`我使用以下方法：

```
data$sum<-ifelse(data$x<0,0,data$x*1)+ifelse(data$y<0,0,data$y*1)+ifelse(data$z<0,0,data$z*1)+...+ifelse(data$k<0,0,data$k*1) 
```

我想知道是否有另一种有效的方法`R`来做同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T03:14:22.203

试试这个：

```
mycols   <- c("x", "y", "z", "k")
data$sum <- rowSums(data[mycols] * (data[mycols] > 0)) 
```

* * *

检查一些示例数据：

```
data <- data.frame(x = runif(10) - 0.5,
                   y = runif(10) - 0.5,
                   z = runif(10) - 0.5,
                   k = runif(10) - 0.5)

identical(rowSums(data[mycols] * (data[mycols] > 0)), # mine
          ifelse(data$x < 0, 0, data$x * 1) +         # yours
          ifelse(data$y < 0, 0, data$y * 1) +
          ifelse(data$z < 0, 0, data$z * 1) +
          ifelse(data$k < 0, 0, data$k * 1))
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T04:07:52.257

Flodel 出色解决方案的替代方案，注意到第一个看起来很像您的 Stata 代码。

```
with( data,   # terrible name for an R object, BTW
   pmax(x, 0) + pmax(y, 0) + pmax(z, 0) +pmax(k,0) )

rowSums( apply(data[-5], 2, pmax, 0) ) 
```

第二个可能更慢，但它正在为这场 R 高尔夫比赛而战。也是一个矩阵数学解决方案：

```
as.matrix( (data[,1:4] > 0 )* data[, 1:4]) %*% rep(1, 4  ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T09:59:32.903

不是问题，但是在 Stata 中写出每个变量可能是乏味且容易出错的。这里可能有循环的范围：

```
gen sum = 0 
quietly foreach v of var varlist { 
    replace sum = sum + `v' if inrange(`v', 0, .) 
} 
```

您必须在哪里计算出 varlist 应该是什么。

# php - XPATH 获取 RSS 提要中同一元素内的多个值

> ID：14289818
> 
> 赞同：1
> 
> 时间：2013-01-12T03:10:22.320
> 
> 标签：php, xpath, xml-parsing, foreach, rss

我有一个格式如下的 rss 提要：

```
<item>
     <posturl>mysite.com/abc.html</posturl>
     <imagepath>123.jpg</imagepath>
</item>
<item>
     <posturl>mysite.com/def.html</posturl>
     <imagepath>456.jpg</imagepath>        
</item>
<item>
     <posturl>mysite.com/ghi.html</posturl>
     <imagepath>789.jpg</imagepath>    
</item> 
```

我有一个脚本，我想提取上面的两个值。我可以提取其中一个值并使用以下代码构建 html 代码：

```
<?php
     $xml = simplexml_load_file('http://myrssfeed.com');
     $imgs = $xml->xpath('//imagepath');
            echo '<ul>';
         foreach($imgs as $output1) {
            echo '<li><img src="' . $output1 . '" ></li>';
            }

            echo '</ul>';
 ?> 
```

感谢这里人们的所有帮助，这就像一个魅力。但我需要扩展**第二**条回声线以读取如下内容：

```
echo  '<li><a href="' . $output2 . '"><img src="' . $output1 . '" ></a></li>'; 
```

我需要有关如何在与 $output1 相同的项目中提取 $output2 = posturl 的帮助。

基本上我需要将图像显示为链接...... imagepath 和 posturl 都是项目中的元素。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:21:06.310

您可以选择`<item>`元素而不是`<posturl>`and `<imagepath>`。像这样：

```
$xml = simplexml_load_file('http://myrssfeed.com');

echo '<ul>';

foreach($xml->xpath('//item') as $item) { 
    printf('<li><a href="%s"><img src="%s" /></a></li>', 
        $item->posturl, $item->imagepath); 
}

echo '</ul>'; 
```

# python - Python跳过'for'循环

> ID：14289821
> 
> 赞同：0
> 
> 时间：2013-01-12T03:10:59.417
> 
> 标签：python

我正在制作一个在文件中搜索代码片段的程序。但是，在我的搜索过程中，它完全跳过了 for 循环（在 search_file 过程中）。我查看了我的代码，但找不到原因。Python 似乎只是跳过了 for 循环中的所有代码。

```
import linecache

def load_file(name,mode,dest):
    try:
        f = open(name,mode)
    except IOError:
        pass
    else:
        dest = open(name,mode)

def search_file(f,title,keyword,dest):
    found_dots = False

    dest.append("")
    dest.append("")
    dest.append("")

    print "hi"

    for line in f:
        print line
        if line == "..":            
            if found_dots:
                print "Done!"
                found_dots = False
            else:
                print "Found dots!"
                found_dots = True    
        elif found_dots:
            if line[0:5] == "title=" and line [6:] == title:
                dest[0] = line[6:]
            elif line[0:5] == "keywd=" and line [6:] == keyword:
                dest[1] = line[6:]
            else:
                dest[2] += line

f = ""
load_file("snippets.txt",'r',f)
search = []
search_file(f,"Open File","file",search)
print search 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:12:53.540

在 Python 中，参数不是通过引用传递的。也就是说，如果您传入一个参数并且函数更改*了该参数（不要**与*该参数的数据混淆），则传入的变量*将不会*更改。

您给出的是`load_file`一个空字符串，并且该参数在函数中被引用为`dest`. 您确实 assign `dest`，但这只是分配了局部变量；它没有改变`f`。如果你想`load_file`返回一些东西，你必须明确`return`它。

由于`f`从未从空字符串更改，因此将空字符串传递给`search_file`. 循环遍历字符串会遍历字符，但是空字符串中没有字符，所以它不会执行循环体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:33:35.400

在每个函数内部 add `global f`then`f`将被视为全局变量。您也不必传入`f`函数。

# android - android：如何调试用户界面

> ID：14289824
> 
> 赞同：5
> 
> 时间：2013-01-12T03:12:01.960
> 
> 标签：android, debugging, user-interface

我是 android 技术的新手，在开发应用程序时我需要调试 UI 组件，比如为什么这个 textview 没有显示。就像我们有用于 java 代码的 Log 工具一样，我们是否也有类似的东西用于 xml。这样我们就可以验证哪个布局与另一个布局重叠或找出 UI 中的其他失真

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-02T07:07:00.453

在 Eclipse 中，有一个有用的工具可以查看您的 UI 层次结构。在调试模式下，打开“设备”窗口（如果找不到：Alt+Shift+Q、Q）。然后单击“UI Automator 的转储视图层次结构”。

您可以在那里看到一些视图属性以及它的构建方式。

SDK tools/目录下还有一个hierarchy viewer，不过我还没用过。

![设备视图](../Images/837512126856c2891e6c9066c5f9c36d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:58:46.377

它确实有一个。一个很基础的。问题是，“调试器”不知道你想要什么。您`TextView`不显示对您来说是个问题，因为您希望它显示。但是调试器虽然您留下这样的代码只是因为您将在运行时以编程方式添加文本。所以 UI 调试器不能解决这类问题，但它会给你这样的提示和警告：![在此处输入图像描述](../Images/20d29dbd17a1a752390aeaf6898c203d.png)

# c++ - 插入和 push_back 指向唯一指针向量的指针会产生不同的编译行为吗？

> ID：14289827
> 
> 赞同：3
> 
> 时间：2013-01-12T03:12:49.173
> 
> 标签：c++, vector, c++11, unique-ptr

我有如下代码

```
vector<unique_ptr<int>> v;
v.insert(v.end(), new int(1)); // this is okay
v.push_back(new int(1)); // this is wrong, cannot convert int* to unique_ptr<int>&& 
```

为什么编译（vc2010）显示差异？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:31:20.783

这是因为在 VS2010 中，`v.insert(v.end(), new int(1));`被优化为调用`std::vector::emplace_back`哪个构造对象，而 std::vector::push_back 将尝试复制/转换`int*`到`std::unique_ptr<int>`然后它失败。要将智能指针推送到 STL 容器中，您可以指定确切的类型：

```
v.insert(v.end(), unique_ptr<int>(new int(1))); 
v.push_back(unique_ptr<int>(new int(1))); 
```

或者干脆打电话

```
v.emplace_back(new int(1)); 
```

我已经在 VS2010 和 VS2012 上测试了你的代码，但是 VS2012 不允许`v.insert(v.end(), new int(1));`，但是 emplace_back 在这两种情况下都有效。

# php - SQL 中是否有与 PHP 的 microtime() 等价的功能？

> ID：14289830
> 
> 赞同：0
> 
> 时间：2013-01-12T03:13:37.033
> 
> 标签：php, sql, sql-server

我假设您可以在 SQL 中为此进行查询，microtime() 是从服务器环境派生的，所以我希望 SQL 中有一个“like-for-like”，但我看不到它。我使用 MSSQL，但也会对其他数据库感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:25:37.640

假设 MySQL，你可以尝试这样的事情：

```
SELECT UNIX_TIMESTAMP(); 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/d41d8/5913)，它还显示了 MySQL 的 MicroSecond 方法的使用。

- 编辑

由于您使用的是 SQL Server，这可以工作吗：

```
SELECT SYSDATETIME() 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!3/d41d8/7679)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:37:48.463

```
 select cast(datediff(second,'19700101',CURRENT_TIMESTAMP) as varchar)
+'.'+ cast(DATEPART(microsecond,CURRENT_TIMESTAMP) as varchar) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-24T15:22:42.717

从 MYSQL 5.6.4 开始，`microtime()`您可以使用

```
select concat(mod(unix_timestamp(now(6)),1),'00 ',unix_timestamp()); 
```

并效仿`microtime(true)`

```
select concat(unix_timestamp(now(6)),'00'); 
```

两个查询上的“ `00`”都在那里，因为 MYSQL 的精度只有 6 位。[有关https://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_now](https://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_now)的更多信息

# windows-8 - F# TypeProviders 可以在 Windows 应用商店应用程序中使用吗？

> ID：14289834
> 
> 赞同：10
> 
> 时间：2013-01-12T03:14:06.957
> 
> 标签：windows-8, f#, windows-store-apps, type-providers

我似乎无法弄清楚如何让 F# TypeProviders 在 Windows Store (C#) 应用程序中工作。

据我所知，TypeProviders 只能在面向完整 .NET Framework 的程序集中使用，而 Windows 应用商店应用程序必须面向 .NET Portable。

我创建了一个 F# 程序集并引用了 F# TypeProviders 库，但是在尝试从我的 Windows 应用商店应用程序中引用此程序集时，我收到一条错误消息，指出无法引用该库。

有没有办法解决？我想使用 F# TypeProviders 来引用各种数据源，然后在我的 Windows Store 应用程序中使用生成的代码/类型。有人有这方面的经验吗？

更新：

为了清楚起见，我问是否有办法在 Windows 应用商店应用程序中使用标准 F# TypeProviders（例如 WsdlService）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T06:04:42.463

查看其他程序集`FSharp.Data.TypeProviders.dll`是引用，我认为没有办法解决这个问题。由于大多数类型提供程序用于以一种或另一种方式访问​​数据库（ADO.NET、LINQ to SQL、EF），因此它引用`System.Data.dll`了 WinRT 中不可用的内容。

可在 WinRT 中使用的内置类型提供程序支持的唯一数据源是 Web 服务和 OData 服务。如果它们在单独的库中实现，则它们的类型提供程序可能在 WinRT 项目中受支持，但在当前实现中不支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T11:13:55.150

类型提供者是设计/编译时工具。它应该在便携式库配置文件中工作。它可能取决于类型提供程序库是如何实现的，但总的来说，它应该可以工作。

有关详细信息，请参阅[具有可移植库的 F# 类型提供程序](https://stackoverflow.com/questions/13211117/f-type-providers-with-portable-library)

# jquery - 点击

时如何切换div类

> ID：14289835
> 
> 赞同：-1
> 
> 时间：2013-01-12T03:14:07.783
> 
> 标签：jquery, html, css, class

我有这个代码：

```
<p class="faqsli" onclick="faqs1.className='faqsanswer';">
  چگونه ایمیل دهی سایت را محدود کنم؟
</p> 
```

`<div id="faqs1" class="faqshide">sometext</div>` 我的CSS！

```
.faqsli{
padding: 0px 16px 0px 0px;
background-repeat: no-repeat;
background-image: url(miniic_li.png);
background-position: right 5px;
}
.faqshide{
display:none;
}
.faqsanswer{
font-family:Tahoma, Geneva, sans-serif;
margin-right:25px;
} 
```

它工作完美。

当有人单击该类时`<p>`，`<div>`该类会更改并向用户显示，但我也希望在第二次单击该类`<div>`时将其隐藏。`<p>`我必须做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:17:04.307

Try this instead:

```
<p class="faqsli" onclick="document.getElementById('faqs1').className='faqsanswer';"> 
```

Simply referring to the ID of the div does not get a reference to that div. You can use `document.getElementById()` to reference the `div` and then set the `className`.

If you're using jQuery this might make more sense:

**UPDATE: For dynamic `div` and `p`**

HTML

```
<p class="faqsli" data-div="faqs1">
    <!-- text here -->
</p>

<div id="faqs1" class="faqshide">
    <!-- other text here -->
</div> 
```

JS

```
$( document ).ready( function () {

    $( document ).on( 'click', '.faqsli', function () {

        var id = $( this ).attr( 'data-div' );
        $( '#' + id ).toggle();

    } );

} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:20:47.997

`toggleClass`在点击事件上使用。

```
<p class="faqsli" onclick="$('#faqs1').toggleClass('faqsanswer faqshide');">
  چگونه ایمیل دهی سایت را محدود کنم؟
</p> 
```

[**演示**](http://jsfiddle.net/ricardolohmann/h6tWy/)

# php - PHP 日期时间与 MySQL 日期时间

> ID：14289836
> 
> 赞同：1
> 
> 时间：2013-01-12T03:14:08.727
> 
> 标签：php, mysql, datetime

我想询问有关使用 MySQL 数据中的日期时间值更改 PHP 的日期时间值的问题。

我曾尝试在 PHP 上做到这一点：

```
$sitgl = date('Y-m-d', strtotime(2012-01-12));
$sijam = date('H:i:s', strtotime(13:00:00));
$awal = $sitgl.' '.$sijam;
$awal2 = date('Y-m-d H:i:s', strtotime($awal));
$debrangkat = strtotime($awal2); 
```

我正在尝试像这样在 MySQL 上转换相同的日期时间（将其转换为秒）：

```
SELECT date_start_book, time_start_book, (TO_DAYS(CAST(date_start_book AS DATE))*86400) + TIME_TO_SEC(CAST(time_start_book AS TIME)) FROM `t_request_queue` WHERE `request_id` = '1301-0087' 
```

这是 date_start_book 值是 2012-01-12 和 time_start_book 值是 13:00:00

我的问题是：为什么 PHP 代码返回值：1357970400 而 MySQL 值返回 63525214800？

我必须做什么才能使两者的价值相同？strtotime() 不返回一秒还是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:42:11.623

首先，正如其他人所建议的那样，php代码真的很伤脑筋。您可以在一行中创建 Unix 时间戳。但要回答你真正的问题。MYSQL TO_DAYS 的工作方式与 PHP UNIX 时间戳不同

根据[MySQL 网站](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_time-to-sec)

```
Given a date date, returns a day number (the number of days since year 0). 
mysql> SELECT TO_DAYS(950501);
        -> 728779
mysql> SELECT TO_DAYS('2007-10-07');
        -> 733321

 TO_DAYS() is not intended for use with values that precede the advent of the Gregorian calendar (1582), because it does not take into account the days that were lost when the calendar was changed. For dates before 1582 (and possibly a later year in other locales), results from this function are not reliable 
```

而根据[PHP网站](http://us.php.net/time) **时间戳**是

> 返回自 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00）以来以秒数测量的当前时间。

因此，两个值的差异。他们的出发点相距太远。MySQL 从 0 年开始，PHP 从 1970 年开始。

**建议**

我建议您将 php 的时间戳保存在 mysql 中，而不是格式化的日期时间。这将帮助您保持一致并允许您轻松执行任何日期或时间比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:26:43.003

最后，我将 PHP 更改为 datetime，并在查询中使用 ADD_DAYS 添加一个秒数的日期，然后将其与 PHP datetime 结果进行比较。

非常感谢所有贡献者。

# javascript - 快进定时器

> ID：14289838
> 
> 赞同：1
> 
> 时间：2013-01-12T03:14:26.583
> 
> 标签：javascript, timer, setinterval

我在快进计时器时遇到问题。在这个体育场，这是非常基本的。我有一个添加数字的间隔。像这样：

```
setInterval(function () {
    //+1 second
    //Format output to 00:00
    //Handle minute update
}, 1000); 
```

这很完美。计时器以正常速度运行。我想要做的是快进这个计时器。我想要一个计时器分钟来占用 1 秒。我努力了：

```
setInterval(function () {
    //+1 second
    //Format output to 00:00
    //Handle minute update
}, 15); 
```

这有时有效，有时无效。有时它会在 01:02 而不是 01:00 停止。这可能是我缺乏数学知识，但我不知道。你会怎么做？我将每隔“计时器分钟”停止和启动计时器，因此间隔正确很重要。

**编辑** 这是我希望它如何工作的小提琴：http: [//jsfiddle.net/tbleckert/pF4gs/](http://jsfiddle.net/tbleckert/pF4gs/)

**编辑 2** 也许我应该在停止计时器时调整时间？

**编辑 3** 大多数时候似乎 15 毫秒有效。但是有些东西不可靠，我认为最好的方法是调整时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:35:34.773

好的，我将自己回答这个问题。我觉得我说得不够清楚。当我启动计时器时，超时同时开始，一秒钟后停止计时器。这是出错的地方，计时器在停止时并不总是显示 01:00。

所以，最终的解决方案是每次停止时将秒数设置为 00，因为这一切发生得如此之快，你不会注意到。

```
setTimeout(function () {
  clearInterval(interval);
  $('.clock').html(rMin.slice(-2) + ':00');
}, 1000); 
```

检查我更新的小提琴：http: [//jsfiddle.net/tbleckert/pF4gs/2/](http://jsfiddle.net/tbleckert/pF4gs/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:21:45.880

我认为您应该做的是将间隔存储在一个变量中，以便您可以清除它，并以不同的延迟重新启动它。

```
var delay = 1000; // JavaScript uses milliseconds, so 1000 = 1 second
var theTimer  = '';

function startTimer(){
  theTimer = setInterval(function () {
     // Do awesome stuff here
  }, delay);
}

startTimer(); 
```

现在，当您想要更改间隔或快进计时器时，您所要做的就是清除当前`setInterval`并重新定义它 -

```
clearInterval(theTimer); // stop and clear the current timer
delay = 500; // Crank it up to twice the speed! 0.5 seconds!
startTimer(); // start a new setInterval(); 
```

## [这是一个简单的演示](http://jsfiddle.net/MVqvM/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T03:50:12.267

```
<!DOCTYPE html>
<html>
<head>
<script>
function myTimer(){
    this.startTime=0;
    this.intervalID=0;
    this.timePassed=0;
    this.multiplier=1;
    this.outputElement=null;
    this.start=function(){
        clearInterval(this.intervalID);
        this.timePassed=0;
        this.outputElement=document.getElementById("output");
        this.startTime=new Date();
        var me = this;
        this.intervalID=setInterval(function(){
            me.update(me);
        },100);
    }
    this.toTwoDigit=function(num){
        if(num<10){
            return "0"+num;
        }
        return new String(num);
    }
    this.toThreeDigit=function(num){
        if(num<10){
            return "00"+num;
        }
        if(num<100){
            return "0"+num;
        }
        return new String(num);
    }
    this.update=function(me){
        me.timePassed=me.timePassed+(100*me.multiplier);
        var seconds=Math.floor(me.timePassed/1000);
        var hours = Math.floor(seconds/3600);
        var minutes = seconds-(hours*3600);
        seconds = seconds%60;
        minutes=Math.floor(minutes/60);
        me.outputElement.innerHTML= me.toTwoDigit(hours)+":"
            +me.toTwoDigit(minutes)+":"
            +me.toTwoDigit(seconds)
            +":"+me.toThreeDigit(Math.floor(me.timePassed%1000));
    }
    this.speedup=function(){
        this.multiplier=this.multiplier*2;
    }
    this.slowDown=function(){
        this.multiplier=this.multiplier/2;
    }
    this.stop=function(){
        clearInterval(this.intervalID);
        this.update(this);
    }
}
var t = new myTimer();
</script>
</head>
<body onload="t.start();">
<input type="button" value="speed up" onclick="t.speedup()"></input>
<input type="button" value="slow down" onclick="t.slowDown()"></input>
<input type="button" value="stop" onclick="t.stop()"></input>
<input type="button" value="restart" onclick="t.start()"></input>
<input type="button" value="(re)start times 60" onclick="t.multiplier=60;t.start()"></input>
<div id="output"></div>
</body>
</html> 
```

# c# - How can I get the url of all tabs opened in a browser?

> ID：14289842
> 
> 赞同：0
> 
> 时间：2013-01-12T03:15:09.893
> 
> 标签：c#

I am creating a windows form app to keep track of the urls opened in my browser but a browser may contain many tabs.

How can i get the urls in all tabs opened at the same time using c#?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T06:42:42.160

1.  从 Firefox 和 Opera 获取 URL：

    ```
    DdeClient dde = new DdeClient(browser, "WWW_GetWindowInfo");
    dde.Connect();
    string url = dde.Request("URL", int.MaxValue);
    string[] text = url.Split(new string[] { "\",\"" }, StringSplitOptions.RemoveEmptyEntries);
    dde.Disconnect();
    return text[0].Substring(1); 
    ```

# windows-8 - windows 8 editable combobox

> ID：14289843
> 
> 赞同：0
> 
> 时间：2013-01-12T03:15:22.480
> 
> 标签：windows-8

In windows 8 xaml I wanted to add a editable combobox

for example : I want the following items to be in the combobox : item1, item2 and

When user clicks the combo becomes and the user can enter the text in place

Is this possible?

I have explored isReadOnly isEditable properites but they seem to be readonly properties

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:56:20.597

当用户在 ComboBox 中单击时，您可以处理单击事件并将 ComboBox 替换为 TextBox。

或者检查这个属性：[ComboBox.IsEditable Property](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.iseditable.aspx)

# java - How do you create a Hazelcast instance embedded in-process/in-memory, without networking?

> ID：14289845
> 
> 赞同：11
> 
> 时间：2013-01-12T03:15:33.623
> 
> 标签：java, hazelcast

In my unit tests, I want to create an embedded (in-process/in-memory) Hazelcast instance that does not attempt to start or perform any networking operations at all.

How do I do this?

For example:

```
Config config = new Config();

// what goes here?

HazelcastInstance inProcessOnly = Hazelcast.newHazelcastInstance(config); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-05-03T10:07:25.307

FWIW 我在 Hazelcast 3.6.1 中创建了一个测试，并使用构造函数中的以下代码以编程方式禁用了网络集群。这将创建一个用于测试的**独立**服务器。

它不像使用模拟那样快，但比接受默认配置要快。

```
Config config = new Config();
config.setProperty("hazelcast.shutdownhook.enabled", "false");
NetworkConfig network = config.getNetworkConfig();
network.getJoin().getTcpIpConfig().setEnabled(false);
network.getJoin().getMulticastConfig().setEnabled(false);
HazelcastInstance instance = Hazelcast.newHazelcastInstance(config); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-08T14:16:38.203

您还可以使用[TestHazelcastInstanceFactory](https://github.com/hazelcast/hazelcast/blob/master/hazelcast/src/test/java/com/hazelcast/test/TestHazelcastInstanceFactory.java)，它也被 Hazelcast 在内部用于单元测试。您需要为其添加此 Maven 依赖项：

```
<dependency>
  <groupId>com.hazelcast</groupId>
  <artifactId>hazelcast</artifactId>
  <version>${hazelcast.version}</version>
  <classifier>tests</classifier>
  <scope>test</scope>
</dependency> 
```

有关如何使用它的示例，请参阅[BasicCacheTest 。](https://github.com/hazelcast/hazelcast/blob/v3.5/hazelcast/src/test/java/com/hazelcast/cache/BasicCacheTest.java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T20:43:07.517

回答我自己的问题：

这似乎是不可能的，但是我在下面提到了一个很好的单元测试解决方案。查看 Hazelcast 的源代码，似乎网络代码是在节点构建时自动执行的，并且没有多少配置操作对我有用。如果可能的话，我很乐意以其他方式展示。

无论如何，我能够完成单元测试所需的内容：

作为 EasyMock 的长期用户，我不知道如何干净地测试调用的代码，`Hazelcast.newHazelcastInstance(config);`因为它是一个静态方法调用。这实际上是促使我提出这个问题的原因——我只是想要一个仅在内存中的 Hazelcast 实例进行测试。我不希望在我们受限的构建机器上尝试网络操作——我不知道机器是否受到足够的限制，以至于 Hazelcast 的发现逻辑可能会导致构建失败。

然后我找到了[PowerMock](http://code.google.com/p/powermock/)对 EasyMock 的扩展，允许我模拟静态方法调用。

使用 EasyMock 和 PowerMock，我能够对我们项目中所有与 Hazelcast 相关的代码进行完全单元测试，而无需实际启动 Hazelcast 环境。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-09T19:20:11.500

我能够对[Mockito](https://code.google.com/p/mockito/)做同样的事情。例如，使用一个[主题](http://www.hazelcast.com/docs/2.0/manual/single_html/#Topic)：

```
HazelcastInstance hazelcastInstance = Mockito.mock(HazelcastInstance.class);
Mockito.when(hazelcastInstance.getTopic("yourtopic")).thenReturn(Mockito.mock(ITopic.class)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-06T15:22:06.040

您可以在没有这样的模拟的情况下在内存中创建：

```
HazelcastInstance hazelcastInstance = Hazelcast.newHazelcastInstance(); 
```

您可以使用构造函数中的其他参数来模拟，这样您的代码将运行良好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-10T23:43:54.407

您可以使用 HazelcastTestInstance，如下所述： [https ://jukusoft.com/2017/01/11/java-hazelcast-junit-tests/](https://jukusoft.com/2017/01/11/java-hazelcast-junit-tests/)

（链接是德语，但代码是 Java）

# hadoop - Hive query output to file

> ID：14289846
> 
> 赞同：45
> 
> 时间：2013-01-12T03:15:49.690
> 
> 标签：hadoop, hive

I run hive query by java code. Example:

> "SELECT * FROM table WHERE id > 100"

How to export result to hdfs file.

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-12T03:25:39.263

以下查询会将结果直接插入 HDFS：

```
INSERT OVERWRITE DIRECTORY '/path/to/output/dir' SELECT * FROM table WHERE id > 100; 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-04-08T23:46:12.687

此命令会将输出重定向到您选择的文本文件：

```
$hive -e "select * from table where id > 10" > ~/sample_output.txt 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-04-30T02:54:19.940

这会将结果放在目录下的制表符分隔文件中：

```
INSERT OVERWRITE LOCAL DIRECTORY '/home/hadoop/YourTableDir'
ROW FORMAT DELIMITED
FIELDS TERMINATED BY '\t'
STORED AS TEXTFILE
SELECT * FROM table WHERE id > 100; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-23T10:25:00.570

我同意 tnguyen80 的回应。请注意，当查询中有特定的字符串值时，最好用双引号给出整个查询。

例如：

```
$hive -e "select * from table where city = 'London' and id >=100" > /home/user/outputdirectory/city details.csv 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-04T10:58:16.307

@sarath如果我想从不同的表运行另一个select *命令并写入同一个文件，如何覆盖文件？

INSERT OVERWRITE LOCAL DIRECTORY '/home/training/mydata/outputs' SELECT expl , count(expl) as total
FROM ( SELECT explode(splits) as expl FROM ( SELECT split(words,' ') as splits FROM wordcount ) t2 ) t3 GROUP BY expl ;

这是sarath问题的一个例子

以上是存储在本地目录中的输出文件中的字数统计作业:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-23T18:06:56.627

理想的方法是使用 "INSERT OVERWRITE DIRECTORY '/pathtofile' select * from temp where id > 100" 而不是 "hive -e 'select * from...' > /filepath.txt"

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-19T20:19:36.487

1.  创建外部表
2.  向表中插入数据
3.  可选稍后删除表，这不会删除该文件，因为它是一个外部表

例子：

创建外部表以将查询结果存储在*'/user/myName/projectA_additionaData/'*

```
CREATE EXTERNAL TABLE additionaData
(
     ID INT,
     latitude STRING,
     longitude STRING
)
COMMENT 'Additional Data gathered by joining of the identified cities with latitude and longitude data' 
ROW FORMAT DELIMITED FIELDS
TERMINATED BY ',' STORED AS TEXTFILE location '/user/myName/projectA_additionaData/'; 
```

将查询结果输入临时表

```
 insert into additionaData 
     Select T.ID, C.latitude, C.longitude 
     from TWITER  
     join CITY C on (T.location_name = C.location); 
```

删除临时表

```
drop table additionaData 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-02-15T15:46:22.507

两种方式可以存储 HQL 查询结果：

1.  保存到 HDFS 位置

```
INSERT OVERWRITE DIRECTORY "HDFS Path" ROW FORMAT DELIMITED FIELDS TERMINATED BY '|'
SELECT * FROM XXXX LIMIT 10; 
```

2.  保存到本地文件

```
$hive  -e "select * from table_Name" > ~/sample_output.txt
$hive -e "select * from table where city = 'London' and id >=100" > /home/user/outputdirectory/city details.csv 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-12T09:08:05.847

要将文件直接保存在 HDFS 中，请使用以下命令：

```
hive> insert overwrite  directory '/user/cloudera/Sample' row format delimited fields terminated by '\t' stored as textfile select * from table where id >100; 
```

这会将内容放在 HDFS 中的文件夹 /user/cloudera/Sample 中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-22T14:13:49.903

在 Hive 命令行界面中输入这一行：

`insert overwrite directory '/data/test' row format delimited fields terminated by '\t' stored as textfile select * from testViewQuery;`

`testViewQuery`- 一些具体的看法

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-25T20:49:27.663

要设置输出目录和输出文件格式等，请尝试以下操作：

```
INSERT OVERWRITE [LOCAL] DIRECTORY directory1
[ROW FORMAT row_format] [STORED AS file_format] 
SELECT ... FROM ... 
```

例子：

```
INSERT OVERWRITE DIRECTORY '/path/to/output/dir'
ROW FORMAT DELIMITED
STORED AS PARQUET
SELECT * FROM table WHERE id > 100; 
```

# php - Facebook (javascript SDK) create event with image

> ID：14289847
> 
> 赞同：0
> 
> 时间：2013-01-12T03:16:00.067
> 
> 标签：php, facebook, facebook-javascript-sdk

I'm having a hard time creating a facebook event with a picture. I've tried many things found on stackoverflow, but most of them are using the php SDK. Facebook documentation also doen't include an example on how to post a photo to the event.

The code I'm using is:

```
params = {'name': "some_name",
          'picture':"some_img_url_at_my_server",
          //or 'picture':"@some_img_url_at_my_server",
          //or '@picture':"@some_img_url_at_my_server",
          //or 'source':"some_img_url_at_my_server",
          //or 'source':"@some_img_url_at_my_server",
          //or 'picture':"some_img_path_at_my_server",
          //or 'picture':"@some_img_path_at_my_server",
          //or '@picture':"@some_img_path_at_my_server",
          //or 'source':"some_img_path_at_my_server",
          //or 'source':"@some_img_path_at_my_server",
          'start_time': "some_date"
};

FB.api('/me/events', 'post', params, function (response) {
    if (!response || response.error) {
        log(response.error);
    } else {
        alert('Post ID: ' + response.id);
    }
}); 
```

The event gets created but no picture is shown.

I read somewhere that I have to url encode the picture data to the post I'm making but I don't know the way to do that in order to try it.

I fetching the data from a php page so, I could do that in the php page as well, but again, I don't know what I have to do exactly.

Can anyone please help?

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:27:02.440

It looks like you have to do this in two steps:

1.  Create the event and get its `id`.
2.  `POST` to `/EVENT_ID/picture` with the picture content in the `source` parameter.

See [here](https://developers.facebook.com/docs/reference/api/event/#picture) for more details.

# android - Embedded Youtube player getting cut off

> ID：14289848
> 
> 赞同：1
> 
> 时间：2013-01-12T03:16:07.523
> 
> 标签：android, webview, youtube, android-4.0-ice-cream-sandwich, webchromeclient

I am trying to embed youtube video in my android app using WebView. Here is the code:

```
{
    WebView mView = new WebView(getContext());

    String embeded = loadPlayer(); // this is javascript string containing YtPlayer api
    WebSettings webSettings = mPreview.getSettings();
    webSettings.setJavaScriptEnabled(true);
    mView.setBackgroundColor(535353);

    WebChromeClient mChromeClient = new WebChromeClient();
    mView.setWebChromeClient(mChromeClient);
    mView.setWebViewClient(new WebViewClient());
    mView.loadDataWithBaseURL("http://www.youtube.com", embeded, "text/html", "utf-8", null);
} 
```

The problem I am having is my video gets clipped somewhere in the middle and the touch events on video don't work. Here is the link to screenshot:

![enter image description here](../Images/cdcdfe0cdfa22280f87d9c78350e2044.png)

Any ideas on what I am doing wrong here.

P.S. - This happens only on ICS 4.0.3 and it works fine on JellyBean 4.1

Any help is greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:33:38.557

我刚刚遇到相同类型的错误。

这里的问题是`Relative-Layout`。使用 Webview 时不要采用相对布局。

总是去**`Linear-Layout`**。当我将相对于线性更改时，视图是完美的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T15:37:41.080

您可以关闭硬件加速，它为我解决了这个问题。但是，它不再在亚马逊设备上播放。我仍在寻找解决这两个问题的方法。

```
webview.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

# macos - auto resize textfield when textfield is editing

> ID：14289849
> 
> 赞同：0
> 
> 时间：2013-01-12T03:16:10.080
> 
> 标签：macos

I have problem with my project on Mac OS. I have a textfield, I want to change size it automatically when textfield is editing!Please suggest me a way to solve this. Thanks so much!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:26:28.263

您需要将对象设置为`NSTextField`. 作为`NSTextField`的子类`NSControl`，如果您实现它，它将调用`-controlTextDidChange:`您对象上的方法。

```
@interface MyObject : NSObject
{
    IBOutlet NSTextField* textField;
}
@end

@implementation MyObject
- (void)awakeFromNib
{
    [textField setDelegate:self];
}

- (void)controlTextDidChange:(NSNotification *)aNotification
{
    if([notification object] == textField)
    {
        textField.font = [UIFont fontWithName:@"HelveticaNeue-Light" size:14];

    }
}
@end 
```

# jquery - jQuery scrollLeft is not scrolling

> ID：14289852
> 
> 赞同：7
> 
> 时间：2013-01-12T03:16:49.440
> 
> 标签：jquery, css, html

I have a container `div` with a `ul` inside of it setup like this jsFiddle: [http://jsfiddle.net/BQPVL/1/](http://jsfiddle.net/BQPVL/1/)

Why isn't the scroll working?

HTML:

```
<div id="outside">
  <ul id="inside">
    <li>hi</li>
    <li>how are you?</li>
    <li>i am good.</li>
  </ul>
</div>
<button id="left">&larr;</button>
<button id="right">&rarr;</button> 
```

CSS:

```
#outside {
  width: 200px;
  height: 50px;
  overflow: scroll;
}
#inside {
  width: 1000px;
}
#inside li {
  background: red;
  width: 99px;
  height: 40px;
  border-right: 1px solid black;
  float: left;
  padding: 5px;
} 
```

jQuery:

```
var position = $("#inside").scrollLeft();
$(document).ready(function() {
  $("#right").bind("click", function() {
    $("#inside").animate({
      scrollLeft: position + 100
    }, 1000);
  });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T06:15:18.717

您需要`scrollLeft`具有该`overflow`属性的元素，这就是您的`#outside`

***[jsBin 演示](http://jsbin.com/eyiney/1/edit)***

```
$(function() {  // DOM READY shorthand

  $("#right, #left").click(function() {
    var dir = this.id=="right" ? '+=' : '-=' ;
    $("#outside").stop().animate({scrollLeft: dir+'100'}, 1000);
  });

}); 
```

如您所见，您可以将两个按钮都附加到单击处理程序，并在其中检索单击的按钮`id`。
如果`this.id`返回`"right"`var `dir`wil become `"+="`，否则从逻辑上讲，您单击该变量`#left`并将`dir`保持`"-="`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:20:47.687

### 完美运行

你需要给`offset()`或`position()`。并对属性进行动画处理`left`。

```
$(document).ready(function() {
  $("#right").bind("click", function() {
    var position = $("#inside").position();
    $("#inside").animate({
      left: position.left - 100
    }, 1000);
  });
});
$("#left").bind("click", function() {
  var position = $("#inside").position();
  $("#inside").animate({
    left: position.left + 100
  }, 1000);
}); 
```

### 更正

1.  当你给出一个时，`float: left;`你需要清除你的浮动。请等到小提琴准备好...
2.  您还没有在小提琴中加载 jQuery。
3.  `position: relative;`需要给`UL`。

### 小提琴：http: [//jsfiddle.net/BQPVL/9/](http://jsfiddle.net/BQPVL/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T03:27:22.287

尝试使用这个：http: [//jsfiddle.net/BQPVL/10/](http://jsfiddle.net/BQPVL/10/)

```
$("#right").on("click", function () {
  $("#inside").stop(true, true).animate({
    left: '-=100'
  }, 1000);
});
$("#left").on("click", function () {
  $("#inside").stop(true, true).animate({
    left:'+=100'
  }, 1000);
}); 
```

# vb.net - Program has stopped working , only in "Release" Configuration

> ID：14289855
> 
> 赞同：0
> 
> 时间：2013-01-12T03:17:27.767
> 
> 标签：vb.net, visual-studio-2010

Please when i choose "Release" in configuration manager and try to open my program exe and work in it , A message box with "myprogram has stopped working .." , This happens just when release mode is choosen but debug mode, the program runs fine and no problems !

my program contains datasets and connections and more , all are about working with database access

Note: that message box dosen't appear when start my program , it appears after start and when open and close a certain forms

i cant put my code , it is very big about 1000 lines but i'am using this simple code to show a certain form :

```
 Dim o As New commandsSearch
    o.ShowDialog()
    o.Dispose() 
```

i think it is a memory problem , maybe?

please give me your solutions :)

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:19:45.080

`new`有时，当您在声明中进行初始化调用（使用 ）时，可能会发生这种情况。如果在初始化期间出现错误，则消息充其量只能是通用的。尝试暂时注释掉在加载初始表单之前创建的类等，一次几个，直到缩小范围（或消除它的可能性）。

# iphone - objective-c: help me understand views and modal transition

> ID：14289858
> 
> 赞同：1
> 
> 时间：2013-01-12T03:17:50.173
> 
> 标签：iphone, objective-c, storyboard, modal-dialog, segue

I'm lacking a serious understanding of how modal transitions work, so please do not leave the simplest answer out of this.

I have two views with their own view controllers set up in storyboard. A button on the main-menu leads to other-view. I set up this transition purely via ctrl-click and selecting the modal transition. I also have a button leading from the other-view back to the main-menu, set up similarly.

To further my understanding of these transitions I decided that I want the main menu to play a sound when it loads up, but only the first time i hit run, and not again when i go hit the button the other-view to go back to menu-view.

in my menu-view I have a private property BOOL

```
@interface MainMenuViewController ()
@property BOOL menuSoundPlayed;
@end 
```

and my viewDidLoad...

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if (!self.menuSoundPlayed){
        //sound setup code omitted for clarity
        AudioServicesPlaySystemSound(mySound);
        self.menuSoundPlayed = YES;
    }
} 
```

can someone help me understand why the menu sound plays every time main-menu view loads? I do acknowledge that the menuSoundPlayed is never really initialized, but I dont know where I would even do that.

side-note: I love that apple gives us all these conveniences like story-board, but I almost wish it was easier to see all the code behind these things, so i could actually understand what was going on when i 'segue' between views.

Anyways, thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:34:18.970

我做了更多的研究并回答了我自己的问题。

在我之前遇到的情况（在我的问题中描述）我有代码

```
[self performSegueWithIdentifier:@"mainMenuSegue" sender:sender]; 
```

正在执行，正如评论者所描述的，它启动了我的主菜单的一个新实例。

我想要的是返回到已经创建的主菜单实例。

为此，需要以下代码（显然使用您自己的完成块）：

```
[self dismissViewControllerAnimated:YES
                         completion:^{
                             NSLog("view dismissed");
                         }]; 
```

# c++ - Using a template Lambda expression inside a std::accumulate c++?

> ID：14289861
> 
> 赞同：0
> 
> 时间：2013-01-12T03:18:13.667
> 
> 标签：c++, std, lambda, accumulate

Is there to templatize the "ints" in the lambda function below in the case that there was a standard container of doubles or floats, etc.? I have searched the world over for help with this. I even asked for the help of my professor who says it is possible but is to cryptic about the answer.

```
template <typename T>
   float mean(T &container)
   {
     auto sum = std::accumulate(container.begin(), container.end(), 0/*initial value*/,
     [](int total, int cur)
     {
          return total+cur;
     }//end of lambda
   );//end of accumulate
   return static_cast<float>(sum) / container.size(); //to find the mean
}//end of mean 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:23:45.920

通常有一种方法可以从容器中获取所包含数据的类型。

例如，您可以替换该函数中的`int`s，该函数`T::value_type`应该支持所有公开此类 typedef 的容器。

这不适用于诸如此类的类型，`map`但如果您想支持它们，您可以专门针对它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T03:41:26.627

但在我看来，以这种方式编写这样的函数可能会导致数据丢失，例如

```
std::vector<float> vf;
vf.push_back(1.3);
vf.push_back(1.5);
vf.push_back(1.3);
vf.push_back(1.123);
vf.push_back(1.526);
float m=mean(vf); 
```

将始终返回 1

这里的答案 >>>[使用 std::accumulate 计算均值](https://stackoverflow.com/questions/9599552/compute-mean-using-stdaccumulate-fails)在编辑部分失败并不是真的，就好像我`vf.push_back(1.3);`改成`vf.push_back(3.3);`我会得到想要的结果一样。

# android - 在活动中查找根布局

> ID：14289863
> 
> 赞同：20
> 
> 时间：2013-01-12T03:18:36.783
> 
> 标签：android, layout

是否有一种动态方法可以获取当前设置为我的活动的 XML 中的根布局（所有其他布局的父布局）？

我所追求的是而不是给我的根布局一个明确的 id 并通过 findViewById 找到它，我希望得到一些类似的东西

伪代码：

```
this.findTopLayout(); 
```

已经打过电话`setContentView(R.layout.foo);`

我在规范中没有看到任何可以解决问题的东西，我只是错过了它，还是没有办法做到这一点？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-12T03:36:34.317

您尝试这种方式来获取根布局：

> getWindow().getDecorView().findViewById(android.R.id.content);

或者

> getWindow().getDecorView().getRootView();

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T03:38:26.767

请注意，除了 Grishu 描述的方法之外，您还可以在**任何**视图（包括按钮、图像视图、布局等）上使用[getParent方法来获取该视图的父视图（返回的父视图也可能有父视图）。](http://developer.android.com/reference/android/view/View.html#getParent%28%29)因此，另一种方法是从特定视图循环 getParent，直到 getParent 返回 null。那时，您将找到内容视图的根视图。

# javascript - 使用 onclick 将 Javascript 对象属性传递给函数

> ID：14289865
> 
> 赞同：0
> 
> 时间：2013-01-12T03:18:46.550
> 
> 标签：javascript, events, object, parameters, onclick

所以我正在努力用 Javascript 重新创建纸牌游戏 Dominion。我正在使用 OO Javascript，为每张卡片创建一个卡片对象。

我不会在这里发布我的所有代码，而是节省一些空间并将您链接到它：

网站： http: [//people.rit.edu/lxl1500/Prog4/Project%201/project1.html](http://people.rit.edu/lxl1500/Prog4/Project%201/project1.html)

脚本： http: [//people.rit.edu/lxl1500/Prog4/Project%201/main-script.js](http://people.rit.edu/lxl1500/Prog4/Project%201/main-script.js)

我遇到问题的地方：

在我的 createActions() 函数中，我为每个图像添加了一个 onclick 事件（我通过获取每个对象的 smallImage 属性来创建图像）。这个 onclick 应该调用我的 fullImage() 函数。此功能将简单地显示卡片的较大版本，以便玩家可以看到详细信息。因此，我想将 image 属性传递给函数，该属性包含较大图像源的字符串。

fullImage() 将接受对象属性作为 imageSrc。您现在可以通过单击图像看到未定义的警报。我唯一能想到的是当我调用 fullImage(this.image) - 这是对图像本身而不是对象的引用......我不知道如何完成我想要做的事情. 任何帮助将不胜感激！

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:25:04.160

您正在设置`onclick`为属性。您也许可以以某种方式使用它，但附加事件侦听器是一个更优雅的解决方案：

```
card.addEventListener('click', function() {
    // Handle click.
}, false); 
```

然后你可以`actionCards[i]`正常使用......除非你不能，因为`i`它将是最后一个索引的一个，因为我不会进入这里。¹解决此问题的最简单方法是在将函数添加为事件侦听器之前绑定函数：

```
card.addEventListener('click', function() {
    // Handle click.
}.bind(actionCards[i]), false); 
```

（我应该注意，`bind`它不是内置在一些旧浏览器中的。虽然我讨论的是浏览器兼容性，`addEventListener`但旧版本的 Internet Explorer 也不支持。）然后您可以使用`this`来引用您的`Card`对象。

* * *

### 脚注

¹好的，好的。这是因为 JavaScript 的函数作用域，当用户点击它时，循环结束了，当循环结束时，`i`卡片的数量会加一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:25:56.503

不知道为什么你有this.image。图像不是图像元素的属性。请记住，将调用 onClick 事件处理程序，并将此范围设置为发生 onclick 的元素。将其更改为 fullimage(this) ，您会看到 img 元素已传入，然后您可以将 fullimage 方法更改为 imageSrc.src = 'some url'; 更改图像 src 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T03:27:28.000

更改`fullImage(this.image)` 为`fullImage(this.src)`获取源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T03:33:15.673

在现代浏览器上这样做：card.addEventListener('click', fullImage.bind(actionCards[i]), false);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T03:37:18.367

是的，你是正确的 this.src 引用没有指向你想要的。单击图像卡时，它会运行 javascript

```
fullImage(this.image) 
```

由于这个 javascript 没有与调用它的 img 有任何连接，因此 Javascript 不知道是哪个图像调用了它。对此的一种解决方法是在您设置卡的属性时将正确的 src url 硬编码到函数调用中，因此：

```
card.setAttribute("onClick","fullImage(this.image)"); 
```

变成这样：

```
card.setAttribute("onClick","fullImage('" + card.src + "')"); 
```

这样卡的 src 在函数调用之前就被解析了，当函数被调用时，它知道要回显哪个 src。

希望这可以帮助！

编辑以包含引号

# javascript - module not loaded yet for context

> ID：14289869
> 
> 赞同：6
> 
> 时间：2013-01-12T03:19:35.707
> 
> 标签：javascript, node.js, requirejs

Quick question... I have a define for requirejs setup like so... it works about 8-10% of the time. It seems that a resource sometime isn't loaded in time. Can I wrap the above var require list in a way that ensures the code below it will run correctly? The error I get when it doesn't work is this:

**Uncaught Error: Module name "views/association/Associations" has not been loaded yet for context: _**

```
define(function( require ){
  // requirejs - too many includes to pass in the array
  var $ = require('jquery'),
      _ = require('underscore'),
      Backbone = require('backbone'),
      namespace = require('namespace'),
      // models
      CustomerModel = require('models/customer/customer'),
      // collections
      // views
      BaseView = require('views/baseView'),
      Auth = require('views/auth/Auth'),
      SideNav = require('views/sidenav/SideNav'),
      CustomersView = require('views/customer/Customers'),
      AssociationsView = require('views/association/Associations'),
      //CustomerListCpeView = require('views/customer/CustomerListCpe'),
      //CustomerAddCpeView = require('views/customer/CustomerAddCpe'),
      // templates
      CustomerDetailTemplate = require('text!templates/customer/customerDetail.html'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T21:47:40.537

即使使用“传统”或非糖方法 (http://requirejs.org/docs/whyamd.html#sugar)，此错误仍然存​​在。事实证明，我在重构期间不小心将循环导入引入了代码库。删除该循环导入删除了此错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T03:55:44.630

将其更改为

```
define([
    'jquery',
    'underscore',
    'backbone',
    // ...
    'views/association/Associations'
    // ...
], function($, _, Backbone, /* ..., */ AssociationsView) {

    // ...
}); 
```

# c++ - glDrawElements crashes when not using certain vertex attributes

> ID：14289870
> 
> 赞同：0
> 
> 时间：2013-01-12T03:19:48.113
> 
> 标签：c++, opengl, shader, vertex-attributes

In my OpenGL program I have two shaders. One renders with textures, and the other renders just solid colors. After compiling and linking a shader, I enable a texture coordinate vertex attribute array depending on weather or not the shader contains the attribute.

```
//This code is called after the shaders are compiled.

//Get the handles
textureU = glGetUniformLocation(program,"texture");
tintU = glGetUniformLocation(program,"tint");
viewMatrixU = glGetUniformLocation(program,"viewMatrix");
transformMatrixU = glGetUniformLocation(program,"transformMatrix");
positionA = glGetAttribLocation(program,"position");
texcoordA = glGetAttribLocation(program,"texcoord");

//Detect if this shader can handle textures
if(texcoordA < 0 || textureU < 0) hasTexture = false;
else hasTexture = true;

//Enable Attributes
glEnableVertexAttribArray(positionA);
if(hasTexture) glEnableVertexAttribArray(texcoordA); 
```

If I am rendering an `item` that is textured, each element in `verts` consists of 5 values (x,y,z,tx,ty), but if the item isn't textures, each element in `verts` contains only 3 values (x,y,z).

Here is the problem: When the first `item` rendered in the GL context does not have a texture, `glDrawElements` segfaults! However, if the first item rendered does have a texture, it works fine, and any untextured items after the textured one work fine (that is, until a new context is created).

This chunk of code renders an `item`

```
glBindBuffer(GL_ARRAY_BUFFER,engine->vertBuffer);
glBufferData(GL_ARRAY_BUFFER,sizeof(GLfloat)*item->verts.size(),&item->verts[0],GL_DYNAMIC_DRAW);

item->shader->SetShader();

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,engine->elementBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER,sizeof(GLuint) * item->indicies.size(),&item->indicies[0],GL_DYNAMIC_DRAW);

if(item->usingTexture)
    item->shader->SetTexture(item->texture->handle);

glUniformMatrix4fv(item->shader->transformMatrixU,1,GL_TRUE,&item->matrix.contents[0]);
glUniformMatrix4fv(item->shader->viewMatrixU,1,GL_TRUE,&item->batch->matrix.contents[0]);
glUniform4f(item->shader->tintU,item->color.x,item->color.y,item->color.z,item->color.w);

glDrawElements(GL_TRIANGLES,item->indicies.size(),GL_UNSIGNED_INT,0); //segfault 
```

Here is the function seen above that sets the shader.

```
glUseProgram(program); currentShader = program;
GLsizei stride = 12;
if(hasTexture) stride = 20;
glVertexAttribPointer(positionA,3,GL_FLOAT,GL_FALSE,stride,0);
if(hasTexture)
    glVertexAttribPointer(texcoordA,2,GL_FLOAT,GL_FALSE,stride,(void*)12); 
```

As far as I know, this problem is not apparent on Intel Integrated Graphics, which seem to be quite lenient.

**Edit:** If it is useful to know, I am using GLFW and GLEW.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:29:35.247

尝试`glDisableVertexAttribArray()`在您的绘图调用后添加相应的 s：

```
glEnableVertexAttribArray(positionA);
if(hasTexture) glEnableVertexAttribArray(texcoordA);
// draw
glDisableVertexAttribArray(positionA);
if(hasTexture) glDisableVertexAttribArray(texcoordA); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:32:39.327

问题是我在编译着色器后启用了顶点属性数组。这不是我应该启用它们的地方。

我在编译着色器时启用了 texcoord 属性，但由于第一项没有使用它，glDrawElements 会出现段错误。

我通过在设置着色器时启用该属性来解决此问题。

# javascript - 验证表单内的 DIV（可见向导步骤）内的 HTML 输入元素？

> ID：14289871
> 
> 赞同：2
> 
> 时间：2013-01-12T03:20:00.777
> 
> 标签：javascript, jquery, html, asp.net-mvc-4, wizard

我决定在 HTML 5 中创建一个向导表单（实际上在这里使用 ASP.NET MVC）。我有以下 HTML 表单：

```
@using (Html.BeginForm())
{
    <div class="wizard-step">
        <input type="text" name="firstname" placeholder="first name" />
    </div>
    <div class="wizard-step">
        <input type="text" name="lastname" placeholder="last name" />
    </div>
    <div class="wizard-step">
        <input type="text" name="suffix" placeholder="suffix" />
    </div>

    <button class="back-button" type="button">
        Back</button>
    <button class="next-button" type="button">
        Next</button>
} 
```

然后我有这个js脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        var $steps = $(".wizard-step");
        var index = 0;

        var count = $steps.length;
        $steps.each(function () {
            $(this).hide();
        });

        $(".back-button").attr("disabled", "disabled");

        var $currentStep = $steps.first();

        $currentStep.show();
        $currentStep.addClass("current-step");

        $(".back-button").click(function () {
            $currentStep.hide();
            $currentStep.removeClass("current-step");
            $currentStep = $currentStep.prev();
            $currentStep.addClass("current-step");
            $currentStep.show();
            index--;
            $(".next-button").removeAttr("disabled");
            if (index == 0) {
                $(this).attr("disabled", "disabled");
            }
            else {
                $(this).removeAttr("disabled");
            }
        });

        $(".next-button").click(function () {
            var $inputFields = $(".current-step :input");

            var hasError = false;
            $inputFields.each(function () {
                if (!validator.element(this)) {
                    hasError = true;
                }
            });

            if (hasError)
                return false;

            index++;
            $(".back-button").removeAttr("disabled");
            if (index == count - 1) {
                $(this).attr("disabled", "disabled");
            }
            else {
                $(this).removeAttr("disabled");
            }

            $currentStep.hide();
            $currentStep.removeClass("current-step");
            $currentStep = $currentStep.next();
            $currentStep.addClass("current-step");
            $currentStep.show();
        });
    });
</script> 
```

基本上，我想要的是在单击“下一步”按钮时，它将验证在当前可见 DIV 中找到的输入元素，而不是整个 FORM。是否可以使用 HTML5 做到这一点？如果没有，也许是 jQuery？

如果您有其他想法，请在此处分享。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:47:52.877

尽管在验证中缺少示例和教程，但在玩了一些 jquery 之后，我碰巧找到了解决方案。在 $(".next-button").click() 块内，我进行了以下更改：

老的：

```
var hasError = false;
$inputFields.each(function () {
   if (!validator.element(this)) {
      hasError = true;
   }
});

if (hasError)
   return false; 
```

新的：

```
var isValid = false;
$inputFields.each(function () {
  isValid = $(this).valid();
});

if (!isValid)
return false; 
```

=======================

我还可以在 $(document).ready() 行下添加这个以使用/添加 jquery 验证规则：

```
$("#myForm").validate({
  rules: {
    lastname: "required"
  }
}); 
```

# css - 如何禁用手机上按钮的悬停状态？

> ID：14289873
> 
> 赞同：2
> 
> 时间：2013-01-12T03:20:13.660
> 
> 标签：css

我有一个带有“关注”的“关注”按钮，单击该按钮会更改一个类，并且可见的文本是“关注”。悬停时，此更改为“取消关注”。

工作得很好。在移动（电话）上，单击它似乎会将其锁定为“悬停”状态。结果，它完全绕过了“关注”并显示“取消关注”。如果我点击屏幕上的其他位置，它会自行“修复”。

有什么办法可以让这种情况自动发生吗？`$('body').click()`没有为我做任何事...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:05:00.223

您可以在 jquery 中使用 touchstart/touchend 事件。如果您只使用 CSS，我不知道有什么解决方案，但是除了悬停事件之外，您还可以将普通函数绑定到 touchstart/touchend 事件，或者执行以下操作。

```
$('.button').bind('touchstart',function(){
    $(this).addClass('hoverClass');
});
$('.button').bind('touchend',function(){
    $(this).removeClass('hoverClass');
}); 
```

这只是让您的“hoverClass”根据需要通过 CSS 更改按钮。我希望这足够清楚。基本上，touchstart/touchend 类似于悬停，但据我所知，不能仅通过 CSS 访问。

# python - Django：何时使用 QuerySet 无

> ID：14289887
> 
> 赞同：38
> 
> 时间：2013-01-12T03:22:19.530
> 
> 标签：python, django

刚刚在[django 文档中遇到了这个](https://docs.djangoproject.com/en/dev/ref/models/querysets/#none)

> 调用 none() 将创建一个从不返回任何对象的查询集，并且在访问结果时不会执行任何查询。qs.none() 查询集是 EmptyQuerySet 的一个实例。

我构建了很多 CRUD 应用程序（惊喜），但我想不出我需要使用`none()`.

为什么要返回一个 EmptyQuerySet？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-12T03:30:17.600

通常在您需要提供`QuerySet`，但没有提供的情况下 - 例如调用方法或提供给模板。

优点是如果您*知道*不会有结果（或不想要结果）并且您仍然*需要*一个结果，`none()`则不会访问数据库。

举一个不切实际的例子，假设您有一个 API，您可以在其中查询您的权限。如果帐户尚未确认，因为您已经拥有该`Account`对象并且您可以看到它`account.is_activated`，`False`您可以跳过检查数据库的权限，只需使用`Permission.objects.none()`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-04T10:23:53.480

如果您想附加到查询集但希望以空列表开头类似于我们实例化一个空列表以开始但逐渐向其附加有意义的值的情况示例..

```
def get_me_queryset(conditionA, conditionB, conditionC):
    queryset = Model.objects.none()

    if conditionA:
        queryset |= some_complex_computation(conditionA)
    elif conditionB:
        queryset |= some_complex_computation(conditionB)

    if conditionC:
        queryset |= some_simple_computation(conditionC)

    return queryset 
```

`get_me_queryset`应该几乎总是返回实例`django.db.models.query.QuerySet`（因为良好的编程）而不是`None`or `[]`，否则它会在以后引入头痛..

这样即使没有条件出现`True`，您的代码仍将保持不变。不再进行类型检查

对于那些不了解`|`操作员在这里的用法的人：

```
queryset |= queryset2 
```

它转化为：

```
queryset = queryset + queryset 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-02T13:04:20.107

queryset.none 的另一个用途是当您不知道是否会有对象但不想引发错误时。

例子：

```
class DummyMixin(object):

    def get_context_data(self,**kwargs):
        """ Return all the pks of objects into the context """

        context = super(DummyMixin, self).get_context_data(**kwargs)

        objects_pks = context.get(
            "object_list",
            Mymodel.objects.none()
        ).values_list("pk", flat=True)

        context["objects_pks"] = objects_pks 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-10T19:06:57.113

另一个很好的用例是如果某些调用方法想要调用`.values_list()`或类似结果。如果该方法返回 None，您将收到类似的错误

`AttributeError: 'list' object has no attribute 'values_list'`

但是如果你的子句返回`MyModel.objects.none()`而不是`None`，调用代码会很高兴，因为返回的数据是一个空的查询集而不是一个 None 对象。

Another way of putting it is that it allows you to not mix up return types (like "this function returns a QuerySet or None," which is messy).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-26T15:17:37.067

查看`qs.none()`Django 文档中其他示例中使用的位置很有用。例如，在[使用查询集初始化模型表单集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#changing-the-queryset)时，如果您希望结果表单集为空，则给出的示例是：

`formset = AuthorFormSet(queryset=Author.objects.none())`

# android - Android Speech to Text - 离线持续识别

> ID：14289890
> 
> 赞同：2
> 
> 时间：2013-01-12T03:23:13.417
> 
> 标签：android

做一些研究，我发现了一些与 Android 文本 API 不同的语音。

[袖珍狮身人面像](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

[安卓原生 API](http://viralpatel.net/blogs/android-speech-to-text-api/)

我有以下要求：

1.  必须能够支持离线语音识别（我不确定Android API是否可以做到这一点）
2.  必须能够检测并立即响应所说的每一个字。我宁愿这样而不是检测整个句子。我可以将返回的句子拆分为数组并获取每个单词。
3.  检测需要在后台处理（没有弹出窗口或 Android API 似乎做的任何事情）

有人可以推荐一个能够满足我要求的 API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T12:32:54.757

Pocketsphinx 满足您的所有要求。您所说的“Android Native API”基本上是一组接口定义，它不包含离线/在线的概念。

您还可以使用 Pocketsphinx 实现这些接口，因为它支持部分结果、置信度分数、n 最佳结果等。这样，任何 Android 应用程序都可以使用该实现。也许有人已经这样做了，但我不知道。

# javascript - 遍历数组中的对象，获取整数值

> ID：14289891
> 
> 赞同：1
> 
> 时间：2013-01-12T03:23:15.137
> 
> 标签：javascript, arrays, loops, for-loop, parsefloat

我正在尝试遍历数组中的对象，并使用键“价格”添加所有值。

```
var basket = [
    {
        price: "25.00",
        id: "Hat"
    }, {
        price: "50.00",
        id: "Jacket"
    }
]

/*objects within array. purpose = able to use a for loop using .length as follows*/

function test() {
    for(var i = 0; i < basket.length; i++){
        totalPrice = 0;
        alert(itemPrice);
        itemNum = basket[i];
        itemPrice = parseFloat(itemNum.price);
        totalPrice += itemPrice;
    }
    alert(totalPrice);
} 
```

我的`itemPrice`警报显示循环遍历两个对象，闪烁 25 然后 50。为什么我的`totalPrice`变量只存储第二个价格 50？运算符`+=`应与`totalPrice = totalPrice + itemPrice`? 任何解释和修复将不胜感激，试图得到一个很好的理解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:30:17.647

第一次进入循环时，设置`totalPrice`为 0。然后添加第一个项目的价格，因此 totalPrice 为 25。然后第二次进入循环，`totalPrice`再次设置为 0，0 + 50 = 50。

`totalPrice`您应该在循环之前进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:53:21.943

使用减少：

```
basket.reduce( function( previousValue, currentValue ){
           return previousValue += parseInt(currentValue.price) 
 }, 0); 
```

示例：http: [//jsfiddle.net/ysJS8/](http://jsfiddle.net/ysJS8/)

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)

# regex - 需要正则表达式帮助来删除 CSS 代码

> ID：14289892
> 
> 赞同：0
> 
> 时间：2013-01-12T03:23:31.593
> 
> 标签：regex

我们如何使用正则表达式（替换）在一个长字符串中查找所有出现的以下 CSS 代码并删除它们（XMP 代码是我添加的）？谢谢。

```
<xmp> 
body { font-family : "Courier New", Courier, monospace; font-size : 9pt; valign : top; text-align : left; line-height: 9pt } 

td { 
font-family : "Courier New", Courier, monospace; font-size : 9pt; valign : top; text-align : left; line-height: 9pt } 
</xmp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:57:52.527

如果您想删除“\\\\”以及其中包含的内容！这就是你在 python 中的做法：

```
s="<xmp> your css code</xmp>"
s=re.sub("<xmp>.*</xmp>", " ",s) 
```

输出：

```
>>>s
'' 
```

在上面的代码中，我用标记和 $'.*' 开头的所有内容都替换了，基本上告诉 python 解释器包含所有字符，直到结束标记，并用 $"" 替换整个内容。

如果您只想删除标签的内容，那么：

```
s="<xmp> your css code</xmp>"
code_inside_xmptag=re.search("<xmp>(*.)</xmp>",string)
s=re.sub(code_inside_xmptag.group(1)," ",string) 
```

输出：

```
>>>s
<xmp> </xmp> 
```

在这里，我基本上是在搜索标签并为包含的内容创建一个组。我将其作为要替换/替换的字符串传递。您可以阅读更多关于 python 中的正则表达式：[这里](http://docs.python.org/2/library/re.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:37:25.077

假设您提供的字符串在里面`myString`，所有的 css 代码都在里面`cssString`。

```
cssString = cssString.replace(myString, ''); 
```

# ruby-on-rails - REST API 命名约定问题

> ID：14289894
> 
> 赞同：0
> 
> 时间：2013-01-12T03:23:39.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest

我有一个控制器来处理测验上的 CRUD 操作，称为 QuizController。

然后，用户可以参加当前的测验（一次只有一个可用的测验）。

将该控制器命名为 QuizController 也很诱人，如果它的命名空间不同，我也可以命名。但这对我来说天生就不够描述。

它可以称为 QuizResultsController。但这也不是很好。

您如何命名这样一个向用户显示当前测验并让他们提交答案的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:34:06.460

如果您不想创建一个完整的单一用途控制器，您可以添加一个显示当前测验的`#current`操作。`QuizzesController`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:27:06.820

按照惯例，应该调用为您的测验处理 CRUD 操作的控制器，以便在您描述的上下文中`QuizzesController`释放以供使用。`QuizController`

就是说，我会同意`QuizzesController`并`CurrentQuizController`让区别更大。

# java - Android 编程。为什么我的代码行不通

> ID：14289896
> 
> 赞同：-1
> 
> 时间：2013-01-12T03:23:48.377
> 
> 标签：java

我一直在编写一些代码，试图将两个链接起来`activties`，我快到了，但我遇到了一个问题。

我的一行代码无法访问。谁能解释为什么？

```
package com.example.twolink

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    getActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}  

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);

    Button button2 = (Button) findViewById(R.id.button2);
    button2.setOnClickListener(new OnClickListener() {          
        public void onClick(View v) {
            startActivity(new Intent(getApplicationContext(), MainActivity2.class));
            finish();
        }   
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:25:34.150

在`onOptionsItemSelected(...)`，你`return super.onOptionsItemSelected(item);`就在`switch`块之后。此时您的方法退出。之后的一切都是无法访问的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:33:27.327

在 onCreate 方法上初始化您的 Button，如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button button2 = (Button) findViewById(R.id.button2);
    button2.setOnClickListener(new OnClickListener() {          

    public void onClick(View v) {
        startActivity(new Intent(getApplicationContext(), MainActivity2.class));
        finish();
    }  
    getActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

如果您想最初隐藏按钮，请使用`setVisibility(View.GONE)`切换按钮的可见性。然后，如果您想稍后显示它，您可以`setVisibility(View.VISIBLE)`在其他地方显示。

# asp.net - 属性 connectionstringName 缺失或为空

> ID：14289899
> 
> 赞同：0
> 
> 时间：2013-01-12T03:25:09.280
> 
> 标签：asp.net

尝试使用会员资格或个人资料获取或创建用户时出现此异常。这是我的 web.config 代码。我使用的是 VS2010 Framework 4.0。

可能是什么问题呢？

```
 <connectionStrings>
    <add name="classConnectionString" connectionString="Data Source=MINHAS\SQLEXPRESS;Initial Catalog=Test;Integrated Security=True"/>
</connectionStrings>
    <profile defaultProvider="MyProvider">
        <properties>
            <add name="Name" type="System.String"/>
            <add name="ID" type="System.String"/>
            <add name="Color" type="System.String"/>
        </properties>
        <providers>
            <clear/>
            <add name="MyProvider" type="System.Web.Profile.SqlProfileProvider" connnectionStringName="classConnectionString" applicationName="/"/>
        </providers>
    </profile>
    <membership defaultProvider="MyProvider">
        <providers>
            <add name="MyProvider" connnectionStringName="classConnectionString" type="System.Web.Security.SqlMembershipProvider" applicationName="/" enablePasswordRetrieval="true" enablePasswordReset="true" passwordFormat="Encrypted" requiresQuestionAndAnswer="true"/>
        </providers>
    </membership> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:13:11.073

您在连接字符串名称中给出了三倍 n

```
connnectionStringName="classConnectionString" 
```

# c# - 如何通过绑定在 XAML 中的 Windows 窗体 UserControl 设置值？

> ID：14289902
> 
> 赞同：0
> 
> 时间：2013-01-12T03:25:38.660
> 
> 标签：c#, wpf, xaml, itemscontrol, windowsformshost

我正在处理这种情况。我有一个项目控件，其中作为项目模板我有一个 windows 窗体 userControl，并且在后面的代码中我正在设置 ItemsSource，但我不知道在 userControl 中设置一些数据。

在它的 UserControl 中，我有一些具有特定结构的 datagridview，而 WPF 网格视图对我没有用。所以我不能改变这个用户控件。

```
 <ItemsControl x:Name="itemsControl">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <WindowsFormsHost x:Name="wfh" Grid.Column="2" Margin="10,0,0,10" />
                        <local:StudentHistoryUserControl />
                    </WindowsFormsHost>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

我可以做些什么来访问该用户控件并设置一些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:37:29.710

[WindowsForms 和 WPF 混合应用程序中的数据绑定](http://blogs.msdn.com/b/mhendersblog/archive/2005/10/03/476438.aspx)

因为涉及到 Windows 窗体，所以 XAML 数据绑定不会完全起作用。您需要在后面的代码中设置数据绑定。

# windows - 用cmd打开jar文件

> ID：14289904
> 
> 赞同：2
> 
> 时间：2013-01-12T03:25:41.337
> 
> 标签：windows, jar, cmd, java

我有一个名为“adventure.jar”的 jar 文件。当您通过 cmd 运行它时，`java -jar adventure.jar`它工作正常。但是，我正在测试在新计算机上打开文件时遇到了问题。`java`此计算机在命令提示符中没有该命令。它已经安装了 Java，但可能只是没有安装 JDK？无论如何，我的目标是让 jar 文件在双击时从 cmd 运行，而不需要命令（这甚至可能吗？）。该 jar 已经是可执行的，但它不像我需要的那样从命令提示符执行。任何帮助，将不胜感激。

编辑：如果有办法通过 exe 或批处理文件执行此操作，我也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:31:07.883

听起来像你的 PATH 环境。变量中没有Java。您可以按照 Oracle 的教程添加它

[将 Java 添加到 PATH 环境变量中。](http://java.com/en/download/help/path.xml)

通常是这样的`;C:\Program Files\Java\jre7\bin`

对于你的第二个问题 - 是的，这是可能的。
打开记事本，然后键入`java -jar adventure.jar`然后将其另存为`launch.bat`或其他内容。然后您可以双击该批处理文件，它将运行您的 java 存档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T03:31:55.533

首先，`start adventure.jar`从命令提示符尝试。如果这不起作用，请找到`java.exe`（在我的计算机上`C:\Program Files\Java\jre7\bin`）并使用命令提示符中的完整路径，或者将路径添加到包含`java.exe`您的`PATH`环境变量的文件夹。添加路径，点击开始菜单，右键计算机，点击属性，点击高级系统设置，点击环境变量，然后`PATH`在系统变量下找到并点击编辑，添加路径（例如：将以下内容添加到PATH的末尾:`;C:\Program Files\Java\jre7\bin`并且不要忘记分号！）

希望能帮助到你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-30T14:50:57.643

打开命令提示符

转到jar文件所在的文件夹

跑

```
unzip test.jar 
```

这里**test.jar**是 jar 文件的名称。

此命令会将所有文件解压缩到该文件夹​​中

# python - Python - 奇怪的 UnboundLocalError

> ID：14289910
> 
> 赞同：0
> 
> 时间：2013-01-12T03:26:45.910
> 
> 标签：python

当我运行以下功能时：

```
def checkChange():
    for user in userLinks:
        url = userLinks[user]
        response = urllib2.urlopen(url)  
        html = response.read() 
```

我明白了

```
Traceback (most recent call last):
  File "InStockBot.py", line 34, in <module>
    checkChange()
  File "InStockBot.py", line 24, in checkChange
    html = response.read()
UnboundLocalError: local variable 'response' referenced before assignment 
```

这对我来说毫无意义。我没有全局 var 响应。我希望它正常工作如下。

```
>>> url="http://google.com"
>>> response = urllib2.urlopen(url)  
>>> html = response.read()
>>> html
'<!doctype html> 
```

有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:35:37.187

您的代码没有正确缩进。将其更改为此，它会工作（可能不像预期的那样，但它会工作）：

```
for user in userLinks:
    url = userLinks[user]
    response = urllib2.urlopen(url)  
    html = response.read()

    if userSources[user] != html:
        del userSources[user]
        del userLinks[user]
        api.PostDirectMessage(user,'It appears the page has updated! Your item may be back in stock!') 
```

发生错误是因为您`response`在`for`循环中定义，但如果循环没有运行（即`userLinks == []`），则永远不会设置该变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:36:25.823

您正在混合制表符和空格。查看您粘贴的原始代码：

```
'    def checkChange():'
'    \tfor user in userLinks:'
'    \t\turl = userLinks[user]'
'    \t\tresponse = urllib2.urlopen(url)  '
'            html = response.read()' 
```

您可以在最后一行看到开关。实际上，这意味着该`html = response.read()`行没有像您想象的那样缩进，这意味着如果`userLinks`为空，您将得到：

```
Traceback (most recent call last):
  File "inde.py", line 10, in <module>
    checkChange()
  File "inde.py", line 5, in checkChange
    html = response.read()
UnboundLocalError: local variable 'response' referenced before assignment 
```

运行您的代码`python -tt yourprogramname.py`以确认这一点，并切换到始终使用四空格制表符。

# ios - AppDelegate.m 和 ViewController.h 文件在我的 xcode 项目导航器中变为红色

> ID：14289917
> 
> 赞同：1
> 
> 时间：2013-01-12T03:27:21.367
> 
> 标签：ios, objective-c, xcode

我重新打开了我的 xcode 项目，`AppDelegate.h`并且`ViewController.m`文件是红色的。标题在那里，但它们似乎是空的。有谁知道如何检索这些文件，还是丢失了？我在那里有相当多的代码，所以我希望没有。我是新手，所以任何基本步骤类型的帮助都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:31:44.650

检查您是否错误地删除了它。检查物理文件夹以确保文件在那里。如果它在那里，请从 Xcode 中删除红色链接并尝试再次添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:32:06.787

听起来它要查找的文件与您上次打开项目时所在的位置不同。找到有问题的文件，将它们添加回您的项目，然后删除红色链接。

# c++ - Boost C++ 有下载/Web 库吗

> ID：14289923
> 
> 赞同：1
> 
> 时间：2013-01-12T03:27:53.957
> 
> 标签：c++, http, boost, download

> **可能重复：**
> [基于 Boost.ASIO 的 HTTP 客户端库（如 libcurl）](https://stackoverflow.com/questions/2251361/boost-asio-based-http-client-library-like-libcurl)

Boost C++ 是否有通过 HTTP 或 FTP 下载文件的命名空间/库？我正在编写一个将下载 XML 文件的应用程序。

该应用程序需要在 Windows XP 及更高版本上运行，这就是我关注 Boost C++ 的原因，因为它具有可移植性和开发速度。

如果Boost没有下载库，你知道可以下载文件并且兼容Cross Windows Version的库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:45:13.580

[Boost.Asio](http://www.boost.org/doc/libs/release/doc/html/boost_asio.html)可能是你想要的。

还有另一个很好的 C++ 库，名为 C++ Poco，它也提供 HTTP/FTP 下载功能。

# ios - 是否有用于音频播放的 iOS“播放器控制器”？

> ID：14289924
> 
> 赞同：2
> 
> 时间：2013-01-12T03:28:05.817
> 
> 标签：ios, audio, mp3, mpmovieplayercontroller

对于视频播放，我使用的是 MPMoviePlayerController，它提供了一个新的用户界面。有音频播放的等价物吗？我无法让 MPMoviePlayerController 播放 MP3 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:40:58.093

[AVAudioPlayer](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)可能适合您的需求。尽管它不像 MPMoviePlayerController 那样提供 GUI 元素，但它提供了一个高级 API，可以很容易地与自定义 UI 元素结合。

此外，您可以利用 Apple 的示例项目[avTouch](http://developer.apple.com/library/ios/#samplecode/avTouch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008636)来查看它是如何使用的（甚至包括在您自己的项目中）。

# php - 多个切换几乎就像标签 JavaScript/CSS

> ID：14289925
> 
> 赞同：0
> 
> 时间：2013-01-12T03:28:08.380
> 
> 标签：php, javascript, jquery

我想创建功能类似于切换的选项卡，但一次只能激活一个切换。选项卡的内容也需要在选项卡本身之上。问题是我正在使用循环来生成内容以及选项卡本身。

我在这里有一个很好的 javascript 代码，它工作得非常好。我也完全理解这一点。唯一的问题是，当单击另一个切换时，它显然不会禁用其他切换。还有一个“选项卡”/“切换”始终处于活动状态。代码可能会检查带有“post”前缀的 div id，并使所有带有“post”的 div id 显示：除了被点击的那个之外。如果可能的话，那将是完美的。我能想到的另一种方法是将所有生成的内容放入一个容器中，它只是禁用容器中除了被点击的ID之外的所有ID。

如果可以修改此代码以实现此目的，那就太好了。这是一些我非常清楚地理解的非常简单的代码。我所需要的是它的行为更像是一次只能激活一个的选项卡。

```
<script type="text/javascript">
function toggleMeMirror(a){
    var e=document.getElementById(a);
    if(!e) return true;
    if(e.style.display=="none"){
        e.style.display="inline"
    } else {
        e.style.display="none"
    }
    return true;
}
</script> 
```

HTML / PHP

循环 1 - 内容

```
<?php while ($queryepisodemirrors->have_posts()) : $queryepisodemirrors->the_post(); ?>
        <?php if(get_post_meta(get_the_ID(), 'parentIDmirror', true) == $postIDCheck) { ?>

        <div id="post-<?php the_ID(); ?>" style="display:none;">
                    <center><?php the_title(); ?><br /><br />
                    <?php echo get_post_meta(get_the_ID(), 'mirror_embed_code', true); ?>
                    <?php wprp(true);?>
                </center>
        </div>  
        <?php } ?>
<?php endwhile; ?> 
```

循环 2 - 实际的切换/选项卡

```
<?php while ($queryepisodemirrors->have_posts()) : $queryepisodemirrors->the_post(); ?>
        <?php if(get_post_meta(get_the_ID(), 'parentIDmirror', true) == $postIDCheck) { ?>
        <div style="float: left; padding: 4px;">
        <center>

        <div class="post-<?php the_ID(); ?>" onclick="return toggleMeMirror('post-<?php the_ID(); ?>')" >
            <div style="overflow: hidden; width: 150px; height: 100px;">
                <div style="background: rgb(0, 0, 0) transparent; /* fallback color */ background: rgba(0, 0, 0, 0.8); color: white; padding: 2px;">
                    <center>

                        <?php echo get_post_meta(get_the_ID(), 'video_provider', true);
                        echo ' Mirror';?>
                    </center>
                </div>
                <img src="<?php echo $thumbnail_src; ?>" width="150px"/>

            </div>
        </div>

        </center>
        </div>

        <?php } ?>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:26:58.693

这也被标记为 jquery，所以我只建议您包含 jquery 库并包括：

```
$('.someclass').hide(); 
```

作为 toggleMeMirror 函数的第一行。

然后，确保每个循环内容 div 都存在于“someclass”类中。

像：

```
foreach($this as $that) {
    print "<div class='someclass'>$that</div>";
} 
```

然后

```
function toggleMeMirror(a){
    // hide all
    $('.someclass').hide();
    //  show one
    var e=document.getElementById(a);
    if(!e) return true;
        if(e.style.display=="none"){
            e.style.display="inline"
        } else {
            e.style.display="none"
        }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:22:09.667

你可以试试这个**[DEMO](http://jsfiddle.net/ipsjolly/rQSDz/13/)**

**HTML 代码**

```
<div id="one"><img src='http://img.widgetbox.com/thumbs/302/8fb0669c-72ee-454d-a08f-9700b8a5270a.png?4' height='50px' widht='50px' ></div><br>
<div id="two"><img src='http://ww2.valdosta.edu/~mecarter/Spongebob%20Reading.png' height='50px' widht='50px' ></div><br>
<div id="three"><img src='http://www.cliffdweller.com/blogPhotos/wrappingpaperbase/Spongebob%20Waving.png' height='50px' widht='50px' ></div><br><br>
<div id="thumb"><img src='http://img.widgetbox.com/thumbs/302/8fb0669c-72ee-454d-a08f-9700b8a5270a.png?4' height='200px' widht='200px' ></div> 
```

**jQuery**

```
$("#one").click(function() {
  $("#thumb").html("<img src='http://img.widgetbox.com/thumbs/302/8fb0669c-72ee-454d-a08f-9700b8a5270a.png?4' height='200px' widht='200px' >");
});

$("#two").click(function() {
  $("#thumb").html("<img src='http://ww2.valdosta.edu/~mecarter/Spongebob%20Reading.png' height='200px' widht='200px' >");
 });

$("#three").click(function() {
   $("#thumb").html("<img src='http://www.cliffdweller.com/blogPhotos/wrappingpaperbase/Spongebob%20Waving.png' height='200px' widht='200px' >");
}); 
```

# objective-c - 为什么 self.view 调用 subview setter 方法？

> ID：14289934
> 
> 赞同：0
> 
> 时间：2013-01-12T03:29:42.797
> 
> 标签：objective-c, cocoa-touch, subview, setter

我有一个带有几个子视图的自定义视图控制器。这些子视图中的每一个都通过 IBOutlet 属性连接到视图控制器的 .m 文件。这些子视图具有自定义设置器，可根据该子视图是否显示内容来调整其他子视图的大小。

现在似乎这些自定义设置器在被调用`initWithCoder:`之前`viewDidLoad`被调用。（我希望/假设这是正常的。）

我的问题是调用`self.view`访问 self.view 的子视图的 setter 方法。我目前的理解是，这不应该是必要的。有人可以解释这里发生了什么吗？我宁愿这不会发生，因为我不打算通过访问来设置任何东西`self.view`。

这是代码：[https ://github.com/kenmhaggerty/Sandbox](https://github.com/kenmhaggerty/Sandbox)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:39:56.813

在视图控制器上调用 self.view 会导致它从 nib 加载它的视图，如果它还没有这样做的话。这将实例化 nib 中的所有对象（使用 initWithCoder:）并设置任何出口的值（使用您的访问器方法）。然后它调用 viewDidLoad，此时 nib 中的所有内容都将存在。

您的 outlet setter 方法可能不适合进行布局调整。要么使用基于约束的布局，它会自动适应子视图大小的变化，要么使用 viewDidLayoutSubviews，要么使用您正在使用的方法将模型信息传递给这些子视图。

# android - Android：如何在应用程序中加载 pdf？

> ID：14289935
> 
> 赞同：1
> 
> 时间：2013-01-12T03:30:07.957
> 
> 标签：android, pdf-viewer

我有： 第一个目标：弄清楚如何**从互联网加载 PDF 并在我的应用程序中显示** 第二个（可能更复杂）目标：**下载 pdf 并在我的应用程序中显示离线**

我在 stackoverflow 和 Internet 上寻找了一些解决方案，但我不知道**如何实现它**

例如，我找到了 Mupdf 和一些适用于 Android 的 PDF 查看器的源代码，但我很困惑：为什么显示“简单 PDF”如此困难？是否有任何 Java 库可以在不包含外部源代码等的情况下执行此操作？

任何建议都非常感谢。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:14:15.770

有一些库和sdk。

这可能会帮助你

[http://www.qoppa.com/android/pdfsdk/](http://www.qoppa.com/android/pdfsdk/)

[http://code.google.com/p/droidreader/](http://code.google.com/p/droidreader/)

# spring - 将 Spring roo 项目连接到数据库（mongo）

> ID：14289936
> 
> 赞同：1
> 
> 时间：2013-01-12T03:30:09.140
> 
> 标签：spring, mongodb, heroku

我也是新手，正在尝试创建一个简单的应用程序来推送到 heroku。我已经启动了应用程序并在我的本地主机上工作，并且在本地主机上运行了一个 mongo DB。我在 heroku 中的应用程序中添加了一个 mongo 数据库，但它不会在 heroku 上打开（应用程序不是数据库）。我不知道问题是什么，但我需要以某种方式将我的应用程序连接到 heroku 数据库吗？就像更改 database.properties 文件一样？我尝试通过获取此 URL 使用 heroku DB 在本地对其进行测试（我可以使用 mongoctl 很好地登录数据库）：

```
mongodb://heroku_app10830648:************************@ds047387.mongolab.com:4738/heroku_app10830648 
```

并将信息放入 database.properties 文件中：

```
#Updated at Wed Jan 09 19:16:49 MST 2013
#Wed Jan 09 19:16:49 MST 2013
mongo.database=heroku_app10830648
mongo.host=ds047387.mongolab.com
mongo.password=***********************
mongo.port=47387
mongo.username=heroku_app10830648 
```

但是当我用 mvn package 构建它时，我得到了这个错误：

* * *

## 测试

结果 ：

错误测试：testCountAllNotebooks(com.xebia.shortnotes.domain.NotebookIntegrationTest): command failed [command failed [count] { "assertion" : "unauthorized db:heroku_app10830648 ns:heroku_app10830648.notebook lock type:0 client:71.208.224.103" ，“assertionCode”：10057，“errmsg”：“db断言失败”，“ok”：0.0} testFindNotebook（com.xebia.shortnotes.domain.NotebookIntegrationTest）：命令失败[命令失败[count] {“assertion”：“未经授权的数据库：heroku_app10830648 ns：heroku_app10830648.notebook 锁定类型：0 客户端：71.208.224.103”，“assertionCode”：10057，“errmsg”：“db 断言失败”，“ok”：0.0} testFindAllNotebooks(com.xebia.shortnotes. domain.NotebookIntegrationTest):命令失败 [命令失败 [count] {“assertion”：“未经授权的 db:heroku_app10830648 ns:heroku_app10830648.notebook lock type:0 client:71.208.224.103”，“assertionCode”：10057，“errmsg”：“db assertion failure”， “ok”：0.0} testFindNotebookEntries（com.xebia.shortnotes.domain.NotebookIntegrationTest）：命令失败[command failed [count] {“assertion”：“未经授权的db：heroku_app10830648 ns：heroku_app10830648.notebook lock type：0 client：71.208。 224.103”，“assertionCode”：10057，“errmsg”：“db 断言失败”，“ok”：0.0} testSaveNotebook（com.xebia.shortnotes.domain.NotebookIntegrationTest）：命令失败 [命令失败 [count] {“assertion” ：“未经授权的数据库：heroku_app10830648 ns：heroku_app10830648.notebook lock type:0 client:71.208.224.103" , "assertionCode" : 10057 , "errmsg" : "db assertion failure" , "ok" : 0.0} testDeleteNotebook(com.xebia.shortnotes.domain.NotebookIntegrationTest): 命令failed [command failed [count] {“assertion”：“未经授权的 db:heroku_app10830648 ns:heroku_app10830648.notebook lock type:0 client:71.208.224.103”，“assertionCode”：10057，“errmsg”：“db assertion failure”，“好的”：0.0} testCountAllNotes（com.xebia.shortnotes.domain.NoteIntegrationTest）：命令失败[命令失败[计数] {“断言”：“未经授权的数据库：heroku_app10830648 ns：heroku_app10830648.note锁类型：0客户端：71.208.224.103 " , "assertionCode" : 10057 , "errmsg" : "db 断言失败”，“ok”：0.0} testFindNote（com.xebia.shortnotes.domain.NoteIntegrationTest）：命令失败 [command failed [count] {“assertion”：“未经授权的 db:heroku_app10830648 ns:heroku_app10830648.note 锁定类型： 0 客户端：71.208.224.103”，“assertionCode”：10057，“errmsg”：“db 断言失败”，“ok”：0.0} testFindAllNotes（com.xebia.shortnotes.domain.NoteIntegrationTest）：命令失败 [命令失败 [计数] { "assertion" : "unauthorized db:heroku_app10830648 ns:heroku_app10830648.note lock type:0 client:71.208.224.103" , "assertionCode" : 10057 , "errmsg" : "db assertion failure" , "ok" : 0.0} testFindNoteEntries （com.xebia.shortnotes.domain.NoteIntegrationTest）：command failed [command failed [count] {“assertion”：“未经授权的 db:heroku_app10830648 ns:heroku_app10830648.note lock type:0 client:71.208.224.103”，“assertionCode”：10057，“errmsg”：“db assertion failure”， “ok”：0.0} testSaveNote（com.xebia.shortnotes.domain.NoteIntegrationTest）：命令失败[命令失败[count] {“assertion”：“未经授权的db：heroku_app10830648 ns：heroku_app10830648.note锁类型：0客户端：71.208。 224.103”，“assertionCode”：10057，“errmsg”：“db 断言失败”，“ok”：0.0} testDeleteNote（com.xebia.shortnotes.domain.NoteIntegrationTest）：命令失败 [命令失败 [count] {“assertion” ：“未经授权的数据库：heroku_app10830648 ns:heroku_app10830648.note 锁定类型：0 客户端：71.208.224.103”，“assertionCode”：10057，“errmsg”：“db 断言失败”，“ok”：0.0}

测试运行：14，失败：0，错误：12，跳过：0

[信息] --------------------------------------------- -------------------------

[错误] 构建失败

[信息] --------------------------------------------- -------------------------

[INFO] 有测试失败。

任何帮助将不胜感激这里的主要问题是是否有人可以告诉我如何在 mvn 项目中使用除本地数据库之外的其他数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:10:01.513

【这个帖子好像是休眠的，不过我也遇到了同样的问题，而且这是谷歌上的顶配。】

我正在使用在“开发”模式下运行良好的 Spring/Roo/Mongo 应用程序，但是当部署到云提供商（OpenShift、CloudBees、Heroku 等）并连接到 MongoHQ 时，数据库连接失败并显示以下消息：

> 命令失败 [命令失败 [count] { "ok" : 0.0 , "errmsg" : "unauthorized"}

原来问题出在自动生成的**applicationContext-mongo.xml**文件中。您需要添加**用户名**和**密码**属性：

```
<mongo:db-factory dbname="${mongo.name}" host="${mongo.host}" id="mongoDbFactory" port="${mongo.port}" username="${mongo.username}" password="${mongo.password}"/> 
```

这是官方文档的（可能已过时）链接（如果有帮助）：[http ://static.springsource.org/spring-data/data-mongo/docs/1.0.0.M5/reference/html/#d0e1210](http://static.springsource.org/spring-data/data-mongo/docs/1.0.0.M5/reference/html/#d0e1210)

**另一个提示：**使用**spring.profiles.active**让您的应用程序根据开发模式选择正确的凭据/配置，或者在特定的云提供商中运行。如果每个 PaaS 都定义一个像“current.paas=heroku”这样的 Java 系统属性来简化自动配置，那就太好了。

# javascript - 如何使用 javascript 查询 xml 以在 xml 中查找节点值？

> ID：14289939
> 
> 赞同：-1
> 
> 时间：2013-01-12T03:30:41.433
> 
> 标签：javascript, xml, xml-parsing

从下面的 xml 如何找到值 docx 和属性 indexed = 1 的节点存在？我不想使用循环，这需要在 JavaScript 中完成

```
<docs>
  <doc>
    <name indexed='1'>doc</name>
  </doc>
  <doc>
    <name indexed='1'>xls</name>
  </doc>
  <doc>
    <name indexed='0'>xlsx</name>
  </doc>
  <doc>
    <name indexed='1'>docx</name>
  </doc>
  ..
  ..
</docs> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:48:24.970

假设您的平台是一个 Web 浏览器，您可以使用 jQuery：

```
var xml = '<docs>\n<doc>\n<name indexed="1">doc</name>...</docs>';
var docxIndexed1 = $(':contains("docx")', xml).find('[indexed=1]');

docxIndexed1; // => [ <name indexed=​"1">​docx​&lt;/name>​ ] 
```

或者，如果您不想使用 jQuery 而只使用[内置的`DOMParser`](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)：

```
var xml = '<docs>\n<doc>\n<name indexed="1">doc</name>...</docs>'
  , parser = new DOMParser()
  , doc = parser.parseFromString(xml, 'application/xml')
  , elements = [].slice.apply(doc.getElementsByTagName('*'));
var docxIndexed1 = elements.filter(function(x) {
  return (x.textContent === 'docx') && (x.getAttribute('indexed') === '1')
});

docxIndexed1; // => [ <name indexed=​"1">​docx​&lt;/name>​ ] 
```

# dll - 仅在一台用户的计算机上调用非托管 32 位 DLL 异常：BadImageFormatException（来自 HRESULT 的异常：0x8007000B）

> ID：14289940
> 
> 赞同：0
> 
> 时间：2013-01-12T03:31:02.680
> 
> 标签：dll, unmanaged, 32-bit, hresult, badimageformatexception

我们的应用程序是 C# .Net 4 并调用非托管 32 位 DLL。它运行良好并且可以运行许多机器（主要是 64 位 Windows 7）。但是，我最近遇到了一个特定用户，一旦调用非托管 DLL，程序就会在其计算机上捕获 BadImageFormatException。

> BadImageFormatException：试图加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）

我做了以下事情：

1.  确保安装和文件正确
2.  尽可能将他的 .Net 运行时更新与工作机器匹配
3.  确保所有项目的**平台目标设置为 x86**
4.  运行**调试版本，它可以工作**

我快要完蛋了。有什么建议么？**是否有特定的 .Net 4 更新或修补程序缺少导致此类问题的原因？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:01:04.027

问题原来是用户机器上的一些错位/无效的系统文件，在启动某些应用程序时可能表现为“应用程序无法正确启动（0xc000007b）。单击确定关闭应用程序”。

> 问题是由于 Visual Studio 所需的各种系统 dll 的 32/64 位不匹配造成的。不知何故，它需要的 dll 被它无法加载的 64 位版本所取代。
> 
> 从正在运行的机器替换下面提到的 dll 可以解决问题：
> 
> c:\Windows\SysWOW64\msvcp100.dll c:\Windows\SysWOW64\msvcp100d.dll c:\Windows\SysWOW64\msvcr100.dll c:\Windows\SysWOW64\msvcr100_clr0400.dll c:\Windows\SysWOW64\msvcr100d.dll

[http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/96035692-9a50-40d4-a7d3-48bda87d11ec](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/96035692-9a50-40d4-a7d3-48bda87d11ec)

# javascript - javascript timer MIA（不再调用函数）

> ID：14289941
> 
> 赞同：1
> 
> 时间：2013-01-12T03:31:06.783
> 
> 标签：javascript, timer

我有一个计时器，每隔一段时间就会跑一次……

```
timer_clock=setInterval('update_time()',1000) 
```

有时`update_time()`停止被调用（不再被调用）。

我放置了一些代码来跟踪这种情况何时发生（没有找到确切的时间或地点，只是它不再调用`update_time()`。在这段代码中我测试`timer_clock`并返回 true。

没有`clearInterval`在任何地方应用。

什么会导致计时器停止调用其函数？

编辑：这是一个包含许多`iframes`复杂页面的页面。它通常发生在特定的 之后`XMLHttpRequest`，但并非每次发出请求时都会发生（不到 1% 的时间），并且在其他时间也发生过。请求之后的代码中没有任何内容会干扰计时器。

# c# - 使用 json.net 将 json 解析为字典

> ID：14289942
> 
> 赞同：-2
> 
> 时间：2013-01-12T03:31:07.400
> 
> 标签：c#, json, json.net

我是使用 json.net 的新手，但我希望将以下内容解析为一个对象

```
"Properties" :
                                {
                                    "Source": "House",
                                    "Width": 312,
                                    "Height": 190
                                    "ExternalLink": null,
                                    "Link": "#"
                                } 
```

是否可以将上面的对象解析为 IDictionary，其中键是例如“Source”，值是“House”。我正在使用 Newtownsoft json.net 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:40:53.647

你猫尝试这样的想法，但你需要有一个你反序列化的类

```
class Data{
  public string Name;
  public object Value;
}
 Dictionary<string, object> dictionary = JsonConvert.DeserializeObject<Data>(yourjson.ToDictionary(x=>x.Name, y=>y.Value)); 
```

# javascript - jQuery Pajinate：如何忽略隐藏的列表项？

> ID：14289946
> 
> 赞同：0
> 
> 时间：2013-01-12T03:31:33.890
> 
> 标签：javascript, jquery, pagination

我有一个 HTML 列表，想用 jQuery Plugin [Pajinate](https://github.com/wesnolte/Pajinate/wiki)添加一个简单的分页。这很好用，但我希望 Pajinate 忽略隐藏的列表项。

为了测试，这里是[jsfiddl.net 上](http://jsfiddle.net/93Xg2/2/)的代码片段（下同）。最后两个列表项不应显示，页数应为 3 而不是 4。

以及如何解决的想法？提前致谢！

```
<script>
$(function () {
    $('#paging_container3').pajinate({
        items_per_page: 5,
        item_container_id: '.alt_content',
        nav_panel_id: '.alt_page_navigation',
        nav_label_first: '<<',
        nav_label_last: '>>',
        nav_label_prev: '<',
        nav_label_next: '>'
    });
});
</script>

<div id="paging_container3" class="container">
    <h2>Custom List Size</h2>
    <div class="alt_page_navigation"></div>
    <ul class="alt_content">
        <li>
          <p>One</p>
        </li>
        <li>
          <p>Two</p>
        </li>
        <li>
          <p>Three</p>
        </li>
        <li>
          <p>Four</p>
        </li>
        <li>
          <p>Five</p>
        </li>
        <li>
          <p>Six</p>
        </li>
        <li>
          <p>Seven</p>
        </li>
        <li>
          <p>Eight</p>
        </li>
        <li>
          <p>Nine</p>
        </li>
        <li>
          <p>Ten</p>
        </li>
        <li>
          <p>Eleven</p>
        </li>
        <li>
          <p>Twelve</p>
        </li>
        <li>
          <p>Thirteen</p>
        </li>
        <li>
          <p>Fourteen</p>
        </li>
        <li style="display: none">
          <p>Fifteen (ignore me)</p>
        </li>
        <li style="display: none">
          <p>Sixteen (ignore me)</p>
        </li>
    </ul>
</div> 
```

# c# - 如何在同一解决方案中添加适用于桌面的 C# 应用程序和适用于 Web 的 ASP.net 应用程序

> ID：14289953
> 
> 赞同：0
> 
> 时间：2013-01-12T03:33:09.733
> 
> 标签：c#, asp.net, visual-studio

我想在我的网络服务器上部署一个包含多个项目的解决方案。我有几个 Web 处理程序项目，但另一方面，我有一个桌面应用程序，部署后将在我的系统后台持续运行。我注意到 Visual Studio .net Express for Web 不允许用户创建桌面应用程序（此类程序需要 Visual Studio Express for Desktop）。我希望将所有内容都作为同一个解决方案的一部分，以便所有应用程序都可以连接到同一个数据库。

有什么办法可以在我的 Web 应用程序中同时拥有这两个项目？或者，是否有某种方法可以在 Visual Studio 2012 .net 中创建一个可以在服务器上运行的应用程序，并在服务器处理 Web 请求时在后台执行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:52:48.033

我不确定 wcf 服务应用程序是否是我正在寻找的。所以我将使用常规的 Visual Studio 来创建我的应用程序，它会通过发布请求与我的 Web 应用程序进行交互。

# c# - 模拟 Web 服务调用时的测试类型

> ID：14289956
> 
> 赞同：1
> 
> 时间：2013-01-12T03:33:36.347
> 
> 标签：c#, unit-testing, testing, tdd, integration-testing

我调用了一个向我返回 json 字符串的 Web 服务。

我想通过创建一个包含服务调用内容的文本文件来测试这个调用，并针对这个而不是实际的 Web 服务调用进行测试。

这种类型的测试，是集成测试还是单元测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:48:15.053

好吧，集成测试可以被认为是测试模块的聚合，而单元测试是测试应用程序中最小的可测试部分。

在您的情况下，您*没有*使用实际的 Web 服务作为输入数据，而是使用一些静态数据，我假设您这样做只是为了测试一切是否顺利，这可以被认为是*静态测试*或利用代码的*单元测试*Web 服务响应。另请参阅：[软件测试类型](http://www.guru99.com/types-of-software-testing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:44:17.047

它的单元测试，您的目的是测试“**调用返回 json 字符串的 Web 服务**”的功能。

要进行集成测试，您必须将与该流程相关的每个方面都作为实际流程的真实 OR 结果。所以在这里你只是用一个 web 服务调用的样本来测试它，以确保调用。

# java - Java - 即使文件不可读，file.length() 也会返回

> ID：14289957
> 
> 赞同：9
> 
> 时间：2013-01-12T03:33:36.737
> 
> 标签：java, linux, operating-system, filesystems, ubuntu-12.10

我有一个文件，我从该文件中禁止了所有权限。应该没有人能够读取文件，对吧？事实上，如果我跑

```
File f = new File("not_readable.pdf");
System.out.println(f.canRead()) 
```

我明白了

```
false 
```

但是，如果我打电话

```
File f = new File("not_readable.pdf");
System.out.println(f.length()) 
```

我明白了

```
455074 
```

我的理解是，为了获得文件的大小，必须先打开并读取文件，但这个结果强烈表明我错了。有谁知道为什么会这样？另外，有没有办法阻止 Java 的 file.length() 方法访问文件的大小？

我正在使用 Ubuntu 12.10

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T03:35:48.067

你错了：文件的长度是文件系统元数据（至少对于在 Linux VFS 下运行的文件系统）。任何对目录具有读取权限的人都可以查看所有包含的文件及其大小。为了防止用户看到文件的大小，您必须完全阻止他们看到它，即将文件放在具有权限的目录中，例如`drwxr-x---`用户不在与该目录关联的组中，或者`drwx------`如果用户在该目录中团体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T03:36:48.863

我不明白为什么您需要读取权限才能查看文件的大小。在 Linux 中，`ls`将显示目录中所有文件的内容（包括它们的大小），即使您对它们没有权限，只要您对包含该文件的目录具有适当的权限。文件的大小是文件分配表的属性，而不是文件本身，因此`length()`不需要检查实际文件本身（通过计算文件中的字节数来获取长度是非常低效的）文件）。

# asp.net - ASP.net：以编程方式插入的文本框的 textChange 部分更新

> ID：14289961
> 
> 赞同：1
> 
> 时间：2013-01-12T03:34:45.347
> 
> 标签：asp.net, asp.net-ajax, textchanged

我尝试获取一些以编程方式插入的文本框（插入到 gridview 中）来进行 textChange 部分更新。它有点工作，但在我在这些文本框中键入一些文本后，它不会自动调用 textEntered() 方法。我得到一个线索，我可能需要使用 AJAX 和更新面板之类的东西，但我只是不完全理解它们在我正在尝试做的事情的上下文中是如何工作的。

```
protected void OnRowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (!e.Row.Cells[4].Text.Equals("&nbsp;") && firstTime == false)
        {
            TextBox tb = new TextBox();
            tb.Text = e.Row.Cells[4].Text;

            tb.TextChanged += new EventHandler(textEntered);

            textBoxArray.Add(tb);

            int length = textBoxArray.Count - 1;
            tb = (TextBox)textBoxArray[textBoxArray.Count - 1];

            e.Row.Cells[4].Text = null;
            e.Row.Cells[4].Controls.Add(tb);
            Cache["textBoxArray"] = textBoxArray;

        } firstTime = false;
    }

 protected void textEntered(object sender, EventArgs e)
 {
  lbl_test.Text += "test";//This line is for testing purposes
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:15:01.987

文本框的自动回发是真还是假？让它成为现实。

# google-sheets - Google 电子表格 - 连接或连接多行中在其中一列中具有匹配值的文本

> ID：14289966
> 
> 赞同：2
> 
> 时间：2013-01-12T03:36:16.990
> 
> 标签：google-sheets, formula

正如标题所说，我需要连接或连接多行中在其中一列中具有匹配值的文本。（使用最新的 Firefox，寡妇 7）。

在 Sheet1 中，我有一个看起来像这样的表格（对不起，如果它看起来很乱 - 我不知道如何在 SO 上做一个整洁的表格）：

大卫 | 1 | 蓝
史蒂夫 | 1 | 格林
詹姆斯 | 2 |
克里斯 | 1 |
史蒂夫 | 3 | 蓝
杰克 | 1 |
本 | 1 |
詹姆斯 | 1 |
杰克 | 2 | 黄色
乔治 | 4 |

在 Sheet2 中，我想要一个如下所示的表格：

大卫 |1| 蓝
史蒂夫 |4| 绿蓝
詹姆斯 |3|
克里斯 |1|
杰克 |3| 黄
奔 |1|
乔治 |4|

A 列显示唯一值（名称），B 列显示该名称的总和。

我已经成功生成了 A 列和 B 列，但是我很难生成第三列，它应该为 Steve 返回“Green & Blue”，为 Jack 等返回“Yellow”。

有谁知道如何做到这一点？您的帮助将不胜感激。

我使用以下公式生成了 Sheet2 列 A 和 B：
A 列：=UNIQUE(Sheet1!A:A)
B 列：=SUMIF(Sheet1!A:A,A1,Sheet1!B:B)。

这是电子表格：[https ://docs.google.com/spreadsheet/ccc?key=0Avg34WusBUlRdGY1X3BSRlYxaWVkSmo3eVQzYlNvMXc](https://docs.google.com/spreadsheet/ccc?key=0Avg34WusBUlRdGY1X3BSRlYxaWVkSmo3eVQzYlNvMXc)

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T14:06:56.033

将 JOIN 函数与 FILTER 函数结合使用，因此在 C 列中：

```
=JOIN(" & ",filter(Sheet1!C:C,Sheet1!A:A=A1)) 
```

希望能帮助到你。

# c++ - 如何对到达特定日期和时间触发的事件做出反应

> ID：14289975
> 
> 赞同：1
> 
> 时间：2013-01-12T03:37:23.797
> 
> 标签：c++, visual-c++, mfc, scheduled-tasks

我正在使用 Windows 7 中的 Visual Studio 在 C++ 中编写一个应用程序。该应用程序是一个单页 MFC 对话框应用程序。我想在到达某个时间和日期时弹出一个消息框。我正在使用日期选择器来获取将用作触发器的指定日期，并使用 CTime 对象来存储当前时间和预期时间。

不幸的是，我不知道从哪里开始寻找。是否有一个对象每分钟每分钟向窗口发送一次通知或消息？如果没有，有没有什么具体的方法可以让我完成这项工作，或者关于我可以从哪里开始寻找的建议？

编辑：是否可以计算当前日期和未来日期之间的秒数并创建一个单独的倒计时线程（使用计时器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:41:05.967

这是接收定时器事件所需实现的功能的粗略草图：

```
UINT_PTR timerId = NULL;

void OnTimerEvent(HWND, UINT, UINT_PTR id, DWORD)
{
    if (timerId == id)
    {
        // timer action...
    }
}

void StartTimer()
{
    // call OnTimerEvent after 1000 milliseconds
    timerId = SetTimer(NULL, NULL, 1000, &OnTimerEvent);
}

void StopTimer()
{
    KillTimer(NULL, timerId);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:06:12.993

您可以`SetTimer`按照@StackedCrooked 的建议使用。但是如果系统时间改变，那将不起作用。例如，假设当前时间是 12:30，而您将其设置为 12:35，那么`SetTimer`您将设置为 5 分钟。但是，如果系统时间更改为 12:32，计时器将在 12:37 左右触发，而不是在 12:35 ！

为此，您可能喜欢使用[CreateWaitableTimer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687008%28v=vs.85%29.aspx)。

# angularjs - 无法让 Angular-UI 日期选择器工作

> ID：14289977
> 
> 赞同：1
> 
> 时间：2013-01-12T03:37:26.573
> 
> 标签：angularjs, angular-ui

> **可能重复：**
> [让 Angular UI 工作](https://stackoverflow.com/questions/12822862/getting-angular-ui-to-work)

对于我的一生，我无法弄清楚如何从 Angular-UI 演示应用程序中获取 datepicker 示例。有没有人有一个日期选择器工作的小提琴示例（即单击输入字段会弹出一个日历等）？

# python - 将 Python 脚本转换为适用于所有/大多数 Windows 版本的 .exe

> ID：14289979
> 
> 赞同：1
> 
> 时间：2013-01-12T03:37:33.830
> 
> 标签：python, windows, py2exe, pyinstaller

我知道如何使用 Py2Exe、PyInstaller 等将 Python 脚本转换为 Windows 可执行文件（.exe）。

**但是有没有办法将 Python 脚本转换为适用于以下所有 Windows 版本的 .exe：从 Windows XP 到 Windows 8？**

请记住，我的 Python 脚本非常简单，并且不使用任何库，例如 pyGTK 或 wxPython。它只是一个简单的控制台脚本，列出目录中的所有文件并将其写入文件。

因此，如果我要在我的 Windows 7 64 位计算机上使用 Py2Exe 编译以下脚本，那么该 .exe 是否可以在以下所有版本的 Windows 上工作：Windows XP 到 Windows 8？我希望我不需要先创建 32 位版本，然后再创建 64 位版本。

```
import os

def main():
  #TODO: get command line arguments
  files = listdir("\")
  out   = open('outfile.txt', 'w')
  out.write(files)
  out.close()

main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T04:37:27.573

我在 Windows Vista/32 上使用 PyInstaller 启动我的基于 wxPython 的应用程序。构建可执行文件后，我使用 InnoSetup 将其滚动到安装程序中。我有客户使用以这种方式制作的相同安装可执行文件以 32 位和 64 位模式运行从 XP 到 8 的所有内容。

我正在考虑构建 64 位版本，但到目前为止没有人要求它，而且似乎没有必要。

我在 Windows 上尝试过 py2exe、cxFreeze 和 PyInstaller，到目前为止，PyInstaller 是我的最爱。我在某些平台上遇到了 py2exe 的问题；当时的 cxFreeze 无法处理放入版本资源（现在可以了），而 PyInstaller 似乎“开箱即用”最快。

所以切入正题，不，您不需要同时构建应用程序的 32 位和 64 位版本，如果您不关心在 64 位 Windows 上它会在 32 位模式下运行WOW 虚拟机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:43:29.827

您最好的选择是在您想要支持的最低系统上创建。IT 应该是前向兼容的。32bit 可以在 64bit Windows 上运行就好了。

# java - 在哪里可以找到适用于 32 位 Windows 的 JDK？

> ID：14289982
> 
> 赞同：5
> 
> 时间：2013-01-12T03:37:56.423
> 
> 标签：java, 32-bit

在我的一生中，我似乎找不到适用于 32 位 Windows 机器的 Java SE JDK 的工作版本。甲骨文把它放在哪里了？

谢谢，内森

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T03:41:24.537

访问 Oracle 网站 - 您要查找的是 x86，而不是 x32。

您可以选择所需的任何 Java 版本。最新的是 Java 7，但请记住，很多人仍在使用 Java 6。

我认为了解如何在 Oracle 网站（和文档）中操作是一项重要的技能（尤其是如果您打算认真使用 Java），因为您会经常使用它。尽量避开谷歌和其他镜像网站，从源头上取东西总是最安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T03:41:42.710

对于 JDK 7，

[http://www.oracle.com/technetwork/java/javase/downloads/java-se-jdk-7-download-432154.html](http://www.oracle.com/technetwork/java/javase/downloads/java-se-jdk-7-download-432154.html)

您只需要选择`Windows x86`，文件名为：jdk-7-windows-i586.exe

对于 JDK 6u38（最新），

[http://www.oracle.com/technetwork/java/javase/downloads/jdk6u38-downloads-1877406.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk6u38-downloads-1877406.html)

您只需要选择`Windows x86`文件名是：jdk-6u38-windows-i586.exe

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T03:43:40.830

这里！

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

提供的链接有版本 6 和 7 :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T03:43:44.683

我在这里找到了它：

谷歌“JDK”>[第一个结果](http://www.oracle.com/technetwork/java/javase/downloads/index.html)>单击JDK的“下载”>下载Windows x86版本（当前为jdk-7u10-windows-i586.exe）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T03:41:46.070

访问 CNET：http: [//download.cnet.com/Java-Development-Kit-32-bit/3000-2218_4-12091.html](http://download.cnet.com/Java-Development-Kit-32-bit/3000-2218_4-12091.html)

我希望我是对的。或搜索 CNET

# wpf - 如何在执行拖放操作时展开treeviewitem

> ID：14289987
> 
> 赞同：0
> 
> 时间：2013-01-12T03:40:07.723
> 
> 标签：wpf, drag-and-drop, treeview

在 TreeView 上执行拖动时，我希望项目在鼠标光标悬停一段时间（例如 2 秒）时自动展开。解决这个问题的方法是什么？

理想情况下，我希望有一个自定义附加行为实现这个问题，比如在拖动时滚动：[http ://weblogs.asp.net/akjoshi/archive/2012/05/28/Attached-behavior-for-auto -滚动容器，同时做-拖动-amp-drop.aspx](http://weblogs.asp.net/akjoshi/archive/2012/05/28/Attached-behavior-for-auto-scrolling-containers-while-doing-drag-amp-drop.aspx)

此外，我想以相同的方式处理任何其他可扩展（例如 Expander）或内容可选（例如 TabControl）元素，但我不确定是否可以通用处理所有这些（例如，附加一个行为）还是我需要单独处理所有这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:12:38.230

请参阅我的博客文章[Xaml：使用 Blend 将可见性行为添加到 WPF 或 Silverlight 的 DataGrid 中，](http://omegacoder.com/?p=876)其中演示了鼠标悬停触发器。从那里您可以应用您需要的行为，使用 Blend 来完成添加触发器的繁琐工作。

# python - 如何在 Python 和 LXML 中解析 XML？

> ID：14289990
> 
> 赞同：5
> 
> 时间：2013-01-12T03:40:52.870
> 
> 标签：python, xml, parsing, beautifulsoup, lxml

这是我的项目：我正在使用 RRDTool 从 WeatherBug 绘制天气数据。我需要一种简单有效的方法来从 WeatherBug 下载天气数据。我使用了一个非常低效的 bash-script-scraper，但后来转向 BeautifulSoup。性能太慢了（它在树莓派上运行），所以我需要使用 LXML。

到目前为止我所拥有的：

```
from lxml import etree
doc=etree.parse('weather.xml')
print doc.xpath("//aws:weather/aws:ob/aws:temp") 
```

但我收到一条错误消息。Weather.xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>

<aws:weather xmlns:aws="http://www.aws.com/aws">
  <aws:api version="2.0"/>
  <aws:WebURL>http://weather.weatherbug.com/PA/Tunkhannock-weather.html?ZCode=Z5546&amp;Units=0&amp;stat=TNKCN</aws:WebURL>
  <aws:InputLocationURL>http://weather.weatherbug.com/PA/Tunkhannock-weather.html?ZCode=Z5546&amp;Units=0</aws:InputLocationURL>
  <aws:ob>
    <aws:ob-date>
      <aws:year number="2013"/>
      <aws:month number="1" text="January" abbrv="Jan"/>
      <aws:day number="11" text="Friday" abbrv="Fri"/>
      <aws:hour number="10" hour-24="22"/>
      <aws:minute number="26"/>
      <aws:second number="00"/>
      <aws:am-pm abbrv="PM"/>
      <aws:time-zone offset="-5" text="Eastern Standard Time (USA)" abbrv="EST"/>
    </aws:ob-date>
    <aws:requested-station-id/>
    <aws:station-id>TNKCN</aws:station-id>
    <aws:station>Tunkhannock HS</aws:station>
    <aws:city-state zipcode="18657">Tunkhannock, PA</aws:city-state>
    <aws:country>USA</aws:country>
    <aws:latitude>41.5663871765137</aws:latitude>
    <aws:longitude>-75.9794464111328</aws:longitude>
    <aws:site-url>http://www.tasd.net/highschool/index.cfm</aws:site-url>
    <aws:aux-temp units="&amp;deg;F">-100</aws:aux-temp>
    <aws:aux-temp-rate units="&amp;deg;F">0</aws:aux-temp-rate>
    <aws:current-condition icon="http://deskwx.weatherbug.com/images/Forecast/icons/cond013.gif">Cloudy</aws:current-condition>
    <aws:dew-point units="&amp;deg;F">40</aws:dew-point>
    <aws:elevation units="ft">886</aws:elevation>
    <aws:feels-like units="&amp;deg;F">41</aws:feels-like>
    <aws:gust-time>
      <aws:year number="2013"/>
      <aws:month number="1" text="January" abbrv="Jan"/>
      <aws:day number="11" text="Friday" abbrv="Fri"/>
      <aws:hour number="12" hour-24="12"/>
      <aws:minute number="18"/>
      <aws:second number="00"/>
      <aws:am-pm abbrv="PM"/>
      <aws:time-zone offset="-5" text="Eastern Standard Time (USA)" abbrv="EST"/>
    </aws:gust-time>
    <aws:gust-direction>NNW</aws:gust-direction>
    <aws:gust-direction-degrees>323</aws:gust-direction-degrees>
    <aws:gust-speed units="mph">17</aws:gust-speed>
    <aws:humidity units="%">98</aws:humidity>
    <aws:humidity-high units="%">100</aws:humidity-high>
    <aws:humidity-low units="%">61</aws:humidity-low>
    <aws:humidity-rate>3</aws:humidity-rate>
    <aws:indoor-temp units="&amp;deg;F">77</aws:indoor-temp>
    <aws:indoor-temp-rate units="&amp;deg;F">-1.1</aws:indoor-temp-rate>
    <aws:light>0</aws:light>
    <aws:light-rate>0</aws:light-rate>
    <aws:moon-phase moon-phase-img="http://api.wxbug.net/images/moonphase/mphase01.gif">0</aws:moon-phase>
    <aws:pressure units="&quot;">30.09</aws:pressure>
    <aws:pressure-high units="&quot;">30.5</aws:pressure-high>
    <aws:pressure-low units="&quot;">30.08</aws:pressure-low>
    <aws:pressure-rate units="&quot;/h">-0.01</aws:pressure-rate>
    <aws:rain-month units="&quot;">0.11</aws:rain-month>
    <aws:rain-rate units="&quot;/h">0</aws:rain-rate>
    <aws:rain-rate-max units="&quot;/h">0.12</aws:rain-rate-max>
    <aws:rain-today units="&quot;">0.09</aws:rain-today>
    <aws:rain-year units="&quot;">0.11</aws:rain-year>
    <aws:temp units="&amp;deg;F">41</aws:temp>
    <aws:temp-high units="&amp;deg;F">42</aws:temp-high>
    <aws:temp-low units="&amp;deg;F">29</aws:temp-low>
    <aws:temp-rate units="&amp;deg;F/h">-0.9</aws:temp-rate>
    <aws:sunrise>
      <aws:year number="2013"/>
      <aws:month number="1" text="January" abbrv="Jan"/>
      <aws:day number="11" text="Friday" abbrv="Fri"/>
      <aws:hour number="7" hour-24="07"/>
      <aws:minute number="29"/>
      <aws:second number="53"/>
      <aws:am-pm abbrv="AM"/>
      <aws:time-zone offset="-5" text="Eastern Standard Time (USA)" abbrv="EST"/>
    </aws:sunrise>
    <aws:sunset>
      <aws:year number="2013"/>
      <aws:month number="1" text="January" abbrv="Jan"/>
      <aws:day number="11" text="Friday" abbrv="Fri"/>
      <aws:hour number="4" hour-24="16"/>
      <aws:minute number="54"/>
      <aws:second number="19"/>
      <aws:am-pm abbrv="PM"/>
      <aws:time-zone offset="-5" text="Eastern Standard Time (USA)" abbrv="EST"/>
    </aws:sunset>
    <aws:wet-bulb units="&amp;deg;F">40.802</aws:wet-bulb>
    <aws:wind-speed units="mph">3</aws:wind-speed>
    <aws:wind-speed-avg units="mph">1</aws:wind-speed-avg>
    <aws:wind-direction>S</aws:wind-direction>
    <aws:wind-direction-degrees>163</aws:wind-direction-degrees>
    <aws:wind-direction-avg>SE</aws:wind-direction-avg>
  </aws:ob>
</aws:weather> 
```

我使用[http://www.xpathtester.com/test](http://www.xpathtester.com/test)来测试我的 xpath，它在那里工作。但我收到错误消息：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "lxml.etree.pyx", line 2043, in lxml.etree._ElementTree.xpath (src/lxml/lxml.etree.c:47570)
  File "xpath.pxi", line 376, in lxml.etree.XPathDocumentEvaluator.__call__ (src/lxml/lxml.etree.c:118247)
  File "xpath.pxi", line 239, in lxml.etree._XPathEvaluatorBase._handle_result (src/lxml/lxml.etree.c:116911)
  File "xpath.pxi", line 224, in lxml.etree._XPathEvaluatorBase._raise_eval_error (src/lxml/lxml.etree.c:116728)
lxml.etree.XPathEvalError: Undefined namespace prefix 
```

这对我来说都是*全新*的——Python、XML 和 LXML。我想要的只是观察到的时间和温度。

我的问题与 aws: 前面的前缀有什么关系吗？那有什么意思？

非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T03:56:06.703

问题完全“与那个 aws: 前缀在所有东西前面有关”；它是您必须定义的名称空间前缀。这很容易实现，例如：

```
print doc.xpath('//aws:weather/aws:ob/aws:temp', 
                namespaces={'aws': 'http://www.aws.com/aws'})[0].text 
```

[在http://lxml.de/xpathxslt.html](http://lxml.de/xpathxslt.html)中记录了命名空间前缀到值之间的这种映射的需要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T04:01:40.793

尝试这样的事情：

```
from lxml import etree
ns = etree.FunctionNamespace("http://www.aws.com/aws")
ns.prefix = "aws"
doc=etree.parse('weather.xml')
print doc.xpath("//aws:weather/aws:ob/aws:temp")[0].text 
```

请参阅此链接： http: [//lxml.de/extensions.html](http://lxml.de/extensions.html)

# c++ - connect() 函数失败 wsagetlasterror() 10038

> ID：14289998
> 
> 赞同：0
> 
> 时间：2013-01-12T03:42:06.630
> 
> 标签：c++, winsock

您好，我是初学者 socket/c 程序员，从本教程中我有连接函数返回 10038 错误。请帮忙。我究竟做错了什么？
还有winsock和winsock2有什么区别？在 connect() 函数定义中还有 int PASCAL 什么是 pascal ？

```
#include <iostream>
#include <winsock.h>

using namespace std;

 int main(){

    WSADATA wsa;
    cout<< "Iinitializing winsock....";
    SOCKET sa;
    struct sockaddr_in server;

        if (WSAStartup(MAKEWORD(2,2), &wsa)!=0)
            cout << "Failed";

    cout << "initialized";

        if ((sa = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) == INVALID_SOCKET))
            cout << "Could not create socket " << WSAGetLastError();

    cout << "Socket created";

    server.sin_addr.s_addr = inet_addr ("213.165.64.44");
    server.sin_family = AF_INET;
    server.sin_port = htons(7);

    //connect
        if (connect(sa, (struct sockaddr *)&server, sizeof(server)) < 0){
            cerr << "connect error" << WSAGetLastError();
            return 1;
        }
    cout << "connected";

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T13:49:18.147

您应该查看文档 10038 的含义：

```
WSAENOTSOCK
10038 (0x2736)
An operation was attempted on something that is not a socket. 
```

所以`sa`不是套接字。打印出来`sa`显示`cerr`它为零，因此调用该`socket()`函数的某些内容很糟糕。更仔细地查看该行会发现该行中存在括号错误：

```
if ((sa = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) == INVALID_SOCKET)) 
```

== 首先执行，并且由于`socket()`函数的返回值不是无效套接字，因此将零分配给 sa。正确的表达方式是：

```
if ((sa = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == INVALID_SOCKET) 
```

对于问题的其他部分：

*   winsock (winsock.dll) 是 API 的 v1.1，winsock2 (ws2_32.dll) 是第二个有很多改进的版本。因为它是自 Win98 以来 Windows 的一部分（并且可下载到 Win95），我建议至少使用 winsock2。
*   `PASCAL`是`__stdcall`˙ 的宏，Windows API 函数一般使用这种[调用约定](http://en.wikipedia.org/wiki/Calling_convention#x86)。