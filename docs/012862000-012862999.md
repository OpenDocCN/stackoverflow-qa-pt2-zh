# StackOverflow 问答 12862000-12862999

# php - 使用 PHP in_array 匹配字符串

> ID：12862001
> 
> 赞同：0
> 
> 时间：2012-10-12T15:08:30.803
> 
> 标签：php, arrays

一开始我有两个 PHP 数组。

第一个数组有一个按`Y-m`顺序排列的日期长度，其中包含 12 个月中的每个月份和年份。这个数组看起来像这样......

```
Array
( 
    [0] => Array ( [ORDER] => Array ( [DATE] => 2008-10 [QTY] => 0 ) ) 
    [1] => Array ( [ORDER] => Array ( [DATE] => 2008-11 [QTY] => 0 ) ) 
) 
```

第二个数组具有已从查询返回并放入数组中的值，并且也是按`Y-m`顺序排列的，可能有也可能没有每个月。第二个是这样的。

```
Array
(
    [0] => Array ( [ORDER] => Array ( [DATE] => 2008-11 [QTY] => 285 ) )
    [1] => Array ( [ORDER] => Array ( [DATE] => 2008-12 [QTY] => 900 ) )
) 
```

我的最终目标是生成一个 Ym 日期数组，用于谷歌折线图，如果该月没有下订单，它将显示 0。所以那个数组应该是这样的..

```
Array
( 
    [0] => Array ( [ORDER] => Array ( [DATE] => 2008-10 [QTY] => 0 ) ) 
    [1] => Array ( [ORDER] => Array ( [DATE] => 2008-11 [QTY] => 285 ) ) 
    [2] => Array ( [ORDER] => Array ( [DATE] => 2008-12 [QTY] => 900 ) )

) 
```

所以数组项...

`[1] => Array ( [ORDER] => Array ( [DATE] => 2008-11 [QTY] => 0 ) )`

被删除，因为第二个数组中有一个具有相同日期值的条目。

现在我不确定我是否以正确的方式进行此操作，但这就是我到目前为止所拥有的。

```
foreach($FIRST_ARRAY as $key => $each)
{
    foreach($each as $line)
    {
        $findMe = $line['DATE'];

            if(in_array($findMe, $SECOND_ARRAY, true))
                {   
                    echo 'FOUND:'.$findMe;

                }else{          
                    echo $line['DATE'].'&nbsp;';
                    echo $line['QTY'].'&nbsp;';
                    echo '('.$findMe.')<br>';
                }
    }
} 
```

所有这些都是打印出第一个数组。这不是“匹配”日期。这是它的打印内容...

2008-10 0 (2008-10) 2008-11 0 (2008-11) 2008-12 0 (2008-12)

这是我希望它打印出来的...

2008-10 0 (2008-10) 2008-11 285 (2008-11) 2008-12 900 (2008-12)

**问题将是：我是否将这一切都错了，或者是否有更好的方法来做到这一点。**

我希望这一切都有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:38:12.757

你可以试试

```
$array = array(0 => array('DATE' => '2008-10','QTY' => 0),1 => array('DATE' => '2008-11','QTY' => 0));
$array2 = array(0 => array('DATE' => '2008-11','QTY' => 285),1 => array('DATE' => '2008-12','QTY' => 900));

$final = array();

groupAdd($final, $array, "DATE");
groupAdd($final, $array2, "DATE");

foreach ( $final as $line ) {
    echo $line['DATE'] . '&nbsp;';
    echo $line['QTY'] . '&nbsp;';
    echo '(' . $line['DATE'] . ')<br>';
} 
```

输出

```
2008-10 0 (2008-10)
2008-11 285 (2008-11)
2008-12 900 (2008-12) 
```

使用的功能

```
function groupAdd(&$final, $array, $groupKey) {
    foreach ( $array as $item ) {
        isset($final[$item[$groupKey]]) ? $final[$item[$groupKey]]['QTY'] += $item['QTY'] : $final[$item[$groupKey]] = $item;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:36:25.713

```
$ans = Array();
$tmp_second_array = $SECOND_ARRAY;
foreach($FIRST_ARRAY as $key => $each){
 $arr_to_add = $each;
 if(!empty($tmp_second_array)){
  foreach($tmp_second_array as $seckey => $seceach){
   if($each['ORDER']['DATE'] === $seceach['ORDER']['DATE']){   
     $arr_to_add = $seceach;
     unset($tmp_second_array[$seckey])
     break;
   }
  }
  $ans[] = $arr_to_add;
 }           
}
if(!empty($tmp_second_array)){
 $ans = array_merge($ans, $tmp_second_array);
} 
```

# tsql - 如何在 sql-server 中将字符串变量转换为日期时间变量？

> ID：12862003
> 
> 赞同：1
> 
> 时间：2012-10-12T15:08:32.997
> 
> 标签：tsql, datetime, varchar

我对 sql-server 比较陌生；我正在尝试从表单变量中提取开始日期和结束日期作为字符串，然后将其转换为日期时间（yyyy-mm-dd）格式，但我似乎找不到任何有效的方法。尝试的代码和产生的错误如下。任何意见，将不胜感激。

```
declare @startdate as varchar
declare @enddate as varchar
set @startdate=cast(@startdate as datetime)
set @enddate=cast(@enddate as datetime)

SELECT order_date, inv_no 
from invoices 
where order_date between @startdate and @enddate 
```

我不断收到的错误是：

> 从字符串转换日期时间时转换失败。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:10:41.657

为您指定一个长度`varchar`：

```
declare @startdate as varchar(10)
declare @enddate as varchar(10)
set @startdate=cast(@startdate as datetime)
set @enddate=cast(@enddate as datetime)

SELECT order_date, inv_no 
from invoices 
where order_date between @startdate and @enddate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T15:46:18.023

你不必强制转换

```
declare @startdate varchar(50)
declare @enddate varchar(50)
declare @start datetime = @startdate, @end datetime = @enddate
select @start, @end 
```

# html - 用于“规范化”CSS 的网站？

> ID：12862005
> 
> 赞同：2
> 
> 时间：2012-10-12T15:08:37.830
> 
> 标签：html, css, cross-browser

我最近发现了[Ultimate CSS Gradient Generator](http://www.colorzilla.com/gradient-editor/)站点，可以轻松地在所有浏览器平台上生成 CSS 渐变。它非常适合我正在寻找的东西。然而，我也遇到过需要多个声明才能跨浏览器兼容的 CSS 的其他方面（例如，像 -webkit-* 这样的任何东西）。使用多种浏览器类型进行开发是一件很痛苦的事情。我更喜欢使用 Firebug 在 Firefox 中进行开发以进行初始测试，然后显然作为 QA 进行跨浏览器测试。

我的问题是，有没有人知道可以让我插入现有 CSS（可能是 Firefox 或 Safari 或其他任何特定内容）并使用其他浏览器的适当浏览器特定声明对其进行“规范化”的网站？比如说，我的 CSS 中有这样的东西：

```
-moz-border-radius: 2px; 
```

我希望能够插入一个到处都有这些声明的 CSS 文件，并让网站还添加诸如...

```
-webkit-border-radius: 2px; 
```

（以及其他浏览器上的任何等价物）

任何人都知道可以完成此任务的工具或网站吗？它显然不会消除在发货前进行广泛的跨浏览器测试的需要，但我想它会显着减少开发时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:10:20.170

你可以试试 Lea Verou 的这个超级有用的 javascript 插件：[Prefix Free](http://leaverou.github.com/prefixfree/)

> -prefix-free 让你在任何地方都只使用无前缀的 CSS 属性。它在幕后工作，仅在需要时将当前浏览器的前缀添加到任何 CSS 代码中。

它可能需要更新，因为有时径向渐变不会在没有供应商前缀的情况下显示。但对于最常见的属性，如`border-radius`、等`box-sizing`，`box-shadow`是很棒的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T16:44:44.797

[Prefixr](http://prefixr.com)是您正在寻找的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:13:57.970

您在寻找[http://prefixmycss.com/](http://prefixmycss.com/)

# excel - 如何使excel中的if语句返回空白？

> ID：12862007
> 
> 赞同：-3
> 
> 时间：2012-10-12T15:08:42.330
> 
> 标签：excel, excel-2007, excel-formula

我发誓我已经这样做了 100 次，但现在由于某种原因它不起作用。这是我的excel公式：

=IF(AND(CurrentMonth>=9,CurrentYear>=2012),C5,"")

CurrentMonth 是 10，CurrentYear 是 2012

C5 目前没有值，但被格式化为 General。如果我在 C5 中输入 '，则单元格变为空白（上述 If 公式的结果）。

如果我设置 CurrentMonth < 9 或 CurrentYear < 2012，则公式的结果为空白。问题似乎在于 C 列...C 列中的空白值被视为零条目。

结果值为 0，但它应该只是一个空白/无值。我已将单元格格式化为 General，包含公式的单元格以及包含 CurrentMonth 和 Current Year 的单元格。

提前感谢您的所有帮助和建议。这个社区是最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:15:33.663

您的公式目前有效：如果大于当前月份和年份，则显示 C，否则为空白。

如果您的问题是如何处理 C 列为空以便公式不显示 0 如果您的`AND`测试通过，但 C 为空.. 那么您可以像这样修改它：

```
=IF(AND(CurrentMonth>=9,CurrentYear>=2012,len(C5)>0),C5,"") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:16:53.710

一种解决方法可能是修改 if 语句：

```
=IF(AND(CurrentMonth>=9,CurrentYear>=2012),IF(ISBLANK(C5),"",C5),"") 
```

如果 C5 为空白，这将使单元格为“”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:43:32.693

这是正常行为，只需尝试`=C5`将 C5 留空，它将返回 0

要么使用以前的解决方案之一，要么使用自定义数字格式格式化结果单元格：`[=0]"",General`

# jquery - jQuery插件《Crossbrowser Html5黑白jQuery插件》

> ID：12862008
> 
> 赞同：0
> 
> 时间：2012-10-12T15:08:43.127
> 
> 标签：jquery

我整天都在尝试让这个插件“Crossbrowser Html5 Black and white jQuery”插件工作......

链接到源代码（插件）， [http ://gianlucaguarini.com/canvas-experiments/jQuery.BlackAndWhite/demo.html](http://gianlucaguarini.com/canvas-experiments/jQuery.BlackAndWhite/demo.html)

链接到我的测试页面， http: [//viwwi.se/jQueryBlackAndWhite/](http://viwwi.se/jQueryBlackAndWhite/)

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:10:44.307

查看页面上的错误控制台：

```
GET http://viwwi.se/jQueryBlackAndWhite/js/BnWWorker.js 404 (Not Found) jQuery.BlackAndWhite.js:79 
```

# php - 如何搜索字符串并获取值？

> ID：12862012
> 
> 赞同：0
> 
> 时间：2012-10-12T15:09:00.453
> 
> 标签：php, string, search

我该怎么做？例如我有这个文本（它是一个源代码）：

```
Welcome to asdfasdf, <h2>Welcome</h2>, <a href="index.php?my_id=1">Homepage</a>,
<br />, Hi, this is some text. 
Check <a href="index.php?my_id=12945">this link</a> or 
<a href="index.php?my_id=138>this link</a> for more information.
<br /><strong>Thanks</strong> 
```

现在我想用 php 在这个字符串中搜索“my_id”并显示所有的 id。所以输出将是：

```
1
12945
138 
```

希望你能理解我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:27:31.283

您可以在您的 html 字符串上运行正则表达式以提取孤立的数值[`preg_match_all`](http://php.net/preg_match_all)：

```
$ids = preg_match_all('/\b\d+\b/', $html, $m) ? $m[0] : FALSE; 
```

为您提供`$ids`以下结果：

```
array(3) {
  [0] =>
  string(1) "1"
  [1] =>
  string(5) "12945"
  [2] =>
  string(3) "138"
} 
```

但是，一般的说法是，您应该使用 HTML 解析器来获取这些值：

```
$ids = array_reduce(
    simplexml_import_dom(@DomDocument::loadHTML($html))->xpath('//a/@href')
    , function($a, $v) {parse_str(parse_url($v, 6), $m); @($m = $m['my_id']) ? $a[] = $m : 0; return $a;}
); 
```

这会给您相同的结果，但它会*完全*查看标签的`href`属性`a`，然后解析 URL 并仅返回`my_id`查询值（如果它设置在这样的 URL 中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:16:40.763

这里是：

```
<?php

$str='Welcome to asdfasdf, <h2>Welcome</h2>, <a href="index.php?my_id=1">Homepage</a>,
<br />, Hi, this is some text. 
Check <a href="index.php?my_id=12945">this link</a> or 
<a href="index.php?my_id=138>this link</a> for more information.
<br /><strong>Thanks</strong>';

$res = array();
preg_match_all('~<a[^>]*?\?my_id=([0-9]+)[^>]*?>~uis', $str, $res);

print_r($res); 
```

我的正则表达式不是很严格，但它要求 ?my_id=123 出现在`<a>`标签内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:16:37.150

这将为您提供所有数字，直到“my_id =”字符串之后的第一个非数字字符。

```
$pattern = "@my_id=(\d+)@i";
preg_match_all($pattern, $inputString, $matches); 
```

您应该在 $matches[1]; 中找到匹配的项目；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:14:46.713

```
preg_match_all("~my_id=(\d+)\">~", $html, $match);
print_r($match[1]); 
```

preg_match_all 会给你每场比赛，而不是像 preg_match 这样的一场比赛。正则表达式语句将查找 my_id= ，然后抓住它后面的数字。并在看到 "> 后停止如果您担心任何地方可能有空格，请确保将 \s* 放入正则表达式语句中。

# java - Java 时钟分配

> ID：12862017
> 
> 赞同：1
> 
> 时间：2012-10-12T15:09:09.210
> 
> 标签：java, clock

对于我的任务，我们假设要制作一个时钟。我们需要小时、分钟和秒的变量以及 setHours/getHours、setMinutes/getMinutes、setSeconds/getSeconds 等方法。我还需要一个 addClock() 方法来计算两个时钟对象的总和，以及一个递减时钟的 tickDown() 方法。我还需要一个将 Clock 对象增加一秒的 tick() 方法。

这是我到目前为止...

```
public class Clock {

   private int hr; //store hours
   private int min; //store minutes
   private int sec; //store seconds

   // Default constructor

   public Clock () {
      setClock (0, 0, 0);
   }

   public Clock (int hours, int minutes, int seconds) {
      setClock (hours, minutes, seconds);
   }

   public void setClock (int hours, int minutes, int seconds) {
      if (0 <= hours && hours < 24)
         hr = hours;
      else
         hr = 0;
      if (0 <= minutes && minutes < 60)
         min = minutes;
      else
         min = 0;
      if (0 <= seconds && seconds < 60)
         sec = seconds;
      else
         sec = 0;
   }

   public int getHours() {
      return hr;
   }

   public int getMinutes() {
      return min;
   }

   public int getSeconds() {
      return sec;
   }

   public void addClock( Clock secondClock ) {
      this.sec += secondClock.getSeconds();
      this.min += secondClock.getMinutes();
      //add overflow to minutes from seconds
      this.min +=(int)(this.sec/60);
      //update seconds 
      this.sec = this.sec % 60;
      this.hr += secondClock.getHours();
      //add overflow to minutes from seconds
      this.hr +=(int)(this.min/60);
      //update minutes
      this.min = this.min % 60;
      //adjust hours
      this.hr = this.hr % 24;
   }

   public void tick(){
      this.sec += 1;
      //add overflow to minutes from seconds
      this.min +=(int)(this.sec/60);
      //update seconds 
      this.sec = this.sec % 60;
      //add overflow to minutes from seconds
      this.hr +=(int)(this.min/60);
      //update minutes
      this.min = this.min % 60;
      //adjust hours
      this.hr = this.hr %24;
   }

   public void tickDown(){
      this.sec -= 1;
      if(this.sec <0){
         this.sec+=60;
         this.min-=1;
      }
      if(this.min<0){
         this.min+=60;
         this.hr-=1;
      }
      if(this.hr<0){
         this.hr+=24;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:19:23.237

你可以写`addClock()`如下：

```
 public void addClock(Clock secondClock){
       this.second += secondClock.getSecond();
       this.minute+= secondClock.getMinute();
       //add overflow to minutes from seconds
       this.minute+=(int)(this.second/60);
       //update seconds 
        this.second = this.second % 60;
       this.hour += secondClock.getHour();
       //add overflow to minutes from seconds

        this.hour+=(int)(this.minute/60);
       //update minutes
        this.minute= this.minute% 60;

        //adjust hours
        this.hour = this.hour%24;
    } 
```

类似地，您可以编写`tick`和`tickDown`方法，唯一的区别是**您将在方法中没有任何参数，并且您需要在从秒中减去 1 后重新调整分钟和小时**

```
 public void tick(){
       this.second += 1;
       //add overflow to minutes from seconds
       this.minute+=(int)(this.second/60);
       //update seconds 
       this.second = this.second % 60;
       //add overflow to minutes from seconds
        this.hour+=(int)(this.minute/60);
       //update minutes
        this.minute= this.minute% 60;
        //adjust hours
        this.hour = this.hour%24;
    }

  public void tickDown(){
       this.second -= 1;
       if(this.second <0){
          this.second+=60;
          this.minute-=1;
        }
       if(this.minute<0){
          this.minute+=60;
          this.hour-=1;
        }
       if(this.hour<0){
          this.hour+=24;
       }
    } 
```

添加`main`方法为：

```
 public static void main(String[]  args){
      Clock clock1 = new Clock(2,4,7);
      Clock clock2 = new Clock(8,26,57);
      clock1.tick();
      int newSeconds = clock1.getSeconds();
      //validate it should be 8 now

      clock2.tickDown();
      newSeconds = clock1.getSeconds();
      //validate it should be 56 now

      clock1.addClock(clock2);
      //get Hour, minute and second from clock1 and validate
      int newHour = clock1.getHours();
      int nuwMinute = clock1.getMinutes();
      newSeconds = clock1.getSeconds();
      //validate if they are with the right expected value or not
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:35:39.537

您可以通过仅维护刻度来简化刻度逻辑。从刻度值中提取小时、分钟和秒。

```
public Clock
{
 long ticks = 0;
 public void tick()
 {
   ticks++;
 }

 public void tickDown()
 {
  ticks--;
 }

 public int getSeconds()
 {
   return ticks % 60;
 }

 public int getMinutes()
 {
   return (ticks / 60) % 60;
 }

 public int getHours()
 {
      return (ticks / (60 * 60)) % 24;
 }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:19:12.853

您必须了解有关 Java 语言的更多信息。;-)

```
if( condition ) { /* no ';' here */
   <block when true>
}
else {
   <block when false>
} 
```

主要缺失，我建议

```
public static void main( String args[] ) {
   Clock c1 = new Clock( 9, 59, 59 );
   c1.tickSeconds();
   System.err.println( c1 ); // You have to overload toString()
} 
```

# android - 我怎样才能在android中制作这样的对话框？

> ID：12862019
> 
> 赞同：1
> 
> 时间：2012-10-12T15:09:11.767
> 
> 标签：android, dialog

我想实现这样的对话框

![在此处输入图像描述](../Images/52c738482972228a16661e9c3bc5eac5.png) 用户点击“图标”按钮，此对话框打开，用户通过按下它选择适当的图标，然后对话框关闭并返回给我这个图标的 ID。

我怎么能做到？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-01T16:54:08.557

您想创建一个包含自定义网格的 alertDialog。在我的回答中，我假设 OP 一般想知道如何创建这样的对话框。因此我使用的是普通风格。如果您想使用深色样式，请创建自定义样式并将其用于您的`AlertDialog.Builder`：

```
AlertDialog.Builder builder = new AlertDialog.Builder(context, <YourCustomStyle>); 
```

结果：

[![警报对话框选择图标](../Images/2790997903500981c10d33227a324c5b.png)](https://i.stack.imgur.com/VJBMQl.jpg)

1.  为单个条目创建布局。由于 OP 只显示图标，我只使用`ImageView`. 例如，如果图标下面应该有文本，您只需在其`TextView`下方创建一个并用您的文本填充它。

**view_icon_chooser_entry.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<ImageView
    android:id="@+id/image_choose_icon_entry"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="8dp"
    android:layout_marginEnd="8dp"
    android:layout_marginStart="8dp"
    android:layout_marginTop="8dp"
    android:contentDescription="@null"
    app:layout_constraintBottom_toBottomOf="parent"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintTop_toTopOf="parent"/>

</android.support.constraint.ConstraintLayout> 
```

2.  创建一个可以处理数据并创建布局的适配器。在我的示例中，我从 a 扩展，`BaseAdapter`因为这很容易做到。更现代一点的是使用 a`RecyclerView`并为其创建自己的自定义适配器。

**AlertDialogImageAdapter.java：**

```
public class AlertDialogImageAdapter extends BaseAdapter {
    private LayoutInflater layoutInflater;

    AlertDialogImageAdapter(Context context) {
        layoutInflater = LayoutInflater.from(context);
    }

    @Override
    public int getCount() {
        return iconList.length;
    }

    @Override
    public Object getItem(int position) {
        return iconList[position];
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @SuppressLint("InflateParams")
    @NonNull
    public View getView(int position, View convertView, @NonNull ViewGroup parent) {
        AlertDialogViewHolder alertDialogViewHolder;

        if (convertView == null) {
            // This is an alertDialog, therefore it has no root
            convertView = layoutInflater.inflate(R.layout.view_icon_chooser_entry, null);

            DisplayMetrics metrics = convertView.getResources().getDisplayMetrics();
            int screenWidth = metrics.widthPixels;

            convertView.setLayoutParams(new GridView.LayoutParams(screenWidth / 6, screenWidth / 6));
            alertDialogViewHolder = new AlertDialogViewHolder();
            alertDialogViewHolder.icon = convertView.findViewById(R.id.image_choose_icon_entry);
            convertView.setTag(alertDialogViewHolder);
        } else {
            alertDialogViewHolder = (AlertDialogViewHolder) convertView.getTag();
        }

        alertDialogViewHolder.icon.setAdjustViewBounds(true);
        alertDialogViewHolder.icon.setScaleType(ImageView.ScaleType.CENTER_CROP);
        alertDialogViewHolder.icon.setPadding(8, 8, 8, 8);
        alertDialogViewHolder.icon.setImageResource(iconList[position]);
        return convertView;
    }

    // This is your source for your icons, fill it with your own
    private Integer[] iconList = {
            android.R.drawable.ic_media_play, android.R.drawable.ic_media_pause,
            android.R.drawable.ic_delete, android.R.drawable.ic_btn_speak_now,
            android.R.drawable.ic_media_previous, android.R.drawable.ic_media_next,
            android.R.drawable.ic_menu_my_calendar, android.R.drawable.ic_menu_agenda,
            android.R.drawable.ic_media_play, android.R.drawable.ic_media_pause,
            android.R.drawable.ic_delete, android.R.drawable.ic_btn_speak_now,
            android.R.drawable.ic_media_previous, android.R.drawable.ic_media_next,
            android.R.drawable.ic_menu_my_calendar, android.R.drawable.ic_menu_agenda,
            android.R.drawable.ic_media_play, android.R.drawable.ic_media_pause,
            android.R.drawable.ic_delete, android.R.drawable.ic_btn_speak_now,
            android.R.drawable.ic_media_previous, android.R.drawable.ic_media_next,
            android.R.drawable.ic_menu_my_calendar, android.R.drawable.ic_menu_agenda
    };

    private class AlertDialogViewHolder {
        ImageView icon;
    }
} 
```

3.  然后，放置一种方法来`AlertDialog`使用您的自定义创建一个新方法，`AlertDialogImageAdapter`并使用网格进行布局。您可以使用 更改您拥有的列数`setNumColumns(4)`。

**将此方法放在要显示警报对话框的位置并简单地调用它：**

```
private void showAlertDialog(Context context) {
    GridView gridView = new GridView(context);
    gridView.setAdapter(new AlertDialogImageAdapter(context));
    gridView.setNumColumns(4);
    gridView.setGravity(Gravity.CENTER);
    gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // TODO: Implement
            Toast.makeText(view.getContext(), "Clicked position is: " + position, Toast.LENGTH_LONG).show();
        }
    });

    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setView(gridView);
    builder.setTitle(R.string.title_chose_icon);
    builder.show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:28:17.973

查看 API 演示应用程序中的片段部分。您可以使用一些对话框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:14:44.240

我会建议你“模仿”对话框，而不是使用 android 的。为此，您可以创建第二个布局，其中包含深灰色背景和所有可点击的图标。当您调用对话框时，将调光设置为主布局并将带有图标的布局放在顶部。

我在我的应用程序中使用它。我将在 10 分钟内为您提供一些代码。

# javascript - 为什么这么多 jQuery 滑块使用列表而不是 div？

> ID：12862021
> 
> 赞同：0
> 
> 时间：2012-10-12T15:09:13.290
> 
> 标签：javascript, jquery, slider

> **可能重复：**
> [为什么我应该使用“li”而不是“div”？](https://stackoverflow.com/questions/549689/why-should-i-use-li-instead-of-div)

我正在研究如何制作完美的幻灯片/主页滑块。许多教程和示例在每张幻灯片中都使用 li 元素，而另一些则使用 div。使用列表项有什么好处？我看起来很复杂：通常 div 用于分隔内容字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:15:15.517

这主要是出于语义原因 - 您正在存储/访问内容项列表，从概念上将其存储在列表中是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:15:42.993

*   **div**用于封闭元素的逻辑分组。
*   **li**用于定义列表项。

如果您需要表达项目列表，则使用“li”在语义上更合适。在这种情况下，您必须在滑块中表示图像列表。所以最好使用'li'而不是'div'。

尽管在这种情况下使用列表是一种很好的做法，但选择其中一个并没有技术优势。

进一步阅读： [为什么我应该使用“li”而不是“div”？](https://stackoverflow.com/questions/549689/why-should-i-use-li-instead-of-div)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:16:43.063

我看到了使用`div`s 到`li`s 的两个潜在优势。

1.  您的 CSS 中的`div`说明可能已经具有您希望使用 jQuery 插件（或本例中的滑块）的内部项目实现的`margin`和/或属性。`padding`
2.  使用 s 模板可以更容易，`div`因为内部项目不需要是`li`s。

否则，我同意其他答案。

*   `li`与语义模型更加一致。

# facebook - 如何使用我的 OG 操作找出谁发布了帖子

> ID：12862023
> 
> 赞同：0
> 
> 时间：2012-10-12T15:09:14.447
> 
> 标签：facebook, facebook-graph-api, publish

希望有人能指出我正确的方向。

我有一个开放的图形操作，它终于被批准并且现在在我的应用程序上处于活动状态。有没有办法在我的应用程序中跟踪谁使用我的 OG 操作发布了帖子？

这是我用于我的操作的代码：

```
<script type="text/javascript">
  function postEndorse()
  {
      FB.api(
        '/me/namespace:endorse',
        'post',
        { photo: '<?php the_permalink(); ?>' },
        function(response) {
           if (!response || response.error) {
              alert('Error Occurred' + response + " " + response.error);
           } else {
              alert('Thank you!');
           }
        });
  }
  </script> 
```

当人们登录时，我正在请求 publish_actions 权限。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:44:10.637

上面 JavaScript 代码中的响应具有操作的 id。

```
{
  id: “{action-instance-id}”
} 
```

您需要通过数据库或其他方式存储您的操作。一旦你有了它，你就可以打电话反对它

```
/action-instance-id?fields=from.fields(id) 
```

这将给出一个响应，例如

```
{
  "from": {
    "id": "{user-id}"
  }, 
  "id": "{action-instance-id}"
} 
```

有很多方法可以存储这些数据，一种方法是 AJAX 到 PHP/MySQL。
我建议阅读它。**以下内容尚未经过测试，只是给出了如何发送数据的想法。把它想象成伪代码**

将 jQuery 添加到`<head>`

```
<script src="jquery.js"></script> 
```

发送`id`用户的，比如

```
<script type="text/javascript">
  function postEndorse()
  {
      FB.api(
        '/me/namespace:endorse',
        'post',
        { photo: '<?php the_permalink(); ?>' },
        function(response) {
           if (!response || response.error) {
              alert('Error Occurred' + response + " " + response.error);
           } else {
              FB.api(
                response.id + "?fields=from.fields(id)",
                 function(resp) {
                     if (!resp || resp.error) {
                        alert('Error Occurred' + resp + " " + resp.error);
                      } else {
                        $.ajax({
                           type: "POST",
                           url: "fbdata.php",
                           data: { id: resp.from.id, actionid: resp.id }
                        }).done(function( msg ) {
                           alert( "Data Saved: " + msg );
                        });
                     }
              });
           }
        });
  }
  </script> 
```

然后在 fbdata.php 中类似

```
<?php

include("database.inc.php");
mysql_connect($server,$username,$password);
@mysql_select_db($database) or die( "Unable to select database"); 

$id = mysql_real_escape_string($_POST['id']);
$actionid = mysql_real_escape_string($_POST['actionid']);

$database_entry = "INSERT INTO Actions (Id, Action) VALUES ('$id', '$actionid') ;
mysql_query($database_ntry) or die(mysql_error());

mysql_close();
?> 
```

你应该阅读的参考资料

*   [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   [http://www.php.net/manual/en/mysql.examples-basic.php](http://www.php.net/manual/en/mysql.examples-basic.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:04:00.170

如果您更改 `/me/namespace:endorse`为`/users facebook id/namespace:endorse`Then 您可以存储此人的 facebook id，然后使用它来追踪他们。

# javascript - 如何从 JavaScript 中“注释掉”CSS 代码？

> ID：12862024
> 
> 赞同：1
> 
> 时间：2012-10-12T15:09:18.143
> 
> 标签：javascript, jquery, css

显然，实际上不能注释掉代码，但是，如何从 JavaScript 中使下面的 CSS 看起来好像被注释掉了？之后如何取消注释？

```
.box:hover div.innercontent {

    -webkit-transform: perspective(3000) translateZ(200px);

    -moz-transform: scale(1.1);
    -moz-perspective: 3000px;

    transform: perspective(3000) translateZ(200px) ;
    z-index: 90;

    box-shadow:0 0 35px 5px black;
}

.box:hover div.innerlabel {

    -webkit-transform: perspective(500) rotateX(5deg) translateZ(60px);

    -moz-transform: rotateX(5deg) scale(1.1);
    -moz-perspective: 500px;

    transform: perspective(500) rotateX(5deg) translateZ(60px);

    box-shadow:0 0 20px 8px white; 
    z-index: 100;
}

.box:hover div.labelwrapper {

    z-index: 100;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:11:32.997

从元素中删除 css 类。

您可以使用[jQuery](http://api.jquery.com/removeClass/)或其他 stackoverflow[问题](https://stackoverflow.com/questions/2155737/remove-css-class-from-element-with-javascript-no-jquery)来完成此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T15:11:36.807

如果 CSS 构成了 CSS 文件的整体，您可以`disabled`在元素上设置属性`<link/>`以禁用其中定义的所有样式。这可能是最简单的方法，尤其是在处理`:hover`样式时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:14:20.873

我将向您展示如何做一个，您可以对其他人使用相同的技术：

```
$(".innercontent")
   .addClass('.innercontent-dummy')
   .removeClass('.innercontent'); 
```

然后恢复

```
$(".innercontent-dummy")
  .addClass('.innercontent')
  .removeClass('.innercontent-dummy'); 
```

'dummy' 类不必有任何格式；如果要恢复原始类，只需将其作为占位符即可查找元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:16:32.443

我使用修饰符类，如“活动”来切换元素的开关状态。[Bootstrap](http://twitter.github.com/bootstrap/)也使用菜单和其他元素来做到这一点。

例如：

CSS：

```
.box.active:hover div.innercontent {
    -webkit-transform: perspective(3000) translateZ(200px);
    -moz-transform: scale(1.1);
    -moz-perspective: 3000px;
    transform: perspective(3000) translateZ(200px) ;
    z-index: 90;
    box-shadow:0 0 35px 5px black;
}
.box.active:hover div.innerlabel {
    -webkit-transform: perspective(500) rotateX(5deg) translateZ(60px);
    -moz-transform: rotateX(5deg) scale(1.1);
    -moz-perspective: 500px;
    transform: perspective(500) rotateX(5deg) translateZ(60px);
    box-shadow:0 0 20px 8px white; 
    z-index: 100;
}
.box.active:hover div.labelwrapper {
    z-index: 100;
} 
```

JavaScript：

```
$('.box').toggleClass('active'); 
```

# c - 将 C 交叉编译为 MIPS64 并进行仿真

> ID：12862025
> 
> 赞同：1
> 
> 时间：2012-10-12T15:09:22.590
> 
> 标签：c, assembly, mips, mips64

我需要将以下 C 代码转换为 MIPS64：

```
#include <stdio.h>

int main() {
    int x;
    for (x=0;x<10;x++) {
    }
    return 0;
} 
```

我使用 codebench 将此代码交叉编译为 MIPS64。创建了以下代码：

```
 .file   1 "loop.c"
    .section .mdebug.abi32
    .previous
    .gnu_attribute 4, 1
    .abicalls
    .option pic0
    .text
    .align  2
    .globl  main
    .set    nomips16
    .set    nomicromips
    .ent    main
    .type   main, @function
main:
    .frame  $fp,24,$31      # vars= 8, regs= 1/0, args= 0, gp= 8
    .mask   0x40000000,-4
    .fmask  0x00000000,0
    .set    noreorder
    .set    nomacro
    addiu   $sp,$sp,-24
    sw  $fp,20($sp)
    move    $fp,$sp
    sw  $0,8($fp)
    j   $L2
    nop

$L3:
    lw  $2,8($fp)
    addiu   $2,$2,1
    sw  $2,8($fp)
$L2:
    lw  $2,8($fp)
    slt $2,$2,10
    bne $2,$0,$L3
    nop

    move    $2,$0
    move    $sp,$fp
    lw  $fp,20($sp)
    addiu   $sp,$sp,24
    j   $31
    nop

    .set    macro
    .set    reorder
    .end    main
    .size   main, .-main
    .ident  "GCC: (Sourcery CodeBench 2012.03-81) 4.6.3" 
```

为了检查代码是否按预期工作，我通常使用 WINMIPS64 模拟器。由于某种原因，此模拟器不想接受此代码。看来每一行代码都是错误的。我一直在研究这个问题超过一天。我希望有人可以帮助我解决这个问题。这个 mips64 架构的汇编代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T17:23:52.093

从 WINMIPS64[文档](http://indigo.ie/~mscott/winmipstut.docx)的第 7 页：

```
The following assembler directives are supported

.data                 - start of data segment
.text                 - start of code segment
.code                 - start of code segment (same as .text)  
.org    <n>           - start address
.space  <n>           - leave n empty bytes
.asciiz <s>           - enters zero terminated ascii string
.ascii  <s>           - enter ascii string
.align  <n>           - align to n-byte boundary
.word   <n1>,<n2>..   - enters word(s) of data (64-bits)
.byte   <n1>,<n2>..   - enter bytes
.word32 <n1>,<n2>..   - enters 32 bit number(s)
.word16 <n1>,<n2>..   - enters 16 bit number(s)
.double <n1>,<n2>..   - enters floating-point number(s) 
```

摆脱上面列表中没有的所有内容，因为它不会在模拟器中运行。

您需要将其`.align`移至之前`.text`

WINMIPS64 需要`daddi`/`daddui`而不是`addi`/ `addiu`，再次根据文档。

根据文档，`move $a, $b`它不是受支持的助记符。将它们替换为`daddui $a, $b, 0`。

`slt`需要`slti`。

最后，模拟器需要一个绝对地址`j`，但您已经给了它一个寄存器。改为使用`jr`。

在这一点上，我得到一个无限循环。这是因为堆栈指针没有被初始化。模拟器只给你 0x400 字节的内存，所以继续初始化堆栈为 0x400：

```
.text
    daddui  $sp,$0,0x400 
```

*现在*它运行了。由于您自己运行代码，因此返回寄存器中不会有任何内容，最终`jr $31`只会将其带回到开头。

这是我的版本：

```
 .align   2
    .text
    daddui   $sp,$0,0x400
main:
    daddui   $sp,$sp,-24
    sw       $fp,20($sp)
    daddui   $fp,$sp,0
    sw       $0,8($fp)
    j        $L2
    nop

$L3:
    lw       $2,8($fp)
    daddui   $2,$2,1
    sw       $2,8($fp)
$L2:
    lw       $2,8($fp)
    slti     $2,$2,10
    bne      $2,$0,$L3
    nop

    daddui   $2,$0,0
    daddui   $sp,$fp,0
    lw       $fp,20($sp)
    daddui   $sp,$sp,24
    jr       $31
    nop 
```

考虑获得另一个编译器或另一个模拟器，因为这两个显然互相讨厌。

# objectlistview - ObjectListView 中的背景颜色行按单元格值过滤 - VB.NET WinForms

> ID：12862029
> 
> 赞同：2
> 
> 时间：2012-10-12T15:09:42.947
> 
> 标签：objectlistview

下午好，

解决我面临的问题很复杂。

我填充了一个 ObjectListView，需要区分单元格中具有特定值的行。

所以，如果单元格的值为 1 -> 黄色行，值为 2 -> 橙色行，依此类推..

我使用了提供的默认 ObjectListView 控件，没有使用任何代码。

最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T03:40:00.133

他们网站上的文档包含一个非常相似的示例，通过为 FormatRow 事件配置处理程序。

[OLV 食谱](http://objectlistview.sourceforge.net/cs/recipes.html)

然而，在我的测试中，我发现当我只使用 SetObjects() 方法时事件没有触发。在调用 RefreshObjects() 之后，我能够让事件正常工作。

查看他们的代码：SetObjects() 从不调用 PostProcessOneRow()。我不确定这是故意遗漏还是错误。

# javascript - 递归函数：我在哪里错了？

> ID：12862040
> 
> 赞同：0
> 
> 时间：2012-10-12T15:10:01.717
> 
> 标签：javascript, jquery, recursion

代码 ：

```
isDomLoaded = $(function () {
    setTimeout(function () {
        if (renderFinished) {
            renderSocial(fotoProssima);
        } else {
            isDomLoaded();
        }
    }, 300);
}); 
```

它说`isDomLoaded is not a function`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T15:11:08.517

那是因为它不是一个函数。它是一个 jQuery 对象。

你需要的可能是：

```
isDomLoaded = function () {
    setTimeout(function () {
        if (renderFinished) {
            renderSocial(fotoProssima);
        } else {
            isDomLoaded();
        }
    }, 300);
}; 
```

如果您想在 DOM 准备好时运行它，请在声明函数后执行此操作：

```
$(window).load(isDomLoaded); 
```

但是，我认为您真正需要的是摆脱 isDomLoaded 函数并使用以下内容：

```
$(document).ready(function(){
    renderSocial(fotoProssima);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:12:32.170

```
function isDomLoaded(){
    //code

    //recursive call
    isDomLoaded();
} 
```

# c# - 使用 C# 和带有递归函数的 LINQ 生成 KML 文件

> ID：12862046
> 
> 赞同：0
> 
> 时间：2012-10-12T15:10:11.420
> 
> 标签：c#, xml, kml

我正在尝试在 C# 中动态创建 KML 文件。我写了一个递归函数来做到这一点。但是输出的结果有点问题。问题是所有地标的结束标记的位置。我真的很困惑。请告诉我递归函数在哪里出错？？？

我的代码：

```
private void xmlBuild()
    {
XDocument doc = new XDocument(
        new XDeclaration("1.0", "utf-8", ""),
        new XComment("This is comment by me"),
        new XElement(ns+"kml", 
        new XElement(ns+"Document", rec_build())));      
        doc.Save(Server.MapPath(@"~\App_Data\markers2.xml"));
}
private XElement rec_build()
    {
        if (iteration != 0)
        {
            iteration -= 1;
            return final_rec = new XElement(ns + "Placemark",
                    new XAttribute("id", "1"),
                    new XElement(ns + "title", "something"),
                    new XElement(ns + "description", "something"),
                    new XElement(ns + "LookAt",
                    new XElement(ns + "Longitude", "49.69"),
                    new XElement(ns + "Latitude", "32.345")), new XElement(ns + "Point", new XElement(ns + "coordinates", "49.69,32.345,0")),rec_build());
        }
        else
        {
            return null;
        }
    } 
```

这是迭代值 2 的输出：（请注意文件末尾的地标 id=1 的结束标记。它应该在地标 id=2 的开始标记之前！

```
<?xml version="1.0" encoding="utf-8"?>
<!--This is comment by me-->
<kml xmlns="http://earth.google.com/kml/2.2">
  <Document>
    <Placemark id="1">
      <title>something</title>
      <description>something</description>
      <LookAt>
        <Longitude>49.69</Longitude>
        <Latitude>32.345</Latitude>
      </LookAt>
      <Point>
        <coordinates>49.69,32.345,0</coordinates>
      </Point>
      <Placemark id="1">
        <title>something</title>
        <description>something</description>
        <LookAt>
          <Longitude>49.69</Longitude>
          <Latitude>32.345</Latitude>
        </LookAt>
        <Point>
          <coordinates>49.69,32.345,0</coordinates>
        </Point>
      </Placemark>
    </Placemark>
  </Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:17:03.877

所以问题是每次递归时，您都在将元素添加到新创建的项目中。似乎循环会更好。

基本上代码是这样做的：

设置 kml outbody 第一次调用并将元素（元素 1）添加到 kml outerboy 第二次调用将元素（元素 2）添加到（元素 1） 第三次调用将元素（元素 3）添加到（元素 2）。

如果您想执行递归方法而不是循环机制，请传入对外部 kml 的引用。

如果这正是它的工作原理，那么递归会更加混乱

（对不起，如果我有多余或缺少的括号、逗号或其他项目。我没有安装 VS）

循环：

```
private void xmlBuild()
{
    XElement documentElement = new XElement(ns + "Document");

    for (int i = 0; i < 2; i++)
    {
        documentElement.Add(rec_build());
    }

    XDocument doc = new XDocument(
        new XDeclaration("1.0", "utf-8", ""),
        new XComment("This is comment by me"),
        new XElement(ns + "kml", documentElement));

    doc.Save(Server.MapPath(@"~\App_Data\markers2.xml"));
}

private XElement rec_build()
{

    return new XElement(ns + "Placemark",
           new XAttribute("id", "1"),
           new XElement(ns + "title", "something"),
           new XElement(ns + "description", "something"),
           new XElement(ns + "LookAt",
           new XElement(ns + "Longitude", "49.69"),
           new XElement(ns + "Latitude", "32.345")), 
           new XElement(ns + "Point", 
           new XElement(ns + "coordinates", "49.69,32.345,0")));
} 
```

递归：

```
private void xmlBuild()
{
    XElement docElement = new XElement(ns+"Document");
    rec_build(docElement);
    XDocument doc = new XDocument(
    new XDeclaration("1.0", "utf-8", ""),
    new XComment("This is comment by me"),
    new XElement(ns+"kml", docElement)));      
    doc.Save(Server.MapPath(@"~\App_Data\markers2.xml"));
}
private XElement rec_build(XElement doc)
{
    if (iteration != 0)
    {
        iteration -= 1;
        doc.Add(new XElement(ns + "Placemark",
                new XAttribute("id", "1"),
                new XElement(ns + "title", "something"),
                new XElement(ns + "description", "something"),
                new XElement(ns + "LookAt",
                new XElement(ns + "Longitude", "49.69"),
                new XElement(ns + "Latitude", "32.345")), 
                new XElement(ns + "Point", new XElement(ns + "coordinates", "49.69,32.345,0")));
        return recBuild(doc);
    }
    else
    {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:18:58.813

您将递归构建元素添加为 Placemark 的子元素，而不是 Document。这应该可以解决问题：

```
 private void xmlBuild()
    {
        XElement docElement = new XElement(ns + "Document");
        XDocument doc = new XDocument(
                new XDeclaration("1.0", "utf-8", ""),
                new XComment("This is comment by me"),
                new XElement(ns + "kml", docElement));
        rec_build(docElement);
        doc.Save(Server.MapPath(@"~\App_Data\markers2.xml"));
    }

    private XElement rec_build(XElement docElement)
    {
        if (iteration != 0)
        {
            iteration -= 1;
            return final_rec = new XElement(ns + "Placemark",
                    new XAttribute("id", "1"),
                    new XElement(ns + "title", "something"),
                    new XElement(ns + "description", "something"),
                    new XElement(ns + "LookAt",
                    new XElement(ns + "Longitude", "49.69"),
                    new XElement(ns + "Latitude", "32.345")), 
                    new XElement(ns + "Point", new XElement(ns + "coordinates", "49.69,32.345,0")));
            docElement.Add(final_rec);
            rec_build(docElement);
        }
        else
            return null;
    } 
```

# xpages - djDateTextBox 和 djTimeTextBox 的设置值？

> ID：12862050
> 
> 赞同：0
> 
> 时间：2012-10-12T15:10:27.990
> 
> 标签：xpages

如何设置 djDateTextBox 和 djTimeTextBox 组件的值？

我试过 getComponent("djDateTextBox1").setValue("10/12/2012");

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:15:18.120

对我来说，这里的代码工作得很好（由按钮的服务器端 onclick 事件调用，执行完整更新）：

```
getComponent("djDateTextBox1").setValue(@Today()); 
```

否则，您也可以使用一些客户端脚本获得类似的结果，如

```
dojo.byId("#{id:djDateTextBox1}").value = new Date(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:34:06.113

感谢 Lothar 让我走上正轨，但这就是我解决它的方法：

```
var sdt:NotesDateTime = doc.getItemValueDateTimeArray("ContractorStartDateTime")[0];
var fdt:NotesDateTime = doc.getItemValueDateTimeArray("ContractorFinishDateTime")[0];

getComponent("djDateTextBox1").setValue(sdt.toJavaDate());
getComponent("djTimeTextBox1").setValue(sdt.toJavaDate());

getComponent("djDateTextBox2").setValue(fdt.toJavaDate());
getComponent("djTimeTextBox2").setValue(fdt.toJavaDate()); 
```

# java - 如何在 java android 中创建网络流？

> ID：12862052
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:10:39.000
> 
> 标签：java, android, networking, tcp, networkstream

有没有办法可以在 java 中创建一个网络流数组。C# 支持创建网络流数组。

AFAIK 我们需要创建单独的 InputStreams 和 OutputStreams 以便在 Java 中接收和发送数据。

我想做的是建立多个 TCP 连接来发送和接收数据。

在java中有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:41:25.670

您可以通过创建多个 Socket 实例来实现，如下所示：

**服务器.java**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class Server
{
    private static int CLIENT_COUNT = 0;

    public static void main(String[] args) throws IOException
    {
        ServerSocket ss = new ServerSocket(2000);
        while(true)
        {
            Socket s = ss.accept();
            new SocketHandler("Handler#" + ++CLIENT_COUNT, s).start();
        }
    }
}

class SocketHandler extends Thread
{
    private PrintWriter pw;
    private BufferedReader br;

    public SocketHandler(String name, Socket socket) throws IOException
    {
        super(name);
        this.pw = new PrintWriter(socket.getOutputStream(), true);
        this.br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    }

    @Override
    public void run()
    {
        String message;
        try
        {
            while((message = br.readLine()) != null)
            {
                System.out.println("Server#" + getName() + " - Client sent: " + message);
                sendMessage("Server#" + getName() + ": echo " + message);
            }
        }
        catch(IOException e)
        {
            e.printStackTrace();
            System.out.println("Server#" + getName() + " -> IOException");
        }
    }

    public void sendMessage(String message)
    {
        pw.println(message);
        System.out.println("Server#" + getName() + " is sending ~ " + message);
    }
} 
```

**客户端.java**

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

public class Client
{
    private static int SOCKET_COUNT = 0;

    public static void main(String[] args) throws UnknownHostException, IOException
    {
        Socket s1 = new Socket(InetAddress.getLocalHost(), 2000);
        Socket s2 = new Socket(InetAddress.getLocalHost(), 2000);
        Socket s3 = new Socket(InetAddress.getLocalHost(), 2000);
        Socket s4 = new Socket(InetAddress.getLocalHost(), 2000);

        LocalSocketHandler h1 = new LocalSocketHandler("LocalHandler#" + ++SOCKET_COUNT, s1);
        LocalSocketHandler h2 = new LocalSocketHandler("LocalHandler#" + ++SOCKET_COUNT, s2);
        LocalSocketHandler h3 = new LocalSocketHandler("LocalHandler#" + ++SOCKET_COUNT, s3);
        LocalSocketHandler h4 = new LocalSocketHandler("LocalHandler#" + ++SOCKET_COUNT, s4);

        h1.start();
        h2.start();
        h3.start();
        h4.start();

        h1.sendMessage("I am socket #1!");
        h2.sendMessage("I am socket #2!");
        h3.sendMessage("I am socket #3!");
        h4.sendMessage("I am socket #4!");
    }
}

class LocalSocketHandler extends Thread
{
    private PrintWriter pw;
    private BufferedReader br;

    public LocalSocketHandler(String name, Socket socket) throws IOException
    {
        super(name);
        this.pw = new PrintWriter(socket.getOutputStream(), true);
        this.br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    }

    @Override
    public void run()
    {
        String message;
        try
        {
            while((message = br.readLine()) != null)
            {
                System.out.println("Client#" + getName() + " - Server sent: " + message);
            }
        }
        catch(IOException e)
        {
            e.printStackTrace();
            System.out.println("Client#" + getName() + " -> IOException");
        }
    }

    public void sendMessage(String message)
    {
        pw.println(message);
        System.out.println("Client#" + getName() + " is sending ~ " + message);
    }
} 
```

**客户端控制台：**

```
Client#LocalHandler#1 is sending ~ I am socket #1!
Client#LocalHandler#2 is sending ~ I am socket #2!
Client#LocalHandler#3 is sending ~ I am socket #3!
Client#LocalHandler#4 is sending ~ I am socket #4!
Client#LocalHandler#1 - Server sent: Server#Handler#1: echo I am socket #1!
Client#LocalHandler#3 - Server sent: Server#Handler#3: echo I am socket #3!
Client#LocalHandler#2 - Server sent: Server#Handler#2: echo I am socket #2!
Client#LocalHandler#4 - Server sent: Server#Handler#4: echo I am socket #4! 
```

**服务器的控制台：**

```
Server#Handler#1 - Client sent: I am socket #1!
Server#Handler#1 is sending ~ Server#Handler#1: echo I am socket #1!
Server#Handler#3 - Client sent: I am socket #3!
Server#Handler#3 is sending ~ Server#Handler#3: echo I am socket #3!
Server#Handler#2 - Client sent: I am socket #2!
Server#Handler#2 is sending ~ Server#Handler#2: echo I am socket #2!
Server#Handler#4 - Client sent: I am socket #4!
Server#Handler#4 is sending ~ Server#Handler#4: echo I am socket #4! 
```

# android - 了解前台服务生命周期

> ID：12862055
> 
> 赞同：4
> 
> 时间：2012-10-12T15:10:42.370
> 
> 标签：android, service

我正在尝试实现前台服务，并试图了解它如何处理崩溃。

我创建了一个简单的服务，如下所示：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    checkRunningAndStartForeground();
    return super.onStartCommand(intent, flags, startId);
}

@Override
public void onCreate() {
    super.onCreate();
    crashAfterTenSeconds();
}

@Override
public void onDestroy {
    super.onDestroy();
    if(isRunning) {
        isRunning = false;
        stopForeground(true);
    }
} 
```

发生的情况是服务在前台启动，然后按预期崩溃。它是由系统安排的重新启动。正如预期的那样，它重新启动然后再次崩溃。之后，它不会被安排重新启动。

我的问题是，为什么它会重新启动一次，而不是两次？我希望它在每次崩溃后继续重新启动。

我担心的是，如果我的应用程序正在运行，并且以某种方式崩溃了两次，那么它将永远不会重新启动。

比如一开始就崩溃一次，运行一两天再崩溃，是不是就不会再回来了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:51:21.357

正如大卫在评论中建议的那样，我尝试增加崩溃间隔，但没有帮助。我相信android会存储服务崩溃的次数，如果它崩溃2次，无论间隔如何，它都会停止重新启动它。我相信这与 android 杀死内存服务时不同，我还没有让 android 为前台服务做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-01T09:50:16.727

尝试在 return 语句中使用 StartSticky，它会起作用。安卓系统崩溃后会重启服务。

# linux - 以 root 身份登录后，我收到 command not found 消息

> ID：12862061
> 
> 赞同：2
> 
> 时间：2012-10-12T15:10:56.800
> 
> 标签：linux, sudo

当我发出命令`sudo su`或说时，`sudo -i` 终端以超级用户身份成功登录，但显示

```
$: command not found
$: command not found 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:24:10.300

当您切换到 root 时，可能有一个 root 配置文件设置正在尝试运行命令。

免责声明：在不了解您的环境的情况下，很难知道从哪里开始寻找，因此这可能有用，也可能没有用。

我会尝试以下方法：

以 root 身份登录并 cd 到您的主目录`cd ~/`，然后键入`ls -la`查找名称为“.bashrc”“.bash_profile”的任何文件，这些配置文件脚本在您每次为该用户启动 shell 时运行。您将需要打开该文件并查看正在运行的命令，然后修复它们的路径或删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:12:11.450

您需要先安装`sudo`才能使用它。

如何取决于您的 linux 发行版。[看这里](http://www.linuxforums.org/forum/linux-tutorials-howtos-reference-material/64958-how-install-software-linux.html)

# http - 根据用户的凭据加载动态内容？

> ID：12862067
> 
> 赞同：1
> 
> 时间：2012-10-12T15:11:15.130
> 
> 标签：http, windows-7, iis-7.5, webdav, httpmodule

是否可以使用, 为将驱动器映射到我们共享`WebDAV`的每个用户（例如，可能*是他们*从*我们数据库中的文件）加载动态内容？*`WebDAV`

我见过的每个 WebDAV 实现都使用虚拟目录`IIS`，并允许用户将网络驱动器映射到该目录，最终在两者之间同步文件/文件夹。

如果可能的话，我想做的是`WebDAV`让用户将他们的驱动器映射到虚拟目录，但只使用虚拟目录来映射他们的驱动器。我有一个`HttpModule`可以根据请求执行的设置`WebDAV`，所以我的想法是让`HttpModule`决定，根据用户，需要加载哪些文件，并从那里在他们的映射驱动器中创建虚拟文件夹结构。

由于多个用户将访问此驱动器，我实际上不想`WebDAV`在虚拟目录和用户的映射驱动器之间来回同步文件。我们的想法是让我们`HttpModule`检测用户在哪个文件夹中（从请求中），然后相应地从我们的数据库中加载文件。

这可能吗？或者有没有其他方法可以做到这一点？我意识到这可能`WebDAV`用于其他用途，但我不确定是否有任何其他方法可以让用户映射这样的驱动器并检测来自 Windows 资源管理器的请求。我目前在 Windows 7 上使用带有 VB.NET 的 IIS 7.5 进行测试。我最终还需要实现安全/身份验证，我只是希望首先让它在基本层面上工作，所以这是要记住的一件事。

**更新：**

我已经添加`RequestFiltering`到我的 Web.config 以不允许扩展名为“.txt”的文件，希望它们不会被复制到我的本地映射驱动器（我将一些文本文件复制到我在 IIS 中的虚拟目录中），但事实并非如此——它们总是出现在映射驱动器中。看起来它`RequestFiltering`实际上并没有影响显示在我的映射驱动器中的文件，而是不允许我打开它们。

有没有办法`WebDAV`启用映射驱动器到共享，但不允许`WebDAV`显示/复制映射驱动器中的文件？我希望它以两种方式工作，即在将文件复制到映射驱动器时，不应将它们复制到`IIS`. 我想拦截这些请求并处理将文件复制到不同位置（或复制到数据库中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:15:57.907

[我采用的解决方案是从@User629926 上面提供的链接](http://thehojusaram.blogspot.com/2007/06/c-webdav-server-with-sql-backend-source.html)下载项目并遵循该项目的逻辑。该项目清楚地演示了如何使用`HttpModules`&`HttpHandlers`拦截`WebDAV`请求，然后动态构建响应，使我可以在 Windows 资源管理器中显示后端 SQL 数据。

# linux - 软件中断程序和用户模式函数之间的区别

> ID：12862071
> 
> 赞同：1
> 
> 时间：2012-10-12T15:11:35.880
> 
> 标签：linux, process, operating-system, linux-kernel, context-switch

好吧，我的问题在标题中

众所周知，异常处理程序负责将用户模式切换到内核模式
这涉及某些汇编指令

据称这样做是为了防止应用程序使用访问受限的高特权指令和内存区域

用户模式应用程序不能自己执行这个用户内核切换吗？即在应用程序本身的常用函数例程中使用这些汇编指令？

如果是这样，那么我无法理解软件中断的意义以及与用户内核切换相关的所有安全注意事项

我们只需在我们的程序中实现该开关，瞧！我们现在处于内核模式

WTH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:36:22.670

你犯了一个错误：用户唯一能做的就是调用一个可以执行特权指令的例程。这是由软件中断完成的。之所以称为中断，是因为原始用户模式程序在处理调用时停止。这样，用户态程序是完全无法执行特权的，但它可以调用内核中的中断例程。程序本身永远不会处于内核模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:45:11.210

重点是安全。

用户态应用程序在有限的环境中工作。他们可以做自己的事情，但不能读或写任何没有明确分配给他们的东西。这个非常重要。整个现代操作系统的重点是保持应用程序分离。这主要是通过使用现代硬件提供的内存管理器单元来保证的。因此，典型的用户态应用程序无法访问任何内核内存，也无法“跳转”到任何地方。如果它被允许，将无法确定应用程序是否没有跳转到内核未预料到的地方并执行代码导致整个系统崩溃或从另一个应用程序窃取您的信用卡号。

当应用程序需要任何“在它自己的盒子之外”的功能时，它必须调用内核代码来完成它。但是怎么做？从应用程序的角度来看，任何地方都没有内核代码之类的东西。这就是为什么通常有一条“系统调用”（syscall）指令。它使当前代码流跳转到内核准备的指定位置以及它期望处理所有用户态请求的位置。由于系统调用与 IRQ、数据/预取和类似事件非常相似，因此硬件架构通常像此类事件一样对所有事物进行建模，通常称为“异常”。因此得名“软件中断”。

这有点简单，但确实如此。如果你想真正理解它，你必须熟悉异常、虚拟内存和类似的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T01:18:27.660

首先，我不太明白通过“手动”切换到内核模式想要获得什么。所以，你已经切换了，然后呢？你想下一步该做什么？如果您想访问不应在用户应用程序中访问的资源，那么这就是不允许它的全部意义，因为如果它被允许，那么您的应用程序将能够轻松地做如下令人讨厌的事情：

*   损坏操作系统并挂起或重新启动计算机
*   劫持计算机用户并索要赎金
*   将计算机变成隐蔽的垃圾邮件机器人或网络上其他计算机的远程攻击者
*   监视操作系统和其他应用程序并窃取机密信息
*   篡改信息
*   解决诸如 DRM 和其他各种许可证之类的问题
*   冒充同一台计算机的其他用户，以可能使用他们的银行账户或信用卡信息或其他资源的密码来指控他们或从他们那里窃取
*   禁用防病毒软件（如果有），可能导致上述任何或所有情况
*   等等等等

现在，如果您对上述任何操作都不感兴趣，那么您的应用就没有理由获得内核权限。

我承认，操作系统中存在某些错误以及我们认为我们希望通过获得所述访问权限来解决的错误，但这种情况很少见，而且很少有人能够在不破坏重要内容的情况下真正“修复”这些错误，所以可靠性和安全性问题超过了 1000 比 1 的“修复”操作系统中您不喜欢的东西的冲动。

至于中断和异常是切换到内核模式的方式，这只是一种有意义的常见实现。

中断必须在内核中处理，这就是为什么它们会在需要时进行切换。它们必须如此，因为只有内核和设备驱动程序知道如何处理触发中断的硬件。这就是操作系统的全部意义，抽象出硬件差异并为程序提供统一的 API 来做一些事情，使他们摆脱知道如何使用这个或那个显示器、声卡、网卡或打印机等的负担等等

软件中断只是搭载与硬件中断相同的机制，因为这样做很便宜。软件中断的主要用途是向操作系统请求一些工作/协助，可以理解的是，它们也需要切换，这就是硬件中断已经做的事情。

在 x86 平台上，硬件中断和`ìnt`指令在 CPU 中产生几乎相同的响应，它们的处理方式非常相似。

对于这个系统调用功能，一些 CPU 提供了与中断无关的特殊指令。它们可能比在硬件中断之上实现的软件中断更快，或者它们可能带有软件中断不提供的一些有用的额外功能。

x86 指令`sysenter`和`syscall`. 它们针对从用户模式到内核模式的快速转换进行了优化。

一些异常与硬件中断具有相同的性质，例如页面错误异常。它也必须在内核中处理，因为这是操作系统用来实现虚拟磁盘内存的机制。操作系统需要访问磁盘上的内容以响应页面错误，然后更改页表，而您的应用程序本身不太可能做到这一点，让它访问诸如任意位置之类的重要内容并不是一件好事在磁盘或页表上自由。

其他异常用于控制应用程序的执行并通知操作系统出现问题，这使操作系统有机会解决问题或终止行为不端的应用程序，而不必将其保持在僵尸状态仍然消耗宝贵的资源，例如记忆。这些异常也需要在内核中处理，这是唯一的方法。

现在，您可能有兴趣在应用程序本身内处理应用程序的异常。某些操作系统允许您这样做。Windows 实现了它所称的`Structured Exception Handling`（AKA `SEH`），而 Linux 和 Unix 实现了`signals`. 做任何一个通常仍然涉及首先处理内核中的异常，然后才将其反射回它的来源。这就是大多数 CPU 的实现方式。当异常首先被路由到内核中时，这样的实现既简单又便宜，并且它不会禁止任何东西，因为内核可以在此之上实现任何东西，包括 SEH 和信号。

无论如何，因为它是操作系统/内核为用户应用程序提供功能并确保安全性，并且两者往往齐头并进（因为操作系统/内核可以访问所有内容，而您的应用程序不应该和操作系统有时代表您的应用程序访问这些东西，想想礼貌:)，这两个东西都在用户模式和内核模式之间的想象围栏后面。

# ruby-on-rails - Rails wicked gem 使用参数重定向

> ID：12862076
> 
> 赞同：3
> 
> 时间：2012-10-12T15:11:43.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在使用 wicked gem 来构建表单向导。在文档中，它使用 current_user 对象，但我想使用不同的对象。我正在努力向 redirect_to 添加一个参数，以便我可以使用这个对象。

**products_controller.rb**

```
def create
  @product = current_user.product.build(params[:product])
  @product.ip_address = request.remote_ip

  if @product.save
    redirect_to product_steps_path # This is where I think I need to pass product object but not sure how
  else
    render 'new'
  end
end 
```

**product_steps_controller.rb**

```
class ProductStepsController < ApplicationController
  include Wicked::Wizard
  steps :apps, :templates

  def show
    @product = Product.find(params[:id])
    render_wizard
  end
end 
```

**路线：**

```
resources :products
resources :product_steps 
```

我用上面的代码得到的错误是：

```
ActiveRecord::RecordNotFound in ProductStepsController#show

Couldn't find Product with id=apps 
```

如何在这样的特定对象上使用 wicked gem 而不是文档中的 current_user 示例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T23:27:40.113

这就是我要工作的。

products_controller.rb

```
if @product.save
  redirect_to product_step_path(:id => "apps", : product_id => @ product.id)
else
... 
```

product_steps_controller.rb

```
def show
  @asset = Asset.find(params[:asset_id])
  render_wizard
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T06:11:56.683

向导 gem 将`:id`参数作为步骤名称。所以你不应该`:id`作为参数传递，因为它会与步骤名称冲突。

**products_controller.rb**

```
redirect_to product_step_path(product_id: @product.id) 
```

**product_steps_controller.rb**

```
@product = Product.find(params[:product_id]) 
```

# dynamic - 长度为 k 的递增字符串的数量

> ID：12862077
> 
> 赞同：0
> 
> 时间：2012-10-12T15:11:45.347
> 
> 标签：dynamic

我发现如何在*n 个数字中找到长度为**k*的递增序列的数量很难。我知道它使用了*LIS*问题，我必须以某种方式对其进行修改，但现在知道了。它的复杂性是DP解决方案。请给出提示并稍微解释一下。**`O(k*n^2)`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T16:12:25.040

也许有点晚了，但这可能会有所帮助：

有两种算法（据我所知）用于解决这个问题。我将用 O(n^2*k) 复杂度来描述一个。

该算法使用 DP 解决方案；这是 LIS 问题的一个转折点。在 LIS 问题中，您使用一维数组来存储 LIS 直到元素 i 的长度，这意味着 dp[i] = LIS 直到元素 i 的长度。这将导致如下算法：

```
/* let dp[] be the array that stores the length of the LIS found so far.
 v[] is the array of the values

 LIS(0) = 1
 LIS(i) = 1 + max(LIS(j) where j in [1..i-1] and v[j] < v[i]);
*/

dp[0] = 1;
for (int i=1 ; i<n ; i++)
    for (int j=0 ; j<i ; j++) if (v[j] < v[i])
        dp[i] = 1 + max(dp[i], dp[j]); 
```

然后，我们可以把它带到另一个层次，然后得到长度为 k 的递增子序列的数量。该算法使用相同的原理。

```
/*
  dp[i][k] -> Stores the number of subsequences of length k until character i
  v[] -> The values
  n -> The size of the array
  K -> the number of IS we are looking for

  The idea is to increment the value of this quantity, by the amount of the sequences
  found in the same character and the previous length. This will be better ilustrated int 
  the algorithm
*/

int totalIS = 0;
for (int i=0 ; i<n ; i++) {
    dp[i][1] = 1; // Number of subsequences of length 1 until element i
    for (int k=2 ; k<=K ; k++) { // For all the possible sizes of subsequence until k
        for (int j=0 ; j<i ; j++) if (v[j] < v[i]) {
            dp[i][k] += dp[j][k-1]; // Increment the actual amount by dp[j][k-1], which means
                                // the amound of IS of length k-1 until char j
        }
    }
    totalIS += dp[i][K]; // This can also be done in a separated cycle.
}

// The total amount of IS of length K is in totalIS 
```

如果您有任何疑问，请告诉我。**

# mysql - 错误 1054。插入子句中的未知列

> ID：12862081
> 
> 赞同：4
> 
> 时间：2012-10-12T15:11:59.753
> 
> 标签：mysql, mysql-error-1054

我有这个问题：如果我编写以下查询：

```
INSERT INTO prodotto  (Barcode, InseritoDa,  DataInserimento, UrlImage) 
VALUES  ('vfr','ff','12-10-2012', 'vfr.jpg') 
```

我收到此错误消息：

```
Error Code: 1054\. Unknown column 'InseritoDa' in 'where clause' 
```

但在表中，`prodotto`我有此列及其名称 InseritoDa。

我哪里错了？该错误可能是由于该字段`InseritoDa`是指向另一个名为`utente`?的表的外键。

与表关联的触发器是：

```
-- Trigger DDL Statements
DELIMITER $$

USE `m4af`$$

CREATE
DEFINER=`root`@`localhost`
TRIGGER `m4af`.`IncrementaProdottiInseritiUtente`
AFTER INSERT ON `m4af`.`prodotto`
FOR EACH ROW
update utente as u
set ProdottiInseriti= (select ProdottiInseriti from utente where username= InseritoDa)+1
where u.username = InseritoDa$$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:13:43.647

由于错误表明它发生在**WHERE**子句中，因此可能有一个插入触发器执行另一个查询并失败。您的插入语句中没有 WHERE 子句。

## 编辑

尝试像这样编辑您的 INSERT 触发器：

```
update utente
set ProdottiInseriti = ProdottiInseriti + 1
where username = NEW.InseritoDa 
```

# android - 如何修复Android应用程序中的键盘？

> ID：12862085
> 
> 赞同：0
> 
> 时间：2012-10-12T15:12:12.557
> 
> 标签：android, keyboard

我有一个动画两个的应用程序`ImageViews`......我设法使用`Menu`键来消失其中一个，`ImageViews`因为它可以在不考虑软键盘的情况下使用。这是代码..

```
public class Client extends Activity {

    private ImageView mScanner, mScanner2;
    private Animation mAnimation;
    private InputMethodManager mgr ;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mScanner = (ImageView)findViewById(R.id.imageView1);
        mScanner2 = (ImageView) findViewById(R.id.imageView2);

        mAnimation = new TranslateAnimation(0, 0, 0, 500);
        mAnimation.setDuration(10000);
        mAnimation.setFillAfter(true);
        mAnimation.setRepeatCount(-1);
        mAnimation.setRepeatMode(Animation.REVERSE);
        mScanner2.setAnimation(mAnimation);
        mScanner.setAnimation(mAnimation);
        mScanner.setVisibility(View.VISIBLE);
        mScanner2.setVisibility(View.VISIBLE);

        EditText et = (EditText) findViewById(R.id.editText1);

        mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        mgr.showSoftInputFromInputMethod(et.getWindowToken(), 0);

    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        switch(keyCode){
        case KeyEvent.KEYCODE_MENU:
            System.out.println(" Menu Clicked");
            mScanner.setAnimation(null);
            mScanner.setVisibility(View.INVISIBLE);
            return true;
        case KeyEvent.KEYCODE_A:
            System.out.println(" A ");
            mScanner2.setAnimation(null);
            mScanner2.setVisibility(View.INVISIBLE);
            return true;
        }
        return true;
    }
} 
```

我希望键盘固定在屏幕底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:36:06.550

在您的活动清单中有 configChanges。如果未设置，则此类事件（键盘拉动、方向更改等）将重新启动您的活动。根据您的需要自定义 configChanges。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:02:29.147

```
private InputMethodManager mgr;

mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
```

固定键盘。

# algorithm - N-Puzzle 的启发式 A* 算法与重复瓷砖

> ID：12862087
> 
> 赞同：1
> 
> 时间：2012-10-12T15:12:20.267
> 
> 标签：algorithm, search, a-star

我实现了一个算法来解决 N-Puzzle 问题。该算法将使用其他算法，如 A* 和启发式双向搜索。一般来说，这两种算法都给了我很好的结果：A* 为一些超过 50 步的问题找到了解决方案，而我将另一个用于其他更大的解决方案。

问题如下：我使用曼哈顿距离作为两种算法的启发式算法，如果板子没有重复的瓷砖，似乎可以完美地工作。例如，对于 3x3，经典的 8 拼图起始板可以是 1,2,3|4,5,6|7,8,0，重复牌可以是：1,1,1|2,3,2|1 ,1,0。但是在这种情况下（当棋盘有重复的牌时）这些算法有效，但不一样，需要更多的时间并给出更大的解决方案。我修改了启发式函数，现在每个图块都采用到任何原始位置的最短路径，例如，如果有几个 2，则每个图块将计算曼哈顿距离到其最近的起始位置的距离为 2。

问题：任何人都知道这些问题的更好的启发式方法吗？对于重复元素的问题，这个曼哈顿距离启发式仍然可以接受吗？这是另一个与 N-Puzzle 不同的问题吗？

谢谢...

# iphone - 如何在 iOS 中支持横向和纵向视图？

> ID：12862091
> 
> 赞同：0
> 
> 时间：2012-10-12T15:12:38.897
> 
> 标签：iphone, ios, uiviewcontroller, landscape

在我的应用程序中，我支持单个 ViewController 的横向和纵向。我可以使用 Autoresize 来支持横向和纵向。但我需要制作不同于肖像的自定义风景。我对 iOS 很陌生。在 google 和 SO 中搜索了很多，但找不到解决方案。

我正在使用**Xcode 4.5 和情节提要**来制作视图。

如何支持自定义横向和纵向视图？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:49:01.323

在你的 .m 文件中试试这个：

```
- (void)updateLayoutForNewOrientation:(UIInterfaceOrientation)orientation
{
    if (self.interfaceOrientation == UIInterfaceOrientationPortrait || self.interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        // Portrait

        [object setFrame:CGRectMake(...)];

        // Do the same for the rest of your objects
    }

    else
    {
        // Landscape

        [object setFrame:CGRectMake(...)];

        // Do the same for the rest of your objects
    }
} 
```

在该函数中，您已经定义了视图中每个对象的位置，包括纵向和横向。

然后您调用该函数以`viewWillAppear`使其最初工作；视图确定在开始时使用哪个方向：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self updateLayoutForNewOrientation:self.interfaceOrientation];
} 
```

另外，当你旋转时：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration 
{    
     [self updateLayoutForNewOrientation:self.interfaceOrientation];
} 
```

如果我需要关于方向的更多定制外观，这就是我采用的方法。希望这对你有用。

编辑：

如果您在一个 UIViewController 中使用两个 UIView，一个用于纵向，另一个用于横向，您可以将代码的第一部分更改为如下所示：

```
- (void)updateLayoutForNewOrientation:(UIInterfaceOrientation)orientation
{
    if (self.interfaceOrientation == UIInterfaceOrientationPortrait || self.interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        // Portrait

        portraitView.hidden = NO;
        landscapeView.hidden = YES;
    }

    else
    {
        // Landscape

        portraitView.hidden = YES;
        landscapeView.hidden = NO;
    }
} 
```

这个经过编辑的样本和原始样本之间有利有弊。在原始版本中，您必须为每个对象编写代码，在此编辑后的示例中，您只需要此代码，但是，您需要分配两次对象，一次用于纵向视图，另一次用于横向视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:06:50.500

您仍然可以使用 Sean 的方法，但由于您有 2 个不同的视图，您可能有 2 个不同的 Xib 文件，因此您可以使用`[[NSBundle mainBundle] loadNibNamed:"nibname for orientation" owner:self options:nil]; [self viewDidLoad];`. 因为我还没有使用它，所以我不知道这将如何与故事板一起使用，但我在一个需要不同方向布局的应用程序中执行此操作，因此我创建了 2 个 Xib 文件并将它们都连接到 ViewController 所以旋转时会加载相应的 Xib 文件。

# sql - 不能将 2 个具有相同值的 varchar 关联起来

> ID：12862095
> 
> 赞同：0
> 
> 时间：2012-10-12T15:12:55.007
> 
> 标签：sql, sql-server-2000

我有这两张桌子

```
f_data
(
 id (int, null),
 name(varchar(255), null),
 control (int, null),
) 
```

ID名称控制
1255，ALMONTE JIMENEZ ADALGISA，1131238601
92，ENCARNACION PAMELA，1131237483
3376，Feliz Luis Manuel，1131240995
688，HerrandMariñeDioMedes，1131238666
1887，Jose Alberto Matos，1131240215

```
est_data
(
id(int, null),
name(varchar(255), null),
firstname(varchar(255), null),
lastname(varchar(255), null),
) 
```

id name firstname lastname
201201255 ,ADALGISA ,ALMONTE ,JIMENEZ ,
201200092 ,PAMELA ,ENCARNACION ,,
201223376 ,LUIS MANUEL ,FELIZ ,,
201200688 ,DIOMEDES ,HERRAND ,MARIÑE,
20120188

**和这个 SQL 代码**

```
select *
from est_data 
where  
  CASE 
   WHEN 
    lastname  = ' ' 
   then 
    ltrim(rtrim(firstname)) + ' ' + ltrim(rtrim(name))   
   ELSE 
    ltrim(rtrim(firstname))   + ' ' + ltrim(rtrim(lastname))+' '+ltrim(rtrim(name)) 
   END in 
        (Select ltrim(rtrim(name)) From f_data where id = 1887) 
```

**结果：**

```
CASE 
   WHEN 
    lastname  = ' ' 
   then 
    ltrim(rtrim(firstname)) + ' ' + ltrim(rtrim(name))   
   ELSE 
    ltrim(rtrim(firstname))   + ' ' + ltrim(rtrim(lastname))+' '+ltrim(rtrim(name)) 
   END 
```

是“何塞·阿尔伯托·马托斯”

**结果：**

```
Select ltrim(rtrim(name)) From f_data where id = 1887 
```

是“何塞·阿尔伯托·马托斯”

但是代码返回0行，名称相同时的事件。这里可能有什么问题？

注意：我们使用的是 SQL Server 2000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:47:47.150

非常仔细地查看您的数据。在`f_data`你有一个`name`“JOSE ALBERTO MATOS”的价值。在`est_data`你有一个`name`“JOSE”，一个`firstname`“ALBERTO”和一个`lastname`“MATOS”。

现在查看您对`est_data`. 您正在组合 FIRSTNAME-LASTNAME-NAME，在这种情况下将是“ALBERTO MATOS JOSE”，它与 中的值不匹配`f_data`。您在两个地方的名称排序方式不同。

如果你不相信我，只需运行这个简单的脚本来重现问题：

```
create table #f_data
(
 id int,
 name varchar(255),
 control int
);

create table #est_data
(
id int,
name varchar(255),
firstname varchar(255),
lastname varchar(255)
);

insert into #f_data(id, name, control) values (1887, 'JOSE ALBERTO MATOS', 1);

insert into #est_data(id, name, firstname, lastname) values (1887, 'JOSE', 'ALBERTO', 'MATOS');

Select ltrim(rtrim(name)) From #f_data where id = 1887;

select CASE 
   WHEN 
    lastname  = ' ' 
   then 
    ltrim(rtrim(firstname)) + ' ' + ltrim(rtrim(name))   
   ELSE 
    ltrim(rtrim(firstname))   + ' ' + ltrim(rtrim(lastname))+' '+ltrim(rtrim(name)) 
   END
from #est_data;

select *
from #est_data 
where  
  CASE 
   WHEN 
    lastname  = ' ' 
   then 
    ltrim(rtrim(firstname)) + ' ' + ltrim(rtrim(name))   
   ELSE 
    ltrim(rtrim(firstname))   + ' ' + ltrim(rtrim(lastname))+' '+ltrim(rtrim(name)) 
   END in 
        (Select ltrim(rtrim(name)) From #f_data where id = 1887); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:56:28.520

使用子查询：

```
select * from (
   select e.*, 
      CASE 
         WHEN e.lastname  = ' ' 
         THEN ltrim(rtrim(e.firstname)) + ' ' + ltrim(rtrim(e.name))
         ELSE ltrim(rtrim(e.firstname))   + ' '+ltrim(rtrim(e.lastname)) + ' ' + ltrim(rtrim(e.name))
      END as wrappedName 
   from est_data e
) where wrappedName = 
        (select ltrim(rtrim(name))) from f_data where id = 1887) 
```

# winforms - WCF 服务方法参数数据绑定

> ID：12862097
> 
> 赞同：1
> 
> 时间：2012-10-12T15:13:02.293
> 
> 标签：winforms, wcf, data-binding

我正在将具有 UI 层中所有逻辑的 Windows 窗体应用程序转换为 2 层应用程序，将 WCF 用于应用程序/业务逻辑。我们遵循一种模式，服务上的每个方法都接受一个参数，并返回一个响应对象。所有需要的数据都封装在这些对象中。例如：

```
public GetPersonResponse GetPerson(GetPersonRequest req){
    // do stuff
}

public class GetPersonRequest{
    String Name{get;set;}
    Date BirthDate{get;set;}
}

public class GetPersonResponse{
    Person Result {get;set;}
} 
```

我的问题在于客户端的数据绑定。当我转到数据源并显示数据源时，我看到了响应和其中使用的实体，但看不到请求。在上面的示例中，我会看到 GetPersonResponse 和 Person，但看不到 GetPersonRequest。能够将请求对象绑定到表单，并通过一行代码提交整个操作将非常方便：

```
client.GetPerson((GetPersonRequest) getPersonRequestBindingSource.Current); 
```

或者至少：

```
GetPersonRequest req = (GetPersonRequest) getPersonRequestBindingSource.Current;
Validate(req);
client.GetPerson(req); 
```

再举一个例子，想象一个 CreatePerson 方法，具有以下 Request 类：

```
public class CreatePersonRequest{
    String Name {get;set;}
    String Address {get;set;}
    String Address2 {get;set;}
    String City {get;set;}
    String State {get;set;}
    String ZipCode {get;set;}
    Integer Age {get;set;}
    // more stuff here
} 
```

我不想要这样的代码：

```
CreatePersonRequest req = new CreatePersonRequest(){
    Name = NameTextBox.Text,
    Address = AddressTextBox.Text,
    Address2 = Address2TextBox.Text,
    City = CityTextBox.Text,
    State = StateComboBox.SelectedValue,
    ZipCode = ZipCodeTextBox.Text,
    Age = Integer.ParseInt(AgeTextBox.Text)
}
client.CreatePerson(req); 
```

我宁愿拥有：

```
client.CreatePerson((CreatePersonRequest) createPersonRequestBindingSource.Current) 
```

恕我直言，这更加简洁和可维护 - 如果将字段添加到请求中，我只需更新 UI 上的小部件，并且代码本身不必更改。

有没有办法让 UI 数据绑定中的数据源识别请求？

.Net 4.0 在客户端和服务器上。

（所有代码都是手写的，所以请不要指望它能够运行:)）

编辑：要清楚，请求对象显示在合同中；我可以在后面的代码中制作一个并手动填充它。只是寻找提高生产力的数据绑定功能来工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:17:46.880

好吧，我想我想通了。如果添加新数据源并选择对象，对象仍会出现。它们位于服务的命名空间中。

让“服务”选项为我提供所需的一切仍然会很好，但是很遗憾 - 如果编程很容易，那么每个人都会这样做。

# entity-framework - 将通用存储库“绑定”到接口

> ID：12862101
> 
> 赞同：0
> 
> 时间：2012-10-12T15:13:16.190
> 
> 标签：entity-framework

我目前正在关注以下教程

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net- mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

本教程讨论如何实现通用存储库和工作单元。

但是，它似乎没有解释如何将通用存储库“绑定”到接口。

谁能解释如何做到这一点？我需要将我的通用存储库“绑定”到通用接口或派生/自定义接口。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:39:04.130

您只需要定义通用接口：

```
public interface IGenericRepository<TEntity> 
    where TEntity : class
{
} 
```

并让你的班级实现它：

```
public class GenericRepository<TEntity> : IGenericRepository<TEntity> 
    where TEntity : class
{
} 
```

# cakephp - CakePHP - 存储外键

> ID：12862104
> 
> 赞同：0
> 
> 时间：2012-10-12T15:13:42.307
> 
> 标签：cakephp

我有三个模型：

1.  用户
2.  笔记
3.  评论

一个用户可以有多个注释（我的注释是指像 Facebook 这样的状态），一个注释可以有多个评论。

在评论表中，我想存储实际上是外键的 user_id 和 note_id。

评论控制器：

```
public function userscomment()
{
    if (!empty($this->data))
    {
        $commentdata = $this->data;
        $commentdata['Comment']['user_id'] = $this->Auth->user('id');
        $this->Comment->save($commentdata);
    } 
```

现在用户 id 很容易识别，它存储在数据库中，但是我如何识别评论是针对这个注释的呢？

如何存储发表评论的便笺的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:09:13.267

在您的视图中，您可以在其中输入评论的表单，您可以指定一个表单操作，将注释 ID 发送到您的控制器，如下所示：

**应用程序/查看/评论/userscomment.ctp**

```
echo $this->Form->create('Comment', array(
    'url' => array('385')  // 385 is the note_id
));
echo $this->Form->textarea('comment');

echo $this->Form->end('Submit Comment'); 
```

**应用程序/控制器/客户控制器.php**

```
public function userscomment($note_id) {

    if (!empty($this->data)) {

        $commentdata = $this->data;
        $commentdata['Comment']['user_id'] = $this->Auth->user('id');
        $commentdata['Comment']['note_id'] = $note_id;
        $this->Comment->save($commentdata);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:06:21.933

控制器：

公共功能注释视图（）{

```
 $allnotes = $this->User->Note->find('all', array('order'=>'Note.created DESC'));

    if (!empty($this->params['requested'])) 
      {            
        return $allnotes;        
      } 
  } 
```

看法：

```
<?php 
echo $this->Html->css('notes'); 
echo $this->Html->script(array('jquery','jquery.elastic','notes'));
?>
<div class="notescontainer">
<div class="share">Share:</div>
<div class="notes">Notes</div>
<div class="loading"></div>
<div class="img_top"></div>
<div class="text_status">

<?php 
echo $this->form->create('Note', array('action' => 'notes', 'onSubmit' => 'return loadingicon();'));
echo $this->form->input('notes',array('class'=>'notesbar','label'=>'','placeholder'=>'Write down you notes ...' ));
?>
 </div>
<div class="button_outside_border" id="share">
<div class="button_inside_border">

<?php 
echo $this->form->submit('Share',array('class' => 'sharebutton'));
echo $this->form->end();
?>
</div>
</div>
<div class="clear"></div>
</div>

<?php 

$allnotes = $this->requestAction(array('controller'=>'Users', 'action'=>'notesview'));
foreach($allnotes as $viewnotes):
{
    echo "<div class='load_status'>"; 

    echo "<img class='status_img' src="; echo $viewnotes['User']['image']; echo ">"; 

    echo "<div class='status_text'>" ?>

    <a href="users/profileview/<?php echo $viewnotes['User']['id']?>" class='blue'> 
    <?php
    echo $viewnotes['User']['name'];
    echo "</a>";

    echo "<p class='text'>"; 
    echo $viewnotes['Note']['notes']; 
    echo "</p>"; 

    echo " 
    <a href='#' class='light_blue'>Like</a> &middot; 
    <a href='#' class='light_blue'>Comment</a> &middot ";
    echo "<u class='date'>"; echo $viewnotes['Note']['created']; echo"</u>";

    echo $this->element('comments');

    echo "</div>";

    echo "<div class='clear'></div>";
    echo "</div>";

}
endforeach;
 ?> 
```

# symfony - Symfony2 依赖 Bundle 配置设计

> ID：12862108
> 
> 赞同：0
> 
> 时间：2012-10-12T15:14:04.977
> 
> 标签：symfony, bundle

下面的问题不是 SonataAdminBundle 特有的，所有第三方 Bundle 仍然存在相同的设计问题，但我举了一个具体的例子来说明清楚。

我正在为一个新的 Symfony2 应用程序安装 SonataAdminBundle，它将广泛使用 Bundle（某种后端项目）。

我阅读了 Sonata 文档（以及许多其他捆绑文档），我应该将有关路由/配置/服务等的信息放在应用程序级别，即：app/config/XXX

但是，我认为这不是我项目中的正确方法。事实上，我的“BackendBundle”将非常依赖于 SonataAdminBundle，没有它就无法工作。

将所有这些配置文件直接放在我自己的“BackendBundle”的 Ressource 文件夹中，而不是放在应用程序中，不是更合乎逻辑吗？在我看来，处理 Sonata 配置导入是我的 bundle 的角色，而不是应用程序的角色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:39:17.713

你也可以将路由配置放在一个包中，只要你从主 routing.yml 文件中导入它。

捆绑文档使用简单的示例，以快速进行设置。这就是为什么您会经常看到这种导入路由资源的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:57:21.023

您应该在捆绑包中连接服务依赖项，但是项目的实际配置属于应用程序。

你的包依赖于另一个包是完全可以接受的，但是你添加到它的配置应该与这个依赖相关，而不是配置本身。实际配置属于您的应用程序，将项目配置添加到您的包中使其实际上不可重用。

# algorithm - 反向链接算法如何在一阶逻辑中工作？

> ID：12862109
> 
> 赞同：4
> 
> 时间：2012-10-12T15:14:07.330
> 
> 标签：algorithm, logic

![在此处输入图像描述](../Images/509f66c91b532c617674323357922993.png)

我可以得到`for each`循环的解释吗，因为它对我来说没有多大意义。特别是 STANDARDIZE-APART() 和倒数第二行是做什么的？

这是`FOL_BC_ASK(KB,[p1...,pn|REST(goals)],COMPOSE(@',@)) U ans`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T16:46:16.300

r 是知识库中的一个 FOL 语句。

除其他外，FOL 句子可能包含量词和变量。

对于任何 FOL 句子，都有它的简化形式，有多种形式，如 CNF（连接范式）（喇叭从句类似），该算法对其进行操作。CNF 风格的简化仅限于特定的、有限的一组运算符，并且通常会导致与原始语句相比扩展语句（有时要长得多）。CNF 不使用量词，但允许使用变量。

量词是运算符“for-all”（通用）和“there-exists”（存在）。每个量词采用一个变量（或变量列表）和一个（子）语句，在该语句上（在列表中）引入的变量被量化。据说这些变量是有约束的，*尽管仅适用于一个子语句的**范围***（在量化表达式中）。 *因此，量词隐含地引入了一个新的范围（对于它的变量）*。

CNF 不允许显式表达量词，也不为变量提供多个或单独的范围！因此，不仅必须消除量词，而且还必须消除变量的范围（或折叠到单个范围）。（范围很容易消除，因此首先完成。）

当单个语句包含多个量词时，在 FOL 中完全可以接受在具有不相交范围的量词中重用相同的变量名称。因此，以下单个（尽管是复合）语句在 FOL 中是可接受的：

```
(there-exists(x) (Father(x,Joe))) AND (there-exists(x) (Mother(x,Joe))) 
```

它说有一些 x 是 Joe 的父亲，还有一些 x（不同的 x）是 Joe 的母亲。

在上面的语句中，变量 x 被引入了两次，尽管它的两种不同用途实际上是无关的！然而，因为 x 被使用了两次，当我们阅读和解释或操作和转换这个语句时，我们必须保持对两个独立范围的了解（否则我们的转换有时会失败）。这对于任何 FOL 语句都是如此，这意味着我们需要了解范围界定，以便解释和操作一般 FOL 语句。

以下语句从逻辑角度看是等价的，但没有使用 x 两次：

```
(there-exists(x) (Father(x,Joe))) AND (there-exists(y) (Mother(y,Joe))) 
```

如果我们保证我们的（转换后的）语句没有重叠的变量（即在不相交的范围内没有两次使用相同的变量名），我们就不再需要考虑由两种量化使用引入的两个单独的范围。我们可以有效地认为此类语句的变量只有一个范围。这是 STANDARDIZE-APART 的分离性的本质，通过确保跨范围的变量不重叠（通过给它们每个唯一的名称），我们不再需要在单个语句中分别考虑多个范围（可能有多个量词）。

（如果您将两个过程或方法或语句块合并为一个，您将在 Java 中做同样的事情：您需要确保所选变量名称在它们之间是唯一的，这样它们就不会发生冲突。）

STANDARIZE-APART 正在转换为 CNF，这需要将多个范围合并为一个范围，并消除量词（以及将某些运算符替换为“和”、“或”和“不是”）。

存在量词被淘汰以支持skolem函数，如下所示：在二阶（和更高）阶逻辑中，我们可以量化函数（例如存在（f）使得f（）......），但是，在一阶逻辑中，我们无法量化函数。然而，尽管我们无法量化 FOL 中的函数，但我们仍然可以使用函数。*在 FOL 中，函数被简单地假设为存在*. （CNF 和 horn-clause 形式也尊重假定的函数存在。）Skolemization 是存在量化的替代，其中存在量化的变量（无论它出现在子语句中的何处）被一个新构成的适当参数化的函数替换（为每个这样的存在量词替换组成一个新函数，并且提供的参数与其他封闭量词的上下文有关）。简单地假设这个新引入的函数存在而不需要存在量词。消除了存在量化变量的使用（支持新函数），我们现在可以省略存在量化运算符本身，只保留修改后的 sub 语句。

全称量词被提升到语句的最外层（范围）并且可以简单地被消除（1）因为范围已经折叠，并且（2）因为不再有任何存在量词（因为那些已经被 skolemization 消除了）和(3) 因为在各种 CNF/喇叭形式中，所有变量都被简单地假设为具有普遍量化。

* * *

统一是一种组合技术，如果我们将关于同一关系 R 的两条（否则分开的）信息组合在一起，我们会考虑我们所知道的信息。这些信息采用关系的变量和常量参数的形式。与标准化不同，统一并不总能成功，也就是说，它并不总是能揭示更多信息。

* * *

最后一行是对下一级反向链接搜索的反向链接的递归调用，其中已解决的一个目标（例如，CNF 语句）被结果子目标替换。解决我的意思是统一成功，统一成功意味着我们至少在名义上提升了搜索引擎的状态，这种进步值得进一步的搜索探索（另一个层次）。

# android - 使节拍器精确到 android

> ID：12862111
> 
> 赞同：3
> 
> 时间：2012-10-12T15:14:11.747
> 
> 标签：android, timer

我正在为安卓制作节拍器。当它只是捕捉时间时，我能够以 1-5 毫秒的精度运行 play_tick() 函数，但是一旦我想另外播放声音，系统就会变得不准确（最差的十倍）。您对我如何改善这一点有任何线索吗？有时，系统也会完全随机跳过播放刻度。有什么办法可以提高任务的优先级，或者调度程序会优先考虑后台运行的android任务吗？我已经搜索了一段时间，但找不到任何线索。

所有帮助将不胜感激！

我已经稍微更新了代码：

```
public void soundMetronome(){
    MediaPlayer mp = MediaPlayer.create(getApplicationContext(), R.raw.click);
    metronome = new TimerTask() {
            public void run() {
                    handler.post(new Runnable() {
                            public void run() {
                                if(counter<SAMPLE_LENGTH){
                                            store_time[counter] = System.currentTimeMillis();
                                    mp.start(); 
                                    counter++;
                                    Log.d("TIMER", "Timer set off");
                                }
                                else{
                                    stopScan();
                                                                        }
                            }
                   });
            }};

            t.scheduleAtFixedRate(metronome, 0, SAMPLE_INTERVAL_MS); 

        } 
```

但是，对于 500 毫秒左右的间隔，它仍然非常不准确。对于大约 1000 毫秒的间隔，它非常稳定。问题不在于计时器任务本身，而是在我读取 currentTimeMillis() 和来自 MediaPlayer 的 PLAYBACK_COMPLETE 消息的时间之间，一些原生 android 进程似乎中断了。

有没有办法可以在 mp.start() 之后调用 mp.prepare() 以便媒体播放器准备好在调用计时器函数时立即运行？

我正在使用 Galaxy S3 和 Android 4.1

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:37:13.353

缺乏精度是由垃圾收集引起的。尝试摆脱在每个刻度上创建新对象。在您的代码`MediaPlayer`中，每次都创建新的 on `play_tick`，它应该只被初始化一次（顺便说一句，您缺少`MediaPlayer.release`调用）。

您也可以只使用[Handler.postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed)而不是`TimerTask`and `Handler.post`。

# python - 如何调用python子目录中包含的selenium webdriver测试

> ID：12862114
> 
> 赞同：3
> 
> 时间：2012-10-12T15:14:22.307
> 
> 标签：python, selenium, webdriver, selenium-webdriver

我是Python的新手，所以请耐心等待我的无知。说，我有以下结构：

```
parentDir\
    runTests.py
    commonpageelements.py 
    testcases\
        __init__.py
        test1.py
        test2.py 
```

我想初始化webdriver并打开runTests.py中的页面，然后将参数传递给test1.py、test2.py等。对于这个例子，我有一个test1.py的登录测试。我还想要一个包含常见页面元素的 pageelements.py 文件。我将在下面详细介绍 python 文件。

对于 commonpageelements.py，我只定义了各种元素，例如 username="inspected_name"。

我为 runTests.py 尝试了以下内容：

```
from selenium import webdriver
from testcases import *
import common_page_elements
import sys, unittest, re, time, os.path, logging

class RunTests(unittest.TestCase):

    def setUp(self):

        self.driver = webdriver.Firefox()

        self.driver.implicitly_wait(30)
        self.driver.get("http://url_for_page")  

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)

    def test_loginLogout(username, password):
        test_login_logout("myusername", "mypassword")

    if __name__ == "__main__":
        unittest.main() 
```

然后，在 test1.py 我有：

```
class test1(username, password):

    def test_login_logout():
        driver = self.driver
        driver.get(self.base_url)
        driver.find_element_by_id(pageelements.textfield_username).clear()
        driver.find_element_by_id(pageelements.textfield_username).send_keys(username)
        driver.find_element_by_id(pageelements.textfield_password).clear()
        driver.find_element_by_id(pageelements.textfield_password).send_keys(password)
        driver.find_element_by_name(pageelements.button_submit).click()
        driver.find_element_by_id(pageelements.link_logout).click() 
```

我真的不确定如何实现这一目标。我在这里有点盲目，尝试调整但无处可去。任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:34:16.920

其他人将能够比我增加更多的价值，但我注意到了几件事：

*   `if __name__ == '__main__'`需要在最外层范围内（否则它将留在类内并且不会被执行）。
*   当您导入时`common_page_elements`，您不会在`run_tests.py`. 如果那是您定义类似 的地方`username`，则需要`common_page_elements`在其前面显式引用。
*   在您的`test_loginLogout`函数中，您将两个参数传递给它。我不是专家，但我从未见过将变量以外的变量`self`传递给测试用例的情况。因此，即使您重组了代码以`test_login_logout`从正确调用函数`test1.py`，您也不会传递`self`（它将保存 的内容`setUp`。因此这不起作用。
*   如果您要从不同的模块运行测试，我*相信*每个模块都必须对其测试用例保持封闭，这意味着它们应该能够独立运行。在您的情况下，`test1.py`似乎没有任何必要的信息来使用您需要的设置运行您想要的报告。
*   考虑到以上几点，您可能想要使用该`unittest.TestLoader().loadTestsFromModule()`功能，它可以让您加载其他测试模块并执行它们。

这是完全未经测试的（可怕的双关语，我知道）代码，但这样的事情可能适用于您的情况：

```
import logging, os.path, re, sys, time, unittest
from testcases import test1, test2

def main():
    # Create a loader object
    test_loader = unittest.TestLoader()

    # Add your tests
    suite = test_loader.loadTestsFromModule(test1)
    suite.addTests(test_loader.loadTestsFromModule(test2))

    # Run the tests
    unittest.TextTestRunner(verbosity=2).run(suite)

if __name__ == '__main__':
   unittest.main() 
```

至于`setUp`和`tearDown`部分，我会把它们放在你的测试模块中，所以你`Test1Test`可以看起来像这样：

```
# test1.py

import common_page_elements as page_elements

from selenium import webdriver

class Test1Test(unittest.TestCase):

    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.driver.get("http://url_for_page")  

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)

    def testLoginLogout(self):
        # Likely not necessary to redefine `driver` here - just use `self.driver`
        driver = self.driver
        # Not sure how this relates to the `get` in `setUp`
        driver.get(self.base_url)
        driver.find_element_by_id(page_elements.textfield_username).clear()
        driver.find_element_by_id(page_elements.textfield_username).send_keys(username)
        driver.find_element_by_id(page_elements.textfield_password).clear()
        driver.find_element_by_id(page_elements.textfield_password).send_keys(password)
        driver.find_element_by_name(page_elements.button_submit).click()
        driver.find_element_by_id(pageelements.link_logout).click() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T20:34:50.233

我通过重写 runTests.py 来解决这个问题，如下所示：

```
from selenium import webdriver
from testcases import login
import common_page_elements
import sys, unittest, re, time, os.path, logging

class runTests(unittest.TestCase):

    def setUp(self):
        self.driver = webdriver.Firefox()        
        self.driver.implicitly_wait(30)
        self.base_url = "http://url_for_page"
        self.driver.get(self.base_url)

    def testLogin(self):
        test1.test_login(self, "myusername", "mypassword") 

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)

if __name__ == "__main__":
    unittest.main()

and test1.py as:

    import common_page_elements

    def test_login(self, username, password):
        driver = self.driver
        driver.get(self.base_url)
        driver.find_element_by_id(common_page_elements.textfield_username).clear()
        driver.find_element_by_id(common_page_elements.textfield_username).send_keys(username)
        driver.find_element_by_id(common_page_elements.textfield_password).clear()
        driver.find_element_by_id(common_page_elements.textfield_password).send_keys(password)
        driver.find_element_by_name(common_page_elements.button_submit).click() 
```

# c# - 当 ColumnDefinitions 的宽度是动态的时，WPF 会创建不需要的边距？

> ID：12862118
> 
> 赞同：1
> 
> 时间：2012-10-12T15:14:32.103
> 
> 标签：c#, .net, wpf, grid-layout

这是一个 WPF 窗口，其中包含一个`UserControl`. 这`UserControl`是一个简单`Grid`的 2 列，没有明确的宽度。在第一列中，我添加了一个简单`TextBox`的水平拉伸集合。第二列是空的。

当我缩小窗口的宽度时，WPF 会裁剪我的窗口，`UserControl`即使它的右侧仍有巨大的空白空间！看起来它试图让我的第二列与我的第一列大小相同，即使它是空的，但奇怪的是，这发生在我的 UserControl 之外（否则空白区域将是粉红色的！）...

**主窗口.XAML**：

```
<Window x:Class="WPF_Grid_Test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WPF_Grid_Test"
    Title="MainWindow" Height="350" Width="525">
    <local:TestUserControl HorizontalAlignment="Left"/>
</Window> 
```

**用户控件.XAML**：

```
<UserControl x:Class="WPF_Grid_Test.TestUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         Background="Pink" Height="100">
    <Grid Margin="0" ShowGridLines="True">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <TextBox Text="Why is WPF cropping me even though there's a huge blank space to eat into?" VerticalAlignment="Center" />
    </Grid>
</UserControl> 
```

我尝试将所有`Margins`和设置`Paddings`为0，没有变化。

当`UserControl`设置为水平居中（而不是左侧）时，*行为更加奇怪！*不是在右侧创建一个巨大的边距，而是实际上均匀地分布在左侧和右侧。我希望我的动态调整大小`UserControl`只有在 WPF 用完所有可用空间后才会发生。这不是任何程序员所期望的吗？

*（我的真实项目实际上有 3 列，分别包含一个 TextBlock、一个 TextBox 和一个 Button，但行为是相同的：UIElements 将在 WPF 吃进它自己的自动生成的边距之前被裁剪）*

当我在列（即或“自动”）上设置明确的宽度时，WPF 将在裁剪我的 UserControl 之前正确删除其空格。但这会阻止 WPF 在窗口变得更薄时缩小 UserControl。

所以我的第一个问题是，**这不是 WPF 错误吗？**

我的第二个问题，**如何设置列，以便 WPF 仅在我的 UserControl 空间不足时才开始调整其大小*来*显示它？**

这是.NET 4.0。[这里](https://stackoverflow.com/questions/8055047/undesired-clipping-when-resizing-wpf-control-under-certain-tresshold)存在一个类似的问题，但我并不真正理解解决方案。

**更新：** 这是另一个示例代码`UserControl`。当按照建议将列宽设置为“自动”时，`UserControl`将在窗口缩小时停止缩小其元素，并且一旦空间确实不足，最终将裁剪最右边的元素：

```
<UserControl x:Class="WPF_Grid_Test.TestUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         Background="Pink" Height="100">

    <Grid Margin="0" ShowGridLines="True">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <TextBox Text="Resize us" VerticalAlignment="Center" Grid.Column="0" />
        <TextBox Text="only when" VerticalAlignment="Center" Grid.Column="1" />
        <TextBox Text="you're out of space!" VerticalAlignment="Center" Grid.Column="2" />
    </Grid>
</UserControl> 
```

我试图实现的行为是在我缩小窗口时`UserControl`保留它。`DesiredSize`但*只有当窗口超出空白区域*时，才应`UserControl`接受“缩小”处理。

尝试从 ColumnDefinitions 中删除，您应该会看到在容器缺少空间*之前*`Width=Auto`最右边的元素是如何调整大小的。这就是为什么我认为这确实是一个 WPF 布局错误。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:23:46.067

您应该明确指定列的宽度。

例如，如果您希望两列的大小始终相同，请使用`Width="*"`.
如果您希望两列都尽可能宽，请使用`Width="Auto"`. 这将导致不同大小的列。
如果您希望一列尽可能宽，另一列使用剩余空间，`Width="Auto"`请在第一列和`Width="*"`第二列上使用。*

# image - HTML：显示具有特定文件扩展名的文件夹的所有内容？主要是图片。

> ID：12862123
> 
> 赞同：1
> 
> 时间：2012-10-12T15:14:50.963
> 
> 标签：image

好吧...所以我是一名业余网页设计师，正在寻找更简洁的方式来显示新图像或内容。我目前的目标之一是找到一种将文件夹中的图像显示为画廊类型情况的方法。这样我所要做的就是将图像上传到文件夹中，点击刷新，就可以了。我不想每次上传时都必须使用编码来放入新图像。

有谁知道“从头开始”执行此操作的方法可以这么说吗？（语言等）如果可能的话，我想避免使用 Joomla、Wordpress 等提供的预制语言。

提前致谢。

# php - 对象迭代 PHP

> ID：12862127
> 
> 赞同：1
> 
> 时间：2012-10-12T15:15:08.117
> 
> 标签：php, arrays, object, iteration

我有一个关于 PHP 的一般功能的问题，我无法得到一个好的、干净、简单的答案。

假设我有一堂课，学生。我创建了一个名为 Students 的数组，其中包含学生班级的实例。我将如何遍历该数组并从每个学生类实例中提取 StudentID？感谢您的支持！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:18:08.383

如果我理解正确，您有这样的课程：

```
class Student {
    public $StudentId = 0;
    public function __construct($id) {
        $this->StudentId = $id;
    }
} 
```

还有一个像这样的数组：

```
$students = array(
    new Student(1),
    new Student(2),
    ....
); 
```

要获取每个的 StudentId，只需像任何其他普通数组迭代一样遍历数组：

```
foreach ($students as $student) {
    $id = $student->StudentId;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:17:00.957

```
foreach ($studentArray as $student)
{
    $studentId = $student->StudentId;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:17:17.323

作为`students`数组，您可以*遍历* 该数组以访问数组中的每个对象：

```
foreach($students as $student) {
  echo $student->StudentID;
} 
```

# javascript - 如何使用 ClientScript 从代码隐藏中调用 javascript 函数

> ID：12862131
> 
> 赞同：0
> 
> 时间：2012-10-12T15:15:15.007
> 
> 标签：javascript, jquery, asp.net, code-behind

> **可能重复：**
> [如何从代码隐藏调用 javascript 函数](https://stackoverflow.com/questions/4848678/how-to-call-javascript-function-from-code-behind)

我有一个空的 div，如果布尔值后面的代码为真，我想添加复选框。

这是div：

```
<div id="checkboxes" /> 
```

这是我的javascript函数：

```
 <script type="text/javascript">
        function addCheckboxes() {
            alert("just an alert for now");
        } 
```

这是我要调用“addCheckboxes”函数的代码：

```
bool isMovingTask = Convert.ToBoolean(Request.QueryString["isMovingTask"].ToString());
        if (isMovingTask)
        {
            //call javascript function
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:18:22.860

在此处查看相关答案：[如何从代码隐藏中调用 javascript 函数](https://stackoverflow.com/questions/4848678/how-to-call-javascript-function-from-code-behind)

基本上你想要调用来注册你的客户端脚本，在.NET中有几种方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:31:38.523

当服务器执行代码并完成并将生成的 html/脚本响应发送到浏览器时，将调用 javascript。您可以在 javascript 中访问代码的公共属性并使用它。

在后面的代码中创建一个公共属性并在后面的代码中为其赋值

**代码背后**

```
public  bool isChecked = true; 
```

**html**

```
 function addCheckboxes() {

       if('<%= isChecked %>' == 'True')
       {
          //Your code here
          alert("just an alert for now");

       }
    } 
```

# ant - SeleniumException：java.awt.AWTException：无头环境：Selenium Headless

> ID：12862132
> 
> 赞同：1
> 
> 时间：2012-10-12T15:15:19.780
> 
> 标签：ant, selenium, debian, selenium-rc, headless

我正在尝试在 Headless 中运行 Selenium 测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-20T12:42:01.987

您正在尝试自动化需要来自测试环境的图形支持的功能。

在非 GUI 模式下运行时跳过此特定测试或在 GUI 模式下执行测试。

使用无头浏览器时要了解的一件事是，范围有限，不能用于执行整个项目。我们使用它们来执行冒烟测试。无头是最佳选择的一种情况：

您需要重定向到多个页面并获取每个页面的标题以验证是否符合预期条件。在这里，我会选择无头浏览器，因为它们比全头浏览器更快并且最适合此类任务。虽然如果你要求 headless 执行一个功能，比如说在 GUI 上上传文件，我怀疑它是否可以在这里工作。

# asp.net - 如何强制 DropDownList 获取源的值和文本？

> ID：12862136
> 
> 赞同：0
> 
> 时间：2012-10-12T15:15:33.250
> 
> 标签：asp.net

我已经为这个问题苦苦挣扎了几个小时。我有一个我保存在会话中的列表

```
Session["AllDev"] = taskData.DisplayAllDevelopers(); 
```

我以后用这种方式。

```
_ddlAllDev.DataSource = (ListItemCollection)Session["AllDev"];
_ddlAllDev.DataBind(); 
```

**DisplayAllDevelopers()**方法返回一个 ListItemCollection。每个 ListItem 包含作为 Value 的 Developer的**ID**和作为 Text**的 Developer 的名称。**但是当我检查项目集合时，我发现 DropDownList 的值和文本都设置为 devoloper 的名称。有没有办法强制 DropDownList 将值和文本保持为源？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:19:11.207

这个也可以试试

```
_ddlAllDev.DataValueField = "ID";
_ddlAllDev.DataTextField= "DevName";
_ddlAllDev.DataSource = (ListItemCollection)Session["AllDev"];
_ddlAllDev.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:20:23.270

你可以试试

```
YourDDL.DataValueField = "ID";
YourDDL.DataTextField= "DevName"; 
```

# xml - 限制 XML 模式中的字段

> ID：12862138
> 
> 赞同：0
> 
> 时间：2012-10-12T15:15:41.230
> 
> 标签：xml

我有一个非常复杂的架构。这是我的一个 XML 标记的外观示例

```
<STEP STEPTYPE="something" ACTOR="someAgent" TRACKNUM="0" VIDEO_ID="2" ... and so on> 
```

实际上，对于每个 STEPTYPE（音频、视频、显示、语音等），我都有一些相关的属性（例如，我只需要 STEPTYPE="VIDEO" 的 VIDEO_ID，同样，我需要 TRACKNUM 仅在使用 STEPTYPE="AUDIO 时出现")

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:20:18.357

这是有关复杂类型步骤的 XML Schema 文档。请尝试创建您的代码，如果您有问题，请发布您的代码，以便我们帮助您解决错误。

[http://www.fpml.org/spec/fpml-4-5-5-tr-1/html/schemaRef/fpml-shared-4-5.xsd.html_type_Step.html](http://www.fpml.org/spec/fpml-4-5-5-tr-1/html/schemaRef/fpml-shared-4-5.xsd.html_type_Step.html)

# java - Eclipse indigo/juno RCP 出现“安装新软件错误”

> ID：12862152
> 
> 赞同：2
> 
> 时间：2012-10-12T15:16:27.220
> 
> 标签：java, eclipse, eclipse-rcp

我尝试在 Eclipse RCP 中更新软件，但出现此错误。

![在此处输入图像描述](../Images/d11691fc75f3c15c556e287c4fbfc625.png)

错误日志显示缺少某些 feature.xml 文件。 ![在此处输入图像描述](../Images/f18553fe05b659213ba251b9d37600dd.png)

我打开了一个错误日志来找到它。 ![在此处输入图像描述](../Images/eaab4e833bfde699b785535bf87b2042.png)

而实际上， features 目录中的一些文件名不是 xml，而是 xml_。 ![在此处输入图像描述](../Images/e605731dd20a20102708a913545b4010.png)

我尝试了 juno 和 indigo eclipse RCP，但我有相同的错误消息和相同的 xml_ 文件。我在 Mac OS X 上使用 eclipse。

怎么了？如何在 Eclipse 中更新软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:26:21.440

问题出在提取下载的 tar 文件。我使用探路者解压它，但可能有问题。我用过`tar xvf`，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:26:29.733

转到帮助->检查更新（如果要更新）帮助->安装新软件（如果更新的软件可用，您可以下载它），如果问题仍然存在，请尝试安装 eclipse indigo rcp 并再次从站点安装安装它。希望它可以帮助你。

# wpf - 在屏幕之间切换 WPF

> ID：12862155
> 
> 赞同：3
> 
> 时间：2012-10-12T15:16:35.120
> 
> 标签：wpf, mvvm-light

我是使用 WPF 的新手，在使用 MVVM Light Toolkit 的 WPF 应用程序中跨多个屏幕导航时，我想看看人们推荐的最佳实践。作为 WPF 的新手，如果我的术语不正确，请原谅我，因为我不确定正确的术语是“切换视图”、“导航页面”、“更改窗口”还是其他内容（澄清这些术语与WPF 将不胜感激）。

为了澄清我想要做什么：我有一个应用程序，它有 3 个全屏页面/视图，用户应该能够来回移动。这些视图永远不会同时显示，因此它们最容易与选项卡控件中的选项卡进行比较；除了我不想要标签控件通常附带的标签条。相反，我想以编程方式在页面/视图之间切换。

在以下堆栈溢出答案中，我已经看到了几种不同的方法：

1.  [https://stackoverflow.com/a/6114865/1081879](https://stackoverflow.com/a/6114865/1081879)
2.  [如何使用 MVVM Light for WPF 在窗口中导航？](https://stackoverflow.com/questions/9290269/mvvm-light-toolkit-galasoft-for-wpf-navigation-through-windows)

所以真的我只是想知道上述哪种方法是我应该前进的方向？我实际上已经实现了第一个答案，但我不确定这样做是否是对数据模板的“滥用”/“hack”，或者这是否是应该使用框架的方式。

最后，如果其他工具包开箱即用地提供此功能，那么 MVVM Light 可能不是我可以使用的最合适的工具包。任何人都可以阐明这个概念，也许会推荐一个更合适的工具包？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:45:48.343

一个快速而肮脏的导航示例（这是在这里而不是在 VS 中编写的，因此如果拼写错误，请应用修复）：

让我们为我们的视图创建一个分层描述：

```
 public abstract Class ViewModelBase : INotifyPropertyChanged{} 
  public abstract Class ViewModelNavigationBase : ViewModelBase {} 
  public Class ViewModel1 : ViewModelNavigationBase {}
  public Class ViewModel2 : ViewModelNavigationBase {}
  public Class ViewModel3 : ViewModelNavigationBase {}

  public Class MainViewModel : ViewModelBase 
  {
      private ViewModelNavigationBase  currentViewModel; 
      public ViewModelNavigationBase  CurrentViewModel 
      {
         get{return currentViewModel;}
         set
         {
            currentViewModel = value;
            OnPropertyChanged("CurrentViewModel");                
         }
      }          

      private const int numberOfPages = 3 ;
      private int index;
      private ViewModelNavigationBase[numberOfPages] pages;
      ....
      ... OnNavigateCommand()
      {
          index++;
          index = index % numberOfPages;
          CurrentViewModel = pages[index];
      }

 } 
```

资源 ：

```
 <local:MainViewModel x:Key="MainVm" /> 

     <DataTemplate TargetType={x:Type local:ViewModel1}>
         <local:View1 />
     </DataTemplate>

     <DataTemplate TargetType={x:Type local:ViewModel2}>
         <local:View2 />
     </DataTemplate>

     <DataTemplate TargetType={x:Type local:ViewModel3}>
         <local:View3 />
     </DataTemplate> 
```

xml：

```
 <Window x:Name="MainWindow" 
         DataContext={StaticResource MainVm}>
       <StackPanel>
           <ContentControl Content={Binding CurrentViewModel} />
           <Button Content="Navigate" Command="{Binding NavigateCommand}"/>
       </StackPanel>       
 </Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:57:01.520

我在这个问题中真正寻找的是一个参考，它显示了我列出的两种方法中的一种实际上是常用的并且是一种可靠的方法。

我终于偶然发现了这个：http: [//msdn.microsoft.com/en-us/library/gg405484%28v=PandP.40%29.aspx](http://msdn.microsoft.com/en-us/library/gg405484%28v=PandP.40%29.aspx)

这为您的视图模型调用了第一种使用数据模板的方法。

# c# - 计算一组百分比的程序

> ID：12862157
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:16:37.360
> 
> 标签：c#, math

有人可以帮我一些编码。我想算出这个分组的最终百分比是多少

```
100% of 4
0% of 1
100% of 12
100% of 2 
```

所以答案将是

```
95% of 19 
```

或类似的东西。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:22:07.453

一般来说，计算“加权平均值”的公式`x% of y`是：

```
sum(x/100 * y) / sum(y) 
```

所以你的例子会产生

```
(1.0 * 4) + (0.0 * 1) + (1.0 * 12) + (1.0 * 2) / (4 + 1 + 12 + 2)

= 18 / 19 = ~94.7% 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T15:21:50.210

假设您有某种结构来保存您的百分比和属于这些百分比的项目数，以下代码将满足您的要求：

```
struct Data
{
    double Percent;
    int Count;
}

...

List<Data> items = new List<Data> ();
... // fill your list with Data instances, initialized with values

double total = 0; // running total
int totalcount = 0; // total number of items

for ( int i = 0; i < items.Count; i++ )
{
    totalcount += items[i].Count;
    total += ( items[i].Count * items[i].Percent );
}

double result = total / totalcount; 
```

# json - Groovy/Grails：使用 JSON 模拟模型数据

> ID：12862160
> 
> 赞同：0
> 
> 时间：2012-10-12T15:16:44.617
> 
> 标签：json, testing, grails, groovy, mocking

我正在处理应用程序的前端，模型数据尚不可用。我希望能够模拟我最终将使用 JSON 获得的模型。理想情况下，我可以定义一个 JSON 文件，将其读取并解析为适当的模型结构，然后正常传递给视图（以便稍后，当模型数据准备好时，替换是无缝的） .

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:30:59.957

听起来您想要做的只是手动创建一些 JSON，其形状与您期望的最终数据相同。

如果您期望大量 JSON 并且手动生成它是不切实际的，那么您可以提供一个虚拟 JSON 生成器，看看是否有任何东西可以让您创建一些您期望的相同形状的虚拟数据：

这个很酷，让我们定义一个用数据填充的结构：

[http://json-generator.appspot.com/](http://json-generator.appspot.com/)

如果您喜欢图形方法，可以尝试[http://jsoneditor.net/](http://jsoneditor.net/)，它可以让您在浏览器中构建 JSON 结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:32:31.407

也许 Grails [Fixtures 插件](http://grails.org/plugin/fixtures)会有所帮助？它确实旨在用于加载自动化测试的测试数据，但它也可以用于加载示例数据。

否则，Groovy 有一些很好的类来处理 JSON，例如[JsonSlurper](http://mrhaki.blogspot.com/2011/04/groovy-goodness-parse-json-with.html)，您可以使用它们来创建存根服务实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:48:51.000

在我的控制器中，我会执行以下操作：

```
def map = [:]
map = [name:'value1", name2:"value2"]
render map as JSON 
```

这个想法是你应该把值放在那里，让你开始在前端。如果这是一个繁重的 js 应用程序，你最好将你的 js 与任何后端隔离开来测试吗？

# html - 如何在 HTML 文件中设置内容编码

> ID：12862165
> 
> 赞同：0
> 
> 时间：2012-10-12T15:16:59.080
> 
> 标签：html, tomcat, gzip, content-encoding

我想对我的网站使用 GZIP 编码以及应该如何使用 . 我将html 文件的**内容编码**`gzip`设置为.

T试过这样

```
<html lang="en" pageEncoding="gzip"> 
```

我正在使用 Apache Tomcat Web 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:03:18.987

您将内容编码（gzip、deflate）与页面（又名字符）编码（ISO-8859-1、UTF-8 等）混淆了。

为了在 Apache Tomcat 上启用 gzip 压缩，您必须在`<Connector>`级别上进行 - 并且仅支持 HTTP 连接器。请参阅[Apache Tomcat HTTP 连接器配置参考](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)中的`compressableMimeType`、`compression`和`compressionMinSize`属性`<Connector>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:20:14.237

内容压缩由 HTTP 协议层的 Web 服务器处理。您可以在内容本身中添加一些提示，让 Web 服务器执行此类操作，但这取决于您的服务器和内容。您可以将 Web 服务器配置为压缩静态内容或动态内容，如果您使用 PHP 之类的东西，您甚至可以在 PHP 代码中进行压缩。

# clojure - Clojurescript 中的可选“回调”参数是否令人不悦？

> ID：12862168
> 
> 赞同：4
> 
> 时间：2012-10-12T15:17:16.463
> 
> 标签：clojure, clojurescript

在 Clojurescript 中编写高阶函数时，实际上可以省略传入函数的参数。

例如，以下是合法的 Clojurescript 代码，但非法的 Clojure 代码：

> （定义 x（原子 5））
> 
> （交换！x（fn [] 6））

高阶“交换！” function 需要一个带有一个参数的函数，但是您可以省略它，程序仍然可以正常编译/运行。

如果它使我的 Clojurescript 代码更清晰，使用此功能是否会被视为不好的形式？或者，它只是滥用 Clojurescript 限制吗？有什么意见吗？

谢谢你的想法！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T20:45:25.853

对我来说`(fn [_] 6)`，它看起来非常地道，而且并不比`(fn [] 6)`. 它甚至更具表现力，因为它明确指出该论点被忽略。

编写完整（正确）表单的另一个优点是代码的可移植性。

* * *

编辑：顺便说一句，您的示例可以使用不断重写：`(swap! x (constantly 6))`. `constantly`创建一个函数，该函数接受任意数量的参数并始终返回传递给`constantly`.

# ruby - Watir 找不到我在 Chrome 的 DOM 检查器中看到的元素

> ID：12862171
> 
> 赞同：6
> 
> 时间：2012-10-12T15:17:17.577
> 
> 标签：ruby, watir, watir-webdriver

这是一个研究案例：

```
<html>
...
<embed name="foo">
<embed name="bar">
...
</html> 
```

我正在尝试使用 Watir Ruby 的 API 引用名为“bar”的嵌入元素。该元素由 Chrome 的 DOM Inspector 显示，但我无法使用 Watir 的任何查找方法找到它：

```
browser.embeds() # only <embed name="foo"> is found
browser.html.include? 'bar' # => false 
```

为什么会这样？为什么 Watir 不显示完整的 HTML？如果我在不同的框架中有元素或由 Javascript 初始化函数动态插入，是否可以使用 Watir 访问它们？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:23:23.180

如果元素在框架中，则必须使用以下内容：

```
browser.frame(:id => "frameid").embed(:name => "bar") 
```

# java - Esper - 如果数据窗口中不存在基本事件，则捕获增量事件

> ID：12862173
> 
> 赞同：1
> 
> 时间：2012-10-12T15:17:29.287
> 
> 标签：java, esper, complex-event-processing

假设我有一个命名窗口：

```
CREATE WINDOW TestWindow.std:unique(FieldA) AS SELECT * FROM TestEvent; 
```

其中`TestEvent`是 RevisionEvent，`TestEventBase`和`TestEventDelta`分别在 的基础和增量事件中定义`TestEvent`。这里的关键是`FieldA`。

目前，如果窗口中存在没有基本事件的增量事件，Esper 似乎会默默地丢弃此增量事件。因此，例如，如果 delta 事件出现在基本事件之前，则窗口中行的状态将看起来只是基本事件，因为 delta 被丢弃。

我的问题是，如果增量事件未能进入窗口，是否有办法捕捉它，例如，在发生这种情况时进行特殊处理？

如果我的应用程序要求我不丢失消息，并且 Esper 默默地丢弃了一些消息而不是其他消息，那么我如何 100% 确定某个事件进入了窗口？

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:39:18.533

您可以使用单独的语句来检测没有基本事件的增量事件，即“select * from TestDelta as td where not exists (select * from TestEvent.first:unique(id) where te.id = td.id)”

增量事件设计用于基本事件总是先到达并且增量覆盖基本事件的用例。如果不是这种情况，则可能使用命名窗口并合并，或者类似于上面的子查询进行合并。

# excel - 如何将文本数组复制到 Excel 中的一系列单元格中

> ID：12862178
> 
> 赞同：0
> 
> 时间：2012-10-12T15:17:48.467
> 
> 标签：excel, excel-2010, vba

我正在动态创建一个报告，我在其中创建一个工作表，重新引入记录。如何轻松键入字段名称并将它们复制到单元格中。如果每行不做一个单元格，则大约有 20 列。

我试过了：

```
dim fieldNames as variant
fieldNames = ("'DS Date', 'A', 'B', 'A','S ASD', 'S','D S','D S', 'S','D S', 'SD', 'S','D'")
Sheets("DATA").Range("C14:W14").Value = Application.WorksheetFunction.Transpose(fieldNames) 
```

但它只是在每个单元格中发布整个内容？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:24:09.770

由于您正在对数组进行硬编码，因此请尝试类似这样的操作：

```
Dim fieldNames As Variant
fieldNames = Array("DS Date", "A", "B", "A", "S ASD", "S", "D S", "D S", "S", "D S", "SD", "S", "D")
Sheets("DATA").Range("C14:W14").Value = fieldNames 
```

这是[关于使用 Array() 的参考，](http://msdn.microsoft.com/en-us/library/aa262675%28v=vs.60%29.aspx)它适用于 VB6，但它仍然是正确的。

编辑：我做了一些修改，您也可以通过将最后一行更改为：

```
Sheets("DATA").Range("C14:W14").FormulaArray = Application.WorksheetFunction.Transpose(Application.WorksheetFunction.Transpose(Split(fieldNames, ","))) 
```

此方法将水平阵列转置为垂直然后再转回，但像您一样使用转置。:-D 当然这种方法并没有真正做到，因为考虑到我们可以`Split(fieldNames, ",")`直接放下。像这样：`Sheets("Data").Range("C14:W14").value = Split(fieldNames, ",")`不知道为什么我先给你一个复杂的例子。

# java - 如何生成数字以确定加权比赛获胜者

> ID：12862187
> 
> 赞同：0
> 
> 时间：2012-10-12T15:18:24.373
> 
> 标签：java, jakarta-ee, random

我需要找到一种挑选获胜者的方法，就像一场比赛。每个赛车手都有获胜机会的权重。

例如

```
A - 25% chance to win
B - 10% chance to win
C - 25% chance to win
D - 10% chance
E - 10% chance
F - 20% chance 
```

1）我需要随机选择获胜者，但需要考虑权重。

2）我还需要选择第二个最有可能的获胜者和第三个......

我可以通过生成 1-100 之间的随机获胜者来选择第一个，并且基本上根据以下机会在赛车手之间分配 100 名：

```
A = 1-25
B = 26 -35
C = 36-60.
etc
etc 
```

不知道上面的稳定性如何，但好像还可以。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:23:30.717

```
public class RaceWinners{
    public static void main(String[] args) {
        int[] percentages = {25,10,25,10,10,20};
        System.out.print(pickWinner(percentages));
    }

    //Returns the index of the winner(A = 0, B = 1, ...)
    private static int pickWinner(int[] percentages) {
        int randomNumber = (int)(Math.random() * 100);
        int countdown = randomNumber;
        for(int i = 0; i < percentages.length; i++) {
            countdown -= percentages[i];
            if(countdown < 0) {
                return i;
            }
        }
        return -1;
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:28:57.583

要确定第一等级，您可以按照您的描述进行。但是对于第二个，第三个，......位置有点不同（如果 A 是第一个，那么 B 有可能是第二个 p(B|A) := "the second is B given that first is A"，然后B 没有 10% 的第二名，而是其他成员的第二名，依此类推）。看看条件概率（wiki：[http](http://en.wikipedia.org/wiki/Conditional_probability) ://en.wikipedia.org/wiki/Conditional_probability ）

这是完成这项工作的“伪代码”

```
Ranking:
begin probability
a = 20%
b = 10%
...

calculate first
recalculate probability given that first is X (e.g. if first is A p(B|A), p(C|A),...)
calculate second (with the new probability, e.g. b = p(B|A), c = p(C|A),..)
recalculate probability given that first is X and second is Y
calculate third
etc.. 
```

注意：java random (Math.random) 生成 0 到 0.999999 之间的值...（例如 [0, 1[ 包括 0 但不包括 1）

# java - 在 JLabel 上显示加密图像

> ID：12862188
> 
> 赞同：1
> 
> 时间：2012-10-12T15:18:27.577
> 
> 标签：java, linux, image, swing, jlabel

我的应用程序加密了一些图像；它还应该显示它们（作为列表`JTable`）。
显示加密图像`JLabel`以保护它们不被用户从文件系统复制的最佳方法是什么？

*   在目录中解密它们`/tmp/`并在显示后删除每个`JLabel`？
*   将它们保存在内存中并`Image`从内存中的字节生成对象？还要别的吗？

应用程序将在 linux 上运行。

编辑：显示的图像只是一个缩略图，所以截屏不是问题；我的问题是当我解密文件以创建缩略图时，用户不应该复制它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:29:38.110

我认为最简单的方法是直接在字节缓冲区“byte []”中解密文件，然后在 imageicon 中使用该数据：[imageicon constructor with byte buffer](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/ImageIcon.html#ImageIcon%28byte%5b%5d%29)

在临时文件中解密将允许用户找到那些已解密的临时文件，我想这不是你想要的

# cocos2d-iphone - Admob 和 ios6 问题

> ID：12862189
> 
> 赞同：1
> 
> 时间：2012-10-12T15:18:42.323
> 
> 标签：cocos2d-iphone, ios6, admob, iad

我正在将我的 cocos2d 应用程序更新到 ios6，但我遇到了广告问题，我决定不再坚持使用 iad 风景和广告。但是admob对我不起作用，我所做的就是在AdMob横向放置一个广告，当我点击广告并返回应用程序时，应用程序被打开，但不是设备，而是应用程序的优点，所以你不能玩，请帮忙谢谢

# javascript - 附加到 document.body 的单击事件侦听器在 iOS6 中不触发？

> ID：12862192
> 
> 赞同：5
> 
> 时间：2012-10-12T15:18:56.083
> 
> 标签：javascript, event-handling, ios6, delegation

在 iOS6 中遇到奇怪的行为和不起作用的事件委托，其根源是如果我只是将事件处理程序附加到 document.body，如下所示：

```
document.body.addEventListener("click", function(){alert("ios6 sucks")}, false); 
```

这不会运行，例如，如果我去 google.com 并通过 safari 远程 webinspector 添加它。在某些情况下，它会运行，包括如果我单击页面上的链接，或者单击直接附加了事件处理程序的元素。在主流浏览器以及 iOS 5 和 4 上也可以正常工作。将 touchend 添加到 body 将按原样触发，并且可能是一种潜在的解决方法，但最好让浏览器检测点击，而不是必须在 touchstart 中编写一些点击检测/触摸结束。我想知道这是否是iOS6错误。但我还没有看到其他人抱怨这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:27:09.383

@Bonkers ...引用为什么将click事件附加到div后触发body click完全是由于事件冒泡。

我在这里复制了您的代码，表明它在 div 上被调用了两次，但在正文上只调用了一次：

```
<div id="myDiv">FlackAttack Test</div>

<script>
document.body.addEventListener("click", function(){alert("ios6 sucks")}, false);
document.getElementById('myDiv').addEventListener('click', function(){alert("ios6 sucks twice")},      false);
</script> 
```

如果你想阻止事件冒泡，你可以调用 e.stopPropagation(); 或 e.cancelBubble = true;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-21T13:45:53.343

面临同样的问题。以下帮助（省略.body）：

```
document.addEventListener("click", function(){alert("ios6 sucks")}, false); 
```

# facebook - Facebook fetcher C# 控制台应用程序

> ID：12862195
> 
> 赞同：1
> 
> 时间：2012-10-12T15:18:58.450
> 
> 标签：facebook, facebook-c#-sdk

我是 facebook sdk 的新手，所以问了非常基本的问题。我需要在 C# 控制台应用程序中从 Facebook 获取用户信息。我在 Facebook.com/developer 中创建了一个应用程序，并将其类型设置为“Native/Desktop”，并拥有其 AppID 和密钥。我还下载了 Facebook C# SDK 5.4.1。

现在我不确定如何继续，我尝试使用以下代码获取我的所有提要。

```
FacebookClient client = new FacebookClient("AppID", "Secret Key");
var result = client.Get("me/feed"); 
```

但是获取异常“ **（OAuthException）必须使用一个活动的访问令牌来查询有关当前用户的信息**。”

经过一番研究，我发现我必须获取访问令牌，所以我使用以下代码来获取访问令牌

```
string url = "https://graph.facebook.com/oauth/access_token?client_id=APPID&client_secret=SECRETKEY&grant_type=client_credentials";
        WebRequest request = WebRequest.Create(url);
        WebResponse response = request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string token = reader.ReadToEnd(); 
```

所以我得到这样的响应（在令牌中）“access_token=322232329253232323|323233riZZZZZZZ_3p1BdHf3232332323k”所以现在我尝试这样

```
FacebookClient client = new FacebookClient(token.Replace("access_token=", ""));
        var feeds = client.Get("me/feed"); 
```

但是仍然得到异常“ **（OAuthException）必须使用活动访问令牌来查询有关当前用户的信息。**

谁能指导我，如何继续并获取信息。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:42:07.180

如果这只是一个 C# 控制台应用程序，访问 Facebook 的最简单方法可能是通过 PowerShell 和[http://facebookpsmodule.codeplex.com](http://facebookpsmodule.codeplex.com)。这将使您了解 Facebook API 的细节。

# c - “typedef void (*__handler)(int)”是什么意思？

> ID：12862197
> 
> 赞同：1
> 
> 时间：2012-10-12T15:19:03.607
> 
> 标签：c

> **可能重复：**
> [Typedef 函数指针？](https://stackoverflow.com/questions/4295432/typedef-function-pointer)

你能帮我理解这个typedef的含义以及如何使用它吗？

```
typedef void (*__handler)(int) 
```

没有“typedef”，我知道剩下的是一个函数指针。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:20:56.137

这定义了函数指针的类型名称。使用它，`__handler`现在是指向接受`int`并返回的函数的指针的类型别名`void`。

```
void myFunction(int)
{
    // ...
}

int main(int argc, char **argv)
{
    __handler functionPtr = &myFunction;

    // ...
} 
```

# php - 从 id 属性中检索值

> ID：12862199
> 
> 赞同：0
> 
> 时间：2012-10-12T15:19:05.033
> 
> 标签：php, arrays, forms, input

我想列出数据库中的成员，每个成员旁边有两个按钮（删除成员和更改信息）。以下是目前为止的代码，但问题是我不知道如何从输入按钮（放置在 id 属性中）检索成员 id。怎么可能做到这一点？

### 这就是我想要的样子：

*   姓名：Steven Larson [删除按钮] [更改信息按钮]
*   姓名：Julia Segal [删除按钮] [获取更多信息按钮]
*   等等……

**到目前为止在 MemberView.php 中的代码：**

```
public function ShowMembers($memberIds) {

    $i = 0;
        foreach ($memberIds as $memberId) {
            $listOfMembers =
            "<b>Name:</b> $fNames[$i] $lNames[$i]
            <input type='submit' id='$memberId' name='delete' value='Delete member' />
            <input type='submit' id='$memberId' name='changeInfo' value='Change info' />
            $i += 1;
        }

    $html = "<form method='post'>
               <p>$listOfMembers</p>;
            </form>";

    return $html;
}

public function TriedToDelete() {
    if (isset($_POST[delete])){
        return $_POST[delete];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:25:25.423

您有几个选项来处理您要完成的任务：

*   将按钮转换为链接并使用`GET`而不是`POST`. 您可以使查询字符串类似于`?action=delete&id=$memberId`.

尝试：

```
foreach ($memberIds as $memberId) {
    $listOfMembers = "<b>Name:</b> $fNames[$i] $lNames[$i]
    <a href=\"page.php?action=delete&id=$memberId\">Delete member</a>
    <a href=\"page.php?action=changeInfo&id=$memberId\">Change info</a>";
    $i += 1;
} 
```

*   为每个成员制作一个单独的表格，并为每个成员设置一个隐藏`id`字段。因此，不要用 包裹整个东西，而是`<form></form>`包裹每组按钮：

尝试：

```
foreach ($memberIds as $memberId) {
    $listOfMembers = "<b>Name:</b> $fNames[$i] $lNames[$i]";
    $listOfMembers .= '<form method="post">';
    $listOfMembers .= '<input type="hidden" name="id" value="' . $memberId . '" />';
    $listOfMembers .= "<input type='submit' name='delete' value='Delete member' />";
    $listOfMembers .= "<input type='submit' name='changeInfo' value='Change info' />";
    $listOfMembers .= '</form>';
    $i += 1;
} 
```

*   单击每个单独的按钮时，使用 JavaScript 设置隐藏字段。

尝试：

```
<script>
    function submit(button) {
        document.getElementById('id').value = button.getAttribute('id');
        document.getElementById('action').value = button.getAttribute('name');
        button.form.submit();
    }
</script> 
```

您将使用的每个按钮：

```
$listOfMembers .= "<input type='button' id='$memberId' name='delete' value='Delete member' onclick='submit(this);'  />";
$listOfMembers .= "<input type='button' id='$memberId' name='changeInfo' value='Change info' onclick='submit(this);' />"; 
```

这完全是一个意见问题，但如果您必须使用 POST，我会个人建议第二个选项（每个组的单独表格）；否则，第一个（使用 GET）将是最简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:22:57.273

```
<input type='hidden' id='$memberId' name='id' value='$memberId' />       
<input type='submit' id='$memberId1' name='delete' value='Delete member' />  
<input type='submit' id='$memberId2' name='changeInfo' value='Change info' /> 
```

您应该使用存储 memberid 的隐藏字段。

并通过使用获取隐藏字段的值

`$id=$_POST['id'];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:24:27.603

第一个 id 在 html 中的两个元素中应该是唯一的

在您的情况下，删除和更改按钮 ID 应该不同，例如

```
公共函数 ShowMembers($members) {

    $i = 0;
        foreach ($memberIds 作为 $memberId) {
            $listOfMembers =
            "名称： $fNames[$i] $lNames[$i]

            $i += 1;
        }

    返回 $html;
}

```

如果您通过表单发布，表单应该有所不同，否则它将设置两个输入字段，通过这种方式您将不知道您真正想要做什么

现在`$POST[$_POST['member_id']."_del"]`将是您的 del 请求

并将`$POST[$_POST['member_id']."_change"]`成为您的更改按钮

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T15:25:02.923

我建议使用`<a>`tag 而不是`<input type="submit">`，所以它可能看起来像

```
foreach ($memberIds as $memberId) {
        $listOfMembers =
        "<b>Name:</b> $fNames[$i] $lNames[$i]
        <a href="delete.php?id=$memberId">Delete member</a>
        <a href="edit.php?id=$memberId">Change info</a>
        $i += 1;
    } 
```

并且您不再需要使用复杂的表单解决方案并依赖于单击的按钮名称

# css - Virtualbox 和 MAMP 上的 CSS 问题？

> ID：12862202
> 
> 赞同：2
> 
> 时间：2012-10-12T15:19:13.863
> 
> 标签：css, internet-explorer-8, localhost, mamp, intranet

今天我发现了一个非常奇怪的错误（？）。我正在运行带有 MAMP 的 Mac OS X 和带有 Win XP 的虚拟机。在 Mac OS 上的主机文件中，我为 localhost:8888 添加了一行，称为“mampserver”。在 XP 的主机文件中，我将 10.0.2.2（带有 MAMP 的 Mac OS）也设置为“mampserver”。通过这些行，我可以在 MAMP 上本地运行 WordPress，并从虚拟 XP 在 IE 中检查它。（我拥有这些主机字符串的原因是 WordPress 将 GUID 保存为`http://localhost:8888/the_site/...`，如果我在 XP 上尝试直接从 10.0.2.2 图像访问它，并且由于“localhost”是 127.0.0.1 在经验）。

然而，今天，我在使用这个设置时遇到了一个非常奇怪的错误。

如果我来自 MAMP 运行类似：

```
<div id="menu">
    <div class="menu-button">Button 1</div>
    <div class="menu-button">Button 2</div>
    <div class="menu-button">Button 3</div>
</div> 
```

与 CSS 看起来像：

```
#menu {
    width: 900px;
    display: table;
}
.menu-button {
    display: table-cell;
} 
```

IE (8) 呈现这个错误，`menu-button`:s 被列为行。如果我采用完全相同的代码，在 XP 上创建一个 HTML 文件并在 IE 中运行它，它就可以完美运行。

主机如何影响CSS？！

有遇到过相同或类似烦恼的人吗？

# java - @Autowired 和 @Service 从控制器工作，但不是来自不同的包

> ID：12862203
> 
> 赞同：10
> 
> 时间：2012-10-12T15:19:16.037
> 
> 标签：java, spring-mvc, spring-3, autowired

我需要帮助理解 and 背后的`@Autowired`概念`@Service`。我有一个用`@Service`和控制器定义的 DAO `@Autowired`，一切似乎都很好，但是，我`@Autowired`在不同的类中使用相同的，然后它不起作用。

例子：

服务

```
@Service
public class MyService {
    private JdbcTemplate jdbcTemplate;

    @Autowired
    public void setDataSource (DataSource myDataSource) {
        this.jdbcTemplate = new JdbcTemplate(myDataSource);
    } 

    public void testUpdate(){
            jdbcTemplate.update("some query");
    }
} 
```

控制器

```
package com.springtest.mywork.controller;

@Controller
@RequestMapping(value = "/test.html")
public class MyController
{
  @Autowired
  MyService myService;

  @RequestMapping(method = RequestMethod.GET)
  public String test(Model model)
  {
    systemsService.testUpdate();
    return "view/test";
  }
} 
```

以上所有工作正常。但是，如果我想`MyService`在 POJO 中使用，那么它就是行不通的。例子：

```
package com.springtest.mywork.pojos;
public class MyPojo {

    @Autowired
    MyService myService;

    public void testFromPojo () {
        myService.someDataAccessMethod(); //myService is still null
    }
} 
```

弹簧配置：

```
<beans>
    <mvc:annotation-driven />
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/"/>
        <property name="suffix" value=".jsp"/>
    </bean>
    <context:component-scan base-package="com.springtest.mywork" />
    <bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://127.0.0.1:3306/mydb" />
        <property name="username" value="hello" />
        <property name="password" value="what" />
    </bean>

    <bean name="jdbcTemplate" class="org.springframework.jdbc.core.simple.SimpleJdbcTemplate">
        <constructor-arg ref="dataSource"/>
    </bean>
 </beans> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T15:47:40.550

这是因为你的 POJO 类不是由 spring 容器管理的。

`@Autowire`注释仅适用于由 spring 管理的那些对象（即由 spring 容器创建）。

在您的情况下，服务和控制器对象由 spring 管理，但您的 POJO 类不由 spring 管理，这就是为什么`@Autowire`不会产生您期望的行为。

`@Service`我注意到的另一个问题是，当 spring 有`@Repository`专门为此目的创建的注释时，您正在使用DAO 层中的注释。

此外，不允许 spring 管理 POJO 类也是不可取的，因为通常它将是必须在容器外部创建的数据存储元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T15:32:44.053

使用类路径扫描时，您必须与 Spring 通信要管理哪些类。这是使用`@Service`注释及其关系（`@Controller`、`@Repository`等）完成的。

如果您选择*不*注释您的 bean，您必须在配置中显式声明它，就像您对`dataSource`and所做的那样`jdbcTemplate`。

注释你的类意味着只有包中的那些类由 Spring 管理；它允许您扫描一个包，而无需管理该包中的*所有*类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T15:32:14.610

将其包含在 applicationContext.xml 文件中

```
<context:annotation-config /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-08T08:09:43.183

您可以实现它以在 POJO 类中使用弹簧管理的 bean。

[http://www.javacodegeeks.com/2015/03/using-spring-managed-bean-in-non-managed-object.html](http://www.javacodegeeks.com/2015/03/using-spring-managed-bean-in-non-managed-object.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-12T15:22:44.583

检查配置文件中的上下文组件扫描

```
<context:component-scan base-package="<your_package>" /> 
```

# sql - oracle如何构建动态查询？

> ID：12862207
> 
> 赞同：1
> 
> 时间：2012-10-12T15:19:26.267
> 
> 标签：sql, oracle, plsql

我需要从不同的表中读取字段。表的名称写在另一列中。

即：**ENI_FLUSSI_HUB**有一个**FLH_TOUT_NAME**列。我想从**FLH_TOUT_NAME中指定的表中读取 field1 和 field2**

我想使用流水线功能。但我必须知道查询将返回的女巫字段..

**我需要使用可以从 SQL 语句中调用的 PL/SQL 函数来解决问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:53:53.027

```
declare
 TYPE ref_cursor IS REF CURSOR;
 c_cursor ref_cursor;
--Declare variables stmt, fld1, fld2
begin
 FOR c_rec in (SELECT FLH_TOUT_NAME     
                from ENI_FLUSSI_HUB) --For multiple tables
 LOOP
    stmt := 'SELECT field1, field2 FROM '|| c_rec.FLH_TOUT_NAME;
    open c_cursor for stmt;
    LOOP                             --For multiple rows in table c_rec.FLH_TOUT_NAME
     FETCH c_cursor INTO fld1, fld2;
     exit when c_cursor%notfound;
     dbms_output.put_line ('Table='||c_rec.FLH_TOUT_NAME||' Field 1 ='||fld1||' Field 2='||fld2);
    END LOOP;
 END LOOP;
 ...
 ...
 exception
   ...
   ...
 end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:35:48.983

```
declare
  TYPE cur_typ IS REF CURSOR;
  c           cur_typ;
  query_str   VARCHAR2(1000);
  l_tablename VARCHAR2(20);
  l_field1    VARCHAR2(20);
  l_field2    VARCHAR2(20);

BEGIN

  --this assumes only 1 row in ENI_FLUSSI_HUB, if there are more, then use a cursor
  select FLH_TOUT_NAME
  into l_tablename
  from ENI_FLUSSI_HUB;

  query_str := 'SELECT field1, field2 FROM ' || l_tablename;

  OPEN c FOR query_str;
  LOOP
    FETCH c INTO l_field1, l_field2;
    EXIT WHEN c%NOTFOUND;

    dbms_output.put_line('Field1: ' || l_field1);
    dbms_output.put_line('Field2: ' || l_field2);

  END LOOP;
  CLOSE c;
END;
/ 
```

# c++ - Alt Tab 覆盖 Win32 标识符

> ID：12862213
> 
> 赞同：8
> 
> 时间：2012-10-12T15:20:01.760
> 
> 标签：c++, windows, winapi, alt-tab

我正在将来自外部传感器（例如键盘）的事件映射到键盘快捷键，我想使用快速切换覆盖窗口（即菜单“）切换应用程序`Alt`，`Tab`但我想继续显示切换菜单，直到应用程序被选中。

基本上，我在做什么是这样的：

```
if(notInSwitchMenu) 
{   // Alt-Tab keystroke, but Alt remains pressed : the menu is still visible
    Press(VK_MENU); 
    Press(VK_TAB); 
    Release(VK_TAB);
}
else
{

    if(event1) //Tab keystroke : next app
    {
        Press(VK_TAB);
        Release(VK_TAB) ;
    } 
    else if(event2) //Shift-Tab keystroke  : previous app
    { 
        Press(VK_SHIFT); 
        Press(VK_TAB);
        Release(VK_TAB);
        Release(VK_SHIFT) 
    }
    else if(event3) // we get out of the menu : the selected app has the focus.
    {
        Release(VK_MENU);
    } 
} 
```

Press and Release 只需使用正确的属性调用 SendInput。

我的问题是我不知道确定用户当前是否在`Alt`-`Tab`程序列表中的可靠方法。**有谁知道如何使用 Win32 API 识别 Alt-Tab 覆盖菜单？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T18:57:16.893

/事件告诉您+窗口何时出现和消失`EVENT_SYSTEM_SWITCHSTART`。`EVENT_SYSTEM_SWITCHEND``Alt``Tab`

# c - 在c中连续跳出两个循环

> ID：12862220
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:20:31.863
> 
> 标签：c

我正在尝试制作一个程序

1.  显示我的文字 1 秒钟，然后自行清除
2.  打印一个 8*8 的随机数块 100000 次（移动数字装饰）然后
3.  当我按下一个键时退出。

这是我的代码：

```
#include stdio;
#include stdlib;
main() {
    printf("Welcome to random number V2.0");
    usleep(1000);
    printf("\033[2J\033[1;1H");
    printf("Press X to terminate at any time");
    usleep(1000);
    printf("\033[2J\033[1;1H");
    printf("Program starting");
    usleep(500);
    printf("\033[2J\033[1;1H");
    for(index=0;index<100000;index++) {
        Randomnumber;
        printf("%s". matrix)
        usleep(5);
        printf("\033[2J\033[1;1H");
        usleep(5);

    }

    Randomnumber() {
        int matrix[9][9];
        int index_x;
        int index_y;
        int index;
        for (index_x=0;index_x<9;index_x++) {
            for (index_y=0;index_y<9;index_y++) {
                /*randomizer code goes here, till change ran# statement*/
                matrix [index_x][index_y] = ran
#;
            }
        }
    } 
```

如您所见，我需要一种在 for 循环中停止程序的方法。我找到了一个函数，如果键盘上有一个键，它会返回一个非 NULL 值`buffer(kbhit)`，但我不明白这怎么能让我跳出两个循环。（对不起我草率的代码。`Kbhit`并且`usleep`不在通常的 C 库中，但它适用于`lcc`.）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:24:43.653

`return`会工作。

也会`index_x = 100, index_y = 100; break;`

* * *

方法一：

```
Randomnumber() 
{
    int matrix[9][9], x, y;
    for (x=0;  x<9;  ++x)
        for (y=0;  y<9;  ++y)
        {
            matrix [x][y] = rand();
            if (some condition which means we're done)
                 x = 100, y = 100;
        }
} 
```

方法B：

```
Randomnumber() 
{
    int matrix[9][9], x, y;
    for (x=0;  x<9;  ++x)
        for (y=0;  y<9;  ++y)
        {
            matrix [x][y] = rand();
            if (some condition which means we're done)
                 return;
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:32:23.210

您可以更改`Randomnumber()`以返回一个值：“中断”可能为 1；0 表示成功。

然后 main 中的循环变为

```
 for (...) {
   if (Randomnumber() != 0) {break;}
   ...
 } 
```

（另请注意，您需要 a`()`来实际从 main 调用函数。声明返回类型和参数是一种很好的做法，即使它们只是 (void)。 *默认返回类型是 1978*）

# c# - Access DB Query 通过对子字符串进行分组并选择最大值来过滤列数据

> ID：12862221
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:20:35.203
> 
> 标签：c#, .net, ms-access

数据库表“标签信息”

```
ID      Labels    
1       TRPKLM003 
2       JPRECM001 
3       MNTORM005 
4       JPRECM004 
5       MNTORM002 
6       JPRECM003 
7       TRPKLM002 
8       TRPKLM004 
```

列标签是固定长度的。我想返回以下数据作为结果：

```
TRPKLM004
MNTORM005
JPRECM004 
```

我会编写一个访问查询，它可以通过对匹配的前 6 个字符和其余 3 个字符的最大值进行分组来仅返回行。或者如果我要返回表中的所有行，我想要一种优化的方法来过滤 C# 中的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:36:19.403

db 引擎可以拆分`Labels`字段的两个组件。

```
SELECT
    Left(Labels, 6) AS prefix_string
    Val(Right(Labels, 3)) AS suffix_nmbr
FROM LabelInfo; 
```

将其用作查询的子`GROUP BY`查询。

```
SELECT
    sub.prefix_string,
    Max(sub.suffix_nmbr) AS MaxOfSuffix_nmbr
FROM
    (
        SELECT
            Left(Labels, 6) AS prefix_string
            Val(Right(Labels, 3)) AS suffix_nmbr
        FROM LabelInfo
    ) AS sub
GROUP BY sub.prefix_string; 
```

如果在您的 c# 客户端代码中重新组合这两个部分不方便，您可以让 db 引擎将所有内容作为子查询来完成。

```
SELECT
    sub2.prefix_string
        & Format(sub2.MaxOfSuffix_nmbr, '000')
        AS labels_alias
FROM
    (
        SELECT
            sub1.prefix_string,
            Max(sub1.suffix_nmbr) AS MaxOfSuffix_nmbr
        FROM
            (
                SELECT
                    Left(Labels, 6) AS prefix_string
                    Val(Right(Labels, 3)) AS suffix_nmbr
                FROM LabelInfo
            ) AS sub1
        GROUP BY sub1.prefix_string
    ) AS sub2; 
```

# winforms - 将 UserControl 数据绑定到集合

> ID：12862222
> 
> 赞同：0
> 
> 时间：2012-10-12T15:20:37.627
> 
> 标签：winforms, data-binding, user-controls

我正在尝试创建一个用户控件，我可以将其数据绑定到一个集合（具体来说是一个 EntityCollection）。我想要的只是能够设置一个属性，例如：

```
MyControl.DataSource = Order.Items 
```

然后，我希望我的控件能够检测何时从 Order.Items 集合中添加或删除实体。

我该如何做到这一点？

# algorithm - 计算2个日期之间的天数的实现

> ID：12862226
> 
> 赞同：10
> 
> 时间：2012-10-12T15:20:47.303
> 
> 标签：algorithm

计算两个日期之间的天数的最有效方法是什么？基本上我在问我们最喜欢的日期时间库是如何实现的。

当我每 4 年运行 1 次迭代时，我很快实现了一个 ~O(n) 的解决方案。（下面附上代码）

我被要求用计算机类解决问题的介绍来实现这一点，但他们只是*每天*而不是每 4 年迭代一次。所以我不满足于那个解决方案并想出了下面的一个。但是，是否有更有效的解决方案可用？如果是这样，他们是如何实现的？

```
#include <iostream>

using namespace std;

#define check_leap(year) ((year % 400 == 0) || ((year % 4 == 0) && (year % 100 != 0)))
#define debug(n) cout << n << endl

int get_days(int month, bool leap){
    if (month == 2){
        if (leap) return 29;
        return 28;
    } else if (month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12){
        return 31;
    } else {
        return 30;
    }
}

int days[] = {31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334};

#define days_prior_to_month(n) days[n-2]
int num_days_between(int month1, int day1, int month2, int day2, bool leap){
    if (month2 > month1)
        return ((days_prior_to_month(month2) - days_prior_to_month(month1+1)) + get_days(month1, leap) - day1 + 1 + day2) + ((leap &&  month1 <= 2 && 2 <= month2) ? 1 : 0);
    else if (month2 == month1)
        return day2;
    return -1;
}

int main(int argc, char * argv[]){
    int year, month, day, year2, month2, day2;
    cout << "Year: "; cin >> year;
    cout << "Month: "; cin >> month;
    cout << "Day: "; cin >> day;
    cout << "Year 2: "; cin >> year2;
    cout << "Month 2: "; cin >> month2;
    cout << "Day 2: "; cin >> day2;

    int total = 0;
    if (year2 != year){
        int leapyears = 0;
        total += num_days_between(month, day, 12, 31, check_leap(year));
        debug(total);
        total += num_days_between(1, 1, month2, day2, check_leap(year2));
        debug(total);
        int originalyear = year;
        year++;
        year = year + year % 4;
        while (year <= year2-1){
            leapyears += check_leap(year) ? 1 : 0;
            year += 4;
        }

        total += leapyears * 366;
        debug(total);
        total += max(year2 - originalyear - leapyears - 1, 0) * 365;
        debug(total);

    } else {
        total = num_days_between(month, day, month2, day2, check_leap(year));
    }
        cout << "Total Number of Days In Between: " << total << endl;
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-12T15:31:27.267

您可以在 O(1) 中将日期转换为[儒略日数。](http://en.wikipedia.org/wiki/Julian_date)

减去两个儒略日数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-12T16:23:58.543

所有除法都是整数除法，运算符 % 是模数。

给定整数 y, m, d，计算天数 g 为：

```
function g(y,m,d)
m = (m + 9) % 12
y = y - m/10
return 365*y + y/4 - y/100 + y/400 + (m*306 + 5)/10 + ( d - 1 )

Difference between two dates = g(y2,m2,d2) - g(y1,m1,d1) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-17T15:08:56.710

Tyler Durden 的解决方案是最优雅的，但可能需要一些解释。

该算法的美妙之处在于：

```
(m*306 + 5)/10 
```

它返回从 3 月 1 日到 3 月之后第 'm' 个月的开始之间的天数。（如果你想证明这一点，请记住使用截断小数部分的“整数除法”）

为了将标准约会约定融入此函数，月份和年份的输入值会发生变化，以便日历“开始”在 3 月而不是 1 月。

```
m = (m + 9) % 12
y = y - m/10 
```

实现这一点处理了计算“每月天数”的问题，只留下“每年天数”要计算。维基百科为这部分提供了充分的解释。

[http://en.wikipedia.org/wiki/Leap_year#Algorithm](http://en.wikipedia.org/wiki/Leap_year#Algorithm)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-16T09:41:32.737

解决方案在 python 中，转换为任何其他语言应该不难。

```
def isLeapYear(year):
    if year%4 == 0:
        if year%100 == 0:
            if year%400 == 0:
                return True
            else:
                return False
        else:
            return True
    else:
        return False

def daysBetweenDates(year1, month1, day1, year2, month2, day2):
    cumDays = [0,31,59,90,120,151,181,212,243,273,304,334] #cumulative Days by month
    leapcumDays = [0,31,60,91,121,152,182,213,244,274,305,335] # Cumulative Days by month for leap year
    totdays = 0
    if year1 == year2:
        if isLeapYear(year1):
            return (leapcumDays[month2-1] + day2) - (leapcumDays[month1-1] + day1)
        else:
            return (cumDays[month2-1] + day2) - (cumDays[month1-1] + day1)

    if isLeapYear(year1):
        totdays = totdays + 366 - (leapcumDays[month1-1] + day1)
    else:
        totdays = totdays + 365 - (cumDays[month1-1] + day1)

    year = year1 + 1
    while year < year2:
        if isLeapYear(year):
            totdays = totdays + 366
        else:
            totdays = totdays + 365
        year = year + 1

    if isLeapYear(year2):
        totdays = totdays + (leapcumDays[month2-1] + day2)
    else:
        totdays = totdays + (cumDays[month2-1] + day2)
    return totdays 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-13T11:30:46.937

我根据 Doug Currie 的建议编写了这个公式。我从今天开始测试到 2147483647 天。

```
static int daysElapsed(int yearOne,int monthOne,int daysOne,int yearTwo,int monthTwo,int daysTwo)
{
    return (daysTwo-32075+1461*(yearTwo+4800+(monthTwo-14)/12)/4+367*(monthTwo-2-(monthTwo-14)/12*12)/12-3*((yearTwo+4900+(monthTwo-14)/12)/100)/4)-
                   (daysOne-32075+1461*(yearOne+4800+(monthOne-14)/12)/4+367*(monthOne-2-(monthOne-14)/12*12)/12-3*((yearOne+4900+(monthOne-14)/12)/100)/4);            
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-19T00:57:55.870

您还可以使用基于原点的算法。您可以计算开始日期和结束日期之前的所有天数，然后找出这些计数之间的差异：

```
totalDays = end_date_count - start_date_count 
```

例如（java代码）：

```
public class Origincount {
public static class Dates {
    private final Integer day;
    private final Integer month;
    private final Integer year;

    public Dates(String date) {
        String[] s = date.split("/");
        this.day = Integer.valueOf(s[0]);
        this.month = Integer.valueOf(s[1]);
        this.year = Integer.valueOf(s[2]);
    }
    public Integer getDay() {
        return day;
    }
    public Integer getMonth() {
        return month;
    }
    public Integer getYear() {
        return year;
    }
}

private static final Map<Integer, Integer> daysOfMonth = new HashMap<Integer, Integer>();

static {
    daysOfMonth.put(1, 31);
    daysOfMonth.put(2, 28);
    daysOfMonth.put(3, 31);
    daysOfMonth.put(4, 30);
    daysOfMonth.put(5, 31);
    daysOfMonth.put(6, 30);
    daysOfMonth.put(7, 31);
    daysOfMonth.put(8, 31);
    daysOfMonth.put(9, 30);
    daysOfMonth.put(10, 31);
    daysOfMonth.put(11, 30);
    daysOfMonth.put(12, 31);
}

public static Integer countLeapYears(Dates date) {
    Integer y = date.getYear();
    if(date.getMonth() <= 2) { y--; }
    return (y/4) - (y/100) + (y/400);
}

public static Integer daysMonth(Dates date) {
    Integer days = 0;
    for(int i=1; i<date.getMonth(); i++) {
        days += daysOfMonth.get(i);
    }
    return days;
}

public static void main(String[] args) {
    Dates start = new Dates("1/1/1901");
    Dates end = new Dates("31/12/2999");
    Integer countStart = (start.getYear()*365) + countLeapYears(start) + daysMonth(start) + start.getDay();
    Integer countEnd = (end.getYear()*365) + countLeapYears(end) + daysMonth(end) + end.getDay();

    System.out.println("Total days: "  + (countEnd-countStart));
}
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-06-27T07:51:11.693

也许这会有所帮助：（这个程序是用 c 编写的）

```
#include<stdio.h>

int gauss(int y)
{
int r;
r=(1+(5*((y-1)%4))+(4*((y-1)%100))+(6*((y-1)%400)))%7;
return r;
/*
 using gauss's algorithm to figure out the first day of the given year
 * visit:          https://en.wikipedia.org/wiki/Determination_of_the_day_of_the_week#Gauss.27s_algorithm

 */
 }
 int julian(int d,int m,int y){
 int j;
 j=(d + (((153*m)+2)/5) + (365*y) + (y/4) - (y/100) + (y/400));
 return j;
 /*
  * calculating julian number for a date so that we can calculate number of   days passed between the 
 * first day of that year and the given date
 * visit: http://www.had2know.com/society/number-days-between-two-dates.html 
 */
 }

 int main(){
 int d1,m1,y1,j1,j2,n,r,n1,abs;

 int d,m,y;

/*
 * d1= day date
 * d=d1
 * m1= month given by the user
 * m= month required for calculation
 * y1= year given by the user
 * y=year required for calculation
 */
 printf("Enter the day number of date: ");
 scanf("%d",&d1);
 printf("\nEnter the month number of date: ");
 scanf("%d",&m1);
 printf("\nEnter the year of date: ");
 scanf("%d",&y1);
 if(m1<13&&m1>2){
    m=m1-3;
    d=d1;
    y=y1;
    j1=julian(1,10,y-1);//did y-1 as for jan and feb we did the same

    j2=julian(d,m,y);

 }
 else if(m1==1 || m1==2)
 {
    m=m1+9;
    d=d1;
    y=y1-1;
     j1=julian(1,10,y);

    j2=julian(d,m,y);

  }
 printf("\ndate: %d/%d/%d",d1,m1,y1);

 r=gauss(y1);

 abs=(j1-j2);

 if(abs<0){
     abs=0-abs;
 }

 n=(abs)%7;

 n1=(n+r)%7;

 if(n1==0)
 {
    printf("\nThe day is: Sunday");
 }
 else if(n1==1)
 {
    printf("\nThe day is: Monday");
 }
 else if(n1==2)
 {
    printf("\nThe day is: Tuesday");
 }
else if(n1==3)
{
    printf("\nThe day is: Wednesday");
}
else if(n1==4)
{
    printf("\nThe day is: Thursday");
}
else if(n1==5)
{
    printf("\nThe day is: Friday");
}
else if(n1==6)
{
    printf("\nThe day is: Saturday");
}
return 0; 
```

}

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-02-04T15:44:52.090

使用 Python 的简单算法：

```
 #Calculate the Days between Two Date

    daysOfMonths = [ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]

    def isLeapYear(year):

        # Pseudo code for this algorithm is found at
        # http://en.wikipedia.org/wiki/Leap_year#Algorithm
        ## if (year is not divisible by 4) then (it is a common Year)
        #else if (year is not divisable by 100) then (ut us a leap year)
        #else if (year is not disible by 400) then (it is a common year)
        #else(it is aleap year)
        return (year % 4 == 0 and year % 100 != 0) or year % 400 == 0

    def Count_Days(year1, month1, day1):
        if month1 ==2:
            if isLeapYear(year1):
                if day1 < daysOfMonths[month1-1]+1:
                    return year1, month1, day1+1
                else:
                    if month1 ==12:
                        return year1+1,1,1
                    else:
                        return year1, month1 +1 , 1
            else: 
                if day1 < daysOfMonths[month1-1]:
                    return year1, month1, day1+1
                else:
                    if month1 ==12:
                        return year1+1,1,1
                    else:
                        return year1, month1 +1 , 1
        else:
            if day1 < daysOfMonths[month1-1]:
                 return year1, month1, day1+1
            else:
                if month1 ==12:
                    return year1+1,1,1
                else:
                        return year1, month1 +1 , 1

    def daysBetweenDates(y1, m1, d1, y2, m2, d2,end_day):

        if y1 > y2:
            m1,m2 = m2,m1
            y1,y2 = y2,y1
            d1,d2 = d2,d1
        days=0
        while(not(m1==m2 and y1==y2 and d1==d2)):
            y1,m1,d1 = Count_Days(y1,m1,d1)
            days+=1
        if end_day:
            days+=1
        return days

    # Test Case

    def test():
        test_cases = [((2012,1,1,2012,2,28,False), 58), 
                      ((2012,1,1,2012,3,1,False), 60),
                      ((2011,6,30,2012,6,30,False), 366),
                      ((2011,1,1,2012,8,8,False), 585 ),
                      ((1994,5,15,2019,8,31,False), 9239),
                      ((1999,3,24,2018,2,4,False), 6892),
                      ((1999,6,24,2018,8,4,False),6981),
                      ((1995,5,24,2018,12,15,False),8606),
                      ((1994,8,24,2019,12,15,True),9245),
                      ((2019,12,15,1994,8,24,True),9245),
                      ((2019,5,15,1994,10,24,True),8970),
                      ((1994,11,24,2019,8,15,True),9031)]

        for (args, answer) in test_cases:
            result = daysBetweenDates(*args)
            if result != answer:
                print "Test with data:", args, "failed"
            else:
                print "Test case passed!"
    test() 
```

# django - 带有 virrtualenv 的静态文件和 STATIC_URL - django

> ID：12862228
> 
> 赞同：2
> 
> 时间：2012-10-12T15:20:52.807
> 
> 标签：django, static, virtualenv

我正在使用 virtualenv，但我无法让静态文件在我的 django 上工作，

```
# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/home/brian/Projects/RaffleFish/static',

) 
```

我的 virtualenv 目录是 virt_env/virtFish

如何让我的静态文件工作？我要添加virtenv的目录结构吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:05:41.320

在 Django 项目中的各个应用程序中，您可以创建一个`static`目录并将静态文件放置在该目录中。这些文件将由模块自动处理，该`django.contrib.staticfiles`模块应位于 settings.py 文件中的 INSTALLED_APPS 元组中。这些文件将在开发过程中由`python manage.py runserver`命令自动聚合和提供。

您必须牢记此过程的技巧是，当需要部署到生产环境或您不向您提供内容的任何环境时，您`manage.py`必须自己执行该聚合。该`manage.py`命令有一个命令可以帮助解决这个问题。作为部署的一部分，您应该包含以下命令：

```
python manage.py collectstatic 
```

`static`这会将应用程序目录中的所有静态文件收集（聚合）`settings.py`到`STATIC_ROOT`设置中定义的单个位置。

# android - Phonegap Android 中的平滑 3d 变换

> ID：12862233
> 
> 赞同：1
> 
> 时间：2012-10-12T15:21:21.393
> 
> 标签：android, cordova, css-transforms, iscroll4

我正在尝试使用 Phonegap 制作带有画廊的应用程序。在其中，我使用 jQuery 和 iScroll4。

我需要制作增加中心元素大小的效果。为此，我设置了项目父属性 -webkit-perspective: 1200px 和项目本身[-webkit-transform: translateZ (150px); -webkit-transform-style：preserve-3d。](http://jsfiddle.net/CEzjc/3/)它在 Chrome 中看起来不错，但不适用于 Android 2.2 (Samsung Galaxy) 和 2.3 (Kindle Fire)。在 Android 3.0（摩托罗拉 Xoom）上它可以工作，但很生涩。

我尝试使用[-webkit-transform: scale (1.14)](http://jsfiddle.net/CEzjc/6/)。它适用于所有设备，但仍然会抖动。改变高度/宽度或缩放的变体也没有给出好的结果。

如何在所有（Android）设备上顺利实现此效果？

我将不胜感激任何内容丰富的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:50:43.170

也许这个，CSS3 使用绝对定位缩放

```
<html>
<head>
<style type="text/css">
img {
    position:absolute;
    top:50px; left:50px;
    height:60px; width:80px;
    -webkit-transition:all 0.2s ease;
}
img:hover {
    top:35px; left:30px;
    height:90px; width:120px;
}
</style>
</head>

<body>
    <img src="image.png" />
</body>
</html> 
```

# ocaml - ocaml 解释器

> ID：12862239
> 
> 赞同：7
> 
> 时间：2012-10-12T15:21:39.193
> 
> 标签：ocaml, interpreter

有人可以给我一些帮助，使用以下语法为该语言构建一个 ocaml 解释器：

```
Prog ::= Def* Expr
Def ::= id id* = Expr
Expr ::= int | id | Expr '+' Expr | Expr '*' Expr | id Expr* | if Expr then Expr else Expr 
```

到目前为止，我这样做了：

```
type expr = I of int
| Id of string
| Add of expr * expr
| Multiply of expr * expr
| If of  expr * expr * expr

let rec evaluate = function
| I n -> n 
| Add(e1,e2) -> evaluate e1 + evaluate e2
| Multiply(e1,e2) -> evaluate e1 * evaluate e2
| If(a,b,c) -> if evaluate a<>0 then evaluate b else evaluate c 
```

这有什么好处吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:43:10.107

在您的语法中，单个 id 可以与产生式`Expr ::= id`或`Expr ::= id Expr*`. 换句话说，没有办法区分空函数应用程序（假设`id Expr*`产生式应该与函数应用程序匹配）和变量。也许您的意思是`id Expr+`（禁止空函数应用程序）。

您现有的代码看起来不错，但它不完整：

您的`expr`类型缺少用于`id Expr*`生成语法的构造函数，即缺少表示函数应用程序的构造函数。您应该添加一个，然后为它添加一个案例到`evaluate`函数中。

在您的`evaluate`函数中，您缺少`Id`构造函数的案例。这种情况应该在从标识符到值（整数）的映射中查找给定标识符的值。为此，您的`evaluate`函数应该将这样的映射作为附加参数。它还应该采用另一个从标识符到函数的映射，然后您可以在函数应用程序的情况下使用它来循环函数名称。

说到这些映射，您目前没有任何代码来表示或处理定义。你应该想出一个类型来表示定义和另一个来表示函数。后一种类型应该包含函数参数的名称和作为`expr`.

然后，您应该编写一个函数，该函数接受定义列表并创建变量和函数的映射。对于每个变量定义，它应该评估右侧的表达式并将结果值添加到变量映射中。对于每个函数定义，您应该将函数类型的值添加到函数映射中。`evaluate`处理完定义后，您应该通过使用该表达式和您创建的两个映射作为参数调用您的函数来评估最终表达式。

最后，您没有任何用于实际解析程序的代码，但我认为这可能是故意的。

# php - 使用 PHP 的 SOAP 扩展创建此 SOAP XML 请求

> ID：12862242
> 
> 赞同：0
> 
> 时间：2012-10-12T15:21:45.023
> 
> 标签：php, api, soap

我正在尝试使用 PHP 的[SOAP 扩展](http://www.php.net/manual/en/book.soap.php)重新创建此 XML 请求，但在执行此操作时遇到了问题：

```
<?xml version="1.0"?>
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://services.web.stormpost.skylist.com">
  <soapenv:Header>
    <authInfo xmlns:soap="http://skylist.com/services/SoapRequestProcessor" xsi:type="soap:authentication">
      <!--You may enter the following 2 items in any order-->
      <username xsi:type="xsd:string">****@example.com</username>
      <password xsi:type="xsd:string">*******</password>
    </authInfo>
  </soapenv:Header>
  <soapenv:Body>
    <ser:doImportFromTemplate soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
      <impTempId xsi:type="xsd:int">7</impTempId>
      <data xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="soapenc:string">
Joe|Doe|joe@example.com John|Doe|john@example.com </data>
    </ser:doImportFromTemplate>
  </soapenv:Body>
</soapenv:Envelope> 
```

到目前为止，这是我的测试代码：

```
// set connection params
$wsdl = 'http://api.stormpost.datranmedia.com/services/SoapRequestProcessor?wsdl';
$namespace = 'https://api.stormpost.datranmedia.com/services/SoapRequestProcessor';
$credentials = (object)array(
    'username' => '****@example.com',
    'password' => '*******'
);
$auth_values = new SoapVar($credentials, SOAP_ENC_OBJECT);
$header =  new SoapHeader($namespace, "authInfo", $auth_values);

// set client, headers, and call function
$client = new SoapClient($wsdl, array('trace' => true));
$client->__setSoapHeaders(array($header));
$client->__soapCall("doImportFromTemplate", array(7, 'Joe|Doe|joe@example.com John|Doe|john@example.com')); 
```

除其他外，它似乎没有正确实现*authInfo*节点。`xsi:type="soap:authentication"`我应该如何更改我的代码以输出此 XML？我很难找到好的实现示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:10:42.597

不久前，我自己在 php SOAP 客户端上苦苦挣扎，我并没有完全理解，但这对我有用：

```
$auth_values = array('username' => '****@example.com', 'password' => '*******');
$header =  new SoapHeader($namespace, "authInfo", $auth_values, false);

// set client, headers, and call function
$client = new SoapClient($wsdl, array('trace' => true));
$client->__setSoapHeaders(array($header)); 
```

# javascript - 检查预加载脚本是否已经运行（元素在缓存中）

> ID：12862247
> 
> 赞同：2
> 
> 时间：2012-10-12T15:21:53.037
> 
> 标签：javascript, jquery, ajax, caching, if-statement

我有这个 jQuery AJAX 函数，它在 html 中的每个页面上加载对 .JS 的调用

我想放一个 if 语句来检查我要预加载的文件是否已经在缓存中。这是为了避免脚本将在每个页面上运行其所有内容。一旦一切都在缓存中，我们就不需要了。并且运行它很耗时！

注意：我希望它出现在每个页面上，因为我希望在客户登陆网站的任何地方进行预加载。（不仅是主页）

这是 preload.js：

```
(function() { 
```

在这里插入 if 语句，应该是这样的：

```
if(xhr[src="myslide.swf"].status = 200);
alert('cached'); 
```

或（概念）如果 myslide.swf 在缓存中，则什么也不做；别的...

```
}else{
setTimeout(function(){
var xhr = new XMLHttpRequest();
xhr.open('GET', 'myslide.js');
xhr.send('');   
var xhr = new XMLHttpRequest();
xhr.open('GET', 'myslide.swf');
xhr.send('');
var xhr = new XMLHttpRequest();
xhr.open('GET', 'images.xml');
xhr.send('');
var xhr = new XMLHttpRequest();
xhr.open('GET', 'param.xml');
xhr.send('');
$.ajax({ 
type: "POST", 
url: "/javascript/getnames.php", 
data: "$list",
cache: true,
dataType:"json",
success: function(result) {
    Object.size = function(obj) {
    var size = 0, key;
    for (key in obj) {
    if (obj.hasOwnProperty(key)) size++;
      }
     return size;
    };
    // Get the size of an object
    var size = Object.size(result);
    var i = 0;
    for(i=0; i<size; i++) new Image().src = "/site/" + result[i];
                /*alert(result[X]);*/
            }
     });  //closes the ajax call
var splashArray = new Array();
// Load the Splash XML file and assign each image within to an array
$.get('/javascript/preloadGallery.xml', function(xml) {
    $('image', xml).each(function (i) {
            splashArray.push($(this).attr("src"));
    });
    work_with_splash();
});
function work_with_splash () {
    Object.size = function(obj) {
    var size = 0, key;
    for (key in obj) {
    if (obj.hasOwnProperty(key)) size++;
      }
     return size;
    };
    // Get the size of an object
    var size = Object.size(splashArray);
    var i = 0;
    for(i=0; i<size; i++) new Image().src = splashArray[i];
                /*alert(result[X]);*/   
} //closes the spalsh Call
}, 500);
};

})(); 
```

所有脚本都完美运行，我唯一想念的是 if 语句。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:03:08.140

以[这个问题](https://stackoverflow.com/questions/2446740/post-loading-check-if-an-image-is-in-the-browser-cache)为出发点，我想出了：

```
var storage = window.localStorage;
if (!storage.cachedElements) {
    storage.cachedElements = "";
}

function logCache(source) {
    if (storage.cachedElements.indexOf(source, 0) < 0) {
        if (storage.cachedElements != "") 
            storage.cachedElements += ";";
        storage.cachedElements += source;
    }
}

function cached(source) {
    return (storage.cachedElements.indexOf(source, 0) >= 0);
}

if (cached("swf")){
}else{
...
xhr.open('GET', 'myslide.js');
xhr.send('');
$.ajax({
    type: "GET", 
    url: "/myslide.swf",
    success: function(result) {
        logCache("swf");
    }
}
... 
```

让我知道这是怎么回事。

编辑：这是我能想到的唯一其他事情。您可以检查对 swf 的 ajax 请求需要多长时间，如下所示：

```
$.ajax({
    type: "GET", 
    url: "/myslide.swf",
    beforeSend: function(){ 
        window.timer = new Date().getTime(); 
    },
    success: function(result) {
        window.timer = (new Date().getTime()) - window.timer;
        if (window.timer > 200) {
            functioncall();
        }
    }
} 
```

根据图像的大小，从缓存加载图像所需的时间应该会大大减少（例如，在我的测试中，一个 16.6 kb 的图像从 1.2 秒到 250 毫秒）如果您可以针对此 swf 对其进行微调，成功处理程序中计算的计时器值应该告诉您它是否正在从缓存中加载。然后，您可以将其余的条件内容包装在一个函数中，并根据计时器是否高于某个值来调用它。

# django - Django - 创建超级用户 IntegrityError

> ID：12862254
> 
> 赞同：0
> 
> 时间：2012-10-12T15:22:22.987
> 
> 标签：django, django-models, django-authentication

当我尝试从 shell 或通过 manage.py 或从 Django-Admin 页面创建超级用户时；它会引发如下错误：

```
IntegrityError at /admin/auth/user/add/
null value in column "link_karma" violates not-null constraint 
```

这是我的models.py [用户部分]：

```
class User_Profile(models.Model):

    user = models.OneToOneField(User)
    link_karma = models.IntegerField()
    comment_karma = models.IntegerField()
    avatar = models.CharField(max_length=100)

    def create_user_profile(sender,instance,created,**kwargs):
        if created:
            User_Profile.objects.create(user=instance)
    post_save.connect(create_user_profile, sender=User)

    def __unicode__(self):
        return self.user.username 
```

我在settings.py中添加了闲置线：

```
AUTH_PROFILE_MODULE = 'accounts.User_Profile' 
```

在添加此行之前；是一样的。

**注意**：我尝试将 link_karma 字段的类型更改为 CharField。它是一样的。

**注意**：如果需要任何其他数据；我可以添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:07:42.340

尝试`blank=True, null=True`同时设置`link_karma`和`comment_karma`。您没有将任何值传递给这些字段，因此当您的 create 语句尝试创建对象时，它不知道要给出什么，`link_karm`因此会出现错误。

正如 goliney 正确指出的那样，您的 User_Profile 模型中不需要电子邮件，因为 User 已经拥有它。

# c - 一种在 C 中使用 time_t 函数返回错误的方法

> ID：12862255
> 
> 赞同：4
> 
> 时间：2012-10-12T15:22:32.933
> 
> 标签：c, time-t

我目前正在编写一个返回 time_t 值的 C 函数，但我也需要管理错误情况（因为该函数使用 I/O 函数）。使用 (time_t) -1 作为错误指示器是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:26:40.983

`(time_t)-1`函数已经使用using[`time()`](http://en.cppreference.com/w/c/chrono/time)来报告失败，因此似乎不是一个不合理的选择：

> 当前日历时间编码为 time_t 对象成功， (time_t)(-1) 错误。如果参数不为 NULL，则返回值等于存储在参数指向的对象中的值。

但是，如果调用者有必要区分时间相关故障或 IO 相关故障（或特定 IO 故障），您可以考虑向函数添加状态类型参数，该参数可用于返回有关故障的附加信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:25:49.080

是的，`time_t`签了。

因此，让函数返回`-1`以指示错误是完全可以的。

无论如何，您应该确保从 API 的逻辑中您永远不需要返回任何负时差，因为`time_t`能够`signed`表达（也是？）差异。

**更新：**

这仅在 POSIX 系统上得到保证。甚至存在`signed`误导，因为 [http://pubs.opengroup.org/onlinepubs/009696699/basedefs/sys/types.h.html](http://pubs.opengroup.org/onlinepubs/009696699/basedefs/sys/types.h.html)定义`time_t`为一个`int` **或**一个真正的浮动类型。

因此，在符合 POSIX 标准的系统`time_t`上，它能够携带负值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T15:25:51.887

[time](http://linux.die.net/man/2/time)函数本身会在错误时返回，`(time_t) -1`因此 using`(time_t) -1`应该可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T15:26:42.137

该值`(time_t)-1`表示 1969-12-31T23:59:59+00:00，即 The (Unix) Epoch 之前的第二个。

它是由一些标准 C 时间函数返回的，如果您可能需要处理历史时间并且需要区分实际错误和在大纪元之前偶尔出现的第二个错误，这将是一个令人困惑的麻烦。您最好使用（假设的）TIME_T_MAX 或 TIME_T_MIN 值 - 的最大或最小可能值`time_t`。（但请注意，距离有符号 32 位的上限仅剩 25 年左右——即`time_t`2038 年 1 月。）

# python - 导入错误：找不到名为 TestLIb 的模块

> ID：12862260
> 
> 赞同：0
> 
> 时间：2012-10-12T15:22:55.717
> 
> 标签：python

我正在尝试从 telnet 会话运行 python 文件

脚步：

**每日脚本.py**

1.  Telnet 到蒙塔维斯塔
2.  从 telnet 会话中，我正在尝试运行另一个 python 文件“python sample.py”

**示例.py**

1.  导入 TestLib（在此文件中）

但是，当我直接从我的 linux 机器上运行时，它运行良好。

有什么我需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:08:12.897

最有可能的问题是 TestLib.py 不在您的工作目录中。确保 Dailyscript.py 在执行`python sample.py`.

另外，如果您有 SSH 访问权限，为什么不直接使用 SSH？

# css - CSS Cascading 接管继承，如何解决？

> ID：12862261
> 
> 赞同：0
> 
> 时间：2012-10-12T15:22:55.890
> 
> 标签：css, inheritance, hyperlink, cascading

我们在试图弄清楚为什么 CSS 继承不能按预期工作时遇到了困难。

为了描述这个问题......我有一个可重用的 CSS，它定义了各种背景颜色，我们根据用户配置切换页面各个部分的背景和前景。问题是，如果我的一种颜色被分配给父 DIV 并在 CSS 中进一步定义，那么它会覆盖在子 DIV 中定义的 CSS 属性。一个很好的例子是这个 JSBin 示例 - [JSBin 链接](http://jsbin.com/abejey/1/edit)！，因为 bgBlack 是在 bgWhite 之后的 CSS 文件中定义的，所以用户代理使用 bgBlack 的属性，即使是 bgWhite DIV 的内容！我们需要完成这项工作，否则我们将在用户能够在不涉及开发人员的情况下切换颜色等方面陷入困境。非常感谢任何帮助和指导！

```
<!DOCTYPE html>
<html>
<head>
   <meta name="description" content="[add your bin description]" />
   <meta charset=utf-8 />
   <title>JS Bin</title>
</head>
<body class="bgDark">

  <div class="bgWhite" style="margin:100px;padding:20px;height:200px;width:200px;">
  <h1>Hello World!</h1>
  <ul>
  <li><a href="#">This is a link 1</a></li>
  <li><a href="#">This is a link 2</a></li>
  <li><a href="#">This is a link 3</a></li>
  </ul>
  </div>

</body>
</html> 
```

和 CSS 是....

```
.bgWhite { background-color:white;color:black; }
.bgWhite a { color:black; }
.bgWhite a:hover { color:red; }

.bgDark { background-color:black;color:white; }
.bgDark a { color:white; }
.bgDark a:hover { color:blue; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:26:50.503

因为两组样式具有相同的[特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)，所以最新编写的样式优先于匹配的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:28:06.187

您可以使用更具体的选择器重新覆盖属性。

```
body .bgWhite, .bgWhite { background-color:white;color:black; }
body .bgWhite a, .bgWhite a { color:black; }
body .bgWhite a:hover, .bgWhite a:hover { color:red; }

body .bgDark, .bgDark { background-color:black;color:white; }
body .bgDark a, .bgDark a { color:white; }
body .bgDark a:hover, .bgDark a:hover { color:blue; } 
```

[**演示**](http://jsfiddle.net/gionaf/7fRbc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:31:12.813

使用更具体的选择器。例如，将“div”添加到您的 bgWhite 规则将导致它们被使用：

[http://jsfiddle.net/8QfAa/](http://jsfiddle.net/8QfAa/)

在此处阅读特异性：http: [//coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:30:42.263

这不是继承问题，而是优先级问题。

两个元素都定义为`.class element`，因此它们同样重要。在这种情况下，将使用的 CSS 是要定义的最后一个。

为一个定义添加优先级的一种简单方法是在前面添加一些常见的内容。

例子 ：

```
html .bgWhite a { color:black; } 
html body .bgWhite a { color:black; } 
div.bgWhite a { color:black; } 
div.bgWhite a { color:black !important; } <- avoid if possible. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T21:15:49.040

经过数小时的折腾，并根据@GionaF 提供的指针，我着手寻找一个有意义的解决方案，该解决方案不需要臃肿的 CSS 文件或使用 JavaScript 来操作事物。

我想我已经成功了！在此处发布解决方案以确保如果其他人像我们一样尝试创建完全动态的体验并正在寻找解决方案，社区可以使用这些知识。

[看看这个 JSFiddle DEMO](http://jsfiddle.net/7fRbc/7/)看看我是如何解决这个问题的。总而言之，我将大约 40 小时的时间用于研究/调查，然后再在这里发布问题，然后在此处发布问题后额外 5 小时左右。这是一个很好的 45 小时，一个人可以节省并仍然获得一个优雅的解决方案！希望这可以帮助某人。祝你好运！

# javascript - 如何在 java 脚本上实现淡入淡出动画，如 css 上的缓入淡出？

> ID：12862263
> 
> 赞同：0
> 
> 时间：2012-10-12T15:22:57.747
> 
> 标签：javascript, fadeout, fadein

我有一个 java 脚本，我在我的网站上使用它来在将鼠标悬停在缩略图上时显示图像的预览。该脚本效果很好，但我想在 css 中**添加一个**类似ease-in-out 的功能。我对java不太了解，但是我尝试了几种不同的方法，但没有成功。我找到了一些不错的教程，例如[http://www.switchonthecode.com/tutorials/javascript-tutorial-simple-fade-animation](http://www.switchonthecode.com/tutorials/javascript-tutorial-simple-fade-animation)、[http://www.scriptiny.com/2011/01/javascript-fade-in- out/](http://www.scriptiny.com/2011/01/javascript-fade-in-out/)，但没有 java 编程知识，我不知道如何在这个脚本中实现这些。如果有人可以帮助我解决这个问题，我将不胜感激。

这是在 html 上调用函数的方式：

```
<a href="http://www.a.com/a.html"><img onmouseover="showImage(this.src,this,'a')" src="http://a.net/a.png" /></a> 
```

这是脚本

```
 var floatWidth = 150;  // set the width of the floating image
    var floatHeight = 100;  // set its height

    var midWindow = 0;
    var nContainer = "";
    var IE = false;

    if (navigator.appName == 'Microsoft Internet Explorer'){IE = true}

    function stayHome(m){        

            if (IE)
                    {
                    var currX = event.clientX;
                    var currY = event.clientY;
                    }
            else        {
                    var currX = m.pageX;
                    var currY = m.pageY;
                    }
            if (document.documentElement && document.documentElement.scrollLeft || document.documentElement && document.documentElement.scrollTop)
                    {
                    var iL = document.documentElement.scrollLeft;        
                    var iV = document.documentElement.scrollTop;
                    }
            else        {
                    var iL = document.body.scrollLeft;        
                    var iV = document.body.scrollTop;        
                    }
            if (currX > midWindow+60)
                    {
                    var msgWidth = nContainer.clientWidth;
                    if (IE){nContainer.style.left = (currX-msgWidth-10+iL)+'px'}
                    else {nContainer.style.left = (currX-msgWidth-10)+'px'}
                    }
            else        {
                    if (IE){nContainer.style.left = (currX+10+iL)+'px'}
                    else {nContainer.style.left = (currX+10)+'px'}
                    }

            if (IE){nContainer.style.top = (currY+iV-(floatHeight/2)+70)+'px'}
            else {nContainer.style.top = (currY-(floatHeight/2)+70)+'px'}

    }        

    function hideImage(){

            while (nContainer.lastChild)
                    {nContainer.removeChild(nContainer.lastChild)}
            document.getElementById('isFloat').style.display = 'none';
    }

    function showImage(isImg,currItem,currCaption){

            document.getElementById('isFloat').style.display = 'inline';
            nIMG  = document.createElement('img');
            nContainer.appendChild(nIMG);
            nIMG.setAttribute('src',isImg);
            nIMG.setAttribute('width',floatWidth);
            nIMG.setAttribute('height',floatHeight);
            nCaption = document.createElement('div');
            nCaption.style.textAlign = "center";
            nCaption.style.backgroundColor = '#EAE3C6';
            nCaption.style.padding = '5px';
            nCaption.style.color = '#000000';
            nCaption.style.fontFamily = 'Sans-serif';
            nCaption.style.fontSize = '10pt';
            nCaption.style.borderTop = "1px solid black";
            nContainer.appendChild(nCaption);
            nCaption.innerHTML = currCaption;
            currItem.onmouseout=hideImage;
    }

    function getMidWindow(){

            if (document.documentElement && document.documentElement.scrollLeft || document.documentElement && document.documentElement.scrollTop)
                    {
                    midWindow = document.documentElement.clientWidth/2;
                    }
            else        {
                    midWindow = document.body.clientWidth/2;
                    }
    }

    function initFloatImg(){

            var nBody = document.getElementsByTagName('body')[0];
            var nDiv = document.createElement('div');
            nDiv.id = "isFloat";
            nDiv.style.position = "absolute";
            nDiv.style.top = "0px";
            nDiv.style.left = "0px";
            nDiv.style.border = "1px solid black";
            nDiv.style.padding = "5px";
            nDiv.style.backgroundColor = "#ffffff"
            nBody.appendChild(nDiv);
            nContainer = document.getElementById('isFloat');
            document.onmousemove = stayHome;
            hideImage();
            if (!IE){document.captureEvents(Event.mousemove)}
            getMidWindow();
    }

    onload=initFloatImg;
    onresize=getMidWindow; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:27:42.980

jquery 有一个非常好的和简单的方法来做fadeIn 和fadeOut，你可以查看他们的站点看看。

[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:25:49.643

如果你使用 jQuery UI，你可以使用效果来做你需要的事情。请参阅此链接：

[http://jqueryui.com/effect/](http://jqueryui.com/effect/)

例子：

```
jQuery('#someDiv').show('blind'); 
```

# log4j - log4j 从类中隔离某个级别

> ID：12862267
> 
> 赞同：3
> 
> 时间：2012-10-12T15:23:25.583
> 
> 标签：log4j, fileappender, log-level

我想问一些关于 log4j 的问题。我在activemq上有这个log4j的配置文件。我的问题是我想记录我拥有的每个类的所有 INFO 级别消息，但我想将“TransportConnection”类中的所有 DEBUG 级别消息记录到不同的文件中，同时只记录所有更大的消息或等于 WARN 级别，发送到 rootLogger。

此配置的问题是我从 rootLogger 中的“TransportConnection”类记录了 INFO 级别的消息。我只想将 WARN 及以上级别传递给 rootLogger。

我不想为“out”附加程序设置阈值，因为我想要来自其他类的 INFO 级别消息。

```
log4j.rootLogger=INFO,out

# Log these warnings
log4j.logger.org.apache.activemq.broker.BrokerRegistry=INFO
log4j.logger.org.apache.activemq.broker.TransportConnection=DEBUG,tc

# Standard logging
log4j.appender.out=org.apache.log4j.RollingFileAppender
log4j.appender.out.file=/var/lib/activemq/log/activemq.log
log4j.appender.out.maxFileSize=10240KB
log4j.appender.out.maxBackupIndex=100
log4j.appender.out.append=true
log4j.appender.out.layout=org.apache.log4j.PatternLayout
log4j.appender.out.layout.ConversionPattern=%d [%-15.15t] %-5p %-30.30c{1} - %m%n

# Transport Connections logging
log4j.appender.tc=org.apache.log4j.RollingFileAppender
log4j.appender.tc.file=/var/lib/activemq/log/tc.log
log4j.appender.tc.maxFileSize=10240KB
log4j.appender.tc.maxBackupIndex=100
log4j.appender.tc.append=true
log4j.appender.tc.layout=org.apache.log4j.PatternLayout
log4j.appender.tc.layout.ConversionPattern=%d [%t] %-5p %-30.30c{1} - %m%n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:55:30.517

您可以编写自己的自定义过滤器。我建议实现可能是这样的：

```
public class MinLevelForParticularClassFilter extends Filter {

    private boolean acceptOnMatch = false;
    private Level level;
    private String className;

    @Override
    public int decide(LoggingEvent event) {
        if (this.className != null && this.level != null) {
            if (event.getLocationInformation().getClassName().startsWith(className)) {
                // this is event for specified class
                if (!event.getLevel().isGreaterOrEqual(this.level)) {
                    // level of event is less than specified level
                    return Filter.DENY;
                }
            }
        }

        if (acceptOnMatch) {
            return Filter.ACCEPT;
        } else {
            return Filter.NEUTRAL;
        }
    }

    public boolean isAcceptOnMatch() { return acceptOnMatch; }
    public void setAcceptOnMatch(boolean acceptOnMatch) { this.acceptOnMatch = acceptOnMatch; }

    public Level getLevel() { return level; }
    public void setLevel(Level level) { this.level = level; }

    public String getClassName() { return className; }
    public void setClassName(String className) { this.className = className; }
} 
```

请注意，如果您将“className”变量更改为“packageName”变量，则特定包过滤器的实现将相同。

XML 中的 log4j 配置（因为属性文件中的配置不支持过滤器）：

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
    <appender name="out" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="activemq.log" /> 
        <param name="MaxFileSize" value="10240KB" />
        <param name="MaxBackupIndex" value="100" />
        <param name="Append" value="true" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%-15.15t] %-5p %-30.30c{1} - %m%n"/> 
        </layout>

        <!-- Apply filter to appender that's destined for root logger -->
        <filter class="com.foo.log4j.filters.MinLevelForParticularClassFilter">
            <param name="Level" value="WARN" />
            <param name="ClassName" value="org.apache.activemq.broker.TransportConnection" />
            <param name="AcceptOnMatch" value="true" />
        </filter>

    </appender>

    <appender name="tc" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="tc.log" /> 
        <param name="MaxFileSize" value="10240KB" />
        <param name="MaxBackupIndex" value="100" />
        <param name="Append" value="true" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %-30.30c{1} - %m%n"/> 
        </layout>
    </appender>

    <logger name="org.apache.activemq.broker.BrokerRegistry">
        <level value="INFO" />
    </logger>
    <logger name="org.apache.activemq.broker.TransportConnection">
        <level value="DEBUG" />
        <appender-ref ref="tc" />
    </logger>
    <root> 
        <priority value ="INFO" /> 
        <appender-ref ref="out" /> 
    </root> 
</log4j:configuration> 
```

# c++ - 现代闪屏

> ID：12862270
> 
> 赞同：3
> 
> 时间：2012-10-12T15:23:33.710
> 
> 标签：c++, winapi

当您启动 Microsoft Word 时，您知道在加载所有内容时会弹出一个没有窗口的小框吗？我怎么做？该`CreateWindow()`函数有一个`windowed`参数，但是当我发送一个参数时它所做的`false`只是使窗口全屏。有任何想法吗？

参考资料：

[MSDN 上的 CreateWindow 函数](http://msdn.microsoft.com/en-us/library/ms632679(VS.85).aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:26:50.577

你想要的是选择合适的[窗口样式](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600%28v=vs.85%29.aspx)。不要设置 WS_BORDER 或 WS_CAPTION。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:26:18.407

好的旧 CodeProject 有一些项目可以做到这一点，例如参见[http://www.codeproject.com/Articles/15523/Own-thread-Win32-splash-screen 。](http://www.codeproject.com/Articles/15523/Own-thread-Win32-splash-screen)

# if-statement - Tornado 中的 if...else 语句

> ID：12862279
> 
> 赞同：2
> 
> 时间：2012-10-12T15:24:03.643
> 
> 标签：if-statement, tornado

我有两个变量 'usrpermnet' 和 'usrpermdev'，它们的长度可以为 0 或不为 0。我想比较那些长度。我在龙卷风中写了这个

```
if len(usrpermdev) > 0
    usrperm = usrpermdev
else
    usrperm = usrpermnet 
```

但我有一个错误。

我必须写哪种方式？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:28:41.230

尝试使用这个： -

```
 {% if len(usrpermdev) > 0 %}
     usrperm = usrpermdev
  {% else %}
      usrperm = usrpermnet
  {% end %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T20:41:54.677

你错过了冒号：

```
if len(usrpermdev) > 0:
    usrperm = usrpermdev
else:
    usrperm = usrpermnet 
```

这与龙卷风无关；这是基本的 Python。您可能想看看[Python 教程](http://docs.python.org/tutorial/)。

# jquery - CSS / Jquery 时间轴 / 调度程序显示

> ID：12862285
> 
> 赞同：0
> 
> 时间：2012-10-12T15:24:10.217
> 
> 标签：jquery, html, css

我一直在尝试为预定活动构建网络显示。每个事件都有一个动态计算的宽度（基于事件持续时间）和左边距（基于开始时间）。每个事件也有一个高度，基于需要显示的内容。如果没有重叠事件将元素移动到包含 div 的顶部，我是否有任何简单的方法可以“向上移动所有内容”？

我尝试将每个事件放在一个行 div 中，这会导致大量的垂直事件堆栈，以及基于小时的列，这使我的事件重叠。

通常我在这里找到我的答案，第一次发布（因此，我不能发布图片）。我将根据需要提供任何澄清细节。这是开发页面的链接。

```
http://198.101.211.222/index.php/matrix/dayview/2012/10/16/237 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:42:51.640

您需要计算一种颜色的每个元素的左边缘位置和右边缘位置。然后当您放置元素时：将行号设置为 0。然后您必须查看同一行上的所有元素并检查当前元素的左边缘或右边缘是否在某人的边缘内。是这样，您将行号增加 2 并再次开始检查。如果没有找到同一行上的命中 - 将元素放在当前行值上

# qt - 如何从 Qt Creator 插件获取应用程序输出？

> ID：12862286
> 
> 赞同：1
> 
> 时间：2012-10-12T15:24:11.053
> 
> 标签：qt, qt-creator

我正在为 Qt Creator 编写一个插件，该插件将使用应用程序输出作为次要原因（数据的实时图形显示）。但是，我遇到了获取应用程序输出的问题。我不想完全窃取输出，只是复制它。但是，能够过滤调试器获得的内容会很好，但不是必需的。

如果您想知道，我会尽量避免修改现有插件，以便对 Qt Creator 的任何更新都不会发生冲突，并且需要为每个新版本打补丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:40:41.120

Creator 是一个开源项目，欢迎您的贡献:-) 那么您为什么不要求更改 Creator？最快的方法是编写一个实现所需接口的补丁，然后通过 codereview.qt-project.org 提交。

添加另一个实际使用这些接口的补丁会有所帮助，因为这样可以更容易地判断是否真的需要该功能，或者是否有更好的方法来实现它。

# unobtrusive-validation - 是否可以禁用/覆盖 ScriptResourceMapping 要求？

> ID：12862287
> 
> 赞同：2
> 
> 时间：2012-10-12T15:24:13.090
> 
> 标签：unobtrusive-validation, asp.net-4.5

我将 WebForms 项目升级到 .net 4.5，并收到此错误：

> WebForms UnobtrusiveValidationMode 需要 'jquery' 的 ScriptResourceMapping。请添加一个名为 jquery（区分大小写）的 ScriptResourceMapping。

我想启用 UnobtrusiveValidation，但我将 Combres 用于 Javascript 资源，所以我不希望 ScriptManager 再次尝试下载它。是否可以告诉 ScriptManager 相信我会加载它？换句话说，我想为“jquery”添加一个什么都不做的映射。显然不可能添加名称但没有路径的 ScriptResourceDefinition。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:47:44.607

据我所知，答案是否定的。

这个问题已在[http://connect.microsoft.com/VisualStudio/feedback/details/735928/in-asp-net-web-application-visual-basic-the-requiredfieldvalidator-doest-work](http://connect.microsoft.com/VisualStudio/feedback/details/735928/in-asp-net-web-application-visual-basic-the-requiredfieldvalidator-doest-work)和[http:// /forums.asp.net/t/1850831.aspx/1](http://forums.asp.net/t/1850831.aspx/1)没有答案。

作为解决此问题的快速而讨厌的解决方法，我在解决方案中添加了一个名为 DummyJQuery.js 的空文件，将以下代码放入 application_start：

```
 Dim jQuery As New ScriptResourceDefinition()
 jQuery.Path = "~/js/DummyJQuery.js"
 jQuery.DebugPath = "~/js/DummyJQuery.js"
 ScriptManager.ScriptResourceMapping.AddDefinition("jquery", jQuery) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:26:13.287

此处描述的答案：http: [//www.codeproject.com/Articles/465613/WebForms-UnobtrusiveValidationMode-requires-a](http://www.codeproject.com/Articles/465613/WebForms-UnobtrusiveValidationMode-requires-a)

# jquery-plugins - jquery 验证插件隐藏错误消息

> ID：12862288
> 
> 赞同：2
> 
> 时间：2012-10-12T15:24:20.580
> 
> 标签：jquery-plugins

我有一个带有单选按钮的基本表格。即使在单击“td”时检查收音机的“td”中，我也有一个 onclick。单击“td”时，错误消息不会隐藏。它仅在单击实际按钮时隐藏。这是我的代码。有任何想法吗？我将 jquery 文件存储在本地。

```
<html>
    <head>
        <script src="jquery-latest.js"></script>
        <script type="text/javascript" src="jquery.validate.js"></script>
    <script>
        $(document).ready(function(){
            $("#myform").validate({
            errorPlacement: function(error, element) {
                    error.appendTo(element.parent("td").prev("td") );
            },
            debug:true
        })
    });

    </script>
</head>

<body>
<form id="myform" action="/login" method="post">
<table border="1">
<tr>
    <td width="30%">Attribute 1<br /></td>
        <td width="10%" onclick="$(this).find('input:radio').attr('checked','checked');" /><INPUT  type="radio" id="22121GRID" name="SPGRID_1" value="5" class="required"  /></td>
        <td width="10%" onclick="$(this).find('input:radio').attr('checked','checked');" /><INPUT  type="radio" id="22121GRID" name="SPGRID_1" value="4" class="required"  /></td>
        <td width="10%" onclick="$(this).find('input:radio').attr('checked','checked');" /><INPUT  type="radio" id="22121GRID" name="SPGRID_1" value="3" class="required"  /></td>
        <td width="10%" onclick="$(this).find('input:radio').attr('checked','checked');" /><INPUT  type="radio" id="22121GRID" name="SPGRID_1" value="2" class="required"  /></td>
        <td width="10%" onclick="$(this).find('input:radio').attr('checked','checked');" /><INPUT  type="radio" id="22121GRID" name="SPGRID_1" value="1" class="required"  /></td>
</tr>
<tr><td><input type="submit" value="Submit" /></td></tr>
</table>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:33:42.817

由于您通过javascript更改检查，因此调用`.valid()`验证器的方法。

您可以使用以下

```
<td width="10%" onclick="$(this).find('input:radio').attr('checked','checked').valid();" />            <INPUT  type="radio" id="22121GRID" name="SPGRID_1" value="5" class="required"  /> </td> 
```

或者

```
$('td').click(function(){
$(this).find('radio').attr('checked','checked').valid();
}); 
```

# java - Android Java 致命异常 java.lang.NullPointerException

> ID：12862291
> 
> 赞同：4
> 
> 时间：2012-10-12T15:24:29.500
> 
> 标签：java, android, eclipse

我是 Android 新手，懂一点 JAVA，但我想学习，我一直在做教程。我想要做的想法如下：我有一个渲染菜单，例如：1\. BIRDS 2\. ROCKS 3\. PLANTS 当我按下 BIRDS 时，我想显示图片和一个小的描述。图片的 id 和我保存在 xml 中的描述。像这样：

```
<signs>
    <sign id="1_1" category="1">
        <name>desc1</name>
    </sign>
    <sign id="1_2" category="1">
        <name>desc2</name>
    </sign>
    <sign id="1_3_1" category="1">
        <name>desc3</name>
    </sign>
    <sign id="1_3_2" category="1">
        <name>desc4</name>
    </sign>
</signs> 
```

图片在drawables中像sign_1_1.png，sign_1_2.png。

我制作了画廊，它正在展示，描述和图像也是可见的。我在图片库 Selected image 上进行了该操作，以在 TextView 中显示相应的描述。但是当我点击我得到一个致命的例外：

```
E/AndroidRuntime(22141): FATAL EXCEPTION: main
E/AndroidRuntime(22141): java.lang.NullPointerException
E/AndroidRuntime(22141): at apcmag.examples.singleSignListItem$ImageAdapter.getView(singleSignListItem.java:117)
E/AndroidRuntime(22141):    at android.widget.Gallery.makeAndAddView(Gallery.java:849)
E/AndroidRuntime(22141): at android.widget.Gallery.fillToGalleryRightLtr(Gallery.java:803)
E/AndroidRuntime(22141):    at android.widget.Gallery.fillToGalleryRight(Gallery.java:747)
E/AndroidRuntime(22141):    at android.widget.Gallery.layout(Gallery.java:656)
E/AndroidRuntime(22141):    at android.widget.Gallery.onLayout(Gallery.java:351)
E/AndroidRuntime(22141):    at android.view.View.layout(View.java:13754)
E/AndroidRuntime(22141):    at android.view.ViewGroup.layout(ViewGroup.java:4362) 
```

代码是：

```
package apcmag.examples;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;

import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class singleSignListItem extends Activity
{

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        this.setContentView(R.layout.single_sign_gallery);

        Gallery g = (Gallery) findViewById(R.id.gallery);

        final Intent i = getIntent();
        final String REGEX = "/%%/";

        String product = i.getStringExtra("product");

        setTitle(product);

        g.setAdapter(new ImageAdapter(this));

        g.setOnItemSelectedListener(new OnItemSelectedListener() {
          public void onItemSelected(AdapterView<?> parent, View view, int position, long id)
            {
                String [] products = i.getStringExtra("product_text").split(REGEX);
                Toast.makeText(singleSignListItem.this, ""+position, Toast.LENGTH_SHORT).show();
                TextView show_intro = (TextView) findViewById(R.id.show_intro);
                show_intro.setText(""+products[position]);
            }

            public void onNothingSelected(AdapterView<?> parent)
            {
                // TODO Auto-generated method stub

            }
        });
    }

    public class ImageAdapter extends BaseAdapter {
        int mGalleryItemBackground;
        private Context mContext;

//        private Integer[] mImageIds = {
//                R.drawable.sign_1_1,
//                R.drawable.sign_1_1,
//                R.drawable.sign_1_1,
//                R.drawable.sign_1_1
//        };

        private Integer[] mImages = takePhotos();

        public Integer[] takePhotos (){
            Intent g = getIntent();
            String Reg = "/%%/";
            String Reg2 = "_%_";

            String dataList = g.getStringExtra("product_text");
            String [] datastring = dataList.split(Reg);

            Integer[] imageResource = new Integer[20];

            String[] dd = null;

            for(int k = 0; k<datastring.length;k++){
                dd = datastring[k].split(Reg2);

            String imagename = "sign_"+dd[0];

            imageResource[k] = getResources().getIdentifier(imagename, "drawable", getPackageName());

            }

            return imageResource;

        }

        public ImageAdapter(Context c) {
            mContext = c;
            TypedArray a = obtainStyledAttributes(R.styleable.HelloGallery);
            mGalleryItemBackground = a.getResourceId(
                    R.styleable.HelloGallery_android_galleryItemBackground, 0);
            a.recycle();
        }

        public int getCount() {
            return mImages.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView i = new ImageView(mContext);

            i.setImageResource(mImages[position]);
            i.setLayoutParams(new Gallery.LayoutParams(115, 200));
            i.setScaleType(ImageView.ScaleType.FIT_XY);
            i.setBackgroundResource(mGalleryItemBackground);

            return i;
        }
    }

} 
```

我几个小时都搞不清楚问题出在哪里，我有一些想法可能就在这里：

```
 i.setLayoutParams(new Gallery.LayoutParams(115, 200)); 
```

但我不太确定该怎么做

**更新**

其实我发现了问题：

在第 77 行，我正在初始化大小为 20 的 ImageResource

```
Integer[] imageResource = new Integer[20]; 
```

但拆分后的数据字符串只有 4 个元素

```
String [] datastring = dataList.split(Reg); 
```

所以 mImages 变量

```
 private Integer[] mImages = takePhotos(); 
```

将有 20 个元素，其中 16 个为空，最后

```
i.setImageResource(mImages[position]); 
```

它无法呈现空元素并且崩溃了。

所以我还有一个问题：

如果我不知道可能的 Integer[] 的大小，我该如何初始化并推入它的元素？与列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:30:28.557

其实我发现了问题：

在第 77 行，我正在初始化大小为 20 的 ImageResource

> 整数 [] 图像资源 = 新整数 [20]；

但拆分后的数据字符串只有 4 个元素

```
String [] datastring = dataList.split(Reg); 
```

所以 mImages 变量

```
 private Integer[] mImages = takePhotos(); 
```

将有 20 个元素，其中 16 个为空，最后

```
i.setImageResource(mImages[position]); 
```

它无法呈现空元素并且崩溃了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:34:57.090

public Object getItem(int position) { return position; } public long getItemId(int position) { return position; } check the return type . I think both will be int.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T15:39:45.880

此行有错误：

```
for(int k = 0; k<datastring.length;k++){
  dd = datastring[k].split(Reg2); 
```

我认为它会为你做这个工作：

```
dd = datastring.split(Reg2); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-12T15:28:53.160

我认为问题是 String[] dd = null; 代码。你必须初始化 dd 变量

# jquery - 在没有 AJAX 的情况下使用 jQuery 移动？

> ID：12862293
> 
> 赞同：1
> 
> 时间：2012-10-12T15:24:34.467
> 
> 标签：jquery, jquery-mobile

当我单击 jquery 移动驱动网站上的任何内部链接时，它会显示微调器并尝试通过 AJAX 加载页面。我想通过完全重新加载来加载每个页面。我可以通过将此属性添加到所有链接来实现这一点：

```
data-ajax="false" 
```

但我有很多链接，不想通过手动添加这些链接来弄乱 HTML。有没有一种方法可以在一个地方的 JS 中定义它并影响整个站点的所有链接？

我试过这个但没有运气：

```
$(document).bind("mobileinit", function(){
    $.extend($.mobile, {
        defaultTransition: 'none',
        ajaxEnabled: false,
        ajaxLinksEnabled: false
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:10:44.790

您可以将 data-ajax="false" 添加到包含 div 以影响所有链接。您需要在配置中将 ignoreContentEnabled 设置为 true。如果您有一个包含整个页面的 div，这很方便。

请参阅文档[http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)

“在 1.1 版中，我们添加了对在父容器上使用 data-ajax="false" 的支持，这允许您从 Ajax 导航系统中排除大量链接。这避免了向每个链接添加此属性的需要在容器中。要激活此功能，必须将 $.mobile.ignoreContentEnabled 设置为 true。请在使用和设置此选项之前检查配置默认值。

您还可以将默认设置为不允许任何 ajax 链接，该信息在这里[http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html)见 ajaxEnabled

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:26:34.003

你可以把类似的东西`$('a').attr('data-ajax', 'false');`。

# java - Android：如何知道 Commonsware 的 WakefulIntentService 是否正在运行？

> ID：12862298
> 
> 赞同：3
> 
> 时间：2012-10-12T15:24:55.017
> 
> 标签：java, android, intentservice, commonsware-cwac

我有一个简单的问题：我在我的应用程序中使用了 commonsware 的 wakefulintentservice 并且我得到了它的工作，但是我怎么知道 WakefulIntentService 是否仍在运行？例如，我可以在 WakefulIntentService 类中放置一个 onDestroy 并让它记录一些东西，还是有另一种方法可以查看 WakefulIntentService 是否正在运行？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:30:09.927

> 我在我的应用程序中使用了 commonsware 的 wakefulintentservice 并且我得到了它的工作，但是我怎么知道 WakefulIntentService 是否仍在运行？

如果您的意思是“它是否一直在运行”，您会看到它应该做的工作是否正在完成。

如果你的意思是“它现在正在运行”，我想检查你在 DDMS 中的线程。我从来没有真正担心过这个问题。

> 例如，我可以在 WakefulIntentService 类中放置一个 onDestroy 并让它记录一些东西吗

当然。

**更新**

此外，`adb shell dumpsys activity services`将列出活动的服务。我没有用 . 尝试过这个`WakefulIntentService`，但是 AFAIK 它应该出现在那里。

# git - msysgit git-am 无法应用它自己的 git 格式补丁序列

> ID：12862302
> 
> 赞同：4
> 
> 时间：2012-10-12T15:25:07.083
> 
> 标签：git, git-svn, patch, msysgit

我在 Windows 上使用*msysgit* git 在中央 svn 存储库上进行操作。我正在使用 git，因为我希望它是很棒的小型本地分支，用于所有内容并相互依赖。

我还需要经常从中央仓库更新，所以使用单独的 svn/git 不是一个选项。

问题是 - `git svn --help`（手册页）说从本地分支使用*master*分支（设置为从 svn 的 trunk 跟踪`git merge`）*不是*一个好主意，因为这会破坏聚会并且不再起作用。**`git svn dcommit`**

 **我知道这并不完全正确，`git merge`如果您从分支合并，该分支已根据*master*先前合并进行了适当的重新调整，您可以使用它，但我正在努力使其更安全并实际使用`git format-patch`and `git am`。我们正在使用代码审查，所以无论如何我都在制作补丁。我也知道`git cherry-pick`，但我只想`git am /reviewed/patches/dir/*`不实际回忆与此补丁相对应的提交（即不阅读补丁）。

那么，`git svn`和有什么问题`git am`？这很简单——`git am`因为一些非常困难的点是为提供的补丁执行*CRLF*到*LF*`git-mailsplit`转换（准确地说是这样做），如果不是变基的话。`git format-patch`也正在生产适当的（LF-ended）补丁。

由于我的 repo 主要是*CRLF*（并且应该保持如此），因此补丁显然由于错误的 EOL 而失败。将差异转换为*CRLF*并以某种方式`git am`阻止其转换也不起作用。如果任何文件被删除或删除，它将失败 -`git apply`会抱怨预期的 /dev/null （但他得到了`/dev/null^M`）。

如果我应用它`git am --ignore-space-change --ignore-whitespace`，它会将 LF 结尾直接提交给索引，这也很奇怪。我不知道它是否会保留过度提交到 svn (via `git svn dcommit`) 并检查它，我不想尝试。

当然，仍然可以尝试破解补丁以仅转换实际差异，但这对于简单的任务来说太多了。

所以，我想知道，真的没有既定的方法来生成补丁并将它们应用于同一系统上的同一 repo 吗？*msysgit*不能应用它自己的补丁只是感觉很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-12T10:52:01.200

```
git format-patch --ignore-space-change --ignore-whitespace

git am --keep-cr --ignore-whitespace 
```

这对我有帮助。如果您阅读本文，您可以更好地理解。**

# ruby-on-rails - 使用 xmpp4r_facebook 发送消息时出错

> ID：12862304
> 
> 赞同：2
> 
> 时间：2012-10-12T15:25:11.450
> 
> 标签：ruby-on-rails, ruby, facebook, facebook-graph-api, xmpp4r

我正在按照[http://dalibornasevic.com/posts/35-how-to-send-private-messages-with-facebook-api](http://dalibornasevic.com/posts/35-how-to-send-private-messages-with-facebook-api)中的说明向我的朋友发送消息，目前正在从命令行进行测试。以下是我正在使用的代码

```
require 'xmpp4r_facebook'

id = '<my facebook id>@chat.facebook.com'
to = '<my friend facebook id>@chat.facebook.com'
body = "hello, Im not spam!"
subject = 'message from ruby'
message = Jabber::Message.new to, body
message.subject = subject

client = Jabber::Client.new Jabber::JID.new(id)
client.connect
client.auth_sasl(Jabber::SASL::XFacebookPlatform.new(client, '<App ID>',   '<access token got from https://developers.facebook.com/tools/explorer>', 'App Secret'), nil) 
```

我得到错误

```
 RuntimeError: not-authorized
      from /Users/apple/.rvm/gems/ruby-1.9.3-p194/gems/xmpp4r_facebook-0.1.1/lib/xmpp4r_facebook.rb:103:in `auth'
      from /Users/apple/.rvm/gems/ruby-1.9.3-p194/gems/xmpp4r-0.5/lib/xmpp4r/client.rb:171:in `auth_sasl'
      from (irb):12
      from /Users/apple/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:54:07.207

听起来您没有`xmpp_login`像消息中所说的那样授予权限

> 未经授权

如果您拥有正确的权限，它应该可以工作，并且您应该得到类似于

```
<iq xmlns='jabber:client' type='result' id='2027'> ... </> 
```

[使用https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)检查您的访问令牌

# entity-framework - 从浏览器外的 Silverlight 访问数据

> ID：12862306
> 
> 赞同：0
> 
> 时间：2012-10-12T15:25:15.143
> 
> 标签：entity-framework, silverlight-5.0, out-of-browser

Silverlight在Out of Browser模式下离线运行时，能否通过ADO实体数据模型从位于本地磁盘的DataBase中获取Sql Server数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:52:50.880

由于 Silverlight 安全模型（以及 Silverlight 中不提供 AFAIK System.Data.dll）的限制，我认为实体框架不能在 Silverlight 中运行。通常人们使用 Silverlight 中的 WCF 数据服务客户端连接到公开数据库的数据服务。

# html - 为什么这张桌子看起来不整洁？

> ID：12862312
> 
> 赞同：2
> 
> 时间：2012-10-12T15:25:46.597
> 
> 标签：html, css, html-table

![合并了很多行和列的表](../Images/a5e998489e9ec6c74445ddc828ff9a87.png)

我希望基本单元格每边 20 像素。然后我希望«合并的单元格»（rowspan 或 colspan > 1）具有与它们覆盖的基本单元格匹配的大小。

为了实现这一点，我手动设置了这些合并单元格的宽度。但在某些配置中，它的行为很奇怪，如上图所示。

蓝色方块覆盖 2x2 单元格并且大小正确。但是绿色方块（以及所有其他大方块）是 5x2，应该和它的邻居一样大，108px。

为什么 chrome 会丢弃我强制的尺寸？（我没有测试其他浏览器）

你会在这里找到一个 jsFiddle：http: [//jsfiddle.net/kjshk/](http://jsfiddle.net/kjshk/)

HTML如下：

```
<table>
    <tbody>
        <tr>
            <td ></td>
            <td colspan="9" rowspan="1" style="width: 196px; height: 20px; "></td>
        </tr>
        <tr>
            <td  colspan="8" rowspan="1" style="width: 174px; height: 20px; "></td>
            <td ></td>
            <td ></td>
        </tr>
        <tr>
            <td ></td>
            <td colspan="7" rowspan="2" style="width: 152px; height: 42px; "></td>
            <td colspan="2" rowspan="2" style="width: 42px; height: 42px; background-color:blue "></td>
        </tr>
        <tr>
            <td ></td>
        </tr>
        <tr>
            <td colspan="5" rowspan="2" style="width: 108px; height: 42px; "></td>
            <td  colspan="5" rowspan="2" style="width: 108px; height: 42px; background-color:green "></td>
        </tr>
    </tbody>
</table>​ 
```

* * *

**编辑**：我更新了 jsFiddle 的外观，但有一个额外的行强制正确的大小 [http://jsfiddle.net/kjshk/11/](http://jsfiddle.net/kjshk/11/)

* * *

**编辑²**：我不能真正改变 HTML 结构，因为它是动态生成的（实际上有一个合并单元格的脚本）。所以我能做的就是风格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:33:42.827

如果你改变百分比：这有帮助吗？

```
<table
    <tbody>
        <tr>
            <td ></td>
            <td colspan="9" rowspan="1" style="width: 90%; height: 20px; "></td>
        </tr>
        <tr>
            <td  colspan="8" rowspan="1" style="width: 80%; height: 20px; "></td>
            <td ></td>
            <td ></td>
        </tr>
        <tr>
            <td ></td>
            <td colspan="7" rowspan="2" style="width: 70%; height: 42px; "></td>
            <td colspan="2" rowspan="2" style="width: 20%; height: 42px; background-color:blue "></td>
        </tr>
        <tr>
            <td ></td>
        </tr>
        <tr>
            <td colspan="5" rowspan="2" style="width: 50%; height: 42px; "></td>
            <td  colspan="5" rowspan="2" style="width: 50%; height: 42px; background-color:green "></td>
        </tr>
        <tr></tr>
    </tbody>
</table>

how it should look:
<table>
    <tbody>
        <tr>
            <td ></td>
            <td colspan="9" rowspan="1" style="width: 196px; height: 20px; "></td>
        </tr>
        <tr>
            <td  colspan="8" rowspan="1" style="width: 174px; height: 20px; "></td>
            <td ></td>
            <td ></td>
        </tr>
        <tr>
            <td ></td>
            <td colspan="7" rowspan="2" style="width: 152px; height: 42px; "></td>
            <td colspan="2" rowspan="2" style="width: 42px; height: 42px; background-color:blue "></td>
        </tr>
        <tr>
            <td ></td>
        </tr>
        <tr>
            <td colspan="5" rowspan="2" style="width: 108px; height: 42px; "></td>
            <td  colspan="5" rowspan="2" style="width: 108px; height: 42px; background-color:green "></td>
        </tr>
        <tr></tr>
        <tr>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:39:49.440

表格单元格中的宽度总是被解释为指导而不是规则。`table-layout:fixed`执行规则。

```
<table style="table-layout:fixed;">
    <colgroup>
        <col style="width: 20px" span="10" />
    </colgroup>
    <tbody>
        ...
    </tbody>
</table> 
```

# python - 在 Python 中实现机器学习算法的更好方法

> ID：12862313
> 
> 赞同：2
> 
> 时间：2012-10-12T15:25:46.953
> 
> 标签：python, machine-learning, artificial-intelligence

我正在做一些网络抓取。我遇到的一个问题是，我正在抓取的表格的列标题有时在它们的语言上有所不同，以至于我试图使用fuzzywuzzy 来检查它们的“接近度”

我的程序以标签列表开始。这些标签是我从网上刮下来的表格中的所有列标题。它还要求我将“规范化的列标题”分配给至少一些——这些是“学习”的基础

```
matched_labels_dict{label_1:value_1,label_2:value_2,label_3:value_1, . . .} 
```

字典显示 label_1 和 label_3 是同义词，label_2 不是它们的同义词，但可能是字典中其他标签的同义词

我还有一个 un_matched_labels 列表

```
un_matched_labels=[label_324,label_325,label_326, . . .] 
```

数字后缀只是占位符

我有一个函数，它使用[fuzzywuzzy](http://seatgeek.com/blog/dev/fuzzywuzzy-fuzzy-string-matching-in-python)生成一个分数，将un_matched_labels 中的每个标签与matched_labels_dict 中的标签进行比较。如果匹配的 max_score 大于某个预定级别（比如说 90），那么被测试的标签被添加到 match_labels_dict 并分配与它匹配的标签相同的值。因此，假设我在 un_matched_labels 中测试 label_424 并且与 label_3 进行比较时出现了 94 的最大匹配分数，然后我更新了matched_labels_dict

```
 matched_labels_dict{label_1:value_1,label_2:value_2,label_3:value_1, label_424:value_1\. . .} 
```

现在机器学习开始发挥作用，因为假设 label_324 与 label_424 的匹配分数为 91

但是对于所有其他以 value_1 作为其值（label_1 和 label_3）的标签的匹配分数低于我的截止值（在本例中为 90）。

label_324 直到 label_424 在matched_labels_dict 中才会被匹配。

由于标签是按顺序测试的，因此没有添加 label_324，因为在测试时 label_424 不在matched_labels_dict中（测试是按顺序进行的）。

为了处理这个问题，我重新运行匹配函数（在下面的代码块中称为 do_machine_learning）。

这里是 do_machine_learning 函数 all_labels 是标签列表，matched_label_dict 是已知标签值匹配的字典，格式如上

```
def do_machine_learning(all_labels,matched_labels_dict):
for test_label in all_labels:
    if test_label not in matched_labels_dict:
        temp_fuzzy_dict={label : fuzz.token_sort_ratio(label.upper(),test_label.upper()) for label in matched_labels_dict.keys()}
        fuzzy_dict={key : temp_fuzzy_dict[key] for key in temp_fuzzy_dict if temp_fuzzy_dict[key] > 91}
        try:
            max_value=max(fuzzy_dict.values())
            for label in fuzzy_dict:
                if fuzzy_dict[label]== max_value:
                    matched_labels_dict[test_label]=matched_labels_dict[label]
                    break
        except ValueError:
                    pass
return matched_labels_dict 
```

我想重新运行匹配函数（然后将 label_324 添加到字典中，因为它是与 label_424 的匹配分数），直到matched_labels_dictionary 在两次迭代之间的大小保持不变。它的大小将保持不变，因为没有找到更多匹配项。

这是我的做法 我任意将周期限制设置为 100

```
for number in range(1,100):

    print 'cycle', number, 'number_of_matches', len(matched_labels_dict)
    x=do_machine_learning(all_labels,matched_labels_dict)
    if len(x)==len_matched_labels:
        break
    else:
        len_matched_labels=len(x) 
```

do_machine_learning 函数用于将不匹配的标签与匹配的标签进行比较和评分。一旦 unmatched_labels 第一次通过它，matched_labels_dict 被返回，程序将匹配标签的数量与前一次迭代中匹配的标签数量进行比较。如果数量增加，则再次将标签发回以查看是否可以进行新的匹配。如果它在没有进行新匹配的情况下完成运行，则程序会跳出循环。我被要求设置我的 do_machine_learning 函数，但我认为这无关紧要，因为我的问题是如何以更 Python 的方式循环遍历上面的循环

所以问题是我如何更干净地设置这个迭代过程？

好吧，这个问题已经结束了，我真的不明白为什么，但我想我找到了一种更好 - 更清洁的方法来处理这个问题，至少它对我有用，我从内部调用函数，直到它的大小保持不变

```
def do_machine_learning(all_labels,matched_labels_dict, min_score):
    initial_size=len(matched_labels_dict)  # added this assignment
    for test_label in all_labels:
        if test_label not in matched_labels_dict:
            temp_fuzzy_dict={label :               fuzz.token_sort_ratio(label.upper(),test_label.upper()) for label in matched_labels_dict.keys()}
        fuzzy_dict={key : temp_fuzzy_dict[key] for key in temp_fuzzy_dict if temp_fuzzy_dict[key] > min_score}
        try:
            max_value=max(fuzzy_dict.values())
            for label in fuzzy_dict:
                if fuzzy_dict[label]== max_value:
                    matched_labels_dict[test_label]['NEW_LABEL'] = matched_labels_dict[label]['NEW_LABEL']
                    matched_labels_dict[test_label]['FUZZ_SCORE'] = max_value
                    matched_labels_dict[test_label]['BEST_MATCH'] = label
                    break
        except ValueError:
                    pass
    if len(matched_labels_dict)!=initial_size:           # added this loop
        do_machine_learning(all_labels,matched_labels_dict, min_score)
return matched_labels_dict 
```

通过这些细微的更改，我可以通过以下方式调用该函数

```
new_matched_labels=do_machine_learning(all_labels,matched_labels_dict) 
```

这些更改完全消除了对开头的循环的需要

```
for number in range(1,100): 
```

# php - 小型 Web 应用程序的架构/实现所需的建议

> ID：12862318
> 
> 赞同：0
> 
> 时间：2012-10-12T15:25:55.507
> 
> 标签：php, mysql, web-applications

我被要求建立一个网站，公司的员工（大约 20 人）可以登录并填写他们当前和过去（如果需要）一个月的工作时间表。员工当然应该只能看到自己的日程安排，但经理应该有权访问每个日程安排。我在网络开发方面经验很少，因此需要一个建议。我已经创建了一个 PHP/MySql 登录页面。怎么办？我该怎么做？非常感谢您提供一些架构或实施（如果您愿意的话）指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:31:47.600

我建议选择像 cakephp 或 symfony 这样的框架，这样可以避免一些错误。如果你想自己创作

首先决定满足您需求的数据库架构。

而不是尝试将每个表的crud功能作为php对象。

我认为这可以让你继续前进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:35:38.717

我大量参与了我们公司内部仪表板的设计，员工可以在其中登录并查看相关的公司指标。我们使用[CodeIgniter](http://ellislab.com/codeigniter)作为我们的框架，它运行*得非常好*！这是一个使用 MySQL 的 PHP 框架，我们已经在我们的服务器上安装了 PHP 和 MySQL。我们公司已经有一些人有过使用它的经验，因为它已经存在了几年，并且比最新最好的时尚框架更成熟。由于其[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)开发方法，它运行良好。[我们已使用Grocery CRUD](http://www.grocerycrud.com/)将其附加到我们的自制数据库中. 它具有处理用户身份验证、会话和安全性的插件。我们在这方面的工作效率非常高，我强烈推荐。请记住，这个框架是为想要创建*非常可定制*的东西的开发人员设计的。话虽如此，它提供了你需要的基本东西，但让你自己处理更高级别的东西。

您将需要设计您的数据库以满足您的实际限制。使用 MySQL，您可以创建一个反映用户及其职位的关系数据库。我们首先创建了一个[ER 图](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)，以帮助我们公司的高管可视化约束以及我们如何通过数据库对我们的业务进行建模，以便他们可以在设计阶段参与讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:44:01.920

我已经在 PHP / Mysql 中构建了类似的应用程序，并且可以说它是一个很好的平台，尽管像 Rails 这样的东西可能使用起来更快并且需要更少的微管理。正如 Wisdom 所说，使用框架来减少一些繁重的工作并确保您遵守良好的安全实践。

想到一些你需要的东西。

*   清楚您的数据库结构将是什么样子。尝试识别：a）您需要存储的所有信息（用户名？登录信息？“权限”级别以查看其他人的条目？），b）他们可以进入哪些表。（可以“命名” ”和“工作时间”放在同一张表中？如果它们是不同级别的分析，它们应该放在不同的表中吗？这两个信息是否以某种方式连接？如果是，我应该如何表示这种连接？）关系设计是你的朋友，特别是如果你正在构建一些以后可能会修改的东西。花点时间了解它的含义。
*   每个不同“类型”活动的页面（视图）将是一个很好的起点。所以有一个“让我看看我的日程安排”页面，其中包含指向“让我添加时间条目”页面和“让我编辑那个时间条目”页面的链接。我的经验是，努力使“查看”页面的代码尽可能*小且易于阅读*，这会促使您更好地规划代码结构。
*   您插入到查询字符串中的任何值都应进行清理。因此，搜索或选择值的查询应该始终通过“清理”结构过滤任何 PHP 变量：

    $query = sprintf("SELECT * FROM table1 WHERE identifier = %s", mysql_real_escape_string($id));

    而不是：

    $query = "SELECT * FROM table1 WHERE identifier = ".$id

    因为用户在搜索或在线插入字段中键入的任何文本，如果最终出现在您的查询中，都可以作为查询的一部分执行。然后，黑客可以使用它来使您的其他安全功能失效。

# java - 将 json 发布到 spring mvc 控制器

> ID：12862320
> 
> 赞同：5
> 
> 时间：2012-10-12T15:26:02.397
> 
> 标签：java, javascript, json, spring, spring-mvc

控制器签名（我也尝试过作为 requestbody ）：

```
@RequestMapping(value = "/Lame", method = RequestMethod.POST)
public
@ResponseBody
boolean getLame(@RequestParam String strToMatchA, @RequestParam String strToMatchB) {} 
```

这是我的 json ：

```
{
"strToMatchA": "EN",
 "strToMatchB": "lon"
} 
```

不工作，我收到错误：

```
org.springframework.web.bind.MissingServletRequestParameterException: Required String parameter 'strToMatchA' is not present 
```

从方法签名中删除第一个参数然后使其工作（该方法被正确调用），我应该做什么？

当我更改要注释的方法参数时，出现`@RequestBody`以下错误：

```
java.io.IOException: Stream closed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:17:50.887

您的 json 很好，但不是控制器签名。使用匹配 json 的设置器创建一个类。使用它作为参数而不是你的字符串。用 requestbody 注释它。它应该工作。

# perl - Perl：函数返回引用还是副本？

> ID：12862326
> 
> 赞同：7
> 
> 时间：2012-10-12T15:26:30.133
> 
> 标签：perl, function, return-type

我是 perl 的新手。所以这个问题可能听起来很幼稚。

我有以下两个功能

```
#This function will return the reference of the array
sub getFruits1
{
    my @fruits = ('apple', 'orange', 'grape');
    return \@fruits;
} 
```

但在以下情况下呢？

```
#How it returns?
sub getFruits2
{
    my @fruits = ('apple', 'orange', 'grape');
    return @fruits;
} 
```

将`getFruits2`返回一个引用并创建该数组的新副本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T15:29:19.460

`getFruits2`子例程返回一个*列表*，可以像这样将其分配给一个新数组

```
my @newfruits = getFruits2(); 
```

是的，它将生成数组中数据的副本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T15:28:17.400

`getFruits1`将返回对数组的引用。`\`创建一个引用。

`getFruits2`将返回 中的值列表`@fruits`。它不会返回参考。如果将返回值分配给数组，则只会获得数组的副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:50:31.110

`getFruits1`返回一个引用。不创建新数组。

`getFruits2`返回一个列表

Perl 引用的一个例子

```
#!/usr/bin/perl -w 
use strict;

my @array = ('a','b','c');
printf("[%s]\n",join('',@array));
my $ref=\@array;
${@{$ref}}[0]='x'; # Modifies @array using reference
printf("[%s]\n",join('',@array)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T16:42:07.813

sub 唯一可以返回的是标量列表。无法返回数组。

```
\@fruits 
```

评估为参考，所以

```
return \@fruits; 
```

返回一个参考。在列表上下文中，

```
@fruits 
```

计算为 的元素列表`@fruits`，因此

```
return @fruits; 
```

`@fruits`如果在列表上下文中评估子，则返回元素列表。

# iphone - iPad 中大量数据的崩溃问题

> ID：12862334
> 
> 赞同：0
> 
> 时间：2012-10-12T15:26:51.450
> 
> 标签：iphone, objective-c, ios, xcode

我正在开发通过 Web 服务接收大量数据（例如数组中的**30K字典）的应用程序。**我正在使用 JSON 工具包来解析大量数据。得到响应后，我会将这些数据存储到 plist 文件中（因为我想在离线模式下运行应用程序）。

之后，我使用 NSMutableArray（带有**30K**字典）访问这些数据。现在为了进一步计算，我正在使用这个数组并使用这个循环**7-8 次**计算来绘制图形。

```
//path = path from which i access the plist

NSMutableArray *array = [[NSMutableDictionary alloc] initWithContentsOfFile: path];

//where array contains about 30K dictionaries.

for(int i=0; i<[array count]; i++) {

    // some calculation formula
} 
```

执行上述循环后，相同的循环被调用 7-8 次。

由于内存问题，我从 plist 读取数据后，我的应用程序崩溃了。请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:43:02.710

由于您的问题与内存有关，您必须尽快释放内存。我假设您在 iOS 6.0 中使用 ARC。尝试在 @autoreleasepool 中使用循环，看看是否有什么不同。如果需要，您还可以使用嵌套的 @autoreleasepool。

```
for(int i=0; i<[array count]; i++) {
   @autoreleasepool {
       // calculation formula
    }
} 
```

老办法；

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
for(int i=0; i<[array count]; i++) {
       // calculation formula
}
[pool drain]; 
```

# postgresql - 在 playframework 中使用正则表达式获取数据

> ID：12862337
> 
> 赞同：0
> 
> 时间：2012-10-12T15:26:55.493
> 
> 标签：postgresql, scala, playframework-2.0

我想使用正则表达式从数据库表中获取数据。这就是我所做的：

```
def getDataRegExp(term: String): Seq[User] ={
    DB.withConnection(
      implicit connection =>
        SQL("select * from user where pseudo ~ '^{term}'").on(
        'term -> term
        ).as(User.simple *)
    )
  } 
```

但我没有得到任何结果。我做错了什么？

PS：我正在使用`PostgreSQL 9.1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:10:25.773

好吧，我成功地得到了结果。它给了我所有包含插入的用户`term`。我刚刚删除`'`了`^`周围的`{term}`. 这是代码。

```
def getDataRegExp(term: String): Seq[User] ={
    DB.withConnection(
      implicit connection =>
        SQL("select * from user where pseudo ~ {term}").on(
        'term -> term
        ).as(User.simple *)
    )
  } 
```

# wix - 在 WiX 3.6 的捆绑包/引导程序安装中，PhsyicalMemory 条件总是失败

> ID：12862338
> 
> 赞同：3
> 
> 时间：2012-10-12T15:26:56.343
> 
> 标签：wix, wix3, wix3.6

使用 bal 扩展时，PhysicalMemory 的条件总是失败。我可以尝试 PhysicalMemory >= 3500 and PhysicalMemory < 3500 and PhysicalMemory >= 0。无论如何，条件失败。

我想在开始安装包之前验证计算机有 4GB 的 RAM，并给他们一条自定义消息。

如果我将条件添加到 Bundle 标签，它可以工作，但总是说“指定的程序需要更新版本的 windows”。我不知道如何自定义此消息。

（附带说明：VersionNT > 6.0 条件正常工作）

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:netfx="http://schemas.microsoft.com/wix/NetFxExtension"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">
  <Bundle Version="1.0.0" UpgradeCode="XXXXXXXX-XXXX-XXXX-XXXX-AFD8530214A6" Name="My Bundle Name" DisableModify="yes">
    <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense">
      <bal:WixStandardBootstrapperApplication ThemeFile="RtfTheme.xml" LocalizationFile="RtfTheme.wxl" SuppressOptionsUI="yes" LicenseFile="license.rtf" LogoFile="logo.png"/>
    </BootstrapperApplicationRef>
    <bal:Condition Message="My Custom Message">
      PhysicalMemory >= 3500
    </bal:Condition> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:18:08.557

PhysicalMemory 不是内置的 Burn 变量。Burn 会复制许多（但不是全部）内置 MSI 属性。[这是一个完整的列表。](http://wix.sourceforge.net/manual-wix3/bundle_built_in_variables.htm)

# python - 让 python 进程回话 SIGUSR1 调用

> ID：12862344
> 
> 赞同：2
> 
> 时间：2012-10-12T15:27:25.397
> 
> 标签：python, signals, ipc

我有一个可以在后台运行很长时间的 python 脚本，并且正在尝试找到一种从中获取状态更新的方法。基本上我们正在考虑向它发送一个 SIGUSR1 信号，然后让它报告状态更新。

在 Python 中捕捉信号不是问题，有很多关于此的信息。

但是如何将信息返回给发起信号的进程呢？似乎没有办法通过接收进程找出启动进程的pid，这可以提供一种发回信息的方法。在这里一条回复消息就足够了（在“忙于上传；现在是 55%；将在这个时候完成”）；持续更新会很棒但没有必要。

我想出的是将此数据写入具有预定名称的临时文件 - 存在留下陈旧文件的问题，然后需要某种清理程序。但这听起来像一个黑客。有没有更好的可用？

正在运行的进程发出信号的方式无关紧要，不一定是`kill -SIGUSR1 pid`. 任何与之交流的方式都可以。只要可以从主进程运行后启动的新进程启动通信，可能以不同的用户身份运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:52:58.793

信号并非设计为允许传递数据的通用进程间通信机制。他们只能提供通知。目标进程的响应可能相当普遍（例如，将输出生成到发送方然后知道要查看的特定文件），但是将数据直接传递回发送方将需要不同的机制，例如管道，共享内存，消息队列等。还要注意，一般来说，接收信号的进程不能真正确定谁发送了信号，所以它也不知道在哪里发送响应。

# javascript - Galaxy S3 上的 Phonegap 忽略触摸事件

> ID：12862347
> 
> 赞同：3
> 
> 时间：2012-10-12T15:27:33.453
> 
> 标签：javascript, cordova, dom-events, samsung-mobile, galaxy

我有一个非常奇怪的问题。我有一个Phonegap 2.0 应用程序，基本上完成了。它可以在 iPhone 和 iPad 上运行，我在一天之内就将它移植到了 Android 上，并在我的 Galaxy S 上进行了测试。一切运行良好。然后我尝试在我全新的 S3 上运行它，但没有任何触摸事件起作用。点击有效，但触摸无效。

如果我运行此代码：

```
document.addEventListener('touchstart', function (e) { console.log('touch start')}, false);
document.addEventListener('click', function (e) { console.log('doc click'); }, false); 
```

...只有点击事件日志。如果我注释掉点击，除了系统点击我什么也得不到。

```
10-12 10:08:16.213: V/webview(2805): NO_FAST_DRAW = false
10-12 10:08:16.283: V/webview(2805):  singleCursorHandlerTouchEvent -getEditableSupport  FASLE 
```

真正奇怪的是，相同的 touchstart 在 S3 浏览器和 PhoneGap ChildBrowser 插件上都有效。只是不在应用程序的 webview 部分，而仅在 S3 上。

[更新]

而且它变得更奇怪了。如果我在内联 JavaScript 代码中绑定事件，例如这个

```
// Javascript stuff
document.addEventListener('touchstart', function (e) { alert('touch start')}, false);
// more JavaScript stuff 
```

它确实有效。但是，如果我在超时后设置它不会

```
setTimeout(function() {
    document.addEventListener('touchstart', function (e) { alert('touch start')}, false);
}, 2000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:00:11.377

我很难过地说，看起来冰淇淋三明治不支持触摸事件（http://stackoverflow.com/questions/11390902/webview-in-ics-touch-events-not-being-fired-properly） . 所以 iOS 支持 touch* 事件，Galaxy S 支持 touch* 和 mouse*，Ice Cream Sandwich (S3) 不支持 touch*。埃加兹。我希望我错了。

# ruby - Ruby Koans 202：为什么正确答案会给出语法错误？

> ID：12862349
> 
> 赞同：3
> 
> 时间：2012-10-12T15:27:40.263
> 
> 标签：ruby, class, syntax

我正在研究 Ruby Koans 中的 about_classes.rb 文件，并且通过“inside_a_method_self_refers_to_the_containing_object”测试遇到了障碍。这是代码：

```
class Dog7
  attr_reader :name

  def initialize(initial_name)
    @name = initial_name
  end

  def get_self
    self
  end

  def to_s
    __
  end

  def inspect
    "<Dog named '#{name}'>"
  end
end

def test_inside_a_method_self_refers_to_the_containing_object
  fido = Dog7.new("Fido")

  fidos_self = fido.get_self
  assert_equal <Dog named 'Fido'>, fidos_self
end 
```

所以，我试图将`assert_equal`评估的前半部分变为后半部分（fidos_self）。当我在 irb 中解决时，fidos_self 返回`<Dog named 'Fido'>`，但我不断收到该答案的语法错误。

我看过类似的帖子： [Ruby Koans：此返回值中的引号在哪里？](https://stackoverflow.com/questions/8226588/ruby-koans-where-are-the-quotes-in-this-return-value)，但他的解决方案（`fido`而不是`<Dog named 'Fido'>`）导致我的 rake 中止，说堆栈级别太深。

这让我发疯了。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:35:07.657

那不是有效的语法。仅仅因为某些东西在 IRB 中显示为特定的东西并不意味着它就是字面意思。该`inspect`方法经常被覆盖，在这种情况下，它被重新映射到自定义的东西。

你想要的是：

```
assert_equal "<Dog named 'Fido'>", fidos_self.inspect 
```

默认情况下，任何结果`irb`都通过调用来呈现`inspect`。

# algorithm - 从 101 到 10^60 的“跳跃”数字的数量？

> ID：12862354
> 
> 赞同：0
> 
> 时间：2012-10-12T15:27:58.937
> 
> 标签：algorithm

如果数字按升序排列，则假设数字为“升序”。示例：1223469。“降序”数字的数字按降序排列。示例：9844300。不是“升”或“降”的数字称为“跳跃”。从 1 到 100 的数字不是“跳跃”的。从 101 到 10^60 有多少个“跳跃”数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:48:32.123

这里有一个想法：不是计算跳跃的数字，而是计算升序和降序的数字。然后从所有数字中减去它们。

计算升序/降序数应该很容易 - 您可以使用基于要生成的剩余位数以及放置在最后一个位置的数字的动态编程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T16:00:01.850

我将描述如何计算升序数字，因为这样更容易。从那开始，您还可以计算递减的数字，然后从数字总数中减去合并的数量，以补偿重复项，如 Ivan 所示，或者设计一种更复杂的方法来仅直接计算跳跃数字。

## 不同的方法

想想按结束数字排序的数字。我们从 1 位长的数字开始，这将是我们的列表

```
1 // Amount of numbers ending with 1
1 // Amount of numbers ending with 2
1 // Amount of numbers ending with 3
1 // Amount of numbers ending with 4
1 // Amount of numbers ending with 5
1 // Amount of numbers ending with 6
1 // Amount of numbers ending with 7
1 // Amount of numbers ending with 8
1 // Amount of numbers ending with 9 
```

要构造以 6 结尾的两位数字，我们可以使用所有以 6 或以下结尾的数字

```
1 // Amount of numbers ending with 1 with 2 digits
2 // Amount of numbers ending with 2 with 2 digits
3 // Amount of numbers ending with 3 with 2 digits
4 // Amount of numbers ending with 4 with 2 digits
5 // Amount of numbers ending with 5 with 2 digits
6 // Amount of numbers ending with 6 with 2 digits
7 // Amount of numbers ending with 7 with 2 digits
8 // Amount of numbers ending with 8 with 2 digits
9 // Amount of numbers ending with 9 with 2 digits 
```

并排写这些，可以看到如何快速计算新值：

ya // y、a 和 x 之前已经计算过 x (a + x)

```
1 1  1   1 
1 2  3   4
1 3  6  10
1 4 10  20
1 5 15  35
1 6 21  56
1 7 28  84
1 8 36 120
1 9 45 165 
```

## 一个简单的 Python 程序

迭代一个这样的列，如果我们总是记住最后一次计算，我们可以直接产生新列的所有值。该`scan()`函数准确地抽象出获取一个元素的行为，并用它和最后一个结果进行一些计算。

```
def scan(f, state, it):
  for x in it:
    state = f(state, x)
    yield state 
```

生成下一列现在很简单：

```
new_column = list(scan(operator.add, 0, column)) 
```

为简单起见，我们使用单个数字作为起点：

```
first_row = [1]*9 
```

看到我们总是需要将新行反馈给函数，可以再次使用扫描来做到这一点：

```
def next_row(row):
    return list(scan(operator.add, 0, column))

def next_row_wrapper(row, _):
    return next_row(row)

>>> [list(x) for x in scan(next_row_wrapper, [1]*9, range(3))] # 3 iterations
[[1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 3, 6, 10, 15, 21, 28, 36, 45], [1, 4, 10, 20, 35, 56, 84, 120, 165]] 
```

如您所见，这给出了前三行与第一行不同。

由于我们想知道所有数字的总和，我们可以做到这一点。当我们进行 1 次迭代时，我们会得到所有升序的数字，直到 10^2，因此我们需要对所有数字进行 59 次迭代，直到 10^60：

```
>>> sum(sum(x) for x in scan(lambda x, _: next_row(x), [1]*9, range(59))) + 10
56672074888L 
```

对于递减的数字，它非常相似：

```
>>> sum(sum(x) for x in scan(lambda x, _: next_row(x), [1]*10, range(59))) + 10 - 58
396704524157L< 
```

## 旧方法

想想数字是如何结束的：

从 10 到 99，每个数字都有两位数。

有

*   以 1 结尾的 1
*   2 以 2 结尾
*   以 3 结尾的 3
*   4 以 4 结尾
*   5 以 5 结尾
*   6 以 6 结尾
*   以 7 结尾的 7
*   8 以 8 结尾
*   以 9 结尾的 9

所有这些数字都充当从 100 到 999 的数字的前缀。

例如，有三个以 结尾的数字`3`：

*   13
*   23
*   33

对于这三个数字中的每一个，我们可以创建七个升序数字：

*   133
*   134
*   135
*   136
*   137
*   138
*   139

很容易看出，这为七个可能的结束数字中的每一个添加了三个数字。

如果我们想扩展以 4 结尾的数字，过程将类似：目前，有 4 个以 . 结尾的数字`4`。因此，对于每个这样的数字，我们可以创建 6 个新的升序数字。这意味着，所有六个可能的结束数字都会有一个额外的 4。

如果你已经理解了我在这里写的所有内容，应该很容易概括并实现一个算法来计算所有这些数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T17:19:46.187

非跳跃数字：

*   `69 choose 9`（大小升序数≤60）
*   `+ 70 choose 10 - 60`（尺寸的递减数字≤60）
*   `- 60 * 9`（双重计数：所有数字相同）
*   `- 1`（双重计数：零）
*   `=`453376598563

（要获得跳跃数字，请从总数中减去：10 ^(60)）

计算数字的简单python程序：

```
# I know Python doesn't do tail call elimination, but it's a good habit.
def choose(n, k, num=1, denom=1):
  return num/denom if k == 0 else choose(n-1, k-1, num*n, denom*k)

def f(digits, base=10):
  return choose(digits+base-1, base-1) + choose(digits+base, base) - digits*base - 1 
```

递增数字：选择 9 个位置递增数字，从 . 开始`0`。

降序数字：假设我们有一个`10`用于左填充数字的数字。然后选择 10 个位置递减数字，从 开始`10`。然后删除所有选择的 10 个位置是连续的而不是在末尾的选项，这将对应于带有前导 0 的数字序列。

由于所有数字都相同的数字都将由降序和升序算法产生，因此我们必须将它们相减。

请注意，所有这些算法都认为数字 0 完全没有数字。此外，所有小于等于 100 的数字都是升序或降序（或两者兼有），因此无需担心它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:33:55.707

您将 321 视为下降还是将 000000321 视为跳跃？

提示答案：59 位升序数字的数量类似于（69 选择 10），因为您必须选择数字中的哪些点位于不同数字之间。

# html - 网址不一样

> ID：12862355
> 
> 赞同：1
> 
> 时间：2012-10-12T15:27:59.837
> 
> 标签：html, url, iis-7

我在下面的`<link>`and`<img>`标记中有两个不同的 URL：

```
...
<head id="Head1" runat="server">
<link rel="stylesheet" type="text/css" href="~/css/site.css" />
<title></title>
</head>
<body>
    <form id="form1" runat="server" >
    <div id="header">
    <img src="~/img/title.png" alt="ClearBox" />
... 
```

此 html 位于主文件中，并由多个页面使用。在这种特殊情况下，它被 /login 目录中的页面使用。

当它由 IIS 提供时，`<link>`url 变为`../css/site.css`正确指向 css 文件。

`<img>`网址仍然`~/img/title.png`存在。

主文件 css URL 适用于不同的页面，但图像 URL 保持不变。

如果我将`<img>`URL 更改为`img/title.png`，它在主页上正常工作，但在`/login`目录中没有。

关于如何让图像 url 像链接 url 一样工作的任何想法？

在更一般的意义上，我可以使用绝对 URL 解决所有这些问题，但我想保留相对 URL，而不是运行时构造的 URL，因为此应用程序将位于不同的站点上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:53:24.330

将 a 添加`runat="server"`到`img`元素中，事情将按您的预期工作。

`~`仅在服务器端控件中在页面上正确解释（`head`当涉及到路径时，元素中的项目在服务器端进行解析）。

# sql-server-2005 - 异步存储过程

> ID：12862356
> 
> 赞同：1
> 
> 时间：2012-10-12T15:28:00.173
> 
> 标签：sql-server-2005, stored-procedures, asynchronous

给定以下两个 SQL Server 2005 存储过程（仅示例）：

**过程A：**

```
ALTER PROCEDURE [dbo].[ProcA]
AS
BEGIN
    EXEC ProcB
END 
```

**过程B：**

```
ALTER PROCEDURE [dbo].[ProcB]
AS
BEGIN
    WAITFOR DELAY '000:00:10'
END 
```

当`ProcA`被执行时，预计它需要 10 秒，因为它正在等待`ProcB`完成。

是否可以**异步**调用，以便在`ProcA`调用后立即返回并且在返回之前不等待完成？`ProcB` **`ProcA``ProcB``ProcB`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:29:43.413

我找到[了这个答案](https://stackoverflow.com/a/1230171/1324019)和[随后的博客文章](http://rusanu.com/2009/08/05/asynchronous-procedure-execution)，我最终使用它来使我的存储过程异步运行。**

# apache - 如何使用 htaccess 删除 url 中的点

> ID：12862359
> 
> 赞同：0
> 
> 时间：2012-10-12T15:28:06.683
> 
> 标签：apache, .htaccess, url, mod-rewrite, url-rewriting

我网站中的某些 url 给出 403 - 访问禁止错误。经过几个小时的研究，我发现有“。” （点）在我的网址中导致 403 错误。我想使用 .htaccess 将所有点替换为连字符

例如，我想更改以下网址

[http://www.example.com/real-listings/0Bedrooms/commercial-land/TN/For-Sale/SELLING-FIVE-ACRE-LAN​​D./Property.html](http://www.example.com/real-listings/0Bedrooms/commercial-land/TN/For-Sale/SELLING-FIVE-ACRE-LAND./Property.html)

至

[http://www.example.com/real-listings/0Bedrooms/commercial-land/TN/For-Sale/SELLING-FIVE-ACRE-LAN​​D/Property.html](http://www.example.com/real-listings/0Bedrooms/commercial-land/TN/For-Sale/SELLING-FIVE-ACRE-LAND/Property.html)

请提供建议并感谢您的帮助。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:58:39.520

在文档根目录的 htaccess 文件中的任何规则*之前*添加这些规则：

```
RewriteEngine On
RewriteRule ^(.*)\./([^/]+)(\.html?)$ /$1/$2$3 [L,R=301] 
```

或者，如果您真的想用连字符替换那个点：

```
RewriteEngine On
RewriteRule ^(.*)\./([^/]+)(\.html?)$ /$1-/$2$3 [L,R=301] 
```

# mysql - MYSQL 从两个表中选择，但第二个表并不总是与第一个表有关系

> ID：12862360
> 
> 赞同：0
> 
> 时间：2012-10-12T15:28:08.540
> 
> 标签：mysql, join

所以我有两张表，一张包含用户信息（`Users`），另一张包含不显示的用户信息（`Settings`）。所以，我想做一个查询，显示`users`表中的所有用户，除了`settings`. 提前致谢。

**用户**

```
| id | name  |
===============
| 1  | adam  |  
| 2  | alex  |  
| 3  | andrew| 
```

**设置**

```
| id | name | value | user_id |
===============================  
| 1  | hide | 1     | 1       | 
```

我希望结果是：

```
| id | name  | 
==============
| 1  | alex  |  
| 2  | andrew| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:30:54.077

要获取一个表中存在的东西的列表，而不是另一个（相关）表中的列表，您可以使用着名的 LEFT JOIN-NULL 组合：

```
 SELECT u.id, u.name
     FROM users AS u
LEFT JOIN settings AS s
       ON s.user_id = u.id
    WHERE s.user_id IS NULL 
```

...或依赖子查询上的 NOT IN 子句：

```
 SELECT u.id, u.name
     FROM users AS u
    WHERE u.id NOT IN (SELECT user_id FROM settings) 
```

我通常使用第一个，但根据[这篇文章](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)，它们之间不应该有任何显着的速度差异。无论如何，我建议在您的特定数据库实例上对它们进行基准测试，然后选择最好的一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:31:46.243

就像是：

```
SELECT * FROM users WHERE id NOT IN (SELECT user_id FROM settings WHERE name="hide"); 
```

只会从用户表中获取不在设置名称等于“隐藏”的设置表中的用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:30:47.877

`SELECT * FROM users WHERE id NOT IN (SELECT * FROM settings)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:37:24.903

试试这个

`SELECT * FROM users WHERE id NOT IN (SELECT user_id FROM settings WHERE user_id='1');`

# ios - XCode 4.5 不支持 armv6 设备有什么后果？

> ID：12862365
> 
> 赞同：1
> 
> 时间：2012-10-12T15:28:36.477
> 
> 标签：ios, xcode

我一直在阅读有关 XCode 4.5 如何放弃对 armv6 的支持的信息，但尚未找到关于在使用 XCode 4.5 构建时可以支持哪些设备/操作系统方面的后果的明确声明。

我将我的应用程序定位在 4.n、5.n 和 6.n 设备上，但是在 4.n 上我遇到了运行时崩溃

`dyld: lazy symbol binding failed: Symbol not found: _objc_retainAutoreleasedReturnValu`e

这可能与不再支持 armv6 的 XCode 4.5 有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:37:17.910

Xcode 4.5 并且不支持 armv6 意味着您只能支持 iOS 4.3 及更高版本。这意味着您的应用程序将无法在原始 iPhone 或 iPhone 3G 上运行。它不能在第一代或第二代 iPod touch 上运行。

# c# - 如何根据 Label.Text 自动选择 DropDownList

> ID：12862366
> 
> 赞同：0
> 
> 时间：2012-10-12T15:28:38.850
> 
> 标签：c#, asp.net, gridview

我有一个`DropDownlist`，`GridView`只有在单击编辑时才应该可见。我已经绑定了`DropDownList`后面的代码。当我单击编辑时，该单元格的标签值应自动在`DropDownList`.

我试过的代码是：

```
protected void GridView3_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            SqlCommand cmd = new SqlCommand("SELECT Location_Name FROM Location_Table");
            DropDownList bind_drop = (e.Row.FindControl("DropList") as DropDownList);
            bind_drop.DataSource = this.ExecuteQuery(cmd, "SELECT");
            bind_drop.DataTextField = "Location_Name";
            bind_drop.DataValueField = "Location_Name";
            bind_drop.DataBind();

            string Loc_type = (e.Row.FindControl("id2") as Label).Text.Trim();               
            bind_drop.Items.FindByValue(Loc_type).Selected = true;
        }
    } 
```

当我运行代码时，它给出了一个异常错误**对象引用未**在上述代码的最后一行设置。查不出什么问题。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:36:03.980

您必须确保您的列表包含标签值。

```
var index = DropDownList1.Items.IndexOf(Loc_type );
if(index > 0)
{
  DropDownList1.SelectedIndex = index;
}
else
{
  Console.WriteLine("item does not exist");
} 
```

# ruby-on-rails - Rails 4 / ActiveRecord 查询时间得到改善？

> ID：12862368
> 
> 赞同：0
> 
> 时间：2012-10-12T15:28:47.063
> 
> 标签：ruby-on-rails

升级到 Rails 3 后，我发现这篇关于 Rails 3 性能的文章讨论了基准测试，显示 Rails 3 的速度要慢 2 倍，而且 Rails 3 的 ActiveRecord 是罪魁祸首：

[http://pulse.sportngin.com/news_article/show/86942](http://pulse.sportngin.com/news_article/show/86942)

有谁知道 Rails 4 是否会解决这个问题？甚至找到了 Rails 3 解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T08:49:25.650

那篇文章没有说明运行它的应用程序的任何细节。因此可能存在使 3 运行得更快的局部差异。而且您还应该为您的应用程序使用正确的服务器，而不仅仅是任何旧服务器。因此，我建议根据您的应用程序的特定需求运行您自己的基准测试。

# c - Unix 上的 C 文件编写程序卡在 508 个打开/关闭周期

> ID：12862371
> 
> 赞同：0
> 
> 时间：2012-10-12T15:28:52.650
> 
> 标签：c, unix, fopen, read-write

我用 C 编写了一个程序，将一系列字符写入文件——5 个字母数字，后跟`(char)(30)`一个 'record-delimiter' 字符，重复......没有换行符。该程序能够完美地循环，直到它达到第 508 次迭代——3048 个字符——然后死掉，说我无法访问该文件。

程序的结构需要每次编写此序列时关闭和重新打开文件（脚本是更大的伪数据库模拟模块的一部分），因此打开/写入/关闭过程有 508 个循环。 . 在我开始剖析数据库模块代码（其中有很多行，所以如果我可以避免它，我宁愿不必）之前，我想知道是否有人知道很少遇到的读/写限制Unix，或者在某个时间限制内文件中有 3048 个字符的问题，或者文件中有 508 个 {30} 的问题，或者类似的简单（但难以捕捉）。我尝试将读/写延迟几毫秒，以防它在关闭时意外打开，或者像那样绊倒自己，但没有雪茄。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:34:06.210

508 可疑地接近 512，这是打开文件数的合理默认值。键入命令`ulimit -a`并查看施加了哪些限制。在我的 Fedora 15 系统上，1024 是每个进程打开文件数的限制：

```
[wally@lenovotower ~]$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 22084
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 1024
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

如果您的是 512，请确保程序实际上正在关闭文件。在不显示一些代码的情况下，我们所能做的就是推测。

# c# - Quartz 中的奇怪错误：未找到 Quartz.XmlSerializers

> ID：12862374
> 
> 赞同：3
> 
> 时间：2012-10-12T15:29:05.480
> 
> 标签：c#, topshelf, quartz.net-2.0

我在 Quartz.net 中收到以下错误

> 显示名称为“Quartz.XmlSerializers”的程序集未能在 ID 为 1 的 AppDomain 的“LoadFrom”绑定上下文中加载。失败的原因是：System.IO.FileNotFoundException：无法加载文件或程序集“Quartz.XmlSerializers” , Version=2.0.1.100, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。

这很奇怪，因为 Quartz.XmlSerializers 在我使用的任何代码中都不存在。它不在 Quartz 源代码、我的代码和我能说的最好的依赖项中。它仅在我调试项目时发生，但在我下载 Quartz 2.0.1 源代码并从那里运行服务器时不会发生。

我使用 topshelf 作为服务安装库。

它发生在 Quartz 源的 XMLSchedulingDataProcessor.cs 的第 226 行的反序列化期间。

```
// deserialize as object model
System.Xml.Serialization.XmlSerializer xs = new System.Xml.Serialization.XmlSerializer(typeof(QuartzXmlConfiguration20)); 
```

解决这个问题的任何线索都会有所帮助，因为我被这个错误难住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T15:58:02.443

在使用 XmlSerialization 的应用程序中，当应用程序查找缓存的序列化程序集时，您可以在外部代码中获得第一次机会异常。[您可以在这个问题](https://stackoverflow.com/questions/1127431/xmlserializer-giving-filenotfoundexception-at-constructor)中找到更多信息。

# java - 在 64 位 Mac OS X 上使用 32 位 eclipse RCP 可以吗？

> ID：12862379
> 
> 赞同：4
> 
> 时间：2012-10-12T15:29:43.303
> 
> 标签：java, eclipse, eclipse-rcp

我在 Mac OS X 上遇到了 eclipse RCP juno 64 位崩溃，我在 StackExchange Mac 上发布了这个问题 - [https://apple.stackexchange.com/questions/67104/eclipse-rcp-juno-64-bit-crashes-on- mac-os-x](https://apple.stackexchange.com/questions/67104/eclipse-rcp-juno-64-bit-crashes-on-mac-os-x)。而且，我想我现在别无选择，只能使用 32 位版本。

*   在 64 位 OS (Lion) 和 64 位 java (java 1.7 sdk) 上使用 32 位 eclipse 是否可以？
*   代码兼容性如何？我可以使用从 32 位 eclipse 创建的 64 位 eclipse 打开工作区吗？
*   32位和64位eclipse有什么区别？或者，它们之间的优缺点是什么？为什么他们在 64 位世界中保留 32 位日食？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:43:55.583

您需要 32 位 JVM 才能使用 32 位 Eclipse，您需要 64 位 JVM 才能使用 64 位 Eclipse。

请注意，32 位 JVM 可以在 64 位操作系统上运行。我安装了 32 位和 64 位 JVM 的 Windows 7 64 位。我有时必须编辑 eclipse.ini 文件以确保选择了正确的 JVM。

同一版本的 32 位/64 位变体之间没有工作空间兼容性差异。32 位/64 位特定的本机位用于本机 UI 和文件系统集成。

如果您正在运行 64 位操作系统，您应该倾向于使用 64 位 JVM/Eclipse。这样做可以避免很多困扰 32 位安装的内存问题。例如，32 位 JVM/Eclipse 由于地址空间碎片而无法以 -Xmx1024m 启动的情况并不少见。

32 位 Eclipse 版本仍在生产，因为那里仍然安装了相当多的 32 位操作系统。

# redis - 在 Redis 中使用多个键和日期计数/查询事件

> ID：12862381
> 
> 赞同：4
> 
> 时间：2012-10-12T15:29:52.057
> 
> 标签：redis

我试图弄清楚如何在 Redis 中处理我的数据结构。我想要完成的是如何使用两个参数计算事件，然后按日期查询 Redis 以获取该数据。这是一个示例：事件带有两个不同的参数，我们称它们为站点和事件类型，以及事件发生的时间。从那里，我将需要能够查询 Redis 以了解在某个日期范围内发生了多少事件，并按站点和事件类型分组在一起。

这是一个简短的示例数据集：

```
Oct 3, 2012:
   site A / event A
   site A / event A
   Site B / event A

Oct 4, 2012:
   site B / event B
   site A / event A
   Site B / event A 
```

... 等等。

在我的查询中，我想知道该日期跨度内的事件总数，这将是五周的跨度。在上面的示例中，这将类似于：

```
 site A / event A ==> 3 events
   site B / event A ==> 2 events
   site B / event B ==> 1 event 
```

我已经研究过使用 Redis 的 Sorted Set 功能、Hashes 等。似乎 Sorted Set 是最好的方法，但使用 Redis 的 ZUNIONSTORE 命令查询数据似乎不太合适，因为这些事件将持续五周。这使得 ZUNIONSTORE 命令至少有 35 个参数。

有任何提示、想法、想法等吗？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T08:51:26.393

与典型的 RDBMS 或 MongoDB 不同，Redis 没有可以使用的丰富查询语言。有了这样的商店，您可以在商店中积累原始数据，然后您可以使用查询来计算统计信息。Redis 不适应这种模式。

使用 Redis，您应该即时计算统计数据并直接存储它们而不是原始数据。

例如，假设我们只对几周内的统计数据感兴趣，我将按如下方式构建数据：

*   因为所有的标准都是离散的，所以可以使用简单的散列对象来代替 zset

*   每周一个哈希对象

*   在每个散列对象中，每个站点、事件一个计数器。可选地，每个站点一个计数器，和/或每个事件一个计数器。

因此，当事件发生时，我会将以下命令通过管道传输到 Redis：

```
hincrby W32 site_A:event_A 1 
hincrby W32 site_A:* 1 
hincrby W32 *:event_A 1 
```

请注意，无需初始化这些计数器。如果它们不存在，HINCRBY 将创建它们（和散列对象）。

要检索一周的统计信息：

```
hgetall W32 
```

在统计数据中，您拥有每个站点/事件、仅每个站点、仅每个事件的计数器。

要检索几周的统计信息，请使用以下命令：

```
hgetall W32
hgetall W33
hgetall W34
hgetall W35
hgetall W36 
```

并在客户端执行聚合（如果语言支持关联数组，如地图、字典等，则非常简单......）。

# c++ - 包含自身的地图

> ID：12862385
> 
> 赞同：1
> 
> 时间：2012-10-12T15:30:24.450
> 
> 标签：c++, stl, c++11, std

目前我正在努力处理应该包含自己的地图。但是我不知道编译时嵌套的深度。

```
std::map<Key, std::map<Key, std::map<Key, std::map<Key, ...>>>> 
```

有没有办法在不无限重复自己的情况下实现这个目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T16:27:55.577

自引用数据结构的金锤是指针的使用。在您的特定情况下，要实现一棵树，您可以这样做：

```
template <typename Key, typename Value>
struct Node {
   Value data;
   std::map< Key, std::shared_ptr<Node> > child;
// ...
}; 
```

树中的每个节点都包含一个值和一组`Node`通过共享指针映射维护的子节点。`std::map`要求（根据标准）存储的类型是完整的，但只`shared_ptr`需要类型在创建时是完整的，这允许这种数据结构。普通的`Node*`也可以，但是您必须手动管理内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:48:27.110

一个简单的 xml 实现：Node 扩展了一个自身的列表

```
 class Node :
     public std::unordered_map< std::string, std::list< Node > >
  {
  public:

     Node( const std::string & tag_ ) : tag( tag_ ){}

     void print( const std::string & indent ) const
     {
        std::cout << indent << '<' << tag;
        if( ! attributes.empty())
        {
           for( std::unordered_map< std::string, std::string >::const_iterator it2 = attributes.begin(); it2 != attributes.end(); ++it2 )
           {
              std::cout << ' ' << it2->first << "=\"" << it2->second << "\" ";
           }
        }
        std::cout << '>' << std::endl;
        if( ! text.empty())
        {
           std::cout << indent << text << std::endl;
        }
        for( Node::const_iterator it1 = begin(); it1 != end(); ++it1 )
        {
           const std::list< Node > & lst = it1->second;
           for( std::list< Node >::const_iterator it2 = lst.begin(); it2 != lst.end(); ++it2 )
           {
              (*it2).print( indent + '\t' );
           }
        }
        std::cout << indent << "</" << tag << '>' << std::endl;
     }

     std::string                                    tag;
     std::string                                    text;
     std::unordered_map< std::string, std::string > attributes;
  };

  int _tmain(int argc, _TCHAR* argv[])
  {
     Node title( "title" );
     title.text = "Title of the html page";

     Node head( "head" );
     head["title"].push_back( title );

     Node html( "html" );
     html["head"].push_back( head );

     Node body( "body" );
     body.attributes["bgcolor"] = "#F0F0F0";
     Node p1( "p" );
     p1.text = "Creativity and imagination are limitless.";
     body["p"].push_back( p1 );
     Node p2( "p" );
     p2.text = "Don't listen to the annoying guys who say your projects are dreams";
     body["p"].push_back( p2 );
     html["body"].push_back( body );

     html.print( "" );

     /* Result:
     <html>
             <head>
                     <title>
                     Title of the html page
                     </title>
             </head>
             <body bgcolor="#F0F0F0" >
                     <p>
                     Creativity and imagination are limitless.
                     </p>
                     <p>
                     Don't listen to the annoying guys who say your projects are dreams
                     </p>
             </body>
     </html>
     */
      return 0;
  } 
```

由于根本没有定义虚拟方法，因此不需要虚拟析构函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:58:04.247

我不认为您可以在 C++ 中以完全类型安全的方式编写实际类型，因为实例化模板时使用的所有类型在实例化模板时必须是完整的，而您基本上需要做的就是类似：

```
typedef boost::variant<Value, std::map<Key, ExtendedValue> > ExtendedValue;
typedef std::map<Key, ExtendedValue> MyMap; 
```

这会导致模板依赖关系中的递归：为了实例化`std::map`，`ExtendedValue`必须是完整的，但为了实例化`ExtendedValue`，`std::map`必须是完整的。

您应该能够使用以下方法创建类型安全性较低的版本：

```
typedef std::map<Key, boost::any> MyMap; 
```

只要您放入地图的所有内容都具有类型`Value`or `MyMap`，这应该可以工作。（我在 Java 中做过类似的事情，映射类型是`Object`.）

或者，您可以映射到包含指向映射的指针的 boost::variant，而不是映射本身。但是，除非您将地图包装在一个类中，否则即使这样也很难命名。您可以轻松地前向声明一个类，并使用指向它的指针，但是在至少知道模板中使用的类型之前，您不能声明模板的实例化。因此，您必须编写如下内容：

```
class MyMap;
typedef boost::variant<Value, MyMap*> ExtendedValue;
class MyMap : private std::map<Key, ExtendedValue>
{
public:
    using ...;
}; 
```

由于您必须使用指针，因此无论如何这可能是要走的路；然后，您可以包装您需要的成员函数，以确保正确的成员管理。（在这种情况下，类似的函数`operator[]`可能必须返回一个代理，以便您可以拦截写入并进行分配。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:52:46.423

缺少代数数据类型，递归变体可以满足您的需求：

```
using data_type = boost::make_recursive_variant<
    Value
    , std::map<Key, boost::recursive_variant_>
>::type; 
```

[LWS 上的演示](http://liveworkspace.org/code/3fea84270bfa739ff575262d65bb408f)。

请注意，这允许在运行时才知道“形状”（换句话说，递归深度）的值。

虽然还有其他方法可以使用 Boost.Variant 声明和使用递归类型，但我建议您[查看文档](http://www.boost.org/doc/libs/1_51_0/doc/html/variant/tutorial.html#variant.tutorial.recursive)以找出最适合您的情况的方法。

（特别是通过使用`std::map<Value, data_type>`作为顶级类型而不是`data_type`它本身，我禁止叶子，即形状为 的值`Value`。但这只是为了方便使用 的`std::initializer_list`构造函数`std::map`。）

# c++ - C++ 中树数据结构的实际使用示例？

> ID：12862387
> 
> 赞同：0
> 
> 时间：2012-10-12T15:30:45.417
> 
> 标签：c++, c

当我在学校的时候，我们有一个任务是实现一个 2-3 树。我这样做并构建了以下 2-3 树[https://github.com/awm086/2-3-tree/blob/master/2_3_tree.cpp](https://github.com/awm086/2-3-tree/blob/master/2_3_tree.cpp)。

现在我回顾并尝试更新我的 C++ 知识，我不禁想知道，我如何在现实生活中的示例中使用这种数据结构。我希望能够编写一个可以利用这种数据结构的程序。所以我想我要的是一个使用树数据结构的现实生活示例（足够简单，我可以实现）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:33:50.310

例如，树用于[std::map](http://www.cplusplus.com/reference/stl/map/)之类的关联容器中，因为它们提供了非常快速的查找、插入和删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:38:30.883

从 2-3 树的维基百科页面，

> 2-3棵树是AA树的等距，这意味着它们是等效的数据结构。换句话说，对于每2-3棵树，至少存在一棵数据元素顺序相同的AA树。

和（来自 AA 树）

> 计算机科学中的 AA 树是一种平衡树，用于有效地存储和检索有序数据。

最后，

> AA树的性能相当于红黑树的性能。虽然 AA 树比红黑树进行更多的旋转，但更简单的算法往往更快，所有这些都可以平衡以产生相似的性能。红黑树的性能比 AA 树更一致，但 AA 树往往更平坦，这导致搜索时间稍快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:37:16.470

你的意思是为什么使用树 - 或者为什么使用 2-3 树？

树可让您在添加新数据时存储有序的数据集，而无需（大量）重新排序

对 2-3 棵树进行了优化，以免它们变得不平衡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:40:37.220

树数据结构在很多地方都大量使用，您可以执行以下操作。

*   `Data base designing`

您可以创建自己的数据库来存储基于某个值的数据，假设 BST（二叉搜索树）然后您可以选择越来越小的值，并根据这些值将数据存储在树节点中。

*   `Creating file system`

这是树木大量使用的区域，因此您可以尝试这些。

# php - Symfony2 & Doctrine：创建自定义 SQL 查询

> ID：12862389
> 
> 赞同：24
> 
> 时间：2012-10-12T15:30:52.743
> 
> 标签：php, sql, symfony, doctrine

如何使用 Doctrine 在 Symfony2 中创建自定义 SQL 查询？或者没有教义，我不在乎。

不像这样工作：

```
 $em = $this->getDoctrine()->getEntityManager();
    $em->createQuery($sql);
    $em->execute(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-10-12T15:37:33.947

您可以直接从实体管理器获取 Connection 对象，并通过它直接运行 SQL 查询：

```
$em = $this->getDoctrine()->getManager(); // ...or getEntityManager() prior to Symfony 2.1
$connection = $em->getConnection();
$statement = $connection->prepare("SELECT something FROM somethingelse WHERE id = :id");
$statement->bindValue('id', 123);
$statement->execute();
$results = $statement->fetchAll(); 
```

但是，除非真的有必要，否则我建议不要这样做...... Doctrine 的 DQL 几乎可以处理您可能需要的任何查询。

官方文档：[https ://www.doctrine-project.org/projects/doctrine-dbal/en/2.9/reference/data-retrieval-and-manipulation.html](https://www.doctrine-project.org/projects/doctrine-dbal/en/2.9/reference/data-retrieval-and-manipulation.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-11-17T22:02:53.770

您可以执行此代码，它可以工作：

```
$em = $this->getDoctrine()->getEntityManager();
$result= $em->createQuery($sql)->getResult(); 
```

# javascript - Jquery addClass 在影子框中不起作用

> ID：12862390
> 
> 赞同：0
> 
> 时间：2012-10-12T15:30:52.890
> 
> 标签：javascript, jquery, shadowbox

我需要向影子框中的 div 添加一个类，我正在使用 jQuery 来执行此操作。

```
 jQuery("#all_records #"+id).addClass("selectedDiv"); 
```

在这种情况下，我通常会检查我是否调用了正确的 div，在这种情况下，事实证明我是正确的。但不幸的是，它永远不会将类添加到 div 中。

```
 <div id="all_records">
 <div id="50157186" class="records_dealer_activation" onclick="select_customer(50157186);">
 </div>
 </div>

function select_customer(id){

        jQuery('#sb-player #choosen_customer_activation_duplicate').prepend('<div class="overlay">             <div class="modalprogress">                 <div class="theprogress"> <img class="image_load"  src="<?php echo base_url();?>images/progress_bar.gif" alt="loadanimation" /></div>             </div>         </div> ');

            jQuery("#sb-player #choosen_customer_activation_duplicate").load("<?php echo site_url().'/'.$main_controller;?>"+"/load_show_selected_customer_activation/?customerID="+id+"&type=duplicate");

            if(jQuery("#all_records > div").hasClass("selectedDiv"))
            {
                //THIS IS WORKING
                jQuery("#all_records > div").removeClass("selectedDiv");
            }
            //NOT WORKING
            //alert(jQuery("#sb-player #all_records #"+id).html());
            //document.getElementById(id).className += "selectedDiv";
            jQuery("#all_records #"+id).addClass("selectedDiv");

    } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:16:49.967

你能发布你的 javacript 函数吗，顺便说一句，这对我有用：

```
<script type="text/javascript">
    function select_customer(id){
        jQuery("#" +id).addClass("selectedDiv");
    }
</script>
<div id="all_records">
 <div id="50157186" class="records_dealer_activation" onclick="select_customer(50157186);">
 Click me
 </div>
 </div> 
```

# php - 将数据从 mysql 库回显到页面

> ID：12862393
> 
> 赞同：0
> 
> 时间：2012-10-12T15:30:53.513
> 
> 标签：php, mysql

我有这个查询：

```
$query = "SELECT ads.*,
       trafficsource.name AS trafficsource,
       placement.name AS placement,
       advertiser.name AS advertiser,
       country.name AS country
       FROM ads
           JOIN trafficsource ON ads.trafficsourceId = trafficsource.id
           JOIN placement ON ads.placementId = placement.id
           JOIN advertiser ON ads.advertiserId = advertiser.id
           JOIN country ON ads.countryId = country.id
       WHERE advertiserId = '$advertiser_id'"; 
```

和广告表

```
ads Table
      ad_id PK
      size
      price
      trafficsourceId FK
      placementId FK
      advertiserId FK
      countryId FK 
```

为了获取我正在使用的数据

```
$result = mysql_query($query) or die('Invalid query: ' . mysql_error());
    while ($row = mysql_fetch_assoc($result)) {

} 
```

我无法弄清楚我需要如何打印页面，以便它看起来不像行，但还需要例如交通源名称的 id。我想做这样的事情：

**编辑：**

```
<div id="adscontent">
    <h1>Advertiser:</h1> Advertiser name
    <h2>Traffic Sources:</h2> Company1, Company2, Company 3
    <h2>Placements:</h2> Like: Newspaper, radio, website, bla bla
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:44:33.333

您将需要使用打印输出，但我认为这样的事情会起作用：

```
$results = array();
while ($row = mysql_fetch_assoc($result)) {
    $results[$row['advertiser']]['countries'][]      = $row['country'];
    $results[$row['advertiser']]['trafficsources'][] = $row['trafficsource'];
    $results[$row['advertiser']]['placements'][]     = $row['placement'];
}

// And now print the data
foreach ($results as $arvertiser => $data)
{
    echo "<h1>{$advertiser}</h1>";

    // Print Placements
    echo "Placements: " . implode(", ", $data['placements']) . '<br />;

    // Print Countries
    echo "Countries: " . implode(", ", $data['countries']) . '<br />;

    // Print Placements
    echo "Traffic Sources: " . implode(", ", $data['trafficsources']) . '<br />;

} 
```

**编辑**：如果您需要添加 ID，您需要将您的选择更改为：

```
$query = "SELECT ads.*,
       trafficsource.name AS trafficsource,
       trafficsource.id AS trafficsourse_id,
       placement.name AS placement,
       placement.id AS placement_id,
       advertiser.name AS advertiser,
       advertiser.id AS advertiser_id,
       country.name AS country
       country.id AS country_id
       FROM ads
           JOIN trafficsource ON ads.trafficsourceId = trafficsource.id
           JOIN placement ON ads.placementId = placement.id
           JOIN advertiser ON ads.advertiserId = advertiser.id
           JOIN country ON ads.countryId = country.id
       WHERE advertiserId = '$advertiser_id'"; 
```

从那时起，您可以将这些信息包含在 $results 数组中，如下所示：

```
$results[$row['advertiser']['countries'] = array(
                                               'id'    => $row['country_id'], 
                                               'value' => $row['country')
                                           ); 
```

并从那里打印出你需要的任何东西。

# android - 单击通知触发的活动

> ID：12862394
> 
> 赞同：0
> 
> 时间：2012-10-12T15:30:56.100
> 
> 标签：android, android-intent, notifications

从 a `Service`，我触发 a `Notification`，单击时必须启动`Activity`. 为此，我使用以下代码：

```
 notification=new Notification(icone,title,System.currentTimeMillis());
    intent=new Intent(getApplicationContext(),myActivity.class);
    intent.putExtra("org.mypackage.name",true);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    pendingIntent=PendingIntent.getActivity(getApplicationContext(),0,intent,PendingIntent.FLAG_ONE_SHOT);        notification.setLatestEventInfo(getApplicationContext(),title,"Message",pendingIntent);
    notification.flags|=Notification.FLAG_AUTO_CANCEL;
     ((NotificationManager)contexte.getSystemService(Context.NOTIFICATION_SERVICE)).notify("label,0,notification); 
```

当我单击 时`Notification`，`Activity`正确启动了。但它`Intent`不包含与 line 添加的额外布尔值`intent.putExtra("org.mypackage.name",true);`。

有谁知道这种行为？

我可以补充一点，我使用的是 Android 4。

提前感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:35:33.250

[这篇文章](https://stackoverflow.com/questions/4340431/how-can-i-correctly-pass-unique-extras-to-a-pending-intent)说，如果你不设置`Action`你`Intent`的额外内容将不会被传递。所以你应该试试。

# knockout.js - 淘汰赛映射性能问题

> ID：12862400
> 
> 赞同：2
> 
> 时间：2012-10-12T15:31:17.133
> 
> 标签：knockout.js, knockout-mapping-plugin

> **可能重复：**
> [在半大型数据集下，Knockout.js 速度非常慢](https://stackoverflow.com/questions/9709374/knockout-js-incredibly-slow-under-semi-large-datasets)

我的模型中有以下事件，如果我只有少量记录，它可以正常工作，但如果我有几十条记录，IE 会抱怨我的脚本运行速度太慢。

```
 self.getTrades = function () {

    $.ajax({

        type: "GET",
        cache: false,
        url: "/_vti_bin/DBOrderService/DBOrderService.svc/GetTradesByDateSource?format=json&traddate=" + self.selectedDate() + "&source=" + self.selectedSource(),
        success: function (data, textStatus, jqXHR) {
            if (data.requeststatus.code === 1) {
                var statusId = SP.UI.Status.addStatus(data.requeststatus.message);
                SP.UI.Status.setStatusPriColor(statusId, 'red');
                return;
            }
           debugger;
           ko.mapping.fromJS({ trades: data.trades }, mappings, self); //too slow, events are firing as items are added
            self.selectedTrade(null);
        },
        error: ajaxError
    });
}; 
```

我认为这是因为映射正在为添加的每一行触发更改通知，所以我想将新行“批量”复制到我的模型中。

我试过了

```
 var temptrades = ko.mapping.fromJS(data.trades, mappings);
 self.trades=temptrades(); 
```

和

```
self.trades(temtrades); 
```

和

```
self.trades(temptrades(); 
```

但他们都破坏了我的模型。将 ko.mapping 创建的可观察数组一次复制到我的模型中的正确方法是什么。ko.mapping 上是否有选项可以防止触发事件直到结束？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:29:09.140

```
 ko.mapping.fromJS({ trades: data.trades }, mappings, self); //too slow, events are firing as items are added 
```

你完全正确。事件在添加项目时触发

请参阅：[Knockout.js 性能问题 #2 - 操作 observableArrays](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)

> 更好的模式是获取对我们底层数组的引用，推送到它，然后调用 .valueHasMutated()。现在，我们的订阅者只会收到一个通知，表明数组已更改。

另外，看看[这个答案](https://stackoverflow.com/a/9709431/109941)。

将 [mapping] 和 [observable array update] 分成两个步骤可能会有所帮助。

# mysql - 如果任何组合匹配，MySQL 将显示结果

> ID：12862404
> 
> 赞同：1
> 
> 时间：2012-10-12T15:31:33.653
> 
> 标签：mysql, sql

假设用户有一个搜索表单，他可以在其中搜索属性。假设他选择：

```
地点：ABC
价格范围：100万-500万
卧室数量范围：5 - 12
状态 : XYZ
县 : PQR
类别：移动网络运营商
```

匹配他选择的所有字段以从数据库中产生结果的机会非常小。所以`AND`在`WHERE`这里使用条件似乎并不有效。我想要的是——

1.  如果所有选择都匹配，那么没有问题显示结果
2.  如果位置、价格范围、状态匹配，则也显示结果
3.  如果位置、卧室数量、类别、状态匹配，则也显示结果
4.  依此类推....如果任何组合匹配，则显示结果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:37:59.033

如何过滤表中与任何搜索词匹配的记录并按匹配词数的降序对结果进行排序：

```
SELECT   *,
         (Location = 'ABC')
       + (Price BETWEEN 1000000 AND 5000000)
       + (Bedrooms BETWEEN 5 AND 12)
       + (State = 'XYZ')
       + (County = 'PQR')
       + (Category = 'MNO')
           AS relevance
FROM     my_table
WHERE    (Location = 'ABC')
      OR (Price BETWEEN 1000000 AND 5000000)
      OR (Bedrooms BETWEEN 5 AND 12)
      OR (State = 'XYZ')
      OR (County = 'PQR')
      OR (Category = 'MNO')
HAVING   relevance >= ?   -- specify the minimum number of matching terms here
ORDER BY relevance DESC
LIMIT    ?                -- specify the maximum number of matching records here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T15:33:59.723

您可能希望在 WHERE 子句中设置多个条件

```
WHERE (Location AND price AND Bedrooms AND State AND County AND Category)
OR (Location AND Price AND State)
OR (Location AND Bedrooms AND Category AND State)
OR (...)
... 
```

这允许您希望有效的任何数据组合返回数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T15:51:00.620

类似于 eggyals 解决方案，但只是带回您关心的行。未经测试，请原谅任何错别字：-

```
SELECT Sub2.*
FROM (SELECT MAX(
CASE WHEN Location = 'ABC' THEN 1 ELSE 0 END +
CASE WHEN Price BETWEEN 1000000 AND 5000000 THEN 1 ELSE 0 END +
CASE WHEN Bedrooms BETWEEN 5 AND 12 THEN 1 ELSE 0 END +
CASE WHEN State = 'XYZ' THEN 1 ELSE 0 END +
CASE WHEN County = 'PQR' THEN 1 ELSE 0 END +
CASE WHEN Category = 'MNO' THEN 1 ELSE 0 END) AS MatchCount
FROM     my_table a
WHERE    (Location = 'ABC')
      OR (Price BETWEEN 1000000 AND 5000000)
      OR (Bedrooms BETWEEN 5 AND 12)
      OR (State = 'XYZ')
      OR (County = 'PQR')
      OR (Category = 'MNO'))Sub1
INNER JOIN (SELECT a.*,
CASE WHEN Location = 'ABC' THEN 1 ELSE 0 END +
CASE WHEN Price BETWEEN 1000000 AND 5000000 THEN 1 ELSE 0 END +
CASE WHEN Bedrooms BETWEEN 5 AND 12 THEN 1 ELSE 0 END +
CASE WHEN State = 'XYZ' THEN 1 ELSE 0 END +
CASE WHEN County = 'PQR' THEN 1 ELSE 0 END +
CASE WHEN Category = 'MNO' THEN 1 ELSE 0 END AS MatchCount
FROM     my_table a
WHERE    (Location = 'ABC')
      OR (Price BETWEEN 1000000 AND 5000000)
      OR (Bedrooms BETWEEN 5 AND 12)
      OR (State = 'XYZ')
      OR (County = 'PQR')
      OR (Category = 'MNO')) Sub2
ON Sub1.MatchCount = Sub2.MatchCount 
```

# c# - I18N C# 应用程序

> ID：12862407
> 
> 赞同：3
> 
> 时间：2012-10-12T15:31:42.140
> 
> 标签：c#, wpf, visual-studio-2010, localization, internationalization

我有一个 C# 应用程序，我想对它进行 I18N 处理。我正在使用 Visual Studio 2010。

我得到了一些资源文件，在几个项目中，它们只包含文本。
例如：
  Project1
    Strings.resx
  Project2
    Strings.resx
  Project3
    Strings.resx

假设我想要法语翻译，所以每个项目都会有 Strings.fr.resx。我需要请一个不是程序员也没有VS的人来做翻译。
我该怎么做呢？
我可以使用任何工具（内置或第三方）吗？

例如，将资源文件转换成某种可读格式，翻译后转换回资源文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:40:44.397

你很幸运；.NET 内置了广泛的本地化。您可以在此处找到它的在线文档：[全球化和本地化 .NET Framework 应用程序](http://msdn.microsoft.com/en-us/library/h6270d0z.aspx)

要回答有关将资源文件转换为可读格式的具体问题，您可能需要查看Visual Studio 或 windows sdk 附带的[Resgen.exe（资源文件生成器） 。](http://msdn.microsoft.com/en-us/library/ccec7sz1.aspx)

# jquery - 有没有办法可以简化这个选择器

> ID：12862414
> 
> 赞同：3
> 
> 时间：2012-10-12T15:31:59.037
> 
> 标签：jquery

我有以下内容：

```
$("#article").on('click', 
    'a[href^="/C"], a[href^="/Java"], a[href^="/T"]', function (event) { 
```

这可以简化为不重复“href”这么多次。我可以使用其他类型的正则表达式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:35:00.067

最好的选择是提供所有三个锚标签`a single class Name`..

```
$("#article").on('click', 'a.planguages', function (event) { 
```

或者这三个通用的任何其他选择器..

否则，您无法删除`href`在上下文中看起来对锚标记唯一的 as。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:41:53.183

至少让那一项工作

```
$("#article").on("click", 'a[href^="/C"]', 'a[href^="/Java"]', 'a[href^="/T"]', "function(event){}") 
```

# css - 如何在同一页面上添加多个链接样式？

> ID：12862415
> 
> 赞同：0
> 
> 时间：2012-10-12T15:32:00.767
> 
> 标签：css, hyperlink, dreamweaver

我在一个页面上有两个超链接。我对“link1”（白色文本/红色翻转）上的 css 很满意，但是我想为“link2”设置不同的样式。

我为此部分创建了一个单独的 css，并设法将其着色为绿色，但我无法摆脱红色的翻转效果？

有谁知道如何覆盖“link2”上的红色翻转效果？

[http://www.signport.co.uk/test/testsize3.html](http://www.signport.co.uk/test/testsize3.html)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:33:42.883

对两个不同的链接使用两个不同的类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:35:38.970

为悬停属性添加 CSS 规则。

这是一个向您展示的小提琴：http: [//jsfiddle.net/6cLJ8/](http://jsfiddle.net/6cLJ8/)

导致您的问题的代码（在您的 CSS 中）是：

```
a:hover {
    background-color: #f00;
} 
```

覆盖它：

```
.readmoretext a:hover {
    background: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:54:30.657

您的样式表存在一些问题：

首先，您正在使用 this `.readmoretext A`。锚标记的正确 CSS 选择器是小写的“a”，因此需要将其更正为`.readmoretext a`.

完成后，添加`background-color: transparent;`到悬停规则以删除红色背景。

最后，`color`悬停规则有两个属性。样式表级联，正如其名称所示。由于只会`color`应用最后一条规则，因此第一个规则已过时。

# c# - 获取 WPF 项目的项目名称

> ID：12862416
> 
> 赞同：8
> 
> 时间：2012-10-12T15:32:02.240
> 
> 标签：c#, wpf, system.reflection

我正在编写我的第一个 WPF 应用程序，并且我正在尝试获取项目的名称，以便可以输出它。但是，使用

```
Assembly.GetEntryAssembly().GetName() 
```

或者

```
Assembly.GetExecutingAssembly().GetName() 
```

让我得到名称和版本号（即 DataPusher，Version=2.0.466.16967）。

有没有办法只获得程序集名称？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T15:37:09.717

```
string name = Assembly.GetEntryAssembly().GetName().Name; 
```

或者

```
string name = Assembly.GetExecutingAssembly().GetName().Name; 
```

或者，您可以`Assembly`从程序集中的任何已知类型中获取对象：

```
Assembly assy = typeof({class name here}).Assembly; 
```

这也允许另一个选项仅获取名称：

```
string name = typeof({class name here}).Assembly.GetName().Name; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T15:37:22.307

```
Assembly.GetExecutingAssembly().GetName().Name; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-12T18:14:10.567

Application.ResourceAssembly.FullName 将阻止您也必须导入 System.Reflection。

# javascript - JavaScript IE 焦点 setTimeout 不适用于复选框

> ID：12862417
> 
> 赞同：0
> 
> 时间：2012-10-12T15:32:11.513
> 
> 标签：javascript, internet-explorer, focus

我正在尝试使用 setTimeout 解决方法解决已知的“JavaScript focus() 在 IE 中不起作用”问题。但是，当从复选框的 onchange 事件处理程序调用的函数中调用它时，它不起作用。

换句话说：

```
<input type="checkbox" id="TheCheckbox"
       onchange="theCheckboxChanged()" />Check Here

function theCheckboxChanged()
{
    setTimeout(function () { document.getElementById("anotherElement").focus(); }
               , 100);
} 
```

是的，调用时存在“anotherElement”——事实上，它的工作原理与 Firefox 中编写的一样。

如果复选框的格式为：

```
<input type="checkbox" id="TheCheckbox"
       onchange="theCheckboxChanged()">Check Here</input> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:55:50.120

输入元素是一个空标签，它不包含内容。这就是为什么

```
<input type="checkbox" id="TheCheckbox" onchange="theCheckboxChanged()">Check Here</input> 
```

不起作用。

您应该使用标签

```
<input type="checkbox" id="TheCheckbox" onchange="theCheckboxChanged()"/><label for="TheCheckbox">Check Here</label> 
```

怪癖模式的问题是[点击事件不会触发 onchange](http://webbugtrack.blogspot.com/2007/11/bug-193-onchange-does-not-fire-properly.html)。将其更改为 onclick，它将神奇地开始工作。

代码在没有超时的情况下可以很好地聚焦元素。[例子](http://jsfiddle.net/RP3bk/1/)

# jquery - 数据属性中的正则表达式——jquery

> ID：12862423
> 
> 赞同：8
> 
> 时间：2012-10-12T15:32:23.157
> 
> 标签：jquery, regex, custom-data-attribute

我有当前的html：

```
<input id="dynamic1" /* other */ data-group-animal="y1,y2" />
<input id="dynamic2" /* other */ data-group-vegetable="y3,y4" /> 
```

这些是通过 ajax 发送数据时可以一起使用或不使用的独立 div。

现在，我有一个选择是同时使用这两个字段，我需要`data-value`根据一些表单选项来检索这两个字段。数据属性不同（用于不同目的——我可以发送或不发送所有组或单独发送）

所以我想做：

`$('input').data('group*')`但它不起作用，然后我意识到我需要一个正则表达式。

我可以使用数据属性的正则表达式吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-12T15:42:23.263

如果您更改属性，则可以使用选择器。

[http://jsfiddle.net/kvJVM/1/](http://jsfiddle.net/kvJVM/1/)

因此，您可以改为使用`data-group-type`and 查询：

```
<input id="dynamic1" data-group-type="animal" data-group="y1,y2" />
<input id="dynamic2" data-group-type="vegetable" data-group="y3,y4" />​ 
```

一些示例查询

```
$('input[data-group]') // all

$('input[data-group-type^="animal"]') // starts with 'animal'
$('input[data-group-type*="l"]') // contains 'l'
$('input[data-group-type!="animal"]') // not 'animal' 
```

还有其他的选择器：[http](http://api.jquery.com/category/selectors/) ://api.jquery.com/category/selectors/ ​​​​​​​​​</p>

# arrays - Excel 在将单个值汇总到 SUMIF 公式中之前对其进行四舍五入

> ID：12862424
> 
> 赞同：0
> 
> 时间：2012-10-12T15:32:23.950
> 
> 标签：arrays, excel, formula, rounding, sumifs

我正在使用 Excel 2010 中的表格，我需要能够在列中显示一个值，该值显示满足两个条件的每个值的范围之和。我还需要在求和之前对每个值进行舍入。我见过人们在求和之前使用数组公式对每个值进行独立舍入，但我没有看到如何使用 sumifs 语句来做到这一点。

我的公式如下所示：

```
 =sumifs(pData[premium],pdata[Pol],[@[Pol]],pdata[LineNum],[@[LineNum]]) 
```

现在..我不想对所有内容的总和进行四舍五入，我希望在求和之前对所有内容进行四舍五入。本质上，对于满足 sumif 标准的每个值，在求和之前都应该向上或向下舍入。

`=Round(sumifs(pData[premium],pdata[Pol],[@[Pol]],pdata[LineNum],[@[LineNum]]),0)`总和，通常相差几个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:38:32.370

而不是 a `SUMIF`，这对您的情况有用吗？正如@nutsch 指出的那样，这可以安排如下，不需要作为数组公式输入：

```
=SUMPRODUCT(($A$1:$A$12="A")*($B$1:$B$12="B")*ROUND($C$1:$C$12,0)) 
```

这会找到 A 列 =“A”且 B 列 =“B”的值，然后返回 C 列中的舍入数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:41:28.953

**更新：** 在这种情况下，我更喜欢使用数组公式：

```
=SUM(IF(pdata[Pol]=[@[Pol]],IF(pdata[LineNum]=[@[LineNum]],ROUND(pData[premium],1)))) 
```

然后`Ctrl`+ `Shift`+`Enter`

# java - Java RCP - 无法将文本动态设置为 SWT 标签控件

> ID：12862429
> 
> 赞同：1
> 
> 时间：2012-10-12T15:32:49.427
> 
> 标签：java, eclipse-rcp, rcp

在我们的 rcp 应用程序的一个窗口中，我需要在创建窗口后动态设置标签文本。

创建窗口时，我会创建标签控件，但那时我不会设置文本。用户在窗口上选择一个按钮后，我想在按钮的选择侦听器方法中设置标签的文本。在按钮的选择侦听器方法中将文本设置为标签后，我无法在窗口上看到文本。

为什么在侦听器方法中设置标签文本时看不到窗口上的标签文本？是因为窗口已经创建了吗？

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:34:33.733

调用 后，标签的大小未更新`setText()`。尝试在包含标签控件的位置`parent.layout()`之后调用。`setText()``parent``Composite`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:27:39.723

我想这与您如何布局标签有关。设置文本后`Label`，重新布局或调整其边界。

# android - 从自定义对话框视图膨胀时，EditText 为空

> ID：12862432
> 
> 赞同：0
> 
> 时间：2012-10-12T15:32:57.850
> 
> 标签：android, view, android-alertdialog, layout-inflater

我正在尝试从 EditText 获取文本，但我已经注销了 EditText 并且它为空。我试图从自定义视图中对其进行充气。我充气不正确吗？

我知道 prompsView 是我的自定义 AlertDialog 视图，其中是我的 EditText。也许我应该在充气时传入 prompsView，只是不知道该怎么做。

```
public void showPasswordDialogBox(){

        LayoutInflater li = LayoutInflater.from(NfcscannerActivity.this);
        View promptsView = li.inflate(R.layout.passwordpromptdialogboxlayout, null);

        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                NfcscannerActivity.this);

        // set prompts.xml to alertdialog builder
        alertDialogBuilder.setView(promptsView);

        // set dialog message
        alertDialogBuilder
            .setCancelable(false)
            .setPositiveButton("OK",
              new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    EditText passwordPin = (EditText)findViewById(R.id.passwordprompttextview);
                    Log.e(TAG, "edittext is null ? " + passwordPin);
                    String passPin = passwordPin.getText().toString();
                    Log.e(TAG, "password from edittext = " + passPin);

                    Cursor c = nfcscannerapplication.loginValidate.queryAllFromCarer();
                    if(c != null){
                        c.moveToLast();
                        String passPinFromDB =  c.getString(c
                                .getColumnIndex(LoginValidate.C_PASSWORD));

                        if (passPin.trim().equalsIgnoreCase(passPinFromDB)){

                            Log.e(TAG, "passwords match");
                            DateTime now = new DateTime();
                            DateTimeFormatter fmt = DateTimeFormat.forPattern("d-MMM-Y");
                            String formattedNow = fmt.print(now);
                            String[] params = new String[]{carerID, formattedNow}; 
                            AsyncGetRota agr = new AsyncGetRota();
                            agr.execute(params);

                        }else{
                            Toast.makeText(NfcscannerActivity.this,
                                    "Please check Password/Pin",
                                    Toast.LENGTH_LONG).show();
                            showPasswordDialogBox();
                        }

                    }else{
                        Log.e(TAG, "cursor null while trying to verify password in showPasswordDialogBox() ");
                    }

                }
              })
            .setNegativeButton("Cancel",
              new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                dialog.cancel();
                }
              });

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:36:26.197

尝试：

```
EditText passwordPin = (EditText) promptsView.findViewById(R.id.passwordprompttextview); 
```

# html - 如何仅显示 iframe 的垂直滚动条？

> ID：12862433
> 
> 赞同：3
> 
> 时间：2012-10-12T15:33:02.510
> 
> 标签：html, iframe, scroll

以下 html 代码不显示垂直滚动条。为什么 ？

```
 <style>
        #mapIframe{
            min-height:300px;
            overflow:auto !important;
            direction:rtl  !important;
            overflow-x:hidden   !important;
            overflow-y:scroll   !important;
            height:100%; //optional, but it can't hurt.
        }
    </style>

<iframe id="mapIframe" src="aurl" width="300" height="800" frameBorder="0">Browser not compatible.</iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:35:25.273

摆脱`scrolling="no"`或将其更改为`yes`.

# asp.net - 为什么我需要在内联 ASP 中的函数名前面包含一个空白字符串才能对其进行评估？

> ID：12862435
> 
> 赞同：0
> 
> 时间：2012-10-12T15:33:08.993
> 
> 标签：asp.net, vb.net

我正在尝试基于`Request.QueryString`变量设置我的 css 主题。我用于选择要使用的 Css 主题的代码在函数中，但是该函数被呈现为输出，而不是被评估并呈现输出。

使用`<%= GetCssTheme() %>`使其呈现为

```
<link href="Content/<%= GetCssTheme() %>.css" rel="Stylesheet"> 
```

但是，如果我使用`<%= "" + GetCssTheme() %>`它会正确呈现为

```
<link href="Content/ThemeA.css" rel="Stylesheet"> 
```

这是一个说明问题的小示例：

```
<%@ Page Language="vb" %>

<script language="vbscript" runat="server">
    Public Function GetCssTheme() As String
        Select Case Request.QueryString("SomeValue")
            Case 2
                Return "ThemeB"
            Case 3
                Return "ThemeC"
            Case Else
                Return "ThemeA"
        End Select
    End Function
</script>

<html>
<head runat="server">
    <link href="Content/<%= GetCssTheme() %>.css" rel="Stylesheet" />
</head>
<body>
    Test
</body>
</html> 
```

为什么我需要在我的函数名前面指定一个空白字符串才能使其工作？

我也尝试过其他各种方法：

*   使用单引号代替双引号

*   使用`<%= GetCssTheme().ToString() %>`

*   使用`<% Response.Write(GetCssTheme()) %>`

*   使用

```
<%
    Dim s as String
    s = GetCssTheme()
    Response.Write(s)
%> 
```

所有这些都错误地呈现 ASP.Net 代码本身，而不是对其进行评估并输出结果。

我尝试过的唯一真正有效的方法是使用内联代码而不是调用函数，或者在函数调用中添加一个空白字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:40:47.520

问题是因为你的 head 标签上的 runat="server" 。如果你把它拿走，代码就可以正常工作。这似乎是一个老问题......

这个 URL 显示了这个问题，就像我们的对话一直在这个问题上一样，但没有原因。

[http://geekswithblogs.net/mnf/archive/2007/11/14/code-render-blocks-not-always-work-inside-server-controls.aspx](http://geekswithblogs.net/mnf/archive/2007/11/14/code-render-blocks-not-always-work-inside-server-controls.aspx)

因此，如果您的 head 标签上不需要 runat="server"，这将解决问题......或者，如果您这样做，您可以始终将 LINK 标签放在不理想的正文开头.

我会继续看，但我认为这要么是其他功能的副作用，要么是 ASP.NET 中的错误。

**更新：**

我发现this other SO question指定了原因。- [头部标签中的内联代码 - ASP.NET](https://stackoverflow.com/questions/8104268/inline-code-in-head-tag-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:48:08.437

基本上发生的事情是 HREF 中的内容是一个字符串，而 GetCssTheme() 就像一个变量。把它想象成当你在代码中做的时候：

```
Dim s as String = "Some text " & Variable & " more text" 
```

# sql-server - SQL Server 函数将工作日添加到日期

> ID：12862436
> 
> 赞同：4
> 
> 时间：2012-10-12T15:33:19.677
> 
> 标签：sql-server, date

我已经看到许多关于如何创建一个 SQL Server 函数的帖子，该函数将给一个日期添加给定的工作日数。但是，他们都没有完全按照我需要的方式计算。我们有一个当前在代码中完成的函数，但我想转移到本机 SQL Server 函数（供存储过程和查询中使用）。在我们开始评估仓储费用之前，我们会给客户 5 个工作日来收集货物。5 个工作日不包括周末和节假日（我们有一个包含节假日日期的表格）。这里的诀窍是我需要在 5 个工作日后立即获取日期，无论是周末还是节假日。所以我需要这个函数来返回最后一个工作日，而不是之后的第一个工作日。因此，例如：

```
Oct 20th (Sat) plus 5 working days = Oct 26th (Fri)
Oct 21st (Sun) plus 5 working days = Oct 26th (Fri)
Oct 22nd (Mon) plus 5 working days = Oct 29th (Mon)
May 19th (Sat) plus 5 working days with May 21st a holiday = May 28th 
```

5 个工作日是当前的分配，但将来可能会改变，因此需要将工作日数作为参数。此外，该函数可用于相当大的数据集，因此我更喜欢在没有循环的情况下执行此操作。我们正在运行 SQL Server 2008。

编辑：这不是“[在没有循环的 SQL 中添加迄今为止的工作日](https://stackoverflow.com/questions/5471524)”的副本，因为他们希望结束日期是工作日。我希望我的结束日期是紧随最后宽限日之后的任何日期（即：周一至周五的 5 个工作日我希望返回周六日期，而不是下一个周一）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:45:38.223

```
create table holidays (
  date date);
GO

create function dbo.findWorkDayAfter(@date datetime, @days int)
returns date as
begin
return (
  select thedate
  from (
  select thedate=dateadd(d,v.day,cast(@date as date)),
         rn=row_number() over (order by v.day)
  from (values(1),(2),(3),(4),(5),(6),(7),(8),(9),(10))v(day)
  left join holidays h on h.date = dateadd(d,v.day,cast(@date as date))
  where h.date is null and left(datename(dw,dateadd(d,v.day,cast(@date as date))),1) <> 'S'
  ) x
  where @days = rn
  )
end
GO 
```

除非你有长假，否则 10 天应该足够找到下一个工作日的第 5 个。如果需要，请增加它。

如果您从某个日期开始需要更多的工作日，您可以使用它来满足一年或三年的需求。

```
alter function dbo.findWorkDayAfter(@date datetime, @days int)
returns date as
begin
return (
  select thedate
  from (
  select thedate=dateadd(d,v.number,cast(@date as date)),
         rn=row_number() over (order by v.number)
  from master..spt_values v
  left join holidays h on h.date = dateadd(d,v.number,cast(@date as date))
  where h.date is null and left(datename(dw,dateadd(d,v.number,cast(@date as date))),1) <> 'S'
    and v.number >= 1 and v.type='p'
  ) x
  where @days = rn
  )
end
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-29T09:53:55.447

我之前有类似的要求，因此共享以下函数，该函数在将给定的天数（仅工作日）添加到给定日期后返回新日期，它还提供了从周末排除星期六的选项。

```
ALTER FUNCTION [dbo].[AddDaysAndWeekends](
    @StartDate DATETIME,
    @NoOfDays INT,
    @IsSatrudayHoliday bit
)

RETURNS DATETIME AS BEGIN
    while (@NoOfDays>0)
    begin
        --add 1 day
        set @StartDate = DateAdd(day,1,@StartDate)
        --skip weekends
        while (DATEPART(dw, @StartDate) = 1 or (@IsSatrudayHoliday = 1 and DATEPART(dw, @StartDate) = 7))
        begin
            set @StartDate = DateAdd(day,1,@StartDate)
        end
        set @NoOfDays = @NoOfDays-1
    end
    --declare @dateadded int = DATEDIFF(day,@BaseDate,@StartDate)
    RETURN @StartDate
END 
```

注意：如果@StartDate 是周末，上面的函数不会考虑将@StartDate 更改为下一个工作日期。

如果有一个带有这样声明的假期的表：

```
CREATE TABLE Holiday(ID INT IDENTIFY, HolidayDate Date, ...) 
```

然后函数考虑将@StartDate 更改为像这样的下一个工作日期

```
ALTER FUNCTION [dbo].[AddDaysAndWeekends](
    @StartDate DATETIME,
    @NoOfDays INT,
    @IsSatrudayHoliday bit
)

RETURNS DATETIME AS BEGIN
    while (@NoOfDays>0)
    begin
        --add 1 day
        set @StartDate = DateAdd(day,1,@StartDate)
        --skip weekends
        while (
            DATEPART(dw, @StartDate) = 1 or
            (@IsSatrudayHoliday = 1 and DATEPART(dw, @StartDate) = 7) or
            exists (select 1 from Holiday where HolidayDate = convert(date, @StartDate))
        )
        begin
            set @StartDate = DateAdd(day,1,@StartDate)
        end
        set @NoOfDays = @NoOfDays-1
    end
    --declare @dateadded int = DATEDIFF(day,@BaseDate,@StartDate)
    RETURN @StartDate
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T16:13:17.117

所有归功于 Bogdan Maxim 和 Peter Mortensen[计算两个日期之间的工作日](https://stackoverflow.com/questions/252519/count-work-days-between-two-dates/20149314#20149314)。这是他们的帖子，我只是在函数中添加了假期（假设您有一个带有日期时间字段“HolDate”的表“tblHolidays”。）对于新手，最后有一个测试脚本。快乐编码！

```
--Changing current database to the Master database allows function to be shared by everyone.
USE MASTER
GO
--If the function already exists, drop it.
IF EXISTS
(
    SELECT *
    FROM dbo.SYSOBJECTS
    WHERE ID = OBJECT_ID(N'[dbo].[fn_WorkDays]')
    AND XType IN (N'FN', N'IF', N'TF')
)

DROP FUNCTION [dbo].[fn_WorkDays]
GO
 CREATE FUNCTION dbo.fn_WorkDays
--Presets
--Define the input parameters (OK if reversed by mistake).
(
    @StartDate DATETIME,
    @EndDate   DATETIME = NULL --@EndDate replaced by @StartDate when DEFAULTed
)

--Define the output data type.
RETURNS INT

AS
--Calculate the RETURN of the function.
BEGIN
    --Declare local variables
    --Temporarily holds @EndDate during date reversal.
    DECLARE @Swap DATETIME

    --If the Start Date is null, return a NULL and exit.
    IF @StartDate IS NULL
        RETURN NULL

    --If the End Date is null, populate with Start Date value so will have two dates (required by DATEDIFF below).
    IF @EndDate IS NULL
        SELECT @EndDate = @StartDate

    --Strip the time element from both dates (just to be safe) by converting to whole days and back to a date.
    --Usually faster than CONVERT.
    --0 is a date (01/01/1900 00:00:00.000)
    SELECT @StartDate = DATEADD(dd,DATEDIFF(dd,0,@StartDate), 0),
            @EndDate   = DATEADD(dd,DATEDIFF(dd,0,@EndDate)  , 0)

    --If the inputs are in the wrong order, reverse them.
    IF @StartDate > @EndDate
        SELECT @Swap      = @EndDate,
               @EndDate   = @StartDate,
               @StartDate = @Swap

    --Calculate and return the number of workdays using the input parameters.
    --This is the meat of the function.
    --This is really just one formula with a couple of parts that are listed on separate lines for documentation purposes.
    RETURN (
        SELECT
        --Start with total number of days including weekends
        (DATEDIFF(dd,@StartDate, @EndDate)+1)
        --Subtact 2 days for each full weekend
        -(DATEDIFF(wk,@StartDate, @EndDate)*2)
        --If StartDate is a Sunday, Subtract 1
        -(CASE WHEN DATENAME(dw, @StartDate) = 'Sunday'
            THEN 1
            ELSE 0
        END)
        --If EndDate is a Saturday, Subtract 1
        -(CASE WHEN DATENAME(dw, @EndDate) = 'Saturday'
            THEN 1
            ELSE 0
        END)
        --Subtract all holidays
        -(Select Count(*) from tblHolidays
          where HolDate between @StartDate and @EndDate )
        )
    END  
GO

/*
    -- Test Script
declare @EndDate datetime= dateadd(m,2,getdate())
print @EndDate
select  [Master].[dbo].[fn_WorkDays] (getdate(), @EndDate)
*/ 
```

# python - tkinter - 获取按钮名称？

> ID：12862445
> 
> 赞同：0
> 
> 时间：2012-10-12T15:33:45.877
> 
> 标签：python, button, tkinter, label

我正在尝试为每个 tkinter 按钮执行不同的代码——直到从列表中调用它们的名称才知道。gtk 有标签（不幸的是我不能使用 gtk）。

我如何用 tkinter 实现类似的功能？

```
def click_one(newbuttonname):
        try:
                writethisdown = open("participantsmovedlog.txt", 'a')
        except:
                pass
        rotatee = newbuttonname
        thispersonwasrotated(rotatee)
        writethisdown.close() 
```

....同时在 makebutton 功能中：

```
for someuser in listofusers:
            username = someuser
            newbuttonname = username 
            newbuttonname = Tkinter.Button(win, text = newbuttonname, command = lambda:click_one(username))
            newbuttonname.pack() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T22:53:09.660

Bryan 的回答可能无法完全解决这个问题，特别是，他的解决方案只有在按钮的文本在创建后从未更改的情况下才有效。

```
button.config('text')[-1] 
```

返回实际按钮的文本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T15:56:23.450

你快到了。您只需通过 lambda 或 functools.partial 传递名称：

```
newbuttonname = username 
newbuttonname = Tkinter.Button(win, text = newbuttonname, 
    command = lambda name=username:click_one(name)) 
```

您可以使用相同的技术来传递实际的 wodget 或任何其他数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-25T14:24:58.677

当您标记按钮时，它应该用引号引起来：

```
newbuttonname = tk.Button(win, text="NewButtonName") 
```

# mysql - 如何访问仅访问数据库的网站 CMS

> ID：12862448
> 
> 赞同：0
> 
> 时间：2012-10-12T15:33:50.047
> 
> 标签：mysql, login, passwords, md5, recover

我有一个使用“内部”cms 的网站，但我不知道登录详细信息。该平台本身没有“重置密码”功能。我确实可以访问 ftp 和 phmyadmin，并且我找到了包含用户详细信息的 SQL 表，但密码当然是 MD5 加密。我尝试在 php my admin 中手动创建用户并填写以 MD5 加密的密码（为此使用了 md 在线服务），但它仍然不起作用。有人知道我可以使用的其他技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:36:03.777

您可以为用户表中的现有用户 md5('your_pass') 但您确定密码是 md5 加密的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:40:25.803

如果您有 FTP 访问权限，则可以查看应用程序源，并查看它们如何存储和检查密码。然后您可以看到它如何存储和验证密码并相应地更新数据库表。

或者，您可以完全绕过身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:44:48.343

您需要查看 CMS 源代码。散列密码可能会涉及某种加盐/其他过程。快速浏览源代码将告诉您生成自己的密码所需知道的一切。猜测其未修饰的 MD5 是一个远射...

# html - 没有浏览器滚动条的垂直固定和流体布局

> ID：12862449
> 
> 赞同：0
> 
> 时间：2012-10-12T15:33:54.573
> 
> 标签：html, css

![在此处输入图像描述](../Images/03357cc6cfcb965590d1ac7ebffec006.png)

我希望我的页面具有图像中的行为。100% 框有浏览器屏幕的高度，自动框有一个最小高度，比如说 100px，所以，我喜欢自动框增加/减少，如果它的高度低于 100px，然后创建自动框中的滚动条，而不是浏览器中的滚动条（如图所示）。

**编辑： http:** [//jsfiddle.net/erwingo/gMEBn/](http://jsfiddle.net/erwingo/gMEBn/) 问题是，当您缩小窗口时，会出现滚动条，因为 --div class="content"-- 似乎没有减少。

对不起，如果我的英语不够好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:06:47.950

您可以以屏幕百分比指定元素的高度。然后给你的内容区域`overflow: auto;`

另一种选择，因为你的页眉和页脚的高度似乎是静态的，所以将内容设置为`position:absolute; top: totalOfHeadersHeight; bottom: footerHeight; overflow: auto;`它然后会给你内容区域，因为它用它自己的单独的滚动区域填充屏幕。

# javascript - CSS3在jsfiddle中调整高度

> ID：12862451
> 
> 赞同：0
> 
> 时间：2012-10-12T15:33:55.473
> 
> 标签：javascript, html, css

我在这里有这个 jsfiddle，它按预期工作正常：http: [//jsfiddle.net/fdjQs/1/](http://jsfiddle.net/fdjQs/1/)

然后我尝试调整**高度**大小，如下所示：

```
 #wrapper {width:320px;height:480px;background-color:#eee}
 #pageWrapper {width:320px;height:440px;overflow:hidden;position:relative}
 #pages {width:320px;height:1320px;background-color:#fed;position:absolute}
 #nav {width:320px;height:40px}
 div.pageDiv {width:320px;height:440px}
 #page2 {background-color:#666666}
 #page3 {background-color:#999999}
 #pagesNav {display:none} 
```

它很有趣，看起来不像工作结果应该是什么样的（但是，上面有一个更正的高度大小）[http://jsfiddle.net/fdjQs/1/](http://jsfiddle.net/fdjQs/1/)

更新：

**整体尺寸 320px 宽 x 480px 高**

**导航（顶部）320 像素宽 x 40 像素高**

**内容 320px x 440px 高度**

任何人都可以开导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:41:42.877

您还需要更新`movePage`调用：

```
<div class="pageDiv" id="page1">
  <a href="javascript:void(0)" onclick="movePage(440,2);">Page 2</a>&nbsp;&nbsp;
  <a href="javascript:void(0)" onclick="movePage(880,2);">Page 3</a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:39:46.847

`onclick="movePage(250,2);"`HTML 中每个链接的 onclick 处理程序也传递了一个`y`需要修改的值。

```
<a href="javascript:void(0)" onclick="movePage(440,2);">Page 2</a>
<a href="javascript:void(0)" onclick="movePage(880,2);">Page 3</a> 
```

# objective-c - 在 iPad 应用程序中渲染和显示 .iBook 文件

> ID：12862455
> 
> 赞同：0
> 
> 时间：2012-10-12T15:34:05.723
> 
> 标签：objective-c, ios, ipad, ios5

我需要在我的 iPad 应用程序中渲染和显示一个 .iBook 文件。我想知道那里是否有可用的 .iBook 文件查看器？或者如果我可以将 .iBook 文件转换为 HTML5？

# python - 如何将 python 包安装到 Google App Engine？

> ID：12862456
> 
> 赞同：0
> 
> 时间：2012-10-12T15:34:08.513
> 
> 标签：python, google-app-engine

[https://github.com/yoavaviram/python-amazon-simple-product-api](https://github.com/yoavaviram/python-amazon-simple-product-api) 声明它与 GAE 兼容。但是我怎么能把它安装到gae呢？GAE 允许通过 app.yaml 限制库，如下库： - 名称：jinja2 版本：最新

那么我该如何安装呢？据我所知，它还需要瓶颈 pip install 不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:37:02.430

对于大多数 python 库，您只需将其复制到您的 GAE 项目中。如果您只是将 amazon 文件夹复制到您的项目中，这个看起来会起作用。

# c# - 手动停止 TopShelf 中的服务

> ID：12862457
> 
> 赞同：2
> 
> 时间：2012-10-12T15:34:10.907
> 
> 标签：c#, topshelf

使用 TopShelf，如何手动停止服务？我查看了文档，发现要停止服务，您必须使用命令提示符，如下所示：

service.exe [服务名称] 停止

当我使用它时，我发现它只是重新启动服务而没有停止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:45:40.807

要从命令行停止服务，假设 service.exe 是使用 Topshelf 编写的，命令行参数将是：

```
service.exe stop 
```

如果您需要升级到管理员，请使用：

```
service.exe stop --sudo 
```

这将使 UAC 升级为管理员。

如果您的服务是使用实例名称安装的（默认情况下大多数不是），您将使用：

```
service.exe stop --instance:MyInstanceName 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:43:34.583

根据[文档](http://docs.topshelf-project.com/en/latest/overview/commandline.html)，命令行应该是：

> service.exe 停止-实例：服务名称

# ajax - 使用ajax从jsf中的primefaces树选定项设置primefaces selectOneMenu默认值

> ID：12862460
> 
> 赞同：0
> 
> 时间：2012-10-12T15:34:21.390
> 
> 标签：ajax, jsf, primefaces

在第一种形式中，我有一个 primefaces 多选树（从 LDAP 填充），在另一种形式中，我有一个 selectOneMenu primefaces 组件。我想将默认的 selectOneMenu 值（此菜单上显示的第一个值）设置为树选择节点的值。我尝试使用 f:ajax .. 但它不起作用，因为这些元素不属于同一表单（渲染属性中的 selectOneMenu 名称是未知的..）

这是我的 index.xhtml，其中包含所有这些元素：

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Insert title here</title>
    <script src="JS/general.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="CSS/general.css" />
    <script src="clean/clean-ajax-all.js"></script>
    <script>
        var crudmenu = "crudmenu";
        var adduserform = "adduserform";
    </script>
</h:head>
<body>

    <h:form id="form">

        <p:growl id="messages" showDetail="true" escape="false" />

        <p:tree value="#{treeBean.root}" var="node"
            onNodeClick="this.form.submit();" selectionMode="multiple"
            selection="#{treeBean.selectedNodes}" id="treeMultiple">

            <p:treeNode>
                <h:outputText value="#{node}" />
            </p:treeNode>
        </p:tree>

        <p:commandButton value="Display Selected" update="messages"
            actionListener="#{treeBean.displaySelectedMultiple}" id="btnDisplay" rendered="false"/>  

    </h:form>

    <div id="adduserform" name="adduserform"
        style="text-align: center; overflow: hidden; height: 0px; width: 270px; border: #040600 1px;">

        <h:form>
            <h:panelGrid border="1" columns="2">
            ID :  <p:selectOneMenu value="" panelStyle="width:150px"
                    effect="fade" var="p" style="width:160px" filter="true"
                    filterMatchMode="startsWith">
                    <f:selectItem itemLabel="#{treeBean.selectedNodeValue}"
                        itemValue="" />

                </p:selectOneMenu> 

    objectClass : <p:selectOneMenu value="" panelStyle="width:150px"
                    effect="fade" var="p" style="width:160px" filter="true"
                    filterMatchMode="startsWith">
                    <f:selectItem itemLabel="Select One" itemValue="" />

                </p:selectOneMenu>

            </h:panelGrid>
        </h:form>
    </div>

</body>
</html> 
```

这是我的托管bean：

```
package org.primefaces.examples.view;

import java.io.Serializable;

import javax.faces.application.FacesMessage;
//other imports..

@ManagedBean(name = "treeBean")
public class TreeBean implements Serializable {

    private TreeNode root;

    private TreeNode[] selectedNodes;

    private String selectedNodeValue;

    public TreeBean() {

        populateTreeFromLdap();

    }

    public String getSelectedNodeValue() {
        if (selectedNodes != null && selectedNodes.length == 1)
            for (TreeNode node : selectedNodes)
            selectedNodeValue = node.getData().toString(); 
        return selectedNodeValue;
    }

    public void setSelectedNodeValue(String selectedNodeValue) {
        this.selectedNodeValue = selectedNodeValue;
    }

    public void populateTreeFromLdap(){
     //code to get entries from LDAP..
            }               

    }

    public TreeNode getRoot() {
        return root;
    }

    public TreeNode[] getSelectedNodes() {
        return selectedNodes;
    }

    public void setSelectedNodes(TreeNode[] selectedNodes) {
        this.selectedNodes = selectedNodes;
    }

    public void displaySelectedMultiple(ActionEvent event) {
        if (selectedNodes != null && selectedNodes.length > 0) {
            StringBuilder builder = new StringBuilder();

            for (TreeNode node : selectedNodes) {
                builder.append(node.getData().toString());
                builder.append("<br />");
            }

            FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO,
                    "Selected", builder.toString());

            FacesContext.getCurrentInstance().addMessage(null, message);
        }
    }
} 
```

问题是如何在树节点选择发生后刷新 selectOneMenu 的 itemLabel 的“#{treeBean.selectedNodeValue}”。

顺便说一句，我是 jsf 的新手，我真的很沮丧，传统的 ajax 用于从另一个页面加载 div 中的内容在 jsf 中不再起作用..我在以前的一些 jsp/servlet 应用程序中使用它并且它工作正常..

谢谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:10:45.570

If I understand what you are trying to do, I would next bind the selectOneMenu to a value on the backing bean. In your getSelectedNodeValue() I would set that value. The final piece to make this work is to use an listener events as shown here: primefaces.org/showcase-labs/ui/treeEvents.jsf.

# c# - XML 后连接重置错误

> ID：12862461
> 
> 赞同：0
> 
> 时间：2012-10-12T15:34:28.473
> 
> 标签：c#, .net, xml

我正在在线将 xml/cxml 文档发布到 url。当我发布它时，我收到错误“连接已重置”。我想发布代码以确保他们没有犯错。stXML 是 xml 文档。

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);

        byte[] postDataBytes = Encoding.ASCII.GetBytes(stXML);

        req.Method = "POST";

        req.ContentLength = postDataBytes.Length;

        // req.ContentType = "text/XML-urlencoded";

        Stream requestStream = req.GetRequestStream();

        requestStream.Write(postDataBytes, 0, postDataBytes.Length);

        requestStream.Close();

        HttpWebResponse resp = (HttpWebResponse)request.GetResponse();

        StreamReader responseReader = new StreamReader(resp.GetResponseStream(), Encoding.Default);

        string strRet = responseReader.ReadToEnd();

        Response.Write(strRet);

        Response.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:42:38.220

也许你的标题有问题。我会避免使用 HttpWebRequest 增加的复杂性，而只使用 System.Net.WebClient。

```
string response = new WebClient().UploadString(uri, stXML); 
```

# ember.js - 没有 Em.Textfield 的文本字段的双向绑定

> ID：12862462
> 
> 赞同：2
> 
> 时间：2012-10-12T15:34:28.810
> 
> 标签：ember.js

我试着做这个

```
<input type="text" {{bindAttr value="controller.term"}}> 
```

但不能正常工作，更改只能从控制器工作。我被迫使用以下

```
{{view Em.TextField valueBinding="controller.term"}} 
```

有一种方法可以在不使用前面的代码段的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:25:34.733

为什么不扩展 Ember.TextField 来做你想做的事？

让我确切地知道您要做什么，我敢打赌我们可以通过这种方式找到解决方案。当我知道更多细节时，我会编辑我的答案，但现在：

## 扩展 Ember.TextField

假设您想在输入上放置一个 maxlength 和一个占位符。

```
App.MyTextField = Ember.TextField.extend({
  maxlength: 20,
  placeholder: 'Some placeholder text',
  attributeBindings: ['maxlength', 'placeholder']
}); 
```

然后你可以把它放在你的模板中：

```
{{view App.MyTextField valueBinding="controller.term"}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T16:30:27.683

我很好奇 - 为什么你不想使用 Ember.TextField？

模板`{{bindAttr value="controller.term"}}`不会将更改从视图传播到控制器，因为视图不知道其值已更改。您必须自己处理`change`, `keyUp`,`focusOut`事件并相应地更新数据。猜猜看 - 使用 Ember.TextField 时您可以免费获得所有这些。

如果您仍然想采用第一种方式，请查看 Ember.TextSupport - 这个 mixin 支持从视图到控制器的数据流。

# c# - 不记得在代码中设置 XMLDataSource.XPath

> ID：12862464
> 
> 赞同：0
> 
> 时间：2012-10-12T15:34:37.430
> 
> 标签：c#, xpath, xmldatasource

在我的应用程序中，我在 ASPX 中定义了一个 XMLDataSource：

```
<asp:XmlDataSource ID="XmlThickness" runat="server"
    DataFile="~/XML/Data/products.xml" EnableCaching="False" 
    EnableViewState="False" 
    ></asp:XmlDataSource> 
```

该数据源为网格提供数据。

在我的代码中，我将 XPath 设置在特定函数中的特定点，然后在 XMLDataSource 上发出一个新的 DataBound()，从而导致网格更新：

```
XmlThickness.XPath = "/Item[@label='" + tvwMaterials.SelectedNode.Text + "']/Thickness/Thick";
XmlThickness.DataBind(); 
```

所有这些都很有效，但是当我尝试从不同的函数中读取 XPATH 时，我会收到一条错误消息。

```
XmlNode thick = myDataSource.SelectSingleNode(XmlThickness.XPath.ToString()); 
```

调试显示 XPath 表达式实际上是空的。

我试图将 DataSource 的创建移动到代码中，然后才设置网格的 DataSourceID，但这不起作用。

在尝试此操作之前，我在 XMLDataSource 定义中定义了一个默认 XPath，此时，该`XMLNode thick`行返回了此默认字符串。

我有点困惑，为什么 XPath 没有保留在 XMLDataSource 中，因为我在前面的函数中明确设置了它。有人可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:58:51.503

XmlDataSource 节点不像大多数数据源控件那样存储在 viewState 中。您应该只调用一次 databind，并且控件应该在回发时自动重建自身。如果您想更改数据源，您可以在 Viewstate 中从 treeviw 中保存 selectedNode，然后在回发时，通过从 viewState 中检索值来更改您的数据源，然后再分配 DataSourceID 并调用 DataBind()。看看这里：

[http://forums.asp.net/t/1437802.aspx/1](http://forums.asp.net/t/1437802.aspx/1)

# jquery - 带有颜色框的平滑 Div 滚动不起作用

> ID：12862465
> 
> 赞同：2
> 
> 时间：2012-10-12T15:34:44.427
> 
> 标签：jquery, html, scroll, colorbox, smooth

这是画廊页面的链接：

[http://www.gerardtonti.com/Scrollable%20Gallery%202/index.html](http://www.gerardtonti.com/Scrollable%20Gallery%202/index.html)

我已经尝试了一切，但我仍然遇到同样的问题。我在网上找到了你的 jQuery Smooth Div Scroll 工具。我打算捐赠，但我无法像您在您的网站上那样使用颜色框选项：[http ://www.smoothdivscroll.com/colorbox.html](http://www.smoothdivscroll.com/colorbox.html)

我是一名平面艺术家和网页设计师，正在寻找画廊选项来展示我的作品。似乎当我添加链接到大图像的 href 标记时，它会破坏可滚动图库。我在我的 html 的 head 部分中链接了一个 colorbox.css 文件：

```
<code>link rel="Stylesheet" type="text/css" href="css/colorbox.css" /></code> 
```

我在文档的正文中也有这个：

```
<code><script type="text/javascript">
$(document).ready(function () {
// Init Smooth Div Scroll   
$("#makeMeScrollable").smoothDivScroll({
mousewheelScrolling: "allDirections",
manualContinuousScrolling: true
});

// Init colorbox
$("#makeMeScrollable a").colorbox({ speed: "500" });
</code> 
```

我在画廊中重复了相同的图像，一旦我找出问题所在，就会替换它们。任何帮助将非常感激。

这是完整的 HTML 源代码：

```
<code>
<!DOCTYPE html>
<html>
<head>
<title>Demo - jQuery Smooth Div Scroll - Thomas Kahn</title>

<!-- the CSS for Smooth Div Scroll -->
<link rel="Stylesheet" type="text/css" href="css/smoothDivScroll.css" />
<link rel="Stylesheet" type="text/css" href="css/colorbox.css" />

<!-- Styles for my specific scrolling content -->
<style type="text/css">

    #makeMeScrollable
    {
        width:100%;
        height: 330px;
        position: relative;
    }

    /* Replace the last selector for the type of element you have in
       your scroller. If you have div's use #makeMeScrollable div.scrollableArea div,
       if you have links use #makeMeScrollable div.scrollableArea a and so on. */
    #makeMeScrollable div.scrollableArea img
    {
        position: relative;
        float: left;
        margin: 0;
        padding: 0;
        /* If you don't want the images in the scroller to be selectable, try the following
           block of code. It's just a nice feature that prevent the images from
           accidentally becoming selected/inverted when the user interacts with the scroller. */
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -o-user-select: none;
        user-select: none;
    }
</style>

</head>

<body>

<div id="makeMeScrollable">
    <a href="images/charcoal_Big.jpg"><img src="images/charcoal.jpg" alt="charcoal" id="field" /></a>
    <a href="images/charcoal_Big.jpg"><img src="images/charcoal.jpg" alt="charcoal" id="field" /></a>
    <a href="images/charcoal_Big.jpg"><img src="images/charcoal.jpg" alt="charcoal" id="field" /></a>
    <a href="images/charcoal_Big.jpg"><img src="images/charcoal.jpg" alt="charcoal" id="field" /></a>
    <a href="images/charcoal_Big.jpg"><img src="images/charcoal.jpg" alt="charcoal" id="field" /></a>
    <a href="images/charcoal_Big.jpg"><img src="images/charcoal.jpg" alt="charcoal" id="field" /></a>
    <a href="images/charcoal_Big.jpg"><img src="images/charcoal.jpg" alt="charcoal" id="field" /></a>
    <a href="images/charcoal_Big.jpg"><img src="images/charcoal.jpg" alt="charcoal" id="field" /></a>
</div>

<!-- LOAD JAVASCRIPT LATE - JUST BEFORE THE BODY TAG 
     That way the browser will have loaded the images
     and will know the width of the images. No need to
     specify the width in the CSS or inline. -->

<!-- jQuery library - Please load it from Google API's -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"     type="text/javascript"></script>
<!-- jQuery UI Widget and Effects Core (custom download)
 You can make your own at: http://jqueryui.com/download -->
<script src="js/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>
<!-- Latest version of jQuery Mouse Wheel by Brandon Aaron
 You will find it here: http://brandonaaron.net/code/mousewheel/demos -->
<script src="js/jquery.mousewheel.min.js" type="text/javascript"></script>
<!-- jQuery Kinetic - for touch -->
<script src="js/jquery.kinetic.js" type="text/javascript"></script>
<!-- Smooth Div Scroll 1.3 minified-->
<script src="js/jquery.smoothdivscroll-1.3-min.js" type="text/javascript"></script>
<!-- If you want to look at the uncompressed version you find it at
 js/jquery.smoothDivScroll-1.3.js -->
<!-- Colorbox -->
<script src="js/jquery.colorbox-min.js" type="text/javascript"></script>

<!-- If you want to look at the uncompressed version you find it at
     js/jquery.smoothDivScroll-1.3.js -->

<!-- Plugin initialization -->
<script type="text/javascript">
$(document).ready(function () {
// Init Smooth Div Scroll   
$("#makeMeScrollable").smoothDivScroll({
    mousewheelScrolling: "allDirections",
    manualContinuousScrolling: true
});

// Init colorbox
$("#makeMeScrollable a").colorbox({ speed: "500" });
});
</script>

</body>
</html> 
```

谢谢，

格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:55:17.733

正如我所看到的，您的示例现在正在运行，使用 html-markup 一切正常，只需为 div 设置宽度：

```
<div class="scrollableArea" style="width: 4000px;"> 
```

**添加：**

`scrollableArea`用jquery计算，很难调试`min`版本，但据我所知，`makeMeScrollable`div必须用另一个固定宽度的div包裹。

**添加2：**

现在它工作正常。演示：http: [//jsfiddle.net/fDGJH/](http://jsfiddle.net/fDGJH/)

设置此样式：

```
#makeMeScrollable
{
    width:100%;
    height: 330px;
    position: relative;
}

#makeMeScrollable div.scrollableArea img
{
    position: relative;
    float: left;
    margin: 0;
    padding: 0;
} 
```

# css - IE7 浮动错误。是否有维护html的修复程序？

> ID：12862466
> 
> 赞同：1
> 
> 时间：2012-10-12T15:34:45.463
> 
> 标签：css, internet-explorer-7, css-float

这是我的问题的演示。这在 Chrome 和 Firefox 中可以正常工作。但是，在 IE7 中，未清除的浮动元素最终会在容器顶部并排放置。 [http://jsfiddle.net/eGAHx/](http://jsfiddle.net/eGAHx/)

HTML：

```
<span class="bold floatLeft clearLeft">ISBN-13:&nbsp;</span>
<h2 class="floatLeft" itemprop="isbn">9780538735452</h2>
<span class="bold floatLeft clearLeft">ISBN:&nbsp;</span>
<h2 class="floatLeft">0538735457</h2>
<span class="bold floatLeft clearLeft">Edition:&nbsp;</span>
<span class="floatLeft" itemprop="bookEdition">3</span>
<span class="bold floatLeft clearLeft">Pub Date:&nbsp;</span>
<span class="floatLeft" itemprop="datePublished">2010</span>
<span class="bold floatLeft clearLeft">Publisher:&nbsp;</span>
<span class="floatLeft" itemprop="publisher">Brooks Cole</span>​ 
```

CSS：

```
.floatLeft{float:left}
.bold{font-weight:bold}
.clearLeft{clear:left}​ 
```

预期结果：
**ISBN-13：** 9780538735452
**ISBN：** 0538735457
**版本：** 3
**出版日期：** 2010
**出版商：** Brooks Cole

当前 IE7 结果：
**ISBN-13：** 9780538735452053873545732010BrooksCole
**ISBN：
版本：
Pub Date：
Publisher：**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:41:59.300

您可以在 IE7 的 head 标签中使用这种样式代码

```
<!--[if IE 7]>
 <style type="text/css">
  h2{
    clear:both;
  }
 </style>
<![endif]--> 
```

但是你在 h2 之前给父母 h2 例如

```
yourparentelenent h2{
   clear:both
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:41:20.333

我不明白你为什么要浮动这些。

为什么不只`<strong>`在左边的文本和`<br />`每行的末尾使用标签呢？

# c++ - 当父类共享指针为返回类型时返回新的基类

> ID：12862474
> 
> 赞同：4
> 
> 时间：2012-10-12T15:35:19.983
> 
> 标签：c++, pointers, shared, base, derived

你能有一个父类共享指针返回一个函数的类型，然后返回一个新的子类而不是一个共享指针吗？我不确定共享指针在这些情况下是如何工作的，它们是否像普通指针一样工作？这是我的例子：

```
BaseEventPtr Actions::getEvent(const std::string& nodeName)
{
    if(asLowerCaseString(nodeName) == "action")
        return new ActionEvent(&m_interface);

    return nullptr;
} 
```

在这种情况下，ActionEvent 是 BaseEvent 的子类。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:03:50.837

如果`BaseEventPtr`是智能指针应该没问题。

`delete`基本上，当没有更多引用时，共享指针会调用真实指针。如果基类定义了**虚拟析构**函数，`delete`则调用适当的子类的析构函数。

例如：

```
class NonVirtualBase {};
class NonVirtualSubclass: public NonVirtualBase {};

shared_ptr<NonVirtualBase> ptr( new NonVirtualSubclass() ); // NOT OK!

class VirtualBase
{
    virtual ~VirtualBase() {}
};

class VirtualSubclass: public VirtualBase {};

shared_ptr<VirtualBase> ptr( new VirtualSubclass() ); // OK 
```

这也适用于普通（裸）指针。这就是为什么作为一般规则，如果一个类将来可以用作基类，它应该用虚拟析构函数定义（即使是空的）。

# javascript - 重定向到附加标头信息的另一个站点 Javascript

> ID：12862485
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:35:47.617
> 
> 标签：javascript, asp.net

我正在尝试进行客户端单击并重定向到添加了标题信息的另一个站点，我的 onclick 客户端代码是这样的：

```
function selectApp(appGUID, userId ,embedUrl)
{
    if(embedUrl==="")
    {
        var success = setAppGUID(appGUID);
        window.location.replace('AppDetail.aspx');
    }
    else
    {   
        $.ajax({
            type: "POST",
            url: embedUrl,
            contentType: "text/html",
            beforeSend: function (xhr, settings) {
                xhr.setRequestHeader("UserId", userId);
            },
            success: function (msg) {
                //actually redirect to the site
                window.location.replace(embedUrl);
            }
        });
    }  
} 
```

而服务器端代码`embedUrl`是

```
protected void Page_Load(object sender, EventArgs e)
{
    string isSet = (String)HttpContext.Current.Session["saveUserID"];
    if (String.IsNullOrEmpty(isSet))
    {
        NameValueCollection headers = base.Request.Headers;
        for (int i = 0; i < headers.Count; i++)
        {
            if (headers.GetKey(i).Equals("UserId"))
            {
                HttpContext.Current.Session["saveUserID"] = headers.Get(i);
            }
        }
    }
    else
    {
        TextBox1.Text = HttpContext.Current.Session["saveUserID"].ToString();
    }
} 
```

这似乎工作，但它不是太优雅。有没有办法用标头数据重定向？没有（我在做什么）在会话变量中保存标头信息，然后在 2 个单独的部分中进行重定向。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T16:30:23.730

您可以实现一个页面方法并将数据发布到它。以该方法移动您当前的逻辑。

请参阅以下示例：

*   [http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

*   [http://www.asp.net/ajaxlibrary/jquery_webforms_Post_Data_To_PageMethod.ashx](http://www.asp.net/ajaxlibrary/jquery_webforms_Post_Data_To_PageMethod.ashx)

成功发布后，您可以重定向到另一个页面，例如您当前的实现。

**编辑**：尝试这样的事情：

1) 在 Code behind 中添加一个 Web 方法

```
 [WebMethod]
  public static string SaveUserId(string userId)
  {
    string sessionUserId= (string)HttpContext.Current.Session["saveUserID"];
    if (string.IsNullOrEmpty(sessionUserId))
      HttpContext.Current.Session["saveUserID"] = userId;
    else
      TextBox1.Text = sessionUserId;
  } 
```

2）从JS调用它

```
 //Add here code before..
 $.ajax({
                url: "PageName.aspx/SaveUserId",
                data: "{'userid':" + userid + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "json"
                success: function (msg) {
                    //actually redirect to the site
                    window.location.replace(embedUrl);
                }
            }); 
```

有关使用 jQuery 调用 Page 方法的更多信息：

*   [http://deebujacob.blogspot.in/2012/01/aspnet-ajax-web-method-call-using.html](http://deebujacob.blogspot.in/2012/01/aspnet-ajax-web-method-call-using.html)
*   [http://www.misfitgeek.com/calling-web-service-page-methods-with-jquery/](http://www.misfitgeek.com/calling-web-service-page-methods-with-jquery/)

# nhibernate - 如何使用 NHibernate 从两个不同的实体中选择选定的列到一个 DTO 中？

> ID：12862489
> 
> 赞同：0
> 
> 时间：2012-10-12T15:35:54.120
> 
> 标签：nhibernate, join, fluent-nhibernate

我有两个课程（只是重现问题）：

```
public class User
{
    public virtual int Id { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual IList<OrgUnitMembership> OrgUnitMemberships { get; set; }
}

public class OrgUnitMembership
{
    public virtual int UserId { get; set; }
    public virtual int OrgUnitId { get; set; }
    public virtual DateTime JoinDate { get; set; }
    public virtual DateTime LeaveDate { get; set; }
} 
```

当然，两者都有一个 Fluent NHibernate 地图：

```
 public class UserMapping : ClassMap<User>
    {
        public UserMapping()
        {
            Table("Users");

            Id(e => e.Id).GeneratedBy.Identity();
            Map(e => e.FirstName);
            Map(e => e.LastName);

            HasMany(x => x.OrgUnitMemberships)
.KeyColumn(TypeReflector<OrgUnitMembership>
.GetPropertyName(p => p.UserId))).ReadOnly().Inverse();
        }
    }
    public class OrgUnitMembershipMapping : ClassMap<OrgUnitMembership>
    {
        public OrgUnitMembershipMapping()
        {
            Table("OrgUnitMembership");

            CompositeId()
                .KeyProperty(x=>x.UserId)
                .KeyProperty(x=>x.OrgUnitId);

            Map(x => x.JoinDate);
            Map(x => x.LeaveDate);

            References(oum => oum.OrgUnit)
.Column(TypeReflector<OrgUnitMembership>
.GetPropertyName(oum => oum.OrgUnitId)).ReadOnly();
            References(oum => oum.User)
.Column(TypeReflector<OrgUnitMembership>
.GetPropertyName(oum => oum.UserId)).ReadOnly();
        }
    } 
```

我想做的是根据条件检索一些用户，但我想将 Users 表中的所有列与 OrgUnitMemberships 表中的一些列组合起来，类似于 SQL 查询：

```
select u.*, m.JoinDate, m.LeaveDate
from Users u inner join OrgUnitMemberships m on u.Id = m.UserId
where m.OrgUnitId = :ouid 
```

我完全迷失了，我尝试了许多不同的选择。使用普通的 SQL 查询几乎可以工作，但是由于 User 类 AliasToBean 中有一些可为空的枚举无法转换，否则包装 SQL 查询将像这样工作：

```
return
    Session
        .CreateSQLQuery(sql)
        .SetParameter("ouid", orgUnitId)
        .SetResultTransformer(Transformers.AliasToBean<UserDTO>())
        .List<UserDTO>() 
```

我尝试了下面的代码作为测试（一些不同的变体），但我不确定我在做什么。它部分工作，我得到了 UserDTO 的实例，来自 OrgUnitMembership 的属性（日期）已填充，但来自 User 的所有属性都为空：

```
User user = null;
                OrgUnitMembership membership = null;
                UserDTO dto = null;
                var users = Session.QueryOver(() => user)
                    .SelectList(list => list
                        .Select(() => user.Id)
                        .Select(() => user.FirstName)
                        .Select(() => user.LastName))
                    .JoinAlias(u => u.OrgUnitMemberships, () => membership)
                    //.JoinQueryOver<OrgUnitMembership>(u => u.OrgUnitMemberships)
                    .SelectList(list => list
                        .Select(() => membership.JoinDate).WithAlias(() => dto.JoinDate)
                        .Select(() => membership.LeaveDate).WithAlias(() => dto.LeaveDate))
                    .TransformUsing(Transformers.AliasToBean<UserDTO>())
                    .List<UserDTO>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:59:20.093

如此接近.. 只需加入您的 2 个 SelectList 方法 - 您的别名将确保 NHibernate 从正确的实体获取正确的属性：

```
User user = null;
OrgUnitMembership membership = null;
UserDTO dto = null;
var users = Session.QueryOver(() => user)
    .JoinAlias(u => u.OrgUnitMemberships, () => membership)
    //.JoinQueryOver<OrgUnitMembership>(u => u.OrgUnitMemberships)
    .SelectList(list => list
        .Select(() => user.Id)
        .Select(() => user.FirstName)
        .Select(() => user.LastName))
        .Select(() => membership.JoinDate).WithAlias(() => dto.JoinDate)
        .Select(() => membership.LeaveDate).WithAlias(() => dto.LeaveDate))
    .TransformUsing(Transformers.AliasToBean<UserDTO>())
    .List<UserDTO>(); 
```

# c# - 如何确定 ASP:GridView 的最后一页中的行数？

> ID：12862490
> 
> 赞同：2
> 
> 时间：2012-10-12T15:35:55.510
> 
> 标签：c#, asp.net, gridview

我创建了一个继承 System.Web.UI.WebControls.GridView 的类。我们称之为... GridViewX！

无论如何，我希望能够为它编写一个方法： 1\. 在页面切换时设置一个自定义布尔属性 isLastPage。同时， 2\. 设置一个自定义的 int 属性 unmodifiedRowCount 存储最后一页的记录数（行数）。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:38:18.830

最后一页的记录可以计算为

```
int lastPageRecords = TotalRecords % PageSize; 
```

# java - 嵌入式 Hibernate 实体的赋值返回 null

> ID：12862496
> 
> 赞同：1
> 
> 时间：2012-10-12T15:36:12.810
> 
> 标签：java, hibernate

我有一个`@Embeddable`像这样的休眠注释类

```
@Embeddable
public class DataWrapper {
    private DataWrapperType wrapperType;

    @ManyToOne
    private DataFactorX xFactor;
    @ManyToOne
    private DataFactorY yFactor;
    @ManyToOne
    private DataFactorZ zFactor;

    // Getters and Setters
} 
```

它非常简单地用于另一个实体

```
@Entity
public class DataManager {
    private DataWrapper dataWrapper;

    public DataManager() {
        this.dataWrapper = new DataWrapper();
    }
} 
```

但是当我后来`DataManager`从 Hibernate 检索一个实例时，该`dataWrapper`字段返回 null。

有什么解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:36:12.810

我现在有了答案，但我继续发帖，因为作为 Hibernate 业余爱好者，这对我来说并不明显。根据[ChssPly76 的这个答案](https://stackoverflow.com/a/1324391/1449525)，我现在看到 Hibernate 会将一个组件设置为`null`当它的所有字段都是`null`. 这种行为是官方的并记录在案，我在[这里](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/components.html#components-dependentobjects)发现：

> 组件的空值语义是临时的。当重新加载包含对象时，Hibernate 将假定如果所有组件列都为空，那么整个组件都为空。这适用于大多数用途。

这意味着当您仍在使用设置该字段的引用时，它将保持设置状态，但是如果您查询 Hibernate 以再次检索此对象，则如果该字段的所有组件都为空，则该字段将为空。

希望这可以帮助其他人不要追逐`NullPointerException`其他工作的Java代码。

# c - 当用户可以在 c 中提供任意数量的输入时，如何确定最小和最大的正整数输入？

> ID：12862497
> 
> 赞同：1
> 
> 时间：2012-10-12T15:36:12.357
> 
> 标签：c, integer

嗨，我是学习编写 c 的初学者，我想知道您将如何编写一个代码，提示您提供一个正整数并在您输入 0 并且 0 之前的前面的数字至少是 2 个正整数后结束。然后程序确定最大的正整数输入和最小的整数输入。

```
#include <stdio.h>

int main(void)
{
    int integer=0, largest_int, smallest_int;

    while (integer) {
        printf("Please enter a positive integer: \n");
        scanf("%d", &integer);
        if (integer = 0) {
            while (integer<=0) {
                printf("Please enter a positive integer: \n");
                scanf("%d", &integer);
                    if (integer>0) {
                        printf("Please enter a positive integer: \n");
                        scanf("%d", &integer);

                        if (integer>0) {
                            printf("the largest integer is.....and the smallest integer is......");printf("Please enter a positive integer: \n");
                            break;
                        }
                        else {
                            printf("Please enter a positive integer: \n");
                            scanf("%d", &integer);
                        }
                }
            }
        }
    }

    return 0;
} 
```

起初我尝试使用 do/while 循环，但它根本不起作用。

当循环中有 if ese 语句时，我也对编译器如何读取循环感到困惑。

这就是我的想法：我想过让“输入正整数”重复询问，直到你输入两个正数。然后我会让程序检查下一个输入是否等于零，如果不等于；然后它会再次继续循环。如果用户确实输入了至少两个正整数，然后输入了一个零，则循环中断，我打印出最大的 int 和最小的 int。还让我感到困惑的是，您如何能够过滤所有用户的输入并确定这些值，因为我可以继续输入整数 100000000000000000000 次，并且在所有这些时间之外我怎么知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:55:42.003

由于这似乎是家庭作业，因此您需要思考一些要点。

当您在它之前初始化为零时，您`while (integer)`永远不会被执行。`integer`所以你真正拥有的是`while(0)`，并且循环内没有任何内容被执行。您可以用 a 替换它，`do { ... } while(condition)`但我宁愿保留当前循环的类型并在循环之前添加额外的输入读数（原因是初始化变量以找到最大值和最小值 - 见下文）。

添加一个变量，比如`NPos`计算有多少最后一个条目是正整数。将其初始化为零。每次输入一个数字，如果是正数，则增加 的值`NPos`。否则将其设置为零（这可能很棘手，好像条目为零也可能意味着停止执行而不是 reset `NPos`）。当输入的数字为 0 时，检查`NPos`是否至少为 2，如果是，则停止。

为了找到极值，创建两个变量 (`max`和`min`) 并将它们初始化为第一个用户输入。然后，在每个有效输入处，即不是输入意味着执行结束，检查该值是否大于`max`或小于`min`。如果是这样，请用输入替换`max`或`min`。

这些是算法的主要部分。实施取决于您。

最后一点：我不喜欢命名 value `integer`，但这可能只是我自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:55:58.187

这不是解决方案，而是代码中的一些编码错误：

您的代码将首先无法正常工作，如下所示

```
 int integer=0, largest_int, smallest_int;

            while (integer) {
                    ........
                            } 
```

这里整数是 0，你在 while 中给出这个，它会在第一次检查时出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:56:08.453

### [例子](http://ideone.com/McSOL)

```
#include <limits.h>
#include <stdio.h>

int main() {
  int integer, largest_int = INT_MIN, smallest_int = INT_MAX;
  int count_positive = 0;

  for ( ; ; ) {
    printf("Please enter a positive integer: \n");
    scanf("%d", &integer); //XXX add error handling
    if (integer == 0 && count_positive > 1) 
      break;
    else if (integer > 0) {
      count_positive = count_positive > 1 ? 2 : count_positive + 1;
      if (largest_int < integer)
        largest_int = integer;
      if (smallest_int > integer)
        smallest_int = integer;
    }
  }
  printf("%d %d\n", smallest_int, largest_int);
  return 0;
} 
```

如果“至少 2 个正整数”要求意味着它们应该是连续的，那么当您遇到小于或等于零的整数时，将 count_positive 重置为零。添加到循环中：

```
else if (integer <= 0) 
  count_positive = 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:56:25.667

```
#include <stdio.h>
#include <limits.h>

int main(void)
{
    int integer, largest_int=INT_MIN, smallest_int=INT_MAX;

    do
    {
        printf("Enter a positive integer: ");
        scanf("%d", &integer);
        if (integer < 0)
        continue;
        else if (integer == 0)
        break;
        else
        {
            if (integer > largest_int)
            largest_int = integer;
            if (integer < smallest_int)
            smallest_int = integer;
        }
    } while(1);

    printf("Largest integer is %d\nSmallest integer is %d", largest_int, smallest_int);
} 
```

# android - AndEngine 将透明度应用于 AndEngine 视图

> ID：12862505
> 
> 赞同：2
> 
> 时间：2012-10-12T15:36:35.930
> 
> 标签：android, transparency, andengine

我正在 Android 中的 andEngine 的帮助下开发游戏。
我已经在布局 xml 中定义了背景，并尝试使用 AndEngine 在屏幕上放置一些组件。
但是 AndEngine 捕获的区域是不透明的。AndEngine 捕获的所有背景都变黑了。
我在 xml 中使用 org.andengine.opengl.view.RenderSurfaceView 在代码中使用 LayoutGameActivity。

提前感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:58:27.523

查看[AndEngineAugmentedRealityExtension中的](https://github.com/nicolasgramlich/AndEngineAugmentedRealityExtension/blob/GLES2-AnchorCenter/)[BaseAugmentedRealityGameActivity](https://github.com/nicolasgramlich/AndEngineAugmentedRealityExtension/blob/GLES2-AnchorCenter/src/org/andengine/extension/augmentedreality/BaseAugmentedRealityGameActivity.java)类。它为透明背景进行了正确的表面设置。

作为一个工作示例，请尝试使用[AndEngineExamples的](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2-AnchorCenter/)[AugmentedRealityExample](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2-AnchorCenter/src/org/andengine/examples/AugmentedRealityExample.java)。

# java - 关于 Java7 的钻石，需要澄清

> ID：12862507
> 
> 赞同：4
> 
> 时间：2012-10-12T15:36:40.687
> 
> 标签：java

> **可能重复：**
> [使用菱形运算符进行双括号初始化（匿名内部类）](https://stackoverflow.com/questions/9773733/double-brace-initialisation-anonymous-inner-class-with-diamond-operator)

使用Java 7，为什么会出现以下问题

```
final List<String> a = new ArrayList<>() {
    {
        add("word");
    }
}; 
```

需要显式类型声明，如

```
final List<String> a = new ArrayList<String>() {
    {
        add("word");
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:44:24.043

恕我直言，一般来说，Java 避免类型推断。

无论如何，`<>`只有当编译器不需要知道使用了哪种泛型类型时才有效。对于匿名类，需要提供实际类型，因为编译器不会推断类型。

有效地`<>`关闭类型检查，而不是提供类型推断。匿名类存储实际的泛型类型，因此您必须提供它。

```
List<String> a = new ArrayList<>() 
```

很像

```
@SuppressWarnings("unchecked")
List<String> a = new ArrayList() 
```

但是对于匿名子类，编译器需要给它一个泛型类型。

# dynamics-crm - CRM 4.0 在发布期间抛出异常

> ID：12862514
> 
> 赞同：2
> 
> 时间：2012-10-12T15:37:08.257
> 
> 标签：dynamics-crm, dynamics-crm-4

我正在尝试发布从另一个租户导入的**Account**实体，并在跟踪日志中收到以下消息：

```
错误：对象引用未设置为对象的实例。
错误消息：对象引用未设置为对象的实例。
源文件：不可用
行号：不可用
请求网址：http://crm1.blablabl.com/tenant/AppWebServices/SystemCustomization.asmx
堆栈跟踪信息：[NullReferenceException：对象引用未设置为对象的实例。]
   在 Microsoft.Crm.ObjectModel.OrganizationUIService.LabelLoaderAllLanguages.LoadMetadataLabel（Int32 entityType，字符串属性名，ExecutionContext 上下文）
   在 Microsoft.Crm.ObjectModel.OrganizationUIService.LabelLoader.LoadCellLabel（Guid cellObjectId、String cellObjectColumnName、Int32 objectType、String attributeName、ExecutionContext 上下文）
   在 Microsoft.Crm.ObjectModel.OrganizationUIService.InsertFormLabels（IBusinessEntity 实体，ILabelLoader labelLoader，ExecutionContext 上下文）
   在 Microsoft.Crm.ObjectModel.OrganizationUIService.RetrieveMultipleWithAllLanguages（EntityExpression entityExpression，ExecutionContext 上下文）
   在 Microsoft.Crm.Metadata.OrganizationUIHelper.RetrieveInProductionHelper（Int32 objectTypeCode，ExecutionContext 上下文）
   在 Microsoft.Crm.Metadata.UsageHelper.CheckForms（Guid attributeId、DynamicMetadataCache mdCache、ExecutionContext 上下文）
   在 Microsoft.Crm.Metadata.UsageHelper.GetAttributeUsageInfo（Guid attributeId、Guid relationshipId、DynamicMetadataCache mdCache、ExecutionContext 上下文）
   在 Microsoft.Crm.Metadata.UsageHelper.GetEntityUsageInfo（Guid entityId、DynamicMetadataCache mdCache、ExecutionContext 上下文）
   在 Microsoft.Crm.Metadata.EntityService.GetUsageInfo（Guid entityId，ExecutionContext 上下文）
   在 Microsoft.Crm.Metadata.EntityService.GetUsageInfo（Guid entityId）
   在 Microsoft.Crm.Application.WebServices.SystemCustomization.EntityDelete.Execute（IUser 用户，Guid entityId）
   在 Microsoft.Crm.Application.WebServices.SystemCustomization.SystemCustomization.DeleteEntity（Guid entityId）

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:37:36.010

想出了我自己的解决方案：

帐户代码的实体类型为 1 - 因此，如果您在 CRM 数据库上运行以下查询：

```
SELECT  * FROM [MYTENANT_MSCRM].[dbo].[OrganizationUIBase] where [ObjectTypeCode] = 1 
```

您应该看到 2 行代表已发布和未发布的表单定义。

这些表格中的任何一个都存在问题（*是的，已发布的表格可能存在问题，这将阻止您发布有效的新表格*）。您需要做的是查看`FormXml`每行中的以下字段：

*   具有不存在字段的单元格
*   具有不再存在的关系的单元格

您也可以尝试消除过程。一次删除一个单元格，用相同的 更新两条记录`FormXML`，然后再次尝试发布。

这可能需要一些时间，但这将解决您的问题。

# .net - Is there a way to get distinct PartionKeys from a Table

> ID：12862520
> 
> 赞同：15
> 
> 时间：2012-10-12T15:37:20.110
> 
> 标签：.net, azure, azure-table-storage

Currently I'm using the PartitionKey to differentiate devices that are storing data into Azure Table Services. I'd like to build a viewer that allows me to browse that data, but it would be nice to be able to structure it so I can view data "by device", or by PartitionKey. The viewer app won't have any knowledge of what devices exist, so it would be great if I could somehow get back a list of distinct PartionKeys in a given Table. Is this possible, or am I going to be relegated to creating a meta-data table into which I insert a new row for each device, then use that for querying?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T18:07:17.083

Create a single table to store your partitions. Partition the table by the table names you use and add an entry for each partition you create.

```
public class PartitionEntry : TableServiceEntity { }

tableServiceContext.AddObject("TablePartitions", new PartitionEntry
{
    PartitionKey = "<table name>",
    RowKey = "<partition key>",
});
tableServiceContext.BeginSaveChanges(SaveChangesOptions.ContinueOnError, null, null); 
```

then just query this table to get a list of partitions. This is very manageable to me.

```
var tbl = tableServiceContext.CreateQuery<PartitionEntry>("TablePartitions");
return tbl.Where(i => i.PartitionKey == "<table name>")
          .Select(i => new { PartitionKey = i.RowKey, }); 
```

I bet this could be optimized.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-12T15:38:55.723

I don't think there is a way to retrieve all the partition keys. Here's a clever workaround, though: [https://docs.microsoft.com/en-gb/archive/blogs/avkashchauhan/retrieving-partition-key-range-in-windows-azure-table-storage](https://docs.microsoft.com/en-gb/archive/blogs/avkashchauhan/retrieving-partition-key-range-in-windows-azure-table-storage)

To quote from Avkash's blog:

> Digging further, I found there is no built in API to get a list of partition keys, instead I would have to create a solution for myself. So I end up inserting a single dummy row into each partition and when I wanted to get a list of partition keys I just query for those dummy items and they gave me the list I was looking for.

I'm certain you will already have seen this, but for others who may happen on this question, I think this is the best guide to table service functionality: [http://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-how-to-use-tables/](http://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-how-to-use-tables/) with examples and links to the detailed API docs.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-12T20:38:22.363

Regretfully, Azure Tables don't have functions like distinct or others - consider it a structured key-based storage like a Dictionary in memory. Any operation you perform, will have to iterate through all the items in order to get a subset of them unless know which keys you want to load first and process that sub-list.

I would, personally, simply use a second azure table and store the partition keys there (as row keys) which then gives you an opportunity to group these by another factor. Or simply use a single partition key for this second table.

This would give you the best performance and the least amount of headache.

Sometimes, the simplest approach is the best one as you can just get the job done.

Hope this helps,

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-09T20:55:27.823

i tried similar approach before with:

```
TableQuery queryRows = new TableQuery() { SelectColumns = new List<string> { "PartitionKey" } };
... 
var tableClientSrc = storageAcctScr.CreateCloudTableClient();
var tablesSrc = tableClientSrc.ListTables();
var tableSrc = tablesSrc.FirstOrDefault(o => o.Name.Equals(nameSrc));
int cntSrc = tableSrc.ExecuteQuery(queryRows).Count();
... 
```

upper as well as yours work very slow on large (run for 70 mln rows table - about 2 hours) or medium but with many properties table

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-08-13T17:52:36.910

This will get you a list of all the partition keys in your table:

```
ConcurrentDictionary<string, byte> partitionKeys = new ConcurrentDictionary<string, byte>();
Parallel.ForEach(myTable.ExecuteQuery(new TableQuery()), entity =>
{
    partitionKeys.TryAdd(entity.PartitionKey, 0);
}); 
```

Even if you have a large table, it should populate quickly becauwse it is running in parallel. There is no "ConcurrentSet," if you will, so we have to use ConcurrentDictionary. The byte is just a placeholder; all the values will be in partitionKeys.Keys.

# xml - 为什么 Excel (xlsx) 在 xml 中保存一些带有附加值的值？

> ID：12862524
> 
> 赞同：1
> 
> 时间：2012-10-12T15:37:33.760
> 
> 标签：xml, excel, decimal

> **可能重复：**
> [浮点不准确示例](https://stackoverflow.com/questions/2100490/floating-point-inaccuracy-examples)

我正在解析 xlsx 文件并遇到了这种行为。如果不描述重现问题的步骤，我不知道如何解释它。

```
 1\.  Create new blank Excel file (xlsx)
 2\.  Type '8.8' into cell A1
 3\.  Save file
 4\.  Close Excel, rename file with .zip extension and open
 5\.  Find sheet1.xml and open
 6\.  Value for 8.8 in A1 will be saved as '8.8000000000000007' 
```

这给我带来了一个问题，因为当我解析 Excel 文件时，我想获取输入的值，'8.8' 而不是 '8.8000000000000007'。

有谁知道Excel为什么这样做？

编辑：当我打开该文件以仅显示“8.8”而不显示“8.8000000000000007”时，Excel 怎么知道？Excel 是否在特定的小数位四舍五入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:50:22.537

具有有限十进制表示的浮点数不一定具有有限二进制表示。转换是有损的。

因为 8.8 是分母 (5) 不是 2 的幂的分数，所以它的二进制浮点表示是无限的。应用程序用来存储它的底层数据类型（在本例中为 Excel）是有限精度的，因此表示被截断。

# plsql - PL/SQL：知道一个名为 Birth_Date 的列，我如何计算 AGE？

> ID：12862525
> 
> 赞同：3
> 
> 时间：2012-10-12T15:37:33.633
> 
> 标签：plsql

我有一张由一列组成的表格`(BIRTH_DATE)`。我如何使用 sysdate 从 my`BIRTH_DATE`和`GROUP BY`它们的所有行中减去？

更清楚：

这是我获取的内容，现在我想在下表中为所有行添加一个 AGE 列

```
ID     Birth_Date
___    ___________
1       02-JAN-63
2       23-OCT-31
3       30-DEC-35
4       06-MAY-83 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T06:22:50.593

要根据通常的标准（即根据自出生以来经过的日历年数）获取一个人的年龄，考虑到闰年，您可以使用 MONTHS_BETWEEN 运算符：

```
SELECT id, MONTHS_BETWEEN(sysdate, birth_date) / 12 age FROM my_table; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T16:04:01.507

简单地减去`birth_date`：`sysdate`

```
select id, (sysdate - birth_date) / 365 age from my_table; 
```

减去日期会得到天数，因此除以 365 将得到十进制年份。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-19T14:06:35.257

已经很久了。希望这可以帮助。

```
declare
   patAge int;
   patName patient.fname%type;
   cursor agePat is 
      SELECT fname, MONTHS_BETWEEN(sysdate, dob) / 12 age FROM patient;
begin
   open agePat;
   loop
      fetch agePat into patName, patAge;
      exit when agePat%notfound;
      dbms_output.put_line('Patient Age = ' || patAge || ' || Patient Name = ' || patName);
   end loop;
   close agePat;
end;
/ 
```

这里的patAge是存储年龄值，patName是存储表中患者姓名的值。

我将@JeffreyKemp 解决方案变成了pl sql 代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-24T17:03:17.763

SELECT TRUNC(months_between(SYSDATE,birthDate) / 12) AS 年龄

# python - 堆叠的 matplotlib 栏中的替代颜色

> ID：12862529
> 
> 赞同：3
> 
> 时间：2012-10-12T15:37:42.933
> 
> 标签：python, matplotlib

我在 matplotlib 中生成堆积条形图（在 Windows 7 上使用 Python 2.7）。

因为我想用它来成对比较来自 2 个数据集的数据，所以我想为每个 2nd 条使用不同的颜色。谁能告诉我如何实现这一目标？

我的条形图看起来基本上是这样的：

```
import numpy
import matplotlib.pyplot as plt

fig = plt.figure()
ax1 = fig.add_subplot(1,1,1)

IDs = ["1","A","2","B","3","C","4","D","5","E"]
N = len(IDs)

property1 = numpy.array([1,3,4,2,3,5,6,7,3,2])
property2 = numpy.array(range(10))
property3 = numpy.array(range(10,0,-1))

ind = numpy.arange(N)
width = 0.8

p1 = ax1.bar(ind, property1, width, color='red')
p2 = ax1.bar(ind, property2, width, color='blue', bottom=property1)
p3 = ax1.bar(ind, property3, width, color='green', bottom=property1 + property2)
plt.xticks(ind+width/2., IDs )

plt.show()
plt.close() 
```

所以我想为标有字母的条使用一种配色方案，另一种用于标有数字的条（因为例如，“1”和“A”形成一对 - 它们在两种不同的实验条件下代表相同的样本，这就是为什么我希望它们彼此相邻）。

理想情况下，如果可以调整宽度以使一对钢筋之间没有间隙（但对之间有间隙），那将非常好。

但是现在，我不知道该怎么做，所以任何建议都会很棒！

（我可以单独使用两个“数据集”，这更容易吗？也许做两个有很大差距的图，彼此相交？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:23:35.610

您可以通过切片更优雅地做到这一点。一个可能更好的解决方案是对数据进行去交错处理。

```
IDs = ["1","A","2","B","3","C","4","D","5","E"]

N = len(IDs)
fig = plt.figure()
ax1 = fig.add_subplot(1,1,1)

set_count = 2
set_label = np.vstack([j*ones(len(IDs)//set_count) for j in range(set_count)]).T.ravel()

property1 = numpy.array([1,3,4,2,3,5,6,7,3,2])
property2 = numpy.array(range(10))
property3 = numpy.array(range(10,0,-1))

props = [property1,property2,property3]

ind = numpy.arange(N/set_count)
width = 0.9
b_width = 0.9/set_count

color_sets = [['red','green','blue'],['black','magenta','yellow']]

for j in range(set_count):
    tmp_accum = np.zeros(len(props[0]))
    for k in range(len(props)):
        ax1.bar(ind +j*b_width, props[k][set_label==j], width=b_width, color=color_sets[j][k], bottom=tmp_accum[set_label==j])
        tmp_accum += props[k]

lab_ind = []
for j in range(set_count):

    lab_ind.append(ind + (j+.5)*b_width)

plt.xticks(np.vstack(lab_ind).T.ravel(), IDs ) 
```

它需要一些完整性检查，但它可以工作并且应该可以轻松扩展到 2 个以上的类和 3 个以上的属性（您只需要确保所有长度同步，使用`itertools.cycle`颜色可能会有所帮助）。

![结果图片](../Images/86e30c3e508a0bf688c1e67118466b2d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:41:04.223

找到了一种可行的方法，尽管它看起来很不雅：

```
import numpy
import matplotlib.pyplot as plt

fig = plt.figure()
ax1 = fig.add_subplot(1,1,1)

IDs = ["1","A","2","B","3","C","4","D","5","E"]

N = len(IDs)

property1_1 = numpy.array([1,0,4,0,3,0,6,0,3,0])
property1_2 = numpy.array([0,3,0,2,0,5,0,7,0,2])
property2_1 = numpy.array([1,0,2,0,3,0,4,0,5,0])
property2_2 = numpy.array([0,6,0,7,0,8,0,9,0,10])
property3_1 = numpy.array([10,0,9,0,8,0,7,0,6,0])
property3_2 = numpy.array([0,5,0,4,0,3,0,2,0,1])

ind = numpy.arange(N)
width = 0.8

p1 = ax1.bar(ind, property1_1, width, color='red')
p2 = ax1.bar(ind, property2_1, width, color='blue', bottom=property1_1)
p3 = ax1.bar(ind, property3_1, width, color='green', bottom=property1_1 + property2_1)

p4 = ax1.bar(ind-0.2, property1_2, width, color='#FF6666')
p5 = ax1.bar(ind-0.2, property2_2, width, color='#6699FF', bottom=property1_2)
p6 = ax1.bar(ind-0.2, property3_2, width, color='#33CC33', bottom=property1_2+property2_2)
plt.xticks(ind+width/2., IDs )

plt.show()
plt.close() 
```

为了其他人有这个问题，我就是这样做的。我认为这不是最佳选择，并希望得到更多答案。

# php - symfony2 获取命令行执行

> ID：12862530
> 
> 赞同：1
> 
> 时间：2012-10-12T15:37:45.197
> 
> 标签：php, symfony

我正在 symfony2 中创建一个控制台命令。我需要记录我运行的已执行行。怎么得到那条线？

所以如果我运行：

```
php app/console my-command fileName.txt --myoption=100 
```

我想获取值“php app/console my-command fileName.txt --myoption=100”

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:15:42.240

我将问题解释为：在命令代码本身中，您想确定在命令行上写了什么，以便最终执行该 Symfony 命令？

如果这是正确的，那么我认为不可能完全得到它。但是，您应该能够通过执行以下操作获得 [几乎？] 相同的效果：

```
implode(" ", $_SERVER['argv']) 
```

例子：

```
class SomeCommand extends ContainerAwareCommand
{
    protected function execute(InputInterface $input, OutputInterface $output)
    {       
        $output->writeln( implode(" ", $_SERVER['argv']) );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:16:00.897

如果您查看 ArgvInput 类，您可能会注意到 argv 值保存在私有属性中，没有任何 getter。基本上这意味着您无法访问此信息。当然你可以直接使用 $_SERVER['argv'] 但这不是很好的解决方案。

所以，似乎没有“干净”或“简单”的方式来实现你想要的。

但是，您可以访问所需的所有信息。

```
$this->getName(); // gets name of command (eg. "my-comand")
$input->getArguments(); // gets all arguments (eg. "fileName.txt")
$input->getOptions(); // get all options (eg. --myoption => 100) 
```

你可以把它放在一根弦上。但这是在验证之后，所以如果你也需要记录错误的命令（我的意思是使用错误的参数等），这不会通过考试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-11T16:10:12.867

更好的解决方案是使用`$input->__toString()`

```
protected function execute(InputInterface $input, OutputInterface $output)
{
    $this->info(\sprintf('Executing %s', $input->__toString()));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-23T14:33:18.677

您可以使用 Symfony Request 对象。

```
use Symfony\Component\HttpFoundation\Request;

$request = Request::createFromGlobals();
foreach ($request->server->get('argv') as $arg) {
 echo $arg;
} 
```

# java - Spring - 基于 XML bean 定义更新 java 类

> ID：12862531
> 
> 赞同：2
> 
> 时间：2012-10-12T15:37:46.773
> 
> 标签：java, spring, auto-update

我们使用的是 Spring 3，我们所有的 bean 声明和属性映射都是通过 XML 完成的。我的任务是更新 java 类以`@Resource`在需要的地方使用。我们有很多课。

我们使用 Eclipse 作为 IDE。

我从来没有写过更新Java代码的脚本，所以我想我会就如何解决这个问题寻求一些建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:12:30.657

我在将遗留 EJB 服务转换为 Spring bean 时遇到了类似的问题`@Stateless`——其中有数百个，我不想仅仅为了添加`@Bean`或`@Service`注释而更改所有服务。

我发现组件扫描工具最有用：

```
<context:component-scan base-package="com.example.businessservices">
    <context:include-filter type="annotation" expression="javax.ejb.Stateless"/>
</context:component-scan> 
```

查看过滤器类型和表达式还有哪些其他可用选项，并使用与您的条件匹配的选项来识别需要成为 bean 的类。

# c++ - WDK C++ 项目需要更改调试编译器严格性

> ID：12862532
> 
> 赞同：0
> 
> 时间：2012-10-12T15:37:50.230
> 
> 标签：c++, visual-studio-2010, compilation, driver, wdk

我对 WDK 和 Visual Studio 的驱动程序比较陌生。

当我在调试模式下编译项目时，我没有收到任何警告或错误，并且项目编译并运行良好。但是，当我在发布模式下编译时，编译停止并且我收到一条错误消息，指出已找到警告并被视为错误。详细信息将转储到项目根目录中的日志文件中。

我想做的是让调试模式下的编译器与发布模式编译器一样严格。目前它们都处于默认状态。发布模式似乎更严格。我正在使用 VS 2010 和 WDK。我不知道该怎么做。如果此设置处于 VS 级别而不是每个项目级别，那将是理想的。

此外，如果警告显示在 VS IDE 而不是日志文件中，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:59:44.307

Visual Studio 对调试和发布模式有不同的配置设置。

检查项目>项目属性->链接器等是否有相关配置......

如果调试和发布模式配置不匹配，请更改它。这应该工作

——阿里·查查尔——巴基斯坦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T06:37:00.617

调试和发布编译中存在代码差异，可能会导致与编译器严格性无关的警告。最明显的是在日志中；在发布版本`KdPrint/KdPrintEx`调用将被丢弃。很有可能您的某些函数输入参数仅用于打印，如果它被省略，您最终会收到未使用的参数警告 - 这是调试与发布编译中最常见的区别。

即使您有 VS2010 解决方案，您的驱动程序也不是使用 VS 编译器编译的，而是使用 WDK 编译器编译的，因此 VS 设置在这里无关紧要。您可以将您的解决方案迁移到集成了驱动程序支持的 VS2012。

# c# - RSA 密钥私有指数大小

> ID：12862533
> 
> 赞同：1
> 
> 时间：2012-10-12T15:37:53.087
> 
> 标签：c#, .net, cryptography, rsa, asn.1

我需要解析 ASN.1 DER 编码的 RSA 2048 私钥以获取不同的组件，例如模数、指数等。当我浏览密钥时，发现一些组件具有前导零。这些零应该被跳过吗？如果是，我如何区分作为组件一部分的零与这些前导零。对于我的具体情况，私有指数字段的长度为 256，第一个字节为 0。这是指数的一部分还是应该被跳过。对于 RSA 2048 密钥，私有指数是否总是大小为 256 字节？

[更新] 似乎 ASN.1 DER 编码值是按大端排序的。因此，将前导零作为组件的一部分询问是没有意义的，它应该被跳过。所以问题仅限于私人指数的大小。我有一个 RSA 2048 密钥，私有指数大小为 255 字节。我已经解析了不同的私钥组件并填充了**'RSAParameters'**的对象。尝试使用**RSACryptoServiceProvider.ImportParameters()**导入它会引发**CryptographicException**，并显示错误消息“错误数据”。ImportParameters() 是否期望指数大小也为 256 字节？是否有任何工具可以用来验证不同的关键组件是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:52:32.133

在 BER 和 DER 中，整数被编码为 2s 补码。这意味着正数的第一位必须为零。这有时需要在开头有一个额外的零字节。请注意，将整数值的前 9 位全部编码为零是无效的 BER/DER。添加额外的零字节只是为了防止非零第一位被解释为负数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:07:50.720

微软的实施没有大多数人那么宽容。这里已经有几个问题（和答案）：

*   [使用零字节前缀消除解析 RSACryptoServiceProvider.ImportParameters 中的错误？](https://stackoverflow.com/questions/3816259/parsing-bug-in-rsacryptoserviceprovider-importparameters-with-zero-byte-prefix-e/6823081#6823081)
*   [读取 pem 文件，在 DQ 参数中获取 63 个字节](https://stackoverflow.com/questions/6646159/read-pem-file-get-63-bytes-in-dq-parameter/6822487#6822487)
*   [Microsoft RSA CSP 密钥大小](https://stackoverflow.com/questions/7816066/microsoft-rsa-csp-key-size/7823565#7823565)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:13:05.243

PKCS#1 关键组件使用 ASN.1 有符号整数进行编码（ASN.1 不知道无符号整数作为数据类型）。

因此，如果一个正数是以字节为单位的密钥大小，那么第一位需要为无符号表示法中的 1。因此，有符号表示法需要一个额外的字节设置为 00h 以使其成为一个正的有符号数。请注意，私有指数仅限于模数的值，但有时可能比模数*小*几个字节。

由于模数需要是精确的密钥大小，并且由于密钥大小几乎总是 8 的倍数，因此它*总是*需要 00h 填充。

* * *

如果数字是以*位*为单位的密钥大小，则根据定义，必须打开第一位。例如，如果您有一个八位数字，那么您必须将其表示为`1XXX XXXX`。这意味着数字范围从 2^7 到 2^8（不包括）。现在请记住，RSA 密钥大小通常可以除以 8（512、1024、2048，你知道分数）。这意味着与密钥大小相同的数字将始终设置其第一位。因此，作为有符号数，它需要有一个填充字节。

# sql - 从表中选择链式记录

> ID：12862535
> 
> 赞同：2
> 
> 时间：2012-10-12T15:37:58.297
> 
> 标签：sql, postgresql

> **可能重复：**
> [是否可以进行递归 SQL 查询？](https://stackoverflow.com/questions/53108/is-it-possible-to-make-a-recursive-sql-query)

想象一个应用程序，其中想要保留对数据库中“记录”所做更改的历史记录。

这可以通过引入指向新版本记录的列“revised_id”来实现。

```
id  value                               revised_id
--------------------------------------------------
1   Initial value...                    3
2   Value of a different record         Null
3   Value which has been altered        4
4   Value which has been altered again  Null 
```

该表说明了两条“实际记录”，其中一条已更改两次

获取所有最新版本仅意味着将 revision_id = null 添加到 WHERE 子句。简单地获取以前的版本： SELECT * FROM table WHERE revision_id = $current_id

我的问题是：是否可以选择给定记录的所有先前版本？（问题是简单的比较是不够的，因为要选择的记录是“链接”在一起的。）

# ruby-on-rails-3 - 将OR与where子句一起使用时Rails 3错误

> ID：12862540
> 
> 赞同：0
> 
> 时间：2012-10-12T15:38:18.567
> 
> 标签：ruby-on-rails-3

在 Rails 中使用 Where 子句时遇到了一个奇怪的问题。我想这与我的 OR 运算符语法有关。这是我的查询：

```
 Cookie.where("ID = ? OR ID = ? OR ID = ? OR ID = ?", chocolate.to_s, sugar.to_s, peanut_butter.to_s, oatmeal.to_s) 
```

当我尝试执行查询时，我的应用程序只是无休止地挂起。但是，如果我提交如下查询：

```
 Cookie.where("ID = ?", chocolate.to_s) 
```

我得到了预期的结果。对于此 where 子句的正确格式的任何帮助将不胜感激。谢谢。

**更新** 我进入 Rails 控制台并按照您的建议进行操作。结果是这样的：

```
 SELECT \"TBLCookies\".* FROM \"TBLCookies\"  WHERE (ID in ('4','3','2','1')) 
```

这似乎是正确的。我打开 SQL Developer，将这个查询粘贴进去，然后运行它。我得到了预期的结果。所以那里的一切似乎都很好。但是，当我尝试在 rails 控制台中运行查询时，我什么也得不到。控制台只是无限期地挂起。任何对可能出现问题的见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:57:26.500

为什么不这样做

```
Cookie.where("ID in (?)",[chocolate, sugar, peanut_butter, oatmeal].collect(&:to_s)) 
```

# django - django 多数据库路由不适用于多个模式

> ID：12862541
> 
> 赞同：6
> 
> 时间：2012-10-12T15:38:19.203
> 
> 标签：django, oracle, orm, django-models, django-orm

我在 oracle 后端运行 django。我需要使用两种模式——一种用于遗留数据库，第二种用于所有 django 相关表。

所以这是我的设置。数据库：

```
APPS_DB = 'apps'
DATABASES = {

    'default' : { 
        'ENGINE': 'django.db.backends.oracle'
        'NAME': 'django',                      
        'USER': 'django-tables',                      
        'PASSWORD': '****',                  
        'HOST': 'localhost',                       
        'PORT': '1531',                     
    },

    APPS_DB : { 
        'ENGINE': 'django.db.backends.oracle', 
        'NAME': 'django',                      
        'USER': 'legacy-stuff',                      
        'PASSWORD': '****',                 
        'HOST': 'localhost',                     
        'PORT': '1531',                      
     },
} 
```

我还定义了路由器：

```
class MyRouter(object):
    """A router to control all database operations on models"""

def __init__(self):
    aux = []
    for app in settings.INSTALLED_APPS:
        if not app.endswith('myapp'):
            aux.append(app)
    self.djangoStuff = tuple(map(lambda x: x[x.rfind('.')+1:], aux))

def is_django_stuff(self, model):
    return model._meta.app_label in self.djangoStuff

def db_for_read(self, model, **hints):
    "Point all django apps models to separate DB"
    logger.info("READ from " + model._meta.app_label)
    if self.is_django_stuff(model):
        logger.info("Will be directed to default DB")
        return None
    logger.info("Will be directed to legacy DB")    
    return settings.APPS_DB

def db_for_write(self, model, **hints):
    "Point all django apps models to separate DB"
    logger.info("WRITE")
    if self.is_django_stuff(model):
        return None
    return settings.APPS_DB

def allow_relation(self, obj1, obj2, **hints):
    "Allow any relation"
    logger.info("ALLOW REL")
    return True

def allow_syncdb(self, db, model):
    "Allow syncdb for all managed objects"
    logger.info("ALLOW SYNC")
    if db == 'default' and self.is_django_stuff(model):
        return True
    if db != 'default' and not self.is_django_stuff(model):
        return True
    return False 
```

现在我有一个非常简单的模型：

```
class Poll(models.Model):
    question = models.CharField(max_length=200)
    user = models.ForeignKey(User)
    pub_date = models.DateTimeField('date published') 
```

我做了两个同步数据库：

```
python manage.py syncdb
python manage.py syndb --database apps 
```

一切顺利。然后我使用'python manage.py shell'创建投票对象

```
superuser = User.objects.all()[0]
p = Poll(question="foo", user = superuser, pub_date = datetime.now())
p.save() 
```

我尝试从民意调查中检索用户：

```
 a = Poll.objects.all()
  b = len(a)
  b = a[0]
  c = b.artist 
```

我在路由器中启用了日志记录，所以我看到最后一个查询将被定向到正确的数据库：

```
READ from myapp
Will be directed to apps DB
READ from myapp
Will be directed to apps DB
READ from auth
Will be directed to default DB 
```

我什至可以看到实际的 SQL 语句：

```
(0.005) SELECT "AUTH_USER"."ID", "AUTH_USER"."USERNAME", "AUTH_USER"."FIRST_NAME",    "AUTH_USER"."LAST_NAME", "AUTH_USER"."EMAIL", "AUTH_USER"."PASSWORD", "AUTH_USER"."IS_STAFF", "AUTH_USER"."IS_ACTIVE", "AUTH_USER"."IS_SUPERUSER", "AUTH_USER"."LAST_LOGIN", "AUTH_USER"."DATE_JOINED" FROM "AUTH_USER" WHERE "AUTH_USER"."ID" = :arg0 ; args=(1,) 
```

但我收到错误：

```
 File "<console>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/fields/related.py", line 350, in __get__
    rel_obj = qs.get(**params)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py", line 361, in get
    num = len(clone)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py", line 85, in __len__
    self._result_cache = list(self.iterator())
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py", line 291, in iterator
    for row in compiler.results_iter():
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/sql/compiler.py", line 763, in results_iter
    for rows in self.execute_sql(MULTI):
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/sql/compiler.py", line 818, in execute_sql
    cursor.execute(sql, params)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/backends/util.py", line 40, in execute
return self.cursor.execute(sql, params)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/backends/oracle/base.py", line 675, in execute
    return self.cursor.execute(query, self._param_generator(params))
DatabaseError: ORA-00942: table or view does not exist 
```

所以我的问题是——我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:23:50.870

跨数据库外键本质上是无效的，因为 Django 正在为具有引用完整性的“适当”关系数据库建模，如果模型存储在完全不同的物理存储中，则无法在数据库级别强制执行。

无论如何，出于这个原因，Django 必须假定任何对象都存在于与您最初检索的数据库相同的数据库中。在您的情况下，它从您的旧数据库中获取了您的 Poll 对象，因此它也必须在那里寻找您的用户（或艺术家或其他任何东西）。

对于像这样的简单查询，很容易解决，例如：

```
poll = Poll.objects.all()[0]
user_id = poll.user_id # _id after the name of your "Foreign Key" field - which cannot really be an FK
user = User.objects.get(user_id) # This will be a new query and can use a different database, it will check the router 
```

对于更复杂的查询（连接等），您经常会发现您需要构建列表或 id 集，并使用 filter(id__in=your_list_of_ids) 进行查询。

根据记录的数量，这样做可能会降低性能或内存使用量。（但在某些情况下，您的查询实际上会比原始连接快得多，这完全取决于您的应用程序。）您可能需要将您的 id 列表分成批次，或者您的查询可能会变得太长，等等。但没有这些问题是无法克服的。

当您处理来自另一个数据库的 id 时，由您来执行参照完整性。有时您需要设置批处理来处理整理数据。

这一切听起来都是错误的，但这种关注点分离，特别是如果你可以限制依赖关系，并且只在一个方向上，可能是完全正确的方法。

# javascript - 等效于 javascript 中的 request.getParameterValues()

> ID：12862542
> 
> 赞同：0
> 
> 时间：2012-10-12T15:38:24.713
> 
> 标签：javascript, jquery, jsp, submit

例如在表单中，我有 2 个或更多具有相同名称的元素，如下面的代码：

```
<form name="form1" method="post" action="saveToDb.jsp">
    <span id="feedBackList">
    <table>
        <thead>
            <tr>
                <td>column1</td>
                <td>column2</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type=text id=field1 name=field value="firstvalueTosavetoDb"></td>
                <td><input type text id="field2 name=field value="secondvalueTosavetoDb"></td>
            </tr>
        </tbody>
    </table>
    </span>
</form> 
```

我想捕获这两个字段的值并将其保存到数据库中。这可以通过提交表单来完成，在我的 saveToDb.jsp 文件中，我只需要使用

```
String[] value = request.getParameterValues("field"); 
```

遍历数组并将其保存到数据库。问题是我不想提交表单，因为页面将被刷新。我想要实现的是，我想使用 jQuery.get 方法并传递值并在不刷新页面的情况下查看值并将其放入我的`<span>`标签中，如下面的代码

```
 var $p = jQuery.noConflict(){
    function submitAndView(){
        //here is where i should get the value
        var span = document.getElementById("feedBackList");
        $p.get("saveToDb",{pass the value here}, function(data){
            span.innerHTML = data
    });

} 
```

问题是`request.getParameterValues`JavaScipt 或 jQuery 中的等价物。p/s：`<input>`元素数量不固定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:49:24.263

您能否在表单中添加一个名称和 onsubmit 属性，调用一个验证 JS 函数，该函数循环遍历所有具有相同名称的字段并构造某种类型的字符串或数组，以便您轻松地将信息添加到您的数据库中？例如：

```
<form name=form1 action='#' method=post onsubmit='return validateForm()'>
<fieldset>
<input type=text name='field[]' value='firstValue'>
</fieldset>
</form>

function validateForm(){
count = 0;
str = '';
for(x=0; x<document.form1.elements["field[]"].length; x++){
str += document.form1.elements["field[]"][x].value + ','
count++;
}
//submit form data 
```

# sencha-touch - Sencha Touch 从同一个 Json 维护不同的存储

> ID：12862546
> 
> 赞同：0
> 
> 时间：2012-10-12T15:38:32.780
> 
> 标签：sencha-touch, sencha-touch-2

我希望能够从同一个 json 维护不同的商店，其中每个商店的模型都是相同的。每个商店都需要根据其根属性分配进行更新。请参阅下面的示例 json、商店和模型，在这种情况下，每个商店都将根据 json 的根属性值（类别 1、类别 2 等）进行更新。目标是能够将我的应用程序中的嵌套列表动态绑定到不同的商店，而不是调用 setProxy 来更改单个商店的 url 设置。此外，json 需要采用这种格式。感谢您的帮助，如果我可以提供澄清或回答任何问题，请告诉我。

杰森：

```
{
    "items": [
        {
            "name": "category 1",
            "status": "",
            "displaytext": "",
            "items": [
                {
                    "name": "",
                    "status": "",
                    "displaytext": "",
                    "items": [
                        {
                            "name": "",
                            "status": "",
                            "displaytext": "",
                            "items": [
                                {
                                    "name": "",
                                    "status": "",
                                    "displaytext": "",
                                    "leaf": true
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "category 2",
            "status": "",
            "displaytext": "",
            "items": [
                {
                    "name": "",
                    "status": "",
                    "displaytext": "",
                    "items": [
                        {
                            "name": "",
                            "status": "",
                            "displaytext": "",
                            "leaf": true
                        }
                    ]
                }
            ]
        },
        {
            "name": "cateory 3",
            "status": "",
            "displaytext": "",
            "items": []
        },
        {
            "name": "category 4",
            "status": "",
            "displaytext": "",
            "items": []
        }
    ]
} 
```

模型：

```
Ext.define('MyApp.model.myModel', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {
                name: 'name',
                type: 'string'
            },
            {
                name: 'status',
                type: 'string'
            },
            {
                name: 'displaytext',
                type: 'string'
            }
        ]
    }
}); 
```

存储 1、2、3 等：

```
Ext.define('MyApp.store.storeCategory1', {
    extend: 'Ext.data.TreeStore',
    requires: [
        'MyApp.model.myModel'
    ],

    config: {
        model: 'MyApp.model.myModel',
        storeId: 'myStore',
        autoLoad: false,
        proxy: {
            type: 'ajax',
            url: '/path/to/file.json',
            reader: {
                type: 'json',
                rootProperty: 'items'
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:57:50.317

我认为您最好的选择是独立于商店的代理发出服务器请求。成功后，根据需要将数据拆分到不同的存储中。以这种方式预处理数据很好，尤其是当您需要将一个大型数据响应拆分为多个数据存储时。例如：

```
Ext.Ajax.request({
    url: 'path/to/file.json',
    success: function(response){
        // process server response here
        var json = Ext.decode(response.responseText);
        for(var i=0, l=json.items.length, i<l; i++){
            // start distributing the data to your different stores here
        }
    }
}); 
```

希望这可以帮助。

# python - 在 python 中将 2D 函数拟合到具有错误的 2D 数据集

> ID：12862548
> 
> 赞同：1
> 
> 时间：2012-10-12T15:38:46.680
> 
> 标签：python, numpy, least-squares

我有一个 2D np.array 作为实验数据，所以形状像（50,50），对应于我的凸轮的像素。对于每个点的错误，我都有第二个相同形状的 np.array。所以我的错误不仅仅是 sqrt(n)。我想使用这些错误进行拟合，因此使用 sum( (experimental - function)^2 / (error of the pixel)^2 )。

到目前为止，为了处理 2D，我只是将我的错误函数展平为最小平方的输入。这完美地工作。因此，考虑到错误，我有合适的参数。但是有一个问题：我如何告诉 leastsq 它也必须使用它们来计算我的 fitparameters 的误差？我查看了curve_fit，但它似乎绝对不是为我的情况设计的。在我看来，它需要一个函数，您可以将 x 作为输入。但是通过我的卷积，我不能简单地将 x 值转换为 y 值。

那么有没有办法用 minimumsq、curve_fit 或其他函数来做到这一点？

这是脚本，没有考虑 fitparameters 的错误：

```
#img is my experimental data, errimg the array with the errors.
#My fitfunction is a convolution of a bivariate_normal with a circular
#box-function given by a function i called ellipsenmatrix.

tx = np.arange(-100,100,1.)    
ty = np.arange(-100,100,1.)
X, Y = np.meshgrid(tx, ty)

circ= lambda x: ellipsenmatrix([24.,24.,x],shape=img.shape,kreis='on')

def fitfunc(v):
    conv= ndimage.convolve( circ(v[4]), mlab.bivariate_normal(X, Y, v[0], v[1], v[2], v[3], 0) )
    conv/=np.sum(conv)
    return conv

errfunc = lambda v: ( (fitfunc(v) - img) /errimg ).flatten()
vinit=[2.5,2.5,0,0,27.5]
vend, kovmtx, einstell, mesg, success = optimize.leastsq(errfunc, vinit, full_output=True)

print vend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:05:17.393

这是我写的一个简短的函数，灵感来自于 curve_fit 的作用。你可以给她一个二维数组作为错误函数的输入，但不是必须的。误差函数是 (fitfunc(v) - img) /errimg，其中 errimg 是一个与 img 形状相同的矩阵，在每个数据点上都充满了错误。输出与 leastsq 相同，但协方差矩阵已得到纠正。

```
def leastsqplus(func, x0, args=(), Dfun=None, full_output=0, col_deriv=0,ftol=1.49012e-8, xtol=1.49012e-8, gtol=0.0, maxfev=0, epsfcn=0.0, factor=100, diag=None):
    func=func.flatten()
    vend, kovmtx, einstell, mesg, success = optimize.leastsq(func, x0, args, Dfun, full_output, col_deriv, ftol, xtol, gtol, maxfev, epsfcn, factor, diag)
    X2 = np.sum( func(vend)**2 )
    ndf = ( len(func(vend)) - len(vend) )
    X2ndf= X2 / ndf
    kovmtx *= X2ndf
    return vend, kovmtx, einstell, mesg, success 
```

# jquery - 更改 jquery 移动可折叠集上的文本颜色？

> ID：12862551
> 
> 赞同：1
> 
> 时间：2012-10-12T15:38:51.027
> 
> 标签：jquery, jquery-mobile

如何解决/更改折叠和展开状态标题中的文本颜色？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:45:18.617

您可以在事件`collapse`中手动更改折叠/展开标题的颜色：`expand`

```
$("#mycollapsible").bind('expand', function() {

    // Change color here

}).bind('collapse', function() {

    // Change color here

}); 
```

`#mycollapsible`您的可折叠集的 ID在哪里。

* * *

**完整的工作示例：**

```
<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1">   

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 

<script>

function toggle_color() {
    $("#mycollapsible .ui-icon-arrow-r").parent().find(".ui-btn-text").css('color', "red");
    $("#mycollapsible .ui-icon-arrow-l").parent().find(".ui-btn-text").css('color', "blue");
}

$(function() {

    // Initialization
    toggle_color();

    // Binding collapse / expand event
    $("#mycollapsible").bind('expand', function() {
        toggle_color();
    }).bind('collapse', function() {
        toggle_color();
    });
});

</script>
</head>

<body>
<div data-role="page">
  <div data-role="header">
    <h1>My Title</h1>
  </div>
  <!-- /header -->

  <div data-role="content">
    <p>Hello world</p>

    <div id="mycollapsible" data-role="collapsible-set" data-iconpos="right" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-l">
      <div data-role="collapsible" data-collapsed="true" >
        <h3>Section 1</h3>
        <p>I'm the collapsible set content for section 1.</p>
      </div>
      <div data-role="collapsible" data-collapsed="true">
        <h3>Section 2</h3>
        <p>I'm the collapsible set content for section 2.</p>
      </div>
    </div>

  </div>
  <!-- /content --> 

</div>
<!-- /page -->

</body>

</html> 
```

希望这可以帮助 ;）

# c# - Web 浏览器挂钩和自动化

> ID：12862560
> 
> 赞同：0
> 
> 时间：2012-10-12T15:39:30.887
> 
> 标签：c#, c++, .net, browser, hook

我正在开始对一个项目进行一些研究，该项目涉及使用来自 SAPI 的语音反馈来导航网络。盲人和视障人士将使用此应用程序通过当前所选对象的完整语音反馈以及阅读整个页面和填写表格的能力来浏览网络。我在 SAPI 和可访问性词方面有大量经验，但是我对 HTML 和承担这个项目的最佳方法不太熟悉，我想向可能在这方面有经验的人寻求指导。我已经解释过的基本概念是使盲人用户能够在没有屏幕阅读器的情况下使用这个独立的产品，并且能够使用键盘导航网页并从我创建的合成器接收语音反馈。我可以使用辅助功能 API'

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:13:11.707

IE 支持所有可访问性界面（我相信所有其他浏览器也支持 - [SO 示例](https://stackoverflow.com/questions/542395/how-to-access-a-documents-html-in-firefox-using-iaccessible)）。

有两部分 - 使用 IAccessible 和相关接口的代码访问和良好的 HTML（即正确使用语义标签，如 UL/LI）标记，可能使用额外的 CSS 可访问性 aria-XXXX 属性（即 aria-expanded）

可能的起始链接 - [IE8 中的可访问性新增功能](http://msdn.microsoft.com/en-us/library/cc304059(v=VS.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:55:14.017

我已经得出结论，为了获得一个会说话的网络浏览器，我实际上必须用 Set setwindowshookex 挂钩 WebBrowser 控件的一个实例。在我的 setwindowshookex 回调中，我监视事件：OB_FOCUS（焦点已更改，可能是键盘或鼠标）然后我将具有焦点的对象实例传递给 AccessibleObjectFromEvent API。接下来，我获取该对象的 IAccessible 接口，然后枚举所有子对象（如果存在）并将它们与与 HTML/Web 对象相关的已知对象列表进行比较，以使用将解析该字段并宣布文本（如果可用）的正确类，如果用户位于可编辑字段、焦点按钮等...我还使用 IAccessible 类通过在当前焦点对象上绘制一个矩形来获取对象位置并向用户呈现位置。我还创建了一个类，它只提取链接、文本、删除图像等，以便为有视觉障碍的人提供更轻松、更愉快的网络体验。我还有一些夸克要解决，但进展正在向前发展！

# python - 动态模块导入试图在不应该的时候进行相对导入

> ID：12862562
> 
> 赞同：1
> 
> 时间：2012-10-12T15:39:36.253
> 
> 标签：python

我正在做一些不那么标准的python模块导入。我正在向 sys.meta_path 添加一个查找器对象，以执行诸如通过 http/ssh/svn/etc 导入模块之类的操作。我能够使用以下代码成功导入模块：

```
def load_module(self, fullname, some_path=None):
    """
    fullname is something like:    this.is.a.module
    """

    is_package = figure_out_if_this_is_a_package(fullname)
    file_contents = get_file_contents(fullname) # via http/ssh/svn, whatever

    mod = sys.modules.setdefault(fullname, imp.new_module(fullname))
    mod.__file__ = "<MyFancyMagicImporter>"
    mod.__loader__ = self

    if is_package:
        mod.__path__ = []
        mod.__package__ = fullname
    else:
        mod.__package__ = fullname.rpartition(".")[0]

    exec(file_contents, mod.__dict__)

    return mod 
```

当动态导入的模块（我们称之为`ssh.test_module`）尝试导入某些内容时，就会出现问题。如果`ssh.test_module`做类似的事情`import os`，它实际上最终会尝试做一个相对的导入`import ssh.test_module.os`。如果此相对外观的导入失败，则导入将完全失败。

帮助？

更新：顺便说一句，我正在使用 python 2.7

**更新**这是一个更好的例子，展示了我遇到的问题：

```
#!/usr/bin/env python

import sys
import imp

class Loader(object):
    def load_module(self, fullname, some_path=None):
        file_contents = ""
        if fullname == "loader_testing":
            file_contents = "import os"
        elif fullname == "loader_testing.blah":
            file_contents = "import sys\nimport os\nimport loader_testing.halb"
        elif fullname == "loader_testing.halb":
            file_contents = "print('HALBHALBHALB')"

        mod = sys.modules.setdefault(fullname, imp.new_module(fullname))
        mod.__file__ = "<%s>" % self.__class__.__name__
        mod.__loader__ = self

        is_package = fullname.count(".") == 0

        if is_package:
            mod.__path__ = []
            mod.__package__ = fullname
        else:
            mod.__package__ = fullname.rpartition('.')[0]
            mod.__path__ = []

        exec(file_contents, mod.__dict__)

        return mod

    def find_module(self, fullname, path=None):
        if fullname.find("loader_testing") == 0:
            print "loader_testing, fullname: %s" % fullname
            return self

        return None

sys.meta_path.append(Loader())

import loader_testing.blah 
```

我希望上面的代码输出如下内容：

```
loader_testing, fullname: loader_testing
loader_testing, fullname: loader_testing.blah
loader_testing, fullname: loader_testing.halb
HALBHALBHALB 
```

相反，你会得到这个：

```
loader_testing, fullname: loader_testing
loader_testing, fullname: loader_testing.os
loader_testing, fullname: loader_testing.blah
loader_testing, fullname: loader_testing.sys
loader_testing, fullname: loader_testing.loader_testing
loader_testing, fullname: loader_testing.loader_testing.halb 
```

注意看起来像相对导入的`loader_testing.loader_testing.halb`和这样的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:23:22.443

最终解决这个问题的是`absolute_path`从**future**导入。我认为在 python 2.7.3 中默认情况下它已经处于活动状态，但我想我错了：

```
from __future__ import absolute_path 
```

# java - 无法从 if 循环将字符串发送到另一个类

> ID：12862570
> 
> 赞同：0
> 
> 时间：2012-10-12T15:39:58.470
> 
> 标签：java, class, inner-classes

我正在尝试将字符串从一个类传递到另一个类，但没有成功。我在研究和反复试验期间意识到，我需要有“public static void main(String[] args) {}”才能使用 if 语句，但是 getY() 会产生错误。我能做些什么不同的事情？

```
public class Testing {
public static String z;
public static void main(String[] args) {
int x = 15;

if (x >= 10)
    {
    z = "Blabla";
    }
    public static String getZ() {
    return z;
    }
  }
} 
```

另一类是

```
class B {
public static void main(String args[]) {
String x = Klasatest2.getZ();

System.out.println(x);
}
} 
```

错误：

Klasatest2.java:14：表达式的非法开始

```
public static String getZ() 

^ 
```

Klasatest2.java:14：表达式的非法开始

```
public static String getZ() {

       ^ 
```

Klasatest2.java:14: ';' 预期的

```
public static String getZ() {

                    ^ 
```

Klasatest2.java:14: ';' 预期的

```
public static String getZ() {

                           ^ 
```

4 个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:00:46.083

您的应用程序只能有一种`main(String args[])`方法。尝试这个：

```
public class Testing {
  public static void main(String[] args) {
    A a = new A("hy");
    B b = new B(a.z);
  }

  public class A {
    public String z;
    public A (String z) {
      this.z = z;
    } 
  }

  public class B {
    public B (String y) {
      System.out.println(y);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:56:56.330

对于初学者，您不能在方法中声明方法，

```
public static void main(String[] args) {
int x = 15;

if (x >= 10)
    {
    z = "Blabla";
    }
    public static String getZ() {
    return z;
    }
  }
} 
```

因此，您必须确保将 get`getZ()`方法声明为 OUTSIDE of`main(string[] args)`

像这样，

```
public class Test {
public static String z;
public static void main(String[] args) {
int x = 15;

if (x >= 10)
    {
    z = "Blabla";
    }

  }
public static String getZ() {
    return z;
    }
} 
```

此外，您不应该有两种`main(String[] args)`方法，因为除非出于某种原因您决定自己调用它，否则只会调用其中一种，这会很奇怪。因此，如果您希望在 class 中设置字符串，则`Test`需要`main`从其他类中调用它的方法，可能像这样。

```
Test.main(null); 
```

# ios - 如何在 UITextView 中搜索文本并从视图中删除选定的文本

> ID：12862575
> 
> 赞同：0
> 
> 时间：2012-10-12T15:40:12.193
> 
> 标签：ios, uitextfield, uitextview

Objective c 的新手，因此示例将不胜感激。我想要做的是将文本输入到 UITextfield 并删除 IBAction 上 UITextView 中文本的出现。

都知道 html、javascript 和 css。很难教老狗新技巧，但要努力。
提前感谢所有回复。

```
-(IBAction)tel2{

[UIButton beginAnimations:nil context:nil];
[UIButton setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:tel2 cache:YES];
[UIButton setAnimationDelegate:self];
[UIButton setAnimationDidStopSelector:@selector(test)];
[UIButton setAnimationDuration:.5];

if(tails2.tag==11){
    [tel2 addSubview:tails2];
    tails2.tag=22;

    textField.text = [NSMutableString stringWithFormat:@" %@", textField2.text];
}
else{
    [tel2 addSubview:heads2];
    tails2.tag=11;

    textField.text = [NSMutableString stringWithFormat:@"%@ %@", textField.text, textField2.text];

    }

[UIView commitAnimations]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:54:32.107

在没有看到你想要做的很多事情的情况下，我认为你可以使用带有 NSStriing 的 replaceOccuranceOfString 方法（你可以查找它，但它`NSString *newString = [oldString replaceOccuranceOfString:"what you want to replace" withString""];`类似于您有要删除的特定单词或单词列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:56:50.137

这就是你可以做到的

```
NSString* searchWord = @"word";

NSString* editedText = [textView.text stringByReplacingOccurrencesOfString:searchWord withString:@""];

textView.text = editedText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:05:32.933

0) 在您的视图控制器中：

```
UITextField *fooTextField = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, textFieldWidth, textFieldHeight)];
[self.view addSubview:fooTextField];
[self.view bringSubviewToFront:fooTextField];
fooTextField.delegate = self; //you need to add a couple of delegate methods here also 
```

1）然后添加：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(textFieldDidChange:) name:@"UITextFieldTextDidChangeNotification" object:fooTextField]; 
```

到您的视图控制器的`viewDidLoad;`方法

2）将以下方法添加到您的视图控制器类

```
 - (void)textFieldDidChange:(NSNotification *)notification {
        NSString *currentTextInTextField = [NSString stringWithString:[(UITextField*)notification.object text]];
        if ([currentTextInTextField isEqualToString:@"thisIsTheStringYouAreLookingFor"]) {
            [(UITextField*)notification.object setText:@"whateverYouWantToReplaceItWith"];
        }
    } 
```

3）您可能希望在比赛上做一些时髦的正则表达式工作，`currentTextInField isEqualToString:`尽管这是一个单独的问题

# apache - Crontab - 每 3 小时重启一次 apache

> ID：12862576
> 
> 赞同：6
> 
> 时间：2012-10-12T15:40:16.157
> 
> 标签：apache, cron, debian, crontab

由于访问者滞后，我的服务器目前遇到一些问题，我认为最好的解决方案是每 2/3 小时左右重新启动 apache
我如何通过 cronjob 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T15:45:53.403

您为什么要这样做？如果您在使用 Apache 时遇到特定问题。查看访问/错误日志并进行相应调整肯定对您更有帮助。给我们更多信息，我们可以查看您的日志并为您提供更合适的解决方案。

**尽管如此，cron 还是要重新启动 apache。**

0 */3 * * */root/restart_apache > /dev/null 2>&1

```
/etc/init.d/httpd restart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:45:23.413

我几乎可以保证这个“修复”不会解决您的真正问题。为什么不发布您的 Http.conf 设置和有关服务器资源（内存、cpus）的一些信息，我们可能会帮助您解决配置问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:50:50.453

我不会添加到单个用户（root）的 crontab 中，而是将这样的 hack 添加到 /etc/cron.d。

将 'apache2' 更改为 debian 上的任何 init 脚本。

```
echo '* */3 * * * root /etc/init.d/apache2 restart 2>&1 >/dev/null' > /etc/cron.d/apachesux 
```

# javascript - javascript/jquery autotab 通过粘贴数据的表单

> ID：12862577
> 
> 赞同：0
> 
> 时间：2012-10-12T15:40:15.243
> 
> 标签：javascript, jquery, html, forms

我希望通过允许用户事先编写文本文件并将其复制/粘贴到表单中来轻松填写表单。每当检测到制表符或换行符时，表单都会跳到下一个输入字段。

自动完成不会有帮助，因为每次使用都会改变表单数据。捕获 keyDown 事件也不起作用，因为按下的键是 ctrl+v，而不是我要捕获的键。有没有办法做到这一点？我可以访问任何我可以动手完成的 JS 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:52:46.157

捕获粘贴事件可以使用`onpaste`事件和`clipboardData`

[这个答案向](https://stackoverflow.com/a/6804718/94278)您展示了如何实现这一点。然后你必须相应地解析传入的数据。

# php - 确定选择一天的星期

> ID：12862578
> 
> 赞同：2
> 
> 时间：2012-10-12T15:40:16.983
> 
> 标签：php

我正在尝试完成以下任务。我正在开发一个具有三个视图（日、周和月）的自定义日历，可能已经有一些东西了，但我也在重写它作为我学习工具的一部分。

因此，用户在第一次访问时将面对日视图，当然还有箭头来回切换到第二天或前一天。如果他们单击“周视图”，它将为他们提供 7 天概览，默认为今天日期，并且他们可以再次来回查看下周或前一周。最后一个视图是完整的月历，一旦他们单击日期，它将为他们提供当天的详细信息，同时将默认设置为他们选择的日期。因此，如果他们返回周视图，他们将看到周的详细信息包含他们选择的日期。这是我难以解决的问题，我知道有 PHP 函数可以确定星期几，但我似乎无法考虑如何传递日期并从周日开始获得整周过去的那一天。例如，

感谢您的帮助或指出正确的方向。请原谅我的语法/拼写错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:44:28.417

1.  假设`$selection`将用户选择的日期表示为整数时间戳，`date('N', $selection)`将返回他们选择的星期几的数字表示（例如，星期一 = 1 到星期日 = 7）。

    此结果还表示自所选周（上一个星期日）开始以来的天数 - `$offset`。当然，如果您从用户选择日期的字符串表示开始（如您的问题，2012 年 10 月 12 日），您首先需要将日期转换为整数时间戳。

    ```
    $selection = strtotime($selection); //if $selection is in string format
    $offset = date('N', $selection); 
    ```

2.  现在您可以使用`$offset`来确定一周开始的日期（前一个星期日） - `$weekstart`。

    ```
    $weekstart = strtotime("$selection -$offset day"); 
    ```

3.  一旦你得到了一周的开始，一周的结束 ( `$weekend`) 当然是 6 天后，但是要计算这个日期，你首先需要`$weekstart`从整数时间戳转换为日期的字符串表示形式。您还需要将结果 ( `$weekend`) 转换为日期的字符串表示形式。

    ```
    $weekstart = stringftime("%m/%d/%Y", $weekstart); //date format = 10/07/2012
    $weekend = strtotime("$weekstart +6 day");
    $weekend = stringftime("%m/%d/%Y", $weekend); 
    ```

* * *

所以以下内容：

```
$selection = "10/12/2012";
$selection = strtotime($selection);
$offset = date('N', $selection);
$weekstart = strtotime("$selection -$offset day");
$weekstart = stringftime("%m/%d/%Y", $weekstart);
$weekend = strtotime("$weekstart +6 day");
$weekend = stringftime("%m/%d/%Y", $weekend);

$output = "Selected Date = $selection \n Selected Week = $weekstart - $weekend";

echo $output; 
```

结果是：

```
Selected Date = 10/12/2012
Selected Week = 10/07/2012 - 10/13/2020 
```

* * *

看：

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)
[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)
[http://php.net/manual/en/function.strftime。 php](http://php.net/manual/en/function.strftime.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:52:09.767

基于智慧的答案，您可以通过几个步骤找到一周的第一天。查看[PHP date() 手册](http://php.net/manual/en/function.date.php)以获取更多选项，但我相信以下代码会起作用：

```
// figure out how many days back you have to go, to get to Sunday
$d = date('N', strtotime($mydate));
// figure out Sunday's date
$beginning_of_week = date('Y-m-d', strtotime($mydate." -{$d} days"));
$end_of_week = date('Y-m-d', strtotime($beginning_of_week." +1 week"));
echo "The week {$beginning_of_week} to {$end_of_week}! "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:44:01.153

使用`strtotime()`函数和`date()`函数来完成这个任务

例如。2012-10-09 前 1 天是

```
echo date('Y-m-d', strtotime("2012-10-09 -1 day")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T18:21:31.293

试试这个功能（来源：[Marty Wallace](https://stackoverflow.com/questions/5853380/php-get-number-of-week-for-month)）。

您感兴趣的日期是`$date`（YYYY-MM-DD 格式）和`$rollover`全天格式（例如星期五）。

```
function getWeeks($date, $rollover)

{
    $cut = substr($date, 0, 8);
    $daylen = 86400;

    $timestamp = strtotime($date);
    $first = strtotime($cut . "00");
    $elapsed = ($timestamp - $first) / $daylen;

    $i = 1;
    $weeks = 1;

    for($i; $i<=$elapsed; $i++)
    {
        $dayfind = $cut . (strlen($i) < 2 ? '0' . $i : $i);
        $daytimestamp = strtotime($dayfind);

        $day = strtolower(date("l", $daytimestamp));

        if($day == strtolower($rollover))  $weeks ++;
    }

    return $weeks;
} 
```

# java - 标准 api 如何在列中添加引号？

> ID：12862580
> 
> 赞同：0
> 
> 时间：2012-10-12T15:40:25.373
> 
> 标签：java, sql, eclipselink, criteria-api

在我的应用程序中，我使用 eclipselink 和标准 api。

我的数据库有一个表，其中有一列名为“order”。

问题是当我使用标准 api 创建一个选择时，它产生了这个 sql：

```
SELECT id, order, name, phone, uri FROM campus 
```

它抛出一个异常，因为“order”是 sql 中的一个限制关键字

如何强制条件 api 在列名中加上引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:50:01.997

最简单（恕我直言最好）的方法是更改`order`​​为`campus_order`或类似的方法，并避免使用 SQL 关键字作为字段标识符。这种做法通常会导致问题。

我很高兴知道标准 API 可以解决此问题，但我建议您重命名该列。今天您正在使用标准 API，明天您将使用其他东西...但是最终生成了良好的旧 SQL，并且您想要的最后一个想法是发现您的一个查询不起作用，因为列名等于 SQL 版本之一的关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:05:17.780

重命名字段是一个更简单的选项，但 JPA 将引用分隔字段。要将其标记为分隔，只需在定义列时添加引号：“\”order\“”。

# ios - 自定义 Cocoa 触控和初始化

> ID：12862582
> 
> 赞同：0
> 
> 时间：2012-10-12T15:40:33.693
> 
> 标签：ios, cocoa-touch, interface-builder, custom-controls

我设计了一个很好的自定义控件 CustomUIView 作为 UIview 的子类，带有一个很好的初始化程序，它接受 8 个参数。我将其设为指定的初始化程序，以确保任何用户都能正确提供所有 8 个参数。几天后，我想在另一个使用 nib 的项目中重用该控件。我在其中一个 NIB 的画布中添加了一个基本 UIView，并将自定义类选项更改为我的 CustomUIView 类。但我立即意识到我漂亮的初始化程序没有用，因为它根本没有被调用。

您会建议对此做些什么？我想确保

1.  所有参数都被同时接受
2.  我想要在 IB 中对该自定义控件进行基本定位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:10:08.513

`UIViewController`那么为什么不在NIB 的标准初始化程序之上构建呢？

```
- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle parameter1:(id)param1...
    NSAssert(param1 != nil && param2 != nil ...);
    if (self = [super initWithNibName:nibName bundle:nibBundle]) {
        //Custom initializations here.
    }
    return self;
} 
```

# sql - 各种 SQL 更新的 case 表达式

> ID：12862588
> 
> 赞同：1
> 
> 时间：2012-10-12T15:40:53.450
> 
> 标签：sql, sql-server, tsql, sql-update, case

我正在努力使用 case 表达式来确定要创建哪个更新语句。以下是否可能，或者我应该为每个更新制作单独的更新存储过程？

```
 IF (SELECT pick FROM warehouse WHERE order_no = @order_no and pick = @pick) is null
    CASE @pick 
    when 1 then
            UPDATE warehouse
            SET pick = @pick, startpickdate=@dchar, startpicktime=@tchar
            where order_no=@order_no
    when 2 then
            UPDATE warehouse
            SET pick = @pick, endpickdate=@dchar, endpicktime=@tchar
            where order_no=@order_no
    when 0 then
            UPDATE warehouse
            SET pick = @pick, endpickdate='', endpicktime='',startpickdate='', startpicktime=''
            where order_no=@order_no
END
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:49:50.683

如果你想有条件地更新你的列，这种方法对你有用

```
UPDATE Warehouse
SET Pick = @pick
   , startPickDate = CASE @pick
                        WHEN 1 THEN @dchar
                        WHEN 2 THEN startPickDate
                        WHEN 0 THEN ''
                     END
   , startPickTime = CASE @pick
                        WHEN 1 THEN @tchar
                        WHEN 2 THEN startPickTime
                        WHEN 0 THEN ''
                     END
   , ...
WHERE order_no = @order_no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:55:14.143

[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)不用于 T-SQL [control-of-flow](http://msdn.microsoft.com/en-us/library/ms174290.aspx)。因此，一种方法是继续使用`IF`（实际控制流），这将使您的更新语句更简单，尽管每个分支都有一个：

```
IF (SELECT pick FROM warehouse WHERE order_no = @order_no AND pick = @pick) IS NULL BEGIN
    IF @pick = 1 BEGIN
        UPDATE warehouse
        SET pick = @pick, startpickdate=@dchar, startpicktime=@tchar
        WHERE order_no=@order_no
    END
    ELSE IF @pick = 2 BEGIN
        UPDATE warehouse
        SET pick = @pick, endpickdate=@dchar, endpicktime=@tchar
        WHERE order_no=@order_no
    END
    ELSE IF @pick = 0 BEGIN
        UPDATE warehouse
        SET pick = @pick, endpickdate='', endpicktime='',startpickdate='', startpicktime=''
        WHERE order_no=@order_no
    END
END
GO 
```

如果您无论如何都在存储过程中，您可能会发现这更易于维护，尽管这肯定是主观的。

我可能会倾向于这种方法，而不是使用一个大的组合更新语句，`case`因为您在每种情况下都更新不同的列。

# php - PHP标头重定向循环

> ID：12862589
> 
> 赞同：3
> 
> 时间：2012-10-12T15:40:58.380
> 
> 标签：php, html, redirect, header

我遇到了一个问题，用户能够将事件提交到日历，但我无法将它们重定向回原始页面。我试过使用：

```
 header("Location: http://localhost/Project/View/Home.php");
  exit; 
```

但我收到一条消息`This webpage has a redirect loop`

HTML - Home.php

```
<!DOCTYPE html> 
<html lang="en"> 
  <head> 
    <meta charset="utf-8" /> 
    <link rel="stylesheet" href="Common.css" />
    <script src="jquery.js"></script>
    <script type="text/javascript" src="functions.js"></script>
    <!--Includes HTML5 Shiv for all versions of IE to solve compatability issues--> 
    <!-- <title></title>-->
<?php include '../Controller/Cal.php'?>
  </head>
  <body>
    <form action="../Controller/Cal.php" method="post">
      Content: <input type="text" name="Content" />
      <input type="submit" />
    </form>
    <header>
    <iframe src="https://www.google.com/calendar/embed?src=dnavechicleservices%40gmail.com&ctz=Europe/London" 
    style="border: 0" width="1000" height="600" frameborder="0" scrolling="no"></iframe>
    </header>
  </body>
</html> 
```

PHP - Cal.php

```
<?php 
  $path = '/opt/lampp/htdocs/Project/ZendGdata-1.12.0/library';
  $oldPath = set_include_path(get_include_path() . PATH_SEPARATOR . $path);
  require_once 'Zend/Loader.php';
  Zend_Loader::loadClass('Zend_Gdata');
  Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
  Zend_Loader::loadClass('Zend_Gdata_Calendar');
  // User whose calendars you want to access
  $user = 'email@gmail.com';
  $pass = 'password';
  $serviceName = Zend_Gdata_Calendar::AUTH_SERVICE_NAME; // predefined service name for calendar
  $client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $serviceName);
  $service = new Zend_Gdata_Calendar($client);
  // Create a new event object using calendar service's factory method.
  // We will then set different attributes of event in this object.
  $event= $service->newEventEntry();
  // Create a new title instance and set it in the event
  $event->title = $service->newTitle("Service");
  $event->content = $service->newContent(isset($_POST["Content"]));
  // Create an object of When and set start and end datetime for the event
  $when = $service->newWhen();
  // Set start and end times in RFC3339 (http://www.ietf.org/rfc/rfc3339.txt)
  $when->startTime = "2012-10-20T16:30:00.000+05:30"; // 8th July 2010, 4:30 pm (+5:30 GMT)
  $when->endTime = "2012-10-20T17:30:00.000+05:30"; // 8th July 2010, 5:30 pm (+5:30 GMT)
  // Set the when attribute for the event
  $event->when = array($when);
  // Create the event on google server
  $newEvent = $service->insertEvent($event);
  // URI of the new event which can be saved locally for later use
  $eventUri = $newEvent->id->text;
  header("Location: http://localhost/Project/View/Home.php");
  exit;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:42:39.097

看起来原因是

```
<?php include '../Controller/Cal.php'?> 
```

在你的 home.php

您需要在标头重定向周围放置一个条件。

您可以使用：

```
if(isset($_POST['Content']))
    header("Location: http://localhost/Project/View/Home.php"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:44:40.730

通过包含`Cal.php`from您每次用户访问时`Home.php`都发送标头。`Redirect``Home.php`

另一种方法是从您的网站中删除重定向，然后将其`Home.php`发布到`Cal.php`。乍一看，您不需要将其包含`Cal.php`在您的主页中。

# bash - 使用期望自动安装梨

> ID：12862597
> 
> 赞同：0
> 
> 时间：2012-10-12T15:41:36.737
> 
> 标签：bash, scripting, pear, expect

我正在编写一个小脚本来尝试在系统上自动安装 pear，如果它丢失了 - 基本上，采用安装过程的交互式部分并使它们成为非交互式的，所以我需要做的就是执行脚本它自己为我做。这是我第一次尝试使用expect，这不是我所期望的。

下面的示例代码：

```
 /usr/bin/expect <<EOD
          set timeout 20
          set number [lindex $argv 0]
          set path [lindex $argv 1]

 spawn php -q go-pear.phar
 expect "1-11, 'all' or Enter to continue:"
 send "$number\r"
interact
 expect "Installation base ($prefix) [/usr/local] :"
send "$path\r"
 interact
EOD 
```

目前这并不完全有效，因为它试图在第一个菜单中填写 /usr/local 部分，如下所示：

```
1-11, 'all' or Enter to continue: invalid command name "/usr/local"
    while executing
"/usr/local"
    invoked from within
"expect "Installation base () [/usr/local] :"" 
```

谁能告诉我我在这里缺少什么？另外，我想得到这个，所以我不必将它作为 ./script $var0 $var1 运行，而只需将它作为 ./script 运行，其中包含并填写所有内容，但不知道该怎么做那。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:06:46.047

一个问题是`[...]`字符串内部告诉期望执行一个命令。我认为你需要用`\[...\]`.

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:01:23.967

我最终弄清楚了这一点。如果其他人想做类似的事情，这对我有用：

```
 /usr/bin/expect <<EOF
set send_slow {1 .1}
set timeout -1   
 spawn php -q go-pear.phar
 expect "1-11, 'all' or Enter to continue:"
   sleep .1
 send -s -- "1\r"
 expect -exact "1\r"
   sleep .1
 send -s -- "/usr/local\r"
 expect -exact "/usr/local\r"
 expect "1-11, 'all' or Enter to continue:"
   sleep .1
 send -s -- "\r"
 expect -exact "\r"
 expect EOF 
```

# jquery - jquery 获取所有表单元素：输入、文本区域和选择

> ID：12862601
> 
> 赞同：125
> 
> 时间：2012-10-12T15:41:42.450
> 
> 标签：jquery

在 jquery 中是否有一种简单的方法（不单独列出它们）来选择所有表单元素并且只选择表单元素。

我不能使用 children() 等，因为表单包含其他 HTML。

例如：

```
$("form").each(function(){
    let $inputs = $("input, textarea, select", this);
}); 
```

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-10-12T15:43:08.097

**编辑：**正如评论中指出的（[Mario Awad](https://stackoverflow.com/questions/12862601/jquery-get-all-form-elements-input-textarea-select/12862623?noredirect=1#comment43823458_12862623) & [Brock Hensley](https://stackoverflow.com/questions/12862601/jquery-get-all-form-elements-input-textarea-select/12862623?noredirect=1#comment24939806_12862623)），`.find`用来让孩子们

```
$("form").each(function(){
    $(this).find(':input') //<-- Should return all input elements in that specific form.
}); 
```

表单也有一个元素集合，有时这与子元素不同，例如当表单标签位于表格中且未关闭时。

```
var summary = [];
$('form').each(function () {
    summary.push('Form ' + this.id + ' has ' + $(this).find(':input').length + ' child(ren).');
    summary.push('Form ' + this.id + ' has ' + this.elements.length + ' form element(s).');
});

$('#results').html(summary.join('<br />'));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<form id="A" style="display: none;">
    <input type="text" />
    <button>Submit</button>
</form>
<form id="B" style="display: none;">
    <select><option>A</option></select>
    <button>Submit</button>
</form>

<table bgcolor="white" cellpadding="12" border="1" style="display: none;">
<tr><td colspan="2"><center><h1><i><b>Login
Area</b></i></h1></center></td></tr>
<tr><td><h1><i><b>UserID:</b></i></h1></td><td><form id="login" name="login" method="post"><input
name="id" type="text"></td></tr>
<tr><td><h1><i><b>Password:</b></i></h1></td><td><input name="pass"
type="password"></td></tr>
<tr><td><center><input type="button" value="Login"
onClick="pasuser(this.form)"></center></td><td><center><br /><input
type="Reset"></form></td></tr></table></center>
<div id="results"></div>
```

* * *

可能是[**:input**](http://api.jquery.com/input-selector/)选择器是你想要的

~~$("form").each(function(){ $(':input', this)//<-- 应该返回该特定表单中的所有输入元素。});~~

正如文档中指出的那样

> 为了在使用 :input 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用 .filter(":input")。

你可以像下面这样使用，

```
$("form").each(function(){
    $(this).filter(':input') //<-- Should return all input elements in that specific form.
}); 
```

 ~~* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-09-19T09:50:02.263

下面的代码有助于从具有表单 id 的特定表单中获取元素的详细信息，

```
$('#formId input, #formId select').each(
    function(index){  
        var input = $(this);
        alert('Type: ' + input.attr('type') + 'Name: ' + input.attr('name') + 'Value: ' + input.val());
    }
); 
```

下面的代码有助于从加载页面中的所有表单中获取元素的详细信息，

```
$('form input, form select').each(
    function(index){  
        var input = $(this);
        alert('Type: ' + input.attr('type') + 'Name: ' + input.attr('name') + 'Value: ' + input.val());
    }
); 
```

下面的代码有助于获取放置在加载页面中的元素的详细信息，即使元素没有放在标签内，

```
$('input, select').each(
    function(index){  
        var input = $(this);
        alert('Type: ' + input.attr('type') + 'Name: ' + input.attr('name') + 'Value: ' + input.val());
    }
); 
```

**注意：**我们在对象列表中添加我们需要的更多元素标签名称，如下所示，

```
Example: to get name of attribute "textarea",

$('input, select, textarea').each(
    function(index){  
        var input = $(this);
        alert('Type: ' + input.attr('type') + 'Name: ' + input.attr('name') + 'Value: ' + input.val());
    }
); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-12T15:44:55.690

如果您有其他类型，请编辑选择器：

```
var formElements = new Array();
$("form :input").each(function(){
    formElements.push($(this));
}); 
```

所有表单元素现在都在数组 formElements 中。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-04-22T09:25:58.833

**JQuery[序列化](http://api.jquery.com/serialize/)函数**使得获取所有表单元素变得非常容易。

演示：http: [//jsfiddle.net/55xnJ/2/](http://jsfiddle.net/55xnJ/2/)

```
$("form").serialize(); //get all form elements at once 

//result would be like this:
single=Single&multiple=Multiple&multiple=Multiple3&check=check2&radio=radio1 
```

复合这个想法：您可以使用这样的东西来使所有表单元素都可以访问。

```
Data = $('form').serialize().split('&');

for(i in Data){
    Data[i] = Data[i].split('=');
    Fields[ Data[i][0] ] = [ Data[i][1],
                             $('form *[name="' + Data[i][0] + '"]').eq(0) ];
}

console.log(Fields);

// The result would be a multi-dimensional array you could loop through
Fields[Field_Name] = [Field_Value, Field_Object] 
```

注意：这仅适用于命名字段，因为 serialize() 将忽略所有其他字段。任何具有重复名称的字段都将被忽略。如果多个字段使用相同的名称，您可以创建一个多维数组。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-07-26T15:43:00.427

**记录**：以下代码片段可以帮助您在悬停时通过临时标题**获取有关输入、文本区域、选择、按钮、标签的详细信息。**

[![在此处输入图像描述](../Images/c6500180c9e3ed80a6042e89847db266.png)](https://i.stack.imgur.com/a0L5A.png)

```
$( 'body' ).on( 'mouseover', 'input, textarea, select, button, a', function() {
    var $tag = $( this );
    var $form = $tag.closest( 'form' );
    var title = this.title;
    var id = this.id;
    var name = this.name;
    var value = this.value;
    var type = this.type;
    var cls = this.className;
    var tagName = this.tagName;
    var options = [];
    var hidden = [];
    var formDetails = '';

    if ( $form.length ) {
        $form.find( ':input[type="hidden"]' ).each( function( index, el ) {
            hidden.push( "\t" + el.name + ' = ' + el.value );
        } );

        var formName = $form.prop( 'name' );
        var formTitle = $form.prop( 'title' );
        var formId = $form.prop( 'id' );
        var formClass = $form.prop( 'class' );

        formDetails +=
            "\n\nFORM NAME: " + formName +
            "\nFORM TITLE: " + formTitle +
            "\nFORM ID: " + formId +
            "\nFORM CLASS: " + formClass +
            "\nFORM HIDDEN INPUT:\n" + hidden.join( "\n" );
    }

    var tempTitle =
        "TAG: " + tagName +
        "\nTITLE: " + title +
        "\nID: " + id +
        "\nCLASS: " + cls;

    if ( 'SELECT' === tagName ) {
        $tag.find( 'option' ).each( function( index, el ) {
            options.push( el.value );
        } );

        tempTitle +=
            "\nNAME: " + name +
            "\nVALUE: " + value +
            "\nTYPE: " + type +
            "\nSELECT OPTIONS:\n\t" + options;

    } else if ( 'A' === tagName ) {
        tempTitle +=
            "\nHTML: " + $tag.html();

    } else {
        tempTitle +=
            "\nNAME: " + name +
            "\nVALUE: " + value +
            "\nTYPE: " + type;
    }

    tempTitle += formDetails;

    $tag.prop( 'title', tempTitle );
    $tag.on( 'mouseout', function() {
        $tag.prop( 'title', title );
    } )
} ); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-03-09T23:45:17.957

jQuery 保留对 vanilla JS 表单元素的引用，其中包含对所有表单子元素的引用。您可以简单地获取参考并继续前进：

```
var someForm = $('#SomeForm');

$.each(someForm[0].elements, function(index, elem){
    //Do something here.
}); 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-06-10T21:10:33.883

这是我最喜欢的功能，它对我来说就像一个魅力！

它返回一个包含所有输入、选择和文本区域数据的对象。

它试图通过查找元素名称 else Id else 类来获取对象名称。

```
var form_data = get_form_data();
console.log(form_data); 
```

功能：

```
function get_form_data(element){
    element = element || '';
    var all_page_data = {};
    var all_forms_data_temp = {};
    if(!element){
        element = 'body';
    }

    if($(element)[0] == undefined){
        return null;
    }

    $(element).find('input,select,textarea').each(function(i){
        all_forms_data_temp[i] = $(this);
    });

    $.each(all_forms_data_temp,function(){
        var input = $(this);
        var element_name;
        var element_value;

        if((input.attr('type') == 'submit') || (input.attr('type') == 'button')){
            return true;
        }

        if((input.attr('name') !== undefined) && (input.attr('name') != '')){
            element_name = input.attr('name').trim();
        } else if((input.attr('id') !== undefined) && (input.attr('id') != '')){
            element_name = input.attr('id').trim();
        } else if((input.attr('class') !== undefined) && (input.attr('class') != '')){
            element_name = input.attr('class').trim();
        }

        if(input.val() !== undefined){
            if(input.attr('type') == 'checkbox'){
                element_value = input.parent().find('input[name="'+element_name+'"]:checked').val();
            } else if((input.attr('type') == 'radio')){
                element_value = $('input[name="'+element_name+'"]:checked',element).val();
            } else {
                element_value = input.val();
            }
        } else if(input.text() != undefined){
            element_value = input.text();
        }

        if(element_value === undefined){
            element_value = '';
        }

        if(element_name !== undefined){
            var element_array = new Array();
            if(element_name.indexOf(' ') !== -1){
                element_array = element_name.split(/(\s+)/);
            } else {
                element_array.push(element_name);
            }

            $.each(element_array,function(index, name){
                name = name.trim();
                if(name != ''){
                    all_page_data[name] = element_value;
                }
            });
        }
    });
    return all_page_data;
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-06-29T13:17:43.457

```
var $form_elements = $("#form_id").find(":input"); 
```

包括提交按钮在内的所有元素现在都在变量 $form_elements 中。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-05-11T13:09:49.570

只是添加另一种方式：

```
$('form[name=' + formName + ']').find(':input') 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-10-15T18:12:10.420

试试这个功能

```
function fieldsValidations(element) {
    var isFilled = true;
    var fields = $("#"+element)
        .find("select, textarea, input").serializeArray();

    $.each(fields, function(i, field) {
        if (!field.value){
            isFilled = false;
            return false;
        }
    });
    return isFilled;
} 
```

并将其用作

```
$("#submit").click(function () {

    if(fieldsValidations('initiate')){
        $("#submit").html("<i class=\"fas fa-circle-notch fa-spin\"></i>");
    }
}); 
```

享受 ：）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-11-16T10:31:23.823

我用这种方式从某个表单中获取所有输入字段：

```
$("#myForm").find("input").each(function() {
   // your stuff goes here
}); 
```

或者对于这里的情况：

```
$("#myForm").find("select, textarea, input").each(function() {
   // your stuff goes here
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-29T03:41:49.790

尝试这样的事情：

```
<form action="/" id="searchForm">
<input type="text" name="s" placeholder="Search...">
<input type="submit" value="Search">
</form>
<!-- the result of the search will be rendered inside this div -->
<div id="result"></div>

<script>
// Attach a submit handler to the form
$( "#searchForm" ).submit(function( event ) {

  // Stop form from submitting normally
event.preventDefault();

// Get some values from elements on the page:
var $form = $( this ),
term = $form.find( "input[name='s']" ).val(),
url = $form.attr( "action" );

// Send the data using post
var posting = $.post( url, { s: term } );

// Put the results in a div
posting.done(function( data ) {
  var content = $( data ).find( "#content" );
  $( "#result" ).empty().append( content );
    });
  });
</script> 
```

> 注意输入[]的使用

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-11-11T20:35:55.227

所有输入：

```
var inputs = $("#formId :input"); 
```

所有按钮

```
var button = $("#formId :button") 
```~~

# algorithm - 将 8 位颜色扩展到 24 位颜色

> ID：12862602
> 
> 赞同：1
> 
> 时间：2012-10-12T15:41:51.537
> 
> 标签：algorithm, colors, arduino

## 设置

我有几百个 Sparkfun LED 像素（类似于[https://www.sparkfun.com/products/11020](https://www.sparkfun.com/products/11020)）连接到 Arduino Uno，并希望使用内置的 Serial-over-USB 连接从 PC 控制像素的阿杜诺。

像素是可单独寻址的，每个像素都有 24 位颜色 (RGB)。由于我希望能够非常快速地更改每个像素的颜色，因此从 pc 到 Arduino 的数据传输必须非常高效（从 Arduino 到像素的数据进一步传输已经非常快了）。

## 问题

我试过直接将所需的 RGB 值直接发送到 Arduino，但这会导致明显的延迟，例如，当我想同时打开所有 LED 时。我最小化数据量的直接想法是将可用颜色从 24 位减少到 8 位，这对于我的应用程序来说已经绰绰有余了。

如果我这样做，我必须将 PC 上的 8 位值扩展为 Arduino 上的 24 位值，以设置像素的实际颜色。这里明显的解决方案是一个调色板，它包含所有可用的 8 位值和相应的 24 位颜色。不过，我希望有一个没有调色板的解决方案，主要是出于内存空间的原因。

## 问题

将 8 位颜色扩展到 24 位颜色的有效方法是什么，最好是准确保留颜色信息的方法？这个任务有标准算法吗？

## 可能的解决方案

我正在考虑一种格式，每个 R 和 B 2 位，G 3 位。这些值将被打包成一个字节，然后传输到 Arduino，然后使用位移解包并使用 map() 进行插值功能（http://arduino.cc/en/Reference/Map）。

对该解决方案有任何想法吗？有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:57:51.567

R2B2G3 会给你很少的颜色（实际上还剩下一点）。我不知道这是否足以满足您的申请。您可以使用[抖动技术](http://en.wikipedia.org/wiki/Dither)使 8 位图像看起来更好一些。

或者，如果您有任何首选的颜色集，您可以将已知的调色板存储在您的设备上，并且永远不要通过网络发送它。您还可以为不同的情况存储多个调色板，并指定哪一个与小整数索引一起使用。

最重要的是，可以实现一些简单的压缩算法，如[RLE](http://en.wikipedia.org/wiki/Run-length_encoding)或[LZW](http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch)并在接收后解压缩。

您可以使用一些占用空间很小的非常快速的压缩库：[Snappy](http://code.google.com/p/snappy/)、[miniLZO](http://www.oberhumer.com/opensource/lzo/#minilzo)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:49:48.313

关于您的问题“什么是更好的方法来做到这一点？”，首先要做的事情之一（如果尚未完成）是提高串行数据速率。一个[Arduino 论坛](http://arduino.cc/forum/index.php/topic,115557.0.html)建议使用 115200 bps 作为标准速率，并尝试使用 230400 bps。在这些速率下，您需要编写接收软件，以便它将数据从相对较小的接收缓冲区快速传输到较大的缓冲区，而不是尝试处理来自小型接收缓冲区的数据。

第二种可能性是将激活时间放入您的数据包中。假设 F1、F2、F3... 是您将在 LED 阵列上显示的一系列帧。提前从 PC 发送这些帧，或者在空闲或等待时间内发送这些帧，并让 Arduino 缓冲它们直到它们被安排出现。当给定帧的激活时间到达时，让 Arduino 打开它。如果您事先知道帧但不知道激活时间，请发送和缓冲帧并在适当的时间仅发送激活码。

第三，您可以拥有多个即时更改的调色板和动态调色板，并且可以使用像素地址或像素列表以及像素图。也就是说，您可能会在不同的时间使用不同的协议。协议 3 可能会下载整个调色板，协议 4 可能会更改调色板的一个元素，协议 5 可能会发送一个 24 位值 v、时间 t、计数 n，以及在时间 t 设置为 v 的 n 个像素的列表， 6 可能会发送像素设置的位图，等等。位图可以是指示开或关的简单的每像素 1 位图，也可以是每像素 k 位图，其中 k 位条目可以指定像素的调色板编号或帧编号。这有点模糊，因为有很多可能性；但简而言之，定义适用于您所显示的任何内容的协议。

第四，鉴于 ATmega328P 的 RAM 较小 (2KB) 但闪存较大 (32KB)，请考虑将多个调色板、帧和宏硬编码到程序中。通过宏，我的意思是生成图形元素的例程，如弧线、线条、开放或填充的矩形。任何预先知道的显示元素都是闪存而不是 RAM 存储的候选者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:54:16.623

您的 (2, 3, 2) 位想法是“在野外”使用的。尝试起来应该非常简单。质量会很低，但请尝试一下，看看它是否满足您的需求。

如果查找表随时间保持不变，那么与 256 色查找表相比，任何其他解决方案似乎都不太可能节省大量内存。我认为任何成功的事情都必须利用您发送到像素的图像类型中的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T18:44:41.190

不管你怎么看，你真正想要的是图像压缩。因此，我建议您查看 PNG 和 JPG 压缩之类的方法，看看它们是否足够快，适合您的应用程序。

如果没有，那么您可以考虑自己滚动。到目前为止，您只能进行逐像素压缩；在尺寸方面，您的 (2,3,2) 想法与您预期的一样好。您可以尝试使用四叉树类型的格式：取 4 像素块的平均值，传输差异的压缩（有损）表示，然后将相同的操作应用于平均值的半分辨率图像......

正如其他人指出的那样，抖动将使您的图像在 (2,3,2) 处看起来更好。对您的应用程序进行抖动的最简单方法可能是为每个像素的每种颜色选择不同的（随机或准随机）固定量化阈值偏移。PC 和 Arduino 都会有这个阈值表的副本；阈值的分布将防止分色，而 Arduino 边桌将有助于保持准确性。

# c# - C# 连接到数据库并列出数据库

> ID：12862604
> 
> 赞同：23
> 
> 时间：2012-10-12T15:42:08.177
> 
> 标签：c#, sql, database, ado.net, sqlconnection

> **可能重复：**
> [SQL Server 查询以查找所有当前数据库名称](https://stackoverflow.com/questions/873393/sql-server-query-to-find-all-current-database-names)

我试图弄清楚如何在连接到服务器后列出数据库而不先指定数据库。

```
sqlConnection1 = new SqlConnection("Server=" + sqlServer + ";Database=" + database +    
";User ID=" + userName + ";Password=" + password + ";Trusted_Connection=False;"); 
```

所以基本上我想要的是最终用户连接到 sql 服务器，然后有一个下拉列表填充了他们可以连接和查询的 db 列表。

想法？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-12T15:47:21.150

您可以使用[`SqlConnection.GetSchema`](http://msdn.microsoft.com/en-us/library/ms136366%28v=vs.80%29.aspx)：

```
using(var con = new SqlConnection("Data Source=Yourserver; Integrated Security=True;"))
{
    con.Open();
    DataTable databases = con.GetSchema("Databases");
    foreach (DataRow database in databases.Rows)
    {
        String databaseName = database.Field<String>("database_name");
        short dbID = database.Field<short>("dbid");
        DateTime creationDate = database.Field<DateTime>("create_date");
    }
} 
```

[SQL Server 架构集合 (ADO.NET)](http://msdn.microsoft.com/en-us/library/ms254969%28v=vs.100%29.aspx)

> 要确定支持的架构集合列表，请调用不带参数的 GetSchema 方法，或使用架构集合名称“MetaDataCollections”。这将返回一个 DataTable，其中包含受支持的架构集合的列表、它们各自支持的限制数量以及它们使用的标识符部分的数量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T15:44:16.937

您可以编写一个存储过程，它可以返回该服务器上的数据库列表。

```
SELECT name
FROM master.sys.databases 
```

或者

```
EXEC sp_databases 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T15:51:43.980

这应该为您提供数据库名称：

```
var connectionString = string.Format("Data Source=localhost;User ID={0};Password={1};", userName, password);

DataTable databases = null;
using (var sqlConnection = new SqlConnection(connectionString))
{
    sqlConnection.Open();
    databases = sqlConnection.GetSchema("Databases");
    sqlConnection.Close();
}

if (databases != null)
{
    foreach (DataRow row in databases.Rows)
    {
        foreach (var item in row.ItemArray)
        {
            Console.Write("{0} ", item);
        }
        Console.WriteLine();
    }
} 
```

最后请随意排除所有打印。将所有这些都扔到控制台应用程序中以查看它的实际效果。表名位于 的索引 0 中`row.ItemArray`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T15:47:55.497

您可以使用 SMO- [SQL Server 管理对象](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB0QFjAA&url=http://msdn.microsoft.com/en-us/library/ms162169.aspx&ei=1jt4UOPSLNHIsgbCwYGQCA&usg=AFQjCNGBjqAHr2-GMGelwJqBMWuFRgTzMw&sig2=R2vu_hazkXrYASxZ1ICPww)。

这是代码项目中的两个示例代码：

[使用 SMO 的 SQL Server 身份验证](http://www.codeproject.com/Articles/31826/SQL-Server-Authentication-using-SMO)

[使用 SMO 的数据库](http://www.codeproject.com/Articles/123441/SQL-Server-2008-Backup-and-Restore-Databases-using)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T15:44:48.280

最新的数据库列表将在数据库本身中。为什么不连接到`tempdb`默认数据库（因为您必须连接到某些东西）开始，然后从 master.sys.databases 查询。

`select [name] from master.sys.databases`

然后，您可以使用任何必要的数据库更新连接字符串，或者使用该`ChangeDatabase()`方法简单地更改数据库。

例如`connection.ChangeDatabase(selectedDB);`

您也可以连接到 master，但我喜欢在 tempdb 中保留默认连接，因为有时人们会在创建对象之前忘记更改数据库。我宁愿垃圾进入 tempdb 而不是 master，因为在 SQL 重新启动时会重新创建 tempdb。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T15:45:21.043

你可以试试

```
select * from master.sys.databases 
```

# clojure - “#'symbol”符号在clojure中是什么意思？

> ID：12862607
> 
> 赞同：26
> 
> 时间：2012-10-12T15:42:12.760
> 
> 标签：clojure

我正在使用[本](https://devcenter.heroku.com/articles/clojure-web-application)教程在 Heroku 上学习 clojure。我在其他教程中也遇到过同样的事情。

无论如何，使用环中的码头适配器，你有这样的事情：

```
(defroutes routes 
  ...)

(defn start []
  (ring/run-jetty #'routes {:port 8080 :join? false})) 
```

我不明白什么`#'routes`意思。如果我用它替换`routes`它似乎工作正常。`#'symbol`符号是什么意思？研究起来非常困难。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-12T15:46:46.470

这是一个[阅读器宏](http://clojure.org/reader)。`#'foo`扩展到`(var foo)`. 请参阅[Clojure 中的 pound-quote (hash-quote, #') 是否运行解析和符号函数？](https://stackoverflow.com/questions/10945187/is-pound-quote-in-clojure-running-the-resolve-and-symbol-functions), Clojure和[http://clojure.org/vars中](http://clojure.org/vars)[的 Symbols 和 Vars 之间的区别](https://stackoverflow.com/questions/9113387/explanation-about-symbols-and-vars-and-their-differences-in-clojure)，您可以在其中找到深入的讨论。

# objective-c - iOS：在定位服务后台运行时更新 UI

> ID：12862608
> 
> 赞同：1
> 
> 时间：2012-10-12T15:42:17.407
> 
> 标签：objective-c, ios, core-location, multitasking

我有一个简单的应用程序，它使用位置服务，并注册在后台运行。`tableView`我用位置数据更新了一个简单的。当用户离开应用程序并执行其他操作时，仍会收到此数据。

目前我正在调用我的方法`- (void)applicationWillEnterForeground:(UIApplication *)application`来更新 UI，但是当应用程序打开时仍有一瞬间，并且 UI 得到更新。

我还尝试在后台进行定期 UI 更新，但并不奇怪这似乎不起作用。

**是否有任何解决方案，以便在用户将应用程序带回前台时完全更新 UI？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:01:38.220

最好的解决方案可能是在显示新数据之前进行分析并查看为什么您有任何延迟。很有可能您可以做一些事情来为显示的到来做好准备，例如提前进行 Core Data 查询（它们可能需要大量时间）。

另一种方法是在您被挂起时从屏幕上转储一个空白的 UI 位图，并根据活动直接写入它 - 然后当应用程序恢复时，在显示真正的完整 UI 之前将该位图简要显示为屏幕覆盖。

# flash - Flash - 检测大型组合键

> ID：12862610
> 
> 赞同：0
> 
> 时间：2012-10-12T15:42:21.557
> 
> 标签：flash

我想识别按下的大组合键

Ctrl + Alt + Shift + D

例如，在动作脚本中打开一些复活节彩蛋。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:55:32.357

使用模型来跟踪键状态，然后在键下无效以测试您的组合是否为真：

```
package
{
    import flash.display.Sprite;
    import flash.events.KeyboardEvent;
    import flash.ui.Keyboard;

    [SWF(percentWidth = 100, percentHeight = 100, backgroundColor = 0xefefef, frameRate = 60)]
    public class X extends Sprite
    {

        private var controlKeyDown:Boolean = false;
        private var altKeyDown:Boolean = false;
        private var shiftKeyDown:Boolean = false;
        private var dKeyDown:Boolean = false;

        public function X()
        {
            stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);
            stage.addEventListener(KeyboardEvent.KEY_UP, keyUpHandler);
        }

        protected function keyDownHandler(event:KeyboardEvent):void
        {
            switch (event.keyCode)
            {
                case Keyboard.ALTERNATE:
                    altKeyDown = true;
                    break;
                case Keyboard.CONTROL:
                    controlKeyDown = true;
                    break;
                case Keyboard.SHIFT:
                    shiftKeyDown = true;
                    break;
                case Keyboard.D:
                    dKeyDown = true;
                    break;
            }

            invalidateKeyDown();
        }

        protected function keyUpHandler(event:KeyboardEvent):void
        {
            switch (event.keyCode)
            {
                case Keyboard.ALTERNATE:
                    altKeyDown = false;
                    break;
                case Keyboard.CONTROL:
                    controlKeyDown = false;
                    break;
                case Keyboard.SHIFT:
                    shiftKeyDown = false;
                    break;
                case Keyboard.D:
                    dKeyDown = false;
                    break;
            }
        }

        protected function invalidateKeyDown():Boolean
        {
            if (altKeyDown && controlKeyDown && shiftKeyDown && dKeyDown)
            {
                trace("easter egg.");
                return true;
            }

            return false;
        }

    }
} 
```

# ios - iOS：在更新中删除本地化字符串文件

> ID：12862619
> 
> 赞同：0
> 
> 时间：2012-10-12T15:42:41.203
> 
> 标签：ios, localization, updates

我在 App Store 中有一个本地化字符串文件的应用程序。问题是我只想用英文的字符串文件提交更新，但是当我从 xcode 安装应用程序时（只用英文的字符串文件）在已经安装了应用程序的设备中（来自 App Store）我可以看到除英语以外的其他语言的字符串。

如果我在没有安装应用程序的设备中安装应用程序，我只能看到英文字符串，而不管设备上选择的语言。

我知道一种选择是更改字符串文件的名称，但我想知道是否有更聪明的方法来做到这一点。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:00:53.740

问题很可能是您的旧 localized.strings 文件仍在其他位置。当您使用本地化添加或更改语言时，字符串文件可能会移动到不同的文件夹。当增量更新发生时，它会获取新的字符串文件，但无法删除旧的，因为它位于不同的位置。但是，该位置位于搜索树的较高位置，因此当应用程序查找字符串时会首先找到该位置。

一种可能的解决方案（虽然不是一个好的解决方案）是将您的本地化.strings 文件重命名为不同的名称，然后在您之前使用本地化字符串的所有位置使用本地化字符串从表命令，将您的新文件命名为原始表。这不是一个很好的解决方案，但它应该可以工作。

如果您只需要一种语言，另一种可能的解决方案是确保字符串文件存储在与先前版本完全相同的捆绑位置中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:32:55.293

在调用 UIApplicationMain() 之前，我在 main.m 文件中解决了这一行的问题：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObject:@"en"] forKey:@"AppleLanguages"]; 
```

基本上，它强制该应用程序仅以英语提供。

# javascript - 在 JavaScript 中将字符串转换为数字的最快方法是什么？

> ID：12862624
> 
> 赞同：129
> 
> 时间：2012-10-12T15:43:07.487
> 
> 标签：javascript

任何数字，都是数字。字符串看起来像一个数字，它是数字。其他一切，它都是NaN。

```
'a' => NaN
'1' => 1
1 => 1 
```

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-10-12T15:43:07.487

据我所知，有4种方法可以做到这一点。

```
Number(x);
parseInt(x, 10);
parseFloat(x);
+x; 
```

通过我做的这个快速测试，它实际上取决于浏览器。

[http://jsperf.com/best-of-string-to-number-conversion/2](http://jsperf.com/best-of-string-to-number-conversion/2)

`Implicit`在 3 个浏览器上标记为最快，但它使代码难以阅读……所以选择你喜欢的任何东西！

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2015-04-09T16:19:01.570

## 至少有 5 种方法可以做到这一点：

如果您只想转换为整数，另一种快速（且简短）的方法是**双位非**（即使用两个波浪号字符）：

例如

# `~~x;`

参考：http: [//james.padolsey.com/cool-stuff/double-bitwise-not/](http://james.padolsey.com/cool-stuff/double-bitwise-not/)

到目前为止，我所知道的将字符串转换为数字的 5 种常用方法都有其不同（有更多的按位运算符有效，但它们都给出与 相同的结果`~~`）。此 JSFiddle 显示了您可以在调试控制台中预期的不同结果：http: [//jsfiddle.net/TrueBlueAussie/j7x0q0e3/22/](http://jsfiddle.net/TrueBlueAussie/j7x0q0e3/22/)

```
var values = ["123",
          undefined,
          "not a number",
          "123.45",
          "1234 error",
          "2147483648",
          "4999999999"
          ];

for (var i = 0; i < values.length; i++){
    var x = values[i];

    console.log(x);
    console.log(" Number(x) = " + Number(x));
    console.log(" parseInt(x, 10) = " + parseInt(x, 10));
    console.log(" parseFloat(x) = " + parseFloat(x));
    console.log(" +x = " + +x);
    console.log(" ~~x = " + ~~x);
} 
```

## 调试控制台：

```
123
  Number(x) = 123
  parseInt(x, 10) = 123
  parseFloat(x) = 123
  +x = 123
  ~~x = 123
undefined
  Number(x) = NaN
  parseInt(x, 10) = NaN
  parseFloat(x) = NaN
  +x = NaN
  ~~x = 0
null
  Number(x) = 0
  parseInt(x, 10) = NaN
  parseFloat(x) = NaN
  +x = 0
  ~~x = 0
"not a number"
  Number(x) = NaN
  parseInt(x, 10) = NaN
  parseFloat(x) = NaN
  +x = NaN
  ~~x = 0
123.45
  Number(x) = 123.45
  parseInt(x, 10) = 123
  parseFloat(x) = 123.45
  +x = 123.45
  ~~x = 123
1234 error
  Number(x) = NaN
  parseInt(x, 10) = 1234
  parseFloat(x) = 1234
  +x = NaN
  ~~x = 0
2147483648
  Number(x) = 2147483648
  parseInt(x, 10) = 2147483648
  parseFloat(x) = 2147483648
  +x = 2147483648
  ~~x = -2147483648
4999999999
  Number(x) = 4999999999
  parseInt(x, 10) = 4999999999
  parseFloat(x) = 4999999999
  +x = 4999999999
  ~~x = 705032703 
```

该`~~x`版本在“更多”情况下会产生一个数字，而其他情况通常会导致，但它会因无效输入而失败（例如，如果字符串在有效数字*后*包含非数字字符`undefined`，它将返回）。`0`

 *## 溢出

请注意：整数溢出和/或位截断可能发生在 中`~~`，但不会发生在其他转换中。虽然输入如此大的值并不常见，但您需要注意这一点。更新示例以包含更大的值。

一些 Perf 测试表明，标准`parseInt`和`parseFloat`函数实际上是最快的选项，大概是由浏览器高度优化的，但这完全取决于您的要求，因为*所有*选项都*足够快*：http : [//jsperf.com/best-of-string-to -数字转换/37](http://jsperf.com/best-of-string-to-number-conversion/37)

这一切都取决于性能测试的配置方式，因为某些显示 parseInt/parseFloat 的速度要慢得多。

## 我的理论是：

*   谎言
*   织补线
*   统计数据
*   JSPerf 结果:)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-10-16T03:56:25.540

使用运算符为字符串添加前缀`+`。

```
console.log(+'a') // NaN
console.log(+'1') // 1
console.log(+1) // 1 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-27T22:16:31.533

将字符串转换为整数的一种快速方法是使用按位或，如下所示：

```
x | 0 
```

虽然这取决于它是如何实现的，但理论上它应该相对较快（至少与 一样快`+x`），因为它会首先`x`转换为一个数字，然后执行一个非常有效的 or。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-07-02T05:46:20.470

这是一个简单的方法： **var num = Number(str);** 在此示例中， **str**是包含字符串的变量。你可以打开测试看看它是如何工作的：**谷歌浏览器开发者工具**，然后去**控制台**粘贴下面的代码。阅读评论以更好地了解转换是如何完成的。

```
// Here Im creating my variable as a string
var str = "258";

// here im printing the string variable: str
console.log ( str );

// here Im using typeof , this tells me that the variable str is the type: string
console.log ("The variable str is type: " + typeof str);

// here is where the conversion happens
// Number will take the string in the parentesis and transform it to a variable num as type: number
var num = Number(str);
console.log ("The variable num is type: " + typeof num); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-04-23T17:27:22.033

我发现这`num * 1`很简单，清晰，适用于整数和浮点数......

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-09-07T19:57:19.470

这可能不是那么快，但具有确保您的数字至少为某个值（例如 0）或最多为某个值的额外好处：

```
Math.max(input, 0); 
```

如果您需要确保最小值，通常您会这样做

```
var number = Number(input);
if (number < 0) number = 0; 
```

`Math.max(..., 0)`使您免于编写两个语句。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-27T06:04:44.143

您可以尝试使用我们刚刚正式发布的度量和数据类型转换库[UnitOf](https://digidemic.github.io/UnitOf/)！UnitOf 速度超快，体积小，并且在转换任何数据类型时都非常高效，而不会抛出错误或 null/undefined。当转换不成功时，将返回您定义的默认值或 UnitOf 的默认值。

```
//One liner examples
UnitOf.DataType("12.5").toFloat(); //12.5 of type Float is returned. 0 would be returned if conversion failed.
UnitOf.DataType("Not A Num").toInt(10); //10 of type Int is returned as the conversion failed.

//Or as a variable
var unit = UnitOf.DataType("12.5");
unit.toInt(5); //12.5 of type Float is returned. 5 would be returned if the conversion failed.
unit.toFloat(8); // 12 of type Int is returned. 8 would be returned if the conversion failed. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-31T16:12:47.527

最快的方法是使用-0：

```
const num = "12.34" - 0; 
```*

# javascript - 如果用户离开命名空间然后重新加入，Socket.io 广播将停止工作

> ID：12862628
> 
> 赞同：0
> 
> 时间：2012-10-12T15:43:12.210
> 
> 标签：javascript, node.js, socket.io

我的情况是这样的：

1.  **用户 A**使用他选择的名称创建命名空间
2.  **用户 B**加入创建的命名空间
3.  **用户 A**发送消息，由服务器广播并由**用户 B接收**
4.  **用户 B**发送消息，由服务器广播并由**用户 A接收**
5.  **用户 B**通过*客户端 socket.disconnect() 离开命名空间；*
6.  **用户 B**重新加入命名空间
7.  **用户 B**发送消息，该消息由服务器广播并由**用户 A接收**
8.  **用户 A**发送的消息由服务器广播，**用户 B未收到**

重要笔记：

*   如果**用户 B**刷新页面并重新加入该名称空间，而**用户 A**仍然在那里，那么他可以再次正常发送和接收消息。
*   当**用户 B**处于“*不工作*”状态时，他似乎仍在通过套接字发射获取事件。也就是说，只有**用户A**接收到双方发起的事件，而**用户B**只接收到自己发起的事件。

为什么，当**用户 B**离开并重新加入时，服务器相对于他来说变成了单向街道？

服务器代码：

```
var app = require('express')()
  , server = require('http').createServer(app)
  , io = require('socket.io').listen(server);

server.listen(8080);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

var connection_function = function(socket) {
    socket.on('join_chat', function(data) {
        socket.set('fb_id', data.id);
        socket.emit('joined_chat', data);
        socket.broadcast.emit('joined_chat', data);
        socket.namespace.connected_users[data.id] = data;
    });
    socket.on('send_message', function(data) {
        data.user = socket.namespace.connected_users[socket.store.data.fb_id];
        socket.emit('recieve_msg', data);
        socket.broadcast.emit('recieve_msg', data);
    });
    socket.on('disconnect', function () {
        socket.broadcast.emit('left_chat', socket.namespace.connected_users[socket.store.data.fb_id]);
        delete socket.namespace.connected_users[socket.store.data.fb_id];
    });

}
var chats = {};

var main = io.of('/main');
main.on('connection', function(socket) {
    socket.on('new_chat', function(data, fn) {
        if(!chats.hasOwnProperty(data.chat_name)) {
            chats[data.chat_name] = io.of('/' + data.chat_name);
            chats[data.chat_name].on('connection', connection_function);
            chats[data.chat_name].connected_users = {};
        }
        fn(data);
    });
}); 
```

**更新（2012 年 10 月 12 日星期五）**

经过更多研究后，问题似乎出在 socket.io 上：

[https://github.com/LearnBoost/socket.io-client/issues/251](https://github.com/LearnBoost/socket.io-client/issues/251)

[https://github.com/LearnBoost/socket.io-client/issues/473](https://github.com/LearnBoost/socket.io-client/issues/473)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:59:59.447

您确定不想改用 socket.io 房间吗？

socket.join(房间名);

io.socket.in(房间名).emit(.....;

我在这里有一个房间的工作示例：[https ://github.com/rcpeters/openMap_me/blob/master/app.js](https://github.com/rcpeters/openMap_me/blob/master/app.js)

# jquery - 重新访问 jQuery 的事件处理程序

> ID：12862630
> 
> 赞同：0
> 
> 时间：2012-10-12T15:43:12.960
> 
> 标签：jquery, events

我在下面有这段代码：

```
$("#radar_play").click(function(){
console.log(this);
$(this).unbind('click');
$(this).bind('click');
....
.....
.....

} 
```

然后在`<body>`标签中我在下面有这个按钮

```
<button id="radar_play'">PLAY ANIMATION</button> 
```

对我来说，看起来我正在删除点击事件（确实有效）然后重新附加它。

但是点击事件永远不会再次被绑定。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:45:04.983

当您重新绑定单击事件时，您也需要给它一个**处理程序**..否则该事件将不会被执行..

```
 $(this).unbind('click');
    $(this).bind('click', function() {

        // What you want to do

    }); 
```

或者

```
$(this).unbind('click').bind('click', function() {

    // What you want to do
}); 
```

另请注意，频繁绑定和取消绑定是一种**反模式**。如果可以，您需要避免它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:53:24.290

您需要在重新绑定时指定一个处理程序，您可以命名您的闭包并按如下方式使用它：

```
$("#radar_play").click(function click_handler(){
   //Perform the onclick logic
   $(this).blabla...
   $(this).unbind('click');
   ....
   //now we want to bind again
   $(this).bind('click', click_handler);
}); 
```

# scala - 如何使用 Slick 使用过滤器计算结果？

> ID：12862632
> 
> 赞同：11
> 
> 时间：2012-10-12T15:43:21.273
> 
> 标签：scala, playframework-2.0, scalaquery, slick

我面临一个我想简化的问题：（可以肯定，事实上我做错了）。

### 通缉

我想计算 id = 1 的用户数。在 SQL 语言中，假设它是这样的：

```
SELECT COUNT(*) FROM users WHERE id = 1 
```

### 代码

我在“提升”形式中使用 Slick，所以这是我计算用户的一段代码：

```
Query(Users.where( _.id === 1).length).first 
```

实际上这里发生的是 Slick 别名 ScalaQuery，实际上是使用过滤器原因创建一个子查询，然后计算子请求的结果。

```
SELECT COUNT(*) FROM (SELECT * FROM users WHERE id = 1)) 
```

对于这样的查询，似乎开销很大。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T16:01:07.140

不确定这是否已从 ScalaQuery 更改为 Slick，但请尝试：

```
val q = for{ 
  id <- Parameters[Int]
  t <- tableObject if t.id is id
} yield t.id.count

val cnt = q(someID).firstOption getOrElse 0 
```

# windows - msbuild 能否在 Windows 上安装应用程序，例如 java JDK？

> ID：12862633
> 
> 赞同：0
> 
> 时间：2012-10-12T15:43:24.487
> 
> 标签：windows, msbuild, automation

我正在努力自动安装一些软件。

它依赖于一些东西，比如 Java JDK 以及很多需要手动安装和复制东西的东西。

我希望能够测试是否安装了各种软件包，如果没有安装或更新它们。

我可以让 MSBuild 完成此类工作的可能性有多大？如果不太可能，那么我在哪里可以看？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:36:11.537

答案是肯定的。MSBuild 可以[执行](http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx)任何命令——只要该命令不希望用户在计算机前。我知道您可以进行静默 JDK 安装，因此您可以在 MSBuild 目标中执行该命令。

然而，一个更有趣的问题是：你应该这样做吗？我认为在构建过程中执行机器范围的配置步骤是不好的做法。对于某些事情，比如为 CI 周期部署新构建的产品是可以的，但对于构​​建的目的，它会非常不灵活。

在 JDK 的情况下我会推荐什么：由于 JDK 很大并且大部分是向后兼容的，因此在您的构建脚本中检查机器上是否存在正确版本的 JDK。如果没有，则构建失败并在日志中打印出如何配置机器的说明。对于较小的依赖项，请参阅这个[SO question](https://stackoverflow.com/questions/49196/storing-third-party-libraries-in-source-control)。

# algorithm - 完美的正方形与否？

> ID：12862637
> 
> 赞同：12
> 
> 时间：2012-10-12T15:43:37.283
> 
> 标签：algorithm, perfect-square

这是一个检查数字是否是完美平方的代码。为什么它有效？

```
static bool IsSquare(int n)
{
    int i = 1;
    for (; ; )
    {
        if (n < 0)
            return false;
        if (n == 0)
            return true;
        n -= i;
        i += 2;
    }
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-12T15:45:40.460

因为所有完全平方都是连续奇数的和：

*   1 = 1
*   4 = 1 + 3
*   9 = 1 + 3 + 5
*   16 = 1 + 3 + 5 + 7

等等。您的程序尝试从 中减去连续的奇数`n`，并查看它是下降到零还是变为负数。

您可以通过绘制边为 的正方形来非正式地证明这一点，`{1,2,3,4,...}`并观察`k+1`从正方形构造正方形`k`需要添加`2k+1`单位正方形。

# c# - 使用 itextsharp 创建的文件已锁定

> ID：12862639
> 
> 赞同：0
> 
> 时间：2012-10-12T15:43:44.247
> 
> 标签：c#, itextsharp

该文件创建和电子邮件就好了。但是，当我尝试在不确定的时间内删除或修改它时，我会收到可怕的“无法访问文件，因为它正在被另一个程序使用”消息。我之前在 itextsharp 中创建的文档中看到过它，但这是因为 PdfStamper 处于打开状态。不知道它现在锁定了什么。尝试使用 WhoLockMe 来查看发生了什么，但它在 Windows 7 X 64 上不起作用。尝试使用 LockHunter 但它只是说该文件没有被任何进程锁定。该文件的位置仅限于管理员，并且我已确认在发生这种情况时文件中没有其他管理员。

```
public string SubmitWeekly(string store, string techId, string date, WeeklyHeader header, string latLon, string device, List<CPEquipment> equipment)
    {
        PdfReader templateReader = null;
        PdfReader overFlowReader = null;
        PdfStamper templateStamper = null;
        PdfStamper overFlowStamper = null;

        try
        {
            string result = "Success";

            string year = date.Right(4);
            string footerText = string.Format("Submitted {0} near {1} on device {2}", date, latLon, device);

            string template = @"C:\Templates\WeeklyInspectionFormCombined.pdf";
            string overflowTemplate = @"C:\Templates\WeeklyInspectionOverflowForm.pdf";
            string newFile = string.Format(@"C:\Documents\{0}\{1}\Weekly Inspection {2} {3}.pdf", year, techId, store, date);
            string overFlowFile = string.Format(@"C:\Documents\{0}\{1}\Weekly Inspection Pg 2 {2} {3}.pdf", year, techId, store, date);
            string directory = string.Format(@"C:\Documents\{0}\{1}", year, techId);

            templateReader = new PdfReader(template);

            //Check for directory and create if doesn't exist
            if (!Directory.Exists(directory))
                Directory.CreateDirectory(directory);

            templateStamper = new PdfStamper(templateReader, new FileStream(newFile, FileMode.Create));

            AcroFields templateFields = templateStamper.AcroFields;
            AcroFields overFlowFields = null;

            int equipCnt = 1;
            int attachCnt = 1;

            //Extract stand alone items from equipment list
            List<CPEquipment> seUnits = (from s in equipment
                                         where s.Serial == s.AttachedTo && s.Status != "ATTACHMENT"
                                         select s).ToList();

            //Extract attachments from equipment list
            List<CPEquipment> attachments = (from a in equipment
                                             where a.Status == "ATTACHMENT"
                                             select a).ToList();

            //Set header and footer info in new file
            templateFields.SetField("Store Number", store);
            templateFields.SetField("Technician", techId);
            templateFields.SetField("Week Of", date.WeekOf());
            templateFields.SetField("Street Address", stAddress);
            templateFields.SetField("City", stCity);
            templateFields.SetField("Comments", header.Comments + "\nTrained:\t" + header.Trained + "\nOn:\t" + header.Topics);
            templateFields.SetField("Footer", footerText);

            //Set security info in new file
            templateFields.SetField("WL", header.WL == "True" ? "Yes" : "No");
            templateFields.SetField("TL", header.TL == "True" ? "Yes" : "No");
            templateFields.SetField("CC", header.CC == "True" ? "Yes" : "No");

            //Set equipment lines in new file
            int maxLines = seUnits.Count > 20 ? 20 : seUnits.Count;
            while (equipCnt <= maxLines)
            {
                CPEquipment current = seUnits.ElementAt(equipCnt - 1);
                CPEquipment trailer = (from t in equipment
                                       where t.AttachedTo == current.Serial && t.AttachedTo != t.Serial && t.Status != "ATTACHMENT"
                                       select t).FirstOrDefault();
                templateFields.SetField("ModelRow" + equipCnt, current.Model);
                templateFields.SetField("SerialRow" + equipCnt, current.Serial);
                templateFields.SetField("StatusRow" + equipCnt, current.Status);
                templateFields.SetField("Tool TurnedRow" + equipCnt, current.ToolTurned);
                templateFields.SetField("Last PMRow" + equipCnt, current.LastPmDate + " " + current.LastPmHours);
                templateFields.SetField("Current HoursRow" + equipCnt, current.CurrentHours);
                templateFields.SetField("TagRow" + equipCnt, current.Tag);
                templateFields.SetField("StExpiresRow" + equipCnt, current.State + " " + current.Expiration);
                if (trailer != null)
                {
                    templateFields.SetField("Trailer ModelRow" + equipCnt, trailer.Serial);
                    templateFields.SetField("Trailer VINRow" + equipCnt, trailer.Model);
                    templateFields.SetField("TagRow" + equipCnt, trailer.Tag);
                    templateFields.SetField("StExpiresRow" + equipCnt, trailer.State + " " + trailer.Expiration);
                }

                equipCnt++;
            }

            //Set overflow lines if any
            if (seUnits.Count > 20)
            {
                overFlowReader = new PdfReader(overflowTemplate);
                overFlowStamper = new PdfStamper(overFlowReader, new FileStream(overFlowFile, FileMode.Create));
                overFlowFields = overFlowStamper.AcroFields;
                overFlowFields.SetField("Store", store);
                overFlowFields.SetField("Footer", footerText);

                while (equipCnt > 20 && equipCnt < seUnits.Count)
                {
                    CPEquipment current = seUnits.ElementAt(equipCnt - 1);
                    CPEquipment trailer = (from t in equipment
                                           where t.AttachedTo == current.Serial && t.AttachedTo != t.Serial
                                           select t).FirstOrDefault();
                    overFlowFields.SetField("ModelRow" + (equipCnt - 20), current.Model);
                    overFlowFields.SetField("SerialRow" + (equipCnt - 20), current.Serial);
                    overFlowFields.SetField("StatusRow" + (equipCnt - 20), current.Status);
                    overFlowFields.SetField("Tool TurnedRow" + (equipCnt - 20), current.ToolTurned);
                    overFlowFields.SetField("Last PMRow" + (equipCnt - 20),
                                            current.LastPmDate + " " + current.LastPmHours);
                    overFlowFields.SetField("Current HoursRow" + (equipCnt - 20), current.CurrentHours);
                    overFlowFields.SetField("TagRow" + (equipCnt - 20), current.Tag);
                    overFlowFields.SetField("StExpiresRow" + (equipCnt - 20),
                                            current.State + " " + current.Expiration);
                    if (trailer != null)
                    {
                        overFlowFields.SetField("Trailer ModelRow" + (equipCnt - 20), trailer.Serial);
                        overFlowFields.SetField("Trailer VINRow" + (equipCnt - 20), trailer.Model);
                        overFlowFields.SetField("TagRow" + (equipCnt - 20), trailer.Tag);
                        overFlowFields.SetField("StExpiresRow" + (equipCnt - 20),
                                                trailer.State + " " + trailer.Expiration);
                    }

                    equipCnt++;
                }

                overFlowStamper.FormFlattening = true;
                overFlowReader.Close();
                overFlowStamper.Close();
            }

            //Set attachment fields and update attachment in db
            foreach (CPEquipment attach in attachments)
            {
                templateFields.SetField("SNRow" + attachCnt, attach.Serial);
                templateFields.SetField("MR" + attachCnt, attach.Model);

                attachCnt++;
            }

            //Flatten forms and close readers and stampers
            templateStamper.FormFlattening = true;
            templateReader.Close();
            templateStamper.Close();

            //Set up email
            MailMessage mail = new MailMessage(new MailAddress("me@mydomain.com"),
                                            new MailAddress(techMail));
            mail.Attachments.Add(new Attachment(newFile));
            if (equipCnt > 20)
                mail.Attachments.Add(new Attachment(overFlowFile));
            mail.Subject = "Weekly Inspection";
            SmtpClient client = new SmtpClient(//Hidden);
            client.Send(mail);

            return result;
        }
        catch (Exception e)
        {
            if (templateStamper != null)
            {
                templateStamper.FormFlattening = true;
                templateStamper.Close();
            }
            if (overFlowStamper != null)
            {
                overFlowStamper.FormFlattening = true;
                overFlowStamper.Close();
            }
            if (templateReader != null)
                templateReader.Close();
            if (overFlowReader != null)
                overFlowReader.Close();

            return "Submit Weekly: " + e.Message;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:45:38.957

带有and的[`using`声明](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)应该可以解决您的问题。如果您不需要保存 PDF，您可以替换为 a以节省您在发送电子邮件附件后删除文件的额外步骤。`PdfStamper``FileStream``FileStream``MemoryStream`

# java - 以前可以使用空的密钥库密码吗？

> ID：12862655
> 
> 赞同：25
> 
> 时间：2012-10-12T15:44:28.890
> 
> 标签：java, android, keytool

在与 Android 开发长期休息后签署 apk 时，我很惊讶我无法再输入一个**空的密钥库密码**来解锁它。是我一个人还是以前有可能？如果是这样，那是什么时候发生的变化，我怎么能设法解锁密钥库？

一些背景：也许我只是疯了，之前没有为密钥库使用空密码，但是我可以使用的唯一可能的密码也不起作用（我发誓，我没有机会' d 使用了另一个密码！）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T19:34:13.163

`keytool`可以使用Java sdk 中的来操作密钥库。

尝试在您的密钥库上执行 keytool，并使用空密码提取证书。之后，将其导入新的密钥库。这一次，使用真正的密码。

开关`-exportcert`将帮助您实现这一目标。

可能是您更新了 java sdk，因此您无法输入空密码（由于该工具的某些安全升级）。在这种情况下，您可以尝试安装较旧的 sdk 并执行上述操作。

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T14:49:55.860

您不能对密钥库使用空密码。

我检查过，只要 jdk 1.3 keytool 不允许，请参阅[http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/keytool.html](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/keytool.html)文档明确指出：

> storepass**必须**至少有 6 个字符长。它必须提供给访问密钥库内容的所有命令。对于此类命令，如果未在命令行中提供 -storepass 选项，则会提示用户输入该选项。

为了好玩，我想尝试 jdk 1.2 中的 keytool 并下载它，因为它的文档没有说明密码是强制性的，但我需要一个 Windows NT 盒子来安装它！我绝对不认为 Android 曾经使用过这个 keytool 版本。

抱歉，您的密码似乎是：忘记了密码，或者使用大写锁定输入密码/激活了错误的键盘布局。:(

编辑：

如果不是布局问题，您可以尝试

*   使用此反向工程代码使用空字符串密码提取密钥：http: [//metastatic.org/source/JKS.java](http://metastatic.org/source/JKS.java)。
*   如果这不起作用，你就完蛋了，你唯一的希望就是使用[http://code.google.com/p/android-keystore-password-recover/](http://code.google.com/p/android-keystore-password-recover/)或[http://code.google 暴力破解密钥。 com/p/patator/](http://code.google.com/p/patator/) (测试并使用最快的)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T03:31:51.270

您可以编写一个简单的 Java SE 程序来尝试使用您的密钥或列出别名，而不是使用 keytool。API*应该*（不是 100%）允许您使用空 ( `""`) 密码。

[您还可以尝试使用portecle](http://portecle.sourceforge.net/)等第三方工具来列出/提取密钥。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-16T20:02:21.877

尝试默认的android调试模式密钥库密码`android`或java cacerts默认`changeit`/`changeme`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-10-19T11:24:43.233

我也遇到了这个问题，这很奇怪。我有一个不受任何密码保护的旧密钥库。我可以在 SoapUI 中成功使用它，但`keytool`密钥[库资源](http://www.keystore-explorer.org/features.html)管理器无法打开它。我必须创建已经有密码的新密钥库，从那时起一切都很好。

我怀疑 Java 8 比 Java 7 更挑剔。

```
keytool -importkeystore -srckeystore client.jks -destkeystore client2.jsk -srcstoretype JKS -deststoretype JKS -deststorepass changeit 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-06-17T03:59:39.583

我在尝试使用`none`作为默认密码的 hadoop 的密钥存储提供程序时遇到了同样的问题，请参阅：[JavaKeyStoreProvider.java](https://github.com/apache/hadoop/blob/rel/release-3.1.1/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/JavaKeyStoreProvider.java#L100)

我最终从 OpenJDK8 复制了原始[keytool](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/sun/security/tools/keytool/Main.java)并删除了这个新实现中的限制（它是相同的，但没有 6 个字符的限制）：[KeytoolWithoutPasswordLimits](https://github.com/gumartinm/SparkForFun/blob/01e9273ffe6a017971ed7ec035f9287dff98f872/keytool/src/sun/security/tools/keytool/KeytoolWithoutPasswordLimits.java)

这样，我设法将其`none`用作密码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-16T20:19:32.340

如果以上所有方法都失败了，您可以尝试破解它。相关问题：[Android - 忘记密钥库密码。我可以解密密钥库文件吗？](https://stackoverflow.com/questions/8894987/android-forgot-keystore-password-can-i-decrypt-keystore-file)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-01T15:18:13.417

这对我行得通：

```
keytool -list -keystore keyStoreFileWithotPassword.jks -protected 
```

更正：事实证明**列表**功能无需输入实际密码即可工作！但是**导入**功能确实需要密码

# c# - C# Get 访问器不可访问

> ID：12862657
> 
> 赞同：1
> 
> 时间：2012-10-12T15:44:34.230
> 
> 标签：c#, arrays, ienumerable, enumerable

我有以下类定义：

```
 public static string SplitString(string someText)
 {
      var queryArray = Regex.Split(someText, "\\s+(?=\\w+)");
      foreach (var i in Enumerable.Range(0, queryArray.Count - 1)) {
           // Some code
      }
 } 
```

问题是 queryArray.Count 给了我以下错误：

无法在此上下文中使用属性“System.Array.Count”，因为 get 访问器不可访问。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T15:45:47.203

您可以尝试使用该[`Length`](http://msdn.microsoft.com/en-us/library/system.array.length.aspx)属性：

```
public static string SplitString(string someText)
{
    var queryArray = Regex.Split(someText, "\\s+(?=\\w+)");
    foreach (var i in Enumerable.Range(0, queryArray.Length - 1)) {
        // Some code
    }
} 
```

此外，如果这样编写，您的代码可能会更具可读性：

```
public static string SplitString(string someText)
{
    var queryArray = Regex.Split(someText, "\\s+(?=\\w+)");
    for (var i = 0; i < queryArray.Length; i++) {
        // Some code
    }
} 
```

或像这样：

```
public static string SplitString(string someText)
{
    var queryArray = Regex.Split(someText, "\\s+(?=\\w+)");
    foreach (var item in queryArray) {
        // Some code
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:46:32.697

`Regex.Split`返回一个未定义`Count`属性的数组。改用`Length`：

```
 public static string SplitString(string someText)
 {
      var queryArray = Regex.Split(someText, "\\s+(?=\\w+)");
      foreach (var i in Enumerable.Range(0, queryArray.Length - 1)) {
           // Some code
      }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:46:59.327

你可以试试`Length property`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:50:04.990

当 Select 扩展为您获取索引时，为什么还要担心索引：

```
var data = Regex.Split("someText other", "\\s+(?=\\w+)")
                .Select((itm, indexer) => string.Format("{0} is index {1}", itm, indexer));

/* Data has 2 strings in the list:

someText is index 0
other is index 1

*/ 
```

# java - 如何验证没有使用 Mockito 调用特定方法？

> ID：12862659
> 
> 赞同：796
> 
> 时间：2012-10-12T15:44:46.263
> 
> 标签：java, unit-testing, junit, mockito, tdd

如何验证**没有**在对象的依赖项上调用方法？

例如：

```
public interface Dependency {
    void someMethod();
}

public class Foo {
    public bar(final Dependency d) {
        ...
    }
} 
```

使用 Foo 测试：

```
public class FooTest {
    @Test
    public void dependencyIsNotCalled() {
        final Foo foo = new Foo(...);
        final Dependency dependency = mock(Dependency.class);
        foo.bar(dependency);
        **// verify here that someMethod was not called??**
    }
} 
```

* * *

## 回答 #1

> 赞同：1339
> 
> 时间：2012-10-12T16:08:03.190

更有意义：

```
import static org.mockito.Mockito.never;
import static org.mockito.Mockito.verify;

// ...

verify(dependency, never()).someMethod(); 
```

此功能的文档在[§4 "Verifying exact number of invocations / at least x / never"](https://static.javadoc.io/org.mockito/mockito-core/2.7.21/org/mockito/Mockito.html#4)中，`never`javadoc 在[这里](https://static.javadoc.io/org.mockito/mockito-core/2.7.21/org/mockito/Mockito.html#never_verification)。

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2012-10-12T15:44:46.263

在方法上使用第二个参数`Mockito.verify`，如下所示：

```
Mockito.verify(dependency, Mockito.times(0)).someMethod() 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-03-03T14:54:02.150

作为一个更通用的模式，我倾向于`@After`在测试中使用一个块：

```
@After
public void after() {
    verifyNoMoreInteractions(<your mock1>, <your mock2>...);
} 
```

然后测试可以自由地验证*应该*调用的内容。

此外，我发现我经常忘记检查“无交互”，后来才发现调用了不应该调用的东西。

所以我发现这种模式对于捕获所有未经过特别验证的意外调用很有用。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-10-24T13:34:04.453

首先：您应该始终导入 mockito static，这样代码将更具可读性（和直观性）：

```
import static org.mockito.Mockito.*; 
```

实际上有很多方法可以实现这一点，但是（可以说）使用

```
verify(yourMock, times(0)).someMethod(); 
```

在您的测试中使用方法，当在其他测试中使用它来断言一定数量的执行时，如下所示：

```
verify(yourMock, times(5)).someMethod(); 
```

替代方案是：

```
verify(yourMock, never()).someMethod(); 
```

或者-当您真的想确保实际上根本没有调用某个模拟对象时-您可以使用：

```
verifyZeroInteractions(yourMock) 
```

请注意：verifyZeroInteractions(Object... mocks) 已弃用。从 3.0.1 版开始。现在推荐的方法是：

```
verifyNoInteractions(yourMock) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-03-22T12:57:39.587

和方法在内部具有相同的实现`verifyNoMoreInteractions()`：`verifyZeroInteractions()`

```
public static transient void verifyNoMoreInteractions(Object mocks[])
{
    MOCKITO_CORE.verifyNoMoreInteractions(mocks);
}

public static transient void verifyZeroInteractions(Object mocks[])
{
    MOCKITO_CORE.verifyNoMoreInteractions(mocks);
} 
```

所以我们可以在模拟对象或模拟对象数组上使用它们中的任何一个来检查是否没有使用模拟对象调用任何方法。

# javascript - Codeigniter 2.1，Jquery - 删除所有选中的复选框

> ID：12862667
> 
> 赞同：1
> 
> 时间：2012-10-12T15:44:57.417
> 
> 标签：javascript, jquery

目前，我对这个问题感到困惑。如何删除所有已检查的文件？这是选择或取消选择复选框的功能：

```
var del_selected = $('.zute_strane_izmena_obrisi_sve'),
del_url = del_selected.attr('href'),
selektuj_sve = $('.zute_strane_izmena_selektuj_sve'),
slike = $('.zuta_strana_trenutne_slike'),
box = slike.find(':checkbox'),
selektovane_slike = [];

    selektuj_sve.on('click', function(){
        $(this).text(box.is(':checked') ? 'Selektuj Sve Slike' : 'Deselektuj Sve Slike');
        box.attr('checked', !box.is(':checked'));
    }); 
```

Jquery 现在（它工作没有错误）：

```
del_selected.on('click', function(e){

    box.filter(':checked').each(function(){
        selektovane_slike.push($(this).val());
        $(this).parent().slideUp('fast');
    });
    data = JSON.stringify(box.serializeArray(), null, 2);

    console.log(data);
    e.preventDefault();
}); 
```

然后去哪儿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:50:39.063

您需要向服务器发出[AJAX 请求](http://api.jquery.com/jQuery.post/)以删除文件。您需要非常小心文件权限。Web 服务器要么需要具有删除权限，要么需要将操作推迟到执行此操作的进程（例如通过将请求写入数据库或队列）。

# ruby-on-rails-3 - 使用 ajax 重新渲染 fields_for

> ID：12862668
> 
> 赞同：0
> 
> 时间：2012-10-12T15:45:03.977
> 
> 标签：ruby-on-rails-3

我在用 fields_for 刷新部分时遇到问题。

这是部分（'table_detelle'）的代码

```
<table class="table">
    <thead>
        <tr>
            <th><%= t('.denominacion') %></th>
            <th><%= t('.cantidad_ingreso') %></th>
            <th><%= t('.importe') %></th>
        </tr>
    </thead>
    <tbody>

        <%= f.fields_for :operacion_detalles do |builder| %>
        <tr>
            <%= render 'table_detalle_operacion', f: builder %>
        </tr>
        <% end unless @operacion.nil? %>

    </tbody>
</table>
<%= content_tag :h3, t('.total', :value=> number_to_currency(@operacion.R_IMPORTE)).html_safe, :class => 'pull-right', style: 'display:inline'  %> 
```

当用户更改组合的值时，我想刷新上面的部分（因为详细信息对象必须更改并且是可编辑的）

这是javascript代码：

```
$('#operacion_TIPOVALOR_ID').change(function(){
                      $.ajax({
                      url: '<%= cambiar_tipo_valor_movimientos_path %>',
                      data: {tipo_valor_id: $('#operacion_TIPOVALOR_ID').val()},
                      complete: function(){
                        $('#tipo_valor_loader').css('display','none');
                      },
                      beforeSend: function(){
                        $('#tipo_valor_loader').css('display','inline');
                      },
                      success: null,
                      dataType: 'script'
                    });
            }); 
```

控制器代码：

```
def cambiar_tipo_valor
        @operacion = Operacion.new
        denominaciones = TipoValorDenominacion.all_from_tipo_valor params[:tipo_valor_id]
        denominaciones.each do |deno|
            @operacion.operacion_detalles.build :tipo_valor_denominacion => deno, :I_CANTIDAD => 0, :R_IMPORTE => 0
        end
    end 
```

如您所见，“operacion_detalles”会根据用户选择而变化。

.js.erb 代码：

```
$('#detalle').html('<%= escape_javascript(render :partial => 'table_detalle') %>'); 
```

但是，我得到：

```
undefined local variable or method `f' for #<#<Class:0x45ae1c8>:0x5062338> 
```

所以，我需要 f 变量来渲染部分。有没有办法模拟 f 变量？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:08:38.720

我别无选择，只能手动解决问题。我的意思是说？

而不是 field_for => each_with_index：

```
 <% @operacion.operacion_detalles.each_with_index  do |detalle, index| %>
        <tr>
        <%= render 'table_detalle_operacion',  detalle: detalle, index: index  %>
        </tr>
    <% end -%> 
```

像这样使用标签助手：

```
<td>
    <input type="hidden" value="<%= detalle.tipo_valor_denominacion.R_MULTIPLICADOR %>" class="multiplicador"/>
    <%= hidden_field_tag "operacion[operacion_detalles_attributes][#{index}][TIPOVALORDENO_ID]", detalle.TIPOVALORDENO_ID %>
    <%= detalle.tipo_valor_denominacion.CTIPOVALORDENO %></td>
<td>
    <%= text_field_tag "operacion[operacion_detalles_attributes][#{index}][I_CANTIDAD]", detalle.I_CANTIDAD %>
    <%= content_tag(:span, detalle.errors[:I_CANTIDAD].join(', '), class: 'help-block') if detalle.errors.has_key? :I_CANTIDAD %>
</td>
<td>
    <%= hidden_field_tag "operacion[operacion_detalles_attributes][#{index}][R_IMPORTE]", detalle.R_IMPORTE %>
    <%= content_tag :span, number_to_currency(detalle.R_IMPORTE), class: 'detalle-importe pull-right' %>
    <%= content_tag(:span, detalle.errors[:R_IMPORTE].join(', '), class: 'help-block') if detalle.errors.has_key? :R_IMPORTE %>
</td> 
```

在这种情况下，我提供了名称，因此当执行此代码时

```
$('#detalle').html('<%= escape_javascript(render :partial => 'table_detalle') %>') 
```

它不需要 f 变量。

希望能帮助到你。

pd: I know this is not a very good solution but it works.

# sql - 从不同表中的另一个字段更新表中的 1 个字段（OS400，不是 1 对 1 关系）

> ID：12862676
> 
> 赞同：6
> 
> 时间：2012-10-12T15:45:38.827
> 
> 标签：sql, db2, sql-update, ibm-midrange

我试图从另一个表中的另一个字段更新表中的一个字段。

正在更新的表将有多个记录需要从另一个表中的 1 个匹配项进行更新。

例如，我有一个 100 万行的销售历史文件。这百万条记录有大约 40,000 个不同的 sku 代码，每一行都有一个日期和时间戳。每个 sku 都会有多个记录。

我添加了一个名为 MATCOST（材料成本）的新字段。

我有第二个表，其中包含 SKU 和 MATCOST。

所以我想用表2中相应的SKU的MATCOST标记表1中的每一行。当它不是一对一的关系时，我似乎无法实现这一点。

这是我尝试过的：

```
update 
  aulsprx3/cogtest2 
set 
  matcost = (select Matcost from queryfiles/coskitscog where 
  aulsprx3/cogtest2.item99 = queryfiles/coskitscog.ITEM ) 
where 
  aulsprx3/cogtest2.item99=queryfiles/coskitscog.ITEM 
```

但这会导致 SQL 错误：Column qualifier or table COSKITSCOG undefined and highlight the q in last reference to queryfiles/coskitscog.Item

有任何想法吗 ？

最亲切的问候

亚当

更新：这就是我的桌子原则上的样子。1 个表包含销售数据，另一个包含已售商品的 MATCOSTS。我需要使用 COSKITCOG 表中的数据更新销售数据表 (COGTEST2)。我不能使用合并语句，因为它不是一对一的关系，我使用的大多数选择函数都会导致多选错误。唯一匹配的字段是 Item=Item99

我找不到匹配多个的方法。在示例中，我们必须使用 3 个 SQL 语句，并且只需指定项目代码。但在现场，我有大约 40,000 个项目代码和超过一百万个销售数据记录需要更新。如果 SQL 不这样做，我想我必须尝试在 RPG 程序中编写它，但目前这超出了我的范围。

感谢您的任何帮助，您可以提供。

![表格示例](../Images/498b7317f3ea7b03d081db32a9415a72.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:00:00.257

好的，这是最后一个有效的 SQL 语句。（实际上有 3 个值要更新）

```
 UPDATE atst2f2/SAP20 ct                                  
       SET VAL520 = (SELECT cs.MATCOST                       
                    FROM queryfiles/coskitscog cs           
                    WHERE cs.ITEM = ct.pnum20),
           VAL620 = (SELECT cs.LABCOST                       
                    FROM queryfiles/coskitscog cs           
                    WHERE cs.ITEM = ct.pnum20),
           VAL720 = (SELECT cs.OVRCOST                       
                    FROM queryfiles/coskitscog cs           
                    WHERE cs.ITEM = ct.pnum20),             
       WHERE ct.pnum20 IN (SELECT cs.ITEM                    
                       FROM queryfiles/coskitscog cs) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T16:06:59.157

[使用相关名称](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/db2/rbafzc2cornm.htm)限定列。

```
UPDATE AULSPRX3/COGTEST2 A
    SET A.matcost = (SELECT matcost 
                       FROM QUERYFILES/COSKITSCOG B
                       WHERE A.item99 = B.item)
    WHERE EXISTS(SELECT * 
                   FROM QUERYFILES/COSKITSCOG C
                   WHERE A.item99 = C.item) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T02:05:47.967

这种更紧凑的方式来做同样的事情应该更有效，是吗？

```
UPDATE atst2f2/SAP20 ct                                  
   SET (VAL520, VAL620, VAL720) = 
       (SELECT cs.MATCOST, cs.LABCOST, cs.OVRCOST                      
                FROM queryfiles/coskitscog cs           
                WHERE cs.ITEM = ct.pnum20)             
   WHERE ct.pnum20 IN (SELECT cs.ITEM                    
                   FROM queryfiles/coskitscog cs) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T16:40:00.297

从[UPDATE](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/db2/rbafzupdt.htm)，我建议：

```
update 
  aulsprx3/cogtest2 
set 
  (matcost) = (select Matcost from queryfiles/coskitscog where 
               aulsprx3/cogtest2.item99 = queryfiles/coskitscog.ITEM)
where 
  aulsprx3/cogtest2.item99=queryfiles/coskitscog.ITEM 
```

注意周围的大括号`matcost`。

# java - 如何更改小部件启动器预览？

> ID：12862678
> 
> 赞同：9
> 
> 时间：2012-10-12T15:45:39.990
> 
> 标签：java, android, android-widget, launcher

我正在创建一个小部件，我希望在启动器中，我的小部件的预览不仅仅是我的应用程序图标。

例如：

![在此处输入图像描述](../Images/b26db20674f4a5c0bf3a2b39deae3cf0.png)

联系人小部件只是应用程序图标，但日历小部件不是。

如何为此启动器预览设置自己的图像？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-12T15:47:53.757

`android:previewImage="@drawable/preview"`在 widget_info.xml 上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T10:40:16.947

还创建小部件预览 - 请点击此链接

[Android 3.0 - 创建小部件预览](https://stackoverflow.com/questions/5876628/android-3-0-widget-preview)

# maven - 为什么 hudson 找不到我的新版本的父 pom？

> ID：12862683
> 
> 赞同：0
> 
> 时间：2012-10-12T15:46:03.990
> 
> 标签：maven, hudson, pom.xml

每次我构建一个新版本的父 pom 并将我的子 pom 指向新的父 pom 时，Hudson 都无法解决它。这发生在 Hudson 处于解析 pom" 阶段时。

```
Sync complete, took 226 ms
Parsing POMs
ERROR: Failed to parse POMs
org.apache.maven.project.ProjectBuildingException: Cannot find parent: myGroup:project-pom for project: myGroup:myChildArtifact:jar:1.2.0-SNAPSHOT for project myGroup:myChildArtifact:jar:1.2.0-SNAPSHOT 
```

在此之后，它继续抱怨它无法在任何远程存储库中找到 project-pom，它甚至列出了该 project-pom 最肯定存在的关系组。我已经仔细检查了很多次；它在那里，但无论出于何种原因，哈德森都找不到它。

请注意，这不是 MAven 未能找到父级；Hudson 正在解析 pom 以构建它自己的工作间关系的元数据，例如在构建另一个工作之后应该构建哪个工作。另请注意，如果将其单独放置 10-20 小时，它通常会消失。所以，我只能假设 Hudson 将一些缓存保存在我似乎找不到的地方。

哈德逊版 1.364

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:55:06.843

显然，这是哈德森的内部。我已经升级到新的jenkins，2.2，我不再有这个问题。

# node.js - 来自 Geoserver 的 GeoJson 使用 node.js

> ID：12862685
> 
> 赞同：3
> 
> 时间：2012-10-12T15:46:07.127
> 
> 标签：node.js, geoserver

我是 Node.js 的新手，通过示例学习。

这是我想要做的，我有一个运行地理服务器来服务 GeoJson，我想调用 geoserver WFS url 并使用 node.js 获取 json 数据。这是代码，当我运行它时，我得到：

getaddrinfo ENOENT

```
var http = require('http');

var options = {
    host: "local:8080/geoserver/wfs?service=WFS&version=1.0.0&request=GetFeature&typeName=layername&outputFormat=JSON&cql_filter=id=1";
    path: '/'
}
var request = http.request(options, function (res) {
    var data = '';
    res.on('data', function (chunk) {
        data += chunk;
    });
    res.on('end', function () {
        console.log(data);

    });
});
request.on('error', function (e) {
    console.log(e.message);
});
request.end(); 
```

请指导我正确的方向。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:49:59.007

您需要传入正确的选项：

host - 应该只是主机名

path - 主机上资源的路径（主机名之后的所有内容）

方法 - 应该是 GET 或 POST（在你的情况下是 GET）。

```
var options = {
    host: "local:8080";
    path: '/geoserver/wfs?service=WFS&version=1.0.0&request=GetFeature&typeName=layername&outputFormat=JSON&cql_filter=id=1',
    method: 'GET'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T16:49:25.863

我还尝试通过 Node.js 获取 GeoJSON 并采取了不同的方法；我使用了 Express 和[sequelizejs](http://docs.sequelizejs.com/en/latest/)。这使我可以直接从 Postgres / PostGIS 获取对象。我需要在客户端进行一些格式化，以从快速响应中形成有效的 GeoJSON。

# eclipse - Eclipse：“联系软件站点”期间发生内部错误

> ID：12862687
> 
> 赞同：4
> 
> 时间：2012-10-12T15:46:10.810
> 
> 标签：eclipse

我正在使用 Eclipse 靛蓝。每次我打开“安装新软件”时，都会弹出一个窗口

> “联系软件站点”遇到了问题。“联系软件站点”期间发生内部错误。

当我单击详细信息时，我收到以下消息

> 在“联系软件站点”期间发生内部错误。java.lang.NullPointerException

此错误使我无法安装任何软件。有谁知道问题？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T15:53:07.430

这发生在我前一段时间的日食中。

我所做的是我通过单击错误弹出窗口中的详细信息来扩展错误，记下导致错误的 url，并在 windows->preference->install/update->Available Software Sites 中删除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T04:33:13.583

从以下文件夹中删除缓存中的文件，然后从帮助 -> 安装新软件 -> [添加更新站点 URL] -> 等重新安装...

```
.eclipse\org.eclipse.oomph.p2\cache 
```

这个位置应该在你的用户目录中。对我来说是这样的：

```
C:\Users\rahmanmahbubur\.eclipse\org.eclipse.oomph.p2\cache 
```

# c# - 为什么我的 convert.todouble 会引发异常？

> ID：12862688
> 
> 赞同：-2
> 
> 时间：2012-10-12T15:46:11.077
> 
> 标签：c#, .net, user-interface, type-conversion

我创建了一个 GUI，它`ValueBox.Text`是字符串“randomstring”。我想做的是：

如果*只有*`ValueBox.Text`数字，如果它有字符 && 数字或只有字符，那么我认为从 MSDN 中 Convert.ToDouble(string) 将返回 0。这里不是这种情况。代码转到： *`double valueLenght = Convert.ToDouble(ValueBox.Text);`*

 *```
protected override void Dispose(bool disposing)
{
    if (disposing && (components != null))
    {
        components.Dispose();
    }

    base.Dispose(disposing);
} 
```

然后给出一个例外`mscorlib`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:47:52.140

[`Convert.ToDouble`](http://msdn.microsoft.com/en-us/library/zh1hkw6k.aspx)如果无法将字符串转换为数字，则抛出异常。

您可能想尝试一下[`Double.TryParse`](http://msdn.microsoft.com/en-us/library/3s27fasw.aspx)。`true`如果转换成功，则返回值，`false`否则。`out double`参数接收结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:51:19.573

转换假定您正在转换的对象*能够*被转换。如果不是，则抛出异常。`tryParse()`与您想要的对象类型一起使用：

```
string text = "asdsad";
double d;
if (!double.TryParse(text, out d))
{
     // Not a double
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:54:16.113

我希望您正在调试并发现在`Convert.ToDouble`异常之后，您的程序中唯一剩下的就是处理表单/资源。

正如其他人所建议的那样，您可能想要`Double.TryParse`使用它，因为现在您可以使用它的布尔输出来确定文本框是否包含（成功解析的）数字：

```
double myDouble;
if (Double.TryParse(textBox.Text, out myDouble))
{
    // Successful conversion
}
else
{
    // Conversion failed
} 
```

这比依赖`Convert`异常要好。如果你用它`try/catch`来确定某事的结果，它不仅速度较慢，而且被认为是不好的做法。*

# android - 当使用 putString 添加到 SharedPreferences 文件时，它是否重复？

> ID：12862689
> 
> 赞同：1
> 
> 时间：2012-10-12T15:46:12.970
> 
> 标签：android, sharedpreferences

每次我的应用程序启动时，我都会加载相同的基本共享首选项。

用户可以选择添加自己的条目，效果很好。

我想确保首选项文件不只是添加重复的负载，我假设如果它找到 EXACT 条目，它将跳过 putString 命令？

我一遍又一遍地测试了我的启动应用程序（我不使用 clear()），当我 getAll 没有重复时，这是一个有效的测试吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T21:43:24.920

首选项实现为 a `map`，因此当您将字符串放入首选项时，如果键已经存在，它将用新值覆盖旧值。

所以不，如果您一遍又一遍地在同一个键上调用 putString，您的首选项文件中不会有重复项。

# jquery - ExternalInterface as3 和 ajax (jQuery) 在 IE 中不起作用

> ID：12862695
> 
> 赞同：0
> 
> 时间：2012-10-12T15:46:54.320
> 
> 标签：jquery, ajax, actionscript-3, internet-explorer, externalinterface

这部分代码适用于所有浏览器，但不适用于 IE。你能帮我解决这个问题吗？

```
function getData(userId, instrumentId, minStep) {
    alert(1); // worked!
    console.log(userId, instrumentId, minStep);
    $.ajax({
        type: "POST",
        url: '/controllers/ajax.php',
        data: "instrument=" + instrumentId + '&user=' + userId,
        dataType: 'json',
        cache: false,
        success: function(msg) {
            alert(2); // doesn't work
            document.getElementById("chart").dataFromJS(msg, minStep); // "chart" - id of flash player object loaded using swfobject
        }
    })
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:17:21.383

我遇到了类似的问题，而且这真的很愚蠢，至少在我意识到这是什么之后。尽量不要在 IE 中使用 console.log ......也许会是一样的，祝你好运；）

# visual-studio-2010 - .NET Framework 文件夹中不同 EventLogMessages.dll 之间的区别

> ID：12862697
> 
> 赞同：2
> 
> 时间：2012-10-12T15:47:02.307
> 
> 标签：visual-studio-2010, logging, event-log

有两个 EventLogMessages.dll 文件，

1.  C:\Windows\Microsoft.NET\Framework\v4.0.30319\EventLogMessages.dll

2.  C:\Windows\Microsoft.NET\Framework\v2.0.50727\EventLogMessages.dll

这些文件不是 .NET 文件（它们不能用 ILDasm 反汇编）。这两个文件有什么区别？

我为 VS2010 使用了 2.0 版本的文件。这样做安全吗？

如果不是，我为什么要使用 4.0 版本呢？

-达特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T07:41:25.967

它们之间没有实际区别（版本信息除外）。两个 dll 都包含相同的消息表，它们是：

```
MESSAGETABLE
{
    0,      "%1"
    1,      "%1"
    2,      "%1"
    3,      "%1"
    4,      "%1"
   .............
    65535,  "%1"
} 
```

因此，IMO，由于 .Net 框架的不同版本，这些 dll 有两个不同的版本，如果您的应用程序是为`target framework .Net 4 or higher`（这只是我的假设）而构建的并且在您的应用程序中有记录到事件日志，`EventLogMessages.dll v.4.0.30319`将被使用。

# javascript - 在javascript中临时锁定绘图

> ID：12862699
> 
> 赞同：0
> 
> 时间：2012-10-12T15:47:10.733
> 
> 标签：javascript, jquery, canvas, drawing

每当调整浏览器大小时，我必须调用**javascript/jquery**来正确调整某些控件的大小。

我尽我所能优化它，但我也想知道我是否可以暂时冻结绘图直到我完成，即。

```
$(window).resize(function() {
    Canvas.Lock;
    try
       // Do my stuff...
    finally
            Canvas.unlock;
    end;
}); 
```

这可能吗？

PS。我想要的是暂时冻结 UI（禁用重绘），而不是在我的 js 代码忙时显示一些“请稍候......”模式对话框

# android - android：无法从我的应用程序运行 shell 脚本（.sh）

> ID：12862702
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:47:27.687
> 
> 标签：android, bash, shell

我无法从我的应用程序运行 shell 脚本。只有“ls -l”和 echo 命令响应。rest 似乎没有做任何事情。甚至“touch”命令都不起作用。我尝试使用我的 touch 命令在 sdcard 中创建一个文件脚本..只有 echo 命令有效。我的 shell 脚本也在 sdcard 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:30:50.170

sdcard 使用 noexec 安装。您必须将脚本复制到应用程序的本地数据驱动器才能执行。

您应该能够通过登录手机（adb shell 或其他任何东西）并键入来查看所有文件系统的安装权限`mount`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T11:04:01.493

其余的命令（如**“cd”**等）在 Android 中不起作用，因为它遇到了很多权限问题。

所以最好的解决方案是触发您的应用程序已经可用的**“脚本管理器”** 或**“终端模拟器”**应用程序。

# objective-c - 如何在操作期间更新 NSTextField 值？

> ID：12862704
> 
> 赞同：0
> 
> 时间：2012-10-12T15:47:40.473
> 
> 标签：objective-c, xcode, cocoa

我正在一个 Action 中运行一个冗长的任务，我想显示我在哪里。为此，我创建了一个文本字段并使用 setStringValue 进行了尝试：

```
[textField setStingValue: [NSSting stringWithFormat:@"%ld",currentValue]] 
```

该代码有效，但不幸的是，它不是在每次迭代后更新 NSTextField，而是在整个操作完成时更新。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:52:03.150

这是因为具有 Cocoa 框架的应用程序使用事件循环来执行操作，并且事件以完全串行的方式发生。

事件基本上是框架设计者无法预测或发现以延迟方式运行的任何类型的操作。由于您无法预测何时会执行点击，因此需要将它们视为事件；并且出于效率原因（因为如果不需要，您不想多次重绘组件），重绘操作也是事件。

您的操作响应用户事件（例如，单击按钮是一个事件）而运行，因此会阻止队列中等待的所有其他事件，直到它完成。但是，组件会重新绘制以响应不同的框架触发事件，因此文本字段必须等到您的操作完成才能重新绘制自身。这就是为什么您无法从操作内部直观地更改文本字段的值的原因。

为了通知您的用户您的任务的进度，您需要在不同的线程上运行它。关于线程*有很多话*要说，所以你可能应该阅读一些关于它们的内容。我也确信有很多示例说明如何在后台线程中运行长操作并相应地为整个 Internet 上的 Cocoa 更新 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:37:05.737

当您单击一个 UI 组件并进入 Action 块时，代码将在主线程上运行，即绘制 UI 的同一线程。如果您在该块中运行长时间运行的操作，则在您完成之前它不会绘制，因为它正忙于做您正在做的任何事情 - 您已经劫持了绘制线程。

正如其他地方所说，您需要生成另一个线程，然后让新线程执行长时间运行的操作，并偶尔发送消息让主线程更新 UI。

下一步，请阅读有关[NSThread](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)的 Apple 文档，特别是：

```
+ (void)detachNewThreadSelector:(SEL)aSelector toTarget:(id)aTarget withObject:(id)anArgument 
```

请注意，线程是一个不平凡的领域，如果您不小心，请为一些奇怪的行为做好准备。

# java - 在源代码中传输文件的正确方法

> ID：12862710
> 
> 赞同：0
> 
> 时间：2012-10-12T15:48:03.450
> 
> 标签：java, android

我需要在源代码中传输几个文件。可怕，我知道，但我别无选择。到目前为止，我只存储图像，所以我这样做：

编码图像：

```
Bitmap bm = BitmapFactory.decodeFile(imagePath);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bm.compress(CompressFormat.PNG, 100, baos);
byte[] b = baos.toByteArray();
String encodedimage = Base64.encodeToString(b, Base64.DEFAULT); 
```

解码图像：

```
public static Bitmap decodeBitmap(imageString) {
        return BitmapFactory.decodeStream(new ByteArrayInputStream(Base64.decode(imageString, Base64.DEFAULT)));
    } 
```

我使用 base64 以便将新图像放入程序中更容易，因为它只是一个简单的字符串。

现在我正在尝试将功能扩展到任何文件格式，因此我寻求指导以找出在代码中存储文件的方式是否更糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:27:29.923

如果你想保留一些数据文件，你可以将它们保存在 Assets 文件夹中，你可以使用 AssetManager 来获取这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:50:14.833

对于图像，您应该使用资源文件夹。为此，它已内置于系统中。对于一般的最终结果，您应该使用资产文件夹并访问，就像这个 stackoverflow 问题所示：[如何从资产文件中获取 URI？](https://stackoverflow.com/questions/4820816/how-to-get-uri-from-an-asset-file)

# razor - 我可以使用哪个包和版本在 umbraco 4.7 中创建联系表

> ID：12862719
> 
> 赞同：0
> 
> 时间：2012-10-12T15:48:28.797
> 
> 标签：razor

我是 umbraco 的新手，但我正在做一个网站并且轮廓有问题，因为我的 umbraco 是旧版本并且不想更改。有人知道 umbraco 中的任何免费套餐可以帮助我，并且可以通过联系我们表格发送电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:43:18.013

您可以自己创建它。这很简单。一些文本框，就是这样。

如果你想让它们看起来很棒，有很多 jquery 插件，即：[http ://uniformjs.com/](http://uniformjs.com/)

# matlab - 获取矩阵中的前两个最大值

> ID：12862723
> 
> 赞同：2
> 
> 时间：2012-10-12T15:48:45.597
> 
> 标签：matlab, matrix, max

我有一个矩阵（nxm）。而且我想知道，对于每一行，包含前两个最大值的列的索引：

```
2 3 4 2
2 4 7 1
1 1 2 4
5 5 9 6
1 4 2 1
9 8 1 2 
```

答案应该是：

```
2 3
2 3
3 4
3 4
2 3
1 2 
```

如何使用 matlab 命令获取它？我不想使用 for 循环。我试过：

```
[x,y]=max(matrix')
y=y'; 
```

y 给我最大元素的列索引。现在我将这些元素设置为零并重复说明，但我不知道该怎么做。我颤抖着：

```
matrix(:,y)=0; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T16:03:52.073

如果 A 是您的矩阵，则排序并选择前两个索引，

```
 [a ix]=sort(A,2)
 ans= ix(:,end-1:end) 
```

# virtualbox - 如何通过 RDP 访问在 OSX 上运行的 VirtualBox

> ID：12862725
> 
> 赞同：2
> 
> 时间：2012-10-12T15:49:02.530
> 
> 标签：virtualbox

于是，我看了三遍手册，两次安装了Oracle服务包，尝试了数十次访问五台不同的虚拟机，各种身份验证，关注了这个论坛上的每个帖子，都没有成功。我真的做了我所知道的一切。但是在 4.1.23 版本中，无论操作系统如何都无法访问 Virtualbox。有两件事看起来真的很糟糕：

1.  该手册从未说明在 OSX 上安装了 VBoxManager 命令行工具的位置。但是手册引用了它几十次。在我使用的任何 shell 中，它都没有搜索路径。以 root 身份执行 find / -name "VBoxManager" 表明在任何地方都没有这样的工具。拜托，有人可以让我知道该怎么做才能真正做到手册中关于命令行的内容吗？从哪里得到那个工具？

2.  我仍然想了解如何使用远程屏幕访问 virtualbox 安装。这是我尝试过的；作为客户：

3.  苹果远程桌面找不到服务器
4.  Finder 中的 Apple VNC 协议无法找到服务器
5.  VNCViewer（尽管这不太可能像选项 2 那样适用于 RDP）无法找到服务器
6.  Microsoft Remotedesktop（应该可以）。验证失败，点击连接按钮后立即得到验证失败的响应，不管
    *   身份验证方式，例如 NULL、External
    *   网络接口（桥接、NAT）
    *   IP地址（虚拟机获取的那个，localhost，我自己主机的ip地址）
    *   端口（尝试了不同的端口，没有一个被占用）
    *   虚拟操作系统（Windows 7、Windows XP、CentOS 6.3、ClearOS、回溯 5）

请问，有人可以帮忙吗？

# jquery - 从在元素事件中调用的函数中获取元素

> ID：12862727
> 
> 赞同：2
> 
> 时间：2012-10-12T15:49:13.153
> 
> 标签：jquery

假设我有以下...

```
jQuery('#a').click(function(){
   myFunction();
});
function myFunction(){
  var me = jQuery(this);// this one gets the "window" object instead of "#a" element
} 
```

`myFuncton`当我**无法**作为参数发送时，如何获取启动事件的目标元素，`this`因为它会让我返回并重新检查整个站点并更改每个函数调用参数......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:51:27.343

所以你可以这样做：

```
$('#a').click(myFunction); // then this in myFunction will be the '#a' element. 
```

***更新**：*

如果您需要在回调中执行除 myFunction 之外的其他操作，那么您可以尝试`.call()`或`.apply()`执行具有给定**this 值**的函数。

```
$('#a').click(function() {
    otherLogic();
    myFunction.call(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:54:57.950

试试这个

```
jQuery('#a').click(function(){
   myFunction(this);
});

function myFunction(elem){
  var me = jQuery(elem);
} 
```

当您从 click 事件传递它时，您将获得在 elem 中调用该函数的当前对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:09:51.043

```
jQuery('#a').click(function(){
   myFunction(this);
});
function myFunction(sender){
  if (sender !=undefined)
   {
      var me = jQuery(sender);// and do other stuff
      //.....
   }
   //do your old stuff -- me will be logically out of scope
}
//this will not result in an error, sender will be undefined
// the code will be compatible backwards
myfunction(); 
```

# encode - 您如何创建在线音频转换网站？

> ID：12862729
> 
> 赞同：1
> 
> 时间：2012-10-12T15:49:15.410
> 
> 标签：encode, backend, frontend

我的问题并不特定于标题本身。我无法在标题中清楚地表达我想做什么，所以这是对想法的概括。

我想运行一个从用户那里收集数据的网站。说，像音频文件，例如*Hello.mp3*。

我想通过使用 PC 上的软件将这个 Mp3 文件转换为 Wav，如 Any Audio 转换器，转换后，我希望将其上传回网络服务器，以便在前端用户可以轻松下载歌曲.

好吧，我的目的与我想说的有点不同。在学校我们有一些天文软件，我们的教授说它们是我们学校专有的。我希望其他用户以 Excel 文件的形式上传他们的数据，我们的 Astro 软件可以在后端转换并处理信息，然后再次将处理后的信息上传给 Web 用户。

这怎么可能？我需要学习什么？

也让我知道此类编程任务的技术先决条件。

# c++ - 影响原语大小、范围和二进制文件在不同平台上运行的因素

> ID：12862732
> 
> 赞同：2
> 
> 时间：2012-10-12T15:49:20.513
> 
> 标签：c++, compiler-construction, operating-system, primitive

> **可能重复：**
> [int 的大小是否取决于编译器和/或处理器？](https://stackoverflow.com/questions/2331751/does-the-size-of-an-int-depend-on-the-compiler-and-or-processor)

我正在使用`64 bit`操作系统*（Windows 7）*并使用`Dev C++`编译器*（32 位）*。我也使用`Microsoft Visual C++` *(32 位)*。

我对基元的大小感到困惑。*（int、char、short 等）* 请解决我的几个问题：

• 这些数据类型的大小取决于什么？我听说大小因处理器、操作系统、编译器的种类而异。是这样吗 ？如果是，请解释它们有何不同。

• 如果我使用 64 位操作系统和 32 位编译器，生成的二进制文件将兼容 32 位操作系统和 64 位操作系统吗？请妥善解决这个问题，并给出清晰准确的答案。

• 影响在特定平台上生成的二进制文件的因素是什么？

• 假设在 32 位 Linux 上使用 32 位编译器生成二进制文件，在 32 位 Windows 上会有什么不同吗？

• 数据类型的范围是如何`int`定义的？它取决于哪些因素？早些时候我读到它是`32767`但在使用 Microsoft Visual C++ 时它大于`32767`. 范围完全取决于编译器还是还取决于操作系统或它是什么类型的处理器？

• 有一个程序：

```
#include<iostream.h>

using namespace std;

int main() {
 int x;
 cout<<sizeof(x);
} 
```

在 32 位 windows 上使用 Microsoft Visual C++ 2010 (32 bit) 时，它会打印`4`为答案。如果我在 64 位平台上运行，这个结果会有所不同吗？无论如何，请给出适当的理由和答案。

# c++ - 前缀/后缀增量

> ID：12862733
> 
> 赞同：0
> 
> 时间：2012-10-12T15:49:22.030
> 
> 标签：c++, c

> **可能重复：**
> [后增量和前增量概念？](https://stackoverflow.com/questions/4445706/post-increment-and-pre-increment-concept)

任何人都可以明确解释前缀增量与后缀增量有何不同？

也有人可以解释为什么这个输出6？

```
i=1;
cout << ++i + ++i; 
```

还有为什么这给出了 4

```
i = 1;
cout << ++i + i++; 
```

以及为什么这会产生真实的

```
i = 0;
cout << (i++ || i++) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:51:44.647

前缀`++i`和后缀`i++`运算符会影响语句的计算顺序。使用前缀`++i`， 的值`i`增加，这就是使用的。但是使用 suffix`i++`后，使用 的原始值`i`，然后对该行之后的任何内容递增。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T15:54:38.917

1) 很明显，“++i”首先增加变量，然后“i++”增加。

2）不太明显，将中缀递增/递减与同一变量上的其他操作混合的复杂表达式可能会引入*未定义的行为*：

*   [http://en.wikipedia.org/wiki/Sequence_point](http://en.wikipedia.org/wiki/Sequence_point)

我同意：线程[后增量和前增量概念？](https://stackoverflow.com/questions/4445706/post-increment-and-pre-increment-concept)解决了这个问题。

# ruby-on-rails - 在运行 Rails 时将参数传递给 Ruby

> ID：12862734
> 
> 赞同：0
> 
> 时间：2012-10-12T15:49:22.233
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我运行`rails server`, `rails console`,`rails runner`等时，我想将一些命令行开关传递给 Ruby 二进制文件。（在我的例子中，它是 JRuby，我想确保 Java 以更多内存启动，但这个问题似乎适用于任何 Ruby 实现。）令人惊讶的是，我找不到任何关于此的文档。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:51:42.420

使用`JRUBY_OPTS`环境变量，如

```
JRUBY_OPTS="-J-Xmn512m" rails server 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:02:29.813

试试这个：

```
 jruby --args -S rails ... 
```

# ajax - 保留未由 ajax 请求处理的输入字段的值

> ID：12862736
> 
> 赞同：2
> 
> 时间：2012-10-12T15:49:31.697
> 
> 标签：ajax, jsf, jsf-2, input-field, preserve

我有一个包含两列表格的表格。每行都有一个复选框和一个输入字段。复选框用于删除特定行，而输入字段用于（大量）编辑值。每个输入字段都使用 bean 验证。此外，我有两个按钮：一个用于“删除”，一个用于“保存”。一切都基于primefaces。

```
<h:form>
    <p:dataTable value="#{backingBean.list}" var="entry" id="table">
        <p:column>
            <p:selectBooleanCheckbox value="#{entry.flagDelete}" />
        </p:column>

        <p:column>
            <p:inputText value="#{entry.value}" />
        </p:column>
    </p:dataTable>

    <p:commandButton value="save" actionListener="#{backingBean.save}" process="table @this" update="table" />

    <p:commandButton value="delete" actionListener="#{backingBean.delete}" process="@([type=checkbox]) @this" update="table" />
</h:form> 
```

（在 JSF 2 中，“process”等于“execute”，“update”等于“render”）

现在应该可以在不验证输入字段的情况下删除选定的行。因此，我使用了 primfaces ajax 选择器（基于 jQuery 选择器 API）来仅选择应在 ajax 请求期间处理的复选框。输入字段的值仍会发送到服务器，但不会被处理。

问题是在 ajax 请求之后重新渲染表。我希望输入字段保留在单击删除按钮之前输入的值（以防用户没有使用保存按钮保存更改）。由于这些值被发送到服务器，这应该不是什么大问题（例如，当验证失败时，我也会得到最后输入的值）。但实际上我得到了存储在支持 bean 中的值。有没有关于如何实现这一目标的选项/解决方案？

# c++ - 将字符串转换为 char*

> ID：12862739
> 
> 赞同：17
> 
> 时间：2012-10-12T15:49:50.703
> 
> 标签：c++, string

> **可能重复：**
> [将 std::string 转换为 const char* 或 char*](https://stackoverflow.com/questions/347949/convert-stdstring-to-const-char-or-char)

可能缺少一个 & 或类似的东西（我是 cpp 的菜鸟）。

我有

```
string R = "somthing";
char*  S; 
```

我将如何复制`R`到`S`

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-12T16:03:08.487

有很多方法。这里至少有五个：

```
/*
 * An example of converting std::string to (const)char* using five
 * different methods. Error checking is emitted for simplicity.
 *
 * Compile and run example (using gcc on Unix-like systems):
 *
 *  $ g++ -Wall -pedantic -o test ./test.cpp
 *  $ ./test
 *  Original string (0x7fe3294039f8): hello
 *  s1 (0x7fe3294039f8): hello
 *  s2 (0x7fff5dce3a10): hello
 *  s3 (0x7fe3294000e0): hello
 *  s4 (0x7fe329403a00): hello
 *  s5 (0x7fe329403a10): hello
 */

#include <alloca.h>
#include <string>
#include <cstring>

int main()
{
    std::string s0;
    const char *s1;
    char *s2;
    char *s3;
    char *s4;
    char *s5;

    // This is the initial C++ string.
    s0 = "hello";

    // Method #1: Just use "c_str()" method to obtain a pointer to a
    // null-terminated C string stored in std::string object.
    // Be careful though because when `s0` goes out of scope, s1 points
    // to a non-valid memory.
    s1 = s0.c_str();

    // Method #2: Allocate memory on stack and copy the contents of the
    // original string. Keep in mind that once a current function returns,
    // the memory is invalidated.
    s2 = (char *)alloca(s0.size() + 1);
    memcpy(s2, s0.c_str(), s0.size() + 1);

    // Method #3: Allocate memory dynamically and copy the content of the
    // original string. The memory will be valid until you explicitly
    // release it using "free". Forgetting to release it results in memory
    // leak.
    s3 = (char *)malloc(s0.size() + 1);
    memcpy(s3, s0.c_str(), s0.size() + 1);

    // Method #4: Same as method #3, but using C++ new/delete operators.
    s4 = new char[s0.size() + 1];
    memcpy(s4, s0.c_str(), s0.size() + 1);

    // Method #5: Same as 3 but a bit less efficient..
    s5 = strdup(s0.c_str());

    // Print those strings.
    printf("Original string (%p): %s\n", s0.c_str(), s0.c_str());
    printf("s1 (%p): %s\n", s1, s1);
    printf("s2 (%p): %s\n", s2, s2);
    printf("s3 (%p): %s\n", s3, s3);
    printf("s4 (%p): %s\n", s4, s4);
    printf("s5 (%p): %s\n", s5, s5);

    // Release memory...
    free(s3);
    delete [] s4;
    free(s5);
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-12T15:51:49.140

首先，您必须分配内存：

```
char * S = new char[R.length() + 1]; 
```

然后你可以[`strcpy`](http://en.cppreference.com/w/cpp/string/byte/strcpy)使用`S`and `R.c_str()`：

```
std::strcpy(S,R.c_str()); 
```

`R.c_str()`如果字符串未更改或 c 字符串仅使用一次，您也可以使用。但是，如果`S`要修改，您应该复制字符串，因为写入会[`R.c_str()`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)导致未定义的行为。

注意：`strcpy`您也可以使用`str::copy`.

# php - php字符串编码和web服务

> ID：12862742
> 
> 赞同：2
> 
> 时间：2012-10-12T15:50:02.227
> 
> 标签：php, mysql, string, character-encoding

我正在尝试管理带有重音符号的 PHP 字符串，但没有成功。（对不起我糟糕的英语）。好吧，我从 MySQL 表中读取了一个字符串：

```
$array_select[$i]['TestoDomanda'] = htmlspecialchars_decode( htmlentities( trim($array_select[$i]['TestoDomanda']), ENT_COMPAT, "UTF-8" ) ); 
```

该表具有 utf8 - 默认排序规则，这是建立连接的方式：

```
 try {
                    self::$conn = new PDO(
                                $string_dsn, 
                                $user, 
                                $password,
                                array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")     // configuring mysql connection
                    ); 
            } 
```

在我的 HTML 页面的标题中

```
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"> 
```

浏览器中的可视化是可以的。我正在使用 eclipse，似乎我的 .php 文件是使用 utf-8 保存的。

我将此字符串发送到在线 Web 服务，创建一个 http 请求并接收一个 JSON 对象：

```
//$_testoDomanda is "Qual era il vero nome del comico Totò?"    
$testoDomanda = **urlencode**( $_testoDomanda);  // problem: ò become someting like %26ograve%3B%3F and the web service ignores the last word (tot%26ograve%3B%3F)
// I will prefere to have **"toto"** instead of **"totò"** for correct encoding

$json = new Services_JSON(); 
$request = "http://176\. (.. *omissis*..) =1&q=".$testoDomanda;
$arrayResponse = file($request);
            (...) 
```

如果字符串包含重音符号，则忽略重音符号。所以如果 $testoDomanda 是“Qual era il vero nome del comico Totò?” 服务器将收到“Qual era il vero nome del comico” 我已经尝试了很多技巧来解决这个问题，但我认为我遇到了一些编码问题，因为 var_dump($testoDomanda) 返回了错误的长度 (45)。这些是我所做的一些尝试：

```
$testoDomanda = urlencode(htmlspecialchars_decode(htmlentities($_testoDomanda) ));  // Qual+era+il+vero+nome+del+comico+Tot%26ograve%3B%3F
$testoDomanda = urlencode(htmlentities($_testoDomanda, ENT_COMPAT, "UTF-8"));           // Qual+era+il+vero+nome+del+comico+Tot%26amp%3Bograve%3B%3F
$testoDomanda = urlencode(htmlentities($_testoDomanda,1));                          // Qual+era+il+vero+nome+del+comico+Tot%26amp%3Bograve%3B%3F 
```

我也尝试用“o”替换像“ò”这样的字符（搜索“Toto”会起作用）但是preg_replace（）和str_replace（）在我的变量中找到了“ò”。编辑：我使用这个函数（例如）替换尖音：

```
function replace_accents($stringa) {
        $stringa=preg_replace("/è/","e",$stringa);
        $stringa=preg_replace("/é/","e",$stringa);
        $stringa=preg_replace("/ò/","o",$stringa);
        $stringa=preg_replace("/à/","a",$stringa);
        $stringa=preg_replace("/ì/","i",$stringa);
        return $stringa;
    } 
```

为什么这个？最后一个问题是如何使用重音来修复以奇怪模式（var_dump、str_replace、preg_replace 不能作为方面工作）的字符串，或者如何用非重音对应物替换重音字符。请帮助我，我不知道如何解决这个问题...谢谢

# java - Java - 使用 InternetAddress 验证电子邮件

> ID：12862747
> 
> 赞同：1
> 
> 时间：2012-10-12T15:50:19.637
> 
> 标签：java, validation, email

我得到了这个方法：

```
public static boolean isValidEmailAddress(String email) {
       boolean result = true;
       try {
          InternetAddress emailAddr = new InternetAddress(email);
          emailAddr.validate();
       } catch (AddressException ex) {
          result = false;
       }
       return result;
} 
```

但这给了我这个例外：

> java.lang.NullPointerException 在 javax.mail.internet.AddressParser.tokenizeAddress(AddressParser.java:645) 在 javax.mail.internet.AddressParser.parseAddress(AddressParser.java:113) 在 javax.mail.internet.InternetAddress.(InternetAddress .java:70) 在控制器的 javax.mail.internet.InternetAddress.(InternetAddress.java:61).CtrlUser.isValidEmailAddress(CtrlUser.java:166) 在控制器.CtrlSeller.register(CtrlSeller.java:41) 在 testController。 CtrlSellerUnitTestCase.testRegister(CtrlSellerUnitTestCase.java:41) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java: 25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) 在 org.junit.runners 的 org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)。 model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores. java:28) 在 org.junit.runners.RunAfters.evaluate(RunAfters.java:30) 在 org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263) 在 org.junit.runners.BlockJUnit4ClassRunner .runChild(BlockJUnit4ClassRunner.java:68) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231) 在 org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60) 在 org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229) ....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T15:54:32.913

它对我有用——检查你是否真的传递了一个有效的字符串。看来您正在发送 null 作为您的电子邮件参数

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T15:55:48.083

确保您传递的电子邮件参数不为空

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-27T07:51:47.607

试试下面的代码：

```
java.net.IDN.toASCII    

public static boolean isValidEmail(String email) {
    boolean result = true;
    try {
        InternetAddress emailAddr = new InternetAddress(java.net.IDN.toASCII(email));
        emailAddr.validate();
    } catch (AddressException ex) {
        result = false;
    }
    System.out.println("==> "+result+" : "+email);
    return result;
} 
```

# linux - Linux Kernel Procfs 多读/写

> ID：12862752
> 
> 赞同：1
> 
> 时间：2012-10-12T15:50:36.487
> 
> 标签：linux, linux-kernel, procfs

Linux 内核如何处理对 procfs 的多次读取/写入？例如，如果两个进程同时写入 procfs，是一个进程排队（即内核陷阱实际上阻塞了其中一个进程），还是每个内核都有一个内核线程在运行？

问题是如果您在函数中使用了缓冲区（对于全局空间来说是静态的），您是否必须保护它或者代码是否会按顺序运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-20T20:16:02.293

这取决于每个 procfs 文件的实现。甚至没有人能给你一个明确的答案，因为每个驱动程序都可以实现自己的 procfs 文件夹和文件（你没有指定任何特定的文件。在[http://lxr.free-electrons.com/source/fs/proc中快速浏览/](http://lxr.free-electrons.com/source/fs/proc/)表明某些文件确实使用了锁）。

无论哪种方式，您都不能使用全局缓冲区，因为总是会发生上下文切换，如果不在内核中，那么它可以在完成读取系统调用之后和开始处理读取数据之前立即捕获您的读取器线程。

# r - 需要逐行重新组织数据以对每一行执行计算

> ID：12862755
> 
> 赞同：1
> 
> 时间：2012-10-12T15:50:44.613
> 
> 标签：r

我的原始数据框是这样的：x

```
Team  Date   variable  value
A 2012-07-01 Score      13
A 2012-07-02 Score      12
A 2012-07-03 Score      2097
A 2012-07-04 Score      45
A 2012-07-05 Score      41
A 2012-07-06 Score      763 
```

需要这样

```
z
    Team 2012-07-01 2012-07-02 2012-07-03 2012-07-04 2012-07-05 2012-07-06 
    A     13         12          2097      45        41         763

library(reshape)
z<-cast(x, Team + variable ~ Date) 
```

我收到一条警告消息，说明：

> 聚合需要 fun.aggregate：默认使用的长度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:55:20.430

使用`dcast`reshape2 包，它会工作！

```
x <- read.table(text='Team  Date   variable  value
A 2012-07-01 Score      13
A 2012-07-02 Score      12
A 2012-07-03 Score      2097
A 2012-07-04 Score      45
A 2012-07-05 Score      41
A 2012-07-06 Score      763', header=T)

library(reshape2)
dcast(x, Team + variable ~ Date)
 Team variable 2012-07-01 2012-07-02 2012-07-03 2012-07-04 2012-07-05 2012-07-06
1    A    Score         13         12       2097         45         41        763 
```

## 编辑：

您可以使用`reshape`统计数据中的函数。如上所述，不需要额外的包。

```
Y <- reshape(x, v.names='value', idvar='Team', timevar='Date',direction='wide')
names(Y) <- sub('value.', '', names(Y))
Y
  Team variable 2012-07-01 2012-07-02 2012-07-03 2012-07-04 2012-07-05 2012-07-06
1    A    Score         13         12       2097         45         41        763 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:04:56.927

无需特殊包装：

```
xtabs(value ~ Team + Date, x)
#     Date
# Team 2012-07-01 2012-07-02 2012-07-03 2012-07-04 2012-07-05 2012-07-06
#    A         13         12       2097         45         41        763
as.data.frame.matrix(xtabs(value ~ Team + Date, x))
#   2012-07-01 2012-07-02 2012-07-03 2012-07-04 2012-07-05 2012-07-06
# A         13         12       2097         45         41        763 
```

# ruby-on-rails - Rails：使用 :conditions hash 处理未决/已接受邀请时遇到问题

> ID：12862758
> 
> 赞同：1
> 
> 时间：2012-10-12T15:50:50.360
> 
> 标签：ruby-on-rails

我目前正在尝试制作一个用于上传图片的应用程序。有用户、相册、图片。问题是每个相册可以有多个所有者，因此在创建相册的表单中有一个复选框部分，您可以在其中突出显示您的朋友姓名并“邀请他们”成为所有者。但是，我正在努力做到这一点，以便在共享所有权之前必须“接受”邀请。我正在尝试使用连接表 ( `album_user`) 并使用`album`and来执行此操作`pending_album`，它们`:status`在创建时以它们为特征

这是我的

Albums/new.html.erb（这里没有问题）

```
<%= form_for ([@user, @album]), :html => { :id => "uploadform" } do |f| %>
<div class="formholder">
    <%= f.label :name %>
    <%= f.text_field :name %>

    <br>
    <label>Hosts</label>
    <% @user.friends.each do |friend| %>
    <%= friend.name %>
    <%= check_box_tag 'album[user_ids][]', friend.id, @album.users.include?(friend) %>
    <% end %>

    <%= f.label :description %>
    <%= f.text_area :description %>

    <br>

    <%=f.submit %>
</div>
<% end %> 
```

专辑控制器（此处有状态问题）

```
def create
  @user = User.find(params[:user_id])
  @album = @user.albums.build(params[:album].merge(:status => 'accepted'))
  @friends = @user.friends.find(params[:album][:user_ids])
  if @user.save
    for friend in @friends
      AlbumUser.create({:user_id => friend.id, :album_id => @album.id, :status => 'pending'})
      # friend.albums.build(params[:album].merge(:status => 'pending'))
    end
    redirect_to user_album_path(@user, @album), notice: 'Album was successfully created.'
  else
    render action: "new"
  end
end 
```

用户模型

```
class User < ActiveRecord::Base

has_secure_password
attr_accessible :email, :name, :password, :password_confirmation, :profilepic
validates_presence_of :password, :on => :create

validates_format_of :name, :with => /[A-Za-z]+/, :on => :create
validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create
validates_length_of :password, :minimum => 5, :on => :create
# validates :album, :uniqueness => true

has_many :album_users
has_many :albums, :through => :album_users, :conditions => {status: 'accepted'}
has_many :pending_albums, :through => :album_users, :source => :album, :conditions => {status: 'pending'}
accepts_nested_attributes_for :albums

has_many :friendships, :dependent => :destroy
has_many :friends, :through => :friendships, :conditions => "status = 'accepted'"
has_many :requested_friends, :through => :friendships, :source => :friend, :conditions => "status = 'requested'", :order => :created_at
has_many :pending_friends, :through => :friendships, :source => :friend, :conditions => "status = 'pending'", :order => :created_at

has_attached_file :profilepic

before_save { |user| user.email = email.downcase }

def name_with_initial
  "#{name}"
end

private

  def create_remember_token
    self.remember_token = SecureRandom.urlsafe_base64
  end 
```

结尾

专辑模特

```
class Album < ActiveRecord::Base
  attr_accessible :name, :description, :user_ids, :status
  validates_presence_of :name

  has_many :album_users
  has_many :users, :through => :album_users
  has_many :photos

end 
```

相册_用户模型

```
class AlbumUser < ActiveRecord::Base
  attr_accessible :album_id, :user_id, :status
  belongs_to :album
  belongs_to :user
end 
```

在这里发布：users/show.html.erb（我在每个专辑都有一个图标，但似乎在创建专辑时，`pending_album`即使它们的 :status 是“待定”，它们也不会保存为 s。

```
 <% @user.pending_albums.each do |pending_album| %>
        <div class="albumthumb">
            <%= link_to image_tag(pending_album.photos ? pending_album.photos.first.avatar.url(:medium) : ("questionmark.png"), :size => "150x150"), user_album_path(@user, pending_album) %>
            <br>
            <%= pending_album.name %>
            <% if signed_in? %>
            <%= form_for(:album_user, :url => user_albums_path(:user_id => current_user.id, :album_id => pending_album.id)) do |f| %>
            <%= f.submit "Accept Invitation" %>
            <% end %>
            <% end %>
        </div>
    <% end %>
    <% @user.albums.each do |album| %>
        <div class="albumthumb">
            <%= link_to image_tag(!album.photos.empty? ? album.photos.first.avatar.url(:medium) : ("questionmark.png"), :size => "150x150"), user_album_path(@user, album) %>
            <br>
            <%= album.name %>
        </div>
    <% end %> 
```

我的问题是专辑没有保存为pending_albums。我认为用户模型中的 :conditions 将有助于区分哪些是专辑，哪些是待处理的专辑？一切似乎都属于专辑，即使它们应该是待处理的。任何人都可以帮忙吗？

# php - 如何修复简单派？无法打开流：没有这样的文件或目录

> ID：12862759
> 
> 赞同：2
> 
> 时间：2012-10-12T15:50:50.480
> 
> 标签：php, rss, atom-feed, simplepie

我正在尝试使用 simplepie 从远程 wordpress 站点中提取一些帖子。我已经安装了库并将我认为正确的代码放在 .php 页面的顶部。

现在我看起来像：

```
<?php
require_once('../autoloader.php');

$feed = new SimplePie();

$feed->set_feed_url('http://simplepie.org/blog/feed/');

$feed->enable_cache(true); 
$feed->set_cache_location('cache'); 
$feed->set_cache_duration(1800);

$feed->init();

$feed->handle_content_type();

?>    {doc type} 
```

但是当我加载我的页面时，它告诉我：

> 警告：require_once(../autoloader.php) [function.require-once]：无法打开流：第 2 行的 /home/content/27/9279927/html/LatestHOPE.php 中没有这样的文件或目录
> 
> 致命错误：require_once() [function.require]：无法在 /home/content/27/9279927 中打开所需的 '../autoloader.php' (include_path='.:/usr/local/php5_3/lib/php') /html/LatestHOPE.php 在第 2 行

那是怎么回事？为什么要告诉我这个？我的根目录中有 autoloader.php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:53:27.753

你有它在你的*根目录*！？那是一个奇怪的位置。但是，如果这是真的，请使用

```
require_once('/autoloader.php'); 
```

也许您的意思是在您的主目录中？对于那个用途

```
require_once('/home/<your username>/autoloader.php'); 
```

# c# - 如何在gridview的列中添加不同的时间并在页脚文本框中显示总和

> ID：12862765
> 
> 赞同：0
> 
> 时间：2012-10-12T15:51:11.233
> 
> 标签：c#, asp.net

我在gridview的列（日期时间）中有一些值（08：12,09：22,01：09）
我想要的是在页脚中的文本框中获取该列中存在的所有值的总和那一栏的。

我尝试了下面的代码 -

```
 int hours, minutes;
    TextBox footxt = (TextBox)GridView2.FooterRow.FindControl("footxt1");
    foreach (GridViewRow row in GridView2.Rows)
    {
        TextBox txts = (TextBox)row.FindControl("text11");

        TimeSpan ts = TimeSpan.Parse(txts.Text);
        hours = ts.Hours;
         minutes = ts.Minutes;
        hours += hours;
        minutes += minutes;
     footxt.Text = Convert.ToString(hours);
     } 
```

但它不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:53:46.973

你可以搭配 -`hours and hoursCpt`

```
 ... 
    hours = ts.Hours;
    minutes = ts.Minutes;
    hoursCpt += hours; 
```

所以

```
int hours, minutes, hoursCpt, minutesCpt;
hoursCpt = 0;
minutesCpt = 0;

TextBox footxt = (TextBox)GridView2.FooterRow.FindControl("footxt1");
foreach (GridViewRow row in GridView2.Rows)
{
    TextBox txts = (TextBox)row.FindControl("text11");

    TimeSpan ts = TimeSpan.Parse(txts.Text);
    hours = ts.Hours;
    minutes = ts.Minutes;

    hoursCpt += hours;
    minutesCpt  += minutes;
 }
 footxt.Text = Convert.ToString(hoursCpt + ((minutesCpt  - minutesCpt  % 60) / 60)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:55:54.017

现在，您`hours`每次循环时都会覆盖，因此您将添加它，但当您返回下一个值时将其清除。

```
int totHours, totMinutes
TextBox footTxt = (TextBox)GridView2.FooterRow.FindControl("footxt1");

foreach (GridViewRow row in GridView2.Rows)
{
    TextBox txts = (TextBox)row.FindControl("text11");
    TimeSpan ts = TimeSpan.Parse(txts.Text);

    totHours += ts.Hours;
    totMinutes += ts.Minutes;

}
footTxt.Text = totHours.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:00:34.367

使用 TimeSpan 的`operator +`：

```
TimeSpan total = new TimeSpan();
TextBox footxt = (TextBox)GridView2.FooterRow.FindControl("footxt1");
foreach (GridViewRow row in GridView2.Rows)
{
    TextBox txts = (TextBox)row.FindControl("text11");
    total += TimeSpan.Parse(txts.Text);
}
footxt.Text = Convert.ToString(hours); 
```

# html - 仅 Chrome 的表单标签错误

> ID：12862766
> 
> 赞同：2
> 
> 时间：2012-10-12T15:51:13.753
> 
> 标签：html, css, forms, google-chrome, position

我的页面与 IE 7 8 9、Firefox、Safari 和 Opera 完美配合。但是当我用 Chrome 打开它时，它`DIV`的`form`位置并不总是很好。如果我删除表单标签，问题就会消失。我没有浮动，只有这部分代码是绝对的。显然，问题来自于`form`，而且只有 Chrome。

CSS代码：

```
#fond-diapo{background:url('../images/pattern2.gif');height:420px}
    #diapo-center{width:920px;margin:0 auto 0}
    /* Contactez nous */
    #contact-home{position:absolute;margin-left:600px;width:258px;height:421px;background:url('../images/contactez-nous-fond.png') no-repeat;}
    #contact-home h3{color:#c37ed5;padding:100px 0 0 75px}
    .form2{margin:26px 0 0 34px;height:406px}

    #contact-home p{width:192px;padding:8px 0 0 0}
    #contact-home  input[type=text]{padding:0 6px 0 12px;width:192px;height:29px;background:url('../images/fond-input.png') no-repeat;color:white}
    #contact-home select {border:1px solid #c6c4c4;color:#4f4f4f;float:right;width:150px}
    #contact-home  input[type=submit]{background:none;color:white;margin:18px 0 0 48px;font-weight:bold;letter-spacing:2px;font-size:18px;cursor:pointer}
    .gecko #contact-home  input[type=submit]{margin:15px 0 0 48px}
    .ie7 #contact-home  input[type=submit]{margin:10px 0 0 0}
    .ie7  #contact-home select{margin-top:-18px}
    .bordertop{width:192px;height:1px;border-top:1px solid #c6c4c4;margin:10px 0 0px 0}
    .ie7  #contact-home  input[type=text]{padding-top:6px}
    .ie8  #contact-home  input[type=text]{padding-top:6px}
    .ie7 .bordertop{margin:4px 0 0px 0}
    .ie8 .bordertop{margin:4px 0 0px 0} 
```

HTML 代码：

```
<div id="fond-diapo">
            <div id="diapo-center">

                <div class="absolute">
                    <img src="images/carrousel/img1.jpg" />
                </div>

                <div id="contact-home">
                     <h3>01 75 57 85 45</h3>
                        <form action="#" name="form2" class="form2">
                         <p>Remplissez le formulaire, nous vous rappelons sous 24 heures.</p>
                         <p><input type="text" value="Votre nom et votre pr&eacute;nom" onFocus="javascript:this.value=''" /></p>
                         <div class="bordertop"></div>
                         <p><input type="text" value="Votre n° de t&eacute;l&eacute;phone" onFocus="javascript:this.value=''" /></p>
                         <div class="bordertop"></div>
                         <p><input type="text" value="Votre adresse Mail" onFocus="javascript:this.value=''" /></p>
                         <div class="bordertop"></div>
                         <p>
                            Lieu :
                            <select name="fonction">
                            <option value="paris13">SWF paris 13eme</option>
                            <option value="paris16">SWF paris 16eme</option>
                            </select>
                         </p>
                         <input type="submit" value="VALIDER" />
                        </form>
                    </div>
                    <!-- Fin du div contact-home -->
            </div>
            <!-- Fin du div diapo center -->
        </div>
        <!-- Fin du div fond diapo --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:53:15.097

您的两个样式表与 css_browser_selector.js 一起加载

有时css是第一位的，有时JS是在两个css之间。

这将解决后续加载时的不同显示问题。

尝试将您的 css 放在顶部，将您的 js 放在页面底部。

或者，等到页面加载完毕再触发 JS。

# .net - 具有强类型和无大小限制的轻量级 SQL 数据库

> ID：12862769
> 
> 赞同：4
> 
> 时间：2012-10-12T15:51:28.197
> 
> 标签：.net, database, xcopy

我正在寻找一个轻量级的 SQL 数据库引擎，它可以在与我正在开发的 .NET 应用程序相同的进程中运行，无需其他安装。我知道两种选择：

1.  [SQLite](http://www.sqlite.org/)
2.  [SQL Server 精简版](http://en.wikipedia.org/wiki/SQL_Server_Compact)

乍一看，这些对我来说是相当不错的选择，因为它们支持我需要的大多数高级功能（例如并发、事务等），而无需单独安装数据库服务器。然而，它们都有一个主要的缺点：

1.  SQLite 使用动态类型，这意味着[如果您尝试将错误的数据类型插入到列中，则不会引发错误](http://www.sqlite.org/faq.html#q3)。额外的数据验证是我首先使用数据库的一半原因。
2.  SQL Server CE 有[4 GB 的大小限制](https://stackoverflow.com/a/4689678/138757)。

是否有任何其他数据库引擎可以在可以“xcopy”部署的 .NET 上下文中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:54:54.420

我认为[Firebird](http://www.firebirdsql.org/en/start/)可以满足所有想要的要求，并且它具有本地 .NET 驱动程序

[http://www.firebirdsql.org/en/development-net-provider/](http://www.firebirdsql.org/en/development-net-provider/)

# codeigniter - Codeigniter 活动记录"符号

> ID：12862770
> 
> 赞同：1
> 
> 时间：2012-10-12T15:51:35.493
> 
> 标签：codeigniter

如何使用 Codeignniter Acitve Record 转义“（双引号）？

```
$query_string = 'double " quotes';
$sql = "SELECT * FROM name WHERE email LIKE "%'.$query_string.'%" ";
$query = $this->db->query($sql); 
```

我得到mysql错误

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 '%" 附近使用正确的语法或电子邮件，如 "% **"** %"

任何建议如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:53:14.893

您可以通过在其前面放置一个来转义任何字符`\`。

所以`\"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:03:04.257

更好的是，您可以绑定参数！

```
$query_string = '%double " quotes%';
$sql = "SELECT * FROM name WHERE email LIKE ?";
$query = $this->db->query($sql, array($query_string)); 
```

# jquery - 如何对齐文本并选择菜单

> ID：12862780
> 
> 赞同：0
> 
> 时间：2012-10-12T15:52:02.093
> 
> 标签：jquery, jquery-mobile

我很难在 jquery mobile 中获取文本和选择菜单。

我现在得到的是：一行中的文本，但在另一行中选择菜单

但我想让它们在同一行

我的代码是：

```
<!--camera function starts here-->
            <div data-role="fieldcontain" class="text-field">
                <b>Report your Photo: </b><select id="select-choice" data-native-menu="false"
                    data-inline="true" data-icon="gear" data-theme="a"
                    name="select-choice" tabindex="-1">
                    <option value="None">Add Photo</option>
                    <option id="capturePhotoBnt" value="takePhoto">Take Photo</option>
                    <option id="fromLibrary" value="fromLibrary">From Libray</option>
                </select>

                <div id="image_canvas"></div>
                <span class="imageHelp" style="display: none;"><font
                    color="red">Please take a photo !</font></span>
            </div> 
```

任何建议都会有很好的帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:57:26.347

尝试将 CSS 设置为`select`：

```
/* in a CSS Stylesheet*/
select#select-choice {
    display: inline;
}

<!-- as an inline style -->
<select id="select-choice" style="display: inline;" data-native-menu="false" data-inline="true" data-icon="gear" data-theme="a" name="select-choice" tabindex="-1">

//or through jQuery
$('select#select-choice').css('display', 'inline'); 
```

假设`select`尚未将其设置为内联显示，那应该可以修复它。由于这是一个移动应用程序，我不得不问：“显示器是否足够宽，可以并排显示文本和选择？”

您可能必须使用字体大小和宽度才能使两者都适合同一行。

# html - 如何正确将宽度设置为百分位数并保持最小宽度（以像素为单位）？

> ID：12862782
> 
> 赞同：2
> 
> 时间：2012-10-12T15:52:07.377
> 
> 标签：html, width, background-image, css

所以我有一个标题/导航栏 div，这个 div 有一个 repeat-x 背景图像。比我有一个以该背景为中心的水平导航，但需要最小宽度和正常宽度。

我希望它显示为 80% 宽度，最小宽度 1000 像素，并居中。

### CSS

```
.center-wrap {
width: 80%;
min-width: 1000px;
margin: 0 auto;
}
#bar {
width: 100%;
height: 50px;
background-image: url(images/background.jpg);
background-repeat: repeat-x;
} 
```

### HTML

```
<div id="bar">
    <div class"center-wrap">
        UL LI HERE
    </div>
</div> 
```

### 错误

现在的问题是，如果我将页面大小调整到 1000px 以下，repeat-x 背景图像会被切断（滚动时 -> 显示网站的其余部分）。

我将如何保持我的 repeat-x 背景图像打开`#bar`并保持 center-wrap 居中并包括最小宽度和百分位宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:03:20.573

将此添加到您的 CSS，魔术！:D

```
body{min-width: 1000px;} 
```

问题是主体将窗口对象宽度作为最大宽度，而后代则将该宽度作为遗产。会发生什么：

您将窗口（浏览器）的大小调整为 300px 宽度，然后 body 的宽度 = 300px，然后 .center-wrap = 300px 的 80%，因此将 body 的 min-width 设置为固定数字可以修复它

# javascript - Yeoman 组件与供应商文件和升级

> ID：12862784
> 
> 赞同：5
> 
> 时间：2012-10-12T15:52:10.013
> 
> 标签：javascript, angularjs, yeoman

探索 Yeoman，并想知道如何更新软件包。

我初始化了一个角度项目

```
yeoman init angular 
```

中包含的版本`app/script/vendor`（也包含在 中`index.html`）是 AngularJS`v1.0.1`

如何升级到`v1.0.2`最新的 AngularJS 。

有一个命令`yeoman update`，但只更新通过 yeoman 安装的软件包。通过 yeoman 安装的软件包位于`app/components`.

所以，问题是

1.  为什么有一个`vendor`and`components`文件夹。
2.  如何将 Angular 升级到最新版本（不破坏 yeoman 提供的任何依赖管理）

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T15:23:43.583

我们计划让生成器从[Bower](https://github.com/twitter/bower)（我们在幕后使用的包管理器）那里获取依赖项。这意味着您将能够`yeoman update angular`获取最新信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T11:39:07.447

Yeoman 可能永远不会用最新的 Angular 库升级您包含的 Angular 库。它也不应该这样做。考虑一下，如果您包含库 A 并开始使用它进行开发，一段时间后（比如 6 个月左右！）您进行更新，如果 yeoman 继续更新您包含的库的版本，这可能会导致您的应用程序上的错误和兼容性问题。另一方面，如果您包含最新文件，运行所有测试，然后确定最新的文件更改仍然合理，那么您可以这样做。而且，它只是一个行更改，您为什么要 yeoman去做？它的构建是为了基于最佳实践“生成”新项目，而不是可能用于修改现有项目。

# facebook - Facebook 应用请求显示没有朋友（无限加载）

> ID：12862787
> 
> 赞同：0
> 
> 时间：2012-10-12T15:52:24.000
> 
> 标签：facebook, api, apprequests, invite

我一直在尽一切努力解决这个问题。

我已经设置了一个基本的基于 php 的 Facebook 应用程序（Canvas/iFrame） - 它加载正常，请求权限并安装正常。

我已经尝试了开发者网站上的 apprequests 代码，以及尝试邀请朋友加入应用程序的不同示例。

对话框确实显示了，但加载栏只是运行而没有显示任何可供选择的朋友。

我正在使用的代码是：

```
<div id="fb-root"></div>
<script src="https://connect.facebook.net/en_US/all.js"></script>
<button id="send-to-many">Send App request</button>
<script>
  FB.init({
    appId  : '<?php echo $appid ?>',
  });
document.getElementById('send-to-many').onclick = function() {
  FB.ui({
    method: 'apprequests',
    message: 'You should learn more about the Platform.'
  },
  function(response) {
    if (response) {
alert('invited');
    } else {
alert('not invited');
    }
  }
);
}
</script> 
```

不知道如何解决这个问题。有任何想法吗！

但是，我可以在方法中添加一个“to”并指定一个用户 ID，这样就可以了。

所以我认为这可能是一个权限问题？

非常感谢，豪尔赫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:16:47.367

不应该是权限问题 - 许多对话框旨在无需验证应用程序即可使用。

我刚刚运行了这个确切的代码，用我的替换了应用程序 ID，它就可以工作了。所以要检查的一些事情是：

*   您是否在控制台中收到任何 JS 错误？
*   该应用程序是否处于沙盒模式并且您正在与非管理员用户一起使用它？
*   您使用的帐户确定有朋友吗？

# python - Python：导入模块matplotlib的错误问题

> ID：12862788
> 
> 赞同：0
> 
> 时间：2012-10-12T15:52:24.580
> 
> 标签：python, matplotlib, runtime-error

今天下午安装进度条后，我在导入 matplolib 时遇到了这个问题：

```
>>> import matplotlib
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python27\lib\site-packages\matplotlib\__init__.py", line 772, in <module>
    rcParams = rc_params()
  File "C:\Python27\lib\site-packages\matplotlib\__init__.py", line 690, in rc_params
    fname = matplotlib_fname()
  File "C:\Python27\lib\site-packages\matplotlib\__init__.py", line 602, in matplotlib_fname
    fname = os.path.join(get_configdir(), 'matplotlibrc')
  File "C:\Python27\lib\site-packages\matplotlib\__init__.py", line 253, in wrapper
    ret = func(*args, **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\__init__.py", line 475, in _get_configdir
    raise RuntimeError("'%s' is not a writable dir; you must set %s/.matplotlib to be a writable dir.  You can also set environment variable MPLCONFIGDIR to any writable directory where you want matplotlib data stored "% (h, h))
RuntimeError: 'C:\Users\ALEM' is not a writable dir; you must set C:\Users\ALEM/.matplotlib to be a writable dir.  You can also set environment variable MPLCONFIGDIR to any writable directory where you want matplotlib data stored 
```

我曾尝试在我的 Windows 7 64 位上多次重新安装 matplolib 和 python 27，但我总是遇到同样的错误。

错误消息说：

> 请运行 chkdsk 实用程序

但我不明白这个实用程序在哪里以及如何运行它。

# login - 如何在 iOS 6 中使用 openActiveSessionWithReadPermissions 在 SDK 3.1.1 上强制 webview 登录？

> ID：12862789
> 
> 赞同：2
> 
> 时间：2012-10-12T15:52:25.410
> 
> 标签：login, ios6, facebook-ios-sdk

我从 facebook 教程中得到了这段代码：

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
NSArray *permissions = [[NSArray alloc] initWithObjects:
    @"email", 
    @"user_likes",
    nil];
return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [self sessionStateChanged:session
                                                         state:state
                                                         error:error];
                                 }]; 
```

}

但它总是会打开一个 Safari 选项卡。 **我需要强制 webview 登录而不是 Safari 选项卡。**

预先感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T15:43:45.293

不幸的是，似乎没有公共 api 来强制这种行为。有解决方法（即只需创建您自己的会话并将其设置为活动会话并使用

```
 [session openWithBehavior:howToBehave
                    completionHandler:handler]; 
```

如果你在 github 中观察 openActiveSessionWithPermissions 的源代码

```
+ (BOOL)openActiveSessionWithPermissions:(NSArray*)permissions
                            allowLoginUI:(BOOL)allowLoginUI
                      allowSystemAccount:(BOOL)allowSystemAccount
                                  isRead:(BOOL)isRead
                         defaultAudience:(FBSessionDefaultAudience)defaultAudience
                       completionHandler:(FBSessionStateHandler)handler {
    // is everything in good order?
    [FBSession validateRequestForPermissions:permissions
                             defaultAudience:defaultAudience
                          allowSystemAccount:allowSystemAccount
                                      isRead:isRead];
    BOOL result = NO;
    FBSession *session = [[[FBSession alloc] initWithAppID:nil
                                               permissions:permissions
                                           defaultAudience:defaultAudience
                                           urlSchemeSuffix:nil
                                        tokenCacheStrategy:nil]
                          autorelease];
    if (allowLoginUI || session.state == FBSessionStateCreatedTokenLoaded) {
        [FBSession setActiveSession:session];
        // we open after the fact, in order to avoid overlapping close
        // and open handler calls for blocks
        FBSessionLoginBehavior howToBehave = allowSystemAccount ?
                                                FBSessionLoginBehaviorUseSystemAccountIfPresent :
                                                    FBSessionLoginBehaviorWithFallbackToWebView;
        [session openWithBehavior:howToBehave
                completionHandler:handler];
        result = session.isOpen;
    }
    return result;
} 
```

你也可以使用 - (id)initWithAppID:(NSString*)appID permissions:(NSArray*)permissions urlSchemeSuffix:(NSString*)urlSchemeSuffix tokenCacheStrategy:(FBSessionTokenCachingStrategy*)tokenCachingStrategy;

创建会话，如果你使用`[FBSession alloc] initWithPermissions:permissions]`，info.plist 文件应该有关键 FacebookAppID 和你的蚜虫作为值

所以这段代码的等价物将是

```
[FBSession setActiveSession: [[FBSession alloc] initWithPermissions:permissions] ];             

        [[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorForcingWebView completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
            switch (status) {
                case FBSessionStateOpen:
                    // call the legacy session delegate
                    //Now the session is open do corresponding UI changes
                    break;
                case FBSessionStateClosedLoginFailed:
                { // prefer to keep decls near to their use

                    // unpack the error code and reason in order to compute cancel bool
                    NSString *errorCode = [[error userInfo] objectForKey:FBErrorLoginFailedOriginalErrorCode];
                    NSString *errorReason = [[error userInfo] objectForKey:FBErrorLoginFailedReason];
                    BOOL userDidCancel = !errorCode && (!errorReason ||
                                                        [errorReason isEqualToString:FBErrorLoginFailedReasonInlineCancelledValue]);

                    // call the legacy session delegate if needed
                    //[[delegate facebook] fbDialogNotLogin:userDidCancel];
                }
                    break;
                    // presently extension, log-out and invalidation are being implemented in the Facebook class
                default:
                    break; // so we do nothing in response to those state transitions
            }
        }]; 
```

注意：1）在等效代码中，我跳过了验证权限

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-31T08:39:29.053

```
 NSArray *permissions = @[@"basicinfo",etc...];
 FBSession *session = [[FBSession alloc] initWithPermissions:permissions];
 [FBSession setActiveSession:session];
 [session openWithBehavior:FBSessionLoginBehaviorForcingWebView completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {}]; 
```

# android - Android - 在服务器上发生某些事情后创建推送通知

> ID：12862790
> 
> 赞同：0
> 
> 时间：2012-10-12T15:52:38.950
> 
> 标签：android

我一直在阅读有关使用 TCP/IP 创建推送通知的内容，似乎其中描述的步骤可能有些过时” [http://tokudu.com/2010/how-to-implement-push-notifications-for-android/](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/)

真的，我只需要提醒用户“在 abc 应用程序上发生了 xyz 操作”

早些时候有人建议我使用 UrbanAirship，但我不确定它是如何适应的。我想这是因为我需要从安全连接发送警报。

但是如何发送警报？我只需要电话号码或类似的东西吗？什么是一个很好的教程？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:02:21.157

您可以将此代码用于服务器部分：

```
package yourpackage.android.gcm.server;

import com.google.android.gcm.server.Message;
import com.google.android.gcm.server.MulticastResult;
import com.google.android.gcm.server.Sender;

import java.util.ArrayList;

class Notify {
    public static void main(String args[]) {

        try {
                                       // this API key    
            Sender sender = new Sender("AIzaSyCn3N2OIm-EDtiGwTyQfSIB8NRvDtIOx30");

            ArrayList<String> devicesList = new ArrayList<String>();
//add you deviceID
            devicesList.add("APA91bELVJbxB_NLnLbTkkkX87SDdkJc6OfCN2slhC9t4cLq-KA32eGgiW4-Gi--ZEsEMKIh0AtYJMs5rQGswfm3cH1qK853WcpV98bkaplAaC5AiycDmifuVFSRl21vgf-Rqj0dCrFF");
                        //devicesList.add("APA91bHIdM4XGqrjJLTuwCX5OOrTYG4ACXYEVkZDM1bPs5qFdzJP4Bpql-sZqyKB8BU7fDtdxB84aTygHLyASYg_XNY6lqrcA4wj4sZHJXGVFzz_0UEADMfFCx9NAfRZxunIYso_dkBa");
            //APA91bFA-i2l3iEMnIBs0JK80pTLHOsE7p1s-DysRpKGas1MQOVILyIs9xwY7soysSWGz5Uif68uXR6F5Xn0tCTYesv78uQZxhC310a1cvf8aFohhfMGY6awbOSg3t1GRz2i3U-8kVSF
            // Use this line to send message without payload data
            // Message message = new Message.Builder().build();

            // use this line to send message with payload data
            Message message = new Message.Builder()
                    //.collapseKey("message")
                    //.timeToLive(241000)
                    .delayWhileIdle(true)
                    .addData("message", "Your message send")
                    .build();

                   /**/
            // Use this code to send to a single device
            // Result result = sender
            // .send(message,
            // "APA91bGiRaramjyohc2lKjAgFGpzBwtEmI8tJC30O89C2b3IjP1CuMeU1h9LMjKhmWuZwcXZjy1eqC4cE0tWBNt61Kx_SuMF6awzIt8WNq_4AfwflaVPHQ0wYHG_UX3snjp_U-5kJkmysdRlN6T8xChB1n3DtIq98w",
            // 1);

            // Use this for multicast messages
            MulticastResult result = sender.send(message, devicesList, 1);
            //sender.send(message, devicesList, 0);

            System.out.println(result.toString());
            if (result.getResults() != null) {
                int canonicalRegId = result.getCanonicalIds();
                if (canonicalRegId != 0) {
                }
            } else {
                int error = result.getFailure();
                System.out.println(error);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

您可以将此代码用于客户端部分：

```
public class GCMIntentService extends GCMBaseIntentService {

    public GCMIntentService() {
        super("");
        Log.d("GCMIntentService", senderId);
    }

     private void genNotification(Context context, String message) {

         notify(context, message);
         PowerManager pm = (PowerManager)context.getSystemService(Context.POWER_SERVICE);

         boolean isScreenOn = pm.isScreenOn();

         Log.e("screen on.................................", ""+isScreenOn);

         if(isScreenOn==false) {

             PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |PowerManager.ACQUIRE_CAUSES_WAKEUP |PowerManager.ON_AFTER_RELEASE,"MyLock");

             wl.acquire(10000);
             PowerManager.WakeLock wl_cpu = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,"MyCpuLock");

             wl_cpu.acquire(10000);
         }
     }

    public static void notify(Context context, String message)  {
        int icon = R.drawable.icon;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
        context.getSystemService(Context.NOTIFICATION_SERVICE);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context, NotificationListView.class);
        PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        NotificationDataHelper helper = new NotificationDataHelper(context);
        Notification notification;
        notification = new Notification(icon, "message", when);
            notificationIntent.putExtra("message", message);
            notification.setLatestEventInfo(context, title, "message", intent);
            notification.defaults |= Notification.DEFAULT_VIBRATE;
            notification.setLatestEventInfo(context, title, msg, intent);
        }
        //set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        notificationIntent.setAction("notification");
        notificationManager.notify(0, notification);

    }

    @Override
    protected void onError(Context arg0, String arg1) {

    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.d("GCM", "RECEIVED A MESSAGE");
        Log.d("GCM", "RECEIVED A MESSAGE");
        Log.d("GCM", "RECEIVED A MESSAGE");
        Log.d("GCM", "RECEIVED A MESSAGE");

            genNotification(context, intent.getStringExtra("message"));

    }

    @Override
    protected void onRegistered(Context arg0, String arg1) {

    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {

    }

} 
```

首先你像本教程一样注册了设备[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)并获取设备ID，你可以为设备发送消息

```
private void registerGCM() {
        GCMRegistrar.checkDevice(this);
        //GCMRegistrar.unregister(this);
        //Log.d("info", "unregistered....." + GCMRegistrar.getRegistrationId(this));
        GCMRegistrar.checkManifest(this);
        if (GCMRegistrar.isRegistered(this)) {
            Log.d("info", GCMRegistrar.getRegistrationId(this));
        }
        final String regId = GCMRegistrar.getRegistrationId(this);

        if (regId.equals("")) {
            GCMRegistrar.register(this, "1013733918417");
            Log.d("info", GCMRegistrar.getRegistrationId(this));
        } else {
            Log.d("info", "already registered as " + regId);
        }

            GCMIntentService.notify(this, null);

    } 
```

# mysql - MyISAM - 关闭 query_cache？

> ID：12862793
> 
> 赞同：1
> 
> 时间：2012-10-12T15:52:46.227
> 
> 标签：mysql, database

我一直在查看很多 my.cnf 配置，并想知道 MyISAM 数据库，是有一个小的 query_cache 还是关闭 query_cache 并且只有一个大的 key_buffer_size 更好？这两者应该如何关联？

这是基于我的服务器配置（8GB / 专用虚拟）自动生成的 my.cnf 文件

```
 [mysqld]
 # MyISAM #
 key_buffer_size                = 2G

 # SAFETY #
 max_allowed_packet             = 16M
 max_connect_errors             = 1000000

 # CACHES AND LIMITS #
 tmp_table_size                 = 32M
 max_heap_table_size            = 32M
 query_cache_type               = 0
 query_cache_size               = 0
 max_connections                = 500
 thread_cache_size              = 50
 open_files_limit               = 65535
 table_definition_cache         = 1024
 table_open_cache               = 2048 
```

另一个来自人类：

```
 [mysqld]

 # MyISAM #
 key_buffer_size                = 4G

 # SAFETY #
 max_allowed_packet             = 1M

 # CACHES AND LIMITS #
 tmp_table_size                 = 64M
 max_heap_table_size            = 64M
 query_cache_type               = 1
 query_cache_size               = 128M
 max_connections                = 500
 thread_cache_size              = 256
 table_open_cache               = 1024 
```

# android - 在 adb 上列出我的 android 的数据库文件

> ID：12862795
> 
> 赞同：1
> 
> 时间：2012-10-12T15:52:56.863
> 
> 标签：android, sqlite, adb

我试图将现有数据库复制到系统数据库路径中，但我不确定操作是否成功，所以我想列出我的平板电脑的数据库，我认为它们存储在我试过的目录 /data/data/ 中：

```
C:\>adb shell find /data -name *.db 
```

但它给了我：

```
/system/bin/sh: find: not found 
```

也试过这个：

```
C:\>adb -s c16076b0a607e5f shell find/data -name*.db 
```

结果还是一样。

我在这里查看了类似的案例，但一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:13:05.780

不幸的是，没有“系统数据库路径”之类的东西。默认情况下，数据库存储在 /data/data/name_of_package/databases 中。即便如此，数据库名称也没有限制——如果我愿意，我可以称它为 fred.flintstone。因此，您将需要递归搜索每个数据库子文件夹并列出其内容。即使这样，您也不会看到存储在外部存储中的数据库，但是，如果您只想查看您的数据库在哪里，那么递归搜索就可以了。

或者，如果您的手机已植根，请安装 Root Explorer 并查看！

出于好奇，鉴于没有数据库路径，您究竟在哪里复制了您的数据库？

# asp.net - 找回丢失的会话值的方法

> ID：12862796
> 
> 赞同：0
> 
> 时间：2012-10-12T15:52:59.063
> 
> 标签：asp.net, session-variables

我的 Web 应用程序由于某种原因丢失了会话值，并且它发生在调用外部网页之后。我的应用程序很大，因此任何重大更改都需要太多时间。我的数据库是 Oracle，而不是 Sql Server。

是否有另一种方法来存储这些会话变量的值？其实我只需要保留两个会话变量。

我正在考虑将这些值存储在 Oracle 表中。键是 SessionID。我读到 SessionID 即使在其他会话变量被回收或丢失后仍保持其值，但我不确定。

我打算在每个页面上放置一个函数，在 Page_Load mewthod 上，检查会话变量是否仍然存在。如果没有，则转到 Oracle 表并检索它。

就像是：

```
If Session("MyVariable") Is dbNull.Value Then
  Seek it on Oracle table, using SessionID as Key, and assign to variable Var
  Session("MyVariable") = Var
End If 
```

你觉得会好吗？我可以信任 SessionID 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:29:57.557

好吧，我想到了 4 种会话类型：

**(1) 进程内模式**

在这种模式下，会话状态存储在当前进程中，当该进程终止时，保存在会话状态中的数据也将丢失。此模式在 ASP.NET 中默认设置，下面您可以看到在 web.config 文件中配置这种状态的示例：

```
<configuration> <sessionstate mode="inproc" cookieless="false" timeout="30" sqlconnectionstring="data source=127.0.0.1;user id=user;password=pass" server="127.0.0.1" port="42424" /> 
```

此会话状态最重要的参数如下：

*   mode - 此参数可以有三个值 - inproc、sqlserver、stateserver。我们示例中的值 inproc 表示会话状态处于进程内模式
*   cookieless - 此参数的布尔值指示会话状态是否需要 cookie 才能工作
*   timeout - 表示会话有效的时间。每次用户与您的应用程序交互时，超时设置为当前时间加上超时值

这种模式最大的优势就是性能。进程之间没有数据传输，因此速度明显更快。

**(2) 进程外模式**

在这种模式下，会话存储在单独的进程中，因此可以终止其他进程并且仍将保持会话状态。这是 web.config 中用于进程外模式的会话状态的示例配置：

```
<configuration> <sessionstate mode="stateserver" cookieless="false" timeout="30" sqlconnectionstring="data source=127.0.0.1;user id=user;password=pass" server="127.0.0.1" port="42424" /> 
```

在下方，您可以看到进程外模式下会话状态的参数：

*   mode - 为 stateserver 设置的值表明它在进程外模式下工作
*   service - 表示状态服务所在的服务器，在本例中为 localhost
*   port - 表示状态服务的端口

正如我之前提到的，这种模式的优点是你不会丢失进程的会话状态，但它的性能比进程内模式差。

**(3) SQL Server 模式**

在 SQL Server 模式下，会话状态存储在 SQL Server 中。要配置它，您必须将以下代码放入 web.config 文件中：

```
<configuration> <sessionstate mode="sqlserver" cookieless="false" timeout="30" sqlconnectionstring="data source=server_name;user id=user;password=pass" server="127.0.0.1" port="42424" /> 
```

在此模式下最重要的参数是：

*   mode - 设置为 sqlserver 值表示会话状态应该在 SQL server 模式下工作
*   sqlconnectionstring - 它包含一个带有服务器名称、SQL 服务器用户名和密码的字符串

在这种模式下，最大的优点是不会丢失会话状态的可靠性，但缺点是它比以前的模式慢。

**(4) 无饼干**

在这种模式下，不需要启用客户端浏览器中的 cookie。此模式通过使用标识会话的 id 修改 URL 地址来工作。配置如下：

```
<configuration> <sessionstate mode="stateserver" cookieless="true" timeout="30" sqlconnectionstring="data source=127.0.0.1;user id=user;password=pass" server="127.0.0.1" port="42424" /> 
```

对于此模式至关重要的参数是“cookieless”——在我们的示例中设置为 true，这意味着不需要 cookie 来维护状态。您已经知道此解决方案的优势是什么 - 它不需要 cookie。

**建议：**

如果您不知何故丢失了会话值，请尝试 (2) 进程外模式或 (3) SQL Server 模式。这两种模式都可以让您的会话更长、更持久。这些通常用于大型生产站点，在用户访问期间会话**必须**保持活动状态。正如我之前提到的，唯一的缺点是性能。尽管如果它是中小型应用程序，这不会对您的应用程序产生太大影响。

这不会让您丢失的会话恢复，但它会帮助您保持它们的活力。希望这至少对您有所帮助。

# c++ - 在 main() 之外处理 argc 和 argv

> ID：12862798
> 
> 赞同：8
> 
> 时间：2012-10-12T15:53:07.700
> 
> 标签：c++, parsing, arguments, argv, argc

如果我想将用于处理命令行参数的大部分代码保留在 main 之外（用于组织和更具可读性的代码），那么最好的方法是什么？

```
void main(int argc, char* argv[]){
    //lots of code here I would like to move elsewhere
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:55:45.963

要么将它们作为参数传递，要么将它们存储在全局变量中。只要您不从 main 返回并尝试`atexit`在全局范围内的处理程序或对象的析构函数中处理它们，它们仍然存在并且可以从任何范围访问。

例如：

```
// Passing them as args:
void process_command_line(int argc, char **argv)
{
    // Use argc and argv
    ...
}

int main(int argc, char **argv)
{
    process_command_line(argc, argv);
    ...
} 
```

或者：

```
// Global variables
int g_argc;
char **g_argv;

void process_command_line()
{
    // Use g_argc and g_argv
    ...
}

int main(int argc, char **argv)
{
    g_argc = argc;
    g_argv = argv;
    process_command_line();
    ...
} 
```

将它们作为参数传递是一个更好的设计，因为它是封装的，如果您愿意，您可以修改/替换参数，或者轻松地将您的程序转换为库。全局变量更容易，因为如果您有许多不同的函数出于任何原因访问 args，您只需将它们存储一次，而无需在所有不同的函数之间不断传递它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T16:16:45.257

只要可行，就应该遵守标准。因此，不要写

```
void main 
```

这从来都不是有效的 C 或 C++，而是写

```
int main 
```

这样，您的代码可以使用例如`g++`（使用通常的编译器选项）进行编译。

鉴于`void main`我怀疑是 Windows 环境。无论如何，*为了支持在 Windows 环境中使用您的程序*，您不应该`main`在 Windows 中使用参数。它们在 *nix 中工作，因为它们是在那个环境中设计的；它们通常不能在 Windows 中工作，因为默认情况下（按照非常严格的约定）它们被编码为 Windows ANSI，这意味着它们不能使用用户当前语言环境之外的字符对文件名进行编码。

因此，对于 Windows，您最好使用**[`GetCommandLine`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156%28v=vs.85%29.aspx)**API 函数及其姊妹解析函数。为了可移植性，这应该更好地封装在一些命令行参数模块中。`wchar_t`然后你需要处理在 Windows 和`char`*nix中使用的有趣问题......

无论如何，我不确定对应的 *nix API，或者即使有，但谷歌它。在最坏的情况下，对于 *nix，您始终可以从`main`. *nix 的丑陋直接源于需要使用 C++ 最不可移植的、特定于操作系统的构造（即 standard ）来支持可移植性`main`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T15:54:54.067

只需将`argc`和`argv`作为要在其中处理它们的函数的参数传递。

`void parse_arg(int argc, char *argv[]);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-13T23:22:16.870

查看“ [getoptlong](http://www.gnu.org/software/libc/manual/html_node/Getopt-Long-Option-Example.html#Getopt-Long-Option-Example) ”系列函数和库。这些提供了一种结构化的方式来定义您的程序期望的参数，然后可以很容易地为您解析它们。还可以帮助生成文档/帮助响应。

它是 UNIX 世界中的一个旧库，在 C# 中也有一个 .Net 实现。（+ Perl、Ruby，可能还有更多。很高兴有一个可用于所有这些的单一范例！学习一次，随处使用！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-27T20:58:11.060

Linux 提供`program_invocation_name`和`program_invocation_name_short`.

# wpf - ItemsControl 整个项目是子项目的扩展器

> ID：12862799
> 
> 赞同：2
> 
> 时间：2012-10-12T15:53:07.700
> 
> 标签：wpf, xaml, itemscontrol, expander

所以很难描述我想要的行为，所以我用我的业余绘画技巧画了一张漂亮的照片。

![在此处输入图像描述](../Images/81bdf24a2dca0660582a046a3a238d1d.png)

所以基本上我希望标题`ItemsControl`像扩展器一样操作，没有丑陋的扩展器图标出现（因此只需单击框中的任何位置即可展开以查看子项目）。我已经有了数据层次结构，但是我无法让扩展器按照我的意愿运行，任何人都成功地覆盖扩展器样式来完成这样的事情，或者是否有另一个控件可以完成类似的事情这更容易？这是一些简单的代码，但是有丑陋的扩展器按钮，覆盖了扩展器的标题模板和样式，只会让它看起来更糟。

```
<ItemsControl ItemsSource="{Binding Collection}" 
  HorizontalContentAlignment="Stretch">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Expander Header="Heading">
                <ItemsControl ItemsSource="{Binding Items}" HorizontalContentAlignment="Stretch">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Expander Header="Sub-Heading">
                                <ListBox ItemsSource="{Binding Items}" HorizontalContentAlignment="Stretch"/>
                            </Expander>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Expander>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:01:11.343

如果您不喜欢内置样式，您只需为扩展器使用自定义样式:)

这是一个开始：

```
<Style x:Key="customExpander">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate TargetType="Expander">
                    <DockPanel>
                        <ToggleButton DockPanel.Dock="Top"
                                      IsChecked="{Binding Path=IsExpanded,Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                      Background="{TemplateBinding Background}"
                                      Content="{TemplateBinding Header}"
                                      ContentTemplate="{TemplateBinding HeaderTemplate}"
                                      Foreground="{TemplateBinding Foreground}"
                                      FontFamily="{TemplateBinding FontFamily}"
                                      FontSize="{TemplateBinding FontSize}"
                                      FontStretch="{TemplateBinding FontStretch}"
                                      FontStyle="{TemplateBinding FontStyle}"
                                      FontWeight="{TemplateBinding FontWeight}"
                                      HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                      VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                      Padding="{TemplateBinding Padding}"
                                      Name="HeaderSite"
                                      MinWidth="0"
                                      MinHeight="0"
                                      Margin="1,1,1,1">
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <TextBlock Text="{TemplateBinding Content}" Background="{TemplateBinding Background}" />
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>

                        <ContentPresenter Content="{TemplateBinding Content}"
                                  ContentTemplate="{TemplateBinding ContentTemplate}"
                                  ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                  Name="ExpandSite" Margin="{TemplateBinding Padding}"
                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                  Visibility="Collapsed"
                                  Focusable="False"
                                  DockPanel.Dock="Bottom" />
                    </DockPanel>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsExpanded" Value="True">
                            <Setter TargetName="HeaderSite" Property="Background" Value="Gold" />
                            <Setter TargetName="ExpandSite" Property="Visibility" Value="Visible" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="TextElement.Foreground" Value="{DynamicResource DisabledTextBrush}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
</Style> 
```

然后更改您的 xaml 以使用此样式：

```
<ItemsControl ItemsSource="{Binding Items}" HorizontalContentAlignment="Stretch">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Expander Header="Heading" Style="{StaticResource customExpander}" Background="LightSteelBlue" >
                <ItemsControl ItemsSource="{Binding Items}" HorizontalContentAlignment="Stretch">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Expander Header="Sub-Heading" Style="{StaticResource customExpander}" Background="LightSalmon">
                                <ListBox ItemsSource="{Binding Items}" HorizontalContentAlignment="Stretch"/>
                            </Expander>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Expander>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

**编辑**重要的部分是

```
<ControlTemplate TargetType="ToggleButton">
    <TextBlock Text="{TemplateBinding Content}" Background="{TemplateBinding Background}" />
</ControlTemplate> 
```

如果你想定制。这是一个非常原始的解决方案，因此您有足够的空间来增强它；）

# javascript - 如何在同一页面上开发两个 jqgrids 并为两个网格使用相同的上下文菜单？

> ID：12862800
> 
> 赞同：1
> 
> 时间：2012-10-12T15:53:12.863
> 
> 标签：javascript, jquery, jqgrid

我在一个页面上有两个 jqgrids。这两个应该有上下文菜单。如果我有两个不同的上下文菜单，比如“myMenu1”和“myMenu2”，这是可能的。但我只想有一个上下文菜单，我想将它用于两个网格，实际上我[从 oleg 的链接中获取](https://stackoverflow.com/questions/6607576/how-to-create-jqgrid-context-menu/6608787#6608787)了参考。请建议我怎样才能实现？

```
<div class="contextMenu" id="myMenu1" style="display:none">
         <ul style="width: 200px">
        <li id="edit">
            <span class="ui-icon ui-icon-pencil" style="float:left"></span>
            <span style="font-size:11px; font-family:Verdana">Edit Row</span>
        </li>
        <li id="del">
            <span class="ui-icon ui-icon-trash" style="float:left"></span>
            <span style="font-size:11px; font-family:Verdana">Delete Row</span>
        </li>
        </ul>
       </div> 
```

我正在做的绑定如下所示。

```
loadComplete: function() {
                      $("tr.jqgrow", this).contextMenu('myMenu1', {
                          bindings: {
                              'edit': function(trigger) {
                                if (trigger.id && trigger.id !== lastSelection) {
                                      grid_location.restoreRow(lastSelection);
                                      grid_location.editRow(trigger.id, true);
                                lastSelection = trigger.id;
                                     }

                              },
                              'del': function(trigger) {
                          if ($('#del').hasClass('ui-state-disabled') === false) {
                                      // disabled item can do be choosed
                                      if (trigger.id && trigger.id !== lastSelection) {
                                          grid_location.restoreRow(lastSelection);
                                        //grid.editRow(trigger.id, true);
                                        //lastSelection = trigger.id;
                                             }
                                      grid_location.delGridRow(trigger.id, delSettings);
                                  }
                              }
                          },
                          onContextMenu: function(event/*, menu*/) {
                              var rowId = $(event.target).closest("tr.jqgrow").attr("id");
                              //grid.setSelection(rowId);
                              return true;
                          }
                      });
                  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:00:14.057

我为本地数据解决了这个问题，我在这里发布了整个代码。唯一需要担心的是，如果两个网格中日期类型的列具有相同的名称（或索引），则日期选择器不会选择日期。因此，为此我使用了不同的名称（inv_date 和 invdate），但对于服务器端数据，我仍然感到困惑。

```
onContextMenu: function(event/*, menu*/) {
    /*
      In this line we will be specifying on which grid the context menu has to perform
      and this variable 'grid' has to be used in the 'onclickSubmitLocal' function.
    */
    grid = $("#currnt_grid");
    var rowId = $(event.target).closest("tr.jqgrow").attr("id");
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T20:51:23.847

我认为这`$(event.target).closest("table")`是对当前 jqgrid 的引用，当然如果没有子网格的话。

# c# - 以编程方式安装 Windows 消息队列

> ID：12862808
> 
> 赞同：2
> 
> 时间：2012-10-12T15:53:28.110
> 
> 标签：c#, message-queue, silent-installer

我的应用程序需要 Windows 功能

![在此处输入图像描述](../Images/18ea6cea9b9718dc2fc5c624973e0dff.png)

要安装。

我目前使用[这个解决方案](https://stackoverflow.com/a/6069270/637142)来查看它是否已安装。

现在，一旦我知道它没有运行，我将如何安装它。我试过了：

```
List<ServiceController> services = ServiceController.GetServices( ).ToList( );
ServiceController msQue = services.Find( o => o.ServiceName == "MSMQ" );

if ( msQue != null )
{
    if ( msQue.Status == ServiceControllerStatus.Running )
    {
        Console.Write( "it is running" );
        return;
    }
}
else
{
    Console.WriteLine( "It is not running \n\nPress enter to install" );
    Console.Read( );
   msQue.Start( ); // <- I was hoping to look for a method that will turn feature on or off                          
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:12:31.070

**免责声明**：

我不会尝试从代码中安装它；相反，我会让消息队列成为您应用程序的先决条件，并在您安装应用程序时安装它。

* * *

我不知道您是否可以从 C# 执行此操作，但这里有关于执行无人值守安装的文章。您可以构建一个命令行来执行安装。

服务器 2003 / Windows XP：[http ://technet.microsoft.com/en-us/library/cc778216(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc778216(v=ws.10).aspx)

服务器 2008 / Windows 7：[http ://technet.microsoft.com/en-us/library/cc731283(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc731283(v=ws.10).aspx)

# apache - mod-rewrite 从 url 中删除文件夹名称

> ID：12862809
> 
> 赞同：6
> 
> 时间：2012-10-12T15:53:29.870
> 
> 标签：apache, .htaccess, mod-rewrite

我正在使用[OJS](http://pkp.sfu.ca/?q=ojs)，并将它安装在一个名为“journals”的文件夹中。我在那里创建了一些期刊（例如“journal1”、“journal2”等）。

现在我得到这样的路径：`www.example.com/journals/index.php/journal1`， `www.example.com/journals/index.php/journal2`等。

我想要映射`www.example.com/journals/index.php/journal1` 到的样子`www.example.com/index.php/journal1`（从 URL 中删除日志部分）。

我无法将 OJS 移至根目录，因为那里还有一些其他文件。

这是`.htaccess`我目前正在使用的文件（它在“journals”文件夹中，给我一个 500）

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond $1 !^journals
RewriteRule ^(.*) /journals/$1 [L]
</IfModule> 
```

这也是error.log

```
[Fri Oct 12 22:16:45 2012] [error] [client 127.0.0.1] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:12:25.103

当您将这些规则放在`/journals`目录中的 htaccess 文件中时，它会导致重写循环。`$1`永远不要以日志开头，因为您在日志目录中，因此该规则不断得到应用。

您需要在您的*site-root*目录中的 htaccess 文件中放置类似的内容`/`：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/journals
RewriteRule ^index\.php(.*)$ /journals/index.php$1 [L] 
```

# apache-flex - 如何在 Spark 中使用辉光滤镜

> ID：12862810
> 
> 赞同：1
> 
> 时间：2012-10-12T15:53:40.400
> 
> 标签：apache-flex, flex4

在 Flex 3 中，您可以像这样制作发光效果：

```
 <mx:Glow id="glowImage" duration="250"
             alphaFrom="0" alphaTo="1"
             blurXFrom="0.0" blurXTo="3.0"
             blurYFrom="0.0" blurYTo="3.0" strength="2"
             color="0xcc0000" target="{this}"/>

    <mx:Glow id="unglowImage" duration="250"
             alphaFrom="1" alphaTo="0"
             blurXFrom="3.0" blurXTo="0.0"
             blurYFrom="3.0" blurYTo="0.0" strength="2"
             color="0xaaaaaa" target="{this}"/> 
```

和 MXML：

```
<mx:Image rollOverEffect="{glowImage}" rollOutEffect="{unglowImage}"/> 
```

在 Flex 4 中，我们应该将 AnimateFilter 与 GlowFilter 一起使用（由 Adob​​e 推荐）。这是我想出的：

```
 <s:AnimateFilter id="glowAnimation" 
                     target="{this}"
                     duration="250"
                     >

        <s:bitmapFilter>
            <s:GlowFilter color="#ff0000" strength="3" quality="3" />
        </s:bitmapFilter>

        <s:motionPaths>
            <s:SimpleMotionPath valueFrom="0" valueTo="4" property="blurX"/>
            <s:SimpleMotionPath valueFrom="0" valueTo="4" property="blurY"/>
        </s:motionPaths>

    </s:AnimateFilter> 
```

和 MXML：

```
<mx:Image rollOverEffect="{glowAnimation}" rollOutEffect="{unglowImage}"/> 
```

问题是这个动画一次然后效果被移除，因为 mx 效果应用过滤器并保持它应用。

~~~**更新**~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~
RIAStar的回答是对的，我想补充一下我刚刚从这个视频中偶然发现[1]的原因。它描述了 Animate 和 AnimateFilter 之间的区别。AnimateFilter 是瞬态的。它应用过滤器，完成后将其删除。Animate 将值永久应用于目标。

我们还应该知道，在 Flex 4 中，并非所有效果都支持触发器。

从 AnimateInstance 类：

```
override public function startEffect():void
{  
    // This override removes EffectManager.effectStarted() to avoid use of
    // mx_internal. New effects are not currently triggerable, so
    // this should not matter
} 
```

这意味着我们不能依赖 rollOverEffect 来触发绑定到它的效果。我们必须在 rollOver 事件上调用 effect.play()。

所以这意味着当我们使用 Animate 类时，我们还需要改变它：

```
<s:Image rollOverEffect="{glowImage}" rollOutEffect="{unglowImage}"/> 
```

对此：

```
<s:Image rollOver="glowImage.play()" rollOut="unglowImage.play()"/> 
```

请注意，当使用**多个相关效果**时，最好先在播放效果上调用 end()，然后再对其相关效果调用 play()。

另外，请注意在使用**单个效果**时，如答案中所示，将其反转而不是像这样 gloomAnimation.play(null, true) 结束它。

```
<s:Image rollOver="rollOverAnimation.play()" rollOut="rollOverAnimation.play(null, true)"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:08:48.180

我不知道`AnimateFilter`，但是这个使用简单`Animate`效果的解决方案应该可以很好地工作：

```
<s:Animate id="glowAnimation" target="{glow}" duration="250">
    <s:motionPaths>
        <s:SimpleMotionPath valueFrom="0" valueTo="10" property="blurX"/>
        <s:SimpleMotionPath valueFrom="0" valueTo="10" property="blurY"/>
    </s:motionPaths>
</s:Animate>

<s:Image rollOver="glowAnimation.play()" 
         rollOut="glowAnimation.play(null, true)">

    <s:filters>
        <s:GlowFilter id="glow" blurX="0" blurY="0" />
    </s:filters>
</s:Image> 
```

请注意，我将 和 的初始值`blurX`设置`blurY`为`0`。`4`这是必要的，否则只要您不翻转图像，它将显示默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T16:33:19.353

我使用过渡在 SparkSkin 中进行效果切换。用于模糊光标下的蒙皮项目：

```
<!-- states -->
<s:states>
    <s:State name="up" />
    <s:State name="over" />
    <s:State name="down" />
    <s:State name="disabled" />
</s:states> 

<fx:Declarations>       
    <s:BlurFilter id="aBlurFilter" blurX="0" blurY="0" blurX.over="10" blurY.over="10" quality="{BitmapFilterQuality.HIGH}"  />     
</fx:Declarations>

<s:transitions>  
    <s:Transition fromState="*" toState="over">

            <s:Animate id="BlurFilterTo" 
                target="{aBlurFilter}"
                repeatCount="1"
                duration="500"
                repeatBehavior="reverse"
                >
                <s:SimpleMotionPath property="blurX" valueFrom="0" valueTo="10"/>
                <s:SimpleMotionPath property="blurY" valueFrom="0" valueTo="10"/>
            </s:Animate>

    </s:Transition> 

    <s:Transition fromState="over" toState="*">

            <s:Animate id="BlurFilterFrom" 
                target="{aBlurFilter}"
                repeatCount="1"
                duration="500"
                repeatBehavior="reverse"
                >
                <s:SimpleMotionPath property="blurX" valueFrom="10" valueTo="0"/>
                <s:SimpleMotionPath property="blurY" valueFrom="10" valueTo="0"/>
            </s:Animate>

    </s:Transition> 

</s:transitions> 

<s:BitmapImage id="iconDisplay" filters="{[aBlurFilter]}" /> 
```

# php - One model, one view, one controller. Is there any very simple way to show this in an example?

> ID：12862815
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:53:47.080
> 
> 标签：php, model-view-controller, iis-7

I have searched and read about mvc. I understand MVC. I am only stuck on the beginnings. If I can just get that rolling, I'll be alright to continue. But as soon as I get going the writer throws in something they don't explain. Example, they will show a model extends some class, but they never show you that class or don't explain it. I know this has been asked a bunch on SO, but it seems to degrade into complexity too fast.

Is it possible to just have one model, one controller, and one view and show that as an example? Am I making it too simple?

I have looked at various premade frameworks, codeigniter, wigbi, skinnymvc, etc. I do not want to use them right now. I understand OOP and OOD. I just can't put this together for whatever reason. Thanks for anything that shows a model, a controller, a view, one system, three pages, that isn't secretly three gigantic pages that are masquerading as simple, maybe just a select * from users. I am trying to use PDO if that matters.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:59:32.527

Model is not an object or a class, but a layer. It is one of two layers, other being presentation layer (which contains most notably controllers and views). The simplest example would be something like:

```
$serviceFactory = new ServiceFactory( $pdo );
$view =           new FooView( $serviceFactory, $pathToTempaltes );
$controller =     new FooController( $view, $serviceFactory );

$controller->someCommand();
$view->produceResponse(); 
```

This example assumes extremely simplified model layer, with no abstraction separating domain objects and data abstraction structures.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:57:50.853

Think of it as 3 sheets of paper stacked in front of each other. The front piece of paper (view) shows the user interface, the back piece of paper (model) is getting information from the database, and the middle piece of paper (controller) is relaying information from the back piece of paper to the front piece of paper.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:03:47.827

Simplest possible example. Do not build an application on this.

```
function model() {
      return array('some'=>'random','prefix'=>'Hello');
}

function view($data) {
      header('content-type: text/html;charset=utf-8');
      echo "<html><head>title</head><body>",htmlspecialchars($data['greeting']),"</body></html>";
}
function controller() {
      $name = $_GET['name'];
      $modeldata = model();
      $viewdata = array('greeting'=> "{$modeldata['prefix']} {$name}");
      view($viewdata);
}

controller(); 
```

# apache-flex - 具有动态动画的多层 SWF

> ID：12862817
> 
> 赞同：3
> 
> 时间：2012-10-12T15:53:55.390
> 
> 标签：apache-flex, animation, flash

我是 Flash 新手，我试图做以下事情：我需要能够在单个文件（例如 SWF）中运行几层动画（图像序列），这将由 Flex 动态加载和访问 - 我需要在运行时更改内容（图像序列）以自定义我的动画。

在这种情况下，最好的方法是什么？

这是正确的方向吗？

我是否应该考虑为每个动画创建一个 SWF 并将其动态加载到我的分层 SWF 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:51:03.187

当您说您需要调整图像序列时，您的意思是自定义各个帧的顺序，还是只是在一组设置序列之间进行选择？

如果是前者，答案会更深入一点，如果是后者并且没有太多，你最好导出为 SWF，甚至作为视频文件来压缩它们，然后加载它们在动态。如果它们足够小而不会显着增加 SWF 的权重，则可以将它们导出为 SWC 中的 MovieClip，并直接在代码中创建它们的实例，而无需加载它们。

希望这会有所帮助（抱歉，如果上述任何内容令人困惑！） - 您能否详细说明您要实现的目标？

# javascript - jQuery Dialog 不响应键盘按下

> ID：12862823
> 
> 赞同：3
> 
> 时间：2012-10-12T15:54:19.720
> 
> 标签：javascript, asp.net, vb.net, jquery-ui

我有一个 jQuery 确认对话框，当用户按下时不会触发与默认按钮关联的事件`Enter`；当我使用鼠标时，按钮的行为符合预期。

当我按下回车键时，默认按钮（“取消”）**会突出显示，但没有其他任何反应。**

这是对话框：

![在此处输入图像描述](../Images/c1f4995fb97f9f0551599c92b3fb8b77.png)

这是产生上述对话框的代码：

```
$(document).ready(function () {

    $('#m_btnNext').click(function (e) {
            var my_messages = 'warning';
            if (my_messages.length > 0) {
                e.preventDefault();
                $('#dialog-confirm-withdraw').html(my_messages);
                $("#dialog-confirm-withdraw").dialog("open");
                return false;
            }
            return true;    
            });

        var cascadeConfirmWithdrawMarkup = "<div id='dialog-confirm-withdraw' title='Withdraw'><p>Set on build</p></div>";
        $(cascadeConfirmWithdrawMarkup).appendTo('body').hide();

        $('#dialog-confirm-withdraw').dialog({ title: '<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>Withdraw Warnings',
            width: 400,
            height: 175,
            resizable: false,
            draggable: false,
            modal: true,
            autoOpen: false,
            open: function () {
                $('.ui-dialog-buttonpane button:eq(1)').focus();
            },
            buttons: {
                "Proceed with withdraw": function () {
                    $(this).dialog("close");
                },
                "Cancel": function () {
                    $(this).dialog("close");
                }
            }
        });
}); 
```

以最简单的形式，[这段代码运行良好](http://jsfiddle.net/gRP3P/2/)，但我很难以我的*真实*形式找出罪魁祸首。

我注释掉了所有其他的javascript，所以只存在上面的代码；没有错误记录到控制台；然而什么也没发生。

如果我上面的 js 中没有明显的错误，那么在这个大海捞针中找到针的最好方法是什么？

[受虐狂可以在此处](http://www.o1solution.com/WithdrawForm.zip)下载完整的 html 页面（带有所有 javascript）。我使用 FF 的另存为“网页，完成”来创建该 zip。

请记住，我只是在此表单中添加功能；我没有创建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:35:46.357

在 halcyonCommon.js 中，您有一个名为 KeyListener() 的函数，该函数在文档加载时调用。该函数为 keydown 添加了一个事件侦听器，它似乎正在处理整个文档的转义和输入 keydown 事件：

```
 case KeyCode.Enter:             
            if (el.tagName == "INPUT") {                    
                switch (el.type) {
                    case "checkbox" :
                    case "password" :
                    case "radio" :
                    case "text" : 
                        {   //Check for datebox and timebox, has controller --> onblur before click OK
                            if (el.Controller && el.Controller.onblur)
                                el.Controller.onblur({target : el});

                            return oThis.clickAction(oThis._DefaultButton, e); 
                        }
                    break;                      
                    case "file" ://ThamHNguyen, added 14-NOV-06
                        return oThis.clickAction(oThis._DefaultButton, e);
                        break;

                    default:
                        return true;
                }
            } else if (el.tagName == "SELECT") {
                return oThis.clickAction(oThis._DefaultButton, e);              
            } else if (el.tagName == "HTML" || el.tagName == "BODY" || el.tagName == "TD") { //"TD" : on IE only
                return oThis.clickAction(oThis._DefaultButton, e);              
            } else if (el.tagName == "TEXTAREA" || el.tagName == "A" ) {
                return true;
            } else {
                return false; //Prevent default button of IE
            } 
```

看到最后一个 else 案例了吗？删除它可以解决问题，但这可能会导致程序中其他地方出现不良行为。如果是这样，您需要在此行中添加第三种可能的情况以返回 true（因此允许正常行为）：

```
} else if (el.tagName == "TEXTAREA" || el.tagName == "A" ) 
```

例如：

```
} else if (el.tagName == "TEXTAREA" || el.tagName == "A" || el.tagName == "SPAN" ) 
```

...虽然这可能不够具体。

# wordpress - 无论如何让 SVG 在 IE 7 或 8 中呈现？如果没有，是否有一个好的后备解决方案？

> ID：12862824
> 
> 赞同：0
> 
> 时间：2012-10-12T15:54:20.137
> 
> 标签：wordpress, internet-explorer, svg

我刚刚在我的网站上进行了一些最终测试，其中一个核心组件是主页上的交互式地图。我加载了 XP 和 IE 8 和繁荣，没有显示。我现在明白 SVG 在 IE 9 之前不受支持，但我知道我的很多客户将在 7 和 8 上陷入黑暗时代。

1）有没有办法让我的交互式地图在 7 和 8 中工作？

2）如果没有，是否有任何退路？所以如果它不起作用，那么它会显示其他东西吗？

我正在使用 Wordpress 的高级插件来生成我的地图[http://codecanyon.net/item/mapsvg-interactive-vector-maps/2547255](http://codecanyon.net/item/mapsvg-interactive-vector-maps/2547255)

提前感谢您的任何帮助/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:59:31.123

所以看看这里的 Modernizr，我发现了这个：

[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

[http://code.google.com/p/svgweb/](http://code.google.com/p/svgweb/)

Modernizr 利用 svgweb，它利用 Flash 后备。因此，如果您使用 Modernizr，它的工作原理是您可以检查他们的浏览器是否支持 svg，如果不支持，那么您可以使用 svgweb 后备，大多数人都有 Flash 或 HTML5。

但无论如何，Modernizr 网站显示了一个可能的后备列表，我会推荐上面提到的 Flash。但是您可能想尝试所有这些，看看哪一个效果最好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:19:47.573

你最好的选择可能是使用像[Raphaël](http://raphaeljs.com)这样的库来绘图。这将为旧版 IE 生成 VML，为其他所有人生成 SVG。否则你很可能需要依赖插件。

# api - 使用 Youtube Javascript API 处理多个视频

> ID：12862826
> 
> 赞同：3
> 
> 时间：2012-10-12T15:54:21.217
> 
> 标签：api, youtube

我正在尝试找到一种方法来使用 Youtube API 来拥有多个视频，每个视频都在自己的隐藏 div 中，每个视频都由相应的缩略图调用。我很难找出如何让曾经隐藏的 div 的关闭按钮也停止该特定视频。我只能让一个做对，另一个不会。我的代码如下：

```
// 2\. This code loads the IFrame Player API code asynchronously.
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// 3\. This function creates an <iframe> (and YouTube player)
//    after the API code downloads.
var player;
function onYouTubeIframeAPIReady() {    
  player1 = new YT.Player('popupVid1', {
    height: '408',
    width: '725',
    videoId: '6Bp1c3-AeXQ',
    playerVars: {
      wmode: "opaque"
    },
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    }
  });

  player2 = new YT.Player('popupVid2', {
    height: '408',
    width: '725',
    videoId: '6Bp1c3-AeXQ',
    playerVars: {
      wmode: "opaque"
    },
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    }
  });
}

// 4\. The API will call this function when the video player is ready.
function onPlayerReady(event) {
  event.target.playVideo();
}

// 5\. The API calls this function when the player's state changes.
//    The function indicates that when playing a video (state=1),
//    the player should play for six seconds and then stop.
var done = false;
function onPlayerStateChange(event) {
  if (event.data == YT.PlayerState.PLAYING && !done) {
    setTimeout(stopVideo,loop);
    done = true;
  }
}

function stopVideo1() {
  player1.stopVideo();
}

function stopVideo2() {
  player2.stopVideo();
} 
```

# python - R_PPC_REL24 重定位超出范围

> ID：12862830
> 
> 赞同：6
> 
> 时间：2012-10-12T15:54:33.617
> 
> 标签：python, c, gcc, swig, powerpc

我正在开发嵌入式 powerpc (e500v2) 平台。我正在使用 gcc 4.6.3 和 eglibc 2.13 进行交叉编译。有一个在目标上编译和加载的 swig 库。当它在 python 中加载时，我在回溯中收到此错误：

```
ImportError: /opt/load/lib/libISSDcn.so: R_PPC_REL24 relocation at 0x0ddc99c0 for symbol `longjmp' out of range 
```

我以前在这个库上遇到过困难，我正在从目标上的 python 2.5 迁移到 2.7。当我最初尝试编译这个库时，我在编译时遇到重定位错误或操作数超出范围错误，具体取决于我使用的标志。我切换到 gcc 4.6.3，现在它可以构建，但是在加载时出现此错误。

我试图理解这个错误，但到目前为止，我对它的确切含义以及如何修复它一无所知。我知道由于某种原因找不到符号，但我不明白为什么或如何修复它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T16:25:20.450

重`R_PPC_REL24`定位用于 24 位相对偏移。这种类型的重定位不应该出现在动态重定位表中（这些是用于可加载对象内部的引用，而不是它们之间的引用，因为库可以加载到相隔超过 16 MiB 的地址）。

默认情况下，编译器会尽可能生成这些重定位，因为这比使用完整的 32 位地址要小得多且速度要快得多，但是对于动态链接，需要将完整地址用于外部可见符号和生成的 PIC/GOT 条目。

检查该`-fPIC`标志是否用于构建库，并且链接器是否也被通知它正在构建一个共享对象（通常是通过`-shared`或`-Bshared`）。

# c# - 表达式树的部分应用

> ID：12862831
> 
> 赞同：3
> 
> 时间：2012-10-12T15:54:34.380
> 
> 标签：c#, expression-trees, c#-5.0

我有以下形式的表达式：

```
Expression<Func<T, bool>> predicate = t => t.Value == "SomeValue"; 
```

是否可以创建此表达式的“部分应用”版本：

```
Expression<Func<bool>> predicate = () => t.Value == "SomeValue"; 
```

NB 这个表达式实际上从未被编译或调用，它只是被检查以生成一些 SQL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T17:02:16.760

这可以通过编写自定义 ExpressionVisitor 并将参数替换为您在闭包中捕获的常量表达式来轻松实现：

```
public class Foo
{
    public string Value { get; set; }
}

public class ReplaceVisitor<T> : ExpressionVisitor
{
    private readonly T _instance;
    public ReplaceVisitor(T instance)
    {
        _instance = instance;
    }

    protected override Expression VisitParameter(ParameterExpression node)
    {
        return Expression.Constant(_instance);
    }
}

class Program
{
    static void Main()
    {
        Expression<Func<Foo, bool>> predicate = t => t.Value == "SomeValue";
        var foo = new Foo { Value = "SomeValue" };
        Expression<Func<bool>> result = Convert(predicate, foo);

        Console.WriteLine(result.Compile()());
    }

    static Expression<Func<bool>> Convert<T>(Expression<Func<T, bool>> expression, T instance)
    {
        return Expression.Lambda<Func<bool>>(
            new ReplaceVisitor<T>(instance).Visit(expression.Body)
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:07:34.253

我认为这应该有效：

```
Expression predicate2 = Expression.Invoke(predicate, Expression.Constant(new T() { Value = "SomeValue"}));
Expression<Func<bool>> predicate3 = Expression.Lambda<Func<bool>>(predicate2); 
```

不知道这是否易于解析以生成 SQL（它在编译时工作 - 我试过）。

# iphone - Facebook 登录错误 iOS 应用程序

> ID：12862832
> 
> 赞同：1
> 
> 时间：2012-10-12T15:54:36.833
> 
> 标签：iphone, ios, facebook, facebook-graph-api, testflight

我的 iOS 应用程序允许我使用自己的 Facebook 帐户成功登录。但是当我在试飞中将它发送给朋友时，应用程序会下载，但是当他按下连接到 Facebook（在我的模拟器和个人设备上运行）时，它不会让他登录。甚至没有给他选项到，只是吐出一个错误（com.facebook.sdk 错误 2）。我错过了什么？什么会导致它对我有用，但对其他人不起作用？我只是在这里寻找一个一般性的答案，因为我遵循了所有的 facebook 教程，我无法想象会出现什么样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:24:57.977

我刚刚发现了问题。应该非常明显，但是作为开发新手，我没有意识到我需要将沙盒设置更改为禁用，以便允许其他人通过我的应用程序访问 facebook。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:39:04.693

当您的应用程序未正确验证时会弹出此错误。

您需要在所有地方保持您的 BundleId 相同。

将您在 Facebook 上注册的应用程序中的 bundleId 更改为 com.asdad.casd 而不是 < teamId >.com.asdad.casd

# ios - MKMapView 观察者

> ID：12862838
> 
> 赞同：0
> 
> 时间：2012-10-12T15:54:55.683
> 
> 标签：ios, xcode

我以这种方式向 60 个 MKMapViews 添加了一个观察者：

```
[mapView2.userLocation addObserver:self
                                    forKeyPath:@"location"
                                       options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld)

                                       context:NULL]; 
```

...

```
-(void)observeValueForKeyPath:(NSString *)keyPath  
                 ofObject:(id)object  
                   change:(NSDictionary *)change  
                  context:(void *)context {  

if ([self.mapView isUserLocationVisible]) { 

    static dispatch_once_t once;
    dispatch_once(&once, ^ { 
        // Code to run once

    MKCoordinateRegion mapRegion;   
    mapRegion.center = mapView.userLocation.coordinate;
    mapRegion.span.latitudeDelta = 0.01;
    mapRegion.span.longitudeDelta = 0.01;

    [mapView setRegion:mapRegion animated: YES];
    // and of course you can use here old and new location values

        });

    for (MKMapView *map in mapViewArray)
    {

        if ([map isUserLocationVisible]) { 

                // Code to run once

                MKCoordinateRegion mapRegion; 

            CLLocationCoordinate2D coordinate = [[map.annotations lastObject] coordinate];

                mapRegion.center = coordinate;
                mapRegion.span.latitudeDelta = 0.01;
                mapRegion.span.longitudeDelta = 0.01;

                [map setRegion:mapRegion animated: YES];
                // and of course you can use here old and new location values

        }
}}
} 
```

从那时起，我看到很多内存被占用。这会占用大量内存吗？如何删除 viewDidUnload 中的观察者？

# .net - 针对 DbContext 使用聚合扩展方法的查询

> ID：12862843
> 
> 赞同：0
> 
> 时间：2012-10-12T15:55:06.697
> 
> 标签：.net, linq, entity-framework, aggregate-functions, expression-trees

我有一个`MockDataStore`返回一个`List<Task>`. 然后我会使用`Aggregate`扩展方法来查询该列表。所以我正在做一个 LINQ-to-Objects 查询，它可以很好地完成这项工作。现在我已经用一个继承`DbContext`类的类替换了我的模拟数据存储，相同的查询不再起作用，因为我不能使用具有主体的 lambda 表达式，因为它不能转换为表达式树。那么有没有办法绕过它并且仍然在 SQL 中完成聚合并避免在内存中进行聚合？下面是我的代码：

```
 //List<Task> tasks = MockDataStore.GetData()
        //    .Aggregate(new List<Task>(), (accumulator, treaty) => { accumulator.AddRange(treaty.Tasks); return accumulator; })
        //    .Where(x => x.AssignedTo.Equals(companyId) && x.StatusId == statusId).ToList();

        using (SCGREDbContext context = new SCGREDbContext())
        {
            List<Task> tasks = context.Treaties.Aggregate(new List<Task>(), (accumulator, treaty) => { accumulator.AddRange(treaty.Tasks); return accumulator; })
                                .Where(x => x.AssignedTo.Equals(companyId) && x.StatusId == statusId).ToList();
            return tasks;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:22:52.003

你到底为什么要使用`Aggregate()`？我认为你的`Aggregate()`电话相当于这个电话[`SelectMany()`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)：

```
context.Treaties.SelectMany(treaty => treaty.Tasks) 
```

# android - ListActivity 的奇怪行为

> ID：12862852
> 
> 赞同：0
> 
> 时间：2012-10-12T15:55:24.717
> 
> 标签：android

我对 ListActivity 中链接的 ListView 中的 ViewImage 有一个奇怪的行为。

所以，我有列表活动，其列表由 3 个文本字段和一个图像组成。

```
 <TextView android:id="@+id/me_games_won"
     android:textSize="16sp"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>

<TextView android:id="@+id/gamesmate_username"
     android:textSize="16sp"
     android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>

 <TextView android:id="@+id/him_games_won"
     android:textSize="16sp"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>

 <ImageView
    android:id="@+id/imageActionHomepage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/im_completed" />
</LinearLayout> 
```

我的适配器着眼于根据某些标准更改图像。我有以下代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
        // assign the view we are converting to a local variable

        View v;

        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.homepage_listitem, null);

        /*
         * Recall that the variable position is sent in as an argument to this method.
         * The variable simply refers to the position of the current object in the list. (The ArrayAdapter
         * iterates through the list we sent it)
         * 
         * Therefore, i refers to the current Item object.
         */
        JSONGame i = (JSONGame) objects.get(position);

        if (i != null) {
            // This is how you obtain a reference to the TextViews.
            // These TextViews are created in the XML files we defined.
            TextView tt = (TextView) v.findViewById(R.id.me_games_won);
            TextView ttd = (TextView) v.findViewById(R.id.gamesmate_username);
            TextView mt = (TextView) v.findViewById(R.id.him_games_won);
            ImageView iv = (ImageView) v.findViewById(R.id.imageActionHomepage);

            // check to see if each individual textview is null.
            // if not, assign some text!
            if (tt != null) {
                tt.setText(Long.toString(i.getScore()));
            }
            if (ttd != null) {
                ttd.setText(i.getGamemateUsername());
            }
            if (mt != null) {
                mt.setText(Long.toString(i.getGamemateScore()));
            }
            if (i.getAction().equals(JSONGame.GAME_NONE))
                iv.setImageResource(R.drawable.im_completed);
            else if (i.getAction().equals(JSONGame.GAME_ACCEPT)) {
                iv.setOnClickListener(new HomepageMenuAdapter(this.activity, position, R.drawable.im_accept));
                iv.setImageResource(R.drawable.im_accept);
            } else if (i.getAction().equals(JSONGame.GAME_WAITING))
                iv.setImageResource(R.drawable.im_awaiting);
            else
                iv.setOnClickListener(new HomepageMenuAdapter(this.activity, position, R.drawable.im_continue));
                iv.setImageResource(R.drawable.im_continue);
        }

        // the view must be returned to our activity
        return v;
    } 
```

列表框中显示的图像是随机的，但通常等于最后一行。我每次都对行进行膨胀，以确保创建了该行的新实例。显示的图像不是布局文件中设置的图像。

干杯。大卫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:07:11.697

看起来您缺少最后`else`一段的大括号：

```
 :
    } else if (i.getAction().equals(JSONGame.GAME_WAITING))
            iv.setImageResource(R.drawable.im_awaiting);
    else { // <-- missing
            iv.setOnClickListener(new HomepageMenuAdapter(this.activity, position, R.drawable.im_continue));
            iv.setImageResource(R.drawable.im_continue);
    } // <-- missing
    : 
```

# asp.net-mvc - 我可以在 Razor 视图中访问 C# 枚举吗？

> ID：12862856
> 
> 赞同：6
> 
> 时间：2012-10-12T15:55:33.090
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有以下内容：

```
namespace Storage.Constants.References {
    public enum RoleType {
        Guest = 1,
        User = 2,
        Admin = 3,
        Super = 4
    }
} 
```

在我的 web.config 中，我添加了：

```
<add namespace="Storage.Constants.References" /> 
```

但是，在我下面的视图中，我仍然没有得到 RoleType 的任何智能感知，而且它似乎不知道它是什么：

```
@model WebUx.ViewModels.BaseViewModel
@{ Layout = "~/Views/Shared/_Layout.cshtml"; }
@section status {

    @if (Model.Role >= RoleType.Admin)
    { 
```

但是，如果我将其更改为：

```
@if (Model.Role >= Storage.Constants.References.RoleType.Admin) 
```

如果没有我指定“Storage.Constants.References”，它应该不起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T15:58:00.823

您是否尝试将 namspace 添加到剃刀视图？

```
@using Storage.Constants.References 
```

此外，如果您将其添加到 web 配置文件中，请确保添加到**Views**文件夹中的 webconfig，而不是根级别的 web 配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-24T02:39:58.703

在 Blazor WebAssembly 剃须刀页面中，输入 @using namespac

```
@using Yoyo.Shared.Enum 
```

在剃刀页面中使用您的枚举

```
@if (participant.State == TestState.Started.ToString())
{ } 
```

在 C# 中，命名空间 Yoyo.Shared.Enum 中的枚举

```
namespace Yoyo.Shared.Enum
{
    public enum TestState
    {
        NotStarted = 0,
        Started = 1
    }
} 
```

# authentication - ZK 架构：WAN 中的 Zookeeper 客户端

> ID：12862858
> 
> 赞同：1
> 
> 时间：2012-10-12T15:55:35.990
> 
> 标签：authentication, client-server, apache-zookeeper, wan

ZK Gurus 的 Zookeeper 架构问题：

我使用 zookeeper 来管理到工作机器云的消息传递。目前，控制消息的应用程序服务器和工作人员位于同一基础架构（网络）中。我正在考虑允许客户端从任意位置与网络外的这些服务器进行通信。我已阅读有关[Zookeepers ACL 和身份验证功能](http://zookeeper.apache.org/doc/r3.1.2/zookeeperProgrammers.html#sc_ACLPermissions)的信息，但我注意到摘要以明文形式发送密码。我会担心保护套接字连接并防止外部攻击。我在网上没有看到任何东西告诉我这*不是*可以/不应该使用 Zookeeper 完成的事情。

这是 Zookeeper 的通用架构吗？有什么建议吗？我是否为这种类型的工作找错了树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:51:28.870

如果您没有安全网络 (VPN)，那么出于所指出的原因，您不应该这样做。您可以使用 kerberos 插件在一定程度上缓解该问题，这将保护身份验证和授权，但您仍然无法获得机密性（加密）。你真正需要的是 SSL。现在已经设置好了，以便可以实现 SSL 支持，但是仍然需要编写代码 :)

# runtime-error - 没有要处理 endeca 的日志文件

> ID：12862859
> 
> 赞同：2
> 
> 时间：2012-10-12T15:55:37.000
> 
> 标签：runtime-error, endeca, reportgenerator

我想用 endeca 创建一个日记报告，所以我的日志服务器在 15010 [端口] 上运行，但是当我启动 [WeeklyReportGenerator] 时似乎有问题我认为因为我的日志服务器有错误，我检查日志，这是错误：

```
Oct 12, 2012 10:19:17 AM com.endeca.forge.base.Pipeline$Engine$1 handle
WARNING: Error in pipeline: No log files to process
Oct 12, 2012 10:19:17 AM com.endeca.rg.components.input.FileSystemMultiInput$Engine$Statistics log
INFO: LogFileInput/FileSystemInput/com.endeca.rg.components.input.FileSystemMultiInput: Progress: 1/1 (100%), 0:00:00 remaining
Oct 12, 2012 10:19:17 AM com.endeca.rg.ReportGenerator main
SEVERE: Unable to proceed
Pipeline execution interrupted by exception
No log files to process
java.lang.RuntimeException: No log files to process
    at com.endeca.rg.components.input.LogFileInput$Substitution$1$Engine.portClosed(LogFileInput.java:269) 
```

关于出了什么问题的一些线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-13T15:26:55.740

报告过程需要日志文件才能生成报告。默认情况下，不会向日志服务器发送任何日志消息。

如果您查看橙色参考应用程序 (http://:8006/endeca_jspref )，您会发现它确实实现了日志记录。如果您查看 logging_functions.jsp，您可以看到如何发送日志消息的良好基本实现 ( C:\Endeca\ToolsAndFrameworks\11.1.0\reference\endeca_jspref\logging_functions.jsp )

如果您使用的是 Assembler API，它将为您处理大部分日志记录。确保您配置了正确的主机名和端口。如果您需要扩展或替换日志记录，请在 assembler-context.xml 中查找 com.endeca.infront.navigation.event.LogServerAdapter。

# jquery - jQuery Resize Div 响应式

> ID：12862867
> 
> 赞同：4
> 
> 时间：2012-10-12T15:55:52.097
> 
> 标签：jquery, responsive-design

我正在尝试制作一个脚本，该脚本将完成高于某个分辨率的等高函数。

一旦低于该分辨率，我希望脚本在等高列在网站的移动版本上消失时关闭。

我也希望在调整大小时执行此操作。到目前为止，这是我的代码。这根本行不通。

拉伸功能确实并且已经在检查宽度功能之外进行了测试。

这是我的代码：

**原始拉伸功能**

```
$(document).ready(function () {
    var $stretch = $(".eq");
    $stretch.animate({ height: $stretch.parent().height() }, 300 );
}); 
```

**调整不起作用的功能**

```
$(document).ready(function() {
    // Optimalisation: Store the references outside the event handler:
    var $window = $(window);
    var $stretch = $("#narrow")
    var $stretch2 = $(".eq")

    function checkWidth() {
        var windowsize = $window.width();
        if (windowsize > 440) {
            //if the window is greater than 440px wide then turn on jScrollPane..
            $stretch.animate({ height: $stretch.parent().height() }, 800 );
            $stretch.animate({ height: $stretch2.parent().height() }, 300 );                
        }
    }
    // Execute on load
    checkWidth();
    // Bind event listener
    $(window).resize(checkWidth);
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:05:36.193

我强烈建议使用 CSS 而不是 jQuery 来做这样的事情。响应式 UI 可以通过媒体查询来处理，如下所示：

```
@media screen and (max-width: 1200px) {
    body{ width:1000px; }
}

@media screen and (max-width: 440px) {
    body{ width:440px; }
} 
```

有很多很棒的工具可以简化你，其中最受欢迎的工具之一是[Twitter Bootstrap](http://twitter.github.com/bootstrap/scaffolding.html#responsive)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T16:08:02.600

对于 jquery 部分

```
$(window).resize(function() {
    // do your stuff here

    checkWidth();
}); 
```

如果您将媒体查询与 js 组合使用，请记住，`$(window).width()`由于滚动条，媒体查询的宽度和宽度会有所不同。

# matlab - 是否可以从命令行在正在运行的 Matlab 实例中打开文件？

> ID：12862871
> 
> 赞同：9
> 
> 时间：2012-10-12T15:55:57.653
> 
> 标签：matlab

如果我已经有一个正在运行的 Matlab 实例，是否可以从 Matlab 应用程序外部告诉在 Matlab 编辑器中打开一个文件？我想知道是否有可能做这样的事情。

启动 Matlab 实例

```
$ ./matlab 
```

使用已经运行的 Matlab 实例打开文件进行编辑：

```
$ matlab_open_file.sh theFile.m 
```

GUI 变体是从文件夹中拖动文件，然后将其放到 Matlab 图标上（这实际上在 OS X 下有效）

*注意*我知道您可以启动 Matlab 并让它立即执行命令（您可以使用它在启动时启动编辑器）。这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-23T17:52:56.203

我为 Linux 编写了一个解决方法（在具有 R2014a 和 R2014b 的 Mint 17.1 上运行），然后我将其与`.fig`和`.m`文件扩展名相关联。请注意，这需要`xdotool`安装，并且按键设置为 Windows 快捷键（默认情况下，MATLAB 在 Linux 上附带 Emacs 快捷键，但根据我的经验，几乎每个人都会更改它们）。这有一个限制，即当前在命令行上的任何文本都将被删除，并且 MATLAB 必须在一小段时间内不能失去焦点。但是在没有更强大的解决方案的情况下，它对我来说已经足够好了。

```
#!/bin/bash

# Hacky way to open a MATLAB figure in an existing instance if there is
# one, and start a new instance if not.

# What are we trying to open?
FILENAME="$@";

# Try to identify the main MATLAB window.
MLWINDOW=$( comm -12\
              <(xdotool search --name MATLAB\ R | sort)\
              <(xdotool search --class "com-mathworks-util-PostVMInit" | sort) )
if [ -z "$MLWINDOW" ]; then
    # MATLAB isn't open; we have to open it to proceed.
    matlab -desktop -r "open('$FILENAME')"
else
    # We use the first existing instance since MATLAB is open
    set -- $MLWINDOW
    # Jump to the command line and erase it
    xdotool windowactivate --sync $1 key --delay 0 "control+0" Escape
    # Put the filename on the command line
    xdotool type --delay 0 "$FILENAME"
    # Select the filename and press ctrl-D to open, then clean up command line
    xdotool key --delay 0 "shift+Home" "control+d" Escape
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:09:51.927

您可以在命令行中键入路径+文件名，如果打开了 matlab 会话，它将在当前的 matlab 会话中打开该文件。

请注意，这仅在您确保 matlab 是打开此类文件的默认程序时才有效。（使用 .m 文件测试）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T08:48:19.590

我修改[了 Aoeuid 的方法](https://stackoverflow.com/a/29830904/3596168])，因为

*   它对我不起作用，因为我重新分配了`Ctrl+0`哪个跳转到命令行（而且我看不到在哪里可以将其设置为另一个值）→我将其替换为“打开文件”对话框（`Ctrl+O`）。
*   我可能想打开不在当前 matlab 路径上的脚本 → 我使用`$PWD/$filename`而不是`$filename`. 您可以使用`open($PWD/$FILENAME)`and`KP_Enter`而不是`$FILENAME`and `shift+Home`/来修改他的版本`control+d`。

这是结果：

```
#!/bin/bash

filename="$1"

# Try to identify the main MATLAB window.
MLWINDOW=$( comm -12\
              <(xdotool search --name MATLAB\ R | sort)\
              <(xdotool search --class "com-mathworks-util-PostVMInit" | sort) )

if [ -z "$MLWINDOW" ]; then
    # MATLAB isn't open; we have to open it to proceed.
    matlab -desktop -r "open('$PWD/$filename')"
else
    ## Activate window:
    xdotool windowactivate --sync $MLWINDOW && \
    ## Press Ctrl+O to open the "open" dialog:
    xdotool key --delay 0 "control+o" && \
    ## Wait for the file dialog to open:
    sleep 0.5 && \
    ## Type the file name including the current directory
    xdotool type --delay 0 "$PWD/$filename" && \
    ## Press enter:
    xdotool key "KP_Enter"
fi 
```

但是，将按键用于自动化过程可能会导致不需要的结果。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-10-07T06:46:03.810

确保将文件夹添加到路径。

然后你去你需要的文件夹。

只需在 Matlab 终端中输入

```
your_program_name 
```

然后你的程序就会运行。

# ruby-on-rails - Ruby on Rails：实现搜索。我应该如何为许多参数格式化我的路线？

> ID：12862872
> 
> 赞同：0
> 
> 时间：2012-10-12T15:55:59.870
> 
> 标签：ruby-on-rails, search, routes

我正在构建我的第一个 Ruby on Rails 应用程序，我想以“Rails”的方式来完成它，使我的应用程序尽可能地 RESTful。

该应用程序围绕搜索功能展开，用户填写一个定义他们正在寻找的内容的表单，提交它，然后翻阅他们的结果，查看他们感兴趣的项目。根据我对 REST 的理解，听起来我应该将我的参数编码到我的结果页面的 URL（？）

如果我的基本路线是：

`match "search" => "search#index"`

我的搜索结果的基本路线是：

`match "search/results" => "search#results"`

为我的搜索实现路由/URL/参数的最佳方式是什么？解决方案必须：

*   支持许多参数（30+），其中任何一个都可以是可选的。
*   支持分页：可能会有很多结果。
*   坚持“铁轨之路”！

Rails 专家的任何建议/提示都会非常有帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:39:21.873

对于分页：您可以使用类似`will_paginate`或`kaminari`

关于搜索参数：Rails 会将请求的查询字符串中的任何内容放入`params`控制器和视图中可访问的变量中。

您正在尝试做的事情（命名 url 搜索和搜索/结果）并不真正符合“宁静的路线”。不过，这就是你所要求的。

```
scope :search do 
  get 'search' => 'search#index' 
  get 'search/results' => 'search#show' 
end 
```

会产生

```
 search GET            /search(.:format)                search#index
  search_results GET    /search/results(.:format)        search#show 
```

要保持安静，请尝试辨别您要搜索的内容...对于产品，结果将使用 显示`Products#index`。

如果您想扩大搜索范围，我建议使用`Search#new`和`Results#index`。后面的这些选项似乎更 RESTful。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:45:42.080

正如您可能预期的那样，将这 30 个参数作为 url 参数传递可能不是最好的方法。
我会考虑为他们创建一个配置模型（和表），并专注于能够更新这个模型的表单。这将使在恕我直言中存储搜索、进行多次搜索、验证搜索变得更加容易。将此模型与实际模型结合使用，以进行搜索。

对于分页，正如 rthbound 所说，使用[will_paginate](https://github.com/mislav/will_paginate/wiki)或[kaminari](https://github.com/amatsuda/kaminari)。

# php - Zend PDF 表格助手

> ID：12862875
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:56:13.407
> 
> 标签：php, zend-framework, helper, zend-framework2, zend-pdf

是否有任何 Zend Helper 可以制作带有表格的 PDF 文档。我需要传递我的查询结果，助手将返回一个 PDF 文档，其中包含表格中的数据。就像下面的 Csv Helper 一样。

我在这里所做的是我将给定的课程放入

```
Zend/Controller/Action/Helper 
```

而不是在我的行动中我这样做

```
 public function getcsvAction() {
    $this->_helper->layout()->disableLayout();
    $this->_helper->viewRenderer->setNeverRender();
    try{
        $clModel = new Application_Model_DbTable_Mytable();
        $select = $clModel->clCSV());
        $this->_helper->Csv($select, "genertadfile name");
    }catch(Exception $e){
        echo 'Oops! Something went wrong.';
    }
    exit;
 } 
```

这堂课

```
 <?php

// Zend_Controller_Action_Helper_Csv

class Zend_Controller_Action_Helper_Csv extends Zend_Controller_Action_Helper_Abstract{

public function direct($aryData = array(), $strName = "csv", $bolCols = true){
    $this->printExcel($aryData, $strName, $bolCols);
     }

  public function printExcel($aryData = array(), $strName = "csv", $bolCols = true){
          if (!is_array($aryData) || empty($aryData)){  exit(1); }

// header
    header('Content-Description: File Transfer');
    header('Content-Type: text/csv; charset=utf-8');
    header("Content-Disposition: attachment; filename=" . $strName . "-export.csv");
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-control: private, must-revalidate');
    header("Pragma: public");

    if ($bolCols){
      $aryCols = array_keys($aryData[0]);
      array_unshift($aryData, $aryCols);
       }
      ob_start();

    $fp = fopen("php://output", "w");
     if (is_resource($fp)){
   foreach ($aryData as $aryLine)  {
    fputcsv($fp, $aryLine, ',', '"');
        }
$strContent = ob_get_clean();

   $strContent = preg_replace('/^ID/', 'id', $strContent);
   $strContent = utf8_decode($strContent);
   $intLength = mb_strlen($strContent, 'utf-8');

header('Content-Length: ' . $intLength);
echo $strContent;
    exit(0);
}
ob_end_clean();
exit(1);
 }
   }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:53:36.313

在zend framework 2上有一个pdf的官方模块：[zendpdf](https://github.com/zendframework/ZendPdf)

`zendframework/zendpdf`您可以通过添加到您的 composer.json 文件来安装它。

它还没有完成，这就是为什么你找不到任何关于它的信息。您可以在[此处](https://github.com/zendframework/zf2-documentation/tree/master/docs/languages/en/modules)找到以前的文档...只需查找`zend.pdf.*.rst`文件。

DOMPDF 库也有一个 ZF2 模块。[在此处](http://raymondkolbe.com/2012/07/01/dompdf-in-zf2/)查找更多信息。您可以[在此处找到](https://github.com/raykolbe/DOMPDFModule)代码。`"dino/dompdf-module": "dev-master"`通过添加到您的 composer.json 文件轻松安装。

**添加：**

`DOMPDF`可以这样使用：

```
public function dompdfAction()
{
    return new DOMPDFModule\View\Model\PdfModel\PdfModel(
        array(), // Variable assignments per Zend\View\Model\ViewModel
        array(
            'fileName' => 'monthly-report', // Optional; triggers PDF download, automatically appends ".pdf"
            'paperSize' => 'a4',
            'paperOrientation' => 'landscape'
        )
    );
} 
```

它将为 dompdfAction 的 viewscript 生成一个 pdf 文件。

`ZendPdf`可以这样使用：

```
public function pdfAction()
{
    $pdf = new \ZendPdf\PdfDocument();

    $pdf->pages[] = ($page = $pdf->newPage(\ZendPdf\Page::SIZE_A4));
    $font = \ZendPdf\Font::fontWithName(\ZendPdf\Font::FONT_HELVETICA);
    $page->setFont($font, 36);
    $page->drawText('<h1>html não funciona...</h1>', 10, 536, 'utf-8');
    $page->drawText('PDF FUNCIONA', 10, 500, 'utf-8');
    $image = \ZendPdf\Image::imageWithPath('public/images/zf2-logo.png');
    $page->drawImage($image, 100, 100, 400, 300);
    $pdf->save("teste.pdf");
} 
```

# silverlight - 如何在 CRM 2011 Silverlight 中创建类似“问卷调查”的表格

> ID：12862876
> 
> 赞同：1
> 
> 时间：2012-10-12T15:56:13.177
> 
> 标签：silverlight, dynamics-crm-2011

我正在为 CRM 2011 创建我的第一个 Silverlight 应用程序，虽然我已经能够从几个不同的实体加载数据，但我不确定在需要时显示数据的最佳方式。

实体是本质上是问卷的各个部分，所以我有部分，问题和回复，我希望它们像

第 1 节

问题 1 答案 1

问题 2 答案 2

...

NEW PAGE（使用寻呼机控制）

第 2 节

问题 1 答案 1

等等。

没有固定数量的部分或问题，但每个问题只有一个答案。

有人可以为我指出正确的方向来使用最佳控制，因为现在我无法立即看到最佳选择。

谢谢

# php - 打印输出问题

> ID：12862877
> 
> 赞同：-1
> 
> 时间：2012-10-12T15:56:14.237
> 
> 标签：php, id3

我正在使用下面的代码打印 MP2 文件的 id3 标签，但输出以这种形式出现

```
Array ( [FileName] => 4.mp3 [TAG] => ID3 [Version] => 3.0 [Title] => &Bahut Khubsurat Ghazal (mr-Jatt.Com) [Album] => 1Loverz Choice (A Khubsurat Ghazal) (www.mzc.in) [Author] => DJ Badboy (mr-Jatt.Com) [Track] => (www.mzc.in) ) 
```

但我想要这样的简单输出

> 文件名 4.mp3 标题 Bahut Khubsurat Ghazal (mr-Jatt.Com) 专辑 1Loverz Choice (A Khubsurat Ghazal) (www.mzc.in) 作者 DJ Badboy (mr-Jatt.Com) 曲目 (www.mzc.in)

我的代码是

```
print_r(tagReader("4.mp3"));
// ------------------------------
function tagReader($file) {
    $id3v23 = array("TIT2","TALB","TPE1","TRCK","TDRC","TLEN","USLT");
    $id3v22 = array("TT2","TAL","TP1","TRK","TYE","TLE","ULT");
    $fsize = filesize($file);
    $fd = fopen($file, "r");
    $tag = fread($fd, $fsize);
    $tmp = "";
    fclose($fd);
    if (substr($tag, 0, 3) == "ID3") {
        $result['FileName'] = $file;
        $result['TAG'] = substr($tag, 0, 3);
        $result['Version'] = hexdec(bin2hex(substr($tag, 3, 1))) . "." . hexdec(bin2hex(substr($tag, 4, 1)));
    }
    if ($result['Version'] == "4.0" || $result['Version'] == "3.0") {
        for($i = 0; $i < count($id3v23); $i ++) {
            if (strpos($tag, $id3v23[$i] . chr(0)) != FALSE) {
                $pos = strpos($tag, $id3v23[$i] . chr(0));
                $len = hexdec(bin2hex(substr($tag, ($pos + 5), 3)));
                $data = substr($tag, $pos, 9 + $len);
                for($a = 0; $a < strlen($data); $a ++) {
                    $char = substr($data, $a, 1);
                    if ($char >= " " && $char <= "~")
                        $tmp .= $char;
                }
                if (substr($tmp, 0, 4) == "TIT2")
                    $result['Title'] = substr($tmp, 4);
                if (substr($tmp, 0, 4) == "TALB")
                    $result['Album'] = substr($tmp, 4);
                if (substr($tmp, 0, 4) == "TPE1")
                    $result['Author'] = substr($tmp, 4);
                if (substr($tmp, 0, 4) == "TRCK")
                    $result['Track'] = substr($tmp, 4);
                if (substr($tmp, 0, 4) == "TDRC")
                    $result['Year'] = substr($tmp, 4);
                if (substr($tmp, 0, 4) == "TLEN")
                    $result['Lenght'] = substr($tmp, 4);
                if (substr($tmp, 0, 4) == "USLT")
                    $result['Lyric'] = substr($tmp, 7);
                $tmp = "";
            }
        }
    }
    if ($result['Version'] == "2.0") {
        for($i = 0; $i < count($id3v22); $i ++) {
            if (strpos($tag, $id3v22[$i] . chr(0)) != FALSE) {
                $pos = strpos($tag, $id3v22[$i] . chr(0));
                $len = hexdec(bin2hex(substr($tag, ($pos + 3), 3)));
                $data = substr($tag, $pos, 6 + $len);
                for($a = 0; $a < strlen($data); $a ++) {
                    $char = substr($data, $a, 1);
                    if ($char >= " " && $char <= "~")
                        $tmp .= $char;
                }
                if (substr($tmp, 0, 3) == "TT2")
                    $result['Title'] = substr($tmp, 3);
                if (substr($tmp, 0, 3) == "TAL")
                    $result['Album'] = substr($tmp, 3);
                if (substr($tmp, 0, 3) == "TP1")
                    $result['Author'] = substr($tmp, 3);
                if (substr($tmp, 0, 3) == "TRK")
                    $result['Track'] = substr($tmp, 3);
                if (substr($tmp, 0, 3) == "TYE")
                    $result['Year'] = substr($tmp, 3);
                if (substr($tmp, 0, 3) == "TLE")
                    $result['Lenght'] = substr($tmp, 3);
                if (substr($tmp, 0, 3) == "ULT")
                    $result['Lyric'] = substr($tmp, 6);
                $tmp = "";
            }
        }
    }
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:59:36.613

这是因为您要返回一个数组。如果要打印出数组元素的内容，则必须遍历数组并打印每个元素，而不是返回整个数组。

就像是：

```
foreach ($results as $key => $value)
    echo $key . " " . $value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:02:02.540

你可以试试

```
foreach ( tagReader("4.mp3") as $name => $value ) {
    printf("<p>%s:%s</p>", $name, $value);
} 
```

# php - 如何重写 wordpress URL 以使用第一个子目录作为查询字符串？

> ID：12862879
> 
> 赞同：0
> 
> 时间：2012-10-12T15:56:22.543
> 
> 标签：php, wordpress, plugins, url-rewriting

如果类别与程序代码匹配，我需要我的 URL 中的第一个子目录重写为查询字符串 URL，即：4 个大写字符，例如 AUBU

例如，我需要：

[http://www.georgiancollege.ca/devprograms/AUBU/](http://www.georgiancollege.ca/devprograms/AUBU/)

重写为：

[http://www.georgiancollege.ca/devprograms/index.php?page_id=16&major=AUBU](http://www.georgiancollege.ca/devprograms/index.php?page_id=16&major=AUBU)

但我不希望它影响当前的 URL，例如

[http://www.georgiancollege.ca/devprograms/a-to-z/](http://www.georgiancollege.ca/devprograms/a-to-z/)

**不应**重写为：

[http://www.georgiancollege.ca/devprograms/index.php?page_id=16&major=a-to-z](http://www.georgiancollege.ca/devprograms/index.php?page_id=16&major=a-to-z)

这是我到目前为止所拥有的，根本不起作用。（基于：[http](http://thereforei.am/2011/10/28/advanced-taxonomy-queries-with-pretty-urls/) ://thereforei.am/2011/10/28/advanced-taxonomy-queries-with-pretty-urls/ ）

```
function eg_add_rewrite_rules() {
global $wp_rewrite;

$new_rules = array(
    '(.+)/?$' => 'index.php?page_id=16&major=' . $wp_rewrite->preg_index(1)
);
$wp_rewrite->rules = $new_rules + $wp_rewrite->rules;
}
add_action( 'generate_rewrite_rules', 'eg_add_rewrite_rules' ); 
```

更新：上面的代码现在重定向到正确的页面，但在那个页面上我无法读取查询字符串，可能是因为 URL 重写查询字符串不在最后一页上......

所以使用，

```
$program = $_GET['major']; 
```

不返回主要代码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:24:33.670

看起来像是 Apache url 重写的 hack。我会用[Mod_Rewrite](http://httpd.apache.org/docs/2.2/rewrite/)来解决这个问题。 至于你的代码，你正在匹配一个不够具体的正则表达式。您只想匹配 4 个大写字符？也许试试这个：

```
'devprograms/([A-Z]{4})/?$' => 'index.php?page_id=16&major=' . $wp_rewrite->preg_index(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:58:27.443

感谢您的输入。

我不得不使用“变通”解决方案，因为它似乎不想工作。

我尝试使用 $wp_query->query_vars 来获取查询字符串数据，而不是像这样使用 $_GET 或 $_POST ：

```
if(isset($wp_query->query_vars['major'])) {
    $program = urldecode($wp_query->query_vars['major']);
} 
```

正如建议的那样：[http](http://www.rlmseo.com/blog/passing-get-query-string-parameters-in-wordpress-url/) : //www.rlmseo.com/blog/passing-get-query-string-parameters-in-wordpress-url/ 但即使页面名称查询变量来自确实存在相同的 URL 重写。

所以我继续...

这是新的 URL 重写：

```
function add_rewrite_rules($aRules) {
  $aNewRules = array('([A-Z]{4})/outline/?$' => 'index.php?pagename=programs&major=$matches[1]');
  $aNewRules2 = array('([A-Z]{4})/?$' => 'index.php?pagename=programs&major=$matches[1]');
  $aRules = $aNewRules + $aNewRules2 + $aRules;
  return $aRules;
}
add_filter('rewrite_rules_array', 'add_rewrite_rules'); 
```

由于我的 URL 重写仍然以更漂亮的方式将程序代码保留在 URL 中，因此我只是获取 REQUEST_URI 并解析出程序代码，如下所示：

```
$parts = explode('/',$_SERVER['REQUEST_URI']);
if (isset($_GET['major'])) {
  $program = $_GET['major']; 
} elseif ($parts[1] == 'devprograms') {
  $program = $parts[2];
} else {
  $program = get_the_title();
} 
```

这说明了链接样式 /devprograms/BUSN 和 /devprograms/programs?major=BUSN

唯一的缺点是我不能在安装中使用 4 个字母名称的其他页面，例如“test”或“page”，因为它们将被重写到以“test”或“page”作为程序代码的程序页面，这不会是实际的程序。这是一个在命名页面时很容易解决的问题。

谢谢，托马斯

# git - 是否有将 GitHub 设置为 Internet 上 .Net 站点的版本控制环境的指南？

> ID：12862880
> 
> 赞同：0
> 
> 时间：2012-10-12T15:56:24.383
> 
> 标签：git, github, github-for-windows

我的公司正在寻找在互联网上工作的版本控制系统，现在它看起来像 Git，可能使用 GitHub 是一个不错的选择。

我们有程序员在我们局域网的办公室内工作，但我们也有远程工作的程序员，所有人都需要访问。我们所有的编码都是在 Visual Studio (2010,2012) 中完成的，因此最好的解决方案是使用它。

理想情况下，我们希望能够在本地系统上克隆我们的存储库，并在我们的开发服务器上自动更新我们的文件，该服务器在 IIS 上运行 .Net Web 应用程序。

带有私有存储库的 GitHub 似乎是我们从网络内部或外部访问文件的好选择，但我找不到让 GitHub 在提交更改时更新开发服务器的方法。

GitHub 并不是这个等式的真正必要部分——它似乎只是通过 Internet 管理任务的好方法。

谁能给我一个很好的指南来完成我们需要的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:33:23.627

也许这会有所帮助

[如何在 IIS 机器上设置 GIT 裸 HTTP 可用存储库](https://stackoverflow.com/questions/51619/how-to-setup-git-bare-http-available-repository-on-iis-machine)

或 [在 Windows 上的 IIS7 下托管 Git 服务器](http://www.jeremyskinner.co.uk/2010/06/25/hosting-a-git-server-under-iis7-on-windows/)

# java - (JTDS) java.sql.SQLException：将数据类型 nvarchar 转换为数字时出错

> ID：12862881
> 
> 赞同：3
> 
> 时间：2012-10-12T15:56:24.160
> 
> 标签：java, sql-server, jtds

我在使用 JTDS 从 SQL Server 2005 数据库中的视图读取时遇到问题，并且在寻找解决方案时遇到了严重问题。

查询只是选择视图中的所有内容：

```
SELECT * FROM encounters_view WHERE patient_id = ? 
```

此行抛出异常：

```
rset = selectAllEncountersByPatientId.executeQuery(); 
```

堆栈跟踪如下：

```
java.sql.SQLException: Error converting data type nvarchar to numeric.
    at net.sourceforge.jtds.jdbc.SQLDiagnostic.addDiagnostic(SQLDiagnostic.java:372)
    at net.sourceforge.jtds.jdbc.TdsCore.tdsErrorToken(TdsCore.java:2820)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2258)
    at net.sourceforge.jtds.jdbc.TdsCore.isDataInResultSet(TdsCore.java:796)
    at net.sourceforge.jtds.jdbc.JtdsResultSet.<init>(JtdsResultSet.java:134)
    at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQLQuery(JtdsStatement.java:483)
    at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.executeQuery(JtdsPreparedStatement.java:776)
    at package_name.ClassName.method(Db_query_class.java:91)
    at package_name.ClassName.main(Main_class.java:36) 
```

查看数据类型：

```
id (unique(numeric(16,0)),not null)
provId (uniqueid(numeric(16,0)),not null)
patId (uniqueid(numeric(16,0)),not null)
mrn (varchar(20),not null)
visitId (uniqueid(numeric(16,0)),not null)
dttm (datetime, null)
apptType (name(varchar(255)),null)
apptStatus (name(varchar(255)),null)
refProvId (uniqueid(numeric(16,0)),not null)
pay (name(varchar(255)),not null)
zip (char(10),not null) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:11:51.223

这很可能是因为您加入了不同数据类型的两列（一个 nvarchar 另一个数字） - 您的 nvarchar 可能包含包含不会转换为十进制的字符的数字（例如“，”或“。”）。

# regex - Notepad++ 正则表达式：查找所有 1 和 2 个字母的单词

> ID：12862883
> 
> 赞同：4
> 
> 时间：2012-10-12T15:56:26.273
> 
> 标签：regex, notepad++

我正在使用 Notepad++ 中包含 200.000 多行的文本文件。每行只有一个单词。我需要删除并删除所有仅包含一个字母的单词（例如：*I*）和仅包含两个字母的单词（例如：*as*）。

我以为我可以像这样通过常规正则表达式，`[a-zA-Z]{1,2}`但我什么都不认识（我正在尝试标记它们）。

我已经完成了手动搜索，并且我知道确实存在该长度的单词，因此只能是我的正则表达式代码错误。任何人都知道如何在记事本++中做到这一点？？？

干杯，
-梅斯蒂卡

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T15:59:52.807

如果您只想删除单词但将行留空，则可以：

```
^[a-zA-Z]{1,2}$ 
```

将其替换为空字符串。`^`并且`$`是行首和行尾的锚点（因为 Notepad++ 的正则表达式在多行模式下工作）。

如果要完全删除这些行，请搜索：

```
^[a-zA-Z]{1,2}\r\n 
```

并替换为空字符串。但是，这在 Notepad++ 6 之前是行不通的，所以要确保你的是最新的。

请注意，您必须替换`\r\n`为文件的特定行尾！

正如 Tim Pietzker 建议的那样，一个独立于平台的解决方案也可以删除空行：

```
^[a-zA-Z]{1,2}[\r\n]+ 
```

一个独立于平台的解决方案，它不会删除空行，而只会删除带有一个或两个字母的行：

```
^[a-zA-Z]{1,2}(\r\n?|\n) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:59:50.200

我不使用记事本++，但我猜这可能是因为你有太多匹配项 - 尝试包括单词边界（你的 exp 将匹配每组 2 个字母）

```
\b[a-zA-Z]{1,2}\b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:00:00.857

您指定的正则表达式应该找到 1 或 2 个字符（即使在 Notepad++ 的查找对话框中），但不是您想的那样。`^`您希望正则表达式确保它从行首开始并以and结束`$`，分别：

```
^[a-zA-Z]{1,2}$ 
```

[Notepad++ 6.0 版](http://notepad-plus-plus.org/news/notepad-6.0-release.html)引入了 PCRE 引擎，因此如果这在您当前的版本中不起作用，请尝试更新到最新版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T16:10:17.850

您似乎使用了不支持显式量词的 Notepad++ 版本：这就是为什么根本没有匹配项（因为`{`和`}`被视为文字，而不是特殊符号）。

解决方案是使用它们更长的替换：

```
\w\w? 
```

...但这只是故事的一部分，因为这个正则表达式将匹配*任何*符号，而不仅仅是简短的单词。为此，您需要这样的东西：

```
^\w\w?$ 
```

# visual-studio-2010 - 在 Visual Studio 的包管理器控制台中使用 git

> ID：12862891
> 
> 赞同：3
> 
> 时间：2012-10-12T15:56:52.757
> 
> 标签：visual-studio-2010, git, github, console, nuget

我正在尝试`git`从 Visual Studio 2010 中的包管理器控制台窗口中使用。大多数`git`命令都按预期运行，但与网络相关的命令除外。

当我尝试`git push origin master`Studio 停止响应时。代码已推送到 github.com 帐户。我注意到`ssh-*`应用程序被触发并开始挂在系统内存中，所以我切换到`https`身份验证。但是工作室仍然没有响应（并且内存中没有`ssh`相关的东西）。

有谁知道如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:00:57.960

有什么理由不能从那里下拉到 MSysGit 并使用包管理器和 git 吗？那将是我的方法。此外，您还可以获得 bash 的所有好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-01T16:52:23.263

您是否在 Windows 凭据管理器中将您的 github 帐户设置为通用凭据？

我现在在我的 Nuget 包管理器上使用 Git 有一段时间了，凭据保存在 Windows 上，没有任何问题。我还在我的包管理器上使用了 posh-git，这对我有很大帮助。

# objective-c - 透明图像覆盖在下方视图

> ID：12862892
> 
> 赞同：1
> 
> 时间：2012-10-12T15:56:55.423
> 
> 标签：objective-c, ios, xcode

我对 iOS 很陌生，并且对子视图及其行为有疑问。我正在尝试在登录基本信息屏幕截图时向用户显示模式屏幕。它有一堆我想在用户登录页面顶部显示的 tet 气泡，以便用户可以获得有关屏幕上不同选项含义的信息。它就像它背后屏幕顶部的透明视图，提供帮助文本覆盖。做这个的最好方式是什么？目前我有一个这个覆盖的类，我在那个类中推送一个视图。但是一旦我在顶部显示图像叠加层，我就无法显示下面的视图。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:08:47.593

此代码应在 imageview 内设置图像，并且通过将 UserInteractionEnabled 设置为 NO 将允许您单击图像下方的内容。

```
UIImageView *iview = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"thanks.png"]];
[iview setFrame:CGRectMake(5,5, iview.frame.size.width, iview.frame.size.height)];
[iview setUserInteractionEnabled:NO];
[self.view addSubview:iview]; 
```

# c# - WPF TreeView 项目更新 - 容器检索

> ID：12862895
> 
> 赞同：0
> 
> 时间：2012-10-12T15:57:02.187
> 
> 标签：c#, wpf, treeview

有点奇怪。

我有一个 Treeview 控件，该控件正在填充客户对象列表。有一个搜索功能可以在树中的某处找到某个对象，其中有一行代码如下。

```
foreach (RbcUICustomer cust in tvQueue.Items)
{
    var dataTVI = tvQueue.ItemContainerGenerator.ContainerFromItem(cust) as TreeViewItem; 
```

树开始关闭，如果您在执行搜索后单步执行代码，如果整个树都关闭，这将为树中的每个客户节点返回一个有效的 TreeViewItem。这很好，你会期待什么。

问题是，如果您先手动打开其中一个节点，然后执行搜索，则上面的搜索循环会到达展开的节点，并且上面的 ItemContainerGenerator 方法返回 null，因此它找不到该项目的容器。

我认为问题与手动扩展节点时我对基础数据所做的操作有关，这在某种程度上会改变它并且不能正确刷新它。扩展节点背后的商业理念是，它从服务层获取客户的客户帐户列表，并以编程方式将它们可视化地添加到树中，然后将节点扩展。但是通过这样做，似乎阻止了上面的代码行能够找到并返回有效的容器。

更新客户的代码有点复杂，但我将在下面粘贴精华。_customerList 是用于保存数据的类数组。

```
ExpandNode(TreeViewItem item)
{
    var cust = item.Header as Customer;
    var task = new Task(() => RunBackgroundThreadToAddAccounts(Customer));
    task.Start();
}

RunBackgroundThreadToAddAccoutns(Customer)
{
    for (var i = 0; i < _customerList.Count; i++)
                {
                    var customer = _customerList[i];

                    if (customer.CustomerId == cust.CustomerId)
                    {
                        customer.Accounts.Clear();
                        customer.Accounts.Add(LoadingAccount);

                        _customerList[i] =  customer;                                   
                        UpdateCustomerCompleted(item, i);
                        break;
                    }
                }
}

 private void UpdateCustomerCompleted(TreeViewItem item, int positionIndex)
        {
            var customer = _customerList[positionIndex];

            GUIHelper.Invoke(() => item.Header = customer);

            if (customer.Accounts.Count == 0)
            {
                customer.Accounts.Add(EmptyAccount);
            }

            GUIHelper.Invoke(() => item.ItemsSource = customer.Accounts);
            GUIHelper.Invoke(() => _treeSelectionHandler.ChangeSelectedState(item));
            GUIHelper.Invoke(() => item.Items.Refresh());
            GUIHelper.Invoke(item.UpdateLayout);
        } 
```

谁能建议上述扩展节点的代码可能会使树数据无效，以至于当我尝试为其检索容器时，它返回null？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:19:02.093

我不太了解您的代码，例如：

```
RunBackgroundThreadToAddAccoutns(Customer)
{
    for (var ... 
```

这里的参数是什么，类型是什么？

但我认为问题可能在于，当您设置时，`item.ItemsSource = customer.Accounts`您正在将旧项目源更改为新项目，这不是树之前的项目。

无论如何，如果您在 WPF 中使用树，我建议您查看此参考资料，这可能对您非常有帮助：

[http://www.codeproject.com/Articles/17025/Custom-TreeView-Layout-in-WPF](http://www.codeproject.com/Articles/17025/Custom-TreeView-Layout-in-WPF)

[http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)

希望这对你有用...

# iphone - iOS 6 错误：当导航控制器用作窗口根时未调用supportedInterfaceOrientations

> ID：12862896
> 
> 赞同：2
> 
> 时间：2012-10-12T15:57:03.880
> 
> 标签：iphone, objective-c, xcode

在我的 mainwindow.xib 中有一个导航控制器。在（作为子项目）之上，我有另一个视图控制器（homeviewcontroller）。

在笔尖中，我将窗口的 rootviewcontroller 设置为此导航控制器。

这已部署到应用商店并完美运行。

自从升级到 ios6 sdk 后，我遇到了方向问题 - 基本上，在这种设计中，在 ios 6 设备/模拟器中运行我的应用程序时，我的 homeviewcontroller 的 supportedInterfaceOrientations 方法不会被调用。

为了解决这个问题，我需要将 homeviewcontroller 设置为窗口的 rootviewcontroller 但这不是我想要的 - 我需要导航控制器。

如何解决 ios6 中的这个烦人的错误？

**更新：**

我也尝试过以编程方式执行此操作 - 它仍然无法正常工作。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{        
    HomeViewController *homeVC = [[HomeViewController alloc]init];
    UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:homeVC];
    [self.window setRootViewController:navController];

    [self.window makeKeyAndVisible];

    return YES; 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T10:12:28.657

您需要继承 UINavigationController 并在那里覆盖supportedInterfaceOrientations。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:59:13.620

为了详细说明@phix23 的答案，我写了这个小小的 UINavigationController 子类

```
@implementation MyNavigationController

- (NSUInteger) supportedInterfaceOrientations
{
    return [[self topViewController] supportedInterfaceOrientations];
}

@end 
```

根据我对他评论中提到的文档的理解，这应该是默认行为。但不知何故这对我有用，没有它，它就不行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:14:07.903

在运行时以编程方式进行吗？（在您的`-applicationDidFinishLaunching:`委托方法中）

# maven - 将私有本地存储库用于 Hudson 作业有哪些缺点？

> ID：12862899
> 
> 赞同：1
> 
> 时间：2012-10-12T15:57:20.183
> 
> 标签：maven, hudson

Hudson 提供了让 Maven 构建作业利用私有本地存储库的选项，或者使用 Maven 安装中的通用存储库，即与其他构建作业共享的一个。我觉得我们的构建应该使用私有本地存储库来确保它们是干净的构建。但是，这会导致性能问题，特别是在为每个作业下载所有依赖项的带宽方面——我们还将作业配置为从干净的“工作区”开始，这似乎会破坏私有 maven 存储库以及其余部分建造空间。

对于日常的持续集成构建，为每个构建作业选择是否使用私有本地 maven 存储库的优缺点是什么？与其他工作共享本地存储库有什么大不了的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:46:32.937

解释詹金斯文档，你会使用`private Maven repository`if

> *   您最终会错误地成功构建，只是因为您在本地存储库中拥有所有依赖项，尽管事实上 POM 中的任何存储库都可能没有它们。
> *   您在尝试使用相同的本地存储库时遇到并发 Maven 进程的问题。

此外

> 使用此选项时，请考虑设置一个 Maven 工件管理器，这样您就不必经常访问远程 Maven 存储库。

您还可以探索[scm 的 clean 选项](http://jenkins.361315.n4.nabble.com/Clean-Workspace-Before-Each-Build-td3460928.html)（而不是工作区 clean），以避免此存储库遭到破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T08:21:32.143

我相信 Sonatype 建议使用本地 Nexus 实例，尽管他们自己的研究表明（2015 年软件供应链状况报告）到 Maven Central 的流量中只有不到 5% 来自此类存储库。

回到这个问题，假设您在构建服务器（例如 Jenkins）和 Nexus 之间有一个本地 Nexus 实例和高带宽连接（至少数十 Gbps），那么我可以看到使用私有本地存储库的一些缺点，在事实上，我认为构建性能的下降是一个合理的权衡。

上面说，我们到底在权衡什么？我们接受了一个小的性能损失，我们可以 100% 肯定地知道，独立、干净的构建与我们的本地 Nexus 实例作为代理工作。

后者很重要，因为考虑构建服务器上的本地存储库（可能在 jenkins 的用户主目录中）具有未缓存在 Nexus 中的人工制品（如果您开始针对 Maven Central 构建，这并非不可能） . 这种不同步的情况不是最理想的，因为如果 Nexus 与 Central 的上游连接暂时关闭，可能会出现 Nexus 中的缓存 TTL 设置意味着构建失败的情况。

最后，为了增加权衡的好处，我今天花了几个小时在共享的 Jenkins 用户 .m2/repository 中获得了一个人工制品。当天早些时候，与 Central 的上游连接在本地上下波动了数小时（企业环境中的神秘问题）。最后，我删除了整个共享 jenkins 用户 .m2/repository 以便从本地 Nexus 中检索所有内容。

值得考虑使用本地 .m2/repository（在 jenkins 用户主目录中）构建以及使用私有本地存储库（快速和较慢构建）进行构建。然而，在我的情况下，我可能只在第一种情况下选择私有本地存储库 - 如果我通过专注于低悬的成果来优化构建（例如拆分多模块构建），我可能能够接受惩罚。

# html - 在html中将两个链接合二为一

> ID：12862900
> 
> 赞同：-2
> 
> 时间：2012-10-12T15:57:20.773
> 
> 标签：html, css

我的 HTML 和 CSS 有一个小问题。我的 HTML 标记是这样的

```
<div class="link-wrap">
    <h4><a href=""><span class="link-text">Link 1</span><span class="link-image">Link 2</span></a></h4>
</div> 
```

我的CSS是这样的

```
<style>
.link-wrap {
  padding: 0;
  margin: 0;
}
h4 {
  display: block;
}
a {
  text-decoration: none;
}
span.link-text {
  padding: 0;
  margin: 0;
  color: #666;
  text-decoration: none;
}
span.link-text:hover {
  color: #ccc;
}
span.link-image {
  color: #F00;
}
span.link-image:hover {
  color: #666;
}
div.link-wrap span.link-text span.link-image:hover {
  text-decoration: underline;
}
</style> 
```

现在根据我的标记，您可以看到两者`<span>`都已转换为两个不同的链接，并且它们具有不同的悬停状态。现在我需要将两个链接转换为一个。就像我将悬停第一个跨度的示例一样，它也应该更改第二个跨度悬停状态。

**更新** 对不起，我无法更改我的标记。我的标记将保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:16:17.503

悬停适用于 a 元素，而不适用于跨度。当您将鼠标悬停在 a 上时，要使两个跨度同时更改，请使用

```
a:hover span.class {} 
```

与您拥有的结构相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:49:06.873

通过研究您的 html 标记和 css，我想告诉您悬停的 css 不适用于 span 元素，它适用于 a。如果您想为两个跨度使用悬停状态，只需使用

```
 div.link-wrap a:hover span.class-name { } 
```

希望它对你有用。

# xslt - 如何使用一些空属性进行 xslt Muenchian 分组？

> ID：12862902
> 
> 赞同：2
> 
> 时间：2012-10-12T15:57:24.423
> 
> 标签：xslt, xslt-1.0

与标准 Meunchain 分组略有不同，因为我正在处理一些我正在转换的标签的 null(?) 属性。我希望将空分组视为它们自己的单独组，转换后的输出添加分组字符串。此外，如果有一个分组来计算有多少。

```
<root>
<section>
    <subsection>
        <module>
            <comp>111</comp>
        </module>
        <module group='group01'>
            <comp>222</comp>
        </module>
        <module group='group01'>
            <comp>333</comp>
        </module>
        <module>
            <comp>444</comp>
        </module>
        <module>
            <comp>555</comp>
        </module>
    </subsection>
</section>
<section>
    <subsection>
        <module group ="group02">
            <comp>666</comp>
        </module>
        <module group ="group02">
            <comp>777</comp>
        </module>
        <module>
            <comp>888</comp>
        </module>
        <module group ="group03">
            <comp>999</comp>
        </module>
        <module group ="group03">
            <comp>101010</comp>
        </module>
    </subsection>
    <subsection>
        <module group ="group04">
            <comp>11111</comp>
        </module>
        <module group ="group04">
            <comp>121212</comp>
        </module>
        <module group ="group05">
            <comp>131313</comp>
        </module>
        <module group ="group05">
            <comp>141414</comp>
        </module>
        <module group ="group06">
            <comp>151515</comp>
        </module>
        <module group ="group06">
            <comp>161616</comp>
        </module>
        <module>
            <comp>171717</comp>
        </module>
    </subsection>
</section> 
```

想要的输出：

```
<AllSections>
<section>
    <subsection>
        <page>
            <content>111</content>
        </page>
        <page>
            <content>222333</content>
            <count>2</count>
        </page>
        <page>
            <content>444</content>
        </page>
        <page>
            <content>555</content>
        </page>
    </subsection>
</section>
<section>
    <subsection>
        <page>
            <content>666777</content>
            <count>2</count>
        </page>
        <page>
            <content>888</content>
        </page>
        <page>
            <content>999101010</content>
            <count>2</count>
        </page>
    </subsection>
    <subsection>
        <page>
            <content>111111121212</content>
            <count>2</count>
        </page>
        <page>
            <content>131313141414161616</content>
            <count>3</count>
        </page>
        <page>
            <content>151515</content>
        </page>
        <page>
            <content>171717</content>
        </page>
    </subsection>
</section> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T09:30:48.693

对于具有**group**属性的元素，您将按该属性进行分组，但也在父**subsection**元素内。因此，您可以先定义一个键来对它们进行分组，这是

```
<xsl:key name="modules" match="module[@group]" use="concat(generate-id(..), '|', @group)" /> 
```

接下来，您需要模板来匹配**模块**元素的各种情况。首先，您可以有一个模板来匹配没有**组属性的****模块**元素，您可以在其中根据需要格式化输出。

 **```
<xsl:template match="module[not(@group)]">
    <page>
        <content>
            <xsl:value-of select="comp"/>
        </content>
    </page>
 </xsl:template> 
```

对于具有**组**属性的模块，您需要一个匹配项来检查此特定**模块**元素是否首先出现在上面定义的键的组中。

```
<xsl:template 
  match="module
    [@group]
    [generate-id() = generate-id(key('modules', concat(generate-id(..), '|', @group))[1])]"> 
```

在此模板中，您可以使用键轻松定义一个变量来保存组中的元素，然后输出子**comp**元素或计算它们

```
<xsl:variable name="modules" select="key('modules', concat(generate-id(..), '|', @group))"/>
<page>
    <content>
        <xsl:apply-templates select="$modules/comp/text()"/>
    </content>
    <count>
        <xsl:value-of select="count($modules)" />
     </count>
</page> 
```

最后，您需要第三个模板来匹配所有其他**模块**元素（即具有**组**属性的元素，但不是组中的第一个元素）以忽略它们，以确保它们不会获得两次输出。（XSLT 处理器应该总是在这个更通用的模板之前匹配更具体的模板）

```
<xsl:template match="module"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:key name="modules" match="module[@group]" use="concat(generate-id(..), '|', @group)"/>

    <xsl:template match="root">
        <AllSections>
            <xsl:apply-templates />
        </AllSections>
    </xsl:template>

    <xsl:template match="module[not(@group)]">
        <page>
            <content>
                <xsl:value-of select="comp"/>
            </content>
        </page>
    </xsl:template>

    <xsl:template match="module[@group][generate-id() = generate-id(key('modules', concat(generate-id(..), '|', @group))[1])]">
        <xsl:variable name="modules" select="key('modules', concat(generate-id(..), '|', @group))"/>
        <page>
            <content>
                <xsl:apply-templates select="$modules/comp/text()"/>
            </content>
            <count>
                <xsl:value-of select="count($modules)" />
            </count>
        </page>
    </xsl:template>

    <xsl:template match="module"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<AllSections>
    <section>
        <subsection>
            <page>
                <content>111</content>
            </page>
            <page>
                <content>222333</content>
                <count>2</count>
            </page>
            <page>
                <content>444</content>
            </page>
            <page>
                <content>555</content>
            </page>
        </subsection>
    </section>
    <section>
        <subsection>
            <page>
                <content>666777</content>
                <count>2</count>
            </page>
            <page>
                <content>888</content>
            </page>
            <page>
                <content>999101010</content>
                <count>2</count>
            </page>
        </subsection>
        <subsection>
            <page>
                <content>11111121212</content>
                <count>2</count>
            </page>
            <page>
                <content>131313141414</content>
                <count>2</count>
            </page>
            <page>
                <content>151515161616</content>
                <count>2</count>
            </page>
            <page>
                <content>171717</content>
            </page>
        </subsection>
    </section>
</AllSections> 
```**

# ruby - Rails 3 Collection `sum` 因 TypeError 而失败

> ID：12862904
> 
> 赞同：0
> 
> 时间：2012-10-12T15:57:39.127
> 
> 标签：ruby, ruby-on-rails-3.2

在示例 Rails 3.2.8 应用程序（在 Ruby 1.9.3 上）中，有以下简单设置：

```
class Account < ActiveRecord::Base
  has_many :line_items

  def subtotal
    line_items.sum(&:price)
  end
end

class Line_Item < ActiveRecord::Base
  belongs_to :product

  def price
    product.price * time
  end
end

account = Account.new

account.line_items.build do |item|
  item.years = 4
  item.product = Product.last
end

account.subtotal
#=> TypeError: nil can't be coerced into BigDecimal 
```

如上所述，该`subtotal`方法因转换错误而失败。在`subtotal`我检查了返回的类型`line_items.class`并得到了`Array`. 如果我将定义更新为`subtotal`以下任何一项，则该方法有效：

```
line_items.to_a.sum(&:price)
#=> #<BigDecimal:7ff4d34ca7c8,'0.0',9(36)>

line_items.map(&:price).sum
#=> #<BigDecimal:7ff4d3373b40,'0.0',9(36)> 
```

为什么初始定义`line_items.sum(&:price)`失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:49:18.923

这似乎是 Rails 中的一个错误（至少在 3.2.8 中）。

在 Rails 3.2.8 中，`has_many`关联是动态定义的[`collection.sum`](https://github.com/rails/rails/blob/959fb8ea651fa6638aaa7caced20d921ca2ea5c1/activerecord/lib/active_record/associations/collection_association.rb#L181)。虽然这没有反映在[A Guide to Active Record Associations](http://guides.rubyonrails.org/association_basics.html#the-has_many-association) 或[ActiveRecord::Associations::ClassMethods API 文档中](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)；它在“*集合关联（一对多/多对多） ”图表下的*[API](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)中简要列出，但未再次引用。

 *根据[代码](https://github.com/rails/rails/blob/959fb8ea651fa6638aaa7caced20d921ca2ea5c1/activerecord/lib/active_record/associations/collection_association.rb#L181)，它总是会尝试使用 SQL 访问数据库`sum`。然而，在这个特定的例子中，模型并没有被保存。所以数据库里什么都没有。

所以要澄清一点：

```
account.line_items.sum(&:price)      # Uses Collection#sum, goes to database
account.line_items.map.sum(&:price)  # Uses Enumerable#map then Enumerable#sum 
```

这已记录在[问题 #7928](https://github.com/rails/rails/issues/7928)下；这似乎与[问题 #5215: "finders and scopes on has_many association on new object wrongly query db for null foreign keys" 相关](https://github.com/rails/rails/issues/5215)。*

# visual-studio - VS2012中有什么方法可以突出显示一段代码吗？

> ID：12862907
> 
> 赞同：1
> 
> 时间：2012-10-12T15:57:49.170
> 
> 标签：visual-studio, visual-studio-2012

通过选择所需的行，右键单击，然后选择背景颜色来突出显示文本块。

它看起来像这样：

![在此处输入图像描述](../Images/a40c276694f4e6fde9ef8f26c342296b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:58:43.477

如果它使代码更易于导航，请尝试使用 #region 命令：

[http://msdn.microsoft.com/en-us/library/9a1ybwek%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/9a1ybwek%28v=vs.110%29.aspx)

如果要突出显示您想稍后返回并修复的内容，请使用 // TODO 等，它将添加到 VS 任务列表中：

[http://msdn.microsoft.com/en-us/library/zce12xx2%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/zce12xx2%28v=vs.100%29.aspx)

# python - Django syncdb 在 Python 2.6 上出现问题 - to_stored_data()？

> ID：12862910
> 
> 赞同：1
> 
> 时间：2012-10-12T15:57:54.130
> 
> 标签：python, mysql, django

我的应用程序在 Python 2.7.2 上本地运行良好，但尝试将其部署在使用 Python 2.6.8 的共享主机上会导致调用时出现以下消息`syncdb`：

```
TypeError: to_stored_data() takes exactly 3 non-keyword arguments (2 given) 
```

[完整回溯](http://pastebin.com/rYXdDeZk)

我还没有在 Django 的代码库或 Nullege 中找到提及 to_stored_data() 的内容。我有另一个 Django 站点在同一台机器上运行没有问题，在一个单独的 virtualenv 中。知道这可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:30:06.963

修复损坏的`to_stored_data` `pre_save`信号处理程序。=)

# javascript - jQuery contextMenu 根据 div 内容禁用项目

> ID：12862911
> 
> 赞同：1
> 
> 时间：2012-10-12T15:57:55.503
> 
> 标签：javascript, jquery, jquery-plugins, contextmenu

我一直在浏览这个插件的文档，它看起来很有希望，但最后我无法找到我正在寻找的东西。

[http://medialize.github.com/jQuery-contextMenu/docs.html](http://medialize.github.com/jQuery-contextMenu/docs.html)

这是我想要的示例，这是上下文菜单项的示例

```
 $.contextMenu({
        selector: '.context-menu-one', 
        callback: function(key, options) {
            var m = "clicked: " + key;
            window.console && console.log(m) || alert(m); 
        },
        items: {
            "item1": {name: "Clickable", icon: "edit"},
            "item2": {
                name: "Disabled", 
                icon: "cut", 
                disabled: function(key, opt) { 
                    // this references the trigger element
                    return !this.data('cutDisabled'); 
                }
            }
        }
    }); 
```

. 如果我的 div ( `context-menu-one`) 里面有一些内容，比如`<span class="test">x</span>`基于此的禁用或启用菜单。

因此，在上述情况下，如果我的 div( `context-menu-one`) 与`test`具有 textvalue 的类的span`x`禁用菜单项 2

如何做到这一点？不一定是代码，引导我走向良好的方向 = 如果可能的话，好的代码

**编辑：**

这是jsfiddle示例：

[http://jsfiddle.net/XZEUN/2/](http://jsfiddle.net/XZEUN/2/)

因此，因为 first`context-menu-one`具有与 x 类的跨度，所以 item2 应该被禁用，而不是其他的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:30:58.603

你需要像这个[小提琴一样定义你自己的事件](http://jsfiddle.net/XZEUN/3/)

html

```
<div class="context-menu-one box menu-1">
    <strong>right click me</strong>
    <span data-item="edit"></span>
</div>​ 
```

javascript

```
events: {
    show: function(opt) {
        var m = opt.$menu;
        $(this).find('span[data-item]').each(function(i, e) { //<-- this search for all span with data-item attribute
            var p = $(e).data('item') + 'Disabled'; //<-- here i compose editDisabled
            if (m.data(p) === true) m.data(p, 1); //<-- this is for mantain previuos disabling
            else m.data(p, true);
        });
        m = null; //<-- this for breaking possible circular references/memory leaks
    },
    hide: function(opt) {
        var m = opt.$menu;
        $(this).find('span[data-item]').each(function(i, e) {
            var p = $(e).data('item') + 'Disabled';
            if (m.data(p) === 1) m.data(p, true); //<-- this reset the previuos disabling
            else m.removeData(p);
        });
        m = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:16:13.603

如果要禁用绑定到特定选择器的上下文菜单，可以执行以下操作：

```
$.contextMenu( 'destroy', '.context-menu-one' ); 
```

请参见此处的示例：

[http://jsfiddle.net/ATyjn/](http://jsfiddle.net/ATyjn/)

# pdf - Undo Pdfnup Operation

> ID：12862915
> 
> 赞同：4
> 
> 时间：2012-10-12T15:58:07.600
> 
> 标签：pdf, undo

I have a Pdf file which contains several slides per page, including text (not only images). This pdf was probably created using pdfnup. Can I revert the pdfnup operation so that each slide is shown on one page?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:09:57.410

As far as I know, there is no simple to be used *'undo'* operation.

However, the following answers show you the approach principle, how you can achieve the undo-equivalent operation using Ghostscript:

*   [**Convert PDF 2 sides per page to 1 side per page**](https://superuser.com/a/189109/40894) (Superuser)
*   [**How can I split a PDF's pages down the middle?**](https://superuser.com/a/235401/40894) (Superuser)
*   [**Cropping a PDF using Ghostscript 9.01**](https://stackoverflow.com/a/6184547/359307) (Stackoverflow)
*   [**PDF - Remove White Margins**](https://stackoverflow.com/a/10418720/359307) (Stackoverflow)

[*(Should these not help you to find the final solution, ask again. But then to come up with a fully working commandline, I'd need the complete output of the following command first: `pdfinfo -f 1 -l 100 -box your.pdf`.)*]

# sql - SQL Server 2005 行到列

> ID：12862916
> 
> 赞同：-2
> 
> 时间：2012-10-12T15:58:10.197
> 
> 标签：sql, sql-server, tsql, sql-server-2005, pivot

> **可能重复：**
> [T-SQL 将行分组为列](https://stackoverflow.com/questions/10652921/t-sql-group-rows-into-columns)

我有一个像这样格式化的表 _data

```
TimeStamp                        MeterID      Value
2012-04-15 13:00:00.000          CK1992       152.64
2012-04-15 12:45:00.000          CK1992       151.695
2012-07-06 12:45:00.000          CK1992       150.84
2012-09-04 12:00:00.000          CK1992       150.66
2012-04-15 12:15:00.000          CK1992       150.57 
```

我需要能够将该表格式化为这样的

```
Timestamp     MeterID1     MeterID2     MeterID3
stamphere     value        value        value 
```

我有很多不同的 MeterID，因此需要相应地提取它。

这是我现有的选择语句：

```
SELECT [TimeStamp]
  ,[MeterID]
  ,[Value]
FROM [dbo].[_Data] 
```

我怎样才能使这项工作？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:44:11.197

您可能会检查[SQL Server 动态 PIVOT 查询中的信息？](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)因为您不知道您将拥有多少列。

此外，您还可以使用`PIVOT`SQL Server 2005 中引入的方法：

> 当 PIVOT 和 UNPIVOT 用于升级到 SQL Server 2005 或更高版本的数据库时，数据库的兼容级别必须设置为 90 或更高。有关如何设置数据库兼容级别的信息，请参阅[sp_dbcmptlevel](http://msdn.microsoft.com/en-us/library/ms178653(v=sql.90).aspx) (Transact-SQL) - [MSDN](http://msdn.microsoft.com/en-us/library/ms177410(SQL.90).aspx)

# ruby - Ruby LibXML - 如果节点存在，则根据值过滤

> ID：12862921
> 
> 赞同：0
> 
> 时间：2012-10-12T15:58:36.740
> 
> 标签：ruby, libxml2, libxml-ruby

我正在处理以下 XML：

```
<digiprovMD ID="digiprov-3">
<mdWrap MDTYPE="PREMIS">
<xmlData>
  <agent>
    <agentIdentifier>
      <agentIdentifierType>URI</agentIdentifierType
      <agentIdentifierValue>info:fda/system-v0.16.2</agentIdentifierValue>
      <agentIdentifierResult>outcome</agentIdentifierResult>
    </agentIdentifier>
    <agentName>DAITSS Account: UF</agentName>
    <agentType>Affiliate</agentType>
  </agent>
</xmlData>
</mdWrap>
</digiprovMD>
<digiprovMD ID="digiprov-4">
<mdWrap MDTYPE="PREMIS">
<xmlData>
  <agent>
    <agentIdentifier>
      <agentIdentifierType>URI</agentIdentifierType>
      <agentIdentifierValue>info:fda/system-v0.16.2</agentIdentifierValue>              
    </agentIdentifier>
    <agentName>daitss system (v0.16.2)</agentName>
    <agentType>software</agentType>
  </agent>
</xmlData>
</mdWrap>
</digiprovMD>
<digiprovMD ID="digiprov-5">
<mdWrap MDTYPE="PREMIS">
<xmlData>
  <agent>
    <agentIdentifier>
      <agentIdentifierType>URI</agentIdentifierType>
      <agentIdentifierValue>info:fda/system-v0.16.2</agentIdentifierValue>
      <agentIdentifierResult>source</agentIdentifierResult>              
    </agentIdentifier>
    <agentIdentifier>
      <agentIdentifierType>URI</agentIdentifierType>
      <agentIdentifierValue>someotheruri</agentIdentifierValue>
      <agentIdentifierResult>outcome</agentIdentifierResult>              
    </agentIdentifier>
    <agentName>daitss system (v0.16.2)</agentName>
    <agentType>software</agentType>
  </agent>
</xmlData>
</mdWrap>
</digiprovMD> 
```

我想选择具有特定值 agentIdentifierValue 的所有代理，例如 info:fda/system-v0.16.2，仅当 1\. 它没有与之关联的 agentIdentifierResult 标签和 2\. 如果有与之关联的 agentIdentifierResult 它的值应该是'结果'

因此，在这种情况下，应选择两个代理 digiprov-3 和 digiprov-4。我该如何为此编写xpath？

我试过这个（伪代码）： (result = 结果和 value = '#{uri.content}') 或 (value = '#{uri.content}') 但这也选择了第三个代理 digiprov-5！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:51:25.233

这应该有效：

```
'//digiprovMD[.//agentIdentifier[./agentIdentifierValue="info:fda/system-v0.16.2"][not(./agentIdentifierResult) or ./agentIdentifierResult = "outcome"]]' 
```

基本上，这将返回任何 digiprovMD 节点，其中包括具有指定 agentIdentifierValue 值的 agentIdentifier 节点，以及没有 agentIdentifierResult 或“outcome”的 agentIdentifierResult。

# ruby - ActiveRecord 中的关联并发

> ID：12862930
> 
> 赞同：0
> 
> 时间：2012-10-12T15:59:20.993
> 
> 标签：ruby, activerecord, concurrency

我有一个应用程序，人们可以在其中注册项目。每个项目都有有限数量的插槽。如何处理并发？我在 Item 类中试过这样：

```
def sign_up(signup)
  ActiveRecord::Base.transaction do
    return 'Sorry, that item is full.' if full?
    signups << signup
    sheet.save!
    nil
  end
end

def full?   
  locked_signups = signups.lock(true).all  
  locked_signups.size >= max_signups
end 
```

我正在尝试做的事情甚至可以通过 AR 实现吗？我是否需要通过列实现自己的锁定？欢迎任何建议。

更新：根据 tadman 的回答，我得到了这个工作。这是有效的代码：

```
rows_updated = ActiveRecord::Base.transaction do
   Item.connection.update "update items set signup_count=signup_count+1 where id=#{ActiveRecord::Base.sanitize(self.id)} and signup_count<quantity"
end
return 'Sorry, that item is full. Refresh the page to see what\'s still open.' if rows_updated < 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:00:45.170

我可以想到两种可靠的解决此类问题的方法。

**计数器列**

您将创建一个“剩余库存”列并自动更新它：

```
UPDATE sheet SET signups_remaining=signups_remaining-:count WHERE id=:id AND signups_remaining>=:count 
```

您必须相应地绑定到`:count`and`:id`值。如果此查询运行，则意味着还有足够数量的注册。

**保留注册**

预先创建注册记录并分配它们：

```
UPDATE signups SET allocation_id=:allocation_id WHERE allocation_id IS NULL LIMIT :count 
```

这将更新零个或多个注册记录，因此您必须在提交交易之前检查您是否保留了正确的计数。

# xml - 使用 LINQ 的带有子查询的 XML

> ID：12862931
> 
> 赞同：3
> 
> 时间：2012-10-12T15:59:28.707
> 
> 标签：xml, linq, subquery

我正在使用 XML.Linq 搜索 XML 文件。

```
 <Location id="1284" parentID="1333" level="4" writerID="0" creatorID="3" nodeType="1266" template="1272" sortOrder="0" createDate="2012-04-09T09:41:33" updateDate="2012-08-16T11:43:11" nodeName="Princeton Junction" urlName="princeton-junction" writerName="Web" creatorName="My Name" path="-1,1092,1258,1333,1284" isDoc="">
      <solutionsOfferedIndustries>1109,1172,1290,1293,1295,1296,1298,1300,1302</solutionsOfferedIndustries>
      <umbracoUrlAlias>
      </umbracoUrlAlias>
      <uHidesy><![CDATA[{"document":{"id":1284,"documentType":"Location","tabs":[{"name":"Address & Contact Info","index":0,"properties":[{"name":"Map Position\u003cbr\u003e","index":0,"status":"show"},{"name":"Location Name","index":0,"status":"hide"},{"name":"Office Type\u003cbr\u003e","index":0,"status":"show"},{"name":"State (if in USA)","index":0,"status":"show"},{"name":"Street Address\u003cbr\u003e","index":0,"status":"show"},{"name":"Street Address (Line 2)","index":0,"status":"show"},{"name":"City\u003cbr\u003e","index":0,"status":"show"},{"name":"ZIP Code/Postal Code\u003cbr\u003e","index":0,"status":"show"},{"name":"Country","index":0,"status":"show"},{"name":"Location Phone Number","index":0,"status":"show"},{"name":"Location Fax Number","index":0,"status":"show"}],"status":"show"},{"name":"Building Photo","index":1,"properties":[{"name":"Upload Image\u003cbr\u003e","index":1,"status":"show"},{"name":"-Property-name-not-displayed-","index":1,"status":"show"}],"status":"show"},{"name":"Solutions Offered","index":2,"properties":[{"name":"Solutions Offered - Industries","index":2,"status":"show"}],"status":"show"},{"name":"Miscellaneous","index":3,"properties":[{"name":"Custom Page URL\u003cbr\u003e","index":3,"status":"hide"},{"name":"Divisions\u003cbr\u003e","index":3,"status":"show"},{"name":"General Manager","index":3,"status":"show"},{"name":"Notes\u003cbr\u003e","index":3,"status":"hide"}],"status":"show"},{"name":"Tab & Property Visibility","index":4,"properties":[{"name":"uHidesy\u003cbr\u003e","index":4,"status":"show"}],"status":"hide"},{"name":"Properties","index":5,"properties":[{"name":"Name","index":5,"status":"hide"},{"name":"Created by","index":5,"status":"hide"},{"name":"Created","index":5,"status":"hide"},{"name":"Id","index":5,"status":"hide"},{"name":"Document Type","index":5,"status":"hide"},{"name":"Template","index":5,"status":"hide"},{"name":"Publication Status","index":5,"status":"hide"},{"name":"Last edited","index":5,"status":"hide"},{"name":"Publish at","index":5,"status":"hide"},{"name":"Remove at","index":5,"status":"hide"},{"name":"Link to document","index":5,"status":"show"}],"status":"show"}],"applyToAll":true,"applyToAdmin":false,"savedDate":"16/08/2012 15:01:35"}}]]></uHidesy>
      <umbracoFile>/media/5153/front_of_building.jpg</umbracoFile>
      <coordinates><![CDATA[40.297833,-74.64424600000001,13]]></coordinates>
      <imageCrop>
        <crops date="10/05/2012 10:33:52">
          <crop name="Location Photo" x="287" y="0" x2="1785" y2="1498" url="/media/5153/front_of_building_Location Photo.jpg" />
        </crops>
      </imageCrop>
      <locationName>Princeton Junction</locationName>
      <officeType>Corporate Headquarters</officeType>
      <state><![CDATA[NJ - New Jersey]]></state>
      <streetAddress>123 My Road</streetAddress>
      <streetAddress2>
      </streetAddress2>
      <city>Princeton Junction</city>
      <zipCode>08550</zipCode>
      <country>United States</country>
      <divisions><![CDATA[Services,Products & Systems]]></divisions>
      <locationPhoneNumber>123-456-7890</locationPhoneNumber>
      <locationFaxNumber>123-456-7891</locationFaxNumber>
      <generalManager>
      </generalManager>
      <notes><![CDATA[Blah:
          -Blah1
          -Blah2
          -Blah3]]></notes>
    </Location> 
```

我正在使用以下代码来获取所需的一切，但我还需要获取 Location\imageCrop\crops\crop 的属性 url。

```
 var query = from c in xmldoc.Root.Descendants("Location")
                    select c.Attribute("id").ToString().Replace("\"", "").Replace("id=", "") + "\t"
                            + c.Element("locationName").Value + "\t"
                            + c.Element("streetAddress").Value + "\t"
                            + c.Element("streetAddress2").Value + "\t"
                            + c.Element("city").Value + "\t"
                            + c.Element("state").Value + "\t"
                            + c.Element("zipCode").Value + "\t"
                            + c.Element("country").Value + "\t"
                            + c.Element("locationPhoneNumber").Value + "\t"
                            + c.Element("locationFaxNumber").Value+ "\t"
                            + c.Attribute("urlName").ToString().Replace("\"", "").Replace("urlName=", ""); 
```

如何将该子查询添加到此查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:04:31.617

您只需要：

```
c.Element("imageCrop").Element("crops").Element("crop").Attribute("url").Value 
```

当然，如果有多个`crop`属性，那只会返回第一个 - 你可以吗？

（顺便说一句，我会亲自转换为匿名类型，将所有值存储在单独的属性中，然后将其转换为制表符分隔的值作为下一步；我认为您会发现它会使调试更容易。）

# java - 是什么让 RCP 的 Eclipse 与 Eclipse Classic 不同？

> ID：12862936
> 
> 赞同：1
> 
> 时间：2012-10-12T15:59:43.940
> 
> 标签：java, eclipse, eclipse-rcp

我知道我需要 RCP 来进行 Eclipse 插件和 Eclipse RCP 开发。但是，由于我有[一些崩溃](https://apple.stackexchange.com/questions/67104/eclipse-rcp-juno-64-bit-crashes-on-mac-os-x)和[软件安装](https://stackoverflow.com/questions/12862152/install-new-software-error-with-eclipse-indigo-juno-rcp)问题，我想我必须使用 eclipse classic，直到问题得到解决。

是什么让 RCP 的 Eclipse 与 Eclipse Classic 不同？我检查了 Eclipse 下载页面，在我看来，Eclipse Classic 似乎没有任何功能，而 RCP 有很多。

![在此处输入图像描述](../Images/088e956844883bb69cadaa9c7300e9e6.png) ![在此处输入图像描述](../Images/2c95bceb1e7e721e6a4cc9ab9dd92502.png)

功能只是这两种选择之间的区别吗？如果是这样，我可以下载功能/插件以使用 Eclipse Classic 中的所有 RCP 功能而没有任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:08:31.883

eclipse.org 页面上的所有下载都只是普遍可用的 Eclipse 插件的预定义包。因此，您始终可以将*任何*插件安装到*任何*现有的 Eclipse 安装中（假设没有依赖冲突）。下载站点上的软件包选择只决定了预安装的内容（并且很难禁用预安装的功能）。

对于 RCP 开发，您需要 JDT 和 PDE 功能。“经典”和“用于 RCP 开发”的软件包都包含这些，所以它仍然是您的选择。

[如果您真的想要一个适合您需要的简约 Eclipse，请从http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/)安装“平台运行时二进制文件” ，这是一个“空”日食。然后使用更新管理器仅安装您选择的插件。

# vb.net - 在 vb.net 中将字符串转换为日期时间

> ID：12862937
> 
> 赞同：9
> 
> 时间：2012-10-12T15:59:47.827
> 
> 标签：vb.net, string, datetime

我有一个看起来像这样的日期时间：

```
201210120956
ccyyMMDDhhmm 
```

当我尝试这个时：

```
Dim convertedDate As Date = Date.Parse(DateString)
Return convertedDate 
```

我回来了：

```
#10/12/2012# 
```

我正在浪费时间。

我已经阅读了这个[将字符串转换为日期时间的 vb.net](https://stackoverflow.com/questions/2030407/convert-string-to-datetime-vb-net)，但是当我使用时，`datetime.ParseExact()`我得到：

> 无法解析符号“ParseExact”

有没有办法在不使用子字符串的情况下将其转换为日期时间？直接转换？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-12T16:04:16.020

将解码模式传递给 ParseExact

```
Dim d as string = "201210120956"
Dim dt = DateTime.ParseExact(d, "yyyyMMddhhmm", Nothing) 
```

ParseExact**仅适用**于 Net FrameWork 2.0。
如果您仍在使用 1.1，则可以使用 Parse，但您需要为您的字符串提供足够的 IFormatProvider

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:01:06.943

您可以尝试使用`ParseExact`方法

样本

```
Dim format As String  
format = "d" 
Dim provider As CultureInfo = CultureInfo.InvariantCulture
result = Date.ParseExact(DateString, format, provider) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T14:48:16.477

作为替代方案，如果您在日期和时间之间放置一个空格，`DateTime.Parse`则会为您识别格式。这就像你能得到的一样简单。（如果`ParseExact`仍然没有被识别）

# java - Executors.newSingleThreadExecutor() 是运行我需要超时的任务的合适选择吗？

> ID：12862943
> 
> 赞同：3
> 
> 时间：2012-10-12T15:59:59.500
> 
> 标签：java, concurrency

不幸的是，我们不得不调用一个有时永远不会返回的方法，并且永远冻结调用它的线程。幸运的是，实际调用与系统中的其他东西几乎没有交互，并且不返回任何值。所以我们在想，在我们可以修复有问题的代码之前，我们需要在一个单独的线程中运行调用，我们可以监控它并在它超过超时时中断。

显然比我更聪明的人已经解决了这个问题并将他们的礼物留在了并发包中，因为这将是我第一次使用并发包中的任何东西，我想确认我正在选择最好的方法。

所以我想我会通过调用 Excutors.newSingleThreadExecutor 来获得一个 ExecutorService，向它提交一个 Runnable，然后调用接受超时作为参数的 Future.get() 的重载。

要执行的实际任务只是调用一个对象上的单个 void 方法，我可以将其传递给 Runnable 的构造函数。

如果这是正确的方法，或者接近，如果您对自己的时间感到慷慨，我也非常感谢一个简短的代码示例。:)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:03:53.790

> 显然比我聪明的人已经解决了这个问题

实际上它并没有真正解决恕我直言。

要中断任务，它必须表现良好并检查中断，否则它实际上不会停止。但是，如果它表现良好，则不太可能首先被杀死。

`Thread.stop()`如果您确定没有可能的副作用，您可以使用已弃用的。这需要使用普通线程。即使您“知道”这不会导致问题并且再次使用标志来停止任务，它也不理想。

# c# - linq to sql 返回布尔值

> ID：12862949
> 
> 赞同：4
> 
> 时间：2012-10-12T16:00:05.423
> 
> 标签：c#, linq-to-sql

我有一个`Fruits`包含以下列的表

```
UserID | FruitID 
```

我想验证用户 ID 是否在 FruitID 上获得授权，所以我正在编写如下内容：

```
var IsAuthorized = (from f in MyDC.Fruits
                    where f.UserID == TheUserID && f.FruitID == TheFruitID
                    select f.FruitID).SingleOrDefault(); 
```

因此，如果用户被授权，则查询返回一个 ID，如果他没有被授权，则返回 null。然后我检查返回值是否为空，然后根据返回值设置一个布尔值。

我想要做的是返回 bool：如果用户被授权，那么它应该返回 true。

如何修改查询以返回布尔值？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T16:01:13.957

```
var IsAuthorized = from (f in MyDC.Fruits
                         where f.UserID == TheUserID && f.FruitID == TheFruitID
                         select f.FruitID).SingleOrDefault() != null; 
```

或者如果您希望由底层 LINQ 提供程序完成此操作（例如，如果您使用 SQL 服务器），您可以使用[`.Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)更好的扩展方法：

```
var IsAuthorized = MyDC
    .Fruits
    .Any(f => f.UserID == TheUserID && f.FruitID == TheFruitID); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-12T16:02:37.490

如果源序列包含任何元素，则 Any() 返回 true；否则为假。

```
var IsAuthorized = from (f in MyDC.Fruits
                             where f.UserID == TheUserID && f.FruitID == TheFruitID
                             select f.FruitID).Any(); 
```

# xml - xslt，使用函数计算总和的总和

> ID：12862953
> 
> 赞同：2
> 
> 时间：2012-10-12T16:00:18.903
> 
> 标签：xml, xslt-1.0

我有客户发票，我使用以下函数计算此列（针对每张发票和每个客户）的价格*数量 + 总计：总计

```
<xsl:template name="sumProducts"> 
    <xsl:param name="pList"/> 
    <xsl:param name="pRunningTotal" select="0"/>         
    <xsl:choose> 
       <xsl:when test="$pList"> 
           <xsl:variable name="varMapPath" select="$pList[1]"/> 
           <xsl:call-template name="sumProducts"> 
               <xsl:with-param name="pList" select="$pList[position() > 1]"/> 
                   <xsl:with-param name="pRunningTotal" select="$pRunningTotal + $varMapPath/unitprice *  $varMapPath/quantity"/>                    
           </xsl:call-template> 
       </xsl:when> 
       <xsl:otherwise> 
           $<xsl:value-of select="format-number($pRunningTotal, '#,##0.00')"/> 
       </xsl:otherwise> 
    </xsl:choose> 
</xsl:template> 
```

我想计算每个客户的所有发票的总数和所有客户的总发票。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:30:08.077

我不会使用递归模板，而是使用一个变量。看看这个例子，我计算每个项目的小计并将其添加到项目中。然后我使用 sum() 函数来计算总数：

输入xml：

```
<root>
  <items>
    <item price="19" quantity="12" />
    <item price="5" quantity="3" />
    <item price="4" quantity="1" />
    <item price="2" quantity="2" />
  </items>
</root> 
```

Xslt：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
    <xsl:output method="xml" indent="yes"/>

  <xsl:template match="items">
    <root>
    <xsl:variable name="items-with-sub-totals">
      <xsl:for-each select="item">
        <xsl:copy>
          <xsl:copy-of select="@*"/>
          <xsl:attribute name="sub-total">
            <xsl:value-of select="@price * @quantity"/>
          </xsl:attribute>
        </xsl:copy>
      </xsl:for-each>
    </xsl:variable>

    <debug>
      <xsl:copy-of select="msxsl:node-set($items-with-sub-totals)/*"/>
    </debug>

      <xsl:value-of select="concat('Total:', sum(msxsl:node-set($items-with-sub-totals)/item/@sub-total))" />
    </root>

  </xsl:template>

</xsl:stylesheet> 
```

输出（我添加了一些调试信息来显示变量的样子）：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <debug>
    <item price="19" quantity="12" sub-total="228" />
    <item price="5" quantity="3" sub-total="15" />
    <item price="4" quantity="1" sub-total="4" />
    <item price="2" quantity="2" sub-total="4" />
  </debug>
  Total:251
</root> 
```

这与您尝试的方法有点不同，但希望对您有用

# windows - 帮助windows找到我链接到的dll的最佳方法？

> ID：12862959
> 
> 赞同：0
> 
> 时间：2012-10-12T16:00:48.143
> 
> 标签：windows, dll, linker

我的代码正在使用一个库，它是一个静态/隐式链接的 DLL（我们称之为 DLLB），但在运行时它找不到它。

尽管将 DLLB 定位在与调用它的代码相同的目录中。（调用代码本身就是一个DLL，DLLA是从python调用的，它是从arcpy调用的。我不太清楚为什么python能很好地找到DLLA，但DLLA却找不到DLLB，尽管它们在同一个目录中） .

如果我将库 DLL 放在系统路径上的某个位置，一切正常。

但是最好的部署方法是什么？在安装时向客户端计算机上的系统路径添加一个条目？在加载DLL之前在运行时从python修改系统路径？还有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:41:25.520

Python 必须在[LoadLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)调用中指定 DLL 的完整路径。这是推荐的做法。如果仅指定模块名称，则存在加载错误 DLL 的风险，可能会引入[二进制植入漏洞](http://www.binaryplanting.com/)。

请注意，虽然默认搜索路径包括加载可执行文件的目录，但它不包括加载其他 DLL 的目录。所以你看到的行为是预期的。

如果可以使用动态加载，则可以查找 DLLA 的路径并使用它来构造 DLLB 的路径。

要获取 DLLA 的模块句柄，请调用[GetModuleHandleEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683200%28v=vs.85%29.aspx)。要从模块句柄获取 DLLA 的完整路径，请调用[GetModuleFileName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)。检查最后一个元素是否为 DLLA.dll 并将其替换为 DLLB.dll。然后，您可以调用 LoadLibrary。

# cookies - Jasmine 和 angularjs，在 jasmine 中使用 $cookies

> ID：12862960
> 
> 赞同：4
> 
> 时间：2012-10-12T16:00:55.457
> 
> 标签：cookies, jasmine

我对茉莉花相当陌生，想为下面的内容创建一个测试，我在测试部分创建了代码，但我得到“TypeError：无法设置未定义的属性'用户名'”..

我在 apps.js 中创建了一个全局命名空间“cp”，并在服务和控制器中使用了它。

```
//controller
cp.controller = {};
cp.controller.LoginController = function($scope, $location, $cookies){
        $scope.signIn = function(){
            $cookies.user = $scope.form.username;
            user.set($scope.form.username);
            $location.hash( "home" );
        }
};
//service 
cp.serviceFactory = {};
cp.serviceFactory.user = function user( $cookies){
    var userName = $cookies.user;
    return{
        set: function(name){
            userName = name;
        },
        get: function(){
            return userName;
        }
    }
};
//test script
describe('Cameo Controllers', function() {

    describe('LoginController', function(){
        var scope, cookies, ctrl, $httpBackend;
        beforeEach(module('CameoPaaS'));
        beforeEach(inject(function(_$httpBackend_, $rootScope, $controller, $cookies) {
            $httpBackend = _$httpBackend_;
           // cookies =  $cookies.username;
            scope = $rootScope.$new();
            cookies = scope.$cookies;
            ctrl = $controller(cp.controller.LoginController, {$scope: scope, $cookies: cookies});
        }));
        it('should log the user into the system', function() {
            expect(scope.username).toBeUndefined();
            scope.form.username = 'me';
            scope.signIn();
            //expect(user).toBe(undefined);
        });
    });
}); 
```

问题：如何在测试脚本中定义和设置 $cookies.username 的值来绕过错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T09:21:49.840

我也遇到了同样的问题，这是解决方法-

```
beforeEach(inject(function($cookies){
    $cookies.username = 'AngularJs'; 
})); 
```

请建议是否有更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T00:18:39.540

首先确保您包含 angular-cookies.js，这些是从[1.0.0rc3中的主发行版中分离出来的](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#100rc3-barefoot-telepathy-2012-03-29)

如果是我，我会将 cookie 处理包装到服务中，然后使用 jasmine 模拟/监视您的 cookie 包装器服务实现。你可能会发现[这篇文章](https://stackoverflow.com/questions/10961963/how-to-access-cookies-in-angularjs)很有帮助。另外，我[在 unit 和 e2e 中发现了这个测试 cookie](https://groups.google.com/forum/?fromgroups=#!topic/angular/qLA8ishtpGk)。恕我直言，问题在于它离金属太近，必须直接使用浏览器 cookie。

# wordpress - 使用 .htaccess 将子目录和内容重定向到子域

> ID：12862961
> 
> 赞同：0
> 
> 时间：2012-10-12T16:01:00.187
> 
> 标签：wordpress, .htaccess, redirect, subdomain, subdirectory

我想获取我在单个域上的一些子目录，并将它们重定向到与子目录名称匹配的子域。

例如，如果我有：

[http://mysite.com/books](http://mysite.com/books)
[http://mysite.com/games](http://mysite.com/games)
[http://mysite.com/another](http://mysite.com/another)

如果每个子目录下面都有文件、文件夹等：

例如： http: [//mysite.com/books/fiction/bookname](http://mysite.com/books/fiction/bookname)

我希望能够像这样访问这些项目和其中的项目：

[http://books.mysite.com](http://books.mysite.com)
[http://books.mysite.com/fiction/bookname](http://books.mysite.com/fiction/bookname)

我可以定义的任何其他项目也一样：

[http://games.mysite.com](http://games.mysite.com)
[http://whatever.mysite.com/afolder/more/content](http://whatever.mysite.com/afolder/more/content)

我相信我可以用 .htaccess 做到这一点，但我不完全确定正确的代码或如何让它覆盖文件夹中的所有项目。我可以弄清楚如何手动完成每个单独的项目，但这无济于事，因为我必须为数百个网址做这件事。

**编辑**：*更多地扩展我的设置和目标*-

我尝试了在设置域时将域指向子目录的答案，但它不起作用。

这是有关如何设置我的网站的更多信息。在主域上是 WordPress 设置为 WordPress MU 安装。我知道我可以使用带有通配符条目的子域来设置我的 DNS 来避免这种头痛，但是我的主机不允许这样做，并且需要我购买私人服务器，我现在对此不感兴趣因为这比其他任何事情都更像是一个测试/个人项目，并且不会获得足够的关注/流量。

因此，我设置了 WordPressMU 来为我添加的每个新站点创建子目录。现在我总共有5个。主站点（将用于展示其他四个子站点的更新），然后是四个主题特定站点。我希望这些站点能够被它们的子域访问和浏览，而不是子目录。所以我真的认为 .htaccess 是我必须采取的路线，因为我无法将我的子域设置为指向一个实际上并不存在的目录。

PS提前感谢任何/所有帮助和建议。真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:06:33.390

制作子域并选择子域的根文件夹“books”文件夹就足够了

# jquery-mobile - jQuery Mobile：changePage 后内容无法正确加载

> ID：12862965
> 
> 赞同：2
> 
> 时间：2012-10-12T16:01:15.847
> 
> 标签：jquery-mobile

我的应用程序有一个按钮（在 app.html 上），它指向一个带有导航栏（app2.html）的新页面。导航有一个内部链接（工具栏 2），应该显示内部 div“page2”。

当来自带有 changePage() 的按钮时，单击导航时无法显示内容。似乎 reloadPage 不起作用。

app.html 看起来像这样：

```
<body>
    <!-- Home -->
    <div data-role="page" id="page3">
        <div data-role="content">
            <a id="asdf" data-role="button" name="asdf">
                Button
            </a>
        </div>
    </div>
    <script>
        $('#asdf').click(function(){

            $.mobile.changePage('app2.html', {transition: "slidedown", reloadPage: true, changeHash: true });

            });

    </script>
</body> 
```

这是我的 app2.html：

```
<body>
    <!-- Home -->
    <div data-role="page" id="page1">
        <div data-role="content">
            <div id="navigation" data-role="navbar" data-iconpos="right">
                <ul>
                    <li>
                        <a href="app.html" data-theme="" data-icon="">
                            Toolbar1
                        </a>
                    </li>
                    <li>
                        <a href="#page2" data-theme="" data-icon="check">
                            toolbar 2
                        </a>
                    </li>
                    <li>
                        <a href="app.html" data-theme="" data-icon="">
                            Toolbar 3
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div data-role="page" id="page2">
        <div data-role="content">
            <div data-role="header">
                <h3>asdfasd</h3>
            </div>
        </div>
    </div>
 </body> 
```

问题出在哪里？我将 jQuerymobile 1.1.1 与 jQuery 1.7.1 一起使用。

以下是文件： [app.html](http://nopaste.me/paste/123233746150784b48278d0) [app2.html](http://nopaste.me/paste/1094931076507844ba22717)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:02:17.707

第二页中不能有两个 jQuery Mobile 页面。当您单击 app.html 中的链接时，它将向 app2.html 发出 ajax 请求以获取 data-role="page" 并且它只需要在 html 文件中。[您应该阅读单页模板](http://jquerymobile.com/demos/1.2.0/docs/pages/page-template.html)和[多页模板](http://jquerymobile.com/demos/1.2.0/docs/pages/multipage-template.html)之间的区别。

您可以在文档中找到更多信息，查找[“多页文档中的链接”](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)。

tl;dr：您要么需要将所有页面放在一个 HTML 文件中并链接到 id，要么将所有页面放在单独的 HTML 文件中并链接到该文件。

# c - 通过省略号发送“long”和“size_t”的整数提升？

> ID：12862966
> 
> 赞同：3
> 
> 时间：2012-10-12T16:01:16.587
> 
> 标签：c, integer-promotion

从实施的人的角度来看这个问题`printf`。

由于 的参数`printf`通过省略号 ( `...`) 传递，因此它们得到整数提升。我知道`char`，`short`并且`int`升职`int`而`long long`不会升职。对于他们的`unsigned`同行也是如此。

这意味着在读取可变参数时，`va_arg(args, int)`应该使用 for `char`，`short`而应该使用`int`while 。`va_arg(args, long long)``long long`

我的问题是，做`long`并`size_t`获得晋升，如果他们这样做，晋升到什么级别？互联网上有很多关于整数提升的资源，但我还没有看到任何关于这些类型的信息。

PS我希望能参考该标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:13:11.867

C 说（强调我的）：

> (C99, 6.3.1.1p2) " 在表达式中可以使用 int 或 unsigned int 的任何地方都可以使用以下内容：
> 
> — 整数类型的对象或表达式，其整数转换等级小于或等于 int 和 unsigned int 的等级。
> 
> — _Bool、int、signed int 或 unsigned int 类型的位域。
> 
> 如果一个 int 可以表示原始类型的所有值，则将该值转换为 int；否则，它将转换为无符号整数。这些被称为整数提升。48)**所有其他类型都不受整数提升的影响。**"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:16:45.090

的整数转换等级`long`需要大于`int`(6.3.1.1p1) 的等级，因此*即使*具有与 相同的表示（和精度）`va_arg(args, long)`也是必需的。请注意，在大多数 64 位平台上，是 64 位；Windows（一个 LLP64 平台）是一个例外。 *`long``int``long`*

 *`size_t`要求为无符号整数类型（6.5.3.4p5，7.19p2），建议整数转换秩不大于`long int`（7.19p4）；要求其精度至少为 16 位（7.20.3p2，最小值`SIZE_MAX`）。它不需要是（typedef to a）标准整数类型，尽管它是允许的。

那么 的整数转换等级有三种可能性`size_t`：

1.  它小于 的`int`，因此`size_t`参数将被提升为`int`（如果 的精度`size_t`小于 的`int`）或`unsigned int`（如果两种类型具有相同的精度）。无论哪种情况，您都需要编写`va_arg(args, unsigned int)`（即使`size_t`参数被提升为`int`，7.16.1.1p2 也允许使用等效的无符号类型）。
2.  与 的相同`int`，即`size_t`与 的类型相同`unsigned int`。在这种情况下，要么 要么`va_arg(args, unsigned int)`被`va_arg(args, size_t)`允许。
3.  它大于`int`。在这种情况下`va_arg(args, size_t)`必须使用。

请注意，即使 的精度与 的精度`size_t`相同，也可以获得 1 和 3 中的任何一个`int`。

这意味着要`size_t`使用 提取参数`va_arg`，必须知道或推断 的整数转换等级`size_t`。这可以使用类型泛型宏 (6.5.1.1) 来完成：

```
#define va_arg_size_t(args) _Generic((+(sizeof(0))),       \
  int:          (size_t) va_arg((args), unsigned int),     \
  unsigned int: (size_t) va_arg((args), unsigned int),     \
  default:               va_arg((args), size_t)) 
```

如果由上面使用的一元加号运算符`size_t`提升为`int`，那么我们提取一个`unsigned int`; 如果`size_t`提升为`unsigned int`，或者是 typedef `unsigned int`，那么我们提取一个`unsigned int`; 如果它没有被提升并且是与 不同的类型`unsigned int`，那么我们就成功了`default`。我们不能将`size_t`自身作为选项提供，因为如果`size_t`是 typedef for会发生冲突`unsigned int`。

请注意，这是一个不限于 的问题`size_t`，`ptrdiff_t`并且`wchar_t`具有相同的问题（对于后者，`wint_t`可以保持任何`wchar_t`值并且不受提升，但不能保证提升到，与提升到 的保证`wchar_t` *不同*）。我建议标准需要为. （当然，你可以像上面那样使用，但它是在脖子上的痛苦。）`wint_t``char``int``spromo_t``ppromo_t``wpromo_t``stdint.h``_Generic`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T16:51:37.443

类型的参数`long`不会被提升。相关的整数促销`size_t`可以总结如下：

1.  如果`size_t`在范围内`int`，提升到`int`
2.  如果`size_t`在范围内`unsigned int`，提升到`unsigned int`
3.  否则，`size_t`转换排名（因此宽度）大于`unsigned int`并且不会发生促销

最简单的情况是 if`size_t`是 的别名 或 具有比 更大的宽度`unsigned int`。在这些情况下，不会发生任何促销活动，您可以使用`size_t`来阅读可变参数。

边缘情况是

*   `size_t`在范围内`int`
*   `size_t`不在范围内`int`，但在范围内`unsigned int`但实际上不存在`unsigned int`

`int`如果包含 if 的填充`size_t`是与 . 相同宽度的扩展整数类型，则后者可能发生`unsigned int`。

假设整数表示*不*包含填充位，您可以通过读取`unsigned int`可变参数来覆盖这两种边缘情况，这将适用于 C 语言的所有合理实现，尽管可能是未定义的行为。*

# .net - 如何在 .NET 中构建此客户端/服务器应用程序？

> ID：12862967
> 
> 赞同：5
> 
> 时间：2012-10-12T16:01:20.160
> 
> 标签：.net, wcf, architecture, client-server

我们有一个遗留的第 3 方工具（用 C/C++ 开发）。该工具有一个运行 Windows 服务器的服务器组件，该服务器运行作业（复杂的链式长数据库查询）。它还有一个安装在所有用户桌面上的客户端模块，用户将能够添加作业、查看正在运行的作业及其进度、删除作业，即基本上管理作业。我们希望使用 .NET 技术在内部开发这样的工具。

目前我们正在考虑如何构建这样一个工具，并且似乎我们错过了一些关键的难题。

客户端：我们决定在 WPF 中开发客户端桌面应用程序

服务器：目前我们正在考虑将其开发为控制台应用程序，但不太确定如何构建它。

我们的主要问题是

服务器控制台应用程序如何在继续运行作业的同时公开 ASMX 或 WCF Web 服务（以便 WPF 客户端获取作业的状态）？

发生更改时如何将进度更新从服务器推送到 WPF 客户端？

我们正在尝试研究如何做到这一点，但没有找到与该主题相关的任何内容。任何指向文章/指南的指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:22:59.213

您遇到的困惑是假设作业的执行和 WCF 端点是同一件事。我会将其分为三个主要项目：

1.  具有用于作业管理的 UI 元素的客户端应用程序。
2.  WCF 服务端点检索作业信息并发送创建/删除作业请求。
3.  运行作业的应用程序。

**客户端应用程序**

客户端应用程序应通过 WCF 服务检索作业数据。您将提供用于查看正在执行的作业/创建作业/删除作业等的屏幕。

**WCF 服务**

WCF 服务将公开客户端应用程序所需的端点。这可能包括以下项目：CreateJob、ViewJobs、DeleteJob 等。该服务应该读取/写入您的数据库后端。

**申请工作**

工作应用程序将轮询新/已删除的工作并执行完成工作所需的任何操作。它将更新 WCF 服务从中读取的数据库后端中的作业状态。这可能是 SQL 作业、Windows 服务、控制台应用程序等（我可能会将其设为 Windows 服务，因为您可能想要一直运行的东西来处理作业）。

**问题**

`How can a server console application expose ASMX or WCF web services(so that WPF clients get the status of the jobs) WHILE CONTINUING TO RUN THE JOBS?`

通过将 WCF 服务从运行作业的应用程序中分离出来，这将被否定。注意：您可以拥有一个托管 WCF 和作业执行器的控制台应用程序，但在概念上将它们视为独立的事物（托管在同一个控制台应用程序中只是一个实现细节）。

`How to push progress updates from server to the WPF clients when there is a change?`

我不会这样做的。我会让 UI 不时轮询或提供刷新按钮以通过 WCF 端点检索状态。

如果您绝对需要这样做，您需要作业执行器在运行作业时发布消息，并且客户端应用程序需要接收这些消息（可能是 MSMQ、服务总线实现、BizTalk 等）。

**为什么我更喜欢轮询而不是服务器推送**

现在我想起来了，我可能会在某些情况下使用 push 风格，而在某些情况下我会进行投票。

如果我有许多异地客户端（通常通过 VPN 或通过 Internet 连接），我会让客户端轮询，因为带宽和网络延迟成本过高。如果客户端数量很高，则需要将每个更新消息发送给每个订阅客户端。在这种情况下，我倾向于去问不要告诉模型。

如果客户在内部并且您需要将实时信息流式传输给他们，那么推送模型将更有意义。在这种情况下，您可以客户端连接到服务器应用程序，并且他们可以通过连接来回发送消息（我没有亲自这样做，所以我没有关于如何设置的建议，希望比套接字更高级别的东西）。

如果您希望在发生更新时收到消息，但客户端位于许多不同的地方，那么 pub/sub 模型可能是最好的。在 pub/sub 中，应用程序会在更新消息发生时推送它们。消息传递系统将检查是否有任何客户端正在订阅消息，并且对于正在订阅的所有客户端，消息传递系统将消息的副本转发给它们。在您的示例中，客户端将`subscribe`处理消息，并且消息传递系统会将更新发送到客户端指定的位置（客户端需要一种接受消息的方法）。NServiceBus、BizTalk 是此类通信的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:11:33.930

听起来您在询问 WCF 服务的托管选项。有四个这样的选项：

1.  托管应用程序中的自托管 - 即创建一个控制台应用程序、另一个 WPF 应用程序等，然后创建一个服务并在它（控制台应用程序）处于活动状态时使其保持活动状态。
2.  托管 Windows 服务 - 创建一个 Windows 服务，该服务可以在 Windows 启动时自动启动
3.  Internet 信息服务 (IIS) - 托管它类似于 ASP.NET 服务
4.  Windows Process Activation Service (WAS) - 新的激活服务，我没有亲自使用过。

完整的细节[在这里](http://msdn.microsoft.com/en-us/library/ms730158.aspx)。

要完全回答您的问题，我不会使用 ASMX 服务。有关原因的详细列表，请参阅[此问题](https://stackoverflow.com/questions/1941481/what-are-the-benefits-of-using-wcf-over-asmx-web-services)。

# mysql - 按文本字段分组时的 GROUP_CONCAT() 行数

> ID：12862968
> 
> 赞同：9
> 
> 时间：2012-10-12T16:01:23.390
> 
> 标签：mysql, select, group-by, group-concat

```
DROP TABLE IF EXISTS `table`;
CREATE TABLE `table` (
  `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `text` text COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `table` VALUES ('1', 'Unpacked reserved sir offering bed judgment may and quitting speaking. Is do be improved raptures offering required in replying raillery. Stairs ladies friend by in mutual an no. Mr hence chief he cause. Whole no doors on hoped. Mile tell if help they ye full name. \r\n\r\nLadyship it daughter securing procured or am moreover mr. Put sir she exercise vicinity cheerful wondered. Continual say suspicion provision you neglected sir curiosity unwilling. Simplicity end themselves increasing led day sympathize yet. General windows effects not are drawing man garrets. Common indeed garden you his ladies out yet. Preference imprudence contrasted to remarkably in on. Taken now you him trees tears any. Her object giving end sister except oppose. \r\n\r\nWas justice improve age article between. No projection as up preference reasonably delightful celebrated. Preserved and abilities assurance tolerably breakfast use saw. And painted letters forming far village elderly compact. Her rest west each spot his and you knew. Estate gay wooded depart six far her. Of we be have it lose gate bred. Do separate removing or expenses in. Had covered but evident chapter matters anxious.');
INSERT INTO `table` VALUES ('2', 'Unpacked reserved sir offering bed judgment may and quitting speaking. Is do be improved raptures offering required in replying raillery. Stairs ladies friend by in mutual an no. Mr hence chief he cause. Whole no doors on hoped. Mile tell if help they ye full name. \r\n\r\nLadyship it daughter securing procured or am moreover mr. Put sir she exercise vicinity cheerful wondered. Continual say suspicion provision you neglected sir curiosity unwilling. Simplicity end themselves increasing led day sympathize yet. General windows effects not are drawing man garrets. Common indeed garden you his ladies out yet. Preference imprudence contrasted to remarkably in on. Taken now you him trees tears any. Her object giving end sister except oppose. \r\n\r\nWas justice improve age article between. No projection as up preference reasonably delightful celebrated. Preserved and abilities assurance tolerably breakfast use saw. And painted letters forming far village elderly compact. Her rest west each spot his and you knew. Estate gay wooded depart six far her. Of we be have it lose gate bred. Do separate removing or expenses in. Had covered but evident chapter matters anxious'); 
```

在不使用结果集的情况下运行`GROUP BY`查询时`GROUP_CONCAT()`符合预期（显示两行，每个变体一个`text`）：

```
SELECT
    `text`
FROM
    `table`
GROUP BY
    `text`;

+-----------------------------------+
| text                              |
+-----------------------------------+
| Unpacked reserved sir offering... |
| Unpacked reserved sir offering... |
+-----------------------------------+
2 rows in set (0.02 sec) 
```

但是，当使用结果集运行相同的查询时`GROUP_CONCAT()`，结果集不符合预期（显示一行具有两个`id`字段的串联字符串）：

```
SELECT
    GROUP_CONCAT(`id` SEPARATOR ', ') AS ids
FROM
    `table`
GROUP BY
    `text`;

+------+
| ids  |
+------+
| 1, 2 |
+------+
1 row in set (0.00 sec) 
```

**我的问题：**

为什么使用`GROUP_CONCAT()`会影响返回的行数？

我最初的假设是`GROUP_CONCAT_MAX_LEN`与它有关（我的设置为 1024）但肯定只会影响`GROUP_CONCAT()`，而不是`GROUP BY`（而且，正如您可能注意到的，我`GROUP_CONCAT()`在`id`场上使用，而不是`text`场上，以及结果甚至没有接近超过`GROUP_CONCAT_MAX_LEN`）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:27:57.817

您必须根据需要将**max_sort_length**更改为更高数量的会话或全局。默认情况下，它的值为**1024**字节，您的字符串包含**1170**字节的数据。通过增加大小，它将为**GROUP_CONCAT**提供两行。

检查此链接[**max_sort_length**](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_max_sort_length)

```
SELECT `text` FROM `table` GROUP BY `text`;

SET SESSION max_sort_length = 2000;
SELECT GROUP_CONCAT(`id` SEPARATOR ', ') AS ids FROM `table` GROUP BY `text`; 
```

检查[**SQL FIDDLE 演示**](http://www.sqlfiddle.com/#!2/47524/1)

**编辑：** **BLOB**和**TEXT**值不能可靠地用于**GROUP BY**、**ORDER BY**或**DISTINCT**。在这些情况下比较 BLOB 值时，只使用第一个**max_sort_length字节。****max_sort_length**的默认值为1024，可以在服务器启动时或运行时更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:27:35.350

看来您遇到了 MySQL 的默认 GROUP_CONCAT_MAX_LEN。您的字符串长度为 1178，这肯定超过了默认值 1024。这意味着，如果值的差异晚于 1024，MySQL 将简单地忽略它，因为前 1024 个字符完全相同。这是对 GROUP_CONCAT 行为的限制，而不是对 GROUP 的限制。

您可以在 MySQL 的 my.cnf 文件中将其放大。

有关更多详细信息，请参见此处：

[http://www.coderanch.com/t/422632/JDBC/databases/increase-group-concat-max-len](http://www.coderanch.com/t/422632/JDBC/databases/increase-group-concat-max-len)

# c++ - 将私有库静态链接到公共库以隐藏符号

> ID：12862975
> 
> 赞同：10
> 
> 时间：2012-10-12T16:02:04.937
> 
> 标签：c++, static, symbols, collision

考虑以下：

*   我正在用 C++ 开发一个静态库 X，它在内部使用著名的静态库 Y v2.0；

*   我只想分发一个库 X'，即 X 与 Y 静态链接/合并以供其内部使用；

*   开发人员想在他的可执行文件中使用 X'；

*   此外，他需要 Y v1.0（不像我那样需要 v2.0）；

*   Y v1.0 和 v2.0 有一些共同的符号，而这些共同的符号中的一些也表现不同。

我开发 X 时严格要求将 Y v2.0 用于某些内部业务。这就是说我无论如何都不能恢复到 Y v1.0。
另一方面，开发者对使用 Y v1.0 也有类似的限制。

正如您已经争论的那样，问题是：如何在不导出 Y 符号以避免冲突的情况下将 Y 链接到 X 中？Y 很成熟，可能我不想修改它的源代码或构建设置（如果公开可用）。

为了把更多的东西放到地球上，我正在设计一个 SDK，它肯定需要一些 3rd 方库，比如说 zlib。在我的开发中，我将依赖 zlib v1.2.3.4.5.rc6，因为我广泛且成功地使用和测试了它，如果我更改版本，我负担不起所需的 SDK 测试/修复。
SDK 将提供的所有静态或动态链接库都必须隐藏第 3 方静态库。

潜在客户可能会遇到类似的限制（他需要 zlib v7.8.9），那么如何避免符号冲突？同样，可能不更改原始源代码（命名空间等）。

更复杂的是，SDK 是多平台的，这意味着我需要不同的方法来解决问题，具体取决于平台（Windows、Linux、Mac OS、iOS、Android 等）和使用的编译器（例如 MSVC++ 和 g++） .

谢谢你。

**更新**
似乎我是这个问题的 VENDOR2： [Linking with multiple versions of a library](https://stackoverflow.com/questions/3232822/linking-with-multiple-versions-of-a-library)
bstpierre's answer 似乎是一个可行的解决方案，但我不确定它是否有效，或者它是否可以在 *nix 以外的操作系统上复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T23:03:42.100

我在使用静态库时遇到过这个问题很多次，最近一次是使用 MSVCRT。正如一位评论者指出的那样，使用单个可执行文件时，单一定义规则会成为障碍。除了修补二进制文件，我真的没有办法解决这个问题。而且您必须“深入”地执行此操作-捕获静态库 Y (zlib) 对其自己的外部链接对象所做的所有内部引用。

在这种情况下，我建议使用动态库（DLL 或 SO）。它将增加一些部署复杂性。但它提供了一个可执行的“防火墙”，允许同名的全局对象驻留在每个二进制文件中而不会发生冲突。即便如此，如果应用程序和 DLL 都具有冲突的第三方依赖项，它可能会造成问题。不过，可能是最好的选择。

# php - mssql_connect 慢（Linux 服务器）

> ID：12862976
> 
> 赞同：2
> 
> 时间：2012-10-12T16:02:09.437
> 
> 标签：php, sql-server, freetds

有谁知道为什么 mssql_connect 会很慢？PHP 在带有 FreeTDS 的 Linux 服务器上运行。我正在尝试连接到远程数据库。当我从 PHP 连接时，大约需要 3 秒，但如果我从 shell 使用 FreeTDS tsql 命令，它会在一秒钟内连接，因此它能够更快地连接。是否有我可以更改的设置或我应该使用不同的驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:37:03.867

您应该开始使用带有 MSSQL 驱动程序支持的 PDO。

更多信息：

> [http://php.net/manual/en/ref.pdo-dblib.php](http://php.net/manual/en/ref.pdo-dblib.php)

还有一些例子：

> [通过php和linux使用pdo连接mssql](https://stackoverflow.com/questions/5953882/connecting-to-mssql-using-pdo-through-php-and-linux)

# c - 在 C 函数中需要“nmem”和“size”参数是什么？

> ID：12862981
> 
> 赞同：8
> 
> 时间：2012-10-12T16:02:33.090
> 
> 标签：c, linux, memory, parameters

> **可能重复：**
> [c malloc 和 calloc 的区别](https://stackoverflow.com/questions/1538420/c-difference-between-malloc-and-calloc)
> [为什么 calloc 需要两个参数而 malloc 只需要一个参数？](https://stackoverflow.com/questions/12555911/why-does-calloc-require-two-parameters-and-malloc-just-one)

我注意到许多 C 函数调用特别是那些处理内存或文件操作的函数，但并非所有函数都使用这两个参数。例如 malloc 传递了一个参数，即所需内存空间的大小（以字节为单位）。另一方面，Calloc 被传递了两个参数，一个元素的字节大小和元素的数量（大小和 nmem）。还有其他函数也使用这些大小和 nmem 参数。

本质上，calloc 调用将分配与调用 malloc(nmem size) 相同的内存量，*所以真正发生的只是星号 (* ) 被替换为逗号 (,)。至少这是我能从我工作的更高层次上知道的全部内容。我看不出调用 calloc(1, nmem *size)、calloc(nmem* size, 1) 或 calloc(nmem, size) 有什么不同。

是否在较低级别上实际发生了某些事情，使得调用例如 calloc(1, nmem*size) 与 calloc(nmem, size) 根本不同？

编辑：我知道 calloc 和 malloc 之间的功能区别。我对为什么参数存在差异感兴趣。还有其他函数使用 2 个大小参数作为总大小（fread、fwrite 等）。我不关心具体的函数，而是为什么函数中使用的总大小有两个参数，而实际上总大小变成了两个参数相乘。我发现大多数时候，当我使用这些函数时，我在“size”参数中使用我需要的大小，在“nmem”（有时是“count”等）参数中使用“1”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:15:51.810

在对该问题的评论中，我写道，它`calloc()`可以为重要的平台提供更好的内存对齐。我还没有找到任何支持（还）的东西。我很确定这是 VMS/VAXC 编译器的一个特性，但它的源代码很少。

* * *

然而，我确实发现了这一点，`calloc()`并且`alloc()`与 1975 年 5 月发布的 Unix V6 同时出现。在 11 个月前发布的 V5 中，这两个功能都不存在。内核和运行时库（以及汇编器和 C 编译器）是用汇编语言编写的。

在 V6 版本中，[calloc 被实现](http://minnie.tuhs.org/cgi-bin/utree.pl?file=V6/usr/source/iolib/calloc.c)为四行源代码模块：

```
calloc(n, s)
{
return(alloc(n*s));
} 
```

`calloc()`不清除分配的内存；看，在 V6[`alloc()`](http://minnie.tuhs.org/cgi-bin/utree.pl?file=V6/usr/source/iolib/alloc.c)中没有`man`页面；`calloc()`但是[手册页`alloc()`](http://minnie.tuhs.org/cgi-bin/utree.pl?file=V6/usr/man/man3/alloc.3)：

> 说明
> **Alloc**和**free**提供了一个简单的通用核心管理包。 *Alloc*的大小以字节为单位；它返回一个指向一个区域的指针，该区域的大小至少是偶数，因此可以容纳任何类型的对象。*free*的参数 是指向先前由*alloc 分配的区域的指针；*该空间可供进一步分配。
> 
> 不用说，如果*alloc*分配的空间被溢出或者某个随机数被交给*free，就会导致严重的混乱。*
> 
> 该例程使用首次拟合算法将正在释放的块与其他已经空闲的块合并。 当没有合适的可用空间时，它调用*sbrk*（参见*“break (II)）”从系统中获取更多内核。*
> 
> DIAGNOSTICS如果没有可用内核，则
> 返回**-1 。**
> 
> BUGS
> 分配的内存包含垃圾而不是被清除。

`NULL`在内存耗尽的情况下甚至不返回！

`calloc()`1979 年 1 月首次正式出现在 UNIX V7 中，同时还有其他一些[改进](http://minnie.tuhs.org/cgi-bin/utree.pl?file=V7/usr/man/man3/malloc.3)：

*   `calloc()`清除返回的内存。
*   `alloc()`改名为`malloc()`
*   `realloc()`出现了
*   在内存耗尽或堆错误的情况下，函数“返回空指针 (0)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:28:41.630

> 在较低级别上是否确实发生了某些事情，使得调用例如 calloc(1, nmem*size) 与 calloc(nmem, size) 根本不同？

这种解释事物的尝试完全依赖于 libc 的实现——因此需要特定 libc 作者的赞赏：

由于`calloc()`正在归零内存，其基本原理可能是它可能（可能）在执行`mult`.

相比之下，`malloc()`有机会使用预先计算的值，从而可能减少调用中可能更容易满足的开销。

不要忘记，C 是在每个 CPU 周期都耗费大量成本的时候设计的——因此与许多其他“高级”语言相比，它的设计非常精益。

C Dennis Ritchie 的作者可能会更好地回答这个问题。

# ios - 保留一个指向 [UIAccelerometer sharedAccelerometer] 的 ivar？

> ID：12862983
> 
> 赞同：0
> 
> 时间：2012-10-12T16:02:37.600
> 
> 标签：ios, singleton, uiaccelerometer

我正在使用手动引用计数和 Xcode 4.5。

我声明了一个 ivar：

`UIAccelerometer *accelerometer;`

加速度计不是财产。我在一种方法中有这个代码：

```
accelerometer = [UIAccelerometer sharedAccelerometer];
accelerometer.delegate = self; 
```

在第二种方法中，我有：

```
accelerometer.delegate = nil; 
```

在另一种稍后运行的方法中，我有：

```
accelerometer.delegate = self; 
```

通过这个设置，我偶尔（很少而且看似随机）得到以下中止：

> 'NSInvalidArgumentException'，原因：'-[NSPathStore2 setDelegate:]：无法识别的选择器发送到实例 xxx

在寻找这种中止的原因后，我尝试在第一次使用加速度计时保留它，之后没有中止。但我担心保留并没有解决真正的问题。考虑这个“解决方案”的原因是中止消息抱怨调用 setDelegate 并且在似乎相关的代码部分中，我设置的唯一代表是加速度计。但我不明白为什么这应该解决它，我担心保留只是以一种恰好隐藏问题的方式转移代码。

我理解的方式是

```
accelerometer = [UIAccelerometer sharedAccelerometer]; 
```

创建一个单例实例，该实例在其所在的实例的持续时间内具有相同的地址，并且该地址被分配给加速度计，该地址在实例的持续时间内也存在。如果是这样，为什么保留会改变什么？

sharedAccelerometer 单例可以在它所在的实例被释放之前被释放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:12:59.637

如果加速度计是*ivar*，保留你放在那里的任何对象都是正确的......所以这段代码

```
accelerometer = [UIAccelerometer sharedAccelerometer];
accelerometer.delegate = self; 
```

应该

```
accelerometer = [ [ UIAccelerometer sharedAccelerometer ] retain ] ;
accelerometer.delegate = self; 
```

并在`-dealloc`中添加

```
[ accelerometer release ] ;
accelerometer = nil ; 
```

# ios - 以编程方式滚动时在 UIScrollView 上显示滚动指示器

> ID：12862984
> 
> 赞同：3
> 
> 时间：2012-10-12T16:02:41.500
> 
> 标签：ios, cocoa-touch, uiscrollview

**编辑**：这个问题的症结在于滚动指示器在程序滚动期间不显示，但我希望它们显示。我最初的问题（在下面提供）假设这与 相关`userInteractionEnabled`，但事实并非如此。主从 UIScrollView 的提及也可能分散我的核心问题（在编程滚动期间需要显示滚动指示器）。向那些根据我的误导性假设/信息回答或评论的人道歉。

**可能的解决方案：**我发现这样做的唯一方法是使用滚动指示器是实例的事​​实，`UIImageView`并在其上使用类别来破解 alpha。本文[展示](http://www.developers-life.com/scrollview-with-scrolls-indicators-which-are-shown-all-the-time.html)了这种方法。然后是使用标签和滚动视图委托方法在编程滚动之前永久打开 alpha 并在滚动完成时永久关闭的情况。虽然这感觉很hacky，所以欢迎任何进一步的建议！

**此行以下的所有内容都是原始未经编辑的问题，用于为用户的答案和评论提供上下文**

`userInteractionEnabled`在`UIScrollView`对象中设置为`NO`似乎在程序滚动时禁用滚动指示器。即使您有`self.showsVerticalScrollIndicator = self.showsHorizontalScrollIndicator = YES;`

有没有办法以编程方式滚动滚动视图但仍显示指标？

（提供一些上下文：我有一个从属滚动视图，它通过连接滚动视图委托回调并将内容偏移量传递给从属滚动视图来模仿主滚动视图。但是，我不希望用户能够直接操作从属滚动视图，但我确实想要滚动指示器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:00:36.450

尝试将 UIScrollView 的 scrollEnabled 属性设置为 false，而不是将 userInteractionEnabled 设置为 false。医生。说“禁用滚动时，滚动视图不接受触摸事件”，这应该意味着您仍然应该能够以编程方式滚动 UIScrollView。希望这会有所帮助 - 没有测试过让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:07:43.187

您可以尝试在滚动视图上放置一个透明的 UIView (alpha == 0.0)（但作为视图层次结构中的兄弟，而不是子视图）。在透明视图上将 touchesEnabled 设置为 YES，它将拦截指向滚动视图的触摸。

# android - 将单选按钮数据发送到下一个活动

> ID：12862987
> 
> 赞同：4
> 
> 时间：2012-10-12T16:02:54.597
> 
> 标签：android, button, android-activity, radio-button

我试图让用户输入他们的姓名，然后单击三个单选按钮之一，然后单击提交按钮。在下一个活动中，它将显示他们的姓名和他们选择的单选按钮。我设法能够发送名称，但我不确定如何发送单选按钮选择。有人可以帮忙吗？

这就是我在主要活动布局 .xml 中的内容

```
<EditText
    android:id="@+id/operatorName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="25dp"
    android:ems="10"
    android:hint="@string/operator_name" />

<RadioGroup
    android:id="@+id/radioShifts"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_marginTop="10dp" >
    <RadioButton
        android:id="@+id/radioButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio1"
        android:checked="true"
        android:onClick="onRadioButtonClicked" />
    <RadioButton
        android:id="@+id/radioButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio2"
        android:onClick="onRadioButtonClicked" />
    <RadioButton
        android:id="@+id/radioButton3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/radio3"
        android:onClick="onRadioButtonClicked" />
</RadioGroup>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="28dp"
    android:text="@string/button1"
    android:onClick="onButton1" /> 
```

我在 main_activity .java 文件中有这个：

```
 public final static String OP_NAME = "com.cyapps.downtimer.OPNAME";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void onRadioButtonClicked(View view) {
        // Is the button now checked?
        boolean checked = ((RadioButton) view).isChecked();
        // Check which radio button was clicked
        switch(view.getId()) {
            case R.id.radioButton1:
                if (checked)
                    break;
            case R.id.radioButton2:
                if (checked)
                    break;
            case R.id.radioButton3:
                if (checked)
                    break;
        }
/*        Intent intent = new Intent(this, WinderDTActivity.class);
        EditText button = (EditText) findViewById(RadioGroup.getCheckedRadioButtonId());
        String radioChosen = button.getText().toString();
        intent.putExtra(RADIO_CHOSEN, radioChosen);*/
    }

    public void onButton1(View view) {
        Intent intent = new Intent(this, WinderDTActivity.class);
        EditText editText = (EditText) findViewById(R.id.operatorName);
        String opName = editText.getText().toString();
        intent.putExtra(OP_NAME, opName);
        startActivity(intent);
    } 
```

/* */ 中的代码是我认为我应该做的。但我不确定。有人帮忙吗？我会很感激的。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:06:48.167

```
String str; // store the text corresponding to  the RadioButton which is clicked 

   switch(view.getId()) {
                case R.id.radioButton1:
                    if (checked)
                     str = "button1Text";
                        break;
                case R.id.radioButton2:
                    if (checked) str = "button2Text";
                        break;
                case R.id.radioButton3:
                    if (checked) str = "button3Text";
                        break;
         }

            Intent intent = new Intent(this, WinderDTActivity.class);
            intent.putExtra("radioChosen", str); // pass "str" to the next Activity 
```

**编辑：** 要在下一个活动中接收数据，请使用

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    String message= extras.getString("radioChosen");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T16:08:58.030

**-**用于`switch`选择单选按钮。

```
switch (types.getCheckedRadioButtonId()) {
      case R.id.sit_down:
        intent.putExtra(SIT_DOWN, "sitdown");
        break;
      case R.id.take_out:
        intent.putExtra(TAKE_OUT, "takeout");
        break;

      } 
```

**-**现在只需执行`startActivity(intent);`

# c# - CSVReader 在最后一行最后一列抛出错误

> ID：12862993
> 
> 赞同：3
> 
> 时间：2012-10-12T16:03:35.867
> 
> 标签：c#, csv, filestream

我在我的项目中使用 CSVReader 来读取 Windows 服务中的 .csv 文件。我们将 .csv 文件传递​​给 CSVReader 以处理文件，它工作正常。但最近我们决定将 csv 文件保存到数据库表并从那里读取。当用户提交 csv 文件进行处理时，我们的 aspx 页面将读取 csv 文件并将其转换为字节数组并保存到数据库中。服务将读取表并获取字节数组并将其转换为 Filestream。此流被传递给 CSVReader 以进行进一步的工作。现在它为最后一行最后一列抛出错误。它仅在保存并从数据库中读取后才会发生。我收到以下错误。不知道如何解决这个问题。

“CSV 在位置 '494' 的记录 '9' 字段 '3 附近似乎已损坏。当前原始数据：'

听到的是代码将文件转换为字节数组.....

```
try
{
     fs = new FileStream(filepath, FileMode.Open);
     fsbuffer = new byte[fs.Length];
     fs.Read(fsbuffer, 0, (int)fs.Length);
} 
```

从 DB 读取到字节数组......

```
myobject.FileByteArray = ObjectToByteArray(row);

public byte[] ObjectToByteArray(DataRow row)
        {
            if (row["fileBytearray"] == null)
                return null;
            try
            {
                BinaryFormatter bf = new BinaryFormatter();
                System.IO.MemoryStream ms = new System.IO.MemoryStream();

                bf.Serialize(ms, row["fileBytearray"]);
                return ms.ToArray();
            }
    }

Stream fileStream = new MemoryStream(myobject.FileByteArray)
using (CsvReader csv = 
                        new CsvReader(new StreamReader(fileStream, System.Text.Encoding.UTF7), hasHeader, ',')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:48:49.010

我无法重新创建您的问题，因此，由于从头到尾没有看到保存和加载，我建议尝试以下方法进行检索：

```
public MemoryStream LoadReportData(int rowId)
{

  MemoryStream stream = new MemoryStream();

  using (BinaryWriter writer = new BinaryWriter(stream))
  {

    using (DbConnection connection = db.CreateConnection())
    {
      DbCommand selectCommand = "SELECT CSVData FROM YourTable WHERE Id = @rowId";

      selectCommand.Connection = connection;

      db.AddInParameter(selectCommand, "@rowId", DbType.Int32, rowId);
      connection.Open();

      using (IDataReader reader = selectCommand.ExecuteReader(CommandBehavior.SequentialAccess))
      {

        while (reader.Read())
        {

          int startIndex = 0;
          int bufferSize = 8192;

          byte[] buffer = new byte[bufferSize];

          long retVal = reader.GetBytes(0, startIndex, buffer, 0, bufferSize);

          while (retVal == bufferSize)
          {

            writer.Write(buffer);
            writer.Flush();

            startIndex += bufferSize;
            retVal = reader.GetBytes(0, startIndex, buffer, 0, bufferSize);

          }

          writer.Write(buffer, 0, (int)retVal);
        }

      }

    }
  }

  return stream;

} 
```

您需要将 selectCommand sql 和参数替换为您用于返回数据的任何 sql。

此方法使用 a`SqlDataReader`从适当的行（在我的示例中由 rowId 标识）和列（`CSVData`在我的示例中调用）顺序读取字节，这应该避免在退出时出现任何截断问题（可能是您的 DataTable 对象仅返回第一个`n`字节）。MemoryStream 对象可用于将 CSV 文件重新保存到文件系统以进行测试，或直接馈送到您的 CSVReader。

如果您可以发布您的`Save`方法（您实际上将数据保存到数据库中），那么我们也可以检查它以确保那里也不会发生截断。

我现在可以提出的另一个建议是将文件加载到`byte`数组中。如果您要一次性加载文件，那么您可以简单地替换：

```
try
{
     fs = new FileStream(filepath, FileMode.Open);
     fsbuffer = new byte[fs.Length];
     fs.Read(fsbuffer, 0, (int)fs.Length);
} 
```

和

```
byte[] fileBytes = File.ReadAllBytes(filepath); 
```

# design-patterns - LED模式有限状态机verilog

> ID：12862994
> 
> 赞同：2
> 
> 时间：2012-10-12T16:03:46.610
> 
> 标签：design-patterns, verilog, fsm

我想知道是否有人可以阐明如何在 verilog 中编写一个 LED 模式 fsm，它在 8 个 LED 上产生 4 种不同的模式，并且 LED 会改变每个滴答脉冲，有 4 个按钮可以触发 4 种不同的模式，每种模式将触发 8 个 LED 以模式移动，即从左到右，从右到左。

我写了一个顺序逻辑，但我不知道如何将 LED 的模式插入到每个状态中。这是我的代码：

```
`timescale 1ns / 1ps
module pattern_fsm(
input [3:0] mode,
input tick,
input clk,
input reset,
output reg [7:0] Led
);

 reg [3:0] state, nextstate;

 parameter s0 = 4'b0001;
 parameter s1 = 4'b0010;
 parameter s2 = 4'b0100;
 parameter s3 = 4'b1000;

 always @(posedge clk, posedge reset)
    if(reset) 
        state <= s0;
    else
        state <= nextstate;

always @(*)
    begin
        case(state)
            s0: if(mode == 4'b0001) nextstate = s0;
                    else nextstate = s3;
            s1: if(mode == 4'b0010) nextstate = s1;
                    else nextstate = s0;
            s2: if(mode == 4'b0100) nextstate = s2;
                    else nextstate = s1;
            s3: if(mode == 4'b1000) nextstate = s3;
                    else nextstate = s2;
            default: nextstate = s0;
        endcase
    end

always @(state)
    begin
        case(state)
            s0: Led = 8'b00000001;
            s1: Led = 8'b00000010;
            s2: Led = 8'b00000011;
            s3: Led = 8'b00000100;
        endcase
    end

endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:34:57.753

也许你可以使用移位操作？

```
always @(posedge clk or posedge reset )
    if(reset) begin
        Led <= 8'h00;
    end
    else begin
        case(state)
            s0: Led <= 8'h01;              // a single Led lit 
            s1: Led <= {Led[0], Led[7:1]}; // rotate right
            s2: Led <= {Led[6:0], Led[7]}; // rotate left
            s3: Led <= ~Led;               // flip?
            default: Led <= Led;           // do nothing
        endcase
    end 
```

我希望你发现这很有启发性。我还没有测试过这段代码，所以要小心......

# sql - 无法将 SQL 文件添加到 Git 存储库？

> ID：12862995
> 
> 赞同：5
> 
> 时间：2012-10-12T16:03:46.193
> 
> 标签：sql, git, repository

我需要将一个 SQL 文件添加到我的 Git 存储库。出于某种原因，命令行上的 Tower 或 Git 看不到我添加了一个以 .sql 结尾的新文件。

我尝试创建一个空的 .sql 并删除 .gitignore 中的所有内容，但它仍然看不到它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T16:28:39.830

您可能设置了全局 gitignore。GitHub 上的此页面[https://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)建议将 SQL 文件包含在全局 git 忽略中。

按照该页面上的说明设置您自己的全局规则。