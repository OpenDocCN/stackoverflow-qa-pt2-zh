# StackOverflow 问答 13721000-13721999

# c# - 动态构建查询

> ID：13721002
> 
> 赞同：1
> 
> 时间：2012-12-05T10:24:30.077
> 
> 标签：c#, .net, linq, dynamic

您好，感谢您花时间回答我的问题。

在使用 Java 一年半之后，我决定切换回 .NET。我必须说我在 VS2012 中有宾至如归的感觉。

在使用 Java 时，我遇到了一个 hibernate 实现，它可以轻松创建动态查询。

想象一下，我有一个包含 5 个字段的表单，其中只有一个，任何一个，必须填充，以便我过滤结果。

有没有办法可以在 C# 中执行以下操作：

```
if(txtMunicipality.text.length > 0){
   (x => x.municipality == txtMunicipality.text)
}

if(chkboxIsFinished){
   (x => x.isfinished == true)
} 
```

ETC..

因此，我对每个字段进行检查，如果已填充该值，则将该条件添加到查询中。在完成检查后，我执行查询。有没有办法在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:36:51.490

最简单的方法是组合两个查询，即

```
IQueryable<Foo> query = ... // or possibly IEnumerable<Foo>
if(!string.IsNullOrEmpty(txtMunicipality.text)) {
    query = query.Where(x => x.municipality == txtMunicipality.text);
}
if(chkboxIsFinished) {
    query = query.Where(x.isfinished);
} 
```

您*也*可以直接组合表达式树和委托；如果您需要，请指出您拥有的：表达式树与委托。

* * *

编辑：这是你如何组合*表达式*而不是查询：

```
static class Program
{
    static void Main()
    {
        Expression<Func<int, bool>> exp1 = x => x > 4;
        Expression<Func<int, bool>> exp2 = x => x < 10;
        Expression<Func<int, bool>> exp3 = x => x == 36;

        var combined = (exp1.AndAlso(exp2)).OrElse(exp3);
        // ^^^ equiv to x => (x > 4 && x < 10) || x == 36
    }
    static Expression<Func<T, bool>> OrElse<T>(this Expression<Func<T, bool>> x, Expression<Func<T, bool>> y)
    {   // trivial cases
        if (x == null) return y;
        if (y == null) return x;

        // rewrite using the parameter from x throughout
        return Expression.Lambda<Func<T, bool>>(
            Expression.OrElse(
                x.Body,
                SwapVisitor.Replace(y.Body, y.Parameters[0], x.Parameters[0])
            ), x.Parameters);
    }
    static Expression<Func<T, bool>> AndAlso<T>(this Expression<Func<T, bool>> x, Expression<Func<T, bool>> y)
    {   // trivial cases
        if (x == null) return y;
        if (y == null) return x;

        // rewrite using the parameter from x throughout
        return Expression.Lambda<Func<T, bool>>(
            Expression.AndAlso(
                x.Body,
                SwapVisitor.Replace(y.Body, y.Parameters[0], x.Parameters[0])
            ), x.Parameters);
    }
    class SwapVisitor : ExpressionVisitor
    {
        public static Expression Replace(Expression body, Expression from, Expression to)
        {
            return new SwapVisitor(from, to).Visit(body);
        }
        private readonly Expression from, to;
        private SwapVisitor(Expression from, Expression to)
        {
            this.from = from;
            this.to = to;
        }
        public override Expression Visit(Expression node)
        {
            return node == from ? to : base.Visit(node);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:36:25.600

是的，有可能。最简单的方法是使用**[委托](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)**，尤其是匿名委托。

例如：

```
Func<YourEntity, bool> filter = (_ => true); // Default value.

if (txtMunicipality.text.length > 0)
{
    filter = (x => x.municipality == txtMunicipality.text);
}
else if (chkboxIsFinished)
{
    filter = (x => x.isfinished == true);
} 
```

然后您可以`filter`在查询中使用委托，例如在`Where`语句中（我想这是您的意图 - 如果不是，该示例仍然相关，只是不直接适用）

```
/ LINQ syntax.
var entities = from e in context
               where filter(e)
               select e;

// Method syntax.
var entities = context.Where(x => filter(x));
// Or simply:
var entities = context.Where(filter); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:36:58.057

在本文中，您可以找到一些有用的扩展方法，它们允许您组合谓词（它也适用于 NHibernate）：

[LINQ to Entities：组合谓词](http://blogs.msdn.com/b/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx)

然后，您可以像这样构建 lambda 表达式：

```
Expression<Func<MyObject, bool>> predicate = x => true;

if(txtMunicipality.text.length > 0){
   predicate = predicate.And(x => x.municipality  == txtMunicipality.text);
}

if(chkboxIsFinished){
   predicate = predicate.And(x => x.isfinished == true);
} 
```

# php - 从 MYSQL 数据库获取数据时出错

> ID：13721004
> 
> 赞同：0
> 
> 时间：2012-12-05T10:24:31.637
> 
> 标签：php, mysql, json

当我检索包含特殊字符的数据时，例如“，”，'' - ？在 PHP 文件中形成 MYSqL 数据库，出现“找不到数据”之类的错误。

键盘类型字符检索成功，但在 PHP 文件中未检索到键盘字符以外的字符。

我正在尝试在 PHP 文件中显示 json 响应中的数据。

所以任何人都可以告诉我如何克服这种..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:28:28.887

您需要使用准备好的语句来使其与垃圾字符一起使用。

这是[如何在 PDO 中执行此操作的文档](http://php.net/manual/en/pdo.prepared-statements.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:28:11.993

您应该转义通过 mysql 查询传递的值`mysql_real_escape_string()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:04:00.393

您可以使用 htmlspecialchars()[THIS IS IS PHP SPECIFIC],mysql_real_escape_string() 之类的函数。他们会解决你的问题。除了解决您的问题之外，它们还将为您的站点提供额外的安全性，包括使用 SQL 注入等特殊符号。实际发生的情况是，当您在数据中使用 ' 、 " 等时，它会像任何 '/ " 将结束查询。所以不会获取任何数据。

# ruby-on-rails - 在 Rails 中使用固定装置分配 attr_accessor

> ID：13721005
> 
> 赞同：0
> 
> 时间：2012-12-05T10:24:35.987
> 
> 标签：ruby-on-rails, testing, fixtures, attr-accessor

我有一个简单的 Rails 3 模型，它的 attr_accessor 在数据库中没有字段，由于我的初始化设置，我需要使用固定装置进行设置。

但是当我尝试它时，我收到关于未知列的错误。

还有另一种方法可以做到这一点吗？

我的模型：

```
class Timeslot < ActiveRecord::Base
    attr_accessor :interval
    after_initialize :init

    def init
        self.interval ||= 15
        self.start_time ||= Time.local(0, 1, 1)
        self.end_time = self.start_time.advance :minutes => self.interval
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:45:42.340

夹具是最终状态。这意味着，在您调用 attr_accessor 之后，您的数据库中的内容将被输出。如果`end_time`您在像`@timeslot = timeslots(:your_name_of_fixture)`. 您无需在 Fixture 中担心它们，除非您在设置它时。

现在，我以前没有见过`after_initialize`，但我看到它是一个回调函数。对我来说，您是在视图中设置间隔。可能不是以编程方式（除非它是默认的 15 分钟）。

切换到`before_save`回调（如果您希望您的人员也能够在编辑时更改间隔），例如：

```
 class Timeslot < ActiveRecord::Base
    attr_accessor :interval
    before_save :set_times
    def set_times
        self.interval ||= 15
        self.start_time ||= Time.local(0, 1, 1)
        self.end_time = self.start_time.advance minutes: self.interval
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:06:19.213

夹具将数据直接添加到数据库中。如果您想将数据传递给模型，请考虑使用工厂（[Factory Girl](https://github.com/thoughtbot/factory_girl)是一个很好的库）。

您可能已经在固定装置上进行了大量投资，但工厂非常值得一看。

# html - jsp中带有复选框的循环项目列表

> ID：13721006
> 
> 赞同：0
> 
> 时间：2012-12-05T10:24:39.670
> 
> 标签：html, jsp, struts2

以前我使用列表显示为选择框。

```
<select name="chosenList">
    <c:forEach>
    ...
    </c:forEach>
</select> 
```

现在我想显示带有复选框和数据的列表，类似的东西`<input type="checkbox" /> This is checkbox <br />`。如何实现循环并使用复选框显示每个数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:29:56.053

不起作用，您可以摆脱复选框并使用

```
<select multiple>
   <c:forEach>
        <option>press ctrl+lmb</option>
   </c:forEach>
</select> 
```

of 循环复选框而不选择

```
<c:forEach><label><checkbox />clickme</label></c:forEach> 
```

问候

# android - 如何使用 android google map sdk v2 绘制虚线折线？

> ID：13721008
> 
> 赞同：25
> 
> 时间：2012-12-05T10:24:42.677
> 
> 标签：android, google-maps, android-mapview, google-maps-android-api-2

我已经查看了[折线的文档，](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Polyline)并且没有选项可以将其设为虚线。

有人知道如何使用 android google map sdk v2 绘制虚线折线吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2017-06-08T13:08:52.540

现在在折线中，您可以将模式设置为 Dash、Dot 或 Gap，只需应用以下

```
public static final int PATTERN_DASH_LENGTH_PX = 20;
public static final int PATTERN_GAP_LENGTH_PX = 20;
public static final PatternItem DOT = new Dot();
public static final PatternItem DASH = new Dash(PATTERN_DASH_LENGTH_PX);
public static final PatternItem GAP = new Gap(PATTERN_GAP_LENGTH_PX);
public static final List<PatternItem> PATTERN_POLYGON_ALPHA = Arrays.asList(GAP, DASH);

 private void drawDashedLeg(GoogleMap googleMap, Route route) {
    PolylineOptions polyOptions = new PolylineOptions();
    polyOptions.color(ContextCompat.getColor(getContext(), R.color.coolgrey));
    polyOptions.addAll(route.getPoints());
    polyOptions.pattern(PATTERN_POLYGON_ALPHA);
    Polyline polyline = googleMap.addPolyline(polyOptions);
    polylines.add(polyline);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-07T08:35:42.957

在当前版本中是不可能的。请关注此问题以获取更新：[https ://code.google.com/p/gmaps-api-issues/issues/detail?id=4633](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4633)

**更新**

最近，Google 在 Google Maps Android API v2 中为折线实现了此功能，并将问题 4633 标记为已修复。

[请参阅“形状指南”](https://developers.google.com/maps/documentation/android-api/shapes#stroke_pattern)中有关笔划图案的信息。请参阅折线和多边形教程中的[示例](https://developers.google.com/maps/documentation/android-api/polygon-tutorial#add_custom_styling_to_your_polygon)。

您还可以在此处阅读相应的博客文章：

[https://maps-apis.googleblog.com/2017/02/styling-and-custom-data-for-polylines.html](https://maps-apis.googleblog.com/2017/02/styling-and-custom-data-for-polylines.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-31T19:17:30.037

Alexey，我刚刚创建了一个对我有用的函数，我认为这会对你有所帮助：

```
public static void createDashedLine(GoogleMap map, LatLng latLngOrig, LatLng latLngDest, int color){
    double difLat = latLngDest.latitude - latLngOrig.latitude;
    double difLng = latLngDest.longitude - latLngOrig.longitude;

    double zoom = map.getCameraPosition().zoom;

    double divLat = difLat / (zoom * 2);
    double divLng = difLng / (zoom * 2);

    LatLng tmpLatOri = latLngOrig;

    for(int i = 0; i < (zoom * 2); i++){
        LatLng loopLatLng = tmpLatOri;

        if(i > 0){
            loopLatLng = new LatLng(tmpLatOri.latitude + (divLat * 0.25f), tmpLatOri.longitude + (divLng * 0.25f));
        }

        Polyline polyline = map.addPolyline(new PolylineOptions()
            .add(loopLatLng)
            .add(new LatLng(tmpLatOri.latitude + divLat, tmpLatOri.longitude + divLng))
            .color(color)
            .width(5f));

        tmpLatOri = new LatLng(tmpLatOri.latitude + divLat, tmpLatOri.longitude + divLng);
    }
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-08-27T07:39:53.987

我创建了以下函数来绘制带有 LatLng 点列表的虚线折线。无论缩放如何，该算法都会创建 0.002 公里的线（后跟 0.002 公里的米间距）。当您不想在缩放更改时重新绘制折线时，这很有用。

```
private void drawDashedPolyLine(GoogleMap mMap, ArrayList<LatLng> listOfPoints, int color) {
    /* Boolean to control drawing alternate lines */
    boolean added = false;
    for (int i = 0; i < listOfPoints.size() - 1 ; i++) {
        /* Get distance between current and next point */
        double distance = getConvertedDistance(listOfPoints.get(i),listOfPoints.get(i + 1));

        /* If distance is less than 0.002 kms */
        if (distance < 0.002) {
            if (!added) {
                mMap.addPolyline(new PolylineOptions()
                        .add(listOfPoints.get(i))
                        .add(listOfPoints.get(i + 1))
                        .color(color));
                added = true;
            } else {/* Skip this piece */
                added = false;
            }
        } else {
            /* Get how many divisions to make of this line */
            int countOfDivisions = (int) ((distance/0.002));

            /* Get difference to add per lat/lng */
            double latdiff = (listOfPoints.get(i+1).latitude - listOfPoints
                    .get(i).latitude) / countOfDivisions;
            double lngdiff = (listOfPoints.get(i + 1).longitude - listOfPoints
                    .get(i).longitude) / countOfDivisions;

            /* Last known indicates start point of polyline. Initialized to ith point */
            LatLng lastKnowLatLng = new LatLng(listOfPoints.get(i).latitude, listOfPoints.get(i).longitude);
            for (int j = 0; j < countOfDivisions; j++) {

                /* Next point is point + diff */
                LatLng nextLatLng = new LatLng(lastKnowLatLng.latitude + latdiff, lastKnowLatLng.longitude + lngdiff);
                if (!added) {
                    mMap.addPolyline(new PolylineOptions()
                    .add(lastKnowLatLng)
                    .add(nextLatLng)
                    .color(color));
                    added = true;
                } else {
                    added = false;
                }
                lastKnowLatLng = nextLatLng;
            }
        }
    }
}

private double getConvertedDistance(LatLng latlng1, LatLng latlng2) {
    double distance = DistanceUtil.distance(latlng1.latitude,
            latlng1.longitude,
            latlng2.latitude,
            latlng2.longitude);
    BigDecimal bd = new BigDecimal(distance);
    BigDecimal res = bd.setScale(3, RoundingMode.DOWN);
    return res.doubleValue();
} 
```

Util 类计算两个 LatLng 之间的距离：

```
public class DistanceUtil {

    public static double distance(double lat1, double lon1, double lat2,
        double lon2) {

    if ((lat1 == lat2) && (lon1 == lon2)) {
        return 0;
    } else
        return distance(lat1, lon1, lat2, lon2, 'K');
    }

    public static double distance(double lat1, double lon1, double lat2,
        double lon2, char unit) {
        double theta = lon1 - lon2;
        double dist = Math.sin(deg2rad(lat1)) * Math.sin(deg2rad(lat2))
            + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2))
            * Math.cos(deg2rad(theta));
        dist = Math.acos(dist);
        dist = rad2deg(dist);
        dist = dist * 60 * 1.1515;
        if (unit == 'K') {
            dist = dist * 1.609344;
        } else if (unit == 'N') {
            dist = dist * 0.8684;
        }
        return (dist);
    }

    private static double deg2rad(double deg) {
        return (deg * Math.PI / 180.0);
    }

    private static double rad2deg(double rad) {
        return (rad * 180.0 / Math.PI);
    }
} 
```

注意：上述算法会生成大量折线，渲染可能需要一些时间。仅当点列表很小时才有用。

# google-maps - 我如何获得有关 Google 地图对象（咖啡馆、餐馆）的反馈？

> ID：13721010
> 
> 赞同：0
> 
> 时间：2012-12-05T10:24:48.967
> 
> 标签：google-maps, google-maps-api-2

我如何获得有关 Google 地图对象（咖啡馆、餐馆）的反馈？是否有任何公共 API (SDK) 可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:25:24.117

听起来您正在寻找[Places API](https://developers.google.com/places/)

听起来您正在寻找“评论”，可在[地点详细信息响应中找到](https://developers.google.com/places/documentation/details)

# visual-studio - 不显示用于折叠区域和班级成员的图标

> ID：13721012
> 
> 赞同：1
> 
> 时间：2012-12-05T10:24:55.380
> 
> 标签：visual-studio

当我在 Visual Studio 中打开项目中的 .cs 文件时，所有代码都会展开，并且用于折叠区域的减号图标和类成员不会出现在文件编辑器中。

然后我用快捷键`Ctrl`++折叠所有区域，然后所有区域`M`和`O`类成员都被折叠并出现图标加号，之后折叠和展开区域和类成员的功能在这个文件中正常工作。

我认为某些扩展导致了这个问题，但是在禁用所有扩展后，问题仍然存在。

我注意到这个问题是在我使用宏在打开时折叠文件上的所有区域和类成员后开始出现的，但这不是立即发生的。即使删除宏，问题仍然存在。

与我一起工作的另一位开发人员也有同样的问题。他还使用宏在文件打开时折叠所有区域。

我用Forms项目做了一个测试，问题也出现了。

我使用的宏来自这里： http: [//go4answers.webhost4life.com/Example/collapse-defintions-default-ie-103343.aspx](http://go4answers.webhost4life.com/Example/collapse-defintions-default-ie-103343.aspx)

# python-3.x - 创建要删除的文件列表

> ID：13721013
> 
> 赞同：0
> 
> 时间：2012-12-05T10:25:00.730
> 
> 标签：python-3.x

我正在开发一个搜索和销毁类型的程序，我需要它来搜索具有特定文件名的所有目录并将它们附加到列表中。之后删除所有这些文件...不是列表或列表中的对象...

```
 import os
file_list=[]
for root, dirs, files in os.walk(path-to-dir'):
       for f_name in files:
              if f_name.startswith("file-name"):
                     file_list.append(f_name) 
```

我可以写到附加部分代码，但我不知道下一步......

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:43:27.197

要从计算机中删除文件，请使用`os.remove()`. 它将**文件的完整路径**作为参数，因此`os.remove("infectedFile.dll")`您可以调用而不是调用`os.remove("C:/program files/avira/infectedFile.dll")`

所以你`file_list`应该包含文件的**完整路径**，然后调用：

```
for file in file_list:
    os.remove(file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:24:04.420

修改你的`file_list.append(f_name)`. `f_name`只是一个简单的名字。需要在处理的时候加上文件名的路径，因为不知道文件在目录层次结构中的位置：

```
 file_list.append(os.path.join(root, f_name)) 
```

该`root`变量包含步行期间的路径。

要检查您的代码是否有效，只需打印列表的内容：

```
print('\n'.join(file_list)) 
```

或者您可以在循环中执行此操作以准备后面的部分：

```
for fname in file_list:
    print(fname) 
```

然后你只需添加`os.remove(fname)`删除文件名：

```
for fname in file_list:
    print('removing', fname)
    os.remove(fname) 
```

# plone - 以 JSON 格式导出克隆原型数据

> ID：13721016
> 
> 赞同：2
> 
> 时间：2012-12-05T10:25:04.660
> 
> 标签：plone

我想以 JSON 格式导出包含自定义 Archetypes 内容项的 Plone 文件夹。

为此有哪些插件和工具？最好是自动检查模式并基于它创建 JSON 结构的一种。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T22:07:21.100

为此，我已经成功地使用了[collective.jsonmigrator/collective.blueprint.jsonmigrator 。](https://github.com/collective/collective.jsonmigrator)它旨在与transmogrifier一起使用。我什至能够从史前 Plone 中导出 json 并将其导入 Plone 4.1 中的 Dexterity 内容类型。

这种极端迁移绝非易事，如果有任何定制，您可能需要进行一些源调整以使管道正常工作。

# oracle - 部署和配置 ODP.NET 以在不安装实体框架的情况下工作

> ID：13721025
> 
> 赞同：34
> 
> 时间：2012-12-05T10:25:27.877
> 
> 标签：oracle, entity-framework, app-config, odp.net, dataprovider

如何在不安装实体框架的情况下部署和配置 ODP.NET？

A. 如何部署和配置 Oracle.DataAccess.Client？

B. 如何部署和配置 Oracle.ManagedDataAccess.Client？

C. 为了使使用 EDMX 和 Oracle SSDL 的构建正常工作，您需要做什么？

D. 你需要安装什么来获得设计师支持？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-05T10:25:27.877

这个答案总结了（希望）所有需要的步骤，其中许多都记录在网上的各个地方，可能会节省一些人在谷歌上搜索的时间。

A. 如何部署和配置 Oracle.DataAccess.Client。

A.1。下载[ODAC112030Xcopy_64bit.zip](http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html)或[ODAC112030Xcopy_32bit.zip](http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html)。

A.1.1。将 zip 文件中以下文件夹的内容提取到应用程序/主机的 bin/setup 文件夹中：

A.1.1.1。即时客户端_11_2

A.1.1.2。odp.net4\bin\

A.1.1.3。odp.net4\odp.net\bin\

A.1.1.4。odp.net4\odp.net\PublisherPolicy\4\

A2。将以下部分添加到应用程序/主机的 app.config/web.config 的开头（如果您已经有一个 configSections 元素，请将该部分添加到其中：

```
<configSections>
  <section name="oracle.dataaccess.client"
    type="System.Data.Common.DbProviderConfigurationHandler, System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
</configSections> 
```

A.3。将以下部分添加到应用程序/主机的 app.config/web.config 的末尾：

A.4。从 ODAC112030Xcopy 的文件夹运行：

```
configure.bat odp.net4 somename 
```

我建议使用 oraclehome112030_32 或 oraclehome112030_64 作为上面的“somename”。

```
<system.data>
  <DbProviderFactories>
    <!-- Remove in case this is already defined in machine.config -->
    <remove invariant="Oracle.DataAccess.Client" />
    <add name="Oracle Data Provider for .NET"
         invariant="Oracle.DataAccess.Client"
         description="Oracle Data Provider for .NET"
         type="Oracle.DataAccess.Client.OracleClientFactory, Oracle.DataAccess, Version=4.112.3.0, Culture=neutral, PublicKeyToken=89b483f429c47342"/>
  </DbProviderFactories>
</system.data>

<oracle.dataaccess.client>
  <settings>
    <add name="bool" value="edmmapping number(1,0)" />
    <add name="byte" value="edmmapping number(3,0)" />
    <add name="int16" value="edmmapping number(5,0)" />
    <add name="int32" value="edmmapping number(10,0)" />
    <add name="int64" value="edmmapping number(19,0)" />
    <add name="int16" value="edmmapping number(38,0)" />
    <add name="int32" value="edmmapping number(38,0)" />
    <add name="int64" value="edmmapping number(38,0)" />
  </settings>
</oracle.dataaccess.client> 
```

* * *

B. 如何部署和配置 Oracle.ManagedDataAccess.Client。

B.1。下载[ODP.NET_Managed_1120350_Beta.zip](http://www.oracle.com/technetwork/database/windows/downloads/odpmbeta-1696432.html)

B.1.1。将以下文件提取到应用程序/主机的 bin/setup 文件夹中。

B.1.1.1。Oracle.ManagedDataAccess.dll

B.1.1.2。x64\Oracle.ManagedDataAccessDTC.dll 或 x86\Oracle.ManagedDataAccessDTC.dll

B.2。将以下部分添加到应用程序/主机的 app.config/web.config 的开头（如果您已经有一个 configSections 元素，请将该部分添加到其中：

```
<configSections>
  <section name="oracle.manageddataaccess.client"
    type="OracleInternal.Common.ODPMSectionHandler, Oracle.ManagedDataAccess, Version=4.112.3.50, Culture=neutral, PublicKeyToken=89b483f429c47342" />
</configSections> 
```

B.3。将以下部分添加到应用程序/主机的 app.config/web.config 的末尾：

```
<system.data>
  <DbProviderFactories>
    <!-- Remove in case this is already defined in machine.config -->
    <remove invariant="Oracle.ManagedDataAccess.Client" />
    <add name="ODP.NET, Managed Driver"
         invariant="Oracle.ManagedDataAccess.Client"
         description="Oracle Data Provider for .NET, Managed Driver"
         type="Oracle.ManagedDataAccess.Client.OracleClientFactory, Oracle.ManagedDataAccess, Version=4.112.3.50, Culture=neutral, PublicKeyToken=89b483f429c47342" />
  </DbProviderFactories>
</system.data>

<oracle.manageddataaccess.client>
  <version number="*">
    <settings>
      <!-- Set this path if you are using TNS aliases as connection strings (not recommended) -->
      <!-- Instead you can use "SERVER_NAME:PORT/SERVICE_NAME" as your data source -->
      <setting name="TNS_ADMIN" value="C:\"/>
    </settings>
    <edmMappings>
      <edmMapping dataType="number">
        <add name="bool" precision="1"/>
        <add name="byte" precision="2" />
        <add name="int16" precision="5" />
      </edmMapping>
    </edmMappings>
  </version>
</oracle.manageddataaccess.client> 
```

* * *

C. 对于建筑：

C.1。将此部分添加到您的 EDMX 程序集的 app.config 中：

（还没有在 Oracle 上尝试过**。Managed** DataAccess.Client）

```
<oracle.dataaccess.client>
  <settings>
    <add name="bool" value="edmmapping number(1,0)" />
    <add name="byte" value="edmmapping number(3,0)" />
    <add name="int16" value="edmmapping number(5,0)" />
    <add name="int32" value="edmmapping number(10,0)" />
    <add name="int64" value="edmmapping number(19,0)" />
    <add name="int16" value="edmmapping number(38,0)" />
    <add name="int32" value="edmmapping number(38,0)" />
    <add name="int64" value="edmmapping number(38,0)" />
  </settings>
</oracle.dataaccess.client> 
```

C.2。将名为 Oracle.xsd 的文件添加到具有以下内容的同一程序集：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="odpnetappconfigmappings" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:complexType name="addtype">
    <xs:attribute name="name" type="xs:string" />
    <xs:attribute name="value" type="xs:string" />
  </xs:complexType>

  <xs:complexType name="settingstype">
    <xs:sequence minOccurs="0" maxOccurs="unbounded">
      <xs:element name="add" type="addtype" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="oracledataaccessclienttype">
    <xs:sequence minOccurs="0" maxOccurs="1">
      <xs:element name="settings" type="settingstype" />
    </xs:sequence>
  </xs:complexType>

  <xs:element name="oracle.dataaccess.client" type="oracledataaccessclienttype" />

</xs:schema> 
```

C.3。将上述 XSD 添加到上述 app.config 的架构列表中。

C.4。如果即使构建成功，在构建过程中也会出现布尔映射错误，请将 app.config 映射添加到 Visual Studio 的 devenv.exe.config。

C.5。如果要使用 Oracle.ManagedDataAccess.Client，请在构建之前手动编辑 EDMX 中的数据提供者属性（我没有尝试过），或者在运行时创建上下文之前对其进行编辑，然后从编辑后的副本加载 MSSL，而不是从资源（这似乎可行，我也使用类似的技巧来选择为不同的数据库提供程序加载哪个 MSSL）。

* * *

D. 对于设计师的支持：

D.1。下载[win64_11gR2_client.zip](http://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-win64soft-094461.html)或[win32_11gR2_client.zip](http://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-win32soft-098987.html)并安装。

D.1.1。选择“管理员”作为安装类型。

D.2。[下载ODT](http://www.oracle.com/technetwork/developer-tools/visual-studio/overview/index.html)并安装。

* * *

我在装有 Windows 7 x64 的空白机器 (VM) 上尝试了这个（A 和 B）。

此过程似乎不适用于 Windows x64 上的 x86 版本的 Oracle.DataAccess.Client。

该过程似乎适用于 Windows x64 上的 x64 版本的 Oracle.DataAccess.Client 以及两个版本的 Oracle.ManagedDataAccess.Client。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-12T17:57:08.277

**更新：**

从 Oracle.DataAccess.Client 迁移到**Oracle.ManagedDataAccess.Client** v12.1.0 (12c) 的简单方法：

编辑： [托管 ODAC v12c Release 1 的下载链接](http://download.oracle.com/otn/other/ole-oo4o/ODP.NET_Managed121010.zip)。

如果您下载[winx64_12c_client.zip](http://download.oracle.com/otn/nt/oracle12c/121010/winx64_12c_client.zip)或[winnt_12c_client32.zip](http://download.oracle.com/otn/nt/oracle12c/121010/winnt_12c_client32.zip)，解压缩它们并在 VM 上安装（完整（管理员）安装或使用 ODP.NET 组件的自定义安装，客户端安装不包含此组件），您会在`\odp.net\managed`下面找到文件夹“客户”文件夹。

在此文件夹中，您将找到`common\Oracle.ManagedDataAccess.dll`和。`x86\Oracle.ManagedDataAccessDTC.dll``x64\Oracle.ManagedDataAccessDTC.dll`

复制`Oracle.ManagedDataAccess.dll`到您的 bin 目录，然后复制`Oracle.ManagedDataAccessDTC.dll`x86/x64 bin 目录下的正确平台，或者根据客户端，将该特定 DLL 的正确平台安装到 GAC 中，将您的 bin 保持为 AnyCPU。

新 DLL 的程序集版本是**4.121.1.0**，PublicKeyToken 似乎是一样的（没有检查它，但它没有我改变它就可以工作）。

和以前一样，将此部分添加到您的**app.config**配置/configSections（在 app.config 文件的开头）：

```
<configuration>
   <configSections> 
```

部分：

```
 <section name="oracle.manageddataaccess.client"
        type="OracleInternal.Common.ODPMSectionHandler, Oracle.ManagedDataAccess, Version=4.121.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342" /> 
```

并关闭：

```
</configSections> 
```

在 system.data/DbProviderFactories 下（在上述之后）：

```
<system.data>
  <DbProviderFactories> 
```

添加：

```
 <remove invariant="Oracle.DataAccess.Client" />
    <remove invariant="Oracle.ManagedDataAccess.Client" /> 
```

确保您的 machine.config 中没有任何冲突

然后加：

```
 <add name="ODP.NET, Managed Driver" invariant="Oracle.DataAccess.Client"
       description="Oracle Data Provider for .NET, Managed Driver"
       type="Oracle.ManagedDataAccess.Client.OracleClientFactory, Oracle.ManagedDataAccess, Version=4.121.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342" /> 
```

并关闭：

```
 </DbProviderFactories>
</system.data> 
```

**请注意**，我用作**`Oracle.DataAccess.Client`**不变量而不是官方`Oracle.ManagedDataAccess.Client`。这是因为我不想更改所有 EDMX 并重新编译它们的程序集以使它们使用新的托管客户端而不是旧的非托管客户端。

然后将以下部分（在上述之后）添加到您的 app.config

```
 <oracle.manageddataaccess.client>
    <version number="*">
      <edmMappings>
        <edmMapping dataType="number">
          <add name="bool" precision="1"/>
          <add name="byte" precision="2" />
          <add name="int16" precision="5" />
        </edmMapping>
      </edmMappings>
    </version>
  </oracle.manageddataaccess.client> 
```

这通过了我的初步测试，但尚未彻底测试。

# php - 使用 _ 拆分名称并使用 php 调用

> ID：13721028
> 
> 赞同：0
> 
> 时间：2012-12-05T10:25:44.333
> 
> 标签：php, image, split, filenames

我想将一个文件名拆分为两个，以便使用 php 通过循环访问它，例如；image_apple.jpg、image_mango.jpg、image_grapes.jpg 等

每个图像文件都有一个描述文件

例如：description_apple.txt

所有这些文件都在同一个文件夹中。

我想在 ma 网页中显示所有图像和三个相应的描述文件

有人请帮我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:32:42.920

尝试这个

```
 if ($handle = opendir('/folder path here/')) {

    while (false !== ($entry = readdir($handle))) {

    $names=explode("_",pathinfo($entry)['filename']);
    echo " desc: description_".$names[0].".txt";echo " name: image_".$names[1].".jpg";
        echo "<br>";
    }

    closedir($handle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:31:32.727

你可以使用这样的东西：

```
<?php
$files = scandir("./"); //./ is the current directory

foreach($files as $file) {
    $info = explode('_', $file); //Split on _

    //Skip all files withouth description
    if (count($info) <= 1) {
        continue;
    }

    $info = explode('.', $info['1']); //Split on .

    //Is there a file with description info?
    if (file_exists('description_' . $info['0'] . '.txt')) {
        $description = file_get_contents('description_' . $info['0'] . '.txt'); //$description contains the file description
    }
}
?> 
```

# javascript - 对数字进行加法时的jQuery / Javascript NaN

> ID：13721031
> 
> 赞同：0
> 
> 时间：2012-12-05T10:25:58.187
> 
> 标签：javascript, jquery

我正在尝试创建一个简单的链接滚动条，但在计算当前位置时遇到了一些麻烦。

基本上，在我的代码中，我已经在函数之外初始化了 currentPos 变量。然后尝试添加 1 但我得到了一些不稳定的行为。有时会得到 NaN。

这是在 localhost xampp 安装上，相同的代码在 jsfiddle 中运行良好，所以我无法理解。

jsfiddle：http: [//jsfiddle.net/w654X/](http://jsfiddle.net/w654X/)

我的代码如下，任何帮助将不胜感激。

```
var currentPos = 1;

$('#test').click(function() {
    // exit if animation is already playing
    if ($(':animated').length) {
        return false;
    }

    height = $('#inner').height();
    noOfLinks = height / 53;
    lastPos = noOfLinks - 4;

    alert(currentPos);

    if (currentPos != lastPos) {
        $('#inner').animate({
            marginTop: "-=106px"
        });
    } 
    else {
        $('.arrow-up').hide();
    }

    currentPos += 1;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:28:50.250

请尝试以下代码

```
$(document).ready(function(){
var currentPos = 1;
$('#test').click(function() {

// exit if animation is already playing
    if ($(':animated').length) {
        return false;
    }

height = $('#inner').height();
noOfLinks = height / 53;
lastPos = noOfLinks - 4;

alert(currentPos);

if (currentPos != lastPos) {
    $('#inner').animate({
        marginTop: "-=106px"
    });
} else {
    $('.arrow-up').hide();
}

currentPos += 1;

});
}); 
```

让我知道您在哪里使用了加载脚本或准备好文档。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:23:18.050

好吧，这让我疯狂太久了，但事实证明我已经在另一个脚本中使用了变量名“direction”。使用不同的名称，一切都很好。

# sql - 使用 A 列旧值更新 B 列值

> ID：13721032
> 
> 赞同：2
> 
> 时间：2012-12-05T10:25:59.310
> 
> 标签：sql, plsql, triggers, plsqldeveloper

创建了以下 VendorAccount 表

```
VendorAccount

(Ven_AccountId, 
  Ven_RegNo,   
  Ven_Invoice_RefNo,    
  TotalAmount,
  Paid_ToVen ,    
  Balance
) 
```

在上表中，TotalAmount 的值来自另一个 Table( `Vendor_InvoiceDetails`)。TOTALBALANCE 值是通过 POPUP LOV 选择的。

`Pad_TOVEN`金额从`TOTALAMOUNT`( ) 中减去。`TotalAMount-Pad_TOVEN`当我选择`TOTALAMOUNT`它时，它会给我旧`TOTAL VALUE`的，如下图所示。 ![在此处输入图像描述](../Images/54cba3772fe2e2b669e6a1d66a1b46cc.png)

我想要更新的值。当我选择 TotalAmount 时，它应该根据新条目的列中的`Ven_Invoice_RefNo`2300为我提供新的更新值。`TotalAmount`下面是触发器，但它有休闲错误

错误： `PLS-00103: Encountered the symbol "DECLARE" when expecting one of the following: begin function pragma procedure subtype type <an identifier> <a double-quoted delimited-identifier> current curs`

扳机：

```
create or replace trigger "VENDORACCOUNT_T2"
BEFORE
insert or update or delete on "VENDORACCOUNT"
for each row
begin
DECLARE new_balance INT; 
DECLARE new_total INT;
DECLARE new_paid INT;

   SELECT balance INTO old_balance,
   total INTO old_total,
       PAID_TOVEN INTO new_paid
   FROM vendoraccount
   WHERE ven_regno = new.ven_regno
   AND VEN_INVOICE_REFNO = new.VEN_INVOICE_REFNO;

   UPDATE vendoraccount SET TOTALAMOUNT = old_total + old_balance - new_paid,
   balance = TOTALAMOUNT - new_paid
   WHERE VEN_REGNO= new.VEN_REGNO
   AND VEN_INVOICE_REFNO = new.VEN_INVOICE_REFNO;

end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:50:40.333

据我所知，有五件事要做：

1.  将开始移动到“声明”行下方。
2.  只使用一个“声明”关键字。
3.  声明 old_balance。
4.  声明 old_total。
5.  只是一个“进入”。

    ```
    create or replace trigger "VENDORACCOUNT_T2"
    BEFORE
    insert or update or delete on "VENDORACCOUNT"
    for each row
    DECLARE new_balance INT; 
            new_total INT;
            new_paid INT;
            old_balance INT;
            old_total INT;
    begin

    SELECT balance, total, PAID_TOVEN 
    INTO old_balance, old_total, new_paid
    FROM vendoraccount
    WHERE ven_regno = new.ven_regno
    AND VEN_INVOICE_REFNO = new.VEN_INVOICE_REFNO;

    UPDATE vendoraccount SET TOTALAMOUNT = old_total + old_balance - new_paid,
    balance = TOTALAMOUNT - new_paid
    WHERE VEN_REGNO= new.VEN_REGNO
    AND VEN_INVOICE_REFNO = new.VEN_INVOICE_REFNO;
    end; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:30:02.197

您应该在“开始”之前移动声明部分

# iphone - 文件存在于 Document 文件夹中，但不适用于 Xcode

> ID：13721040
> 
> 赞同：0
> 
> 时间：2012-12-05T10:26:16.860
> 
> 标签：iphone, file-manager

我有一个奇怪的问题，这段代码检查文件夹中是否存在文件：

```
- (BOOL) checkIfFileExist:(NSString *)path {    

    NSArray *documentsPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [documentsPaths objectAtIndex:0];
    NSString *fileDaControllere = [documentsDirectory stringByAppendingString:path];

    if ([[NSFileManager defaultManager] fileExistsAtPath:fileDaControllere]) {
        NSLog(@"exist");
        return YES;
    }
    else {
        NSLog(@"not exist");
        return NO;
    }
} 
```

问题是我总是在文件存在时文件不存在（在这种情况下，路径是 Style.css）！错误在哪里？路径似乎是正确的：

路径：/Users/kikko/Library/Application Support/iPhone Simulator/6.0/Applications/38161AFA-2740-4BE2-9EC4-C5C6B317D270/Documents/Style.css

在这里可以看到xcode上的路径和真实路径

[http://www.allmyapp.net/wp-content/iFormulario/1.png](http://www.allmyapp.net/wp-content/iFormulario/1.png)

[http://www.allmyapp.net/wp-content/iFormulario/2.png](http://www.allmyapp.net/wp-content/iFormulario/2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:29:32.557

问题可能在于您只是附加文件而没有检查是否有路径分隔符：

```
NSString *fileDaControllere = [documentsDirectory stringByAppendingString:path]; 
```

因此你会变成类似的东西，`../DocumentsStyle.css`但它应该是`../Documents/Style.css`。

[`NSString`](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)有附加路径组件的特殊方法[`stringByAppendingPathComponent:`](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-stringByAppendingPathComponent_)

```
NSString *fileDaControllere = [documentsDirectory stringByAppendingPathComponent:path]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:52:48.810

最后我解决了这个问题，奇怪的想法是我不知道我是如何解决的，第一个问题是我将绝对路径传递给 checkIfFifFileExist 而我需要传递相对路径，函数对其进行转换到绝对路径（我的大错误），在此之后我认为问题是使用“/”，我删除所有并重写所有代码并进行一些测试。

我从包中复制文件夹：

```
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];

NSString *folderPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"/icone"];
NSString *iconePath = [documentsDir stringByAppendingPathComponent:@"/icone"];

[[NSFileManager defaultManager] copyItemAtPath:folderPath toPath:iconePath error:nil]; 
```

然后我以这种方式制作图像的路径：

```
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
 NSString *imagePath = [documentsDir stringByAppendingPathComponent:self.objMateria.iconaMateria]; 
```

现在文件存在，奇怪的是，如果：

```
self.objMateria.iconaMateria = /icona/Home/fisica.png 
```

或者

```
self.objMateria.iconaMateria = icona/Home/fisica.png 
```

没有任何变化，我看到了图像，而我认为其中一个路径错误......

# restlet - 从多个来源提供的 Restlet 静态内容

> ID：13721041
> 
> 赞同：1
> 
> 时间：2012-12-05T10:26:26.797
> 
> 标签：restlet

我的应用程序需要能够提供可以包含在许多不同位置（目录和/或通过类加载器）的静态内容。因此，例如，资源 /static/file.html 可能在 /dir1/file.html 或 /dir2/file.html 中找到；我希望它尝试 /dir1，如果在那里找不到，那么 /dir2，依此类推。

使用 Jetty 中的 servlet，我可以使用 DefaultServlet 的 HandlerList 来按顺序尝试处理来自每个目录的请求，直到满意为止，或者更容易使用带有 ResourceCollection 的单个 DefaultServlet。

我看不到在restlet中做类似事情的方法，而无需编写一个专门执行此操作的类。我可以修改 Directory 以处理多个源（以类似于具有 ResourceCollection 的 DefaultServlet 的方式），或者编写一个新的 Restlet，它依次尝试每个包含的 Restlet，直到成功处理（如 HandlerList）。但在我这样做之前，我是否错过了另一种已经存在的实现这一目标的方法？

谢谢，斯图尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:40:18.507

我确认 Directory 不知道如何处理多个源目录。添加对此的支持并将其回馈是一件好事。

# java - 如何使用 xpath 获取对象列表中的所有值？

> ID：13721048
> 
> 赞同：6
> 
> 时间：2012-12-05T10:26:39.993
> 
> 标签：java, xml, xpath

如何使用 xpath 获取所有帐户的名称？以下表达式仅返回第一个帐户名称：

```
XPathExpression fax = xpath.compile("/accounts/account/name")

<accounts>
<account>
<name>Johndoe1<name>
<account>
<account>
<name>Johndoe2<name>
<account>
</account> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T10:30:17.723

根据本教程：[http](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html) ://www.ibm.com/developerworks/library/x-javaxpathapi/index.html你需要做这样的事情：

```
XPathExpression fax = xpath.compile("/accounts/account/name")
Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
    System.out.println(nodes.item(i).getNodeValue()); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:47:43.847

这是正确的 XPath 表达式，但您获得的结果取决于您如何评估它。XPath 表达式`/accounts/account/name`返回一个*节点集*，其中包含（按文档顺序）文档中根元素下`name`所有元素的所有子元素。`account``accounts`

在 XPath 数据模型中，节点集的字符串值被定义为集合中第*一个*节点的字符串值。因此，如果您使用单参数`evaluate`：

```
fax.evaluate(someDocument) 
```

这会将表达式评估为字符串，您将获得第一个`name`值。相反，您需要将表达式评估*为节点集*，然后依次提取每个节点的字符串值，如[koopajah 的回答](https://stackoverflow.com/a/13721118/592139)中所建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:30:52.590

尝试使用帐户//帐户，这将为您提供文档中的所有帐户标签，其后代是“帐户”

# android - 单击菜单时如何隐藏默认键盘？

> ID：13721049
> 
> 赞同：2
> 
> 时间：2012-12-05T10:26:46.860
> 
> 标签：android

`onCreateOptionsMenu (Menu menu)`我已经为这个网站尝试了几种方法，在没有成功的情况下插入代码。我想在单击菜单按钮时隐藏键盘。

我有三个 EditText，我在其中写入一些数据，插入/删除/修改数据库的选项在菜单上，但是如果我单击，键盘不会自动隐藏。

我有这样的事情：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);

    if(this.getCurrentFocus() != null && this.getCurrentFocus() instanceof EditText){
        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
    }
    return true;
} 
```

它仅在我第一次按下菜单按钮时起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:28:28.573

将代码`onOptionsItemSelected`移至

```
 public boolean onOptionsItemSelected(MenuItem item) {  
    .....
     if(this.getCurrentFocus() != null && this.getCurrentFocus() instanceof EditText){
         InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
     }
  return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-28T17:28:43.613

另一个可以放置`InputMethodManager`代码的地方是`onPrepareOptionsMenu()`回调，如下所示：

```
public boolean onPrepareOptionsMenu (Menu menu) {
    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
    return true;
} 
```

如果您希望隐藏键盘，无论用户是否实际单击任何菜单项，您可能更喜欢这个。

# r - 将 10 个字母平均分配给 200 个字母

> ID：13721050
> 
> 赞同：0
> 
> 时间：2012-12-05T10:26:48.793
> 
> 标签：r

我有 10 个字母“abcdefghi j”和从 1 到 200 的 200 个数字，实例数量不同，例如五个 1 三个 2 等，总共构成 200 个数字。

我想为每个数字分配一个字母，使每个字母具有相同的频率。

所以在这种情况下，我想要每个字母 20 个实例。

我的问题是我想将字母**随机分配给数字。**

一个例子是：

```
1 1 1 1 1 2 2 3 3 3 3 3 3 4 5 6 7 7 7 ...until 200

a a a a a e e f f f f f f d i j c c c ...until 200 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:25:35.417

从这个开始——我故意不覆盖现有的列`A`

```
Rgames> B<-sample(letters,10)
Rgames> B
 [1] "b" "m" "l" "v" "c" "t" "s" "i" "n" "j"
Rgames> A<-sample(1:10,10,replace=TRUE)
Rgames> A
 [1] 3 3 2 8 1 5 5 8 2 6
Rgames> A.new<-B[A]
Rgames> A.new
 [1] "l" "l" "m" "i" "b" "c" "c" "i" "m" "t" 
```

然后你可以`cbind`如果需要结合`A.new`和`A`

# r - 如何将winbugs代码转换为R

> ID：13721055
> 
> 赞同：1
> 
> 时间：2012-12-05T10:27:17.237
> 
> 标签：r, bayesian, winbugs

由于我是 winbugs 新手，我需要在 R 中进行贝叶斯分析。为此，我需要将下面的 winbugs 代码转换为 R 代码：

```
model{
# model’s likelihood
for (i in 1:n){
time[i] ~ dnorm( mu[i], tau ) # stochastic componenent
# link and linear predictor
mu[i] <- beta0 + beta1 * cases[i] + beta2 * distance[i]
}
# prior distributions
tau ~ dgamma( 0.01, 0.01 )
beta0 ~ dnorm( 0.0, 1.0E-4)
beta1 ~ dnorm( 0.0, 1.0E-4)
beta2 ~ dnorm( 0.0, 1.0E-4)
# definition of sigma
s2<-1/tau
s <-sqrt(s2)
# calculation of the sample variance
for (i in 1:n){ c.time[i]<-time[i]-mean(time[]) }
sy2 <- inprod( c.time[], c.time[] )/(n-1)
# calculation of Bayesian version R squared
R2B <- 1 - s2/sy2
# Expected y for a typical delivery time
typical.y <- beta0 + beta1 * mean(cases[]) + beta2 * mean(distance[])
}
INITS
list( tau=1, beta0=1, beta1=0, beta2=0 )
DATA (LIST)
list( n=25,
time = c(16.68, 11.5, 12.03, 14.88, 13.75, 18.11, 8, 17.83,
79.24, 21.5, 40.33, 21, 13.5, 19.75, 24, 29, 15.35,
19, 9.5, 35.1, 17.9, 52.32, 18.75, 19.83, 10.75),
distance = c(560, 220, 340, 80, 150, 330, 110, 210, 1460,
605, 688, 215, 255, 462, 448, 776, 200, 132,
36, 770, 140, 810, 450, 635, 150),
cases = c( 7, 3, 3, 4, 6, 7, 2, 7, 30, 5, 16, 10, 4, 6, 9,
10, 6, 7, 3, 17, 10, 26, 9, 8, 4) ) 
```

这是我使用的 R 代码

```
library(R2WinBUGS)

time <-      c(16.68,11.5,12.03,14.88,13.75,18.11,8,17.83,79.24,21.5,40.33,21,13.5,19.75,24,29,15.35,19,9.5,35.1,17.9,52.32,18.75,19.83,10.75)
cases <- c(7,3,3,4,6,7,2,7,30,5,16,10,4,6,9,10,6,7,3,17,10,26,9,8,4)
distance <-   c(560,220,340,80,150,330,110,210,1260,605,688,215,255,462,448,776,200,132,36,770,140,810,450,635,150)
n <- length(time)

data <- list("time","cases","distance")
inits <- function(){
list(tau=1,n=25,beta1=rep(0,25),beta2=rep(0.25),beta3=rep(0,25))
}

sim <- bugs(data, inits, model.file = "C:/Users/Gunal/Desktop/dummy/reg.txt",
parameters = c("beta1", "beta2","beta3"),
n.chains = 3, n.iter = 1000,codaPkg = FALSE,
bugs.directory = "D:/PROGRAMLAR/WinBUGS14/",debug=TRUE)

print(sim) 
```

这是上面使用的“reg.txt”文件

```
model{
# model’s likelihood
for (i in 1:n){
time[i] ~ dnorm( mu[i], tau ) # stochastic componenent
# link and linear predictor
mu[i] <- beta0 + beta1 * cases[i] + beta2 * distance[i]
}
# prior distributions
tau ~ dgamma( 0.01, 0.01 )
beta0 ~ dnorm( 0.0, 1.0E-4)
beta1 ~ dnorm( 0.0, 1.0E-4)
beta2 ~ dnorm( 0.0, 1.0E-4)
# definition of sigma
s2<-1/tau
s <-sqrt(s2)
# calculation of the sample variance
for (i in 1:n){ c.time[i]<-time[i]-mean(time[]) }
sy2 <- inprod( c.time[], c.time[] )/(n-1)
# calculation of Bayesian version R squared
R2B <- 1 - s2/sy2
# Expected y for a typical delivery time
typical.y <- beta0 + beta1 * mean(cases[]) + beta2 * mean(distance[])
} 
```

最后这是winbugs发起的错误：

```
display(log)
check(C:/Users/Gunal/Desktop/dummy/reg.txt)
model is syntactically correct
data(C:/Users/Gunal/AppData/Local/Temp/RtmpUbKAAJ/data.txt)
data loaded
compile(3)
variable n is not defined
inits(1,C:/Users/Gunal/AppData/Local/Temp/RtmpUbKAAJ/inits1.txt)
command #Bugs:inits cannot be executed (is greyed out)
inits(2,C:/Users/Gunal/AppData/Local/Temp/RtmpUbKAAJ/inits2.txt)
command #Bugs:inits cannot be executed (is greyed out)
inits(3,C:/Users/Gunal/AppData/Local/Temp/RtmpUbKAAJ/inits3.txt)
command #Bugs:inits cannot be executed (is greyed out)
gen.inits()
command #Bugs:gen.inits cannot be executed (is greyed out)
thin.updater(1)
update(500)
command #Bugs:update cannot be executed (is greyed out)
set(beta1)
command #Bugs:set cannot be executed (is greyed out)
set(beta2)
command #Bugs:set cannot be executed (is greyed out)
set(beta3)
command #Bugs:set cannot be executed (is greyed out)
set(deviance)
command #Bugs:set cannot be executed (is greyed out)
dic.set()
command #Bugs:dic.set cannot be executed (is greyed out)
update(500)
command #Bugs:update cannot be executed (is greyed out)
coda(*,C:/Users/Gunal/AppData/Local/Temp/RtmpUbKAAJ/coda)
command #Bugs:coda cannot be executed (is greyed out)
stats(*)
command #Bugs:stats cannot be executed (is greyed out)
dic.stats()

DIC
history(*,C:/Users/Gunal/AppData/Local/Temp/RtmpUbKAAJ/history.odc)
command #Bugs:history cannot be executed (is greyed out)
save(C:/Users/Gunal/AppData/Local/Temp/RtmpUbKAAJ/log.odc)
save(C:/Users/Gunal/AppData/Local/Temp/RtmpUbKAAJ/log.txt) 
```

显然，我没有定义变量 n。有谁知道出了什么问题以及如何解决。任何帮助将不胜感激。

提前谢谢了

居纳尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:45:53.493

就像是...

```
time <-c(16.68,11.5,12.03,14.88,13.75,18.11,8,17.83,79.24,21.5,40.33,21,13.5,19.75,24,29,15.35,19,9.5,35.1,17.9,52.32,18.75,19.83,10.75)
cases <- c(7,3,3,4,6,7,2,7,30,5,16,10,4,6,9,10,6,7,3,17,10,26,9,8,4)
distance <-c(560,220,340,80,150,330,110,210,1260,605,688,215,255,462,448,776,200,132,36,770,140,810,450,635,150)
n <- length(time)
data <- list(n=n,time=time,cases=cases,distance=distance)

sim <- bugs(data, inits=NULL, model.file = "C:/Users/Gunal/Desktop/dummy/reg.txt",
        parameters = c("beta0","beta1", "beta2"),
        n.chains = 3, n.iter = 1000, codaPkg = FALSE,
        bugs.directory = "D:/PROGRAMLAR/WinBUGS14/") 
```

应该管用。测试版中存在问题。BUGS 代码中的测试版从 beta0 运行到 beta2。R 代码中的 beta 版本从 beta1 运行到 beta3。

如果您也想设置初始值（R 代码中用于 beta 的初始值是长度为 25 的向量，而它们应该只是一个数字，如在您的 BUGS 文件中），那么这应该可以工作......

```
inits <- function(){
  list(tau=1,beta0=0,beta1=0,beta2=0)
}
sim <- bugs(data, inits=inits, model.file = "C:/Users/Gunal/Desktop/dummy/reg.txt",
        parameters = c("beta0","beta1", "beta2"),
        n.chains = 3, n.iter = 1000, codaPkg = FALSE,
        bugs.directory = "D:/PROGRAMLAR/WinBUGS14/") 
```

WinBUGS 仍会生成一些其他初始值（用于 time[i] 节点）。

# linear-programming - 单纯形法求解 tsp 的速度有多快？

> ID：13721057
> 
> 赞同：3
> 
> 时间：2012-12-05T10:27:23.540
> 
> 标签：linear-programming

与蛮力或任何其他算法相比，单纯形法解决 ts 问题的速度有多快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:37:59.120

您不能使用“纯”LP 问题（具有连续变量）来建模 TS 问题。您可以使用整数规划公式，它将在研究树的每个节点上使用单纯形法（分支和绑定或分支和切割方法）。它适用于小问题，但速度很慢，因为问题很困难：例如，对于每条边都有一个二进制变量，您需要很多约束来模拟路径是一个循环的事实。

蛮力是棘手的（问题是指数级的），除非你有一个**非常**小的问题，否则不要尝试。使用 MIP 公式，即使是小问题。

对于大问题，你应该使用某种启发式方法（我认为模拟退火在这个问题上会给出很好的结果），或者如果你想要一个精确的解决方案，你应该对你的问题进行“智能”建模（例如列生成）。

# nhibernate - nHibernate 投影 - 分页和不同

> ID：13721058
> 
> 赞同：1
> 
> 时间：2012-12-05T10:27:37.047
> 
> 标签：nhibernate, pagination, sql-server-2008-r2, distinct, nhibernate-projections

我试图解决的高级问题是在搜索子集合中可能存在的内容时重复分页。

我采用的方法是创建一个独特的投影，其中包含与我的 DTO 相关的信息。我也知道这些值在每一行之间不会改变。

```
criteria.SetProjection(
  Projections.Distinct(Projections.ProjectionList()
    .Add(Projections.Alias(Projections.Property("Id"), "Id"))
    .Add(Projections.Alias(Projections.Property("Title"), "Title"))
    .Add(Projections.Alias(Projections.Property("Firstname"), "Firstname"))
    .Add(Projections.Alias(Projections.Property("Surname"), "Surname"))
    .Add(Projections.Alias(Projections.Property("DateCreated"), "DateCreated")))); 
```

当我引入分页/排序元素时会出现问题。

查看 NH Profiler，我看到的 SQL 如下：-

```
SELECT TOP (20 /* @p0 */) y0_,
  y1_,
  y2_,
  y3_,
  y4_
FROM   
(
  SELECT distinct 
    this_.Id as y0_,
    this_.Title as y1_,
    this_.Firstname as y2_,
    this_.Surname as y3_,
    this_.DateCreated as y4_,
    ROW_NUMBER() 
      OVER(ORDER BY this_.Firstname DESC, this_.Surname DESC) 
     as __hibernate_sort_row
  FROM   Users this_
) as query
WHERE  query.__hibernate_sort_row > 20 /* @p1 */
ORDER  BY query.__hibernate_sort_row; 
```

我想要获得 DISTINCT 投影的意图被阻挠，因为 ROW_NUMBER() 使每一行都独一无二。

我遇到了这篇博文，它描述了我遇到的同样的问题。

[http://www.daczkowski.net/2010/09/07/rows-duplication-for-certain-nhibernate-queries-%E2%80%93-workaround/](http://www.daczkowski.net/2010/09/07/rows-duplication-for-certain-nhibernate-queries-%E2%80%93-workaround/)

那里提供的解决方案涉及更改 nHibernate MS SQL 代码；这是一种选择，但我很想避免。nHibernate 的最新版本中是否有解决此问题的选项？

**编辑**

在 nHibernate 3.3.1 中修复 - 请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:47:14.840

为了删除这些重复项，我倾向于在进行分页时将集合属性的获取模式设置为“选择”或“惰性”（这样，禁用映射的“急切”或“加入”获取模式）

假设您有一个属性 Children，这将导致删除投影并添加：

```
criteria.SetFetchMode("Children", FetchMode.Select); 
```

和

```
criteria.SetResultTransformer(NHibernate.Transform.Transformers.DistinctRootEntity).List(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:47:25.487

经过一些进一步的研究，我现在找到了一个我很满意的解决方案。

根据这个：-

[https://nhibernate.jira.com/browse/NH-2492](https://nhibernate.jira.com/browse/NH-2492)

该错误已在 nHibernate 3.3.1.CR1 中得到解决。

我刚刚下载了 nHibernate 3.3.1 stable，并且成功地使用了相同的策略，没有重复。

对于那些感兴趣的人，nh 3.3.1 吐出以下 SQL。

```
SELECT distinct TOP (20 /* @p0 */) this_.Id as y0_,
  this_.Title as y1_,
  this_.Firstname       as y2_,
  this_.Surname     as y3_,
  this_.DateCreated  as y4_,
 FROM   Users this_
ORDER  BY this_.Firstname desc,
          this_.Surname desc; 
```

# java - 如果与 EJB 拦截器一起使用 TimerService EJB 不会被取消

> ID：13721059
> 
> 赞同：1
> 
> 时间：2012-12-05T10:27:39.233
> 
> 标签：java, jboss, ejb, interceptor, timertask

大家好，我对计时器服务有疑问，如果业务逻辑有任何异常，它会在超时时执行一些业务逻辑。它在拦截器之一和计时器服务中被捕获。那么定时器服务不会被取消。 **计时器.取消（）；**

那么它是如何工作的，我的计时器服务在超时时执行，它调用一个 ejb 函数，这个 ejb 有一个与之关联的拦截器。如果 ejb 函数有任何异常。拦截器基本上是在记录那个异常。然后我有一个停止计时器的代码，它应该在成功或失败的情况下工作，但它只会在成功的情况下停止计时器。如果发生故障（发生异常时），它不会取消计时器。所以每次我重新启动jboss时，它都会尝试再次执行计时器（因为它失败了）。

***我的问题是如何在成功和失败的情况下停止计时器（异常）。请注意我也在使用拦截器（我无法删除它，而删除它可以解决问题）。***

这是我的不同代码类，可能有助于理解问题。

**业务逻辑豆**

```
@Stateless
@Local(UtilityLocal.class)
@Interceptors({ ExceptionInterceptor.class })
public class UtilityEJB implements UtilityLocal {

public void doDomeThing(MazTimerTask task) {
    System.out.println("--- Business logic ---");
    Integer x = 5/0; // this will generate an exception
    System.out.println("--- Business logic ---");
}

} 
```

**拦截器**

```
public class ExceptionInterceptor {
 @Resource 
 private javax.ejb.SessionContext ctx;
    @AroundInvoke
    public Object aroundInvoke(final InvocationContext invocationContext)
        throws Exception { //NOPMD

        try {
            return invocationContext.proceed();
        } 
        catch (Exception exception) {
           System.out.println(" Logg the exception here");
           throw exception;
        }
    }
} 
```

**定时器服务**

```
@Stateless
public class MazTimer implements MazTimerLocal, MazTimerRemote{
 @EJB
 private transient UtilityLocal ejb;
@Resource
private transient TimerService timerService;
@Timeout
@TransactionTimeout(3600)
public void handleTimeout(Timer timer) {
    MazTimerTask task = (MazTimerTask) timer.getInfo();

    if (task != null ) {
        try{
            ejb.doDomeThing(task);
        }catch(Exception e) {
            System.out.println("------------ Exception occured : " + task.getName());

        }
        finally {
            stopTimer(task);
        }
    }

}

public void startTimer(MazTimerTask task) {
    timerService.createTimer(new Date(), 10, task);
}
private void stopTimer(MazTimerTask task) {
    try {
        Timer timer = getTimer(task);

        if (timer != null) {
            timer.cancel();
            System.out.println("------------ Timer stopped : " + task.getName());
        }

    } catch (RuntimeException e) {

    }
}
private Timer getTimer(Serializable timerId) {
    Timer timer = null;

    if (timerId != null) {
        Iterator<Timer> it = timerService.getTimers().iterator();

        while (it.hasNext()) {
            Timer currentTimer = it.next();

            if (currentTimer.getInfo().equals(timerId)) {
                timer = currentTimer;
                break;
            }
        }
    }

    return timer;
}
} 
```

# android - 在没有实际更改文本的情况下调用 afterTextChanged() 回调

> ID：13721063
> 
> 赞同：32
> 
> 时间：2012-12-05T10:27:54.303
> 
> 标签：android, android-edittext

我有一个片段，`EditText`里面有一个，`onCreateView()`我`TextWatcher`在`EditText`.

每次第二次添加片段时，都会`afterTextChanged(Editable s)`调用回调，而不会更改文本。

这是一个代码片段：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
...
    myEditText = (EditText) v.findViewById(R.id.edit_text);
    myEditText.addTextChangedListener(textWatcher);
...
}

TextWatcher textWatcher = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        searchProgressBar.setVisibility(View.INVISIBLE);
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void afterTextChanged(Editable s) {
        Log.d(TAG, "after text changed");
    }
} 
```

我还将片段设置为保留其状态，并将片段的实例保留在活动中。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-05T12:34:27.577

**编辑解决方案：**

看起来文本在第二次附加片段时发生了更改，因为片段恢复了视图的先前状态。

我的解决方案是在调用之前添加状态，**因为**`text watcher`状态`onResume()`已恢复。**`onResume`**

 **```
@Override
public void onResume() {
    super.onResume();
    myEditText.addTextChangedListener(textWatcher);
} 
```

**Edit** As @MiloszTylenda have mentioned in the comments it is better to remove the `Textwatcher` in the `onPause()` callback to avoid leaking the `Textwatcher`.

```
@Override public void onPause() {
  super.onPause();
  myEditText.removeTextChangedListener(watcher);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-10-15T10:52:48.807

It seems that this error comes from the fact that Android SDK will call settext when view is coming alive again to recover the state of the EditText. As you can see from the extract below there is a flag that you can change on the Edittext to bypass this behavior.

```
 <!-- If false, no state will be saved for this view when it is being
         frozen. The default is true, allowing the view to be saved
         (however it also must have an ID assigned to it for its
         state to be saved).  Setting this to false only disables the
         state for this view, not for its children which may still
         be saved. -->
    <attr name="saveEnabled" format="boolean" /> 
```

So by adding `android:saveEnabled="false"` on your EditText will fix the problem and the setText will not be called when view comes to foreground.

This is what I did and problem was solved.**

# c++ - std::map<>::iterator 错误

> ID：13721064
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:27:55.707
> 
> 标签：c++, templates, map, iterator

我正在创建地图：

```
std::map<TString, TString> cuts; 
```

其中 TString 是一个 ROOT 框架类，它将字符串存储为 char* （并具有一些附加功能），我使用 , 添加到我的 C++ 代码中`#include "TString.h"`，

然后我创建了一些剪切图元素：

```
cuts["cTRIGem0"] = "eminusL0ElectronDecision_TOS>0"; 
```

然后尝试创建一个迭代器来循环切割：

```
std::map<TSring, TSring>::iterator itr = cuts.begin(); 
```

这会产生许多错误：

```
Wenu.cpp:561:12: error: ‘TSring’ was not declared in this scope
Wenu.cpp:561:26: error: template argument 1 is invalid
Wenu.cpp:561:26: error: type/value mismatch at argument 2 in template parameter list for ‘template<class _Key, class _Tp, class _Compare, class _Alloc> class std::map’
Wenu.cpp:561:26: error:   expected a type, got ‘TSring’
Wenu.cpp:561:26: error: template argument 3 is invalid
Wenu.cpp:561:26: error: template argument 4 is invalid
Wenu.cpp:561:38: error: expected initializer before ‘itr’ 
```

我在某处看到该关键字`typename`可能会有所帮助。所以我将它添加到迭代器声明中：

```
std::map<typename TSring, typename TSring>::iterator itr = cuts.begin(); 
```

这给出了一个新错误：

```
Wenu.cpp:561:44: error: wrong number of template arguments (1, should be 4)
/cvmfs/lhcb.cern.ch/lib/lcg/external/gcc/4.6.2/x86_64-slc5/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.6.2/../../../../include/c++/4.6.2/bits/stl_map.h:88:11: error: provided for ‘template<class _Key, class _Tp, class _Compare, class _Alloc> class std::map’
Wenu.cpp:561:56: error: expected initializer before ‘itr’ 
```

任何有关如何解决此错误并使我的迭代器工作的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:29:55.570

你拼错了；你想要`TString`，没有`TSring`。

# java - 从 Java/Spring 中检索 RabbitMQ 队列中未确认消息的数量

> ID：13721066
> 
> 赞同：11
> 
> 时间：2012-12-05T10:28:04.767
> 
> 标签：java, spring, rabbitmq, amqp, spring-amqp

有没有办法返回未确认的消息数量？

我正在使用此代码来获取队列中的消息数：

```
DeclareOk declareOk = amqpAdmin.getRabbitTemplate().execute(
        new ChannelCallback<DeclareOk>() {
            public DeclareOk doInRabbit(Channel channel)
                throws Exception {
                return channel.queueDeclarePassive(name);
            }
        });
return declareOk.getMessageCount(); 
```

但我也想知道未确认消息的数量。

我已经看到 RabbitMQ 管理工具包含该信息（对于每个队列，它给出了就绪/未确认和总消息的数量），我想一定有一种方法可以从 Java/Spring 中检索这些信息。

谢谢

**更新**

好的，似乎没有办法以编程方式完成，因为配置/队列列表不是 AMPQ 的一部分。

可以启用管理插件并查询有关队列的 REST Web 服务（除其他外）。更多信息在这里：

[http://www.rabbitmq.com/management.html](http://www.rabbitmq.com/management.html)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-03-10T20:48:43.523

正如您在更新中所说，如果启用管理插件，则可以查询其余 api：

例如：

```
`http://username:password@queue-server:15672/api/queues/%2f/queue_name.queue` 
```

这将返回 json（除其他外）

*   消息未确认
*   messages_ready

如果您有通往服务器的安全路线，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-16T16:21:59.007

3.8.9 版本的实际网址：

`http://username:password@queue-server:15672/api/queues/%2F/queue-name`

# android - 在 Windows 环境下使用 Eclipse 创建 Android 应用程序时可以避免使用 Ruby 吗？

> ID：13721070
> 
> 赞同：-2
> 
> 时间：2012-12-05T10:28:19.140
> 
> 标签：android, ruby, eclipse, asp.net-mvc-3, windows-7

我们即将使用**ASP.NET MVC4**开发一个 Web 应用程序和一个我们将使用**Phonegap**的 android 应用程序。这两个应用程序将相互连接。我们发现**Ruby**是 **Windows 环境**的先决条件。**Ruby**是真的无法避免吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:30:21.110

Ruby 与使用 Phonegap 的 Windows 上的 android 开发无关。这是 Mac 上 phonegap 的设置指南：

[http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html)

对于 Windows 或 Mac 中的 Android，您在任何阶段都不需要 Ruby。

这是涵盖 windows 和 mac 设置的官方入门指南：

[http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

# regex - Reg expr 获取字符串后的数字

> ID：13721076
> 
> 赞同：0
> 
> 时间：2012-12-05T10:28:31.747
> 
> 标签：regex

我有以下字符串：

```
"test/12" 
```

该`test/`部分总是非常相似，即它有时可能是`test-ipad/`, `test-iphone/`, 等等...

后面总会有一个数字`/`。

我可以在 grails/groovy 中使用什么 reg exp 来检索数字？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:32:07.687

你可以使用这个：

```
test(-\w+)?\/(\d+) 
```

第二个匹配组将是数字。

# python - 使用pykml将扩展数据添加到python中的地标

> ID：13721077
> 
> 赞同：4
> 
> 时间：2012-12-05T10:28:32.557
> 
> 标签：python, kml, google-earth, pykml

我已经将一些地址连同几列数据上传到了 batchgeo。我已经下载了 kml 文件，其中包含坐标。数据结构如下：

```
<?xml version="1.0" ?>
<kml xmlns="http://earth.google.com/kml/2.0">
    <Document>
        <Placemark>
            <name>...</name>
            <description>....</description>
            <Point>
                <coordinates>-3.1034345755337,57.144817425039,0</coordinates>
            </Point><address>...</address>
            <styleUrl>#0</styleUrl>
        </Placemark>
    </Document>
</kml> 
```

当您单击 Google 地图/地球中的某个点（网址、地址等）时，“描述”标签是一团乱麻，其中包含扩展数据。我现在想在当前扩展数据下添加一些细节。我目前的策略是使用[pykml](http://packages.python.org/pykml/tutorial.html#building-pykml-python-scripts)，但我找不到 pykml 对象的扩展数据属性，而且我没有在文档中看到它。当我点击 Google 地球中的地标时，我希望它出现：

```
<Description>
item 1
item 2
item 3
</Description>
New data 
```

你能建议如何实现这一目标吗？谢谢。（顺便说一句，[pylibkml](http://code.google.com/p/pylibkml/wiki/BasicTutorial)有这个功能但是已经停产了，我找不到下载链接！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-17T11:30:01.693

好的，我将在这里玩一些死灵术，并留下一些帮助我解决类似问题的东西。这对我有用

```
pm = KML.Placemark(
                KML.name("My extended data point somewhere in sahara!"),
                KML.Point(KML.coordinates("10, 15")),
                KML.ExtendedData( 
                    KML.Data(KML.value('someValueGadzilion'),name='Your value name here')
                ) 
     ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T19:50:18.150

I've achieved what you say by using KML.description() method.

Code:

```
 placemark = KML.Placemark(
            KML.name('poi'),
            KML.description('blabla'),
            KML.LookAt(
                KML.longitude(lat),
                KML.latitude(lon),
                KML.altitude(alt),
                KML.heading('0'),
                KML.tilt(0),
                KML.range('0'),
            ),
            KML.Point(
                KML.coordinates(string)
            )
        ) 
```

# java - 如何对 Android 相机图像进行傅里叶变换？

> ID：13721078
> 
> 赞同：1
> 
> 时间：2012-12-05T10:28:35.190
> 
> 标签：java, android, image-processing, android-camera, fft

这是一个我已经思考了几个晚上的问题，而且我还没有真正接近答案。我想对刚刚在 Android 设备上的相机上拍摄的图像进行傅里叶变换。现在我看到它的方式，有3个选项可以做到这一点：

1.  将摄像头返回的 byte[] 数组转换为可以显示的图像。这似乎是最直接的方法，但我找不到任何可以转换字节数组的库。
2.  将字节数组转换为 int[] 或其他数字数组，并从 JTransform 等数学库之一运行转换。然后从数字数组转换为图像。
3.  将相机图像转换为 RenderedImage 对象并使用 Java Advanced Imaging 库中的 DFTDescriptor 类来执行转换。不确定这在电话处理器上运行得有多好，而且 JAI 的文档并不是最清楚的......

还是我错过了其他一些值得**用手击头**的明显方式？

如果有人能对此有所了解，我将不胜感激。我似乎在绕圈子！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:43:52.157

我的建议是您使用 Piotr Wendykier 的[JTransform 库](https://sites.google.com/site/piotrwendykier/software/jtransforms)（根据您的选项 2）。除其他可能性外，它还专门提供了 2D DFT 变换，它应该很好地满足您的要求。

干杯，

# extjs - getClass for actionColumn 仅在几行中

> ID：13721079
> 
> 赞同：0
> 
> 时间：2012-12-05T10:28:36.973
> 
> 标签：extjs, extjs4

我正在使用下面的代码来设置动作列的 css 类。但是即使结果为null，也有一些元素是通过extjs插入的。

```
getClass: function(v, meta, data) {        
  if (data.myDate < new Date())
        return null;
  else
        return 'insert';
} 
```

为返回 null 生成的 html：

```
<img alt="" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" 
class="x-action-col-icon x-action-col-1   null"> 
```

主要问题是在移动这个“空白”空间时光标变为手形指针。

当不显示图标时，有一种方法可以不生成元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:10:12.193

如果不扩展操作列，我看不到任何方法。IMO 最简单的方法是提供自定义`renderer`功能。例子：

```
Ext.define('Ext.grid.column.MyAction', {
    extend: 'Ext.grid.column.Action',

    constructor: function(config) {
        var me = this, 
            cfg = Ext.apply({}, config),
            items = cfg.items || [me],
            l = items.length,
            i,
            item,
            cls;

        me.callParent(arguments);

        me.renderer = function(v, meta) {
            v = Ext.isFunction(cfg.renderer) ? cfg.renderer.apply(this, arguments)||'' : '';

            meta.tdCls += ' ' + Ext.baseCSSPrefix + 'action-col-cell';
            for (i = 0; i < l; i++) {
                item = items[i];
                item.disable = Ext.Function.bind(me.disableAction, me, [i]);
                item.enable = Ext.Function.bind(me.enableAction, me, [i]);

                cls = (Ext.isFunction(item.getClass) ? item.getClass.apply(item.scope||me.scope||me, arguments) : (me.iconCls || ''));
                if (cls !== null) {
                    v += '<img alt="' + (item.altText || me.altText) + '" src="' + (item.icon || Ext.BLANK_IMAGE_URL) +
                        '" class="' + Ext.baseCSSPrefix + 'action-col-icon ' + Ext.baseCSSPrefix + 'action-col-' + String(i) + ' ' + (item.disabled ? Ext.baseCSSPrefix + 'item-disabled' : ' ') + (item.iconCls || '') +
                        ' ' + cls + '"' +
                        ((item.tooltip) ? ' data-qtip="' + item.tooltip + '"' : '') + ' />';
                }
            }
            return v;
        };
    }

}); 
```

# javascript - 为 iPad 设置不同的初始缩放级别

> ID：13721087
> 
> 赞同：0
> 
> 时间：2012-12-05T10:29:02.820
> 
> 标签：javascript, ios, ipad, viewport, meta

我的标签中有以下`<meta>`标签`<head>`：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, minimum-scale=1, user-scalable=1"> 
```

这很好用，除了我想为 iPad 使用稍微不同的默认缩放级别（最好是某个屏幕宽度范围内的所有设备），例如：

```
<meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=2, minimum-scale=0.9, user-scalable=1"> 
```

如果没有服务器端用户代理检测，这可能吗？最好使用javascript。我试图根据`navigator.plattform`字符串来改变它，但是`initial-scale`如果你在它已经设置好之后改变它，它就不会很好地发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:57:29.537

很抱歉自己回答这个问题，但我找到了一种使用方法`document.write`：

```
(function( zoom ){
    document.write('\x3Cmeta name="viewport" content="'+
                   'width=device-width,'+
                   'initial-scale='+zoom+','+
                   'maximum-scale=2,'+
                   'minimum-scale='+zoom+','+
                   'user-scalable=1">');
}( /ipad/i.test(navigator.platform)?'0.9':'1') ) 
```

# puppet - 无法启动人偶大师

> ID：13721088
> 
> 赞同：1
> 
> 时间：2012-12-05T10:29:04.753
> 
> 标签：puppet

无法启动`puppetmaster`。这是 puppetmaster & puppet 的全新安装。

我正在运行以下命令：

```
sudo /etc/init.d/puppetmaster start

Starting puppetmaster: Could not prepare for execution: 
Got 6 failure(s) while initializing: 
  Could not evaluate: Could not find group puppet; 
  Could not evaluate: Could not find group puppet; 
  Could not evaluate: Could not find group puppet; 
  Could not evaluate: Could not find group puppet; 
  Could not evaluate: Could not find group puppet; 
   Could not evaluate: Could not find group puppet
                                                           [FAILED] 
```

以上注意了。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:11:36.610

如果查看日志输出，您会发现缺少“puppet”组。常见的全新安装。如果将组添加到系统中，您应该能够启动。

```
sudo groupadd puppet
sudo /etc/init.d/puppetmaster start 
```

# android - 在ANDROID中以编程方式设置子布局宽度？

> ID：13721090
> 
> 赞同：11
> 
> 时间：2012-12-05T10:29:09.867
> 
> 标签：android, android-layout, android-widget

在我的代码中，我有一个具有多个子布局的 XML 文件。A而且我只想根据设备的屏幕宽度以编程方式设置这些子布局的宽度之一。到目前为止，我已经尝试过 Layout params、setparam 和其他方法，但它在获取布局 id 时显示空指针异常。

我的父布局是相对布局，第一个子布局是线性布局（“对于这个布局，我需要改变宽度”）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parentlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:id="@+id/childlayout"
        android:layout_width="250dip"
        android:layout_height="fill_parent"
        android:orientation="vertical" 
        android:background="#153746">
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:background="@drawable/sub_title"
            android:gravity="center_vertical" >
            <TextView
                android:id="@+id/menu_header_label"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textStyle="bold"
                android:text="asd"
                android:textColor="#ffffff"
                android:layout_marginLeft="10dip" />

            <ImageView
                android:id="@+id/menu_header"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal" />
        </LinearLayout>
        <ListView
            android:id="@+id/menu_listview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:divider="@android:color/darker_gray"
            android:dividerHeight="1dip"
            android:scrollingCache="false" />
    </LinearLayout>

    <FrameLayout
        android:id="@+id/overlay"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </FrameLayout>

</LinearLayout> 
```

Java代码：-

```
 public class SlideMenu extends LinearLayout {

    // keys for saving/restoring instance state
    public final static String KEY_MENUSHOWN = "menuWasShown";
    private final static String KEY_STATUSBARHEIGHT = "statusBarHeight";
    private final static String KEY_SUPERSTATE = "superState";

//  Display display = ((WindowManager) getWindowToken()).getDefaultDisplay(); 
//  int width = display.getWidth();  // deprecated
//  int height = display.getHeight();  // deprecated
//  float layWidth = (width*70)/100;
//  
////    LinearLayout view= (LinearLayout)findViewById(R.id.childlayout);
////    LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) view.getLayoutParams();
////    params.width = 130;
////    view.setLayoutParams(params);
//  view.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, theSizeIWant));

    public static class SlideMenuItem {
        public int id;
        public Drawable icon;
        public String label;
    } 
```

这是我的代码片段，我评论了到目前为止我尝试过的部分并得到了任何好的结果..``

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T10:38:00.537

你可以这样做：将 id 设置为此子线性布局，然后：

```
LinearLayout linLayout = (LinearLayout) findViewById(R.id.yourID);
LinearLayout .LayoutParams layoutParams= new 
LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, 
LinearLayout.LayoutParams.MATCH_PARENT);//or whatever , you can set the width and height programmatically and then setLayoutParams() 
```

**编辑：**

我看你已经试过了，对不起。但是有两个线性布局不是吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T10:40:29.850

把它放在java代码中：

```
int width = 300;
int height = LayoutParams.WRAP_CONTENT;
LinearLayout childLayout = (LinearLayout) findViewById(R.id.childLayout);
childLayout.setLayoutParams(new LayoutParams(width, height)); 
```

# spring-mvc - 如何在 Spring Source Tool Suite 上调试 Spring MVC 应用程序

> ID：13721092
> 
> 赞同：5
> 
> 时间：2012-12-05T10:29:13.153
> 
> 标签：spring-mvc

## 在 Spring Source Tool Suite 中调试

嗨，我正在使用 Spring Source Tool Suite 进行 Spring MVC 开发。我在控制器中设置了断点来调试应用程序。我通过以下步骤运行我的 Web 应用程序 - 1）通过在代码行旁边的空白处双击来设置断点 2）单击运行 > 调试为 > 在服务器上调试

但我没有切换到调试模式。请给我任何调试 Spring MVC 应用程序的建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T08:47:07.547

选择 **Window-->Show View--> Servers**。 *右键单击*服务器**面板**中的服务器，

选择**“Restart in Dedug”**或**Debug**选项，

在代码中添加断点，

然后右键单击应用程序，选择**Debug As --> Debug on Server**。

使用***F5***进入方法。使用***F6***转到下一条语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T04:56:17.877

除了以上viraj的答案。

您可以使用***F11***在调试模式下运行项目并

您可以使用***F8***恢复到下一个断点。

# sql - Oracle：如何通过查询获得总数的百分比？

> ID：13721093
> 
> 赞同：18
> 
> 时间：2012-12-05T10:29:16.700
> 
> 标签：sql, oracle

我有以下查询，其结果出乎我的意料：

```
select stato, (count(1) *100) / sum(1)
from LOG_BONIFICA
group by stato; 
```

它为所有行返回 100。应该不一样吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-05T10:39:22.110

`count(1)`在你的情况下等于`sum(1)`。

尝试这样的事情：

```
18:39:36 SYSTEM@dwal> ed
Wrote file S:\\tools\buffer.sql

  1  select owner,
  2         count(*) group_cnt,
  3         sum(count(*)) over() total_cnt,
  4         round(100*(count(*) / sum(count(*)) over ()),2) perc
  5    from dba_objects
  6   group by owner
  7*  order by 4 desc
18:39:57 SYSTEM@dwal> /

OWNER                           GROUP_CNT  TOTAL_CNT       PERC
------------------------------ ---------- ---------- ----------
SYS                                 31609      59064      53.52
PUBLIC                              24144      59064      40.88
XDB                                  1660      59064       2.81
SYSTEM                                597      59064       1.01
WMSYS                                 332      59064        .56
EXFSYS                                312      59064        .53
IRKAZDATA                             158      59064        .27
STRMADMIN                              92      59064        .16
DBSNMP                                 55      59064        .09
RI                                     25      59064        .04
PASS                                   16      59064        .03
POTS                                   19      59064        .03
TI                                     11      59064        .02
STRMODS                                11      59064        .02
OUTLN                                  10      59064        .02
APPQOSSYS                               5      59064        .01
ORACLE_OCM                              8      59064        .01

17 rows selected.

Elapsed: 00:00:00.16 
```

**更新**：甚至更简单的 ratio_to_report

```
18:53:36 SYSTEM@dwal> ed
Wrote file S:\\tools\buffer.sql

  1  select owner,
  2         round(100*ratio_to_report(count(*)) over (), 2) perc
  3    from dba_objects
  4   group by owner
  5*  order by 2 desc
18:54:03 SYSTEM@dwal> /

OWNER                                PERC
------------------------------ ----------
SYS                                 53.52
PUBLIC                              40.88
XDB                                  2.81
SYSTEM                               1.01
WMSYS                                 .56
EXFSYS                                .53
IRKAZDATA                             .27
STRMADMIN                             .16
DBSNMP                                .09
RI                                    .04
PASS                                  .03
POTS                                  .03
TI                                    .02
STRMODS                               .02
OUTLN                                 .02
APPQOSSYS                             .01
ORACLE_OCM                            .01

17 rows selected.

Elapsed: 00:00:00.20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:43:27.800

您指的是以下内容吗？您需要单独查找总数。

*   参考[SQLFIDDLE](http://sqlfiddle.com/#!2/26703/12)

桌子：

```
ID  NAME    AMOUNT  STATE
1   john    1000    fl
2   jane    5000    ga
3   james   2000    ca
4   tom     6000    ga
5   tim     8000    fl
6   jim     2000    ga
7   kate    8000    fl
8   jack    3000    tx 
```

结果1：

```
STATE   SUM(AMOUNT)
ca      2000
fl      17000
ga      13000
tx      3000 
```

最终查询：

```
select t1.state, concat(
  round(((sum(t1.amount)/t2.total))*100,2),
'%') as pct
from t1, 
(select sum(amount) as total from t1) as t2
group by t1.state
; 
```

结果：

```
 STATE    COUNT(T1.ID)    SUM(T1.AMOUNT)  TOTAL   PCT
   ca       1               2000           35000    5.71%
   fl       3               17000          35000    48.57%
   ga       3               13000          35000    37.14%
   tx       1               3000           35000    8.57% 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-05T11:41:19.100

使用[ratio_to_report](https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions124.htm)解析函数：

```
SELECT STATO, 
    COUNT(1) STATO_COUNT, 
    RATIO_TO_REPORT(COUNT(1)) OVER() * 100 STATO_PERCENT
FROM LOG_BONIFICA
GROUP BY STATO 
```

所以你不需要自己计算总行数和比率。

# c++ - 如何使用c ++删除数组中的某些值

> ID：13721101
> 
> 赞同：0
> 
> 时间：2012-12-05T10:29:35.383
> 
> 标签：c++

我有一个系统可以自动读取存储在他公司员工访问卡上的信息。这些信息存储在一个数组中。当读卡器不工作时，员工必须在读卡器附近的密码键盘上输入他的姓名和密码才能进入大楼，读卡器会自动创建信息并存储在阵列中。数组的第三个第一个单元格总是用正确的值填充，其余的单元格用 0 填充。我的工作是访问这个数组并删除第三个元素之后所有不相关的零，即使它之前存在 0第三个要素，这个必须保留。

我有以下代码：

```
 #include <iostream>  
    #include <string>      
    using namespace std;  
    int main(){  
      int const Taille=5;  
      int Track2[Taille], i;      
      Track2[0]=1;  
      Track2[1]=0;  
      Track2[2]=3;  
      Track2[3]=0;  
      Track2[4]=0;      
      cout<<"voici le contenu du tableau: \n";  
      for(i=0;i<Taille;i++){  
        if(Track2[i]!=0){  
        cout<<"Track2["<<i<<"]= "<<Track2[i]<<"\n";  
    }  
     }  
    return 0;  
    } 
```

执行此操作时，我得到以下结果： **voici le contenu du tableau: Track2[0]= 1 Track2[2]= 3**我想得到这个结果：**voici le contenu du tableau: Track2[0]= 1 Track2[ 1]= 0 Track2[2]= 3**这意味着，只有在我的数组的第 tird 元素（此处为 Track2[2]）之后 = 0 的值必须从我的数组中删除。请问我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:38:03.480

如果您使用 C++，请使用[std::vector 。](http://www.cplusplus.com/reference/vector/vector/)`std::vector`有`erase`方法，用它。

```
#include <iostream>
#include <vector>

int main ()
{
  std::vector<int> myvector;

  // set some values (from 1 to 10)
  for (int i=1; i<=10; i++) myvector.push_back(i);

  // erase the 6th element
  myvector.erase (myvector.begin()+5);

  // erase the first 3 elements:
  myvector.erase (myvector.begin(),myvector.begin()+3);

  std::cout << "myvector contains:";
  for (unsigned i=0; i<myvector.size(); ++i)
    std::cout << ' ' << myvector[i];
  std::cout << '\n';

  return 0;
} 
```

[sts::vector::erase](http://www.cplusplus.com/reference/vector/vector/erase/)文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:42:14.213

Your program doesn't *erase* parts of the array, it should simply not print the last part of it (if I'm reading your question correct).

For that you can keep another variable, containing the last usable index, and loop until you reach that instead.

If you really want to *erase* entries from an array, I suggest you to use [`std::vector`](http://en.cppreference.com/w/cpp/container/vector) instead.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:40:51.160

从数组中删除并不容易，因为数组具有固定的大小（例如，5），该大小是在创建数组时确定的。

不要删除元素，而是将元素复制到同一个数组中以替换不需要的元素，例如：

```
// Move element 2 to element 1, erasing the old element 1
Track[1] = Track[2];
Track[2] = 0; 
```

Another solution is to use a std::vector instead of an array. If Track2 is a vector, then you can use the vector::erase method to remove an element.

Another solution is to copy elements into a smaller array, for example:

```
// New temporary smaller array
int Temp[2];
// Copy elements we want to keep
Temp[0] = Track2[0];
Temp[1] = Track2[2]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:45:10.127

There are ways to delete elements from an array, but you will not find a function that deletes all the elements at the end that are zero.

You need to take care of this yourself. What you need is to find the length of the array up to the last non-zero element. You can do this but traversing the array backwards:

```
int length;
for(length=Taille; i>=0; --length) {
   if (Track2[index] != 0) {
      break;
   }
} 
```

`length`will have the length of the array, and you can use this as upper bound in printing your array

# asp.net-mvc-3 - 从多个表中选择数据并将合并的数据显示到视图 mvc3

> ID：13721102
> 
> 赞同：0
> 
> 时间：2012-12-05T10:29:41.337
> 
> 标签：asp.net-mvc-3, linq

我有两张桌子

```
 USER_LOGIN

    USER_ID USER_NAME        PASSWORD
--------------------------------------------
       1    User 1          some data
       2    User2           somedata
       3    User3           Some Data 
```

和

```
USER_DETAIL 
ID  USER_ID  NAME   ADDRESS
-------------------------------
 1     2    Name 2  Address
 2     3    Name    Three 
```

现在如何通过用户 ID 从这两个表中选择数据并将合并的数据显示到视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:35:03.343

1.  在 SQL Server 中作为函数执行连接操作
2.  使用 LINQ 将函数的结果从数据库带到应用程序
3.  将结果应用到网格数据源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:29:56.723

是的，您可以通过 SQL Server 中的连接概念来实现

```
select * from USER_LOGIN A join USER_DETAIL B on A.USER_ID=B.USER_ID 
```

现在，您将通过连接两个表获得所有数据，并且可以将任何内容传递给数据表或数据集，然后您可以将其传递给控制器​​和查看。你仍然可以选择你的加入方式，它可能是“leftjoin”，“rightjoin”这样的。请参考这些链接以获得清晰的解释

[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

[http://beginner-sql-tutorial.com/sql-joins.htm](http://beginner-sql-tutorial.com/sql-joins.htm)

希望能帮助到你！！！

# java - 在 SWT-Widgets 上自动生成 ID

> ID：13721105
> 
> 赞同：5
> 
> 时间：2012-12-05T10:29:46.387
> 
> 标签：java, swt, eclipse-rcp, gui-testing, ui-testing

有没有办法在 SWT-Widgets 上自动生成 ID，以便 UI-Tests 可以引用它们？我知道我可以使用 seData 手动设置 id，但我想以某种通用的方式为现有应用程序实现此功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T12:47:50.963

`Display.getCurrent().getShells();`您可以使用和递归地为应用程序中的所有 shell 分配 ID `Widget.setData();`。

**设置 ID**

```
Shell []shells = Display.getCurrent().getShells();

for(Shell obj : shells) {
    setIds(obj);
} 
```

您可以使用方法访问应用程序中所有活动的（未释放的）Shell `Display.getCurrent().getShells();`。您可以遍历每个的所有子级，并使用方法`Shell`为每个子级分配一个 ID 。`Control``Widget.setData();`

```
private Integer count = 0;

private void setIds(Composite c) {
    Control[] children = c.getChildren();
    for(int j = 0 ; j < children.length; j++) {
        if(children[j] instanceof Composite) {
            setIds((Composite) children[j]);
        } else {
            children[j].setData(count);
            System.out.println(children[j].toString());
            System.out.println(" '-> ID: " + children[j].getData());
            ++count;
        }
    }
} 
```

如果`Control`是 a`Composite`它可能在复合材料中具有控件，这就是我在示例中使用递归解决方案的原因。

* * *

**按 ID 查找控件**

现在，如果您想在其中一个 shell 中找到一个 Control，我会建议一种类似的递归方法：

```
public Control findControlById(Integer id) {
    Shell[] shells = Display.getCurrent().getShells();

    for(Shell e : shells) {
        Control foundControl = findControl(e, id);
        if(foundControl != null) {
            return foundControl;
        }
    }
    return null;
}

private Control findControl(Composite c, Integer id) {
    Control[] children = c.getChildren();
    for(Control e : children) {
        if(e instanceof Composite) {
            Control found = findControl((Composite) e, id);
            if(found != null) {
                return found;
            }
        } else {
            int value = id.intValue();
            int objValue = ((Integer)e.getData()).intValue();

            if(value == objValue)
                return e;
        }
    }
    return null;
} 
```

使用该方法，您可以通过它的 ID`findControlById()`轻松找到一个。`Control`

```
 Control foundControl = findControlById(12);
    System.out.println(foundControl.toString()); 
```

**链接**

*   [SWT API：小部件](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Widget.html)
*   [SWT API：显示](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Display.html)

# vb.net - 如何将图像文件从 Internet 临时文件（来自 IE）文件夹复制到 vb.net 中的 C:\Test\test.jpg

> ID：13721109
> 
> 赞同：1
> 
> 时间：2012-12-05T10:29:55.680
> 
> 标签：vb.net, file, copy

当您访问 IE 中 Temporary Internet Files 中的网站图像文件存储时。

我将在 Visual Studio 2010 中通过 vb.net 将此文件夹中的图像文件复制到 C:\test.jpg

请帮我。

# android - 从活动创建 .jar

> ID：13721110
> 
> 赞同：1
> 
> 时间：2012-12-05T10:29:59.613
> 
> 标签：android

有谁知道如何从一项活动创建 .jar 文件？我不需要其他任何东西，只需从 Activity 类本身创建一个 .jar （我不需要 .xml 文件）。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:38:15.600

您可以尝试使用普通导出菜单来执行此操作。在 Eclipse 中，它可以通过`Right button click on project->Export->Java->JAR file`仅选择您的 Activity 文件来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:38:51.770

你可以`export`上课。在日食中

选择你的类，写点击它导出-> java-> jar文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:39:18.200

您可以创建一个新的 Android 项目，其中包含如下类：

```
public class ClassA extends Activity {
...
} 
```

确保只创建一个类，没有 Android Activity。然后，您可以导出它的 jar 文件。

# java - 为什么使用`invokespecial`来调用` `java中的方法？

> ID：13721111
> 
> 赞同：3
> 
> 时间：2012-12-05T10:29:59.997
> 
> 标签：java, compiler-construction, constructor, jvm

java中为什么`invokespecial`要调用方法？`<init>`

我在多个地方阅读但无法理解完美的原因？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:32:19.390

从[这里](https://www.vmth.ucdavis.edu/incoming/Jasmin/ref--33.html)：

> 的主要用途是在新对象的构造阶段`invokespecial`调用对象的实例初始化方法。`<init>`

也从[这里](http://zeroturnaround.com/labs/java-bytecode-fundamentals-using-objects-and-calling-methods/)：

> 换句话说，`invokespecial`用于调用方法而不考虑动态绑定，以便调用特定类的方法版本。

第二个引号**最适**用于您的问题，因为我们知道调用构造函数（`<init>`）方法始终具有静态绑定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T19:53:51.340

这些链接对于非常简单的语言很有用

[http://arhipov.blogspot.in/2011/01/java-bytecode-fundamentals.html](http://arhipov.blogspot.in/2011/01/java-bytecode-fundamentals.html)

[http://commons.apache.org/bcel/manual.html](http://commons.apache.org/bcel/manual.html)

ibm的这篇文章也很好，有很好的例子

[http://www.ibm.com/developerworks/ibm/library/it-haggar_bytecode/](http://www.ibm.com/developerworks/ibm/library/it-haggar_bytecode/)

# spring - 使用spring-mongo关闭mongo连接的正确方法是什么？

> ID：13721115
> 
> 赞同：1
> 
> 时间：2012-12-05T10:30:04.520
> 
> 标签：spring, mongodb, tomcat7, spring-mongo

我在我的 web 应用程序中使用 spring-mongo。当我在 Tomcat7 中取消部署我的应用程序时，出现内存泄漏。我怀疑它可能是我没有明确关闭的 Mongo 对象。我想知道关闭它的正确方法（和位置）是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:12:39.617

像这样的东西怎么样：

```
@Component
public class MongoDBManager {

  @Autowired
  Mongo mongo;

  @PreDestroy
  public void shutdown() {
    mongo.close();
  }
} 
```

# google-analytics - 缺少 Google Analytics（分析）自定义维度和指标！安卓 SDK 2.0

> ID：13721116
> 
> 赞同：1
> 
> 时间：2012-12-05T10:30:10.670
> 
> 标签：google-analytics

我目前正在尝试使用 Google Analytics (GA) SDK 2.0 为一组 Android 应用程序设置跟踪。

其中大部分工作正常，但我想使用自定义维度和指标来跟踪一些事情。我已经使用自定义变量在早期的 SDK 上设置了这些东西，没有任何问题，但是在新的 SDK 中，自定义变量被自定义维度和指标所取代。这些必须在 GA 界面中创建，然后在应用程序中调用。

不幸的是，它们在我的界面中不可用，所以我无法设置它们。目前网上也没有太多关于这个问题的信息，所以我可能需要先设置一些东西才能在我的界面中访问这些，我不知道。

有没有人可以解决这个问题？还有其他人面临同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:35:32.833

自定义维度在属性级别配置，而不是配置文件级别

![在此处输入图像描述](../Images/f8b95867494c2eddfad148d009d85880.png)

# r - 使用 R 和 Hadoop 进行逻辑回归

> ID：13721119
> 
> 赞同：2
> 
> 时间：2012-12-05T10:30:17.000
> 
> 标签：r, hadoop, linear-regression

我们正在使用`rmr`和`rhadoop package`。`RevoR`我们可以在hadoop中对整个数据集执行线性回归而不需要在map reduce中实现线性回归算法吗

或者

rmr 和 rhadoop 是不是只用于汇总数据，然后在本地对汇总的数据进行回归？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:37:46.983

两者都不。您可以在 rmr 中实现任何类型的算法，而不仅仅是摘要。然而，它不是一个算法包，因此它不包括线性回归或聚类或任何类似的东西，很像并行包或雪包。

# sql-server-2008-r2 - 如何将 SDF 文件数据库转换为 SqlServer 数据库

> ID：13721126
> 
> 赞同：0
> 
> 时间：2012-12-05T10:30:28.727
> 
> 标签：sql-server-2008-r2, sql-server-ce

我有一个 SDF 文件数据库（SQLCESerer Compact 3.5），我想使用 Sql Server 2008 R2 将其转换为 SqlServer 数据库文件。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:33:42.363

导出数据，在 sql server 中创建架构，导入数据。

更新：或者有工具。[在http://www.microsoft.com/web/post/migrate-a-database-to-sql-server](http://www.microsoft.com/web/post/migrate-a-database-to-sql-server)查看演练

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-05T12:14:49.417

上面选择的答案指向一个不再存在的页面。这就是我能够实现将 SDF 迁移到 SQL Server 的方式： [https ://blog.nicolaayan.com/2018/02/how-to-migrate-sdf-database-to-sql-server/](https://blog.nicolaayan.com/2018/02/how-to-migrate-sdf-database-to-sql-server/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T06:51:09.190

1.  打开 SQL Server Management Studio，或者如果它正在运行，请选择 File -> Connect Object Explorer...
2.  在 Connect to Server 对话框中，将 Server type 更改为 SQL Server Compact Edition
3.  从数据库文件下拉列表中选择
4.  打开您的 SDF 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-04T14:17:53.613

由于某种原因，“服务器类型”在我的 SQL Management Studio 版本中不可用。经过一番挖掘，事实证明 WebMatrix 提供了数据库迁移。也许这可以帮助某人？:-)

# javascript - 如果为空颜色背景，则Javascript验证文本框为空

> ID：13721129
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:30:36.873
> 
> 标签：javascript, oracle-apex

```
SELECT 
apex_item.text(1, NULL, 4, 4, NULL, 'f01_#ROWNUM#') ONE,
apex_item.text(2, NULL, 4, 4,   'onclick="port(#ROWNUM#);"', 'f02_#ROWNUM#') TWO 
FROM DUAL 
```

我需要在按钮单击和 onclick 事件上验证上述查询中的两个文本框，当它们为空时突出显示背景色。并提示警报消息。

我正在使用下面的 javascript 函数。但这不起作用。请给我建议。

```
<script type="text/javascript">
function port(pRow) {
   if ( $x_Item('f01_'+pRow).val = ' ) then   {
       alter('Empty');  
   } 
}
</script> 
```

谢谢苏迪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:45:57.563

您的 javascript 语法似乎错误。尝试这个：

```
<script type="text/javascript">
function validate() {
   var list = document.getElementsByTagName('INPUT');
   for (var x = 0; x < list.length; x++){
      var txb = list[x];
      if (txb.getAttribute('type').toLowerCase() == 'text'){
        if ( txb.value == '' ) {
           txb.style.backgroundColor = '#a00';
        } 
        else{
            txb.style.backgroundColor = ''; //return to default color
        }
      }
   }
}
</script> 
```

我不知道你的页面结构，所以这个脚本不是最有效的方法，但它应该可以工作。每当您想检查您的文本框值时，您只需调用 JS 函数“validate()”。

# iphone - 具有不同字符串选项的 Plist

> ID：13721131
> 
> 赞同：1
> 
> 时间：2012-12-05T10:30:43.430
> 
> 标签：iphone, ios, ipad, plist

有没有办法从源代码在 plist 文件中添加字符串？我想再添加两列，但是当我尝试这样做时，它表明代码已损坏。是否有任何选项可以传递更多值？工作代码是

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
<dict>
    <key>title</key>
    <string>Title 1</string>
    //here i want to add one more string(value) how to do so?

    <key>subtitle</key>
    <string>Subtitle 1</string>
    <key>image</key>
    <string>image1.png</string>
</dict> 
```

我在 plist 中想要的是...

`Key` `Type` `Value` `value` `value`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
<dict>
    <key>title</key>
    <string> 1</string>
    <string> 2 </string> 
     <string> 3</string>
    </dict>
 </Plist> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:37:48.620

不幸的是，字典使用键/值范式，这意味着给定键只有一个值。但是你可以设置一个包含两个字符串的数组，例如：

```
<key>title</key>
<array>
    <string>Title 1</string>
    <string>Title 2</string>
</array> 
```

# php - 从空值和仅包含一个单词的数组制作过滤器数组

> ID：13721136
> 
> 赞同：1
> 
> 时间：2012-12-05T10:30:53.653
> 
> 标签：php, arrays, unset

我想删除数组中的空值并删除仅包含一个单词的值。

这是我的代码：

```
$all = "smart lion, smart duck, small ant, , pig";
$allkey = explode (',',$all);
$allkey = array_unique($allkey);
for ($i = 0; $i < (count($allkey)); $i++)
{
    if (str_word_count($allkey[$i]) < 2)
    {
        unset($allkey[$i]);
    }
    else
    {
        echo $allkey[$i]."<br />";
    }
} 
```

我想删除空值和单词“猪”，帮助我使这段代码工作。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:47:15.133

您可以通过使用自定义回调函数一次调用[array_filter](http://php.net/manual/en/function.array-filter.php)来实现您想要的：

```
$all = "smart lion, smart duck, small ant, , pig";
// get array of unique, trimmed elements
$exploded = array_unique(array_map('trim', explode(',', $all)));
$allkey = array_filter($exploded, function($el) {
  $val = trim($el);
  // return false if empty or only one word, which will remove the element from the array
  return (!empty($val) && str_word_count($val) >= 2);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:39:29.993

```
<?php

$all = "smart lion, smart duck, small ant, , pig";
$allkey = explode (',',$all);
$allkey = array_unique($allkey);

$allkey = array_map( 'trim', $allkey );
$allkey = array_filter( $allkey );

var_dump( $allkey ); 
```

array_map 遍历您的数组并执行将删除开头和结尾空格的函数 trim。array_filter 删除空值作为评估为假。

另一种方式：

```
<?php   
$all = "smart lion, smart duck, small ant, , pig";
$allkey = explode (',',$all);
$allkey = array_unique($allkey);

foreach( $allkey as $key => $entry ) {
 $entry = trim( $entry );

 if( empty($entry) ) {
   unset( $allkey[$key] );
 }
}

var_dump( $allkey ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:51:47.480

您可以执行以下操作：

```
$arr = explode(',',"smart lion, smart duck, small ant, , pig");
foreach($arr as $ky => $val) {
    if (strpos(trim($val),' ') === false) {
            unset($arr[$ky]);
        }
}
var_dump($arr); 
```

以上回声：

> 数组（3）{[0]=>字符串（10）“聪明的狮子”[1]=>字符串（11）“聪明的鸭子”[2]=>字符串（10）“小蚂蚁”}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:40:04.420

有代码

```
$all = "smart lion, smart duck, small ant, , pig, pelican";
$allkey = explode (',',$all);
$allkey = array_unique($allkey);
for ($i = 0; $i < (count($allkey)); $i++)
{
    //we count the number of words
    $allwords = explode (' ',$allkey[$i]);
    //Remove empty words
    for ($j = 0; $j < (count($allwords)); $j++) {
        if ($allwords[$j]=="") unset($allwords[$j]);
    }
    if (count($allwords)<2)
        unset($allkey[$i]);
    else
        echo trim($allkey[$i])."\n";
} 
```

[http://codepad.org/j6B2eEEX](http://codepad.org/j6B2eEEX)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T10:42:17.830

首先，我会`trim()`在循环中喜欢

```
for ($i = 0; $i < (count($allkey)); $i++)
{
    $elem = trim($allkey[$i]);
} 
```

其次，要跳过少于两个单词的值，我会将其写入一个单独的数组。所以在`for(...)`循环之前添加：

```
$foundelems = array(); 
```

然后在`for(...)`循环内，这样做`if`：

```
if(str_word_count($elem) >= 2) {
    $foundelems[] = $elem;
} 
```

并且您在`$foundelems`数组中有正确的项目。全部一起：

```
$all = "smart lion, smart duck, small ant, , pig";
$allkey = explode (',',$all);
$allkey = array_unique($allkey);
$foundelems = array();
for ($i = 0; $i < (count($allkey)); $i++)
{
    $elem = trim($allkey[$i]);
    if(str_word_count($elem) >= 2) {
        $foundelems[] = $elem;
    }
} 
```

# mysql - Mysql group_concat 具有来自另一行的不同值

> ID：13721139
> 
> 赞同：3
> 
> 时间：2012-12-05T10:31:03.553
> 
> 标签：mysql, database, group-by, group-concat

我在这里的第一篇文章，希望我遵循正确的发布指南。如果不是，请指出。

我的带有一些示例数据的表结构（credit_notes）如下所示：

```
index | customer_id | user_id | doc_number | doc_date   | amount | scheme_description
+-----+-------------+---------+------------+------------+--------+-------------------
1     | 8           | 2       | IABCD001   | 2012-09-08 | 1232   | XYZ Scheme
2     | 8           | 2       | IABCD001   | 2012-09-08 | 2032   | XYZ Scheme 
3     | 8           | 2       | IABCD002   | 2012-09-09 | 2556   | XYZ Scheme 
4     | 8           | 2       | IABCD003   | 2012-09-08 | 232    | XYZ Scheme 
5     | 8           | 2       | IABCD001   | 2012-09-10 | 2556   | ABC Scheme
6     | 8           | 2       | IABCD003   | 2012-09-10 | 232    | ABC Scheme 
```

我的要求是通过分组提取每个 scheme_description 和 doc_date 组合的总金额。这是我当前的查询：

```
SELECT 
    SUM( `amount` ) AS `totalamount`,
    GROUP_CONCAT( CONCAT( `amount` , ";" ) ORDER BY `index` DESC SEPARATOR '' ) AS `amounts`, 
    GROUP_CONCAT( CONCAT( `doc_number` , ";" ) ORDER BY `doc_number` DESC SEPARATOR '' ) AS `docno` , 
    `doc_date` AS `docdate` , 
    `scheme_description` AS `schemedesc` 
FROM (
        SELECT 
            `c`.`index` ,
            `c`.`doc_number` , 
            `c`.`doc_date` , 
            `c`.`amount` , 
            `c`.`scheme_description` 
        FROM `credit_notes` AS `c` 
        WHERE `c`.`customer_id` = 8 
        AND `c`.`user_id` LIKE 2
)t
GROUP BY `scheme_description` , `doc_date` 
```

此查询返回此结构：

```
totalamount | amounts        | docno                       | docdate    | schemedesc
+-----------+----------------+-----------------------------+------------+-----------
3496        | 1232;2032;232; | IABCD001;IABCD001;IABCD003; | 2012-09-08 | XYZ Scheme
2556        | 2556;          | IABCD002;                   | 2012-09-09 | XYZ Scheme
23477       | 255;23222;     | IABCD007;IABCD007;          | 2012-09-10 | ABC Scheme 
```

但是，我需要对此稍作改动，我想对每个不同**docno的****数量**列求和，并按正确的顺序对其进行分组。因此，根据上述数据，查询应产生：

 **```
totalamount | amounts        | docno                       | docdate    | schemedesc
+-----------+----------------+-----------------------------+------------+-----------
3496        | 3264;232;      | IABCD001;IABCD003;          | 2012-09-08 | XYZ Scheme
2556        | 2556;          | IABCD002;                   | 2012-09-09 | XYZ Scheme
23477       | 23477;         | IABCD007;                   | 2012-09-10 | ABC Scheme 
```

这可能使用 group_concat 和 distinct 和 sum。阅读我能找到的所有内容，但找不到任何指向正确方向的内容。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:53:11.377

您的第一个查询可以这样写：

```
select
  doc_date, scheme_description,
  group_concat(doc_number),
  group_concat(amount),
  sum(amount)
from
  credit_notes
group by doc_date, scheme_description 
```

你的第二个：

```
select
  doc_date, scheme_description,
  group_concat(doc_number),
  group_concat(amount),
  sum(amount)
from (
  select doc_date, scheme_description, doc_number, sum(amount) as amount
  from credit_notes
  group by doc_date, scheme_description, doc_number
) s
group by doc_date, scheme_description 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:05:10.457

试试这个查询

```
select 
    group_concat(doc_num) as DocNumm,
    group_concat(amount) as DocNumm,
    scheme_description as SchemaDesc,
    sum(amount) as TotalAmount,
    amount as Amount,
    doc_date as DocDate
from (
    SELECT * from `schema` 
) as g
group by SchemaDesc , DocDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:48:59.517

试试这个查询 -

```
SELECT
  SUM(amount) totalamount,
  GROUP_CONCAT(amount) amounts,
  GROUP_CONCAT(doc_number) docno,
  doc_date docdate,
  scheme_description schemedesc
FROM (
  SELECT scheme_description, doc_date, doc_number, SUM(amount) amount
    FROM credit_notes
    GROUP BY scheme_description, doc_date, doc_number) t
GROUP BY scheme_description, doc_date 
```

如果需要，添加 WHERE、ORDER BY 和其他子句。**

# r - 用数字替换字符

> ID：13721144
> 
> 赞同：0
> 
> 时间：2012-12-05T10:31:22.187
> 
> 标签：r

很抱歉打扰你。我有一个 data.frame 包含以下项目：

> F1008Y
> F1008Y
> 406_407insD
> R1207*

我想用“1”替换所有这些项目。如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:33:30.677

您可以使用`ifelse`

```
DF <- read.table(text="F1008Y
F1008Y
406_407insD
R1207*
0
0", header=FALSE) # adding some 0

DF # this is your data.frame
           V1
1      F1008Y
2      F1008Y
3 406_407insD
4      R1207*
5           0
6           0

ifelse({df <- DF; df!=0}, df[,] <- 1, df[,] <- 0) # replacing
     V1
[1,]  1
[2,]  1
[3,]  1
[4,]  1
[5,]  0
[6,]  0

 # the original data.frame remains the same
 DF
           V1
1      F1008Y
2      F1008Y
3 406_407insD
4      R1207*
5           0
6           0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:37:55.620

这是一个利用以下事实的示例：当您`as.numeric`在将数字和字符串混合在一起的向量上使用时，字符串会转换为`NA`. 我添加了一个额外的专栏只是为了好玩。

```
DF <- read.table(text="F1008Y
F1008Y
406_407insD
R1207*
0
0", header=FALSE)
DF$V2 <- DF$V1
DF.bak <- DF ## Backups are always nice
DF
#            V1          V2
# 1      F1008Y      F1008Y
# 2      F1008Y      F1008Y
# 3 406_407insD 406_407insD
# 4      R1207*      R1207*
# 5           0           0
# 6           0           0
## By default, the columns have been read in as factors. Convert to character
DF[sapply(DF, is.factor)] = lapply(DF[sapply(DF, is.factor)], as.character)
DF[is.na(sapply(DF, as.numeric))] <- 1
# Warning messages:
# 1: In lapply(X = X, FUN = FUN, ...) : NAs introduced by coercion
# 2: In lapply(X = X, FUN = FUN, ...) : NAs introduced by coercion
DF
#   V1 V2
# 1  1  1
# 2  1  1
# 3  1  1
# 4  1  1
# 5  0  0
# 6  0  0 
```

# c# - 将参数添加到 MVC 中的查询字符串

> ID：13721145
> 
> 赞同：0
> 
> 时间：2012-12-05T10:31:24.887
> 
> 标签：c#, asp.net-mvc

如何将参数添加到 MVC 中的链接？当我在下面的代码中使用这个（在控制器中）

```
Model model = GetModel();
string lang = "pl";
string viewName = "MyPage";
return View(viewName + "?lang=" + lang, model); 
```

我收到错误视图“ *MyPage?lang=pl* ”或其主视图未找到，或者没有视图引擎支持搜索的位置。搜索了以下位置：...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:35:32.913

当您重新调整`View`结果时，ASP.NET MVC 只会为您呈现此视图。它没有任何网址。用户在浏览器中输入 URL 以调用您的 MVC 操作。如果您想更改网址，您应该使用用户`RedirectToAction`结果。例如：

```
return RedirectToAction("MyPage", new {lang = "pl"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:51:18.787

使用 ViewData 或高级 ViweModel 类将数据传递给视图。

```
Model model = GetModel();
ViewData["lang"] = "pl";
return View("MyPage", model); 
```

当然，如果您在视图中引用查询字符串（这很糟糕），请修复它以引用 ViewData。

# c# - 在 foreach 循环中更新多个 XElement

> ID：13721146
> 
> 赞同：0
> 
> 时间：2012-12-05T10:31:25.877
> 
> 标签：c#, xml, linq, linq-to-xml

我有一个如下所示的 XML 文件：

```
<Contacts>
    <Person name="James" id"=1" />
    <Person name="Edward" id"=2" />
</Contacts> 
```

我想做点什么，所以如果 ID=2，再创建 10 个 Persons 并更新他们的 ID 和姓名，这样：

```
if (person.ID == 2)
{
    foreach (var item in duplicatePersons)
    {
        pers.SetAttributeValue("id", item.Key);
        pers.SetAttributeValue("name", item.Value);
        allPersons.Add(pers);
    }
} 
```

duplicatePersons 是一个包含所有重复人员的字典。

问题是，这个 foreach 循环的第一次迭代正在创建：

```
<Person name="Josh" id"=3" /> 
```

在第二次迭代之后，它应该如下所示：

```
<Person name="Josh" id"=3" />
<Person name="Jacob" id"=4" /> 
```

但它看起来像：

```
<Person name="Jacob" id"=4" />
<Person name="Jacob" id"=4" /> 
```

所以第二次迭代更新了第一个和第二个元素。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:35:38.813

您将所有属性设置为同一个对象实例`pers`。您应该在循环中创建一个新的 Person 对象

```
foreach (var item in duplicatePersons)
{
    Person pers = new Person();
    pers.SetAttributeValue("id", item.Key);
    pers.SetAttributeValue("name", item.Value);
    allPersons.Add(pers);
} 
```

# jquery - 即时在 jQuery UI DatePicker 上设置最大/最小日期

> ID：13721161
> 
> 赞同：0
> 
> 时间：2012-12-05T10:32:10.253
> 
> 标签：jquery, jquery-ui, datepicker

我有两个一直显示在屏幕上的 jQuery 日历。我希望`maxDate`第一个日历的日期是第二个日历的日期，第二个日历的日期是第一个日历的`minDate`日期。

我目前看不到修改`minDate`和`maxDate`动态的方法（即通过`onSelect`属性）。怎样才能达到我想要的效果？

伪代码：

```
$("#date1").datepicker({
    onSelect: function(selectedDate) {
        //Set minDate property on #date2 to selectedDate
    }
});

$("#date2").datepicker({
    onSelect: function(selectedDate) {
        //Set maxDate property  on #date1 to selectedDate
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:34:27.840

如[文档](http://api.jqueryui.com/datepicker/#option-minDate)中所述，您需要：

```
// setter
$( ".selector" ).datepicker( "option", "minDate", new Date(2007, 1 - 1, 1) ); 
```

所以

```
$("#date2").datepicker({
    onSelect: function(selectedDate) {
         $( "#date1" ).datepicker( "option", "maxDate", selectedDate);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:34:54.557

您可以像这样以编程方式设置`minDate`和：`maxDate`

```
$("#date2").datepicker({
    onSelect: function(selectedDate) {
        $("#date1").datepicker("option", "maxDate", new Date(selectedDate));
    }
}); 
```

这是 min/maxDate 的[**文档**](http://api.jqueryui.com/datepicker/#option-maxDate)。

# java - 无法遍历完整的 HashSet

> ID：13721162
> 
> 赞同：0
> 
> 时间：2012-12-05T10:32:10.587
> 
> 标签：java

```
public class VenueManagement extends JApplet
{

    HashSet<Venue> vset;

    public void addValues()
    {
        vset = new HashSet<Venue>();
        Venue outstage = new VenueOut("Outdoor Stage");
        Venue libstage = new VenueOut("Library Stage");
        Venue audi = new VenueMB("Audi", true);
        Venue lt1 = new VenueMB("LT1", true);

        Event e1 = new Event("Drama", 11);
        Event e2 = new Event("Dance", 21);
        Event e3 = new Event("Music", 31);
        Event e4 = new Event("Art", 41);
        Event e5 = new Event("Literary", 51);
        Event e6 = new Event("Informals", 61);
        Event e7 = new Event("Sport", 71);
        Event e8 = new Event("Tech", 81);

        outstage.addEvent(1, e1);
        outstage.addEvent(2, e2);
        libstage.addEvent(3, e3);
        libstage.addEvent(4, e4);
        audi.addEvent(5, e5);
        audi.addEvent(6, e6);
        lt1.addEvent(7, e7);
        lt1.addEvent(8, e8);

        vset.add(outstage);
        vset.add(libstage);
        vset.add(audi);
        vset.add(lt1);

        Iterator<Venue> vset_iter = vset.iterator();
        while (vset_iter.hasNext())
        {
            System.out.println(vset_iter.next().vname + " AND " + vset_iter.next());
            System.out.println("***********************************************");
        }
    }

    // ///////////////////////////////////////////////////INIT////////////
    public void init()
    {
        this.setLayout(new BorderLayout());
        addValues();
        this.add(menubar, BorderLayout.NORTH);
    }

} 
```

这是我正在尝试制作的更大小程序的一部分。我遇到了问题，所以我将其确定为程序的这一部分。从理论上讲，我应该从第 40 行和第 41 行获取所有`vname`和相应`Venue`对象的列表，但我似乎只得到这个：

```
LT1 AND labexam.VenueMB@3559b0a6
***********************************************
Library Stage AND labexam.VenueOut@12fbbad2
*********************************************** 
```

由于某种原因，我没有得到其他两个对象及其名称。

这是一个非常简单的代码，我只是创建了一个 Iterator for `vset`，然后使用 while 循环对其进行迭代。

有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:34:54.953

`Iterator#next`返回迭代中的下一个元素

```
Iterator<Venue> vset_iter = vset.iterator();
while (vset_iter.hasNext()){
      Venue v= vset_iter.next();
      // you can retrieve the venue object's field here
      //System.out.println(v.vname + " AND " + v);
      //System.out.println("***********************************************");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:39:40.773

避免在循环中调用 next() 两次，您正在跳过 Venues

```
Iterator<Venue> vset_iter = vset.iterator();
Venue venue;
    while (vset_iter.hasNext())
    {
        venue = vset_iter.next();
        System.out.println(venue.vname + " AND " + venue.otherString);
        System.out.println("***********************************************");
    } 
```

# c# - 如何知道哪个服务触发了这个 __InstanceModificationEvent 事件？

> ID：13721166
> 
> 赞同：0
> 
> 时间：2012-12-05T10:32:17.133
> 
> 标签：c#, events, service, wmi, wmi-query

我有简单的代码来跟踪服务状态。但在我的代码中，我只能知道服务启动或停止。我想知道哪个服务启动或停止。

这是我的代码示例。这是主要功能：

```
public void TrackService()
        {
            string queryRunning = "SELECT * FROM __InstanceModificationEvent WITHIN 1 WHERE TargetInstance ISA \"Win32_Service\" AND TargetInstance.State=\"Running\"";
            ManagementEventWatcher watcher = null;
            watcher = new ManagementEventWatcher(queryRunning);
            watcher.EventArrived += new EventArrivedEventHandler(ServiceStart);
            watcher.Start();
        } 
```

这是事件函数。

```
private void ServiceStart(object sender, EventArrivedEventArgs e)
    {
        string msg = "Services has started.";
        Console.WriteLine(msg);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:10:19.763

我在[这里](http://msdn.microsoft.com/en-us/library/ms257355%28v=vs.80%29.aspx) 搜索时找到了它。

```
private void ServiceStart(object sender, EventArrivedEventArgs e)
        {
            string msg = ((ManagementBaseObject)e.NewEvent["TargetInstance"])["DisplayName"];
        } 
```

这就是我要的。`(ManagementBaseObject)e.NewEvent["TargetInstance"])`.

# build - 最好将重建用于具有许多项目的解决方案或清理 + 构建

> ID：13721168
> 
> 赞同：2
> 
> 时间：2012-12-05T10:32:23.227
> 
> 标签：build, msbuild

现在我知道有很多问题询问有什么区别，我知道它们指的是不同的 MSBuild 目标。

但我想知道哪个更适合具有多个项目的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:34:54.740

重建清理和构建一个一个项目，而 clean + build 将清理整个解决方案，然后一口气构建它。

我会为多个项目解决方案使用 Clean + build

# objective-c - 如何在每个月的特定日期触发通知？

> ID：13721169
> 
> 赞同：0
> 
> 时间：2012-12-05T10:32:27.540
> 
> 标签：objective-c, nsdate

如何获得每个月的第 5 个日期。到目前为止，我知道如何获取当前日期。我只想在每个月的 5 日发出本地通知。

这是我的代码：

```
 UILocalNotification *localNotification = [[[UILocalNotification alloc] init] autorelease];
 if (!localNotification){
         return; 
 }
 NSDate *date = [NSDate date];   
 NSDate *dateToFire = ?;  // please give me logic to find out 5th of evry month

 [localNotification setFireDate:dateToFire];
 [localNotification setTimeZone:[NSTimeZone defaultTimeZone]];

 NSArray *array = [NSArray arrayWithObjects:@"Value 1", @"Value 2", nil];
 NSDictionary *data = [NSDictionary dictionaryWithObject:array forKey:@"payload"];
 [localNotification setUserInfo:data];

 [localNotification setAlertBody:@"Incoming Local Notification" ];
 [localNotification setAlertAction:@"Open App"];
 [localNotification setHasAction:YES];      

 [[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:46:19.940

如果我理解你的问题，那么你可以这样做：

```
NSDateComponents *dateComponents = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:[NSDate date]];
NSInteger day = [dateComponents day];
if(day==5){
     //your logic starts or make some flag here.
} 
```

# c - C Valgrind - memcpy中的源和目标重叠

> ID：13721170
> 
> 赞同：6
> 
> 时间：2012-12-05T10:32:27.683
> 
> 标签：c, valgrind, memcpy

我是 c 编程新手，我正在编写一个简单的客户端服务器应用程序。我收到这条消息：

```
 Source and destination overlap in memcpy(0x41f0beb, 0x41f0258, 69141077)
    ==9522==    at 0x402D9A9: memcpy (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
    ==9522==    by 0x8049C13: message_to_buffer (message.c:92) 
```

下面是具体代码：

```
case CT_ENTRY://100
{
    int c=(2+2+4+strlen(msg->content.entry->key)-1+4+4+strlen(msg->content.entry->value->data));
    char *offset=malloc(c);
    *msg_buf=offset;
    memcpy(offset,&opcode,2);
    offset+=2;
    memcpy(offset,&ctype,2 );
    offset+=2;
    int ks=strlen(msg->content.entry->key);
    int ksc=host_to_net(ks);
    memcpy(offset,&ksc,4);
    offset+=4;
    memcpy(offset, msg->content.entry->key, ks);
    offset+=ks;
    int l=host_to_net(get_time());
    memcpy(offset,&l,4);
    offset+=4;
    int ds=host_to_net(msg->content.entry->value->datasize);
    memcpy(offset,&ds,4);
    offset+=4;

    // this line here!
    memcpy(offset,msg->content.entry->value->data, msg->content.value->datasize);

    return c;
    break; 
```

违规行是

```
memcpy(offset,msg->content.entry->value->data, msg->content.value->datasize); 
```

谁能解释为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:34:18.627

如果源和目标内存块重叠，您必须使用`memmove`而不是。`memcpy`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T10:39:59.997

您`memcpy()`要复制 69141077 字节的数据。这看起来比您实际分配的大小要大得多`offset`（除非这些字符串真的**很大**）。

所以，这是一个缓冲区溢出。`msg->content.value->datasize`在分配`offset`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:41:49.697

手册页`memcpy()`说：

> memcpy() 函数将 n 个字节从内存区域 s2 复制到内存区域 s1。如果 s1 和 s2 重叠，则行为未定义。s1 和 s2 可能重叠的应用程序应该使用 memmove(3) 代替。

# flash - Actionscript 3 转义字符范围

> ID：13721175
> 
> 赞同：2
> 
> 时间：2012-12-05T10:32:46.763
> 
> 标签：flash, actionscript, escaping, urlencode

我在 Flash Builder 4.6 (Flex SDK 4.6.0) 中开发移动应用程序作为 Flex 移动项目。

我注意到这一点，当 unescape 方法将一些编码字符替换为空白时。

```
trace(unescape("%8A %9F")); // traces NOTHING 
```

据我测试，%80 - %9F 内的所有字符都被替换为空。其余角色似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:39:33.343

参考此图表后：[http ://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

似乎这些字符不是标准集，flash 并不直接支持所有这些字符。

但是试试这个，看看你是否得到了你想要的东西：

[http://snipplr.com/view/46566/as3-encode-and-decode-html-entity-names-full-set/](http://snipplr.com/view/46566/as3-encode-and-decode-html-entity-names-full-set/)

# android - 我可以在 EditText 中的特定 Span 上禁用拼写检查吗

> ID：13721177
> 
> 赞同：4
> 
> 时间：2012-12-05T10:32:50.953
> 
> 标签：android

我正在扩展 EditText 并以编程方式将特殊单词添加到列表中的文本中。我正在添加文本和 Span（BackgroundColorSpan、ClickableSpan 等）以将它们显示为不同并使其可点击。

有什么方法可以在我的 EditText/Editable 中禁用特定单词或 Span 的拼写检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:54:24.480

要禁用拼写检查，您必须在 XML 文件中指定 EditText 的 InputType，如下所示：

```
 android:inputType="textNoSuggestions" 
```

# django - django，应用多个查询过滤器时的顺序很重要吗？

> ID：13721178
> 
> 赞同：5
> 
> 时间：2012-12-05T10:32:51.423
> 
> 标签：django, filter

当您在 django 中查询时，这`order`有关系吗？`filter`

MyModel.objects.filter(exp1).filter(exp2)

对比

MyModel.objects.filter(exp2).filter(exp1)

他们是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:51:30.987

如果你只是做两个简单的`filter`操作，那么你是正确的，顺序无关紧要，但要小心。有一些示例说明查询集方法的顺序何时很重要：

*   [https://docs.djangoproject.com/en/dev/topics/db/aggregation/#order-of-annotate-and-filter-clauses](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#order-of-annotate-and-filter-clauses)
*   [https://docs.djangoproject.com/en/dev/ref/models/querysets/#distinct](https://docs.djangoproject.com/en/dev/ref/models/querysets/#distinct)

与其认为`filter`本质上是可交换的，不如将每个查询集方法认为是通常迭代它们之前的任何方法可能更安全。多个过滤器并不总是简单的 SQL AND。以此为例（尽管在这种情况下它仍然是可交换的）[。](https://docs.djangoproject.com/en/dev/topics/db/queries/#spanning-multi-valued-relationships)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:40:05.070

filter(exp1).filter(exp2) 根据 exp1 过滤，然后子过滤 exp2 （进一步限制结果查询集，结果也是 exp2 中的结果）

所以实际上你的答案是肯定的，它们是一样的，因为这就像一个普通的 AND 查询

# javascript - 如何获取使用“this”关键字传递的 jQuery html 对象的属性

> ID：13721179
> 
> 赞同：0
> 
> 时间：2012-12-05T10:32:52.097
> 
> 标签：javascript, jquery, function, this, attr

JQuery/JS 新手在这里 - 但到目前为止享受学习体验。

我的场景：

我有多个按钮，如下所示：

```
<button id="thumb-1" class="thumbs">click 1</button>
<button id="thumb-2" class="thumbs">click 2</button>
<button id="thumb-3" class="thumbs">click 3</button> 
```

当用户单击一个时，我通过`this`关键字将其传递给自定义函数，如下所示：

```
$('.thumbs').click(function(){
    $.fn.myFunc(this);
} 
```

这会将 jQuery 对象发送到函数，即整个按钮 html。

```
<button id="thumb-x" class="thumbs">click x</button> 
```

现在我要做的是获取该按钮的 id 并将其存储在字符串变量中。使用以下内容当然不起作用，html 按钮元素没有 attr 方法。

```
$.fn.myFunc = function(button) { 
    var id = button.attr('id');
} 
```

有人有任何简单的想法吗？

谢谢！- 詹姆士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:34:06.873

如果你想使用[**`attr()`**](http://api.jquery.com/attr/)然后将按钮转换为 jquery 对象，或者如果你想从`javascript`对象中获取 id 然后使用`button.id`

```
$.fn.myFunc = function(button) { 

    var id = $(button).attr('id'); // with jquery object
    id = button.id; //with javascript object 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:34:08.357

在使用 jQuery 函数之前，您需要将其设为 jQuery 对象

```
$.fn.myFunc = function(button) { 
    var id = $(button).attr('id');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:47:24.730

如果您从 myFunc 发送“this”，则无需使用 jquery attr，我们可以直接访问，这样会更快更容易

```
$(".thumbs").click(function(){
$.fn.myFunc(this);
});
$.fn.myFunc = function(button) {
alert(button.id);
} 
```

请参考下面的小提琴

[http://jsfiddle.net/m2Ts5/18/](http://jsfiddle.net/m2Ts5/18/)

谢谢

# iphone - 在 iOS 6 中不显示启动画面

> ID：13721181
> 
> 赞同：4
> 
> 时间：2012-12-05T10:33:01.897
> 
> 标签：iphone, splash-screen

我最近更新了我的 Xcode，现在它使用的是 iOS6。前一天在 iOS5 中它工作正常，但现在在 iOS6 中，它没有显示启动画面。

我刚刚添加了一个名为`default.png`并尝试过的图像`Default.png`，但它现在不起作用。谁能指导我这里出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:59:05.437

如果您进入项目 -> 摘要，您也可以将图像拖到默认图像的位置。Xcode 将制作一个本地副本。如果完成复制，您可以删除旧的默认图像。

![（见下面的截图）](../Images/e84041c404575dcd221939d49a761868.png)

请注意，您要遵守闪屏标准。

1.  将图像命名为 Default.png、Default@2x.png 和 Default-568h@2x.png
2.  保持自己的大小
    *   320 x 480
    *   640 x 960
    *   640 x 1136

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:36:07.667

根据苹果[文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)：对于在 iPhone 5 和 iPod touch（第 5 代）上运行 iOS 6 的应用程序，创建一个测量`640 x 1136`像素的启动图像，名称为`Default-568h@2x.png`。

还请验证文件中的启动映像名称`info.plist`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:37:12.457

我在使用 Default.png / Default@2x.png 时遇到了一些问题。我花了一段时间才发现这一点。在您的项目中检查 Build Settings-Targets COMBINE_HIDPI_IMAGES 是否设置为 NO

# javascript - 使用 javascript 重新加载 CSS 样式表

> ID：13721183
> 
> 赞同：17
> 
> 时间：2012-12-05T10:33:10.423
> 
> 标签：javascript, jquery, html, css, dom

**我想通过 javascript 重新加载 html 页面中的所有 CSS 样式表，而不重新加载页面。**

我只在开发时才需要这个以反映 css 更改而无需一直刷新页面。

一种可能的解决方案是`?id=randomnumber`使用 javascript 为 css href 添加后缀，但我不想这样做。

我想以某种方式*重新加载样式表*，而不更改它的 url，并且浏览器将决定是否需要加载该 css 的新版本（如果服务器以 响应`304 - Not modified`）。

如何做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T10:37:27.737

在纯 Javascript 中：

```
var links = document.getElementsByTagName("link");

for (var x in links) {
    var link = links[x];

    if (link.getAttribute("type").indexOf("css") > -1) {
        link.href = link.href + "?id=" + new Date().getMilliseconds();
    }
} 
```

在 jQuery 中：

```
$("link").each(function() {
    if $(this).attr("type").indexOf("css") > -1) {
        $(this).attr("href", $(this).attr("href") + "?id=" + new Date().getMilliseconds());
    }
}); 
```

确保在加载 DOM 树后加载此函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-30T05:12:50.447

首先，向样式表链接标签添加一个 id（如果不存在），如下所示：

```
<link id="mainStyle" rel="stylesheet" href="style.css" /> 
```

接下来，在 Javascript（也使用 jQuery）中添加以下函数：

```
function freshStyle(stylesheet){
   $('#mainStyle').attr('href',stylesheet);
} 
```

最后，在您想要的事件上触发该功能：

```
$('#logo').click(function(event){
    event.preventDefault();
    var restyled = 'style.css'; 
    freshStyle(restyled);
}); 
```

通过更新链接样式表的值，即使它是相同的值，您也会强制客户端再次查看；当它这样做时，它会看到并（重新）加载最新的文件。

如果您遇到缓存问题，请尝试将随机（伪）版本号附加到您的文件名，如下所示：

```
var restyled = 'style.css?v='+Math.random(0,10000); 
```

希望这可以帮助。上面 Dillen 的示例也适用，但如果您只想针对一个或一组样式表进行微调，则可以使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-11T17:27:40.657

有*更好的*方法来完成：

> 我只在开发时才需要这个以反映 css 更改而无需一直刷新页面。

一种方法是使用[Grunt.js](http://gruntjs.com/)[监视](https://github.com/gruntjs/grunt-contrib-watch)文件更改，然后重新[加载](https://github.com/gruntjs/grunt-contrib-livereload)页面。

工作流程是这样的：

*   保存 css 文档
*   Grunt watch 看到了变化
*   live 重新加载页面上的 css

这可以与其他 Grunt 函数链接，例如 {sass|less|stylus} 预处理器编译，以创建如下工作流：

*   保存一个 Sass 文件
*   看变化
*   sass 被编译并缩小到 cdn 位置
*   新的 CSS 被加载到页面上

**其他前端自动化资源：**

来自 Google 员工的视频：[http ://www.youtube.com/watch?v=bntNYzCrzvE](http://www.youtube.com/watch?v=bntNYzCrzvE)

[http://sixrevisions.com/javascript/grunt-tutorial-01/](http://sixrevisions.com/javascript/grunt-tutorial-01/)

[http://aboutcode.net/vogue/](http://aboutcode.net/vogue/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T17:54:32.730

在 GoogleChrome 浏览器中非常简单。

按 F12，单击右下角的齿轮并选择选项禁用缓存（在 DevTools 处于打开状态时）。

![在此处输入图像描述](../Images/8b4ea0e97156f8f2c3ad18d8ac8ac6e4.png)

![在此处输入图像描述](../Images/a8271b0631c6f2381451f92f42cda0f2.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-03T12:27:15.523

Grunt 的另一种选择是使用[Prepros](https://prepros.io/)。

它还在您的项目文件夹上使用文件观察器，但适用于您的所有文件。（js，css，php）并在每次更改时重新加载页面。（+ 如果这是像*css*这样的小视觉变化，它不会刷新页面，它会平滑过渡。（适用于颜色、定位等））

像 Grunt 一样，它编译和缩小你的文件，并允许你在指定的 url（不仅仅是 localhost）上进行实时预览。*（还有很多功能）*

使用特殊端口，它甚至可以**同步**诸如 clic、鼠标滚轮、输入等事件。

# javascript - 从 node.js 获取数据到 HTML 页面

> ID：13721184
> 
> 赞同：0
> 
> 时间：2012-12-05T10:33:11.427
> 
> 标签：javascript, jquery, node.js, iis

我是 node.js 的新手。说 node.js 正在运行

> localhost:9090//nodejs/server/messages/1

在那个 url.Application 中运行

> 本地主机：8080/

我想访问节点，js 会产生一个 HTML 页面。

```
function get_message() {
  $.getJSON('/nodejs/server/messages/1', function (result) {
    var df = result;
    document.getElementById('txtCompanyId').value = result[0]['CompanyID'];
    document.getElementById('txtCompanyName').value = result[2]['CompanyName'];
  });
} 
```

我使用的这个函数会导致跨域异常。我使用 Apache 中的代理设置解决了它。如何在 IIS 中配置此设置？或者如何在 IIS 服务器上运行时在 Javascript 中调用该 node.js url？

那么如何在 IIS 中托管 node.js 呢？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:24:13.657

[我认为您可以使用来自https://github.com/Flotype/now](https://github.com/Flotype/now)、[http://nowjs.com](http://nowjs.com)或[http://socket.io](http://socket.io)的 NowJS 库。您可以尝试的另一件事是消息传递概念。

# java - Java File.canWrite() 返回 true 并调用所有 close() 方法后，文件仍锁定在 Windows 中

> ID：13721187
> 
> 赞同：2
> 
> 时间：2012-12-05T10:33:23.363
> 
> 标签：java, windows, file-io, jvm, file-locking

我正在使用 a`WatchService`来检查是否将文件添加到目录中。然后，侦听器以包装在自定义类中的 ByteBuffer 的形式从文件中获取输入流（见下文）。

问题是，尽管调用`close()`了每个相关对象（以及更多对象），并检查文件是否未锁定`File.canWrite()`（返回 true），但当我尝试移动文件时，Windows 仍然抱怨文件被 JVM 锁定.

我已经搜索了任何可能锁定文件的代码，但是由于`canWrite()`返回 true，我不确定我还能做什么。有没有人有任何想法？

自定义类的骨架如下。我意识到这可能不是最好的实现，但我也不知道它是否会导致问题。

```
private static class ByteBufferBackedInputStream extends InputStream {

    private final ByteBuffer  buf;
    private final FileChannel channel;

    public ByteBufferBackedInputStream(FileInputStream fs) throws IOException {

        this.channel = fs.getChannel();
        this.buf = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());

        fs.close();
    }

    //... all required methods implemented, including close() method

} 
```

任何帮助将非常感激。

**编辑**从第一条评论开始，我正在使用`buf.close()`，这没有帮助。我还逐步完成了整个过程，并且没有抛出异常 - 只是为了确保我使用的是`finally`块。

我有一种感觉，这可能是为了实现我的实现，`WatchService`但它没有明确使用任何 IO 方法，只是一个生产者和消费者`LinkedBlockingQueue`。

**编辑 2**正如 Andreas 在下面的评论中建议的那样，使用标准的 read()/write() 操作有效并且文件没有被锁定。最终，缓冲区的使用是遗留代码（可能是为了在处理潜在的大文件时进行优化），因此现在可以安全地更改。

尽管如此，这个问题在技术上仍然没有得到解答，所以我暂时将其保留。谢谢您的帮助 ：）

# html - 如何显示所有在 CSS 文件中没有定义的类？

> ID：13721190
> 
> 赞同：0
> 
> 时间：2012-12-05T10:33:32.013
> 
> 标签：html, css

是否有工具可以显示/突出显示定义了某些类的所有元素，但在 css 文件中定义的此类没有 css 规则？

例如，我有 html 代码，如：

```
...
<div class="class_one">Some text for class one</div>
<div class="class_two">Some text for class two obviously</div>
... 
```

在 .css 文件中，我们有：

```
...
.class_one {
    color: red;
}
.class_three {
    color: magenta;
}
... 
```

在这种情况下，如果需要知道 css 中没有定义的所有类，我应该得到“class_two 没有类定义”。另外我应该指出这个工具（或其他工具）不应该在线，因为我使用本地 LAMP 包（在我的例子中是 MAMP Pro）做我的项目。

我希望我的英语不是那么差:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:37:47.437

我遇到的唯一 OOTB 解决方案是这个：[http ://unused-css.com/](http://unused-css.com/)

虽然它有局限性，但显然该网站必须在线。但是主要思想在该站点的示意图中清楚地描述了。你需要：

1.  在 HTML/JavaScript 中收集所有使用的类/ID
2.  收集 CSS 中所有定义的选择器
3.  交叉两个列表，看看还剩下什么

尽管这似乎是一项简单的任务，但有时每个页面都有不同的 CSS，或者 CSS 是动态呈现的，等等。

编辑：

要收集所有 id 和类，我会在文件上运行这些正则表达式：

```
<(.*)class="(.*)"(.*)>
<(.*)id="(.*)"(.*)> 
```

（在[http://regexpal.com/](http://regexpal.com/)上测试过）

使用记事本++（或任何其他在搜索模式时可以派上用场的东西），我会收集我的 HTML 中存在的全部项目集（也可能为 javascript 修改它）。然后我会将匹配的 CSS 类收集到一个正则表达式中，并将其与我的 CSS 进行匹配以查看缺少的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:12:31.427

您可以使用 jquery 插件，例如-

[http://csslint.net/about.html](http://csslint.net/about.html)

或者您也可以输入您的 css 并发现错误和警告。-

[http://csslint.net/index.html](http://csslint.net/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:37:32.293

> 如何显示所有在 CSS 文件中没有定义的类？

这很简单：解析所有 html 元素，并用`class`属性的所有条目填充一个列表。在此之后，解析 CSS 并填充第二个列表。从第一个列表中删除 CSS 列表的所有条目，您的类没有 CSS 声明。

请注意，如果您在 JavaScript 中使用动态创建的类名，这会变得更加复杂。

> 是否有工具可以显示/突出显示定义了某些类的所有元素，但在 css 文件中定义的此类没有 css 规则？

还没听说有什么工具。

# sql - sql查询用特定单词分割一行

> ID：13721192
> 
> 赞同：2
> 
> 时间：2012-12-05T10:33:33.157
> 
> 标签：sql, sql-server-2008

我的结果是

```
code     Declaration      Quantity
123      a1                11boxes Note:(Each box Contains 20nos)
123      a2                230nos Note:(Each contains 100nos)
123      a3                60nos 
```

我需要显示为

```
code     Declaration      Quantity
123      a1                11boxes 
123      a2                230nos 
123      a3                60nos 
```

是否可以拆分行并在注释前显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:42:55.620

您可以使用`CHARINDEX()`sql server-2008 的功能并获取长度并使用 0 到 length - 1 来剪切字符使用`SUBSTR()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:44:50.823

或者如果您认为某些数量可能没有`Note:`尝试；

```
select code, declaration, 
       SUBSTRING(Quantity,0,
             CASE WHEN charindex('Note:',Quantity,0)> 0 
                  THEN charindex('Note:',Quantity,0) 
             ELSE LEN(Quantity)+1 END) AS Quantity
From YourTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:43:56.050

您可以在`quantity`字段中搜索单词`note`以返回结果，但此答案假定任何注释都不会以不同的单词开头。

如果要检查`note`，则可以使用[`charindex()`](http://msdn.microsoft.com/en-us/library/ms186323.aspx)，类似于：

```
select code, 
  declaration, 
  case 
    when charindex('Note', quantity) > 0
    then rtrim(left(quantity, charindex('Note', quantity)-1))
    else quantity end as Quantity
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/bdafa/10)。

结果是：

```
| CODE | DECLARATION | QUANTITY |
---------------------------------
|  123 |          a1 |  11boxes |
|  123 |          a2 |   230nos |
|  123 |          a3 |    60nos | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:09:17.623

```
select code,declaration, case  when patindex('% %',ltrim(quantity))>0 
             then substring(ltrim(descr),0,patindex('% %',ltrim(quantity)))
             else quantity end 
      as quantity
from table_name 
```

从`quantity`列值中提取子字符串，直到第一次出现空格字符。`'% %'`

`LTRIM`删除任意数量的前导空格，否则上述查询将导致错误结果。

[`PATINDEX()`](http://msdn.microsoft.com/en-us/library/ms188395.aspx) : 返回指定表达式中第一次出现模式的起始位置，这里的模式是空格字符。

即使列 value 中不存在**"Note:"字符串，这也将起作用。**

# android - Android：GridView - OutOfMemoryError

> ID：13721195
> 
> 赞同：0
> 
> 时间：2012-12-05T10:33:42.787
> 
> 标签：android, out-of-memory, android-gridview

我必须在 Gridview 中显示大约 40 个位图。每张图像约为 500k，总大小约为 15MB。我在适配器的 getView() 中遇到 OutOfMemoryError。（我正在重用convertView）。

我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:53:02.253

您的设备不支持在内存中维护 40 位图。您应该实现它仅加载可见图像。

如果你不知道怎么做，你可以使用[Android Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。该库将避免 outOfMemoryError 并简化加载图像任务。

# http-post - 有限的请求后大小

> ID：13721206
> 
> 赞同：1
> 
> 时间：2012-12-05T10:34:20.213
> 
> 标签：http-post

我们有一个很大的输入表单，其中包含多个 jquery 生成的选项卡、批次和隐藏字段。只要从浏览器到服务器的整个post-request小于32xxxx符号，一切顺利，所有字段都传输到服务器。

我们的表格结构：

*   信息（生成的jQuery）
*   选项卡内的隐藏字段和输入字段（生成的 jquery）
*   表格底部的隐藏字段牢固地写入程序中

所以现在tabs、jquery-hidden fields和jquery-input fields都写在post-reqeust中了，但是只有当整个requests的长度大于sign 32xxxx时才偶尔传输hidden fields。这是相当惊人的。因此，在请求后流中传输到服务器后，某些字段会丢失。

从服务器，表单被填写并显示在 joomla 的后端，这没问题。然后我更改选项卡（div 名称）或内容（ul - li ... 输入类型 ...）上的某些内容并将整个发送回服务器。现在不再完整获取所有内容。当您在再次发送之前检查 DOM 中的内容时，所有表单字段都已正确填写，并且没有任何内容被截断，因此 jquery 可以完美运行。

在输入类型的字段中，整部小说都是很长的文本。其中通常会完全传输回服务器。但它可能会切断浏览器的其他一些输入类型。如果 request-size 大于 32xxxx 符号，这些然后会偶尔传输到服务器。

您总是听说输入字段值的限制。但是不要假设它就像输入字段没有提交一样。

joomla 管理表格：

```
form action = "...我们的操作..." method = "post" name = "admin form" id = "profile-form" class = "form-validate"

```

会是什么？我们如何通过单击提交按钮来实现整个表单的所有字段无论如何都会传输？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T21:38:15.453

1.  将确保我的服务器不会拒绝请求的大小或修剪它
2.  将确保我的 php 设置正确 post_max_size 20M （值显然是一个例子）
3.  如果问题仍然存在，我将分割请求并传输更小的段（实际上很简单）。但我很确定检查服务器和 php 设置将解决问题；）

# mysql - 您不能在 FROM 子句中指定目标表 XXX 进行更新（在子句中使用 SUM）

> ID：13721208
> 
> 赞同：0
> 
> 时间：2012-12-05T10:34:28.940
> 
> 标签：mysql, sql, sql-update, self-join, mysql-error-1093

我正在尝试执行此查询：

```
 UPDATE  
            arc_salon_credit_exposant AS asce
        SET  
            asce.asce_credit_restant = 
                (
                    SELECT 
                        SUM(asce_credit_restant) 
                    FROM
                        arc_salon_credit_exposant
                    WHERE
                        asce_scre_id = '524' AND
                        asce_sexp_id = '719' AND
                        (asce_fam_id is NULL OR
                            asce_fam_id = '168')
                )
        WHERE  
            asce.asce_scre_id = '524' AND
            asce.asce_sexp_id = '719' AND
            asce.asce_fam_id is NULL 
```

但是，我得到的只是一个 mysql 错误（#1093 - You can't specify target table 'asce' for update in FROM 子句）。我在 stackoverflow 上阅读了一些问题（这就是我尝试使用别名的原因），但我无法让它工作。我知道我必须编写查询，以便 Mysql 将创建一个临时表，但是.. 我无法完成这项工作。有点卡在这里。

这是表的结构：

```
Column name Type    Null    Défaut
asce_id int(11) Non 
asce_scre_id    int(11) Non 
asce_sexp_id    int(11) Non 
asce_credit_restant double  Oui NULL
asce_fam_id int(11) Oui NULL 
```

这里有一些数据：

asce_id asce_scre_id asce_sexp_id asce_credit_restant asce_fam_id

35 524 7885 4900 无

17 524 719 200 空

45 524 719 100 168

44 524 7885 100 168

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:57:18.087

您需要使用这样[的](https://stackoverflow.com/a/806925/1369235) [连接更新您的表](http://dev.mysql.com/doc/refman/5.0/en/join.html)

```
UPDATE  arc_salon_credit_exposant AS asce
JOIN
(     SELECT 
         asce_credit_restant.IDColumn  --<<here your Unique column for self join
         SUM(asce_credit_restant) as tot
      FROM
         arc_salon_credit_exposant
      WHERE
         asce_scre_id = '524' AND
         asce_sexp_id = '719' AND
         asce_fam_id is NULL
) A
ON asce.IDColumn = A.IDColumn
SET asce.asce_credit_restant = A.tot
WHERE  
    asce.asce_scre_id = '524' AND
    asce.asce_sexp_id = '719' AND
    asce.asce_fam_id is NULL 
```

### [请参阅此示例演示](http://sqlfiddle.com/#!2/675b5)

# html - 如何在单独的网站上访问存储在我创建的 Rails 应用程序中的数据？

> ID：13721210
> 
> 赞同：1
> 
> 时间：2012-12-05T10:34:40.123
> 
> 标签：html, ruby-on-rails, ruby, ajax

我最近创建了一个 Rails 应用程序来处理我工作的公司的父评论。每条评论都由版主给出一个分数（1-10），我试图在一个 html 页面上创建一个窗口，只要它的分数至少为 7，它将在数据库中随机显示一条评论。rails 应用程序还具有能够查看评论数据库的用户授权要求。

我知道这是可能的，但我最近才学习 Ruby on Rails，而且对 html 世界也很陌生。如果这是完成这项工作所需要的，我非常愿意学习像 jquery 或 ajax 这样的东西。我只需要一些指导，这样我就可以开始显示评论了。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:00:04.283

也许您可以在 CommentsController 中执行如下操作：

```
def random_high_rated
  @comment = Comment.where(score: 7..10).sample
end 
```

您在 config/routes 中的路线如下所示：

```
resources :comments do
  collection do
    get '/random_high_rated'
  end
end 
```

您可以通过以下方式访问它：

```
yoursite.com/comments/random_high_rated 
```

在 app/views/comments/random_high_rated.html.erb 查看

在其中：

```
<%= @comment %> 
```

编辑：

通读本教程，您将能够立即编写自己的代码！

[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:49:45.913

选项 1：在您的 Rails 网站中创建一个独特的页面（我们称之为 1 号站点），将其显示在 2 号站点的 iframe 中

选项 2：在 1 号站点中创建一个 url，为您提供 JSON、XML 甚至只是一些 html，然后使用来自 2 号站点的 AJAX 调用将其拉入。

如果您以前从未使用过 AJAX，您可能会发现使用 jQuery 更容易使用。有关更多信息，请参阅[jQuery AJAX 方法](http://api.jquery.com/category/ajax/)。其他库可能更好，但这是我用过的。

对不起，如果答案有点笼统，但这是一个笼统的问题。

# c# - 列内的 UltraWinGrid 列

> ID：13721212
> 
> 赞同：1
> 
> 时间：2012-12-05T10:34:42.627
> 
> 标签：c#, infragistics

我正在使用一个`UltraWinGrid`并且希望在一个标题下有两列。我还应该注意，我是通过在运行时添加列来做到这一点的。

我在文档中找不到描述我想要实现的目标的任何地方。任何帮助，将不胜感激。

结果：

```
|            |     Header 1    |     Header 2    |
--------------------------------------------------
|Row 1       | Item 1 | Item 2 | Item 1 | Item 2 |
|Row 2       | Item 1 | Item 2 | Item 1 | Item 2 |
|Row 3       | Item 1 | Item 2 | Item 1 | Item 2 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:43:10.083

您可以使用组来完成此操作。您将要为第一列创建一个组，然后为每两列的组创建一个组。然后，您可以隐藏原始标题并仅显示组。

下面的代码是一个简单的例子：

```
void ultraGrid1_InitializeLayout(object sender, Infragistics.Win.UltraWinGrid.InitializeLayoutEventArgs e)
{
    UltraGridBand band = e.Layout.Bands[0];
    band.ColHeadersVisible = false;
    ColumnsCollection columns = band.Columns;

    UltraGridGroup group0 = band.Groups.Add("group0");
    group0.Header.Caption = "";
    UltraGridGroup group1 = band.Groups.Add("group1");
    group1.Header.Caption = "Header 1";
    UltraGridGroup group2 = band.Groups.Add("group2");
    group2.Header.Caption = "Header 2";

    columns[0].Group = group0;
    columns[1].Group = group1;
    columns[2].Group = group1;
    columns[3].Group = group2;
    columns[4].Group = group2;

} 
```

[Create a Multiple-Row Layout Using Levels](http://help.infragistics.com/NetAdvantage/WinForms/Current/CLR4.0/?page=WinGrid_Create_a_Multiple_Row_Layout_Use_Levels.html)帮助主题还有另一个示例。

# javascript - 即使文本没有隐藏，getText() 也会在 Selenium 中返回一个空白。我也试过 JavaScript

> ID：13721213
> 
> 赞同：4
> 
> 时间：2012-12-05T10:34:43.270
> 
> 标签：javascript, selenium, gettext

我正在尝试匹配文本并选中复选框。我正在尝试`innerHTML`从 type 的输入标签中获取文本或`checkbox`。

我试过了`getText()`；它返回空白`innerHTML`，`innerText`返回`null`。

我能够获取该值以及标签的所有其他相关属性，但不能获取文本。我尝试通过 Selenium 执行 JavaScript 代码来获取文本，但这也是返回`null`或空白。我怎样才能解决这个问题？

文本是可见的 - 不是隐藏的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T13:59:23.157

您可以尝试使用 getAttribute("textContent") 或 getAttribute("value")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T11:58:00.850

```
public Collection<String> getTextValuesFromSearch(WebElement searchContext) {

    final Collection<String> collectedText = new ArrayList<>();
    final Collection<WebElement> webElementsWithText = searchContext.findElements(By. css/xpath("yourElement"));

    for (final WebElement webElement : webElementsWithText) {

        collectedText.add(webElement.getText());
    }
    return collectedText;
} 
```

# ruby-on-rails - 带有 mongoid 的“事件日历”宝石

> ID：13721215
> 
> 赞同：2
> 
> 时间：2012-12-05T10:34:47.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我想在我的 rails 应用程序中使用“event_calendar”。我的应用程序配置为 mongoid 而不是 ActiveRecord。那么如何在我的 Rails 应用程序中使用这个 gem？[当我按照https://github.com/elevation/event_calendar](https://github.com/elevation/event_calendar)链接教程 使用 event_calendar 时，出现以下错误：

```
undefined local variable or method `has_event_calendar' for Event:Class 
```

请帮助我，如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:50:09.597

你为什么不试试[simple_calendar](https://github.com/excid3/simple_calendar)？
似乎比 event-calendar 更灵活...此外，event-calendar 的最后一次提交是 2 年前，这个 gem 已经过时了

# c# - 无法检索 Google 个人资料进行编辑

> ID：13721221
> 
> 赞同：1
> 
> 时间：2012-12-05T10:35:09.293
> 
> 标签：c#, google-apps

我正在尝试使用 C# .NET GData SDK 从 Profile API 检索 Google Profile 以进行编辑，但身份验证似乎失败了。我正在使用许多其他 Google API，并且可以很好地对它们进行身份验证，并且使用相同的代码方法：

```
var settings = new RequestSettings("appname", ApiUsername, ApiPassword);
var contactsRequest = new ContactsRequest(settings);
var uri = new Uri(string.Format("https://www.google.com/m8/feeds/profiles/domain/{0}/full/{1}", googleDomain, googleUsername));
var contact = contactsRequest.Retrieve<Contact>(uri); 
```

我得到以下异常：

> Google.GData.Client.GDataRequestException：请求执行失败： [https](https://www.google.com/m8/feeds/profiles/domain/xxx/full/joe.bloggs) ://www.google.com/m8/feeds/profiles/domain/xxx/full/joe.bloggs ---> System.Net.WebException：远程服务器返回错误：（401）未经授权。

根据 Google Enterprise 支持人员的建议，我使用了他们的 OAuth2 Playground 站点，使用的凭据与代码中的凭据相同，并且成功了。

我的猜测是，SDK 在接收用户名和密码时并未在 RequestSettings 对象中使用这些凭据，并且身份验证失败，即使这种相同的方法适用于他们的 Provisioning API。

我担心我需要使用 OAuth2，这对于我们正在尝试做的事情来说似乎不必要地复杂，并且没有谷歌文档来支持这一点。

有没有人有任何关于如何使用 Profiles API 进行身份验证的代码示例？

**编辑：**

所以是的，看来我必须使用 OAuth2 并且 Google SDK 已损坏，因为它不允许您仅使用用户名和密码进行身份验证。我一直在研究很多示例，并且正在使用另一个提供 OAuth2 支持的 Google SDK。

我已经通过 API 控制台为已安装的应用程序创建了一个客户端 ID，将此 ID 分配给范围的 API 访问权限，并使用以下代码：

```
var oAuth2Parameters = new OAuth2Parameters
{
    ClientId = "xxx",
    ClientSecret = "xxx",
    RedirectUri = "urn:ietf:wg:oauth:2.0:oob",
    Scope = "https://www.google.com/m8/feeds/"
};

// get an access token
OAuthUtil.GetAccessToken(oAuth2Parameters);

var settings = new RequestSettings("xxx", oAuth2Parameters);
var contactsRequest = new ContactsRequest(settings); 
```

这让我走得更远，但现在我得到以下异常：

> System.ArgumentNullException：值不能为空。参数名称：refresh_token

此代码作为后端服务的一部分运行。我不知道已安装应用程序的客户端 ID 类型对于身份验证交换的类型是否错误。我的第一个想法是使用 Service Account 客户端 ID 类型，但这产生了 OAuth2Parameters 对象无法使用的证书。

有什么有用的指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:17:32.463

我正在将它从 google-apps-script（基于云的 JavaScript）重新标记为 google-apps。

关于您的问题 - 是的，您需要使用 oAuth 2，但 oAuth 2 本身为您提供了一些选项。一旦你花几个小时来理解它——它就会真正得到回报，因为它在许多供应商中变得非常标准和司空见惯。

Google 提供了几个入门库（包括 .NET）让您从这里开始 - [https://developers.google.com/accounts/docs/OAuth2#libraries](https://developers.google.com/accounts/docs/OAuth2#libraries)

如果您遇到任何问题，请尝试其中一些并分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:00:18.057

经过大量试验，我从我需要的 Profile API 中得到了结果，而没有使用 OAuth2，这太让人头疼了（主要是因为 Google SDK 及其文档的质量很差，这个概念很简单） .

我使用了简单的用户名和密码身份验证方法，而不是使用 ContactsRequest.Retrieve(uri) 我使用：

```
var settings = new RequestSettings("xxx", ApiUsername, ApiPassword);
var cr = new ContactsRequest(settings);
var uri = new Uri(string.Format("https://www.google.com/m8/feeds/profiles/domain/{0}/full/{1}", googleDomain, googleUsername));
var query = new ContactsQuery(uri.AbsoluteUri);
var feed = cr.Get<Contact>(query); 
```

# c# - Linq 查询不知道如何实现

> ID：13721227
> 
> 赞同：0
> 
> 时间：2012-12-05T10:35:31.263
> 
> 标签：c#, sql, entity-framework

第一的，

```
var query = from c in context.PreferredFeedUserCompaniesFollwers
            group c by c.CompanyID into company
            where company.Count() > 10
            select new { company.Key }; 
```

第二，

```
context.Companies.Where(query.contains(x=>x.Id)).tolist(); 
```

通过使用第一个查询，它应该返回表 Preferredusers 中重复超过 10 次的所有 companyID，通过使用第二个查询，我应该使用从第一个查询中获得的 companyID 获取有关公司的所有详细信息。

两者都没有工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:00:35.940

第一的

```
var query = context.PreferredFeedUserCompaniesFollwers
    .Where(x => x.Count() > 10)
    .Select(x=> x.CompanyID)
    .Distinct(); 
```

第二

```
context.Companies.Where(query.contains(x => x.Id)).tolist(); 
```

我是在飞行中写的，所以希望它有效

编辑：这个怎么样？不确定是否需要不同的。

```
var query = context.PreferredFeedUserCompaniesFollwers
            .GroupBy(y => y.CompanyID)
            .Where(y => y.Count() > 10))
            .Select(x=> x.CompanyID)
            .Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:40:57.057

```
var query = (from c in context.PreferredFeedUserCompaniesFollwers
             group c by c.CompanyID into g
             where g.Count() > 10
             select c.CompanyID).Distinct(); 
```

如果 key 是 id 字段，上面的查询应该会产生一个`IQueryable<int>`，现在你的第二个查询应该也可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:14:33.263

我不知道。但是 middelpat 的答案对我来说是正确的。您在第一个查询中遇到无法解决错误。我刚刚添加了 company.CompanyID!=null 条件。你可以试试吗？

```
 var query = (from id in     context.PreferredFeedUserCompaniesFollwers.Where(c=>c.CompanyID!=null).Select(c=>c.CompanyID)
    group id by id into g
    where g.Count() > 10 select id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:48:50.550

第一的，

```
var query = context.PreferredFeedUserCompaniesFollwers
                   .GroupBy(c => c.CompanyId)
                   .Where(c => c.Count() > 10)
                   .Select(c => c.Key); 
```

第二：

```
var result = context.Companies
                    .Where(x => query.Contains(x.Id))
                    .ToList(); 
```

但只是从我的头顶。可能会有一点错误，但这应该可以解决问题。

# asp.net-mvc - mvc4如何定义组件库的布局区域/部分

> ID：13721229
> 
> 赞同：0
> 
> 时间：2012-12-05T10:35:31.840
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我将构建一个由组件库（部分视图）组合的应用程序，我的问题是我还没有找到一种方法来在布局的特定命名区域中分配这个组件。

我没有找到解决方案，也没有在谷歌或文章中找到示例代码。

布局是一个简单的 html5，部分/区域是具有自己 id 的 div。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:50:36.873

也许你可以用`Section`剃刀解决它。

在 _Layout 页面中，您可以设置部分：

```
<div id="ColumnSide">
    @RenderSection("MySectionName", false)
</div> 
```

在您的视图中，您可以为此部分设置内容

```
@section MySectionName {
   <text>
   Content Here..

   @Html.RenderPartial("MyPartialView", model)
   </text>
} 
```

在输出结果中，您将获得一个完整的 html，其中您在视图中设置了部分内容。

看看 ScotGu 博客中的这篇文章 [http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

# javascript - 在 iPad 方向更改上刷新网页

> ID：13721230
> 
> 赞同：1
> 
> 时间：2012-12-05T10:35:35.427
> 
> 标签：javascript, ios, orientation

当用户倾斜他的 iPad 时，我想自动刷新/重新加载网页。我做了很多研究，但无法找到解决方案。在浪费另一天寻找答案之前，有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T10:38:46.787

```
window.onorientationchange = function()
{
   window.location.reload();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-11T13:00:56.513

注意：这个问题是[重复](https://stackoverflow.com/questions/7919172/what-is-the-best-method-of-re-rendering-a-web-page-on-orientation-change/31357325#31357325)的，应该关闭。我将在这里发布我的答案的要点。

```
 window.addEventListener('orientationchange', function () {
    var originalBodyStyle = getComputedStyle(document.body).getPropertyValue('display');
    document.body.style.display='none';
    setTimeout(function () {
      document.body.style.display = originalBodyStyle;
    }, 10);
  });
```

代码监听[orientationchange事件](https://developer.mozilla.org/en-US/docs/Web/Events/orientationchange)`body`并通过隐藏它并在10毫秒后显示它来强制重新流动元素。它不依赖于任何`<meta>`标签或媒体查询。而且它不会重新加载整个页面。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T10:45:01.857

您可以像这样在方向更改时调用 UIWebview 的代表

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
     [_webview reload];
} 
```

您还需要在 .h 文件中包含 UIWebviewDelegate 并将委托分配给自己。

# c - 在 64 位系统上，如何将 int 作为 void * 传递

> ID：13721233
> 
> 赞同：3
> 
> 时间：2012-12-05T10:35:40.543
> 
> 标签：c, 64-bit, system, porting

有一个`process_create()`函数，它的参数为`void*`. 如果我想传入一个`int`，我该怎么做才能避免编译器的构建错误？我无法将参数列表更改为`process_create()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T12:16:25.400

为了安全起见，您可以将整数转换为`intptr_t`，保证与指针大小相同，然后返回。

```
#include <inttypes.h>

inline void *int_to_ptr(int n) {
    return (void *) (intptr_t) n;
}

inline int ptr_to_int(void *p) {
    return (int) (intptr_t) p;
} 
```

`int_to_ptr`调用时使用`process_create`，以及`ptr_to_int`转换回来时使用。

这在技术上仍然不是可移植的 ISO C，因为：

1.  虽然可以保证任意指针将在往返往返中存活下来，但即使从不对应于有效指针（例如 1）`intptr_t`的值创建指针也是未定义的行为。理论上，实现可能会阻塞`intptr_t`无效的指针，或者整数值可能无法在从`intptr_t`到指针和返回的往返中幸存下来。

2.  理论上，一些 C 实现可能有`int`比指针更宽的指针，在这种情况下，一些有效的整数值会溢出到`intptr_t`.

这两种情况在实践中都极不可能遇到。广泛部署和可移植软件中的 C 代码为此目的使用上述类型转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:40:37.033

您可以将`int`to 转换为`void*`，但这不是可移植的。例如，尽管不太可能，但可以想象`sizeof(int)>sizeof(void*)`. 所以，如果你想要便携，你应该传递一个指向`int`.

例如，您可以为`int`with分配存储空间`malloc`。

```
int *myparam = malloc(sizeof(*myparam));
*myparam = 42;
process_create(myparam); 
```

如果不知道更多关于什么`process_create`是什么和做什么，我不能说谁应该负责调用`free`该内存块。

我的假设是异步的，并且可以在调用返回`process_create`后的某个时间读取指针。`process_create`但是，如果将在执行期间读取指针，`process_create`则可以使其更简单。

```
int myparam = 42;
process_create(&myparam); 
```

所以，底线是我认为最好传递一个`int*`to `process_create`。具体如何实现取决于`process_create`.

# symfony - 如何拒绝访问 Symfony 2 中的所有页面

> ID：13721234
> 
> 赞同：1
> 
> 时间：2012-12-05T10:35:42.583
> 
> 标签：symfony

我需要拒绝具有角色 ROLE_UNFILLED_USER 的用户访问除一个页面之外的所有页面。如何使用 security.yml 中的 access_control 执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:00:14.840

第一步是定义角色层次结构，其中`ROLE_USER`继承自`ROLE_UNFILLED_USER`：

```
# app/config/security.yml

role_hierarchy:
    ROLE_USER:        ROLE_UNFILLED_USER   # <-- This is the crucial part
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_API_USER, ROLE_ADMIN] 
```

现在您可以放置​​访问控制：

```
access_control:
    - { path: "^/user/worksheet", roles: ROLE_UNFILLED_USER }
    - { path: "^/bill", roles: ROLE_USER }
    - { path: "^/address_book", roles: ROLE_USER }
    - { path: "^/friendinvite", roles: ROLE_USER }
    - { path: "^/admin", roles: ROLE_ADMIN }
    #- { path: "^/", roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

每当具有该角色的用户`ROLE_UNFILLED_USER`尝试访问其他路由时，`^/user/worksheet`他们应该会看到 403（禁止）。如果您添加其他路线，请确保正确排序；Symfony 将使用它找到的第一个匹配的路由，这意味着更具体的路由应该在列表顶部，更通用的路由在底部！

由于 `ROLE_USER`extends `ROLE_UNFILLED_USER`，具有该角色的用户可以访问所有页面（包括工作表）。

但是，您的方法有一个警告，当用户登录时，他们会自动重定向到指定的 target_path 或先前请求的路径。这意味着，如果您的用户登录，他们很可能会看到一个 403 页，并且会对他们为什么无权访问感到困惑。解决方案：创建一个自定义的[AuthenticationProvider](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)（特别看一下[Listener](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html#the-listener)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T12:52:23.197

如果用户具有特定角色，您需要使用登录侦听器并重定向用户。或者也许只是使用请求侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-18T13:22:04.293

你需要这样的东西：

```
access_control:
    - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_ADMIN } 
```

在您的 security.yaml 文件的安全部分。此设置允许您保护站点的所有页面，除了一个（登录表单匹配“/login”）

# java - 将 jsp 响应作为 servlet 中的字符串获取

> ID：13721238
> 
> 赞同：3
> 
> 时间：2012-12-05T10:35:58.080
> 
> 标签：java, jsp, servlets, java1.4

有没有办法从 jsp 文件中获取响应作为 servlet 中的字符串。就像是

```
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
     String section1 = getResponseFromJSP();
     // do something else ...
     sendMailToUser(section1);
} 
```

我正在使用 Servlet API 2.4 和 java 1.4

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T11:06:03.847

更好的解决方案可能是使用另一个模板引擎，例如 freemarker 或 velocity，它们独立于 servlet api，更适合基于文本的电子邮件。

但是，这可以通过包装`HttpServletResponse`和覆盖`getWriter`方法来实现。下面的代码适用于 glassfish。

小服务程序：

```
public class TestServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        HttpServletResponseWrapper responseWrapper = new HttpServletResponseWrapper(response) {
            private final StringWriter sw = new StringWriter();

            @Override
            public PrintWriter getWriter() throws IOException {
                return new PrintWriter(sw);
            }

            @Override
            public String toString() {
                return sw.toString();
            }
        };
        request.getRequestDispatcher("test.jsp").include(request, responseWrapper);
        String content = responseWrapper.toString();
        System.out.println("Output : " + content);
        response.getWriter().write(content);
    }
} 
```

JSP：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Hello world</title>
    </head>
    <body>
        <h1><%= "Hello world from a JSP!" %></h1>
    </body>
</html> 
```

# codeigniter - Codeigniter 图像上传无法在在线服务器上运行

> ID：13721240
> 
> 赞同：0
> 
> 时间：2012-12-05T10:36:00.793
> 
> 标签：codeigniter, webserver, image-uploading

我已经开发了一个 Codeignter 项目，在本地机器（Wamp 服务器）上运行非常顺利，但是在将它上传到我的服务器（namecheap）后，我面临上传图像的问题。

我检查了权限访问并为所有上传文件夹提供了 777，并且代码非常干净并且可以在本地 WAMP 上运行。

然后我还将它上传到另一台服务器（godaddy）上，上面写着：

```
A PHP Error was encountered

Severity: Warning

Message: escapeshellarg() has been disabled for security reasons

Filename: libraries/Upload.php 
```

试过这个：[escapeshellarg() 出于安全原因已被禁用，](https://stackoverflow.com/questions/10384336/escapeshellarg-has-been-disabled-for-security-reasons) 但运气不好，它停止显示错误但仍然没有上传。

其他人也遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T08:22:24.893

文件夹系统 > 库文件 Upload.php

```
$cmd = 'file --brief --mime ' . escapeshellarg($file['tmp_name']) . ' 2>&1'; 
```

删除此行

# python - 生成和发送 MS Outlook 任务

> ID：13721242
> 
> 赞同：1
> 
> 时间：2012-12-05T10:36:05.077
> 
> 标签：python, ios, linux, outlook, email-attachments

是否有可能创建（生成）一封电子邮件（没有任何 MS COM 对象等 - 例如在 *nix 平台上），这将被 MS Outlook 识别为任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:19:33.213

从 *nix 平台 - 您真正拥有的唯一选择是[使用 EWS 直接与 Exchange 通信，](http://msdn.microsoft.com/en-us/library/exchange/aa563029%28v=exchg.80%29.aspx)或者拥有一个将 EWS 行为包装起来的中间服务（*Exchange Server 2007+*）。如果您使用的是[旧版本的 Exchange，您可能需要考虑 WebDAV](https://stackoverflow.com/a/11562487/175679)。

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema"
               xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
               xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
  <soap:Header>
    <t:RequestServerVersion Version="Exchange2007_SP1"/>
    <t:TimeZoneContext>
      <t:TimeZoneDefinition Id="Eastern Standard Time"/>
    </t:TimeZoneContext>
  </soap:Header>
  <soap:Body>
    <CreateItem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <Items xmlns="http://schemas.microsoft.com/exchange/services/2006/messages">
          <Task xmlns="http://schemas.microsoft.com/exchange/services/2006/types">
            <Subject>This is a recurring task that was created by using the autogenerated EWS proxies.</Subject>
            <Body BodyType="Text">This task occurs every week.</Body>
            <Recurrence>
              <WeeklyRegeneration>
                <Interval>1</Interval>
              </WeeklyRegeneration>
              <NoEndRecurrence>
                <StartDate>2006-08-15</StartDate>
              </NoEndRecurrence>
            </Recurrence>
            <StartDate>2006-08-15T14:24:51.3876635-07:00</StartDate>
          </Task>
      </Items>
    </CreateItem>
  </soap:Body>
</soap:Envelope> 
```

# java - 双数组/唯一随机数（卡片组）

> ID：13721250
> 
> 赞同：0
> 
> 时间：2012-12-05T10:36:35.110
> 
> 标签：java, eclipse

我正在创建一个程序，该程序具有一副纸牌的双数组列表。有两个“手”将从这一套牌中处理。必须将 5 张独特的牌发给“comHand”，这是一个存储 5 张牌的双数组。第一个 [] 存储正在处理的牌的迭代（第一张牌、第二张牌等），第二个 [] 将牌的花色存储在 [0] 中，将牌的编号存储在 [1] 中。

我简化了代码以确保获得 3 次独特的抽奖。只有一套花色和 3 个可能的号码可供选择。我的代码在 /// 上方运行良好（这两个数字始终是唯一的）。但是，下面的代码有时不会产生唯一的数字。我可以得到一些帮助来辨别这是为什么吗？

```
 int comHand [][] = new int [5][2];
        card1 = (int) (Math.random()*1);
        card2 = (int) (Math.random()*3);

        comHand[0][0] = card1;
        comHand[0][1] = card2;

        card1 = (int) (Math.random()*1);
        card2 = (int) (Math.random()*3);

        while (card1 == comHand[0][0] && card2 == comHand[0][1]){
            card1 = (int) (Math.random()*1);
            card2 = (int) (Math.random()*3);}

        comHand[1][0] = card1;
        comHand[1][1] = card2;

        ///

        card1 = (int) (Math.random()*1);
        card2 = (int) (Math.random()*3);

        while (card1 == comHand[0][0] && card2 == comHand[0][1]){
            card1 = (int) (Math.random()*1);
            card2 = (int) (Math.random()*3);}
        while (card1 == comHand[1][0] && card2 == comHand[1][1]){
            card1 = (int) (Math.random()*1);
            card2 = (int) (Math.random()*3);}

        comHand[2][0] = card1;
        comHand[2][1] = card2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:07:19.037

您的 while 循环似乎有错误的条件。试试|| 代替 ＆＆：

```
 while (card1 == comHand[0][0] || card2 == comHand[0][1]) {
            card1 = (int) (Math.random()*1);
            card2 = (int) (Math.random()*3);
 } 
```

我会尝试另一种方法，因为“重复 Math.random() 直到一切正常”不是一个好的算法。很难预测算法需要完成多少步（以及它是否总是会完成）。

使用卡片对象而不是 int 数组。使用 Math.random（或 Random）从集合中挑选卡片，然后从该集合中移除选定的卡片。这样就不会再被选中了。或者建立一个套牌，洗牌，然后从套牌中弹出最上面的牌，直到完成。这很容易实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:49:54.673

```
 int comHand [][] = new int [5][2];
    ArrayList<Integer> cards = new ArrayList<Integer>();
    int totalCards = 52; //Cards in a pack
    for(int x = 1; x <= totalCards; x++)
    {
        cards.add(x);
    }
    //Repeat for 5 cards
    for(int y = 0; y < 5; y++)
    {
        int selectCard = (int)(Math.random()*cards.size()-1);
        comHand[y][0] = cards.get(selectCard) % 13; //13 cards per suit
        comHand[y][1] = cards.get(selectCard) / 13;
        cards.remove(selectCard);
    } 
```

希望这就是你所追求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:42:21.160

您不能通过使用随机来确定连续抽奖中的唯一性。维护一个数组，存储一个交易的抽奖，如果你得到数组中存在的任何抽奖，继续生成一个新的随机数

# android - 用于 ubuntu 主机的 Android linux 容器

> ID：13721251
> 
> 赞同：2
> 
> 时间：2012-12-05T10:36:46.827
> 
> 标签：android, linux, containers

我正在使用 android 作为来宾操作系统和 Ubuntu 作为主机操作系统的 linux 容器。

到目前为止，我能够运行 ubuntu、fedora 操作系统作为来宾操作系统，在 ubuntu 主机操作系统中作为 linux 容器运行，因为用于安装给定操作系统的模板在 lxc 工具本身中作为模板存在。我使用[https://www.suse.com/documentation/sles11/singlehtml/lxc_quickstart/lxc_quickstart.html](https://www.suse.com/documentation/sles11/singlehtml/lxc_quickstart/lxc_quickstart.html)链接作为参考。

我有以下问题

1）我们如何制作自己的android OS模板，使其在linux容器中运行

2）这是否也需要在我们的主机linux内核上安装一些内核补丁

3）请注意主机操作系统是ubuntu，客户操作系统是android。因为我已经找到了链接[http://code.google.com/p/seek-for-android/wiki/AndroidContainer](http://code.google.com/p/seek-for-android/wiki/AndroidContainer)这不是我想要的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T09:55:10.667

我认为修改 android 内核以使启动 GNU/Linux 成为可能很重要。这样，我们就可以有一个支持android的linux运行。然后我认为可以完成一些[这样的工作。](https://www.stgraber.org/2013/12/23/lxc-1-0-some-more-advanced-container-usage/)

# c# - 下载文件和互联网安全问题

> ID：13721254
> 
> 赞同：0
> 
> 时间：2012-12-05T10:36:56.693
> 
> 标签：c#, internet-explorer, watin

我有一个从网站下载文件的应用程序，我正在使用 watin 和 c# 来下载文件。

环境：Windows server 8 64bit

问题是当我运行应用程序时，我收到警告：“为了帮助保护您的安全，Windows Internet Explorer 阻止了该站点将文件下载到您的计算机”

但是，如果我导航到该网站并单击手动下载，则没有问题。

我无法更改 Internet Explorer 的设置

如何在 c# 和 watin 中避免此警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:55:10.200

似乎不可能这样做:-(专业人士提供的唯一解决方案是手动调整IE的安全设置

# forms - 为什么 在里面不起作用

> ID：13721258
> 
> 赞同：2
> 
> 时间：2012-12-05T10:37:02.087
> 
> 标签：forms, jsf, editor, tinymce, facelets

我正在使用 JSF 2.1。我正在尝试在`<h:inputTextarea>`. 这是我的代码，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>

    <h:outputStylesheet library="css" name="editor_style.css" />
    <h:outputStylesheet library="css" name="css/main.css" />
    <h:outputStylesheet library="css" name="css/dropdown.css" />    
    <h:outputScript name="js/tinyeditor.js"></h:outputScript>
</h:head>

<h:body>
    <div class="content">
        <ui:include src="/template/layout/commonLayout.xhtml" />
        <ui:include src="/template/layout/menu.xhtml" />
        <h:form>
            <div class="quick_links">
                <div class="q_title">                   
                </div>
                <div class="q_window">
                    <div class="q_top"></div>
                    <div class="q_main">

                        <h:inputTextarea value="#{EditorBean.value}" id="input"
                            style="width:100%; height:300px;">Sample FAQ</h:inputTextarea>

                        <h:outputScript>                        
                new TINY.editor.edit('editor',{
                    id:'input',
                    width:945,
                    height:175,
                    cssclass:'te',
                    controlclass:'tecontrol',
                    rowclass:'teheader',
                    dividerclass:'tedivider',
                    controls:['bold','italic','underline','strikethrough','|','subscript','superscript','|',
                              'orderedlist','unorderedlist','|','outdent','indent','|','leftalign',
                              'centeralign','rightalign','blockjustify','|','unformat','|','undo','redo','n',
                              'font','size','style','|','hr','link','unlink'],
                    footer:true,
                    fonts:['Verdana','Arial','Georgia','Trebuchet MS'],
                    xhtml:true,
                    cssfile:'style.css',
                    bodyid:'editor',
                    footerclass:'tefooter',
                    toggle:{text:'Source',activetext:'HTML',cssclass:'toggle'},
                    resize:{cssclass:'resize'}
                });
               </h:outputScript>

                    </div>
                    <div class="q_bottom"></div>
                </div>
                <h:commandButton value="Savebutton" action="#{EditorBean.test}"></h:commandButton>
            </div>
            <div class="push"></div>
        </h:form>
    </div>

</h:body>
</html> 
```

如果我删除`<h:form>`标签，那么只会显示编辑器，但`<h:commandButton>`它不起作用。如果我保留`<h:form>`标签，那么`<h:commandButton>`工作，但 TinyEditor 编辑器没有被初始化。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:08:05.350

`<h:outputScript>`作品非常好。具体问题出在您自己的 JavaScript 代码中。您在 TinyEditor 配置脚本中指定了“输入”的 ID：

```
id:'input', 
```

但是，在 JSF 生成的 HTML 输出中没有具有该 ID 的 HTML 元素。是的，您应该查看 JSF 生成的 HTML 输出，因为这基本上是浏览器正在检索的所有内容。JavaScript 不在网络服务器中运行，而是在网络浏览器中运行，并且只看到 JSF 生成的 HTML 输出。在浏览器中右键单击页面并执行*查看源代码*以自己查看。

生成的 ID`<h:inputTextarea>`在此特定构造中具有`<h:form>`前置的 ID。在您的特定情况下，您没有为 指定任何 ID `<h:form>`，因此 JSF 将像这样自动生成一个，以便生成的`j_id123`HTML 元素 ID将变为. 您需要在 TinyEditor 配置脚本中准确指定该 ID。`<textarea>``<h:inputTextarea>``j_id123:input`

但是，最好在 上指定一个固定 ID `<h:form>`，因为每当您向视图添加/删除组件时，自动生成的 ID 可能会发生变化。

```
<h:form id="form">
    <h:inputTextarea id="input" />
    ... 
```

这样生成的`<textarea>`将获得`form:input`. 然后你可以在 TinyEditor 配置脚本中使用它：

```
id:'form:input', 
```

# jsp - 动态分配或更改 sjg 网格标题

> ID：13721264
> 
> 赞同：0
> 
> 时间：2012-12-05T10:37:43.830
> 
> 标签：jsp, grid, struts2-jquery

是否可以动态更改或分配 sjg 网格标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:52:21.730

```
jQuery("#GridId").jqGrid('setLabel', 'valueId', 'NewLabel'); 
```

valueId 是网格列的名称

# java - 在绑定通道适配器中使用弹簧集成？

> ID：13721277
> 
> 赞同：0
> 
> 时间：2012-12-05T10:38:26.780
> 
> 标签：java, spring, spring-integration

我是春天的新手。我有一个查询。

通道或路由器可以激活`<int-file:inbound-channel-adapter>`吗？

我的意思是，路由器应该能够启动轮询。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:32:22.493

`int-file:inbound-channel-adapter` 将需要 `int:poller` 从文件系统中读取。您可以决定什么是轮询间隔。文件被读取后， `int-file:inbound-channel-adapter` 您可以将其传递给通道。因此，总体而言，您的代码将如下所示：

```
 <file:inbound-channel-adapter id="fileInAdapter" channel="sendFileToThisChannel"
      directory="C:\FilesToBeRead" auto-create-directory="true" auto-startup="true">
    <int:poller id="packagePoller" fixed-rate="${file-adapter.polling.interval:5000}"/>
 </file:inbound-channel-adapter> 
```

在这里，inboud-channel-adapter 将每隔 5 秒检查一次来自 C: 中 FilesToBeRead 的文件，如果找到该文件，它将向 sendFileToThisChannel 发送一条消息。从频道开始，您可以对消息做您想做的事情 - 路由、处理、激活服务或任何您想做的事情！

如果您想确保不应再次通过一次的文件，您可以查看 AcceptOnceFileListFilter

# ios - 不使用 UILocalNotification 的警报

> ID：13721278
> 
> 赞同：1
> 
> 时间：2012-12-05T10:38:31.703
> 
> 标签：ios, nstimer, uilocalnotification, alarm, background-foreground

有没有办法在不使用本地通知的情况下开发 iphone 应用程序。即使在锁定状态下，应用程序也应该触发警报，以便我可以在锁定状态下进行网络调用。它可以在后台状态下使用本地通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:47:12.297

不，即使您设法让您的应用程序在后台运行，由于错过使用受支持的背景制作，您也只能使用`UILocalNotification`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:08:11.573

即使应用程序进入睡眠模式，我也设法使用 dispatch_walltime 触发警报。以前我使用的是 NSTimer 和 dispatch_time，当应用程序进入睡眠模式时，它们将停止工作。 [Grand Central Dispatch (GCD) 参考](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

# javascript - 解析多维数组的json对象

> ID：13721285
> 
> 赞同：0
> 
> 时间：2012-12-05T10:38:57.620
> 
> 标签：javascript, jquery, multidimensional-array

```
{
    "prev": [
        "demo/medium/Web081112_P002_medium.jpg",
        "demo/medium/Web081112_P003_medium.jpg"
    ],
    "curr": [
        "demo/medium/Web081112_P004_medium.jpg",
        "demo/medium/Web081112_P005_medium.jpg"
    ],
    "next": [
        "demo/medium/Web081112_P006_medium.jpg",
        "demo/medium/Web081112_P007_medium.jpg"
    ]
} 
```

这是我得到的json：

```
<script>
  $(document).ready(function(){
       $.ajax({
        type: "GET",
        url: "scandir.php",
        data: "page=5",
        dataType: 'json',
        success: function (data) { 
        $.each(data, function(i, data){
        $('#img'+i).attr('src',data[1]);
    });
    }
});
});
</script> 
```

我想这样做：`Assign <img id = "img1" src="demo/medium/Web081112_P002_medium.jpg">`等等....

收集的数据 [1] 仅捕获 (3,5,7) 列中的值。如何实施？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:46:22.670

如果你的数组总是有两个元素，试试这个：

```
$.each(data, function(i, data){
    $('#img'+(2*i)).attr('src',data[0]);
    $('#img'+(2*i + 1)).attr('src',data[1]);
}); 
```

如果您有两个以上，那么您将需要一个内部循环：

```
var idx = 0;
$.each(data, function(i, data) {
    $.each(data[i], function(j, dataj) {
        $('#img'+(idx)).attr('src',dataj[j]);
        ++idx;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:48:16.587

这不是一个多维数组，而是一个以数组为属性的对象。

要遍历数组，您需要循环内的另一个循环。使用单独的计数器来跟踪图像编号。

```
var count = 1;
$.each(data, function(i, row){
  $.each(row, function(j, item){
    $('#img' + count).attr('src', item);
    count++;
  });
}); 
```

注意：对象中的属性没有特定的顺序，因此它们最终可能以不同的顺序结束，具体取决于访问者使用的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:51:02.917

因为您只是在这里设置第二个数据对象的 src 属性...

```
$('#img'+i).attr('src',data[1]); 
```

你只得到（3,7,5）......

你必须使用两个`$.each`循环来获取所有的 src ..

试试这个

```
var k=1;

$.each(data, function(i, data1){
  $.each(data1, function(j, data2){
     $('#img' + k).attr('src', data2);
       k++;
   });
}); 
```

# python - 如何使用动态列数重新格式化数据

> ID：13721289
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:39:11.647
> 
> 标签：python, bash, text-parsing

我有一种形式的数据，类别和值位于同一行，由“;”分隔 如下：

```
{{category1;value}, {category2;value}, {category3;value} ....}} 
```

在每一行上，数据可能存在不同数量的类别。因此，第一行可能有 category1 到 category5，而第二行可能有 category1 到 category10。不过，类别总是按顺序排列的。

我需要解析数据并创建一个新文件，以便在列标题中包含类别的名称和相应行中的值。

```
category1        category2        category3       category4    ....
 value             value             value          value 
```

但是由于我不能说可能有多少类别，所以我需要添加每个新列。因此，解析第一行我会知道有 5 列（cat1 到 cat5），但是对于第二行，我必须将 cat6 的列添加到 cat10 等等。

任何想法如何做到这一点。任何 Linux bash 脚本都可以，但 python 对我来说更可取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:05:08.117

鉴于评论，听起来 the`category`可以包含除分号以外的任何字符，并且 a`value`可以包含除右括号之外的任何字符，因为这些字符会终止`category`or`value`太快。

在这种情况下，可以使用正则表达式来匹配模式。

```
import re

def report(text):
    # Remove surrounding whitespace and braces
    text = text.strip()[1:-1]   
    pairs = re.findall(
        r'''\{      # literal open brace
            (.+?)   # one-or-more characters, stop at the first
            ;       # literal semicolon
            (.+?)   # one-or-more characters, stop at the first
            \}      # literal closed brace
            ''', text, re.VERBOSE)
    categories, values = zip(*pairs)
    widths = [max(map(len, item)) for item in pairs]
    fmt = '{x:^{w}}'
    for row in (categories, values):
        print('    '.join([fmt.format(x = x, w = w) for x, w in zip(row, widths)]))

tests = """\
{{category1;value}, {category2;value}}
{{category1;value}, {category2;value}, {category3;value}}
{{categ{,ory1;val;ue}, {category2;val{ue}, {category3;value}}
""".splitlines()

for test in tests:
    report(test) 
```

产量

```
category1    category2
  value        value  
category1    category2    category3
  value        value        value  
categ{,ory1    category2    category3
  val;ue        val{ue        value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:47:43.040

可能有很多方法可以做到这一点，但一种可能的方法是

```
>>> rows = data.translate(None,"{}").replace(";",",").split(",")
>>> rows[::2]
['category1', ' category2', ' category3']
>>> rows[1::2]
['value', 'value', 'value'] 
```

和上面的一个小变化

```
>>> rows = dict(e.split(';') for e in data.translate(None,"{}").split(","))
>>> rows.keys()
['category1', ' category2', ' category3']
>>> rows.values()
['value', 'value', 'value'] 
```

还有另一个使用正则表达式的变体

```
>>> rows = re.split("[\{\},; ]+",data)[1:-1]
>>> rows[::2]
['category1', 'category2', 'category3']
>>> rows[1::2]
['value', 'value', 'value'] 
```

# jquery - Jquery 自定义插件创建模式

> ID：13721306
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:39:54.030
> 
> 标签：jquery, jquery-plugins

创建 jQuery 自定义插件时，以下内容有什么区别？

```
jquery.fn.Myplugin= function(){ /* code */ }; 
```

和

```
(function ($){ /* code */ })(jQuery); 
```

您是否有特定的时间使用其中一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:48:07.867

创建 jQuery 插件的推荐方法是首先创建一个允许您使用美元符号 ($) 的包装函数。默认情况下，$ 符号可能会导致与其他 JavaScript 框架发生冲突。如果您将插件包装在一个函数中，则不会与其他 JavaScript 框架和使用 $ 符号发生冲突。除此之外，第一种方式在功能上没有任何问题。

推荐方式：

```
(function ($){ 
   $.fn.Myplugin= function(){ 
   /* your plugin code here */ 
   };
})(jQuery); 
```

# android - SessionState.OPENED_TOKEN_UPDATED 在适用于 Android 的 Facebook SDK 3.0.1b 中是什么意思

> ID：13721317
> 
> 赞同：1
> 
> 时间：2012-12-05T10:40:12.383
> 
> 标签：android, facebook, facebook-android-sdk

我正在开发一个应用程序，它有代码，我在其中扩展了我的课程，`FacebookActivity`我想知道 OPENED_TOKEN_UPDATED 是什么意思以及这部分何时执行

```
if (state.equals(SessionState.OPENED_TOKEN_UPDATED)) { 
                        //WHEN THIS PORTION WILL EXECUTE
                    } 
```

Facebook 文档不太好。另请参见下面的代码

```
 @Override
    protected void onSessionStateChange(SessionState state, Exception exception) {
        if (isResumed) { //if its a visible activity
            FragmentManager manager = getSupportFragmentManager();
            int backStackSize = manager.getBackStackEntryCount(); //get number of entries currently in the back-stack
            for (int i = 0; i < backStackSize; i++) {
                manager.popBackStack(); //clear fragment back-stack before new fragment is added
            }
            if (state.isOpened()) {
                if (state.equals(SessionState.OPENED_TOKEN_UPDATED)) { 
                    //WHEN THIS PORTION WILL EXECUTE
                }else{
                    //replace fragment on main with promo fragment
                    FragmentTransaction transaction = manager.beginTransaction();
                    transaction.replace(R.id.body_frame, fragments[NextFgragment]).commit();

                }
            } else if (state.isClosed()) {

                //replace fragment on main with login fragment
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:16:44.877

当您最初打开一个会话时，它将处于 SessionState.OPENED 状态。如果您发出重新授权请求，或者令牌被刷新，那么它将处于 OPENED_TOKEN_UPDATED 状态。

通常，您可以将 OPENED 和 OPENED_TOKEN_UPDATED 视为相同，但有时（例如，如果您请求更多权限），您会想知道令牌何时更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:25:18.503

您可以禁用此代码

```
if (state.equals(SessionState.OPENED_TOKEN_UPDATED)) { 
                    //WHEN THIS PORTION WILL EXECUTE
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:00:19.033

SessionState.OPENED_TOKEN_UPDATED 的文档说：

“表示 Session 已打开且令牌已更改。在此状态下，Session 可能与 Request 一起使用。”

这部分代码很有用，如果需要在令牌更改时做一些事情

# php - PHP单选按钮 - 未定义的索引

> ID：13721320
> 
> 赞同：1
> 
> 时间：2012-12-05T10:40:27.120
> 
> 标签：php

简单的问题，当我没有选择任何单选按钮时，我收到错误消息 Undefined index: gender

```
<?PHP
if(isset($_POST['register'])){

    $gender=$_POST['gender'];
    echo $gender;
    }
?>

<html>
    <form action="testing.php" method="POST">
        <input type="radio" name="gender" value="male" />Male
        <input type="radio" name="gender" value="female" />Female
    <input type="submit" name="register" value="Register" />
    </form>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T10:49:46.007

```
<?PHP
if(isset($_POST['register'])){

    if(!empty($_POST['gender'])) {

        $gender=$_POST['gender'];
        echo $gender;

        }
    }
?>

<html>
    <form action="radio.php" method="POST">
        <input type="radio" name="gender" value="male"  />Male
        <input type="radio" name="gender" value="female" />Female
    <input type="submit" name="register" value="Register" />
    </form>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T10:49:21.920

您可以使用 @$_POST['gender'] 不引发错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T10:41:56.887

未选中的单选按钮和复选框不会被表单发布，因此它们不会出现在`$_POST`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T10:42:38.317

当然，当您不选择单选按钮时会出现错误。因为当您不选择一个时，不会发布值。您可以 1) 检查索引是否存在 isset() 或 2) 在页面加载时检查单选按钮，以便始终发送值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T10:41:31.160

如果没有选择单选按钮，则不会提交“性别”输入的值。这与不勾选复选框相同。您需要通过使用检查它是否存在并具有有效值

```
if(!empty($_POST['gender'])) {
    ...
} 
```

其他检查方法包括`isset($_POST['gender'])`，`array_key_exists('gender', $_POST)`尽管这些方法不检查值是零还是空字符串（可能是也可能不是你想要的）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T10:43:04.667

问题出在`$_POST['gender']`. 由于您没有选择任何内容，因此性别未定义。

您可以使用检查定义的索引`array_key_exists('gender', $_POST)`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-12-04T11:05:15.857

问题可以通过这种方式轻松解决。

```
if(isset($_POST['register'])){
    if(isset($_POST['gender'])) {
        $gender = $_POST['gender'];
    }else{
        $gender = "";
    }
} 
```

如果您需要使用 PHP 进行验证，您可以针对 $gender = "";

```
<html>
<form action="radio.php" method="POST">
    <input type="radio" name="gender" value="male"  />Male
    <input type="radio" name="gender" value="female" />Female
<input type="submit" name="register" value="Register" />
</form> 
```

# kinect - 记录的骨架数据

> ID：13721323
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:40:41.643
> 
> 标签：kinect, kinect-sdk, kinect.toolbox

以下是我用来尝试记录骨架帧数据的代码

```
using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
{
    if (skeletonFrame == null)
       return;
    this.Recorder.Record(skeletonFrame);
} 
```

如果上面的代码运行，会记录什么信息？如果我将此信息保存到外部文件，我会看到什么？

会有坐标信息和与每个坐标信息相关联的特定时间戳吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T22:53:22.863

您是否正在考虑将骨架的 X、Y、Z 数据记录到文本文件中？以可读格式单独记录信息通常更容易。如果您正在考虑执行上述操作，那么这可能会有所帮助：

```
//save the XYZ of the skeleton data, but also save the XZ of depth data
        private void saveCoordinates(Skeleton skeleton, string textFile)
        {
        StreamWriter coordinatesStream = new StreamWriter(newPath + "\\" + textFile);

            foreach (Joint joint in skeleton.Joints)
            {

                coordinatesStream.WriteLine(joint.JointType + ", " + joint.TrackingState + ", " + joint.Position.X + ", " + joint.Position.Y + ", " + joint.Position.Z);

            }
            coordinatesStream.Close();

        } 
```

# android - Android：在 AsyncTask 中使用 ArrayAdapter 填充 ListView -> 仅显示一项

> ID：13721324
> 
> 赞同：3
> 
> 时间：2012-12-05T10:40:44.647
> 
> 标签：android, listview, android-asynctask, android-arrayadapter

我在 AsyncTask 中用 ArrayAdapter 填充 ListView。但每次它只填写一项。

有人可以解释我为什么吗？

**创建**

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.connected_download);
    Log.v("string", "test6");

    runOnUiThread(new Runnable() {
        public void run() {
            str_profil = getIntent().getStringExtra("profil");
            str_server = getIntent().getStringExtra("server");
            str_port = getIntent().getStringExtra("port");
            str_user = getIntent().getStringExtra("user");
            str_password = getIntent().getStringExtra("pw");
            new connection_test().execute();
        }
    });
} 
```

**异步任务**

```
 private class connection_test extends AsyncTask<String, Void, String> {

    protected void onPreExecute(){
        dialog = ProgressDialog.show(connected_download.this, null, "Erstelle Vorschau. Bitte warten...");
    }

    protected String doInBackground(String... connection) {
                listftpitems();
            return null;
    }

    protected void onPostExecute(String result) {
        dialog.dismiss();
    }
} 
```

**列表文件**

```
 public void listftpitems(){
    try {
        ftpClient.setConnectTimeout(15000);
        Integer int_port = Integer.parseInt(str_port);
        ftpClient.connect(InetAddress.getByName(str_server), int_port);
        ftpClient.login(str_user, str_password);
        ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
        ftpClient.enterLocalPassiveMode();
        System.out.println("status :: " + ftpClient.getStatus());
        System.out.println("FTPClient : " + "Offen");

    } catch (Exception e) {
        e.printStackTrace();
    } 

    final ArrayList<String> your_array_list = new ArrayList<String>();
    final ListView lv = (ListView) findViewById(R.id.list_download);
    final FTPFile[] files;
    try {

        files = ftpClient.listFiles();

        for (FTPFile file : files) {
            String details = file.getName();
            your_array_list.add(details);
            Log.v("string", details);
        }

        final ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(connected_download.this,android.R.layout.simple_list_item_1, your_array_list);

        runOnUiThread(new Runnable() {
            public void run() {
            lv.setAdapter(arrayAdapter); 
            }
        });

    }catch (IOException e1) {
        e1.printStackTrace();
    }

} 
```

**LogCat**（查看 Log.v("string", details); on listftpitems）所以它是正确的

```
12-05 11:34:24.650: D/AbsListView(23249): Get MotionRecognitionManager
12-05 11:34:24.650: V/string(23249): test6
12-05 11:34:24.695: D/dalvikvm(23249): GC_FOR_ALLOC freed 64K, 9% free 13420K/14599K, paused 13ms, total 15ms
12-05 11:34:24.945: D/dalvikvm(23249): GC_CONCURRENT freed 29K, 8% free 13813K/14983K, paused 11ms+5ms, total 28ms
12-05 11:34:25.480: I/System.out(23249): status :: 211-Status of 'ProFTPD'
12-05 11:34:25.480: I/System.out(23249):  Connected from 213.55.184.193 (213.55.184.193)
12-05 11:34:25.480: I/System.out(23249):  Logged in as ftp031220
12-05 11:34:25.480: I/System.out(23249):  TYPE: BINARY, STRUcture: File, Mode: Stream
12-05 11:34:25.480: I/System.out(23249):  No data connection
12-05 11:34:25.480: I/System.out(23249): 211 End of status
12-05 11:34:25.480: I/System.out(23249): FTPClient : Offen
12-05 11:34:26.095: V/string(23249): anon_ftp
12-05 11:34:26.095: V/string(23249): bin
12-05 11:34:26.095: V/string(23249): cgi-bin
12-05 11:34:26.095: V/string(23249): conf
12-05 11:34:26.095: V/string(23249): error_docs
12-05 11:34:26.095: V/string(23249): httpdocs
12-05 11:34:26.095: V/string(23249): httpsdocs
12-05 11:34:26.095: V/string(23249): mivadata
12-05 11:34:26.095: V/string(23249): pd
12-05 11:34:26.095: V/string(23249): private
12-05 11:34:26.095: V/string(23249): statistics
12-05 11:34:26.095: V/string(23249): subdomains
12-05 11:34:26.095: V/string(23249): vault_scripts
12-05 11:34:26.095: V/string(23249): web_users 
```

**我手机里的照片**

![在此处输入图像描述](../Images/15eaac5c9c6bcf1802bdf3e82bb15807.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:53:44.823

您正在以错误的方式在当前代码中执行所有操作，就像您尝试使用`runOnUiThread`from `doInBackground`.change 您的代码一样：

* * *

**将 listftpitems 更改为：**

```
public ArrayList<String> listftpitems(){
try {
        ArrayList<String> your_array_list = new ArrayList<String>();
        ftpClient.setConnectTimeout(15000);
        Integer int_port = Integer.parseInt(str_port);
        ftpClient.connect(InetAddress.getByName(str_server), int_port);
        ftpClient.login(str_user, str_password);
        ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
        ftpClient.enterLocalPassiveMode();
        System.out.println("status :: " + ftpClient.getStatus());
        System.out.println("FTPClient : " + "Offen");

    } catch (Exception e) {
        e.printStackTrace();
    } 
    final FTPFile[] files;
    try {
        files = ftpClient.listFiles();
        for (FTPFile file : files) {
            String details = file.getName();
            your_array_list.add(details);
            Log.v("string", details);
        }
    }catch (IOException e1) {
        e1.printStackTrace();
    }

return your_array_list;
} 
```

* * *

**将 AsyncTask 更改为：**

```
private class connection_test extends AsyncTask<String, Void, String> {
   ArrayList<String> temparrlist = new ArrayList<String>();
    protected void onPreExecute(){
        dialog = ProgressDialog.show(connected_download.this, null, 
                                 "Erstelle Vorschau. Bitte warten...");
    }

    protected ArrayList<String> doInBackground(String... connection) {
              temparrlist=listftpitems();
            return temparrlist;
    }

    protected void onPostExecute(ArrayList<String> result) {
       ArrayAdapter<String> arrayAdapter = 
                new ArrayAdapter<String>(connected_download.this,
                              android.R.layout.simple_list_item_1, 
                              result);
       lv.setAdapter(arrayAdapter); 
        dialog.dismiss();
    }
} 
```

* * *

**将您的活动 onCreate 更改为：**

```
ListView lv ;
    @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.connected_download);
    Log.v("string", "test6");

            str_profil = getIntent().getStringExtra("profil");
            str_server = getIntent().getStringExtra("server");
            str_port = getIntent().getStringExtra("port");
            str_user = getIntent().getStringExtra("user");
            str_password = getIntent().getStringExtra("pw");
        lv= (ListView) findViewById(R.id.list_download);
            new connection_test().execute("");
} 
```

* * *

并请从以下位置阅读一些 Android 基础知识：

[http://developer.android.com/guide/components/index.html](http://developer.android.com/guide/components/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:00:40.637

> 您不必创建`ArrayList`内部`AsyncTask`，而是在内部`onPostExecute()`方法中添加项目。

试试下面的代码片段。

```
 private class connection_test extends AsyncTask<String, Void, String> {

    protected void onPreExecute(){
        dialog = ProgressDialog.show(connected_download.this, null, "Erstelle Vorschau. Bitte warten...");
    }

    protected String doInBackground(String... connection) {
                //Here you will get your arraylist with the Method listftpitems()
                your_array_list= listftpitems();
            return null;
    }

    protected void onPostExecute(String result) {
        dialog.dismiss();
        final ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(connected_download.this,android.R.layout.simple_list_item_1, your_array_list);
   setListAdapter(arrayAdapter);
    }
} 
```

这是你的方法。

```
public ArrayList<String> listftpitems(){
try {
        ArrayList<String> your_array_list = new ArrayList<String>();
        ftpClient.setConnectTimeout(15000);
        Integer int_port = Integer.parseInt(str_port);
        ftpClient.connect(InetAddress.getByName(str_server), int_port);
        ftpClient.login(str_user, str_password);
        ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
        ftpClient.enterLocalPassiveMode();
        System.out.println("status :: " + ftpClient.getStatus());
        System.out.println("FTPClient : " + "Offen");

    } catch (Exception e) {
        e.printStackTrace();
    } 
    final FTPFile[] files;
    try {
        files = ftpClient.listFiles();
        for (FTPFile file : files) {
            String details = file.getName();
            your_array_list.add(details);
            Log.v("string", details);
        }
    }catch (IOException e1) {
        e1.printStackTrace();
    }

return your_array_list;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:51:00.773

只有一个

```
"V/string(23249): test6" 
```

log，这意味着你的循环只运行一次。检查是否

```
ftpClient.listFiles(); 
```

返回多个文件。

# bash - Bash PDF 合并遗漏文件

> ID：13721326
> 
> 赞同：2
> 
> 时间：2012-12-05T10:40:52.227
> 
> 标签：bash, pdf, ghostscript

我正在尝试将许多 PDF 文件合并为 3000 个左右的文件块。经过多次尝试，这个脚本似乎成功了。（当然我错了）

```
#!/bin/bash

basepath='/home/lemonidas/pdfstuff';
datename=`date "+%Y%m%d%H%M.%S"`;
start=`date "+%s"`;
echo "parsing pdf list to file..."
find $basepath/input/ -name "*.pdf" | xargs -I {} ls {} >> $basepath/tmp/biglist$datename.txt

split -l 3000 $basepath/tmp/biglist$datename.txt $basepath/tmp/splitfile
rm $basepath/tmp/biglist$datename.txt
echo "deleting big file..."
echo "done splitting!"

declare -i x 
x=1

for f in $basepath/tmp/splitfile*
do
linenum=`cat $f | wc -l`;
echo "Processing $f ($linenum lines)..."

# merge to one big PDF
cat $f | xargs  gs -q -sstdout=$basepath/error.log -sPAPERSIZE=letter -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -sOutputFile=$basepath/output/$x.big.pdf  2>$basepath/error.log
echo "Completed PDF $x"
 (( x++ ))

# delete the list file
rm $f
echo "Deleted processed file $f"
done
end=`date "+%s"`;
echo "Started: $start"
echo "Finished: $end" 
```

问题是，我有 22000 个 2 页 PDF，每个输出文件（最后一个除外）应该是 6000 页（因为我们在每个合并列表中有 3000 个 PDF，在解析之前由“wc -l”验证），并且我只得到大约 658 页左右。

除了 gs 之外，没有报告任何错误：

```
警告：嵌入式符号 TT 字体必须包含用于 Platform=1 Encoding=0 的 cmap。
警告：嵌入式符号 TT 字体必须包含用于 Platform=1 Encoding=0 的 cmap。
警告：嵌入式符号 TT 字体必须包含用于 Platform=1 Encoding=0 的 cmap。
警告：嵌入式符号 TT 字体必须包含用于 Platform=1 Encoding=0 的 cmap。
警告：嵌入式符号 TT 字体必须包含用于 Platform=1 Encoding=0 的 cmap。
警告：嵌入式符号 TT 字体必须包含用于 Platform=1 Encoding=0 的 cmap。
警告：嵌入式符号 TT 字体必须包含用于 Platform=1 Encoding=0 的 cmap。
警告：嵌入式符号 TT 字体必须包含用于 Platform=1 Encoding=0 的 cmap。

此文件包含已修复或忽略的错误。

文件制作者：>>>> Powered By Crystal
请通知生成此文件的软件的作者它不符合 Adob​​e 发布的 PDF 规范。

```

一遍又一遍（但不是 22000 次）

当我尝试使用 300-400 个文件时，它运行平稳，但是当我尝试完全运行时，2.5 小时后，我得到的文件合并不到一半。

我的下一个想法是将每个 2 页 PDF 转换为 .pgm 文件，但我不知道如何将它们重新制作为 PDF（这样就不会出现字体嵌入问题）。我错过了什么吗？（大概）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:56:06.063

您可能会更好地使用更适合该任务的工具。pdfwrite（用于发出 PDF 文件的 Ghostscript 设备）在我看来不是正确的工具。

为了“合并” PDF 文件，Ghostscript 将输入完全解释为标记操作，然后将标记操作重写为 PDF 文件。在创建操作列表时，需要保存大量信息（字体、图像、其他内容）并与新输入进行比较，以查看我们是否已经有了副本。随着输入变大，扫描该列表需要更长的时间，当然内存消耗也会增加。您可能会发现 Ghostscript 已经在交换内存。

现在我不确定这是您的实际问题，或者您是否说在“合并”文件后缺少页面。那不应该发生。您也没有说您使用的是什么版本的 Ghostscript。

尽管如此，我认为像 pdftk 这样的工具在进行这种合并时会更快，尽管最终的 PDF 文件可能比 pdfwrite 更大/效率更低。

# css - 如何使我的按钮悬停过渡平滑？

> ID：13721331
> 
> 赞同：0
> 
> 时间：2012-12-05T10:41:02.013
> 
> 标签：css

我创建了一个图像按钮，在鼠标悬停时显示 2 个不同的图像。

我的问题是它在悬停时闪烁。我该怎么做才能使其悬停时过渡平滑。

这是我当前的代码的样子：

```
<style>
.test{
width:620px;
height:55px;
background: url(1.jpg);
text-indent: -9999px
}

.test:hover{
background: url(2.jpg);
cursor: hand;
cursor: pointer;
}
</style>

<p class="test"><a href="#">TEST ONLY</a> 
```

在显示问题的现场演示下方：

[http://magestimate.com/csstest/](http://magestimate.com/csstest/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:11:59.670

我认为，如果您只想确保图像不会按需加载，那么只需为所有图像添加一个预加载器...

您必须在正文标签中添加它..

前任。

> ```
> <body onload="MM_preloadImages('images/x.png' 'images/y.png')">
> 
> </body> 
> ```

等等。

**真棒安德烈**出去！

[http://www.awesomeandre.tk](http://www.awesomeandre.tk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:51:14.473

我认为这与 2.jpg 尚未加载有关，并且服务器没有那么快。

尝试将此添加到您的 HTML

```
<img src="2.jpg" alt="" style="display:none" /> 
```

# ios - UISearch Bar 没有被键盘输入更新

> ID：13721342
> 
> 赞同：1
> 
> 时间：2012-12-05T10:41:51.910
> 
> 标签：ios, xcode, ios5, ios6

我有一个带有子视图的 ViewController，其中包含`UISearchBar`. 当我点击搜索栏时，会出现键盘，我可以使用取消按钮将其关闭。问题似乎是当用户单击键盘按钮时它不接受任何输入。

```
#pragma mark -
#pragma mark SEARCH METHODS
#pragma mark -

- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar {

    self.mainSearchBar.showsCancelButton = YES;

    return YES;
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{

    [self.mainSearchBar resignFirstResponder];

    self.mainSearchBar.showsCancelButton = NO;

    self.mainSearchBar.text = @"";

}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {

    [self.mainSearchBar resignFirstResponder];

} 
```

以前有没有人遇到过这个问题或知道如何解决？

********更新***** ********

 **事实证明，当尝试编辑 UISearchBar 时，Siri 会起作用。尽管如此，键盘输入仍然没有运气。我认为这与 UISearchBar 位于 UIView 然后添加为子视图这一事实有关。不知道如何解决它。

********更新 2 ***** ****** 将搜索框移动到主 UIView，但我仍然遇到同样的错误。我想知道它现在是否与导航控制器有关。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:05:40.470

确保应用程序委托具有 [self.window makeKeyAndVisible]。希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:11:32.937

检查是否在 viewController 的 .h 文件中添加了 UISearchBarDelegate。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:19:53.053

也试试这个代码：

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText

{
    NSLog(@"%@",searchText);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:56:46.340

这必须与相对于's 的`SearchBar`呈现方式有关。您为什么要制作另一个的a而不是s的子视图？`ViewController``view``SearchBar``subview``view``ViewController``view`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T14:17:33.803

问题解决了，在上一个线程[键盘和光标显示中找到了答案，但我无法在 UITextFields 和 UITextViews 内输入](https://stackoverflow.com/questions/12447875/keyboard-and-cursor-show-but-i-cant-type-inside-uitextfields-and-uitextviews/12504575#12504575)

事实证明，在 IOS6 中，Visible at Launch 检查需要单击选项。****

# iphone - UIToolBar 项目坐标

> ID：13721344
> 
> 赞同：1
> 
> 时间：2012-12-05T10:41:55.227
> 
> 标签：iphone, ios, xcode, uitoolbar

我的问题如下：我想知道工具栏项目的坐标，以便我可以在那里弹出一些数据。这些 barbuttonitems 从来没有告诉我那里的框架属性。
有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:51:08.603

如果你想给间距，你可以使用。

```
UIBarButtonItem *fixedLeftSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:self action:nil]; 
```

> **// 用于添加自定义视图**

```
UIButton *webButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [webButton setFrame:CGRectMake(0, 0, 50, 40)];
        [webButton setImage:[UIImage imageNamed:@\"webIcon.jpg\"] forState:UIControlStateNormal];
        [webButton addTarget:self action:@selector(goToWebPage) forControlEvents:UIControlEventTouchDown];

        UIBarButtonItem *webpageBtn = [[UIBarButtonItem alloc]initWithCustomView:webButton];
        [webpageBtn setTarget:self];
        [webpageBtn setAction:@selector(goToWebPage)];

    [toolbar setItems:[NSArray arrayWithObjects: webpageBtn,fixedLeftSpace,webpageBtn, nil]]; 
```

另请参阅[链接](https://stackoverflow.com/questions/1941103/can-i-give-a-uitoolbar-a-custom-background-in-my-iphone-app)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:57:18.530

```
UIToolbar* tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 210, 44)];
 UIBarButtonItem *space = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
 NSMutableArray* buttons = [[NSMutableArray alloc] initWithObjects:bt1,space,bt2,space,bt3, nil];

    [tools setItems:buttons animated:YES];

    UIBarButtonItem *toolsBtn = [[UIBarButtonItem alloc]initWithCustomView:tools];

    self.navigationItem.rightBarButtonItem = toolsBtn; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:00:30.383

如果您从 xib 文件创建工具栏，那么如果您在工具栏上使用多个栏按钮，则需要在按钮之前和之后添加多个“灵活的空格键按钮项”，直到获得所需的间距。如果您正在动态创建 UIToolbar，那么您需要动态添加灵活的按钮。

# c++ - 使用 `alias()` 解析精神规则时访问冲突

> ID：13721346
> 
> 赞同：1
> 
> 时间：2012-12-05T10:41:55.450
> 
> 标签：c++, alias, boost-spirit, boost-spirit-qi

我尝试使用由以下规则构造的语法来解析字符串“1-2”：

```
spirit::qi::rule<Iterator, spirit::utf8_symbol_type()> op1 = "-";
spirit::qi::rule<Iterator, spirit::utf8_symbol_type()> op2 = "+";

spirit::qi::rule<Iterator, spirit::utree(), spirit::qi::space_type> numberParser = boost::spirit::qi::double_;

spirit::qi::rule<Iterator, spirit::utree(), spirit::qi::space_type> expressionParser;
expressionParser = numberParser >> -( (op1 >> expressionParser) | (op2 >> expressionParser)); 

start = expressionParser.alias(); 
```

start 是我语法课的成员：

```
spirit::qi::rule<Iterator, spirit::utree(), spirit::qi::space_type> start; 
```

有了这里的规则，我想为每个二进制操作 + 和 - 从左到右创建一个节点。

当我现在使用以下方法解析字符串“1-2”时：

```
void Parse(const std::string& testString, const CDynamicExpressionSyntaxParser<const char*>& parser)  
{
    char const* first = testString.c_str();
    char const* last = &first[testString.size()];
    boost::spirit::utree tree;
    bool success = boost::spirit::qi::phrase_parse(first,last,parser, boost::spirit::qi::space,tree);
    std::cout << "tree: " << tree << '\n'; 
} 
```

我在 rule.hpp 中遇到访问冲突。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:11:31.997

I think the reason can be found here: [Copy or reference semantics of boost::spirit's rule<>?](https://stackoverflow.com/questions/3470668/copy-or-reference-semantics-of-boostspirits-rule) - especially with:

> When a rule is referenced anywhere in the right hand side of an EBNF expression, the rule is held by the expression by reference. It is the responsibility of the client to ensure that the referenced rule stays in scope and does not get destructed while it is being referenced.

this was not the case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:07:00.247

而不是这个......

```
char const* last = &first[testString.size()]; 
```

尝试这个....

```
char const* last = &first[testString.size()-1]; 
```

# ruby - Ruby 查找所有常量

> ID：13721350
> 
> 赞同：3
> 
> 时间：2012-12-05T10:42:04.737
> 
> 标签：ruby

我是 Ruby 新手，如果这是一个简单的问题，我很抱歉。我想打开一个 ruby​​ 文件并搜索所有常量，但我不知道正确的正则表达式。

这是我的简化代码：

```
def findconst()
 filename = @path_main  
 k= {}
 akonstanten = []
 k[:konstanten] = akonstanten

 if (File.exists?(filename))
  file = open(filename, "r")
   while (line = file.gets)
    if (line =~  ????)
     k[:konstanten] << line
    end
   end
 end 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:27:40.593

您可以使用[Ripper](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ripper/rdoc/Ripper.html)库来提取令牌。

例如，此代码将返回文件的常量和方法名称

```
A = "String" # Comment
B = <<-STR
  Yet Another String
STR

class C
  class D
    def method_1
    end
    def method_2
    end
  end
end 
```

* * *

```
require "ripper"

tokens = Ripper.lex(File.read("file.rb"))

pp tokens.group_by { |x| x[1] }[:on_ident].map(&:last)
pp tokens.group_by { |x| x[1] }[:on_const].map(&:last)

# => ["method_1", "method_2"]
# => ["A", "B", "C", "D"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:51:46.627

正如塞尔吉奥所说，用大写字母搜索单词不仅会给你常量，而且如果它足够好，它就足够好了。

您正在寻找的正则表达式类似于

```
if (line =~ /[^a-z][A-Z]/) 
```

这表示匹配任何前面没有小写字母的大写字母。当然，这只会每行计算一个，因此您可能想考虑对流进行标记并处理标记，而不是行。

# java - 如果修改了父对象的一对多关系，则不增加父对象的版本

> ID：13721354
> 
> 赞同：1
> 
> 时间：2012-12-05T10:42:16.857
> 
> 标签：java, jpa, eclipselink

我使用 EclipseLink 作为 JPA 提供程序。每当在父对象中添加/删除子对象时，我都面临版本属性未更新的问题。

有一类公司。Company 类有一个属性 Set。公司类一个版本字段。每当我更新任何非关系属性时，公司实例的版本字段都会增加。但是，如果我将 Employee 类的实例添加到一对多集合员工中，则 Company 实例的 version 字段不会增加。基本上，如果将子对象添加到父对象或从父对象中删除，则父对象的版本不会增加。

```
@Entity
class Company {
   @Id
   private long id;
   private String name;
   @Version
   private Integer version;
   @OneToMany(mappyedBy="company", cascade = CascadeType.ALL, orphanRemoval = true)
   private Set<Employee> employees;
   //
   // setter / getter methods
}

@Entity
class Employee {
   @Id
   private long id;
   private String name;
   @ManyToOne
   @JoinColumn(name = "compid")
   private Company company; 
   //
   // setter / getter methods
} 
```

如果将子对象添加到父对象或从父对象中删除，则 Hibernate 会增加父对象的版本。

EclipseLink 不应该以同样的方式表现吗？我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:54:01.080

默认情况下，每当任何直接字段或“拥有”关系发生变化时，EclipseLink 都会增加锁定。我相信这是 JPA 规范所规定的。使用“mappedBy”的 OneToMany 不被视为拥有关系，因此默认情况下不会导致版本增加。

您可以使用来配置它，（导致对任何关系或依赖对象的任何更改以增加版本）

```
@OptimisticLocking(cascade=true) 
```

您还可以使用 DescriptorCustomizer 进行设置，（导致对任何关系的任何更改以递增版本）

```
descriptor.getOptimisticLockingPolicy().setLockOnChangeMode(LockOnChange.ALL) 
```

# actionscript-3 - if语句改变文本颜色

> ID：13721358
> 
> 赞同：0
> 
> 时间：2012-12-05T10:42:25.600
> 
> 标签：actionscript-3

```
for(var temp:int = 0;temp<recipeNum;temp++)
{
    if ((temp == 1) || (temp == 2) || (temp == 6) || (temp == 9))   
    {
        textRecipe.textColor = 0x0000FF;
    }
    else
    {
        textRecipe.textColor = 0x000000;
    }

    textRecipe.text += "\n" + recipe[temp];
    addChild(textRecipe);                   
} 
```

此代码的问题是屏幕上的所有文本都是黑色的。我希望 temp 1,2,6,9 为蓝色，任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:51:29.127

如果我没记错的话，您只使用了一个`TextField`名为`textRecipe`.

请注意，**即使您将** `recipeNum` **时间添加到舞台**，它也始终是同一个对象。

分配`textColor`属性，它会修改整个文本的颜色，因此最后分配的颜色（可能是黑色）将是整个文本的颜色。

使用多个`TextField`或使用 a`TextFormat`为文本的一部分分配颜色：

```
var myFormat = new TextFormat();
myFormat.color = 0x0000FF;

textRecipe.setTextFormat(myFormat, 5, 8);  //sets color blue to chars from 5 to 8 
```

如果您需要更多帮助，请告诉我。

# oracle - 在同一台机器上安装 2 个 Oracle 数据库

> ID：13721359
> 
> 赞同：0
> 
> 时间：2012-12-05T10:42:32.653
> 
> 标签：oracle

如何在同一台机器上同时安装 Oracle 10g XE 和 Oracle 11G XE？

安装时出现以下错误。

![安装错误](../Images/c6b9c3671ec7787be036031de3d37cc3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:46:09.053

明白了，我们需要在安装前禁用杀毒软件，我们不能在同一台机器上同时安装 Oracle 10G XE 和 11G XE，但可以在同一台机器上安装 oracle 10gxe 和 11g。

# c# - 从本地 Sql Compact 数据库更新强类型数据集

> ID：13721362
> 
> 赞同：0
> 
> 时间：2012-12-05T10:42:40.233
> 
> 标签：c#, ado.net, dataset, sql-server-ce

我使用 Visual Studio 2010 Express 创建了一个 Sql Compact Database (sdf-File)，其中包含多个表和关系。从这个数据库中，我生成了一个强类型数据集。

现在我想用数据库中的内容填充数据集。所以我使用以下代码连接到数据库并填充数据集。

```
//My strongly typed dataset
localData = new LokalStorageDataSet();

//SqlCe-Connection
localConnection = new SqlCeConnection(@"Data Source=|DataDirectory|\TempStorage.sdf; Password='xyc';Persist Security Info=True");

localConnection.Open();
SqlCeCommand command = new SqlCeCommand("SELECT * FROM progstates", localConnection);
localDataAdapter = new SqlCeDataAdapter(command);

localDataAdapter.Fill(localData); 
```

问题是我的数据集中没有添加任何行，尽管在数据库中有行。如果我使用 SqlCeReader 读取 SqlCeCommand 的结果，读取器会返回以下行：

```
SqlCeDataReader dr = command.ExecuteReader();

        while (dr.Read())
        {
          ...
        } 
```

你能告诉我为什么我的数据集没有从数据集中的表中获取行的原因吗？

编辑：我看到在我的数据集中创建了一个名为“表”的新数据表，其列与我请求的列（progstate）相同，但该数据表的 rowCount 为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:55:52.407

```
EDITED *****

Try This :-

//My strongly typed dataset
localData = new LokalStorageDataSet();

//SqlCe-Connection
localConnection = new SqlCeConnection(@"Data Source=|DataDirectory|\TempStorage.sdf; Password='xyc';Persist Security Info=True");

SqlCeCommand command = new SqlCeCommand("SELECT * FROM progstates", localConnection);

localConnection.Open();

var dataReader = command.ExecuteReader();

localData.Load(dataReader,LoadOption.Upsert,localData.Tables[0]);

localConnection.Close(); 
```

或者您不能像这样使用 DataAdapter 执行此操作：-

```
localDataAdapter = new SqlCeDataAdapter();

SqlCeCommand command = new SqlCeCommand("SELECT * FROM progstates", localConnection);

localDataAdapter.SelectCommand = command;

localConnection.Open();

localDataAdapter.SelectCommand.ExecuteNonQuery();
localDataAdapter.Fill(localData.Tables[0]);

localConnection.Close(); 
```

# c# - 如何退一步返回函数？

> ID：13721363
> 
> 赞同：0
> 
> 时间：2012-12-05T10:42:41.247
> 
> 标签：c#

```
while (true)
{
    lock (groupslocker)
    {
        if (groups.Count == 0)
            break;
        else
            gr = groups.Dequeue();
    }
    string url = rand_url();
    int h = od_group_join(gr, url);
    if (h == -1)
    {
        // How to return to this line string url = rand_url(); ???
    }
    else
      .........
} 
```

如何返回`if (h == -1)`到线`string url = rand_url();`？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:45:01.903

听起来你想要一个循环：

```
int h;
string url;
do
{
   url = rand_url();
   h = od_group_join(gr, url);
} while (h == -1); 
```

我会重命名您的方法和变量，但是很难从当前名称中猜测出合理的含义。我*强烈*建议您使用更有意义的名称，并遵循 .NET 命名约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:45:28.673

```
int h;
string url;
do
{
    url = rand_url();
    h = od_group_join(gr, url);
}
while(h == -1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:54:32.063

您可以使用递归方法调用。将那部分代码移动到一个操作中（我将它命名为`SubOperation`）

```
static void SubOperation()
{
    string url = rand_url();
    int h = od_group_join(gr, url);
    if (h == -1)
    {
        // How to return to this line string url = rand_url(); ???
        SubOperation();
    }
    else
        .........
} 
```

然后修改原代码改为调用新的操作？

```
 while (true)
        {
            lock (groupslocker)
            {
                if (groups.Count == 0)
                    break;
                else
                    gr = groups.Dequeue();
            }
            SubOperation();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:45:47.413

```
while (true)
{
    lock (groupslocker)
    {
        if (groups.Count == 0)
            break;
        else
            gr = groups.Dequeue();
    }
    string url = rand_url();
    int h = od_group_join(gr, url);
    while (h == -1)
    {
        url = rand_url();
        h = od_group_join(gr, url);
    }

     .........
} 
```

# javascript - _.extend() 的 JavaScript 继承

> ID：13721367
> 
> 赞同：15
> 
> 时间：2012-12-05T10:42:58.403
> 
> 标签：javascript, oop

有什么区别

```
Employee.prototype = Object.create(Person.prototype); 
```

和

```
_.extend(Employee.prototype, Person.prototype); 
```

两者都给出了相似的结果（输出），但是下划线方法似乎将 Person.prototype 添加到 Employee.constructor.prototype 中，并且到处都是额外的东西，为什么？

纯JS

![在此处输入图像描述](../Images/e8637eeed16ad8335955b1e8f721323d.png)

下划线JS

![在此处输入图像描述](../Images/e21227c0401072c24ac7c0e9505c4456.png)

一个很好的副作用`_.extend`是我可以轻松地进行多重继承：似乎它也不会使原型链更长......

```
_.extend(Employee.prototype, Person.prototype);
_.extend(Employee.prototype, {
    doSomething: function() {
        return "hi ...";
    }
}); 
```

但 ...

![在此处输入图像描述](../Images/7de7f112b34c06813b1933cddc8a2a2a.png)

为什么有 2 个 sayHi 和 doSomething 函数？（实际上当我只做 1 扩展时它是一样的）。

**[http://jsfiddle.net/VMqSy/1/](http://jsfiddle.net/VMqSy/1/)**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T14:03:38.193

与`Employee.prototype = Object.create(Person.prototype);`您一起完全取代`Employee.prototype`.

但是随着`_.extend(Employee.prototype, Person.prototype);`您`Person.prototype`在`Employee.prototype`.

例如，

```
var a = {var1:1, var2:2};
var b = {var2:4, var3:3};
console.log(_.extend(a, b)); // {var1:1, var2:4, var3:3} 
```

如您所见，`a`它并没有被 完全取代，`b`它只是*由*.`b`

# entity-framework - 关于 ADO.NET Entity Framework 4 的几个基本问 题

> ID：13721371
> 
> 赞同：0
> 
> 时间：2012-12-05T10:43:09.270
> 
> 标签：entity-framework, entity-framework-4, ado.net

大约两年前，我确实在 ADO.NET Entity Framework v2 上工作过。我有淡淡的记忆。

顺便说一句，我碰巧在一个非常安全（为了委婉说法）的环境中工作，其中许多链接被阻止并且无能为力。它确实妨碍了学习和工作，不止一点。

因此，我必须依靠这个论坛来解决一些我必须重新开始的基本问题。这一次，我正在研究 Entity Framework 4。这是我的问题。

所有这些问题都与**EDM 生成的实体**有关，即**与 Code First**模型无关。

1）我的理解正确吗？我可以在 EDM 设计器生成的模型中重命名任何列名，并且没有任何中断。

2) 外键在生成的实体类中表示为导航属性。维护外键关系不需要特殊考虑。我记得在 EF 版本 1 中，您只有 ID 属性，并且在版本 2 中引入了导航 IQueryable/IEnumerable/EntityCollection/RelatedEnd 属性。我只需要知道我是否需要做任何事情来保留/维护外键关系和引用数据的完整性。我想我不需要。确认会很好。

3) 执行存储过程的所有可能方式是什么？我记得——在 Context.Database 对象上使用 ExecuteSQL 或其他东西的一种方法，另一种使用 EntityClient API 的方法，第三种是在 EDM 设计器的映射窗口中的 InsertCommand、SelectCommand 等事物中指定存储过程名称。它是否正确？

4) 你如何在实体的映射窗口中使用那些 SelectCommand 东西？您是否只提供存储过程或用户定义的 SQL 函数的名称？

5) 如何从表的子集创建实体？我是否只是从表中创建一个实体，然后从设计器中删除我不需要的列？如果**需要**的值（SQL 中为非空）不在我选择的子集中，会发生什么情况？

6) 如何从两个或多个表的查询或连接中创建表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:32:57.463

1）您可以在设计器中重命名列，并且不会中断（如果名称有效）

2) 导航属性指向相关实体。在 EF4 中添加了外键。外键属性基本上暴露了数据库处理关系的方式。但是，它们很有帮助，因为您不必为了更改关系而加载相关实体 - 您只需将键值更改为另一个实体的 id 并保存您的更改

3) 是的。您可以直接执行该过程 - 这适用于与 CUD（创建/更新/删除）操作无关的存储过程。您可以将 CUD 操作映射到存储过程，而不是让 EF 执行它为您的 CUD 操作提出的 SQL 语句。

4）我认为这有点超出范围 - 您可能可以找到很多带有图片的博客如何做到这一点。任何关于 EF 的像样的书也应该有一章（或两章）关于这方面的内容。如果遇到特定问题，请向 stackoverflow 发布问题。

5) 删除设计器中的属性，然后为 S-Space 定义提供默认值。我相信你不能和设计师一起做这件事。您需要右键单击 edmx 文件并使用 Xml 编辑器打开它并手动编辑它。另请参阅：[EF 中的问题，映射片段，无默认值且不可为空](https://stackoverflow.com/questions/12684972/issue-in-ef-mapping-fragment-no-default-value-and-is-not-nullable/12787013#12787013)

6）您可以在数据库中创建一个视图，也可以在 edmx 文件中使用 E-SQL 创建实体集（我认为这将是只读的），或者您可以使用实体拆分。这些中的每一个本身可能都是一个大话题，所以我认为你应该找到更多关于这些的信息，如果你有更具体的问题/问题，请回来

# python - 如何添加 wx.BoxSizer 边框？

> ID：13721373
> 
> 赞同：1
> 
> 时间：2012-12-05T10:43:17.167
> 
> 标签：python, wxpython

使用如下图所示的属性在某些小部件周围添加黑色边框的最简单方法是什么`wx.BoxSizer`？我目前正在学习如何使用 box sizer 在我的应用程序中实现。

![使用 Box Sizer 进行布局](../Images/f9fc1e0dd09eb65c9acaa18ae14f8c8b.png)

这是我的代码：

[http://pastebin.com/cVzqh86M](http://pastebin.com/cVzqh86M)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:02:47.890

查看小部件检查工具。它可以做大纲。你只需要了解它是如何做到的，然后复制代码。[你可以在wxPython wiki](https://wiki.wxpython.org/How%20to%20use%20Widget%20Inspection%20Tool%20-%20WIT%20%28Phoenix%29)上阅读它

该工具随 wxPython 一起提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-02T18:17:27.557

您可以通过传递边框参数为每个元素添加边框

**例如：**

```
label = wx.StaticText(self, label='Border')
hbox = wx.BoxSizer(wx.HORIZONTAL)
hbox.Add(hbox, proportion=2, flag=wx.EXPAND, border=10) 
```

# visual-studio-2010 - 在 Visual Studio 2010 插件中显示错误列表窗口

> ID：13721374
> 
> 赞同：1
> 
> 时间：2012-12-05T10:43:23.857
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-addins, build-events, error-list

我有 Win7 64 位、Visual Studio 2010，并且我为 Vs2010 开发了一个插件。

我尝试在错误列表 Windows VS 中显示消息。
我在 Addin 的 OnBuildProjConfigDone 构建事件中使用 ErrorListProvider

```
this._buildEvents.OnBuildProjConfigDone += new _dispBuildEvents_OnBuildProjConfigDoneEventHandler(_buildEvents_OnBuildProjConfigDone); 
```

我收到此错误 InvalidOperationException

> 必须安装服务“Microsoft.VisualStudio.Shell.Interop.IVsTaskList”才能使此功能正常工作。确保此服务可用。

**连接**

```
 public partial class Connect : IDTExtensibility2, IDTCommandTarget, System.Windows.Forms.IWin32Window, IOleCommandTarget 
```

**OnBuildProjConfigDone**

```
void _buildEvents_OnBuildProjConfigDone(string project, string projectConfig, string platform, string solutionConfig, bool success)
{

// Omitted
 if (!resul)
 {
                project.DTE.ExecuteCommand("Build.Cancel");

                var errorListHelper = new ErrorListHelper();
                ErrorListProvider errorProvider = errorListHelper.GetErrorListProvider();
                var newError = new ErrorTask();
                newError.ErrorCategory = TaskErrorCategory.Message;
                newError.Category = TaskCategory.BuildCompile;
                newError.Text = "Cualquier mensaje de error aqui";
                errorProvider.Tasks.Add(newError);
 }
} 
```

**错误列表助手**

```
public class ErrorListHelper : System.IServiceProvider
{
    public ErrorListProvider GetErrorListProvider()
    {
        ErrorListProvider provider = new ErrorListProvider(this);
        provider.ProviderName = "Provider";
        provider.ProviderGuid = System.Guid.NewGuid();
        return provider;
    }

    public object GetService(Type serviceType)
    {
        return Package.GetGlobalService(serviceType);
    }
} 
```

@JohnL 的建议：我在 GetService 方法中放置了一个断点，并且**Package.GetGlobalService 正在返回 null**。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:48:50.620

Ryan Molden (MSFT) 说：

> Package.GetGlobalService 依赖于已加载的至少一个 MPF 包（来自您所引用的特定 MPF 版本）。由于您自己是 AddIn 而不是 Package，因此您无法以任何方式保证这一点。
> 
> 您应该将类​​似 new ServiceProvider((Microsoft.VisualStudio.OLE.Interop.IServiceProvider))) 作为参数传递给 ErrorListProvide

Package.GetGlobalService 正在返回 null。

我在我的插件中使用此代码。我对其进行了测试并且没有出错，并且可以在 ErrorList Windows VS 中显示错误和警告。我会进行更多安全测试。

```
 public partial class Connect
    {
        ErrorListProvider _errorListProvider = null;

        void CreateErrorListProvider()
        {
            if (_errorListProvider == null)
            {
                System.IServiceProvider serviceProvider = new ServiceProvider(_applicationObject as Microsoft.VisualStudio.OLE.Interop.IServiceProvider);
                _errorListProvider = new ErrorListProvider(serviceProvider);
                _errorListProvider.ProviderName = "custom Errors";
                _errorListProvider.ProviderGuid = new Guid("xxxxxxxxxxxxxx");

            }
        } 
```

# forms - Yii中如何用一个表格连接两个表格

> ID：13721377
> 
> 赞同：2
> 
> 时间：2012-12-05T10:43:28.313
> 
> 标签：forms, yii, model, yii-relations

我最近被介绍到 Yii 框架中，目前正在为我的公司开发一个 Web 应用程序系统。但是我注意到，在创建模型以提供与相应表的连接时，它一次只允许选择一个关系。但是，我需要用一个表单连接来自同一个数据库的两个单独的表。

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T13:03:58.663

在模型中，您可以看到以下功能，

```
 /**
 * @return array relational rules.
 */
public function relations()
{
    return array(

    );
} 
```

在此您可以添加关系。喜欢

```
'user' => array(self::BELONGS_TO, 'User', 'user_id'),
'comments' => array(self::HAS_MANY, 'Comments', 'blog_post_id'), 
```

ETC。，

如果您的数据库引擎在 Innodb 中并且表具有外键关系，则在创建模型时将自动生成关系。

有关更多信息，[**请阅读此**](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)

您可以使用任意数量的关系。

==============================================

在二读之后，我想你是在问关于将两个模型的对象变成一种形式？为此，您可以在控制器中生成每个模型的对象，并将这些对象通过`render`或`renderPartial`函数传递给查看

例如，

```
$this->render('admin',array(
            'model'=>$model,
                    'model2'=>$model2,
        )); 
```

并在视图内部为各个字段使用模型和模型2

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'sample-form',
    'enableAjaxValidation'=>false,
)); ?>

.....

        <?php echo $form->labelEx($model,'column'); ?>
        <?php echo $form->textField($model,'column'); ?>
        <?php echo $form->error($model,'column'); ?>

        <?php echo $form->labelEx($model2,'column'); ?>
        <?php echo $form->textField($model2,'column'); ?>
        <?php echo $form->error($model2,'column'); ?>

.... 
```

在控制器功能内部使用类似下面的东西（比如保存数据）

```
$model->attributes=$_POST['ModelOnesName'];
$valid  =   $model->validate();
$model2->attributes =   $_POST['ModelTwosName'];
$valid  =   $model2->validate() && $valid; //if need validation checks
if($valid)
{
   $model->save();
   $model2->save();
} 
```

# java - 为什么不推荐使用 JButton.enable？

> ID：13721378
> 
> 赞同：7
> 
> 时间：2012-12-05T10:43:39.107
> 
> 标签：java, swing, jbutton, deprecated

为什么不推荐使用 Button.enable？我需要使用我的按钮的方法，但它已被弃用，所以它没有效果。

我该如何解决？还有其他选择吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T10:47:04.357

从[JDK 文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#enable%28%29)：

> 已弃用。从 JDK 版本 1.1 开始，由 java.awt.Component.setEnabled(boolean) 取代

`setEnabled(true)`所以改为调用该方法。

# iphone - 具有大型 uint8_t[ ] 数组的 iOS 问题

> ID：13721380
> 
> 赞同：0
> 
> 时间：2012-12-05T10:43:43.353
> 
> 标签：iphone, objective-c, ios, xcode

实际上，我收到了长达 35 mb 的巨大字节数组。此字节数组是 pdf 文档的字节。我从 tcp 套接字输入流中接收到这个。
我正在使用的代码是

```
+ (NSString *) recvToFile:(NSString *)_fileName: (long)_sz {

@try {
    uint8_t t[_sz];
    NSMutableData *data = nil;
    NSMutableData *fileData = [[NSMutableData alloc] init];
        long _pos = 0;
        NSString *_fullPath = [Misc createTempFile:_fileName];
        while (_sz > _pos) {
            long _c = [m_sin read:t maxLength:_sz];
            _pos += _c;
            data = [NSData dataWithBytes:t length:_c];
            if([Misc checkTempFileExists:_fileName]==nil)
                [[NSFileManager defaultManager] createFileAtPath:_fullPath contents:nil attributes:nil];
            [fileData appendData:data];
        }
    [fileData writeToFile:_fullPath atomically:YES];
    NSDictionary *attr = [[NSFileManager defaultManager] attributesOfItemAtPath:_fullPath error:nil];
    NSLog(@"ATTR - %@",attr);

    long long length = [[attr valueForKey:@"NSFileSize"] intValue];
    if (length >= _sz)
        return (_fullPath);
}
@catch (NSException * e) {
}
return (nil);
} 
```

问题是应用程序崩溃在第一行给出“EXC_BAD_ACCESS（code=2 address=0x2461ae4）”错误，即

```
+(NSString *) recvToFile:(NSString *)_fileName: (long)_sz 
```

当我明确将 uint8_t 数组的大小声明为 800000 为 uint8_t[800000]; 然后它可以在我的 iOS 模拟器中运行，但不能在我的 iPad 上运行

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:46:08.027

这条线在我看来是错误的：

*   (NSString *) recvToFile:(NSString *)_fileName: (long)_sz {

你应该有类似的东西： + (ReturnType *) methodname:(Type) _var1 secondArg:(type) _var2

所以也许你想要： + (NSString *) recvToFile:(NSString *)_fileName size:(long)_sz

我认为你遇到崩溃的原因是你试图读取一个名为 _sz 的变量。通过将其更改为固定值，您不会在此处阅读它，并且奇迹般地您的其余代码正在运行。

查看您的代码，我认为您可能需要复习一些客观 C 语法的基础知识。也许您更熟悉另一种语言？我的 iOS 同事告诉我，在目标 C 中很少使用 try 和 catch，而您使用它们的方式可能会产生各种问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:28:20.063

您很可能会用完堆栈空间。即使您在堆上分配内存，对于 iOS 设备来说 35MB 也是相当多的。您应该将数据写入文件而不是内存缓冲区。

**更新：**

所以看起来这段代码已经可以将数据分块并将其分成小块写入文件。你所要做的就是改变这个：

```
uint8_t t[_sz]; 
```

对于这样的事情：

```
uint8_t t[CHUNK_SIZE]; 
```

哪里`CHUNK_SIZE`可以是一些合理的东西，比如几 KB。

# php - 如何获取联系人的电子邮件地址？

> ID：13721389
> 
> 赞同：0
> 
> 时间：2012-12-05T10:44:01.667
> 
> 标签：php, oauth-2.0

我正在使用来自 Google OAuth API 的联系人示例。我没有收到联系人的电子邮件地址。我需要联系人的电子邮件地址来发送邀请请求。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:00:00.570

您需要请求访问范围：[https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)。获得许可后，您将授权请求发送至：[https](https://www.googleapis.com/oauth2/v2/userinfo) ://www.googleapis.com/oauth2/v2/userinfo 。您将收到包含电子邮件地址的回复：

```
{
 "email": "<myname>@gmail.com",
 "verified_email": true
} 
```

注意：如果您想访问配置文件的其余部分，您需要添加到范围：[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)。然后相同的请求将返回带有电子邮件地址的完整配置文件：

```
{
 "id": "<myID>",
 "email": "<myemail>@gmail.com",
 "verified_email": true,
 "name": "<my name>",
 "given_name": "<first>",
 "family_name": "<last>",
 "link": "https://plus.google.com/<myID>",
 "picture": "https://lh4.googleusercontent.com/<pic link>/photo.jpg",
 "gender": "male",
 "birthday": "<YYYY-MM-DD>",
 "locale": "en-US"
} 
```

# azure - 如何向客户公开我的 SQL Azure 数据库子集以进行报告？

> ID：13721390
> 
> 赞同：1
> 
> 时间：2012-12-05T10:44:01.780
> 
> 标签：azure, reporting-services, azure-sql-database, azure-acs

我正在尝试确定 Azure SQL 报告是否可用于为我们在 Azure 中托管的具有 Azure SQL 数据库后端的应用程序提供报告。

理想情况下，我们希望能够为用户提供创建自己的报告的能力。为此，我们需要向他们公开适用于与他们关联的组织的数据子集。

用户身份来自通过 Azure ACS 的联合提供商。

我可以做些什么来自定义公开的数据并仅提供允许用户访问的子集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:01:03.160

我不认为这是您可以在 Reporting Services 中实现的。

我在使用标准 Windows 用户时遇到过类似的情况，我们在连接到某个映射表（例如公司和用户）的表上创建了视图，并使用 SUSER_SNAME() 返回当前用户登录名。用户只有通过视图访问数据的权限，并且他们的登录名充当了行的过滤器。

# git - 当更改提交给子模块时如何触发詹金斯的构建？

> ID：13721392
> 
> 赞同：11
> 
> 时间：2012-12-05T10:44:16.520
> 
> 标签：git, triggers, jenkins

我们有一个带有外部子模块的 git 存储库。当子模块发生变化时，我们必须触发构建。您能否建议我们如何使用您的 xtrigger 插件轮询子模块的更改。使用shell脚本或监视文件或其他东西更好吗？

* * *

有关我们构建过程的更多信息。第1步。使用子模块步骤 #2 克隆根存储库。为每个子模块步骤#2.1（在子模块中）执行作业。切换到正确的分支（例如，主）步骤＃2.1（在子模块中）。拉取子模块的最新资源

现在，如果有人提交到根存储库，jenkins 会为应用程序启动构建，但是如果有人提交到任何子模块存储库，jenkins 不会启动任何东西

我们需要第二种情况的解决方案。在最好的情况下，它应该通过标准的 jenkins 功能或通过开源插件来完成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T13:28:00.273

当 git 存储库有一个子模块时，它指向该子模块中的特定提交（比如 commit `A`）。因此，即使子模块发生更改并且现在已将 commit`B`作为`A`顶级存储库的子模块仍然指向 commit `A`。您必须显式更新顶级存储库以指向`B`子模块中的提交，它不会自动发生。

鉴于此，您的问题的答案是，只需更新您的顶级存储库以指向新的 commit `B`。这将导致您的存储库发生更改，这应该会像往常一样触发 Jenkins 构建，这将从`B`子模块中获取新的提交。

--

鉴于额外的信息，我将添加一个监视子模块存储库的 Jenkins 作业。当子模块更改时，您将执行任何特定于子模块的测试，然后作为构建后步骤触发主存储库作业。

# asp-classic - Internet Explorer 10 FCKEditor 问题

> ID：13721397
> 
> 赞同：0
> 
> 时间：2012-12-05T10:44:30.983
> 
> 标签：asp-classic, ckeditor, fckeditor, internet-explorer-10

你好 Stackoverflow 社区。

自 Windows 8 和 Internet Explorer 10 发布以来，FCKEditor 拒绝与 IE10 一起使用。有了最新的补丁，Firefox 17 和 Chrome 就可以正常工作了。

我知道 FCKEditor 已经过时了，所以我正在考虑迁移到 CKeditor，但似乎它对经典 asp 网页的实现也不适用于 IE10。

任何有关如何解决问题的建议或任何其他编辑器（具有上述两个编辑器的功能）将不胜感激（仅限经典 asp）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:43:55.400

CKEditor 应该适用于 IE10。

也许目前它存在一些问题（我前段时间对其进行了简要测试），但鉴于它是受支持的版本（与 FCKeditor 的状态相反），如果您提交报告问题的错误，它们最终应该被修复。

# php - Symfony 会话上次请求时间

> ID：13721399
> 
> 赞同：0
> 
> 时间：2012-12-05T10:44:36.410
> 
> 标签：php, symfony-1.4

是否可以进行操作（更具体地说是“ajax/heartbeat”）不更新会话的最后请求时间？

它用于获取通知等，因此它不应该更新会话超时，否则它们永远不会过期。

如果用户在页面上做事（onmousemove）我设置`update=true`其他`update=false`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:14:29.417

那么，你将不得不挂钩到 Symfony 的用户库。

`lastRequest`在 User lib 初始化期间更新（即：[inside`sfBasicSecurityUser`](http://trac.symfony-project.org/browser/branches/1.4/lib/user/sfBasicSecurityUser.class.php#L230)）。

在您的`app/[appname]/lib/myUser.class.php`, 中扩展此`initialize`功能以不设置请求时间。像这样丑陋的东西：

```
public function initialize(sfEventDispatcher $dispatcher, sfStorage $storage, $options = array())
{
  $lastRequest = $this->getLastRequestTime();

  parent::initialize($dispatcher, $storage, $options);

  if (condition)
  {
    $this->lastRequest = $lastRequest;
  }
} 
```

您唯一需要找到的是，如何从 myUser 库中捕获模块/操作，然后将其放入`condition`.

# download - 如何避免使用 wget 下载链接

> ID：13721402
> 
> 赞同：1
> 
> 时间：2012-12-05T10:44:39.640
> 
> 标签：download, wget

我正在尝试下载以下站点[http://computerone.altervista.org](http://computerone.altervista.org)的某些页面，仅用于测试...</p>

我的目标是只下载匹配以下模式“ `*JavaScript*`”和“ `*index*`”的页面。

实际上，如果我尝试以下选项

```
wget \
-A "*Javascript*, *index*" \
--exclude-domains http://computerone.altervista.org/rss-articles/ \
-e robots=off \
--mirror -E -k -p -np -nc --convert-links  \
--wait=5 -c  \
http://computerone.altervista.org 
```

它的工作原理期望它也尝试下载`http://computerone.altervista.org/rss-articles/`。

我的问题是：

1.  为什么它试图下载`http://computerone.altervista.org/rss-articles/`页面？
2.  我应该如何避免它？我尝试`--exclude-domains http://computerone.altervista.org/rss-articles/`了选项，但它尝试下载它

PS：
查看我得到的源页面：

```
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="rss-articles/" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:17:38.750

`wget -p`下载所有页面要求：

> 男人 wget：
> 
> 为了结束这个话题，值得知道 Wget 的外部文档链接的想法是在`<A>`标签、 `<AREA>`标签或`<LINK>`除`<LINK REL="stylesheet">`.

排除`rss-articles`使用`-X`或`--exclude-directories`

`wget -A "*Javascript*, *index*" -X "rss-articles" -e robots=off --mirror -E -k -p -np -nc -c http://computerone.altervista.org`

# c# - 如何在 GridView 中绑定复选框列表

> ID：13721409
> 
> 赞同：1
> 
> 时间：2012-12-05T10:45:12.247
> 
> 标签：c#, asp.net, telerik-grid

我有**GridView**有一列是**CheckBoxList(Mon, Tues, Wed, Thur, Fri, Sat, Sun)**

选定周的数据：

*   “1101000”的意思是（周一、周二、周四被选中）
*   “1000000”均值（选择周一）
*   “0100000”的意思（选择周二）

下面是用来标识所选项目的

```
 Boolean isMonday = false;
            Boolean isTuesday = false;
            Boolean isWednesday = false;
            Boolean isThursday = false;
            Boolean isFriday = false;
            Boolean isSaturday = false;
            Boolean isSunday = false;

            if (alertDayInt >= 1000000)
            {
                isMonday = true;
                alertDayInt -= 1000000;
            }
            else if (alertDayInt >= 100000)
            {
                isTuesday = true;
                alertDayInt -= 100000;
            }
            else if (alertDayInt >= 10000)
            {
                isWednesday = true;
                alertDayInt -= 10000;
            }
            else if (alertDayInt >= 1000)
            {
                isThursday = true;
                alertDayInt -= 1000;
            }
            else if (alertDayInt >= 100)
            {
                isFriday = true;
                alertDayInt -= 100;
            }
            else if (alertDayInt >= 10)
            {
                isSaturday = true;
                alertDayInt -= 10;
            }
            else if (alertDayInt >= 1)
            {
                isSunday = true;
                alertDayInt -= 1;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:11:23.463

假设这些字符串是您想要转换为`CheckBoxList`选择的可能输入数据。使用 Linq：

```
var sampleData = new[]{ "110100", "100000", "010000" };
IEnumerable<IEnumerable<DayOfWeek>> selectedDays = sampleData
            .Select(str => 
                str.Select((c, i) => new { Selected = c == '1', Value = i+1 })
                   .Where(x => x.Selected)
                   .Select(x => (DayOfWeek)x.Value)); 
```

现在您已经拥有了设置`Selected`每个属性所需的`ListItem`一切`CheckBoxList`：

```
var firstSample = selectedDays.First();
foreach(ListItem item in CheckBoxList1.Items)
    item.Selected = firstSample.Any(day => day.ToString() == item.Text); 
```

假设 ListItem 的 Text 是英文日名。使用枚举的`int`值可能会更好：[`DayOfWeek`](http://msdn.microsoft.com/en-us/library/vstudio/system.dayofweek.aspx)`Value`

`firstSample.Any(day => (int)day == int.Parse(item.Value));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:07:26.357

```
List<string> selectedItemsDays = new List<string> { };
            if (alertDayInt >= 1000000)
            {
                selectedItemsDays.Add("Mon");
                alertDayInt -= 1000000;
            }
            if (alertDayInt >= 100000)
            {
                selectedItemsDays.Add("Tue");
                alertDayInt -= 100000;
            }
            if (alertDayInt >= 10000)
            {
                selectedItemsDays.Add("Wed");
                alertDayInt -= 10000;
            }
            if (alertDayInt >= 1000)
            {
                selectedItemsDays.Add("Thu");
                alertDayInt -= 1000;
            }
            if (alertDayInt >= 100)
            {
                selectedItemsDays.Add("Fri");
                alertDayInt -= 100;
            }
            if (alertDayInt >= 10)
            {
                selectedItemsDays.Add("Sat");
                alertDayInt -= 10;
            }
            if (alertDayInt >= 1)
            {
                selectedItemsDays.Add("Sun");
                alertDayInt -= 1;
            } 
```

# jasper-reports - ireport ：将变量添加到另一个变量中

> ID：13721410
> 
> 赞同：1
> 
> 时间：2012-12-05T10:45:18.500
> 
> 标签：jasper-reports, ireport

我有许多来自子报告的变量，定义如下：

```
variable class : integer
calculation : system
reset type : none
increment type : none 
```

我想对其中一些变量进行求和，例如：`$V{nb1}.plus($V{nb2}).plus($V{nb8})` 如果我在文本字段中执行此操作效果很好，但如果我想将其放入变量中（我们称之为 sum1）则不行。

```
property of the variable :
variable class : integer
calculation : system
reset type : report
increment type : none 
```

像这样，我得到了初始值表达式。如果我将重置类型设置为无，我将获得*null*。

包含我的变量 sum1 的文本字段位于“评估时间：报告”

所以，我的变量 sum1 是在 之前计算的`nb1`，`nb2`并且`nb8`是。我不知道接下来该怎么办...

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:07:29.683

`system`只有当您打算通过 scriptlet 直接设置变量值时，才应使用计算类型。在这种情况下，报表引擎不会计算变量表达式，这就是您获取*null*的原因。

您应该将计算类型更改为`nothing`，这将通过简单地评估变量表达式来设置值，仅此而已。

# php - 使用php计算时差？

> ID：13721414
> 
> 赞同：0
> 
> 时间：2012-12-05T10:45:26.727
> 
> 标签：php

我发现使用 PHP 计算时差很困难。如何计算`HH:MM:SS`两个不同日期之间格式（小时：分钟：秒）的时间差？

例如，输入是：

```
$start_time : 19:30  
$end_time : 7:30,  
$当前时间 = 21:30  

```

我必须找出当前时间与给定的开始时间和结束时间匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:48:00.783

将时间转换为时间戳值，它是以秒为单位的整数值。然后，您可以轻松地减去它们以获得以秒为单位的差异。之后，将其转换回小时和分钟非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:54:46.103

```
$iStart = strtotime( '00:00:00' );
$iEnd = strtotime( '12:00:00' );

$iCurrent = strtotime( date('H:i:s') );

if( $iCurrent > $iStart && $iCurrent < $iEnd ) {
  echo "active!";
} else {
 echo "not active";
} 
```

这只会尊重时间（它将每天激活一次）。如果您需要特定日期，您可以使用：

```
$iStart = strtotime( '2012-12-01 00:00:00' );
$iEnd = strtotime( '2012-12-31 12:00:00' );

$iCurrent = time();

if( $iCurrent > $iStart && $iCurrent < $iEnd ) {
  echo "active!";
} else {
 echo "not active";
} 
```

# c# - asp中继器复选框状态保留

> ID：13721421
> 
> 赞同：2
> 
> 时间：2012-12-05T10:45:56.490
> 
> 标签：c#, asp.net, checkbox, repeater

我有一个中继器控件，每个项目/行都有一个 asp:Checkbox 控件和旁边的按钮。

我的问题是，如果我选中一个给定的复选框并单击它旁边的按钮 [在回发之前]，那么之前选中的复选框的状态（选中）将被保留 [在回发之后]。但我不希望它被保留，所以我对所有复选框做了以下操作：

1.  禁用复选框（和中继器）的视图状态（EnableViewState='false'）
2.  定义属性 Checked="false"

> ```
> <td>
> <asp:CheckBox ID="chk_chooseTOL" CssClass="chk_chooseTOL" runat="server" Checked="false" EnableViewState="false" />
> </td> 
> ```

我在调试模式下转发器的 ItemDataBound 事件期间从代码隐藏中查看了复选框的状态，这很好，没有选中任何复选框，但最后显示页面并且之前选中的复选框仍然存在检查。我不明白为什么。

你知道如何不保留我的复选框的状态吗？（我需要复选框成为服务器端控件，以便在特定条件下的 ItemDataBound 事件期间禁用它们）

谢谢

更多代码：

```
<asp:Repeater ID="rpt_CA" runat="server" DataSourceID="TLDataSource" EnableViewState="false" OnItemDataBound="rpt_CA_OnItemDataBound" ClientIDMode="Static" >
    <HeaderTemplate>
        <table class="ca_table persist-area" id="rpt_CA">
            <thead>
            <tr class="tl-header persist-header">
                <th>Consultant</th>
                <th>Mode</th> 
                <th></th> 
            </tr>
            </thead>
            <tbody>
    </HeaderTemplate>
    <ItemTemplate>
    <tr>
        <td>
        <asp:Label runat="server" Text='<%# Eval("EMPLOYEES.FULLNAME") + " (" + Eval("ID_EMPLOYEE") + ")"  %>' />
        </td>
        <td>
        <asp:Button runat="server" Text="Gen" EnableViewState="false" />
        </td>
        <td>
        <asp:CheckBox ID="chk_chooseTOL" CssClass="chk_chooseTOL" runat="server" Checked="false" EnableViewState="false" />
        </td>
    </tr>
    </ItemTemplate>
    <FooterTemplate>
        </tbody>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

.

```
protected void rpt_CA_OnItemDataBound(object Sender, RepeaterItemEventArgs Args) {
    if (Args.Item.ItemType == ListItemType.Item || Args.Item.ItemType == ListItemType.AlternatingItem)
    {   TURNOVER_LINES currentTL = (TURNOVER_LINES)Args.Item.DataItem;  RepeaterItem ri = Args.Item;

             CheckBox chk_chooseTOL = Args.Item.FindControl("chk_chooseTOL") as CheckBox;
             if(currentTL.IS_ALREADY_GEN)
             {
                 chk_chooseTOL.Enabled = false;
             }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T07:36:13.250

把 Checked="false" 丢掉状态是不够的。该值将被表单中的选中状态覆盖。为防止这种情况发生，您需要在代码隐藏中、page_load 事件中或之后设置 checked=false。

# ruby-on-rails-3 - 导轨：$变量= HTML 类型=“文本”

> ID：13721428
> 
> 赞同：0
> 
> 时间：2012-12-05T10:46:15.583
> 
> 标签：ruby-on-rails-3, variables, global-variables, forms

我有另一个问题。我相信回答你真的很容易，但我只是不知道该怎么做。我正在使用 Ruby on Rails 3.2.9。在一个视图中，我想定义一些可以正常工作的变量，如下所示：

```
<p>
  <b>Artikelnummer:</b>
  <%= @artikel.artikelnummer %>
</p>
  <%= $aktArtNr = @artikel.artikelnummer %> 
```

但是现在我想在一个变量中保存一些用户输入（这不应该导致控制器操作或其他东西） - 我不知道该怎么做。

Pe 我想保存用户在这个表单中输入的“东西”

```
<form name="Menge">
    <input type="text">
</form> 
```

在一个名为的变量中`$aktMenge`

这一定很容易，但我已经尝试了很长时间没有成功（但头痛......）

PS 在我调用一个控制器动作之后，它应该对变量做一些事情......

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:05:07.023

我很难看到你想要做什么。我的建议是玩一下 Rails 脚手架，这样你就可以看到它是如何从控制器到视图的。例如打开一个终端并尝试（可能在一个新项目中）：

```
rails generate scaffold artikel name:string content:text ref_number:integer
rake db:migrate 
```

然后在浏览器中查看“localhost:[port_no]/artikels”，您应该能够通过 Web 界面创建、更新和删除记录。然后去看看生成的代码，看看你是否可以将它与你正在做的事情联系起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:05:13.613

再次为对所有这些 RESTful 内容感到陌生而感到抱歉。我意识到，由于我真的不知道rails到底能做什么，我没有回答正确的问题......

但这解决了我的问题：

[Rails 从请求中获取单个值](https://stackoverflow.com/questions/13752913/rails-getting-single-values-from-request)

# c# - 如何将此 linq 查询转换为 lambda？

> ID：13721431
> 
> 赞同：3
> 
> 时间：2012-12-05T10:46:22.577
> 
> 标签：c#, linq, lambda

我有这个查询：

```
return (from r in this.Requests where r.Status == "Authorised" from i in r.Items select i).Sum(i => i.Value); 
```

我尝试将它转换为 lambda，因为我现在更喜欢这样，所以我这样做了：

`var sum = Requests.Where(x=>x.Status == "Authorised").Select(x=>x.Items).Sum(x=>x.Value);`--> 这里我没有`Value`项目，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:48:57.663

你需要`SelectMany`而不是`Select`. 您的查询基本上相当于：

```
return this.Requests
           .Where(r => r.Status == "Authorised")
           .SelectMany(r => r.Items)
           .Sum(i => i.Value); 
```

请注意，您的原始查询在多行上也会更清晰......

# javascript - HTML5 History API 和离开页面（到同一个域）

> ID：13721433
> 
> 赞同：0
> 
> 时间：2012-12-05T10:46:38.160
> 
> 标签：javascript, html, history

借助现场媒体播放器，我们使用 History API 和 XHR 来允许在网站中导航而不会导致页面刷新（即导致媒体停止）。

这在以下情况下工作得很好：

A. 用户更改地址栏中的 URL。

B. 用户选择一个加书签的页面。

C. 用户点击请求另一个页面的 Facebook 小部件。

有没有办法在不导致页面刷新的情况下拦截更改的 URL 并进行处理，当然我们这里说的是同域的 URL。

*window.onbeforeunload*事件是否发生了变化，这意味着我们可以在不通知用户的情况下取消请假并获取新 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:39:18.917

`window.onbeforeunload`没有改变。而且我认为您尝试做的事情是不可能的，因为这将允许恶意网页阻止用户离开页面（除非他会关闭浏览器/选项卡）。

# c# - 在 C# 中继承表单

> ID：13721434
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:46:41.860
> 
> 标签：c#, winforms, inheritance

我有两个表格 Form1 和 Form2。Form2 继承自 Form1。

我需要做的是让 Form2 与 Form 1 相同，并为其添加一些功能、其他标签和文本框。然而，这给我带来了问题。

1.  我无法从 Form2 访问 Form1 的功能

2.  在创建表单 2 之前，我从表单 1 中删除了某些功能，它们仍然在我的表单 2 中继承。我无法从那里删除它们，我不知道它们是如何保留在那里的！

3.  我也不知道为什么，从我创建这个继承开始，Visual Studio 每次都停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:51:16.267

您无法从 Form2 访问 Form1 的功能，因为设计器生成具有私有访问修饰符的成员。要访问，您必须为成员设置受保护的访问修饰符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:58:47.797

1.  您看不到 Form 1 的私有功能，也无法更改控件的属性驻留在布局面板中，如控件。

2.  可能是设计师生成需要重新生成的代码。

3.  打开另一个VS并附加到您的项目在其中打开的那个，然后按快捷键++`Ctrl`并检查所有“抛出”部分。然后打开您的表单并调试您的异常。`Alt``E`

# javascript - 代码内部变量问题

> ID：13721440
> 
> 赞同：0
> 
> 时间：2012-12-05T10:47:09.347
> 
> 标签：javascript, jquery

我有一个如下所述的代码，请问如何使用以下代码获取 (getData) 的值：

```
var instanceArray = myGraph.getInstances(component) 
```

我想`myGraph.getInstances(component).getData`会做，但它失败了

```
this.getInstances = function(component) {
    var getData = {};
        $.ajax({
            url: "/rpc/alerts2/commonObj_rpc.cfc?method=getInstances",
            data: {"component":component},
            type: "POST",
            async: true,
            success: function(data) {
                getData = $.parseJSON(data);
                console.log("hey");
                var $render_component_instance = $("#instances").empty();
                $("#instances").append($("<option />").val("all").text("All Instances (Summed)"));
                $.each(getData, function (cIndex, cItem){
                    var $instance = $("<option />").val(cItem.si_instance).text(cItem.si_label.toUpperCase());
                    $render_component_instance.append($instance);
                })
                $("#instances").multiselect("refresh");
            }
        });
};` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:49:54.633

你不能，get是异步的。`getInstances`在 GET 完成之前返回，因此无法`getInstances`返回数据。（请参阅下面的进一步说明。）

你有（至少）三个选项：

1.  使用回调

2.  返回一个稍后将填充的空白对象，并让需要它的代码定期轮询它

3.  使用同步获取（不是一个好主意）

### 1.使用回调

你可以做的是接受一个回调，然后在数据到达时调用它：

```
this.getInstances = function(component, callback) {

    $.ajax({
        url: "/rpc/alerts2/commonObj_rpc.cfc?method=getInstances",
        data: {"component":component},
        type: "POST",
        async: true,
        success: function(data) {
            var getData = $.parseJSON(data);
            console.log("hey");
            var $render_component_instance = $("#instances").empty();
            $("#instances").append($("<option />").val("all").text("All Instances (Summed)"));
            $.each(getData, function (cIndex, cItem){
                var $instance = $("<option />").val(cItem.si_instance).text(cItem.si_label.toUpperCase());
                $render_component_instance.append($instance);
            })
            $("#instances").multiselect("refresh");
            callback(getData);
        }
    });
}; 
```

并这样称呼它：

```
myGraph.getInstances(component, function(data) {
    // Use the data here
}); 
```

### 2\. 返回一个稍后会填充的空白对象

或者，您可以返回一个对象，该对象一开始是空白的，但稍后您会将数据作为属性添加到该对象。根据您在下面的评论，这可能最接近您正在寻找的内容。基本上，没有办法从函数外部访问函数的局部变量，但是您*可以*返回一个对象，然后稍后向它添加一个属性。

```
this.getInstances = function(component) {

    var obj = {};

    $.ajax({
        url: "/rpc/alerts2/commonObj_rpc.cfc?method=getInstances",
        data: {"component":component},
        type: "POST",
        async: false,    // <==== Note the change
        success: function(data) {
            var getData = $.parseJSON(data);
            console.log("hey");
            var $render_component_instance = $("#instances").empty();
            $("#instances").append($("<option />").val("all").text("All Instances (Summed)"));
            $.each(getData, function (cIndex, cItem){
                var $instance = $("<option />").val(cItem.si_instance).text(cItem.si_label.toUpperCase());
                $render_component_instance.append($instance);
            })
            $("#instances").multiselect("refresh");

            // Make the data available on the object
            obj.getData = getData;
        }
    });

    return obj; // Will be empty when we return it
}; 
```

并这样称呼它：

```
var obj = myGraph.getInstances(component);

// ...later...
if (obj.getData) {
    // We have the data, use it
}
else {
    // We still don't have the data
} 
```

### 3.使用同步get

我**不**建议这样做，但您可以使呼叫同步。请注意，同步 ajax 请求将在 jQuery 的未来版本中消失。但只是为了完整性：

```
this.getInstances = function(component) {

    var getData;    
    $.ajax({
        url: "/rpc/alerts2/commonObj_rpc.cfc?method=getInstances",
        data: {"component":component},
        type: "POST",
        async: false,    // <==== Note the change
        success: function(data) {
            var getData = $.parseJSON(data);
            console.log("hey");
            var $render_component_instance = $("#instances").empty();
            $("#instances").append($("<option />").val("all").text("All Instances (Summed)"));
            $.each(getData, function (cIndex, cItem){
                var $instance = $("<option />").val(cItem.si_instance).text(cItem.si_label.toUpperCase());
                $render_component_instance.append($instance);
            })
            $("#instances").multiselect("refresh");
        }
    });

    return getData;
}; 
```

并这样称呼它：

```
var getData = myGraph.getInstances(component); 
```

但同样，我不提倡这样做。同步 ajax 调用会锁定浏览器的 UI，导致用户体验不佳。

# perl - 在perl中将整数转换为十六进制

> ID：13721446
> 
> 赞同：0
> 
> 时间：2012-12-05T10:47:31.953
> 
> 标签：perl

我有一个整数，比如 6677889。我想在我的 perl 脚本中将此值用作 0x66778899 的十六进制值。如何使用它？使用 sprintf，给出它的直接十六进制值。我不希望这种情况发生。如何去吧？请有任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T10:52:02.500

你的意思不是这个？

```
% perl -e "print hex 6677889"
107444361 
```

# javascript - 资源解释为脚本，但使用 MIME 类型 text/x-js 传输

> ID：13721454
> 
> 赞同：1
> 
> 时间：2012-12-05T10:47:48.037
> 
> 标签：javascript, jquery, mime-types, flowplayer

我仅在远程服务器上收到此警告

> 资源解释为脚本，但使用 MIME 类型 text/x-js 传输

我正在使用 wamp 2.1 并且工作正常

如果需要解决此问题，我可能无法使用远程视频，因为它是共享服务器

标题：

```
<script type="text/javascript" src="../flowplayer/flowplayer-3.2.11.min.js"></script>
<script type="text/javascript" src="../jquery-1.7.1.min.js" charset="utf-8"></script>
<script type="text/javascript" src="../flowplayer/flowplayer.playlist-3.2.10.min.js"></script> 
```

（我只是为了示例更改了路径）

顺序很重要（这里的 jquery 之前的 flowplayer）？还是json结构可能是问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:50:43.637

这听起来像是警告而不是错误。它是否阻止脚本执行？
该错误绝对是服务器配置错误，因此如果您无法找人修复服务器，您将不得不忍受警告。

# javascript - 升级到 jQuery 1.8.2 后验证异常

> ID：13721455
> 
> 赞同：1
> 
> 时间：2012-12-05T10:47:50.893
> 
> 标签：javascript, jquery, jquery-plugins, jquery-validate

升级到 jQuery 的 1.8.2 版本后，我的验证插件（最新版本 1.10.0）开始给我异常：

> 错误：语法错误，无法识别的表达式：div class="warningZone" jquery.js（第 4679 行）

这是我的javascript：

```
function validateAll() {
    $("#servicesForm").validate({
        errorLabelContainer: "#servicesErrors",
        wrapper: "div class=\"warningZone\"",
        rules: {
            mainTransport: { mMainTransportReq: true, mMainTransportNotReq: true },
            stay: { mStayReq: true }
        },
        messages: {
            mainTransport: {
                mMainTransportReq: $("#servicesMainTransportReq").text(),
                mMainTransportNotReq: $("#servicesMainTransportNotReq").text()
            },
            stay: { mStayReq: $("#servicesStayReq").text() }
        }
    });

    $("#servicesForm").valid();
    validatePeriods();
    validateServices();
} 
```

为什么我的班级`warningZone`开始抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:55:51.767

如果您删除上面的`wrapper`and`errorLabelContainer`选项，您可以设置默认值并覆盖该`showErrors`函数：

```
$.validator.setDefaults({
    showErrors: function(errorMap, errorList) {
        if (errorList.length < 1) {
            // clear the error if validation succeeded
            $('div.warningZone').remove();
            return;
        }
        $.each(errorList, function(index, error) {
            $('div.warningZone',"#servicesErrors").remove();
            $('#servicesErrors').append(
                $('<div/>')
                    .addClass('warningZone')
                    .append(error.message)
            );
        });
    }
}); 
```

# android - 使用带有 Android 的 Phonegap 闪烁背景图像

> ID：13721461
> 
> 赞同：1
> 
> 时间：2012-12-05T10:48:13.993
> 
> 标签：android, cordova, user-interface

我有一个使用 PhoneGap 的应用程序，它有一个背景图像。我的问题是，即使我使用的是源，图像也会闪烁一点。（似乎Android和PhoneGap正在采用不同的屏幕引用来显示图像）。

这是代码：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    super.init();

    getWindow().setBackgroundDrawableResource(R.drawable.splash);

    this.setIntegerProperty("splashscreen", R.drawable.splash);
    super.setIntegerProperty("backgroundColor", Color.TRANSPARENT );                    
    cna = new CustomNativeAccess(this, appView);   

    appView.getSettings().setAppCacheEnabled(true);
                 appView.getSettings().setRenderPriority(android.webkit.WebSettings.RenderPriority.HIGH);
    appView.getSettings().setCacheMode(android.webkit.WebSettings.LOAD_DEFAULT );
    appView.setBackgroundColor(0);
    appView.setBackgroundResource(R.drawable.splash );          

    appView.clearCache(false);
    super.loadUrl(url); // this is an external url so it takes a bit of time 
```

}

作为一个临时修复，我强制应用程序在全屏模式下工作，这样就不会闪烁，因为（Android 和 PhoneGap）都将前 0,0 作为参考。

```
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
            WindowManager.LayoutParams.FLAG_FULLSCREEN | 
            WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN); 
```

我正在使用 PhoneGap 1.6，任何帮助将不胜感激。

# image - 为什么 Wicket 没有在网页上显示正确的图像？

> ID：13721466
> 
> 赞同：1
> 
> 时间：2012-12-05T10:48:19.247
> 
> 标签：image, wicket, bufferedimage

我有一个包含图像的文件夹：IMG1.jpg、IMG2.jpg、IMG3.jpg、IMG4.jpg。我愿意：

```
BufferedImage _img = null;
_img = ImageIO.read(new File(PATH_TO_IMAGE + "\\IMG"+Id+".jpg")); //where id is the number. 
```

然后剩下的...

```
BufferedDynamicImageResource bufferedDynamicImage = new BufferedDynamicImageResource();
bufferedDynamicImage.setImage(_img);
Image ci = new Image("myImg", bufferedDynamicImage);
add(ci); 
```

最后我得到的是，尽管 Wicket 知道某些图像的确切路径（显示在 Log.file 中），但大多数时候它会从我的文件夹中获取随机图像。这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:31:34.457

按照我的评论，怎么样

```
Image ci = new Image("myImg");
ci.add(AttributeModifier.replace("src", Model.of(PATH_TO_IMAGE + "\\IMG" + Id + ".jpg")));
add(ci); 
```

这会根据您所需的逻辑更改您的 img-tag 的 src-attribute，防止浏览器在不需要的地方缓存，但在可能的情况下启用缓存。

# android - 如何在 webview 重定向 url 中移动另一个活动

> ID：13721475
> 
> 赞同：1
> 
> 时间：2012-12-05T10:48:52.607
> 
> 标签：android, webview, android-webview

我有一个 webview 来显示一个网页。在该网页按钮单击事件中，我正在重定向到另一个页面。从那里另一个按钮单击事件即时重定向到第 3 页。我需要显示我的下一个活动，而不是重定向到第三页。

我正在使用以下代码，但我的第一页本身没有加载

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login_page);
    WebView webview = (WebView) findViewById(R.id.wvLogin);

    setContentView(webview);    
    webview.setWebViewClient(new WebViewClient()
    {
        // Override URL

        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            if(url.equals("http://My 3rd page redirecting URL"))
            {                       
                Intent i = new Intent(getApplicationContext(), APImages.class);
                startActivity(i);                   
            }           
            return true;
        }

    });

    webview.loadUrl("http://Default URL to load first time");

} 
```

请告诉我如何处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:11:57.707

试试这个变种：

```
public boolean shouldOverrideUrlLoading(WebView view, String url)
{
    if(url.equals("http://My 3rd page redirecting URL"))
    {                       
        Intent i = new Intent(getApplicationContext(), APImages.class);
        startActivity(i);                   
    } else {
        webview.loadUrl(url);
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:24:28.853

试试 onLoadResource。这应该适用于 webview。有时 onOverride 函数不起作用，尤其是在您调用意图时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:58:01.583

当您不处理事件时，请尝试返回 false。这是来自[WebClient](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)参考。

```
True if the host application wants to leave the current WebView and handle the url itself, otherwise return false. 
```

你的代码应该是这样的。

```
webview.setWebViewClient(new WebViewClient()
{
    // Override URL

    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        if(url.equals("http://My 3rd page redirecting URL"))
        {                       
            Intent i = new Intent(getApplicationContext(), APImages.class);
            startActivity(i);                   
            return true;
        }           
        return false;
    }

}); 
```

# mysql - 查找一个表中的字符串是否是另一个列表中字符串的子字符串

> ID：13721483
> 
> 赞同：1
> 
> 时间：2012-12-05T10:49:13.030
> 
> 标签：mysql, loops, select, substring

我正在分析一个类似拼字游戏的文字游戏，以找出放置在板上的一块字母是否会使无法放置更多字母，即“锁定”游戏。让我尝试通过 2x2 块的示例来解释：

我已经建立了一个有效的 2x2 块列表（大约 5000 个块）。该列表如下所示：

```
matrix_2x2

AA,AA
AA,AB
AA,AD
AA,AE
etc... 
```

在板上“AA，AE”看起来像这样（真正的板是 15x15）：

```
[ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][A][A][ ][ ][ ]
[ ][ ][ ][A][E][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ][ ][ ][ ] 
```

我也有有效单词的完整列表。看起来像这样

```
dic_word

AA
AAH
AAHED
AAHING
AAHS
AAL
etc... 
```

我在 MySQL 中有两个列表。

我知道我可以在代码中通过迭代矩阵列表中的每个条目并进行 SELECT 查询来做到这一点。每个矩阵行都是这样的：

```
SELECT COUNT(word) > 0 FROM dic_word d WHERE (INSTR(word, "AA") OR INSTR(word, "AE") OR INSTR(word, "AA") OR INSTR(word, "AE")) AND (word <> "AA" AND word <> "AB" AND word <> "AA" AND word <> "AB") 
```

我只是想知道这是否可以在 MySQL 中完全完成。

* * *

**更新**

上面的 sql 查询确实有效，也不能很好地解释我所追求的。让我试着澄清一下我所追求的：

让我们假设`QX`and都是英文的合法词，那么 QX,QX 将是我的矩阵列表中的一个条目`QQ`。`XX`

既然不是`QX`任何英文单词`QQ`的`XX`子串，那么放置在棋盘上的 QX,QX 将“锁定”游戏（即无法放置额外的字母）。

我关注这些锁定矩阵，并从查看所有有效的 2x2 矩阵开始。正如我们所说，我正在构建所有有效 3x3 块的列表 - 到目前为止已发现超过 200.000 个。

作为旁注 - 我真的怀疑存在这样的锁定矩阵，但这就是我正在检查的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:43:23.037

您现有查询的问题是扫描子字符串效率极低。特别是，不能使用索引——因此`dic_word`需要对表进行全面扫描，然后`word`必须单独扫描其中的每个表以查找所需的子字符串。

相反，我会创建一个[后缀](http://en.wikipedia.org/wiki/Suffix_%28computer_science%29#Suffix)索引表：

```
CREATE TABLE suffixes (
  suffix VARCHAR(15) NOT NULL,
  word   VARCHAR(15) NOT NULL,
  PRIMARY KEY (suffix, word),
  FOREIGN KEY (word) REFERENCES dic_word (word)
); 
```

然后可以执行以下*极其有效*的查询：

```
SELECT 1
FROM   suffixes
WHERE (
       suffix LIKE 'AA%'
    OR suffix LIKE 'AE%'
    OR suffix LIKE 'AA%'
    OR suffix LIKE 'AE%'
      ) AND word NOT IN ('AA','AE','AA','AE')
LIMIT  1 
```

笔记：

*   该`LIMIT`子句使 MySQL 在找到单个结果后立即停止搜索；

*   结果集将包含单个记录以指示存在一个或多个可能的单词，或者将不包含任何记录以指示没有可能的单词；

*   这个查询不考虑棋盘上剩余的空间——例如，如果包含子字符串的唯一单词太长以至于超出棋盘的边缘，但是可以通过添加一个额外的过滤器来轻松解决这个`CHAR_LENGTH(word)`问题如果需要，保存在另一个索引列中；

*   这种优化并不容易扩展到更复杂的情况，例如存在间歇性空格和已知字母的情况——例如`'A__DE____J__'`：虽然可以使用`LIKE`查找此类模式，但索引无法帮助超出初始已知字符；如果这是您的要求，可以对数据结构进行进一步修改。

###  填充和维护`suffixes`表

*在这篇文章的其余部分，我使用`;;`语句分隔符——必须相应地配置客户端：在[MySQL 命令行工具](http://dev.mysql.com/doc/en/mysql.html)中，这可以通过[命令](http://dev.mysql.com/doc/en/mysql-commands.html) `DELIMITER ;;`来实现。*

可以创建几个[存储过程](http://dev.mysql.com/doc/en/stored-routines.html)来帮助填充`suffixes`表：

1.  添加给定单词的所有后缀：

    ```
    CREATE PROCEDURE FillSuffixes(IN p_word VARCHAR(15)) BEGIN
      DECLARE i TINYINT UNSIGNED DEFAULT 1;
      WHILE i <= CHAR_LENGTH(p_word) DO
        INSERT IGNORE INTO suffixes
          (suffix, word)
        VALUES
          (SUBSTRING(p_word, i), p_word)
        ;
        SET i := i + 1;
      END WHILE;
    END;; 
    ```

2.  `dic_word`添加表中尚未在表中的所有单词的所有后缀`suffixes`：

    ```
    CREATE PROCEDURE FillAllSuffixes() BEGIN
      DECLARE w VARCHAR(15);
      DECLARE done BOOLEAN DEFAULT FALSE;

      DECLARE cur CURSOR FOR
        SELECT word
        FROM   dic_word LEFT JOIN suffixes USING (word)
        WHERE  suffixes.word IS NULL
      ;
      DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

      OPEN cur;

      read_loop: LOOP
        FETCH cur INTO w;
        IF done THEN
          LEAVE read_loop;
        END IF;
        CALL FillSuffixes(w);
      END LOOP;

      CLOSE cur;
    END;; 
    ```

还可以定义[触发器](http://dev.mysql.com/doc/en/triggers.html)`suffixes`以根据表的更改自动维护`dic_word`表：

```
CREATE TRIGGER add_suffixes AFTER INSERT ON dic_word FOR EACH ROW
CALL FillSuffixes(NEW.word);;

CREATE TRIGGER upd_suffixes AFTER UPDATE ON dic_word FOR EACH ROW
IF NEW.word <> OLD.word THEN
  DELETE FROM suffixes WHERE word = OLD.word;
  CALL FillSuffixes(NEW.word);
END IF;;

CREATE TRIGGER del_suffixes AFTER DELETE ON dic_word FOR EACH ROW
DELETE FROM suffixes WHERE word = OLD.word;; 
```

最后，从现有记录中填充表（使用上面创建的过程 - NB，可能需要一段时间才能运行）：

```
CALL FillAllSuffixes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:47:54.623

到目前为止，这是我的解决方案。

它将遍历所有 2x2 字母（矩阵）块并计算可以放置多少个单词。然后将结果插入到表 lock2 中。如果一个矩阵的计数为 0，那么我们就有一个锁定的游戏情况。

它正在工作，但速度非常慢。2x2 列表的性能是可以接受的，但 3x3 列表在我的一生中不会结束——而且我只有 41 岁，并且拥有一台速度相当快的计算机。

非常欢迎提出提高性能的建议。

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `wsolver`.`analyse2_2` $$
CREATE PROCEDURE analyse2_2()
BEGIN
  DECLARE done INT DEFAULT FALSE;
  DECLARE a INT;
  DECLARE b VARCHAR(45);

  DECLARE cur1 CURSOR FOR SELECT Matrix FROM matrix2x2;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

  OPEN cur1;

  read_loop: LOOP
    FETCH cur1 INTO a;

    IF done THEN
      LEAVE read_loop;
    END IF;

      SET @w1 = SUBSTRING(a, 1, 2);
      SET @w2 = SUBSTRING(a, 4, 2);
      SET @w3 = CONCAT(SUBSTRING(@w1, 1, 1), SUBSTRING(@w2, 1, 1));
      SET @w4 = CONCAT(SUBSTRING(@w1, 2, 1), SUBSTRING(@w2, 2, 1));

      SELECT COUNT(*) INTO @w5 FROM dan WHERE (instr(dic_word, @w1) OR instr(dic_word, @w2) OR instr(dic_word, @w3) OR instr(dic_word, @w4)) AND (dic_word NOT IN(@w1,@w2,@w3,@w4));

      INSERT INTO `lock2` (matrix, `count`) VALUES (a, @w5);

  END LOOP;

  CLOSE cur1;

END $$

DELIMITER ; 
```

# android - 在 Android 服务中使用计时器

> ID：13721484
> 
> 赞同：0
> 
> 时间：2012-12-05T10:49:17.547
> 
> 标签：android, android-service

我有一个服务将作为另一个应用程序的一部分充当内部时钟，它包含一个计时器，它每隔一秒运行一次以更新时间。

问题是，当我关闭并重新打开应用程序时，服务会自行绑定，所有代码都会在服务中再次运行，然后每秒有两个计时器，依此类推。

我试过遵循本地服务示例，但同样的事情发生了 [http://developer.android.com/reference/android/app/Service.html#LocalServiceSample](http://developer.android.com/reference/android/app/Service.html#LocalServiceSample)

它与服务的绑定/取消绑定有关吗？

我只想运行一个进程，所以我正在寻找一种方法来真正查看该进程是否已经在运行，如果没有，则启动它。

LocalService`公共类LocalService扩展服务{

```
// This is the object that receives interactions from clients.
private final IBinder mBinder = new LocalBinder();

private  long dateOfLastSync;
private  long timeNow;

private final Handler handler = new Handler();
private static Timer timer = new Timer();
private Context ctx;

/**
 * Class used for the client Binder.  Because we know this service always
 * runs in the same process as its clients, we don't need to deal with IPC.
 */
public class LocalBinder extends Binder {

    // The LocalBinder provides the getService() method for clients to retrieve the current instance of LocalService.
    LocalService getService() {
        Log.d("INTERNALCLOCK", "getService");
        // Return this instance of LocalService so clients can call public methods
        return LocalService.this;
    }
}

@Override
public void onCreate() {
    Log.d("INTERNALCLOCK", "onCreate");
    ctx = this; 
    startService();        
}

@Override
public void onDestroy() {
    Log.d("INTERNALCLOCK", "onDestroy");
    Toast.makeText(this, "Service Stopped ...", Toast.LENGTH_SHORT).show();

}

private void startService()
{           
    timer.scheduleAtFixedRate(new mainTask(), 0, 1000);
}

private class mainTask extends TimerTask
{ 
    public void run() 
    {
        toastHandler.sendEmptyMessage(0);
    }
}    

public void getTimeFromServer()  {
    FetchServerTime fetchTime = new FetchServerTime();
    fetchTime.execute();

}

@Override
public IBinder onBind(Intent intent) {
    Log.d("INTERNALCLOCK", "onBind");
    getTimeFromServer();

    return mBinder;
}

/** method for clients */
public long getTimeNow() {
    Log.d("INTERNALCLOCK", "getTimeNow");
  return timeNow;
}

public void startTimeCounter() {
    Log.d("INTERNALCLOCK", "startTimeCounter");

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.d("INTERNALCLOCK", "onStartCommand");

    return START_STICKY;
}

private final Handler toastHandler = new Handler()
{
    @Override
    public void handleMessage(Message msg)
    {
        timeNow += 1000;
        Log.d("INTERNALCLOCK", "time is " + timeNow);
        Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_SHORT).show();
    }
}; 

 class FetchServerTime extends AsyncTask<Integer, String, Long> {

    private String mUrl;
    private Date date;
    private AlarmManager mAlarmManager;

    public FetchServerTime() {
        mUrl = "XXX";
    }

    @Override
    protected Long doInBackground(Integer... params) {
        (get server time code)
    }

    @Override
    protected void onPostExecute(Long result) {
        super.onPostExecute(result);
        Log.d("INTERNALCLOCK", "Server time on post execute: " + result);
        timeNow = result;
        dateOfLastSync = result;
    }

} 
```

`

内部时钟活动

```
 public class InternalClockActivity extends Activity implements CanUpdateTime {
private TextView timeLabel;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Log.d("INTERNALCLOCK", "onCreate - main");

    timeLabel = (TextView) findViewById(R.id.time);

    doBindService();
}

private LocalService mBoundService;

private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        // This is called when the connection with the service has been
        // established, giving us the service object we can use to
        // interact with the service.  Because we have bound to a explicit
        // service that we know is running in our own process, we can
        // cast its IBinder to a concrete class and directly access it.

        mBoundService = ((LocalService.LocalBinder)service).getService();

    }

    public void onServiceDisconnected(ComponentName className) {
        // This is called when the connection with the service has been
        // unexpectedly disconnected -- that is, its process crashed.
        // Because it is running in our same process, we should never
        // see this happen.
        mBoundService = null;
    }
};

private boolean mIsBound;

void doBindService() {
    // Establish a connection with the service.  We use an explicit
    // class name because we want a specific service implementation that
    // we know will be running in our own process (and thus won't be
    // supporting component replacement by other applications).

    bindService(new Intent(InternalClockActivity.this, 
            LocalService.class), mConnection, Context.BIND_AUTO_CREATE);
    mIsBound = true;
}

void doUnbindService() {
    if (mIsBound) {
        // Detach our existing connection.
        unbindService(mConnection);
        mIsBound = false;
    }
}

@Override
protected void onDestroy() {
    super.onDestroy();
    doUnbindService();
}

public void updateTime(String time){

    timeLabel.setText(time);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:57:55.967

我刚刚创建了一些静态变量来查看计时器是否正在运行，即

```
private static boolean isDownloadTaskRunning = false;

private void startService()
{
    if (!isDownloadTaskRunning) {
        // Timers are not running already

        // start timer to download date at intervals
        timerToDownloadNewData.scheduleAtFixedRate(new DownloadDateTask(), 0, TIMES.FIFTEEN_MINS.getSeconds());

        // set running to true
        isDownloadTaskRunning = true;
    }
} 
```

# java - 如何将相似的方法合二为一

> ID：13721485
> 
> 赞同：0
> 
> 时间：2012-12-05T10:49:19.067
> 
> 标签：java, android, refactoring

我想将这些方法`runSec`和`runMin`移动双手结合在一种方法中。这些方法移动钟面上的分针和秒针 求助，谢谢。

```
public void settTime(int seconds) {
  if(isTimer)
   return;
    tTime = seconds;
     int minutes = seconds / 60;
     int hours = minutes / 60;
     minutes = minutes % 60;
     seconds = seconds % 60;    
     tTimeLabel.setText(String.format("%02d:%02d:%02d", hours, minutes, seconds));
      runSec(seconds);
      runMin(minutes);
}

public void runSec(int seconds) {
 RotateAnimation rotateAnimation = new RotateAnimation(seconds * 6, seconds * 6,
 Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
 rotateAnimation.setFillAfter(true);
 csecond.startAnimation(rotateAnimation);
}

public void runMin(int minutes) {
 RotateAnimation rotateAnimation = new RotateAnimation(minutes * 6, minutes * 6,
 Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
 rotateAnimation.setFillAfter(true);
cminute.startAnimation(rotateAnimation);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:53:35.413

您的方法已经几乎相同。只需传入另一个参数，该参数将取值`csecond`或`cminute`视情况而定。

```
public void runHand(int amount, Hand hand) {
  RotateAnimation rotateAnimation = new RotateAnimation(amount * 6, amount * 6,
  Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
  rotateAnimation.setFillAfter(true);
  hand.startAnimation(rotateAnimation);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:53:51.357

```
public void runMin(int minutes) {
   cminute.startAnimation(createAnimation(minutes*6));
}

public void runSec(int seconds) {
  csecond.startAnimation(createAnimation(seconds*6));
}

public RotateAnimation createAnimation(int time) {
   RotateAnimation rotateAnimation = new RotateAnimation(time, time,
   Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
   rotateAnimation.setFillAfter(true);
   return rotateAnimation;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:52:52.823

基本上你在这两种方法中都做同样的事情，所以你可以用任何一种方法替换——

```
public void runMinorSec(int time) {
 RotateAnimation rotateAnimation = new RotateAnimation(time * 6, minutes * 6,
 Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
 rotateAnimation.setFillAfter(true);
 cminute.startAnimation(rotateAnimation);
} 
```

你可以调用方法

```
 runMinorSec(seconds);
  runMinorSec(minutes); 
```

但是你可以像这样连接两种方法 -

```
public void runSecOrMin(int time, boolean isSec) {
 if(isSec){
    RotateAnimation rotateAnimation = new RotateAnimation(seconds * 6, seconds * 6,
    Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
    rotateAnimation.setFillAfter(true);
    csecond.startAnimation(rotateAnimation);
 }else{
    RotateAnimation rotateAnimation = new RotateAnimation(minutes * 6, minutes * 6,
    Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
    rotateAnimation.setFillAfter(true);
    cminute.startAnimation(rotateAnimation); 
 }
} 
```

..

```
runSecOrMin(seconds,true);
runSecOrMin(minutes,false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:53:28.610

这些方法看起来相同，原因似乎很容易猜到。时钟上的秒针和分针每单位都有相同的动画（旋转的 1/60）。所以，它最终归结为语法。如果您愿意，可以将变量名称替换为`minutesOrSeconds`其他名称。

```
public enum TimeType {SECOND, MINUTE}

public void runMin(int time, TimeType timeType) {
    RotateAnimation rotateAnimation = new RotateAnimation(time* 6, time* 6,
    Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
    rotateAnimation.setFillAfter(true);
    if (TimeType == SECOND) {
        csecond.startAnimation(rotateAnimation);
    } else if (TimeType == MINUTE) {
        cminute.startAnimation(rotateAnimation);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T10:54:18.470

试试这个，只需将视图作为参数 csecond 和 cminute 传递。

```
public void runMin(int time, View target) {
    RotateAnimation rotateAnimation = new RotateAnimation(time * 6, time * 6,
    Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
    rotateAnimation.setFillAfter(true);
    target.startAnimation(rotateAnimation);
} 
```

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T10:54:32.123

我检查了您的 2 种方法，除了参数名称之外没有发现任何区别。如果我是对的，只需调用此方法并按时间`run(int time)`替换您使用的所有地方。在 javadoc 中提到时间可能以分钟或秒为单位。`minutes``seconds`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T10:55:37.067

```
public void runTime(int seconds, int minutes) 
{
 RotateAnimation rotateAnimation = new RotateAnimation(seconds * 6, seconds * 6,
 Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
 RotateAnimation rotateAnimation = new RotateAnimation(minutes * 6, minutes * 6,
 Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
 rotateAnimation.setFillAfter(true);
 csecond.startAnimation(rotateAnimation);
 cminute.startAnimation(rotateAnimation);
} 
```

# php - 为什么 cURL 在服务器和本地主机上给出不同的输出？

> ID：13721491
> 
> 赞同：1
> 
> 时间：2012-12-05T10:49:36.537
> 
> 标签：php, curl

下面的代码在 localhost 和服务器上给出了不同的输出。我尝试更改用户代理和浏览器。我错过了任何标题吗？

```
<?php

$headers[] = 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
$headers[] = 'Connection: Keep-Alive';
$headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';
$headers[] = 'Accept-Language: en-us,en;q=0.5';
$headers[] = 'Accept-Encoding   gzip,deflate';
$headers[] = 'Keep-Alive: 300';
$headers[] = 'Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7';
//$headers[] = 'Content-Length: 0';

$curl = curl_init();
curl_setopt($curl, CURLOPT_HEADERFUNCTION, 'dbg_curl_data');
curl_setopt($curl, CURLOPT_WRITEFUNCTION, 'dbg_curl_data');
curl_setopt($curl, CURLINFO_HEADER_OUT, true);
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.0; en; rv:1.9.1.7) Gecko/20091221 Firefox/3.5.7');
//curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11');
curl_setopt($curl, CURLOPT_URL, "http://www.facebook.com/login.php");
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
curl_setopt($curl, CURLOPT_ENCODING, 'gzip');
//curl_setopt($curl, CURLOPT_HEADER, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_VERBOSE, 1);
//curl_setopt($curl, CURLOPT_POST, true);

$html = curl_exec ($curl);
//curl_close ($curl);

echo '<fieldset><legend>request headers</legend>
<pre>', htmlspecialchars(curl_getinfo($curl, CURLINFO_HEADER_OUT)), '</pre>
</fieldset>';

echo '<fieldset><legend>response</legend>
<pre>', htmlspecialchars(dbg_curl_data(null)), '</pre>
</fieldset>';

echo '<fieldset><legend>$html</legend>
<pre>', htmlspecialchars($html), '</pre>
</fieldset>';

function dbg_curl_data($curl, $data=null) {
 static $buffer = '';

 if ( is_null($curl) ) {
   $r = $buffer;
   $buffer = '';
   return $r;
 }
 else {
   $buffer .= $data;
   return strlen($data);
 }
}
?> 
```

本地主机上的输出：http: [//pastebin.com/UbpTVc4f](http://pastebin.com/UbpTVc4f)

服务器上的输出：http: [//pastebin.com/NURDksJy](http://pastebin.com/NURDksJy)

我想在本地主机上输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:43:25.357

为什么不先从简单的事情开始，然后再像现在这样复杂化您的请求并且难以调试。例如，这段代码（在单独的文件中运行）：

```
$curl = curl_init();
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.0; en; rv:1.9.1.7) Gecko/20091221 Firefox/3.5.7');
curl_setopt($curl, CURLOPT_URL, "http://www.facebook.com/login.php");
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_HEADER, 1);
$html = curl_exec ($curl);
print_r($html); 
```

应该给你`HTTP/1.1 302 Found`回报。

# wpf - 将触发器的属性设置为子级

> ID：13721493
> 
> 赞同：2
> 
> 时间：2012-12-05T10:49:40.533
> 
> 标签：wpf, xaml, triggers, styles

如何将触发器设置为取决于子属性？就像我想根据*Expander*的*ListView* 是否有孩子来更改我的*Expander的**标题。*

 ***但我总是收到一个 Comilor 错误，即 HasItems 无法解决...

```
<Expander Header="Expand to add new ports">
  <Expander.Resources>
    <Style TargetType="{x:Type Expander}">
      <Style.Triggers>
         <Trigger Property="Content.HasItems" Value="False">
           <Setter Property="Header" Value="No children" />
         </Trigger>
      </Style.Triggers>
    </Style>
  </Expander.Resources>
  <ListView ItemsSource="{Binding Path=SomeItems}">
</ListView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:53:50.630

您可以使用`DataTrigger`绑定到`ListView`using `ElementName`：

```
<Expander>
    <Expander.Resources>
        <Style TargetType="{x:Type Expander}">
            <Setter Property="Header" Value="Expand to add new ports" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=ListView, Path=HasItems}" Value="False">
                    <Setter Property="Header" Value="No children" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Expander.Resources>
    <ListView x:Name="ListView" ItemsSource="{Binding Path=SomeItems}">
    </ListView>
</Expander> 
```

另请注意，如果您在触发器中设置属性以及控件的声明，`Setter`则不会产生任何效果。

用这个：

```
<Setter Property="Header" Value="Expand to add new ports" /> 
```

而不是这个：

```
<Expander Header="Expand to add new ports"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:54:36.560

您的代码中有多个问题 -

首先，您不应该`set the property in style setter`在本地声明它。

二`DataTrigger`是代替Trigger使用。

```
<Expander>
  <Expander.Style>
    <Style TargetType="{x:Type Expander}">
      <Setter Property="Header" Value="Expand to add new ports"/>
      <Style.Triggers>
         <DataTrigger Binding="{Binding Path=SomeItems.Count}" Value="0">
             <Setter Property="Header" Value="No children" />
         </DataTrigger>
      </Style.Triggers>
    </Style>
  </Expander.Style>
  <ListView ItemsSource="{Binding Path=SomeItems}">
  </ListView>
</Expander> 
```***

# jquery - 返回后谷歌浏览器不记得滚动位置

> ID：13721495
> 
> 赞同：1
> 
> 时间：2012-12-05T10:49:42.153
> 
> 标签：jquery, google-chrome, scroll, browser-history, jquery-isotope

[团队站点](http://www.ammarkt.ch/ueberuns/team/)

当从 Team-Overview 转到 Detail-View 中的 Team-Member，然后通过 Browser-Button 或“Zurück”-Button（也使用 Browser-Back）返回时，chrome 会记住滚动位置。但是在它跳到正确的位置后不久，它就会跳回到顶部。

我无法想象它为什么会这样做。

在该页面上，metafizzy isotope Framework 对元素进行排序。

所有其他浏览器在这里都有正确的行为。

这里的任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:08:51.713

一种解决方案是在每个 id 上放置一个 id `.mitarbeiter`，例如

```
<div id="john_doe" class="mitarbeiter"... 
```

并将此 id 放入“Zurück”链接，例如，

```
<a class="light backlink_detail" href="/ueberuns/team#john_doe">Zurück</a> 
```

在关于页面上，等待`metafizzy`完成并使用`$.scrollTo(window.hash)`滚动到先前选择的团队成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:12:38.147

“卷轴”的位置历史，并不是有一个标准来说明回压时应该如何处理。这取决于每个浏览器来处理他们认为合适的方式。或者你的意思是这个框架有一些机制？

您可以有一个 java 脚本，将有关滚动位置的信息本地存储在 cookie 中，并在您返回页面历史记录时使用 java 脚本重置它？

# iphone - 如何在 iPhone 应用程序中集成 Mobile Express CheckOut Paypal

> ID：13721502
> 
> 赞同：2
> 
> 时间：2012-12-05T10:49:56.507
> 
> 标签：iphone, paypal, xcode4.5

我想在我的 iPhone 应用程序中集成 Mobile Express CheckOut Paypal。我已经浏览了文档和示例代码，即 MECL_Pizza_Non_Web 示例代码也将它集成到我的应用程序中，但是当我运行我的应用程序时，我无法获得 drt 和令牌值。此方法返回空值。

```
- (void)receivedDeviceReferenceToken:(NSString *)token {
    //store the token for later use

    [ECNetworkHandler sharedInstance].deviceReferenceToken = token;

    //carry on to the review page
    [self reviewOrder:nil];
} 
```

谁能指导我如何获取它，因为它需要传入url

[https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkout-mobile&drt=valueFromMobileExpressCheckoutLibrary&token=valueFromSetExpressCheckoutResponse](https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkout-) _

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T16:11:51.487

确保 App-ID 适合 PayPal 的环境。例如 ENV_SANDBOX 是 APP-80W284485P519543T。

`[[PayPal getPayPalInst] fetchDeviceReferenceTokenWithAppID:@"APP-80W284485P519543T" forEnvironment:ENV_SANDBOX withDelegate:self];`

并且您还可以在应用程序运行时检查控制台。

# ios - 在 iOS 6 中更改 tableHeaderView 的框架时，UITableView 不会自动调整大小

> ID：13721503
> 
> 赞同：3
> 
> 时间：2012-12-05T10:50:03.003
> 
> 标签：ios

我通过使用 tableHeaderView 并在滚动时调整框架大小在 UITableView 中实现了视差效果：

```
headerView is the table.tableHeaderView
topHeight = 400; // the height of the tableHeaderView

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGFloat scrollOffset = scrollView.contentOffset.y;
    if (scrollOffset>=0 && scrollOffset<=topHeight) {
        CGRect frame = CGRectMake(0, scrollOffset/2, 320, topHeight - scrollOffset/2);
        headerView.frame = frame;
    } else if (scrollOffset>topHeight) {
        CGRect frame = CGRectMake(0, 100, 320, 100);
        headerView.frame = frame;
    } else {
        CGRect frame = CGRectMake(0, 0, 320, topHeight);
        headerView.frame = frame;
    }
} 
```

该效果在 iOS 5.0 和 5.1 上完美运行，但我在 iOS 6+ 上的 tableHeaderView 和表格内容之间出现了一些奇怪的空间（图像中的标题为红色）

iOS 5 - 标题和表格内容之间没有空格： ![iOS 5 - 标题和表格内容之间没有空格](../Images/92d5cb705d288c5ce7bfe3c91cc97c36.png)

iOS 6 0 标头与表格内容隔开： ![iOS 6 0 标头与表格内容隔开](../Images/889823a63756bee232d321e0bd70ec33.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-10T12:03:14.313

您需要再次设置tableHeaderView：

```
table.tableHeaderView = table.tableHeaderView; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:41:53.120

看起来标题视图的大小是用初始值固定的。也许在 iOS 6 上，表格视图的内部计算发生了变化 - 因此，如果不重新加载表格，就无法更改视图的高度。

如果您在 scrollViewDidScroll 函数的末尾重新加载表格，它可以工作（但这将是一个性能问题）。

在不重新加载表格的情况下操纵单元格的高度是相同的效果。

# sql-server - 解释 SQL Server 2008 中具有聚集索引的大表的最佳查询

> ID：13721506
> 
> 赞同：1
> 
> 时间：2012-12-05T10:50:12.497
> 
> 标签：sql-server, performance, clustered-index, sql-execution-plan

我正在处理一个非常大的表（每天添加大约 270 万行），它具有以下结构：

```
CREATE TABLE [dbo].[Result](
    [ResultDate] [date] NOT NULL,
    [Thing1Id] [int] NOT NULL,
    [Num] [int] NOT NULL,
    [Thing2Id] [int] NOT NULL,
CONSTRAINT [PK_Result] PRIMARY KEY CLUSTERED 
(
    [ResultDate] ASC,
    [Thing1Id] ASC,
    [Num] ASC
)) 
```

由于集群主键位于 ResultDate、Thing1Id 和 Num 上，我希望以下查询是最佳的：

```
SELECT Thing2.* 
FROM dbo.Result
INNER JOIN Thing2 ON Thing2.Id = result.Thing2Id
WHERE 
    ResultDate >= '2012-01-01'
    AND
    ResultDate <= '2012-01-30'
    AND Thing1Id = 23 
```

如您所见，查询在 1 月 12 日查找特定 Thing1 的结果。

但是，执行计划表明，通过添加以下索引可以获得巨大的性能提升：

```
CREATE NONCLUSTERED INDEX [IX_Missing]
ON [dbo].[Result] ([Thing1Id],[ResultDate])
INCLUDE ([Num],[Thing2Id]) 
```

可以肯定的是，添加此索引确实会大大提高性能。

有人可以解释为什么吗？就我而言，应该使用聚集主键充分缩小结果范围，添加它会使索引大小变得更大并增加不必要的开销。

我可以对表进行不同的索引以获得更好的性能吗？

（请注意，实际上该表实际上是合并的 2 个表，数据每天从一个表转移到另一个表，并且每月对数据进行分区）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:59:00.713

索引基本上按“键”排列您的表格。在你的情况下'thing1ID'，'ResultDate'。对表进行排序后，访问行比遍历整个表（270 万）要快得多，因为您不知道行可能在哪里。

即2,7,3,8,1，您需要搜索整个表格才能找到数字1。但是如果您有1、2、3、7、8。您只检查第一个数字。

但！对于包含许多涉及“键”的更新/插入的表，速度会变慢，因为您需要在每个条目后对表进行排序。因此，找出最适合您的数据库的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:36:26.340

PK 不是您的查询的最佳选择，因为您正在对 ResultDate 进行范围搜索。通过您的查询，您可以将 Thing1Id 23 的搜索范围缩小到大约。8100 万行仍然很多。

在您的查询中，对 Thing1Id 的搜索固定为 23，因此 Thing1Id 和 ResultDate 上的额外索引将最适合您的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T14:52:01.860

[查询执行计划](https://stackoverflow.com/questions/7359702/how-do-i-obtain-a-query-execution-plan)会确切地告诉您这里发生了什么，这通常比推测要好得多，但是在这种情况下，我认为有足够的信息可以进行有根据的猜测。

首先，`INCLUDE ([Num],[Thing2Id])`索引的一部分只是意味着这两列的值在索引以及表本身中是重复的。它很有用，因为它可以防止 SQL Server 在该索引中执行查找（在这种情况下索引是[覆盖索引](https://stackoverflow.com/questions/609343/what-are-covering-indexes-and-covered-queries-in-sql-server)）之后必须在表本身中查找这些详细信息，但是通常这种查找非常快，因此不太可能直接负责“大幅”提高性能。我猜下面的指数是 99.9% 一样快。

```
CREATE NONCLUSTERED INDEX [IX_Missing]
ON [dbo].[Result]
(
    [Thing1Id],
    [ResultDate]
) 
```

在我们继续之前，重要的是要了解 SQL Server 执行此查询有两种方法（为了解释的目的，已大大简化）：

1.  查找`ResultDate`在两个提供的日期之间的所有行，然后在这些行中查找 a`Thing1Id`为 23的行
2.  查找 a`Thing1Id`为 23 的所有行，然后在这些行中查找`ResultDate`在两个提供的日期之间的行

根据表中存在的数据，其中一种方法可能*比*另一种方法快得多，例如，如果表中的大多数行具有`Thing1Id`23 并且很少有匹配`ResultDate`，那么它可能会更快使用第一种方法，因为它可以更快地消除更多行。

我们需要了解的另一个重要难题是，由于索引的工作方式，SQL 不能在第二种情况下使用您的聚集索引，因为`Thing1Id`列在列*之后*`ResultDate`（这有点像要求某人使用书中的索引找到第二个字母是“Q”的所有条目，*然后*要求他们通过并只挑选那些以“S”开头的单词）

* * *

因此，我对为什么这个索引提高性能的猜测仅仅是 SQL Server 使用方法 2（`Thing1Id`首先过滤）比方法 1 更有效。

您应该能够使用查询执行计划来确认这一点。

# javascript - 根据另一个数组对数组进行排序（更改对象的顺序）

> ID：13721513
> 
> 赞同：0
> 
> 时间：2012-12-05T10:50:23.200
> 
> 标签：javascript

我有两个 Javascript 数组对象，其中第一个按我希望它的排序顺序排序，第二个数组按错误顺序排序，例如：

1) 排序数组`(0 - 10 items, 11 - 20 items, 21 - 30 items, 10000 - 20000 items)`

2) 按字母顺序排列的数组`(0 - 10 items, 10000 - 20000 items, 11 - 20 items, 21 - 30 items)`

我想按照与第一个数组相同的顺序对第二个数组进行排序，有没有简单的方法来解决这个问题？

任何帮助，将不胜感激。谢谢你。

**条件：**

1）第二个数组的大小可以不同。所以它的值可能比第一个数组少。

2) 如果数据损坏，第二个数组可以有第一个数组中不存在的值。

**更新**

我根据 Bergi 的回复在这里构建了一个示例：jsfiddle.net/EPwS6 - 但现在我需要弄清楚如何在 arr2 中保留 arr1 中不存在的值。有什么想法或提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:56:40.940

如果两个数组包含相同的项目，但顺序不同，则很容易：只需将第一个数组复制到第二个数组即可。要么使用直接引用，要么`slice`创建一个新数组。

如果两个数组包含具有相似键的不同对象，则变得更加困难。然而，您可以通过创建查找表轻松管理它：

```
var table = {};
for (var i=0; i<arr2.length; i++)
    table[ arr2[i].getKey() ] = arr2[i];
for (var i=0; i<arr1.length; i++)
    arr2[i] = table[ arr1[i].getKey() ];
table = null;
// arr2 now ordered by the same keys as arr1, and its length is set to arr1.length 
```

如果密钥集不同，您可能会使用以下内容：

```
var table = {};
for (var i=0; i<arr2.length; i++)
    table[ arr2[i].getKey() ] = arr2[i];
for (var i=0; i<arr1.length; i++) {
    var key = arr1[i].getKey();
    if (key in table) {
        arr2.push(table[key]); // add to array
        delete table[key]; // and prevent readding
    }
}
for (var key in table)
    arr2.push(table[key]); // add all leftover objects
table = null; 
```

# javascript - 在 iframe 上加载带有父级的 jQuery 函数

> ID：13721519
> 
> 赞同：2
> 
> 时间：2012-12-05T10:50:43.823
> 
> 标签：javascript, jquery

我想知道为什么这是不可能的......

我有一个带有 iframe 的文件 index.php

```
index.php
->iframe.php 
```

index.php 文件已执行**jquery.js**，并在 iframe 上我写了这个

```
window.jQuery = window.$ = parent.jQuery;
$(document).ready(function(){
    $("div#test").html('Hello World');
}); 
```

我知道这可能不是很有用，但我想知道这样的事情是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:04:58.303

试试这个（我现在没有网络服务器，所以不确定是否可以工作）：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
    $(function(){
      //try this 
      //object = parent.$(parent.document)
      //object.find('body').append('<p>ello</p>')

      //or this
      //$('body',parent.document).append('<p>ello</p>')
    })
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:59:40.787

您的 jquery 代码中有错误，请替换以下行：

```
$("div#test").('Hello World'); 
```

对于这个：

```
$("div#test").html('Hello World'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:17:53.553

好的，我的代码工作正常，我可以调用 jQuery 函数，但它们在 iframe 上调用的函数在父 DOM 上执行！

# windows-phone-7 - Windows phone 7 将数据从安装文件夹复制到独立存储

> ID：13721520
> 
> 赞同：0
> 
> 时间：2012-12-05T10:50:45.500
> 
> 标签：windows-phone-7, isolatedstorage

我正在构建一个使用 450 个音乐样本的音乐应用程序。我在应用程序包中有所有歌曲和艺术品。我正在尝试将它们复制到 IsoStorage 并使用文件名填充数据库表以供以后使用。

我这样做是为了以后我的应用程序可以定期接收更新，但是对于第一次使用，我不想使用网络服务来下载数据。

```
private void InitMyStorage()
    {
        IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();

        if (!isf.DirectoryExists("Audio"))
        {
            isf.CreateDirectory("Audio");
        }
        DirectoryInfo di = new DirectoryInfo("Data");// Directory in the application
        var ext = new List<String> { ".jpg", ".mp4" };
        var files = di.GetFiles().Where(f => ext.Contains(f.Extension)).ToList();
        foreach (var file in files)
        {                
           writeFile(file.Name, "Audio\\"+file.Name); // Stream writer method
        }
    } 
```

问题是对于模拟器，我可以看到目录中的文件列表，但在设备上它会引发异常。

创建文件列表后，我正在调用 whriteFile 方法，如下所示

```
private void writeFile(string szFrom, string szTo)
    {
        Stream str = Application.GetResourceStream(new Uri("Data/" + szFrom, UriKind.Relative)).Stream;
        if (str != null)
        {
            IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();
            IsolatedStorageFileStream isfsOutput = isf.OpenFile(szTo, System.IO.FileMode.Create);

            if (isfsOutput != null)
            {
                BinaryReader brInput = new BinaryReader(str);
                BinaryWriter bwOutput = new BinaryWriter(isfsOutput);

                for (byte[] buffer = brInput.ReadBytes(1024); buffer.Length > 0; buffer = brInput.ReadBytes(1024))
                {
                    bwOutput.Write(buffer);
                }

                bwOutput.Close();
                brInput.Close();
            }
            isfsOutput.Close();
        }
    } 
```

如果有人可以帮助请:) 为什么在设备上我无法读取目录？

或者给我另一个关于如何实现这一点的想法。?.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:44:18.030

查看[Matt Lacey 的这个答案，](https://stackoverflow.com/a/7474496/30512)它使用由 T4 模板生成的静态文件列表来部署。

# c++ - 我应该使用哪个 STL 容器？C++

> ID：13721522
> 
> 赞同：4
> 
> 时间：2012-12-05T10:50:53.603
> 
> 标签：c++, stl, vector, containers, deque

我有一个对象的“列表”，我想从中获取随机位置的对象并将其推到此列表的前面。只会执行这种操作。所以我不需要快速访问列表末尾，只需要它的前面和对任何其他地方的平均访问。

哪个容器最适合这个？我在想`std::vector`，但我读过那个`insert`操作效率不高。然后我想出了`std::deque`因为它快速访问前面，但是它`erase`在特定位置方法的效率如何？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T11:24:50.170

我们可以为您提供指导，但没有明确的答案——您需要自己进行基准测试，因为它关键取决于您的收藏和对象大小：

*   对于小对象和/或相对较小的集合，`std::vector`会更快，因为即使您需要复制更多数据，更好的随机访问时间（O(1) vs O(n) for `std::list`）和缓存局部性将占主导地位。
*   对于大型对象和/或大型集合，`std::list`会更快，因为虽然您需要 O(n) 来选择一个随机对象，但插入会快得多，因为复制许多大型对象非常慢。

但是我不能说这两种情况之间的确切界限在哪里。

*此外，如果您可以通过交换*元素而不是插入来摆脱困境，那么这很容易：始终使用`std::vector`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:19:33.620

基于这个答案：[https](https://stackoverflow.com/a/471481/1284631) ://stackoverflow.com/a/471481/1284631 （以及，在这个：[https](https://stackoverflow.com/a/471461/1284631) ://stackoverflow.com/a/471461/1284631 ），我会去一份清单。追加、迭代、插入和删除都很便宜。

PS：这取决于随机位置是否基于索引（也就是说，如果您知道*数字*上的位置，或者移动到前面的对象通过迭代列表并测试其属性来产生结果）。

所以：如果在不迭代列表的情况下知道位置，那么就去寻找一个向量。如果该位置需要遍历集合，请查看列表。

# php - 提交前的确认框

> ID：13721524
> 
> 赞同：0
> 
> 时间：2012-12-05T10:50:56.000
> 
> 标签：php, jquery-ui, jquery

我有这个表格，我需要修改它以便在提交之前确认它。

```
 echo '<form method="post" action="coupon.php">
<input type="hidden" name="id_user"
 value="'.$id_user.'">
 <input type="hidden" name="points"
 value="250">
 <input type="hidden" name="form_secret" id="form_secret" value="'.$_SESSION['FORM_SECRET'].'" />
  <div id="p2">
<input type="submit" value="250"></div>
</form>'; 
```

我尝试实现许多 jquery 模态框（我不需要普通的 javascript，因为我需要添加一些设计），但即使有弹出窗口，表单也会继续处理。你能给我一些建议吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:59:39.667

您可以使用简单的 javascript 来制作确认框。里面使用 onclick/onsubmit="createConfirm()" />

然后使用 javascript 确认框在提交答案时显示确认框。 [http://www.w3schools.com/js/js_popup.asp](http://www.w3schools.com/js/js_popup.asp) 使用这个链接会给你确认框的例子。

您还可以修改布局。你可以看看那个。这会很有用。 [http://ui-dev.jquery.com/demos/dialog/#default](http://ui-dev.jquery.com/demos/dialog/#default)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:59:52.523

将此添加到您的表单标签....

```
onsubmit="return false"

echo '<form method="post" action="coupon.php" onsubmit="return false" id="formID"> 
```

显示构象弹出...

并确认....发布表格...

```
if(CONFORMATION){    
  $('#formID').submit() ;  
}else{
  //do your stuff
} 
```

**或者**

```
 $("form").submit(function() {
   //show your conformation popup

   if(CONFORMATION){
     return true;
   }

   return false;
}); 
```

这不需要你的`<form>`标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:06:56.037

这是我的方法：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Test</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    </head>
    <body>
        <form action="blah.php" class="confirm" method="get">
            <input type="text" name="field1" value="" />
            <button type="submit">Submit</button>
        </form>
        <div class="modal" style="display: none;">
            <h1>Attention!!</h1>
            <p>Please confirm this action</p>
            <button type="button" class="action confirm">Confirm</button>
            <button type="button" class="action cancel">Cancel</button>
        </div>
        <script>
        $(function(){
            // capture the form that triggered the action
            var $form;
            // can the form submit
            var $cansend = false;

            // show the modal on form submit
            $('form.confirm').submit(function(){
                $form = $(this);
                if ($cansend == true)
                {
                    $cansend = false;
                    return true;
                }
                $('.modal').show();
                return false;
            });

            // which button got clicked in the modal
            $('div.modal button.action').click(function(){
                if ($(this).hasClass('confirm'))
                {
                    $cansend = true;
                    $('div.modal').hide();
                    $form.submit();
                }
                else
                {
                    $cansend = false;
                    $('div.modal').hide();
                }
            });
        });
        </script>
    </body>
</html> 
```

# javascript - 如何在多个案例组合的switch中检测哪种情况为真

> ID：13721526
> 
> 赞同：0
> 
> 时间：2012-12-05T10:50:59.697
> 
> 标签：javascript, switch-statement

```
 switch (selectedRadioVal) {
    case CARD_ORDER_FIELDS:
    case CARD_ORDER_IDS:
        var items = currentSelect.getElementsByTagName("option");
        if (items.length == 0) {
            $('#txtCardOrderField').focus();
            return;
        }
      //something like this:if (CARD_ORDER_FIELDS)do this; else do that;

} 
```

如您所见，如果切换语句的值等于 CARD_ORDER_FIELDS 或 CARD_ORDER_IDS（最后一行除外），我将尝试执行相同的操作。是否可以检查此块内的当前值并根据该值执行部分代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:53:40.627

只需在 switch 中调用 if 语句：

```
if (selectedRadioVal == CARD_ORDER_FIELDS)
{
   //do something
} 
```

* * *

在全：

```
 switch (selectedRadioVal) {
    case CARD_ORDER_FIELDS:
    case CARD_ORDER_IDS:
        var items = currentSelect.getElementsByTagName("option");
        if (items.length == 0) {
            $('#txtCardOrderField').focus();
            return;
        }
        if (selectedRadioVal == CARD_ORDER_FIELDS)
        {
          //do something
        }    
  } 
```

# c++ - 未初始化的值是由堆栈分配创建的 - Qt - C++

> ID：13721527
> 
> 赞同：0
> 
> 时间：2012-12-05T10:51:02.223
> 
> 标签：c++, qt, valgrind

使用：

`valgrind --leak-check=full -v --fullpath-after=. --num-callers=50 --track-origins=yes --leak-resolution=high offline`

Valgrind 说：

```
==8914== Conditional jump or move depends on uninitialised value(s)
==8914==    at 0x62E9ADD: QTextFormatCollection::indexForFormat(QTextFormat const&) (/var/tmp/qt-src/src/gui/text/qtextformat.cpp:3075)
==8914==    by 0x6301D65: QTextDocumentPrivate::init() (/var/tmp/qt-src/src/gui/text/qtextdocument_p.cpp:228)
==8914==    by 0x630350B: QTextDocumentPrivate::clear() (/var/tmp/qt-src/src/gui/text/qtextdocument_p.cpp:275)
==8914==    by 0x62F41E7: QTextDocument::setHtml(QString const&) (/var/tmp/qt-src/src/gui/text/qtextdocument.cpp:1186)
==8914==    by 0x62C123E: QTextControlPrivate::setContent(Qt::TextFormat, QString const&, QTextDocument*) (/var/tmp/qt-src/src/gui/text/qtextcontrol.cpp:481)
==8914==    by 0x64F4C8E: QTextEditPrivate::init(QString const&) (/var/tmp/qt-src/src/gui/widgets/qtextedit.cpp:174)
==8914==    by 0x64F5528: QTextEdit::QTextEdit(QString const&, QWidget*) (/var/tmp/qt-src/src/gui/widgets/qtextedit.cpp:625)
==8914==    by 0x40E1B3: controlRThroughQt::controlRThroughQt() (in /home/anisha/.../offline)
==8914==    by 0x40E933: main (in /home/anisha/.../offline)
==8914==  Uninitialised value was created by a stack allocation
==8914==    at 0x62E73B0: QTextFormatPrivate::recalcHash() const (/var/tmp/qt-src/src/gui/text/qtextformat.cpp:317)
==8914== 
```

**您认为哪些值在这里未初始化？**

构造函数：

```
controlRThroughQt :: controlRThroughQt ()
{
    /** Qt widget's interface which will be controlling the R's widget */
    window          = new QMainWindow  ();
    centralWidget = new QWidget (window);

    refresh          = new QPushButton ("Start R", window);
    refresh->setFixedSize   (55, 55);
    connect (refresh, SIGNAL (clicked ()), this, SLOT (slotRefreshR ()));

    zoomIn          = new QPushButton ("Zoom\nin", window);
    zoomIn->setFixedSize   (55, 55);
    connect (zoomIn, SIGNAL (clicked ()), this, SLOT (slotZoomInR ()));

    zoomOut        = new QPushButton ("Zoom\nout", window);
    zoomOut->setFixedSize   (55, 55);
    connect (zoomOut, SIGNAL (clicked ()), this, SLOT (slotZoomOutR ()));

    panLeft          = new QPushButton ("Pan\nLeft", window);
    panLeft->setFixedSize   (55, 55);
    connect (panLeft, SIGNAL (clicked ()), this, SLOT (slotPanLeftR ()));

    panRight         = new QPushButton ("Pan\nRight", window);
    panRight->setFixedSize   (55, 55);
    connect (panRight, SIGNAL (clicked ()), this, SLOT (slotPanRightR ()));

    panTop          = new QPushButton ("Pan\nTop", window);
    panTop->setFixedSize   (55, 55);
    connect (panTop, SIGNAL (clicked ()), this, SLOT (slotPanTopR ()));

    panBottom      = new QPushButton ("Pan\nBottom", window);
    panBottom->setFixedSize   (55, 55);
    connect (panBottom, SIGNAL (clicked ()), this, SLOT (slotPanBottomR ()));

    panBottomRight = new QPushButton ("Bottom\nRight", window);
    panBottomRight->setFixedSize   (55, 55);
    connect (panBottomRight, SIGNAL (clicked ()), this, SLOT (slotPanBottomRightR ()));

    panBottomLeft   = new QPushButton ("Bottom\nLeft", window);
    panBottomLeft->setFixedSize   (55, 55);
    connect (panBottomLeft, SIGNAL (clicked ()), this, SLOT (slotPanBottomLeftR ()));

    panTopRight     = new QPushButton ("Top\nRight", window);
    panTopRight->setFixedSize   (55, 55);
    connect (panTopRight, SIGNAL (clicked ()), this, SLOT (slotPanTopRightR ()));

    panTopLeft      = new QPushButton ("Top\nLeft", window);
    panTopLeft->setFixedSize   (55, 55);
    connect (panTopLeft, SIGNAL (clicked ()), this, SLOT (slotPanTopLeftR ()));

    findInfo        = new QPushButton ("Find\nInfo.", window);
    findInfo->setFixedSize   (55, 55);
    connect (findInfo, SIGNAL (clicked ()), this, SLOT (slotFindInfoR ()));

    textEdit        = new QTextEdit ("Vehicle Info. will be shown here.", window);
    textEdit->setReadOnly (true);
    textEdit->setFixedSize (155, 555);

    layout          = new QGridLayout ();
    centralWidget->setLayout (layout);
    layout->addWidget (refresh, 0, 0);
    layout->addWidget (zoomIn, 1, 0);
    layout->addWidget (zoomOut, 1, 1);

    layout->addWidget (panLeft, 2, 0);
    layout->addWidget (panRight, 2, 1);
    layout->addWidget (panTop, 3, 0);
    layout->addWidget (panBottom, 3, 1);

    layout->addWidget (panBottomRight, 4, 0);
    layout->addWidget (panBottomLeft, 4, 1);
    layout->addWidget (panTopRight, 5, 0);
    layout->addWidget (panTopLeft, 5, 1);

    layout->addWidget (findInfo, 6, 0);
    layout->addWidget (textEdit, 7, 0);

    window->setCentralWidget (centralWidget);
    window->setWindowFlags (Qt::WindowStaysOnTopHint);
    window->show ();
} 
```

成员函数调用：

```
void controlRThroughQt :: slotRefreshR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (0, 0, 0); }

void controlRThroughQt :: slotPanLeftR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (1, 0, 0); }
void controlRThroughQt :: slotPanRightR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (2, 0, 0); }
void controlRThroughQt :: slotPanTopR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (3, 0, 0); }
void controlRThroughQt :: slotPanBottomR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (4, 0, 0); }

void controlRThroughQt :: slotPanTopLeftR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (5, 0, 0); }
void controlRThroughQt :: slotPanTopRightR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (6, 0, 0); }
void controlRThroughQt :: slotPanBottomLeftR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (7, 0, 0); }
void controlRThroughQt :: slotPanBottomRightR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (8, 0, 0); }

void controlRThroughQt :: slotZoomInR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (9, 0, 0); }
void controlRThroughQt :: slotZoomOutR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (10, 0, 0); }

void controlRThroughQt :: slotFindInfoR () { rdaTilesOnR :: loadNewTileAndPlotPointsOnRWidget (12, 0, 0); } 
```

**更新：**

* * *

```
controlRThroughQt :: controlRThroughQt () : 
                    window (new QMainWindow  ()),
                    centralWidget (new QWidget (window)),
                    refresh (new QPushButton ("Start R", window)), 
                    zoomIn (new QPushButton ("Zoom\nin", window)),
                    zoomOut (new QPushButton ("Zoom\nout", window)),
                    panLeft (new QPushButton ("Pan\nLeft", window)),
                    panRight (new QPushButton ("Pan\nRight", window)),
                    panTop (new QPushButton ("Pan\nTop", window)),
                    panBottom (new QPushButton ("Pan\nBottom", window)),
                    panBottomRight (new QPushButton ("Bottom\nRight", window)),
                    panBottomLeft (new QPushButton ("Bottom\nLeft", window)),
                    panTopRight (new QPushButton ("Top\nRight", window)),
                    panTopLeft (new QPushButton ("Top\nLeft", window)),
                    findInfo (new QPushButton ("Find\nInfo.", window)),
                    textEdit (new QTextEdit ("Vehicle Info.", window)),
                    layout (new QGridLayout ()) 
```

**如上所示，我更新了我的代码，但错误`QTextEdit`仍然存​​在。当我从 Qt GUI 中完全删除 QTextEdit 时，错误消失了。
请指导。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:03:42.747

您所做的**不是初始化，而是分配**。
检查**[成员初始化列表](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor/8523361#8523361)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:04:23.257

从我可以从代码中看出，问题出在 Qt 本身。编写一个仅包含 QTextEdit 的最小应用程序，看看是否会遇到类似的错误。如果是，这是 Qt 的问题，而不是您的问题，您应该将错误添加到抑制列表中。

# .net - MVC 中的 Pdf Viewer 在 View 中显示 pdf 内容

> ID：13721529
> 
> 赞同：6
> 
> 时间：2012-12-05T10:51:04.767
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, pdf-viewer

我有一个名为 ShowDocument.cshtml 的视图。

我想在视图中显示 pdf 文档。首先，我将 html 页面转换为 .pdf，其中包含以下信息：

控制器中的代码是：

```
Stream stream = HtmlToPdfBuilder.GetHtmlForm(model.Type, 16); 
```

如果我给 return `File(stream, "application/pdf", "Authorization.pdf")`，我将得到保存，另存为对话框。

我不想要这个对话框，我只想在页面内显示 pdf 内容。

那么 MVC 中是否有任何 pdf 查看器，以便我可以仅使用某些控件在视图中显示内容

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T16:12:45.177

这可能不是您想要的，但可能满足您的需要。您可以将 PDF 嵌入到局部视图中，然后通过 ajax 使用表单提交按钮上的 PDF 更新局部视图。

示例代码：局部视图

```
 @model Test.Models.ViewModel

<style type="text/css">

#pdfbox
{
    width:600px;
    height:400px;
    border: 5px solid #ccc;
}

</style>

<object id='pdfbox' type="application/pdf" data="@Url.Action("GeneratePDF", "Home", Model)">
    Click @Html.ActionLink("here", "GeneratePDF", "Home") to view the file.
</object> 
```

控制器调用：

```
 public ActionResult GeneratePDF(ViewModel model)
    {

        byte[] bytes = OpenPDFAndGetBytes("Thepdfname");
        return File(bytes, "application/pdf");
    }

    public ActionResult RenderPDF(LabelViewModel model)
    {
        return PartialView(model);
    } 
```

主要观点：

```
@using (Ajax.BeginForm("RenderPDF", "Home", new AjaxOptions { UpdateTargetId = "pdf" }))
{
    <table>
        <tr>
            <td>
                <fieldset>
                    <legend>Fill the form:</legend>
                        Some form junk can go here
                    <br />
                    <input type="submit" value="Display PDF" />
                </fieldset>
            </td>
            <td>
                <div id='pdf'>
                    @{
                        Html.RenderPartial("RenderPDF", Model);
                    }
                </div>
            </td>
        </tr>
    </table>
} 
```

（编辑：将“主视图”更改为标题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:54:28.953

PDF 文件的显示方式取决于用户的浏览器。我认为您的问题没有真正的“解决方案”。

当我遇到这个问题时，我使用 GhostScript 库将 PDF 文件渲染为服务器上的多个 PNG 图像，然后在我的视图中引用 PNG 文件。

# eclipse - 如何使用 Eclipse TPTP 项目示例

> ID：13721532
> 
> 赞同：0
> 
> 时间：2012-12-05T10:51:07.647
> 
> 标签：eclipse

我已经安装了 Eclipse TPTP 和 TPTP 项目示例。我很确定 TPTP 项目示例包含许多现成的示例。不幸的是，我不知道如何获得这些示例。任何人都可以对此有所了解吗？

# mysql - 在 MySQL 中存储可变产品选项

> ID：13721539
> 
> 赞同：0
> 
> 时间：2012-12-05T10:51:34.080
> 
> 标签：mysql, database-design, relational-database

我正在建立一个网站的一部分，其中产品可以有各种影响价格的选项。想想床上用品。有尺寸选项，是否需要床头板等等。每个选项都会影响成本。但是，并非所有产品都具有所有选项。

例如，带床头板的 90 厘米床与不带床头板的 120 厘米床的成本不同。

我使用过可能只有一个选项（例如 T 恤尺寸或颜色）的产品选项，但没有像这样的复杂选项。在我的 MySQL 数据库中存储这些选项的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:51:05.600

这是我想到的设计，这是一个没有看到你的架构的假设。希望它能澄清我的评论。如果这与您的要求不同，请告诉我们。乐意效劳。:)

参考

## * [SQLFIDDLE](http://sqlfiddle.com/#!2/f61ab/3)

选项表：

```
ID  NAME              ATTRIBUTE     COST
1   headboard         S             55.5
2   headboard         L             65.2
3   headboard         M             60.3
4   colour_change    (null)         20.3
5   polishing        (null)         70.2 
```

产品表：

```
ID      NAME      PCOST
1001    chair     50
1002    bed1      1200
1003    table     200
1004    cupboard  2000
1005    bed2      1000 
```

自定义表：

```
ID  PID     OID     CID
1   1002    3      (null)
2   1002    4      2
3   1003    5      (null)
4   1001    4      1
5   1004    5      (null) 
```

查询 1 以获取用于每个产品定制的选项的总和。

```
select c.pid, sum(o.cost)
from custom c
left join options o
on c.oid = o.id
group by c.pid
; 
```

结果1：

```
PID     SUM(O.COST)
1001    20.3
1002    80.6
1003    70.2
1004    70.2 
```

查询 2：按产品细分期权成本、产品成本

```
-- prod cost, option cost by options and prod
select x.pid, p.name, p.pcost, x.optCost,
x.optChoices
from prod p
right join (
select c.pid, sum(o.cost) as optCost,
  group_concat(o.name, ' ') optChoices
from custom c
left join options o
on c.oid = o.id
group by c.pid) as x
on x.pid = p.id
; 
```

结果 2：

```
PID     NAME         PCOST  OPTCOST     OPTCHOICES
1001    chair        50     20.3        colour_change
1002    bed1         1200   80.6        headboard ,colour_change
1003    table        200    70.2        polishing
1004    cupboard     2000   70.2        polishing 
```

问题 3：最终答案

```
-- total cost
select x.pid, p.name, x.optChoices,
(p.pcost + x.optCost) totalCost
from prod p
right join (
select c.pid, sum(o.cost) as optCost,
  group_concat(o.name, ' ') optChoices
from custom c
left join options o
on c.oid = o.id
group by c.pid) as x
on x.pid = p.id
; 
```

结果 3：

```
PID     NAME       OPTCHOICES                   TOTALCOST
1001    chair      colour_change                70.3
1002    bed1       headboard ,colour_change     1280.6
1003    table      polishing                    270.2
1004    cupboard   polishing                    2070.2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:54:52.807

您可以创建两个表：

```
1) Product : id, name, desc, cost

2) Option_master : optionId, option_name, option_unit
3) product_option_mapping : pom_id, optionid, productid 
```

假设您对产品有两种选择：

产品表将具有：

```
id     name           desc        cost
1      Product1   Product1_desc    100 
```

option_master 表将具有 ::

```
optionId    option_name      option_unit    
1              size                cm     
2             headboard          null 
```

并且 product_option_mapping 将具有产品和选项的映射

# matlab - 如何从matlab mfile中的传递函数获得具有两个输入的状态空间

> ID：13721543
> 
> 赞同：0
> 
> 时间：2012-12-05T10:51:39.580
> 
> 标签：matlab

我有一个带有两个零和四个极点的传递函数：

```
G(s)=   (as^2+bs+c)/(s^4+ds^3+es^2 ) 
```

其中 a,b,c,d 和 e 是常数，'s' 用于拉普拉斯变换。

我需要将传输函数转换为状态空间，使其有两个输入

*即*矩阵B有两列。

我知道 MatLab MFile 中的命令 tf2ss ，但它给了我一个输入的状态空间。我将从这个 TF 中得到的空间状态方程；我必须在 simulink 的空间状态块中使用它们。我必须给这个块两个输入。我怎样才能做到这一点？任何指导。

# ruby - 安装 caldecott 后 vmc 无法正常工作

> ID：13721549
> 
> 赞同：0
> 
> 时间：2012-12-05T10:51:47.927
> 
> 标签：ruby, cloud-foundry

我正在使用此说明安装 caldecott [http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)，但之后 vmc 不起作用：

```
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- restclient (LoadError)
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /var/lib/gems/1.8/gems/tunnel-vmc-plugin-0.1.9/lib/tunnel-vmc-plugin/tunnel.rb:2
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /var/lib/gems/1.8/gems/tunnel-vmc-plugin-0.1.9/lib/tunnel-vmc-plugin/plugin.rb:2
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:59:in `gem_original_require'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:59:in `require'
    from /var/lib/gems/1.8/gems/vmc-0.4.2/lib/vmc/plugin.rb:43:in `load_all'
    from /usr/lib/ruby/1.8/set.rb:194:in `each'
    from /usr/lib/ruby/1.8/set.rb:194:in `each_key'
    from /usr/lib/ruby/1.8/set.rb:194:in `each'
    from /var/lib/gems/1.8/gems/vmc-0.4.2/lib/vmc/plugin.rb:42:in `load_all'
    from /var/lib/gems/1.8/gems/vmc-0.4.2/bin/vmc:9
    from /usr/local/bin/vmc:19:in `load'
    from /usr/local/bin/vmc:19 
```

我该如何解决？

为了重现：

```
1\. sudo gem install caldecott --no-rdoc --no-ri
2\. sudo gem install tunnel-vmc-plugin 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:47:14.163

由于 vmc 0.4 是一个新版本，在线文档有点过时。你真正需要做的是安装rest-client，虽然这应该依赖于tunnel-vmc-plugin！

```
gem install rest-client 
```

你应该好好去！

# php - 使用 Php 将单个 PDF 拆分为子 PDF

> ID：13721551
> 
> 赞同：0
> 
> 时间：2012-12-05T10:51:52.420
> 
> 标签：php, pdf

有一项任务是使用 php 将单个 pdf 分解为多个 pdf 文档。到目前为止，我还没有编写任何代码，因为我不确定要遵循哪种方式。但我会尽力解释这里的情况。

我有一个包含几页的 pdf 文档，我想要的只是通过传递页码将这个 pdf 分成多个 pdf。

因此，假设我将起始页作为 1 并将结束页作为 10 传递。php 将从第 1 页到第 10 页读取 pdf，并将为这 10 页创建一个新文档。

希望有办法实现这一目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:05:05.650

仅在 PHP 中没有好的方法可以做到这一点；据我所知，没有一个 PHP PDF 库可以做到这一点。这是外部工具的任务。

如果您在 Linux 服务器上，则[在 Unix.SE 上使用 Python 有这种方法](https://unix.stackexchange.com/questions/12482/split-pages-in-pdf)。然后是[`pdftk`](http://www.linux.com/learn/tutorials/442414-manipulating-pdfs-with-the-pdf-toolkit)命令行工具，“用于 PDF 的瑞士军刀”。谷歌搜索“拆分 PDF 页面”将为您提供更多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-08T12:33:55.693

您可以使用[FPDI](https://github.com/Setasign/FPDI)和[FPDF](https://www.fpdf.org/)的组合使用本机 php 来执行此操作。

```
$new_pdf = new setasign\Fpdi\FPDI();

for($i = 20; $i <= 200; $i++){ //excracting pages from 20 to 200
    $new_pdf->AddPage();
    $new_pdf->setSourceFile("source.pdf");
    $new_pdf->useTemplate($new_pdf->importPage($i));
}

$new_pdf->Output("output.pdf", "F"); 
```

# ruby-on-rails - Ruby中的哈希键？

> ID：13721559
> 
> 赞同：0
> 
> 时间：2012-12-05T10:52:23.093
> 
> 标签：ruby-on-rails, ruby

我正在尝试初始化，然后在哈希对值中`hash pair`查找使用的密钥。`has.key`我已经给出了如下条件：

```
if seen.has.key?(var)
    <Execute Condition> 
```

你能解释一下这实际上是如何工作的吗？我试过环顾四周，但仍然让我感到困惑。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T10:57:00.047

`seen={}`将一个空的 hashmap 分配给变量`seen`并`has.key`调用`key`object 上的方法`has`。假设这`has`是一个哈希映射，`key`它是一个将值作为其参数并返回映射到哈希映射中给定值的键的方法。

`seen.has.key?(var)`调用该`has`方法`seen`，然后`key?`使用该结果的参数调用该方法`var`。由于 hashmap 对象没有`has`方法，这将导致`NoMethodError`.

# javascript - 覆盖 IE<9 中的默认拖动行为

> ID：13721568
> 
> 赞同：1
> 
> 时间：2012-12-05T10:52:58.273
> 
> 标签：javascript, internet-explorer, drag

编辑：JSFiddle --> [http://jsfiddle.net/mcD3h/2/](http://jsfiddle.net/mcD3h/2/)

我编写了一些 javascript 来允许用户在屏幕上平移图像。这在 Chrome、Firefox 和 IE9 中运行良好，但在 IE7 和 IE8 中，拖动鼠标光标会产生一个带有一条线的圆圈。有谁知道为什么？这是一些代码：

```
 $img.bind('mousedown', function (e) {
            if (e.which == 1) {
                $('body').addClass('mouseIsDown');
                $img.data('leftMouseDownPos', { x: e.offsetX, y: e.offsetY });
                e.preventDefault();
            }
        }).bind('mousemove', function (e) {
            if (e.which == 1) {
                //console.log('mousemove 1');
                var dragFrom = $img.data('leftMouseDownPos');
                if (
                    $('body').is('.mouseIsDown') && // IE Requires this for some reason - cant just rely on dragFrom being undefined
                    dragFrom &&
                    ((dragFrom.x - e.offsetX > 0 && dragFrom.x - e.offsetX > 5) ||
                        (e.offsetX - dragFrom.x > 0 && e.offsetX - dragFrom.x > 5) ||
                        (dragFrom.y - e.offsetY > 0 && dragFrom.y - e.offsetY > 5) ||
                        (e.offsetY - dragFrom.y > 0 && e.offsetY - dragFrom.y > 5))) {
                    // The have dragged more than 5px so it probably isn't by acident
                    //console.log('drag: ' + e.offsetX + ':' + e.offsetY);

                    // Don't allow them to drag the image off screen
                    var newLeft = parseInt($img.css('marginLeft')) + e.offsetX - dragFrom.x;
                    //if (newLeft >= 0 && newLeft <= $img.width() - $img.parent().width())
                    $img.css({ marginLeft: newLeft + 'px' });

                    var newTop = parseInt($img.css('marginTop')) + e.offsetY - dragFrom.y;
                    //if (newTop >= 0 && newTop <= $img.height() - $img.parent().height())
                    $img.css({ marginTop: newTop + 'px' });

                    e.preventDefault();
                }
            }
        }).bind('mouseup', function (e) {
            $img.data('leftMouseDownPos', undefined);
            $('body').removeClass('mouseIsDown');
            switch (e.which) {
                case 1:
                    {
                        // Zoom in on double left click
                        var lastUp = $img.data('lastLeftUp');
                        if (lastUp && Date.now() - lastUp < 500) {
                            zoom($img.data('zoomLevel') + 0.1, e.offsetX, e.offsetY);
                        }
                        $img.data('lastLeftUp', Date.now());
                        break;
                    }
                case 2:
                    {
                        // Reset on middle click
                        $img.removeAttr('style').css({ maxHeight: $(window).height() * 0.98 + 'px' });
                        break;
                    }
                case 3:
                    {
                        // Zoom out on double right click
                        var lastUp = $img.data('lastRightUp');
                        if (lastUp && Date.now() - lastUp < 500) {
                            // Zooping out around a certain point looks weird
                            //zoom($img.data('zoomLevel') - 0.1, e.offsetX, e.offsetY);
                            zoom($img.data('zoomLevel') - 0.1, undefined, undefined);
                        }
                        $img.data('lastRightUp', Date.now());
                        break;
                    }
            }
            e.preventDefault();
        }).bind('contextmenu', function (e) {
            e.preventDefault();
        }); 
```

所有缩放的东西都可以忽略。我看到它的方式是因为我在每个事件上都执行 e.preventDefault() IE 甚至不应该知道用户正在拖动。

任何帮助都会很棒，

乔

# asp.net-mvc - 我应该在 ASP.NET MVC 4 中使用 AsyncController 吗？

> ID：13721571
> 
> 赞同：30
> 
> 时间：2012-12-05T10:53:02.700
> 
> 标签：asp.net-mvc, asynchronous, asp.net-mvc-4, async-await

这个类有这样的描述：

```
Provided for backward compatibility with ASP.NET MVC 3. 
```

来源只是：

```
public abstract class AsyncController : Controller
{
} 
```

我在 MSDN 上找不到任何关于弃用此类的文档。我应该将 AsyncController 的使用替换为 Controller 吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-05T10:56:47.377

> 我应该在 ASP.NET MVC 4 中使用 AsyncController 吗？

不。

> 我应该将 AsyncController 的使用替换为 Controller 吗？

是的，异步操作在 asp.net-mvc 4 中以新的方式实现，使用[任务类](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)

> 结合 .NET 4.5 的 ASP.NET MVC 4 控制器类使您能够编写返回任务类型对象的异步操作方法。.NET Framework 4 引入了称为任务的异步编程概念，并且 ASP.NET MVC 4 支持任务。任务由 System.Threading.Tasks 命名空间中的 Task 类型和相关类型表示。.NET Framework 4.5 使用 await 和 async 关键字构建了这种异步支持，这使得使用 Task 对象比以前的异步方法复杂得多。await 关键字是语法简写，用于指示一段代码应该异步等待另一段代码。async 关键字表示可用于将方法标记为基于任务的异步方法的提示。等待，异步的组合，Task 对象使您可以更轻松地在 .NET 4.5 中编写异步代码。异步方法的新模型称为基于任务的异步模式 (TAP)。本教程假设您熟悉使用 await 和 async 关键字以及 Task 命名空间的异步编程。

更多阅读[在 ASP.NET MVC 4 中使用异步方法](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

# php - 在带有 . 表名（MSSQL/PHP）中的（点）不起作用？

> ID：13721573
> 
> 赞同：0
> 
> 时间：2012-12-05T10:53:14.320
> 
> 标签：php, sql

我对这个简单的 SELECT 命令有问题，我已经在我的 sql 连接字符串中选择了哪个数据库，但似乎认为我的表中的“cellnames”是一个数据库，而“rnc”是表名，对吧？

```
$data = mysql_query("
    SELECT * FROM cellnames.rnc
    ") or die(mysql_error()); 
```

这输出：

> “表 'rnc' 的用户 ''@'localhost' 拒绝 SELECT 命令”

但是，表名是“cellnames”，列是“rnc”。它怎么会这样运作？我需要做什么才能让它发挥作用？

我也试过这个：

```
$data = mysql_query("
    SELECT * FROM cellnames
    ") or die(mysql_error()); 
```

结果是：

> 没有选择数据库

这可能与它有关吗？我已经在连接字符串中指定了数据库，但也许这不起作用？这是我的连接字符串：

```
$connectionInfo = array( "Database"=>"ranos_se");
$conn = sqlsrv_connect( $serverName, $connectionInfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:59:12.830

You should try with `sqlsrv_query` instead of `mysql_query`. As you are using `MSSQL`, not `MYSQL`.

like

```
$connectionInfo = array( "Database"=>"ranos_se");
$conn = sqlsrv_connect( $serverName, $connectionInfo);
$data = sqlsrv_query($conn, "SELECT * FROM cellnames") or die(sqlsrv_errors()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:03:37.113

As Yograj pointed out, you are using the MySQL library, which is not compatible with SQL Server. You should look into using [PDO_SQLSRV](http://php.net/manual/en/ref.pdo-sqlsrv.php) to connect to your database, which is an improvement over the old db_query() functions.

# php - 如何处理 PHP OOP 中的静态方法？

> ID：13721574
> 
> 赞同：1
> 
> 时间：2012-12-05T10:53:15.583
> 
> 标签：php, oop

我有一个名为`LClass`. 然后我创建其他类，扩展`LClass`. 例如，这是数据库中表的类。( `user`, `order`, 等等...) 在每个类中我都使用 some `static function getRecordById($id)`，它返回一些数组。这些函数之间的区别，它们使用不同的表名来执行。我想把这个放进`static function getRecordById($id)`去`LClass`。问题是，该函数是静态的，为此我需要在执行类似`$someUser = user::getRecordById($id)`.
或者有什么其他建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:59:14.983

*仅*使用静态方法进行编程不是面向**对象**的编程，而是“面向类”的编程。它本质上与带有少量命名空间的过程代码相同。静态方法有它们的用途，但它是有限的。静态方法永远不应该做一个类的主要工作。

阅读[如何不使用静力学破坏您的可测试性](http://kunststube.net/static/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:56:00.067

避免使用静态方法。就如此容易。

关于您对原始问题的评论，请考虑以下代码示例：

```
$user = new User($id); 
```

# java - JCE 无法在 java swing 应用程序中验证提供者 BC

> ID：13721579
> 
> 赞同：30
> 
> 时间：2012-12-05T10:53:23.437
> 
> 标签：java, encryption

我正在使用一些加密技术在 Java 中创建一个基于 swing 的应用程序。但是 javax.crypto.KeyGenerator.getInstance("AES", "BC") 给出了异常：

```
java.security.NoSuchProviderException: JCE cannot authenticate the provider BC
        at javax.crypto.SunJCE_b.a(DashoA13*..)
        at javax.crypto.KeyGenerator.getInstance(DashoA13*..) 
```

那么问题是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-10-24T09:32:58.053

1.  编辑`jre\lib\security\java.security`
2.  添加`security.provider.10=org.bouncycastle.jce.provider.BouncyCastleProvider`
3.  复制`bc*.jar`到`jre\lib\ext`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-05T15:24:32.493

为了扩展 GregS 的评论，所有 JCE 提供者 JAR 必须先签名，然后才能被您的 Java 运行时信任。

BouncyCastle 尽职尽责地提供可以正常工作的签名 JAR。但是，如果您从该 JAR 中提取类文件，或重新编译源代码，则会删除签名并导致 Java 拒绝该代码。

请参阅这个相关的 SO 问题：[How to sign a custom JCE security provider](https://stackoverflow.com/questions/1756801/how-to-sign-a-custom-jce-security-provider)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-10T03:43:14.463

对于那些发现这个问题但实际使用`SpongyCastle`的人来说，知道在 Android 上没有这样的签名测试可能会很有趣，并且对于您的测试，您可以通过 openJDK-8 使用 SpongyCastle，因为它也不关心签名。

作为参考，使用 SpongyCastle 时，错误显示为：

```
java.lang.SecurityException: JCE cannot authenticate the provider SC 
```

[本期](https://github.com/rtyley/spongycastle-old/issues/13)更多信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-29T10:38:09.087

几周以来，我们一直在遭受同样的问题困扰，并且尝试了很多建议的步骤均无济于事。在下面提供我们的解决方案，这样其他人就不必像我们一样受苦了！

我们试图使用 bcprov-ext-jdk15on-162.jar，添加到类路径，包含在 JBoss lib 目录中，与 WAR 捆绑，标记为已提供并添加到 JBoss /lib 目录，但没有运气。

最后，我们尝试了不同版本的 bouncycastle，发现了一个较新的版本，其签名可以通过我们特定的 Java 版本的 jarsigner (1.5X) 进行验证。

尽管我们的 Java 版本可以验证 jar 的签名，但当 .jar 被打包到 WAR 中时，JBoss 以某种方式使签名无效。

最后，我们的解决方案是；

```
1\. Add bouncycastle jar to JBoss classpath
2\. Add 'org.bouncycastle.jce.provider.BouncyCastleProvider' to 'java.security' providers
3\. Mark bouncycastle in your WAR as a 'provided' dependency 
```

一旦我们在类路径中有一个版本的 .jar 并且确定我们的 WAR 没有将它打包进去，我们就很成功了。

这个问题似乎与您碰巧使用的 Java/JBoss 版本紧密相关。因此，如果此解决方案对您不起作用，我建议您测试不同版本的 bouncycastle

```
jarsigner -verify <bouncycastle.jar> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-31T09:01:40.057

这个问题有很多解决方案，但不幸的是没有人谈论导致问题的原因。

如果您正在生成一个包含 BC.jar 的可执行 jar（以任何依赖项的形式），那么如果以下条件匹配，则会出现此问题：

1.  通过 eclipse 的导出选项生成 jar 即 Export-> Runnable Jar File -> Libary handling {extract required libraries into generated Jar}-> FINISH

繁荣，现在你遇到了麻烦，你将面临一个错误，即**JCE 无法验证提供者 BC**

上述问题的原因是，当您使用选项 1 创建一个 jar 时，实际上是在再次解压 BouncyCastle jar，这违反了与 BC 相关的安全性。因此，每当您再次运行它时，java 都会对其进行验证，并在您的关联 jar 中发现当前的 BC.jar 有错误。

所以，伙计们要确保你所做的事情是合理的，因为通过更改 JDK 的安全数据，这将使它工作，但并不适合所有人。

如何使它工作？{这将只在本地/个人机器上工作，而不是在每台机器上}

1.  编辑 jre\lib\security\java.security 文件
2.  添加 security.provider.10=org.bouncycastle.jce.provider.BouncyCastleProvider
3.  将 bc*.jar 复制到 jre\lib\ext

就是这样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-08T05:16:55.427

对我来说，这个问题`bcprov-ext-jdk16.jar`被`sbt assembly`.

```
[warn] Merging 'META-INF/license/LICENSE.bouncycastle.txt' with strategy 'discard'
..
[warn] Merging 'META-INF/maven/org.jasypt/jasypt/pom.properties' with strategy 'discard'
[warn] Merging 'META-INF/maven/org.jasypt/jasypt/pom.xml' with strategy 'discard'
.. 
```

所以我最终使用了`bouncycastle.jar` [from`-classpath`](https://stackoverflow.com/a/18413058/432903)如下，

```
java -Denvironment=dev -cp chat-server.jar:/Users/prayagupd/.ivy2/cache/org.bouncycastle/bcprov-ext-jdk16/jars/bcprov-ext-jdk16-1.46.jar com.chat.server.ChatServer 
```

**也可以将 bouncycastle.jar 放到`$JAVA_HOME/jre/lib/ext`,**

```
cp /Users/prayagupd/.ivy2/cache/org.bouncycastle/bcprov-ext-jdk16/jars/bcprov-ext-jdk16-1.46.jar $JAVA_HOME/jre/lib/ext/

$ ls -l $JAVA_HOME/jre/lib/ext/
total 55208
-rw-r--r--  1 root  wheel   1887089 May  7 21:22 bcprov-ext-jdk16-1.46.jar
-rw-rw-r--  1 root  wheel   3860502 Sep  5  2017 cldrdata.jar
-rw-rw-r--  1 root  wheel      8286 Sep  5  2017 dnsns.jar
-rw-rw-r--  1 root  wheel     44516 Sep  5  2017 jaccess.jar
-rwxrwxr-x  1 root  wheel  18610276 Sep  5  2017 jfxrt.jar
-rw-rw-r--  1 root  wheel   1179093 Sep  5  2017 localedata.jar
-rw-rw-r--  1 root  wheel      1269 Sep  5  2017 meta-index
-rw-rw-r--  1 root  wheel   2022735 Sep  5  2017 nashorn.jar
-rw-rw-r--  1 root  wheel     41672 Sep  5  2017 sunec.jar
-rw-rw-r--  1 root  wheel    274148 Sep  5  2017 sunjce_provider.jar
-rw-rw-r--  1 root  wheel    248726 Sep  5  2017 sunpkcs11.jar
-rw-rw-r--  1 root  wheel     68924 Sep  5  2017 zipfs.jar 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-12T09:11:27.213

仅供参考：下面的步骤也解决了我的问题，而不是修改 java.security 并将 jar 复制到 \jre\lib\ext。

1.  在您的班级中添加 Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()) 。
2.  将提供的范围添加到 pom.xml 中的 bcprov.*.jar 依赖项。
3.  将 bcprov.*.jar 放入您的特定文件夹（例如：\lib），然后在运行项目时引用它。

# blackberry - 运行黑莓应用程序时更改不生效

> ID：13721584
> 
> 赞同：0
> 
> 时间：2012-12-05T10:53:36.037
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

Hai 正在开始我的新 BB 应用程序。我尝试使用 HelloBlackBerry。我成功地运行过它一次，它的工作原理就是这样。第一次运行后，我做了一个改变

```
public HelloBlackBerryScreen() {
    super( MainScreen.VERTICAL_SCROLL | MainScreen.VERTICAL_SCROLLBAR );
    setTitle( "HelloBlackBerry its my first app" );
} 
```

我改变的是我添加了“它是我的第一个应用程序”。当我将应用程序作为标题运行时，它只显示 HelloBlackBerry。我做错什么了？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:54:40.240

实际上，在这种情况下，当旧版本不清楚时，有时会发生这种情况，我们需要遵循这些步骤

1）清洁模拟器（见下图）

2）删除可交付成果文件夹

3）清理项目

4)刷新项目

5）建设项目

它可以正常![在此处输入图像描述](../Images/92e659dc2e89eef6864359453c63a6fc.png)工作

# java - 通过 JNLP 传递动态参数

> ID：13721587
> 
> 赞同：9
> 
> 时间：2012-12-05T10:53:43.453
> 
> 标签：java, apache, web, jnlp, java-web-start

我正在使用 JavaScript 来执行 JNLP，它最终将执行我的客户端。

我正在尝试通过 JavaScript 执行将参数传递给 JNLP，并在我的客户端中通过 JNLP 获取这些参数。

例如，JavaScript 正在执行此 URL：

```
http://localhost:8080/MyJnlp.jnlp?login=14hhh765p&pass=ggyyktff 
```

现在我的 JNLP 将尝试以`<application-desc name tag`这种方式获取参数：

```
<application-desc name="..." main-class="com.main.execute" >
        <argument>-nosplash</argument>
        <argument>-q</argument>
    <argument><%=request.getParameter("login")%></argument>
    <argument><%=request.getParameter("pass")%></argument>
</application-desc> 
```

但它没有用。

我无法以这种方式在客户端代码中检索这些参数：

```
login=getParamsFromJnlp("login")
..

public String getParamsFromJnlp(String key) {
    return System.getProperty(key);
} 
```

JNLP 在 APACHE2.2 内部

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T12:34:33.683

为了能够将 http 参数插入应用程序的参数，.jnlp 文件需要根据请求动态“构建”，因为直到那时您才知道将使用哪些 http 参数。

java-web-start 的工作方式是它会多次下载 .jnlp，但除了第一次之外，它会从 jnlp 元素的 codebase 和 href 属性中指定的 url 下载文件。

所以在元素中动态添加argument-element是不够的，还需要添加到codebase/href属性中

```
<jnlp spec="1.0+" 
      codebase=<%=request.getScheme() + "://"+ request.getServerName() + ":" + request.getServerPort()+ request.getContextPath() + "/" %> 
      href="jnlpfile.jnlp&#063;username=<%=request.getParameter("username")%>&clienttoken=<%=request.getParameter("clienttoken")%>">

    ...
    <application-desc main-class="test.MainClass">
       <argument><%=request.getParameter("username")%></argument>
    </application-desc>
</jnlp> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:07:01.600

你确定JSP的响应类型是“application/x-java-jnlp-file”吗？

如果不是，请在 JSP 顶部提及并检查。

```
<% response.setContentType("application/x-java-jnlp-file"); %> 
```

# wordpress - 将容器添加到重力形式部分，而不是“页面”，而不是“部分”中断

> ID：13721594
> 
> 赞同：1
> 
> 时间：2012-12-05T10:54:10.660
> 
> 标签：wordpress, gravity

我正在寻找一种在页面上拥有一个重力表单的方法，但将其分成多个部分，然后使用 jQuery 显示/隐藏部分。我对部分的显示和隐藏很满意，但我需要以下方面的帮助：

如何在一组 Gravity 表单字段周围放置一些可引用的元素，以便我可以将它们定位为在块中显示/隐藏。

内置的“页面”功能实际上会重新加载 Wordpress 页面以显示第二组字段。我的设计师一直坚持这种形式是平滑的、一页的、褪色和酸味的。

干杯，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:56:08.023

您可以定位使用 jQuery 创建的 li 的 Gravity Forms 并隐藏它们。然后单击按钮，您可以再次显示它们。这没有动画，它只是隐藏/显示。如果你愿意，你可以添加一些动画，比如淡入。

显然，您需要更改`#field_1_1`and`#field_1_2`以匹配要隐藏/显示的 li 上的 ID 以及 click 函数的 ID。您可以在其中放置任意数量的内容，只需用逗号分隔即可。

这对您来说是一个快速简便的解决方案。让我知道这个是否奏效。

```
<script type="text/javascript">
    jQuery(document).ready(function() {

        jQuery('#field_1_1, #field_1_2').hide();

        jQuery('#idOfClickElement').click(function() {
            jQuery('#field_1_1, #field_1_2').show();
        });

    });
</script> 
```

我确定你知道在你的主题文件中把这段代码放在哪里，但如果不知道，把它包含`</head>`在 header.php 的结束标记之前或`</body>`footer.php 的结束标记之前。

# android - 如何在 OSM 的 toast 中添加触摸事件以显示纬度和经度

> ID：13721604
> 
> 赞同：0
> 
> 时间：2012-12-05T10:54:44.383
> 
> 标签：android, android-mapview, android-gesture

如何在我的代码中添加此功能？网址是这样的：[如何在 android 的 osm 地图中添加更多标记，请帮帮我](https://stackoverflow.com/questions/13719105/how-to-add-more-marker-in-osm-map-in-android-please-help-me)？我想添加功能以打印用户在屏幕上触摸的每个位置的吐司消息，并在吐司消息中的地图上显示其纬度和经度

```
public boolean onTouchEvent(MotionEvent event, MapView mapView) {   

    if (event.getAction() == 1) {                
        GeoPoint geopoint = (GeoPoint) mapView.getProjection().fromPixels((int) event.getX(), (int) event.getY());
        // latitude
        double lat = geopoint.getLatitudeE6() / 1E6;
        // longitude
        double lon = geopoint.getLongitudeE6() / 1E6;
        Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();
    }                            
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:53:23.317

使用这段代码并创建此类的对象并将其添加到 mapsOverlay

```
class MapOverlay extends com.google.android.maps.Overlay
{
    @Override
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {
       //...
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) 
    {   
        //---when user lifts his finger---
        if (event.getAction() == MotionEvent.ACTION_UP) {                
            GeoPoint p = mapView.getProjection().fromPixels(
                (int) event.getX(),
                (int) event.getY());
                Toast.makeText(getBaseContext(), 
                    p.getLatitudeE6() / 1E6 + "," + 
                    p.getLongitudeE6() /1E6 , 
                    Toast.LENGTH_SHORT).show();
        }                            
        return false;
    }        
} 
```

添加这一行

```
mapView.getOverlays().add(new MapOverlay()); 
```

# android - 从 gridview 中选择多个图像并显示在其他活动中

> ID：13721610
> 
> 赞同：0
> 
> 时间：2012-12-05T10:55:03.967
> 
> 标签：android, eclipse, gridview, android-intent

我正在创建画廊。我有显示所有图像的网格视图。现在我想这样做，当我们使用复选框选择多个图像时，另一个意图将启动，我已经完成，但现在我想在这个新意图中显示所选图像。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:36:58.767

基本上你想要的是点击按钮开始新的活动而不是吐司，然后显示选定的图像，对吧？

检查第 72 行：`selectImages = selectImages + arrPath[i] + "|";`

这是图像的路径，而 i 是您要以某种方式保存的位置，因为这样您将知道选择了哪些图像。例如，您可以将其保存为列表或数组，然后在按钮上单击启动新活动，在捆绑包中传递此列表或数组，并在新活动中获取图像 ID 并在位图数组缩略图 [图像 ID] 中查找图像。您将需要更改

`private Bitmap[] thumbnails;`

公开。试试看，如果您成功了，请告诉我们，如果没有，我们可以进一步帮助您；）

**编辑** 这里有更多帮助，在 bundle 中传递 int 数组

```
 Intent myIntent = new Intent(A.this, B.class);
    intent.putIntegerArrayListExtra("arr", pics);//pics is your array with id-s of bitmaps
    startActivity(myIntent); 
```

您将在按钮的 onClick 中添加它而不是 toast，并在下一个 Activity 中使用：

```
Intent i = getIntent();  
integer [] fromApics = i.getIntegerArrayListExtra("arr"); 
```

**编辑 2**

好的，我会为您编写一些代码，但请阅读并尝试理解它：在您的主要活动中更改以下内容：

```
selectBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            final int len = thumbnailsselection.length;
            int cnt = 0;
            String selectImages = "";
            ArrayList<Integer> pics=new ArrayList(thumbnailsselection.length);
            for (int i =0; i<len; i++)
            {
                if (thumbnailsselection[i]){
                    pics.add(i);
                    cnt++;
                    selectImages = selectImages + arrPath[i] + "|";

                }
            }
            if (cnt == 0){
                Toast.makeText(getApplicationContext(),
                        "Please select at least one image",
                        Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(getApplicationContext(),
                        "You've selected Total " + cnt + " image(s).",
                        Toast.LENGTH_LONG).show();
                Log.d("SelectedImages", selectImages);
                Intent myIntent = new Intent(AndroidCustomGalleryActivity.this, Test.class);
                 myIntent.putIntegerArrayListExtra("arr", pics);//pics is your array with id-s of bitmaps
                startActivity(myIntent);
            }
        }
    }); 
```

还设置在页面可见性的顶部：

```
public static String[] arrPath; 
```

创建名为 Test 的新 Activity，如下所示：

```
package com.isummation.customgallery; 
```

导入 java.util.ArrayList；

导入android.app.Activity；导入android.content.Intent；导入android.os.Bundle；

```
public class Test extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent i = getIntent();  
    ArrayList<Integer> fromApics = i.getIntegerArrayListExtra("arr");
    for(int y=0;y<fromApics.size();y++){
        System.out.println(AndroidCustomGalleryActivity.arrPath[fromApics.get(y)].toString());
    }

} 
```

}

不要忘记在清单文件中添加活动，您将能够在 logcat 中看到打印的图像路径。就是这样，我留给您自定义测试活动并制作所选图像的画廊或其他任何东西

# java - 我没有得到列的名称

> ID：13721611
> 
> 赞同：2
> 
> 时间：2012-12-05T10:55:07.237
> 
> 标签：java, swing, jtable, jpanel, jtableheader

我将 a`JTable`放在 a 中`JPanel`，但是当我显示时，我看到的是表格内容，但看不到列名。

```
public class Neww extends JPanel
{
    Connection conn = null;
    Statement st;
    DefaultTableModel model = new DefaultTableModel(new Object[][] {
        { " ", " " },
        { " ", " " },
        { " ", " " },
        { " ", " " },
        { " ", " " },
        { " ", " " }
    }, new Object[] {
        "ItemName",
        "No of items"
    });

    JTable table = new JTable(model);
    TableColumn ItemName = table.getColumnModel().getColumn(0);
    JComboBox comboBox = new JComboBox();
    Neww()
    {
        this.setLayout(new FlowLayout(FlowLayout.CENTER));
        this.add(table);

        comboBox.addItem("Spoon");
        comboBox.addItem("Plate");
        comboBox.addItem("Mixer");
        comboBox.addItem("Glass");
        ItemName.setCellEditor(new DefaultCellEditor(comboBox));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T10:59:44.050

有两种方法

*   （正确的方式）必须放在`JTable`，`JScrollPane`然后`JTableHeader`是可见的

*   从（将s更改为`JTableHeader`）并放入`JTable``JPanel``LayoutManager``BorderLayout``NORTH area``JPanel`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:00:05.923

1）包裹你的`JTable`内`JScrollPane`。像这样：

```
JTable table=...;

JPanel container = new JPanel();

JScrollPane jsp=new JScrollPane(table);

container.add(jsp); 
```

2）`getTableHeader()`在需要的地方使用并添加它（通常是北方）：

```
...

JTableHeader header = table.getTableHeader();

JPanel container = new JPanel(new BorderLayout());

// Add header at NORTH position
container.add(header, BorderLayout.NORTH);

//Add table below header
container.add(table, BorderLayout.CENTER); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:10:04.197

以下语句在您的代码中产生问题。

```
 this.add(table); 
```

添加表格时使用滚动窗格。

```
 add(new JScrollPane(table)); 
```

为什么要使用`JScrollPane`？

正如@OscarRyz 在此[评论中所述。](https://stackoverflow.com/questions/2320812/jtable-wont-show-column-headers)

> 它放入 JScrollPane 顶部组件（或顶部视图或类似名称）中的表头当没有顶部组件时，JTable 显示为无头。这是设计使然。

**编辑：**另请查看此[答案](https://stackoverflow.com/questions/13935934/java-jtable-column-headers-not-showing/13936925#13936925)以获取更多详细信息。

# jquery - 用于服务器端控制的 jQuery 选择器

> ID：13721615
> 
> 赞同：6
> 
> 时间：2012-12-05T10:55:16.450
> 
> 标签：jquery, asp.net

`$('#<%=lblName.ClientID%>')`和 和有什么不一样`$("[id$=lblName]")`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-05T10:57:24.350

`$('#<%=lblName.ClientID%>')`将找到具有ASP.Net 中的`id`属性提供的属性的元素。`ClientID`

`$("[id$=lblName]")`将找到一个`id`属性以 结尾的元素`lblName`，例如`foo-lblName`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:03:16.120

`$('#<%=lblName.ClientID%>')`- # 是JQuery 用来标识具有 id 的元素的 Id[选择器。](http://api.jquery.com/id-selector/)

`$("[id$=lblName]")`-[将选择所有具有](http://api.jquery.com/attribute-ends-with-selector/)以 lblName结尾的 id 属性的元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:03:54.097

第一个（`$('#<%=lblName.ClientID%>')`），id 选择器，将通过其 ID 找到一个元素。这非常快，因为它将使用本机`document.getElementById`

第二个，[属性以选择器结尾](http://api.jquery.com/attribute-ends-with-selector/)，以不同的方式工作。例如，在 IE 中，如果它以提供的值（或类似的东西）结尾，它将获取所有元素和每个元素的测试 ID。那要慢得多。在较新的浏览器中，可能会使用[querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)来查找该选择器的元素，但我不确定该功能是否支持它（好吧，[这里](http://www.blooberry.com/indexdot/css/syntax/selectors/attribute.htm)它的定义类似于 vailid css3 所以假设现代浏览器将支持以querySelectorAll 中的选择器）。

因此，总而言之，id 选择器在任何情况下都应该更快，并且在旧浏览器的情况下要快得多。同时，以选择器结尾允许您在不将其客户端 ID 传递给浏览器的情况下查找元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:25:59.933

只需添加我今天知道的内容，`$('#<%=lblName.ClientID%>')`只会选择一个元素，但是`$("[id$=lblName]")`会选择多个元素，因此如果您将相同的 id 分配给多个元素，并且如果您想遍历所有元素，那么第一种情况不会好好工作。

# c# - 连接对象列表中的元素

> ID：13721616
> 
> 赞同：0
> 
> 时间：2012-12-05T10:55:18.160
> 
> 标签：c#, list, join, linq-group

我有这堂课：

```
public class Note
{
    public DateTime Date { get; set; }
    public string Time { get; set; }
    public string Text { get; set; }
} 
```

和一份清单

```
List<Note> ungroupedNotes; 
```

我想要做的是将具有相同日期和时间的多个笔记组合成一个笔记（它们的文本属性应该连接在一起，日期和时间是相同的）并输出一个新的

```
List<note> groupedNotes; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:57:31.433

尝试这个：

```
var groupedNotes = ungroupedNotes.GroupBy(x => new { x.Date, x.Time })
                                 .Select(x => new Note
                                              {
                                                  Date = x.Key.Date,
                                                  Time = x.Key.Time,
                                                  Text = string.Join(
                                                           ", ",
                                                           x.Select(y => y.Text))
                                              })
                                 .ToList(); 
```

# css - 在无序列表中插入图像而不是项目符号

> ID：13721622
> 
> 赞同：0
> 
> 时间：2012-12-05T10:55:43.060
> 
> 标签：css

我有以下代码：

```
 <div class="extra-details">
                               <ul class="browse-product-usp">

                               <li>
                                <span class="text">
                                    Dimension: 11x11 inch
                                </span>
                              </li>

                            <li>
                                <span class="text">
                                    Paper Depth: 285 gsm
                                </span>
                            </li>

                    </ul>
            </div> 
```

这在浏览器中如下所示：

![在此处输入图像描述](../Images/c72d18a57b051181218771d8039ad1b4.png)

我的CSS如下：

```
 .text {
              color:#333;
              font-family: Helvetica, Arial, sans-serif;

  } 
```

当我输入以下代码时：

```
 ul{list-style-image:url(../img/arrow.png);} 
```

它从 iimage 行扭曲了我的文本。请帮助 ![在此处输入图像描述](../Images/2cff3ba2eaa91d52ea8b20c1f1797eab.png)

我希望箭头和文本在同一行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T10:56:31.063

试试这个;

```
ul {
    list-style-image:url('image.gif');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:32:41.477

您可以使用`background: url("image.gif") no-repeat scroll 0px 5px transparent;`而不是 list-style-image

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T11:02:02.597

**习惯于**在`background-image`您的`li`标签中

```
ul li {
background:url("http://cdn1.iconfinder.com/data/icons/silk2/resultset_next.png") no-repeat 0 3px;
line-height:25px;   
padding-left:25px;
} 
```

***[演示](http://tinkerbin.com/YkFiKQur)***

# entity-framework - SelectMany 会创建大量 SQL 选择语句，而不是使用 join 语句

> ID：13721623
> 
> 赞同：8
> 
> 时间：2012-12-05T10:55:43.377
> 
> 标签：entity-framework, linq-to-entities

我正在编写一个查询`SelectMany`并检查它在 LINQPad 中生成的 SQL。查询非常简单。

假设我有 3 个实体：`Customer`, `Order`, `OrderItem`. `OrderItem`保存有关订购什么产品和数量的信息。

我想`OrderItems`为一个客户得到所有。

```
context.Customers.First().Orders.SelectMany(o=>o.OrderItems) 
```

我得到了我期望的结果集，但 SQL 对我来说真的很奇怪。有一堆选择语句。首先它选择一个客户，这没关系。然后它选择一个订单（因为这个客户只有一个），然后为`OrderItem`之前选择的每个订单创建一个选择`Order`......所以我得到的选择数量与 selected的`OrderItems`+一样多。所以它看起来像：`Orders``Customer`

```
select top 1 from Customers;

select * from Orders where CustomerID = @cID;

select * from OrderItems where OrderID = @o1;
select * from OrderItems where OrderID = @o2;
select * from OrderItems where OrderID = @o3;
select * from OrderItems where OrderID = @o4; 
```

我期望的是这样的：

```
select oi.* 
from OrderItems oi
join Orders o on o.OrderID = oi.OrderId
join Customers c on c.CustomerID = o.CustomerID
where c.CustomerID = @someID 
```

一个选择，漂亮干净。

`SelectMany`真的像那样工作还是我做错了什么，或者我的模型有问题？我找不到任何关于这种简单`SelectMany`应该如何转换为 SQL 的示例。

这对于小数字无关紧要，但是当客户有 100 个订单，每个订单有 200 个订单项目时，就会有 20 000 个选择......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T13:30:35.917

您应该使用以下内容进行查询（使用 查询特定客户的订单商品`someId`）：

```
context.Customers.Where(c => c.Id == someId)
    .SelectMany(c => c.Orders.SelectMany(o => o.OrderItems)) 
```

或者 - 重现`First()`但使用单个数据库查询的行为：

```
context.Customers.Take(1)
    .SelectMany(c => c.Orders.SelectMany(o => o.OrderItems)) 
```

您的原始查询使用`First`（查询 1）加载客户，然后*延迟加载*加载该`Orders`客户的集合（查询 2），然后*延迟加载再次*加载每个加载的订单项目集合`Order`（查询 3 到 n）。为避免所有这些多个查询，您不得在查询表达式中使用“查询执行方法”，例如`First()`or`ToList()`等​​。

# c# - 如何在 C# 中将子项添加到 MenuStrip 的 ToolStripMenuItem

> ID：13721627
> 
> 赞同：4
> 
> 时间：2012-12-05T10:56:04.387
> 
> 标签：c#, winforms, menustrip

我已经`menustrip1`在我的 windows 窗体中添加了一个，并且我静态`toolstripmenuitem`地添加了一个 (WindowstoolStripmenuItem) `menustrip1`。我已经动态地创建了一个工具条菜单项。我想将此动态工具条菜单项添加到在设计时静态创建的静态菜单条项（WindowstoolStripmenuItem）。

```
ToolStripMenuItem itm = new ToolStripMenuItem();
itm.Name = "fm1";
itm.Text = "Form1"; 
```

如何将此子项添加到静态菜单条的 Windows 项。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T11:08:48.513

您可以将一个添加`ToolStripMenuItem`到另一个`ToolStripMenuItem.DropDownItems`集合。

如果您没有对您的 ToolStripMenuItem 的引用，您可以通过键（名称属性）或索引获取一个

```
var itm = menustrip1.Items["Text"];
var itm = menustrip1.Items[0]; 
```

这是代码

```
var menustrip1 = new System.Windows.Forms.MenuStrip();
var item = new System.Windows.Forms.ToolStripMenuItem()
{
    Name = "Test",
    Text = "Test" 
};
var item2 = new System.Windows.Forms.ToolStripMenuItem()
{
    Name = "Test",
    Text = "Test"
};
item.DropDownItems.Add(item2);
menustrip1.Items.Add(item); 
```

# c# - 处理过期的许可证？

> ID：13721629
> 
> 赞同：-2
> 
> 时间：2012-12-05T10:56:09.500
> 
> 标签：c#, .net, licensing

我们应该如何处理过期的应用程序许可证。我已经为不同角色创建了一个 .NET 应用程序和一些加密的许可证文件，许可证文件中包含到期数据。问题是，当许可证过期并且用户将系统（计算机）日期更改回某个较旧的日期时，许可证会再次生效。我发现微软产品也存在这个问题（例如Visual Studio）

那么我们应该如何处理过期的许可证来避免这种黑客攻击呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:04:05.813

我相信，如果微软不能真正保护他们的产品，那是因为这是不可能的。尽你所能，不要指望找到能保护你的应用程序的灵丹妙药。**你必须忍受这个事实。您的应用程序可能（将？）被黑客入侵**。

我只能建议您创建非常好的构建应用程序，以鼓励用户购买应用程序而不是盗版。

一些用户可以支付漂亮的应用程序，但不是糟糕的应用程序或具有太多保护的应用程序。

破解者将始终能够破解应用程序。您可以保留一个简单的许可解决方案，以避免广泛的黑客攻击，但仅此而已。**将更多的精力放在应用程序功能上，而不是试图保护它**。如果应用程序好，您将销售更多应用程序。

附注：.Net 应用程序更容易破解，因为使用某些工具（Reflector、ILSpy 等）很容易对二进制文件进行逆向工程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:04:13.770

一旦您的应用程序注意到应用程序过期，它就不应再将日期作为安全例程的一部分进行检查 - 您应该在某个地方设置一个标志，可能隐藏在注册表深处或一些不明显的文件/位置标记应用程序已过期；这样过期的许可证不会在日期更改时自动过期 - 这太容易了。

此外，如果可能，请考虑使用基于互联网的时钟来检查时间/日期，而不是用户 PC。

只要知道无论你做什么，它都不会阻止每个人。

# tridion - 删除链接到许多项目的组件

> ID：13721630
> 
> 赞同：4
> 
> 时间：2012-12-05T10:56:09.927
> 
> 标签：tridion

我有一个链接到数千个项目的组件（在这种情况下，所有其他项目都是组件）。是否有一种简单/快速的方法来删除组件并删除所有链接？

我目前正在使用 Tridion 5.3，并通过 TOM API 以编程方式执行此操作。对于链接到 10000 个其他组件的一个组件，这大约需要 7 个小时。我还有很多事情要做！

我正在从 R5.3 迁移到 2011，因此可以使用其中任何一个来完成任务。

我正在使用的代码如下...

```
static void Main(string[] args)
{
    var componentIDToRemove = "tcm:4-123456";

    var linkedComponentIDs = System.IO.File.ReadAllLines("C:\\...\\whereused.txt"); // ids of the components linked to tcm:4-123456

    TDS.TDSE tdse = new TDS.TDSE();

    foreach (var linkedComponentID in linkedComponentIDs)
    {
        TDS.Component component = null;
        TDS.ItemFieldValues itemFieldValues = null;

        try
        {
            component = (TDS.Component)tdse.GetObject(linkedComponentID, TDSDefines.EnumOpenMode.OpenModeView);

            itemFieldValues = component.MetadataFields["myfield"].value;

            var itemFieldValuesCount = itemFieldValues.Count;
            for (var i = itemFieldValuesCount; i > 0; i--)
            {
                if (itemFieldValues[i].ID == componentIDToRemove)
                {
                    component.CheckOut();
                    itemFieldValues.Remove(i);
                    component.Save();
                    component.CheckIn();
                }
            }
        }
        finally
        {
            // release the TDS objects from memory
            ReleaseObject(component);
            ReleaseObject(itemFieldValues);
        }
    }
}

public static void ReleaseObject(object o)
{
    try
    {
        if (o != null)
        {
            System.Runtime.InteropServices.Marshal.FinalReleaseComObject(o);
        }
    }
    finally
    {
        GC.Collect();
        GC.WaitForPendingFinalizers();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:58:03.250

通过 TOM 使用脚本是最好的方法。Tridion 2011 中的核心服务 API 可能不会快多少。

根据我的经验，以下是在 .NET 中通过 Interop 使用 TOM 时的最佳实践。

*   显式声明所有对象并释放它们。例如：

    ```
    // do this
    var items = folder.GetItems(16);
    foreach(var item in items)
    {
        // ...
    }
    if(items != null)
    {
        Marshal.FinalReleaseComObject(items);
    }

    // instead of this
    foreach(var item in folder.GetItems(16))
    {
        // ...
    } 
    ```

*   如果将对象传递给方法 - 传递 URI 而不是对象，并在方法内声明对象的新实例并在方法内显式释放它。

*   声明一个 TDSE 实例并引用它。创建多个实例是一个更昂贵的选择。

*   Where Used 可能需要很长时间并且对数据库来说很重。在运行代码之前更新数据库索引并运行维护脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T14:16:59.500

每次处理组件时，您似乎都会触发两次垃圾回收。这几乎肯定会对你的表现产生很大影响。

至于 TOM——大多数重要的事情都已经被其他人说了，尽管我认为没有人提到 ItemField 集合与使用 XML API 完成相同的工作相比*非常慢。*换句话说，使用 GetXml() 加载 XmlDocument（或者可能是 XDocument）...直接操作 XML，使用 UpdateXml() 将其推回并保存。

# javascript - 访问 json 元素数组

> ID：13721632
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:56:14.000
> 
> 标签：javascript, jquery, json

在这里工作演示：http: [//jsfiddle.net/8Q4Lf/3/](http://jsfiddle.net/8Q4Lf/3/)

我正在检索**json**上的数组并将其存储在一个隐藏`input`的函数中：

```
$.post("http://"+ document.domain + baseUrl + "/tickets/getCategoryDepartmentRelation/",
    function(dat){
        $('#departmentsByCategory_array').val(JSON.stringify(dat));         
}); 
```

调用返回此值：

```
{
    "Investigation Request": [
        "Client server",
        "Interface",
        "Engine"
    ],
    "Configure Planning": [
        "Interface",
        "Engine"
    ],
    "Bug Report": [
        "Client server",
        "Interface",
        "Engine",
        "Database"
    ],
    "Development Request": [
        "Interface",
        "Dev Management",
        "Database",
        "Client server",
        "Engine"
    ],
    "Suggestion Box": [
        "Dev Management"
    ],
    "Post Site Feedback": [
        "Web"
    ]
} 
```

这是`json`这个数组的表示：

```
Array
(
    [Investigation Request] => Array
        (
            [0] => Client server
            [1] => Interface
            [2] => Engine
        )

    [Configure Planning] => Array
        (
            [0] => Interface
            [1] => Engine
        )

    [Bug Report] => Array
        (
            [0] => Client server
            [1] => Interface
            [2] => Engine
            [3] => Database
        )

    [Development Request] => Array
        (
            [0] => Interface
            [1] => Dev Management
            [2] => Database
            [3] => Client server
            [4] => Engine
        )

    [Suggestion Box] => Array
        (
            [0] => Dev Management
        )

    [Post Site Feedback] => Array
        (
            [0] => Web
        )

) 
```

这`input`用以下数据填充：

```
<input type="hidden" name="demo" value="{&quot;Investigation Request&quot;:[&quot;Client server&quot;,&quot;Interface&quot;,&quot;Engine&quot;],&quot;Configure Planning&quot;:[&quot;Interface&quot;,&quot;Engine&quot;],&quot; Bug Report&quot;:[&quot;Client server&quot;,&quot;Interface&quot;,&quot;Engine&quot;,&quot;Database&quot;],&quot; Development Request&quot;:[&quot;Interface&quot;,&quot;Dev Management&quot;,&quot;Database&quot;,&quot;Client server&quot;,&quot;Engine&quot;],&quot;Suggestion Box&quot;:[&quot;Dev Management&quot;],&quot;Ticket Site Feedback&quot;:[&quot;Web&quot;]}" id="departmentsByCategory_array"> 
```

我可以用这个得到完整的数组：

```
$('#departmentsByCategory_array').val(); 
```

但我试图只检索一个元素的值，例如*"Configure Planning"*。

如何在 Javascript 或 jQuery 中使用这些值？（循环，比较...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:35:57.197

我发现了这个问题。您在 json 表示中返回了一个额外的空间，所以它是`" Bug Report"`您想要访问的，而*不是* `"Bug Report"`.

```
alert(data[' Bug Report']); 
```

此处修改小提琴：http: [//jsfiddle.net/8Q4Lf/2/](http://jsfiddle.net/8Q4Lf/2/)

钥匙也是如此`" Development Request"`。

```
alert(data[' Development Request']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:58:32.643

```
var data = JSON.parse($('#departmentsByCategory_array').val());
data['Configure Planning']; //returns Configure Planning array 
```

# jquery - KendoUI 自动完成功能在 Firefox 中不起作用

> ID：13721633
> 
> 赞同：0
> 
> 时间：2012-12-05T10:56:15.197
> 
> 标签：jquery, kendo-ui

我的 KendoUI 自动完成示例适用于 Chrome，但不适用于 Firefox。

我可以输入城镇名称，例如“沃特福德”，并获得以 chrome 显示的结果。

使用 FireBug，我可以看到我返回了有效的 JSON 结果，但得到了“TypeError：e is undefined”错误消息。

[http://jsfiddle.net/franH/znkV3/14/](http://jsfiddle.net/franH/znkV3/14/)

```
var app = new kendo.mobile.Application(document.body, {

transition: 'slide'
});

$(document).ready(function() {
$("#autoComplete").kendoAutoComplete({
    minLength: 7,
    dataTextField: "title",
    filter: "contains",
    placeholder: "Select town...",
    animation: {
        open: {
            effects: "fadeIn",
            duration: 2000,
            show: true
        }
    },

    close: function(e) {
        var str1 = "Dropdown Item Selected:" + " " + e.item;
        alert(str1);
    },
    dataSource: new kendo.data.DataSource({
        transport: {
            read: {
                url: "http://api.geonames.org/wikipediaSearchJSON",
                data: {
                    q: function() {
                        return $("#autoComplete").data("kendoAutoComplete").value();
                    },
                    maxRows: 10,
                    username: "pete"

                }
            }
        },
        schema: {
            data: "geonames"
        }
    }),
    change: function() {
        this.dataSource.read();
    }
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:23:09.713

您好，您正在从[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)不允许的另一个域请求**json**。但是默认情况下，[Chrome 并不关心这一点](https://stackoverflow.com/questions/2600574/crossdomain-settings-in-google-chrome)，这就是它仍然有效的原因。

由于您不能强制用户更改他们的浏览器设置，我建议您搜索[jsonp](http://en.wikipedia.org/wiki/JSONP)端点或其他支持它的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T20:24:22.517

我看到的唯一问题是事件没有这样的`e.item`事情`close`。使用 value 方法获取自动完成的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:05:55.280

通过添加行让它在 FireFox 中工作

```
datatype: "jsonp", 
```

更新了示例小提琴：http: [//jsfiddle.net/franH/znkV3/15/](http://jsfiddle.net/franH/znkV3/15/)

```
var app = new kendo.mobile.Application(document.body, {
  transition: 'slide'
});

$(document).ready(function() {
  $("#autoComplete").kendoAutoComplete({
    minLength: 7,
    dataTextField: "title",
    filter: "contains",
    placeholder: "Select town...",
    animation: {
        open: {
            effects: "fadeIn",
            duration: 2000,
            show: true
        }
    },

    close: function(e) {
        var str1 = "Dropdown Item Selected:" + " " + e.item;
        alert(str1);
    },
    dataSource: new kendo.data.DataSource({
        transport: {
            read: {
                url: "http://api.geonames.org/wikipediaSearchJSON",
                dataType: "jsonp",
                data: {
                    q: function() {
                        return $("#autoComplete").data("kendoAutoComplete").value();
                    },
                    maxRows: 10,
                    username: "pete"

                }
            }
        },
        schema: {
            data: "geonames"
        }
    }),
    change: function() {
        this.dataSource.read();
    }
  })
}); 
```

# php - 无法让 AJAX 响应出现在 DIV 中

> ID：13721636
> 
> 赞同：0
> 
> 时间：2012-12-05T10:56:21.393
> 
> 标签：php, jquery

$catlist 这是一个使用 AJAX 的 jQuery POST：

```
$(document).ready(function() {
    $('#taglist').change(function(){
        $.post('../includes/ajax.php', { taglist: $(this).find("option:selected").attr('value')}, function(data) {
        $("#catid").html(response.catlist);
    });
    });
}); 
```

这就是 ajax.php 中发生的情况：

```
if(isset($_POST['taglist'])){
    $catlist = '<select name="cat_id[]" size="5" multiple id="cat_id[]" class="darkgrey w200px">';
    $catlist .= '<option value="123">123</option>';
    $catlist .= '<option value="456">456</option>';
    $catlist .= '</select>';
    echo json_encode(array("status"=>"success", "catlist" => $catlist));
} 
```

在我的真实页面中，我将使用取决于 POST 的值填充 cat_id 选择。出于测试目的，我只是返回一个带有 2 个选项的静态选择。

出于某种我无法理解的原因，我似乎无法让响应出现在#catid 中，尽管发布和响应执行得很好（我正在使用 Firebug Net 面板来监控发布和响应）。请把你的灯给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:01:22.400

我注意到您没有与变量 $catlist 相关的回声

```
 echo json_encode(array("status"=>"success", "catlist" => "abc")); 
```

应该是类似的东西

```
echo json_encode(array("status"=>"success", "catlist" => $catlist)); 
```

你的 AJAX 响应代码应该更新

```
$("#catid").html(response.catlist); 
```

替换为

```
$("#catid").html(data.catlist); 
```

**编辑：**在上述解决方案之后，我完全不知道您的问题到底是什么，但我可以猜到您可能会遇到问题，因为您在 php 中的服务器端进行了 json 编码，因为您必须在你的代码。

```
var response = jQuery.parseJSON(data);
$("#catid").html(response.catlist); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:58:47.887

```
$(document).ready(function() {
    $('#taglist').change(function(){
        $.post('../includes/ajax.php', {taglist:$(this).find("option:selected").attr('value')}, function(data) {
          $("#catid").html(data.catlist);
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:01:32.020

试试这个：

```
$(document).ready(function() {
    $('#taglist').change(function(){
        $.ajax({
            type: "POST",
            url: '../includes/ajax.php',
            taglist: $(this).find("option:selected").attr('value'),
            success: function(data) {
                $("#catid").html(response.catlist);
            }
        });
    });
}); 
```

# java - 传递字节数组的只有两个元素的方法

> ID：13721637
> 
> 赞同：0
> 
> 时间：2012-12-05T10:56:29.217
> 
> 标签：java, android, bytearray

我正在开发一个应用程序，我需要在其中传递一个包含 12 个元素的数组。我正在使用套接字将此数组作为请求发送。我有很多按钮，我正在执行此操作。

整个数组保持不变以发送不同的动作，除了元素 10 和 11 被更改为不同的按钮。

例如，我将按钮 1 的这个值发送到 ON

```
byte[] data1 = new byte[1024], packet1 = 
{   
    (byte) 0x00,(byte) 0x00, (byte) 0x00, 
    (byte) 0x00,(byte) 0x00, (byte) 0x06, 
    (byte) 0x01,(byte) 0x05, (byte) 0x00, 
    (byte) 0x01,(byte) 0xff, (byte) 0x00 
}; 
```

这里只有第 10 号元素`(0x01)`将更改为按钮 2，`(0x02)`而我正在将第 11 号元素更改为 ON|OFF。

所以我想创建这样一个方法，我只能传递这两个元素。如果我通过`(0x01,0xff)`按钮 1 ON 和`(0x01,0x00)`按钮 1 关闭。

如果您有任何想法，请给我一些指导和建议以实现我的目标。目前我正在为所有按钮传递所有这些元素。但我想动态地做到这一点。

**编辑** 按钮 1 关闭

```
byte[] data1 = new byte[1024], packet1 = 
    {   
        (byte) 0x00,(byte) 0x00, (byte) 0x00, 
        (byte) 0x00,(byte) 0x00, (byte) 0x06, 
        (byte) 0x01,(byte) 0x05, (byte) 0x00, 
        (byte) 0x01,(byte) 0x00, (byte) 0x00 
    }; 
```

按钮 2 开启

```
byte[] data1 = new byte[1024], packet1 = 
    {   
        (byte) 0x00,(byte) 0x00, (byte) 0x00, 
        (byte) 0x00,(byte) 0x00, (byte) 0x06, 
        (byte) 0x01,(byte) 0x05, (byte) 0x00, 
        (byte) 0x02,(byte) 0xff, (byte) 0x00 
    }; 
```

按钮 2 关闭

```
byte[] data1 = new byte[1024], packet1 = 
    {   
        (byte) 0x00,(byte) 0x00, (byte) 0x00, 
        (byte) 0x00,(byte) 0x00, (byte) 0x06, 
        (byte) 0x01,(byte) 0x05, (byte) 0x00, 
        (byte) 0x02,(byte) 0x00, (byte) 0x00 
    }; 
```

按钮 3 开启

```
byte[] data1 = new byte[1024], packet1 = 
    {   
        (byte) 0x00,(byte) 0x00, (byte) 0x00, 
        (byte) 0x00,(byte) 0x00, (byte) 0x06, 
        (byte) 0x01,(byte) 0x05, (byte) 0x00, 
        (byte) 0x03,(byte) 0xff, (byte) 0x00 
    }; 
```

按钮 3 关闭

```
byte[] data1 = new byte[1024], packet1 = 
    {   
        (byte) 0x00,(byte) 0x00, (byte) 0x00, 
        (byte) 0x00,(byte) 0x00, (byte) 0x06, 
        (byte) 0x01,(byte) 0x05, (byte) 0x00, 
        (byte) 0x03,(byte) 0x00, (byte) 0x00 
    }; 
```

感谢和问候

# phpmyadmin - php / mysql：替换数据库的便捷方式？

> ID：13721640
> 
> 赞同：-1
> 
> 时间：2012-12-05T10:56:35.247
> 
> 标签：phpmyadmin

我正在寻找一种更快的方法来将数据库从我的本地系统替换为我的实时系统。目前我正在 phpmyadmin 中导出，在我的实时服务器上删除，导入 - 这非常耗时。有什么更好的建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:09:41.400

我已经做了很长一段时间（约 15 年）的 Web 开发人员，并且很长时间以来一直在使用 xxMP 堆栈和 phpMyAdmin。*如果您正在phpMyAdmin*中寻找一种更快的方法来执行此操作，那么您就不走运了，因为这是使用 phpMyAdmin 将数据库迁移到生产环境的唯一方法（导出然后导入）。

话虽如此，请记住 phpMyAdmin 只是使用 PHP 的 MySQL 的 GUI。它将反映对基础数据库所做的任何更改。因此，您可以对复制做一些相对聪明的事情：将登台服务器（本地数据库）设置为 Master，并将生产系统（远程数据库）设置为 Slave。然后禁用从站上的复制。这将防止从站复制主站上的更改。在您对本地/主数据库进行所需的所有更改后，只需在从属数据库上重新启用复制即可。然后，这会将更改迁移到您的生产服务器。

# php - 全局变量在 PHP 中没有按预期工作

> ID：13721643
> 
> 赞同：0
> 
> 时间：2012-12-05T10:56:42.173
> 
> 标签：php, global

我正在尝试用 PHP 制作自己的简单框架。一切正常，但我遇到了问题。

我将所有内容重定向回我的 index.php，然后从那里开始加载类和函数。我将 url 分割成段，效果很好，直到我想在一个类中使用这些段。

我有一个像这样的主控制器类：

```
class SimpleController {

    public function __construct()
    {
        global $uri;
        print_r($uri);
    }
  } 
```

它可以很好地打印出 $uri 变量，但是当我为我的主页制作一个新控制器时，我会这样做：

```
class home extends SimpleController{

private $template = 'home'; // Define template for this page

public function __construct()
{
    parent::__construct();
}

public function index()
{        

   print_r($uri);
  $view = new View($this->template); // Load the template

}} 
```

现在它给了我一个错误，未定义的变量。这怎么可能，因为我在父构造函数中使它成为全局的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:00:45.220

不要在 PHP 中使用“全局”。只需在控制器中使用公共变量；

新代码：

```
abstract class SimpleController {
    public $uri;

    public function __construct($uri)
    {
        $this->uri = $uri;
    }
}

class home extends SimpleController{
    private $template = 'home'; // Define template for this page

    public function index()
    {
        $this->uri; //This is the URI
        $view = new View($this->template); // Load the template
    }
} 
```

要创建您的控制器，只需使用：

```
$controller = new home();
$controller->uri = "URI";
$controller->index(); 
```

编辑：从家中删除了构造函数，当你想使用它时也传递 $uri.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:00:02.147

那是一个糟糕的设计。你不应该依赖全局状态。而是在你家的 costructor 中传递 $uri 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:00:54.690

> 这怎么可能，因为我在父构造函数中使它成为全局的？

`global $uri;`这是一个新的作用域，所以如果你想访问它，你必须再次将它标记为全局（ ）。

但这是一个糟糕的设计，使用成员或类变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:02:18.560

正如@yes123 所说，您的设计非常糟糕，您应该避免使用全局变量。否则，`global`当您想使用全局变量时，您需要在每个函数中使用，将您的代码更改为：

```
public function index()
{
  global $uri;       
  print_r($uri);
  $view = new View($this->template); // Load the template

} 
```

# java - 使用 Maven 的并行库版本

> ID：13721645
> 
> 赞同：1
> 
> 时间：2012-12-05T10:56:43.673
> 
> 标签：java, maven

下面是我的 POM 的粗略版本，

```
<project>

    <dependencies>
        <dependency>one-java-artifact-version-X</dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <dependencies>
                    <dependency>one-java-artifact-version-Y</dependency>
                </dependencies> 
            </plugin>
        </plugins>
    </build>

</project> 
```

我希望使用插件，`one-java-artifact-version-Y`但要使用其他东西`one-java-artifact-version-X`。**是否可以与 Maven并排**使用不同版本的 java 工件？特别是，如何处理上述情况？

**@编辑**

在我使用 Maven 3.0.4 的情况下，`one-java-artifact-version-Y`它总是被 遮蔽`one-java-artifact-version-X`，因此插件无法执行，因为它存在不受欢迎的依赖`one-java-artifact-version-X`。`one-java-artifact-version-Y`但是，插件在被提升为下面的全局依赖项后其他事情都搞砸了，

```
<project>

    <dependencies>

        <dependency>one-java-artifact-version-Y</dependency>

        <dependency>one-java-artifact-version-X</dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:11:54.497

不确定，在这种情况下是否可能（即一个与插件版本冲突），但关于常规依赖管理（即在使用 2 个不同版本的 2 个依赖项之间），[maven 文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)说，

> “最近的定义”意味着使用的版本将是依赖关系树中最接近您的项目的版本，例如。如果 A、B 和 C 的依赖项定义为 A -> B -> C -> D 2.0 和 A -> E -> D 1.0，则构建 A 时将使用 D 1.0，因为从 A 到 D 的路径通过E 更短。您可以在 A 中显式添加对 D 2.0 的依赖项以强制使用 D 2.0

# html - 创建一个三列两行的表格，第二列没有边框

> ID：13721649
> 
> 赞同：0
> 
> 时间：2012-12-05T10:57:01.833
> 
> 标签：html, html-table

我需要创建一个有 3 列和 2 行的表，第二列没有边框

例如我的代码如下...

```
 <table border="1" cellpadding="1" cellspacing="1" height="125" width="1037">
 <tbody>        
 <tr>
 <td style="width: 254px">Main Title</td>
 <td style="width: 639px">&nbsp;</td>
 <td>&nbsp;</td>
 </tr>
 <tr>
 <td style="width: 254px">Lots of Contents Column I</td>
 <td style="width: 639px">Lots of Contents Column II</td>
 <td>Lots of Contents Column III</td>
 </tr>
 </tbody>
 </table> 
```

通过使用下面的代码，我得到了第二行的边框..

我不需要第二行的边框..我不能使用合并..因为我需要那个结构。

我唯一需要的是边框不应该显示在第二行。

但结构应该保持不变。

我怎样才能使用 HTML 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:01:53.483

使用应用于“表格数据”标签的样式而不是边框​​ = 1（已弃用）可能会解决您的问题。您希望如何组织这些样式的应用程序将根据您要添加到表中的额外信息量等而有所不同。这是一个实现您的目标的简单示例：

对于 html，为每个 tr 添加了一个类（另请注意 cellpadding/cellspacing 也已弃用）：

```
<table cellpadding="1" cellspacing="1" height="125" width="1037">
<tbody>       
<tr class='border-row'>
<td style="width: 254px">Main Title</td>
<td style="width: 639px">&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class = 'no-border-row'>
<td style="width: 254px">Lots of Contents Column I</td>
<td style="width: 639px">Lots of Contents Column II</td>
<td>Lots of Contents Column III</td>
</tr>
</tbody>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

和CSS：

```
​.border-row td {
    border-style:solid;  
    border-width:1px;
}

.no-border-row td {
    border-style:none; 
} 
```

​您实际上不需要指定第二行没有边框，但也许您将来可能希望对其应用一些不同的样式。

# javascript - Javascript 从相对转义的 url 中获取绝对 URL

> ID：13721651
> 
> 赞同：1
> 
> 时间：2012-12-05T10:57:04.007
> 
> 标签：javascript, parsing, url

我有一个 js 函数，它接收如下 URL：

```
http://example.com/folder1/folder2/../page.html 
```

请注意，url 是绝对的，但它`../`位于中间，因此它指向的实际 html 页面位于`folder1`而不是`folder2`.

我怎样才能转换`http://example.com/folder1/folder2/../page.html`成`http://example.com/folder1/page.html`？

请注意，我的网址可能包含多个`../`

Javascript中是否有内置工具？（例如：在 C# 中，我将通过 URI 类运行它，它为我执行此操作。）

**更新：**澄清一下，我不想为此创建或使用 DOM 元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-06T03:08:19.760

```
function relativeToAbsolute(relativeUrl) {
  var a = document.createElement('a');
  a.href = relativeUrl;
  return a.href;
}

url = relativeToAbsolute("http://example.com/folder1/folder2/../page.html");

console.log(url)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:42:07.230

这应该可以解决问题：

```
function relativeToAbsolute(url){
    arr = url.split("/") // Cut the url up into a array
    while(!!~arr.indexOf("..")){ // If there still is a ".." in the array
        arr.splice(arr.indexOf("..") - 1, 2); // Remove the ".." and the element before it.
    }
    return arr.join("/"); // Rebuild the url and return it.
}
console.log(relativeToAbsolute("http://example.com/folder1/folder2/../page.html"));
console.log(relativeToAbsolute("http://example.com/folder1/folder2/../../page.html"));

// Returns:
// http://example.com/folder1/page.html
// http://example.com/page.html 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T23:06:00.873

它实际上要简单得多。

```
<a id="mylink" href="/static/img/photo.jpg">My Photo</a>

<script>
var javascript_object = document.getElementById('#mylink');
var url = javascript_object.href; //returns absolute url

//want to write it back? just reverse it
javascript_object.href = url;
</script> 
```

免责声明：到目前为止，我只在 Chrome 中进行了测试。

# android - 发布缓慢，两个更新如何工作？

> ID：13721663
> 
> 赞同：0
> 
> 时间：2012-12-05T10:57:24.343
> 
> 标签：android

如果一个人一个接一个地发布两个 apk 版本，增加 android:versionCode

1.  如果两天后用户进行更新，他/她会同时获得最新更新还是仅获得最新更新，会发生什么情况？

2.  如果一个人同时获得两个更新，有没有办法说只更新最后一个？

3.  最近在发布和应用程序时，它需要很长时间才能在 Play 上更新，以前非常快，现在变化很大，有时需要一天或更长时间。特别是如果你一个接一个地做，有什么想法，你的经验吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:06:27.297

很难解释 Google Play 内部采用的机制，除非 Google 员工这样做（我怀疑他们会在公共论坛上这样做）。

1.  我怀疑是否立即上传一个更新，然后再上传另一个更新，是否会对将提供哪些更新产生任何影响。我认为是这种情况，因为您必须在激活新 APK 之前停用早期的 APK。新的 Google Play 网站会自动执行此操作。同样，这必须由了解事情如何运作的人来确认。

2.  由于您在推送第二次更新时将停用两者中的旧版本，我认为用户不会看到发布的第一个更新。

3.  我觉得，考虑到 Google Play 现在可以在比以前更多的国家/地区使用，这可能解释了人们在更新可用之前看到的延迟。同样，这是一种非常主观的行为。有些会在几个小时内看到更新，有些则需要更长的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:03:24.010

1.  用户始终获得最新版本

    *   换句话说，如果您有处理更新的代码，例如 SQLite DB 模式更新，您应该准备好从任何旧版本升级。
2.  {}

3.  我不确定究竟是为什么.. 但是现在，Google 将[Bouncer](http://googlemobile.blogspot.co.nz/2012/02/android-and-security.html)作为一种安全和质量措施来运行，这可能会减慢机器人的发布时间。（虽然谷歌说它是在发布之后运行，不应该影响发布速度。）

    *   谷歌现在为应用程序做了一些以前没有做过的事情。例如拆分设备类型的 APK（因此设备只接收它需要的资源）.etc。但我看不出这会如何严重影响您提到的发布时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:04:27.837

用户将在更新时获得 GP 中可用的更新。发布和可用性之间的时间可能从几分钟到几小时不等。

# f# - 如何在 F# 中实现 Generic.Dictionary 的扩展方法（类型约束）

> ID：13721665
> 
> 赞同：5
> 
> 时间：2012-12-05T10:57:32.307
> 
> 标签：f#

> **可能重复：**
> [类型扩展错误](https://stackoverflow.com/questions/7065950/type-extension-errors)

我想将 F# 中的扩展方法添加到 System.Collections.Generic.Dictionary。问题是我似乎无法正确设置类型约束。我希望像下面这样的东西会起作用：

```
type Dictionary<'k, 'd when 'k : equality> with

   static member ofList (xs:list<'k * 'd>) : Dictionary<'k, 'd> =
       let res = new Dictionary<'k, 'd> ()
       for (k, d) in xs do
           res.Add (k, d)
       res 
```

但是，编译器抱怨我的声明与 Dictionary 的声明不同。当我忽略等式约束时，它不会产生那个特定的错误。但随后它警告说它丢失了。非常感谢任何提示，最好是“降低警告级别”的其他提示：-)

**编辑**

非常感谢 KVB 提供了我想要的答案。

```
type Dictionary<'k, 'd> with

static member ofList (xs:list<'k * 'd>) : Dictionary<'k, 'd> =

    let res = new Dictionary<'k, 'd> (EqualityComparer<'k>.Default)
    for (k, d) in xs do
        res.Add (k, d)
    res 
```

**编辑：**这是一个更好地解释我对 RJ 的回复的例子。它表明在实例化类型时类型参数是可选的，只要编译器可以推断它们。它编译时没有警告或错误。

```
type System.Collections.Generic.Dictionary<'k, 'd> with
   static member test (dict:System.Collections.Generic.Dictionary<'k, 'd>) : bool =
        dict.Values |> List.ofSeq |> List.isEmpty

let test (x:System.Collections.Generic.Dictionary<'k, 'd>) =
    System.Collections.Generic.Dictionary.test x 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:16:48.907

由于某种原因，类型参数的名称必须匹配 - 这对我来说很好

```
open System.Collections.Generic
type Dictionary<'TKey, 'TValue>  with
   static member ofList (xs:list<'k * 'd>) : Dictionary<'k, 'd> =
       let res = new Dictionary<'k, 'd> ()
       for (k, d) in xs do
           res.Add (k, d)
       res 
```

我不知道为什么会这样（看规范的 30 秒也没有提供任何线索）。

**更新**- 错误实际上是当`Dictionary`参数与方法中写入的相同时 - 做

```
type Dictionary<'a, 'b>  with
   static member ofList (xs:list<'k * 'd>) : Dictionary<'k, 'd> =
       let res = new Dictionary<'k, 'd> ()
       for (k, d) in xs do
           res.Add (k, d)
       res 
```

工作得很好。这实际上是有道理的。当参数相同时，`'k:equality`由于`new Dictionary<'k,'d>`. 但是，由于某种原因，我们不能在扩展定义中放置约束（避免重复？），所以会出现错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T20:28:55.793

如果您需要`ofSeq`各种集合的函数，您可以考虑使用类似于 C# 集合初始化程序的方法。也就是说，使其适用于任何具有`Add`方法的集合。这也回避了您当前的问题。

```
open System.Collections.Generic
open System.Collections.Concurrent

module Dictionary =
  let inline ofSeq s = 
    let t = new ^T()
    for k, v in s do
      (^T : (member Add : ^K * ^V -> ^R) (t, k, v)) |> ignore
    t

module Collection =
  let inline ofSeq s = 
    let t = new ^T()
    for v in s do
      (^T : (member Add : ^V -> ^R) (t, v)) |> ignore
    t

open Dictionary

let xs = List.init 9 (fun i -> string i, i)
let d1 : Dictionary<_,_> = ofSeq xs
let d2 : SortedDictionary<_,_> = ofSeq xs
let d3 : SortedList<_,_> = ofSeq xs

open Collection

let ys = List.init 9 id
let c1 : ResizeArray<_> = ofSeq ys
let c2 : HashSet<_> = ofSeq ys
let c3 : ConcurrentBag<_> = ofSeq ys 
```

有趣的是，您甚至可以将其限制为具有特定构造函数重载的集合类型。例如，如果你想使用结构相等，你可以这样做：

```
let t = (^T : (new : IEqualityComparer< ^K > -> ^T) (HashIdentity.Structural)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T13:34:00.777

您将无法摆脱警告，因为您指的是不存在的类型， `Dictionary`而不是`Dictionary<_,_>`. 如果这是您想要访问它的方式，您可以制作一个 Dictionary 模块。

```
open System.Collections.Generic

type Dictionary<'a,'b>  with
  static member ofList (xs:list<'k*'v>) =
      let res = new Dictionary<_,_> ()
      for k, v in xs do
          res.Add (k, v)
      res    

module Dictionary = 
   let ofList xs = Dictionary<_,_>.ofList xs 
```

然后你摆脱警告。

```
Dictionary.ofList ["1",1;"2",2];;
val it : Dictionary<string,int> = dict [("1", 1); ("2", 2)] 
```

# jquery - 输入与标签的事件冒泡的不同行为？

> ID：13721667
> 
> 赞同：1
> 
> 时间：2012-12-05T10:57:34.600
> 
> 标签：jquery, html, events, propagation

我刚刚意识到`<a>`和`<input>`标签存在不同的行为。

```
<div id="dialog">Your non-modal dialog</div>

<!--<a href="#" id="open">Open dialog</a>-->
<input id="open" value="Open dialog"> 
```

```
$('#open').click(function() {
    $('#dialog').dialog('open');
});

$('#dialog').dialog({
    autoOpen: false,
    modal: false
});

// Close Pop-in If the user clicks anywhere else on the page
jQuery('html') //set for html for jsfiddle, but should be 'body'
    .bind('click', function(e){
        if (jQuery('#dialog').dialog('isOpen')
            && !jQuery(e.target).is('.ui-dialog, a')
            && !jQuery(e.target).closest('.ui-dialog').length)
        {
            jQuery('#dialog').dialog('close');
            alert("close_dialog");
        }
    }
); 
```

如果使用`<a>`，则单击事件不会传播到文档。如果使用`<input>`，则单击事件冒泡到文档中，单击输入直接关闭对话框。我知道这可以用 stopPropagation 来处理。问题是为什么`<a>`标签事件没有冒泡？我错过了什么吗？

这是一个要演示的[小提琴。](http://jsfiddle.net/hendryH/PRQNY/)取消注释`<a>`并注释`<input>`，然后单击它以查看差异。

[从 Jason 在这个问题](https://stackoverflow.com/q/2554779/1645122)的答案中借用的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:08:49.963

问题出在这一行：

```
&& !jQuery(e.target).is('.ui-dialog, a') 
```

您在询问 jQuery，事件目标是“a”标签还是具有“.ui-dialog”类的元素。如下删除选择器中的“a”标签，它应该可以按照您的意愿工作。

```
&& !jQuery(e.target).is('.ui-dialog') 
```

这是修改后的小提琴[http://jsfiddle.net/PRQNY/1/](http://jsfiddle.net/PRQNY/1/)

PS：只是为了确认你对事件的理解。无论标准 DOM 事件模型中的元素标签如何，所有事件都会冒泡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:12:37.087

此行导致 if 语句为假，因此您看不到 if 语句内的警报。

```
&& !jQuery(e.target).is('.ui-dialog, a') 
```

事件目标是`a`因为您点击了它，即使事件已经冒泡了。

# android - 在android中使用不同的字符串文件

> ID：13721668
> 
> 赞同：6
> 
> 时间：2012-12-05T10:57:42.080
> 
> 标签：android, xml, string, build-automation, localizable.strings

我正在将我的 iPhone 应用程序移植到 android，我现在遇到了字符串文件的问题。

该应用程序是一个翻译工具，用户可以切换语言，因此所有本地化字符串都是两种语言，并且它们独立于操作系统运行的区域设置。

对于 iOS 版本，我有不同的文件，例如 de.strings、en.strings 和 fr.strings 等。对于具有指定语言对的每个目标，我从字符串表中读取字符串，例如对于 de-fr，我将在项目中包含 de.strings 和 fr.strings，并在 info-list 文件中设置字符串表的名称并读取字符串从他们。最后，我有一个项目包含不同的目标（具有不同的信息列表文件），并且所有配置都很好。

我打算在android平台上做同样的事情，但是

1.  每个项目只允许一个 strings.xml 吗？

2.  如何设置不同的构建目标？例如，我的 de-fr 和 de-en 翻译应用程序实际上是两个应用程序，唯一的区别是语言对。如何设置一些东西以便我可以使用一个项目来生成两个应用程序？在 XCode 中它很简单，但我找不到 eclipse 的解决方案。

3.  如何为每个目标指定应该读取的 strings.xml？

感谢您的回答，但**请注意**，我需要与操作系统区域设置无关的语言设置，即如果用户将操作系统区域设置从 en 更改为 de，我的应用程序仍会以英语显示本地化字符串。我要问的实际上是如何设置诸如预构建之类的内容并为不同的目标加载不同的字符串文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T11:01:08.687

# 根据用户设置自动选择区域设置

包含原始`strings.xml`文本，假设为英语。要创建不同语言的翻译，您可以创建文件夹，例如： `values-gr`, `values.it`, 表示希腊语结尾的意大利语。只需复制`strings.xml`到这些文件夹并翻译即可。

在应用程序启动时，操作系统会根据用户的偏好自动选择一种语言。

# 手动选择区域设置，覆盖用户设置

例如，要强制使用希腊语，您可以使用：

```
Locale locale = new Locale("gr"); 
            Locale.setDefault(locale);
            Configuration config = new Configuration();
            config.locale = locale;
            getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics()); 
```

当然，您应该为此提供希腊语翻译。

# 阅读更多

您可以在此处查看文档： [支持不同的语言 - Android](http://developer.android.com/training/basics/supporting-devices/languages.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:01:43.273

您必须将本地化字符串放在不同的文件夹中，例如 values-es、values-de、values-fr 等。

该文件必须包含相同的键，例如在 values 文件夹中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="hello">Hello</string>
</resources> 
```

在 values-es 文件夹中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="hello">Hola</string>
</resources> 
```

等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:02:43.890

您必须为每种语言创建一个值文件夹，使用以下格式添加您想要翻译的语言的语言 ISO 代码：values-es、values-de、... 在每个文件夹中，您必须添加一个 strings.xml带有其语言的字符串。values 文件夹（没有国家代码）将是默认语言。

选择您要使用的字符串语言：

```
import android.app.Activity;
import android.content.res.Configuration;
import android.os.Bundle;

public class Main extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String languageToLoad  = "fa"; // your language
    Locale locale = new Locale(languageToLoad); 
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config, 
    getBaseContext().getResources().getDisplayMetrics());
    this.setContentView(R.layout.main);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:10:11.013

`ad 1`. 不，你可以拥有尽可能多的。有关`ad 3`更多信息，请参阅。

`ad 2`. ？？？

`ad 3`. 要在我们的应用程序中进行语言选择，您应该[更新 context](https://stackoverflow.com/questions/2900023/change-language-programatically-in-android)。然后会自动选择正确的 xml。阅读[此](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)内容以了解如何操作。

# c# - 将一系列项目添加到列表的开头？

> ID：13721672
> 
> 赞同：22
> 
> 时间：2012-12-05T10:58:12.767
> 
> 标签：c#, .net, list, collections, sequence

该方法`List<T>.AddRange(IEnumerable<T>)`将项目集合添加到列表的末尾：

```
myList.AddRange(moreItems); // Adds moreItems to the end of myList 
```

将一组项目（如 some `IEnumerable<T>`）添加到列表开头的最佳方法是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-05T11:00:56.813

使用[InsertRange](http://msdn.microsoft.com/en-us/library/884ee1fz.aspx)方法：

```
 myList.InsertRange(0, moreItems); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T11:01:59.570

使用[InsertRange](http://msdn.microsoft.com/en-us/library/884ee1fz.aspx)方法：

```
 List<T>.InsertRange(0, yourcollection); 
```

另请查看[Insert](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)方法，您可以在列表中添加具有特定索引的元素。

> 将元素插入到 List 中指定索引处。

```
List<T>.Insert(0, T); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T11:08:37.267

```
List<String> listA=new List<String>{"A","B","C"};
List<String> listB=new List<String>{"p","Q","R"};

listA.InsertRange(0, listB); 
```

这里假设我们有 2 个字符串列表...然后使用 InsertRange 方法，我们可以将要插入/推送新范围（listB）的起始索引传递到现有范围（listA）

希望这可以清除代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T11:00:59.357

请试试`List<T>.InsertRange(0, IEnumerable<T>)`

# devexpress - 具有 columnEdit 设置为 RepositoryItemComboBox 的 GridColumn ，在更改 SelectedItem 时，旧项目仍然存在

> ID：13721673
> 
> 赞同：1
> 
> 时间：2012-12-05T10:58:13.507
> 
> 标签：devexpress, xtragrid

在 Devex Xtra GridControl（winform 类型）中定义了gridCoumn **。**

此列有两个属性集：

1.  **FieldName** --> dataSource 中列的字段名。**选项类型**

2.  **ColumnEdit** --> 作为**RepositoryItemCombobox**对象，该对象的“ **Items** ”属性有两个值：Option1、option2 和 option3。

在运行时设置数据时，GridColumn 在“OptionType”列中显示相应的值。

但现在我无法使用下拉菜单将此列的任何组合框中的值更改为其他选项。我错过了什么？？？？？？

# c# - 如何动态访问用户控制图？

> ID：13721680
> 
> 赞同：1
> 
> 时间：2012-12-05T10:58:28.963
> 
> 标签：c#, winforms

我有一个主窗体和一个用户控件（带图表）。我正在动态更新图表。

```
 void foo(int i)
        {

            MainForm MF = (MainForm)MainForm.ActiveForm;
            if (tb != null)
            {
                tb.userGraph.updatesomething(i);
               // usergraph is the user control which has graphs
            }

        } 
```

问题是当我导航出主窗体时，我无法更新图表。有没有其他方法可以写入用户控件，即使它不是活动表单？如果我创建一个新实例，图表上的先前更新将消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:07:12.403

我认为最简单的解决方案是在表单和用户控件之间传递用户控件的引用。例如在用户控件中创建一个字段；

```
public Form formExample{get;set;} 
```

并且当您最初实例化用户控件时，将引用作为参数传递；

```
userControl usercontrol = new userControl();
usercontrol.formExample = this;
//passing this from the original form will pass a reference of it. 
```

这样，您现在可以从用户控件访问窗体上的图形。如果您想以相反的方式进行操作，即从表单访问用户控件上的图形，只需以相反的方式传递引用。我自由输入了这个，但我认为语法就在那里！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:52:31.273

我通过使用`Application.OpenForms["Name of the Form"]`方法解决了它。

# javascript - 为自己优化的基本 jquery 滑块

> ID：13721681
> 
> 赞同：0
> 
> 时间：2012-12-05T10:58:30.943
> 
> 标签：javascript, jquery, html, css, slider

[我使用来自http://www.basic-slider.com/](http://www.basic-slider.com/)的滑块制作新闻提要， 它看起来像下面的图像。现在我不想滑动图像并淡化文本。我不知道我会如何做到这一点，（如果你不明白我的意思，请查看网站。）有没有比我更有知识并且知道如何做到这一点的人？

![例子](../Images/c00e439c103f0a8c3d8ffc45d7eedfdf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:12:00.787

您只需要更改激活 javascript 中的属性。默认是淡入淡出，所以在下面添加一个底部四个属性：

```
$('#banner-fade').bjqs({
 height      : 320,
 width       : 620,
 responsive  : true,
 animtype : 'slide', // accepts 'fade' or 'slide'
 animduration : 450, // how fast the animation are
 animspeed : 4000, // the delay between each slide
 automatic : true // automatic
}); 
```

....啊，对不起，我意识到这只是你问题的一半。你也想淡化文字...

编辑 --> 添加上述属性，然后转到 bjqs-1.3.js 的第 615 行，在函数内部添加以下行：

```
$('.bjqs-caption').fadeOut(settings.animduration); 
```

然后在该函数最后的第 708 行添加以下行：

```
$('.bjqs-caption').fadeIn(settings.animduration); 
```

然后，您必须对 bjqs-1.3.min.js 版本进行相同的更改。

当调用该函数时，所有标题都会淡出，幻灯片会发生，然后您将标题淡入。

（需要进一步测试！）

# c# - 将此json字符串解析为字符串数组c#

> ID：13721686
> 
> 赞同：8
> 
> 时间：2012-12-05T10:58:43.753
> 
> 标签：c#, arrays, json, parsing

感觉对于我想要做的事情有一个两行的解决方案：解析这样的字符串：

```
 "{\"postalcode\":\"12345\",\"postalcity\":\"SOME-CITY\",\"country\":\"UK\",\"box\":false}" 
```

变成这样：

```
 string[] result = { "12345", "SOME-CITY", "UK", "false" }; 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-05T11:26:13.543

```
string json = "{\"postalcode\":\"12345\",\"postalcity\":\"SOME-CITY\",\"country\":\"UK\",\"box\":false}";

var dict = new JavaScriptSerializer().Deserialize<Dictionary<string,object>>(json);
var postalCode = dict["postalcode"];

//Array is also possible
string[] result = dict.Select(kv => kv.Value.ToString()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T11:04:45.260

您也可以使用 newtonsoft：http: [//james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

```
string json = @"{
  ""Name"": ""Apple"",
  ""Expiry"": new Date(1230422400000),
  ""Price"": 3.99,
  ""Sizes"": [
    ""Small"",
    ""Medium"",
    ""Large""
  ]
}";

JObject o = JObject.Parse(json);

string name = (string)o["Name"];
// Apple

JArray sizes = (JArray)o["Sizes"];

string smallest = (string)sizes[0];
// Small 
```

我发现了另一个相关的帖子：[JSON 到 C#](https://stackoverflow.com/questions/5189454/json-to-string-array-in-c-sharp)
Lib 中的字符串数组：http: [//msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T11:15:27.100

看起来您的输入字符串是 JSON 字符串，如果需要，您可以使用 JSON 反序列化器。如果不是，您可以使用正则表达式和命名组，如下所示：

```
List<string> values = new List<string>();
List<string> keys= new List<string>();

string pattern = @"\""(?<key>[^\""]+)\""\:\""?(?<value>[^\"",}]+)\""?\,?";
foreach(Match m in Regex.Matches(input, pattern))
{
    if (m.Success)
    {
        values.Add(m.Groups["value"].Value);
        keys.Add(m.Groups["key"].Value);
    }
}

var result = values.ToArray(); 
```

正则表达式中的命名组由 表示`(?<group-name>pattern)`。在上面的模式中，我们有两个命名组：`key`，并且`value`可以使用索引器从`Match`对象中获取。`Groups`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T11:01:14.127

您可以使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)将 json 序列化为一个`dynamic`允许您通过名称访问属性的对象，例如

```
var address = new JavaScriptSerializer().Deserialize<dynamic>(json);
Console.WriteLine(address["postalcode"]); 
```

# asp.net-mvc - MVC 中的 WebApi 和 Knockout 模式

> ID：13721693
> 
> 赞同：1
> 
> 时间：2012-12-05T10:58:52.463
> 
> 标签：asp.net-mvc, design-patterns, knockout.js, asp.net-web-api

我在将我的应用程序带入 WebApi + Knockout 世界所需的模式方面遇到了一些问题。下面的场景已经抛出了一点。

我有一个非常基本的网格局部视图（_grid.cshtml）。它使用一个 GridViewModel，它只有一个 QueryID。Grid 部分使用 Ajax（在 ko ViewModel 中定义）将 QueryID 传递给 WebApi 方法，该方法返回 JSON 中的对象集合。然后我使用敲除根据返回的 JSON 绑定网格的列，然后加载行。

这一切都很好，但我不确定这是否是正确的方法。

```
 // When the query is changed update the grid data.
    self.selectedQueryID.subscribe(function (newQuery) {
        self.SelectQuery(newQuery.ID());
    });

    // Execute the query and set the results as the rows of the table
    self.SelectQuery = function (queryID) {
        $.ajax({
            url: '/api/Query/Execute?ID=' + queryID,
            type: 'POST',
            contenttype: 'application/json',
            success: function (result) {
                self.gridData(result);
            }
        });
    }; 
```

当我有另一个部分视图是用户可以选择的可用查询列表时，复杂性就来了。该局部视图与网格局部视图相邻。我希望能够以某种方式将单击的查询发送到网格，以便它可以发出另一个 ajax 请求以获取新查询的数据。我知道这是考虑 MVC 应用程序的完全错误的方式，但我对 WebApi 的了解还不够。

```
 @Html.Partial("~/Views/Shared/_Grid.cshtml", Model.GridViewModel)
    @Html.Partial("~/Views/Shared/_Queries.cshtml", Model.User) 
```

这一切都是为了为网格实现某种默认查询，然后为用户提供选择其他查询的选项。

我也开始研究 Backbone 和 Knockback，但不知道（足够了解它们或）这是否是正确的方向。

# actionscript-3 - 使用 ViewNavigatorApplication 设置静态视图？

> ID：13721699
> 
> 赞同：0
> 
> 时间：2012-12-05T10:59:00.480
> 
> 标签：actionscript-3, apache-flex, flex4.5

我有 2 个意见：

1：地图视图

2：设置视图

当我打电话

> 推送视图（设置视图）；

，然后在 SettingsView 内部：

> this.popView();

MapViewdata 数据已重新加载。

*   有没有办法设置一个视图，它不能重新加载，在另一个视图被推送和弹出之后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:22:45.570

解决方案似乎`destructionPolicy="never"`在 View 参数中。

# linux - 如何提高 Linux 中 1ms 定时器的实时性能？

> ID：13721701
> 
> 赞同：5
> 
> 时间：2012-12-05T10:59:03.927
> 
> 标签：linux, timer, embedded, real-time, preempt-rt

我正在开发一个嵌入式 Linux 项目，使用可能在 3.3 版左右的 arago 发行版。

我已经配置了一个高分辨率的 Linux 计时器，每毫秒唤醒一次我的进程。这工作正常，但时间有两个问题：

1.  唤醒时间的抖动
2.  尽管进程完成的处理是恒定的，但清醒时处理时间的可变性。

我将这些问题归咎于 Linux 的实时性能不佳。但我需要研究提高实时性能的方法。

我检查了内核是否配置了 CONFIG_PREEMPT 内核选项，这对实时很有用。

我还将 SCHED_FIFO 调度类应用于我的进程：

```
struct sched_param schedparm;
memset(&schedparm, 0, sizeof(schedparm));
schedparm.sched_priority = 1; // lowest rt priority
sched_setscheduler(0, SCHED_FIFO, &schedparm); 
```

但这并没有什么不同。

我想一个合乎逻辑的步骤是将 PREEMPT_RT 补丁应用于内核构建，但我还没有确定如何做到这一点。

我还能做些什么来改善抖动/持续时间的可变性吗？

或者任何人都可以建议一个关于如何应用 PREEMPT_RT 补丁的可访问教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:11:30.730

看来 PREEMPT_RT 是合乎逻辑的下一步。你试过这个教程吗？

[https://rt.wiki.kernel.org/index.php/RT_PREEMPT_HOWTO](https://rt.wiki.kernel.org/index.php/RT_PREEMPT_HOWTO)

**更新：**我建议你看看其他人如何构建抢占式内核，例如： [https ://aur.archlinux.org/packages/linux-rt/](https://aur.archlinux.org/packages/linux-rt/)

您可以阅读 PKGBUILD 以了解所做的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T16:33:23.047

如果您使用 Debian 测试或 LMDE，他们在 x86 和 amd64 架构的存储库中有一个预编译的 PREEMPT_RT 内核。

```
apt-get install linux-image-rt-686-pae 
```

或者

```
apt-get install linux-image-rt-amd64 
```

# java - 如何在 for 循环中每 50 次迭代停止？

> ID：13721702
> 
> 赞同：1
> 
> 时间：2012-12-05T10:59:08.593
> 
> 标签：java, for-loop

在 for 循环中，我正在执行 Mongo DB 查询，该循环包含 1500 次迭代。那么无论如何，在50次迭代之后，我想给数据库一些时间，即`Thread.currentThread().sleep(200);`

所以请告诉我如何在每 50 次后停止一段时间：

```
for (int i = 0; i < n; i++){
    // ????
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T11:00:54.110

你为此使用模数

```
if( i % 50 == 0 ){
    Thread.sleep(200);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T11:07:31.837

使用可以使用一些 cpu 的模数的替代方法是使用嵌套循环。

```
for (int j = 0; j < n; j += m) {
    // before every m
    for(int i = j; i < j + m && i < n; i++) {
        // inner
    }
    // after every m
} 
```

> 这会比 % 快吗？

```
static int counter, counter2;

public static long testOneModLoop(int n, int m) {
    long start = System.nanoTime();
    for (int i = 0; i < n; i++) {
        counter++;
        if (i % m == m - 1)
            counter2++;
    }
    return System.nanoTime() - start;
}

public static long testTwoLoops(int n, int m) {
    long start = System.nanoTime();
    for (int j = 0; j < n; j += m) {
        for (int i = j; i < j + m && i < n; i++) {
            counter++;
        }
        counter2++;
    }
    return System.nanoTime() - start;
}

public static void main(String... args) {
    for (int i = 0; i < 5; i++) {
        int runs = 10 * 1000 * 1000;
        double time1 = (double) testOneModLoop(runs, 50) / runs;
        double time2 = (double) testTwoLoops(runs, 50) / runs;
        System.out.printf("Avg time for 1 loop: %.2f ns and 2 loops: %.2f ns%n",
                time1, time2);
    }
} 
```

印刷

```
Avg time for 1 loop: 6.09 ns and 2 loops: 0.78 ns
Avg time for 1 loop: 3.75 ns and 2 loops: 0.22 ns
Avg time for 1 loop: 3.67 ns and 2 loops: 0.19 ns
Avg time for 1 loop: 3.72 ns and 2 loops: 0.19 ns
Avg time for 1 loop: 3.67 ns and 2 loops: 0.19 ns 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T11:00:55.910

像这样使用模数：

```
for (int i = 0; i < n; i++){
      if( i%50 == 0){
         Thead.sleep(200);
      }
} 
```

每次`i` 都是 50 的倍数，这将是真的

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T11:20:00.623

基于 Peter Lawrey 的回答，您可以将所有内容放在一个循环中，并在第一次迭代中避免模数和休眠：

```
for (int i = 0, j = 0; i < n; ++i, ++j) { //we increment both i and j
     if (j == 50) {                       // reset auxilliary counter and go to sleep
          j = 0;                       
          Thread.sleep(100);
     }
} 
```

**编辑**

顺便说一句，如果您担心性能，您可以停止每 64 次（或另一个 2 的幂次）迭代并使用以下事实

```
n % k == n & (k - 1) when k is a power of two and n > 0 
```

这样，您可以将相对昂贵的模运算更改为便宜的按位运算`&`。在编程中使用二次方大小通常是一个好主意。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-05T11:02:00.897

我认为这通常不是一个好主意，但是当你问：

```
if (i % 50 == 0 && i!=0) {
// Do something
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T11:03:19.970

不管每个'n'查询如何睡觉，我想知道这是否真的是你想要做的。而不是（我怀疑）获取一个 id 列表然后查询每个文档的数据库，你不能向数据库提交更合适的查询并让它利用其可能优化的查询 API 来查找/返回信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T11:01:17.433

```
for (int i = 0; i < n; i++)
{   
    // You code here...

    if(i%50==0)
       Thead.sleep(200);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-05T11:01:43.113

您可以在 for 循环中编写一个简单的条件，例如：

```
for (int i = 0; i < n; i++)
{
 if(i % 100 == 0){// use 100 for 100 iterations and 50 for 50 iterations
   //your sleep code 
 }  
} 
```

# objective-c - UIButton 不适用于动画子视图

> ID：13721705
> 
> 赞同：0
> 
> 时间：2012-12-05T10:59:24.613
> 
> 标签：objective-c, uibutton, uiviewanimation

我想在视图出现时将两个按钮添加到出现在父视图上的子视图中。按钮已正确初始化并出现，但按下时它们没有反应。有人知道为什么吗？这是我的代码：

```
-(void) viewWillAppear:(BOOL)animated{

    [super viewWillAppear:animated];
    self.view.backgroundColor = [UIColor blackColor];
    //Animation View
    imageView= [[UIImageView alloc] initWithFrame:CGRectMake(0, 499, 320, 0)];
    imageView.image = [UIImage imageNamed:@"trans.png"];
    [imageView setClipsToBounds:YES];
    [imageView setContentMode:UIViewContentModeBottom];
    [self.view addSubview:imageView];

    [UIView animateWithDuration:1.0f
                          delay:0.5f
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^(void) {
                         imageView.frame = CGRectMake(0, 92, 320, 320);

                     }
                     completion:NULL];
    [self.view bringSubviewToFront:imageView];
    // Animation View Buttons
    //1 Amazon
    UIButton *button1 = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *button=[UIImage imageNamed:@"button.png"];
    [button1 setImage:button forState:UIControlStateNormal];
    button1.frame = CGRectMake(0, 290, 80, 30);
    button1.backgroundColor=[UIColor whiteColor];
    button1.showsTouchWhenHighlighted=YES;

    [button1 addTarget:self
                action:@selector(openAmazon:)
     forControlEvents:UIControlEventTouchUpInside];
    [imageView addSubview:button1];

    //2 iTunes
    UIButton *button2 = [UIButton buttonWithType:UIButtonTypeCustom];
    [button2 setImage:button forState:UIControlStateNormal];
    button2.frame = CGRectMake(82, 290, 80, 30);
    button2.backgroundColor=[UIColor whiteColor];
    button2.showsTouchWhenHighlighted=YES;

    [button2 addTarget:self
     action:@selector(openiTunes:)
     forControlEvents:UIControlEventTouchUpInside];
    [imageView addSubview:button2];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:18:12.133

您需要使用选项 UIViewAnimationOptionAllowUserInteraction

```
...
options:UIViewAnimationOptionCurveEaseOut | UIViewAnimationOptionAllowUserInteraction
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:04:14.777

确保`userInteractionEnabled`在 imageView 上设置属性：

```
[imageView setUserInteractionEnabled:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:12:27.617

```
[self.view bringSubviewToFront:imageView]; 
```

您在增加其框架后将图像视图置于前面，这会阻止按钮操作

# sql-server-2008 - SSRS 报告格式化表格以并排显示数据

> ID：13721709
> 
> 赞同：7
> 
> 时间：2012-12-05T10:59:37.637
> 
> 标签：sql-server-2008, reporting-services, reporting

我正在尝试根据一个查询为我的报告实现以下布局。

```
+----+-------+----+-------+
| ID | Name  | ID | Name  |
+----+-------+----+-------+
|  1 | Danny |  2 | Dave  |
|  3 | Sue   |  4 | Jack  |
|  5 | Rita  |  6 | Sarah |
+----+-------+----+-------+ 
```

所以我基本上想要一张表格，从左到右打印我的数据以节省页面空间，而不是打印一行并浪费纸张右侧的所有空间，甚至可能跨越宽度的 3 倍。

这是我的数据：[http ://sqlfiddle.com/#!3/5c911/1](http://sqlfiddle.com/#!3/5c911/1)

我可能在想一张有 4 列的表格。第 1 列和第 2 列包含奇数行号，第 3 列和第 4 列包含偶数行号。

我怎么能做到这一点，我确实尝试了 MOD 功能，但它似乎无法正常工作，或者我误解了正在发生的事情。

相关： [如何在报表设计器中并排显示两行数据？](https://stackoverflow.com/questions/1561464/how-can-i-display-two-rows-worth-of-data-on-one-line-side-by-side-in-report-desi?s=356e5185-f8b1-4e97-a1f8-342a8aa10a35)

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T00:32:24.070

要以多列格式从左到右打印数据，您需要使用多个表来伪造它。要实现此技巧，请创建与您想要并排的列相同数量的表，这些表都指向您的数据集。在第一个表的 Detail 行上，对于 Visibility-Hidden 属性，使用以下公式：

```
=IIF((RowNumber(Nothing) Mod 4) = 1, False, True) 
```

`4`您拥有的表格（列）的数量在哪里。

对每个表执行相同的操作，增加公式等于的值（因此对于第二列`(RowNumber(Nothing) Mod 4) = 2`等等）。在最后一个表（列）中，公式等于`0`。

这会交替隐藏详细信息行，仅显示该列号的相应行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T04:36:18.463

您可以通过查询来实现这种外观。

```
SELECT std1.id AS Student_Id, 
        std1.NAME AS Student_Name, 
        std2.id AS Student_Id, 
        std2.NAME AS Student_Name
FROM students std1, students std2
WHERE (std2.id - std1.id = 1 
       AND std1.id %2 = 1); 
```

# javascript - 离开网站时捕捉不同的种类（onunload）

> ID：13721714
> 
> 赞同：1
> 
> 时间：2012-12-05T10:59:44.907
> 
> 标签：javascript

当用户离开网站时是否有可能捕获一些不同类型的操作

```
$(window).unload(function(){
    doSomething();
} 
```

我想把它们分成两种不同的类型。第一个是用户通过在浏览器中输入新的网址来关闭浏览器、选项卡或离开站点。

第二个是如果用户离开站点，因为他是通过按下按钮被发送到另一个站点，该按钮位于我的页面上。

我想区分这两个选项，并希望我的 Javascript 根据已完成的操作采取不同的行动。有没有处理程序来捕捉这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:14:50.087

HTML5 页面可见性 API 可能会有所帮助。但目前它需要供应商前缀，如“webkit”、“moz”；

```
document.addEventListener("webkitvisibilitychange", function(){
    console.log("Page visiblility : "+ !document.webkitHidden);
}); 
```

我不确定是否要关闭浏览器。

# iphone - 当用户开始滚动或点击 textview 时如何立即设置 textView 的 Scrollview 的内容大小

> ID：13721721
> 
> 赞同：0
> 
> 时间：2012-12-05T11:00:06.377
> 
> 标签：iphone, objective-c, uiscrollview, uitextview

我 `UITextView`在其中包含图像/（`UIImageView`）。

但是当我想看到它无法看到/滚动的图像时，

我实现了相应于文本大小动态增加滚动内容大小的逻辑，

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollview 
{
      if (scrollview.contentOffset.y >= scrollview.contentSize.height - scrollview.frame.size.height) 
      {

            CGSize s = [messageView.text sizeWithFont:[UIFont systemFontOfSize:25] //define your textview font size
                                    constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                                        lineBreakMode:UILineBreakModeWordWrap];   

            // To increase the text view scroll content to display image also
            [scrollview setContentSize:CGSizeMake(200, s.height+150)];

      }       
} 
```

但它仅在文本视图中的文本超出其（文本视图）边界时才开始滚动。

如果文本在边界内，我**无法看到完整图像（文本视图中不能容纳的行数）**

**`How to set scroll size when touch / starts scrolling on textview`**,,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:09:11.930

在将文本设置为 messageView( `UITextView`) 后使用此代码

```
 messageView.frame = CGRectMake(messageView.frame.origin.x, messageView.frame.origin.y, messageView.frame.size.width, messageView.contentSize.height + 150);
    float fscrview = messageView.frame.origin.y + messageView.frame.size.height + 150;
    scrollview.contentSize=CGSizeMake(320, fscrview); 
```

# c - C中的指数（exp）函数 - 分段错误

> ID：13721725
> 
> 赞同：2
> 
> 时间：2012-12-05T11:00:14.707
> 
> 标签：c, segmentation-fault

我使用此代码，但收到分段错误。这里有什么问题？

GNU nano 2.2.6 文件：taak8.c

```
#include<stdio.h>

double recursie(double som,double oud, double x, int stap){
    double y = oud*x/stap;
    if(y >= 1/1000){
            return recursie(som+y,y,x,stap++);
    } else {
            return som;
    }
}

double exp(double x){
    return recursie(1,1,x,1);
}

int main(){
    double inp;
    scanf("%lf",&inp);
    printf("your result %lf",exp(inp));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:03:19.743

`if(y >= 1/1000)`问题就在那里。`1/1000`永远都是`0`。所以直接放在`0`那里。

但我想你想在下面做这个，试试这个

`if(y >= 1.0/1000)`

这也是

```
recursie(som+y,y,x,++stap); 
```

用于`++stap`增加 stap 而不是 .`stap++`因为您必须将增加的值发送`stap`到递归函数调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:04:31.407

您需要在调用递归步骤**之前增加您的步骤，而不是之后。**换句话说，您需要使用前增量，而不是后增量：

```
return recursie(som+y,y,x,stap+1); 
```

# java - 如何判断Timer任务是否完成

> ID：13721726
> 
> 赞同：10
> 
> 时间：2012-12-05T11:00:16.467
> 
> 标签：java, android, timer, timertask

我有以下代码：

```
Timer timer = new Timer();      
TimerTask task = new TimerTask() {

    @Override
    public void run() {
        // TODO Auto-generated method stub
    }
};

timer.schedule(task, 10000);//execute after 10 seconds 
```

我们可以确定任务是已经被定时器执行了还是到期了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T11:03:34.430

添加一个简单的变量，如..

```
 boolean isTaskCompleted = false;
  Timer timer = new Timer();      
  TimerTask task = new TimerTask() {

     @Override
     public void run() {
        // do stuff
        isTaskCompleted = true;
     }
  };

  timer.schedule(task, 10000);//execute after 10 seconds 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T11:03:49.787

当然，

```
class CustomTask extends TimerTask {
    protected boolean isDone = false;
    public boolean isDone() {return isDone; }

    @Override
        public void run() {}
} 

CustomTask task = new CustomTask() {
    @Override
    public void run() {
       isDone=true;
    }
 }; 
```

编辑：如果您对扩展类不满意，您可以使用方法 scheduleExecutionTime()，如果任务尚未运行，则返回 0。

[http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html)

# c# - 检测 selenium webdriver 何时更改浏览器中的 url

> ID：13721730
> 
> 赞同：2
> 
> 时间：2012-12-05T11:00:27.030
> 
> 标签：c#, webdriver

我需要检测浏览器中的 url 何时更改，无论是因为单击链接、表单帖子还是我更改了代码中的 url。

我需要它，因为我正在创建一个对象来表示页面，并且我需要在 url 更改时重新创建它。

这是我到目前为止所尝试的：

```
private string _pageUrl;
protected T _page = default(T);
protected T Page
{
    get
    {
        if (_page == null || UrlHasChanged())
        {
            _page = GetPage<T>();
            SetPageUrl();
        }
        return _page;
    }
}

private bool UrlHasChanged()
{
    var driver = Session.GetDriver();
    return driver.Url != _pageUrl;
}

public void SetPageUrl()
{
    _pageUrl = Session.GetDriver().Url;
} 
```

这在大多数情况下都有效，但是当测试前进一个页面然后返回到初始页面时它会失败。

我需要一种方法来检测 url 何时更改，以便我可以重置 _page 字段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T21:47:55.993

我是一名 Java 开发人员，因此，我在 C# 文档中搜索与 Java API 相似的内容。我认为您应该使用 EventFiringWebDriver ：

```
EventFiringWebDriver firingDriver = new EventFiringWebDriver(driver);
firingDriver.NavigatingBack += new EventHandler<WebDriverNavigationEventArgs>(...);
firingDriver.NavigatedBack += new EventHandler<WebDriverNavigationEventArgs>(...);
firingDriver.NavigatingForward += new EventHandler<WebDriverNavigationEventArgs>(...);
firingDriver.NavigatedForward += new EventHandler<WebDriverNavigationEventArgs>(...); 
```

我查看了单元测试，发现这个可能对您有用： [http ://selenium.googlecode.com/svn/trunk/dotnet/test/WebDriver.Support.Tests/Events/EventFiringWebDriverTest.cs](http://selenium.googlecode.com/svn/trunk/dotnet/test/WebDriver.Support.Tests/Events/EventFiringWebDriverTest.cs)

# c# - 在 Kendo Drop Down 中设置初始值

> ID：13721731
> 
> 赞同：2
> 
> 时间：2012-12-05T11:00:26.827
> 
> 标签：c#, kendo-ui

如何根据客户端发送的数据设置剑道 UI 下拉服务器端的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:27:05.150

您可以使用[值](http://docs.kendoui.com/api/web/dropdownlist#value%20stringdefault)设置来设置最初选择的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T17:04:08.743

你可以试试这种方式

```
 if ($(this).parent().hasClass("k-widget k-dropdown k-header")) {

                    var combo = $(this).data("kendoDropDownList");
                    combo.select(4); // set the value to this index item
                    break;
                } 
```

# php - 通过贝宝登录

> ID：13721734
> 
> 赞同：2
> 
> 时间：2012-12-05T11:00:34.813
> 
> 标签：php, magento, paypal

我找到了这个例子：

[http://www.magentocommerce.com/magento-connect/log-in-with-paypal-access.html](http://www.magentocommerce.com/magento-connect/log-in-with-paypal-access.html)

有谁知道我在哪里可以找到这个 API？我找不到此类信息如何在任何贝宝页面上集成 Login-via-paypal。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:08:47.893

它的贝宝访问。尝试此链接以了解贝宝访问并将贝宝访问集成到您的站点中。 [https://www.x.com/developers/paypal/products/paypal-access](https://www.x.com/developers/paypal/products/paypal-access) [https://www.x.com/developers/paypal/documentation-tools/attributes](https://www.x.com/developers/paypal/documentation-tools/attributes) [https://www.x.com/developers/贝宝/文档工具/了解贝宝访问权限](https://www.x.com/developers/paypal/documentation-tools/getting-to-know-paypal-access)

# .net - WCF 自托管和 IIS 托管之间的差异

> ID：13721739
> 
> 赞同：1
> 
> 时间：2012-12-05T11:00:45.500
> 
> 标签：.net, wcf

托管在 IIS 中的 WCF 服务是否应该写成线程安全的？在开发阶段应该考虑这两个选项之间的哪些差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:04:29.863

这篇 MSDN 文章[Hosting and Consuming WCF Services](http://msdn.microsoft.com/en-us/library/bb332338.aspx)可能包含您需要的所有信息。

至于开发阶段，您可以使用 Visual Studio 的内置托管，然后将其部署到 IIS 以进行阶段测试。您可以使用 Visual Studio 的功能在启动时运行两个项目：您的应用程序项目和 WCF 项目。

# java - 为java中不同类型和策略设计api

> ID：13721750
> 
> 赞同：1
> 
> 时间：2012-12-05T11:01:14.627
> 
> 标签：java, image, algorithm

我正在尝试开发一些图像处理代码。我想设计一个不同的 API 来支持不同的类型，比如 int、double、float、char 等，而不需要动态多态的帮助因为我发现当你处理图像处理时，动态多态会减慢你的速度，使用原语像 int 或 char 这样的类型是最快的解决方案，但是当我想根据这些类型设计不同的 API 时非常不方便。

此外，我想在没有动态多态的负担的情况下做这样的事情

```
public static void convert_color(
        final int[] sp, final int[] dp,
        final int Xres, final int Yres,
                    Strategy strategy)
{
    \\....
} 
```

有些算法会受到策略（动态多态性）的性能损失，我需要复制和粘贴只是因为策略不同。

以我目前的水平设计高性能和灵活性的图像处理非常困难，您有更好的解决方案来获得性能和灵活性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:04:32.473

我建议您了解[Trove4j](http://trove.starlight-systems.com/)如何在为基元生成集合时解决此问题。您也可以使用他们的收藏。

我会从一个“超级类型”开始，例如`double`，优化你发现它产生影响的代码。

# javascript - 如何用正则表达式搜索替换并在javascript中保持大小写不变

> ID：13721758
> 
> 赞同：20
> 
> 时间：2012-12-05T11:01:36.217
> 
> 标签：javascript, regex

这是我的问题。我有一个混合大小写的字符串。无论大小写如何，我都想搜索，然后用匹配两边的一些字符替换匹配。

例如：

```
var s1 = "abC...ABc..aBC....abc...ABC";
var s2 = s.replace(/some clever regex for abc/g, "#"+original abc match+"#"); 
```

s2 中的结果应该是这样的：

```
"#abC#...#ABc#..#aBC#....#abc#...#ABC#" 
```

这可以用正则表达式完成吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-05T11:02:57.473

这可以使用正则表达式替换的回调函数来完成。

```
var s1 = "abC...ABc..aBC....abc...ABC";

var s2 = s1.replace(/abc/ig, function (match) {
  return "#" + match + "#"  ;
}
 );

alert(s2); 
```

演示：http: [//jsfiddle.net/dxeE9/](http://jsfiddle.net/dxeE9/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-05T11:04:43.687

这可以使用反向引用来完成：

```
var s2 = s.replace(/your complex regex/g, "#$&#"); 
```

反向引用`$&`引入了整个匹配。如果你想在任何情况下匹配“abc”：

```
var s2 = s.replace(/abc/ig, "#$&#"); 
```

如果你只想引入更大的模式的一部分，你可以通过它的组号来引用它：

```
var s2 = s.replace(/some (part) of a string/ig, "#$1#"); 
```

组按左括号编号，从左到右，从`$1`到`$9`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-05T11:12:38.990

你也可以这样做

```
yourString.replace(/([a-z]+)/ig, "#$1#") 
```

# jquery - jQuery - 使用来自 ajax 结果的快速过滤器

> ID：13721766
> 
> 赞同：0
> 
> 时间：2012-12-05T11:01:58.200
> 
> 标签：jquery

我已经[为 Jquery 下载了 jquery 插件 Quick Filter，](https://github.com/bdelespierre/jquery-quickfilter)并尝试将它用于 ajax 发布结果，但它不起作用。有谁知道可能出了什么问题或如何修改它？

直接链接到 jquery 插件： [https ://github.com/bdelespierre/jquery-quickfilter/blob/master/jquery.quickfilter-0.0.1.js](https://github.com/bdelespierre/jquery-quickfilter/blob/master/jquery.quickfilter-0.0.1.js)

这是 jquery 请求的样子：

```
 $('#cam').change(function(e){
    serializedData = $("#thisid").serialize() ;
    $.ajax({
        url: "/results.php",
        type: "post",
        data: serializedData,
        success: function(response, textStatus, jqXHR){
            $('#cam-list').html(response);
        }
    });
}); 
```

# c# - 更改引号内的逗号

> ID：13721772
> 
> 赞同：1
> 
> 时间：2012-12-05T11:02:17.560
> 
> 标签：c#, split

我正在尝试读取以逗号分隔的文本文件中的数据。我的问题是我的一个数据片段中有一个逗号。文本文件的示例如下：

```
a, b, "c, d", e, f. 
```

我希望能够在 and 之间使用逗号`c`并将`d`其更改为分号，以便我仍然可以使用该`string.Split()`方法。

```
 using (StreamReader reader = new StreamReader("file.txt"))
 {
    string line;
    while ((line = reader.ReadLine ()) != null) {
    bool firstQuote = false;
    for (int i = 0; i < line.Length; i++) 
    {
      if (line [i] == '"' ) 
      {
         firstQuote = true;
      }  
      else if (firstQuote == true) 
      {
         if (line [i] == '"')
         {
            break;
         } 
         if ((line [i] == ',')) 
         {
            line = line.Substring (0, i) + ";" + line.Substring (i + 1, (line.Length - 1) - i);
         }
      }
    }
    Console.WriteLine (line);
 } 
```

我有问题。而不是生产

```
a, b, "c; d", e, f 
```

它正在生产

```
a, b, "c; d"; e; f 
```

它将以下所有逗号替换为分号，而不仅仅是引号中的逗号。有人可以帮我修复我现有的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:06:02.017

基本上，如果你找到一个结束语`"`，你就会认出它是一个开场报价。

换行：

```
firstQuote = true; 
```

至

```
firstQuote = !firstQuote; 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:09:01.683

```
 string line = "a,b,mc,dm,e,f,mk,lm,g,h";

    string result =replacestr(line, 'm', ',', ';');

    public string replacestr(string line,char seperator,char oldchr,char newchr)
    {
        int cnt = 0;
        StringBuilder b = new StringBuilder();
        foreach (char chr in line)
        {
            if (cnt == 1 && chr == seperator)
            {
                b[b.ToString().LastIndexOf(oldchr)] = newchr;
                b.Append(chr);
                cnt = 0;
            }
            else
            {
                if (chr == seperator)
                    cnt = 1;
                b.Append(chr);
            }
        }
        return b.ToString();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:12:07.863

击中第二个引号后，您需要将 firstquote 重置为 false。

```
 else if (firstQuote == true) {
                        if (line [i] == '"') {
                            firstquote = false;
                            break;
                        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T12:01:27.780

这是一个获得所需结果的简单应用程序

```
 static void Main(string[] args)
    {
        String str = "a,b,\"c,d\",e,f,\"g,h\",i,j,k,l,\"m,n,o\"";
        int firstQuoteIndex = 0;
        int secodQuoteIndex = 0;
        Console.WriteLine(str);
        bool iteration = false;

        //String manipulation
        //if count is even then count/2 is the number of pairs of double quotes we are having
        //so we have to traverse count/2 times.
        int count = str.Count(s => s.Equals('"'));
        if (count >= 2)
        {
            firstQuoteIndex = str.IndexOf("\"");
            for (int i = 0; i < count / 2; i++)
            {
                if (iteration)
                {
                    firstQuoteIndex = str.IndexOf("\"", firstQuoteIndex + 1);
                }
                secodQuoteIndex = str.IndexOf("\"", firstQuoteIndex + 1);
                string temp = str.Substring(firstQuoteIndex + 1, secodQuoteIndex - (firstQuoteIndex + 1));                    
                firstQuoteIndex = secodQuoteIndex + 1;
                if (count / 2 > 1)
                    iteration = true;                    
                string temp2= temp.Replace(',', ';');
                str = str.Replace(temp, temp2);
                Console.WriteLine(temp);
            }
        }
        Console.WriteLine(str);
        Console.ReadLine();
    } 
```

如有疑问，请随时询问

# sql - HIREDATE > 超过 20 世纪的 Oracle

> ID：13721783
> 
> 赞同：-3
> 
> 时间：2012-12-05T11:02:48.070
> 
> 标签：sql, oracle

如何在 Oracle 中执行，即：

选择 ename,hiredate from emp wherehiredate > 20 CENTURY

我不知道该怎么做：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:07:18.923

Oracle 中的日期表示最容易使用 ANSI 语法，例如：

```
 where my_date >= date '2012-01-01' 
```

现在你所要做的就是在 20 世纪开始时锻炼。

# php - 我怎样才能让我的删除消息功能只出现在用户自己的朋友页面上留下的消息？

> ID：13721784
> 
> 赞同：0
> 
> 时间：2012-12-05T11:02:48.050
> 
> 标签：php, mysql, codeigniter

我一直在努力尝试删除消息按钮以在我自己的网站个人资料页面上工作。当我删除朋友留下的消息时，它不仅会从屏幕上删除它，还会从数据库中删除它。数据库中的消息有 4 个字段：message_id、from、to 和 message。这是我的个人资料视图，显示了我如何删除朋友的消息：

```
 if(!empty($messages)){
       foreach($messages as $message):
       $delete = $message['message_id']; 
       //var_dump($message); ?>
      <li><?=$message['from']?> says...: "<?=$message['message']?>"(<?=anchor("home/deleteMsg/$delete", 'delete')?>)</li> //this is where the delete button appears beside messages left
     <?php endforeach?> 
      <?php }else{ ?>
     <?php echo 'No messages left yet !!!'; }?> 
```

这是我的控制器，显示了名为的 deleteMsg 函数：

```
function deleteMsg($messageid) 
         {

        $this->messages->deleteMsg($messageid);

        redirect('home');

         } 
```

这是显示 deleteMsg 模型本身的消息模型：

```
 function deleteMsg($message_id)
      {

        $this->db->where(array('message_id' => $message_id));
        $this->db->delete('messages');

      } 
```

这是我的朋友资料视图，我想在其中实现删除消息命令，这样按钮就会显示我留下的消息，我可以删除它们。删除按钮不会出现在本页其他好友评论旁边：

```
 <li><?=$message['from']?> says...: "<?=$message['message']?>"</li> 
```

现在我已经尝试创建一个新的删除消息函数到目前为止没有成功，我这样做比调用相同的函数更好吗？因为这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:14:25.640

我建议启用 CodeIgniter 的分析设置，这样你就可以看到在你的数据库上运行了哪些查询，只需将下面的代码粘贴到你的控制器中：

```
$this->output->enable_profiler(TRUE); 
```

# javascript - 关闭模态窗口JQuery？

> ID：13721785
> 
> 赞同：0
> 
> 时间：2012-12-05T11:02:56.270
> 
> 标签：javascript, jquery, html, jquery-ui

我有产品页面。将产品添加到购物车时，会启动一个模式窗口进行确认 - 这可能需要 2 秒。

我想在确认模式之前显示另一个模式窗口以显示“正在加载...”

我的问题是，当出现“确认”模式时，我不知道如何关闭“正在加载...”模式。

这是启动确认模式的代码：

```
 $(document).ready(function () {
        var $dialog = $('<div style="background-color:red"></div>')
        .html('<h1>loading...</h1>')
        .dialog({
            autoOpen: false,
            title: 'loading...'
        });
        $('.AddToCartButton').click(function () {
            $dialog.dialog('open');
        });        

    }); 
```

在“确认”模式上，我正在尝试使用以下代码关闭“正在加载...”模式：

```
<script type="text/javascript">
    $('#AddToCartButton').dialog('close');    
</script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:05:27.133

您正在函数中调用一个类：

```
$('.AddToCartButton') 
```

以及脚本标签中的 ID：

```
$('#AddToCartButton') 
```

将它们都更改为相同的类型。

# silverlight-5.0 - Silverlight：父 ViewModel 属性值到子 ViewModel 属性

> ID：13721794
> 
> 赞同：3
> 
> 时间：2012-12-05T11:03:22.277
> 
> 标签：silverlight-5.0

我在 Silverlight 论坛上发布了这个问题，但无法得到解决我的问题的答案，所以我希望 SO 的大师能提供帮助！

基本上我的父视图模型中有一个实体属性。当此实体更改时，我需要子视图模型中的实体 ID。我创建了一个具有依赖属性的子控件，并在构造函数中创建了一个绑定。我正在尝试使用 MVVM 和 MEF 来实现所有这些。

我的父视图模型：

```
[ExportPlugin(ViewModelTypes.ParentViewModel, PluginType.ViewModel)]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class ParentViewModel: ViewModelBase
{
    private Person _currentPerson;
    public Person CurrentPerson
    {
        get { return _currentPerson; }
        private set
        {
            if (!ReferenceEquals(_currentPerson, value))
            {
                _currentPerson= value;
                RaisePropertyChanged("CurrentPerson");
            }
        }
    }
} 
```

我的父用户控件：

```
<UserControl x:Class="MyApp.ParentUserControl" x:Name="ParentControl">
        <local:ChildUserControl PersonID="{Binding ElementName=ParentControl, Mode=TwoWay, Path=DataContext.CurrentPerson.ID}" />
</UserControl> 
```

我的 ChildUserControl 代码隐藏：

```
public partial class ChildUserControl : UserControl
{
    #region Private Properties
    private PluginCatalogService _catalogService = PluginCatalogService.Instance;
    #endregion

    #region Dependency Properties
    public static readonly DependencyProperty PersonIDProperty = 
        DependencyProperty.Register("PersonID", typeof(int), typeof(ChildUserControl), new PropertyMetadata(OnPersonIDChanged));
    #endregion

    #region Public Properties
    public int PersonID
    {
        get { return (int)GetValue(PersonIDProperty); }
        set { SetValue(PersonIDProperty, value); }
    }
    #endregion

    #region Constructor
    public ChildUserControl()
    {
        InitializeComponent();

        if (!ViewModelBase.IsInDesignModeStatic)
            this.DataContext = _catalogService.FindPlugin(ViewModelTypes.ChildViewModel, PluginType.ViewModel);

        this.SetBinding(PersonIDProperty, new Binding("PersonID") { Mode = BindingMode.TwoWay, Source = DataContext, UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged });
    }
    #endregion

private static void OnPersonIDChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    ...
} 
```

我的 ChildViewModel：

```
[ExportPlugin(ViewModelTypes.ChildViewModel, PluginType.ViewModel)]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class ChildViewModel: ViewModelBase
{
    private int _personID;
    public int PersonID
    {
        get { return _personID; }
        set
        {
            if (!ReferenceEquals(_personID, value))
            {
                _personID= value;
                RaisePropertyChanged("PersonID");
            }
        }
    }
} 
```

我创建了`OnPersonIDChanged`事件以查看当`CurrentPerson`实体更改时，更改是否在 中被拾取`ChildControl`，确实如此。它只是没有在`ChildControl ViewModel`.

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T18:45:28.143

最好，如果您使用的是 PRISM，您可以使用 EventAggregator ... 请参阅[http://msdn.microsoft.com/en-us/library/ff921122(v=pandp.40).aspx](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.40%29.aspx)和[https://compositewpf.codeplex .com/](https://compositewpf.codeplex.com/)

另一种选择是挂钩（hack）到 PropertyChanged

```
ViewModel1.PropertyChanged += (s, e) =>
{
   if (e.PropertyName == "XXX")
   {
      ViewModel2.PropertyX = vm1.PropertY;
   }
}; 
```

# database - sharepoint 2007 自定义错误消息

> ID：13721796
> 
> 赞同：-1
> 
> 时间：2012-12-05T11:03:25.493
> 
> 标签：database, sharepoint

对于共享点应用程序，我们有 5 个内容数据库，每个数据库都专用于保存一个网站集。最终，我们将一个内容数据库从 SQL Server 和 Sharepoint 中央管理中分离出来。现在，当用户尝试访问该特定站点 url 或该站点内的任何列表/库时，他们会收到一个常见的 404 site not found 错误！。是否有可能向他们显示自定义错误消息，例如“内容已被管理员删除”，当用户尝试访问正在删除的此网站集中的任何内容时，应显示该错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:08:40.703

只需覆盖错误页面，如果他们输入了与已删除站点匹配的 URL，则向他们显示您的自定义消息。

有关创建自定义错误页面，请参阅本文：

[http://blogs.msdn.com/b/ketaanhs/archive/2010/03/13/moss-sharepoint-2007-custom-error-page-and-access-denied-page.aspx](http://blogs.msdn.com/b/ketaanhs/archive/2010/03/13/moss-sharepoint-2007-custom-error-page-and-access-denied-page.aspx)

# python - 带有 python 3 的守护进程

> ID：13721808
> 
> 赞同：2
> 
> 时间：2012-12-05T11:03:54.887
> 
> 标签：python, python-3.x, daemon, launch-daemon

我正在为 Ubuntu 在 python3 中编写一个脚本，该脚本应该在所有 X 分钟内执行，并且应该在登录后自动启动。因此我想创建一个守护进程（这是正确的解决方案吗？）但我还没有找到任何模块 / python3 的示例，仅适用于 python 2.X。你知道我可以做什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T11:49:21.707

我会简单地制作脚本，并将其放在某个地方，然后在要运行脚本的用户的 crontab 中添加一行。这可能是根源。

```
sudo crontab -e 
```

启动 crontab 的编辑器

```
X * * * *    /usr/bin/python /path/to/the/script 
```

这样脚本将每 X 分钟执行一次。无需守护进程，无需在脚本中制作自己的计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:27:50.220

假设 python 脚本名称是`monitor`. 使用以下步骤：

*   复制监视脚本`/usr/local/bin/`（*不是必需*的）

*   同时添加一个副本`/etc/init.d/`

*   然后执行以下命令使其可执行

    `sudo -S chmod "a+x" "/etc/init.d/monitor"`

*   最后运行 update.rc 命令

    `sudo -S update-rc.d "monitor" "defaults" "98"`

`monitor`每当您登录 all 时，这将执行您`tty`。

# vb.net - 点击时如何获取标签的ID？

> ID：13721818
> 
> 赞同：0
> 
> 时间：2012-12-05T11:04:29.317
> 
> 标签：vb.net, label, addhandler

使用 AddHandler 时从标签获取 ID 时遇到问题，这是一个示例，但我也将其用于控制​​标签的数组。

```
AddHandler CmdUpdate.Click, AddressOf CmdUpdate_click

Protected Sub CmdUpdate_click(sender As Object, e As EventArgs) 
 '?
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:54:38.527

使用`sender.Name`财产。

您应该`sender`转换为`Control`：

```
DirectCast(sender, Control).Name 
```

# javascript - Fancybox 中的 SVG

> ID：13721826
> 
> 赞同：5
> 
> 时间：2012-12-05T11:04:49.223
> 
> 标签：javascript, html, svg, fancybox

我需要fancybox中的svg图像。

```
<div id="data">
  <svg width="400" height="110">
    <rect width="300" height="100" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,0)">
      Sorry, your browser does not support inline SVG.
  </svg>
  <img src="http://fc03.deviantart.net/fs71/f/2011/260/e/1/circle_png_by_xdicsii-d4a2odp.png" />
  <a id="inline" href="#data" style="margin-left:15px;">Full Screen</a>
</div>
```

我想全屏显示 id 为“数据”的 div。

当我点击“全屏”时，我得到了带有 id“数据”和 jpg 图像的 div 的全屏，但不是 svg 图像（渲染到 div 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-12T08:51:01.450

```
<div style="height:inherit; width:inherit"></div> 
```

# matlab - 在 MATLAB 中找出实际频率值与 FFT 图索引之间关系的困惑

> ID：13721827
> 
> 赞同：4
> 
> 时间：2012-12-05T11:04:51.440
> 
> 标签：matlab, fft, frequency

我知道有很多类似的问题，我仍然无法弄清楚答案。假设我们在 MATLAB 中有时间信号：

```
t=0:1/44100:1 
```

和频率为 500Hz 的余弦信号：

```
x=cos(2*pi*500*t); 
```

现在，我正在尝试绘制使用`fft`信号 x 上的命令获得的幅度谱

```
FFT=abs(fft(x))
plot(FFT) 
```

根据理论，我们应该在图中得到两个峰值，一个在 -500 Hz，另一个在 500Hz。我不明白的是，我确实得到了两个峰值，但我无法弄清楚这些峰值的频率。我知道有一种方法可以使用 FFT 指数、输入信号的长度和采样频率来计算频率，但我仍然无法计算频率。

我知道有一些方法可以对齐 FFT 图，以便峰值位于它们通过使用该`fftshift`函数表示的频率的索引号处，但我想要的是使用简单调用此函数产生的图来计算频率：

```
FFT=fft(x) 
```

在这种情况下，我已经知道信号包含 500Hz 的余弦，但是如果我们想要获得 FFT 的信号在时间之前不知道怎么办。我们如何使用函数的输出获得该样本中峰值的频率值`fft`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:17:03.953

您需要自己生成频率阵列并根据它绘制 FFT 结果。

像这样：

```
function [Ycomp, fHz] = getFFT(data, Fs)
     len = length(data);
     NFFT = 2^nextpow2(len);
     Ydouble = fft(data, NFFT)/len; % Double-sided FFT
     Ycomp = Ydouble(1:NFFT/2+1); % Single-sided FFT, complex
     fHz = Fs/2*linspace(0,1,NFFT/2+1); % Frequency array in Hertz.
     semilogx(fHz, abs(Ycomp))
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:18:10.917

您将在 500 Hz 和 Fs - 500 Hz 处看到峰值（即在您的特定情况下为 44100 - 500 = 43600 Hz）。

这是因为实数到复数 FFT 输出是复共轭对称的——当您仅查看幅度时，频谱的上半部分是下半部分的“镜像”，因此是多余的。

请注意，在绘制功率谱时，您通常可以通过使用 MATLAB 的[周期图](http://www.mathworks.co.uk/help/signal/ref/periodogram.html)函数来节省大量工作，而不是直接处理 FFT、窗口函数、绘图等的所有细节。

# c++ - 如果 std::max() 通过引用返回（必须如此），这可能会导致悬空引用吗？

> ID：13721839
> 
> 赞同：19
> 
> 时间：2012-12-05T11:05:14.370
> 
> 标签：c++, templates

考虑范式`max`模板函数`std::max()`：

```
// From the STL

    // TEMPLATE FUNCTION _Debug_lt
template<class _Ty1, class _Ty2> inline
    bool _Debug_lt(const _Ty1& _Left, const _Ty2& _Right,
        _Dbfile_t _File, _Dbline_t _Line)
    {   // test if _Left < _Right and operator< is strict weak ordering
        if (!(_Left < _Right))
            return (false);
        else if (_Right < _Left)
            _DEBUG_ERROR2("invalid operator<", _File, _Line);
        return (true);
    }

// intermediate #defines/templates skipped 

    // TEMPLATE FUNCTION max
template<class _Ty> inline
    const _Ty& (max)(const _Ty& _Left, const _Ty& _Right)
    {   // return larger of _Left and _Right
        return (_DEBUG_LT(_Left, _Right) ? _Right : _Left);
    } 
```

...或者，以更简单的形式：

```
template<typename T> inline
T const & max(T const & lhs, T const & rhs)
{
    return lhs < rhs ? rhs : lhs;
} 
```

我理解为什么`max`模板必须通过引用返回（以避免昂贵的副本并避免需要复制构造函数）。

但是，这不会导致悬空引用的可能性，如以下代码所示？

```
int main()
{
    const int & max_ = ::max(3, 4);
    int m = max_; // Is max_ a dangling reference?
} 
```

在这种情况下，代码构建并运行良好（VS 2010）并且值`m`设置为 4。但是，我觉得这`max_`是一个悬空引用，因为硬编码的右值直接传递给，`3`并且为这些分配的存储硬编码的右值常量可以在到达以下代码行时正确地被释放。`4``max`

我可以为成熟的对象设想类似的边缘情况，例如

```
class A
{
    friend bool operator<(A const &, A const &)
    {
        return false;
    }
};

int main()
{
    const A & a_ = ::max(A(), A());
    A a = a_; // Is a_ a dangling reference?
} 
```

我是否正确，这种用法`max`- 其中在调用参数列表中定义的右值作为参数传递 - 是使用 的潜在“陷阱”的一个例子，这是`max`不可避免的，因为`max`需要定义为返回引用以避免昂贵的副本（并避免需要复制构造函数）？

出于这个问题中讨论的原因，在现实生活中是否可能存在良好的编程习惯来定义一个`max`按值而不是按引用返回其结果的版本？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T11:12:19.270

是的，这是一个悬而未决的参考。

是的，这是一个问题。

按值返回的版本可能很有用，前提是您*默认*使用它，并在需要时切换到按引用。如果您默认使用按引用，并且仅在需要时才切换到按值，那么您仍然会遇到问题，因为意识到您需要它与意识到您应该编写`const A a_= ::max(A(), A());`.

不幸的是，按价值引入了一个新问题：

```
A a, b, c;
mymax(a, b) = c; // assigns to temporary, not to a or b 
```

（实际上，看看这段代码，我认为如果你调用它，`max_by_val`那么你就不会写这个）。

您可以按 const 值返回，并且有些人过去建议运算符重载应按 const 值返回。但这在 C++11 中引入了一个性能问题：

```
A a, b, c;
c = constmymax(a, b); // copies from const rvalue instead of moving. 
```

甚至在 C++03 中，它也阻止了等效的显式优化`swap(c, constmymax(a,b))`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T11:13:02.733

（已删除答案）请参阅 Herb Sutters [GOTW 文章](http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/)，将 const 引用绑定到临时对象。

编辑：我删除了答案，因为它实际上是错误的（感谢您让我清楚），所以我留下的只是一篇相关文章的链接。但请注意：**本文中描述的功能不适用于此处！**

# mysql - 连接字符串的高级搜索

> ID：13721840
> 
> 赞同：1
> 
> 时间：2012-12-05T11:05:15.467
> 
> 标签：mysql, sql, codeigniter, google-maps, google-maps-api-3

我正在为一个网站创建一个搜索功能，我需要从输入中获取用户的完整地址，例如“地址 32、城市、地区、国家、邮政编码”（此订单不需要）并返回周围可用的餐厅该地区。我有一个表格“地址”，其中每个元素都有一个字段。我正在考虑连接数据库中的用户地址，并在 SQL REGEXP 的帮助下将其与用户的输入进行比较。是否有任何其他近似的 SQL 搜索可以给我，或者你能建议我一种不同的方法吗？一位朋友建议使用（[http://www.simonemms.com/2011/02/08/codeigniter-solr/](http://www.simonemms.com/2011/02/08/codeigniter-solr/)），但是通过对其进行少量研究，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:13:03.943

在 SQL 中将地址连接在一起的问题是使用索引会错过它。因此它会很慢。此外，如果您不知道输入元素的顺序，那么它与从数据库连接的内容（可能是不同的顺序）匹配的机会很小。

我建议对大部分地址项目，将它们分成不同的表（即区域表、另一个国家表等），并将 ID 存储在用户表的列中。

对于搜索，确定哪个搜索字段与哪个实际字段匹配，然后加入这些字段以查找真实地址。

也意味着您可以更轻松地识别错别字。

# java - Corba 远程访问

> ID：13721845
> 
> 赞同：-1
> 
> 时间：2012-12-05T11:05:29.273
> 
> 标签：java, corba, idl

我有一个在系统中运行的 Corba 服务器，我想从同一 LAN 上的另一台机器访问它。我尝试给服务器机器的服务器 ip 访问（附代码）；但是我收到下面提到的错误：

```
orbd -ORBInitialPort 1050 -ORBInitialHost <serverip>&

java HelloServer -ORBInitialPort 1050 -ORBInitialHost <serverip>&

java HelloClient -ORBInitialPort 1050 -ORBInitialHost <serverip>&

WARNING: "IOP00410201: (COMM_FAILURE) Connection failure: socketType: IIOP_CLEAR_TEXT; hostname: 127.0.1.1; port: 43944"
org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 201  completed: No 
```

*   它说主机名是 127.0.1.1，但这不是我指定的服务器名称。
*   端口号与我指定的不同形式
*   服务器尚未收到任何连接，仍在等待。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:26:27.343

CORBA 程序不直接处理服务器的 IP 地址。当您想要访问某个对象时，您需要它的 IOR - 或可互换的对象引用。IOR 包含需要就对象联系的机器的地址、一些对象 ID 和一些更多的管理信息。

有两种最常用的方法来获取某个对象的 IOR。低级方法是服务器转换为字符串，并将该字符串写入某个文件。客户端读取该字符串并将其转换为对象引用。

另一种方法是运行名称服务，该服务负责将名称转换为 IOR。对象的 DNS 之类的东西。

典型的 CORBA 程序只会对一个或几个“根”对象进行这种操作，并且其他对象的对象引用作为调用该根对象的返回值返回。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-11-04T14:03:11.607

在您需要的每个服务器和客户端的代码的参数端

```
-ORBInitialPort 1050 -ORBInitialHost serverIP 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-07T07:17:13.057

谢谢大家。我已经更改了 /etc/hosts conf 文件。更改了 localhost ip，以及我如何访问远程服务器。

# android - 我们可以使用 没有数据字段？

> ID：13721846
> 
> 赞同：0
> 
> 时间：2012-12-05T11:05:34.653
> 
> 标签：android, nfc, intentfilter, ndef

如何使用 NDEF 消息过滤所有标签。我试过这个

```
<intent-filter>                
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter> 
```

但它仅适用于附加`<data .../>`字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:41:12.090

是的，这不适用于所有版本的 Android。您可以`Ndef`使用用于操作的意图过滤器`ACTION_TECH_DISCOVERED`和带有定义的 XML 文件来过滤技术，请参阅[http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#tech-disc](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#tech-disc)获取文档。

# java - 如何在自己的软键盘中内置活动？

> ID：13721847
> 
> 赞同：0
> 
> 时间：2012-12-05T11:05:35.543
> 
> 标签：java, android, service, android-activity, soft-keyboard

我有自己的软键盘：

![在此处输入图像描述](../Images/6c2f8c2d577ded268f1ae4872b01cc24.png)

和主要活动 - 字典：

![在此处输入图像描述](../Images/681b03d7cfbabfbe9e978107f8c485b3.png)

我可以将我的主要活动嵌入到软键盘中，如下所示：

![在此处输入图像描述](../Images/4cf76c7942e889a521da36fff21a676f.png)

在事件处理程序“On Start”下一个代码：

```
Intent intent = new Intent(getBaseContext(), FdActivity.class);
            intent.addCategory(Intent.CATEGORY_EMBED);
            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    getApplication().startActivity(intent); 
```

但我的活动在全屏上运行。

# android - 在android中发送#作为dtmf

> ID：13721851
> 
> 赞同：2
> 
> 时间：2012-12-05T11:05:46.077
> 
> 标签：android, dtmf

我正在尝试像这样直接拨打电话

```
String url = "tel:" +"029870125,198#";                              
Intent intent = new Intent(Intent.ACTION_CALL,Uri.parse(url)); 
```

但问题是 Android 正在发送`198`as `dtmf`，但`#`没有发送。`#`发送as是否需要任何特殊机制`dtmf`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:47:35.377

```
Intent intentCallForward = new Intent(Intent.ACTION_CALL);                             
Uri uri = Uri.fromParts("tel", phoneNumber, "#"); 
intentCallForward.setData(uri);                                
startActivity(intentCallForward); 
```

# grails - Grails Searchable Plugin 多对多搜索

> ID：13721858
> 
> 赞同：4
> 
> 时间：2012-12-05T11:06:02.693
> 
> 标签：grails, many-to-many, grails-orm, grails-searchable, searchable-plugin

我有域类用户，它与域类 Li​​braryElement 具有多对多关系。我正在尝试过滤属于用户的所有库元素，其中包含某些文本。这就是定义可搜索属性和关系的方式：

用户端：

```
static searchable = {
    id name: 'userId'
    libraryElements component: true
}

static hasMany = [libraryElements: LibraryElement] 
```

图书馆元素方面：

```
static searchable = {
    users component: true
}

static belongsTo = User
static hasMany = [users: User] 
```

我正在尝试执行这样的搜索：

```
LibraryElement.search("userId:" + userId + " libraryElementName:" + searchWord + "*") 
```

即使在数据库中有一个应该被此搜索命中的数据，我也得到 0 个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T15:38:43.820

你试过这个：

```
LibraryElement.search(searchWord +" AND userId:userId", params) 
```

?

# linux - 每行计算文件中的唯一元素

> ID：13721860
> 
> 赞同：0
> 
> 时间：2012-12-05T11:06:10.503
> 
> 标签：linux, bash, unix

假设我有一个文件，每行有 5 个元素。

```
$ cat myfile.txt

e1 e2 e3 e4 e5
e1 e1 e2 e2 e1
e1 e1 e4 e4 e4 
```

对于每一行，我想执行以下命令来计算每行上的唯一元素。：

```
tr \\t \\n | sort -u | wc 
```

我无法弄清楚命令的第一部分 - 有人可以帮助我吗？

免责声明：该文件实际上如下所示 - 但我执行 xargs -L 5 以获得第一部分所示的输出。

```
e1
e2
e3
e4
e5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:10:07.797

给定您的输入文件：

```
$ cat file
e1 e2 e3 e4 e5
e1 e1 e2 e2 e1
e1 e1 e4 e4 e4 
```

文件中的唯一元素使用`awk`：

```
awk '{for(i=1;i<=NF;i++) a[$i]} END{for (keys in a) print keys}' 
e1
e2
e3
e4
e5 
```

文件中的唯一元素使用`grep`而不是`tr`：

```
$ grep -Eo '\w+' file | sort -u
e1
e2
e3
e4
e5 
```

* * *

文件中每行的唯一元素：

使用`awk`：

```
$ awk '{for(i=1;i<=NF;i++) a[$i]; print length(a); delete a}' file
5
2
2 
```

`awk`解决方案确实是去这里的方式，但是`bash`自从你标记它之后使用：

```
#!/bin/bash

while read line; do
  echo $line | grep -Eo '\w+' | sort -u | wc -l 
done < file 
```

输出：

```
5
2
2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:13:50.613

你可以使用这个：

```
perl -F -lane '$count{$_}++ for (@F);print scalar values %count;undef %count' your_file 
```

测试如下：

```
> cat temp
e1 e2 e3 e4 e5
e1 e1 e2 e2 e1
e1 e1 e4 e4 e4
> perl -F -lane '$count{$_}++ for (@F);print scalar values %count;undef %count' temp
5
2
2
> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:51:44.033

`perl`如果您喜欢，这里有一个版本：

```
perl -F'\s' -pane '%H=map{$_=>1}@F; $_=keys(%H)."\n"' myfile.txt 
```

# signature - 验证 javacard 上的 SHA1withECDSA 签名

> ID：13721862
> 
> 赞同：5
> 
> 时间：2012-12-05T11:06:18.023
> 
> 标签：signature, javacard

我有使用 BouncyCastle 由 SHA1withECDSA 算法签名的自签名证书。在 BC 下，我可以轻松验证它，但是当我在 JavaCard 上进行验证时，它每次都会向我发送错误消息（来自 NIST 的曲线 secp192r1）。证书持有普通签名（非 X9.62 意味着只有 r+s 没有任何标签）。

有我的代码来验证它（将值设为常量 - 当然用于测试）。

> 字节 [] 证书数据 = {...}

```
 Signature signature = Signature.getInstance(Signature.ALG_ECDSA_SHA, false);
    ECPublicKey ecpk = (ECPublicKey) KeyBuilder.buildKey(KeyBuilder.TYPE_EC_FP_PUBLIC,      KeyBuilder.LENGTH_EC_FP_192, true);

    ecpk.setA(new byte[]{...}, (short)0, (short)0x0018); 
    ecpk.setB(new byte[]{...}, (short)0, (short)0x0018);
    ecpk.setG(new byte[]{...}, (short)0, (short)0x0031);
    //Point format: uncompressed tag(0x04), x, y
    ecpk.setK((short)0x0001);
    ecpk.setR(new byte[]{}, (short)0, (short)0x0018);
    ecpk.setW(new byte[]{}, (short)0, (short)0x31);
    ecpk.setFieldFP(new byte[]{}, (short)0, (short)0x0018);

    signature.init(ecpk, Signature.MODE_VERIFY);

    boolean result = signature.verify(certdata, (short)0, (short)certdata.length, signtab, (short)0, (short)signtab.length);
    if(result) ISOException.throwIt((short)0x0001);
    else ISOException.throwIt((short)0x0002);    
} 
```

'...' 而不是字节以获得清晰的视图（192 位曲线可能会造成很大的混乱）。

pastebin 上带有标签说明的证书：

[http://pastebin.com/gvqYzm2g](http://pastebin.com/gvqYzm2g)

谢谢你的帮助

塞瓦尔

编辑：新测试：所有测试都基于相同的数据（PublicKey、PrivateKey、要签名的消息）符号是随机的，所以我将使用 2 个符号（signT - 终端 (BC) 生成的符号，signC - 芯片生成的符号）

signT 不能在 CHIP 上验证，但可以在终端上验证。signC 在芯片和终端上验证

所以我检查了API之间的交叉

*   指向 BC 的交叉关系运行良好

*   指向 CHIP 的交叉关系不起作用

一对密钥生成得很好，因为当我将 BC 生成的 PrivateKey 和 PublicKey 放入 CHIP 时，CHIP 上生成的签名可以被 CHIP 验证。

*   KeyPair 生成良好

我不知道我现在应该检查什么。问题可能与在 ECDSA 步骤 e = SHA1(Message) 中填充数组有关。哈希后数组发生了什么（哈希比曲线短，卡片需要在复制前声明数组的大小）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T21:12:43.073

我在使用 BouncyCastle 验证 ECDSA 签名（在 JavaCard 192r1 上生成）时遇到问题，我找到了解决方案。我希望它会有用

[在充气城堡上验证 javacard 签名 ALG_ECDSA_SHA](https://stackoverflow.com/questions/28843390/verify-javacard-signature-alg-ecdsa-sha-on-bouncy-castle/28887643#28887643)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T09:12:56.157

从 Bouncy Castle 到 JavaCard 使用 Prime192v1 对 ECDSAwithSHA-1 进行签名和验证对我来说效果很好。

您的问题可能是签名本身的格式。

签名是 DER 编码结构，它是两个整数（标签 0x02）的序列（标签 0x30）。在 JavaCard 中，总是需要 56 个字节：两个长度为 25 的坐标加上 6 个字节的 DER 标头。JavaCard 总是期望每个坐标中有前导零。但是，BC 生成的签名通常在坐标中没有前导零，因此签名可以短于 56 个字节，这就是 JavaCard 混淆的原因。

相反的方向总是可以的，因为 BC 可以处理前导零，尽管它在创建签名时不会添加它们。

您应该做什么：用您自己的代码包装 BC 签名机制，并始终在您的 BC 签名中的坐标中添加前导零。如果这样做，您将能够在 BC 和 JavaCard 中验证签名。

我想发布我的代码，但不幸的是它是商业安全项目的一部分......

# .net - 如何在使用 WCF 的事务性 MSMQ 中将消息显式标记为中毒

> ID：13721866
> 
> 赞同：9
> 
> 时间：2012-12-05T11:06:26.173
> 
> 标签：.net, wcf, msmq, msmqintegrationbinding

我正在使用 MSMQ 版本 4 并且有一个事务队列。我正在使用 WCF 来监听传入消息的队列。

在处理过程中存在对第三方组件的依赖，这些组件可能会出现故障或在较长时间内不可用。为了弥补这一点，我使用 MSMQ 4 ( [http://msdn.microsoft.com/en-us/library/aa395218.aspx](http://msdn.microsoft.com/en-us/library/aa395218.aspx) ) 中的毒消息处理功能来重试消息*x*次，等待时间为*y 。*

但是在某些情况下，我知道输入消息无效/中毒。当发生这种情况时，抛出异常将使消息遵循有害消息处理例程，就像所有其他消息一样，具有所有重试和等待时间。但是，当我知道消息已中毒时，我看不到有理由重试并等待配置的时间让中毒队列处理它。

有什么方法可以将消息显式标记为已中毒，这样它就不会遵循配置的重试流程并立即移至中毒队列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T14:18:22.530

那么我会建议在这种情况下将请求数据存储在数据库中并且不要抛出任何异常，以便成功处理 WCF 消息并将从队列中删除。

如果需要，我们可以稍后处理这些数据，处理数据库中的数据比监控/管理毒队列更容易。

您可以根据这些配置进行一些配置，您可以决定消息的下一个处理时间戳，并且线程可以重新处理来自 DB 的此类消息。

# java - 使用 SSHJ 连接到 AWS EC2 实例

> ID：13721867
> 
> 赞同：1
> 
> 时间：2012-12-05T11:06:36.263
> 
> 标签：java, amazon-ec2, sshj

我对此有很多问题。

我有以下代码

```
 try {
        final SSHClient ssh = new SSHClient();
        PKCS8KeyFile keyFile = new PKCS8KeyFile();
        keyFile.init(new File(Thread.currentThread().getContextClassLoader().getResource("development.pem").toURI()));
        ssh.loadKnownHosts();
        ssh.addHostKeyVerifier("ec2-XX-XX-XX-XX.compute-1.amazonaws.com", 22, "ff:59:aa:24:42:b1:a0:9f:c9:4c:73:34:fb:95:53:c2:b8:37:a8:f8");
//      ssh.addHostKeyVerifier("ec2-XX-XX-XX-XX.compute-1.amazonaws.com", 22, "90:1e:4d:09:42:c4:16:8a:4c:dc:ae:c2:60:14:f9:ea");
        ssh.connect("ec2-XX-XX-XX-XX.compute-1.amazonaws.com");
        ssh.auth("ec2-user", new AuthPublickey(keyFile));
        Session session = ssh.startSession();
        Command sudo = session.exec("sudo su -");
        System.out.println("sudo=" +sudo.getOutputAsString());
        Command whoami = session.exec("whoami");
        System.out.println("whoami=" + whoami.getOutputAsString());
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

第一个 addHostKeyVerifier 使用 AWS 控制台上的指纹，注释掉的那个是它一直告诉我它失败的那个。我打算从哪里获得正确的密钥。

如果我使用第二个密钥，它会通过验证然后失败。

我正在使用 SSHJ 版本 0.8.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-30T09:31:37.800

这对我有用。

对于您的 PEM 文件，您需要使用`OpenSSHKeyFile`密钥提供程序。

```
 SSHClient ssh = new SSHClient();
  OpenSSHKeyFile keyFile = new OpenSSHKeyFile();
  File file = new File("c:\\full\\path\\to\\keyfile.pem");
  keyFile.init(file); 
```

就个人而言，我只是取消了主机密钥验证以始终返回`true`。但我相信你的方式更安全（如果它有效的话）。

```
 ssh.loadKnownHosts();
  ssh.addHostKeyVerifier((a, b, c) -> true); 
```

AWS 的用户名取决于您的图像。很多时候它是“根”。就我而言，它是“ubuntu”。

```
 ssh.connect("ec2-54-165-233-48.compute-1.amazonaws.com");
  ssh.auth("ubuntu", new AuthPublickey(keyFile));
  Session session = ssh.startSession(); 
```

（注意：我使用的是 0.26.0 版本。）

# asp.net - 学习 ASP.NET MVC 从 1 或 2 或 3 开始

> ID：13721868
> 
> 赞同：5
> 
> 时间：2012-12-05T11:06:36.367
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-2

我是 ASP.NET MVC 世界的新手。我对 ASP.NET 2.0 和 3.5 有足够的经验。

但正如我所看到的，我们现在处于第 4 版，直接从这个最新版本开始让我感到不舒服。我正在浏览微软网站上的[ASP.NET MVC 视频教程](http://www.asp.net/mvc/videos)，其中列出了从 ASP.NET MVC -1、MVC -2、MVC -3 甚至 MVC - 4 开始的学习系列。

所以现在混乱来了..!! 如果我直接从 MVC -3 开始.. 忽略 MVC - 1 和 MVC - 2 我错过了什么吗？

我可以直接从 MVC-3 开始吗？不用担心其他任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:47:20.947

你绝对不应该回到 1 或 2，从那时起事情已经发生了很大的变化。你不想花太多时间学习不再适用的东西。我建议您从“Pro ASP.NET MVC 3 Framework”一书开始，这就是我学习 MVC 的方式。

本书从一个简单的示例开始，介绍了 MVC 的工作原理，并详细介绍了 MVC 使用的每个单独的特性。如果你掌握了这本书，你就掌握了 MVC！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T11:12:40.910

学习的时候完全不用担心asp.net mvc的版本。mvc 框架中的主要概念是`Model, View, Controller, Routes`，一旦您对它们有基本的了解，您将能够使用任何版本。

上述所有基本功能在所有版本中都相同，但不同版本添加了更多功能。与 mvc4 相比，mvc3 的示例之一是移动视图。

所以，不要犹豫，开始吧！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:12:26.787

我建议至少从 Mvc3 开始，甚至考虑使用 Mvc4。

较新的版本往往是以前版本的超集和改进。

不使用 Mvc4 的唯一原因是 Mvc3 可能有更多当前的培训材料。也就是说，我认为 Mvc4 上已经有很多了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T11:35:07.087

如果您从 MVC3（或 4）开始，您不会错过任何事情，我什至会推荐它。并立即开始查看 Razor 视图，这就是您要使用的视图语言。

# r - 使 commandargs 以逗号分隔或解析空格

> ID：13721872
> 
> 赞同：7
> 
> 时间：2012-12-05T11:06:54.190
> 
> 标签：r, commandargument

我正在尝试使用命令行参数从命令行运行 R。这包括传入一些文件路径作为在脚本中使用的参数。大多数情况下这一切都有效，但有时路径中有空格并且 R 不理解。

我正在运行以下形式：

```
R CMD BATCH --slave "--args inputfile='C:/Work/FolderWith SpaceInName/myinputfile.csv' outputfile='C:/Work/myoutputfile.csv'" RScript.r ROut.txt 
```

R抛出一个文件说

```
Fatal error: cannot open file 'C:\Work\FolderWith': No such file or directory 
```

所以很明显，我的单引号不足以告诉 R 将引号内的所有内容作为参数值。我在想这意味着我应该找到一种`--args`使用逗号分隔的方法，但我找不到这样做的方法。我确定这很简单，但我在文档中没有找到任何内容。

当前脚本非常基本：

```
ca = commandArgs(trailingOnly=TRUE)
eval(parse(text=ca))
tempdata = read.csv(inputFile)
tempdata$total = apply(tempdata[,4:18], 1, sum)
write.csv(tempdata, outputFile, row.names = FALSE) 
```

万一它是相关的，我正在为此使用 Windows，但它似乎不是 cmd 提示问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:14:53.283

使用`eval(parse())`可能不是解析命令行参数的最佳和最有效的方法。我建议使用类似的包[`optparse`](http://cran.r-project.org/web/packages/optparse/index.html)来为你做解析。解析命令行 args 已经解决了，不需要重新实现。我可以想象这可以解决您的问题。虽然，路径名中的空格一开始是个坏主意。

或者，您可以采用非常简单的方法并传递如下参数：

```
R CMD BATCH --slave arg1 arg2 
```

您可以在哪里检索它们，例如：

```
ca = commandArgs(TRUE)
arg1 = ca[2]
arg2 = ca[3] 
```

这避免了`eval(parse`我认为导致问题的原因。最后，您可以尝试像这样逃离空间：

```
R CMD BATCH --slave "C:/spam\ bla" 
```

你也可以`Rscript`试一试，`R CMD BATCH`似乎不如`Rscript`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:22:48.713

这篇文章有很多相似之处： [R command line passing a filename to script in arguments (Windows)](https://stackoverflow.com/questions/4808169/r-command-line-passing-a-filename-to-script-in-arguments-windows)

此外，这篇文章与操作系统非常相关。我的回答仅适用于 Windows。

可能您正在寻找的是`RScript.exe`而不是`R.exe`. 后者对空格没有问题：`path\to\RScript "My script.r"`.

一件无聊的事情可能是`RScript`每次更新 R 时搜索或设置路径并执行此操作。

在我的搜索路径中的便利脚本中，我编写了一个小工具来运行 RScript 而不用担心路径。以防万一有人感兴趣：

```
@echo off
setlocal 

::Get change to file dir par (-CD must be 1st par)
::================================================
Set CHANGEDIR="F"
If /I %1 EQU -cd  (
 Set CHANGEDIR="T"
 SHIFT        
)       

::No args given
::=============
If [%1] EQU [] GoTo :USAGE 

::Get R path from registry 
::========================
:: may check http://code.google.com/p/batchfiles for updates on R reg keys
Call :CHECKSET hklm\software\R-core\R  InstallPath
Call :CHECKSET hklm\software\wow6432Node\r-core\r InstallPath
if not defined RINSTALLPATH echo "Error: R not found" & goto:EOF

::Detect filepath when arg not starting with "-" 
::==============================================

::Note the space after ARGS down here!!!
Set ARGS= 
:LOOP          
if [%1]==[] (GoTo :ELOOP)
Set ARGS=%ARGS% %1
::Echo [%ARGS%] 

Set THIS=%~1
if [%THIS:~0,1%] NEQ [-] (Set FPATH=%~dp1)

SHIFT          
GoTo :LOOP
:ELOOP        
::echo  %FPATH%

::Run Rscript script, changing to its path if asked
::=================================================
If %CHANGEDIR%=="T" (CD %FPATH%)
Echo "%RINSTALLPATH%\bin\Rscript.exe" %ARGS%
"%RINSTALLPATH%\bin\Rscript.exe" %ARGS%

endlocal 
:: ==== Subroutines ====
GoTo :EOF  

:USAGE       
Echo USAGE:
Echo  R [-cd] [RScriptOptions] Script [ScriptArgs]

Echo.          
Echo  -cd changes to script dir. Must be first par. 
Echo  To get RScript help on options etc.:
Echo  R --help

GoTo :EOF  

:CHECKSET  
if not defined RINSTALLPATH for /f "tokens=2*" %%a in ('reg query %1 /v %2 2^>NUL') do set RINSTALLPATH=%%~b
GoTo :EOF 
```

该脚本在运行之前打印实际的 RScript 调用行。

请注意，添加了一个参数 ，`-cd`以自动更改为脚本目录。事实上，从 R 内部猜测脚本路径并不容易（并用 设置它`setwd()`），以便调用其他脚本或读/写放置在同一路径（或相对路径）中的数据文件。

这个 ( `-cd`) 可能会使您的其他命令参数变得多余，因为您可能会发现直接从脚本内部调用它们很方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:35:44.703

作为@PaulHimestra 的改进，您可以在这里回答如何使用 Rscript ：

您创建一个 launcher.bat ，

```
echo off
C:
PATH R_PATH;%path%
cd DEMO_PATH
Rscript youscript.R arg1 arg2
exit 
```

使用 R_PATH 类似于 C:/Program Files/R/R-version

# c# - “EntityState”不是类型的有效属性

> ID：13721881
> 
> 赞同：0
> 
> 时间：2012-12-05T11:07:04.000
> 
> 标签：c#, entity-framework, wcf-data-services, odata

我已经启用了 OData，如下所述：http: [//drc.ideablade.com/xwiki/bin/view/Documentation/odata-enable](http://drc.ideablade.com/xwiki/bin/view/Documentation/odata-enable) 我最终得到了诅咒的“处理此请求时发生错误”。错误。然后我用谷歌搜索，直到我发现如何打开调试，按照这里的说明：http: [//blogs.msdn.com/b/phaniraj/archive/2008/06/18/debugging-ado-net-data- services.aspx](http://blogs.msdn.com/b/phaniraj/archive/2008/06/18/debugging-ado-net-data-services.aspx) 现在我看到问题的原因是“EntityState”属性：

服务器在处理请求时遇到错误。异常消息是“游戏”类型上的“实体状态”属性不是有效属性。确保属性的类型是公共类型和受支持的原始类型或具有有效键或复杂类型的实体类型。

对我的代码进行搜索时，我什至找不到“EntityState”属性，这让我认为这是一个内部 .net 属性。那么......是什么原因造成的，我该如何解决它，或者解决它？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:25:08.963

如果没有堆栈跟踪，我猜您使用的类型不是 ObjectContext 类型

# java - 获取 JavaScript 创建的链接的内容

> ID：13721886
> 
> 赞同：3
> 
> 时间：2012-12-05T11:07:22.863
> 
> 标签：java, javascript, jsoup

我正在尝试构建一个非常基本的爬虫，它可以通过某些特定链接移动并从中提取内容。我正在使用 JSoup 遍历页面上的链接并阅读所需的内容。

但是，我在其中一个站点上遇到了障碍。它是一种新闻门户，用户可以在上面发表自己的评论。我需要提取这些评论。但是，如果有超过 5 条评论，它们将分布在多个页面上，并且到后续页面的链接由 href 中的 JavaScript 代码创建（而不是真正的链接）。它是这样的：

```
<a id="pager1_lnkPage2" href="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;pager1$lnkPage2&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, true))">2</a> 
```

现在我不知道如何遍历这个 JavaScript 生成的链接。有什么方法可以获取这些链接引用的页面上的数据（从表面上看，这似乎不会创建任何新链接，因为在我们浏览其他页面时 URL 不会更改）？

供您参考这里是[一个这样的页面的链接](http://discussion.webdunia.com/Hindi/discussionDetails.aspx?ifrm=ifrmDiscusion&cssPath=/includes/wdtpl4.css&article=1&CategoryId=26&TopicId=4384)。浏览多个页面的链接位于页面的右下角。

这嵌入在 iframe 中主要故事的页面上。

我还在 javax 中遇到了一个名为 ScriptEngine 的接口，但我无法很好地理解它，无法在这里使用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:59:03.150

我从未使用过 jsoup，但从它的描述（它是 HTML 解析器）以及您尝试以某种方式将 javascript 合并到其中的事实来看，这告诉我您选择了错误的工具来完成这项工作。

在您的情况下，我宁愿使用[Zombie.js](http://zombie.labnotes.org/)（基于 Node.js）或[Selenium](http://seleniumhq.org/)。如果您想坚持使用 Java，后者可能是更好的选择（Selenium 有基于 Java 的插件）。

# grails - 无法接受关于 Jenkins 为 Grails 构建的 UAA 协议

> ID：13721888
> 
> 赞同：0
> 
> 时间：2012-12-05T11:07:27.113
> 
> 标签：grails, licensing, jenkins, cloudbees

我的 Grails 作业在 Cloudbees 提供的 Jenkins 上失败，因为它们需要接受 UAA 协议。

有没有办法接受协议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T06:22:20.387

Jenkins Grails 插件可以配置为在非交互模式下运行，这应该可以解决这个问题

# c# - 冒泡排序算法的空间复杂度

> ID：13721890
> 
> 赞同：6
> 
> 时间：2012-12-05T11:07:37.327
> 
> 标签：c#, java, c++, algorithm, complexity-theory

我正在尝试研究冒泡排序算法的空间复杂度，我知道冒泡排序算法的空间复杂度为 O(1)内存复杂度为 O(n) 或 O(n square) 等我需要了解空间复杂度在哪里发挥作用......谢谢

```
 public void bubbleSort(int[] arr) {
    boolean swapped = true;
    int j = 0;
    int tmp;

    while (swapped) {

        swapped = false;
        j++;

        for (int i = 0; i < arr.length - j; i++) {
            if (arr[i] > arr[i + 1]) {
                tmp = arr[i];
                arr[i] = arr[i + 1];
                arr[i + 1] = tmp;
                swapped = true;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T11:10:53.450

空间复杂度衡量您的算法需要多少额外内存。

如果您要分配一个大小为 n 的额外数组（当 n 是输入数组的可变大小时），空间复杂度将为`O(n)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T11:09:40.337

如果您想增加空间复杂性，您只需要浪费内存，例如添加一些代码以使用更多内存。

它降低了空间复杂度，这很难。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-05T11:31:48.053

我认为它值得回答，因为它对大 O 表示法有一些输入：

**你的算法已经是`O(n)`和`O(n^2)`空间**

这是因为`O(1)`是 的子集`O(n)`并且两者都是`O(n^2)`

为什么会这样？
请注意，这`O(f(n))`是一组具有“f(n) 的渐近上限”的函数（直观定义，非形式化）。

因此，对于每个`g(n)<h(n)<f(n)`，如果`h(n)`是 的渐近上界`g(n)`，则 f(n) 也是它的渐近上界。

因此，如果`g(n)`在`O(h(n))`- 它也在`O(f(n))`
并且在你的情况下，如果复杂性函数`T(n)`在`O(1)`，它也在`O(n)`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-06T23:55:32.827

您的算法已经是 O(n) 空间，因为您至少需要 n 个内存单元

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-13T14:29:05.400

这里算法的空间复杂度是 O(n)，辅助空间复杂度是 O(1)。

一般来说，我们会比较辅助复杂度。为什么 ？

合并排序需要 O(n) 辅助空间，而插入排序需要 O(1) 辅助空间这两种排序算法的空间复杂度是 O(n)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-26T08:50:21.977

```
Bubble sort(A,n)
  for(i=n;i>=1;i--)
     for(j=1;j<=i-1;j++)
       if(a[j]>a[j+1])
       {
         t <- a[j]
         a[j] <- a[j+1]
         a[j+1] <- t
       } 
```

Here we show input variable and temporary variable for space complexity then i and j are input variable of which space complexity always be constant and temporary variable t always be show 1 so space complexity of bubble sort is o(1).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T11:14:26.483

一般来说，排序算法的空间复杂度为 O(1)。这是一件好事

如果您将输入复制到另一个数组，如何浪费更多内存。时间复杂度是一样的，你只加 O(N)，但是现在，你需要 O(n) 内存，因为你需要为每个位置分配空间。

例如，对于堆排序，您需要构建一个堆。在这种情况下，您需要使用更多内存。

# php - 如何回显自定义文本字段属性而不是产品网址

> ID：13721892
> 
> 赞同：0
> 
> 时间：2012-12-05T11:07:54.350
> 
> 标签：php, html, magento

我正在尝试将自定义文本字段属性回显到 url 链接中。

我有一个带有 URL 键“my-page”的 CMS 页面，因此我为产品创建了一个名为“cmspageid”的文本字段，并将 URL 键“my-page”添加到文本字段中。

这是整个脚本：

```
<div class="new-product-content">
<?php if (($_products = $this->getProductCollection()) && $_products->getSize()): ?>
    <h3 class="subtitle new-products"><?php echo $this->__('HOT PRODUCTS') ?></h3>
    <?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($_products->getItems() as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>

    <ul>
    <?php endif ?>
    <li class="thumb<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>" ><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(175) ?>" width="175" height="175" alt="<?php echo $this->htmlEscape($_product->getName()) ?>" />
            </a>
               <div class="caption">    
                  <h4 class="product-name"> <?php $_productName = $this->helper('core/string')->truncate($this->htmlEscape($_product->getName()),20,'...', $_remainder, true); ?>
                   <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productName ?>">
                    <?php echo $_productName ?><?php echo $this->__('&#8482;'); ?></a></h4>
                     <?php echo $this->getPriceHtml($_product, true, '-new') ?>
                      <div class="clearfix"></div>
                  <div class="desc">                  
                    <?php $sdesc = $_product->getShortDescription();
                    $sdesc = trim($sdesc);
                    $limit = 180;
                    if (strlen($sdesc) > $limit) {
                        $sdesc = substr($sdesc, 0, strrpos(substr($sdesc, 0, $limit), ' '));
                    } ?>
                    <?php echo $sdesc."..."; ?>
                  </div>
                <div class="clearfix"></div> 
<div class="btn-group">
  <button class="btn" type="button" title="<?php echo $this->__('Add to Cart') ?>" onclick="setLocation('<?php echo $this->getProductUrl($_product) ?>')"><?php echo $this->__('Order now...') ?></button>
  <button class="btn-link" type="button" title="<?php echo $this->__('More info') ?>" onclick="setLocation('<?php echo $this->getProductUrl($_product) ?>')"><?php echo $this->__('More info?') ?></button>

      </li>
      <?php if ($i%$_columnCount==0 || $i==count($_products)): ?>
  </ul>
  <div class="clearfix"></div>  
<?php endif ?>
<script type="text/javascript">
$j('.thumb li').last().css('border-right', 'none');
</script>
<script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script>
<?php endforeach; ?>
<?php endif; ?>
<div class="clearfix"></div>
</div> 
```

现在我需要包含 cmspageid 而不是 getProductUrl：

```
 <button class="btn-link" type="button" title="<?php echo $this->__('More info') ?>" onclick="setLocation('<?php echo $this->getUrl('')?><?php echo $_product->getCmspageid() ?>')"><?php echo $this->__('More info?') ?></button> 
```

因此，当单击链接时，会加载正确的 CMS 页面。

如果有人可以帮助我们，我将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:51:38.743

你应该尝试这样的事情：

```
<a href="{{store url=""}}<?php echo $_product->getCmspageid() ?>">Link Here</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:16:36.373

我的问题是以某种方式将属性文本作为 URL foreach 产品的一部分。由于我使用的是 catalog/product_new 我无法回显属性文本，因为 Magento 只允许属性显示在 catalog/product_view 页面上！

我不得不在第 114 行修改 new.php 文件，添加这一行：

->addAttributeToSelect('cmspageid')

然后在我有“更多信息”按钮的 new.phtml 文件中，我回显了来自“cmspageid”的值

> __('更多信息') ?>" onclick="setLocation('getCmspageid(); ?>')">__('更多信息？') ?>

现在，每个产品都有一个“立即订购”按钮和一个“更多信息”按钮。单击“更多信息”时，用户将转到显示该产品的完整详细信息的 CMS 页面...

呸！

# ruby-on-rails - omn iauth-password 给出 invalid_credentials 错误

> ID：13721893
> 
> 赞同：3
> 
> 时间：2012-12-05T11:08:07.350
> 
> 标签：ruby-on-rails, authentication, passwords, omniauth, credentials

我完全按照此处所示设置了omniauth-password： [https ://github.com/namick/omniauth-password](https://github.com/namick/omniauth-password)

但是，每次我尝试登录时都会收到一个 invalid_credentials 错误。现在，我的数据库中没有用户，所以应该创建它们吧？我有点困惑注册适合这个。

问题是我的控制器甚至没有被调用。这是日志。

```
(password) Callback phase initiated.
(password) Authentication failure! invalid_credentials encountered.

Started POST "/auth/password/callback" for 127.0.0.1 at 2012-12-05 02:34:05 -0800
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'asd@asf.comssdf' LIMIT 1

Started GET "/auth/failure?message=invalid_credentials&strategy=password" for 127.0.0.1 at 2012-12-05 02:34:05 -0800
Processing by SessionsController#failure as HTML
  Parameters: {"message"=>"invalid_credentials", "strategy"=>"password"}
  Rendered text template (0.0ms)
Completed 200 OK in 16ms (Views: 15.4ms | ActiveRecord: 0.0ms) 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:16:12.680

没有完全回答您使用omniauth-password 的具体问题，但是，您是否考虑过使用omniauth-identity？它是一种基于数据库的策略，使用用户名（或电子邮件）和密码凭据，并且有一个 Railscast。并且：我成功地使它与其他策略一起使用。

Omniauth 身份：[https ://github.com/intridea/omniauth-identity](https://github.com/intridea/omniauth-identity)

Railscast：[http ://railscasts.com/episodes/304-omniauth-identity](http://railscasts.com/episodes/304-omniauth-identity)

# firefox - CSS3 动画在 Firefox 上工作，但在 Chrome 中不工作

> ID：13721898
> 
> 赞同：1
> 
> 时间：2012-12-05T11:08:33.660
> 
> 标签：firefox, google-chrome, css, animation

我之前在这个网站上找到了很多答案，但是在这个主题上，我只找到了关于使用 -webkit- 的解决方案，我认为我做得很好，或者将非标签动画放在我也做的底部。

我有这些框（还有一些），由 div 制成，可点击且很小，当有人按下“帮助”按钮时，我希望可点击的对象制作动画以显示它们是可点击的。

为了实现这一点，我在我拥有的更大容器（#body 翻译）上设置了一个类（.ayuda），这与 css 的“.ayuda .help”匹配并在 Firefox 上触发动画，但是在 Chrome 上它不起作用任何动画（它什么都不做）

HTML

```
<div id="cuerpo">
    <div id="pegatina">
        <div id="north_vul" class="NS_vul help" onclick="changevul('NS')"></div>
        <div id="west_vul" class="EW_vul help" onclick="changevul('EW')"></div>
        <div id="east_vul" class="EW_vul help" onclick="changevul('EW')"></div>
        <div id="south_vul" class="NS_vul help" onclick="changevul('NS')"></div>
        <div class="estuchenum help2" onclick="eticlick()"><p></p></div>
    </div>
<section id="botones_crear">
        <p class="blue button" onclick=" $('#cuerpo').addClass('ayuda'); setTimeout(function() {$('#cuerpo').removeClass('ayuda');},2000);">HELP</p>        
    </section>
</div> 
```

CSS

```
.NS_vul{
cursor: pointer;
height: 15%;
border: 1px solid rgb(78, 78, 78);
}
.EW_vul{
cursor: pointer;
width: 18%;
border: 1px solid rgb(78, 78, 78);
top: 22%;
bottom: 23%;
}

#north_vul{
position: absolute;
top: 2%;
left: 2%;
right: 2%;
}
#south_vul{
position: absolute;
bottom: 2%;
left: 2%;
right: 2%;
}
#west_vul{
position: absolute;
left: 2%;
}
#east_vul{
position: absolute;
right: 2%;
}
   .ayuda .help{
              z-index:200;
             -webkit-animation: ayuda 1s linear;
             -moz-animation: ayuda 1s linear;
             -ms-animation: ayuda 1s linear;
             -o-animation: ayuda 1s linear;
             animation: ayuda 1s linear;         
     }

     .ayuda .help2{
              z-index:210;
             -webkit-animation: ayuda2 2s linear;
             -moz-animation: ayuda2 2s linear;
             -ms-animation: ayuda2 2s linear;
             -o-animation: ayuda2 2s linear;
             animation: ayuda2 2s linear;         
     }

     @-webkit-keyframes ayuda {
             0% { transform: scale(1.0);}
             25% { transform: scale(1.5) rotate(-30deg)}
             50% { transform: scale(1.5);}
             75%   { transform: scale(1.5) rotate(+30deg)}
             100% { transform: scale(1.0);}
     }
     @-moz-keyframes ayuda {
             0% { transform: scale(1.0);}
             25% { transform: scale(1.5) rotate(-30deg)}
             50% { transform: scale(1.5);}
             75%   { transform: scale(1.5) rotate(+30deg)}
             100% { transform: scale(1.0);}
     }
     @-ms-keyframes ayuda {
             0% { transform: scale(1.0);}
             25% { transform: scale(1.5) rotate(-30deg)}
             50% { transform: scale(1.5);}
             75%   { transform: scale(1.5) rotate(+30deg)}
             100% { transform: scale(1.0);}
     }
     @-o-keyframes ayuda {
             0% { transform: scale(1.0);}
             25% { transform: scale(1.5) rotate(-30deg)}
             50% { transform: scale(1.5);}
             75%   { transform: scale(1.5) rotate(+30deg)}
             100% { transform: scale(1.0);}
     }
     @keyframes ayuda {
             0% { transform: scale(1.0);}
             25% { transform: scale(1.5) rotate(-30deg)}
             50% { transform: scale(1.5);}
             75%   { transform: scale(1.5) rotate(+30deg)}
             100% { transform: scale(1.0);}
     }

     @-webkit-keyframes ayuda2 {
             0% { transform: scale(1.0);}
             10% { transform: scale(1.5) }
             30% { transform: scale(1.5) rotate(-90deg)}
             50% { transform: scale(1.5) rotate(-180deg)}
             70% { transform: scale(1.5) rotate(-270deg)}
             90% { transform: scale(1.5) rotate(-360deg)}
             100% { transform: scale(1.0) rotate(-360deg)}
     }
     @-moz-keyframes ayuda2 {
             0% { transform: scale(1.0);}
             10% { transform: scale(1.5) }
             30% { transform: scale(1.5) rotate(-90deg)}
             50% { transform: scale(1.5) rotate(-180deg)}
             70% { transform: scale(1.5) rotate(-270deg)}
             90% { transform: scale(1.5) rotate(-360deg)}
             100% { transform: scale(1.0) rotate(-360deg)}
     }
     @-ms-keyframes ayuda2 {
             0% { transform: scale(1.0);}
             10% { transform: scale(1.5) }
             30% { transform: scale(1.5) rotate(-90deg)}
             50% { transform: scale(1.5) rotate(-180deg)}
             70% { transform: scale(1.5) rotate(-270deg)}
             90% { transform: scale(1.5) rotate(-360deg)}
             100% { transform: scale(1.0) rotate(-360deg)}
     }
     @-o-keyframes ayuda2 {
             0% { transform: scale(1.0);}
             10% { transform: scale(1.5) }
             30% { transform: scale(1.5) rotate(-90deg)}
             50% { transform: scale(1.5) rotate(-180deg)}
             70% { transform: scale(1.5) rotate(-270deg)}
             90% { transform: scale(1.5) rotate(-360deg)}
             100% { transform: scale(1.0) rotate(-360deg)}
     }
     @keyframes ayuda2 {
             0% { transform: scale(1.0);}
             10% { transform: scale(1.5) }
             30% { transform: scale(1.5) rotate(-90deg)}
             50% { transform: scale(1.5) rotate(-180deg)}
             70% { transform: scale(1.5) rotate(-270deg)}
             90% { transform: scale(1.5) rotate(-360deg)}
             100% { transform: scale(1.0) rotate(-360deg)}
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:22:27.327

将此[语法](https://www.webkit.org/blog/324/css-animation-2/)用于 webkit

```
@-webkit-keyframes pulse {
 0% {
   background-color: red;
   opacity: 1.0;
   -webkit-transform: scale(1.0) rotate(0deg);
 } ... 
```

这就是说“-webkit-transform：”而不仅仅是“转换”

# sql - 如何根据sql中的条件更新多行

> ID：13721899
> 
> 赞同：0
> 
> 时间：2012-12-05T11:08:35.270
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个数据库，假设我有一个名为的表`Score` ，`Score`其中有两个字段

1.  ID
2.  姓名

现在当我看到有很多`-`以例如 开头的名字时

```
-Karl-KSJ
-Jhon-Kate
-Xyz-Abc 
```

现在我想`-`从所有行中删除前导并更新它们，并保留名称不是以开头的所有行`-`。我怎样才能在 sql 中实现这一点。请注意，我有数百万条记录，因此性能将发挥重要作用。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:13:29.630

像这样尝试，它很简单，它可能足够快：

```
BEGIN TRAN

UPDATE  Score 
SET     Name = RIGHT(Name, LEN(Name) - 1)
WHERE   LEFT(Name, 1) = '-'

ROLLBACK 
```

这是一个**[SQL 小提琴](http://sqlfiddle.com/#!3/9e082/2/0)**

# java - mydomain 类错误中没有公共执行（）

> ID：13721905
> 
> 赞同：2
> 
> 时间：2012-12-05T11:08:43.787
> 
> 标签：java, hibernate, ant, reverse-engineering, nant-task

我想`Hibernate Tools`用于逆向工程。

我的数据库是`PostgreSQL`. 问题是关于`hbm.xml`文件的。逆向工程工具创建错误`hbm.xml`的文件。所以，我想使用`custom reverse engineering strategy.`我正在使用`Java.`

`CustomReverseEngineeringStrategy`课程在这里：

```
 public class CustomReverseEngineeringStrategy extends DelegatingReverseEngineeringStrategy{

        public CustomReverseEngineeringStrategy(ReverseEngineeringStrategy delegate) {
            super(delegate);
        }

        public CustomReverseEngineeringStrategy(){
            super(new CustomReverseEngineeringStrategy());
        }

        public Properties getTableIdentifierProperties(TableIdentifier arg0) {
              Properties pr = new Properties();
              pr.put("sequence", "test_id_seq");
              return pr;
        }

        public String getTableIdentifierStrategyName(TableIdentifier arg0) {
              return "sequence";
        }

} 
```

[编辑]

我写了`Ant`taskdef，我有一个错误。

这是我的`build.xml`文件：

```
<?xml version="1.0"?>
<!-- define the project -->

<project name="sample_BookCatalog" default="build" basedir=".">

    <!-- define project properties -->
    <property name="compiler" value="modern" />
    <property name="fork" value="no" />
    <property name="verbose" value="no" />
    <property name="debug" value="on" />
    <property name="optimize" value="on" />
    <property name="deprecation" value="on" />
    <property name="target" value="1.5" />
    <property name="source" value="1.5" />
    <property file="build.properties" />
    <property environment="env" />

    <!-- define properties to refer to directories in the project -->
    <property name="webinf.dir" value="WEB-INF" />
    <property name="webinf.lib.dir" value="WEB-INF/lib" />
    <property name="lib.dir" value="lib" />
    <property name="src.dir" value="src" />
    <property name="test.dir" value="test" />
    <property name="build.dir" value="build" />
    <property name="webinf.classes.dir" value="${webinf.dir}/classes" />
    <property name="webinf.classes.content.dir" value="${webinf.dir}/classes/content" />

    <property name="web.xml" value="${webinf.dir}/web.xml" />

    <fileset id="webapp.libs" dir="${webinf.lib.dir}">
        <include name="*.jar" />
    </fileset>

    <fileset id="libs" dir="${lib.dir}">
        <include name="*.jar" />
    </fileset>

    <path id="class.path">
        <pathelement path="${webinf.classes.dir}" />
        <fileset refid="webapp.libs" />
        <fileset dir = "${webinf.lib.dir}" includes="**/*.jar"/>
        <fileset refid="libs" />
    </path>

    <pathconvert pathsep=":" property="class.path" refid="class.path" />

    <fileset id="war.files" dir=".">
        <include name="${webinf.dir}/**" />
        <exclude name="${webinf.dir}/Language-ext.properties" />
        <include name="images/**" />
        <include name="css/**" />
        <include name="js/**" />
        <exclude name="${web.xml}" />
    </fileset>

    <!-- compile target to compile the sources -->
    <target name="compile">
        <mkdir dir="${webinf.classes.dir}" />
        <!-- Content directory contains Liferay resource bundle-->

        <mkdir dir="${webinf.classes.content.dir}" />
        <javac srcdir="${src.dir}:${test.dir}" destdir="${webinf.classes.dir}" fork="${fork}" verbose="${verbose}" deprecation="${deprecation}" debug="${debug}" optimize="${optimize}" compiler="${compiler}" target="${target}" source="${source}">
            <classpath refid="class.path" />
        </javac>
        <copy todir="${webinf.classes.dir}" preservelastmodified="true">
            <fileset dir="${src.dir}">
                <include name="**/*.properties" />
                <include name="**/*.xml" />
            </fileset>
        </copy>
        <copy todir="${webinf.classes.content.dir}">
            <fileset dir="${webinf.dir}">
                <include name="Language-ext.properties" />
            </fileset>
        </copy>

    </target>

    <!-- <taskdef name="mytask" classname="com.project.strategy.Reverse"/> -->

    <property name="my.classes" value="${webinf.classes.dir}" />
    <taskdef name="mytask" classpath="${my.classes}" classname="com.project.strategy.Reverse"/>

    <!-- target to create the project WAR file -->
    <target name="build" depends="clean,compile">
        <mkdir dir="${build.dir}" />
        <war destfile="${build.dir}/sample_BookCatalog.war" webxml="${web.xml}">
            <fileset refid="war.files" />
        </war>
        <copy todir="${liferay.portal.home}/deploy">
            <fileset dir="${build.dir}">
                <include name="**/*.war" />
            </fileset>
        </copy>
    </target>

    <!-- target to clean up all files created by various tasks -->
    <target name="clean">
        <delete quiet="true" includeemptydirs="true">
            <fileset dir="${webinf.classes.dir}" includes="**/*" />
            <fileset dir="${build.dir}" />
            <fileset dir="${work.dir}" />
        </delete>
    </target>
</project> 
```

这是错误：

```
No public execute() in class com.project.strategy.Reverse 
```

问候

# android - 网站在 android 4.0 上不显示

> ID：13721915
> 
> 赞同：1
> 
> 时间：2012-12-05T11:09:02.820
> 
> 标签：android, html, android-4.2-jelly-bean

我一直在为我正在开发的这个音乐博客启动一个定制设计，但我在使用 Android 4.0 浏览器时遇到了一些问题。

它在 Android 2.x（以及我尝试过的所有其他浏览器）上运行良好，但是当我尝试在运行 4.1 或更高版本的设备（浏览器堆栈模拟器）上加载它时，页面加载并且所有文本、图形等都消失了。唯一出现的是 SoundCloud 嵌入。

关于这里可能出现什么问题的任何想法？浏览器从 4.0 到 4.1 发生了什么变化，导致我的网站在新设备上无用？

[http://chune.me/](http://chune.me/)

谢谢！

**更新**

将问题归结为我的 CSS 重置......如果有人知道是什么导致它在这里，我很想知道。我刚决定用一个新的……奇怪。

```
/**
 * reset.css
 *
 * Adapted from:
 * Normalize.css by Nicolas Gallagher and Jonathan Neal: https://github.com/necolas/normalize.css/
 * HTML5 boilerplate: http://html5boilerplate.com/
 * HTML5 Doctor Reset by Eric Meyer and Richard Clark: html5doctor.com/html-5-reset-stylesheet/
 *
 * Modified by Elliot Jay Stocks
 */

html, 
body, 
div, 
span, 
object, 
iframe, 
h1, 
h2, 
h3, 
h4, 
h5, 
h6, 
p, 
blockquote, 
pre, 
abbr, 
address, 
cite, 
code, 
del, 
dfn, 
em, 
img, 
ins, 
kbd, 
q, 
samp, 
small, 
strong, 
sub, 
sup, 
var, 
b, 
i, 
dl, 
dt, 
dd, 
ol, 
ul, 
li, 
fieldset, 
form, 
label, 
legend, 
table, 
caption, 
tbody, 
tfoot, 
thead, 
tr, 
th, 
td, 
article, 
aside, 
canvas, 
details, 
figcaption, 
figure, 
footer, 
header, 
hgroup, 
menu, 
nav, 
section, 
summary, 
time, 
mark, 
audio, 
video                                                   { margin:0; padding:0; border:0; outline:0; font-size:100%; vertical-align:baseline; background:transparent; }        

article, 
aside, 
details, 
figcaption, 
figure, 
footer, 
header, 
hgroup, 
nav, 
section                                                 { display: block; }

audio, 
canvas, 
video                                                   { display: inline-block; *display: inline; *zoom: 1; }

audio:not([controls])                                   { display: none; }

[hidden]                                                { display: none; }

html                                                    { font-size: 100%; overflow-y: scroll; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }

body                                                    { margin: 0; }

h1, h2, h3, h4, h5, h6 { font-weight:normal; }          

a                                                       { color:blue; }

a:focus                                                 { outline: thin dotted; }

li                                                      { list-style:none; }

abbr[title]                                             { border-bottom:none; }

b, 
strong                                                  { font-weight: 700; }

i,
em,
dfn                                                     { font-style: italic; }

hr                                                      { display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0; }

ins                                                     { background: #ff9; color: #000; text-decoration: none; }

mark                                                    { background: #ff0; color: #000; font-style: italic; font-weight: bold; }

pre, 
code, 
kbd, 
samp                                                    { font-family: monospace, monospace; _font-family: 'courier new', monospace; }

pre                                                     { white-space: pre; white-space: pre-wrap; word-wrap: break-word; }

q                                                       { quotes: none; }

q:before, 
q:after                                                 { content: ""; content: none; }

small                                                   { font-size: 85%; }

sub, 
sup                                                     { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup                                                     { top: -0.5em; }

sub                                                     { bottom: -0.25em; }

img                                                     { border: 0; -ms-interpolation-mode: bicubic; vertical-align: middle; }

label                                                   { cursor: pointer; }

input, 
select, 
textarea                                                { font-size: 100%; margin: 0; vertical-align: baseline; *vertical-align: middle; }

button, 
input                                                   { line-height: normal; *overflow: visible; }

button, 
input[type="button"], 
input[type="reset"], 
input[type="submit"]                                    { cursor: pointer; -webkit-appearance: button; }

input[type="checkbox"], 
input[type="radio"]                                     { box-sizing: border-box; }

input[type="search"]                                    { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-decoration         { -webkit-appearance: none; }

button::-moz-focus-inner, 
input::-moz-focus-inner                                 { border: 0; padding: 0; }

textarea                                                { overflow: auto; vertical-align: top; resize: vertical; }

table                                                   { border-collapse: collapse; border-spacing: 0; }

td                                                      { vertical-align: top; } 
```

# android - Asynctask 导致异常“无法在未调用 Looper.prepare() 的线程内创建处理程序”

> ID：13721920
> 
> 赞同：0
> 
> 时间：2012-12-05T11:09:21.633
> 
> 标签：android, android-asynctask, handler

我正在开发一个 android 应用程序。在我的活动中，我使用以下代码。

```
LocationResult locationResult = new LocationResult(){

        @Override
        public void gotLocation(Location location){
            //Got the location!

            Drawable marker = getResources().getDrawable(
                    R.drawable.currentlocationmarker);//android.R.drawable.btn_star_big_on
            int markerWidth = marker.getIntrinsicWidth();
            int markerHeight = marker.getIntrinsicHeight();
            marker.setBounds(0, markerHeight, markerWidth, 0);
            MyItemizedOverlay myItemizedOverlay = new MyItemizedOverlay(marker);
            currentmarkerPoint = new GeoPoint((int) (location.getLatitude() * 1E6),
                    (int) (location.getLongitude() * 1E6));

            currLocation = location;

            mBlippcoordinate = currentmarkerPoint;
            mBlippLocation = location;
            myItemizedOverlay.addItem(currentmarkerPoint, "", "");

            mBlippmapview.getOverlays().add(myItemizedOverlay);
            animateToCurrentLocation(currentmarkerPoint);

        }
    };

    MyLocation myLocation = new MyLocation();
    myLocation.getLocation(this, locationResult); 
```

我正在使用上面的代码从 gps 或网络中查找位置。该`animateToCurrentLocation(currentmarkerPoint);`方法包含一个异步任务。所以我得到

```
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:18:02.103

当您尝试从没有附加 Looper 的线程创建和运行 AsyncTask 时，您会收到此错误。AsyncTasks 需要一个 Looper 来将其“任务完成”消息发布回启动 AsyncTask 的线程。

现在你真正的问题是：如何使用 Looper 获取线程？事实证明你已经有了一个：主线程。正如文档还指出的那样，您应该从主线程创建并 .execute() 您的 AsyncTask。然后 doInBackground() 将在工作线程（来自 AsyncTask 线程池）上运行，您可以在那里访问网络。在通过主线程的 Handler/Looper 将 onPostExecute() 发布到主线程之后，它将在主线程上运行。

# c# - 在c#中从一种形式的文本框中获取文本到另一种形式

> ID：13721921
> 
> 赞同：0
> 
> 时间：2012-12-05T11:09:21.373
> 
> 标签：c#, winforms

我在 TextBox 中输入了一些数据，并在 form2 的组合框中选择了项目，并且想在 form1 中使用相同的数据，我该怎么做......
我试过这个代码 `frmConfig`是 form2，`txtSrcIP`是 TextBox

```
public partial class Form1 : Form
{    
    frmConfig f2 = new frmConfig();

    public Form1(frmConfig Cont)
    {
            f2 = Cont;
    }

    String SIp = f2.txtSrcIP.text;
} 
```

此行中显示错误，`String SIp = f2.txtSrcIP.text;` 因为字段初始值设定项无法引用非静态字段方法或属性

frmConfig 正文 public 部分类 frmConfig : Form { private Form1 f1;

```
 public frmConfig()
    {
        InitializeComponent();
    }
    private void btnConnect_Click(object sender, EventArgs e)
    {

            // Open connection to the database
            string conString = "server="+txtSrcIP.Text+";uid="+txtSrcUserId.Text+";pwd="+txtSrcPwd.Text; 

            using (SqlConnection con = new SqlConnection(conString))
            {
                con.Open();

                // Set up a command with the given query and associate
                // this with the current connection.
                using (SqlCommand cmd = new SqlCommand("SELECT name from sys.databases", con))
                {
                    using (IDataReader dr = cmd.ExecuteReader())
                    {
                        while (dr.Read())
                        {
                            cbSrc.Items.Add(dr[0].ToString());
                        }
                    }
                }
            }

    private void btnNext_Click(object sender, EventArgs e)
    {
        if (cbSrc.SelectedItem != null && cbSrc.SelectedItem != "" && cbDest.SelectedItem != null && cbDest.SelectedItem != "")
        {

            this.Hide();
            //Form1 f1 = new Form1();
            f1.Show();

            this.Close();
        }
        else
        {
            MessageBox.Show("Enter all the details");
        }
    }

    } 
```

这就是我正在做的，所以我想要 form1 中的所有文本框和组合框值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:14:49.593

在其上创建一个公共属性，`f2`以公开`Text`您需要的控件的属性。

```
public string TxtSrcIPValue
{
    get
    {
        return this.txtSrcIP.text
    }
} 
```

然后使用此属性访问该值。

```
Private string SIp;
public Form1(frmConfig Cont)
{
        f2 = Cont;
        SIp = f2.TxtSrcIPValue;   // Set the value once the form has been loaded
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:15:21.240

```
static frmConfig f2 = new frmConfig(); 
```

那么，这些变化如何：

```
public partial class Form1 : Form
{    
    static frmConfig f2 = new frmConfig();

    public Form1(frmConfig Cont)
    {
        f2 = Cont;
    }

    public String SIp;
}

...

private void btnNext_Click(object sender, EventArgs e)
{
    if (cbSrc.SelectedItem != null && cbSrc.SelectedItem != "" && cbDest.SelectedItem != null && cbDest.SelectedItem != "")
    {

        this.Hide();
        //Form1 f1 = new Form1();
        f1.SIp = f2.txtSrcIP.text;
        f1.Show();

        this.Close();
    }
    else
    {
        MessageBox.Show("Enter all the details");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:16:25.193

您要使用的控件，更改“修饰符”属性，以便您可以从外部访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:33:01.480

引用[MSDN](http://msdn.microsoft.com/en-us/library/aa645759.aspx)，实例字段的变量初始化程序无法引用正在创建的实例，因此您需要在构造函数中初始化字段。

```
public partial class Form1 : Form
{    
    frmConfig f2;
    String SIp;

    public Form1(frmConfig Cont)
    {
        f2 = Cont;
        String SIp = f2.txtSrcIP.text;
    }
} 
```

# wpf - Graph# Visual Studio 扩展 Xaml 异常

> ID：13721923
> 
> 赞同：2
> 
> 时间：2012-12-05T11:09:28.840
> 
> 标签：wpf, xaml, visual-studio-2012, visual-studio-extensions

我为 Visual Studio 2012 制作了工具窗口扩展。在扩展中，我尝试显示一些简单的图形。我收到奇怪的错误：XamlParserException。该方法或操作未实现。这是我的 Xaml：

```
<UserControl
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          xmlns:graphsharp="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
        xmlns:local="clr-namespace:Microsoft.NewGraph" x:Class="Microsoft.NewGraph.MyControl"
        x:Name="root">
<Grid>
    <graphsharp:GraphLayout x:Name="graphLayout" Graph="{Binding ElementName=root,Path=GraphToVisualize}" />
</Grid> 
```

这是代码：

```
public partial class MyControl : UserControl
{
    private IBidirectionalGraph<object, IEdge<object>> _graphToVisualize;

    public IBidirectionalGraph<object, IEdge<object>> GraphToVisualize
    {
        get { return _graphToVisualize; }
    }

    public MyControl()
    {
        InitializeComponent();
    } 
```

如果我对 WPF 应用程序使用相同的代码，一切正常。什么对 VS 扩展不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:12:14.067

很难回答您的问题，因为您没有提供堆栈跟踪信息。但首先您应该检查所有依赖项是否已添加到 vsix 包中（意味着没有缺少任何程序集）。

这些天我遇到了关于 WPF 控件库的问题，将以下属性添加到包类中进行了修复...

```
[ProvideBindingPath]
class MyPackage : Package ... 
```

我想，这将解决您的问题（-：

# android - android计算恒定日期和现在之间的差异

> ID：13721927
> 
> 赞同：1
> 
> 时间：2012-12-05T11:09:44.337
> 
> 标签：android, date

计算 01.01.2013 和现在之间差异的最佳方法是什么，所以结果看起来像 25 天 16 小时 18 分 43 秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:15:05.297

```
String dateStop = "01.01.2013";
long now = System.currentTimeMillis():

SimpleDateFormat format = new SimpleDateFormat("dd.MM.yyyy");  

Date d1 = null;
Date d2 = null;
try {
     d1 = new Date (now);
     d2 = format.parse(dateStop);
} catch (ParseException e) {
     e.printStackTrace();
}   

long difference = d2.getTime() - d1.getTime();
long differenceBack = difference;
differenceBack = difference / 1000;
int secs = differenceBack % 60;
differenceBack /= 60;
int mins = differenceBack % 60;
differenceBack /= 60;
int hours = differenceBack % 24; 
```

差异以毫秒为单位。然后你可以简单地做一些数学来计算天/小时/分钟/秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:16:22.743

由于您没有提供任何代码，因此我不会只为您执行此操作，但是出于某种原因（首先是时区），所说的时间可能是一个有趣的话题。

我建议这个很棒的图书馆[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

> Joda-Time 为 Java 日期和时间类提供了质量替代品。该设计允许多个日历系统，同时仍提供简单的 API。“默认”日历是 XML 使用的 ISO8601 标准。格里高利、儒略、佛教、科普特、埃塞俄比亚和伊斯兰系统也包括在内，我们欢迎进一步添加。支持类包括时区、持续时间、格式和解析。

看看使用[句号](http://joda-time.sourceforge.net/key_period.html)和类似的东西

```
DateTime start = new DateTime(2004, 12, 25, 0, 0, 0, 0);
DateTime end = new DateTime(2006, 1, 1, 0, 0, 0, 0);

// period of 1 year and 7 days
Period period = new Period(start, end); 
```

我使用了类似的东西来创建倒计时时钟，但是您在问题中未能说明您希望返回值的格式（天、秒、分钟）。但是，期间在这方面非常灵活。例如：

```
// able to calculate whole days between two dates easily
Days days = Days.daysBetween(start, end);

// able to calculate whole months between two dates easily
Months months = Months.monthsBetween(start, end); 
```

# java - 如何使用 Angular JS 从多选复选框中获取值

> ID：13721928
> 
> 赞同：-2
> 
> 时间：2012-12-05T11:09:44.240
> 
> 标签：java, list, checkbox, angularjs, multi-select

我想为多文件下载目的创建复选框。有许多文件的列表，每个文件都有自己的复选框。我想选择其中的 4 个并仅按一次下载按钮，然后检查的所有文件的名称将作为列表发送到控制器（Angular JS）。但我不知道如何启动它以及如何将参数列表发送回 Angular JS 控制器。我想要做的是将列表发送回控制器并调用用 JAVA 编写的多重下载方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T14:25:35.600

You can just use ng-model to assign the property to put the value in. It will automatically put it in an array. [Here is a fiddle](http://jsfiddle.net/blesh/yHd6f/)

And here's the code:

```
 <select multiple="multiple" ng-model="value"
    ng-options="option for option in ['bananas', 'rice', 'applesauce', 'toast']"></select>
  <hr/>
  value: {{value}} 
```

# android - 将 ActionBarSherlock 与新的 SupportMapFragment 一起使用

> ID：13721929
> 
> 赞同：27
> 
> 时间：2012-12-05T11:09:54.333
> 
> 标签：android, android-actionbar, actionbarsherlock, actionbarsherlock-map

我正在考虑使用 ActionbarSherlock，但有一个让我望而却步的查询。

所以我的应用程序需要完全向后兼容 API Level 7。

我需要在我的应用程序中实现新的 Google 地图，为此我需要使用 SupportMapFragment 类。

** 我的问题 **

是否可以同时使用该`SupportMapFragment`课程`ActionBarSherlock`？

**提前致谢**

**编辑**

我已经下载并查看了库。我可以看到的对扩展的唯一更改`Fragments`非常简单，并且对所有更改都相同。

你认为我可以自己添加支持吗？

以下是它们的支持方式。

```
package com.actionbarsherlock.app;

import android.app.Activity;
import android.support.v4.app.DialogFragment;
import com.actionbarsherlock.internal.view.menu.MenuItemWrapper;
import com.actionbarsherlock.internal.view.menu.MenuWrapper;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

import static com.actionbarsherlock.app.SherlockFragmentActivity.OnCreateOptionsMenuListener;
import static com.actionbarsherlock.app.SherlockFragmentActivity.OnOptionsItemSelectedListener;
import static com.actionbarsherlock.app.SherlockFragmentActivity.OnPrepareOptionsMenuListener;

public class SherlockDialogFragment extends DialogFragment implements OnCreateOptionsMenuListener, OnPrepareOptionsMenuListener, OnOptionsItemSelectedListener {
    private SherlockFragmentActivity mActivity;

public SherlockFragmentActivity getSherlockActivity() {
    return mActivity;
}

@Override
public void onAttach(Activity activity) {
    if (!(activity instanceof SherlockFragmentActivity)) {
        throw new IllegalStateException(getClass().getSimpleName() + " must be attached to a SherlockFragmentActivity.");
    }
    mActivity = (SherlockFragmentActivity)activity;

    super.onAttach(activity);
}

@Override
public void onDetach() {
    mActivity = null;
    super.onDetach();
}

@Override
public final void onCreateOptionsMenu(android.view.Menu menu, android.view.MenuInflater inflater) {
    onCreateOptionsMenu(new MenuWrapper(menu), mActivity.getSupportMenuInflater());
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    //Nothing to see here.
}

@Override
public final void onPrepareOptionsMenu(android.view.Menu menu) {
    onPrepareOptionsMenu(new MenuWrapper(menu));
}

@Override
public void onPrepareOptionsMenu(Menu menu) {
    //Nothing to see here.
}

@Override
public final boolean onOptionsItemSelected(android.view.MenuItem item) {
    return onOptionsItemSelected(new MenuItemWrapper(item));
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    //Nothing to see here.
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-05T16:13:52.580

这一切都像魅力一样，主要归功于 Jake 在 ActionBarSherlock 上的出色工作

以下是我遵循的步骤：

1.  在您的 actiobarsherlock 库项目中创建一个 SherlockMapFragment 类。我只是制作了 SherlockFragment 的副本，因为我还需要支持`setHasOptionsMenu(true)`
2.  该活动扩展了 SherlockFragmentActivity（像往常一样）
3.  该片段扩展了新创建的 SherlockMapFragment
4.  ActionBarSherlock 需要新`google-play-services_lib`库
5.  您的项目需要 ActionBarSherlock 库。无需再次包含 google-play-services，也无需针对 Google API 构建。
6.  正如 Graham 提到的，您必须放弃对 API 7 设备的支持：`<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />`

这里有一些更详细的解释代码：

**夏洛克地图片段**

```
package com.actionbarsherlock.app;

import com.actionbarsherlock.internal.view.menu.MenuItemWrapper;
import com.actionbarsherlock.internal.view.menu.MenuWrapper;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;
import com.google.android.gms.maps.SupportMapFragment;

import android.app.Activity;
import android.support.v4.app.Watson.OnCreateOptionsMenuListener;
import android.support.v4.app.Watson.OnOptionsItemSelectedListener;
import android.support.v4.app.Watson.OnPrepareOptionsMenuListener;

public class SherlockMapFragment extends SupportMapFragment
        implements OnCreateOptionsMenuListener,
        OnPrepareOptionsMenuListener,
        OnOptionsItemSelectedListener {
    private SherlockFragmentActivity mActivity;

    public SherlockFragmentActivity getSherlockActivity() {
        return mActivity;
    }

    @Override
    public void onAttach(Activity activity) {
        if (!(activity instanceof SherlockFragmentActivity)) {
            throw new IllegalStateException(getClass().getSimpleName()
                    + " must be attached to a SherlockFragmentActivity.");
        }
        mActivity = (SherlockFragmentActivity) activity;

        super.onAttach(activity);
    }

    @Override
    public void onDetach() {
        mActivity = null;
        super.onDetach();
    }

    @Override
    public final void onCreateOptionsMenu(android.view.Menu menu, android.view.MenuInflater inflater) {
        onCreateOptionsMenu(new MenuWrapper(menu), mActivity.getSupportMenuInflater());
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        // Nothing to see here.
    }

    @Override
    public final void onPrepareOptionsMenu(android.view.Menu menu) {
        onPrepareOptionsMenu(new MenuWrapper(menu));
    }

    @Override
    public void onPrepareOptionsMenu(Menu menu) {
        // Nothing to see here.
    }

    @Override
    public final boolean onOptionsItemSelected(android.view.MenuItem item) {
        return onOptionsItemSelected(new MenuItemWrapper(item));
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Nothing to see here.
        return false;
    }
} 
```

**活动：**

```
public class MainActivity extends SherlockFragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

**活动 XML 布局：**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/fragment_map"
        android:name=".ui.fragments.MapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:tag="tag_fragment_map" />

    <fragment
        android:id="@+id/fragment_help"
        android:name=".ui.fragments.HelpFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:tag="tag_fragment_help" />
</FrameLayout> 
```

**地图片段：**

```
public class MapFragment extends SherlockMapFragment {
    private GoogleMap mMap;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = super.onCreateView(inflater, container, savedInstanceState);
        mMap = getMap();
        return root;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T11:47:47.140

我*听说*Jake 不会对 ABS 做太多事情，因为 Google 可能会推出他们自己的向后兼容的 ActionBar。我想如果我没记错的话，它是在一个与 Android 相关的 Google+ 环聊中讨论的。

新地图需要 API 8 级以上，所以在担心操作栏之前，如果您必须支持 API 7 级，您将遇到问题。

我的建议是生成 2 个布局文件，一个用于 7 级，一个用于 8+。在级别 7 中使用现在旧的[MapView](https://developers.google.com/maps/documentation/android/v1/hello-mapview)，尽管他们正在弃用它，这对我来说表明 API 级别 7 不一定值得考虑作为目标。在 8+ 布局中使用新的地图系统。

至于操作栏，我们现在正在移植一个应用程序，并且通过以编程方式（而不是在 XML 中）创建 Fragment，轻松成功地将地图添加到[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。我们已经在多种设备上对其进行了测试。

我们在使用带有 ABS 的 Google 演示中描述的新地图系统时也没有遇到任何问题。我们在 XML 布局中声明了片段并将其设置为活动的内容。ActionBar 正常显示。该活动是一个 SherlockFragmentActivity。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T11:19:44.510

基本上我可以肯定的是，这个 SupportMapFragment 是完全新鲜的，也许 ActionBarSherlock 的维护者还没有时间将它添加到 ABS 项目中。

它还需要 API Lvl 8+，因此您可以删除对 API lvl 7 设备的支持，否则您将不得不等待 Jake 添加对新 SupportMapFragment 的支持。

对于其他 API lvls，您可以在此处找到解决方法：http: [//xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/](http://xrigau.wordpress.com/2012/03/22/howto-actionbarsherlock-mapfragment-listfragment/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T12:09:49.907

我尝试使用 ActionBarSherlock 实现 SupportMapFragment。

它工作得很好。

![在此处输入图像描述](../Images/e71acdd1051414284dd1a77eaa7fb3ea.png)

下面是代码片段。

```
package com.example.newmapview;

import android.os.Bundle;
import android.widget.Toast;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.view.SubMenu;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends SherlockFragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        SupportMapFragment fragment = SupportMapFragment.newInstance();
        getSupportFragmentManager().beginTransaction()
                .add(R.id.mapLayout, fragment).commit();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        SubMenu subMenu = menu.addSubMenu("Type");

        subMenu.add("Normal");
        subMenu.add("SATELLITE");

        subMenu.getItem().setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        if (item.getTitle().toString().equalsIgnoreCase("Normal")) {
            Toast.makeText(this, "Clicked Normal", Toast.LENGTH_LONG).show();
            GoogleMap googleMap = ((SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.mapLayout)).getMap();

            if (googleMap != null)
                googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
            else
                Toast.makeText(this, "GoogleMap is null", Toast.LENGTH_LONG)
                        .show();
        } else if (item.getTitle().toString().equalsIgnoreCase("SATELLITE")) {
            Toast.makeText(this, "Clicked SATELLITE", Toast.LENGTH_LONG).show();
            GoogleMap googleMap = ((SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.mapLayout)).getMap();

            if (googleMap != null)
                googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
            else
                Toast.makeText(this, "GoogleMap is null", Toast.LENGTH_LONG)
                        .show();
        }

        return true;

    }
} 
```

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-23T07:20:31.393

我还不能到处发表评论，这就是为什么我回答@sureshcheemalamudi 如果你想在 Fragment 或 SherlockFragment 上实现它，看看这个：[https ://stackoverflow.com/a/17803561/1755300](https://stackoverflow.com/a/17803561/1755300)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-12T12:15:51.930

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // toggle mapType
    if (mapFragment != null) {
        googleMap = mapFragment.getMap();
    }
    switch (item.getItemId()) {
    case R.id.action_normal:
        googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        Toast.makeText(getActivity(), "normal", Toast.LENGTH_LONG).show();
        return true;
    case R.id.action_satellite:
        googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
        Toast.makeText(getActivity(), "satellite", Toast.LENGTH_LONG)
                .show();
        return true;
    case R.id.action_terrian:
        googleMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);
        Toast.makeText(getActivity(), "terian", Toast.LENGTH_LONG).show();
        return true;
    case R.id.action_hybrid:
        googleMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
        Toast.makeText(getActivity(), "hybrid", Toast.LENGTH_LONG).show();
        return true;
    default:

        return super.onOptionsItemSelected(item);
    }
} 
```

# hdfs - Flume-ng 拖尾文件

> ID：13721930
> 
> 赞同：1
> 
> 时间：2012-12-05T11:09:55.347
> 
> 标签：hdfs, tail, flume

我正在尝试了解如何使用 flume-ng 跟踪文件，以便可以将数据推送到 HDFS。在第一个实例中，我设置了一个简单的 conf 文件：

```
tail1.sources = source1
tail1.sinks = sink1
tail1.channels = channel1

tail1.sources.source1.type = exec
tail1.sources.source1.command = tail -F /var/log/apache2/access.log
tail1.sources.source1.channels = channel1

tail1.sinks.sink1.type = logger

tail1.channels.channel1.type = memory
tail1.channels.channel1.capacity = 1000
tail1.channels.channel1.transactionCapacity = 100

tail1.sources.source1.channels = channel1
tail1.sinks.sink1.channel = channel1 
```

这是一个测试，我的期望是我会在控制台上看到输出。我使用以下命令运行它：

```
flume-ng agent --conf-file tail1.conf -n tail1 -Dflume.root.logger=DEBUG,INFO,console 
```

我得到以下输出：

> 验证后水槽配置包含代理配置：[tail1] 12/12/05 11:01:07 INFO properties.PropertiesFileConfigurationProvider：创建通道 12/12/05 11:01:08 INFO instrumentation.MonitoredCounterGroup：监控类型的计数器组：CHANNEL，名称：channel1，注册成功。12/12/05 11:01:08 INFO properties.PropertiesFileConfigurationProvider：创建通道 channel1 12/12/05 11:01:08 INFO sink.DefaultSinkFactory：创建接收器实例：sink1，类型：记录器 12/12/05 11： 01:08 INFO nodemanager.DefaultLogicalNodeManager：开始新配置：{ sourceRunners:{source1=EventDrivenSourceRunner: { source:org.apache.flume.source.ExecSource@1839aa9 }} sinkRunners:{sink1=SinkRunner: { policy:org.apache. flume.sink.DefaultSinkProcessor@11f0c98 counterGroup:{ name:null 计数器：

然而，没有进一步的事情发生。

我有另一个会话，其中有以下命令：

```
tail -F /var/log/apache2/access.log 
```

我可以在哪里看到正在写入的文件：

```
192.168.1.81 - - [05/Dec/2012:10:58:07 +0000] "GET / HTTP/1.1" 200 483 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11"
192.168.1.81 - - [05/Dec/2012:10:58:07 +0000] "GET /favicon.ico HTTP/1.1" 404 502 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11"
192.168.1.81 - - [05/Dec/2012:10:58:21 +0000] "GET / HTTP/1.1" 304 209 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11"
192.168.1.81 - - [05/Dec/2012:10:58:22 +0000] "GET /favicon.ico HTTP/1.1" 404 502 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11" 
```

你能帮我吗？我彻底糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:16:23.473

您的配置文件看起来不错。我在 CDH4 中使用它并按照您的预期工作，我所做的只是更改尾部的日志文件位置。我在控制台上看到了输出。在我的情况下，新的日志数据被连续写入我正在跟踪的文件中。您的数据中的时间戳使您的示例看起来可能并非如此。

这是一个更完整的 conf 示例，更符合我认为您正在尝试做的事情。它会拖尾文件并每 10 分钟或 10K 记录写入一个新的 HDFS 文件。**将agent1.sources.source1.command**更改为您的 tail 命令，并根据您的 HDFS 配置更改**agent1.sinks.sink1.hdfs.path**和**agent1.sinks.sink1.hdfs.filePrefix 。**

```
# A single-node Flume configuration
# uses exec and tail and will write a file every 10K records or every 10 min
# Name the components on this agent
agent1.sources = source1
agent1.sinks = sink1
agent1.channels = channel1

# Describe/configure source1
agent1.sources.source1.type = exec
agent1.sources.source1.command = tail -f /home/cloudera/LogCreator/fortune_log.log

# Describe sink1
agent1.sinks.sink1.type = hdfs
agent1.sinks.sink1.hdfs.path = hdfs://localhost/flume/logtest/
agent1.sinks.sink1.hdfs.filePrefix = LogCreateTest
# Number of seconds to wait before rolling current file (0 = never roll based on time interval)
agent1.sinks.sink1.hdfs.rollInterval = 600
# File size to trigger roll, in bytes (0: never roll based on file size) 
agent1.sinks.sink1.hdfs.rollSize = 0
#Number of events written to file before it rolled (0 = never roll based on number of events) 
agent1.sinks.sink1.hdfs.rollCount = 10000
# number of events written to file before it flushed to HDFS 
agent1.sinks.sink1.hdfs.batchSize = 10000 
agent1.sinks.sink1.hdfs.txnEventMax = 40000
# -- Compression codec. one of following : gzip, bzip2, lzo, snappy
# hdfs.codeC = gzip
#format: currently SequenceFile, DataStream or CompressedStream
#(1)DataStream will not compress output file and please don't set codeC
#(2)CompressedStream requires set hdfs.codeC with an available codeC
agent1.sinks.sink1.hdfs.fileType = DataStream 
agent1.sinks.sink1.hdfs.maxOpenFiles=50
# -- "Text" or "Writable"
#hdfs.writeFormat
agent1.sinks.sink1.hdfs.appendTimeout = 10000
agent1.sinks.sink1.hdfs.callTimeout = 10000
# Number of threads per HDFS sink for HDFS IO ops (open, write, etc.)
agent1.sinks.sink1.hdfs.threadsPoolSize=100 
# Number of threads per HDFS sink for scheduling timed file rolling
agent1.sinks.sink1.hdfs.rollTimerPoolSize = 1 
# hdfs.kerberosPrin--cipal Kerberos user principal for accessing secure HDFS
# hdfs.kerberosKey--tab Kerberos keytab for accessing secure HDFS
# hdfs.round false Should the timestamp be rounded down (if true, affects all time based escape sequences except %t)
# hdfs.roundValue1 Rounded down to the highest multiple of this (in the unit configured using
# hdfs.roundUnit), less than current time.
# hdfs.roundUnit second The unit of the round down value - second, minute or hour.
# serializer TEXT Other possible options include AVRO_EVENT or the fully-qualified class name of an implementation of the EventSerializer.Builder interface.
# serializer.*

# Use a channel which buffers events to a file
# -- The component type name, needs to be FILE.
agent1.channels.channel1.type = FILE 
# checkpointDir ~/.flume/file-channel/checkpoint The directory where checkpoint file will be stored
# dataDirs ~/.flume/file-channel/data The directory where log files will be stored
# The maximum size of transaction supported by the channel
agent1.channels.channel1.transactionCapacity = 1000000 
# Amount of time (in millis) between checkpoints
agent1.channels.channel1.checkpointInterval 30000
# Max size (in bytes) of a single log file 
agent1.channels.channel1.maxFileSize = 2146435071
# Maximum capacity of the channel 
agent1.channels.channel1.capacity 10000000 
#keep-alive 3 Amount of time (in sec) to wait for a put operation
#write-timeout 3 Amount of time (in sec) to wait for a write operation

# Bind the source and sink to the channel
agent1.sources.source1.channels = channel1
agent1.sinks.sink1.channel = channel1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T02:26:39.897

因为 /var/log/apache2/access.log 不够大，无法让flume打印文件的行所以只需尝试以下操作，您可以在控制台中找到输出

```
for i in {1..100}; do echo "tail log test$i" >> var/log/apache2/access.log;done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:46:58.470

两个可能的原因：首先，一旦您发出命令并且源启动，接收器必须自己注册并启动。我在您显示的日志中找不到这两行。我希望你没有错过它。通常它应该看起来像这样：

```
apache@hadoop:/hadoop/projects/apache-flume-1.4.0-SNAPSHOT-bin$ bin/flume-ng agent -n agent1 -c /conf -f conf/agent1.conf
Info: Including Hadoop libraries found via (/hadoop/projects/hadoop-1.0.4/bin/hadoop) for HDFS access
Warning: $HADOOP_HOME is deprecated.

Warning: $HADOOP_HOME is deprecated.

Info: Excluding /hadoop/projects/hadoop-1.0.4/libexec/../lib/slf4j-api-1.4.3.jar from classpath
Info: Excluding /hadoop/projects/hadoop-1.0.4/libexec/../lib/slf4j-log4j12-1.4.3.jar from classpath
+ exec /usr/lib/jvm/java-7-oracle/bin/java -Xmx20m -cp '/conf:/hadoop/projects/apache-flume-1.4.0-SNAPSHOT-bin/lib/*:/hadoop/projects/hadoop-1.0.4/libexec/../conf:/usr/lib/jvm/java-7-oracle/lib/tools.jar:/hadoop/projects/hadoop-1.0.4/libexec/..:/hadoop/projects/hadoop-1.0.4/libexec/../hadoop-core-1.0.4.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/asm-3.2.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/aspectjrt-1.6.5.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/aspectjtools-1.6.5.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-beanutils-1.7.0.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-beanutils-core-1.8.0.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-cli-1.2.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-codec-1.4.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-collections-3.2.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-configuration-1.6.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-daemon-1.0.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-digester-1.8.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-el-1.0.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-httpclient-3.0.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-io-2.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-lang-2.4.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-logging-1.1.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-logging-api-1.0.4.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-math-2.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/commons-net-1.4.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/core-3.1.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/guava-13.0.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/hadoop-capacity-scheduler-1.0.4.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/hadoop-fairscheduler-1.0.4.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/hadoop-thriftfs-1.0.4.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/hsqldb-1.8.0.10.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jackson-core-asl-1.8.8.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jackson-mapper-asl-1.8.8.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jasper-compiler-5.5.12.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jasper-runtime-5.5.12.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jdeb-0.8.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jersey-core-1.8.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jersey-json-1.8.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jersey-server-1.8.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jets3t-0.6.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jetty-6.1.26.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jetty-util-6.1.26.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jsch-0.1.42.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/junit-4.5.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/kfs-0.2.2.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/log4j-1.2.15.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/mockito-all-1.8.5.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/oro-2.0.8.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/protobuf-java-2.3.0.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/servlet-api-2.5-20081211.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/xmlenc-0.52.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/zookeeper-3.4.3.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jsp-2.1/jsp-2.1.jar:/hadoop/projects/hadoop-1.0.4/libexec/../lib/jsp-2.1/jsp-api-2.1.jar' -Djava.library.path=:/hadoop/projects/hadoop-1.0.4/libexec/../lib/native/Linux-amd64-64 org.apache.flume.node.Application -n agent1 -f conf/agent1.conf
12/12/15 02:55:29 INFO node.PollingPropertiesFileConfigurationProvider: Configuration provider starting
12/12/15 02:55:29 INFO node.PollingPropertiesFileConfigurationProvider: Reloading configuration file:conf/agent1.conf
12/12/15 02:55:29 INFO conf.FlumeConfiguration: Processing:HDFS
12/12/15 02:55:29 INFO conf.FlumeConfiguration: Processing:HDFS
12/12/15 02:55:29 INFO conf.FlumeConfiguration: Processing:HDFS
12/12/15 02:55:29 INFO conf.FlumeConfiguration: Processing:HDFS
12/12/15 02:55:29 INFO conf.FlumeConfiguration: Added sinks: HDFS Agent: agent1
12/12/15 02:55:29 INFO conf.FlumeConfiguration: Post-validation flume configuration contains configuration  for agents: [agent1]
12/12/15 02:55:29 INFO node.AbstractConfigurationProvider: Creating channels
12/12/15 02:55:29 INFO channel.DefaultChannelFactory: Creating instance of channel MemoryChannel-2 type memory
12/12/15 02:55:29 INFO node.AbstractConfigurationProvider: Created channel MemoryChannel-2
12/12/15 02:55:29 INFO source.DefaultSourceFactory: Creating instance of source tail, type exec
12/12/15 02:55:29 INFO sink.DefaultSinkFactory: Creating instance of sink: HDFS, type: hdfs
12/12/15 02:55:30 INFO hdfs.HDFSEventSink: Hadoop Security enabled: false
12/12/15 02:55:30 INFO node.Application: Starting new configuration:{ sourceRunners:{tail=EventDrivenSourceRunner: { source:org.apache.flume.source.ExecSource{name:tail,state:IDLE} }} sinkRunners:{HDFS=SinkRunner: { policy:org.apache.flume.sink.DefaultSinkProcessor@137efe53 counterGroup:{ name:null counters:{} } }} channels:{MemoryChannel-2=org.apache.flume.channel.MemoryChannel{name: MemoryChannel-2}} }
12/12/15 02:55:30 INFO node.Application: Starting Channel MemoryChannel-2
12/12/15 02:55:30 INFO instrumentation.MonitoredCounterGroup: Monitoried counter group for type: CHANNEL, name: MemoryChannel-2, registered successfully.
12/12/15 02:55:30 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: MemoryChannel-2 started
12/12/15 02:55:30 INFO node.Application: Starting Sink HDFS
12/12/15 02:55:30 INFO node.Application: Starting Source tail
12/12/15 02:55:30 INFO source.ExecSource: Exec source starting with command:tail -F /var/log/apache2/access.log.1
12/12/15 02:55:30 INFO instrumentation.MonitoredCounterGroup: Monitoried counter group for type: SINK, name: HDFS, registered successfully.
12/12/15 02:55:30 INFO instrumentation.MonitoredCounterGroup: Component type: SINK, name: HDFS started 
```

请参阅最后 2 行。

其次，代理不会推送任何数据，直到文件中有新内容，这里是“/var/log/apache2/access.log”。手动将某些内容复制到文件中并重新启动 apache 并执行某些操作，然后检查 /hdfs/flume 目录的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-22T15:37:28.107

如果您使用 Flume 1.7.0，我想您可以使用[taildir 源](https://flume.apache.org/FlumeUserGuide.html#taildir-source)

以下是我在项目中使用的：

```
a1.sources.r1.type = TAILDIR
a1.sources.r1.positionFile = /xxx/env/flume/taildir_position.json
a1.sources.r1.filegroups = f1
a1.sources.r1.filegroups.f1 = /xxx/logs/file_name.*.log
a1.sources.r1.headers.f1.headerKey1 = yyy
a1.sources.r1.fileHeader = true 
```

# windows-8 - Windows 8 应用因隐私政策而被拒绝

> ID：13721931
> 
> 赞同：6
> 
> 时间：2012-12-05T11:10:00.077
> 
> 标签：windows-8

我是 Windows 8 应用程序开发的新手，我正在开发 Web Api，但我的应用程序因不包含隐私政策而被拒绝。如何添加它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T11:12:18.427

需要在windows 8 app的设置Charms下添加隐私策略，我按Windows+C键即可。休息一下，您需要创建一个将您定位到隐私政策页面的博客/网站。复制并粘贴下面的代码

[http://www.andybeaulieu.com/Default.aspx?tabid=67&EntryID=228](http://www.andybeaulieu.com/Default.aspx?tabid=67&EntryID=228)

有关示例隐私政策，请访问

[http://apoorvkupadhyay.blogspot.in](http://apoorvkupadhyay.blogspot.in)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T12:43:33.617

您可以使用您的私人政策文本创建一个网页。诸如“应用程序插入名称不会收集有关您的任何信息”之类的内容就足够了。获得网址后，您可以在设置中添加私人“部分”：

```
SettingsCommand privacy = new SettingsCommand("privacy", "Privacy Policy", (uiCommand) => { ShowSettingsPanel(); });
args.Request.ApplicationCommands.Add(privacy); 
```

然后，在函数 ShowSettingsPanel（例如）中，只需打开浏览器：

```
Launcher.LaunchUriAsync(new Uri("http://colorchallenge.co.nf/privacy_policy.html")); 
```

请记住，您需要告诉程序您要将其添加到设置部分。为此，如果 MyApp_CommandsRequested 是开头有代码的函数的名称，则必须这样做：

```
SettingsPane.GetForCurrentView().CommandsRequested += MyApp_CommandsRequested; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T22:49:32.327

这是我所做的：

[价格声明Javascript](http://codesquire.com/blog/PrivacyStatementJavascript/)

# python - 无法在 django-flatpages 中使用 {{ variable }}

> ID：13721937
> 
> 赞同：1
> 
> 时间：2012-12-05T11:10:11.960
> 
> 标签：python, django

我正在使用 django-flatpages 允许管理员从管理员维护/自定义网站主页。

所以他将能够通过管理端添加、编辑和删除主页 div 内容。

但请参阅以下 div 的输出。

从管理员端添加的实际内容：

```
{%if user.is_authenticated %}
<h2>Welcome Back!</h2>
<div class="home-since-last">
    <div class="member-photo">
        <a href="/person/{{user.username}}"><img src="{{STATIC_URL}}{{user.get_profile.profile_image}}" alt="{{user.username}}" /></a>
    </div>
    <p><strong>Since your last visit:</strong></p>
    <ul>
    <li>+{{today_supporter_count}} supporter{{today_supporter_count|pluralize}}</li>
    <li>+{{today_comment_count}} comment{{today_comment_count|pluralize}}</li>
    <li>+{{today_adoption_count}} adoption{{today_adoption_count|pluralize}}</li>
    </ul>
    <p><a href="/you">Go to your profile &raquo;</a></p>
</div>
{% endif %) 
```

输出 ：

```
Welcome Back!
{{user.username}}

Since your last visit:

    +{{today_supporter_count}} supporter{{today_supporter_count|pluralize}}
    +{{today_comment_count}} comment{{today_comment_count|pluralize}}
    +{{today_adoption_count}} adoption{{today_adoption_count|pluralize}}

Go to your profile » 
```

预期的：

```
Welcome Back!
bhushan vaiude [Image of user]

Since your last visit:

    +12 supporters
    +4 comments
    +0 adoptions

Go to your profile » 
```

作为参考。对于 PHP，我想要一些类似`include('abc.php');`这样的`abc.php`文件可以访问父文件或容器文件的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:20:28.313

可能你应该看看[django-dbtemplates](http://pypi.python.org/pypi/django-dbtemplates/)：编写你自己的视图，让管理员从管理员那里更改模板。

# xml - 如何将控制字符转换为 HTML 实体？

> ID：13721943
> 
> 赞同：2
> 
> 时间：2012-12-05T11:10:33.663
> 
> 标签：xml, perl, character-encoding

我正在读取一个文本文件并将其内容放在一个 xml 输出文件的标记中。我面临的问题是输入文本文件包含一些控制字符，例如`<96>`或`<92>`导致我的脚本输出无效的 xml。

如何将这些控制字符转换为相应的数字 HTML 实体，这样就不会丢失数据并且生成的文件也有效？

我试过了：

```
perl -p -i -e 's/\x96/\&\#150\;/g; s/\x92/\&\#146\;/g;' out_xml 
```

但我想将*任何*控制字符转换为 HTML 实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:16:13.547

[HTML::Entities](https://metacpan.org/module/HTML%3a%3aEntities)做你想做的事：

```
$ perl -MHTML::Entities -le 'print encode_entities("\x96\x92")'
&#150;&#146; 
```

# java - 如何在 Java 中实现与 before_filter 类似的方法？

> ID：13721944
> 
> 赞同：0
> 
> 时间：2012-12-05T11:10:39.890
> 
> 标签：java, design-patterns

我正在开发一个带有特定 API 的定制框架，现在我正在重构它。

我必须解决的问题之一是创建一种类似路由的方法，以根据查询深度和其他属性将查询重定向到不同的类。以下是方法：

```
class Blah {
public Object query1(){...}
public Object query2(){...}
} 
```

我必须把它改成类似

```
class Blah implements BeforeFilter{
@Override
protected void filter()
{
//decide to call which query method
//then redirect the request to query
}
public Object query1(){...}
public Object query2(){...}
} 
```

实现上述想法的一种非常传统的方法是在每个 query() 方法中添加一个 if/else 来决定是否走得更远。

老实说，我不喜欢这种方法。这就是为什么我在寻找更优雅的东西。

PS：这样做的原因不是为了更改公共 API。我已经实现了代理设计模式，但那会改变一些 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:24:33.460

在我看来，这听起来像[责任链，](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)它完全是一种“类似路由”的方法，过滤器或链元素符合一个通用接口，并且您以类似于链表的不同方式组装它们。查询/请求被传递给第一个链元素，然后它将请求传递给它的“下一个”链元素，依此类推。每个 Chain 元素或过滤器决定是否对请求/SQL 等做一些事情。

这样，您就拥有了过滤机制，其中每个过滤器（或链元素）都与其他过滤器分离，并且不需要 if-then-else 阶梯。

# sql - sql中的不同结果

> ID：13721950
> 
> 赞同：0
> 
> 时间：2012-12-05T11:11:17.473
> 
> 标签：sql

我有两个疑问：

1)

```
SELECT a.n
FROM account a, contract c
WHERE c.n = a.r$contract
AND c.n IN (
    SELECT account.n
    FROM account, contract
    WHERE contract.n = account.r$contract
    AND account.n = contract.n )
ORDER BY a.n 
```

和

2)

```
SELECT account.n
FROM account, contract
WHERE contract.n = account.r$contract
AND account.n = contract.n 
```

在 1 中有 47 行，但在 2 - 15 中。我不明白为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:22:58.540

不确定，我试试...

如果查询 2 返回 15 行，那么查询 1 的内部选择也会返回，因为它看起来与我相同。

所以查询1就像

```
SELECT a.n
FROM account a, contract c
WHERE c.n = a.r$contract
AND c.n IN ( <any of the 15 values> )
ORDER BY a.n 
```

这不同于

```
SELECT a.n
FROM account a, contract c
WHERE c.n = a.r$contract
AND c.n = a.n              ( <-just one possible value)
ORDER BY a.n 
```

所以这可以解释为什么你会得到不同的结果集。

# javascript - 循环上课

> ID：13721954
> 
> 赞同：0
> 
> 时间：2012-12-05T11:11:26.587
> 
> 标签：javascript, jquery, css, cycle

我有下面的 html，我希望自动循环浏览它。它目前是通过点击手动完成的。但是我怎样才能让它循环呢？它基本上只是像这样更改包装器 div 上的类名：

```
<body>
    <div id="client-relations-bg" class="background_tab1">
        ...content...
    </div>
</body> 
```

我在头上有类图像信息：

```
<style type="text/css">
    #client-relations-bg.background_tab1{background: url('/media/2/background-image-1.png') no-repeat center top;}
    #client-relations-bg.background_tab2{background: url('/media/32/background-image-6.jpg') no-repeat center top;}
    #client-relations-bg.background_tab3{background: url('/media/17/background-image-3.jpg') no-repeat center top;}
    #client-relations-bg.background_tab4{background: url('/media/12/background-image-2.png') no-repeat center top;}
    #client-relations-bg.background_tab5{background: url('/media/22/background-image-4.jpg') no-repeat center top;}
    #client-relations-bg.background_tab6{background: url('/media/37/background-image-7.jpg') no-repeat center top;}
    #client-relations-bg.background_tab7{background: url('/media/2900/Header_image.jpg') no-repeat center top;}
</style> 
```

所以我需要这个：`class="background_tab1"`循环`tab1`到`tab7`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:23:47.000

你实际上不需要使用 jQuery

```
(function(){
    var interval = 1000;
    var currentBackgroundId = 1;
    window.setInterval(function(){
        currentBackgroundId++;
        if (currentBackgroundId == 8) currentBackgroundId = 1;

        var element = document.getElementById('client-relations-bg');
        element.className = 'background_tab' + currentBackgroundId;
    }, interval);
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:13:44.260

jQuery 有非常好的类操作方法。您需要做的就是解析当前类以查找当前的数字，或者将其存储在全局变量中并`i++ % 7`在设置下一个时执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T11:23:25.887

如果您事先知道您的班级名称，则可以这样做：

```
var
  classList = ['background_tab1', 'background_tab2', 'background_tab3'],
  $el = $('#client-relations-bg');

(function next() {
  setTimeout(function () {
    classList.push(classList.shift());
    $el.removeClass().addClass(classList[0]);
    next();
  }, 2000);
}()); 
```

[http://jsfiddle.net/c2uqp/](http://jsfiddle.net/c2uqp/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T11:42:17.033

这是一种方法：

```
var classes = [
    "background_tab1",
    "background_tab2",
    "background_tab3",
    "background_tab4",
    "background_tab5",
    "background_tab6",
    "background_tab7"
];
setInterval(function() {
    var $div = $("#client-relations-bg");
    $.each(classes, function(i, c) {
        if ($div.hasClass(c)) {
            var j = (i + 1) % classes.length;
            $div.removeClass(c).addClass(classes[j]).text(classes[j]);
            return false;
        }
    });
}, 2000); 
```

});​</p>

[**演示在这里**](http://jsfiddle.net/mWYF6/2/)

# mysql - 格式化一列并通过一次选择获取所有列的其余部分

> ID：13721955
> 
> 赞同：0
> 
> 时间：2012-12-05T11:11:27.643
> 
> 标签：mysql

我很好奇，有没有什么方法可以在不写其余部分的情况下获取所有列。

像这样：

```
SELECT DATE_FORMAT(START_DATE, '%d.%m.%Y') * FROM CUSTOMER; 
```

我想要做的是格式化单个列并通过一次选择获取所有列。原因是，表中有这么多列，我不想每个 SELECT 都写完！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:12:50.727

尝试 ：

```
SELECT customer.*, DATE_FORMAT(START_DATE, '%d.%m.%Y')  FROM CUSTOMER; 
```

# database - 指向 tnsping 正在使用的不同 TNSNAMES.ORA 文件

> ID：13721958
> 
> 赞同：0
> 
> 时间：2012-12-05T11:11:34.203
> 
> 标签：database, linker-errors, tnsnames, tns

我的机器上安装了两个 Oracle 客户端。一个是 Oracle 11g，另一个是 ORACLE 8.1。我试图将 Business Objects 连接到 Oracle 8.1，但它失败了，因为在通过 TNS 条目连接时，它总是碰到 Oracle 11G 的 TNS 条目。

我试过 `TNSPING ICS.WORLD`了，它在只有一个 oracle 实例（Oracle 8.1）可用的其他机器上运行良好。但对我来说，它提示无法解析名称。

您能否建议我应该进行哪些更改以使 TNSPING 能够访问 Oracle 8.1 的 TNSNAMES.ORA？以下是我得到的错误

```
'Microsoft Windows XP [Versione 5.1.2600] (C) Copyright 1985-2001 Microsoft Corp. C:\Documents and Settings\Deys>tnsping ICS.WORLD TNS Ping Utility for 32-bit Windows: Version 11.2.0.2.0 - Production on 05-DIC-2 012 16:01:06 Copyright (c) 1997, 2010, Oracle. All rights reserved. Used parameter files: D:\ORACLEXE\app\oracle\product\11.2.0\server\network\admin\sqlnet.ora TNS-03505: Failed to resolve name' 
```

# fortran - 用 Fortran 重载函数

> ID：13721961
> 
> 赞同：18
> 
> 时间：2012-12-05T11:11:45.373
> 
> 标签：fortran, overloading, fortran90

在 Fortran 90 中，我们可以使用接口重载函数。但是，根据[这个站点](http://www.cs.rpi.edu/~szymansk/OOF90/bugs.html#10)，我们不能用相同的参数名称定义这些函数。使用 gfortran，这似乎不是问题，因为以下代码运行良好：

```
interface check
  module procedure check_int, check_real
end interface

contains 

subroutine check_int(cur, dname, func_name, fname)
  integer, allocatable, intent(in) :: cur(:)
  character(*) :: dname, func_name, fname
  ...
end subroutine

subroutine check_real(cur, dname, func_name, fname)
  real, allocatable, intent(in) :: cur(:)
  character(*) :: dname, func_name, fname
  ...
end subroutine 
```

那么，这样做是不好的做法吗？

**编辑：**用关键字调用函数不会改变任何东西。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T11:14:20.677

你的例子是完全有效的。它们可以通过参数的类型来区分。那么名字并不重要。在您的情况下，`cur`参数的类型不同。

具有相同名称的参数可以通过它们的类型、种类或等级（TKR 兼容性）来区分。

引用文章的要点是，您不能仅通过参数的 ORDER 来区分两个特定过程。这是因为可以以任何顺序使用关键字参数调用过程。这可以通过为参数使用不同的名称来克服。

否则，为具有相同参数名称但具有不同类型/种类/等级的通用程序声明更具体的程序是非常常见且完全有效的。

Fortran 2003/2008 为通用解析增加了更多可能性。也可以通过参数的指针/可分配属性和过程指针伪参数来区分过程。

# ruby - 将 will_paginate 限制为仅显示 2 页，每页 5 个对象

> ID：13721968
> 
> 赞同：0
> 
> 时间：2012-12-05T11:12:24.077
> 
> 标签：ruby, ruby-on-rails-3, rubygems, pagination, will-paginate

我有一个酒店模型，在我们的主页上有一个指定部分，它应该在侧边栏中显示最后 10 家酒店，每页分页为 5 个。我已经阅读了一些有关 will_paginate 的文档，并意识到没有像样的方法来限制发送到 will_paginate 的对象数量，因此调用限制不会实现任何目标，因此侧边栏显示了所有酒店，每页分页 5 和下面的代码不能按预期工作。

```
@nominations = Hotel.where(winner: false).limit(10).paginate(page: params[:page], per_page: 5) 
```

我想知道是否有办法限制显示的页数将分页？所以即使有 5 个页面，每个页面上有 5 个酒店，它也只会显示 2 个页面。因此有效地限制了显示的项目数量。我已经查看了内部和外部窗口参数，但我认为这些对这种情况没有帮助。或者，如果有人有任何其他方法可以实现这一点，我会全力以赴。

哦，是的，我们必须对提名进行分页，因为边栏将远远超出页面上的其他内容，我担心这看起来不太好。

如果您需要更多代码，请大声喊叫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:56:17.077

感谢提问[限制 will_paginate 中的页数](https://stackoverflow.com/questions/10173495/limit-number-of-pages-in-will-paginate?rq=1)只需将 total_entries 参数传递给 paginate 函数。所以我的代码如下所示：

```
@nominations = Hotel.where(winner: false).paginate(page: params[:page], per_page: 5, total_entries: 10) 
```

# php - 迭代 td 以从数据库中获取值

> ID：13721969
> 
> 赞同：2
> 
> 时间：2012-12-05T11:12:24.267
> 
> 标签：php, mysql, datepicker, while-loop

我对数据库进行了几次迭代，例如：

```
<?php
    $test = mysql_query("SELECT * FROM test WHERE id='1'");
    while($row = mysql_fetch_array($test))
      {
      echo "<tr>";
      echo "<td>" . $row['value'] . "</td>";
      echo "<td><input type='text' id='datepicker' /></td>";
      echo "<td><button id='save'>Save</button></td>";
      echo "</tr>";
      }
?>

<?php
    $test = mysql_query("SELECT * FROM test WHERE id='2'");
    while($row = mysql_fetch_array($test))
      {
      echo "<tr>";
      echo "<td>" . $row['value'] . "</td>";
      echo "<td><input type='text' id='datepicker' /></td>";
      echo "<td><button id='save'>Save</button></td>";
      echo "</tr>";
      }
?> 
```

问题在于 jQuery 日期选择器。它仅适用于第一个输入，例如当测试表返回例如 3 个条目时（例如，mysql、datepicker、save；oracle、datepicker、save；db2、datepicker、save），`datepicker`仅在我单击它时适用于第一个输入（如 oracle、datepicker、save），但不适用于其余部分。知道如何根据一段时间范围内的表元素为每个列出的输入填充它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:23:19.653

不要将查询分解到分子级别，而是使用单个 SQL 语句和单个循环：

```
<?php
$test = mysql_query("SELECT * FROM test WHERE id IN (1,2)");
while($row = mysql_fetch_array($test))
  {
  echo "<tr>";
  echo "<td>" . $row['value'] . "</td>";
  echo "<td><input type='text' class='datepicker' /></td>";
  echo "<td><button id='save'>Save</button></td>";
  echo "</tr>";
  }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:35:50.083

```
$test = mysql_query("SELECT * FROM test WHERE id IN (1,2)");
while( $row = mysql_fetch_array($test) ) {
  echo "<tr>
          <td>" . $row['value'] . "</td>
          <td><input type='text' class='datepicker' /></td>
          <td><button id='save'>Save</button></td>
        </tr>";
}
// datepicker issue - change unique identifier
<script>
  $(function() { $( ".datepicker" ).datepicker(); });
</script> 
```

**注意**：不要使用`mysql_**`函数（已弃用），使用例如`mysqli_**`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T12:25:05.983

在 HTML 文档中，id 应该是唯一的。由于您在循环内渲染 HTML，因此几个 HTML 元素可以具有保存 ID。因此，jQuery 选择器可能会获得第一个匹配的元素，因为 jQuery 假定文档只有一个 id。您可以使用类而不是 id。除此之外，不要将 PHP 和 HTML 混为一谈。最佳做法是尽可能将它们分开

```
<?php $test = mysql_query("SELECT * FROM test WHERE id IN (1,2)"); ?>
<?php while($row = mysql_fetch_array($test)) : ?>
    <tr>
        <td><?php echo $row['value']; ?></td>
        <td><input type='text' class='datepicker' /></td>
        <td><button id='save'>Save</button></td>
    </tr>
<?php endwhile; ?> 
```

# c++ - std::transform 的功能版本

> ID：13721970
> 
> 赞同：2
> 
> 时间：2012-12-05T11:12:26.167
> 
> 标签：c++

将函数应用于元素集合时，`std::transform`将输出作为第三个参数。是否有返回结果的版本，例如`vec2 = map(func, vec1)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:24:19.973

不，标准库中没有类似的东西。你可以自己写一个：

```
template<typename T, typename Func>
std::vector<T> transform(std::vector<T> const &input, Func func) {
    std::vector<T> result(input.size());
    std::transform(input.begin(), input.end(), result.begin(), func);
    return result;
} 
```

更好的解决方案可能是使用[`transformed`来自 Boost.Range 的适配器，](http://www.boost.org/doc/libs/1_55_0/libs/range/doc/html/range/reference/adaptors/reference/transformed.html)因为它不分配额外的容器。

# java - 无法解析 java.rmi.RemoteException 类型。它是从 java 中所需的 .class 文件错误中间接引用的

> ID：13721982
> 
> 赞同：1
> 
> 时间：2012-12-05T11:12:41.647
> 
> 标签：java, web-services, jar, syntax-error, remoteexception

我对Java真的很陌生，并试图调用网络服务。我从网上获取了一个代码

```
String message = "";
static Map output;

public static void main(String args[]) {
    try {
        String inputparam = "10000";

        Service service = new Service();
        Call call = (Call) service.createCall();

        call.setTargetEndpointAddress(new java.net.URL(""));
        call.setOperationName(new QName("http://testPackage.fc.com/, doBasicStuff"));

        call.addParameter("Hello", org.apache.axis.Constants.XSD_STRING, javax.xml.rpc.ParameterMode.IN);

        call.setReturnType(org.apache.axis.Constants.XSD_STRING);

        Object responseWS = call.invoke(new Object[] { inpurparam });

        System.out.println("ReceivingResponse: " + (String) responseWS);

        output = call.getOutputParams();

        String firstName = (String) output.get(new QName("", "firstName"));

    } catch (Exception e) {
        System.err.println(e.toString());
    }

} 
```

这给出了语法错误

```
The type java.rmi.RemoteException cannot be resolved. It is indirectly referenced from required .class files 
```

在线上

```
Object responseWS = call.invoke(new Object[] { inpurparam }); 
```

所以我添加了“import java.rmi.RemoteException;” 声明它给导入语句“导入 java.rmi.RemoteException 无法解决”错误，所以请告诉如何删除这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:17:03.400

您需要添加

`import java.rmi.RemoteException;`

在你的班级声明之前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T12:15:01.977

这些`java.rmi`包是标准 Java SE 库的一部分，因此默认情况下它们应该可用于所有 Java 代码。如果您的 IDE 找不到这些类，请检查您的设置、项目构建路径等，并确保它们是正确的，并且项目设置为使用 Java SE 运行时，而不是例如 Android（它提供一些`java.*`包，但不是`java.rmi`）。

# fluid - Typo3 流体视图作为模态对话框

> ID：13721990
> 
> 赞同：0
> 
> 时间：2012-12-05T11:13:06.823
> 
> 标签：fluid, extbase

对于我的typo3 extbase 扩展，我有一个视图，它只是一个用于上传图片的表单。在提交表单时，用户被重定向到另一个视图。现在，我想以模态对话框的形式显示这个流体视图。这可能吗？如果可以，如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:39:55.373

使用您的域模型。

1）为您的视图分配一个新的域模型：

```
public function formAction(Tx_MyExt_Domain_Model_MyObject $newMyObject = NULL) {
    $this->view->assign('newMyObject', $newMyObject);
} 
```

您的表单应如下所示：

```
<f:form action="post" name="myObject" object="{newMyObject}">
  <f:form.textbox property="name" />
  <f:form.textbox property="surname" />
  etc..
</f:form> 
```

2) 将表单值作为对象发送到您的 post/show/dialog 操作，通过存储库添加对象并将其分配给您的视图：

```
public function postAction(Tx_MyExt_Domain_Model_MyObject $myObject) {
    // saves the object
    $this->myObjectRepository->add($myObject);
    $this->view->assign('object', $myObject);
} 
```

不使用域模型的另一种方法如下所示：

```
public function postAction() {
   $arguments = $this->request->getArguments();
   $this->view->assign('arguments', $arguments);
} 
```

# wpf - 如何预渲染视图？

> ID：13721992
> 
> 赞同：5
> 
> 时间：2012-12-05T11:13:15.963
> 
> 标签：wpf, xaml

我的 ViewModel 根据用户点击选择一个视图。其中一个视图包含许多视觉元素 - 带有数据模板的视图模型，其中包含带有数据模板的视图模型，每个视图都在带有背景图像刷的画布上呈现。整个视图以大约 100 个这样的画布画笔结束，每个画笔都叠加了十几个椭圆，整个视图位于可滚动的视图框中。

第一次创建此视图时，用户单击然后在其全部呈现时停留一段时间。我想早点完成这个渲染 - 例如在启动期间。我已经创建了视图对象，但是当用户单击时，我们仍然在渲染完成时徘徊。

有没有办法让 WPF/xaml 预渲染它，以便点击响应更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:05:52.400

如我所见，您正在使用 MVVM 模式。我会尝试以下方法：

在启动期间创建视图并将其设置`DataContext`为您的视图模型实例。然后模拟 WPF 执行的工作。视图上的调用`Measure()`和`Arrange()`方法强制 WPF 更新数据绑定并生成可视化树。

但是只有一个 UI 线程。因此，此时再次阻止您的启动程序。您可以通过将“工作”分成更小的部分来避免这种情况。也许您的视图模型中有一些项目集合。然后，您可以使用`DipatcherTimer`并在每个步骤中将一些合理数量的项目添加到集合中，并在每次迭代后调用 Measure 和 Arrange 来更新视图的可视化树。视图完全初始化后，渲染不应再阻塞。

# sql - 在sql中自我加入以生成排名

> ID：13721993
> 
> 赞同：1
> 
> 时间：2012-12-05T11:13:20.287
> 
> 标签：sql, sql-server-2008, join

我想根据他获得的分数计算每个学生的排名。但是，如果标记在 -ve 值中，则查询不会显示适当的答案。

```
SELECT a1.ResultByTestId, a1.ObtainedMarks, COUNT(a2.ObtainedMarks) Rank
 FROM ResultByTest a1, ResultByTest a2
WHERE a1.ObtainedMarks < a2.ObtainedMarks 
      or 
      (a1.ObtainedMarks=a2.ObtainedMarks and a1.StudentId = a2.StudentId)
GROUP BY  a1.ObtainedMarks, a1.ResultByTestId
ORDER BY a1.ObtainedMarks DESC, Rank DESC 
```

答案表是：-

```
resutlByTestId  ObtainedMarks  Rank

11                36              1
10                22              2
3                  9              3
9                  7              4
6                  5              5
8                  3              6
7                  2              7
4                  0              8
5                  0              8
1                  0              8
2                  0              8
13                -5              12 
```

有人帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:37:34.897

您可以使用[Dense_Rank](http://msdn.microsoft.com/en-us/library/ms173825.aspx)函数执行此操作

```
Select
  StudentID,
  ObtainedMarks,
  Dense_Rank() Over (Order By ObtainedMarks Desc) as Rank
From 
  ResultByTest 
```

[http://sqlfiddle.com/#!3/a9e5c/1](http://sqlfiddle.com/#!3/a9e5c/1)

您通常使用排名的原因是，当您问获得 -5 的人您从哪里来时，他们会说“第 9 位”。那你问，有多少人打你“12”。然后你看起来很困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:24:55.850

您应该在 MSSQL 2008 中使用[DENSE_RANK() 函数：](http://msdn.microsoft.com/en-us/library/ms173825.aspx)

```
SELECT ResultByTestId, ObtainedMarks, 
       DENSE_RANK() OVER (order by ObtainedMarks desc) as Rank
 FROM ResultByTest
ORDER by ObtainedMarks DESC; 
```

这也是您的查询`COUNT(DISTINCT <>)`：

```
SELECT a1.ResultByTestId, a1.ObtainedMarks, 
 COUNT(DISTINCT a2.ObtainedMarks) Rank
 FROM ResultByTest a1, ResultByTest a2
WHERE a1.ObtainedMarks < a2.ObtainedMarks 
      or 
      (a1.ObtainedMarks=a2.ObtainedMarks and a1.StudentId = a2.StudentId)
GROUP BY  a1.ObtainedMarks, a1.ResultByTestId
ORDER BY a1.ObtainedMarks DESC, Rank DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T11:20:53.367

输出是正确的，没有问题，因为 -ve 得分，因为四个学生得了 0，排名第 8，所以 8-8 8-9 8-10 8-11

这就是它的计算方式，所以下一个排名显然是 12

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:26:34.070

```
--setup test data

DECLARE @ResultByTest TABLE (ResultByTestId int, ObtainedMarks int)

INSERT INTO @ResultByTest VALUES
(11,                36),
(10,                22),
(3,                  9),
(9,                  7),
(6,                  5),
(8,                  3),
(7,                  2),
(4,                  0),
(5,                  0),
(1,                  0),
(2,                  0),
(13,                -5)

-- this will give you the results you have

select *, RANK() OVER (ORDER BY ObtainedMarks DESC) AS [Rank]
from @ResultByTest

-- this will give you the results I think you want

select *, DENSE_RANK() OVER (ORDER BY ObtainedMarks DESC) AS [Rank]
from @ResultByTest 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T11:37:54.747

使用 DENSE_RANK 消除差距。

```
DECLARE @ObtainedMarks TABLE (
ResultByTestId INT,
ObtainedMarks INT,
StudentId INT

)

INSERT INTO @ObtainedMarks VALUES
(1,0,1),
(2,0,1),
(3,9,1),
(4,0,1),
(5,0,1),
(6,5,1),
(7,2,1),
(8,3,1),
(9,7,1),
(10,22,1),
(11,36,1),
(13,-5,1)

SELECT 
    ResultByTestId,
    ObtainedMarks,
    DENSE_RANK() OVER (order by ObtainedMarks desc) [Rank]
FROM @ObtainedMarks 
```

# asp.net - 页面加载后 ASP.Net UpdatePanel 刷新

> ID：13721995
> 
> 赞同：2
> 
> 时间：2012-12-05T11:13:23.370
> 
> 标签：asp.net, asp.net-ajax, updatepanel

我有一个页面，其中有一些文本框，每次加载页面时都会刷新（Page_Load）。还有一个加载时间太长的表（不能让它更快）。

我想在更新文本框后使用 UpdatePanel 加载该表。我可以使用 RegisterStartupScript （更新文本框后）来更新 UpdatePanel 。

但是，UpdatePanel 更新总是调用 Page_Load，所以文本框总是会再次更新。就像 UpdatePanel 没用一样。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:16:31.773

在您的情况下，简单的解决方案是使用 asp.net ajax 计时器和更新面板。利用回发触发器，您就完成了。

在这里查看更多信息：http: [//msdn.microsoft.com/en-us/library/bb386404 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb386404(v=vs.100).aspx)

如果您需要更多帮助，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:36:50.333

您可以检查 Page_Load 以查看是否通过部分回发（即从更新面板）调用它，如果是，则不要更新文本框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-17T13:57:42.763

您可以检查它是否是 ASP.NET C# 代码隐藏中的回发，例如：

```
if ( ! Page.IsPostBack ) 
```

或者在客户端javascript中：

```
<script type="text/javascript">
        function ClickHidenButton()
        {
            if (IsPostBack() != true)
                document.getElementById("hiddenAsyncTrigger").click();
        }

        function IsPostBack() {
             var ret = '<%= Page.IsPostBack%>' == 'True';
             return ret;
        }
</script> 
```