# StackOverflow 问答 12705000-12705999

# c# - TreeView 在回发时失去样式

> ID：12705014
> 
> 赞同：0
> 
> 时间：2012-10-03T08:56:22.020
> 
> 标签：c#, asp.net, treeview

我有 2 个选择和树视图。当任何选择发生更改时，TreeView 会重建。

但是当单击树视图节点时，树视图会在回发时失去所有样式。我想知道如何保持 treeView 样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:00:59.373

您可能忘记了 EnableViewState 属性

treeview1.EnableViewState = True

请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.control.enableviewstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.enableviewstate.aspx)

# html - IPAD 上的表单元素不可点击

> ID：12705022
> 
> 赞同：0
> 
> 时间：2012-10-03T08:56:49.073
> 
> 标签：html, forms, ipad

我在 IPAD 上有一个表格，没有一个元素是可点击的。页面内的其他按钮是可点击的。我将页面剥离回来，只将表格放在那里，因为我认为可能有什么东西重叠了它。在桌面浏览器上运行良好。

有什么建议么？

```
 <form action="#/search" method="GET">
    <label>Show:</label>
    <input type="text" name="query" value=""/>
    <label>Duration:</label>
    <input class="number" type="number" name="cycle" value="10"/>
    <label>Queue:</label>
    <input class="number" type="number" name="queue" value="20"/>
    <label>Event Name:</label>
    <input type="text" name="eventname" value="Conference 2013"/>
    <label>Cycle Colour?</label>
    <input class="checkbox" type="checkbox" name="colors" value="true" checked="true"/>
    <label>Zoom?</label>
    <input class="checkbox" type="checkbox" name="zoom" value="true" checked="true"/>
    <input type="submit" value="Go!" class="go"/>
  </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T13:27:54.353

我遇到了同样的问题，在我的情况下，它是从 iScroll.js 到新版本的更新，在恢复此更新后它再次工作。

# android - 如何在 Android 中使 ImageView 的透明区域不可触摸？

> ID：12705023
> 
> 赞同：1
> 
> 时间：2012-10-03T08:57:06.797
> 
> 标签：android, imageview, transparent

我用谷歌搜索了很多，但找不到任何有用的东西。我有一个复杂的 png 图像，我想让它可以触摸，但仅限于它的不透明区域。我为它设置了一个触摸监听器，但即使我点击了一个透明区域，它也会发送，这就是我不想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:32:51.950

正如@Cata 所说，触摸事件将与整个图像相关联。但是，触摸事件会告诉您触摸在图像中的哪个位置，因此可以编写类似这样的代码（忽略检查正确操作等）：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    boolean eventHandled = false;

    int x = (int) (event.getX());
    int y = (int) (event.getY());
            if (imageIsOpaque(x,y) {
                 //Do the stuff

                 eventHandled = true;
            }

    return eventHandled;
} 
```

这里的关键是 imageIsOpaque，您需要通过以下三种方式之一来实现它：

1.  在这种情况下，图像可能很容易分割成不透明和不透明的区域：

    ```
    boolean imageIsOpaque(int touchX, int touchY) {
        ArayList<Rect> rectsOfOpaqueness; // You will need to define these ...

        boolean isOpaque = false;
        for (int i=0; i<rectsOfOpaqueness.size() && !isOpaque; i++) {
        if (rectsOfOpaqueness.get(i).contains(touchX, touchY)) {
            isOpaque = true;
            }

        return isOpaque;
    } 
    ```

2.  以这种方式处理图像可能并不容易，在这种情况下，您将需要使用 x 和 y 触摸位置来检查源图像（缩放到它在屏幕上的大小）是否该点是不透明的。编辑：您在下面对@vinod 的评论中似乎以一种相当简洁的方式使用了此解决方案，因此我建议其他读者也检查该评论。

3.  更复杂的是，它可能是您在运行中构建的图像，并且从未真正以可搜索的方式知道它的最终状态。如果是这种情况，您将需要在创建图像时建立一个单独的 2D 布尔数组，以确定哪些点是不透明的，哪些不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:03:22.960

触摸侦听器适用于整个视图，而不是视图的一部分。所以我建议您将图像分成小块，并在每块不透明的部分上添加触摸侦听器。希望可以帮助您获得更多帮助您也可以尝试在此处发布图片，以便我们可以更好地看到您想要实现的目标..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:24:22.803

@user1716538：你为什么不使用 png 图片？您可以使用 png 图像删除图像中不需要的部分，因此图像的这些部分不会发生单击事件。

# php - 如何使用 token_get_all() 查找范围级别？

> ID：12705026
> 
> 赞同：2
> 
> 时间：2012-10-03T08:57:10.360
> 
> 标签：php, parsing, tokenize

我正在使用 token_get_all() 对 php 项目进行一些静态分析。

如何找到以下内容的范围级别：

*   查找当前 T_FUNCTION 是否仍在被解析的 T_CLASS 中
*   知道 T_VARIABLE 的范围是否已经结束

我应该计算'{'和'}'字符吗？这是一种安全的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:02:46.190

这`token_get_all()`正是包装所说的：它是一个标记器。

这意味着您必须自己跟踪范围，通过跟踪打开和关闭大括号；我能想到的最简单的方法是构建一个[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)。

顺便说一句，这个函数已经处理了解析错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:01:24.113

您最好使用解析器来构建语法树，否则边缘情况将变得非常复杂（PHP 是一种非常棘手的语言，可以嵌入其他语言）。

一个快速的谷歌想出了：[PHP-Parser](https://github.com/nikic/PHP-Parser)

使用语法树，您可以更轻松地识别函数或变量的范围，但仍需要进行一些分析。

# asp.net-mvc - 将用户名传递给 ASP.NET MVC 4 中的 Web Api 方法

> ID：12705031
> 
> 赞同：4
> 
> 时间：2012-10-03T08:57:40.180
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在使用带有 Web Api 的 ASP.NET MVC 4

我有以下 ApiController。

```
public class ProductsController : ApiController
{
    public List<Product> GetProducts()
    {
        return _productService.GetAllProducts();
    }

    public List<Product> GetProductsFromId(string username)
    {
        return _productService.GetProductsFromUsername(username);
    }
} 
```

现在，如果您在这里看到第二个操作`GetProductsFromId(string username)`，我需要传递我之前`User.Identity.Username`用来获取用户名的用户名（即在从 MVC 3 升级之前）。

在这种情况下我应该如何处理。

我如何传递用户名？有什么我可以做的。

此外，我不想`User.Identity.Username`在方法内部使用，`GetProductFromId(string username)`因为它会破坏使用 web api 的整个目的，并且也无法测试。

请指导我帮助我。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T08:59:14.147

> 此外，我不想在 GetProductFromId(string username) 方法中使用 User.Identity.Username，因为它会破坏使用 web api 的全部目的，并且也无法测试。

这正是您应该使用的：

```
[Authorize]
public List<Product> GetProductsFromId()
{
    string username = User.Identity.Name;
    return _productService.GetProductsFromUsername(username);
} 
```

注意`[Authorize]`属性。根据您使用的授权方案，`User.Identity`将填充不同的内容。例如，如果您启用了表单身份验证，那么用户名显然来自客户端在调用操作时需要传递的表单身份验证 cookie。例如，如果您使用基本身份验证而不是表单身份验证，您还可以编写自定义处理程序。我在[这里写了一个例子](https://stackoverflow.com/a/11536349/29407)。

这不会破坏单元测试的任何目的。这种方法是完全可单元测试的。[ApiController](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller%28v=vs.108%29.aspx)的[User](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller.user%28v=vs.108%29.aspx)属性是一个可以在单元测试中简单地模拟的属性。例如起订量：`IPrincipal`

```
// arrange
var sut = new ProductsController();
var user = new Mock<IPrincipal>();
var identity = new Mock<IIdentity>();
user.Setup(x => x.Identity).Returns(identity.Object);
identity.Setup(x => x.Name).Returns("john");
Thread.CurrentPrincipal = user.Object;

// act
var actual = sut.GetProductsFromId();

// assert
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T11:20:35.897

这是我正在做的事情的基本大纲。

我使用“用户名”来获取 IPrincipal。

我使用 MemoryCache/ObjectCache 来访问数据库，每 60 分钟一次。如果您需要“每次登录”而不是“每个用户”..（如果您的主体定义经常更改或者您需要为可能性编码，只需将缓存键更改为基于用户名和会话的内容。

请注意，我不能忍受在任何不是您孩子的足球俱乐部的应用程序中使用“IsInRole”。（我没有孩子，这是一个比喻）。

```
namespace MyProduct.MyApplication.WebServices.Controllers
{
    /// <summary>
    /// Performs operations with "Item" list
    /// </summary>
    public class MyItemController : BaseApiController
    {

        [Authorize] 
        public IEnumerable<Item> Get()
        {

            string username = User.Identity.Name;

            IPrincipalCache cache = new PrincipalCache(); /* use injection - Unity, this hard coding for demo purposes */
            MyCustomPrincipal princ = cache.GetMyCustomPrincipal(username);

            if ( ! princ.HasRight("USER_CAN_GET_ITEMS"))  /* Note my MyCustomPrincipal has this method...out of the "box" you'll have "IsInRole('MyRoleName') */
            {
                return null;
            }

            return itemsService.GetItems(); }

}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Caching;
using System.Web;

using MyProduct.MyApplication.Infrastructure.Security;

namespace MyProduct.MyApplication.WebServices.Security.Caching
{
    public interface IPrincipalCache
    {
        MyCustomPrincipal GetMyCustomPrincipal(string userName);
    }

    public class PrincipalCache : IPrincipalCache
    {
        public MyCustomPrincipal GetMyCustomPrincipal(string userName)
        {
            string cacheKey = "MyCustomPrincipalCacheKey" + userName;
            MyCustomPrincipal cachedOrFreshPrincipal = GetFromCache<MyCustomPrincipal>(cacheKey, () =>
            {
                return new MyCustomPrincipal(); /* Go to the method/datalayer/ and hydrate a MyCustomPrincipal */
            });
            return cachedOrFreshPrincipal;
        }

        private TEntity GetFromCache<TEntity>(string key, Func<TEntity> valueFactory) where TEntity : class
        {
            ObjectCache cache = MemoryCache.Default;
            var newValue = new Lazy<TEntity>(valueFactory);
            CacheItemPolicy policy = new CacheItemPolicy { AbsoluteExpiration = DateTimeOffset.Now.AddMinutes(60) }; /* Most people will do stuff for less than one hour I guess */
            //The line below returns existing item or adds the new value if it doesn't exist
            var value = cache.AddOrGetExisting(key, newValue, policy) as Lazy<TEntity>;
            return (value ?? newValue).Value; // Lazy<T> handles the locking itself
        }
    }
} 
```

# c# - 无边界控制台应用程序

> ID：12705038
> 
> 赞同：-4
> 
> 时间：2012-10-03T08:57:54.347
> 
> 标签：c#, cmd, console-application

我想知道如何获得无边界 C#.NET 控制台应用程序。我的应用程序运行良好，但我不希望我的应用程序看起来像一个正常的表单，带有最小化、最大化和关闭按钮以及左上角的图标和文本。

所以，我想知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:01:47.503

据我所知，您将需要使用 Win32 来更改控制台窗口的外观。这将意味着 DllImport 和很多复杂性，考虑到您的替代方案，这是完全不必要的：

如果您将应用程序重新创建为 WinForms 应用程序，则可以在主窗口中设置这些属性。然后在中间放一个文本框，让它停靠窗口，你正在模拟一个控制台。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T09:01:07.897

你不能，它甚至没有意义。由其输入和输出流表示的控制台是系统支持的资源，根本不需要由*控制台窗口*表示。例如，您的应用程序的输入和输出可以被重定向。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-31T05:30:06.913

假设您（出于某种原因）不能使用无边框 WinForm，而您绝对**必须**使用控制台窗口。好吧，你可以*让它*工作。

使用[此处类似问题](http://www.codeproject.com/Answers/417758/Removing-a-Window-Border-No-Winform)中的大部分代码，我们可以组合出一个可行的解决方案。

这是一个示例无边框控制台窗口：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Runtime.InteropServices;

namespace ConsoleBorderTest
{
    class Program
    {
        [DllImport("USER32.DLL")]
        public static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

        [DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
        static extern IntPtr FindWindowByCaption(IntPtr ZeroOnly, string lpWindowName);

        [DllImport("user32.dll")]
        static extern bool DrawMenuBar(IntPtr hWnd);

        [DllImport("user32.dll", EntryPoint = "SetWindowPos")]
        public static extern IntPtr SetWindowPos(IntPtr hWnd, int hWndInsertAfter, int x, int Y, int cx, int cy, int wFlags);

        [DllImport("user32.dll", SetLastError = true)]
        static extern bool GetWindowRect(IntPtr hwnd, out RECT lpRect);

        [DllImport("user32", ExactSpelling = true, SetLastError = true)]
        internal static extern int MapWindowPoints(IntPtr hWndFrom, IntPtr hWndTo, [In, Out] ref RECT rect, [MarshalAs(UnmanagedType.U4)] int cPoints);

        [DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
        public static extern IntPtr GetDesktopWindow();

        [StructLayout(LayoutKind.Sequential)]
        public struct RECT
        {
            public int left, top, bottom, right;
        }

        private static readonly string WINDOW_NAME = "TestTitle";  //name of the window
        private const int GWL_STYLE = -16;              //hex constant for style changing
        private const int WS_BORDER = 0x00800000;       //window with border
        private const int WS_CAPTION = 0x00C00000;      //window with a title bar
        private const int WS_SYSMENU = 0x00080000;      //window with no borders etc.
        private const int WS_MINIMIZEBOX = 0x00020000;  //window with minimizebox

        static void makeBorderless()
        {
            // Get the handle of self
            IntPtr window = FindWindowByCaption(IntPtr.Zero, WINDOW_NAME);
            RECT rect;
            // Get the rectangle of self (Size)
            GetWindowRect(window, out rect);
            // Get the handle of the desktop
            IntPtr HWND_DESKTOP = GetDesktopWindow();
            // Attempt to get the location of self compared to desktop
            MapWindowPoints(HWND_DESKTOP, window, ref rect, 2);
            // update self
            SetWindowLong(window, GWL_STYLE, WS_SYSMENU);
            // rect.left rect.top should work but they're returning negative values for me. I probably messed up
            SetWindowPos(window, -2, 100, 75, rect.bottom, rect.right, 0x0040);
            DrawMenuBar(window);
        }

        static void Main(string[] args)
        {
            Console.Title = WINDOW_NAME;
            makeBorderless();
            Console.WriteLine("Can you see this?");
            Console.ReadLine();
        }
    }
} 
```

这几乎是来自引用链接、[here](https://stackoverflow.com/questions/8364758/get-handle-to-desktop-shell-window)和[here](https://stackoverflow.com/questions/18034975/how-do-i-find-position-of-a-win32-control-window-relative-to-its-parent-window)的直接副本。我尝试获取表格的位置，但我做不到。我确实设法获得了大小，但是该位置为我返回了负值。

虽然不是很好，但它是一个无边框的控制台窗口。我真的建议只将文本框停靠在正常形式中。这是一张图片：[“您需要 10 声望才能发布图片”...](https://i.imgur.com/0iZ6ysI.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:08:42.413

我会设计一个具有所需外观（无边框）甚至黑色的控制台外观的 Windows 窗体应用程序，然后使其可移动

网址： [让无边界表单可移动？](https://stackoverflow.com/questions/1592876/c-sharp-make-a-borderless-form-movable)

# jdbc - 使用 Seam 的异步方法中的事务/数据库问题

> ID：12705043
> 
> 赞同：2
> 
> 时间：2012-10-03T08:58:07.790
> 
> 标签：jdbc, jboss, transactions, seam, quartz-scheduler

我对 Seam 2.2.2、JBoss 5.1、MySQL 5.1.5.1 和 MySQL JDBC 连接器 5.1.12 以及异步方法（使用石英）和 pojos 有一个奇怪的行为。

我有一个用于各种任务的 10 个异步线程池。它们通常工作正常，执行数据库查询和更新等。如果一个异步方法中有异常，它不会影响从同一线程调用的下一个异步方法。

但是我现在有一种情况，我在一个特定的线程中得到了这个异常：

```
 012-10-02 05:45:26,743 WARN  [][JDBCExceptionReporter] (er-4) SQL Error: 0, SQLState: null
2012-10-02 05:45:26,743 ERROR [][JDBCExceptionReporter] (er-4) Transaction is not active: tx=TransactionImple &lt; ac, BasicAction: 7f000001:b824:5069f752:15d status: ActionStatus.ABORT_ONLY &gt;; - nested throwable: (javax.resource.ResourceException: Transaction is not active: tx=TransactionImple &lt; ac, BasicAction: 7f000001:b824:5069f752:15d status: ActionStatus.ABORT_ONLY &gt;)
2012-10-02 05:45:26,743 INFO  [][DefaultLoadEventListener] (er-4) Error performing load command
org.hibernate.exception.GenericJDBCException: Cannot open connection
        at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:126)
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:114)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
        at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
        at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
        at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
        at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1573) 
```

在此之后，每次使用此线程（er-4）并执行查询时，我都会得到相同的异常。我怎样才能从中恢复，为什么会这样？这个线程调用什么方法无关紧要（它们用@Transactional注释）它们都因为GenericJDBCException而失败：无法打开连接。问题突然出现了。

我正在使用 db 连接池并在每次使用之前验证连接（来自部署描述符）：

```
 <!--pooling parameters-->
       <min-pool-size>5</min-pool-size>
       <max-pool-size>100</max-pool-size>
       <blocking-timeout-millis>5000</blocking-timeout-millis>
       <idle-timeout-minutes>15</idle-timeout-minutes>
       <prepared-statement-cache-size>50</prepared-statement-cache-size>
       <check-valid-connection-sql>select 1 from dual</check-valid-connection-sql> 
```

这是我的代码有问题吗？与接缝？老板？MySQL？JDBC MySQL 驱动程序？

有没有其他人遇到过类似的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-09T16:00:18.797

该问题是由进行批处理的方法引起的。它直接处理 UserTransaction 但不处理异常。

例如

```
UserTransaction userTx = null;
    try{
        log.info("Updating List from #0 on", startAt);

    userTx = (UserTransaction) org.jboss.seam.Component.getInstance("org.jboss.seam.transaction.transaction");
      userTx.setTransactionTimeout(10 * 60);  //set timeout to 60 * 60 = 3600 secs = 1 h
      userTx.begin();

      /*If entity manager is created before the transaction is started (ie. via Injection) then it must join the transaction */
      entityManager.joinTransaction();
    //DO STUFF
    userTx.commit();
    }catch(Exception e){
        e.printStackTrace();
        return false;
    } 
```

catch 语句应该包含一个 userTx.rollback() 否则该线程的事务将保持在不可用状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:04:49.687

连接是否闲置了一段时间（例如 8 小时）？

MySQL 在 8 小时后断开 TCP 连接（默认情况下；其可配置）。

您必须实现重新连接逻辑。

# django - django开发静态文件混淆

> ID：12705046
> 
> 赞同：1
> 
> 时间：2012-10-03T08:58:13.923
> 
> 标签：django, static

我不明白为什么以下是必要的：-

在我的网址中，

```
 url(r'^static/(?P<path>.*)$', 'django.views.static.serve',
    {'document_root': '/wamp/www/diary/static'}) 
```

如果我有，在 settings.py 中，

```
STATIC_URL = '/static/' 
```

未检索文件，但如果我将其更改为

```
STATIC_URL = '/xxx/' 
```

然后检索带有“/static/img.jpg”的图像文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:42:39.430

所以我的想法;;

```
STATIC_URL = '/static/' 
```

url 和 static_url；使用**django.views.static.serve**。

```
def serve(request, path, document_root=None, show_indexes=False): 
```

如果您使用的是 static_url 是模板标签

```
<img src="{{ STATIC_URL }}img/logo.png" /> 
```

或加载静态标签 == {{ STATIC_URL }}：

```
{% load static %} 
<img src="{% static 'img/logo.png' %}" /> 
```

使用网址：

```
url(r'^static/(?P<path>.*)$', 'django.views.static.serve',
{'document_root': '/wamp/www/diary/static'}) 
```

不是模板标签

```
<img src="/static/img/logo.png" /> 
```

硬路径“/静态/”；

我认为唯一的区别是使用 Template_tag django ；使用 Ngnix 和 apache config 静态文件配置..

# php - 为什么 Symfony2 中的会话数据为空以及如何访问它？

> ID：12705048
> 
> 赞同：2
> 
> 时间：2012-10-03T08:58:22.400
> 
> 标签：php, session, symfony

第三方 PHP 应用程序将数据存储在用户会话中（使用 PHPSESSID 的 cookie）。在这个应用程序中，`$_SESSION`变量包含所有这些数据。

在我的 Symfony2 应用程序中，`$_SESSION`它只包含一些 Symfony 数据（`_sf2_attributes`、`_security_secured_area`、`_sf2_flashes`等），而我没有看到来自其他应用程序的任何其他数据。

我`var_dump`在控制器中做了一个 $_SESSION 变量来检查这一点。使用 Symfony Session 对象显示相同的数据。这两个应用程序使用相同的域来存储 PHPSESSID cookie。

如何在我的 Symfony 应用程序中获取会话的所有数据？我希望在 2 个应用程序之间共享会话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T14:38:15.457

我终于解决了这个问题。Symfony 将其会话数据存储在它自己的目录中（`app/cache/[environment]/sessions`）。所以解决方案是设置默认会话路径`config.yml`：

```
framework:
    session:
        save_path: ~ 
```

这将设置默认路径（例如`/var/lib/php5`在 Linux 上），并且遗留应用程序会话数据可用于 Symfony 应用程序。

# node.js - 嵌入文档中的唯一键

> ID：12705052
> 
> 赞同：0
> 
> 时间：2012-10-03T08:58:41.513
> 
> 标签：node.js, mongodb, mongoose

我有以下模式：

在 User.js 中

```
var User = new schema({
  'name': {type: String},
  'email': {type: String},
  'gender': {type: String},
  'password': String,
  'salt': String,
});

//ensure name is unique
//The reason why I did not use index:{unique:true} is because it return
//ugly error message (err: 'E11000 duplicate key error index: test.users.$name_1  
//dup key: { : "test1" }')
User.path('name').validate(function(name, respond){
  var UserModel = mongoose.model("User");
  UserModel.findOne({name: name}, function(e, user){
    if(user) respond(false);
    else respond(true);
  });
}, 'Username Already in Use'); 
```

在 Discussion.js 中

```
var Discussion = new schema({
  'topic': {type: String},
  'description': {type: String},
  'datetime': {type: Date},
  'status': String,
  'user': [UserSchema]
}); 
```

当我保存与数据库中已存在的用户的新讨论时，我收到“用户名已在使用”错误消息。新用户应该有一个唯一的名称，而新讨论应该有一个现有用户。我该如何克服这个问题？

```
User.findOne({name: name}, function(err, user){
  var discussion = new Discussion();
  discussion.user.push(user);
  discussion.save();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:32:13.963

不要将整个`UserSchema`对象嵌入到讨论中，只需将您需要的关于用户的内容嵌入到讨论的上下文中，甚至只是用户的`_id`，这样您就可以根据需要使用[`populate`](http://mongoosejs.com/docs/populate.html). 不要复制比您需要的更多的数据。

例如：

```
var Discussion = new schema({
  'topic': {type: String},
  'description': {type: String},
  'datetime': {type: Date},
  'status': String,
  'user': [{_id: Schema.ObjectId, name: String}]
}); 
```

**或者**

```
var Discussion = new schema({
  'topic': {type: String},
  'description': {type: String},
  'datetime': {type: Date},
  'status': String,
  'user': [{type: Schema.ObjectId, ref: 'user'}]
}); 
```

# sharepoint - 是否可以更改资源 (.resx) 文件中的值？

> ID：12705057
> 
> 赞同：1
> 
> 时间：2012-10-03T08:58:57.543
> 
> 标签：sharepoint, sharepoint-2010, resources

我有一个带有功能的 SharePoint 2010 项目。如果此功能尚不存在，则此功能将在激活时创建一个 SPList。创建 SPList 时，Add() 方法返回一个 Guid。我想将此 Guid 存储在资源文件中，但我还没有找到执行此操作的方法。我知道如何从资源文件中获取项目，但不知道如何更新值。有没有办法做到这一点？如果不是，那么存储值的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:01:14.983

您不想使用资源文件来存储配置值 - 资源文件的目的是本地化字符串。

您应该使用以下之一：

*   SharePoint 属性包，例如`ListItem.Properties`或`SPWeb.AllProperties`
*   隐藏的 SharePoint“配置列表”
*   `web.config`存储您的`AppSettings`

在您的情况下，您想将列表 GUID 存储在某个地方，我建议将其存储在`SPWeb`属性包中，您以后可以使用`SPWeb.AllProperties['MyCustomListGUID']`

# android - ICS 中的确定/取消按钮顺序

> ID：12705058
> 
> 赞同：9
> 
> 时间：2012-10-03T08:59:02.787
> 
> 标签：android, android-layout, android-button

从 SDK 14 开始，首选顺序是取消/确定，而不是之前的确定/取消。我不打算讨论这是一个好主意还是坏主意，这不是我的问题的主题。

问题是 ADK 通过为您提供以下 Lint 鼓励您对 SDK >= 14 的设备使用新订单

> 布局对 API >= 14 使用错误的按钮顺序：创建具有相反顺序的 layout-v14/layout.xml 文件：取消按钮应位于左侧（为“@string/send | Cancel”，应为“Cancel | @字符串/发送“）

好的，我会坚持下去，这对我来说不是问题，我知道我应该遵循建议以避免惹恼用户。

但事情是这样的……在我的三星 Galaxy S II 上，在 ICS 上运行，系统界面本身似乎没有遵循新的顺序。以下是一些截图示例：

![在此处输入图像描述](../Images/f75773a4d1fa08a36596709174f704d1.png)

订单是旧的。请注意，我使用手机的官方 ICS 版本（不是自定义 ROM）。我的 Galaxy Tab 2（也运行官方 ICS）上的顺序相同。在某些对话框中，顺序是正确的（取消/确定）我看到的唯一区别是主题（使用 Holo 主题的对话框具有新顺序；其他的，旧顺序）。这是来自设置（用于设置系统日期）和使用 Holo 的应用程序中的 DatePickerDialog 的屏幕截图：

![在此处输入图像描述](../Images/c60d181496bace2bafdad725e80a3a00.png)

这很令人不安。看起来按钮的顺序与主题相关而不与版本相关。还是只是三星没有遵循 Android 的设计模式？

我认为活动（当他们有确定/取消按钮时）也应该遵循相同的顺序。在这里，再次，在我的手机上，日历的 Create Event 活动的顺序错误（并且该活动不使用 Hole 主题）：

![在此处输入图像描述](../Images/b2c950f02366f8d9ec5aa6f2d25f57a2.png)

无论如何，我将在我的应用程序中将 Holo 主题用于来自 Honeycomb 的设备，因此我将保持 SDK>=14 的新顺序。我只是想了解这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:04:15.060

是的，按钮交换非常烦人，我最终点击取消按钮比确定按钮更多。但这是你能做的。要么创建你自己的自定义对话框，以便你控制哪个按钮出现在哪里，要么让用户通过阅读来弄清楚。作为程序员，我们唯一需要做的是，当按下取消时，它实际上取消了，而不是 OKays！为了更清楚地说明为什么要交换 Ok-Cancel，这是为了避免与 Apple 的专利侵权，因为他们也遵循 Ok-Cancel。因此，交换 Cancel-Ok 将意味着没有侵权（愚蠢，但可以节省 Google 百万！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T09:29:47.013

三星有一个奇怪的想法，即从 Android 2 到 Android 4.x 设备保持 Touchwiz 的外观和感觉。对我个人而言，这是关于三星 4.x ROM 的最烦人的事情，因为 ICS/JB UI 更好。它在对话框（使用您提到的 2.x 按钮排列）和选项卡（使用 2.x 选项卡而不是更好的 4.x 选项卡）中最为明显。

即使是较新的仅 4.x 设备，如 SGS3（假设也是刚刚发布的 Note 2）仍然具有这种荒谬的 Android 2 UI 组件移植。

我怀疑这对最终用户来说不是问题，但对于拥有许多设备并注意到差异的开发人员来说，这很烦人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T11:27:23.113

是的，按钮的顺序似乎与主题相关，而不是与版本相关。与布局“alert_dialog.xml”不同，“alert_dialog_holo.xml”将“button1”（正）放在右边，“button2”（负）放在左边。

布局由 com.android.internal.app.AlertController 确定：

```
public AlertController(Context context, DialogInterface di, Window window) {

    TypedArray a = context.obtainStyledAttributes(null,
            com.android.internal.R.styleable.AlertDialog,
            com.android.internal.R.attr.alertDialogStyle, 0);

    mAlertDialogLayout = a.getResourceId(com.android.internal.R.styleable.AlertDialog_layout,
            com.android.internal.R.layout.alert_dialog); 
```

Theme的属性“alertDialogStyle”指的是一个“AlertDialog”样式，它是一组描述AlertDialog主题的属性，属性“layout”可以指向一个布局资源，否则使用layout/alert_dialog。

在 android 源代码中，您可以看到“Theme.Holo”使用“AlertDialog.Holo”，后者又引用“layout/alert_dialog_holo”，而“Theme”使用不包含布局并默认为代码值的“AlertDialog”。

主题.xml：

```
<style name="Theme">
    <item name="alertDialogStyle">@android:style/AlertDialog</item>

<style name="Theme.Holo">
    <item name="alertDialogStyle">@android:style/AlertDialog.Holo</item> 
```

样式.xml：

```
<style name="AlertDialog">
    …
</style>

<style name="AlertDialog.Holo" parent="AlertDialog">
    …
    <item name="layout">@android:layout/alert_dialog_holo</item>
    …
</style> 
```

实际使用的主题似乎是由设备默认值定义的。

主题设备默认值.xml：

```
<style name="Theme.DeviceDefault" parent="Theme.Holo" >
    <item name="alertDialogStyle">@android:style/AlertDialog.DeviceDefault</item> 
```

样式_device_defaults.xml：

```
<style name="AlertDialog.DeviceDefault" parent="AlertDialog.Holo">
</style> 
```

我猜三星只是在这里设置了其他东西，以保持 Philio 所描述的外观和感觉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:20:59.940

也许是三星更改了 Galaxy S2 的 ROM。我觉得他们在定制方面有点臭名昭著。过去，我在 SGS2、xCover 等的 ROM 中也遇到过一些核心蓝牙操作的问题。所以如果它只发生在三星设备上，我不会感到惊讶 :)

# devexpress - 如何在devexpress报告中传递参数

> ID：12705080
> 
> 赞同：4
> 
> 时间：2012-10-03T09:00:15.333
> 
> 标签：devexpress, parameter-passing, xtrareport

我在 Windows 应用程序中使用 Devexpress XtraReport 进行报告。我在我的 XtraReport1 中设置了一个参数 param1，其类型为字符串，并使用以下代码传递参数。

```
private void button1_Click(object sender, EventArgs e)        
{
    XtraReport1 report = new XtraReport1();            
    report.Parameters["param1"].Value = "kashif";
    report.Print();
} 
```

当我按下 button1 时，出现以下窗口并询问我 param1 值已经在其中显示了“kashif”，按钮“提交”和“重置”我的问题是：我不希望这个窗口在我按下 button1 时打开我想直接在其中传递“kashif”而不提示我输入 param1 值。 ![测试图像](../Images/17312af8a9e4fd44712dde3bf2994587.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T09:11:32.053

从他们这里的文档如何：[静默传递参数值](http://documentation.devexpress.com/#XtraReports/CustomDocument5210)

`Add a parameter to a report, set the parameter's Modifiers property to Public, and disable the parameter's Parameter.Visible property. When there are no visible parameters in a report, their values are passed "silently" (without exposing the Parameters UI to end-users).`

```
private void button1_Click(object sender, EventArgs e) 
{
    // Create a report instance.
    XtraReport1 report = new XtraReport1();

    // Obtain a parameter, and set its value.
    report.parameter1.Value = 30;

    // Hide the Parameters UI from end-users.
    report.parameter1.Visible = false;

    // Show the report's print preview.
    report.ShowPreview();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-25T09:53:37.940

你可以喜欢这个**（Asp.net Mvc Razor）

```
Invoice report = new Invoice();

public ActionResult InvoiceViewerPartial() {
using (CrmDbContext db = new CrmDbContext()) {
    report.DataSource = db.InvoiceItem.ToList();
}
    report.Parameters["InvoiceId"].Value = "Inv0003";                
    return PartialView("_InvoiceViewerPartial", report);
} 
```

# magento - Magento。将访客商店选择保存在 cookie 中

> ID：12705087
> 
> 赞同：1
> 
> 时间：2012-10-03T09:00:50.517
> 
> 标签：magento, cookies, store, choice, visitor-pattern

我需要检查访问者是否是第一次访问网站并显示带有国家选择（商店）的块。然后我需要将访问者的选择保存在 cookie 中（我只是认为将其保存在 cookie 中是正确的）。也许有人这样做并且\或可以提供帮助？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:05:56.147

当用户登陆页面时，检查是否设置了 cookie，如果它根据 cookie 值重定向到商店视图。

我对magento很陌生，所以可能有更好的方法来做到这一点，但我自己也需要类似的东西。

当用户登陆列出所有商店视图的页面时，我在弹出窗口中有一个选择框（这是在 index.php 中，仅在未设置 cookie 时显示），在更改提交的表单的值时，我然后在 head.php 文件的底部执行以下操作

```
 if(isset($_POST['selectbox'])){
        $storeId = $_POST['selectbox'];
        $store_url = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB).$storeId;
        $cookie = Mage::getModel('core/cookie');
        $period = time()+86400;
        $cookie->set('country', $storeId,$period, '/');

        Mage::app()->getResponse()->setRedirect($store_url);
    } 
```

因此，在提交表单后，我获取了商店代码值并设置了一个名为 country 的 cookie，然后我将用户重定向到特定的商店视图。

然后我在此代码下再次检查以查看是否设置了国家/地区 cookie（下次用户访问该站点时）

```
 if(isset($_COOKIE['country'])){
        $storeId = $_COOKIE['country'];
        $magento_store_id = Mage::app()->getStore()->getCode();
        $redirect_to = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB).$storeId;

    if($storeId != $magento_store_id)
     {   
       echo "<script type='text/javascript'>window.location.href='".$redirect_to."';</script>";
     } 
```

我检查了当前的商店代码是否与 cookie 中存储的值不相等，如果不相等，则将该用户重定向到正确的商店视图。由于标头已经输出错误，我不得不使用 javascript 重定向..

希望这会给您一些想法以及如何使用cookies..但是就像我说的那样，我想有更好的方法来做到这一点。老实说，我很高兴自己看到正确的做法，这样我就可以利用它。

# windows-phone-7 - WP7后台音频播放器播放

> ID：12705097
> 
> 赞同：1
> 
> 时间：2012-10-03T09:01:13.793
> 
> 标签：windows-phone-7, audio

在[后台音频播放器示例架构](http://msdn.microsoft.com/en-us/library/hh394039%28v=vs.92%29.aspx)中，BackgroundAudioPlayer 用于向 Zune 媒体队列发送命令，并且可以由 Application UI 和 BackgroundPlayerAgent 使用

但是，当我打电话时

```
BackgroundAudioPlayer.Instance.Track = audioTrack1;

BackgroundAudioPlayer.Instance.Play() 
```

在应用程序 UI 中，它不播放。

似乎该`Play`方法仅适用于代理。

这是为什么 ？

# php - API客户端认证和数据加密

> ID：12705102
> 
> 赞同：0
> 
> 时间：2012-10-03T09:01:23.553
> 
> 标签：php, apache, api, authentication, encryption

我正在尝试找到一个合理的解决方案来通过 API 系统在客户端和服务器之间强制执行身份验证。然而，API 本身不是我的问题，我的问题是浏览器通常支持 cookie 和其他让服务器知道它是谁以及它在做什么的方式，但在任何情况下编写的自定义应用程序不一定总是如此可能的语言。

我看过其他一些问题，答案很有用，例如： [客户端 JavaScript 应用程序和服务器端 HTTP API 之间的身份验证？](https://stackoverflow.com/questions/4642764/authentication-between-client-side-javascript-application-and-server-side-http-a)

不幸的是，我已经想到了这一点，但它并没有实现我所追求的安全级别。我需要建议的是在实现（或可能模拟）一种可在服务器到客户端脚本上使用的 SSL 时采取的方法，其中服务器和客户端不一定支持 SSL。

同时，这需要用于识别客户端。

总而言之，我需要实现一个会话保持系统和一个可以与 Apache 和 PHP 一起使用的数据加密系统，以及一个在任何设备上运行的以任何语言编写的客户端。

对不起，如果这个问题有点啰嗦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:18:17.477

如果不求助于 SSL/TLS，您无法合理地在浏览器和客户端之间获得安全系统。原因是无法信任来自服务器或客户端的信息。由于客户端从服务器运行不受信任的代码，因此您也不能信任页面内的任何 JavaScript 等。

缺少的是一种身份验证方法。SSL/TLS 通过在浏览器中使用受信任的证书存储来提供此功能。不幸的是，没有（标准化的）方法可以通过脚本语言使用可信存储。您可以尝试使用签名的 Java Applet，但我认为这种方法不会让您受欢迎。

所以基本上你应该求助于使用 SSL/TLS。我不认为有很多浏览器不支持 SSL/TLS，而那些不支持它的浏览器也不太可能支持高级身份验证方法。

# ios - 我可以从 Xcode 将 iOS 5.1 SDK 应用程序部署到运行 iOS 6.0 的设备吗？

> ID：12705103
> 
> 赞同：1
> 
> 时间：2012-10-03T09:01:31.457
> 
> 标签：ios, xcode, ios6, ios5

我最近将我的 iPad 升级到 iOS 6.0，但我的 Xcode 安装在版本 4.4.1 和 iOS SDK 5.1，因为我们即将打包客户端应用程序并且不想冒险切换 SDK/iOS 版本发展后期。

现在这个 iPad 不再以其全名显示在构建目标列表中，它只是显示“iOS 设备”。当我尝试在 iPad 上进行部署时，它会通知我：*“Xcode 无法使用所选设备运行。兼容的 iOS 版本没有可用的预置 iOS 设备。将 iOS 设备连接到最新版本的 iOS 以运行您的应用程序或选择一个 iOS 模拟器作为目的地。* ” 主办方还告诉我 iPad 上的 iOS 版本与 Xcode 中的任何 SDK 版本都不匹配。

这都是正确的，但**我不应该能够将 5.1 应用程序部署到运行 6.0 的设备**吗？我之前使用 5.1 构建的应用程序继续在此设备上运行良好，为什么新应用程序不应该这样做呢？我有一个奇怪的问题，还是 Xcode 中的这种正常行为？

谢谢！

**编辑**：后续问题：如果我升级我的 Xcode 版本来解决这个问题，我仍然可以为 5.1 SDK 构建并且绝对确定该应用程序将在我的客户端的 5.1 设备上运行吗？这是我主要关心的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:17:01.887

您仍然可以部署较旧的应用程序，但不能使用 Xcode。相反，您需要创建一个 ipa 存档并通过 iTunes 或使用诸如 Testflight 或其他一些无线 (OTA) 分发的工具进行安装。

或者，是的，您可以升级您的 Xcode 版本。但是，您可能会遇到更多问题，因为您使用的第三方库可能尚未针对 armv7s 进行编译。所以你需要升级它们。如果是这种情况，您将从链接器中看到此错误：

```
ld: file is universal (3 slices) but does not contain a(n) armv7s slice 
```

有关该特定问题的更多信息，请参见 stackoverflow 的其他地方，例如

[文件是通用的（三个切片），但它不包含 iOS 上静态库的（n）ARMv7-s 切片错误，无论如何要绕过？](https://stackoverflow.com/questions/12402092/file-is-universal-3-slices-but-does-not-contain-an-armv7s-slice-error-for-st)

当然，这些都不会阻止您在模拟器中工作。

然而，在设备上运行，总而言之，一个对我有用的好解决方案是下载 Xcode 4.5 dmg。由于 Xcode 已经可以从 App Store 获得，它现在是一个独立的包。您现在可以在同一台机器上愉快地共存多个版本。

我这样做并将 Xcode 4.5 用于新的 iOS 6 内容，同时继续使用 4.4 处理旧应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:06:14.000

首先，尝试转到 Xcode Organizer（右上角的小图标），看看是否可以启用您的设备进行开发（单击设备，然后应显示其详细信息）。这有可能会下载所有必要的东西，以允许 Xcode 使用您较新的 iOS 设备（调试符号和类似的东西）。

如果这不起作用，那么您描述的问题只是与您的开发环境太旧并且无法管理运行 iOS6 的设备有关。无论如何，这不会阻止您的 5.1 应用程序部署在运行 iOS6 的设备上；唯一的事情是你不能从你的旧 Xcode 中做到这一点。

如果所有其他方法都失败了，您可以尝试通过 iTunes 手动安装 5.1 应用程序，就像开发团队外部的任何测试人员都会做的那样。这应该有效。

# php - MAGENTO：更新后如何重新索引数据？

> ID：12705106
> 
> 赞同：4
> 
> 时间：2012-10-03T09:01:39.647
> 
> 标签：php, magento, reindex

我正在使用以下脚本来更新我的库存。更新后我想清理缓存并重新索引数据，因为`qty`产品页面中没有设置更新的值。我怎样才能做到这一点？

```
$mageFilename = '../app/Mage.php';
require_once $mageFilename;
Mage::setIsDeveloperMode(true);
ini_set('display_errors', 1);
umask(0);
Mage::app('admin');
Mage::register('isSecureArea', 1);
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

set_time_limit(0);
ini_set('memory_limit','1024M');

/***************** UTILITY FUNCTIONS ********************/
function _getConnection($type = 'core_read'){
    return Mage::getSingleton('core/resource')->getConnection($type);
}

function _getTableName($tableName){
    return Mage::getSingleton('core/resource')->getTableName($tableName);
}

function _getAttributeId($attribute_code = 'price'){
    $connection = _getConnection('core_read');
    $sql = "SELECT attribute_id
                FROM " . _getTableName('eav_attribute') . "
            WHERE
                entity_type_id = ?
                AND attribute_code = ?";
    $entity_type_id = _getEntityTypeId();
    return $connection->fetchOne($sql, array($entity_type_id, $attribute_code));
}

function _getEntityTypeId($entity_type_code = 'catalog_product'){
    $connection = _getConnection('core_read');
    $sql        = "SELECT entity_type_id FROM " . _getTableName('eav_entity_type') . " WHERE entity_type_code = ?";
    return $connection->fetchOne($sql, array($entity_type_code));
}

function _checkIfSkuExists($sku){
    $connection = _getConnection('core_read');
    $sql        = "SELECT COUNT(*) AS count_no FROM " . _getTableName('catalog_product_entity') . " WHERE sku = ?";
    $count      = $connection->fetchOne($sql, array($sku));
    if($count > 0){
        return true;
    }else{
        return false;
    }
}

function _getIdFromSku($sku){
    $connection = _getConnection('core_read');
    $sql        = "SELECT entity_id FROM " . _getTableName('catalog_product_entity') . " WHERE sku = ?";
    return $connection->fetchOne($sql, array($sku));
}

function _updateStocks($data){
    $connection     = _getConnection('core_write');
    $sku            = $data[0];
    $newQty         = $data[1];
    $productId      = _getIdFromSku($sku);
    $attributeId    = _getAttributeId();

    $sql            = "UPDATE " . _getTableName('cataloginventory_stock_item') . " csi,
                       " . _getTableName('cataloginventory_stock_status') . " css
                       SET
                       csi.qty = ?,
                       csi.is_in_stock = ?,
                       css.qty = ?,
                       css.stock_status = ?
                       WHERE
                       csi.product_id = ?
                       AND csi.product_id = css.product_id";
    $isInStock      = $newQty > 0 ? 1 : 0;
    $stockStatus    = $newQty > 0 ? 1 : 0;
    $connection->query($sql, array($newQty, $isInStock, $newQty, $stockStatus, $productId));
}
/***************** UTILITY FUNCTIONS ********************/

$csv                = new Varien_File_Csv();
$data               = $csv->getData('stocks.csv'); //path to csv
array_shift($data);

$message = '';
$count   = 1;
foreach($data as $_data){
    if(_checkIfSkuExists($_data[0])){
        try{
            _updateStocks($_data);
            $message .= $count . '> Success:: Qty (' . $_data[1] . ') of Sku (' . $_data[0] . ') has been updated. <br />';

        }catch(Exception $e){
            $message .=  $count .'> Error:: while Upating  Qty (' . $_data[1] . ') of Sku (' . $_data[0] . ') => '.$e->getMessage().'<br />';
        }
    }else{
        $message .=  $count .'> Error:: Product with Sku (' . $_data[0] . ') does\'t exist.<br />';
    }
    $count++;
}
echo $message; 
```

我正在尝试这个，但更新很慢。我之前执行过这个脚本`echo $message.`

```
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
$processes->walk('reindexAll');
$processes->walk('setMode', array(Mage_Index_Model_Process::MODE_REAL_TIME));
$processes->walk('save'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:24:38.963

使用以下代码在根文件夹中创建一个文件并从[http://www.domain.com/indexing.php等浏览器运行它](http://www.domain.com/indexing.php)

```
<?php

// when you get status "Processing" instead of "Ready" in your index management run    this script and it's working fine
 // change the index order as per your requirement currently it's 7 for Catalog Search Index  you can set as per your requirement

 require_once 'app/Mage.php';
 umask( 0 );
 Mage :: app( "default" );

 $indexingProcesses = Mage::getSingleton('index/indexer')->getProcessesCollection(); 
 foreach ($indexingProcesses as $process) {
  $process->reindexEverything();
}

?> 
```

或将此代码放入您的代码中

```
 $indexingProcesses = Mage::getSingleton('index/indexer')->getProcessesCollection(); 
 foreach ($indexingProcesses as $process) {
  $process->reindexEverything();
} 
```

愿这对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:27:59.433

也许在您认为合适的时候使用 cron (help: [link 1](http://www.jnorton.co.uk/blog/setting-magento-cron-system) , [link 2](http://www.jnorton.co.uk/blog/how-correctly-configure-magento-cron-job) , [link 3](http://blog.storybloks.com/2011/03/07/create-cronjob/) ) 运行。`/shell/indexer.php`

索引确实需要一段时间。您经历的缓慢更新是自然的。当您从后端更新索引时，也会发生同样的事情，毕竟这是相同的过程。

至于让 cron 与您的设置一起工作，我建议您找到一些教程，因为它在不同的环境中可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:23:11.213

你应该尝试`reindexEverything()`从`Mage_index_Model_Process`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T11:09:30.587

给出的答案是两个有效的解决方案，这是第 3 个解决方案，在使用数以万计的产品时可能会变得有趣。

如果您有很多产品，重新索引可能会花费一些日志时间，这里有两种方法可以减少它：

1.  使用[magmi](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_Wiki)进口商。第一个原因：它可以做你的脚本做的事情，你可以用 magmi 替换它。我将它与 magento 1.7.0.2 一起使用。第二个原因：它有一个动态[索引器](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=On_the_fly_indexer)，它会自动更新 url_rewrites 和 category_products 索引，即使您更新所有产品，它仍然比完整的重新索引更快。

2.  Magento 可以重新索引单个产品，这比完全重新索引更快，尤其是在您进行增量导入时。我为 products_price_index 做这个

    ```
    Mage::app('admin')->setUseSessionInUrl(false);
    Mage::getConfig()->init();
    $product_indexer_price = Mage::getResourceSingleton('catalog/product_indexer_price');
    $product_indexer_price->reindexProductIds(array($this->m_products[$res['products_id']])); 
    ```

# java - 为什么 java 7 中没有 Files.readAllLines(String path)？

> ID：12705111
> 
> 赞同：5
> 
> 时间：2012-10-03T09:02:03.957
> 
> 标签：java, java-7, nio2

我正在尝试学习`nio 2`Java 7 中的包，但我偶然发现了该`Files.readAllLines(Path p, Charset cs)`方法。我觉得它非常有用，但我认为应该有一个没有`cs`参数的版本，就像：

```
 public static List<String> readAllLines(String path)
    throws IOException
{ return readAllLines(Paths.get(path), Charset.defaultCharset());} 
```

我确信大多数时候无论如何都会使用默认字符集调用该方法，所以为什么没有快捷方式。关于字符集我有什么遗漏可以证明没有这种方法是合理的吗？我很惊讶，因为 Scala 有这个选项：

```
Source.fromFile("fileName").getLines 
```

所以我不明白为什么Java不应该。有什么看法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-03T09:06:24.467

> [...] 大多数情况下，无论如何都会使用默认字符集调用该方法，

并不真地。大多数情况下，它将使用您希望文件编码的字符集来调用它。通常现在它是 UTF-8：

```
Files.readAllLines("fileName", StandardCharsets.UTF_8) 
```

您的应用程序可以使用不同的默认字符编码在多个平台和操作系统上执行。您不希望您的应用程序因此而中断。

我认为这是一个不错的选择，可以纠正过去错误的设计决策。许多旧的 Java 方法使用默认系统编码，导致行为或应用程序不一致，例如在 Windows 和 Linux 之间。强制选择字符编码只会使您的应用程序更便携和更安全。

* * *

顺便说一句，因为您提到`io.Source`了类 - 请注意，它返回一个迭代器而不是`List<String>`像`Files`类那样。优点：文件被延迟加载，而不是一次全部加载到巨大的`ArrayList<String>`. 缺点：您必须手动关闭源代码（您不能在代码片段中这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:15:58.393

你得问设计者，但很可能他们和我一样认为将整个文件读入内存是不值得鼓励的。它无法扩展，并且引入了不必要的时间和空间成本。一次处理一行文件。

# android - 想要在登录完成时开始新的活动

> ID：12705113
> 
> 赞同：1
> 
> 时间：2012-10-03T09:02:05.693
> 
> 标签：android, facebook, android-activity

我想在 DialogListener 中完成 Facebook 登录后开始一个新活动。登录成功 没有错误出现，但活动没有开始。如果您需要 logcat，我可以给您发电子邮件。以下是我的代码。

**这是我的家庭活动**

```
package com.example.faceb;

import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.Facebook;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class HomeActivity extends Activity implements OnClickListener{
    private static final String TAG = "Facebook";
    private Button mLogin, mLogout, mShare;
    private Facebook facebook;
    private AsyncFacebookRunner abRunner;

    public boolean flag;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.activity_home);

        facebook = new Facebook("479652662068145");
        abRunner = new AsyncFacebookRunner(facebook);

        mLogin= (Button) findViewById(R.id.Login);
        mLogout= (Button) findViewById(R.id.Logout);

        mLogin.setOnClickListener(this);
        mLogout.setOnClickListener(this);     
    }

    @Override
    public void onClick(View v){
        int id = v.getId();
        switch(id){
            case R.id.Login:
                FacebookLoginDialog login = new FacebookLoginDialog(this);         
                facebook.authorize(this, login);
                if (func()==true)         
                {
                    Intent i = new Intent(this, SearchActivity.class);
                    startActivity(i);
                }
                break;
            case R.id.Logout:
                FacebookLogoutRequest logout = new FacebookLogoutRequest(this);
                abRunner.logout(this, logout);
                Toast toast = Toast.makeText(this, "You Are Logged Out", Toast.LENGTH_SHORT);
                toast.show();
                break;
            default:
                break;
        }
    }

    public static boolean func() {
        return true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_home, menu);
        return true;
    }
} 
```

**并按照我的 FacebookLoginDialog 类**

```
public class FacebookLoginDialog implements DialogListener{
    @Override
    public void onComplete(Bundle values) {
        HomeActivity.func();
    }

    @Override
    public void onFacebookError(FacebookError e) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onError(DialogError e) {
        // TODO Auto-generated method stub  
    }

    @Override
    public void onCancel() {
        // TODO Auto-generated method stub  
    }
} 
```

此对话框从我的`HomeActivity`. 请帮助我搜索了很多并尝试但无法解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:21:25.017

我认为您可以启动活动，而不是在单击按钮时启动对话框，而是要在登录后启动该活动。`onCreate()`然后在新活动的内部调用对话框。这样您就可以关闭对话框`onComplete()`并自动出现新屏幕。只需在活动中保留一个标志，并仅在登录成功时将其设置为 true。这样，如果在对话框关闭后标志为假，您就可以完成新活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:45:27.637

首先，您是否正确登录？

尝试以下操作：

1) 注释`onComplete()`方法中的代码，然后放一条日志消息。

2）您最好使用带有3个参数的授权方法`facebook.authorize(context,permission[],listener)`

3）检查您是否正确登录使用`facebook.isSessionValid() { // log a msg}`

您必须能够在上面的块中看到味精......然后才开始新的活动

4）此外，如果您可以发布您的 MainActivity ，我们可以更好地回答....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:05:12.050

在您的 onComplete 中使用 getApplicationContext 来获取上下文，您的问题将得到解决。代码会像

```
Intent i = new Intent(getApplicationContext(), SearchActivity.class);
    context.startActivity(i); 
```

我已经检查过了，它工作正常......

```
if(access_token != null) {
                    facebook.setAccessToken(access_token);
                }
                if(expires != 0) {
                    facebook.setAccessExpires(expires);
                }

                //if(!facebook.isSessionValid()) {

                facebook.authorize((Activity) ctx, new String[] {"publish_stream"}, new DialogListener() {
                    public void onComplete(Bundle values) {
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token", facebook.getAccessToken());
                        editor.putLong("access_expires", facebook.getAccessExpires());
                        editor.commit();

                        Toast.makeText(getApplicationContext(), "Posting To Your Wall !", Toast.LENGTH_SHORT).show();

                        Log.d("Graph Api", "Posting To Wall");
                        try {
                            Bitmap bitmap = BitmapFactory.decodeResource(ctx.getResources(),
                                R.drawable.icon);
                            ByteArrayOutputStream stream = new ByteArrayOutputStream();
                            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
                            byte[] bitMapData = stream.toByteArray();

                            String response = facebook.request("me");
                            Bundle parameters = new Bundle();
                            parameters.putString("message", "" + edt.getText().toString() + "...");
                            parameters.putByteArray("picture", bitMapData);
                            response = facebook.request("photos", parameters, 
                                    "POST");
                            Log.d("Tests", "got response: " + response);
                            if (response == null || response.equals("") || 
                                    response.equals("false")) {
                               Log.v("Post Error", "Error Occured While Posting in Facebook");
                               Toast.makeText(getApplicationContext(), "Error Occured While Posting in Facebook !", Toast.LENGTH_SHORT).show();

                            }
                            else {
                                Log.v("Post Success", "Posting Succesful in Facebook");
                                Toast.makeText(getApplicationContext(), "Posting Succesful in Facebook !", Toast.LENGTH_SHORT).show();
                                edt.setText("");
                            }

                        } catch(Exception e) {
                            e.printStackTrace();
                        }

                    }

                    public void onFacebookError(FacebookError error) {
                        Toast.makeText(getApplicationContext(), "Error Occured While Authenticating in Facebook !", Toast.LENGTH_SHORT).show();
                        Log.v("FaceBook Error", ""+error);                      
                    }

                    public void onError(DialogError e) {
                        Toast.makeText(getApplicationContext(), "DiaLogError Occured While Authenticating in Facebook !", Toast.LENGTH_SHORT).show();
                        Log.v("DialogError","" + e);
                    }

                    public void onCancel() {
                        Toast.makeText(getApplicationContext(), "You Have Canceled !", Toast.LENGTH_SHORT).show();
                    }
                });
                //}
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T12:15:00.790

您不能在 nonUIThread 中使用 Intent 触发活动。您应该在 onComplete() 中使用回调函数，通知用户注销或登录成功。然后在回调函数的帮助下调用 Activity 中的 Intent 之后..

# python - Python，从变量中的数据打开 TarFile

> ID：12705115
> 
> 赞同：1
> 
> 时间：2012-10-03T09:02:13.167
> 
> 标签：python, tar

我在 http post 请求的正文中得到一个 tar 文件，我想在不先将 tar 文件写入光盘的情况下提取内容。该文件曾经是一个 zip 文件，我可以这样做

```
zip = zipfile.ZipFile(StringIO(request.content.read()))
zip.extractall(some_path) 
```

我如何使用 tarfile.TarFile 做同样的事情？

我试过

```
tar = tarfile.open(fileobj = StringIO(self.request.content.read())) 
```

但收到错误消息：

```
file could not be opened successfully 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:06:06.553

使用`fileobj`参数来[`tarfile.open`](http://docs.python.org/library/tarfile.html)。

**编辑：**我尝试了以下方法：

```
# t.py
import tarfile
import StringIO

tarf = open('test.tar', 'rb')
tarstrio = StringIO.StringIO(tarf.read())
tar = tarfile.open(fileobj=tarstrio)

tar.list() 
```

它按预期工作。

# android - 处理 Android 中的所有鼠标事件

> ID：12705117
> 
> 赞同：17
> 
> 时间：2012-10-03T09:02:16.123
> 
> 标签：android, bluetooth, usb, mouse

好吧，这个问题相当简单——我如何在 android 2/3/4 中处理左/右/中键、滚轮和（！）悬停移动。

我一直在研究这个话题，发现了以下内容

*   在 api 14 中，我们几乎可以用花哨的新 MotionEvent 处理任何事情
*   自 api 12（仍然缺少蓝牙）（UPD OA backported to 2.3.4）以来，我们也有似乎与 USB 鼠标兼容的 Open Accessory
*   鼠标实际上在具有 ICS 和 Honeycomb 和 cyanogen 2.3.7 的平板电脑上运行良好，但就像在每个按钮上单击一样。我想知道有没有办法拦截鼠标消息。

请帮助我了解如何在每个版本的 android 中以最简单和正确的方式处理蓝牙和 USB 鼠标。或者说不可能。

UPD2：似乎只有 3.1+ 中的 USB 主机，而 USB 附件对这项任务无用

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-05T10:03:56.520

这些是我的发现：

对于 API 级别 < 9：

*   外部鼠标主按钮的处理方式与普通手指触摸一样。似乎没有办法检测到鼠标。
*   辅助按钮是通过一个`KeyEvent`with发送的`KeyEvent.KEYCODE_BACK`。无法区分实际的“返回”按下和辅助按钮按下。

对于 API 级别 9+：

*   添加了一种新方法`MotionEvent.getSource()`。我用这个来检测输入是否来自鼠标。
*   辅助按钮仍通过`KeyEvent`with调度`KeyEvent.KEYCODE_BACK`。在某些设备上`KeyEvent.getSource()`返回`InputDevice.SOURCE_MOUSE`，因此辅助按钮检测在某些情况下有效。

对于 API 级别 12+：

*   `OnGenericMotionListener`已添加。我用这个来检测鼠标移动`ACTION_HOVER_MOVE`和滚轮变化`ACTION_SCROLL`。

对于 API 级别 14+：

*   新方法`MotionEvent.getButtonState()`。我跟踪这个以区分在`MotionEvent.getActionMasked()`is`ACTION_MOVE`或.`ACTION_DOWN``ACTION_UP`

我没有研究过 Api Level 15/16 或工具类型，因为我能够使用上面描述的内容跟踪所有鼠标事件。如果有人有其他信息或者我错过了 15/16/tooltypes，那将会很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:25:31.173

好的。我想我有一个线索。我已经阅读[了有关 android](http://developer.android.com/about/index.html) 3.x/4.x 的亮点并意识到......

1.  我们可以在 android 3+ 中使用鼠标，在旧版本中，鼠标是特定于设备的

2.  我们可以从任何来源（BT 或 USB）拦截已识别的鼠标事件...

2.1。...滚动或悬停移动在 3.1+ 中 onGenericMotionEvent

2.2\. ... 主要、次要和三次按钮以及在 android 4.0+ 中悬停进入/离开（最后是 TOOL_TYPE_MOUSE 常量）

另一种选择是在主机模式下从蓝牙套接字或 USB 解析相当低级的数据。

我对吗？仍然想知道是否有人有更好的解决方案。

# java - 如何编写 Solr 插件？

> ID：12705118
> 
> 赞同：4
> 
> 时间：2012-10-03T09:02:21.790
> 
> 标签：java, plugins, solr

我正在尝试向 Solr 编写插件，例如在索引期间会更改字段的值

```
<str name="user">w34m;adam</str> on <str name="greeting">adam</str> 
```

但我不知道要使用哪些类以及一般情况。怎么做？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:51:07.033

通过在 Solr 中扩展[UpdateHandler](http://wiki.apache.org/solr/SolrPlugins#UpdateHandler)类，您可以更改索引算法。

另请查看[SolrPlugins](http://wiki.apache.org/solr/SolrPlugins)页面以了解其他插件开发。

# objective-c - 使子视图在 html 中表现为浮动作品

> ID：12705123
> 
> 赞同：0
> 
> 时间：2012-10-03T09:02:37.907
> 
> 标签：objective-c, ios, xcode, cocoa-touch, ipad

我在主视图中有一个视图网格。当我改变 iPad 的方向时，我希望视图向左（和向上）浮动并填充额外的空间。![用户界面，肖像模式](../Images/7c88758881d99e4cb85142d82fb6bb30.png)

![横向模式，我希望它看起来如何](../Images/85c33085782e9d2e8aa14fbc0ae1ce9d.png)

我怎样才能做到这一点？
我对核心动画和可可触感非常陌生。因此，任何关于从哪里开始的指示也将非常有帮助。

PS：由于某种原因，我似乎无法在此处上传屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:32:47.910

我`layoutSubViews:`最终使用了使视图按照我想要的方式运行。尽管它没有提供与 html 中的 float 一样具体的行为。它为您重新排列视图的方式提供了很大的灵活性。尽管要指定视图的确切位置，但它涉及大量代码。但最终，您可以使用此方法将子视图准确地放在他们想要的位置，因为在所有可能的布局更改机会期间，都会调用此方法，并且我可以指定视图的位置。

# mysql - AWS RDS 的 Mysqldump

> ID：12705129
> 
> 赞同：3
> 
> 时间：2012-10-03T09:02:56.613
> 
> 标签：mysql, amazon-web-services

我想备份 RDS MYsql 数据库。我目前正在运行一个小实例。我需要获取 sqldump 的过程，但我的问题是 RDS 在获取 sqldump 时是否会冻结，因为在其生产过程中会发生许多读/写操作。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:34:21.980

要回答确切的问题，“RDS 在执行 sqldump 时是否冻结”：

如果您希望备份 RDS 使用情况，我建议您使用 RDS 快照。在这种情况下，单可用区数据库实例上会发生短暂的 I/O 冻结，通常持续几秒钟。数据库需要冻结到避免损坏。如果您使用 mysqldump 之类的外部转储实用程序，它会在转储表之前使用读锁锁定您的表。根据您的存储引擎，更新（可能还有选择）将排队等待转储完成之后它解锁了桌子。

如果您不确定，您可以自己阅读锁定它们

`flush tables with read lock;`

然后在转储完成后解锁它们。

`unlock tables;`

# wcf - 将 asmx 移植到 WCF 后清理配置？

> ID：12705130
> 
> 赞同：1
> 
> 时间：2012-10-03T09:03:02.557
> 
> 标签：wcf, web-services, web-config, asmx

我最近通过使用 VS 2010 添加了一个 .svc 将旧的 asmx Web 服务更改为 WCF Web 服务，它在 web.config 中添加了必要的 WCF 内容。asmx 文件已被删除并重写了服务类。
现在我想从 asmx 的东西中清除我的配置，但我不知道现在可以删除 web.config 中的哪些部分。
在某处是否有仅 asmx 的部分列表？
或者是否有 WCF 唯一需要的部分列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:41:44.063

是的，有一个 WCF 使用的配置部分的列表，您的服务和客户端的几乎所有内容都位于**ServiceModel**部分中。有关完整概述，请参阅[system.serviceModel MSDN 文章](http://msdn.microsoft.com/en-us/library/ms731354.aspx)。以下是该部分允许的第一级子元素的列表：

```
<behaviors>
<bindings>
<client>
<comContracts>
<commonBehaviors>
<diagnostics>
<extensions>
<protocolMapping>
<routing>
<serviceHostingEnvironment>
<services> 
<standardEndpoints> 
```

当然，WCF 可能依赖于其他一些 Web/应用程序配置部分，例如，如果您定义了 TraceListeners 等。

# php - 安全地发送表单数据而不是使用 post

> ID：12705138
> 
> 赞同：-5
> 
> 时间：2012-10-03T09:03:28.580
> 
> 标签：php, html, ssl, web

我现在创建了一个网页，没什么特别的，但它需要安全地将数据发送到服务器，我读过 ssl 比 GET 更安全，但不知道如何实现它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:06:00.090

这不是一个真正的好问题，但您仍然可以查看以下链接：

[http://php.net/manual/en/tutorial.forms.php](http://php.net/manual/en/tutorial.forms.php)

[http://www.php.net/manual/en/features.file-upload.post-method.php](http://www.php.net/manual/en/features.file-upload.post-method.php)

[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

# c# - 更改当前添加节点的名称

> ID：12705141
> 
> 赞同：0
> 
> 时间：2012-10-03T09:03:51.770
> 
> 标签：c#, treeview, nodes, directoryservices, treenode

我希望更改为目录树的添加节点的名称。

```
 private static TreeNode GetDirectoryNodes(string path)
    {
        var dir = new DirectoryInfo(path);
        var node = new TreeNode(path);
        //node.Nodes.Add("Windows");
        foreach (var directory in dir.GetDirectories())
        {
            node.Nodes.Add(GetDirectoryNodes(path + "\\" +directory.ToString()));
        }

        return node;
    } 
```

这将给出类似的输出

```
C:\Test1
|
|-C:\Test1\Test1
|  |-C:\Test1\Test1\Test1
|-C:\Test1\Test2 
```

但是我想展示

```
C:\Test1
|
|-Test1
|  |-Test1
|-Test2 
```

我发现如果我使用

```
foreach (var directory in dir.GetDirectories())
        {
            node.Nodes.Add(directory.ToString());
        } 
```

我将只给出添加路径名，但不会递归子目录输出将是

```
 C:\Test1
|
|-Test1
|-Test2 
```

那么如何更改名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:25:51.690

线

```
var node = new TreeNode(path); 
```

是设置每个节点的文本的位置（设置为 的值`path`）。

将其更改为类似

```
var node = new TreeNode(path.Substring(path.LastIndexOf('\\') + 1)); 
```

更好的是，不要通过字符串执行此操作，而是通过传递`DirectoryInfo`对象。然后，您可以使用以下`Name`属性，而不是对目录名称进行字符串解析：

```
private static TreeNode GetDirectoryNodes(DirectoryInfo dir)
{
    var node = new TreeNode(dir.Name);
    foreach (var childDir in dir.GetDirectories())
    {
        node.Nodes.Add(GetDirectoryNodes(childDir));
    }
    return node;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:27:18.630

您可以[`DirectoryInfo.Name`](http://msdn.microsoft.com/library/system.io.directoryinfo.name.aspx)用于节点，它会为您提供没有完整路径的短名称（如果需要，您可以存储`FullName`在标签中）。像这样：

```
var node = new TreeNode(dir.Name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:22:05.280

似乎您想删除最后一个 '\' 之前的所有内容，那么为什么不只使用从最后一个 '\' 的索引到字符串末尾的子字符串函数。

# c++ - 允许通过派生类访问，但不允许覆盖

> ID：12705143
> 
> 赞同：2
> 
> 时间：2012-10-03T09:03:57.847
> 
> 标签：c++, inheritance

我需要在基类中编写一个成员函数，允许派生类访问。但不允许覆盖。

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T09:05:33.070

在 C++11 中，您可以使用说明`final`符来禁止覆盖。

[维基百科中的显式覆盖和最终](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:06:49.707

如果你正在处理一个`virtual`方法，你可以使用`final`C++11 中的特殊标识符。

```
class A
{
  virtual void foo() const final;
}; 
```

这将防止覆盖或隐藏名称，具体取决于上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:05:22.137

是的，如果您不声明它`virtual`，就不可能覆盖它。

在 C++11 之前，如果方法是`virtual`. 例如，MSVS 提供`sealed`关键字。

# c# - 在 WPF XBAP 应用程序退出期间取消后台任务

> ID：12705144
> 
> 赞同：0
> 
> 时间：2012-10-03T09:03:59.000
> 
> 标签：c#, wpf, task, xbap, cancellation

我有一个 wpf xbap 应用程序，可以在后台下载一些数据。需要在应用程序退出时停止下载并刷新缓存。现在实现如下：
App.xaml ：

```
<Application Exit="ApplicationExit"> 
```

应用程序.xaml.cs：

```
private void ApplicationExit(object sender, ExitEventArgs e)
{
    BackgroundImageLoader.Instance.Stop(); // target
    ViewModelLocator.Cleanup();
    FileCacheHelpers.FlushTemporaryFolder();
} 
```

背景图像加载器.cs：

```
// Thread-safe singleton
public sealed class BackgroundImageLoader
{
        private static volatile BackgroundImageLoader _instance;
        private static readonly object SyncRoot = new object();
        private BackgroundImageLoader() { }
        public static BackgroundImageLoader Instance
        {
            get
            {
                if (_instance == null)
                {
                    lock (SyncRoot)
                    {
                        if (_instance == null)
                            _instance = new BackgroundImageLoader();
                    }
                }
                return _instance;
            }
        }
        // other properties, omitted for conciseness
        private Task loaderTask;
        private CancellationTokenSource ts;
        public void Start()
        {
            ts = new CancellationTokenSource();
            var ct = ts.Token;
            loaderTask = Task.Factory.StartNew(() =>
            {
                 // TaskList is an array of tasks that cannot be canceled 
                 // if they were executed, so i want to actually cancel the 
                 // whole pool after last non-canceled operation was ended
                 foreach (var task in TasksList)
                 {
                      if (ct.IsCancellationRequested)
                      {
                           Debug.WriteLine("[BackgroundImageLoader] Cancel requested");
                           // wait for last operation to finish
                           Thread.Sleep(3000);
                           FileCacheHelpers.FlushTemporaryFolder();
                           break;
                      }
                      task.DoSomeHeavyWorkHere();                             
                 }
            }, ct);
        }

        public void Stop()
        {
            if (loaderTask != null)
            {
                if (loaderTask.Status == TaskStatus.Running)
                {
                    ts.Cancel();        
                }
            }
        }
    } 
```

Stop 被调用，loaderTask 不为 null 并且 Status 正在运行，但在 ts.Cancel() IsCancellationRequested 属性未更改之后（即使在将整个任务包装在 while(true){..} 中，如此[处](https://stackoverflow.com/questions/4783865/how-do-i-abort-cancel-tpl-tasks "这里")所述）。加载停止，但我想这要归功于自动 GC。我的刷新方法没有执行。我错过了什么？ps 另外我需要重构功能以同时在单独的线程中运行任务，但害怕副作用。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:21:43.227

添加了一些我在处理过程中设置和检查的手动标志，并在 Start() 开始时调用 Stop()，因此行为是可以接受的。

# shell - 如何有效地查找（不）包含某个文件的目录

> ID：12705151
> 
> 赞同：0
> 
> 时间：2012-10-03T09:04:30.497
> 
> 标签：shell, find, directory

我需要列出所有包含[CACHEDIR.TAG](http://www.brynosaurus.com/cachedir/)文件的目录，或者列出所有不包含的目录。到目前为止，我想出了

```
find ~ -type d -exec test -f {}/CACHEDIR.TAG ';' -print 
```

和

```
find ~ -type d -exec test -f {}/CACHEDIR.TAG ';' -prune -o -type d -print 
```

但是，`test -f ...`感觉有点麻烦，并且调用每个目录都会使其非常缓慢。例如，在我的测试目录上它需要 30 多秒，而普通`find ~ -type d`只需要不到 1 秒（在所有内容都缓存到内存后进行测试）。

有人知道更好/更快的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:34:44.050

您可以分步骤进行：

```
find ~ -type f -name CACHEDIR.TAG | sed -e 's/.CACHEDIR.TAG$//' a
find ~ -type d > b
grep -v -F -f a -x b 
```

# opencv - NVIDIA CUDA Toolkit 5.0 Visual Profiler“启用并发内核分析”应用程序要求

> ID：12705153
> 
> 赞同：0
> 
> 时间：2012-10-03T09:04:44.087
> 
> 标签：opencv, cuda, nvidia

操作系统：Windows 7 64 位编译器：Visual Studio 2010 Professional 驱动程序：306.23 设备：GeForce GTX 680 或 GeForce GT 650M 我正在​​使用 CUDA Toolkit 5.0，因为我需要使用此工具包的 NVIDIA Visual Profiler 的新功能，它允许在时间轴中查看异步执行的并发内核（这在 CUDA Toolkit 4.2 中是不可能的）。出于这个原因，我使用安装在我的电脑上的这个工具包（5.0）构建（成功）OpenCV 2.4.2 的源代码（这是在 OpenCV 博客上向我建议的），并且我能够正确编译和执行我的具有并发内核的应用程序：其中一些是由模块 OpenCV_GPU 的函数调用的，另一些是我直接在 CUDA 中编写的内核。不幸的是，如果我启用该功能，CUDA 5.0 NVIDIA Visual Profiler 将无法跟踪我的应用程序的时间线：“

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:31:35.057

好吧，为了解决我的问题，我尝试了这不是 CUDA 上下文的问题：使用 CUDA 和 OpenCV 编写的应用程序可以被 Profiler 很好地跟踪。相反，这是一个内存问题：简单地说，在包含我的算法的 CUDA 版本和 OpenCV 版本的应用程序中，我使用的流数量是我在只有一个版本的应用程序中使用的大小的两倍算法，这超出了 Profiler 的内存容量。我认为这是 Profiler 的问题，因为使用这两种方法的应用程序运行正常，并且只有当我从 Profiler 以“启用并发内核执行”模式运行它以跟踪时间线时，它才会停止。这必须通过 Profiler 使用更多内存来跟踪此模式中的时间线这一事实来解释，因此流数的限制低于同步模式。但是，我是初学者，所以我最好不要冒险提出假设。我用更少的流解决了它。我为这个误导性的问题道歉。

# nginx - PHP exec() 不运行所有命令

> ID：12705157
> 
> 赞同：3
> 
> 时间：2012-10-03T09:04:53.240
> 
> 标签：nginx, exec, php

我在 Ubuntu 上使用 PHP-FPM 和 Nginx。我正在尝试从 Web 应用程序启动 PHP 任务。

当我从 CLI 运行文件时，以下两个示例可以正常工作，但不能从 Nginx 运行。

```
exec("notify-send 'Starting master at ".date("h:m:s")."'");
echo exec("/home/rohit/Projects/webapp/console/index.php blast 23"); 
```

这两个在 CLI 和 Nginx 中都能正常工作。

```
echo exec("whoami");
echo exec("pwd"); 
```

我尝试将 PHP-FPM 用户从 www-data 更改为 rohit（我的用户名），但没有运气。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:07:12.587

propbaly 运行 nginx 服务器的用户无权访问`/home/rohit`并且`notify-send`命令...

第八条授予 nginx 用户执行这些命令和脚本或将它们移动到他有权访问的位置的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:42:15.737

问题是您正在从服务运行通知发送。Notify-send 是一个与显示器交互的面向桌面的程序。但是 nginx 无需连接到显示器即可运行。

例如，想象一下，有 3 个人同时登录到计算机，所有人都使用不同的显示器。当 notify-send 运行时，它不知道将通知发送到哪个显示器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T01:32:26.047

查看标准错误消息的外观。您可以通过在 exec() 函数中指定第二个参数来查看它。

```
exec("notify-send 'Starting master at ".date("h:m:s")."' 2>&1", $output);
print_r($output); 
```

以下代码可能有效。另外，/etc/sudoers 也需要修改。

```
<?php
exec("export DISPLAY=:0 && export XAUTHORITY=/tmp/.gdmXXXXXXX && sudo /usr/bin/notify-send test 2>&1", $output);
print_r($output);
?> 
```

XAUTHORITY 变量的值取决于您的环境。

此外，/etc/sudoers 需要更改如下：

```
#Defaults    requiretty
 :
www-data ALL=(ALL) ALL
www-data ALL=(ALL) NOPASSWD: /usr/bin/notify-send 
```

执行此操作时请注意安全问题。

# python - Django 模型：如何使用 mixin 类覆盖 django 模型以实现保存等功能

> ID：12705158
> 
> 赞同：4
> 
> 时间：2012-10-03T09:04:53.907
> 
> 标签：python, django, model, overriding

我想在每个模型保存之前验证值。所以，我必须重写保存功能。代码几乎是一样的，我想把它写在一个mixin类中。但失败了，因为我不知道如何编写超级函数。

我英语很差，很抱歉。

```
class SyncableMixin(object):
  def save(self, *args, **kwargs):
    try:
      res = validate(*args, **kwargs)
    except Exception:
      raise ValidateException()

    super(?, self).save(*args, **kwargs)

class SomeModel(SyncableMixin, models.Model):
  pass 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T09:09:48.843

你总是在 super 调用中引用**当前类。**

```
super(SyncableMixin, self).save(*args, **kwargs) 
```

这适用于 mixins 以及正常的子类化。

（另外，不要捕获基本异常，特别是不要捕获只是为了引发另一个异常的东西——这根本没有意义。）

# c# - 从另一个线程更新 TextBox/NumericUpDowns/Labels/Progress Bars

> ID：12705161
> 
> 赞同：0
> 
> 时间：2012-10-03T09:05:07.860
> 
> 标签：c#, generics, asynchronous, extension-methods, invoke

我们目前有一个从串行通信中读取数据的应用程序。在整个应用程序中，我们需要在 UI 中显示这些数据，因此我们创建了一个使用 BeginInvoke 更新文本框/标签/数字/进度条的方法。

然而，这开始变得很麻烦，因为每个控件都需要自己的“Setter”，所以我们已经有 20 多个方法，它们基本上都做同样的事情。

虽然我可以看到一种将其泛化为特定控件的简单方法（例如，只有 1 个用于标签，1 个用于文本框），但最好只有 1 个（可能是扩展）方法，我们可以调用它来更新 UI 中的数据.

这是我们原来的方法到处张开：

```
private void SetCell1Cell2Async(decimal value)
    {
        if (spinCell1Cell2.InvokeRequired)
        {
            spinCell1Cell2.BeginInvoke(new EventHandler(delegate
            {
                spinCell1Cell2.Value = value;
            }));
        }
        else
        {
            if (spinCell1Cell2.IsDisposed) return; // Do not process if the control has been disposed of
            if (spinCell1Cell2.IsHandleCreated)
            {
                // This handle may not be created when creating this form AFTER data is already flowing
                // We could capture this data for future display (i.e. via deferUpdate = true or similar), but it is easier to ignore it
                // i.e. Do Nothing
                return;
            }
            spinCell1Cell2.Value = value;
        }
    } 
```

这是我们当前的方法（这适用于使用该`Text`属性显示数据的控件）：

```
delegate void SetTextAsyncCallback(Control ctrl, string text);
public static void SetTextAsync(this Control invoker, string text)
{
    if (invoker.InvokeRequired)
    {
        invoker.BeginInvoke(new SetTextAsyncCallback(SetTextAsync), invoker, text);
    }
    else
    {
        if (invoker.IsDisposed) return; // Do not process if the control has been disposed of
        if (!invoker.IsHandleCreated)
        {
            // This handle may not be created when creating this form AFTER data is already flowing
            // We could capture this data for future display (i.e. via deferUpdate = true or similar), but it is easier to ignore it
            // i.e. Do Nothing
            return;
        } 
        invoker.Text = text;
    }
} 
```

如您所见，此方法适用于任何使用该`Text`属性来显示其数据的东西。

理想情况下，我希望能够“传入”要更新的属性，并提供一种需要`string`, `double`,`decimal`等的方法`boolean`，但是我有点迷失从这里去哪里。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:35:04.103

我会制定一个更通用的解决方案，在表单中使用类似这样的内容：

```
delegate void ActionCallback();

private void SetText()
{
    this.SafeInvoke(() =>
        {
            if (spinCell1Cell2.IsDisposed) return;
            if (!spinCell1Cell2.IsHandleCreated) return;
            // Do stuff
        });
}

private void SafeInvoke(ActionCallback action)
{
    if (this.InvokeRequired)
        this.Invoke(action);
    else
        action();
} 
```

使用委托，您只需声明一次实际操作，而执行的类型稍后决定（在 SafeInvoke 方法中）。如果您希望有一些扩展方法，这里有一个示例：

```
public delegate void ActionCallback();

public static void SafeInvoke(this Form form, ActionCallback action)
{
    if (form.InvokeRequired)
        form.Invoke(action);
    else
        action();
}

public static void SafeSetText(this Control ctl)
{
    var form = ctl.FindForm();
    if (form == null) return; // or do something else

    form.SafeInvoke(() =>
        {
            // Do stuff
        });
} 
```

**编辑** 再次阅读您的问题后，我注意到这并不是您真正要问的，所以我会给你一个更相关的例子：

```
public static void SafeUpdate<T>(this T ctl, ActionCallback action) where T : Control
{
    var form = ctl.FindForm();
    if (form == null) return; // or do something else

    SafeInvoke(action);
}

// Then in some other method
{
    textBox1.SafeUpdate(() =>
    {
        textBox1.Text = "123";
        textBox1.ForeColor = Color.Red;
    });
} 
```

# asp.net-mvc-3 - MVC3 需要 HTTPS 简单

> ID：12705165
> 
> 赞同：0
> 
> 时间：2012-10-03T09:05:29.723
> 
> 标签：asp.net-mvc-3, ssl, iis-7.5, requirehttps

我在 winsvr2008 R2 机器上的 IIS7.5 实例中运行 MVC3 应用程序。现在，如果我在全局或每个类上设置 RequireHttps，我的 url 根本不会被重写，实际上它什么都没有改变？我使用我自己的自定义表单身份验证模块顺便说一句，它加密客户端上的表单身份验证票.....这会阻止 RequireHttps 属性工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:25:48.360

没问题，是因为 IIS7.5 在服务器上进行实时更改后没有重新编译我的源代码。所以没有拿起最近添加的全局属性.Doh！

# javascript - ASP.NET MVC 3 HiddenFor Javascript

> ID：12705166
> 
> 赞同：7
> 
> 时间：2012-10-03T09:05:31.493
> 
> 标签：javascript, html, asp.net-mvc, razor, hidden-field

我的表单中有两个隐藏的输入字段：

```
<input type="hidden" name="lat" id="lat" value=""/>
<input type="hidden" name="long" id="long" value="" /> 
```

我通过执行以下操作来分配它们的值：

```
document.getElementById('lat').value = lat;
document.getElementById('long').value = lng; 
```

有人可以告诉我如何删除隐藏`<input>`字段并将它们替换为 a`@Html.HiddenFor<>`并使我的 Javascript 更新 HiddenFor 吗？我想这样做是因为它显然会自动绑定数据。

我的 HiddenFor 目前看起来像这样：

```
@Html.HiddenFor(m => Model.Listing.Location.Latitude);
@Html.HiddenFor(m => Model.Listing.Location.Longitude); 
```

我改变了Javascript来做到这一点：

```
document.getElementById('Listing.Location.Latitude').value = lat;
document.getElementById('Listing.Location.Longitude').value = lng; 
```

我在控制台中收到以下错误：

```
Uncaught TypeError: Cannot set property 'value' of null 
```

任何人都可以看到我要去哪里可怕的错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T09:11:46.443

这些字段的 ID 将带有下划线而不是点，它们的名称将带有点。尝试这个：

```
document.getElementById('Listing_Location_Latitude').value = lat; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T09:22:44.123

尝试这个。

```
@Html.HiddenFor(m => m.Listing.Location.Latitude, new {id = "theIdyouWant"}) 
```

因此，您可以使用 Javascript 获取元素：

```
document.getElementById("theIdyouWant") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T09:13:50.137

你的问题是那`id`将是另一个。`Listing.Location.Latitude`是名称属性。

例如：

```
@Html.TextBoxFor(x => x.General.Site_Name) 
```

生成为：

```
<input id="General_Site_Name" type="text" name="General.Site_Name" /> 
```

# android - 使用 Apache Flex SDK4.8.0、AIR3.4 和 FDT5.6.2 编译产生“无法打开 '{airHome}/frameworks/libs/air/airglobal.swc'”

> ID：12705168
> 
> 赞同：1
> 
> 时间：2012-10-03T09:05:36.370
> 
> 标签：android, ios, sdk, air, fdt

我下载了 Apache Flex 4.8.0 SDK 并添加了 TLFTextField 和 OSMF 依赖项。然后我将 SDK 安装到 FDT 5.6.2 中，并将 AIR 3.4 SDK 合并到新添加的 SDK 中，没有任何抱怨。

我更新了 AIR 应用程序描述符以适应 AIR 3.3 到 AIR 3.4 的升级，项目不会产生错误或警告。

为 iOS 进行调试编译会输出以下内容：（注意 ERROR 行）

```
Starting Full Build of SteadyEddieApp.
Compiler arguments:
  -output 
    D:\steady-eddie-app\bin\SteadyEddieApp.swf
  -+configname=air +flexlib=
    D:\utils-adobe\flex-sdks\4.8.0.win\frameworks
  --compiler.debug=true
  --debug-password=
  --compiler.source-path+=
    D:\steady-eddie-app\src,
    D:\steady-eddie-app\src_3rdParty
  --compiler.library-path+=
    D:\utils-adobe\flex-sdks\4.8.0.win\frameworks\libs\air\airglobal.swc,
    D:\utils-adobe\flex-sdks\4.8.0.win\frameworks\libs\core.swc,
    D:\utils-adobe\flex-sdks\4.8.0.win\frameworks\libs\osmf.swc,
    D:\utils-adobe\flex-sdks\4.8.0.win\frameworks\libs\textLayout.swc,
    D:\utils-adobe\flex-sdks\4.8.0.win\frameworks\libs\air\servicemonitor.swc,
    D:\steady-eddie-app\lib\Assets.swc,
    D:\steady-eddie-app\lib\as3-signals-v0.9-BETA.swc,
    D:\steady-eddie-app\lib\greensock.swc,
    D:\steady-eddie-app\lib\robotlegs-framework-v1.5.2.swc,
    D:\steady-eddie-app\lib\AssetLoader-v2.5.1.swc,
    D:\steady-eddie-app\lib\gestouch-0.4-alpha.swc
  -static-link-runtime-shared-libraries=
    true
  -target-player=11.1
  -library-path+=
    D:\utils-adobe\flex-sdks\4.8.0.win/frameworks/locale/en_US
  -default-size=550,400
  -- 
    D:\steady-eddie-app\src\com\steadyeddieworld\app\SteadyEddieApp.as

INFO Loading configuration file D:\utils-adobe\flex-sdks\4.8.0.win\frameworks\air-config.xml

ERROR D:\utils-adobe\flex-sdks\4.8.0.win\frameworks\air-config.xml[64]:
unable to open '{airHome}/frameworks/libs/air/airglobal.swc'

      </external-library-path>
^

Pure build time: 246 ms. 
Save compiler information in 2 ms. 
Clean compiler information in 0 ms. 
Could not create file D:\steady-eddie-app\bin\SteadyEddieApp.swf.
Build failed. 
```

不知道是什么导致了问题，任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:35:19.140

尝试此处的步骤，包括编辑 env-template.properties 文件（将其重命名为 env.properties）以更改 airHome 环境变量。

[http://lucamezzalira.com/2012/07/24/how-to-install-flex-4-8-0-sdk-in-flash-builder/](http://lucamezzalira.com/2012/07/24/how-to-install-flex-4-8-0-sdk-in-flash-builder/)

我应该补充。我正在尝试对新的 Apache Flex SDK 4.9 版本和 AIR 3.5 做同样的事情。

我认为，新约定不是像 4.7 版建议的那样进行覆盖安装，而是为 Flex SDK 和 AIR SDK 使用单独的位置，并告诉 Flex SDK 在哪里可以找到 AIR SDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:30:53.820

最新的 Apache Flex 4.9.0 安装程序将在安装过程中安装 AIR 3.4。

安装程序可以在[http://flex.apache.org/installer.html](http://flex.apache.org/installer.html)找到。

如果您想使用 AIR 3.5 或 3.6，您可以通过在 /ide/flashbuilder/makeApacheFlexForFlashbuilder.sh（在 Mac 上）或 /ide/flashbuilder/makeApacheFlexForFlashbuilder.bat（在Windows）并运行脚本。

虽然该脚本名为 makeApacheFlexForFlashbuilder，但它适用于任何支持 (Apache) Flex SDK 的 IDE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:06:24.103

`</external-library-path>`与编译器配置有关。我猜想在尝试手动组装 SDK 时配置错误。

尝试使用[Apache Flex 安装程序](http://incubator.apache.org/flex/installer.html)。它会为您设置。

...边注：

> 我更新了 AIR 应用程序描述符...

你为什么要这么做？我认为 AIR 3.3 3.4 的基本描述符没有任何变化。此外，合并 SDK 将自动更新模板 - 描述符文件。FDT 将从已安装的 AIR SDK 中提取最新信息。

在您的情况下，这可能不是问题，但很有趣....

# java - 通过层次结构递归调用（Java）

> ID：12705172
> 
> 赞同：1
> 
> 时间：2012-10-03T09:05:42.127
> 
> 标签：java, recursion, comparison

我遇到了一些问题，我需要遍历层次结构并比较一些值，而我得到匹配的那一刻需要返回结果。这是我的完整用例

我得到`Collection<Categories> categoryList`和 A `Collection<MyCustomObject>`, MyCustomObject{ // 一些属性 private Category category }

我需要将类别代码与 MyCustomObject 下的类别代码进行比较，并且需要将 MyCustomObject 与第一个匹配项发回。

对于这个比较我需要遍历 Collection iw 的层次结构如果在当前类别中没有找到匹配需要通过调用获取类别列表 `categoryList.getSuperCategories()`然后向上。

我虽然是递归方法调用，但似乎这在我的情况下不起作用，好像我一直遍历第一个类别直到根我无法跟踪第二个类别。

我正在尝试一些东西（没有完成也没有正常工作）

```
public ProductAllotmentData getProductAllotmnet(final Collection<CategoryModel> categoryModelList)
 {
  if (CollectionUtils.isNotEmpty(categoryModelList))
  {
   final List<ProductAllotment> productAllotmentList = getProductAllotmentEntries();
   if (CollectionUtils.isNotEmpty(productAllotmentList))
   {
    for (final CategoryModel model : categoryModelList)
    {
     for (final ProductAllotmentData productAllotmentData : productAllotmentList)
     {
      if (model.getCode().equals(productAllotmentData.getAllotmentCategory().getCode()))
      {
       return ProductAllotmentData;

      }
      else
      {
       return getAllotmentForCategory(model.getAllSupercategories(), productAllotmentyData);
      }
   }
    }
   }
  }

  return null;
 } 
```

--

```
public ProductAllotmentData getAllotmentForCategory(final Collection<CategoryModel> categoryModelList,
       final ProductAllotmentData productAllotmentaData)
     {
      ProductAllotmentData allotmentData = null;
      for (final CategoryModel model : categoryModelList)
      {
       if (model.getCode().equals(productAllotmentData.getAllotmentCategory().getCode()))
       {
        allotmentEntryData = productAllotmentData;

       }
       else
       {
        return getAllotmentForCategory(model.getSupercategories(), productAllotmentData);
       }
      }

      return allotmentEntryData;
     } 
```

我想到的另一个选择是创建一种堆栈并将所有类别放入其中并一次弹出一个比较它们并发回第一个匹配项而忽略堆栈中的其余项目但我正在寻找更好的和灵活的解决方案。

**问题**

我不确定如何遍历每个类别的层次结构以比较其代码。 `getAllotmentForCategory`是我试图遍历我的类别层次结构的地方。

在这方面的任何帮助都非常好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:33:12.050

当您到达根目录时，您需要遍历回子类别。而是直接进入根目录并继续下去，直到你用递归方法找到它们。

喜欢...（代码不是复制粘贴代码）

```
public ProductAllotmentEntryData recursive(root, code) { 
 if(root.code == code) 
    return root;
 }else{ 
    for(root.childs){ 
        object = recursive(child, code) 
        if(object!=null) 
            return object;
    } 
 return null;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:58:23.320

做我认为你描述的事情......

```
public ProductAllotmentData getAllotmentForCategory(
       final Collection<CategoryModel> categoryModelList,
       final ProductAllotmentData productAllotmentaData) {
    for (final CategoryModel model : categoryModelList) {
        if (model.getCode().equals(
                productAllotmentData.getAllotmentCategory().getCode())) {
            return productAllotmentData;
        }
    }
    for (final CategoryModel model : categoryModelList) {
        if (model.getSupercategories() != null) {
            return getAllotmentForCategory(
                    model.getSupercategories(), productAllotmentData);
        }
    }
    return null;  // or throw an exception.
} 
```

请注意，这假设“类别”是分层的；即“类别”图中没有循环。它还假设您想要返回匹配的第一个“类别”的“分配”……而不管其他“类别”也可以匹配。

* * *

（问题是您没有足够详细地描述问题。因此无法弄清楚“产品”、“类别”和“分配”的含义，因此在*语义上*正确的方法是什么？分配”。）

# javascript - 如何在 HTML 中的变量值之前添加 $ 符号

> ID：12705173
> 
> 赞同：-2
> 
> 时间：2012-10-03T09:05:41.780
> 
> 标签：javascript, html

我在 HTML 中有变量，它存储值 835 我希望在 835 之前应该有 $ 显示这样的值 $835。

```
same_vaccination_severeei_unvaccinated_val_1.value =  ((parseFloat(mixed_population_ci_unvaccinated_val_1.value) * parseFloat(if_influenza_severe_unvaccinated_val_1.value)/10000)*100).toFixed(2) + $; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:07:45.270

```
same_vaccination_severeei_unvaccinated_val_1.value = '$' + ((parseFloat(mixed_population_ci_unvaccinated_val_1.value) * parseFloat(if_influenza_severe_unvaccinated_val_1.value)/10000)*100).toFixed(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:07:23.023

尝试这个

```
same_vaccination_severeei_unvaccinated_val_1.value = "$"+((parseFloat(mixed_population_ci_unvaccinated_val_1.value) * parseFloat(if_influenza_severe_unvaccinated_val_1.value)/10000)*100).toFixed(2); 
```

# php - Aweber PHP API：创建新订阅者时传递 meta_web_form_id

> ID：12705182
> 
> 赞同：1
> 
> 时间：2012-10-03T09:06:17.297
> 
> 标签：php, aweber

在 Aweber PHP API 方面需要帮助。 [https://labs.aweber.com/docs/reference/1.0#subscribers](https://labs.aweber.com/docs/reference/1.0#subscribers)如您所见，我无法将 meta_web_form_id 传递给 CREATE 函数，那么如何跟踪提交了哪个表单？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:26:11.027

您没有使用 Aweber 表单，您使用的是 API？为了跟踪订阅者的来源，您可以使用**ad_tracking**字段。

> 您可以将通过您的网络表单获得的每个订阅者分配给广告跟踪类别“web_form”，将通过新闻通讯获得的订户分配给“新闻通讯”类别，将通过分类广告获得的订户分配给“分类”类别。
> 
> [https://help.aweber.com/entries/21694288-what-is-ad-tracking](https://help.aweber.com/entries/21694288-what-is-ad-tracking)

# android - 如何使内部类组件的可见性在自定义列表视图中消失

> ID：12705183
> 
> 赞同：0
> 
> 时间：2012-10-03T09:06:22.970
> 
> 标签：android

我在android中使用自定义的列表视图。在我的自定义列表视图类Voucherlistcustomization1中，我有一个名为linearlayoutearnloyaltypoints1的线性布局。在外部类凭证中的布局凭证中的另一个布局的onclick上，我需要使布局linearlayoutearnloyaltypoints1可见性消失。但是我没有得到访问外部类中的布局。

```
 public class Voucher extends Activity implements OnClickListener,OnItemClickListener
    {

        ListView listviewvoucher;
        private Voucherlistcustomization1 vouchertextadapter=null;
        public ArrayList<String>Addelemntstovoucher = new ArrayList<String>();

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.voucher);

            Addelemntstovoucher.add("SHOPPER STOP");
            Addelemntstovoucher.add("Expire date:5-8-2012");

            if(vouchertextadapter == null)
            {
                vouchertextadapter=new Voucherlistcustomization1(this,0, Addelemntstovoucher);

            }   

            listviewvoucher.setAdapter(vouchertextadapter);

            Log.d("customerfaname",""+Addelemntstovoucher);

            listviewvoucher.setOnItemClickListener(new OnItemClickListener() 
            {

                @Override
                public void onItemClick(AdapterView<?> a, View v, int position,long id) 
                {
                    Log.d("Clicked","bbbbbbbbbbbbbbbbbb"+a);

                }
            }); 
        }   

        @Override
        public void onClick(View v) 
        {
        if(v==linearlayout_Voucher_to_Grab){
                linearlayoutearnloyaltypoints1.setVisibility(View.GONE) ;
        }

        }

        public class Voucherlistcustomization1 extends ArrayAdapter<String>
        {
            LinearLayout linearlayoutearnloyaltypoints1;

            public Voucherlistcustomization1(Context context, int textViewResourceId,List<String> objects) 
            {

                super(context, textViewResourceId,objects);

            }

            public View getView(int position, View convertView, ViewGroup parent) 
            {
                if(convertView == null) 
                {
                    convertView = LayoutInflater.from(getContext()).inflate(R.layout.customized_listview_for_voucher, null);                
                }

                linearlayoutearnloyaltypoints1=(LinearLayout)findViewById(R.id.linearlayoutearnloyaltypoints1);

                          //components present in the  customized_listview_for_voucher layout
                String text1 = getItem(position);
                TextView textView1 = (TextView) convertView.findViewById(R.id.textview1);
                textView1.setText(text1);

                String text2 = getItem(position);
                TextView textView2 = (TextView) convertView.findViewById(R.id.textView2);
                textView2.setText(text2);

                String text3 = getItem(position);
                TextView textView3 = (TextView) convertView.findViewById(R.id.textView3);
                textView3.setText(text3);

                return convertView;
            }    

        }

    }

My issue here is that on the Onclick of :
    (v==linearlayout_Voucher_to_Grab)   
    {
            linearlayoutearnloyaltypoints1.setVisibility(View.GONE) ;
    }

I am trying to make the layout  linearlayoutearnloyaltypoints1.setVisibility(View.GONE) ; visibity to gone however the layout(linearlayoutearnloyaltypoints1) is a component in the class Voucherlistcustomization1 in the Inner class Voucherlistcustomization1.Can someone please tell me how do i set the visibity of that layout to false. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:10:52.437

尝试：

runOnUIThread(new Runnable {
   public void run() {
      layout.setVisibility(View.GONE);
   }
})

问题可能是您使用不在原始线程中的视图，这将是解决方案

# jsf - 是否可以让 ah:commandLink （或类似的）导航到带有片段的 URI？

> ID：12705189
> 
> 赞同：2
> 
> 时间：2012-10-03T09:06:43.927
> 
> 标签：jsf, jsf-2

例如，假设我想运行一些逻辑，然后点击 /page.html#elementid

```
<h:commandLink action="#{myBean.action}" value="Go"/> 
```

和

```
public String action()
{
   // Some logic here
   return "/page.xhtml#elementid";
} 
```

我找不到任何关于此的示例，想知道是否有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:39:55.020

`#elementid`URI 片段也必须发送到客户端。这不会在这里发生。您基本上是在执行服务器端转发。您应该改为执行客户端重定向。

```
public void action() throws IOException {
    // ...

    ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
    ec.redirect(ec.getRequestContextPath() + "/page.xhtml#elementid");
} 
```

* * *

或者，您可以有条件地渲染一些 JavaScript 来设置 URI 片段：

```
public String action() {
    // ...

    hash = "elementid";
    return "/page.xhtml";
} 
```

在`page.xhtml`：

```
<h:outputScript target="body" rendered="#{not empty bean.hash}">
    location.hash = "#{bean.hash}";
</h:outputScript> 
```

* * *

顺便说一下，[`<h:link>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/link.html)对 URI 片段有明确的支持。

```
<h:link value="Go to page" outcome="page" fragment="elementid" /> 
```

然而，它会触发一个 GET 请求，因此任何预初始化业务操作都需要在与基于 (post)constructor 或`<f:viewParam>`.

# jsp - 在jsp中获取上下文路径的问题？

> ID：12705193
> 
> 赞同：7
> 
> 时间：2012-10-03T09:06:56.943
> 
> 标签：jsp, jakarta-ee, request, el

我的jsp位于以下位置

```
http://myApp.com/myWebApp/customer/images/customer.jsp 
```

我的图像（通过 customer.jsp 访问）位于

[http://myApp.com/myWebApp/images/customer.gif](http://myApp.com/myWebApp/images/customer.gif)

在图像标签中，我正在制作如下绝对路径

```
src="${param.contextPath}images/customer.gif" 
```

仅供参考，我在这里使用参数，因为这是我们在 EL 中访问请求参数的方式。

我期待 ${param.contextPath} 将返回 /myWebApp/ 但它正在返回 /myWebApp/customer/。**有没有办法我可以从请求中获取上下文路径（而不是客户命名空间），即 /myWebApp/？**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-03T09:23:31.813

如果您从请求参数中读取上下文路径，那么一定有人事先用一些值填充了它。该值是不正确的，并且由于没有关于谁填充该值以及如何填充该值的信息，因此不能说太多。

尝试`${pageContext.request.contextPath}`改用。这是获取应用程序部署所在的上下文路径的标准方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T09:25:11.743

`${pageContext.request.contextPath}`改为使用

# wpf - 在页面之间导航时的 Kinect 工具箱和磁性控件

> ID：12705194
> 
> 赞同：0
> 
> 时间：2012-10-03T09:07:00.037
> 
> 标签：wpf, xaml, kinect, nui, kinect.toolbox

我正在使用 Kinect.Toolbox 鼠标和磁性控件。它在单个页面中运行良好。但是，当我有不同的页面在它们之间导航时，我收到一个错误：InvalidOperationException Unhandeled in user code - 指定的视觉对象不是此视觉对象的祖先。这发生在 MouseController.cs 第 158 行：

```
var position = element.TransformToAncestor(rootVisual).Transform(new Point(0, 0)); 
```

通过一些调试，我了解到上一页中的磁性控制器仍在列表中，这导致了问题。所以我尝试在导航到下一页之前清除它们：

```
MouseController.Current.MagneticsControl.Clear(); 
```

但是，我仍然得到同样的错误。如果我在导航之前清除列表我会收到错误，因为我仍在同一页面中并且磁力控制列表为空，如果我在导航后清除它们我没有收到错误但我的磁力控制器没有得到识别因为他们从列表中清除。有人对此有解决方案吗？清除此列表的正确位置在哪里？

这是我有磁性控件的 XAML：

```
 <Grid>
    <Button Content="1" local:MagneticPropertyHolder.IsMagnetic="True" Click="Button_Click"/> 
</Grid> 
```

在 Button_Click 上，我导航到另一个页面，该页面也有一些磁性控制：

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        MouseController.Current.MagneticsControl.Clear();
        keyboard pageKeyboard = new keyboard();
        NavigationService navigationService = NavigationService.GetNavigationService(this);
        navigationService.Navigate(pageKeyboard);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:28:25.903

好的，我这样解决了我的问题：我知道这个问题是因为在可视化树仍在组装时调用了转换器，因此您的 Visual 还不是 Window 的后代。有一些解决方案，例如在您的可视化树已经构建后进行转换。这是通过使用 Dispatcher.BeginInvoke(DispatcherPriority.Render, ...) 注册 Dispatcher 回调并在回调中完成您的工作来完成的。

由于我不想深入研究源代码，而且 WPF 还不足以完成高级复杂的工作，所以我使用了自己的解决方案，这可能不是有史以来最好的解决方案。而不是清除磁性控制列表，我决定以编程方式设置我的磁性控制，而不是在 XAML 中设置它们。通过这种方式，我可以确保在已经构建视觉树时设置磁性控件。因此，在 Page_Loaded 事件中，我设置了磁控并将它们推入磁控列表（不确定最后一部分是否必要）：

```
private void Page_Loaded(object sender, RoutedEventArgs e)
{
  foreach (Button btn in MagneticButtons)
        {
            btn.SetValue(MagneticPropertyHolder.IsMagneticProperty, true);
            MouseController.Current.MagneticsControl.Add(btn);
        }
} 
```

由于我唯一的磁性控件是按钮，因此您也可以像这样设置其他控件。当我从页面导航到另一个页面时，我取消了所有磁性按钮并将它们从磁性控制列表中删除：

```
foreach (Button btn in MagneticButtons)
{
    btn.SetValue(MagneticPropertyHolder.IsMagneticProperty, false);
    MouseController.Current.MagneticsControl.Remove(btn);
} 
```

要获取窗口或页面中的控件，您可以使用以下命令：

```
public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
    {
        if (depObj != null)
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
                if (child != null && child is T)
                {
                    yield return (T)child;
                }

                foreach (T childOfChild in FindVisualChildren<T>(child))
                {
                    yield return childOfChild;
                }
            }
        }
    } 
```

在我的情况下，例如获取按钮：

```
private IEnumerable<Button> MagneticButtons = FindVisualChildren<Button>(this); 
```

# php - 命令链设计模式适用于哪些情况？

> ID：12705195
> 
> 赞同：2
> 
> 时间：2012-10-03T09:07:03.077
> 
> 标签：php, design-patterns, web-applications, chain-of-responsibility

请有人用这些模式清理我脑海中的混乱：

*   **指挥链**
*   **责任链**

我见过两者相同的站点（命令链的示例与责任链相同），而其他站点则不同。

这是我对每个的理解：

**指挥链：**

我们将一个类称为 CommandChain，其属性包含一个“命令”列表，这些“命令”是实现相同接口的类的实例。假设他们都必须实现 onCommand(command, arguments)。

CommandChain 有 addCommand() 方法在其中注册新命令，runCommand() 接受命令名称及其参数。此方法应遍历命令列表，直到其中一个响应、执行相应操作并发送 ok。

**责任链**

正如我在某些站点中看到的那样，这几乎是相同的，但有以下区别：每个命令实例都将存储对下一个命令实例的引用，而不是让一个类存储要循环的命令列表。

那么，这种差异是否足以认为两种设计模式不同？

它们适用于哪些实际情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:51:17.320

它们是相同的设计模式。

如果它们具有相同的属性并且只有实现不同，那么它们在功能上是相同的。这表明这两种设计模式是一回事。

另一个提示是责任链 DP 有一个维基百科页面，但命令链没有。

撰写关于 DP 的开创性书籍的“四人帮”非常清楚定义设计模式的行为和属性，而不是实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:41:52.410

看起来当有一个处理程序需要根据某个请求执行多个任务时使用命令链，而另一方面，当每个处理程序只能处理一种类型的请求时使用责任链。例如，如果有火灾警报，您可以向火灾探测器发出请求，后者将发出许多命令来检查不同级别或位置的火灾。虽然可以通过使用责任链来完成谁将像消防员、保安、警察等对火灾做出响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T10:16:40.717

责任链是四人组的原始设计之一，您可以在此处找到几个用 PHP 实现的示例：

[http://www.php5dp.com/category/design-patterns/chain-of-responsibility/](http://www.php5dp.com/category/design-patterns/chain-of-responsibility/)

该模式的一种用途是使用“嗅探器”程序来选择正确的设备，以便与针对不同设备（手机、平板电脑、台式机）具有多种配置的网站一起使用。CoR 模式避免了发出请求的客户端和处理对象之间的耦合。

它不是分层的，因为一个“处理对象”不在另一个之上，但它是顺序的，因为它通过一组选项，直到找到最适合给定请求的选项。

“指挥链”可能是对 CoR 的误称，也可能是完全不同的具有等级结构的模式。

# visual-studio-2010 - TFS 门控签入的对话框太多，无法单击

> ID：12705201
> 
> 赞同：1
> 
> 时间：2012-10-03T09:07:36.970
> 
> 标签：visual-studio-2010, checkin

我们在项目中启用了门控签到策略。

总是让我烦恼的是每次签到时都需要大量的用户交互，即：

1.  “您需要构建您的更改以进行验证...”对话框弹出。
2.  Build explorer 窗口在 IDE 中打开，我立即关闭它。
3.  构建完成后，弹出“Gated Check-In Committed”对话框。
4.  再次弹出一个类似的对话框，现在包含要协调的文件列表。

由于我总是在每个对话框中选择默认操作，我想知道是否可以以某种方式自动化整个过程以使其对我透明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:24:16.980

如果您升级到 TFS 2012 / VS 2012，第二个弹出窗口似乎不会发生，您只会在待定更改窗口中收到通知，让您单击以查看构建。

它还允许您执行[批处理门控签](http://visualstudiomagazine.com/articles/2012/06/13/batched-gated-builds-in-tfs.aspx)入，其中 X 个签入被合并并经过 1 个构建。

# android - 列表视图行中的无效元素不起作用

> ID：12705202
> 
> 赞同：1
> 
> 时间：2012-10-03T09:07:44.223
> 
> 标签：android, textview

我`CursorAdapter`用来填充列表。列表项内的视图之一（`TextView`，其高度设置为`WRAP_CONTENT`）用于显示具有不同字体大小的文本消息，即某些列表项的文本将具有 12 sp 大而其他将是 16 sp。

我面临的问题是，当`TextView`用于显示 16 sp 文本时，在重新用于显示 12 sp 文本时仍然“大”。

已经尝试过`invalidate()`//但没有成功`requestLayout()`。`forceLayout()`如何强制`TextView`正确显示自身？

# php - 哪种类型的 Codeigniter 挂钩点适合？

> ID：12705206
> 
> 赞同：1
> 
> 时间：2012-10-03T09:07:58.483
> 
> 标签：php, codeigniter

我有相同的代码，我想在我的 Codeigniter 项目中每个控制器的每个操作的某些点执行。哪些钩点是正确使用的？

```
class Pages extends CI_Controller {

    public function index(){

        // Execute first hook here

        $this->load->view('pages/index', $data);

        // Execute second hook here

    }

} 
```

我正在寻找两个答案：第一个钩子的第一个答案和第二个钩子的第二个答案。谢谢。

钩子手册页在这里，钩子点在底部解释，但我不知道哪些对我的脚本是正确的。

[http://codeigniter.com/user_guide/general/hooks.html](http://codeigniter.com/user_guide/general/hooks.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:03:59.507

这是一个看起来像您正在寻找的 CodeIgniter 事件库： [https ://github.com/ericbarnes/CodeIgniter-Events](https://github.com/ericbarnes/CodeIgniter-Events)

# bash - Bash 变量和输出

> ID：12705207
> 
> 赞同：1
> 
> 时间：2012-10-03T09:08:05.987
> 
> 标签：bash

```
grep -A 26 "some text" somefile.txt |
awk '/other text/ { gsub(/M/, " "); print $4 }' | while read line
do
   //operations resulting in a true of false answer
done 
```

同时声明和使用的变量只存在于通过管道创建的子shell中，我如何从外部跟踪它们？我需要稍后在脚本中使用返回的 true 或 false

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:11:11.303

使用进程替换：

```
while read line
do
   # operations resulting in a true of false answer
done < <(grep -A 26 "some text" somefile.txt | \
         awk '/other text/ { gsub(/M/, " "); print $4 }' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:26:34.810

如果您使用的是`bash`4.2 或更高版本，请设置该`lastpipe`选项。这会强制管道中的最后一个命令（在本例中为您的 while 循环）在当前 shell 而不是子 shell 中运行，因此您在循环中对变量所做的任何修改在完成后仍然可见。

# c# - 使用正则表达式在字符串中查找索引，从某个索引开始

> ID：12705209
> 
> 赞同：2
> 
> 时间：2012-10-03T09:08:06.453
> 
> 标签：c#

我想搜索字符串的索引 \n\n 或 \n \n 或 \n \s* \n 搜索从某个索引开始，例如

```
 mystring.LastIndexof(regularexpression, mystartindex) 
```

同样地

```
mystring.Indexof(regularexpression, mystartindex) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:20:16.510

使用[这个`Regex.Match`重载](http://msdn.microsoft.com/en-us/library/3583dcyh.aspx)

```
public Match Match(
    string input,
    int startat
) 
```

例如

```
Regex re("\n\s*\n");
var index = re.Match(mystring, mystartindex).Index; 
```

请注意，您可以使用它`Match.NextMatch`来获得下一场比赛：

```
Match m = Regex.Match(mystring, re);
while (m.Success) {
   Console.WriteLine("'{0}' found at index {1}.", m.Value, m.Index);
   m = m.NextMatch();
} 
```

**更新**改编自您自己的解决方案：

```
public static class RegexMatchExtensions
{
    public static int LastIndexOf(this MatchCollection matches, int index)
    {
        var match = matches.Cast<Match>().LastOrDefault(m => m.Index <= index);
        return (match == null)? -1 : match.Index;
    }

    public static int IndexOf(this MatchCollection matches, int index)
    {
        var match = matches.Cast<Match>().FirstOrDefault(m => m.Index > index);
        return (match == null)? -1 : match.Index;
    }
} 
```

用法：

```
/*private static readonly*/ Regex re = new Regex(@"\n\s*\n",
               RegexOptions.Compiled 
             | RegexOptions.Multiline
             | RegexOptions.CultureInvariant);

var doubleLineIndexes = re.Matches(wholeDocumentText);

var first = doubleLineIndexes.IndexOf(73);
var last = doubleLineIndexes.LastIndexOf(73); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:31:02.967

正则表达式 re = new Regex(@"\n\s*\n"); MatchCollection DoubleLineIndexes = re.Matches(wholeDocumentText);

int LastIndexOf(MatchCollection mathes,int index) {

```
 for (int i = 0; i < mathes.Count; i++)
        {
            if (mathes[i].Index > index) return mathes[i-1].Index;
        }

        return -1;

    }

    int IndexOf(MatchCollection mathes, int index)
    {

        for (int i = 0; i < mathes.Count; i++)
        {
            if (mathes[i].Index > index) return mathes[i].Index;
        }

        return -1;

    } 
```

# r - 计算数据框中有多少值超出限制

> ID：12705210
> 
> 赞同：2
> 
> 时间：2012-10-03T09:08:06.727
> 
> 标签：r, dataframe

我有一个数据框，其中包含来自某些单元（例如单元 1..5）的 20 个不同测试步骤的测试值此外，我有 2 列具有下限和上限（ll 和 ul）

```
data <- data.frame(
    ll=round(runif(20,5,15)),
    ul=round(runif(20,80,95)),
    unit1=sample(1:100,20,TRUE),
    unit2=sample(1:100,20,TRUE),
    unit3=sample(1:100,20,TRUE),
    unit4=sample(1:100,20,TRUE),
    unit5=sample(1:100,20,TRUE)
) 
```

如何获得低于下限 (ll) 和高于上限 (ul) 的每一行的值的计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:23:21.457

试试这个：

```
below <- rowSums(data[,-c(1,2)] < data[,'ll'])  # below
above <- rowSums(data[,-c(1,2)] > data[,'ul'])  # above
DF <- cbind(data, below, above) # altogether
head(DF)
  ll ul unit1 unit2 unit3 unit4 unit5 below above
1 10 82    75    10    24    80    60     0     0
2 13 87    60    20     4    94    31     1     1
3  8 85    58     9    98    94    65     0     2
4 11 95    68    45     5    38    76     1     0
5 11 87    15    79     5    43    67     1     0
6 11 89    33     6    18     1    22     2     0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:19:53.453

我会使用`within()`这个，遵循与@Jilber 的回答相同的逻辑：

```
# First, use set.seed to make your example reproducible
set.seed(1)
data <- data.frame(
  ll=round(runif(5, 5, 15)),
  ul=round(runif(5, 80, 95)),
  unit1=sample(1:100, 5, TRUE),
  unit2=sample(1:100, 5, TRUE),
  unit3=sample(1:100, 5, TRUE),
  unit4=sample(1:100, 5, TRUE),
  unit5=sample(1:100, 5, TRUE)
)
data
#   ll ul unit1 unit2 unit3 unit4 unit5
# 1  8 93    21    50    94    39    49
# 2  9 94    18    72    22     2    60
# 3 11 90    69   100    66    39    50
# 4 14 89    39    39    13    87    19
# 5  7 81    77    78    27    35    83 
```

该`within`功能使您可以方便地添加新列。

```
within(data, {
  below = rowSums(data[-c(1:2)] < ll)
  above = rowSums(data[-c(1:2)] > ul)
})
#   ll ul unit1 unit2 unit3 unit4 unit5 above below
# 1  8 93    21    50    94    39    49     1     0
# 2  9 94    18    72    22     2    60     0     1
# 3 11 90    69   100    66    39    50     1     0
# 4 14 89    39    39    13    87    19     0     1
# 5  7 81    77    78    27    35    83     1     0 
```

或者，您也可以使用`transform()`来实现相同的输出：

```
transform(data, 
          below = rowSums(data[-c(1:2)] < ll), 
          above = rowSums(data[-c(1:2)] > ul)) 
```

在 2,000,000 行数据集上对 Jilber 的解决方案和这两个解决方案进行基准测试，结果如下：

```
 test replications elapsed relative user.self sys.self
3    jilber            3  33.586    1.000    31.490    1.916
1    within            3  34.493    1.027    32.542    1.584
2 transform            3  33.813    1.007    31.870    1.828 
```

我认为这两个功能非常方便，因为它们提供了便利！

# ios - Flex iOS 应用程序在没有互联网连接的情况下无法启动，然后显示不需要的弹出窗口

> ID：12705212
> 
> 赞同：5
> 
> 时间：2012-10-03T09:08:09.380
> 
> 标签：ios, flash, apache-flex, air, flash-builder

我正在使用 flex 为 iOS 编写一个应用程序。我深入开发。

今天早上，我的一个测试人员报告说看到了一个我没有创建的基于 flex 的弹出窗口。

我无法在这里发布图片，但只能描述弹出窗口 - 它有一个灰色的标题栏和一个小的关闭按钮，看起来更像一个弹性面板。据我所知，这不是标准 flex 弹出窗口的一部分。然后它在主窗口的左上角有一个问号图像。我相信这是 flex 在尝试加载图像但无法加载时使用的图形支架。弹出窗口的底部是一个文本输入框，其中预先填充了 IP 地址。我和测试人员的地址是相同的。最后在最底部是一个确定和一个取消按钮。

这些按钮的样式是因为我为我的应用程序设置了一个全局按钮皮肤。除此之外，我没有创建此弹出窗口，并且在我的脚本中找不到任何证据。

我立即启动了与我在自己的 iPad 上相同的构建。我在发送之前已经对其进行了测试，并且之前没有看到任何证据，但是当我今天早上测试它时，我也看到了这个弹出窗口。从字面上看，这似乎是在一夜之间发生的。

我做了一些更多的测试，发现如果我关闭所有互联网连接，那么应用程序甚至都不会启动。它挂在启动画面上。我不能确定这个版本，但我知道以前的版本肯定是离线工作的。

我已经在我的脚本中搜索了可能导致这种情况的东西。我没有使用标准库之外的任何参考库，也没有使用任何 ANE。我还检查了我正在开发的其他 Flex 应用程序，但它们看起来都很好。

有没有其他人遇到过这个？任何关于寻找什么或如何解决它的想法将不胜感激。

谢谢，

杰米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:06:11.073

听起来您正在分发应用程序的调试版本，并且此弹出窗口询问有关如何连接到正在运行的 Flex 调试器会话的信息。这将在应用程序运行之前发生。你总是可以点击取消来忽略它。

将您的应用分发给用户时；我强烈建议创建一个不包含“调试”位的正式发布版本，因此此弹出窗口将永远不会显示。

# windows-phone-7 - wp7图片没有上传到服务器？

> ID：12705214
> 
> 赞同：1
> 
> 时间：2012-10-03T09:08:15.783
> 
> 标签：windows-phone-7, windows-phone-7.1

这是我要发布的请求的示例，这就是我需要在服务器上发布以上传图像的方式：

```
Request
POST /updateprofile HTTP/1.1
Host: <ip:port>
Content-Type: multipart/mixed, boundary=”myboundary”
User-Agent: <Device User Agent>

--myboundary
Content-Length: 2234
Delegateid=<did>&profileid=0&title=<title>& userid=<uid>&seequestion=<seequestion>&seeanswer=<seeanswer>&fname=<fname>&lname=<lname>&ccountry=<citycountry>&company=<company>&ptitle=<ptitle>&industry=<industry>&looking=<looking>&address=<address>&mobile=<mobile>&phone=<phone>&weburl=<weburl>&keys=k1|k2&values=v1111|v2222&encoding=base64&sendpic=1

--myboundary
Content-Type:image/jpeg
Content-Length: 1234

XXX Binary jpeg image xxx

--myboundary-- 
```

我对其进行了编码，但图像未上传到服务器上，每件事都已成功发布，我从图像库中获取图片并将其转换为字节数组，但仍然没有结果，我编码如下：

```
void _cameraCapture_Completed(object sender, PhotoResult e)
{
capturedImage = e.ChosenPhoto;
BitmapImage bmp = new BitmapImage();
bmp.SetSource(capturedImage);
MemoryStream ms = new MemoryStream();
WriteableBitmap wb = new WriteableBitmap(bmp);
wb.SaveJpeg(ms, 40, 40, 0, 40);
imageBytes = ms.ToArray();
SendPost();
}

   void SendPost()
        {

            if (!System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable())
            {
                MessageBox.Show("No network connection available!");
                return;
            }

            //http://stackoverflow.com/questions/5952094/wp7-windows-phone-7-httpwebrequest-losing-post-data

            System.Uri uri = new Uri("http://www.www.com/updateprofile.do);
            // Create the web request object
            HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(uri);

            webRequest.Method = "POST";
            webRequest.ContentType = "application/x-www-form-urlencoded";

         webRequest.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), webRequest);
        }
  private void GetRequestStreamCallback(IAsyncResult asynchronousResult)
        {

            //postData += ("&profileid=" + "0");
            //postData += ("&title=" + "Mr");
            //postData += ("&userid=" + "iphone@cubixlabs.com");
            //postData += ("&seequestion=" + "squestion");
            //postData += ("&seeanswer=" + "sanswer");

            //postData += ("&fname=" + "asim");
            //postData += ("&lname=" + "siddiqui");
            //postData += ("&ccountry=" + "London, United Kingdom");
            //postData += ("&company=" + "Google");
            //postData += ("&ptitle=" + "asim");
            //postData += ("&industry=" + "Transportation & Package/Freight Delivery");
            //postData += ("&looking=" + "Career Opportunities");
            //postData += ("&oldpasswd=" + "f30aa7a662c728b7407c54ae6bfd27d1");

            //postData += ("&newpasswd=" + "f30aa7a662c728b7407c54ae6bfd27d1");

            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            // Add the post data to the web request
            postStream.Write(byteArray, 0, byteArray.Length);
            postStream.Close();

            // Start the web request
            webRequest.BeginGetResponse(new AsyncCallback(GetResponseCallback), webRequest);
   }

        void GetResponseCallback(IAsyncResult asynchronousResult)
        {

            HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
            HttpWebResponse response;

            // End the get response operation
            response = (HttpWebResponse)webRequest.EndGetResponse(asynchronousResult);
            Stream streamResponse = response.GetResponseStream();
            StreamReader streamReader = new StreamReader(streamResponse);
            var Response = streamReader.ReadToEnd();
            //MessageBox.Show(Response.ToString());

        } 
```

# c - scanf 得到两行带空格的输入

> ID：12705218
> 
> 赞同：0
> 
> 时间：2012-10-03T09:08:41.453
> 
> 标签：c, scanf

例如，请找到以下代码

```
main()
{
    int i;
    char s[100];
    printf("Enter the string \n");
    scanf(" %s ",s);
    printf("Enter the string\n");
    scanf("%d",&i);
    printf("%s\n%d\n",s,i);
} 
```

上面代码的输出是

```
Enter the string 
hai
hai
Enter the string
hai
0 
```

它应该接受一行输入，但它也接受第二行。
如果删除了 scanf 中的空间，则输出正确。

谁能解释一下？

当使用与整数（％d）相同时，它不会发生。它发生在字符串上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:19:04.053

Your first `scanf` asks for a string and will skip leading whitespaces.
Your second `scanf` asks for an ***integer***.

When you enter `"hai"` it goes in `s[]`. It would have been the same with `" hai"`, keeping only `"hai"`.
When you enter `"jai"` it is parsed as an `int` and thus gives you zero.

There is nothing wrong with your program except the second `printf` should be

```
printf("Enter an integer\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:29:15.250

从`scanf()`的手册页：

> 一系列空白字符（空格、制表符、换行符等；参见 isspace(3)）。该指令匹配输入中任意数量的空白，包括无空白。

当格式字符串中有空格时，它会跳过输入中的任意数量的空格字符。这意味着您必须输入非空白字符，以便继续读取您的字符串`s`。

在 C/POSIX 语言环境中，空白字符可以是：

> 空格、换页符 ('\f')、换行符 ('\n')、回车符 ('\r')、水平制表符 ('\t') 和垂直制表符 ('\v')。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:14:47.047

我们的第一个 scanf 在开头等待一个包含空格的字符串，但它没有。所以它要求您再次输入字符串，并在第二次被接受，因为您在输入新字符串之前键入 [enter]。[enter] 在 scanf 中被视为空白。

参考这个链接好像是一样的

[解释 scanf 中没有空格和 scanf 中有空格有什么区别？](https://stackoverflow.com/questions/12704907/explain-what-is-difference-between-without-whitespace-in-scanf-and-with-whitespa)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:35:12.963

“%s”中不应该有空格 句子来了两次的原因是你写了两次

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-03T09:43:28.713

尝试

```
main()
{
    int i;
    char s[100];
    printf("Enter the string \n");
    scanf("%c", &s);
    fgets(s, 100, stdin);
    printf("Enter the string\n");
    scanf("%d",&i);
    printf("%s\n%d\n",s,i);
} 
```

`fgets`会`c`得到一些字符。

# java - “属性名称”e 无法解析为“对象”的成员

> ID：12705219
> 
> 赞同：-2
> 
> 时间：2012-10-03T09:08:40.980
> 
> 标签：java, jsf

我得到了一个包含受保护属性的类：

测试类：

```
abstract public class Test extends WithAttachment{
static ISQLTest pISQLTest = null;

// Ajour une refence au campagne ??? pour resoudre le Warning

/**
 * Date de creation du test
 */
protected Date creationDate;

/**
 * Nom complet du concepteur du test
 */
protected String conceptorName;

/**
 * Login du concepteur du test
 */
protected String conceptorLogin;
.....} 
```

托管豆：

```
 private Test selectedTest; // with getters and setters 
```

xhtml页面：

```
 <h:panelGrid columns="2" cellpadding="4" header="Test Details">

                                  <h:outputText value="Name of The Test :" />  
                                  <h:outputText value="#{projectTestManagementMB.selectedTest.name}" /> 

                                  <h:outputText value="Creation Date :" />  
                                  <h:outputText value="#{projectTestManagementMB.selectedTest.creationDate}" /> 

                                  <h:outputText value="Executed :" />  
                                  <h:outputText value="#{projectTestManagementMB.testExecutedFlag}" /> 

                                  <h:outputText value="Owner :" /> 
                                  <h:outputText value="#{projectTestManagementMB.selectedTest.conceptorName} #{projectTestManagementMB.selectedTestconceptorLogin}" /> 

  </h:panelGrid> 
```

因此，当我尝试在 EL 表达式中的 xhtml 页面中访问它们时，出现此错误；吨 `attribute name can no be resolved as member of selectedTest`

那么有没有可能在不改变类 Test 属性的访问类型（受保护）的情况下解决这个问题。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:10:51.267

好吧，正如它所说 - 中没有“名称”属性`Test`，除非`WithAttachment`您没有向我们展示。

你有`conceptorName`，但没有`name`。诚然，我不知道拥有一个受保护的字段是否足够好——我希望*有*一个私有字段和一个公共`getName()`财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:12:37.710

```
#{projectTestManagementMB.selectedTest.name} 
```

你的属性在哪里`name`？？在`Test`课堂上。。

# android - Android：无法在 Camera.open() 连接到相机服务；

> ID：12705226
> 
> 赞同：5
> 
> 时间：2012-10-03T09:09:06.533
> 
> 标签：android, android-camera

有很多类似的问题，但没有一个对我有帮助：

我的清单文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.cameraapi"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".CameraAPIActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我的活动课程是：

```
public class CameraAPIActivity extends Activity {
    private Camera myCamera = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        if (checkCameraHardware(this)) {

            try {

                myCamera = Camera.open();
            } catch (Exception e) {

                //Here i get the Exception:  Failed to connect to camera service
            }
        }
}

private boolean checkCameraHardware(Context context) {
    if (context.getPackageManager().hasSystemFeature(
            PackageManager.FEATURE_CAMERA)) {
        // this device has a camera
        return true;
    } else {
        // no camera on this device
        return false;
    }
} 
```

我得到了异常

```
myCamera = Camera.open(); 
```

谢谢你

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T06:01:22.353

忘记添加

```
myCamera.release(); 
```

在我的代码中。因此它在我第一次启动应用程序时起作用。当我重新启动它时，相机服务不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T09:21:21.807

您将需要添加以下内容

```
private Preview mPreview;      // Global variable
mPreview = new Preview(this);  // onCreate()
setContentView(mPreview);      // onCreate() 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T08:31:03.990

您在源文件的顶部导入了错误的相机类（我沉没了），即`android.graphics.Camera`.

你需要`android.hardware.Camera`。

后：

```
myCamera = Camera.open(); - start working. 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-10-03T09:16:19.527

如果你想用相机拍照

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, CAMERA_REQUEST);` 
```

也加入这个功能

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAMERA_REQUEST) {
        photo = (Bitmap) data.getExtras().get("data");
        imageView.setImageBitmap(photo);
    }
} 
```

imageView 是您可能想要设置捕获的图像的视图。

# javascript - 生成客户端事件

> ID：12705227
> 
> 赞同：0
> 
> 时间：2012-10-03T09:09:06.983
> 
> 标签：javascript, javascript-events

我使用此代码在 Web 浏览器中生成鼠标单击：

```
var element = document.getElementById('element_id');
var o = document.createEvent('MouseEvents');
o.initMouseEvent('click', true, true, window, 1, 12, 345, 7, 220, false, false, true, false, 0, null);
element.dispatchEvent(o); 
```

它有效，但我无法理解 6th - 9th(12, 345, 7, 220) 参数的作用是什么？当我改变它时 - 它不会改变任何东西。我在[https://developer.mozilla.org](https://developer.mozilla.org/en-US/docs/DOM/event.initMouseEvent) 中发现这个参数是 screenX、screenY、clientX 和 clientY 坐标，但这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:16:09.103

这些参数被添加到创建的事件中。当您最初收到 mouseclick 事件时，您也会在事件对象中获得事件的当前 screenX/Y 和 clientX/Y 坐标。这样您就可以填写这些参数。如果在处理事件时不使用它们，它们将完全没有效果。

只需将这些参数显示在屏幕上的哪个位置 (screenx/y) 以及在浏览器边界内的哪个位置 (clientx/y) 发生了点击。

您可以在此处阅读有关参数的信息：

[https://developer.mozilla.org/en-US/docs/DOM/event.screenX](https://developer.mozilla.org/en-US/docs/DOM/event.screenX)

[https://developer.mozilla.org/en-US/docs/DOM/event.screenY](https://developer.mozilla.org/en-US/docs/DOM/event.screenY)

[https://developer.mozilla.org/en-US/docs/DOM/event.clientX](https://developer.mozilla.org/en-US/docs/DOM/event.clientX)

[https://developer.mozilla.org/en-US/docs/DOM/event.clientY](https://developer.mozilla.org/en-US/docs/DOM/event.clientY)

# iphone - 当我重新启动我的应用程序时，本地数据库是空白的

> ID：12705230
> 
> 赞同：1
> 
> 时间：2012-10-03T09:09:23.763
> 
> 标签：iphone, sqlite

```
 [arrMessages removeAllObjects];
    [arrMessages addObjectsFromArray:[appDelegate.skdb lookupAllForSQL:@"Select * from tblMessage where isActive = 'T'"]];
    NSLog(@"%@",arrMessages);
    if(arrMessages.count > 0)
    {
        [appDelegate showAlert:@"From DB"];
    }
    else
    {
        [appDelegate showAlert:@"Go To Live"];
        [appDelegate.skdb insertArray:arrMessages forTable:@"tblMessage"];
    } 
```

当我第一次运行我的应用程序时，它会在本地数据库中运行并插入。然后每次它都来自本地。这可以。但后来我从后台退出了应用程序。然后再次启动应用程序。它去生活。它应该从本地数据库中获取数据。

# objective-c - 从函数显示 webView 的变化

> ID：12705234
> 
> 赞同：0
> 
> 时间：2012-10-03T09:09:34.277
> 
> 标签：objective-c, view, uiviewcontroller, webview

在我的项目中，我显示了一个`viewController`班级

```
settings.m 
```

在`viewController`调用触摸按钮事件之后，我调用了`webView`在加载 java 脚本后显示动画的本地函数，如下所示：

```
 [self.webView setFrame:CGRectMake( 0.0f, 480.0f, 320.0f, 480.0f)]; 
    [UIView beginAnimations:@"settingsAnimate" context:nil];
    [UIView setAnimationDuration:1.5];
    [self.webView setFrame:CGRectMake( 0, 120, 320, 320)]; 
    [self.viewController.view addSubview:self.webView];
    [UIView commitAnimations]; 
```

它的工作...

但现在我想在其他类中发生事件时调用，所以我在 settings.m 中使用下面的代码创建了一个函数，在我的事件发生后我从该类调用该函数：

```
settings *ss = [settings alloc];
[ss showAnimation]; 
```

我进入该功能`settings.m`但没有任何反应......可能是什么问题？

尝试使用委托：在我的`Options.m`，它进入函数但 webView 不更改。

```
@protocol IGameP
- (void) showAnimation;
@end

@interface options : CDVPlugin<IGameP>{
    id <IGameP> delegate;

}

@property (nonatomic,assign) id <IGameP> delegate; 
```

在

```
options.m:

settings *s1t = [settings alloc];
[self setDelegate: s1t];

[self.delegate showAnimation]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:15:39.730

使用[**委托**](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)进行反向消息传递（即在其他类中调用函数）。因此，您希望在另一个视图中实现您的要求，最好是使用**委托**

# plone - 在 Plone 中管理视图的顺序

> ID：12705235
> 
> 赞同：3
> 
> 时间：2012-10-03T09:09:34.847
> 
> 标签：plone

如何手动打乱 viewlet 的顺序`<head>`并查看 Plone 中当前启用的注册？*自然，这些 viewlet 在@@manage-viewlets*页面上是不可见的。

我有一个问题，Products.TinyMCE 已设法`<head>`在站点上的其他视图之前注册其配置视图。我想知道如何手动解决问题。

[https://dev.plone.org/ticket/13239](https://dev.plone.org/ticket/13239)

# combobox - 选择任何项目时不会触发组合框的 Selected index changed 事件

> ID：12705236
> 
> 赞同：0
> 
> 时间：2012-10-03T09:09:35.300
> 
> 标签：combobox

我有一个表单，其中有两个组合框和一个网格，我已经在组合框的 selectedindex 更改事件上编写了过滤代码，为组合框设置了SuggestAppend 属性。当我输入一个国家名称，例如印度并按输入选择索引更改事件不会立即触发，当我单击某个地方时，它会触发并提供输出。请建议我该怎么做。在此先感谢

protected void cbCountry_SelectedIndexChanged(object sender, EventArgs e) { GetCondition(); 填充网格（）；}

```
 public string GetCondition()
        {
            string Condition = "";
            if (cbEmployee.SelectedIndex > 0)
            {
                Condition = Condition + " And reg_no=" + cbEmployee.SelectedValue;
            }

            if (cbCountry.SelectedIndex > 0)
            {
                Condition = Condition + " And country='" + cbCountry.SelectedItem.Text + "'";
            }
  return Condition;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:15:40.617

签入声明事件的表单设计器 (designer.cs)

this.cbCountry.SelectedIndexChanged += new System.EventHandler(this.cbCountry_SelectedIndexChanged);

如果未声明，您可以在设计器或表单加载中添加它

# android - 如何在 AVD 相册中上传图片？

> ID：12705248
> 
> 赞同：-1
> 
> 时间：2012-10-03T09:10:24.300
> 
> 标签：android, virtual, avd

大家好，我正在开发一个安卓应用程序。我想知道如何将图像存储在 Android 虚拟设备库中并将其用于应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:12:47.047

为此，您需要在模拟器的 SD 卡中加载图像。[这个链接](http://www.streamhead.com/android-tutorial-sd-card/)有你需要的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T17:29:58.133

对我来说，“媒体扫描”并没有解决问题。所以我为模拟器激活了网络摄像头并使用相机拍照，图像将存储到图库中。如果您正在测试任何可能必须从图库中选择图像的应用程序，请遵循此过程。

# python - 通过 COM 连接到 Outlook 时出错

> ID：12705249
> 
> 赞同：11
> 
> 时间：2012-10-03T09:10:29.723
> 
> 标签：python, outlook, win32com

我有以下python代码

```
o = win32com.client.Dispatch("Outlook.Application")
ns = o.GetNamespace("MAPI")
profile = ns.Folders.Item("Profile Name")
tasks = profile.Folders.Item("Tasks")
print tasks.Items 
```

当我运行它时，脚本因以下错误而崩溃：

```
Traceback (most recent call last):
  File "start.py", line 47, in <module>
    o = win32com.client.Dispatch("Outlook.Application")
  File "C:\Python27\lib\site-packages\win32com\client\__init__.py", line 95, in Dispatch
    dispatch, userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,clsctx)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 108, in _GetGoodDispatchAndUserName
    return (_GetGoodDispatch(IDispatch, clsctx), userName)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 85, in _GetGoodDispatch
    IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch)
pywintypes.com_error: (-2146959355, 'Server execution failed', None, None) 
```

我也试过：

```
win32com.client.gencache.EnsureDispatch("Outlook.Application") 
```

不知道该怎么做以及问题出在哪里

更新：仅当 Outlook 正在运行时才会发生这种情况，但发出 getActiveObject 崩溃并显示“操作不可用”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-19T19:47:06.280

错误是`CO_E_SERVER_EXEC_FAILURE`，这很可能意味着 Outlook 在与您的进程不同的安全上下文中运行。任一应用程序是否以提升的权限运行（以管理员身份运行）？

您的代码何时以及如何运行？

2016 年 6 月 17 日更新：只需发布评论中提到的解决方案以使其更加明显：以普通用户或提升权限运行 Outlook 和 python 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-19T18:27:03.307

我有同样的问题，我使用的是 Python 2.7 的 64 位安装。我重新安装了 Python 2.7 的 32 位版本，并且能够使用客户端调度调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T14:50:32.080

尝试将您的脚本移动到另一个目录并从那里执行它。当我遇到它时，这解决了这个问题，虽然我不确定问题的根本原因（似乎是一个模糊的错误与 win32 API，如 Nuno 所建议的那样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-19T12:11:58.297

我也遇到了同样的错误，

其背后的原因是上次应用程序调用 com 并没有正确退出或退出时出现一些错误。所以下次您无法调用它。

我已经关闭并重新打开了 Outlook 并重新运行了我的 py 代码，现在它运行良好。

使用这段代码来避免将来出现此错误

```
fx = win32com.client.Dispatch('CimplicityME.Application')
try:
    # do stuff
except:
    fx.Quit() 
```

参考：[https ://www.mail-archive.com/python-win32@python.org/msg11258.html](https://www.mail-archive.com/python-win32@python.org/msg11258.html)

# logging - 如何设置 Varnish 日志记录？

> ID：12705252
> 
> 赞同：14
> 
> 时间：2012-10-03T09:10:31.757
> 
> 标签：logging, varnish

我想让 Varnish 记录请求。我找到了 command `varnishlog -a -w /var/log/varnish.log`，但它没有记录任何内容。

然后我发现Varnish默认不写日志。但是我找不到日志记录的配置选项。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-03T10:48:37.100

如果您想以[NCSA 通用日志格式](http://en.wikipedia.org/wiki/Common_Log_Format)记录 HTTP 请求，您需要使用`varnishncsa`. 在 CentOS/RedHat 上，Varnish RPM 软件包包含一个 varnishncsa 初始化脚本，您可以使用它来开始记录。默认情况下，它记录到`logfile="/var/log/varnish/varnishncsa.log"`.

此外，如果您希望通过单个 Varnish 安装服务多个不同的主机，您还需要在日志中包含主机名。这可以通过以下设置来完成`/etc/sysconfig/varnishncsa`

```
DAEMON_OPTS="$DAEMON_OPTS -F '%{Host}i %h %l %u %t \"%r\" %s %b \"%{Referer}i\" \"%{User-agent}i\"'" 
```

请注意，Anshu 链接中描述的方法仅将 Varnish 通过的请求记录到后端服务器。*永远不会记录缓存命中请求*（在 Varnish 5.0 之前 - 见下文）。因此以这种方式收集的 HTTPD 日志不能用于统计分析。

**更新：**正如@VikrantPogula 提到的，从 Varnish 5.0 开始，所有客户端请求都会被记录 - 包括缓存命中。这是默认行为，可以使用`-c`开关显式打开。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-04T04:27:27.463

Varnish 中的度量标准是人们经常遇到的问题。

获得一些一次性请求指标相对容易，但随着时间的推移进行整体跟踪通常涉及使用 varnishncsa。这是[关于 Varnish 安装的指南](http://www.section.io/varnish-install-quick-and-detailed/)，其中包括公制设置

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-10T08:03:56.903

作为对 Ketola 的回答，您可以通过传递`-c`标志让 varnishncsa 记录甚至缓存命中请求。这将允许您使用 HTTPD 日志来分析统计信息。

示例：`varnishncsa -c -a -w ~/varnish.log`将以默认 NCSA 格式将缓存命中请求写入文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-08T10:19:44.020

由于我降落在这里并且建议的修复没有帮助：

我的 varnishncsa.log 是空的，进程正在运行。

事实证明，我必须指定日志格式（任何格式）。

由于这种洞察力本身并没有修复我的初始化脚本，所以我使用[这个策略](https://lists.gt.net/varnish/misc/24863#24863)修复了它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-04T10:51:03.203

这些文件`/etc/default/varnish*`在带有 systemd 的系统中已弃用。只需运行以下命令：

```
systemctl enable varnishncsa.service
systemctl start varnishncsa.service 
```

您还可以修改守护程序参数`/lib/systemd/system/varnishncsa.service`

# java - JSF outputScript 和 JavaScript 不被 EL 解析？

> ID：12705256
> 
> 赞同：1
> 
> 时间：2012-10-03T09:10:39.970
> 
> 标签：java, jsf-2, java-ee-6, el

> **可能重复：在这种情况下该帖子的解决方案不可行，请重新打开该帖子！**
> [JSF bean 属性未在外部 JavaScript 文件中评估](https://stackoverflow.com/questions/11491085/jsf-bean-property-not-evaluated-in-external-javascript-file)

EL 解析器不翻译包含`<outputScript>`标签的文件（JavaScript 文件）。尝试访问资源包时。

`<h:outputScript library="js" name="myScripts.js" target="head"/>`;

myScripts.js 文件：

> alert("#{msg.browser_not_html5_compatible}");

结果是当警报窗口呈现时我得到了相同的字符串。

如果我的 XHTML 文件的标记中有这行 JavaScript `<script>`，EL 解析器将用捆绑包中的正确资源字符串替换它；

```
<script>
    alert("#{msg.browser_not_html5_compatible}");
</script> 
```

*我可以让 EL 解析器翻译我包含的 ( `<h:outputScript>`) JavaScript 文件以访问资源包吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:34:37.103

## 小服务程序

一种选择可能是创建一个[servlet](https://stackoverflow.com/tags/servlets/info)，它加载您的消息包并创建一个 Javascript 文件，其中包含一个 JSON 对象，该对象包含消息键和值。它可能看起来像：

```
var messages = {
  "browser_not_html5_compatible": "You browser..."
, "other_key": "Other value"
}; 
```

如果您有一个大型资源包，并且您不想将所有消息公开给 Javascript，您可以在特定的 Javascript 消息前加上`js_`. 这样您就可以轻松地遍历资源包`keySet`并仅使用 Javascript 键：

```
for (String key : resourceBundle.keySet()){
  if (key.startsWith("js_")){
    // Do something with resourceBundle.getString(key);
  }
} 
```

在您的 JSF 页面上，您必须添加生成的 Javascript。如果需要，可以使用以下命令将视图的语言环境传递给 servlet `#{view.locale}`：

```
<h:outputScript library="js" name="/path-to-servlet/#{view.locale}" target="head"/>
<h:outputScript library="js" name="myScripts.js" target="head"/> 
```

你`myScripts.js`可以使用：

```
alert(messages.browser_not_html5_compatible); 
```

## JSP

servlet 选项的一个变体是使用 JSP 创建包含 JSON 的 Javascript。您可以通过将内容类型设置为`application/javascript`：

```
<%@ page contentType="application/javascript; charset=UTF-8" %> 
```

您需要[EL](https://stackoverflow.com/tags/el/info) 2.2 来迭代资源包`keySet`（因为没有 getter 可以访问它）。

# c# - 如何重新计算一些东西〜每秒一次？

> ID：12705259
> 
> 赞同：0
> 
> 时间：2012-10-03T09:10:48.287
> 
> 标签：c#

我需要做一些非常快速的重新计算〜每秒。最好的方法是什么？正在使用专用线程并且`Thread.Sleep`可以吗？

```
 Task.Factory.StartNew(() => 
        {
            while (true)
            {
                RecalculateState();
                Thread.Sleep(1000);
            }
        }, TaskCreationOptions.LongRunning); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:12:34.137

这会起作用 - 但另一种选择是使用计时器，例如[`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)or [`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)。

你应该考虑：

*   如果重新计算状态需要超过一秒钟，您希望发生什么？
*   `RecalculateState`从任意线程调用您的方法是否完全安全？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:12:20.760

您可以使用[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)[间隔](http://msdn.microsoft.com/en-us/library/system.timers.timer.interval.aspx)1 秒。

它已经在一个新*线程*中运行。

请注意事实，*如果* `RecalculateState`运行时间比预期的时间间隔长（出于 1000 个原因），您必须处理呼叫重叠，因此您必须以某种方式管理这种情况。

一种可能的解决方案是仅在方法执行完成后才运行新代码，并测量执行时间和间隔之间的差异。但这并不是一件容易的事。幸运的是，有人已经考虑过这个问题。

可以查看[Reactive Extensions](http://blogs.msdn.com/b/rxteam/archive/2012/08/15/reactive-extensions-v2-0-has-arrived.aspx)，它在最新版本中特别关注时间相关执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:13:15.640

您不能使用计时器并进行定时事件吗？像这样的东西？

```
Observable.Timer(TimeSpan.FromSeconds(5), TimeSpan.FromSeconds(1)).Timestamp()
       .Subscribe(MyOnTimedEventMethod); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:18:15.937

我建议为此使用计时器。

成员：

```
private readonly Timer _timer; 
```

在构造函数中实例化计时器，例如：

```
_timer= new Timer(OnTimerEllapsed, null, 0, 1000); 
```

打回来：

```
private void OnTimerEllapsed(object sender)
{
    RecalculateState();
} 
```

# google-app-engine - GAE 无法在 virtualenv 中导入 Web.py 模块

> ID：12705260
> 
> 赞同：0
> 
> 时间：2012-10-03T09:10:50.043
> 
> 标签：google-app-engine, virtualenv, web.py, virtualenvwrapper

我正在尝试在 virtualenv 中设置一个 Web.py (0.37) 项目以在 Google App Engine (1.7.2) 上运行，但我`ImportError: No module named web`从 appserver 获得了一个。

我已经从我的 virtualenv 中安装了 web.py `python setup.py install`，并且可以确认它已正确安装，因为我可以从 python 解释器中导入它。

我实际的 GAE 文件夹在 virtualenv 之外，但链接如下：

`ln -s ~/Development/google_appengine $VIRTUAL_ENV/google_appengine`

并添加到我的python路径中`$VIRTUAL_ENV/lib/python2.7/site-packages/gae.pth`

我必须缺少一个额外的步骤，这是错误消息：

```
 ERROR    2012-10-03 09:03:17,442 wsgi.py:203] 
Traceback (most recent call last):
  File "/home/sett/Development/google_appengine/google/appengine/runtime/wsgi.py", line 195, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/home/sett/Development/google_appengine/google/appengine/runtime/wsgi.py", line 239, in _LoadHandler
    handler = __import__(path[0])
  File "/home/sett/Development/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 719, in Decorate
    return func(self, *args, **kwargs)
  File "/home/sett/Development/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1923, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "/home/sett/Development/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 719, in Decorate
    return func(self, *args, **kwargs)
  File "/home/sett/Development/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1787, in FindAndLoadModule
    description)
  File "/home/sett/Development/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 719, in Decorate
    return func(self, *args, **kwargs)
  File "/home/sett/Development/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 1730, in LoadModuleRestricted
    description)
  File "/home/sett/wip/rigmarolesoup/main.py", line 1, in <module>
    import web
ImportError: No module named web 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T04:15:11.637

应用引擎不允许您从站点包中导入第 3 方模块；您必须将 web.py 复制到您的应用程序目录中。

# php - Magento如何在调整大小后获取原始图像文件？

> ID：12705268
> 
> 赞同：0
> 
> 时间：2012-10-03T09:11:13.660
> 
> 标签：php, jquery, image, magento, resize

我正在magento中建立一个网上商店。在产品详细信息页面上，我正在调整 Magento 本身的图像大小，这样它就不必加载非常大的图像。

当我单击图像时，它应该会打开一个带有图像的灯箱，但这次它必须更大。

但是因为我调整了它的大小，所以质量真的很低。

还有一件事我似乎无法弄清楚。我还有一些较小的图像，当它们悬停时应该显示为主图像。如果我将鼠标悬停在它们上面，我的调整大小将不再起作用。

我希望有人能指出我的错误:)

这是我的代码：

用于获取和调整图像大小的 HTML/PHP 代码。

```
<p class="product-image">
<?php
    $_img = '<img id="image1" src="'.$this->helper('catalog/image')->init($_product, 'image')->resize(235, 350).'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'" width="235" height="350    "  />';
    echo $_helper->productAttribute($_product, $_img, 'image');
?> 
```

用于在悬停时切换图像的 Javascript 代码。

```
function imageswitcher(imagename){  
jQuery('#image1').attr('src', imagename);
var options =   {
    zoomrange: [<?php echo Mage::getStoreConfig('featurezoom/zoomrange/start');?>, <?php echo Mage::getStoreConfig('featurezoom/zoomrange/end');?>],
    magnifiersize: [<?php echo Mage::getStoreConfig('featurezoom/magnifiersize/height');?>,<?php echo Mage::getStoreConfig('featurezoom/magnifiersize/width');?>],
    magnifierpos: '<?php echo Mage::getStoreConfig('featurezoom/general/magnifierpos');?>',
    cursorshade: true,
    largeimage: imagename //<-- No comma after last option!
        }
    jQuery('#image1').addimagezoom(options); 
```

}

```
function doTimer(imageName){
myTimer=setTimeout(function(){
    imageswitcher(imagename);
}, 2000); 
```

}

```
Event.observe(window, 'load', function() {
    jQuery('#image1').addimagezoom({    
    zoomrange: [<?php echo Mage::getStoreConfig('featurezoom/zoomrange/start');?>, <?php echo Mage::getStoreConfig('featurezoom/zoomrange/end');?>],
    magnifiersize: [<?php echo Mage::getStoreConfig('featurezoom/magnifiersize/height');?>,<?php echo Mage::getStoreConfig('featurezoom/magnifiersize/width');?>],
    magnifierpos: '<?php echo Mage::getStoreConfig('featurezoom/general/magnifierpos');?>',
    cursorshade: true,      
    largeimage: '<?php echo $this->helper('catalog/image')->init($_product, 'image');?>' //<-- No comma after last option!
})
}); 
```

用于打开定位和关闭灯箱的 jQuery 代码。

```
(function(window, $, undefined) {

        jQuery(function() {
            /*$(window).on('click', function(e) {
                console.log(e.target);
                //e.preventDefault();
            });*/

            $('.zoomtracker').on('click', function(e) {
                removeLightbox();
                $('body').css('overflow-y', 'hidden'); // hide scrollbars!
                $('<div id="overlay"></div>')
                  .css('top', $(document).scrollTop())
                  .css('opacity', '0')
                  .appendTo('body');

                $('<div id="lightbox"></div>')
                  .hide()
                  .appendTo('body');

                var img = new Image();
                img.onload = function() {

                    var width  = img.width,
                        height = img.height;

                    $('<img id="lightboxImage" />')
                      .attr('width', '235')
                      .attr('src', img.src)
                      .load(function() {
                        positionLightboxImage(e);
                      })
                      .click(function() {
                        removeLightbox();
                      })
                      .appendTo('#lightbox');
                };
                img.src = $('#image2').attr('src');
                $('#overlay').click(function(e){
            })
                /*var height = $('<img />').attr('width', .width());
                alert(height);

                $('<img />')
                  .attr('src', $(this).attr('href'))
                  .load(function() {
                    positionLightboxImage(e);
                  })
                  .click(function() {
                    removeLightbox();
                  })
                  .appendTo('#lightbox');

                return false;*/
                e.preventDefault();
              });
        });

            function positionLightboxImage(e) {
              var top = 173;
              var left = 271;

              /* In plaats van de img width en height de hoogte en breedte van het scherm berekenen en aan de hand heirvan het centrum bepalen. */

              $('#lightbox')
                .css({
                  'top': top,
                  'left': left
                })
                .fadeIn(500)
                .animate({'width': '640','left': '50%', 'margin-left': -($('#lightbox').width()/2), 'top': '19%', 'margin-top': -($('#lightbox').height()/2)}, {queue: false}, 8000);

              $('#lightboxImage')
                .animate({'width': '550','height': '930'}, {queue: false}, 8000)

            }

            function removeLightbox() {
              $('#overlay, #lightbox')
                .fadeOut(500, function() {
                  $(this).remove();
                  $('body').css('overflow-y', 'auto'); // show scrollbars!
                })
                .animate({'width': '235','left': '-72', 'margin-left': ($('#lightbox').width()/2), 'top': '-295', 'margin-top': ($('#lightbox').height()/2)}, {queue: false}, 8000);

                $('#lightboxImage')
                   .animate({'width': '235', 'height': '350'}, {queue: false}, 8000)
            }

            jQuery.fn.center = function () {
                this.css("position","absolute");
                this.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) + 
                                                            $(window).scrollTop()) + "px");
                this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) + 
                                                            $(window).scrollLeft()) + "px");
                return this;
            }

    })(window, jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:17:52.963

Try to use `naturalWidth` and `naturalHeight` methods after image load and your scripts initialised.

[jsFiddle example.](http://jsfiddle.net/tM39H/)

```
var img = $("img")[0];
alert( img.naturalWidth + "x" + img.naturalHeight ); 
```

Note: if you wan to do this with another way, you can inspect this answer too: [https://stackoverflow.com/a/670433/1428241](https://stackoverflow.com/a/670433/1428241)

# java - 一个（java？）处理电子邮件的程序

> ID：12705272
> 
> 赞同：0
> 
> 时间：2012-10-03T09:11:19.473
> 
> 标签：java, email

这个问题想了很久，一直没有解决，所以去社区问问。我的大部分时间都在电子邮件中（我想其他人也是如此），我对电子邮件客户端让您组织/存档消息的方式不太满意。考虑到电子邮件的普遍性（我整天都在私人和工作活动中使用它们），想到我不能选择来自一个人的所有电子邮件并将它们格式化为 Word/LaTeX 文档，这让我发疯了！

我的目标是更自由、更轻松地“处理”电子邮件消息、转换和编辑它们、将它们分组到文本文件中，并且能够选择一种在大多数客户端中不是预定义功能的存储方式（使用 Mac例如，邮件，你得到一个我讨厌的 ARCHIVE.mbox 文件，因为邮件被“锁定”在那里而不是存储以供后续使用）。

我是一名优秀的 Java 程序员，所以我检查了 JavaMail API。我能够发送消息（嗯，网上有大量现成的示例），但我想要实现的是对对象“消息”进行更复杂的操作。您认为具有学习曲线的 JavaMail 是要走的路吗？我应该开始使用另一种编程语言吗？据我所知，那里没有准备好任何东西（这让我感到震惊：我是唯一一个想对她的消息进行文本编辑的人吗？）。

非常感谢您的任何回答！F

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:14:23.073

查看为电子邮件操作提供更高级别 API的[Apache James 。](http://james.apache.org/)

# asp.net-mvc - 如何从 MVC WEB API 控制器返回 JSON

> ID：12705276
> 
> 赞同：8
> 
> 时间：2012-10-03T09:11:24.597
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我了解 WEB API 使用内容协商来接受 - Content-Type 以返回 json 或 xml。这还不够好，我需要能够务实地决定是要返回 json 还是 xml。

互联网上充斥着过时的 using 示例，`HttpResponseMessage<T>`MVC 4 中不再存在这些示例。

```
 tokenResponse response = new tokenResponse();
response.something = "gfhgfh";

    if(json)
    {
        return Request.CreateResponse(HttpStatusCode.OK, response, "application/json");
    }
    else
    {
         return Request.CreateResponse(HttpStatusCode.OK, response, "application/xml");
    } 
```

如何更改上述代码以使其正常工作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-03T09:13:53.997

试试这样：

```
public HttpResponseMessage Get()
{
    tokenResponse response = new tokenResponse();
    response.something = "gfhgfh";

    if(json)
    {
        return Request.CreateResponse(HttpStatusCode.OK, response, Configuration.Formatters.JsonFormatter);
    }
    else
    {
         return Request.CreateResponse(HttpStatusCode.OK, response, Configuration.Formatters.XmlFormatter);
    }    
} 
```

甚至更好的是，为了避免让你的控制器被这样的管道基础设施代码弄乱，你还可以编写一个自定义媒体格式化程序并在其中执行这个测试。

# progress-4gl - 比较两个正在进行的领域 4GL

> ID：12705279
> 
> 赞同：0
> 
> 时间：2012-10-03T09:11:27.250
> 
> 标签：progress-4gl, openedge

我有用于表客户的缓冲区 bufCustomer 用于表订单的全局缓冲区 gbufOrder。但是这段代码不起作用我写了类似 find bufCustomer where bufCustomer.CustomerID = gbufOrder.CustomerID no-lock no-error 的代码。但是如果我检查表格数据，数据就在那里，但是如果我写了上面这样的代码，它就不起作用了。有没有其他方法可以获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:37:31.823

带缓冲区：

```
DEFINE BUFFER gbufOrder FOR Order.
DEFINE BUFFER bufCustomer FOR Customer.

FIND FIRST gbufOrder NO-LOCK NO-ERROR.
IF AVAILABLE(gbufOrder) THEN
   DO:
      FIND bufCustomer where bufCustomer.CustNum = gbufOrder.CustNum NO-LOCK NO-ERROR.

      IF AVAILABLE(bufCustomer) THEN
         DO:
            DISP bufCustomer.name.
         END.
      ELSE
         DO:
            MESSAGE "Customer is not available!"
               VIEW-AS ALERT-BOX ERROR BUTTONS OK.
         END.
   END.
ELSE
   DO:
      MESSAGE "Order is not available!"
          VIEW-AS ALERT-BOX ERROR BUTTONS OK.
   END. 
```

无缓冲

```
FIND FIRST Order NO-LOCK NO-ERROR.
IF AVAILABLE(Order) THEN
   DO:
      FIND Customer where Customer.CustNum = Order.CustNum NO-LOCK NO-ERROR.

      IF AVAILABLE(Customer) THEN
         DO:
            DISP Customer.name.
         END.
      ELSE
         DO:
            MESSAGE "Customer is not available!"
               VIEW-AS ALERT-BOX ERROR BUTTONS OK.
         END.
   END.
ELSE
   DO:
      MESSAGE "Order is not available!"
          VIEW-AS ALERT-BOX ERROR BUTTONS OK.
   END. 
```

该程序适用于`sports200`示例数据库（位于 PROGRESS / OpenEdge 安装目录中）

更新：

*   检查客户的可用性
*   添加不带 BUFFER 的示例代码

# maven - Maven 组装插件。有什么方法可以直接从描述符文件中解压缩/解压缩存档，而不是依赖 antrun 插件？

> ID：12705281
> 
> 赞同：3
> 
> 时间：2012-10-03T09:11:35.673
> 
> 标签：maven, maven-assembly-plugin

我正在使用 Maven 程序集插件版本 2.2.1 以自定义的专有格式构建包。作为这个过程的一部分，我需要提取一堆*外部*档案（外部我的意思是它们没有被列为 maven 依赖项，但它们是文件系统上的任意文件）。

你知道maven组装是否能够做到这一点？我看过，显然，它能够在任意文件夹中提取一堆*依赖*项，但无法提取外部存档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:26:00.660

使用`<unpack>true</unpack>`in your`<dependencySet>`是要走的路。

Maven 不支持外部存档。因此，您需要使用附加它们，例如，`build-helper:attach-artifact`然后您可以通过`<dependencySet>`

# 更新

其中一条评论想知道如何避免将附加的工件安装到 maven 存储库中（本地/远程）

解决方案是使用一个非传递依赖的虚拟模块。

我们依赖于正在构建的程序集不被用作传递依赖项。

所以你从一个虚拟模块开始，它看起来有点像

```
<project>
  ...
  <packaging>pom</packaging>
  ...
  <properties>
    <maven.deploy.skip>true</maven.deploy.skip>
    <maven.install.skip>true</maven.install.skip>
    <!-- or you could override the plugin configuration for a safer - but less quick - solution -->
  </properties>
  ...
</project> 
```

该虚拟模块可以使用附加文件`build-helper:attach-artifacts`

您的程序集模块将仅列出具有传递依赖关系的依赖关系，`<scope>provided</scope>`并`<optional>true</optional>`防止其成为传递依赖关系。（如果程序集是安装程序包并且不会被其他 Maven 构建使用，则不需要。

然后，压缩内容将从一个存档流式传输到另一个存档，原始文件不会复制到远程存储库……*但是*您始终需要在构建程序集的任何反应器中构建**hack**模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:04:58.330

从 Maven 的角度来看，“文件系统上的任意文件”没有多大意义。

您应该能够从“您的机器”、“集成服务器（jenkins ...）”的任何位置运行您的 maven pom。Ant 是用于“自制”构建的工具，maven 提倡约定优于配置和可重用性。

因此，您的项目所依赖的任何资源都应该是**依赖项**，或者**以某种方式包含在您的项目**中。

我希望我的所有项目都可以作为 id 构建，只需简单的 svn 签出即可。任何不在项目中的东西都应该从 mvn 存储库中下载。

因此，当我必须编写一个汇编项目时，我会确保项目中的所有内容都可用，作为资源。如果没有，你总是可以为共享资源构建一个简单的项目/pom，或者使用一些特殊的插件来为你做这件事。

# qt - 在我的 Qt symbain 应用程序中使用 qjson

> ID：12705282
> 
> 赞同：1
> 
> 时间：2012-10-03T09:11:41.157
> 
> 标签：qt, qjson

我正在使用 Qt 开发 Symbian 应用程序。

我从[链接](http://qjson.sourceforge.net/get_it/)下载了 qjson 。我按照该链接中的说明进行操作，是的，我有 qjson.sis 文件。现在我需要在我的应用程序中使用它。当我尝试时，我得到了这个错误。

启动失败：命令答案 [命令错误]，要请求 1 个值：'C|101|Processes|start|""|"MyProject.exe"|[""]|[]|true' {"Code" :-46,Format="Failed to create the process (验证可执行文件和所有必需的 DLL 已被传输) (权限被拒绝)"} 错误：'创建进程失败（验证可执行文件和所有必需的 DLL 已被传送）转移）（权限被拒绝）'代码：-46

当我按下启动图标时，它显示“出于安全原因无法执行文件”。

然后我在我的手机中安装了 qjson.sis，然后尝试安装我的应用程序，我收到了这个错误。

:-1: 错误：安装失败：'无法覆盖另一个包拥有的文件：c:\sys\bin\qjson.dll 在'代码：131073; 有关错误代码的说明，请参见[http://wiki.forum.nokia.com/index.php/Symbian_OS_Error_Codes](http://wiki.forum.nokia.com/index.php/Symbian_OS_Error_Codes)

在我的 .pro 文件中，我有这个。

```
symbian: {
addFiles.sources = qjson.dll
addFiles.path = /sys/bin
DEPLOYMENT += addFiles
}

symbian: {
LIBS +=  -lqjson
} 
```

有任何想法吗...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:50:29.787

好的，我刚刚解决了一个类似的问题：您当前构建的 QJson 库的 UID3 似乎与您在手机上安装的前一个不同。

安装在设备上的每个 .SIS 文件都有一个标识符。手机操作系统跟踪哪个包安装了哪个文件，如果某个新包想要覆盖现有文件，则操作系统会检查新包是否具有与要覆盖的文件的先前所有者相同的“身份”。

如果身份不匹配，则会弹出此错误。

这可能发生的原因有很多。例如，您可以在构建之前简单地更改 QJson 的 UID3。或者，也许**您忘记**设置库的 UID3？检查 QJson 项目中的“src.pro”并转到文件的一半，您会看到以下行：

```
#TARGET.UID3 = 
TARGET.CAPABILITY = ReadDeviceData WriteDeviceData 
```

如果有 #，那么您忘记设置它并且假设构建过程，好吧，让我们说“随机值”。所以，现在，将它设置为某种东西，即。`TARGET.UID3 = 0xE0123456`. 请记住在准备好发布应用程序后进行更正。

如果 UID3 损坏的程序包进入您的手机并阻止某些内容 - 只需：卸载它。转到`Settings/Installations/Installed`，然后找到“qjson”并卸载它。之后，qjson 的下一次安装应该没有问题成功。

# javascript - 使用 jQuery.post() 生成 javascript 函数

> ID：12705285
> 
> 赞同：-1
> 
> 时间：2012-10-03T09:11:46.257
> 
> 标签：javascript, jquery

我不知道如何执行以下操作，所以我也不确定要搜索什么。

为了验证我的注册表单，我有一个 javascript 函数，它检查用户名文本字段的数据库 onblur 中插入的用户名是否存在。

```
function checkUsername(username){
$.post("checkmail.php", {username: username} , function(data){
var $response=$(data);
var response = $response.filter('#username-response').text();
if(response == "taken") {
    document.getElementById('username').style.borderColor = rood;
    valid = false;
}
}); 
```

}

这很好用，但现在我想在提交表单时再次验证它，以防用户决定提交现有的用户名。

```
function validateForm() {
    var valid = true;
    //checks different fields
    //now check voor username existence
    var username = document.getElementById('username').value;
    checkUsername.call(username);

    if (!valid) {
        return false;
    }
    else {
        return true;
    }
} 
```

我对 Javascript 不够熟悉，无法使其正常工作。大概是想错了方向……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:04:30.380

当您使用返回数据进行验证时，您可以为此使用同步 ajax 调用。

# c# - AsyncCallback，来自不同类和多种形式的调用

> ID：12705289
> 
> 赞同：0
> 
> 时间：2012-10-03T09:11:56.127
> 
> 标签：c#, winforms, asynchronous

我正在尝试使用[Singleton Pattern](http://codebender.denniland.com/a-singleton-base-class-to-implement-the-singleton-pattern-in-c/)构建简单的类。

我想要完成的是在我的主要类 2 函数中负责处理异步方法调用的结果。一会处理正确的结果，二会处理所有错误。

执行所有异步操作的类如下所示：

```
class EWS : SingletonBase<EWS>
{
    private EWS()
    {
        //private constructor
    }

    private int LongRunningMethod(Action<string> error)
    {
        int x = 0;
        for (int i = 0; i < 10; i++)
        {
            //Console.WriteLine(i);
            x += i;
            Thread.Sleep(1000);
        }
        //here I can do try...catch and then call error("Description")
        return x;
    }

    public class CommandAndCallback<TSuccess, TError>
    {
        public TSuccess Success { get; set; }
        public TError Error { get; set; }
    }

    public void DoOperation(Action<int> success, Action<string> error)
    {
        Func<Action<string>, int> dlgt = LongRunningMethod;
        //Func<Action<string>, int> dlgt = new Func<Action<string>, int>(LongRunningMethod);

        CommandAndCallback<Action<int>, Action<string>> callbacks = new CommandAndCallback<Action<int>, Action<string>>() { Success = success, Error = error };

        IAsyncResult ar = dlgt.BeginInvoke(error,MyAsyncCallback, callbacks); 
    }

    public void MyAsyncCallback(IAsyncResult ar)
    {
        //how to access success and error here???
        int s ;
        Func<Action<string>, int> dlgt = (Func<Action<string>,int>)ar.AsyncState;
        s = dlgt.EndInvoke(ar);
        //here I need to call success or error that were passed to DoOperation
    }
} 
```

在我的主课中，我想这样调用我的方法：

```
private void Operation_OK(int count)
{
     //here handle OK
}

private void Operation_ERROR(string error)
{
     //here handle ERROR
}

private void button1_Click(object sender, EventArgs e)
{
    EWS.Instance.DoOperation(Operation_OK, Operation_ERROR);
} 
```

**我应该如何修改我的 EWS 类，以便我可以像上面所示那样调用它。
如何使用 lambda 表达式代替委托？** 调用这样的方法是个好主意吗？我需要在我的班级中有 2 或 3 个方法，并且能够以所有形式独立地调用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:25:34.987

代替

```
private void MyAsyncCallback(IAsyncResult ar)
{
    int s;
    MethodDelegate dlgt = (MethodDelegate)ar.AsyncState;
    s = dlgt.EndInvoke(ar);
    MessageBox.Show(s.ToString());
} 
```

和

```
private void MyAsyncCallback(IAsyncResult ar)
{
    int s;
    MethodDelegate dlgt = (MethodDelegate)((AsyncResult)ar).AsyncDelegate;
    s = dlgt.EndInvoke(ar);
    MessageBox.Show(s.ToString());
} 
```

更新的答案

IAsyncResult ar = dlgt.BeginInvoke（错误，MyAsyncCallback，回调，错误）；

现在在 MyAsyncCallback

```
string error = (string) ar.AsyncState;
if(error!=null)
    return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:25:44.047

得到这个工作：

```
 private int LongRunningMethod(Action<string> error)
    {
        int x = 0;
        try
        {
            x = 20 / x;
        }
        catch (Exception ex)
        {
            error("Bad error!");
        }
        return x;
    }

    public class CommandAndCallback<TCallback, TError>
    {
        public TCallback Callback { get; set; }
        public TError Error { get; set; }
        public Func<Action<string>, int> Delegate { get; set; }
    }

    public void DoOperation(Action<int> callback, Action<string> error)
    {
        Func<Action<string>, int> dlgt = LongRunningMethod;
        CommandAndCallback<Action<int>, Action<string>> callbacks = new CommandAndCallback<Action<int>, Action<string>>() { Callback = callback, Error = error, Delegate=dlgt };
        IAsyncResult ar = dlgt.BeginInvoke(error,MyAsyncCallback, callbacks); 
    }

    private void MyAsyncCallback(IAsyncResult ar)
    {
        int s ;
        CommandAndCallback<Action<int>, Action<string>> callbacks= (CommandAndCallback<Action<int>, Action<string>>)ar.AsyncState;
        s = callbacks.Delegate.EndInvoke(ar);
        callbacks.Success(s);
    } 
```

这工作得很好。
只有一个问题，如果`LongRunningMethod`我调用错误方法`MyAsyncCallback`也被调用。

所以这只是要修复的一件事，所以当调用错误方法`MyAsyncCallback`时不会被调用。

# python - 正则表达式在 Python 中拆分单词

> ID：12705293
> 
> 赞同：23
> 
> 时间：2012-10-03T09:12:17.297
> 
> 标签：python, regex, split

我正在设计一个正则表达式来**拆分**给定**文本**中的所有**实际单词**：

 ***输入示例：*

```
"John's mom went there, but he wasn't there. So she said: 'Where are you'" 
```

*预期输出：*

```
["John's", "mom", "went", "there", "but", "he", "wasn't", "there", "So", "she", "said", "Where", "are", "you"] 
```

我想到了这样的正则表达式：

```
"(([^a-zA-Z]+')|('[^a-zA-Z]+))|([^a-zA-Z']+)" 
```

在 Python 中拆分后，结果包含`None`项目和空格。

如何摆脱无项目？为什么空格不匹配？

 *编辑：
在空格上拆分，将给出如下项目：`["there."]`
并且在非字母上拆分，将给出如下项目：`["John","s"]`
在非字母上拆分`'`，将给出如下项目：`["'Where","you'"]`*

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-03T09:25:37.610

您可以使用字符串函数代替正则表达式：

```
to_be_removed = ".,:!" # all characters to be removed
s = "John's mom went there, but he wasn't there. So she said: 'Where are you!!'"

for c in to_be_removed:
    s = s.replace(c, '')
s.split() 
```

**但是**，在您的示例中，您不想删除撇号，`John's`但您希望将其删除`you!!'`。所以字符串操作在这一点上失败了，你需要一个微调的正则表达式。

编辑：可能一个简单的正则表达式可以解决您的问题：

```
(\w[\w']*) 
```

它将捕获所有以字母开头的字符并继续捕获，而下一个字符是撇号或字母。

```
(\w[\w']*\w) 
```

这第二个正则表达式是针对一个非常具体的情况......第一个正则表达式可以捕获像`you'`. 这将避免这种情况，并且仅在 is 在单词内（不在开头或结尾）时才捕获撇号。但是在那一点上，出现了一种情况，您无法`Moss' mom`使用第二个正则表达式捕获撇号。您必须决定是否在以 wit 结尾并定义所有权*的名称中捕获尾随撇号。*

例子：

```
rgx = re.compile("([\w][\w']*\w)")
s = "John's mom went there, but he wasn't there. So she said: 'Where are you!!'"
rgx.findall(s)

["John's", 'mom', 'went', 'there', 'but', 'he', "wasn't", 'there', 'So', 'she', 'said', 'Where', 'are', 'you'] 
```

更新 2：我在我的正则表达式中发现了一个错误！它不能捕获单个字母后跟撇号之类的`A'`。固定的全新正则表达式在这里：

```
(\w[\w']*\w|\w)

rgx = re.compile("(\w[\w']*\w|\w)")
s = "John's mom went there, but he wasn't there. So she said: 'Where are you!!' 'A a'"
rgx.findall(s)

["John's", 'mom', 'went', 'there', 'but', 'he', "wasn't", 'there', 'So', 'she', 'said', 'Where', 'are', 'you', 'A', 'a'] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T09:14:56.790

你的正则表达式中有太多的捕获组；使它们不被捕获：

```
(?:(?:[^a-zA-Z]+')|(?:'[^a-zA-Z]+))|(?:[^a-zA-Z']+) 
```

演示：

```
>>> import re
>>> s = "John's mom went there, but he wasn't there. So she said: 'Where are you!!'"
>>> re.split("(?:(?:[^a-zA-Z]+')|(?:'[^a-zA-Z]+))|(?:[^a-zA-Z']+)", s)
["John's", 'mom', 'went', 'there', 'but', 'he', "wasn't", 'there', 'So', 'she', 'said', 'Where', 'are', 'you', ''] 
```

这只返回*一个*为空的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-02T22:32:03.687

这个正则表达式只允许一个结束撇号，后面可能跟一个字符：

```
([\w][\w]*'?\w?) 
```

演示：

```
>>> import re
>>> s = "John's mom went there, but he wasn't there. So she said: 'Where are you!!' 'A a'"
>>> re.compile("([\w][\w]*'?\w?)").findall(s)
["John's", 'mom', 'went', 'there', 'but', 'he', "wasn't", 'there', 'So', 'she', 'said', 'Where', 'are', 'you', 'A', "a'"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-14T10:58:53.137

我是 python 新手，但我想我已经弄清楚了

```
import re
s = "John's mom went there, but he wasn't there. So she said: 'Where are you!!'"
result = re.findall(r"(.+?)[\s'\",!]{1,}", s)
print(result) 
```

结果 ['John', 's', 'mom', 'went', 'there', 'but', 'he', 'wasn', 't', 'there.', 'So', 'she' , '说:', '在哪里', '是', '你']**

# c# - 我的 dll 配置文件或为什么无法解析 Section..？

> ID：12705294
> 
> 赞同：2
> 
> 时间：2012-10-03T09:12:19.143
> 
> 标签：c#, .net, configuration-files

我遇到了一个问题，我无法解析文档标准配置。

例如：

```
private string GetConfigKey(string param)
        {
            Configuration dllConfig = ConfigurationManager.OpenExeConfiguration(this.GetType().Assembly.Location);
            AppSettingsSection dllConfigAppSettings = (AppSettingsSection)dllConfig.GetSection("appSettings");
            return dllConfigAppSettings.Settings[param].Value;
        } 
```

结果，我以一种形式从文件中获取设置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="host" value="mail.ololo.by"/>
  </appSettings>
  <configSections>
      <section name="provideConfig" type="System.Configuration.DictionarySectionHandler"/>
      <section name="provideMailStatus" type="System.Configuration.DictionarySectionHandler" />
  </configSections>
 <provideConfig>
     <add key="post@gate.ololo.by" value="Mail Subject 1"/>
     <add key="guga@gate.ololo.by" value="Mail Subject 2"/>
 </provideConfig>
  <provideMailStatus>
    <add key="status1" value="send"/>
    <add key="status2" value="draft"/>
    <add key="status2" value="other"/>
  </provideMailStatus>
</configuration> 
```

但

```
Hashtable hashtable =
                (Hashtable)ConfigurationManager.GetSection("provideConfig");
 foreach (DictionaryEntry dictionaryEntry in hashtable)
            {
                Console.WriteLine(dictionaryEntry.Key+" "+dictionaryEntry.Value);
            } 
```

但不幸的是 configSections 有问题。我似乎无法理解。MB，我走错了方向？

PS Config 文件无法命名`"app.config"`- 只有项目 dll 名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:35:42.237

谢谢大家，我解决了这个问题。我可以判断是否有人会感兴趣。

[配置部分设计器 Codeplex](http://csd.codeplex.com/)

[.NET 配置代码生成器](http://nconfiggen.codeplex.com/)

最好的问候，尤恩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T23:02:26.767

Config file should be named as executable file name and ".config". Even this executable file uses this dll-file. For example: ConSoleApplication.exe uses MyLibrary.dll. Then config file must be named ConSoleApplication.exe.config

If You need some other name for config file read [this](https://stackoverflow.com/questions/6150644/change-default-app-config-at-runtime/6151688#6151688)

# unicode - 如何检测手机是否支持 J2ME 中特定语言的 unicode

> ID：12705297
> 
> 赞同：2
> 
> 时间：2012-10-03T09:12:21.900
> 
> 标签：unicode, java-me, transliteration

我正在 J2me 中设计一个应用程序，我只需要提供特定语言的界面，比如乌尔都语。我正在做的是使用 Unicode 字符打印标签，例如“欢迎”到我的语言中，并以正确的方式显示。由于该应用程序应该在不同的移动模型上运行，我只想知道是否可以通过编程方式检查运行我的应用程序的特定移动设备是否支持我的语言的 unicode？因为如果没有，那么它将以默认英语显示标签。除了将英文字母转换为我的语言字符之外，我还没有编码，我只是想知道，如果可能的话，找到一种方法来执行这个检查。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:41:50.927

有一个`System`属性，您可以在其中读取手机上选择的当前语言。

```
String locale = System.getProperty("microedition.locale"); 
```

前两个字母标识语言，后两个字母标识国家。例如，`"en-US"`在美国代表英语，而`"pt-BR"`在巴西代表葡萄牙语。
**一件好事是`String`根据当前语言加载**所有的 GUI 。假设您将所有这些字符串存储在一个数组中并像这样初始化它：

```
String messages [] = null;

if (locale.startsWith("pt")) {
    messages = new String [] {
        "Novo Jogo",
        "Configurações",
        "Ajuda"
    };
} else { // default language is English
    messages = new String [] {
        "New Game",
        "Settings",
        "Help"
    };
} 
```

然后定义一些常量来标识每个索引。

```
static final int MSG_NEW_GAME = 0;
static final int MSG_SETTINGS = 1;
static final int MSG_HELP = 2; 
```

并像这样使用它们（其中 menuList 是 List 的一个实例）：

```
menuList.append(messages[MSG_NEW_GAME], null);
menuList.append(messages[MSG_SETTINGS], null);
menuList.append(messages[MSG_HELPS], null); 
```

有了这个，您的应用程序就支持两种语言。基于区域设置的消息启动案例越多，对您的最终用户就越好。

如[http://smallandadaptive.blogspot.com.br/2008/12/internationalization-or-just-i18n-count.html所示](http://smallandadaptive.blogspot.com.br/2008/12/internationalization-or-just-i18n-count.html)

# oracle - 如何获取oracle中所有物化视图的列表

> ID：12705306
> 
> 赞同：27
> 
> 时间：2012-10-03T09:13:06.880
> 
> 标签：oracle

如何获取所有物化视图的列表。？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-03T09:21:57.447

试试这个：

```
SELECT *
FROM  all_snapshots; 
```

`all_snapshots`您也可以使用`all_mviews`视图代替。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-03T09:21:38.843

```
select * from all_mviews; 
```

或者

```
select * from dba_mviews; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-04T19:01:45.007

我以前从未使用过 all_snapshots。

这是另一种方法：

```
select * from all_objects where OBJECT_TYPE='MATERIALIZED VIEW'; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-05T08:53:29.100

实际上 ALL_MVIEWS 和 ALL_SNAPHOTS 只显示用户已授予访问权限的视图。要查看数据库中的所有视图，您必须查询 DBA_MVIEWS 或 DBA_SNAPHOTS。您需要特殊权限或角色来查询此视图，例如系统权限 SELECT ANY DICTIONARY 或角色 SELECT_CATALOG_ROLE。类似的语句适用于其他 ALL_ 和 DBA_ 视图。

# scala - Scala案例类继承

> ID：12705309
> 
> 赞同：93
> 
> 时间：2012-10-03T09:13:18.077
> 
> 标签：scala, inheritance, case-class

我有一个基于 Squeryl 的应用程序。我将我的模型定义为案例类，主要是因为我发现拥有复制方法很方便。

我有两个严格相关的模型。字段是一样的，很多操作是通用的，要存放在同一个DB表中。**但是**有些行为只在两种情况中的一种情况下才有意义，或者在两种情况下都有意义但不同。

到目前为止，我只使用了一个案例类，带有一个区分模型类型的标志，并且所有基于模型类型而不同的方法都以 if 开头。这很烦人，而且不是很安全。

我想做的是考虑祖先案例类中的常见行为和字段，并让两个实际模型继承自它。但是，据我了解，从案例类继承在 Scala 中是不受欢迎的，如果子类本身就是一个案例类（不是我的案例），甚至是禁止的。

> 从案例类继承时我应该注意哪些问题和陷阱？在我的情况下这样做有意义吗？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-10-03T10:21:23.237

我在不重复代码的情况下避免案例类继承的首选方式有些明显：创建一个通用（抽象）基类：

```
abstract class Person {
  def name: String
  def age: Int
  // address and other properties
  // methods (ideally only accessors since it is a case class)
}

case class Employer(val name: String, val age: Int, val taxno: Int)
    extends Person

case class Employee(val name: String, val age: Int, val salary: Int)
    extends Person 
```

如果您想更细粒度，请将属性分组为单独的特征：

```
trait Identifiable { def name: String }
trait Locatable { def address: String }
// trait Ages { def age: Int }

case class Employer(val name: String, val address: String, val taxno: Int)
    extends Identifiable
    with    Locatable

case class Employee(val name: String, val address: String, val salary: Int)
    extends Identifiable
    with    Locatable 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-10-14T11:18:17.477

由于这对许多人来说是一个有趣的话题，让我在这里阐明一些观点。

您可以采用以下方法：

```
// You can mark it as 'sealed'. Explained later.
sealed trait Person {
  def name: String
}

case class Employee(
  override val name: String,
  salary: Int
) extends Person

case class Tourist(
  override val name: String,
  bored: Boolean
) extends Person 
```

是的，您必须复制这些字段。如果你不这样做，就不可能[在其他问题](http://www.scala-lang.org/old/node/1582)中实现正确的平等。

但是，您不需要复制方法/函数。

如果一些属性的重复对您来说非常重要，那么请使用常规类，但请记住它们不太适合 FP。

或者，您可以使用组合而不是继承：

```
case class Employee(
  person: Person,
  salary: Int
)

// In code:
val employee = ...
println(employee.person.name) 
```

作曲是您也应该考虑的有效且合理的策略。

如果你想知道密封特征是什么意思——它只能在同一个文件中扩展。也就是说，上面的两个案例类必须在同一个文件中。这允许详尽的编译器检查：

```
val x = Employee(name = "Jack", salary = 50000)

x match {
  case Employee(name) => println(s"I'm $name!")
} 
```

给出一个错误：

```
warning: match is not exhaustive!
missing combination            Tourist 
```

这真的很有用。现在你不会忘记处理其他类型的`Person`s（人）。这基本上是`Option`Scala 中的类所做的。

如果这对您来说无关紧要，那么您可以将其设为非密封并将案例类放入他们自己的文件中。也许还有作文。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-03T09:33:08.100

case 类非常适合值对象，即不改变任何属性并且可以与 equals 进行比较的对象。

但是在存在继承的情况下实现 equals 是相当复杂的。考虑两个类：

```
class Point(x : Int, y : Int) 
```

和

```
class ColoredPoint( x : Int, y : Int, c : Color) extends Point 
```

所以根据定义 ColorPoint(1,4,red) 应该等于 Point(1,4) 它们毕竟是同一个点。所以 ColorPoint(1,4,blue) 也应该等于 Point(1,4)，对吧？但当然 ColorPoint(1,4,red) 不应该等于 ColorPoint(1,4,blue)，因为它们有不同的颜色。你去了，等式关系的一个基本属性被打破了。

**更新**

您可以使用从特征继承来解决许多问题，如另一个答案中所述。一个更灵活的选择通常是使用类型类。请参阅[Scala 中的类型类有什么用处？](https://stackoverflow.com/questions/5408861/what-are-type-classes-in-scala-useful-for)或[http://www.youtube.com/watch?v=sVMES4RZF-8](http://www.youtube.com/watch?v=sVMES4RZF-8)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-08-08T15:36:41.030

在这些情况下，我倾向于使用组合而不是继承，即

```
sealed trait IVehicle // tagging trait

case class Vehicle(color: String) extends IVehicle

case class Car(vehicle: Vehicle, doors: Int) extends IVehicle

val vehicle: IVehicle = ...

vehicle match {
  case Car(Vehicle(color), doors) => println(s"$color car with $doors doors")
  case Vehicle(color) => println(s"$color vehicle")
} 
```

显然，您可以使用更复杂的层次结构和匹配，但希望这能给您一个想法。关键是利用案例类提供的嵌套提取器

# sql-server - SSRS 下拉列表值

> ID：12705313
> 
> 赞同：0
> 
> 时间：2012-10-03T09:13:45.837
> 
> 标签：sql-server, ssrs-2008, reporting-services

我们在 SSRS 中有一份报告，其中包含由共享数据源和查询提供的下拉列表参数。

如果我使用 ReportViewer 查看报告，这些工作将按预期进行。

但是，我还使用 SSRS Web 服务来提取参数和可用值。在这种情况下，当下拉列表从手动输入的列表移动到查询时，可用值列表为空。

我假设问题是因为 Web 服务只是摸索 RDL 文件并且不执行附加到参数的查询。

我的问题是，有没有办法让它这样做或获得可用的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:19:39.863

阅读 MSDN 后，答案似乎是调用 GetReportParameters() 并将 ForRendering 设置为 true：

> 如果 ForRendering 的值为 false，则返回的参数元数据表示当前与指定报表关联的参数数据。如果任何参数值是基于查询的，并且您有兴趣返回基于查询的参数有效值列表，则需要将 ForRendering 设置为 true，此外，对于基于查询的参数，您需要确保已传入所有返回查询参数所需的凭据信息。

# cocoa - 如何动态调整 NSTextField 的大小？

> ID：12705316
> 
> 赞同：0
> 
> 时间：2012-10-03T09:13:50.523
> 
> 标签：cocoa, resize, nstextfield

我希望 NSTextField 在用户键入时变大，在按下退格键时变小等。

我发现的唯一一件事是 [textField sizeToFit] 但它不会动态运行，它只是调整大小的一种方式。是否有属性或我需要设置的东西？

ps 我只需要它水平调整大小（单行文本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:54:18.293

理查德所说的，除了你需要知道调整你的文本字段的大小。要获取此值，请使用 NSTextField 的布局管理器并在其上调用类似 boundingRectForGlyphRange:inTextContainer: 的内容，其中包含所有字形。这应该告诉您包围所有文本的矩形的尺寸。获取这些尺寸并将它们设置为 NSTextField 内容的宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:20:59.250

在实现的 NSTextField 上设置一个委托

```
- (void)controlTextDidChange:(NSNotification *)aNotification 
```

每次调用委托时，根据您上面的想法调整控件的大小。

# web-applications - Web - 检测手势支持

> ID：12705318
> 
> 赞同：0
> 
> 时间：2012-10-03T09:13:59.820
> 
> 标签：web-applications, frameworks, touch, standards

CSS3 媒体查询让我可以根据设备的宽度定制布局。服务器端的用户代理检查让我可以进一步定制特定于设备的内容。

我已经简要地阅读（但尚未彻底研究）像 jQuery Mobile 或 Sencha 这样的框架可能（或确实）提供触摸手势作为一种交互形式。

是否有标准来确定设备是否支持触摸手势？（接下来我将向用户提供触摸或单击控件）。这最好由服务器完成，还是他们的客户端技术提供这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T05:12:55.687

sencha 和 jquery mobile 仍然是 javascript 框架。

检查[http://modernizr.github.com/Modernizr/touch.html](http://modernizr.github.com/Modernizr/touch.html)以了解触摸设备的 javascript 检测。

并且谈论服务器端检测，它总是可以被愚弄。javascript检测是一种更好的方法。但这也不是万无一失的，我们只能用浏览器技术做这么多。

# java - Primefaces 3.4 dataexporter 不导出值 p:cellEditor

> ID：12705319
> 
> 赞同：5
> 
> 时间：2012-10-03T09:13:59.760
> 
> 标签：java, jsf, primefaces

我正在使用 Primefaces 3.4 并尝试使用单元内编辑导出数据表。它似乎不起作用。

我做了以下事情：

修改`org.primefaces.component.export.Exporter`第 143 行并添加：

```
else if (component instanceof CellEditor) { // Handle in-cell editable datatables
    return exportValue(context, ((CellEditor) component).getFacet("output"));
} 
```

这导致顶部有一个额外的行，以及带有数据的实际单元格右侧的一个额外列。使用 Excel 文件没问题，因为它们不“可见”，但 PDF 看起来很糟糕。

1.  有没有办法让 PF 3.4 在不更改源代码的情况下支持这一点？
2.  如果上述答案是否定的，我可以在没有额外行/列的情况下生成 PDF 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:56:10.400

> *有没有办法让 PF 3.4 在不更改源代码的情况下支持这一点？*

不，您必须提供您的自定义`Exporter`实现/覆盖。几个月前我已经将此报告为[问题 4013 。](http://code.google.com/p/primefaces/issues/detail?id=4013)它不仅提到`CellEditor`，而且`HtmlGraphicImage`（我们使用图像来显示布尔状态，`alt`我们希望在 PDF/XML/XLS/CSV 报告中显示）。

你所能做的就是给它投票，这样它就有希望得到更多的关注，或者在[PF 论坛](http://forum.primefaces.org/)上重新提问。

* * *

> *如果上述答案是否定的，我可以在没有额外行/列的情况下生成 PDF 吗？*

`exportable="false"`您可以通过设置属性从导出中隐藏列。

```
<p:column exportable="false"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:31:43.190

> *有没有办法让 PF 3.4 在不更改源代码的情况下支持这一点？*

是的。有一个**解决方法**

制作两份您的专栏。第一个用于**用户**，第二个用于**dataExporter**。

通过`exportable="false"`在第一列中设置，将其从 dataExporter 中隐藏。

通过`style="display: none"`在第二列中设置，对用户隐藏它。

顺便说一下 dataExporter 不支持 headerText 所以如果你需要你的 headerText 导出你必须使用 old style `<f:facet name="header">`。

```
<p:column headerText="CLOSE DATE" exportable="false">
    <p:cellEditor>
        <f:facet name="output">
            <h:outputText value="#{sale.closedate}"/>
        </f:facet>
        <f:facet name="input">
            <h:inputText value="#{sale.closedate}"/>
        </f:facet>
    </p:cellEditor>
</p:column>

<p:column style="display: none">
    <f:facet name="header">
         CLOSE DATE
    </f:facet>
    <h:outputText value="#{sale.closedate}"/>
</p:column> 
```

但是这种**解决方法**很**丑陋**，并且会使您的 dataTable 大小增加一倍并且**难以呈现**。

正如 BalusC 提到的，我们需要通过投票或在他们的论坛上发帖来提高对这个问题的认识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T14:23:24.830

到目前为止，我发现的唯一解决方案是创建自己的类来扩展 Exporter 并覆盖 method `protected String exportValue(FacesContext context, UIComponent component)`。你应该只添加 `else if (component instanceof CellEditor) { return exportValue(context, ((CellEditor) component).getFacet("output")); }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-07T20:29:03.413

答案是……用单元格编辑器创建一个数据表……

然后创建一个没有单元格编辑器但相同字段的另一个表到

出口商应该参考第二张表，它是！:D

问候！

# symfony - symfony2 中的 PreExecute() 函数

> ID：12705327
> 
> 赞同：0
> 
> 时间：2012-10-03T09:14:45.143
> 
> 标签：symfony

我使用 symfony2 开发了一个应用程序，我想知道如何为以下情况编写 preExecute() 函数 symfony2：当我登录系统时；当我从同一屏幕注销时，它会将我重定向到用户个人资料部分，它会终止会话并在登录屏幕上重定向我，但是当我点击浏览器的后退按钮时，它将在个人资料屏幕上重定向我，这会显示我所有的用户信息，但是当我从同一屏幕单击下一个过程，然后在登录页面上重定向我。

我只想为这种情况添加像 symfony1.4 这样的 preExecute 函数，所以我检查了会话，如果它为空，那么如果我在从系统注销时点击浏览器的后退按钮，它将重定向到登录页面。

我已经在 profileController.php 文件中添加了以下代码，

```
public function indexAction() {
    $session = $this->get('request')->getSession();
    $userId = $session->get('id');

    if ($userId == 0 || $userId == '') {
        return $this->redirect($this->generateUrl('_security_login'));
    } else {
        //my code 
    }
}

//logout action
public function dologoutAction(){
   $this->get('security.context')->setToken(null);
   $this->get('request')->getSession()->invalidate();
   $this->container->get('request')->getSession('session')->clear();
   return $this->redirect($this->generateUrl('_security_login'));
} 
```

如果有任何其他方式来处理这种情况，那么请帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:39:36.577

只需要`ROLE_USER`配置文件操作中的角色，防火墙就会执行重定向到登录表单然后重定向返回的内容：

```
/**
 * @Secure("ROLE_USER")
 */
public function profileAction()
{
    // ...
} 
```

更多信息请阅读 Symfony 书籍的[*安全*章节](http://symfony.com/doc/current/book/security.html)。

# java - 刷新片段内的视图

> ID：12705342
> 
> 赞同：20
> 
> 时间：2012-10-03T09:15:41.570
> 
> 标签：java, android, android-fragments, android-view, android-loadermanager

我已经搜索了许多看起来像这样的问题，但没有在其中任何一个中找到我的答案。

我有一个活动，它有 3 个可通过操作栏访问的选项卡。我通过添加 3 个片段来扩展我扩展视图类的自定义视图来实现这一点。

在数据库更改的那一刻，我尝试通过调用 invalidate()/postinvalidate() 来刷新选项卡中的视图，但这不起作用。就像我考虑的许多其他选项一样，调用片段的 onCreateView 也是如此。

但是，当我转到另一个选项卡并返回时，已进行了更改，并且我的视图已按应有的方式更新。

如何模拟更改到另一个选项卡时发生的相同事情？会发生什么。我试图查看 Fragment 生命周期（试图调用 onCreateView()）来弄清楚，但它只是不想像它应该的那样刷新/重绘。

数据已正确加载，因为当我更改为另一个选项卡时数据已更改。

我删除了一些代码，因为它不再相关。我实现了 Cursorloaders 而不是我自己的观察者模式来通知更改。这是我现在的主要活动。

问题是如果我想在这些片段中重绘视图，我现在应该怎么做。如果我应用 fragmentObject.getView().invalidate() 它不起作用。我遇到了和以前一样的问题，但是现在我通知数据库更改的观察者已通过加载器正确实现。

```
public class ArchitectureActivity extends Activity implements LoaderManager.LoaderCallbacks<Cursor> {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.main);

    ActionBar actionbar = getActionBar();
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab EditTab = actionbar.newTab().setText("Edit");
    ActionBar.Tab VisualizeTab = actionbar.newTab().setText("Visualize");
    ActionBar.Tab AnalyseTab = actionbar.newTab().setText("Analyse");

    Fragment editFragment = new EditFragment();
    Fragment visualizeFragment = new VisualizeFragment();
    Fragment analyseFragment = new AnalyseFragment();

    EditTab.setTabListener(new MyTabsListener(editFragment));
    VisualizeTab.setTabListener(new MyTabsListener(visualizeFragment));
    AnalyseTab.setTabListener(new MyTabsListener(analyseFragment));

    actionbar.addTab(EditTab);
    actionbar.addTab(VisualizeTab);
    actionbar.addTab(AnalyseTab);

    ArchitectureApplication architectureApplication = (ArchitectureApplication)getApplicationContext();
    architectureApplication.initialize();

    getLoaderManager().initLoader(0, null, this);
    getLoaderManager().initLoader(1, null, this);
}

public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    if (id == 0){
        return new CursorLoader(this, GraphProvider.NODE_URI , null, null, null, null);
    } else if (id == 1){
        return new CursorLoader(this, GraphProvider.ARC_URI , null, null, null, null);
    }
    return null;
}

public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    // Reloading of data, actually happens because when switching to another tab the new data shows up fine
    Log.e("Data", "loaded");
}

public void onLoaderReset(Loader<Cursor> loader) {
}
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-07T17:21:44.603

1.  不要试图给`onCreateView()`自己打电话……这是一个生命周期方法，只能由框架调用。

2.  `Fragment`s 是可重用的 UI 组件。他们有自己的生命周期，展示自己的观点，定义自己的行为。您通常不需要`Activity`弄乱 a 的内部工作`Fragment`，因为`Fragment`'s 的行为应该是自包含的并且独立于任何特定的`Activity`.

    也就是说，我认为最好的解决方案是让你`Fragment`的每个人都实现`LoaderManager.LoaderCallbacks<D>`接口。每个都`Fragment`将初始化一个`Loader`（即，`CursorLoader`如果您使用`ContentProvider`由 SQLite 数据库支持的 a），`Loader`它将负责 (1) 在后台线程上加载数据，以及 (2) 监听对数据源，并`onLoadFinished()`在发生内容更改时提供新数据。

    此解决方案比您当前的解决方案更好，因为它完全是事件驱动的。您只需要在数据传递到时刷新视图`onLoadFinished()`（而不是每次单击新选项卡时都必须手动检查数据源是否已更改）。

3.  如果您很懒惰并且只想快速解决问题，那么您也可以在`Fragment`'s`onResume()`方法中刷新视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-21T22:36:42.617

我有一个类似（虽然不相同）的问题，我可以通过以下方式解决：

在我添加的片段中

```
public void invalidate() {
    myView.post(new Runnable() {
        @Override
        public void run() {
            myView.invalidate();
        }
    });
} 
```

当我想刷新片段的视图 myView 时，我从活动中调用了这个方法。post() 的使用确保视图仅在准备好绘制时才失效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T19:15:35.693

我找到了一种解决方法来刷新我的片段内的视图。每次更新数据库时，我都会重新创建（新的 CustomView）视图。之后我调用 setContentView(CustomView view)。它看起来更像是一个 hack，但它有效，而我尝试过的其他任何方法都没有。

虽然我的问题并没有真正解决，但我还是把奖励给了 Alex Lockwood。他对 Loaders 的建议使我的应用程序变得更好，并促使我继续寻找最终找到的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-30T15:07:13.863

我遇到过同样的问题。我的解决方案是分离片段并再次附加它。

```
 FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        Fragment f = getFragment(action);
        if(forceUpdate)
        {
            fragmentTransaction.detach(f);
            fragmentTransaction.attach(f);
        }
        fragmentTransaction.replace(R.id.mainFragment, f);
        fragmentTransaction.commit();
        currentAction = action; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-14T12:56:02.547

对我来说最快的解决方案：

```
 @Override
    public void onPause() {
        super.onPause();
        if (isRemoving() && fragmentView != null) {
            ((ViewGroup) fragmentView).removeAllViews();
        }
    } 
```

# c++ - 风格：内联函数声明

> ID：12705343
> 
> 赞同：0
> 
> 时间：2012-10-03T09:15:43.737
> 
> 标签：c++, coding-style, inline

> **可能重复：**
> [我应该何时为函数/方法编写关键字“内联”？](https://stackoverflow.com/questions/1759300/when-should-i-write-the-keyword-inline-for-a-function-method)

我不是 100% 确定，但据我所知，如果我在带有正文的 hpp 文件上声明一个函数，它将被视为被标记为内联（编译器将决定做什么），我的意思是：

```
//myfile.hpp
class StackOverflow{
public:
    void overflow(){_overflow = true;}
...
} 
```

将与以下内容相同：

```
//myfile.hpp
class StackOverflow{
public:
    ***inline*** void overflow(){_overflow = true;}
...
} 
```

如果我错了，那么问题就结束了，但除此之外，我真的很喜欢将函数标记为内联函数，即使没有必要，通用代码样式指南是否对此有所说明？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:24:32.437

`inline`由于在此上下文中提及关键字*没有提供任何信息*，因此请忽略它。这只是视觉上的混乱。

如果有一个选项可以使内联定义的函数成为非内联函数，这将是另一回事（以`private`-by-default 为例）：在这里，可以说即使它是默认值，也可以做出选择显式使它更容易理解。但这里别无选择。无论您做什么，在类体内定义的成员函数都是`inline`.

事实上，将其明确标记为`inline`类似于提供其他推断信息。你不会写下面的，对吧？

```
#define member
#define function

class StackOverflow{
public:
    member function inline void overflow() { _overflow = true; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T09:18:51.907

在类定义中定义函数体使函数隐含地与用关键字标记它相同`inline`。

就编码风格而言，仅在类中定义函数体并不是一个好习惯。

```
class Foo {
public:
  void method();  ← best practice: don't put the inline keyword here
  ...
};

inline void Foo::method()  ← best practice: put the inline keyword here
{ ... } 
```

[此 C++ 常见问题解答](http://www.parashift.com/c++-faq/inline-member-fns-more.html)解释了基本原理：

```
class Fred {
public:
  void f(int i, char c)
    {
      ...
    }
}; 
```

> 尽管这对编写课程的人来说更容易，但对所有读者来说却更难，因为它将课程的*“做什么”*与它的*“如何”*混合在一起。由于这种混合，我们通常更喜欢使用`inline`关键字在类主体之外定义成员函数。
> 理解这一点的洞察力：在面向重用的世界中，通常会有很多人使用您的类，但只有一个人（您自己）构建它；因此，您应该做有利于多数而不是少数的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:25:34.020

如果您在类中将函数声明为内联函数，就像`register`关键字一样，编译器可以确定（这是一个建议）它是否是一个明智的优化。一般来说，使用在类本身内联编程的内联函数是一个经验法则，但是它也可以在类的实现中完成，尽管并不常见，它提供的唯一好处是链接，如果你决定将 .h/.hpp 文件作为 API 标头传递。

# json - MVC3 在错误时返回 JSON 而不是 HTML

> ID：12705345
> 
> 赞同：2
> 
> 时间：2012-10-03T09:15:49.603
> 
> 标签：json, asp.net-mvc-3, exception-handling

我尝试使用全局属性

**编辑：**更新了最终解决方案

```
public class HandleAndLogErrorAttribute : HandleErrorAttribute
{
    private static readonly ILog log = Log<HandleAndLogErrorAttribute>.Create();

    public override void OnException(ExceptionContext filterContext)
    {
        if (!filterContext.ExceptionHandled)
        {
            log.Error("Unhandled exception", filterContext.Exception);
            if (filterContext.HttpContext.Request.IsAjaxRequest())
            {
                filterContext.Result = new { Message = filterContext.Exception.Message, StackTrace = filterContext.Exception.StackTrace }.AsJson();
                filterContext.ExceptionHandled = true;
                filterContext.HttpContext.Response.Clear();
                filterContext.HttpContext.Response.StatusCode = 500;
                filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;      
            }
            else
                base.OnException(filterContext);
        }
    }
} 
```

问题是 MVC 将忽略结果并呈现错误页面，如果我设置`filterContext.ExceptionHandled = true;`它不会忽略结果，但它会返回代码 200 而不是 500，因此我在客户端上的通用错误处理程序不会检测到错误。我不能返回 200，因为这样我的调用成功方法会以意外行为触发。

有任何想法吗？

# cocoa - Target orientation of iOS6 shouldAutorotate

> ID：12705348
> 
> 赞同：2
> 
> 时间：2012-10-03T09:16:06.607
> 
> 标签：cocoa, ios6

i want to allow the should rotate, based on the target orientation

```
[[UIDevice currentDevice] orientation] 
```

however the code above, when used in shouldRotate holds the current (old) orientation, not the target orientation

```
- (BOOL) shouldAutorotate {

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:01:56.310

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

这种方法应该为您解决问题。toInterfaceOrientation 保存目标方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:21:05.630

好吧，我想通了。始终在 shouldAutorotate 中返回 YES，然后执行以下操作：

```
- (NSUInteger)supportedInterfaceOrientations
{
    if ([UIDevice currentDevice].orientation == UIDeviceOrientationLandscapeLeft) {
        // Allow if you can
    } else if ([UIDevice currentDevice].orientation == UIDeviceOrientationPortrait) {
        // Allow if you can
    }
    // so on
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T09:54:14.703

除了返回是

```
-(BOOL)shouldAutorotate
{
return YES;
} 
```

你必须实施

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

可用的不同面具是：

```
UIInterfaceOrientationMaskPortrait
UIInterfaceOrientationMaskLandscapeLeft
UIInterfaceOrientationMaskLandscapeRight
UIInterfaceOrientationMaskPortraitUpsideDown
UIInterfaceOrientationMaskLandscape
UIInterfaceOrientationMaskAll
UIInterfaceOrientationMaskAllButUpsideDown 
```

您可能还想看：

[https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)

# ruby-on-rails - Rails Typhoeus Curl Trouble

> ID：12705351
> 
> 赞同：3
> 
> 时间：2012-10-03T09:16:23.357
> 
> 标签：ruby-on-rails, ruby, ubuntu, curl, libcurl

I'm scratching my head on this error since similar errors refer to instances of compiling libcurl from source; however, I am just simply trying to get a former rails project running on my Ubuntu 12.04.

```
Exception Trace from Running Rails Application Server

/var/lib/gems/1.9.1/gems/ffi-1.1.1/lib/ffi/library.rb:121:in `block in ffi_lib': Could not open library 'libcurl': libcurl: cannot open shared object file: No such file or directory. (LoadError)
Could not open library 'libcurl.so': libcurl.so: cannot open shared object file: No such file or directory
    from /var/lib/gems/1.9.1/gems/ffi-1.1.1/lib/ffi/library.rb:88:in `map'
    from /var/lib/gems/1.9.1/gems/ffi-1.1.1/lib/ffi/library.rb:88:in `ffi_lib'
    from /var/lib/gems/1.9.1/gems/typhoeus-0.4.2/lib/typhoeus/curl.rb:405:in `<module:Curl>'
    from /var/lib/gems/1.9.1/gems/typhoeus-0.4.2/lib/typhoeus/curl.rb:6:in `<module:Typhoeus>'
    from /var/lib/gems/1.9.1/gems/typhoeus-0.4.2/lib/typhoeus/curl.rb:5:in `<top (required)>'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `block in require'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `block in load_dependency'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:640:in `new_constants_in'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `load_dependency'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
    from /var/lib/gems/1.9.1/gems/typhoeus-0.4.2/lib/typhoeus.rb:5:in `<top (required)>'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `block in require'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `block in load_dependency'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:640:in `new_constants_in'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `load_dependency'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
    from /var/lib/gems/1.9.1/gems/panda-1.5.0/lib/panda/adapters/faraday.rb:2:in `<top (required)>'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `block in require'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `block in load_dependency'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:640:in `new_constants_in'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `load_dependency'
    from /var/lib/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
    from /var/lib/gems/1.9.1/gems/panda-1.5.0/lib/panda.rb:19:in `<top (required)>'
    from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
    from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
    from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
    from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
    from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler.rb:128:in `require' 
```

Any help or commentary is appreciated.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T12:59:45.120

libcurl 是否正确安装？Typhoeus 没有原生扩展，但它需要 libcurl 动态库 ( `.so`)，因为它与[FFI 库](https://github.com/ffi/ffi)一起使用：

```
# from lib/typhoeus/curl.rb
ffi_lib 'libcurl' 
```

我会说不需要开发文件（头文件），所以`sudo apt-get install libcurl3`应该这样做（否则通过安装带 SSL 支持的开发版本`sudo apt-get install libcurl4-openssl-dev`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-03T16:21:42.347

sudo apt-get install libcurl4-openssl-dev 为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T15:11:52.210

我尝试添加`libcurl-devel 7.57.0-1`到 msys2（在 Windows 上），但没有帮助。（`pacman -Ss libcurl`显示为已安装：

```
msys/libcurl 7.57.0-1 (libraries) [installed]
Multi-protocol file transfer library (runtime)
msys/libcurl-devel 7.57.0-1 (development) [installed]
Libcurl headers and libraries 
```

因此，对于在 Windows 上遇到相同问题的任何人，解决此问题的一种简单方法`LoadError: Could not open library 'libcurl'`是：

*   `libcurl.dll`从此处找到的一个包[https://curl.haxx.se/gknw.net/7.40.0/dist-w64/](https://curl.haxx.se/gknw.net/7.40.0/dist-w64/)中获取一个，并将其放在 PATH 上。

    （我只是把它放在下面`\ruby24\bin\`）

关于同一问题的相关问题：

*   [jekyll 服务依赖错误 - 无法打开“lib curl”](https://stackoverflow.com/questions/47720302/jekyll-serve-dependency-error-could-not-open-lib-curl/47754520#47754520)

*   [台风Windows安装](https://stackoverflow.com/questions/22525093/typhoeus-windows-installation)

*   [如何解决在 Windows 上使用 Rails 找不到的“libcurl”](https://stackoverflow.com/questions/39377541/how-to-solve-libcurl-not-found-with-rails-on-windows)

*   [如何在 Windows 7 64 位上安装 libcurl](https://stackoverflow.com/questions/41114671/how-to-install-libcurl-on-windows-7-64bit)

# .net - 具有值对象映射的流畅 Nhibernate 表

> ID：12705353
> 
> 赞同：0
> 
> 时间：2012-10-03T09:16:38.920
> 
> 标签：.net, oracle, nhibernate, fluent-nhibernate, nhibernate-mapping

您能否为以下场景建议一个有效的映射。两张表：

```
CREATE TABLE "ORDER"
  (
    "ID"      NUMBER(20,0) NOT NULL ENABLE,
    "STATUS_ID"  NVARCHAR2(10,0)
  );

CREATE TABLE "STATUS"
  (
    "ID"      NVARCHAR2(10,0) NOT NULL ENABLE,
    "DESCRIPTION"  NVARCHAR2(250,0)
  ); 
```

相应的类是：

```
public class Order
{
    public virtual Id { get; set; }
    public virtual Status { get; set; }
}

public class Status
{
    public virtual Id { get; set; }
    public virtual Description { get; set; }
} 
```

状态表是属性值对象的静态表，`Proposal.Status`绝不能由代码操作。我希望`Order`始终加载状态描述和代码，即 Eager Load `Proposal.Status`。

我读过这篇[Ayende 的博客文章](http://nhibernate.hibernatingrhinos.com/23/a-fluent-interface-to-nhibernate-part-2-value-objects)，但没有完全相同的场景，尽管我相信它很常见。

编辑：注意我正在尝试将其作为`Component Map`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:42:15.610

您正在尝试将具有身份的常规实体映射为组件（值对象）。来自 Ayende 的帖子：

> 在 DDD 中，您有实体和值对象的概念。**后者是不可变的，没有身份**。在 NHibernate 中，它们被**映射为 Component ，并且其字段嵌入到与包含实体相同的表中**。

当您将值类型映射到与父实体相同的表时，应使用组件映射。[您可以在文档](http://nhforge.org/doc/nh/en/index.html#mapping-types)中找到有关 NHibernate 类型的更多信息。

尝试使用 References 映射来实现，尽管您可能很想[使用 HasOne](https://stackoverflow.com/questions/2382943/hasone-vs-references-mapping-fluent-nhibernate)。

# java - Random NoClassDefFound error in Web Application

> ID：12705355
> 
> 赞同：5
> 
> 时间：2012-10-03T09:16:54.593
> 
> 标签：java, linux, jetty, noclassdeffounderror

Wondering if any guru out there could shed an idea on why the following randomly happens.

We have a web application we deploy in Jetty 6.1.26 running on a Linux installation with JRE 1.7_03

Not every time, but every now and then, when Jetty starts up - what appears to be a random class (from our project) seems to be the source of a NoClassDefFound error. If we restart Jetty they problem disappears.

The only pattern that occurs seems to be the classes at the root of the error are populated via JAXB annotations.

To give more of an idea of the frequency it feels this happens 1/50 times, if that.

I would be interested to know the how and the why for this error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:57:47.847

不确定这是否有帮助，但我们遇到了 Jetty 8 和 java 6 的注释问题。长话短说，该版本中的注释处理似乎依赖于 libasm，例如字节码检查。所以我们必须小心

*   我们用什么来编译我们的类（例如，JDK 版本等...）
*   我们不会通过依赖项提取多个 asm/javassist 库并最终加载错误的库

我不熟悉 Jetty 6 和 Jaxb 处理注释的方式，但我真的很惊讶你可以在 Java 7 上运行它们。你可以尝试用 Java 6 运行你的代码吗？

# jquery - Attaching the patch to JQueryUI

> ID：12705356
> 
> 赞同：0
> 
> 时间：2012-10-03T09:17:00.583
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

I have a problem in setting todayDate in Jquery Datepicker. While Searching on the issue I found this link

[http://bugs.jqueryui.com/ticket/5151](http://bugs.jqueryui.com/ticket/5151)

I could not understand how to attach the patch to the existing ui.

Can you help me??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:21:14.627

您可以在此线程中查看更多信息： [如何应用 jquery 补丁文件](https://stackoverflow.com/questions/7176673/how-to-apply-jquery-patch-file)

您需要将以“<”开头的行替换为以“>”开头的行。

**编辑：**
错误的复制/粘贴（该死）。我更正了链接。

# jquery - Jquery控制图像在div内上下移动

> ID：12705361
> 
> 赞同：2
> 
> 时间：2012-10-03T09:17:07.340
> 
> 标签：jquery, css, animation

**Jquery控制图像在div内上下移动**
嗨，我需要你的帮助，让图像在某个div内上下移动，

例如（我在stackoverflow中看到了这个例子）

[http://jsfiddle.net/PKBXL/29/](http://jsfiddle.net/PKBXL/29/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:34:21.147

```
$(document).ready(function() {
    var intId = setInterval(animateImage,1000);
    var intId=   setInterval(animateupImage,1000);
}); 

function animateImage() {
    $('#bee').animate({bottom: '-50%'}, 3000, 'linear', 1000);
      }
function animateupImage() {
   $('#bee').animate({bottom: '0%'}, 3000, 'linear',1000 );
  } 
```

[演示](http://jsfiddle.net/afshinprofe/PKBXL/42/)

# c# - How to duplicate a worksheet using Google API?

> ID：12705363
> 
> 赞同：1
> 
> 时间：2012-10-03T09:17:15.897
> 
> 标签：c#, google-api

I'm trying to create a worksheet in a spreadsheet which is a copy of the existing one. Via Google Docs user interface it is done by 'Duplicate' function of the context menu of a worksheet. Is it possible to copy the whole sheet at once and insert it to the other one? This code:

```
 public void CopyLastTab(SpreadsheetEntry spreadsheet, string newTabName)
   {
        WorksheetEntry tabToCopy = GetLastTab(spreadsheet);
        tabToCopy.Title.Text = newTabName;
        newTab = service.Insert(GetAllWorksheets(spreadsheet), tabToCopy);           
   } 
```

adds only a new empty worksheet. Copying cell by cell is too long and the matter is I need conditional formatting used on the previous sheet too. Please help.

# android - Keyboard issues arising on orientation change

> ID：12705366
> 
> 赞同：12
> 
> 时间：2012-10-03T09:17:38.970
> 
> 标签：android, keyboard

In my app I am using various edit text and text view and list view. Now my problem is **my keyboard appears again on orientation change**. Ideally when user minimize the keyboard, it should be in minimized state when device is tilted. But it reappears. How do we handle this situation.

My other problem is one of my edit text is some what at the end of screen. When keyboard appears, it hides the edit text. so user is not able to see what he is typing. What is the ideal way to handle this. thanks.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-03T09:23:22.040

所有问题的解决方案是这一行 android:windowSoftInputMode="stateUnchanged|adjustResize"

“stateUnchanged”将使键盘的状态与之前的状态相同。要么隐藏，要么可见。

“adjustResize”将使您的编辑文本可见。

希望这可以帮助。！！！

**编辑**

这需要在 android manifest 文件中添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-25T19:57:50.590

我有同样的问题。当您拥有 TextViews 时，要防止键盘在旋转时重新出现，您必须做两件事 -

1.  确保 TextView 没有焦点。即使隐藏了键盘，TextView 仍然可以聚焦。试着打电话

    ```
    textView.clearFocus() 
    ```

    并且您应该能够看到 TextView 中的差异。

2.  确保在它之前有另一个视图（如父线性布局，甚至只是一个宽度为 0 高度为 0 的线性布局），它具有这些属性 -

    ```
    android:focusable="true"
    android:focusableInTouchMode="true" 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T09:21:31.447

尝试将此代码添加到清单中的活动属性中

```
 android:windowSoftInputMode="stateHidden|adjustPan" 
```

喜欢

```
 <activity
            android:name=".MyActivity"
            android:windowSoftInputMode="stateHidden|adjustPan" > 
```

这应该可以解决您的两个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:20:32.023

对于第二个问题：您可以将布局设置为 ScrollView 以避免在键盘出现时隐藏编辑文本。将整个布局放在 ScrollView 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-24T05:57:15.850

我发现以下文档有助于理解与软键盘相关的各种标志： [https ://developer.android.com/guide/topics/manifest/activity-element.html#wsoft](https://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)

# php - Returning Different Results in PHPUnit Mock Object

> ID：12705368
> 
> 赞同：2
> 
> 时间：2012-10-03T09:17:48.797
> 
> 标签：php, mocking, phpunit

I've been working on getting our systems more compatible with PHPUnit so we can do more unit testing of our classes and have managed to get some of them working with mock objects, but I've run across a problem which I can't seem to get around.

One of the classes we have (which I'm creating a mock version of) is for queries. You pass the query string into it's "query()" method, it logs the query, runs it and returns the result. It also wraps the mysql_fetch_assoc with a method called "get_row()", which returns an array value much like the original.

The problem is that, in some methods, there's more than one query being passed to the "query()" method and as a result it needs to run through multiple while loops to load the data into different variables. I've created a simplified version below:

```
class object{
    public function __construct($query){
        $this->query = $query;
    }

    public function loadData(){

        $data1 = queryDataSource("SELECT * FROM data1");
        $data2 = queryDataSource("SELECT * FROM data2");

        return Array(
            "data1" => $data1,
            "data2" => $data2,
        );

    }

    private function queryDataSource($query){
        $this->query->query($query)

        while($row = $this->query->get_row()){
            $result[] = $row;
        }

        return $result
    }
}

class testObject extends PHPUnit_Framework_TestCase{
    method testLoadData(){
        $test_data = Array('name' => 'Bob', 'number' => '98210');

        $query = $this->getMock('Query');
        $query->expects($this->any())->method('query');
        $query->expects($this->at(1))->method('get_row')->will($this->returnValue($test_data);
        $query->expects($this->at(2))->method('get_row')->will($this->returnValue(False);
        $query->expects($this->at(3))->method('get_row')->will($this->returnValue($test_data);
        $query->expects($this->at(4))->method('get_row')->will($this->returnValue(False);
    }
} 
```

In order to escape the first while loop in $object->queryDataSource() I'm returning a boolean FALSE value, as would happen when doing mysql_fetch_assoc. The problem is that, when it tries to run the second query and fetch the data through get_row(), the mock object seems to keep returning FALSE ratehr than moving on to the at(3) point. This happens even with 4 objects, only the first will get the test data as a return value then get FALSE the second time, the others will get FALSE every time.

Does anyone know if there's a way to get around this? I tried removing the FALSE flags and just having the odd values in at(), but that had the same problem, and I tried just having it return the data for at(1-2), but that just passed all the data into the first while loop and nothing for the other.

Thanks for any help you can give, hope the description of the problem's clear enough

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:30:48.723

我无法运行代码，因为它似乎只是伪代码，但据我了解，您正试图像这样模拟：

```
Call to query, get_row, get_row, query, get_row, get_row. 
```

您似乎遇到的问题是**匹配器中****的数字不是 per而是 per`->at()``method``object`**。

所以你可能想要写的是：

```
 $query->expects($this->any())->method('query');
    $query->expects($this->at(1))->method('get_row')->will($this->returnValue($test_data);
    $query->expects($this->at(2))->method('get_row')->will($this->returnValue(False);
    $query->expects($this->at(4))->method('get_row')->will($this->returnValue($test_data);
    $query->expects($this->at(5))->method('get_row')->will($this->returnValue(False); 
```

或者让它更容易阅读甚至：

```
 $query->expects($this->at(0))->method('query');
    $query->expects($this->at(1))->method('get_row')->will($this->returnValue($test_data);
    $query->expects($this->at(2))->method('get_row')->will($this->returnValue(False);
    $query->expects($this->at(3))->method('query');
    $query->expects($this->at(4))->method('get_row')->will($this->returnValue($test_data);
    $query->expects($this->at(5))->method('get_row')->will($this->returnValue(False); 
```

通过您的模拟，您遇到了第二次调用“查询”正在计算一个“调用”并因此跳过第二个的问题`return($test_data);`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:52:28.380

不幸的是，`at()`您的测试非常强烈地绑定到实现。

想象一下，如果您在测试方法中重新安排了 2 个方法调用，功能*完全相同*，但现在使用的所有测试`at()`都将失败，通常带有神秘的消息，例如`method doesn't exist at index N`

在某些情况下您想明确地说“这就是这样调用的，然后这个就是这样调用的”，这很好，但是如果您只想要断言，那么 PHPUnit Mock Extensions 之一似乎更友好，尤其是[Mockery](https://github.com/etsy/phpunit-extensions/tree/master/PHPUnit/Extensions/Mockery)和[这里](https://github.com/etsy/phpunit-extensions/wiki/Mockery)的指南（触摸我相信过时了）

还有其他的。

# python - Python：为什么运算符“is”和“==”有时可以互换字符串？

> ID：12705379
> 
> 赞同：6
> 
> 时间：2012-10-03T09:18:12.093
> 
> 标签：python, python-2.7, operators

> **可能重复：**
> [Python 中的字符串比较：is vs. ==](https://stackoverflow.com/q/2988017/1577343)
> [Python 字符串实习](https://stackoverflow.com/q/15541404/1577343)
> [为什么在 Python 中使用 '==' 或 'is' 比较字符串有时会产生不同的结果？](https://stackoverflow.com/q/1504717/1577343)

我意外地使用`is`和 `==`for 字符串互换，但我发现并不总是相同的。

```
>>> Folder = "locales/"
>>> Folder2 = "locales/"
>>> Folder is Folder2
False
>>> Folder == Folder2
True
>>> File = "file"
>>> File2 = "file"
>>> File is File2
True
>>> File == File2
True
>>> 
```

为什么在一种情况下运算符是可互换的，而在另一种情况下不是？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T09:19:50.347

短字符串是为了提高效率而被保留的，因此将引用同一个对象，因此`is`将是正确的。

这是 CPython 中的一个实现细节，绝对不能依赖。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T09:23:19.200

这个问题更清楚地说明了这一点：[Python中的字符串比较：is vs. ==](https://stackoverflow.com/questions/2988017/string-comparison-in-python-is-vs)

简短的回答是：**`==`测试相等的值，其中`is`测试相等的身份**（通过对象引用）。

正如 Daniel Roseman 所证实的那样，2 个具有相同值的字符串具有相同的标识这一事实表明 python 解释器正在优化:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T09:21:57.213

`==`运算符调用第一个对象的内部方法`__cmp__()`，将其与第二个对象进行比较。这适用于所有 Python 对象，包括字符串。运算符比较对象的`is`身份：

> 每个对象都有一个标识、一个类型和一个值。对象的身份一旦创建就永远不会改变；您可能会将其视为对象在内存中的地址。'is' 运算符比较两个对象的身份；id() 函数返回一个表示其身份的整数（当前实现为其地址）。

例如：

```
s1 = 'abc'
id(s1) 
>>> 140058541968080
s2 = 'abc'
id(s2)
>>> 140058541968080

# The values the same due to SPECIFIC CPython behvaiour which detects 
# that the value exists in interpreter's memory thus there is no need
# to store it twice. 

s1 is s2
>>> True

s2 = 'cde'
id(s2)
>>> 140058541968040
s1 is s2
>>> False 
```

# c# - 在 asp.net 中创建 Web 服务时删除 xml 标记

> ID：12705380
> 
> 赞同：0
> 
> 时间：2012-10-03T09:18:14.873
> 
> 标签：c#, asp.net, xml, json

我正在 asp.net 中创建一个 web 服务。以下是我得到的回应。

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">{"Question1":"do the like the idea of the first speaker?","Option1":"YES","Option2":"NO","Option3":"NOT SURE","Option4":"","Option5":"","Type":"button","QID":"q1"}</string> 
```

我怎样才能从这里删除 xml 标签......有什么想法吗？

```
[WebMethod(EnableSession = true)]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string GetQuestions()
{
    return new JavaScriptSerializer().Serialize(Biz.BAL.GetQuestions());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:52:53.653

如果以下内容正确，您能否验证您的 web.config：

1)“将 *.ASMX httphandler 重新路由到 ScriptHandlerFactory”

```
 <httpHandlers>
        <remove path="*.asmx" verb="*"/>
        <add path="*.asmx" verb="*" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpHandlers> 
```

2）“Json 序列化”您可以将 jsonSerialisation 设置添加到您的 web.config 以确保 Json 序列化工作：

```
 <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
            <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
                <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/></sectionGroup></sectionGroup></sectionGroup>
    </configSections> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-01T04:40:56.817

请在 Web Method 中使用这些行：

* * *

```
 JavaScriptSerializer Machinejson = new JavaScriptSerializer();
            this.Context.Response.AppendHeader("Access-Control-Allow-Origin", "*");
            this.Context.Response.ContentType = "application/json; charset=utf-8"; // to remove xml tag from response
            this.Context.Response.Write(Machinejson.Serialize([Object or string to return in form of json)])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:32:57.557

使用此代码既安全又方便：ASP

```
var X = new XmlDocument();
X.LoadXml(YOUR_RESPONSE);
return X.DocumentElement.InnerText; 
```

在Javascript中我认为你应该做这样的事情

```
var start = YOUR_RESPONSE.indexOf('<string ');
start = YOUR_RESPONSE.indexOf('>', start)+ 1;
YOUR_RESPONSE.substring(start, YOUR_RESPONSE.lastIndexOf('</string>')); 
```

# xml - TSQL for xml 防止空标签和自闭合标签

> ID：12705382
> 
> 赞同：0
> 
> 时间：2012-10-03T09:18:15.907
> 
> 标签：xml, tsql, tags

前段时间我问了这个问题： [TSQL for xml xml-tag just once](https://stackoverflow.com/questions/12086720/tsql-for-xml-xml-tag-just-once)

现在我的问题是空标签和自闭合标签不应该出现在 xml 中。

我在[这里](http://www.sqlmusings.com/2009/04/12/sqlxml-how-to-work-with-xml-elements-or-nodes-in-sql-server/)和[这里](http://blogs.msdn.com/b/denisruc/archive/2006/05/17/600250.aspx)找到了可能的解决方法，但它不像我预期的那样工作。

我还尝试在每个潜在的空标签中写入“$$”，然后最后我尝试删除所有包含“$$”的标签：

```
SET @persons.modify('delete (//$$)') 
```

但这种方法也不起作用。

**如何使用 XQuery 删除空标签和自闭合标签或防止它们出现在 TSQL for xml 中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:21:39.477

这取决于您如何编写查询，但通常`null`值不包含在生成的 XML 中，因此如果您想省略空值，您可以使用`nullif`获取空值而不是空值。

```
declare @Person table
(
  Name varchar(20)
)

insert into @Person values ('Person1')
insert into @Person values ('Person2')
insert into @Person values ('')
insert into @Person values (null)

select '2012' as period,
       (
        select nullif(Person.Name, '') as 'users/person'
        from @Person as Person
        for xml path('') , type
       )
for xml path(''), root('company') 
```

结果：

```
<company>
  <period>2012</period>
  <users>
    <person>Person1</person>
  </users>
  <users>
    <person>Person2</person>
  </users>
</company> 
```

# flash - using flash application locally

> ID：12705383
> 
> 赞同：0
> 
> 时间：2012-10-03T09:18:25.070
> 
> 标签：flash

I am trying to use a flash player locally. I downloaded this player:

[https://github.com/mstandio/SaladoPlayer](https://github.com/mstandio/SaladoPlayer)

when I am trying to open the player in my browser, I am getting this error:

```
>SaladoPlayer 1.3
>Could not access local files, error: #2148
>Add directory of unzipped files to Global Security Settings panel if you want to use player on local mashine 
```

Clicking on the page redirect to a macromedia site where you can set the Global security. I add my directory to the list of directory that should be trusted, but I am still getting the same error.

What else should I do to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:12:26.260

[http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)转到此站点并添加到您的文件所在的列表目录中。您可以添加整个驱动器分区，再也不用为此烦恼

您还可以设置本地 http 服务器并通过它访问您的文件。

# web-services - Communication between computation server and web server

> ID：12705384
> 
> 赞同：1
> 
> 时间：2012-10-03T09:18:26.477
> 
> 标签：web-services, ssh, communication, rpc, denial-of-service

I have:

*   a machine (C) which is responsible for some computation (not publicly available),
*   a machine (W) which is a publicly available web server,
*   a machine (G) which is also publicly available and in the same LAN as C.

I am looking for a way for W to serve as interface for C, that is, given a request made on a web page on W, W communicates with C through G, gets its response, and communicate it back to the client.

I am not very confident in RPC, webservices, and related technologies. I figured a double ssh tunnel with a bit of polling on C would do the trick.

What do you think would be the best security (DoS-wise) / simplicity (implementation) tradeoff ?

# arrays - 如何在 Java 中将 byte[] 转换为 BufferedImage？

> ID：12705385
> 
> 赞同：34
> 
> 时间：2012-10-03T09:18:32.973
> 
> 标签：arrays, byte, bufferedimage

我发布这个帖子是因为我在处理 Java 中的图片时遇到了一些困难。我希望能够将图片转换为 byte[] 数组，然后能够进行反向操作，这样我可以更改每个像素的 RGB，然后制作一张新图片。我想使用这个解决方案，因为 BufferedImage 的 setRGB() 和 getRGB() 对于大图片来说可能太慢了（如果我错了，请纠正我）。

我在这里阅读了一些帖子以获得一个 byte[] 数组（[例如这里](https://stackoverflow.com/a/9470843)），以便每个像素由包含红色、绿色和蓝色值的数组的 3 或 4 个单元格表示（当有额外的 alpha 值时）是 4 个单元格），这对我来说非常有用且易于使用。这是我用来获取此数组的代码（存储在我创建的 PixelArray 类中）：

```
public PixelArray(BufferedImage image)
{
    width = image.getWidth();
    height = image.getHeight();
    DataBuffer toArray = image.getRaster().getDataBuffer();
    array = ((DataBufferByte) toArray).getData();
    hasAlphaChannel = image.getAlphaRaster() != null;
} 
```

我最大的麻烦是，如果我想转换图片（例如，删除蓝色/绿色值并只保留红色值），我还没有找到任何有效的方法来将此 byte[] 数组转换为新图像。我尝试了这些解决方案：

1）制作一个DataBuffer对象，然后制作一个SampleModel，最后创建一个WritableRaster，然后是BufferedImage（带有额外的ColorModel和Hashtable对象）。它不起作用，因为我显然没有我需要的所有信息（我不知道 BufferedImage() 构造函数的 Hashtable 是什么）。

2) 使用 ByteArrayInputStream。这不起作用，因为 ByteArrayInputStream 预期的 byte[] 数组与我的无关：它代表文件的每个字节，而不是每个像素的每个组件（每个像素有 3-4 个字节）...

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-20T01:51:11.550

试试这个：

```
private BufferedImage createImageFromBytes(byte[] imageData) {
    ByteArrayInputStream bais = new ByteArrayInputStream(imageData);
    try {
        return ImageIO.read(bais);
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-04-03T08:10:22.360

我已经尝试过这里提到的方法，但由于某种原因，它们都没有奏效。使用`ByteArrayInputStream`and`ImageIO.read(...)`返回 null，而`byte[] array = ((DataBufferByte) image.getRaster().getDataBuffer()).getData();`返回图像数据的副本，而不是对它们的直接引用（另请参见[此处](https://stackoverflow.com/questions/10247123/java-convert-bufferedimage-to-byte-without-writing-to-disk/10247179#10247179)）。

但是，以下内容对我有用。假设图像数据的尺寸和类型是已知的。也让`byte[] srcbuf`是要转换成的数据的缓冲区`BufferedImage`。然后，

1.  例如创建一个空白图像

    ```
    img=new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR); 
    ```

2.  将数据数组转换为`Raster`并用于`setData`填充图像，即

    ```
    img.setData(Raster.createRaster(img.getSampleModel(), new DataBufferByte(srcbuf, srcbuf.length), new Point() ) ); 
    ```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-24T07:50:50.883

```
BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);
byte[] array = ((DataBufferByte) image.getRaster().getDataBuffer()).getData();
System.arraycopy(pixelArray, 0, array, 0, array.length); 
```

当您尝试使用生成图像的 Graphics 对象时，此方法确实会不同步。如果您需要在图像上绘制，请构建第二个图像（可以是持久的，*即*不是每次都构建，而是重复使用）并将`drawImage`第一个图像放在上面。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-13T11:36:51.400

有几个人赞成接受的答案是错误的评论。

如果接受的答案不起作用，可能是因为 Image.IO 不支持您正在尝试的图像类型，例如 tiff 图像。

要使其工作，您需要添加一个额外的 jar 来处理图像类型。

您可以添加`jai-imageio-core-1.3.1.jar`到您的类路径：

```
 <!-- https://mvnrepository.com/artifact/com.github.jai-imageio/jai-imageio-core -->
    <dependency>
        <groupId>com.github.jai-imageio</groupId>
        <artifactId>jai-imageio-core</artifactId>
        <version>1.3.1</version>
    </dependency> 
```

添加对以下内容的支持：

*   wbmp
*   bmp
*   个人电脑
*   纳米级
*   生的
*   tiff
*   gif（写）

您可以通过以下方式检查支持的格式列表：

```
 for(String format : ImageIO.getReaderFormatNames())
        System.out.println(format); 
```

请注意，您只需将 jar（例如 jai-imageio-core-1.3.1.jar）拖放到类路径中即可使其工作。

其他为图像类型添加额外支持的项目包括：

*   [https://github.com/haraldk/TwelveMonkeys](https://github.com/haraldk/TwelveMonkeys)
*   [https://github.com/geosolutions-it/imageio-ext](https://github.com/geosolutions-it/imageio-ext)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-16T02:57:51.287

在某些情况下，直接使用 ImageIO.read 的方法是不正确的。就我而言，原始字节 [] 不包含有关图像宽度和高度以及格式的任何信息。仅使用 ImageIO.read，程序不可能构造出有效的图像。

需要将图像的基本信息传递给 BufferedImage 对象：

```
    BufferedImage outBufImg = new BufferedImage(width, height, bufferedImage.TYPE_3BYTE_BGR);

```

然后使用 setRGB 或 setData 为 BufferedImage 对象设置数据。（使用 setRGB 时，似乎必须先将 byte[] 转换为 int[]。因此，如果源图像数据很大，可能会导致性能问题。也许 setData 对于大 byte[] 类型的源数据更好.)

# drupal - 显示术语引用的内容而不是链接（Drupal 7）

> ID：12705389
> 
> 赞同：1
> 
> 时间：2012-10-03T09:18:56.943
> 
> 标签：drupal, drupal-7, drupal-taxonomy, drupal-field-api

在这种 Drupal 7 情况下，我需要帮助：

*   我正在使用我自己的名为“优惠”的内容类型发布旅行社优惠
*   我在名为“酒店”的分类中存储有关酒店的信息（描述、价格、照片等）
*   我需要在每个优惠中显示相关的酒店信息

这是我的问题。我添加了一个名为“field_hotel”的新术语参考字段，但我只获得了一个指向分类术语的链接，而不是实际内容。

我尝试使用此代码，entity_load() 运行良好，但在 field_view_field(() 中出现“EntityMalformedException: Missing bundle property on type taxonomy_term. in entity_extract_ids()”错误。

```
$term = entity_load('taxonomy_term', array($hotel["und"][0]["taxonomy_term"]->tid));     
$view = field_view_field('taxonomy_term', $term, 'field_hotel');    
print render($view); 
```

我究竟做错了什么？

谢谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:01:14.063

`$view = taxonomy_term_view($term);` 尝试用See [documentation for`taxonomy_term_view`](http://api.drupal.org/api/drupal/modules!taxonomy!taxonomy.module/function/taxonomy_term_view/7)替换第二行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:07:17.577

我建议您不要以分类术语存储酒店信息，而是为酒店创建一个单独的内容类型。这样，您就可以使用[References](http://drupal.org/project/references)将优惠链接到酒店，这是一种更加灵活的方法。这也将允许您使用 Views 在报价页面上显示酒店信息。

# python - 如何使用python在文件中找到确切的长度和匹配的字符串

> ID：12705391
> 
> 赞同：-1
> 
> 时间：2012-10-03T09:19:05.423
> 
> 标签：python

我有文件包含

```
"Starting program and 
Starting program
Loading molecule...
Initialising variables...
Starting the calculation - this could take a while!
Molecule energy = 2432.6 kcal mol-1
Calculation finished. Bye!"
import sys
import re

search_string = "Starting program"
txtlength=len(search_string)
print "txtlength",txtlength
lines = open( "C:\search.txt", "r" ).readlines()
for line in lines:
    if re.search( search_string, line ):
        print line,

    else :
        print "Not found" 
```

我只在文件中寻找第二行，但来自此代码的输出是 1 行也显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:17:38.077

您显示的示例不需要正则表达式：

```
with open("C:/search.txt") as inp:
    for line in inp:
        if line.strip() == search_string:
            print line 
```

# python - 按列将 python 列表重新排列为 n 个列表

> ID：12705398
> 
> 赞同：0
> 
> 时间：2012-10-03T09:19:16.470
> 
> 标签：python

我想将列表重新排列为列表`l`列表`n`，其中`n`是列数。

例如，

```
l = [1,2,3,4,5,6,7,8,9,10]
n = 4
==> [[1,5,9],[2,6,10],[3,7][4,8]] 
```

有人可以帮我解决算法吗？随意使用任何可用的 python 真棒；我确信有一些很酷的机制非常适合这个，我只是想不出它。

PS 示例列表恰好是从 1 开始的有序数字。这不是我的实际情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:35:50.837

在 Python 中确实有一个很酷的机制：切片的三参数形式，其中最后一个参数是步长。

```
>>> l = [1,2,3,4,5,6,7,8,9,10]
>>> n = 4
>>> [l[i::n] for i in range(n)]
[[1, 5, 9], [2, 6, 10], [3, 7], [4, 8]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:26:43.753

以下功能可以实现您想要实现的目标：

```
def rearrange(seq,n):
    return [[v for i,v in enumerate(seq[x:]) if i%n==0] for x in xrange(len(seq))][:n] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:26:48.933

```
l = [1,2,3,4,5,6,7,8,9,10]
n = 4

def f(l,n):
    A = []
    [A.append([]) for i in xrange(n)] 
    [ A [(i - 1) % n].append(i) for i in l]
    return A

print f(l,n) 
```

[[1, 5, 9], [2, 6, 10], [3, 7], [4, 8]]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:46:12.347

编写 Python 不是打代码高尔夫的游戏，为了可读性，不要害怕使用多行代码。

```
l = [1,2,3,4,5,6,7,8]

def split_into_columns(input_list, num_of_cols=3):
    retval = [ [] for _ in xrange(num_of_cols)]      # build 3 columns
    for i in xrange(len(input_list)):                # iterate through original list
        retval[i%num_of_cols].append(input_list[i])  # place in the "modulo 3" column
    return retval

    # here's a compressed, less readable version of that for-loop
    #[retval[i%3].append(input_list[i]) for i in xrange(len(input_list))]
    #return retval

print split_into_columns(l, 3) 
```

# javascript - jEditable 与 bootstrap 可编辑冲突

> ID：12705405
> 
> 赞同：0
> 
> 时间：2012-10-03T09:19:40.787
> 
> 标签：javascript, jquery, html, twitter-bootstrap, jeditable

```
// using jEditable
$('.element').editable('http://www.example.com/save.php');

//using bootstrap editable
$('.element').editable({
                       type:  'text',
                       pk:    1,
                       name:  'username',
                       url:   'post.php',  
                       title: 'Enter username'
                    }); 
```

我想同时使用这两个可编辑插件，但我知道它们会发生冲突。这个问题有什么解决方案吗？？？非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:27:52.400

Fork jEditable 并更改`editable()`fork 中方法的名称。然后包括它而不是原始的 jEditable。

# python - 改进此代码的方法？

> ID：12705407
> 
> 赞同：0
> 
> 时间：2012-10-03T09:19:43.530
> 
> 标签：python

我必须测量不同 L 值所花费的时间，所以我想优化我的代码。我必须做的是用直径为 d 的周期点 (x,y,z) 填充一个立方体 (LxLxL)，这些点是相同的。到目前为止，这就是我所拥有的：

```
L=10
d=2

x,y,z = 0,0,0
counter=0

with open("question1.xyz","w") as f:
    while x<=L-d:
        while y<=L-d:
            while z<=L-d:
                f.write('H {} {} {}\n'.format(x,y,z))
                counter=counter+1
                z=z+d
            z=0
            y=y+d
        z,y=0,0
        x=x+d 
```

然后我必须输出这种格式的文件（.xyz 文件）：

```
H 0.000000 0.000000 0.000000
H 0.000000 0.000000 1.000000
H 0.000000 0.000000 2.000000
H 0.000000 0.000000 3.000000
H 0.000000 0.000000 4.000000 
```

有什么想法或建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:21:30.020

你应该尽量减少你打电话的次数`f.write()`。这最大限度地减少了 Python 运行时必须执行系统调用的次数，这通常是昂贵的。

`write()`因此，在调用该函数之前，先构建一段较长的输出。您可以通过添加到一个字符串非常简单地做到这一点，或者（甚至更好）添加到一个*list*，并`join()`在完成后使用将列表折叠成一个字符串，然后`write()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:20:15.703

```
from itertools import product

L=10
d=2

with open("question1.xyz","w") as f:
    f.write('\n'.join('H {} {} {}'.format(*t) for t in product(range(0, L, d), repeat=3))) 
```

# ios - 在 ios 应用程序中自定义登录到 facebook

> ID：12705409
> 
> 赞同：0
> 
> 时间：2012-10-03T09:19:51.173
> 
> 标签：ios, facebook

我正在使用最新的 facebook sdk 将照片共享集成到我的 iOS 应用程序中。目前正在使用 iOS 5.0。我可以登录并分享照片。

但是对于登录，我必须使用`FBLoginView`. 我想要的是从我自己的 UIButton 调用方法。现在，要找到`UIButton`与`FBLoginView`我使用的相关联的[如何自定义 FBLoginVIew？](https://stackoverflow.com/questions/12280850/how-to-customize-fbloginview)

我还可以使用操作`actionsForTarget:forControlEvent:` [http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006779找到与按钮关联的所有选择器-RH2-SW6](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006779-RH2-SW6)

但是为了调用这个方法，我需要知道登录消息发送到哪个对象？我怎么能找到那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:14:36.760

我解决了这个问题，`sendActionsForControlEvents:`我刚刚将此消息发送到 UIButton`UIControlEventTouchUpInside`并调用了相应的方法。（但它没有按我的意愿工作。）

# mysql - 使用 mysql 查询更改图像名称并更新到同一个表中

> ID：12705410
> 
> 赞同：0
> 
> 时间：2012-10-03T09:19:57.390
> 
> 标签：mysql

我想更改下表中的图像名称，如下所示。

图片名称：test.png

替换为：test_E.png

我希望 _E 在使用 mysql 查询的表中所有图像名称的末尾。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:21:18.643

使用替换功能

```
update <table>
set image=replace(image,'.png','_E.png') 
```

如果表格中的图像扩展名不同，您可以使用它

```
 update <table>
     set image=concat(substring(image,1,locate('.',image)-1),'_E',
                 substring(image,locate('.',image),lenght(image))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:44:14.933

您可以使用 MySQL 查询的字符串函数：

```
UPDATE TABLE SET IMAGE_NAME = CONCAT(SUBSTR(IMAGE_NAME,(CHAR_LENGTH(IMAGE_NAME) - 4)),
'_E' , SUBSTR(IMAGE_NAME, -4)) WHERE ID = <put record id>; 
```

`SUBSTR(IMAGE_NAME,(CHAR_LENGTH(IMAGE_NAME)-4))`将返回文件名 - 假设扩展名是 3 个字符。对于“test.png”，上述函数将删除“.png”，函数将返回“test”

`SUBSTR(IMAGE_NAME, -4)`将返回字符串的最后四个字符 - 所以 'test.png' 将返回 '.png'

使用 concat 你可以连接 'test'、'_E' 和 '.png' - 返回 'test_E.png'

进一步使用请参考 MySQL 的字符串函数参考

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

# java - Eclipse 生成的默认 Java 异常处理代码

> ID：12705411
> 
> 赞同：1
> 
> 时间：2012-10-03T09:20:04.493
> 
> 标签：java, exception-handling

Eclipse 生成的默认异常处理代码如下所示：

```
try {
    methodThrowsACheckedException();
} catch (SomeCheckedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

如果 Eclipse 生成以下代码不是更好吗？

```
try {
    methodThrowsACheckedException();
} catch (SomeCheckedException e) {
    // TODO Auto-generated catch block
    throw new RuntimeException(e);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:23:05.590

**您可以配置 eclipse 来做到这一点，这是您的选择**。入住`Code Template-> Catch Block Body`_`Preferences->Java->Code style`

# performance - PostgreSQL。慢速准备事务和提交准备

> ID：12705412
> 
> 赞同：0
> 
> 时间：2012-10-03T09:20:10.847
> 
> 标签：performance, postgresql, database-performance, xa, pgfouine

我刚刚遇到了一个奇怪的问题。我在 pgfourine 中做了一份报告，发现我的 XA 事务开始工作很慢。准备事务和准备提交结合起来花费了 13.2 秒中的 12.55 秒。但为什么？

```
#####  Overall statistics  #####

Number of unique normalized queries: 175
Number of queries:     268,772
Total query duration:  13m2s

#####  Queries by type  #####

SELECT:    116493     43.3%
INSERT:     15926      5.9%
UPDATE:      7935      3.0%
DELETE:      4923      1.8%

#####  Queries that took up the most time (N)  #####

1) 6m32s - 26,338 - COMMIT PREPARED ''
--
2) 6m23s - 25,972 - PREPARE TRANSACTION ''
--
3) 0.6s - 3,848 - update avatar set lfa_position=NULL where Id=0
.....
7) 0.3s - 21,514 - COMMIT
..... 
```

我有一个理论，但没有证据。我有慢速光盘，我关闭了 synchronous_commit。即使 synchronous_commit 关闭，PostgreSQL 也可能必须在“准备事务”期间进行 fsync？

```
fsync = on 
synchronous_commit = off 
```

有任何想法吗？

**更新**

相同的测试

```
fsync = off
synchronous_commit = off

#####  Overall statistics  #####

Number of unique normalized queries: 155
Number of queries:     186,838
Total query duration:  6.6s

#####  Queries by type  #####

SELECT:     84367     45.2%
INSERT:      9197      4.9%
UPDATE:      5486      2.9%
DELETE:      2996      1.6%

#####  Queries that took up the most time (N)  #####

1) 1.8s - 16,972 - PREPARE TRANSACTION ''
--
2) 1.1s - 16,965 - COMMIT PREPARED ''
--
3) 0.4s - 2,904 - update avatar set lfa_position=NULL where Id=0
--
4) 0.2s - 16,031 - COMMIT 
```

看起来 fsync 花费了大量时间，但并非一直如此。16k 提交 - 0.2 秒，17k 准备 + 提交 2.9 秒。

悲剧。看起来 XA 提交比本地提交花费的时间多 15 倍，并且不考虑 synchronous_commit 设置。fsync=off 对于生产使用是不安全的。因此，如果我想使用 XA 事务，我必须小心使用它并使用具有高 IOPS 的优质 SSD 驱动器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:55:32.310

立即同步的理论`PREPARE TRANSACTION`是正确的，并且在文档中提到：

摘自[http://www.postgresql.org/docs/9.1/static/wal-async-commit.html](http://www.postgresql.org/docs/9.1/static/wal-async-commit.html)：

> 支持两阶段提交的命令，例如 PREPARE TRANSACTION，也始终是同步的。

# java - Web 服务客户端无法连接到服务器

> ID：12705414
> 
> 赞同：0
> 
> 时间：2012-10-03T09:20:17.527
> 
> 标签：java, web-services, https, glassfish

我创建了 Web 服务，它可以在 Glassfish 3.1.1 上使用 https，当我尝试连接到 Web 服务时出现错误。痕迹：

```
com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.net.ConnectException: Connection timed out: connect
at com.sun.xml.internal.ws.transport.http.client.HttpClientTransport.getOutput(HttpClientTransport.java:117)
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:194)
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:122)
at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:95)
at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:626)
at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:585)
at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:570)
at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:467)
at com.sun.xml.internal.ws.client.Stub.process(Stub.java:308)
at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:146)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)
at $Proxy32.getGUIDE(Unknown Source)
at webserviceclient.WebServiceClient.getGUIDE(WebServiceClient.java:56)
at webserviceclient.WebServiceClient.main(WebServiceClient.java:38)
    Caused by: java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at sun.net.NetworkClient.doConnect(NetworkClient.java:180)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:378)
at sun.net.www.http.HttpClient$1.run(HttpClient.java:430)
at sun.net.www.http.HttpClient$1.run(HttpClient.java:428)
at java.security.AccessController.doPrivileged(Native Method)
at sun.net.www.http.HttpClient.privilegedOpenServer(HttpClient.java:427)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:468)
at sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:270)
at sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:327)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:191)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:974)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:177)
at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1090)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)
at com.sun.xml.internal.ws.transport.http.client.HttpClientTransport.getOutput(HttpClientTransport.java:105) 
```

当我在浏览器“？Tester”中尝试时，server.log 中的错误

```
[#|2012-10-03T15:38:24.250+0600|INFO|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=418;_ThreadName=Thread-2;|parsing WSDL...

|#]

[#|2012-10-03T15:38:24.359+0600|INFO|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=418;_ThreadName=Thread-2;|[ERROR] java.security.cert.CertificateException: No subject alternative names present

Failed to read the WSDL document: https://192.168.40.2/WebService/NSI_NBRK?WSDL, because 1) could not find the document; /2) the document could not be read; 3) the root element of the document is not <wsdl:definitions>.|#]

[#|2012-10-03T15:38:24.359+0600|INFO|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=418;_ThreadName=Thread-2;|[ERROR] failed.noservice=Could not find wsdl:service in the provided WSDL(s): 

 At least one WSDL with at least one service definition needs to be provided.|#]

[#|2012-10-03T15:38:24.360+0600|INFO|glassfish3.1.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=418;_ThreadName=Thread-2;|  Failed to parse the WSDL.|#]

[#|2012-10-03T15:38:24.360+0600|INFO|glassfish3.1.1|javax.enterprise.webservices.org.glassfish.webservices.monitoring|_ThreadID=418;_ThreadName=Thread-2;|Invoking wsimport with https://192.168.40.2/WebService/NSI_NBRK?WSDL|#]
[#|2012-10-03T15:38:24.361+0600|SEVERE|glassfish3.1.1|javax.enterprise.webservices.org.glassfish.webservices.monitoring|_ThreadID=418;_ThreadName=Thread-2;|wsimport failed|#] 
```

wsdl：

```
<?xml version='1.0' encoding='UTF-8'?><!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.1.1-b09 (branches/2.1-6834; 2011-07-16T17:14:48+0000) JAXWS-RI/2.2.5-promoted-b04 JAXWS/2.2\. --><!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.1.1-b09 (branches/2.1-6834; 2011-07-16T17:14:48+0000) JAXWS-RI/2.2.5-promoted-b04 JAXWS/2.2\. --><definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://service/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://service/" name="NSI_NBRK">
<types>
<xsd:schema>
<xsd:import namespace="http://service/" schemaLocation="./NSI_NBRK.xsd"/>
</xsd:schema>
</types>
<message name="GET_GUIDE">
<part name="parameters" element="tns:GET_GUIDE"/>
</message>
<message name="GET_GUIDEResponse">
<part name="parameters" element="tns:GET_GUIDEResponse"/>
</message>
<portType name="Service">
<operation name="GET_GUIDE">
<input wsam:Action="http://service/Service/GET_GUIDERequest" message="tns:GET_GUIDE"/>
<output wsam:Action="http://service/Service/GET_GUIDEResponse" message="tns:GET_GUIDEResponse"/>
</operation>
</portType>
<binding name="ServicePortBinding" type="tns:Service">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<operation name="GET_GUIDE">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
</binding>
<service name="NSI_NBRK">
<port name="ServicePort" binding="tns:ServicePortBinding">
<soap:address location="https://192.168.40.2/WebService/NSI_NBRK"/>
</port>
</service>
</definitions> 
```

和 xsd 架构：

```
<?xml version='1.0' encoding='UTF-8'?><!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.1.1-b09 (branches/2.1-6834; 2011-07-16T17:14:48+0000) JAXWS-RI/2.2.5-promoted-b04 JAXWS/2.2\. --><xs:schema xmlns:tns="http://service/" xmlns:xs="http://www.w3.org/2001/XMLSchema" version="1.0" targetNamespace="http://service/">

<xs:element name="GET_GUIDE" type="tns:GET_GUIDE"/>

<xs:element name="GET_GUIDEResponse" type="tns:GET_GUIDEResponse"/>

<xs:complexType name="GET_GUIDE">
<xs:sequence>
<xs:element name="arg0" type="tns:serviceRequest" minOccurs="0"/>
</xs:sequence>
</xs:complexType>

<xs:complexType name="serviceRequest">
<xs:sequence>
<xs:element name="beginDate" type="xs:dateTime" minOccurs="0"/>
<xs:element name="endDate" type="xs:dateTime" minOccurs="0"/>
<xs:element name="guideCode" type="tns:guideCode" minOccurs="0"/>
<xs:element name="type" type="tns:guideType" minOccurs="0"/>
</xs:sequence>
</xs:complexType>

<xs:complexType name="GET_GUIDEResponse">
<xs:sequence>
<xs:element name="return" type="tns:serviceResponse" minOccurs="0"/>
</xs:sequence>
</xs:complexType>

<xs:complexType name="serviceResponse">
<xs:sequence>
<xs:element name="errCode" type="xs:int"/>
<xs:element name="errMsg" type="xs:string" minOccurs="0"/>
<xs:element name="result" type="xs:string" minOccurs="0"/>
</xs:sequence>
</xs:complexType>

<xs:simpleType name="guideCode">
<xs:restriction base="xs:string">
<xs:enumeration value="NSI_NBRK_BANK"/>
<xs:enumeration value="NSI_NBRK_CRCY_COURSE"/>
<xs:enumeration value="NSI_NBRK_KNP"/>
</xs:restriction>
</xs:simpleType>

<xs:simpleType name="guideType">
<xs:restriction base="xs:string">
<xs:enumeration value="FULL"/>
<xs:enumeration value="CHAD"/>
</xs:restriction>
</xs:simpleType>
</xs:schema> 
```

还有web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <session-config>
        <session-timeout>300</session-timeout>
    </session-config>
    <security-constraint>
        <display-name>Constraint</display-name>
        <web-resource-collection>
            <web-resource-name>service</web-resource-name>
            <description>service</description>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <user-data-constraint>
            <description>service</description>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:43:29.617

似乎是连接问题。尝试从 Web 浏览器查看 wsdl 以检查连接性，或者只是对 192.168.40.2 进行 pin 操作

你得到什么例外。

检查此网址是否对您有帮助？

[http://www.mkyong.com/webservices/jax-ws/suncertpathbuilderexception-unable-to-find-valid-certification-path-to-requested-target/](http://www.mkyong.com/webservices/jax-ws/suncertpathbuilderexception-unable-to-find-valid-certification-path-to-requested-target/)

# c++ - 使用 vc++ 使用凭据提供程序进行人脸登录

> ID：12705416
> 
> 赞同：1
> 
> 时间：2012-10-03T09:20:23.460
> 
> 标签：c++, visual-c++

我正在使用凭据提供程序进行人脸识别登录，我拥有凭据提供程序的 c++ 代码并添加了显示网络摄像头的代码，它显示的是窗口而不是窗口中的摄像头。有关凭证提供程序的任何建议/示例，以使用 C++ 开发面部登录。

提前致谢。

# asp.net-mvc-4 - ASP VB .NET 将参数传递给控制器 动作

> ID：12705417
> 
> 赞同：1
> 
> 时间：2012-10-03T09:20:27.757
> 
> 标签：asp.net-mvc-4, ping

我目前正在编写一个 ping 状态监控 ASP。但我不知道如何将数据从调用动作传递给控制器​​。

我的操作代码如下：-

```
Function showPing2(ByVal ipaddress As String) As String
    If ipaddress = 1 Then
        Return "Online"
    Else
        Return "Offline"
    End If
End Function 
```

从 Index.vbhtml 调用方法

```
 @Html.Action("showPing2(1)") 
```

我无法传递这样的值，它一直显示错误“用户代码未处理 HttpException”

谁能告诉我如何在 ASP .NET 中正确传递值？

非常感谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:23:39.167

语法错误，试试这个：

```
@Html.Action("showPing2", new { ipaddress = "1" }) 
```

或者

```
@Html.Action("showPing2", "ControllerName", new { ipaddress = "1" }) 
```

**添加**

这是我从[匿名类型（Visual Basic）](http://webcache.googleusercontent.com/search?q=cache%3amsXFFx4438YJ%3amsdn.microsoft.com/en-us/library/bb384767.aspx%20&cd=1&hl=en&ct=clnk&gl=by)或[VB.Net 中的匿名类初始化中](http://webcache.googleusercontent.com/search?q=cache%3acLCfrIui6KYJ%3astackoverflow.com/questions/849836/anonymous-class-initialization-in-vb-net%20&cd=2&hl=en&ct=clnk&gl=by)`C#`了解的语法，VB.NET 类似于：

```
@Html.Action("showPing2", New With { .ipaddress = "1" }) 
```

# javascript - 使用 HTML 和纯 javascript 在大图像上嵌入小图像

> ID：12705435
> 
> 赞同：2
> 
> 时间：2012-10-03T09:21:30.800
> 
> 标签：javascript, html, internet-explorer-8

我想使用 HTML 和纯 javascript 在大图像上嵌入小图像。它在 Chrome 和 Firefox 中运行。但它在 IE 8 中不起作用。我按照[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)中的建议使用了 z-index:-1 。任何人都可以帮助代码片段吗？

请找到示例代码片段，它适用于 Chrome、Safari、Firefox，但不适用于 IE8

```
<html>
<head>
<title>Image over Image</title>
<script type="text/javascript">
    function loadIMG(){
        var backgroundIMG = document.getElementById("bigIMG");
        var boundObject = backgroundIMG.getBoundingClientRect();

        var img = document.getElementById("smallIMG");
        img.style.top = (boundObject.top + (boundObject.height * 0.2))+"px";
        img.style.left = (boundObject.left  + (boundObject.width * 0.2))+"px";
        img.style.height = (boundObject.height * 0.6)+"px";
        img.style.width = (boundObject.width *0.6)+"px";
        img.style.position = "absolute";
        img.style.display = "inline";

    }
</script>
</head>
<body onclick="loadIMG();">
<center><h1>Image on Image</h1>
<h6>Click on the page to embed small image on big image</h6></center>
<img id="bigIMG" src="http://www.sxc.hu/pic/m/t/tu/tulsaeupho/1206951_blue_flowers_splatter_and_swirls_background_set_1.jpg">
<img id="smallIMG" src="http://i52.photobucket.com/albums/g14/1kevinm/small_unittus_sm_icon.png" style="display:none">
</body>
</html> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:27:52.570

首先，我将 bigIMG 和 smallIMG 的样式放在单独的 CSS 文件中，例如 style.css 包含

```
#bigIMG {
  z-index: -1;
  posistion:absolute;
}
#smallIMG {
  position: absolute;
  display: block;
} 
```

请注意，两个图像都有 position:absolute 并且 bigIMG 有 z-index:-1 以便将其放置在其他内容的后面。

现在在您的 html 的 HEAD 元素中，包含您的 style.css，如下所示：

`<link rel="stylesheet" type="text/css" href="styles/style.css">`

然后尝试调整css中的'top'和'left'参数以正确定位图像。您可以使用 chrome 的元素检查器即时手动输入坐标

# cloud - 云平台：我可以在任何 IaaS 中安装像 Ghostscript 这样的开源软件吗？

> ID：12705437
> 
> 赞同：5
> 
> 时间：2012-10-03T09:21:43.717
> 
> 标签：cloud, amazon, cloud-hosting, iaas

在我的应用程序中，我必须在服务器中安装 Ghostscript 才能运行应用程序。是 Google Compute Engine (IaaS)、Amazon EC2、VMware、WindowsAzure 等，还是任何支持从用户端安装软件的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:32:06.293

是的。在 IaaS 上，您可以完全访问计算平台（基础设施），并且可以用它做几乎任何您想做的事情（嗯……法律方面适用）。

基本上，您将获得一个 API，它允许您管理虚拟计算资源（服务器、磁盘空间、防火墙、负载平衡器……）。

通常，该服务以 Web 或控制台界面的形式提供，允许您生成新资源，并且在虚拟机的情况下，获得对它们的 root 访问权限。

在许多此类服务中，您甚至可以上传自定义磁盘映像并运行安装在其上的操作系统。这使您能够将事物自定义到内核级别。

维基百科上的[IaaS](http://en.wikipedia.org/wiki/Infrastructure_as_a_service#Service_models)部分可能会更清楚地说明这一论点。

# android - 相机方向未在正确模式下显示android

> ID：12705439
> 
> 赞同：2
> 
> 时间：2012-10-03T09:21:55.897
> 
> 标签：android, camera

我正在使用自定义相机和表面视图。但问题是相机方向没有以正确的模式显示。

我试过这段代码：

```
Camera.Parameters p = c.getParameters();
parameters.set("orientation", "portrait");
parameters.set("rotation", 90);
c.setParameters(p); 
```

还有这段代码：

```
mCamera.setDisplayOrientation(mRotation); 

But no effect. If there any other solution for this. Please tell me. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:35:13.673

mCamera.setDisplayOrientation(90) 在我测试的设备上非常适合我，但有一个明显的例外（这是一个很长的镜头，但它可能会解释你的问题）：三星 Galaxy Ace，此功能无法按预期工作。

# c# - C# 在由 3rd 方 dll 创建的事件中记录到文件。这会导致锁定吗？

> ID：12705443
> 
> 赞同：0
> 
> 时间：2012-10-03T09:22:00.983
> 
> 标签：c#, events, logging, locking

我正在使用以下内容登录到文本文件。Log() 是从我的代码中由第 3 方 Dll 触发的事件中调用的。第 3 方 Dll 创建多个线程，因此它可以触发每个线程内的事件。

我的问题是，当我的代码中触发事件以执行以下日志记录时，我是否可能会提出一个问题，即有两个事件试图同时写入日志文件并且锁定或事件一次发生一个？

```
private void Log(string message)
{
        if(!Directory.Exists(AssemblyDirectory + @"\Logs"))
            Directory.CreateDirectory(AssemblyDirectory + @"\Logs");

        using (StreamWriter sw = new StreamWriter(AssemblyDirectory + @"\Logs\" + DateTime.Today.ToString("yyyyMMdd") + ".log", true))
        {
            sw.AutoFlush = true;
            sw.Write(message);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:24:52.197

是的，这可能会导致并发问题，我不确定，但如果您保持 1 个 StreamWriter 处于打开状态（最好在您的方法中使用“锁定”语句），它可能会解决问题。否则看看像 log4net 这样的东西，他们有从多个线程记录到文件的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:26:32.110

它可能发生。我会使用 FileStream 类来使用日志文件。它试图通过打开文件来访问它。

**如果 FileStream 类引发异常并且正在使用该文件**

```
System.IO.FileStream fl = new FileStream("path", FileMode.Open);
fl.Write(byte[],int,int);
fl.dispose; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:36:46.197

是的，这可能会导致问题。由于 Zidad log4net 可以处理多个线程。另一方面，如果您想保留您编写的记录器，我建议您利用[线程的唯一 id](http://msdn.microsoft.com/en-us/library/system.diagnostics.traceeventcache.threadid.aspx)：

```
using (StreamWriter sw = new StreamWriter(AssemblyDirectory + @"\Logs\" +
      DateTime.Today.ToString("yyyyMMdd") + 
      (new System.Diagnostics.TraceEventCache()).ThreadId +".log", true))
{
    sw.AutoFlush = true;
    sw.Write(message);
} 
```

在所有线程完成后，您可以从其他线程构建一个文件。

# ios6 - IOS6内存分配差异？

> ID：12705445
> 
> 赞同：1
> 
> 时间：2012-10-03T09:22:22.293
> 
> 标签：ios6, uisearchbar, uisearchdisplaycontroller, lag

自从我在 iPhone 4 上更新了我的 iOS 软件后，我正在开发的应用程序开始出现滞后。这仅在我向 UISearchField 提供输入时才会发生。

当我在 iOS 键盘上敲击大约 30 个字母时，就会出现“滞后”。之后，每次连续点击都会滞后，给人一种手机本身无法再处理输入的感觉。

我有一个 UISearchDisplayController，只要我在搜索字段中输入三个或更多字母，它就会对我的数据库进行选择。

这是一些代码。

**实际搜索**

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{

    if ([searchText length] >= 3)
    {

        if (searchObject != nil)
        {
            searchObject = nil;
            searchObject = [[FritextSok alloc]init];
            [searchObject setDelegate:self];
        }

        [searchObject setSearchstring:searchText];

        [searchObject search];

    }
    else
    {

        // Displays non filtered results.
    }

} 
```

我在运行 iOS6 模拟器时也遇到了这种情况。

此外，除了 iOS 键盘“滞后”。在不同的视图控制器中，每一个 UISegmentedControl 似乎都需要 FOREVER 来绘制。这发生在键盘混搭之后。

我正在正确地重用单元格（我认为）并且不知道是什么原因造成的，因为它似乎可以在从 4.3 到 5.1 的所有 iOS 版本上完美运行。

我尝试了不同的方法来分配 searchObject。似乎没有任何帮助。

**编辑**

这是一条偶尔出现的错误消息

```
purgeIdleCellConnections: found one to purge conn = <Memory address> 
```

**编辑 2**

在使用 PROFILER 工具进行更多试验和错误之后。我发现，由于这个块，活着的记忆在不断增加。

```
UISegmentedControl *segment = [[UISegmentedControl alloc] init];
segment.frame = CGRectMake(0, 0, 70, 32);
segment.selectedSegmentIndex = -1;
segment.segmentedControlStyle = UISegmentedControlStyleBar;
segment.tintColor = [UIColor colorWithRed:0.745 green:0.184 blue:0.216 alpha:1];
segment.momentary = YES;
segment.alpha = 0.9;
[segment insertSegmentWithTitle:@"Ta bort" atIndex:0 animated:NO];
[segment addTarget:self action:@selector(foo:) forControlEvents:UIControlEventValueChanged]; 
```

每次我在 UISearchField 中输入一个字符时，都会运行上面的块。由于 UISearchDisplayDelegate 为该`-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString`函数返回 YES。这会导致重新绘制 UITableView 及其单元格。

这个问题现在变得更容易处理了。我目前正在实施一个可能的修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:13:26.120

解决方案：

移动代码

```
UISegmentedControl *segment = [[UISegmentedControl alloc] init];
segment.frame = CGRectMake(0, 0, 70, 32);
segment.selectedSegmentIndex = -1;
segment.segmentedControlStyle = UISegmentedControlStyleBar;
segment.tintColor = [UIColor colorWithRed:0.745 green:0.184 blue:0.216 alpha:1];
segment.momentary = YES;
segment.alpha = 0.9;
[segment insertSegmentWithTitle:@"Ta bort" atIndex:0 animated:NO];
[segment addTarget:self action:@selector(foo:) forControlEvents:UIControlEventValueChanged]; 
```

在 tableview 的实际重新绘制之外。

# javascript - 如何使用 java 脚本下载 .text 文件

> ID：12705446
> 
> 赞同：0
> 
> 时间：2012-10-03T09:22:33.687
> 
> 标签：javascript

我使用脚本函数下载文件，使用 iframe 加载和新页面加载。

使用这种方法我下载了所有格式的文件，但我无法下载 .txt 文件

请帮我下载文件

```
if(split[length-1]!="JPEG" && split[length-1]!="bmp" && split[length-1]!="pdf" && split[length-1]!="JPG" && split[length-1]!="jpg" && split[length-1]!="jpeg" && split[length-1]!="png" && split[length-1]!="gif") {
    $("body").append("<iframe src='" + file_path + "' style='display: none;' ></iframe>");
}
else {
    window.open(file_path);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:54:17.847

就像影子向导所说的那样，如果您将 iframe 指向发送回[某些 headers](http://webdesign.about.com/od/php/ht/force_download.htm)的 url，这将起作用。这仅适用于服务器端脚本，例如 PHP：

```
<?php
// download.php
if (!$_GET['url']) die();
$url = urldecode($_GET['url']);
$url = 'http://' . str_replace('http://', '', $url); // Stop accessing local file system.
$filename = pathinfo($url, PATHINFO_BASENAME);
$mime = mime_content_type($filename);

header('Content-disposition: attachment; filename=' . $filename);
header('Content-type: '. $mime);
echo file_get_contents($url); 
```

然后你只需要编辑你的 javascript 来通过这个`download.php`文件传递 url。

```
if(split[length-1]!="JPEG" && split[length-1]!="bmp" && split[length-1]!="pdf" && split[length-1]!="JPG" && split[length-1]!="jpg" && split[length-1]!="jpeg" && split[length-1]!="png" && split[length-1]!="gif") {
    $("body").append("<iframe src='download.php?url=" + file_path + "' style='display: none;' ></iframe>");
}
else {
    window.open(file_path);
} 
```

# php - 对数组中的匹配值求和

> ID：12705450
> 
> 赞同：0
> 
> 时间：2012-10-03T09:22:46.767
> 
> 标签：php

我目前有下面的函数，它从 mssql 服务器上的存储过程中提取信息。

如果团队相同，我正在尝试创建一个汇总所有用户目标的循环。我通常会在 mysql 中使用一个简单的 group 和 sum 来执行此操作，但我在这里迷路了。

对新手 phper 的任何帮助将不胜感激！

```
function getSalesPersonTargetTracker()
{
$targetTracker = new StdClass();
$targetTracker->agents = array();

$connection = sqlsrv_connect($server, $connectioninfo);

$query = "{call salespersontargettracker (?)}";
$params = array(
                 date_format(new DateTime(), '01/M/Y')
            );

//Run the Query             
$statement = sqlsrv_query($connection, $query, $params);

if (sqlsrv_fetch($statement) === false)
     print_r( sqlsrv_errors(), true);

//Read in the overall numbers
$targetTracker->target = (float)sqlsrv_get_field($statement, 0);
$targetTracker->workingDays = (int)sqlsrv_get_field($statement, 1);
$targetTracker->currentDay = (int)sqlsrv_get_field($statement, 2);
$targetTracker->dailyTarget = (float)sqlsrv_get_field($statement, 3);
$targetTracker->pointsShouldBeOn = (float)sqlsrv_get_field($statement, 4);
$targetTracker->pointsOn = (float)sqlsrv_get_field($statement, 5);
$targetTracker->pointsDifference = (float)sqlsrv_get_field($statement, 6);
$targetTracker->moneyShouldBeOn = (float)sqlsrv_get_field($statement, 7);
$targetTracker->moneyOn = (float)sqlsrv_get_field($statement, 8);
$targetTracker->moneyDifference = (float)sqlsrv_get_field($statement, 9);

//Move to the next result
sqlsrv_next_result($statement);

//Run through all of the agents and show their details
while (sqlsrv_fetch($statement))
{
    $salesPerson = new StdClass();
    $salesPerson->team = sqlsrv_get_field($statement, 0);
    $salesPerson->username = strtolower(sqlsrv_get_field($statement, 1));
    $salesPerson->target = (float)sqlsrv_get_field($statement, 2);
    $salesPerson->workingDays = (int)sqlsrv_get_field($statement, 3);
    $salesPerson->currentDay = (int)sqlsrv_get_field($statement, 4);
    $salesPerson->dailyTarget = (float)sqlsrv_get_field($statement, 5);
    $salesPerson->pointsShouldBeOn = (float)sqlsrv_get_field($statement, 6);
    $salesPerson->pointsOn = (float)sqlsrv_get_field($statement, 7);
    $salesPerson->pointsDifference = (float)sqlsrv_get_field($statement, 8);
    $salesPerson->moneyShouldBeOn = (float)sqlsrv_get_field($statement, 9);
    $salesPerson->moneyOn = (float)sqlsrv_get_field($statement, 10);
    $salesPerson->moneyDifference = (float)sqlsrv_get_field($statement, 11);

    //Add this person to the people list
    $targetTracker->agents[$salesPerson->moneyOn] = $salesPerson;
    krsort($targetTracker->agents);
}

return $targetTracker;
}

 $targetTrackerall = getSalesPersonTargetTracker(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:51:30.820

在您的第二个循环中，您可以在最后添加此代码。

```
if (!isset($sums[$salesPerson->team])) {
    $sums[$salesPerson->team] = 0;
}
$sums[$salesPerson->team] += $salesPerson->target; 
```

它构建了一个以团队为键的数组，以及该团队中任何人的目标总和。循环结束后，您可以使用 的值`$sums`。

如果这不起作用，请告诉我`var_dump($sums)`.

# grails - Grails 查看测试的所有输出（包括记录器输出）

> ID：12705451
> 
> 赞同：1
> 
> 时间：2012-10-03T09:22:46.340
> 
> 标签：grails

我正在像这样运行我的 grails 测试：

```
 grails test-app -echoOut -echoErr :unit <test_class> 
```

正如预期的那样，这会将任何 stdout 和 stderr 回显到终端。有没有办法让日志消息也出现在标准输出上？我想这可以通过以下两种方式之一来处理：

1.  配置记录器以输出到标准输出。
2.  grails test-app 能够拦截日志消息并将它们显示在标准输出流中。

谁能建议这两种方法中的哪一种是“最好的”，如果可能的话，我更喜欢使用方法2，有什么例子可以说明如何设置吗？

这也已在此问题评论[grails test-app 中查询到输出到控制台](https://stackoverflow.com/questions/2217873/grails-test-app-to-output-to-console#comment6647007_2219029)

谢谢！

# asp.net - SqlCacheDependency/SqlDependency 和列

> ID：12705454
> 
> 赞同：4
> 
> 时间：2012-10-03T09:22:51.830
> 
> 标签：asp.net, sql-server, sqlcachedependency

我正在使用以下代码缓存依赖于“人员”表的“名称”列的更改。但是，如果某个其他列（例如地址列）连续发生更改，则依赖项也会触发并清除缓存。（带有 SQL Server 2008 的 ASP.NET 4.0。）

```
public string GetTheVals()
{
    string vals = HttpContext.Current.Cache["TheCacheKey__X"] as string;
    if (vals == null)
    {
        con = GetConnection();
        SqlCommand cmd = new SqlCommand(@"
SELECT Name
FROM dbo.People
", con);            
        con.Open();
        SqlCacheDependency sqlDependency = new SqlCacheDependency(cmd);
        SqlDataReader rdr = null;

        StringBuilder builder = new StringBuilder("");
        rdr = cmd.ExecuteReader();
        while (rdr.Read())
        {
            builder.Append(rdr[0].ToString());
        }
        vals = builder.ToString();

        HttpContext.Current.Cache.Insert("TheCacheKey__X", vals, sqlDependency, System.Web.Caching.Cache.NoAbsoluteExpiration, TimeSpan.FromMinutes(20));
        CloseConnection(con);
    }
    return vals;
} 
```

为什么它会在不在命令查询中的列的值发生更改时触发，尽管据说它是在结果更改时触发的？

> 您还可以为 OnChange 事件分配一个委托，该事件将在关联命令的结果更改时触发。
> 
> [http://msdn.microsoft.com/en-us/library/62xk7953.aspx](http://msdn.microsoft.com/en-us/library/62xk7953.aspx)

还需要显式声明列，以便我们了解它将过滤掉表的其他列并且不会触发。

*   那么，为什么需要显式声明列名呢？
*   是否只是为了让开发人员意识到他们在做什么（例如在使用内部连接时）并避免创建会导致性能最差的依赖项？

> SELECT 语句中的**投影列必须明确声明**，并且表名必须用两部分名称限定。请注意，这意味着语句中引用的所有表都必须在同一个数据库中。
> 
> 该语句不能使用星号 (*) 或 table_name.* 语法来指定列。
> 
> 该语句不得包含子查询、外部联接或自联接。
> 
> [http://msdn.microsoft.com/en-us/library/ms181122(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms181122(v=sql.105).aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:16:27.093

但是，根据[MS 帮助](http://msdn.microsoft.com/en-us/library/ms188323%28v=sql.105%29.aspx)：

> 当发生以下事件之一时，SQL Server 会发送订阅查询通知：
> 
> *   查询结果中包含的行可能已更改。
>     
>     
> *   订阅到期。
>     
>     
> *   服务器重新启动。
>     
>     
> *   无法创建查询通知订阅（例如，SELECT 语句不符合为通知创建查询中指定的要求。
>     
>     
> *   服务器负载很重。
>     
>     
> *   订阅所依赖的对象被删除或修改。
>     
>     
> 
> 请注意，SQL Server**可能会生成查询通知以响应不更改数据的事件**，或者响应实际上不影响查询结果的更改。例如，**当 UPDATE 语句更改查询返回的行之一时，即使对该行的更新没有更改查询结果中的列，通知也可能触发**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:24:55.037

当我使用 SQL Cache 依赖项时，我注意到您应该考虑很多点。

如果您想查看缓存表在数据库中打开**AspNet_SqlCacheTablesForChangeNotification** ，其中之一您不能根据列名缓存表。

> SELECT TOP 1000 [tableName] ,[notificationCreated] ,[changeId] FROM [dbo].[AspNet_SqlCacheTablesForChangeNotification]

您会注意到 changeId 何时被触发，在更新、插入或删除时，这将触发缓存被刷新。

始终在命令通知中检查您的查询非常重要，正如您上面所说，许多查询不受支持。

问候并希望它有所帮助。

# perl - 为什么 IO::Pty 和 Expect 模块可以帮助解决 open2 的障碍？

> ID：12705460
> 
> 赞同：0
> 
> 时间：2012-10-03T09:23:10.817
> 
> 标签：perl, ipc

perl 的 open2 perldoc：[http](http://perldoc.perl.org/IPC/Open2.html) ://perldoc.perl.org/IPC/Open2.html 描述：

> 他的整个事情是相当危险的，因为你可能会永远阻止。它假设它会与 bc .... 之类的东西对话......来自 CPAN 的 IO::Pty 和 Expect 模块可以帮助解决这个问题，因为它们提供了一个真正的 tty（实际上是一个伪 tty），它让您再次回到调用命令中的行缓冲。

但我不明白为什么 IO::Pty 和 except 模块可以解决 open2 的问题？

顺便问一下，从 open2 返回的 FileHandler 是否可以无阻塞读取？

很感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:57:12.027

当您使用缓冲 I/O 时，数据不会通过文件句柄发送，直到缓冲区已满。这与终端 I/O 不同，终端 I/O 一旦用户按下 Enter 键就会发送一行。因此，如果您正在编写一个程序来与一个程序进行交互，就好像它是一个用户一样，缓冲 I/O 可能会导致问题。例如，您的程序可以发送一行数据，期望对方收到并输出回复。但是，如果在您等待回复时该行数据仍在输出缓冲区中，您将死锁 - 您的程序正在等待来自仍在等待您的输入的程序的回复，该程序仍在输出缓冲区中。

使用 pty 与程序交互允许您使用行缓冲（在两个方向上），以便在流中遇到换行符时发送数据。

此外，可以以非阻塞方式读取任何文件句柄 - 只需用于`select`确定该文件句柄上是否有可用数据。

这篇文章可能有助于解释：[http ://www.pixelbeat.org/programming/stdio_buffering/](http://www.pixelbeat.org/programming/stdio_buffering/)

# encoding - fop 0.93 中的嵌入字体

> ID：12705464
> 
> 赞同：1
> 
> 时间：2012-10-03T09:23:31.540
> 
> 标签：encoding, utf-8, apache-fop

我`fop 0.93`用于将 xml 转换为 pdf 并且我有字体问题
我的 xml 有西里尔字符所以当我打开生成的 pdf 时我得到了`##`

这是我的 fop 配置文件：

```
<fonts>    
    <font
        metrics-url="/FontMetrica/cour.xml"
        kerning="yes"
        embed-url="/Fonts/CourierNew.ttf">
    <font-triplet name="CourierNew" style="normal" weight="normal" />
    </font>
</fonts> 
```

和java代码：

```
fopFactory.setUserConfig(new File("fopConfig.xml"));
fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, out); 
```

在结果 pdf 文件 - 本文档中使用的属性字体中，我看到了这些字体：

1.  导游
2.  Courier-Bold

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:31:16.883

我认为您应该编写配置文件的完整路径。或者将 fopConfig.xml 放在类路径中。

# ruby-on-rails - 子类特定关联

> ID：12705466
> 
> 赞同：0
> 
> 时间：2012-10-03T09:23:33.340
> 
> 标签：ruby-on-rails

我想在 Rails 中做这样的事情，但我觉得我正在寻找麻烦。

```
class Account < ActiveRecord::Base
end

class BankAccount < Account
    has_many :users
end

class PaypalAccount < Account
    has_many :users, :limit 1
end 
```

这是要走的路吗？

如果是，我还能在 User 模型中安全地执行此操作吗？

```
class User < ActiveRecord::Base
    belongs_to :account
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:48:27.183

在我看来，相反的方向更合乎逻辑：

```
class Account < ActiveRecord::Base
  belongs_to :user
end

class BankAccount < Account
end

class PaypalAccount < Account
end

class User < ActiveRecord::Base
  has_many :accounts
  has_one :paypal_account
end 
```

# c++ - C++ 头文件模板

> ID：12705469
> 
> 赞同：2
> 
> 时间：2012-10-03T09:23:38.663
> 
> 标签：c++

我在头文件中使用模板。我正在使用的函数是递归的，我想在函数之外保留两个变量以进行比较。这是我的代码（注意：不编译）：

```
#include "Position.h"
#ifndef _SOLVER_H
#define _SOLVER_H

class Solver{
  public:
    template<typename T>
    int EvaluatePosition(T &p, bool me) {
        int score = 0;
        if(p.isGameOver()) {
            return p.score(me);
        }
        else {
            std::vector<T> nextMoves = p.getNextPositions();
            for(int i=0; i != nextMoves.size(); i++) {
                score += EvaluatePosition(nextMoves[i],!me);
                if(score > maxScore) {
                    p.display();
                    maxScore = score;
                    maxP = p;
                    p.display();
                }
            }
            return score;
        }
    }

    T maxP; // Want this to be the same Type T that is used in the function
    int maxScore;
};

#endif 
```

我正在尝试创建一个`T`与函数中使用的通用类型相同的变量，以便我可以保存一些数据。这是否可能，如果是，将如何完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:25:17.563

你可以让你的整个类成为一个模板，而不仅仅是函数。

```
template< class T > class Solver{
    //here goes your function that takes the argument of T class
    int EvaluatePosition(T &p, bool me){
        //...
    }

    T maxP; //here goes your variable
    int maxScore;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:29:20.570

当然，您可以对整个班级进行模板化。假设您不喜欢该调用接口，您可以使用本地模板类来保存状态：

```
class Solver{
  public:
    template<typename T> int EvaluatePosition(T &p, bool me)
    {
        struct Helper {
            T maxP;
            int maxScore;

            int DoEval(T &p, bool me)
            {
                int score = 0;
                if(p.isGameOver()){
                    return p.score(me);
                }
                else{
                    std::vector<T> nextMoves = p.getNextPositions();
                    for(int i=0; i != nextMoves.size(); i++){
                        score += DoEval(nextMoves[i],!me);
                        if(score > maxScore){
                            p.display();
                            maxScore = score;
                            maxP = p;
                            p.display();
                        }
                    }
                    return score;
                }
            }
        } helper;

        return helper.DoEval(p, me);
    }
}; 
```

# xml - WCF RESTful 服务中的 XML 声明标记

> ID：12705471
> 
> 赞同：3
> 
> 时间：2012-10-03T09:23:40.433
> 
> 标签：xml, wcf, xsd

将这样的 XML 声明标记包含`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>`到 WCF RESTful 服务响应中是否正确？下面的 XSD 描述了服务响应：

```
<?xml version="1.0" encoding="utf-8"?>
<xsd:schema version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="root">
  </xsd:element>
</xsd:schema> 
```

如果编码更改为UTF-16，我们是否需要强制设置声明标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:57:12.317

XML 声明将文档定义为 XML，而不是恰好有很多尖括号的纯文本。所以从技术上讲，是的，您应该将它包含在 XML 文档中，以确保服务将其正确理解为 XML。

但是，在很多情况下，即使没有包含 XML 声明，XML 解析器也会尝试将一段纯文本正确解析为 XML，如果它格式正确的话。

根据您问题的第二部分，当您开始想要更改文档的编码时，声明变得有必要。因此，如果其他系统开始不得不使用您正在生成的数据，您将在以后通过包含声明来为自己省去很多麻烦。

# linux - request.getRemoteAddr() 在 linux 上不起作用

> ID：12705472
> 
> 赞同：0
> 
> 时间：2012-10-03T09:23:42.107
> 
> 标签：linux, jsp, tomcat

我有一个 jsp 网络应用程序。我正在使用代码设置隐藏输入的值

```
request.getRemoteAddr() 
```

用客户端的 IP 地址填充它。当我的 webapp 部署在 tomacat/windows 上时，它会给我正确的 IP。但是当 webapp 部署到 tomcat/linux 时，它给了我错误的 IP 地址，比如 10.0.xx.xx

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:50:20.313

如果任何人（包括您自己）在此服务器前有代理，`getRemoteAddr()`将返回代理的地址，而不是客户端的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:44:34.443

如果您的服务器位于代理后面，您可以使用[X_FORWARDED_FOR](http://en.wikipedia.org/wiki/X-Forwarded-For)标头检索原始地址：

```
request.getHeader("X_FORWARDED_FOR"); 
```

# php - 创建要在 wordpress 后导入中使用的 xml 文件

> ID：12705473
> 
> 赞同：3
> 
> 时间：2012-10-03T09:23:43.117
> 
> 标签：php, jquery, xml, ajax, wordpress

好吧，事情就是这样，我有这个网站，***它曾经是***wordpress，但已经转换成**70 多个静态页面**，管理员被删除，整个网站都是静态的（这意味着每个页面都在 index.html 中），我想创建一个制作 xml 的脚本，这样我只需将它导入到新的 wordpress 安装中。

到目前为止，我能够创建一个 XML，但**它只导入一篇文章**。

数据源是页面的 URL，我使用 jquery $get 进行过滤，仅收集给定存档的帖子。

```
//html
<input type="text" class="full_path">
<input type="button" value="Get Data" class="getdata">

//script

$('.getdata').click(function(){
            $.get($('.full_path').val(), function(data) {
              post = $(data).find('div [style*="width:530px;"]');
              $('.result').html(post.html());

            });
        });//get Data 
```

通过 AJAX，我将清理后的数据发送到下面创建 XML 的 php 中：

```
$file = 'newpost.xml';
$post_data = $_REQUEST['post_data'];
// Open the file to get existing content
$current = file_get_contents($file);
// Append a new post to the file
$catStr = '';
if(isset($post_data['categories']) && count($post_data['categories']) > 0){
    foreach($post_data['categories'] as $category) {
        $catStr .= '<category domain="category" nicename="'.$category.'"><![CDATA['.$category.']]></category>';
    }   
}
$tagStr = '';
if(isset($post_data['tags']) && count($post_data['tags']) > 0){
    //populate post_tag like the above
}
$post_name = str_replace(' ','-',$post_data["title"]);
$post_name = str_replace(array('"','/',':','.',',','[',']','“','”'),'',strtolower($post_name));

$post_date = '2011-4-0'.rand(1, 29).''.rand(1, 12).':'.rand(1, 59).':'.rand(1, 59);
$pubTime = rand(1, 12).':'.rand(1, 59).':'.rand(1, 59).' +0000';

$post = '
    <item>
        <title>'.$post_data["title"].'</title>
        <link>'.$post_data["link"].'</link>
        <pubDate>'.$post_data["date"].' '.$pubTime.'</pubDate>
        <dc:creator>admin</dc:creator>
        <guid isPermaLink="false">http://localhost/saunders/?p=1</guid>
        <description></description>
        <content:encoded><![CDATA['.$post_data["content"].']]></content:encoded>
        <excerpt:encoded><![CDATA[]]></excerpt:encoded>
        <wp:post_id>1</wp:post_id>
        <wp:post_date>'.$post_date.'</wp:post_date>
        <wp:post_date_gmt>'.$post_date.'</wp:post_date_gmt>
        <wp:comment_status>open</wp:comment_status>
        <wp:ping_status>open</wp:ping_status>
        <wp:post_name>'.$post_name.'</wp:post_name>
        <wp:status>publish</wp:status>
        <wp:post_parent>0</wp:post_parent>
        <wp:menu_order>0</wp:menu_order>
        <wp:post_type>post</wp:post_type>
        <wp:post_password></wp:post_password>
        <wp:is_sticky>0</wp:is_sticky>
        '.$catStr.'
        '.$tagStr.'
        <wp:postmeta>
            <wp:meta_key>_edit_last</wp:meta_key>
            <wp:meta_value><![CDATA[1]]></wp:meta_value>
        </wp:postmeta>
    </item>
';

// Write the contents back to the file with the appended post
file_put_contents($file, $current.$post); 
```

附加后，我添加下面的代码以完成 xml rss 标记

```
</channel>
</rss> 
```

如果我查看并比较从 wordpress 站点导出的 xml 文件，我发现差别不大。请帮忙！！

这是生成的 xml 的示例：

```
<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0"
    xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:wfw="http://wellformedweb.org/CommentAPI/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:wp="http://wordpress.org/export/1.2/"
>
<channel>
    <title>lols why</title>
    <link>http://localhost/lols</link>
    <description>Just another WordPress site</description>
    <pubDate>Wed, 03 Oct 2012 04:24:04 +0000</pubDate>
    <language>en-US</language>
    <wp:wxr_version>1.2</wp:wxr_version>
    <wp:base_site_url>http://localhost/lols</wp:base_site_url>
    <wp:base_blog_url>http://localhost/lols</wp:base_blog_url>

    <wp:author><wp:author_id>1</wp:author_id><wp:author_login>adedoy</wp:author_login><wp:author_email>wazzup@gmail.com</wp:author_email><wp:author_display_name><![CDATA[adedoy]]></wp:author_display_name><wp:author_first_name><![CDATA[]]></wp:author_first_name><wp:author_last_name><![CDATA[]]></wp:author_last_name></wp:author>

    <generator>http://wordpress.org/?v=3.4.1</generator>

    <item>
        <title>Sample lift?</title>
        <link>../../breast-lift/delaware-breast-surgery-do-i-need-a-breast-lift/</link>
        <pubDate>Wed, 03 Oct 2012 9:29:16 +0000</pubDate>
        <dc:creator>admin</dc:creator>
        <guid isPermaLink="false">http://localhost/lols/?p=1</guid>
        <description></description>
        <content:encoded><![CDATA[<p>sample</p>]]></content:encoded>
        <excerpt:encoded><![CDATA[]]></excerpt:encoded>
        <wp:post_id>1</wp:post_id>
        <wp:post_date>2011-4-0132:45:4</wp:post_date>
        <wp:post_date_gmt>2011-4-0132:45:4</wp:post_date_gmt>
        <wp:comment_status>open</wp:comment_status>
        <wp:ping_status>open</wp:ping_status>
        <wp:post_name>sample-lift?</wp:post_name>
        <wp:status>publish</wp:status>
        <wp:post_parent>0</wp:post_parent>
        <wp:menu_order>0</wp:menu_order>
        <wp:post_type>post</wp:post_type>
        <wp:post_password></wp:post_password>
        <wp:is_sticky>0</wp:is_sticky>
        <category domain="category" nicename="Sample Lift"><![CDATA[Sample Lift]]></category><category domain="category" nicename="Sample Procedures"><![CDATA[Yeah Procedures]]></category>
        <category domain="post_tag" nicename="delaware"><![CDATA[delaware]]></category>
        <wp:postmeta>
            <wp:meta_key>_edit_last</wp:meta_key>
            <wp:meta_value><![CDATA[1]]></wp:meta_value>
        </wp:postmeta>
    </item>
    <item>
        <title>lalalalalala</title>
        <link>../../administrative-tips-for-surgery/delaware-cosmetic-surgery-a-better-experience/</link>
        <pubDate>Wed, 03 Oct 2012 3:20:43 +0000</pubDate>
        <dc:creator>admin</dc:creator>
        <guid isPermaLink="false">http://localhost/lols/?p=1</guid>
        <description></description>
        <content:encoded><![CDATA[
                lalalalalala
            ]]></content:encoded>
        <excerpt:encoded><![CDATA[]]></excerpt:encoded>
        <wp:post_id>1</wp:post_id>
        <wp:post_date>2011-4-0124:39:30</wp:post_date>
        <wp:post_date_gmt>2011-4-0124:39:30</wp:post_date_gmt>
        <wp:comment_status>open</wp:comment_status>
        <wp:ping_status>open</wp:ping_status>
        <wp:post_name>lalalalalala</wp:post_name>
        <wp:status>publish</wp:status>
        <wp:post_parent>0</wp:post_parent>
        <wp:menu_order>0</wp:menu_order>
        <wp:post_type>post</wp:post_type>
        <wp:post_password></wp:post_password>
        <wp:is_sticky>0</wp:is_sticky>
        <category domain="category" nicename="lalalalalala"><![CDATA[lalalalalala]]></category>
        <category domain="post_tag" nicename="oink"><![CDATA[oink]]></category>
        <wp:postmeta>
            <wp:meta_key>_edit_last</wp:meta_key>
            <wp:meta_value><![CDATA[1]]></wp:meta_value>
        </wp:postmeta>
    </item>
</channel>
</rss> 
```

请告诉我我错过了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:22:00.783

好的，重新讨论并确保我理解你，这是从你的静态文件返回 wordpress 的尝试。

为此，WP codex 上确实列出了三种主要方法，即[从 RSS 提要](http://codex.wordpress.org/Importing_Content#Importing_from_an_RSS_feed)、[(X)HTML](http://codex.wordpress.org/Importing_Content#Importing_from_.5BX.5DHTML)和[静态页面](http://codex.wordpress.org/Importing_Content#Importing_from_a_Site_of_Static_Pages)导入。话虽这么说，如果您有格式良好的 HTML（从您的 JQuery 搜索字符串中可以看到），最简单的方法之一是使用[HTML Import 2](http://wordpress.org/extend/plugins/import-html-pages/)插件，该插件在 codex 中引用。它为您提供了许多选项来从目录、url 执行此操作，并从新安装的管理屏幕中指定搜索参数。

如果这对您不起作用，或者您真的想将所有页面转换为 XML 以进行导入，因为您已经在使用 PHP 生成 XML，我强烈建议使用 PHP [DOM](http://us.php.net/dom)库来打开、解析、提取和从静态文件中写入数据。这将节省您浏览整个站点以生成 XML 所涉及的时间，并且它会一举生成所有页面的完整 XML 文件。

无论哪种方式，我都建议使用纯 RSS 文件，而不是尝试重新创建 WordPress 的自定义格式，因为如果操作得当，它对于所有内容类型都有很多数据库引用（地图 ID 等）。由于您似乎不需要它，因此请尝试制作一个普通的 RSS 文件，该文件具有您所需的最低限度，并且您可以在使用 codex 导入这些帖子后，在必要时编辑这些帖子以重新分配作者等[从 RSS 提要导入的](http://codex.wordpress.org/Importing_Content#Importing_from_an_RSS_feed)说明。这会容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T18:37:04.303

我和你的情况类似。我想生成一个 xml 导出文件，其中填充了帖子数据和特色图像。

这是我所做的：

1.  在我的本地主机上安装 Wordpress
2.  删除 Wordpress 的默认页面和评论设置
3.  修改帖子标题、内容等（可选，我这样做是为了更容易在导出的 xml 文件中找到这些信息）
4.  安装并激活 wordpress 导入器插件
5.  使用工具导出
6.  查看xml文件

这是我的xml文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!-- generator="WordPress/3.9" created="2014-04-25 14:19" -->
<rss version="2.0"
    xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:wfw="http://wellformedweb.org/CommentAPI/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:wp="http://wordpress.org/export/1.2/"
>

<channel>
    <title>wordpresslocal title</title>
    <link>http://wordpresslocal</link>
    <description>Another Wordpress Local Blog</description>
    <pubDate>Fri, 25 Apr 2014 14:19:36 +0000</pubDate>
    <language>de-DE</language>
    <wp:wxr_version>1.2</wp:wxr_version>
    <wp:base_site_url>http://wordpresslocal</wp:base_site_url>
    <wp:base_blog_url>http://wordpresslocal</wp:base_blog_url>

    <wp:author><wp:author_id>1</wp:author_id><wp:author_login>wordpresslocaladmin</wp:author_login><wp:author_email>wordpresslocal@einrot.com</wp:author_email><wp:author_display_name><![CDATA[wordpresslocaladmin]]></wp:author_display_name><wp:author_first_name><![CDATA[]]></wp:author_first_name><wp:author_last_name><![CDATA[]]></wp:author_last_name></wp:author>

    <generator>http://wordpress.org/?v=3.9</generator>

    <item>
                <title>POST TITLE</title>
        <link>http://wordpresslocal/post-title</link>
        <pubDate>Fri, 25 Apr 2014 14:02:29 +0000</pubDate>
        <dc:creator><![CDATA[wordpresslocaladmin]]></dc:creator>
        <guid isPermaLink="false">http://wordpresslocal/?p=1</guid>
        <description></description>
        <content:encoded><![CDATA[POST CONTENT]]></content:encoded>
        <excerpt:encoded><![CDATA[]]></excerpt:encoded>
        <wp:post_id>1</wp:post_id>
        <wp:post_date>2014-04-25 14:02:29</wp:post_date>
        <wp:post_date_gmt>2014-04-25 14:02:29</wp:post_date_gmt>
        <wp:comment_status>open</wp:comment_status>
        <wp:ping_status>open</wp:ping_status>
        <wp:post_name>post-title</wp:post_name>
        <wp:status>publish</wp:status>
        <wp:post_parent>0</wp:post_parent>
        <wp:menu_order>0</wp:menu_order>
        <wp:post_type>post</wp:post_type>
        <wp:post_password></wp:post_password>
        <wp:is_sticky>0</wp:is_sticky>
        <category domain="category" nicename="category1"><![CDATA[CATEGORY1]]></category>
        <category domain="post_tag" nicename="tag1"><![CDATA[TAG1]]></category>
        <wp:postmeta>
            <wp:meta_key>_thumbnail_id</wp:meta_key>
            <wp:meta_value><![CDATA[6]]></wp:meta_value>
        </wp:postmeta>
    </item>
</channel>
</rss> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-02T06:13:46.657

自定义 WordPress 导出/导入 XML 实际上适用于从其他数据库创建的内容 - 我已经能够导入帖子、页面、元数据、附件、评论等。

但它确实对某些元素相当挑剔——比如如果两个帖子共享相同的创建时间，只插入一个，第二个帖子被认为是重复的（因此必须将随机时间添加到仅限日期的源）。

在您的示例中 wp:post_date 似乎与日期格式相去甚远，因此这可能是触发重复检测的原因，导致导入单个帖子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-16T17:06:54.907

你有

```
<wp:post_id>1</wp:post_id> 
```

在这两个项目中。我想这是主要问题，因为这是主键。

# php - $_post['value'] 存在，但是当我用空检查它时，它返回 false

> ID：12705474
> 
> 赞同：0
> 
> 时间：2012-10-03T09:23:48.763
> 
> 标签：php

我有一个后变量，必须检查它是否为空。我像这样查看变量的值：

```
print_r($_POST['arrayId']); 
```

并打印预期值。但是，如果我这样做：

```
if(!empty($_POST['arrayId'])) {
    // some stuff
} else {
    echo "f";
} 
```

f 被打印，而应该执行的代码不是。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:27:22.693

相反，它会检查密钥是否存在于 post 数组中，而不管值如何。也适用于`NULL`,`false`和`0`任何其他被视为“空”值的值...

```
if(array_key_exists('arrayId', $_POST)) {
    // some stuff
} else {
    echo "f";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:26:25.830

`empty()`如果值为 ，则返回真`0`。

更改为：

```
if(isset($_POST['arrayId']) && strlen($_POST['arrayId'])) {
    // some stuff
} else {
    echo "f";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T09:30:47.600

验证输入 '$var' 到 empty() 函数

> 空（$var）
> 
> 如果 var 存在并且具有非空、非零值，则返回 FALSE。否则返回 TRUE。
> 
> 以下内容被认为是空的：
> 
> "" (空字符串) 0 (0 作为整数) 0.0 (0 作为浮点数) "0" (0 作为字符串) NULL FALSE array() (空数组) $var; （声明的变量，但没有值）
> 
> [http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

# php - 政策拒绝！- 来自服务器的回答

> ID：12705475
> 
> 赞同：0
> 
> 时间：2012-10-03T09:23:55.807
> 
> 标签：php, wordpress, apache, response

我尝试使用 POST 方法提交表单并得到以下响应：

**标头**

```
Connection          close
Content-Length      47
Pragma              "no-cache" 
```

**身体**

```
<html>
<body>
Denied by policy!
</body>
</html> 
```

服务器是 Apache。在 Wordpress CMS 上实现的表单。为什么会这样？请有任何想法。不幸的是，我无权访问服务器日志。

# sql-server - 新连接的 READPAST 锁定问题

> ID：12705477
> 
> 赞同：2
> 
> 时间：2012-10-03T09:24:00.627
> 
> 标签：sql-server, vb.net, locking

我有一个如下所示的存储过程：

```
USE [DBName]
GO
/****** Object:  StoredProcedure [dbo].[ProcName]    Script Date: 10/03/2012 12:10:16 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[ProcName](@filter bigint, @n int)
AS
DELETE FROM TableName WITH (READPAST, UPDLOCK, ROWLOCK) OUTPUT(DELETED.ColumnName2)
WHERE TableName.ID in (select top (@n) ID from TableName where TableName.ColumnName1 = @filter) 
```

此过程返回 ColumnName2 的第一个 @n 值（这些值表示的记录将从表中删除）。我正在使用 vb 方法中的这个存储过程，它通常运行良好。但是，有时，由于我不知道的原因，它会引发异常：

```
You can only specify the READPAST lock in the READ COMMITTED or REPEATABLE READ isolation levels. 
```

我的 vb 方法调用这个存储过程，如果它没有获得足够的值，那么它会生成新值并调用这个存储过程。重复此操作，直到有足够的值。本质上，TableName 就像一个队列，我的 vb 方法运行良好，但是，有时会抛出上面提到的异常。什么可能导致这种情况以及我的问题的解决方案是什么？

我试图为调用我的存储过程的代码启动一个新连接，但无济于事，因为再次引发了异常。尽管我已经阅读了以下文章，但我不知道可能是什么解决方案：

[http://www.red-gate.com/messageboard/viewtopic.php?t=13614](http://www.red-gate.com/messageboard/viewtopic.php?t=13614)

[调用存储过程时.NET READPAST 锁定错误](https://stackoverflow.com/questions/1119277/net-readpast-lock-error-when-calling-a-stored-procedure)

[http://support.microsoft.com/kb/981995](http://support.microsoft.com/kb/981995)

[http://blogs.technet.com/b/claudia_silva/archive/2011/08/08/replication-error-quot-you-can-only-specify-the-readpast-lock-in-the-read-committed- or-repeatable-read-isolation-levels-quot-generated-when-altering-published-table-columns.aspx](http://blogs.technet.com/b/claudia_silva/archive/2011/08/08/replication-error-quot-you-can-only-specify-the-readpast-lock-in-the-read-committed-or-repeatable-read-isolation-levels-quot-generated-when-altering-published-table-columns.aspx)

预先感谢您的任何帮助，

拉霍斯阿尔帕德。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T09:30:27.557

这应该可以解决您的问题

```
ALTER PROCEDURE [dbo].[ProcName](@filter bigint, @n int)
AS
SET TRANSACTION ISOLATION LEVEL READ COMMITTED
DELETE FROM TableName WITH (READPAST, UPDLOCK, ROWLOCK) OUTPUT(DELETED.ColumnName2)
WHERE TableName.ID in (select top (@n) ID from TableName where TableName.ColumnName1 = @filter) 
```

由于您使用的是需要此设置的 READPAST，因此您不妨在 SP 中明确设置它，因为它是安全范围的。

> 如果在存储过程或触发器中发出 SET TRANSACTION ISOLATION LEVEL，则当对象返回控制权时，隔离级别将重置为调用对象时有效的级别。

参考：[SET TRANSACTION ISOLATION LEVEL](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

至于为什么会这样，一个可能的原因是连接池和 SQL 调用之间的混合事务隔离级别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T10:32:43.793

首先，DELETE 不正确。为了实现你想要的，你需要这样写：

```
WITH T AS (
   SELECT TOP (@n)
    ColumnName2
   FROM TableName WITH (READPAST, UPDLOCK, ROWLOCK) 
   WHERE ColumnName1 = @filter)
DELETE FROM T
OUTPUT DELETED.ColumnName2; 
```

这种重写消除了 UPDATE 和顶部 ID 扫描之间的竞争条件。为了工作，WHERE 子句必须是 SARGable（即 ColumnName1 必须是索引），否则*无论如何*您最终都会进行扫描，而 READPAST 无济于事。有关更多详细信息，请参阅[将表用作队列](http://rusanu.com/2010/03/26/using-tables-as-queues/)。

现在回到你的问题：是什么导致不同的隔离级别？好吧，是您的代码中没有在此处发布的内容。如果我冒险尝试，它必须是[`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)使用默认构造函数构造的对象。请参阅[Using new TransactionScope() Considered Harmful](https://docs.microsoft.com/en-us/archive/blogs/dbrowne/using-new-transactionscope-considered-harmful)，了解这是如何发生的以及为什么不好。链接的文章还包含解决方案：使用事务范围的显式构造函数，它接受一个[`TransactionOptions`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionoptions.aspx)您明确指定所需隔离级别的构造函数。

# quotes - 从表达式引擎的 Javascript 输出中转义引号

> ID：12705482
> 
> 赞同：0
> 
> 时间：2012-10-03T09:24:18.013
> 
> 标签：quotes, expressionengine

我的一个 EE 模板中有以下内容：

```
<!-- Set up dynamic js array for notebook data -->
<script type="text/javascript">
notebooks = [{exp:channel:entries channel="product-notebooks" dynamic="no" backspace="1"}
{"entry_id": "{entry_id}",
"notebook_covertext": "{notebook-covertext}",
"notebook_image": "{notebook-image}"}
,{/exp:channel:entries}
]
</script> 
```

基本上我想 {notebook-covertext} 转义或 htmlentity-ize 内容..有人知道我怎么能做到这一点吗？

干杯，约翰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:18:47.433

你也可以试试[这个隐藏的配置变量](http://expressionengine.com/user_guide/general/hidden_configuration_variables.html#protect-javascript)

```
$config['protect_javascript'] = 'y'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:14:16.390

[这个插件](https://github.com/mhulse/mah_eencode)应该可以解决问题。

```
"notebook_covertext": "{exp:mah_eencode}{notebook-covertext}{/exp:mah_eencode}", 
```

# wsdl - 为什么我们要为服务指定接口？

> ID：12705483
> 
> 赞同：2
> 
> 时间：2012-10-03T09:24:21.660
> 
> 标签：wsdl, wsdl-2.0

我目前正在学习 WSDL 2.0 规范并检查[http://www.w3.org/TR/wsdl20-primer/#basics-service提供的示例](http://www.w3.org/TR/wsdl20-primer/#basics-service)

```
 <interface  name = "reservationInterface" >
    . . .
  </interface>

  <binding name="reservationSOAPBinding" 
          interface="tns:reservationInterface"
        . . . >
    . . .
  </binding>

  <service name="reservationService" 
       interface="tns:reservationInterface">

     <endpoint name="reservationEndpoint" 
               binding="tns:reservationSOAPBinding"
               address ="http://greath.example.com/2004/reservation"/>

  </service> 
```

在这里你可以看到在`service`声明中我们必须指定`interface`属性，尽管它已经在`binding`声明中指定了。所以拥有绑定名称 - 我们可以解析它实现的接口名称。从我的角度来看（还不知道规范的人） - 这只是数据重复。

问题：`interface`in`service`指定的用途是什么？有什么实际原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:38:56.147

我对 WSDL 2.0 规范不是很熟悉（WSDL 1.1 仍然是描述 Web 服务的事实上的方式），但我认为这实际上是倒退的。`<service>`需要该属性`interface`，而 上的一个`<binding>`是可选的。

[http://www.w3.org/TR/wsdl20-primer/#basics-service](http://www.w3.org/TR/wsdl20-primer/#basics-service)（强调我的）：

> **WSDL 2.0 服务指定该服务将支持的单个接口**，以及可以访问该服务的端点位置列表。每个端点还必须引用先前定义的绑定，以指示在该端点将使用哪些协议和传输格式。**一个服务只允许有一个接口**。

[http://www.w3.org/TR/wsdl20-primer/#more-bindings-reusable](http://www.w3.org/TR/wsdl20-primer/#more-bindings-reusable)（强调我的）：

> 绑定可以是可重用的（适用于任何接口）或不可重用的（指定用于特定接口）。[...]**要定义可重用绑定，绑定元素只需省略接口属性**并省略指定任何特定于操作和特定于故障的绑定细节。端点以后可以以与不可重用绑定相同的方式引用可重用绑定。因此，**当从端点引用可重用绑定时，它与特定接口相关联，因为端点是服务的一部分，并且服务指定了它实现的特定接口**。

据我了解，您需要在`interface`上`<service>`指定正在实现的接口，而在`interface`上`<binding>`限制它仅对该接口的使用。当两者都被指定但它们用于不同的事情时，这似乎有点多余。

# javascript - 有没有办法在 Javascript `Date` 对象中表示 2012 年 10 月 21 日？

> ID：12705485
> 
> 赞同：5
> 
> 时间：2012-10-03T09:24:22.300
> 
> 标签：javascript, date, timezone

我注意到时区和 Javascript`Date`对象有些奇怪。

在 Linux 机器上尝试：

```
$ TZ='America/Sao_Paulo' js 
js> new Date(2012, 9, 21, 0, 0, 0).toString() 
"Sat Oct 20 2012 23:00:00 GMT-0300 (BRST)" 
```

我发现无法获得代表 2012 年 10 月 21 日的对象。每次尝试获取`Date`当天 00:00 到 01:00 之间的日期都会导致前一天的日期介于晚上 11:00 到 00:00 之间。

（Windows 用户可以将他们的时区更改为巴西利亚/GMT-03 以体验相同的行为）

将一小时（或一天）添加到此类 date 对象会导致返回**相同的 date**。

我想这与巴西特定日期的夏令时有关，但我绝对不知道如何处理。

我有一个循环在一个月中的几天（对于日历应用程序）进行迭代，在这种情况下，当到达 2012 年 10 月 20 日时，它显然会永远循环。

一定是我做错了什么，但我不知道如何处理这种情况，因为我猜其他时区也可能发生这种情况。

`Date`用Javascript 处理以确保不会发生此类时区/夏令时相关问题的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:37:30.717

这是绝对正确的行为。由于 DST 午夜在巴西当地时间 10 月 21 日根本不存在。如果您只需要构建一个日历，您可以使用`new Date(2012, 9, 21, 0, 0, 0).toUTCString()`而不是`new Date(2012, 9, 21, 0, 0, 0).toString()`和其他[UTC 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。

例如，要创建一个 UTC 日期，您可以使用`new Date(Date.UTC(2012, 9, 21, 0, 0, 0));`.

# objective-c - 如何在 10.8 中显示文件复制进度

> ID：12705491
> 
> 赞同：1
> 
> 时间：2012-10-03T09:24:49.467
> 
> 标签：objective-c, macos, cocoa, macos-carbon, nsfilemanager

[FSCopyObjectAsync](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/File_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/FSCopyObjectAsync)在 OS X v10.8 中已弃用，现在如何显示文件复制操作的进度指示器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:37:04.897

我的回答假设您正在谈论显示正在复制的*单个文件的进度。*

是的，" `FSCopyObjectAsync`" 已被弃用，但它还没有消失。

正如您所发现的，Apple 尚未为最终将被删除的功能提供有用的替代品。我怀疑（但不确定）当新功能出现时，也许对于 10.9，它将在“ `NSFileManagerDelegate`”协议中提供给代表使用。

为了确定这一点，Apple 需要意识到有很多开发人员需要这个。[在http://bugreporter.apple.com](http://bugreporter.apple.com)上提交错误报告——它可能会作为副本被关闭，但每一票都很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T12:31:30.680

[copyfile(3)](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/copyfile.3.html)是 FSCopyObjectAsync 的替代方法。[这](https://github.com/rustle/RSTLCopyOperation/blob/master/Copy/RSTLCopyOperation.m)是带有进度回调的 copyfile(3) 示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-21T12:39:56.610

我创建了一个开源项目来解决这个问题，我在 NSOperation 上包装了副本文件（3）并为它创建了一个 gui，请检查它并可能有助于使它变得更好。

[https://github.com/larod/FileCopyDemo](https://github.com/larod/FileCopyDemo)

![在此处输入图像描述](../Images/591d461a08684086ce957a4ccfea1b66.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:07:09.643

在 C 中使用 progressIndicator 处理文件

```
#define BUFSIZE (64*1024)

void *thread_proc(void *arg);
      {
          //outPath & inPatn an NSString paths

          char buffer[BUFSIZE];
          const char * outputFile = [outPath UTF8String];
          const char * inputFile = [inPath UTF8String];
          int in = open(inputFile, O_RDONLY);
          int out = open(outputFile, O_WRONLY | O_CREAT | O_TRUNC);

          vvolatile off_t progress;
          progress = 0;             
          ssize_t bytes_read;
          double fileSize = 0;
          NSNumber * theSize;

          if ([inPath getResourceValue:&theSize forKey:NSURLFileSizeKey error:nil])
                  fileSize = [theSize doubleValue];

          [progressIndicator setMaxValue:fileSize];      
          while((bytes_read = read(in, buffer, BUFSIZE)) > 0)
          {
              write(out, buffer, BUFSIZE);
              progress += bytes_read;

              [progressIndicator setDoubleValue:progress];

          }
          // copy is done, or an error occurred
          close(in);
          close(out);
      } 
```

# maven - Usergrid 构建错误，打开 zip 文件时出错

> ID：12705492
> 
> 赞同：1
> 
> 时间：2012-10-03T09:24:51.493
> 
> 标签：maven, usergrid

当我尝试构建 Usergrid 时，我遇到了以下错误。

```
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] error: error reading /root/.m2/repository/com/sun/jersey/jersey-test-framework/jersey-test-framework-core/1.9.1/jersey-test-framework-core-1.9.1.jar; error in opening zip file
[ERROR] error: error reading /root/.m2/repository/com/sun/jersey/jersey-  grizzly2/1.11/jersey-grizzly2-1.11.jar; error in opening zip file
[INFO] 2 errors 
```

谁能告诉我原因？

# php - 如何使用php读取docx文件中图像的超链接以及页眉和页脚的内容？

> ID：12705495
> 
> 赞同：0
> 
> 时间：2012-10-03T09:24:56.637
> 
> 标签：php, hyperlink, header, footer, docx

我在使用 php 读取 docx 文件中的图像超链接时遇到问题。我也无法在同一个 docx 文件中读取页眉和页脚的内容。我发现 PHPDOCX 是处理 DOCX 文件的近邻，但我仍然找不到这个答案。您的帮助将不胜感激。先感谢您。

纳瓦拉杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:46:10.167

不确定 docx，但它适用于 doc，请在下面尝试

```
function parseWord($userDoc) 
        {
            $fileHandle = fopen($userDoc, "r");
            $line = @fread($fileHandle, filesize($userDoc));   
            $lines = explode(chr(0x0D),$line);
            $outtext = "";
            foreach($lines as $thisline)
              {
                $pos = strpos($thisline, chr(0x00));
                if (($pos !== FALSE)||(strlen($thisline)==0))
                  {
                  } else {
                    $outtext .= $thisline." ";
                  }
              }
             $outtext = preg_replace("/[^a-zA-Z0-9\s\,\.\-\n\r\t@\/\_\(\)]/","",$outtext);
             return $outtext;

        } 
        $text = parseWord("1.doc");
        echo $text; 
```

它将识别超链接，然后您可以使用简单的逻辑。页眉和页脚也被拉出

# c# - 在 WCF 客户端中使用自定义 SslStream

> ID：12705498
> 
> 赞同：1
> 
> 时间：2012-10-03T09:25:09.763
> 
> 标签：c#, wcf

我正在通过带有客户端身份验证的 https 使用 WCF 服务。代码如下所示

```
var webHttpBinding = new WebHttpBinding(WebHttpSecurityMode.Transport);
webHttpBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Certificate;
var webChannelFactory = new WebChannelFactory<MyService>(webHttpBinding, serviceUri);
webChannelFactory.Credentials.ClientCertificate.Certificate = clientCertificate;
webChannelFactory.Credentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;

var service = webChannelFactory.CreateChannel();

service.SomeMethod(); 
```

问题是，每当我使用某些客户端证书（来自 pfx 文件）时，.NET SslStream 都希望其签名者和根证书需要存在于 Windows 证书存储中。如果它们不存在，则不会在 TLS 握手期间发送客户端证书，从而导致身份验证失败。

我认为这是 SslStream 的一种行为，无法更改。如果是真的，有没有办法在上面的 WCF 客户端代码中使用自定义 SslStream？例如，OpenSSL.NET 提供了一个没有此限制的 SslStream 类。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T21:00:47.807

您的**clientCertificate是****X509Certificate**类型吗？在我的测试中，创建**X509Certificate2**类型的证书有助于使用证书，而无需将其安装到 Windows 存储中。

# jquery - 通过命名空间backbone.js取消绑定事件？

> ID：12705501
> 
> 赞同：3
> 
> 时间：2012-10-03T09:25:12.633
> 
> 标签：jquery, backbone.js

是否可以通过backbone.js 中的命名空间取消绑定事件（如在jQuery 中）？

例子：

```
var dispatcher = _.clone(Backbone.Events)
dispatcher.on('hello.namespace', doSomething)
dispatcher.on('world.namespace', doSomethingElse)

dispatcher.off('.namespace') 
```

它不是那样工作的。还有另一种方法可以做到这一点吗？

# curl - cURL 和 libcurl 有什么区别？

> ID：12705502
> 
> 赞同：1
> 
> 时间：2012-10-03T09:25:12.767
> 
> 标签：curl

我无法安装这个 WP 插件

```
http://wordpress.org/support/plugin/video-thumbnails 
```

因为它一直告诉我

```
Sorry, but this plugin requires libcurl to be activated on your server. 
```

我正在使用 WAMP 并且 cURL 已激活。

我不明白这个插件在谈论 cURL 和 libcurl 有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T22:08:08.043

cURL 是包，可以包括命令行 curl.exe 应用程序和 libcurl DLL“库”，后者是其他应用程序使用的东西。

# c++ - 变量返回类型

> ID：12705506
> 
> 赞同：2
> 
> 时间：2012-10-03T09:25:24.770
> 
> 标签：c++, boost, variable-assignment

假设您有以下内容：

```
class Shape  // base class
{
private:
    bool degenerate, ill_defined;
    ...
public:
    bool isVoid  () { return false; }
    bool isCircle() { return false; }
    bool isPoint () { return false; }
    bool isPlane () { return false; }
    bool isSphere() { return false; }
    ...
};

class Void : public Shape {
    ...
}

class Plane : public Shape
{
public:
    bool isPlane() { return !degenerate && !ill_defined; }
    bool isVoid () { return ill_defined; }
    ...
    operator Void () throw() { 
        if (isVoid()) return Void(); 
        else throw ...; //some error
    }
    ...
}

class Point : public Shape {
private:
    double radius;
    ...
public:
    bool isPoint() { return !ill_defined; }
    bool isVoid () { return ill_defined; }
    ...        
    operator Void () throw() { ... }
    ...
}

class Circle : public Shape // similar to the rest

class Sphere : public Shape // similar to the rest 
```

`Plane`a和 a之间的交集`Sphere`可以是

*   a `Circle`（如果平面“穿过”球体）
*   a `Point` （如果平面“刚刚接触”球体）
*   a `Void` （如果球体完全位于平面上方或下方）

我想知道如何最好地定义和使用 a`Plane`和 a之间的交集`Sphere`，因为假设的返回类型

```
intersect(const Sphere& S, const Plane& P) 
```

编译时方法/自由函数是未知的。

我以前从未遇到过这种情况，所以我查找了一些可能的方法来做到这一点。我遇到了[这个](https://stackoverflow.com/questions/9234789/variable-return-type-in-c-class)建议的问题`boost::variant`。在我的情况下，这看起来像

```
boost::variant<Void, Point, Circle> intersection = 
    intersect(const Sphere& S, const Plane& P); 
```

但这有三个缺点：

1.  很丑
2.  之类的东西`intersection.radius`不能按原样使用，因为`Point`and`Void`没有`radius`. 你必须做类似的事情

    ```
    if (intersection.isPoint()){
        ...
    }
    else if (intersection.isCircle())
    {
        // possibly cast to Point if degenerate, otherwise:
        double R = intersection.radius;
        ...
    }
    // etc. 
    ```

3.  实现所有这些形状的库的用户总是必须知道通过交叉两个形状可以返回*哪些类型。*也就是说，用户总是必须声明一些`boost::variant<scope::Void, scope::Point, scope::Circle>`复杂且丑陋的类型。幸运的是，c++11 有这个`auto`关键字。或者，您可以使用这样的成员

    ```
    class Sphere : public Shape
    {
        ...
    public: 

        boost::variant<scope::Void, scope::Point, scope::Circle>
            intersect_type;

        intersect_type intersect(const Plane& P);

        ...
    }; 
    ```

    这样我们就可以使用

    ```
    Sphere::intersect_type t = S.intersect(P); 
    ```

    其中`S`是 的一个实例`Sphere`和`P`的一个实例`Plane`。但是我们仍然必须单独处理所有可能的类型：

    ```
    if (intersection.isPoint()){
        ...
    }
    else if (intersection.isCircle()){
        intersection.radius;
    }
    // etc. 
    ```

所以我们试图从用户那里带走的复杂性实际上仍然存在。

我觉得我在这里遗漏了一些东西。也许有一种更聪明的方法来实现我的`Shape`基类？还是我应该创建一个单独的专用`Intersect`课程？对于这种情况，哪种解决方案最优雅、最有效和最有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:35:12.957

副手：

谓词方法对`isXXXX()`我来说似乎是一种代码味道。你会做的

*   `if (dynamic_cast<Circle*>(shapePtr))`通常使用 RTTI
*   或使用`variant::which()`和/或`variant::type()`区分变体的存储值

### 对于你的问题：

有几种可能的方法。

1.  经典的 OO 方法是从 Shape 派生所有内容并始终返回 a `std::unique_ptr<Shape>`（或类似的）。

2.  但是，显然，您可以执行现代 C++*静态*OO，在这种情况下，您最终会得到类似于变体的东西。然后你会写一个访问者来处理不同的情况：

^(**[（在http://liveworkspace.org/code/bad329cb40d94a21531e1153f4c0877b](http://liveworkspace.org/code/bad329cb40d94a21531e1153f4c0877b)**上直播）)

```
#include <string>
#include <iostream>
#include <boost/lexical_cast.hpp>
#include <boost/variant.hpp>
#include <boost/variant/static_visitor.hpp>

struct Shape 
{ 
    /*virtual*/ double getSurface() const { return 42.0; }  // TODO
};

struct Circle : Shape {};
struct Point : Shape {};
struct Rect : Shape {};

struct Nil {};

typedef boost::variant<Nil, Circle, Point, Rect> Intersect;

struct DescribeVisitor : boost::static_visitor<std::string>
{
    std::string operator()(Circle const& s) const {
        return std::string("Got a circle of ") + boost::lexical_cast<std::string>(s.getSurface());
    }

    std::string operator()(Rect const& s) const {
        return std::string("Got a rectangle of ") + boost::lexical_cast<std::string>(s.getSurface());
    }

    std::string operator()(Point const& s) const {
        return std::string("Got a point of ") + boost::lexical_cast<std::string>(s.getSurface()); // mmm bit funny :)
    }

    std::string operator()(Nil const&) const {
        return std::string("Got an empty intersection");
    }
};

std::ostream& operator<<(std::ostream& os, Intersect const& i)
{
    return os << boost::apply_visitor(DescribeVisitor(), i);
}

int main(int argc, const char *argv[])
{
    Intersect describe = Point();
    std::cout << describe << std::endl;

    describe = Rect();
    std::cout << describe << std::endl;

    describe = Circle();
    std::cout << describe << std::endl;
} 
```

输出：

```
Got a point of 42
Got a rectangle of 42
Got a circle of 42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:35:06.867

在我看来，你可以：

1) 创建返回 void * 的重载运算符/函数，然后将链接到一个保存其真实返回值的成员变量，以及另一个具有其类型的成员函数。

2）使用模板，虽然这可能比它的价值更麻烦。

3) 继续使用 boost::variant，并使用（但不是死）宏清理它一些。

当然，我仍然主要习惯于 C++98，ergo auto 只是我开始玩的东西。它也可能在回报中提供安慰，因为我相信它是在运行时确定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:54:22.090

如果与您的形状类型的交互严格依赖于特定类型并且不能简化为可以以多态方式使用的一些统一的基本接口，那么唯一可以帮助您管理复杂性的是某种形式的[`Visitor`](http://www.swe.uni-linz.ac.at/research/deco/designPatterns/visitor/visitor.defaultroles.c++.html)模式。您可以使其对您的类层次结构具有侵入性，但[`boost::variant`](http://www.boost.org/doc/libs/release/libs/variant/)已经对其提供了有用的支持 - [`boost::static_visitor`](http://www.boost.org/doc/libs/1_51_0/doc/html/variant/reference.html#variant.concepts.static-visitor)：

```
// Define processing for intersection types
struct IntersectionProcessor: boost::static_visitor<>
{
    void operator()(Sphere&)
    {
       // Process Sphere
    }

    void operator()(Point&)
    {
       // Process Point
    }

    void operator()(Void&)
    {
       // Process Void
    }

    template <typename T> void operator()(T&)
    {
       // Process any other shape
    }
};

// Usage
Sphere A;
Plane B;
auto intersectResult = intersect(A, B);
boost::apply_visitor(IntersectionProcessor(), intersectResult);

// Also easy to use as functor applied to container of results:
std::vector<intersect_type> intResVec = getIntersectionResults();
std::for_each(intResVec.begin(), intResVec.end(),
   boost::apply_visitor(IntersectionProcessor)); 
```

# javascript - 拥有适用于 Chrome 和 Firefox 但不适用于 IE 的 Javascript

> ID：12705507
> 
> 赞同：0
> 
> 时间：2012-10-03T09:25:25.190
> 
> 标签：javascript

我创建了一个简单的 javascript 来选择所有复选框。它可以在两种浏览器中使用，但不能在一种浏览器中使用。任何人都可以帮助我使用此脚本使其与 IE8 或更高版本兼容。

```
<script language="JavaScript">

function toggle(source) {

  checkboxes = document.getElementsByName('marked[]');

  for(var i in checkboxes)

    checkboxes[i].checked = source.checked;

}

</script>

    <p>

        <input type="checkbox" onClick="toggle(this)" /> Select All

    </p> 
```

谢谢，

约拿

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T09:27:06.157

尝试普通循环：

```
for (var i = 0; i <checkboxes.length; i++) {
    checkboxes[i].checked = source.checked;
} 
```

返回的`getElementsByName`HTMLCollection 不是普通数组，并且在每个浏览器中可能会有所不同。Firefox 和 Chrome 最有可能在使用`for(var i in checkboxes)`循环时返回索引，而 IE 则返回项目本身 - 普通循环应该可以解决这个问题，因为所有浏览器的基本语法都是相同的。

# c++ - 转移到 VS 2010，很多“未解决的外部符号”错误

> ID：12705508
> 
> 赞同：1
> 
> 时间：2012-10-03T09:25:30.127
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, linker

我正在将现有的多项目 VS2008 解决方案转移到 VS2010。

在修复了一些与 C++11 相关的问题后，所有项目都成功编译，但我得到了很多（大约一百个）“未解决的外部符号”链接器错误。它们都是关于我的一个项目（图书馆）的功能。我检查了项目依赖项，它们没问题：这个库的所有用户都将它列为依赖项。

转移前，解决方案在VS2008中编译链接成功。

为什么会出现此问题以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:25:30.127

事实证明，“链接库依赖项”选项设置为“否”（在原始项目和转换后的项目中）。不知何故，尽管有这样的设置，库仍然在 VS2008 中被链接，而在 VS2010 中却没有。

为了解决这个问题，我刚刚将“Librarian->General”中的“Link library dependencies”设置为“Yes”：

![在此处输入图像描述](../Images/63c729f326dd9956e46c1c6a6675c4e9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:27:11.290

您需要在 Project Properties-->Linker-->General 下指定库的路径以及在 Linker-->Input 下使用的库

# java - Java优化：局部变量或函数调用

> ID：12705517
> 
> 赞同：10
> 
> 时间：2012-10-03T09:26:04.427
> 
> 标签：java, variables, optimization

你会做什么？

```
 doThings(folder.getInstructions()) ;
 for (Instruction instruction : folder.getInstructions()) {
    // do things
 }
functionCall(folder.getInstructions()) ; 
```

或这个 ：

```
instructions = folder.getInstructions() ;
doThings(instructions)
for (Instruction instruction : instructions) {
  // do things
}
functionCall(instructions) ; 
```

最重要的是，我想知道何时将值存储在局部变量中更有效，何时进行函数调用更好。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T09:27:12.477

更具可读性更有效。临时表达式和局部变量需要相同的空间，从 CPU/JVM 的角度来看，它并没有太大区别。JVM 会更好地优化/插入它。

但是，如果`getInstructions()`方法调用很昂贵，请将其*缓存*在局部变量中。如果它只是一个普通的吸气剂，无论如何它都会被内联。*此外，恕我直言，在您的特定情况下*，局部变量更具可读性，如果`getInstructions()`随着时间的推移可能会产生不同的结果，甚至可能更正确。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-03T09:28:42.253

这完全取决于做什么`getInstructions()`。如果它只是返回一个字段的值——*并且*如果你确信字段值在调用之间不会改变——那么你可能不会看到两个片段之间的任何效率差异。

另一方面，如果`getInstructions()`需要发出十几个 Web 请求，那么显然您希望避免多次调用该请求。

不过，可读性比效率更重要。在这种情况下，无论如何我发现第二个选项更具可读性 - 更清楚的是，您希望使用相同的值执行三个单独的步骤（两个方法调用和一个循环）。另一方面，我很高兴能写出类似的东西：

```
for (int i = 0; i < text.length(); i++) {
    ...
} 
```

而不是将*其*分解为一个单独的变量：

```
int length;
for (int i = 0; i < length; i++) {
    ...
} 
```

这真的取决于上下文。从可读性的角度来看，有时额外的变量会有所帮助，有时则不会。*效率*的观点完全取决于方法调用在做什么，以及它对于 JIT 是否“可内联”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:27:16.937

每当您想多次使用方法的结果时，最好将方法调用的结果存储在某个临时变量中。这样可以节省方法调用的处理时间。在这种情况下，这不会有太大影响。但是当有很多调用时可能会影响..

另外，请记住，您的局部变量存储在`stack`. 因此，拥有一个临时局部变量会占用堆栈空间。虽然在像这样的小情况下这并不是什么大问题。但是应该避免不必要的局部变量。

所以，这两种方法**各有****利弊**。。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:32:23.177

我的答案将取决于我正在尝试开发**的应用程序类型。**例如，

如果值在应用期间快速变化，则第一个代码块会更好*。*如果您需要准确的结果，这很好。

如果您确定最初获取的值不会影响代码的其他部分，则第二个很好*。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T09:35:41.087

我相信这取决于情况。如果它需要多次调用相同的方法（并且您得到相同的值）并且最好进行一次调用并将其存储到某个局部变量中。

如果您只需要调用该函数一次。无需寻找局部变量。**

# wpf - WPF 控件模板：在类型“控件”错误中找不到属性“ContentStringFormat”

> ID：12705520
> 
> 赞同：0
> 
> 时间：2012-10-03T09:26:12.883
> 
> 标签：wpf, wpf-controls, themes

我在 C:\Program Files\Microsoft Expression\Blend 4\SystemThemes\Wpf 文件夹中找到了内置主题；所以我将 luna 主题 (luna.normalcolor.xaml) 复制到我的应用程序文件夹中，并编辑这个主题以满足我的需要。我还添加了对 PresentationFramework.Luna.dll 的引用。当我打开 luna.normalcolor.xaml 文件时，VS2010 显示错误：在“Control”类型中找不到属性“ContentStringFormat”，如下所示：

```
<DataTemplate DataType="{x:Type CollectionViewGroup}">
    <ContentPresenter Content="{Binding Path=Name}" 
           ContentStringFormat="{TemplateBinding ContentStringFormat}"/>
</DataTemplate> 
```

我检查了 ContentPresenter 类是否具有 ContentStringFormat 属性。那么是什么导致了这个错误，以及如何解决呢？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:13:03.503

我不知道这是否正常工作，但我尝试并没有错误

```
<DataTemplate DataType="{x:Type CollectionViewGroup}">
        <ContentPresenter Content="{Binding Path=Name}" 
                          ContentStringFormat="{TemplateBinding ContentPresenter.ContentStringFormat}" />
</DataTemplate> 
```

# arrays - 数组中的Excel动态引用

> ID：12705523
> 
> 赞同：0
> 
> 时间：2012-10-03T09:26:29.357
> 
> 标签：arrays, excel

我有一个数组，我希望 a`SUMIF`中包含的单元格引用是动态的，因为我希望数据的主要保持点保持不变，但是当我向下拖动公式时，我希望行引用随之改变

即我的主要数据存在于 Cells`A1:D5`论文是一组完全不同的价格

我有一个用一系列字符手动更新的表格，并`A10:D20`根据使用的字符在单元格中完成，返回正确的价格

基本公式是`=SUM(IF(A10:D10="l",1*$A$1:$D$1,0))+SUM(IF(A10:D10="N",1*$A$2:$D$2,0))+SUM(IF(A10:D10="z",1*$A$3:$D$3,0))+SUM(IF(A10:D10="p",1*$A$4:$D$4,0))+SUM(IF(A10:D10="u",1*$A$5:$D$5,0))`

所以我想向下移动一行到第 11 行，并相应地改变相对引用说`=SUM(IF(A11:D11="l",1*$A$1:$D$1,0)).............etc`

我只是看不出怎么做，如果数组实际上是这样做的正确方法

有什么想法吗？

# sml - 为什么下面的函数没有结束？

> ID：12705525
> 
> 赞同：0
> 
> 时间：2012-10-03T09:26:35.327
> 
> 标签：sml, smlnj

为什么下面的函数没有结束？

```
(* funct1 is a different function that does end *)
fun funct(a,b::bs)=let val c=a in funct1(c,a,b::bs); 
= ;
= ;
= ;
= ;
stdIn:15.54-17.2 Error: syntax error: deleting  SEMICOLON SEMICOLON SEMICOLON 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:33:15.267

在这种情况下，错误消息确实很有指导意义。该函数没有结束，因为您需要`end`关键字而不是`;`. 这是`let...in...end`SML 中块的语法。

```
fun funct (a, b::bs) = let val c = a in funct1 (c, a, b::bs) end 
```

# python - 使用 xlrd 读取 excel 文件

> ID：12705527
> 
> 赞同：16
> 
> 时间：2012-10-03T09:26:47.820
> 
> 标签：python, excel, xlrd

我在读取由我无法控制的 Perl 脚本编写的 .xls 文件时遇到问题。这些文件在单元格中包含一些格式和换行符。

```
filename = '/home/shared/testfile.xls'
book = xlrd.open_workbook(filename)
sheet = book.sheet_by_index(0)
for rowIndex in xrange(1, sheet.nrows):
    row = sheet.row(rowIndex) 
```

这引发以下错误：

```
_locate_stream(Workbook): seen
    0  5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
   20  4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
172480= 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
172500  4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 2
172520  2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
173840= 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
173860  2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1
173880  1 1 1 1 1 1 1 1
Traceback (most recent call last):
  File "/home/shared/xlrdtest.py", line 5, in <module>
    book = xlrd.open_workbook(filename)
  File "/usr/local/lib/python2.7/site-packages/xlrd/__init__.py", line 443, in open_workbook
    ragged_rows=ragged_rows,
  File "/usr/local/lib/python2.7/site-packages/xlrd/book.py", line 84, in open_workbook_xls
    ragged_rows=ragged_rows,
  File "/usr/local/lib/python2.7/site-packages/xlrd/book.py", line 616, in biff2_8_load
    self.mem, self.base, self.stream_len = cd.locate_named_stream(qname)
  File "/usr/local/lib/python2.7/site-packages/xlrd/compdoc.py", line 393, in locate_named_stream
    d.tot_size, qname, d.DID+6)
  File "/usr/local/lib/python2.7/site-packages/xlrd/compdoc.py", line 421, in _locate_stream
    raise CompDocError("%s corruption: seen[%d] == %d" % (qname, s, self.seen[s]))
xlrd.compdoc.CompDocError: Workbook corruption: seen[2] == 4 
```

我找不到有关 CompDocError 或 Workbook 损坏的任何信息，更不用说 see[2] == 4 部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-02-05T04:06:48.160

对拉米尔+1。`compdoc.py`只需在(lines `425-27`in )中注释掉这些行`xlrd 1.2.0`：

```
if self.seen[s]:
    print("_locate_stream(%s): seen" % qname, file=self.logfile);dump_list(self.seen, 20, self.logfile)
    raise CompDocError("%s corruption: seen[%d] == %d" % (qname, s, self.seen[s])) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-02-26T14:25:39.150

从 pkm 评论（[链接](http://www.crimulus.com/2013/09/19/reading-compound-file-binary-format-files-generated-by-phpexcel-with-pythondjango-xlrd/)）中，问题出在复合文件二进制文件上

```
#pip install OleFileIO-PL
import OleFileIO_PL
import pandas as pd

path = 'file.xls'
with open(path,'rb') as file:
    ole = OleFileIO_PL.OleFileIO(file)
    if ole.exists('Workbook'):
        d = ole.openstream('Workbook')
        x=pd.read_excel(d,engine='xlrd')
        print(x.head()) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-12-11T16:13:17.907

**`Workbook corruption: seen[2] == 4`[对于阅读XLS文件时遇到问题的熊猫用户]**

**注意：** xlrd 不再支持`xls`文件以外的任何内容，请参阅[此答案](https://stackoverflow.com/a/65266270/216229)以获取详细信息和替代方案。

1.  使用`xlrd`2.0.0 或更高版本：[https](https://pypi.org/project/xlrd/) ://pypi.org/project/xlrd/ 。

2.  `__init__.py`在自动加载的文件之一中添加您自己的熊猫 XLS 引擎

```
from pandas.io.excel._xlrd import XlrdReader

class CustomXlrdReader(XlrdReader):

    def load_workbook(self, filepath_or_buffer):
        """Same as original, just uses ignore_workbook_corruption=True)"""
        from xlrd import open_workbook

        if hasattr(filepath_or_buffer, "read"):
            data = filepath_or_buffer.read()
            return open_workbook(file_contents=data, ignore_workbook_corruption=True)
        else:
            return open_workbook(filepath_or_buffer)

ExcelFile._engines['custom_xlrd'] = CustomXlrdReader
print('Monkey patching pandas XLS engines. See CustomXlrdReader') 
```

要使用它，`engine='custom_xlrd'`请在读取 XLS 文件时指定

```
df = pd.read_excel(filepath, engine='custom_xlrd') 
```

这`xlrd`是测试的损坏文件：

[https://github.com/python-excel/xlrd/blob/master/tests/samples/corrupted_error.xls](https://github.com/python-excel/xlrd/blob/master/tests/samples/corrupted_error.xls)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-04-21T11:38:57.553

受此[答案](https://stackoverflow.com/a/65254855)的启发，但更直截了当：

pd.read_excel 接受 xlrd.Book 对象，所以你可以这样做：

```
workbook = xlrd.open_workbook('file_name.xls', ignore_workbook_corruption=True)
excel = pd.read_excel(workbook) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-15T09:05:15.810

我的一个 .xls 文件出现了同样的错误（excel 可以很好地打开它们）。问题位于**xlrd** `compdoc.py`。我猜`Compdoc.seen`数组会跟踪已经读取的“FAT”扇区。在我的情况下，根条目读取块 (SSCS) 将所有扇区标记为已看到，从而导致将来引发异常。您可以尝试在读取逻辑的扇区中找到错误并为 xlrd 做出贡献:) 或者只是用异常 raise 评论这一行，这可能会解决您的问题（就像我的一样）并等待 xlrd 更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T18:41:36.427

也许作为最后的手段，您可以尝试将 .xls 文件保存为 .csv 文件，然后尝试阅读它。

显然你说你可以在从 Excel 中打开和关闭后打开它，所以这是同样的努力。

如果您真的希望您的脚本打开它们，那么如果您在 Windows 平台上，请使用[pywin32](http://sourceforge.net/projects/pywin32/)从您的脚本中打开和关闭 Excel，并同时打开和关闭文件。也许这可以工作。（愚蠢但可以解决）

例子（[从这里偷来的](https://stackoverflow.com/questions/247724/how-can-i-launch-an-instance-of-an-application-using-python)）

```
from win32com.client import Dispatch
xl = Dispatch('Excel.Application')
wb = xl.Workbooks.Open('C:\\Documents and Settings\\GradeBook.xls') 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-10-26T07:39:13.850

testfile.xls -----> 另存为 ---> 格式 97-2003 --->testfile2.xlc

文件名 = '/home/shared/testfile2.xls'

好的

# node.js - 如何配置 WebStorm / PhpStorm 项目以便 JS 代码智能适用于 Node.js 项目？

> ID：12705538
> 
> 赞同：25
> 
> 时间：2012-10-03T09:27:25.800
> 
> 标签：node.js, intellij-idea, phpstorm, webstorm

在 WebStorm / PhpStorm / IDEA 中，内置了相当多的 JavaScript 代码智能功能。但是，在开发 Node.js 应用程序时，包括从`node_modules`“导航到文件”之类的复杂问题（我不想要例如，IDE 可以`package.json`从文件夹中为我提供数十个 s `node_modules`）。但是完全排除`node_modules`文件夹有其自身的问题——没有代码完成等。

那么在 WebStorm 中处理这个问题的“正确”方法是什么？我应该只包括其中的一些文件`node_modules`吗？还是从那里排除所有内容并以某种方式使用项目或全局库的概念？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-01T22:32:14.923

要在 UI 中执行此操作（从 PyCharm 2.7.3 测试，结果显示在 PhpStorm 6.0.3 中）：

**添加 JavaScript 库**

![添加 JavaScript 库](../Images/686b1912eeeecf25f1c1794e7804f5f9.png)

文件 → 设置
（项目设置） → JavaScript → 库

[添加...] →

*名称*：`node_modules`
*可见性*：[x] 当前项目
[附加...]
{选择项目的*node_modules*文件夹}

{重复*凉亭*}

**从项目中排除文件夹**
![从项目中排除文件夹](../Images/c6b69ba1f2b5d1df9b5c72d4705a5b45.png)

（项目设置）→项目结构
文件夹右键→【排除】

**要从项目的 .iml 文件中执行此操作：**
将项目更改`.iml`为以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<module type="WEB_MODULE" version="4">
  <component name="NewModuleRootManager" inherit-compiler-output="true">
    <exclude-output />
    <content url="file://$MODULE_DIR$">
      <excludeFolder url="file://$MODULE_DIR$/bower_components" />
      <excludeFolder url="file://$MODULE_DIR$/node_modules" />
    </content>
    <orderEntry type="inheritedJdk" />
    <orderEntry type="sourceFolder" forTests="false" />
    <orderEntry type="library" name="node_modules" level="application" />
    <orderEntry type="library" name="bower_components" level="application" />
  </component>
</module> 
```

导致编辑器排除 node_modules 和 bower_components，但使它们可用于完成和库搜索

在 PyCharm、IntelliJ 和 WebStorm 中测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-05T21:13:57.493

这已在 WebStorm 7 中修复，请参阅[http://youtrack.jetbrains.com/issue/WEB-1927](http://youtrack.jetbrains.com/issue/WEB-1927)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T13:51:10.520

不幸的是，没有简单的“正确”方法。您可以排除位于顶级 node_modules 目录内的所有 node_modules 目录。它将使完成更好，但并不理想。
进一步的讨论在这里：[http](http://devnet.jetbrains.net/message/5468926) ://devnet.jetbrains.net/message/5468926 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T14:17:57.223

您可以下载用于 Node.js 集成的插件：[http ://plugins.intellij.net/plugin/?webide&pluginId=6098](http://plugins.intellij.net/plugin/?webide&pluginId=6098)

# php - 完成2输入html json后的动态列表

> ID：12705539
> 
> 赞同：2
> 
> 时间：2012-10-03T09:27:27.293
> 
> 标签：php, jquery, html, json

对于项目车辆，我想在输入我想做的书的开头和结尾后检索可用的汽车列表。

这是发送和接收汽车列表的表单和脚本部分。

```
<form method="POST" name="reserv">
            <label for="dte_debut" class="col_3">Date début :</label>
            <input  id="dte_debut" name="dte_debut" class="col_9" type="text" />

            <label for="dte_fin" class="col_3">Date de fin :</label>
            <input  id="dte_fin" name="dte_fin" class="col_9" type="text" />

            <select name="listeVoiture" id="listeVoitureId" disabled="true"></select>

            <textarea id="resJson"></textarea>
        </form>
        <script type="text/javascript">
            $(document).ready(function(){
                //Recuperation des dates debut et fin des inputs
                var debut = $("#dte_debut").attr('value');
                var fin = $("#dte_fin").attr('value');

                        $.post("processeur.php",
                        { leDebut: debut, laFin: fin },
                        function(data)
                        {
                            var options = "";
                            if (data != null) 
                            {                                        
                                for (var i = 0; i < data.length; i++)
                                {
                                    options += '<option value="' + data[i].value + '">' + data[i].label + '</option>';                                
                                }
                            }
                            //envoyer le resultat dans le select
                            $("#listeVoitureId").html(options);
                            $("#resJson").attr("value", options);

                            //si le resultat n'est pas vide
                            //activer le select
                            if (options != "") 
                            {
                                $("#listeVoitureId").attr("disabled", false);
                            }
                        },"json");

            });                                
        </script> 
```

这是我的 processeur.php 处理查询并返回结果

```
 <?php 
      include("../fonctions/mysql.php");        
      connexion();      
      $leDebut = $_GET['leDebut'];  
      $laFin = $_GET['laFin'];

     $query = "SELECT id , plaque FROM voiture WHERE id NOT IN 
(SELECT voiture.id FROM voiture INNER JOIN reservation 
ON voiture.id = reservation.fk_voiture      
WHERE ((debut BETWEEN '$leDebut' AND '$laFin') AND (fin BETWEEN '$leDebut' AND '$laFin')) OR (debut < '$leDebut' AND fin BETWEEN '$leDebut' AND '$laFin') 
OR (debut BETWEEN '$leDebut' AND '$laFin' AND fin > '$laFin') 
OR (debut < '$leDebut' AND fin > '$laFin')) ";

        $data = mysql_query($query);    
        $result = array();      
        while($ligne = mysql_fetch_array($data))    
          {         
            $result[] = array("value" => $ligne['id'] , "label" => $ligne['plaque']) ;
          }

        echo json_encode($result);   
?> 
```

感谢您帮助我，我从 jquery 和 json 开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:22:39.920

首先修复从输入字段中检索值的方式：

```
var debut = $("#dte_debut").val();
var fin = $("#dte_fin").val(); 
```

然后在您的 php 文件中以正确的方式请求它，因为它是 POST 而不是 GET 方法：

```
$leDebut = $_POST['leDebut'];  
$laFin = $_POST['laFin']; 
```

如果您想遍历收到的数据并将其附加到选择框，我会使用：

```
for (var key in data){
      var option = $('<option />').val(data[key].value).html(data[key].label);
      $('#listeVoitureId').append(option);
} 
```

# ruby-on-rails - Ruby on Rails：参数为零。nil:NilClass 的未定义方法“[]”

> ID：12705545
> 
> 赞同：2
> 
> 时间：2012-10-03T09:27:40.677
> 
> 标签：ruby-on-rails, ruby, methods, params, null

尝试访问我创建的搜索页面时出现错误。问题似乎是我试图在没有空白的情况下删除空白。我的搜索功能有效，但是当 technols 为 nil 时，我无法处理这种情况。

这是我的错误：

```
NoMethodError in ProjectsController#search

undefined method `[]' for nil:NilClass 
```

在我的项目控制器中，第 26 行：

```
tech_ids = params["technols"]["id"].reject(&:blank?). 
```

这是我的搜索操作：

```
def search
  tech_ids = params["technols"]["id"].reject(&:blank?)

  @search = params[:client], params[:industry], params[:role], tech_ids, params[:business_div], params[:project_owner],  params[:status], params[:start_date_dd], params[:start_date_A], params[:start_date_B],  params[:keywords]

  @project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

  @search_performed = !@search.reject! { |c| c.blank? }.empty? 
  @project = Project.new(params[:project])
  @all_technols = Technol.all
  @project_technol = @project.projecttechnols.build

  respond_to do |format|
    format.html # search.html.erb
    format.json { render :json => @project }
  end
end 
```

这是我的项目模型：

```
class Project < ActiveRecord::Base
  attr_accessible  :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

  validates_presence_of :business_div, :client, :customer_benifits, :end_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary#, :tech

  has_many :projecttechnols
  has_many :technols, :through => :projecttechnols

  def self.like(text); "%#{text}%"; end

  def self.search(search_client, search_industry, search_role, search_techs_ids, search_business_div, search_project_owner, search_status, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords)
    # start with a scoped query, to apply more scopes on it afterwards
    _projects = Project.scoped 
    # then, for each of the parameters, apply the scope only if present
    if search_client.present?
      _projects = _projects.where ['client LIKE ?', like(search_client)] 
    end

    if search_industry.present?
      projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end

    if search_role.present?
      _projects = _projects.where ['role LIKE ?', like(search_role)]
    end

    if search_techs_ids.present?
      _projects = _projects.joins(:technols).where("technols.id" => search_techs_ids)
    end

    if search_business_div.present?
      _projects = _projects.where ['business_div LIKE ?', like(search_business_div)]
    end 

    if search_project_owner.present?
      _projects = _projects.where ['project_owner LIKE ?', like(search_project_owner)]
    end

    if search_exception_pm.present?
      _projects = _projects.where ['exception_pm LIKE ?', like(search_exception_pm)]
    end

    if search_status.present?
      _projects = _projects.where ['status LIKE ?', like(search_status)]
    end

    todays_date = DateTime.now.to_date

    if !search_start_date_A.blank? or !search_start_date_B.blank?
      search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
      search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
      todays_date = nil
      search_start_date_dd = nil
    end

    if search_start_date_dd.blank?
      todays_date = nil
    end

    if search_start_date_A.present? or search_start_date_B.present?
      _projects = _projects.where [' DATE(start_date) BETWEEN ? AND ?', search_start_date_A, search_start_date_B]
    end

    if search_start_date_dd.present?
      _projects = _projects.where ['DATE(start_date) BETWEEN ? AND ?', search_start_date_dd, todays_date]
    end

    if search_keywords.present?
      _projects = _projects.where ['keywords LIKE ?', like(search_keywords)]
    end

    _projects
  end

  def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end
end 
```

我已经尝试在导致问题的行周围包裹一个 if 语句，但似乎仍然无法修复它。

```
if !params[:technols][:id] = []
tech_ids = params[:technols][:id].reject(&:blank?)
end 
```

我是 Rails 的新手，所以任何解决我的问题的帮助都将不胜感激。提前致谢。

堆栈跟踪：

```
app/controllers/projects_controller.rb:26:in `search'
actionpack (3.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.6) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.6) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.6) lib/active_support/callbacks.rb:425:in `_run__464544557__process_action__932090261__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.6) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.6) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.6) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/params_wrapper.rb:206:in `process_action'
activerecord (3.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.6) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.6) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.6) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.6) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.6) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:600:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.6) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `_run__67848467__call__896299115__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.6) lib/rails/engine.rb:479:in `call'
railties (3.2.6) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.6) lib/rails/rack/log_tailer.rb:17:in `call'
thin (1.5.0) lib/thin/connection.rb:81:in `block in pre_process'
thin (1.5.0) lib/thin/connection.rb:79:in `catch'
thin (1.5.0) lib/thin/connection.rb:79:in `pre_process'
thin (1.5.0) lib/thin/connection.rb:54:in `process'
thin (1.5.0) lib/thin/connection.rb:39:in `receive_data'
eventmachine (1.0.0) lib/eventmachine.rb:187:in `run_machine'
eventmachine (1.0.0) lib/eventmachine.rb:187:in `run'
thin (1.5.0) lib/thin/backends/base.rb:63:in `start'
thin (1.5.0) lib/thin/server.rb:159:in `start'
rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
rack (1.4.1) lib/rack/server.rb:265:in `start'
railties (3.2.6) lib/rails/commands/server.rb:70:in `start'
railties (3.2.6) lib/rails/commands.rb:55:in `block in <top (required)>'
railties (3.2.6) lib/rails/commands.rb:50:in `tap'
railties (3.2.6) lib/rails/commands.rb:50:in `<top (required)>'
script/rails:6:in `require'
script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T09:32:30.477

你的问题是 params[:technols] 是 nil 并且你试图从 nil 对象中检索 id 键的值。你需要改为 -

```
tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil? 
```

# html - 样式 ul 与宽度以容纳项目

> ID：12705547
> 
> 赞同：0
> 
> 时间：2012-10-03T09:27:43.800
> 
> 标签：html, css, jquery-ui, html-lists, jquery-ui-autocomplete

抱歉，我在 SO 上找不到类似的答案。我有以下标记（由 jquery ui 自动完成生成，但这不是这里的问题）

```
<ul style="z-index: 1; display: block; border: thin solid red; width: 200px;">
<li>
<a>
  <div style="font-size: 0.85em;">
    <span style="float: right; padding-left: 10px; color: gray;">
      United Kingdom
    </span>
    <span style="">text text text text text</span>
  </div>
</a>
</li>
</ul> 
```

正如您在这个小提琴中看到的那样：http: [//jsfiddle.net/fVr8P/2/](http://jsfiddle.net/fVr8P/2/)文本换行是因为宽度有限并且国家范围是“浮动的”。我想要的是扩大宽度以适应全长，但如果我把`width: auto;`它扩大到 100%。

**背景**

ul 当然来自 jquery ui 自动完成。我使用 autocomplete.html 扩展名对结果进行了一些样式设置。问题是在 Firefox 和 chrome 中一切正常，因为自动完成在创建时设置为正确的宽度。在 IE 中不会发生这种情况（宽度太小），因此文本会换行。我希望找到一个简单的纯 css 解决方案，而无需在 jQuery 中摆弄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:57:55.077

试试这个：

```
<ul style="z-index: 1; border: thin solid red; list-style: none outside none; float: left;"> 
```

并用这个替换你的跨度样式：

```
<span style="float: left;">text text text text text</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:29:17.763

添加`width:auto; display:inline-block`

演示[http://jsfiddle.net/fVr8P/4/](http://jsfiddle.net/fVr8P/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:35:41.403

替换`display: block`为`display: inline-block`和`width: 200px`，`width: auto`这应该可以解决问题。

# sharepoint-2010 - 如何限制共享点列表中的行数？

> ID：12705548
> 
> 赞同：0
> 
> 时间：2012-10-03T09:27:44.620
> 
> 标签：sharepoint-2010

假设我们有一个 SharePoint 列表，并且我们希望将最大行数限制为 10，并且当用户达到该限制时，我们应该在 UI 中通知他/她。我正在使用 SharePoint 2010，并且我知道可以为列表编写事件接收器，但是无法访问 UI 来显示通知，我可能应该编写自定义操作来添加项目并创建用户控制收集详细信息，但是是否可以删除列表视图下的添加项目链接，这真的是最好的方法吗？

非常感谢您分享您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:17:26.147

一种可能的方法是编辑该列表的 newitem 表单，以便插入一个自定义服务器控件，该控件检查用户已提交的记录数。

如果记录数等于 10，则不允许提交。您可以通过多种方式做到这一点。其中之一是隐藏 dataformwebpart 内的所有控件，包括保存按钮，但带有用户消息的面板除外。

在此处查看如何在 DataFormWebPart 中插入自定义控件：

[http://www.chaholl.com/archive/2010/01/26/extending-the-dataform-web-part-to-allow-custom-field-controls.aspx](http://www.chaholl.com/archive/2010/01/26/extending-the-dataform-web-part-to-allow-custom-field-controls.aspx)

我仍然会用一个抛出异常的事件处理程序来补充它，以防万一用户可以绕过您的实现（使用客户端代码来防止提交出现在脑海中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T14:07:52.450

这里给出了一个可能的解决方案：[kalmstrom.com/Tips/SharePointListItemsLimit.htm](http://kalmstrom.com/Tips/SharePointListItemsLimit.htm)

基本上，您首先使用允许的最大项目数填写列表，然后对项目强制执行验证，例如，不允许它们的创建日期比您执行此操作的日期新。

# java - Java GregorianCalendar 轻量级

> ID：12705550
> 
> 赞同：2
> 
> 时间：2012-10-03T09:27:55.737
> 
> 标签：java, gregorian-calendar

是`java.util.GregorianCalendar`轻量级的对象吗？换句话说，是否在每个请求的 Web 应用程序设置中调用构造函数只会带来微不足道的性能损失，或者缓存对象的副本以供应用程序共享使用是否值得？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:32:17.160

`TimeZone`您可以通过缓存/共享不可变的and来提高 GregoianCalendar 的性能`Locale`。

> java GregorianCalendar 是轻量级对象吗？

如果你的意思是轻量级；就像一个由混凝土制成的气球。;)

> 是否在每个请求的 Web 应用程序设置中调用构造函数只会带来微不足道的性能损失

与您正在做的其他事情相比，它可能相对微不足道。在您对应用程序进行 cpu 配置文件之前，您无法知道。

> 缓存对象的副本以供应用程序共享使用是否值得

仅当您将对象视为不可变时（这可能不是很有用）

使用共享的可变 GregorianCalendar 可能会引入比运行缓慢更糟糕的错误。

顺便说一句：我会考虑使用 JodaTime。它稍微快一点，但通常更好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:31:27.497

使用[JODA 日期时间](http://joda-time.sourceforge.net/)。它也在 java 8 中添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-06T02:23:19.947

# java - 如何搜索字符串模式？

> ID：12705556
> 
> 赞同：0
> 
> 时间：2012-10-03T09:28:11.133
> 
> 标签：java, string, pattern-matching

我只想知道如何使用 Java 在段落中找到特定的字符串模式。
我要搜索的字符串是：**AB0002340001**。字符串模式可以是：
两个字母（可以是任何字母）+10 个数字（可以是任何数字组合）。
请帮忙。
提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:30:38.853

使用[正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

在那里，您可以使用特殊组指定模式。例如“两个字符 + 10 位数字”是：

```
Pattern p = Pattern.compile("(\\w{2}\\d{10})");
Matcher matcher = p.matcher(inputString);
while (matcher.find()) {
   System.out.println(matcher.group());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:31:18.667

首先创建模式：

`Pattern pattern = Pattern.compile("\\w{2}\\d{10}");`

现在您可以找到此模式，如下所示：

`pattern.matcher(str).find()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:31:26.093

使用正则表达式请参阅此[链接](http://www.tutorialspoint.com/java/java_regular_expressions.htm)以了解如何在 java 中使用正则表达式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-06T05:14:28.123

在这种情况下，您将需要使用`lookingAt()`方法而不是`matches()`方法。

# facebook - FOSFacebookBundle 重定向问题

> ID：12705558
> 
> 赞同：2
> 
> 时间：2012-10-03T09:28:26.290
> 
> 标签：facebook, symfony, fosuserbundle, fosfacebookbundle

我在使用 FOSFacebookBundle 和 FOSUserBundle 在我的网站上通过 Facebook 订阅时遇到了一些麻烦...

有我的代码：

**base.html.twig**：

```
<html xmlns:fb="http://www.facebook.com/2008/fbml">

<!-- TEMPLATE STUFF -->

function goLogIn(){
    alert('enter goLogin function');
    window.location = "{{ path('_security_check') }}";
}

function onFbInit() {
    alert('enter onFbInit');
    if (typeof(FB) != 'undefined' && FB != null ) {
        FB.Event.subscribe('auth.statusChange', function(response) {
            alert('Status Changed');
            if (response.session || response.authResponse) {
                setTimeout(goLogIn, 500);
            } else {
                window.location = "{{ path('_security_logout') }}";
            }
        });
    }
}
{{ facebook_initialize({'xfbml': true, 'fbAsyncInit': 'onFbInit();'}) }} 
```

**配置.yml**

```
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: Modnar\Bundle\UserBundle\Entity\User

fos_facebook:
    file:   %kernel.root_dir%/../vendor/facebook/src/base_facebook.php
    alias:  facebook
    app_id: APP_ID                    // I put my own APP_ID here
    secret: APP_SECRET                // I put my own APP_SECRET here
    cookie: true
    permissions: [email, user_birthday, user_location]

services:
    my.facebook.user:
        class: Modnar\Bundle\UserBundle\Security\User\Provider\FacebookProvider
        arguments:
            facebook: "@fos_facebook.api"
            userManager: "@fos_user.user_manager"
            validator: "@validator"
            container: "@service_container" 
```

**安全.yml**

```
# app/config/security.yml
security:
    factories:
          - "%kernel.root_dir%/../vendor/bundles/FOS/FacebookBundle/Resources/config/security_factories.xml"

    providers:
        fos_userbundle:
            id: fos_user.user_manager
        my_fos_facebook_provider:
            id: my.facebook.user

    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    firewalls:
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
                csrf_provider: form.csrf_provider
            fos_facebook:
                app_url: "http://apps.facebook.com/APP_NAME/" // I put my own APP_NAME here
                server_url: "http://APP_URL/"                 // I put my own APP_URL here
                login_path: /login
                check_path: /login_fb_check
                default_target_path: /
                provider: my_fos_facebook_provider
            logout:
                handlers: ["fos_facebook.logout_handler"]
            anonymous:    true

    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, role: ROLE_ADMIN }

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

**路由.yml**

```
_security_check:
    pattern:  /login_fb_check
_security_logout:
    pattern:  /logout 
```

此时，Facebook 图标在我的 /login 页面上，我可以连接到 Facebook，但我不会重定向到任何地方。我在 js 上放了一些警报以获取跟踪，并且只显示一个警报：“输入 onFbInit”。也许我在某个地方错过了一步，但我没有找到。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T06:04:42.447

我通过在打开标签后直接放置 facebook 的 javascript 代码解决了这个问题。

看看文档是怎么说的：

> 请注意，我们需要在 Facebook Javascript SDK Initialization 初始化之前包含此代码，以便正确触发 onFbInit() 事件侦听器（在这种情况下，在“body”标签的开头和此包提供的模板帮助程序之间)
> 
> 我们在重定向之前等待 500 毫秒，让浏览器处理 Facebook cookie。您可以避免此步骤，但您可能会收到以下错误消息：“无法从会话中检索 Facebook 用户。”

# ios - 在 iOS 6 中，检查一个人是否登录到社交网络？

> ID：12705559
> 
> 赞同：4
> 
> 时间：2012-10-03T09:28:37.137
> 
> 标签：ios, facebook, ios6, social-framework

有没有办法检查用户是否真的在操作系统中登录了 facebook 或 twitter。

我想这样做的原因是为了在应用程序中共享，例如使用 facebooks SDK 代替共享，而不要求用户再次登录。

我实际上认为代码：

```
[SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]; 
```

确实做到了，但显然它仅在用户未登录时才显示警报。

这只发生在用户没有安装 Facebook 应用程序，没有登录操作系统（在设置中），而是通过 Facebook SDK 登录到我们的应用程序时。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T17:35:04.987

你在设备上对我有用的东西：

```
if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {// do something only for logged in fb users} else {//do something else for non-fb users} 
```

您是在设备上还是模拟器上尝试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T17:25:07.883

不幸的是，您无法检查用户是否正确登录。facebook 密码可能不正确，方法 ( **isAvailableForServiceType** ) 返回 true

# cmake - 将 cmake 与 fortran 一起使用

> ID：12705562
> 
> 赞同：7
> 
> 时间：2012-10-03T09:28:41.290
> 
> 标签：cmake, fortran

与 cmake 声称的一样好，它的文档似乎还有很多不足之处（除非我完全无法理解基础知识）。

我正在尝试为一组 fortran 程序编写一个 cmake 文件，这些程序也依赖于其他一些库（这些库已经为我的系统编译，但我也想为这些库创建一个 cmake 文件）。

我在网上示例中找到的许多命令都没有出现在官方文档中，这有点令人不安。例如，[http:](http://www.vtk.org/Wiki/CMakeForFortranExample) //www.vtk.org/Wiki/CMakeFortranExample包含该行

```
get_filename_component (Fortran_COMPILER_NAME ${CMAKE_Fortran_COMPILER} NAME) 
```

然而，当我将它包含在我自己的 CMakeLists.txt 中时，我得到了一个错误

```
Missing variable is:
CMAKE_fortran_COMPILER 
```

我错过了什么？！

**编辑：当前 CMakeLists.txt**

```
cmake_minimum_required(VERSION 2.6)

enable_language(fortran)
project(fortranTest)
get_filename_component (Fortran_COMPILER_NAME ${CMAKE_Fortran_COMPILER} NAME) 
```

**编辑 2**

我还没有弄清楚如何包含依赖库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T09:45:44.230

语言名称区分大小写。如发布的那样，我得到：

```
~/cmt> cmake ./
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_fortran_COMPILER_ENV_VAR
CMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.
Missing variable is:
CMAKE_fortran_COMPILER
CMake Error: Could not find cmake module file:/home/tgallagher/cmt/CMakeFiles/CMakefortranCompiler.cmake
CMake Error: Could not find cmake module file:CMakefortranInformation.cmake
CMake Error: CMAKE_fortran_COMPILER not set, after EnableLanguage
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
^C 
```

但是，通过将文件更改为（注意它是`Fortran`而不是`fortran`在`enable_language()`：

```
cmake_minimum_required(VERSION 2.6)

enable_language(Fortran)
project(fortranTest)
get_filename_component (Fortran_COMPILER_NAME ${CMAKE_Fortran_COMPILER} NAME) 
```

你得到：

```
~/cmt> cmake ./
-- The Fortran compiler identification is GNU
-- Check for working Fortran compiler: /usr/bin/gfortran
-- Check for working Fortran compiler: /usr/bin/gfortran  -- works
-- Detecting Fortran compiler ABI info
-- Detecting Fortran compiler ABI info - done
-- Checking whether /usr/bin/gfortran supports Fortran 90
-- Checking whether /usr/bin/gfortran supports Fortran 90 -- yes
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
-- Check for working C compiler: /usr/bin/gcc
^C 
```

如果允许完成，它将按预期工作。但是，为了确定编译器标志，有更好的方法来识别编译器。引用示例中使用的方法仅适用于未包装编译器的系统，这意味着不通过 Cray 之类的方法`mpif90`或`ftn`在 Cray 上调用编译器的系统。更好的方法是检查：

```
if(${CMAKE_Fortran_COMPILER_ID} STREQUAL "Intel")
...
endif() 
```

通过检查 CMake 模块目录中的文件可以找到可能的名称列表`Modules/CMakeFortranCompilerId.F.in`

# android - 如何让Android Andengine游戏向后兼容低端设备（低分辨率）

> ID：12705564
> 
> 赞同：0
> 
> 时间：2012-10-03T09:28:55.687
> 
> 标签：android, andengine

我正在使用 Android Andengine 开发游戏。我正在使用相机宽度 720 和相机高度 480 但对于像 360 x 480 这样的低端设备，我使用的所有图像都被压缩。代码是

```
public Engine onLoadEngine() {
    mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    return new Engine(new EngineOptions(true, ScreenOrientation.LANDSCAPE, 
            new FillResolutionPolicy(), mCamera).setNeedsSound(true));
} 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:42:30.970

在 onCreateEngineOptions() 中，您应该指定 RatioResolutionPolicy。这会将您的活动扩展到所需的大小。您可以通过以下方法获取当前屏幕尺寸：

```
private DisplayMetrics getScreenResolutionRatio() {
    DisplayMetrics dm = new DisplayMetrics();
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindowManager().getDefaultDisplay().getMetrics(dm);
    return dm;
} 
```

然后指定您的 RatioResolutionPolicy：

```
public EngineOptions onCreateEngineOptions() {
    RatioResolutionPolicy policy = new RatioResolutionPolicy(getScreenResolutionRatio().width, getScreenResolutionRatio().height);
    return new EngineOptions(true, ScreenOrientation.PORTRAIT_SENSOR, policy, this.mCamera);
} 
```

# c - 如何在 Linux Kernel 中创建一个全局可访问的结构

> ID：12705565
> 
> 赞同：1
> 
> 时间：2012-10-03T09:28:56.637
> 
> 标签：c, linux, linux-kernel

我想向 Linux 内核添加一个新功能。为了实现它，我需要添加一个可以通过名称从内核的其他部分访问的结构。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:59:18.063

在 module.h 中定义你的结构将导致编译内核中的所有模块。最好在本地目录中选择一个头文件，或者在本地目录中创建一个定义您的结构的新头文件。既然你说你的组件将成为内核的一部分，所以在 ac 文件中声明结构变量并在任何你想要的地方使用它与 extern 修饰符。这将不需要导出 sysmbol。它将如下所示：

```
kernel/test.h:  
struct test {
     char name[10][20];
};

kernel/workqueue.c:
struct test *test_list;
some_fun()
{
      test_list = kmalloc(sizeof(struct test) * 2, GFP_KERNEL);
}

kernel/softirq.c:
extern struct test *test_list;
printk(KERN_INFO "%s\n", test_list[0].name[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:33:20.633

用于`EXPORT_SYMBOL`导出您的结构变量。它将在整个内核代码和模块中看到

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T20:19:26.850

我不是内核专家，但我建议避免使用全局可见的符号，并提供基于函数的 API（可能带有一些内联函数，对于那些对性能至关重要的少数人）。

我建议只定义一组函数。另外，我不确定提供全局数据是一个好主意——它们可能是同步问题，尤其是在多核机器上[当今大多数系统至少有 2 个内核]。所以你最好定义一组函数接口，把它们记录好（至少有好的注释），并避免使用全局数据。

我还建议从内核的某些部分（或子系统）中汲取灵感，这可能与您想要实现的目标相似。我还建议从内核社区获得建议，即使在设计阶段的早期，你的工作（特别是，在你的代码工作之前就公开你的代码，以启用评论）。

祝你好运。很高兴了解您打算实现什么样的子系统或功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:59:17.883

我不确定我是否理解你的问题。据我了解，

您正在尝试定义一个新的用户定义结构并希望在必要的地方使用它们。并寻找一个共同的地方来定义它。对？？

所有内核模块都应该包括`linux/module.h`. 您可以在此处添加您的结构。我希望这可以在所有模块中访问。

# android - 为什么 getView 方法会给出 nullpointer 异常？

> ID：12705566
> 
> 赞同：0
> 
> 时间：2012-10-03T09:29:02.670
> 
> 标签：android

我正在制作一个列表视图，它有两个部分，两个部分都有不同的 xml，但我的 getView 方法不起作用，给出以下异常：-

```
10-03 14:34:29.421: E/AndroidRuntime(11029): FATAL EXCEPTION: main
10-03 14:34:29.421: E/AndroidRuntime(11029): java.lang.NullPointerException
10-03 14:34:29.421: E/AndroidRuntime(11029):    at    android.widget.AbsListView.obtainView(AbsListView.java:1594)
 10-03 14:34:29.421: E/AndroidRuntime(11029):   at an droid.widget.ListView.makeAndAddView(ListView.java:1782)
 10-03 14:34:29.421: E/AndroidRuntime(11029):   at android.widget.ListView.fillDown(ListView.java:705)
10-03 14:34:29.421: E/AndroidRuntime(11029):    at android.widget.ListView.fillFromTop(ListView.java:762)
 10-03 14:34:29.421: E/AndroidRuntime(11029):   at android.widget.ListView.layoutChildren(ListView.java:1619)
 10-03 14:34:29.421: E/AndroidRuntime(11029):   at android.widget.AbsListView.onLayout(AbsListView.java:1422)
 10-03 14:34:29.421: E/AndroidRuntime(11029):   at android.view.View.layout(View.java:7175)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.view.View.layout(View.java:7175)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.view.View.layout(View.java:7175)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.view.View.layout(View.java:7175)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.view.View.layout(View.java:7175)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.view.View.layout(View.java:7175)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.view.View.layout(View.java:7175)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.view.View.layout(View.java:7175)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at andr oid.widget.FrameLayout.onLayout(FrameLayout.java:338)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.view.View.layout(View.java:7175)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.view.View.layout(View.java:7175)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1146)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at  android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.os.Handler.dispatchMessage(Handler.java:99)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at android.os.Looper.loop(Looper.java:130)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at android.app.ActivityThread.main(ActivityThread.java:3687)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at java.lang.reflect.Method.invokeNative(Native Method)
   10-03 14:34:29.421: E/AndroidRuntime(11029):     at java.lang.reflect.Method.invoke(Method.java:507)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
  10-03 14:34:29.421: E/AndroidRuntime(11029):  at dalvik.system.NativeStart.main(Native Method) 
```

我正在使用此代码：-

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    ViewHolder holder = null;
    if(issection)
    {
        issection=false;
        convertView=null;   
    }

    if (convertView == null) {

        final MyJobListModle objitem = data.get(position);

        if (objitem != null && objitem.getIssection()!=null && !objitem.getIssection().equals("")) {

            if (objitem.getIssection().equalsIgnoreCase("true")) {

                convertView = objinflater.inflate(R.layout.listviewsection,
                        null);
                holder = new ViewHolder();
                issection=true;
                convertView.setOnClickListener(null);
                convertView.setOnLongClickListener(null);
                convertView.setLongClickable(false);

                final TextView sectionView = (TextView) convertView
                        .findViewById(R.id.txtsection);
                sectionView.setText(objitem.getHeader_title());
            }

        }
        else
        {
        convertView = objinflater.inflate(R.layout.postjobrow, null);
        holder = new ViewHolder();

        holder.objjobname = (TextView) convertView.findViewById(R.id.textjob);
        holder.objbidalerts = (TextView) convertView
                .findViewById(R.id.textalert);
        holder.objclick =(RelativeLayout)convertView.findViewById(R.id.textalertclick);
        holder.bidalerttext=(TextView)convertView.findViewById(R.id.alerttext);
        holder.objarrowimageView = (ImageView) convertView
                .findViewById(R.id.imagearrow);
        convertView.setTag(holder);

    }
    }else {

        holder = (ViewHolder) convertView.getTag();
    }

    /*----  Handle click on listview item   ----*/
    if(holder!= null && holder.objarrowimageView!=null)
    {
    holder.objarrowimageView.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            String jobcode = data.get(position).getId();
            Bundle objbundle = new Bundle();
            Intent objintent = new Intent(objactivity,EditPostJobSection.class);
            objbundle.putString("jobid",jobcode);
            objbundle.putString("from","myjobadapter");
            objbundle.putString("createdAt",data.get(position).getCreated());
            objintent.putExtras(objbundle);
            objactivity.startActivity(objintent);
        }
    });
    }
    if(holder!= null && holder.objclick!=null)
    {
    holder.objclick.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            String bidcount = data.get(position).getBid_count();
            if(!bidcount.equals("0"))
            {
                System.out.println("ok");
                ArrayList<JobBidAlertModle> objjobbidalertlist = data.get(position).getObjbidalertmodlelist();  
                Bundle objbunlde = new Bundle();
                Intent objintent = new Intent(objactivity,MyJobBidAlerts.class);
                objbunlde.putSerializable("objbidalertlist", objjobbidalertlist);
                if(data!=null && data.size()>position)
                {
                    objbunlde.putString("title",data.get(position).getTitle()); 
                }
                objbunlde.putString("createdAt",data.get(position).getCreated());
                objbunlde.putString("from","myjobadapter");
                if(data!=null && data.size()!=0)
                    {
                    objbunlde.putString("lat",data.get(position).getLocationlat());
                    objbunlde.putString("longi",data.get(position).getLocationlongi());
                    }
                objintent.putExtras(objbunlde);
                objactivity.startActivity(objintent);
            }
            if(bidcount.equals("0"))
            {

            }

        }
    });

    }

    if(holder!= null && holder.objjobname!=null && holder.objbidalerts!=null )
    {
    holder.objjobname.setText(data.get(position).getTitle());
    String bidcount = data.get(position).getBid_count();
    if(bidcount.equals("0"))
    {
        holder.objbidalerts.setVisibility(View.INVISIBLE);
    }
    else
    {
        holder.objbidalerts.setVisibility(View.VISIBLE);
        holder.objbidalerts.setText(bidcount);  
    }
    }

    return convertView;
} 
```

当我执行空指针时，我无法解决确切的问题。请任何人建议我。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:32:09.313

您可能没有在文件中定义`TextView`id 。`R.id.txtsection``listviewsection.xml`

# android - 在线程内调用 AsyncTask

> ID：12705570
> 
> 赞同：4
> 
> 时间：2012-10-03T09:29:14.767
> 
> 标签：android

我在一个 android 应用程序中工作，我想从我的 UI 主线程调用一个 AsyncTask。为此，我想从线程中调用我的 AsyncTask。

这是我从主 UI 线程调用的方法。这工作正常

```
 CommonAysnk   mobjCommonAysnk = new CommonAysnk(this, 1);
  mobjCommonAysnk.execute(); 
```

CommonAysnk 是我的 AsyncTask 类。我想将我的活动和一个整数参数传递给 AsyncTask 构造函数。如何从线程中调用它，如下所示的方法。

```
 Thread t = new Thread() {
                public void run() {
                    try {                       
            CommonAysnk   mobjCommonAysnk = new CommonAysnk(this, 1);
            mobjCommonAysnk.execute();
                    } catch (Exception ex) {

                    }}};                            
            t.start(); 
```

当我尝试从线程调用它时，我无法正确传递活动参数。

这是 CommonAysnk 类。请调查一下

```
public class CommonAysnk extends AsyncTask<URL, Integer, String> {

    private Common mobjCommon = null;
    private Activity mobjActivity = null;
    private int mcallIntentcond = 0;
    private ProgressDialog mProcessDialog = null;

    public CommonAysnk(Activity activity, int condition) {
        mobjActivity = activity;
        mcallIntentcond = condition;

    }
    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        mProcessDialog.dismiss();
    }
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mobjCommon = new Common();
        mProcessDialog = mobjCommon.showProgressDialog(mobjActivity, "",
                "Loading...", false);
    }
    @Override
    protected String doInBackground(URL... params) {
        try {
            Thread.sleep(500);
        } catch (InterruptedException e) {

        }
        switch (mcallIntentcond) {
        case 1:
            Intent i=new Intent(mobjActivity, Home.class);
            mobjActivity.startActivity(i);
            mobjActivity.finish();
            break;
        }

        return null;
    }
} 
```

我们怎么能做到这一点。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:33:29.477

没有理由在这样的线程中运行 AsyncTask，您可以在 UI 线程上调用它。AsyncTask 为您管理线程。

您在 doInBackground 方法中输入的代码会自动在后台线程中运行，您的 AsyncTask 上的其他方法在 UI 线程上运行，您可以直接与 UI 进行安全交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T09:36:23.377

当上下文从 MainActivity 更改为线程类时，您不能直接从线程内部使用**它。**因此，您需要执行以下操作，

```
CommonAysnk   mobjCommonAysnk = new CommonAysnk(ActivityName.this, 1); 
```

您可以从一个线程中运行 AsyncTask，对此没有硬性规定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:31:30.337

利用

```
 CommonAysnk mobjCommonAysnk = new CommonAysnk(ClassName.this, 1);
 mobjCommonAysnk.execute(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-28T15:11:46.840

必须`asynctask`仅从主线程调用，否则当我们尝试从`onPreExecute`or`onProgressUpdate`或`onPostExecute`函数触摸 UI 时，它可能会在运行时崩溃。

# self - 在 Self Language 上，我们如何在其 VM 上运行代码？

> ID：12705572
> 
> 赞同：1
> 
> 时间：2012-10-03T09:29:14.563
> 
> 标签：self, selflanguage

[如果使用http://selflanguage.org/](http://selflanguage.org/)上的文件在 Ubuntu 上安装 Self ，那么我们可以使用

```
$ Self
Self Virtual Machine Version 4.1.13, Sat 20 Feb 10 22:39:48 Linux
Copyright 1989-2003: The Self Group (type _Credits for credits)

for I386:  LogVMMessages = true
for I386:  PrintScriptName  = true
for I386:  Inline = true
for I386:  SICDeferUncommonBranches = false (not implemented)
for I386:  SICReplaceOnStack = false (not implemented)
for I386:  SaveOutgoingArgumentsOfPatchedFrames = true 
```

但是，一些简单的行无法运行：

```
VM# 'Hello, World!' print.
A lookup error happened while sending the message
    print
to
    'Hello, World!'.
Subsequently, the lookup error message
    undefinedSelector:Receiver:Type:Delegatee:MethodHolder:Arguments:
was sent to
    <0>,
and was also not understood, causing the process to be aborted by the Self VM.

#0 (<error>:1): print = ( | self* = 'Hello, World!'. delegatee = nil. selector = 'print'. | 
"undefined selector error;
this method was automatically generated by the VM."
 )

#1 (<stdin>:1): <top level expr> = ( | self* = lobby. | 'Hello, World!' print ) 
```

或者另一个尝试插槽：

```
VM# _AddSlots: (| vehicle <- (|parent* = traits clonable|) |).
A lookup error happened while sending the message
    traits
to
    lobby.
Subsequently, the lookup error message
    undefinedSelector:Receiver:Type:Delegatee:MethodHolder:Arguments:
was sent to
    <0>,
and was also not understood, causing the process to be aborted by the Self VM.

#0 (<error>:1): traits = ( | self* = lobby. delegatee = nil. selector = 'traits'. | 
"undefined selector error;
this method was automatically generated by the VM."
 )

#1 (<stdin>:1): <top level expr> = ( | self* = lobby. | traits clonable )

                             ^
Self VM error: couldn't construct object literal on line 1, character 30
               ^
Self VM error: couldn't construct object literal on line 1, character 16
VM# 
```

有人知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T05:28:09.110

你遇到的是最基础的自我形式。

VM 本身只知道很少的消息。它们包括所有原语和一些消息，例如`bootstrap`.

如果您尝试它，类似`_Quit`或`'some/path/to/self/script' _RunScript` 将起作用的东西，因为这些是始终可用的原语。

如果你想要一个工作环境，你必须要么

*   `-s`通过使用以下选项启动 VM 来加载快照：

    ```
    Self -s mySnapshot.snap 
    ```

    您可以在自我主页上找到快照。

*   运行世界构建脚本。为此，您需要`objects`self 附带的目录。如果找不到，请使用[github 页面](https://github.com/russellallen/self)中的那个。然后，将您的工作目录更改为该`objects`目录并运行世界构建器脚本。

    ```
    cd $PATH_TO_OBJECTS/objects
    Self -f worldBuilder.self 
    ```

    或者，将`SELF_WORKING_DIR`环境变量指向*包含*该目录的`objects`目录并运行 sctipt。

    ```
    SELF_WORKING_DIR=$PATH_TO_OBJECTS Self -f s$PATH_TO_OBJECTS/worldBuilder.self 
    ```

这引导了一个自我世界，每个已知的信息都应该被理解。

PS：当然，您也可以从正在运行的 VM 中运行 word builder 脚本：`'/path/to/dir/with/objects/worldBuilder.self' _RunScript'`. 但请确保设置了 SELF_WORKING_DIR。

# php - 使用 PHP 在调用肥皂中添加自定义 HTTP 标头

> ID：12705576
> 
> 赞同：2
> 
> 时间：2012-10-03T09:29:25.313
> 
> 标签：php, soap

我正在尝试连接到 WebService SOAP。该服务要求我们在soap调用的HTTP头中添加一个自定义参数

```
$context = array('http' =>
    array(
        'header'  => "APIToken: $api_token\r\n"
    )
);
$soap_options = array(
    'stream_context' => stream_context_create($context),
    'encoding' => 'UTF-8',
    'exceptions' => TRUE,
    'trace' => true,
    'local_cert' => 'mycert.pem',
    'passphrase'=>'xxx',
    'location'=>$this->url_soap_dev
);

$soap_client = new SoapClient('soap.wsdl', $soap_options);

$args = array(
    'param1' => $var,
    'param2' => 0,
    'optionalParameters'=>array()
);

$ret = $soap_client->RemoteFunction(array('parameter'=>$args)); 
```

这是我的请求标头：

```
POST /server/soap HTTP/1.1
Host: domain.com
Connection: Keep-Alive
User-Agent: PHP-SOAP/5.2.6-1+lenny16
Content-Type: text/xml; charset=utf-8
SOAPAction: ""
Content-Length: 400 
```

我在哪里可以添加自定义参数？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:12:27.117

此过程适用于 PHP >= 5.3

这是添加此功能的补丁 [https://bugs.php.net/bug.php?id=49853](https://bugs.php.net/bug.php?id=49853)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T08:01:18.667

使用 php 5.6，我在顶部工作的示例代码没有任何功能更改，我所做的只是将 WSDL、标头值更改为我正在使用的服务器。

# python - 需要创建一个设置文件，我可以在 for 循环期间从中获取值

> ID：12705577
> 
> 赞同：1
> 
> 时间：2012-10-03T09:29:27.637
> 
> 标签：python, django, loops

我有来自我转换 inti python 字典的 url 的 json 数据，通过使用 for 循环，我从 url 提供的 json 数据中提取信息。但是如果需要添加更多打印语句，我必须每次都编辑源代码。是有什么方法可以让我使用从设置文件中获取的 for 循环中的 url 获取 json 数据的变量。它可以是任何类型。

我需要这样做，因为如果需要添加一些更改，我会在设置文件中而不是在源代码中进行更改

* * *

从 ConfigParser 导入 SafeConfigParser

导入 urllib2

导入简单的json

responseFromMetataste = urllib2.urlopen("http://metataste.com/do?action=srch&want=gnr_4dd3faa9237e1e43c5a416f9&nmht=2&ofst=0&card=appMovieCard").read()

parseResponseString = simplejson.loads(responseFromMetataste)

解析器 = SafeConfigParser()

parser.read("settings.txt")

k=parseResponseString['结果']

for y in range(len(k)):
print "Movie "+str(y+1) print ("Movie_Title :"+(k[y][parser.get('Details','Trailer')][0 ][parser.get('Movie_Details','M_Title')]))

```
if (parser.get('Movie_Flags','M_url'))=='True' :
    print ("Movie_URL       :"+(k[y][parser.get('Details','Trailer')][0][parser.get('Movie_Details','M_url')]))

if (parser.get('Movie_Flags','M_Id'))=='True' :
    print ("Movie_ID        :"+(k[y][parser.get('Details','Trailer')][0][parser.get('Movie_Details','M_Id')]))

if (parser.get('Movie_Flags','M_Lang'))=='True' :
    print ('Movie_Lang      :'+(k[y][parser.get('Details','Ttl')][parser.get('Details','Languages')][0]))

if (parser.get('Movie_Flags','M_summary'))=='True' :
    print ('Movie_Summary   :'+(k[y][parser.get('Details','Synopsis')]))

if (parser.get('Movie_Flags','M_Genre'))=='True' :
    print ('Movie_Genre     :'+(k[y][parser.get('Details','Genre')][0][parser.get('Movie_Details','M_Genre')]))

if (parser.get('Movie_Flags','Yr_Release'))=='True':
    print ('Year_of_release :'+str(k[y][parser.get('Details','Yor')]))

if (parser.get('Movie_Flags','Poster_Url'))=='True' :
    print ('poster_url      :'+str(k[y][parser.get('Details','Posters')][2][parser.get('Movie_Details','Poster_Url')])) 
```

XXXX……………………XXXX…… ..................................XXXX

设置.txt 文件

[详情] ttl=ttl

拖车=拖车

语言=lngs

概要=synp

类型=gnr

年=年

海报=海报

[电影_标志]

M_Title=真

M_url=真

M_Id=真

M_Lang=真

M_summary=真

M_Genre=真

Yr_Release=真

Poster_Url=真

[电影_详情]

M_Title=ttl

M_url=url

M_Id=_id

M_Lang=lngs

M_summary=真

M_流派=nm

Yr_Release=yr

## 海报_Url=网址

新的设置文件

var1=true:title:'sometitle'

var2=true:title:'sometitle'

var3=true:title:'sometitle'

这些值应该在 for 循环期间从设置文件中读取，在 for 循环期间我需要通过将 var1 、var2 、 var3 .......传递给某个函数来获取这些值，并且我需要使用 python 执行所有这些步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:35:40.397

您可以使用提到的任何文件类型。就效率而言，这仅取决于您要编写多少代码。我假设您还将维护代码！

我的建议是使用 csv 文件。读取一行并将其拆分为“，”逗号字符。split 方法应该为您提供一个包含 var1、var2 等的数组。

这样，您可以循环该数组并将其传递给任何其他方法。

# jquery - iPad，iPhone（iOS 5.1）上的加载事件窗口不起作用

> ID：12705578
> 
> 赞同：2
> 
> 时间：2012-10-03T09:29:31.397
> 
> 标签：jquery, ios, ipad

有谁知道为什么`jQuery $(window).load(function() { alert("Hello!"); });`在 iPad 和 iPhone 上不触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-07T07:50:08.423

不知道为什么有问题

```
jQuery $(window).load(function() { alert("Hello!"); }); 
```

但改为

```
jQuery(document).ready(function () {alert('Hello!');}); 
```

为我做了伎俩。

# c# - 如何在 HTML 头部中查找和删除 CSS 引用？

> ID：12705583
> 
> 赞同：2
> 
> 时间：2012-10-03T09:30:16.123
> 
> 标签：c#, asp.net, html, css, .net-4.0

我创建了一个服务来加入、缩小和压缩 CMS 系统上的 css-references。例子：

前 ：

```
<link href="/Files/css1.css" rel="stylesheet" type="text/css"/>
<link href="/Files/css2.css" rel="stylesheet" type="text/css"/>
<link href="/Files/css3.css" rel="stylesheet" type="text/css" media="all"/> 
```

现在你可以写：

```
<link href="/min.ashx?files=/Files/css1.css,/Files/css2.css,/Files/css3.css" rel="stylesheet" type="text/css" /> 
```

我的下一个任务是自动获取 head 部分中的所有引用并将它们替换为一行，如示例中所示。

我应该只替换那些符合这些规则的：

*   Href 以 '/Files/' 开头，以避免尝试加载 externals
*   只有具有属性 media 或具有 media="all" 的那些应该包括在内，因为生成的 css 文件将只有一个设置。

我可以访问页面的原始 html，但一直坚持成功定位引用，不知道我是否应该解析为 xml 或使用正则表达式等。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:53:27.277

使用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)。粗略的进攻计划：

1.  将 html 内容加载到 HtmlDocument 对象中。

2.  通过 XPath 在 HtmlDocument 对象中查找链接节点

    var nodes = doc.DocumentBody.SelectNodes("//head/link[@type='text/css']");

3.  从这些节点中检索 href

    字符串 href = 节点[0].Attributes["href"].Value;

4.  然后用新节点替换节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:04:27.377

您可以使用正则表达式找到与您的规则匹配的链接：

```
<link href="(/Files/[^"]+)" .* media 
```

它会给你引号内的文件路径，例如'/Files/css1.css'。您可以使用该结果来构建您想要的字符串。

C# 友好的正则表达式：

```
@"<link href=""(/Files/[^""]+)"" .* media" 
```

使用 Regex.Match 方法获取分组：http: [//msdn.microsoft.com/en-us/library/twcw2f1c.aspx](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)

# java - 我为什么要使用 Drools？

> ID：12705586
> 
> 赞同：37
> 
> 时间：2012-10-03T09:30:21.070
> 
> 标签：java, scripting, drools, rules, rule-engine

我不是 Drools 专家。不过，通过实验，我对它有些熟悉。我无法欣赏，我为什么需要它。

我的典型应用程序是商业 Web 应用程序。是的，他们确实有一些规则。但是这些是使用数据库表、SQL 查询和一个漂亮的 UI 来实现的，供业务用户修改规则。规则不是任意的，它们在投入生产之前经过深思熟虑。

我的业务用户永远不会使用（Drools）脚本语言来修改任何东西。更不用说修改规则了。他们非常乐意使用 UI 屏幕来修改规则。另外，如果我让它们靠近它，它们可能会在 Drools 文件中犯无数的语法错误。

再一次
- 为什么我应该在这种情况下使用 Drools？
- 我遇到了一些 Drools 狂热分子，他们坚持我应该更改所有代码以使用 Drools。

那么，Drools 有用吗？我不确定。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-03T09:34:49.363

各式各样的狂热分子都应该受到质疑，无论他们热衷于什么话题。

数据驱动的决策表是实现复杂行为的绝佳方式。在它无法扩展或无法满足您的要求的那一天，也许您会想要考虑其他东西。

除非我有令人信服的理由，否则我不想在工作生产代码中进行技术交换。这将比粉丝男孩游说更多。

如果您真的有兴趣，请做一个 PoC 并获取一些真实数据。如果没有，请学习如何礼貌地微笑并忽略它们。

我之前已经回答过这个问题：

[规则引擎 - 优点和缺点](https://stackoverflow.com/questions/250403/rules-engine-pros-and-cons/398389#398389)

更新：如果它是你的老板，并且你不能解雇，那么让它基于接口并在 PoC 中尝试 Drools 实现。如果您使用的是 Spring，请先注入一个，然后再注入另一个，在有意义的生产额定负载下测量性能。获取一些真实数据——也许你们都会学到一些东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-13T22:56:04.220

规则引擎的优点是；

*   **声明式编程**：规则可以很容易地表达对困难问题的解决方案，并得到验证的解决方案。与代码不同，规则是用不太复杂的语言编写的；业务分析师可以轻松阅读和验证一组规则。
*   **逻辑和数据分离**：数据位于域对象中，业务逻辑位于规则中。根据项目的类型，这种分离可能非常有利。
*   **速度和可扩展性**：编写 Drools 的 Rete OO 算法已经是一种经过验证的算法。在 Drools 的帮助下，您的应用程序变得非常可扩展。如果有频繁的更改请求，可以添加新规则而无需修改现有规则。
*   **知识集中化**：通过使用规则，您可以创建可执行的知识库（知识库）。这是商业政策的单一真理。理想情况下，规则的可读性很强，它们也可以用作文档。工具集成：Eclipse 等工具提供了编辑和管理规则以及获得即时反馈、验证和内容帮助的方法。还提供审计和调试工具。
*   **解释工具**：规则系统能够有效地提供“解释工具”，因为它能够记录规则引擎做出的决定以及做出决定的原因。
*   **可理解的规则**：通过创建对象模型和（可选）为您的问题域建模的领域特定语言，您可以设置自己以编写非常接近自然语言的规则。它们适用于可能是非技术领域专家可以理解的逻辑，因为它们用他们的语言表达，所有的程序管道，技术知识都隐藏在通常的代码中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-24T23:12:59.740

*   Drools 是开源的。
*   它提供规则执行的前向和后向链接
*   它提供模板基本规则定义
*   它是使用 JSR-94 实现的
*   它有决策表设施
*   它的规则是人类可读的
*   它与 Spring 集成

# c# - 如何将公里转换为米？

> ID：12705594
> 
> 赞同：-5
> 
> 时间：2012-10-03T09:30:58.590
> 
> 标签：c#, .net, math

我有一些定义“公里”的字符串，例如：

```
sValore = "64.8";
sValore = "64,8";
sValore = "64";
sValore = "64.82323523"; 
```

我需要一个将其转换为米的函数。

第一个问题是将其转换为“双”。我试过：

```
double valore = double.Parse(sValore.Replace(",", ".")); 
```

但实际上first(64.8)的结果是，例如648（必须是64.8）。

比，`valore * 1000`我应该解决问题，但最后一种情况呢？结果必须是 64823，而不是 64823.3523

那么，我该如何解决这些烦恼呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:32:59.150

在我看来，您应该将数据解析为 a`double`或 a `decimal`，然后乘以 1000。理想情况下，除非您确实需要，否则*不应*转换回字符串表示形式。（您甚至可能想要一个明确地关于长度和单位的数据结构，以避免以后产生歧义。）

始终尝试尽早将数据转换为最自然的表示形式，然后尽可能长时间地坚持这种表示形式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T10:00:23.220

您的问题之一似乎是您有错误的数据，其中小数分隔符使用点或逗号表示。如果您无法从源头上解决该问题，您可以按照您已经在做的那样进行替换：

```
var sValore = "64.82323523";
var kilometers = Decimal.Parse(
  sValore.Replace(",", "."),
  CultureInfo.InvariantCulture
); 
```

请注意，我指定`CultureInfo.InvariantCulture`为`IFormatProvider`. 这将确保使用点作为小数分隔符。否则，如果当前区域性使用不同的小数分隔符，代码将中断。（我认为这是您面临的问题——“valore”是一个意大利语单词，文化使用逗号，而不是点。）

我还将值解析为 a`Decimal`因为如果您不想对其执行大量计算，它通常是十进制数的更好类型。如果你愿意，你可以使用 a`Double`代替。

从公里到米只需乘以 på 1,000。似乎您想将米表示为整数，因此您需要对值进行四舍五入并将其转换：

```
var meters = (Int32) Math.Round(1000*kilometers, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:33:28.090

您可以使用`Math.Round()`方法将分数四舍五入到最接近的整数值，或者您可以将值转换为整数，从而简单地“删除”分数：

```
double rounded = Math.Round(valore);
double truncated = (int)valore; 
```

# java - 创建一个带有路线/航点的 url

> ID：12705596
> 
> 赞同：2
> 
> 时间：2012-10-03T09:31:00.523
> 
> 标签：java, google-maps

我有一个连接到 GPS 的 Java 应用程序，并间歇性地保存地理位置。并基于 GPS 坐标列表（纬度/经度），我想创建一个包含所有坐标的谷歌地图 URL/链接。然后，此 URL 将添加到电子邮件中并转发到用户电子邮件帐户。

我可以像这样创建一个静态地图， [http://maps.googleapis.com/maps/api/staticmap?&zoom=13&size=600x300&maptype=roadmap&markers=color:blue|label:1|56.1721,10.1811&markers=color:blue| label:2|56.1721,10.1711&markers=color:blue|label:3|56.1721,10.1611&sensor=false](http://maps.googleapis.com/maps/api/staticmap?&zoom=13&size=600x300&maptype=roadmap&markers=color%3ablue%7Clabel:1%7C56.1721,10.1811&markers=color%3ablue%7Clabel:2%7C56.1721,10.1711&markers=color%3ablue%7Clabel:3%7C56.1721,10.1611&sensor=false) 但是如果有超过 40 个左右的航路点，那么 url 会变得很长并且我收到 HTTP 错误 414

我想创建一个指向动态谷歌地图的链接，并让该链接最多容纳大约 100 个航点。

有没有谷歌地图专家？？

# symfony - Symfony2 - 将实体代理转换为实体

> ID：12705599
> 
> 赞同：2
> 
> 时间：2012-10-03T09:31:02.053
> 
> 标签：symfony, doctrine-orm

我想知道是否可以将实体代理对象转换为实体对象。

我得到的是 UserProxy 实体而不是 User 实体，当我对该对象进行反射以获取其属性时，我没有得到 User 属性。如何从用户代理对象获取用户属性？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:18:30.680

您可以使用此方法获取代理类的真实名称：

```
$entityName = $em->getClassMetadata($myProxyEntity)->rootEntityName; 
```

一旦你有了你的真实实体名称，你就可以创建一个反射类

# css - CSS 在所有 Windows 浏览器中都可以正常工作，但在 OSX 上的 Firefox 中则不行

> ID：12705601
> 
> 赞同：0
> 
> 时间：2012-10-03T09:31:08.613
> 
> 标签：css, windows, macos

我有一些 CSS，它在 Windows 上运行良好，但是当我在 OSX 上查看它时，它并不完全正确。

这就是它应该看起来的样子，太棒了：

![在此处输入图像描述](../Images/649538fbaffb882bc0c0b4dfa3da33f0.png)

这就是 OSX 上的 Firefox 15 显示它的方式：

![在此处输入图像描述](../Images/5c20c22940c58befa5dd15ddbeb8d15f.png)

CSS：

```
nav#main ul>li.current {
height: 59px;
}

nav#main ul>li.current:before {
background: url('../img/top_shadow.png') no-repeat;
content: '';
display: block;
height: 7px;
margin: -7px 0 0 0;
}

nav#main ul>li.current:after {
background: url('../img/bottom_shadow.png') no-repeat;
content: '';
display: block;
height: 7px;
margin: 8px 0 0 0;
}

nav#main ul>li.current a {
background-color: #77b9de;
color: #3e3e3e;
height: 53px;
margin: -4px 3px -8px -3px;
padding: 3px 3px 0 10px;
} 
```

关于为什么会发生这种情况的任何想法？我还应该指出，如果我将背景颜色移动到`<li>`而不是`<a>`它仍然会做同样的事情。

[http://jsfiddle.net/eHhGa/](http://jsfiddle.net/eHhGa/)

我将它的快速版本添加到 jsfiddle 以查看整个代码的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:10:41.307

我解决了这个问题，基本上`overflow:hidden;`是在浏览器高度低于 500px 并且 Firefox 对此严格要求时对容器生效。

# iphone - 读/写 SIM 卡上的证书 - iOS

> ID：12705603
> 
> 赞同：1
> 
> 时间：2012-10-03T09:31:15.547
> 
> 标签：iphone, certificate, sim-card

我正在对使用 SIM 卡中的证书的方式进行一些研究（如果用户想更换手机，为了保持提供的服务）。

在Android中，似乎还可以，但是在iOS平台上我找不到任何东西：是否可以通过iPhone设备从SIM卡中读取X.509证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:39:27.650

**不。**

您最好的选择是使用[钥匙串](https://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)或[iCloud](https://developer.apple.com/icloud/index.php)在设备之间保存数据。

# android - 当我在 android 中提供用户 ID 时，如何获取我的 facebook 朋友个人资料照片？

> ID：12705612
> 
> 赞同：-1
> 
> 时间：2012-10-03T09:31:41.757
> 
> 标签：android, facebook, android-intent, android-activity, profile

在我的主布局中，有一个编辑文本和一个搜索按钮。当我在用用户 ID 填充文本字段后单击按钮时，它将显示相应用户 ID 的个人资料照片。有人帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:09:13.140

首先，它确实是一种奇怪的方式（输入用户 ID，我怎么知道任何人的用户 ID）......最好先获取您的朋友列表，然后任何朋友节目的 onClick() 显示图片。

无论如何，根据您的问题，您需要发送这样的查询

```
Bundle paramsFriends = new Bundle();
        paramsFriends.putString("method", "fql.query");
        paramsFriends.putString("query", Constants.QUERY_FRIENDS);

        /**
         * Show the Progress Bar
         */
        mProgressBar = new ProgressDialog(this);
        mProgressBar.setCancelable(true);
        mProgressBar.setMessage("Getting Friend List...");
        mProgressBar.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        mProgressBar.setProgress(0);
        mProgressBar.setMax(100);
        mProgressBar.show();

        // The fourth param is like an id (state) to distinguish among
        // different requests
        mAsyncRunner.request(null, paramsFriends, this,
                Constants.QUERY_FRIENDS); 
```

`

然后稍后（注意：-您的活动必须实现 RequestListener）在 onComplete() 方法中执行：-

```
public void onComplete(String response, Object state) {

    Log.v("  FQLRequestListener = ", "onComplete()");

    // friend list
    if (state.equals(Constants.QUERY_FRIENDS)) {

        Log.v("response", "" + response);
        Log.v("state", "" + state);

        Log.v("Display ", "Goto the new Activity to show FRIEND LIST");

        if (response != null) {
mProgressBar.dismiss();
        // response is the JSON respone
        // parse it to get the url of the image
        // download the pic from the url
        // then show it where ever you want
        }
    }
} 
```

最后只要确保

```
Constants.QUERY_FRIENDS = "SELECT uid, name,username,sex,pic_small FROM user WHERE  uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"; 
```

这将为您提供整个朋友列表，只需将 onItemClickListener() 添加到您的列表中并相应地解析 json 响应以显示正确的图片。

希望解释是有用的....

# actionscript-3 - 从 Sprite 中提取派生的 3D 缩放以设置为 2D 广告牌

> ID：12705614
> 
> 赞同：0
> 
> 时间：2012-10-03T09:31:55.500
> 
> 标签：actionscript-3, flash, matrix, scaling

我正在尝试获取 3D Sprite 的***派生*位置**和**缩放**并将它们设置为 2D Sprite。

我设法做到了这样的第一部分：

```
 var p:Point = sprite3d.local3DToGlobal(new Vector3D(0,0,0));
        billboard.x = p.x;
        billboard.y = p.y; 
```

*但我无法正确获得缩放部分。*我正在尝试这个：

```
 var mat:Matrix3D = sprite3d.transform.getRelativeMatrix3D(stage); // get derived matrix(?)
        var scaleV:Vector3D = mat.decompose()[2]; // get scaling vector from derived matrix
        var scale:Number = scaleV.length;
        billboard.scaleX = scale;
        billboard.scaleY = scale; 
```

...但结果显然是错误的。

PS。有人可能会问我想要实现什么。我正在尝试创建“广告牌”3D 精灵，即受除旋转之外的所有 3D 变换影响的精灵，因此它们始终面向“相机”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:02:50.633

文档说你正确地得到了向量，但它的系数似乎没有加在一起形成一个单一的长度值。首先尝试一个未缩放的精灵，并检查您是否收到一个 sqrt(3) 值作为它的长度。如果是，那么您应该使用向量的第 0 个元素作为 X 比例，第 1 个作为 Y 比例。我不确定如何处理第二个元素（在这种情况下，它将是 Z 比例，或者将两个比例除以它，或者乘以它）。希望有帮助。

# android - Android - 带有 switch 语句的字符串数组

> ID：12705620
> 
> 赞同：-1
> 
> 时间：2012-10-03T09:32:20.693
> 
> 标签：android, switch-statement, arrays

我正在寻找关于如何实现从字符串数组获取值的开关的指南。基本上，我有一个微调器，其中包含数组中所述的所有项目，所以我想实现一个开关，以便每当我点击一个项目时，它都会触发一个事件，例如，转到另一个活动。

```
<string-array name="location1">

    <item>string a</item>
    <item>string a</item>
    <item>string b</item>
    <item>string c</item>
    <item>string d</item>

</string-array> 
```

那么，如果我有一个这样的字符串数组，我应该如何实现我的 switch 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:48:53.777

如果数组是：

```
<string-array name="cars_array">
    <item>Audi</item>
    <item>Ferrari</item>
</string-array> 
```

您可以像这样访问它们：

```
Resources res = getResources();
String[] cars = res.getStringArray(R.array.cars_array); 
```

然后你可以单独访问它们作为汽车[0]、汽车[1]等

如果您想将相同的字符串资源作为数组的一部分并单独访问，那么您可以这样做：

```
<string name="audi">Audi</string>
<string name="ferrari">Ferrari</string>

<string-array name="cars_array">
    <item>@string/audi</item>
    <item>@string/ferrari</item>
</string-array> 
```

然后你可以简单地说“@string/audi”来单独获取它，也可以使用数组名称“@string/cars”来使用整个字符串数组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T09:37:49.880

我认为 Android 开发者网站上的这个资源可能会对您有所帮助：[字符串资源](http://developer.android.com/guide/topics/resources/string-resource.html)

它会给你类似的东西：

```
Resources res = getResources();
String[] strArray = res.getStringArray(R.array.location1); 
```

# android - 通知画面问题

> ID：12705626
> 
> 赞同：1
> 
> 时间：2012-10-03T09:32:46.763
> 
> 标签：android, notifications

我正在开发一个安卓应用程序。在我的应用程序中，我正在使用通知。我有两个屏幕 screen1 和 screen2。每当通知来了。如果我们点击通知中的通知将导致屏幕2。现在我的问题是如果我在screen2中。一个新的通知来了，单击通知将打开屏幕 2。然后单击返回按钮将再次显示屏幕 2。因为点击前一个屏幕2前面的通知打开屏幕2。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:36:43.393

您应该在清单文件中将您的活动定义为单个实例

```
 <activity android:name=".Screen2"
       android:launchMode="singleTask" /> 
```

using`launchMode`将阻止活动多次启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T09:38:49.163

将此标志值添加到您的通知意图中，

```
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP| Intent.FLAG_ACTIVITY_NEW_TASK); 
```

这将确保如果您调用的 Activity 位于堆栈顶部，则不会创建它的新实例，而只是帮助您移动到该 Activity。

# android - Android 通过端口 5060 发送 SIP 数据包

> ID：12705628
> 
> 赞同：2
> 
> 时间：2012-10-03T09:32:52.537
> 
> 标签：android, sip, socketexception

使用设备而不是模拟器将 SIP 数据包通过 UDP 发送到端口 5060 时，我在 Android 上遇到问题。例外是：

```
java.net.SocketException: sendto failed: EPERM(Opereation not permitted) 
```

在某些设备（例如 Galaxy Nexus）上，相同的代码可以在其他设备（例如 Asus Transformer TF101 和 Galaxy Tab 2）上运行，我遇到了这些问题。我有所需的权限`android.permission.INTERNET`。当通过另一个端口（比如 9876）发送相同的 SIP 数据包时，数据包发送成功。即使通过端口 5060（不是 SIP 数据包）发送其他内容，数据包仍然可以成功发送。在某些设备上似乎不允许通过端口 5060 组合 SIP 数据包。我创建了一个测试程序来复制这个问题：

```
try
{
    DatagramSocket clientSocket = new DatagramSocket();
    InetAddress IPAddress = InetAddress.getByName("10.111.110.6");
    byte[] sendData = new byte[1024];
    byte[] receiveData = new byte[1024];
    String sentence = "Register sip ...";
    sendData = sentence.getBytes();
    DatagramPacket sendPacket = new DatagramPacket(sendData, 
        sendData.length, IPAddress, 5060);
    clientSocket.send(sendPacket);
    DatagramPacket receivePacket = new DatagramPacket(receiveData, 
        receiveData.length);
    clientSocket.receive(receivePacket);
    int x = receivePacket.getLength();
    String modifiedSentence = new String(receivePacket.getData(), 0, x);
    ds_tv.setText("FROM SERVER:" + modifiedSentence + " Length: "+ x);
    clientSocket.close();
}
catch (Exception e)
{
    Log.e("Test", e.getMessage());
    ds_tv.setText(e.getMessage());
} 
```

这个测试程序只包含一个按钮，上面的代码在它的 onClick() 事件中被调用。包含`String sentence`SIP 注册数据包的数据包不会通过端口 5060 发送。如果我修改端口，则数据包发送成功，即使我修改了字符串语句的内容。但是，如果我通过端口 5060 发送 SIP 注册数据包，`SocketException`则会发生。我不知道可能是什么问题或如何解决这样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:35:51.513

问题已解决，错误是由 SIP 数据包的有效负载引起的。SIP 数据包中的 CSeq 值最初设置为 0。相反，它必须从 1 开始。

# php - 是否可以使用 Joomla 一次运行多个更新查询？

> ID：12705632
> 
> 赞同：6
> 
> 时间：2012-10-03T09:33:00.550
> 
> 标签：php, mysql, sql, joomla, joomla2.5

我想使用 JOOMLA 2.5 一次运行多个 SQL 更新查询。在我的代码下面：

```
require_once '../includes/framework.php';  
$query = "UPDATE #__mytable SET myfield='value' where id=1; UPDATE #__mytable SET  
myfield='value' where id=2; UPDATE #__mytable SET myfield='value' where id=3;";  
$db = JFactory::getDbo();  
$db->setQuery($query);  
$db->query(); 
```

但它向我显示了一个语法错误。我尝试直接在 MYSQL 中进行测试，它可以工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:43:04.793

默认情况下，PHP 不允许多个查询。您可以通过向 mysql_connect 添加参数来强制它这样做，但我不推荐它（它为 SQL 注入打开了巨大的安全漏洞）。

我不知道 JFactory 是如何处理这个问题的，但如果它有所不同，我会感到惊讶。

有关它的更多信息：http: [//de3.php.net/manual/en/function.mysql-query.php#91669](http://de3.php.net/manual/en/function.mysql-query.php#91669)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-15T22:58:45.120

您必须使用`JDatabaseDriver::splitSql()`将多个查询的字符串拆分为单个查询的数组，并一次运行一次。

这就是内部扩展安装程序的工作方式。

不要担心评论，他们会被剥夺。

```
$sql = "UPDATE #__mytable SET myfield='value' where id=1; UPDATE #__mytable SET myfield='value' where id=2; UPDATE #__mytable SET myfield='value' where id=3;";

$db = JFactory::getDbo();
$queries = JDatabaseDriver::splitSql($sql);
foreach ($queries as $query)
{
    try
    {
        $db->setQuery($query)->execute();
    }
    catch (JDatabaseExceptionExecuting $e)
    {
        ...
    }
} 
```

# jquery - 使用 jquery 验证引擎在输入中禁止 "

> ID：12705635
> 
> 赞同：0
> 
> 时间：2012-10-03T09:33:11.487
> 
> 标签：jquery, jquery-validate

我想禁止用户在文本框中输入“。对于验证，我正在使用 jQuery 验证引擎。是否有内置函数可以做到这一点，如果没有，你能告诉我如何编写自定义验证规则？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:23:40.533

您要做的是使用[addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)创建自己的验证方法。

对于您的特定情况，您需要做这样的事情：

```
$.validator.addMethod('noquote', function(val,el){
  return this.optional(el) || !val.match(/"/);
},'No quotes allowed in this field'); 
```

然后`class="noquote"`在您的输入上进行设置，或者在您的规则中定义它，如下所示：

```
$('#myForm').validate({
   rules: {
      inputname: {
         noquotes: true,
         required: true
      }
   }
}); 
```

在这里查看它的实际效果：http: [//jsfiddle.net/ryleyb/Ckw5w/](http://jsfiddle.net/ryleyb/Ckw5w/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:06:44.350

只需使用*.keypress()*函数。

JAVASCRIPT：

```
$(document).ready(function(){
    $('#ID OF TEXTBOX HERE').keypress(function(e){
        if(e.which==34){
           return false;
        }            
    });
});​ 
```

我还为你做了一个演示：http: [//jsfiddle.net/bHhpW/2/](http://jsfiddle.net/bHhpW/2/)

希望这可以帮助！

还可以访问[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)了解更多关于该事件的信息（**还有一个演示，将为您提供 keycode 信息！**）

# android - 在android中实现手绘裁剪

> ID：12705637
> 
> 赞同：8
> 
> 时间：2012-10-03T09:33:12.707
> 
> 标签：android, canvas

我正在尝试使用画布在 android 中实现徒手裁剪。我使用`drawPath`它并将其存储在列表中并在画布路径中绘制它，确定，

像这样

![在此处输入图像描述](../Images/a1b2dde6b4a229ce184574f34fd17744.png)

但现在我想用这段代码在侧面区域的那个路径中制作所有像素，但我不知道该怎么做..

```
public  Bitmap getBitmapWithTransparentBG(Bitmap srcBitmap) 
    {
        Bitmap result = srcBitmap.copy(Bitmap.Config.ARGB_8888, true);
        int nWidth = result.getWidth();
        int nHeight = result.getHeight();
        for (int y = 0; y < nHeight; ++y)
        {
          for (int x = 0; x < nWidth; ++x) 
          {
             for (int i = 0; i < points.size() ; i++) 
             {

             }
              result.setPixel(x, y, Color.TRANSPARENT);
          }
        }
        return result;
    } 
```

点是路径坐标列表听到是绘制路径的代码

```
package com.org;

import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.Path;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class SomeView extends View implements OnTouchListener {

    private Paint paint;
    List<Point> points;
    int DIST = 2;
    boolean flgPathDraw = true;

    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.waterlilies);

    public SomeView(Context c  ) {
        super(c);
        setFocusable(true);
        setFocusableInTouchMode(true);

        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(2);
        paint.setColor(Color.WHITE);

        this.setOnTouchListener(this);
        points = new ArrayList<Point>();
    }
    public SomeView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setFocusable(true);
        setFocusableInTouchMode(true);

        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(2);
        paint.setColor(Color.WHITE);

        this.setOnTouchListener(this);
        points = new ArrayList<Point>();

    }

    public void onDraw(Canvas canvas) 
    {
        canvas.drawBitmap(bitmap, 0, 0, null);

        Path path = new Path();
        boolean first = true;

        for (int i = 0; i < points.size(); i += 2) 
        {
            Point point = points.get(i);
            if (first) {
                first = false;
                path.moveTo(point.x, point.y);
            } else if (i < points.size() - 1) {
                Point next = points.get(i + 1);
                path.quadTo(point.x, point.y, next.x, next.y);
            } else {
                path.lineTo(point.x, point.y);
            }
        }
        canvas.drawPath(path, paint);
    }

    public boolean onTouch(View view, MotionEvent event) {
        // if(event.getAction() != MotionEvent.ACTION_DOWN)
        // return super.onTouchEvent(event);
        Point point = new Point();
        point.x = (int) event.getX();
        point.y = (int) event.getY();

        if (flgPathDraw) {
            points.add(point);
        }

        invalidate();
        Log.e("Hi  ==>", "Size: " + points.size());

        return true;
    }
    public void fillinPartofPath()
    {
        Point point = new Point();
        point.x = points.get(0).x;
        point.y = points.get(0).y;

        points.add(point);
        invalidate();
    }
    public void resetView()
    {
        points.clear();
        paint.setColor(Color.WHITE);
        paint.setStyle(Style.STROKE);
        flgPathDraw=true;
        invalidate();
    }
}

class Point {
    public float dy;
    public float dx;
    float x, y;

    @Override
    public String toString() {
        return x + ", " + y;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T11:37:11.553

嗨，我认为下面的链接是您的确切解决方案，您尝试什么？

[Android：免费裁剪图像](https://stackoverflow.com/questions/18439246/android-free-croping-of-image)

不要忘记在这里投票和反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:33:46.560

让我们看一个更复杂的例子：

![例子](../Images/e5e96fc5af274b43a202b0abebe5ec30.png)

红点是您要测试的点。您必须找到穿过红点 y 坐标的边缘。在此示例中，4 条边穿过 y 坐标（蓝色点）。

现在测试在要检查的点的左侧和右侧有多少交叉点。如果两侧有奇数个交叉点，则该点位于形状内部。

[更新：您可以在此处](http://alienryderflex.com/polygon/)找到该算法的更详细说明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T11:43:04.613

您可以使用[Canvas.clipPath](http://developer.android.com/reference/android/graphics/Canvas.html#clipPath%28android.graphics.Path%29)仅绘制裁剪区域。但请注意，此方法不适用于硬件加速，因此您必须[将其关闭](http://developer.android.com/guide/topics/graphics/hardware-accel.html#controlling)并使用软件渲染。

# java - 不要在 ajax 上重置小程序

> ID：12705639
> 
> 赞同：2
> 
> 时间：2012-10-03T09:33:15.857
> 
> 标签：java, jsf, applet

我们在网页中包含带有小程序的 JSF 2.0 (primefaces) 应用程序。像这样的东西。

```
<h:panelGroup id="appletbox" layout="block">
<applet id="termApplet" code=com.foo.TermApplet archive=...>
         <param name=... value=... />
</applet>
</h:panelGroup> 
```

该小程序是 SSH 终端仿真并打开一个连接。我们在 com.foo.TermApplet 中调用它 - 有一个从 javascript 调用的公共 void 方法 openFrameFromWebPage(String host)：

```
function openTerminal(host) {
   var termApplet = document.getElementById("termApplet");
   termApplet.openFrameFromWebPage(host); 
```

}

这工作得很好。问题是，每次包含此小程序的网页发出请求（包括 ajax）时 - 它都会导致小程序重置并从头开始。

我想做的，是以某种方式从回发中排除小程序。想象一下，您正在终端中的 vim 中编辑某个文件，然后单击网页上的单选按钮以获取有关您必须在服务器上执行的工作的不同数据 - 它重置连接并且您丢失了所有未保存的数据。

有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:24:23.040

弹出另一个带有不关闭警告的浏览器并打开其中的小程序。如果浏览器没有刷新并且您只使用 ajax，请添加 iframe 并从中打开小程序。

# ruby-on-rails - 试图将 Sinatra 样式的表单移动到 Rails 中的困惑

> ID：12705640
> 
> 赞同：0
> 
> 时间：2012-10-03T09:33:18.190
> 
> 标签：ruby-on-rails, ruby, sinatra

为了学习 Rails，我正在尝试构建一个应用程序，用户可以在其中通过 Twilio 购买电话号码。最初，我开始使用 2 个模型来完成此任务；用户 has_many 电话号码，并且 phone_numbers 属于用户。我想我已经处理了这部分，但我感到困惑的是如何实现

(1) 搜索电话号码 (2) 选择该号码后，将其填充到表单中以将其与其他信息一起推送到数据库。

我正在查看此文档以试图弄清楚 - [http://www.twilio.com/docs/howto/search-and-buy](http://www.twilio.com/docs/howto/search-and-buy)

但是，它是用 Sinatra 编写的，一个轻量级的 ruby​​ 框架，我最有经验的是完成 Michael Hartl 的 Rails 书。控制器和视图的啮合真的让我很困惑。

看着它，我想我需要创建一个新的控制器，比如 find_numbers，它有一个新的、创建和显示操作。创建操作将呈现 phone_numbers 控制器的新操作，然后将其发布到数据库。

但是，这是棘手的事情。我不知道如何将不在数据库中的信息字段移动到不同的视图。

例如，假设我在 find_numbers 视图中有这个

```
 <form method="POST">
    <label>near US postal code (e.g. 94117): </label><input type="text" size="4" name="in_postal_code"/><br/>
    <label>near this other number (e.g. +4156562345): </label><input type="text" size="7" name="near_number"/><br/>
    <label>matching this pattern (e.g. 415***EPIC): </label><input type="text" size="7" name="contains"/><br/>
    <input type="submit" value="SEARCH"/>
  </form> 
```

因为这些不是数据库值，我将如何告诉创建操作使用这些作为参数来列出数字？这是他们在 Sinatra 中为创建操作所写的内容

```
post '/search-numbers' do
  account_sid = 'ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
  auth_token = 'YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY'

  client = Twilio::REST::Client.new(account_sid, auth_token)

  search_params = {}
  %w[in_postal_code near_number contains].each do |p|
    search_params[p] = params[p] unless params[p].nil? || params[p].empty?
  end

  begin
    local_numbers = client.account.available_phone_numbers.get('US').local
    numbers = local_numbers.list(search_params)

    unless numbers.empty?
      out = '<html><head><title>Choose a number</title></head><body><h3>Choose a number</h3>'
      numbers.each do |number|
        out << "<form method='POST' action='/buy-number'>"
        out << "<label>#{number.friendly_name}</label>"
        out << "<input type='hidden' name='PhoneNumber' value='#{number.phone_number}' />"
        out << "<input type='submit' value='BUY' /></form>"
      end
      out << '</body></html>'
    else
      '<b>Sorry!</b> Twilio doesn\'t have any numbers available that match those constraints.'
    end
  rescue StandardError => e
    '<b>Sorry!</b> ' + e.message + '.'
  end
end 
```

有人可以帮我解构这段代码吗？比如，创建视图中会出现什么，创建动作中会出现什么？我的新观点还好吗？

之后，我想告诉 phone_number 控制器的新操作是哪个电话号码的方法是将其添加到 url，例如 /phone_number=123123123，这将填充该字段，我可以让 Twilio 从那里购买. 但是……上面的部分真的让我很困惑……

你将如何实现这一点？

* * *

我的尝试是这样的——

对于创建动作

```
 def create
@user = current_user
client = Twilio::REST::Client.new(current_user.twilio_account_sid, current_user.twilio_auth_token)
 search_params = {}
  %w[in_postal_code near_number contains].each do |p|
    search_params[p] = params[p] unless params[p].nil? || params[p].empty?
  end

local_numbers = client.account.available_phone_numbers.get('US').local
@numbers = local_numbers.list(search_params)

  end 
```

对于创建视图

```
 <%= numbers.each do |number| %>
       <form method='POST' action='/buy-number'>
       <label><%=number.friendly_name %></label>
       <input type='hidden' name='PhoneNumber' value='#{number.phone_number}' />
       <input type='submit' value='BUY' /></form>
      <% end %> 
```

但我得到了错误

```
undefined local variable or method `numbers' for #<#<Class:0x597cc48>:0x5979570> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:11:07.310

好了，比这清楚多了。我最初的问题是我不了解 rails 如何处理表单，以及它是否可以接收有关未连接到数据库的字段的信息。

[http://www.guides.rubyonrails.org/form_helpers.html](http://www.guides.rubyonrails.org/form_helpers.html)帮了很多忙，这就是我的控制器现在的样子：

```
class FindNumbersController < ApplicationController

    def new
        @user = current_user
    end

    def create
        @user = current_user
        render 'find_numbers/show'
    end

    def show
        @user = current_user
        client = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)

        search_params = {}
          %w[in_postal_code near_number contains].each do |p|
            search_params[p] = params[p] unless params[p].nil? || params[p].empty?
        end

        local_numbers = client.account.available_phone_numbers.get('US').local
        @numbers = local_numbers.list(search_params)    

    end

end 
```

我仍然对 show 动作有疑问，但这超出了这个问题的范围。

# excel - 将数据从excel导入Sql数据库

> ID：12705646
> 
> 赞同：0
> 
> 时间：2012-10-03T09:33:29.177
> 
> 标签：excel

我必须将数据从 excel 导入 SQL 数据库。在插入数据之前，我必须应用一些业务规则。那么什么是最好的方法。1.我应该阅读所有的excel并将其放入集合中然后应用业务规则 **还是** 1.我阅读excel，获取记录，应用业务规则并将记录插入数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:58:49.210

我会在不应用任何规则的情况下将数据放入数据库。之后，您可以使用 SQL 轻松应用业务规则。

虽然这种方法假设：

您的数据格式足够好。也许一个单元格不等于一个字段？或者，Excel 文件可能是由几个人按照不同的编辑约定进行编辑的。根据我的经验，在导入 SQL*之前*进行数据清理要容易得多。

您可以使用 SQL 应用您的业务逻辑。毕竟您需要能够实现它，并且如果您是比 SQL 或 PL/SQL 程序员更好的 VBA 程序员，那么您应该在将所有内容插入数据库*之前应用业务规则。*

# c++ - 如何为指向数组的指针执行 memset？

> ID：12705649
> 
> 赞同：1
> 
> 时间：2012-10-03T09:33:33.580
> 
> 标签：c++, c, dynamic, memset

如何为指向数组的指针执行 memset？

```
int (*p)[2];

p=(int(*))malloc(sizeof(*p)*100);

memset(p,0,sizeof(*p)*100); 
```

这个分配正确吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T09:43:28.293

你可以使用`calloc`.

`calloc`将同时替换`malloc`和`memset`。

```
p = calloc(100, sizeof (*p)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:15:45.340

我会总结很多答案（尽管我忽略了一些有利于我自己偏好的风格变体）。

在 C 中：

如何使用malloc：

```
int (*p)[2] = malloc(100 * sizeof(*p)); 
```

如何使用memset：

```
memset(p, 0, 100 * sizeof(*p)); 
```

如何在一个声明中做到这两个：

```
int (*p)[2] = calloc(100, sizeof(*p)); 
```

在 C++ 中，除了您需要转换`malloc`and `calloc`:的结果外，同样是可能的`static_cast<int(*)[2]>(std::malloc(100 * sizeof(*p))`。

但是，C++ 提供了另一种分配方式：

```
int (*p)[2] = new int[100][2](); // like calloc.
delete[] p; // *not* delete p 
```

C++ 还提供`vector`，这通常很好，但不幸的是，您无法创建 C 样式数组的向量。在 C++03 中，您可以这样解决：

```
struct my_array {
    int data[2];
};

std::vector<my_array> p(100);
// no need to free/delete anything 
```

我不认为这会使元素归零，尽管我可能是错的。如果我是对的，那么你需要归零：

```
my_array initvalue = {0};
std::vector<my_array> p(100, initvalue); 
```

另一种表示 2 个整数的方法：

```
std::vector<std::pair<int,int> > p(100); 
```

如果您可以使用 Boost：

```
std::vector<boost::array<int, 2> > p(100); 
```

在 C++11 中：

```
std::vector<std::array<int, 2>> p(100); 
```

*我已经按照它们通常*的好坏的递增顺序列出了这些，所以请使用最后一个不受您正在工作的任何限制条件的限制。例如，如果您希望获取一个指向内部 2-int 数组的第一个元素的指针，并将其递增以获取指向第二个元素的指针，那么`std::pair`就退出了，因为它不能保证有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T09:44:26.883

优雅的方式：

```
typedef int int_arr_2[2];

int_arr_2* p;

p = malloc(sizeof(int_arr_2)*100);
memset(p,0,sizeof(int_arr_2)*100); 
```

最好的方法：

```
typedef int int_arr_2[2];

int_arr_2* p;

p = calloc(100, sizeof(int_arr_2)); 
```

calloc 与 malloc 不同，它保证所有字节都设置为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:44:33.810

`memset()`线是合适的。

对于 C，您[不需要 malloc cast](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)。
在 C++ 中，如果您仍想这样做，类型转换应为：

```
p = (int(*)[2]) malloc(sizeof(*p)*100);  // or `static_cast<...>
  // ^^^^^^^^^ 
```

但我建议改变你的使用方法`std::vector`。更清洁、更好和“半自动”：

```
std::vector<int*> vi(100);  // or std::vector vi(100, nullptr); 
```

使用原始指针的另一种方法是使用`new[]`：

```
int **p = new[100]();  // allocates and sets to 0 
```

但是您必须稍后通过解除分配来管理此内存`delete[]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T12:20:05.757

在 C（不是 C++）中，你会做

```
int (*p)[2] = malloc(sizeof(*p)*100);

memset(*p,0,sizeof(*p)*100); 
```

也就是说，变量可以用表达式初始化，`malloc`不需要（也不应该有）强制转换。然后`*p`是数组类型的“左值”，当传递给`memset`.

# c++ - 如何删除提升图的子图

> ID：12705650
> 
> 赞同：1
> 
> 时间：2012-10-03T09:33:38.533
> 
> 标签：c++, boost, boost-graph

以下代码取自[boost 家谱示例](http://www.boost.org/doc/libs/1_51_0/libs/graph/example/family-tree-eg.cpp)

我正在寻找一种简单的方法来删除子图

```
enum family { Jeanie, Debbie, Rick, John, Amanda, Margaret, Benjamin, N };
int main()
{
  using namespace boost;
  const char *name[] = { "Jeanie", "Debbie", "Rick", "John", "Amanda",
    "Margaret", "Benjamin"
  };

  adjacency_list <> g(N);
  add_edge(Jeanie, Debbie, g);
  add_edge(Jeanie, Rick, g);
  add_edge(Jeanie, John, g);
  add_edge(Debbie, Amanda, g);
  add_edge(Rick, Margaret, g);
  add_edge(John, Benjamin, g);

  // some code

  // Rick and his family left - I want to remove them from the chart

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-24T15:01:28.927

在本例中不能这样做。枚举族是图中顶点容器中的索引。因此，通过移除 Rick，John 将成为 Rick。

但是，如果将图形的定义更改为使用枚举值，则将遵循解决方案。

```
enum family { Jeanie, Debbie, Rick, John, Amanda, Margaret, Benjamin, N };
const char *name[] = { "Jeanie", "Debbie", "Rick", "John", "Amanda",
                       "Margaret", "Benjamin"
                     };
typedef boost::adjacency_list <boost::vecS
                             , boost::vecS
                             , boost::bidirectionalS
                             , family> Graph;

struct VisitorBFS : public boost::default_bfs_visitor {
    VisitorBFS(
        std::vector<boost::graph_traits<Graph>::vertex_descriptor>& container
    )
    : container(container) {}

    template <class Vertex, class Graph>
    void discover_vertex(const Vertex& v, const Graph& g) const
    {
        container.push_back(v);
    }

    std::vector<boost::graph_traits<Graph>::vertex_descriptor>& container;
};

void printFamily(const Graph& g)
{
    using namespace boost;
    graph_traits <Graph>::vertex_iterator i, end;
    graph_traits <Graph>::adjacency_iterator ai, a_end;

    for (boost::tie(i, end) = vertices(g); i != end; ++i) {
        std::cout << name[g[*i]];
        boost::tie(ai, a_end) = adjacent_vertices(*i, g);
        if (ai == a_end)
            std::cout << " has no children";
        else
            std::cout << " is the parent of ";
        for (; ai != a_end; ++ai) {
            std::cout << name[g[*ai]];
            if (boost::next(ai) != a_end)
                std::cout << ", ";
        }
        std::cout << std::endl;
    }
}

int main()
{
    using namespace boost;

    Graph g;
    add_vertex(Jeanie, g);
    add_vertex(Debbie, g);
    add_vertex(Rick, g);
    add_vertex(John, g);
    add_vertex(Amanda, g);
    add_vertex(Margaret, g);
    add_vertex(Benjamin, g);

    add_edge(Jeanie, Debbie, g);
    add_edge(Jeanie, Rick, g);
    add_edge(Jeanie, John, g);
    add_edge(Debbie, Amanda, g);
    add_edge(Rick, Margaret, g);
    add_edge(John, Benjamin, g);

    printFamily(g);

    // Rick and his family left - I want to remove them from the chart

    // First, find a subgraph from vertex Rick. Algorithm breadth_first_search
    // also goes through the start vertex, so Rick is included in result.
    std::vector<graph_traits<Graph>::vertex_descriptor> vertexes;
    breadth_first_search(g, Rick, visitor(VisitorBFS(vertexes)));

    // Then remove incoming edges because they are not removed automatically
    // along with vertexes, then remove vertexes. 
    for (std::vector<graph_traits<Graph>::vertex_descriptor>::iterator it = vertexes.begin(); it != vertexes.end();  ++it) {
        clear_in_edges(*it, g);
        remove_vertex(*it, g);
    }

    printFamily(g); 

    return 0;
} 
```

# java - 从 Mountain Lion 中删除 Java 7

> ID：12705651
> 
> 赞同：1
> 
> 时间：2012-10-03T09:33:41.390
> 
> 标签：java, macos, osx-mountain-lion

有人知道如何从 Mountain Lion 中删除 Java 7 吗？

安装它，没有正常工作，所以安装了 Java 6，现在一切正常。现在想摆脱 Java 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:50:32.073

完成了，我一直在搜索山狮，搜索从 mac 中删除 java 7，这与在山狮上做的一样：

[http://www.java.com/en/download/help/mac_uninstall_java.xml](http://www.java.com/en/download/help/mac_uninstall_java.xml)

解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:39:04.163

你看过你的Java首选项吗？/Applications/Utilities 我认为它不会允许您删除 Java 7，但它可以让您决定默认使用哪个版本。此外，如果您使用的是 Eclipse 等 IDE，您可以为不同项目的特定版本设置首选项。你能提供更多关于它不能正常工作的细节吗？

# ruby-on-rails - Rspec：测试视图和布局

> ID：12705652
> 
> 赞同：2
> 
> 时间：2012-10-03T09:33:41.567
> 
> 标签：ruby-on-rails, testing, rspec

我有一个模型，它保存`keywords`和元数据，这些元数据在标签内`description`呈现在`show`动作上。`<head>`我想测试`<meta>`标签是否在页面上以适当的内容呈现。

我可以轻松地进行控制器测试（检查渲染的内容），但由于测试意味着检查渲染的内容，我假设`view`测试实际上更适合这里。

问题是我需要在`show`打开布局渲染的情况下渲染模板以进行操作，因为`<meta>`标签是在后面渲染的。

所以问题是：

1.  我在这里尝试进行视图测试是否正确？

2.  如果是这样，我如何在测试视图时打开布局渲染？

我正在使用最新的可用`rspec-rails`gem。

# emacs - 是否有清除 Emacs 中“查找文件：”缓冲区的快捷方式？

> ID：12705655
> 
> 赞同：3
> 
> 时间：2012-10-03T09:33:49.943
> 
> 标签：emacs, keyboard-shortcuts

`Find File:`有什么方法可以快速清除缓冲区（ ）中的预填充文本`C-x C-f`？`M-Backspace`我发现每个元素都会很烦人，并且`CMD-a`（在 Mac 上）选择缓冲区中的所有文本，包括文本，这在点击删除时`Find File:`会引发错误。`Text is read-only`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T09:58:10.280

如果您不想编辑文本，可以忽略它。如果您开始输入`/`（对于完整路径）或`~`（对于 home），默认路径将变为灰色并被忽略。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T09:48:55.850

我建议`C-a C-k`（转到行首并杀死它 - 实际上与 OSX 相同）或`C-S-backspace`（kill-whole-line）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:40:00.000

如果您使用 ido，您将不再需要使用 M-Backspace（单独使用 Backspace 也会这样做）并且键入“~/”将直接将您带到主目录，而与当前路径无关。

所有你需要的是：

```
(require 'ido)
(ido-mode 'both) ;; for buffers and files 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:58:26.987

通常你不需要清除文本。

您可以在预填充文本之后键入文件名：

```
C:/work/mydir/C:/temp/anotherdir 
```

它也适用于 Windows 和 Unix。

# opengl - 如何在 openGL 中扩展我的视口以正确剪切打印的文本？

> ID：12705658
> 
> 赞同：1
> 
> 时间：2012-10-03T09:34:01.163
> 
> 标签：opengl, text, printing, glut, coordinate-systems

我正在使用此代码在带有 GLUT 的 openGL 中绘制文本：

代码（初始化部分）将我的原点（0,0）设置为左上角并保持适当的基于屏幕分辨率的协调系统：

```
 glViewport(0, 0, x, y);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, x, y, 0, -1, 1);
    glMatrixMode(GL_MODELVIEW); 
```

代码（印刷部分）：

```
void drawtext(GLfloat x, GLfloat y, const char* string )
{
    glRasterPos2f(x,y);
    while ( *string != '\0' )
         glutBitmapCharacter(p_glutfont,static_cast<int>(*string++));
} 
```

如果不仅当 X 和 Y 以负坐标开始时（由于带有作为标签打印的文本的对象部分在视图之外，那么整个文本都没有被绘制，那么一切都将是完美的。让我们想象一下我有一个上面带有文本标签的对象，它从左上角 x = -40, y = 40 进入视图：

```
 X axis      window
 axis Y  ----------------------------
        | y=40                       |
 x=-40__|_________                   |
    |Text to print|                  |
    |_____________|                  |
        |                            |
        |                            |
        |____________________________| 
```

直到完全从 X => 0 坐标中绘制文本才被打印。此外，当必须在右侧剪切文本时，也不存在此问题 - 然后正确打印 - 这是我意识到它与文本的初始位置有关的地方。

我的问题是 - 我怎样才能正确地将我的视口/屏幕映射扩展到：

1) 保留从左上角 (0,0) 到右下角 (height,width) 的屏幕坐标 2) 在打印文本期间在内部扩展这些值 - 所以文本会被剪裁而不是消失？

虽然我做了我的研究，但我现在两天都无法找到任何解决方案。我尝试使用 glViewport 和 glOrtho，但我尝试过的任何更改和方法（例如将 glViewport 设置为 -x、-y、x*2、y*2）都无法解决问题 - 那些总是弄乱我的屏幕协调系统这对于保持基于窗口分辨率至关重要。

PS：我做了进一步的研究，发现了这篇文章[http://www.opengl.org/archives/resources/faq/technical/clipping.htm](http://www.opengl.org/archives/resources/faq/technical/clipping.htm)。

**10.070 如何绘制在窗口左边缘或下边缘之外具有初始 glRasterPos() 的 glBitmap() 或 glDrawPixels() 图元？**

> 当光栅位置设置在窗口之外时，它通常在视图体积之外，随后被标记为无效。渲染 glBitmap 和 glDrawPixels 基元不会出现无效的光栅位置。因为 glBitmap/glDrawPixels 会在光栅位置的上方和右侧产生像素，所以似乎无法渲染这种类型的被窗口左侧和/或底部边缘裁剪的图元。
> 
> **但是，这里有一个常用的技巧：将光栅位置设置为视图体积内的有效值。然后进行以下调用：**

```
 glBitmap (0, 0, 0, 0, xMove, yMove, NULL); 
```

> 这告诉 OpenGL 渲染一个无操作位图，但将当前光栅位置移动 (xMove,yMove)。您的应用程序将提供 (xMove,yMove) 值，将光栅位置置于视图体积之外。使用 glBitmap() 或 glDrawPixels() 执行此调用以进行所需的渲染。

可悲的是——我不能把这个建议付诸实践——一旦我使用它——文本就完全丢失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:40:47.270

> 这是我意识到它与文本的初始位置有关的地方。

几乎。glRasterPos 是一个光栅绘图操作命令，您放入其中的任何位置都会通过转换管道。如果该点位于裁剪体积之外（不是视口！），它将被丢弃，并且所有进一步的光栅绘制操作都将被禁用，直到指定了未裁剪的新 glRasterPos。

简单且推荐的解决方案是根本不使用光栅绘图操作，因为它们速度慢、支持差，并且已从后来的 OpenGL 中全部删除。glutBitmapCharacter 正在使用光栅绘图操作。

改用纹理映射字体或描边字符。谷歌发现了无数关于这些的信息。

# iphone - Xcode 4.2 项目层次结构与 SVN 不匹配

> ID：12705659
> 
> 赞同：-1
> 
> 时间：2012-10-03T09:34:11.960
> 
> 标签：iphone, ios, svn, xcode4.2

Xcode 4.2 中的每个项目都包含：
- info plists
- xcodeproj 文件
- 文件夹“项目”

当我将它上传到 SVN 时，所有东西都放在一个地方 - 有什么好方法来处理它吗？还是我应该分别处理每个项目？

编辑：可能我写的不清楚问题是当我签出项目时，我必须在 plist 文件中修复自己的路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:04:04.140

了解和理解您的工具如何工作是一个很好的做法。据我所知，问题的出现是因为对您的版本控制工具的理解不足以及它与 xcode 并不真正相关的问题。

Apache Subversion 有一个很棒的手册：[SVNBook](http://svnbook.red-bean.com/en/1.7/index.html)；我强烈建议您查看描述基础知识的章节：

[**第 1 章基本概念**](http://svnbook.red-bean.com/en/1.7/svn.basic.html)

[**第 2 章基本用法**](http://svnbook.red-bean.com/en/1.7/svn.tour.html)

# jquery - 如何使用jQuery将变量中的图像附加到列表中

> ID：12705660
> 
> 赞同：1
> 
> 时间：2012-10-03T09:34:10.967
> 
> 标签：jquery, jquery-mobile

我尝试过这种方式，但没有奏效：

```
 var imglunch = new Image();
  imglunch.src = "../images/faciliteit_lunch.png";
  var imgdiner = new Image();
  imgdiner.src = "../images/faciliteit_diner.png";
  $('.greenfluxlist').append('<li id="' + element.Identifier + '"><a href="bla.html" rel="external">' + imglunch + imgdiner + '</a></li>'); 
```

有谁知道如何添加它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:42:48.997

简单地让我们使用 jQuery 函数来创建你的 img 元素：

```
var imglunch = $( '<img />' );
imglunch.attr( 'src', '../images/faciliteit_lunch.png' );

var imgdiner = $( '<img />' );
imgdiner.attr( 'src', '../images/faciliteit_diner.png' );

$('.greenfluxlist').append('<li id="' + element.Identifier + '"><a href="bla.html" rel="external"></a></li>');
$( '#' + element.Identifier + ' > a' ).append( imglunch ).append( imgdiner ); 
```

或者您可以一次性附加您的 html 代码：

```
$('.greenfluxlist').append('<li id="' + element.Identifier + '"><a href="bla.html" rel="external"><img src="../images/faciliteit_lunch.png" /><img src="../images/faciliteit_diner.png" /></a></li>'); 
```

# php - For循环内的PHP If语句

> ID：12705662
> 
> 赞同：0
> 
> 时间：2012-10-03T09:34:18.167
> 
> 标签：php, loops

以下代码给出了语法错误，因为`IF`. 如何在不删除 IF 语句的情况下解决此问题？

```
<?php
    for ($i = 1; $i < 6; $i++){ 
        $data .= 'h'.$i.'{'.    
            if ( !empty ($size) ) {.
            'font-size: ' .$size. ';'.
            }.
        '}';
    }
?> 
```

**错误：**

```
Parse error: syntax error, unexpected 'if' (T_IF) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:37:08.117

您不能`if`在表达式中使用语句，因为它在语法上是错误的，并且语句本身不返回值。`?:`使用可以嵌套在那里的三元运算符：

```
$data .= 'h' . $i . '{' . (!empty($size) ? "font-size: $size" : '') . '}'; 
```

您还可以受益于使用双引号插入变量而不是弄乱`.`运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:36:29.690

```
for ($i = 1; $i < 6; $i++) {
    $data .= "h$i{" . (!empty($size) ? "font-size: $size;" : "") . "}";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:38:05.117

如果是内联的，您不能将完整的字符串串起来，因此以下任一方法都可以解决此问题：

```
for ($i = 1; $i < 6; $i++)
{//ternary
    $data .= 'h'.$i.'{'.( !empty ($size) ? 'font-size: ' .$size. ';' : '').'}';
} 
```

这与写作相同：

```
for ($i = 1; $i < 6; $i++)
{
    $data .= 'h'.$i.'{';
    if (!empty ($size))
    {
        $data .= 'font-size: ' .$size. ';';
    }
    $data .= '}';
} 
```

好吧，为了 100% 准确，三元运算符 concats `''`if`$size`为空。三元语法如下：`[evaluate statement] ? [if true] : [else]`. 因此，该代码的真正完整等价物是：

```
for ($i = 1; $i < 6; $i++)
{
    $data .= 'h'.$i.'{';
    if (!empty ($size))
    {
        $data .= 'font-size: ' .$size. ';';
    }
    else
    {
        $data .= '';
    }
    $data .= '}';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T09:38:51.463

我认为应该没有错误：

```
<?php
    for ($i = 1; $i < 6; $i++){ 
        $data .= 'h'.$i.'{' ;
            if ( !empty ($size) ) {
           $data .= 'font-size: ' .$size. ';';
            }
        $data .='}';
    }

?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T09:36:48.610

您不能`if`在字符串连接中使用，但可以使用短代码：

```
for ($i = 1; $i < 6; $i++){ 
        $data .= 'h'.$i.'{'.(!empty($size) ? ('font-size: ' .$size. ';') : '').'}';
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T09:37:18.713

```
for ($i = 1; $i < 6; $i++){ 
    $data .= 'h'.$i.'{'.((!empty ($size))?'font-size: {$size}':'').'}';
} 
```

解释：

以下构造称为“三元 if”：

```
$x = ($test == "Y")?"Yes!":"No!"; 
```

和相同：

```
if ($test == "Y"){
  $x="Yes!";
} else {
  $x="No!";
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-03T09:44:11.177

您正在向以 . 开头的行中的字符串添加内容`$data`。

两种解决方案：

1）停止添加东西，开始你的if，在里面添加更多东西，停止if，然后在新语句中添加其余部分。

```
$data .= 'h'.$i.'{';

if ( !empty ($size) ) {.
    $data .= 'font-size: ' .$size. ';'.
}.

$data .= '}'; 
```

1.  使用三元运算符。

`$data .= 'h'.$i.'{' (!empty($size) ? 'font-size: ' .$size. ';' : ''). '}';`

三元运算符将第一个参数评估为真或假，并返回第二个或第三个参数，就像函数调用一样。

注意：过多使用三元运算符会使您的代码不可读，尤其是在彼此内部使用时。您始终可以将其替换为像上面这样的单独的 IF 构造，以获得更好的可读性。另外，除了返回两个值之一之外，三元运算符不能轻易扩展以做更多的事情。

# php - Zend_Form 和 RESTful HTTP 请求

> ID：12705668
> 
> 赞同：0
> 
> 时间：2012-10-03T09:34:45.607
> 
> 标签：php, http, zend-framework, nginx, zend-form

我在 Zend 中实现了一个搜索表单（后端为 SOLR）。为了向用户提供更多控制权，我添加了一个用于应用某些内容过滤器的多选框。

事情在以下步骤中（请耐心等待）：

1.  发出请求，类似于`/search/?q=bla&filter=1`

2.  该请求在控制器中被重写，以便于：`/search/query/bla/filter/1`

3.  如果用户移除过滤器1，添加过滤器2并提交请求变为：`/search/query/bla/filter/1?q=bla&filter=2`

我将如何使用它正确地创建一个宁静的请求。这里的问题是使用控制器的 getRequest() 功能我还将获得第一个过滤器的值，这意味着我无法知道我可以丢弃哪个过滤器。

* * *

所以，**总结一下**：如何正确使用 Zend_Form 创建 RESTful HTTP 请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:46:37.417

IMO，您正在尝试解决一个不存在的问题。您正在研究美学而不是 RESTful 合规性。

REST 告诉您需要识别资源，而不是您的资源链接应该看起来不错（在某种程度上）。但是由于您的搜索是一种过滤器，因此使用 QueryParam 是**完全**可以接受的。

我认为，您在 REST 中使用“搜索”一词是错误的。搜索不是资源（至少在您的情况下）。

您应该通过执行以下操作来隐藏搜索实现：

```
GET /articles?q=foo&filter=1 
```

**您构建过滤器标准的方式应该无关紧要。**

或者您可能想将“搜索”定义为资源（​​实际上是 IIRC）。

```
POST /articles/search/
"{
  "query" : "foo",
  "filter" : "bar"
}" 
```

会导致类似：

```
Location: /articles/search/a125f41fbc135d 
```

`a125f41fbc135d`用于识别搜索资源的搜索标识符在哪里。

# actionscript-3 - 1180：调用可能未定义的方法 DisplayObject

> ID：12705676
> 
> 赞同：1
> 
> 时间：2012-10-03T09:35:04.063
> 
> 标签：actionscript-3

几天前我创建了一个简单的点击游戏，出现以下错误

> 1180：调用可能未定义的方法`DisplayObject`。

这是我的代码：

```
poster.addEventListener(MouseEvent.MOUSE_DOWN, clickposter);
stop();
function clickposter (event:MouseEvent):void
{
    removeChild(DisplayObject(event.target));
} 
```

现在奇怪的是，这段代码起初工作得很好，但是一旦我向我的项目添加了一个文档类，它就停止了工作并给了我`1180`错误。

我的文档类几乎是空的：

```
package 
{
    import flash.display.MovieClip;
    public class Main extends MovieClip
    {
        public function Main()  
        {
        }
    }
} 
```

我已经搜索了一下，但无法解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:38:36.030

将 DisplayObject 导入您的文档类将解决此问题：

```
import flash.display.DisplayObject; 
```

恐怕我不知道究竟是什么导致了这个问题，因为海报对象的代码与文档类代码是分开的（我假设），抱歉这不是最有用的答案，但它至少可以让你的代码工作.

# java - MongoDB、Java 和 Freemarker 模板 (FLT)

> ID：12705679
> 
> 赞同：0
> 
> 时间：2012-10-03T09:35:09.727
> 
> 标签：java, mongodb, freemarker

我正在处理这个 Web 项目：Java、MongoDB 和 Freemarker 模板 (FTL)

数据被发送到 Map 中的 FTL 页面。

现在我想知道是否可以将 Mongo 查询的结果直接转换为 Map，然后将其发送到 FTL 模板。

例如：我想查询集合中的所有成员并将其放入 Map 以在 FTL 模板中使用。

```
 public Map<String, Object> getAllMembers() {
            DBCollection collection =database.getCollection("members");
            BasicDBObject query = new BasicDBObject();
            DBCursor cur = collection.find(query);
            DBObject one = cur.next();

            HashMap<String,Object> result = one;

            return result;
        } 
```

或者这是不可能的，我需要遍历将每个值放入 M​​ap 的结果？像这样：

```
 public Map<String, Object> getAllMembers(f){
            DBCollection collection = database.getCollection("members");
            DBCursor cursor = collection.find();
            Map<String,Object> itemMap = new HashMap<String, Object>();
            DBObject one;
            while(cursor.hasNext()) {
                one = cursor.next();
                itemMap.put((String)one.get("id"),one.get("name"));
            }
            return itemMap;
        } 
```

感谢您的任何帮助和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:28:07.943

也许这就是你需要的：

```
public Map<String, Object> fetch(DB db, String collName, String key, String value){

    Map<String,Object> result = new HashMap<String, Object>();

    DBCollection coll = db.getCollection(collName);
    BasicDBObject query = new BasicDBObject();
    query.put(key, value);
    DBCursor cur = coll.find(query);
    while(cur.hasNext()) {
        result.putAll(cur.next().toMap());
    }
    return result;
} 
```

# django - 如何使用 django 以 ascii 编码将图像保存在 postgres bytea 字段中

> ID：12705680
> 
> 赞同：2
> 
> 时间：2012-10-03T09:35:09.367
> 
> 标签：django, postgresql

我试图通过将图像转换为base64并将其保存到postgresql中的'bytea'字段来在django中保存图像。我设法做到了，但字符串是用 UTF8 编码的。有没有一种方法可以仅针对该字段编码为 ascii？

这是我的自定义 Base64 模型字段的代码：

```
import base64
from django.db import models

class Base64Field(models.TextField):

    def contribute_to_class(self, cls, name):
        if self.db_column is None:
            self.db_column = name
        self.field_name = name + '_base64'
        super(Base64Field, self).contribute_to_class(cls, self.field_name)
        setattr(cls, name, property(self.get_data, self.set_data))

    def get_data(self, obj):
        #return obj.data_base64 #this works if the image is ascii-encoded
        return base64.b64decode(getattr(obj, self.field_name)) #this also works well with the setter below

    def set_data(self, obj, data):
        setattr(obj, self.field_name, base64.encodestring(data)) #is encoded to UTF8

    def db_type(self, connection):
        return 'longtext' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:52:47.750

*使用`text`带有 base64 编码文本的字段，*或者**将*二进制数据存储在`bytea`字段中。不要在`bytea`字段中存储 base64 编码的二进制文件，这会让人感到困惑。*

 *我推荐使用`bytea`and `bytea_output = 'hex'`（默认在 9.0 及更高版本中）。*

# java - View 和 Presenter 之间的 MVP 和 Package Cycle

> ID：12705687
> 
> 赞同：2
> 
> 时间：2012-10-03T09:35:31.573
> 
> 标签：java, gwt, mvp

我刚刚参加了一个他们使用 GWT 和 MVP 设计的项目。他们使用以下结构：

```
client.mvp.presenter (contains interfaces)
client.mvp.presenter.impl
client.mvp.view (contains interfaces)
client.mvp.view.impl 
```

在代码中，Presenter 知道它的视图，但视图也知道它的 Presenter，所以我在 Presenter.impl 和 view.impl 之间的包中找到了循环

再想一想，我问自己为什么要`impl`链接自己而不是只引用接口，从而避免循环。

但我也认为“为什么视图应该知道它的演示者？” 并且查看一些谈论 MVP 的网站，如果视图和演示者应该相互了解，则不清楚。

什么是最好的？

*   要求他们使用接口去除循环？
*   要求`presenter`从视图中删除并让演示者直接处理用户交互？
*   什么都不做，MVP 中的这些包之间通常有循环

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:39:28.243

实际上，虽然演示者 impl [1] 现在需要视图（界面），但演示者界面通常不需要。

典型的模式是：

```
interface FooPresenter {
   // methods called by the view (generally in response to user interaction)
   void doSomething(String foo);
}

interface FooView {
   /** Tells the view which presenter instance to call back. */
   void setPresenter(FooPresenter presenter);

   // methods called by the presenter to control the view
   void showSomething(String foo);
}

class FooPresenterImpl implements FooPresenter {
    private final FooView view;

    FooPresenterImpl(FooView view, /* other dependencies here */) {
       this.view = view;
    }

    // could also be the start() method of com.google.gwt.activity.shared.Activity
    public void init() {
       view.setPresenter(this);
    }

    // optional; could be called from onStop() and onCancel() if using Activity
    public void dispose() {
       view.setPresenter(null);
    }
} 
```

实际上，我通常将 Presenter 接口声明为嵌套在视图接口中：

```
interface FooView extends IsWidget {

    interface Presenter {
       // ...
    }

    void setPresenter(Presenter presenter);

    // ...
}

class FooPresenter extends AbstractActivity implements FooView.Presenter {
   // ...
} 
```

Wrt impls 知道 impls，最重要的是演示者 impl 不引用视图 impl，因为它（通常）会阻止在没有`GWTTestCase`（模拟视图）的情况下对其进行单元测试。反过来问题不大，但是您并不真的需要演示者界面与 impl，对吗？

[1] 从技术上讲，它可能是视图 impl，但通常是相反的，因此视图可以比演示者更长寿（演示者通常是轻量级的，与视图相反，由于 DOM 操作，视图可能具有不可忽略的创建时间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:18:45.033

使用 MVP，presenter 和 view 需要知道对应的*接口*：

*   演示者通常需要更新视图
*   当事件（例如ValueChangeEvents）发生时，视图调用presenter 方法。

> 要求他们使用接口去除循环？

是的。

> 要求从视图中删除演示者并让演示者直接处理用户交互？

不，那不会是MVP。

> 什么都不做，MVP 中的这些包之间通常有循环

必须保留的循环是实例化循环：您不能*同时*将演示者作为视图的构造函数参数，*并将*视图作为演示者的构造函数参数。这在基于构造函数的依赖注入中变得尤为明显，并且在 Java 中理论上是不可避免的。但是您可以选择使用 setter（至少在一侧），或者使用带有构造函数注入的工厂/[提供程序。](http://code.google.com/p/google-guice/wiki/InjectingProviders)

# java - 不是 和 相同？

> ID：12705693
> 
> 赞同：8
> 
> 时间：2012-10-03T09:35:42.707
> 
> 标签：java, generics, collections, type-parameter

我对以下两个方法声明感到困惑：

```
 private <U, T extends U> T funWorks(T child, U parent) {
      // No compilation errors
    }

    private <T, U super T> T funNotWorks(T child, U parent) {
      // compilation errors    
    } 
```

以上两个都不应该有效吗？类比 **如果 U 是 T 的父级，则 T 是 U 的子级**。那为什么第二个会出现编译错误？

编辑:: 我认为，`T extends T`两者`T super T`都是有效的。对 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T09:46:23.867

*   类型参数（您的示例）只能使用扩展（[JLS #4.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.4)）：

```
TypeParameter:
    TypeVariable TypeBoundopt

TypeBound:
    extends TypeVariable
    extends ClassOrInterfaceType AdditionalBoundListopt

AdditionalBoundList:
    AdditionalBound AdditionalBoundList
    AdditionalBound

AdditionalBound:
    & InterfaceType 
```

*   通配符可以使用`extends`或`super`（[JLS #4.5.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)）：

```
TypeArguments:
    < TypeArgumentList >

TypeArgumentList: 
    TypeArgument
    TypeArgumentList , TypeArgument

TypeArgument:
    ReferenceType
    Wildcard

Wildcard:
    ? WildcardBoundsopt

WildcardBounds:
    extends ReferenceType
    super ReferenceType 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T09:45:33.677

您不能将命名泛型与 super 绑定。另请参阅[此](https://stackoverflow.com/questions/2800369/bounding-generics-with-super-keyword)stackoverflow 帖子。

# matlab - 在matlab中读取包含二进制数据的文本文件作为单个矩阵

> ID：12705697
> 
> 赞同：10
> 
> 时间：2012-10-03T09:35:52.010
> 
> 标签：matlab, file-io, matrix

我有一个文本文件，其中包含以下方式的二进制数据：

```
00000000000000000000000000000000001011111111111111111111111111111111111111111111111111111111110000000000000000000000000000000
00000000000000000000000000000000000000011111111111111111111111111111111111111111111111000111100000000000000000000000000000000
00000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111100000000000000000000000000000000
00000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000
00000000000000000000000000000000000011111111111111111111111111111111111111111111111111111111100000000000000000000000000000000
00000000000000000000000000000000000000011111111111111111111111111111111111111111111111111111100000000000000000000000000000000
00000000000000000000000000000000000000011111111111111111111111111111111111111111111111000111110000000000000000000000000000000
00000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111110000000000000000000000000000000
00000000000000000000000000000000000000000000111111111111111111111111111111111111110000000011100000000000000000000000000000000
00000000000000000000000000000000000000011111111111111111111111111111111111111111111111100111110000000000000000000000000000000
00000000000000000000000000000000000111111111111111111111111111111111111111111111111111110111110000000000000000000000000000000
00000000000000000000000000000000001111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000
00000000000000000000000000000000000000001111111111111111111111111111111111111111111111000011100000000000000000000000000000000
00000000000000000000000000000000000000001111111111111111111111111111111111111111111111000011100000000000000000000000000000000
00000000000000000000000000000000000001111111111111111111111111111111111111111111111111111111000000000000000000000000000000000
00000000000000000000000000000000000000011111111111111111111111111111111111111111111110000011100000000000000000000000000000000
00000000000000000000000000000000000000000000011111111111111111111111111111111111100000000011100000000000000000000000000000000
00000000000000000000000000000000000000111111111111111111111111111111111111111111111111110111100000000000000000000000000000000 
```

请注意，每个 1 或 0 都是独立的，即值不是十进制的。我需要找到文件的按列总和。总共有 125 列，有 840946 行。

我试过`textread`,`fscanf`和其他一些 matlab 命令，但结果是它们都以十进制格式读取每一行并创建一个`840946x1`数组。我想创建一个`840946x125`矩阵来计算列和。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:51:52.447

您可以使用 textread 来做到这一点。只需读取字符串，然后使用 sscanf 处理它们，一次一个数字

```
A = textread('data.txt', '%s');
ncols = size(A, 1);
nrows = size(A{1}, 2);
A = reshape(sscanf([A{:}], '%1d'), nrows, ncols); 
```

请注意，现在 A 已转置，即您有 125 行。

然后简单地计算按列的总和

```
colsum = sum(A); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T10:15:08.070

这是一个有点hack-ish的方法：

```
A = textread('data.txt', '%s');  

colsum = sum(cat(1,A{:})-'0') 
```

分解：

1.  `textread`将每行 0 和 1 读取为单个字符串。`A`因此将是一个单元串，每个元素等于一个长度为 125 的字符串。
2.  `cat(1,A{:})`会将单元格字符串连接成大小为 840946×125 的“普通”Matlab 字符数组。
3.  从包含 0 和 1 的任何字符数组中减去 ASCII 值“0”将返回它们的数字表示。例如，`'a'-0 = 97`小写“a”的 ASCII 值。
4.  `sum`最终将对该数组的列求和。

# c# - Global.asax 文件中仅触发一次的事件

> ID：12705698
> 
> 赞同：1
> 
> 时间：2012-10-03T09:35:52.857
> 
> 标签：c#, asp.net-mvc, events

在 MVC Global.asax 文件中，我们可以看到`Application_Start`该事件仅触发一次的位置。但是该会话在此处尚未激活/可用。所以我的问题是，Global.asax 文件中是否有任何事件只触发一次并且会话也可用？
我问这个的原因是因为，我使用`ExpandoObject`
例如：

```
 public static dynamic Data
    {
        get
        {
            #region FAILSAFE
            if (HttpContext.Current.Session[datakey] == null)
            {
                HttpContext.Current.Session[datakey] = new ExpandoObject();
            }
            #endregion

            return (ExpandoObject)HttpContext.Current.Session[datakey];
        }
    } 
```

我想用 null 值一次初始化我的所有 ExpandoObject：

```
MyExpando.Data.UserInformation = null;  
MyExpando.Data.FolderInformation = null; 
```

这就是为什么我正在寻找一个只触发一次的事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:39:40.073

```
protected void Session_Start(object sender, EventArgs e)
{
    // Will fire once when a new user session is created.

    // Contrary to Application_Start this event could run multiple
    // times during the AppDomain lifetime but that will ensure you 
    // that all users have the required data stored into the session.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:45:38.587

它是您正在寻找的会话开始事件..

# java - 不同线程中的休眠 AssertionFailure

> ID：12705700
> 
> 赞同：4
> 
> 时间：2012-10-03T09:35:55.203
> 
> 标签：java, multithreading, hibernate, assertions

我通过一个会话连接到我的数据库。在我的整个程序中，我总是有相同的会话。我的线程“1”从数据库中捕获主要数据。必须允许用户取消此线程。因此，如果用户经常或快速按下取消按钮（这是我的解释），则会发生以下错误：

```
ERROR org.hibernate.AssertionFailure - HHH000099: an assertion failure occured (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session) 
org.hibernate.AssertionFailure: possible non-threadsafe access to the session 
```

如果我在线程“1”完成后取消在后台运行的线程“2”并尝试从数据库加载另一个主数据集，则会发生相同的错误。

我在我的两个线程中使用相同的会话失败了吗？

解决此类问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:43:19.253

每个线程都应该从 Hibernate 会话工厂获取自己的会话。

> 实现者并不是线程安全的。相反，每个线程/事务都应该从 SessionFactory 获得自己的实例。

请参见此处：[休眠会话 JavaDoc](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html)

当您“取消”一个线程时 - 它应该进行自己的清理，例如事务回滚、会话关闭等。

# iphone - iPhone 5 的图像命名约定

> ID：12705702
> 
> 赞同：5
> 
> 时间：2012-10-03T09:36:00.267
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

什么是**iPhone 5的图像****命名约定**，例如视网膜屏幕的 @2x。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:37:55.537

这是一样的。@2x 仅表示它是视网膜图像。

唯一的区别是启动屏幕的 568@2x（或其他任何东西），但 Xcode 无论如何都会为您重命名该文件。

继续使用@2x.png

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:25:55.530

到目前为止，他们还没有发布任何有关 iPhone5 图片的官方文档。

你可以这样做。

```
 if(UI_USER_INTERFACE_IDIOM()  == UIUserInterfaceIdiomPhone && [[UIScreen mainScreen] bounds].size.height * [UIScreen mainScreen].scale >= 1136)
{
//Write the code here for iPhone5 Image.
}
else
{
//this is for unto 4th gen iPhone
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T10:29:25.660

iPhone 5 上的图像没有特定的命名约定。Default-568h@2x 将在 iPhone 5 或 iPod Touch 5G 发布时显示。这也将启用您的应用程序的非信箱模式。对于其他 fe 背景图像，如果您想涵盖两种屏幕分辨率，则必须灵活设计。当您构建 iPhone 4s 应用程序时，请确保背景图像可以拉伸到 iPhone 5 大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T11:26:34.240

> 它是一样的。@2x 仅表示它是视网膜图像。
> 
> 唯一的区别是启动屏幕的 568@2x（或其他任何东西），但 Xcode 无论如何都会为您重命名该文件。
> 
> 继续使用@2x.png

我必须补充一点，如果您查看模拟器，图片可能会拉伸！您可以通过选中“自动布局”框（如果您使用情节提要）来解决此问题，我也有一些问题，也许这是一个错误，希望可以修复...

![改变大小](../Images/8218d0357d7f0542d97a49cd54a9d501.png)

在情节提要或 .xib 上，您可以更改控制器的大小，如下所示：

![在此处输入图像描述](../Images/dfaa607858931f63fc04977272679364.png)**

# java - 'Set = new HashSet' 还是'HashSet = new Hashset'？

> ID：12705707
> 
> 赞同：1
> 
> 时间：2012-10-03T09:36:25.667
> 
> 标签：java, generics, collections, constructor, initialization

> **可能重复：**
> [List 与 ArrayList 变量类型？](https://stackoverflow.com/questions/4062982/list-versus-arraylist-variable-type)

我`HashSet`在我的程序中初始化了一个这样的：

`Set<String> namesFilter = new HashSet<String>();`

如果我像这样初始化，这在功能上有什么不同吗？

`HashSet<String> namesFilter = new HashSet<String>();`

我已经阅读[了](http://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html)关于集合接口的这篇文章，并且我了解接口（嗯，除了它们在这里的使用）。我读过这段来自 Effective Java 的[摘录](http://my.safaribooksonline.com/9780137150021/ch08lev1sec8)，也读过这个 SO [question](https://stackoverflow.com/questions/3715209/when-defining-set-set-new-hashset-is-set-an-instance-of-interface-or-clas)，但我觉得一点也不聪明。

Java 中是否有最佳实践，如果有，为什么？`Set`我的直觉是，在我的第一个示例中，它使转换为不同类型的内容变得更容易。但是话又说回来，你只会转换为一个集合，你可以通过重新构建它来转换它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:41:58.650

我认为在具体类型上使用接口是更好的做法，即

```
Set<String> strings = new HashSet<String>(); 
```

通过这样做，您承诺只使用`Set`界面提供的功能。如果您决定想要不同的性能特征（例如，如果您想使用 a`TreeSet`代替），这可以更容易地更换您在以后使用的那种集合，而不用担心破坏您的代码。

# web-services - 我没有找到如何在 powershell 中通过 http autentification 然后使用 web 服务（莲花/多米诺）

> ID：12705708
> 
> 赞同：1
> 
> 时间：2012-10-03T09:36:25.377
> 
> 标签：web-services, http, powershell

我们这里有一个我想与 powershell 一起使用的 domino/lotus webservices。

问题是在webservices lotus admin 面前问一个http autentification。

我怎样才能使用这个网络服务？？

在这里，我首先尝试废弃第一页并获取 cookie。

```
$url = "http://xxxxxxx/names.nsf?Login"

$CookieContainer = New-Object System.Net.CookieContainer

$postData = "Username=user***&Password=pss***"

$buffer = [text.encoding]::ascii.getbytes($postData)

[net.httpWebRequest] $req = [net.webRequest]::create($url)
$req.method = "POST"
$req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
$req.Headers.Add("Accept-Language: en-US")
$req.Headers.Add("Accept-Encoding: gzip,deflate")
$req.Headers.Add("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7")
$req.AllowAutoRedirect = $false
$req.ContentType = "application/x-www-form-urlencoded"
$req.ContentLength = $buffer.length
$req.TimeOut = 50000
$req.KeepAlive = $true
$req.Headers.Add("Keep-Alive: 300");
$req.CookieContainer = $CookieContainer
$reqst = $req.getRequestStream()
$reqst.write($buffer, 0, $buffer.length)
$reqst.flush()
$reqst.close()
[net.httpWebResponse] $res = $req.getResponse()
$resst = $res.getResponseStream()
$sr = new-object IO.StreamReader($resst)
$result = $sr.ReadToEnd() 
```

这似乎可行，但现在不知道如何将 cookie 与 webservicesproxy 一起使用？？？或者也许是更好的方法？

ps：我成功地将它与 c# + visualstudio 一起使用（只是类引用是自动构建的，我不理解其中的一半，但它允许我在生成的 webservice 上使用 .CookieContenaire ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:41:54.510

您是否尝试过使用内置的 webservice cmdlet？

```
 $webservice = New-WebServiceProxy -Uri "http://xxx/names.nsf?Login" -Credential (Get-Credential) 
```

# powershell - 加密 CSV 文件并使用 Powershell 读取它

> ID：12705709
> 
> 赞同：0
> 
> 时间：2012-10-03T09:36:26.827
> 
> 标签：powershell, encryption

我有一个获取 csv 文件内容的 powershell 脚本。我希望这个 csv 文件被加密，所以用户不能改变它的内容。如何才能做到这一点 ？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T17:41:42.137

没有必要这样做。只需计算校验和并在脚本中对其进行硬编码。当校验和未预定义时停止处理 csv 文件。

如果你仍然想做你的逻辑，例如[EncriptDecript](http://gallery.technet.microsoft.com/scriptcenter/PowerShell-Script-410ef9df)函数。

# django - Django-models：具有选择属性的 CharField

> ID：12705723
> 
> 赞同：0
> 
> 时间：2012-10-03T09:37:19.553
> 
> 标签：django, django-models

为什么它不起作用？

```
DESCSPECSOFT = (
    (u'99','-'),
    (u'Load',u'Load'),
    (u'Script',u'Script'),
    (u'Load & Script',u'Load & Script'),
    )   
descSpecSoft = models.CharField(choices=DESCSPECSOFT, default=99,blank = False,null = False) 
```

谢谢

编辑：

SOry for forms而不是模型我的错误

EDIT2：“选择是字符串，但默认值是整数。您没有提供有关“不工作”意味着什么的任何信息。”

不工作=在模板中它不是必需的字段

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:55:57.667

对了，我们来数一数这里的问题。

1.  你用过`forms.CharField`，不存在。
2.  即使它确实存在，这也是一个模型，因此您应该使用模型字段而不是表单字段。
3.  您`DESCSPECSOFT`在定义它之前已经使用过。
4.  选项是字符串，但默认是整数。
5.  您没有提供任何有关“不工作”意味着什么的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:49:03.610

尝试 forms.ChoiceField() 而不是默认尝试 initial='99'

并且默认情况下还需要表单字段，并且它们不接受 null 或空白，请尝试 required=True 或 required=False

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:27:42.610

```
_CharField = partial(models.CharField, max_length=255)

DESCSPECSOFT = model_utils.Choices(
    (u'99','-'),
    (u'load',u'Load'),
    (u'script',u'Script'),
    (u'load_script',u'Load & Script'),
)
descSpecSoft = _CharField(choices=DESCSPECSOFT, default=DESCSPECSOFT.load) 
```

注意空白和空值被删除，因为它是默认需要的

# php - RedBean 数据未同步

> ID：12705727
> 
> 赞同：1
> 
> 时间：2012-10-03T09:37:31.133
> 
> 标签：php, orm, redbean

所以，我一直在尝试在我最近的项目中使用 RedBean PHP，现在我遇到了这个奇怪的问题。

我有一个简单的数据结构，省和国家，我有这个代码来保存省数据到我的数据库：

```
$app->post('/admin/provinces/add', function () use ($app)
{
    $province = R::dispense('province');
    $province->name = $app->request()->post('name');

    $country = R::load('country', $app->request()->post('country_id'));
    $country->ownProvince[] = $province;

    $errors = array();

    if (!V::alpha()->notEmpty()->validate($province->name)) $errors[] = 'Province name is required!';

    if (empty($errors)) {
        $id = R::store($province);
        R::store($country);
        $app->redirect(BASE_PATH.'admin/provinces/view/'.$id, 301);
    } else {
        $app->flash('errors', $errors);
        $app->redirect(BASE_PATH.'admin/provinces/add', 301);
    }
}); 
```

此代码运行良好，成功保存省和国家数据之间的关系。我可以从 Province bean 访问 Country 数据，反之亦然。

但是，当我将现有省份数据从其他数据库导入我的数据库时，我无法使用以下代码从省份数据访问国家数据：

**控制器**

```
$app->get('/admin/provinces', function () use ($app)
{
    $provinces = R::findAll('province', 'ORDER BY name');
    R::preload($provinces, array('country'));

    $app->render('admin/provinces/index.html.twig', array(
        'provinces' => $provinces
    ));
}); 
```

**看法**

```
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th style="width: 10%">{{ b.a("admin/provinces?order=id", "ID") }}</th>
            <th style="width: 45%">{{ b.a("admin/provinces?order=provincename", "Name") }}</th>
            <th style="width: 45%">{{ b.a("admin/provinces?order=provincename", "Country") }}</th>
        </tr>
    </thead>
    <tbody>
        {% for province in provinces %}
            <tr>
                <td>{{ province.id }}</td>
                <td>{{ b.a("admin/provinces/view/"~province.id, province.name) }}</td>
                <td>{{ b.a("admin/countries/view/"~province.country.id, province.country.name) }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table> 
```

奇怪的是，这段代码有效：

**控制器**

```
$app->get('/admin/provinces/view/:id', function ($id) use ($app)
{
    $province = R::load('province', $id);
    $country = $province->country;

    $app->render('admin/provinces/view.html.twig', array(
        'province' => $province,
        'country' => $country
    ));
}); 
```

**看法**

```
<dl class="dl-horizontal">
    <dt>Name</dt><dd>{{ province.name }}</dd>
    <dt>Country</dt><dd>{{ b.a("admin/countries/view/"~country.id, country.name) }}</dd>
</dl> 
```

那么，我哪里做错了？为什么我可以显示单个省份的 Country 数据，但无法获取多个省份的相关 Country？

此外，如果我手动输入省数据，所有这些代码都可以正常工作。但是，如果我从另一个数据库导入数据，它就不起作用

顺便说一句，我正在使用最新的 RedBean（昨天下载了 rb.php）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:10:35.360

好吧，我找到了一种解决方法，但我认为这不是最有效的做事方式......

```
$app->get('/admin/provinces', function () use ($app)
{
    $provinces = R::findAll('province', 'ORDER BY name');
    R::preload($provinces, array('country'));

    // Reiterate through all of the beans to load the related bean
    foreach ($provinces as $province) {
        $province->country;
    }

    $app->render('admin/provinces/index.html.twig', array(
        'provinces' => $provinces
    ));
}); 
```

# ajax - 单击相关选项卡在 div 中加载外部站点

> ID：12705728
> 
> 赞同：3
> 
> 时间：2012-10-03T09:37:38.793
> 
> 标签：ajax, jquery, load

我正在尝试在单击相应选项卡时将外部站点加载到 div 中。我是 ajax jquery cud 的新手，任何人都可以建议正确的解决方案。

[我试过这个](http://jsfiddle.net/Ztxsx/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:44:10.847

由于跨域限制，您只能使用 iframe 执行此操作。见[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

为了解决这个问题，您可以将 #test 元素更改为 iframe，而不是 ajax 加载尝试类似：

```
$("#test").prop("src", link); 
```

我已经更新了您的小提琴以显示一个工作示例。

[http://jsfiddle.net/Ztxsx/5/](http://jsfiddle.net/Ztxsx/5/)

基本上，您需要明智的 Javascript 是：

```
$('#nav ul li a').on("click", function(e) {

    var url =  $(this).text();
    var li_link ='http://www.' + url + '.com';
    e.preventDefault();

    $("#test").prop("src", li_link);       
}); 
```

​</p>

# jquery - 使用 JQuery 刷新消息，类似于 node 中的 rails flash 或 connect-flash

> ID：12705735
> 
> 赞同：2
> 
> 时间：2012-10-03T09:38:06.910
> 
> 标签：jquery, node.js

我在我的 node.js 应用程序中使用 connect-flash 从服务器向客户端闪烁消息。类似于如何在 Rails 应用程序中闪烁消息。

我需要在客户端使用 jQuery 来闪烁这种相同类型的动态消息。

我认为唯一的方法是将消息保存在 cookie 中，然后重定向并在页面加载时从 cookie 中读取以将消息添加到页面并删除 cookie。

有没有一个插件可以做到这一点？

一些要求是我可以闪烁信息和错误消息。

*   进行ajax调用以删除项目
*   设置带有成功消息的 cookie
*   重定向到显示该消息的另一个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:35:18.410

您可以在 ajax 调用中添加一个侦听器。使用 cookie 会有些麻烦，只有在需要跨页面加载的持久性时才需要。

```
<script>
    var flashHandler = $('#flashes');

    flashHandler.on('flash', function(event, message){
        var flash = $('<div class="flash">');
        flash.text(message);
        flash.on('click', function(){
            $(this).remove();
            });
        $(this).append(flash);
    });

    $.ajax('/test',{
        'success' : function(){
            flashHandler.trigger('flash', ['Eureka!']);
        }
    });
</script> 
```

# android - 处理提交点击搜索小部件

> ID：12705736
> 
> 赞同：0
> 
> 时间：2012-10-03T09:38:09.973
> 
> 标签：android, android-searchmanager

我的活动实现了一个搜索小部件。

我相信默认情况下会以某种方式设置，当您输入一些查询（以便查询窗口不为空）并单击设备上某处的“提交”或“搜索”按钮时，它会自动重新加载相同的活动（调用 onCreate()方法，依此类推）。

有什么办法可以捕捉到这个事件，这样活动就不会重新加载？

有任何想法吗？？？

**编辑：**实际上发生的是它在旧的顶部启动相同的活动。开始认为这可能是我的愚蠢错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:40:03.877

添加`android:launchMode= "singleTop"`到清单文件中的活动描述解决了我的问题。

# tridion - 在 Tomcat 服务器中部署失败

> ID：12705737
> 
> 赞同：-1
> 
> 时间：2012-10-03T09:38:12.360
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在尝试在 tomcat 服务器上发布一页。但它在部署阶段失败并显示错误消息

阶段：部署处理阶段失败，无法初始化类 com.tridion.storage.StorageManagerFactory。有谁能够帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:37:08.490

还请检查 cd_storage_conf.xml 中的密码加密：尝试不使用密码加密，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:59:33.703

感谢回复。该错误是由于 cd_deployer_config.xml 中的错误配置造成的。我修好了。但现在我在提交部署阶段遇到错误。

错误：阶段：部署准备提交阶段失败，无法准备事务：tcm：0-44-66560，org.hibernate.exception.SQLGrammarException：无法打开连接，org.hibernate.exception.SQLGrammarException：无法打开连接，无法准备事务：tcm:0-44-66560，org.hibernate.exception.SQLGrammarException：无法打开连接，org.hibernate.exception.SQLGrammarException：无法打开连接

# css - jquerymobile页面内容字体不起作用

> ID：12705740
> 
> 赞同：0
> 
> 时间：2012-10-03T09:38:23.093
> 
> 标签：css, jquery-mobile

我一直在使用 jquerymobile 构建某些应用程序，问题是我必须在内容中使用几种字体...... Roboto Black 用于`UI`这样

```
@font-face {
        font-family: 'Roboto-Black';
        src: url('css/fonts/Roboto-Black.ttf');
        }

body  * {
         font-family: "Roboto-Black" !important;
         color:rgba(255,255,255,1);
         font-size:12px;
         } 
```

这工作得很好，但是在少数页面内容中，我有一些使用多种字体格式化的大文本，我已经为 div 构建了 css 规则，其中是文本，但它不起作用

css规则：

```
p.basic-paragraph {
                    font-family: "Minion Pro";
                    font-weight: normal;
                    font-style: normal;
                    font-size: 1em;
                    text-decoration: none;
                    font-variant: normal;
                    text-indent: 0em;
                    text-align: left;
                    color: #FFFFFF;
                    margin: 0em;
            }
span.no-style-override-2 {
                font-family: Roboto-Light;
                src: url('css/fonts/Roboto-Light.ttf');
            } 
```

和页面内容html：

```
<p class="basic-paragraph basic-paragraph-override"><span class="no-style-override-2">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</span></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:13:10.003

尝试以下操作：

将您的 CSS 放入 CSS 文件`your_css.css`中，并确保在之前定义字体：

```
@font-face {
    font-family: 'Roboto-Black';
    src: url('./fonts/Roboto-Black.ttf');
}

@font-face {
    font-family: 'Roboto-Light';
    src: url('./fonts/Roboto-Light.ttf');
}

p.basic-paragraph {
    font-family: "Minion Pro";
    font-weight: normal;
    font-style: normal;
    font-size: 1em;
    text-decoration: none;
    font-variant: normal;
    text-indent: 0em;
    text-align: left;
    color: #FFFFFF;
    margin: 0em;
}

span.no-style-override-2 {
    font-family: "Roboto-Light";
} 
```

`your_html.html`在您对 jQuery Mobile 的引用之后，在您的 HTML 文件中包含您的 CSS 文件。

**例子：**

```
<html>
    <head>   
        <meta name='viewport' content='minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no'/>

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

        <link rel="stylesheet" href="./css/test.css" />
    </head>
    <body>
        <!-- PAGE 1 -->
        <div id="page_1" data-role="page">
            <div data-role="content">

                <p class="basic-paragraph basic-paragraph-override"><span class="no-style-override-2">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</span></p>

            </div>
        </div>
    </body>
</html> 
```

**PS：**注意你的字体的路径，在你的 CSS 文件中。上面的示例考虑了以下目录结构：

*   `your_html.html`
*   **css**
    *   `your_css.css`
    *   **字体**
        *   `Roboto-Black.ttf`
        *   `Roboto-Light.ttf`

# c# - 更新没有标题列的excel表

> ID：12705741
> 
> 赞同：0
> 
> 时间：2012-10-03T09:38:23.090
> 
> 标签：c#, excel

我正在读、写 excel 表。我有一个要更新的 excel 表，不幸的是它没有标题列。所以我被卡住了如何更新这个？

是否可以更新没有标题的excel表？如果是，请帮助如何更新？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:42:11.830

尝试使用Codeplex 的[excel 数据阅读器并检查它如何返回数据集。](http://exceldatareader.codeplex.com)还尝试根据您的需要操作数据集

# jquery - 附加 JSON 和 DOM 问题的内容

> ID：12705742
> 
> 赞同：0
> 
> 时间：2012-10-03T09:38:26.113
> 
> 标签：jquery, json, html

嗨，我有一个带有 jQ​​uery + HTML5 + JSON 的应用程序，我有下一个问题：

我通过 JSON 系统加载了如此大量的内容，并将其附加到名为 content 的 div 中。问题是 JSON 不会将数据附加到 DOM，所以我必须调用一个函数来刷新所有函数，因为选择器无法识别那些新的附加数据。

我所做的是将选择器和触发器放在一个函数中，每次运行 JSON 文件时，我都会调用这个函数，但我觉得这没有优化。

*   有什么办法可以避免调用这个函数？
*   我看到有些人使用 on() 方法，这是解决问题的更好方法吗？
*   使用live()会一样吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:00:28.253

如果要向 DOM 添加元素，则必须再次调用事件处理程序，因为您使用的选择器将变为空。

对此的一种解决方案是将事件处理程序附加到始终位于 DOM 上且永远不会被删除的对象，例如容器 div 周围的包装器。

该`live()`方法已弃用。
`on()`只是一种更简单的绑定方式，仍然需要不为空的选择器。

# operating-system - 物理内存、主内存、辅助内存、主内存有什么区别？

> ID：12705745
> 
> 赞同：2
> 
> 时间：2012-10-03T09:38:39.760
> 
> 标签：operating-system, ram

我正在学习操作系统，但这些词真的让我很困惑，我试图在互联网上搜索但找不到它们之间的确切区别？？任何人都可以帮我解决我的困惑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:08:17.053

主存储（也是主内存和物理内存）通常可互换使用，指代直接连接到处理器的内存。

辅助存储是不直接连接到 CPU 的存储。二级存储最常见的情况是硬盘。

您说在互联网上搜索而没有找到解释，但是维基百科似乎对计算机存储有很多话要说[http://en.wikipedia.org/wiki/Computer_data_storage](http://en.wikipedia.org/wiki/Computer_data_storage)

# jasper-reports - 隐藏特定用户的报告

> ID：12705747
> 
> 赞同：0
> 
> 时间：2012-10-03T09:38:50.290
> 
> 标签：jasper-reports, jasperserver

我制作了一个包含 5个子报表的*深入**报表*，所有子报表都使用*超链接*部分连接。

我希望用户只查看主要的*向下钻取报告，我的意思是**向下钻取*的第一个标签。如果我为**ROLE_USER设置了****Execute Only**权限，则该特定报告不起作用，会引发类似.***`Access Denied`***

 **谁能告诉我如何隐藏报告以及附加的输入控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:44:35.970

向下钻取报告必须具有到上层报告的链接，并且这些报告可能具有与**“仅执行”**不同的权限。权限集是从上述报告级别继承的，因此会出现错误。请检查您是否具有文件夹或上级报告的正确权限。此外，请参阅权限设置文档。身份验证和授权有很好的记录很好开始。
希望有帮助！！**

# repeater - 如何在同一个重复项中使用链接按钮显示面板？

> ID：12705750
> 
> 赞同：1
> 
> 时间：2012-10-03T09:39:07.423
> 
> 标签：repeater, panel, linkbutton, itemcommand

我有一个中继器，其中有一个链接和一个隐藏面板（以及其他一些东西）。我希望这个链接（LinkBut​​ton）显示我的面板。这就是我所拥有的：

```
<asp:Repeater id="repeater1" runat="server">
    <ItemTemplate>
        ....
        <asp:LinkButton runat="server" ID="lnkTransits" Text="test" CommandName="Transits"/>
        <asp:Panel CssClass="transits" id="pnlTransits" runat="server" Visible="False">
            ....
        </asp:Panel>
</ItemTemplate>
</asp:Repeater> 
```

代码隐藏（在 OnInit 中绑定 itemcommand）：

```
private void FlightList_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || 
        e.Item.ItemType == ListItemType.AlternatingItem)
    {
        if (e.CommandName == "Transits")
        {
            var item = e.Item.DataItem;
            //var panel = item.FindControl("pnl" + e.CommandName);
            //panel.Visible = true;
        }
    }
} 
```

DataItem 是空的，每个帖子都说应该是这样，所以我放弃了这个想法。但我希望的是，可能有一些索引值或某种方法可以找到“最接近”或我可以使用的东西。我想要的只是使面板可见（并希望使用相同的按钮也能够隐藏它，也许使用命令参数“隐藏”“显示”）。

如果这不是解决此问题的方法，那很好，最好的方法是什么？

提前致谢

# php - 提交联系表格

> ID：12705751
> 
> 赞同：0
> 
> 时间：2012-10-03T09:39:14.320
> 
> 标签：php, email, sendmessage

我在通过联系表发送电子邮件时遇到问题 我无法确定问题出在哪里 我认为我做的一切都是正确的，但我在这里接受建议，希望您能帮助我。

```
<?php
    if(isset($_POST['name']) && isset($_POST['email']) && isset($_POST['body']) && isset($_POST['subject'])){
        $name = $_POST['name'];
        $email = $_POST['email'];
        $message = $_POST['body'];
        $subject = $_POST['subject'];
        $to = 'samir1986@gmail.com';
        $header = 'From: '.$name.'<'.$email.'>';
        if(!empty($name) && !empty($email) && !empty($body)){
            mail($to, $subject, $message,$header);
            echo 'An e-mail have been sent successfully';
        }
        else{
            echo 'Please try sending e-mail again';
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:43:32.613

请确保您已检查每个字段的值（出于安全原因），然后执行：

```
<?php
    if(!empty($_POST['name']) && !empty($_POST['email']) && !empty($_POST['body']) && !empty($_POST['subject'])){
        $name = $_POST['name'];
        $email = $_POST['email'];
        $message = $_POST['body'];
        $subject = $_POST['subject'];
        $to = 'samir1986@gmail.com';
        $header = 'From: '.$name.' <'.$email.'>'."\r\n";
        if (mail($to, $subject, $message, $header))
        {
            echo 'An e-mail have been sent successfully';
        }
        else
        {
            echo 'Please try sending e-mail again';
        }
    }
?> 
```

# oracle - Oracle 通过过程插入或更新行

> ID：12705752
> 
> 赞同：2
> 
> 时间：2012-10-03T09:39:16.633
> 
> 标签：oracle, stored-procedures, insert

我有一张桌子

```
CREATE TABLE STUDENT
(
  ID            INTEGER PRIMARY KEY,
  FIRSTNAME     VARCHAR2(1024 CHAR),
  LASTNAME      VARCHAR2(1024 CHAR),
  MODIFIEDDATE  DATE  DEFAULT sysdate
) 
```

我正在插入一行数据

```
insert into STUDENT (ID, FIRSTNAME, LASTNAME, MODIFIEDDATE)  values (1,'Scott', 'Tiger', sysdate); 
```

当我必须插入一条数据记录时，我需要编写一个执行以下操作的过程或函数：

1.  如果没有相同 id 的记录，则插入该行。
2.  如果有相同 id 和数据匹配的记录，则什么也不做。
3.  如果有相同 id 的记录但数据不匹配，则更新数据。

我是甲骨文的新手。从 java 端，可以通过 id 选择记录，然后更新该记录，但这会进行 2 次数据库调用。只是为了避免我尝试使用过程更新表。如果可以在单个数据库调用中完成相同的操作，请提及。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:46:20.257

对于单个 SQL 语句解决方案，您可以尝试使用[MERGE](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm#SQLRF01606)语句，如本答案所述[https://stackoverflow.com/a/237328/176569](https://stackoverflow.com/a/237328/176569)

例如

```
create or replace procedure insert_or_update_student(
p_id number, p_firstname varchar2, p_lastname varchar2
) as
begin
    merge into student st using dual on (id = p_id)
         when not matched then insert (id, firstname, lastname) 
           values (p_id, p_firstname, p_lastname)
         when matched then update set 
           firstname = p_firstname, lastname = p_lastname, modifiedate = SYSDATE
end insert_or_update_student; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T09:47:46.227

而不是过程尝试在 oracle 中使用合并。如果值匹配，它将更新表，如果未找到值，它将插入值

```
MERGE INTO bonuses b
USING (
  SELECT employee_id, salary, dept_no
  FROM employee
  WHERE dept_no =20) e
ON (b.employee_id = e.employee_id)
WHEN MATCHED THEN
  UPDATE SET b.bonus = e.salary * 0.1
  DELETE WHERE (e.salary < 40000)
WHEN NOT MATCHED THEN
  INSERT (b.employee_id, b.bonus)
  VALUES (e.employee_id, e.salary * 0.05)
  WHERE (e.salary > 40000) 
```

试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-08T09:25:44.857

要解决第二个任务 - *“如果有相同 id 和数据匹配的记录，则什么也不做。”* - 从 10g 开始，我们在合并运算符的更新和插入部分中添加了额外的“where”子句。要完成这项任务，我们可以添加一些数据更改检查：

```
 when matched then update
        set student.last_name = query.last_name 
           where student.last_name <> query.last_name 
```

这将仅更新匹配的行，并且仅更新数据已更改的行

# variables - Paypal ipn/购物车变量

> ID：12705755
> 
> 赞同：1
> 
> 时间：2012-10-03T09:39:24.567
> 
> 标签：variables, paypal, cart, paypal-ipn

想知道是否有人可以给我任何指示？

我目前正在建设的网站销售“活动”门票......假期。

我正在尝试做的是将数据库字段中的票数减少购买的数量，但找不到将拉回信息的贝宝购物车变量。自定义变量似乎只能使用一次，并且 item_name 和 item_number 变量已被使用， (item_number) 用于标识数据库中的“event_id”字段，而 (item_name) 用于明显标识事件名称。

我可以通过减少数量并在提交到 Paypal 之前在隐藏的表单字段中回显来将要更新的正确数量的票证传递给 Paypal，但我无法取回结果。我正在寻找可以适应我需要的 Paypal 表单“名称”字段（如果存在）

下面是数据库循环：“自定义”变量不起作用，因为它不能是 custom1、custom2 等。

```
 mysql_connect('xxxxxxxx', 'xxxxxx', 'xxxxxxxx') or exit(0);
    mysql_select_db('xxxxxx') or exit(0);

$num_cart_items = $_POST['num_cart_items'];

$i=1;
while (isset($_POST['item_number'.$i]))//read the item details
{
$item_ID[$i]=$_POST['item_number'.$i];
$custom[$i]=$_POST['custom'.$i];
$i++;
}

$item_count = $i-1;

for ($j=1;$j<=$item_count;$j++) 

{

$struery = "UPDATE events SET event_tickets = '".$custom[$j]."' WHERE event_id = '".$item_ID[$j]."'";
$result = mysql_query($struery) or die("Cart - paypal_cart_info, Query failed:<br>" . mysql_error() . "<br>" . mysql_errno());
$i++;

}// end database loop

Thanks for any info.

Os 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:24:58.687

您可以将自定义变量作为 JSON 编码字符串。然后解码它。

```
$i=1;
$custom = json_decode($_POST['custom], TRUE);
while (isset($_POST['item_number'.$i]))//read the item details
{
    $item_ID[$i] = $_POST['item_number'.$i];
    $custom[$i] = $custom[$i];
    $i++;
} 
```

或者您甚至`base64_encode`可以将其发送到贝宝，然后将其解码回来，当您将用户重定向到贝宝时，您希望变量不可读。

# android - 如何在android中用新项目清除旧的listview项目

> ID：12705759
> 
> 赞同：0
> 
> 时间：2012-10-03T09:39:28.030
> 
> 标签：android, android-layout, android-listview

我有两个按钮。单击每个按钮时都给出了不同的列表项。单击时我需要将旧列表项替换为新列表项。

例如。button1 点击：

项目 1 项目 2 项目 3

按钮2点击：

第 4 项 第 5 项 第 6 项

在这里我不能用新的替换旧项目。我该怎么做？

我的代码：

...

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lv = (ListView) findViewById(R.id.listview);

    web1 = (Button) findViewById(R.id.web1);
    web2 = (Button) findViewById(R.id.web2);
    web1.setOnClickListener(this);
    web2.setOnClickListener(this);

}

@Override
public void onClick(android.view.View v) {
    switch (v.getId()) {
    case R.id.web1:

        call(xmlHelp.URL1, xmlHelp.KEY_ITEM);

        break;

    case R.id.web2:

        flag = false;
        call(xmlHelp.URL2, xmlHelp.TAG_CONTACTS);

        break;
    }

}

private void call(final String url, final String keyItem) {
    progressDialog = ProgressDialog.show(View.this, "", "Loading...");

    new Thread() {

        public void run() {

            try {
                if (flag) {
                    webCall.apiCall1(url, keyItem);
                    threadHandler.sendEmptyMessage(0);

                } else {
                    webCall.apiCall2(url, keyItem);
                    threadHandler.sendEmptyMessage(1);

                }

            } catch (Exception e) {

                Log.e("tag", e.getMessage());

            }

        }

    }.start();

}

private Handler threadHandler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        // dismiss the progress dialog

        if (msg.what == 0) {

            for (int i = 0; i < webCall.lm1.size(); i++) {
                ListModel1 userObj = webCall.lm1.get(i);
                mId.add(userObj.getId());
                mName.add(userObj.getName());
                mCost.add("Rs." + userObj.getCost());
                mDescription.add(userObj.getDescription());

            }
             lv.setAdapter(null);

            adapter = new ListViewAdapter(View.this, R.layout.list_item, mId,
                    mName, mCost, mDescription);

            adapter.notifyDataSetInvalidated();
            lv.setAdapter(adapter);
        } else {

            for (int i = 0; i < webCall.lm2.size(); i++) {
                ListModel2 userObj = webCall.lm2.get(i);
                mId.add(userObj.getId());
                mName.add(userObj.getName());
                mEmail.add(userObj.getEmail());
                mGender.add(userObj.getGender());

            }
            lv.setAdapter(null);

            adapter = new ListViewAdapter(View.this, R.layout.list_item, mId,
                    mName, mEmail, mGender);

            adapter.notifyDataSetInvalidated();
            lv.setAdapter(adapter);
        }
        progressDialog.dismiss();

    }
}; 
```

# php - 为 Drupal 和 Wordpress i18n 函数（ __() 和 t() ）编写适配器是否与 gettext/.pot 生成不兼容？

> ID：12705764
> 
> 赞同：2
> 
> 时间：2012-10-03T09:39:46.893
> 
> 标签：php, wordpress, drupal, adapter, gettext

我正在编写一个 wordpress 插件并计划它的 drupal 实现我正在将 wordpress 函数包装到适配器中。所以我写了一个适配器，`__()`这很简单

```
class Ai1ec_Wordpress_Template_Adapter implements Ai1ec_Template_Adapter {

    ...

    public function translate( $text ) {
        return __( $text, AI1EC_PLUGIN_NAME );
    } 
```

我不是 gettext 的大专家，一位同事给我写信：

> 当 xgettext 解析代码以生成 .pot 文件时将失败。像 __() 这样的 WP i18n 函数要求将字符串文字作为第一个参数传递，而不是变量。和 IIRC，同样适用于 Drupal 的 t() 函数。

我已经阅读了法典条目
[http://codex.wordpress.org/I18n_for_WordPress_Developers#Placeholders](http://codex.wordpress.org/I18n_for_WordPress_Developers#Placeholders)

[http://api.drupal.org/api/drupal/includes%21bootstrap.inc/function/t/7](http://api.drupal.org/api/drupal/includes%21bootstrap.inc/function/t/7)

并且找不到与此完全相关的东西。soemone 可以确切地解释为什么这不起作用，我怎么能写出可以与 Wordpress 和 Drupal 兼容的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:13:54.490

一般来说，您的同事是正确的，如果您将变量传递给翻译函数，除非相同的字符串在其他地方作为文字传入，否则它们将不会被翻译。这是因为生成翻译模板不会运行代码，它会搜索特定的函数名称。翻译方法有两个目的，一是翻译参数，二是向翻译模板生成程序标识翻译模板文件中应该包含哪些字符串。

您需要告诉翻译模板生成代码（通常是 xgettext）程序，您的函数的参数是可翻译的字符串。使用 xgettext 可以使用 -k 参数来完成。WordPress 可能已经有自己的 xgettext 包装器供您使用。

The drupal document you linked explicitly says you should not pass variables to t() unless you are sure that the text is passed as a literal elsewhere.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:55:01.440

Wordpress 和 Drupal 版本都应该将字符串保存在变量中。Drupal 版本的措辞有些混乱。Drupal 文档所说的是，如果原始文本的来源是用户生成的，您应该小心。

```
$foo = 'bar';
($foo == 'bar') == true; 
```

# asp.net-mvc-3 - 服务器上的 Datepicker 日期格式

> ID：12705771
> 
> 赞同：0
> 
> 时间：2012-10-03T09:40:27.403
> 
> 标签：asp.net-mvc-3, jquery-ui-datepicker

我对日期选择器有问题 我已经使用 EF 创建了具有读/写操作和视图的控制器 一切正常 直到我需要使用 modelView 创建一个控制器，所以我选择了一个空控制器并自己创建了视图 问题是当我将 datepicker 与 dd/MM/yy 一起使用时，它显示正常，但是当我检查发送到服务器的值时，如果 day >12，则它为 null 我试图引入 02/19/2008 它在发送的服务器中接受它作为 2008 年 2 月 19 日，我不明白为什么我尝试将全球化文化和 uiculture 设置为 en-US en-GB fr-FR 没有任何作用有没有办法指定日期选择器如何解析日期（我已经使用了日期选择器.parseDate) 需要你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:43:31.570

您可以在创建日期选择器时指定所需的格式：

```
$('#datepicker').datepicker({ dateFormat: 'dd/mm/yyyy' }) 
```

现在，您还应该确保您的服务器使用相同的格式来解析日期，方法是指定文化，或者您也可以为 DateTime 类型编写[自定义模型绑定器。](https://stackoverflow.com/a/7836093/29407)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:45:23.083

我遇到了这个问题，解决方案是将全球化信息放在 web.config 中。像这样：`<globalization culture="sr-Latn-RS"/>` 只需检查您是否将其放入`<system.web>`.

# url - 哪个页面 url 扩展的 SEO 更好

> ID：12705773
> 
> 赞同：0
> 
> 时间：2012-10-03T09:40:37.857
> 
> 标签：url, seo

我在一个新网站上，想知道这些对 url 的建议中哪个更好？

`http://medical-eg.com/dr/name`或者 `http://medical-eg.com/dr.name`

我看到第二个更简单，更符合语法。

但我不希望它受到 SEO 的青睐。

谢谢大家....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:45:47.813

第一个更好，它目前也被最新的 Microsoft 的 MVC 3 和 MVC 4 框架使用。除此之外，与使用的类似 dr.name 的结构相比，它还有助于爬虫更容易地获取有关页面的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:27:44.577

第一个比第二个好得多。它的好处很少

首先：两个关键字获得目标博士和名称以及第三个关键字博士名称也将成为目标。

第二：它会给谷歌一个分类页面的感觉，分类好的页面排名靠前

还有很多其他的好处..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:06:39.230

第一个是两者中最好的。我会采用不同的方法

`http://medical-eg.com/dr-name-surname`

还将地理位置添加到 url 可以提高 SEO

`http://medical-eg.com/geo-location/dr-name-surname`

# windows-phone-7 - Windows Phone 图钉重叠

> ID：12705779
> 
> 赞同：0
> 
> 时间：2012-10-03T09:40:50.757
> 
> 标签：windows-phone-7, bing-maps, overlapping, pushpin

我正在编写一个简单的 windows phone 7.5 本地化应用程序。

我已将默认图钉模板更改为：

```
 <ControlTemplate TargetType="maps:Pushpin"  x:Key="allPushpinsTemplate">
        <Grid Height="26" Width="26" Margin="-13,-13,0,0" RenderTransformOrigin="0.5,0.5" >
            <Grid.RenderTransform>
                <CompositeTransform Rotation="-45"/>
            </Grid.RenderTransform>
            <Rectangle Fill="Black" HorizontalAlignment="Center" Margin="0" Stroke="White" VerticalAlignment="Center" Height="26" Width="26"/>
            <Ellipse HorizontalAlignment="Center" Height="16" Margin="0" VerticalAlignment="Center" Fill="Red" Width="16"/>
        </Grid>
    </ControlTemplate> 
```

当我单击图钉时，我处理事件并将所选图钉的模板更改为：

```
 <ControlTemplate TargetType="maps:Pushpin"  x:Key="detailedPushpinTemplate">
            <Grid x:Name="ContentGrid" Background="Transparent" Margin="-4,0,0,0">
                <StackPanel >
                    <Grid Background="Black">
                        <StackPanel Margin="5,5,0,0">
                            <TextBlock  Text="{Binding Adress}" Foreground="White" />
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding ZipCode}" Foreground="White" />
                                <TextBlock Text="-" Foreground="White" Padding="3,0"/>
                                <TextBlock Text="{Binding City}" Foreground="White" />
                            </StackPanel>
                            <TextBlock Text="{Binding TelStd}" Foreground="White" />
                            <TextBlock Text="{Binding Email}" Foreground="White" />
                            <StackPanel Orientation="Horizontal">
                                <Button BorderBrush="Transparent" Click="Button_Click" CommandParameter="email" ClickMode="Press">
                                    <Button.Content>
                                        <Image Source="/Images/Icons/icon-mail.png" Width="40" Height="40" />
                                    </Button.Content>
                                </Button>
                                <Button BorderBrush="Transparent" Click="Button_Click" CommandParameter="phone" ClickMode="Press">
                                    <Button.Content>
                                        <Image Source="/Images/Icons/icon-phone.png" Width="40" Height="40" />
                                    </Button.Content>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                    <Polygon Fill="Black"  Points="0,0 29,0 0,29" Width="29" Height="29" HorizontalAlignment="Left" />
                    <Grid Height="26" Width="26" Margin="-13,-13,0,0" RenderTransformOrigin="0.5,0.5" HorizontalAlignment="Left">
                        <Grid.RenderTransform>
                            <CompositeTransform Rotation="-45"/>
                        </Grid.RenderTransform>
                        <Rectangle Fill="Black" HorizontalAlignment="Center" Margin="0" Stroke="White" VerticalAlignment="Center" Height="26" Width="26" />
                        <Ellipse HorizontalAlignment="Center" Height="16" Margin="0" VerticalAlignment="Center" Fill="Green" Width="16" />
                    </Grid>
                </StackPanel>
            </Grid>
    </ControlTemplate> 
```

这样我就可以显示一些信息和一些命令。结果完美运行，并显示一个包含我所有自定义数据的黑色矩形。

但是，其他引脚（默认模板）与矩形重叠并出现在我选择的引脚顶部并隐藏信息。

有没有人想强制选择的引脚模板始终位于其他引脚之上？

有关我地图的 XAML 的信息：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Canvas >
            <maps:Map ZoomBarVisibility="Visible" ZoomLevel="4" Center="46.8821,2.2697"  Name="map1" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Canvas.Top="0" Height="600" Width="460">
                <maps:MapItemsControl  x:Name="mapControl"/>
                <maps:MapItemsControl ItemsSource="{Binding Locations}" >
                    <maps:MapItemsControl.ItemTemplate>
                        <DataTemplate>
                            <maps:Pushpin Location="{Binding Location}" Template="{StaticResource allPushpinsTemplate}" MouseLeftButtonDown="Pushpin_MouseLeftButtonDown"/>
                        </DataTemplate>
                    </maps:MapItemsControl.ItemTemplate>
                </maps:MapItemsControl>
                <maps:MapLayer Name="imageLayer"/>
                </maps:Map>
            <Button Content="some action" Height="70" HorizontalAlignment="Left" Margin="0" Name="button1" VerticalAlignment="Top" Width="170"  Canvas.Left="140" />
        </Canvas>

    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:57:25.590

我能够解决此默认行为的唯一方法是删除原始引脚，然后使用不同的模板在相同位置添加一个新引脚。
新添加的引脚出现在 Z-Order 的顶部，但是一旦创建，我就无法更改现有引脚的 Z-Order。

还记得在用户单击另一个引脚时“重置”处于选定状态的任何引脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:42:33.643

我想这应该可以帮助你：[http ://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/c4055dba-3efd-4bf7-98b3-cd8e24d175ea](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/c4055dba-3efd-4bf7-98b3-cd8e24d175ea)

# javascript - JavaScript检测节点中的文本偏移量

> ID：12705781
> 
> 赞同：1
> 
> 时间：2012-10-03T09:41:25.330
> 
> 标签：javascript, position, selection, offset

我想检测指定 x 和 y 坐标下的元素和文本偏移量。

假设我们有这样的 DOM：

```
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
Nam quis nisl lectus. Donec euismod dignissim turpis, nec 
viverra nulla iaculis nec. _Fusce_ mattis orci eget nibh 
rhoncus auctor at in enim.
</p> 
```

当用户在具有 x 和 y 坐标的单词之前单击鼠标时，`_Fusce_`我想获取`_Fusce_`文本节点中单词的偏移量作为索引。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:47:40.273

WebKit 已经做到`document.caretRangeFromPoint()`了这一点。CSSOM View 规范有[`document.caretPositionFromPoint()`](http://dev.w3.org/csswg/cssom-view/#extensions-to-the-document-interface)，但目前只有[Firefox 20 及更高版本实现它](https://developer.mozilla.org/en-US/docs/Web/API/document.caretPositionFromPoint)。

在 Firefox 中，如果您感兴趣的位置来自鼠标事件，那么您可以直接从事件中获取此信息，该事件具有属性`rangeParent`和`rangeOffset`.

这是一个带有一些示例代码的类似问题：

[https://stackoverflow.com/a/10659990/96100](https://stackoverflow.com/a/10659990/96100)

# ios - 所有播放列表似乎都缺少订阅者

> ID：12705783
> 
> 赞同：2
> 
> 时间：2012-10-03T09:41:35.317
> 
> 标签：ios, spotify, cocoalibspotify-2.0

到目前为止，我检查过的所有播放列表都返回了 0 个订阅者。难道我做错了什么？您是否需要特殊权限才能执行此操作？我正在使用 cocoalibspotify 2.2.0。

这是代码：

```
playlistURL = [NSURL URLWithString:@"spotify:user:tunigo:playlist:14KrfXbVeyzVek6UX8jUlH"];
NSLog(@"%@", playlistURL);
[[SPSession sharedSession] playlistForURL:playlistURL callback:^(SPPlaylist *playlist){
    if (playlist != nil) {

        [SPAsyncLoading waitUntilLoaded:playlist timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *loadedPlaylists, NSArray *notLoadedTracks) {

            NSLog(@"Nr of subscribers: %d", [playlist.subscribers count]);
            NSLog(@"========================");
        }];
    }
}]; 
```

输出这个：

```
spotify:user:tunigo:playlist:14KrfXbVeyzVek6UX8jUlH
Playlist name: Dinner with Friends
Nr of subscribers: 0
======================== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:54:52.757

由于更新订阅者可能是一项相当漫长的任务，因此看起来`SPPlaylist`一旦加载（即`SPAsyncLoading`返回后）就开始更新它们。

但是，subscribers 属性是 KVO 兼容的，因此您应该能够观察该`subscribers`属性的变化。

# java - 将Java方法转换为递归方法？（插入排序）

> ID：12705785
> 
> 赞同：-1
> 
> 时间：2012-10-03T09:41:50.663
> 
> 标签：java, sorting, recursion, insertion-sort

我试图理解递归以及如何将我当前的迭代插入排序转换为递归排序。

我需要对我的代码做些什么才能使其递归？

*   我想我需要一个基本案例，这样它就不会变成无限循环。
*   我不确定我是否完全理解递归。也许你可以让我更清楚？
*   我读了很多书，但我仍然不知道从哪里开始。

这是我的代码：

```
public class InsertionSort
{

    public static void main(String a[])
    {

        int i;
        int array[] =
        { 8, 33, 12, 99, 0, 17 };

        System.out.println("Values of Array before the sort: ");

        for (i = 0; i < array.length; i++)
        {
            System.out.print(array[i] + "  ");
        }

        insertion_srt(array, array.length);

        System.out.println("");
        System.out.println("Values of Array after the sort: ");

        for (i = 0; i < array.length; i++)
        {
            System.out.print(array[i] + "  ");
        }

    }

    public static void insertion_srt(int array[], int n)
    {

        for (int i = 1; i < n; i++)
        {

            int j = i;
            int B = array[i];

            while ((j > 0) && (array[j - 1] > B))
            {
                array[j] = array[j - 1];
                j--;
            }

            array[j] = B;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-10T10:24:35.493

这是我个人喜欢的好方法。它确实使用了三种方法，但它们很容易理解。将 insertOut 视为外部 for 循环，将 insertIn 视为内部嵌套 for 循环

```
public static void insertionRecursive(int[] a){
    if(a.length > 0){ // base case
        insertionOut(a, 1, a.length);
    }
}   
private static void insertionOut(int[] a, int i, int length){ //outer loop
    if(i < length){ // iterates from 1 to the length
        int temp = a[i]; // temp value
        int k = i;
        insertionIn(a, k, temp);
        insertionOut(a, i + 1, length); // iterates through the loop
    }
}
private static void insertionIn(int[] a, int k, int temp){ // inner loop
    if(k > 0 && a[k - 1] > temp){
       //this does a basic swap
        a[k] = temp;
        a[k] = a[k - 1];
        a[k - 1] = temp;
        insertionIn(a, k - 1, temp);    // iterates through the loop
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:44:18.513

理解递归如何工作的一个好方法是理解分治算法的概念。这种技术是解决各种问题的有效算法的基础。

它背后的想法是将一个问题分成更小的子问题，这些子问题都可以用相同的方式解决：

*   分成 2 个（或更多）子问题。
*   递归解决每个子问题。
*   结合结果。

插入排序不是分治算法的最佳示例，但仍然可以通过这种方式进行处理。您可以将问题分为 2 个子问题：

*   最后一个元素
*   其他一切

这样，您将获得所谓的尾递归。所有循环都相对容易转换为尾递归。

```
public static void insertion_srt(int array[], int n, int j) {
    if (j < n) {
        int i;
        int temp = array[j];

        for (i=j; i > 0 && array[i-1] > temp; i--) array[i] = array[i-1];
        array[i] = temp;

        insertion_srt(array,n, j+1);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:58:20.260

转换外部 for 循环是微不足道的。要克服 while 循环，您需要一些递归辅助函数。您必须在 main 中调用该函数`insertion_srt(array, 0, array.length)`：

```
public static void insertion_srt(int array[], int beg_index, int n) {
    if(beg_index >= n-1)
            return;
    int i = beg_index + 1;
    int j = i;
    int B = array[i];
    j=helper(array, j, B);
    array[j] = B;
    insertion_srt(array, beg_index + 1, n);
}

private static int helper(int[] array, int j, int B) {
    if(j <= 0 || array[j-1] <= B)
        return j;
    array[j] = array[j - 1];
    return helper(array, j-1, B);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T09:49:25.880

试试这个简单的递归方法：

```
public static void insertionSort(int[] array, int index) {
    if(array.length == index + 1) return;

    insertionSort(array, index + 1);

    // insert array[index] into the array

} 
```

# iphone - 不同颜色的圆圈

> ID：12705787
> 
> 赞同：1
> 
> 时间：2012-10-03T09:42:04.310
> 
> 标签：iphone, xcode, core-animation, geometry

我是 iPhone 新手。我想在里面画一个不同颜色的圆圈。并且所有颜色应覆盖相同的区域。就像我想在里面有 10 种不同的颜色。然后每种颜色应覆盖圆圈的 1/10 区域。我不是想在这里画饼图。也不要尝试使用 10 种不同的颜色。只需要 10 个相等的圆形部分，每个部分都可以填充颜色。我正在尝试建造一个幸运轮。这样较小的轮子在较大的轮子上方。然后我想分别拖动它们。在Core Animation的帮助下也可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:47:56.617

模棱两可的问题。如果您绘制一个具有 10 个相等区域的饼图，那么每个将覆盖该区域的 1/10，从而满足您的要求，不是吗？

一个圆圈有 360°，所以除以 10，每个楔形应该有 36°。现在你只需要画 10 个楔子，这个页面应该可以帮助你：

[http://www.raywenderlich.com/2106/core-graphics-101-arcs-and-paths](http://www.raywenderlich.com/2106/core-graphics-101-arcs-and-paths)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:48:01.313

既然你说不要馅饼片，那你要不要用同心环代替？

你确定你想要相等的面积吗？这将使环的厚度不同。最里面的环会相当厚，向外的每个环都会变薄。更薄，在外圈上。

我们的眼睛习惯了靶心形，每个环的厚度相同。

在任何情况下，您都应该查看 CAShapeLayer 对象。您可以为每个环创建一个形状图层，定义一个包含 2 个圆圈的闭合路径。有一种叫做“缠绕规则”的东西可以让你确定当路径重叠时会发生什么。我认为您需要奇偶路径缠绕（kCAFillRuleEvenOdd）。

要使环的面积相等，您可以这样做：

首先计算整个圆的面积。除以环数。这是每个环所需的区域让我们称该区域为“a”。从中心开始。该环（圆）的半径将为 sqrt(pi/a)。

For each following ring you'll need to calculate the thickness of the ring based on the area of the outer circle minus the area of the inner circle that makes up the ring. You'll need to write an equation that solves for the outer radius given the desired area and the radius or the previous circle.

# powershell - 如何让 Export-Csv 输出与屏幕输出相同的信息？

> ID：12705788
> 
> 赞同：1
> 
> 时间：2012-10-03T09:42:06.783
> 
> 标签：powershell

```
Get-WmiObject -list | where-object {$_.name -match "win32"} | Select-Object 
name,methods,properties 
```

这显示了每个 Win32 类的名称、方法和属性，我想将此信息放入 CSV 文件中。

但是，以下输出不会输出相同的信息。

```
Get-WmiObject -list | where-object {$_.name -match "win32"} | Select-Object 
name,methods,properties | Export-CSV "c:\output.csv" 
```

我怎样才能做到这一点？

（更新了我的脚本，因为它有一个错误。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:12:42.130

您需要做一些额外的手动工作，并确保扩展名称并通过一些分隔符加入它们：

```
$methods = @{n='Methods';e={ ($_.Methods | select -expand Name) -join ';'}}
$properties = @{n='Properties';e={ ($_.Properties  | select -expand Name) -join ';'}}

Get-WmiObject -List | 
Where-Object {$_.Name -like "Win32_*"} | 
Select-Object Name,$methods,$properties | 
Export-Csv .\win32.csv -NoTypeInformation 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:21:47.807

这里的问题是每个 WMI 对象都具有本身就是数组的属性，而 Output-CSV 无法真正处理它。

要解决此问题，您需要显式处理数组数组。

你具体想输出什么？

# sql - 在列中查找 n 个最大值

> ID：12705789
> 
> 赞同：3
> 
> 时间：2012-10-03T09:42:08.307
> 
> 标签：sql, sql-server, sql-server-2008

我试图在 SQL Server 的特定列中找到 n 个最大的数字。

我们可以很容易地找到一列中的最大值和第二个最大值。

但是我如何在列中找到 5 个最大值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:44:37.953

您为 MySQL 和 SQL Server 标记了这个。在 SQL Server 中，您可以使用[`TOP`](http://msdn.microsoft.com/en-us/library/ms189463.aspx)：

```
SELECT TOP 5 yourColumn
FROM yourTable
ORDER BY someColumn DESC; 
```

`TOP`限制返回的行数。要获取具有最大/最小值的数据，您需要包含一个`ORDER BY`.

在 MySQL 中，您将使用[`LIMIT`](http://dev.mysql.com/doc/refman/5.0/en/select.html)

在 SQL Server 中执行此操作的另一种方法是使用`row_number()`：

```
select id
from 
(
  select id, row_number() over(order by id desc) rn
  from yourtable
) x
where rn <= 5 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b5755/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T09:43:48.763

在 MySql 中，您可以[`[LIMIT {[offset,] row_count }]`](https://data.stackexchange.com/stackoverflow/query/edit/81614)像这样使用：

```
...
ORDER BY SomeField DESC
LIMIT @n; 
```

对于 SQL Server，您可以使用`TOP(n)`获取前 n 个：

```
SELECT TOP(@n) SomeFieldName
FROM TABLE
ORDER BY SomeField DESC 
```

例如：

```
SELECT TOP 5 items_sold
FROM tbl_PRODUCT 
ORDER BY items_sold dESC 
```

**更新：**如果您有另一个`families`具有产品表外键`family_ID`的表，并且您想查找所有具有前 n 个家庭 id 的产品。然后你可以点这个：

```
 SELECT *
   FROM Products WHERE family_ID  IN
   (
       SELECT TOP 5 family_ID
       FROM families
       ORDER BY family_ID DESC
   ) 
```

**更新 2**：每个系列中最顶级的产品：

```
;WITH cte
AS
(
    SELECT *, 
    ROW_NUMBER() OVER(PARTITION BY family_ID ORDER BY items_sold DESC) row_num
    FROM @Products
)
SELECT * FROM cte
where row_num = 1
Order by family_ID 
```

## [这是现场演示](https://data.stackexchange.com/stackoverflow/query/edit/81614)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:50:13.593

sql服务器

```
select min(val)
 from your_table
where val in (select top 5 val from your_table  order by val desc) 
```

mysql

```
select min(val)
 from your_table
where val in (select val from your_table  order by val desc limit 5) 
```

# android - AsyncTask 是怎么做的 工作？

> ID：12705791
> 
> 赞同：5
> 
> 时间：2012-10-03T09:42:12.723
> 
> 标签：android, android-layout, android-asynctask

谁能告诉我这里出了什么问题？

```
public class BackgroungTask extends AsyncTask<String, Void, Void> {

    public Void doInBackground(String... params) {
       //tasks
       return;  //error occurs here!
    }

    public void onPostExecute(Void result) {
        //codes
    }
} 
```

上面的类不依赖于返回值。因此 onPostExceute() 只需执行其中编写的代码。

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T09:49:59.733

只返回null。

```
public class BackgroungTask extends AsyncTask<String, Void, Void> {

    public Void doInBackground(String... params) {
       //tasks
       return null; 
    }

    public void onPostExecute(Void result) {
        //codes
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T09:45:19.393

我认为你必须使用“return null;” 而不仅仅是“return;”，就像`Void`一个围绕通常“void”值的类。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-03T09:47:18.433

`doInBackGround`返回 null，作为一个[`Void`](http://developer.android.com/reference/java/lang/Void.html)对象（不 = void）..

```
public class BackgroungTask extends AsyncTask<String, Void, Void> {

public Void doInBackground(String... params) {
   //tasks
   return null;  //error occurs here!
}

public void onPostExecute(Void result) {
    //codes
}
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-03T09:47:33.450

AsyncTask 像这样工作

> onPreExecute -> doInBackGround -> onPostExecute

忽略progressUpdates 等，一旦doInBackGround 完成，控制就转到onPostExecute。简单的**返回**会中断此流程，从而导致错误。要解决这个问题，请用**return null**替换，因为它是无效的。return 语句参数作为参数传递给 onPostExecute，你可以在其中使用它来查看它是否成功。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T09:46:53.090

`doInBackGround`返回空值

```
public class BackgroungTask extends AsyncTask<String, Void, Void> {
 ....
 ....
} 
```

检查此[Android 开发文档](http://developer.android.com/reference/android/os/AsyncTask.html)以了解 andorid 中的异步任务

# multithreading - 线程完成时执行的回调

> ID：12705804
> 
> 赞同：0
> 
> 时间：2012-10-03T09:43:04.940
> 
> 标签：multithreading, c#-4.0, callback

**免责声明（完全可编辑/可删除）**

*我已经完成了我的作业，但据我所知，我看不到我想知道的东西（这有点令人惊讶，所以我相信一个善良的灵魂会将我标记为复制品- 请提前接受我的道歉，哈哈）。*

**背景和预期问题**

当我启动 Outlook 时，我正在从 CRM Dynamics 执行更新，这需要一段时间。所以，我决定把更新放在一个线程中。它按预期工作，**但**功能区上有一个按钮，允许用户手动调用更新。预计一个疯狂的用户，我意识到有人**会在原始更新完成****之前**点击按钮，并且各种粪便可能会撞击气体再分配器。

**建议的解决方案**

为了避免这种情况，我将私有财产如下。

```
private bool KeepYourPantsOn { get; set; } 
```

只要所述属性是`true`（在我开始更新线程之前将其设置为正确），所有疯狂的点击都将被忽略或由冷静和信息丰富的处理

```
MessageBox.Show("Yes, yes... Updating still... Keep your pants on."); 
```

但是一旦线程完成，我希望属性翻转以`false`使用户能够手动更新 Outlook。

**实施问题**

我的小问题是我没有找到任何要调用`OnFinished`的`WhenDone`等方法来切换`KeepYourPantsOn`. 此外，我还没有真正看到任何关于如何解决这个问题的建议解决方案（或者，更确切地说 - 我没有**看到**任何解决方案 - 由于对线程编程领域的无知，我可能已经看到了一个没有意识到的解决方案） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:00:39.327

您应该能够将 to 设置`bool`为`false`线程中的最后一行（或者，如果您的线程这样做，则作为循环返回等待某事之前的最后一行）。

请注意@Tudor 评论关于`volatile`- 只是为了确定，去做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:39:31.550

您可以为您的属性创建一个后备存储来保存该值，并`lock`在您设置或获取该值时使用 a 以确保不会出现并发问题。之后，当您开始在单独的线程上处理时，将值设置为`true`并在退出方法之前将值设置为`false`。

在用户单击时，只需检查`KeepYourPantsOn`属性的值，如果它仍然是，则显示消息`true`。

```
class YourClass
{
    private static readonly object _syncRoot = new object();
    private bool _keepYourPantsOn;

    public bool KeepYourPantsOn
    {
        get
        {
            lock(_syncRoot)
            {
                return _keepYourPantsOn;
            }
        }
        set
        {
            lock(_syncRoot)
            {
                _keepYourPantsOn = value;
            }
        }
    }

    private ThreadMethod()
    {
        KeepYourPantsOn = true; //signal that the update process is starting...
        // perform your logic
        KeepYourPantsOn = false; //signal that the update process is finished
    }

    public ManualUpdate()
    {
        if(KeepYourPantsOn)
            MessageBox.Show("Yes, yes... Updating still... Keep your pants on.");
        else
            Update();
    }
} 
```

# javascript - 不能在 JSP 内的 JavaScript 中使用 <（小于）符号

> ID：12705810
> 
> 赞同：0
> 
> 时间：2012-10-03T09:43:22.850
> 
> 标签：javascript, jspx

我正在尝试在 JavaScript 函数中使用 < 符号。这导致了一个问题，因为它也是开放标签符号。

```
<script type="text/javascript">
     function ValidatePercentage() {

        int NetValue = document.getElementById("_id4:netValue").value;
        int GrassValue = document.getElementById("_id4:grassValue").value;

           int percentValue =  (NetValue/GrassValue);
               if percentValue<80 {
                    alert(percent value too small)
       }
}
</script> 
```

我正在使用 JDeveloper 版本 10G。在 80 之前的 < 符号下出现一条红线。有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:47:58.153

您需要括号，并且您的警报也需要更改。

```
<script type="text/javascript">
     function ValidatePercentage() {

        int NetValue = document.getElementById("_id4:netValue").value;
        int GrassValue = document.getElementById("_id4:grassValue").value;

           int percentValue =  (NetValue/GrassValue);
               if (percentValue<80) {
                    alert('percent value too small');
       }
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:45:46.620

在 if 语句中使用括号：

```
if (percentValue<80) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T05:43:41.323

使用 CDATA 部分。

“<”和“&”之类的字符在 XML 元素中是非法的。

"<" 将产生错误，因为解析器将其解释为新元素的开始。"&" 将产生错误，因为解析器将其解释为字符实体的开始。

一些文本，如 JavaScript 代码，包含很多“<”或“&”字符。为避免错误，脚本代码可以定义为 CDATA。

解析器会忽略 CDATA 部分中的所有内容。

CDATA 部分以**"<![CDATA[" 开头并以 "]]>" 结尾：**

例子

```
<script>
 <![CDATA[
  function matchwo(a,b){
   if (a < b && a < 0) then {
     return 1;
   } else {
     return 0;
   }
  }
  ]]>
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-13T17:22:37.703

2018年我也有同样的问题！看起来扭转比较也有效。而不是使用'<'使用'>'。就我而言，我试图做

```
if ( i < 1 ) 
```

相反，我做到了

```
if ( i > 0 ) 
```

并且显然在 if 块中更改了我的代码。所以'>'没问题。

# c++ - 了解 openCV 2.4 中的感兴趣区域

> ID：12705817
> 
> 赞同：15
> 
> 时间：2012-10-03T09:43:40.747
> 
> 标签：c++, opencv

我知道在 OpenCV 2.1 中我们有一个设置 ROI 的函数：cvSetImageROI()，但在 2.4 中不存在这样的函数（或者至少我在它的手册和帮助部分中找不到它。）

然而，这是我能找到的唯一有用的代码，它使用 opencv 2.4 获得法师 ROI，但我无法理解它：

```
// define image ROI
cv::Mat imageROI;
imageROI= image(cv::Rect(385,270,logo.cols,logo.rows));
// add logo to image 
cv::addWeighted(imageROI,1.0,logo,0.3,0.,imageROI); 
```

在这里，他们想在原始图像右下角的大图像中添加一个非常小的日志。

所以我从这里了解到的是，创建了另一个矩阵来保存 ROI。它的尺寸使用 rect 函数给出，大小等于他们要添加的小标志的大小。

然后 thsi 让我感到困惑：`cv::addWeighted(imageROI,1.0,logo,0.3,0.,imageROI);`这里 addWeighted 的源 1 是 ROI 尺寸集，源 2 是徽标，目标也是 ROI 尺寸集。这个对吗？还是我错过了什么？

在此之后，将显示结果，并将徽标添加到大图像中。这些命令中包含的大图像在哪里。

同样在问这里之前，我想自己尝试代码以帮助澄清情况。但我收到此错误，因为无法识别 image()：`'image': identifier not found`

```
int _tmain(int argc, _TCHAR* argv[])
{
Mat src1, imageROI, logo;

logo = imread("c:\\car1.jpg", -1);

imageROI= image(Rect(385,270,logo.cols,logo.rows));

addWeighted(imageROI,1.0,logo,0.3,0.,imageROI);

namedWindow("meh", CV_WINDOW_AUTOSIZE);
imshow("meh", imageROI);
waitKey(0);

return 0; 
```

}

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-03T10:04:42.253

```
cv::Mat imageROI;
imageROI= image(cv::Rect(385,270,logo.cols,logo.rows)); 
```

cv::Mat 构造函数将矩形作为参数：

```
Mat::Mat(const Mat& m, const Rect& roi) 
```

返回一个矩阵，该矩阵指向原始图像的 ROI，位于矩形指定的位置。所以 imageROI 实际上是原始图像“图像”的感兴趣区域（或子图像/子矩阵）。如果您修改 imageROI，它将因此修改原始的、更大的矩阵。

至于您的示例，问题是您正在从不存在的对象（图像）调用构造函数。你应该更换：

```
imageROI= image(Rect(385,270,logo.cols,logo.rows)); 
```

经过：

```
imageROI= src1(Rect(385,270,logo.cols,logo.rows)); 
```

假设 src1 是您要将徽标插入其中的“大图像”（徽标是 car1.jpg）。顺便说一句，你不应该忘记先阅读你的大图！

# sencha-touch-2 - 在 sencha touch2 中显示来自 php 文件的数据

> ID：12705821
> 
> 赞同：0
> 
> 时间：2012-10-03T09:43:54.527
> 
> 标签：sencha-touch-2

如何使用 sencha touch2 显示 php 文件中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:57:42.803

你有几种方法可以实现它，但对我来说，我将使用 json 和`Ext.ajax.request`

例如我`example.php`看起来很简单，如下所示：

```
$array = array(
    "go" => true,
    "message" => "Thank you for your message",
); 
```

正如我所说，我使用的是 json，所以我需要对它进行编码`$array`以便稍后在视图中检索它

```
echo json_encode($array); 
```

然后在您看来，您可以使用从 php 文件中获取数据，`Ext.util.JSONP.request()`但在这里我将通过以下方式处理它`Ext.Ajax.request()`：

```
Ext.Ajax.request({
  values : paramValues // values that you want to pass to example.php
  url: 'example.php',

  success: function(response) {
      //Here you need to decode the json data
      var data    = Ext.decode(response.responseText)
          go      = data.go,
          message = data.message;
      console.log(message); //Thank you for your message
  }

  failure: function(response) {
      console.log(response.responseText);
  }
}); 
```

这可能不是最好的方法，可能有错误，但至少我希望它会有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:23:51.480

创建一个 JSON 存储并将 url 设置为 php 文件。在 php 文件中使用 json_encode() 回显响应；

# ios - 自动缩小后如何获取UILabel中文本的磅值

> ID：12705822
> 
> 赞同：1
> 
> 时间：2012-10-03T09:43:54.950
> 
> 标签：ios, uikit

我有一个 UILabel，其中的文本会自动缩小以适应。一旦发生这种情况，我需要知道生成字体的磅值，以便我可以在别处的另一个标签中设置完全相同的大小。

如果我访问 label.font.pointSize 我会返回原始大小，而不是缩小后的大小。所以我然后尝试使用这个 NSString 添加来计算字体大小：

```
- (CGSize)sizeWithFont:(UIFont *)font minFontSize:(CGFloat)minFontSize actualFontSize:(CGFloat *)actualFontSize forWidth:(CGFloat)width lineBreakMode:(UILineBreakMode)lineBreakMode 
```

但是，这对我也不起作用，因为 if 没有考虑标签的高度约束，只考虑它的宽度。（在我的情况下，字体需要进一步缩小以适应框架的高度）。

这似乎给我留下了一个绝对可怕的选择，那就是反复调用以下函数，直到我找到实际适合框架的最大高度：

```
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(UILineBreakMode)lineBreakMode 
```

显然，这将是非常低效和讨厌的。

有没有人有更好的解决方案？

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:40:29.033

好吧，在没有人可以为我提供更好的选择的情况下，我想我会分享一个我为解决问题而编写的类别。

但是，如果有一种直接的方法可以访问 UILabel 的缩小字体大小，那显然是理想的......

事不宜迟，此函数将返回适合约束大小的自动缩小字体大小。

界面：

```
 @interface NSString (FontSize)

- (CGSize)sizeWithFont:(UIFont *)font
           minFontSize:(CGFloat)minFontSize
        actualFontSize:(CGFloat *)actualFontSize
     constrainedToSize:(CGSize)maxSize
         lineBreakMode:(UILineBreakMode)lineBreakMode;

@end 
```

执行：

```
@implementation NSString (FontSize)

- (CGSize)sizeWithFont:(UIFont *)font
           minFontSize:(CGFloat)minFontSize
        actualFontSize:(CGFloat *)actualFontSize
     constrainedToSize:(CGSize)maxSize
         lineBreakMode:(UILineBreakMode)lineBreakMode
{
    CGFloat size;
    CGSize boundingBox;

    // First, get the OS to fit the text into the width

    boundingBox = [self sizeWithFont:font
                         minFontSize:minFontSize
                      actualFontSize:&size
                            forWidth:maxSize.width
                       lineBreakMode:lineBreakMode];

    // Return here if the min size has already been reached

    if (size <= minFontSize)
    {
        *actualFontSize = size;
        return boundingBox;
    }

    // Binary search biggest size that will fit within the height of the box    

    CGFloat upperBound = size;
    CGFloat lowerBound = minFontSize;

    UIFont *f;
    CGFloat fontSize;
    while (upperBound > lowerBound + 0.5) {

        fontSize = (upperBound + lowerBound) / 2;

        f = [UIFont fontWithName:font.fontName size:fontSize];
        boundingBox = [self sizeWithFont:f];

        if (boundingBox.height > maxSize.height)
            upperBound = fontSize - 0.5;
        else
            lowerBound = fontSize;
    }

    // Return the result

    *actualFontSize = fontSize;
    return boundingBox;
}

@end 
```

# iphone - 保存在 NSUserDefaults

> ID：12705835
> 
> 赞同：1
> 
> 时间：2012-10-03T09:44:41.147
> 
> 标签：iphone, objective-c, ios, nsuserdefaults

我在如何/在哪里保存我`NSUserDefaults`的 for`applicationDidEnterBackground`和时遇到问题，当用户退出应用程序或进入后台时`applicationWillTerminate`，我需要从另一个保存我的`NSArray`计数。但我不知道我是否会保存正确的，因为当我删除它时我的计数正在更新。我无法将其保存在和上。希望有人会帮忙。谢谢你。`NSUserDefaults``UIViewController``integer``NSArray``UIView``viewDidLoad``viewDidAppear`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:51:26.403

如果您需要从另一个 ViewController 保存，那么最好添加`NSMutableArray`appDelegate。每当您删除或添加对象时，请保存数组的计数，因为它将像这样覆盖：

```
 [[NSUserDefaults standardUserDefaults] setInteger:[yourArray count] forKey:@"Count"];
 [[NSUserDefaults standardUserDefaults] synchronize]; 
```

**像这样检索：**

```
 NSInteger count = [[NSUserDefaults standardUserDefaults] integerForKey:@"Count"]; 
```

**编辑**: `synchronize`: 将对持久域的任何修改写入磁盘，并将所有未修改的持久域更新到磁盘上的内容。

参考[NSUserDefaults_Class](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)明确说明会定期调用，我们不必等待他们的调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:35:22.923

您可以使用此代码将值保存到`NSUserDefaults`

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:yourArray forKey:@"YourKey"]
[defaults synchronize]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T06:38:39.243

有关使用 NSUserDefault 的详细信息，请检查此

*   `[[NSUserDefaults standardUserDefaults] setBool:<#(BOOL)#> forKey:<#(NSString *)#>]`，这是为布尔值添加的`setInt/setFloat/SetDouble etc`，甚至是*ObjectiveC* `objects`的`setValue/setObject`。

    ```
    [[NSUserDefaults standardUserDefaults] setValue:<#(id)#> forKey:<#(NSString *)#>];
    [[NSUserDefaults standardUserDefaults] setObject:<#(id)#> forKey:<#(NSString *)#>]; 
    ```

*   要检索值，您可以使用`getters`like `boolForKey`( `[[NSUserDefaults standardUserDefaults] boolForKey:<#(NSString *)#>]`) `intForKey etc.`。

*   用于`removeObjectForKey`移除对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:51:37.440

在您的 appDelegate 类中创建所需的 NSMutableArray，即创建 NSMutableArray iVar 的属性，然后您可以在任何类中更新、添加、删除其中的内容。因此，您将在 applicationDidEnterBackground 和 applicationWillTerminate 通知函数中获取数组计数appDelegate 函数本身和数组计数应该是准确的..

在你的AppDelegate.h

创造 ..

```
 @interface yourAppDelegate : UIResponder <UIApplicationDelegate>{
    NSMutableArray *myArray;
    }
@property(nonatomic,strong)NSMutableArray *myArray; //replace strong by retain if ios <5 
```

在 yourAppDelegate.m

@synthesize myArray;

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *
)launchOptions{
     self.myArray = [NSMutableArray array];
} 
```

进一步在 appDelegate.m 文件中所需的功能

```
- (void)applicationWillTerminate:(UIApplication *)application
{
[[NSUserDefaults standardDefaults]setValue:[NSNumber numberWithInt:[self.myArray count] forKey:@"myOwnKey"]];
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
} 
```

如果您想在任何其他类中向此数组添加对象，只需创建 yourAppDelegate 的委托。

例如在 A 类的 viewDidLoad 中，

```
-(void)viewDidLoad{  // assuming viewController A

YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplicatio sharedApplication]delegate];
[appDelegate.myArray addObject:@"1232"];
} 
```

# jsf - 在固定大小的表格中设置 JSF 列标题的宽度

> ID：12705836
> 
> 赞同：4
> 
> 时间：2012-10-03T09:44:41.587
> 
> 标签：jsf, datatable, facet, column-width

我有一个带有 table-layout:fixed 的 JSF 数据表，我正在尝试为每列设置基于百分比的宽度。我想如果我在 IE 的标题中添加一个宽度属性，那么它会按预期工作。但是，我不知道如何在代码中添加这个宽度属性。我在构面标题中添加了一个属性，但这不起作用。在列标签内设置它也不起作用。

如果有人可以帮助我，将不胜感激。

```
<h:column>
     <f:facet name="header">
         <h:outputText 
             value="#{messageSource['tasks.headline.task']}" />
             <f:attribute name="width" value="20%"/>
     </f:facet>
     <t:commandLink id="lookAtTask" action="lookAtTask">
         <t:updateActionListener property="#{flowScope.localTask}"
             value="#{data.task}" />
         <h:graphicImage url="/images/icon_properties_16x16.gif"
             alt="#{messageSource['tasks.headline.task']}" />
     </t:commandLink>
</h:column> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T12:12:22.630

您可以使用 的`headerClass`属性`<h:column>`来指定标题的样式类。

```
<h:dataTable ...>
    <h:column headerClass="col1">
        <f:facet name="header">...</f:facet>
        ...
    </h:column>
    <h:column headerClass="col2">
        <f:facet name="header">...</f:facet>
        ...
    </h:column>
    <h:column headerClass="col3">
        <f:facet name="header">...</f:facet>
        ...
    </h:column>
</h:dataTable> 
```

例如这个 CSS

```
.col1 { width: 20%; }
.col2 { width: 30%; }
.col3 { width: 50%; } 
```

# sinatra - 如何在 sinatra post 方法中处理多个 if 语句

> ID：12705837
> 
> 赞同：-1
> 
> 时间：2012-10-03T09:44:41.837
> 
> 标签：sinatra, checkbox

我正在尝试根据我的复选框的值做多项事情。我在 htlm 表单上有这个：

`<input id="one" checkbox" type="checkbox" value="1">`

`<input id="two" checkbox" type="checkbox" value="2">`

并在 Sinatra 帖子 '/process-data' 中执行 one = params[:one] two = params[:two]

```
 if one = "1"
    "One"
   end
   if two = "2"
    "Two"
   end 
```

结尾

我无法从第二个 if 语句中得到结果，我的问题是，我如何让 Sinatra 能够从第二个 if 中获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:37:02.877

尝试：

```
"One" if one == "1"
"Two" if two == "2" 
```

您正在使用`=`而不是`==`or `===`。

# ajax - ASP MVC-3：发布后更新 AJAX 表单数据的问题

> ID：12705838
> 
> 赞同：5
> 
> 时间：2012-10-03T09:44:48.187
> 
> 标签：ajax, asp.net-mvc, jquery

提交后通过 AJAX 更新 for 时遇到以下问题。由于某种原因，返回的 HTML 上的一些隐藏字段没有被更新，这很奇怪，因为当我运行调试器时，它们似乎具有正确的值。

这是我表格的相关部分

```
<div id="itemPopUpForm">
    @{Html.EnableClientValidation();}
    @Html.ValidationSummary()
    <div id="formDiv">
        @{ Html.RenderPartial("ItemData", Model, new ViewDataDictionary() { { "Machines", ViewBag.Machines }, { "WarehouseList", ViewBag.WarehouseList }, { WebConstants.FORM_ID_KEY, @ViewData[WebConstants.FORM_ID_KEY] } }); }
    </div>
</div> 
```

然后局部视图包含像这样的隐藏字段，这些字段没有被更新

```
@using (Html.BeginForm("Index", "Item", FormMethod.Post, new { id = "frmItem", name = "frmItem" }))
{ 
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.Item.SodID)
    @Html.HiddenFor(model => Model.Item.ItemID) //The itemID needs updating when an item is copied
    @Html.HiddenFor(model => model.Item.Delivery.DeliveryAddressID, new { @id = "delAddressID" }) 
```

这是更新表单的javascript方法

```
function ajaxSave() {
        if (!itemValid()) return; 
        popup('ajaxSplash');
        $.ajax({
            type: "POST",
            url: '@Url.Action("Index")',
            data: $("#frmItem").serialize(),
            success: function (html) {
                console.log(html);
                $("#formDiv").html(html);
                initItemPage();
                alert("Item was saved successfully");
            },
            error: function () { popup('ajaxSplash'); onFailure(); }
        });
    } 
```

操作索引返回部分视图“ItemData”，当我检查项目模型时，它确实具有正确的值，但是当我看到返回的 html 时，它仍然设置为 0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:49:13.383

如果您打算在 POST 操作中修改模型属性，请不要忘记先将其从 ModelState 中删除，否则 HTML 助手将在渲染时使用最初发布的值：

```
[HttpPost]
public ActionResult Index(MyViewModel model)
{
    // remove the value from modelstate
    ModelState.Remove("Item.ItemID");

    // update the value
    model.Item.ItemID = 2;   

    return PartialView(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T23:23:26.667

# asp.net - 使用 EntityFramework 在 setter 中进行验证

> ID：12705844
> 
> 赞同：0
> 
> 时间：2012-10-03T09:45:16.127
> 
> 标签：asp.net, entity-framework

使用实体框架。我创建了一个对象注册，其属性“AmmountOfChildren”，最大值设置为 50。我想在设置器中验证以确保最大数量为 50。我该如何以最好的方式进行？

```
 public global::System.Int16 AmmountOfChildren
    {
        get
        {
            return _AmmountOfChildren;
        }
        set
        {
            OnAmmountOfChildrenChanging(value);
            ReportPropertyChanging("AmmountOfChildren");
            _AmmountOfChildren = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("AmmountOfChildren");
            OnAmmountOfChildrenChanged();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:20:02.913

最简单的方法是将 System.ComponentModel.DataAnnotations.RangeAttribute 放在属性上：

```
[Range(0, 50)]
public global::System.Int16 AmmountOfChildren 
```

这将导致在调用 SaveChanges 时验证属性。

# android - 动态设置LinearLayout的宽度？

> ID：12705846
> 
> 赞同：1
> 
> 时间：2012-10-03T09:45:22.440
> 
> 标签：android, width, android-linearlayout

我想制作自己的自定义“进度条”。我通过绘制线性布局来做到这一点，每个布局都有不同的颜色。之后，我想为它们中的每一个分配一个宽度，使其看起来像一个进度条。我现在拥有的东西：

我的 CustomAdapter 项目的 XML 文件（在 Gridview 中）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#33c2bd" >
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/lineScore"
        android:layout_width="20dp"
        android:layout_height="2dp"
        android:background="#eef05e" 
        android:paddingLeft="20dp"
        android:paddingTop="0dp"
        android:paddingBottom="20dp"
        android:layout_below="@+id/tvLevelScore"/>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/lineScoreTotal"
        android:layout_width="20dp"
        android:layout_height="2dp"
        android:background="#0d7975" 
        android:paddingRight="20dp"
        android:paddingTop="0dp"
        android:paddingBottom="20dp"
        android:layout_below="@+id/tvLevelScore"
        android:layout_toRightOf="@+id/lineScore"/>

</RelativeLayout> 
```

然后在 getView 方法下的 CustomAdapter 类中，我尝试将 lineScoreTotal 设置为项目宽度的 80%：

```
double viewWidth = (double) mView.getWidth();
            int widthScoreBar = (int) (viewWidth * 0.8);
            LinearLayout ln = (LinearLayout) mView.findViewById(R.id.lineScoreTotal);
            ln.layout(0, 2, widthScoreBar, -1); 
```

但是，它什么也没做......我是否应用了错误的代码来设置宽度？还是我使用 LinearLayout 来绘制那些“条”的想法可能是错误的做法？

编辑 getView 方法：

```
@Override
    public View getView(int position, View v, ViewGroup parent) {
        View mView = v;

        if (mView == null) {

            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);
            mView = vi.inflate(R.layout.levelselector_item, null);

        }

        TextView level = (TextView) mView.findViewById(R.id.tvLevel);
        TextView levelScore = (TextView) mView.findViewById(R.id.tvLevelScore);

        if (mView != null) {

            level.setText(Integer.toString(getItem(position).getLevel()));

            loadDataBase();
            int correctAnswers = myDbHelper.getCorrectAnswers(getItem(position).getLevel());
            correctAnswersPrev = 0;
            correctAnswersPrev = myDbHelper.getCorrectAnswersPrev(getItem(position).getLevel());

            String correct = Integer.toString(correctAnswers);

            levelScore.setText(correct + "/60");
            level.setTypeface(font);
            levelScore.setTypeface(font);

            LinearLayout ln = (LinearLayout) mView.findViewById(R.id.lineScoreTotal);
            ln.setLayoutParams(new FrameLayout.LayoutParams(10, 10));
}
        return mView;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:52:57.457

尝试任何一种方式

**没有重力**

```
ln.setLayoutParams(new LinearLayout.LayoutParams(
LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT)); 
```

**或重力**

```
ln.setLayoutParams(new LinearLayout.LayoutParams(
LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT,1f)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:53:27.590

```
ln.setLayoutParams(new
       LayoutParams(widthScoreBar,LayoutParams.WRAP_CONTENT)); 
```

尝试使用 LayoutParams 进行设置。

# javascript - 从文本框中检索 html 并在弹出窗口中显示

> ID：12705847
> 
> 赞同：0
> 
> 时间：2012-10-03T09:45:23.223
> 
> 标签：javascript, jquery

我正在从包含 html 的文本框中检索一个字符串，例如`<html><head><body><div></div></body></head></html>`.

基本上我已经从文本框中获得了内容，但无法让弹出窗口像 html 页面一样显示。

在我的 jquery 代码中，我有

```
 var html = document.getElementById('<%=txtHtmlBody.ClientID%>').value;
          $(html).dialog(); 
```

此刻内容看起来像是被压扁成一个小盒子，背景是透明的。我怎样才能让它像弹出窗口中的 html 页面一样显示？，任何帮助表示感谢提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:51:38.983

您需要一个`div`充满文本框内容的内容。

```
var myhtml = document.getElementById('<%=txtHtmlBody.ClientID%>').value;
$('#mydiv').html(myhtml);
$('#mydiv').dialog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:56:38.607

您应该在页面中添加一个空元素。

```
<div id="dialog"></div> 
```

因此，将字段值放入您的元素中，并显示以下内容：

```
$('#dialog').html($('#<%=txtHtmlBody.ClientID%>').val());
$('#dialog').dialog(); 
```

# python - 如何在其他功能中重用用户的原始输入

> ID：12705850
> 
> 赞同：0
> 
> 时间：2012-10-03T09:45:27.620
> 
> 标签：python, python-2.7

我正在为硬件制作一个用于 python 的 2D 棋盘游戏。

我要求用户输入一个整数作为电路板大小。比如 7\. 发帖前我做了一些修改（只显示重要的）。功能如下

```
def asksize():           
    while True:
        ask=raw_input("Input board size: ")  
        try:
            size=int(ask)
            return size

        except ValueError: 
            print "Please enter a integer" 
```

因为它是可变棋盘尺寸，我需要在其他功能中重复使用可变尺寸，用它来检查用户的移动是否有效，我怎样才能重复使用变量？

```
def checkmove(move):    
    #move is sth like eg. A1:B2
    move=move.split(":") #I split it so it becomes ['A','1']['B','2']  
    if size>=int(move[0][1]) and int(move[0][1])>=1 and size>=int(move[1][1]) and int(move[1][1])>=1: #for example if board size is 7, this is to check whether user input is between 1 to 7 within the board
        return True
    else:
        return False 
```

在我的 checkmove 函数中，我不能在我的参数中使用 size 因为它没有定义，我怎样才能使它可行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:59:33.467

将可变大小设为全局是一种选择，但您应该将您的函数视为 API，并在游戏主按钮上使用它们。

所以像这样存储输入：

```
size = asksize() #store the data on to variable called size
#then just call your check move
checkmove(x) 
```

无论如何，这是一个不好的练习，最好通过游戏代码中的函数传递变量：

```
#definitions
def asksize():
    #your code here
def checkmove(move, size):
    #your code here

#game set up here
size = asksize()
#more set up stuff
#end of game set up
#Game Main code

while True: #main game bucle
#Game stuff here
checkmove(move, size)
#more game stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:13:47.893

考虑创建一个类来代表董事会。那么size自然是一个实例变量

```
class Board(object):

    def asksize(self):           
        while True:
            ask=raw_input("Input board size: ")  
            try:
                self.size=int(ask)
                return        
            except ValueError: 
                print "Please enter a integer"   

    def checkmove(self, move):    
        #move is sth like eg. A1:B2
        move=move.split(":") #I split it so it becomes ['A','1']['B','2']  
        if self.size>=int(move[0][1]) and int(move[0][1])>=1 and self.size>=int(move[1][1]) and int(move[1][1])>=1: #for example if board size is 7, this is to check whether user input is between 1 to 7 within the board
            return True
        else:
            return False 

# Use it like this
board = Board()
board.asksize()
move = some_function_that_returns_a_move()
board.checkmove(move) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:48:53.137

你有（至少）两个选择：

1.  `size`作为函数中的参数传递`checkmove`。
2.  调用函数`size= asksize()`。`checkmove`

*我想说将大小作为参数传递更有意义，因为这样你就可以为 AI 播放器重用相同的函数......*

那是：

```
def checkmove(move, size):
    # rest of definition

# main bit of code

size = asksize()
checkmove(move, size) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-10T08:51:42.920

或者简单地将“大小”作为全局变量，无论如何python都会在下一个更高的范围内搜索变量。你可以这样尝试：

```
size = 0
def asksize():
    global size
    while True:
        ask=raw_input("Input board size: ")
        try:
            size=int(ask)
            return size

        except ValueError:
            print "Please enter a integer"

def checkmove(move):
    global size
    # move is sth like eg. A1:B2
    move = move.split(":")  # I split it so it becomes ['A','1']['B','2']  
    if size >= int(move[0][1]) and int(move[0][1]) >= 1 and size >= int(move[1][1]) and int(move[1][
                                                                                                1]) >= 1:  # for example if board size is 7, this is to check whether user input is between 1 to 7 within the board
        return True
    else:
        return False 
```

# sql - 如何构造 SQL - 为列的每个值选择前 X 行？

> ID：12705851
> 
> 赞同：0
> 
> 时间：2012-10-03T09:45:29.917
> 
> 标签：sql, postgresql, sorting, query-optimization, filtering

我有一个包含以下类型数据的表：

```
create table store (
    n_id             serial not null primary key,
    n_place_id       integer not null references place(n_id),
    dt_modified      timestamp not null,
    t_tag            varchar(4),
    n_status         integer not null default 0
    ...
    (about 50 more fields)
); 
```

在下面的查询中使用的 n_id、n_place_id、dt_modified 和所有其他字段都有索引。

该表目前包含大约 100,000 行，但可能会增长到接近一百万甚至更多。然而，现在让我们假设我们保持在 100K 左右。

我正在尝试从这些表中选择满足两个条件的行：

1.  `n_place_id`位于特定子集中的所有行（这部分很简单）；或者
2.  对于所有其他`n_place_id`值，前十行排序依据`dt_modified`（这是变得更加复杂的地方）。

在一个 SQL 中做这件事似乎太痛苦了，所以我很高兴有一个存储函数。我的函数是这样定义的：

```
create or replace function api2.fn_api_mobile_objects()
  returns setof store as
$body$
declare
    maxres_free integer := 10;
    resulter    store%rowtype;
    mcnt        integer := 0;
    previd      integer := 0;
begin
    create temporary table paid on commit drop as
    select n_place_id from payments where t_reference is not null and now()::date between dt_paid and dt_valid;

    for resulter in
        select * from store where n_status > 0 and t_tag is not null order by n_place_id, dt_modified desc
    loop
        if resulter.n_place_id in (select n_place_id from paid) then
            return next resulter;
        else
            if previd <> resulter.n_place_id then
                mcnt := 0;
                previd := resulter.n_place_id;
            end if;

            if mcnt < maxres_free then
                return next resulter;
                mcnt := mcnt + 1;
            end if;
        end if;
    end loop;
end;$body$
  language 'plpgsql' volatile; 
```

问题是

```
select * from api2.fn_api_mobile_objects() 
```

执行大约需要 6-7 秒。考虑到之后需要将此结果集`join`编辑到其他 3 个表，并应用一堆附加条件并应用进一步排序，这显然是不可接受的。

好吧，我仍然需要获取这些数据，所以要么我在函数中遗漏了一些东西，要么我需要重新考虑整个算法。不管怎样，我需要这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:11:23.117

```
CREATE TABLE store
    ( n_id             serial not null primary key
    , n_place_id       integer not null -- references place(n_id)
    , dt_modified      timestamp not null
    , t_tag            varchar(4)
    , n_status         integer not null default 0
        );
INSERT INTO store(n_place_id,dt_modified,n_status)
SELECT n,d,n%4
FROM generate_series(1,100) n
, generate_series('2012-01-01'::date ,'2012-10-01'::date, '1 day'::interval ) d
        ;

WITH zzz AS (
        SELECT n_id AS n_id
        , rank() OVER (partition BY n_place_id ORDER BY dt_modified) AS rnk
        FROM store
        )
SELECT st.*
FROM store st
JOIN zzz ON zzz.n_id = st.n_id
WHERE st.n_place_id IN ( 1,22,333)
OR zzz.rnk <=10
        ; 
```

更新：这里是与子查询相同的自连接结构（CTE 被规划器处理得有点不同）：

```
SELECT st.*
FROM store st
JOIN ( SELECT sx.n_id AS n_id
        , rank() OVER (partition BY sx.n_place_id ORDER BY sx.dt_modified) AS zrnk
        FROM store sx
        ) xxx ON xxx.n_id = st.n_id
WHERE st.n_place_id IN ( 1,22,333)
OR xxx.zrnk <=10
        ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:51:33.613

经过一番努力，我设法让存储的函数在 1 秒多的时间内返回结果（这是一个巨大的改进）。现在函数看起来像这样（我添加了附加条件，对性能影响不大）：

```
create or replace function api2.fn_api_mobile_objects(t_search varchar)
  returns setof store as
$body$
declare
    maxres_free integer := 10;
    resulter    store%rowtype;
    mid     integer := 0;
begin
    create temporary table paid on commit drop as
    select n_place_id from payments where t_reference is not null and now()::date between dt_paid and dt_valid
    union
    select n_place_id from store where n_status > 0 and t_tag is not null group by n_place_id having count(1) <= 10;

    for resulter in
        select * from store
        where n_status > 0 and t_tag is not null
        and (t_name ~* t_search or t_description ~* t_search)
        and n_place_id in (select n_place_id from paid)
    loop
        return next resulter;
    end loop;

    for mid in
        select distinct n_place_id from store where n_place_id not in (select n_place_id from paid)
    loop
        for resulter in
            select * from store where n_status > 0 and t_tag is not null and n_place_id = mid order by dt_modified desc limit maxres_free
        loop
            return next resulter;
        end loop;
    end loop;

end;$body$
  language 'plpgsql' volatile; 
```

这在我的本地机器上运行只需 1 秒多一点，而在现场运行大约需要 0.8-1.0 秒。就我的目的而言，这已经足够了，尽管我不确定随着数据量的增长会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:32:00.237

作为一个简单的建议，我喜欢进行这种故障排除的方式是构建一个查询，让我大部分时间到达那里，并适当地优化它，然后在它周围添加必要的 pl/pgsql 东西。这种方法的主要优点是您可以根据查询计划进行优化。

此外，如果您不处理很多行，array_agg() 和 unnest() 是您的朋友，因为它们允许您（在 Pg 8.4 及更高版本上！）省去临时表管理开销并简单地构造和查询数组内存中的元组作为关系。如果您只是在内存中访问数组而不是临时表，它也可能会执行得更好（更少的计划开销和更少的查询开销）。

同样在您更新的查询中，我会考虑用子查询或连接替换最终循环，从而允许规划器决定何时进行嵌套循环查找或何时尝试找到更好的方法。

# java - 如何使用一部手机的相机拍照并使用蓝牙处理第二部手机？

> ID：12705856
> 
> 赞同：-2
> 
> 时间：2012-10-03T09:45:39.587
> 
> 标签：java, android, android-emulator

我是 Smit Patel，正在为我在大学的最后一年项目开发一个 android 应用程序。

我必须使用 android 手机，我想使用我的一部手机的相机而不用触摸它，只有蓝牙打开。现在我使用第二部开启蓝牙的手机，我想处理我第一部手机的相机并将那张照片显示给我的第二部。

有小伙伴对此有想法吗？请帮帮我...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:11:48.600

我不认为您可以仅使用蓝牙远程控制其他手机系统应用程序。这些都是非常敏感的事情，如果获得访问权限，就会在智能手机中造成严重破坏。您首先需要了解为什么**安全性**至关重要。如果他能做到这一点，黑客会喜欢的。他只需打开蓝牙就可以访问敏感数据！因此，请将您的项目更改为更安全的东西。

# sql - 如何在以下场景中使用 Oracle Group BY

> ID：12705869
> 
> 赞同：2
> 
> 时间：2012-10-03T09:46:13.833
> 
> 标签：sql, oracle, group-by

下面是一个非常基本的场景。

`GROUP BY`即使在经历了很多例子之后，我也很难理解它是如何工作的。

在下面的场景中，我需要获取日期的最小值，并且需要将我的查询 1 转换为查询 2。

查询1：

```
SELECT b.aper07_req_created_s,
       b.aper06_req_status_k,
       a.aper06_req_status_x
FROM   iaper07_employee_offbrd_req b,
       iaper06_req_status a
WHERE  a.aper06_req_status_k = b.aper06_req_status_k
       AND b.aper07_req_k = 3387
       AND b.aper06_req_status_k = 4
ORDER  BY b.aper07_req_created_s 
```

查询2：

```
SELECT Min(b.aper07_req_created_s),
       b.aper06_req_status_k,
       a.aper06_req_status_x
FROM   iaper07_employee_offbrd_req b,
       iaper06_req_status a
WHERE  a.aper06_req_status_k = b.aper06_req_status_k
       AND b.aper07_req_k = 3387
       AND b.aper06_req_status_k = 4
GROUP  BY b.aper06_req_status_k,
          a.aper06_req_status_x
ORDER  BY b.aper07_req_created_s 
```

查询 2 未能说明它不是按表达式分组。

任何人都可以通过一些解释帮助我理解如何正确获取第二个查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:53:12.137

在您的查询 2 中，该`ORDER BY`子句无效。

在 a 之后（因此，`GROUP BY`在和部分），表达式必须基于 GROUP-BY 列、常量或其他列的聚合函数。`HAVING``ORDER BY``SELECT`

你可以`ORDER BY MIN(b.aper07_req_created_s)`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:03:23.913

可能您的问题在于`ORDER BY b.aper07_req_created_s`，尝试将其替换为：

按最小值排序（b.aper07_req_created_s）：

```
 SELECT Min(b.aper07_req_created_s),
           b.aper06_req_status_k,
           a.aper06_req_status_x
    FROM   iaper07_employee_offbrd_req b,
           iaper06_req_status a
    WHERE  a.aper06_req_status_k = b.aper06_req_status_k
           AND b.aper07_req_k = 3387
           AND b.aper06_req_status_k = 4
    GROUP  BY b.aper06_req_status_k,
              a.aper06_req_status_x
    ORDER  BY Min(b.aper07_req_created_s) 
```

按 1 订购：

```
 SELECT Min(b.aper07_req_created_s),
           b.aper06_req_status_k,
           a.aper06_req_status_x
    FROM   iaper07_employee_offbrd_req b,
           iaper06_req_status a
    WHERE  a.aper06_req_status_k = b.aper06_req_status_k
           AND b.aper07_req_k = 3387
           AND b.aper06_req_status_k = 4
    GROUP  BY b.aper06_req_status_k,
              a.aper06_req_status_x
    ORDER  BY 1 
```

您还可以使用别名：

```
 SELECT Min(b.aper07_req_created_s) minemp,
           b.aper06_req_status_k,
           a.aper06_req_status_x
    FROM   iaper07_employee_offbrd_req b,
           iaper06_req_status a
    WHERE  a.aper06_req_status_k = b.aper06_req_status_k
           AND b.aper07_req_k = 3387
           AND b.aper06_req_status_k = 4
    GROUP  BY b.aper06_req_status_k,
              a.aper06_req_status_x
    ORDER  BY minemp 
```

[在这里](http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions001.htm)您可以找到更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:11:06.610

尝试解释`GROUP BY`SQL 中的工作原理：（
我会说）它以与您期望它工作的完全相同的逻辑方式工作。
如果你有一篮子水果，并且你想通过分组类型来计算你拥有的所有水果，你会这样做：

```
SELECT groupingType, count(groupingType)
FROM fruitBasket
GROUP BY groupingType 
```

如果您使用水果类型（苹果、梨...）作为分组类型，那么您将无法在结果中获得水果颜色，因为它们（苹果、梨...）可能具有不同的颜色。同样，如果您按颜色分组，您将无法获得水果类型...

# blackberry - Blackberry Java-Labelfield 监听器。我想如果有人点击一个标签那么它应该触发一个功能/

> ID：12705870
> 
> 赞同：1
> 
> 时间：2012-10-03T09:46:18.870
> 
> 标签：blackberry, listener, blackberry-jde

我想如果有人点击一个标签，那么它应该触发一个功能。就像我想要的那样，如果用户单击标签，那么它应该转到另一个页面。以下是我尝试过的代码。

提前致谢！！

```
LabelField joinGroups = new LabelField("Join Groups",LabelField.FOCUSABLE ){
              protected void layout(int width, int height) {
                  super.layout(width, height);
                  this.setExtent(1000, 44);
                   }
              };

 FChangeListener customListenerSurveys = new FieldChangeListener() {   
                         public void fieldChanged(Field field, int context) {    

                            Dialog.alert("Surveys Clicked!");
                         }
                         };
joinGroups.setFocusListener(customListenerSurveys); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:52:51.503

试试导航咔哒声。

```
LabelField joinGroups = new LabelField("Join Groups",LabelField.FOCUSABLE ){
    protected boolean navigationClick(int status, int time){
    Dialog.alert("Surveys Clicked!");
    return true;
    }
 }; 
```

![在此处输入图像描述](../Images/19291796119e4c4f2611821228f6e09c.png)

# iphone - Xcode：新的故事板连接

> ID：12705872
> 
> 赞同：0
> 
> 时间：2012-10-03T09:46:22.350
> 
> 标签：iphone, xcode, ipad, storyboard

创建新的故事板后，我无法再通过控制从按钮拖动到 IBAction 将按钮连接到我的 .h 头文件 - 使用 Xcode 4.3 - 我没有收到任何错误 - 我仍然可以将按钮连接到我以前的 iPhone 故事板，但不适用于 iPad 的故事板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:30:58.217

![](../Images/2e9fb0bfdac7831d0824c2853c2bbbed.png)

请单击您的身份检查器并检查情节提要的类类型

# c# - UTC 字符串到 DateTime 异常

> ID：12705874
> 
> 赞同：0
> 
> 时间：2012-10-03T09:46:26.387
> 
> 标签：c#, .net

我得到了这个例外：

```
String was not recognized as a valid DateTime 
```

对于这个字符串：

```
2012-10-03T10:41:22.988401+01:00 
```

使用此代码：

```
DateTime.ParseExact(TheStringAbove, "o", CultureInfo.InvariantCulture, DateTimeStyles.None); 
```

我知道 DateTime 字符串是 UTC。代码有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T09:50:10.933

该字符串*不是*UTC - 它明确表示它比 UTC 早一个小时！这就是 +01:00 的含义。你真的需要仔细考虑那部分。

它失败的原因是它不太符合[“o”格式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Roundtrip)：

> "O" 或 "o" 标准格式说明符对应于 DateTime 值的 "yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fffffffK" 自定义格式字符串

请注意，那里有 7 个 fs，但您只有 6 个小数位。`2012-10-03T10:41:22.9884010+01:00`工作正常 - 但您仍然需要检查它是否真的意味着您想要的意思，基于您对这真的是 UTC 的期望。

# ios - iOS UIalertView 显示和处理顺序

> ID：12705877
> 
> 赞同：0
> 
> 时间：2012-10-03T09:46:35.203
> 
> 标签：ios

我有这个代码

```
- (IBAction)save:(id)sender {

    self.imageView.image = [UIImage imageNamed:@"loading.gif"];

    [self.view setUserInteractionEnabled:NO];
    MBProgressHUD *hudSave = [MBProgressHUD showHUDAddedTo:self.navigationController.view  animated:YES];
hudSave.labelText = @"Saving...";

    NSLog(@"save");

    UIAlertView *deco;

    if (!isVideo) {
         UIImageWriteToSavedPhotosAlbum (imageView.image, nil, nil , nil);
         deco = [[UIAlertView alloc]initWithTitle:@"Save" message:@"Your photo has been saved." delegate: nil cancelButtonTitle:@"oK" otherButtonTitles:nil];
    }else{

         //UIAlertView *explain;
        //explain = [[UIAlertView alloc]initWithTitle:@"Wait during processing" message:@"Your video is being filtered, this process may be long, depending of both video and device. Please do not close this app until task is finished." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            UIAlertView *explain;
            explain = [[UIAlertView alloc]initWithTitle:@"Wait during processing" message:@"Your video is being filtered, this process may be long, depending of both video and device. Please do not close this app until task is finished." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [explain show];

            [self InitialisationRefiltrage:urlVideo];

          //[self InitialisationRefiltrage:urlVideo];
        deco = [[UIAlertView alloc]initWithTitle:@"Save" message:@"Your video has been saved." delegate: nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
     } 

     [MBProgressHUD hideHUDForView:self.navigationController.view animated:YES];
     [deco show];

    [self.view setUserInteractionEnabled:YES];

} 
```

问题部分是如果我的文件是视频，它也直接进入“initialisationRefiltrage”（工作正常）但不显示 MBProgressHUD 和警报视图解释，并且在我的视频特征之后，它显示所有内容（解释、装饰和MBProgressHUD）。

我尝试了调度，线程等的一些东西......但我认为它做得不正确，所以你能否也给我一个线索如何做到这一点。

祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:55:08.713

UI 在“[运行循环](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html)”中更新。

您正在进行的调用告诉 iOS 显示一些视图（警报、MUD ...），它将在下一次循环运行时执行此操作。

您需要做的是等待用户响应警报，然后再继续。为此，您可以将自己设置为 UIAlert 的委托，然后响应事件：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex { 
    ...
} 
```

还有一些可用的库允许您将块传递给警报视图，从而简化整个事情。（例如[https://github.com/jivadevoe/UIAlertView-Blocks](https://github.com/jivadevoe/UIAlertView-Blocks)）

PS 我看到您是 Stack Overflow 的新手 - 如果您对我的回答感到高兴，请勾选我的回答...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:58:09.787

将代码`[self InitialisationRefiltrage:urlVideo]`放在您的委托方法中，`UIAlertView`以便仅在显示警报并且用户点击警报按钮时执行它。

您也可以改用一些第三方 UIAlertView 子类，这些子类使用完成块来使您的代码仅在解除警报时执行。[例如，请参阅我的课程](https://github.com/AliSoftware/OHAlertView-OHActionSheet)。

*此外，您应该尊重编码约定并使用以小写字母开头的方法名称，以使您的代码更具可读性。*

# c# - 使用 C# 进行字符串操作

> ID：12705883
> 
> 赞同：0
> 
> 时间：2012-10-03T09:47:06.787
> 
> 标签：c#, .net, string, replace

使用 C# 我们可以像 if string.contains() 方法那样进行字符串检查，例如：

```
string test = "Microsoft";
if (test.Contains("i"))
    test = test.Replace("i","a"); 
```

这可以。但是，如果我想替换包含要替换的 " 符号的字符串怎么办。

我想实现这一点：

```
"<html><head> 
```

我想删除`"`检查中存在的符号，以便结果是：

```
<html><head> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:48:29.103

" 字符也可以替换，就像任何其他字符一样：

```
test = test.Replace("\"",""); 
```

另外，请注意，您不必测试字符是否存在：您的**test.Contains("i")****可以**被删除，因为如果字符串中不存在字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:51:05.653

```
string SymbolString = "Micro\"so\"ft"; 
```

上面的字符串使用 scape char \ 在字符之间插入 "

```
string Result = SymbolString.Replace("\"", string.Empty); 
```

通过以下替换，我将字符“”替换为空。

这是你试图达到的目标？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:48:39.747

要在字符串中包含引号符号，您需要使用反斜杠对其进行转义。在你的例子中，你想使用这样的东西：

```
if (test.Contains("\"")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T10:10:46.377

有两种方法可以`'"'`在字符串文字中包含字符。到目前为止所有的答案都使用了 c 风格的方式：

```
var quotation = "Parting is such sweet sorrow";
var howSweetIsIt = quotation + " that I shall say \"good-night\" till it be morrow."; 
```

在某些情况下（特别是对于具有 Visual Basic 经验的用户），逐字字符串文字可能更易于阅读。逐字字符串文字以 @ 符号开头，唯一需要转义的字符是引号——所有其他字符都被逐字包括在内（因此得名）。值得注意的是，转义引号的方法是不同的：不是在它前面加上反斜杠，而是必须加倍：

```
var howSweetIsIt = quotation + " that I shall say ""good-night"" till it be morrow."; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T09:49:30.727

```
if (str.Contains("\""))
{
    str = str.Replace("\"", "");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T09:50:04.227

```
output = check.Replace("\"", ""); 
```

请记住使用`"\""`引号符号，因为反斜杠是[转义字符](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-character-escape-sequences-are-available.aspx)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-03T09:48:35.967

```
if (check.Contains("\"")
    output = check.Replace("\"", ""); 
```

# android - 带有双重翻译的活动过渡动画集

> ID：12705889
> 
> 赞同：0
> 
> 时间：2012-10-03T09:47:34.983
> 
> 标签：android, android-activity, transition

我正在尝试为活动转换制作一些动画。我使用的解决方案来自：使用 [AnimationSet 的活动之间的过渡动​​画](https://stackoverflow.com/questions/10335778/transition-animation-between-activities-with-animationset)

现在我可以设置动画了。但...

运行那个动画

```
 <?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="1000"
        android:fromXDelta="0%"
        android:interpolator="@android:anim/linear_interpolator"
        android:toXDelta="50%" />
    <translate
        android:duration="1000"
        android:fromXDelta="50%"
        android:interpolator="@android:anim/linear_interpolator"
        android:startOffset="1000"
        android:toXDelta="100%" />

</set> 
```

结果在屏幕中间出现活动，而不是向右滑出。

要从左到右查看动画（使其从屏幕的左边缘开始，并在布局离开屏幕时结束），我需要使用这样的设置：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="1000"
        android:fromXDelta="-50%"
        android:interpolator="@android:anim/linear_interpolator"
        android:toXDelta="0%" />
    <translate
        android:duration="1000"
        android:fromXDelta="50%"
        android:interpolator="@android:anim/linear_interpolator"
        android:startOffset="1000"
        android:toXDelta="100%" />

</set> 
```

现在的问题。为什么？我知道我不能依赖这个解决方案，因为它很奇怪，也许你知道一些解决这个问题的方法。

# iphone - 当我尝试在两个应用程序之间切换时，iPhone 应用程序崩溃？

> ID：12705891
> 
> 赞同：1
> 
> 时间：2012-10-03T09:47:35.847
> 
> 标签：iphone, ipad, uinavigationcontroller, xcode4.3

当我尝试在两个应用程序之间切换时，iPhone 应用程序崩溃，一个是我自己的应用程序，另一个是从 iTunes 下载的应用程序。假设我的应用程序有 2 个视图，即视图 A 和视图 B。首先我将我的应用程序从视图 A 重定向到视图 B，然后我暂停我的应用程序并打开另一个应用程序。然后我恢复我的应用程序并想返回查看 A。当我单击后退按钮时，我的应用程序崩溃了。我找不到任何原因，还检查了所有内存管理，看起来还可以。

提前致谢。

# java - Java中的'this'关键字

> ID：12705895
> 
> 赞同：1
> 
> 时间：2012-10-03T09:47:41.117
> 
> 标签：java, oop, this

我对以下代码有疑问`this`。在下文中，`this.name` 将设置名称。我们也可以使用 来做到这一点`name = name`，所以我的问题是应该使用`this`指针。这不是作业

```
import java.io.*;

public class Employee{
    String name;
    int age;
    String designation;
    double salary;

    //This is the constructor of the class Employee
    public Employee(final String name){ //EDIT: Made parameter final
        this.name = name;
        //name= name; this is also correct
    }

    //Assign the age of the Employee  to the variable age.
    public void empAge(int empAge){
        age =  empAge;
    }

    //Assign the designation to the variable designation.
    public void empDesignation(String empDesig){
        designation = empDesig;
    }

    //Assign the salary to the variable salary.
    public void empSalary(double empSalary){
        salary = empSalary;
    }

    //Print the Employee details
    public void printEmployee(){
        System.out.println("Name:"+ name );
        System.out.println("Age:" + age );
        System.out.println("Designation:" + designation );
        System.out.println("Salary:" + salary);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T09:50:12.400

```
 //      name= name; this is also correct 
```

这是*不*正确的。它会将您的参数分配给自己。通过使用`this`关键字，您可以声明正在使用*的*名称（即`Employee`对象上的字段）。

您可能希望以不同于参数的方式命名该字段。然而，这意味着一切正常，直到有人自动重构您的代码以（可能是无意中）将字段和参数声明为相同的名称！

出于这个原因，您经常会看到这样定义的方法签名：

```
public Employee(final String name) 
```

关键字可防止重新分配，并`final`防止您错误地重新分配输入参数，从而不分配给您的字段。另请注意，如果您将该*字段*声明为`final`，则如果您不对该字段进行赋值，则编译将失败。使用`final`是捕获此类错误并强制对象的*不变性*的好方法（通常是一件好事 - 它有助于更​​可靠的解决方案，尤其是在线程环境中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:50:30.293

好吧，为了避免在你提到 name=name 这样的情况下发生混淆，我们使用这个指针来明确我们这里的意思是类变量名。

因此，在这种情况下，为了让读者理解，我们使用它，尽管在许多其他情况下 (this) 更有用。

在某些编译器中 name=name 也会出错

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:51:37.697

请注意，`name`您的代码中调用了两件事。您的类`Employee`有一个名为 的成员变量`name`，并且构造函数接受一个也称为 的参数`name`。

您想要在构造函数中将成员变量设置`name`为与参数相同的值`name`。要访问成员变量，必须使用`this.name`, 因为`name`指的是参数 - 因为变量具有相同的名称，所以参数**隐藏**了成员变量。

请注意，`name = name;`它与`this.name = name;`.

当您这样做时`name = name;`，您将参数的值分配给`name`参数本身 -**而不是**成员变量。编译器并不神奇地知道第一个`name`应该表示成员变量，第二个`name`应该表示参数。

因此，`this`在这种情况下，您需要显式引用成员变量，而不是隐藏成员变量的参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T09:52:46.473

在这种情况下`this`，只是范围解析/消歧。

```
public Employee(String name){
  this.name = name;
  // the above line will assign a value of parameter to instance variable
  //      name= name; this is also correct
  // (**NO** the above line will assign a value of parameter to itself) 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T09:53:22.463

当参数名称和您的类变量名称相同时，为了区分它们，您编写`this.classVariable`以识别类变量

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T09:53:29.660

当您调用一个变量时，指向的变量是最接近您当前范围的变量。

因此，如果程序当前在内存中包含一个局部变量`toto`和包含一个字段变量的包装类`toto`，则您必须使用精确`this`的关键字才能访问该字段的关键字。

否则，字段变量被称为被局部变量**遮蔽**`toto = toto`，因此将局部参数分配给自身（从来没有用过），而不是您期望的 => 字段变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-03T09:53:26.083

为什么要让自己这么难？

只需像这样重写签名/方法：

```
public Employee(String _name) {
   name = _name;
} 
```

始终尽量避免变量隐藏或其他难以阅读的结构。如果您希望您的代码可维护，请以每个人都能立即理解的方式编写它。即使你是唯一的一个；你可能会及时忘记你的意思。

# iphone - 在 cocos2d 中降低旋转速度

> ID：12705897
> 
> 赞同：0
> 
> 时间：2012-10-03T09:47:47.537
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone

我有我的精灵旋转，但有点太快了，这是我的代码，知道如何控制旋转速度吗？

```
//enemySprite
    enemySprite = [CCSprite spriteWithFile:@"Asteroid.png"];
    enemySprite.anchorPoint = ccp(0.5f, 0.5f);
    enemySprite.position = ccp(arc4random()%480, winSize.height -60);

//Rotation
    id rotate = [CCRotateBy actionWithDuration:1 angle:360];
    id repeatRotate = [CCRepeatForever actionWithAction:rotate];
    [enemySprite runAction:repeatRotate];

    [self addChild:enemySprite z:5];
    [self schedule:@selector(callEveryFrame:)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:57:47.220

您可以尝试通过增加其持续时间来使其变慢：

```
id rotate = [CCRotateBy actionWithDuration:X angle:360]; 
```

您可以在哪里使用，例如 X 的 5.0。这将使它比当前慢 5 倍。

# javascript - 监听 iframe 上的点击事件

> ID：12705903
> 
> 赞同：0
> 
> 时间：2012-10-03T09:48:04.673
> 
> 标签：javascript, jquery, facebook, iframe

我正在尝试检测用户何时点击 Facebook 上的点赞按钮。我试过的：

```
$('iframe').click(function() {alert('clicked!');};
$('#wrapper').click(function() {alert('clicked!');}; 
```

`#wrapper`iframe 周围的 div 在哪里。只有当我在 iframe 外部区域的包装器内部单击时，第二个才有效。

另一种方法是在 iframe 的顶部放置一个 div，但是这样的按钮将不再可点击......有没有办法接收这个点击事件而不阻止事件进入 iframe？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:51:21.723

对于您的特定 Facebook 案例，[您可以订阅](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/?_fb_noscript=1)一些事件

```
window.fbAsyncInit = function () {
    FB.Event.subscribe('edge.create', function (targetUrl) {
        alert('liked');
    });
    FB.Event.subscribe('edge.remove', function (targetUrl) {
        alert('unliked');
    });
}; 
```

# favicon - Favicon 未在 chrome 上显示

> ID：12705906
> 
> 赞同：1
> 
> 时间：2012-10-03T09:48:18.387
> 
> 标签：favicon

Favicon 图标未显示在 chrome 浏览器上，但它出现在 firefox 上。我正在使用这行代码：

```
<link rel="shortcut icon" href="${resource(dir:'images',file:'favicon.ico')}" type="image/x-icon" /> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-17T04:58:56.900

您无法在 Chrome 中显示它。http 站点将显示默认地球图标，https 站点将默认显示锁定图标。

# c# - ContentControl 不显示内容

> ID：12705907
> 
> 赞同：2
> 
> 时间：2012-10-03T09:48:19.507
> 
> 标签：c#, wpf, xaml, binding, contentcontrol

我有一个自定义`ContentControl`，它具有固定的 XAML 布局，例如`UserControl`（而不是通常应用的通用模板）。

以前这个布局没有额外的标记，所以它实际上是：

```
<ContentControl x:Class="MyControls.CustomViewControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
</ContentControl> 
```

这工作得很好。

我现在想在内容周围加一个边框，所以我将 XAML 更改为：

```
<ContentControl x:Class="MyControls.CustomViewControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <ContentControl.Template>
        <ControlTemplate>
            <Border BorderThickness="5" BorderBrush="LightGreen">
                <ContentPresenter />
            </Border>
        </ControlTemplate>
    </ContentControl.Template>
</ContentControl> 
```

这显示了边框，但没有内容。

我尝试为 ContentPresenter 提供显式绑定：

```
<ContentPresenter Content="{Binding Path=Content, RelativeSource={RelativeSource Self}}"/> 
```

但这并没有什么不同。

设置显式`Content`确实有效：

```
<ContentPresenter Content="TEST" /> 
```

任何人都知道为什么内容绑定不起作用？我想我可以回退到通常的通用模板，但如果我可以像 UserControl 一样直接执行它会更容易。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-18T22:41:13.767

为控件模板添加 TargetType

```
<ContentControl.Template>
    <ControlTemplate  TargetType="Button">
        <Border BorderThickness="5" BorderBrush="LightGreen">
            <ContentPresenter />
        </Border>
    </ControlTemplate>
</ContentControl.Template> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T09:57:37.303

使用`TemplateBinding`而不是`Binding`在 a 内`ControlTemplate`：

```
<ContentControl.Template>
    <ControlTemplate TargetType="ContentControl">
        <Border BorderThickness="5" BorderBrush="LightGreen">
            <ContentPresenter Content="{TemplateBinding Content}"/>
        </Border>
    </ControlTemplate>
</ContentControl.Template> 
```

编辑：

所示代码片段的重要部分`TargetType`是`ControlTemplate`. 与目标类型

```
<ContentControl.Template>
    <ControlTemplate TargetType="ContentControl">
        <Border BorderThickness="5" BorderBrush="LightGreen">
            <ContentPresenter/>
        </Border>
    </ControlTemplate>
</ContentControl.Template> 
```

已经没有任何工作了`TemplateBinding`

# php - 在 php 中使用 Soap 1.2 生成客户端

> ID：12705908
> 
> 赞同：0
> 
> 时间：2012-10-03T09:48:21.603
> 
> 标签：php, soap, soap-client

你能告诉我是否有一种工具可以生成具有这些要求的肥皂客户端：

1.  肥皂 1.2
2.  客户端基于三种不同的服务（所以 3 wsdl）
3.  这些服务具有共享类型

我发现了：

[http://php.net/manual/en/class.soapclient.php](http://php.net/manual/en/class.soapclient.php)

和

[http://www.php.net/manual/en/soapclient.soapclient.php](http://www.php.net/manual/en/soapclient.soapclient.php)

我找不到搜索它的东西尤其是最后两点。任何帮助将不胜感激，因为我无法理解如何从不同来源创建它以及如何调用特定服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:59:08.947

我试图弄清楚你可能想要做什么。

*   第一：一个 WSDL === 一个服务 === 一个 SoapClient。您不能在 Soap 客户端级别混合两个 WSDL 位置，但根据您的应用程序，可能会在更高级别连接每个服务的结果。

    因此，如果您有三个 WSDL，那么您必须实例化三个要使用的 SoapClient 类。它不像可以向任何现有网络服务器发出请求的单个通用 HTTP 客户端。

*   第二：除非您向 SoapClient 提供类映射，否则任何请求的返回值都只是 stdClass 和数组的混合。WSDL 中可能定义了类型，但 PHP 不会将它们映射到任何东西，除非您定义它。

    我建议使用您自己定义的与 WSDL 中的 ComplexType 定义匹配的类映射。有一些代码生成器可能会完成这项工作，但 Soap 标准很复杂，WSDL 的定义也很复杂，因此您最终可能会手动完成工作。

    如果数据结构很小，你可以完美地生活在没有 classmap 的情况下。

*   第三：如果三个 WSDL 共享数据类型，这不会以任何方式影响 PHP。由于没有类映射，响应是 stdClass 和 Array，并且请求参数可以相同，因此您不会从这些信息中获得任何好处。

    另一方面，如果您采用类映射的方式，我希望共享类型将导致生成相同的类，因此您还会在 PHP 级别看到来自服务 A 的 ComplexType 与 ComplexType 的相同服务 B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:00:28.670

我无法测试我的解决方案，因为我没有运行 2-3 个 Web 服务，但我认为这个解决方案会起作用（如果我理解正确的话）。如果你能试试，请告诉我。

```
<?php
class wstest {
    function __construct($url) {
        $this->soapUrl = $url;
        try{
            $this->client = new SoapClient($this->soapUrl,array('login' => 'wsuser', 'password' => "some_password", "connection_timeout"=>30,'trace'=>true,'keep_alive'=>false,'features' => SOAP_SINGLE_ELEMENT_ARRAYS));
        } catch (Exception $e) {            
            echo $e->getMessage();
        }
    }
};

$con = new wstest("http://firstwebservice.com/?wsdl");

$con2 = new wstest("http://secondwebservice.com/?wsdl");

$con3 = new wstest("http://thirdwebservice.com/?wsdl");
?> 
```

# javascript - 在不同列表之间排序项目的算法

> ID：12705911
> 
> 赞同：1
> 
> 时间：2012-10-03T09:48:28.563
> 
> 标签：javascript, algorithm, jquery-ui, sorting, jquery-ui-sortable

我正在尝试实现一种算法来对相同列表或不同列表中的项目进行排序，并将结果保存在数据库中。

在 GUI 中对项目进行排序的代码已经存在。我正在使用 jquery-ui，它能够为我提供新位置的索引。

**示例 1：**
假设我在同一个列表中有两个项目。
如果我移动第*一个项目*代替`second item`我能够获得值`1`（这是第二个项目的位置）。

我正在使用 javascript 来实现代码，但实际上我对`pseudo code`.

如果我必须对同一个列表中的项目进行排序，那么故事就很简单了。
数据模型应如下所示：

```
firstItem: {
  id: 5,
  next: 0
},
secondItem: {
  id: 3
  next: 1
} 
```

当我移动`firstItem`in 的位置时，`secondItem`我可以通过这种方式更改模型：

```
firstItem.prev = firstItem.next;
firstItem.next = newIndex;
secondItem.next = firstItem.prev; 
```

**示例 2：**
假设我想对不同列表之间的项目进行排序。
我想这个故事变得相当复杂：
模型应该是这样的：

```
// list 1
item_0_0 = {
  id: 12,
  list_id: 0,
  next: 0
}
item_0_1 = {
  id: 13,
  list_id: 0,
  next: 1
}

// list 2
item_1_0 = {
  id: 45,
  list_id: 1,
  next: 0
}
item_1_1 = {
  id: 35,
  list_id: 1,
  next: 1
} 
```

如果我移动`item_0_0`和模型应该`item_1_0`是`item_1_1`这样的：

```
item_0_1 = {
  id: 13,
  list_id: 0,
  next: 0 // 1 -> 0 because the previous-one has been moved in another list
}

item_1_0 // does not change because I insert the item_0_0 after

item_1_1 = {
  id: 35,
  list_id: 1,
  next: 2 // 1->2 it changes because I inserted the item_0_0 before
}

item_0_0 = {
  id: 12,
  list_id: 1, // 0->1 I need to change the list
  next: 1 // this is the new position in the new list
} 
```

我的问题是在这种情况下更新列表的最佳代码是什么？

这是我的伪代码：

```
item_0_0.list_id = newListID;
item_0_0.prev = item_0_0.next;
item_0_0.next = newIndex;
item_0_1.next = item_0_1.next - 1; // actually it should be iterated 
                                   // between all items after!
item_1_1.next = item_1_1.next + 1;  // actually it should be iterated
                                   // between all items after! 
```

PS：
1）来自javascript库`newIndex`。 2）我想列表在开始移动项目之前排序良好。`newListID`

# wpf - 将宽度绑定到 ActualHeight - 仅部分工作

> ID：12705921
> 
> 赞同：1
> 
> 时间：2012-10-03T09:49:02.537
> 
> 标签：wpf, xaml, windows-8, width, actualheight

我正在尝试将图像绑定`Width`到其`ActualHeight`（高度由布局决定，我希望它是方形的 - 如果有更好的方法，我很乐意听到）。

这是我的 XAML：

```
<Grid Grid.Row="1" VerticalAlignment="Stretch">
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="auto"/>
    <ColumnDefinition Width="auto"/>
</Grid.ColumnDefinitions>
<Grid.RowDefinitions>
    <RowDefinition Height="*"/>
    <RowDefinition Height="*"/>
</Grid.RowDefinitions>
<Image x:Name="favImage1" Source="{Binding Controller.FailStorage.FailRoamingStorage.Favorites[0].ImageUri}" Grid.Column="0" Grid.Row="0" Style="{StaticResource FavoriteImageStyle}" Width="{Binding ActualHeight, ElementName=favImage1, Mode=OneWay}"/>
</Grid> 
```

样式定义如下：

```
 <Style x:Key="FavoriteImageStyle" TargetType="Image">
        <Setter Property="Stretch" Value="UniformToFill"/>
        <Setter Property="Margin" Value="0,0,12,12"/>
        <Setter Property="VerticalAlignment" Value="Stretch"></Setter>
    </Style> 
```

现在，这部分工作 - 将项目添加到集合后导航回页面似乎工作。

但是任何加载或后续导航到页面都会使图像不显示。

有趣的是，加载后，图像的 ActualWidth 不是 ActualHeight。少了。网格的宽度甚至更小......这很奇怪......

> favImage1.ActualWidth
> 
> 185.13514709472656
> 
> favImage1.ActualHeight
> 
> 274.0
> 
> ((FrameworkElement)favImage1.Parent).ActualWidth
> 
> 138.0

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:55:05.563

如果我对您的理解正确，您想确保您的图像保持正方形。

我认为这不是在 xaml 中操作图像的正确方法。我宁愿将图像包装在 a 中`Border`并将`Border`'s 的大小设置为修复，然后将 image`Stretch`属性更改为`UniformToFill`：

```
<Border Width="110" Height="110">
    <Image Source="my.jpg" Stretch="UniformToFill" />
</Border> 
```

另一种选择是使用`ViewBox`包装图像。在这里，您可以看到属性的不同值的影响`Stretch`：

[ViewBox.Stretch 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.stretch%28v=vs.95%29.aspx)

# iphone - 在 ios 应用程序中添加按钮以映射

> ID：12705929
> 
> 赞同：0
> 
> 时间：2012-10-03T09:49:30.437
> 
> 标签：iphone, objective-c, ios, geolocation, mapkit

我目前正在开发一个利用地图的应用程序。我想植入的一个功能是有一个全屏地图，侧面有一个按钮/手柄，允许用户在屏幕之间导航。请参阅下面的 runkeeper 示例： ![在此处输入图像描述](../Images/c7ae6b42b0d213ac80f4652279bf206a.png)

有人会有任何见解/想法从哪里开始吗？我什至很难找到合适的谷歌关键词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:32:19.973

只需在添加 mapView（在您的地图视图上）后将您的按钮添加到您的视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:56:25.653

您必须创建一个新的 iOS 项目。在 info.plist 中将 UIStatusBarHidden 设置为 YES。在您的地图视图中添加

```
self.navigationController.navigationBar.hidden = YES; 
```

在处理按钮事件的方法中添加：

```
-(IBAction)buttonPressed {
     NewViewcontroller *newViewC = [[NewViewController alloc] init];
     [self.navigationController pushNavigationController: newViewC animated: YES];
     [newViewC release];
} 
```

# wcf - 是否可以在 web.config 中禁用 WCF 服务的 PrincipalPermission 检查

> ID：12705933
> 
> 赞同：0
> 
> 时间：2012-10-03T09:49:34.140
> 
> 标签：wcf, principalpermission

我的 wcf-services 使用 Principalpermissions 对用户进行身份验证，如下所示：

```
<PrincipalPermission(SecurityAction.Demand, Role:="WCFUser")> 
```

是否有可能在不更改源代码的情况下禁用此 PrincipalPermission 检查，例如 web.config 中的部分或类似内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:56:08.093

检查您在帖子中提到的[问题](http://forums.asp.net/post/4250824.aspx)

# wpf - 如何在 WPF 中使用可本地化的 resx 图像？

> ID：12705934
> 
> 赞同：1
> 
> 时间：2012-10-03T09:49:36.660
> 
> 标签：wpf, embedded-resource, resx

`Properties.Resources.resx`我在标准文件中有一堆可本地化的图像和图标；它们大多在编译时链接。我想把它们放在一些 WPF 控件上。

在 WinForms 中，

```
control.Image = Properties.Resources.ImageResourceName; 
```

诀窍，可维护，可本地化，*不易重构*，并且只能使用 Windows 窗体设计器来完成，但我只是不知道如何在 WPF（xaml OR 代码）中实现类似的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:08:01.520

存储在 resx 文件中的是 Drawing.Bitmap。您可以使用下面的代码将其转换为 BitmapSource。例如，此代码可以放置在转换器中。个人而言，我定义了一个 MarkupExtension，它采用 resx 的名称和 ressource 的名称并调用此代码。

```
private BitmapSource bitmapToSource(System.Drawing.Bitmap bitmap)
{
    BitmapSource destination;
    IntPtr hBitmap = bitmap.GetHbitmap();
    BitmapSizeOptions sizeOptions = BitmapSizeOptions.FromEmptyOptions();
    destination = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(hBitmap, IntPtr.Zero, Int32Rect.Empty, sizeOptions);
    destination.Freeze();
    return destination;
} 
```

# jquery - 使用左属性调整大小后如何制作精美的盒子中心

> ID：12705935
> 
> 赞同：1
> 
> 时间：2012-10-03T09:49:37.223
> 
> 标签：jquery, html, css, fancybox

我在精美的盒子内容中有以下代码。我有链接，它将调用另一个花哨的盒子 iframe。第二个页面的宽度和高度将与第一个 iframe 页面不同。所以我在第二页使用以下代码重新调整了花式框 iframe 的大小，

```
 jQuery(function(){
                        //jQuery('div[id^=fancybox]').remove();
                        jQuery('#fancybox-frame', window.parent.document).load(function() { 
                            parent_fb_resize(560,444);            
                            jQuery('#fancybox-wrap').css('margin','auto');                    
                        });                            
}); 
```

使用以下代码重新调整 iframe 的大小，

```
function parent_fb_resize(w, h) {  
  if (w > 0 || h > 0) {

    if (w > 0) jQuery('div#fancybox-wrap', window.parent.document).css({ width: (w)+"px"});
    if (h > 0) jQuery('div#fancybox-wrap', window.parent.document).css({ height: (h)+"px"});
    if (w > 0) jQuery('#fancybox-content', window.parent.document).css({ width: w+"px"});
    if (h > 0) jQuery('#fancybox-content', window.parent.document).css({ height: h+"px"});
    jQuery.fancybox.resize();
    jQuery.fancybox.center();

  }
}
function fb_close_any() {
  window.top.eval('jQuery.fancybox.close()');
}

function fb_resize_any(w, h) {
  w = (w > 0) ? w : 0;
  h = (h > 0) ? h : 0;
  window.top.eval('fb_resize('+w+','+h+')');
} 
```

到目前为止，一切都很好。此代码调整第二页的大小。**但是由于id**中的 left 属性，重新调整大小的花式框不在中心位置 **`fancybox-wrap`**

 **```
{
display: block;
height: 444px;
left: 271px;
margin: 0 auto;
top: 20px;
width: 560px;
} 
```

在这里，我需要找到页面的中心，并且需要在`jQuery('#fancybox-frame', window.parent.document).load()`. 请对此提出建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:08:19.937

为什么`left: 271px;`CSS中有偶数？它不需要使元素居中，就是`margin: 0 auto;`这样。我建议只是摆脱它，因为这可能是你的问题。

这是一个 Jsfiddle 来演示我的意思

[http://jsfiddle.net/fPqqT/](http://jsfiddle.net/fPqqT/)

如果你不能摆脱左边的css，也许在你调整大小时将它设置为0px？

```
$("#fancybox-wrap").css("left", 0); 
```**

# android - 进度条显示

> ID：12705942
> 
> 赞同：2
> 
> 时间：2012-10-03T09:50:12.777
> 
> 标签：android, android-layout

`ProgressBar`当我按下按钮时，我想在我的应用程序中显示。

问题是我不想使用[ProgressDialog](http://developer.android.com/guide/topics/ui/dialogs.html#ProgressDialog)因为我不想在对话框中使用微调器。我只想显示微调器，因此我只想显示[ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)。

我想以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:35:04.683

将此添加到您的布局中。

```
<ProgressBar android:id="@+id/progressBar1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:visibility="invisible"></ProgressBar> 
```

在你的javacode中，在你的活动中使用下面给出的代码并根据要求进行相应的修改

```
ProgressBar viewProgressBar;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test);

    viewProgressBar = (ProgressBar)findViewById(R.id.progressBar1);

    Button btn1 = (Button) findViewById(R.id.button1);
    btn1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            viewProgressBar.setVisibility(View.VISIBLE);

                    // Your code follows here

        }

    });
} 
```

当你想隐藏它时，只需使用

```
viewProgressBar.setVisibility(View.INVISIBLE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:56:07.000

您可以将 Spinner 放入您的布局中并为其赋予以下属性：

```
android:visibility="gone" 
```

或者

```
android:visibility="invisible" 
```

单击按钮时，使用[View.setVisibility()将](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)[可见](http://developer.android.com/reference/android/view/View.html#VISIBLE)性更改为可见。动作完成后，再次隐藏即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T11:32:54.460

为此，您需要为您的活动创建**两个重叠的容器**。一个容器将包含您的活动视图，默认情况下**可见**，第二个容器将包含中心的微调器，背景透明，默认情况下它的可见性将**消失**。
现在要创建这样的重叠效果，您需要将两个容器都放在 FrameLayout 中。
注意：这里的容器是指 ViewGroups，如 LinearLayout、RelativeLayout 等。

```
<FrameLayout>
    <LinearLayout
        android:id="@+id/viewsContainer"
        android:visibility="visible">
    ...
    ...
    </LinearLayout>

    <LinearLayout
        android:id="@+id/spinnerContainer" 
        android:visibility="gone"
        android:gravity="center"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#00000000">
        <ProgressBar
            android:id="@+id/progressBar1"
            style="?android:attr/progressBarStyleLarge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>
</FrameLayout> 
```

我希望这将有所帮助。随意讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:58:47.477

如果这就是你想要的，你应该使用[ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)视图而不是尝试使用 ProgressDialog。

您可以做的是声明您的活动/片段的布局与 ProgressBar 已经定位，然后给它一个可见性已消失（View.GONE）。然后在您的代码中，单击您的按钮会将可见性更改为可见（View.VISIBLE）。

您还可以通过编程方式声明 ProgressBar，这应该会给您带来与使用 XML 布局相同的效果。

# debugging - “无效分配大小”的问题

> ID：12705944
> 
> 赞同：0
> 
> 时间：2012-10-03T09:50:19.780
> 
> 标签：debugging, memory-management, hash

我正在尝试实现我从这里得到的 SuperFastHash 算法； [http://www.azillionmonkeys.com/qed/hash.html](http://www.azillionmonkeys.com/qed/hash.html)

这是我的 .h 和 .cpp SuperFastHash.h

```
#ifndef SUPER_FAST_HASH
#define SUPER_FAST_HASH

// #include "pstdint.h" /* Replace with <stdint.h> if appropriate */
#include <stdint.h>
#include <cstddef>

#undef get16bits
#if (defined(__GNUC__) && defined(__i386__)) || defined(__WATCOMC__) \
  || defined(_MSC_VER) || defined (__BORLANDC__) || defined (__TURBOC__)
#define get16bits(d) (*((const uint16_t *) (d)))
#endif

#if !defined (get16bits)
#define get16bits(d) ((((uint32_t)(((const uint8_t *)(d))[1])) << 8)\
                       +(uint32_t)(((const uint8_t *)(d))[0]) )
#endif

uint32_t SuperFastHash (const char * data, int len);

#endif 
```

这是我的.cpp

```
#include "SuperFastHash.h"

uint32_t SuperFastHash (const char * data, int len) {

    uint32_t hash = len, tmp;
    int rem = 0;

    if (len <= 0 || data == NULL) return 0;

    rem = len & 3;
    len >>= 2;

    /* Main loop */
    for (;len > 0; len--) {
        hash  += get16bits (data);
        tmp    = (get16bits (data+2) << 11) ^ hash;
        hash   = (hash << 16) ^ tmp;
        data  += 2*sizeof (uint16_t);
        hash  += hash >> 11;
    }

    /* Handle end cases */
    switch (rem) {
        case 3: hash += get16bits (data);
                hash ^= hash << 16;
                hash ^= ((signed char)data[sizeof (uint16_t)]) << 18;
                hash += hash >> 11;
                break;
        case 2: hash += get16bits (data);
                hash ^= hash << 11;
                hash += hash >> 17;
                break;
        case 1: hash += (signed char)*data;
                hash ^= hash << 10;
                hash += hash >> 1;
    }

    /* Force "avalanching" of final 127 bits */
    hash ^= hash << 3;
    hash += hash >> 5;
    hash ^= hash << 4;
    hash += hash >> 17;
    hash ^= hash << 25;
    hash += hash >> 6;

    return hash;
} 
```

问题是，当我运行这条线时，它似乎崩溃了： uint32_t entityHashId = SuperFastHash(entityname.c_str(), strlen(entityname.c_str()));

（实体名是一个 const std::string& 实体名）

它thorws此错误消息：调试错误{Path to .exe file} Invalid allocation size: 4294967295 bytes。（按重试调试应用程序）[中止] [重试] [忽略]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:54:24.267

TL；DR：您不能（obv）分配负大小的内存。

经过 1 小时的调试并没有发现问题所在，似乎在我们的一个库的深处有一个 abs(x) * -1.. 这有点违背了目的。

![在此处输入图像描述](../Images/d3931256db3265c54018b745265d643e.png)

# java - OpenYoutubeActivity：java.lang.NoClassDefFoundError OpenYouTubePlayerActivity

> ID：12705947
> 
> 赞同：0
> 
> 时间：2012-10-03T09:50:24.080
> 
> 标签：java, android, android-youtube-api

我正在尝试在我的 Android 应用程序中实现 Youtube 播放器，但我无法正常运行它。我有下一个例外：

> java.lang.NoClassDefFoundError: OpenYouTubePlayerActivity

尝试在谷歌中找到一些东西，看到很多与我相同的类似解决方案，但它不起作用。我该如何解决？

这是我的一段代码：（openyoutubeactivity.jar 及其路径已添加到我的项目中，添加了不同的权限，一切都是由这个 lib 的官方文档完成的）

```
Intent lVideoIntent = new Intent(null, Uri.parse("ytv://jDgDW8bSdvw"), this, OpenYouTubePlayerActivity.class);
    startActivity(lVideoIntent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:21:18.930

我已经设法修复它，只需要在这个库的 VideoStream 文件中的链接上添加一个签名，一切都像魅力一样工作！

```
VideoStream.java (Line: 30)
before: mUrl = lArgMap.get("url");
after:  mUrl = lArgMap.get("url") + "&signature=" + lArgMap.get("sig"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:57:07.543

您必须将 OpenYouTubePlayerActivity 添加到清单文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T05:57:41.627

`8 to 10`我通过从文件中更改项目目标解决了这个错误`project.properties`。但最终以“无法播放此视频”错误结束。

# boolean - bison 和 flex 的表达式

> ID：12705952
> 
> 赞同：0
> 
> 时间：2012-10-03T09:50:37.183
> 
> 标签：boolean, expression, bison, yacc

我创建了一个 Yacc 解析布尔表达式：

```
boolean { $$ = $1; }

| expr '*' expr { $$ = $1 * $3; }

| expr '+' expr { $$ = $1 + $3; }

| '(' expr ')' { $$ = $2;}
; 
```

但是对于像这样的表达是不够的`!(T+F)*F+!T`。如何以简单的方式修改它？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:22:21.923

添加一行`'!' expr {$$=!($2);}`

# coq - 如何证明引理“(P \/ Q) /\ ~P -> Q.” 在coq？

> ID：12705953
> 
> 赞同：5
> 
> 时间：2012-10-03T09:50:36.723
> 
> 标签：coq

我试图用 tatics [intro]、[apply]、[assumption]、[destruct]、[left]、[right]、[split] 来证明这个引理，但失败了。谁能教我如何证明？

```
Lemma a : (P \/ Q) /\ ~P -> Q.
proof. 
```

通常，如何证明简单的命题，例如 false->P、P/~P 等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T02:00:41.617

您缺少的策略是contrast ，用于证明包含矛盾假设的目标*。*因为你不允许使用矛盾，我相信你打算*应用的引理是**False*的归纳原则。这样做之后，您可以*应用否定命题并通过**假设*关闭分支。请注意，您可以做得比您的教练要求的更好，并且不要使用*任何*列出的策略！析取三段论的证明项比较容易写：

```
Definition dis_syllogism (P Q : Prop) (H : (P ∨ Q) ∧ ¬P) : Q :=
  match H with
    | conj H₁ H₂ =>
      match H₁ with
      | or_introl H₃ => False_ind Q (H₂ H₃)
      | or_intror H₃ => H₃
      end
  end. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T20:29:39.787

```
Section Example.

  (* Introduce some hypotheses.. *)
  Hypothesis P Q : Prop.

  Lemma a : (P \/ Q) /\ ~P -> Q.
    intros.
    inversion H.
    destruct H0.
      contradiction.
      assumption.
  Qed.

End Example. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T14:37:33.267

为了证明所有这些简单的事情，您拥有一系列策略`tauto`,`rtauto`和。`intuition``firstorder`

我相信它们都比 tauto 更强，它是直觉命题逻辑的完整决策程序。

然后，`intuition`允许您放入一些提示和引理以使用，并且一阶可以推理一阶归纳法。

[当然，文档](http://coq.inria.fr/distrib/V8.4/refman/tactic-index.html)中有更多详细信息，但这些是您想要在此类目标上使用的策略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T10:48:11.940

请记住，这`~P`意味着`P->False`，并且反转`False`假设完成了目标（因为`False`没有构造函数）。所以你真的只需要`apply`and `inversion`。

```
Lemma a : forall (P Q:Prop), (P \/ Q) /\ ~P -> Q.
Proof.
  intros. 
  inversion H.
  inversion H0.
  - apply H1 in H2\.  (* applying ~P on P gives H2: False *)
    inversion H2.
  - apply H2.
Qed. 
```

# css - 条件注释“gt ie 7”会破坏 chrome 和 firefox

> ID：12705954
> 
> 赞同：1
> 
> 时间：2012-10-03T09:50:38.343
> 
> 标签：css, internet-explorer, firefox, google-chrome, conditional-comments

我正在使用旧的 CSS 条件注释来阻止 .css 在使用 IE 7 及以下版本时使用：

`<!--[if gt IE 7]> <link rel="stylesheet" href="some-styles.css" /> <![endif]-->`

但是，这会阻止此 .css 在非 IE 浏览器中使用。这是我第一次遇到这种情况。

我已经看到专门针对非 IE 浏览器的条件注释的使用，但肯定有另一种方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:55:36.400

要使其对非 IE 浏览器可见，请删除注释分隔符`--`，如下所述：http: [//msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

像这样：

```
<![if gt IE 7]> <link rel="stylesheet" href="some-styles.css" /> <![endif]> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:55:52.493

条件注释只能用于针对 IE 浏览器。我认为任何其他浏览器都不支持此“功能”。

我建议您将所有样式放入所有浏览器都可以看到的主要样式中，然后使用 IE 8 之前的浏览器的条件语句来添加/删除在这些浏览器上不起作用的任何样式声明。

# php - DW php 中的语法错误：我该如何解决这个问题..！

> ID：12705955
> 
> 赞同：0
> 
> 时间：2012-10-03T09:50:38.830
> 
> 标签：php, syntax, localhost, dreamweaver

```
<?php include_once("scripts/global.php");
if(isset($_POST["username"])){

    $username = $_POST["username"];
    $fname = $_POST["fname"];
    $lname = $_POST["lname"];
    $email = $_POST["email"];
    $pass1 = $_POST["pass1"];
    $pass2 = $_POST["pass2"];

    //error handling
    if((!$username)||(!$fname)||(!$lname)||(!$email)||(!$pass1)||(!$pass2)){
        $message ="Please insert all the fields!!"; 
    }else {
        if($pass1!=$pass2){
            $message="Your password fields do not match!!";
        }else{
            //securing the data
            $username = preg_replace("#[^0-9a-z]#i","",$username);
            $fname = preg_replace("#[^0-9a-z]#i","",$fname);
            $lname = preg_replace("#[^0-9a-z]#i","",$lname);
            $pass1 = sha1($pass1);

            $email = mysql_real_escape_string($email);
            //check the duplicates
            $user_query = mysql_query("SELECT username FROM members WHERE username='$username' LIMIT 1") or die("Could Not check username");
            $count_username = mysql_num_rows($user_query);

            $email_query = mysql_query("SELECT email FROM members WHERE email='$email' LIMIT 1") or die("Could Not check email");
            $count_email = mysql_num_rows($email_query);
            if($count_username>0){
                $message = "your username is already in use!!";
            }else if($count_email>0){
                $message = "Your email is already in use!!";
            }else{
                //insert the members
                $ip_address = $_SERVER['REMOTE_ADDR'];
                $query =mysql_query("INSERT INTO members(username,firstname,lastname,email,password,ip_address,sign_up_date) VALUES('$username','$firstname','$lastname','$email','$pass1','$ip_iddress',now())") or die(mysql_error());

                $member_id = mysql_insert_id();
                mkdir("users/$member_id",0755);
                $message="You Have been registered";
            }
        }
    }

?> 
```

我在 DW 中遇到语法错误，我在 localhost 中运行文件..当我在 HTML 代码的段落标签中包含 message 变量时：

```
<p><?php print("$message");?></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:54:44.483

您忘记了脚本末尾的括号 }

# mysql - 无法使用 gem mysql2 重新连接到 mysql 数据库

> ID：12705958
> 
> 赞同：0
> 
> 时间：2012-10-03T09:50:46.113
> 
> 标签：mysql, ruby, rvm, bundler

我在我的 ruby​​ 代码中使用 gem mysql2 连接到 MySQL 数据库。在我的 Gemfile 中，我有`gem 'mysql2', '~> 0.2.11'`。但是重新连接方法不起作用。它说。因此`undefined method reconnect for #<Mysql2::Client:0x8e8da0c> (NoMethodError)`，当 mysql 服务器出现故障时，尽管我有一个等待一段时间然后尝试重新连接的循环，但应用程序会因上述错误而崩溃。为什么重新连接方法不起作用？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:22:35.077

使用 Mysql2::Client.new 的 :reconnect 标志修复它，如[https://github.com/brianmario/mysql2#connection-options](https://github.com/brianmario/mysql2#connection-options)所示。重新连接方法不是必需的，也不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:15:06.927

试试这个，写在你的gem文件中

```
gem 'mysql2' 
```

然后，捆绑安装。

# c++ - 范围问题：如何从其类外部查看（既不访问也不修改！）私有属性？

> ID：12705964
> 
> 赞同：0
> 
> 时间：2012-10-03T09:50:54.133
> 
> 标签：c++, class, object, scope, private

我想知道是否有任何方法可以从其类外部*查看*（并且**不访问也不修改）私有成员？**

```
template <typename type_>
class OBJ1
{
  //methods
};

class OBJ2
{
  private:
    OBJ1<int> my_obj;
};

class OBJ3
{
  public:
    template <typename type_>
    void magic_method(OBJ1<type_> obj)
    {
      //with another intermediate class, call one of OBJ1's public methods
      //anotherClass::call(obj);
    }
}; 
```

显然这不起作用，因为 G++ 不知道`my_obj`. `class OBJ3`有没有办法让这段代码编译？像前向声明什么的？同样，其他类只需要知道“OBJ1 声明的对象”存在。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:55:58.787

任何一个

```
void magic_method(OBJ1<int>& my_obj)
{
  //with another intermediate class, call one of OBJ1's public methods
} 
```

或者，如果您想`OBJ1`通用：

```
template<typename T>
void magic_method(OBJ1<T>& my_obj)
{
  //with another intermediate class, call one of OBJ1's public methods
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:26:36.163

我不确定你到底想要什么......但如果我理解正确你想从 OBJ3 中访问 OBJ2 私人部分。

```
template <typename type_>
class OBJ1
{
  //methods
};

template <typename type_>
class OBJ2
{
  private:
    OBJ1<type_> my_obj;
    friend class OBJ3;
};

class OBJ3
{
  public:
    template <typename type_>
    void magic_method(OBJ2<type_> obj)
    {
      std::cout << obj.my_obj;
      //with another intermediate class, call one of OBJ1's public methods
      //anotherClass::call(obj);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:24:20.623

```
// call one of OBJ1's *public* methods 
```

您可以轻松完成这项工作，如下所示。实际问题是什么，`OBJ2`与任何事情有什么关系？显示您担心的私人访问错误的发布代码。

```
#include <iostream>
#include <typeinfo>

template <typename type_>
class OBJ1
{
  public:
  void print_type_name() {
    std::cout << typeid(type_).name() << "\n";
  }
};

/*
class OBJ2
{
  private:
    OBJ1<int> my_obj;
};
*/

class anotherClass {
  public:
    template <typename type_>
    static void call(OBJ1<type_> obj) {
        obj.print_type_name();
    }
};

class OBJ3
{
  public:
    template <typename type_>
    void magic_method(OBJ1<type_> obj)
    {
      //with another intermediate class, call one of OBJ1's public methods
      anotherClass::call(obj);
    }
};

int main() {
    OBJ3 obj3;
    OBJ1<int> obj1;
    OBJ1<double> objd;
    obj3.magic_method(obj1);
    obj3.magic_method(objd);
} 
```

# android - 如何从 AsyncTask 调用“requestLocationUpdates”

> ID：12705965
> 
> 赞同：0
> 
> 时间：2012-10-03T09:50:54.727
> 
> 标签：android

我有一个 AsyncTask 用于检查加速度计数据。当我检测到加速度计给出更大的值时，我需要开始 GPS 记录。

```
private LocationManager mlocManager;
private GPSLocationListener mlocListener;
..
mlocManager = (LocationManager)context.getSystemService(context.LOCATION_SERVICE);
mlocListener = new GPSLocationListener();
..
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 100, mlocListener); 
mlocManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 100, mlocListener); 
```

如何使这个运行？我得到的错误是

```
error occured while executing doInBackground()
Can't create handler inside thread that has not called Looper.prepare() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:53:20.103

AsyncTask 不在 Looper 线程上运行，因此存在问题，您可能希望使用处理程序，因为它们与 Looper 线程一起运行，因此不会发生此类错误。

# ruby-on-rails - Ruby on Rails 中的简单博客，但权限受限

> ID：12705966
> 
> 赞同：0
> 
> 时间：2012-10-03T09:50:57.853
> 
> 标签：ruby-on-rails, ruby

我刚刚创建了一个简单的博客（by lynda tutorials），但它是为拥有所有访问权限（例如添加、删除和更新帖子、用户和评论）的管理员用户准备的。但我只需要一个管理员用户和他的所有权限。所有其他用户仅添加评论和创建、更新和删除帖子。我怎样才能做到这一点？

或者我怎样才能只添加一个管理员用户，这样当他输入特定的用户名和密码时，他就可以获得所有访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:43:01.497

Railscasts 中有[一个关于 cancan 的章节](http://railscasts.com/episodes/192-authorization-with-cancan)。这使得一些类似于你想要的东西。

# javascript - html dataType 的 Ajax 成功

> ID：12705969
> 
> 赞同：0
> 
> 时间：2012-10-03T09:51:09.197
> 
> 标签：javascript, ajax, html-lists

我正在使用 html dataType 对 PHP 文件进行 Ajax 调用。php 文件以包含 a`<script>`和 a 的html 代码回答`<li>`

```
<script type="text/javascript">
    ..some code which manages a javascript array
</script>

<li>info about something</li> 
```

在 javascript 客户端中，我只需要，`<li>`但是当我尝试使用数据并将其放入`<ul>`with 时`id='list'`，出现错误

```
..ajax..
success: function(data){
  $('#list').html(data);
}
.. 
```

> 未捕获的 SyntaxError：意外的标识符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:54:20.413

```
$.ajax({ method: 'GET', 

    url: 'phpelenco_canzoni.php', 
    dataType: 'html', 

    success: function(data){ 

        $('#list').html(data); 

} // <-- }); 
```

改变

```
$.ajax({ method: 'GET', 

    url: 'phpelenco_canzoni.php', 
    dataType: 'html', 

    success: function(data){ 

        $('#list').html(data); 

}}); 
```

# objective-c - 无法处理 NSButton 子类中的任何事件

> ID：12705970
> 
> 赞同：1
> 
> 时间：2012-10-03T09:51:15.537
> 
> 标签：objective-c

我有我的 NSButton 子类，它作为子视图添加到 NSView 子类：

```
[parentView addSubview:button]; 
```

我所有的点击事件都传递给超级视图对象。

我尝试了谷歌找到的任何示例，但我无法处理任何事件。我的意思是我尝试了这些：

**在 Button 的 init 方法中：**

```
[self setTarget:self];

[self setAction:@selector(clicked)]; 
```

还

```
[self setTarget:self];

[self setAction:@selector(methodWithNSEventParam:)]; 
```

也让他们发表评论。

从来没有“点击”。

**覆盖以下方法（它们都没有被调用过）。**

> (void) mouseEntered:(NSEvent*)theEvent
> 
> (void) mouseExited:(NSEvent*)theEvent
> 
> (BOOL) mouseDownCanMoveWindow
> 
> (void) mouseDown:(NSEvent *)theEvent
> 
> (void) mouseUp:(NSEvent *)theEvent
> 
> (NSView*) hitTest:(NSPoint)aPoint

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:29:38.100

我假设您没有使用 Interface Builder。

确保正确设置目标、操作和事件。这是 pageControl 的示例。

```
[pageControl addTarget:self
                action:@selector(pageTurning:)
      forControlEvents:UIControlEventValueChanged]; 
```

# jquery - 可点击的下拉菜单

> ID：12705977
> 
> 赞同：1
> 
> 时间：2012-10-03T09:51:31.683
> 
> 标签：jquery, drop-down-menu

这是我的问题的小提琴：http: [//jsfiddle.net/WNmff/1/](http://jsfiddle.net/WNmff/1/) 它有点精简......最初有15个列表项+小提琴没有显示出这个真正起作用的方式。我试图组合不同的元素（CSS 下拉菜单、手风琴......）来制作一个适用于单击而不是悬停的菜单。（它可能看起来有点修补^^）但是：

*   如果我一次单击多个列表项（不禁用它们），它们将保持活动状态，当我将鼠标悬停在它们上方时，它们会自行出现；
*   如果我单击一个项目，然后将鼠标移到另一个项目上，子菜单就会消失；
*   项目清单
*   当我点击较低的项目（需要一点滚动才能到达）时，页面会自动滚动回顶部。

可能还有更多问题，但这些问题确实很烦人，并且会阻止网站按要求运行。

提前致谢...

# c# - 为 HTML 字符串使用自定义模型绑定器

> ID：12705978
> 
> 赞同：7
> 
> 时间：2012-10-03T09:51:31.837
> 
> 标签：c#, asp.net-mvc, model-binding

我正在尝试将用户输入的 HTML 字符串从 POST 绑定到模型对象上的简单字符串变量中。如果我使用该`[AllowHtml]`属性，这可以正常工作。但是，我想在 HTML 进入模型之前对其进行清理，所以我创建了一个 ModelBinder：

```
public class SafeHtmlModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerCtx, ModelBindingContext bindingCtx)
    {
        var bound = base.BindModel(controllerCtx, bindingCtx);
        // TODO - return a safe HTML fragment string
        return bound;
    }
} 
```

还有一个`CustomModelBinderAttribute`：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = false)]
public class SafeHtmlModelBinderAttribute : CustomModelBinderAttribute
{
    public SafeHtmlModelBinderAttribute()
    {
        binder = new SafeHtmlModelBinder();
    }

    private IModelBinder binder;

    public override IModelBinder GetBinder()
    {
        return binder;
    }
} 
```

然后，我用新属性注释要清理的模型属性：

```
[Required(AllowEmptyStrings = false, ErrorMessage = "You must fill in your profile summary")]
[AllowHtml, SafeHtmlModelBinder, WordCount(Min = 1, Max = 300)]
public string Summary { get; set; } 
```

这遵循[http://msdn.microsoft.com/en-us/magazine/hh781022.aspx](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)上的示例。不幸的是，它似乎不起作用！如果我在我的`BindModel`方法中放置一个断点，它永远不会被命中。有任何想法吗？

**更新**

根据来自 Joel 的信息，我更改了 IModelBinder 以在`SetProperty`方法中截取值，而是将其应用于`SafeHtmlModelBinderAttribute`包含可以包含 HTML 的字符串属性的类。该代码检查该属性是一个字符串，并且在尝试清理之前还允许包含 HTML：

```
public class SafeHtmlModelBinder : DefaultModelBinder
{
    protected override void SetProperty(
        ControllerContext controllerCtx,
        ModelBindingContext bindingCtx,
        PropertyDescriptor property,
        object value)
    {
        var propertyIsString = property.PropertyType == typeof(string);
        var propertyAllowsHtml = property.Attributes.OfType<AllowHtmlAttribute>().Count() >= 1;

        var input = value as string;
        if (propertyIsString && propertyAllowsHtml && input != null)
        {
            // TODO - sanitize HTML
            value = input;
        }

        base.SetProperty(controllerCtx, bindingCtx, property, value);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:04:16.537

我一直在为同样的事情而苦苦挣扎。似乎从未调用过 GetBinder() 方法。在四处挖掘之后，我发现[了这篇文章](http://forums.asp.net/t/1774758.aspx/1)，其中接受的答案是不可能为属性放置模型绑定属性。

这是否属实我不知道，但现在我只是要尝试实现我需要以不同的方式做的事情。一个想法是创建一个更通用的 ModelBinder 并在执行绑定时检查您的属性是否存在，类似于[此答案](https://stackoverflow.com/a/6180146)中的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T11:44:33.033

我发现以下源自 [http://aboutcode.net/2011/03/12/mvc-property-binder.html](http://aboutcode.net/2011/03/12/mvc-property-binder.html)的解决方案 效果很好

首先，您需要一个可以应用于属性的简单属性

```
 public class PropertyBinderAttribute : Attribute
        {
            public PropertyBinderAttribute(Type binderType)
            {
                BinderType = binderType;
            }

            public Type BinderType { get; private set; }
        } 
```

以下模型绑定器

```
public class DefaultModelBinder : System.Web.Mvc.DefaultModelBinder
    {
        protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
        {
            var propertyBinderAttribute = TryFindPropertyBinderAttribute(propertyDescriptor);
            if (propertyBinderAttribute != null)
            {
                var binder = CreateBinder(propertyBinderAttribute);
                binder.BindProperty(controllerContext, bindingContext, propertyDescriptor);
            }
            else // revert to the default behavior.
            {
                base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
            }
        }

        IPropertyBinder CreateBinder(PropertyBinderAttribute propertyBinderAttribute)
        {
            return (IPropertyBinder)DependencyResolver.Current.GetService(propertyBinderAttribute.BinderType);
        }

        PropertyBinderAttribute TryFindPropertyBinderAttribute(PropertyDescriptor propertyDescriptor)
        {
            return propertyDescriptor.Attributes.OfType<PropertyBinderAttribute>().FirstOrDefault();
        }
    } 
```

然后在 Global.asax.cs 中被覆盖

```
ModelBinders.Binders.DefaultBinder = new DefaultModelBinder(); 
```

然后创建您的模型活页夹

```
public class InvariantCultureDecimalModelBinder : IModelBinder, IPropertyBinder
    {
        public void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
        {
            var subPropertyName = CreateSubPropertyName(bindingContext.ModelName, propertyDescriptor.Name);
            if (!bindingContext.ValueProvider.ContainsPrefix(subPropertyName))
                return;

            var attemptedValue = bindingContext.ValueProvider.GetValue(subPropertyName).AttemptedValue;
            if (String.IsNullOrEmpty(attemptedValue))
                return;

            object actualValue = null;
            try
            {
                actualValue = Convert.ToDecimal(attemptedValue, CultureInfo.InvariantCulture);
            }
            catch (FormatException e)
            {
                bindingContext.ModelState[propertyDescriptor.Name].Errors.Add(e);
            }

            propertyDescriptor.SetValue(bindingContext.Model, actualValue);
        }

        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            var valueResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
            var modelState = new ModelState { Value = valueResult };
            object actualValue = null;
            try
            {
                if (!String.IsNullOrEmpty(valueResult.AttemptedValue))
                    actualValue = Convert.ToDecimal(valueResult.AttemptedValue, CultureInfo.InvariantCulture);
            }
            catch (FormatException e)
            {
                modelState.Errors.Add(e);
            }

            bindingContext.ModelState.Add(bindingContext.ModelName, modelState);
            return actualValue;
        }

        //Duplicate code exits in DefaulModelBinder but it is protected internal
        private string CreateSubPropertyName(string prefix, string propertyName)
        {
            if (string.IsNullOrEmpty(prefix))
                return propertyName;
            if (string.IsNullOrEmpty(propertyName))
                return prefix;
            else
                return prefix + "." + propertyName;
        }

    } 
```

现在可以以标准方式干净地应用于模型属性

```
[PropertyBinder(typeof(InvariantCultureDecimalModelBinder))]
public decimal? value 
```

或使用参数的内置属性

```
public ActionResult DoSomething([ModelBinder(typeof(InvariantCultureDecimalModelBinder))] decimal value) 
```

# android - 在安卓上截屏进行电池分析

> ID：12705980
> 
> 赞同：0
> 
> 时间：2012-10-03T09:51:36.613
> 
> 标签：android, adb, monkeyrunner

我正在对我的应用程序进行电池分析，我只剩下这些选项：

1.  禁用设备上的 USB 充电，我还不能这样做，并使用设置 -> 电池屏幕的 monkeyrunner 截屏
2.  在没有连接 USB 线的情况下，我可以通过在我的手机上运行的 shell 脚本来模拟向下音量键 + 电源键保持事件，以截取设置 -> 电池屏幕的屏幕截图
3.  使用在根电话上运行在 adb shell 中的 shell 脚本，再次获取显示所有进程的 dumpsys 电池，如设置 - > 电池中列出的所有进程，但我不知道该命令

每种方法都有其自身的局限性。有什么方法可以实现我的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:43:33.753

我在这个问题上有一些专业知识。在我看来，您有两种选择：

1.  您可以创建本地猴子脚本并从设备上的 shell 运行它。
2.  您可以通过 TCP/IP (WiFi) 连接您的设备并存储电池消耗快照。

**编辑**

要从设备运行猴子脚本，您需要运行以下命令（如果我不搞砸的话）：

```
adb shell monkey -v -f /mnt/sdcard/script.txt 
```

在这种情况下，脚本使用了一些不寻常的 sintax（只是一个例子，这是一个用于 Nexus S 的默认联系人应用程序的脚本，带有姜饼）：

```
# Start of Script
type= user
count= 150
speed= 1.0
start data >>

#launch browser com.android.contacts/.DialtactsContactsEntryActivity
LaunchActivity(com.android.contacts, com.android.contacts.DialtactsContactsEntryActivity)
UserWait(4000)

#go to favorites tab
Tap(415, 85)
UserWait(3000)

#go to phone tab
Tap(60, 85)
UserWait(3000)

#calllog
Tap(175,90)
UserWait(2000)

#contacts
Tap(300,90)
UserWait(4000)

#create new contact
DispatchPress(KEYCODE_MENU)
UserWait(2000)
Tap(360,650)
UserWait(4000)

#go name
Tap(200,340)
UserWait(8000)
DispatchString(123)
UserWait(5000)

Tap(125,385)

#launching launcher and exit com.android.launcher/com.android.launcher2.Launcher
UserWait(10000)
LaunchActivity(com.android.launcher, com.android.launcher2.Launcher)
quit 
```

至于我，使用第二种方法更容易（而且更容易出错）。您可以通过 WiFi 连接到您的设备（因此，您的 USB 电缆已断开）。为此，您应该：

1.  通过 USB 连接您的设备并运行`adb tcpip <port_num>`
2.  然后将您的设备连接到 WiFi 网络
3.  然后在你的电脑上执行（也就是连网）`adb connect <phone_ip_addres>:<port_num>`

现在您可以使用 monkeyrunner 的标准方式通过 WiFi 触发 monkeyrunner 命令（`monkeyrunner <script_name>.py`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:57:02.620

如果您的目标是功耗分析，请查看 AT&T 研究实验室的[Application Resource Optimizer (ARO)](http://developer.att.com/developer/forward.jsp?passedItemId=9700312)。我认为这正是您正在寻找的。它将为您提供比屏幕截图更准确的分析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:10:08.913

使用 ICS 及更高版本，所有手机都与/system/bin 中名为**screencap**的 exe 捆绑在一起。运行下面的命令行来截图

```
screencap -p /sdcard/screenshot.png 
```

这也可以通过使用 Java 抓取 shell 来完成，这样您就可以在需要时捕获屏幕截图。

# iphone - IOS。viewControllers 数组的错误？

> ID：12705989
> 
> 赞同：1
> 
> 时间：2012-10-03T09:52:22.167
> 
> 标签：iphone, ios, uiviewcontroller, nsarray, viewcontroller

```
- (void)viewWillDisappear:(BOOL)animated
{
    if ([self.navigationController.viewControllers indexOfObject:self] == NSNotFound) {
        if ([self.navigationController.viewControllers.lastObject isKindOfClass:[CustomViewController class]]) {
            NSArray *tempArr = self.navigationController.viewControllers;
            self.navigationController.viewControllers = tempArr;
            [self.navigationController popViewControllerAnimated:YES];
            return;
        }
    }
    [super viewWillDisappear:animated];
} 
```

如果用户按下后退按钮并且之前的 UIViewController 是 CustomViewController，则弹出 2 个最后一个 UIViewControllers，否则弹出 1 个最后一个 UIVIewController。

我认为这些字符串没有任何意义：

```
 NSArray *tempArr = self.navigationController.viewControllers;
        self.navigationController.viewControllers = tempArr; 
```

但是如果我删除它们，我会弹出最后一个 UIViewControllers 并获取 CustomViewController 的标题，而不是当前 UIViewController 的标题。

它是一个错误吗？这段代码能在 iOS 6 中工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:01:18.160

我不确定这是否真的有效，因为我不知道 popViewController 是在弹出之前还是之后检查数组。这个想法是删除最后一个对象而不是两次弹出 viewController。

```
- (void)viewWillDisappear:(BOOL)animated
{
    if ([self.navigationController.viewControllers indexOfObject:self] == NSNotFound) {
        if ([self.navigationController.viewControllers.lastObject isKindOfClass:[CustomViewController class]]) {
            NSMutableArray *tempArr = [self.navigationController.viewControllers mutableCopy];
            [tempArr removeLastObject];
            self.navigationController.viewControllers = tempArr;
            return;
        }
    }
    [super viewWillDisappear:animated]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:59:58.067

使用 unwind segues 有更好的方法来做到这一点。

本质上，您在 ViewController 上设置了一个标记点​​，然后将视图控制器推到它上面。

然后在任何时候（当用户按下按钮或其他东西时），您都可以弹回带有标记的 viewController。

您不再需要计算要弹出多少视图控制器等......它只是工作。

请参阅此[StackOverflow 答案](https://stackoverflow.com/questions/12561735/what-are-unwind-segues-for-and-how-to-use-them)。

# asp.net-mvc-3 - WebSecurity.CreateUserAndAccount Sql 排序规则问题

> ID：12705990
> 
> 赞同：3
> 
> 时间：2012-10-03T09:52:38.580
> 
> 标签：asp.net-mvc-3, asp.net-webpages, simplemembership

如果 Sql Server 数据库排序规则是**Turkish_CI_AS ，我会在下面收到该错误，原因是****SimpleMembershipProvider.cs**类的“GetUserId”方法中的 SELECT Query 中的 UPPER 函数。

SQL UPPER('info') 不等于土耳其语_CI_AS 中的 "info".ToUpperInvariant()

Sql Server 数据库排序规则：Turkish_CI_AS

```
WebSecurity.CreateUserAndAccount("info", "123456"); 
```

> **异常详细信息：System.Web.Security.MembershipCreateUserException：提供程序遇到未知错误。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:58:01.923

您现在应该将 DB 中 UserProfile.UserName 列的排序规则从Turkish_CI_AS 更改为 Latin1_General_CI_AS 或任何其他。所以，这一定是bug。

# jsp - Action Form 多个 Servlet

> ID：12705996
> 
> 赞同：0
> 
> 时间：2012-10-03T09:53:04.700
> 
> 标签：jsp, servlets

虽然听起来有点傻，但我仍然在问这个概念性和逻辑性的问题（就我而言:)）问题：

在 jsp 页面中，我可以将它的表单数据发送到多个 Servlet 吗？例如：

`form action="home","car" method="post" name="f1"`或者

```
form name='form' method='POST' action='car','home' 
```

任何输入.....//

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:55:38.320

不，你不能从常规的 html 表单中做到这一点，你可以在 ajax 的帮助下进行这些调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:56:10.677

答案是不。一个表单只能有一个动作。参考：[http ://htmlhelp.com/faq/html/forms.html#two-action](http://htmlhelp.com/faq/html/forms.html#two-action)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:56:52.340

在客户端，您可以通过 javascript 将表单提交给两个不同的 servlet，方法是指定两个不同的目标窗口来保存响应。

HTML：

```
<IFRAME id="firstResult" name="firstResult"></IFRAME>
<IFRAME id="secondResult" name="secondResult"></IFRAME> 
```

Javascript：

```
function submitForm() {
    var form = document.getElementById("myForm");

    form.action = "/first-servlet";
    // Target is the name of the iframe to hold the response from first servlet.
    form.target = "firstResult"; 
    form.submit();

    form.action = "/second-servlet";
    // Target is the name of the iframe to hold the response from second servlet.
    form.target = "secondResult"; 
    form.submit();
} 
```

然后，您应该有处理程序来捕获 IFRAME 的 onload 事件以处理来自 servlet 的响应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T09:56:59.040

这是不可能的。您可以做的也许是将您的观点指向 a`MainServlet`并且`Servlet`可以将这些值传递给您的 other `Servlets`。但这可能会使您的控制器混淆。更好的方法是`AJAX`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T07:12:16.257

答案是否定的……一个表单只能有一个动作

但是对于特定操作，可以使用不同的提交...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-28T16:40:35.907

我不确定，但这可能会在

```
request.getRequestDispatcher("yournextservlet").forward(request, response); 
```