# StackOverflow 问答 15502000-15502999

# regex - 用 sed 替换字符

> ID：15502000
> 
> 赞同：0
> 
> 时间：2013-03-19T14:18:43.897
> 
> 标签：regex, replace, sed

我想用 sed 替换一些字符，但前提是满足某些条件。

因此，如果字符串中的某处出现`\t`，则应将其替换为`\`, 即。带有反斜杠和物理制表符。万一`\\t`发生了，什么都不应该做。

一个逻辑是替换`\t`前面没有的每个，`\`但我不确定如何编写该正则表达式。也不是很擅长那些东西`sed`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:39:10.920

尝试：

```
sed -r 's/^\\t|([^\\])\\t/\1\t/g' file 
```

**例子：**

```
$ cat file
hello\tworld
foo\\tbar
\tfirst
last\t
last\\t
\\tfirst

$ sed -r 's/^\\t|([^\\])\\t/\1\t/g' file
hello   world
foo\\tbar
        first
last
last\\t
\\tfirst 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:30:48.340

单程：

```
sed 's/[^\\]\\t/\\      /' file 
```

在替换部分，它是'2个反斜杠+Ctrl-V+Tab'

# visual-studio - BuildID 宏在 TFS 构建中是如何递增的，我怎样才能让它像 ++ 一样？

> ID：15502010
> 
> 赞同：3
> 
> 时间：2013-03-19T14:19:10.353
> 
> 标签：visual-studio, tfs, tfsbuild

我正在开发一个通过 TFS 服务器编译的项目。内部版本号格式（在构建设置的进程选项卡中）定义为`$(BuildDefinitionName)_$(BuildID)`. 我不知道是如何`$(BuildID)`增加的。如果我在同一小时内排队，比如说两个构建，它通常会增加一个，但并非总是如此。

![$BuildID 奇怪的增量](../Images/c96700d1543e4b4cdb2d09b533967979.png)

如果距离上次构建已经过去了大约一周，它可能会增加 20 或 40。我还没有想出任何模式。

但我真正的问题是：我怎样才能让它在每次构建时增加一。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-27T08:26:47.633

$(BuildID) 用于整个团队项目集合。我假设您的收藏中有多个团队项目。

因此，每个触发的构建都会将此 ID 加一（它基本上是 TFS DB 中相应构建的主键）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:25:12.313

我怀疑您的内部版本号每次构建*都会*增加 1，但您只是在*查看自己的*构建列表。其他人正在触发构建（可能包括构建服务器，如果启用了 CI），并且计数仅按*构建定义*分开，而不是按*用户*分开。

这就是为什么更长的延迟会导致更大的增量：如果您等待一周，其他签入/开发人员已经运行了更多构建。

如果您查看所有构建的列表，而不是屏幕截图中的“我的构建”，您可能会看到一个每次递增 1 的数字。

您不能像您希望的那样简单地更改它，因为如果您将数字设为“每个用户”，您最终会得到具有相同 ID 的多个构建。可以覆盖构建脚本中创建构建号的部分以包含您的用户名和一个数字 - 这意味着您的构建 ID 每次都会增加 1，但每个用户都有不同的构建名称。（你会有构建`DEV_JOHN_123`/`DEV_BOB_123`而不仅仅是`DEV_123`/ `DEV_124`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T16:01:51.003

您应该使用**$(Rev)**脚本来增加一个数字。**$(Rev)**只能用于构建名称字符串的末尾。

例如。**$(BuildDefinitionName)_$(Date:yyyyMMdd)$(Rev:.r) 内部**版本号格式将在同一天生成三个连续签入（如果您设置了持续集成）：

1.  我的项目_20130828.1
2.  我的项目_20130828.2
3.  我的项目_20130828.3

如您所见，最后一部分在每次签到时自动递增。

# css - CSS页脚边距问题

> ID：15502013
> 
> 赞同：0
> 
> 时间：2013-03-19T14:19:16.537
> 
> 标签：css, margin

我有一个布局如下的页面：

```
<div class="report">
    <div class="content">
        <!-- Lots of irrelevant stuff -->
    </div>
    <div class="footer">
        <!-- Footer content -->
    </div>
</div> 
```

我的页脚应该延伸到屏幕的最左侧，但我的“报告”类应用了 0.25 英寸的左边距。

我尝试使用 -.25in 左边距，但这并没有像预期的那样将我的页脚向左拉。实际上，它似乎根本没有移动页脚。

我知道我的 CSS 被正确跟踪，因为我可以影响其他属性（顶部、底部边距、颜色等），但我无法让页脚扩展到屏幕的最左侧。

不幸的是，我不能简单地将页脚拉到“报告”div 之外。

CSS：

```
.report
{
    font-size: 12pt;
    margin-left: 0.25in;
    width: 775px;
    position: relative;
    overflow: hidden;
}

.footer
{
    font-size: 8pt;
    height: 75px;
    margin: 15px 0 0 -0.25in;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:22:13.503

因为它是页脚，你可以试试`position: relative; left: -.25in;`. 顺便说一句，你为什么用英寸？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:48:16.337

`<div>`由于. _ `overflow: hidden;`_ `.report`尝试将其删除，请参阅this [fiddle](http://jsfiddle.net/Qbgp2/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T14:46:55.900

**[这个 jsFiddle](http://jsfiddle.net/CgWB2/3/)**对我

`overflow: hidden`你的元素`.report`上的 隐藏了页脚，但它在正确的位置。

# c# - 如何从按钮单击事件中关闭后台工作人员？

> ID：15502026
> 
> 赞同：0
> 
> 时间：2013-03-19T14:20:05.293
> 
> 标签：c#, multithreading, winforms, backgroundworker

我编写了一个 C# 程序来通过 backgndWorkerEnroll_DoWork 调用一个函数。它将从一个 for 显示的事件开始。

另一方面，我有一个按钮单击事件。当该事件发生时，我调用一个函数并返回成功，我想关闭后台工作程序。

我怎样才能做到这一点？

我的代码如下。

```
private void PwdCheck_Shown(object sender, EventArgs e)
{
    backgroundWorker1.RunWorkerAsync();
}

private void btnEnter_Click(object sender, EventArgs e)
{ 
    resPwdValid = PwdValid();
    if (resPwdValid == true)
    {
         //backgroundWorker1.CancelAsync();
         this.Close();
    }
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{               
    tstVerify:
        resVerify = testVerfy();
        if (resVerify == true)
        {
           // MessageBox.Show("Matched");
        }
        else
        {
           MessageBox.Show("Not Matched");
           goto tstVerify;
        }
}

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (resVerify == true)
    {
        this.Close();
    }
} 
```

在我的 btnenter_click respwdvalid 返回 true 后，如何关闭 backgroundrunner？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:26:01.077

使用[Cancellation 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.cancellationpending.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:26:47.697

你会打电话给`BackgroundWorker.CancelAsync()`我相信（你似乎已经把它注释掉了）然后在你的`DoWork`代码中你应该继续检查`BackgroundWorker1.CancellationPending`并尽早退出你的后台线程。

# c - 使用 dlopen() 加载共享库 (.so) 和在可执行文件中包含共享库之间有什么区别？

> ID：15502029
> 
> 赞同：2
> 
> 时间：2013-03-19T14:20:16.577
> 
> 标签：c, shared-libraries, dlopen

有什么区别：

1.  使用 dlfcn.h 中提供的 dlopen() 加载共享库
2.  在构建可执行文件时在 Android.mk 文件中包含共享库。

代码示例：Android.mk 文件：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)
LOCAL_SRC_FILES:=     \
    test.c

LOCAL_SHARED_LIBRARIES := \ libtest

LOCAL_MODULE:= test
LOCAL_MODULE_TAGS := eng
LOCAL_MODULE_PATH := $(TARGET_OUT_OPTIONAL_EXECUTABLES)

include $(BUILD_EXECUTABLE) 
```

* * *

在执行上述两种方法时，哪种方法更好/更有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:21:44.233

使用`dlopen()`，链接器永远不会为您工作。在使用 调用它之前，您必须手动查找每个函数`dlsym()`。这使得来自共享对象的函数的每个调用点比仅仅进行普通调用并让链接器对其进行排序更复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:23:36.047

使用方法 2（链接器），如果缺少库，则整个程序不会启动。使用方法 1 ( `dlopen`)，您可以优雅地处理错误，让程序继续运行。`dlopen`用于一些特殊情况，比如加载插件，或者启动可选功能。

# powershell-2.0 - 如何使用 powershell 提取“不可见 19”中的数字 19？我猜正则表达式会更好。

> ID：15502034
> 
> 赞同：1
> 
> 时间：2013-03-19T14:20:21.210
> 
> 标签：powershell-2.0

如何使用 powershell 从下面的文本中提取数字 19？

06A8 07E:0 不可见 19 (M) 51206

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:38:08.283

是的，正则表达式可能是最简单的。

```
$s = "06A8 07E:0 Not Visible 19 (M) 51206"
if ($s -match "\s[[A-Za-z\s]+(\d+)") {
    $matches[1];
} 
```

# php - PHP AMQP Consume() fork 做实际工作

> ID：15502037
> 
> 赞同：4
> 
> 时间：2013-03-19T14:20:23.177
> 
> 标签：php, rabbitmq, amqp

我正在寻找一个 PHP 脚本，它从 RabbitMQ 队列中使用（使用 PECL AMQP 模块），然后分叉执行实际工作。

我有代码@ [https://gist.github.com/giggsey/6666e67bb0e090eeb5f0](https://gist.github.com/giggsey/6666e67bb0e090eeb5f0)

但是当我运行它时，我得到：

> 11296 密钥：USER.12392 ObjectLength：74 在 2013-03-19 分叉 11296
> 
> 14:16:22 11277 ack() PHP 致命错误：未捕获的异常
> 
> 在 tmp/forking.php:10 中带有消息“由对等方重置连接”的“AMQPConnectionException”
> 
> 堆栈跟踪：
> 
> 0 tmp/forking.php(10): AMQPQueue->consume(Array)
> 
> 1 tmp/forking.php(102): 测试->运行()
> 
> 2 {main} 在第 10 行的 tmp/forking.php 中抛出
> 
> 致命错误：在第 10 行的 tmp/forking.php 中未捕获的异常 'AMQPConnectionException' 和消息 'Connection reset by peer'
> 
> AMQPConnectionException：第 10 行的 tmp/forking.php 中的对等方重置连接
> 
> 调用堆栈：
> 
> ```
> 0.0006     665008   1\. {main}() tmp/forking.php:0
> 
> 0.0007     665456   2\. test->run() tmp/forking.php:102
> 
> 0.0359     670504   3\. AMQPQueue->consume() tmp/forking.php:10 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:39:57.190

您在建立连接后分叉，这意味着子级正在继承连接，这样父级和所有子级最终都使用相同的连接，并且如果任何子级退出（自动关闭连接）或关闭连接，则父级所有兄弟姐妹突然发现他们不再有联系。

所以不要使用：

```
$connection->connect(); 
```

使用记录较少的：

```
$connection->pconnect(); 
```

这将提供一个持久连接，这样当分叉的孩子关闭连接时，父母会自动重新打开它。

# java - 在多线程示例中提高并发性

> ID：15502038
> 
> 赞同：0
> 
> 时间：2013-03-19T14:20:24.763
> 
> 标签：java, multithreading

锁定机制 - 每个方法都运行一个队列，用于跟踪该方法正在处理的进程内密钥。

```
 private final static Object LOCK = new Object();
    private final static Set<String> busy1Records = new HashSet<String>();
    private final static Set<String> busy2Records = new HashSet<String>();

    public void waitToWorkOn(int i, String key) {
        synchronized(LOCK) {

          switch(i) {
            case 1 : while (busy1Records.contains(key)) {
                        LOCK.wait(); //go to sleep
                     }
                     busy1Records.add(key);  
                     break;
            case 2 : while (busy2Records.contains(key)) {
                     LOCK.wait(); //go to sleep
                     }
                     busy2Records.add(key);  
                     break;
          }//end switch

       } // end sychronized                    
    }

    public void doneWith(int i, String key) {
        synchronized(LOCK) {

        switch(i) { 

          case 1:
              busy1Records.remove(key);
              LOCK.notifyAll(); 
              break;
          case 2:
              busy2Records.remove(key);
              LOCK.notifyAll(); 
              break;

        } 
```

要使用这些 Sets ，该类中有这些方法。

```
private void method1(String key) {

try {

waitToWorkOn(1,key);
// Do stuffs here for key   

}catch(Exception e)  {..}
finally {
doneWith(1,key);
}

}

private void method2(String key) {

try {

waitToWorkOn(2,key);    
// Do stuffs here for key

}catch(Exception e)  {..}
finally {
doneWith(2,key);
}

} 
```

考虑有3个线程[每个线程都在这个类的一个新实例上工作]

```
T1 - key = X
T2 - key = X
T3 - key = Z 
```

因此，当 T1 在 method1 中时，它会获取 LOCK 并将 key 添加到其 queue 中用于 method1 并释放 LOCK。但是它还没有调用 doneWith 方法，然后另一个线程 T2 尝试插入相同的实体 X。所以它在 waitToWorkON 中获取 LOCK 并且因为它发现 X 已经在 Queue1 中，所以它必须在里面等待。然后一个线程 T3 来了，它必须在独立于 X 的第三个实体 Z 上调用方法 1。但是它无法获取 LOCK，因为 T2 正在等待并持有 LOCK。

如何让 T3 继续执行 Z 的方法 1 而无需等待 T2 在 X 上等待？T1 仍未从 Queue 中释放 X。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:32:17.630

感谢@Hamlet 和@assylias 的回答

> @fortm LOCK.wait() 释放锁，等待返回时重新获取。所以是的，如果线程 1 正在等待，线程 2 可以进入同步块。– assylias 21 分钟前 1 票赞成
> 
> 好的，我了解您想要实现的目标。是的，当锁调用等待时，它会释放锁并且线程进入等待队列，直到它发出信号。之后，线程移动到就绪队列并等待重新获取锁。– Hamlet Hakobyan 2 分钟前

# javascript - 插件 SDK - 上下文菜单和页面模块工作者

> ID：15502043
> 
> 赞同：4
> 
> 时间：2013-03-19T14:20:51.177
> 
> 标签：javascript, firefox-addon-sdk

我一直在研究与页面模块通信并遇到问题的上下文菜单。

只要我不刷新页面，我就可以通过右键单击向视图中的页面/选项卡发送通信。当我刷新页面时，会创建一个新的工作人员，并且上下文菜单无法与工作人员通信。

我现在有两个相同的工人，但就像旧的工人已经过期了。这意味着 onMessage: 中的这个循环不起作用，因为它选择了第一个工人。

```
for (index = 0; index < workers.length; index += 1) {
    if (workers[index].tab.index === tabs.activeTab.index) {
    workers[index].port.emit("rightClick", string, ss.storage.product);
    }
} 
```

我一直希望在刷新时删除旧工人，但似乎没有选择这样做。我是否从根本上错过了处理工人的一些事情？

我收到的错误是：错误：该页面当前处于隐藏状态，在再次可见之前无法使用。

这与就工人而言，我现在正在同一选项卡中查看新页面这一事实一致。我认为 worker.on('detach', function(){}) 应该处理这个问题，但似乎这只是在关闭选项卡时。

任何意见，将不胜感激。

*稍作休息后*添加OK 我决定使用其他地方推荐的 detachWorker 函数进行分离。*我把它放在我的 pageMod 对象的顶部，如下所示*

 *```
// Clean up duplicate worker
for (index in workers) {
    if(workers[index].url === worker.url && workers[index].tab.index === worker.tab.index) {
        detachWorker(workers[index], workers);
    }
} 
```

虽然我认为这不是正确的方法，但这解决了这个问题（目前）。解决方案的任何进展:)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-27T19:29:20.870

也碰到了这个。Worker 对象似乎停留在过去的某些页面中（并且在历史上的 Back 和 Forward 时被重用）。解决方案是监听`pagehide`和`pageshow`事件，以便仅将当前显示的工作人员保留在数组中：

```
var pageMod = require("sdk/page-mod");
var array = require('sdk/util/array');

var pageWorkers = [];
pageMod.PageMod({
  onAttach: function(worker) {
      array.add(pageWorkers, worker);
      worker.on('pageshow', function() { array.add(pageWorkers, this); });
      worker.on('pagehide', function() { array.remove(pageWorkers, this); });
      worker.on('detach', function() { array.remove(pageWorkers, this); });
      // do other work.
  }
}); 
```

请注意，该`array.add`函数负责不添加重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:31:06.473

不确定我有没有遇到你的问题。您提到的事件[detach](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/content/worker.html#detach)也会在重新加载选项卡时发出：

```
const { add, remove } = require("sdk/util/array");
const workers = [];

require("sdk/page-mod").PageMod({
  include: "*",
  contentScript: "alert('executed')",
  onAttach: function(worker) {
    add(workers, worker);
    console.log('attached: ', workers.length);

    worker.on('detach', function() {
      remove(workers, worker);
      console.log('detached: ', workers.length);
    })
  }
}); 
```

当我重新加载页面时，将执行分离的侦听器。无论如何，要检查与工作人员关联的选项卡是否是活动选项卡，您应该能够仅比较选项卡对象`(workers[index].tab === tabs.activeTab)`：另请注意，在 Add-on SDK 1.14 中，选项卡也具有该`id`属性，因此您可以使用它来标识自己。并且`for…in`不建议使用索引循环：[https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...查看描述部分。我宁愿使用[for...of](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...of)：

```
for (let worker of workers) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T09:58:13.117

零是正确的，事件`detach`在重新加载时发出。
但是当我在同一个选项卡中打开不同的页面时，不会发出分离事件！
因此，即，当我在选项卡 1 中加载了某个页面 A 并单击在同一选项卡 1 中打开不同页面 B 的链接时，我必须手动分离页面 A 的工作人员（？）

```
var workers = [];    

require('page-mod').PageMod({
  include: '*',
  contentScriptWhen: 'end',
  contentScript: [require('self').data.url('bla.js')],
  onAttach: function(worker) {
    var w = workers.length;
    while (w--) {
      if (worker.tab === workers[w].tab) {
        workers.splice(w, 1);
        break;
      }
    }
    workers.push(worker);
    // other stuff
  }
}); 
```*

# java - 两次覆盖serialEvent

> ID：15502044
> 
> 赞同：0
> 
> 时间：2013-03-19T14:20:52.957
> 
> 标签：java, serial-port, overriding, arduino

我写了一个名为`ArduinoSerial`implements的类`SerialPortEventListener`。

我使用这个类作为一个库，我将它导入到另一个名为 的程序`ArduinoGUI`中，该程序创建了一个带有一系列复选框的摇摆 GUI。

当我想写入串行端口时，我有一个私有arduino`ArduinoGUI`类的私有成员变量；`ArduinoSerial`

我调用该`arduino.output.write(byte b);`函数，它工作正常。

问题是内部`ArduinoSerial`类覆盖了读取函数，并且当前将输出吐出到 system.out。

```
 @Override
public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            String inputLine=input.readLine();
            System.out.println(inputLine);

        } catch (Exception e) {
            System.err.println(e.toString());
                            System.out.println("But nothing much to worry about.");
        }
    }
    // Ignore all the other eventTypes, but you should consider the other ones.
} 
```

然而，这不是我想要的，我想将串行数据读入`ArduinoGUI`类中的字节数组，但我不确定如何再次覆盖此方法和/或为串行数据编写事件侦听器端口，同时让`ArduinoSerial`类不读取并首先丢弃缓冲区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:28:27.263

是的，您不能两次覆盖方法，但您可以执行以下操作：

```
public class ArduinoGUI extends JFrame implements ArduinoSerialItf { 

private ArduinoSerialItf arduinoSerialItf = null; 
private ArduinoSerial arduinoSerial = null;

 //init 
 public ArduinoGUI(){
    arduinoSerialItf = this;

   arduinoSerial = new ArduinoSerial(arduinoSerialItf );

 } 

@Override
public void onEventReceived(SerialPortEvent oEvent){
   // in GUI class you get event from ArduinoSerial 
}

} 
```

创建接口：

```
public interface ArduinoSerialItf {
 public void onEventReceived(SerialPortEvent oEvent);
} 
```

ArduinoSerial 类：

```
public class ArduinoSerial implements SerialPortEventListener {

private ArduinoSerialItf arduinoSerialItf = null;

public ArduinoSerial(ArduinoSerialItf arduinoSerialItf){
  this.arduinoSerialItf = arduinoSerialItf;
} 

@Override
public synchronized void serialEvent(SerialPortEvent oEvent) {
    // when we call this method, event goes to GUI class
    arduinoSerialItf.onEventReceived(oEvent);

} 
```

# c# - MVC 下拉列表

> ID：15502045
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:20:56.297
> 
> 标签：c#, asp.net-mvc, linq

如何使用 C# 中的 linq 和 MVC 模型从 SQL Server 数据库中填充 @HTML.dropdownlist 或 @HTML.dropdownlistfor？我看过很多使用 ViewData 的示例，但我想使用模型。我认为我的挂断是从数据库中获取数据并放入可以在视图中使用的列表中。

我需要一个简单而详细的例子。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:32:03.320

我试图让你成为三个模式演员的样本

看法

```
<%= Html.DropDownList("YourControl", Model.YourSource)%> 
```

控制器

```
IEnumerable<YourEntity> result =
                            from item in GetListSample()
                            select new YourEntity
                            {
                                Text = item.Name,
                                Value = item.Value
                            };
  model.YourSource= result; 
```

模型

```
public class YourModel
{
    public IEnumerable<YourEntity> YourSource{ get; set; }
} 
```

注意：当您创建视图时，您必须在视图中注入您的模型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:37:26.380

我没有 sql 的示例，但我可以帮助您使用 MVC 渲染到页面

控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace TestPortal.Areas.JB.Controllers
{
    public class ExampleController : Controller
    {
        //
        // GET: /JB/Example/

        public ActionResult Index()
        {
            Models.Example.ExampleIndex output = new Models.Example.ExampleIndex();
            output.DropDownData.Add(new SelectListItem()
            {
                Text = "One",
                Value = "1"
            });

            output.DropDownData.Add(new SelectListItem()
            {
                Text = "Two",
                Value = "2"
            });

            return View(output);
        } 

    }
} 
```

ExampleIndex.cs ：请注意，构建视图模型以将数据传递给视图总是好的

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace TestPortal.Areas.JB.Models.Example
{
    public class ExampleIndex
    {
        public ExampleIndex()
        {
            this.DropDownData = new List<SelectListItem>();
        }

        public List<SelectListItem> DropDownData
        {
            get;
            set;
        }
    }
} 
```

索引.cshtml：

```
@model TestPortal.Areas.JB.Models.Example.ExampleIndex

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@Html.RFSSelect("DropDownId", Model.DropDownData) 
```

# sql-server - 在 TSQL 中优化 XML

> ID：15502049
> 
> 赞同：3
> 
> 时间：2013-03-19T14:21:06.457
> 
> 标签：sql-server, xml, xpath, xquery, sql-server-2012

我最近开始使用 TSQL 在表列中处理 XML，发现它比你每天的平均速度慢得多`3rd-Normal-Form-associative-tables-Query-joining`，根据我对 150 万行进行的测试，我的意思是它比`3rd-Normal-Form-associative-tables-Query-joining`. 好处是，使用 XML，如果以特定方式设置，它会阻止您设置额外的关联表（在我的测试中，我的关联表（连接表的许多=许多关系的大小达到 750 万行，相比之下到我的表，它的大小为 150 万行，存储相同的信息）。不过不要介意我的咆哮，这只是对我执行的 2 组表的测试。

**问题**

这对我来说有点难以解释，因为我只是 SQL Server 的中级初学者。在列中使用无类型 XML 的最佳实践是什么，以及如何优化包含此 XML 的表以最佳速度执行，因为我现在必须使用 SQL 脚本处理 XPath 和 XQuery（这似乎是原因根据执行计划的严重速度放缓）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:31:51.267

您可以做几件事来提高 xml 字段的性能

*   添加主 XML 索引
*   添加二级索引
*   使用 XML 模式
*   创建从 XML 中提取数据的计算字段

XML 字段的 IO 密集度往往略低，但 CPU 密集度更高。检查这是否是一个问题

# web-services - 与 @RequestParam MultipartFile 一起使用时，Spring MVC @RequestBody 给我一个空字符串

> ID：15502054
> 
> 赞同：4
> 
> 时间：2013-03-19T14:21:14.297
> 
> 标签：web-services, rest, spring-mvc, file-upload, multipart

我对此 Web 服务代码有疑问

```
@Controller
@RequestMapping("/u_tutorial")
public class UploadTutorial
{
    @RequestMapping(value = "tutorial1", method = RequestMethod.POST, headers = "Accept=application/json")
    @ResponseStatus(value = HttpStatus.OK)
    public void upload(@RequestBody String body, @RequestParam List<MultipartFile> file, Principal principal,
        HttpServletRequest request)
    {
        System.out.println("body: " + body); // always empty

        for (MultipartFile mf : file)
        {
            System.out.println("file: " + mf.getOriginalFilename());
        }
    }
} 
```

情况是当我想上传请求正文中包含一些数据的文件时，我的正文变量总是给我一个空字符串。

但是当我尝试只使用“@RequestBody String body”或“@RequestParam List file”时，它就像一个魅力。

我做了一些搜索，发现是因为 InputStream 的问题。一些建议的解决方案已经讨论过，但与我的问题不太相关（或者可能是，但我不明白）。

谁能给我一个解决方案？谢谢。

PS 1\. 这是我的图书馆版本

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <spring.core.version>3.1.4.RELEASE</spring.core.version>
    <spring.security.version>3.1.3.RELEASE</spring.security.version>
    <spring.data.mongodb.version>1.1.0.RELEASE</spring.data.mongodb.version>
    <cglib.version>2.2</cglib.version>
    <aspectj.version>1.6.10</aspectj.version>
    <mongodb.driver.version>2.10.1</mongodb.driver.version>
    <!-- Logging -->
    <slf4j.version>1.6.1</slf4j.version>
    <log4j.version>1.2.14</log4j.version>
    <javax.jstl-taglibs.version>1.1.2</javax.jstl-taglibs.version>
    <jackson.version>1.9.3</jackson.version>
    <!-- Testing -->
    <mockito.version>1.8.5</mockito.version>
    <junit.version>4.8.2</junit.version>
    <!-- Plugins -->
    <maven.copy.plugin.version>0.2.3</maven.copy.plugin.version>
    <maven.compiler.plugin.version>2.3.2</maven.compiler.plugin.version>
    <maven.apt.plugin.version>1.0</maven.apt.plugin.version>
    <!-- Utilities -->
    <apache.common.io.version>2.4</apache.common.io.version>
    <apache.common.fileupload.version>1.2.2</apache.common.fileupload.version>
    <jodatime.version>2.1</jodatime.version>
</properties> 
```

PS 2\. 对不起我的英语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:59:37.443

您可以将“body”字符串设置为表单上的隐藏字段，并将其作为另一个 @RequestParam 发布，而不是将其作为单独的 @RequestBody 参数。所以你的表格看起来像这样：

```
<form id="myForm" method="post" enctype="multipart/form-data">
    <input type="hidden" name="body" value="bodyValue"/>
    <input type="file" name="file"/>
    ... 
```

控制器看起来像这样：

```
public void upload(@RequestParam String body, @RequestParam List<MultipartFile> file, Principal principal, HttpServletRequest request)
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:38:25.870

我开始从不同的角度考虑我的问题，发现**客户端**可能无法同时上传文件和发送数据`@RequestBody`。

所以，我开始用 WireShark 捕捉请求。结果如我所料。数据丢失。请求中唯一剩下的是文件。

参考：[将文件和相关数据发布到 RESTful WebService 最好是 JSON](https://stackoverflow.com/questions/4083702/posting-a-file-and-data-to-restful-webservice-as-json)

解决方案可能是重新构建我的 Web 服务服务器的方法。

谢谢。

# asp.net - ASP.NET 4.5 不会从 Windows 8 卸载

> ID：15502057
> 
> 赞同：0
> 
> 时间：2013-03-19T14:21:16.903
> 
> 标签：asp.net, windows, windows-8, asp.net-4.5, iis-8

最近我的开发环境遇到了兼容性问题，建议我在 Windows 8 笔记本电脑上卸载并重新安装 ASP.NET 4.5。

要在 Windows 8 上卸载，您必须使用“打开/关闭 Windows 功能”功能。

当我执行卸载时，一切似乎都很好，但是当我重新安装 .NET 4.5 时，我从安装程序中收到以下错误消息。

![在此处输入图像描述](../Images/6c92287a9058c0ad50f1928a9bff842e.png)

我不确定如何确保完全卸载 4.5 运行时。这是 Windows 8 的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:35:51.627

.Net 4.5 是 windows 8 操作系统的核心部分，无法删除。

您可以通过添加/删除 Windows 功能来删除 ASP.Net 4.5，它也可以在那里重新打开。

如果您的 Windows 8 安装中的 .Net 4.5 确实存在问题，您可能需要修复操作系统，但不太可能。

# actionscript-3 - Actionscript 手绘类不起作用

> ID：15502061
> 
> 赞同：2
> 
> 时间：2013-03-19T14:21:33.883
> 
> 标签：actionscript-3, drawing

我正在尝试编写一个简单的 as3 绘图类，但它不起作用。甚至事件都没有触发。可能是什么问题呢？

用法：

```
var drawingBoard:Drawing = new Drawing();
drawingBoard.x = 0;
drawingBoard.y = 0;
drawingBoard.width = 200;
drawingBoard.height = 100;

addChild(drawingBoard); 
```

班级：

```
package {
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Drawing extends Sprite {
        private var prevX:Number = 0;
        private var prevY:Number = 0;
        private var board:Shape = new Shape();

        public function Drawing() {
            trace("Drawing initialized.");

            addChild(board);

            addEventListener(MouseEvent.MOUSE_DOWN, startDrawing);
            addEventListener(MouseEvent.MOUSE_UP, stopDrawing);
            addEventListener(MouseEvent.MOUSE_OUT, stopDrawing);
        }

        private function startDrawing(event:MouseEvent):void {
            trace("Start drawing.");

            addEventListener(MouseEvent.MOUSE_MOVE,handleDrawing);
        }

        private function stopDrawing(event:MouseEvent):void {
            trace("Stop drawing.");

            prevX = 0;
            prevY = 0;
            removeEventListener(MouseEvent.MOUSE_MOVE,handleDrawing,false);
        }

        private function handleDrawing(event:MouseEvent):void {
            trace("Handling drawing.");

            if (prevX == 0 || prevY == 0) {
                prevX = event.localX;
                prevY = event.localY;
            } else {
                board.graphics.lineStyle(10, 0x000000, 1);
                board.graphics.moveTo(prevX, prevY);
                board.graphics.lineTo(event.localX, event.localY);
                prevX = event.localX;
                prevY = event.localY;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:25:50.297

首先，设置`width/height`一个空精灵的 不会做任何事情。如果你不想有一个尺寸为 200/100 的空精灵，你需要在其中绘制一些东西。

我修改了您的课程，以便在您将其添加到舞台后开始工作：

```
package {
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Drawing extends Sprite {
        private var prevX:Number = 0;
        private var prevY:Number = 0;
        private var board:Shape = new Shape();

        public function Drawing() {
            trace("Drawing initialized.");

            addChild(board);
            //clear board to white
            board.graphics.beginFill(0xffffff,1);
            board.graphics.drawRect(0,0,200,100);
            board.graphics.endFill();

            addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        }

        private function onAddedToStage(e:Event):void
        {
            removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);

            addEventListener(MouseEvent.MOUSE_DOWN, startDrawing);
            addEventListener(MouseEvent.MOUSE_UP, stopDrawing);
            addEventListener(MouseEvent.MOUSE_OUT, stopDrawing);
        }

        private function startDrawing(event:MouseEvent):void {
            trace("Start drawing.");

            addEventListener(MouseEvent.MOUSE_MOVE,handleDrawing);
        }

        private function stopDrawing(event:MouseEvent):void {
            trace("Stop drawing.");

            prevX = 0;
            prevY = 0;
            removeEventListener(MouseEvent.MOUSE_MOVE,handleDrawing,false);
        }

        private function handleDrawing(event:MouseEvent):void {
            trace("Handling drawing.");

            if (prevX == 0 || prevY == 0) {
                prevX = event.localX;
                prevY = event.localY;
            } else {
                board.graphics.lineStyle(10, 0x000000, 1);
                board.graphics.moveTo(prevX, prevY);
                board.graphics.lineTo(event.localX, event.localY);
                prevX = event.localX;
                prevY = event.localY;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:07:08.563

关于**Barış Uşaklı 先生**的回答，我修改了这个类，所以它是完全可用的。

此外，我修改了事件处理以提高性能，因为添加新的事件侦听器和删除它们真的很慢。

**初始化：**

```
var drawingBoard:Drawing = new Drawing(stage.stageWidth, stage.stageHeight);
addChild(drawingBoard); 
```

**清算：**

```
drawingBoard.clearDrawing(); 
```

**修改颜色和铅笔宽度：**

```
drawingBoard.drawingColor = 0x123456;
drawingBoard.drawindWidth = 16; 
```

**班级：**

```
package {
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class Drawing extends Sprite {
        private var prevX:Number = 0;
        private var prevY:Number = 0;
        private var board:Shape = new Shape();
        private var isDrawing:Boolean = false;

        public var drawingColor:uint = 0x6666aa;
        public var drawingWidth:int = 2;

        public function Drawing(width:int, height:int) {
            trace("Drawing initialized.");

            addChild(board);

            board.graphics.beginFill(0xffffff, 0); // I like transparent things
            board.graphics.drawRect(0, 0, width, height);
            board.graphics.endFill();

            addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        }

        private function onAddedToStage(event:Event):void {
            removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);

            addEventListener(MouseEvent.MOUSE_DOWN, startDrawing);
            addEventListener(MouseEvent.MOUSE_UP, stopDrawing);
            addEventListener(MouseEvent.MOUSE_OUT, stopDrawing);
            addEventListener(MouseEvent.MOUSE_MOVE, handleDrawing);
        }

        public function clearDrawing():void {
            board.graphics.clear();
        }

        private function startDrawing(event:MouseEvent):void {
            trace("Start drawing.");
            isDrawing = true;
        }

        private function stopDrawing(event:MouseEvent):void {
            trace("Stop drawing.");

            prevX = 0;
            prevY = 0;
            isDrawing = false;
        }

        private function handleDrawing(event:MouseEvent):void {
            if (isDrawing == true){
                trace("Handling drawing at " + event.localX + " x " + event.localY);

                if (prevX != 0 && prevY != 0) {
                    board.graphics.lineStyle(drawingWidth, drawingColor, 1);
                    board.graphics.moveTo(prevX, prevY);
                    board.graphics.lineTo(event.localX, event.localY);
                }

                prevX = event.localX;
                prevY = event.localY;
            }
        }
    }
} 
```

# web-services - 从 WSDL 文件创建 Web 服务（不是 Web 服务客户端）

> ID：15502065
> 
> 赞同：3
> 
> 时间：2013-03-19T14:21:41.930
> 
> 标签：web-services, wsdl, axis2, publish, wsdl2java

我有一个要求，根据该要求，我必须创建一个基于 wsdl 文件的 Axis2 Web 服务。我已经得到了 wsdl 文件。我之前一直在使用 wsdl2java 创建 Web 服务客户端，但我不知道如何使用给定的 wsdl 文件创建 Web 服务。有人可以帮助我给出正确的命令或要使用的选项。

另外，我需要在 WAS 6.1 和 JBoss 5.1.0 GA 上发布它，为此应该做些什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T08:27:21.770

我能够得到答案。在此更新以供其他人参考。

**从 WSDL 开始，创建和部署服务**

我们从 WSDL 开始，但是如果您没有 WSDL 并且需要从 java 类创建 WSDL，请使用 Java2WSDL 工具来创建 WSDL。您可能已经知道，服务的 WSDL 描述提供了该 Web 服务的精确定义。Axis2 可以处理 WSDL 并生成为您完成大部分工作的 java 代码。在服务器端，我们称它们为 Skeletons，在客户端，我们称它们为 Stubs。

这种使用 Axis2 编写 Web 服务的方法包括四个步骤：

1.  生成骨架代码。
2.  添加业务逻辑。
3.  为 Web 服务创建一个 *.aar 存档（Axis Archive）。
4.  部署 Web 服务。

**Step1：生成骨架代码**

要生成骨架和所需的类，您可以使用 Axis2 中提供的 WSDL2Java 工具。该工具位于发行版的 bin 目录中，可以使用提供的脚本（.bat 或 .sh）执行。该工具的参数列表可以在 Axis2 参考文档中找到。

我们示例中 wsdl2java 工具的参数如下。请注意，对于本示例，我们使用 xmlbeans 作为数据绑定框架，生成的代码将放置在“samples”目录中。

```
wsdl2java.sh -uri ../samples/wsdl/Axis2SampleDocLit.wsdl -ss -sd -d xmlbeans 
-o ../samples -p org.apache.axis2.userguide
```

这将在“sample/src”目录中生成所需的类，并在“samples/resources/schemaorg_apache_xmlbeans”目录中生成模式类。请注意，这些不是源文件，并且应该在类路径中可用，以便编译生成的类。

**第 2 步：实施业务逻辑**

现在您应该在骨架类中填充业务逻辑。您可以在“samples/src/org/apache/axis2/userguide”目录中生成的类中找到骨架类-Axis2SampleDocLitServiceSkeleton.java-。让我们将echoString(..)方法填充到骨架中，如下所示。我们的示例WSDL - "samples/wsdl" 目录下的Axis2SampleDocLit.wsdl 包含三个操作：echoString、echoStringArray、echoStruct。要查看其他操作填满后的外观，请参阅Axis2SampleDocLitService 服务的代码清单

```
public org.apache.axis2.userguide.xsd.EchoStringReturnDocument 
    echoString(org.apache.axis2.userguide.xsd.EchoStringParamDocument param4) throws Exception {
    //Use the factory to create the output document.
    org.apache.axis2.userguide.xsd.EchoStringReturnDocument retDoc = 
           org.apache.axis2.userguide.xsd.EchoStringReturnDocument.Factory.newInstance();
    //send the string back.
    retDoc.setEchoStringReturn(param4.getEchoStringParam());
   return retDoc; 
```

**第 3 步：创建存档文件**

必须将 Axis2 服务捆绑为服务存档。下一步是将类打包到 .aar（axis2 存档）中并将其部署在 Axis2 中。代码生成了一个ant文件；它将为您生成 Axis2 服务存档。但是，如果您不想使用 ant，可以通过以下步骤创建存档：

编译生成的代码。
将“resources/schemaorg_apache_xmlbeans”xmlbeans 类复制到您的类文件夹。
在生成的文件中，会有一个 services.xml 文件，它是 Axis2 服务的部署描述符。[详细了解它]。将 resources/service.xml 复制到 META-INF/services.xml
（要编写您自己的 service.xml 文件，请参阅使用 Axis2 的主要 API 编写 Web 服务中的小节）

使用类文件夹的内容创建存档。将目录更改为类文件夹并运行 jar -cf service-name.aar 以创建存档。

**第 4 步：部署 Web 服务**

只需将“.aar”文件放入 servlet 容器的“/webapps/axis2/WEB-INF”中的“services”目录即可部署该服务。我们建议使用 Apache Tomcat 作为 servlet 容器。请注意，只有在 Tomcat 分解了axis2.war 之后，services 目录才可用。但是，最简单的方法是在将axis2.war 复制到webapps 目录后启动Tomcat（如果您尚未启动它）。检查 Axis2 Web 应用程序主页上的“服务”链接（

```
`http://localhost:8080/axis2`
```

) 并查看 Axis2SampleDocLitService 是否显示在已部署的服务下。

我们建议使用展开配置在 WebLogic 和 WebSphere 应用服务器中部署 Axis2 WAR，以支持 Axis2 的热更新/热部署功能。有关详细信息，请参阅应用程序服务器特定配置指南。

注意：Axis2 提供了一种使用 Axis2 Web 应用程序管理模块中的“上传服务”工具部署 Web 服务的简单方法。（有关详细信息，请参阅 Web 管理指南）

完整文章请参见以下链接：http: [//axis.apache.org/axis2/java/core/docs/adv-userguide.html](http://axis.apache.org/axis2/java/core/docs/adv-userguide.html)

# asp.net - TraceSource：自定义 TraceListener 不起作用

> ID：15502068
> 
> 赞同：3
> 
> 时间：2013-03-19T14:21:47.090
> 
> 标签：asp.net, debugging, system.diagnostics, tracesource

我正在使用 TraceSource 来记录 ASP.Net 应用程序。要更改输出格式，我需要创建自己的 TraceListener 而不是 TextwriterListener。

```
 <trace>
        <listeners>
            <remove name="Default" />
             <add name="Default"
             type="WebTracing.CustomTraceListener, WebTracing" initializeData="Weblog.txt" traceOutputOptions="None"/>
        </listeners>
    </trace>

 public class CustomTraceListener : TextWriterTraceListener
 {
    public override void Write(string message)
    {
        if (NeedIndent)
        {
            WriteIndent();
        }
        message = //customize format
        base.Write(message); 
    }

    public override void WriteLine(string message)
    {
        if (NeedIndent)
        {
            WriteIndent();
        }
        message = //customize format
        base.WriteLine(message);
        NeedIndent = true;
    }
 } 
```

// 调用

```
 CustomTraceListener obj = new CustomTraceListener();
        obj.TraceEvent(null, "This is a critical message", TraceEventType.Critical, 0);
        (or)
         obj.Write( "This is a critical message");
        obj.Close(); 
```

没有错误。输出文件中没有打印数据。我是 ASP.Net 新手，谁能帮我解决这个问题。

**更新**

* * *

我尝试了另一种方式。但导致配置错误。

```
<trace autoflush="true" />
<sources>
  <source name="Trace" switchName="mySwitch" switchType="System.Diagnostics.SourceSwitch">    
      <listeners>
        <remove name="Default" />
        <add name="Default"
             type="WebTracing.CustomTraceListener, WebTracing" initializeData="Weblog.txt" traceOutputOptions="None"/>
      </listeners>      
  </source>
</sources>
<switches>
  <add name="mySwitch" value="All"/>
</switches>

        TraceSource obj = new TraceSource("Trace");
        obj.TraceEvent(TraceEventType.Critical,0,"This is a critical message");
        obj.Close(); 
```

**异常详细信息：System.Configuration.ConfigurationErrorsException：无法创建 WebTracing.CustomTraceListener、WebTracing。**

***注意：普通 TextWriterListener 工作正常。但我需要自定义侦听器来格式化输出字符串。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:35:13.773

我建议您将 public 修饰符添加到您的课程中

你可以使用

```
System.Diagnostics.Trace.Write method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:42:08.843

您不直接写入跟踪侦听器。在这种情况下，System.Diagnostic.Trace 对象写入跟踪侦听器。如果您使用的是 TraceSources，那么您将写入跟踪源和配置文件，让 TraceSource 知道哪些侦听器已注册以接收跟踪信息。

此外，您正在写入通常具有刷新间隔的文件，因此您可能希望确保它是自动刷新的，或者在您的测试中，写入足够的数据以触发刷新（当数据写入文件时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-05T23:20:32.757

只需将您的相对路径更改`initializeData="Weblog.txt"`为 absolute `initializeData="d:\Weblog.txt"`。我仍在尝试检测自定义列表器日志文件的创建对我们不起作用的根本原因。

我猜这可能是因为未配置项目文件夹权限：[SO link](https://stackoverflow.com/a/14512241/1145224)。

* * *

我今天重现了同样的问题，我看到您的应用程序配置正确。我花了几个小时才明白，**正确的配置并不是使用 custom-listeners 创建日志文件的充分条件**。

当我执行**TextWriterTraceListener**时，会在项目文件夹中创建日志。但是**CustomTextWriterTraceListener**不会创建任何东西。

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-19T09:42:29.323

配置和实现之间存在不匹配。

如果您将记录器配置为

```
<listeners>
        <remove name="Default" />
         <add name="Default"
         type="WebTracing.CustomTraceListener, WebTracing" initializeData="Weblog.txt"/>
</listeners> 
```

您的自定义实现应该有一个匹配的公共构造函数：

```
public CustomTraceListener(string initializeData)
{
    //configure your listener using the initializeData value
} 
```

在其他情况下，将抛出 ConfigurationErrorsException。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-28T13:42:24.027

我遇到过这种情况，在标记后添加以下代码片段后`<source>`，它可以如上所述写入文本文件

```
<switches>
      <add name="mySwitch" value="Verbose" />
</switches> 
```

这是来自**Web.config**文件的部分片段

```
<system.diagnostics>
  <trace autoflush="true"/>
  <sources>
    <source name="myTraceSource" switchName="mySwitch" switchType="System.Diagnostics.SourceSwitch" >
      <listeners>
        <clear/>
        <add name="textwriterListener" type="System.Diagnostics.TextWriterTraceListener"
          initializeData="d:\outfile1.txt" traceOutputOptions="ProcessId, DateTime, Callstack" />
      </listeners>
    </source>
  </sources>
  <switches>
    <add name="mySwitch" value="Verbose" />
  </switches>
</system.diagnostics> 
```

此外，我在`TraceSource`通过创建静态对象定义的某些方法中调用

```
static TraceSource ts = new TraceSource("myTraceSource");
...

ts.TraceEvent(TraceEventType.Critical,0,"This is a critical message"); 
```

# c# - Excel 条件设置

> ID：15502079
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:22:13.550
> 
> 标签：c#, excel

我正在尝试设置一些条件设置值，但似乎它们没有采用。当我查看 excel 文档时，它们是默认的。
绿色 = 0.2
黄色 = 0.1

它们显示为
绿色 0.8
黄色 0.6

```
private static void setIcon(Excel.Worksheet excelWorksheet, string cell)
{
    try
    {
        Excel.IconSetCondition cfIconSet = (Excel.IconSetCondition)excelWorksheet.Range[cell, cell].FormatConditions.AddIconSetCondition();
        cfIconSet.IconCriteria[1].Icon = Excel.XlIcon.xlIconRedTrafficLight;

        cfIconSet.IconCriteria[2].Type = Excel.XlConditionValueTypes.xlConditionValueNumber;
        cfIconSet.IconCriteria[2].Icon = Excel.XlIcon.xlIconYellowTrafficLight;
        cfIconSet.IconCriteria[2].Value = Convert.ToDouble(yellow);
        cfIconSet.IconCriteria[2].Operator = (int)(Excel.XlFormatConditionOperator.xlGreaterEqual);

        cfIconSet.IconCriteria[3].Type = Excel.XlConditionValueTypes.xlConditionValueNumber;
        cfIconSet.IconCriteria[3].Value = Convert.ToDouble(green);
        cfIconSet.IconCriteria[3].Icon = Excel.XlIcon.xlIconGreenTrafficLight;
        cfIconSet.IconCriteria[3].Operator = (int)(Excel.XlFormatConditionOperator.xlGreaterEqual);
    }
    catch (Exception ex)
    {
        throw new ArgumentException(ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:14:28.283

我使用了以下有效的方法。

```
var c = (Excel.IconSetCondition)excelWorksheet.get_Range(cell).FormatConditions.AddIconSetCondition();
c.SetFirstPriority();
c.ShowIconOnly = false;
c.IconSet = book.IconSets[Excel.XlIconSet.xl3TrafficLights2];
var yellowIcon = c.IconCriteria[2];
yellowIcon.Type = Excel.XlConditionValueTypes.xlConditionValueNumber;
yellowIcon.Value = Convert.ToDouble(yellow);
yellowIcon.Operator = (int)Excel.XlFormatConditionOperator.xlGreaterEqual;

var greenIcon = c.IconCriteria[3];
greenIcon.Type = Excel.XlConditionValueTypes.xlConditionValueNumber;
greenIcon.Value = Convert.ToDouble(green);
greenIcon.Operator = (int)Excel.XlFormatConditionOperator.xlGreaterEqual; 
```

# c - 在字符的一部分中使用 strstr 搜索字符串 *

> ID：15502083
> 
> 赞同：0
> 
> 时间：2013-03-19T14:22:26.527
> 
> 标签：c, strstr

目前我搜索一个`char *`with`strstr`但我不想搜索完整的一个，只从 42\. char 到最后。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:24:13.203

只需提供`strstr()`指向要包含在搜索中的第一个字符的指针：

```
if(strstr(the_haystack + 42, "the needle") != NULL)
  printf("found needle at end of haystack!\n"); 
```

当然，这假设`the_haystack`确实至少有 42 个字符长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:26:01.227

将 42 添加到原始 str 指针（但请注意原始字符串长度大于 42）：

```
first_occurence = strstr(str + 42, substr); 
```

# java - Excel 表格的验证框架

> ID：15502085
> 
> 赞同：0
> 
> 时间：2013-03-19T14:22:33.953
> 
> 标签：java, regex, excel, apache-poi

我有一个 excel 文档，用户使用它根据模板输入数据并上传回来。现在我在工作簿中有很多工作表，每张工作表都有许多具有不同验证的单元格。

```
Validations like:
1\. The cell data should be only numeric
2\. The cell data should be in a specific format xxx-xxx
3\. The cell data should be a date in yyyy-mm-dd format 
```

ETC...

他们有一个可以完成这项工作的框架吗？就像我只需要配置单元格中允许的数据（使用正则表达式等），框架将负责验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:30:11.573

有一些框架可以从 Java 访问 Excel 文件。像[Apache POI](http://poi.apache.org/)。但我不知道有一个框架可以满足你的描述。

也许最好将此验证添加到 excel 文件中，以便用户无法输入无效数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-26T01:16:19.977

在服务器中验证 excel 文件上传时存在几个问题。尽管可以使用 if else 条件来完成，例如：

1.  单元格数据只能是数字

```
if (cell.getCellType() != CellType.NUMERIC) {
  // throw exception or print print help message
} 
```

2.  单元格数据应为 yyyy-mm-dd 格式的日期

```
if (!DateUtil.isCellDateFormatted(cell)) {
  // throw exception or print print help message
} 
```

但是，验证 Date 类型的单元格和应用正则表达式是很棘手的。

# vb.net - VB 简单的 If 语句 (h/w)

> ID：15502086
> 
> 赞同：0
> 
> 时间：2013-03-19T14:22:38.830
> 
> 标签：vb.net, if-statement

我不处理VB。我正在帮我妈妈做作业，我不能再想清楚该怎么处理这个陈述了。

```
Private Sub btnTotal_Click(sender As Object, e As EventArgs) Handles btnTotal.Click
    Dim intPackA As Integer = 0
    Dim intPackB As Integer = 0
    Dim intPackC As Integer = 0
    Dim SavingsPriceB As Decimal = 0.0
    Dim SavingsPriceC As Decimal = 0.0
    Dim TotalPrice As Decimal = 0.0
    lblTotal.Text = String.Empty

If radPackA.Checked Then
    TotalPrice = 9.95
    lblTotal.Text = TotalPrice
    If Integer.TryParse(txtHours.Text, intPackA) Then
        If intPackA > 10 Then
            TotalPrice = TotalPrice + ((intPackA - 10) * 2)
            lblTotal.Text = TotalPrice
        End If
    End If
    If chkSavings.Checked Then
        SavingsPriceB = 14.95 + ((intPackB - 20) * 1)
        SavingsPriceC = 19.95
        If TotalPrice < SavingsPriceB And TotalPrice < SavingsPriceC Then
            lblTotal.Text = TotalPrice & ", no savings with Package B or C"
        End If
    End If
ElseIf radPackB.Checked Then
    TotalPrice = 14.95
    lblTotal.Text = TotalPrice
    If Integer.TryParse(txtHours.Text, intPackB) Then
        If intPackB > 20 Then
            TotalPrice = TotalPrice + ((intPackB - 20) * 1)
            lblTotal.Text = TotalPrice
        End If
    End If
    If chkSavings.Checked Then

    End If
ElseIf radPackC.Checked Then
    TotalPrice = 19.95
    lblTotal.Text = TotalPrice
End If

If chkNonprofit.Checked Then
    TotalPrice = Format((TotalPrice - ((TotalPrice / 100) * 20)), ".00")
    lblTotal.Text = TotalPrice & ControlChars.CrLf & "Non-Profit Organization discount applied"
End If
End Sub 
```

这是`If chkSavings.Checked`给我的问题。

这是设计的程序。包裹下方有一个标签，显示总数。 ![在此处输入图像描述](../Images/acb268758b0d2a201bb044f6442c1834.png)

`Potential Savings`选中后，它还应该显示如果您使用不同的包裹可以节省的金额。

所以如果我把`Package A, 5 hours, 20% discount`它应该说`$7.96, no savings with Package B or C`。因为`Package A, 25 hours`它应该说`$39.95, save $20.00 with Package B, and save $20.00 with Package C`

我拥有的代码即使是第一部分也没有打印出来。

`Package A and less then 10 hours = $9.95, every additional hour is $2.00 more` `Package B and less then 20 hours = $14.95, every additional hour is $1.00 more` `Package C with unlimited hours is = $19.95`

所以我的问题是，我在我的代码中做错了什么，或者我怎样才能实现我正在寻找的东西。

# wpf - 带有下一个和上一个按钮的面板

> ID：15502091
> 
> 赞同：0
> 
> 时间：2013-03-19T14:22:49.437
> 
> 标签：wpf, user-controls, autosize, panels

您好 ppl 想知道我们是否可以在 WPF 中做这样的面板。

![http://i.stack.imgur.com/rcSWG.png](../Images/9413a702d5ebbb442ac2b6a72385490d.png)

我为用户控件发送了一个列表项，然后控件显示了可能的项目，如果更多，它会显示下一个和上一个按钮。在 Windows 窗体中，我有。现在wpf里那个复杂。即使知道正在呈现多少，我也无法将项目显示为监视器大小的用户，他放置了她的项目，然后无法进行分页。你能帮助我吗？

肿块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:27:42.343

您可以在网格中有一个水平并使用两个按钮`StackPanel`滚动。`StackPanel`

# jquery - jquery排序表

> ID：15502092
> 
> 赞同：1
> 
> 时间：2013-03-19T14:23:00.367
> 
> 标签：jquery

我有这张桌子

```
<table>
    <th>
        Food Name
    </th>
    <th>
        Restaurant Name
    </th>
    <?php
    if ($isCustomer == "1") {
        ?>
        <th>

        </th><?php
}
    ?>
    <?php while ($row = $allFoods->fetch()) { ?>
        <tr>
            <td>
                <?php echo $row['foodName']; ?>
            </td>
            <td>
                <?php echo $row['restaurantName']; ?>
            </td>
            <?php
            if ($isCustomer == "1") {
                ?>
                <td class="favoriteRow">
                    <a class="link" href="<?php echo URL . 'customer/addFavoriteFood/' . $row['foodID'] ?>">  Add Favorite</a>
                </td>
                <?php
            }
            ?>
        </tr>
    <?php } ?>
</table> 
```

我尝试对它进行了很多排序，但我不能，似乎我必须用已经排序的项目重新加载页面，但我需要使用 jquery 对其进行排序，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T06:38:11.303

我使用[jquery tablesorter](http://tablesorter.com/docs/)取得了成功，这是对 html 表进行排序的非常简单的方法。

代码示例如下，

html:

```
<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>Last Name</th> 
    <th>First Name</th> 
    <th>Email</th> 
    <th>Due</th> 
    <th>Web Site</th> 
</tr> 
</thead> 
<tbody> 
<tr> 
    <td>Smith</td> 
    <td>John</td> 
    <td>jsmith@gmail.com</td> 
    <td>$50.00</td> 
    <td>http://www.jsmith.com</td> 
</tr> 
<tr> 
    <td>Bach</td> 
    <td>Frank</td> 
    <td>fbach@yahoo.com</td> 
    <td>$50.00</td> 
    <td>http://www.frank.com</td> 
</tr> 
<tr> 
    <td>Doe</td> 
    <td>Jason</td> 
    <td>jdoe@hotmail.com</td> 
    <td>$100.00</td> 
    <td>http://www.jdoe.com</td> 
</tr> 
<tr> 
    <td>Conway</td> 
    <td>Tim</td> 
    <td>tconway@earthlink.net</td> 
    <td>$50.00</td> 
    <td>http://www.timconway.com</td> 
</tr> 
</tbody> 
</table> 
```

jQuery：

```
$(document).ready(function() 
    { 
        $("#myTable").tablesorter(); 
    } 
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:34:48.200

你也可以在[https://github.com/ozzyogkush/jquery.sortableTable](https://github.com/ozzyogkush/jquery.sortableTable)使用我的 sortableTable 插件。它非常易于使用，并且非常可扩展。

# c# - Dataadaptor 不返回任何值，也不返回异常

> ID：15502093
> 
> 赞同：2
> 
> 时间：2013-03-19T14:22:54.107
> 
> 标签：c#, sqldataadapter

我从早上开始就被困住了，有人可以帮我吗？我有一个不返回任何值的 sql 数据适配器。在顶部的同一页面中，我有一个工作正常的 SQldataadaptor。我不知道该怎么办 。查询在服务器中运行良好。我正在使用 vs10 和 sqlserver 2008 ..

我还尝试通过删除它仍然无法正常工作的参数'。我的行数总是为零

这是我的代码

```
 doc = dr["DrName"].ToString();
           sql1 = "select w.Day, w.Start,[End] from WeeklyScheduleDays w where w.Start is not null and w.Day = @day1 and  WeeklyScheduleID = (select WeeklyScheduleID from DoctorsBusinessHours db inner join drmast m  on m.DoctorId = db.DcotorID where m.DrName = '@drname2') order by Start ";

           SqlCommand m1 = new SqlCommand(sql1,myConnection);
           m1.Parameters.AddWithValue("@day1", i);
            m1.Parameters.AddWithValue("@drname2", doc);

             SqlDataAdapter ad = new SqlDataAdapter(m1);
            DataTable t1 = new DataTable();
             ad.Fill(t1);

           rowcount = t1.Rows.Count; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:27:13.817

替换`where m.DrName = '@drname2'`为`where m.DrName = @drname2`

# c++ - HANDLE 代替 CWnd*？(MFC)

> ID：15502097
> 
> 赞同：0
> 
> 时间：2013-03-19T14:23:22.610
> 
> 标签：c++, visual-studio-2010, mfc, type-conversion, handle

我在 MFC 程序中有一段代码，如下所示：

```
 HANDLE newhandle = m_hWnd;    //A

    //draw the bitmap image on the window        
    BITMAP* bi = new BITMAP;
    CBitmap bmp;
    bmp.Attach(transferbitmap);
    CClientDC dc(newhandle);      //B
    //...
    //...
    //... 
```

在“A”行，我创建了一个名为 newhandle 的 HANDLE，并将其设置为**m_hWnd**，**它的类型为 CWnd***。仅此行就可以很好地编译（使用 Visual Studio 2010）并且似乎可以正常工作。但是，查看“B”行，当我尝试使用 newhandle 代替 m_hWnd 时，出现编译错误：

> 错误 C2664：“CClientDC::CClientDC(CWnd*)”：无法将参数 1 从“HANDLE”转换为“CWnd*”

当我使用 m_hWnd 代替 newhandle 时，程序编译并运行良好。

我的问题是，为什么编译器让我将 newhandle 设置为 CWnd*，但是当我尝试使用它时会发生错误？此外，有没有办法使用非 MFC 窗口句柄来替换 m_hWnd，因为我试图从我的代码的较低级别删除所有 MFC 特定代码？

# c# - 在用户之间共享数据 - 无需数据库表

> ID：15502103
> 
> 赞同：0
> 
> 时间：2013-03-19T14:23:35.713
> 
> 标签：c#, asp.net

我有一个 ASP.NET (4.0) webforms 应用程序，我想知道在我的 web 应用程序中的用户之间共享数据时我有哪些选择。

最明显的解决方案是数据库表。但是还有其他选择吗？我已经阅读了有关“应用程序范围”的内容，但我不确定它是否对这种情况有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:24:44.440

应用程序就是您要搜索的内容。

```
if (Application["CurrentUsers"] == null)
    Application["CurrentUsers"] = 0;
Application["CurrentUsers"] += 1; 
```

只是当前在线计数器的一个示例。

要对生命周期做出反应，请参阅`global.asax`：

```
protected void Application_Start(object sender, EventArgs e)
{
    Application["CurrentUsers"] = 0;
}
protected void Application_End(object sender, EventArgs e)
{
    Application["CurrentUsers"] = null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:26:35.730

应用程序对象或将其存储在内存数据库中

# c# - 在数据网格中显示数据

> ID：15502105
> 
> 赞同：0
> 
> 时间：2013-03-19T14:23:41.840
> 
> 标签：c#, xml, datagrid, dataset

我正在尝试在数据网格中显示这些 xml 字符串。我对数据集了解不多，但它似乎并没有保留之前输入的数据。这是我的代码。

C＃：

```
 while (reader.Read())
            {

                for (int i = 0; i < reader.FieldCount; i++)
                {
                    string rdr = reader[i].ToString();

                    dataList.Add(rdr);

                    string column = reader.GetName(i);
                    const string xmlAttributeFormat = "{0} = \"{1}\" ";
                    xmlString = xmlString + String.Format(xmlAttributeFormat, column, dataList[i]);

                }

                string FinalXMLString = "<row " + xmlString + " />";
                StringReader streamreader = new System.IO.StringReader(FinalXMLString);
                XmlTextReader xmlreader = new System.Xml.XmlTextReader(streamreader);
                dataSet = new System.Data.DataSet();
                dataSet.ReadXml(xmlreader);
                xmlString = "";
                dataList.Clear();
                FinalXMLString = "";

            } 
```

我有一个遍历查询的 while 循环，然后是一个 for 循环将值放入列表中。这是完美的工作。然后将数据放入数据集，然后绑定到数据网格。唯一的问题是它只显示从查询中读取的最后一行的数据。如何让它显示数据网格中查询的所有行？任何帮助，将不胜感激。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:27:02.637

```
 while (reader.Read())
            {

                for (int i = 0; i < reader.FieldCount; i++)
                {
                    string rdr = reader[i].ToString();

                    dataList.Add(rdr);

                    string column = reader.GetName(i);
                  }

           }

Display_Grid(myGrid,dataList)

public static void Display_Grid(DataGrid d, List<string> S1)
            {
                ds = new DataSet();
                DataTable dt = new DataTable();
                ds.Tables.Add(dt);

                DataColumn cl = new DataColumn(column, typeof(string));
                cl.MaxLength = 200;
                dt.Columns.Add(cl);

                int i = 0;
                foreach (string s in S1)
                {
                    DataRow rw = dt.NewRow();

                    rw["Description"] = S1[i];

                    i++;
                }

                d.ItemsSource = ds.Tables[0].AsDataView();
            } 
```

您将数据网格 (d) 的名称和字符串列表 (s1) 作为参数传递在代码中，您定义了要显示的列标题的名称（我已经写了描述）。

在您的情况下，S1=datalist。如果 datalist 包含例如 3 个元素，则该方法将遍历这些元素并生成 3 行...

# c# - 在 Windows Phone 中启动应用程序时不显示 Toast

> ID：15502108
> 
> 赞同：3
> 
> 时间：2013-03-19T14:23:54.980
> 
> 标签：c#, windows-phone-8

我正在开发一个 Windows Phone 8 应用程序，并且我已经实现了一个后台代理，它可以完成一些工作并更新我的应用程序的 Tile 并向用户显示 toast 通知。

它可以工作，除非我启动应用程序（更具体地说，当控制在`Application_Launching`事件中时），在这种情况下，Toast 通知不会显示，但 Tile 仍然会更新。有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:14:26.123

如果当前前台应用程序是 Show 方法的调用者，则不会显示 toast。Toast 通知仅显示在正在运行的后台代理或某些工作已完成。

# sql - 使用 substr 时出现 to_date 错误

> ID：15502109
> 
> 赞同：1
> 
> 时间：2013-03-19T14:23:57.560
> 
> 标签：sql, database, oracle

当我运行时：

```
select to_date('substr(21120319,3)','YYMMDD') 
from dual 
```

我收到错误：

> 日期不在有效范围 -4719 和 +9999 内。

但如果这样做：

```
select to_date('120319','YYMMDD') 
from dual 
```

我的查询运行良好，并给出了 19-MAR-12 的输出。

这个错误的原因是什么。请帮助我理解这一点。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:27:57.780

您必须从字符串文字中删除 substr 。

```
select to_date(substr('21120319', 3),'YYMMDD') 
from dual ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:29:18.543

```
select to_date('substr(21120319,3)','YYMMDD')  from dual ; 
```

现在`substr(21120319,3)`也是字符串的一部分

将其更改为

```
 select to_date(substr('21120319',3),'YYMMDD')  from dual ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:30:39.570

你可能需要

```
select to_date('21120319','YYYYMMDD') 
from dual 
```

不需要 substr，它会返回错误的世纪，21120319 应该返回 2112 年 3 月 19 日而不是 2012 年 3 月 19 日。

# clojure - 编写测试以检查响铃响应返回的文件

> ID：15502119
> 
> 赞同：2
> 
> 时间：2013-03-19T14:24:14.307
> 
> 标签：clojure

我有一个返回文件的组合路由。我想测试 -

1) 如果返回文件。2) 返回的特定文件。

当我跑步时，`(app (ring.mock/request :get "/myroute"))`我得到

`{:body #<File resources/public/templates/index.html>, :headers {"Content-Length" "2349", "Last-Modified" "Sat, 16 Mar 2013 11:01:03 GMT"}, :status 200}`

如何检查正文中的返回值是否属于文件类型？并且变得更加雄心勃勃，我可以检查它是位于 'resources/public/templates/index.html' 的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:10:26.023

环请求只是映射，因此您可以使用 :body 关键字提取正文，然后检查它的类型`type`

```
(type (:body (app (ring.mock/request :get "/myroute")))) 
```

（也许我不理解这个问题？）

# javascript - 打开页面，为什么不能隐藏内容？

> ID：15502121
> 
> 赞同：1
> 
> 时间：2013-03-19T14:24:17.137
> 
> 标签：javascript, prototypejs

我已将**原型**库添加到我的站点，然后添加以下代码。当我打开页面时，我希望隐藏 ul 中的所有内容。

```
 Event.observe(window, 'load', function() {
   $$('.block-category li.parent ul').hide() //why this line doesn't work
    $$('.block-category li.parent > a span').each(function (element) {
        element.observe('click', function (e) {
            e.element().up().next('ul').toggle();
            e.preventDefault();
        });
    });
}); 
```

html:

```
 <div class="block block-category">
    <li class="level-top  parent">
    <a href="example.com/...."><span>text one</span></a>
    <ul> //the 1 ul
    <li><a><span>....</span></a></li>
    <li><a><span>....</span></a></li>
    <li><a><span>....</span></a></li>
    <li><a><span>....</span></a></li>
    </ul>
    </li>

    <li class="level-top"><a href="..."><span>....</span></a></li>

  <li class="level-top  parent">
    <a href="example.com/...."><span>text two</span></a>
    <ul> //the 2 ul
    <li><a><span>....</span></a></li>

    </ul>
    </li>
  <li class="level-top  parent">
    <a href="example.com/...."><span>text three</span></a>
    <ul>
    <li><a><span>....</span></a></li>
    <li><a><span>....</span></a></li>
    </ul>
    </li>
    </div> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:27:07.017

试试这个，隐藏的接缝不能直接应用于一组元素：

```
$$('.block-category li.parent ul').each(function(elm) {
   elm.hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:08:06.567

该`$$()`方法返回与该 CSS 选择器匹配的元素列表 - 如果您想遍历它们并运行相同的方法，请使用该`invoke()`方法

```
$$('.block-category li.parent ul').invoke('hide');
$$('.block-category li.parent ul').invoke('observe','click',function(){
     alert('element was clicked');
}); 
```

如果您需要做的不仅仅是运行单个方法，请使用该`each()`方法

```
$$('.block-category li.parent ul').each(function(item){
    item.hide();
    //item.update('new content');
    //etc
}); 
```

# android - 线程和媒体播放器问题，带声音的计时器

> ID：15502123
> 
> 赞同：0
> 
> 时间：2013-03-19T14:24:39.683
> 
> 标签：android, multithreading, audio, media-player, timertask

我正在开发一个基于计时器的 Android 应用程序，该计时器每秒必须播放您之前选择的声音。

这是问题所在：

*   没有对象可以`Media Player`在 a`Thread`或 a中运行`Runnable`
*   我不能调用重现声音的方法
*   我无法在计时器任务上运行它

你能想到什么吗？

谢谢

线：

public void run(){
while(!detenido) //停止线程的布尔值 {

```
 try {
            Servicio servicios = new Servicio();
            switch(segundosesperar){ //Int to select the ms to slep
            case 0:
                this.sleep(1500);
                servicios.intento1(); //the metod with " mp.start()"
                dormir = 1500;
                break;
            case 1:
                this.sleep(1600);
                servicios.intento1();
                dormir = 1600;
                break;
            case 2:
                this.sleep(1700);
                servicios.intento1();
                dormir = 1700;
                break;
            case 3:
                this.sleep(1800);
                servicios.intento1();
                dormir = 1800;
                break;
            case 4:
                this.sleep(1900);
                servicios.intento1();
                dormir = 1900;
                break;
            case 5:
                this.sleep(2000);
                servicios.intento1();
                dormir = 2000;
                break;
            default:
                this.sleep(1750);
                servicios.intento1();
                dormir = 1750;
                break;

            }

        } catch (InterruptedException e) {

            e.printStackTrace();
        }
         piedras =piedras+1; //Counter cronometer +1
         cron = piedras+""; 
         //Set the counter in the activity
            handler.setHcron(cron);
            handler.act();

            cronoparaganar = cron;

            if ( piedras == piedrasmodo){
                tocarsirena = true;
            }
          } 
            } 
```

在服务中启动播放声音的方法：

公共无效意图1（）{

```
 mp= MediaPlayer.create(this, R.raw.censura);
    mp.start();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:32:38.010

您可以运行一个`MediaPlayer`额外的`Service`.

查看[此](http://developer.android.com/reference/android/app/Service.html)信息以获取有关`Service`.
此外，[此链接](http://developer.android.com/guide/topics/media/mediaplayer.html#mpandservices)对于处理`MediaPlayer`带有`Service`.

然后，您可以调用您的函数`Service`来处理`MediaPlayer`.

# qnx - 如何在 qnx 中读取打印机的状态寄存器

> ID：15502124
> 
> 赞同：0
> 
> 时间：2013-03-19T14:24:39.390
> 
> 标签：qnx, parallel-port

我正在使用 x86 处理器。用于连接打印机的接口是一个usb并口ieee1284。

我可以将数据发送到打印机没问题。我已经使用以下命令对其进行了测试。

```
cat file.txt > /dev/usbpar0 
```

我在几个论坛上读到，没有 USB 并行端口的基地址。读取打印机状态的最简单方法是什么。我需要知道它是缺纸还是卡纸。这就是为什么我需要读取状态寄存器。

我已经包含了我试图从 [这里] [1] 复制的源代码

```
#include <iostream>
#include <iomanip>

#include <errno.h>   /* Error number definitions */
#include <termios.h> /* POSIX terminal control definitions */

#include "stdlib.h"
#include "unistd.h"
#include "sys/io.h"

#include <hw/inout.h>
#include <stdint.h>
#include <sys/mman.h>

#include <stdio.h>
#include <fcntl.h>      /* open() */
#include <sys/types.h>      /* open() */
#include <sys/stat.h>       /* open() */
#include <sys/ioctl.h>
#include "parport.h"
#include "ppdev.h"

#define DEVICE "/dev/usbpar0"

int write_data(int fd, unsigned char data);
int status_pins(int fd);

using namespace std;

int main(int argc, char **argv)
{
    struct ppdev_frob_struct frob;
    int fd;
    int mode;

    if((fd=open(DEVICE, O_RDWR)) < 0) {
        fprintf(stderr, "can not open %s\n", DEVICE);
        return 10;
    }

    ThreadCtl(_NTO_TCTL_IO, 0);
status_pins(fd);
    close(fd);

    return 0;
}

/* trivial example how to write data */
int write_data(int fd, unsigned char data)
{
    return(ioctl(fd, PPWDATA, &data));
}

/* example how to read 8 bit from the data lines */
int read_data(int fd)
{
    int mode, res;
    unsigned char data;

    mode = IEEE1284_MODE_ECP;
    res=ioctl(fd, PPSETMODE, &mode);    /* ready to read ? */
    mode=255;
    res=ioctl(fd, PPDATADIR, &mode);    /* switch output driver off */
    printf("ready to read data !\n");
    fflush(stdout);
    sleep(10);
    res=ioctl(fd, PPRDATA, &data);  /* now fetch the data! */
    printf("data=%02x\n", data);
    fflush(stdout);
    sleep(10);
    data=0;
    res=ioctl(fd, PPDATADIR, data);
    return 0;
}

/* example how to read the status lines. */
int status_pins(int fd)
{
    int val;

    ioctl(fd, PPRSTATUS, &val);
    val^=PARPORT_STATUS_BUSY; /* /BUSY needs to get inverted */

    printf("BUSY  = %s\n",
        ((val & PARPORT_STATUS_BUSY)==PARPORT_STATUS_BUSY)?"HI":"LO");
    printf("ERROR  = %s\n",
        ((val & PARPORT_STATUS_ERROR)==PARPORT_STATUS_ERROR)?"HI":"LO");
    printf("SELECT = %s\n",
        ((val & PARPORT_STATUS_SELECT)==PARPORT_STATUS_SELECT)?"HI":"LO");
    printf("PAPEROUT = %s\n",
        ((val & PARPORT_STATUS_PAPEROUT)==PARPORT_STATUS_PAPEROUT)?"HI":"LO");
    printf("ACK = %s\n",
        ((val & PARPORT_STATUS_ACK)==PARPORT_STATUS_ACK)?"HI":"LO");
    return 0;
}

/* example how to use frob ... toggle STROBE on and off without messing
   around the other lines */
int strobe_blink(int fd)
{
    struct ppdev_frob_struct frob;

    frob.mask = PARPORT_CONTROL_STROBE; /* change only this pin ! */
    while(1) {
        frob.val = PARPORT_CONTROL_STROBE;  /* set STROBE ... */
        ioctl(fd, PPFCONTROL, &frob);
        usleep(500);
        frob.val = 0;               /* and clear again */
        ioctl(fd, PPFCONTROL, &frob);
        usleep(500);
    }
} 
```

“parport.h”

```
 /* $Id: parport.h,v 1.1 1998/05/17 10:57:52 andrea Exp andrea $ */

    /*
     * Any part of this program may be used in documents licensed under
     * the GNU Free Documentation License, Version 1.1 or any later version
     * published by the Free Software Foundation.
     */

    #ifndef _PARPORT_H_
    #define _PARPORT_H_

    /* Start off with user-visible constants */

    /* Maximum of 16 ports per machine */
    #define PARPORT_MAX  16

    /* Magic numbers */
    #define PARPORT_IRQ_NONE  -1
    #define PARPORT_DMA_NONE  -1
    #define PARPORT_IRQ_AUTO  -2
    #define PARPORT_DMA_AUTO  -2
    #define PARPORT_DMA_NOFIFO -3
    #define PARPORT_DISABLE   -2
    #define PARPORT_IRQ_PROBEONLY -3
    #define PARPORT_IOHI_AUTO -1

    #define PARPORT_CONTROL_STROBE    0x1
    #define PARPORT_CONTROL_AUTOFD    0x2
    #define PARPORT_CONTROL_INIT      0x4
    #define PARPORT_CONTROL_SELECT    0x8

    #define PARPORT_STATUS_ERROR      0x8
    #define PARPORT_STATUS_SELECT     0x10
    #define PARPORT_STATUS_PAPEROUT   0x20
    #define PARPORT_STATUS_ACK        0x40
    #define PARPORT_STATUS_BUSY       0x80

    /* Type classes for Plug-and-Play probe.  */
    typedef enum {
        PARPORT_CLASS_LEGACY = 0,       /* Non-IEEE1284 device */
        PARPORT_CLASS_PRINTER,
        PARPORT_CLASS_MODEM,
        PARPORT_CLASS_NET,
        PARPORT_CLASS_HDC,              /* Hard disk controller */
        PARPORT_CLASS_PCMCIA,
        PARPORT_CLASS_MEDIA,            /* Multimedia device */
        PARPORT_CLASS_FDC,              /* Floppy disk controller */
        PARPORT_CLASS_PORTS,
        PARPORT_CLASS_SCANNER,
        PARPORT_CLASS_DIGCAM,
        PARPORT_CLASS_OTHER,            /* Anything else */
        PARPORT_CLASS_UNSPEC,           /* No CLS field in ID */
        PARPORT_CLASS_SCSIADAPTER
    } parport_device_class;

    /* The "modes" entry in parport is a bit field representing the
       capabilities of the hardware. */
    #define PARPORT_MODE_PCSPP  (1<<0) /* IBM PC registers available. */
    #define PARPORT_MODE_TRISTATE   (1<<1) /* Can tristate. */
    #define PARPORT_MODE_EPP    (1<<2) /* Hardware EPP. */
    #define PARPORT_MODE_ECP    (1<<3) /* Hardware ECP. */
    #define PARPORT_MODE_COMPAT (1<<4) /* Hardware 'printer protocol'. */
    #define PARPORT_MODE_DMA    (1<<5) /* Hardware can DMA. */
    #define PARPORT_MODE_SAFEININT  (1<<6) /* SPP registers accessible in IRQ. */

    /* IEEE1284 modes:
       Nibble mode, byte mode, ECP, ECPRLE and EPP are their own
       'extensibility request' values.  Others are special.
       'Real' ECP modes must have the IEEE1284_MODE_ECP bit set.  */
    #define IEEE1284_MODE_NIBBLE             0
    #define IEEE1284_MODE_BYTE              (1<<0)
    #define IEEE1284_MODE_COMPAT            (1<<8)
    #define IEEE1284_MODE_BECP              (1<<9) /* Bounded ECP mode */
    #define IEEE1284_MODE_ECP               (1<<4)
    #define IEEE1284_MODE_ECPRLE            (IEEE1284_MODE_ECP | (1<<5))
    #define IEEE1284_MODE_ECPSWE            (1<<10) /* Software-emulated */
    #define IEEE1284_MODE_EPP               (1<<6)
    #define IEEE1284_MODE_EPPSL             (1<<11) /* EPP 1.7 */
    #define IEEE1284_MODE_EPPSWE            (1<<12) /* Software-emulated */
    #define IEEE1284_DEVICEID               (1<<2)  /* This is a flag */
    #define IEEE1284_EXT_LINK               (1<<14) /* This flag causes the
                             * extensibility link to
                             * be requested, using
                             * bits 0-6\. */

    /* For the benefit of parport_read/write, you can use these with
     * parport_negotiate to use address operations.  They have no effect
     * other than to make parport_read/write use address transfers. */
    #define IEEE1284_ADDR           (1<<13) /* This is a flag */
    #define IEEE1284_DATA            0  /* So is this */

    /* Flags for block transfer operations. */
    #define PARPORT_EPP_FAST        (1<<0) /* Unreliable counts. */
    #define PARPORT_W91284PIC       (1<<1) /* have a Warp9 w91284pic in the device */

    /* The rest is for the kernel only */
    #endif /* _PARPORT_H_ */ 
```

“ppdev.h”

```
/*
 * linux/include/linux/ppdev.h
 *
 * User-space parallel port device driver (header file).
 *
 * Copyright (C) 1998-9 Tim Waugh <tim@cyberelk.demon.co.uk>
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version
 * 2 of the License, or (at your option) any later version.
 *
 * Added PPGETTIME/PPSETTIME, Fred Barnes, 1999
 * Added PPGETMODES/PPGETMODE/PPGETPHASE, Fred Barnes <frmb2@ukc.ac.uk>, 03/01/2001
 */

#define PP_IOCTL    'p'

/* Set mode for read/write (e.g. IEEE1284_MODE_EPP) */
#define PPSETMODE   _IOW(PP_IOCTL, 0x80, int)

/* Read status */
#define PPRSTATUS   _IOR(PP_IOCTL, 0x81, unsigned char)
#define PPWSTATUS   OBSOLETE__IOW(PP_IOCTL, 0x82, unsigned char)

/* Read/write control */
#define PPRCONTROL  _IOR(PP_IOCTL, 0x83, unsigned char)
#define PPWCONTROL  _IOW(PP_IOCTL, 0x84, unsigned char)

struct ppdev_frob_struct {
    unsigned char mask;
    unsigned char val;
};
#define PPFCONTROL      _IOW(PP_IOCTL, 0x8e, struct ppdev_frob_struct)

/* Read/write data */
#define PPRDATA     _IOR(PP_IOCTL, 0x85, unsigned char)
#define PPWDATA     _IOW(PP_IOCTL, 0x86, unsigned char)

/* Read/write econtrol (not used) */
#define PPRECONTROL OBSOLETE__IOR(PP_IOCTL, 0x87, unsigned char)
#define PPWECONTROL OBSOLETE__IOW(PP_IOCTL, 0x88, unsigned char)

/* Read/write FIFO (not used) */
#define PPRFIFO     OBSOLETE__IOR(PP_IOCTL, 0x89, unsigned char)
#define PPWFIFO     OBSOLETE__IOW(PP_IOCTL, 0x8a, unsigned char)

/* Claim the port to start using it */
#define PPCLAIM     _IO(PP_IOCTL, 0x8b)

/* Release the port when you aren't using it */
#define PPRELEASE   _IO(PP_IOCTL, 0x8c)

/* Yield the port (release it if another driver is waiting,
 * then reclaim) */
#define PPYIELD     _IO(PP_IOCTL, 0x8d)

/* Register device exclusively (must be before PPCLAIM). */
#define PPEXCL      _IO(PP_IOCTL, 0x8f)

/* Data line direction: non-zero for input mode. */
#define PPDATADIR   _IOW(PP_IOCTL, 0x90, int)

/* Negotiate a particular IEEE 1284 mode. */
#define PPNEGOT     _IOW(PP_IOCTL, 0x91, int)

/* Set control lines when an interrupt occurs. */
#define PPWCTLONIRQ _IOW(PP_IOCTL, 0x92, unsigned char)

/* Clear (and return) interrupt count. */
#define PPCLRIRQ    _IOR(PP_IOCTL, 0x93, int)

/* Set the IEEE 1284 phase that we're in (e.g. IEEE1284_PH_FWD_IDLE) */
#define PPSETPHASE  _IOW(PP_IOCTL, 0x94, int)

/* Set and get port timeout (struct timeval's) */
#define PPGETTIME   _IOR(PP_IOCTL, 0x95, struct timeval)
#define PPSETTIME   _IOW(PP_IOCTL, 0x96, struct timeval)

/* Get available modes (what the hardware can do) */
#define PPGETMODES  _IOR(PP_IOCTL, 0x97, unsigned int)

/* Get the current mode and phaze */
#define PPGETMODE   _IOR(PP_IOCTL, 0x98, int)
#define PPGETPHASE  _IOR(PP_IOCTL, 0x99, int)

/* get/set flags */
#define PPGETFLAGS  _IOR(PP_IOCTL, 0x9a, int)
#define PPSETFLAGS  _IOW(PP_IOCTL, 0x9b, int)

/* flags visible to the world */
#define PP_FASTWRITE    (1<<2)
#define PP_FASTREAD (1<<3)
#define PP_W91284PIC    (1<<4)

/* only masks user-visible flags */
#define PP_FLAGMASK (PP_FASTWRITE | PP_FASTREAD | PP_W91284PIC) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:59:27.467

我设法通过使用 devctl 命令找到了解决问题的方法。我可以读取打印机的状态。

```
#include <iostream>
#include <iomanip>

#include <devctl.h>
#include <sys/dcmd_chr.h>

#include <errno.h>   /* Error number definitions */
#include <termios.h> /* POSIX terminal control definitions */

#include "stdlib.h"
#include "unistd.h"
#include "sys/io.h"

#include <hw/inout.h>
#include <stdint.h>
#include <sys/mman.h>

#include <stdio.h>
#include <fcntl.h>      /* open() */
#include <sys/types.h>      /* open() */
#include <sys/stat.h>       /* open() */
#include <sys/ioctl.h>
#include "parport.h"
#include "ppdev.h"

#define DEVICE "/dev/usbpar0"

int status_pins(int fd);

using namespace std;

int main(int argc, char **argv)
{
    int fd;

    if((fd=open(DEVICE, O_RDWR)) < 0) {
        fprintf(stderr, "can not open %s\n", DEVICE);
        return 10;
    }

    // ThreadCtl(_NTO_TCTL_IO, 0);

    int data = 0, error;

    if (error = devctl (fd, DCMD_CHR_LINESTATUS, &data,
                          sizeof(data), NULL))
      {
         fprintf(stderr, "Error setting RTS: %s\n",
             strerror ( error ));
         exit(EXIT_FAILURE);
      }

      if (data & _LINESTATUS_PAR_NOERROR)
      {
          printf("No Error Detected!\n");
      }
      else
      {
          printf("Error Detected\n");
      }

      if (data & _LINESTATUS_PAR_PAPEROUT)
      {
          printf("Paper Empty\n");
      }
      else
      {
          printf("Paper OK!\n");
      }

    close(fd);

    return 0;
} 
```

# sql - 将 SQL 表导出到 Excel - 不导出列名，仅导出数据

> ID：15502126
> 
> 赞同：2
> 
> 时间：2013-03-19T14:24:42.877
> 
> 标签：sql, vba

通过 Excel VBA 连接到 SQL Management Studio 后，我有以下代码（部分代码）从 SQL 表中提取数据。

```
With BalanceSheet
    ' Assign the Connection object.
    .ActiveConnection = cnPubs
    ' Extract the required records.
    .Open "select * from Analytics.dbo.BalSheetKeyLineItemsFinal"
    Sheet1.Range("A13").CopyFromRecordset BalanceSheet
    ' Tidy up
    .Close
End With 
```

但是，表中的列名不显示。有没有办法在我的数据导出到 Excel 时包含列名？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:41:50.293

记录集包含您查询的数据，因此这是您期望发生的。由于您使用`.Open`and `.ActiveConnection`，我假设您使用 ADO: 在这种情况下，您可以从记录集对象的`Fields`集合中获取字段名称：

```
For i = 0 to .Fields.Count - 1
  Sheet1.Range("A12").Offset(, i) = .Fields(i).Name
Next 
```

这将在您的`Sheet1`.

# xml - XML Schema：如何处理无序列表中的不同事件？

> ID：15502130
> 
> 赞同：0
> 
> 时间：2013-03-19T14:24:47.823
> 
> 标签：xml, xsd, xsd-validation

什么样的选择块（或类似的东西）与以下 XML 文档匹配：

**示例 1**

```
<root>
   <multiple1 />
   <multiple2 />
   <multiple2 />

   <single1 />

   <multiple1 />
   <multiple2 />

   <single2 />

   <multiple1 />
</root> 
```

**示例 2**

```
<root>
   <single1 />

   <multiple2 />
   <multiple1 />
</root> 
```

**示例 3**

```
<root>
   <multiple1 />
   <multiple1 />

   <single2 />

   <multiple1 />
   <multiple1 />
</root> 
```

**要求：**

*   元素`<single1>`和`<single2>`必须出现 0 或 1 次
*   元素的出现`<multiple1>`是`<multiple2>`无界的(>=0)
*   允许三个元素的任何顺序/顺序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:40:14.847

XSD 1.0 无法做到这一点。

# jquery - jQuery选择组中的单个复选框

> ID：15502135
> 
> 赞同：0
> 
> 时间：2013-03-19T14:25:07.260
> 
> 标签：jquery

我试图简单地在一组框中选择一个单独的复选框，但无法弄清楚。

这是动态创建我的复选框组的代码。我需要能够循环并选择用户之前检查过的各个框：

```
<?php
    //Display all "cheese" options in a checkbox group
    foreach($_SESSION['ingr_cheese'] as $key => $value)
    {
        echo "<div class=\"cheesebox\" style=\"float:left; width:175px; margin-bottom:7px;\">";
        echo "<input type=\"checkbox\" name=\"cheese1\" class=\"cheeseCheck\" value=\"".$key."\">&nbsp;<label for=\"cheese1\">".$value['cheese']."</label></br>";
        echo "</div>";
    }
?> 
```

一旦我弄清楚如何只检查一个，我就可以找出循环。这是我试图只选择索引值为“1”的复选框的 jQuery 代码：

```
$("#cheese1:checkbox:eq('1')").attr("selected", true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:29:07.050

您想使用选中的属性而不是选定的属性，并以这种方式选择复选框而不是使用`:checked`选择器。对于 jQuery 1.6 及更高版本，请执行以下操作：

```
$('div.cheesebox input[type=checkbox]').eq(1).prop('checked', true); 
```

对于 jQuery < 1.6，请执行以下操作：

```
$('div.cheesebox input[type=checkbox]').eq(1).attr('checked', 'checked'); 
```

# ios - 跨多个 ios 设备的持久访问令牌？

> ID：15502138
> 
> 赞同：2
> 
> 时间：2013-03-19T14:25:11.820
> 
> 标签：ios, facebook

当用户在多个 iOS 设备上使用 facebook 登录时，我需要能够获得相同的访问令牌。目前 [[Facebook activeSession]accessToken] 根据用户使用的设备返回不同的令牌。有没有办法返回相同的令牌，即每个应用每个用户 1 个令牌，而不是每个设备每个用户 1 个令牌？

非常感谢

朱尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:43:49.743

参考您对我的评论的回答，为什么不使用您获得的令牌来获取 facebook 用户 ID，并将其用作应用程序中的标识符。这样一来，您获得的令牌并不重要，因为它无论如何都属于同一个用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:30:19.693

假设您不希望用户在他们的 iOS 设备上多次登录，您必须使用 iCloud 同步这些访问令牌，因为 facebook 无法知道您是“同一个人”。

# java - 将嵌入式 sqlite-db 添加到 Netbeans 项目

> ID：15502142
> 
> 赞同：3
> 
> 时间：2013-03-19T14:25:17.400
> 
> 标签：java, sqlite, netbeans

我有以下问题让我忙了一段时间。
我正在 Netbeans 中构建一个 Java 项目，并且我有一个嵌入式 sqlite DB，我在这个项目中使用它。
目前，数据库位于 package 中`src/release/`。

我通过以下方式从代码中引用数据库：

`c = DriverManager.getConnection("jdbc:sqlite:src/release/db.db3");`

当我从 Netbeans 中运行该项目时，它可以正常工作。但是当我尝试构建它并运行创建的 jar 文件（在 dist 文件夹中）时。

我收到以下错误消息（翻译自荷兰语描述）：

> 打开连接失败：scr/release/db.db3:'C:\users\idxxxxx\Documents\\dist\src' 的路径不存在

在这样的代码中引用数据库时：
`c = driverManager.getConnection("jdbc:sqlite:db.db3");`
并将 db-file 添加到 output-dir 的根目录（因此不在 jar 本身中），应用程序部分工作，但我的应用程序中缺少一些 db-data（空组合框）。
所以好像也有问题。

我的问题是：

*   如何在 netbeans 中将嵌入式数据库（在这种情况下为 sqlite）添加到我的项目中，使其成为我项目的一部分？
*   我应该将 db 文件放在哪里以及如何从我的项目代码中引用它？

**我不希望最终用户在他将收到的文件中看到任何 db 文件**。
所以如果可能的话，我希望 db 文件成为 .jar 的一部分。

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:07:32.057

SQLite 需要单独的文件，即使不需要更新数据库。

需要确保锁定并确保数据库 ACID 属性。

[.jar 内部的 SQLite](https://stackoverflow.com/a/6499633/1322642)

*   SQLite 设计用于直接文件访问。
*   SQLite 可能需要在某些环境中不可用的额外权限。

SQLite 数据文件可以在开始时从 JAR 中提取到临时位置。

把数据库url直接写到程序里不是一个好选择。

`getConnection("jdbc:sqlite:src/release/db.db3");`

让您的应用程序查找该文件。如果没有找到：`error: File db.db3 not found`消息。然后知道用户，不是程序出错，而是缺少数据库文件。

由于您使用的是 java，因此很容易创建动态 url。
例如`"jdbc:sqlite:"+PathToApp +"/data/db.db3"`。
然后应用程序知道将提取的文件（jar 中的 db.db3）复制到哪里。

**从 .jar 中提取 SQlite**

*   你可以让java为你做。
*   利用`jdbc:sqlite::resource:`
*   您需要 sqlite-jdbc JAR，因此提取 JAR 文件并添加到应用程序 JAR。

DB 文件将被提取到一个临时文件夹`System.getProperty(“java.io.tmpdir”)`中。

例如

```
 [...]
 import org.sql.*;
 import org.sqlite.*; 
 [...]
 try {
    Class.forName("org.sqlite.JDBC");
    SQLiteConfig config = new SQLiteConfig();
    config.enableFullSync(true);
    config.setReadOnly(false);
    SQLiteDataSource ds = new SQLiteDataSource(config);
    ds.setUrl("jdbc:sqlite::resource:"+
              getClass().getResource("db.db3").toString());
    conn = ds.getConnection();
 }catch(SQLException se)
 {
  System.out.println("SQLError: "...");
 } 
```

十月更新 2014

[org.sqlite SQLiteConfig + SQLiteDataSource](https://code.google.com/p/xerial/source/browse/src/main/java/org/sqlite/?repo=sqlite)

[2014 年 10 月 8 日：sqlite-jdbc-3.8.6.jar 更新到 sqlite 3.8.6](https://bitbucket.org/xerial/sqlite-jdbc)

# php - PDO 更新错误未显示

> ID：15502145
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:25:23.673
> 
> 标签：php, mysql, pdo

我对 PDO 还很陌生。我有一个try and catch，当某些东西不存在时，即一个表，它会捕获并显示错误。

但是，我如何显示 sql 失败命令的错误消息/原因。

例如下面我试图将“启用”这个词插入一个很小的 ​​int 列 - 但是，只显示了一个空白屏幕 - 必须自己调试。如何显示 SQL 失败的错误消息？

```
$db = new PDO('mysql:host='.$dateBaseHost.';dbname='.$dateBaseName, $dateBaseUsername, $dateBasePassword);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// set/get variables
$id = (isset($_GET['id']) === true) ? $_GET['id'] : die("ID not set") ; // ? : shorthand if else
$action = (isset($_GET['action']) === true) ? $_GET['action'] : die("Action not set") ; // ? : shorthand  if else

// query
$query = $db->prepare(" UPDATE `telephoneCountries` SET `enabled`= :action  WHERE `id` = :id ");

// bind parameters - avoids SQL injection
$query->bindValue(':id', $id);
$query->bindValue(':action', $action);

// try... if not catch exception
try {
    // run the query
    $query->execute();
}
catch (PDOException $e){
    //sendErrorMail($e->getMessage(), $e->getFile(), $e->getLine());
    echo $e->getMessage();
    echo $e->getFile();
    echo $e->getLine();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T14:30:10.880

> 我试图将“启用”一词插入一个很小的 ​​int 列

对mysql来说还可以。将插入 0。

> 我如何显示 sql 失败命令的错误消息/原因。

对于真正的错误，您只需设置 PHP 即可显示它们

```
ini_set('display_errors',1); 
```

所以 - 你将能够看到每个未捕获的异常。

此外，如果您只想显示错误消息，但不处理错误本身，则根本不要使用 try..catch。PHP 已经完成了所有的工作。这才是重点。

大多数人确实将错误报告与错误处理混淆了。后者不应用于前者。处理错误*消息*时，您唯一的目标是让 PHP 引发它们，并设置正确的目的地：

*   在开发服务器上，必须在屏幕上显示错误消息
*   **在实时服务器上不应该显示它**，而是**记录下来**。

如果没有所有这些 try-catch 块，您将能够通过几个 ini 设置或单个错误处理函数（我在另一个答案中向您提到）来控制错误消息（包括非异常）。

仅当您要自己处理错误时才使用 try..catch - 例如，连接到另一台服务器。

因此，要更详细地回答您的问题：

1.  将 PDO 设置为异常模式。完成了。
2.  删除所有仅处理错误消息的 try..catch 块。
3.  使用上面的 ini 指令设置 PHP 以在开发服务器上显示错误。
4.  在实时服务器上，强烈建议记录错误而不是通过电子邮件发送。但是，如果您仍然想要这种方式 - 使用**单个**自定义异常处理程序函数来发送电子邮件，而不是数百个 try..catch 块

# mysql - MySQL 中地理距离查询的现代标准程序是什么？

> ID：15502146
> 
> 赞同：1
> 
> 时间：2013-03-19T14:25:24.587
> 
> 标签：mysql, geospatial

我在网上搜索了几天，终于承认失败了。我找不到任何比 2011 年年中更新的关于使用 mysql 进行地理空间距离查询的文章。我已经梳理了 mysql 文档，用谷歌搜索了几个小时，在这里完成了标签搜索和文本搜索……什么都没有。

所以问题是：我需要在 mysql 数据库上进行一个非常普通的基于半径的查询。我宁愿使用尽可能少的附加组件，但我会尽我所能。这是一个示例：

```
CREATE TABLE `test_locations` (
    `location_id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `locaiton_name` VARCHAR(32) NOT NULL,
    `latlng` POINT NOT NULL
);

SELECT `location_name`, X(`latlng`) as `lat`, Y(`latlng`) as `lng`
FROM `test_locations`
WHERE DISTANCE(PointFromText('POINT(41.78231 -88.712151)'), latlng) < 15; 
```

是的，这在一定程度上是伪代码，因为我还没有看到对（工作的）mysql 本机`DISTANCE()`函数的任何引用，但我无法想象在整整 2 年中没有对此做任何事情。我一定是瞎了眼……

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:47:36.157

我想更广泛的问题是，对于给定的技术问题，在其他人解决问题之前，一个人可以期望躲在山洞里多久？

虽然还没有和我们在一起，但现在还不需要休眠 - 尝试[使用空间点类型在 MySQL](https://stackoverflow.com/questions/4995428/storing-lat-lng-values-in-mysql-using-spatial-point-type)`DISTANCE`中存储 Lat Lng 值中的“更多后续”下的代码

具有讽刺意味的是，实际上存在的问题是“这将是面向未来的还是我将来需要对其进行更新”，而您的问题是“为什么最近没有人发布更新的代码？”

# php - 适用于 PHP 5.4.12 的 Win32Service 扩展

> ID：15502147
> 
> 赞同：1
> 
> 时间：2013-03-19T14:25:28.773
> 
> 标签：php, nginx

我目前正在运行 PHP 5.4.12，找不到兼容的 php_win32service.dll 下载。我看到的所有似乎都是针对 PHP 5.2/5.3 的？

尝试使用为这些版本制作的 dll 时，我收到以下错误消息：

PHP 警告：PHP 启动：无法加载动态库 'ext\php_win32service.dll' - 找不到指定的模块。

值得指出的是，我已将 dll 与其他扩展一起放在正确的位置！

请问有人可以给我任何关于从这里去哪里的建议吗？

提前致谢。乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-25T09:33:14.543

PHP 5.3、5.4 和 5.5 的版本可以在 [http://windows.php.net/downloads/pecl/releases/win32service/0.1.0/找到](http://windows.php.net/downloads/pecl/releases/win32service/0.1.0/)

这也是许多其他 Windows PHP 扩展的好来源：http: [//windows.php.net/downloads/pecl/releases/](http://windows.php.net/downloads/pecl/releases/)

带有其他扩展的 Windows 的完整 PHP 版本定期发布在 [http://www.apachelounge.com/viewforum.php?f=6](http://www.apachelounge.com/viewforum.php?f=6)

# xml - XSL 交叉引用

> ID：15502148
> 
> 赞同：5
> 
> 时间：2013-03-19T14:25:28.867
> 
> 标签：xml, xslt, cross-reference

我现在正在学习 XSL，并且有一个关于交叉引用的问题。我的目标 XML 文件的结构如下：

```
<XML>
    <Model>
        <packedElement typ="class" id="1"/>
        <packedElement typ="class" id="2"/>
        <packedElement typ="class" id="3"/>
    </Model>
    <Elements>
        <Element idref="1">
            <Attributes comment="comment 1."/>
        </Element>
        <Element idref="2">
            <Attributes comment="comment 2."/>
        </Element>
        <Element idref="3">
            <Attributes comment="comment 3."/>
        </Element>
    </Elements>
</XML> 
```

我想连接 id=idref。我的目标是列出所有打包元素并打印他们的评论。你们能帮帮我吗？

我试图用 key-funktion 解决它，但我不是很成功。

编辑：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
<xsl:output method="xml" encoding="UTF-8"/>

<xsl:key name="CommentK" match="Element" use="@idref"/>

<xsl:template match="XML">
<XML>
<xsl:apply-templates/>
</XML>
</xsl:template>

<xsl:template name="Start" match="packedElement">
<xsl:variable name="TEST" select="@id"/>
<xsl:variable name="Comment">
<xsl:call-template name="FindComment">
<xsl:with-param name="test2" select="@id"/>
</xsl:call-template>
</xsl:variable>
<content comment="{$Comment}" id ="{@id}" test="{$TEST}"></content>
</xsl:template>

<xsl:template name="FindComment">
<xsl:param name="test2"/>

<xsl:for-each select="key('CommentK', '$test2')">

<xsl:value-of select="Attributes/@comment"/>

</xsl:for-each>

</xsl:template>

</xsl:stylesheet> 
```

XSLT 版本是 2.0。（顺便说一句，有人可以告诉我 .XSLT 和 .XSL 之间的区别吗？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T14:56:56.023

尝试

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:key name="el-by-idref" match="Elements/Element" use="@idref"/>

<xsl:template match="XML">
  <xsl:copy>
    <xsl:apply-templates select="Model/packedElement"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Model/packedElement">
  <content comment="{key('el-by-idref', @id)/Attributes/@comment}" id="{@id}" test="{@id}"/>
</xsl:template>

</xsl:stylesheet> 
```

这样你得到

```
<XML>
   <content comment="comment 1." id="1" test="1"/>
   <content comment="comment 2." id="2" test="2"/>
   <content comment="comment 3." id="3" test="3"/>
</XML> 
```

# sql - 将两列 c1,c2 组合为表中的 c3

> ID：15502149
> 
> 赞同：0
> 
> 时间：2013-03-19T14:25:29.317
> 
> 标签：sql

```
c1  c2

10  30
20  40 
```

C1，C2 是两列，我希望使用 sql 查询得到如下所示的输出。

```
C3

10
20
30
40 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:26:08.907

使用`UNION`（隐式不同）或`UNION ALL`：

```
SELECT c1 AS c3 FROM tablename
UNION ALL
SELECT c2       FROM tablename 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:26:28.623

您可以使用`UNION`, 没有`ALL`关键字，查询的结果只是唯一值。如果要保留重复，请使用`UNION ALL`.

```
SELECT C1 as C3 FROM TABLENAME
UNION
SELECT C2 as C3 FROM TABLENAME 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T14:26:35.080

您将需要使用`UNION ALL`查询来获取结果：

```
select c1 as c3
from yourtable
union all
select c2 as c3
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/dcf17/1)

这种类型的查询会将数据从多列取消透视到多行*。*

根据您使用的数据库产品，有些产品具有`UNPIVOT`为您进行数据转换的功能。例如，如果您使用 SQL Server 或 Oracle，则可以使用：

```
select c3
from yourtable
unpivot
(
  c3 for col in (c1, c2)
) u
order by c3 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/dcf17/3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T14:27:07.937

这将保留按表排序

```
SELECT 1 AS ordering, c1 AS c3
FROM mytable
UNION
SELECT 2 AS ordering, c2 AS c3
FROM mytable
ORDER BY ordering, c3 
```

如果你不能忽略排序列，你可以把它变成一个子查询

```
SELECT c3
FROM (
    SELECT 1 AS ordering, c1 AS c3
    FROM mytable
    UNION
    SELECT 2 AS ordering, c2 AS c3
    FROM mytable) a
ORDER BY ordering, c3 
```

# java - PHP Post 数组为空

> ID：15502151
> 
> 赞同：0
> 
> 时间：2013-03-19T14:25:35.290
> 
> 标签：java, php

当前无法访问服务器端脚本的 $_POST 数组中的某些变量。

上下文：我正在使用 PHP 从 Android 设备向 mySQL 服务器提交一些值。当我“创建新路线”时，php 和 java 工作正常，例如：

构建要发布的变量列表：

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("startLat", startLat));
        params.add(new BasicNameValuePair("startLong", startLong));
        params.add(new BasicNameValuePair("endLat", endLat));
        params.add(new BasicNameValuePair("endLong", endLong));
        params.add(new BasicNameValuePair("waypoints", waypoints.toString()));
        params.add(new BasicNameValuePair("rating", rating));
        params.add(new BasicNameValuePair("difficulty", difficulty));
        params.add(new BasicNameValuePair("enjoyability", enjoyability));
        params.add(new BasicNameValuePair("count", count));
        params.add(new BasicNameValuePair("sum", sum));
        params.add(new BasicNameValuePair("countDiff", countDiff));
        params.add(new BasicNameValuePair("sumDiff", sumDiff));
        params.add(new BasicNameValuePair("countEnjoy", countEnjoy));
        params.add(new BasicNameValuePair("sumEnjoy", sumEnjoy)); 
```

然后我调用我的方法来发布它们：

```
 if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
            //System.out.println(httpPost.getURI().toString());
            //System.out.println(httpPost.getEntity().toString());
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent(); 
```

这可以正常工作，并且 $_POST 数组中的 PHP 脚本可以使用这些值。我遇到的问题是，当我使用以下方法执行完全相同的过程时（注意在这种情况下，我正在“更新路线”，因此变量较少，这反映在用于更新的 PHP 脚本中路线。：

```
 List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("name", name));
            params.add(new BasicNameValuePair("rating", Double.toString(currentRating)));
            params.add(new BasicNameValuePair("difficulty", Double.toString(currentDiff)));
            params.add(new BasicNameValuePair("enjoyability", Double.toString(currentEnjoy)));
            params.add(new BasicNameValuePair("count", Double.toString(currentCount)));
            params.add(new BasicNameValuePair("sum", Double.toString(currentSum)));
            params.add(new BasicNameValuePair("countDiff", Double.toString(currentDiffCount)));
            params.add(new BasicNameValuePair("sumDiff", Double.toString(currentDiffSum)));
            params.add(new BasicNameValuePair("countEnjoy", Double.toString(currentEnjoyCount)));
            params.add(new BasicNameValuePair("sumEnjoy", Double.toString(currentEnjoySum)));

            JSONObject jsonEdit = jsonParser.makeHttpRequest(url_edit,
                    "POST" +
                    "", params); 
```

$_POST 数组在 php 脚本服务器端为空。我意识到这可能有点模糊，但我希望你能理解。我正在为两种方法发送数据的过程完全相同，但是后者是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:29:31.897

你有旧的`==`vs`equals`问题，加上`String`实习。

这是罪魁祸首

```
if(method == "POST"){ 
```

应该

```
if(method.equals("POST")){ 
```

第一种方法适用于普通的 String 对象。与任何其他实例相比，任何`"POST"`实例都会导致 true `"POST"`（查找 String interning 以了解原因）。然而，在后一种情况下，你有一些有趣的东西：

```
JSONObject jsonEdit = jsonParser.makeHttpRequest(url_edit,
                "POST" + //Ooooops, what is this?
                "", params); 
```

现在你比较`"POST"`== `"POST"+""`... 这*不是*通过内容来比较它们，而是通过引用来比较它们！而第二个是不同的，`false`从比较中得出一个......

# c# - 从显示 gmail 地址的地址发送邮件 smtp gmail

> ID：15502155
> 
> 赞同：0
> 
> 时间：2013-03-19T14:25:53.907
> 
> 标签：c#, email, gmail, sendmail, document-body

在 C# 中，我有一种通过 gmail 帐户发送电子邮件的方法。当我在 Microsoft Outlook 中打开电子邮件时，发件人地址显示为 gmail 地址，而不是我在标题中使用的 strFromAddress。

```
SmtpClient smtp = new SmtpClient();
        smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
        smtp.UseDefaultCredentials = true;
        smtp.EnableSsl = true;
        smtp.Host = "smtp.gmail.com";
        smtp.Port = 587;
        smtp.Credentials = new NetworkCredential("***@gmail.com", "*****");

            var strFromAddress = "no-repl@demuynck-printing.be";
            var strToAddress = "sander@demuynck-media.be";
            var strSubject = "Album: '" + lbltitel.Text + "' bestelling";
            var strBody = "<html><head>";
            // new instance of MailMessage
            MailMessage mailMessage = new MailMessage();

            // Sender Address
            mailMessage.From = new MailAddress(strFromAddress);
            // mailMessage.Headers("Selexion Clix Demuynck <no-reply@demuynck-printing.be>");
           // mailMessage.Bcc.Add(new MailAddress("no-reply@demuynck-printing.be"));

            // Recepient Address
            mailMessage.To.Add(new MailAddress(strToAddress));
            mailMessage.Headers.Add("Reply-To", "info@demuynck-printing.be");
            // Subject 
            mailMessage.Subject = strSubject;

            // Body
            mailMessage.Body = strBody;

            // format of mail message
            mailMessage.IsBodyHtml = true;
            // new instance of Smtpclient

                smtp.Send(mailMessage); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:29:32.850

只需在 MailAddress 上设置 displayname 属性，如下所示：

```
MailAddress fromAddress = new MailAddress("user@domaina.com","no-reply@domainb.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:23:30.647

发生这种情况是因为 Google 违反了 SMTP 协议。这里有一篇关于它的详细文章：http: [//lee-phillips.org/gmailRewriting/](http://lee-phillips.org/gmailRewriting/)

史蒂夫的评论不正确；经过身份验证的发件人应该能够设置任何 From: 标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:30:53.093

GMail 会将“发件人”地址更改为用于登录 SMTP 服务器的帐户，除非验证“发件人”字段中使用的电子邮件地址属于同一所有者。因此，在您的 gmail 首选项中，只需添加并验证此特定地址即可。

# android - 我正在尝试构建自定义列表视图

> ID：15502159
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:26:02.100
> 
> 标签：android, android-layout, listview

我正在尝试构建自定义列表视图，其中每行包含以下项目：

*   可点击的图片
*   文本
*   可点击的图片

我尝试了很多在其他线程中发现的自定义适配器，但直到现在都没有成功。两个可点击的图像都将使用该行上的文本。

这是我的行布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id`enter code here`="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:orientation="horizontal" >

    <ImageButton
        android:id="@+id/imageButton3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="Minus"
        android:src="@drawable/minus" />

    <EditText
        android:id="@+id/item"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="12dp"
        android:layout_weight="1"
        android:clickable="false"
        android:ems="10"
        android:focusable="false"
        android:gravity="center_vertical|center_horizontal"
        android:inputType="text" >

</EditText>
    <ImageButton
        android:id="@+id/imageButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="Plus"
        android:src="@drawable/plus" />
</LinearLayout> 
```

这是我当前的自定义适配器：

```
package com.example.hrana.za.vkushti;

import java.util.List;

import android.content.ClipData.Item;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class ListAdapter extends ArrayAdapter<Item> {

public ListAdapter(Context context, int textViewResourceId) {
super(context, textViewResourceId);
// TODO Auto-generated constructor stub
}

private List<Item> items;

public ListAdapter(Context context, int resource, List<Item> items) {

super(context, resource, items);

this.items = items;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

View v = convertView;

if (v == null) {

    LayoutInflater vi;
    vi = LayoutInflater.from(getContext());
    v = vi.inflate(R.layout.shoppingcart_row, null);

}

Item p = items.get(position);

if (p != null) {

    TextView tt = (TextView) v.findViewById(R.id.item);

    if (tt != null) {
        tt.setText(p.getText());
    }
}

return v;

}
} 
```

这是我尝试在我的主课中调用它的方法：

```
List test = new ArrayList<String>();
    test.add("test1");
    test.add("test2");
    test.add("test3");

    ListView cart = (ListView) findViewById(R.id.listViewcart);

    ListAdapter customAdapter = new ListAdapter(this, R.layout.shoppingcart_row, test);

    cart.setAdapter(customAdapter); 
```

当我尝试打开它时，应用程序就崩溃了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:59:25.303

我做了类似的事情，在 XML 布局文件中创建了一个自定义视图，然后在运行时使用 LayoutInflater 添加到 ListView。然后，当您将自定义视图添加到 ListView 时，您会更改视图组件的值。

```
 ViewGroup parent = (ViewGroup) findViewById(R.id.llListing);
    View view = null;

// create new article_listing view                      
    view = (View)LayoutInflater.from(this.context).
    inflate(R.layout.article_listing, parent, false);

    // add title to title text in the newly added custom view
((TextView) ((ViewGroup) ((ViewGroup) view).getChildAt(0)).getChildAt(3)).setText(sd.getArticleListing().get(l).getTitle());

    // add to parent LinearLayout
    this.parent.addView(view); 
```

我为格式化道歉，仍然试图找出stackoverflow中的代码块。

这是 LayoutInflater 的简化示例。

因此，创建一个布局 XML 来表示列表中每个条目的全部内容。然后将每个自定义视图添加到列表中并修改值。然后将它们添加到父视图，即您的列表。我用线性布局做了我的，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:00:03.030

将此添加到您的`xml`

```
<ListView
android:id="@android:id/list"
.../> 
```

并扩展`ListActivity`

或`ListView`在您的 xml 中添加一个您尝试访问的名称

`ListView cart = (ListView) findViewById(R.id.listViewcart);`

那么你可以扩展`Activity`

**编辑**

如果你使用

`setContentView(R.layout.row); //row is the xml you posted above and put a ListView in`

那么你可以使用`ListView`你拥有的名字

否则，只需`extend ListActivity`使用`ListView`我上面给出的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T14:31:53.527

见[https://github.com/cyrilmottier/ListViewTipsAndTricks](https://github.com/cyrilmottier/ListViewTipsAndTricks)

创建不继承父视图点击的自定义控制器。像那样：

```
public class DontPressWithParentButton extends Button {

public DontPressWithParentButton(Context context) {
    super(context);
}

public DontPressWithParentButton(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public DontPressWithParentButton(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
public void setPressed(boolean pressed) {
    // Make sure the parent is a View prior casting it to View
    if (pressed && getParent() instanceof View && ((View) getParent()).isPressed()) {
        return;
    }
    super.setPressed(pressed);
}

} 
```

# python - Matplotlib 跳过数据 -

> ID：15502161
> 
> 赞同：1
> 
> 时间：2013-03-19T14:26:04.163
> 
> 标签：python, matplotlib

我正在尝试使用 matplotlib 绘制条形图。我的问题是我在列表中有一些“0”值，而 matplotlib 吃了其中一些值，我如何确保它总是绘制所有值。

这是代码：

```
counter_trim = counter[6:(len(counter)-6)]
pos = np.arange(len(Test_names[6:]))

width =.65

ax = plt.axes()
ax.set_ylabel('Number of failures')
ax.set_title('Distribution of ABT failures')
ax.set_xticks(pos + (width/2))

xtickNames= ax.set_xticklabels(Test_names[6:])

plt.setp(xtickNames, rotation=90, fontsize=10)
plt.bar(pos, counter_trim, width, color='b')

plt.tight_layout()
print 'Distribution plot can be found here:' +image_filepath
plt.savefig(image_filepath) 
```

为了让事情更清楚，
这里是 pos 的值：[ 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16]

和 counter_trim 的值： [0, 0, 0, 1, 17, 6, 0, 14, 32, 11, 0, 0, 2, 0, 1, 0, 0]

上面的代码跳过了前 3 个和后 2 个零，但是其余的都是一样的！

任何想法如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:40:17.597

尝试这样的事情：

```
plt.xlim(0, len(counter_trim)) 
```

由于他没有绘制实际的条形图，我猜 plot 命令省略了这些条目。我无法在 x 上使用您的标签进行尝试，因为它们与文本无关，但这适用于标准轴。

# html - 使用跨度设置单元格大小 (ajaxcrud.com)

> ID：15502165
> 
> 赞同：1
> 
> 时间：2013-03-19T14:26:09.533
> 
> 标签：html, css-tables

我正在使用 ajaxcrud.com，并且有一个函数可以让我格式化我的字段。它通过`<span>`在我的文本之前添加一个来实现。就像是：

```
<table>
<td><span>Text here</span></td>
</table> 
```

我的问题是我的单元格宽度都是一样的。因此，如果我在一个单元格中有很多文本，它只会生成一个高度很大的单元格。

无论如何我可以用它`<span>`来扩大我的单元格宽度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:52:07.690

将元素的设置`display`为或。然后，您可以为表格单元格将遵守的跨度设置规则。您可以将其设置为特定的像素宽度、百分比等。`<span>``block``inline-block``width`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:43:06.937

这是Explosion Pills建议的解决方案：

```
<table>
<td><span style='display:block; width:400px;'>Text here</span></td>
</table> 
```

当然，您可以根据需要调整宽度。

# javascript - 从 HTML 中的 if 语句调用 Javascript 函数

> ID：15502167
> 
> 赞同：1
> 
> 时间：2013-03-19T14:26:19.840
> 
> 标签：javascript, asp.net, html

此代码是在 VS 2003 -asp.net 中编写的

在 HTML 页面中，我定义了一个返回布尔值的 javascript 函数**checkuser() 。**我想在对该函数的调用中附上以下内容

`<A onclick="stageClear(); stageEditor();" href="javascript: void(0);">Add new Stage</A>`

我想要类似的东西

`<%if checkuser() then%> <A onclick="stageClear(); stageEditor();" href="javascript: void(0);">Add new Stage</A> <% end if %>`

**但我收到错误 checkuser() 未定义**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:31:06.750

您的代码看起来好像在寻找一个名为 checkuser 的 asp 函数。

如果你想用 js 来做，你需要做这样的事情：

```
<script type="text/javascript">
   if (checkuser()) {
      document.write('<a onclick="stageClear(); stageEditor();" href="javascript: void(0);">Add new Stage</a>');
   }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:31:06.997

如果您打算`checkuser()`在服务器端代码块（如您显示的那样）内调用该函数，则必须在页面代码后面定义该函数，而不是在客户端使用 JavaScript。

换句话说，您需要有一个名为

```
protected bool checkuser()
{
    return true;//just an example
} 
```

然后您可以按照您的意愿调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:39:31.423

你不能混合你的后端和你的前端代码。

```
<a onclick="clickHandler()" href="javascript:void(0)">Stuff</a> 
```

和JS：

```
<script>
    function clickHandler(){
        if(checkuser()){
            //do something
        }else{
            //do something else
        }
    }
</script> 
```

# c# - 使用正则表达式删除特定空格

> ID：15502168
> 
> 赞同：-3
> 
> 时间：2013-03-19T14:26:25.990
> 
> 标签：c#, asp.net, regex, string

我不是一个正规的前章。因此，如果有人可以帮助我，我将不胜感激。

[删除空格的正则表达式](https://stackoverflow.com/questions/6138502/regular-expression-to-remove-a-space)

[javascript正则表达式仅删除完整的单词](https://stackoverflow.com/questions/15244152/javascript-regular-expression-remove-complete-words-only)

[正则表达式用空格替换非字母字符](https://stackoverflow.com/questions/4220172/regular-expression-to-replace-non-alpha-characters-with-spaces)

[正则表达式删除一行中的空格并提取特定列](https://stackoverflow.com/questions/12154768/regular-expression-to-remove-white-spaces-in-a-line-and-extract-specific-columns)

上面的链接对我没有帮助

然而[这](https://stackoverflow.com/questions/6524270/regular-expression-for-removing-one-space)似乎很接近

我有这个字符串

```
<tr class="trClass"    >  <td class="tdClss"  > adasd   
<span class=classA  >     as  da  "sads "sd</span> </td> </tr> 
```

上面的 html 字符串中有三个类。

1.  “类”
2.  “td类”
3.  A类

类名后的空格未确定

天气类名称是否在引号中未确定

**我想删除 > 符号之前的空格**

**什么正则表达式会匹配这个条件？**

* * *

我的代码

```
 public static string Flatten(string inputString)
    {
        // remove line breaks
        string rawInput = inputString.RemoveLineBreaks().Trim();

        string filteredInput = Regex.Match(rawInput, "<tr.+?>.*</tr>").ToString();

        if (filteredInput.IsNotNullOrEmpty())
        {
            // remove space between end and start tags
            filteredInput = Regex.Replace(filteredInput, ">.+?<", delegate(Match match)
                {
                    string v = match.ToString();
                    return ">" + v.Substring(1, v.Length - 2).Trim() + "<";
                });

            // remove space between attribute and closing tags
            filteredInput = Regex.Replace(filteredInput, "\t>", delegate(Match match)
            {
                //string v = match.ToString();
                return ">";
            });

            return filteredInput;
        }
        else
        {
            return "Invalid HTML Table Row!";
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:42:08.873

根据您发布的确切内容，该模式`+>`将匹配您指定的条件。换句话说，您正在寻找一个或多个空格 ( `+`) 后跟一个右尖括号 ( `>`)。您可以使用`Regex.Replace`调用和传递`>`作为该模式的替代品。

预先警告：使用正则表达式操作 HTML 可能很危险。如果您`>`的字符串中有任何未编码的内容，那么它可能仍与上述模式匹配。对于您上面显示的内容，我怀疑您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:43:08.433

如果您只是使用[XDocument.Parse(string)](http://msdn.microsoft.com/en-us/library/bb345532.aspx)将其加载到[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)中，它将为您处理此问题。

```
var test = XDocument.Parse("<tr class=\"trClass\"    >  <td class=\"tdClss\"  > adasd   <span class=\"classA\"  >     as  da  \"sads \"sd</span> </td> </tr>");
Console.WriteLine(test); 
```

您不需要使用正则表达式。这为您提供以下信息：

```
<tr class="trClass">
    <td class="tdClss"> adasd   <span class="classA">     as  da  "sads "sd</span></td>
</tr> 
```

# spring - 未加载带有 AbstractAnnotationConfigDispatcherServletInitialier 的 ContextLoaderListener 配置

> ID：15502174
> 
> 赞同：1
> 
> 时间：2013-03-19T14:26:37.023
> 
> 标签：spring, spring-mvc

我使用 Spring 版本 3.2.2.RELEASE。

我想用 hibernate 创建一个 webapp 并具有以下配置：

```
public class LifepulseServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {

@Override
protected Class<?>[] getRootConfigClasses() {
    return new Class[] { PersistenceConfig.class};
}

@Override
protected Class<?>[] getServletConfigClasses() {
    return new Class[] { LifepulseWebConfig.class };
}

@Override
protected String[] getServletMappings() {
    return new String[] { "/" };
}

@Override
protected WebApplicationContext createRootApplicationContext() {
    return super.createRootApplicationContext();
}

} 
```

我的两个带有 @Configuration 注释的文件如下所示：

我的**PersistenceConfig**应该用于 ContextLoaderListener：

```
@Configuration
@EnableTransactionManagement(proxyTargetClass=true, mode=AdviceMode.PROXY)
public class PersistenceConfig{

Logger logger = LoggerFactory.getLogger(PersistenceConfig.class);

/** The Application Context. */
@Autowired
ApplicationContext context;

/**
 * Gets the database url.
 *
 * @return the database url
 */
@Bean(name="databaseUrl")
public String getDatabaseUrl(){
    return "jdbc:mysql://localhost/lifepulse";
}

/**
 * Gets the session factory properties.
 *
 * @return the session factory properties
 */
@Bean(name="sessionFactoryProperties")
public Properties getSessionFactoryProperties(){

    Properties props = new Properties();
    props.put("hibernate.dialect", MySQL5InnoDBDialect.class.getName());
    props.put("hibernate.hbm2ddl.auto", "create-drop");
    props.put("hibernate.show_sql", "true");
    props.put("hibernate.format_sql", "true");
    return props;
}

/** The Constant ANNOTATED_CLASSES. */
@SuppressWarnings("unchecked")
private static final Class<? extends Serializable>[] ANNOTATED_CLASSES=new Class[]{
    Melder.class,
    LogEntry.class
};

/**
 * Gets the annotated classes.
 *
 * @return the annotated classes
 */
private static Class<? extends Serializable>[] getAnnotatedClasses(){
    return ANNOTATED_CLASSES;
}

/**
 * Gets the data source.
 * This bean represents the application's MYSQL datasource, without using xml.
 *
 * @return the data source
 */
@Bean
public DataSource dataSource() {
    DriverManagerDataSource dataSource = new DriverManagerDataSource();
    dataSource.setDriverClassName("com.mysql.jdbc.Driver");
    dataSource.setUrl(getDatabaseUrl());
    dataSource.setUsername("lifepulse");
    dataSource.setPassword("lifepulse");
    return dataSource;
}

/**
 * Session factory.
 * This bean represents the Hibernate Session Factory. By declaring this bean
 * it can easily be injected into Spring DAOs later on.
 * 
 * @return the local session factory bean
 */
@Bean
public LocalSessionFactoryBean sessionFactory() {

    LocalSessionFactoryBean factory = new LocalSessionFactoryBean();
    factory.setAnnotatedClasses(getAnnotatedClasses());     
    factory.setHibernateProperties(getSessionFactoryProperties());
    factory.setDataSource(dataSource());
    return factory;
}

@Bean()
public GenericDao genericDao() {
    return new HibernateDaoImpl();
}

@Bean
PlatformTransactionManager txManager(){
    HibernateTransactionManager htm = new HibernateTransactionManager(sessionFactory().getObject());
    return htm;
}
} 
```

我的**LifepulseWebConfig**应该用于 DispatcherSerlvet：

```
@Configuration
@EnableWebMvc
@ComponentScan(value= {"com.ansiworks.lifepulse.controllers"})
@EnableTransactionManagement(proxyTargetClass=true, mode=AdviceMode.PROXY)
public class LifepulseWebConfig extends WebMvcConfigurerAdapter{ 
@Autowired
ApplicationContext context;

@Bean
ViewResolver viewResolver(){
    InternalResourceViewResolver resolver = new InternalResourceViewResolver();
    //resolver.setPrefix("");
    resolver.setSuffix(".jsp");
    return resolver;
}

@Bean
MainService mainService(){
    return new MainServiceImpl();
}

} 
```

此配置不起作用。dispathcer servlet 不会加载我的 PersistenceConfig，因此 bean 不会继承到 LifepulseWebConfig。

但是：当我将**PersistenceConfig添加到方法****LifepulseServletInitializer#getServletConfigClasses()**的类数组中时，一切正常。但是......我不能以这种方式使用sprint-security......

我究竟做错了什么！？**为什么 ContextLoaderListener 不读取LifepulseServletInitializer#getRootConfigClasses()**返回的配置类？

我也尝试过这种方式（没有**LifepulseServletInitializer**），效果相同。**我的PersistenceConfig**的 bean根本没有加载......

```
public class MyWebAppInitializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext container) {
      // Create the 'root' Spring application context
      AnnotationConfigWebApplicationContext rootContext =
        new AnnotationConfigWebApplicationContext();
      rootContext.register(PersistenceConfig.class);

      // Manage the lifecycle of the root application context
      container.addListener(new ContextLoaderListener(rootContext));

      // Create the dispatcher servlet's Spring application context
      AnnotationConfigWebApplicationContext dispatcherContext =
        new AnnotationConfigWebApplicationContext();
      dispatcherContext.register(LifepulseWebConfig.class);

      // Register and map the dispatcher servlet
      ServletRegistration.Dynamic dispatcher =
        container.addServlet("dispatcher", new DispatcherServlet(dispatcherContext));
      dispatcher.setLoadOnStartup(1);
      dispatcher.addMapping("/");
    }

} 
```

# model-view-controller - ExtJs 中的 MVC 是一种万能的解决方案吗？

> ID：15502176
> 
> 赞同：2
> 
> 时间：2013-03-19T14:26:41.370
> 
> 标签：model-view-controller, design-patterns, extjs, extjs4.1, extjs-mvc

我们已经使用 ExtJs 很长时间了，现在，随着 MVC 模式的出现，我们面临一个关键问题，即考虑到我们迄今为止所遵循的方法，是否在未来使用它。

在我们的应用程序中，我们有类似的屏幕，例如 40 个用于生成报告的类似屏幕等等。这些报告屏幕将有一个带有按钮的表单 - PDF、CSV、EXCEL。所有按钮在每个屏幕上都将具有相同的功能，即，将表单提交到 url 并生成特定报告。

**我们一直遵循的方法是创建一个自定义类，比如说reportscreen 类，它扩展了ExtJs 的窗口类。**

**这个自定义报告屏幕类已经具有定义了它们的处理程序的按钮（考虑到所有屏幕的功能都相似），并且还会有一个带有函数 setFormItems() 的表单。此类的任何实例都将使用 setFormItems() 和用于生成报告的 url 为表单提供项目。**

这种方法不仅帮助我们在很大程度上减少了开发工作，而且甚至允许团队的新成员使用该类并创建一个新屏幕。

现在出现在最推荐的模式 MVC 中，上面分享的方法绝对不是 MVC 模式。但是，我们真的需要在这里转向 MVC 模式吗？

使用上述方法，我们不仅可以省力，而且可以更好地控制事情。

**问这个问题的目的是了解如果我们使用 MVC 模式实现上述场景并远离我们当前的方法，我们将获得的确切优势。**

**因此，在上面的上下文中，MVC 会带来哪些额外的东西？而且，在 MVC 模式中实现这样的事情的最佳方式是什么？**

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T20:35:56.713

你需要使用MVC吗？不。假设你已经有了一个适合你的结构，如果它没有坏，就不要修复它。如果您正在开始一个新项目，我建议您使用 MVC，但我不会为了它而重构一大堆代码。如果您确实使用了 MVC，您将遵循类似的方法。您将有一个基本视图类，您可以在其中动态推送子类中的项目。您将有一个基本控制器来处理所有自定义事件，然后是子类控制器以在“每个模块”的基础上实现自定义功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T22:19:33.967

很难向没有使用 MVC 经验的人解释使用 MVC 的优势。作为同时使用 ExtJs 3 和 4（使用 MVC）开发的人，我认为 MVC 的最大优势之一是它迫使您正确思考 - 无论您是否愿意，使用 MVC 都可能导致代码库更可重用和更好的封装。但是，如果你们男孩和女孩是优秀的程序员/设计师，无论如何都会如此。

如果您确实选择迁移到 MVC，我相信主要变化将在于，现在您将不再处理自定义类中的用户交互，而是使用一个控制器来完成相同的工作 - 让您的自定义类来实现视图只要。ExtJs4 中的控制器是全局的——这意味着同一个控制器可以控制 40 个相似的视图。所以这里没有重复的控制器。

值得一提的是，即使在 MVC 设计中，您也会发现非 MVC 代码。例如，我有一个自定义记录编辑器，它是一个表单——该组件知道如何处理用户操作并相应地更新记录（该表单未提交，因为它主要处理关联）。该组件在 MVC 设计中扮演控制器和视图的等效角色。在我看来，以这种方式封装事物是非常合理的，而不是将其拆分为视图和控制器。但是（不可重用的）用户屏幕是使用 MVC 实现的。所以也许只是另一个不急于使用 MVC 的理由。

虽然我同意 Evan 的观点，如果它没有坏就不要修复它，如果我是你的开发负责人并且给定时间和金钱不是问题，我实际上会要求逐步迁移到 MVC - 总的来说，我认为 3 年后线你不会后悔这个决定。我至少会尝试一下。

当 ExtJs 4 出现时，我花了 2 个月的时间从头开始使用 MVC 重写一个系统——我现在一点也不后悔（我一开始就这样做了，但不是为了 MVC——而是因为4) 的早期版本。

# javascript - 带有字符串比较的 uglified javascript 代码的奇怪行为

> ID：15502177
> 
> 赞同：2
> 
> 时间：2013-03-19T14:26:41.313
> 
> 标签：javascript

我在这里为一个奇怪的案例创建了一个 jsfiddle：http: [//jsfiddle.net/YGcDR/](http://jsfiddle.net/YGcDR/)

这个想法是，当使用 uglifyjs 进行优化时，相等比较函数（可能未优化）会导致 select2 库中的错误。（这个bug很难诊断，我们只知道与[https://github.com/ivaynberg/select2/issues/840](https://github.com/ivaynberg/select2/issues/840)相关的补丁修复了它，补丁唯一改变的是比较代码。所以我'我真的想在这里形成一个假设！）

在优化和未优化的情况下，相同功能的修补版本似乎表现正常。

代码的“肉”是这样完成的：

```
if (a.constructor === String) return a === b + "";
if (b.constructor === String) return b === a + ""; 
```

对比

```
if (a.constructor === String) return a + "" === b + "";
if (b.constructor === String) return b + "" === a + ""; 
```

两种情况下生成的代码略有不同：

```
n.constructor===String?n===t+"":t.constructor===String?t===n+"":!1 
```

对比

```
n.constructor===String?n+""==t+"":t.constructor===String?t+""==n+"":!1} 
```

问题是，我想不出任何可能导致差异的 a 和 b 条目集。起初我虽然这可能是 之间的差异`var a = "Foo" and var b = new String("Foo")`，但似乎并非如此。有人知道为什么这会失败吗？

谢谢

# css - Chrome 文字很糟糕

> ID：15502181
> 
> 赞同：3
> 
> 时间：2013-03-19T14:26:47.503
> 
> 标签：css, windows, google-chrome, fonts, google-webfonts

当我使用 Chrome 访问 jsfiddle 时，文本不可读。Firefox 和 IE 没有这个问题。

这是chrome中图像的屏幕截图，我什至不知道如何称呼这种字体：

[http://i.imgur.com/kcznoz6.jpg](http://i.imgur.com/kcznoz6.jpg)

当我将文本复制并粘贴到记事本中时，文本显示得很好。

我还发现，如果我禁用 css 属性， text-rendering:optimizeLegibility; 使用 web-dev 工具，文本将正常显示，直到我刷新页面。

这是我禁用文本渲染时 Chrome 中的屏幕截图：optimizeLegibility;

[http://i.imgur.com/ifLmb2w.jpg](http://i.imgur.com/ifLmb2w.jpg)

我什至卸载了然后重新安装了 chrome 并没有帮助。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:56:21.093

为了解决这个问题，我编辑了 jameh 上面指出的文件。

该文件名为 Custom.css，我在此位置找到它：

C:\Users[用户名]\AppData\Local\Google\Chrome\User Data\Default\User StyleSheets

在该文件中，我添加了以下内容：

@font-face { 字体系列：'helvetica'; src：本地（'Arial'）；}

问题似乎与 helvetica 字体和 text-rendering:optimizeLegibility CSS 属性有关。我不确定为什么这是一个问题，但这就是我解决它的方法。

# jquery - 解决加载两个 jQuery 实例的问题？

> ID：15502183
> 
> 赞同：0
> 
> 时间：2013-03-19T14:26:56.237
> 
> 标签：jquery

我们对我们使用的 CMS 有一些限制，并且 jQuery 代码包含在页面的页脚中。

我们使用下面的代码来确定 jquery 是否可用，但是在包含此脚本之后加载 jQuery，这总是返回 false 导致我们的代码没有被执行。

```
if (typeof jQuery != 'undefined') { 
```

是否可以强制它等到整个页面加载而不使用：

```
jQuery(document).ready(function($) { 
```

注意：考虑到 CMS 的设置方式，我们无法将 jQuery 代码移到源代码中更高的位置，甚至可能无法实现如下所示的内容。（对模板文件的访问非常有限）。

[在 DOM 之后加载 jQuery，如何在加载 jQuery 之前使 $.ready() 可用于我的页面？](https://stackoverflow.com/questions/13728564/load-jquery-after-dom-how-can-i-make-ready-available-to-my-page-before-jque)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:35:50.317

have you tried this ...

> The DOMContentLoaded event is fired when the document has been completely loaded and parsed, without waiting for stylesheets, images, and subframes to finish loading (the load event can be used to detect a fully-loaded page).

```
document.addEventListener('DOMContentLoaded',function(){ //codes }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:34:59.033

您可以使用 HTML 代码执行以下操作

```
<body onlaod="checkjquery()"> 
```

您可以根据需要定义该功能

# reporting-services - SSRS 报告中的嵌入图像未显示 - 权限问题

> ID：15502186
> 
> 赞同：4
> 
> 时间：2013-03-19T14:26:59.780
> 
> 标签：reporting-services, permissions

我在所有报告的顶部都有一个徽标作为嵌入图像。

这些报告通过 SSRS Web 服务接口显示在 ASP.Net Web 应用程序中——所有这些都是非常标准的东西，但图像没有呈现——我只是得到一个损坏的链接。

这个问题有很多可能的解决方案，我尝试了一些方法，包括在 ConfigurationInfo 表中将 UseSessionCookies 设置为 false。

我注意到的是，当我将使用 Web 应用程序的匿名帐户从最低权限的服务帐户更改为我自己的用户帐户时，图像显示正常。

我不明白为什么会这样，也无法弄清楚我的 Web 应用程序的服务帐户需要哪些特殊权限才能查看报告中的嵌入图像。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T15:20:17.843

好的，问题解决了。有点儿。该问题不仅限于嵌入式图像，而且因为我没有使用 Reporting Services 查看器而发生。

总结一下：

1) 当您的 Web 应用程序调用报表服务器时，它完全有权这样做。生成的 SessionID 仅对 Web 应用程序帐户（即应用程序运行的服务帐户）可用。

2) Web 应用程序将 RAW HTML4.0 输出到屏幕。

3) 浏览器接收 HTML 并尝试检索 HTML 中引用的图像。

4) 浏览器以您的用户帐户运行（例如 domain\username1）

5) 报表服务器收到如下请求：

6) 现在 URL 中列出的 SessionID 与 domain\username1 没有关联，因此报表服务器声称它不存在。

当您将应用程序域设置为使用 domain\username1 帐户时，SessionID 恰好与您的帐户相关联，因此突然之间“工作”了。但是，当真正的用户尝试系统时，他们抱怨图像丢失，因为他们的域\用户名 N 与应用程序池帐户不匹配。

此问题的解决方案如下：

1) 使用报表查看器控件。这将确保浏览器接收到的 URL 将指向您的 Web 应用程序，并且您的 Web 应用程序标识将用于从报表服务器检索它们。

2) 在您的 Web 应用程序代码中，解析您从 Render 调用返回的 HTML4.0，获取并缓存所有图像，重新编写 HTML4.0 链接以指向您的 Web 应用程序存储的缓存图像，然后将其发送到浏览器（如果这看起来很复杂......然后使用 Report Viewer 控件，因为它使场景工作）

3) 您可以尝试使用 MHTML 输出格式，这将生成一个完全合格的报告，其中包含嵌入在二进制流中的图像。这样做的结果是更难将其嵌入到应用程序页面中......但并非无法克服

我选择使用 2) 的变体，因为我不想使用报表查看器。我尝试显示的徽标已托管在调用 Web 应用程序中，因此我只需将 SSRS 报告执行服务返回的响应中的 img 标记的 src 属性替换为该位置的 url。

我真的不想按照建议使用报告查看器作为解决此问题的最佳方法。为什么 SSRS 必须使用会话信息来返回像显示在所有报告上的徽标这样简单的东西，这超出了我的理解……花了很长时间才弄清楚这一点，而且解决方案并不是特别漂亮…… .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T14:35:13.147

这是外部图像吗？看看这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms156482.aspx)，它解释了检索图像所需的权限：

> 在报表设计器中预览报表时，预览使用用户的凭据来显示图像。当报表在报表服务器上运行时，报表服务器使用无人参与的执行帐户来检索图像。如果未指定无人值守执行帐户，则不使用凭据（匿名用户帐户）检索图像。如果这些帐户中的任何一个没有足够的权限访问该图像，则该图像将不会显示在报告中。

我会在报告管理器中检查图像的权限。

# java - 在java应用程序中使用winapi

> ID：15502187
> 
> 赞同：1
> 
> 时间：2013-03-19T14:27:02.380
> 
> 标签：java, windows, winapi

我试图在 JAVA 代码中调用 MessageBoxA 函数。以下方法有什么问题，以至于我的程序抛出了很多错误？

```
package loading.libraries;

public class User32
{
    //first case:public native int MessageBoxA(HWND hWnd,LPCSTR lpText,LPCSTR lpCaption,UINT uType);
    //second: public native int MessageBoxA(int hWnd,String lpText,String lpCaption,int uType);
    static  
    {
        System.loadLibrary("User32");
    }        

} 
```

* * *

```
package loading.libraries;

public class LoadingLibraries 
{
    public static void main(String[] args) 
    {
        User32 hwapi = new User32();

        hwapi.MessageBoxA(0,"Hello","World",0);               
    }
} 
```

第一：

> 运行：线程“main”中的异常 java.lang.ClassFormatError：类文件加载/库/MessageBox 中的本机或抽象方法中的代码属性 java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass( ClassLoader.java:791) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:449) at java.net.URLClassLoader.access$100(URLClassLoader.java: 71) 在 java.net.URLClassLoader$1.run(URLClassLoader.java:361) 在 java.net.URLClassLoader$1.run(URLClassLoader.java:355) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net .URLClassLoader.findClass(URLClassLoader.java:354) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:423) 在 sun.misc。Launcher$AppClassLoader.loadClass(Launcher.java:308) at java.lang.ClassLoader.loadClass(ClassLoader.java:356) at loading.libraries.LoadingLibraries.main(LoadingLibraries.java:8) Java Result: 1 BUILD SUCCESSFUL (total时间：2秒）

第二：

> 运行：线程“main”中的异常 java.lang.UnsatisfiedLinkError: loading.libraries.User32.MessageBoxA(ILjava/lang/String;Ljava/lang/String;I)I at loading.libraries.User32.MessageBoxA(Native Method) at loading.libraries.LoadingLibraries.main(LoadingLibraries.java:10) Java 结果：1 构建成功（总时间：0 秒）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:47:44.150

使用 JNI 调用本机代码并不像您尝试的那么简单。您正在调用的 DLL 中的函数必须符合某个接口，例如 Windows User32.dll 中的任意函数不符合 JNI 期望的格式。

您可以编写一个包装 DLL，这意味着您可以使用可以从 Java 调用的 JNI API 在 C 中编写一些代码。

另一种方法是使用[JNA](https://github.com/twall/jna#readme)，它比 JNI 更易于使用，它允许您调用任意 DLL 中的函数，而无需自己编写本机代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T14:42:17.883

您需要创建一个包装器来调用 User32 库中的这些函数。不要直接打电话给他们。查看本教程[http://www.ibm.com/developerworks/java/tutorials/j-jni/](http://www.ibm.com/developerworks/java/tutorials/j-jni/)。

除了简单地加载库并调用函数之外，还涉及更多步骤。还必须注意，如果您这样做，您将删除 Java 中最好的东西之一。能够编写一次运行任何地方。您将被束缚在 Windows 上。如果这对您来说不是问题，那么没什么大不了的。你确定这不是你不能直接从 Java 做的事情。JNI 真的应该是最后的手段。

此外，根据我使用 JNI 的经验，如果不小心使用它可能会导致应用程序不稳定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T14:53:04.407

您正在使用 Java JNI。JNI 不能只调用任何 DLL 方法，而只能调用设计为从 JVM 调用的方法。DLL 中的 C 方法签名应与 JNI 规范中定义的 Java 方法签名相匹配。

*   [http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/jniTOC.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/jniTOC.html)

例如这个 C 函数

```
include "jni.h"

JNIEXPORT jobject JNICALL Java_net_sf_sevenzipjbinding_SevenZip_nativeOpenArchive(JNIEnv * env,
     jclass thiz, jstring formatName, jobject inStream,
     jobject archiveOpenCallbackImpl) { ... } 
```

可以使用以下本地方法声明从 Java 调用：

```
package net.sf.sevenzipjbinding;

class public class SevenZip {
    private static native ISevenZipInArchive nativeOpenArchive(String formatName, IInStream inStream,
        IArchiveOpenCallback archiveOpenCallback) throws SevenZipException;
    ...
} 
```

如您所见，DLL 中导出的名称应与 java 包、类名和方法名匹配。函数签名应与使用 jni.h 中定义的类型的 java 签名相对应

示例来自[https://github.com/borisbrodski/sevenzipjbinding/](https://github.com/borisbrodski/sevenzipjbinding/)

# windows-phone-7 - 清除 WebBrowser 的 CacheMemory

> ID：15502197
> 
> 赞同：0
> 
> 时间：2013-03-19T14:27:21.393
> 
> 标签：windows-phone-7, windows-phone-7.1

我想`WebBrowser`使用 C# 在 Windows Phone 7.1 中动态清除控件的缓存。以前选择的图像再次加载到我的 中`WebBrowser`，有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:11:04.367

在 WP7.1 中清除缓存是不可能的。解决方法可以是强制浏览器每次加载新页面。这可以通过多种方式实现，例如：
- 使用**错误查询**，即在网页位置传递随机参数，例如*/page.html?q=5*
- 使用基于**标签**的方法来防止缓存（google it）
- 传递**无缓存**服务器本身的标头

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:47:19.610

在 Windows Phone 8 上，您可以使用扩展方法[ClearInternetCacheAsync](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj571213%28v=vs.105%29.aspx)。

但是，这不适用于 WP7.1。请参阅[另一个处理该问题的 StackOverflow 问题](https://stackoverflow.com/questions/7171409/clear-history-webbrowser-in-window-phone-7)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T17:19:18.190

对于清除图像，此代码可能对您有所帮助。

```
BitmapImage bitmapImage = image.Source as BitmapImage;
bitmapImage.UriSource = null;
image.Source = null; 
```

这行得通。快乐编码

# sql-server - Umbraco 内容选项卡错误/混合文档类型

> ID：15502201
> 
> 赞同：3
> 
> 时间：2013-03-19T14:27:32.203
> 
> 标签：sql-server, umbraco

使用 Umbraco 6.0.0 – 我不知道这是怎么发生的，但我正在努力追根究底，以便我可以修复它或将其记录为一种学习体验。

大多数内容节点都给我这个错误：

`The INSERT statement conflicted with the FOREIGN KEY constraint "FK_cmsPropertyData_cmsPropertyType_id". The conflict occurred in database "UmLLWebDev", table "dbo.cmsPropertyType", column 'id'. The statement has been terminated.`

错误截图：[http ://cl.ly/image/2t373f0r163I](http://cl.ly/image/2t373f0r163I)

发生的另一件奇怪的事情是我的一个子文档类型的所有属性都“移动”到了父文档类型。我不知道这是怎么发生的。即我在一个名为“样本”的子文档类型中有几个字段，现在这些字段出现在其父“主”中。

寻找有关如何甚至着手调查问题的建议，因为此时我觉得我需要重新开始。我唯一的原因是我使用一个批处理 sql 脚本来备份/恢复 Umbraco 数据库以用于部署目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-04T14:04:17.190

我们也刚刚遇到过这个问题。

我们通过删除`umbraco.config`文件`app_data`夹中的文件来解决它。您可能还需要在 IIS 中回收应用程序池或通过修改`web.config`文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T13:32:32.757

之前添加到我的评论：“这发生在我重命名文档属性之后。” 删除重命名的属性并重新添加它们再次解决了问题。我可以看到 Umbraco 中的节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-13T09:33:32.290

> **我们遇到了这个问题并通过保存修改后的文档类型来解决它。**

**注意：** *我们没有删除 Umbraco.config 也没有回收应用程序池。*

# codeigniter - crud 触发下一个按钮日历

> ID：15502203
> 
> 赞同：2
> 
> 时间：2013-03-19T14:27:37.657
> 
> 标签：codeigniter, crud, grocery-crud

我有一个用 codeigniter 开发的网站。例如，当我在我的视图中进入一个确定的函数以触发按钮 dhx_cal_next_button 时，我会持续一周。我试过但没有成功：

```
$('.dhx_cal_next_button').trigger('click'); 
```

我已经看到文件 dhtmlxscheduler.js 中有这段代码（我已经从这个函数中删除了更多代码）：

```
scheduler._click={
    dhx_cal_next_button:function(dummy,step){
        scheduler.setCurrentView(scheduler.date.add( //next line changes scheduler._date , but seems it has not side-effects
            scheduler.date[scheduler._mode+"_start"](scheduler._date),(step||1),scheduler._mode));
    }
}; 
```

如何模拟此按钮上的单击事件？
谢谢

# java - Child 和 Sub Child (JDOM2) 中的相同命名空间

> ID：15502207
> 
> 赞同：1
> 
> 时间：2013-03-19T14:27:52.353
> 
> 标签：java, xml, jdom-2

我需要在一个孩子和它的孩子中设置一个命名空间，但是，当我赋予相同的命名空间时，子孩子没有命名空间。

我需要这样的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<nfeProc xmlns="http://www.portalfiscal.inf.br/nfe" versao="2.00">
    <NFe xmlns="http://www.portalfiscal.inf.br/nfe">
        <infNFe versao="2.00" Id="NFe35120810609770000190550010000011151000011155">
            ... 
```

但我的代码只生成这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<nfeProc xmlns="http://www.portalfiscal.inf.br/nfe" versao="2.00">
    <NFe>
        <infNFe versao="2.00" Id="NFe35120810609770000190550010000011151000011155">
            ... 
```

生成这部分 XML 的代码是：

```
Document doc = new Document();
Namespace portal = Namespace.getNamespace( "http://www.portalfiscal.inf.br/nfe" );

Element tagNfeProc = new Element( "nfeProc", portal );
tagNfeProc.setAttribute( "versao", "2.00" );

Element tagNFe = new Element( "NFe", portal );

...

tagNfeProc.getChildren().add( tagNFe );

doc.setRootElement( tagNfeProc ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T12:09:40.480

如果你真的想添加它，你必须手动添加，使用我之前提到的'setAttribute'方法。

否则：
“NFe”标签不再需要命名空间属性，因为该命名空间已经在更高级别（在您的示例中为顶层）声明，并且它将在您声明的整个块中使用（继承）它。

经过一番搜索，关于 [XML 命名空间](https://stackoverflow.com/a/1181936/2335239 "XML 中的“xmlns”是什么意思？")的简要说明：）

# ios - 如何从 UIactionsheet 中的 UISwitch 获得答案

> ID：15502208
> 
> 赞同：0
> 
> 时间：2013-03-19T14:27:55.677
> 
> 标签：ios, uiactionsheet, uiswitch

我正在我的 uiactionsheet 中实现 Uiswitch，我已经成功地将它放置在我想要的位置，但无法使用它。这是我的代码：

```
switchButton = [[UISwitch alloc] init];
[mySheet addSubview:switchButton];
[mySheet showInView:self.view];

UILabel *instruction = [[UILabel alloc] init];
[instruction setBackgroundColor:[UIColor clearColor]];
[instruction setText:@"Daily"];
[mySheet addSubview:instruction];

// get the dimension of the sheet to position the switch
CGSize parentSize  = mySheet.frame.size;
CGRect rect = switchButton.frame;
rect.origin.x = parentSize.width/2.0 - rect.size.width + 90;
rect.origin.y = parentSize.height - rect.size.height + 90 ;
switchButton.frame = rect;

//get the dimension of the sheet to possition the label
rect.origin.x = parentSize.width/2.0 - rect.size.width -20;
rect.origin.y = parentSize.height - rect.size.height + 90 ;
instruction.frame = rect; 
```

我已经将我的开关按钮初始化为一个 iboutlet。在操作表的功能中，我正在尝试这样做。

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:        (NSInteger)buttonIndex{

    switch (buttonIndex) {
        case 0:
        {

            NSLog(@"Yes Button is working");
        }
            break;
         case 1:
        {

            if(switchButton.on){

            NSLog(@"IS on ?");
        }
          else {

         NSLog(@"Is off?");

         }
        }
        default:
            break;
    } 
```

![一切就绪](../Images/c5dfecde3df08171f7c43ce1a0761035.png)

**IMP 我还尝试了更多我为它创建“-(ibAction)funct”的东西，但是当我这样做时，我无法将它与我的开关链接起来 **

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:43:11.680

以下代码将有所帮助

```
switchButton = [[UISwitch alloc] init];

[switchButton addTarget:self action:@selector(setState:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:39:05.593

将其设置为 IBOutlet 不会做任何事情，因为您正在以编程方式创建开关。确实，您应该创建自己的 UIViewController（并在 Interface Builder 中设计它）以模态方式显示，而不是使用为简单按钮选择而设计的 UIActionSheet。

但是，如果您确实继续使用 UIActionSheet，您可以在创建 UISwitch 时调用它的“addTarget”以在开关更改时捕获事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:47:18.387

在将子视图添加到 UIActionSheet 之前，您还可以为 UISwitch 视图设置标签值（例如 6）。然后，当该方法`clickedButtonAtIndex`被触发时，您可以使用`[(UISwitch *)[actionSheet viewWithTag:6] isChecked]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T14:49:59.990

您可以有一个 BOOL 标志，它可以设置`UISwitch`

```
[mySwitch addTarget:self action:@selector(switchChanged) forControlEvents: UIControlEventTouchUpInside];
-(void)switchChanged{
    if(switchOn){
     switchOn=NO;
   }
   else {
     switch=YES;
   }
} 
```

在`ActionSheet`你可以检查标志`swithcOn`

# hadoop - sqoop库目录在哪里？

> ID：15502220
> 
> 赞同：9
> 
> 时间：2013-03-19T14:28:26.883
> 
> 标签：hadoop, cloudera, sqoop

要在 Sqoop 中安装 MySQL 连接器，我需要将 jar 文件放在 Sqoop 目录中，但我找不到它（它不在`/usr/lib/sqoop`. 我在多台机器上安装了 Sqoop 和 Cloudera。

我在哪里可以找到其中一台机器上的 Sqoop 目录？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T14:47:00.097

你在使用 Ubuntu 吗？在这种情况下，它可能是一个符号链接`/etc/alternatives/something...`（使用 ls -la 检查）

# android - Sbt LibGdx：构建链在打包步骤中挂起

> ID：15502223
> 
> 赞同：2
> 
> 时间：2013-03-19T14:28:32.413
> 
> 标签：android, scala, sbt, libgdx, sbt-android-plugin

我使用 g8 模板 ajhager/libgdx-sbt-project 创建了一个项目，并希望在 android 模拟器中运行它。

我不得不将 sbt 版本更改为 0.12.2，因为存储库只有 sbt-android-plugin 用于这个 sbt 版本，但我没有更改任何其他文件，但想编译创建的布局。这里是完整的工作流程（根据[https://github.com/ajhager/libgdx-sbt-project.g8](https://github.com/ajhager/libgdx-sbt-project.g8)）。不要害怕，它主要是 sbt 的调试输出，只有几个步骤；）：

```
$ g8 ajhager/libgdx-sbt-project
package [my.game.pkg]: 
name [Game]: 
api_level [17]: 
scala_version [2.10.0]: 

Applied ajhager/libgdx-sbt-project.g8 in game

$ cd game
$ echo "sbt.version=0.12.2" > project/build.properties
$ sbt
Detected sbt version 0.12.2
Starting sbt: invoke with -help for other options
[info] Loading global plugins from /home/user/.sbt/plugins
[info] Loading project definition from /home/user/test2/game/project
[info] Updating {file:/home/user/test2/game/project/}default-f30402...
[info] Resolving org.scala-sbt#precompiled-2_10_0;0.12.2 ...
[info] Done updating.
[info] Compiling 1 Scala source to /home/user/test2/game/project/target/scala-2.9.2/sbt-0.12/classes...
[info] Set current project to android (in build file:/home/user/test2/game/)
> update-gdx
[info] Pulling libgdx-nightly-latest
[warn] This may take a few minutes...
[info] Extracting common libs
[info] Extracting desktop libs
[info] Extracting ios libs
[info] Extracting android libs
[info] Update complete
[success] Total time: 25 s, completed 19.03.2013 15:09:04
> project android
[info] Set current project to android (in build file:/home/user/test2/game/)
> android:start-device
[info] Updating {file:/home/user/test2/game/}android...                                                                                                                                                                                          
[info] Resolving org.scala-lang#scala-library;2.10.0 ...
[info] Done updating.                                                                                                                                                                                                                        
[info] Compiling 1 Scala source and 1 Java source to /home/user/test2/game/android/target/scala-2.10/classes...                                                                                                                                  
ProGuard, version 4.8                                                                                                                                                                                                                              
ProGuard is released under the GNU General Public License. You therefore                                                                                                                                                                           
must ensure that programs that link to it (org.scalasbt.androidplugin, ...)                                                                                                                                                                        
carry the GNU General Public License as well. Alternatively, you can                                                                                                                                                                               
apply for an exception with the author of ProGuard.                                                                                                                                                                                                
Reading program directory [/home/user/test2/game/android/target/scala-2.10/classes]                                                                                                                                                              
Reading program directory [/home/user/test2/game/common/target/scala-2.10/classes] (filtered)                                                                                                                                                    
Reading program jar [/home/user/test2/game/android/src/main/libs/gdx-backend-android.jar] (filtered)                                                                                                                                             
Reading program jar [/home/user/test2/game/common/lib/gdx.jar] (filtered)                                                                                                                                                                        
Reading program jar [/home/user/.sbt/boot/scala-2.10.0/lib/scala-library.jar] (filtered)                                                                                                                                                         
Reading library jar [/home/user/android-sdks/platforms/android-17/android.jar]                                                                                                                                                                   
Note: com.badlogic.gdx.scenes.scene2d.ui.TableToolkit accesses a method 'setWidget(com.badlogic.gdx.scenes.scene2d.Actor)' dynamically                                                                                                             
  Maybe this is program method 'com.badlogic.gdx.scenes.scene2d.ui.ScrollPane { void setWidget(com.badlogic.gdx.scenes.scene2d.Actor); }'
Note: scala.concurrent.forkjoin.ForkJoinPool accesses a declared field 'ctl' dynamically
  Maybe this is program field 'scala.concurrent.forkjoin.ForkJoinPool { long ctl; }'
Note: scala.concurrent.forkjoin.ForkJoinPool accesses a declared field 'parkBlocker' dynamically
Note: scala.concurrent.forkjoin.ForkJoinPool$WorkQueue accesses a declared field 'runState' dynamically
  Maybe this is program field 'scala.concurrent.forkjoin.ForkJoinPool { int runState; }'
  Maybe this is program field 'scala.concurrent.forkjoin.ForkJoinPool$WorkQueue { int runState; }'
Note: scala.concurrent.forkjoin.LinkedTransferQueue accesses a declared field 'head' dynamically
  Maybe this is program field 'com.badlogic.gdx.utils.PooledLinkedList { com.badlogic.gdx.utils.PooledLinkedList$Item head; }'
  Maybe this is program field 'scala.collection.immutable.ListSet$Node { java.lang.Object head; }'
  Maybe this is program field 'scala.concurrent.forkjoin.LinkedTransferQueue { scala.concurrent.forkjoin.LinkedTransferQueue$Node head; }'
  Maybe this is program field 'scala.util.parsing.combinator.PackratParsers$LR { scala.Option head; }'
Note: scala.concurrent.forkjoin.LinkedTransferQueue accesses a declared field 'tail' dynamically
  Maybe this is program field 'com.badlogic.gdx.utils.PooledLinkedList { com.badlogic.gdx.utils.PooledLinkedList$Item tail; }'
  Maybe this is program field 'scala.collection.Iterator$$anon$17 { scala.collection.Iterator tail; }'
  Maybe this is program field 'scala.concurrent.forkjoin.LinkedTransferQueue { scala.concurrent.forkjoin.LinkedTransferQueue$Node tail; }'
Note: scala.concurrent.forkjoin.LinkedTransferQueue accesses a declared field 'sweepVotes' dynamically
  Maybe this is program field 'scala.concurrent.forkjoin.LinkedTransferQueue { int sweepVotes; }'
Note: scala.concurrent.forkjoin.LinkedTransferQueue$Node accesses a declared field 'item' dynamically
  Maybe this is program field 'scala.concurrent.forkjoin.LinkedTransferQueue$Node { java.lang.Object item; }'
Note: scala.concurrent.forkjoin.LinkedTransferQueue$Node accesses a declared field 'next' dynamically
  Maybe this is program field 'com.badlogic.gdx.utils.PooledLinkedList$Item { com.badlogic.gdx.utils.PooledLinkedList$Item next; }'
  Maybe this is program field 'com.badlogic.gdx.utils.Predicate$PredicateIterator { java.lang.Object next; }'
  Maybe this is program field 'scala.collection.immutable.Page { scala.collection.immutable.Page next; }'
  Maybe this is program field 'scala.collection.immutable.RedBlackTree$TreeIterator { scala.collection.immutable.RedBlackTree$Tree next; }'
  Maybe this is program field 'scala.collection.mutable.DefaultEntry { java.lang.Object next; }'
  Maybe this is program field 'scala.collection.mutable.DoubleLinkedList { scala.collection.mutable.Seq next; }'
  Maybe this is program field 'scala.collection.mutable.LinkedEntry { java.lang.Object next; }'
  Maybe this is program field 'scala.collection.mutable.LinkedHashSet$Entry { java.lang.Object next; }'
  Maybe this is program field 'scala.collection.mutable.LinkedList { scala.collection.mutable.Seq next; }'
  Maybe this is program field 'scala.collection.mutable.OpenHashMap$OpenEntry { java.lang.Object next; }'
  Maybe this is program field 'scala.collection.mutable.UnrolledBuffer$Unrolled { scala.collection.mutable.UnrolledBuffer$Unrolled next; }'
  Maybe this is program field 'scala.collection.parallel.AdaptiveWorkStealingForkJoinTasks$WrappedTask { scala.collection.parallel.AdaptiveWorkStealingTasks$WrappedTask next; }'
  Maybe this is program field 'scala.collection.parallel.AdaptiveWorkStealingThreadPoolTasks$WrappedTask { scala.collection.parallel.AdaptiveWorkStealingTasks$WrappedTask next; }'
  Maybe this is program field 'scala.concurrent.Channel$LinkedList { scala.concurrent.Channel$LinkedList next; }'
  Maybe this is program field 'scala.concurrent.forkjoin.ForkJoinTask$ExceptionNode { scala.concurrent.forkjoin.ForkJoinTask$ExceptionNode next; }'
  Maybe this is program field 'scala.concurrent.forkjoin.LinkedTransferQueue$Node { scala.concurrent.forkjoin.LinkedTransferQueue$Node next; }'
  Maybe this is program field 'scala.reflect.NameTransformer$OpCodes { scala.reflect.NameTransformer$OpCodes next; }'
  Maybe this is program field 'scala.runtime.PolyMethodCache { scala.runtime.MethodCache next; }'
  Maybe this is program field 'scala.util.parsing.combinator.Parsers$NoSuccess { scala.util.parsing.input.Reader next; }'
  Maybe this is program field 'scala.util.parsing.combinator.Parsers$Success { scala.util.parsing.input.Reader next; }'
  Maybe this is program field 'scala.xml.PrefixedAttribute { scala.xml.MetaData next; }'
  Maybe this is program field 'scala.xml.UnprefixedAttribute { scala.xml.MetaData next; }'
Note: scala.concurrent.forkjoin.LinkedTransferQueue$Node accesses a declared field 'waiter' dynamically
  Maybe this is program field 'scala.concurrent.forkjoin.LinkedTransferQueue$Node { java.lang.Thread waiter; }'
Note: the configuration keeps the entry point 'com.badlogic.gdx.Game { void setScreen(com.badlogic.gdx.Screen); }', but not the descriptor class 'com.badlogic.gdx.Screen'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidApplication { void initialize(com.badlogic.gdx.ApplicationListener,boolean); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidApplication { void initialize(com.badlogic.gdx.ApplicationListener,com.badlogic.gdx.backends.android.AndroidApplicationConfiguration); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidApplication { android.view.View initializeForView(com.badlogic.gdx.ApplicationListener,boolean); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidApplication { android.view.View initializeForView(com.badlogic.gdx.ApplicationListener,com.badlogic.gdx.backends.android.AndroidApplicationConfiguration); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidApplication { void addLifecycleListener(com.badlogic.gdx.LifecycleListener); }', but not the descriptor class 'com.badlogic.gdx.LifecycleListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidApplication { void removeLifecycleListener(com.badlogic.gdx.LifecycleListener); }', but not the descriptor class 'com.badlogic.gdx.LifecycleListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidAudio { com.badlogic.gdx.audio.Music newMusic(com.badlogic.gdx.files.FileHandle); }', but not the descriptor class 'com.badlogic.gdx.files.FileHandle'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidAudio { com.badlogic.gdx.audio.Sound newSound(com.badlogic.gdx.files.FileHandle); }', but not the descriptor class 'com.badlogic.gdx.files.FileHandle'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidDaydream { void initialize(com.badlogic.gdx.ApplicationListener,boolean); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidDaydream { void initialize(com.badlogic.gdx.ApplicationListener,com.badlogic.gdx.backends.android.AndroidApplicationConfiguration); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidDaydream { android.view.View initializeForView(com.badlogic.gdx.ApplicationListener,boolean); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidDaydream { android.view.View initializeForView(com.badlogic.gdx.ApplicationListener,com.badlogic.gdx.backends.android.AndroidApplicationConfiguration); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidDaydream { void addLifecycleListener(com.badlogic.gdx.LifecycleListener); }', but not the descriptor class 'com.badlogic.gdx.LifecycleListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidDaydream { void removeLifecycleListener(com.badlogic.gdx.LifecycleListener); }', but not the descriptor class 'com.badlogic.gdx.LifecycleListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidFileHandle { AndroidFileHandle(android.content.res.AssetManager,java.lang.String,com.badlogic.gdx.Files$FileType); }', but not the descriptor class 'com.badlogic.gdx.Files$FileType'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidFileHandle { AndroidFileHandle(android.content.res.AssetManager,java.io.File,com.badlogic.gdx.Files$FileType); }', but not the descriptor class 'com.badlogic.gdx.Files$FileType'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidFiles { com.badlogic.gdx.files.FileHandle getFileHandle(java.lang.String,com.badlogic.gdx.Files$FileType); }', but not the descriptor class 'com.badlogic.gdx.Files$FileType'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidGraphics { boolean setDisplayMode(com.badlogic.gdx.Graphics$DisplayMode); }', but not the descriptor class 'com.badlogic.gdx.Graphics$DisplayMode'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidGraphicsDaydream { boolean setDisplayMode(com.badlogic.gdx.Graphics$DisplayMode); }', but not the descriptor class 'com.badlogic.gdx.Graphics$DisplayMode'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidGraphicsLiveWallpaper { boolean setDisplayMode(com.badlogic.gdx.Graphics$DisplayMode); }', but not the descriptor class 'com.badlogic.gdx.Graphics$DisplayMode'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInput { AndroidInput(com.badlogic.gdx.Application,android.content.Context,java.lang.Object,com.badlogic.gdx.backends.android.AndroidApplicationConfiguration); }', but not the descriptor class 'com.badlogic.gdx.Application'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInput { void getTextInput(com.badlogic.gdx.Input$TextInputListener,java.lang.String,java.lang.String); }', but not the descriptor class 'com.badlogic.gdx.Input$TextInputListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInput { void getPlaceholderTextInput(com.badlogic.gdx.Input$TextInputListener,java.lang.String,java.lang.String); }', but not the descriptor class 'com.badlogic.gdx.Input$TextInputListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInput { void setInputProcessor(com.badlogic.gdx.InputProcessor); }', but not the descriptor class 'com.badlogic.gdx.InputProcessor'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInput { boolean isPeripheralAvailable(com.badlogic.gdx.Input$Peripheral); }', but not the descriptor class 'com.badlogic.gdx.Input$Peripheral'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInput$3 { AndroidInput$3(com.badlogic.gdx.backends.android.AndroidInput,java.lang.String,java.lang.String,com.badlogic.gdx.Input$TextInputListener); }', but not the descriptor class 'com.badlogic.gdx.Input$TextInputListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInput$4 { AndroidInput$4(com.badlogic.gdx.backends.android.AndroidInput,java.lang.String,java.lang.String,com.badlogic.gdx.Input$TextInputListener); }', but not the descriptor class 'com.badlogic.gdx.Input$TextInputListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInput$SensorListener { AndroidInput$SensorListener(com.badlogic.gdx.backends.android.AndroidInput,com.badlogic.gdx.Input$Orientation,float[],float[]); }', but not the descriptor class 'com.badlogic.gdx.Input$Orientation'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInputFactory { com.badlogic.gdx.backends.android.AndroidInput newAndroidInput(com.badlogic.gdx.Application,android.content.Context,java.lang.Object,com.badlogic.gdx.backends.android.AndroidApplicationConfiguration); }', but not the descriptor class 'com.badlogic.gdx.Application'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidInputThreePlus { AndroidInputThreePlus(com.badlogic.gdx.Application,android.content.Context,java.lang.Object,com.badlogic.gdx.backends.android.AndroidApplicationConfiguration); }', but not the descriptor class 'com.badlogic.gdx.Application'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidLiveWallpaper { void initialize(com.badlogic.gdx.ApplicationListener,com.badlogic.gdx.backends.android.AndroidApplicationConfiguration); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidLiveWallpaper { void addLifecycleListener(com.badlogic.gdx.LifecycleListener); }', but not the descriptor class 'com.badlogic.gdx.LifecycleListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidLiveWallpaper { void removeLifecycleListener(com.badlogic.gdx.LifecycleListener); }', but not the descriptor class 'com.badlogic.gdx.LifecycleListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidLiveWallpaperService { void offsetChange(com.badlogic.gdx.ApplicationListener,float,float,float,float,int,int); }', but not the descriptor class 'com.badlogic.gdx.ApplicationListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidNet { void sendHttpRequest(com.badlogic.gdx.Net$HttpRequest,com.badlogic.gdx.Net$HttpResponseListener); }', but not the descriptor class 'com.badlogic.gdx.Net$HttpRequest'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidNet { void sendHttpRequest(com.badlogic.gdx.Net$HttpRequest,com.badlogic.gdx.Net$HttpResponseListener); }', but not the descriptor class 'com.badlogic.gdx.Net$HttpResponseListener'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidNet { com.badlogic.gdx.net.ServerSocket newServerSocket(com.badlogic.gdx.Net$Protocol,int,com.badlogic.gdx.net.ServerSocketHints); }', but not the descriptor class 'com.badlogic.gdx.Net$Protocol'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidNet { com.badlogic.gdx.net.ServerSocket newServerSocket(com.badlogic.gdx.Net$Protocol,int,com.badlogic.gdx.net.ServerSocketHints); }', but not the descriptor class 'com.badlogic.gdx.net.ServerSocketHints'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidNet { com.badlogic.gdx.net.Socket newClientSocket(com.badlogic.gdx.Net$Protocol,java.lang.String,int,com.badlogic.gdx.net.SocketHints); }', but not the descriptor class 'com.badlogic.gdx.Net$Protocol'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidNet { com.badlogic.gdx.net.Socket newClientSocket(com.badlogic.gdx.Net$Protocol,java.lang.String,int,com.badlogic.gdx.net.SocketHints); }', but not the descriptor class 'com.badlogic.gdx.net.SocketHints'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidServerSocket { AndroidServerSocket(com.badlogic.gdx.Net$Protocol,int,com.badlogic.gdx.net.ServerSocketHints); }', but not the descriptor class 'com.badlogic.gdx.Net$Protocol'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidServerSocket { AndroidServerSocket(com.badlogic.gdx.Net$Protocol,int,com.badlogic.gdx.net.ServerSocketHints); }', but not the descriptor class 'com.badlogic.gdx.net.ServerSocketHints'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidServerSocket { com.badlogic.gdx.net.Socket accept(com.badlogic.gdx.net.SocketHints); }', but not the descriptor class 'com.badlogic.gdx.net.SocketHints'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidSocket { AndroidSocket(com.badlogic.gdx.Net$Protocol,java.lang.String,int,com.badlogic.gdx.net.SocketHints); }', but not the descriptor class 'com.badlogic.gdx.Net$Protocol'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidSocket { AndroidSocket(com.badlogic.gdx.Net$Protocol,java.lang.String,int,com.badlogic.gdx.net.SocketHints); }', but not the descriptor class 'com.badlogic.gdx.net.SocketHints'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidSocket { AndroidSocket(java.net.Socket,com.badlogic.gdx.net.SocketHints); }', but not the descriptor class 'com.badlogic.gdx.net.SocketHints'
Note: the configuration keeps the entry point 'com.badlogic.gdx.backends.android.AndroidSocket { void applyHints(com.badlogic.gdx.net.SocketHints); }', but not the descriptor class 'com.badlogic.gdx.net.SocketHints'
Note: the configuration keeps the entry point 'com.badlogic.gdx.files.FileHandle { FileHandle(java.lang.String,com.badlogic.gdx.Files$FileType); }', but not the descriptor class 'com.badlogic.gdx.Files$FileType'
Note: the configuration keeps the entry point 'com.badlogic.gdx.files.FileHandle { FileHandle(java.io.File,com.badlogic.gdx.Files$FileType); }', but not the descriptor class 'com.badlogic.gdx.Files$FileType'
Note: the configuration keeps the entry point 'com.badlogic.gdx.files.FileHandle { void copyTo(com.badlogic.gdx.files.FileHandle); }', but not the descriptor class 'com.badlogic.gdx.files.FileHandle'
Note: the configuration keeps the entry point 'com.badlogic.gdx.files.FileHandle { void moveTo(com.badlogic.gdx.files.FileHandle); }', but not the descriptor class 'com.badlogic.gdx.files.FileHandle'
Note: the configuration keeps the entry point 'com.badlogic.gdx.files.FileHandle { void copyFile(com.badlogic.gdx.files.FileHandle,com.badlogic.gdx.files.FileHandle); }', but not the descriptor class 'com.badlogic.gdx.files.FileHandle'
Note: the configuration keeps the entry point 'com.badlogic.gdx.files.FileHandle { void copyFile(com.badlogic.gdx.files.FileHandle,com.badlogic.gdx.files.FileHandle); }', but not the descriptor class 'com.badlogic.gdx.files.FileHandle'
Note: the configuration keeps the entry point 'com.badlogic.gdx.files.FileHandle { void copyDirectory(com.badlogic.gdx.files.FileHandle,com.badlogic.gdx.files.FileHandle); }', but not the descriptor class 'com.badlogic.gdx.files.FileHandle'
Note: the configuration keeps the entry point 'com.badlogic.gdx.files.FileHandle { void copyDirectory(com.badlogic.gdx.files.FileHandle,com.badlogic.gdx.files.FileHandle); }', but not the descriptor class 'com.badlogic.gdx.files.FileHandle'
Note: the configuration keeps the entry point 'com.badlogic.gdx.utils.Pool { void freeAll(com.badlogic.gdx.utils.Array); }', but not the descriptor class 'com.badlogic.gdx.utils.Array'
Note: there were 57 unkept descriptor classes in kept class members.
  You should consider explicitly keeping the mentioned classes
  (using '-keep').
Note: there were 10 accesses to class members by means of introspection.
  You should consider explicitly keeping the mentioned class members
  (using '-keep' or '-keepclassmembers').
Note: You're ignoring all warnings!
Preparing output jar [/home/user/test2/game/android/target/classes.min.jar]
  Copying resources from program directory [/home/user/test2/game/android/target/scala-2.10/classes]
  Copying resources from program directory [/home/user/test2/game/common/target/scala-2.10/classes] (filtered)
  Copying resources from program jar [/home/user/test2/game/android/src/main/libs/gdx-backend-android.jar] (filtered)
  Copying resources from program jar [/home/user/test2/game/common/lib/gdx.jar] (filtered)
  Copying resources from program jar [/home/user/.sbt/boot/scala-2.10.0/lib/scala-library.jar] (filtered)
[info] Dexing /home/user/test2/game/android/target/classes.dex
    (skipping file '.gitkeep' due to ANDROID_AAPT_IGNORE pattern '.*')
[info] Packaging /home/user/test2/game/android/target/android-1.0.apk 
```

它挂在那里。到现在大约一个小时都没有结束。CPU 没有负载（高空闲时间）并且 iotop 显示没有磁盘访问。大约有 4 GB 的可用 RAM。

当我改为运行桌面版本时：

```
sbt
>project desktop
>run 
```

一切正常。只是安卓版本不行。我能做些什么？是否有任何日志文件我可以查看详细信息？我找不到任何东西。

[症状与Sbt assembly hangs on my Mac](https://stackoverflow.com/questions/13965858/sbt-assembly-hangs-on-my-mac)非常相似，但我在那里找不到解决方案。

**编辑：**

当我用 Ctrl+C 中止它时，我得到：

```
[error] ERROR: ld.so: object '/opt/lib/libmediaclient.so' from /etc/ld.so.preload cannot be preloaded: ignored.
[error] error: device not found
[error] - waiting for device - 
```

我认为第一个无关紧要，但也许其他两个？

**编辑2：**

我想也许我的安卓模拟器崩溃了。所以我重新启动了我的电脑并运行

```
sbt android:start-device 
```

启动后在做任何其他事情之前。它仍然挂起并且以下相关进程正在运行：

```
$ ps aux|grep adb
user    3293  0.0  0.0   4960  1168 pts/1    S+   15:37   0:00 /home/user/androidsdks/platform-tools/adb -d install -r  /home/user/test2/game/android/target/android-1.0.apk
user    3297  0.0  0.0  22376  1500 pts/1    Sl+  15:37   0:00 adb fork-server server
user    3298  0.0  0.0      0     0 pts/1    Z+   15:37   0:00 [adb] <defunct> 
```

取消后再调用

```
adb kill-server
adb start-server
sbt android:start-device 
```

我不再得到已失效的进程，而只有另外两个。但它仍然挂起。

**编辑3：** 无论我输入“android：start-device”还是“android：start-emulator”似乎都没有区别。当没有手机连接到 PC 时，两者的行为完全相同并挂起。当有手机连接到 PC 时，“android:start-device”工作并在手机上运行应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:58:25.163

问题解决了 - 我上面的各种编辑向我展示了方法。键入“android:start-emulator”时，模拟器必须实际运行。第一次尝试是这种情况，但我在重新启动PC后没有重试。当我手动启动模拟器（通过 SDK 管理器）并调用“sbt android:start-emulator”时，它会在模拟器上运行应用程序。

# sql - 何时使用单独的日期和时间而不是单个日期时间

> ID：15502226
> 
> 赞同：14
> 
> 时间：2013-03-19T14:28:40.203
> 
> 标签：sql, sql-server, datetime

如果我想存储日期和时间，最好将它们存储在单独的日期和时间中还是使用单个日期时间？

我们什么时候应该使用日期和时间而不是单个日期时间？

我想使用日期或时间过滤我的查询。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T14:37:16.957

当您谈论某个时刻时，无论是通用时刻，还是某人当地日历上的特定日期和时间，您都使用`datetime`. 如果你想确保你谈论的是一个确切的时刻，而不管观察者是谁，那么你可以使用`datetimeoffset`.

如果您只存储 a`date`那么您的意思是没有时间组件的日期，即“此日期的任何时间”。

如果您只存储 a`time`那么您的意思是没有日期组件的时间，意思是“这个时间在任何日期”，或“这个时间在由其他方式确定的日期”。

`date`将 a和 a`time`放在同一行并没有实际目的。只需使用 a`datetime`即可。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T14:32:38.063

在 SQL Server 2008 中，您有[日期和时间数据类型](http://msdn.microsoft.com/en-us/library/ms186724%28v=sql.100%29.aspx)，因此这不是问题。

如果这是一个不错的选择，它真的取决于您的业务以及您将如何查询数据。

例如，如果您想知道任何一天下午 1 点到 2 点之间的所有订单，使用分隔`Date`列`Time`会更快

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T14:44:55.553

如果您有意不关心时间，则将此数据存储为日期数据类型会更有效。想想客户生日专栏，我能想到的情况不会太多。如果碰巧附加了一个时间（通常是一个错误），则需要通过 convert 语句将其删除以进行比较。如果您不需要这些值（3 个字节与 8 个字节相比），它也会消耗额外的空间。

我认为这类似于拥有一个 id 作为 bigint 而不是 tinyint 之类的状态代码表（取决于您计划拥有多少状态代码）。

这只是您使用数据的目的，如果您认为很有可能需要该数据，则使用日期时间，否则使用日期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T14:40:14.210

把日期和时间分开没什么好说的，

最好将日期和时间保存在同一列中，

在这里，他们讨论了相同的问题，请检查： [are-there-any-good-reasons-for-keeping-date-and-time-in-separate-columns](https://dba.stackexchange.com/questions/13840/are-there-any-good-reasons-for-keeping-date-and-time-in-separate-columns)

您也可以通过查询分别获取日期和时间

```
 SELECT 
    CONVERT(VARCHAR(10),GETDATE(),111) as DatePart,
    convert(varchar(15), getdate(), 108) TimePart 
```

# c++ - 关于将文本文件转换为二进制文件 c++

> ID：15502230
> 
> 赞同：0
> 
> 时间：2013-03-19T14:28:54.727
> 
> 标签：c++, binary

我整晚都在尝试获取一个简单的程序来读取文本文件，然后将其复制/写回二进制格式。

我的代码遍历文本文档，获取数据，将其放入缓冲区并将其写回。哎呀，我什至硬编码了我想用二进制写出的数据。

我用了fstream，ofstream，例如：fp1.open("student.dat",ios::binary);

并在几个不同的网站上阅读，例如： [http ://www.functionx.com/cpp/articles/serialization.htm](http://www.functionx.com/cpp/articles/serialization.htm)

[http://www.cppforschool.com/tutorial/files2.html](http://www.cppforschool.com/tutorial/files2.html)

我有工作代码，但是当我在 Notepad++ 中打开 .bin 文件时，我看到我的文本数据仍然看起来像文本，并没有真正“转换”为任何十六进制格式或任何其他格式。数字是，我仔细检查了它们是否准确，你知道，一个小网站，你可以在其中输入数字并吐出十六进制。

我厌倦了为什么我的文本没有转换，所以我销毁了所有代码并试图重新开始。*因此缺乏例子”

所以，最后我的问题是，为什么文本没有以任何方式改变，这对于二进制文件和使用这种方法是否正常？我什至使用了预制的编码示例，结果都是一样的。我只是希望它看起来像 1 和 0，而实际上并非如此，而且一切都在正常工作吗？

我的主要项目是将 .OBJ 文件转换为二进制数据，但我真的应该如何看待这个？这个二进制文件应该是什么样子？

任何建议将不胜感激！！！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:16:00.870

我只是使用字符和字符串，并没有看到区别。一旦我开始使用其他数据类型，很明显发生了变化。我知道 .OBJ 和 .txt 是二进制文件类型，我只是预计会有更大的变化。我使用了 cplusplus.com 并查看了我需要了解的更多内容。谢谢你试图帮助我猜！

# objective-c - 在 ObjC 中获取 shell 命令的输出

> ID：15502234
> 
> 赞同：0
> 
> 时间：2013-03-19T14:29:11.610
> 
> 标签：objective-c, shell, command, nstask

我已经阅读了使用 NSTask 执行此操作的解决方案：它们看起来都非常长......所以我设法使用这段代码（它同时获得标准输出和标准错误）做了完全相同的事情：

```
NSTask *task = [NSTask new];
[task setLaunchPath:@"/bin/sh"];
[task setArguments:@[ @"-c", @"aCommand"]];
NSString *stringToRemove = [task description];
[task launch];
NSString *output = [[task description] stringByReplacingOccurrencesOfString:stringToRemove withString:@""]; 
```

使用此解决方案有什么缺点吗？有没有更短的方法来过滤输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:53:26.343

> 使用此解决方案有什么缺点吗？有没有更短的方法来过滤输出？

是的，很多缺点。您依赖的实现细节`description`会神奇地返回任务的命令行和输出。文档没有声明，`description`除了调试/日志记录之外也没有真正可以接受的使用。

即该代码仅在方便时起作用。

但是该代码并没有真正起作用。如果您要运行的命令永远不会退出或需要一段时间才能运行或产生大量输出，那么该代码可能实际上根本没有获取任何输出或产生截断的输出。

`NSTask`使用的示例往往有点冗长，这是有原因的。管理进程之间的 I/O 实际上非常困难，需要考虑许多不同的选项。

# java - Android 应用程序未从 servlet 接收数据

> ID：15502237
> 
> 赞同：1
> 
> 时间：2013-03-19T14:29:26.080
> 
> 标签：java, android, servlets

该项目在数据库中保存了一个数字（433），通过 servlet 访问该数字，然后应将其发送到 Android 应用程序。在我添加 AsyncTask 之前，应用程序有时会从 servlet 中检索数据（应该是 433），有时则不会。单击主页按钮后，应该会出现 mainActivity 屏幕并显示数据。我添加了 AsyncTask 希望它能够始终如一地工作，但现在我得到的只是文本“Light Data=”但没有数据（应该说“Light Data=433）。servlet 连接到数据库很好，所以我知道问题出在应用程序。我非常感谢与我的项目相关的代码，谢谢。

主页：

```
package com.example.clearlight;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class HomePage extends Activity {

    private Button ScheduleBtn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.homepage);

         ScheduleBtn = (Button) findViewById(R.id.home_btn);

        ScheduleBtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent myIntent = new Intent(HomePage.this, MainActivity.class);
                HomePage.this.startActivity(myIntent);

            }
        });
    }   

} 
```

主要活动：

```
package com.example.clearlight;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.widget.TextView;
import android.widget.Toast;

import java.net.URL;

import org.apache.http.client.ResponseHandler;

import org.apache.http.client.methods.HttpGet;

import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

import android.os.StrictMode;
import android.util.Log;

public class MainActivity extends Activity {

    TextView txt;

    @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

        setContentView(R.layout.relative);

        class LongOperation extends AsyncTask<String, Void, String> {

            @Override
            protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            String result=null;
            URL url = null;

            DefaultHttpClient httpclient = null;

            try {

            String registrationUrl = "http://10.0.2.2/SensorInfo/GetLightData?sensor=light";
            url = new URL(registrationUrl);

            HttpGet getRequest = new HttpGet(registrationUrl);
            ResponseHandler<String> handler = new BasicResponseHandler();
            httpclient = new DefaultHttpClient();
            // request data from server
            result = httpclient.execute(getRequest, handler);
            Log.d("MyApp", "Data from server is "+ result);
             }
            catch (Exception ex) {Log.e("error",ex.toString());
            ex.printStackTrace();
              }
            return result;
            }

            @Override
            protected void onPostExecute(String result)
            {              
              TextView text1 = (TextView)MainActivity.this.findViewById(R.id.text);

            //Sets the new text to TextView (runtime click event)//*******
            text1.setText("Light Data= " + result);

            Toast.makeText(MainActivity.this, "Light Data:" + result, Toast.LENGTH_SHORT).show(); //MESSAGE BOX

            }

        }

 }
} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.clearlight"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.clearlight.MainActivity"
            android:label="@string/app_name" >

        </activity>
         <activity
            android:name="com.example.clearlight.HomePage"
            android:label="@string/homepage" 
            android:parentActivityName="com.example.clearlight.MainActivity" >

            <!-- Moved the intent filter to HomePage -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.clearlight.MainActivity" />
        </activity>
    </application>

</manifest> 
```

日志猫：

> 03-20 01:08:20.433：D/Launcher.Model(418)：在配置更改时重新加载应用程序。curr_mcc:310 prevmcc:0 03-20 01:08:20.473：E/StrictMode(401)：在附加的堆栈跟踪中获取了资源，但从未释放。有关避免资源泄漏的信息，请参阅 java.io.Closeable。03-20 01:08:20.473：E/StrictMode（401）：java.lang.Throwable：未调用显式终止方法“关闭”03-20 01：08：20.473：E/StrictMode（401）：在 dalvik.system .CloseGuard.open(CloseGuard.java:184) 03-20 01:08:20.473: E/StrictMode(401): 在 android.database.CursorWindow.(CursorWindow.java:137) 03-20 01:08:20.473: E/StrictMode(401): 在 android.database.CursorWindow.(CursorWindow.java:41) 03-20 01:08:20.473: E/StrictMode(401): 在 android.database.CursorWindow$1.createFromParcel(CursorWindow.java :681) 03-20 01:08:20.473: E/StrictMode(401): 在 android.database。E/StrictMode(401): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) 03-20 01:08:20.473: E/StrictMode(401): 在 java.lang.Thread.run (Thread.java:856) 03-20 01:08:20.484: D/Launcher.Model(418): 为 info=ShortcutInfo(title=Settingsintent=Intent { act=android.intent.action.MAIN 保存图标位图cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.settings/.Settings }id=6 type=0 container=-100 screen=3 cellX=2 cellY=3 spanX=1 spanY=1 isGesture=false dropPos=null) 03-20 01:08:20.534：E/StrictMode(401)：在附加的堆栈跟踪中获取了资源，但从未释放。有关避免资源泄漏的信息，请参阅 java.io.Closeable。03-20 01:08:20.534：E/StrictMode（401）：java.lang.Throwable：未调用显式终止方法“关闭”03-20 01：08：20.534：E/StrictMode（401）：08：23.623：D/dalvikvm（637）：DexOpt：加载 310 毫秒，验证 + 选择 1126 毫秒，788740 字节 03-20 01：08：23.833：D/EmailProvider（570）：来自数据库帐户：0 03-20 01:08： 23.844: D/EmailProvider(570): 结束 toDatabase 交易；copyCount = 0 03-20 01:08:23.873: D/EmailProvider(570): 结束 fromDatabase 事务；copyCount = 0 03-20 01:08:24.653：I/Email(570)：一次性初始化：完成。03-20 01:08:24.964: D/dalvikvm(163): GC_CONCURRENT 释放 452K, 47% 释放 10034K/18887K, 暂停 33ms+15ms, 总共 129ms 03-20 01:08:24.964: D/PackageManager(163): /data/app/com.example.clearlight-1.apk 03-20 01:08:25.804 中安装的新包：I/ActivityManager(163)：强制停止包 com.example.clearlight uid=10037 03-20 01： 08：25.954：W/ResourceType（418）：尝试检索无效或循环的包 0x7f0d0017。03-20 01:08:25.954: W/ResourceType(418)：尝试检索无效或循环的包 0x7f0d0017。03-20 01:08:25.954: W/ResourceType(418): 尝试检索无效或循环的包 0x7f0d0017。03-20 01:08:25.954: W/ResourceType(418): 尝试检索无效或循环的包 0x7f0d0017。03-20 01:08:25.954: W/ResourceType(418): 尝试检索无效或循环的包 0x7f0d0017。03-20 01:08:26.294: D/AlertService(401): 0 Action = android.intent.action.PROVIDER_CHANGED 03-20 01:08:26.294: D/AlertService(401): 开始 updateAlertNotification 03-20 01:08 :26.424: D/dalvikvm(163): WAIT_FOR_CONCURRENT_GC 阻塞 0ms 03-20 01:08:26.554: I/AccountTypeManager(501): 为 1 个帐户类型加载元数据，0 个帐户在 78ms(wall) 5ms(cpu) 03 -20 01:08:26.604：I/Choreographer(418)：跳过 1623 帧！应用程序可能在其主线程上做了太多工作。03-20 01:08:26.735: D/PackageManager(163): generateServicesMap(android.accounts.AccountAuthenticator): 2 个服务不变 03-20 01:08:26.754: I/InputReader(163): 重新配置输入设备。更改 = 0x00000010 03-20 01:08:26.764: D/PackageManager(163): generateServicesMap(android.content.SyncAdapter): 4 个服务未更改 03-20 01:08:26.764: D/BackupManagerService(163): 收到广播意图{ act=android.intent.action.PACKAGE_ADDED dat=package:com.example.clearlight flg=0x8000010（有附加功能）} 03-20 01:08:26.984: D/gralloc_goldfish(418): 没有检测到 GPU 仿真的模拟器。03-20 01:08:26.994：V/BackupManagerService(163)：addPackageParticipantsLocked：#1 03-20 01:08:27.124：W/InputMethodManagerService(163)：在系统 IME 中找不到子类型：com.android.inputmethod。WAIT_FOR_CONCURRENT_GC 阻塞 511 毫秒 03-20 01:08:27.814: D/dalvikvm(163): WAIT_FOR_CONCURRENT_GC 阻塞 444 毫秒 03-20 01:08:27.824: D/dalvikvm(163): WAIT_FOR_CONCURRENT_GC 阻塞 444 毫秒 01:80 27.82 D/dalvikvm(163): WAIT_FOR_CONCURRENT_GC 阻塞 413ms 03-20 01:08:27.834: D/dalvikvm(163): WAIT_FOR_CONCURRENT_GC 阻塞 372ms 03-20 01:08:27.834: D/dalvikvm(163): WAIT_FOR_03-ms_阻塞20 01:08:27.834: D/dalvikvm(163): WAIT_FOR_CONCURRENT_GC 阻塞 369ms 03-20 01:08:27.844: D/dalvikvm(163): WAIT_FOR_CONCURRENT_GC 阻塞 371ms 03-20 01:08:27.864: D/dalvikvm( ): WAIT_FOR_CONCURRENT_GC 阻塞 369ms 03-20 01:08:27.844: D/dalvikvm(163): WAIT_FOR_CONCURRENT_GC 阻塞 327ms 03-20 01:08:27.844: D/dalvikvm(163): WAIT_FOR_CONCURRENT_GC 0 阻塞 324ms :-03 27.944: D/ExchangeService(587): !!! EAS ExchangeService, 13% 免费 19091K/21895K，暂停 20ms+19ms，总计 126ms 03-20 01:08:30.024: D/dalvikvm(277): WAIT_FOR_CONCURRENT_GC 阻塞 107ms 03-20 01:08:30.504: D/AndroidRuntime(250): 关闭down VM 03-20 01:08:30.524: D/dalvikvm(250): GC_CONCURRENT freed 97K, 78% free 453K/2048K, paused 1ms+2ms, total 15ms 03-20 01:08:30.524: D/jdwp(250 ): 得到唤醒信号，退出选择 03-20 01:08:30.524: D/dalvikvm(250): 调试器已分离；对象注册表有 1 个条目 03-20 01:08:30.534：I/AndroidRuntime(250)：注意：线程“Binder_3”的附加失败 03-20 01:08:30.794：I/InputReader(163)：重新配置输入设备。更改 = 0x00000010 03-20 01:08:30.844: D/PackageManager(163): generateServicesMap(android.accounts.AccountAuthenticator): 2 服务未更改 03-20 01:08:30.864: I/InputReader(163): 重新配置输入设备. 尝试加载 lib libjavacore.so 0x0 03-20 01:08:31.664：D/dalvikvm(668)：添加了共享库 libjavacore.so 0x0 03-20 01:08:31.734：D/dalvikvm(668)：尝试加载lib libnativehelper.so 0x0 03-20 01:08:31.734：D/dalvikvm(668)：添加共享库 libnativehelper.so 0x0 03-20 01:08:31.904：D/dalvikvm(163)：GC_CONCURRENT 释放 404K，48% free 10005K/18887K, paused 116ms+20ms, total 388ms 03-20 01:08:32.254: D/dalvikvm(501): GC_CONCURRENT freed 203K, 4% free 8205K/8519K, paused 98ms+21ms, total 963ms 03-20 01 :08:32.564: D/AlertService(401): 没有触发或预定警报 03-20 01:08:32.834: D/dalvikvm(469): GC_CONCURRENT 释放 232K，4% 释放 8181K/8519K，暂停 90ms+7ms，总计540 毫秒 03-20 01:08:33.074：I/Choreographer（418）：跳过 1563 帧！应用程序可能在其主线程上做了太多工作。03-20 01:08:33.094: D/AndroidRuntime(668): D / dalvikvm（682）：未启用CheckJNI（已启用）03-20 01：08：33.635：I / ActivityManager（163）：为活动com.example.clearlight / .HomePage启动proc com.example.clearlight： pid=682 uid=10037 gids={3003, 1028} 03-20 01:08:34.093: E/Trace(682): 打开跟踪文件时出错：没有这样的文件或目录 (2) 03-20 01:08:34.314 : I/ARMAssembler(35): 生成扫描线__00000077:03515104_00009001_00000000 [131 ipp] (153 ins) at [0x4124a8d0:0x4124ab34] in 736260 ns 03-20 01:08:34.754: D/gralloc_emulator 没有检测到 GPUgoldfish 682 . 03-20 01:08:34.824: I/ActivityManager(163): 显示 com.example.clearlight/.HomePage: +1s253ms 03-20 01:08:35.484: I/ContactDirectoryManager(375): 在 7915ms 内发现 0 个联系人目录03-20 01:08:35.484: I/Launcher(418): setLoadOnResume 03-20 01:08:35.564: I/Launcher(418): setLoadOnResume 03-20 01: 应用程序可能在其主线程上做了太多工作。03-20 01:08:37.373: E/WVMExtractor(38): 未能打开 libwvm.so 03-20 01:08:38.434: I/Launcher(418): setLoadOnResume 03-20 01:08:38.454: I/ Launcher(418): setLoadOnResume 03-20 01:08:38.543: E/WVMExtractor(38): 未能打开 libwvm.so 03-20 01:08:38.603: E/MetadataRetrieverClient(38): 无法提取专辑封面03-20 01:08:39.003: D/dalvikvm(375): GC_CONCURRENT 释放 387K, 6% 释放 8414K/8903K, 暂停 31ms+5ms, 总共 110ms 03-20 01:08:39.263: I/ContactsDatabaseHelper(375):语言环境更改在 3621 毫秒内完成 03-20 01:08:39.263：I/ContactsDatabaseHelper(375)：切换到语言环境 en_US 03-20 01:08:39.763：I/ContactsDatabaseHelper(375)：语言环境更改在 501 毫秒内完成 03-20 01 :08:39.773: I/ContactsProvider(375): 升级聚合算法 03-20 01:08:39.803:

# linux - SO_BINDTODEVICE 虚拟接口失败

> ID：15502242
> 
> 赞同：2
> 
> 时间：2013-03-19T14:29:47.093
> 
> 标签：linux, udp, setsockopt

我正在尝试运行绑定在接口上以设置多播的 PTPDV2（精确计时协议）服务器。

我有以下虚拟接口

```
eth1:0    Link encap:Ethernet  HWaddr 00:00:50:A0:42:BD  
          inet addr:10.2.0.17  Bcast:10.2.255.255  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          Base address:0xa000 
```

现在，绑定到普通接口没有任何问题，但是对于任何虚拟接口，我都会失败。

```
 (ptpd debug1)   09:28:12.995509  (init)  netInit
 (ptpd debug1)   09:28:12.996254  (init)  Local IP address used : 10.2.0.17 
 (ptpd error)    09:28:12.997099  (init)  failed to call SO_BINDTODEVICE on the interface (strerror: No such device) 
```

我需要一些指示来克服这个问题。任何帮助在这里表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:48:30.853

我找到了解决这个问题的方法。但这可能不是完美的解决方案。我仍然愿意接受建议。

我观察到套接字绑定是成功的，所以套接字确实获得了 eth1:0 的 IP 地址。但是 SO_BINDTODEVICE 失败了，因为这是一个虚拟接口。

所以我决定在真正的接口 eth1 上调用 SO_BINDTODEVICE，因为 eth1:0 和 eth1 共享相同的 MAC。

这一点，我不再被阻止，因为响应对我来说通常是单播的。但是，如果有人也希望接收多播支持，这可能无法完美运行。

公开征求意见

# asp.net-web-api - 使用 ASP.NET Web API 输出 Atom 提要

> ID：15502247
> 
> 赞同：0
> 
> 时间：2013-03-19T14:30:00.867
> 
> 标签：asp.net-web-api

在我的 ASP.NET Web API 项目中，我有一些标准的 Edit API 调用，其中 XML 或 JSON 输出或调用者想要的任何东西对我来说都可以。但有些调用应该返回 ATOM 提要。

现在我发现我可以在这篇文章中通过自定义 MediaTypeFormatter 实现 ATOM 或 RSS 输出：[如何使用 ASP.NET Web API 生成 ATOM 和 RSS2 提要？](https://stackoverflow.com/questions/12750905/how-to-generate-atom-and-rss2-feeds-with-asp-net-web-api)

但这实际上并不是我想要的，因为它仍然取决于调用者通过 HTTP Accept-header 请求这样的输出。我想在这里专门返回 ATOM，没有 JSON，没有（序列化对象为）XML。

是否可以使用 Web API 做到这一点？还是为这些调用使用标准的 Web 控制器并仅将所有其他 API 调用实现为 ApiController 会更好吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T17:52:31.600

您也可以使用 Web API 来实现。示例操作如下。

```
public HttpResponseMessage GetFeed()
{
    return Request.CreateResponse(HttpStatusCode.OK, feedInstance, "application/atom+xml");
}

 public HttpResponseMessage GetFeed()
 {
    return Request.CreateResponse(HttpStatusCode.OK, feedInstance, feedFormatter, "application/atom+xml");
 } 
```

您可以使用其中任何一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:36:09.973

如果您想强制这种形式的输出，我会为此添加一个单独的 ASP 处理程序页面 (.ashx)，因为 API 通常应该返回用户请求的内容。

# maven - 确定（屏蔽版本）maven 依赖项的来源

> ID：15502249
> 
> 赞同：0
> 
> 时间：2013-03-19T14:30:04.443
> 
> 标签：maven, dependencies

我的项目中有两个依赖项依赖于不同版本的 jar 的情况。仅显示依赖关系树仅显示较新的版本及其使用位置，因此我最终通过 POM 文件（我知道它可能在哪里）来查找源。

我的问题：是否可以获得包含这些已删除依赖项的依赖关系树（显示它们被删除的原因）。我似乎记得 m2eclipse 插件可以做到，但我更喜欢命令行工具（因为我没有使用 eclipse）。

编辑：具体来说，我已经尝试过依赖树，包括使用完整的调试输出（-X）运行。据我所知，它没有显示何时掩盖这些依赖关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:39:47.567

只需尝试[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/)使用树目标来查看依赖树。但通过 m2e 插件使用 Eclipse 来解决此类问题可能是个好主意。

# android - 在相机拍摄过程中如何锁定相机屏幕方向？

> ID：15502256
> 
> 赞同：5
> 
> 时间：2013-03-19T14:30:13.577
> 
> 标签：android, screen-orientation, android-4.2-jelly-bean, cameracapturetask

我们的相机拍照大约需要 10-15 秒（由于自定义相机硬件）。我需要的是在这个 10-15 秒的过程中，我不希望用户改变屏幕方向。

我已将 takepicture 调用放在异步任务的 doInBackground 中。

在我放置的 onPreExecute() 方法中

`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);`

在 onPostExecute 我放置了

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

此解决方案对我不起作用，并导致相机和设备崩溃，我不得不重新启动设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:11:07.783

您是否尝试阻止 AndroidManifest 的方向？通过在您的相机活动中添加以下行

```
<activity android:label="@string/activity_name" android:screenOrientation="portrait" /> 
```

或者

```
<activity android:label="@string/activity_name" android:screenOrientation="landscape" /> 
```

# javascript - kinecticjs - 如何更改 Sprite frameRate

> ID：15502260
> 
> 赞同：0
> 
> 时间：2013-03-19T14:30:30.537
> 
> 标签：javascript, kineticjs

我有一个 Kinetic.Sprite obj：

```
//create troll obj:
var trollImageObj = new Image();
trollImageObj.onload = function () {
    var troll = new Kinetic.Sprite({
        x: 250,
        y: 40,
        image: trollImageObj,
        animation: 'solid_down',
        animations: animations,
        frameRate: 2
    });
.
.
. 
```

每次按下箭头键时，我都会`troll`使用`troll.setAnimation(newAnimation);`（每个箭头键按下不同的动画）更改动画。

我也想换`frameRate`，可是找不到方法？（没有“setFrameRate”）有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T19:54:18.987

确实有一种方法称为`setFrameRate`（参见此处[http://kineticjs.com/docs/Kinetic.Sprite.html](http://kineticjs.com/docs/Kinetic.Sprite.html)）。

诀窍是停止精灵，设置新的帧速率和动画，然后再次启动精灵。使用您提供的代码，必须添加：

```
 troll.stop();
   troll.setAnimation('newAnimation');
   troll.setFrameRate(10); // 10 as an example
   troll.start(); 
```

必须在`onload`回调中添加此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:52:52.173

well, you can try just accessing the {config} attributes directly:

```
 trollImageObj.attrs.frameRate = some number; 
```

but I don't think that will work; I think the object animation is not modifiable after you create it.

The thing to do would be either to create separate sprites for your different animations, or to add/remove animation frames to your animation.

# r - ggplot aes_string 与交互

> ID：15502263
> 
> 赞同：8
> 
> 时间：2013-03-19T14:30:39.630
> 
> 标签：r, ggplot2, parameter-passing

使用 aes_string 可以很容易地构造函数来获取参数进行绘图：

```
p <- ggplot(mtcars, aes_string(x="mpg", y="wt", group=interaction("cyl","gear"))) + 
     geom_point() 
```

现在编写函数

```
make_plot <- function(x,y, interact) {
    p <- ggplot(mtcars, aes_string(x=x, y=y, group=interact)) + 
         geom_point()
} 
```

并调用该函数

```
make_plot("mpg","wt",c("cyl","gear")) 
```

但这里不使用交互，即不解释交互。我不想为交互使用单独的变量，因为相同的函数可以用于其他绘图。我应该如何制作交互变量以使其被 ggplot 接受和理解？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-19T17:51:19.473

根据[this](https://stackoverflow.com/a/19415464) answer这应该有效（不引用colnames）：

```
p <- ggplot(mtcars, aes_string(x=x, y=y, group=paste0("interaction(", paste0(interact, 
    collapse =  ", "), ")"))) + geom_point() 
```

# android - 传递 Serializable 时出现 ClassNotFoundException

> ID：15502265
> 
> 赞同：1
> 
> 时间：2013-03-19T14:30:45.023
> 
> 标签：android, serialization, bundle

我是一名 Android 开发人员，我正在`Serializable`尝试`Activity`使用`Bundle`. 但是，我得到以下 -`Parcelable encountered ClassNotFoundException reading a Serializable object`作为错误。

这是什么原因，我该如何解决？

下面是代码片段：

```
Bundle previousData = new Bundle();
previousData.putSerializable("GetVehicleInfo_AllTrims", trimsObj);// trimObj is a serialized object
Intent detailsIntent = new Intent(androidScrolbleTabbar.TABBAR_PUSHVIEW);
detailsIntent.putExtras(previousData);
detailsIntent.putExtra("ActivityIdentifier", ManualScreenNav2.viewIdentifier);
detailsIntent.putExtra("className", ManualScreenNav2.class.getName());
sendBroadcast(detailsIntent); 
```

以下是完整的堆栈跟踪：

```
03-19 15:39:02.549: E/AndroidRuntime(27084): FATAL EXCEPTION: main
03-19 15:39:02.549: E/AndroidRuntime(27084): java.lang.RuntimeException: Error receiving broadcast Intent { act=com.mobyfactory.pushview (has extras) } in com.adplotmanagement.androidScrolbleTabbar$PUSHViewBroadcastReceiver@461bc340
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.app.ActivityThread$PackageInfo$ReceiverDispatcher$Args.run(ActivityThread.java:942)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.os.Handler.handleCallback(Handler.java:587)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.os.Looper.loop(Looper.java:143)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.app.ActivityThread.main(ActivityThread.java:4701)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.lang.reflect.Method.invokeNative(Native Method)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.lang.reflect.Method.invoke(Method.java:521)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at dalvik.system.NativeStart.main(Native Method)
03-19 15:39:02.549: E/AndroidRuntime(27084): Caused by: java.lang.RuntimeException: Parcelable encounteredClassNotFoundException reading a Serializable object (name = com.halcyon.ui.redbumper.entities.RBGetVehicleInfoByVin_AllTrims)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.os.Parcel.readSerializable(Parcel.java:1951)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.os.Parcel.readValue(Parcel.java:1822)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.os.Parcel.readMapInternal(Parcel.java:2008)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.os.Bundle.unparcel(Bundle.java:208)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.os.Bundle.getString(Bundle.java:1034)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at com.adplotmanagement.androidScrolbleTabbar$PUSHViewBroadcastReceiver.onReceive(androidScrolbleTabbar.java:560)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.app.ActivityThread$PackageInfo$ReceiverDispatcher$Args.run(ActivityThread.java:910)
03-19 15:39:02.549: E/AndroidRuntime(27084):    ... 9 more
03-19 15:39:02.549: E/AndroidRuntime(27084): Caused by: java.lang.ClassNotFoundException: com.halcyon.ui.redbumper.entities.RBGetVehicleInfoByVin_AllTrims
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.lang.Class.classForName(Native Method)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.lang.Class.forName(Class.java:235)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:2590)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.io.ObjectInputStream.readNewClassDesc(ObjectInputStream.java:1846)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:826)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:2066)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:929)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2285)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2240)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at android.os.Parcel.readSerializable(Parcel.java:1945)
03-19 15:39:02.549: E/AndroidRuntime(27084):    ... 15 more
03-19 15:39:02.549: E/AndroidRuntime(27084): Caused by: java.lang.NoClassDefFoundError: com.halcyon.ui.redbumper.entities.RBGetVehicleInfoByVin_AllTrims
03-19 15:39:02.549: E/AndroidRuntime(27084):    ... 25 more
03-19 15:39:02.549: E/AndroidRuntime(27084): Caused by: java.lang.ClassNotFoundException: com.halcyon.ui.redbumper.entities.RBGetVehicleInfoByVin_AllTrims in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.adplotmanagement-1.apk]
03-19 15:39:02.549: E/AndroidRuntime(27084):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
03-19 15:39:02.549: E/AndroidRuntime(27084):    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
03-19 15:39:02.549: E/AndroidRuntime(27084):    ... 25 more 
```

错过了再补充一点，我有两个功能相同的应用程序，每个应用程序都有相同的类`GetVehicleInfo_AllTrims`，它是一个 pojo 类。当我在前台运行一个应用程序时，位于后台的另一个应用程序因上述错误而崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:43:09.513

嗨找到问题的根本原因并解决它。

在两个应用程序中，我们使用相同的广播接收器及其意图过滤器。由于这个问题，运行时无法为应用找到合适的接收器。

我以不同方式修改了两个应用程序的意图过滤器，现在工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:00:11.477

```
java.lang.ClassNotFoundException: com.halcyon.ui.redbumper.entities.RBGetVehicleInfoByVin_AllTrims 
```

> 这是什么原因

`com.halcyon.ui.redbumper.entities.RBGetVehicleInfoByVin_AllTrims`其原因是找不到该类的异常。

> 我该如何解决？

使该类在应用程序的 CLASSPATH 上可用。

# ruby - 如何使用 Ruby 解析给定字符串的正确键和值

> ID：15502275
> 
> 赞同：0
> 
> 时间：2013-03-19T14:31:06.963
> 
> 标签：ruby, regex, parsing

我有一个清单：

```
key1:this is an{example{of an example}I like} key2:this is another example key3: this is secondary{example{of an example}} 
```

我需要分离键并按差异比较键的值，所以我想获得的结果是：

```
{
  :key1 => 'this is an [example[of an example]I like]',
  :key2 => 'this is another example',
  :key3 => 'this is secondary[example[of an example]]'
} 
```

Ruby 或 Regex 是否可以实现类似或类似的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:17:32.643

你去：

```
def parse_into_hash(s)
  keys = s.scan(/\w+:/.map{|k| k.chomp(":")}
  values = s.split(/\w+:/).select(&:present?)
  Hash[keys.zip values]
end 
```

这不是防弹的。如果值中有冒号或任何值是空字符串，它可能会失败，但它适用于您的示例，并且应该可以帮助您入门。如果需要，您可以使其更加健壮。

# jquery - 如何合理化jqueryui函数？

> ID：15502277
> 
> 赞同：0
> 
> 时间：2013-03-19T14:31:07.930
> 
> 标签：jquery, jquery-ui, function, syntax

我需要语法帮助，以便为使用一系列[jQueryui 滑块](http://jqueryui.com/slider/#default)设置输入字段的表单合理化 jQuery / jQueryui 函数。

该表单工作正常，但是我有两个更改侦听器函数，它们当前复制了一系列 jQuery 操作，我想将它们移到它们都调用的共享的第三个函数中。监听器函数是：

1.  如果表单的“汇率”输入（type="text"）发生变化，jquery .change() 会监听：`$("#ExchangeRate").change(function(){do a series of jQuery actions});`
2.  如果移动了任何滑块，jqueryUI slidestop 函数会监听：`$( ".slider" ).on( "slidestop", function( event, ui ) {do a series of jQuery actions}`

因此，我想将重复的一系列 jQuery 操作移动到自定义的 .updateResults() 函数中，以便侦听器函数简化为类似于`$("#ExchangeRate").change(function(){$('.results').updateResults();});`and的东西`$(".slider").on("slidestop",function( event, ui){$('.results').updateResults();});`。但是，到目前为止，我的尝试阻止了所有脚本的运行。

我对 jQueryui 很陌生，并且正在努力寻找有关调用 jQuery 操作和自定义调用函数的基本结构所需的语法的文档。谁能指导我到适当的文档、调用自定义 jQuery 函数的 jQuery 函数的工作示例或正确的搜索词？谢谢，基思..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:40:25.587

你的意思是什么？

```
var updateResults = function () {
    $('.results').css('border', 'solid red 3px');
};
$("#ExchangeRate").change(updateResults);
$(".slider").on("slidestop", updateResults); 
```

或者你想让 updateResults 成为一个 jQuery 插件吗？（也许是另一个问题）

# android - 使 onSensorChanged 不会减慢 UI

> ID：15502278
> 
> 赞同：1
> 
> 时间：2013-03-19T14:31:07.733
> 
> 标签：android, multithreading, android-asynctask

我的应用程序从加速度计获取数据，并且 UI 没有应有的响应速度。我想这是因为在 UI 线程中调用了 SensorEventListener。所以我尝试创建一个新线程，其中包含一个实现事件侦听器的内部类，并在线程中注册了加速度计。然而，代码是在 UI 线程中执行的。那么：如何让 onSensorChanged 不减慢 UI 速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:37:13.563

不要在回调中做很多事情。当您执行代码时，您无法获得另一个更新。

例如，当您在 onSensorChanged 中有一个 sleep(500) 时，您将不会收到即将到来的 500 mili sec 的新更新。

所以在 onSensorChanged 中启动一个新线程并在那里做你的事情。

# java - 在运行时获取 JSF 中所有托管 Bean 的列表

> ID：15502280
> 
> 赞同：3
> 
> 时间：2013-03-19T14:31:10.090
> 
> 标签：java, jakarta-ee, jsf-2

我想获取 JSF 应用程序中所有托管 bean 的列表。在 Spring 中，我可以做一些类似[context.getBeansOfType()](https://stackoverflow.com/a/3228823/80286)的事情。JSF中有对应的方法吗？

我有许多`@ManagedProperty`实现接口的bean。我想获取这些适配器的列表并遍历它们，而不是显式调用每个 bean 以保持代码干净。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:03:27.823

您可以使用包中的`BeanManager`类执行此操作`com.sun.faces.mgbean`：

```
ApplicationAssociate application = ApplicationAssociate.getInstance(FacesContext.getCurrentInstance().getExternalContext());
BeanManager beanManager = application.getBeanManager();
Map<String, BeanBuilder> beanMap = beanManager.getRegisteredBeans();
Set<Entry<String, BeanBuilder>>beanEntries = beanMap.entrySet();

for (Entry<String, BeanBuilder> bean: beanEntries) {
  String beanName = bean.getKey();
  if (beanManager.isManaged(beanName)) {
    BeanBuilder builder = bean.getValue();
    System.out.println("Bean name: " + beanName);
    System.out.println("Bean class: " + builder.getBeanClass());
    System.out.println("Bean scope: " + builder.getScope());
  }
} 
```

**注意：**这与 Mojarra JSF 实现紧密耦合，不适用于其他实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-10T10:53:40.240

如果您的 bean 已经在会话中，您可以尝试以下代码：

```
Map<String, Object> sessionMap = FacesContext.getCurrentInstance().getExternalContext().getSessionMap();
for (Entry<String, Object> beanEntry : sessionMap.entrySet()) {
    String beanName = beanEntry.getKey();
    Object bean = beanEntry.getValue();
    //TODO do something with bean, i.e. check if it's implements your interface and store into list
} 
```

通过说 bean 在会话中，我的意思是 bean 已经创建并在同一会话中的另一个对象中使用。

# php - 在 html 下拉输入中显示 php 数组

> ID：15502282
> 
> 赞同：0
> 
> 时间：2013-03-19T14:31:13.573
> 
> 标签：php

我创建了一系列网页，其中一个在 sql 数据库中创建用户，另一个页面查找所有这些用户，然后需要在下拉列表中显示它们以供另一个数据库输入。在调用 php 文件并使用 echo 打印出数组时，它工作正常，但是当我将它放在我的 html 文件中时，下拉菜单只显示“$username_array[] =”\“”.$row['Username']。 ""\" 一旦我相信它与转义引号有关但无法弄清楚任何帮助将不胜感激！

这是 html 文件中保存的代码

```
<?php
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$db = 'fid';

echo "<label class=\"input\" for=\"investigator\" type=\"input\">Investigator:<select id=\"investigator\" name=\"investigator\">"; 

$conn = mysql_connect($dbhost,$dbuser,$dbpass);
if (!$conn)
die('Could not connect: ' . mysql_error());

mysql_select_db($db);

$username_array = array();
$sql = mysql_query("SELECT `Username` FROM `user`");
while ($row = mysql_fetch_array($sql)){
//echo $username_array[] = "\"".$row['Username']."\"";
echo "<option value='null'>"$username_array[] = "\"".$row['Username'].""\"</option>";
}
echo "</label>";

mysql_close($conn)
?> 
```

我希望用户名数组在下拉列表中一个接一个地显示一个用户，但是目前只是回显选项值行而没有任何解释

更新

我现在已经把代码改成了这个

```
<?php
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$db = 'fid';

$conn = mysql_connect($dbhost,$dbuser,$dbpass);
if (!$conn)
die('Could not connect: ' . mysql_error());

mysql_select_db($db);

echo '<select id="investigator" name="investigator">';
$resource = mysql_query("SELECT `Username` FROM `user`");
if($resource && mysql_num_rows($resource)) {
    while ($row = mysql_fetch_assoc($resource)){
        echo '<option value="'.$row['Username'].'">'.$row['Username'].'</option>';
    }
}
echo '</select>';
mysql_close($conn)
?> 
```

但是 html 输出脚本而不是下拉列表和用户名

html输出

'; $resource = mysql_query("SELECT `Username`FROM `user`"); if($resource && mysql_num_rows($resource)) { while ($row = mysql_fetch_assoc($resource)){ echo ''; } } 回声''; mysql_close($conn) ?>

任何帮助都会得到帮助，我真的需要让它工作，因为它已经困扰了我好几天了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:35:45.857

This will do what you need

```
echo '<select id="investigator" name="investigator">';
$resource = mysql_query("SELECT `Username` FROM `user`");
if($resource && mysql_num_rows($resource)) {
    while ($row = mysql_fetch_assoc($resource)){
        echo '<option value="'.$row['Username'].'">'.$row['Username'].'</option>';
    }
}
echo '</select>'; 
```

BUT you should also move to mysqli or PDO as mysql_* is depreciated

I have changed $sql to $resource as it is not an SQL statement but a resource.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:35:41.170

I'd change your code to something similar to this:

```
echo "<select>";
while ($row = mysql_fetch_array($sql)) {
    echo "<option value=\"VALUE\">".$row['Username']."</option>";
}
echo "</select>"; 
```

# regex - git-svn 克隆文件夹的忽略路径正则表达式

> ID：15502284
> 
> 赞同：8
> 
> 时间：2013-03-19T14:31:20.590
> 
> 标签：regex, git, git-svn, ignore

我正在尝试执行 git-svn 克隆以将 SVN 中的所有文件导入 GIT。给出的命令是这样的；

```
git svn clone --stdlayout --ignore-paths='(/cache|/tmps|/file/conf/setting.xml)' --authors-file=../authors.txt file:///svnFolder/local-repos/PRG PRG.git 
```

上述克隆，但问题是它忽略了所有具有缓存和 tmps 的文件和文件夹。例如，它甚至会忽略这些

```
new/folder/cache
meta/files/sets/tmps.html 
```

谁能帮我设置正则表达式以在忽略路径中忽略根文件夹的缓存和 tmps 目录中的文件和子目录。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-31T14:35:09.823

您的忽略路径正则表达式过于笼统。提供的正则表达式在完整路径上运行。例如，如果您的存储库布局是：

```
svn_root/path/to/your_project 
```

然后有一个标准的主干、分支和标签布局，一组被评估的示例路径线可能是：

```
svn_root/path/to/your_project/trunk/new/folder/cache
svn_root/path/to/your_project/trunk/meta/files/sets/tmps.html
svn_root/path/to/your_project/trunk/file/conf/setting.xml
svn_root/path/to/your_project/trunk/cache/...
svn_root/path/to/your_project/trunk/tmps/... 
```

让我们首先分析您作为 ignore-paths 参数的一部分提供的正则表达式：

```
'(/cache|/tmps|/file/conf/setting.xml)' 
```

1.  周围的括号表示其中的表达式[应该是 capture](http://www.regular-expressions.info/named.html)。
2.  管道或[交替](http://www.regular-expressions.info/alternation.html)表示从几个可能的表达式中评估目标字符串上的每个表达式
3.  每个表达式都非常简单，但让我们分析一下：
    *   /缓存
        1.  查找文字字符“/”
        2.  查找文字字符“c”
        3.  查找文字字符“a”
        4.  查找文字字符“c”
        5.  查找文字字符“h”
        6.  查找文字字符“e”
    *   /tmps
        1.  查找文字字符“/”
        2.  查找文字字符“t”
        3.  查找文字字符“m”
        4.  查找文字字符“p”
        5.  查找文字字符“s”
    *   /file/conf/setting.xml
        1.  查找文字字符“/”
        2.  查找文字字符“f”
        3.  查找文字字符“i”
        4.  查找文字字符“l”
        5.  查找文字字符“e”
        6.  查找文字字符“/”
        7.  查找文字字符“c”
        8.  查找文字字符“o”
        9.  查找文字字符“n”
        10.  查找文字字符“f”
        11.  查找文字字符“/”
        12.  查找文字字符“s”
        13.  查找文字字符“e”
        14.  查找文字字符“t”
        15.  查找文字字符“t”
        16.  查找文字字符“i”
        17.  查找文字字符“n”
        18.  查找文字字符“g”
        19.  匹配（几乎）任何字符
        20.  查找文字字符“x”
        21.  查找文字字符“m”
        22.  查找文字字符“l”

分析您的正则表达式后，让我们用您的表达式浏览上面给出的示例路径：

要评估的字符串：

```
svn_root/path/to/your_project/trunk/new/folder/cache 
```

1.  遍历每个字符以查找文字“/”，然后是“c”等...直到找到与您的第一个子表达式“/cache”的完全匹配。此路径被忽略。

要评估的字符串：

```
svn_root/path/to/your_project/trunk/meta/files/sets/tmps.html 
```

1.  遍历每个字符以查找文字“/”，然后是“c”等...找不到匹配项
2.  遍历每个字符以查找文字“/”，然后是“t”等...直到找到与您的第二个子表达式“/tmps”的完全匹配。此路径被忽略。

要评估的字符串：

```
svn_root/path/to/your_project/trunk/file/conf/setting.xml 
```

1.  循环遍历每个字符并针对第一个子表达式进行评估。未找到匹配项
2.  循环遍历每个字符并针对第二个子表达式进行评估。未找到匹配项
3.  循环遍历每个字符并针对最后一个子表达式进行评估。找到匹配。此路径被忽略

从这里，您大概可以看到为什么以下两个也被忽略了。其中一个子表达式匹配每个路径的一部分：

```
svn_root/path/to/your_project/trunk/cache/...
svn_root/path/to/your_project/trunk/tmps/... 
```

有几种方法可以解决这个问题，但如果你只是试图忽略主干中的几个特定目录，你可以修改你的表达式如下：

```
'(trunk/cache|trunk/tmps|/file/conf/setting\.xml)' 
```

这实际上取决于您要做什么，要忽略哪些特定路径。如果您需要更多帮助，是否可以详细说明您的存储库的布局方式以及哪些目录将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:21:25.003

添加行首标记怎么样？

```
 ... --ignore-paths='^(/cache|/tmps|/file/conf/setting.xml)' ... 
```

# c# - 从 google chrome 当前选项卡获取当前 html

> ID：15502287
> 
> 赞同：4
> 
> 时间：2013-03-19T14:31:29.490
> 
> 标签：c#, vb.net, google-chrome, webkit

**我想要做什么：**
我想**从**谷歌浏览器获取当前标签的 html
**我不想做什么：**
获取当前标签的**url**，然后`webClient.DownloadString`用来获取 html。（我已经这样做了）

从谷歌浏览器而不是从当前的谷歌浏览器网址获取 html 对我来说非常重要。
我试过的：

```
WebKit.NET 
```

WebKit.NET 让我**可以像**谷歌浏览器一样导航到 url。
我想“ `connect`”进入当前的谷歌浏览器窗口，然后进入当前选项卡窗口，将当前选项卡文档插入到`WebKit.DOM.Document`.

在我使用的其他项目`SHDocVw.ShellWindows`（ShellWindows = 所有支持的窗口）上，SHDocVw 让我获取`internet explorer`.
例子：

```
 Dim shellWindows As New SHDocVw.ShellWindows
    For Each Ie As SHDocVw.InternetExplorer In shellWindows
            Dim htmlDoc As mshtml.HTMLDocument = Ie.Document
    Next 
```

SHDocVw`Internet Explorer` **仅**适用于.

如何在 chrome 选项卡之间浏览，然后将 html 插入字符串列表？
我怀疑答案在于`WebKit.Interop.dll`，但我对这个库没有经验。

我相信有人有这个问题的解决方案，
选项卡窗口的类名是`Chrome_RenderWidgetHostHWND`（通过使用 spy++），
我认为我无法从当前选项卡获取 html `Handle`，
但也许我可以将句柄转换为`WebKit.DOM.Document`- 但我更喜欢检查第一个选项。

以正确的方式和最好的方式制作项目对我来说非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T22:28:13.947

我认为您必须使用 WINAPI `GetWindow`。在那里您可以传递类名并获取当前窗口/进程的处理程序。我不直接知道这是否可行，但 Google Chrom 中的所有选项卡都在自己的线程中运行，所以我认为这是可能的。

```
Declare Function GetWindow Lib "user32.dll" Alias "GetWindow" ( ByVal hwnd As Long, ByVal wCmd  As Long) As Long
Declare Function SendMessage Lib "user32.dll" Alias "SendMessage" (ByVal hwnd As Integer, ByVal wMsg As Integer, ByVal wParam As Keys, ByVal lParam As Integer) As Long 
```

这就是您需要的功能。然后您可以使用第二个 WINAPI 向线程发送指令`SendMessage`并从侧面获取 HTML。我认为您必须在选项卡内获取 HTML 框架的类名。或者，也许您必须`GetWindow`再次调用以获取 HTML 框架，我不知道 Google Chrom 的结构，但我认为使用 spy++ 很容易获得类名。

# java - 在 Java 中将位打包到 longs 服务器/客户端事务中

> ID：15502288
> 
> 赞同：0
> 
> 时间：2013-03-19T14:31:31.853
> 
> 标签：java, networking, client, png, bit-packing

是否有库可以将位压缩为长整数？我正在尝试压缩通过网络发送的位。将这些位放入 png 文件并传输它会更有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:52:42.703

我假设您只是想压缩数据，而不是您需要“长”。java.util.zip 包包含使用 zip/gzip 压缩读取/写入压缩数据的类。

# sql - 如何从 windows 2000 服务器执行 DTSX 包

> ID：15502292
> 
> 赞同：0
> 
> 时间：2013-03-19T14:31:40.643
> 
> 标签：sql, windows, ssis, dts

我正在尝试使用 Windows 2000 服务器中的 DTSEXEC 命令执行 DTS 包。

我最终收到错误“DTEXEC 未被识别为内部或外部命令”

有没有办法完成这个任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:34:28.940

`DTEXEC.EXE`适用于 SSIS (SQL Server > 2000)。相反，请尝试`DTSRUN.exe`使用 DTS (SQL Server 2000)。

# android - 如何将 Navit 导入 Eclipse 并在自己的 android 项目中使用

> ID：15502293
> 
> 赞同：2
> 
> 时间：2013-03-19T14:31:43.637
> 
> 标签：android, eclipse, import, navigation

我想创建一个使用 3D 导航的自定义应用程序。我找到了 Navit 开源项目，它具有我需要的所有功能。[我从这里](https://navit.svn.sourceforge.net/svnroot/navit/trunk/navit/)找到的存储库中检查了最后一个 Navit 源代码。下载项目后，我想将其导入 Eclipse 工作区，如此[处](http://wiki.navit-project.org/index.php/Eclipse)所述。但是我遇到了一个问题，因为当我导航到 Android 文件夹时，没有找到项目，所以无法完成导入。我尝试按照手册中的说明导入为“现有代码中的新 android 项目”。我什至尝试手动创建项目，但没有成功。我错过了什么？

感谢你的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T12:22:25.063

*   开始一个新项目，选择 import SVN
    svn co svn://svn.repository.with.navi.code.you.want.to.import
*   选择 C/C++ 项目
*   现在选择 GNU Autotools（如果工具链下没有任何内容，则通过您的 os packagemanager 安装 autotools(autoconf,automake/gettext)）
*   打开一个终端，切换到您的工作区 navit 文件夹并调用`cmake ./` 您现在拥有与您的本地设置匹配的 makefile
*   在 Eclipse 中，选择“build all”，你应该得到一个二进制文件
*   作为应用程序运行，您的本地构建应该开始

# oauth - 如何为 Titanium.Yahoo.YQL 设置参数？

> ID：15502298
> 
> 赞同：0
> 
> 时间：2013-03-19T14:31:55.540
> 
> 标签：oauth, titanium-mobile, yql, yahoo-oauth

我无论如何都找不到将参数放入 YQL 以获取私人数据（如联系人列表等）。我在任何地方都找不到它的文档..

我知道我们可以在没有参数的情况下获取公共数据，但我问的是需要参数的私有数据，比如`oauth_token`和`oauth_signature`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:55:14.703

做我自己的选择。它现在获取 Yahoo、MSN、Google 联系人。

[**`OAuth_social`**](https://github.com/Nezam/oauth_social)

# c++ - C++ 从已实现的虚拟类调用非虚拟方法

> ID：15502302
> 
> 赞同：0
> 
> 时间：2013-03-19T14:32:03.243
> 
> 标签：c++, methods, interface, virtual

我有一个接口，它也有一个普通的方法，那我怎么称呼它呢？

```
class Animal{
   virtual void virtualFunction()=0;
}

class Cow : Animal{
   virtual void virtualFunction(){}
   void nonVirtualFunction(){}
}

class main{
   Animal *a = new Cow();
   a->virtualFunction();
} 
```

^：**这行得通**，但是当我这样做时...

```
a->nonVirtualFunction(); 
```

它说*Animal类没有这个方法*，我当然知道，但是**什么方法最好调用那个方法**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:35:03.270

如果您要调用的成员函数，首先`Cow`不要将其存储在多态`Animal`指针中：

```
Cow* c = new Cow();
c->nonVirtualFunction(); 
```

如果您要以特定方式使用a ，则将 a 存储`Cow`在中是没有意义的。`Animal*``Cow`

您*可以*使用`dynamic_cast`在运行时检查对象的动态类型：

```
Animal* a = new Cow();
if (Cow* c = dynamic_cast<Cow*>(a)) {
  c->nonVirtualFunction();
} 
```

然而，这通常是糟糕设计的标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:35:11.277

您需要使用 Cow 指针来调用 nonVirtualFunction。Animal 指针是指向具有 Animal 接口的 Cow 的 SUBSET 的指针。

调用 nonVirtualFunction 的唯一方法是获取 Cow 指针。

```
Cow *c = dynamic_cast<Cow*>(a); 
```

会给你这样一个指针，假设 a 确实指向一头牛。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T14:44:32.053

为了更好地解释我自己，我将使用真实姓名代替占位符：

```
class Animal{
   virtual void move()=0;
}

class Cow : Animal{
   virtual void move(){}
   void moo(){}
}

int main () {
   Animal *a = new Cow();
   a->move();
   a->moo(); // ERROR
} 
```

好吧，这当然是一个错误：你到底为什么要制作一个通用的`Animal` `moo`？所以问题不在于如何调用`moo`any `Animal`；碰巧这个调用没有意义，编译器帮助我们注意到。

现在，an`Animal`可能有一个非虚拟方法，可以在任何动物上调用，而无需在子类上重写它，例如：

```
class Animal{
   // Everything else, plus:
   std::string Name() {return name;}

private:
   std::string name;
}

int main () {
   Animal *a = new Cow();
   a->move();
   std::string animalName = a->Name(); // OK
} 
```

如您所见，如果您有一个好的设计，问题就会消失。

# ruby-on-rails - Rails 3.2 模型范围日期 less_than_a_

> ID：15502310
> 
> 赞同：1
> 
> 时间：2013-03-19T14:32:22.727
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试通过我的截止日期属性在我的模型中创建一个可以找到数据集的范围，例如 less_than_a_year、less_than_six_month。

```
class Goal < ActiveRecord::Base
  attr_accessible :category, :title, :detail, :deadline, :achieve

  #need help solving this
  scope :less_than_a_year, where()
end 
```

所以它会执行，goal.less_than_a_year 并提供不到一年的数据列表。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:52:37.033

根据[rails 3.2指南](http://guides.rubyonrails.org/active_record_querying.html#working-with-times)

```
scope :less_than_a_year, lambda { where("deadline < ?", 1.year.from_now ) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:49:39.583

我很确定这是特定于数据库的，但它应该适用于大多数人。

```
class Goal < ActiveRecord::Base
  scope :less_than_a_year, lambda{ where("deadline < ?", 1.year.from_now) }
end 
```

这假设截止日期是 a`Date`或`DateTime`。

**编辑**：添加了 lambda （我发誓我在看到其他答案之前就这样做了，但在否决之前没有）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:52:50.363

```
class Goal < ActiveRecord::Base

 #need help solving this
 scope :less_than_a_year, labmda { where("deadline < ", 1.year.ago)}

end 
```

# java - 可视化 java 项目中的方法调用

> ID：15502314
> 
> 赞同：0
> 
> 时间：2013-03-19T14:32:38.177
> 
> 标签：java, workflow, visualize

我目前正在开发一个 java 项目，其中包含我自己没有编写的代码。现在我必须弄清楚代码是如何工作的。

所以我想知道是否有任何程序/插件显示随着时间的推移调用了哪些方法，或者以视觉方式显示程序哪些方法调用了什么？调试将是最后的手段，因为代码很大，在我深入调试器之前，我想先了解一个全局的想法

像这样的东西（但对于 Java）将是完美的：http: [//kcachegrind.sourceforge.net/html/Home.html](http://kcachegrind.sourceforge.net/html/Home.html)

# java - 从 DTD 中提取信息

> ID：15502319
> 
> 赞同：0
> 
> 时间：2013-03-19T14:32:48.963
> 
> 标签：java, extract, dtd

在java中，我想要一个dtd文件中元素的属性列表。

DTD 示例：

```
<!ELEMENT note (to,from,heading,body)>
<!ELEMENT to (#PCDATA)>
<!ELEMENT from (#PCDATA)>
<!ELEMENT heading (#PCDATA)>
<!ELEMENT body (#PCDATA)> 
```

我需要类似`getChilds(note)`...

有可能这样做吗？我需要一个 dtd 解析器，但我找不到提供这个的解析器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:35:47.103

You may use a SAX parser, with a [`DeclHandler`](http://docs.oracle.com/javase/1.5.0/docs/api/index.html?javax/xml/parsers/SAXParser.html).

> To set the `DeclHandler` for an XML reader, use the `setProperty` method with the property name `http://xml.org/sax/properties/declaration-handler` and an object implementing `DeclHandler`. If the reader does not report declaration events, it will throw a `SAXNotRecognizedException` when you attempt to register the handler.

The `model` argument in method `DeclHandler.elementDecl(String name, String model)` for `name="note"` would be `(to,from,heading,body)`.

# android - Facebook Android - 密钥哈希验证

> ID：15502323
> 
> 赞同：1
> 
> 时间：2013-03-19T14:33:02.597
> 
> 标签：android, facebook, hash, single-sign-on, keytool

[我已经创建了此处](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)描述的密钥哈希（在第 4 步结束时）：-

他们告诉密码是`android`

这是正确的，`debug.keystore`但我有`distr.keystore`不同的密码

当我将它们与`distr.keystore`.

我希望看到： - 您输入了错误的密码

我认为非`android`密码是正确的。但是我如何测试 Key Hash 它是正确的 Key Hash 而另一个不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:05:21.877

你说这两个密码都使用不同的密钥哈希，尝试在 facebook 端使用它们并输入每个密钥哈希并尝试使用你的应用程序。如果密钥散列正确，它应该可以工作，如果密钥散列错误，程序不应该工作。但是为什么你使用另一个文件而不是 debug.keystore ？

# javascript - 使用函数清理我的 javascript

> ID：15502329
> 
> 赞同：0
> 
> 时间：2013-03-19T14:33:12.957
> 
> 标签：javascript, jquery, function

我有 javascript 代码几乎多次执行相同的操作。有没有办法制作一个功能来清理它？

我想做成一个函数的两件事是：

**明亮的（）**

```
$(VARIABLE).find('.info').fadeTo('fast', 1);
$(VARIABLE).find('img').fadeTo('fast', 1); 
```

**光（）**

```
$(VARIABLE).find('.info').fadeTo('fast', 0);
$(VARIABLE).find('img').fadeTo('fast', 0.8); 
```

.

我希望能够将变量传递给函数，以便可以更改该特定部分。我是 javascript 新手，所以我只会问这种问题一次。提前致谢。

```
$(document).ready(function(){
var subject;
$('.subject').mouseenter(function(){
    if ( $(this).hasClass(subject) ) {
        return 0;
    }
    else {
        $(this).find('.info').fadeTo('fast', 1);
        $(this).find('img').fadeTo('fast', 1);
    }
});
$('.subject').mouseleave(function(){
    if ( $(this).hasClass(subject) ) {
        return 0;
    }
    else {
        $(this).find('.info').fadeTo('fast', 0);
        $(this).find('img').fadeTo('fast', 0.8);
    }
});

$('.english-link').click(function(){
    subject = 'english';
    $('.english').find('.info').fadeTo('fast', 1);
    $('.english').find('img').fadeTo('fast', 1);
});
$('.math-link').click(function(){
    subject = 'math';
    $('.math').find('.info').fadeTo('fast', 1);
    $('.math').find('img').fadeTo('fast', 1);
});
$('.electives-link').click(function(){
    subject = 'electives';
    $('.electives').find('.info').fadeTo('fast', 1);
    $('.electives').find('img').fadeTo('fast', 1);
});
$('.history-link').click(function(){
    subject = 'history';
    $('.history').find('.info').fadeTo('fast', 1);
    $('.history').find('img').fadeTo('fast', 1);
});
$('.science-link').click(function(){
    subject = 'science';
    $('.science').find('.info').fadeTo('fast', 1);
    $('.science').find('img').fadeTo('fast', 1);
});
$('.languages-link').click(function(){
    subject = 'languages';
    $('.languages').find('.info').fadeTo('fast', 1);
    $('.languages').find('img').fadeTo('fast', 1);
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:35:20.270

采用：

```
$(VARIABLE).find('.info, img').fadeTo('fast', 1); 
```

代替：

```
$(VARIABLE).find('.info').fadeTo('fast', 1);
$(VARIABLE).find('img').fadeTo('fast', 1); 
```

这通常用于单击`.english-link`等`.math-link`。

```
$('[class$=-link]').click(function(){
   subject = $(this).attr('class').replace("-link","");
   $('.'+ subject ).find('.info, img').fadeTo('fast', 1);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:36:48.150

JavaScript 中的函数如下所示：

```
function myFunction(myParameter, mySecondParameter)
    console.log('You can now use data that was passed to the function through ' + myParameter);
}

var passAVariable = 5;
myFunction('passingastring',passAVariable); 
```

试试这个：

```
$('.languages-link').click(function(){
    yourfunction('languages', true);
});

function yourfunction(subject, on){
    if ( on ) {
        $('.' + subject).find('.info, img').fadeTo('fast', 1);
    } else {
        $('.' + subject).find('.info').fadeTo('fast', 0);
        $('.' + subject).find('img').fadeTo('fast', 0.8);
    }
} 
```

# c - 系统调用写

> ID：15502331
> 
> 赞同：1
> 
> 时间：2013-03-19T14:33:24.560
> 
> 标签：c, linux, kernel, system

系统调用 write 定义如下：

```
SYSCALL_DEFINE3(write, unsigned int, fd, const char __user *, buf, size_t, count)
{
     struct file *file;
     ssize_t ret = -EBADF;
     int fput_needed;

     file = fget_light(fd, &fput_needed);
     if (file) {
             loff_t pos = file_pos_read(file);
             ret = vfs_write(file, buf, count, &pos);
             file_pos_write(file, pos);
             fput_light(file, fput_needed);
     }

     return ret;
} 
```

我想复制变量**buf**来修改您的内容，然后在以下位置使用这个新变量：

```
vfs_write(file, new_buf, count, &pos); 
```

我尝试将内存分配给 char 指针变量，`kmalloc`然后我使用`copy_from_user(`) 来进行复制。最后，我使用了新变量 at `vfs_write()`。重新编译内核并重新启动系统后，我收到内核恐慌错误消息。

这是我生成内核恐慌错误消息的实现：

```
SYSCALL_DEFINE3(write, unsigned int, fd, const char __user *, buf, size_t, count){
    struct file *file;
    ssize_t ret = -EBADF;
    int fput_needed;
    char *data;

    data = kmalloc(count, GFP_KERNEL);
    if(!data)
        return ret;

    copy_from_user(data, buf, count);

    file = fget_light(fd, &fput_needed);
    if (file) {
        loff_t pos = file_pos_read(file);
        ret = vfs_write(file, data, count, &pos);
        file_pos_write(file, pos);
        fput_light(file, fput_needed);
    }

    return ret;
} 
```

如何在内核模式下进行此复制？

我正在使用 Linux Mint 12 - 内核版本：3.0.30

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:39:31.050

您可能还应该发布您的代码。即您对`write`系统调用所做的更改以确定错误在哪里。

也就是说，有一些检查不允许您将内核内存用于系统调用。您要么需要在用户地址空间中为进程分配缓冲区（坏），要么禁用检查（没那么坏）。

我对 3.0 内核不太熟悉，但[这个答案](https://stackoverflow.com/a/7629857/416627)看起来很有希望：

```
mm_segment_t old_fs;

old_fs = get_fs();
set_fs(KERNEL_DS);
/* Your syscall here */
set_fs(old_fs); 
```

# python - Python如何计算指数？

> ID：15502335
> 
> 赞同：0
> 
> 时间：2013-03-19T14:33:31.320
> 
> 标签：python, python-2.7

为了在 Python 中计算指数，我们使用`**`命令。例如，我们输入`x**3`x 的立方体。Python 如何评估这样的多项式？这个计算中使用了 3 次翻牌吗？非整数指数呢？说`x**2.3`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T14:45:03.880

`**`运算符转换为字节码中的`BINARY_POWER`操作码，然后解释器将其转换为 C-API[`PyNumber_Power`调用](http://docs.python.org/2/c-api/number.html#PyNumber_Power)，并将第三个参数设置为 None。

`PyNumber_Power`调用操作数上的[`nb_power`槽](http://docs.python.org/2/c-api/typeobj.html?highlight=nb_power#PyNumberMethods)（参见 参考资料[`ternary_op`](http://hg.python.org/cpython/file/2.7/Objects/abstract.c#l1006)）。

如果两者都是整数，则[`int_pow`C 函数](http://hg.python.org/cpython/file/2.7/Objects/intobject.c#l728)成功并使用其结果。

然而，如果`x`它是一个整数并且您将`2.3`其用作幂，则整数幂函数会引发错误并[`float_pow`](http://hg.python.org/cpython/file/2.7/Objects/floatobject.c#l807)在接下来尝试。在这种情况下，如果`x`大于 0，则 C 库`pow()`函数用于两个浮点值，然后在大多数架构上由 CPU 中的浮点支持处理。

# eventbrite - EventBrite Javascript API 限制 user_list_events

> ID：15502336
> 
> 赞同：0
> 
> 时间：2013-03-19T14:33:32.300
> 
> 标签：eventbrite

只想从我们的列表中带回最新事件。使用 JavaScript API，它似乎可以恢复所有事件，即使是草稿中的事件或已完成的事件。

是否可以传递一个参数来限制结果，或者我需要在获得结果后对其进行过滤？

我可以检查一个“状态”对象。这就是我目前正在使用的全部

```
 eb_client.user_list_events({}, function (response) {
        console.log(response.events)
        $.each(response.events, function () {
            console.log(this.event.title)
        });

    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:34:02.833

您可以使用该`event_statuses`参数返回实时、开始或结束的事件。这些选项需要在逗号分隔的列表中，没有空格。如果将此字段留空，它将返回所有内容。“结束”选项将仅返回过去 7 天内结束的事件。

例如：

```
event_statuses=live,started 
```

# jquery - 如何使用 jQuery .on() 处理新插入的对话框链接的点击事件？

> ID：15502339
> 
> 赞同：0
> 
> 时间：2013-03-19T14:33:41.857
> 
> 标签：jquery, jquery-ui-dialog, jquery-on

我有一个可以正常工作的 jQuery 对话框的现有链接。但是当我尝试插入一个新的对话框链接时，使用 .on() 来选择一个现有的 div，该链接不会生成对话框，而是简单地链接到页面。

有人可以帮助说明应该如何做吗？

这是一个代码示例：

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>

$(document).ready(function(){

    $("button").click(function(){
        $("<p><a href='a.html' class='mdialog' name='mine' title='mine' >new link</a></p>").insertAfter("button");
    });

    // this works to produce a dialog for an existing link
    $('.mdialog').each(function() {
        var $link = $(this);
        var $dialog = $('<div></div>')
            .load($link.attr('href'))
            .dialog({
                resizable: false,
                modal: true,
                autoOpen: false,
                closeOnEscape: true,
                position: 'center',
                title: $link.attr('title'),
                buttons: {
                    "Close": function() {
                      $( this ).dialog( "close" );
                    }
                }
            });

        $link.click(function() {
            $dialog.dialog('open');

            return false;
        });

    });

  $("#mydiv").on("click","a",function(){

      alert("I'm clicked"); // link click is being handled

    // same code as above does not produce a dialog
        $('.mdialog').each(function() {
            var $link = $(this);
            var $dialog = $('<div></div>')
                .load($link.attr('href'))
                .dialog({
                    resizable: false,
                    modal: true,
                    autoOpen: false,
                    closeOnEscape: true,
                    position: 'center',
                    title: $link.attr('title'),
                    buttons: {
                        "Close": function() {
                          $( this ).dialog( "close" );
                        }
                    }
                });

            $link.click(function() {
                $dialog.dialog('open');

                return false;
            });

        });

  });

});

</script>
</head>
<body>

<div id="mydiv">

<p><a href='a.html' class='mdialog' name='mine' title='mine' >existing link</a></p>

<button>Insert a new paragraph with anchor element after this button</button>
</div>

</body>
</html> 
```

a.html 只是一个非常简单的消息：

```
<p>this should be a dialog message!</p> 
```

下面的**EDIT**似乎确实允许新注入的对话框正常工作。现在是#1。正如 Jamie 建议的那样，消除了 .each 循环和#2。删除 $link.click() 处理程序以打开对话框和#3。添加一个 event.preventDefault() 以防止页面实际被链接而不是对话框：

```
 $("#mydiv").on("click","a",function(event){
    //alert("I'm clicked"); // link click is being handled

        var $link = $(this);
        var $dialog = $('<div></div>')
            .load($link.attr('href'))
            .dialog({
                resizable: false,
                modal: true,
                autoOpen: false,
                closeOnEscape: true,
                position: 'center',
                title: $link.attr('title'),
                buttons: {
                    "Close": function() {
                      $( this ).dialog( "close" );
                    }
                }
            });

        //$link.click(function() {
            $dialog.dialog('open');

        //  return false;
        //});

event.preventDefault(); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:38:24.650

对我来说，您的 on 选择器没有任何问题。

您可能想要删除尾随`"`

```
 //Wrong
   <div id='mydiv'">
   //Corrent
   <div id="mydiv"> 
```

在此说明中，虽然没有必要避免混淆，但我只会在所有属性上使用双引号。

**编辑** 看这个[小提琴](http://jsfiddle.net/hutber/8JwPj/)这将开始工作。现在，至于你想要一个对话来处理每一个你不想循环遍历每一个 `$('.mdialog') 你会想要将它添加到新创建的项目：

```
 //Inside here: 
 $("button").click(function(){
    $('<a href="a.html" class="mdialog" name="mine" title="mine" >new link</a>').insertAfter("button");
    //Add new dialog
 });

 //Set up the click event for the dialogue. 
 $("#mydiv").on("click",".mdialog",function(){
    alert("I'm clicked"); // li
    return false;
 }); 
```

我从未使用过 jQuery UI，但这就是我设置的方式。

# java - Java快速添加和排序列表的方法

> ID：15502340
> 
> 赞同：0
> 
> 时间：2013-03-19T14:33:41.897
> 
> 标签：java, sorting, artificial-intelligence

我有以下代码用于对棋盘游戏中的动作进行排序。在我看来，它可以进行高度优化：

```
 private List<Move> sortMoves(List<Move> moves, int depth)
    {
        List<Move> sorted = new ArrayList<Move>();

        if (moves.size() == 0)
            return sorted;

        List<Move> primary = new ArrayList<Move>();
        List<Move> rest = new ArrayList<Move>();

        for(int i = 0; i < moves.size(); i++)
        {
            if (killers.primary[depth] != null && moves.get(i).equals(killers.primary[depth]))
                primary.add(moves.get(i));          

            else
                rest.add(moves.get(i));
        }

        sorted.addAll(primary);
        sorted.addAll(rest);

        return sorted;
    } 
```

有没有更好，更有效的方法（即相交两个列表并返回一个排序列表）？

注意：该函数的目标是删除移动列表中的杀手移动（主要），然后返回一个新列表，其中首先是杀手移动，然后是原始移动列表中的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:36:45.387

快速排序列表尝试

[Collections.sort(列表列表);](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)

或者

[Collections.sort(List list,Comparator c)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:00:54.440

如果你`moves`不是太大，当前的实现看起来还可以。它的复杂度是 O(n)。唯一的缺点是由于三个额外的列表即空间复杂度。`primary`,`rest`和`sorted`.

您可以使用`Collections.sort(List<T> list, Comparator<? super T> c)`.

```
private void sortMoves(final List<Move> moves, final int depth)
{
    Collections.sort(moves, new Comparator<Move>() {
        @Override
        public int compare(Move o1, Move o2) {

            if(killers.primary[depth] != null && moves.get(i).equals(killers.primary[depth])) {

                return 0;
            } else {

                return 1;
            }
        }
    });       
} 
```

这不使用任何额外空间，但时间复杂度为 O(nlog(n))。此外，它的实现很简洁。

**更新：**以下是另一个没有额外空间复杂度和 O(n) 时间复杂度的优雅解决方案。

```
private void sortMoves(final List<Move> moves, final int depth)
{

    int i = 0;
    int j = moves.size() - 1;

    while(i < j) {

        while(equalsKillersPrimary(moves.get(i), depth))
            i++;

        while(!equalsKillersPrimary(moves.get(j), depth))
            j--;

        swap(moves, i, j);
    }
}

private boolean equalsKillersPrimary(Move move, int depth) {

    return killers.primary[depth] != null && move.equals(killers.primary[depth]);
} 
```

为简洁起见，我省略了实现`swap()`。它只是交换给定索引上的元素。

# jquery - 使用 PhoneGap、ajax 和 web service.net 将图像上传到远程服务器

> ID：15502344
> 
> 赞同：2
> 
> 时间：2013-03-19T14:33:55.617
> 
> 标签：jquery, .net, ajax, cordova

我想在 Phonegap 应用程序中捕获图像，然后使用 $ 发送。ajax 方法将其发送到具有 Web 服务的远程服务器。网。

我不能使用“上传”方法发送到服务器，因为它不接受 uri .asmx 我需要一个方法 $。阿贾克斯帖子。我使用网络服务：

```
[WebMethod]
public bool SavePhoto(Guid IdPrestation, Guid IdPhoto, byte[] ImgIn)
{
    System.IO.MemoryStream ms = new System.IO.MemoryStream(ImgIn);
    System.Drawing.Bitmap b =(System.Drawing.Bitmap)System.Drawing.Image.FromStream(ms);
    //Si le repertoire n'existe pas alors on le crée
    //  if (! RepertoirePhotoExist(IdPrestation))
    //{
           System.IO.Directory.CreateDirectory(HttpContext.Current.Server.MapPath("Photos/" + IdPrestation.ToString()));
    //}
    string strFichier = HttpContext.Current.Server.MapPath("Photos/" + IdPrestation.ToString() + "/" + IdPhoto.ToString() + ".jpg");
    // Si le fichier existe alors
    if (System.IO.File.Exists(strFichier))
    {
        System.IO.File.Delete(strFichier);
    }
    else
    {
        b.Save(strFichier, System.Drawing.Imaging.ImageFormat.Jpeg);
    }
        return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:15:45.260

您应该使用Phonegap 提供的[Camera](http://docs.phonegap.com/en/2.5.0/cordova_camera_camera.md.html#Camera)和[FileUploadOptions对象](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileUploadOptions)

你的代码看起来像这样

```
document.addEventListener("deviceready", function() {

    var cameraParams = { 
        quality : 20,
        destinationType: Camera.DestinationType.FILE_URI,
        correctOrientation: true
    };
    navigator.camera.getPicture(onPhotoTakenSuccess, function() {}, cameraParams);

    var onPhotoTakenSuccess = function(imageUri) {

        var url = "http://yourserviceurl/service.asmx/Upload";

        var params = new Object();
        params.otherinfo = "whatever";  //you can send additional info with the file

        var options = new FileUploadOptions();
        options.fileKey = "file";
        options.fileName = imageUri.substr(imageUri.lastIndexOf('/')+1);
        options.mimeType = "image/jpeg";
        options.params = params;
        options.chunkedMode = false;

        var ft = new FileTransfer();
        ft.upload(imageUri, url, successCallback, errorCallback, options);
    };

}, false); 
```

您的网络服务方法应如下所示：

```
[WebMethod]
public void Upload()
{
    var file = Request.Files[0];
    string otherInfo = Request["otherinfo"];
    //do whatever you want to do with the file now
} 
```

# php - 重定向后PHP脚本是否可以继续？

> ID：15502345
> 
> 赞同：0
> 
> 时间：2013-03-19T14:33:57.563
> 
> 标签：php, security, http, redirect, location

我正在研究现有网站，寻找安全问题。是否可以肯定地说 PHP 脚本在浏览器被重定向后中止，或者狡猾的用户可以以某种方式强制脚本继续。如果用户当前已登录，则假设“is_logged_in”返回 1 或 0。假设此函数中没有漏洞。代码如下：

```
<?
$fp = fopen("./debug.txt", "a");
fwrite("BEFORE LOGIN CHECK\n");

if(!is_logged_in()) {
         fwrite("Not authed \n");
         header("Location: $url", TRUE, 302);
}
fwrite("Passed auth check \n");
/* Code to do some logged in functionality here */
?> 
```

使用带有登录用户的普通浏览器，我得到

```
BEFORE LOGIN CHECK
Passed auth check 
```

我得到了一个未登录的用户

```
BEFORE LOGIN CHECK
Not authed 
```

是否可以使用原始请求保持脚本打开（并忽略重定向），以便我得到

```
BEFORE LOGIN CHECK
Not authed
Passed auth check 
```

基本上进入 if 块，获取重定向标头，忽略它，然后让脚本继续执行。

如果不是，我会通过执行以下操作来纠正问题：

```
if(!is_logged_in()) {
         fwrite("Not authed \n");
         header("Location: $url", TRUE, 302);
         die();
} 
```

但我不确定这是否是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:38:30.633

正确，您需要在该标头之后使用`exit();`or`die();`来阻止 PHP 执行。

通过使用`header()`，您只需设置一个 HTTP 标头，这对 PHP 来说毫无意义。您可以设置`header('X-CHEESE', 'cheddar');`它会很好地执行，然后继续处理。

您使用的 die 会告诉 PHP 停止执行，然后浏览器将接管，所以当它发现 Location: 时，它将转到提供的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:36:52.933

如果您不在`exit;`标头之后，则脚本应继续运行。

我之前在向客户端发送 HTTP 200 和 content-length: 0 时使用过这个。所以客户端什么都不做，PHP 继续执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:38:02.833

header 方法不会结束脚本的执行，所以用户会得到一个重定向头，但脚本的其余部分仍然会执行（这很危险）。

要么死（）要么在重定向后退出你的代码。

编辑：

使用以下代码进行测试后：

```
$fp = fopen("debug.txt", "a");
fwrite($fp,"BEFORE LOGIN CHECK\n");

if(true) {
         fwrite($fp,"Not authed \n");
         header("Location: index.php", TRUE, 302);
}
fwrite($fp,"Passed auth check \n");
fclose($fp); 
```

将 if 中的值更改为 false 会将其附加到 debug.txt 文件中：

```
BEFORE LOGIN CHECK
Passed auth check 
```

将其更改为 true 将其附加到 debug.txt：

```
BEFORE LOGIN CHECK
Not authed 
Passed auth check 
```

# facebook - 带有图片的网络上的 facebook 状态

> ID：15502348
> 
> 赞同：0
> 
> 时间：2013-03-19T14:34:08.407
> 
> 标签：facebook, image, status

最后，我通过喜欢和状态完成了这项工作，但我想寻求帮助，是否有可能以某种方式将图片也传输到网络上。谢谢你

```
 <?php
   $facebook_page_id = '**********';
   $access_token = '************';
   $number_of_posts = 2;

   $json_content = file_get_contents('http://graph.facebook.com/'.$facebook_page_id.'/feed?access_token='.$access_token);

   $raw_data = json_decode($json_content);
   $i=0; 
   foreach ($raw_data->data as $feed ) {
   $feed_id = explode("_", $feed->id);
   if (!empty($feed->message)) { 
          $i++;
          if ($i<($number_of_posts+1)) {
?>

    <div class=”fb_update”&gt;
    <?php if (!empty($feed->likes->count)) { ?>
    <div class=”fb_likes”&gt;
    <?php echo $feed->likes->count; ?>
    </div>
    <?php }       ?>  
    <?php if (!empty($feed->created_time)) { ?>
    <div class=”fb_date”&gt;
          <?php echo date('F j, Y', strtotime($feed->created_time)); ?>
    </div>
    <?php }       ?>
      <div class=”fb_message”&gt;
     <?php echo $feed->message; ?>
   </div>       
   </div>

   <?php } ?>
   <?php } ?>
   <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:44:44.233

是的，`$feed->picture`将为您提供特定项目的图像的 URL（如果存在）。

您应该真正考虑通过[PHP SDK](https://developers.facebook.com/docs/reference/php)使用 cURL而不是`file_get_contents()`. 它更健壮。

# jquery - 试图循环通过谷歌地图地址组件

> ID：15502351
> 
> 赞同：0
> 
> 时间：2013-03-19T14:34:23.797
> 
> 标签：jquery, google-maps-api-3

为什么这不起作用？？？我无法遍历从 google map api 返回的地址组件。

```
if (geocoder) {
    geocoder.geocode({ 'address': address }, function (results, status) {
    if (status == google.maps.GeocoderStatus.OK) { 
        var arrAddress = results[0].address_components;
        console.log(arrAddress);
        //iterate through address_component array
        $.each(arrAddress, function (i, address_component) {
             console.log('address_component:'+i); 
             if (address_component.types[0] == "locality"){
                        console.log("town:"+address_component.long_name);

                    }
    });
}
 } 
```

# ruby - 如何使用信息 ajax POST 请求传回

> ID：15502354
> 
> 赞同：0
> 
> 时间：2013-03-19T14:34:30.997
> 
> 标签：ruby, ajax, ruby-on-rails-3, jquery

目前我正在研究滑块，每张幻灯片都是使用状态机的特定状态。现在从一页开始，我正在使用发送的数据发出发布请求，如果它通过验证，我想将“状态名称”返回到我的视图页面，所以我可以移动幻灯片？

这是更好的方法吗？我选择幻灯片作为状态的原因是我可以运行查询来确定我的客户对某张幻灯片做了多少。

所以目前我正在发出ajax发布请求..（部分忽略）

```
$.post("/xxx/tracks", { name: "xx", time: "xx", pa: "xx" }).done(function(data) {
   alert("Data Loaded:" + data);
}); 
```

所以现在在我的控制器中

```
def tracks
 binding.pry
 # some condition determining val accordingly
 respond_to do |format|
   format.json { head :ok } #return val somehow
 end
end 
```

所以我的问题是如何返回一些价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:05:37.213

如果您不想渲染任何内容，您可以传递 html、文本或只传递响应标头。

以 Html 为例，只需渲染您想要的视图：

```
def tracks
 binding.pry
 # some condition determining val accordingly
 render 'tracks' #tracks.html.erb
end

$.post("/xxx/tracks", { name: "xx", time: "xx", pa: "xx" }, function(data) {
  $("selector").append(data)
}).error(function(response, data){
  alert('error processing the request')
}) 
```

对于文本：

```
def tracks
 binding.pry
 # some condition determining val accordingly
 if expression
   render text: 'success', status: :ok
 else
   render text: 'Error processing your request', status :bad_request
 end
end

$.post("/xxx/tracks", { name: "xx", time: "xx", pa: "xx" }, function(response, data) {
  alert(data.responseText)
}).error(function(response, data){
  alert(data.responseText)
}) 
```

仅渲染标题

```
def tracks
 binding.pry
 # some condition determining val accordingly
 if expression
   head :created
 else
   head :unprocessable_entity
 end
end

$.post("/xxx/tracks", { name: "xx", time: "xx", pa: "xx" }, function() {
  alert('seccess')
}).error(function(){
  alert('error')
}) 
```

您也可以渲染 json 数据。

# search - 在 Java 中的 Twitter 中搜索人 (Twitter4j)

> ID：15502357
> 
> 赞同：1
> 
> 时间：2013-03-19T14:34:45.150
> 
> 标签：search, twitter, twitter4j

有谁知道使用 Twitter4j 或任何其他库来通过其 API 在 Twitter 中搜索人的方法？我试图找出特定的人是否有 Twitter 帐户。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:34:37.523

[这](http://twitter4j.org/javadoc/twitter4j/api/UsersResources.html#searchUsers%28java.lang.String,%20int%29)应该回答你的问题。[这](https://dev.twitter.com/docs/using-search)应该可以帮助您构建基本查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T12:06:39.037

这是在 twitter 中搜索用户的 API：

```
https://api.twitter.com/1.1/users/search.json?q=UserName 
```

# c# - 文件处理错误

> ID：15502360
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:34:51.753
> 
> 标签：c#, file-handling

我目前正在尝试使用 Stream Writer 和 Stream Reader 将数据输入文本文件以输出信息，在本例中为 - 名字、姓氏和年龄。然后使用我希望将其输出到下表中的信息：

```
First Name          Surname              Age
Etc                 Etc                  Etc 
```

但是我在解决它时遇到了一些问题！

请在下面查看我的代码，谁能解释为什么我收到以下错误消息？

> 错误 1 ​​使用未分配的局部变量 'firstname'
> 
> 错误 2 使用未分配的局部变量“姓氏”
> 
> 错误 3 使用未分配的局部变量 'age'

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO; 

namespace ConsoleApplication1
{// Start namespace
    class Program
    {// Start Class
        static void Main(string[] args)
        {// Start Main
            // Declaration Strings

            String firstname; // Declares Name as a String
            String lastname; // Declares Surname as a String
            String age; // Declares Age as a String
            int Counter; // Declares Counter as an Integer

            FileInfo fleNames = new FileInfo("Names.txt"); // Creates fleNames as an Object, using Names.txt as the file name
            StreamWriter swrNames = fleNames.CreateText(); // Informs fleName to Create Text

            for (Counter = 0; Counter < 1; Counter++)
            {
                Console.Write("Enter Your First Name:"); // Writes users first name using Stream Writer Command
                firstname = Console.ReadLine(); 
                swrNames.WriteLine(firstname); // This dictates where the first name will be stored in the text file
                swrNames.Flush();

                Console.Write("Enter Your Surname"); // Writes users first name using Stream Writer Command
                lastname = Console.ReadLine();
                swrNames.WriteLine(lastname); // This dictates where the last name will be stored in the text file
                swrNames.Flush();

                Console.WriteLine("Enter Your Age"); // Writes users first name using Stream Writer Command
                age = Console.ReadLine();
                swrNames.WriteLine(age); // This dictates where the age will be stored in the text file
                swrNames.Flush();
                Console.Clear();

            }

            swrNames.Close();

            String NamesTable;

            StreamReader swreNames = File.OpenText("Names.txt");

            while ((NamesTable = swreNames.ReadLine()) != null)
            {
                Console.WriteLine(NamesTable);

            }

            swreNames.Close();

            Console.ReadLine();

            FileInfo fleNamesTwo = new FileInfo("NamesTwo.txt");

            StreamWriter swrNamesTwo = null;

            // ------------ CHECK APPEND TO A FILE --------------

            if (fleNames.Exists == true)
            {
                swrNames = fleNames.AppendText();
            }
            else // -- Create a new text file 
            { // Declare Strings
                String Name; // Name
                String Surnames; // Surname
                String Ages; // Age
                swrNamesTwo = fleNamesTwo.CreateText();

                Console.Write("Enter Your First Name");
                Name = Console.ReadLine();
                swrNamesTwo.WriteLine(Name);
                swrNamesTwo.Flush();

                Console.Write("Enter Your Surname");
                Surnames = Console.ReadLine();
                swrNamesTwo.WriteLine(Surnames);
                swrNamesTwo.Flush();

                Console.WriteLine("Enter Your Age");
                Ages = Console.ReadLine();
                swrNamesTwo.WriteLine(Ages);
                swrNamesTwo.Flush();
                Console.Clear();

            }

            Console.Clear();

            Console.SetCursorPosition(15, 2);

            Console.Write("--- Names Table ---");

            Console.SetCursorPosition(10, 4);

            Console.Write("First Name");

            Console.SetCursorPosition(28, 4);

            Console.Write("Surname");

            Console.SetCursorPosition(48, 4);

            Console.Write("Age");

            Console.ReadLine();

            do  
            {
                //Read a File a Streamreader Command

                swrNames.WriteLine(firstname); // Reads from first name from file Names.txt
                Console.SetCursorPosition(10, Counter + 6); // Aligns first name within table settings 

                swrNames.WriteLine(lastname); // Reads from last name from file Names.txt
                Console.SetCursorPosition(28, Counter + 6); 

                swrNames.WriteLine(age); // Reads from age from file Names.txt
                Console.SetCursorPosition(48, Counter + 6);
                Console.WriteLine("{0} {1} is {2} years old", firstname, lastname, age);

                Console.Clear();  //Clears Screen
                Console.ReadLine();

            } while ((firstname = swreNames.ReadLine()) != null); //Writes out the input from the text file
        }
    }
} 
```

好的，所以你乐于助人的人让我克服了错误！谢谢 ：）

但是，（总是有一个但是！！！）我仍然无法让流写入器/读取器在表中显示结果。我让表格出现在结果之后，但表格是空白的，除了表格标题都在它们整洁的占位符中！任何人..... ：）：）：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:42:08.430

您将从将 String 变量设置为默认值开始：

```
 String firstname = string.empty;
        String lastname = string.empty; 
        String age = string.empty; 
```

然后，如果你的 for 循环没有执行，你的变量将有一个初始化值。稍后在代码中访问时，不会发生错误

添加编辑每个评论，初始化计数器：

```
int Counter=0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:40:11.257

在 C# 中，该错误`Use of unassigned local variable`意味着您正在尝试使用尚未给定值的变量。C# 与其他一些语言不同，要求您保证在使用变量之前已将某些内容（甚至为 null）分配给变量 - 它不会将变量初始化为默认值（如 VB.NET）或将其保留为垃圾值（如 C++）。

在您的情况下，`firstname`填充在循环内部，这意味着如果循环的主体从不执行`for`，它可能永远不会获得值。`for`当您尝试在 中使用它时`do`，它可能从未被分配过。

为了解决这个问题，最常见的方法是`null`在声明变量时设置它，这意味着你已经保证了当你去使用它时它会有一些东西。当然，请确保您正确处理如果变量一直保持为空会发生的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:43:03.543

编译器不够聪明，无法知道这个循环：

```
for (Counter = 0; Counter < 1; Counter++) 
```

将始终只执行一次。所以它必须假设代码有可能根本不会执行，在这种情况下，这些变量永远不会被初始化。

如果您的`for`循环真的只打算执行一次，只需删除`for`循环，变量将在使用之前被分配一个值。

如果计数器仅用于测试并且您打算`for`多次执行循环，则将变量初始化为一些虚拟起始值（`null`,`""`等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T14:44:51.353

尝试清理您的代码（在用户输入之前您不需要 for 循环，无论如何它只会执行一次）。稍微更改您的代码，以便您可以检查`Console.ReadLine()`返回的内容。此外，错误似乎正在发生，因为变量在某处使用但它们可能未分配（如果不满足 for 查找条件）。在声明它们时给它们一个值，错误应该会消失。顺便说一句，考虑重构您的代码并将主要内容拆分为一种或多种方法。

```
string firstname = string.empty; // And so on.. 
```

# linux - 如何在没有 ./ 的情况下执行 linux 控制台应用程序

> ID：15502367
> 
> 赞同：0
> 
> 时间：2013-03-19T14:35:10.217
> 
> 标签：linux, console-application

哇，让我首先说我已经数不清我在这个网站上找到了多少答案。你们真棒！

所以，我发布的第一个问题是相当基本的，所以我希望它没有受到好评。我确实在谷歌和这里搜索了答案，但没有找到答案。

我刚刚在 linux 上创建了一个带有 code:blocks 的控制台应用程序，编译它然后在 code:blocks 中运行。工作得很好。然后我打开 linux bash shell，cd 到二进制文件所在的位置，然后尝试从那里运行它，没有骰子。我的一个 linux 伙伴过来告诉我尝试 ./ 在它之前。维奥拉，这行得通。我傻眼了，因为我认为 ./ 只需要执行 shell 脚本。我检查了 g++ 构建的二进制文件的文件权限，它们是：-rwxrwxr-x

我找到了其他关于使用 code:blocks 构建 Hello World 应用程序的教程，他们还说使用 ./ 在命令行上执行

为什么会这样？另外，如何构建控制台应用程序或任何其他二进制应用程序，这样 ./ 不需要执行它？我假设有可能以某种方式看到绝大多数内置的 linux 命令，例如 grep 等，不需要 ./ 来执行。

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:38:48.627

要在类 UNIX 系统上运行可执行文件，您需要了解路径解析。如果可执行文件的路径不包含在`PATH`环境变量中（`.`有时不包含），您需要自己指定。

通过附加`.`到`PATH`，像这样：

```
export PATH=$PATH:. 
```

您可以从当前工作目录运行可执行文件，而无需添加`./`. 但是请注意，这在多用户系统中可能是不安全的，因为其他用户可以提供可执行文件供您在组或全局可写目录中运行，而无需您的明确许可。

# php - 创建用于将 xml 加载到 mysql 的字段

> ID：15502369
> 
> 赞同：0
> 
> 时间：2013-03-19T14:35:11.457
> 
> 标签：php, mysql, xml

我正在尝试将 xml 数据提要上传到 mysql，这样我就可以将数据库与我的 php 程序一起使用。我遇到的问题通常是我创建字段并导入提要。但是我现在的提要有点奇怪..

```
<name>test</name>
<address>test address</address>
<phone>251447</phone>
</phone_count>
<pets>cat</pets>
</pet_count>
<images>
  <image>1.jpg</image>
  <image>2.jpg</image>
  <image>4.jpg</image>
  <image>16.jpg</image>
</images> 
```

有人可以告诉我如何创建字段，`</phone_count> </pet_count>`因为这些字段只有结束标签。

如何为每个图像创建一个字段？因为我没有在子集中插入数据。

我试图使用加载数据

```
LOAD DATA LOCAL INFILE '/tmp/xml/data.xml'
INTO TABLE person_data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:42:30.090

您的输入 XML 文件已损坏，没有相应的开始标签就没有结束标签。这个 XML 流的作者可能是指`<phone_count/>`和`<pet_count/>`（注意正斜杠的位置）。此语法与 (eg) 相同`<pet_count></pet_count>`。

关于导入此流程的方法，您将无法使用它，`LOAD DATA INFILE`因为您的主要实体（我猜是“联系人”）和图像之间存在 1-n（一对多）关系。理想情况下，您的数据库中将有两个表，例如`contact`and `image`，并`LOAD DATA INFILE`允许一次导入一个表。

您最好在 PHP 中以编程方式解析此文件。

*再想一想，如果一个给定的联系人最多有四个图像，那么我可以想象一个有四个，...，字段的`contact`表格，但我不认为这是一种好的做法。`image1``image4`*

# android - Android-tts voice interrupted

> ID：15502382
> 
> 赞同：1
> 
> 时间：2013-03-19T14:35:44.077
> 
> 标签：android, text-to-speech, voice

I am new to android developmant.

I am trying to develop an app where on incoming call, the app will speak " Incoming call from SO and SO".

For this purpose I am using tts.

I am sending a string `Incoming call from NAME`

```
mytts.speak(string, 0, NULL); 
```

But the voice generated is interrupted for unknown reasons..

I even tried `TextToSpeech.QUEUE_FLUSH` option

But in vain.

I have even turned the ringing volume to zero and infact there is no ringing tone!! But the voice is still being interrupted!!!!!!!

# java - Spring loading PropertySourcesPlaceholderConfigurer from JBoss context

> ID：15502383
> 
> 赞同：3
> 
> 时间：2013-03-19T14:35:44.303
> 
> 标签：java, spring, properties, jboss7.x, configuration-files

I have a spring 3.1 application loading settings using PropertySourcesPlaceholderConfigurer and I want to manage test and production environments simply loading settings from server context overriding settings specified in local file properties.

Next example works fine with Tomcat, how can I do the same in JBoss AS 7.1?

In spring context I have:

```
<bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="localOverride" value="false" />
    <property name="locations">
        <list>
            <value>classpath:Application.properties</value>
            <value>classpath:ApplicationTest.properties</value>
        </list>
    </property>
</bean>
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="${jdbc.driverClassName}" />
    <property name="jdbcUrl" value="${jdbc.url}" />
    <property name="user" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean> 
```

In ApplicationTest.properties (that overrides Application.properties):

```
jdbc.driverClassName=oracle.jdbc.OracleDriver
jdbc.url=jdbc:oracle:thin:@XXXX:1521:xxxx
jdbc.username=myUsername
jdbc.password=myPassword 
```

In context.xml (in Tomcat/conf directory):

```
<Context>
    ...
    <Parameter name="jdbc.driverClassName" value="oracle.jdbc.OracleDriver" override="false"/>
    <Parameter name="jdbc.url" value="jdbc:oracle:thin:@XXXX:1521:ProductionSID" override="false"/>
    <Parameter name="jdbc.username" value="myProductionUsername" override="false"/>
    <Parameter name="jdbc.password" value="myProductionPassword" override="false"/>
    ...
</Context> 
```

In this way all parameters specified in context.xml overrides parameters in ApplicationTest.properties.

Is there a way to specify context parameter in JBoss? (i.e. in standalone.xml file)

**EDIT - SOLVED:**

As suggested in the answers, if I put entries in WEB-INF/jboss-web.xml inside webapp that works:

```
<jboss-web>
...
    <env-entry>
        <env-entry-name>jdbc.username</env-entry-name>
        <env-entry-value>myUsername</env-entry-value>
        <env-entry-type>java.lang.String</env-entry-type>
    </env-entry>
...
</jboss-web> 
```

But my goal was to put the config file out of webapp. I solved in this way, I load the config file from $SERVER/conf directory:

```
<bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
    <property name="ignoreUnresolvablePlaceholders" value="false" />
    <property name="localOverride" value="false" />
    <property name="ignoreResourceNotFound" value="true" />
    <property name="locations">
        <list>
            <value>classpath:Application.properties</value>
            <value>classpath:ApplicationTEST.properties</value>
            <value>file:${catalina.home}\conf\ApplicationPRODUCTION.properties</value><!-- FOR TOMCAT -->
            <value>file:${jboss.server.base.dir}\configuration\ApplicationPRODUCTION.properties</value><!-- FOR JBOSS-->
        </list>
    </property>
</bean> 
```

If someone knows how to put Parameters in JBOSS config out of webapp (as TOMCAT) is well appreciated!

Thanks All!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:10:37.677

根据 JBoss7 文档：

> 在 AS7 中，文件 context.xml 被忽略。大多数旧的 context.xml 配置已移至**jboss-web.xml**。

有关更多详细信息，请参见[此处](http://docs.jboss.org/jbossweb/7.0.x/config/context.html)。

在旧版本中，您可以像往常一样将这些属性添加到 context.xml - JBoss 使用 Tomcat 作为 servlet 容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:10:20.173

使用[jboss-web.xml](http://docs.jboss.org/jbossweb/7.0.x/appdev/jbossweb.html)文件。该文件专门替换了 Tomcat 中的 context.xml。

# regex - I want regex for int , int , int

> ID：15502388
> 
> 赞同：-5
> 
> 时间：2013-03-19T14:35:52.267
> 
> 标签：regex

and there are exactly 3 integers. No floats allowed. No characters allowed. Just integers.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:36:46.180

The pattern for that is this: `\d+\s*,\s*\d+\s*,\s*\d+`

Matches three digits with any number of spaces

# python - PyQt4-PySide - Formatting a table widget

> ID：15502390
> 
> 赞同：2
> 
> 时间：2013-03-19T14:35:53.320
> 
> 标签：python, pyqt, pyqt4, pyside, styling

In the following code, I would like to use thicker rule separator between the column 2 and 3 for example. How can I achieve this ?

```
#! /usr/bin/env python2.7
# -*- coding: utf-8 -*-

import sys

from PySide import QtCore, QtGui

class MainWindow(QtGui.QWidget):
    def __init__(
        self,
        parent = None
    ):
        super(MainWindow, self).__init__(parent)

# General grid
        self.table = QtGui.QTableWidget(self)
        self.nbrow, self.nbcol = 9, 9
        self.table.setRowCount(self.nbrow)
        self.table.setColumnCount(self.nbcol)

# Each cell has dimension 50 pixels x 50 pixels
        for row in range(0, self.nbrow):
            self.table.setRowHeight(row, 50)

            for col in range(0, self.nbcol):
                self.table.setColumnWidth(col, 50)

# Each cell contains one single QTableWidgetItem
        for row in range(0, self.nbrow):
            for col in range(0, self.nbcol):
                item = QtGui.QTableWidgetItem()
                item.setTextAlignment(
                    QtCore.Qt.AlignHCenter | QtCore.Qt.AlignVCenter
                )

                self.table.setItem(row, col, item)

# Header formatting
        font = QtGui.QFont()
        font.setFamily(u"DejaVu Sans")
        font.setPointSize(12)
        self.table.horizontalHeader().setFont(font)
        self.table.verticalHeader().setFont(font)

# Font used
        font = QtGui.QFont()
        font.setFamily(u"DejaVu Sans")
        font.setPointSize(20)
        self.table.setFont(font)

# Global Size
        self.resize(60*9, 60*9 + 20)

# Layout of the table
        layout = QtGui.QGridLayout()
        layout.addWidget(self.table, 0, 0)
        self.setLayout(layout)

# Set the focus in the first cell
        self.table.setFocus()
        self.table.setCurrentCell(0, 0)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    fen = MainWindow()
    fen.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:59:18.597

您可以使用样式表来更改单元格边框的样式。查看示例：

*   [http://www.qtcentre.org/threads/27195-Border-around-selected-cell-in-qtablewidget](http://www.qtcentre.org/threads/27195-Border-around-selected-cell-in-qtablewidget)
*   [将 QTableWidget 单元格的边框设置为 0px](https://stackoverflow.com/questions/7341007/set-qtablewidget-cells-borders-to-0px)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-05T14:54:51.293

这不是一个完整或理想的解决方案，但它有点相关并且可能有助于取得进展。我找到了一个在 Qt 中更改整个单元格边界并将其翻译为 PyQt 的示例。

首先，创建一个委托并覆盖其绘制方法以进行您想要的自定义。

```
class TableBorderDelegate(QtGui.QItemDelegate):
    """Delegate for customizing cell borders"""

    def paint(self, painter, option, index):
        """Overrides paint to put a red border around cells in column 3"""
        if index.column() == 3:  # index.row() is also a thing
            painter.setPen(QtGui.QColor(255, 0, 0))
            painter.drawRect(option.rect)
        QtGui.QItemDelegate.paint(self, painter, option, index)
    # End of class TableBorderDelegate 
```

然后在你的桌子上

```
delegate = TableBorderDelegate()
self.table.setItemDelegate(delegate) 
```

`self.table`的实例在哪里`QtGui.QTableWidget()`

Qt 解决方案来自[https://stackoverflow.com/a/7264248/6605826](https://stackoverflow.com/a/7264248/6605826)。[我在https://github.com/baoboa/pyqt5/blob/master/examples/itemviews/spinboxdelegate.py](https://github.com/baoboa/pyqt5/blob/master/examples/itemviews/spinboxdelegate.py)中找到了委托使用的 pyqt 示例 一个不相关的 pyqt 委托

# opencv - 航拍影像配准

> ID：15502392
> 
> 赞同：1
> 
> 时间：2013-03-19T14:35:54.840
> 
> 标签：opencv, registration

假设我有两张无人驾驶小型飞机拍摄的航拍照片（实际上我有一些航拍视频......那是很多照片）。这些图像是从同一区域拍摄的，但从不同的角度和高度拍摄。关于如何将它们匹配在一起的任何想法？

我曾经`SIFT`从 2 张图像中获取匹配点，并获得了大约 250 个匹配的配对。然后我曾经`RANSAC`将数量减少到大约 150 个匹配点。但我不知道如何将一张图像扭曲到另一张图像？

目前我使用`cvWarpPerspective()`and `cvWarpImage()`in `OpenCV`，但`cvWarpPerspective()`只需要 4 对点进行图像配准。结果并不准确。而且我还有超过 146 点未使用。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:13:14.890

`findHomography`使用 OpenCV 的函数查找 Homography 矩阵。

```
Mat H;
H = findHomography(homographyPoints1, homographyPoints2, CV_LMEDS);
warpPerspective(img1, oimg1, H, img1.size(), INTER_NEAREST); 
```

扭曲两个图像，您将获得两个输出图像。您可以在此使用所有 150 分。将匹配的 150 个关键点推入单像点 1 和单像点 2（或其他一些向量）并使用`CV_LMEDS`. `CV_RANSAC`将随机选择 4 到 8 个点并计算可能不准确的单应性。

# python - 如何在自定义添加管理页面中添加模型？

> ID：15502395
> 
> 赞同：0
> 
> 时间：2013-03-19T14:36:01.747
> 
> 标签：python, django, python-2.7, django-forms, django-admin

在 Django Admin 中，我有一个 Product 模型，它具有其他模型的外键。默认的添加产品表单没有显示选项的名称，因此我创建了自定义表单来显示名称。

在默认的添加产品页面中，我可以添加一个模型以用于我正在添加的产品。我希望拥有这种能力，并希望看到我选择的名称。

我还使用具有一对唯一属性（名称和版本）的外键。目前我正在将选择设置为

```
REVISIONS = [(revision, revision.name) for revision in Revision.objects.all()] 
```

我希望能够同时看到名称和版本，像这样

```
REVISIONS = [(revision, revision.name + revision.version) for revision in Revision.objects.all()] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:09:17.353

我只需要添加一个**unicode** (self) 方法和管理菜单显示的名称，并且可以使用默认表单，它能够添加要使用的外键。

# php - 使用 PHP 按元素删除Child

> ID：15502396
> 
> 赞同：0
> 
> 时间：2013-03-19T14:36:04.060
> 
> 标签：php, xml, domdocument

我想通过调用 id 100 来删除整个贴纸节点。但实际上什么也没发生。任何的想法 ？

```
$xml = new DOMDocument();
$xml->load('../write.xml');

    $result = $xpath->query('/stickers/sticker[id="100"]');
    $result->childNodes->item(0)->parentNode->removeChild($result->childNodes->item(0));

$xml->save('../write.xml');

      <stickers>
          <sticker> /* Remove */
            <text>Thaishi1</text>
            <id>100</id>
          </sticker>
            <sticker>
             </position>
            <text>Thaishi2</text>
            <id>200</id>
          </sticker>
        </stickers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:57:26.680

如果“什么都没发生”，请将您的 error_reporting 配置为合理的调试级别——您应该会收到没有`->childNodes`属性的警告。

```
$result->item(0)->parentNode->removeChild($result->item(0)); 
```

这应该有效。

# java - Serialize or save PolylineOptions in Android

> ID：15502398
> 
> 赞同：1
> 
> 时间：2013-03-19T14:36:07.057
> 
> 标签：java, serialization, sharedpreferences, polyline, android-maps-v2

In my Android app I am already saving some strings to the SharedPreferences and serializing an ArrayList with Strings so this data is saved and can be used for future purposes. Even when the app is closed. A minute ago I discovered that I need to save my PolylineOptions for future use as well. PolylineOptions contain some coordinates to draw a line on my map with a color and width.

I discovered that PolylineOptions aren't serializeable like Strings. Is there a way to 'save' my PolylineOptions or do I need to save the settings of the PolylineOptions and create the PolylineOptions on startup?

So the real question is. How do I serialize a non serializeable object?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:06:03.733

一种选择是创建 PolylineOptions 类的可序列化版本。

例如：

```
public class Blammy implements Serializable
{
  public Blammy(final PolylineOptions polylineOptions)
  {
    //retrieve all values and store in Blammy class members.
  }

  public PolylineOptions generatePolylineOptions()
  {
    PolylineOptions returnValue = new PolylineOptions();

    // set all polyline options values.

    return returnValue;
  }
} 
```

如果 PolylineOptions 对象不是最终的，您可以使用 Serializable 类（一个简单的包装器）对其进行扩展并实现

```
 private void writeObject(java.io.ObjectOutputStream out)
     throws IOException
 private void readObject(java.io.ObjectInputStream in)
     throws IOException, ClassNotFoundException;
 private void readObjectNoData() 
     throws ObjectStreamException; 
```

派生类中的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-27T04:13:00.503

```
public class polyLineData implements Serializable {

  PolylineOptions polylineOptions;

  public polyLineData(){;}

  public polyLineData(PolylineOptions polylineOptions) {
      this.polylineOptions = polylineOptions;
  }

  public static void writeData(Context c, polyLineData pd)
  {
      Gson gson=new Gson();
      SharedPreferences.Editor   spEditor=c.getSharedPreferences("RecordedPoints",MODE_PRIVATE).edit();
      String uniqueID = UUID.randomUUID().toString();
      spEditor.putString(uniqueID,gson.toJson(pd)).apply();
  }

  public static ArrayList<PolylineOptions> getData(Context c)
  {
      Gson gson=new Gson();
      ArrayList<PolylineOptions> data=new ArrayList<>();
      SharedPreferences   sp=c.getSharedPreferences("RecordedPoints",MODE_PRIVATE);
      Map<String,?> mp=sp.getAll();

      for(Map.Entry<String,?> entry : mp.entrySet()){
          String json=entry.getValue().toString();
          polyLineData pd=gson.fromJson(json,polyLineData.class);
          data.add(pd.polylineOptions);
      }

      return data;

  }

} 
```

# c - 在哪里可以找到 GCC 汇编输出中调用的过程的汇编代码？

> ID：15502403
> 
> 赞同：1
> 
> 时间：2013-03-19T14:36:14.263
> 
> 标签：c, linux, gcc, assembly, disassembly

我一直在玩 GCC 的程序集输出开关：

```
gcc -S -c helloworld.c 
```

**helloworld.c**：

```
#include <stdio.h>

int main(void){
    printf("Hello World!\n");
    return 0;
} 
```

**helloworld.s**：

```
 .file   "helloworld.c"
    .section    .rodata
.LC0:
    .string "Hello World!"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    movl    $.LC0, %edi
    call    puts
    movl    $0, %eax
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (Debian 4.7.2-5) 4.7.2"
    .section    .note.GNU-stack,"",@progbits 
```

在输出`helloworld.s`文件中，我注意到汇编命令输出“Hello World！” 文字很简单：

```
call puts 
```

但是，该`helloworld.s1`文件中没有**puts**过程汇编代码。我在哪里可以查看此汇编代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T14:52:25.473

**编辑**：这实际上不是原始问题的答案，但由于它得到了赞成，信息似乎很有用，所以......

* * *

这是 GCC 的优化。由于您的字符串不包含任何格式字符并以换行符结尾，因此 GCC 替换了`puts`产生相同输出但速度更快的调用（因为它不需要扫描字符串以查找格式说明符）。尝试类似：

```
int main(int argc, char *argv[]){
    printf("Hello World!\nargc=%d", argc);
    return 0;
} 
```

你会`printf`在大会上看到你的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T06:47:36.657

**答案**：

使用 gcc 标志`-fno-builtin`。

**说明**：

为了提高性能，GCC、Glibc 将共同对标准 C 库进行一些修改。由于 GCC 和 Glibc 几乎适用于所有用户空间应用程序，因此内置函数默认打开，它将`printf()`只有一个参数的`puts()`函数调用转换为函数调用。

您还可以通过使用诸如`-fno-builtin-printf`. [这](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)是您可以阻止 GCC 转换的内置函数的完整列表。

[这](http://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html)是标志的详细说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T20:03:20.570

正如用户[unwind](https://stackoverflow.com/questions/15502403/where-do-i-find-the-assembly-code-for-a-procedure-called-in-the-gcc-assembly-out#comment21949969_15502403)提到的：

> 这是因为您的 C 程序期望与其中包含的标准 C 运行时库链接`puts()`。如果您愿意，您当然可以在反汇编时挖掘系统上的库文件。

于是我用**objdump**反汇编`libc.a`，在section下找到了汇编代码`<puts>`：`objdump -d /usr/lib/x86_64-linux-gnu/libc.a`

# c# - 关闭入站套接字会导致重新读取旧数据

> ID：15502405
> 
> 赞同：1
> 
> 时间：2013-03-19T14:36:14.883
> 
> 标签：c#, sockets, shutdown

我正在寻求有关关闭侦听套接字的帮助。我遇到的问题是，当我`Shutdown()`之前调用时`Close()`，这两个调用之一似乎触发了对接收到的最后一个数据的套接字的虚假读取。请问我该如何阻止？

我的应用程序有两对套接字，就像 FTP 一样。一个是连接到远程服务器的客户端，另一个是侦听并接受来自远程主机的第二个连接的服务器。此入站连接连接到异步`OnReceived`以处理从远程主机传来的未经请求的数据。

这一切正常，两个套接字可以保持连接数天或数周。但如果出现问题，我的反应是关闭一切并重新开始。在调用其中一个`inboundSocket.Shutdown()`或`inbounSocket.Close()`（不确定是哪个，很难在第二个线程中调试）期间，就好像我正在重新读取入站套接字上的最后一个入站数据包。这会导致更多的问题。

我怎么能关机。关闭、断开连接等而不强制重新读取？

下面的示例代码，被剥离以显示细节。

提前致谢。

丹尼尔

```
public class TcpIpSenderReceiver
{ 
    /// <summary>
    /// Main thread, main entry point 
    /// </summary>
    public void ConnectAndLogonAndStartReceivingInboundMessages()
    {   
        CreateListenerAndStartListening();
        AcceptInboundSocketAndHookUpDataReceiptCallBack();          
    }

    /// <summary>
    /// Main thread
    /// </summary>
    int CreateListenerAndStartListening()
    { 
        tcpListener = new TcpListener(LocalBoundIpAddress, listeningPort);
        tcpListener.Start();        
    }

    /// <summary>
    /// SECOND thread
    /// </summary>
    void AcceptInboundSocketAndHookUpDataReceiptCallBack()
    {
        int i = 0;
        while (i < 100 && !tcpListener.Pending())
        {
            i++;
            Thread.Sleep(100);
        }
        inboundSocket = tcpListener.AcceptSocket();
        bufferForReceive = new byte[bufferSize];
        WireUpCallbackForAsynchReceive();
    }

    /// <summary>
    /// SECOND thread
    /// </summary>
    void WireUpCallbackForAsynchReceive()
    {
        if (asynchCallbackFunctionForReceive == null)
        {
            asynchCallbackFunctionForReceive = new AsyncCallback(OnDataReceived);
        }
        if (inboundSocket.Connected)
        {
            try
            {
                asyncResultForReceive = inboundSocket.BeginReceive(bufferForReceive, 0, bufferForReceive.Length, SocketFlags.None, asynchCallbackFunctionForReceive, null);
            }
            catch (Exception)
            {
                //...
            }
        }
    }

    /// <summary>
    /// SECOND thread
    /// </summary>
    void OnDataReceived(IAsyncResult asyn)
    {
        // Read data call goes here.....

        if (asyncResultForReceive != null)
        {
            inboundSocket.EndReceive(asyncResultForReceive);  
        }
        WireUpCallbackForAsynchReceive();  // listen again for next inbound message
    } 

    void Shutdown()
    {
        shouldAbortThread = true;
        asyncResultForReceive = null;
        asynchCallbackFunctionForReceive = null;
        if (outboundStreamWriter != null)
        {
            try
            {
                outboundStreamWriter.Close();
                outboundStreamWriter.Dispose();
                outboundStreamWriter = null;
            }
            finally { }
        }
        if (outboundNetworkStream != null)
        {
            try
            {
                outboundNetworkStream.Close();
                outboundNetworkStream.Dispose();
                outboundNetworkStream = null;
            }
            finally { }
        }
        if (tcpClient != null)
        {
            try
            {
                tcpClient.Close();
                tcpClient = null;
            }
            catch (SocketException)
            {
                // ...
            }
        }
        if (inboundSocket != null)
        {
            try
            {
                // I think this is where it's puking
                inboundSocket.Shutdown(SocketShutdown.Both);
                inboundSocket.Close();
                inboundSocket = null;
            }
            catch (SocketException)
            {
                //...
            }
        }
        if (tcpListener != null)
        {
            try
            {
                tcpListener.Stop();
                tcpListener = null;
            }
            catch (SocketException)
            {
                //...
            }
        }
    }

    #region Local variables

    volatile bool shouldAbortThread;
    TcpListener tcpListener;
    TcpClient tcpClient;
    StreamWriter outboundStreamWriter;
    NetworkStream outboundNetworkStream;
    Socket inboundSocket = null;
    IAsyncResult asyncResultForReceive;
    public AsyncCallback asynchCallbackFunctionForReceive;
    byte[] bufferForReceive;
    static string HostnameShared;
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:53:55.567

In `OnDataReceived` it looks (from the comment, and the fact that you ignore the return value of `EndReceive`) that you're processing the data in the buffer before having called `EndReceive` on `inboundSocket`. If this is the case, you have no indication of the number of bytes that were actually read from the socket (which would likely be 0 if the socket is being shut down), and so you're processing the data still in the buffer from the previous read, hence the appearance of re-reading old data.

You need to call `EndReceive` *before* attempting to process any data. Something like:

```
void OnDataReceived(IAsyncResult asyn)
{
    var bytesRead = inboundSocket.EndReceive(asyn);
    if (bytesRead == 0) return; // Socket is closed

    // Process the data here

    WireUpCallbackForAsynchReceive();  // listen again for next inbound message
} 
```

Furthermore, the fact that you weren't checking the return value of `EndReceive` suggests that you're expecting each receive to return either an entire buffer's worth of data, or perhaps the same number of bytes as were sent by the server in it's call to `Send`/`BeginSend`, which is not always the case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T10:14:14.740

我解决了这个问题，如下所示。我没有提供回调函数并让框架处理第二个线程，而是显式地启动了我自己的工作线程并让它阻塞直到接收到数据。如果接收到零字节，我知道另一端正在关闭并且可以很好地终止我的一端。我想分享的唯一问题是我需要尝试捕获阻塞的 socket.Receive() 函数并处理 SocketError.Interrupted 异常。这发生在主程序终止时。

代码看起来有点像这样：

```
 Thread dataReceivedWorkerThread;

    void AcceptInboundSocketAndStartWorkerThread()
    {            
        inboundSocket = tcpListener.AcceptSocket();
        dataReceivedWorkerThread = new Thread(new ThreadStart(ListenForAndWaitToReceiveInboundData));
        dataReceivedWorkerThread.Start();
    }

    void ListenForAndWaitToReceiveInboundData()
    {
            var bytesRead = 0;
            try
            {
                bytesRead = inboundSocket.Receive(bufferForReceive, 0, bufferForReceive.Length, SocketFlags.None); // blocks here                   
            }
            catch (SocketException se)
            {
                if (se.SocketErrorCode == SocketError.Interrupted) 
                {
                    // Handle shutdown by (e.g.) parent thread....                      
                }
                else
                {
                    // handle other
                }
                return;
            }
            if (bytesRead == 0)
            {
                // handle shutdown from other end
                return;
            }

            // Do stuff with received data....
        }
    } 
```

# javascript - 从字符串javascript中删除所有字符

> ID：15502407
> 
> 赞同：0
> 
> 时间：2013-03-19T14:36:18.460
> 
> 标签：javascript, jquery

```
$('.hourfield').focusout(function() {

    var h;
    var m;
    var timeStr = "";
    var time = "";
    var newFormat = "";

    timeStr = $(this).val();

    //Here I would like to remove all characters which isn't numbers
    timeStr = timeStr.replace("/[^0-9\.]+/g","");

    if(timeStr > 0) {

        h = timeStr.substr(0,2);
        m = timeStr.substr(2,2);

        newFormat = h+':'+m;

        //Add new values
        $(this).val(newFormat);
    }

}); 
```

[网站网址](https://dl.dropbox.com/u/20082618/kalendarium-2/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:40:04.423

您已通过将正则表达式括在引号中来指定要替换的字符串。删除引号以指定正则表达式。

```
timeStr = timeStr.replace(/[^0-9\.]+/g,""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:39:49.450

```
$('.hourfield').focusout(function() {

    var h;
    var m;
    var timeStr = "";
    var CleanTimeStr = "";
    var newFormat = "";

    timeStr = $(this).val(); 
```

> 我对 replace() 规则做了一些小改动，只是删除了主要目的的“点”

```
 CleanTimeStr = timeStr.replace(/[.]+/g,"");

    if(CleanTimeStr > 0) {

        h = CleanTimeStr.substr(0,2);
        m = CleanTimeStr.substr(2,2);

        newFormat = h+':'+m;

        //Add new values
        $(this).val(newFormat);
    }
}); 
```

所以现在它工作正常，谢谢！

# mysql - 原则 2：使用默认 0 值而不是 null 来表示关系

> ID：15502408
> 
> 赞同：6
> 
> 时间：2013-03-19T14:36:19.863
> 
> 标签：mysql, doctrine-orm, doctrine

是否可以使用值 0 而不是 null 用于与 Doctrine 2 的关系（多对一、一对一）？

现在我有很多 NOT NULL 列，我可能不会更改为空值。将 MySQL 中的默认值更改为 0 它本身不是解决方案，因为原则总是设置用于插入/更新行的列。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T22:27:21.193

不，这是不可能的。

`NULL`在 SQL 中具有非常特定的含义。它代表“没有价值”，您可以验证您的逻辑即使在 SQL 级别也不起作用：

```
CREATE TABLE foo (
    `id` INT(11) PRIMARY KEY AUTO_INCREMENT,
    `bar_id` INT(11)
);

CREATE TABLE `bar` (`id` INT(11) PRIMARY KEY AUTO_INCREMENT);

ALTER TABLE foo ADD FOREIGN KEY `bar_id_fk` (`bar_id`) REFERENCES `bar` (`id`);

INSERT INTO `bar` VALUES (NULL);
INSERT INTO `bar` VALUES (NULL);
INSERT INTO `bar` VALUES (NULL);
INSERT INTO `foo` VALUES (NULL, 1);
INSERT INTO `foo` VALUES (NULL, 2);
INSERT INTO `foo` VALUES (NULL, 3);
INSERT INTO `foo` VALUES (NULL, 0);

/*
    ERROR 1452 (23000): 
        Cannot add or update a child row: a foreign key constraint fails
        (`t2`.`foo`, CONSTRAINT `foo_ibfk_1` FOREIGN KEY (`bar_id`) 
        REFERENCES `bar` (`id`))
*/

INSERT INTO `foo` VALUES (NULL, 4);

/*
    ERROR 1452 (23000): 
        Cannot add or update a child row: a foreign key constraint fails
        (`t2`.`foo`, CONSTRAINT `foo_ibfk_1` FOREIGN KEY (`bar_id`) 
        REFERENCES `bar` (`id`))
*/

INSERT INTO `foo` VALUES (NULL, NULL); /* VALID! */ 
```

所以不，你不能让 Doctrine ORM 的行为`0`被解释为`NULL`，因为 RDBMS 本身不允许这样做。

您可以做的是在您的数据库中插入“假”引用的条目，然后在作为实体水合时充当[空对象：](http://en.wikipedia.org/wiki/Null_Object_pattern)

```
INSERT INTO `bar` VALUES (NULL);
UPDATE `bar` SET `id` = 0 WHERE `id` = 4;

INSERT INTO `foo` VALUES (NULL, 0); /* now works! */ 
```

在实体方面，它看起来非常相似。

（请注意，`public`属性仅受 Doctrine ORM 2.4 支持，尚未发布。不过，它们使这里的内容更容易阅读）

Foo.php：

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity()
 * @ORM\Table(name="foo")
 */
class Foo
{
    /**
     * @ORM\Column(type="integer")
     * @ORM\Id()
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    public $id;

    /**
     * @ORM\ManyToOne(targetEntity="Bar")
     * @ORM\JoinColumn(name="bar_id", referencedColumnName="id", nullable=false)
     */
    public $bar;
} 
```

酒吧.php：

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity()
 * @ORM\Table(name="bar")
 */
class Bar
{
    /**
     * @ORM\Column(type="integer")
     * @ORM\Id()
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    public $id;
} 
```

然后是生成新`Foo`实例的代码：

```
$nullBar  = $entityManager->find('Bar', 0);
$foo      = new Foo();
$foo->bar = $nullBar;

$em->persist($foo);
$em->flush(); 
```

# bazaar - 集市结帐错误

> ID：15502411
> 
> 赞同：6
> 
> 时间：2013-03-19T14:36:24.463
> 
> 标签：bazaar

我在我拥有 rwx 权限的文件夹中，我尝试了这个

`bzr branch bzr+ssh://bazaar.launchpad.net/%2Bbranch/openobject-addons/7.0/`

当他们要求存储公钥时，我回答“是”

但是出现了以下错误信息

`权限被拒绝（公钥）。ConnectionReset 读取“BzrDir.open_2.1”的响应，重试权限被拒绝（公钥）。bzr：错误：连接已关闭：消息意外结束。请检查连接和权限，如果问题仍然存在，请报告错误。

它是一个公共回购，所以不应该有任何访问权限问题。链接有问题吗？我如何验证这一点？`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T06:34:07.597

如果您的启动板用户未在 Bazaar 中正确设置，则可能会发生这种情况。检查以下输出：

```
bzr lp-login 
```

如果输出不是您的启动板用户，或者它是但您的 ssh 密钥未授权，那么这将导致您遇到的问题。修正您的用户名并上传正确的 ssh 公钥。

**解释**

如果您告诉 Bazaar Launchpad 用户名，则 Launchpad 会尝试验证只读操作*，*例如：

```
$ bzr lp-login jelmer
$ bzr info lp:bzr
Permission denied (publickey).
ConnectionReset reading response for 'BzrDir.open_2.1', retrying
Permission denied (publickey).
bzr: ERROR: Connection closed: Unexpected end of message. Please check connectivity and permissions, and report a bug if problems persist. 
```

“权限被拒绝”，因为我不是`jelmer`，而且他当然没有授权我的密钥。

因此，首先检查您告诉 Bazaar 的 Launchpad 用户名，如果不是您，请更改它，例如：

```
$ bzr lp-login  # ain't gonna be me...
jelmer
$ bzr lp-login janos-gyerik  # yeah that's me! 
```

如果是正确的用户名，请访问您在 Launchpad 上的设置页面并确保您的公钥在此处列出：[https ://launchpad.net/~YOUR_USERNAME](https://launchpad.net/~YOUR_USERNAME)

或者，您可以使用以下命令删除 Launchpad 用户名设置：

```
bzr config --remove launchpad_username --scope bazaar 
```

但是，当您`bzr`在 Launchpad 分支上运行命令时，如果您尚未设置 Launchpad 用户名，则会收到警告。（没关系，如果您不想写入 Launchpad，可以忽略它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:44:26.223

我现在可以用你的命令很好地分支它，也许你使用的集市版本太旧了。有时会出现问题的另一件事是不允许 ssh 输出的公司防火墙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T20:35:37.050

如果您在代理后面，则需要通过隧道（使用开瓶器）进行 SSH。
我遇到了同样的问题，执行以下步骤解决了我的错误：

*   在您的机器上安装开瓶器
*   将以下行添加到`~/.ssh/config`

    ```
    Host bazaar.launchpad.net
        User <launchpad-username>
        ProxyCommand corkscrew <proxy-address> <proxy-port> %h %p 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-09T21:44:15.500

我在使用 Launchpad 的自定义 SSH 密钥时遇到了这个问题。我通过添加以下行来解决它`~/.ssh/config`：

```
Host bazaar.launchpad.net
    IdentityFile  /home/me/.ssh/id_rsa_launchpad
    User launchpad-username 
```

参考：[https ://help.launchpad.net/YourAccount/CreatingAnSSHKeyPair#Using_a_custom_SSH_key_for_Launchpad](https://help.launchpad.net/YourAccount/CreatingAnSSHKeyPair#Using_a_custom_SSH_key_for_Launchpad)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-23T13:14:36.173

当我尝试通过程序 puttygen.exe 创建 SSH 密钥时，我遇到了这个错误。当我按照链接[https://askubuntu.com/a/144858](https://askubuntu.com/a/144858)指定的方式创建 SSH 密钥时，一切都发生了。谢谢。

# r - 使用 R 创建大型多列频率表

> ID：15502412
> 
> 赞同：0
> 
> 时间：2013-03-19T14:36:27.273
> 
> 标签：r, frequency, contingency

我很难有效地做到这一点，如果这是一个基本问题，我深表歉意。我需要制作一个包含 N 和百分比的列联表来总结大量二元变量之间的关系，仅根据频率和百分比，没有其他汇总统计信息。

具体来说，它是总结具有样本类型 X 和临床结果 Y 的患者数量。一个患者可以有任意数量的结果和任意数量的样本，即每个变量是非互斥且独立的。

我想将所有结果（死亡、ICU 入院、腿脱落...）作为列，并将所有样本类型（血清、尿液等...）作为行。我只需要列出“阳性”反应的频率和百分比，即 N 和死亡和有尿样的患者的百分比。

有没有可以帮助这种桌子的软件包？我发现的所有东西都适合做一个漂亮的 1xN 变量列联表。如果我能以某种方式提取该输出的一列并将它们绑定到一个主表中以统治它们，我不介意为每个结果制作一个单独的表。另一个想法是以某种方式制作两个 mChoice（Hmisc 包）变量的频率表。我不知道这两种策略是否可行。

有任何想法吗？

我正在寻找的是这样的：

```
+-------------+--------+---------+
|             | Death  | ICU     |
|             | (N=10) | (N=50)  |
+-------------+--------+---------+
|Serum (N=50) |5 (50%) | 30 (60%)|
+-------------+--------+---------+
|Urine (N=40) |10(100%)| 7 (14%) |
+-------------+--------+---------+
|Brain (N=25) |6 (60%) | 15 (30%)|
+-------------+--------+---------+
|Kidney (N=50)|7 (70%) | 40 (80%)|
+-------------+--------+---------+ 
```

编辑以包含示例数据：

```
set.seed(1)
death<-runif(1000)<=.75
ICU<-runif(1000)<=.63
serum<-runif(1000)<=.80
urine<-runif(1000)<=.77
brain<-runif(1000)<=.92
kidney<-runif(1000)<=.22
df<-as.data.frame(cbind((1:1000),death,ICU,serum,urine,brain,kidney)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-27T09:41:14.930

这是使用该`data.table`软件包的简单快速的解决方案。

```
library(data.table)

# convert your data frame to data.table
  setDT(df)

# create the output for serum
  serum <- df[serum==1, .(test="serum",
                          test.N = .N, 
                          death.count = sum(death),
                          death.N = sum(df$death),
                          death.prop=(sum(death)/sum(df$death))*100,
                          icu.count = sum(ICU),
                          icu.N = sum(df$ICU),
                          icu.prop=(sum(ICU)/sum(df$ICU))*100),
                          by=.(serum)]

# create the output for kidney
  kidney<- df[kidney==1, .(test="kidney",
                          test.N = .N, 
                          death.count = sum(death),
                          death.N = sum(df$death),
                          death.prop=(sum(death)/sum(df$death))*100,
                          icu.count = sum(ICU),
                          icu.N = sum(df$ICU),
                          icu.prop=(sum(ICU)/sum(df$ICU))*100),
                          by=.(kidney)]

# Bind outputs into a table
  table <- rbind( serum[,2:9,with = FALSE],
                  kidney[,2:9,with = FALSE])

table
>      test test.N death.count death.N death.prop icu.count icu.N icu.prop
> 1:  serum    806         602     752   80.05319       511   632 80.85443
> 2: kidney    190         141     752   18.75000       128   632 20.25316 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:45:49.487

编辑：这是与原始海报讨论问题后提供的修订答案。下面保留了一个不能解决手头问题的旧答案以供后代使用。

这个答案既不简短也不简洁，我希望有一种更清洁的方法。但以下将起作用：

```
## generate example data
set.seed(1)
death<-runif(1000)<=.75
ICU<-runif(1000)<=.63
serum<-runif(1000)<=.80
urine<-runif(1000)<=.77
brain<-runif(1000)<=.92
kidney<-runif(1000)<=.22
df<-as.data.frame(cbind((1:1000),death,ICU,serum,urine,brain,kidney))

## load up our data manipulation workhorses
library(reshape2)
library(plyr)

## save typing by saving row and column var names
row.vars <- c("serum", "urine", "brain", "kidney")
col.vars <- c("death", "ICU")

## melt data so we have death/icu in a column
dat.m <- melt(df, measure.vars = row.vars)

## get rid of rows with death==0 and ICU==0
dat.m <- dat.m[dat.m$value == 1, ]

## for each of death and icu calculate proportion of 1's
tab <- ddply(dat.m, "variable", function(DF) {
  colwise(function(x) length(x[x==1]))(DF[col.vars])
})

## calculate overall proportions for row and column vars
row.nums <- sapply(df[row.vars], function(x) length(x[x==1]))
col.nums <- sapply(df[col.vars], function(x) length(x[x==1]))

## paste row and column counts into row and column names
rownames(tab) <- paste(tab$variable, " (N=", row.nums, ")", sep="")
tab$variable <- NULL
colnames(tab) <- paste(names(tab), " (N=", col.nums, ")", sep="")

## calculate cell proportions and paste them in one column at a time
tab[[1]] <- paste(tab[[1]],
                  " (",
                  round(100*(tab[[1]]/col.nums[[1]]), digits=2),
                  "%)",
                  sep="")
tab[[2]] <- paste(tab[[2]],
                  " (",
                  round(100*(tab[[2]]/col.nums[[2]]),
                        digits=2),
                  "%)",
                  sep="") 
```

现在我们可以

```
## behold the fruits of our labor
tab
               death (N=752)  ICU (N=632)
serum (N=806)   602 (80.05%) 511 (80.85%)
urine (N=739)   556 (73.94%)  462 (73.1%)
brain (N=910)   684 (90.96%) 576 (91.14%)
kidney (N=190)  141 (18.75%) 128 (20.25%) 
```

旧答案（不能解决手头的问题，但可能对相关任务有用）

这是看起来应该很容易的事情之一，但不知何故并非如此。

一旦您准备好将两列制成表格，就有一个[现有问题可以解决这个问题。](https://stackoverflow.com/questions/9438193/getting-both-column-counts-and-proportions-in-the-same-table-in-r)那部分很简单：

```
# function to genderate example data
mkdat <- function() factor(sample(letters[1:4], 10, replace=TRUE), levels=letters[1:4])

# make example data
set.seed(10)
dat <- data.frame(id = 1:10, var1 = mkdat(), var2=mkdat(), var3=mkdat())

# use reshape2 package to reshape from wide to long form
library(reshape2)
dat.m <- melt(dat, id.vars="id")
dat.m$value <- factor(dat.m$value) 
```

现在交叉表`dat.m$variable`并`dat.m$value`给出正确的单元格。您可以参考上面的链接问题，了解如何从那里继续获取表格中的计数和百分比，或者您可以使用此方法：

```
# tabulate
library(plyr)
tab <- ddply(dat.m, "variable",
             function(DF) {
               # get counts with table
               count <- table(DF$value)
               # convert counts to percent
               prop <- paste(prop.table(count)*100, "%", sep="")
               # combine count and percent
               cp <- paste(count, " (", prop, ")", sep="")
               # re-attach the names
               names(cp) <- levels(DF$value)
               return(cp)
             })

# get row n
tab.r <- table(dat.m$variable)
# get column n
tab.c <- table(dat.m$value)
# paste row and column n into row and column names
colnames(tab) <- paste(colnames(tab), " (n = ", tab.c, ")", sep="")
rownames(tab) <- paste(tab$variable, " (n = ", tab.r, ")", sep="")
tab$variable <- NULL

# works, but that was way too much effort.
print(tab) 
```

必须承认，对于一个简单的计数和比例表来说，这是很多工作。如果有人提出一种更简单的方法，我会很高兴。

# iphone - 如何在 iOS 中以编程方式将“国家代码”转换为“移动国家代码”？

> ID：15502413
> 
> 赞同：3
> 
> 时间：2013-03-19T14:36:33.840
> 
> 标签：iphone, ios, geocoding, country-codes, mobile-country-code

我可以从 NSLocale 或[GeoPlugin](http://www.geoplugin.com)获取国家代码（ISO 3166“两个字母代码”） 。

但我的要求是获得 MCC（移动国家代码）。我需要使用设备的当前 mcc 调用一个 REST API 以确定用户是在家还是在国外。

我考虑过使用 MCC 和 CC 作为键值对来保留本地数据库。但是，如果我将数据库与捆绑包一起打包，这将不是最新的。

在 SO 中问这个问题之前，我搜索了很多。无论如何，是否可以使用任何 iOS API 或任何第三方网站将 CC 转换为 MCC？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-21T11:17:04.950

对于手动，您可以使用它

```
NSDictionary *dictDialingCodes = [[NSDictionary alloc]initWithObjectsAndKeys:
                    @"972", @"IL",
                    @"93", @"AF",
                    @"355", @"AL",
                    @"213", @"DZ",
                    @"1", @"AS",
                    @"376", @"AD",
                    @"244", @"AO",
                    @"1", @"AI",
                    @"1", @"AG",
                    @"54", @"AR",
                    @"374", @"AM",
                    @"297", @"AW",
                    @"61", @"AU",
                    @"43", @"AT",
                    @"994", @"AZ",
                    @"1", @"BS",
                    @"973", @"BH",
                    @"880", @"BD",
                    @"1", @"BB",
                    @"375", @"BY",
                    @"32", @"BE",
                    @"501", @"BZ",
                    @"229", @"BJ",
                    @"1", @"BM", @"975", @"BT",
                    @"387", @"BA", @"267", @"BW", @"55", @"BR", @"246", @"IO",
                    @"359", @"BG", @"226", @"BF", @"257", @"BI", @"855", @"KH",
                    @"237", @"CM", @"1", @"CA", @"238", @"CV", @"345", @"KY",
                    @"236", @"CF", @"235", @"TD", @"56", @"CL", @"86", @"CN",
                    @"61", @"CX", @"57", @"CO", @"269", @"KM", @"242", @"CG",
                    @"682", @"CK", @"506", @"CR", @"385", @"HR", @"53", @"CU",
                    @"537", @"CY", @"420", @"CZ", @"45", @"DK", @"253", @"DJ",
                    @"1", @"DM", @"1", @"DO", @"593", @"EC", @"20", @"EG",
                    @"503", @"SV", @"240", @"GQ", @"291", @"ER", @"372", @"EE",
                    @"251", @"ET", @"298", @"FO", @"679", @"FJ", @"358", @"FI",
                    @"33", @"FR", @"594", @"GF", @"689", @"PF", @"241", @"GA",
                    @"220", @"GM", @"995", @"GE", @"49", @"DE", @"233", @"GH",
                    @"350", @"GI", @"30", @"GR", @"299", @"GL", @"1", @"GD",
                    @"590", @"GP", @"1", @"GU", @"502", @"GT", @"224", @"GN",
                    @"245", @"GW", @"595", @"GY", @"509", @"HT", @"504", @"HN",
                    @"36", @"HU", @"354", @"IS", @"91", @"IN", @"62", @"ID",
                    @"964", @"IQ", @"353", @"IE", @"972", @"IL", @"39", @"IT",
                    @"1", @"JM", @"81", @"JP", @"962", @"JO", @"77", @"KZ",
                    @"254", @"KE", @"686", @"KI", @"965", @"KW", @"996", @"KG",
                    @"371", @"LV", @"961", @"LB", @"266", @"LS", @"231", @"LR",
                    @"423", @"LI", @"370", @"LT", @"352", @"LU", @"261", @"MG",
                    @"265", @"MW", @"60", @"MY", @"960", @"MV", @"223", @"ML",
                    @"356", @"MT", @"692", @"MH", @"596", @"MQ", @"222", @"MR",
                    @"230", @"MU", @"262", @"YT", @"52", @"MX", @"377", @"MC",
                    @"976", @"MN", @"382", @"ME", @"1", @"MS", @"212", @"MA",
                    @"95", @"MM", @"264", @"NA", @"674", @"NR", @"977", @"NP",
                    @"31", @"NL", @"599", @"AN", @"687", @"NC", @"64", @"NZ",
                    @"505", @"NI", @"227", @"NE", @"234", @"NG", @"683", @"NU",
                    @"672", @"NF", @"1", @"MP", @"47", @"NO", @"968", @"OM",
                    @"92", @"PK", @"680", @"PW", @"507", @"PA", @"675", @"PG",
                    @"595", @"PY", @"51", @"PE", @"63", @"PH", @"48", @"PL",
                    @"351", @"PT", @"1", @"PR", @"974", @"QA", @"40", @"RO",
                    @"250", @"RW", @"685", @"WS", @"378", @"SM", @"966", @"SA",
                    @"221", @"SN", @"381", @"RS", @"248", @"SC", @"232", @"SL",
                    @"65", @"SG", @"421", @"SK", @"386", @"SI", @"677", @"SB",
                    @"27", @"ZA", @"500", @"GS", @"34", @"ES", @"94", @"LK",
                    @"249", @"SD", @"597", @"SR", @"268", @"SZ", @"46", @"SE",
                    @"41", @"CH", @"992", @"TJ", @"66", @"TH", @"228", @"TG",
                    @"690", @"TK", @"676", @"TO", @"1", @"TT", @"216", @"TN",
                    @"90", @"TR", @"993", @"TM", @"1", @"TC", @"688", @"TV",
                    @"256", @"UG", @"380", @"UA", @"971", @"AE", @"44", @"GB",
                    @"1", @"US", @"598", @"UY", @"998", @"UZ", @"678", @"VU",
                    @"681", @"WF", @"967", @"YE", @"260", @"ZM", @"263", @"ZW",
                    @"591", @"BO", @"673", @"BN", @"61", @"CC", @"243", @"CD",
                    @"225", @"CI", @"500", @"FK", @"44", @"GG", @"379", @"VA",
                    @"852", @"HK", @"98", @"IR", @"44", @"IM", @"44", @"JE",
                    @"850", @"KP", @"82", @"KR", @"856", @"LA", @"218", @"LY",
                    @"853", @"MO", @"389", @"MK", @"691", @"FM", @"373", @"MD",
                    @"258", @"MZ", @"970", @"PS", @"872", @"PN", @"262", @"RE",
                    @"7", @"RU", @"590", @"BL", @"290", @"SH", @"1", @"KN",
                    @"1", @"LC", @"590", @"MF", @"508", @"PM", @"1", @"VC",
                    @"239", @"ST", @"252", @"SO", @"47", @"SJ", @"963",
                    @"SY",@"886",
                    @"TW", @"255",
                    @"TZ", @"670",
                    @"TL",@"58",
                    @"VE",@"84",
                    @"VN",
                    @"284", @"VG",
                    @"340", @"VI",
                    @"678",@"VU",
                    @"681",@"WF",
                    @"685",@"WS",
                    @"967",@"YE",
                    @"262",@"YT",
                    @"27",@"ZA",
                    @"260",@"ZM",
                    @"263",@"ZW",
                    nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:54:26.680

如果我正确理解您的问题，您希望实现以下目标：

```
CTTelephonyNetworkInfo *info = [CTTelephonyNetworkInfo new];
CTCarrier *carrier = info.subscriberCellularProvider;

NSLog(@"MCC >> %@", carrier.mobileCountryCode); 
```

也许此代码可用于调整它，以便您可以输入动态国家代码而不是subscriberCellularProvider。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-23T13:18:17.783

```
- (NSDictionary *)callingCodeMap
{
    return @{
        @"AD" : @"+376",
        @"AE" : @"+971",
        @"AF" : @"+93",
        @"AG" : @"+1268",
        @"AI" : @"+1264",
        @"AL" : @"+355",
        @"AM" : @"+374",
        @"AN" : @"+599",
        @"AO" : @"+244",
        @"AQ" : @"+672",
        @"AR" : @"+54",
        @"AS" : @"+1684",
        @"AT" : @"+43",
        @"AU" : @"+61",
        @"AW" : @"+297",
        @"AZ" : @"+994",
        @"BA" : @"+387",
        @"BB" : @"+1246",
        @"BD" : @"+880",
        @"BE" : @"+32",
        @"BF" : @"+226",
        @"BG" : @"+359",
        @"BH" : @"+973",
        @"BI" : @"+257",
        @"BJ" : @"+229",
        @"BL" : @"+590",
        @"BM" : @"+1441",
        @"BN" : @"+673",
        @"BO" : @"+591",
        @"BR" : @"+55",
        @"BS" : @"+1242",
        @"BT" : @"+975",
        @"BW" : @"+267",
        @"BY" : @"+375",
        @"BZ" : @"+501",
        @"CA" : @"+1",
        @"CC" : @"+61",
        @"CD" : @"+243",
        @"CF" : @"+236",
        @"CG" : @"+242",
        @"CH" : @"+41",
        @"CI" : @"+225",
        @"CK" : @"+682",
        @"CL" : @"+56",
        @"CM" : @"+237",
        @"CN" : @"+86",
        @"CO" : @"+57",
        @"CR" : @"+506",
        @"CU" : @"+53",
        @"CV" : @"+238",
        @"CX" : @"+61",
        @"CY" : @"+357",
        @"CZ" : @"+420",
        @"DE" : @"+49",
        @"DJ" : @"+253",
        @"DK" : @"+45",
        @"DM" : @"+1767",
        @"DO" : @"+1809",
        @"DZ" : @"+213",
        @"EC" : @"+593",
        @"EE" : @"+372",
        @"EG" : @"+20",
        @"ER" : @"+291",
        @"ES" : @"+34",
        @"ET" : @"+251",
        @"FI" : @"+358",
        @"FJ" : @"+679",
        @"FK" : @"+500",
        @"FM" : @"+691",
        @"FO" : @"+298",
        @"FR" : @"+33",
        @"GA" : @"+241",
        @"GB" : @"+44",
        @"GD" : @"+1473",
        @"GE" : @"+995",
        @"GH" : @"+233",
        @"GI" : @"+350",
        @"GL" : @"+299",
        @"GM" : @"+220",
        @"GN" : @"+224",
        @"GQ" : @"+240",
        @"GR" : @"+30",
        @"GT" : @"+502",
        @"GU" : @"+1671",
        @"GW" : @"+245",
        @"GY" : @"+592",
        @"HK" : @"+852",
        @"HN" : @"+504",
        @"HR" : @"+385",
        @"HT" : @"+509",
        @"HU" : @"+36",
        @"ID" : @"+62",
        @"IE" : @"+353",
        @"IL" : @"+972",
        @"IM" : @"+44",
        @"IN" : @"+91",
        @"IQ" : @"+964",
        @"IR" : @"+98",
        @"IS" : @"+354",
        @"IT" : @"+39",
        @"JM" : @"+1876",
        @"JO" : @"+962",
        @"JP" : @"+81",
        @"KE" : @"+254",
        @"KG" : @"+996",
        @"KH" : @"+855",
        @"KI" : @"+686",
        @"KM" : @"+269",
        @"KN" : @"+1869",
        @"KP" : @"+850",
        @"KR" : @"+82",
        @"KW" : @"+965",
        @"KY" : @"+1345",
        @"KZ" : @"+7",
        @"LA" : @"+856",
        @"LB" : @"+961",
        @"LC" : @"+1758",
        @"LI" : @"+423",
        @"LK" : @"+94",
        @"LR" : @"+231",
        @"LS" : @"+266",
        @"LT" : @"+370",
        @"LU" : @"+352",
        @"LV" : @"+371",
        @"LY" : @"+218",
        @"MA" : @"+212",
        @"MC" : @"+377",
        @"MD" : @"+373",
        @"ME" : @"+382",
        @"MF" : @"+1599",
        @"MG" : @"+261",
        @"MH" : @"+692",
        @"MK" : @"+389",
        @"ML" : @"+223",
        @"MM" : @"+95",
        @"MN" : @"+976",
        @"MO" : @"+853",
        @"MP" : @"+1670",
        @"MR" : @"+222",
        @"MS" : @"+1664",
        @"MT" : @"+356",
        @"MU" : @"+230",
        @"MV" : @"+960",
        @"MW" : @"+265",
        @"MX" : @"+52",
        @"MY" : @"+60",
        @"MZ" : @"+258",
        @"NA" : @"+264",
        @"NC" : @"+687",
        @"NE" : @"+227",
        @"NG" : @"+234",
        @"NI" : @"+505",
        @"NL" : @"+31",
        @"NO" : @"+47",
        @"NP" : @"+977",
        @"NR" : @"+674",
        @"NU" : @"+683",
        @"NZ" : @"+64",
        @"OM" : @"+968",
        @"PA" : @"+507",
        @"PE" : @"+51",
        @"PF" : @"+689",
        @"PG" : @"+675",
        @"PH" : @"+63",
        @"PK" : @"+92",
        @"PL" : @"+48",
        @"PM" : @"+508",
        @"PN" : @"+870",
        @"PR" : @"+1",
        @"PT" : @"+351",
        @"PW" : @"+680",
        @"PY" : @"+595",
        @"QA" : @"+974",
        @"RO" : @"+40",
        @"RS" : @"+381",
        @"RU" : @"+7",
        @"RW" : @"+250",
        @"SA" : @"+966",
        @"SB" : @"+677",
        @"SC" : @"+248",
        @"SD" : @"+249",
        @"SE" : @"+46",
        @"SG" : @"+65",
        @"SH" : @"+290",
        @"SI" : @"+386",
        @"SK" : @"+421",
        @"SL" : @"+232",
        @"SM" : @"+378",
        @"SN" : @"+221",
        @"SO" : @"+252",
        @"SR" : @"+597",
        @"ST" : @"+239",
        @"SV" : @"+503",
        @"SY" : @"+963",
        @"SZ" : @"+268",
        @"TC" : @"+1649",
        @"TD" : @"+235",
        @"TG" : @"+228",
        @"TH" : @"+66",
        @"TJ" : @"+992",
        @"TK" : @"+690",
        @"TL" : @"+670",
        @"TM" : @"+993",
        @"TN" : @"+216",
        @"TO" : @"+676",
        @"TR" : @"+90",
        @"TT" : @"+1868",
        @"TV" : @"+688",
        @"TW" : @"+886",
        @"TZ" : @"+255",
        @"UA" : @"+380",
        @"UG" : @"+256",
        @"US" : @"+1",
        @"UY" : @"+598",
        @"UZ" : @"+998",
        @"VA" : @"+39",
        @"VC" : @"+1784",
        @"VE" : @"+58",
        @"VG" : @"+1284",
        @"VI" : @"+1340",
        @"VN" : @"+84",
        @"VU" : @"+678",
        @"WF" : @"+681",
        @"WS" : @"+685",
        @"YE" : @"+967",
        @"YT" : @"+262",
        @"ZA" : @"+27",
        @"ZM" : @"+260",
        @"ZW" : @"+263",
    };
} 
```

或者试试这个类别：[https ://gist.github.com/kukat/ecf0ef352c597178a81c](https://gist.github.com/kukat/ecf0ef352c597178a81c)

来源：[http ://countrycode.org/](http://countrycode.org/)

# javascript - instanceof 运算符在后续更改继承链时返回 false

> ID：15502415
> 
> 赞同：5
> 
> 时间：2013-03-19T14:36:37.363
> 
> 标签：javascript, prototype

在构造函数上设置原型时，`instanceof`运算符仅`true`在原型更改之前返回。为什么？

```
function SomeConstructorFunction() {
}

function extendAndInstantiate(constructorFn) {
    constructorFn.prototype = {}; //Can be any prototype
    return new constructorFn();
}

var child1 = extendAndInstantiate(SomeConstructorFunction);
console.log(child1 instanceof SomeConstructorFunction); //true

var child2 = extendAndInstantiate(SomeConstructorFunction);
console.log(child1 instanceof SomeConstructorFunction); //false
console.log(child2 instanceof SomeConstructorFunction); //true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:24:08.977

Prototypal inheritance can be a bit of a brain bender. I've already written a simple explanation for prototypal inheritance in the following answer and I suggest you read it: [https://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

Now to answer your question. Consider the following function:

```
function F() {} 
```

I can create an instance of `F` using `new` as follows:

```
var f = new F; 
```

As expected `f instanceof F` returns `true`. This is because the `instanceof` operator checks for `F.prototype` in the prototype chain of `f` and returns `true` if it is there. See the answer I linked to above.

Now say I create a new function `G` as follows and set `F.prototype` to `G.prototype`:

```
function G() {}

F.prototype = G.prototype; 
```

If I now evaluate `f instanceof F` again `false` is returned. This is because `F.prototype` is no longer in the prototype chain of `f` (remember that `F.prototype` is now `G.prototype`).

Now let's create a new instance of `F`:

```
var g = new F; 
```

If you evaluate `g instanceof G` it'll return `true` even though `g = new F`. This is because `G.prototype` exists in the prototype chain of `g`.

This is not a bug. It's the way JavaScript works. In fact we can exploit this feature to create some really interesting functions: [Instantiate JavaScript functions with custom prototypes](https://stackoverflow.com/q/11490606/783743)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:03:02.377

```
constructorFn.prototype = {}; //Can be any prototype 
```

不对！

```
constructorFn.prototype = Object.prototype; 
```

或者任何其他本机原型都会使它们全部真实。

原因是您第一次调用时`extendAndInstantiate()`，将 SomeConstructorFunction 的原型设置为某个东西（这里是一个空对象`{}`）。因为`child1`，instanceOf 只会返回 true，而 SomeConstructorFunction 的原型**是 的确切实例`{}`**。当您`extendAnInstantiate()`第二次运行时，您正在将`SomeConstructorFunction`的原型更改为 的不同实例`{}`，因此`child2`将是那个 new 的 instanceOf `{}`，但`child1`仍然是 old 的一个 instanceOf `{}`，因此`child1`将返回 false，同时`child2`返回 true。如果将原型设置为通用原型，例如`Object.prototype`or `Array.prototype`，它将始终返回 true。

说明这一点的另一种方法是`{}`退出函数，并将其分配给变量`obj`。

```
var obj = {};
function extendAndInstantiate(constructorFn) {
    constructorFn.prototype = obj;
    return new constructorFn();
} 
```

现在这将始终返回 true，因为您不会在`{}`每次运行该函数时都创建一个新函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:18:12.137

每次调用时都会`extendAndInstantiate`使用创建一个新对象，`{}`并将其分配为`SomeConstructorFunction`. 这将清除现有实例和`SomeConstructorFunction`. 所以只有最后一个是`SomeConstructorFunction`.

```
function SomeConstructorFunction() {

}

function extendAndInstantiate(constructorFn) {
  constructorFn.prototype = {}; //New instance as prototype
    return new constructorFn();
}

var child1 = extendAndInstantiate(SomeConstructorFunction);
console.log(child1 instanceof SomeConstructorFunction); //true

var child2 = extendAndInstantiate(SomeConstructorFunction);
console.log(child1 instanceof SomeConstructorFunction); //false
console.log(child2 instanceof SomeConstructorFunction); //true

var child3 = extendAndInstantiate(SomeConstructorFunction);
console.log(child1 instanceof SomeConstructorFunction); //false
console.log(child2 instanceof SomeConstructorFunction); //false
console.log(child3 instanceof SomeConstructorFunction); //true 
```

因此，您可以遵循@ben336 显示的方法，也可以在分配原型之前进行条件检查，如下所示。

```
function Base(){

}

function SomeConstructorFunction() {

}

function extendAndInstantiate(constructorFn, Base) {
  if(!(constructorFn.prototype instanceof Base)){
    console.log(" extend only once ");
    constructorFn.prototype = new Base(); 
  }
  return new constructorFn();
}

var child1 = extendAndInstantiate(SomeConstructorFunction, Base);
console.log(child1 instanceof SomeConstructorFunction); //true

var child2 = extendAndInstantiate(SomeConstructorFunction, Base);
console.log(child1 instanceof SomeConstructorFunction); //true
console.log(child2 instanceof SomeConstructorFunction); //true

var child3 = extendAndInstantiate(SomeConstructorFunction, Base);
console.log(child1 instanceof SomeConstructorFunction); //true
console.log(child2 instanceof SomeConstructorFunction); //true
console.log(child3 instanceof SomeConstructorFunction); //true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:08:48.250

`instanceof`是基于原型对象的。

```
function extendAndInstantiate(constructorFn) {
constructorFn.prototype = {}; //Can be any prototype
... 
```

当您将原型设置为 {} 时，您正在创建一个新对象并将其设置为原型。因为它与原型不是同一个对象，所以`instanceof`返回 false。

像这样的设置将在所有情况下返回 true，因为原型将是同一个对象：

```
function SomeConstructorFunction() {
}

var emptyObj = {};

function extendAndInstantiate(constructorFn) {
    constructorFn.prototype = emptyObj; 
    return new constructorFn();
}

var child1 = extendAndInstantiate(SomeConstructorFunction);
console.log(child1 instanceof SomeConstructorFunction); //true

var child2 = extendAndInstantiate(SomeConstructorFunction);
console.log(child1 instanceof SomeConstructorFunction); //true
console.log(child2 instanceof SomeConstructorFunction); //true 
```

# amazon-web-services - 如何在 Amazon S3 中使用浏览器缓存？

> ID：15502416
> 
> 赞同：19
> 
> 时间：2013-03-19T14:36:39.180
> 
> 标签：amazon-web-services, amazon-s3, amazon-cloudfront

我在 gtmetrix.com 上得到以下信息：

```
Leverage browser caching    
E (55)
52%
Server  High
What does this mean?
The following cacheable resources have a short freshness lifetime. Specify an expiration at least one week in the future for the following resources:

http://mysite.s3.amazonaws.com/profile.png (expiration not specified)
http://mysite.s3.amazonaws.com/circle.player.css (expiration not specified)
http://mysite.s3.amazonaws.com/main.js (expiration not specified)
http://mysite.s3.amazonaws.com/not.the.skin.css (expiration not specified)
http://cdn-images.mailchimp.com/embedcode/slim-321711.css (expiration not specified) 
```

我猜 mailchimp 文件无法修改。但是如何为 Amazon S3 Cloudfront 文件指定浏览器缓存？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2017-05-03T22:53:52.983

### 通过亚马逊管理控制台，选择您的文件（或文件夹）。

[![在此处输入图像描述](../Images/016a0b37de4a179d17dbe1babb4f350d.png)](https://i.stack.imgur.com/0yjY8.png)

* * *

### 转到属性选项卡，然后单击元数据。

[![在此处输入图像描述](../Images/1eceb1610234aad93c5f88c5dc96a5f9.png)](https://i.stack.imgur.com/J7sfK.png)

* * *

### 最后，将 Cache-Control 添加到其标题并保存。

[![在此处输入图像描述](../Images/d5f1d24f3d1a3447656c0cb0bced074c.png)](https://i.stack.imgur.com/Xlu7w.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-05T17:57:15.553

[您可以使用s3cmd](http://s3tools.org/s3cmd)指定标头参数！在将文件上传到 s3 时。

例如：

```
s3cmd sync LOCAL_DIRECTORY s3://BUCKET[/PREFIX] --add-header=Cache-Control:max-age=3153600 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-19T14:43:42.953

当您将文件存储到 s3\. 您可以设置将发送给客户端的自定义标头。在这种情况下，您可以为文件设置 Expires 标头。

Cloudfront 的工作方式略有不同，因为它取决于您的来源。

# javascript - JavaScript CORS Post Request 在服务器端有空参数

> ID：15502419
> 
> 赞同：2
> 
> 时间：2013-03-19T14:36:44.590
> 
> 标签：javascript, http, post, http-headers, cors

当我想向我的服务器发送 POST 请求时，它可以工作，但参数为空。在关于 stackoverflow 的另一个主题中，我读到这可能是标题的问题。还尝试了不同的浏览器，有时它可以工作。这些是我在服务器端设置的标头：

```
headers['Access-Control-Allow-Origin'] = 'http://localhost:8080'
headers['X-Frame-Options'] = 'http://localhost:8080'
headers['Access-Control-Allow-Credentials']= 'true'
headers['Access-Control-Allow-Headers']= 'origin, content-type, content-length, accept, accept-language, accept-encoding' 
```

![在附加的屏幕截图中，您可以看到客户端标头](../Images/dd72ea4a976d2388d813e4c76c922ff6.png)

当我尝试在客户端添加标头时，请求也总是变成选项请求。请帮忙！！提前感谢所有答案！

[这是选项请求的屏幕截图：！](https://i.stack.imgur.com/dHCpT.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:42:38.197

OPTIONS 请求是用于确认服务器将接受实际请求的飞行前请求 - 这是 CORS 的一部分。

一旦 OPTIONS 请求得到响应（并假设响应说“继续”），那么实际的 POST 将被发送。数据应与此 POST 一起发送，而不是与 OPTIONS 请求一起发送。

# java - 有没有办法一次对项目的所有文件执行“保存操作”？

> ID：15502425
> 
> 赞同：2
> 
> 时间：2013-03-19T14:36:53.967
> 
> 标签：java, eclipse

Eclipse 有一个很好的功能*“保存操作”*，可以在每次保存文件时执行一系列操作。

每当我更改“*保存操作*”的设置时，我都必须手动触摸所有文件并保存它们以执行此操作。

例如，我将我的项目切换到 java 7 并激活
`Add missing '@Override' annotations to implementations of interface methods`

当我保存 java 源时，会添加缺少的`@Override`注释。但是我可以触发 eclipse 一次对我项目的所有文件执行此操作吗？（如可以通过上下文菜单为孔项目执行的*源格式）。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:47:37.093

右键单击项目（或包，或选择的类，或多个项目）并选择*Source* > *Clean up...*

# antlr - ANTLR3 语法突出显示 ICSharpCode.TextEditor 中的隐藏通道

> ID：15502426
> 
> 赞同：2
> 
> 时间：2013-03-19T14:36:57.617
> 
> 标签：antlr, antlr3, lexer, icsharpcode

我在开发我们的小 DSL 方面取得了一些进展，但是在尝试突出显示我们正在使用的 TextEditorControl 中的注释时遇到了问题。顺便说一下，ICSharpCode 控件非常棒，与 ANTLR 结合使用它为 DSL 提供了一个很好的平台。

我有一个工作语法和词法分析器，并且在文本编辑器中编写了一个突出显示策略，它也很好用。拒绝正确着色的 DSL 的唯一元素是我在隐藏通道上的“评论”。

```
 Comment
  :  '//' ~('\r' | '\n')* {$channel=Hidden;}  
  |  '/*' .* '*/'  {$channel=Hidden;}        
  ; 
```

令人沮丧的是，如果我将 Comment lexrule 从隐藏通道中移除，我可以使突出显示工作......但是当我这样做时，解析器在评论之后的最后一段文本之后的评估期间停止解析。

举个例子; 当评论被隐藏但在第一个“abc”处停止解析时，这有效

```
 //Comment

   abc=[7,8,9];

   return abc[2]; 
```

我一直在尝试单独访问隐藏通道，以便我可以将默认和隐藏令牌列表组合成一个按开始索引排序的列表，然后从那里突出显示，但我没有运气使用 CommonTokenStream 的 BaseRecognizer.Hidden 参数构造函数。

我当前突出显示 TextEditor 行的尝试如下所示

```
 private void MarkUsingParalexTokens(IDocument document, LineSegment line)
    {
        var text = document.GetText(line).ToLower();
        var input = new ANTLRStringStream(text);
        _lexer.CharStream = input;
        _tokens = new CommonTokenStream(_lexer, BaseRecognizer.Hidden);
        //_tokens.TokenSource =_lexer;

        var wordStart = 0;
        if (_tokens.Count > 1)
        {
            do
            {
                _tokens.Consume();

            } while (_tokens.LastToken.Type != ParalexLexer.EOF);

            var tokenList = _tokens.GetTokens();

            var tokenEnum = tokenList.GetEnumerator();

            var tokenAvailable = tokenEnum.MoveNext();
            if (tokenAvailable)
            {
                for (var i = 0; i < text.Length; i++)
                {
                    var token = tokenEnum.Current;
                    if (token != null)
                    {
                        var c = text[i];
                        if (c == ' ' || c == '\t')
                        {
                            if (i > wordStart)
                                AddWord(document, line, wordStart, i);
                            line.Words.Add(c == ' ' ? TextWord.Space : TextWord.Tab);
                            wordStart = i + 1;
                        }
                        else
                        {
                            var atStartOfToken = (i == token.StartIndex);

                            if (atStartOfToken)
                            {
                                if (i > wordStart)
                                    AddWord(document, line, wordStart, i);

                                var tokenLength = token.StopIndex - token.StartIndex + 1;

                                AddWord(document, line, i, tokenLength, token);
                                tokenEnum.MoveNext();
                                wordStart = i + tokenLength;
                                i = wordStart - 1;
                            }
                        }
                    }

                }

            }
        }

        if (wordStart < line.Length)
                AddWord(document, line, wordStart, line.Length);
    }

    void AddWord(IDocument document, LineSegment line, int startOffset, int length, IToken token = null)
    {
        if (length==0) return;

        var hasSpecialColor = token != null;
        var color = hasSpecialColor ? GetColor(token) : _highlightColors["Default"];

        line.Words.Add(new TextWord(document, line, startOffset, length, color, !hasSpecialColor));
        if (token != null) Debug.WriteLine("From typing: Text {0}, Type {1}, Color {2}", token.Text, token.Type, color);
    }

    private HighlightColor GetColor(IToken token)
    {
        var name = token.Type;
        var groupName = "Default";

        var punctuation = new[]
            {6, 7, 9, 14, 15, 16, 17, 18, 22, 28, 33, 34, 47, 48, 49, 50, 51, 52, 55, 56, 57, 58, 60, 62, 65, 71};
        var paralexVerbs = new[] { 8, 13, 23, 26, 27, 31, 32, 38, 39, 40, 54, 64, 68, 73, 75, 76 };
        var paralexNouns = new[] {11, 12, 42, 43, 59, 66};
        var paralexNumbers = new[] { 53, 61, 41 };
        var paralexStrings = new[] {70};

        if (Array.IndexOf(punctuation, name) >= 0)
        {
            groupName = "Punctuation";
        }
        else if (Array.IndexOf(paralexVerbs, name) >= 0)
        {
            groupName = "ParalexVerbs";
        }
        else if (Array.IndexOf(paralexNouns, name) >= 0)
        {
            groupName = "ParalexNouns";
        }
        else if (Array.IndexOf(paralexNumbers, name) >= 0)
        {
            groupName = "ParalexNumbers";
        }
        else if (Array.IndexOf(paralexStrings, name) >= 0)
        {
            groupName = "ParalexStrings";
        }
        else if (name == 19)
        {
            groupName = "ParalexComment";
        }

        return _highlightColors[groupName];

    } 
```

似乎需要 do..while 才能将令牌放入列表中，否则 GetTokens 永远不会提供任何东西。在上面的代码形式中，即使在我的测试装置中输入注释，也不会产生任何标记。

如果我调用 CommonTokenStream 的参数化构造函数并使用基本构造函数，我会得到一个很好的标记流，我可以着色但所有隐藏的标记都是......好吧......我猜是隐藏的。

您对这个小问题的集体想法以及您对如何以编程方式维护类型列表而不是每次更改解析器时都必须重新调整它们的任何想法都将不胜感激。

我曾想过为需要着色的每种类型创建独立的通道，但目前我只是递归地添加到我的问题中！

提前感谢伊恩

编辑：

感谢您的出色回答山姆，非常感谢。它被标记和评分。

我采用了覆盖概念，因为它还解决了按名称跟踪各种 Token 类型的问题，从而在我添加到语法时简化了我的维护。

我创建了一个语法高亮词法分析器和一个单独的评估词法分析器，并使用了我在原始语法中创建的独立通道。

评论现在看起来像这样，虽然我认为 alt 还没有工作，主要工作很好

```
Comment
:  '//' ~('\r' | '\n')* 
|  '/*' .* '*/'        
; 
```

Lexer 成员添加了这些

```
 @lexer::members{

    public const int StringChannel = 98;
    public const int NumberChannel = 97;
    public const int NounChannel = 96;
    public const int VerbChannel = 95;
    public const int CommentChannel = 94;

    } 
```

并且高亮词法分析器在 Emit() 上使用此覆盖，您建议的覆盖也已到位并且正在工作

```
public class HighlightLexer : ParalexLexer
{
    public override IToken Emit()
    {
        switch (state.type)
        {
            case Strng:
                state.channel = StringChannel;
                break;
            case Nmber:
            case Null:
            case Bool:
            case Instrument:
            case Price:
            case PeriodType:
                state.channel = NumberChannel;
                break;
            case BarPeriod:
            case BarValue:
            case InstrumentList:
            case SMA:
            case Identifier:
                state.channel = NounChannel;
                break;
            case Assert:
            case Do:
            case Else:
            case End:
            case Fetch:
            case For:
            case If:
            case In:
            case Return:
            case Size:
            case To:
            case While:
            case T__77:
                state.channel = VerbChannel;
                break;
            case Comment:
                state.channel = CommentChannel;
                break;
            default:
                state.channel = DefaultTokenChannel;
                break;
        }

        return base.Emit();
    }
} 
```

困扰我的一件事是明显无法轻松获取令牌列表。我无法让 CommonTokenStream 在没有延迟和绊倒的情况下交付其令牌。我对“_tokens”使用 BufferedTokenStream 进行了抨击，因为这听起来更像是我所追求的，嘿 presto .. 令牌！我怀疑我的用户错误？

标记方法现在看起来像这样

```
private void MarkUsingParalexTokens(IDocument document, LineSegment line)
    {
        var text = document.GetText(line).ToLower();
        var input = new ANTLRStringStream(text);
        _lexer.CharStream = input;
        _tokens.TokenSource = _lexer;

        var wordStart = 0;
        var tokenCounter = 1;

        for (var i = 0; i < text.Length; i++)
        {
            var token = _tokens.LT(tokenCounter);
            if (token != null)
            {
                var c = text[i];
                if (c == ' ' || c == '\t')
                {
                    if (i > wordStart)
                        AddWord(document, line, wordStart, i);
                    line.Words.Add(c == ' ' ? TextWord.Space : TextWord.Tab);
                    wordStart = i + 1;
                }
                else
                {
                    var atStartOfToken = (i == token.StartIndex);

                    if (atStartOfToken)
                    {
                        if (i > wordStart)
                            AddWord(document, line, wordStart, i);

                        var tokenLength = token.StopIndex - token.StartIndex + 1;

                        AddWord(document, line, i, tokenLength, token);
                        tokenCounter++;
                        wordStart = i + tokenLength;
                        i = wordStart - 1;
                    }
                }
            }

        }

        if (wordStart < line.Length)
                AddWord(document, line, wordStart, line.Length);
    }

    void AddWord(IDocument document, LineSegment line, int startOffset, int length, IToken token = null)
    {
        if (length==0) return;

        var hasSpecialColor = token != null;
        var color = hasSpecialColor ? GetColor(token) : _highlightColors["Default"];

        line.Words.Add(new TextWord(document, line, startOffset, length, color, !hasSpecialColor));
        if (token != null) Debug.WriteLine("From typing: Text {0}, Type {1}, Color {2}", token.Text, token.Type, color);
    }

    private HighlightColor GetColor(IToken token)
    {
        var name = token.Channel;
        var groupName = "Default";

        if (name==0)
        {
            groupName = "Punctuation";
        }
        else if (name==95)
        {
            groupName = "ParalexVerbs";
        }
        else if (name==96)
        {
            groupName = "ParalexNouns";
        }
        else if (name==97)
        {
            groupName = "ParalexNumbers";
        }
        else if (name==98)
        {
            groupName = "ParalexStrings";
        }
        else if (name == 94)
        {
            groupName = "ParalexComment";
        }

        return _highlightColors[groupName];

    } 
```

再次感谢你的帮助。我要去看看错误识别和标记...问候伊恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:06:58.680

我总是使用与其他解析任务不同的词法分析器来突出显示语法。用于语法高亮的词法分析器始终满足以下条件：

*   `NEWLINE`除了包含`\r`or`\n`字符外，没有标记。相反，多个词法分析器模式用于块注释和任何其他跨越多行的构造（这甚至适用于 ANTLR 3 词法分析器，但如果 ANTLR 3 本身不支持词法分析器模式，它会很快变得复杂）。

*   `NEWLINE`定义如下：

    ```
    // ANTLR 3-based syntax highlighter:
    NEWLINE : ('\r' '\n'? | '\n') {skip();};

    // ANTLR 4-based syntax highlighter:
    NEWLINE : ('\r' '\n'? | '\n') -> skip; 
    ```

*   隐藏通道上没有令牌。

如果你不想走这条路，你可以`{$channel=Hidden;}`从你的`Comment`规则中删除这些动作，而是从你的基础词法分析器派生一个新类。在派生类中，覆盖`Emit()`. 使用基本实现来突出显示语法，使用派生实现来传递给解析器。在某些情况下这更容易，但对于具有多行字符串或注释的语言，我们发现我们的任何产品都无法接受这种严重的性能限制。

```
public override IToken Emit()
{
    if (state.type == Comment)
        state.channel = Hidden;

    return base.Emit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:12:18.840

我使用 C++（QT/SCintilla 库），但无论如何我建议使用不同的 Lexer 进行语法高亮显示。我的高亮 Lexer 与解析器不同：

*   不需要上下文相关的词法分析（“X”是一个关键字，如果有的话，只有当它后面跟着“Y”时，否则它是一个标识符

*   高亮词法分析器绝不能失败

*   我希望突出显示内置函数（解析不需要）

Gui Lexer 语法包含附加规则（在末尾）。

```
QUOTED_STRING_FRAGMENT
    :    '"' (~('"') | '\"')+ EOF 
    ;

// Last resort rule matches any character. This lexer should never fail.
TOKEN_FAILURE : . ; 
```

规则 TOKEN_FAILURE 将匹配用户输入中的任何“无效”字符，并将其显示为红色背景。否则，该字符将被跳过并且突出显示将被转移。

QUOTED_STRING_FRAGMENT 处理用户输入第一个引号并且字符串尚未完成时的情况。

# image - 使用 png 或 svg 图像作为 graphviz 节点

> ID：15502427
> 
> 赞同：11
> 
> 时间：2013-03-19T14:36:59.480
> 
> 标签：image, macos, svg, png, graphviz

我尝试在 graphviz （节点`d`）中使用自定义图像节点：

```
digraph foo {
    rankdir=LR;
    node [shape=record];
    a [label="{ <data> 12 | <ref>  }", width=1.2]
    b [label="{ <data> 99 | <ref>  }"];
    c [label="{ <data> 37 | <ref>  }"];
    d [image="X_Shape_Pillar_Yellow.png"];
    a:ref:c -> b:data [arrowhead=vee, arrowtail=dot, dir=both, tailclip=false, arrowsize=1.2];
    b:ref:c -> c:data [arrowhead=vee, arrowtail=dot, dir=both, tailclip=false];
    c:ref:c -> d      [arrowhead=vee, arrowtail=dot, dir=both, tailclip=false];
} 
```

不幸的是，图像没有出现：

![在此处输入图像描述](../Images/de0a9f450fff2d04330982611541f376.png)

我使用以下方法编译了点文件：

```
dot -v -Tpng list.dot -o list.png 
```

我的代码（包括 png 图像[）存储在 github 中](https://github.com/adamatan/graphviz_linked_list)。

**如何将替换节点`d`与我的自定义图像一起使用？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T14:47:07.907

只需为此节点定义其他形状，例如`shape=none`：

```
d [shape=none, label="", image="X_Shape_Pillar_Yellow.png"]; 
```

定义为默认的`record`形状不显示图像，而`none`,`box`甚至显示`plaintext`。

同时，将标签设置为空可能是个好主意。

# php - 打印资源 id #5。不知道解决方案是什么

> ID：15502429
> 
> 赞同：-2
> 
> 时间：2013-03-19T14:37:06.837
> 
> 标签：php, mysql

```
$u=$_SESSION['username'];
$p=$_SESSION['password'];
$a = mysql_query("SELECT section FROM users WHERE username ='$u' AND password ='$p'");
echo "$a"; 
```

打印资源 id #5。不知道是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:42:21.340

查询返回资源对象。您需要遍历资源以获取每条记录。

取自[PHP 文档](http://php.net/manual/en/function.mysql-fetch-assoc.php)：

```
$result = mysql_query($sql);

if (!$result) {
    echo "Could not successfully run query ($sql) from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($result) == 0) {
    echo "No rows found, nothing to print so am exiting";
    exit;
}

while ($row = mysql_fetch_assoc($result)) {
    echo $row["userid"];
    echo $row["fullname"];
    echo $row["userstatus"];
} 
```

**注意：**这些`mysql_*`函数将[在 PHP 5.5 中被弃用](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)。不建议编写新代码，因为它会在未来被删除。相反，无论是[MySQLi](http://php.net/manual/en/book.mysqli.php)还是[PDO](http://php.net/manual/en/book.pdo.php)，[都可以成为更好的 PHP Developer](http://jason.pureconcepts.net/2012/08/better-php-developer/)。

# c++ - C++ 多次写入文件的有效方法

> ID：15502431
> 
> 赞同：3
> 
> 时间：2013-03-19T14:37:11.370
> 
> 标签：c++, performance, io, ofstream

我正在处理一个回调函数，其中基于回调中的数据，我想写入不同的文件。

例如，在一次通话中，我可能想写入 january.csv，而在另一次使用不同数据的通话中，可能改为 july.csv。没有预先确定的顺序，每个回调可能是任何月份，我无法提前知道。january.csv（实际上是所有月份）将被多次写入。

这些回调发生得非常快，所以我需要这段代码尽可能高效。

我会采取的天真的方法是每次都使用以下代码：

```
ofstream fout;
fout.open(month_string);
fout<<data_string<<endl;
fout.close(); 
```

问题是这似乎不是很有效，因为我不断打开/关闭 month.csv 文件。有没有更快的方法，我可以说保持 january.csv、february.csv 等一直打开以加快速度？

编辑：我在 Linux 上写信给 /dev/shm，所以 I/O 延迟并不是真正的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:16:19.417

您希望减少 I/O 调用的数量，同时在调用它们时充分利用它们。

例如，缓存数据并将更大的块写入文件。您可以有另一个线程负责定期将缓冲区刷新到文件中。

效率低下的原因有两个：等待硬盘驱动器初始化（加快速度），第二个是定位文件和要写入的空扇区。无论您正在写入的数据量如何，都会发生这种开销. 数据块越大，有效写入所花费的时间就越多（当盘片旋转时）。闪存/拇指驱动器也是如此；拇指驱动器有开销（解锁、擦除等）。所以目标是通过大块写入来减少开销。

您可能要考虑使用数据库： [评估对数据库的需求。](https://stackoverflow.com/questions/2648802/at-what-point-is-it-worth-using-a-database/2649916#2649916)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:24:16.307

I doubt most systems will allow you to have ~10K files open at once, which more or less rules out just opening all the files and writing to them as needed.

As such, you probably just about need to create some sort of proxy-ish object to buffer data for each file, and when a buffer exceeds some given size, open the file, write the data to disk, and close it again.

I can see two fairly simple approaches to this. One would be to write most of the code yourself, using a `stringstream` as the buffer. The client streams to your object, which just passing through to the stringstream. Then you check if the stringstream exceeds some length, and if so, you write the content to disk and empty the stringstream.

The other approach would be to write your own file buffer object that implements `sync` to open the file, write the data, and close the file again (where it would normally leave the file open all the time).

Then you'd store those in a `std::map` (or `std::unordered_map`) to let you do a lookup from the file name to the matching proxy object.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:24:23.147

我不认为一遍又一遍地打开和关闭同一个文件会那么昂贵。操作系统通常设计为通过在内存中缓存部分 FS 元数据来处理该用例。成本主要是系统调用的上下文切换。另一方面，对 10k 文件执行此操作可能会耗尽操作系统缓存能力。

您可以通过将所有带有目标注释的输出按顺序写入单个文件中以形成日志，从而减轻您这边的一些 FS 工作。然后另一个程序（FS suppleant）将负责打开该日志，缓冲写入命令（按文件分组），然后在缓冲区达到某个阈值时将它们刷新到磁盘。您必须在日志中将执行的命令标记为已提交，以便在 suppleant 中断并且必须恢复的情况下，它会知道还需要做什么。

* * *

更新：

您*可以*调整文件系统以支持同时打开和缓存 10000 个文件，并让它处理调度命令的问题（这就是 FS 的*用途*）。

您的问题是为您的用例实际选择正确的文件系统。我建议用不同的 FS 进行测试，看看哪一个表现最好。

剩下的唯一部分是让您的程序用于`std::map` 将文件名与其描述符相关联（微不足道）。

请参阅 SO 以调整[linux max open files](https://stackoverflow.com/questions/3734932/max-open-files-for-working-process)，或者如果您在特定的 FS 上找不到问题，请询问有关该主题的问题。

# c# - 如何使用 NetTcpBinding 在 WCF 中流式传输文件？（有例外）

> ID：15502434
> 
> 赞同：1
> 
> 时间：2013-03-19T14:37:14.637
> 
> 标签：c#, wcf, nettcpbinding

我有以下代码：

**客户端：**

```
public bool Connect(string IPAdress, string Port, string UniqueName)
{
        try
        {
            EndpointAddress address = new EndpointAddress(new Uri("net.tcp://"+IPAdress+":"+Port+"/"+UniqueName));

            NetTcpBinding binding = new NetTcpBinding();
            binding.Security.Mode = SecurityMode.None;
            binding.TransferMode = TransferMode.Streamed;
            binding.MaxReceivedMessageSize = 1024 * 1024 * 64;
            m_Factory = new DuplexChannelFactory<IServerService>(this, binding, address);

            m_Service = m_Factory.CreateChannel();
            return true;
        }
        catch (Exception ex)
        {
            //log error
            return false;
        }
} 
```

**服务器端**

```
 public void Start(string Port, string UniqueName) {
        Uri baseAddress = new Uri("net.tcp://127.0.0.1:" + Port + "/" + UniqueName);
        NetTcpBinding binding = new NetTcpBinding();
        binding.Security.Mode = System.ServiceModel.SecurityMode.None;
        binding.MaxReceivedMessageSize = 1024 * 1024 * 64;
        binding.TransferMode = System.ServiceModel.TransferMode.Streamed;
        try
        {
            m_ServiceHost = new System.ServiceModel.ServiceHost(this, baseAddress);

            m_ServiceHost.AddServiceEndpoint(typeof(IServerService), binding, baseAddress);
            m_ServiceHost.Open();
        }
        catch (Exception ex)
        {

        }
    } 
```

我尝试将绑定创建为缓冲，但是当我尝试发送 FileStream 时，服务器端使实例为空，因为我读到我需要使用流传输模式。

我在该行的客户端收到以下异常

```
m_Service = m_Factory.CreateChannel(); 
```

> *合同需要双工，但绑定“NetTcpBinding”不支持它或未正确配置以支持它。*

# javascript - JQuery - 这种语法的目的是什么 $(function () { ... });

> ID：15502435
> 
> 赞同：8
> 
> 时间：2013-03-19T14:37:14.873
> 
> 标签：javascript, jquery

我正在使用 SignalR，并通过扩展使用 JQuery。

一些初始化代码在使用以下语法定义的功能块内运行：

```
$(function () { 

    // ... Init code here e.g. 

    var hub = $.connection.myHub;
}); 
```

与直接在一对脚本标签中执行脚本相比，这里的功能区别是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T14:40:01.480

它只是以下的简写：

```
$(document).ready(function(){

}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T14:38:22.263

`$(function ()` 相当于document on ready。`{}`一旦 DOM 加载完毕，该函数将执行标签内的所有内容。

另一种方法是：

```
$(document).ready(function() {

}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# jquery - 带有验证插件的 jQuery ajaxSetup()

> ID：15502437
> 
> 赞同：0
> 
> 时间：2013-03-19T14:37:17.827
> 
> 标签：jquery, jquery-validate

我需要使用 dataFilter 从 validate 插件返回的 json 字符串的开头删除“//”，我在让它工作时遇到了一些问题。我的代码的相关部分是：

```
$(document).ready(function () {
    $.ajaxSetup({
    dataFilter: function(data, type){
    return type == 'json' ? data.replace(/^(\/{2})?/, '') : data;
    }
});
    $("#myForm").validate({ 
        rules: {
            cgroup :{
                required: true,
                remote: {
                    url: compath + "/v.cfc?method=queryRemote&returnformat=json",
                    type: "post"
                }
            } 
```

其他规则和消息已被截断。

自从切换到 Coldfusion 10，它现在在 JSON 前面加上一个安全字符串 (//) 作为前两个字符，我需要在响应端修复这个问题。

我不确定我的错误是在 ajaxSetup 中还是在 validate() 或正则表达式本身中使用。

现在控制台中有错误。在查看 Fiddler 中的响应数据时，如果我在较新的服务器上访问 CFC，我会看到预期的 //true 或 //false，如果我发布到未预先挂起 / 的服务器上的 CFC，则为 true 或 false / 人物。

但是我没有看到任何迹象表明 $.ajaxSetup() 正在做任何事情。

答案：jquery.validate() 会破坏 ajaxSetup()。解决方案是将数据过滤器向下移动到远程部分：

```
cgroup :{
                required: true,
                remote: {
                    url: compath + "/v.cfc?method=queryRemote&returnformat=json",
                    type: "post",
                    dataFilter: function(data, type){
                     return type == 'json' ? data.replace(/^(\/{2})?/, '') : data;
                    }
                }
            } 
```

# vb.net - 是否可以更改 vb.net 中的输入框图标？

> ID：15502439
> 
> 赞同：3
> 
> 时间：2013-03-19T14:37:23.043
> 
> 标签：vb.net, icons, inputbox

我有一个从代码调用的输入框，但是虽然我的所有表单都有图标，但我在这个输入框上没有图标。由于它是消息框的标准选项，我认为奇怪的是没有关于输入框的标准选项。

所以基本上，我该如何在这个输入框上获得一个图标？

`inventory = InputBox("Inventory:" & vbCrLf & "Make sure this is correct, as an error can cause failure to login.", "Edit Inventory", oldinv)`

注意：由于这是一个纯粹的美学问题，我还没有真正研究过很多，因为此时还有更重要的工作要做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:17:31.523

你可以试试我自己的输入框

# 输入表格

```
Public Class frmInputbox

  Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    btnResponse.Text = MsgBoxResult.Ok
    Me.Hide()
  End Sub

  Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    btnResponse.Text = MsgBoxResult.Cancel
    Me.Hide()
  End Sub

End Class 
```

# 包装

```
Public Class DrZedInputbox

  Private Shared _UserResponseDlg As New frmInputbox()

  Public Shared Function Inputbox(Prompt As String, Title As String, ByRef TextData As String, Left As Integer, Top As Integer, Icon As System.Drawing.Icon) As MsgBoxResult
    Inputbox = MsgBoxResult.Cancel
    _UserResponseDlg.Text = Title
    _UserResponseDlg.Label1.Text = Prompt
    _UserResponseDlg.TextBox1.Text = textData
    _UserResponseDlg.Left = Left
    _UserResponseDlg.Top = Top
    _UserResponseDlg.Icon = Icon
    _UserResponseDlg.ShowDialog()
    Inputbox = _UserResponseDlg.btnResponse.Text
  End Function

  Public Shared ReadOnly Property TextData As String
    Get
      Return _UserResponseDlg.TextBox1.Text
    End Get
  End Property

  Public Shared ReadOnly Property Response As MsgBoxResult
    Get
      Return CType(_UserResponseDlg.btnResponse.Text, MsgBoxResult)
    End Get
  End Property

  Public Sub Dispose()
    _UserResponseDlg = Nothing
  End Sub

  Protected Overrides Sub Finalize()
    _UserResponseDlg = Nothing
    MyBase.Finalize()
  End Sub

End Class 
```

# 实施

显示输入框

```
DrZedInputbox.Inputbox("prompt", "title", "default", 100, 100, Me.Icon) 
```

收集结果（使用 msgbox 显示）

```
MsgBox("Text data entered: " & DrZedInputbox.TextData)
MsgBox("User response: " & DrZedInputbox.Response) 
```

完成输入框后（整理）

```
DrZedInputbox.Dispose() 
```

# 更新

添加照片

![DrZed.Inputbox 示例](../Images/6525803c0faeba5678ef5d457051b13d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:54:45.603

看起来您需要为此实现自己的对话框（本机不支持）。看：

*   [vbcity 上的输入框图标](http://vbcity.com/forums/t/129813.aspx)

谷歌上的其他结果也有类似的建议。

# java - 尝试使用 OrientDB

> ID：15502441
> 
> 赞同：1
> 
> 时间：2013-03-19T14:37:35.680
> 
> 标签：java, orientdb

我正在尝试这个简单的代码：

```
import java.util.List;

import com.orientechnologies.orient.core.exception.OStorageException;
import com.orientechnologies.orient.core.sql.query.OSQLSynchQuery;
import com.orientechnologies.orient.object.db.OObjectDatabasePool;
import com.orientechnologies.orient.object.db.OObjectDatabaseTx;

public class ProgramOrientDB {
  private static TestObjectFiller filler = new TestObjectFiller();

  private static interface DBCallback<T> {
    T call(OObjectDatabaseTx db) throws Exception;
  }

  private static <T> T execWithDB(DBCallback<T> cb) throws Exception {
    OObjectDatabaseTx db;
    try {
      db = OObjectDatabasePool.global().acquire("local:c:/tmp/odb", "admin", "admin");
    } catch (OStorageException exc) {
      db = new OObjectDatabaseTx("local:c:/tmp/odb");
      db.create();
    }
    try {
      return cb.call(db);
    } finally {
      db.close();
    }
  }

  private static TestObject dump(TestObject o) {
    System.out.println(o);
    return o;
  }

  public static void main(String[] args) throws Exception {
    Runtime run = Runtime.getRuntime();
    Process pr = run.exec("cmd /c del /s/q c:\\tmp\\odb");
    pr.waitFor();

    execWithDB(new DBCallback<Void>() {
      @Override
      public Void call(OObjectDatabaseTx db) throws Exception {
        db.getEntityManager().registerEntityClass(TestObject.class);
        dump((TestObject)db.save(filler.randomFill(db.newInstance(TestObject.class))));
        return null;
      }
    });
    execWithDB(new DBCallback<Void>() {
      @Override
      public Void call(OObjectDatabaseTx db) throws Exception {
        db.getEntityManager().registerEntityClass(TestObject.class);
        for (TestObject o : (List<TestObject>)db.query(new OSQLSynchQuery<TestObject>("select * from TestObject"))) {
          System.out.println(o);
        }
        return null;
      }
    });
  }
} 
```

它输出到控制台：

```
TestObject{prop1: 'captivation', prop2: 'Caribbean's', prop3: -1912492199, prop4: 0.9350339155517686, prop5: false}
TestObject{prop1: 'null', prop2: 'null', prop3: 0, prop4: 0.0, prop5: false} 
```

而我预计第一行会输出两次。谁能发现它有什么问题？

**编辑1**

这是TestObject.java：

```
public class TestObject {
  private String m_prop1;
  private String m_prop2;
  private int m_prop3;
  private double m_prop4;
  private boolean m_prop5;

  public String getProp1() {
    return m_prop1;
  }

  public void setProp1(String prop1) {
    m_prop1 = prop1;
  }

  public String getProp2() {
    return m_prop2;
  }

  public void setProp2(String prop2) {
    m_prop2 = prop2;
  }

  public int getProp3() {
    return m_prop3;
  }

  public void setProp3(int prop3) {
    m_prop3 = prop3;
  }

  public double getProp4() {
    return m_prop4;
  }

  public void setProp4(double prop4) {
    m_prop4 = prop4;
  }

  public boolean isProp5() {
    return m_prop5;
  }

  public void setProp5(boolean prop5) {
    m_prop5 = prop5;
  }

  @Override
  public String toString() {
    final StringBuilder sb = new StringBuilder();
    sb.append("TestObject");
    sb.append("{prop1: '").append(m_prop1).append('\'');
    sb.append(", prop2: '").append(m_prop2).append('\'');
    sb.append(", prop3: ").append(m_prop3);
    sb.append(", prop4: ").append(m_prop4);
    sb.append(", prop5: ").append(m_prop5);
    sb.append('}');
    return sb.toString();
  }
} 
```

**编辑2**

更改了 TestObject.java 以包含以下字段：

```
 @javax.persistence.Id
  private Object id; 
```

并添加到 toString() 中。现在程序打印：

```
TestObject{id: 'null', prop1: 'gnaw', prop2: 'fishermen', prop3: -322577834, prop4: 0.7442149523357203, prop5: true}
TestObject{id: 'null', prop1: 'null', prop2: 'null', prop3: 0, prop4: 0.0, prop5: false} 
```

这也好不到哪里去。

**编辑3**

问题是它`OObjectProxyMethodHandler.invoke()`没有被调用，即使`db.newInstance`确实返回了一个代理并且我使用`TestObject.setXXX`方法设置了属性。我不知道为什么不调用处理程序。

**编辑4**

好的，处理程序的问题在于实现的方法过滤器`OObjectMethodFilter`正在检查方法是否由使用特定命名方案命名的字段支持。该类`TestObject`不遵循该方案 - 它使用`m_`私有字段的前缀，这未通过过滤器测试。去掉前缀，现在`OObjectProxyMethodHandler.invoke()`叫。但是，最终的结果还是一样的。进一步调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T19:06:58.187

这没有按预期工作的最可能原因是您没有使用 TestObject setter/getter 方法来设置/检索字段值。OrientDB Java 代理对象“拦截” set/get 调用以执行必要的幕后管理；特别是，setter 会将字段标记为脏（for `db.save()`），getter 将从 db 中获取延迟加载的字段数据（字段在加载之前将具有默认值）。正如您所指出的，setter/getter 应该遵循关于字段名称的 Java 命名约定。

在您的示例程序中，您正在填充示例 TestObject*在*它被 DB 代理后，在`filler.randomFill(db.newInstance(TestObject.class))`. 因此，您的 randomFill 在填充 TestObject 的字段时必须使用 setter。

同样，您的 TestObject.toString() 输出显示空值/默认值，因为您（很可能）直接访问字段而不是使用 getter。代理是延迟加载字段数据，因此在调用相应的 get 方法触发加载之前不会填充该字段。

当我修改您的测试代码以在 TestObject 上使用 setter/getter 方法时，我得到了两次相同的行输出，正如预期的那样。

另请参阅：[OrientDB Object2RecordJavaBinding](https://github.com/orientechnologies/orientdb/wiki/Object-2-Record-Java-Binding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:01:57.917

看起来很奇怪，输出没有记录的 RID。您是否出于布局目的删除了它们？

# php - C语言中的河豚php？

> ID：15502443
> 
> 赞同：0
> 
> 时间：2013-03-19T14:37:44.940
> 
> 标签：php, c++, c, encryption, blowfish

有些人可以在我的网站上注册。对于密码，我使用了这个：

```
$key = "thisisasuperkey"; 
$key_crypted = md5($key); 
$pass = "thisisasuperpassword"; 
$pass_crypted = crypt($pass, '$2y$12$'.$key_crypted.'$'); 
```

这段代码返回给我类似的东西：

```
$2y$12$19ac9c3924183ab897f61uJr.j9b5cQ8NZS3rqMlNNUft9rEmtT5m 
```

但是现在，我正在用 C/C++ 构建一个程序。我希望用户在程序中输入他们的用户名和密码。

我在互联网上测试了一些“示例”，但所有“河豚 C”都返回了类似的内容：

```
d00a0a19e5d7155ae6ac6e..........ce1072f5 
```

有人知道我可以在 C/C++ 中找到相同的河豚（或在 PHP 中相同）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:32:55.947

[crypt(3)](http://man7.org/linux/man-pages/man3/crypt.3.html)是一个出现在 glibc 中的函数。也就是说，基于 bcrypt/blowfish 的 crypt 实现（用字符串`$2a$` `$2x$`和标识`$2y$`）不包含在主线实现中。一些 linux/BSD 发行版通过补丁添加了支持，所以这对你来说可能就足够了。

如果没有，您可以查看OpenBSD 的 crypt 实现[的源代码](http://www.openbsd.org/cgi-bin/cvsweb/src/lib/libc/crypt/)，其中包括对 bcrypt 散列的支持。您可以使用该代码来做您想做的事，而不会带来太多麻烦。

# objective-c - 核心数据 - 未能设置实体属性的默认值

> ID：15502445
> 
> 赞同：0
> 
> 时间：2013-03-19T14:37:54.963
> 
> 标签：objective-c, xcode, core-data, xcode4

我正在使用 XCode 4.4.1 并使用数据模型检查器来设置属性的默认值，但它不会保存这些默认值。

还尝试使用-(void)awakeFromInsert 方法，但也失败了！！

例如，我尝试设置名为“已回答”的布尔属性的值，并尝试了下面的代码，但发现了同样的问题：

```
-(void)awakeFromInsert {
self.answered = [NSNumber numberWithBool:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:06:18.920

检查您的 NSArrayController 是否处于实体模式，而不是类模式，并且您的托管对象上下文绑定设置正确。

验证您的数据模型是否为您的实体指定了一个类，而不仅仅是一个实体名称（在查看您的实体时使用数据模型检查器，command-option-3）。

如果您在 awakeFromInsert 中设置断点并且没有点击它，那么您有证据表明您配置错误并且您实际上没有插入自定义 NSManagedObject 子类的实例。

# javascript - 在Javascript中一键打开3个项目

> ID：15502450
> 
> 赞同：3
> 
> 时间：2013-03-19T14:38:09.070
> 
> 标签：javascript, html, hyperlink

我正在做一个学校项目，我需要一键打开多个文档。我正在使用图像滑块，并且设法让它打开多个链接。但是，一旦我将相同的 JavaScript 添加到滑块上的另一个图像，它将打开与以前相同的图像，即使我已经更改了源。

```
 <img src="promo.png" img class="carousel-image" onclick="doOpen()">

   <script type="text/javascript">
function doOpen()
{
window.open("Ticket.png");
window.open("Pattern.png");

}
</script>

          <div class="carousel-caption">
            <p>
              The Complete set of useful documents
            </p>
          </div>
        </div>
        <div class="carousel-feature">
           <img src="promo.png" img class="carousel-image" onclick="doOpen()">

<script type="text/javascript">
function doOpen()
{
window.open("screensaver.mp4");
window.open("Billboard.png");
window.open("Tshirt.png");

}
</script>

          <div class="carousel-caption"> 
```

滑块上的两个图像都打开`ticket.png`并且`pattern.png`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:48:18.823

您定义了`doOpen`两次相同的功能。那是行不通的。要快速修复，请尝试以下操作：

```
<img src="promo.png" class="carousel-image" onclick="doOpen1()">

<script type="text/javascript">
function doOpen1()
{
    window.open("Ticket.png");
    window.open("Pattern.png");
}
</script>

      <div class="carousel-caption">
        <p>
          The Complete set of useful documents
        </p>
      </div>
    </div>
    <div class="carousel-feature">
       <img src="promo.png" class="carousel-image" onclick="doOpen2()">

<script type="text/javascript">
function doOpen2()
{
window.open("screensaver.mp4");
window.open("Billboard.png");
window.open("Tshirt.png");
}
</script> 
```

也就是说，为每个链接定义这样的函数并不是一个可靠的解决方案。更好的是：

```
<script type="text/javascript">
function doOpen(which)
{
    if(which == "one"){
        window.open("Ticket.png");
        window.open("Pattern.png");
    } else if (which == "two"){
        window.open("screensaver.mp4");
        window.open("Billboard.png");
        window.open("Tshirt.png");
    }
}
</script>

<div class="carousel-feature">
  <img src="promo.png" class="carousel-image" onclick="doOpen('one')">
</div>

<div class="carousel-feature">
   <img src="promo.png" class="carousel-image" onclick="doOpen('two')">
</div> 
```

这只需要您维护一个功能，而不是为您拥有的每个链接维护多个功能。

`img`此外，您的标签中有一个额外的：

```
<img src="promo.png" img class="carousel-image" onclick="doOpen2()">
                     ^^^ Here
<!-- Should Be: -->
<img src="promo.png" class="carousel-image" onclick="doOpen2()"> 
```

Jason 建议的选项如下所示：

```
<script type="text/javascript">
function doOpen()
{
    for (var i = 0; i < arguments.length; i++){
        window.open(arguments[i]);
    }
}
</script>

<div class="carousel-feature">
  <img src="promo.png" class="carousel-image" onclick="doOpen('Ticket.png', 'Pattern.png')">
</div>

<div class="carousel-feature">
   <img src="promo.png" class="carousel-image" onclick="doOpen('screensaver.mp4', 'Billboard.png','Tshirt.png')">
</div> 
```

这里的区别是你的函数永远不会改变，但你每次调用它的方式都不同。

# javafx - javaFX Stage 可以同时是 StageStyle.UTILITY 和 StageStyle.TRANSPARENT？

> ID：15502451
> 
> 赞同：7
> 
> 时间：2013-03-19T14:38:12.693
> 
> 标签：javafx, stage

我的意思是，当使用 stageStyle.UTILITY 的舞台时，我不想显示“纯白色背景”而是透明背景。

我需要一个不显示在下面windows任务栏上的舞台（stageStyle.UTILITY可以满足），我需要一个透明背景（StageStyle.TRANSPARENT可以满足），这样我就可以定义我的舞台的关闭按钮样式。

但是 stageStyle.UTILITY 或 StageStyle.TRANSPARENT 只符合我的一个要求似乎很奇怪。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T09:13:59.713

已经可以了！还调用 dialogStage.initOwner(parentStage) [http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#initOwner%28javafx.stage.Window%29](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#initOwner%28javafx.stage.Window%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:45:19.030

这样的东西？

![在此处输入图像描述](../Images/48d4408296bb2dff4284a59cc6472591.png)

对背景有影响

线索代码

```
dialog.initModality(Modality.WINDOW_MODAL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-04T16:21:32.150

在 javafx 中尚无法实现，但 javafx 与 swing 兼容，因此您可以使用 swing 使 swing 等效于透明实用程序阶段。有关一些示例，请参见[此处](https://stackoverflow.com/questions/27759019/is-it-possible-to-have-a-transparent-utility-stage-in-javafx/27763555#27763555)。我希望这个对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T16:18:15.473

```
final Stage stage = new Stage(StageStyle.TRANSPARENT);
Group rootGroup = new Group();
Scene scene = new Scene(rootGroup, 339, 319, Color.TRANSPARENT);
stage.setScene(scene);
stage.centerOnScreen();
stage.show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-23T15:38:29.670

看这里 [如何从任务栏中删除我的 javafx 程序](https://stackoverflow.com/questions/46712293/how-can-i-remove-my-javafx-program-from-the-taskbar)

只需添加（将其移出视线）

```
primaryStage.setX(Double.MAX_VALUE);
primaryStage.setY(Double.MAX_VALUE); 
```

并更换

```
mainStage.initStyle(StageStyle.UNDECORATED); 
```

和

```
mainStage.initStyle(StageStyle.TRANSPARENT); 
```

# cmd - CMD 和查找 ProductID

> ID：15502454
> 
> 赞同：0
> 
> 时间：2013-03-19T14:38:21.590
> 
> 标签：cmd

大家好，我正在编写这个脚本来查找计算机的产品 ID，如果它是真的，它会说你被禁止...

```
wmic os get "SerialNumber"|find /v "SerialNumber" >>%IDcheckfile% | findstr /i "****-OEM-*********-*****"
cls
IF %ERRORLEVEL% EQU 0 (
for /f "tokens=3" %%i in ('"SerialNumber"') do set "productID=%%i"

goto STARTLOG )
IF %ERRORLEVEL% EQU 1 (echo You are banned from this program )
pause
exit 
```

现在这很好，但我需要从文本文件中复制 ID，我正在努力做到这一点。如果我什至需要将 ID 保存到文本文件，请告诉我。为什么我需要提取 ID 并将其存储在一个变量中是因为它需要在程序日志中显示 ID。非常感谢您迄今为止的出色帮助:) 并感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:27:38.363

```
@ECHO off
FOR /f "delims=" %%i IN ('wmic os get SerialNumber^|find "-"') DO SET productid=%%i
ECHO %productid%|FIND "-OEM-" >NUL
IF NOT ERRORLEVEL 1 ECHO OEM version - banned&GOTO end
ECHO productid=%productid%
:startlog

:end

pause 
```

FOR /f 逐行读取括号之间指定的文件

*   跳过空行 - 即不包含任何字符的行和以“;”开头的行
*   “文件”实际上可能`output`是命令的。只需将命令括在`single quotes`Pipes 中，其他特殊字符需要通过插入符号 ( `^`) 进行转义。然后将读取的文本行拆分为`TOKENS`. 每个令牌由 er 分隔，`DELIMITERS`
*   默认情况下，分隔符是`space`, `comma`, `semicolon`，`tab`但可以通过列出子句的`=`and之间`"`的字符`"delims=abc"`（将设置`a`, `b`,`c`作为分隔符）来更改为“任何”单字符集。
*   默认情况下，仅分配标记 1（er，行上的第一个标记），并将分配给`metavariable`（即循环控制字母 -`i`在上面的示例中）
*   通过使用`tokens=`子句并列出标记编号（用逗号分隔），可以分配其他标记。编号最小的标记分配给`metavariable`，下一个编号最小的标记分配给随后的元变量，依此类推 -如果**FOR**元变量是，则将分别`"tokens=1,3delims=-`从行分配标记 1 和 3 到`%%i`和。`%%j`**`i`**
***   作为一个特殊的，令牌`*`意味着“指定的最后一个令牌之后的行的其余部分”**

 **基本上，就是这样。此外，您还可以应用大量额外的工具——例如文件名分解为驱动器、路径、名称、扩展名或大小、日期时间、属性等。所有记录在易于阅读`FOR /?`的提示中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:07:45.087

尝试这个：

```
@echo off &setlocal
for /f "tokens=2*" %%i in ('reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion" /v ProductID^|find "REG_SZ"') do set "ProductID=%%j"
if defined ProductID (echo.ProductID: %ProductID%) else echo You are banned!
endlocal 
```**

# java - 如何使用 Java Regex 将特定字符串放入数组中？

> ID：15502460
> 
> 赞同：1
> 
> 时间：2013-03-19T14:38:32.327
> 
> 标签：java, regex

如何在Java中使用正则表达式将下面的“no”、“no”、“0.002”、“0.998”放入字符串数组中？

```
 String lines = "     1       2:no       2:no       0.002,*0.998" 
```

有人可以告诉我如何在下面写“theRegex”吗？

```
String[] matches = lines.split(theRegex); // => ["no", "no", "0.002", "0.998"] 
```

在 Python 中，它将只有一行：

```
matches = line =~ /\d:(\w+).*\d:(\w+).*\((\w+)\)/ 
```

但是Java呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:39:20.420

`theRegex="[\\s,*]+"`（一个或多个空格、逗号或星号）

输入 `1 2:no 2:no 0.002,*0.998` 输出`["1","2:no","2:no","0.002","0.9"]`

**编辑**

> 输入字符串为“ 1 2:no 2:no 0.002,*0.998”，预期输出为["no", "no", "0.002", "0.998"]

在这种情况下，不能`split`单独使用，因为要忽略，`1`您需要将`\d`其视为分隔符，但`\d`也是`0.002`.

你可以做的是：

```
 Pattern pattern = Pattern.compile("^\\d(?:$|:)");
   String[] matches = lines.trim().split("[\\s,*]+");
   List<String> output = new LinkedList<String>(Arrays.asList(matches));
   for (Iterator<String> it=output.iterator(); it.hasNext();) {
     if (Pattern.matcher(it.next()).find()) it.remove();
   } 
```

`find("^\\d(?:$|:")`匹配形式为`digit`or的字符串`digit:whatever`。请注意，模式编译一次，然后将其应用于列表中的字符串。对于每个字符串，必须构造一个匹配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:54:20.787

试试这个正则表达式...

```
(^\d|[\d]:|[\\s, *]+)+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:42:01.463

```
String s = "1       2:no       2:no       0.002,*0.998";
String[] arr = s.split(" +"); 
```

# java - 类型解析是如何完成的？

> ID：15502464
> 
> 赞同：0
> 
> 时间：2013-03-19T14:38:45.990
> 
> 标签：java, types, casting, polymorphism, substitution

我是 Java 世界的新手，我在弄清楚 Java 如何决定在存在多态性时调用哪个方法时遇到了一些问题。你能帮我弄清楚这个例子是如何工作的吗？我尝试了代码并看到了结果。我更感兴趣的是为什么它会这样工作。

```
class A {
    void redef(A a) { System.out.println("[A]"); }
}

class B extends A {
    //@Override
    void redef(B b) { System.out.println("[B]"); }
}

class C extends B {
}

public class Surcharge {
    static void surcharge(A a) { System.out.println("[A]"); }
    static void surcharge(B b) { System.out.println("[B]"); }

    public static void main(String[] argv) {

        A a = new A() ;
        B b = new B() ;

        A ab = new B();
        C c = new C();

        ab.redef(c); //?
        surcharge(a); //?
        surcharge(b); //?
        surcharge(c); //?
        surcharge(ab); //?
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:03:08.910

当一个方法被重载时（就像这里的所有方法一样），Java 使用与声明的参数类型最匹配的方法。

在第一个示例中，对象 ( `ab`) 是声明类型 A，编译器只知道方法`redef(A a)`，因此选择了它。

请注意，该方法`redef(B)`不会覆盖该方法`redef(A)`，因为它的签名不匹配。如果取消注释注释，则会出现编译错误`@Override`。

在第二个例子中，只`sucharge(A a)`匹配参数（A）的声明类型，所以选择了这个。

在第三个示例中，`surcharge(B b)`更接近地匹配参数 (B) 的声明类型，因此选择了它。

第四个例子也一样。

在最后一个示例中，仅`surcharge(A a)`适用于参数 (A) 的声明类型，因此选择它。

# android - 圆形图像视图

> ID：15502467
> 
> 赞同：8
> 
> 时间：2013-03-19T14:38:52.153
> 
> 标签：android, android-view

我一直在研究如何在 Android 中创建圆形 ImageView。在阅读了 StackOverflow 上关于该主题的问题后：

[如何使图像适合android中的圆形框架](https://stackoverflow.com/questions/14050813/how-to-make-an-image-fit-into-a-circular-frame-in-android)

和

[如何在圆形图像视图中设置位图？](https://stackoverflow.com/questions/5882180/how-to-set-bitmap-in-circular-imageview)

我使用链接作为指南将自己的 ImageView 放在一起，完成我需要做的事情：带边框的圆形图像。

下面是我正在使用的代码：

```
public class CircularImageView extends ImageView
{

private int borderWidth = 5;
private int viewWidth;
private int viewHeight;
private Bitmap image;
private Paint paint;
private Paint paintBorder;
private BitmapShader shader;

public CircularImageView(Context context) {
    super(context);
    setup();
}

public CircularImageView(Context context, AttributeSet attrs) {
    super(context, attrs);
    setup();
}

public CircularImageView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    setup();
}

private void setup()
{
    // init paint
    paint = new Paint();
    paint.setAntiAlias(true);

    paintBorder = new Paint();
    setBorderColor(Color.BLUE);
    paintBorder.setAntiAlias(true);     
}

public void setBorderWidth(int borderWidth)
{
    this.borderWidth = borderWidth;
    this.invalidate();
}

public void setBorderColor(int borderColor)
{       
    if(paintBorder != null)
        paintBorder.setColor(borderColor);

    this.invalidate();
}

private void loadBitmap()
{
    BitmapDrawable bitmapDrawable = (BitmapDrawable) this.getDrawable();

    if(bitmapDrawable != null)
        image = bitmapDrawable.getBitmap();
}

@SuppressLint("DrawAllocation")
@Override
public void onDraw(Canvas canvas)
{
    //load the bitmap
    loadBitmap();

    // init shader
    if(image !=null)
    {
        // Create a shader with a scaled bitmap to match the view dimensions            
        shader = new BitmapShader(Bitmap.createScaledBitmap(image, canvas.getWidth(), canvas.getHeight(), false), Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);
        paint.setShader(shader);
        int circleCenter = viewWidth / 2;

                    // Draw the outer border
                    canvas.drawCircle(circleCenter + borderWidth, circleCenter + borderWidth, circleCenter + borderWidth, paintBorder);
        // circleCenter is the x or y of the view's center
        // radius is the radius in pixels of the cirle to be drawn
        // paint contains the shader that will texture the shape            
        canvas.drawCircle(circleCenter + borderWidth, circleCenter + borderWidth, circleCenter, paint);
    }       
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    int width = measureWidth(widthMeasureSpec);
    int height = measureHeight(heightMeasureSpec, widthMeasureSpec);        

    viewWidth = width - (borderWidth *2);
    viewHeight = height - (borderWidth*2);

    setMeasuredDimension(width, height);
}

private int measureWidth(int measureSpec)
{
        int result = 0;
        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        if (specMode == MeasureSpec.EXACTLY) {
            // We were told how big to be
            result = specSize;
        } else {
            // Measure the text
            result = viewWidth;

        }

    return result;
}

private int measureHeight(int measureSpecHeight, int measureSpecWidth) {
    int result = 0;
    int specMode = MeasureSpec.getMode(measureSpecHeight);
    int specSize = MeasureSpec.getSize(measureSpecHeight);

    if (specMode == MeasureSpec.EXACTLY) {
        // We were told how big to be
        result = specSize;
    } else {
        // Measure the text (beware: ascent is a negative number)
        result = viewHeight;           
    }
    return result;
}
} 
```

我正计划制作这个开源软件，因此如果有人可以查看代码以确保我做的一切正确，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:45:53.407

试试这个函数来获得圆角图像：

```
 private Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels) 
    {
        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(output);
        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = pixels;
        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);
        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);
        return output;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:58:10.033

如果您对按钮的边框不是那么严格。那你为什么不制作一个带有透明边缘的圆形PNG图像文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T10:39:41.413

这可能不是最好的方法，您可能无法更改很多属性，但它肯定是最简单的方法。我刚刚使用[了这个](https://github.com/siyamed/android-shape-imageview)库，并制作了一个带有边框的圆形图像视图。

* * *

所以，这是我的解决方案：

**首先**，我把它放在我的`build.grandle`：

```
`compile 'com.github.siyamed:android-shape-imageview:0.9.+@aar'` 
```

**其次**，我把它放在我的`.xml`布局文件中：

```
 <com.github.siyamed.shapeimageview.CircularImageView
                    android:layout_width="150dp"
                    android:layout_gravity="center_horizontal"
                    android:layout_height="150dp"
                    android:id="@+id/photo"
                    app:siBorderWidth="5dp"
                    app:siBorderColor="#ffffff"
                    android:layout_alignParentTop="true"
                    android:layout_centerHorizontal="true" /> 
```

在我的`.java`文件中，这是我可以采取或设置图像的方式`CircularImageView`：

```
final com.github.siyamed.shapeimageview.CircularImageView photo = (com.github.siyamed.shapeimageview.CircularImageView) convertView.findViewById(R.id.photo);

photo.setBackgroundResource(R.drawable.female); 
```

* * *

这就是我为制作带有白色边框的图像圆形所做的一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-28T09:18:41.637

添加与 android x 兼容的最新依赖项

```
implementation 'com.github.arefhosseini:android-shape-imageview:1.0.3' 
```

# c++ - XML 验证在调试中失败，在发布中有效

> ID：15502468
> 
> 赞同：0
> 
> 时间：2013-03-19T14:39:02.120
> 
> 标签：c++, xml, visual-studio, xerces-c

我的项目曾经运行良好，但现在不知何故我无法使用调试配置运行我的程序，它会退出提及 xml 有不允许的标签（并给你一个允许的标签列表，你可以清楚地看到它是一部分根据这个例子）。

> 消息：内容模型“（标识、对象实例、对象类、事件类、维度？、传输？、管道、数据类型、连接、注释）”不允许元素**“**数据类型**”**

 **发布和调试都使用相同的验证文件和 xml 文件，并且没有特殊的 typedef 或任何东西。

为了确保它正常工作，我确保在调试中运行时只使用调试依赖项，但它仍然无法正常工作。

如果这很重要，我正在使用 xerces 3.1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:00:26.273

使用[Codesynthesis XSD](http://www.codesynthesis.com/products/xsd/download.xhtml)生成类以使用 Xerces。它会让你的生活变得更简单。**

# ruby-on-rails - Windows 上的 rails 命令行，奇怪的响应，如 [1m[36m (2.0ms)[0m [1m

> ID：15502473
> 
> 赞同：1
> 
> 时间：2013-03-19T14:39:05.977
> 
> 标签：ruby-on-rails, command-line

我通过 Railsinstaller 安装 Ruby on Rails 并且从那时起这个问题一直存在，我只是不知道它......

![在此处输入图像描述](../Images/4ba11f70060e63ea611a769ab6705c70.png)![在此处输入图像描述](../Images/82f17fa330502e0cfc12f68cf026c83b.png) 谁能告诉这是什么以及如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:44:24.953

这是因为您已将 rspec 设置为使用颜色输出

如果您想摆脱它，请在应用程序的基目录中查找一个名为 .rspec 的文件

编辑它并删除该`--color`部分，然后保存它。

基本上所有这些代码都是终端使用颜色的说明，这在 Windows 上似乎不太好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:45:56.003

这些就是所谓的“转义序列”，它们为输出着色。Windows 终端模拟器无法处理它们，但您可以关闭它们，`application.rb`添加以下行：

```
config.colorize_logging = false 
```

这会禁用彩色日志，因此会禁用转义序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:54:34.520

您可以使用[ansicon](https://github.com/adoxa/ansicon/downloads)在 windows 命令 shell 中启用颜色。请参阅[Cucumber 未在 Windows 中显示彩色输出](https://stackoverflow.com/questions/4746647/cucumber-not-showing-coloured-output-in-windows)

# javascript - 我在没有任何用户操作的情况下显示 javascript 输出时遇到问题

> ID：15502477
> 
> 赞同：-3
> 
> 时间：2013-03-19T14:39:13.557
> 
> 标签：javascript, html

这就是问题：如果一个整数大于 1 并且只能被 1 和自身整除，则称它为素数。例如，2、3、5 和 7 是质数，但 4、6、8 和 9 不是。a) 编写一个判断一个数是否为素数的函数。b) 在脚本中使用这个函数来确定并打印 1 到 10000 之间的所有素数。在确定找到所有素数之前，你真的需要测试这 10000 个数字中的多少？在 a 中显示结果。

这是我的代码：

```
function isPrime(n)
{
var  prime=true;
        if(n===1 || n===0)
        {

            prime= false;
        }

        if(n==2)
        {
            prime= true;
        }
        else
        {
            for(var i=2;i<n;i++)
            {
                if(n%i===0)
                {
                    prime= false;
                }
            }
        }
        return prime;
}
function printPrimes()
{

    for(var i=0; i<=1000; i++)
    {
        if(isPrime(i)===true)
        {
            document.writeln("<p>" + i + "</p>");
        }
    }

}
printPrimes(); 
```

这是我的html：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
        <body>
            <h1> Prime numbers between 1 and 1000 are: </h1>
            <textarea rows="10" cols="15">
            <script src="prime.js" type="text/javascript"> </script>
            </textarea>
        </body>
</html> 
```

当我在 chrome 上打开 html 文件时，只有标题显示脚本似乎没有运行！并且只有脚本标签按原样显示在文本区域中显示在文本区域中，我尝试了一百万件没有用的东西，我想如何在 TEXTAREA 标签中输出脚本？？？？？？

我试过这个但还是不行：

```
 function printPrimes()
{
    var str="";
    for(var i=0; i<=1000; i++)
    {
        if(isPrime(i)===true)
        {
            str+=i +" /n";
        }
    }
    document.getElementById('primes').value=str;

}
printPrimes(); 
```

html:

```
<!DOCTYPE html>
<html>
    <head>
    </head>
        <body>
        `   <script src="prime.js" type="text/javascript"> </script>
            <h1> Prime numbers between 1 and 1000 are: </h1>
            <textarea id="primes" rows="40" cols="50">

            </textarea>
        </body>
</html> 
```

所以很抱歉重新发布和轻微编辑，不会再发生，我是新来的堆栈溢出并且已经被禁止了，如果我的禁令可以解除，我只会问更多问题，如果我已经做过研究并且如果我跌到谷底并且似乎没有任何工作。我没有注意到编辑帖子，发布重复是一个愚蠢的错误，希望取消投票，我是脚本新手，堆栈溢出新手，我没有意识到 id 因愚蠢的问题而被禁止。对不起

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:43:53.600

您可以使用 javascripts`document.getElementById`来获取`textarea`（当然您必须为 textarea 提供一些 id）。然后更改`value`此文本区域。看看[这个答案](https://stackoverflow.com/a/1642452/812912)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:45:55.947

文本区域内不能有 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:59:41.387

在这里尝试以下代码。注意更新后的 textarea 元素、JS 引用的位置和值的输出。

JS文件

```
function isPrime(n){
    var  prime=true;
    if(n===1 || n===0)
    {

        prime= false;
    }

    if(n==2)
    {
        prime= true;
    }
    else
    {
        for(var i=2;i<n;i++)
        {
            if(n%i===0)
            {
                prime= false;
            }
        }
    }
    return prime;
}
function printPrimes()
{

  for(var i=0; i<=1000; i++)
  {
      if(isPrime(i)===true)
      {
          //document.writeln("<p>" + i + "</p>");
          document.getElementById('primeNumbers').value = document.getElementById('primeNumbers').value + i + '\n'; 
      }
  }

}
printPrimes(); 
```

HTML

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <h1> Prime numbers between 1 and 1000 are: </h1>
        <textarea rows="10" cols="15" id="primeNumbers"></textarea>
        <script src="prime.js" type="text/javascript"> </script>
    </body>
</html> 
```

# iphone - 滚动时重复复选框的 UITableViewCell

> ID：15502479
> 
> 赞同：0
> 
> 时间：2013-03-19T14:39:16.117
> 
> 标签：iphone, ios, uitableview, checkbox

我正在使用带有自定义单元格（xib）的 UITableView。每个单元格都是标签和一个复选框（UIButton）。

我在每个部分中有 2 个部分和 4 个单元格。如果我检查第一部分的第一个单元格，第二部分的第一个单元格也会被检查，我不想要。问题：dequeueReusableCellWithIdentifier:CellIdentifier。

我想保持我的单元格标识符静态。

我怎样才能解决这个问题 ？

这是我的数组的初始化（对于我的单元格的内容）：

```
for(int i=0; i<NUMBER_OF_CELL; i++){

    Account *model = [[Account alloc]init];

    [model setAccountName:[NSString stringWithFormat:@"Account %d",i]];
    [model setAccountNumber:[NSString stringWithFormat:@"Number %d",i]];

    [_accountArray addObject:model];

} 
```

设置内容：

```
[[cell accountLabel] setText:_model.accountName];
[[cell accountNumberLabel] setText:_model.accountNumber]; 
```

***编辑：***

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    _model = [_accountArray objectAtIndex:indexPath.row];

    AccountCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"AccountCell" owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
    }
    // configure cell 
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    [[cell accountLabel] setText:_model.accountName];
    [[cell accountNumberLabel] setText:_model.accountNumber];
    // checkbox ? 

    if(cell.isChecked){

        NSLog(@"Checked");
    }else{
        NSLog(@"No checked");
    }

    return cell;
} 
```

在另一堂课中，我检查复选框是否被选中：

```
- (IBAction)checkbox:(id)sender {

    NSIndexPath *indexPath = [(UITableView *)self.superview indexPathForCell: self];

    if(self.isChecked == NO)
    {
        self.isChecked = YES;
        [_checkbox setImage:[UIImage imageNamed:@"checkbox_checked.png"] forState:UIControlStateNormal];        
    }
    else{
        self.isChecked = NO;
        [_checkbox setImage:[UIImage imageNamed:@"checkbox.png"] forState:UIControlStateNormal];
    }

} 
```

如何区分每个单元格以避免重复检查？

太感谢了！此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:01:00.187

您需要在 AccountCell.h/AccountCell.m 中编写以下方法

```
- (void)resetCell {

    //Reset Your cell content to default. So that you can reuse the cell.
    NSIndexPath *indexPath = [(UITableView *)self.superview indexPathForCell: self];

        self.isChecked = NO;
        [_checkbox setImage:[UIImage imageNamed:@"checkbox.png"] forState:UIControlStateNormal];

    //other resettings...
} 
```

然后您可以从 (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 调用此方法，如下所示

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    _model = [_accountArray objectAtIndex:indexPath.row];

    AccountCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"AccountCell" owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
    }
    // configure cell 
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    //reset your cell's content.
    [cell resetCell];

    //perform your task below
    [[cell accountLabel] setText:_model.accountName];
    [[cell accountNumberLabel] setText:_model.accountNumber];
    // checkbox ? 

    if(cell.isChecked){

        NSLog(@"Checked");
    }else{
        NSLog(@"No checked");
    }

    return cell;
} 
```

希望这可以帮助。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:47:28.563

我认为你最好使用按钮的选定状态来跟踪它是否被选中。看起来您已经创建了一个“AccountCell”类，因此您应该能够简单地为 AccountCell 类中的复选框提供一个出口，例如：

```
@interface AccountCell : UITableViewCell
...
@property IBOutlet UIButton *checkBox; 
```

现在，您可以在 AccountCell 的 viewDidLoad 方法中为按钮设置正常/检查图像（因为每次状态更改时都不需要这样做）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [_checkBox setImage:[UIImage imageNamed:"checkbox.png" forState:UIControlStateNormal];
    [_checkBox setImage:[UIImage imageNamed:"checkbox_checked.png" forState:UIControlStateSelected];
} 
```

在您的 cellForRowAtIndex 路径中，您可以使用以下方法确保为返回的单元格清除复选框：

```
cell.checkBox.selected = NO; 
```

然后在复选框的“操作”代码中，您可以使用以下命令打开和关闭复选框：

```
self.selected = !self.selected; 
```

# .net - Wix Burn：安装 MsuPackage 后如何重新启动

> ID：15502480
> 
> 赞同：4
> 
> 时间：2013-03-19T14:39:16.790
> 
> 标签：.net, wix, windows-installer, burn

我目前有一个场景，我需要使用 burn 执行以下操作

1.  安装 Windows 映像组件
2.  安装 Windows 安装程序 4.5
3.  安装 .Net 4 Web
4.  运行我的安装程序（使用 Wix 3.6 创建）

我想知道是否有办法在安装 MsuPackage 后强制重启...

在我的场景中，当引导程序在 Windows vista 上安装 Windows6.0-KB942288-v2-x86.msu 并随后尝试在不重新启动的情况下安装 .Net Framework 时会引发错误：0x8007064d - Windows 安装程序无法安装此安装包服务...

如果我在错误后重新启动并再次运行设置，它会正常工作。请注意，使用 ExePackage 可以指定 InstallCommand 以及 ExitCode，如何在 MsuPackage 中实现相同的行为？

请在下面查看我的 wxs 文件的内容：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" 
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension" 
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
  <Bundle Name="$(var.MyProject.ProjectName)" Version="2.6.0.0" Manufacturer="Awesome Software (Pty) Ltd" UpgradeCode="6a77118d-c132-4454-850b-935edc287945">
    <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense">
      <bal:WixStandardBootstrapperApplication
        LicenseFile="$(var.SolutionDir)Awesome.EULA\Awesome CE Eula.rtf"
        SuppressOptionsUI="yes"/>
    </BootstrapperApplicationRef>

    <util:FileSearch Path="[SystemFolder]\windowscodecs.dll" Variable="windowscodecs" Result="exists" />

    <Chain>
      <!-- Windows Imaging Component-->
      <ExePackage Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="yes"
        SourceFile="redist\wic_x86_enu.exe"
        DownloadUrl="http://download.microsoft.com/download/f/f/1/ff178bb1-da91-48ed-89e5-478a99387d4f/wic_x86_enu.exe"
        InstallCondition="VersionNT &lt; v5.2 AND NOT VersionNT64"
        DetectCondition="windowscodecs"
        InstallCommand="/quiet /norestart">
      </ExePackage>
      <ExePackage Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="yes"
        SourceFile="redist\wic_x64_enu.exe"
        DownloadUrl="http://download.microsoft.com/download/6/4/5/645FED5F-A6E7-44D9-9D10-FE83348796B0/wic_x64_enu.exe"
        InstallCondition="VersionNT &lt; v5.2 AND VersionNT64"
        DetectCondition="windowscodecs"
        InstallCommand="/quiet /norestart">
      </ExePackage>
      <!-- Windows Installer 4.5 -->
      <ExePackage Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="yes"
          SourceFile="redist\WindowsXP-KB942288-v3-x86.exe"
          DownloadUrl="http://download.microsoft.com/download/2/6/1/261fca42-22c0-4f91-9451-0e0f2e08356d/WindowsXP-KB942288-v3-x86.exe"
          InstallCondition="VersionNT=v5.1 AND NOT VersionNT64 AND VersionMsi &lt; v4.5"
          InstallCommand="/quiet /norestart">
        <ExitCode Behavior="forceReboot"/>
      </ExePackage>
      <ExePackage Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="yes"
          SourceFile="redist\WindowsServer2003-KB942288-v4-x86.exe"
          DownloadUrl="http://download.microsoft.com/download/2/6/1/261fca42-22c0-4f91-9451-0e0f2e08356d/WindowsServer2003-KB942288-v4-x86.exe"
          InstallCondition="VersionNT=v5.2 AND NOT VersionNT64 AND VersionMsi &lt; v4.5"
          InstallCommand="/quiet /norestart">
        <ExitCode Behavior="forceReboot"/>
      </ExePackage>
      <ExePackage Cache="no" Compressed="no" PerMachine="yes" Permanent="yes" Vital="yes"
          SourceFile="redist\WindowsServer2003-KB942288-v4-x64.exe"
          DownloadUrl="http://download.microsoft.com/download/2/6/1/261fca42-22c0-4f91-9451-0e0f2e08356d/WindowsServer2003-KB942288-v4-x64.exe"
          InstallCondition="VersionNT=v5.2 AND VersionNT64 AND VersionMsi &lt; v4.5"
          InstallCommand="/quiet /norestart">
        <ExitCode Behavior="forceReboot"/>
      </ExePackage>
      <MsuPackage Cache="no" Compressed="no" Permanent="yes" Vital="yes" KB="KB942288" 
          SourceFile="redist\Windows6.0-KB942288-v2-x86.msu"
          DownloadUrl="http://download.microsoft.com/download/2/6/1/261fca42-22c0-4f91-9451-0e0f2e08356d/Windows6.0-KB942288-v2-x86.msu"
          InstallCondition="VersionNT=v6.0 AND NOT VersionNT64 AND VersionMsi &lt; v4.5">
      </MsuPackage>
      <MsuPackage Cache="no" Compressed="no" Permanent="yes" Vital="yes" KB="KB942288"
          SourceFile="redist\Windows6.0-KB942288-v2-x64.msu"
          DownloadUrl="http://download.microsoft.com/download/2/6/1/261fca42-22c0-4f91-9451-0e0f2e08356d/Windows6.0-KB942288-v2-x64.msu"
          InstallCondition="VersionNT=v6.0 AND VersionNT64 AND VersionMsi &lt; v4.5">
      </MsuPackage>
      <PackageGroupRef Id="NetFx40Web"/>
      <RollbackBoundary />
      <MsiPackage Id="MaxCut" SourceFile=".\StagingBundle\Awesome.msi" DisplayInternalUI="no"/>
    </Chain>
  </Bundle>
</Wix> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:58:53.417

自动检测 MsuPackage 重新启动。您安装的 MSU 可能说它需要重新启动（日志文件应该说一些东西，IIRC）但不需要*强制*重新启动。已要求让 Burn 有办法在链中将“需要重新启动”提升为“如果此时需要重新启动，则立即重新启动”。不幸的是，此时该功能还不存在。

`IDRESTART`但是，您可以通过从`OnExecutePackageComplete()`回调返回在自定义 BootstrapperApplication 中实现“立即强制重启”行为。在有人实现该功能之前，这是唯一的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-25T15:19:29.460

我最近需要这样做，并且不想为每个 MSU 编写引导程序或创建额外的引导程序 EXE

作为一种解决方法，我添加了一个什么都不做的可执行文件（NOP.EXE）在之后运行`MsuPackage`并用于`ExitCode`强制重新启动。

您需要对 和 使用相同`DetectCondition`的。`MsuPackage``ExePackage`

您可以在多个 MsuPackages 之后使用相同的可执行文件

所以像...

```
 <Fragment>
    <util:FileSearch Path="PathToSomeDotNetDll" Result="version" Variable="DotNetVersionCheck" />
    <PackageGroup Id="net45_x86">
      <MsuPackage Cache="no"
                  Compressed="no"
                  DetectCondition="DotNetVersionCheck &gt;= v4.5"
                  Permanent="yes"
                  Vital="yes"
                  KB="KB942288"
                  SourceFile="redist\Windows6.0-KB942288-v2-x86.msu"
                  DownloadUrl="http://download.microsoft.com/download/2/6/1/261fca42-22c0-4f91-9451-0e0f2e08356d/Windows6.0-KB942288-v2-x86.msu"
                  InstallCondition="VersionNT=v6.0 AND NOT VersionNT64 AND VersionMsi &lt; v4.5">
      </MsuPackage>
      <!-- Trick the bootstrapper into rebooting now by running an executable that does nothing and set ExitCode to force a reboot -->
      <ExePackage SourceFile="bin\nop.exe"
                  DisplayName="Reboot required after KB942288"
                  DetectCondition="DotNetVersionCheck &gt;= v4.5"
                  InstallCommand="nop.exe"
                  InstallCondition="VersionNT=v6.0 AND NOT VersionNT64 AND VersionMsi &lt; v4.5"
                  Permanent="yes">
        <ExitCode Behavior="forceReboot"/>
      </ExePackage>
    </PackageGroup>
  </Fragment> 
```

# z-machine - 如何在 web 应用程序中嵌入 ZMachine？

> ID：15502484
> 
> 赞同：3
> 
> 时间：2013-03-19T14:39:30.813
> 
> 标签：z-machine

我正计划创建一个实现 ZMachine Games 的 web 应用程序。我想选择python和google app engine。像羊皮纸这样的东西也可以。我如何拥有可以处理 ZIL 游戏的东西？

# java - 为什么签名为空？

> ID：15502486
> 
> 赞同：4
> 
> 时间：2013-03-19T14:39:32.887
> 
> 标签：java, android, signatures

再会！
我试过这段代码：

```
PackageInfo info = mContext.getPackageManager().getPackageArchiveInfo(absolute_apk_name, PackageManager.GET_SIGNATURES);
        if (info != null)
        {
            Signature[] sig = info.signatures;
            if (sig != null)
                sigstring = new String(sig[0].toChars());
        } 
```

但是`info.signatures == null`，我不知道“为什么？” **absolute_apk_name**
中的文件存在，我检查了 Android 2.1

 ****升级版：**

```
absolute_apk_name = "/data/data/ru.UseIT.SimpleFormsLauncher/files/SimpleFormsGeneral.apk" 
```

apk 是使用标志创建的`Context.MODE_WORLD_READABLE|Context.MODE_WORLD_WRITEABLE`

但是如果执行这段代码

```
Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.setDataAndType(Uri.fromFile(new File(absolute_apk_name )), "application/vnd.android.package-archive");
        mContext.startActivity(intent); 
```

它已安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T02:47:52.527

这是一个 android 系统错误，请参阅此 [https://code.google.com/p/android/issues/detail?id=9151#c8](https://code.google.com/p/android/issues/detail?id=9151#c8) 此错误已在 4.0+ 上修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T08:33:13.560

我检查了 Android 源代码，结果发现 PackageManager#getPackageArchiveInfo(String, int) 如果 Android 版本为 2.3.7 或更低版本，则不包含签名。

请看下面的链接。

[http://tools.oesf.biz/android-2.3.7_r1.0/xref/frameworks/base/core/java/android/content/pm/PackageManager.java#1891](http://tools.oesf.biz/android-2.3.7_r1.0/xref/frameworks/base/core/java/android/content/pm/PackageManager.java#1891)

[http://tools.oesf.biz/android-4.0.3_r1.0/xref/frameworks/base/core/java/android/content/pm/PackageManager.java#2121](http://tools.oesf.biz/android-4.0.3_r1.0/xref/frameworks/base/core/java/android/content/pm/PackageManager.java#2121)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-17T08:53:29.487

我不太确定您要实现什么，但是使用绝对 apk 名称/路径不正确，您需要包名。我已经能够使用以下方法获取签名，只需将“com.android.chrome”替换为您想要的应用程序的包名称。

```
final PackageInfo pkgInfo = packageManager.getPackageInfo(
                    "com.android.chrome", PackageManager.GET_SIGNATURES);
final Signature[] signatures = pkgInfo.signatures; 
```**

# java - 如何在下一个和上一个按钮中执行操作？

> ID：15502487
> 
> 赞同：-2
> 
> 时间：2013-03-19T14:39:41.547
> 
> 标签：java, user-interface, button

我有一个问题如何在下一个和上一个中执行操作。我有一台扫描仪，可以读取我在 wew.txt 中的文件。为什么它不能读取我输入的第一个？我怎样才能转到我保存的下一个文件？

我的 wew.txt 在底部。我的代码如下：

```
static int index = 5;
public void openFile(){
try   {
x = new Scanner(new File("C:\\wew.txt"));
}
catch(Exception d){
}

}
public void readFile(){
while(x.hasNext()){
String a = x.next();
String b = x.next();
String c = x.next();

number.setText(a);
name2.setText(b);
lastname2.setText(c);
    }
}

public void closeFile(){
x.close();
}
public void update(){
openFile();
readFile();
closeFile();
   }

public void actionPerformed(ActionEvent e){
if(e.getSource()==cancel){
number.setEditable(false);
name2.setEditable(false);
lastname2.setEditable(false);
delete.setEnabled(true);
next.setEnabled(true);
prev.setEnabled(true);
edit.setEnabled(true);
  }
if(e.getSource()==add){

number.setEditable(true);
name2.setEditable(true);
lastname2.setEditable(true); 
next.setEnabled(true);
prev.setEnabled(false);
edit.setEnabled(false);
delete.setEnabled(false);
number.setText("");
name2.setText("");
lastname2.setText("");

}
else if( e.getSource()==save ){//save button
summary = (" "+number.getText()) ;
summary2 = ("" +name2.getText()) ; 
summary3 = (" "+lastname2.getText());
String I = wew.summary;
String Love = wew.summary2;
String You = wew.summary3;
try {
BufferedWriter bw = new BufferedWriter(new FileWriter(new File("C:\\wew.txt"),true));
bw.write(I);
bw.newLine();
bw.write(Love);
bw.newLine();
bw.write(You);
bw.newLine(); 
bw.close();
JOptionPane.showMessageDialog(frame,"Your File has been Saved");
}
catch(IOException E)
{
}
}
else if(e.getSource()==next){
if(index>=1)//Next Button 
index ++;
update();
System.out.println(index);

}

else if(e.getSource()==prev){
if(index<= 5)
{
index --;
update();
System.out.println(index);
}

}
else if(e.getSource()==exit)
{
JOptionPane.showConfirmDialog(frame,"Want To Exit?");
frame.dispose();
}
} 
public static void main(String args[]) {
new wew();
}
} 
```

实际上我的 wew.txt 看起来像这样：

1111111

克里斯托弗

潘吉利南

1455122

克里斯

庞吉尔

1210176

克里斯

潘吉利南

12111

CS

光盘

1210176

克里斯

庞

1111111

庞

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:36:03.073

当我浏览你的代码时，我发现它有一些严重的问题！

当您按`next`或时`prev`。你是`openning`文件，然后是`read`三行，然后`closing`是文件。因为一直在做同样的事情而没有记录你想阅读的位置，所以基本上你看到的是相同的数据（第一个位置的数据）。

**解决方案：**

假设您需要读取*第 i^th 个*数据，因此您需要跳过*(i-1)3*行，然后为三个文本字段读取三行。这里给出了示例代码！

```
 public void readFile(int offset){
   //Scanner x = new Scanner(new File("C://wew.txt"));
    int i = 0;
    while (x.hasNext() && i <= offset ) {
        String a = x.next();
        String b = x.next();
        String c = x.next();
        System.out.println("offset: "+offset);
       if (i == offset) {
            number.setText(a);
            name2.setText(b);
            lastname2.setText(c);
         break;
        }
     i++;
    }
   // x.close();
} 
```

只需将您的 readFile() 方法替换为我的方法即可。`readFile()`在您的 update() 方法`readFile(index)`中替换`int index = 5`为`int index = 0`. 注释掉`if (index >= 1)`并替换`if(index<= 5)`为`if (index >= 0)`.

**编辑：**

这是整个代码！

```
import javax.swing.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.util.*;
import java.io.*;
import javax.swing.JOptionPane;
import javax.swing.event.DocumentListener;
import javax.swing.event.UndoableEditListener;
import javax.swing.text.*;

public class GuiMain implements ActionListener {
static String summary, summary2, summary3;
private Scanner x;
JFrame frame = new JFrame("Generator X");
JPanel p = new JPanel();
JLabel studentno = new JLabel("Student No:");
JLabel name = new JLabel("First name:");
JLabel lastname = new JLabel("Last Name:");
JTextField number = new JTextField();
JTextField name2 = new JTextField();
JTextField lastname2 = new JTextField();
JButton next = new JButton("NEXT---->");
JButton prev = new JButton("<----PREV");
JButton add = new JButton("Add");
JButton save = new JButton("Save");
JButton delete = new JButton("Delete");
JButton edit = new JButton("Edit");
JButton cancel = new JButton("Cancel");
JButton exit = new JButton("Exit");
JButton clear = new JButton("Clear");
static int index = -1;

public void openFile() {
    try {

      x = new Scanner(new File("C://wew.txt"));

    } catch (Exception d) {
    }

}

public void readFile(int offset) {

    int i = 0;
    while (x.hasNext() && i <= offset ) {
        String a = x.next();
        String b = x.next();
        String c = x.next();
        System.out.println("offset: "+offset);
       if (i == offset) {
            number.setText(a);
            name2.setText(b);
            lastname2.setText(c);
         break;
        }
     i++;
    }
}

public void closeFile() {
    x.close();
}

public void update() {
    openFile();
    readFile(index);
    closeFile();
}

public GuiMain() {

    frame.setSize(300, 500);//frame
    frame.setLayout(null);
    frame.setVisible(true);
    frame.setResizable(false);
    studentno.setBounds(30, 30, 80, 60);//LABEL

    number.setBounds(100, 45, 100, 25);//TextField
    number.addActionListener(this);
    //number.setDocument();
    //number.setDocument(new JTextFieldLimit(7));
    number.setEditable(false);

    name.setBounds(30, 70, 100, 65);//LABEL
    name2.setBounds(100, 90, 100, 28);//TextField
    name2.addActionListener(this);
    name2.setEditable(false);

    lastname.setBounds(30, 115, 100, 65);//LABEL
    lastname2.setBounds(100, 133, 120, 28);//TextField
    lastname2.addActionListener(this);
    lastname2.setEditable(false);

    next.setBounds(150, 170, 100, 30);//Next Button
    next.addActionListener(this);

    prev.setBounds(50, 170, 100, 30);//Previous Button
    prev.addActionListener(this);

    add.setBounds(50, 210, 100, 30);
    add.addActionListener(this);

    save.setBounds(100, 250, 100, 30);//Save Button
    save.addActionListener(this);

    cancel.setBounds(50, 330, 200, 35);
    cancel.addActionListener(this);

    delete.setBounds(50, 290, 200, 35);
    delete.addActionListener(this);

    edit.setBounds(150, 210, 100, 30);
    edit.addActionListener(this);

    exit.setBounds(50, 370, 200, 35);
    exit.addActionListener(this);

    frame.add(studentno);
    frame.add(name);
    frame.add(lastname);
    frame.add(number);
    frame.add(name2);
    frame.add(lastname2);
    frame.add(next);
    frame.add(prev);
    frame.add(add);
    frame.add(save);
    frame.add(cancel);
    frame.add(exit);
    frame.add(delete);
    frame.add(clear);
}

public void actionPerformed(ActionEvent e) {
    if (e.getSource() == cancel) {
        number.setEditable(false);
        name2.setEditable(false);
        lastname2.setEditable(false);
        delete.setEnabled(true);
        next.setEnabled(true);
        prev.setEnabled(true);
        edit.setEnabled(true);
    }
    if (e.getSource() == add) {

        number.setEditable(true);
        name2.setEditable(true);
        lastname2.setEditable(true);
        next.setEnabled(true);
        prev.setEnabled(false);
        edit.setEnabled(false);
        delete.setEnabled(false);
        number.setText("");
        name2.setText("");
        lastname2.setText("");

    } else if (e.getSource() == save) {//save button
        summary = (" " + number.getText());
        summary2 = ("" + name2.getText());
        summary3 = (" " + lastname2.getText());
        String I = GuiMain.summary;
        String Love = GuiMain.summary2;
        String You = GuiMain.summary3;
        try {
            BufferedWriter bw = new BufferedWriter(new FileWriter(new File("C://wew.txt"), true));
            bw.write(I);
            bw.newLine();
            bw.write(Love);
            bw.newLine();
            bw.write(You);
            bw.newLine();
            bw.close();
            JOptionPane.showMessageDialog(frame, "Your File has been Saved");
        } catch (IOException E) {
        }
    } else if (e.getSource() == next) {
        //if (index >= 1)//Next Button
        index++;
        update();

       // System.out.println(index);

    } else if (e.getSource() == prev) {
        if (index >= 0) {
            index--;
            update();

           // System.out.println(index);
        }

    } else if (e.getSource() == exit) {
        JOptionPane.showConfirmDialog(frame, "Want To Exit?");
        frame.dispose();
    }
}

public static void main(String args[]) {
    new GuiMain();
}
} 
```

最后但是同样重要的。首先学习基本的Java概念，相信我，有很多东西要知道！

# excel - Excel - 在日期后计算 45 天

> ID：15502489
> 
> 赞同：1
> 
> 时间：2013-03-19T14:39:43.973
> 
> 标签：excel, date, formula, counting, days

我有一份不同入学日期的清单。我想用 excel 计算注册日期后 45 天。有谁知道它的公式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T14:40:24.117

假设您的数据在`A1`，您的公式很简单`=A1+45`:-)

# twitter-bootstrap - 播放框架在一行中引导多个输入文本

> ID：15502491
> 
> 赞同：1
> 
> 时间：2013-03-19T14:39:44.670
> 
> 标签：twitter-bootstrap, playframework

我想在一行中创建一个包含多个输入文本框的表单，其中包含占位符文本并且没有任何标签。目前我正在使用如下的标准引导构造函数。但它会在带有标签的单独行上创建所有输入文本框。

```
@(elements: helper.FieldElements)
<div class="control-group @if(elements.hasErrors) {error}">
<placeholder class="control-placeholder" for="@elements.id">@elements.placeholder</placeholder>
<div class="controls">@elements.input
    <p class="help-inline">@elements.infos.mkString(", ")</p>
    @if(elements.hasErrors) { <p class="help-block">@elements.errors.mkString(", ")</p> }
</div>
</div> 
```

是否有模板可以仅在一行中创建控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:22:03.443

您不需要使用助手来创建表单字段，它只是助手......

而是创建通用 HTML 字段，并在需要时从 Form 中选择设置值。如果你不知道怎么做，请告诉我。我会发布一些样本。

# gwt - gin 从异步服务注入和读取配置

> ID：15502493
> 
> 赞同：0
> 
> 时间：2013-03-19T14:39:50.920
> 
> 标签：gwt, guice, gwt-rpc, gwt-gin

我有模块，这个模块只通过异步回调从服务器读取配置：

```
@Singleton
public class Config {

private ConnectionSettings connectionSettings;

@Inject
protected Config(final MainRPCAsync mainRpc) {  

      configureConnection(mainRpc);
}

private void configureConnection(MainRPCAsync mainRpc) {

    Log.debug("****Configure connection..");

    mainRpc.getConfig(new AsyncCallback<Configuration>() {

        @Override
        public void onSuccess(Configuration result) {
            Log.debug("-----------Get config");
                                 //initialize configuration settings

            });             

        }

    }); 
```

接下来这个类`Config`被注入到另一个模块，但是当我需要`configSettings`从那个模块中获取时，我只得到`null`....

并且在日志控制台中我读取了该行`Log.debug("-----------Get config");`显示信息毕竟...

在将该类注入另一个模块之前，是否可以确定连接设置将由 rpc async 初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T10:31:40.330

我也有同样的需求。我想将结果传递到使用 GIN 创建的小部件中。

**更新** 我用辅助注射解决了。因此，我将我的小部件创建为异步服务的成功方法，并使用结果来创建我的小部件。

# c++ - 是否可以从命令行运行缩小页面速度的 html？

> ID：15502494
> 
> 赞同：0
> 
> 时间：2013-03-19T14:39:52.667
> 
> 标签：c++, pagespeed

是否可以从命令行运行缩小页面速度的 html？如果是这样，怎么做？我只想压缩我的html文件。我不需要页面速度的其他功能。所以我想提取页面速度的这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T14:24:34.987

如果您能够从源代码编译，则 mod_pagespeed 源代码包含一个示例 [1]，说明如何使用底层 PageSpeed 优化 SDK，只需稍作修改即可完成您想要的工作。

在它传入 url (test.com) 时，您可以像这样在查询字符串上添加过滤器：“?ModPagespeedFilters=collapse_whitespace”

然后它将输出您发送给它的 html 文件，其中所有空格都已折叠。

[1] [https://code.google.com/p/modpagespeed/source/browse/trunk/src/net/instaweb/automatic/static_rewriter_main.cc](https://code.google.com/p/modpagespeed/source/browse/trunk/src/net/instaweb/automatic/static_rewriter_main.cc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T18:57:58.790

htmlcompressor 项目是一个可以从命令行运行的 Java 程序：[https ://code.google.com/p/htmlcompressor/](https://code.google.com/p/htmlcompressor/)

如果你安装了 Python，django-htmlmin 有一个命令行模式（你不需要安装 django 来使用它）：[https://pypi.python.org/pypi/django-htmlmin](https://pypi.python.org/pypi/django-htmlmin)（但是，它似乎窒息在其中包含非 ascii 字符的文件上。）

如果您使用的是 Windows，此免费软件工具支持命令行模式：[http ://www.alentum.com/ahc/](http://www.alentum.com/ahc/)

# oracle10g - 从 Toad/SQL Plus/10g 中更新

> ID：15502498
> 
> 赞同：0
> 
> 时间：2013-03-19T14:40:09.083
> 
> 标签：oracle10g

我知道你们都在等待点击向下箭头，因为这个问题似乎每天都会得到回答；但是，似乎 update/from 子句不适用于我的特定配置。我使用的配置如标题所示：Toad DB 工具、SQL Plus 编辑器、10g 机器。无论我是否在以下代码段中添加 from 子句，我都会返回错误（注意：我已检查我的所有列名是否存在且拼写正确）

```
UPDATE distinct_network_point 
SET altitude = altitude_of_point.altitude 
FROM  altitude_of_point 
WHERE distinct_network_point.id= altitude_of_point.id 
```

我想从另一个表中的第 2 列更新表中的第 1 列，其中表 1 中的第 1 列等于表 2 中的第 1 列。这可能与我的配置有关吗？我也试过修改一个选择子查询来达到这个效果，但不能让它正确分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:05:29.783

[http://psoug.org/reference/update.html](http://psoug.org/reference/update.html)这是一个非常有用的线索，正是我所需要的。

# java - 在android中获取MediaPlayer对象的音量

> ID：15502510
> 
> 赞同：1
> 
> 时间：2013-03-19T14:40:29.687
> 
> 标签：java, android, media-player, volume

我一直在网上寻找答案。

我的应用程序是一种音板，允许用户将不同的循环混合在一起。到目前为止，除了一个非常烦人的部分外，我已经完成了其他所有工作。

当用户长按一个按钮时，我想显示一个搜索栏，然后将 MediaPlayer 的音量调整到搜索栏切换到的任何进度级别。我还想将进度条设置为 MediaPlayer 所处的音量级别。

问题是我找不到找到特定 MediaPlayer 音量的方法。我知道有一种方法可以使用音频管理器设置系统音量，但这对于混合不同的声音没有用。

当我准备把头发扯掉时，任何和所有的帮助都会受到赞赏。

# c# - 从 STRING 中获取某些字符串块

> ID：15502511
> 
> 赞同：1
> 
> 时间：2013-03-19T14:40:31.167
> 
> 标签：c#, string

这是一个文本：字符串**txt**保存这个值。

> CREATE TABLE table_name1 ( column_name11231 data_type, column_name232 data_type, column_name3 data_type, ....)
> 
> CREATE TABLE table_name2 ( column_name1 data_type, column_name2 data_type, column_name3 data_type, ....)
> 
> CREATE TABLE table_name3 ( column_name1231 data_type, column_name2 data_type, column_name3 data_type, ....)
> 
> CREATE TABLE table_name4 ( column_name1231 data_type, column_name1232 data_type, column_name1233 data_type, ....)

这是一个样本。我将从文本文件中读取它。然后我只想将每个 CREATE TABLE 命令放在一个字符串数组中。我怎么能接受？我试过拆分和子串。但那太愚蠢了。我用一种愚蠢而无效的方式做到了。

就这个：

```
string[] totalSp = Regex.Split(txt, "CREATE TABLE");
string[] output = new string[totalSp.Length-1];

for (int i = 1; i < totalSp.Length; i++ )
{
output[i - 1] = "CREATE TABLE " + totalSp[i].Replace("\r\n", "");
} 
```

这给了我想要的输出。但我现在这是糟糕的编码。我不能用更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:46:18.623

您可以使用此正则表达式来查找语句，只要您不会在输入中有太多变化。

```
var matches = Regex.Matches(txt, @"^CREATE TABLE .+", RegexOptions.Multiline);
string[] myArray = matches.Cast<Match>().Select(x => x.ToString()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:44:42.883

您可以使用`File.ReadLines`来获取行，并且很容易在没有正则表达式的情况下过滤掉空行。

```
var commands = File.ReadLines("filename.txt")
    .Where(line => !string.IsNullOrEmpty(line))
    .ToArray(); 
```

如果文件中还有其他命令，`create table`那么您也可以为此添加一个简单的过滤器。只需在另一个过滤器之后添加以下命令：

```
.Where(line => line.StartsWith("CREATE TABLE")) 
```

# extjs - ExtJS - 来自 getFormValues 的自定义 JSON 结构

> ID：15502513
> 
> 赞同：1
> 
> 时间：2013-03-19T14:40:42.043
> 
> 标签：extjs

一直在网上搜索，似乎找不到合适的答案，希望有人遇到过您需要将 ExtJS`getFormValues`响应类型的结构更改为控制器期望的结构的问题。

例如

```
form.a = "I'm A"
form.b = "I'm B"
form.c = "I'm C" 
```

来自的 JSON`getFieldValues()`是：

```
"fom_name":{
  "a": "I'm A",
  "b": "I'm B",
  "c": "I'm C"
} 
```

但是，我需要的控制器结构是

```
{
    "form_name": {
        "nestedArray": [{
            "a": "I'm A",
            "b": "I'm B",
            "c": "I'm C"
        }],
        "array2": []
    }
} 
```

我知道我可以迭代字段值并动态更改它们以适应结构，但寻找可以为我做到这一点的通用解决方案。

有什么想法吗？

谢谢，

伊恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:18:40.983

> 我知道我可以迭代字段值并动态更改它们以适应结构

我可能会这样做，因为它看起来相当微不足道，而且我认为没有更简单的方法可以做到这一点。如果需要，您可以将其作为覆盖包含（[Ext.form.Basic.getFieldValues](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.form.Basic-method-getFieldValues)）：

```
Ext.override(Ext.form.Basic, {
    getFieldValues: function(dirtyOnly) {

        //return this.getValues(false, dirtyOnly, false, true);

        var vals = this.getValues(false, dirtyOnly, false, true);

        var output = {};
        //iterate through vals and structure it the way you want it
        return output;
    },
}); 
```

# php - postgresql中的数据库字符串比较无法识别字符串长度

> ID：15502514
> 
> 赞同：0
> 
> 时间：2013-03-19T14:40:44.617
> 
> 标签：php, string, postgresql

我正在服务器之间传输数据，并且需要更改我们 wiki 数据库中的一些链接。我写了一个快速脚本，应该能够做到这一点没问题。但是当我运行它时，`if($datacount)`条件永远不会运行。这可能是我缺少的一些简单的东西，但我看不出问题出在哪里。

```
$dbconn = pg_connect("host= localhost port=5432 dbname=wiki user=user password=password");
$sql = "SELECT old_text FROM wiki_public.pagecontent LIMIT 10";
$go = pg_query($dbconn,$sql);
$i=0;
$string = 'sometext';
while($data = pg_fetch_assoc($go)) {
  $info = $data['old_text'];
  $count = strlen($string);
  $datacount = strlen($info);
  echo "Length: ".$datacount."<br/>";
  if($datacount != 0) {
    $position = strpos($string,$info);
    if($position !== false) {
      echo "The string ".$string." was found in row ".$i." and exists at position ".$position."The original content was: ".substr($info, $position,$count)."<br/>";
    }
  }
  $i++;
} 
```

谢谢！ **编辑**

当我删除`$datacount`条件时，这是我的输出

```
Length: 0

Warning: strpos(): Empty delimiter in D:\www\import\linksupadte.php on line 12
Length: 12
Length: 0

Warning: strpos(): Empty delimiter in D:\www\import\linksupadte.php on line 12
Length: 31
Length: 31
Length: 0

Warning: strpos(): Empty delimiter in D:\www\import\linksupadte.php on line 12
Length: 444
Length: 1614
Length: 153
Length: 125 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:07:24.063

我宣布今天对我来说是无脑的一天。

```
<?php
# Database connection snipped.

# Let's say the database contains at least one row that's a substring
# of $string. Something like 'John', or '/123/'.
$string = 'John/123/456/789/012';
while($data = pg_fetch_assoc($go)) {

  $position = strpos($string, $data['old_text']);

  if ($position !== false) {
    echo "$string contains ".$data['old_text'];
  }
  else {
    echo "$string does not contain ".$data['old_text'];
  }
}

?> 
```

# ios - “重新初始化”一个 sharedInstance

> ID：15502517
> 
> 赞同：0
> 
> 时间：2013-03-19T14:40:58.813
> 
> 标签：ios, objective-c, ipad, object, shared

这听起来可能很奇怪。

**设想**

实现 AFOauthClient

我创建了一个子类并使用我的 baseurl 创建了一个共享实例，所有这些都是

```
+ (GYMAFOAuthClient *)sharedClient {
    static GYMAFOAuthClient *_sharedClient = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{

        NSURL *url =[NSURL URLWithString:[[NSUserDefaults standardUserDefaults] stringForKey:@"kServer_Address"]];
        if (url==nil) {
            [[[UIAlertView alloc]initWithTitle:@"Required" message:@"Please enter the required fields in the settings page of the application" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil]show];
        }
        else
        {
             _sharedClient = [GYMAFOAuthClient clientWithBaseURL:url clientID:kClientID secret:kClientSecret];
        }       
    });
    return _sharedClient;
} 
```

完美运行。

**但**

现在我需要切换到其他服务器，并且因为我正在使用 dispatch_once 方法，所以重新初始化是一个麻烦。如何分配一个新的 url 并将我的共享实例与 baseurl 作为新的 url。

**我尝试了什么：**

我使用设置包的目的是在我的用户默认设置中有 url 现在只需要创建一个客户端并开始获取响应。我该如何实现它？

**澄清：**

更改服务器...意味着我有 5 个 VC 和一个登录 VC，并且所有服务器基本 url 都是相同的，直到用户去编辑设置页面。所以这意味着在设置编辑后用户必须启动应用程序重新登录然后获取所有服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:44:34.927

显然，共享/单例实例不是解决您问题的正确架构。我首先尝试摆脱对`sharedClient`这里的使用，然后将一个实例传递给需要它的东西。这样您就可以在需要时销毁它并创建一个新的。

如果这不切实际，因为你的单例伤得太深了，那么你需要修改它，使它成为 "has-a"`GYMAFOAuthClient`而不是 "is-a" `GYMAFOAuthClient`。这样你就可以重新配置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:54:05.190

您可以使用此代码获取自动释放对象

```
+ (GYMAFOAuthClient *) clientWithURL:(NSURL*) url {

 GYMAFOAuthClient *client = nil;
    if (url==nil) {
        [[[UIAlertView alloc]initWithTitle:@"Required" message:@"Please enter the required fields in the settings page of the application" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil]show];
    }
    else
    {
        client = [GYMAFOAuthClient clientWithBaseURL:url clientID:kClientID secret:kClientSecret];
    }
return client;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:30:55.790

我同意 Rob 的观点，但是您也可以在 AFOSharedClient 中将您的 url 创建为属性。

然后您应该能够更新它，因为它只是指向内存中某个位置的指针。

# php - 在 AsyncTask 上的 android 错误中更改密码功能

> ID：15502518
> 
> 赞同：1
> 
> 时间：2013-03-19T14:41:00.513
> 
> 标签：php, android, change-password

我尝试创建更改密码功能。我认为php可能没有问题。因此，我在 android 代码上有问题。现在，我不知道为什么 android 在 AsyncTask 问题上有问题。这是我的活动代码。我希望有人可以教我或帮助我。

```
 public class changpassword extends Activity{

Button btnChange;
EditText inputPassword;
EditText inputnewPassword;
EditText inputrenewPassword;
TextView ChangeErrorMsg;
String username;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_NAME = "name";

// Progress Dialog
private ProgressDialog pDialog;
// Creating JSON Parser object
JSONParser jParser = new JSONParser();

// url to get all orders list
private static String url_change_password = "http://10.0.2.2/android_login_api4/include/changepassword.php";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.changepassword);

    //get id
    Bundle bundle = this.getIntent().getExtras();       
    username = bundle.getString(KEY_NAME);

    // Importing all assets like buttons, text fields
    inputPassword = (EditText) findViewById(R.id.current_password);
    inputnewPassword = (EditText) findViewById(R.id.new_password);
    inputrenewPassword = (EditText) findViewById(R.id.renew_password);
    btnChange = (Button) findViewById(R.id.btnChange);
    ChangeErrorMsg = (TextView) findViewById(R.id.change_error);

    // Login button Click Event
    btnChange.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if (inputnewPassword.getText().toString().equals(inputrenewPassword.getText().toString())){

                 // starting background task to change password
                  new Change_Password().execute();
            }else {
                ChangeErrorMsg.setText("Passwords do not match");
            }
        }

    });

}

class Change_Password extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(changpassword.this);
        pDialog.setMessage("Changing... Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * getting All orders from url
     * */

    protected String doInBackground(String... args) {

        // getting password from EditTexts
        String password = inputPassword.getText().toString();
        String newpassword = inputnewPassword.getText().toString();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("username", username ));
        params.add(new BasicNameValuePair("oldpassword", password));
        params.add(new BasicNameValuePair("newpassword", newpassword));
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_change_password, "POST", params);

        try {

            // Checking for SUCCESS TAG
            int success = json.getInt(KEY_SUCCESS);

            if (success == 1) {

                    ChangeErrorMsg.setText("Successsful change ");
                }else{
                    // Error in login
                    ChangeErrorMsg.setText("Your current password was incorrect.");
                }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }
    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once product uupdated
        pDialog.dismiss();
    }
}
} 
```

那是我的日志猫

```
 03-19 14:27:41.188: E/AndroidRuntime(659): FATAL EXCEPTION: AsyncTask #1
 03-19 14:27:41.188: E/AndroidRuntime(659): java.lang.RuntimeException: An error      occured while executing doInBackground()
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at java.lang.Thread.run(Thread.java:1096)
 03-19 14:27:41.188: E/AndroidRuntime(659): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.view.ViewRoot.invalidateChild(ViewRoot.java:607)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:633)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:2505)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.view.View.invalidate(View.java:5139)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.widget.TextView.checkForRelayout(TextView.java:5364)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.widget.TextView.setText(TextView.java:2688)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.widget.TextView.setText(TextView.java:2556)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.widget.TextView.setText(TextView.java:2531)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at com.example.androidhive.changpassword$Change_Password.doInBackground(changpassword.java:132)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at com.example.androidhive.changpassword$Change_Password.doInBackground(changpassword.java:1)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
 03-19 14:27:41.188: E/AndroidRuntime(659):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
 03-19 14:27:41.188: E/AndroidRuntime(659):     ... 4 more
 03-19 14:27:41.889: E/WindowManager(659): Activity com.example.androidhive.changpassword has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@43e617f8 that was originally added here
 03-19 14:27:41.889: E/WindowManager(659): android.view.WindowLeaked: Activity com.example.androidhive.changpassword has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@43e617f8 that was originally added here
 03-19 14:27:41.889: E/WindowManager(659):  at android.view.ViewRoot.<init>(ViewRoot.java:247)
 03-19 14:27:41.889: E/WindowManager(659):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
 03-19 14:27:41.889: E/WindowManager(659):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
 03-19 14:27:41.889: E/WindowManager(659):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
 03-19 14:27:41.889: E/WindowManager(659):  at android.app.Dialog.show(Dialog.java:241)
 03-19 14:27:41.889: E/WindowManager(659):  at com.example.androidhive.changpassword$Change_Password.onPreExecute(changpassword.java:94)
 03-19 14:27:41.889: E/WindowManager(659):  at android.os.AsyncTask.execute(AsyncTask.java:391)
 03-19 14:27:41.889: E/WindowManager(659):  at com.example.androidhive.changpassword$1.onClick(changpassword.java:71)
 03-19 14:27:41.889: E/WindowManager(659):  at android.view.View.performClick(View.java:2408)
 03-19 14:27:41.889: E/WindowManager(659):  at android.view.View$PerformClick.run(View.java:8816)
 03-19 14:27:41.889: E/WindowManager(659):  at      android.os.Handler.handleCallback(Handler.java:587)
 03-19 14:27:41.889: E/WindowManager(659):  at android.os.Handler.dispatchMessage(Handler.java:92)
 03-19 14:27:41.889: E/WindowManager(659):  at android.os.Looper.loop(Looper.java:123)
 03-19 14:27:41.889: E/WindowManager(659):  at android.app.ActivityThread.main(ActivityThread.java:4627)
 03-19 14:27:41.889: E/WindowManager(659):  at java.lang.reflect.Method.invokeNative(Native Method)
 03-19 14:27:41.889: E/WindowManager(659):  at java.lang.reflect.Method.invoke(Method.java:521)
 03-19 14:27:41.889: E/WindowManager(659):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 03-19 14:27:41.889: E/WindowManager(659):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 03-19 14:27:41.889: E/WindowManager(659):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:46:57.930

不能在后台线程中进行ui相关的操作，所以`ChangeErrorMsg.setText`必须在后台调用`onPostExecute`

```
protected String doInBackground(String... args) {
    // getting password from EditTexts
    String password = inputPassword.getText().toString();
    String newpassword = inputnewPassword.getText().toString();

    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("username", username ));
    params.add(new BasicNameValuePair("oldpassword", password));
    params.add(new BasicNameValuePair("newpassword", newpassword));
    // getting JSON string from URL
    JSONObject json = jParser.makeHttpRequest(url_change_password, "POST", params);         

    try {
        // Checking for SUCCESS TAG
        int success = json.getInt(KEY_SUCCESS);

        if (success == 1) {
            return "Successsful change";
        }

        return "Your current password was incorrect.";
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return null;
}

/**
 * After completing background task Dismiss the progress dialog
 * **/
protected void onPostExecute(String file_url) {
    // dismiss the dialog once product uupdated
    ChangeErrorMsg.setText(file_url);
    pDialog.dismiss();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:49:05.033

您的问题是您试图访问您的视图，特别是您`EditText`从 AsyncTask 中的后台线程。您可能应该将它们作为 AsyncTask 的参数发送。

您正在触摸几个地方的视图。例如：

```
protected String doInBackground(String... args) {

    // getting password from EditTexts
    String password = inputPassword.getText().toString();
    String newpassword = inputnewPassword.getText().toString(); 
```

这是一个很大的不。

```
protected String doInBackground(String... args) {

    // getting password from args
    String password = args[0];
    String newpassword = args[1]; 
```

例如 `new YourAsyncTask().execute(password,newpassword);`

编辑：澄清，不要在后台线程中进行任何 UI/视图处理，也就是不要触摸视图或发送 Toast。要么发送参数，要么在执行前或执行后执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:47:51.140

在您的情况下，您正在尝试从`doInBackground()`方法内部的后台线程访问 UI 组件（视图）。

您可以使用`onPostExecute`which 在 UI 线程上运行。

# char - 在 html 中使用乌克兰字符集

> ID：15502519
> 
> 赞同：1
> 
> 时间：2013-03-19T14:41:02.180
> 
> 标签：char

我敢肯定这是一个荒谬的基本问题，但我找不到任何东西可以向我解释。我的网站需要英文和乌克兰文版本，英文版本已经编码。我只是不知道如何告诉 html 文档为网站的乌克兰语部分显示乌克兰语字符。任何帮助都会被业余程序员谦虚地接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:43:36.323

尝试将其添加到您的 html 头中 `<meta charset="UTF-8" />`

并确保所有文本（在您的数据库或其他任何内容中）都编码为 utf-8

# android - 底部的 ActionBar，没有 TitleBar

> ID：15502521
> 
> 赞同：5
> 
> 时间：2013-03-19T14:41:06.957
> 
> 标签：android, android-layout, android-emulator, android-actionbar

在我的应用程序中，我有一个 ActionBar 并`android:uiOptions="splitActionBarWhenNarrow"`在清单中进行了设置，因此在手机上它出现在底部。

我还在代码中设置了以下内容：

```
actionBar.setDisplayShowTitleEnabled(false);
actionBar.setDisplayShowHomeEnabled(false); 
```

当我在模拟器中运行应用程序时，我看到底部的操作栏，但是如果我不禁用它们，图标和标题应该是黑色的空白区域。

这个可以去掉吗？

就像这样：

![在此处输入图像描述](../Images/094afd3a72e4d7f699e127511bc81a11.png)

在添加上面的代码之前，我从左侧图像开始，而不是看到中心图像​​，我将其视为右侧图像。我没有使用图像中的选项卡....这有关系吗？只是用图片来解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:17:52.307

你试过把：

android:theme="@android:style/Theme.NoTitleBar.Fullscreen"

在你的 AndroidManifest.xml 里面？

# c# - mysql Select Like column like column1 OR column2

> ID：15502523
> 
> 赞同：0
> 
> 时间：2013-03-19T14:41:16.667
> 
> 标签：c#, mysql

在我的网络应用程序中，我有一个搜索框，以便我可以使用名字或姓氏搜索我的数据库，它将在我的网络应用程序中显示结果。用户输入名字或姓氏。使用 Like 查询..如何编写 Like 查询这个查询。

```
 public DataTable SearchbyOPDname(string fname, string lname)
   {
       if (con.State == ConnectionState.Closed)
       {
           con.Open();
       }
       string sql = "SELECT opd_id AS [OPD No], opd_date AS DATE, opd_dpt AS DEPARTMENT, 
       opd_pfname AS [FIRST NAME], opd_plname AS [LAST NAME], opd_age AS AGE, opd_gender AS GENDER, 
       opd_mob AS [MOBILE NO], opd_fthrname AS [FATHER NAME], opd_hsbndname AS [HUSBAND NAME] 
       FROM tbl_OPD WHERE opd_pfname like'" + fname +"' OR opd_plname like'" + lname + "'ORDER BY DATE DESC";
       SqlDataAdapter adp = new SqlDataAdapter(sql, con);
       DataTable dt = new DataTable();
       adp.Fill(dt);
       con.Close();
       return dt;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:47:20.640

我认为你需要`%`为你所用`LIKE`；

```
WHERE opd_pfname LIKE '%" + fname + @"%' OR opd_plname LIKE '%" + lname + @"%' 
```

*   [SQL LIKE 运算符](http://www.w3schools.com/sql/sql_like.asp)

但更重要的是（正如我在[评论](https://stackoverflow.com/questions/15502523/mysql-select-like-column-like-column1-or-column2#comment21950132_15502523)中提到的）始终使用*[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)*。*[您的代码对SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)*攻击是开放的。例如;

```
 WHERE opd_pfname LIKE '%' + @fname + '%'
            OR opd_plname LIKE '%' + @lname + '%'

cmd.Parameters.AddWithValue(@fname, fname);
cmd.Parameters.AddWithValue(@lname, lname);

SqlDataAdapter adp = new SqlDataAdapter(cmd);
DataTable dt = new DataTable();
adp.Fill(dt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:45:43.670

如果您想使用 LIKE 进行部分匹配，则必须`%`在模式之前和之后包含符号。这应该可以正常工作：

```
string sql = @"SELECT opd_id AS [OPD No]
              , opd_date AS DATE
              , opd_dpt AS DEPARTMENT
              , opd_pfname AS [FIRST NAME]
              , opd_plname AS [LAST NAME]
              , opd_age AS AGE
              , opd_gender AS GENDER
              , opd_mob AS [MOBILE NO]
              , opd_fthrname AS [FATHER NAME]
              , opd_hsbndname AS [HUSBAND NAME] 
          FROM tbl_OPD 
         WHERE opd_pfname LIKE '%" + fname + @"%'
            OR opd_plname LIKE '%" + lname + @"%'
         ORDER BY DATE DESC"; 
```

作为旁注，您应该使用参数化查询，而不是像那样手动构建查询！

以下是如何对参数化查询执行相同操作：

```
 using(SqlCommand cmd = con.CreateCommand())
  {
     cmd.Text = @"SELECT opd_id AS [OPD No]
              , opd_date AS DATE
              , opd_dpt AS DEPARTMENT
              , opd_pfname AS [FIRST NAME]
              , opd_plname AS [LAST NAME]
              , opd_age AS AGE
              , opd_gender AS GENDER
              , opd_mob AS [MOBILE NO]
              , opd_fthrname AS [FATHER NAME]
              , opd_hsbndname AS [HUSBAND NAME] 
          FROM tbl_OPD 
         WHERE opd_pfname LIKE '%' + @fname + '%'
            OR opd_plname LIKE '%' + @lname + '%'
         ORDER BY DATE DESC"

     cmd.Parameters.AddWithValue(@fname, fname);
     cmd.Parameters.AddWithValue(@lname, lname);

     cmd.Prepare();

     SqlDataAdapter adp = new SqlDataAdapter(cmd);
     DataTable dt = new DataTable();
     adp.Fill(dt);
  }
   con.Close(); 
```

# actionscript - 从 fla 文件打开 as（动作脚本）

> ID：15502526
> 
> 赞同：0
> 
> 时间：2013-03-19T14:41:31.637
> 
> 标签：actionscript, flash-builder, red5, fla

这个问题听起来有点愚蠢，但我想不通！我有一个 fla 文件（[http://red5.googlecode.com/svn/flash/trunk/simpleBroadcaster.fla](http://red5.googlecode.com/svn/flash/trunk/simpleBroadcaster.fla)），我按照教程编辑这个文件（[http://blog.endpoint.com/2012/04/ streaming-live-with-red5-media-server.html](http://blog.endpoint.com/2012/04/streaming-live-with-red5-media-server.html)），我无法开始第 2 步，因为我找不到文件或文件夹。

请帮忙。我下载了 Flash builder 和 Flash Professional CS6 的试用版，但仍然找不到。

[这个](https://stackoverflow.com/questions/1415477/include-as-file-inside-fla)解决方案给出了一些空的东西。所以我教应该有一些 swc 文件（[这篇文章](https://stackoverflow.com/questions/14272484/how-to-find-as-code-in-fla-file)）但我找不到它。

编辑：我找到了 as 文件，它不在 fla 文件中，而是在一个单独的目录中。我不得不下载整个主干。我找到了该文件，可以在文本编辑器中打开和编辑它。但我想在最后编译它在 Flashbuilder 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:28:20.640

```
Step 2.
Let's now open the "red5" directory that we checked out in FlashBuilder. 
```

红5！您需要下载并安装“Red5 Media Server” [http://www.red5.org/](http://www.red5.org/)

```
Exploring Red5 Media Server
Download and install Red5 Media Server for your environment from here. Now it is time to implement a sweeping live stream between our two laptops. 
```

# ios - 如何为手机和平板电脑屏幕投放 DFP 插页式广告

> ID：15502527
> 
> 赞同：0
> 
> 时间：2013-03-19T14:41:32.693
> 
> 标签：ios, admob, banner, google-dfp, interstitial

我正在使用 GoogleAdMobAdsSdkiOS-6.3.0 并希望在通用 iOS 应用程序中提供 DFPInterstitials。

我可以/应该使用单个 AdUnitID 为 iPhone 和 iPad 提供插页式广告吗？

如果是这种情况，我是否正确假设我必须创建一个具有两种广告尺寸（320x480 和 768x1024）的 AdUnit，并为这两种尺寸的每个订单项插页式广告上传？

iOS SDK 会自动加载并显示正确的广告尺寸，还是我必须做一些额外的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:20:00.057

在摆弄 DFP SB 之后，它似乎完全是这样工作的：

您创建一个具有 2 个（或 4 个，横向）尺寸的 AdUnit，上传所有尺寸的广告素材，正确的广告素材将自动显示。

# javascript - 如何使画布上的文本移动动画更流畅（锯齿状运动更少）？

> ID：15502530
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:41:47.177
> 
> 标签：javascript, html, animation, canvas

如何使画布上的文本移动动画更流畅（不那么锯齿状的运动）？

页面完全按照我想要的方式运行，除了文本的运动非常参差不齐。我怎样才能让它以这种速度运行更顺畅？

代码：

```
<style>
               #cvs {
                   position: absolute; 
                   top: 0px;
                   left: 0px;
               }
           </style>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.js'></script>
        <script type="text/javascript">
            var context;
            var text = "";
            var textDirection ="";

            $(function()
            {
                context = document.getElementById("cvs").getContext("2d");            
                setInterval("animate()", 360);

                textDirection ="right";
                textXpos = 5;
                text = "This is my video..";    
            });  

            function animate() {            
                // Clear screen
                context.clearRect(0, 0, 500, 500);
                context.globalAlpha = 1;
            //context.fillStyle = '#fff';
            //  context.fillRect(0, 0, 500, 500);    

                var metrics = context.measureText(text);
                var textWidth = metrics.width;
                if (textDirection == "right") {
                    textXpos += 10;

                    if (textXpos > 500 - textWidth) {
                        textDirection = "left";
                    }
                }
                else {
                    textXpos -= 10;

                    if (textXpos < 10) {
                        textDirection = "right";
                    }                    
                }

                context.font = '20px _sans';
                context.fillStyle = 'white';
                context.textBaseline = 'top';
                context.fillText  ( text, textXpos, 440);    
              }  
              </script>
          </head>
          <body> 
             <div id="page">
        <video id="video" autoplay loop>
          <source id='mp4'
            src="http://media.w3.org/2010/05/sintel/trailer.mp4"
            type='video/mp4'>
          <source id='webm'
            src="http://media.w3.org/2010/05/sintel/trailer.webm"
            type='video/webm'>
          <source id='ogv'
            src="http://media.w3.org/2010/05/sintel/trailer.ogv"
            type='video/ogg'>
          <p>Your user agent does not support the HTML5 Video element.</p>
        </video>
                <canvas id="cvs" width="500" height="500">
                   Your browser does not support the HTML 5 Canvas. 
                </canvas>
             </div>
          </body>
       </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:48:36.307

通过减少动画功能的间隔时间。您当前将其设置为每 360 毫秒调用一次，即每秒少于 3 帧。将其设置在 20 到 40 之间以获得流畅的动画效果。

# vb.net - VB.NET 对动态添加的 ToolStripMenuItem 的事件执行代码

> ID：15502532
> 
> 赞同：0
> 
> 时间：2013-03-19T14:41:50.703
> 
> 标签：vb.net, dynamic, toolstripmenu, toolstripitem

VB.NET
在打开菜单项（即顶级菜单项）时，我已在运行时将 ToolStripMenuItem（即 DropDownItem）添加到菜单项。

我在运行时添加的 ToolStripMenuItems 是当前项目中活动的表单的名称。

每当单击具有特定表单名称的 ToolStripMenuItem 时，都应为该表单提供焦点。

如何为动态添加的 ToolStripMenuItem 事件执行所需的代码？

```
Private Sub WindowToolStripMenuItem_DropDownOpening(sender As Object, e As System.EventArgs) Handles WindowToolStripMenuItem.DropDownOpening
        WindowToolStripMenuItem.DropDown.Items.Clear()

        For Each Form In My.Application.OpenForms
            If Not Form.name = frmLogin.Name And Not Form.name = Me.Name Then
                Dim tmiForm = New ToolStripMenuItem()
                tmiForm.Name = Form.name
                tmiForm.Text = Form.text
                WindowToolStripMenuItem.DropDownItems.Add(tmiForm)
            End If
        Next

    End Sub 
```

我想将焦点放在基于 tmiForm 的点击事件的表单上......
我尝试在网上搜索我只得到 C# 的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:44:39.723

使用[AddHandler](http://msdn.microsoft.com/en-us/library/7taxzxka%28v=vs.110%29.aspx)：

```
AddHandler tmiForm.Click, AddressOf ClickHandler 
```

这里是你如何写你的`ClickHandler`：

```
Public Sub ClickHandler(ByVal sender As Object, ByVal e As EventArgs)
  'for a condition based on a ToolStripMenuItem that fired it
  'If CType(sender, ToolStripMenuItem).Name ...
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:45:29.083

试试这个-

```
Private Sub clickeventhandler(sender As Object, e As EventArgs)
    For Each Form In My.Application.OpenForms
        If CType(sender, ToolStripMenuItem).Name = Form.Name Then
            Form.Focus()
            Exit Sub
        End If
    Next
End Sub 
```

您以前的代码似乎很好，只需添加一行。
后

```
WindowToolStripMenuItem.DropDownItems.Add(tmiForm) 
```

写这个——

```
AddHandler tmiForm.Click, AddressOf clickeventhandler 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T22:30:37.570

我使用了一种更简单的方法。单击菜单栏图标时，窗口右上角会出现一个小箭头。单击箭头打开菜单属性窗口。您可以设置可见属性来控制将在初始菜单上看到的内容。您还可以在代码中设置或清除可见属性：

```
 Public Sub MenuManage(Wayside As Integer, Vehicle As Integer, _
    System As Integer, Tools As Integer, Reports As Integer, _
    Edit As Integer, Zoom As Integer)

    Main.WaysideToolStripMenuItem.Visible = Wayside
    Main.VehicleToolStripMenuItem.Visible = Vehicle
    Main.SystemToolStripMenuItem.Visible = System
    Main.ToolsToolStripMenuItem1.Visible = Tools
    Main.ReportsToolStripMenuItem.Visible = Reports
    Main.EditToolStripMenuItem.Visible = Edit
    Main.ZoomToolStripMenuItem.Visible = Zoom

    End Sub 
```

在 Load 和 FormClosed 事件代码中，控制菜单上显示的内容：

调用 MenuManage（真、真、真、真、真、假、假）

# oracle - Hibernate 列映射和集合延迟加载

> ID：15502533
> 
> 赞同：0
> 
> 时间：2013-03-19T14:41:53.367
> 
> 标签：oracle, hibernate

有一个 Hibernate 3.5.2 应用程序，我希望它能够连接到 Postgres 或 Oracle。这两个模式相似，但在 Oracle 中，表名和列名被切割成最多 30 个字符。类名和类属性名遵循 Postgres 表和列名。在“HibernateUtil.java”中，配置读取 .xml 文件，然后检查连接 url，如果是 Oracle，则发生表和列名映射：

```
Iterator<Table> tableIterator = configuration.getTableMappings(); 
while (tableIterator.hasNext()) { 
    Table table = tableIterator.next(); 
    if (table.getName().length() > 30) {
        table.setName(table.getName().substring(0, 30));
    }

    Iterator<Column> columnIterator = table.getColumnIterator(); 
    while (columnIterator.hasNext()) { 
        Column column = columnIterator.next(); 
        if (column.getName().length() > 30) { 
            column.setName(column.getName().substring(0, 30)); 
        } 
    } 
}
configuration.buildMappings(); 
```

然后会话被打开。

其中存在“table_a”和“table_b”，“table_b”具有引用“table_a”的主键的列。

“TableA.hbm.xml”看起来像：

```
...
<set name="tableB" table="table_b" inverse="true" lazy="true" fetch="select">
    <key>
        <column name="refid_with_long_name_more_than_30_chars" not-null="true" />
    </key>
    <one-to-many class="blabla" />
</set>
... 
```

“TableB.hbm.xml”看起来像：

```
...
<many-to-one name="tableA" class="blabla" fetch="select">
    <column name="refid_with_long_name_more_than_30_chars" not-null="true" />
</many-to-one>
... 
```

一切运行正常，直到发生延迟加载（一个“TableA”实例尝试加载“TableB 集”）。在生成的 sql 查询中，外键与其原始 30+ 字符长度名称一起使用。好像：

选择 refid_with_long_name_more_than_30_chars ...

这会导致“标识符太长”异常。

如果我编辑“TableA.hbm.xml”并将列名“refid_with_long_name_more_than_30_chars”切成 30 个字符，它将起作用（对于 Oracle）。但我不喜欢这样做，我更喜欢在“HibernateUtil.java”中动态地进行。

我还没有找到在哪里配置它。另一方面，我的印象是，一旦我正确地完成了列映射，就应该没有更多的配置（或没有？）

问题是：除了列映射之外，我还需要做些什么，以指示延迟加载使用新的切分列名？

# entity-framework - EF5 和 Code First 的延迟加载问题

> ID：15502535
> 
> 赞同：0
> 
> 时间：2013-03-19T14:42:03.427
> 
> 标签：entity-framework, ef-code-first, lazy-loading, ef-database-first

似乎延迟加载与代码优先的工作方式不同，因为它与 db-first 的工作方式不同：

考虑：

```
public class Project
{
    [Key]
    public long ProjectId { get; set; }

    [Required]
    [MaxLength(60)]
    public virtual string Name { get; set; }
} 
```

和：

```
public class TestCase
{
    [Key]
    public long TestCaseId { get; set; }

    [Required]
    [ForeignKey("ProjectId")]
    public virtual Project Project { get; set; }
    public virtual long ProjectId { get; set; }
} 
```

在这个 DbContext 中：

```
public class TestDbContext : DbContext
{
    public TestDbContext() : base("TestIckle") 
    {
    }

    public DbSet<Project> Projects { get; set; }
    public DbSet<TestCase> TestCases { get; set; }
} 
```

当我在我的代码中尝试这样做时，它不起作用：

```
 Console.WriteLine(_db.Configuration.LazyLoadingEnabled); //prints true
TestDbContext _db = new TestDbContext();
var testcase = _db.TestCases.Create();
testcase.Project = _db.Projects.Find(7);

//the following line outputs 0 with Code-First
//the following line outputs 7 with DB-First
Console.WriteLine(testcase.ProjectId); 
```

代码优先模型的能力是否不如 db 优先模型？我会为它分配 nav 属性和 pkey 似乎很奇怪，这让我觉得我的配置有误。

以下应该工作吗？

```
var x = _db.TestCases.Create();
x.ProjectId = 7;
Console.WriteLine(x.Project.Name); //this never seems to work 
```

会很好，因为 x 也知道它附加了哪个上下文，我原以为它可以处理这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:25:41.400

在最后两个示例中，Entity Framework 没有加载这些实体，因为您尚未将这些关系提交到数据库。当您分配导航属性时，它不会自动填充 FK ID，也不会在您设置 ID 时填充导航属性。

但是，Entity Framework 足够聪明，知道当您分配给其中任何一个属性（即 ID 或导航属性）时，它将在未来为这两个属性填充正确的值。但是在您进行任何实际提交之前，它不会知道自动填充该值。他们也不应该，如果你想一想：如果页面上有一个下拉菜单映射到这些属性之一会发生什么？每次用户单击它时，都必须进行数据库调用才能正确保留映射。这可能会转化为更慢、更易破坏的应用程序。

# struts2 - 如何在表单提交中使用struts2网格

> ID：15502538
> 
> 赞同：0
> 
> 时间：2013-03-19T14:42:09.043
> 
> 标签：struts2, struts2-jquery, struts2-jquery-grid

我已经在 Stackoverflow 上搜索过，但没有运气；

我想制作一个用户输入数据的过滤器表单，并根据该数据，我想在 Struts2 jQGrid 中显示结果。

默认情况下，当页面加载时，Struts2 jQGrid 已经有包含所有数据的操作 url。

我尝试设置 form 和 的目标`<sj:a>`，但它没有用。

见代码：

这是我的网格：

```
 <sjg:grid gridModel="items"
                            href="%{itemsUrl}"
                            caption="Items"
                            id="filterGrid"
                            dataType="json"
                            rownumbers="true"
                            pager="true"
                            navigator="false"
                            rowList="10, 15, 20"
                            rowNum="10"
                            viewrecords="true"
                            loadonce="true"
                            formIds="filterForm"

                            >
    <sjg:gridColumn name="item.itemname" title="Item Name"></sjg:gridColumn>
    <sjg:gridColumn name="shelves.shelfname" title="Shelf Name"></sjg:gridColumn>
    <sjg:gridColumn name="quantity" title="Available Qauntity"></sjg:gridColumn>
    <sjg:gridColumn name="item.itemprice" title="Item Price"></sjg:gridColumn>
</sjg:grid> 
```

我的表格：

```
<s:form id="filterForm" action="%{filterUrl}">
    <table style="width:100%">
        <tr>
            <td colspan="4">
                <s:textfield key="global.item.list.name" name="nameContains" />
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <s:textfield key="global.item.list.pricefrom" name="priceFrom" />
            </td>
            <td colspan="2">
                <s:textfield key="global.item.list.priceto" name="priceTo" />
            </td>
        </tr>
        <tr>
            <td colspan="4">
                <s:select cssStyle="width: 100%" id="SelectCategoryList"
                    multiple="true" list="categoryList" listKey="categoryId" listValue="categoryType"
                    headerKey="-1" headerValue="Select Type" key="global.add.item.type"
                    loadingText="Item Types Loading..." />
            </td>
        </tr>
        <tr>
            <td colspan="4">
                <div id="fields"></div>
            </td>
        </tr>
        <tr>
            <td colspan="4">
                <sj:a targets="filterGrid" button="true"
                    key="global.item.list.form.submit" onClickTopics="reloadMyGrid" />
        </tr>
    </table>
</s:form> 
```

和 ajax reloadTopics 函数：

```
$.subscribe("reloadMyGrid", function() {
        //alert("df")
        $("#filterForm").submit();
        $("#filterGrid").trigger("reloadGrid");
        return false;
        }); 
```

实际上我在另一个stackoverflow问题（[here](https://stackoverflow.com/questions/9915211/how-to-load-json-result-on-grid-after-struts2-form-submission?rq=1)）中看到了这种风格，我不知道在上面的函数中写什么。

谢谢你

**编辑#1**

* * *

我已将代码修改为：

```
<sj:a targets="filterGrid" 
      button="true" 
      key="global.item.list.form.submit" 
      formIds="filterForm" 
      onSuccess‌​Topics="reloadGrid" /> 

<sjg:grid gridModel="items" 
          href="%{itemsUrl}" 
          caption="Items" 
          id="filterGrid" 
          dataType="j‌​son" 
          rownumbers="true" 
          pager="true" 
          navigator="false" 
          rowList‌​="10, 15, 20" 
          rowNum="10" 
          viewrecords="true"> 
```

表单被提交，json数据也收到，但网格没有显示任何东西，即使重新加载

**编辑#2**

修改后我的完整代码是：

```
<s:url id="filterUrl" action="ListItemFilter" />
                <s:form id="filterForm" action="%{filterUrl}">
                    <table style="width:100%">
                        <tr> 
                            <td colspan="4">
                                <s:textfield key="global.item.list.name" name="nameContains" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2"> <s:textfield key="global.item.list.pricefrom" name="priceFrom" /> </td>
                            <td colspan="2"> <s:textfield key="global.item.list.priceto" name="priceTo" /> </td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <s:select
                                    cssStyle="width: 100%"

                                    id="SelectCategoryList"
                                    multiple="true"
                                    list = "categoryList" 
                                    listKey = "categoryId" 
                                    listValue = "categoryType" 
                                    headerKey="-1"
                                    headerValue="Select Type"
                                    key = "global.add.item.type" 
                                    loadingText="Item Types Loading..."
                                />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4"> 
                                <div id="fields"></div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4"> <sj:a targets="filterGrid" 
                            button="true" 
                            key="global.item.list.form.submit"
                            formIds="filterForm"
                            onSuccessTopics="reloadGrid"
                             />
                        </tr>
                    </table>
                </s:form>

<s:url id="itemsUrl" action="ListItems" />      
        <div  class="gridSection">
        <sjg:grid gridModel="items"
                        href="%{itemsUrl}"
                        caption="Items"
                        id="filterGrid"
                        dataType="json"
                        rownumbers="true"
                        pager="true"
                        navigator="false"
                        rowList="10, 15, 20"
                        rowNum="10"
                        viewrecords="true"                      
                        >
                <sjg:gridColumn name="item.itemname" title="Item Name"></sjg:gridColumn>
                <sjg:gridColumn name="shelves.shelfname" title="Shelf Name"></sjg:gridColumn>
                <sjg:gridColumn name="quantity" title="Available Qauntity"></sjg:gridColumn>
                <sjg:gridColumn name="item.itemprice" title="Item Price"></sjg:gridColumn>
             </sjg:grid>
        </div> 
```

struts.xml：

```
<action name="ListItems" class="com.acty.libsys.actions.ListItemsAction">
<result name="success" type="json"></result>
</action>
<action name="ListItemFilter" class="com.acty.libsys.actions.ListItemsAction" method="filter">
    <result name="success" type="json"></result>
</action> 
```

和行动：

```
public class ListItemsAction extends ActionSupport {
    private static final long serialVersionUID = 1L;

    private List<ItemCategory> categoryList;

    public List<ItemCategory> getCategoryList() {
        return categoryList;
    }

    public void setCategoryList(List<ItemCategory> categoryList) {
        this.categoryList = categoryList;
    }

    public String execute() {
        serviceProvider.openConnection();
        /*This will be available to select box of ListItem.jsp*/
        categoryList = serviceProvider.getItemCategoryMapper().selectByExample(null);
        items = serviceProvider.getShelfItemsMapper().selectItemsFromShelf();System.out.println("fidddds "+items);
        serviceProvider.closeConnection();
        return SUCCESS;
    }

    public String filter() {
        ShelfItemsExample example = new ShelfItemsExample();

        if(!("".equals(nameContains)))
            example.createCriteria().andItemnameIsLike(nameContains);
        if(priceFrom != null && priceTo != null)
            example.createCriteria().andItemPriceBetween(priceFrom, priceTo);

        System.out.println("nameContains "+nameContains + " priceFrom " + priceFrom);
        if(itemCategoryFields != null && !(itemCategoryFields.isEmpty())) {
            List<String> fieldIds = new ArrayList<String>();
            List<String> fieldValues = new ArrayList<String>();

            for(Map.Entry<String, String> entry: itemCategoryFields.entrySet()){
                fieldIds.add(entry.getKey());
                fieldValues.add(entry.getValue());
            }
            example.createCriteria().andFieldIdIn(fieldIds);

            example.setCondition(fieldValues);
        }       

        serviceProvider.openConnection();
        items = serviceProvider.getShelfItemsMapper().selectFiltered(example);
        System.out.println("fids "+items);
        serviceProvider.closeConnection();
        return SUCCESS;
    }

    public void setItems(List<ShelfItems> items) {
        this.items = items;
    }

    /* Used when filter button clicked*/
    private String nameContains;
    private BigDecimal priceFrom;
    private BigDecimal priceTo;

    private Map<String, String> itemCategoryFields;

    public String getNameContains() {
        return nameContains;
    }

    public void setNameContains(String nameContains) {
        this.nameContains = nameContains;
    }

    public BigDecimal getPriceFrom() {
        return priceFrom;
    }

    public void setPriceFrom(BigDecimal priceFrom) {
        this.priceFrom = priceFrom;
    }

    public BigDecimal getPriceTo() {
        return priceTo;
    }

    public void setPriceTo(BigDecimal priceTo) {
        this.priceTo = priceTo;
    }

    public Map<String, String> getItemCategoryFields() {
        return itemCategoryFields;
    }

    public void setItemCategoryFields(Map<String, String> itemCategoryFields) {
        this.itemCategoryFields = itemCategoryFields;
    }

    /* used when first the form loads*/
    private List<ShelfItems> items;

    public List<ShelfItems> getItems() {
        return items;
    }

    private DataServiceProviderInterface serviceProvider;

    public DataServiceProviderInterface getServiceProvider() {
        return serviceProvider;
    }

    public void setServiceProvider(DataServiceProviderInterface serviceProvider) {
        this.serviceProvider = serviceProvider;
    }
} 
```

我也写了

```
$.subscribe("reloadGrid", function(){
   $("filterGrid").trigger("reloadGrid");alert("DF");
}); 
```

现在我无法理解什么问题......请为我提供解决方案..plz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:38:02.757

您必须使用过滤器来过滤您的列，并根据您的过滤器，您的网格将填充数据。

**尝试这样的事情**

```
<sjg:grid gridModel="items"
                            href="%{itemsUrl}"
                            caption="Items"
                            id="filterGrid"
                            dataType="json"
                            rownumbers="true"
                            pager="true"
                            navigator="false"
                            rowList="10, 15, 20"
                            rowNum="10"
                            viewrecords="true"
                            loadonce="true"
                            formIds="filterForm"

                            filter="true"
                            filterOptions="{stringResult :true,
                            searchOnEnter : true,
                            enableClear : true}"

                            >
    <sjg:gridColumn name="item.itemname" title="Item Name"></sjg:gridColumn>
    <sjg:gridColumn name="shelves.shelfname" title="Shelf Name"></sjg:gridColumn>
    <sjg:gridColumn name="quantity" title="Available Qauntity"></sjg:gridColumn>
    <sjg:gridColumn name="item.itemprice" title="Item Price"></sjg:gridColumn>
</sjg:grid> 
```

然后在每一列上应用过滤器，这将非常方便地过滤您的网格

# c++ - 将 C++ 字符串转换为 char 数组

> ID：15502541
> 
> 赞同：1
> 
> 时间：2013-03-19T14:42:17.770
> 
> 标签：c++, string

我想将 a 转换`string`为 a`char array`以便可以将其传递给需要传递给它的函数`const char nameToAssignToChannel[]`。这是我尝试过的东西：

```
string example;

example = "examplestring";

char *converted = new char [example.length()+1];

strcpy(converted, example.c_str()); 
```

在我所有的尝试中，我似乎`char array`总是以空虚而告终，尽管我似乎在遵循我找到的许多示例。我不一定需要使用`string`，我只需要一种能够将变量传递给函数的方法，因为它可能并不总是相同的。

谢谢

# java - 在 Java 中使用自己的随机数进行 TLS 握手

> ID：15502544
> 
> 赞同：1
> 
> 时间：2013-03-19T14:42:19.310
> 
> 标签：java, ssl, smartcard, handshake

我有一个硬件，它实现了一些加密功能，如随机数生成（例如智能卡）。我想在我的 TLS hadshake 期间使用这个硬件。是否可以做到这一点，而无需我自己实施 TLS 握手？

我试图扩展类“SecureRandom”，但“下一个”方法是最终的，所以我不能覆盖它，以便它返回“我的”生成的数字。

所以基本上我想“外包”所有加密功能而不在 JAVA 中实现 TLS 握手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:48:26.443

[`SecureRandomSpi`](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandomSpi.html)改为扩展。然后要么实现 a`Provider`要么做一个便宜`SecureRandom`的 as

```
 public MySecureRandom() 
    throws NoSuchAlgorithmException, NoSuchProviderException {
      super(new MySecureRandom(),null);
  } 
```

（的实现`next`依赖于给定的 SPI）

然后将你的`SecureRandom`作为参数传递给[`SSLContext.init`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLContext.html).

# java - 如何增加 JList 的大小

> ID：15502546
> 
> 赞同：0
> 
> 时间：2013-03-19T14:42:25.957
> 
> 标签：java, swing, jlist

在 NetBeans 中，行高只能是一行。我想垂直增加 JList 的大小。在 JList 中，行的高度应至少为 3 行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T14:44:01.320

只需使用方法[`setVisibleRowCount(int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setVisibleRowCount%28int%29)

```
JList list = new JList();
list.setVisibleRowCount(3); 
```

要增加列表中所有“单元格”的高度，您可以：

*   增加列表的字体大小：`list.setFont(list.getFont().deriveFont(22.0f));`
*   强制所有单元格的高度`list.setFixedCellHeight(44);`
*   更改`ListCellRenderer`以返回您想要的任何内容，并可能更改渲染器的首选大小，这对于列表的每个值都可能不同：`list.setCellRenderer`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:12:45.323

如果您正在谈论每个单独的行能够显示多行，那么您可以使用自定义渲染器来显示多行数据。有关详细信息，请参阅[编写自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer)。

或者另一种方法是使用 HTML 字符串向模型添加数据。例如：

```
String rowOne = "<html>1<br>2<br>3<br></html>"; 
```

现在该行的数据将显示在 3 行上。

# jquery - 使用溢出检测可见性：隐藏

> ID：15502547
> 
> 赞同：1
> 
> 时间：2013-03-19T14:42:30.010
> 
> 标签：jquery, css

由于溢出，我隐藏了一堆元素：隐藏在父元素上。我制作了一个 jQuery 函数，它添加到边距以使一组新元素在用户单击时可见。但是，我需要一种方法来检测最后一个元素何时可见，以便在到达终点后停止此功能的工作。

我使用的功能是这样的：

```
$(this).children('.Product').last().is(':visible') 
```

我也试过：

```
$(this).children('.Product:last-child').is(':visible') 
```

即使最后一个 .Product 元素在屏幕上可见，两者都返回 false。

这应该工作吗？有没有更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:50:56.420

`:visible`规范说'如果元素占用了文档中的空间，则它们被认为是可见的。可见元素的宽度或高度大于零。[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)我想它不会检查元素是否在视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:54:47.943

如前所述，`:visible`如果它们的元素具有可见性，则返回 true，即它们不可见，`display: none`或者它们仍在影响 dom 的元素流。

您所追求的是他们是否在当前用户视口中：

[请参阅此插件：jQuery 的视口选择器](http://www.appelsiini.net/projects/viewport)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:45:37.587

你有没有尝试过：

```
$(this).children('.Product:last').is(':visible'); 
```

如果这不起作用，请尝试粘贴 html 代码或创建小提琴，以便我们更好地帮助您。

# css - CSS 相邻选择器

> ID：15502549
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:42:35.350
> 
> 标签：css, css-selectors

好的，这是我的 div 结构

```
<div id="ad"></div>
<div id="campaign"></div> 
```

我希望 CSS 基本上在“广告”div 出现背靠背到广告系列 DIV 时为其设置样式。我知道#ad+#campaign 只会针对“campaign”div。有没有办法编写它，以便我可以在广告 div 出现在该结构的页面中时定位它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:43:34.043

不，CSS 目前缺少任何基于其后出现的任何内容来选择元素的功能。

[选择器级别 4 介绍！](http://dev.w3.org/csswg/selectors4/#subject)我认为这将使您能够：

```
!#ad + #campaign {} 
```

......但它目前已经超过了支持的前沿。

# r - 起重机检查的在线工具

> ID：15502553
> 
> 赞同：16
> 
> 时间：2013-03-19T14:42:40.637
> 
> 标签：r, cran

即使我害怕有点跑题，但我不知道还有什么地方可以问这个，对不起！

我正在使用 Linux 系统开发我的 R 包，因此我可以`R CMD check --as-cran`轻松地为 Linux 运行该命令。对于 Windows，也可以使用同事的计算机。

但是你如何检查你的 MacOS 包呢？或者更糟糕的是，如何检查 Solaris？我只是问一下，因为我从 CRAN 检查中得到了一个错误，而且如果没有一些尝试+错误，我很可能无法修复它。但是一遍又一遍地上传新包直到MacOS的错误被修复不能成为解决方案......

因此我的问题是，是否有类似于[win-builder](http://win-builder.r-project.org/)的在线工具（例如“win-check.r-project.org”和“macos-check.r-project.org”等），您可以在其中检查您的在提交给 cran 之前，为所有可能的平台打包？不幸的是，我不认识任何拥有 Mac 的人，Apple 也没有让在 x86 计算机上安装他们的操作系统变得容易（我找到了 Hackintosh 项目，但它似乎有点阴暗......）。拥有这样的工具将使解决软件包中的某些问题变得更加容易。

感谢您阅读本文！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-14T09:54:35.443

现在有 R-Hub（[github 页面](https://github.com/r-hub/rhub)）。R-Consortium 使之成为可能。

> r-hub 是 R 包的多平台构建和检查服务。该软件包使用 r-hub API 连接到 r-hub 并开始对各种架构进行软件包检查。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T20:48:42.867

没有。目前没有可用于 R 的公开可用的跨平台检查器（R-forge 可能例外，它往往有点不可靠）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-05T02:01:48.333

是的，macOS 构建器项目可用于在 macOS 平台上运行包检查（请参阅[https://mac.r-project.org/macbuilder/submit.html](https://mac.r-project.org/macbuilder/submit.html)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-07T18:58:00.063

猜猜派对有点晚了 - 不过[https://builder.r-hub.io/](https://builder.r-hub.io/)可能是去的地方！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-17T07:54:17.387

如上所述，现在有 R-hub。特别是看到它的[R 客户端，`rhub`包](https://r-hub.github.io/rhub/)。

有一部分[关于 CRAN 提交的“入门”小插曲](https://r-hub.github.io/rhub/articles/rhub.html#prepare-a-cran-submission)和[关于同一主题的截屏视频](https://vimeo.com/329059890)。

免责声明：我为 R-hub 文档做出贡献。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-11T00:02:46.950

您可以使用 Travis 和 Appveyor。

两者都与 GitHub 一起工作得非常好。以我的 R 包为例[https://github.com/SteffenMoritz/imputeTS](https://github.com/SteffenMoritz/imputeTS)

每当我在那里更新一些东西时，Travis 都会构建一个 Linux 版本，而 Appveyor 会构建一个 Windows 版本。

看：

**Travis-CI** [https://travis-ci.org/SteffenMoritz/imputeTS](https://travis-ci.org/SteffenMoritz/imputeTS)

和

**Appveyor** [https://ci.appveyor.com/project/steffenmoritz/imputeTS](https://ci.appveyor.com/project/steffenmoritz/imputeTS)

对于开源项目，两种构建的服务都是免费的。你可以在 github 上看到很多使用这两个服务的 R 包。（例如[https://github.com/robjhyndman/forecast](https://github.com/robjhyndman/forecast)）

对于 Mac，我不知道构建服务。

# python - 天超出了月份 python 的范围

> ID：15502558
> 
> 赞同：1
> 
> 时间：2013-03-19T14:43:03.820
> 
> 标签：python, pandas

'reobsmaf' 是一个 DataFrame，如下所示：

```
In [152]: reobsmaf[:5]
Out[152]: 
          yy  mm  dd  count      mean    median       min       max       std
2001-01  2001   1  15     76       NaN       NaN       NaN       NaN       NaN
2001-02  2001   2  15    672  5.410384  5.388889  4.111111  6.611111  0.484927
2001-03  2001   3  15    744  3.956317  3.666667  2.888889  5.555556  0.612632
2001-04  2001   4  15    720  3.685185  3.666667  3.333333  3.833333  0.118767
2001-05  2001   5  15    744  3.846550  3.833333  3.666667  4.444444  0.175195 
```

'remodmaf' 是另一个 DataFrame，如下所示：

```
In [153]: remodmaf[:5]
Out[153]: 
          yy  mm  dd  count      mean    median       min       max       std
2001-01  2001   1  15     75       NaN       NaN       NaN       NaN       NaN
2001-02  2001   2  15    673       NaN       NaN       NaN       NaN       NaN
2001-03  2001   3  15    745  4.508178  4.601572  3.117909  6.313059  0.925472
2001-04  2001   4  15    721  5.402154  5.510775  4.015624  5.923597  0.469602
2001-05  2001   5  15    745  5.352246  5.311082  5.104457  5.892380  0.186441 
```

现在我想比较这两个DataFrame，如果reobsmaf中哪个记录的'mean'值等于'nan'，remodmaf中记录的'mean'值等于'nan'。如下：

```
 for i in range(len(reobsmaf)):
          if str(reobsmaf['mean'][i])=='nan'
             remodmaf['mean'][i]= 'nan' 
```

它引发了一个例外：

```
DateParseError: day is out of range for month 
```

我知道这是一个特定的问题，但我真的不知道问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:10:04.033

如果正确阅读您的问题，您想在一帧中分配 NaN，而另一帧是 Nan？

```
In [4]: df = pd.DataFrame(np.random.randn(8,3),columns=['A','B','C'])
In [9]: df2 = df.copy()

In [10]: df2.ix[0:3,['B','C']] = np.nan

In [11]: df2
Out[11]: 
          A         B         C
0  0.404500       NaN       NaN
1  1.391802       NaN       NaN
2 -0.365778       NaN       NaN
3  0.693149       NaN       NaN
4  0.233268  0.332789 -0.130531
5 -0.531822  1.161906  0.210007
6 -0.507082 -2.050773 -1.258930
7  0.521823 -0.331544 -0.926364

In [12]: df
Out[12]: 
          A         B         C
0  0.404500 -0.222471  0.864739
1  1.391802 -0.503080  0.307754
2 -0.365778  0.530288 -0.743119
3  0.693149 -0.749732 -1.135363
4  0.233268  0.332789 -0.130531
5 -0.531822  1.161906  0.210007
6 -0.507082 -2.050773 -1.258930
7  0.521823 -0.331544 -0.926364 
```

这是一个 where 操作。其中 df2 为 nan，将 df 设置为 nan

```
In [14]: df[pd.isnull(df2)] = np.nan

In [15]: df
Out[15]: 
          A         B         C
0  0.404500       NaN       NaN
1  1.391802       NaN       NaN
2 -0.365778       NaN       NaN
3  0.693149       NaN       NaN
4  0.233268  0.332789 -0.130531
5 -0.531822  1.161906  0.210007
6 -0.507082 -2.050773 -1.258930
7  0.521823 -0.331544 -0.926364 
```

# php - PHP将“调用非对象上的成员函数”变成异常

> ID：15502559
> 
> 赞同：14
> 
> 时间：2013-03-19T14:43:04.523
> 
> 标签：php, error-handling

当我运行“Behat”步骤时，[Behat 错误处理程序](https://github.com/Behat/Behat/blob/develop/src/Behat/Behat/Definition/Annotation/Definition.php#L119)会将“尝试获取非对象的属性”错误转换为异常。

这非常有用，因为它会导致步骤被标记为失败，并允许测试运行在下一个场景中继续。

但是，“调用非对象上的成员函数”错误是致命的，并立即停止测试执行（包括中止将结果写入 xml）。这是无益的。

我的问题是：

1.  这两个错误有什么区别？它们是不同的“错误级别”吗？这是在哪里记录的？我搜索了 PHP 站点和谷歌，找不到规范的参考，只有很多关于调试每个错误的特定实例的问题。

2.  有没有办法将后一个错误转换为异常，而不是完全停止脚本？在我看来，`null`用“ ”取消引用“ `->`”不会是“无法恢复的错误，例如内存分配问题”。

**更新：**

看起来这只是 PHP 的一个已知问题。看：

*   [#51882](https://bugs.php.net/bug.php?id=51882)调用非对象上的成员函数应引发异常
*   [#46601](https://bugs.php.net/bug.php?id=46601) E_RECOVERABLE_ERROR 用于“调用非对象上的成员函数”
*   [#51848](https://bugs.php.net/bug.php?id=51848)非对象方法调用错误应该可以用 set_error_handler() 捕获
*   [#63538](https://bugs.php.net/bug.php?id=63538) “调用未定义的函数”应该是可捕获的

有人说这是“设计使然”，但我认为这只是在将对象添加到 PHP 之前定义的错误级别的产物。在非 OO 语言中，调用不存在的函数是一个严重错误，我可以看到它可能被描述为“致命”或“不可恢复”（尽管在可以定义函数的非 OO 语言中） ——苍蝇，即使这似乎过于悲观）。现在，既然您可以`$a->f()`在任何 old 上执行 "" `$a`，那么 "" 可能不存在的可能性要大得多`f`，而且它似乎不应该是一个致命错误（参见 Java，这将是一个 NullPointerException）。

我想这让我想到了一个新问题：

_ 3\. 您如何修补 PHP 以使“调用非对象上的成员函数”错误成为非致命错误，同时又不会严重破坏向后兼容性，以及您可以采取哪些步骤来最大限度地提高该修补程序被 PHP 接受的可能性?

**更新 2**重新修补 PHP：

[PHP 内部邮件列表](http://marc.info/?l=php-internals&m=136379033718283&w=2)对进行此修复有一些有限的支持。现在我只需要编写一个补丁来解决这个问题并创建一个 RFC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:15:57.053

问题是您可以动态声明对象的属性，但不能动态声明方法。因此，如果您尝试在非对象上调用方法，则会收到致命错误，因为 PHP 无法确定该函数是否存在。

检查[此键盘](http://codepad.org/i43mBPdz)以获取带有错误编号的一些简单输出。

现在仔细看看关于“设置和访问未设置属性”的部分。你可以看到 PHP 给你一个消息说“从空值创建默认对象”。因此，如果一个类不存在，PHP 将为您创建它。使用类型转换时也会发生同样的情况，请参阅[对象类型转换](http://www.php.net/manual/en/language.types.object.php#language.types.object.casting)

因此，您可以访问非对象的属性，因为它将在动态创建的默认对象中检查该属性。但是如果你访问一个方法，那个默认对象仍然没有那个方法。

这就是为什么属性返回 8 级错误而方法返回 1 级错误的原因（请参阅[错误级别](http://php.net/manual/en/errorfunc.constants.php)）。并且由于它返回 1 级致命错误，因此您无法在此过程之后继续。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-31T21:35:17.417

这已在 PHP 7 中修复：

*   [http://php.net/manual/en/language.errors.php7.php](http://php.net/manual/en/language.errors.php7.php)
*   [https://wiki.php.net/rfc/engine_exceptions](https://wiki.php.net/rfc/engine_exceptions)

在 PHP 7+ 中，此代码现在将抛出，而不是导致不可恢复的致命错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:59:25.550

我有一些好消息要告诉您：有一个名为[Error Exceptions](https://github.com/ircmaxell/ErrorExceptions)的 PHP 库可以将所有 PHP 错误转换为可捕获的异常。

这是对工作方式的一个相当大的改变，但显然你不是唯一一个想要这样做的人。

该库由 Anthony Ferrara 编写，他是 PHP 的核心开发人员之一，因此您可以相当肯定他知道他在做什么，但如果您想自己动手，它可以使用[`set_error_handler()`函数](http://php.net/manual/en/function.set-error-handler.php)插入到 PHP 中；如果你想捕获 PHP 的错误，你就是这样做的。

希望有帮助。

# visual-studio-2010 - SSIS 包在 VS 2010 中不可见

> ID：15502567
> 
> 赞同：7
> 
> 时间：2013-03-19T14:43:24.710
> 
> 标签：visual-studio-2010, ssis

我们使用 VS 2010 (BIDS)、SQL 2012 和 TFS。我们有一个包含两个项目的解决方案。一个用于 ETL，另一个用于报告。ETL 项目最近提示我在 .dtproj 项目文件的服务器上保存/合并不同版本。我假设版本号是否大于我想要的文件。它促使我对当前解决方案中的另一个项目做同样的事情。见附件。我没有这样做，因为它上次搞砸了我的环境！我确信这 100% 是我对 TFS 缺乏了解。话虽如此，我不知道该读什么/研究什么来教育自己不要再搞砸了。

当我单击“获取服务器版本”链接时，它会提示我一个对话框，其中包含以下内容：

“文件 project.dtproj 已在源代码编辑器之外进行了修改......”

你是否想要：

```
Save AS 
Save 
Cancel 
Ignore 
```

我点击了“另存为”。然后，当我意识到我最终会得到两个 DTproj 文件，一个与解决方案相关联，一个与解决方案无关时，我点击了取消。

这是一切都出错的时候。

在我点击取消并在 VS2010 中重新加载项目后，我的包在 VS 2012 的 SSIS 包文件夹中不可见。它们在 TFS 中（我在源代码管理器中看到它们）。它们在 FS 上（我在 Windows 资源管理器中看到它们）。

然而，我所做的一切似乎都无法让他们重新参与到项目中。

如果我尝试添加现有包并在文件系统上浏览到它，我会在项目中获得该文件，但它显示为文件的副本。我在文件系统上看到了新文件和原始文件，项目中出现的新文件名为“Project (1).dtsx”

如何让我的项目恢复正常？

谢谢你的帮助！

肖恩

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-19T15:46:45.317

.dtproj 文件只是 XML 指定哪些文件构成项目。每个版本的格式都略有不同，但并不是特别复杂。

通常，我发现在开发人员之间“破坏”项目文件的是在组合中添加一个新包。看起来很简单，但无论出于何种原因，diff 实用程序在添加包时无法协调差异。如果我知道会有多个开发人员在开发 SSIS 解决方案，我发现最好先尝试创建一个占位符包，这样我们就不会让开发人员 A 将 MyFabulousPackage 添加到项目文件中，而开发人员 B 同时添加了 OutrageouslyGoodPackage时间。相反，每个人都有相同的项目文件，然后他们的工作就是修复他们关注领域的内容。

示例 .dtproj

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <DeploymentModel>Project</DeploymentModel>
  <ProductVersion>11.0.2100.60</ProductVersion>
  <SchemaVersion>9.0.1.0</SchemaVersion>
  <State>$base64$P...g==</State>
  <Database>
    <Name>SSISFoo.database</Name>
    <FullPath>SSISFoo.database</FullPath>
  </Database>
  <DataSources />
  <DataSourceViews />
  <DeploymentModelSpecificContent>
    <Manifest>
      <SSIS:Project SSIS:ProtectionLevel="DontSaveSensitive" xmlns:SSIS="www.microsoft.com/SqlServer/SSIS">
        <SSIS:Properties>
          <SSIS:Property SSIS:Name="ID">{83ded95e-49f0-4781-ab8f-7f8954d6423a}</SSIS:Property>
          <SSIS:Property SSIS:Name="Name">SSISFoo</SSIS:Property>
          <SSIS:Property SSIS:Name="VersionMajor">0</SSIS:Property>
          <SSIS:Property SSIS:Name="VersionMinor">0</SSIS:Property>
          <SSIS:Property SSIS:Name="VersionBuild">0</SSIS:Property>
          <SSIS:Property SSIS:Name="VersionComments">
          </SSIS:Property>
          <SSIS:Property SSIS:Name="CreationDate">2013-03-19T10:24:18.8594643-05:00</SSIS:Property>
          <SSIS:Property SSIS:Name="CreatorName">home\bfellows</SSIS:Property>
          <SSIS:Property SSIS:Name="CreatorComputerName">Thangorodrim</SSIS:Property>
          <SSIS:Property SSIS:Name="Description">
          </SSIS:Property>
          <SSIS:Property SSIS:Name="FormatVersion">1</SSIS:Property>
        </SSIS:Properties>
        <SSIS:Packages>
          <SSIS:Package SSIS:Name="Package.dtsx" SSIS:EntryPoint="1" />
        </SSIS:Packages>
        <SSIS:ConnectionManagers />
        <SSIS:DeploymentInfo>
          <SSIS:ProjectConnectionParameters />
          <SSIS:PackageInfo>
            <SSIS:PackageMetaData SSIS:Name="Package.dtsx">
              <SSIS:Properties>
                <SSIS:Property SSIS:Name="ID">{3BEEFDD8-FB86-4804-9049-EB28C4BD69DD}</SSIS:Property>
                <SSIS:Property SSIS:Name="Name">Package</SSIS:Property>
                <SSIS:Property SSIS:Name="VersionMajor">1</SSIS:Property>
                <SSIS:Property SSIS:Name="VersionMinor">0</SSIS:Property>
                <SSIS:Property SSIS:Name="VersionBuild">1</SSIS:Property>
                <SSIS:Property SSIS:Name="VersionComments">
                </SSIS:Property>
                <SSIS:Property SSIS:Name="VersionGUID">{3087F645-C4C4-4773-8040-E2DAFFE8B922}</SSIS:Property>
                <SSIS:Property SSIS:Name="PackageFormatVersion">6</SSIS:Property>
                <SSIS:Property SSIS:Name="Description">
                </SSIS:Property>
                <SSIS:Property SSIS:Name="ProtectionLevel">0</SSIS:Property>
              </SSIS:Properties>
              <SSIS:Parameters />
            </SSIS:PackageMetaData>
          </SSIS:PackageInfo>
        </SSIS:DeploymentInfo>
      </SSIS:Project>
    </Manifest>
  </DeploymentModelSpecificContent>
  <Miscellaneous />
  <Configurations>
    <Configuration>
      <Name>Development</Name>
      <Options>
        <OutputPath>bin</OutputPath>
        <ConnectionMappings />
        <ConnectionProviderMappings />
        <ConnectionSecurityMappings />
        <DatabaseStorageLocations />
        <ParameterConfigurationValues />
      </Options>
    </Configuration>
  </Configurations>
</Project> 
```

## 你正在经历什么

您在使用“Package (1).dtsx”时遇到的问题是将现有包添加到项目中令人讨厌且违反直觉。当您单击添加现有包并在项目文件夹中选择 Package.dtsx

![添加现有包](../Images/3393782aff8eb109ca8dcd92c9707c0b.png)

1.  Visual Studio/BIDS/SSDT 将尝试将该包复制到本地文件夹中
2.  该文件已经存在，而不是破坏它，它将保存它并`(number)`添加到其中

这是有道理的，因为允许您选择包的窗口允许包位于包存储或 SQL Server 中。如果您注意到“添加现有软件包的*副本*”的标题栏，那就更是如此（说实话，直到今天我才注意到复制这个词，那是在使用该产品 8 年后）

![在此处输入图像描述](../Images/0703cfa6b468eebd51cd8524d7742172.png)

## 你做什么工作？

不要“添加现有包”。相反，右键单击项目和“添加，现有项目”，这将恰好是您现有的 SSIS 包。

![添加，现有项目](../Images/bdeafe46c3cdfa129f8d7b3899e25bc7.png)

# c++ - C++ 检查结构是否为 NULL 或未设置，即使它的 has 运算符相等

> ID：15502578
> 
> 赞同：0
> 
> 时间：2013-03-19T14:43:55.823
> 
> 标签：c++, struct, null

我有一个包含许多成员的结构，还有一个 == 的运算符重载，如下所示：

```
struct Adjustment {
    ObjectNumber aD;     
    Foo        afoo;  

    bool operator == (const Adjustment& aAdjustment) const
      { return (aAdjustment.ID == ID); }

  }; 
```

在代码中我有：

```
if(someAdjustment == NULL) 
```

它给了我：

```
error C2678: binary '==' : no operator found which takes a left-hand operand of type 'Unit::Adjustment' (or there is no acceptable conversion) 
```

所以我的问题是，如何在不更改其代码的情况下检查此结构是否已设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:51:35.320

在 C++ 中，由 表示的“引用”`&`意味着方法的调用者有义务为您提供对象实例。没有（正常）方法可以在没有对象的情况下调用您的方法。您可以自由假设，如果您的函数被调用，aAdjustement 将被设置为某个值。

但是，这里有两个哥达：

(1) 它将被设置为某事，但那个“某事”有意义吗？调整结构是否完全归零是您功能的有效值？如果不是 - 那么您可以测试它而不是测试无效性。如果任何结构值组合无效 - 将其用作鉴别器。如果所有可能的值都是有效的——那么就没有什么需要检查的了。

(2) 如果你知道黑暗的方式 (tm)，你实际上可以传递一个空引用到这个函数。所以你的代码不是因为“你使用了引用&”而“不受空值影响”。但是，正如我所说，使用 & 你清楚地声明你不允许空值。一个知道黑暗方式（tm）的调用者可能只会在你的函数崩溃时责怪自己。

免责声明：“正常”和“黑暗方式”只是隐藏真正专业解释的额外复杂性的流行词。如果您稍微使用一下强制转换和 */& 运算符，您将很快发现如何获得指向零地址的“int& boom”。这不是那么“黑暗”或“魔法”，它是语言和平台的明显特征。然而，(A) 新手程序员甚至有些有经验的程序员往往不知道引用可以为空，并且 (B) &-means-dont-pass-null 的约定是众所周知的并且已经确定，所以 (A+B ) 请适应约定，并在适当的情况下随意使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:45:57.280

您只能将指针与`NULL`. 调整本身永远不会为 NULL。

# python - 要添加到数据库的 Python Django 表单

> ID：15502579
> 
> 赞同：2
> 
> 时间：2013-03-19T14:43:59.793
> 
> 标签：python, django, django-models, django-forms, django-views

我正在尝试使用此表单添加到数据库中的表中。我目前收到错误“CSRF 验证失败。请求中止。”但我收到了其他错误，对此代码进行了不同的调整。我如何让这段代码工作，编写这样的表格的最佳实践是什么？

**模型.py**

```
from django.db import models
from django.contrib.auth.models import User

class Portfolio(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=30)
    description = models.CharField(max_length=100)

    def __unicode__(self):
        return self.name 
```

**表格.py**

```
from django import forms

class CreatePortfolio(forms.Form):
    name = forms.CharField(max_length=30)
    description = forms.CharField(max_length=100) 
```

**视图.py**

```
from django.http import HttpResponse
from django.shortcuts import render_to_response
from django.http import HttpResponseRedirect
from django.core.context_processors import csrf
from portfolio.models import Portfolio
from portfolio.forms import CreatePortfolio

def portfolio(request):
    if request.method == 'POST':
        portfolio_form = CreatePortfolio(request.POST)
        if form.is_valid():
            csrf_token = django.middleware.csrf.get_token(request)
            port_name = form.cleaned_data['name']
            port_description = form.cleaned_data['description']
            port_user = request.user
            new_portfolio = Portfolio(name=port_name, description=port_description, user=port_user)
            new_portfolio.save()
            return render_to_response('portfolio.html', {'csrf_token': csrf_token})
    else:
        portfolio_form = CreatePortfolio()
    return render_to_response('portfolio.html', {'portfolio_form': portfolio_form}) 
```

**投资组合.html**

```
<form method="post" action="">
    {% csrf_token %}
    <div class="field">
        <label for="id_name">Name:</label>
            {{ portfolio_form.name}}
    </div>
    <div class="field">
        <label for="id_description">Description:</label>
        {{ portfolio_form.description }}
    </div>
    <input type="submit" value="Create">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:54:48.333

您不必显式发送 csrf_token。Django 会为您处理好它。

每次提交表单时，它都会验证令牌，并为后续请求生成一个新令牌。在这里，您强制它使用相同的令牌，因此出现错误。

您的视图应如下所示：

```
def portfolio(request):
    if request.method == 'POST':
        portfolio_form = CreatePortfolio(request.POST)
        if form.is_valid():
            port_name = form.cleaned_data['name']
            port_description = form.cleaned_data['description']
            port_user = request.user
            new_portfolio = Portfolio(name=port_name, description=port_description, user=port_user)
            new_portfolio.save()
            return render_to_response('portfolio.html', {}, context_instance=RequestContext(request))
    else:
        portfolio_form = CreatePortfolio()
    return render_to_response('portfolio.html', {'portfolio_form': portfolio_form}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:55:39.117

问题是您没有在 render_to_response 中将 csrf 令牌添加到您的上下文中。

使用 RequestContext 来呈现您的视图（在其上下文中自动包含 csrf），如下所示：

```
from django.template import RequestContext

def portfolio(request):
    # ... view code here
   return render_to_response("portfolio.html", {'portfolio_form': portfolio_form}, context_instance=RequestContext(request)) 
```

或像这样手动更新csrf：

```
from django.core.context_processors import csrf
from django.shortcuts import render_to_response

def portfolio(request):
    # ... view code here

    c = {'portfolio_form': portfolio_form}
    c.update(csrf(request))
    return render_to_response("portfolio.html", c) 
```

有关更多参考资料，请参见此处

[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

# mysql - SUM 与枢轴计算总分

> ID：15502583
> 
> 赞同：0
> 
> 时间：2013-03-19T14:44:21.533
> 
> 标签：mysql, sum, pivot, pivot-table, myisam

从另一个问题我得到了这个查询来正确总结我的分数：

```
SELECT callSign,event, SUM(score) 
  FROM scores LEFT JOIN candidates 
ON scores.candidateID=candidates.id 
  WHERE candidateID IN 
    (SELECT id 
      FROM candidates 
    WHERE assessmentID='1321') 
  GROUP BY event, callSign
  ORDER BY candidateID,event 
```

我得到的数据如下：

```
callSign    event           TotalScore
Y209    Bridge                  45
Y209    PSA                     3
Y209    Team Analyst Exam       40
X125    PSA                     1
X125    Team Analyst Exam       38
V023    Amazing Race Planning   37 
```

我需要的是如下数据：

```
callSign      Bridge   PSA   Amazing Race Planning     Team Analyst Exam   
V023                                37
Y209           45       3                                   40         
X125                    1                                   38 
```

**表结构**

```
`events`
id  event
1   PSA
2   Bridge
30  Stress Board
25  Amazing Race Planning
26  Amazing Race Execution

`scores`
id  candidateID     event            rubric            category                         score   comment
1   18       Team Analyst Exam  Team Leader Rubric  Organizes and Tasks Team Members    3    
2   18       Team Analyst Exam  Team Leader Rubric  Roles and Responsibilities          5    
3   18       Team Analyst Exam  Team Leader Rubric  Backward Planning                   5    
4   18       Team Analyst Exam  Team Leader Rubric  Time Management

`candidates`    
id  firstName   middleInitial   lastName    callSign    service     rank    sex     height  weight  assessmentID    currentlyAssessing  hired 
```

callSign 是 X125 的去向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:47:56.163

由于您使用的是 MySQL，为了将数据转换为列，您需要使用带有`CASE`表达式的聚合函数：

```
SELECT callSign, 
    SUM(case when event = 'Bridge' then score else 0 end) as Bridge,
    SUM(case when event = 'PSA' then score else 0 end) as PSA,
    SUM(case when event = 'Amazing Race Planning' then score else 0 end) As AmazingRacePlanning,
    SUM(case when event = 'Team Analyst Exam' then score else 0 end) as TeamAnalystExam
FROM scores 
LEFT JOIN candidates 
    ON scores.candidateID=candidates.id 
WHERE candidateID IN (SELECT id 
                      FROM candidates 
                      WHERE assessmentID='1321') 
GROUP BY callSign 
```

如果您有未知数量的`events`，那么您将不得不使用准备好的语句来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN event = ''',
      event,
      ''' THEN score END) AS `',
      event, '`'
    )
  ) INTO @sql
FROM scores 
LEFT JOIN candidates 
    ON scores.candidateID=candidates.id;

SET @sql 
  = CONCAT('SELECT callSign, ', @sql, ' 
           FROM scores 
            LEFT JOIN candidates 
                ON scores.candidateID=candidates.id 
            WHERE candidateID IN (SELECT id 
                                  FROM candidates 
                                  WHERE assessmentID=''1321'') 
            GROUP BY callSign');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

编辑＃1，如果您`events`存储在单独的表中，那么您可以使用以下内容生成动态结果：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN event = ''',
      event,
      ''' THEN score END) AS `',
      event, '`'
    )
  ) INTO @sql
FROM events;

SET @sql 
  = CONCAT('SELECT callSign, ', @sql, ' 
           FROM scores 
            LEFT JOIN candidates 
                ON scores.candidateID=candidates.id 
            WHERE candidateID IN (SELECT id 
                                  FROM candidates 
                                  WHERE assessmentID=''1321'') 
            GROUP BY callSign');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/89fa9/1)

# javascript - 定位 SketchUp 模型

> ID：15502586
> 
> 赞同：0
> 
> 时间：2013-03-19T14:44:26.543
> 
> 标签：javascript, three.js, webgl, sketchup

我使用 Collada 加载程序 (three.js) 从 SketchUp 导入了一个模型。但现在我有一个问题。我希望对象的中心始终位于坐标 x0 y0 z0 处。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:54:57.797

您应该能够在导出之前在 SketchUp 中翻译/偏移您的对象，使其中心位于 0,0,0 然后重新导出。另一种选择是在代码中使用 GeometryUtils 的[center()](https://github.com/mrdoob/three.js/blob/master/src/extras/GeometryUtils.js#L390)函数：

```
THREE.GeometryUtils.center(geometry); 
```

其中 geometry 是要居中的 Object3D 的 .geometry 属性。鉴于您正在加载 Collada 文件，您可能需要处理一个层次结构，因此需要知道您将哪个几何图形居中。

另一种选择是将 collada 嵌套在一个空的 Object3D 中，并根据 Collada 的边界框偏移/平移其中的 collada。

# visual-studio-2008 - 有人有 Microsoft Windows Mobile 电池图标吗？

> ID：15502598
> 
> 赞同：1
> 
> 时间：2013-03-19T14:45:02.727
> 
> 标签：visual-studio-2008, windows-mobile

## 微软的 Windows Mobile 图标

我有一些项目很好地利用了这些非常基本的 Windows Mobile 图标：

![Windows 移动图形用户界面](../Images/ca3f304f11e64feee630d118202feaf2.png)

在过去的 2 年内，我更换了 PC。我刚刚得知我用于这些图标的图像文件没有被复制。

是的，我知道我可以重新创建一些俗气或过于华丽的图标，但我喜欢那些我发现的具有国际标准外观的简单和普遍的理解。

*   有人有这些吗？
*   有谁知道在哪里可以买到这些？
*   有谁知道如何从现有的图标中提取这些图标，`ImageList`以便在其他项目中使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:13:39.313

啊! 我在设备自己的`Windows`文件夹中找到了它们！

这是我需要的所有文件（加上一些文件）以及文件路径以及实际图像本身。

如果其他人也需要这个，只需右键单击图像并选择“另存为”：

*   ![电池.bmp](../Images/06904b7f9279915c8f5fc2de1b690a72.png) **小路** `Windows\battery.bmp`
*   ![电池警报.bmp](../Images/150c991bf53193c3a6c4e21ee48cc8fd.png) **小路** `Windows\battery_alert.bmp`
*   ![电池充电.bmp](../Images/4ebc5f3a45f2b78396dcc98aefcbe6d4.png) **小路** `Windows\batteryCharging.bmp`
*   ![电池无.bmp](../Images/1b8cecfbae593a3546938f88bb6efc67.png) **小路** `Windows\batteryNone.bmp`
*   ![No_Signal.bmp](../Images/d9405691af650be0395238080c8137e0.png) **小路** `Windows\No_Signal.bmp`
*   ![无线连接.bmp](../Images/a89f6c19dde09666e6f54756a34e911b.png) **小路** `Windows\radioconnected.bmp`
*   ![radioOff.bmp](../Images/953369ba30d56930adbe9df765bb7d1c.png) **小路** `Windows\radioOff.bmp`
*   ![WIFI_on.bmp](../Images/ad82aa8f2a7c109bb3414e8f8e0592e0.png) **小路** `Windows\WIFI_on.bmp`

所以，这个问题得到了回答。

**但是**，我将自己为其他所有答案捐赠 +1，以向此页面添加更多标准 Windows Mobile（Pocket PC、WM5 或 WM6）图标。希望其他人也会为您的捐款 +1。

# jquery - jQuery中的HTML转换

> ID：15502605
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:45:22.103
> 
> 标签：jquery, mobile

我有一个关于在 jQuery 中转换 HTML 的问题。

[http://jsfiddle.net/aldimeola1122/nMR85/1118/](http://jsfiddle.net/aldimeola1122/nMR85/1118/)

我如何在 jQuery 中编写此 HTML 代码？：

```
$('#deneme').append(
    ul 
    data-role="listview" 
    data-split-icon="gear" 
    data-split-theme="d" 
    data-inset="true")... 
```

**这不是相同的代码：**

```
$('#deneme').append('
    <ul data-role="listview" 
        data-split-icon="gear" 
        data-split-theme="d" 
        data-inset="true">
        <li>
            <a href="#"><img src="../../_assets/img/album-bb.jpg">
                <h2>Broken Bells</h2>
                <p>Broken Bells</p>
            </a>
            <a href="#purchase" 
                data-rel="popup" 
                data-position-to="window" 
                data-transition="pop">
                Purchase album
            </a>
        </li>
    </ul>
');
</br>
<ul data-role="listview" data-split-icon="gear" data-split-theme="d" data-inset="true">
    <li>
        <a href="#">
            <img src="../../_assets/img/album-bb.jpg">                      
            <h2>Broken Bells</h2>
            <p>Broken Bells</p>
        </a>
        <a href="#purchase" 
            data-rel="popup" 
            data-position-to="window" 
            data-transition="pop">
            Purchase album
        </a>
    </li>
</ul> 
```

它应该是这样的：

```
<ul data-role="listview" 
    data-split-icon="gear" 
    data-split-theme="d" 
    data-inset="true" 
    class="ui-listview ui-listview-inset ui-corner-all ui-shadow"> 
```

但这告诉我：

```
<ul data-role="listview" 
    data-split-icon="gear" 
    data-split-theme="d" 
    data-inset="true"> 
```

这表明我没有课。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:49:43.510

`ul`您可以通过执行以下操作来附加。

```
$('#deneme').append('<ul data-role="listview" data-split-icon="gear" data-split-theme="d" data-inset="true" />').trigger('create'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:50:09.767

也许使用 Vanilla 添加它会更好：

```
$('#deneme')[0].innerHTML = '<ul data-role="listview" data-split-icon="gear" data-split-theme="d" data-inset="true">...' 
```

或者如果你想要 jQuery：

```
$('#deneme').html('<ul data-role="listview" data-split-icon="gear" data-split-theme="d" data-inset="true">...') 
```

# ruby-on-rails - webmock 和破解 0.3.2 问题

> ID：15502607
> 
> 赞同：0
> 
> 时间：2013-03-19T14:45:23.363
> 
> 标签：ruby-on-rails, rspec, tdd, guard, webmock

我安装了 webmock gem，但是我的 rspec 测试不再起作用，而是出现了这个错误：（我使用警卫进行自动测试）

```
/home/neilmarion/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find crack-0.3.2 in any of the sources (Bundler::GemNotFound)
    from /home/neilmarion/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb:83:in `map!'
    from /home/neilmarion/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb:83:in `materialize'
    from /home/neilmarion/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/definition.rb:127:in `specs'
    from /home/neilmarion/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/environment.rb:27:in `specs'
    from /home/neilmarion/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
    from /home/neilmarion/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:60:in `setup'
    from /home/neilmarion/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.2/lib/rubygems-bundler/noexec.rb:75:in `<top (required)>'
    from /home/neilmarion/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /home/neilmarion/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /home/neilmarion/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /home/neilmarion/.rvm/gems/ruby-1.9.3-p194@global/bin/ruby_noexec_wrapper:9:in `<main>' 
```

我可以看到裂纹 0.3.2 已经在 gem 列表中。我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:21:45.753

我已经解决了这个问题。我刚刚从组 :test 块中删除了“gem 'webmock'”行。

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'activerecord-postgresql-adapter'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'omniauth-twitter'
gem 'omniauth-facebook'
gem 'omniauth-identity'
gem 'devise'
gem 'webmock'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

group :test, :development do
  gem 'rspec-rails'
  gem 'rb-inotify', '~> 0.9'
  gem 'better_errors'
end

group :test do
  gem 'capybara'
  gem 'factory_girl'
  gem 'guard-rspec'
  gem 'shoulda'
  gem 'launchy'
  gem 'database_cleaner'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:53:33.887

尝试`bundle exec rake spec`有时耙子不会拾取正确的宝石。

确保`bundle exec gem list`显示破解 0.3.2

# linux - dladdr 不返回 dli_fname 中的完整路径

> ID：15502608
> 
> 赞同：0
> 
> 时间：2013-03-19T14:45:26.420
> 
> 标签：linux, shared-libraries, glibc, dladdr

我使用 dladdr 获取库的完整路径：

```
Dl_info dl_info;
int ret = dladdr((void*)&func, &dl_info);
if (ret)
            // use dl_info.dli_fname; 
```

它工作正常。但是，如果我用构建重命名文件夹（然后再次运行），dli_fname 不包含完整路径，只包含库的文件名。这是为什么？

除了重命名构建文件夹之外还有其他步骤（杂项。cmake 更改，主要与安装功能相关），但问题仅在重命名后出现（即应用程序不是从构建文件夹运行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-19T10:36:13.343

dl_info.dli_fname 在 android 中并不总是包含完整路径（ [请参见此处](https://android.googlesource.com/platform/bionic/+/cc9b7456b66b7c7c218a9d1f00d7aef1f5ecf409/tests/dlfcn_test.cpp#141)）

在这种情况下，这是一种解决方法： [请参阅我的回答](https://stackoverflow.com/a/54764051/4266305)

# ruby-on-rails - 如何自定义 public_activity rails gem 以对“活动”使用不同的“表”或“模型”？

> ID：15502613
> 
> 赞同：3
> 
> 时间：2013-03-19T14:45:32.960
> 
> 标签：ruby-on-rails, ruby, gem

我是 RoR 的新手，正在尝试将 public_activity gem 与已经具有`Activity`模型和`activities`表的现有应用程序一起使用。

是否可以在不修改 public_activity 的整个源代码的情况下以某种方式配置或欺骗 public_activity 以使用不同的表和模型？

我在想 PublicActivity::Activity 只会指向不同的模型类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:50:12.393

答案很简单。

假设您希望 gem 使用`events`table 而不是默认的 using `activities`。

按照`public_activity`安装说明生成迁移后，打开它生成的迁移文件并将表名更改为`:events`

**打开文件：** `db/migrate/xxxxxxxxx_create_activities.rb` 并像这样修改它......

```
class CreateEvents < ActiveRecord::Migration
  # Create table
  def self.up
    create_table :events do |t|
      t.belongs_to :trackable, :polymorphic => true
      t.belongs_to :owner, :polymorphic => true
      t.string  :key
      t.text    :parameters
      t.belongs_to :recipient, :polymorphic => true

      t.timestamps
    end

    add_index :events, [:trackable_id, :trackable_type]
    add_index :events, [:owner_id, :owner_type]
    add_index :events, [:recipient_id, :recipient_type]
  end
  # Drop table
  def self.down
    drop_table :events
  end
end 
```

然后运行`rake db:migrate`。

然后，创建一个文件`config/initializers/public_activity.rb` 并添加以下行： `PublicActivity::ORM::ActiveRecord::Activity.table_name = 'events'`

并继续使用`public_activity`文档中描述的 gem，一切都很好。

[特别感谢 public_activity 的开发人员在 GitHub 问题中提供此解决方案的帮助。](https://github.com/pokonski/public_activity/issues/87)

# xcode4 - 在“快速打开”对话框中设置搜索字符串的最小长度

> ID：15502615
> 
> 赞同：0
> 
> 时间：2013-03-19T14:45:37.677
> 
> 标签：xcode4

我正在处理一个巨大的项目，“快速打开”对话框确实有助于导航。但是在输入两个字符后它会挂起几秒钟。这很烦人。有没有办法为“快速打开”搜索字符串设置最小长度，以便在我输入足够的字符之前它不会搜索。我希望这将使 UI 更具响应性。

PS 是否有关于 Xcode 4 用户默认设置的良好参考？

# codeigniter - 如何在codeigniter中重写url

> ID：15502616
> 
> 赞同：-4
> 
> 时间：2013-03-19T14:45:38.583
> 
> 标签：codeigniter, url-routing

如何在 codeigniter 中重写 URL

例如，我想重写这个 URL：

```
http://greenville.homes.sc/dev/demo_greenville/Community/Simpsonville/Stonewyck 
```

对于这样的事情：

```
http://greenville.homes.sc/dev/demo_greenville/Simpsonville/Stonewyck 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:02:13.797

if`users`是控制器，`community`是函数：

```
$route['users/Simpsonville/Stonewyck']   
       = "users/Community/Simpsonville/Stonewyck"; 
```

您想将缩写 URL ('users/Simpsonville/Stonewyck') 重新路由到完整 URL ('users/Community/Simpsonville/Stonewyck')

在以下文件中进行设置：`application/config/routes.php`

**脚注：**
完全取决于您要实现的目标，您可能还需要添加：

```
$route['Simpsonville/Stonewyck']   
       = "users/Community/Simpsonville/Stonewyck"; 
```

这完全取决于您是否要同时隐藏控制器和函数名称/段。

如果这些参数是可变的，您可能还需要使用类似的东西：

```
$route['(:any)/(:any)']   
       = "users/Community/$1/$2"; 
```

# jquery - jquery .load() 不会从 xy.html 加载表，而是从 xy.php 加载（具有相同 id 的同一表）

> ID：15502618
> 
> 赞同：0
> 
> 时间：2013-03-19T14:45:46.180
> 
> 标签：jquery

所以我的问题如下，我想将一个 id="tabla" 的表从 tapany.html 加载到我的 php 页面中，它不起作用，但是如果我从 tabla.php 加载它（具有相同 id 的同一个表）它完美地工作，为什么？

如果它从 tapany.html 加载那就太好了，然后所有文件都在一个文件中

```
$("#tapany").load("tabla.php #tabla"); <- the working one
$("#tapany").load("tapany.html #tabla); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:47:22.450

转这个..

```
$("#tapany").load("tapany.html #tabla); 
```

进入这个...

```
$("#tapany").load("tapany.html #tabla"); 
```

您还应该能够使用 jQuery Get() 过滤结果，就像这样...

```
$.get('tapany.html', function(data) {
  $(data).filter('#tabla').appendTo('#myDiv');
}); 
```

# python - 在 python 中正确读取 Windows-1252(cp1252) 文件中的文本

> ID：15502619
> 
> 赞同：36
> 
> 时间：2013-03-19T14:45:50.347
> 
> 标签：python, utf-8, python-unicode, windows-1252, cp1252

好吧，正如标题所示，我遇到的问题是从 python 中的 windows-1252 编码文件中正确读取输入并将所述输入插入到 SQLAlchemy-MySql 表中。

当前系统设置：
Windows 7 VM，带有输出文件的“Roger Access Control System”；
Ubuntu 12.04 LTS VM 与 Windows 系统的共享文件夹，因此我可以使用“Python 2.7.3”访问该文件。

现在到实际问题，对于输入文件，我有一个“VM 共享文件夹”，其中包含通过 Roger 访问控制系统（roger.pl 了解更多详细信息）在 Windows 7 系统上生成的文件，该文件称为“ PREvents.csv" 暗示它的内容，一个 ";" 单独的数据列表。

数据的示例格式：

```
2013-03-19;15:58:30;100;Jānis;Dumburs;1;Uznemums1;0;Ieeja;
2013-03-19;15:58:40;100;Jānis;Dumburs;1;Uznemums1;2;Izeja; 
```

第 4 个字段包含卡所有者姓名，第 5 个字段包含所有者姓氏，第 6 个字段包含所有者分配的组。

问题在于上述三个字段中的任何一个都可以包含特定于拉脱维亚语言的字符，在示例文件中，单词“Jānis”包含字母“ā”，在 unicode 中是 257。

正如我习惯的那样，我这样打开文件：

```
try:
    f = codecs.open(file, 'rb', 'cp1252')
except IOError:
    f = codecs.open(file, 'wb', 'cp1252') 
```

到目前为止，一切正常 - 它打开了文件，所以我继续迭代文件的每一行（这是一个连续运行的脚本，所以请原谅循环）：

```
while True:
    line = f.readline()

    if not line:
        # Pause loop for 1 second
        time.sleep(1)
    else:
        # Split the line into list
        date, timed, userid, firstname, lastname, groupid, groupname, typed, pointname, empty = line.split(';') 
```

这就是问题开始的地方，如果`print repr(firstname)`它打印出来`u'J\xe2nis'`，据我所知，这是不正确的 - `\xe2\ 不代表拉脱维亚字符“ā”。
根据事件类型进一步向下循环，我将变量分配给 SQLAlchemy 对象并插入/更新：

```
if typed == '0':  # Entry type
    event = Events(
        period,
        fullname,
        userid,
        groupname,
        timestamp,
        0,
        0
    )
    session.add(event)
else:  # Exit type
    event = session.query(Events).filter(
        Events.period == period,
        Events.exit == 0,
        Events.userid == userid
    ).first()
    if event is not None:
        event.exit = timestamp
        event.spent = timestamp - event.entry

# Commit changes to database
session.commit() 
```

在我寻找答案的过程中，我发现了如何定义要使用的默认编码：

```
import sys
reload(sys)
sys.setdefaultencoding('utf-8') 
```

这对我没有任何帮助。

基本上，这一切都会导致我无法插入正确的所有者名字/姓氏以及所有者分配的组名，如果它们包含任何拉脱维亚特定字符，例如：

```
Instead of the character "ā" it inserts "â" 
```

我还想补充一点，我无法更改“PREvents.csv”文件编码，并且“RACS”系统不支持插入 UTF-8 或 Unicode 文件 - 如果您尝试任何一种方式，系统都会为拉脱维亚特有的字符。

如果需要任何其他信息，请现在告诉我，我很乐意提供:)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-19T14:50:12.177

CP1252不能代表ā；您的输入包含相似的字符 â。`repr`仅在 Python 2.x 中显示 Unicode 字符串的 ASCII 表示：

```
>>> print(repr(b'J\xe2nis'.decode('cp1252')))
u'J\xe2nis'
>>> print(b'J\xe2nis'.decode('cp1252'))
Jânis 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T14:50:59.960

我认为`u'J\xe2nis'`是正确的，请参阅：

```
>>> print u'J\xe2nis'.encode('utf-8')
Jânis 
```

您是否从 SQLAlchemy 或应用程序的输出中得到实际错误？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-08T15:21:03.683

我对一些 XML 文件有同样的问题，我解决了用 ANSI 编码（Windows-1252）读取文件并用 UTF-8 编码写入文件：

```
import os
import sys

path = os.path.dirname(__file__)

file_name = 'my_input_file.xml'

if __name__ == "__main__":
    with open(os.path.join(path, './' + file_name), 'r', encoding='cp1252') as f1:
        lines = f1.read()
        f2 = open(os.path.join(path, './' + 'my_output_file.xml'), 'w', encoding='utf-8')
        f2.write(lines)
        f2.close() 
```

# mysql - MySQL矩阵乘法

> ID：15502622
> 
> 赞同：11
> 
> 时间：2013-03-19T14:45:55.757
> 
> 标签：mysql, sql, math, matrix, linear-algebra

我正在尝试为 MySQL 编写矩阵乘法，但我有点卡住了：

基本上，我的矩阵以 [row#, column#, matrixID, value] 格式存储
，因此例如矩阵 [3 x 2] 将类似于：

```
[row#, column#, matrixID, value]
  1      1        mat01    1
  1      2        mat01    2
  1      3        mat01    3
  2      1        mat01    4
  2      2        mat01    5
  2      3        mat01    6 
```

相当于：[[1 2 3],[4 5 6]]

以下确实很好地计算了 matrix1 * matrix2 的单个元素：

```
 SELECT SUM(row1.`val` * col2.`val`)
   FROM matValues row1
   INNER JOIN  `matValues` col2
   WHERE row1.`row` = 1 AND row1.`mID`='matrix1' AND 
         col2.`mID`='matrix2' AND col2.`col` = 1 AND row1.col = col2.row 
```

将其包装到函数中，然后使用另一个函数迭代行号和列号可能会起作用，但是我在生成这组数字并使用 SQL 迭代它们时遇到问题。欢迎任何意见/建议

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-19T15:54:43.093

尝试：

```
select m1.`row#`, m2.`column#`, sum(m1.value*m2.value) 
from matValues m1
join matValues m2 on m2.`row#` = m1.`column#` 
where m1.matrixID = 'mat01' and m2.matrixID = 'mat02'
group by m1.`row#`, m2.`column#` 
```

[这里](http://sqlfiddle.com/#!2/99749/1)的例子。

（将`'mat01'`和替换`'mat02'`为合适的`matrixID`值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:25:23.670

您可以在 SQL 中进行整个计算。您只举一个带有单个矩阵的示例，因为它不是正方形，所以不能自行相乘。

这是想法：

```
SELECT mout.row, mout.col, SUM(m1.value*m2.value)
FROM (select distinct row from matValues cross join
      select distinct COL from matValues
     ) mout left outer join
     matValues m1
     on m1.row = mout.row left outer join
     matValues m2
     on m2.col = mout.col and
        m2.row = m1.col 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:56:42.060

我知道这是 SQL-Server 语法，但它应该让您开始了解相应的 MySql 语法。稀疏矩阵性质似乎处理得很好。

```
 with I as (
      select * from ( values
        (1,1, 1),
        (2,2, 1), 
        (3,3, 1)
      ) data(row,col,value)
    )
    ,z_90 as (
      select * from ( values
        (1,2, 1),
        (2,1,-1), 
        (3,3, 1)
      ) data(row,col,value)
    )
    ,xy as (
      select * from ( values
        (1,2, 1),
        (2,1, 1), 
        (3,3, 1)
      ) data(row,col,value)
    )
    ,x_90 as (
      select * from ( values
        (1,1, 1),
        (2,3, 1), 
        (3,2,-1)
      ) data(row,col,value)
    )
    select
       'I * z_90' as instance,
       a.row,
       b.col,
       sum( case when a.value is null then 0 else a.value end
          * case when b.value is null then 0 else b.value end ) as value
    from I as a
    join z_90 as b on a.col = b.row
    group by a.row, b.col
    union all
    select
       'z_90 * xy' as instance,
       a.row,
       b.col,
       sum( case when a.value is null then 0 else a.value end
          * case when b.value is null then 0 else b.value end ) as value
    from z_90 as a
    join xy as b on a.col = b.row
    group by a.row, b.col
    union all
    select
       'z_90 * x_90' as instance,
       a.row,
       b.col,
       sum( case when a.value is null then 0 else a.value end
          * case when b.value is null then 0 else b.value end ) as value
    from z_90 as a
    join x_90 as b on a.col = b.row
    group by a.row, b.col

    order by instance, a.row, b.col 
```

产量：

```
instance    row         col         value
----------- ----------- ----------- -----------
I * z_90    1           2           1
I * z_90    2           1           -1
I * z_90    3           3           1
z_90 * x_90 1           3           1
z_90 * x_90 2           1           -1
z_90 * x_90 3           2           -1
z_90 * xy   1           1           1
z_90 * xy   2           2           -1
z_90 * xy   3           3           1 
```

但是，我建议您也检查一下在您的显卡上执行此操作。NVIDIA 在 ri C Programming Guide 中有一个很好的实现矩阵乘法的例子。

# kendo-ui - 如何在 Kendo Grid 弹出窗口中添加自定义验证

> ID：15502627
> 
> 赞同：2
> 
> 时间：2013-03-19T14:45:57.900
> 
> 标签：kendo-ui, kendo-grid

如何将最小长度验证添加到文本框并显示自定义错误消息？

我想要验证以下内容：

*   用户名的最小长度为 6
*   密码和确认密码要匹配
*   地址 1 为必填项

这是弹出模板的代码。模板中指定的 minlength 不工作，但 maxlength 工作正常。

```
<script id="popup_editor" type="text/x-kendo-template">
    <table cellpadding="0" cellspacing="0">
        <tr>
            <td>
                <label for="UserName"><b>UserName*</b></label>
            </td>
            <td>
                <div class="control-row">
                    <input type="text" 
                           name="UserName" 
                           id="UserName" 
                           class="k-input k-textbox"
                           required
                           **minLength**="6"
                           maxlength="8"
                           pattern="[a-zA-Z0-9]+"
                           validationMessage="Please enter username"/>
                    <span class="k-invalid-msg" data-for="UserName" ></span>
                </div>
            </td>
            <td></td>
            <td></td>
         </tr>
         <tr>
             <td>
                 <div>
                     <label for="Password"><b>Password*</b></label>
                 </div>
             </td>
             <td>
                 <div class="k-edit-label">
                     <input type="password" 
                            id="Password" 
                            name="Password"
                            class="k-input k-textbox"required
                            validationMessage="Please enter Password"/>
                     <span class="k-invalid-msg" data-for="Password"></span>
                 </div>
              </td>
              <td>
                  <div>
                      <label for="ConfirmPassword" style=""><b>Confirm Password</b></label>
                  </div>
              </td>
              <td>
                  <div class="k-edit-label">
                      <input type="password" 
                             id="ConfirmPassword" 
                             name="ConfirmPassword"
                             class="k-input k-textbox"required
                             validationMessage="Please enter Confirm Password"/>
                  </div>
              </td>
          </tr>
          <tr>
              <td>
                  <div>
                      <label for="Company_Name"><b>Company Name*</b></label>
                  </div>
              </td>
              <td>
                  <div class="k-edit-label">
                      <input name="Company_Name"
                             id="Company_Name"
                             required
                             pattern="[a-zA-Z0-9]+"
                             validationMessage="Please enter Valid CompanyName"/>
                  </div>
              </td>
              <td></td>
              <td></td>
          </tr>
          <tr>
              <td>
                 <div>
                     <label for="First_Name"><b>First Name*</b></label>
                 </div>
              </td>
              <td>
                  <div class="k-edit-label">
                      <input type="text"
                             name="First_Name"
                             id="First_Name"
                             data-type="string"
                             data-bind="value:First_Name"
                             class="k-input k-textbox" required
                             pattern="[a-zA-Z]+"
                             validationMessage="Please enter FirstName"/>
                   </div>
               </td>
               <td>
                   <div>
                       <label for="Last_Name"><b>Last Name*</b></label>
                   </div>
               </td>
               <td>
                   <div class="k-edit-label">
                       <input type="text" 
                               id="Last_Name"
                                name="Last_Name"
                                class="k-input k-textbox" required
                                pattern="[a-zA-Z]+"
                                validationMessage="Please enter LastName"/>
                   </div>
               </td>
           </tr>
           <tr>
               <td>
                   <div>
                       <label for="Address1"><b>Address1*</b></label>
                   </div>
               </td>
               <td>
                   <div class="k-edit-label">
                       <textArea style="resize: none;" 
                                 rows="5" 
                                 cols="18" 
                                 name="Address1" 
                                 maxlength="150" 
                                 id="Address1" required
                                 pattern="[a-zA-Z0-9]+"
                                 validationMessage="Please enter Address">
                       </textarea>
                   </div>
               </td>
           </tr>  
</table> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-13T11:57:13.267

您可以在网格的数据源中为弹出编辑添加自定义验证。

```
var dataSource = new kendo.data.DataSource({
    transport: {
        ...
    },
    schema: {
        model: {
            id: "UserName",
            fields: {
                UserName: {}
                Password: {}
                ConfirmPassword: {}
                Company_Name: {}
                First_Name: {}
                Last_Name: {}
                Address1: {
                    validation: {
                        minLength: function (input) {
                            if (input.is("[name=UserName]")) {
                                return input.val().length >= 6;
                            }
                            return true;
                        },
                        match: function (input) {
                            if (input.is("[name=ConfirmPassword]")) {
                                return input.val() == $("#Password").val();
                            }
                            return true;
                        }
                    }
                }
            }
        }
    }
}); 
```

有几件事情需要注意： 验证会针对弹出窗口中的**所有**输入元素运行，因此

1.  您只需为模型中的一个字段定义**它**。哪个无所谓。
2.  您必须检查在当前运行中检查了哪个输入元素，这在我的示例中执行 if 语句。
3.  您必须`return true`在您定义的每条规则的末尾附加 a ，否则您将收到一条错误消息，用于您未明确检查的每个输入。如果没有传递返回值，kendo 会自动假定检查结果为假。

每个验证规则都需要自己的验证消息，否则您的验证工具提示框将仅显示警告徽标而没有任何文本。您可以将其作为 html 属性 ( *data-{validation rule}-msg* ) 添加到输入元素中，如下所示：

```
<input type="text" 
       name="UserName" 
       id="UserName" 
       class="k-input k-textbox"
       required
       maxlength="8"
       pattern="[a-zA-Z0-9]+"
       validationMessage="Please enter username"
       data-minLenght-msg="Username must be at least 6 characters"/>

<input type="password" 
       id="ConfirmPassword" 
       name="ConfirmPassword" 
       class="k-input k-textbox"
       required
       validationMessage="Please enter Confirm Password"
       data-match-msg="Password and confirmation must be equal"/> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T07:16:00.673

在规则中添加：

```
 match: function (input) {
                if ((input.is('[name=\'Password\']') || input.is('[name=\'ConfirmPassword\']'))&& $('#ConfirmPassword').length !== 0) {
                    if ($('#Password').val().length > 0 && $('#ConfirmPassword').val().length > 0) {
                        if (input.is('[name=\'Password\']')) {
                            return input.val() === $('#ConfirmPassword').val();
                        }
                        else if (input.is('[name=\'ConfirmPassword\']')) {
                            return input.val() === $('#Password').val();
                        }
                    }
                }
                return true;
            },
            minLength: function (input) {
                if (input.is("[name=UserName]")) {
                    return input.val().length >= 6;
                }
                return true;
            },
            requiredAddress: function (input) {
                if (input.is("[name=Address1]")) {
                    return $('#Address1').val() !== '' ? false : true;
                }
                return true;
            } 
```

# javascript - 小胡子式双括号的正则表达式？

> ID：15502629
> 
> 赞同：30
> 
> 时间：2013-03-19T14:46:02.827
> 
> 标签：javascript, regex

我在 AngularJS 中使用 Mustache 样式的标签。什么是最好的正则表达式来返回一个*只*包含小胡子括号内的文本的数组？

样本数据：

```
"This could {{be }} a {{ string.with.dots_and_underscores }} of {{ mustache_style}} words which {{could}} be pulled." 
```

预期输出：

```
['be','string.with.dots_and_underscores','mustache_style','could'] 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-19T14:56:45.560

如果您使用全局搜索`.match`，JavaScript 将不会在其数组输出中提供捕获组。因此，您需要执行两次：一次查找`{{...}}`对，然后再次从其中提取名称：

```
str.match(/{{\s*[\w\.]+\s*}}/g)
   .map(function(x) { return x.match(/[\w\.]+/)[0]; }); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-08-05T17:53:11.473

## *道格拉斯·克罗克福德*的Mod`String.prototype.supplant`

这将`{param}`在 handleBars ( `{}`) 之间插入您拥有的任何内容。我知道这个答案有点广泛，但我认为问题可能与*插值*有关——无论哪种方式，我都建议读者研究正则表达式，无论如何。

```
clear();

function interpolate(str) {
    return function interpolate(o) {
        return str.replace(/{([^{}]*)}/g, function (a, b) {
            var r = o[b];
            return typeof r === 'string' || typeof r === 'number' ? r : a;
        });
    }
}

var terped = interpolate('The {speed} {color} fox jumped over the lazy {mammal}')({
    speed: 'quick',
    color: 'brown',
    mammal: 'dog'
});

console.log(terped); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-19T15:00:22.757

您可以尝试这样做`exec()`：

```
var list = [],
    x = '"This could {{be }} a {{ string }} of {{ mustache_style}} words which {{could}} be pulled."',
    re = /{{\s*([^}]+)\s*}}/g,
    item;

while (item = re.exec(x))
    list.push(item[1]); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-19T14:49:01.690

像这样的东西

```
/{{\s?([^}]*)\s?}}/ 
```

这些值将在第一组中（您知道，不是 0 组，而是 1 组 :)）

还有一点 - 这个正则表达式捕获*了*`{{`and之间的所有内容`}}`，因此所有的标点符号、大括号、点等。如果您只需要单词（可能由下划线或空格分隔），这对您更有用：

```
/{{\s?[\w\s]*\s?}}/ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-26T22:07:17.030

我真的很喜欢@Cody 提供的答案，但是如果您想让对象传递更多的是真实对象而不仅仅是列表，则会遇到范围问题，所以我找到了一个 eval 技巧来更改范围，所以我想我会分享它。

```
function interpolate(str) {
    return function interpolate(o) {
        return str.replace(/{([^{}]*)}/g, function (a, b) {
            let r
            with(o){
              r = eval(b)
            }
            return r
        });
    }
}

var terped = interpolate('The {speed} {fox.color} {mammal[2]} jumped over the lazy {mammal[0]}')({
    speed: 'quick',
    fox: {
      color: 'brown'
    },
    mammal: ['dog', 'cat', 'fox']
});

console.log(terped) 
```

# windows - NodeJS子进程PID与真实进程不匹配

> ID：15502635
> 
> 赞同：1
> 
> 时间：2013-03-19T14:46:24.337
> 
> 标签：windows, node.js, mongodb, batch-file, pid

我正在使用windows，我正在做这个实验，

```
console.log( _.process.exec( "mongod --dbpath . --port 8083 --bind_ip 127.0.0.1" ).pid ); 
```

问题是，当我执行 tasklist 命令时，该输出中的 PID 指向命令提示符任务，而不是 mongod.exe 任务。

有没有办法获取 mongod.exe 任务的真实 PID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-13T04:31:31.953

我现在正在看这个，并认为我需要在子进程中运行 process.pid 并将其发回给父进程。然后，父母需要跟踪这个数字，以防孩子需要被杀死。

我希望这不会那么复杂？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:56:51.880

那是因为`mongod`是一个子进程`cmd`并且`tasklist`不打印子进程`id`。

给定一个父进程 id，你可以得到它的子进程列表[`wmi query`](https://stackoverflow.com/a/12620295/303270)：

```
wmic process where (ParentProcessId=CMD_PID) get Caption, ProcessId 
```

替换`CMD_PID`为父 (cmd) 进程 ID。

# performance - SaveChanges 需要 40 到 60 秒来保存约 8000 个上下文更改

> ID：15502639
> 
> 赞同：2
> 
> 时间：2013-03-19T14:46:34.177
> 
> 标签：performance, sql-server-2008, entity-framework

设置：

*   启用延迟加载的实体框架 4（模型优先，每个层次结构的表）。
*   表的数量约为 40（并且没有表有超过 15-20 个字段）。
*   SQL Server Express 2008（不是 r2）。
*   不存在数据库触发器或任何其他类似的东西 - 它仅用于存储。所有的逻辑都在代码中。
*   目前数据库大小约为 2GB。
*   （主键是 Guid 并通过代码生成`Guid.NewGuid()`- 如果这很重要）
*   保存一个复杂的操作结果（产生一个复杂的对象图）需要 40 到 60 秒（返回的数字`SaveChanges`约为 8000 - 主要是添加的对象和一些修改）。
*   使用空（或几乎空）的数据库保存相同的操作结果在同一台计算机上通常需要大约 1 秒。

似乎影响此问题的唯一变量是数据库大小。但请注意，我只是在测量`Context.SaveChages()`通话（所以即使我在不​​应该影响这个问题的地方有一些奇怪的缓慢查询）。

任何关于为什么此操作可能会持续这么长时间的建议都值得赞赏。

**更新 1**

澄清一下 - 执行需要 40-60 秒的代码是（仅当数据库大小约为 2gb 时才需要这么长时间）：

```
Stopwatch sw = Stopwatch.StartNew();
int count = objectContext.SaveChanges(); // this method is not overridden
Debug.Write(sw.ElapsedMilliseconds); // prints out 40000 - 60000 ms
Debug.Write(count); // I am testing with exactly the same operation and the
                    // result always gives the same count for it (8460) 
```

空 DB 的相同操作大约需要 1000 毫秒（同时仍然给出相同的计数 - 8460）。因此，问题将是 - 数据库大小如何影响`SaveChanges()`？

**更新 2**

运行性能分析器显示主要瓶颈（从“代码角度”来看）是以下方法：

```
Method:   static SNINativeMethodWrapper.SNIReadSync
Called:    3251 times
Avg:         10.56 ms
Max:        264.25 ms
Min:          0.01 ms
Total:    34338.51 ms 
```

**更新 3**

数据库中的所有 PK 和 FK 都有非聚集索引。我们使用随机 Guid 作为代理键（不是顺序的），因此碎片总是处于非常高的水平。我尝试在重建所有数据库索引后立即测试执行有问题的操作（所有索引的碎片小于 2-3%），但它似乎并没有以任何方式改善这种情况。

此外，我必须说，在有问题的操作期间，该过程涉及的一张表大约有 400 万行（这张表有很多插入）。SQL Profiler 显示对该表的插入可以持续 1 到 200 毫秒（这是一个“峰值”）。再一次，这种变化似乎并没有重新重建案例索引。

无论如何 - 似乎（目前）问题出在应用程序的 SQL Server 端，因为占用时间的主要是该`SNIReadSync`方法。如果我完全无知，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:12:05.230

没有分析器很难猜测，但是 8000 条记录肯定太多了。通常 EF 4 最多可以处理数百个对象。如果更改跟踪花费了大部分时间，我不会感到惊讶。EF 5 和 6 有一些性能优化，所以如果你不能以某种方式减少被跟踪对象的数量，你可以尝试它们。

# ruby-on-rails - 带有 content_tag 的自定义字体真棒按钮

> ID：15502642
> 
> 赞同：3
> 
> 时间：2013-03-19T14:46:46.663
> 
> 标签：ruby-on-rails, font-awesome

我想要一个看起来像 的按钮，其中`Log in with [FB]`字体`[FB]`真棒图标。（请注意，此图标出现在末尾）。为此，这有效：

```
= form_tag my_path, :method => :post do
  = button_tag do
    Log in with
    %i.icon-facebook 
```

我想通过创建一个新的辅助方法来干燥它：

```
 def button_to_with_icon(path, text, button_class, icon)
    form_tag path, :method => :post do
      button_tag(:class => button_class) do
        text
        content_tag :i, "" , :class => icon.to_sym
      end
    end
  end 
```

但是，该`text`参数不会呈现在 HTML 中。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T14:55:05.607

该`button_tag`块将使用那里返回的内容作为文本。在这里，您隐含地返回`content_tag`，并抛出文本。

你应该`concat`在你的`content_tag`块内使用：

```
button_tag do
  concat text
  concat content_tag(:i, nil, :class => icon.to_sym)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:51:00.337

在您的代码中，返回值`text`只是被浪费了。您必须返回两者的串联，`content_tag`and `text`：

```
def button_to_with_icon(path, text, button_class, icon)
  form_tag path, :method => :post do
    button_tag(:class => button_class) do
      text + content_tag(:i, "" , :class => icon.to_sym)
    end
  end
end 
```

红宝石方法不是 ERB :-)

# wcf-data-services - 移动主机时缺少 Content-Type 标头值

> ID：15502644
> 
> 赞同：0
> 
> 时间：2013-03-19T14:46:55.737
> 
> 标签：wcf-data-services, odata

我已经下载并使用了一个`DataServiceProvider`示例，非常基本和常见的“hello world”（带有`Product`和`Category`实体的那个）。我正在使用最新的`Microsoft.Data.Services`软件包。

我已经建立了一个客户端来对抗它并且它有效。该`GET`请求返回一个`Category`，我对其进行编辑并调用`SaveChanges()`更新。

当我决定将代码从“hello world”虚拟环境移动到我现有的 IIS 上的大型应用程序时，更新停止工作。我说的是相同的代码——客户端和服务器！

`GET`工作正常，但`SaveChanges()`响应抛出异常：

```
<?xml version="1.0" encoding="utf-8"?><m:error xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"><m:code /><m:message xml:lang="en-US">Content-Type header value missing.</m:message></m:error> 
```

虽然我可以在提琴手中清楚地看到我确实发送了一个`Content-Type`标题： `"Content-Type: application/atom+xml"`

```
var sessionedUri = new Uri("http://myapp/odata.svc/", UriKind.Absolute);
        _oDataContext = new DemoService(sessionedUri);

        _oDataContext.MergeOption = MergeOption.OverwriteChanges;
        Category cate = _oDataContext.CreateQuery<Category>("Categories").FirstOrDefault();

        _oDataContext = new DemoService(sessionedUri);
        cate.Name = "somethin";
        _oDataContext.AttachTo("Categories", cate);
        _oDataContext.UpdateObject(cate);
        _oDataContext.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:41:31.483

正如上面的评论所说：

Httphandlers 会干预通信，尽管我发送了标头，但它可能会删除标头。谢谢埃里克

# mysql - mysql语句insert，如果插入了，再插入一个

> ID：15502650
> 
> 赞同：2
> 
> 时间：2013-03-19T14:47:07.007
> 
> 标签：mysql, sql, database

我有以下声明：

```
INSERT INTO `Properties`(`Id`, `Url`, `BrokerId`, `LastFound`) VALUES
(@Id,@Url,@BrokerId,@LastFound)
ON DUPLICATE KEY UPDATE LastFoundOn = @LastFoundOn;

INSERT INTO `Events`(`Id`, `Type`, `DateTime`, `PropertyId`) VALUES
(@EventId,@EventType,@Now,@Id); 
```

Properties.Id 和 Events.PropertyId 之间存在外键约束。并且 URL 是独一无二的。

这有效 - 几乎。如果没有插入记录，但由于重复键（Url）而更新，则插入事件将失败，因为外键根本不存在。像这样：

例如：

```
exists:    1  |  http://test1.com  |  2  |  2013-03-13
to insert: 2  |  http://test2.com  |  2  |  2013-03-14 
```

当尝试插入时，它会更新，因为唯一的 url。之后尝试插入事件时，属性表中不存在外键 (2)。如何制作 if then 语句来处理这种情况？

就像是 （？）：

```
INSERT INTO `Properties`(`Id`, `Url`, `BrokerId`, `LastFound`) VALUES
(@Id,@Url,@BrokerId,@LastFound)
ON DUPLICATE KEY UPDATE LastFoundOn = @LastFoundOn;
IF LastInserted = @Id THEN
INSERT INTO `Events`(`Id`, `Type`, `DateTime`, `PropertyId`) VALUES
(@EventId,@EventType,@Now,@Id);
END IF; 
```

更新：

触发器可能是解决方案，但我正在努力让它发挥作用。这里有什么问题？

```
DELIMITER $$
CREATE TRIGGER Event_Submitted_Trigger AFTER INSERT ON Properties 
FOR EACH ROW
BEGIN
INSERT INTO Events VALUES(SELECT(UUID()), 'PropertySubmitted', SELECT(NOW()), new.Id);
END$$ 
```

我收到以下错误：#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，了解在 'SELECT(NOW()), new.Id); 附近使用的正确语法；END$$' 在第 4 行

最好的祝福，

索伦

更新：

这是我的架构：

```
CREATE TABLE IF NOT EXISTS `Events` (
  `Id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `Type` enum('PropertySubmitted','PropertyChanged','PropertyRemoved') NOT NULL,
  `DateTime` datetime NOT NULL,
  `Attribute` varchar(128) NOT NULL,
  `From` varchar(512) NOT NULL,
  `To` varchar(512) NOT NULL,
  `PropertyId` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`Id`),
  KEY `IX_FK_PropertyEvent` (`PropertyId`),
  KEY `DateTimeIndex` (`DateTime`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `Properties`
--

CREATE TABLE IF NOT EXISTS `Properties` (
  `Id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `Url` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `Type` varchar(64) NOT NULL,
  `ExtractedAddress` varchar(192) NOT NULL,
  `ExtractedPostcode` varchar(8) NOT NULL,
  `ExtractedCity` varchar(64) NOT NULL,
  `StreetName` varchar(128) DEFAULT NULL,
  `StreetNumber` varchar(8) DEFAULT NULL,
  `Floor` varchar(8) DEFAULT NULL,
  `Side` varchar(8) DEFAULT NULL,
  `DoorNo` varchar(8) DEFAULT NULL,
  `Postcode` int(4) DEFAULT NULL,
  `City` varchar(64) DEFAULT NULL,
  `Latitude` double DEFAULT NULL,
  `Longitude` double DEFAULT NULL,
  `ImageUrl` varchar(512) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  `Price` int(8) NOT NULL,
  `Payout` int(8) NOT NULL,
  `GrossPrice` int(6) NOT NULL,
  `NetPrice` int(6) NOT NULL,
  `Area` int(5) NOT NULL,
  `GroundArea` int(5) NOT NULL,
  `Rooms` int(2) NOT NULL,
  `Year` int(4) NOT NULL,
  `PriceChange` int(11) NOT NULL,
  `FirstFoundOn` datetime NOT NULL,
  `SubmittedOn` datetime NOT NULL,
  `LastFoundOn` datetime NOT NULL,
  `FoundAt` varchar(256) DEFAULT NULL,
  `Validated` tinyint(1) NOT NULL,
  `BrokerId` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `Archived` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`Id`),
  UNIQUE KEY `Url` (`Url`),
  KEY `IX_FK_PropertyBroker` (`BrokerId`),
  KEY `UrlIndex` (`Url`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Triggers `Properties`
--
DROP TRIGGER IF EXISTS `Event_Submitted_Trigger`;
DELIMITER //
CREATE TRIGGER `Event_Submitted_Trigger` AFTER INSERT ON `Properties`
 FOR EACH ROW BEGIN
 INSERT INTO `Events` VALUES(UUID(), 'PropertySubmitted', NOW(), NEW.Id);
END
//
DELIMITER ;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `Events`
--
ALTER TABLE `Events`
  ADD CONSTRAINT `Events_ibfk_1` FOREIGN KEY (`PropertyId`) REFERENCES `Properties` (`Id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Constraints for table `Properties`
--
ALTER TABLE `Properties`
  ADD CONSTRAINT `Properties_ibfk_2` FOREIGN KEY (`BrokerId`) REFERENCES `Brokers` (`Id`) ON DELETE NO ACTION ON UPDATE NO ACTION; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:38:47.693

假设以下结构：

```
CREATE TABLE Properties (
    id         INT,
    url        VARCHAR(100),
    lastFound  DATETIME,
    UNIQUE (url)
) ;

CREATE TABLE Events (
    id         VARCHAR(36),
    type       VARCHAR(20),
    t          DATETIME,
    propertyId INT
) ; 
```

这是一个工作触发器：

```
DELIMITER $$
CREATE TRIGGER Event_Submitted_Trigger AFTER INSERT ON Properties 
FOR EACH ROW BEGIN
    INSERT INTO Events VALUES( UUID(), 'PropertySubmitted', NOW(), new.Id);
END $$
DELIMITER ; 
```

[在这里](http://sqlfiddle.com/#!2/7321d/1)查看它的实际应用。注意`NOW()+SLEEP(1)`hack，只是为了获得显着的结果而延迟执行（`SLEEP()`如果没有被中断，则返回 0）。

# html - 如何使用 CSS 展平复选框？

> ID：15502652
> 
> 赞同：1
> 
> 时间：2013-03-19T14:47:17.093
> 
> 标签：html, css, checkbox

我正在使用以下 CSS 在表单上展平我的文本框和文本区域：

```
textarea, input[type=text], select {
    border: 1px solid #B5B8C8;
} 
```

我现在想包括复选框..我认为这可以解决问题

```
textarea, input, select {
    border: 1px solid #B5B8C8;
} 
```

在Firefox中它似乎没有任何区别。在 IE 9/10 中，我在复选框周围出现了一个奇怪的边框（而不是更改复选框本身。

关于如何使复选框模仿文本框和文本区域以摆脱 3d 影响的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:58:39.050

没有跨浏览器的 CSS 唯一解决方案来规范化表单元素。对于适用于现代浏览器的非 JS 解决方案，请查看[这篇 CSS ninja 文章](http://www.thecssninja.com/css/custom-inputs-using-css)。否则，您最好的选择是[Uniform](http://uniformjs.com/)之类的东西，它会为您完成艰苦的工作，并且会退回到禁用 JavaScript 的常规表单元素。

使用原生表单元素及其样式（尤其是在移动设备上）的好处是巨大的。也就是说，复选框和单选按钮的自定义样式（而不是选择框/日期选择器等）在我的测试中似乎工作得很好。

# c# - 如何动态计算 ADO.NET DataAdapter 的最佳 UpdateBatchSize

> ID：15502657
> 
> 赞同：2
> 
> 时间：2013-03-19T14:47:24.957
> 
> 标签：c#, ado.net

我的项目中有一个方法可以使用 ADO.NET DataAdapter 更新我的 SQL 表。

现在这些表中的一些可能非常大，可能有 5000 行，而一些只包含几行数据。我想要做的是根据 DataTable 的大小自动计算每个表的最佳 UpdateBatchSize。

到目前为止，我采取的方法是使用以下扩展方法：

```
public static void SetBatchUpdateSize(this DbDataAdapter adapter, int rowCount)
{
     if (rowCount <= 5)
     {
         adapter.UpdateBatchSize = 5;
     }
     else if (rowCount <= 1000)
     {
         adapter.UpdateBatchSize = rowCount/2;
     }
     else
     {
         adapter.UpdateBatchSize = 500;
     }
 } 
```

这确实有效，但我似乎在较小的表上受到了性能影响。

为了完整起见，这是我在适配器上设置大小的方式：

```
var db = dbAccessLayer.CreateConnection();

try
{
     adapter.SelectCommand.Connection = db;
     adapter.SelectCommand.Connection.Open();
     adapter.SelectCommand.Transaction = transaction;
     SetTimeout(timeout);
     adapter.SetBatchUpdateSize(dataTable.Rows.Count);
     int result = adapter.Update(Table);
     adapter.SelectCommand.Transaction = null;
     return result;
}
catch (Exception)
{
     dataTable.RejectChanges();
     throw;
} 
```

似乎有很多关于更新批次的性能优势的猜测，但没有关于最佳关系的具体事实。我发现我在低速和质量差的连接上遇到 SQL 更新问题，所以我正在寻找尽可能优化它的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:50:32.867

如果您的 updatebatchsize 比一次更大，那么必须通过网络传输大量数据，因此非常大的 UpdateBatchSize 并没有太大区别。相比之下，较小的尺寸会表现得更好。

# sql-server - 将多个参数添加到 sqlpackage.exe 中的“变量”参数的语法是什么？

> ID：15502659
> 
> 赞同：12
> 
> 时间：2013-03-19T14:47:29.910
> 
> 标签：sql-server, sql-server-data-tools, database-deployment

我正在使用`SqlPackage.exe`我的部署。我已阅读[此处](http://msdn.microsoft.com/en-us/library/hh550080%28v=vs.103%29.aspx)的文档以了解`SqlPackage.exe`.

该文档仅说明了一个变量的语法：

> 为特定于操作的变量指定名称值对；{变量名称}={值}。DACPAC 文件包含有效 SQLCMD 变量的列表。如果没有为每个变量提供值，则会导致错误。

我的问题是文档没有说明如何将多个参数传递给`Variables`参数。例如，我想这样做：

```
sqlpackage.exe ...args go here...  /Variables:VarToOverride=Value1,Var2ToOverride=Value2 
```

有谁知道这个的语法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-19T14:55:08.863

我设法找到了一些有用的东西。

`sqlpackage.exe ...args go here... /Variables:VarToOverride=Value1 /Variables:Var2ToOverride=Value2`

这不完全是我想要的，但它确实有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:45:17.887

您是否尝试使用分号而不是逗号分隔。IE：

```
sqlpackage.exe ...args go here...  /Variables:VarToOverride=Value1;Var2ToOverride=Value2 
```

您的另一个选择是使用发布配置文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-03T04:43:03.850

您可以指定多个参数，如下所示。/p:CreateNewDatabase=True /p:Storage=File /p:DatabaseEdition=Standard /p:DatabaseServiceObjective=S3 /p:DatabaseMaximumSize=50 在每个参数后留出空间。

# php - Codeigniter 通过 CLI 将数组传递给控制器

> ID：15502660
> 
> 赞同：3
> 
> 时间：2013-03-19T14:47:32.687
> 
> 标签：php, codeigniter, parameters, command-line-interface

我需要在命令行上运行我的 CI 脚本之一。我需要将一个数组传递给控制器​​，然后再传递给脚本。这是我现在得到的：

```
$params = array(
    'a' => var1,
    'b' => var2
); 
```

然后运行的cmd是：

```
php index.php process process_opk params 
```

在我的控制器中，只是为了查看阵列如何/是否正确通过，我有：

```
public function index($args) {
    print_r($args);
} 
```

它的输出是`params`一个字符串。

在发送之前我需要先序列化我的数组吗？我猜 CLI 改变了变量通过 CLI 传递的方式，我错了吗？如果有人可以详细说明这一点并展示最佳实践，那就太好了。谢谢！

**更新：**到目前为止我能找到的最佳解决方案是对序列化数据进行 base64_encode 并将其作为长字符串发送。然后在控制器中解码和反序列化并将数组发送到我的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T13:28:05.643

默认情况下，CI 允许使用“az 0-9~%.:_-”字符。base64 生成另一个符号，如 + 和 =。这就是为什么最好使用[rawurlencode](http://www.php.net/manual/function.rawurlencode.php)而不是 base64：

```
exec( 'php index.php controller function '.rawurlencode(serialize($params)) ); 
```

转移和外壳是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-20T13:15:01.943

如果参数的数量不是太多，则可以方便地传递参数，例如...

```
php index.php process process_opk/par1/par2/par3... 
```

并在控制器中

```
<?php

class Process extends CI_Controller {

function __construct() {
    parent::__construct();       
}

public function index()
{
    $this->process_opk();
}

public function process_opk($par1 = -1,$par2 = -1,$par3 = -1)
{
  //process
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T19:27:47.947

> 我猜 CLI 改变了变量通过 CLI 传递的方式，我错了吗？

不。

[https://stackoverflow.com/a/2873015/183254](https://stackoverflow.com/a/2873015/183254)

您的解决方案似乎是最好的路线，尽管不确定 base64 是否必要（尤其是如果您有不稳定的字符，则可能是）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-08T11:04:28.157

要将其传递到带有发布数据的新线程：

```
exec('nohup php index.php controller method ' . rawurlencode($this->input->raw_input_stream) . ' ' . arg2 . ' ' . $arg3 . ' > /dev/null 2>&1 & echo $!', $op); 
```

# java - 如何使用 JMenu 与文本窗格上的内容相同？

> ID：15502663
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:47:39.707
> 
> 标签：java, swing, jframe, jmenu, jmenubar

我正在尝试使用 FileWriter 和 PrintWriter 保存我的文本窗格上的内容。

```
// Save file
    fileItem2.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            System.out.println("Pressed menu item! Save");
            jStyledTextPane.setText("Pressed menu item! Save");
        }
    }); 
```

我已经有一个打开文件的方法，我正在尝试与文本窗格上显示的文本相同。 **这是我的完整代码：**

```
public class CSC9V4TextEditor implements ActionListener {

private JStyledTextPane jStyledTextPane;

private JMenuBar menubar() {

    // Initialising JMenu.
    JMenuBar menubar = new JMenuBar();

    // Creating the Menus.
    JMenu filemenu = new JMenu("File");
    filemenu.add(new JSeparator());

    // Creating the sub Menus.
    JMenuItem fileItem1 = new JMenuItem("Open");
    JMenuItem fileItem2 = new JMenuItem("Save");
    JMenuItem fileItem3 = new JMenuItem("Exit");
    fileItem3.add(new JSeparator());

    // Adding the sub Menus to the File menu.
    filemenu.add(fileItem1);
    filemenu.add(fileItem2);
    filemenu.add(fileItem3);

    // Adding the sub Menus to the Edit menu.
    menubar.add(filemenu);

    // Exit action
    fileItem3.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            System.out.println("Exit");
            System.exit(0);
        }
    });

    // open file
    fileItem1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            JFileChooser chooser = new JFileChooser();
            Component parent = null;
            int returnVal = chooser.showOpenDialog(parent);
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                System.out.println("You chose to open this file: "
                        + chooser.getSelectedFile().getName());
                File file = chooser.getSelectedFile();
                try {
                    BufferedReader br = null;
                    String sCurrentLine;
                    br = new BufferedReader(new FileReader(file
                            .getAbsoluteFile()));
                    while ((sCurrentLine = br.readLine()) != null) {
                        jStyledTextPane.read(br, null);
                    }
                } catch (IOException e1) {
                    System.out.println("problem accessing file"
                            + file.getAbsolutePath());
                }
            }
            // jStyledTextPane.setText("You chose to open this file: "
            // + chooser.getSelectedFile().getName());
        }
    });

    // Save file
    fileItem2.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            System.out.println("Pressed menu item! Save");
            jStyledTextPane.setText("Pressed menu item! Save");
        }
    });

    return menubar;
}

private void initialiseGUI() {

    // Create the frame.
    JFrame frame = new JFrame("CSC9V4 Text Editor");

    // Set the exit button.
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Adding the menu bar to the frame.
    frame.setJMenuBar(menubar());

    // Size the frame.
    frame.setSize(600, 600);

    // Show the frame.
    frame.setVisible(true);

    jStyledTextPane = new JStyledTextPane();

    // Adding the JStyledTextPane to the frame.
    frame.add(jStyledTextPane);
}

@SuppressWarnings("unused")
public static void main(String[] args) {
    CSC9V4TextEditor TextEditor = new CSC9V4TextEditor();
}

public CSC9V4TextEditor() {
    initialiseGUI();
}

@Override
public void actionPerformed(ActionEvent e) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:52:31.227

要使用正确的序列化方式将内容保存在文件`JTextPane`中`serialize`。当您想再次加载内容时，您可以将其显示在. 考虑下面给出的代码：`DefaultStyledDocument``JTextPane``deserialize``JTextPane`

```
import javax.swing.*;
import javax.swing.text.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;

public class SaveEditor extends JFrame implements ActionListener{
     public static final String text = "As told by Wikipedia\n"
    +"Java is a general-purpose, concurrent, class-based, object-oriented computer programming language."
    + "It is specifically designed to have as few implementation "
    + "dependencies as possible. It is intended to let application developers write once, run anywhere (WORA), "
    + "meaning that code that runs on one platform does not need to be recompiled to run on another. "
    + "Java applications are typically compiled to bytecode (class file) that can run on any Java virtual "
    + "machine (JVM) regardless of computer architecture. Java is, as of 2012, one of the most popular programming "
    + "languages in use, particularly for client-server web applications, with a reported 10 million users.";
    JTextPane pane ;
    DefaultStyledDocument doc ;
    StyleContext sc;
    JButton save;
    JButton load;
    public static void main(String[] args) 
    {
        try 
        {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
            SwingUtilities.invokeLater(new Runnable()
            {
                public void run()
                {
                    SaveEditor se = new SaveEditor();
                    se.createAndShowGUI();
                }
            });
        } catch (Exception evt) {}
    }
    public void createAndShowGUI()
    {
        setTitle("TextPane");
        sc = new StyleContext();
        doc = new DefaultStyledDocument(sc);
        pane = new JTextPane(doc);
        save = new JButton("Save");
        load = new JButton("Load");
        JPanel panel = new JPanel();
        panel.add(save);panel.add(load);
        save.addActionListener(this);load.addActionListener(this);
        final Style heading2Style = sc.addStyle("Heading2", null);
        heading2Style.addAttribute(StyleConstants.Foreground, Color.red);
        heading2Style.addAttribute(StyleConstants.FontSize, new Integer(16));
        heading2Style.addAttribute(StyleConstants.FontFamily, "serif");
        heading2Style.addAttribute(StyleConstants.Bold, new Boolean(true));
        try 
        {
            doc.insertString(0, text, null);
            doc.setParagraphAttributes(0, 1, heading2Style, false);
        } catch (Exception e) 
        {
            System.out.println("Exception when constructing document: " + e);
            System.exit(1);
        }
        getContentPane().add(new JScrollPane(pane));
        getContentPane().add(panel,BorderLayout.SOUTH);
        setSize(400, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    public void actionPerformed(ActionEvent evt)
    {
        if (evt.getSource() == save)
        {
            save();
        }
        else if (evt.getSource() == load)
        {
            load();
        }
    }
    private void save()//Saving the contents .
    {
        JFileChooser chooser = new JFileChooser(".");
        chooser.setDialogTitle("Save");
        int returnVal = chooser.showSaveDialog(this);
        if(returnVal == JFileChooser.APPROVE_OPTION) 
        {
            File file = chooser.getSelectedFile();
            if (file != null)
            {
                FileOutputStream fos = null;
                ObjectOutputStream os = null;
                try
                {
                    fos = new FileOutputStream(file);
                    os = new ObjectOutputStream(fos);
                    os.writeObject(doc);
                    JOptionPane.showMessageDialog(this,"Saved successfully!!","Success",JOptionPane.INFORMATION_MESSAGE);
                }
                catch (Exception ex)
                {
                    ex.printStackTrace();
                }
                finally
                {
                    if (fos != null)
                    {
                        try
                        {
                            fos.close();
                        }
                        catch (Exception ex){}

                    }
                    if (os != null)
                    {
                        try
                        {
                            os.close();
                        }
                        catch (Exception ex){}

                    }
                }
            }
            else 
            {
                JOptionPane.showMessageDialog(this,"Please enter a fileName","Error",JOptionPane.ERROR_MESSAGE);
            }
        }
    }
    private void load()//Loading the contents
    {
        JFileChooser chooser = new JFileChooser(".");
        chooser.setDialogTitle("Open");
        chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
        int returnVal = chooser.showOpenDialog(this);
        if(returnVal == JFileChooser.APPROVE_OPTION) 
        {
            File file = chooser.getSelectedFile();
            if (file!= null)
            {
                FileInputStream fin = null;
                ObjectInputStream ins = null;
                try
                {
                    fin = new FileInputStream(file);
                    ins = new ObjectInputStream(fin);
                    doc = (DefaultStyledDocument)ins.readObject();
                    pane.setStyledDocument(doc);
                    JOptionPane.showMessageDialog(this,"Loaded successfully!!","Success",JOptionPane.INFORMATION_MESSAGE);
                }
                catch (Exception ex)
                {
                    ex.printStackTrace();
                }
                finally
                {
                    if (fin != null)
                    {
                        try
                        {
                            fin.close();
                        }
                        catch (Exception ex){}

                    }
                    if (ins != null)
                    {
                        try
                        {
                            ins.close();
                        }
                        catch (Exception ex){}

                    }
                }
            }
            else 
            {
                JOptionPane.showMessageDialog(this,"Please enter a fileName","Error",JOptionPane.ERROR_MESSAGE);
            }
        }
    }

} 
```

# c# - 是否可以使用按钮来运行 cpu 密集型代码，然后使用 c# 和 asp.net 为 Web 应用程序显示结果

> ID：15502665
> 
> 赞同：0
> 
> 时间：2013-03-19T14:47:45.043
> 
> 标签：c#, asp.net, cpu-usage

我目前正在尝试创建一个具有主页的应用程序。在这个主页上有一个按钮，它将运行 CPU 密集型代码，然后显示结果。正如我在标题中所述，该应用程序使用的是 ASP.NET 和 C#，而不是我看过的其他一些网站似乎建议的 Windows 窗体。

我对 C# 比较陌生，并且没有在任何其他编程语言中尝试过。我也没有要显示的代码，因为我真的不知道如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:15:20.370

我认为“CPU密集型”是指该过程需要很长时间才能完成？在 Web 应用程序中，任何需要花费大量时间的事情都应该异步完成。在 HTTP 的请求/响应模型中，最好（出于多种原因）快速响应客户端发出的请求。

对于长时间运行的进程，我所说的“异步”并不是指使用 AJAX，因为这仍然是一个请求/响应，就像任何其他的一样。

在这种情况下，我所说的“异步”是指您希望有一个单独的服务器端进程来处理 CPU 密集型任务，而 Web 应用程序只是将任务排队等待运行并检查任务的状态人们寻找它。然后它可以在完成后报告任务的结果。

因此，架构的基本概述将是这样的：

1.  Web 应用程序中的用户单击按钮以“启动任务”。
2.  Web 应用程序将一条记录插入到数据库表中，指示任务已排队（可能带有排队者的用户 ID、时间戳，以及您需要知道的任何其他信息）。
3.  一个单独的计划应用程序（很可能是控制台应用程序或 Windows 服务）一直在运行。（无论是在始终运行的 Windows 服务中使用计时器，还是作为控制台应用程序计划反复运行，例如每隔几分钟运行一次。）此应用程序检查数据库表中是否有新的排队任务。
4.  当应用程序看到一个任务时，它会在数据库中将其标记为“已启动”（因此应用程序的后续运行不会尝试并行运行相同的任务）并开始运行它。
5.  Web 应用程序可以在数据库表中看到任务的状态并将其显示给请求它的用户，因此用户可以看到它仍在运行。
6.  任务完成后，更新数据库表中的任务记录，并将结果存储在某处。（取决于结果是什么。数据？在数据库中。某种报告文件？另存为文件。这完全取决于你。）
7.  Web 应用程序可以看到任务的完成状态和记录的任何其他信息，用户可以请求查看任务的输出。

这里要记住的主要是将职责分解为**两个应用程序**。Web 应用程序的目的是提供用户界面。Web 应用程序不适合长时间运行的后台任务。因此，该责任被转移到更适合该目的的单独应用程序中。这两个应用程序通过共享数据库进行协调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:52:00.073

它可以在服务器上运行 CPU 密集型代码，是的。请注意，这通常会阻止您的 Web 应用程序在合理的时间内发送响应，并且 Web 应用程序可能看起来被冻结了。

您想到了哪种类型的 CPU 密集型代码？有很多方法可以处理这种情况。

# android - 存在 Phonegap 速度问题的 Wordpress

> ID：15502666
> 
> 赞同：0
> 
> 时间：2013-03-19T14:47:50.190
> 
> 标签：android, ios, wordpress, cordova

我在 Apple 和 Android 市场都有一个 Phonegap 应用程序，并且在应用程序的速度方面收到了一些负面评价。为了减少页面加载时间，我对我的 Wordpress 网站进行了许多调整，但导航时仍然存在一些滞后。

我的应用程序在应用程序的第一页上进行了一次 JSON 调用，然后它“启动”了 Wordpress 站点。我使用 Wordpress 的原因是能够从 Wordpress 管理员更新页面。它现在只是内容，所以没有大图像等。

我可以做些什么来加快 Wordpress 网站的速度？或者在 Wordpress 之外是否有其他解决方案允许我更新应用程序内的内容，而无需重新打包应用程序并提交它？

# c# - ASP.NET MVC 将字段作为 XML 字符串提交

> ID：15502668
> 
> 赞同：0
> 
> 时间：2013-03-19T14:47:52.903
> 
> 标签：c#, asp.net-mvc

我正在尝试通过 API 而不是通常的`<form action="http://www.mysite.com" method="post">`.

API 接受一个 XML 字符串作为参数，例如：`<Data><firstnamex>Hello</firstnamex><lastnamex>World</lastnamex></Data>`.

我会这样做的 Web 表单中的旧方法是

```
String dataXml = "<Data>";
dataXml += "<firstnamex>" + firstnamex.Text + "</firstnamex>";
dataXml += "<lastnamex>" + lastnamex.Text + "</lastnamex>";
dataXml += "</Data>"; 
```

进而

```
mainApi.Service1 ws = new mainApi.Service1();
string retVal = ws.InsertRecord(dataXml); 
```

由于我不能`firstnamex.Text`像在 Web 窗体中那样抓住控件，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:55:38.353

您需要一个 ViewModel 来代表您在此“页面”上从用户那里收集的内容，以便完成调用。所以首先，创建一个 ViewModel 来保存这些东西。这个 ViewModel 还应该包含实际调用 DAL 的代码。让你的控制器太清楚需要对实际数据做什么是一个坏主意。只需让它知道在 ViewModel 上调用哪个方法，以及如何处理返回值（如果有）。

```
public class YourViewModel 
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    // other fields here as needed.

    public YourViewModel() 
    {
        // you can put any field defaults you need here
    }

    public string InserRecord() 
    {
        String dataXml = "<Data>";
        dataXml += "<firstnamex>" + firstnamex.Text + "</firstnamex>";
        dataXml += "<lastnamex>" + lastnamex.Text + "</lastnamex>";
        dataXml += "</Data>";
        mainApi.Service1 ws = new mainApi.Service1();
        return ws.InsertRecord(dataXml);
    }
}

public class YourController 
{
    public ActionResult YourAction() 
    {
        var viewModel = new YourViewModel();
        return View(viewModel);
    }

    [HttpPost]
    public ActionResult YourAction(YourViewModel viewModel) 
    {
        var resultFromInsert = viewModel.InserRecord();
        // redirect here based on string returned above, or whatever.
    }
} 
```

我喜欢我的模特胖；我的控制器瘦；我的观点完全迟钝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:54:35.343

它看起来像这样......

```
[HttpPost]
public ActionResult YourAction(YourModel model)
{
    String dataXml = "<Data>";
    dataXml += "<firstnamex>" + model.FirstName + "</firstnamex>";
    dataXml += "<lastnamex>" + model.LastName + "</lastnamex>";
    dataXml += "</Data>";

    // ...

    return View(model); // or redirect or whatever
} 
```

# apache-flex - Flex & nginx：Channel.Call.Failed

> ID：15502670
> 
> 赞同：1
> 
> 时间：2013-03-19T14:47:58.640
> 
> 标签：apache-flex, nginx, tomcat7, remoteobject, graniteds

我创建了一个 Web 应用程序，这是架构：

*   Tomcat7 部署在 Amazon EC2 上
*   花岗岩 DS
*   nginx 通过 tomct7 端口 8181 重定向 HTTPS
*   在安全通道上使用 RemoteObject 的 Flex 应用程序。

有时，也许当请求需要很长时间时，在 Flex 中执行 RemoteObject 会触发此错误：

```
faultCode:Channel.Call.Failed faultString:'error' faultDetail:'NetConnection.Call.Failed: HTTP: Status 504' 
```

但在大多数情况下，Remote 对象的响应是正确的。

你能告诉我 Nginx 是否可以阻止某些东西吗？或者如果 BlazeDs 有一个 tomeout？任何线索？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:06:30.677

我们已经有这个问题很长时间了......问题是我们无法找到一种可重复的方法来强制它断开连接。

这是我能找到的最全面的尝试列表：http: [//www.bopit.in.th/2009/10/14/flex-channel-connect-failed-error-netconnection-call-失败-http-status-200/](http://www.bopit.in.th/2009/10/14/flex-channel-connect-failed-error-netconnection-call-failed-http-status-200/)

我们已经尝试了其中的几个解决方案，似乎我们正在减少客户端断开连接。

AVG 的链接扫描器也可能会在请求离开浏览器时劫持请求，然后将其丢失在某个地方。我们店里有一台机器在使用 IE 时会断开连接，自从卸载 AVG 后，这台机器上再也没有发生过这种情况。

您可以检查的另一件事是套接字超时： [NetConnection.Call.Failed 在 Flex3/Tomcat/BlazeDS/Spring 中偶尔发生](https://stackoverflow.com/questions/3145065/netconnection-call-failed-happening-sporadically-in-flex3-tomcat-blazeds-spring)

这是 adobe 论坛上关于这个问题的一个主题： [http ://forums.adobe.com/thread/552133](http://forums.adobe.com/thread/552133)

# javascript - 选择自动完成建议时如何提交表单

> ID：15502671
> 
> 赞同：2
> 
> 时间：2013-03-19T14:47:58.393
> 
> 标签：javascript, jquery, ruby-on-rails, jquery-ui

我正在使用 jquery-ui 自动完成功能我没有得到我需要的东西。我有自动完成工作，但现在这是它的行为。

1.  用户开始输入并给出建议
2.  用户找到需要的建议并按 Enter 将建议放入文本框中
3.  用户按“输入”提交表单

我想结合 #2 和 #3 中发生的事情，以便用户做出选择，按“输入”，然后提交表单。

我发现了一些[类似问题的帖子](https://stackoverflow.com/questions/6619500/jquery-ui-autocomplete-submitting-form-onclick-of-item-from-dropdown-list)，但我无法找到适合我的解决方案。我认为这应该工作......但它没有。

HTML

```
 <form accept-charset="UTF-8" action="/contacts" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
        <input id="search" name="search" size="30" type="text" />
        <input class="button medium blue1" type="submit" value="Search" /> 
```

Javascript

```
 $(document).ready(function() {
      $("#search").autocomplete({
        source: "/search_suggestions",
        autoFocus: true,
        select: function(event, ui) {
                        $(event.target).val(ui.item.value);
                        $('#search').submit();
                        return false;
                    }
        });
      }); 
```

我究竟做错了什么？

更新：谢谢大家的快速回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:56:16.057

您正在尝试在文本框而不是表单上运行搜索！

```
$('#search').closest("form").submit(); 
```

或在表单中添加一个 id 并替换

```
$('#searchFormsIdHere').submit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:56:51.100

您必须正确指定表单 ID：

```
<form accept-charset="UTF-8" action="/contacts" method="get" id="searchform">
  ...
</form> 
```

```
$(document).ready(function() {
  $("#search").autocomplete({
    source: "/search_suggestions",
    autoFocus: true,
    select: function(event, ui) {
                    $(event.target).val(ui.item.value);
                    $('#searchform').submit();
                    return false;
                }
    });
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T14:57:33.557

将表单的 id 设置为`searchFormsIdHere`

```
$(document).ready(function() {
      $("#search").autocomplete({
        source: "/search_suggestions",
        autoFocus: true,
         select: function (event, ui) {
     var selectedObj = ui.item;              
      $("#search").val(selectedObj.value);
     $('#searchFormsIdHere').submit();
        });
      }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T14:57:56.907

我认为你可以更换

```
$('#search').submit(); 
```

和

```
$('#search').parents('form').submit(); 
```

# java - Hibernate OneToMany 关系内部连接

> ID：15502673
> 
> 赞同：0
> 
> 时间：2013-03-19T14:48:04.853
> 
> 标签：java, hibernate, join, one-to-many

我试图根据 OneToMany 关系中子类的 ID 属性简单地过滤掉结果，但是 Hibernate (4.1.9.Final) 正在生成左外连接而不是内连接，因此返回的结果我没有'不想要。

**模型：**

家长：

```
@Entity
@Table(name = "CATEGORY")
public class Category
{
    @Id
    @Column(name = "CATEGORYID")
    private int ID;

    @Column(name = "CATEGORYNAME")
    private String name;

    @OneToMany(fetch = FetchType.EAGER)
    @JoinColumn(name = "CATEGORYID")
    @Filter(name = "TEST_RUN_ID_FILTER")
    private Collection<TestCase> testCases
...
} 
```

孩子：

```
@Entity
@Table(name = "TESTCASE_NEW")
@FilterDef(name = "TEST_RUN_ID_FILTER", defaultCondition = "TESTRUNID in (:IDS)", parameters = { @ParamDef(name = "IDS", type = "int") })
public class TestCase
{
    @Id
    @Column(name = "TESTCASEID")
    private int ID;

    @Column(name = "TESTCASENAME")
    private String name;

    @Column(name = "STATUS")
    private String status;

    @Column(name = "TESTRUNID")
    private int testRunId;
...
    } 
```

**道：**

```
public List<Category> getAllCategoriesForTestRuns(List<Integer> testRunIDs)
    {
        Session session = getSession();
        session.enableFilter("TEST_RUN_ID_FILTER")
                .setParameterList("IDS", testRunIDs);
        Query query = session.createQuery("FROM " + Category.class.getSimpleName());
        List<Category> result = query.list();
        return resul2t;
    } 
```

如何告诉 Hibernate 使用内部联接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:56:50.267

您可以尝试以下方法：

```
select c from Category c inner join c.testCases tc 
```

# java - 如何处理 ArrayListAdapter 的 onListItemClick 内的项目？

> ID：15502674
> 
> 赞同：1
> 
> 时间：2013-03-19T14:48:07.820
> 
> 标签：java, android, arraylist

我想创建一个带有名称的列表视图。点击每个名字会给我不同的等级。所有名称和等级都由数据库获取并存储为 json 格式，该格式通过具有意图的活动传递：

```
public class StudentList extends ListActivity {
public void onCreate(Bundle icicle) {
super.onCreate(icicle);

/**get the intent*/
Intent studentIntent = getIntent();

/**retrieve the string extra passed*/
ArrayList<String> nameRecd = studentIntent.getStringArrayListExtra("name");
ArrayList<String> gradeRecd = studentIntent.getStringArrayListExtra("grade");
try {
    JSONArray jsonData = new JSONArray(getIntent().getStringExtra("data"));
    Log.i("json review:", "Check out my JSON, looks like his JMother");

    ArrayAdapter<String> adapter = new ArrayAdapter<String>
    (this, android.R.layout.simple_list_item_1, nameRecd);
    setListAdapter(adapter);

} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

}

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
String item = (String) getListAdapter().getItem(position);
int pos = position;

Toast.makeText(this, item + " selected" + "Grade:"  , Toast.LENGTH_LONG).show();
} 
```

}

因此，我希望每个选定的姓名都能够敬酒或处理同一职位的其他成绩，这样我就可以为特定学生建立某种个人资料，并能够通过单击学生姓名来访问它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:19:50.600

问题解决了在 onListItemClick 内启动相同的意图...

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
String item = (String) getListAdapter().getItem(position);

/**get the intent*/
Intent studentIntent = getIntent();

/**retrieve the data extra passed*/
ArrayList<String> names = new ArrayList<String>();
ArrayList<String> grades = new ArrayList<String>();
JSONObject json_data = new JSONObject();
try {
    JSONArray jARR = new JSONArray(getIntent().getStringExtra("data"));
    Log.i("json review:", "Check out my JSON, looks like his JMother");
    for(int i=0;i<jARR.length();i++){
        json_data = jARR.getJSONObject(i);
        names.add((json_data.getString("name"))) ;
        grades.add((json_data.getString("grade"))) ;

    }

} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# javascript - jqGrid - 单元格内的迷你百分比条

> ID：15502677
> 
> 赞同：1
> 
> 时间：2013-03-19T14:48:23.630
> 
> 标签：javascript, jquery, jqgrid

我不知道如何正确称呼它们 - 比率条，百分比条？

例如，我可以提供这个：

[http://mleibman.github.com/SlickGrid/examples/example2-formatters.html](http://mleibman.github.com/SlickGrid/examples/example2-formatters.html)

看专栏`compelete %`。

如何在 jqGrid 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:07:12.583

如果您查看 SlickGrid 演示的代码，您将看到它使用[slick.formatters.js](http://mleibman.github.com/SlickGrid/slick.formatters.js)`formatter: Slick.Formatters.PercentCompleteBar`中定义的。的代码很清楚。如果这是您需要的，您可以将代码重写为jqGrid的[自定义格式化程序。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)`PercentCompleteBarFormatter`

[答案](https://stackoverflow.com/a/4133016/315935)提供了百分比条的紧密实现。可能这就是你需要的。答案已经够老了。您可能需要进行一些小的修改以包括对新版本 Web 浏览器的支持。

# .net - BackgroundWorker 和 ManualResetEvent

> ID：15502683
> 
> 赞同：0
> 
> 时间：2013-03-19T14:48:48.323
> 
> 标签：.net, multithreading, backgroundworker, manualresetevent

任务。

我有一种方法可以在内部运行两个长期功能。

我不是在这里谈论锁定对象。这些函数是独立的，只有在只读中使用的相同参数。

我想要一个函数在线程内运行。

```
private static ManualResetEvent mre = new ManualResetEvent(false);
private Result result;

{
 BackgroundWorker bw = new BackgroundWorker();
 bw.DoWork += new DoWorkEventHandler(bw_DoWork);
 bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
 bw.RunWorkerAsync(new BackgroundWorkerArgument(bitmap, image));

Rectangle rectangle = DetectRectangle(bitmapClone));
mre.WaitOne();
mre.Reset();

<another code, dont bother>
}

void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        result= (Result)e.Result;
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorkerArgument argument = (BackgroundWorkerArgument)e.Argument;
        e.Result = CreateResult(argument.Bitmap, argument.Image);
        mre.Set();
    } 
```

问题。

`<another code, dont bother>`我这样做后立即运行`Set()`。没关系。

但`bw_RunWorkerCompleted`在那之后运行。这意味着结果变量为空，但我希望它包含线程函数的结果。

如何返工我的代码 -`result= (Result)e.Result`必须在下一行之前运行`WaitOne()`？

如果它不可能，`BackgroundWorker`也许我需要使用线程？我正在使用.NET 2.0。

# qa - QC项目之间的任何关联？

> ID：15502685
> 
> 赞同：0
> 
> 时间：2013-03-19T14:48:53.300
> 
> 标签：qa, hp-quality-center

我想将一个 QC 项目与另一个相关联（例如手动测试和自动化测试）。

我想知道两个 QC 项目（在同一个域上）之间可以有什么样的关联，所以我不必维护两个项目然后复制粘贴我需要的东西，例如公共存储库等。

提前致谢！

PS。我使用 QC 11.00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T18:49:15.800

作为基本规则; 您希望在该项目中保留一个项目的所有项目数据；并且，您希望该项目的项目数据是唯一的并且与所有其他项目分开。

话虽这么说...如果您真的想这样做（并且能够说服 QC 主题专家这是一个好主意？），那么使用附加代码来修改工作流程应该是一个相对简单的事情接口与另一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T14:41:47.740

我不确定你能做到这一点。QC 中的项目应该是一个独立的实体，也就是说，您无法（据我所知）在项目之间自动移动数据。

当然，您可以复制和粘贴数据，以及创建一个以另一个为基础的项目，但这可能不是您想要的。

我宁愿在同一个项目中进行手动测试和自动化，我认为这更有意义。关键是项目应该识别**测试对象**，而不是**测试方法**——后者可以在测试计划中做得更好，您在创建测试时指定测试类型。

这样，您将在同一个项目中拥有测试对象的所有缺陷和测试报告，这将使跟踪正在发生的事情变得更加容易。

# javascript - chrome.webRequest 不工作？

> ID：15502691
> 
> 赞同：24
> 
> 时间：2013-03-19T14:49:05.883
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试在我的扩展中实现 chrome.webRequest API，但由于某种原因，无论我做什么，它都无法正常工作。有人可以发布使用示例吗？或纠正我的错误？基本上我要做的是从响应中截取收到的标头。

这是 onBeforeSendHeaders 的一个实现，但我也想使用 OnHeadersRecieved ：

```
var requestFilter = {
    urls: [ "<all_urls>" ]
  },
  // The 'extraInfoSpec' parameter modifies how Chrome calls your
  // listener function. 'requestHeaders' ensures that the 'details'
  // object has a key called 'requestHeaders' containing the headers,
  // and 'blocking' ensures that the object your function returns is
  // used to overwrite the headers
  extraInfoSpec = ['requestHeaders','blocking'],
  // Chrome will call your listener function in response to every
  // HTTP request
  handler = function( details ) {
    alert(details);
    var headers = details.requestHeaders,
      blockingResponse = {};

    // Each header parameter is stored in an array. Since Chrome
    // makes no guarantee about the contents/order of this array,
    // you'll have to iterate through it to find for the
    // 'User-Agent' element
    for( var i = 0, l = headers.length; i < l; ++i ) {
      if( headers[i].name == 'User-Agent' ) {
        headers[i].value = '>>> Your new user agent string here <<<';
        break;
      }
      // If you want to modify other headers, this is the place to
      // do it. Either remove the 'break;' statement and add in more
      // conditionals or use a 'switch' statement on 'headers[i].name'
    }

    blockingResponse.requestHeaders = headers;
    return blockingResponse;
  };

chrome.webRequest.onBeforeSendHeaders.addListener( handler, requestFilter, extraInfoSpec ); 
```

这是我的清单文件：

```
 {
   "background_page": "iRBackground.html",
   "browser_action": {
      "default_icon": "Off.png",
      "popup": "iRMenu.html"
   },
   "content_scripts": [ {
      "js": [ "Content.js" ],
      "matches": [ "http://*/*" ],
      "run_at": "document_start"
   } ],
   "description": "***",
   "icons": {
      "128": "On128x128.png",
      "16": "On.png",
      "48": "On48x48.png"
   },
   "key": "****",
   "manifest_version": 2,
   "name": "***",
   "permissions": [ "tabs", "notifications", "unlimitedStorage", "webRequest", “webRequestBlocking”, “&lt;all_urls>”],
   "update_url": "***/Chrome/UpdateVersion.xml",
   "version": "1.3"
} 
```

我从 Chrome 得到的错误是：`Uncaught TypeError: Cannot read property 'onBeforeSendHeaders' of undefined`

有人看错了吗？？？谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-19T18:22:46.703

好吧，作为一个使用示例，我可以给你这个工作代码。我这样写是因为另一种方式对我来说似乎倒退了，但这只是我个人的喜好，它们应该都一样。

**显现**

```
{
  "name": "Chrome webrequest test",
  "version": "0.1",
  "description": "A test for webrequest",
  "manifest_version": 2,
  "permissions": [
    "<all_urls>","webRequest","webRequestBlocking"
  ],
  "background": {
    "scripts": ["bgp.js"],
    "persistent": true
  }
} 
```

**bgp.js**

```
chrome.webRequest.onBeforeSendHeaders.addListener(function(details){
  //console.log(JSON.stringify(details));
  var headers = details.requestHeaders,
  blockingResponse = {};

  // Each header parameter is stored in an array. Since Chrome
  // makes no guarantee about the contents/order of this array,
  // you'll have to iterate through it to find for the
  // 'User-Agent' element
  for( var i = 0, l = headers.length; i < l; ++i ) {
    if( headers[i].name == 'User-Agent' ) {
      headers[i].value = '>>> Your new user agent string here <<<';
      console.log(headers[i].value);
      break;
    }
    // If you want to modify other headers, this is the place to
    // do it. Either remove the 'break;' statement and add in more
    // conditionals or use a 'switch' statement on 'headers[i].name'
  }

  blockingResponse.requestHeaders = headers;
  return blockingResponse;
},
{urls: [ "<all_urls>" ]},['requestHeaders','blocking']); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-22T22:00:28.227

我刚刚在我的扩展中修复了这个问题：[https](https://github.com/devinrhode2/tweet-bar) ://github.com/devinrhode2/tweet-bar 我需要做的是使用`chrome.webRequest.onBeforeSendHeaders.addListener`，但这也意味着添加`webRequest, webRequestBlocking`权限.. 使用 declarativeWebRequest 会更好，但是这个项目对我来说没那么重要。

关键事项：

*   `manifest.json "background": { "persistent": true,`
*   `"permissions": [ "webRequest", "webRequestBlocking",`

当您在 manifest.json 中进行这些更改时，您实际上应该考虑重新安装扩展，以确保更改被拾取。

这是我的过滤器代码。你的不应该是相同的。请参阅此处的文档[https://developer.chrome.com/extensions/webRequest](https://developer.chrome.com/extensions/webRequest)

```
chrome.webRequest.onBeforeSendHeaders.addListener((req) => {
  console.log('onBeforeSendHeaders');
  req.requestHeaders.forEach(function(header, index){
    console.log(header.name+':', header.value);
    if (headers[header.name.toLowerCase()]) {
      console.log('set header:'+header.name, 'to:'+headers[header.name.toLowerCase()]);
      req.requestHeaders[index].value = headers[header.name.toLowerCase()]
    }
  })
  return {requestHeaders: req.requestHeaders};
},{
  urls: ['https://twitter.com/i/tweet/create'],
  types: ["xmlhttprequest"]
},[
  'blocking',
  'requestHeaders'
]); 
```

我还将这些标头添加到我的 xhr 请求中，这并没有什么坏处，让您看起来更类似于普通站点：

```
 //add headers:
  var headers = {
    'content-type': 'application/x-www-form-urlencoded',
    accept: 'application/json, text/javascript, */*; q=0.01',
    origin: 'https://twitter.com',
    referer: 'https://twitter.com/',
    'x-requested-with': 'XMLHttpRequest'
  };
  console.log('change')
  Object.keys(headers).forEach((header) => {
    postXhr.setRequestHeader(header, headers[header]);
  }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-17T07:18:19.980

这是清单配置

```
"permissions": [ 
    "webRequestBlocking"
    ,"webRequest"
    ,"http://*.beibei.com/*"
],
"background" : {
    "page"       : "xxx.html",
    "persistent" : true
} 
```

这是javascript演示代码

```
$( function() {
    // add event listners
    chrome.webRequest.onBeforeRequest.addListener(
        function(details) { 
            console.log('onBeforeRequest', details);
        },
        {urls: ["http://www.beibei.com/"]},
        []
    );

    chrome.webRequest.onBeforeSendHeaders.addListener(
        function(details) {
            console.log('onBeforeSendHeaders', details);
        },
        {urls: ["http://www.beibei.com/"]},
        ["requestHeaders"]
    );

    chrome.webRequest.onCompleted.addListener( 
        function(details) {
            console.log('onCompleted', details);
        },
        {urls: ["http://www.beibei.com/"]},
        []
    );

    // do a GET request, so that relative events will be fired, need jquery here
    $.get('http://www.beibei.com/');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-30T08:10:18.247

在 manifest.json 中添加扩展所需的权限，您可能不需要 webRequestBlocking，具体取决于您想要做什么。

```
...
"permissions": [
    "<all_urls>","webRequest","webRequestBlocking" 
  ],"background": {
    "scripts": ["background.js"],
    "persistent": true
}
... 
```

在 manifest.json 文件中添加扩展所需的权限后，请确保单击**更新按钮**，如果这不起作用或浏览器没有更新按钮，则**重新安装扩展**。

# scala - 为什么`Source.fromFile(...).getLines()`在我迭代之后是空的？

> ID：15502693
> 
> 赞同：2
> 
> 时间：2013-03-19T14:49:24.387
> 
> 标签：scala, side-effects

(line <-lines) 如此具有破坏性，这让我感到非常惊讶！它完全展开线迭代器。因此，运行以下代码段将使 size = 0 ：

```
 val lines = Source.fromFile(args(0)).getLines()
  var cnt = 0
  for (line <- lines) {
    cnt = readLines(line, cnt)
  }
  val size = lines.size 
```

像这样隐藏的副作用是正常的 Scala 实践吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T14:55:47.917

`Source.getLines()`返回一个迭代器。对于每个迭代器，如果您调用诸如`foreach`上述或`map`、`take`、`toList`等的批量操作，则迭代器不再处于可用状态。那是[`Iterator`s](http://www.scala-lang.org/api/current/index.html#scala.collection.Iterator)的契约，更一般地说，继承 的类`TraversableOnce`。

> 特别重要的是要注意，除非另有说明，否则在调用迭代器的方法后绝不应使用迭代器。两个最重要的例外也是唯一的抽象方法：next 和 hasNext。

对于继承的类，情况并非如此`Traversable`——对于那些您可以根据需要多次调用批量遍历操作的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T14:56:11.767

`Source.getLines()`返回 an `Iterator`，并通过 an`Iterator`将改变它。[这在Scala 文档](http://www.scala-lang.org/api/current/index.html#scala.collection.Iterator)中非常清楚

> 迭代器是可变的：对它的大多数操作都会改变它的状态。虽然它通常用于遍历集合的元素，但它也可以在没有任何集合支持的情况下使用（参见伴随对象的构造函数）。
> 
> 特别重要的是要注意，除非另有说明，否则在调用迭代器的方法后绝不应使用迭代器。两个最重要的例外也是唯一的抽象方法：next 和 hasNext。

使用`for`符号只是调用的语法糖`map`，`flatMap`以及`foreach`迭代器上的方法，它们再次有非常清晰的文档说明不使用迭代器：

> 重用：调用此方法后，应丢弃调用它的迭代器，只使用返回的迭代器。使用旧迭代器是未定义的，可能会发生变化，并且也可能导致对新迭代器的更改。

Scala 通常旨在成为一种“实用”语言——出于性能和互操作性的原因，允许突变和副作用，尽管不鼓励。然而，称其为“隐藏得很好”是有点牵强。

# cookies - cookie 的 If 语句 - WebMatrix/Razor

> ID：15502694
> 
> 赞同：2
> 
> 时间：2013-03-19T14:49:31.530
> 
> 标签：cookies, razor, webmatrix, setcookie

我设置了一个 cookie，我想用它来填充表单，这样用户就不需要继续填写相同的表单（它正在向度假别墅的业主提交查询）。

如果已经设置了 cookie，我可以正常工作，但如果没有设置 cookie，则会出错。

我猜我需要使用“if”语句，但不太知道如何编写代码。

这是设置cookie的代码...

```
Response.Cookies["BookingEnquiry"]["ReqName"] = Request["BookingReqName"];
Response.Cookies["BookingEnquiry"]["ReqEmail"] = Request["BookingReqEmail"];
Response.Cookies["BookingEnquiry"]["ReqPhone"] = Request["BookingReqPhone"];
Response.Cookies["BookingEnquiry"]["NumAdults"] = Request["BookingNumAdults"];
Response.Cookies["BookingEnquiry"]["NumChildren"] = Request["BookingNumChildren"];
Response.Cookies["BookingEnquiry"]["ReqMessage"] = Request["BookingReqMessage"];
Response.Cookies["BookingEnquiry"].Expires = DateTime.Now.AddHours(4); 
} 
```

以下是从 cookie 收集信息的变量...

```
var reqname = Request.Cookies["BookingEnquiry"]["ReqName"];
var reqemail = Request.Cookies["BookingEnquiry"]["ReqEmail"];
var reqphone = Request.Cookies["BookingEnquiry"]["ReqPhone"];
var numadults = Request.Cookies["BookingEnquiry"]["NumAdults"];
var numchildren = Request.Cookies["BookingEnquiry"]["NumChildren"];
var reqmessage = Request.Cookies["BookingEnquiry"]["ReqMessage"]; 
```

这是表单中的示例输入...

```
<label>Name</label>
<input type="text" name="BookingReqName" id="BookingReqName" placeholder="full name…" value="@reqname"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:46:48.107

在 WebMatrix C#.net 中，我认为您正在寻找这样的东西：

```
if(Request["BookingReqName"] != null)
{
    Response.Cookies["BookingEnquiry"]["ReqName"] = Request["BookingReqName"];
}
else
{
    Response.Cookies["BookingReqName"] = ""; //<--Whatever default value you want (I've used an empty string here, so you, at least, won't get a null reference error).
} 
```

或者您可以使用与单行代码相同的代码（以免混淆您的代码，但这会降低可读性，obv。）。

```
if(Request["BookingReqName"] != null){Response.Cookies["BookingEnquiry"]["ReqName"] = Request["BookingReqName"];}else{Response.Cookies["BookingReqName"] = ""; //<--Whatever default value you want (I've used an empty string here, so you, at least, won't get a null reference error).} 
```

您只需对所有请求 cookie 值的行执行此操作。

关键是，任何东西都可以放在“else”块中，它可以帮助您处理当 cookie 值被清除/过期时要做什么（您必须始终期待）。您可以重定向到向用户请求信息以重置任何“忘记”配置的页面，或者，如果您想无论如何都保留数据，请考虑将这些值存储在数据库中，因为这些值不会清除/到期。

最后一件事，如果这没有帮助：

如果您发现自己想知道在 cookie 中存储什么值（您希望指定的默认值），因为您需要立即知道它应该记住的内容，那么恐怕是时候重新考虑了您如何构建数据流。

抱歉，但我曾经这样做过，仅使用 Session 变量，而且它并不漂亮:)

如果您在网页之间传输数据的最佳方式方面需要任何帮助，请查看 Mike Brind 网站上的这个非常有用、简洁的链接：http: [//www.mikesdotnetting.com/Article/192/Transferring-Data-Between -ASP.NET-Web 页面](http://www.mikesdotnetting.com/Article/192/Transferring-Data-Between-ASP.NET-Web-Pages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:52:13.763

它应该只是以下

```
 if(Request.Cookies["BookingEnquiry"] == null)
  {
     return; // <- if BookingEnquiry is null we end this routine
  }

   // Normal code flow here... 
```

或类似的东西

# version-control - 具有稳定和默认分支的 Mercurial 工作流

> ID：15502695
> 
> 赞同：3
> 
> 时间：2013-03-19T14:49:32.247
> 
> 标签：version-control, mercurial, continuous-integration, release-management

我们正在尝试从 Subversion 迁移到 Mercurial，但遇到了一些问题。首先介绍一下背景：

**所需的工作流程：**

我们希望在一个存储库中只有两个命名分支，稳定和默认。

*   开发发生在默认分支上。
*   错误修复已提交到稳定分支并合并到默认值。
*   在每个 Sprint 之后，我们标记我们的默认分支。
*   最终我们可以发布一个新版本，为此我们将一些代码（可能是最新的 Sprint 标签）从默认版本转移到稳定版本（`update stable`, `merge Sprint_xyz`），标记分支（`tag Release_xyz`）并发布。

**我们还希望在我们的 Jenkins 构建服务器上为 CI 做以下工作：**

*   **End-of-Sprint 作业：**此作业应使用 Sprint_xyz 之类的默认标记
*   **发布作业：**此作业应将最新的“Sprint”标记更改带到稳定分支，然后使用诸如 Release_6.0.0 之类的标记稳定并构建发布。

**更多背景：**

Mercurial 对我们来说是新的，但就我们所见，这似乎是一种理智的方法。我们选择标签来标记命名分支和克隆分支上的发布，试图使开发工作流程尽可能简单（单个合并步骤，单个结帐，只跟踪几个分支......）。

我们使用 scrum 并可能（但不一定）在每个 sprint 之后发布一个版本，该版本可能（或不）成为稳定分支的一部分并变成“可发布”版本。

我们遇到的问题（这让我们怀疑我们是否以正确的方式解决这个问题......）如下：

我们在默认分支上工作（下面的穷人图上的“d”）：

```
d -o-o-o-o- 
```

我们完成一个 sprint 并触发一个 End-of-Sprint 作业（使用 Jenkins），其标签默认为“Sprint 1”：

```
d -o-o-o-o-o-
           |
         Sprint 1 
```

为了发布 Sprint 1，我们更新到稳定分支 ('s') 并合并来自 Sprint 1 标记修订和提交的更改：

```
 Sprint 1
           |
d -o-o-o-o-o-
             \
s -o-o-o-o-o-o- 
```

标记稳定并提交：

```
 Sprint 1
           |
d -o-o-o-o-o-
             \
s -o-o-o-o-o-o-o-
               |
             Release 1 
```

更新到默认并合并稳定，因为默认应该保持稳定、提交和推送的超集：

```
 Sprint 1
           |
d -o-o-o-o-o-o-o-o-o-
             \   /
s -o-o-o-o-o-o-o-
               |
             Release 1 
```

问题是当将 .hgtags 从 's' 合并到 'd' mercurial 时会遇到一个冲突，导致发布作业无法完成。生成的 .hgtags 应该包含来自两个相关标签的信息。我们已经为此寻找了解决方案，并且可能可以通过一些钩子和脚本来自动化这些类型的合并冲突，但它看起来像是一个不必要且容易出错的黑客来支持一个工作流程，否则看起来并没有什么不寻常的。

1.  我们的方法是否存在固有的错误导致我们遇到这些问题？
2.  如果不是，那么在不依赖脚本/挂钩方法的情况下解决这些问题的最佳方法是什么？
3.  有没有更好的方法可以支持我们的工作流程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:02:32.253

我会选择特殊情况的钩子。您看到的问题与以与普通存储库数据相同的方式对元数据进行版本控制的 Mercurial 哲学有关。这是简单而有效的，并导致系统总体上更容易理解。但在这种情况下，它也会导致您的合并冲突。

导致合并冲突的原因比较简单。该`.hgtags`文件只是一个包含一堆行的文本文件。每行包含一个哈希和相关的标签。在一个分支中，您添加了`Sprint 1`标签。在另一个分支中，您添加了`Release 1`标签。这些显示为在一个分支中将一行添加到文件末尾，而在另一个分支中将另一行添加到文件末尾。

然后合并这两个分支。突然，Mercurial 面临一个决定。应该走哪条线？应该两个都带吗？如果是源代码，如果没有人为干预，真的没有办法分辨。

但它不是源代码。这是一堆标签。规则应该是“如果添加的两行引用不同的标签，就取它们两个”。但这并不是因为 Mercurial 将其视为可能是重要源代码的沼泽标准文本文件。

确实，`.hgtags`应该以一种相当特殊的方式处理文件以进行合并。将处理这种方式的代码添加到主线 Mercurial 中以支持您的用例实际上可能会很好。

恕我直言，应修改 Mercurial，以便`.hgtags`仅当同一标签有两个不同的哈希值时，该文件才会给您一个冲突警告。另一种奇怪的情况是，如果您的标签的哈希值不是该标签出现的更改的祖先。在进行合并时应该以某种方式调用这种情况，但这并不是真正的冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:06:12.997

我怀疑您正在将标记的变更集从默认合并到稳定。如果您合并*标记*变更集，则当您将第二个（可能也是标记！）变更集合并回默认值时，您不应该遇到合并冲突。

# php - 如果在 php 的 preg_replace 中找到非常接近的匹配项，则限制字符串替换

> ID：15502700
> 
> 赞同：0
> 
> 时间：2013-03-19T14:49:48.920
> 
> 标签：php, preg-replace

我有一个内容描述和几个列出的词（“Google”和“Gmail”）。现在，如果这些词出现在内容描述中，那么我必须用它们的链接替换它们。我创建了一个正则表达式并使用 preg_match 成功替换了它们。但现在我想限制它们。例如：如果找到的 2 个单词非常接近，则不会被替换。我的描述如下：

“这是我对 Google 和 Gmail 的描述。我需要用它的链接和 Gmail 替换 Google”

现在我的要求是，First Gmail 不应该被替换，因为第一个“Google”离它很近（只有 1 个字的距离），其余的词应该被替换，因为它们之间的距离很远。所以我的结果应该是：

```
This is my description for <a href="google.com">Google</a> and Gmail. I need to replace <a href="google.com">Google</a> with its link and also <a href="gmail.com">Gmail</a>. 
```

我使用了前瞻匹配，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:26:28.417

好的，我得到了解决方案。

我对每个单词一个一个地使用 preg_match_all，然后维护一个带有偏移量的匹配单词数组（PREG_OFFSET_CAPTURE）。

现在我管理了一个包含位置的所有匹配单词的列表，并根据单词的权重对该列表进行排序。现在我们可以使用任何算法来跟踪文本中的最近替换。我做了以下事情：

```
1: Replace first list word in body and maintain a temp tracking  array with position of this word.
2: For second word in list, first check the temp tracking array and find nearest position of second word. Now you can find words between first word and second word using str_word_count function.
3: Now do this for all words in list. 
```

# javascript - 可编辑的 jQuery 网格来存储数据？

> ID：15502701
> 
> 赞同：0
> 
> 时间：2013-03-19T14:49:52.507
> 
> 标签：javascript, jquery, html, grid

我正在寻找一个 jQuery 网格，它允许我编辑数据并保存它，以便每次打开包含数据的文档时都可以查看它。

有什么建议吗？越简单越好。我只是想创建一个带有网格的新文档来替换我目前使用的旧 Google 电子表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:53:05.797

您在寻找[slickgrid](http://mathankumar.drupalgardens.com/blog/best-jquery-editable-grid-plugin-slickgrid)吗？

如果不坚持，就不可能每次都看到`data.`

[DataGrid](http://www.jeasyui.com/demo/main/index.php)在这里提供基本的 CRUD 操作。

# wpf - WPF网格布局及窗口过窄如何处理

> ID：15502702
> 
> 赞同：0
> 
> 时间：2013-03-19T14:49:53.793
> 
> 标签：wpf, layout, grid, dockpanel

我想要一个有两列的 WPF 面板，其中第二列是固定宽度，位于第一列的右侧。第一列是自动调整大小的。我希望第二列总是在第一列之后，但也不要在窗口（或父元素）变得太窄并且只有第一列或第一列的一部分适合时迷路。

当我像这样使用 DockPanel 时：

```
<DockPanel DockPanel.Dock="Top">
  <Label Content="I am autosize" DockPanel.Dock="Left" />
  <Label Content="I come right after the first column" />
</DockPanel> 
```

第一列是可见的，第二列紧随其后，当我开始调整窗口大小以使其更窄时，首先，第二列被裁剪直到消失，第一列被裁剪。

当我使用这个时：

```
<DockPanel DockPanel.Dock="Top">
  <Label Content="I come right after the first column" DockPanel.Dock="Right" />
  <Label Content="I am autosize" />
</DockPanel> 
```

第二列开始被裁剪，但是当窗口足够宽时，它不是在填充停靠第一列之后，而是停靠在右侧。第一列不是自动调整大小的。

当我尝试使用网格时，结果基本相同。当我将列宽设置为 *、20、* 时，它不起作用，*、20、Auto 也不会让它完全按照我想要的方式运行。

是否甚至可以使用一些面板（DockPanel，最好是）和布局属性组合来使我的第二列总是立即出现在第一列的右侧，但是当它们的两个宽度组合大于时，也可以使第一列首先裁剪父元素宽度，所以在这种情况下，第二列似乎是右停靠而第一列是完全停靠的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:11:29.323

您可以尝试使用 Grid 控件。

```
<Window x:Class="WpfApplication6.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Title="MainWindow" Height="350" Width="525" 
    MinWidth="200">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition  MinWidth="200"/>
    </Grid.ColumnDefinitions>
    <TextBlock Text="I am autosize" 
                   Background="Red" />
    <TextBlock Text="I come right after the first column" 
                   Grid.Column="1" 
                   Background="AliceBlue" 
                   Width="200" 
                   HorizontalAlignment="Left" />
</Grid> 
```

唯一的问题是您还必须将父控件 MinWidth 设置为固定大小，在本例中为窗口。我希望这可以帮助你。

# paypal - 在 PayPal 结账时显示预估运费和税金

> ID：15502705
> 
> 赞同：-1
> 
> 时间：2013-03-19T14:49:58.203
> 
> 标签：paypal, e-commerce, shipping

我在测试页面上创建了一个“添加到购物车”按钮。当我点击它时，我会得到我想要的所有东西，除了你可以输入邮政编码的部分，它会为你计算运费。我是贝宝的新手。

我想要的示例：http: [//ferretdreamsusa.com/](http://ferretdreamsusa.com/)

我目前拥有的： http: [//digital-motions.com/anytimegb/test.html](http://digital-motions.com/anytimegb/test.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:54:22.847

该帐户很可能在其 PayPal 帐户中设置了运输和税务资料，这将导致显示您所指的框。因此，如果您的 PayPal 帐户中没有设置运输和税务资料，则需要设置一个。

# android - 内容必须有一个 id 属性为的 ListView

> ID：15502706
> 
> 赞同：0
> 
> 时间：2013-03-19T14:49:57.940
> 
> 标签：android

我已经设置了图表引擎，它运行良好，在尝试向图表添加另一个图表后，我在 log cat 上收到以下错误消息。代码中没有列表，尽管它是从 listactivity 扩展而来的。

代码有什么问题。

```
package org.achartengine.chartdemo.demo;

import java.text.Format;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.GregorianCalendar;
import org.achartengine.ChartFactory;
import org.achartengine.GraphicalView;
import org.achartengine.chart.PointStyle;
import org.achartengine.model.SeriesSelection;
import org.achartengine.model.TimeSeries;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;
import android.annotation.SuppressLint;
import android.app.ListActivity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.Toast;

@SuppressLint("SimpleDateFormat")
public class ChartDemo extends ListActivity {
     private GraphicalView mChart;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.xy_chart);
            openChart();
        }

        private void openChart(){

            int count = 5;
            Date[] dt = new Date[5];
            for(int i=0;i<count;i++){
                GregorianCalendar gc = new GregorianCalendar(2012, 10, i+1);
                dt[i] = gc.getTime();
            }

            int[] visits = { 2000,2500,2700,2100,2800};
            int[] views = {2200, 2700, 2900, 2800, 3200};
            int[] views3 = {2100, 2740, 2100, 2900, 3100};
            // Creating TimeSeries for Visits
            TimeSeries visitsSeries = new TimeSeries("Visits");

            // Creating TimeSeries for Views
            TimeSeries viewsSeries = new TimeSeries("Views");
            TimeSeries viewsSeries3 = new TimeSeries("Views3");

            // Adding data to Visits and Views Series
            for(int i=0;i<dt.length;i++){
                visitsSeries.add(dt[i], visits[i]);
                viewsSeries.add(dt[i],views[i]);
                viewsSeries3.add(dt[i],views3[i]);
            }

            // Creating a dataset to hold each series
            XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

            // Adding Visits Series to the dataset
            dataset.addSeries(visitsSeries);

            // Adding Visits Series to dataset
            dataset.addSeries(viewsSeries);
            dataset.addSeries(viewsSeries3);

            // Creating XYSeriesRenderer to customize visitsSeries
            XYSeriesRenderer visitsRenderer = new XYSeriesRenderer();
            visitsRenderer.setColor(Color.WHITE);
            visitsRenderer.setPointStyle(PointStyle.CIRCLE);
            visitsRenderer.setFillPoints(true);
            visitsRenderer.setLineWidth(2);
            visitsRenderer.setDisplayChartValues(true);

            // Creating XYSeriesRenderer to customize viewsSeries
            XYSeriesRenderer viewsRenderer = new XYSeriesRenderer();
            viewsRenderer.setColor(Color.YELLOW);
            viewsRenderer.setPointStyle(PointStyle.CIRCLE);
            viewsRenderer.setFillPoints(true);
            viewsRenderer.setLineWidth(2);
            viewsRenderer.setDisplayChartValues(true);

            // Creating XYSeriesRenderer3 to customize viewsSeries
            XYSeriesRenderer viewsRenderer3 = new XYSeriesRenderer();
            viewsRenderer.setColor(Color.YELLOW);
            viewsRenderer.setPointStyle(PointStyle.CIRCLE);
            viewsRenderer.setFillPoints(true);
            viewsRenderer.setLineWidth(2);
            viewsRenderer.setDisplayChartValues(true);

            // Creating a XYMultipleSeriesRenderer to customize the whole chart
            XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();

            multiRenderer.setChartTitle("Visits vs Views Chart");
            multiRenderer.setXTitle("Days");
            multiRenderer.setYTitle("Count");
            multiRenderer.setZoomButtonsVisible(true);

            // Adding visitsRenderer and viewsRenderer to multipleRenderer
            // Note: The order of adding dataseries to dataset and renderers to multipleRenderer
            // should be same
            multiRenderer.addSeriesRenderer(visitsRenderer);
            multiRenderer.addSeriesRenderer(viewsRenderer);
            multiRenderer.addSeriesRenderer(viewsRenderer3);
            // Getting a reference to LinearLayout of the MainActivity Layout
            LinearLayout chartContainer = (LinearLayout) findViewById(R.id.chart_container);

            // Creating a Time Chart
            mChart = (GraphicalView) ChartFactory.getTimeChartView(getBaseContext(), dataset, multiRenderer,"dd-MMM-yyyy");

            multiRenderer.setClickEnabled(true);
            multiRenderer.setSelectableBuffer(10);

            // Setting a click event listener for the graph
            mChart.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    Format formatter = new SimpleDateFormat("dd-MMM-yyyy");

                    SeriesSelection seriesSelection = mChart.getCurrentSeriesAndPoint();

                    if (seriesSelection != null) {
                        int seriesIndex = seriesSelection.getSeriesIndex();
                        String selectedSeries="Visits";
                        if(seriesIndex==0)
                            selectedSeries = "Visits";
                        else
                            selectedSeries = "Views";

                        // Getting the clicked Date ( x value )
                        long clickedDateSeconds = (long) seriesSelection.getXValue();
                        Date clickedDate = new Date(clickedDateSeconds);
                        String strDate = formatter.format(clickedDate);

                        // Getting the y value
                        int amount = (int) seriesSelection.getValue();

                        // Displaying Toast Message
                        Toast.makeText(
                            getBaseContext(),
                            selectedSeries + " on "  + strDate + " : " + amount ,
                            Toast.LENGTH_SHORT).show();
                        }
                    }
                });

                // Adding the Line Chart to the LinearLayout
                chartContainer.addView(mChart);
        }

//      @Override
//      public boolean onCreateOptionsMenu(Menu menu) {
//          getMenuInflater().inflate(R., menu);
//          return true;
//      }
} 
```

日志猫：

```
 03-19 20:25:16.690: E/AndroidRuntime(753): FATAL EXCEPTION: main
03-19 20:25:16.690: E/AndroidRuntime(753): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.achartengine.chartdemo.demo/org.achartengine.chartdemo.demo.ChartDemo}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.os.Looper.loop(Looper.java:123)
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-19 20:25:16.690: E/AndroidRuntime(753):  at java.lang.reflect.Method.invokeNative(Native Method)
03-19 20:25:16.690: E/AndroidRuntime(753):  at java.lang.reflect.Method.invoke(Method.java:507)
03-19 20:25:16.690: E/AndroidRuntime(753):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-19 20:25:16.690: E/AndroidRuntime(753):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-19 20:25:16.690: E/AndroidRuntime(753):  at dalvik.system.NativeStart.main(Native Method)
03-19 20:25:16.690: E/AndroidRuntime(753): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.app.ListActivity.onContentChanged(ListActivity.java:243)
03-19 20:25:16.690: E/AndroidRuntime(753):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:210)
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.app.Activity.setContentView(Activity.java:1657)
03-19 20:25:16.690: E/AndroidRuntime(753):  at org.achartengine.chartdemo.demo.ChartDemo.onCreate(ChartDemo.java:47)
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-19 20:25:16.690: E/AndroidRuntime(753):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-19 20:25:16.690: E/AndroidRuntime(753):  ... 11 more 
```

这是xml代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/tv_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/str_tv_title"
        android:gravity="center_horizontal" />

    <LinearLayout
        android:id="@+id/chart_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/tv_title" >

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:51:51.377

如果您使用`ListActivity`自定义布局，您的布局必须包含`ListView`带有 id`android:id="@android:id/list"`

# jboss - JBoss AS 7.1 - 请求参数编码

> ID：15502707
> 
> 赞同：6
> 
> 时间：2013-03-19T14:49:59.507
> 
> 标签：jboss, jboss7.x

我拥有 UTF-8 格式的所有内容。这包括 Content-Type、数据库、文件、java，一切（除非我错过了什么）。

我关注了很多 stackoverflow 的答案、JIRA、博客等，但它仍然失败。

问题本身如下：

当我提交时，让我们假设，`http://localhost:8080/app/searh?text=café`调试，我`request.getParameter("text")`的总是错误的，类似于`cafÃ©`，并`request.getCharachterEncoding()`给我`null`（？）。

查看请求标头，我得到了这个：

```
GET http://localhost:8080/app/search?text=caf%C3%A9 HTTP/1.1
Host: localhost:8080
Proxy-Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.69 Safari/537.17
Referer: http://localhost:8080/app/search?text=n%C3%A3o
Accept-Encoding: gzip,deflate,sdch
Accept-Language: pt-BR,pt;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: UTF-8,*;q=0.5
Cookie: JSESSIONID=OMMITED 
```

和响应头：

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Pragma: No-cache
Cache-Control: no-cache
Expires: Wed, 31 Dec 1969 21:00:00 BRT
Content-Type: text/html;charset=UTF-8
Transfer-Encoding: chunked
Content-Encoding: gzip
Vary: Accept-Encoding
Date: Tue, 19 Mar 2013 14:06:24 GMT
Proxy-Connection: keep-alive
Connection: keep-alive 
```

一切都是 UTF-8。我只是不明白。

我试图传入`-Dfile.encoding=UTF-8 -Dfile.io.encoding=UTF-8 -DjavaEncoding=UTF-8`我的`standalone.conf` `JAVA_OPTS`变量，试图把

```
<property name="org.apache.catalina.connector.URI_ENCODING" value="UTF-8"/>
<property name="org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING" value="true"/> 
```

在我的`standalone.xml`. 这些都不能解决问题。

我能做些什么来解决这个问题？

提前致谢。

顺便说一句：是 JBoss AS 7.1.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:36:13.683

我遇到了同样的问题，但在 Jboss 5.1 中，我解决了它，将 URIEncoding 属性添加到 HTTP 连接器（在 jbossweb/server.xml 中）并手动解码 URL/GET 参数。

但是在 Jboss7 中定义它的方式与以前的版本不同，但谷歌搜索了一下我发现了这个[链接](https://community.jboss.org/thread/202750)：基​​本上你必须在`</extensions>`标签末尾之后的 Standalone.xml 或 domain.xml 文件中添加以下行（它看起来你已经完成了这一步;-)：

```
<system-properties>
     <property name="org.apache.catalina.connector.URI_ENCODING" value="UTF-8"/>
     <property name="org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING" value="true"/>
</system-properties> 
```

此外，您必须在 java.net.URIEncoder 对象的帮助下手动解码 URI 或参数：

```
String param = URLDecoder.decode(request.getParameter("text"), "UTF-8"); 
```

BalusC[在他的博客中](http://balusc.blogspot.com.es/2009/05/unicode-how-to-get-characters-right.html#JSPServletRequest)有一篇关于它的有趣帖子。

最后，第二种解决方案，如果您想避免使用前面的选项：您是否考虑过使用 POST 方法而不是 GET 方法？

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:58:46.727

我解决了创建将请求和响应编码都设置为 UTF-8 的过滤器的问题。

相当hacky，但有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-20T12:09:44.200

我没有足够的声誉来为[Toni S. Magraner 的答案](https://stackoverflow.com/a/15503843/822870)添加评论，所以我会在这里写。

*request.getParameter("text")*已经进行了 URL 解码。再次调用*URLDecoder.decode()*将提供双重解码，这可能不会满足您的要求。一个例子：

```
logger.error("p1:"+request.getParameter("p1")); 
```

调用它

```
http://localhost/test?p1=ku%2fki%44__%33X%C3%A9X 
```

印刷：

```
p1:ku/kiD__3XéX 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-04T14:32:05.677

Standalone.xml 或 domain.xml 配置对我不起作用。

在 jboss-as-7.1.1.Final 上，只需将这一行添加到standalone.conf，该文件位于 bin 目录下：

JAVA_OPTS="$JAVA_OPTS -Dorg.apache.catalina.connector.URI_ENCODING=UTF-8"

来自：[JBOSS 7 编码未按预期工作](https://stackoverflow.com/questions/10228764/jboss-7-encoding-not-working-as-expected)

# java - 在 tomcat 上 resteasy 中的 Singleton

> ID：15502710
> 
> 赞同：0
> 
> 时间：2013-03-19T14:50:09.203
> 
> 标签：java, tomcat, singleton, jersey, resteasy

调用使用 Resteasy 库创建的 REST 方法会为每个 HTTP 请求创建一个新的对象实例。我想`@Singleton`在泽西图书馆中使用类似的东西。如何在 Tomcat 上的 Resteasy 中做到这一点？

# xaml - 如何使列表框在其父级内可调整大小？

> ID：15502717
> 
> 赞同：0
> 
> 时间：2013-03-19T14:50:18.313
> 
> 标签：xaml, silverlight-5.0

在用户控件中，我放置了一个绑定到动态数据源的列表框。这个用户控件将在一个弹出窗口中。我希望这个列表框可以填满窗口的其余空间。这是我尝试过的 Xaml：

```
<ComboBox x:Name="cmbx1" Grid.Column="0" Grid.Row ="0" Margin="5"
                  Width="150" VerticalAlignment="Center" HorizontalAlignment="Left" SelectionChanged="filters_SelectionChanged">
  ......
</ComboBox>
<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="1" Grid.Row="0">
    <Button Content="Test" Margin="5"  Click="Button_Add" />
</StackPanel>

<DataGrid x:Name="ListGrid" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"  
  ......
</DataGrid>
<ComboBox x:Name="cmb2" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Margin="5">
  ......
</ComboBox>        
<ListBox x:Name="lstSharing" Grid.Row="3"  Grid.Column="0" Grid.ColumnSpan="2" Margin="0,0,10,0"                         
                    Width="{Binding Width, ElementName=ListGrid}">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>                    
            <tkit:WrapPanel Orientation="Horizontal" MaxWidth="650" />                    
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Margin="3" Width="Auto">
                <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}" />
                <TextBlock Text="{Binding ItemName}" Width="120" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我想要的列表框的高度和宽度可以根据窗口大小动态设置，绑定到列表框的项目。但它不能正常工作。最初，列表框没有滚动条，我需要手动调整窗口大小以便显示滚动条。我不能动态改变，所以我把MaxWidth=600。否则，它总是在一行中显示所有项目。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:55:56.600

这是未经测试的，但我会尝试这样的事情：

```
<ListBox x:Name="lstSharing" 
         Grid.Row="3"  
         Grid.Column="0" 
         Grid.ColumnSpan="2" 
         Margin="0,0,10,0"                         
         HorizontalAlignment="Stretch"
         VerticalAlignment="Stretch">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>                    
            <tkit:WrapPanel Orientation="Horizontal" 
                            MaxWidth="{Binding ElementName=lstSharing, Path=ActualWidth}" />                    
        </ItemsPanelTemplate> 
```

在没有看到父容器的情况下知道这是否会起作用有点困难，但它应该为您指明正确的方向。

# java - 如何将 entityManager 从其他 EJBModule 注入 EJB

> ID：15502718
> 
> 赞同：0
> 
> 时间：2013-03-19T14:50:19.357
> 
> 标签：java, jpa, java-ee-6, ejb-3.1

我的项目中有 2 个 ejb-module，ejb-module1 和 ejb-module2。ejb-module1 包含实体类和持久性单元，有一个带有实体管理器的 ejb，如下所示：

```
@Stateful
public class ErpTools implements ErpToolsLocal {
@PersistenceContext(unitName = "erp-ejbPU")
private EntityManager em;

public EntityManager getEm() {
    return em;
}

public void setEm(EntityManager em) {
    this.em = em;
} 
```

在 ejb-module2 中，我有其他 ejb 需要使用 ejb-module1 中的实体管理器，我尝试使用这个，

```
 String ejbql = "SELECT e from CtEmpresaCliente e ORDER BY e.idCliente ASC";        
  Query query = this.erpTools.getEm().createQuery(ejbql);
  empresaClientes = query.getResultList(); 
```

但发送此异常：

```
"Unable to retrieve EntityManagerFactory for unitName erp-ejbPU"
debuging in this point Query query = this.erpTools.getEm().createQuery(ejbql);
this.erpTools.getEm() is not null. 
```

注意：使用`Netbeans`, `JPA`, `JEE6`,`EJB 3.1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:45:40.757

对不同模块中的 EJB 的调用类似于远程调用，因为它们使用按值传递语义并进行序列化/反序列化。在这种情况下，网络没有被使用，但远程调用的所有其他方面仍在发生。

这对您来说意味着即使您`EntityManager`从另一个 EJB 模块获得非 null，它也会被序列化/反序列化，并且当它进入另一个 EJB 模块时，它不再引用有效的持久性上下文（因为它调用 EJB 模块中不存在）。

# breeze - 方法超时而不是等待

> ID：15502727
> 
> 赞同：1
> 
> 时间：2013-03-19T14:50:42.730
> 
> 标签：breeze, savechanges

在调用或等待服务器时，微风上的 savechanges 方法似乎无限期地等待。有没有办法让它超时？我用*allowConcurrentSaves*调用保存更改：false。现在，这会导致以某种方式无法从服务器获得响应的用户无限期地陷入困境，例如互联网连接断开。

我不想用*allowConcurrentSaves*重新调用该方法，因为担心我可能会复制数据。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:43:06.783

# 2014 年 5 月 16 日更新

`requestInterceptor`从 v.1.4.12 开始，您可以使用 AJAX 适配器设置 HTTP 级别的超时和取消。请参阅文档[“控制 AJAX 调用”](http://www.breezejs.com/documentation/controlling-ajax)。

我仍然不愿意在保存时使用此功能，因为您没有机会知道服务器是否保留了数据。当然，如果您的客户端挂起或崩溃，您也不知道。由你决定。

# 原始答案

[实际上， Q.js](https://github.com/kriskowal/q#readme)有一个现成的解决方案。它被调用`timeout`并在 [API 参考中提到，并在](https://github.com/kriskowal/q/wiki/API-Reference)[readme.md](https://github.com/kriskowal/q#readme)中提供了其实现和使用的简化示例。

我知道你问过 Save 但你的问题一般与承诺有关。这是一个从我们的 DocCode 示例中[的 queryTests.js改编的查询示例](http://www.breezejs.com/samples/doccode)

```
var timeoutMs = 10000; // 10 秒超时
var em = newEm(); // 创建一个新的EntityManager

var query = new EntityQuery().from("Customers").using(em);

Q.timeout(query.execute, timeoutMs)
    .then(queryFinishedBeforeTimeout)
    .fail(queryFailedOrTimedout);

函数查询失败或超时（错误）{
    变种期望= /超时/我；
    var emsg = 错误消息；
    if (expect.test(emsg)) {
        log("查询超时，消息为 '{0}'" + expectTimeoutMsg)
            .格式（emsg））；
        // 做一点事
    } 别的 {
        处理失败（错误）；
    }
}

```

注意：我刚刚添加了这个测试，所以你必须从 github 获取或者等待 1.2.5 之后的 Breeze 版本。

# 哎呀...也许不是

我给出了我认为是**query**的一个很好的答案。这可能不是**save**的正确答案。

保存的问题是，在服务器响应之前，您不知道客户端是否保存成功。在此过程中，任何地方都可能出现问题。服务器可能没有听到保存请求。服务器可能在保存期间出现故障。服务器可能已经保存了数据，但响应从未返回给客户端。

更改 的值`allowConcurrentSaves`不会让您摆脱这种束缚。两者都不会有保存超时。

事实上，**为保存添加超时可能是骗人的**。保存响应甚至可能在您的自定义超时之后到达……在这种情况下，Breeze 将尝试更新您的 EntityManager ……您将不知道 Breeze 是成功还是失败！

如果我们添加 Breeze 保存超时会怎样。它应该怎么做？如果微风说保存已超时......并且微风忽略了服务器迟来的响应怎么办？然后想象一下服务器上的保存成功 - 它只是花了“太长时间”才响应客户端。现在您有一个客户端，其状态意外地与服务器不同步。情况不妙。

所以我认为你想要一个不同的解决方案来解决这个非常现实的问题。这确实是用户体验问题。您可以向用户表明您认为保存仍在进行中，然后设置您自己的计时器。如果您的计时器到期时保存未完成，您可以查询服务器以查看数据是否已保存或是否存在连接......或类似的东西。老实说，我现在想不出更好的方法。

*请注意，我假设您需要知道服务器已成功。如果您避免使用商店生成的 ID 并始终假设保存成功，除非服务器另有说明……那是完全不同的范式和编程模型，我们有一天可以讨论（请参阅[meteorjs](http://meteor.com/)）*。

所有这一切的网络：我非常确定**保存超时不是你想要**的。

虽然在查询中仍然有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:33:42.867

很好的问题，我希望我有一个很好的答案。但这绝对值得研究。您能否将此作为功能请求添加到[Breeze User Voice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)中。在确定 Breeze 开发的优先事项时，我们非常重视这些要求。

# php - 从 PHP 中的字段显示 CSV 行号

> ID：15502728
> 
> 赞同：0
> 
> 时间：2013-03-19T14:50:44.907
> 
> 标签：php, parsing, csv

我目前有一个大型应用程序，它采用 CSV 文件并将详细信息呈现为各种 PDF。命名输出文件时，我想在 CSV 中显示与行关联的行号，以便所有 PDF 按顺序显示。我似乎无法从 CSV 文件中获取行号？

```
function safeFileName($filename)
    {
    return str_replace(array("\\", "/", ":", "*", "\"", "?", "<", ">", "|"), "_", $filename);
    }

$outputFilename = safeFileName($ticket['size_title']."_".str_pad((int)
ROW_NUMBER, 
, STR_PAD_LEFT).'_'.$ticket['ticket_code']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:05:16.883

我假设您正在阅读带有`fgetcsv()`. 您需要手动跟踪`while`循环内的行号，就像他们在 fgetcsv 文档的示例 1 中所做`$row`的[那样](http://us3.php.net/manual/en/function.fgetcsv.php)。

为了编写文件名，我会使用[sprintf()](http://us3.php.net/manual/en/function.sprintf.php)：

```
$outputFilename = sprintf("%s_%03d_%s", safeFileName($ticket['size_title']), 
         $row, $ticket['ticket_code']); 
```

# c# - 如何确保只打开一个表单实例？

> ID：15502731
> 
> 赞同：1
> 
> 时间：2013-03-19T14:50:48.230
> 
> 标签：c#, winforms

单击按钮时，我打开一个新表单（比如说 Form2），但我不希望 Form2 打开超过 1 次。而且我不想使用 .ShowDialog()，因为它不允许我转到上一个表单。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:52:58.123

您可以使用[Application.OpenForms](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)属性检查表单是否已打开：

```
if (!Application.OpenForms.OfType<Form2>().Any())
{
    Form2 form2 = new Form2();
    form2.Show();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:56:43.500

您可以显示现有表单而不是创建新表单：

```
Form2 _form2 = null;

void Button1_Click(object sender, EventArgs e) 
{    
     if (_form2 == null)
     {
         _form2 = new Form2();  
         _form2.Closed += Form2_Closed;
     } 

     _form2.Show();
     _form2.BringToFront(); 
 }

private void Form2_Closed(object sender, System.EventArgs e)
{
    _form2 = null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:53:55.990

您可以发出该`Show`方法，该方法将显示表单并允许用户返回表单，但您也可以覆盖`OnClosing`表单的事件：

```
protected override void OnClosing(CancelEventArgs e)
{
    e.Cancel = true;
} 
```

这将使用户无法从**字面上关闭表单。**最后，如果您愿意，您可以`Hide`在用户关闭表单时使用它：

```
protected override void OnClosing(CancelEventArgs e)
{
    e.Cancel = true;
    this.Hide();
} 
```

然后您需要在第一个表单中保留该实例，以便在单击按钮时重新显示它。所以在第一种形式中，你可能有一个像这样的类字段：

```
private Form2 _form2 = new Form2(); 
```

然后在按钮中单击它看起来像这样：

```
_form2.Show(); 
```

并且由于他们实际上无法关闭表单，因此这将始终有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T14:55:19.590

你可以尝试类似的东西

```
bool windowIsNotOpen;

Mutex mutext = new Mutex(true, "Form2", out windowIsNotOpen);

if (!windowIsNotOpen)
{
    // Form2 is already open
    return;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T14:57:13.293

你可以做一个静态属性来告诉你它是否打开。您将在打开表单时设置它，并在关闭表单时将其关闭。

```
class Form2 {
    public static bool IsOpen { get;set; }
    public Form2() {
        Load += (sender, e) => { Form2.IsOpen = true; };
        Closed += (sender, e) => { Form2.IsOpen = false; };
    }
} 
```

每当您想打开它时，请先检查标志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T14:57:58.377

```
 Form2 f;

    bool isOpen = false;
    private void button1_Click(object sender, EventArgs e)
    {
        if (f == null)
        {
            f = new Form2(); ;
            f.FormClosed += new FormClosedEventHandler(f_FormClosed);
        }
        if (!isOpen)
        {
            isOpen = true;
            f.Show();
        }

    }

    void f_FormClosed(object sender, FormClosedEventArgs e)
    {
        isOpen = false;
    } 
```

> 试试这个或使用 Application.OpenForms 并检查打开了哪个

# c# - 关于使用 c# 和 MS-word 互操作的打开 word 文件和只读模式的问题

> ID：15502732
> 
> 赞同：1
> 
> 时间：2013-03-19T14:50:50.190
> 
> 标签：c#, ms-word, office-interop

我正在以编程方式打开一个 word 文件进行搜索并突出显示关键字。我的日常工作正常。问题是当我以编程方式打开文件时，会出现一个对话框，要求我以只读模式打开文件。对话框看起来像 ![在此处输入图像描述](../Images/12895dfa60fe80d688311f7ad7899169.png)

实际上我不想以只读模式打开文件，因为人们可以打开并喜欢更改和保存。所以请指导我如何不以只读模式打开文件。

这是我的完整代码。看看并告诉我我的代码有什么问题或告诉我任何技巧，因此我可以以非只读模式打开文件。这是我的代码。

```
private void button1_Click(object sender, EventArgs e)
        {
            object fileName = "";
            string filePath = "";
            string strSaveasPath = "";
            DialogResult result = openFileDialog1.ShowDialog();
            if (result == DialogResult.OK)
            {
                fileName = openFileDialog1.FileName;
                //strSaveasPath = Path.GetDirectoryName(path.ToString()); 
            }

            //fileName = "Z:\\C0000000003.doc";
            List<string> _list = new List<string>();
            _list.Add("tridip");
            _list.Add("arijit");

            //object fileName = "D:\\CVArchievePath\\C0000000001.doc";
            object textToFind = "test";
            object readOnly = false;
            Word.Application word = new Word.Application();
            Word.Document doc = new Word.Document();
            object missing = Type.Missing;
            try
            {
                doc = word.Documents.Open(ref fileName, ref missing, ref readOnly,
                                          ref missing, ref missing, ref missing,
                                          ref missing, ref missing, ref missing,
                                          ref missing, ref missing, ref missing,
                                          ref missing, ref missing, ref missing,
                                          ref missing);
                doc.Activate();

                object matchPhrase = false;
                object matchCase = false;
                object matchPrefix = false;
                object matchSuffix = false;
                object matchWholeWord = false;
                object matchWildcards = false;
                object matchSoundsLike = false;
                object matchAllWordForms = false;
                object matchByte = false;
                object ignoreSpace = false;
                object ignorePunct = false;

                object highlightedColor = Word.WdColor.wdColorGreen;
                object textColor = Word.WdColor.wdColorLightOrange;

                object missingp = false;
                Word.Range range = doc.Range();

                foreach (string line in _list)
                {
                    textToFind = line;
                    bool highlighted = range.Find.HitHighlight(ref textToFind,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing,
                                                               ref missing);
                }

                System.Diagnostics.Process.Start(fileName.ToString());
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error : " + ex.Message);
                //Console.ReadKey(true);
            }
            finally
            {
                //doc.Close(missing, missing, missing);
                if(doc!=null)
                    System.Runtime.InteropServices.Marshal.ReleaseComObject(doc);

                if (word != null)
                    System.Runtime.InteropServices.Marshal.ReleaseComObject(word);

                word = null;
                doc = null;
                GC.Collect();
                GC.WaitForPendingFinalizers();
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:57:44.703

> 指导我如何不以只读模式打开文件

好吧，暂时忘记代码，因为它是由“tridip”打开的，所以它被锁定了。您不能写入当前由其他用户打开的 Word 文件，因此该用户需要将其关闭。也许你是“tridip”并且你已经打开了你的程序试图打开的文档？？？

# android - 如何在 AsyncTask 内使用活动类发送 SMS？

> ID：15502733
> 
> 赞同：0
> 
> 时间：2013-03-19T14:50:51.663
> 
> 标签：android, android-asynctask, sms

我需要从我的 AsyncTask 发送短信。所以我创建了这个名为 SMS 的活动。我的 AsyncTask 我得到了这个构造函数：

```
public AsyncTask(Context pContext, TextView pTxtWorkProgress, TextView pTxtMsg, ProgressBar pProgressbar_line, SMS pSmsActivity){
        context = pContext;
        txtMsg = pTxtMsg;
        txtWorkProgress = pTxtWorkProgress;
        progressbar_line = pProgressbar_line;
        smsActivity = pSmsActivity;
    } 
```

然后，在我的 doInBackground() 中，我得到了代码：

```
if(smsActivity != null)
 smsActivity.sendSMS("9999", "4444");
else
 hasErrorSms = true; 
```

在我的 smsActivity 中，我得到了 sendSMS() 方法：

```
public void sendSMS(String phoneNumber, String message){        
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0, new Intent(DELIVERED), 0);

    //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()){
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", Toast.LENGTH_SHORT).show();
                    Util.mSMS_SENT_STATUS = Util.mSMS_SENT_RESULT_OK;
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure", Toast.LENGTH_SHORT).show();
                    Util.mSMS_SENT_STATUS = Util.mSMS_SENT_RESULT_ERROR_GENERIC_FAILURE;                        
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service", Toast.LENGTH_SHORT).show();
                    Util.mSMS_SENT_STATUS = Util.mSMS_SENT_RESULT_ERROR_NO_SERVICE;                        
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", Toast.LENGTH_SHORT).show();
                    Util.mSMS_SENT_STATUS = Util.mSMS_SENT_RESULT_ERROR_NULL_PDU;                        
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", Toast.LENGTH_SHORT).show();
                    Util.mSMS_SENT_STATUS = Util.mSMS_SENT_RESULT_ERROR_RADIO_OFF;                        
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", Toast.LENGTH_SHORT).show();
                    break;                        
            }
        }
    }, new IntentFilter(DELIVERED));        

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);        
} 
```

但它不起作用，当我尝试在 SMS 类中获取 Intent 时，我得到了 NullPointerException。

这就是我调用 AsyncTask 的方式：

```
new AsyncTask(this, txtWorkProgress, txtMsg, progressbar_line, new SMS()).execute(larr_what_have_to_upate_in_device.toString(), lCD_DEVIC); 
```

我知道新的 SMS() 不起作用，有人可以告诉我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:10:01.460

您报告崩溃发生在一行中：

```
PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(SENT), 0); 
```

我过去成功地设置了这些意图：

```
public static final String SENT = "SMS_SENT";
public static final String DELIVERED = "SMS_DELIVERED";

final String name = "Some-Name";
final PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
    (new Intent(SENT)).putExtra("name", name),
    PendingIntent.FLAG_UPDATE_CURRENT);
final PendingIntent delivedPI = PendingIntent.getBroadcast(this, 0,
    (new Intent(DELIVERED)).putExtra("name", name),
    PendingIntent.FLAG_UPDATE_CURRENT); 
```

因此，请尝试添加额外的数据`name`和`PendingIntent.FLAG`上面的值。

# php - EXTJS 4：可编辑网格不提交对 MySQL 数据库的更改

> ID：15502734
> 
> 赞同：2
> 
> 时间：2013-03-19T14:50:55.637
> 
> 标签：php, mysql, extjs, extjs4

亲爱的EXT爱好者，

我正在做一个项目，我需要一个管理面板来编辑工作职能。网格正在使用 Ext.Direct 与 MySQL 数据库通信。它可以很好地加载数据。网格显示 id 和函数名称

我在网格中添加了一个 RowEditing 插件，用于编辑功能设置。问题是，当我尝试提交更改时，我在网格的左上角看到一个小的红色三角形，控制台中没有任何错误代码。更改不会提交到 MySQL 数据库。

我的程序工作和加载数据的方式：

1.  这是我的功能商店：

    ```
    Ext.direct.Manager.addProvider(Ext.app.REMOTING_API);  

    Ext.define("MCS.store.FunctionStore", 
    {
        extend: "Ext.data.Store",
        requires: "MCS.model.Functions",
        model: "MCS.model.Functions",
        id: "FunctionStore",

        proxy: 
        {
            type: "direct",
            api: 
            {
                read: QueryDatabase.getFunctions,
                create: QueryDatabase.createFunction,
                update: QueryDatabase.updateFunction,
                destroy: QueryDatabase.removeFunction,
            }
        },
    }); 
    ```

2.  在控制器中：渲染管理面板时，商店会加载以下函数：

    ```
    loadStore: function()
    {  
        functionStore.load();  
    } 
    ```

3.  这是显示函数的网格：

    ```
    var rowEditingFunctions = Ext.create("Ext.grid.plugin.RowEditing", 
    {  
        clicksToMoveEditor: 1,
        autoCancel: false,
        listeners: {
            edit: function(editor,e,opt)
            {
                var grid = e.grid;
                var record = e.record;
                console.log(record.data.functionName);
                var editedrecords = grid.getStore().getUpdatedRecords();
                console.log(editedrecords);
            }
        }
    });

    var functionGrid = Ext.create("Ext.grid.Panel", 
    {
        height: 500,
        width: 800,
        store: functionStore,
        title:"List of Job Functions - double click to edit",
        columns: [
        {
            dataIndex: "id",
            width: 50,
            text: "ID"
        },{
            dataIndex: "functionName",
            flex: 1,
            text: "Function",
            field: 
            {
                type: "textfield",
                allowBlank: false
            }
        }],
        plugins: [
            rowEditingFunctions
        ],
        dockedItems: [
        {
            xtype: "toolbar",
            store: functionStore,
            dock: "bottom",
            items: [
            {
                iconCls: "add",
                text: "Add",
                handler: function() 
                {
                    rowEditingFunctions.cancelEdit();
                    var newRecord = Ext.create("App.model.Functions");
                    functionStore.insert(0, newRecord);
                    rowEditingFunctions.startEdit(0, 0);
                    var sm = functionGrid.getSelectionModel();
                    functionGrid.on("edit", function() {
                        var record = sm.getSelection()
                        functionStore.sync();
                        functionStore.remove(record);
                        functionStore.load();
                    });
                }
            }, {
                iconCls: "delete",
                text: "Delete",
                handler: function() 
                {
                    rowEditingFunctions.cancelEdit();
                    var sm = functionGrid.getSelectionModel();
                    Ext.Msg.show(
                    {
                         title:"Delete Record?",
                         msg: "You are deleting a function permanently, this cannot be undone. Proceed?",
                         buttons: Ext.Msg.YESNO,
                         icon: Ext.Msg.QUESTION,
                         fn: function(btn)
                         {
                            if(btn === "yes") 
                            {
                                functionStore.remove(sm.getSelection());
                                functionStore.sync();
                            }
                         }
                    });
                }
            }]
        }]
    }); 
    ```

如您所见，我在 RowEditing 插件的编辑事件中添加了一个侦听器，这将在控制台中显示已编辑记录的数组，就像它应该的那样。
4\. 最后，这是更新数据库的 PHP 代码：

```
 public function updateFunction(stdClass $params)
    {
        $db = $this->__construct();
        if ($stmt = $db->prepare("UPDATE functions SET functionName=? WHERE id=?")) 
        {
            $stmt->bind_param('si', $functionName, $id);
            $functionName = $params->functionName;
            $id = (int) $params->id;
            $stmt->execute();
            $stmt->close();
        }
        return $this;
    } 
```

5\. 奇怪的部分：一旦我添加了一个工作功能，我可以编辑所有其他功能，这些更改将提交到数据库......

作为旁注：我只是EXT的初学者，试图自学，但过去几天我一直在这个问题上打破头脑，所以我决定问你们。

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:51:54.150

我将这个错误保留了几个星期，并在本周再次开始研究它。我找到了解决方案。

我已将以下代码添加到控制网格的控制器中：

```
functionGrid.on('edit', function(editor, e) 
{
    e.store.sync();
}); 
```

现在，当我更新一条记录时，红色小三角形仍然出现，但在 e.store.sync() 函数完成后，它消失了，并且更新了数据库表。

不是 100% 干净的解决方案，但可以解决问题

如果有人有更好的解决方案，请告诉我

# android - 斜体提示文本，仅适用于某些设备

> ID：15502746
> 
> 赞同：1
> 
> 时间：2013-03-19T14:51:23.603
> 
> 标签：android

我有一个带有以下代码的editText：

```
<EditText
    android:id="@+id/term_entry"
    android:layout_width="500dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toRightOf="@+id/scrllyout"
    android:hint="Enter Command"
    android:imeOptions="actionNone|flagNoExtractUi"
    android:inputType="text|textImeMultiLine"
    android:singleLine="true"
    android:textColorHint="#80AAAAAA"
    android:textStyle="italic" 
/> 
```

我正在运行 4.0.4、Samsung Galaxy Tab™ 2 7.0 的平板电脑上开发，提示文本不是斜体。

但是，如果我在运行 4.0.4 的平板电脑上安装应用程序，它会显示为斜体，这是为什么呢？[http://www.focalprice.com/CE0127X/MD708_70_Capacitive_5point_TFT_Touch_Screen_Android_403_Tablet_PC.html?#.UPmbg6F9G6Q?Currency=EUR](http://www.focalprice.com/CE0127X/MD708_70_Capacitive_5point_TFT_Touch_Screen_Android_403_Tablet_PC.html?#.UPmbg6F9G6Q?Currency=EUR)

好的，我这样做是斜体的，在strings.xml里面：

```
 <string name="Enter_Command"><i>Enter Command</i></string> 
```

在 .xml 文件中

```
 <EditText android:hint="@string/Enter_Command" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:56:42.567

`textStyle`修改编辑的文本，而不是提示文本。提示文本样式是特定于设备的。

因此，这行 XML 不会影响提示：

```
android:textStyle="italic" 
```

# java - CMYK 中的 Java 打印

> ID：15502748
> 
> 赞同：1
> 
> 时间：2013-03-19T14:51:32.030
> 
> 标签：java, printing, cmyk

我想绘制一些 Graphics2D 对象，使用 java 打印机制。所以我必须定义一个可打印的子类。

```
public class PrintCMYK() implements Printable {
      public int print(Graphics g, PageFormat pf, int page)
                                           throws PrinterException {
          g.setColor(Color.RED);
          g.fillOval(44, 44, 100, 100);
      }
} 
```

所以这段代码只打印了一个红色的 rgb 圆圈。Java 可能会以某种方式转换某些 CMYK 中的 rgb 颜色，以便能够使用 CMYK 打印它。但我想在这里完全控制。所以我可以以某种方式明确设置想要的 CMYK 颜色。就像是

```
public class PrintCMYK() implements Printable {
      public int print(Graphics g, PageFormat pf, int page)
                                           throws PrinterException {
          float[] ff = {0, 1, 0, 0}; // pure magenta
          Color cmykColor = new Color(ColorSpace.getInstance(TYP_CMYK), ff, 1);
          g.setPaint(cmykColor);
          g.fillOval(44, 44, 100, 100);
      }
} 
```

不幸的是，此代码不起作用。

**UPD**：在 Postscript 中由 java 代码使用指令**setrgbcolor**生成，但我需要**setcmykcolor**。我能以某种方式实现这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:16:34.573

没有简单的方法可以做到这一点 - 因为没有用于 RGB 和 CMYK 之间转换的精确算法。如果您被迫使用 CMYK 颜色空间，您有两种方法：

1.  RGB 和 CMYK 之间的近似转换，反之亦然（[http://www.javascripter.net/faq/rgb2cmyk.htm，http://www.rapidtables.com/convert/color/cmyk-to-rgb.htm](http://www.javascripter.net/faq/rgb2cmyk.htm) [）](http://www.rapidtables.com/convert/color/cmyk-to-rgb.htm)

2.  使用配置文件（[RGB 到 CMYK 和反向算法](https://stackoverflow.com/questions/4858131/rgb-to-cmyk-and-back-algorithm)）

**编辑：**

RGB 描述计算机显示器的颜色。CMYK 描述印刷颜色。您无需关心 - CMYK 取决于打印机，只需使用 RGB，打印就可以了。

**编辑 2：** 如何确保打印颜色最接近所需颜色： [http ://desktoppub.about.com/cs/colorcalibration/a/cal_printer.htm?terms=color+calibration](http://desktoppub.about.com/cs/colorcalibration/a/cal_printer.htm?terms=color+calibration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T14:28:07.947

以下代码将创建具有 CMYK 颜色空间的 EPS：

```
import java.io.*;
import java.awt.*;
import java.awt.geom.*;
import org.apache.fop.util.CMYKColorSpace;
import org.apache.xmlgraphics.java2d.GraphicContext;
import org.apache.xmlgraphics.java2d.ps.EPSDocumentGraphics2D;

public class RenderEPS {
    public static void renderEPS(Path2D path, Color color, String filename) throws Exception {
        EPSDocumentGraphics2D graphics = new EPSDocumentGraphics2D(false);
        FileOutputStream fileOutputStream = new FileOutputStream(filename);
        graphics.setupDocument(fileOutputStream, 200, 200);
        graphics.setGraphicContext(new GraphicContext());
        graphics.setPaint(color);
        graphics.scale(50, 50);
        graphics.fill(path);
        graphics.finish();
    }

    public static void main(String[] args) {
        Path2D path = new Path2D.Double();
        path.moveTo(2, 1);
        path.lineTo(3, 2);
        path.lineTo(2, 3);
        path.lineTo(1, 2);
        path.lineTo(2, 1);

        float[] colorComponents = {1, 0, 0, 0}; // CMYK cyan
        Color color = new Color(CMYKColorSpace.getInstance(), colorComponents, 1f);

        try {
            renderEPS(path, color, "cmyk.eps");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

确认的：

```
$ grep cmyk cmyk.eps
1 0 0 0 setcmykcolor 
```

通过：

```
$ gs -o - -sQUIET -sDEVICE=inkcov cmyk.eps 
 0.01057  0.00000  0.00000  0.00000 CMYK OK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:57:18.640

我认为您正在寻找 java.awt.Color 类

所以：g.setColor（新颜色（200,10,15））；//注意数字是 0 到 255 之间的 r,g,b

# ruby-on-rails-3 - 使用包含空格的术语搜索 AR

> ID：15502751
> 
> 赞同：0
> 
> 时间：2013-03-19T14:51:43.257
> 
> 标签：ruby-on-rails-3, postgresql, activerecord, where

我在 Rails 中有这行代码

```
 @people = User.where("firstname @@ :query or lastname @@ :query", query: @query ) 
```

如果单独搜索`Joe`或查找名为 Joe Smith 的用户，这很有效`Smith`。

如果搜索，如何更改此行以获取用户`Joe Smith`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:23:50.947

```
@people = User.where("firstname @@ :query OR lastname @@ :query OR ((firstname || " " || lastname) = ?) @@ :query", query: @query ) 
```

See [How to concat two fields in Postgresql](https://stackoverflow.com/questions/5695926/how-to-concat-two-fields-in-postgresql)

# sql - 在 SQL Server 中，是否可以在 IN 子句中包含 2 列？

> ID：15502759
> 
> 赞同：1
> 
> 时间：2013-03-19T14:52:09.400
> 
> 标签：sql, sql-server, in-clause

我正在尝试使用 IN 子句，但是过滤需要在由 2 列定义的一组项目上。这可能吗？可能还有其他方法可以做到这一点（例如表变量），但如果可能的话，我想把它作为一个 IN 子句来做，因为这样在我的应用程序中动态创建会更加优雅和简单。

这个伪代码可能会让我更清楚我想要做什么。

```
SELECT *
FROM Distributors
WHERE (City,State) IN (('Springfield','OH'), ('Springfield','MO'), ('Houston','TX')) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T14:58:30.927

最简单的可能是生成一个伪表并对其执行连接。（ SQL [`VALUES`](http://msdn.microsoft.com/en-gb/library/dd776382%28v=sql.100%29.aspx)Server 2008 或更高版本）：

```
SELECT d.*
FROM Distributors d
JOIN (VALUES ('Springfield','OH'), ('Springfield','MO'), ('Houston','TX'))
    as t(City,State)
ON d.City = t.City and d.State = t.State 
```

或者`UNION ALL`：

```
SELECT d.*
FROM Distributors d
JOIN (SELECT 'Springfield','OH' UNION ALL SELECT 'Springfield','MO' UNION ALL SELECT 'Houston','TX')
    as t(City,State)
ON d.City = t.City and d.State = t.State 
```

我承认，我不再使用`IN`了，但是不同元素之间的分隔符都是相同的（在任何一种情况下），所以希望它仍然会命中：

> 在我的应用程序中动态创建更简单。

（此外，您的尝试不仅合理，而且实际上接近 ANSI 标准中的内容 - 可能值得您在[此连接问题](http://connect.microsoft.com/SQLServer/feedback/details/299231)上投票）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T14:55:53.317

```
select * 
from distributors
where  ( city = 'Springfield' and State = 'OH') OR
       ( city = 'Springfield' and State = 'MO') OR
       ( city = 'Houston' and State = 'TX') 
```

没那么复杂

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T14:54:19.700

可以执行多个`IN`语句，这可以通过以下方式实现：

```
 SELECT *
 FROM Distributors
 WHERE CITY IN ('SPRINGFIELD', 'HOUSTON')
 AND STATE IN ('OH', 'MO', 'TX') 
```

但是，您似乎想使用`OR`

```
 SELECT *
 FROM Distributors
 WHERE (City = 'Houston' AND State = 'TX') OR
 (City = 'Springfield' AND State = 'OH') OR
 (City = 'Springfield' AND State = 'MO') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T15:02:29.523

这是一个答案，不是很漂亮，但它有效：

```
SELECT *
FROM Distributors d
  INNER JOIN (SELECT 
                'Springfield' AS city
                ,'OH' AS state
              UNION 
              SELECT
                'Springfield'
                ,'MO'
              UNION
              SELECT 
                'Houston'
                ,'TX') x
WHERE d.city = x.city
  AND d.state = x.State 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T15:05:23.463

不支持此构造。但是，您可以以与其他建议略有不同的方式编写此代码：

```
SELECT <column list>
FROM dbo.Distributors
WHERE (City = 'Springfield' AND State IN ('OH', 'MO'))
   OR (City = 'Houston' AND State = 'TX'); 
```

# odbc - 当 SQL_SOPT_SS_CURSOR_OPTIONS 选项设置为 SQL_CO_FIREHOSE_AF 时，使用 firehose 游标的自动提取行为

> ID：15502762
> 
> 赞同：1
> 
> 时间：2013-03-19T14:52:18.600
> 
> 标签：odbc

在 firehose 游标上，当 statement 属性`SQL_SOPT_SS_CURSOR_OPTIONS`设置为`SQL_CO_FIREHOSE_AF`并执行该语句时，观察到 autofetch 的不同行为，如下所述：

1) 第一次调用 SQLExecute 时，它​​不会自动获取。2) 在同一个语句句柄上第二次调用 SQLExecute 时，在使用 关闭游标后`SQLFreestmt(hstmt, SQL_CLOSE)`，它会使用 自动获取 1 行`SQLExecute`。

那么预期的行为是什么，是否应该自动获取？这似乎是 SQL Native 客户端驱动程序中的错误。

我也没有看到文档，`SQL_CO_FIREHOSE_AF`但它列在`sqlncli.h`?

**带有注释的代码片段：**

```
 rc = SQLSetStmtAttr(hstmt1, (UWORD) SQL_SOPT_SS_CURSOR_OPTIONS, (SQLPOINTER) SQL_CO_FIREHOSE_AF, 0);
    ...
    rc = SQLSetStmtAttr(hstmt1, SQL_ATTR_ROW_ARRAY_SIZE, (SQLPOINTER)1, 0);   
 // Execute first statement
    rc = SQLExecute(hstmt1);  // it does not autofetch the data.
    ...

    rc = SQLFreeStmt(hstmt1, SQL_CLOSE);
    ...
    rc = SQLSetStmtAttr(hstmt1, SQL_ATTR_ROW_ARRAY_SIZE, (SQLPOINTER)1, 0);   
 // Execute first statement
 rc = SQLExecute(hstmt1);  // it  autofetch 1 record. 
```

谢谢，

穆克什

# html - 打包 Metro App 后如何获取自定义资源文件？

> ID：15502763
> 
> 赞同：2
> 
> 时间：2013-03-19T14:52:22.890
> 
> 标签：html, microsoft-metro, package, winjs, resource-files

我有一个 Metro 应用程序，其中使用不同的服务 URL 来接收数据。对于这种情况，我想在将我的应用程序构建到一个包中之后更改服务 URL。我按照 MSDN 站点中的说明将资源文件添加到我的应用程序中并进行了测试通过使用以下代码。

```
var resourceLoader = new Windows.ApplicationModel.Resources.ResourceLoader();
var resourceString =  resourceLoader.getString("greeting"); 
```

这里在打包之前在我的应用程序中获取问候**资源**值字符串。打包后我无法看到我的资源文件，但能够看到默认资源文件，如 en-US、fr-FR 等。任何人都可以提出一些解决方案来在打包后获取自定义资源文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T14:46:39.043

我看到它的方式你需要在打包应用程序之前添加资源文件......完成之后，你不能额外的资源......你可以做的是从服务中获取新的服务网址并将其保存为本地设置或在您的数据库中

**编辑：**另外，`resourceLoader.getString("greeting").value;`会给你实际的字符串，或者“问候”，以防找不到资源

# jquery - jquery替换字符串中的特殊字符

> ID：15502766
> 
> 赞同：0
> 
> 时间：2013-03-19T14:52:26.627
> 
> 标签：jquery, asp.net

我将替换`c:\pictures\picture1.png`为`c:\\pictures\\picture1.png`

IE：

```
var data="c:\pictures\picture1.png"
data=data.raplace('\','\\'); 
```

在 asp.net 中它可以运行

```
data=data.replace('\\','\\\\'); 
```

当我在 jquery 中使用此方法时，它只替换了第一个 '\' 字符，它是这样的：

```
c:\\pictures\picture1.png 
```

如何替换所有 '\' 字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:58:16.947

如果您使用正则表达式搜索 \，则可以使用表达式末尾的 g 标志来指示您要进行“全局”搜索。

另外，您的示例已关闭。任何时候你想使用文字`\`，你都需要把它写两次`\\`。

```
var data="c:\\pictures\\picture1.png"
data = data.replace(/\\/g,'\\\\') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:58:12.043

您可以使用 g.. 执行全局替换

g 修饰符用于执行全局匹配（查找所有匹配而不是在第一次匹配后停止）。

```
.replace(/\\/g,'\\\\'));

data = data.replace(/\\/g,'\\\\') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T14:58:56.683

表达式将在这里为您提供帮助：http: [//jsfiddle.net/jC8hM/](http://jsfiddle.net/jC8hM/)

```
var data = "c:\\pictures\\picture1.png"

alert(data);
data = data.replace(/\\/g, "\\\\");

alert(data); 
```

要编写“\”的单个实例，您需要编写“\”。所以要写“\”，你需要“\\”。

# perl - 获取哈希的哈希键

> ID：15502772
> 
> 赞同：0
> 
> 时间：2013-03-19T14:52:49.713
> 
> 标签：perl

我正在尝试获取哈希的哈希键并且总是有错误：

```
use strict;

my %oop_hash = ();
$oop_hash{'wfh'}{'ppb'} = "451103";
print (keys $oop_hash{'wfh'})."\n"; #1st try
print (keys %oop_hash{'wfh'})."\n"; #2nd try 
```

如何获取哈希的哈希键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:57:50.610

这有点棘手。正确的语法是

```
keys %{$oop_hash{'wfh'}} 
```

此外，正如您编写的那样，您的[print 语句不会完全按照您的意愿行事](https://stackoverflow.com/questions/3806368/)。由于`"\n"`Perl 解析该行的方式，不会将其附加到字符串中。您必须说以下之一：

```
print +(keys %{$oop_hash{'wfh'}}),"\n"; 
print ((keys %{$oop_hash{'wfh'}}),"\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:57:44.353

这里是：

```
#!/usr/bin/perl
use strict;
use warnings;

my %oop_hash = ();
$oop_hash{'wfh'}{'ppb'} = "451103";
print join ", ", keys $oop_hash{'wfh'} , "\n"; # "ppb, " 
```

# breeze - 版本 1.2.4 与框架 4.0 不兼容

> ID：15502777
> 
> 赞同：0
> 
> 时间：2013-03-19T14:53:00.940
> 
> 标签：breeze

我今天从头开始重建我的应用程序，并使用 NuGet 将微风安装到我的应用程序中，但由于依赖项而失败。对于接下来的几个版本，我被迫使用框架 4.0 而不是 4.5。是否有解决依赖问题的方法？

```
Attempting to resolve dependency 'Microsoft.AspNet.WebApi'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.WebHost (≥ 5.0.0-alpha-130319 && ≤ 5.0.65535.65535)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Core (≥ 5.0.0-alpha-130319 && ≤ 5.0.65535.65535)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Client (≥ 5.0.0-alpha-130319 && ≤ 5.0.65535.65535)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.OData'.
Attempting to resolve dependency 'Microsoft.Data.OData (≥ 5.2.0 && < 5.3.0)'.
Attempting to resolve dependency 'System.Spatial (= 5.2.0)'.
Attempting to resolve dependency 'Microsoft.Data.Edm (= 5.2.0)'.
Attempting to resolve dependency 'WebActivator'.
Attempting to resolve dependency 'Microsoft.Web.Infrastructure (≥ 1.0.0.0)'.
Attempting to resolve dependency 'EntityFramework (≥ 4.4 && < 6.0)'.
Attempting to resolve dependency 'Q'.
Successfully installed 'Microsoft.AspNet.WebApi.Client 5.0.0-alpha-130319'.
Successfully installed 'Microsoft.AspNet.WebApi.Core 5.0.0-alpha-130319'.
Successfully installed 'Microsoft.AspNet.WebApi.WebHost 5.0.0-alpha-130319'.
Successfully installed 'Microsoft.AspNet.WebApi 5.0.0-alpha-130319'.
Successfully installed 'System.Spatial 5.2.0'.
Successfully installed 'Microsoft.Data.Edm 5.2.0'.
Successfully installed 'Microsoft.Data.OData 5.2.0'.
Successfully installed 'Microsoft.AspNet.WebApi.OData 5.0.0-alpha-130319'.
Successfully installed 'WebActivator 1.5.3'.
Successfully installed 'Q 0.9.2'.
Successfully installed 'Breeze.WebApi 1.2.4'.
Install failed. Rolling back...
Updating 'Microsoft.AspNet.WebApi.WebHost 4.0.20710.0' to 'Microsoft.AspNet.WebApi.WebHost 5.0.0-alpha-130319' failed. Unable to find a version of 'Microsoft.AspNet.WebApi.HelpPage' that is compatible with 'Microsoft.AspNet.WebApi.WebHost 5.0.0-alpha-130319'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:29:35.400

Breeze 应该可以在 .NET 4 上正常工作。要确认这一点，只需创建一个针对 .NET 4 的新 ASP.NET MVC4 Web Api 项目，然后添加任何一个微风 nuget 包。两者都应该安装和工作没有问题。

我猜你的项目中有一些旧的 nuget 包引用。例如，我看到对“Microsoft.AspNet.WebApi.WebHost (≥ 5.0.0-alpha ...”的引用。Breeze 本身不依赖于任何“alpha”nuget 包。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:50:18.397

另外...确保您的 Web.config 具有以下重定向：

```
      <依赖程序集>
        <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089"culture="neutral" />
       <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" />
      </dependentAssembly>

```

# c# - 除非使用调试器单步执行，否则控制台程序会挂起

> ID：15502778
> 
> 赞同：0
> 
> 时间：2013-03-19T14:53:01.363
> 
> 标签：c#

嗨，我正在编写战舰游戏，但如果我设置了不止一艘船的位置，它似乎会挂起。但是，如果我单步执行代码，它就可以工作。这让我很困惑。这是让我感到悲伤的代码。

```
 class BsGame
    {
        private  GameHelper _gameHelper = new GameHelper();
        private List<Ship> _shipList = new List<Ship>();
        private int numberOfGuesses;

        static void Main(string[] args)
        {
            BsGame b = new BsGame();
            b.WelcomeMessage();
            b.CreateShips();
            b.PlayBattleships();

        }

        /// <summary>
        /// Creates the ships and gets a location
        /// </summary>
        public void CreateShips()
        {
            Ship b1 = new Ship("Battleship", 5);
            Ship b2 = new Ship("Battleship", 5);
            Ship d1 = new Ship("Destoyer", 4);

            _shipList.Add(b1);
            _shipList.Add(b2);
            _shipList.Add(d1);

            foreach (Ship s in _shipList)
            {
                int size = s.Size;
                List<string> newLoc = _gameHelper.PlaceShip(size);
                s.Location = newLoc;
            }
        }

        /// <summary>
        /// Contains a loop that gets user input and calls
        /// the game helper to force the case of the input
        /// to upper to match the AlPHA coordinates constant's case
        /// in the GameHelper class.
        /// </summary>
        public void PlayBattleships()
        {
            Console.WriteLine("Let's go!");
            while(_shipList.Count() > 0)
            {
                string guess = Console.ReadLine(); 
                guess = _gameHelper.ForceCase(guess);
                CheckGuess(guess);
            }
            EndGame();
        }

        private void EndGame()
        {
            throw new NotImplementedException();
        }

        private string CheckGuess(string guess)
        {
            numberOfGuesses++;
            string result = "miss";

            foreach (Ship ship in _shipList)
            {
                result = ship.CheckSelf(guess);
                if (result == "hit")
                {
                    break;
                }
                if (result == "kill")
                {
                    _shipList.Remove(ship);
                    break;
                }
            }
            return result;
        }

        public void WelcomeMessage()
        {
            Console.WriteLine("BattleShips - Drew Watson");
            Console.WriteLine("This is a simple one sided game of battleships. Your goal is to sink all ships");
            Console.WriteLine("Type co-ordinated to pick a square ie, A5, B1 etc.");
        }
    }
}

    /// <summary>
    /// Handles the main game loginc off the application.
    /// Creates and places ships on a grid.
    /// </summary>
    public class GameHelper
    {
        private const int MAX_ATTEMPTS = 200;
        private const string ALPHA = "abcdefghij";   // Concat to 0123456789 on the X axis
        private const int GRID_LENGTH = 10;        // The length of a grid row 
        private const int GRID_SIZE = 100;          // The total size of the grid

        private int[] _grid;            // The grid as an array of integers
        private int _shipCount;         // The number of ships

        public GameHelper()
        {
            _grid = new int [GRID_SIZE];
        }

        /// <summary>
        /// Changes the case of the co-ordinates to upper
        /// </summary>
        /// <param name="input"></param>
        /// <returns></returns>
        public string ForceCase(string input)
        {
            string inputLine = input;
            return inputLine.ToUpper();
        }

        /// <summary>
        /// Places a ship on the grid
        /// </summary>
        /// <param name="ship"></param>
        /// <returns></returns>
        public List<string> PlaceShip(int size)
        {
            List<string> alphaCells = new List<string>();  // Holds 'A5' style co-ordinates
            string[] alphaCoords = new string[size];
            int[] coords = new int[size];
            int location = 0;   
            int attempts = 0;   // Attempts counter
            string tempConcat;  // Temporary string for concatination
            bool success = false;

            _shipCount++;
            int increment = 1;
            if ((size % 3) == 1)
            {
                increment = GRID_LENGTH;
            }

            Random rnd = new Random();
            while (!success && attempts++ < MAX_ATTEMPTS)
            {
                location = rnd.Next(GRID_SIZE);
                int x = 0;
                success = true;
                while (success && x < size)
                {
                    if (_grid[location] == 0)
                    {
                        coords[x++] = location;
                        location += increment;

                        if (location >= GRID_SIZE)
                        {
                            success = false;
                        }
                        if (x > 0 && (location % GRID_LENGTH == 0)) // Right edge is out of bounds
                        {
                            success = false;
                        }
                        else
                        {
                            success = true;
                        }
                    }
                }
            }
            int i = 0;
            int row = 0;
            int column = 0;
            while (i < size)
            {
                _grid[coords[i]] = 1;
                row = (int)(coords[i] / GRID_LENGTH);
                column = coords[i] % GRID_LENGTH;
                tempConcat = Convert.ToString(ALPHA[column]).ToUpper();
                string stringRow = Convert.ToString(row);
                string result = String.Concat(tempConcat,stringRow);
                alphaCells.Add(result);
                i++;
                Console.WriteLine(result);
            }
            return alphaCells;
        }
    }

    public class Ship
    {
        // Properties
        public string Name { get; set; }
        public int Size { get; set; }
        public List<string> Location { get; set; }

        // Constructor
        public Ship(string name, int size)
        {
            Location = new List<string>();
            this.Name = name;
            this.Size = size;
        }

        // Methods
        public string CheckSelf(string input)
        {
            string result = "Miss";                         
            int index = Location.IndexOf(input); // If not found returns -1
            if (index >= 0)
            {
                Location.Remove(input); // Remove the cell

                if (Location.Count == 0) // If there are no locations left
                {
                    result = "Sink";    
                    Console.WriteLine("BOOM! You sunk a: " + Name); // The ship has been sunk
                }
                else
                {
                    result = "Hit";// Register a hit
                }
            }
            Console.WriteLine(result);
            return result;
        }
    } 
```

编辑：：：：：：：：：：：：：：

当添加不止一艘船时，它似乎进入了无限循环。多年来一直盯着这个，所以新鲜的眼睛可能会有所帮助：D

```
 while (success && x < size)
        {
            if (_grid[location] == 0)
            {
                coords[x++] = location;
                location += increment;

                if (location >= GRID_SIZE)
                {
                    success = false;
                }
                if (x > 0 && (location % GRID_LENGTH == 0)) // Right edge is out of bounds
                {
                    success = false;
                }
                else
                {
                    success = true;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:15:08.973

如果您将代码更改为此，它会起作用。

```
while (success && x < size)
{
  if (_grid[location] == 0)
  {
    coords[x++] = location;
    location += increment;

    if (location >= GRID_SIZE)
    {
        success = false;
    }
    if (x > 0 && (location % GRID_LENGTH == 0)) // Right edge is out of bounds
    {
        success = false;
    }
    else
    {
        success = true;
    }
  }
  x++;
} 
```

# sql - 使用 Sybase 时如何覆盖查询中的数据库排序规则？

> ID：15502780
> 
> 赞同：1
> 
> 时间：2013-03-19T14:53:05.620
> 
> 标签：sql, collation, sybase-asa

例如，当使用默认排序规则不区分大小写的 SQL 服务器数据库时，我可以在查询中覆盖该排序规则以获得区分大小写的比较，如下所示：

```
SELECT *
FROM MyTable
WHERE MyColumn LIKE '%test%' COLLATE SQL_Latin1_General_CP1_CS_AS 
```

如何在默认设置为不区分大小写的 Sybase 数据库中实现相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-15T08:34:13.693

这个问题几乎触及了10岁的幼稚年龄，但正是我正在寻找的。就我而言，我不需要一个like，而是一个简单的equals：

```
SELECT *
FROM MyTable
WHERE MyColumn = 'test'
AND hash(MyColumn) = hash('test') -- hash('TEST') would be different 
```

hash() 强制区分大小写（并且，是的，极大地减慢了查询速度！）

# wordpress - 如何在 Windows 上通过 XAMPP 避免（本地）Wordpress 中的图像 URL 出现 403 错误？

> ID：15502782
> 
> 赞同：5
> 
> 时间：2013-03-19T14:53:11.563
> 
> 标签：wordpress, permissions, xampp, http-status-code-403

Windows XP SP3 - Xampp 1.8.1 - PHP 5.4.7 - WordPress 3.5.1 - （所有驱动器使用 NTFS）

我认为我的问题与[此](https://stackoverflow.com/questions/9173880/403-forbidden-permission-to-access-images)类似，但这些解决方案似乎只适用于类 Unix 操作系统。

我在 Windows XP (SP3) 上通过 XAMPP 运行 Wordpress，并且一些（**但不是全部**）图像没有显示，因为我似乎没有访问它们的文件权限。在新选项卡中向下钻取（通过 Chrome 开发人员）到 URL 时，我收到 403 错误。

更改文件权限也适合我，如果是这样，我该如何在 Windows 上做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T01:07:04.440

你的问题很奇怪，也很不具描述性。你没有写`version of Xampp`你正在使用什么，什么`Version of PHP`，什么`version of Wordpress`..

您没有提供文件夹结构的详细信息（xampp 在哪里，图像在哪里？不同的驱动器？路径？？NTFS？FAT？

您至少应该发布一些显示图像和不显示图像的示例代码。

但是...这是您可能要检查或验证的事项列表

*   检查所有相关文件夹的权限是否为 755。
*   以上表示所有 wp 文件夹（用于测试）和图像文件夹
*   检查您的所有图像是否具有用于常规 php 处理的合法名称（仅`english characters`）
*   检查图像没有长名称。
*   检查网址不包含非法字符
*   将您的图像文件夹（无论是否为保管箱）放在 xampp httdocs 文件夹中。
*   更好的是 - 将它放在 wp uploads 文件夹中。
*   检查您的脚本中的服务器分隔符`/`或`\`（如果您复制并粘贴了路径..）
*   检查路径是否不超过 256 个字符（包括图像名称）
*   如果保管箱文件夹在保管箱服务器上而不是在本地计算机上（您没有指定），请确保您使用的是 PUBLIC URL。

我遇到的最烦人的问题与英文字符的点有关。未出现的图像是否有一些变音符号、重音符号或非 ( `a-z 0-9`) 字符？？如果有，请尝试重命名它们。

在您提供更多详细信息后，将更容易帮助您查明问题。

**编辑我**

阅读您的评论后，我相信您包含图像的所有方法都有点偏离，与 xampp 或您系统的文件夹结构/权限无关。在我看来，您只是不知道如何在 wp 主题中包含文件（但我可能错了..）

在 wordpress 中，要链接与主题相关的图像，理想情况下，图像应位于主题文件夹`wp-content/themes/your_theme/` 或更好的位置

```
wp-content/themes/your_theme/img/ 
```

那么您只需像这样调用图像（在您的主题中）：

```
<img src="<?php echo get_template_directory_uri(); ?>/img/yourimage.jpg" /> 
```

看：[get_template_directory_uri()](http://codex.wordpress.org/Function_Reference/get_template_directory_uri)

或者，您可以查看[get_stylesheet_directory_uri()](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri)和[get_theme_root_uri()](http://codex.wordpress.org/Function_Reference/get_theme_root_uri)

您的 css 图像与 css 文件相对的部分取决于您以相对方式放置它们的位置。他们在`themes/your_theme/img`或`themes/your_theme/css/img`或什么。无论如何，您对它们的称呼基本相同，但请注意，从 CSS 内部调用的图像将始终遵循 css 图像的正常规则，而不是 wordpress 的规则（应用于 php 文件）..

根据经验，所有图像（不包括 admin ）都应位于该`wp-content`文件夹下。

下的主题图像和下的`themes/your_theme`其他图像`wp-uploads`。

在 wp 中，像您描述/请求的路径`C:\xampp\htdocs\anneke_00\wp-content\img`是非标准的，不推荐使用，并且仅在非常极端的情况下出于非常特殊的原因使用（当然不是用于主题显示）。

如果你愿意，理论上你可以使用几种方法移动你的 wordpress 上传文件夹：

1.  方法A

    *   登录到 wordpress 管理部分。
    *   点击设置 -> 其他设置
    *   应用文件上传文件夹路径。
2.  方法B

如[法典](http://codex.wordpress.org/Editing_wp-config.php#Moving_wp-content)中所述：

```
define( 'WP_CONTENT_DIR', $_SERVER['DOCUMENT_ROOT'] . '/blog/wp-content' ); // in wp-config

define( 'WP_CONTENT_URL', 'http://example/blog/wp-content'); // in wp-config 
```

或仅用于上传

```
define( 'UPLOADS', '/wp-content/uploads' );// in wp-config 
```

还有其他几种方法，但我相信通过一些研究你可以找到它们..

现在，话虽如此，我不确定我是否理解您想要实现的目标，但如果它不是高级图像处理插件或某些极端情况下的特殊情况-问题不在于您的图像，也不在于您的权限，它存在于您的工作流程以及您在 wordpress 中使用主题图像的方式中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T19:24:53.013

在 Windows 资源管理器中右键单击有问题的图像之一并转到“安全”选项卡，您将它们设置为什么？“所有人”帐户应具有读取权限。

它们是通过 Wordpress 媒体管理器上传的图像吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T04:08:25.480

如果您有时间重新安装 XAMPP 和 WPress，它可能会起作用，在重新安装 Windows 后，这次将 XAMPP 安装在 c:\apps 或 d:\apps 中，并确保该文件夹对所有人都是读写的

安装 WPREss 和 XAMPP 时也要小心，如果它们是最新的稳定版并遵循说明。

是否有任何配置文件形成了一个 unix 站点？意思是它在另一个系统上，现在在这里通过 FTP 传输或复制？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T05:10:46.400

您需要遵循以下说明：

1.  右键单击 Web 浏览器从中接收 403 错误的目录。单击菜单中的“属性”条目。
2.  单击“属性”窗口中的“安全”选项卡。单击“匿名访问”部分中标记为“编辑”的第一个按钮。在此窗口中，选中“匿名访问”复选框。单击“确定”返回“属性”窗口。
3.  单击“属性”窗口中的“目录”选项卡。确保在“权限”部分中没有选中除“读取”之外的其他复选框。这允许用户阅读和浏览网站页面。单击“确定”按钮。
4.  通过打开 Web 浏览器并在地址栏中输入网站域来验证更改。

几个选项可能会因 Windows 版本而异。我正在运行 Windows 7。检查上述解决方案是否适合您。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-19T16:29:46.507

作为一个超级丑陋的解决方法，我决定将我所有的图像文件放在一个 Dropbox Public 文件夹中，并将它们的链接复制粘贴到我的 CSS 中。我仍然希望能妥善解决这个问题，但现在我至少可以继续这个项目。

如果我找到它，我会在这里发布一个更好的解决方案。

# java - 固定 JSpinner 的大小

> ID：15502783
> 
> 赞同：1
> 
> 时间：2013-03-19T14:53:14.607
> 
> 标签：java, swing, size, spinner, jspinner

我有一个 `JSpinner`对象可以填充它所包含的整个对象`JPanel`。如何将微调器设置为单行并且它的最大长度是面板宽度？

# android - 使用 smali 将 Tapit 添加到使用 GameSalad 制作的 APK 中？

> ID：15502785
> 
> 赞同：2
> 
> 时间：2013-03-19T14:53:21.887
> 
> 标签：android, reverse-engineering, smali, gamesalad

只是为了进一步澄清我的问题，我需要做的是将 Tapit SDK 实现到 GameSalad 制作的 android APK。

我已经知道了整个过程，我唯一的问题是让广告展示。

为了让您快速了解我的方法，我使用 apktool 将 apk 反编译为 smali，我还有一个可以反编译的 tapit apk，因此我可以只拥有 smali 代码，然后将其放入我需要的活动中它在。我确保我导入 tapit，在 com 下添加 lib 文件夹，编辑 android manifest xml，然后重新编译，然后辞职。

该应用程序不再崩溃，但它也没有显示我的广告。

我知道可以以这种方式编辑 apk，而且我也知道 dex2jar 并在 jasmine 中对其进行编辑，但我也无法让它以这种方式工作。

如果有人对此有任何见解，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T22:20:50.667

只需将广告提供商 SDK 中的 jar 文件添加到反编译的 apk 中即可：)

# python - 如何将 gtk.ListStore 转换为列表？

> ID：15502790
> 
> 赞同：1
> 
> 时间：2013-03-19T14:53:35.110
> 
> 标签：python, pygtk

我有一个带有 gtk.TreeView 的 GUI，我想将 gtk.ListStore 转换为 python 列表，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:42:46.650

您可以使用嵌套[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
rowList = [column for column in [row for row in yourListStore]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-25T09:25:07.680

我认为更简洁的实现是：

```
list_store_data = [list(row) for row in list_store] 
```

# powershell - 带有powershell的字符串中的变量

> ID：15502792
> 
> 赞同：2
> 
> 时间：2013-03-19T14:53:43.863
> 
> 标签：powershell, scripting, vmware

我试图构建一个由其他几个变量组成的变量，然后包括，例如：

```
$myString = "{$_.Name -like "
$myString += $computer[0]
$myString += " -Or $_.Name -like "
$myString += $computer[1]+"}"

Get-VM | Where $myString 
```

我已经尝试了 $($myString)、$myString、${$myString} 等所有可能的组合......它仍然列出所有计算机，就好像没有过滤器一样。如果我 ECHO Get-VM ... 它看起来非常好，如果我剪切它，它就可以工作。

有人有线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:07:38.760

Where-Object 过滤器是脚本块。脚本块在运行前编译，然后将其中的变量引用固定在脚本块中。一种延迟的方法是在设置局部变量之后使用 [scriptblock]::create 创建脚本块，就在你使用它之前。

```
$myString = "$_.Name -like "
$myString += $computer[0]
$myString += " -Or $_.Name -like "
$myString += $computer[1]

$filter = [scriptblock]::create($myString)

Get-VM | Where $filter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:06:33.227

您应该使用脚本块。每次调用它时它都会扩展变量。我自己安装了 Hyper-V，所以我为你做了一个例子：

```
PS > $computer = "DC", "SQL"

$mywherestatement = { $_.Name -like $Computer[0] -or $_.Name -like $Computer[1] }

Get-VM | Where $mywherestatement

Name State CPUUsage(%) MemoryAssigned(M) Uptime   Status
---- ----- ----------- ----------------- ------   ------
DC   Saved 0           0                 00:00:00 Operating normally
SQL  Saved 0           0                 00:00:00 Operating normally

PS > $computer = "CLIENT", "WebDev"

Get-VM | Where $mywherestatement

Name   State CPUUsage(%) MemoryAssigned(M) Uptime   Status
----   ----- ----------- ----------------- ------   ------            
CLIENT Saved 0           0                 00:00:00 Operating normally
WebDev Saved 0           0                 00:00:00 Operating normally 
```

如果您的`$computer`数组仅包含您要检查的名称，我会改用`-contains`它，因为它适用于任何大小的数组。前任：

```
PS > $computer = "DC", "SQL", "CLIENT", "WebDev"

Get-VM | Where { $Computer -contains $_.Name }

Name   State CPUUsage(%) MemoryAssigned(M) Uptime   Status            
----   ----- ----------- ----------------- ------   ------            
CLIENT Saved 0           0                 00:00:00 Operating normally
DC     Saved 0           0                 00:00:00 Operating normally
SQL    Saved 0           0                 00:00:00 Operating normally
WebDev Saved 0           0                 00:00:00 Operating normally 
```

# logging - Glassfish - 禁用记录到 server.log

> ID：15502793
> 
> 赞同：0
> 
> 时间：2013-03-19T14:53:53.330
> 
> 标签：logging, glassfish, log4j

我目前有一个 Glassfish 服务器将日志文件写入 server.log。我通过 cygwin 使用 tail -f server.log 读取日志文件。我的后端构建大约需要 3 分钟，并且有一半时间没有记录到它构建的文件，所以我有点好奇是否可以通过禁用日志文件并“监听”来自 glassfish 服务器的日志而不同时写入来优化日志记录日志文件。

我希望你明白我的意思，我很感激你的回答。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:56:09.080

> *“没有记录到它构建的文件的一半时间”*

听起来您已经知道如何禁用日志记录`server.log`？

可以在此处找到有关日志记录级别的或多或少的信息描述：

[配置日志服务](http://docs.oracle.com/cd/E18930_01/html/821-2416/gklmn.html#scrolltoc)

您可以在属性文件（在给定链接中描述）或从管理控制台更改日志记录服务配置：

*配置 --> 服务器配置 --> 记录器配置*

负责记录到日志文件的记录器称为`javax.enterprise.system`. 您可以将其切换到，`OFF`并且不会将任何消息记录到日志文件中。

有关更多信息，请参阅此[相关答案](https://stackoverflow.com/a/2384854/620338)。

# jquery - Rails 3 如何使用 JS 格式（AJAX）显示验证错误

> ID：15502795
> 
> 赞同：1
> 
> 时间：2013-03-19T14:53:57.077
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

在我的 Rails 3 应用程序中，我有以下部分在主布局中显示错误消息：

```
<% flash.each do |name, msg| %>
  <% if msg.is_a?(String) %>
    <div class="alert alert-<%= name == :notice ? "success" : "error" %>">
      <a class="close" data-dismiss="alert">&#215;</a>
      <%= content_tag :div, msg, :id => "flash_#{name}" %>
    </div>
  <% end %>
<% end %> 
```

我正在使用 JQuery 调用 create 方法并创建了一个 create.js.erb，它在创建模型或验证错误后成功运行。

问题是：如何在 create.js.erb 文件的部分内容中显示验证错误列表？或者......可以从控制器完成吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:05:54.390

在你的 create.js.erb 中试试这个，

```
<% if @your_variable.errors.count > 0 %> #your_variable is the variable you declared in your controller
  $('.new-user-form').html("<%= escape_javascript(render 'form')%>"); # new-user-form is the class name of the div that had the form
<% else %>
  window.location.href='<%= url_for(:action => :index) %>'
<% end %> 
```

在这种情况下，您的表单是带有 div 的部分，如下所示：

```
<%= form_for(@your_variable, :remote => true) do >
  ....
<% end %>

<div class="new-user-form"> # In your index or any page that you called that partial
</div> 
```

您需要`format js`在控制器中添加您的创建操作

如果您提供更多代码，我可以指定确切的内容。这只是你做的一个想法。

# javascript - 基于用户选择的数组与 Raphael、jQuery/JavaScript 的交集

> ID：15502798
> 
> 赞同：2
> 
> 时间：2013-03-19T14:53:59.523
> 
> 标签：javascript, jquery, arrays, raphael

第一次发布海报，仅略高于 JavaScript/jQuery/Raphael 新手。请原谅我的任何过犯。:)

因此，我一直在寻找问题的答案，并找到了一些有希望的线索，但是我的编程技能太幼稚了，无法将它们拼凑在一起。我已经与 Raphael 建立了一个交互式美国地图，并为用户提供了一组 13 个复选框，这些复选框最终会根据各种标准突出显示各州。每个复选框与大约 3 到 15 个状态（当然是所有路径）相关联。当用户选择几个复选框时，我需要找到数组的交集并仅突出显示这些状态。例如：

```
<input id="a1" value="arr1" type="checkbox" />
<input id="a2" value="arr2" type="checkbox" />
<input id="a3" value="arr3" type="checkbox" />
<input id="a4" value="arr4" type="checkbox" />
<input id="a5" value="arr5" type="checkbox" />

arr1 = [a,b,c];
arr2 = [b,c,d];
arr3 = [b,c,e];
arr4 = [a,e];
arr5 = [a,b]; 
```

例如，如果用户要选择 a1、a2 和 a3，那么我会为交叉点创建另一个数组——比如说，intArr = [b,c]——然后在适当的 Raphael 上更改填充颜色路径。

我能够通过蛮力解决这个问题，这要归功于我在这里找到的一个聪明的交集函数。但是对于一个更优雅的解决方案，一个可以节省我大约 100 行代码的解决方案，我猜我需要根据用户选择创建一个数组（或对象？）数组，然后迭代它以将第一个数组与任何主阵列中的其他人。有一个问题：我认为我需要数组都是 Raphael 元素变量。（除非我需要给每个元素一个 id 并稍后以某种方式定位它们以更改填充属性？）

这是我如何让它工作的：

```
var selectedStates = new Array();
var arr1 = new Array(stArr1,stArr2,stArr3,stArr4,stArr5,stArr6);
var arr2 = new Array(stArr2,stArr3,stArr7,stArr9);
// etc.

var arr1Sel = false;
var arr2Sel = false;
// etc.

$('#selecttools input').click(function(){ 
  // reset all global variables for each feature
  arr1Sel = false;
  arr2Sel = false;
  // etc. 

  // find checked boxes and set appropriate globals to true
  $('#selecttools').find(":checked").each(function() {
    if ($(this).val() == 'arr1') { arr1Sel = true; }
    if ($(this).val() == 'arr2') { arr2Sel = true; }
    //etc.

  // now run selectTheStates
  selectTheStates();
});

function selectTheStates() {
  // first reset selectedStates with the default fill color
  for (var i = 0; i < selectedStates.length; i++) {
    selectedStates[i].attr({fill: "#CCB2E5"});
  }
  // setup the intersect filter
  // thank so much, love this one http://jsfiddle.net/i_like_robots/KpCt2/
  $.arrayIntersect = function(a, b) {
    return $.grep(a, function(i) {
      return $.inArray(i, b) > -1;
    });
  }
  // first make a list of selected arrays
  var ourFinalList = new Array();
  // now, the real brute force...nested if statements that have to go!
  if (arr1Sel == true) {
    ourFinalList = arr1;
    if (arr2Sel == true) { ourFinalList = $.arrayIntersect(ourFinalList,arr2) }
    if (arr3Sel == true) { ourFinalList = $.arrayIntersect(ourFinalList,arr3) }
    // etc.
  } else if (arr2Sel == true) {
    ourFinalList = arr2;
    if (arr3Sel == true) { ourFinalList = $.arrayIntersect(ourFinalList,arr3) }
    // etc. lots of nesting here, yuck!
  } else if (arr13Sel == true) {
    ourFinalList = arr13;
  }
  // now paint all the states in our final list with Raphael
  for (var i = 0; i < ourFinalList.length; i++) {
    ourFinalList[i].attr({fill: "#B38CD8"});
  }
  // last step is reset selectedStates
  selectedStates = ourFinalList;
// end selectTheStates
} 
```

信不信由你，这行得通。但是代码非常臃肿而且看起来很业余，以至于我什至都不好意思把它贴在这里。但我真的很想学习如何做到这一点！请帮忙。

我猜我需要创建一个数组数组，找到该数组中的第一个数组，然后将它与数组中找到的任何其他数组进行比较/相交。不过，我在尝试这样做时遇到了几个问题。1\. 因为我试图创建一个实际上是数组的变量数组，所以我似乎将数组的值（而不是数组的占位符）推送到主数组中。也许我需要对象来做到这一点？

非常感谢您提供的任何帮助！

更新

特别感谢大卫。我终于让它工作了。我必须弄清楚的一个技巧：

大卫建议我做以下事情：

var selectedStates = selected.map(function() { return stateArrays[this]; });

花了一些研究，但我发现我需要双重包装我的返回值，否则整个数组将作为一个 concat 推送。所以，这行得通：

var selectedStates = selected.map(function() { return [stateArrays[this]]; });

之后，我只需要按照他的建议遍历数组数组。虽然，我从来没有得到 pop(); 出于某种原因工作。所以，我只是使用 selectedStates[0] 作为交集工具的第一个数组。

再次感谢大卫！

结束更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:12:44.557

首先，您需要某种方法来找出已选择的数组。

```
var selected = $(':checkbox:checked').map(function() { return this.value; });
// selected = ['arr1','arr2','arr3'] for instance 
```

我`:checkbox:checked`用来获取所有选中的复选框，因为您没有显示任何类名或任何我们可以用来区分感兴趣的复选框的内容。最好使用类似`.box-class:checked`or的东西`#parent :checkbox:checked`。

从那里，您想将数组名称列表转换为实际数组的列表。由于您的代码现在是这样，您刚刚创建了一堆名为 等的变量`arr1`。`arr2`您可能希望改为创建对象的这些属性：

```
var stateArrays = {
   arr1: [a,b,c],
   arr2: [b,c,d],
   ...
}; 
```

这样，您可以通过以下方式访问它们：

```
var x = stateArrays[myVariable];
// x = [a,b,c] if myVariable = 'arr1' 
```

如果您想保留单独的变量，您当然可以创建这样一个对象：

```
var stateArrays = {
   arr1: arr1, // where arr1 is already defined
   ...
}; 
```

所以，在你的场景中：

```
var selectedStates = selected.map(function() { return stateArrays[this]; });
// selectedStates = [[a,b,c],[b,c,d],[c,d,e]] for instance 
```

现在您只需要遍历您的数组数组即可获得相交：

```
var result = selectedStates.pop();
selectedStates.forEach(function(x) {
   result = $.arrayIntersect(result, x);
});

// result = [c], given the value of selectedStates as above 
```

上面的代码段使用`$.arrayIntersect`您在帖子中定义的代码。

# ruby - Ruby函数列表文件递归

> ID：15502799
> 
> 赞同：6
> 
> 时间：2013-03-19T14:54:02.370
> 
> 标签：ruby, file, function

我需要一个递归函数来列出文件夹中的文件：

```
def procdir(dirname)
  data = ''
  Dir.foreach(dirname) do |dir|
    dirpath = dirname + '/' + dir
    if File.directory?(dirpath) then
      if dir != '.' && dir != '..' then
        #puts "DIRECTORY: #{dirpath}" ; 
        procdir(dirpath)
      end
    else
      data += dirpath
    end
  end
  return data
end 
```

但结果：为空

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-19T15:04:42.937

[`Dir#glob`](http://ruby-doc.org/core-1.9.3/Dir.html#method-c-glob)当你给它`**`glob时， Stdlib 会递归。

```
def procdir(dir)
  Dir[ File.join(dir, '**', '*') ].reject { |p| File.directory? p }
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T14:56:54.937

使用`find`模块：

```
require 'find'

pathes = []
Find.find('.') do |path|
  pathes << path unless FileTest.directory?(path)
end

puts pathes.inspect 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-05T05:24:59.923

Old thread but perhaps someone might find it useful:

`array_of_all_files = Dir .glob("**/*") .reject { |file_path| File.directory? file_path }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T15:05:43.047

看起来递归有几个问题：

*   该`else`子句似乎与错误相关联`if`。它需要与第一个相关联`if`。
*   递归`procdir`调用的结果应添加到`data`.

如果您将代码缩进得更干净一些，那么可能会更容易发现这样的问题。以下包含两个修复：

```
def procdir(dirname)
  data = ''
  Dir.foreach(dirname) do |dir|
    dirpath = dirname + '/' + dir
    if File.directory?(dirpath) then
      if dir != '.' && dir != '..' then
        #puts "DIRECTORY: #{dirpath}" ; 
        data += procdir(dirpath)
      end
    else
      data += dirpath
    end
  end
  return data
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-09T13:19:39.150

如果您知道文件扩展名，则只需使用以下内容：

`Dir[Rails.root.join('config/locales/**/*.{rb,yml}')]`

# r - 从 R 中的语料库创建单词的子集

> ID：15502802
> 
> 赞同：4
> 
> 时间：2013-03-19T14:54:08.667
> 
> 标签：r, corpus, word-cloud

我有一个使用 XML 包从 Twitter 搜索创建的 1,500 行向量。然后我将其转换为与 tm 包一起使用的语料库。我想最终用这些词中的一些（最常见的）创建一个词云，所以我将它转换为 TermDocumentMatrix 以便能够找到频率最低的词。我创建了对象“a”，它是这些术语的列表。

```
a <- findFreqTerms(mydata.dtm, 10) 
```

wordcloud 包不适用于文档矩阵。所以现在，我想过滤原始向量以仅包含“a”对象中包含的单词（如果我使用对象本身，当然，每个常用词我只有一个实例）。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:35:22.060

您可以将 tdm 对象转换为矩阵并使用它来获得`wordcloud`可以使用的东西：

```
library(tm)
library(wordcloud)
# example data from the tm package
data(crude)
tdm <- TermDocumentMatrix(crude,
                      control = list(removePunctuation = TRUE,
                                     stopwords = TRUE))
v <- rowSums(as.matrix(tdm))
names(v) <- rownames(as.matrix(tdm))
v <- sort(v, decreasing=T) 
```

现在，您可以使用标准子集 ( ) 过滤掉不常用的单词`[`，或者您可以在要绘制时使用`min.freq`参数：`wordcloud`

```
wordcloud(names(v), v, min.freq=10, scale=c(10,.3)) 
```

![词云](../Images/2f33c64891d8b6656d2a8d9c8ed7edbf.png)

# php - PHP 动态包含其他 .php 文件

> ID：15502803
> 
> 赞同：0
> 
> 时间：2013-03-19T14:54:09.160
> 
> 标签：php, html

我是 php 编码的新手，我希望你能帮助一个 java 男孩摆脱困境。

我尝试在“index.php”中动态包含导航菜单和内容。如果 Í 测试下面的代码，我只会再次得到相同的 index.php，而无需更改导航菜单，这在我看来应该会发生，但也许我对 php 的了解不够好。

我的**index.php**：

```
<?php
    //^ E_NOTICE ^ E_WARNING
    error_reporting(E_ALL);    
    if (!defined("ABS_PATH"))define("ABS_PATH", $_SERVER['DOCUMENT_ROOT']);

    if (!isset($_SESSION['login'])) {
        session_start();
        $_SESSION['login'] = 1;
        $_SESSION['role'] = "guest";
        $_SESSION['navi'] = "/view/navigation_guest.php";
        $_SESSION['content'] = "/view/content_login.php";
        $_SESSION['calendar'] = "/view/calendar.php";
    }
?>

<!DOCTYPE html>
<html>
    <head>        
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Klausurplaner</title>

        <link href="view/design.css" type="text/css" rel="stylesheet">

    </head>

    <body>
        <div id="frame">
            <div id="header">
                <?php
                    include_once "/view/header.php";
                ?>
            </div>

            <div id="main">
                <div id="navi">
                    <ul>
                        <?php
                            include_once $_SESSION['navi'];
                        ?>
                    </ul>
                </div>

                <div id="content">
                    <?php
                        include_once $_SESSION['content'];
                    ?>
                </div>

                <div id="calendar">
                    <?php
                        include_once $_SESSION['calendar'];
                    ?>
                </div>
            </div>
        </div>     
    </body>

</html> 
```

如果我尝试使用以下内容修改 index.php，如上所述，我只会再次获得相同的网站，而无需更改导航菜单。

**content_login.php**：_

```
<?php
    if (!defined("ABS_PATH"))define("ABS_PATH", $_SERVER['DOCUMENT_ROOT']);
    include_once(ABS_PATH . "/Klausurplaner/Control/LoginControl.php");
?>

<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

        <link href="design.css" type="text/css" rel="stylesheet">  

    </head>

    <body>

        <h1>Bitte loggen Sie sich ein.</h1>

        <form method="post" action="control/btnLoginClicked.php">
            <p1>Benutzername:</p1>
            <br>
            <input id="edt_username" type="text" size="25%"/>
            <br>

            <p1>Passwort:</p1>
            <br>
            <input id="edt_password" type="password" size="25%"/>
            <br><br>
                <input name="btn_login" type="submit" value="login" size="5%"/>
        </form>
        <br><br>

           <!-- <br><br>
            <a href="content_guest_newPassword.php">Passwort vergessen</a> 
            <!-- E-Mail an die eigene E-Mail-Adresse mit neuem PW -->
    </body>

</html> 
```

**btnLoginClicked.php**：_

```
<?php
    if (!defined("ABS_PATH"))define("ABS_PATH", $_SERVER['DOCUMENT_ROOT']);

/**
 * @author Falk Libor
 * @version 1.0
 * 
 * Date: 19.03.2013
 */

if (isset($_POST['btn_login'])) {
    $_SESSION['navi'] = "/view/navigation_admin.php";
    $path = ABS_PATH . "/Klausurplaner/index.php";
    header("Location: " . $path);
    exit();
}

?> 
```

**编辑：** session_start() 现在在 if 块之前，但不知何故，在我单击“content_login.php”中的“btn_login”之前，它现在显示“navigation_admin.php”而不是定义的“navigation_guest.php”。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:55:53.387

$_SESSION 数组在你使用 session_start() 之前不存在，所以在你启动它之前，你永远不会从 session 中获得任何值，也不能添加到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:57:50.867

尝试调用`session_start` *之前*

```
 session_start();
    if (!isset($_SESSION['login'])) {   
            $_SESSION['login'] = 1;
            $_SESSION['role'] = "guest";
            $_SESSION['navi'] = "/view/navigation_guest.php";
            $_SESSION['content'] = "/view/content_login.php";
            $_SESSION['calendar'] = "/view/calendar.php";
        } 
```

# java - 检查一个 8 亿条目的 hashmap 是否包含一个元素

> ID：15502805
> 
> 赞同：3
> 
> 时间：2013-03-19T14:54:14.293
> 
> 标签：java, algorithm, data-structures

我有一个哈希图，其中包含约 8 亿个条目（字符串）。它实际上被序列化为一个我已经进入哈希映射的文件。

现在我有另一个巨大的字符串列表，大小约为 3500 万。我需要一个一个地读取这 3500 万个字符串，并以一种特定的方式对它们进行格式化，这种方式本身就是一个单独的方法（这是一个非常轻量级的处理）。

然后我需要检查对列表中的一个字符串进行格式化的结果是否已经存在于 hashMap 中。

在 Java 中执行此操作的最有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:04:21.820

您可以尝试使用 Bloom 过滤器

> 一种节省空间的概率数据结构，用于测试元素是否是集合的成员。假阳性检索结果是可能的，但假阴性是不可能的；即查询返回“在集合内（可能是错误的）”或“绝对不在集合内”。

（引自[维基百科](http://en.wikipedia.org/wiki/Bloom_filter)）

Google Guava[在 java 中提供了一个实现](https://code.google.com/p/guava-libraries/wiki/HashingExplained#BloomFilter)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:57:04.157

如果您的大型数据集已经在您正在从磁盘反序列化的哈希表中并且您无法更改它，那么我怀疑您是否会比仅仅做显而易见的事情并直接检查哈希表做得更好。任何将大型哈希表转换为另一种格式的方法都可能比按原样一次在表上进行所有查找更昂贵。（约 3500 万次恒定时间操作与至少 8 亿次 + 3500 万次恒定时间操作相比，另一个常数可能不会好多少，可能更多取决于您要使用的新格式。）

如果存储大型数据集的表已经是线程安全的，并且运行程序的计算机具有多个内核，则可以通过为每个内核运行单个查找线程来获得加速，但即使这样也可能不会加快速度由于协调开销以及每个单独的操作都非常便宜的事实，up（或者实际上可能会减慢速度）。

您是否有能力改变大型数据集的准备方式？例如，与其把它写成一个散列集，你能把它写成别的东西吗？你能改变默认的散列函数吗？你知道你正在散列的字符串的属性，这些属性可以用来构建一个更便宜的散列函数吗？它们会在输入文件中以特定顺序出现吗？这类事情可能会用于进行更快的查找，但是相对于简单方法的显着加速可能将依赖于更多地了解您的问题的具体细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:08:53.640

**如果您必须**将其放在内存中，我将从改进散列函数的开发方式开始。可以在dzone的[文章中找到帮助解决此问题的好资源](http://java.dzone.com/articles/java-hashing)

如果您不关心维护排序结构时可能引入的延迟，那么更进一步的是使用 Map 接口的另一个[实现](http://xxl.googlecode.com/svn/javadoc/v2/xxl/core/collections/BinarySearchTreeMap.html)

# excel - 根据条件在 Excel 2007 中选择多行

> ID：15502810
> 
> 赞同：1
> 
> 时间：2013-03-19T14:54:29.650
> 
> 标签：excel, excel-2007

我有一个包含大约 200 000 行客户数据的 Excel 文件。参数之一是客户 ID。此文件用于定期向所有客户发送产品。邮寄这些产品时自然会出现错误，因此邮寄服务会向我们提供写在损坏或由于某种原因无法邮寄的产品上的客户 ID。我正在寻找一种最快的方法来从原始文件中选择、复制和删除具有这些 ID 的行。例如，邮件服务向我们返回一个 Excel 文件，其中仅包含有缺陷产品的客户 ID。我必须找到包含此 ID 的所有行，将它们复制到一个新文件中并从原始文件中删除它们。到目前为止，这是手动完成的，但这需要太多时间。我的问题是 - 有没有办法加载 ID 列表？s 并让 Excel 选择包含它们的行，或者至少对工作表进行排序，以使具有这些 ID 的行位于顶部？欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:40:38.823

我设法通过使用 VLOOKUP 功能将必要的数据复制到新工作表中来解决这个问题 - 这解决了提取需要重复发货的客户的问题。我解决了 Excel 之外的删除部分（我创建了一个执行此操作的应用程序）。

# php - 在 WordPress 中显示当前的帖子自定义分类

> ID：15502811
> 
> 赞同：8
> 
> 时间：2013-03-19T14:54:29.893
> 
> 标签：php, wordpress, foreach, taxonomy, custom-taxonomy

我已经在 WordPress 上创建了自定义分类法，我想在列表中的帖子上显示当前的帖子分类法。

我正在使用以下代码来显示一个名为“Job Discipline”的自定义分类法：

```
<ul>
            <?php $args = array('taxonomy' => 'job_discipline'); ?>
            <?php $tax_menu_items = get_categories( $args );
            foreach ( $tax_menu_items as $tax_menu_item ):?>
            <li>
                Job Discipline: <a href="<?php echo get_term_link($tax_menu_item,$tax_menu_item->taxonomy); ?>">
                    <?php echo $tax_menu_item->name; ?>
                </a>
            </li>
            <?php endforeach; ?>
</ul> 
```

这只是我想列出的众多分类法之一。

**问题**是上面的代码显示了所有至少有一个职位而不是当前职位分类的“工作纪律”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T16:30:18.313

## 如何显示当前的帖子分类法和术语

这是来自 Codex 的修改后的代码（见下面的链接），它将显示当前帖子的所有分类法以及附加的术语：

```
<?php 
// get taxonomies terms links
function custom_taxonomies_terms_links() {
    global $post, $post_id;
    // get post by post id
    $post = &get_post($post->ID);
    // get post type by post
    $post_type = $post->post_type;
    // get post type taxonomies
    $taxonomies = get_object_taxonomies($post_type);
    $out = "<ul>";
    foreach ($taxonomies as $taxonomy) {        
        $out .= "<li>".$taxonomy.": ";
        // get the terms related to post
        $terms = get_the_terms( $post->ID, $taxonomy );
        if ( !empty( $terms ) ) {
            foreach ( $terms as $term )
                $out .= '<a href="' .get_term_link($term->slug, $taxonomy) .'">'.$term->name.'</a> ';
        }
        $out .= "</li>";
    }
    $out .= "</ul>";
    return $out;
} ?> 
```

这是这样使用的：

```
 <?php echo custom_taxonomies_terms_links();?> 
```

## 演示输出

`country`如果当前帖子具有分类法，则输出可能如下所示`city`：

```
<ul>
    <li>  country:  
          <a href="http://example.com/country/denmark/">Denmark</a> 
          <a href="http://example.com/country/russia/">Russia</a> 
    </li> 
    <li>   city:  
           <a href="http://example.com/city/copenhagen/">Copenhagen</a> 
           <a href="http://example.com/city/moscow/">Moscow</a> 
    </li> 
</ul> 
```

## 参考

Codex 中的原始代码示例：

[http://codex.wordpress.org/Function_Reference/get_the_terms#Get_terms_for_all_custom_taxonomies](http://codex.wordpress.org/Function_Reference/get_the_terms#Get_terms_for_all_custom_taxonomies)

希望这会有所帮助-我相信您可以将其适应您的项目；-)

## 更新

> 但是，如果我只想显示其中的一部分而不是全部怎么办？另外，我想自己命名它们，而不是用下划线给出分类名称。知道如何实现吗？

这是实现这一目标的一项修改：

```
function custom_taxonomies_terms_links() {
    global $post;
    // some custom taxonomies:
    $taxonomies = array( 
                         "country"=>"My Countries: ",
                         "city"=>"My cities: " 
                  );
    $out = "<ul>";
    foreach ($taxonomies as $tax => $taxname) {     
        $out .= "<li>";
        $out .= $taxname;
        // get the terms related to post
        $terms = get_the_terms( $post->ID, $tax );
        if ( !empty( $terms ) ) {
            foreach ( $terms as $term )
                $out .= '<a href="' .get_term_link($term->slug, $tax) .'">'.$term->name.'</a> ';
        }
        $out .= "</li>";
    }
    $out .= "</ul>";
    return $out;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-17T12:32:19.970

以防万一有人想按父母分组显示它们。

基本上和上面的答案一样。我在另一个帖子中使用了这个答案： [https](https://stackoverflow.com/a/12144671) ://stackoverflow.com/a/12144671 对它们进行分组（按 id 和按父级）。

修改函数以将其与对象一起使用：

```
function object_group_assoc($array, $key) {
    $return = array();
    foreach($array as $object) {
        $return[$object->$key][] = $object;
    }
    return $return;
} 
```

最终功能：

```
// get taxonomies terms links
function custom_taxonomies_terms_links() {
    global $post, $post_id;
    // get post by post id
    $post = &get_post($post->ID);
    // get post type by post
    $post_type = $post->post_type;
    // get post type taxonomies
    $taxonomies = get_object_taxonomies($post_type);

    $out = "<ul>";
    foreach ($taxonomies as $taxonomy) {
        $out .= "<li>".$taxonomy.": ";
        // get the terms related to post
        $terms = get_the_terms( $post->ID, $taxonomy );

        if ( !empty( $terms ) ) {
            $terms_by_id = object_group_assoc($terms, 'term_id');
            $terms_by_parent = object_group_assoc($terms, 'parent');
            krsort($terms_by_parent);

            foreach ( $terms_by_parent as $parent_id => $children_terms ){

                if($parent_id != 0){//Childs
                    //Add parent to out string
                    $parent_term = $terms_by_id[$parent_id][0]; //[0] because object_group_assoc return each element in an array

                    $out .= '<li><a href="' .get_term_link($parent_term->slug, $taxonomy) .'">'.$parent_term->name.'</a>';

                    //Add children to out string
                    $out .= '<ul>';
                    foreach ($children_terms as $child_term) {

                        $out .= '<li><a href="' .get_term_link($child_term->slug, $taxonomy) .'">'.$child_term->name.'</a></li>';
                    }
                    $out .= '</ul></li>';

                } else {//parent_id == 0

                    foreach ($children_terms as $child_term) {
                        if(!array_key_exists($child_term->term_id, $terms_by_parent)){//Not displayed yet becouse it doesn't has children
                            $out .= '<li><a href="' .get_term_link($child_term->slug, $taxonomy) .'">'.$child_term->name.'</a></li>';
                        }

                    }
                    $out .= '</ul></li>';
                }
            }

        }
        $out .= "</li>";
    }
    $out .= "</ul>";
    return $out;
} 
```

使用方法相同：

```
<?php echo custom_taxonomies_terms_links();?> 
```

注意：仅使用一级子项。

# android - 是否可以在队列中执行多个 http 请求？

> ID：15502815
> 
> 赞同：2
> 
> 时间：2013-03-19T14:54:36.997
> 
> 标签：android, http, networking, queue, httprequest

我想向队列中添加多个 HTML 请求。这些请求必须自动一个一个地执行，我需要分别处理每个请求的响应。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T12:15:31.817

HttpClient 不是异步的，不支持并行连接。您可以使用每个线程执行单独的 HttpClient 实例。

您可能还想查看 ExecutorService：http: [//developer.android.com/reference/java/util/concurrent/ExecutorService.html](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html)

# linux - sed 插入“//”

> ID：15502820
> 
> 赞同：0
> 
> 时间：2013-03-19T14:54:47.007
> 
> 标签：linux, bash, sed

希望这里是一个简单的 - 我正在尝试在我 grep 的行中插入 // 以散列 php 选项

```
grep user@ file | sed -i 's/"//"/user' 
```

我不确定如何在 sed 中使用字符“//”？我还在考虑一个 sed 命令，通过在每个 cron 的开头添加一个 # 来完成所有的 cron 作业

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:00:33.987

`sed`可以使用以下分隔符`/`：

```
sed -i '/user@/s|^|//|' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:59:54.937

如果我理解正确并且您想`//`在行首添加：

```
sed -i '/user@/ s_^_//_' file 
```

（不先尝试`-i`）

如果你的意思是别的，请澄清。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T23:12:16.340

实现它的另一种方法是：

```
sed 's|user@|//&|' file.php 
```

它`|`用作分隔符和`&`匹配模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:27:51.050

我找到了另一种选择来让它工作！！！

```
sed -i '/user@/s/^/\/\//' file 
```

# java - 缓存注释信息的地图是否需要同步？

> ID：15502826
> 
> 赞同：0
> 
> 时间：2013-03-19T14:54:57.587
> 
> 标签：java, map, annotations, synchronization

我们使用 HashMap 来缓存方法上的注释查找。使用 Spring 的[AnnotationUtils.findAnnotation](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/core/annotation/AnnotationUtils.html#findAnnotation%28java.lang.reflect.Method,%20java.lang.Class%29)检索注释。不使用缓存会导致性能严重下降。

我们的实现看起来像：

```
public class SomeService {

    // Caches annotations on methods. The value can be null!
    private static final Map<Method, MyAnnotation> ANNOTATION_CACHE = new HashMap<Method, MyAnnotation>();

    private MyAnnotation findAnnotation(Method m) {
        if (ANNOTATION_CACHE.containsKey(m)) {
            return ANNOTATION_CACHE.get(m);
        }

        MyAnnotation a = AnnotationUtils.findAnnotation(m, MyAnnotation.class);
        ANNOTATION_CACHE.put(m, a);

        return a;
    }

    public void doSomethingWith(Class<?> clazz) {
        for (Method m : clazz.getMethods()) {
            MyAnnotation a = findAnnotation(m);
            if (a != null) {
                // do something with annotation a
            }
        }
    }
} 
```

现在的问题是我是否需要同步对 ANNOTATION_CACHE Map 的访问。可能发生的最糟糕的事情是两个并行线程将相同的 (m, a) 对放入缓存映射中，这不会造成伤害，不是吗？

我的第一个想法是使用 ConcurrentHashMap，但它不允许空值（如果方法没有注释 => null，则此处需要）。使用 Collections.synchronizedMap() 并同步对地图的每次访问也不理想，因为这个 doSomethingWith() 方法被非常频繁地调用。

那么这种情况下是否真的需要同步对HashMap的访问呢？缓存在运行时从不更改，键/值对只插入一次，永远不会被删除，但会被读取多次。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:04:32.013

如果您有一个专门写入地图的阶段，然后有一个专门读取地图的不同阶段，那么您不需要并发收集。您还可以通过使用不可变的映射写后阶段包装它来确保映射保持不变。

例如，使用 Guava 的[不可变映射](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/ImmutableMap.html)：

```
ImmutableMap.copyOf(map); 
```

如果您预见到对集合的并发读/写/删除访问，那么您绝对应该使用 ConcurrentHashMap；因为读/写/删除操作不是原子的，你最终可能会得到一些非常奇怪的结果。

> 我的第一个想法是使用 ConcurrentHashMap，但它不允许空值（如果方法没有注释 => null，则此处需要）

然后**不要一开始就插入空值**；更好的是，从地图中删除现有的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T14:22:52.303

> 现在的问题是我是否需要同步对 ANNOTATION_CACHE Map 的访问。可能发生的最糟糕的事情是两个并行线程将相同的 (m, a) 对放入缓存映射中，这不会造成伤害，不是吗？

是的，如果第一个 put 需要扩展支持 hashmap 的数组，这可能会造成伤害

如果在第一个 put 扩展 hashmap 时调用了第二个 put，则可能会发生不良和不可预测的结果。

# javascript - 带有自动换行的 HTML5 Canvas 打字机效果？

> ID：15502827
> 
> 赞同：3
> 
> 时间：2013-03-19T14:55:03.310
> 
> 标签：javascript, html, canvas

我正在尝试在 HTML5 Canvas 上获得动画打字机效果，但我真的很努力使用自动换行。

这是我在 Gist 中的 Shapes.js：[https ://gist.github.com/Jamesking56/0d7df54473085b3c5394](https://gist.github.com/Jamesking56/0d7df54473085b3c5394)

在那里，我创建了一个具有很多方法的 Text 对象。其中之一称为`typeText()`.

`typeText()`基本上是从打字效果开始的，但它一直在下降，我真的很难找到一种修复自动换行的方法。

任何人都可以指导我这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:43:31.787

我使用的一个解决方案大致是：

```
var maxWidth = 250;
var text = 'lorem ipsum dolor et sit amet...';

var words = text.split(' ');
var line = [words[0]]; //begin with a single word

for(var i=1; i<words.length; i++){
    while(ctx.measureText(line.join(' ')) < maxWidth && i<words.length-1){
        line.push(words[i++]);
    }
    if(i < words.length-1) { //Loop ended because line became too wide
        line.pop(); //Remove last word
        i--; //Take one step back
    }
    //Ouput the line
} 
```

由于似乎无法测量输出文本的高度，因此您需要手动将输出的每一行偏移一些硬编码的行高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:03:35.320

我无法弄清楚你的`Text`构造函数是如何工作的。所以我写了一个独立的函数（不属于任何对象）。您需要传递给这个函数的只是一个字符串、`X`和`Y`位置、行高和填充。它假定将画布分配给变量`canvas`，并将 2d 上下文分配给变量`ctx`。

```
var canvas, ctx;
function typeOut(str, startX, startY, lineHeight, padding) {
    var cursorX = startX || 0;
    var cursorY = startY || 0;
    var lineHeight = lineHeight || 32;
    padding = padding || 10;
    var i = 0;
    $_inter = setInterval(function() {
        var w = ctx.measureText(str.charAt(i)).width;
        if(cursorX + w >= canvas.width - padding) {
            cursorX = startX;
            cursorY += lineHeight;
        }
        ctx.fillText(str.charAt(i), cursorX, cursorY);
        i++;
        cursorX += w;
        if(i === str.length) {
            clearInterval($_inter);
        }
    }, 75);
} 
```

[在这里](http://jsfiddle.net/Sann/KpdQa/)查看演示。

**提示**-

我正在浏览你的代码，发现了一些链接 -

```
function Rectangle(x,y,width,height,colour) {
    //properties
    this.draw = function() { //Don't assigns object methods through constructors
        ctx.fillStyle = this.colour;
        ctx.fillRect(this.x, this.y, this.width, this.height);
    };
} 
```

您不应该通过构造函数向对象添加方法，因为它会在每次实例化对象时创建方法。而是将方法添加到对象的原型中，这样，它们将只创建一次，并由所有实例共享。喜欢-

```
function Rectangle(x,y,width,height,colour) {
    //properties
}
Rectangle.prototype.draw = function() {
    ctx.fillStyle = this.colour;
    ctx.fillRect(this.x, this.y, this.width, this.height);
} 
```

另外，我发现您正在创建额外的变量来指向某些对象。喜欢 -

```
var that = this;
var fadeIn = setInterval(function() {
    //code
    that.draw();
    //code
}, time); 
```

您不应该创建对该对象的额外引用`Text`。使用`bind`方法，以便`this`指向`Text`对象。喜欢-

```
var fadeIn = setInterval(function() {
    //code
    this.draw(); // <-- Check this it is `this.draw` no need for `that.draw`
    //code
}.bind(this), time);   //bind the object 
```

[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)阅读有关绑定的更多信息。

希望有帮助。

**PS：**每个字符75毫秒，那将是神圣的每分钟800个字符！！！

* * *

**更新**- 如果您想要可缩放的图形，您应该考虑[SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)。Canvas 是基于光栅的，而 SVG 是基于矢量的。这意味着 SVG 可以轻松调整大小，而当您调整画布大小时，画布的内容将开始像素化并且看起来很模糊。[阅读更多](http://en.wikipedia.org/wiki/Canvas_element#Canvas_versus_Scalable_Vector_Graphics_.28SVG.29)。

要调整画布内容的大小，您需要重新绘制整个画布。每当在画布上绘制某些东西时，浏览器都会绘制并忘记它。因此，如果您想更改对象的大小/位置，您需要完全清除画布并重新绘制对象。在您的情况下，您需要`ctx.font`根据画布的大小更改画布，然后更新画布，这将是一项非常乏味的任务。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T14:53:06.717

`<canvas>`不是为文本处理而设计的。通过将透明 DOM 元素覆盖在`<canvas>`. 这自然假设您不需要在`<canvas>`. 否则，您需要在 Javascript 中重新实现整个文本处理的东西，这有点重新发明轮子，因为浏览器可以简单地为我们做这件事。

这里有更多信息如何使用 CSS`position: absolute`和`position: relative`.

[允许用户在 HTML5 Canvas 游戏中输入文本](https://stackoverflow.com/questions/13430069/allowing-the-user-to-type-text-in-a-html5-canvas-game/13430878#13430878)

我认为你应该有一个 DOM 元素，它的所有文本都是透明颜色的，每个字母都用`<span>`. 然后，您只需`<span>`通过调整不透明度开始使这些 s 可见。这样字母位置就不会改变。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T18:13:09.597

就个人而言，当我在画布游戏中需要文本时，我总是使用位图字体。它有几个优点：

1.  画布上的 FillText 很慢。位图字体要快得多。
2.  您知道每个字母的宽度，使换行和文本对齐更加容易。

您仍然可以通过使用案例合成操作来选择字体颜色，并通过动态调整绘制宽度高度来选择字体大小。

# sql - 查找列中缺失的数字

> ID：15502828
> 
> 赞同：1
> 
> 时间：2013-03-19T14:55:03.740
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在 T-SQL 中有此列：

```
 1
 2
 3
 7
 10 
```

让 SQl 有一个函数来检测序列 4,5,6 和 8,9 中的缺失数字我尝试过类似 if (ab >1) 那么我们有一个缺失的数字

与合并，但我不明白。感谢任何方向

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:14:45.397

你可以试试这个：

```
DELCARE @a
SET @a = SELECT MIN(number) FROM table
WHILE (SELECT MAX(number) FROM table ) > @a
BEGIN
IF @a NOT IN ( SELECT number FROM table )
PRINT @a
SET @a=@a+1
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:44:31.470

以下查询将识别每个序列的开始位置和缺少的数字：

```
select t.col + 1 as MissingStart, (nextval - col - 1) as MissingSequenceLength
from (select t.col,
             (select min(t.col) from t t2 where t2.col > t.col) as nextval
      from t
     ) t
where nextval - col > 1 
```

这是使用相关子查询来获取表中的下一个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-29T21:05:56.510

我知道这是一个迟到的答案，但这里有一个查询，它使用递归表表达式来获取表中最小值和最大值之间的缺失值：

```
WITH CTE AS
(
    --This is called once to get the minimum and maximum values
    SELECT nMin = MIN(t.ID), MAX(t.ID) as 'nMax' 
    FROM Test t
    UNION ALL
    --This is called multiple times until the condition is met
    SELECT nMin + 1, nMax 
    FROM CTE
    WHERE nMin < nMax
)

--Retrieves all the missing values in the table.
SELECT c.nMin
FROM CTE c
WHERE NOT EXISTS
(
    SELECT ID
    FROM Test
    WHERE c.nMin = ID
) 
```

这是使用以下架构测试的：

```
CREATE TABLE Test
(
    ID int NOT NULL
)

INSERT INTO Test
    Values(1)

INSERT INTO Test
    Values(2)

INSERT INTO Test
    Values(3)

INSERT INTO Test
    Values(7)

INSERT INTO Test
    Values(10) 
```

# android - 使用 alpha 将亮度设置为低于系统限制并保存值

> ID：15502832
> 
> 赞同：2
> 
> 时间：2013-03-19T14:55:09.543
> 
> 标签：android

我一直在尝试将亮度设置在 Android 设置的限制之下。Google Play 中有两个类似的应用程序这样做：

*   [阴影](https://play.google.com/store/apps/details?id=com.googlecode.eyesfree.shades&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGVjb2RlLmV5ZXNmcmVlLnNoYWRlcyJd)
*   [屏幕过滤器](https://play.google.com/store/apps/details?id=com.haxor&feature=related_apps#?t=W251bGwsMSwxLDEwOSwiY29tLmhheG9yIl0)

第二个，甚至允许使用黑屏手机，这正是我在我的应用程序中所需要的。

关于亮度还有很多其他问题，但不要将其设置在此系统限制下，我发现一个问题几乎相同但对我没有帮助： [亮度屏幕过滤器](https://stackoverflow.com/questions/4286075/brightness-screen-filter)

所以经过大量搜索后，我得到了以下代码：

```
int brightness=0; //0 to 255, so I set it to a low level (not enough for me)
ContentResolver cResolver = getContentResolver();  

//set the system brightness value, and if active, disable auto mode.
System.putInt(cResolver, System.SCREEN_BRIGHTNESS, brightness);  
System.putInt(cResolver, System.SCREEN_BRIGHTNESS_MODE, System.SCREEN_BRIGHTNESS_MODE_MANUAL);  

//previous lines don't set the brightness to the current screen so we set it like this: 
LayoutParams layoutpars = getWindow().getAttributes();  
layoutpars.screenBrightness = brightness / (float)255; 

//Now we have brightness to the minimum allowed by Android but
//to achieve what these apps do, I have to reduce alpha of the window to the min
//then the screen is black like I want, and totally usable!
layoutpars.alpha=0.05f;
window.setAttributes(layoutpars); 
```

这里 alpha 是关键，这是我想要做的，但仅适用于当前窗口/屏幕，我需要将此 alpha 作为默认值保存到系统中，就像我正在使用亮度和手动模式一样在任何地方应用.

你知道我应该怎么做吗？我找不到值“System.SCREEN_ALPHA”来使用 System.putInt 或其他方式设置它。

在我之前链接的另一个问题中，pheelick 回复了使用透明不可触摸屏幕的建议，但这对我不起作用，结果并没有像以前的应用程序那样给人一种关闭屏幕的感觉。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:33:02.200

我决定在我的应用程序中使用 alpha 实现这个功能。所以我根本无法解决最初的问题......

无论如何，最后似乎这个问题的解决方案是Pheelicks在这里回答的一个：[https ://stackoverflow.com/a/4287597/1667990](https://stackoverflow.com/a/4287597/1667990)

-这是发起一项始终处于领先地位的活动，

- alpha 为 0.0f，所以它是透明的，

- 将触摸重定向到后面的活动：

```
//Let touches go through to apps/activities underneath.
Window window = activity.getWindow();
window.addFlags(FLAG_NOT_TOUCHABLE); 
```

- 上一个链接中未解释的最重要的事情是将我们窗口后面的暗淡设置为 1（就像消息框中的暗淡，但设置为最大值以在后面为黑色 :D ）

```
window.setDimAmount ((float)1.0) ;
window.setFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND,
    WindowManager.LayoutParams.FLAG_DIM_BEHIND); 
```

我没有尝试过，并决定不在我的应用程序中这样做，因为它可能会在我的情况下带来意想不到的行为，但我认为它绝对应该有效，如果有人尝试请添加您的反馈！

# maven - run 和 run-war 的不同配置

> ID：15502836
> 
> 赞同：1
> 
> 时间：2013-03-19T14:55:19.507
> 
> 标签：maven, configuration, jetty, maven-jetty-plugin

是否可以配置码头？我的意思是这样的情况：如果我用 jetty:run 启动了 jetty，如果我输入了 jetty:run-war，请执行此操作 [不同的 webAppDirecotry]，请执行其他操作，例如将 scanIntervalSeconds 设置为 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:02:20.523

You can do this with Maven profiles. Define your plugin's settings in there and trigger the profiles.

# javascript - 将数据从选项卡 1 传递到选项卡 2

> ID：15502838
> 
> 赞同：1
> 
> 时间：2013-03-19T14:55:24.187
> 
> 标签：javascript, html, google-chrome, tabs

我是 stackoverflow 的新手，我来到这里是因为我找不到关于 html 和 javascript 问题的明确答案。

我想显示一个带有 3 个按钮的 HTML 页面，这些按钮将在单击时执行 3 个脚本。我需要 tab#1 与 tab#2 对话以执行代码，但我一直坚持如何去做——这是我的 HTML 代码：

```
<!DOCTYPE html>
<html>
<body>

<!-- START STAGE 1 -->
<script>
function stage1()
{
// Here I want to open up a new tab so I'd do:
window.open('http://webpage.com', '_blank');
}
</script>

<!-- START STAGE 2 -->
<script>
function stage2()
{
// From here, I want to execute some JavaScript to the new tab I've opened
}
</script>

<!-- START STAGE 3 -->
<script>
function stage3()
{
// Again, I want to execute another script on the new tab I've opened
}
</script>

<button type="button" onClick="stage1()">STAGE1</button>
<hr />
<button type="button" onClick="stage2()">STAGE2</button>
<hr />
<button type="button" onClick="stage3()">STAGE3</button>
</body>
</html> 
```

如果有人可以重新编写此代码并在 3 中留出一个空格，以便我的代码从 tab#1 在 tab#2 上执行，我将不胜感激。

先感谢您！- 对不起，我有点菜鸟哈哈。干杯，德克兰土地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:31:21.493

这并不简单，但我认为您可以使用“代理”页面来完成此操作，该页面显示预期的网站（Twitter）`iframe`并在您在地址中传递参数时运行您需要的脚本（例如，`proxy.htm?action=step2`）甚至`proxy2.htm`为每个步骤使用单独的专用代理页面 ( )。

但是为了使它起作用，我相信您需要为锚链接的目标使用自定义名称（`a target="proxy_twitter"` )，以便所有链接在同一个选项卡中打开。

一个可能的问题是第二个选项卡会在每次点击时重新加载代理页面，但也许可以通过将参数更改为主题标签来避免这种情况（`proxy.htm#action=step2` ) 来避免这种情况。

我自己对这种机制没有任何经验，但我已经看到它在某些网站上使用过。

# java - 从源代码中剥离 html 标签

> ID：15502840
> 
> 赞同：0
> 
> 时间：2013-03-19T14:55:34.447
> 
> 标签：java, android, html, regex

```
HTML = EntityUtils.toString(response.getEntity());
ResponseHandler<String> responseHandler = new BasicResponseHandler();
String ResponseBody = httpclient.execute(httppost, responseHandler);
table = ResponseBody.substring(ResponseBody.indexOf("<table border=\"1\" cellpadding=\"0\" width=\"100%\" cellspacing=\"0\">"));
table = table.substring(0, table.indexOf("</table>"));  

String htmlString = table;
String noHTMLString = htmlString.replaceAll("\\<.*?\\>", "");
noHTMLString = noHTMLString.replaceAll("\r", "<br/>");
noHTMLString = noHTMLString.replaceAll("\n", " ");
noHTMLString = noHTMLString.replaceAll("\'", "&#39;");
noHTMLString = noHTMLString.replaceAll("\"", "&quot;");

TextView WORK = (TextView) findViewById(R.id.HTML);
WORK.setText(htmlString); 
```

我正在使用正则表达式来提取`HTML`代码。这是我的代码。看起来是正确的，但表（子字符串）是返回的不是提取的文本。有人知道为什么吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:57:48.820

您必须使用新的 String 对象作为 TextView 的源。改变这个：

```
WORK.setText(htmlString); 
```

到以下：

```
WORK.setText(noHTMLString); 
```

# .net - RegEx 将找到带引号的字符串，但不在 HTML 标记内

> ID：15502841
> 
> 赞同：1
> 
> 时间：2013-03-19T14:55:35.120
> 
> 标签：.net, regex

我一直在寻找一个正则表达式，它可以识别 HTML 页面内容中的引号字符串，但如果引号是 HTML 标记属性的一部分，则不会。

例子：

```
<p id="123">This is some "quoted text" in a <span class="test">sentence.</span></p> 
```

在上面的行中，我想找到“引用文本”字符串，而不是 id="123" 或 class="test"。

我尝试了一些但没有工作。

下面的正则表达式提取上面示例中的 HTML 标记并排除句子内容......但我希望它做相反的事情：

```
<[^>]+> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:59:02.277

如果您想解析 HTML 以从中获取有用的东西，请使用[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/) - 它使执行此类操作变得相当简单。

另请参阅：[您不能使用正则表达式来解析 HTML](https://stackoverflow.com/a/1732454/847383)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:05:39.707

在这种特殊情况下，我认为您不会有很多保证。对于如何将引用的字符串放在 HTML 片段中，有太多的选择。但是，根据您上面给出的具体示例，以下表达式将找到“引用文本”：

```
(?<=(?:^|>)[^<>]*)"[^"]+"(?=[^<>]*(?:<|$)) 
```

# c# - 如何在 c# wpf 中结合其他变量保存类列表

> ID：15502844
> 
> 赞同：1
> 
> 时间：2013-03-19T14:55:42.997
> 
> 标签：c#, wpf, serialization

嗨，我刚开始使用 C# WPF，并阅读了有关序列化以存储或加载数据的信息。我的问题是如何存储一个包含另一个类列表和一些附加参数的类？

我的第一个类（MeterValues）包含许多参数（类型、速度等）

`public class MeterValues{}`

我现在创建了第二个类来存储一个包含多个第一类类型实例的列表。（所以如果我有 3 个不同的仪表，这个列表大小 = 3）

`public class MeterValuesList : IList<MeterValues>{}`

现在我想为第二个类添加一个额外的参数，这个参数独立于第一个类，所以它应该只保存一次。（不是针对 class1 的每个实例）

为了让我的问题更清楚，我可以在第一个类中添加额外的参数，但是如果我有 100 个不同的仪表，则参数存储 100 次，我只需要存储一次。

关于如何做到这一点的任何想法？

PS：如果您需要任何其他信息，请尽管询问，我非常渴望学习并帮助您帮助我解决这个问题。提前致谢。

更新：

我可以将 MeterValuesList 类保存到 .xml 文件中，但只有 List 存储在文件中，额外参数不显示（在我将其写入文件之前，它就在类中，使用调试器检查但未显示在文件中）

```
MeterValuesList meterValuesList = DataContext as MeterValuesList;
meterValuesList.CommSettings = "Com5:19200,8,n,1";

    FileStream stream = null;
    try
    {
        stream = new FileStream(filename, FileMode.Create, FileAccess.Write);
        XmlSerializer serializer = new XmlSerializer(typeof(MeterValuesList));
        serializer.Serialize(stream, meterValuesList);
        stream.Close();
    } 
```

这是将类保存到 xml 文件后的结果。缺少额外的参数。

```
<?xml version="1.0"?>
<ArrayOfMeterValues xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<MeterValues></MeterValues>
</ArrayOfMeterValues> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:22:45.080

除非您计划覆盖或扩展 IList 已有的功能，否则没有理由在 MeterValuesList 类中继承它。这感觉就像使用“具有”关系而不是“是”关系的情况。

试试这个：

```
public class MeterValuesGroup
{
    List<MeterValues> MeterList { get; set; }
    int ExtraParameter { get; set; }
    // whatever additional parameters you need here.
} 
```

如果你确实需要从 IList 或 IEnumerable 继承，你可以做类似的事情。但是，为了正确序列化此类，您必须在 MeterValues 和 MeterValuesList 中实现 IXmlSerializable。

（这是一个很好的例子：[Proper way to implement IXmlSerializable?](https://stackoverflow.com/questions/279534/proper-way-to-implement-ixmlserializable)）

```
public class MeterValuesList : IList<MeterValues>, IXmlSerializable
{
    MeterValues[] _MeterList { get; set; }
    string CommSettings = "Com5:19200,8,n,1";

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        writer.WriteAttributeString("CommSettings ", CommSettings );

        foreach (var mv in _MeterList)
        {
            // kind of a bad example, but hopefully you get the idea
            if (mv== null) 
                return;
            writer.WriteStartElement("MeterValues");
            mv.WriteXml(writer);
            writer.WriteEndElement();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:15:51.703

您可以在第二个类 MeterValueList 中添加此属性并对此类进行序列化，当您对其进行反序列化时，将分配该附加属性。

```
 MeterValueList m = new MeterValueList();
     m.AdditionalParameter = 100;
    MemoryStream memorystream = new MemoryStream(); 
    BinaryFormatter bf = new BinaryFormatter();
    bf.Serialize(memorystream, m);
    byte[] yourBytesToDb = memorystream.ToArray();
    //here you write yourBytesToDb to database

    //----------read from database---------------------
    //here you read from database binary data into yourBytesFromDb
    MemoryStream memorystreamd = new MemoryStream(yourBytesFromDb);
    BinaryFormatter bfd = new BinaryFormatter();
    MeterValueList  md = bfd.Deserialize(memorystreamd) as MeterValueList ;
    var i  =  md.AdditinalParameter; // must print 100 
```

# sql - 在加入行后获取重复项

> ID：15502848
> 
> 赞同：0
> 
> 时间：2013-03-19T14:55:53.840
> 
> 标签：sql, duplicates

在添加了几个连接后，我在连接时会得到重复数据和其他数据。有什么想法我可能做错了吗？

没有欺骗的旧代码：

```
SELECT
    dbo.dateonly(ctl.datetrans) AS DateRecorded, 
    L.Clientkey AS ClientNum, 
    L.Fullname, 
    cs.Datesvc, 
    cs.chargekey, 
    ctl.CheckNum, 
    ctl.ReceivedFrom, 
    ctl.Delta, 
    CONVERT(varchar(10), dept.deptkey) AS Deptkey, 
    dept.DeptName, 
    dept.PgmName, 
    CONVERT(varchar(10), dept.pgmKey) AS PGMKey, 
    ctl.Transtypelu
FROM
    bil_Chargetranslog ctl 
    LEFT JOIN dbo.BIL_ChargeSlips cs 
        ON cs.Chargekey = ctl.Chargekey 
    LEFT JOIN dbo.BLV_Clients L 
        ON cs.ClientKey = L.ClientKey 
    LEFT JOIN Blv_DeptPgm dept 
        ON dept.Pgmkey = cs.PgmLU
WHERE
    (
        ctl.Transtypelu = 4 
        AND (
            (
                ctl.descr <> 'Client Payment' 
                AND ctl.descr <> 'Copayment'
            ) OR ctl.descr IS NULL
        )
    )

UNION ALL

/* note below that the checknum is converted to a varchar for the query*/ 
SELECT 
    dbo.dateonly(daterecorded) AS daterecorded, 
    L.Clientkey AS ClientNum, 
    L.Fullname, 
    DatePayment, 
    NULL AS chargekey, 
    CONVERT(varchar(15), checknum) AS checknum, 
    NULL AS receivedfrom, 
    (- 1 * Amount) AS delta, 
    CONVERT(varchar(10), dept.deptkey) AS Deptkey, 
    dept.DeptName, 
    dept.PgmName, 
    CONVERT(varchar(10), dept.pgmKey) AS PGMKey, 
    4 AS transtypelu
FROM
    bil_clientdeposit 
    LEFT JOIN dbo.BLV_Clients L 
        ON bil_clientdeposit.ClientKey = L.ClientKey 
    LEFT JOIN Blv_DeptPgm dept 
        ON dept.Pgmkey = Bil_ClientDeposit.PgmKey 
```

这是我的新代码：

```
SELECT
    dbo.dateonly(ctl.datetrans) AS DateRecorded, 
    L.Clientkey AS ClientNum, 
    L.Fullname, 
    cs.Datesvc, 
    cs.chargekey, 
    ctl.CheckNum, 
    ctl.ReceivedFrom, 
    ctl.Delta, 
    CONVERT(varchar(10), dept.deptkey) AS Deptkey, 
    dept.DeptName, 
    dept.PgmName, 
    CONVERT(varchar(10), dept.pgmKey) AS PGMKey, 
    ctl.Transtypelu, 
    pr.PlanName
FROM
    bil_Chargetranslog ctl 
    LEFT JOIN dbo.BIL_ChargeSlips cs 
        ON cs.Chargekey = ctl.Chargekey 
    LEFT JOIN dbo.BLV_Clients L 
        ON cs.ClientKey = L.ClientKey 
    LEFT JOIN Blv_DeptPgm dept 
        ON dept.Pgmkey = cs.PgmLU 
    left join BIL_ARTRANSLOG AR 
        ON ctl.chargekey = ar.chargekey 
    left join BIL_PAYORPLANS PR 
        ON PR.PAYORPLANKEY = AR.PAYORPLANKEY
WHERE
    (
        ctl.Transtypelu = 4 
        and ar.TransTypeLU = 4 
        AND (
            (
                ctl.descr <> 'Client Payment' 
                and AR.ARDescr <> 'Client Payment' 
                AND ctl.descr <> 'Copayment'
                and AR.ARDescr <> 'Copayment'
            ) OR ctl.descr IS NULL 
            or ar.ARDescr is null
        )
    )

UNION ALL

/* note below that the checknum is converted to a varchar for the query*/ 
SELECT  
    dbo.dateonly(daterecorded) AS daterecorded, 
    L.Clientkey AS ClientNum, 
    L.Fullname, 
    DatePayment, 
    NULL AS chargekey, 
    CONVERT(varchar(15), checknum) AS checknum, 
    NULL AS receivedfrom, 
    (- 1 * Amount) AS delta, 
    CONVERT(varchar(10), dept.deptkey) AS Deptkey, 
    dept.DeptName, 
    dept.PgmName, 
    CONVERT(varchar(10), dept.pgmKey) AS PGMKey, 
    4 AS transtypelu, 
    NULL as planname
FROM
    bil_clientdeposit 
    LEFT JOIN dbo.BLV_Clients L 
        ON bil_clientdeposit.ClientKey = L.ClientKey 
    LEFT JOIN Blv_DeptPgm dept 
        ON dept.Pgmkey = Bil_ClientDeposit.PgmKey 
```

我添加了以下几行：

```
left join BIL_ARTRANSLOG AR 
    ON ctl.chargekey = ar.chargekey 
left join BIL_PAYORPLANS PR 
    ON PR.PAYORPLANKEY = AR.PAYORPLANKEY 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:15:33.293

如果您添加了几个额外的连接并突然看到重复的行，则可能在一个或两个连接表中存在一对多关系，而在其他连接表中不存在。尝试做 a`SELECT *`并查看似乎是重复记录的不同列。

您可以通过在`SELECT`语句前加上以下内容来删除重复项：

```
SELECT DISTINCT
    dbo.dateonly(ctl.datetrans) AS DateRecorded, 
    L.Clientkey AS ClientNum, 
    L.Fullname, 
    .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:10:53.653

“union”和“union all”之间的区别在于后者返回所有记录，而前者返回不同的记录。如果您不想重复记录，请使用前者。

# java - Java - 有多少字符串 concat 应该提示使用 StringBuilder？

> ID：15502850
> 
> 赞同：2
> 
> 时间：2013-03-19T14:55:55.813
> 
> 标签：java, string, stringbuilder

我知道 StringBuilder 应该用于连接多个字符串而不是使用 +。我的问题是什么是截止点？

有人告诉我，如果连接 4 个或更多字符串，您应该使用 StringBuilder.append()，而对于其他任何事情，请使用 +。是这样吗？还是 stringbuilder 比 4 更有效的点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:06:26.663

**零。**

许多年前，在一个遥远的 Java 版本（1.4）中，有人建议将连接替换为`StringBuffer`（线程安全的等价物`StringBuilder`，尚未发明）。

随着 的引入`StringBuilder`和对连接的重新定义，以更快的速度`StringBuilder`“优化”代码使用`StringBuffer`导致不必要的同步，而非优化代码`+`自动享受`StringBuilder`.

`StringBuilder`当连接与控制结构或循环混合时，或者当我需要更新字符串中间的某些字符时，我会使用它。否则，我假设编译器足够聪明，可以很好地处理传统的串联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:00:10.523

从 Java 1.5 开始，编译器会自动在源代码中使用`StringBuilder`when 。`+`

来自[String 的Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)：

> Java 语言为字符串连接运算符 ( + ) 以及将其他对象转换为字符串提供了特殊支持。字符串连接是通过 StringBuilder（或 StringBuffer）类及其 append 方法实现的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T14:59:25.577

从 jse 5 开始，+ 号在编译期间转换为 stringbuilder。

但是有一个警告，这个：

```
String blam = a + b + c + d + e; 
```

产生一个字符串生成器和 5 个附加（如预期的那样）

这个; 然而：

```
String blam = a;
blam += b + c;
blam := d + e; 
```

产生 3 个字符串生成器（每行一个）。

要点：+号很好，只需将其全部堆叠在一行代码中即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:00:38.537

编译器非常擅长优化这些东西，所以通常你不会获得太多。但是，例如，如果您在循环中进行连接，则可能会从使用 StringBuilder 中获得一些好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T14:59:05.307

没有*明确*的答案，因为它取决于`JVM`实施。`StringBuilder`当我需要连接超过 3 个字符串时使用。

我注意到一个很好的案例。当您需要连接时，`static final String`您不必使用`StringBuilder`. 编译器将连接它而我们的性能下降：

```
final class Example {

    public static final String STRING_ONE = "string";
    public static final String STRING_TWO = "string";
    public static final String STRING_THREE = "string";
    public static final String STRING_FOUR = "string";

    public String getBigString() {
        return STRING_ONE + STRING_TWO + STRING_THREE + STRING_FOUR;    
    } 

} 
```

我也对这个问题很感兴趣。[我试图实施一个好的测试并在这里](https://stackoverflow.com/questions/15294426/how-do-to-perform-a-good-performance-comparations-test)询问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T14:59:23.640

我会说编译器会用`StringBuilder`自己替换加号。

在这种情况下，您需要避免几种情况。例如在循环中使用**+ 。**每次迭代`StringBuilder`都会创建一个新的。

可能想读这个[问题](https://stackoverflow.com/questions/5430168/string-concatenation-into-stringbuilder-java)

# php - 在本地 Intranet 上获取计算机名称

> ID：15502851
> 
> 赞同：1
> 
> 时间：2013-03-19T14:55:58.837
> 
> 标签：php, javascript, activex

我们已经为我们的本地 Intranet 编写了一个在 php 页面中显示计算机名称和 IP 的代码，因此我们的用户服务可以询问最终用户他们的计算机名称。它目前仅在 IE 中运行，并且仅当文件在本地计算机上时才运行。

```
<script type="text/javascript" language="javascript">           
    var cpu = new ActiveXObject("WScript.Network");
    document.write("<h1 style=\"color:#ffc533\"> Your Computer's name is: " + cpu.ComputerName + "</h1>")
</script>
<h1>Your IP Address is: <?php print $_SERVER[REMOTE_ADDR] ?></h1> 
```

当我们在计算机上测试时，两者都显示，但当我们将其上传到服务器时，它只显示 IP 地址。仅在 IE 中工作不是问题，但是，本地问题是。所以我的问题是两个方面。如何让计算机名称显示在页面上，或者有没有更好的方法让它在不启用反向 DNS 的情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:08:52.130

**编辑开始**

原始答案如下，我将其添加为打开安全整体的替代方法。

您可以编写自己的 ActiveX DLL 并在每台客户端计算机上注册它。让它实现一个返回计算机名称的类，或者您甚至可以只包装 WScript.Network。然后，在您的类中实现[IObjectSafety](http://support.microsoft.com/kb/182598) [接口](http://msdn.microsoft.com/en-us/library/aa768224%28v=vs.85%29.aspx)并将其标记为安全的脚本。WScript 对象是不安全的，因为它也可以修改计算机上的文件，但是如果您只包装单个函数来检索计算机名称，那么您的控件将无法修改任何文件。

为了在您的 IObjectSafety 实现中安全地编写脚本，请`SetInterfaceSafetyOptions`返回`S_OK`IID_IActiveScript、IID_IDispatch 和 IID_IPersist。有关实施详细信息，请参阅提供的链接。

这是更多的工作，但消除了向用户展示如何使用以下选项运行不安全控件的危险。

**编辑结束**

在每台客户端机器上：

打开 Internet Explorer 并选择“工具”->“Internet 选项”菜单：

![1](../Images/be8d4e9652372f8a9777488ff8cb1870.png)

选择安全选项卡并按自定义级别按钮：

![2](../Images/d2e7d0eb27d50aea457033711e1a97d5.png)

确保在 ActiveX 控件和插件部分下，将两个设置下载未签名的 ActiveX 控件和初始化并编写未标记为可安全执行脚本的 ActiveX 控件设置为提示：

![3](../Images/b97ad7d6288bfce1631e6df64dd0d62d.png)

在两个对话框上按 OK 以关闭它们。

此外，要确保脚本运行时 (WScript) 已注册，请转到“开始”菜单并按“运行”，键入“cmd”并按 Enter：

![4](../Images/fef6f24a4038b010c12f90396539a186.png)

应打开命令提示符：

确保驱动器是驱动器 C，键入“C:”</p>

复制并粘贴“regsvr32 C:\windows\system32\scrrun.dll”并回车。确保出现一个消息框，说明 DllRegisterServer 成功：

![5](../Images/8d8bf03c75f77a0bd4474af3ac3515ac.png)

设置完成。

# documentation - 在 doxygen 中对齐图像

> ID：15502855
> 
> 赞同：9
> 
> 时间：2013-03-19T14:56:05.213
> 
> 标签：documentation, doxygen

我正在用 doxygen 编写一个 doc 文件，并且通过执行包含图像

```
\image html screenshots/enabled.png "caption" 
```

这在生成的文档中显示了我的 enabled.png 图像。但是，我希望图像向左对齐（因为文档的其余部分都是这样）。有没有办法在 doxygen 中做到这一点，**而无需**使用内联 html 或 css？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-07T04:41:07.517

使用以下 HTML 语法适用于 Doxygen 1.8.6（使用 Firefox 66 测试）：

```
/*! \mainpage Test
 *
 * <img src="my-image.jpg" align="left">
 * <div style="clear: both"></div>
 *
 * This is a test page.
 *
 */ 
```

Doxygen 将图像包装在 a 中`<div class="image">`，但该`align`属性会覆盖居中。添加了额外的间隙`<div>`以避免将以下文本写入图像右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-23T17:09:11.467

将图像填充到对齐的 Markdown 表中似乎可行：

```
| Image description |
| :---- |
| \image html image.png | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-01T15:38:32.377

```
<img src="myimage.png" align="left"/> 
```

但是您可能需要在之后添加 \n 字符以防止文本在图像右侧换行。

也只有 html

# ios - 为什么在实例之间保留我的原始类型状态？

> ID：15502856
> 
> 赞同：0
> 
> 时间：2013-03-19T14:56:06.263
> 
> 标签：ios, objective-c-2.0

我有一个带有 BOOL 属性（不是指针）的视图控制器，我认为它是 NO 或者只是垃圾，好像它没有在 viewDidLoad 中分配。BOOL 在需要时被分配。当视图控制器被释放（我正在使用 arc）并稍后重新创建时，如果该 BOOL 的先前实例值为 YES（在 VC 被释放之前），那么新实例 BOOL 变量的初始值也将为 YES。发现这很奇怪。

1.  声明的属性（非原子，分配）
2.  它不是在 viewDidLoad 中设置的，而是在 action 方法的其他地方设置的
3.  在 dealloc 中没有改变

我知道这很奇怪，同时我在 viewDidLoad 中设置了适当的默认值。

**更新**

请记住，这是在 BOOL 作为 iVar 时发生的（我将其更改为属性），并且在分配 BOOL 之前进行了比较。我把奇怪的行为归结为这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:04:41.617

`YES`有了垃圾，您获得比的机会要大得多`NO`，因为`!=0`比现在更多的价值`==0`:)

但是，类型的 AFAIK 实例变量`BOOL`将被初始化为`NO`（因为所有 ivars 都设置为 0），即使我没有查找它，我认为这也适用于自动合成的属性支持 ivars。这将说明它是`NO`每一次。

您是否观察到它总是反映旧状态，即两者`YES`并`NO`在 dealloc 之后被保留？我的猜测是，上述假设要么不正确，要么实例并未真正解除分配。您是否检查过实例地址是否相同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:37:33.087

原来它们最初是在实例之间保留它们的全局变量。

# c# - 我应该如何设计我的业务层来根据配置设置处理 Sql Server 和 Mongo DB

> ID：15502863
> 
> 赞同：3
> 
> 时间：2013-03-19T14:56:21.640
> 
> 标签：c#, asp.net-mvc, entity-framework, design-patterns, repository

目前我们在我们的应用程序中使用 Sql Server 和 Entity 框架。我们有自己的基于 Sql Server 的自定义成员资格提供程序。我们使用 EF 作为 ORM。

我们正在更新我们的应用程序以处理 MongoDb。我们开始对会员提供者进行更改。

到目前为止，我们的 BL 直接创建实体模型的实例并进行数据库操作。我认为这不是一个好的设计。

我希望我的 BL 不应该根据数据库而改变。它应该创建一个存储库对象的实例并转发请求（CRUD 操作）。存储库将负责与 DAL 的通信。如果我错了，请纠正我。

我正在考虑创建一个接口，该接口将由 BL 使用的存储库和存储库实现。界面将如下所示。

```
interface IDataRepository
{
   MembershipUser CreateUser(string firstName, stringLastName, string email, string phone); 
} 
```

1）。请告诉我一个更好的方法。

2）。如果我的应用程序有不同的存储库，BL 应该如何决定它应该使用哪个存储库。会为此使用工厂模式好主意吗？

谢谢，纳雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:05:23.700

我认为您走在正确的轨道上，将您的应用程序分成多个层，然后您的存储库或 DAL 层可以是您需要的任何东西（SQL、Web 服务等），然后使用工厂或 DI 来获取您需要的数据.

这是关于这样做的数据库帖子

*   [http://bobthejanitor.org/2009/07/n-tier-design-revisit-part-1-over-view.html](http://bobthejanitor.org/2009/07/n-tier-design-revisit-part-1-over-view.html)
*   [http://bobthejanitor.org/2009/07/n-tier-design-revisit-part-2-data.html](http://bobthejanitor.org/2009/07/n-tier-design-revisit-part-2-data.html)
*   [http://bobthejanitor.org/2009/07/n-tier-design-revisit-part-3-data.html](http://bobthejanitor.org/2009/07/n-tier-design-revisit-part-3-data.html)
*   [http://bobthejanitor.org/2009/07/n-tier-design-revisit-part-4-biz-layer.html](http://bobthejanitor.org/2009/07/n-tier-design-revisit-part-4-biz-layer.html)
*   [http://bobthejanitor.org/2009/08/n-tier-design-revisit-part-5-ui-layer.html](http://bobthejanitor.org/2009/08/n-tier-design-revisit-part-5-ui-layer.html)
*   [http://bobthejanitor.org/2009/10/not-ready-for-inversion-of-control-just.html](http://bobthejanitor.org/2009/10/not-ready-for-inversion-of-control-just.html)

# r - 如何将 stat_sum 应用于特定分组

> ID：15502867
> 
> 赞同：0
> 
> 时间：2013-03-19T14:56:33.140
> 
> 标签：r, ggplot2

我有以下代码生成以下图表。

```
colvec <-c("white", "white","gray85", "gray85", "gray58", "gray58", "gray33", "gray33","black", "black") 

ggplot(nut, aes(Date, Nitrate, group=Wetland, shape=Hydrology)) +
  geom_point(aes(fill=Wetland), colour="black", size=4)+
  scale_fill_manual(values=colvec) +
  scale_shape_manual(values=c(21,22))+
  facet_grid(. ~ Hydrology) +
  ylab ("Nitrate (mg/L) ") +
  theme(legend.position="none",
        panel.background = element_rect(fill='white', colour='white'), 
        panel.grid = element_line(color = NA),
        panel.grid.minor = element_line(color = NA),
        panel.border = element_rect(fill = NA, color = "black"),
        axis.text.x  = element_text(size=10, colour="black"),  
        axis.title.x = element_text(vjust=0.1),
        axis.text.y = element_text(size=12, colour="black"),
        axis.title.y = element_text(vjust=0.3)) 
```

![在此处输入图像描述](../Images/ae389f574c1f59e5d08ff1b729750bf3.png)

我不知道如何使用`stat_sum`每个日期的 5 个点平均在一起。该程序将每个不同的阴影点（对应于湿地）视为其自己的平均值。我想保留湿地分组并将其显示为不同的阴影，但也显示每个日期所有 y 值的平均值。

数据

```
     枣湿地水文硝酸盐
1 6 月 17 日一脉冲 0.2647287              
2 7 月 18 日一脉冲 0.1807388             
3 8 月 1 日脉冲 0.9895910      
4 8 月 15 日一脉冲 0.6566667       
5 11 月 7 日 1 脉冲 0.2150000      
6 17-6月 2静态 0.2134027      
7 7 月 18 日两个静态 0.1971669      
8 1-8 月 2 日静态 0.4774424       
9 8 月 15 日两个静态 0.3110000      
10 11 月 7 日两个静态 0.3333333       
11 6 月 17 日 三脉冲 0.3369253       
12 7 月 18 日 三脉冲 0.2056284       
13 8 月 1 日 三 脉冲 0.6731924       
14 8 月 15 日三脉冲 0.5516667       
15 11 月 7 日 三脉冲 0.1853333      
16 17-6月 四静 0.3293668      
17 7 月 18 日 四静 0.4664748       
18 8 月 4 日 静态 0.4555003       
19 8 月 15 日四 静态 0.3993333       
20 11 月 7 日 4 静态 0.1133333       
21 6月17日 五静 0.3497963     
22 7月18日 五静 0.3618659      
23 8 月 5 日 0.3721719 静态     
24 8 月 15 日五 静态 0.2916667      
25 11 月 7 日 5 静态 0.2526667      
26 6 月 17 日 6 脉冲 0.2779667       
27 7 月 18 日 六脉冲 0.7609531      
28 8 月 6 日 0.7177083 脉冲       
29 6 月 15 日 6 脉冲 0.6610000       
30 11 月 7 日 六脉冲 0.2083333       
31 6 月 17 日七脉冲 0.2232040      
32 7 月 18 日 七脉冲 0.3655621       
33 7 月 1 日 脉冲 0.7006131       
34 7 月 15 日 脉冲 0.4753333      
35 11 月 7 日七脉冲 0.3206667    
36 17-6月8日 静 0.3339319       
37 7 月 18 日 8 静态 0.3286641       
38 8 月 1 日 静态 0.4390918      
39 八月 15 日 静态 0.3276667       
40 11 月 7 日 8 日静态 0.2446667       
41 17-6月 九静 0.3456627      
42 7 月 18 日 九静 0.2519814      
43 8 月 9 日 1 日静态 0.3807550      
44 8 月 15 日 9 日静态 0.3873333      
45 11 月 7 日九静态 0.1663333       
46 6 月 17 日至 10 日脉冲 0.4135023      
47 7 月 18 日 10 次脉冲 0.1921382       
48 8 月 1 日至 10 日脉冲 0.3898374       
49 8 月 15 日至 10 日脉冲 0.2700000       
50 11 月 7 日至 10 日脉冲 0.1216667       

```

输入（螺母）

```
结构（列表（日期=结构（c（3L，4L，1L，2L，5L，3L，4L，
1L, 2L, 5L, 3L, 4L, 1L, 2L, 5L, 3L, 4L, 1L, 2L, 5L, 3L, 4L, 1L,
2L, 5L, 3L, 4L, 1L, 2L, 5L, 3L, 4L, 1L, 2L, 5L, 3L, 4L, 1L, 2L,
5L, 3L, 4L, 1L, 2L, 5L, 3L, 4L, 1L, 2L, 5L), .Label = c("1-Aug",
“8 月 15 日”、“6 月 17 日”、“7 月 18 日”、“11 月 7 日”），类 =“因子”），湿地 = 结构（c（5L，
5L, 5L, 5L, 5L, 10L, 10L, 10L, 10L, 10L, 9L, 9L, 9L, 9L, 9L,
3L，3L，3L，3L，3L，2L，2L，2L，2L，2L，7L，7L，7L，7L，7L，6L，
6L, 6L, 6L, 6L, 1L, 1L, 1L, 1L, 1L, 4L, 4L, 4L, 4L, 4L, 8L, 8L,
8L, 8L, 8L), .Label = c("八", "五", "四", "九", "一",
“七”，“六”，“十”，“三”，“二”），类=“因子”），水文=结构（c（1L，
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L,
1L), .Label = c("Pulsed", "Static"), class = "factor"), Nitrate = c(0.264728748,
0.180738787, 0.989591021, 0.656666667, 0.215, 0.213402705, 0.197166881,
0.477442378, 0.311, 0.333333333, 0.33692531, 0.205628403, 0.67319236,
0.551666667, 0.185333333, 0.329366831, 0.466474791, 0.455500298,
0.399333333, 0.113333333, 0.349796312, 0.361865927, 0.372171941,
0.291666667, 0.252666667, 0.277966745, 0.760953065, 0.717708344,
0.661, 0.208333333, 0.223203974, 0.365562124, 0.700613059, 0.475333333,
0.320666667、0.333931889、0.328664129、0.439091764、0.327666667、
0.244666667, 0.345662714, 0.251981433, 0.380755049, 0.387333333,
0.166333333、0.413502261、0.192138209、0.389837374、0.27、0.121666667
)), .Names = c("日期", "湿地", "水文", "硝酸盐"), class = "data.frame", row.names = c(NA,
-50L))

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:08:51.787

没有你的数据很难回答（因为我通常会先测试它！），但我认为你可以`aggregate`通过 Date 和 Hydrology 计算 Nitrate 数据并计算平均值，然后使用`geom_point`不同的`data.frame`.

这行得通吗...

```
nutm <- aggregate( Nitrate ~ Date + Hydrology , data = nut , FUN = mean )

p <-ggplot(nut, aes(Date, Nitrate, shape = Hydrology)) +
  geom_point( data = nut , aes( fill = Wetland , group=Wetland ), colour="black", size=4)+
  scale_fill_manual(values=colvec) +
  scale_shape_manual(values=c(21,22))+
  facet_grid(. ~ Hydrology) +
  ylab ("Nitrate (mg/L) ") +
  geom_point( data = nutm , aes( x = Date , y = Nitrate) , color = "red" , fill = "red" , size = 4 ) +
  theme(legend.position="none",
        panel.background = element_rect(fill='white', colour='white'), 
        panel.grid = element_line(color = NA),
        panel.grid.minor = element_line(color = NA),
        panel.border = element_rect(fill = NA, color = "black"),
        axis.text.x  = element_text(size=10, colour="black"),  
        axis.title.x = element_text(vjust=0.1),
        axis.text.y = element_text(size=12, colour="black"),
        axis.title.y = element_text(vjust=0.3))

p 
```

这给了我你的图表，每个日期都有一个红色的平均标记...... ![在此处输入图像描述](../Images/2880905716006aa1e9c19fc5ad56497a.png)

# python - 为什么函数 conway 在 Python 中的生活游戏中出现这种语法错误？

> ID：15502868
> 
> 赞同：0
> 
> 时间：2013-03-19T14:56:36.243
> 
> 标签：python, function, syntax-error, conways-game-of-life

我正在用 Python 编写 Conway 的生活游戏，但偶然发现了一个奇怪的语法错误。它在我定义的第一个函数中。据说nextnext=[]中的nextnext是错误的。如果我把它拿出来：在for循环之后也会给出一个synthax错误。我在一个单独的文件中尝试了这个函数，它在那里工作得很好，所以我真的不知道我做错了什么。

```
TIME = 100
life = []           # create list 'life'
life.append(seed)   # add seed to life

numrows = len(seed)         # calculate number of rows
numcolumns = len(seed[0])   # calculate number of columns
current = seed              # make seed the first current(matrix you're starting off with in each step)
nextnext = []

def create_empty_universum (seed):
    numrows = len(seed)         # calculate number of rows
    numcolumns = len(seed[0]    # calculate number of columns
    nextnext = []               # create empty list next
    for i in range(numrows):    # define number of rows in nextnext
        nextnext.append([0] * numcolumns)  # define number of columns in nextnext
    return nextnext

def compute_new_value(nextnext,row,column):    
    neighbors = 0                                 # start counter 'neighbors' with 0
    if current[row][(column+1)%numcolumns] == 1:  # if neighboring cell has a value of 1
        neighbors += 1                            # add 1 to neighbors
    if current[row][(column-1)%numcolumns] == 1:  # if neighboring cell has a value of 1        
        neighbors += 1                            # add 1 to neighbors      
    if current[(row-1)%numrows][column] == 1:     # if neighboring cell has a value of 1
        neighbors += 1                            # add 1 to neighbors      
    if current[(row+1)%numrows][column] == 1:     # if neighboring cell has a value of 1 
        neighbors +=1                             # add 1 to neighbors      
    if current[(row+1)%numrows][(column+1)%numcolumns] == 1:  # if neighboring cell has a value of 1
        neighbors +=1                                         # add 1 to neighbors 
    if current[(row-1)%numrows][(column+1)%numcolumns] == 1:  # if neighboring cell has a value of 1
        neighbors += 1                                        # add 1 to neighbors 
    if current[(row-1)%numrows][(column-1)%numcolumns] == 1:  # if neighboring cell has a value of 1
        neighbors += 1                                        # add 1 to neighbors 
    if current[(row+1)%numrows][(column-1)%numcolumns] == 1:  # if neighboring cell has a value of 1
        neighbors +=1                                         # add 1 to neighbors 
    if current[row][column] == 1:               # in case a target cell has a value of 1:
        if neighbors < 2:                       # if the number of neighbors is smaller than 2
            nextnext[row][column] = 0           # value of target cell becomes 0 in nextnext
        elif neighbors == 2 or neighbors == 3:  # if the number of neighbors is 2 or 3
            nextnext[row][column] = 1           # value of target cell stays 1 in nextnext
        elif neighbors > 3:                     # if the number of neigbors is higher than 3
            nextnext[row][column] = 0           # value of target cell becomes 0 in nextnext
    elif current [row][column] == 0:            # in case a target cell has a value of 0:
        if neighbors == 3:                      # if the number of neighbors is 3
            nextnext[row][column] = 1           # value of target cell becomes 1 in       nextnext
         elif neighbors != 3:                    # if the number of neigbors isn't 3
            nextnext[row][column] = 0           # value of target cell stays 0 in nextnext
    return nextnext

for t in range(TIME):    # determine amount of times the loop will
    nextnext = create_empty_universum(seed)
    for row in range(numrows):              # for each
            for column in range(numcolumns):    # for each column 

                nextnext = compute_new_value(nextnext,row,column)

current = nextnext     # make nextnext matrix the current matrix for the next step 
life.append(current)   # add current to life

import show
show.show(life, SIZE=10) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:57:35.643

您在前一行缺少右括号：

```
numcolumns = len(seed[0]    # calculate number of columns
# missing )   ----------^
nextnext = []               # create empty list next 
```

当您遇到 Python 语法错误并且无法发现它时，请查看*上*一行以查看您的括号、大括号和圆括号是否平衡。

# css - CSS滚动无法在移动设备上正确显示

> ID：15502869
> 
> 赞同：1
> 
> 时间：2013-03-19T14:56:36.447
> 
> 标签：css, jquery-mobile, mobile, html

我在这篇文章底部的代码控制着`<div>`我`<div>`在 jQuery Mobile 中的页面。我有这个 div 来制作表格滚动，因为它在页面上水平溢出。但是，它显示在此屏幕截图中：

![表格占页面的约 50%，然后滚动](../Images/2621ee95988e6130e973d181aef9c5cc.png)

当它垂直放置时也会出现同样的问题，但这个视图更好地说明了它。我也横向滚动了 div 以更好地说明两个边界。我希望 div 在移动设备上简单地填充页面的整个宽度，因为它可以在更大的屏幕上正确显示，但我希望它在溢出时水平滚动。除了尝试使用和不`overflow: scroll;`使用. 我尝试过设置宽度的任何方法都没有奏效，包括其他地方所建议的。`overflow: auto;``-webkit-overflow-scrolling: touch;``width: 100%;``position: absolute; left: 0; right: 0;`

CSS：

```
@media only screen and (min-width: 1025px){
    .ui-page {
    width: 960px !important;
    margin: 0 auto !important;
    position: relative !important;
        border-right: 5px #111111 outset !important;
        border-left: 5px #111111 outset !important;
        border-bottom: none;
    }
}

@media only screen and (max-width: 1024px){
    .tblscroll {
        width: 100%;
        overflow: scroll;
        -webkit-overflow-scrolling: touch;
    }
} 
```

简化的 HTML：

```
<div data-role="page" id="resultsmain" data-title="Survey Results">
    <div data-role="header"><h1>Title</h1></div>
    <div data-role="content">text
        <div class="tblscroll">
            <table>
                ...table information...
            </table>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:58:18.053

您可以尝试在 div 元素宽度定义的宽度周围使用 CSS 显示块并调整百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:04:40.473

看起来好像是桌子本身就是问题所在。

我会将表格宽度设置为 100%，并修复不会增长或缩小的行

> 表{宽度：100%；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:45:45.553

这根本没有真正的帮助，但我今天加载它并且它运行良好。从昨天到今天，我没有改变任何东西，所以它一定是某种缓存问题（即使我已经清除了我的移动缓存）。

# ios - 向 UILabel 添加额外空间以插入图像

> ID：15502871
> 
> 赞同：1
> 
> 时间：2013-03-19T14:56:40.950
> 
> 标签：ios, objective-c, xcode, uilabel

我在 UILabel 的文本末尾添加图像时遇到问题。如何检测标签中文本的大小，然后添加额外的空间并将图像插入其中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:59:16.043

最好的方法是拿一个`UIView`。

`UILabel`并`UIImageView`在此上添加两者`UIView`（*根据您的要求**给**Fram***）。

这`UIView`到您的**MainView**中`UIViewController`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:05:28.680

如果你不想使用 UIView。为什么不检查标签中字符串的长度。然后使用框架为您的图像添加一些额外的空间。[UILabel.text length] 返回长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:13:25.120

1.  如果您需要或只使用超级视图，请创建一些容器 UIView
2.  放在`UILabel`那里`UIImageView`
3.  `[NSString sizeWithFont:]`使用或类似`sizeWith...`方法计算文本的大小
4.  `UIImageView`根据文本大小计算你的位置

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T15:34:06.417

我为此写了一些代码：

```
-(void) labelSizeGetter
{
    UILabel * mylabel=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];

    float heigth=25.0;//max height value of label.

    NSString *yourString = @"My great text";

    mylabel.font =[UIFont fontWithName:@"Helvetica-Bold" size:12];

    [mylabel setText:yourString];

    CGSize s = [mylabel.text sizeWithFont:[UIFont systemFontOfSize:12] 
                        constrainedToSize:CGSizeMake(MAXFLOAT,heigth)
                            lineBreakMode:NSLineBreakByWordWrapping];

    // s is a size for text of label. just add 10 pix to width to make it more beautiful.

    NSLog(@"%@", NSStringFromCGSize(s));

    mylabel.frame=CGRectMake(0, 0, s.width+10, s.height);

    [self.view addSubview:mylabel];

    UIView * myimage=[[UIView alloc] initWithFrame:CGRectMake(mylabel.frame.origin.x+mylabel.frame.size.width , mylabel.frame.origin.y, 30, 30)];//create your images frame according to frame of your label

    myimage.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"arti.png"]];

    [self.view addSubview:myimage];

} 
```

我希望它有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T15:11:31.577

这是一个代码片段，可让您根据特定字体和特定字体大小调整大小。因此，您可以为标签设置框架，然后也可以设置图像视图。

```
- (CGSize)getSizeFromText:(NSString*)text {

    CGSize constrainedSize;

    constrainedSize.width = give maximum allowable width limit;

    constrainedSize.height = MAXFLOAT;

    CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:fontSize] constrainedToSize:constrainedSize lineBreakMode: UILineBreakModeWordWrap];

    return size;
} 
```

希望这可以帮助您解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T15:12:49.910

当使用给定字体呈现时，有一个类别`NSString`返回字符串的大小。有几种方法，其中最完整的是`- (CGSize)sizeWithFont:(UIFont *)font minFontSize:(CGFloat)minFontSize actualFontSize:(CGFloat *)actualFontSize forWidth:(CGFloat)width lineBreakMode:(UILineBreakMode)lineBreakMode`（请参阅[Apple Docs](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithFont%3aminFontSize%3aactualFontSize%3aforWidth%3alineBreakMode%3a "苹果文档")）。

有了这些信息，您可能能够实现您想要做的事情。

# java - JUNG 中的顶点/节点显示在窗口外

> ID：15502877
> 
> 赞同：2
> 
> 时间：2013-03-19T14:56:50.563
> 
> 标签：java, scala, jung

我想我的问题最好用下面的图片来描述。

![在此处输入图像描述](../Images/ec21100cd8fae836d3ea397440c62703.png)

我怎样才能告诉 JUNG 把所有东西都放在可见区域？

这是我的`VertexShapeTransformer`（斯卡拉）

```
vv.getRenderContext().setVertexShapeTransformer(
new org.apache.commons.collections15.Transformer[String,java.awt.Shape]() {
  def transform(label: String): java.awt.Shape = {
    val longest_name = label.length
    val width = longest_name * 10.0 // 12.0 is approx size of letter
    val circle = new java.awt.geom.Ellipse2D.Double(-(width/2), -12.5, width, 25);
    circle
  }
}) 
```

当我删除它时，小的默认圆圈适合窗口，但顶点标签仍然不在窗口中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T07:47:27.567

我找到了解决方案。对于`vv: VisualizationViewer[String, String]`，以下函数更新布局器算法（scala 代码）。它在布局器上调用松弛器（如果它支持松弛），然后重新排列顶点。为每个顶点调用该`layout.setLocation`函数，以确保它位于可打印的屏幕区域中。

```
 /**
   * change the graph layouter
   * with fancy animation
   */
  def changeJUNGLayout(layout: jung.algorithms.layout.AbstractLayout[String, String]): Unit = 
  {

      layout.setSize(vv.getSize())

      assert(vv.getModel().getRelaxer() eq null)
      if(layout.isInstanceOf[edu.uci.ics.jung.algorithms.util.IterativeContext]){
          val relaxer: jung.algorithms.layout.util.Relaxer
            = new jung.algorithms.layout.util.VisRunner(
                layout.asInstanceOf[edu.uci.ics.jung.algorithms.util.IterativeContext])
          relaxer.stop()
          relaxer.prerelax()
      }

      {
          import collection.JavaConversions._
          val vs : Iterable[String] = layout.getGraph().getVertices()
          for (v <- vs){
              //println(v+" "+layout.getX(v)+" "+layout.getY(v))
              val minX = v.length()*5.0
              val maxX = vv.getSize().getWidth() - minX
              val X = layout.getX(v)
              val newX = if (X < minX) minX else if (X > maxX) maxX else X
              val minY = 12.5
              val maxY = vv.getSize().getHeight() - minY
              val Y = layout.getY(v)
              val newY = if (Y < minY) minY else if (Y > maxY) maxY else Y
              layout.setLocation(v, newX, newY)
          }
      }

      val staticLayout: jung.algorithms.layout.Layout[String, String] =
        new jung.algorithms.layout.StaticLayout[String, String](jung_graph, layout)

      val lt: jung.visualization.layout.LayoutTransition[String,String] =
        new jung.visualization.layout.LayoutTransition[String,String](vv, vv.getGraphLayout(),
            staticLayout)
      val animator = new jung.visualization.util.Animator(lt);
      animator.start();

      vv.repaint();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:21:26.690

您的标签（和顶点）被切断，因为 JUNG 的布局算法没有考虑到顶点可以大于半径 1（在您的情况下为大椭圆）。所以顶点的中间其实是放在了view screen里面，但是椭圆的label和shell都没有。

这给你留下了两个选择：

1.  编写您自己的布局以考虑大小。

    > 这个选项并不像听起来那么困难。您可以简单地修改其中一种力导向算法以考虑大小。

2.  布局您的图表，然后它们会缩小一点。

    ```
    ScalingControl scaler = new CrossoverScalingControl();
    scaler.scale(viewer, 1 / 1.1f, viewer.getCenter()); 
    ```

# wpf - WPF Dockpanel 不会正确对齐

> ID：15502881
> 
> 赞同：7
> 
> 时间：2013-03-19T14:56:55.087
> 
> 标签：wpf, dockpanel

我有这段代码，我在 Button.Content 上使用了 DockPanel。但是它不允许我右对齐最后一张图像（小箭头）。

```
<Button Height="70"
                    HorizontalContentAlignment="Left">
              <Button.Content>
                <DockPanel LastChildFill="False">
                  <Image DockPanel.Dock="Left"
                    Height="50"
                         Width="50"
                         Source="{StaticResource Placeholder}"
                         Stretch="UniformToFill"
                         Margin="5" />
                  <TextBlock DockPanel.Dock="Left"
                             Text="Dummy text"
                             VerticalAlignment="Center"
                             Margin="5" />
                  <Image DockPanel.Dock="Right"
                         Height="24"
                         Width="24"
                         Source="{StaticResource Right_Arrow_24}"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Right"
                         Stretch="UniformToFill"
                         Margin="5" />
                </DockPanel>
              </Button.Content>
            </Button> 
```

它现在给了我这个：

![停靠面板](../Images/9d48ee27d774f14b591f8df7d75b8017.png)

所以右边的小箭头应该放在按钮的右边，而不是放在TextBlock之后。我发现了一些类似的问题，看起来我做对了，但不知何故不是..

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:01:43.357

尝试将`HorizontalContentAlignment`按钮的 设置为“ `Stretch`”。否则，您的 DockPanel 将使用其内容所需的大小，然后左对齐。`TextBlock`您可以通过为您的 s使用不同的文本长度来确认此行为

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-16T11:19:40.420

您只需在没有 DockPanel.Dock 属性的情况下将一个额外的子项附加到 DockPanel（例如一个空的 Canvas），以便将所有剩余空间分配给它。通常，DockPanel 仅在其最后一个子节点没有 Dock 约束时才能正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:01:54.090

尝试设置

> Horizo​​ntalContentAlignment="拉伸"

在您的按钮上。

# c# - WPF画布中的网格线

> ID：15502882
> 
> 赞同：5
> 
> 时间：2013-03-19T14:56:55.343
> 
> 标签：c#, wpf, xaml, canvas

提到[这个问题](https://stackoverflow.com/questions/6434284/how-to-draw-gridline-on-wpf-canvas)，我尝试将网格线用于我的用户控件。在设计时控件看起来不错，但是当我尝试将组件插入主窗口时，所有网格线都消失了，取而代之的是那个丑陋的灰色角落：

```
<UserControl x:Class="mx_sachdaten.View.FormWorkspaceView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" Loaded="FormWorkspaceView_Loaded"
         d:DesignHeight="400" d:DesignWidth="400">
    <UserControl.Resources>
        <DrawingBrush x:Key="FormCanvasGridTile" Stretch="None" TileMode="Tile" 
                  Viewport="0,0,30,30" ViewportUnits="Absolute">
            <DrawingBrush.Drawing>
                <GeometryDrawing>
                    <GeometryDrawing.Geometry>
                        <GeometryGroup>
                            <LineGeometry StartPoint="0,0" EndPoint="30,0" />
                            <LineGeometry StartPoint="30,0" EndPoint="30,30" />
                            <LineGeometry StartPoint="30,30" EndPoint="0,30" />
                            <LineGeometry StartPoint="0,30" EndPoint="0,0" />
                        </GeometryGroup>
                    </GeometryDrawing.Geometry>
                    <GeometryDrawing.Pen>
                        <Pen Thickness="1" Brush="LightGray" />
                    </GeometryDrawing.Pen>
                    <GeometryDrawing.Brush>White</GeometryDrawing.Brush>
                </GeometryDrawing>
            </DrawingBrush.Drawing>
        </DrawingBrush>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <Canvas Grid.Column="0" x:Name="FormCanvas" Background="{StaticResource FormCanvasGridTile}"
            MouseLeftButtonDown="FormCanvas_MouseLeftButtonDown" VerticalAlignment="Stretch"
            HorizontalAlignment="Stretch" />
        <ToolBarTray Grid.Column="1" Orientation="Vertical">
            <ToolBar Band="1">
                <Button Content="Label" HorizontalAlignment="Right" />
                <Button Content="TextBox" HorizontalAlignment="Right" />
                <Button Content="Button" HorizontalAlignment="Right" />
            </ToolBar>
        </ToolBarTray>
    </Grid>
</UserControl> 
```

结果：[用户控件预览](https://i.stack.imgur.com/oXCrh.png)

这就是它在我的主窗口上的样子：[主窗口](https://i.stack.imgur.com/xIzZF.png)

您知道为什么在将用户控件嵌入我的窗口时我的背景磁贴无法正常工作吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T15:11:13.587

尝试这个：

```
<Border>
    <Border.Background>
        <VisualBrush TileMode="Tile"
            Viewport="0,0,50,50" ViewportUnits="Absolute" 
            Viewbox="0,0,50,50" ViewboxUnits="Absolute">
            <VisualBrush.Visual>
                <Rectangle Stroke="Darkgray" StrokeThickness="1" Height="50" Width="50"
                StrokeDashArray="5 3"/>
            </VisualBrush.Visual>
        </VisualBrush>
    </Border.Background>
</Border> 
```

# java - 在 JSON 和 XML 中提供 GET 方法

> ID：15502884
> 
> 赞同：2
> 
> 时间：2013-03-19T14:56:57.873
> 
> 标签：java, xml, json, rest, get

我正在使用 Jersey 开发 REST 服务。

因此，如果我有一个用户类型的对象（其中包含有关用户的信息），例如：

```
User userObj = new User(); 
```

**我想通过JSON**和**XML**的 GET 方法提供该信息。

我已经可以使用 JSON 格式提供它了`gson.toJson(userObj)`。那么 XML 呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:10:52.903

看看 JAXB API。它提供了一种使用简单的 getter/setter 方法将 XML 映射到类的方法。[http://jaxb.java.net/tutorial/section_1_1-Introduction.html#About%20JAXB](http://jaxb.java.net/tutorial/section_1_1-Introduction.html#About%20JAXB)

# spring - Grails - 事务性 Spring noRollbackFor 不工作

> ID：15502887
> 
> 赞同：0
> 
> 时间：2013-03-19T14:57:14.120
> 
> 标签：spring, grails, spring-transactions

我正在使用 grails 1.3.7 并具有以下代码：

格拉斯服务：

```
class MyClass {
   static transactional = true

  @Transactional(noRollbackFor = MyException.class)
  public MyObject myMethod(Map map1, Boolean bl1 = false) throws MyException {
   //codes
     if(...){
        throw new MyException("msg")
     }
} 
```

我的异常：

```
class MyException extends Exception{

 def errors = []

MyException(errors){
    super(errors.toString())
    this.errors = errors
} 
```

}

当代码抛出 MyException 时，我发现以下错误：**事务回滚，因为它已被标记为仅回滚**

附言。如果我更改 static transactional = true 则不会发生错误。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:26:59.273

我你使用注释，你应该设置

`static transactional=false`

即使 grails 的事务代理无效，因此与 spring AOP 的代理没有重叠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T09:18:11.210

这应该有效：

```
@Transactional(noRollbackFor=[FooException, BarException])
def doSomething(...) {
     ...
} 
```

但请记住，如果您使用事务注释，grails 自动事务在您放置它的服务中不起作用。你需要设置：

```
@Transactional
class myService(...) {
     static transactional = false
     ...
} 
```

# c# - 引用程序集中的 ConfigurationManager

> ID：15502892
> 
> 赞同：0
> 
> 时间：2013-03-19T14:57:26.277
> 
> 标签：c#, visual-studio, configurationmanager

使用 VS 2012 C# .net 4.0，我有一个项目，它使用 ConfigurationManager 构建控制台应用程序进行配置。这一切都很好。

我在同一个解决方案中有第二个项目，用于测试第一个项目（使用 nunit）。
这个 nunit 项目包括第一个项目作为参考，并将第一个项目的可执行文件作为子进程执行。

这行不通。因为，虽然 nunit 项目会构建第一个项目的可执行文件，但它不会创建 [第一个项目的可执行文件].exe.config 文件。

有谁知道为什么不？当我构建 nunit 项目时，我可以按下一个按钮来获取 [第一个项目可执行文件].exe.config 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:03:43.590

任何时候使用配置文件时，该文件都必须与正在运行的进程相关联。在这种情况下，正在运行的进程就是您的单元测试项目。

当您`ConfigurationManager`在单元测试的上下文中使用时，它将`App.Config`为单元测试项目查找配置文件 () 以获取值。

您正在引用控制台应用程序程序集，但无法在单元测试过程中引用控制台应用程序的配置文件。

因此，您应该`App.Config`向单元测试项目添加一个新的并将您的配置值放在那里。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:28:25.547

它可能不漂亮，但添加预构建事件：

```
copy "$(SolutionDir)ConsoleApp\App.config" "$(TargetDir)ConsoleApp.exe.config" 
```

解决了我眼前的问题。

# jquery - 点击-->FadeIn-->setTimout-->FadeOut

> ID：15502893
> 
> 赞同：0
> 
> 时间：2013-03-19T14:57:26.803
> 
> 标签：jquery, settimeout

我是 js 初学者，正在努力解决初学者问题。

我想要的是以下内容：fadeIn a li-Element on.click 之后，比如说 5 秒，fadeOut 再次。如果在 5 秒内多次单击元素，则开始计算从新的淡出的 5 秒。

我有基础知识，理论上它看起来像这样：

```
$("#boxes li").on("click",function() {
    $(this).find(".front,.back").fadeToggle(800).delay(5000).fadeToggle(800);
}); 
```

但是，我需要`setTimeout`并且`clearTimeout`为了在 5 秒内再次单击 li-Element 以正确淡出时开始计算新的延迟。

虽然知道围绕它的理论，但我似乎并没有掌握它背后的代码。

感谢您的任何建议，请记住，当您尝试解释某事时，我是初学者。

**编辑**

根据皮特的想法，我创建了一个更像我想要实现的小提琴。出于某种原因，它不能完全与 fadeToggle 一起使用。这是小提琴的更新示例：

**[http://jsfiddle.net/sfiddle/jLurZ/](http://jsfiddle.net/sfiddle/jLurZ/)**

您会注意到，单击的 div 不会切换回来，更不用说我想用 if 语句实现的功能了。

最好的祝福，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:05:08.580

你可以尝试这样的事情：

```
$("#boxes li").on("click",function({    
    $('.front,.back').stop().hide().fadeToggle(800, function() {
        $(this).delay(1500).fadeToggle(800);
    });
}); 
```

[http://jsfiddle.net/gZ3TS/1/](http://jsfiddle.net/gZ3TS/1/)

**编辑**

如果第二次单击，jQuery 解决方法会重置：http: [//jsfiddle.net/gZ3TS/6/](http://jsfiddle.net/gZ3TS/6/)

使用`setTimeout`和`clearTimeout`：http: [//jsfiddle.net/gZ3TS/11/](http://jsfiddle.net/gZ3TS/11/)

**更新**

`fadeToggle`多个淡入淡出的框 - 不幸的是，如果用户在动画序列的中间点击，我必须将框保持在特定状态，因此我无法使用

[http://jsfiddle.net/gZ3TS/31/](http://jsfiddle.net/gZ3TS/31/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:03:46.600

这应该有效：

```
var fadeoutnow;
$("#boxes li").on("click",function({

    $(this).find(".front, .back").fadeToggle(800);

    clearTimeout(fadeoutnow);

    //You can assign the timeout function to a variable so that you can clear it (above)
    fadeoutnow = setTimeout(function(){
        $(this).find(".front, .back").fadeToggle(800);
    }, 5000);

}); 
```

# bash - 使用 awk 拆分字符串返回空白

> ID：15502899
> 
> 赞同：0
> 
> 时间：2013-03-19T14:57:42.517
> 
> 标签：bash, shell, awk, split

我正在根据我找到的代码示例尝试以下操作：

```
echo "file.txt" | awk '{split($0,a,"."); print a[0]}' 
```

但它返回一个空白输出。

有什么提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T14:59:17.527

您的代码是正确的，但是数组`a`从 1 开始，具有以下`split`功能：

```
$ echo "file.txt" | awk '{split($0,a,"."); print a[0]}'

$ echo "file.txt" | awk '{split($0,a,"."); print a[1]}'
file

$ echo "file.txt" | awk '{split($0,a,"."); print a[2]}'
txt 
```

从`gawk`手册：

> 拆分（字符串，数组 [，fieldep [，seps ] ]）
> 
> 将字符串分成由fieldsep分隔的片段，并将片段存储在数组中，将分隔符字符串存储在seps数组中。第一部分存储在数组 [1] 中，第二部分存储在数组 [2] 中，依此类推。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T14:59:34.570

尝试

```
echo "file.txt" | awk '{split($0,a,"."); print a[1]}' 
```

awk 数组索引是从**1 开始的**。

# dynamic - 将最后一个单元格滚动到 UITableView 的顶部

> ID：15502904
> 
> 赞同：0
> 
> 时间：2013-03-19T14:57:48.160
> 
> 标签：dynamic, uitableview, contentsize

在我的最后一个单元格上是一个动态文本视图。使用更大的 contentSize 它将保持在 tableview 的顶部（查看它，当你在键盘上填充它时），但如果 textview 和单元格将动态变大：[tableview beginupdates] 和 [tableview endUpdates] 将删除我的 contentSize。之后它向下滚动到 tableview 的底部。

任何想法如何将单元格滚动到顶部，并动态创建单元格而不更改 contentSize？也许我正在以正确的方式思考，想法？

**编辑**

嗯..没有找到任何“正确”的解决方案......为此目的，最好的方法是尝试在文本视图下方设置任何新单元格或部分，以使该单元格易于位于视图顶部。在此之后，它很容易与 beginUpdates 和 endUpdates 一起使用。光标将始终在文本视图中，文本视图也会动态变大单元格，所以这是唯一简单的方法。

另一种选择是将 uitableview 设置为另一个滚动视图的子视图（uitableview 自己有一个），以便在新的滚动视图中上下滚动。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:21:09.897

根据我的经验，单元格中的文本视图是一个非常棘手的问题。我建议只使用免费的 Sensible TableView 框架，它具有开箱即用的文本视图单元格。

# asp.net - ASP.NET 启用为视图生成插入语句。甲骨文

> ID：15502921
> 
> 赞同：0
> 
> 时间：2013-03-19T14:58:24.360
> 
> 标签：asp.net, oracle, view, datasource

当我为视图创建新数据源时，“生成插入、更新和删除语句”复选框被禁用。有没有办法启用它？（我需要插入到一个视图中，该视图有一个触发器“而不是插入”。写入表是不可能的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:00:24.147

您能否查看您尝试包含在数据源中的表中是否有主键？如果您不尝试分配主键并重试。

# scala - 将单个参数和 Seq 传递给 var-arg 函数

> ID：15502924
> 
> 赞同：6
> 
> 时间：2013-03-19T14:58:34.577
> 
> 标签：scala, variadic-functions

我知道可以将单个参数传递给 vararg 函数，并且可以使用 seq 传递，`:_*`但是可以同时传递两者吗？

例如：

```
scala> object X { def y(s: String*) = println(s) }
defined module X

scala> X.y("a", "b", "c")
WrappedArray(a, b, c)

scala> X.y(Seq("a", "b", "c"):_*)
List(a, b, c)

scala> X.y("a", Seq("b", "c"):_*)
<console>:9: error: no `: _*' annotation allowed here
(such annotations are only allowed in arguments to *-parameters)
       X.y("a", Seq("b", "c"):_*)
                             ^ 
```

**编辑：**在 Scala 2.10 中（以防万一）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:01:01.010

哈基，但这应该很好用：

```
X.y(Seq("a") ++ Seq("b", "c"):_*) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:22:12.740

如果你在 Scala 标准库中环顾四周，你会在一些地方发现这种模式：

```
def doIt(arg: Thing)
def doIt(arg1: Thing, arg2: Thing, moreArgs: Thing*) 
```

您可以看到这一点，例如，在`Set.+(...)`. 它允许您在重载中使用任意数量的参数而不会产生歧义。

**附录**

概念证明：

```
scala> class DI { def doIt(i: Int) = 1; def doIt(i1: Int, i2: Int, iMore: Int*) = 2 + iMore.length }
defined class DI

scala> val di1 = new DI
di1: DI = DI@16ac0be1

scala> di1.doIt(0)
res1: Int = 1

scala> di1.doIt(1, 2)
res2: Int = 2

scala> di1.doIt(1, 2, 3)
res3: Int = 3

scala> di1.doIt(1, 2, List(3, 4, 5): _*)
res4: Int = 5 
```

# api - Google Apps 脚本大本营 POST

> ID：15502926
> 
> 赞同：1
> 
> 时间：2013-03-19T14:58:41.660
> 
> 标签：api, google-apps-script, basecamp

我已经尝试了所有我能想到的组合来完成这项工作。我需要将什么作为`POST`字段发送到 New Basecamp API 以使其接受我的 POST 数据？

我的代码是：

```
function getFilterBy() {
    var url = "https://basecamp.com/****/api/v1/projects/*****.json";
    var payload =  {"name" : "myapp", "description" : "no desc mls"};
    var opt = {
               "contentType" : "application/json",
               "method" : "POST",
               "headers":{ "User-Agent": "myapp (user@somewhere.com)",
                           "Authorization" :"Basic " + Utilities.base64Encode("user" + ":" + "pass")},
               "validateHttpsCertificates" :false,
               "muteHttpExceptions" : true,
               "payload" : payload
               };
    var response = UrlFetchApp.fetch(url, opt);
    var text = response.getContentText();
    Logger.log(text);
    } 
```

我的错误是：

```
lexical error: invalid char in json text.
                                   description=no+desc+mls&name=Ho
                 (right here) ------^ 
```

我试过了`Utilities.jsonStringify`，但没有运气。我知道这是一个菜鸟错误，但我就是想不通。如果有一个地方你知道我也可以从哪里获得这些信息，那将是惊人的。

谢谢！

**更新 1**

```
function getFilterBy() {
       var url = "https://basecamp.com/****/api/v1/projects/****.json";
       var payload =  {name : 'myApp Change'};
       var opt = {
                   "contentType" : "application/json",
                   "method" : "POST",
                   "headers":{ "User-Agent": "myApp (user@ex.com)",
                   "Authorization" :"Basic " + Utilities.base64Encode("user" + ":" + "pass")},
                   "validateHttpsCertificates" :false,
                   "muteHttpExceptions" : true,
                   "payload" : Utilities.jsonStringify(payload)
                    };
        var response = UrlFetchApp.fetch(url, opt);
        var text = response.getContentText();
        Logger.log(text);
        } 
```

**产量错误：**

```
<body>
    <div class="dialog">
     <div class="innercol">
       <h1>Hmm, that isn&rsquo;t right</h1>
       <h2>You may have typed the URL incorrectly.</h2>
       <p>Check to make sure you&rsquo;ve got the spelling, capitalization, etc. exactly right.</p>
     </div>
    </div>
    <p id="back" class="back">
      <a href="javascript:window.history.back();">&larr; Back to previous page</a>
    </p>
    <script type="text/javascript">
        if (window.history.length <= 1) document.getElementById("back").style.display = "none";
    </script>
    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:02:56.340

你确定你正确地尝试过 JSON.stringify 吗？此示例在 Basecamp 中正确地为我创建了一个项目，并在 POST 有效负载中指定了项目名称/描述。

请注意，我写得很快，不包括 UserAgent - 你会想把它放回去。

```
function createProject() { 
  var user = 'USERNAME';
  var password = 'PASSWORD'
  var accoundId = 'ACCOUNTID#';

  var url = 'https://basecamp.com/'+accoundId+'/api/v1/projects.json';  
  var payload =  {name : 'new project', description : 'my project description'};
  var opt = {
    contentType : 'application/json',
    method : 'post',
    headers:{Authorization :"Basic " + Utilities.base64Encode(user + ':' + password)},
    validateHttpsCertificates :false,
    muteHttpExceptions : true,
    payload : JSON.stringify(payload)
  };

  var response = UrlFetchApp.fetch(url, opt);
  var text = response.getContentText();
  Logger.log(text);
} 
```

为了更新项目，您必须使用`put`动词而不是`post`此处记录[的](https://github.com/37signals/bcx-api/blob/master/sections/projects.md#update-project)

这是一个工作示例 -

```
function updateProject() { 
  var projectId = '2413370';
  var url = 'https://basecamp.com/'+accoundId+'/api/v1/projects/'+projectId+'.json';  
  var payload =  {name : 'new project', description : 'my new new project description'};
  var opt = {
    contentType : 'application/json',
    method : 'put',
    headers:{Authorization :"Basic " + Utilities.base64Encode(user + ':' + password)},
    validateHttpsCertificates :false,
    muteHttpExceptions : true,
    payload : JSON.stringify(payload)
  };

  var response = UrlFetchApp.fetch(url, opt);
  var text = response.getContentText();
  Logger.log(text);
} 
```

# orika - 使用 Orika 代替 Spring Data Commons

> ID：15502928
> 
> 赞同：1
> 
> 时间：2013-03-19T14:58:45.347
> 
> 标签：orika

有几个 Spring Data 项目，例如 Neo4j，它们使用 Spring Data Commons 来构建 PersistentEntity/PeristentProperty（基本上是类型信息加上属性获取器和设置器）和 EntityConverter 从本地存储滚动到 Java。这就是 SDN (Spring Data Neo4j) 所做的加上捆绑 BeanWrapper 转换器以确保 Neo4j 数据结构允许某些属性类型。

基本上，Java bean 带有 @NodeEntity 注释，并且 bean 在写入由关系对象互连的节点（认为只有简单属性的 bean）时被分解。

想知道我是否可以对 Orika 做同样的事情？意味着通过注释识别类并在递归复杂时处理每个属性。例如：

```
 @NodeEntity
 class Software {
    String name;
    ....
    Organisation organisation;
    ....
 } 

 @NodeEntity
 class Organisation {
    String name;
 } 
```

应该滚动到 2 个节点中，每个节点包含属性**名称**和关系对象（将组织表示为软件的成员）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:39:42.960

这是一个支持自定义注释的 Orika ClassMapBuilder 示例，我认为您可以对其进行调整以满足您的需求。

[要点：AnnotationClassMapBuilder](https://gist.github.com/elaatifi/5212119)

对于 Node（或 MongoDB 的 DBObject），您可以使用自定义属性解析器，请查看： [http](http://orika-mapper.github.com/orika-docs/advanced-mappings.html) ://orika-mapper.github.com/orika-docs/advanced-mappings.html (ElementPropertyResolver)

**编辑**

Orika 通过 class-map 构建映射器，实际上只是属性对的集合，属性可以是任何具有名称、类型和 setter 或/和 getter 的东西。

您可以在 Neo4J 端自动为 bean 中的每个属性创建一个等效项，并让 Orika 构建映射器。

例如，您可以创建一个 Person(name)->PrintStream 映射器，在其中为每个人的属性 (name) 创建一个等效于打印数据 (System.out)

例子

```
final Builder name = new Property.Builder()
                          .name("name")
                          .type(String.class.getName())
                          .setter("append(\"My name : \").append(%s).append('\\n')");       
factory.classMap(Person.class, PrintStream.class).fieldMap("name", name, false).add().register();

factory.getMapperFacade().map(person, System.out); // This print to default output stream, My name : xxxx 
```

# android - 如何仅在某些 API 级别上执行代码

> ID：15502935
> 
> 赞同：18
> 
> 时间：2013-03-19T14:59:02.167
> 
> 标签：android

例如，这段代码：

```
if (Build.VERSION.SDK_INT > Build.VERSION_CODES.GINGERBREAD) {

  myCalendarView.setOnDateChangeListener(
    new OnDateChangeListener() {

      @Override
      public void onSelectedDayChange(CalendarView view, int year, int month, int dayOfMonth) {
        Toast.makeText
        (
          getApplicationContext(), ""+dayOfMonth, 0
        ).show();        
      }

    }
  );

} 
```

给出错误：

> 说明资源路径位置类型调用需要 API 级别 11（当前最低为 8）：android.widget.CalendarView#setOnDateChangeListener example.java /example/src/com/example/example 第 20 行 Android Lint 问题

我明白为什么我在编译时得到这个错误。但是有没有办法将源 Java 类标记为仅在某些 API 级别 11 上使用？或者使用定义/类似的包围代码块，以便代码仅在 API 级别 11 以上的设备上进行后期绑定/jitted？实现我想要的最佳解决方案是什么？（这是在具有 CalendarView 功能的设备上提供一个活动。）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-19T15:15:50.983

我不确定这是否能解决你的问题，

但是您用来检查版本的内容在 API 9 下不起作用（并且您从 API 8 开始支持）。

你应该使用：

```
if (Build.VERSION.SDK_INT > 9) { 
```

或者因为有问题的函数是 API 11，请检查“SDK_INT>10”

然后对于 Eclipse 上的 lint 错误，按照人们的评论执行操作，禁用 lint 错误或将 @SuppressLint("NewAPi") 或该函数的目标添加到 11。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-29T12:00:45.500

对于在很久以后偶然发现这一点的任何人，在运行时基于 API 版本有条件地执行代码是目前支持不同平台版本的有效方式。请参阅：[https ://developer.android.com/training/basics/supporting-devices/platforms#version-codes](https://developer.android.com/training/basics/supporting-devices/platforms#version-codes)

它在哪里说：

> Android 在 Build 常量类中为每个平台版本提供了唯一的代码。在您的应用程序中使用这些代码来构建条件，以确保仅当这些 API 在系统上可用时才执行依赖于更高 API 级别的代码。

并举例说明：-

爪哇：

```
private void setUpActionBar() {
    // Make sure we're running on Honeycomb or higher to use ActionBar APIs
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
    }
} 
```

科特林：

```
private fun setUpActionBar() {
    // Make sure we're running on Honeycomb or higher to use ActionBar APIs
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        actionBar.setDisplayHomeAsUpEnabled(true)
    }
} 
```

# iphone - iPad 模拟器/设备使用 iPhone 故事板

> ID：15502940
> 
> 赞同：5
> 
> 时间：2013-03-19T14:59:12.167
> 
> 标签：iphone, objective-c, xcode, ipad

[所以我已经为 iPhone 创建了一个应用程序，我想按照这个答案](https://stackoverflow.com/questions/8465769/convert-storyboard-from-iphone-to-ipad)中的步骤将它转换为 iPad 。

*   复制您的 iPhone-Storyboard 并将其重命名为 MainStoryboard_iPad.storyboard

*   使用任何文本编辑器打开此文件。

*   搜索 targetRuntime="iOS.CocoaTouch" 并将其更改为 targetRuntime="iOS.CocoaTouch.iPad"

*   现在保存所有内容并重新打开 Xcode -> iPad 故事板包含与 iPhone 文件相同的内容，但所有内容都可能被打乱

一切都正确完成，但 iPad 模拟器/设备无论如何都使用 iPhone 故事板。有什么建议么？

我在摘要-> ipad 部署信息-> 主故事板中设置了 iPad 故事板。并且 main.plist-> Main storyboard file base name (iPad) 设置为 iPad storyboard。

请告诉我我错过了什么。

**升级版**。有趣的是，当我从 ipad 部署信息中删除 iPad 故事板名称时，它仍然在设备上使用我的 iPhone 故事板。

![在此处输入图像描述](../Images/a06d78341fbbac0ef470e3fe2087a3ec.png)

![在此处输入图像描述](../Images/ec3f3c77a3f3fe1d0b4aa53009f2c9c9.png) ![在此处输入图像描述](../Images/74dafc131f9daa1fc873c8583f230b18.png)

![在此处输入图像描述](../Images/b77673e9ac6376985a1d272d95656a95.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:05:55.723

不要忘记在项目的 info.plist 文件中添加以下内容（主故事板文件基本名称/主故事板文件基本名称（iPad））

![在此处输入图像描述](../Images/9c95d5fbf8690e98d2741dd17da377d2.png)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T15:14:27.443

您总是可以在 appDelegate 中选择正确的故事板并以编程方式呈现相应的根视图控制器

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    UIViewController *rvc;
} 
```

执行

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
       UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"IPAD_Storyboard" bundle:nil];
       rvc = [storyboard instantiateViewControllerWithIdentifier:@"identifierForController"];
    }
    else {
       UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
       rvc = [storyboard instantiateViewControllerWithIdentifier:@"identifierForController"];
    }

    [self.window addSubview:rvc.view];
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

# python - 是否有可能使 vim 的行为更像 python IDE？

> ID：15502942
> 
> 赞同：-3
> 
> 时间：2013-03-19T14:59:17.863
> 
> 标签：python, vim, ide

vimscript 中是否有任何命令或我可以使用的任何扩展？

我已经使用了语法高亮，但如果可能的话，我希望能高亮显示错误或警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:04:42.297

你可以做很多事情来改进它。

对于静态错误突出显示/警告，我使用 PyFlakes：[http ://www.vim.org/scripts/script.php?script_id=2441](http://www.vim.org/scripts/script.php?script_id=2441)

如果您想要更多智能，我建议您使用 Ropevim：[http: //rope.sourceforge.net/ropevim.html](http://rope.sourceforge.net/ropevim.html)

绳子会给你的东西：

*   改名
*   提取方法/局部变量
*   移动类/函数/模块/包/方法
*   内联方法/局部变量/参数
*   重组
*   更改签名

其他与重构相关的功能：

*   预览重构
*   撤消/重做重构
*   显示重构进度

代码辅助：

*   代码完成
*   转到定义
*   显示 pydoc
*   查找事件
*   组织导入（删除未使用和重复的导入并对其进行排序）
*   生成python元素

# jndi - Websphere 8.x 遍历全局 JNDI 树

> ID：15502944
> 
> 赞同：0
> 
> 时间：2013-03-19T14:59:19.950
> 
> 标签：jndi, global, traversal, websphere-8

有没有一种简单的方法可以遍历一个集群节点的全局 JNDI 树。我知道 dumpNameSpace.sh 脚本，但我想在 servlet 中执行此操作。

我想列出全局 JNDI 树的所有条目。

有谁知道如何在 Websphere 8.x 上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:42:29.380

dumpNameSpace 最终只是使用 Context.list 方法，所以你可以在你的 servlet 中做同样的事情。

# javascript - Socket.io 包未安装在窗口 7 Node.js 中

> ID：15502945
> 
> 赞同：1
> 
> 时间：2013-03-19T14:59:21.440
> 
> 标签：javascript, asp.net-mvc-3, node.js, socket.io

嗨朋友我正在尝试使用**npm install socket.io**安装 socket.io 模块。它不工作我收到以下错误：

```
npm WARN package.json an-hybrid-app@0.1.0 No README.md file found!
npm http GET https://registry.npmjs.org/socket.io
npm http 200 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/socket.io-client/0.9.11
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/base64id/0.1.0
npm http GET https://registry.npmjs.org/redis/0.7.3
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.11
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http 304 https://registry.npmjs.org/redis/0.7.3
npm http 304 https://registry.npmjs.org/base64id/0.1.0
npm http GET https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/ws
npm http 304 https://registry.npmjs.org/uglify-js/1.2.5
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/options
npm http GET https://registry.npmjs.org/tinycolor
npm http GET https://registry.npmjs.org/commander
npm http 304 https://registry.npmjs.org/zeparser/0.0.5
npm http 304 https://registry.npmjs.org/options
npm http 304 https://registry.npmjs.org/tinycolor
npm http 304 https://registry.npmjs.org/commander

> ws@0.4.25 install E:\chat_\nodejs\node_modules\socket.io\node_modules\socket.i
o-client\node_modules\ws
> (node-gyp rebuild 2> builderror.log) || (exit 0)

CreateProcessW: The system cannot find the file specified.
npm ERR! error rolling back Error: ENOTEMPTY, rmdir 'E:\chat_\nodejs\node_module
s\socket.io\node_modules\socket.io-client\node_modules\active-x-obfuscator\node_
modules\zeparser'
npm ERR! error rolling back  socket.io-client@0.9.11 { [Error: ENOTEMPTY, rmdir
'E:\chat_\nodejs\node_modules\socket.io\node_modules\socket.io-client\node_modul
es\active-x-obfuscator\node_modules\zeparser']
npm ERR! error rolling back   errno: 53,
npm ERR! error rolling back   code: 'ENOTEMPTY',
npm ERR! error rolling back   path: 'E:\\chat_\\nodejs\\node_modules\\socket.io\
\node_modules\\socket.io-client\\node_modules\\active-x-obfuscator\\node_modules
\\zeparser' }
npm ERR! error rolling back Error: EPERM, readdir 'E:\chat_\nodejs\node_modules\
socket.io\node_modules\socket.io-client\node_modules\active-x-obfuscator\node_mo
dules\zeparser\benchmark.html'
npm ERR! error rolling back  socket.io@0.9.13 { [Error: EPERM, readdir 'E:\chat_
\nodejs\node_modules\socket.io\node_modules\socket.io-client\node_modules\active
-x-obfuscator\node_modules\zeparser\benchmark.html']
npm ERR! error rolling back   errno: 50,
npm ERR! error rolling back   code: 'EPERM',
npm ERR! error rolling back   path: 'E:\\chat_\\nodejs\\node_modules\\socket.io\
\node_modules\\socket.io-client\\node_modules\\active-x-obfuscator\\node_modules
\\zeparser\\benchmark.html' }
npm ERR! ws@0.4.25 install: `(node-gyp rebuild 2> builderror.log) || (exit 0)`
npm ERR! `cmd "/c" "(node-gyp rebuild 2> builderror.log) || (exit 0)"` failed wi
th 127
npm ERR!
npm ERR! Failed at the ws@0.4.25 install script.
npm ERR! This is most likely a problem with the ws package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     (node-gyp rebuild 2> builderror.log) || (exit 0)
npm ERR! You can get their info via:
npm ERR!     npm owner ls ws
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7600
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "socket.io"
npm ERR! cwd E:\chat_\nodejs
npm ERR! node -v v0.8.18
npm ERR! npm -v 1.2.2
npm ERR! code ELIFECYCLE
npm ERR! Error: ENOENT, lstat 'E:\chat_\nodejs\node_modules\socket.io\node_modul
es\socket.io-client\node_modules\active-x-obfuscator\node_modules\zeparser\bench
mark.html'
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Windows_NT 6.1.7600
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod  ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "socket.io"
npm ERR! cwd E:\chat_\nodejs
npm ERR! node -v v0.8.18
npm ERR! npm -v 1.2.2
npm ERR! path E:\chat_\nodejs\node_modules\socket.io\node_modules\socket.io-client\node_modules\active-x-obfuscator\node_modules\zeparser\benchmark.html 
```

npm 错误！fstream_path E:\chat_\nodejs\node_modules\socket.io\node_modules\socket .io-client\node_modules\active-x-obfuscator\node_modules\zeparser\benchmark.html

```
npm ERR! fstream_type File
npm ERR! fstream_class FileWriter
npm ERR! code ENOENT
npm ERR! errno 34
npm ERR! fstream_stack C:\Program Files\nodejs\node_modules\npm\node_modules\fstream\lib\writer.js:284:26
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     E:\chat_\nodejs\npm-debug.log
npm ERR! not ok code 0 
```

我是 node.js 的新手，请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:30:51.837

问题在于 ws 包。它只是找不到`cmd.exe`。`PATH`将 %SYSTEMROOT%\System32 或 C:\Windows\System32 的路径添加到您的环境

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T01:48:12.420

确保您拥有运行所需的所有软件`node-gyp`：

*   [https://github.com/TooTallNate/node-gyp](https://github.com/TooTallNate/node-gyp)

您还可以`node-gyp`通过环境变量配置所使用的 Visual Studio 版本，这样您就可以避免`--msvs_version=2012`每次执行 npm 安装时都必须设置属性。

例子：

*   `GYP_MSVS_VERSION=2012`为 Visual Studio 2012设置
*   设置`GYP_MSVS_VERSION=2013e`（“e”代表“特快版”）

有关完整列表，请参阅 - [https://github.com/joyent/node/blob/v0.10.29/tools/gyp/pylib/gyp/MSVSVersion.py#L209-294](https://github.com/joyent/node/blob/v0.10.29/tools/gyp/pylib/gyp/MSVSVersion.py#L209-294)

这对于 NodeJS 的 Windows 用户来说仍然很痛苦，因为它假定您安装了 Visual Studio 的副本，而许多最终用户永远不会拥有它。因此，我正在游说 Joyent 鼓励他们将 Web 套接字作为 CORE 节点的一部分，并可能将 GNU gcc 编译器作为 NodeJS 安装的一部分，这样我们就可以永久解决这个问题。

欢迎在以下位置添加您的投票：

*   [https://github.com/joyent/node/issues/8005#issuecomment-50545326](https://github.com/joyent/node/issues/8005#issuecomment-50545326)

# ruby-on-rails - 用于新建和编辑的 Rails 表单 - 设置今天的日期与现有日期

> ID：15502946
> 
> 赞同：0
> 
> 时间：2013-03-19T14:59:23.850
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序，它使用相同的 events/_form.erb 来新建和编辑事件。

如果是新活动，我想预先选择今天的日期。如果正在编辑，我想让它显示已经输入的日期。

我想我可以用闪光灯设置来做到这一点。

这是事件/new.html.erb：

```
<% flash[:newevent] = "true" %>
<%= render :partial => 'form' %> 
```

这是 events/_form.html.erb 中的代码

```
 <% if flash[:newevent] = "true" %>
         <%= f.input :starts_at, :as => :string, :label => 'Date', :input_html => {:class => 'datepicker', :value => Date.today.to_s} %>
       <% else %>
         <%= f.input :starts_at, :as => :string, :label => 'Date', :input_html => {:class => 'datepicker'} %>
       <% end %> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:01:42.983

这是你要找的吗？

```
... :value => f.object.starts_as || Date.today.to_s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:02:17.320

控制器：

```
@new_event = true # or false in edit 
```

看法：

```
<% if @new_event %> 
```

或者只是考虑到这一点：

```
<% if f.object.new_record? %> 
```

# vb.net - 在其他表格中时，有什么方法可以使 Word 表格的第一行重复？

> ID：15502950
> 
> 赞同：0
> 
> 时间：2013-03-19T14:59:26.100
> 
> 标签：vb.net, ms-word, ms-office

我正在自动化 vb.net 中的 word 文档。我的问题是我需要另一个表中的一个表来重复第一行。有没有办法做到这一点？

表的 textwrap 设置为 none，第一行是唯一设置了 repeat has header 属性的行。

我不能把表从它的包含表中拿出来。此解决方案不是一种选择。

这与文档也是自动化的事实无关。

使用单词 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:40:59.230

我刚刚用 Word 2010 做了一个快速测试。

我创建了一个表格，并选中了“在每页顶部重复作为标题行”。

果然，这行得通。

然后我创建了另一个表，并将第一个表剪切/粘贴到其中。

尽管属性保持设置，但在 Word UI 中未重复标题。

我快速浏览了可能影响嵌套表行为的属性，但看不到任何属性。

然后我用谷歌搜索了“单词嵌套表重复标题行”，它返回了相当多的相关结果。

结论：您不能使嵌套表中的标题行在后续页面上重复。将其放入内容控件之类的技巧似乎也不起作用。

# java - 在Java中找到满足的条件子句

> ID：15502962
> 
> 赞同：0
> 
> 时间：2013-03-19T14:59:53.607
> 
> 标签：java

我正在调试一段代码，我有一个问题：如果我有一个长条件，其中包含使用or`if`捆绑的多个条件语句，是否有办法找出条件的哪个条件（所有条件）是（是）使满意。`OR``AND``if`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:01:20.637

要检查这一点，您需要调试您的应用程序。在调试中，您可以通过按`Ctrl`+ `Shift`+轻松检查它`I`

在代码中设置断点以调试应用程序。

阅读[本文](http://www.ibm.com/developerworks/library/os-ecbug/)以了解如何调试应用程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:04:52.057

如果您正在使用 Eclipse，请在 if 语句行中放置一个断点，当调试器在其上停止时，您可以通过选择它并按 "Ctrl+Shift+I" 来检查每个条件，弹出窗口将显示结果健康）状况。您可以以相同的方式评估整个 if 语句或任何变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:04:02.787

您最好的选择可能是在`if`条件之前放置一个断点并自己检查条件的值。

如果它对您有帮助，您可以更改类似

```
if(myVar == 4 && myVar2 == 6)
{
    ...
} 
```

至

```
if(myVar == 4)
{
    if(myVar2 == 6)
    {
        ...
    }
} 
```

并使用您的调试器逐步完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T15:31:53.633

为 if 中的每个条件创建一个布尔变量，并在 if 中放入所有这些布尔值。

然后您可以记录所有这些布尔值，或使用 Eclipse 对其进行调试。

例如，如果您有：

```
if( a==b && k!=9 && i.isEmpty()) { 
```

你可以做：

```
boolean b1= a==b;
boolean b2 = k!=9;
boolean b3 = i.isEmpty();

logger.log(b1);
logger.log(b2);
logger.log(b3);

if (b1 && b3 && b3){ 
```

# google-maps - Webshaper中的谷歌地图热图？

> ID：15502965
> 
> 赞同：1
> 
> 时间：2013-03-19T14:59:58.290
> 
> 标签：google-maps, f#, websharper

我正在评估 Websharper，我正在做的项目都是关于谷歌地图中的热图。是否可以使用 Websharper 的 Google 地图扩展来显示热图？我没有使用 Fusion 表。几乎没有任何可用的文档，但是通过`IntelliFactory.WebSharper.Google.Maps`在智能感知中浏览它看起来是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:07:19.650

请尝试最新的[NuGet 包](http://nuget.org/packages/WebSharper.Google.Maps/2.4.52.144)。我还没有完成升级，但是这个二进制文件足以让你开始使用 Heatmaps API。例如，看到[这个](https://github.com/intellifactory/WebSharper.Google.Maps/blob/master/if-ws-google-maps-tests/HeatMaps.fs)。Google Maps 扩展现在是开源的，具有匹配的 Bitbucket 和 GitHub 存储库，非常欢迎贡献。

# javascript - 解析 JSON 错误：Javascript

> ID：15502969
> 
> 赞同：0
> 
> 时间：2013-03-19T15:00:07.780
> 
> 标签：javascript, json, parsing

我正在尝试使用`JSON.parse`.

**前任。**

```
str = "{'xyz': ['300543979001'], 'abc': ['1193'], 'serial_no': ['1'], 'product_tax_amt': ['408.813'], 'product_mrp': ['4699.0'], 'product_qty': ['1.0'], 'contract_type': ['FG'], 'product_tax_rate': ['14.5'], 'is_vat_exclusive': ['True'], 'product_net_amt': ['3228.213'], 'sap_details': [''], 'reference_invoice_no': [''], 'pd': [\"1||9911143976001||18373205-L-I-F-T- RACER WN'S, PINK, 5||11143976||PUMA-18373205-L-I-F-T- RACER WN'S, PINK, 5-5||4699.0||291||629||1||2||41\"], 'topup_offers': ['{}'], 'product_discount_percentage': ['40.0'], 'total_discount_percentage': ['40.0'], 'basic_tax_rate': ['0.0'], 'total_discount_amt': ['1879.6'], 'product_return_qty': ['0.0'], 'product_gross_amt': ['0.0'], 'invoice_no': ['11065011391'], 'product_discount_amt': ['1879.6'], 'is_voided': ['False'], 'supplier_no': ['198'], 'addl_tax_rate': ['0.0'], 'product_cost_amt': ['1.0'], 'code': ['4046643889059']}" 
```

**注意：：**这是单引号，少数值也可能包含引号，例如`[\"1||9911143976001||18373205-L-I-F-T- RACER WN'S, PINK, 5||11143976||PUMA-18373205-L-I-F-T- RACER WN'S, PINK, 5-5||4699.0||291||629||1||2||41\"]`

```
>> JSON.parse(str) 
```

但它的抛出错误：`Unexpected token '`

**已编辑**

我在这里和那里尝试了一些用双引号替换这些单引号的东西，

```
>> str = str.replace(/'/g, '"')
>> JSON.parse(str) 
```

但随后它会引发错误，

```
SyntaxError: Unexpected token S 
```

有什么方法可以使用`regex`或其他东西，所以我可以解析那个字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:04:47.087

您的一个字段中有单引号：

```
9911143976001||18373205-L-I-F-T- RACER WN'S, PINK, 5||11143976**strong text** 
```

尝试删除它们，或逃避它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:25:23.933

好的，重点是：如果那是来自服务器的数据，那是一种糟糕的数据格式。它不是有效的 JSON，并且字符串转义很差。在您的情况下，您可能希望使用双引号更改单引号，正如许多人已经建议的那样，但是您有如下可怕的字段：

```
[\"1||9911143976001||18373205-L-I-F-T- RACER WN'S, PINK, 5||11143976||PUMA-18373205-L-I-F-T- RACER WN'S, PINK, 5-5||4699.0||291||629||1||2||41\"] 
```

`'`现在，理想的解决方案是使用某种正则表达式来修复s，但是：

1）我一辈子都想不出一个可以工作的人；

2）我开始认为实际上不可能抓住每一种可能性。

如果我对此有误，我希望有人能纠正我。无论如何，如果真的是这样，我认为最简单的方法是最气馁的一种：dreadful `eval()`。那东西可能不是有效的 JSON，但它（令人惊讶）是一个正确的 JS 对象定义。

```
eval("var data = " + str); 
```

如果需要 JSON 字符串，可以使用`stringify()`：

```
var json = JSON.stringify(data); 
```

[这是一个工作小提琴](http://jsfiddle.net/LKuJP/2/)。

我必须提前说：`eval()`在这个网站上建议是一个可怕的举动，这是正确的。但在投反对票之前，请考虑我们有来自服务器的病态数据格式，在处理之前没有简单的方法来修复它。我再说一遍：如果有人能想出一个有效的正则表达式来替换双引号中任意数量的单引号，那肯定是一个更好的方法。

**编辑：**

If you are sure that the only problematic field is the `pd` one, you could use that information to simply replace all single quotes in that particular field. That would be much safer.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T15:12:29.593

根据[json.org](http://www.json.org)的说法，您的 JSON 是错误的：

> 数组是**值**的有序集合...

和

> 值可以是**双引号**中的字符串、数字、true 或 false 或 null、对象或数组。

因此，您必须将字符串用双引号而不是单引号括起来。

* * *

编辑：

一个有效的`JSON`将是：

```
{
  "xyz": [
    "300543979001"
  ],
  "abc": [
    "1193"
  ],
  "serial_no": [
    "1"
  ],
  "product_tax_amt": [
    "408.813"
  ],
  "product_mrp": [
    "4699.0"
  ],
  "product_qty": [
    "1.0"
  ],
  "contract_type": [
    "FG"
  ],
  "product_tax_rate": [
    "14.5"
  ],
  "is_vat_exclusive": [
    "True"
  ],
  "product_net_amt": [
    "3228.213"
  ],
  "sap_details": [
    ""
  ],
  "reference_invoice_no": [
    ""
  ],
  "pd": [
    "1||9911143976001||18373205-L-I-F-T- RACER WN'S",
    "PINK",
    "5||11143976||PUMA-18373205-L-I-F-T- RACER WN'S",
    "PINK",
    "5-5||4699.0||291||629||1||2||41"
  ],
  "topup_offers": [
    "{}"
  ],
  "product_discount_percentage": [
    "40.0"
  ],
  "total_discount_percentage": [
    "40.0"
  ],
  "basic_tax_rate": [
    "0.0"
  ],
  "total_discount_amt": [
    "1879.6"
  ],
  "product_return_qty": [
    "0.0"
  ],
  "product_gross_amt": [
    "0.0"
  ],
  "invoice_no": [
    "11065011391"
  ],
  "product_discount_amt": [
    "1879.6"
  ],
  "is_voided": [
    "False"
  ],
  "supplier_no": [
    "198"
  ],
  "addl_tax_rate": [
    "0.0"
  ],
  "product_cost_amt": [
    "1.0"
  ],
  "code": [
    "4046643889059"
  ]
}
```

这是一个[.](http://jsbin.com/uheyeg/5)`JSBin Demo`

PS：我不确定数组`"`的第一个和最后一个元素中是否应该有 s 。`pd`如果是这样，只需将`\"`s 添加到这些值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T15:12:54.917

JSON 字符串用双引号`"`字符分隔。您正在使用单引号字符，这在 JavaScript 文字中是合法的，但在 JSON 中是不合法的。

当您手工制作 JSON 时，使用[JSON Lint](http://jsonlint.com/) （它会发现此错误）之类的工具来测试它是很有用的。（通常您应该使用经过良好测试的库函数来生成 JSON）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-19T15:06:25.167

使用单引号`(' ')`是不好的做法——你最好使用双引号`(" ")`。 例如：`Literals`

```
 var str = '{ "foo": "bar" }';
 var json = JSON.parse(str); 
 json['foo'] 
```

# java - java.lang.NullPointerException 选择操作栏项目

> ID：15502977
> 
> 赞同：0
> 
> 时间：2013-03-19T15:00:33.437
> 
> 标签：java, android

```
@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
    Toast.makeText(MainActivity.appContext, "Reselected!", Toast.LENGTH_LONG).show();
} 
```

`Null Pointer Exception`当我再次重新选择操作栏时，我的应用程序关闭并抛出一个。错误似乎发生在上述方法中。

**日志猫：**

```
> 03-19 20:26:54.075: E/AndroidRuntime(2506): FATAL EXCEPTION: main
> 03-19 20:26:54.075: E/AndroidRuntime(2506):
> java.lang.NullPointerException 03-19 20:26:54.075:
> E/AndroidRuntime(2506):   at android.widget.Toast.<init>(Toast.java:85)
> 03-19 20:26:54.075: E/AndroidRuntime(2506):   at
> android.widget.Toast.makeText(Toast.java:226) 03-19 20:26:54.075:
> E/AndroidRuntime(2506):   at
> com.example.MyTabsListener.onTabReselected(MainActivity.java:94)
> 03-19 20:26:54.075: E/AndroidRuntime(2506):   at
> com.android.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:453)
> 03-19 20:26:54.075: E/AndroidRuntime(2506):   at
> com.android.internal.app.ActionBarImpl$TabImpl.select(ActionBarImpl.java:787)
> 03-19 20:26:54.075: E/AndroidRuntime(2506):   at
> com.android.internal.widget.ActionBarView$TabClickListener.onClick(ActionBarView.java:950)
> 03-19 20:26:54.075: E/AndroidRuntime(2506):   at
> android.view.View.performClick(View.java:3100) 03-19 20:26:54.075:
> E/AndroidRuntime(2506):   at
> android.view.View$PerformClick.run(View.java:11644) 03-19
> 20:26:54.075: E/AndroidRuntime(2506):     at
> android.os.Handler.handleCallback(Handler.java:587) 03-19
> 20:26:54.075: E/AndroidRuntime(2506):     at
> android.os.Handler.dispatchMessage(Handler.java:92) 03-19
> 20:26:54.075: E/AndroidRuntime(2506):     at
> android.os.Looper.loop(Looper.java:126) 03-19 20:26:54.075:
> E/AndroidRuntime(2506):   at
> android.app.ActivityThread.main(ActivityThread.java:3997) 03-19
> 20:26:54.075: E/AndroidRuntime(2506):     at
> java.lang.reflect.Method.invokeNative(Native Method) 03-19
> 20:26:54.075: E/AndroidRuntime(2506):     at
> java.lang.reflect.Method.invoke(Method.java:491) 03-19 20:26:54.075:
> E/AndroidRuntime(2506):   at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
> 03-19 20:26:54.075: E/AndroidRuntime(2506):   at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599) 03-19
> 20:26:54.075: E/AndroidRuntime(2506):     at
> dalvik.system.NativeStart.main(Native Method) 03-19 20:31:54.545:
> I/Process(2506): Sending signal. PID: 2506 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:06:05.537

代替

```
Toast.makeText(MainActivity.appContext, "Reselected!", Toast.LENGTH_LONG).show(); 
```

和

```
Toast.makeText(getActivity(), "Reselected!", Toast.LENGTH_LONG).show(); 
```

# asp.net-web-api - 异步 WebApi ActionFilterAttribute。异步模块或处理程序已完成，而异步操作仍处于挂起状态

> ID：15502983
> 
> 赞同：10
> 
> 时间：2013-03-19T15:00:42.633
> 
> 标签：asp.net-web-api, async-await, actionfilterattribute

我了解 await*等待*任务（可等待）完成。但我对这实际上意味着什么感到困惑。

**不起作用**的代码：

```
public async override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
{
    if (actionExecutedContext.Response.Content != null)
    {
        var responseContent = await actionExecutedContext.Response.Content.ReadAsStringAsync();
        DoSomething(responseContent);
    }
} 
```

**有效的**代码：

```
public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
{
    if (actionExecutedContext.Response.Content != null)
    {
        var responseContent = actionExecutedContext.Response.Content.ReadAsStringAsync().ContinueWith(
        task =>
        {
            DoSomething(task.Result);
        });
    }
} 
```

显然错误消息***异步模块或处理程序已完成，而异步操作仍处于挂起状态。***告诉我没有等待异步调用完成，而是“主”线程继续。我希望线程继续但不在当前方法中。我认为线程将返回到 asp.net 堆栈做一些其他工作，并在等待 asyncOperation() 操作完成后返回。

我也在其他地方使用 await ——（例如等待 Web 服务响应）——而且我在任何地方都没有遇到类似的问题。我想知道为什么 IActionFilterAttribute 行为不同。事实上，我的 Web 服务调用可能比将响应内容读入字符串花费的时间更长。

有人可以启发我吗？我感觉我没有理解这个概念。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-12T17:43:55.130

将异步代码添加到返回 void 的方法是危险的，而且几乎永远不会是您真正想要做的事情。请参阅[返回 void 和返回 Task 有什么区别？](https://stackoverflow.com/questions/8043296/whats-the-difference-between-returning-void-and-returning-a-task).

相反，您需要覆盖/实现一个返回任务的方法。在这种情况下，ActionFilterAttribute 隐藏了 IHttpActionFilter 提供的任务，因此您需要改为实现 IActionFilter (ExecuteActionFilterAsync)。如果您想将代码用作属性，只需确保您也从 Attribute 类派生。

例如：

```
public class AsyncActionFilterAttribute : Attribute, IActionFilter
{
    public async Task<HttpResponseMessage> ExecuteActionFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
    {
        HttpResponseMessage response = await continuation();
        DoSomething(response);
        return response;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-28T10:00:47.000

而不是实施

```
public async override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext) 
```

您必须`OnActionExecuted`按如下方式实现方法的异步版本：

```
public override Task OnActionExecutedAsync(HttpActionExecutedContext actionExecutedContext, CancellationToken cancellationToken) 
```

这样您就可以在方法中使用 await 并且行为将如您所料。

希望这可以帮助。

# php - 从mysql获取最后的记录

> ID：15502990
> 
> 赞同：0
> 
> 时间：2013-03-19T15:01:06.830
> 
> 标签：php, mysql, sql, codeigniter

我有一个存储这样结构的表

```
id name group_id
1 ABC   1
2 DEF   1
3 GHi   1
4 jkl   2
5 mno   2
6 pqr   2
7 stu   3
8 vwx   3
9 yz0   3 
```

我想通过最后一个 group_id 获取记录，在上面的示例中，因为 3 并不总是相同，所以首先我必须通过另一个查询获取最后一个组 id：

```
Selct * FROM records ORDER BY group_ID DESC LIMIT 1;
// so here it gets last group-id which is 3 
```

所以我必须再次执行另一个查询以获取具有最后一个 id 的记录

```
// $id = 3 // from above records
Select * From records where group_id = $id 
```

有没有更好的方法用单个 mysql 查询来做到这一点？我正在使用 codeigniter 活动记录。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T15:03:30.880

试试这个：

```
SELECT * 
FROM records 
WHERE group_ID  = (SELECT MAX(group_ID ) 
                   FROM records); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/5b4c4/1)

这会给你：

```
| ID | NAME | GROUP_ID |
------------------------
|  7 |  stu |        3 |
|  8 |  vwx |        3 |
|  9 |  yz0 |        3 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:06:05.883

```
 SELECT x.*
   FROM my_table x
   JOIN 
      ( SELECT MAX(group_id) max_group_id FROM my_table ) y
     ON y.max_group_id = x.group_id; 
```

# javascript - Javascript - fillRect 和 drawImage 之后的 getImageData

> ID：15502999
> 
> 赞同：1
> 
> 时间：2013-03-19T15:01:21.933
> 
> 标签：javascript, drawimage, getimagedata, drawrectangle

我有以下问题：当我绘制一个矩形（使用 fillRect 方法），然后我绘制一个图像（使用 drawImage）时，我无法通过使用 getImageData 从 Contex 获得正确的结果。当我用 drawImage 注释行时，它可以正常工作。哪里有问题？

```
var img=document.getElementById("img");
var canvas=document.getElementById("can");
var ctx=canvas.getContext('2d');

ctx.fillStyle="red";
ctx.fillRect(0,0,50,50);
ctx.drawImage(img, 0, 0, 19, 19); //;(

var imgData=ctx.getImageData(0,0,50,50);
ctx.putImageData(imgData,100,100); 
```

问题：http: [//jsfiddle.net/yX5mj/1/](http://jsfiddle.net/yX5mj/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:08:02.950

如果您查看控制台，它会告诉您错误：

```
无法从画布获取图像数据，因为画布已被污染
通过跨域数据。
```

因此，它不想读取数据，因为您的图像可能是恶意的。为了防止这种情况发生，要么将图像托管在您的服务器上，要么执行 base64 之类的操作，对您想要的图像进行编码并将其嵌入到页面中。

[您可以在此处](https://stackoverflow.com/questions/1207190/embedding-base64-images)查看 base64 编码示例，并且您可以在 Internet 上找到 base64 编码器。