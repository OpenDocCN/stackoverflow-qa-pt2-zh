# StackOverflow 问答 14406000-14406999

# xcode - OSX Xcode - 打包依赖 libmysqlclient.18.dylib

> ID：14406001
> 
> 赞同：0
> 
> 时间：2013-01-18T19:15:54.220
> 
> 标签：xcode, macos, libmysql

在我无法找出正确的搜索词之前，这很可能已经被问到了。

我正在编写一个在 OSX 桌面上运行的客户端-服务器应用程序，它将与本地网络上的 MySQL 服务器通信。当基本上一堆 SQL 语句在内部是完美的时，实现 Web 服务 API 似乎是冗长的。

我已经在我的开发机器上与 MySQL 服务器的安装过程搏斗了，广告不得不求助于将 libmysqlclient.18.dylib 符号链接到 /usr/lib 即使我将包含路径放在头搜索路径中。

我需要知道的是如何创建一个 .app 文件，我可以将其发送到可以访问 libmysqlclient.18.dylib 文件的其他机器？

尽管我已经为 iDevices 做 Obj-c 2 年了，但我已经习惯了 Windows 有安装程序来执行此操作，并且对 OSX 编程有点陌生。

是否有允许将库复制到 .app 文件中的设置，或者我是否需要在每台机器上安装 mysql 连接器 - 如果是这样，我如何解决符号链接问题，理想情况下我需要它从库存中工作文件夹。

如果这已在其他地方得到回答，请指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T04:57:16.753

在构建时，OS X 上的静态链接器 ld 将应用程序链接到的每个库的共享库标识符写入应用程序二进制文件。在运行时，动态链接器 dyld 尝试从应用程序二进制文件中指定的路径加载每个共享库。您可以使用 来查看此信息`otool -L YourApp.app/Contents/MacOS/YourApp`。

您需要将 libmysqlclient.18.dylib 符号链接到 /usr/lib 的事实表明 libmysqlclient.18.dylib 的共享库标识符类似于 /usr/lib/libmysqlclient.18.dylib。要以您的应用程序将使用它而不是查看 /usr/lib 的方式将库包含在您的 .app 包中，您需要：

1.  更改 libmysqlclient.18.dylib 的共享库标识符，以便 dyld 查找与您的应用程序二进制文件相关的二进制文件。这通常通过运行来完成`install_name_tool -id @executable_path/../Frameworks/libmysqlclient.18.dylib libmysqlclient.18.dylib`。

2.  将修改后的 libmysqlclient.18.dylib 复制到应用程序包中的 Frameworks 子目录中。这通常使用 Xcode 项目中的 Copy Files 构建阶段来完成。

然后，您应该能够验证写入应用程序二进制文件的安装名称是`@executable_path/../Frameworks/libmysqlclient.18.dylib`不是`/usr/lib/libmysqlclient.18.dylib`（`otool -L YourApp.app/Contents/MacOS/YourApp`再次使用）。如果安装名称不正确，那么您需要确保您的链接器搜索路径设置为在您可能拥有的任何其他版本之前找到您修改后的 libmysqlclient.18.dylib 版本。

# objective-c - NSDate 倒计时从现在到 NSDate

> ID：14406002
> 
> 赞同：1
> 
> 时间：2013-01-18T19:15:59.043
> 
> 标签：objective-c, nsdate, countdown

如何以 HH:mm:ss 格式显示从现在到将来会发生的所需 NSDate 的倒计时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:30:21.723

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)开始。

```
NSDate *future = // whatever

[NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(updateCounter:) userInfo:nil repeats:YES];

- (void)updateCounter:(NSTimer *)tmr
{
    NSTimeInterval iv = [future timeIntervalSinceNow];
    int h = iv / 3600;
    int m = (iv - h * 3600) / 60;
    int s = iv - h * 3600 - m * 60;
    aUILabel.text = [NSString stringWithFormat:@"%02d:%02d:%02d", h, m, s];
    if (h + m + s <= 0) {
        [tmr invalidate];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T19:27:45.277

您必须使用计时器来标记日期。

存储未来日期，并继续减去未来日期 - [nsdate today]...

以秒为单位计算时间，并将其计算为小时、分钟、秒...

//创建两个属性`NSDate *nowDate, *futureDate`

```
futureDate=...;

nowDate=[NSDate date];

long elapsedSeconds=[nowDate timeIntervalSinceDate:futureDate];
NSLog(@"Elaped seconds:%ld seconds",elapsedSeconds);

NSInteger seconds = elapsedSeconds % 60;
NSInteger minutes = (elapsedSeconds / 60) % 60;
NSInteger hours = elapsedSeconds / (60 * 60);
NSString *result= [NSString stringWithFormat:@"%02ld:%02ld:%02ld", hours, minutes, seconds]; 
```

这对你来说很方便......[请检查项目](http://www.keepandshare.com/doc/5387039/timerstopwatch-3-zip-43k?da=y)......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T19:43:49.313

试一下这段代码：

```
NSTimer* timer= [NSTimer scheduledTimerWithInterval: [self.futureDate timeIntervalSinceNow] target: self selector: @selector(countdown:) userInfo: nil, repeats: YES]; 
```

倒计时：方法：

```
- (void) countdown: (NSTimer*) timer
{
    if( [self.futureDate timeIntervalSinceNow] <= 0)
    {
        [timer invalidate];
        return;
    }
    NSDateComponents* comp= [ [NSCalendar currentCalendar] components: NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit startingDate: [NSDate date] toDate: self.futureDate options: 0];
    NSLog(@"%lu:%lu:%lu", comp.hour,comp.minute.comp.second);
} 
```

# multithreading - 闭包作为线程中的参数

> ID：14406005
> 
> 赞同：0
> 
> 时间：2013-01-18T19:16:04.027
> 
> 标签：multithreading, groovy, closures

为什么这段代码不起作用（没有输出）？

```
clo1 = {
    for(int i =0; i<=10; i++){
        println(i);
    }
}

def thread = Thread.start { clo1 } 
```

但这确实有效：

```
def thread = Thread.start {
    for(int i =0; i<=10; i++){
        println(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:47:41.223

如果你想`clo1`在线程中执行，你可以这样做

```
Thread.start clo1 // same as Thread.start(clo1) 
```

或者

```
Thread.start { clo1() } 
```

第一个将闭包直接传递给`Thread.start`. 第二种解决方案创建一个新的闭包，它执行`clo1`.

只需`Thread.start { clo1 }`将一个新的闭包（什么都不做）传递给`Thread.start`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:48:08.240

看起来您在传递给 Thread.start { clo1} 的闭包内放置了一个闭包（clo1）。调用 Threat.start clo1 将为您提供预期的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T19:48:16.213

你在一个闭包中包裹一个闭包

尝试

```
def thread = Thread.start clo1 
```

# visual-c++ - 使用 uiaccess 标志运行 Windows 服务

> ID：14406007
> 
> 赞同：3
> 
> 时间：2013-01-18T19:16:13.020
> 
> 标签：visual-c++, windows-8

我有一个程序，我想在 Windows 8 的开始屏幕上方显示一个窗口。唯一的方法（我知道）需要我在清单中设置标志 uiaccess=true。但是，为了让它工作，程序的用户需要是管理员。所以，我尝试[了这种方法](http://www.codeproject.com/Articles/18367/Launch-your-application-in-Vista-under-the-local-s)来获取我安装的服务来启动主程序。这样，任何用户都可以在安装后运行该程序。

问题是 uiaccess 标志。似乎为了启动文章中描述的程序，但使用 uiaccess，服务本身需要启用 uiaccess 标志（否则 CreateProcessAsUser 失败）。每当我尝试使用 uiaccess 标志安装服务时，都会收到错误消息“此过程需要提升”。

所以，主要问题是：有没有办法安装启用了这个标志的服务？我承认我希望答案是“不”。由于在会话 0 中运行的服务通常没有理由使用此标志，因为不允许使用 ui 组件。但是，我希望我错了，有办法。

谢谢，如果我需要清理任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T15:51:38.620

在 CreateProcessAsUser 之前和 DuplicateHandle 之后使用函数 SetTokenInformation 和 TokenUIAccess 1

# php - PHP/Querypath 获取 Javascript 变量的值

> ID：14406010
> 
> 赞同：0
> 
> 时间：2013-01-18T19:16:18.973
> 
> 标签：php, html-parsing, querypath

我正在尝试使用[QueryPath](http://api.querypath.org/docs/)传递 HTML 。我想在 HTML 中获取 Javascript 变量的值。像这样：

```
<script type="text/javascript">

        var base_url = "http://www.exampleurl.com/";
        var room_id = "357"; //I want to get the value of room_id
        var selected_room_button = "";

</script> 
```

我想获取 Javascript 变量 *room_id* 的值，即**357** 我该如何实现？

即使不使用 QueryPath，是否还有其他 HTML 解析器可以让我进行这种解析？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:47:39.173

您可以使用正则表达式。此代码将在您的示例中返回房间 ID。

```
<?php

$html = '
<script type="text/javascript">
    var base_url = "http://www.exampleurl.com/";
    var room_id = "357"; //I want to get the value of room_id
    var selected_room_button = ""; 
</script>';

$pattern = '/var room_id = "(.*)";/';
preg_match($pattern, $html, $matches);
$room_id = $matches[1]; 
```

但是没有通用的解决方案，因为一个变量可能被定义了两次，或者被定义在不同的范围内。

如果您不需要提取 row_id 旁边的其他内容，我认为没有理由使用 HTML 解析器。它只会减慢速度。还请期待 HTML 解析器不是 Javascript 解析器！HTML 解析器将仅用于提取`<script>` `</script>`标签之间的未解析内容 - 作为字符串。您将需要再次使用正则表达式来提取 row_id。

# c# - 在 C# 面板中的背景图像上维护图形线

> ID：14406013
> 
> 赞同：0
> 
> 时间：2013-01-18T19:16:28.983
> 
> 标签：c#, graphics, scaling, lines

我在 ac# 面板的背景图像上画线。面板锚定到表单，以便表单调整面板大小。背景图像设置为拉伸，因此当您调整表单大小时，您所看到的只是背景图像。

我最初的问题：在面板上绘制的线条（通过 OnPaint 事件）在图像调整大小时停留在它们最初绘制的位置。

我当前的解决方案：记录线的位置并通过缩放 X 和 Y 坐标在新的位图上重绘它（工作正常）。

我的新问题：当您不断调整窗口大小并绘制线条时，您无法从任何时间点计算缩放因子并将其应用于所有线条，因为线条最初是在不同尺寸的图像中绘制的。

我认为我有两个选项：重绘线后，通过我的线数组并更新坐标信息，使其现在与当前比例匹配。或者除了存储线的坐标信息之外，还存储面板在绘制时的尺寸信息，这样我总是可以根据每条线的绘制时间和新的面板尺寸来计算每条线的比例。

我希望的是：如果您对这两种方法中的任何一种有任何想法，将不胜感激......更好的是向我指出一个更好的方法来做到这一点（我对c# 中的图形处理）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:53:24.887

不能写评论，就像我想要的那样。你确实有几个选择：

*   直接在原始位图上画线。这可能不是您的选择，具体取决于任务。

*   像现在一样做，跟踪线条的坐标，在调整大小时更新它们，并在 Paint 上重绘它们——如果你使用它，你也可以移动和删除它们，

*   或者通过引入在每次调整大小时更新的“比例因子”（浮点数）来做到这一点，并在 Paint 事件处理程序中使用该比例因子绘制所有内容。创建一条线时，您可以使用比例因子 BACK TO 统一坐标系（比例因子 1）计算其坐标，然后您根本不必修改坐标。由于统一的坐标系，这可能很容易调试。这是我推荐的，但这又取决于你的任务。

*   绘制到与原始图像大小相同的完全透明位图，使用上一个选项中的比例因子。创建一条线时，在统一坐标系中计算其坐标，将其绘制在位图上，然后在每个 Paint 上，将整个位图绘制在原始位图上。同样，如果您需要删除或移动您的线条，或者您的内存很紧，或者您不希望您的线条在放大时变得模糊，这可能不是一个选项，但不知何故，很多人都喜欢这样因为它就像“Photoshop 中的图层”。:)

# c# - 比例/灵敏度无界输出数

> ID：14406014
> 
> 赞同：0
> 
> 时间：2013-01-18T19:16:31.923
> 
> 标签：c#, algorithm

我有一个“东西”（细节不重要）输出一个介于 0 和 + 无穷大之间的数字。该数字是对某些输入因素的度量，其中高数字不好，低数字好。

我需要为此添加一个敏感度设置 - 因此调用者可以指定一个基本上可以缩放输出的数字。

理想情况下，我希望该比例介于 -1 和 1 之间。0 代表正常。随着刻度向 1 增加，灵敏度增加，输出数量**减少**。随着标度向 -1 减小，灵敏度降低，输出数量**增加**。

到目前为止，我有这个：

```
static decimal GC(decimal inVal, decimal gc)
{
decimal nOUT = inVal;
if( gc > 0 )
{
    nOUT = Math.Max( inVal * (1 - gc), 0 );
}
else if( gc < 0 )
{
    if( gc == 1 ) gc = 0.9M;
    decimal d = Math.Abs(gc);
    nOUT = inVal * ( (1 / d) );
}
return nOUT;
} 
```

GC 是我的比例函数并且`gc`是输入因素。

这适用于 1，输出为

```
IN = 3.0, OUT = 3.0, gc = 0
IN = 3.0, OUT = 2.7, gc = 0.1
IN = 3.0, OUT = 2.4, gc = 0.2
IN = 3.0, OUT = 2.1, gc = 0.3
IN = 3.0, OUT = 1.8, gc = 0.4
IN = 3.0, OUT = 1.5, gc = 0.5
IN = 3.0, OUT = 1.2, gc = 0.6
IN = 3.0, OUT = 0.9, gc = 0.7
IN = 3.0, OUT = 0.6, gc = 0.8
IN = 3.0, OUT = 0.3, gc = 0.9
IN = 3.0, OUT = 0.0, gc = 1.0 
```

但不适合在没有输出的情况下朝向 -1

```
IN = 3.0, OUT = 3.0, gca = 0
IN = 3.0, OUT = 30.0, gca = -0.1
IN = 3.0, OUT = 15.0, gca = -0.2
IN = 3.0, OUT = 10.0, gca = -0.3
IN = 3.0, OUT = 7.5, gca = -0.4
IN = 3.0, OUT = 6.0, gca = -0.5
IN = 3.0, OUT = 5.0, gca = -0.6
IN = 3.0, OUT = 4.3, gca = -0.7
IN = 3.0, OUT = 3.8, gca = -0.8
IN = 3.0, OUT = 3.3, gca = -0.9
IN = 3.0, OUT = 3.0, gca = -1.0 
```

随着 gca 接近 -1，我需要输出数字变大。

我遇到的第二个问题是规模问题。最多，这个数字会大 10 倍。我想我需要引入另一个数字，比如比例，其中 gca 表示应用 +/- 到输出数字的比例比例，但我不知道如何。

任何人都可以帮忙吗？要么解决这个问题，要么用更好的方法！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:23:44.900

我不太确定我是否正确理解了您的问题，但也许这会起作用？

```
else if( gc < 0 )
{
    nOUT = inVal / (1 + gc);
} 
```

`gc`这个表达式在接近 -1时变得奇异，并以`nOUT`双曲线方式向无穷大发散。这是`0 < gc < 1`本案的天然“对立面”。

如果您想将数字限制为大 10 倍，您只需`gc`乘以 0.9 即可重新缩放；这会将`(1 + gc)`项限制为 0.1，对应于乘以 10。例如：

```
gc *= (1 - 1 / 10.0) 
```

另请注意，您`Math.Max`在`0 < gc < 1`案例中的使用是多余的。

* * *

为了让您了解这种缩放的行为方式，这是我`nOUT`针对`gc`for制作的图`inVal = 5`，限制值为 10：

![nOUT 与 gc 的图](../Images/b5cbcd61f8e7c5da8e2fe4a48d3392c8.png)

但是，您应该注意，对数字的大小施加此限制会使缩放不对称且不太“好”。对于小于 10 的限制因子，您会在`gc = 0`; 例如，限制因子为 1.5：

![在此处输入图像描述](../Images/d362db42935e03f2c5c0efbbc4b41166.png)

* * *

另一种方法是简单地将缩放因子*限制*在 0.9，而不是像我上面建议的那样重新缩放因子本身。这消除了尖端，`gc = 0`而是在达到该限制因素（在本例中为 10）时将其变平。你可以这样实现：

```
gc = Math.Max(gc, -(1 - 1 / 10.0)) 
```

这是一个比较两种方法的图表（蓝线是第一种方法；红线是第二种方法）：

![在此处输入图像描述](../Images/18bd96fa740b6ddaa03da6f95c81e349.png)

# php - 如何让小书签弹出一个表单，将 URL 和标题提交给 DB 以及评论

> ID：14406021
> 
> 赞同：2
> 
> 时间：2013-01-18T19:16:54.813
> 
> 标签：php, javascript, forms, bookmarklet

我实现了一个小书签，单击它会将 URL 和标题发送到数据库。我希望首先弹出一个表单，其中包含一个用于添加评论的字段、一个用于编辑页面标题的字段以及一个用于选择从数据库表中填充的类别的下拉字段。

我仍在学习 php，几乎没有任何 JS 技能。我不知道如何让小书签调用将提交到数据库或将页面 URL 和标题传递给表单的弹出表单。

到目前为止我使用的代码来自这里-> [http://tutorialzine.com/2010/04/simple-bookmarking-app-php-javascript-mysql/](http://tutorialzine.com/2010/04/simple-bookmarking-app-php-javascript-mysql/)

书签代码：

```
(function () {
  var jsScript = document.createElement('script');
  jsScript.setAttribute('type', 'text/javascript');
  jsScript.setAttribute('src', '/bookmark.php?url=' + encodeURIComponent(location.href)
  + '&title=' + encodeURIComponent(document.title));

document.getElementsByTagName('head')[0].appendChild(jsScript);

})(); 
```

书签.php 代码：

```
// Error reporting:
error_reporting(E_ALL^E_NOTICE);

require "connect.php";
require "functions.php";

// Setting the content-type header to javascript:
header('Content-type: application/javascript');

// Validating the input data
if(empty($_GET['url']) || empty($_GET['title']) || !validateURL($_GET['url'])) die();

// Sanitizing the variables
$_GET['url'] = sanitize($_GET['url']);
$_GET['title'] = sanitize($_GET['title']);

// Inserting, notice the use of the hash field and the md5 function:
mysql_query("   INSERT INTO bookmark_app (hash,url,title)
                VALUES (
                    '".md5($_GET['url'])."',
                    '".$_GET['url']."',
                    '".$_GET['title']."'
                )");

$message = '';
if(mysql_affected_rows($link)!=1)
{
    $message = 'This URL already exists in the database!';
}
else
$message = 'The URL was shared!';

?>

/* JavaScript Code */

function displayMessage(str)
{
    // Using pure JavaScript to create and style a div element

    var d = document.createElement('div');

    with(d.style)
    {
        // Applying styles:

        position='fixed';
        width = '350px';
        height = '20px';
        top = '50%';
        left = '50%';
        margin = '-30px 0 0 -195px';
        backgroundColor = '#f7f7f7';
        border = '1px solid #ccc';
        color = '#777';
        padding = '20px';
        fontSize = '18px';
        fontFamily = '"Myriad Pro",Arial,Helvetica,sans-serif';
        textAlign = 'center';
        zIndex = 100000;

        textShadow = '1px 1px 0 white';

        MozBorderRadius = "12px";
        webkitBorderRadius = "12px";
        borderRadius = "12px";

        MozBoxShadow = '0 0 6px #ccc';
        webkitBoxShadow = '0 0 6px #ccc';
        boxShadow = '0 0 6px #ccc';
    }

    d.setAttribute('onclick','document.body.removeChild(this)');

    // Adding the message passed to the function as text:
    d.appendChild(document.createTextNode(str));

    // Appending the div to document
    document.body.appendChild(d);

    // The message will auto-hide in 3 seconds:

    setTimeout(function(){
        try{
            document.body.removeChild(d);
        }   catch(error){}
    },3000);
}

<?php 

// Adding a line that will call the JavaScript function:
echo 'displayMessage("'.$message.'");';

?> 
```

函数.php

```
<?php

/* Helper functions */

function validateURL($str)
{
    return preg_match('/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/i',$str);
}

function sanitize($str)
{
    if(ini_get('magic_quotes_gpc'))
        $str = stripslashes($str);

    $str = strip_tags($str);
    $str = trim($str);
    $str = htmlspecialchars($str);
    $str = mysql_real_escape_string($str);

    return $str;
}

function relativeTime($dt,$precision=2)
{
    if(is_string($dt)) $dt = strtotime($dt);

    $times=array(   365*24*60*60    => "year",
                    30*24*60*60     => "month",
                    7*24*60*60      => "week",
                    24*60*60        => "day",
                    60*60           => "hour",
                    60              => "minute",
                    1               => "second");

    $passed=time()-$dt;

    if($passed<5)
    {
        $output='less than 5 seconds ago';
    }
    else
    {
        $output=array();
        $exit=0;

        foreach($times as $period=>$name)
        {
            if($exit>=$precision || ($exit>0 && $period<60)) break;

            $result = floor($passed/$period);
            if($result>0)
            {
                $output[]=$result.' '.$name.($result==1?'':'s');
                $passed-=$result*$period;
                $exit++;
            }
            else if($exit>0) $exit++;
        }

        $output=implode(' and ',$output).' ago';
    }

    return $output;
}

// Defining fallback functions for mb_substr and 
// mb_strlen if the mb extension is not installed:

if(!function_exists('mb_substr'))
{
    function mb_substr($str,$start,$length,$encoding)
    {
        return substr($str,$start,$length);
    }
}

if(!function_exists('mb_strlen'))
{
    function mb_strlen($str,$encoding)
    {
        return strlen($str);
    }
}
?> 
```

我想要的最终结果是 Bitly 小书签之类的东西，[https:](https://bitly.com/a/tools) //bitly.com/a/tools ，但我只需要帮助将小书签链接到提交到数据库的弹出表单。

我试过环顾其他人的问题，但我找不到任何适用于使用弹出表单提交给数据库的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T08:31:05.017

您可以将 HTML 表单附加到小书签（ javascript ）中。

`var HTML = '<form action=""><input type="text" name="title" /></form>'; document.appendChild(HTML);`

这不是完整的代码，只是可以帮助您完成工作的原理示例。

# javascript - 使用一个 javascript 验证多个表单

> ID：14406022
> 
> 赞同：0
> 
> 时间：2013-01-18T19:16:55.553
> 
> 标签：javascript

我有一个包含 6 个表单的页面，这些表单都有一个同名“audit_id_upload”的值。目前，我正在验证其中一个（我只是在寻找空值）...

```
function validateForm()
{
var x=document.forms["audit_upload"]["audit_id_upload"].value;
if (x==null || x=="")
  {
  alert("Please Select an Audit");
  return false;
  }
}
</script> 
```

我可以调整它来验证其他表格，而不必再重复 5 次吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:20:35.010

由于您`audit_id_upload`在每个表单中都有一个输入元素，因此您可以将表单的名称传递给此函数并使用它来验证项目。

```
function validateForm(fName)
{
   var x=document.forms[fName]["audit_id_upload"].value;
   if (x==null || x=="")
   {
      alert("Please Select an Audit");
      return false;
   }
   return true;
} 
```

并在 for onSubmit 事件中调用它。

```
<form name='f1' onsubmit="return validateForm('f1')">

</form>

<form name='f2' onsubmit="return validateForm('f2')">

</form>

<form name='f3' onsubmit="return validateForm('f3')">

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:47:29.447

试试这个：

```
<html>
    <script type="text/javascript">
    function test(theform)
    {
        if (theform.thefield.value == "foo") return true;
        else return false;
    }
    </script>
    <body>
        <form action="" onsubmit="return test(this);">
        <input type="text" value="" name="thefield" />
        <input type="submit" />
        </form>
        <form action="" onsubmit="return test(this);">
        <input type="text" value="" name="thefield" />
        <input type="submit" />
        </form>
        <form action="" onsubmit="return test(this);">
        <input type="text" value="" name="thefield" />
        <input type="submit" />
        </form>
    </body>
</html> 
```

# google-chrome - 如果元素具有“类”，则 Chrome 元素检查器仅显示视觉尺寸

> ID：14406023
> 
> 赞同：1
> 
> 时间：2013-01-18T19:16:57.860
> 
> 标签：google-chrome, web-inspector

我猜这是因为更新，因为我觉得我以前会注意到这一点，但是当我使用 Chrome 的元素检查器时，它只会突出显示元素的尺寸，如果该元素具有指定的*class*。如果元素有*id*并且没有*class*，则不给出维度。

用类突出显示元素...

![用类高亮元素](../Images/296f01bc6ec9950040b69b3be243fa90.png)

突出显示没有类的元素...

![在此处输入图像描述](../Images/4f79017f1969eca007412e4fce5083fd.png)

第二张图片显示缺少黄色尺寸框。显然这不是最大的交易，但我想知道这是否是一个错误，或者 Chrome 是否出于特定原因这样做，以及是否有办法改变它。

# cocos2d-iphone - 升级到 cocos2d v2.0 后，initWithSpriteFrameName 没有初始化类

> ID：14406024
> 
> 赞同：0
> 
> 时间：2013-01-18T19:17:04.653
> 
> 标签：cocos2d-iphone, xcode4.5

我一直在构建《学习 Cocos2D》一书中描述的 SpaceViking 项目。当我开始遇到问题时，我已经读到了 Box2D 的第 10 章。然后我尝试将 cocos2D 从版本 1 升级到版本 2.0。在进行必要的更改以修复弃用后，代码不再有效。具体来说，我发现当创建游戏对象或敌人对象时，它们的 init 方法不再被调用。例如，当执行以下行时：

```
RadarDish *radarDish = [[RadarDish alloc] initWithSpriteFrameName:@"radar_1.png"]; 
```

未调用 RadarDish init 方法。然后我查看了版本 1 和版本 2 中 initWithSpriteFrameName 的执行情况，发现 CCSprite.m 发生了变化，因此不再调用 init 方法。在版本 2 源代码中，initWithSpriteFrameName 方法调用 initWithSpriteFrame 调用 initWithTexture 调用：

```
-(id) initWithTexture:(CCTexture2D*)texture rect:(CGRect)rect rotated:(BOOL)rotated
{
    if( (self = [super init]) ) { 
```

因此，不会调用 RadarDish init 方法。相反，调用 CCNode init 方法。但是在版本 1 中，initWithSpriteFrameName 调用 initWithSpriteFrame 调用具有以下代码的 initWithTexture：

```
// IMPORTANT: [self init] and not [super init];
if( (self = [self init]) ){
    [self setTexture:texture];
    [self setTextureRect:rect];
} 
```

这允许调用 RadarDish init 方法。

我能做些什么来解决这个问题？这本书似乎不太可能需要更改以支持升级到 cocos2d v2.0，所以我怀疑我一定遗漏了其他东西。但是，如果我错了，那么更改此代码以导致调用 RadarDish init 方法的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T16:34:33.997

好吧，我错了。“cocos2d 2.x 在很多细节上都与 v1.x 不同，所以不能指望 v1.x 代码只能在 2.x 下工作”。如果你打算跟着《学习 Cocos2D》这本书，我建议加载 cocos2d-iphone 1.0.1 版本。否则，您将面临许多不兼容问题以及需要修复的大量弃用。

但是如果你真的想使用最新的cocos2d，那么你应该做一些事情。1) 按照[此链接](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3amigrate_to_v2.0)中的说明进行操作。2) 您将有很多弃用和更改需要修复，因此请使用[此链接](https://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/cocos2d/cocos2d/ccDeprecated.m)了解如何修复这些弃用和更改。3）您还需要更新操纵杆类，因此请访问[此链接](https://github.com/sneakyness/SneakyInput)以获取这些更改，4）您必须谷歌其余部分以找到解决方案。

现在至于我在这里提到的问题的解决方案，可能有多种解决方案，但我将在下面提供一个（感谢 Sylvan 上面的回答）：

在每个 GameObjects、EnemyObjects 和 PowerUps 中，我添加了一个方法来覆盖 initWithFrameName。这将规避对象 init 方法的使用。例如，对于 RadarDish，我添加了以下内容：

```
-(id) initWithSpriteFrameName:(NSString*)frameName {
    if( (self=[super init]) ) {
        if ((self = [super initWithSpriteFrameName:frameName])) {

            CCLOG(@"### RadarDish initialized");
            [self initAnimations];                                   // 1
            characterHealth = 100.0f;                                // 2
            gameObjectType = kEnemyTypeRadarDish;                    // 3
            [self changeState:kStateSpawning];                       // 4

        }
    }
    return self;
} 
```

这允许 GameObject 和 GameCharacter init 方法在 CCSprite 的 initWithSpriteFrameName 方法运行之前运行。

Viking GameObject 必须有一个稍微不同的解决方案，因为它是使用 initWithSpriteFrame 而不是 initWithSpriteFrameName 初始化的。但是覆盖的实现和上面RadarDish的例子基本一样。

（除了克服弃用所必需的所有更改）上述更改允许“学习 Cocos2D”示例中的其他所有内容保持不变。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T18:07:27.303

我认为您遇到了麻烦，因为您将 init 方法保持原样而不是对其进行修改。您在 RadarDish 类上调用方法 initWithSpriteFrameName: 但该类没有该方法名称，因此它查找其超类。我认为你可以简单地将你的 init 方法重命名为 initWithSpriteFrameName: 并且你会没事的。像这样：

```
// RadarDish.m

-(id) initWithSpriteFrameName:(NSString*)frameName {
   if ((self = [super initWithSpriteFrameName:frameName])) {
      // init anything here
   }
   return self;
} 
```

只是没有一个名为 init 的方法并期望它被调用。

# java - Java 未知异常

> ID：14406028
> 
> 赞同：1
> 
> 时间：2013-01-18T19:17:26.553
> 
> 标签：java, sql

我的 AbstractServer 中有这个方法：

```
 synchronized protected void clientException(
    ConnectionToClient client, Throwable exception) {
        try
        {
          client.close();
        }
        catch (Exception e) {}
  } 
```

它的目的是从客户端捕获所有未捕获的异常并终止它们与服务器的连接。这是关闭方法：

```
 final public void close() throws IOException
  {
    readyToStop = true; // Set the flag that tells the thread to stop

    try
    {
      closeAll();
    }
    finally
    {
      server.clientDisconnected(this);
    }
  } 
```

我在我的服务器上有以下方法：

```
public ArrayList<String> getMemberdetails (ArrayList<String> string)
{
    ArrayList<String> ref = new ArrayList<String>();
    try 
    {
        stmt = conn.createStatement();
        String s = new String ("SELECT * FROM readercard mc, sysuser s WHERE s.userID=mc.userID AND mc.userID='"+ string.get(1) +"'");
        System.out.println(s);
        ResultSet rs = stmt.executeQuery("SELECT * FROM readercard mc, sysuser s WHERE s.userID=mc.userID AND mc.userID='"+ string.get(1) +"'");
        if(rs.next())
        {
            ref.add(rs.getString("userFirstName"));
            ref.add(rs.getString("userLastName"));
            ref.add(rs.getString("email"));
            ref.add(rs.getString("status"));
            ref.add(rs.getString("userPhone"));             
        }
        if (!rs.first())
            ref.add(null);
        rs.close();
    } catch (SQLException  e) {e.printStackTrace(); }
    catch (Exception e) {e.printStackTrace();} 

    return ref;
} 
```

每次客户端启动连接时，此方法都会午餐，并在第一次调用时起作用。

当我从服务器上的另一个方法调用此方法时，就会出现问题。在线：`stmt = conn.createStatement();`它不起作用。客户端应用程序卡住了，在服务器日志中我看到服务器为客户端调用了 close 方法（这意味着发生了异常）。

如果我继续使用该线路服务器进行调试，则会立即显示此页面： ![在此处输入图像描述](../Images/d848c5de9cbb81cfe9d378a2005f46e2.png)

首先，我不知道可能是什么异常，正如我所说的那样，该方法`getMemberdetails`在第一次调用时工作得很好（每次客户端登录应用程序时）。其次，如果`stmt = conn.createStatement();`抛出`SQLException`异常，为什么它不会在 catch 语句中被捕获？

# android - Cocos2d-x 示例 HelloCpp 未在 Android 上运行

> ID：14406030
> 
> 赞同：0
> 
> 时间：2013-01-18T19:17:32.373
> 
> 标签：android, eclipse, macos, cocos2d-x

我对 cocos2d-2.0-x-2.0.4 中包含的示例 HelloCpp 有疑问。

我的环境：

*   Mac OSX 10.8.2
*   cocos2d-2.0-x-2.0.4
*   安卓-ndk-r8

示例的 proj.ios 在 xcode 模拟器中运行良好，但我无法让 proj.android 在我的 Android HTC One X 设备上运行。我可以使用 raywenderlich 的 makefile 构建 apk 文件，当我解压缩 apk 时，它包含 assets/ipad 文件夹和图像，在设备上安装 apk 文件后，应用程序加载并显示有关信息画面左下角的边框等。但随后弹出一个通知窗口并告诉我程序无法加载“assets/ipad/HelloWorld.png”

在 cocos2dx/platform/android/CCFileUtils.ccp 第 134 行中抛出错误消息。

使用 pData = CCFileUtils::getFileDataFromZip(s_strResourcePath.c_str(), fullPath.c_str(), pSize); 加载 png 文件是否正确 ? 因为那是程序在 cocos2dx/platform/android/CCFileUtils.ccp 第 97 行中运行的行。

s_strResourcePath 的值是 /data/app/org.cocos2dx.hellocpp.apk，fullpath 是 assets/ipad/HelloWorld.png。

我真的希望有人能帮助我。或者至少有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T05:31:42.743

只需检查您的所有资源都在哪个文件夹中。在我的情况下，它在资产/资源中..所以我会将ResourceDirectory设置为“资源”，所以路径将是资产/资源......而我猜在你的情况下它的ipad所以设置它ipad

在 AppDelegate.cpp->applicationDidFinishLaunching() 函数中添加这一行。如果它已经存在，那么只需为 android 更改它

```
#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID )
        pFileUtil->setResourceDirectory("ipad");
        #endif 
```

试试这是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:02:33.447

尝试将图像添加到“HelloCpp/Resources”中。也许您正在“HelloCpp/proj.android/assets/”中添加图像文件。

试试这个：
“HelloCpp/Resources/iphone/HelloWorld.png”
“HelloCpp/Resources/ipad/HelloWorld.png”
“HelloCpp/Resources/ipadhd/HelloWorld.png”

而不是这个：
“HelloCpp/proj.android/assets/iphone/HelloWorld.png”
“HelloCpp/proj.android/assets/ipad/HelloWorld.png”
“HelloCpp/proj.android/assets/ipadhd/HelloWorld.png”

# c# - Windows Phone 使用 NSpeex 编码和解码音频。解码有问题？

> ID：14406033
> 
> 赞同：8
> 
> 时间：2013-01-18T19:17:34.340
> 
> 标签：c#, windows-phone-7, audio, encoding, nspeex

我正在尝试使用 Nspeex 对录制的音频进行编码，然后通过互联网传输并在另一端解码。我在 Windows Phone 7/8 中做这一切。要编码和解码，我使用以下代码。但是在解码时，我没有得到正确的结果，我可以再次播放。谁能给我提供在 WP7/8 录制的音频上运行的编码和解码代码：

```
private static Microphone mic = Microphone.Default;

        private static byte[] EncodeSpeech(byte[] buf, int len)
        {
            BandMode mode = GetBandMode(mic.SampleRate);
            SpeexEncoder encoder = new SpeexEncoder(mode);

            // set encoding quality to lowest (which will generate the smallest size in the fastest time)
            encoder.Quality = 1;
            int inDataSize = len / 2;

            // convert to short array
            short[] data = new short[inDataSize];
            int sampleIndex = 0;
            for (int index = 0; index < len; index += 2, sampleIndex++)
            {
                data[sampleIndex] = BitConverter.ToInt16(buf, index);
            }

            // note: the number of samples per frame must be a multiple of encoder.FrameSize
            inDataSize = inDataSize - inDataSize % encoder.FrameSize;
            var encodedData = new byte[len];
            int encodedBytes = encoder.Encode(data, 0, inDataSize, encodedData, 0, len);
            if (encodedBytes != 0)
            {
                // each chunk is laid out as follows:
                // | 4-byte total chunk size | 4-byte encoded buffer size | <encoded-bytes> |
                byte[] inDataSizeBuf = BitConverter.GetBytes(inDataSize);
                byte[] sizeBuf = BitConverter.GetBytes(encodedBytes + inDataSizeBuf.Length);
                byte[] returnBuf = new byte[encodedBytes + sizeBuf.Length + inDataSizeBuf.Length];
                sizeBuf.CopyTo(returnBuf, 0);
                inDataSizeBuf.CopyTo(returnBuf, sizeBuf.Length);
                Array.Copy(encodedData, 0, returnBuf, sizeBuf.Length + inDataSizeBuf.Length, encodedBytes);
                return returnBuf;
            }
            else
                return buf;
        }

        private byte[] DecodeSpeech(byte[] buf)
        {
            BandMode mode = GetBandMode(mic.SampleRate);
            SpeexDecoder decoder = new SpeexDecoder(mode);

            byte[] inDataSizeBuf = new byte[4];
            byte[] sizeBuf = new byte[4];
            byte[] encodedBuf = new byte[buf.Length - 8];
            Array.Copy(buf, 0, sizeBuf, 0, 4);
            Array.Copy(buf, 4, inDataSizeBuf, 0, 4);
            Array.Copy(buf, 8, encodedBuf, 0, buf.Length - 8);

            int inDataSize = BitConverter.ToInt32(inDataSizeBuf, 0);
            int size = BitConverter.ToInt32(sizeBuf, 0);
            short[] decodedBuf = new short[inDataSize];
            int decodedSize = decoder.Decode(encodedBuf, 0, encodedBuf.Length, decodedBuf, 0, false);

            byte[] returnBuf = new byte[inDataSize * 2];
            for (int index = 0; index < decodedBuf.Length; index++)
            {
                byte[] temp = BitConverter.GetBytes(decodedBuf[index]);
                Array.Copy(temp, 0, returnBuf, index * 2, 2);
            }

            return returnBuf;
        }

        private static BandMode GetBandMode(int sampleRate)
        {

            if (sampleRate <= 8000)

                return BandMode.Narrow;

            if (sampleRate <= 16000)

                return BandMode.Wide;

            return BandMode.UltraWide;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:03:20.973

我认为您的问题可能是您每次想要对音频进行编码时都在更新一个新的 SpeexEncoder。您应该尝试使该成员成为您班级的成员并重新使用它。

我查看了[Nspeex](http://nspeex.codeplex.com/)的代码，我注意到它`SpeexEncoder`用于`NbEncoder`窄带。在那个类中，它看起来像是保留了一些先前音频数据的历史记录，以便执行编码。这应该意味着不同编码器实例的输出不会在一起。

```
private static Microphone mic = Microphone.Default;
private static SpeexEncoder encoder = CreateEncoder();

    private static SpeexEncoder CreateEncoder()
    {
        BandMode mode = GetBandMode(mic.SampleRate);
        SpeexEncoder encoder = new SpeexEncoder(mode);

        // set encoding quality to lowest (which will generate the smallest size in the fastest time)
        encoder.Quality = 1;
        return encoder;
    }

    private static byte[] EncodeSpeech(byte[] buf, int len)
    {
        int inDataSize = len / 2;

        ... 
```

# jquery - 无法让 jScrollpane 在我的网站上工作

> ID：14406034
> 
> 赞同：2
> 
> 时间：2013-01-18T19:17:36.363
> 
> 标签：jquery, jscrollpane

我试图在我的网站上使用 Kelvin Luck 的 JScrollPane，但在让它工作时遇到了一些麻烦。

具体来说，我尝试从此处的示例页面复制简单水平滚动功能的编码，但显然遗漏了一些内容：

[http://jscrollpane.kelvinluck.com/arrows.html](http://jscrollpane.kelvinluck.com/arrows.html)

这是我正在测试的页面：

[http://lowhandicapper.com/members/chipping-playlist-test/](http://lowhandicapper.com/members/chipping-playlist-test/)

我的播放列表中共有 7 个视频，但我无法滚动显示最初隐藏的 3 个视频。

**更新：**

我还为上面第一个链接中的水平滑块使用相同的 html 创建了一个测试页面，并将其放在我的网站上：

[lowhandicapper.com/members/exact-horizo​​ntal-test/](http://lowhandicapper.com/members/exact-horizontal-test)

仍然无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:25:09.877

问题出在您的 HTML 标记中。

您不需要创建所有的 .jspcontainer、.jspHorizo​​ntalBar 等。Jscrollpane 会为您完成。

此外，当您初始化`.jScrollPane()`函数时，使用`jQuery`而不是`$`由于某种原因它不起作用......也许您与另一个框架发生冲突。

```
jQuery(document).ready(function() {
    jQuery('.scroll-pane').jScrollPane({showArrows: true});
}); 
```

[这是一个工作示例](http://jsfiddle.net/dVXZz/)

您只需要更新容器宽度。

# java - 正则表达式文件名模式匹配

> ID：14406035
> 
> 赞同：1
> 
> 时间：2013-01-18T19:17:37.870
> 
> 标签：java, regex

我正在使用下面的正则表达式：

```
Pattern p = Pattern.compile("(.*?)(\\d+)?(\\..*)?");

while(new File(fileName).exists())
{
    Matcher m = p.matcher(fileName);
    if(m.matches()) { //group 1 is the prefix, group 2 is the number, group 3 is the suffix
        fileName = m.group(1) + (m.group(2) == null ? "_copy" + 1 : (Integer.parseInt(m.group(2)) + 1)) + (m.group(3)==null ? "" : m.group(3));
    }
} 
```

这适用于`filename`like`abc.txt`但如果有任何文件名称`abc1.txt`为上述方法`abc2.txt`。如何使正则表达式条件或更改`(m.group(2) == null ? "_copy" + 1 : (Integer.parseInt(m.group(2)) + 1))`，以便它返回我`abc1_copy1.txt`作为新的文件名，而不是`abc2.txt`等等等等`abc1_copy2`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:41:47.683

```
Pattern p = Pattern.compile("(.*?)(_copy(\\d+))?(\\..*)?");

while(new File(fileName).exists())
{
    Matcher m = p.matcher(fileName);
    if (m.matches()) {
        String prefix = m.group(1);
        String numberMatch = m.group(3);
        String suffix = m.group(4);
        int copyNumber = numberMatch == null ? 1 : Integer.parseInt(numberMatch) + 1;

        fileName = prefix;
        fileName += "_copy" + copyNumber;
        fileName += (suffix == null ? "" : suffix);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:21:12.713

我不是一个 java 人，但一般来说，你应该使用库函数/类来解析文件名，因为许多平台对它们有不同的规则。

看： [http](http://people.apache.org/~jochen/commons-io/site/apidocs/org/apache/commons/io/FilenameUtils.html#getBaseName(java.lang.String) ://people.apache.org/~jochen/commons-io/site/apidocs/org/apache/commons/io/FilenameUtils.html#getBaseName(java.lang.String )

# c# - 为 FX Cop 生成代码属性

> ID：14406044
> 
> 赞同：2
> 
> 时间：2013-01-18T19:18:37.490
> 
> 标签：c#, linq-to-sql, fxcop

我正在使用 SQLMetal 生成我的 LINQ to SQL DBML 文件。它还会创建一个“.designer”文件，其中包含所有生成的代码。

它有一堆被 FX Cop 标记为外壳问题的类和属性。

我已经关注[了这篇](https://stackoverflow.com/questions/5006567/how-to-prevent-fxcop-visual-studio-static-code-analysis-from-analyzing-auto-ge)关于如何检查 FX Cop 以抑制案例问题的堆栈溢出帖子。这似乎有效，但是我现在无法弄清楚如何将“生成代码”属性添加到内部的每个类`designer`文件中的每个类。

我可以全局忽略那个特定的 CS 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:11:04.710

我当前的项目不久前停止使用 sqlmetal 并切换到[t4 templates](http://msdn.microsoft.com/en-us/library/bb126445.aspx)。我们可以完全控制生成的代码，并且我们对结果更满意。我们推出了自己的产品，但有很多很好的例子。

[codeplex](http://l2st4.codeplex.com/)上的这个似乎有点陈旧，但可能是一个很好的起点。

[Oleg Sych](http://www.olegsych.com/2009/01/t4-toolbox-linq-to-sql-classes-generator/)的一篇旧文章值得一看。他是T4大师。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:33:46.903

我用一个对所有 DatabaseAttributes 和 TableAttributes 执行查找/替换的宏解决了这个问题。它将这些替换为 GeneratedCode 属性，后跟换行符，然后是原始行。.designer 文件中的每个类都以其中一个属性开头，因此宏会全部获取它们。这不是一个理想的解决方案，但它比每次修改 DBML 时手动将 GeneratedCode 属性添加到每个类要好。

# c# - CodeDomProvider.CreateCompiler() 已过时

> ID：14406049
> 
> 赞同：14
> 
> 时间：2013-01-18T19:19:10.487
> 
> 标签：c#, obsolete

```
CSharpCodeProvider codeProvider = new CSharpCodeProvider();
ICodeCompiler MyCompiler = codeProvider.CreateCompiler();
CompilerParameters myParameters = new CompilerParameters();
myParameters.GenerateExecutable = true;
myParameters.OutputAssembly = @"prog.exe";
myParameters.TreatWarningsAsErrors = false;
CompilerResults results = myCompiler.CompileAssemblyFromFile(myParameters,"prog.txt"); 
```

如何编写此代码以消除此警告：

> System.CodeDom.Compiler.CodeDomProvider.CreateCompiler()' is obsolete: '"调用者不应使用 ICodeCompiler 接口，而应直接使用 CodeDomProvider 类上的方法。从 CodeDomProvider 继承的那些仍必须实现此接口，并应排除此警告或废弃此方法。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T19:23:26.853

请改用[此方法](http://msdn.microsoft.com/en-us/library/6yzxs14d%28v=vs.80%29.aspx)：

```
CodeDomProvider provider = CodeDomProvider.CreateProvider("CSharp"); 
```

扩展：

```
if (CodeDomProvider.IsDefinedLanguage(language))
{
    CodeDomProvider provider = CodeDomProvider.CreateProvider(language);
    // ...
}
else
    Console.WriteLine("ERROR"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-10T18:59:23.267

```
CSharpCodeProvider codeProvider = new CSharpCodeProvider();
CompilerParameters myParameters = new CompilerParameters();
myParameters.GenerateExecutable = true;
myParameters.OutputAssembly = @"prog.exe";
myParameters.TreatWarningsAsErrors = false;
CompilerResults results = codeProvider.CompileAssemblyFromFile(myParameters, "prog.txt"); 
```

# jquery - jQuery 背景按钮动画适用于 Chrome 和 IE8，但不适用于 Firefox 或 IE9

> ID：14406051
> 
> 赞同：1
> 
> 时间：2013-01-18T19:19:17.587
> 
> 标签：jquery

> **可能的重复：**
> [jquery 动画背景位置](https://stackoverflow.com/questions/5171080/jquery-animate-background-position)

我有一个按钮，应该在背景元素上有一个动画。

箭头应在悬停时向下滑动，并在悬停时滑动备份。这在 Chrome 上运行良好。

此动画在 Chrome 和 IE8 中正常运行。

IE9：悬停时背景只是翻转而没有滑动效果。但是在悬停时，滑动动画有效。

FF：没什么。没有弹...

[http://egelect.com/2013/index-test.php](http://egelect.com/2013/index-test.php)

有什么建议么？

HTML

```
<div id="bienvenue">Bienvenue<span id="separator">&nbsp;</span></div> 
```

jQuery

```
<script type="text/javascript">
$('document').ready(function() {
   $('#bienvenue').css({backgroundPosition: "right 100%"}).hover(
       function() {
           $(this).stop().animate({'background-position-y': "0%"}, "600");
       }, function() {
           $(this).stop().animate({'background-position-y': "100%"}, "600");
       }
   );
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:28:42.710

Firefox 不理解`background-position-y`, only `background-position`（同时具有 x 和 y 值，按此顺序）。

然而，这是一个声称可以解决问题[的插件。](http://keith-wood.name/backgroundPos.html)或者，您可以用分层图像替换背景图像，并为该位置设置动画。

# android - 使用应用内计费时出现 NullPointerException？

> ID：14406052
> 
> 赞同：2
> 
> 时间：2013-01-18T19:19:43.490
> 
> 标签：android, nullpointerexception

我最近一直在尝试在我正在开发的游戏上实现应用程序计费，但我得到了 NullPointerException，我就是不明白为什么。

BuyActivity.java：

```
package com.liamw.games.whatami;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Bundle;
import android.provider.Settings.Secure;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

import com.liamw.games.whatami.util.IabHelper;
import com.liamw.games.whatami.util.IabResult;
import com.liamw.games.whatami.util.Inventory;
import com.liamw.games.whatami.util.Purchase;

public class BuyActivity extends Activity {

    String key, androidid;
    IabHelper mHelper;
    Button fifty;
    ProgressDialog wait;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // DONE Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_buy);

        fifty = (Button) findViewById(R.id.b50hints);
        androidid = Secure.getString(BuyActivity.this.getContentResolver(),
                Secure.ANDROID_ID);

        final ProgressDialog wait = new ProgressDialog(this);
        wait.setTitle("Updating...");
        wait.setMessage("Please wait while the details are loaded...");
        wait.setCancelable(false);
        wait.show();

        key = "xxxxx";
        mHelper = new IabHelper(this, key);

        mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
            public void onIabSetupFinished(IabResult result) {
                if (!result.isSuccess()) {
                    // Oh noes, there was a problem.
                    Log.d("What Am I - IAB",
                            "Problem setting up In-app Billing: " + result);
                }
                // Hooray, IAB is fully set up!

                List<String> additionalSkuList = new ArrayList<String>();
                additionalSkuList.add("50hints");

                mHelper.queryInventoryAsync(true, additionalSkuList,
                        mQueryFinishedListener);

            }
        });

        fifty.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                mHelper.launchPurchaseFlow(BuyActivity.this, "50hints", 10001,
                        mPurchaseFinishedListener, androidid);
                fifty.setEnabled(false);

            }
        });

    }

    IabHelper.QueryInventoryFinishedListener mQueryFinishedListener = new IabHelper.QueryInventoryFinishedListener() {
        public void onQueryInventoryFinished(IabResult result,
                Inventory inventory) {
            if (result.isFailure()) {
                // handle error
                return;
            }

            String fiftyhintscost = inventory.getSkuDetails("50hints").getPrice();

            fifty.setText("50 Hints: " + fiftyhintscost);
            wait.dismiss();
            // update the UI
        }
    };

    IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener = new IabHelper.OnIabPurchaseFinishedListener() {
        public void onIabPurchaseFinished(IabResult result, Purchase purchase) {
            if (result.isFailure()) {
                Log.d("What Am I? IAB", "Error purchasing: " + result);
                return;
            } else if (purchase.getSku().equals("50hints")
                    && purchase.getDeveloperPayload().equals(androidid)) {
                // consume the gas and update the UI
                mHelper.consumeAsync(purchase, mConsumeFinishedListener);
            }
            fifty.setEnabled(true);
        }
    };

    IabHelper.OnConsumeFinishedListener mConsumeFinishedListener = new IabHelper.OnConsumeFinishedListener() {
        public void onConsumeFinished(Purchase purchase, IabResult result) {
            if (result.isSuccess()) {
                // provision the in-app purchase to the user
                // (for example, credit 50 gold coins to player's character)
                Toast.makeText(BuyActivity.this,
                        "Purchase Successful - Crediting!", Toast.LENGTH_LONG)
                        .show();
            } else {
                // handle error
            }
        }
    };

    @Override
    public void onDestroy() {
        if (mHelper != null)
            mHelper.dispose();
        mHelper = null;
        super.onDestroy();
    }
} 
```

日志猫：

```
01-18 19:12:45.829: E/AndroidRuntime(16849): FATAL EXCEPTION: main
01-18 19:12:45.829: E/AndroidRuntime(16849): java.lang.NullPointerException
01-18 19:12:45.829: E/AndroidRuntime(16849):    at com.liamw.games.whatami.BuyActivity$1.onQueryInventoryFinished(BuyActivity.java:87)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at com.liamw.games.whatami.util.IabHelper$2$1.run(IabHelper.java:533)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at android.os.Handler.handleCallback(Handler.java:725)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at android.os.Looper.loop(Looper.java:137)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at java.lang.reflect.Method.invokeNative(Native Method)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at java.lang.reflect.Method.invoke(Method.java:511)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-18 19:12:45.829: E/AndroidRuntime(16849):    at dalvik.system.NativeStart.main(Native Method) 
```

第 87 行：

```
String fiftyhintscost = inventory.getSkuDetails("50hints").getPrice(); 
```

请帮我找到 NullPointer 的来源并告诉我如何修复它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:05:12.870

原来你只能在SKU中使用字母...

# regex - 可能的国际或美国电话号码，可能有空格

> ID：14406054
> 
> 赞同：0
> 
> 时间：2013-01-18T19:19:50.627
> 
> 标签：regex, qualtrics

我正在为 javascript 应用程序 (Qualtrics) 编写正则表达式，但无法弄清楚如何为可能是或可能不是国际且可能为空白的电话号码字段创建正则表达式。所以要求是可能的 "+","0-9","-",".",""

如果我能弄明白，我还想为入口前后的空间创造灵活性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:45:39.533

如果您只需要任意数量的字符，包括数字、+、-、. 和空间（并且还假设您希望匹配整个输入），然后相当简单：

```
^[0-9\-+.\s]*$ 
```

如果您正在寻找一些东西来验证点、破折号、空格等的位置并验证长度，那么实现这一点的正则表达式往往会变得非常复杂和愚蠢。例如，这个：

> ^(?:(?:+?1\s*(?:[.-]\s*)?)?(?:(\s*([2-9]1[02-9]|[2- 9][02-8]1|[2-9][02-8][02-9])\s*)|([2-9]1[02-9]|[2-9][02 -8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9 ]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{ 4})(?:\s*(?:#|x.?|ext.?|extension)\s*(\d+))?$

如果我理解正确的话，似乎是处理您希望识别的集合子集的标准实现。

[像这个问题](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)中概述的那样的方法可能是一个更明智的解决方案。

# android - 在 SharedPreferences 中使用字符串

> ID：14406056
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:19:55.883
> 
> 标签：android, sharedpreferences

我试图制作一个简单的程序，使用 SharedPreferences 保存和检索字符串。应用程序正常加载，但如果我单击按钮，应用程序会下降。我不知道出了什么问题。这是代码：

**共享.java**

```
package com.example.sharedpreferences;
import android.content.Context;
import android.content.SharedPreferences;
public class Shared {
    SharedPreferences prefe;
    SharedPreferences.Editor editor;
    Context mycontext;
    public Shared(Context context){
        mycontext = context;
        prefe = mycontext.getSharedPreferences("Preference", 0);
        editor = prefe.edit();
    }
    public void setpref(String name, String value){
        editor.putString(name, value);
        editor.commit();
    }
    public String getvalue(String name){
        return prefe.getString(name, "Nothing!");       
    }
} 
```

**MainActivity.java**

```
package com.example.sharedpreferences;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.TextView;
public class MainActivity extends Activity {
    Shared preferences;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        preferences = new Shared(getApplicationContext());  
    }

    public void btn_send(View button){
        TextView name = (TextView)findViewById(R.id.name2);
        TextView value = (TextView)findViewById(R.id.value2);
        String names = (String) name.getText();
        String values = (String) value.getText();
        preferences.setpref(names, values);
    }
    public void btn_read(View button){
        TextView name = (TextView)findViewById(R.id.name2);
        TextView value = (TextView)findViewById(R.id.value2);
        String names = (String) name.getText();
        String values = preferences.getvalue(names);
        value.setText(values);
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:13:55.357

似乎该错误是由您将 Char 序列转换为 String 引起的。你可以`String superString = fromTextEdit.getText().toString();`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:23:08.527

采用

```
value.getText().toString() 
```

// 偏好类

```
public static class MyAppPref {

    public static final String SHARED_PREFERENCE        = "shared_preference";
    public static final String SP_TEXT_VALUE            = "sp_text_value";
    public static final String SP_TEXT_VALUE_DEFAULT    = "Nothing!";
    public static final int MODE_PRIVATE                = 0;

    public static SharedPreferences getPref(Context ctx){
        return ctx.getSharedPreferences(SHARED_PREFERENCE , MODE_PRIVATE);  
    }

    public static void saveTextValue(Context ctx, String value){
            getPref(ctx).edit().putString(SP_TEXT_VALUE, value).commit();
    }

    public static String getStoredTextvalue(Context ctx){
            return getPref(ctx).getString(SP_TEXT_VALUE, SP_TEXT_VALUE_DEFAULT);       
    }

} 
```

// 活动类

```
//android:onClick="btn_write_pref"
public void btn_write_pref(View button){
    TextView value = (TextView)findViewById(R.id.textview_value);
    String values = (String) value.getText();
    MyAppPref.saveTextValue(this, value.getText().toString());
}
//android:onClick="btn_read_pref"
public void btn_read_pref(View button){
    TextView value = (TextView)findViewById(R.id.textview_value);
    value.setText(MyAppPref.getStoredTextvalue(this);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:54:23.657

我刚刚修改了你的代码，它看起来和你的代码一样。

第二次活动，

```
public class Second extends Activity{
TextView text1, text2;
Button send, read;
Shared preferences;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    preferences = new Shared(getApplicationContext()); 

    text1 = (TextView)findViewById(R.id.text1);
    text2 = (TextView)findViewById(R.id.text2);
    send = (Button)findViewById(R.id.button1);
    send.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String names = (String) text1.getText();
            String values = (String) text2.getText();
            preferences.setpref(names, values+names);
        }
    });
    read = (Button)findViewById(R.id.button2);
    read.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String names = (String) text1.getText();
            String values = preferences.getvalue(names);
            text2.setText(values);
        }
    });

} 
```

}

并且您的偏好类与您上面提到的相同（shared.java）

# java - 在 OnItemClickListener 触发后，SlidingMenu ListFragment 菜单被破坏

> ID：14406057
> 
> 赞同：0
> 
> 时间：2013-01-18T19:20:00.523
> 
> 标签：java, android, fragment, destructor, slidingdrawer

我想首先说这是我的第一个*大型*Android 应用程序......

我正在使用第三方库[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)，一切都很好，除了一件事：当用户点击“地下室”菜单中的列表项时，该 ListFragment 被破坏。我在 ListFragment 的所有构造/解构方法中设置了日志以记录活动。这是日志的图像，经过编辑以显示触摸事件发生的时间。

![在此处输入图像描述](../Images/84a3e82ab15e845905c04a04d4331de6.png)

我的 ListFragment 类是这样设置的：

```
public class BasementFragment extends ListFragment implements PictureCallback {
    BasementAdapter mAdapter;
    RelativeLayout mHeader;
    ArrayList<String> titles;
    ImageView mImageButton;

    @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    Log.d("BASEMENTFRAGMENT", "onCreateView");
    ListView view = (ListView) inflater.inflate(R.layout.basement, null);
    mHeader = (RelativeLayout) inflater.inflate(R.layout.basement_header, null);
    view.addHeaderView(mHeader);

    mImageButton = (ImageView) mHeader.findViewById(R.id.image_button);
    mImageButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            pickImage();
        }
    });

    ParseFile imageFile = (ParseFile) ParseUser.getCurrentUser().get(NJUser.IMAGE_KEY);
    if (imageFile != null) {
        imageFile.getDataInBackground(new GetDataCallback() {

            @Override
            public void done(byte[] data, ParseException e) {
                InputStream is = new ByteArrayInputStream(data);
                Bitmap bmp = BitmapFactory.decodeStream(is);
                mImageButton.setImageBitmap(bmp);
            }
        });
    }

    return view;
}
    // touch logic and other stuff...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:57:44.860

原来我正在重置后面的视图，然后在设置 SlideMenu 对象**后更改片段。**在我改变了事物的设置顺序之后，bam，坚持，没有被破坏！

# android - Onclick 通知，在 Android 中启动一个活动

> ID：14406058
> 
> 赞同：1
> 
> 时间：2013-01-18T19:20:02.057
> 
> 标签：android, class, android-intent, android-activity, notifications

我有一个创建通知的类。类是这样的：

```
public class TimeAlarm extends BroadcastReceiver {

     NotificationManager nm;

     @Override
     public void onReceive(Context context, Intent intent) {
      nm = (NotificationManager) context
        .getSystemService(Context.NOTIFICATION_SERVICE);
      CharSequence from = "Scheduled Training";
      CharSequence message = "Please attend the scheduled training";
      //Intent notifyIntent = new Intent();

      PendingIntent contentIntent = PendingIntent.getActivity(context, 0, new Intent(), 0);

      Notification notif = new Notification(R.drawable.ic_launcher,
        "NeuroQ Scheduled Training", System.currentTimeMillis());
      notif.setLatestEventInfo(context, from, message, contentIntent);
      nm.notify(1, notif);

     }
    } 
```

我有一个名为：**QuizScreen**的活动，单击通知时需要打开它。我试过使用：

```
Intent quiz_intent = new Intent(TimeAlarm.this, QuizScreen.class);
                        TimeAlarm.this.startActivity(quiz_intent); 
```

但我收到此错误：

```
The constructor Intent(TimeAlarm, Class<QuizScreen>) is undefined 
```

我哪里错了？我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:16:54.327

使用`Intent quiz_intent = new Intent(context, QuizScreen.class);`代替`Intent quiz_intent = new Intent(TimeAlarm.this, QuizScreen.class);`例如，

```
public class MyBroadcastReceiver extends BroadcastReceiver {
  private NotificationManager mNotificationManager;
  private int SIMPLE_NOTFICATION_ID;

  @Override
  public void onReceive(Context context, Intent intent) {
    mNotificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notifyDetails = new Notification(R.drawable.android,"Time Reset!",System.currentTimeMillis());
    PendingIntent myIntent = PendingIntent.getActivity(context, 0, new Intent(context, Second.class), 0);
    notifyDetails.setLatestEventInfo(context, "Time changed", "Click on me to view my second activity", myIntent);
    notifyDetails.flags |= Notification.FLAG_AUTO_CANCEL;

    mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:27:38.693

广播接收器不算作上下文？改用 onReceive(Context context, Intent intent) 中的 context 参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:31:59.553

尝试下面的代码开始活动

```
Intent quiz_intent = new Intent(context, QuizScreen.class);
                        TimeAlarm.this.startActivity(quiz_intent); 
```

基本上正如 Nicklas 所建议的那样，Receiver 不算作上下文，所以你需要使用你进入 onReceive 方法的上下文，或者像 context.getApplicationContext 一样使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T20:27:58.017

使用 : `Intent quiz_intent = new Intent(context, QuizScreen.class);`而不是`Intent quiz_intent = new Intent(TimeAlarm.this, QuizScreen.class);`

例如：

```
public class MyBroadcastReceiver extends BroadcastReceiver {

private NotificationManager mNotificationManager;
private int SIMPLE_NOTFICATION_ID;

@Override
public void onReceive(Context context, Intent intent) {

    mNotificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notifyDetails = new Notification(R.drawable.android,"Time Reset!",System.currentTimeMillis());
    PendingIntent myIntent = PendingIntent.getActivity(context, 0, new Intent(context, Second.class), 0);
    notifyDetails.setLatestEventInfo(context, "Time changed", "Click on me to view my second activity", myIntent);
    notifyDetails.flags |= Notification.FLAG_AUTO_CANCEL;

    mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);` 
```

# jquery - 应用于父 div 时的锚触发或单击事件问题

> ID：14406059
> 
> 赞同：1
> 
> 时间：2013-01-18T19:20:03.977
> 
> 标签：jquery, css, frontend

我一直在浏览几篇文章，但到目前为止还没有一个很有帮助。

我有一些花哨的按钮设置，如下所示：

```
<div class='orange-btn'>
<a href="url.html">BLah blah</a>
<span>Meta text</span>
</div> 
```

我需要 div （或任何子项，即 ie `<span>`）上的单击事件来踢入锚点并引发`click()`函数。

截至目前，我收到“超出最大调用堆栈大小”错误或`<error`在我的浏览器选项卡完全崩溃之前简单说的错误。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:23:39.547

这是因为*事件冒泡*——点击链接后，该点击将传播到 div，这会触发对链接的点击，*无限循环。*

添加以下内容以解决此问题：

```
$('a').on('click',function(e) {
   e.stopPropagation();
}); 
```

（`$(document).on('click','a',function(e) {...});`如果您的链接是动态添加的，请使用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:33:48.717

为什么首先需要 div？为什么不这样做：

```
<a href="url.html" class="orange-button">
  <span class="label">Bla Bla</span>
  <span class="meta">Meta data</span>
</a> 
```

如果您将 .orange-button 设置为显示为块，您应该获得完全相同的效果。像这样的东西：

```
.orange-button {
  display: block;
  /* the other styles that where on your div */
}
.orange-button .label {
  /* the styles that where on your a */
}
.orange-button .meta {
  /* the styles that where on your span */
} 
```

我坚信除非真的有必要，否则不要使用任何 js。仍然有一些用户禁用了 js，他们应该在您的网站上获得相同的体验......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:22:52.910

尝试这个

```
 $('div').children().click(function (){
  alert();
 }); 
```

在这里你需要触发点击

# iphone - 如何在 iPhone App 中通过蓝牙以二进制形式传输数据

> ID：14406063
> 
> 赞同：1
> 
> 时间：2013-01-18T19:20:15.860
> 
> 标签：iphone, ios, objective-c, core-bluetooth

我正在为 iOS 和 mac 开发设备驱动程序软件。在此，我想通过 blutoogh 将二进制形式的数字数据从我的 iPhone 应用程序传输到设备。假设我想传输像 2013 年 1 月 20 日上午 10:30 这样的数据，我需要以二进制序列传输 200120131030。表示 20 的第一个二进制文件，然后是 01 的二进制文件，然后是 2013 的二进制文件，依此类推……其他设备未在 iOS 上运行。我将此数字转换为 NSData 但无法理解 NSData 是否为二进制数据。有没有办法让它二进制并传输它。（我可以通过蓝牙传输数据）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:42:20.060

假设您决定将日期表示为 12 位数字或 12 个字节的字符串。您可以通过以下方式获取 NSData：

```
NSDate *date = // the date you start with

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"ddMMYYYYHHmm"];
NSString *dateString = [formatter stringFromDate:date];

// dateString can be any string you wish to send.  In this example, it represents a date
NSData *data = [dateString dataUsingEncoding:NSUTF8StringEncoding]; 
```

您可以使用 NSData 上的字节选择器获取指向字节数据的指针。假设您要复制数据：

```
NSUInteger length = [data length];
char *buffer = (char *)malloc(length);
memcpy(buffer, [data bytes], length); 
```

正如我在评论中提到的，更紧凑的序列化是长整数。您可以像这样获得较小的数据：

```
unsigned long dateInt = [dateString intValue];
NSData *data = [NSData dataWithBytes:&dateInt length:sizeof(dateInt)]; 
```

...然后以相同的方式获取字节。要记住的重要一点是，这些字节的发送者和接收者必须就如何解释它们达成一致。

# android - 如何制作透明度为 50% 的透明 Activity

> ID：14406065
> 
> 赞同：2
> 
> 时间：2013-01-18T19:20:21.687
> 
> 标签：android

我有一个透明的主题活动，但这个主题将使活动 100% 透明。我需要一个代码，这样活动将是 50% 透明的。这是我的代码：

```
<item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T19:39:55.900

您可以将透明主题应用于所需的活动。在中创建新样式`/res/values/style.xml`

```
<resources>
<style name="Transparent">
<item name="android:windowIsTranslucent">true</item>
<item name="android:windowAnimationStyle">@android:style/Animation.Translucent</item>
<item name ="android:windowBackground">@color/transparent</item>
<item name="android:windowNoTitle">true</item>
<item name="android:colorForeground">#fff</item>
</style>
</resources> 
```

透明的价值是

```
<color name="transparent">#80000000</color> 
```

现在在 AndroidManifest.xml 中将活动的主题声明为您刚刚创建的主题。

```
<activity android:name="MyActivity" android:theme="@style/Transparent"></activity> 
```

# c# - 带有键/值对的组合框自动完成

> ID：14406071
> 
> 赞同：3
> 
> 时间：2013-01-18T19:20:51.483
> 
> 标签：c#, winforms, combobox

我有一个包含以下代码的组合框：

```
private void comboBox1_TextChanged(object sender, EventArgs e)
{
    using (var service = WebServiceHelper.GetCoreService())
    {
        string physicianXml = service.SearchPhysicians(SessionInfo.Current.ClientCode, SessionInfo.Current.MachineName,
                                    SessionInfo.Current.Username, comboBox1.Text);

        var physicians = PhysicianItemList.FromXml(physicianXml);

        AutoCompleteStringCollection autoCompleteStringCollection = new AutoCompleteStringCollection();
        foreach (var physician in physicians.Items)
        {
            autoCompleteStringCollection.Add(physician.LastName + ", " + physician.FirstName);
        }

        comboBox1.AutoCompleteCustomSource = autoCompleteStringCollection;
        comboBox1.Select(comboBox1.Text.Length, 0);
    }
} 
```

基本上，用户键入医生姓名的前几个字符，它应该使用前 100 条匹配记录填充自动完成列表。它工作得很好，但我需要将它关联回一个键（表中的 PK 或医师的 NPI 编号）。似乎`AutoCompleteStringCollection`不支持键。任何人都可以建议这样做的方法吗？表中有大约 700 万条记录，因此我不想预先填充 ComboBox。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:56:57.213

看起来您的问题是 AutoCompleteStringComplete 是专门为字符串制作的（因此，名称）。

您可能想查看父母（`IList`, `ICollection`, `IEnumerable`），看看您是否可以自制一些模板化为键/值结构的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:16:08.410

当您构建您的 时，也为名称、ID 对`AutoCompleteStringCollection`构建一个。`Dictionary<String, int>`然后使用一些事件（文本框验证或用户提交/保存点击）来查找和设置 id。您可以将字典存储在文本框上`Tag`。

**编辑**

出于某种原因，我认为您正在使用文本框控件。忘掉`AutoCompleteStringCollection`并建立一个`Dictionary<String, int>`. 对于组合框，将您的自动完成源设置为 ListItems，设置组合框的显示名称和值，并将数据源设置为字典。

```
combobox.DisplayMember = "key";
combobox.ValueMember = "value";
combobox.AutocompleteSource = AutocompleteSource.ListItems;
combobox.DataSource = myDictionary; 
```

但是，您应该只在用户在组合框中输入 n 个字符时填充数据源并自动完成一次，否则会出现错误。我曾尝试将其用于动态自动完成一次（例如，如果用户清除文本并重新键入，则列表会清除），但我不得不忘记组合框并使用类似于此[用户的混合文本框列表框方法](https://stackoverflow.com/q/515561/1914530)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-18T17:53:11.283

为时已晚，但也许有人会使用此代码：

```
this.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems;
this.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.SuggestAppend;

RNProveedor rnProveedor = new RNProveedor();
var listaProveedores = rnProveedor.Buscar();
Dictionary<int, String> dicTemp = new Dictionary<int, string>();

foreach (var entidad in listaProveedores)
{
    dicTemp.Add(entidad.ProvNro, entidad.ProNombre);
}

this.DataSource = new BindingSource(dicTemp, null);
this.DisplayMember = "Value";
this.ValueMember = "Key"; 
```

并选择值

```
public int GetValorDecimal()
{
    KeyValuePair<int, string> objeto = (KeyValuePair<int, string>)this.SelectedItem;     
    return objeto.Key;
} 
```

使用此示例，您将不会遇到重复字符串的任何问题，如上面的示例

# sql - 仅选择长文本/varchar 的一部分

> ID：14406077
> 
> 赞同：0
> 
> 时间：2013-01-18T19:21:02.440
> 
> 标签：sql, sql-server-2005

我有一个带有`notes`字段 datatype的表`text`，在我们的应用程序中，它是特定于该订单的通用记事本。问题是，在旧订单中，该字段很大且难以处理，因为某些部门输入了本应在自己的字段中的数据。我们现在正试图在事后尽可能地将这些数据分离成实际的字段。

该字段的示例部分`notes`：

```
...
05/12 Serve all $w/check. Ins here. Per recording-RSM  (A-F)-1395   (G-O)-104786        (P-Z)-177015  *Unable to verify Billing/PT recs(07/12 LO)(08/12MH)    

***EXPEDITORS : info I want here

(More junk data here)
... 
```

有没有办法只选择 word 之后字符串的其余部分`EXPEDITORS`，以帮助输入数据？没有一致的“结束”字符或字符串，但将数据放在字段的开头就足够了。

到目前为止我所拥有的：

```
SELECT id, notes 
FROM table 
WHERE notes LIKE '%EXPEDITOR%' 
```

注意：我知道`text`数据类型是旧的；`VARCHAR(MAX)`如有必要，出于此查询的目的，转换为是可以接受的。

编辑：澄清一下，我的理想输出如下：

```
***EXPEDITORS : info I want here 
```

但它也可以包括以下所有内容。我主要希望删除关键字前面的垃圾`EXPEDITOR`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:52:03.643

弄清楚了。

```
SELECT SUBSTRING(notes,
                 PATINDEX('%EXPEDITOR%', notes), 
                (DATALENGTH(notes) - PATINDEX('%EXPEDITOR%', notes))) 
FROM table 
```

`EXPEDITORS`这将返回以关键字开头的文本。它仍然包含信息之后的其余垃圾，但这无论如何都可以正常工作，因为它将被人类读取并输入。

键是`SUBSTRING`函数和`DATALENGTH`函数（后者是`text`数据类型所必需的）。

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:02:25.223

您可以使用 substring_index (或 substr + instr) + reverse

事实上，这里是查询的演变：

```
SELECT REVERSE(SUBSTRING_INDEX(REVERSE(data), REVERSE('EXPEDITORS'), 1)) 
FROM yourtable 
```

此查询返回：

```
: info I want here
(More junk data here)
... 
```

然后 ：

```
SELECT SUBSTRING_INDEX(REVERSE(SUBSTRING_INDEX(REVERSE(data), REVERSE('EXPEDITORS'), 1)), '\n', 1)
FROM yourtable 
```

此查询返回：

```
: info I want here 
```

并完成：

```
SELECT REPLACE(SUBSTRING_INDEX(REVERSE(SUBSTRING_INDEX(REVERSE(data), REVERSE('EXPEDITORS'), 1)), '\n', 1), ': ', '')
FROM yourtable 
```

威奇回报：

```
info I want here 
```

编辑：在 MySQL / Oracle SELECT REVERSE(SUBSTR( REVERSE(SUBSTR(data, INSTR(data, 'EXPEDITORS : ')+LENGTH('EXPEDITORS : '))), LENGTH(SUBSTR(data, INSTR(data, 'EXPEDITORS : ')+LENGTH('EXPEDITORS : '))) - INSTR(SUBSTR(data, INSTR(data, 'EXPEDITORS : ')+LENGTH('EXPEDIORS : ')), '\n'))) 从 mytable

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:35:49.483

使用 substr/instr。这些是 Oracle 查询，但它们适用于任何 SQL：

```
SELECT Substr(str, Instr(str, 'EXPEDITORS :')+Length('EXPEDITORS :')+1 ) str FROM
 (
  SELECT '05/12 Serve all $w/check. Ins here. Per recording-RSM....***EXPEDITORS : More Junk Data is what we want' AS str
    FROM dual
 )
 / 
```

或者，如果您在单词 EXPEDITORS 之后总是有 ':'，那么：

```
SELECT Trim(Substr(str, Instr(str, ':')+1 )) str FROM
(
 SELECT '05/12 Serve all $w/check. Ins here. Per recording-RSM....***EXPEDITORS : More Junk Data is what we want' AS str
 FROM dual
)
/ 
```

在这两种情况下，输出都是这样的：

```
str
--------------------------------
More Junk Data is what we want 
```

# css - 多个 div，一些左，一些右，全部与 CSS 垂直对齐

> ID：14406079
> 
> 赞同：0
> 
> 时间：2013-01-18T19:21:07.550
> 
> 标签：css

给定容器中任意数量的元素，将一些元素左对齐和右对齐，同时将左右内容垂直居中，最好的方法是什么？

例如，给定这个标记：

```
 <div class="action">
        <div class="message">This is our message</div>
        <div class="comment">Comments for the message</div>
        <div class="person">John Doe</div>
        <div class="date">01/18/2013</div>
        <div class="time">12:35 PM</div>
    </div> 
```

消息和评论是否可以在操作容器中左对齐，而人物、日期和时间与左右内容垂直居中对齐？这可以在没有新标记和每个元素的任何内容长度的情况下完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:46:39.667

一些 CSS 可以解决问题。将包含 div 的位置设为：relative，并将子 div 向左或向右浮动。还将文本居中对齐。

```
.container{
    position: relative;
}

.left{
    float: left;   
    width: 50%;
    background-color: Silver;
    text-align: center;
}

.right{
    float: right;
    width: 50%;
    background-color: Yellow;
    text-align: center;
} 
```

[小提琴示例](http://jsfiddle.net/bfelda/EMLBJ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-01T12:36:05.497

通过对现有标记的*最小*更改（引入两个 div 标签，每列一个），如果您使用[Munawwar 的 flex-helper](https://github.com/Munawwar/flex-helper) ，这将变得相当简单。

**HTML：**

```
<div class="hbox flex">
    <div class="left vbox main-center">
        <div class="message">
            <p>This is our message.</p>
            <p>It spans many lines.</p>
            <p>Or rather, paragraphs.</p>
            <p>Additional waffle.</p>
            <p>Syrup, bacon, a banana.</p>
            <p>Tall glass of milk.</p>
        </div>
        <div class="comment">Comments for the message.</div>
    </div>
    <div class="right vbox main-center">
        <div class="person">John Doe</div>
        <div class="date">01/18/2013</div>
        <div class="time">12:35 PM</div>
    </div>
</div> 
```

**CSS：**

```
/*Example-specific CSS*/
/*left column*/
.left {
    width: 80%;
    background-color: Silver;
    text-align: center;
}
/*right column*/
.right {
    width: 20%;
    background-color: Yellow;
    text-align: center;
}
/*Minimal use of Munawwar's flex-helper*/
/* https://github.com/Munawwar/flex-helper */
/*Stack child items vertically*/
.vbox {
    display: flex;

    /*Align children vetically*/
    flex-direction: column;
    align-content: flex-start;

    /*Prevent extending beyond boundaries*/
    overflow: hidden;
}
/*Stack child items horizontally*/
.hbox {
    display: flex;

    /*Align children horizontally*/
    flex-direction: row;
    align-content: flex-start;

    /*Wrap items to next line on main-axis*/
    flex-wrap: wrap;

    /*Prevent extending beyond boundaries*/
    overflow: hidden;
}
/*Stretch item along parent's main-axis*/
.flex {
    flex: 1;
}
/*Stack child items to the main-axis center*/
.main-center {
    justify-content: center;
} 
```

[JSFiddle 演示](https://jsfiddle.net/Leif_AMO/psuq7mbt/3/)

尽管有些华夫饼可能已被吃掉，但在制作此答案时没有损坏华夫饼。

# ruby-on-rails - 回形针力 下载

> ID：14406082
> 
> 赞同：5
> 
> 时间：2013-01-18T19:21:11.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

希望任何人都可以在这方面提供帮助！

利用 Paperclip 将文件上传到应用程序，所以我需要介绍两件事。

1) 链接到下载文件的最佳方式是什么，我目前正在链接到公用文件夹，但这不是最佳选择，因为它显示了我不想要的 URL。想也许一个 button_to 调用不确定这是否已经内置到 Paperclip 中。选项。

2）完成上述操作后，浏览器需要强制下载，而不仅仅是打开文件，或者至少为用户提供标准的 firefox 选项打开或保存。

请协助谢谢米尔！！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T21:29:35.290

I'll answer question Nº2.
Let's say your model is called gallery.
In your gallery controller you'll add a download method:

```
def download
  @gallery= Gallery.find(params[:gallery_id])

  send_file @gallery.gallery_picture.path,
              :filename => @gallery.gallery_picture_file_name,
              :type => @gallery.gallery_picture_content_type,
              :disposition => 'attachment'
end 
```

Now from your routes you'll invoke the root to this method:

```
match 'gallery/:id' => 'gallery#download', :as => :download 
```

In your views:

```
- @galleries.each do |gallery|     
  = link_to 'Download Picture', download_path(gallery.id) 
```

I'm away from home and I can not test this code, but you can visit those questions I did with the same question as yours. Let me know if it solves your problem.

[Rails send_file multiple styles from Paperclip, how can I avoid code repetition?](https://stackoverflow.com/questions/14064218/rails-send-file-multiple-styles-from-paperclip-how-can-i-avoid-code-repetition)
[Rails 3.0 associated model with download 'save to' image](https://stackoverflow.com/questions/13946613/rails-3-0-associated-model-with-download-save-to-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T06:17:38.427

在 Rails 中，`send_file`用户设置的参数是一个安全漏洞。[更多信息](https://stackoverflow.com/questions/6392003/how-to-download-a-file-from-rails-application)

在 rails 4 你不能只写`match`，你必须在最后添加`, via: [:get, :post]`。 [更多信息](https://stackoverflow.com/questions/18780252/same-rails-4-routes-for-get-and-post-requests)

# php - 适用于 PHP 2 的 AWS S3 开发工具包 - 获取 HTTP 请求/响应字符串

> ID：14406084
> 
> 赞同：2
> 
> 时间：2013-01-18T19:21:15.367
> 
> 标签：php, amazon-web-services, amazon-s3

我有一个通用的 HTTP 文件访问 API，用于我正在处理的系统。为了使其尽可能灵活，它以 HTTP 字符串的形式返回请求和响应数据。

我目前正在通过[AWS SDK for PHP 2](http://aws.amazon.com/sdkforphp/)实现与 S3 交互的版本。

有没有一种简单的方法可以快速获取 S3Client 在执行操作时发出的 Request 和 Response HTTP 请求？如果没有，是否有一种更零碎的方法可以让我不必伪造它？

基本上，我想要请求和响应的全文，或者至少访问相关数据（标题、响应代码、URL 等），以便我可以正确填充我的框架的返回数据。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T21:35:53.850

您可以从命令对象获取请求或响应对象。假设`$s3`拥有 的实例`Aws\S3\S3Client`，您可以执行以下操作：

```
$command = $s3->getCommand('ListObjects', array('Bucket' => '<bucket-name>'));
$request = $command->getRequest();
$response = $command->getResponse(); 
```

这些对象具有查看正文、标题、状态代码等的方法，您可以将它们转换为字符串以查看字符串形式。

如果您想在执行命令时快速查看请求和响应，您可以连接线记录器，并查看 STDOUT（或 STDERR）上的内容

```
$s3->addSubscriber(\Guzzle\Plugin\Log\LogPlugin::getDebugPlugin());
$s3->listObjects(array('Bucket' => '<bucket-name>')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T21:16:07.767

您需要查看`Guzzle\Http\Client`该类，它是 的祖先类`S3Client`，以查看它提供的方法。您始终可以在您自己的子节点中覆盖其中一些方法，`S3Client`以使您更轻松地访问此信息。

最终，您正在寻找的数据驻留在类的对象中`Guzzle\Http\Message\Response`，我相信它会被返回`from Guzzle\Http\Client::send()`。

因此，也许在您自己的实现中，`S3Client`您可以覆盖`send()`发送 HTTP 请求的方法，然后根据需要处理响应数据。

# java - 不同的 ANT 版本对泛型的处理方式不同吗？

> ID：14406085
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:21:21.733
> 
> 标签：java, ant, compiler-errors, javac

我做了一个包含以下代码的作业

```
int status;
Object[] Data = new Object[3];
message.readArray(Data, 0, 3) //this is a call to an external library that reads some values (all integers) into 'Data'. 0 is the start and 3 is the count
status = (int) Data[2]; 
```

通过搜索，我发现最后一行应该是

```
status= ((Integer)Data[2]).intValue(); 
```

现在的问题是使用 ANT 编译和运行的初始代码没有问题，但我的评估者得到了错误：

```
java:146: inconvertible types
[javac] found   : java.lang.Object
[javac] required: int
[javac]             status = (int) Data[2];
[javac]                            ^ 
```

我不确定他使用的是哪个版本的 ANT 和/或 JAVA，但我的是 ANT 1.7.1 和 JAVAC 1.7.0。有谁知道为什么这对他们来说似乎是一个问题，为什么它会在我的身上编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:25:03.373

这将是 java 版本而不是 ANT 版本。确保他使用与您相同版本的 JAVAC。

# ruby-on-rails - how to seed encrypted password

> ID：14406087
> 
> 赞同：0
> 
> 时间：2013-01-18T19:21:30.803
> 
> 标签：ruby-on-rails, devise

I will be seeding my database with real people's names and email addresses, and inviting them to join the site by sending an email to the address that's in the database, with the link back to the site. If I use Devise's 'database_authenticable' with the site, it creates an email column and a column for an encrypted password. However, since I'm only seeding the database with an email, and not a password, I'm not sure if this will create problems.

Should I leave the password column blank? Should I create a dummy password and invite them to change it? Any recommendations?

When answering this question, please take note of my username on this site and provide the level of detail required for someone with my username (and others of similar intelligence) to understand your answer. Thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:02:18.660

做这样的事情的最简单的方法（不必对 Devise 本身感到困惑）是将密码设置为注册表单上的隐藏字段并为每个人设置默认值（例如 password123）

你需要运行

```
rails g devise:views 
```

允许您自定义设计视图并将密码字段更改为隐藏字段。然后在您的用户模型中，指定您要设置密码的内容，例如

```
before_validation: set_default_password

def set_default_password
    self.password = 'password123'
    self.password_confirmation = 'password123'
end 
```

然后修改设计电子邮件以告知用户他们的密码是什么，并建议他们尽快更改密码。

注意：这当然不是最好的解决方案，但它可能是最简单的运行而不会弄乱设计代码。

您可以查看的另一种选择是 devise_invitable gem...

[https://github.com/scambra/devise_invitable](https://github.com/scambra/devise_invitable)

这允许您向用户电子邮件发送邀请，然后他们从那里设置密码。这可能不符合您的确切需求，但我认为值得一提。

相关的 SO 问题可以在这里找到....

[设计：创建没有密码的用户然后需要密码才能使用帐户？](https://stackoverflow.com/questions/6654256/devise-create-user-without-password-then-require-password-to-use-account)

# soundcloud - Events not firing html5 player

> ID：14406089
> 
> 赞同：3
> 
> 时间：2013-01-18T19:21:38.143
> 
> 标签：soundcloud

Has the html5 player / api been updated? The events

*   SC.Widget.Events.PLAY,
*   SC.Widget.Events.PAUSE,
*   SC.Widget.Events.FINISH,

from the html5 player are not firing anymore. Can somebody confirm?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:50:13.147

最近为所有小部件引入了从 HTTP -> HTTPS 的重定向，这导致小部件 API 出现一些问题。我正在尝试修复它。

# java - 如何对 Spring Expression Language SpEL 中的域对象集合进行身份验证

> ID：14406090
> 
> 赞同：1
> 
> 时间：2013-01-18T19:21:41.410
> 
> 标签：java, spring-security, spring-el

我的原则是一个“foo”的实例，它有一个“bars”的集合。每个 'bar' 都有一个我想与作为请求的资源传递的 'id' 匹配的 id。我可以在 Spring SpEL 中执行以下操作吗？如果是这样，怎么办？

示例（伪语法；因为我不知道正确的方法，这就是我在这里的原因）

```
@PreAuthorize("principal.transactions.contains(instance where dto.transactionId == instance.id")")
public SomeResponse processTransaction(RequestDto dto) {
    ...
} 
```

基本上相当于这个

```
for(Transaction t : principal.transactions){
    if(t.getId() == dto.getTransactionId())
        return true;
}
return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:40:59.953

我不确定是否可以使用普通的 SpEL。但是您可以尝试一种解决方法：

```
@PreAuthorize("principal.hasTransactionId(#dto.transactionId)") 
```

然后您需要将**hasTransactionId(Integer transactionId)**方法添加到您的委托人。此方法必须返回一个布尔值。

# android - 如果父片段被移除，FragmentStatePagerAdapter 不会移除片段

> ID：14406092
> 
> 赞同：5
> 
> 时间：2013-01-18T19:21:48.267
> 
> 标签：android, android-fragments, android-viewpager

我正面临内存泄漏，因为某些片段没有被删除。我有使用 Fragment F1 填充视图的 Activity。该片段具有与之关联的 ViewPager 和 FragmentStatePagerAdapter。适配器正在使用另一个 Fragment F2 感觉寻呼机。当我在活动中删除 Fragment F1 时，问题就开始了。现有的 Fragments F2 不会被删除。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:11:32.417

不确定这是否是同一个问题，但前段时间我遇到了 viewpager 的问题，其中片段生命周期方法从未被调用，问题出在片段管理器上。

因此，当您创建适配器时，请尝试传递 childFragmentManager 而不是 supportFragmentManager 并查看它是否可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T20:51:01.020

我在这里面临同样的问题。在研究了很长时间如何以“正确”的方式纠正它之后，我无法让它发挥作用。`F2`因此，在从我的活动中删除`F1`父片段（带有片段事务）之前，我被迫显式释放所有s 片段。

```
// Remove all content from the FragmentStatePagerAdapter instance.
myAdapter.Content.Clear (); // Content here may be an ArrayList in Java or a List in C#.
myAdapter.NotifyDataSetChanged ();

// Reset current empty adapter inside the ViewPager (this will make all existing F2 fragments to be released).
myViewPager.Adapter = myAdapter;

// Do the transaction removing the parent F1 fragment from the main Activity.
FragmentManager.BeginTransaction ()... 
```

通过执行这些步骤，所有`F2`片段都开始从内存中释放，并且它们的`OnPause`, `OnDestroyView`...`OnDestroy`回调也被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:11:31.533

我有完全一样的问题。尝试将片段 F1 移回活动中。这可能会帮助您确定问题是否是在片段中有片段。Android 真的不喜欢这样。如果我发现我身边的东西，我会告诉你

# ruby - 将字符串转换为方法

> ID：14406098
> 
> 赞同：0
> 
> 时间：2013-01-18T19:21:59.287
> 
> 标签：ruby, parsing, methods, string-parsing

我有一个可以是“+”、“-”、“*”或“/”的字符串和两个数字。我需要将字符串表示的操作应用于数字。我试过了：

```
op = '+'
(&op.to_sym).call 1, 2 
```

但它不会解析它。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:24:30.550

Ruby 不是波兰符号语言。

```
1.send(op, 2) 
```

# node.js - Nodejs zlib 抛出无方法错误

> ID：14406099
> 
> 赞同：0
> 
> 时间：2013-01-18T19:21:59.970
> 
> 标签：node.js

我刚刚通过 npm 安装了 ebay-api 包。它的一个依赖项是restler，它抛出了一个我似乎无法修复的错误。

```
TypeError: Object #<Object> has no method 'gunzip'
    at IncomingMessage.<anonymous> (node_modules/restler/lib/restler.js:428:10)
    at EventEmitter._decode (node_modules/restler/lib/restler.js:161:25)
    at IncomingMessage.<anonymous> (node_modules/restler/lib/restler.js:140:14)
    at IncomingMessage.emit (events.js:88:20)
    at HTTPParser.onMessageComplete (http.js:137:23)
    at CleartextStream.ondata (http.js:1125:24)
    at CleartextStream._push (tls.js:363:27)
    at SecurePair.cycle (tls.js:679:20)
    at EncryptedStream.write (tls.js:122:13)
    at Socket.ondata (stream.js:38:26) 
```

第 428 行是：

```
 zlib.gunzip(buf, callback); 
```

我正在运行 node v0.5.11-pre 和最新的 restler 安装。在这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T00:57:10.067

Node`0.5.11-pre`没有`zlib`辅助方法`gunzip`。

不幸的是，当前的稳定版本`restler`是。`>= 0.6.0`

您也许可以在 Node 模块上修补该方法，但很可能还有其他问题。升级到稳定版本的 Node 对您来说是否合理？即使只是为了`0.6.0`，这也应该很相似`0.5.11-pre`。

# wpf - 无法绑定到 View 的属性

> ID：14406100
> 
> 赞同：1
> 
> 时间：2013-01-18T19:22:13.737
> 
> 标签：wpf

在我的视图的 xaml 文件中，我有这一行：

```
TextBox Text="{Binding MyModel.Text}" 
```

每次我运行程序时，它都会给我这个错误消息：

> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“MyModel”（HashCode=56593137）上找不到“MyModel”属性。绑定表达式：路径=MyModel.Text；DataItem='MyModel' (HashCode=56593137); 目标元素是'TextBox'（名称=''）；目标属性是“文本”（类型“字符串”）

我确定我的拼写是正确的。

我将视图的 DataContext 设置为 ViewModel。这会是个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:28:59.157

如果你`DataContext`设置为`MyModel`你应该只需要写：

```
<TextBox Text="{Binding Text}"/> 
```

添加额外`MyModel`内容是重复的，并且会导致查找`MyModel.MyModel.Text`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:29:33.577

由于您的视图绑定到您的视图模型（好），因此您的视图模型需要具有您的视图将绑定到的属性：

```
TextBox Text="{Binding MyViewModelsProperty}" 
```

在您的情况下，您需要从视图模型（MyViewModelsProperty setter）设置模型的属性。

如果您需要更多信息，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:29:57.183

只是`TextBox Text="{Binding Text}"`

# c - 比较C中的两个uchar

> ID：14406107
> 
> 赞同：0
> 
> 时间：2013-01-18T19:22:44.240
> 
> 标签：c, string

我正在尝试对两个字符串进行 uchar 比较和复制，基本上是 strcpy 和 strcmp，这似乎永远不会起作用。

```
typedef unsigned char uchar; 
uchar a[20] = "name1";

  if(strcmp(a,"name1") == 0) 
  {    
      strcpy(a,"name2"); 
  } 
```

我永远不会通过这种比较进入这个 if 条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:46:58.837

以下链接显示您的代码运行良好。我建议您的错误不在此处，而是在其他地方，导致您的程序永远无法到达您发布的代码。我建议您在发布的代码片段之前添加一些调试语句或断点以查看是否发生这种情况，或者至少添加一条 else 语句以查看布尔比较是否失败。

[http://codepad.org/XfKh2iuV](http://codepad.org/XfKh2iuV)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:50:45.660

这个对我有用。

```
$ cat test.c 
#include <stdio.h>
#include <string.h>

typedef unsigned char uchar; 

main()
{
    uchar a[20] = "name1";

    if(strcmp(a,"name1") == 0) {    
        printf("Hello\n"); 
    }
}
$ gcc test.c
$ ./a.out
Hello 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T23:03:10.130

你把包含在上面吗？

```
#include <stdio.h>
#include <string.h> 
```

# node.js - 如何在代码中触发事件 stdin.on("data", [callback])？

> ID：14406108
> 
> 赞同：11
> 
> 时间：2013-01-18T19:22:46.297
> 
> 标签：node.js

考虑以下示例

```
process.stdin.resume();
process.stdin.on("data", function(data) {
  console.log("recieved " + data)
})

process.stdin.write("foo\n")
process.stdin.write("bar\n") 
```

当我输入`something`终端时，我得到

```
 received something 
```

为什么它不能以`foo`与`bar`我之前发送的相同的方式工作`stdin.write`？

例如，如何`stdin.on("data)`在代码中触发此事件 ( )？我应该`process.stdin.write`这样做，但我只是得到相同的输出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T20:38:47.630

它是一个从文件描述符中获取输入的*可读流。*`stdin`我认为您不能写入该描述符（但您可以将其连接到另一个可写描述符）。

但是，在您的情况下，最简单的解决方案就是模拟`'data'`事件。每个流都是一个 EventEmiiter，因此以下将起作用：

```
process.stdin.resume();
process.stdin.on("data", function(data) {
   console.log("recieved " + data)
});

process.stdin.emit('data', 'abc'); 
```

# javascript - 如何避免在此 EditorTemplate 中放置 javascript？

> ID：14406109
> 
> 赞同：3
> 
> 时间：2013-01-18T19:22:51.103
> 
> 标签：javascript, asp.net-mvc, razor, asp.net-mvc-4, razor-2

我编写了以下 EditorTemplate，它大致基于其他一些 SO 问题和 Google 结果：

```
@model Nullable<DateTime>
@{
    var metadata = ModelMetadata.FromStringExpression("", ViewData);
    string value;
    if(!String.IsNullOrEmpty(metadata.EditFormatString)) {
        if(Model.HasValue) {
            value = String.Format(metadata.EditFormatString, Model.Value);
        }
        else {
            value = metadata.NullDisplayText;
        }
    }
    else {
        value = Model.ToString();
    }
}
@Html.TextBox("", value, new { @class = "textBoxDate" })
<script type ="text/javascript">
    $(document).ready(function () {
        $('.textBoxDate').datepicker();
    });
</script> 
```

我不喜欢的是脚本写在每个`textBoxDate`. 我了解原因，并且我知道一种可能的解决方案是将脚本放入 .js 文件并在我的页面上引用它。这并不是非常困难或任何事情，但我希望有一个解决方案，它会更多一点......无缝/神奇（为什么？有趣，它会很整洁，只是因为......）。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T21:16:23.710

我认为将脚本放入 .js 文件并在您的页面上引用它是解决此问题的最有趣和最简洁的方法。

如果您正在寻找一个不太整洁的解决方案，您可以添加几个 HtmlHelper 扩展来在模板引擎遇到它们时添加寄存器依赖项，然后在页面末尾打印出一堆脚本标签。

```
private const string requiredJavascriptIncludesContextItemsKey = "requiredJavascriptIncludesContextItemsKey";

public static void Require(this HtmlHelper html, string src)
{
    var collection = (HashSet<string>) html.ViewContext.HttpContext.Items[requiredJavascriptIncludesContextItemsKey] ?? new HashSet<string>();
    collection.Add(src);
    html.ViewContext.HttpContext.Items[requiredJavascriptIncludesContextItemsKey] = collection;
}

public static HtmlString RequiredJavascriptIncludes(this HtmlHelper html)
{
    var sb = new StringBuilder();
    foreach (var src in (HashSet<string>) html.ViewContext.HttpContext.Items[requiredJavascriptIncludesContextItemsKey] ?? new HashSet<string>())
    {
        sb.Append(string.Format("<script type='text/javascript' src='{0}></script>", src));
    }

    return new HtmlString(sb.ToString());
} 
```

`@Html.Require`您可以在任何模板中调用该方法。在你的情况下，它会是这样的：

```
@model Nullable<DateTime>
@{
    var metadata = ModelMetadata.FromStringExpression("", ViewData);
    string value;
    if(!String.IsNullOrEmpty(metadata.EditFormatString)) {
        if(Model.HasValue) {
            value = String.Format(metadata.EditFormatString, Model.Value);
        }
        else {
            value = metadata.NullDisplayText;
        }
    }
    else {
        value = Model.ToString();
    }
}
@Html.TextBox("", value, new { @class = "textBoxDate" })
@Html.Require(Html.Content("scripts/datepicker.js")) 
```

然后，在您的基本模板页面的底部，您将进行调用，`@Html.RequiredJavascriptIncludes()`并且您注册的所有 js 依赖项都将在 html 文档的末尾呈现为脚本标签。

# sql - 访问 => SQL 联接

> ID：14406113
> 
> 赞同：0
> 
> 时间：2013-01-18T19:23:06.300
> 
> 标签：sql, ms-access, join

`LEFT JOIN`ACCESS中的a`LEFT OUTER JOIN`和SQL中的a一样吗？这两个程序中的连接等价物是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:24:29.470

它们是相同的。

`OUTER`不是必需的。

`LEFT OUTER JOIN`是相同的`LEFT JOIN`

`RIGHT OUTER JOIN`是一个`RIGHT JOIN`

`FULL OUTER JOIN`是`FULL JOIN`- 但是 MS Access 不能使用`FULL JOIN`

`INNER JOIN`也可以写成`JOIN`- MS Access 不允许只使用这个词`JOIN`

# xml - 杰克逊/JAXB 序列化列表没有包装器元素

> ID：14406128
> 
> 赞同：2
> 
> 时间：2013-01-18T19:24:02.357
> 
> 标签：xml, xml-serialization, jackson, jaxb2, adobe-analytics

我正在尝试使用[Jackson 的 XML 注释](https://github.com/FasterXML/jackson-dataformat-xml)将 Map 序列化为 XML。我正在将 Map 转换为 List，以便将映射键用作元素名称并将值用作元素值，并且我非常接近获得所需的 XML。

我的课看起来像：

```
@JacksonXmlRootElement(localName = "request")
public class TrackingEvent {
    private List<JAXBElement<String>> data = new ArrayList<JAXBElement<String>>();

    public TrackingEvent() {}

    public TrackingEvent addData(String key, String value) {
        data.add(new JAXBElement<String>(new QName(key), String.class, value));
        return this;
    }

    public Map<String, String> getData() {
        Map<String, String> dataAsMap = new HashMap<String, String>(data.size());
        for (JAXBElement<String> elem : data) {
            dataAsMap.put(elem.getName().getLocalPart(), elem.getValue());
        }
        return Collections.unmodifiableMap(dataAsMap);
    }
} 
```

我的测试代码（quick-n-dirty，不是实际测试）：

```
@RunWith(JUnit4.class)
public class TrackingEventMapperTest {

    @Test
    public void eventToXml() throws Exception {
        TrackingEvent e = new TrackingEvent().addData("eVar17", "woohoo");

        XmlMapper mapper = new XmlMapper();
        mapper.configure(JsonGenerator.Feature.AUTO_CLOSE_TARGET, false);
        mapper.configure(ToXmlGenerator.Feature.WRITE_XML_DECLARATION, true);
        System.out.println("\n" + 
            mapper.writerWithDefaultPrettyPrinter().writeValueAsString(e));        
    }
} 
```

这是它生成的 XML：

```
<?xml version='1.0' encoding='UTF-8'?>
<request>
  <data>
    <eVar17>woohoo</eVar17>
  </data>
</request> 
```

但我正在寻找的是：

```
<?xml version='1.0' encoding='UTF-8'?>
<request>
  <eVar17>woohoo</eVar17>
</request> 
```

我尝试向数据声明及其 getter 添加 @JacksonXmlElementWrapper(useWrapping = false) 注释，但这似乎无济于事。我可以更改元素的名称，将 @JacksonXmlProperty(localName = "moop") 添加到声明/getter，但无法弄清楚如何完全忽略它。

我很确定我也可以通过阅读[杰克逊的文档](https://github.com/FasterXML/jackson-module-jaxb-annotations)来使用 JAXB 注释，但也没有通过谷歌找到任何东西。

您可能会猜到，我正在尝试创建一个表示 Omniture 数据的 XML 文档，并尝试以一种我不必将它们显式包含在我的 POJO 中的方式发送所有 eVar 和 prop 变量。

## 我的解决方案

我决定放弃对 Jackson 的任何使用，因为我需要的 XML 并不复杂，但迫使 Jackson 做我想做的事情变得越来越复杂。我决定使用 STAX2 直接使用 Jackson 在幕后使用的相同实现来编写 XML。这使我可以根据需要自定义 XML。

Blaise 的回答确实似乎完全符合我的要求。

# java - Java MouseListener 问题

> ID：14406129
> 
> 赞同：-4
> 
> 时间：2013-01-18T19:24:02.730
> 
> 标签：java, mouselistener

我不想再创建`JLabel`对象了。我想用`addMouseListener`，因为这种方式太习惯了。但是如果我使用这个鼠标监听器不起作用。为什么？

工作代码：

```
JLabel lb = new JLabel("Label 1");
lb.addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            if(e.isShiftDown()){
                System.out.println("Click");
            }
        }
    }); 
```

不起作用：

```
add(new JLabel("Label1").addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            if(e.isShiftDown()){
                System.out.println("Click triggered");
            }
        }
    })); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:29:07.653

```
 addMouseListener(...) 
```

因此`void`，您不能将结果用作其他方法调用的参数。

# java - 创建一个 Java 数据格式，在其中插入空格

> ID：14406130
> 
> 赞同：1
> 
> 时间：2013-01-18T19:24:06.793
> 
> 标签：java, date-format

我想知道 Java 日期格式是否可以执行类似 2 0 1 3 0 1 3 1 的操作，在每个数字之间插入一个空格。到目前为止，我可以使用此代码使其工作。

```
DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
dateString = dateFormat.format(date).replace("", " ").trim(); 
```

但我希望我可以创建一个日期格式来完成这一切。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:28:35.677

您的方法尽可能简单。

在日期格式规范中没有办法做到这一点（即使是 Joda 时间，正如其他人提到的那样）。

出于兴趣，你为什么想要这样的数字之间的空格？好像很不寻常？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:43:20.657

我用：

```
private final static SimpleDateFormat MSG_DATE_FORMAT = new SimpleDateFormat("yyyy MM dd'T'HHmmssSSSZ");
...
String timeStamp = MSG_DATE_FORMAT.format( new Date() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:38:44.263

我建议你写一个`DateFormat`. 您将封装您的格式规则。

# c# - 在 VS 2012 中设计的 WPF 应用程序无法在 Windows 7 机器上运行

> ID：14406131
> 
> 赞同：1
> 
> 时间：2013-01-18T19:24:07.540
> 
> 标签：c#, wpf, windows-7, visual-studio-2012, clickonce

我使用 Visual Studio 2012 设计了一个 WPF C# 应用程序。该应用程序非常简单，使用部署方法在我的**Windows 8**机器上运行良好。`ClickOnce`数据网格显示来自 SQL Server 数据库的内容并执行所有其他功能，就像我设计的那样，但是当我尝试在 Windows 7 机器上安装它时它立即崩溃，我不知道为什么。
我尝试在其上安装应用程序的 Windows 7 计算机上运行着 .NET 4.5，但计算机上是否需要安装其他任何东西才能运行使用 VS 2012 开发的应用程序。
这是我第一次尝试在 Windows 7 机器上安装使用 VS 2012 开发的应用程序，所以我不确定这里是否缺少另一个步骤。你们可以提供的任何帮助将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:29:54.700

您所说的“应用程序已停止工作，并且如果 Microsoft 有解决方案...”的消息表明以下情况之一：

*   框架被禁用；尽管安装了 4.5，但在框架 2.0 的基础上构建了几个根实例。这个特定的框架可能会导致 3.0、3.5、4.0 甚至 4.5 出现问题。

*   框架中`System.EnterpriseServices.dll`已损坏。这需要连接回全局程序集缓存 (GAC)。

*   另一个常见问题是`machine.config`框架文件夹中的文件日志可能已损坏，需要替换为有效文件。

系统策略文件夹中也可能出现其他情况，这可能需要您使用 .Net 清理工具并重新安装框架。但在您进行任何故障排除之前，您应该转到事件查看器并获取正在发生的事情的详细信息。

* * *

首先为我尝试这些步骤：

1.  Windows 键 + R
2.  当运行提示出现时输入：`appwiz.cpl`
3.  转到左侧：**打开或关闭 Windows 功能**
4.  如果尚未打开 Framework 3.5；如果它已经打开，请转到第 5 步。
5.  关闭框架；然后重新启动。
6.  重新启动后，再次执行步骤 1-4。

现在在这一点上，我建议再次尝试该应用程序。如果失败，试试这个：

1.  打开开始
2.  在搜索中输入“cmd”
3.  右键单击并以管理员身份运行
4.  类型`%windir%\Microsoft.Net\Framework\v2.0.50727\ngen.exe update`
5.  然后输入：`sfc /scannow`

Native Regeneration 工具会尝试将 Framework 恢复到出厂状态；System-File-Checker 将尝试修复 Windows 中指示的任何错误。如果它不能，它会说'它发现完整性违规'。

这些是我为获得一般支持而采取的步骤；但是您确实应该尝试找到错误消息。因为框架可能成为清理和修复的巨大考验。如果您提供更多信息，我将修改我的回复以帮助解决它。

希望这会有所帮助。

# asp.net - 中继器中的 DropDownList 执行异步回发，但不会触发 SelectedIndexChange 事件

> ID：14406133
> 
> 赞同：3
> 
> 时间：2013-01-18T19:24:21.023
> 
> 标签：asp.net, updatepanel, selectedindexchanged

所以我已经用尽了我能找到的所有帮助，但仍然很难过。

我在转发器中有一个 DDL，我需要在同一个转发器中异步回发并更新更新面板：

```
 <asp:Repeater ID="rptOverdue" runat="server" 
            OnItemDataBound="setUpDateActionsSpecial">
            <ItemTemplate>
                <div class="theActions clearfix overdue edit hiddenrepeater" id='action_<%# Eval("item_id")%>'>
                    <span class="actionid"><%# Eval("item_id") %></span>          
                    <div class="actiontitle">      
                        <asp:TextBox ID="tbTitle" CssClass="theTitle" runat="server" Text='<%# Eval("item_title") %>' />
                    </div>
                    <div class="actionicons">
                        <a href="#" onclick='cancelUpdateAction(<%# Eval("item_id") %>)'><i class="icon-remove-sign actioniconcancel"></i></a>      
                        <a href="#" onclick='commitUpdateAction(<%# Eval("item_id") %>)'><i class="icon-ok-sign actioniconok"></i></a>   
                    </div>
                    <div class="actiondate">
                        <div class="input-append date" id="dp_<%# Eval("item_id") %>" data-date="<%= String.Format("{0:yyyy-MM-dd}", DateTime.Now) %>" data-date-format="yyyy-mm-dd">
                            <asp:TextBox ID="when2" CssClass="span2 theDuedate" size="16" type="text" name="when" placeholder="Due Date" runat="server" Text='<%# String.Format("{0:yyy-MM-dd}",Eval("item_duedate")) %>' />
                            <span class="add-on"><i class="icon-th"></i></span>
                        </div> 
                    </div>
                    <div class="actionmeta">      
                        <asp:DropDownList ID="ddlUpdateArea" CssClass="ddlUpdateArea" runat="server"></asp:DropDownList>
                        <asp:UpdatePanel ID="upDdlGoal" runat="server" UpdateMode="always">
                            <ContentTemplate>
                                <asp:DropDownList ID="ddlUpdateGoal" CssClass="ddlUpdateGoal" runat="server"></asp:DropDownList>
                            </ContentTemplate>
                            <Triggers>
                            </Triggers>
                        </asp:UpdatePanel>
                        <asp:UpdatePanelAnimationExtender ID="ae" runat="server" TargetControlID="upDdlGoal">
                             <Animations>
                                <OnUpdating>
                                    <FadeOut Duration=".3"  Fps="20" minimumOpacity=".5" />
                                </OnUpdating>
                                <OnUpdated>
                                    <sequence>
                                        <FadeIn Duration=".3"  Fps="20" minimumOpacity=".5" />
                                        <ScriptAction Script="  $('.goaliconplus').tooltip({ placement: 'top', trigger: 'hover', title: 'Add' });
                                                                $('.goaliconeye').tooltip({ placement: 'top', trigger: 'hover', title: 'Edit' });
                                                                $('.actioniconlist').tooltip({ placement: 'top', trigger: 'hover', title: 'View list' });
                                                                $('.actioniconnote').tooltip({ placement: 'top', trigger: 'hover', title: 'View note' });
                                                                $('.actioniconeye').tooltip({ placement: 'top', trigger: 'hover', title: 'Edit' });
                                                                $('.actionicondelete').tooltip({ placement: 'top', trigger: 'hover', title: 'Delete' });
                                                                $('.actioniconcomplete').tooltip({ placement: 'top', trigger: 'hover', title: 'Complete' });
                                                                scrollItemList();" />
                                    </sequence>
                                </OnUpdated>
                             </Animations>
                        </asp:UpdatePanelAnimationExtender>
                    </div>                                          
                </div>  
            </ItemTemplate>
        </asp:Repeater> 
```

我在中继器的 ItemDataBound 事件中设置了触发器和自动回发等：

```
 protected void setUpDateActionsSpecial(object sender, RepeaterItemEventArgs e)
    {
        if ((e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem))
        {
            // Bind DDLs
            DropDownList ddlAreas = (DropDownList)e.Item.FindControl("ddlUpdateArea");
            DropDownList ddlGoals = (DropDownList)e.Item.FindControl("upDdlGoal").FindControl("ddlUpdateGoal");
            UpdatePanel upDdlGoal = (UpdatePanel)e.Item.FindControl("upDdlGoal");

            DataRowView drv = e.Item.DataItem as DataRowView;

            ddlAreas.DataSource = (DataTable)Session["arealist"]; ;
            ddlAreas.DataTextField = "area_title";
            ddlAreas.DataValueField = "area_id";
            ddlAreas.DataBind();
            ddlAreas.SelectedValue = drv["goal_area"].ToString();

            // Register Area DDL for postback
            ddlAreas.SelectedIndexChanged += updateTheGoals;
            ddlAreas.AutoPostBack = true;

            AsyncPostBackTrigger trigger = new AsyncPostBackTrigger();
            trigger.ControlID = ddlAreas.UniqueID;
            trigger.EventName = "SelectedIndexChanged";
            upDdlGoal.Triggers.Add(trigger);

            if (ScriptManager.GetCurrent(Page).IsInAsyncPostBack)
            {
                triggerInitMethod.Invoke(trigger, null);
            }

            DataTable goalTable = (DataTable)Session["goallist"];
            DataRow[] goalsDR = goalTable.Select("goal_area = " + ddlAreas.SelectedValue);
            DataTable goalFiltered = goalTable.Clone();

            foreach (DataRow row in goalsDR)
            {
                goalFiltered.ImportRow(row);
            }
            goalFiltered.AcceptChanges();

            ddlGoals.DataSource = goalFiltered;
            ddlGoals.DataTextField = "goal_title";
            ddlGoals.DataValueField = "goal_id";
            ddlGoals.DataBind();
            ddlGoals.SelectedValue = drv["item_goal"].ToString();

            litEmptyActionsDate.Visible = false;
        }
    } 
```

这应该异步回发并在 updateTheGoals 事件处理程序中执行代码：

```
 protected void updateTheGoals(object sender, EventArgs e)
    {
        // Bind DDLs
        DropDownList ddlAreas = (DropDownList)sender;
        UpdatePanel thisUP = (UpdatePanel)ddlAreas.Parent.FindControl("upDdlGoal");
        DropDownList ddlGoals = (DropDownList)thisUP.FindControl("ddlUpdateGoal");

        DataTable goalTable = (DataTable)Session["goallist"];
        DataRow[] goalsDR = goalTable.Select("goal_area = 1024");// + ddlAreas.SelectedValue);
        DataTable goalFiltered = goalTable.Clone();

        foreach (DataRow row in goalsDR)
        {
            goalFiltered.ImportRow(row);
        }
        goalFiltered.AcceptChanges();

        ddlGoals.DataSource = goalFiltered;
        ddlGoals.DataTextField = "goal_title";
        ddlGoals.DataValueField = "goal_id";
        ddlGoals.DataBind();
        ddlGoals.Items.Insert(0, new ListItem("Choose a Goal", "0"));
        ddlGoals.SelectedValue = "Choose a Goal";

        thisUP.Update();
    } 
```

实际发生的是更新面板似乎进行了更新（动画运行并完成），但 ddlUpdateGoal 下拉列表的实际内容并没有改变。它似乎正在执行异步回发，但实际上并未运行 SelectedIndexChanged 事件处理程序来更改更新面板的内容。

有没有人遇到过这个问题？（感谢所有帮助，在我在办公室启动显示器之前！）

谢谢，本

# c - 初学者 C - 尝试在填充数组时终止循环

> ID：14406134
> 
> 赞同：0
> 
> 时间：2013-01-18T19:24:25.227
> 
> 标签：c, arrays, loops, while-loop

我有一个家庭作业问题，我必须记录成绩，将它们放在一个数组中，然后给出平均值。该程序应该要求输入，直到给出一个负数作为成绩或数组被填充。到目前为止，我能够让程序循环，直到我给出一个负数，它计算出正确的平均值。我想不通的是如何在数组被填充时终止循环。我的代码：

```
#include <stdio.h>

/* function main begins program execution */
int main( void )
{  int counter; /* number of grade to be entered next */
   int grade; /* grade value */
   int total; /* sum of grades input by user */
   double average; /* average of grades */

   /* initialization phase */
   total = 0; /* initialize total */
   counter = 0; /* initialize counter */
   grade = 0;  /* initialize grade */

   printf( "Input a negative number when done entering grades.\n" );

   /* processing phase */
   #define MAX_GRADES 20
   int grades [MAX_GRADES];
   while ( counter < MAX_GRADES) {
     while ( grade >= 0 ) { /* loop until negative given */
       printf( "Enter grade: " ); /* prompt for input */
       scanf( "%d", &grade ); /* read grade from user */
       if (grade >= 0) {
     if (grade > 100)
       printf( "Grade is greater than 100\. Please input grade again.\n" );
     else {
       grades[counter] = grade;
       total = total + grade; /* add grade to total */
       counter = counter + 1;
     } /* end else */
       } /* end if */
     } /* end while */
   } /* end while */

   /* termination phase */
    average = total /(double) counter; /* integer division */

   printf( "Class average is %f\n", average ); /* display result */
   return 0; /* indicate program ended successfully */
} /* end function main */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:30:08.437

```
while ( counter < MAX_GRADES) {
    while ( grade >= 0 ) { 
```

循环中的循环将迭代 x*y 次。对于外循环的每一步，内循环都会从头到尾运行。

您需要一个循环检查两个条件：

```
while ( counter < MAX_GRADES && grade >= 0) 
```

但是，因为您想先做事然后检查条件，所以`do..while`循环更适合这里。您也可以随时`break`退出一个循环或`continue`完成当前运行并移至下一个：

```
do{ /* loop */
   printf( "Enter grade: " ); /* prompt for input */
   scanf( "%d", &grade ); /* read grade from user */
   if (grade < 0)
     break;

   if (grade > 100){
     printf( "Grade is greater than 100\. Please input grade again.\n" );
     continue;  
   }

   /* all abnormal conditions have been handled */
   /* now we're clear to do the actual job */

   grades[counter] = grade;
   total = total + grade; /* add grade to total */
   counter = counter + 1;

 }while ( counter < MAX_GRADES ) /*until array is full*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:27:41.430

只需检查是否

```
MAX_GRADES == counter 
```

并打破循环。但这无论如何都完成了……您根本不必更改代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:27:53.850

你能摆脱内循环，只需将外循环上的while条件更改为：

```
while ( counter < MAX_GRADES && grade >= 0 ) 
```

# javascript - 用于跨域字符串存储的 Window.name 的替代解决方案

> ID：14406138
> 
> 赞同：1
> 
> 时间：2013-01-18T19:24:31.050
> 
> 标签：javascript, dom

我一直在使用 window.name hack 作为一种使用 window.name 属性在同一个寡妇的域之间存储一些非安全本地数据的方法。

此功能已在最新版本的 Chrome 中被阻止，我想不出任何其他方法可以在 Chrome 中实现相同的功能。

这必须在客户端完成，因为我无权访问服务器。有谁知道任何替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:15:54.143

您可以使用`window.postMessage`来回传递字符串。

> [https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

# html - 在 Ruby 中生成一个选择元素多年

> ID：14406140
> 
> 赞同：0
> 
> 时间：2013-01-18T19:24:35.977
> 
> 标签：html, ruby-on-rails, ruby

我需要一个仅显示 1990 年至 2014 年的下拉列表。

我试过了：

```
<%= select_tag "year", [1900..2014] %> 
```

但我得到：

```
<select id="year" name="year">[1900..2014]</select> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:28:49.330

使用`()`代替`[]`，像这样：

```
<%= select_tag "year", options_for_select((1900..2014).to_a) %> 
```

该表达式`[1900..2014]`表示一个数组，其唯一元素是一个范围。调用*1..10*`to_a`范围返回.*`[1,2,3,'...','etc']`*

 ***编辑：**哎呀，select_tag，不像`f.select`你使用 insde`form_for`块不会自动将数组转换为选项标签，所以你需要使用`options_for_select`. @dimuch 刚刚注意到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:53:06.253

尝试添加`options_for_select`

```
<%= select_tag "year", options_for_select(1900..2014) %> 
```*

# c# - 执行不返回结果的存储过程时引发错误

> ID：14406141
> 
> 赞同：5
> 
> 时间：2013-01-18T19:24:37.520
> 
> 标签：c#, stored-procedures, dapper

我目前在我们的一个项目中使用 dapper，我们一直在执行存储过程。在前几个方法中，当我们执行的存储过程返回行时，一切正常。

现在，当我尝试从找到时返回信息的存储过程中获取数据时，我遇到了一个问题。这是一个非常常见的用例（例如，在应用程序上记录用户）。当调用该`Query`方法时，sproc 没有返回任何行，dapper 抛出一个`ArgumentException`带有消息的：

*“使用多映射 API 时，如果您有除 Id 参数名称以外的键，请确保设置 splitOn 参数：splitOn”*

我正在使用的代码是：

```
using (var conn = new SqlConnection(connString))
{
    conn.Open();

    return conn.Query<Customer>(
            sql: "prc_GetCustomer",
            param: new { Parameter = p },
            commandType: CommandType.StoredProcedure).FirstOrDefault();
} 
```

我知道`Execute`当过程预计不会返回任何行时应该使用一种方法，但这真的不是我的情况。此外，dapper 异常具有误导性，因为我没有使用多重映射。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T09:21:05.677

如果查询未返回任何结果网格，则应使用 Execute，而不是 Query。

# .net - 为什么要使用 FTP 来复制文件？

> ID：14406146
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:24:59.587
> 
> 标签：.net, ftp

我需要在 VB 代码中将大文件从服务器移动到服务器，就像在 Windows 服务中一样。我最初的反应是我们需要在 .NET 中使用 FTP 类，因为如果一个简单的文件副本可以解决问题，为什么会有像 Filezilla 或 CuteFTP 这样的工具。但我越想越想不明白为什么 FTP 真的如此重要。然而似乎每个人都在使用它。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:41:54.903

您不能在所有 TCP 网络上进行文件复制。FTP 在任何 TCP 网络上提供文件传输功能，并实现错误处理、重试、检查点等，否则您必须自己实现。

如果您使用 Microsoft Windows 网络或 Active Directory 作为依赖项来实现您的解决方案，Murphy 要求您迟早必须使用它在不能以这种方式通信的两台服务器之间复制文件。使用 FTP ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:42:16.870

> 但我越想越想不明白为什么 FTP 真的如此重要。

FTP 是一种几乎通用的文件传输协议，它允许将文件从一台计算机复制到内部网络或外部网络（如 Internet）上的另一台计算机。

复制大卫的评论。如果您的意思是您可以将文件复制到网络共享它们是的，那么可能不需要 FTP。

补充我的想法。如果您在网络上有具有不同操作系统的计算机，则需要 FTP。

# sql - SQL-Server 2008，用零替换空值的 SQL

> ID：14406152
> 
> 赞同：-5
> 
> 时间：2013-01-18T19:25:08.220
> 
> 标签：sql, sql-server-2008

我的表中有多个具有 NULL 值的列。

我想`NULL`将此表中的所有值替换为`0`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:29:53.710

假设所有列都是数字数据类型，您可以这样做：

```
UPDATE YourTable
SET Column1 = ISNULL(Column1,0),
    Column2 = ISNULL(Column2,0),
    Column3 = ISNULL(Column3,0),
    Column4 = ISNULL(Column4,0).... 
```

# .net - 如果有异常然后停止并转到页面加载？

> ID：14406157
> 
> 赞同：0
> 
> 时间：2013-01-18T19:25:31.077
> 
> 标签：.net, vb.net

在下面的代码中，我有嵌套的函数/子

发生的意思是如果有异常然后在代码所在的任何地方停止并将异常添加到全局变量并转到“如果有异常则转到此处”下面的行

由于下面的代码不起作用，我该怎么做？这肯定很容易吗？

下面如果异常发生在 Inner_B() 中，那么它会被 Inner_A() 捕获，但我想在 Inner_B() 中捕获山雀

```
Partial Class _Default
    Inherits System.Web.UI.Page

    Dim textOutput As String = String.Empty
    Dim strErrorMesssage As String = String.Empty

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Outer()
        'If there was an exception then go here'
    End Sub

    Private Function Outer() As String
        Try
            Inner_A()
        Catch ex As Exception
            strErrorMesssage = ex.Message
            Throw
        End Try
        textOutput &= " Function Outer"
        Return " Function Outer"
    End Function

    Private Function Inner_A() As String
        Try
            Inner_B()
        Catch ex As Exception
            strErrorMesssage = ex.Message & " Inner_A() "
            Throw
        End Try

        textOutput &= " Function Inner_A"
        Return " Function Inner_A"
    End Function

    Private Sub Inner_B()
        Throw New ApplicationException("Exception Occured")
        Try
            Inner_C()
        Catch ex As Exception
            strErrorMesssage = ex.Message & " Inner_B() "
            Throw
        End Try
        textOutput &= " Sub Inner_B"
    End Sub

    Private Function Inner_C() As String
        Try

        Catch ex As Exception
            strErrorMesssage = ex.Message & " Inner_C() "
            Throw
        End Try
        textOutput &= " Function Inner_C"
        Return "Inner_C"
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:34:35.907

我猜你所说的“不工作”是什么意思，但我假设你在调用`Outer()`?

只需将其包装在 Try Catch 中，但如果您想继续，请不要重新抛出异常。

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Try
        Outer()
    Catch ex As Exception
        'do something with it here if you want, or not.
    End Try

    'Do more here.
 End Sub 
```

# javascript - 在使用触摸和鼠标的设备（例如 Surface）上监听 mousedown 和 touchstart

> ID：14406161
> 
> 赞同：12
> 
> 时间：2013-01-18T19:25:57.270
> 
> 标签：javascript, windows-8, touch

因此，我在为 Microsoft Surface 开发 Web 应用程序时遇到了一个有趣的问题。

我想为用户与 DOM 元素交互时添加事件侦听器。现在我可以这样做：

```
if ('ontouchstart' in document.documentElement) {
  //Attach code for touch event listeners
  document.addEventListener("touchstart" myFunc, false);
} else {
  //Attach code for mouse event listeners
  document.addEventListener("mousedown" myFunc, false);
} 
```

如果设备没有鼠标输入，这个问题会很简单，上面的代码也可以正常工作。但是 Surface（以及许多新的 Windows 8 计算机）同时具有触摸和鼠标输入。所以上面的代码只有在用户触摸设备时才有效。鼠标事件监听器永远不会被附加。

所以我想，好吧，我可以这样做：

```
if ('ontouchstart' in document.documentElement) {
  //Attach code for touch event listeners
  document.addEventListener("touchstart" myFunc, false);
}
//Always attach code for mouse event listeners
document.addEventListener("mousedown" myFunc, false); 
```

不支持触摸的设备不会附加事件，但使用触摸的设备将注册其处理程序。但是，问题在于`myFunc()`它将在触摸设备上被调用两次：

1.  `myFunc()`当“touchstart”被提升时将触发
2.  因为触摸浏览器通常会经历循环*touchstart* -> *touchmove* -> *touchend* -> *mousedown* -> *mousemove* -> *mouseup* -> *click*，`myFunc()`将在“mousedown”中再次调用

我考虑过添加代码以`myFunc()`使其调用`e.preventDefault()`，但这似乎也会阻止*touchend*以及某些浏览器上的*mousedown* / *mousemove* / *mouseup （*[链接](http://code.google.com/p/android/issues/detail?id=19827)）。

我讨厌做用户代理嗅探器，但似乎触摸浏览器在触摸事件的实现方式上有所不同。

我一定遗漏了一些东西，因为似乎这些 JavaScript 实现肯定是在浏览器同时支持鼠标和触摸的情况下决定的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T12:45:17.937

对于 Windows 8，您可以使用“MSPointerDown”事件。

```
 if (window.navigator.msPointerEnabled) {
     document.addEventListener("MSPointerDown" myFunc, false);
 } 
```

还将以下内容添加到您的样式中：

```
 html { 
    -ms-touch-action: none; /* Direct all pointer events to JavaScript code. */
  } 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ie/hh673557(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh673557(v=vs.85).aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-11T20:54:32.247

在 myFunc 中，检查事件类型。如果是 touchstart，那就做`e.stopPropagation()`.

```
function myFunc(e) {
    if (e.type === 'touchstart') {
        e.stopPropagation();
    }
    //the rest of your code here
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-28T10:21:00.413

**编辑：** 如果您使用[jQuery](http://www.jquery.com)，您将能够这样做：

```
var clickEventType=((document.ontouchstart!==null)?'mousedown':'touchstart');

$("a").bind(clickEventType, function() {
    //Do something
}); 
```

这只会触发绑定事件之一。

在这里找到：[如何绑定“touchstart”和“click”事件但不响应两者？](https://stackoverflow.com/questions/7018919/how-to-bind-touchstart-and-click-events-but-not-respond-to-both)

# ubuntu - Cython Memoryview 编译错误

> ID：14406166
> 
> 赞同：1
> 
> 时间：2013-01-18T19:26:18.960
> 
> 标签：ubuntu, python-2.7, cython, memoryview

我正在尝试获得 typed `Memoryview`on `Cython`（Ubuntu 11.10 64bit）的好处，但即使在[这个教科书示例](http://docs.cython.org/src/userguide/memoryviews.html)中也会出现编译错误。不使用`Memoryview`生成的代码似乎可以编译。我正在使用 Python 2.7 从 Sage 工作并收到如下错误：

`gcc -fno-strict-aliasing -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/sergey/Python/sage-5.5/local/include/csage -I/home/sergey/Python/sage-5.5/local/include -I/home/sergey/Python/sage-5.5/local/include/python2.7 -I/home/sergey/Python/sage-5.5/local/lib/python/site-packages/numpy/core/include -I/home/sergey/Python/sage-5.5/devel/sage/sage/ext -I/home/sergey/Python/sage-5.5/devel/sage -I/home/sergey/Python/sage-5.5/devel/sage/sage/gsl -I/home/sergey/.sage/sage_notebook.sagenb/home/admin/1/code -I/home/sergey/Python/sage-5.5/local/include/python2.7 -c _home_sergey__sage_sage_notebook_sagenb_home_admin_1_code_sage2_spyx_0.c -o build/temp.linux-x86_64-2.7/_home_sergey__sage_sage_notebook_sagenb_home_admin_1_code_sage2_spyx_0.o -w -O2`

`_home_sergey__sage_sage_notebook_sagenb_home_admin_1_code_sage2_spyx_0.c:2259:29: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘.’ token _home_sergey__sage_sage_notebook_sagenb_home_admin_1_code_sage2_spyx_0.c:2261:44: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘.’ token`

建议的修复：

```
import os
os.environ['LDFLAGS'] = '-march=i486'
os.environ['CFLAGS'] = '-march=i486' 
```

没有帮助 - 它给出了我的处理器不支持此类指令的错误。

在此先感谢，谢尔盖

# assembly - Hello World Assembly 非法指令：4

> ID：14406170
> 
> 赞同：0
> 
> 时间：2013-01-18T19:26:32.793
> 
> 标签：assembly

我是组装新手，我正在尝试让这个 hello world 程序正常工作：

```
.data
msg:
    .ascii  "Hello, world!\n"
    len = . - msg
.text
    .globl start
start:
    movl $len,%edx
    movl $msg,%ecx
    movl $1,%ebx
    movl $4,%eax
    int $0x80
    movl $0,%ebx
    movl $1,%eax
    int $0x80 
```

我在mac上编译它：

```
as -o program.o program.s 
```

然后将其链接到：

```
ld -o program program.o 
```

两者都可以正常工作，但是当我运行生成的程序时出现错误：

```
Illegal instruction: 4 
```

有人可以告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:13:49.733

您的代码的 Mac 等效项类似于：

```
.data
msg:
    .ascii "Hello, world!\n"
    len = . - msg
.text
    .globl start
start:
    movq $len, %rdx
    lea msg(%rip), %rsi
    movq $1,%rdi
    movq $0x2000004,%rax
    syscall
    movq $0,%rdi
    movq $0x2000001,%rax
    syscall 
```

请注意，sys 调用约定是不同的（不同的寄存器、参数和调用机制），我已将其更改为 64 位。

# ios - iOS std::length_error::~length_error() 崩溃

> ID：14406173
> 
> 赞同：0
> 
> 时间：2013-01-18T19:26:38.830
> 
> 标签：ios, crash, symbolicatecrash

在我的应用程序中，我也使用了 C++/Boost 库。奇怪的是所有的崩溃日志都与 std::length_error() 相关。

谁能提供一些线索？欢迎任何评论。

```
124 Thread 8 Crashed:
125 0   libsystem_kernel.dylib          0x30a70350 __pthread_kill + 8
126 1   libsystem_c.dylib               0x33dff11e pthread_kill
127 2   libsystem_c.dylib               0x33e3b96e abort
128 3   libc++abi.dylib                 0x36f5bd4a abort_message
129 4   libc++abi.dylib                 0x36f58ff4 default_terminate()
130 5   libobjc.A.dylib                 0x32c69a8c _objc_terminate()
131 6   libc++abi.dylib                 0x36f59078 safe_handler_caller(void
132 7   libc++abi.dylib                 0x36f59110 std::terminate()
133 8   libc++abi.dylib                 0x36f5a50e __cxa_throw
134 9   Navigatio                       0x00d9f65a std::length_error::~length_error() + 10115470
135 10  Navigatio                       0x0ed9f732 std::length_error::~length_error() + 10115686
136 11  Navigatio                       0x00d9a438 std::length_error::~length_error() + 10094444
137 12  Navigatio                       0x00d99b52 std::length_error::~length_error() + 10092166
138 13  Navigatio                       0x0059bc32 std::length_error::~length_error() + 1711974
139 14  libsystem_c.dylib               0x33de130e _pthread_start
140 15  libsystem_c.dylib               0x33de11d4 thread_start + 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:41:02.843

我认为你的符号是错误的。看看这些偏移量：

```
0x00d9f65a std::length_error::~length_error() + 10115470
0x0ed9f732 std::length_error::~length_error() + 10115686
0x00d9a438 std::length_error::~length_error() + 10094444
0x00d99b52 std::length_error::~length_error() + 10092166
0x0059bc32 std::length_error::~length_error() + 1711974 
```

这些数字太疯狂了。这将需要`std::length_error::~length_error()`超过*9 兆字节*的代码大小。

因此，要么在符号化过程中出现了可怕的错误（例如用于提供符号的错误二进制文件），要么在`std::length_error::~length_error()`.

# jquery - 将下载的 zip 文件返回到浏览器下载窗口

> ID：14406174
> 
> 赞同：0
> 
> 时间：2013-01-18T19:26:39.517
> 
> 标签：jquery

> **可能重复：**
> [返回自动下载 JQuery Ajax 调用](https://stackoverflow.com/questions/2481302/return-automatic-download-jquery-ajax-call)

我正在用 PHP 创建一个文件 zip-fly。该文件创建没有问题。即使我将其设置为不保存在服务器上，但立即开始下载。

在该文件中，我通过按下按钮从另一个文件中调用 jquery。代码如下。

```
$(".down").on("click",function(){
  id = this.id;
  $.ajax({
    type: "POST",
    url: "files/down.php",
    data: "id="+id,
    cache: false,
    success: function(data){
        //alert(data)
    }
  });
}); 
```

我希望当您单击按钮时，我会显示浏览器下载窗口，但我不这样做......而且不知道如何......

一切正常，因为如果我告诉 PHP 将文件保存在服务器上。如果你告诉我答案`alert()`让我充满了奇怪的符号，所以有些东西正在返回，但不是如何通过下载窗口将其返回给我。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-18T21:47:41.347

*   这是一个类似的问题，得到了很好的回答。 [使用 JavaScript 开始文件下载](https://stackoverflow.com/questions/365777/starting-file-download-with-javascript)

如果您不想使用 iframe。

我成功地使用了这个方法：

1.  执行 ajax 调用，然后让脚本压缩它并将其临时保存在服务器上。
2.  将此临时存储文件的链接返回到您的 js / 或将即时返回文件的链接。
3.  将链接设置为 window.location.replace()

我使用的代码。

在 js 部分，只需调用 ajax 请求，然后等待它完成，这就是我用来将文件返回到服务器端脚本以获取假文件位置的方法。：

```
$fakefile = $doc['doc_name'];

$finfo = new finfo(FILEINFO_MIME);
$mm_type = $finfo->file($realfile);

header("Cache-Control: public, must-revalidate"); 
header("Pragma: no-cache"); 
header("Content-Type: " . $mm_type); 
header("Content-Length: " .(string)(filesize($realfile)) ); 
header('Content-Disposition: attachment; filename="'.$fakefile.'"'); 
header("Content-Transfer-Encoding: binary"); 
readfile($realfile);
exit; 
```

回到 js：捕捉响应：

```
$.post( href, null,
  function(data) {

  // file exist and is downloadable for user - call it for real.
  if(data.success === 1) {
     window.location.replace(href);
  }
  // there were errors  - display message.
  }
},'json'); 
```

希望能帮助到你。

# c# - 如何在 C# 中绘制半圆形？

> ID：14406180
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:26:59.553
> 
> 标签：c#

我找到了这段代码，但我不知道如何在 WinForms 中使用它？我的问题是我需要逐步使用此代码做什么才能在表单中绘制半圆。

```
 private void DrawEllipseRectangle(PaintEventArgs e)
    {
        // Create pen.
        Pen blackPen = new Pen(Color.Black, 3);

        // Create rectangle for ellipse.
        Rectangle rect = new Rectangle(0, 0, 200, 100);

        // Draw ellipse to screen.
        e.Graphics.DrawEllipse(blackPen, rect);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:32:48.037

用于`Graphics.DrawPie`绘制圆形的饼图。半圆是一个 180 度扫描的饼图。

# sql - SQL 外连接时间替换空值

> ID：14406181
> 
> 赞同：1
> 
> 时间：2013-01-18T19:27:01.933
> 
> 标签：sql, sql-server, sql-server-2008, timestamp, outer-join

（SQL SERVER 2008）我在多个表中添加了时间戳记录以加入主/基表。时间点有时等于基表，但有时不等于。

创建表的代码：

```
create table base (time float);
create table table2 (time float, val2 char(1));
create table table3 (time float, val3 int);
insert into base values (1),(2),(3),(4),(5),(6),(7),(8),(9),(10);
insert into table2 values (1, 'a'),(5, 'z'),(6, 'm'),(9, 'b');
insert into table3 values (1.5, 1),(5.3, 10),(5.5, 0),(8.1, 4); 
```

结果集应该是基表中的每条记录和其他表中的“最新”值。以前，这些表在 Excel 中使用设置为 TRUE 的 Vlookup “连接”，这会从已排序的表中获取最接近的匹配项。

最终结果应如下所示：

```
time | val2 | val3
1  | a | NULL
2  | a | 1
3  | a | 1
4  | a | 1
5  | z | 1
6  | m | 0
7  | m | 0
8  | m | 0
9  | b | 4
10 | b | 4 
```

如何使用 SQL 语句复制它？

因为只有大约 100 条记录在玩，所以我会在这里考虑可读性而不是效率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:43:14.770

也许最易读的是`select`子句中的相关子查询：

我一般不是 inside 的粉丝`select`，`select`但相关子查询确实模仿了 Excel vlookup 的行为。

```
Select
  b.time,
  (Select max(t2.val2) From table2 t2 Where b.time >= t2.time) As val2,
  (Select max(t3.val3) From table3 t3 Where b.time >= t3.time) As val3
From
  base b
Order By
  b.time; 
```

[http://sqlfiddle.com/#!3/3545e/18](http://sqlfiddle.com/#!3/3545e/18)

（感谢 Laurence 提供上述代码和 SQL Fiddle。）

The use of `max` requires that the values be non-decreasing. The following version works regardless:

```
select
  b.time,
  (select top 1 t2.val2 from table2 t2 where b.time >= t2.time order by t2.time Desc) as val2,
  (select top 1 t3.val3 from table3 t3 where b.time >= t3.time order by t3.time Desc) as val3
from
  base b 
```

[http://sqlfiddle.com/#!6/a5148/5](http://sqlfiddle.com/#!6/a5148/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:35:07.017

一般原则是使用外连接来确保即使第二个表中没有匹配项也能得到结果。然后，您可以使用不等式来限制超出的任何内容，并`max`选择剩余的最高值。

这对于大型表可能效率低下，因为您实际上是在进行`t2`and的交叉连接`t3`。最好先做一个嵌套查询，然后再加入结果：

```
-- Easier to read    
Select
  b.time,
  max(t2.val2) As val2,
  max(t3.val3) As val3
From
  base b
    left outer join
  table2 t2
    on b.time >= t2.time
    left outer join
  table3 t3
    on b.time >= t3.time
Group By
  b.time
Order By
  b.time;

-- Probably faster
Select
  n.time,
  n.val2,
  Max(t3.val3)
From (
    Select
      b.time,
      Max(t2.val2) As val2
    From
      base b
        left outer join
      table2 t2
         On b.time >= t2.time
    Group By
      b.time
    ) n
    Left Outer Join
  table3 t3
    On n.time >= t3.time
Group By
  n.time,
  n.val2
Order By
  n.time; 
```

[http://sqlfiddle.com/#!3/3545e/15](http://sqlfiddle.com/#!3/3545e/15)

# actionscript-3 - 获取用户点击了列表中的哪个条目

> ID：14406183
> 
> 赞同：0
> 
> 时间：2013-01-18T19:27:12.290
> 
> 标签：actionscript-3, apache-flex, list, events

我正在 Air/Flex 中制作简单的程序，其中图像层列在“列表”Flex 组件中。想法是用户可以通过拖动、单击、双击列表中的条目等方式来编辑图层。

但是，看起来我仍然没有完全理解事件绑定在 AS3 和 Flex 组件中是如何工作的。当我双击它时，我试图让程序跟踪列表中一个条目的标签。它适用于三分之一的条目，但其他条目返回参考错误 #1069。以下是我的图层类中的相关代码：

声明图层面板和列表：

```
<s:Panel x="10" y="29" width="276" height="261" id="newlevel" title="Background layers">
        <s:List  id="layers" x="10" y="41" width="254" height="143" dragEnabled="true" dragMoveEnabled="true" dataProvider="{layerlist}"
                dropEnabled="true" dragComplete="layers_dragCompleteHandler(event)" doubleClickEnabled="true" doubleClick="layers_doubleClickHandler(event)" keyDown="layers_keyDownHandler(event)">

        </s:List>

        <s:Button x = "94" y = "192" width="86" height="26" label="OK" click="ok_clickHandler(event)" />
        <s:Label x="10" y="10" width="254" height="33" text="Click and drag to reorder, rename and delete layers"/>
    </s:Panel> 
```

定义“layerlist”并添加一些测试值的脚本：

```
//list of layers in scene. Used in layer list for re-ordering and editing.
            public var layerlist:ArrayCollection = new ArrayCollection(
                [{label: "asd", price: "dsfdf"}]); 
```

--

```
layerlist.addItem({label: "canoe", price: "dsfdf"});
        layerlist.addItem({label: "coyote", price: "dsfdf"}); 
```

最后是我的双击事件处理程序：

```
protected function layers_doubleClickHandler(event:MouseEvent):void
        {
            // user doubleclicked so rename this layer
            trace("doubleclick");
            trace(event.target.label);

        } 
```

当用户单击列表的一个条目时，我需要知道它来自“layerlist”的哪个条目。我认为 event.target 会指向正确的项目，但显然这并不容易。在我用按钮制作工具栏并使用 event.label 来找出用户按下的按钮之前，但在这种情况下它不起作用。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:01:57.560

事件处理程序中的目标始终是从鼠标启动单击的子项。它可以是标签，渲染器，列表容器中的任何孩子，取决于点击点。您可以做一些变通方法，例如， analize event.target：

```
protected function layers_doubleClickHandler(event:Event):void
{
    var item:IItemRenderer;
    if (event.target is IItemRenderer)
        item = event.target as IItemRenderer;
    else if (event.target is Label)
        item = event.target.parent;

    trace(item.label);
} 
```

另一种方法可以覆盖列表的 itemRenderer 类并从那里双击。

阅读[Flash 中的事件冒泡](http://www.senocular.com/?entry=286)，这将有助于理解图片。

# jsp - 限制更改地址栏中的参数

> ID：14406184
> 
> 赞同：1
> 
> 时间：2013-01-18T19:27:16.590
> 
> 标签：jsp, url

正在从外部应用程序访问 jsp 页面，从地址栏发送到页面的参数是 emailaddress。一旦外部应用程序引用了这个 jsp 页面，就会出现一个不可编辑的文本字段，该字段会填充这个参数的值。

我的问题是，无论如何我可以使地址栏中的参数不可编辑或对任何人都不可见，这样任何人都无法更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:33:23.750

答案是：**不要**。在服务器端进行完整性和安全性检查，没有人可以篡改数据。客户端必须经过*身份验证*和*授权*才能发送给定的参数。你不能简单地依赖浏览器或一些聪明的 JavaScript 会保护你的事实。

^(您可以使用 POST 而不是 GET 参数，但这只会隐藏，而不是保护数据。)

# hibernate - 来自 Hibernate Session 的 JPA 样式 Criteria/CriteriaBuilder 查询

> ID：14406185
> 
> 赞同：14
> 
> 时间：2013-01-18T19:27:33.683
> 
> 标签：hibernate, jpa, criteria-api

我有一个使用 Hibernate 4.x 的应用程序，它目前正在使用本机 Hibernate API（这意味着我有 a`SessionFactory`和`Session`s）。我刚刚[注意到](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch12.html)现有的 Criteria API 已被弃用，取而代之的是 JPA 的（高级）Criteria API：

> Hibernate 提供了一个较旧的遗留`org.hibernate.Criteria`API，应被视为已弃用。没有功能开发将针对这些 API。最终，特定于 Hibernate 的标准特性将被移植为 JPA 的扩展`javax.persistence.criteria.CriteriaQuery`。

我不想将我的应用程序转换为`EntityManager`直接使用（即使`Session`从那里很容易获得 Hibernate），因为我们有大量需要替换的自定义 Hibernate 配置逻辑。尽管如此，我肯定想开始使用 JPA Criteria API，因为旧的 API 已被弃用（如果过去的 Hibernate 版本有任何迹象，可能会在未来的某个随机点消失）并且它们还提供了更好的类型安全性。

**如果我使用的是 SessionFactory/Session，如何使用新的 CriteriaQuery/CriteriaBuilder API？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-12T16:20:24.057

我们的项目也有同样的困境。项目真的很复杂：90%的实体都是动态生成的；在Hibernate标准API之上实现了API级别，重DAO和服务层，应用非常广泛；我们的 hibernate 版本经过多次修补以支持特定功能（如`START WITH`/ `CONNECT BY`，`ARRAY`输入 oracle 等）；交替使用 postgresql 和 oracle 等。

新的 JPA API 对我们非常有用。我们需要能够在 Criteria API（而不是 HQL）级别使用函数（例如`NVL/coalesce`出于某种性能原因，`substring`等等`trim`）。此外，我们需要仅可用于“ `EntityManager`”JPA 实现的 Hibernate Envers。

不幸的是，根据我们的研究结果，根本无法使用原生 Hibernate 中的 JPA Criteria API。Envers 也不能用。Hibernate 项目不断发展并获得新功能。迁移到新的休眠版本对我们来说是非常复杂的任务。并且我们非常担心迁移后无法使用新版本的许多新功能并随着这个基本框架成长。

因此，我们考虑了两种可能的方式：使用`SQLCriterion`自己的`Expression`s 实现（使用解析列名`CriteriaQuery`并转换为 SQL）或迁移到 " `EntityManager`" / `CriteriaBuilder`。第二种方式看起来是不可避免的。但是迁移到 JPA 实现带来了许多隐藏的问题，这些问题破坏了我们的项目。

如果我们选择迁移并且它会很有用，我将在这里留下我们将在此活动中遇到的问题。

# c# - 找不到数据模型类型或命名空间

> ID：14406187
> 
> 赞同：0
> 
> 时间：2013-01-18T19:27:40.393
> 
> 标签：c#, asp.net-mvc, ado.net, asp.net-mvc-4

尽管错误消息非常明显，但我不确定我在哪里犯了错误。

我曾经使用我的实体

```
using (gedaiappEntities context = new gedaiappEntities())
{

} 
```

在我重命名我的项目之后.. VS 无法找到 gedaiappEntities 抱怨：

`gedaiappEntities`找不到类型或命名空间名称（您是否缺少 using 指令或程序集引用？）

我删除了我的 ADO.NET 实体数据模型，使用项目名称重新创建它`gedaiappModel`，我之前设置的连接字符串和模型名称为`gedaiappEntities`.

我应该怎么做才能让我的应用程序再次运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:59:42.490

发现了问题。

我没有执行正确的过程来重命名项目。

在项目属性选项卡中，程序集名称和默认命名空间设置错误。更改为正确的名称后，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:52:58.440

命名空间是否正确？尝试选择我假设在您的代码中为红色的“gedaiappEntities”类，因为它找不到参考。一旦它被选中，点击'ctrl +'。（即 ctrl 和句点键）同时。如果您正确命名了该类，这将强制 Visual Studio 找到引用并允许您导入它。

# c++ - 捕获的模糊、阈值、平滑边缘

> ID：14406194
> 
> 赞同：-2
> 
> 时间：2013-01-18T19:27:46.080
> 
> 标签：c++, opencv

嘿偷看我在这里尝试做的是加载视频播放它，在播放视频时捕获帧并将其输出到新窗口中。这就是下面的代码在 atm 中所做的。

但是我现在想通过向捕获的帧添加模糊和阈值来将其提升到一个新的水平，它可能会在阈值之前或之后平滑边缘。

```
#include<opencv\cv.h>
#include<opencv\highgui.h>
#include<opencv\ml.h>
#include<opencv\cxcore.h>
#include<fstream>

int main( int argc, char** argv ) {
//Main Window
    cvNamedWindow( "DisplayVideo", CV_WINDOW_AUTOSIZE );
    CvCapture* capture = cvCreateFileCapture( argv[1] ); //Video captured and stored in CAPTURE
    IplImage* frame; //Image captured and stored in FRAME

int num=0;
char s [20];

while(1) {
    num++;
    frame = cvQueryFrame(capture);
        if( !frame ) break;
        cvShowImage( "DisplayVideo", frame );
        char c = cvWaitKey(33);
        if( c == 27 ) break;
        if (c == 'f')
            {
            sprintf(s,"frame%d.jpg",num);
            cvSaveImage(s,frame);
            cvNamedWindow("FrameWindow", 0);
            cvShowImage("FrameWindow",frame);
            }
        }

cvReleaseCapture( &capture );
cvDestroyWindow("DisplayVideo" );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:38:29.233

> 函数 cvQueryFrame 从相机或视频文件中抓取一帧，解压缩并返回。这个函数只是 cvGrabFrame 和 cvRetrieveFrame 在一次调用中的组合。返回的图像不应由用户发布或修改。

因此，首先您要将帧复制到内存中您可以控制的位置。

```
IplImage* img;
cvCopyImage(frame,img);

cvSmooth(img,img,...);
cvThreshold(img,img,...);

...
cvReleseImage(&img); 
```

cvSmooth 是模糊的。我不确定您在平滑和模糊之间看到什么区别。查看 OpenCV C 参考以了解您可以执行的其他图像操作。

# php - SQL中同一列中的多个值

> ID：14406202
> 
> 赞同：0
> 
> 时间：2013-01-18T19:27:58.223
> 
> 标签：php, sql, system, friend

我对 PHP 和 SQL 还很陌生。我今天花了很多时间编写一个朋友系统（几乎与 Facebook 的相同），但我不确定如何在同一列中拥有多个朋友。因此，假设用户 'admin' 有一个名为 'john' 的朋友 admin 发送测试请求并且 john 接受，他们都进入了彼此的朋友列。但是假设另一个管理员朋友向他发送了一个请求，他接受它只会用新名称覆盖“john”，因此列中只有一个值而不是 john、另一个朋友等。怎么可能不覆盖，而是继续添加到列中。

我希望这是有道理的，并提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:35:14.293

您需要的是“一对多”的关系。一个“人”可以与许多其他“人”成为朋友。

您将有一张名为 person 的表：

```
person_id | person_name
-----------------------
1 | John
2 | Frank
3 | Mary
4 | Oscar 
```

你会有一个名为friends的一对多表：

```
person_id1 | person_id2
-----------------------------------
 1 | 2
 1 | 3
 2 | 3 
```

所以，现在通过查看我们的朋友表。我们的第一个关系是约翰和弗兰克之间，他们是朋友。约翰和玛丽，弗兰克和玛丽也是如此。奥斯卡没有朋友。

# javascript - 如何在 mvc 4 razor 中设置 ID 并动态使用它？

> ID：14406203
> 
> 赞同：10
> 
> 时间：2013-01-18T19:28:09.300
> 
> 标签：javascript, jquery, asp.net-mvc, attributes, click

我在 .html 中有 html 元素`foreach`。我无法手动向这些人声明 ID 名称。我曾经 `id='ProductSelect_@(item.Id)'`设置Id：

```
 foreach (var item in Model)
   {
     <a href="#" id='ProductSelect_@(item.Id)' class="select-link">Select this</a>
   } 
```

但是，现在我需要**eash 链接的 .click()**函数`<a>`来执行我的一些操作。如何为动态 ID 编写点击函数？
我检查了这个，但它不起作用：

```
$("#ProductSelect_@(item.Id)").click(function () {

   //any operation

 }); 
```

**编辑：**

```
<script>
    $(document).ready(function () {
        $('.select-link').click(function() {
            var id = $(this).attr('data-id');

            url = '@Url.Action("SelectThis", "Product")';
            var data = { id: '@Model.Id' };
            $.post(url, data, function (result) {
                if (result.success) {
                    alert("Thanks");
                }
                else {
                    alert("Problem occured...");
                }
            });

        });
    });
</script> 
```

此 click() 函数将请求发送到控制器迭代计数次数。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T19:31:09.210

我建议使用属性。

```
 foreach (var item in Model)
   {
     <a href="#" data-id='@item.Id' id='ProductSelect_@(item.Id)' class="select-link">Select this</a>
   } 
```

然后在 JS...

```
$('.select-link').click(function()
{
 var id = $(this).attr('data-id');
}); 
```

这样，您就可以连接到所有类似的链接（例如`select-list`），而无需为每个#id 单独处理函数。

# ruby-on-rails - 使用 Rails 淡化/闪烁随机文本？

> ID：14406205
> 
> 赞同：0
> 
> 时间：2013-01-18T19:28:12.710
> 
> 标签：ruby-on-rails, text, random, fading

基本上这篇文章的副本仅适用于 rails： [“使用 javascript 闪烁”随机文本](https://stackoverflow.com/questions/7059334/flashing-random-text-with-javascript) 我该怎么做？

我没有尝试过任何事情，因为实际上没有人使用 Rails 提出这个问题，我也不想使用 jQuery 或 JavaScript。

# mongodb - MongoDb 中的“子”文档

> ID：14406213
> 
> 赞同：0
> 
> 时间：2013-01-18T19:28:43.957
> 
> 标签：mongodb

在 RavenDb 中，您可以拥有多个以相同键开头的文档并按照[此处](http://mattwarren.org/2012/07/12/fun-with-ravendb-documents-keys/)所述创建子文​​档。

我们在 MongoDb 中有类似的东西吗？

# python - 在 matplotlib 中将 x 轴移动到绘图的顶部

> ID：14406214
> 
> 赞同：137
> 
> 时间：2013-01-18T19:28:44.363
> 
> 标签：python, matplotlib, plot, data-visualization

基于[这个关于 matplotlib](https://stackoverflow.com/questions/14391959/heatmap-in-matplotlib-with-pcolor)中热图的问题，我想将 x 轴标题移动到图的顶部。

```
import matplotlib.pyplot as plt
import numpy as np
column_labels = list('ABCD')
row_labels = list('WXYZ')
data = np.random.rand(4,4)
fig, ax = plt.subplots()
heatmap = ax.pcolor(data, cmap=plt.cm.Blues)

# put the major ticks at the middle of each cell
ax.set_xticks(np.arange(data.shape[0])+0.5, minor=False)
ax.set_yticks(np.arange(data.shape[1])+0.5, minor=False)

# want a more natural, table-like display
ax.invert_yaxis()
ax.xaxis.set_label_position('top') # <-- This doesn't work!

ax.set_xticklabels(row_labels, minor=False)
ax.set_yticklabels(column_labels, minor=False)
plt.show() 
```

但是，调用[matplotlib 的 set_label_position](http://matplotlib.org/api/axis_api.html#matplotlib.axis.XAxis.set_label_position)（如上所述）似乎没有达到预期的效果。这是我的输出：

![在此处输入图像描述](../Images/5154fc73d598bbf6ce955fb6b41a5214.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2013-01-18T19:42:58.627

采用

```
ax.xaxis.tick_top() 
```

将刻度线放置在图像的顶部。命令

```
ax.set_xlabel('X LABEL')    
ax.xaxis.set_label_position('top') 
```

影响标签，而不是刻度线。

```
import matplotlib.pyplot as plt
import numpy as np
column_labels = list('ABCD')
row_labels = list('WXYZ')
data = np.random.rand(4, 4)
fig, ax = plt.subplots()
heatmap = ax.pcolor(data, cmap=plt.cm.Blues)

# put the major ticks at the middle of each cell
ax.set_xticks(np.arange(data.shape[1]) + 0.5, minor=False)
ax.set_yticks(np.arange(data.shape[0]) + 0.5, minor=False)

# want a more natural, table-like display
ax.invert_yaxis()
ax.xaxis.tick_top()

ax.set_xticklabels(column_labels, minor=False)
ax.set_yticklabels(row_labels, minor=False)
plt.show() 
```

* * *

![在此处输入图像描述](../Images/ebc415f444c9c1caedf12b6e01929361.png)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-01-18T19:42:31.483

你想要[`set_ticks_position`](http://matplotlib.org/api/axis_api.html#matplotlib.axis.XAxis.set_ticks_position)而不是`set_label_position`：

```
ax.xaxis.set_ticks_position('top') # the rest is the same 
```

这给了我：

![在此处输入图像描述](../Images/ca63e8148d28941d56c863200eb13a3b.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-10-03T08:00:40.430

[tick_params](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.tick_params)对于设置刻度属性非常有用。标签可以移动到顶部：

```
 ax.tick_params(labelbottom=False,labeltop=True) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-03T01:01:00.487

如果您希望蜱（而不是标签）显示在顶部和底部（不仅仅是顶部），则必须进行一些额外的按摩。我能做到这一点的唯一方法是对 unutbu 的代码稍作改动：

```
import matplotlib.pyplot as plt
import numpy as np
column_labels = list('ABCD')
row_labels = list('WXYZ')
data = np.random.rand(4, 4)
fig, ax = plt.subplots()
heatmap = ax.pcolor(data, cmap=plt.cm.Blues)

# put the major ticks at the middle of each cell
ax.set_xticks(np.arange(data.shape[1]) + 0.5, minor=False)
ax.set_yticks(np.arange(data.shape[0]) + 0.5, minor=False)

# want a more natural, table-like display
ax.invert_yaxis()
ax.xaxis.tick_top()
ax.xaxis.set_ticks_position('both') # THIS IS THE ONLY CHANGE

ax.set_xticklabels(column_labels, minor=False)
ax.set_yticklabels(row_labels, minor=False)
plt.show() 
```

**输出：**

![在此处输入图像描述](../Images/994d4107758f04b50ea014464fa96c71.png)

# javascript - 删除 id 正在杀死页面上的所有 javascript

> ID：14406219
> 
> 赞同：0
> 
> 时间：2013-01-18T19:29:06.357
> 
> 标签：javascript, html, liquid

我正在尝试从[本](http://www.jackedpack.com/products/jackedpack-heavyweight-1)网站的页面中删除一个 javascript 效果。每次我尝试删除`id`导致它杀死整个页面上的所有 js 的效果。我什至尝试删除对`id`j​​s 文件中的引用，但这也杀死了页面上的所有 js。

我不想编辑js文件中的函数，因为我想在其他页面上保留js效果。

这是基本的HTML：

```
 <div class="large-image" id="large-image">
            <img src="{{ product.images.first | product_img_url: 'large' }}" class="image-zoom" alt="Picture of {{ product.title | escape }}">
        </div> 
```

如果我删除`id="large-image"`页面上的所有 js 将停止工作。

这是完整的 HTML（它使用的是液体模板引擎）：

```
{% if product.images != nil %}
    <div class="half left product-images">
        <div class="large-image" id="large-image">
            {% if product.compare_at_price_max > product.price %}<span class="sale-banner">Sale</span>{% endif %}
            <img src="{{ product.images.first | product_img_url: 'large' }}" class="image-zoom" alt="Picture of {{ product.title | escape }}">
        </div> 
```

这是相关的js：

```
(function() {
        if (document.getElementById('product')) {
            var p = document.getElementById('product'),
                b = document.getElementById('large-image'),
                i = b.getElementsByTagName('img')[0],
                l = document.getElementById('product-image-list'); 
```

这是完整的功能：

```
(function() {
    if (document.getElementById('product')) {
        var p = document.getElementById('product'),
            b = document.getElementById('large-image'),
            i = b.getElementsByTagName('img')[0],
            l = document.getElementById('product-image-list');
            if (l) {
                var a = l.getElementsByTagName('a');
            }

        i.onload = function(e) {
            var p = this.parentNode;
            p.className = p.className.replace(' loading', '');
        };

        if (window.innerWidth && window.innerWidth > 640) {
            var s = document.createElement('span');
            s.className = 'enlarge-icon';
            s.innerHTML = 'View Large Image';
            b.appendChild(s);
            b.className += ' action';
            b.onclick = function(e) {
                e = e || window.event; e = e.target || e.srcElement;
                e = getParentByTagName(e, 'DIV');
                if (e) {
                    if (p.className.indexOf('enlarged') !== -1) {
                        e.className += ' loading';
                        p.className = p.className.replace(' enlarged', '');
                        i.src = i.src.replace('grande', 'large');
                        s.innerHTML = 'View Large Image';
                    } else {
                        e.className += ' loading';
                        i.src = i.src.replace('large', 'grande');
                        p.className += ' enlarged';
                        s.innerHTML = 'View Smaller Image';
                    }
                }
            }
        }

        if (l) {
            l.onclick = function(e) {
                e = e || window.event; e = e.target || e.srcElement;
                e = getParentByTagName(e, 'A');
                if (e && e.className != 'current') {
                    b.className += ' loading';
                    var u = e.href;
                    if (p.className.indexOf('enlarged') === -1) {
                        u = u.replace('grande', 'large');
                    }
                    i.src = u;
                    for (var j=0; j<a.length; j++) {
                        if (a[j].className.indexOf('current') != -1) {
                            a[j].className = a[j].className.replace('current', '');
                        }
                    }
                    e.className = 'current';
                }
                return false;
            };
        }
    }
})(); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:32:43.437

如果删除 id：

```
b = document.getElementById('large-image'); // will return "undefined"
i = b.getElementsByTagName('img')[0];       // will return an error 
```

第二行将返回错误，因此不会评估 javascript 代码。

# networking - 页面内容在（任何）浏览器和 curl 中的显示方式不同

> ID：14406224
> 
> 赞同：0
> 
> 时间：2013-01-18T19:29:13.743
> 
> 标签：networking, curl, web-scraping

尝试：

```
curl http://meteo.search.ch/adsnow 
```

并使用您的浏览器访问此网页。请注意，内容是不同的（在浏览器中，每个链接都以雪域结尾，但不是卷曲）。

现在尝试使用与浏览器相同的标题。不过，你会得到不同的结果。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:42:43.713

我无法确认“相同的标题”部分：使用与我的浏览器相同的标题进行测试时收到“雪域”。

我将差异缩小到`Accept-Language`，此命令提供与浏览器相同的内容：

```
curl -H 'Accept-Language: ru,ru-RU;q=0.8,en-US;q=0.6,en;q=0.4,en-us;q=0.2' http://meteo.search.ch/adsnow 
```

# html - css渐变：计算第二个停止颜色

> ID：14406225
> 
> 赞同：0
> 
> 时间：2013-01-18T19:29:17.277
> 
> 标签：html, css

我希望能够根据第一个计算按钮背景渐变的第二个十六进制颜色（参见下面的示例）。

因此，我将通过用户的颜色选择器获得第一种颜色，并使用 Javascript 获得它（例如，下面示例中的#ededed）。基于第一种颜色，我想使用 JS 计算产生第二种颜色和渐变效果的偏移量（下面示例中的#dfdfdf）。颜色偏移总是相同的，只是输入和输出的十六进制颜色会不同。

有我可以使用的公式或函数吗？谢谢！

```
background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:40:14.567

请注意，您正在使用“旧”格式的`-webkit-gradient`. 您应该更新为使用它：

```
-webkit-linear-gradient(top, #ededed 5%, #dfdfdf) 
```

现在，关于实际问题，您尚未指定应如何计算第二种颜色。考虑到你给出的例子，我会假设你想要一个更轻的阴影。在这种情况下，您可以这样做：

```
var color = "#ededed";
var components = [
    (255-(255-parseInt(color.substr(1,2),16))/2).toString(16),
    (255-(255-parseInt(color.substr(3,2),16))/2).toString(16),
    (255-(255-parseInt(color.substr(5,2),16))/2).toString(16)
];
if(components[0].length < 2) components[0] = "0"+components[0];
if(components[1].length < 2) components[1] = "0"+components[1];
if(components[2].length < 2) components[2] = "0"+components[2];
var out = "#"+components[0]+components[1]+components[2]; 
```

这将为您提供介于源颜色和纯白色之间的颜色（有效地在其上覆盖 50% 不透明度的白色）。要获得更深的阴影，只需删除该`255-(255-`位和相应的`)`.

编辑：再三考虑，只需使用带有透明渐变的纯色背景：

```
background:#ededed -webkit-linear-gradient(top,rgba(255,255,255,0),rgba(255,255,255,1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:36:19.157

我没有对此进行测试，但我的方法是使用 RGB 值而不是十六进制。然后使用变量来保存你的两个颜色值。第二个变量可以根据第一个变量的值（如@color2 = @color1 + 2）或其他值来计算。

# ruby-on-rails - 路由错误“没有路由匹配”“新”路径

> ID：14406226
> 
> 赞同：0
> 
> 时间：2013-01-18T19:29:21.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个`User`模型和一个`Storefront`模型。

### 出于某种原因，当我尝试转到 /storefronts/new 时，我收到此错误：

> 路由错误没有路由匹配 {:action=>"edit", :controller=>"storefronts", :id=># Storefront id: nil, name: nil, user_id: 4, created_at: nil, updated_at: nil, 描述：无，位置：无>}

花了3个小时试图弄清楚这一点。它昨天还在工作。为什么它说**:action=>"edit"**当它是“新”动作时？

这是我的代码：

```
class Storefront < ActiveRecord::Base
  attr_accessible :name, :location, :description
  belongs_to :user
end

class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password
  has_one :storefront
end

class StorefrontsController < ApplicationController
  before_filter :check_auth, only: [:new, :edit, :update]

  def index
    @storefronts = Storefront.all
  end

  def new
    @storefront = current_user.build_storefront
  end

  def create
    @storefront = current_user.build_storefront(params[:storefront])
    if @storefront.save
      redirect_to edit_storefront_path(@storefront)
    else
      render 'new'
    end
  end

def show
    @storefront = Storefront.find(params[:id])
  end

  def edit
    @storefront = Storefront.find(params[:id])
  end

  def update
    @storefront = Storefront.find(params[:id])
    if @storefront.update_attributes(params[:storefront])
      redirect_to @storefront
    else
      render 'edit'
    end
  end
end

Pbf::Application.routes.draw do
  resources :sessions, :only => [:new, :create, :destroy]
  resources :users
  resources :storefronts

  root :to => 'storefronts#index'
  match '/signup',  to: 'users#new'
  match '/login', to: 'sessions#new'
  match '/logout', to: 'sessions#destroy'
end 
```

我正在使用的链接**（这是问题）**：

```
 <% if current_user.storefront %>
    <%= link_to "Manage Storefront", edit_storefront_path(current_user.storefront) %>
  <% else %>
    <%= link_to "Open Storefront!", openstore_path %>
  <% end %> 
```

提前致谢！

编辑：我的`rake routes`

> ```
>  sessions POST   /sessions(.:format)             sessions#create
> new_session GET    /sessions/new(.:format)         sessions#new
>     session DELETE /sessions/:id(.:format)         sessions#destroy
>       users GET    /users(.:format)                users#index
>             POST   /users(.:format)                users#create
>    new_user GET    /users/new(.:format)            users#new
>   edit_user GET    /users/:id/edit(.:format)       users#edit
>        user GET    /users/:id(.:format)            users#show
>             PUT    /users/:id(.:format)            users#update
>             DELETE /users/:id(.:format)            users#destroy
> storefronts GET    /storefronts(.:format)          storefronts#index
>             POST   /storefronts(.:format)          storefronts#create  
> new_storefront GET    /storefronts/new(.:format)   storefronts#new 
> edit_storefront GET    /storefronts/:id/edit(.:format) storefronts#edit
>  storefront GET    /storefronts/:id(.:format)      storefronts#show
>             PUT    /storefronts/:id(.:format)      storefronts#update
>             DELETE /storefronts/:id(.:format)      storefronts#destroy 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:55:51.973

在我看来，您的观点有误。`app/views/storefronts/new.html.erb`错误地引用而不作为参数`edit_storefront_path`传递。`storefront_id`你可能想要`storefronts_path`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:53:34.907

也许问题是路由器无法从某种“：id”中找出“新”。尝试将约束添加到您的编辑路线声明

```
get 'storefronts/:id/edit' => 'storefronts#edit', :id => /[\d]*/ 
```

然后只有数字 ID 将被解释为对编辑操作的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:50:43.337

这`new_storefronts_path`是集合路线，如果您通过单数形式，那么如果您没有声明任何命名路线，则将其视为成员路线，这就是为什么路线选择编辑操作并且关于 id 4 是您没有按照约定传递 id 所以`nil.object_id`是 4 .

# php - 无法在codeigniter中显示多个复选框保存值

> ID：14406227
> 
> 赞同：0
> 
> 时间：2013-01-18T19:29:27.160
> 
> 标签：php, mysql, codeigniter

我无法在我的视图页面中显示多个复选框保存值。这是插入/保存值的详细信息：

## 模型：

```
public function saveInstituteOfferdCourse($data = array()) 
{
        if ($this->db->insert('tbl_course_offred', $data)) 
    {
        return $this->db->insert_id(); // tbl_course_offred = "Table name"
    }
    return FALSE;
} 
```

## 控制器：

```
public function saveCourses() 
{
    $data = array();
    $this->load->library('form_validation');
    $this->form_validation->set_rules('skill', 'skill', 'require');
        if ($this->form_validation->run()) 
    {
        $skill = implode(',', $this->input->post('skill'));
        $data['skill'] = $skill;
        $data['user_id'] = $this->session->userdata('user_id');
        $this->user_admin_model->saveInstituteOfferdCourse($data);
        redirect("user_admin_controller/showInsSkills");
    }
} 
```

## 看法：

```
<form name="form" method="post" action="tambah">
<input type="checkbox" name="skill[]" value="PHP" >PHP</input
<input type="checkbox" name="skill[]" value="VB.NET" >VB.NET</input
<input type="checkbox" name="skill[]" value="C#" >C#</input
<input type="submit" value="Submit" />
</form> 
```

我想显示如下站点课程的价值。
[http://www.yet5.com/training-institute/yet5/5955/coimbatore/mazenet-gandhipuram-at-gandhipuram.html](http://www.yet5.com/training-institute/yet5/5955/coimbatore/mazenet-gandhipuram-at-gandhipuram.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:52:10.670

它是“必需的”，而不是“需要”（在控制器中）。尝试测试您的 form_validation 函数。尝试完全删除 form_validation 并查看它是否有效。

另外，请不要将逗号分隔的值保存在数据库列中。创建一个新表，其中一行包含 Skill_id 和 user_id（因此，如果用户有 3 个技能，则该表将包含 3 行）。

# php - 通过创建另一个对象返回对另一个对象的引用（令人困惑）

> ID：14406231
> 
> 赞同：0
> 
> 时间：2013-01-18T19:29:35.513
> 
> 标签：php, object

我被称为一个班级`SQL_Connection`。此类的目的是返回`$con`对调用变量的引用 ()。示例：`$conRef = new SQL_Connection();`Where`$conRef`将是 的引用，`$con`而不是 的实例`SQL_Connection()`，当然如果这是可能的话。

最后的构造函数确实如此`return $con;`，我想这可能是问题：/

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:32:55.937

使用`new`意味着您知道要构造的对象的*确切类型。*您要使用的模式是工厂方法，而不是构造函数。例如：

```
class SQL_Connection
{
    public static function create()
    {
        $con = new Other_SQL_Connection();
        return $con;
    }
} 
```

然后`SQL_Connection::create()`在其他地方调用以获取对象引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T19:35:28.670

因为我认为构造方法不能返回任何东西

# xaml - 如何重置 Xaml SwapChainBackgroundPanel 的焦点

> ID：14406243
> 
> 赞同：0
> 
> 时间：2013-01-18T19:30:18.330
> 
> 标签：xaml, focus, windows-runtime

我有一个页面，它实际上是 SwapChainBackgroundPanel，我用它来渲染 SharpDx（本质上是一个 C# DirectX 包装器）。对于我的输入，我处理面板的 Pointer* 和 Key* 事件。问题是面板的角落还有一个按钮（后退按钮），并且由于某种原因该按钮获得了默认焦点。因此，当我按下空格键时，它正在调用按钮的单击事件。

为防止这种情况发生，用户必须单击背景（面板）才能将焦点放回其上。问题是我找不到以编程方式将焦点移回面板并离开按钮的方法。只有按钮具有设置焦点的任何功能，这对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:23:06.180

您可以将焦点移到另一个不可见的按钮：

**XAML**

```
<Grid>
    <Button
        x:Name="b"
        Content="click"
        Click="B_OnClick" />
    <Button
        x:Name="b2"
        Opacity="0.005" />
</Grid> 
```

**C＃**

```
 private async void B_OnClick(object sender, RoutedEventArgs e)
    {
        b.Focus(FocusState.Programmatic);
        await Task.Delay(100);
        b2.Focus(FocusState.Programmatic);
    } 
```

我的其他答案似乎在这里不起作用，但我会保留它，因为它将来可能会起作用，我相信它应该适用于 Windows Phone。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:58:33.783

你可以试试打电话

```
button.IsEnabled = false;
button.IsEnabled = true; 
```

从按钮失去焦点。

# html - 如何垂直对齐文本与其行？（垂直对齐不起作用）

> ID：14406245
> 
> 赞同：0
> 
> 时间：2013-01-18T19:30:25.920
> 
> 标签：html, css

这是我正在谈论的示例，您需要放大才能看到问题 [http://jsfiddle.net/54NEa/](http://jsfiddle.net/54NEa/1/)

```
<div id="top">SomeText</div>
<div id="middle">SomeText</div>
<div id="bottom">SomeText</div>

div{
    display: inline-block;
    background-color: red;
    font-family: Lucida Sans Unicode,Verdana,Arial,Helvetica,sans-serif;
    font-size: 10px;
    line-height: 10px;
}
div.top {vertical-align:top;}
div.middle {vertical-align:middle;}
div.bottom {vertical-align:bottom} 
```

该行是 10px，但文本没有完全填充它，它有额外的填充 - 在 FF 中，填充在下方，在 Chrome 中，它在上方，无论垂直对齐属性如何。这会随着字体的不同而有所不同，但它从来没有真正完全填满它的行高，它会“摆动”。无论浏览器如何，任何想法如何将该字体固定在相对于其行的一个位置？我制作了一个小的 css 按钮，我需要确保我的行的高度正好是 10px，文本的高度也正好是 10px，所以它看起来总是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:32:08.560

您必须调整行高以适合元素。

HTML：

```
 <div id="top"><span>SomeText</span></div>

div{
    height:30px;
    display: inline-block;
    background-color: red;
    font: 10px Lucida Sans Unicode,Verdana,Arial,Helvetica,sans-serif;
}

span{
    line-height:30px;
} 
```

这是一个小提琴：http: [//jsfiddle.net/54NEa/1/](http://jsfiddle.net/54NEa/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:32:19.497

`vertical-align`仅适用于内联元素。尝试使用 a`span`而不是 a `div`，或`display:inline`在您的 div 上设置。

**编辑**

您还需要设置容器的`font-size`和`line-height`。在这种情况下，我使用了身体。我还将显示更改为`inline`，因为您似乎不需要`inline-block`，并使用无单位`line-height`

[http://jsfiddle.net/78fxj/](http://jsfiddle.net/78fxj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:35:23.200

您还可以将 div 的显示设置为 table-cell。这是一个很好的解决方案，但有时它还有其他含义。

```
<div id="top">SomeText</div>
<div id="middle">SomeText</div>
<div id="bottom">SomeText</div>

div{
    display: **table-cell**;
    background-color: red;
    font: 10px/10px Lucida Sans Unicode,Verdana,Arial,Helvetica,sans-serif;
}
div.top {vertical-align:top;}
div.middle {vertical-align:middle;}
div.bottom {vertical-align:bottom} 
```

# android - 如何在 Android 中为整个应用程序创建单例对象

> ID：14406250
> 
> 赞同：0
> 
> 时间：2013-01-18T19:30:41.873
> 
> 标签：android, android-layout, android-intent, android-widget

我正在编写代码以使用单例对象创建应用程序。什么时候开播，

1.  问题是当我启动我的应用程序时。它将创建一个对象，当我按下后退按钮时，应用程序将关闭。当我长按主页按钮并再次启动应用程序时，它将创建另一个对象。

2.  当我再次通过单击图标启动应用程序时，它将生成另一个对象。

但是当我通过按主页按钮从应用程序中出来并再次通过长按主页按钮并启动应用程序进入应用程序时，它不会创建新对象。

活动代码：

```
package com.gmmusic.test;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class GmmusicActivity extends Activity
{
    /** Called when the activity is first created. */
    private static String TAG = "GmmusicActivity";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.i(TAG, "Created instance#"+ MyMainApplication.getInstance().count());
    }
} 
```

单例代码：

```
package com.gmmusic.test;

import android.app.Application;
import android.util.Log;

public class MyMainApplication extends Application {

    private static String TAG = "MyMainApplication";

    private static MyMainApplication singleton;

    public static MyMainApplication getInstance() {
        return singleton;
    }

    private int count = 0;
    private int count1=0;
    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();

        singleton = this;
        Log.i(TAG, "Singleton created");
        System.out.println("count1 >> "+count1);
        count1++;
    }

    public int count() {
        return count++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:22:31.450

处理这种行为的最佳方法是通过自定义活动的午餐模式属性它的清单文件。根据您的应用程序，您可能会将其设置为 SingleTop 或 SingleInstance。查看文档：[Doc](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:29:26.347

您可以创建一个实现 Serializeable 的类：

```
class Person implements Serializeable
    String name;
    public Person(String name){
        this.name = name;
    }
} 
```

如果你有其他意图，你可以传递它，如果你关闭这个活动，你可以像这样得到结果

```
Person p = new Person("Oliver");
Intent i = new Intent()
i.setClass(this, NextActivity.class);
i.putExtra("person", p);
startActivityForResult(i,1) // 1 is ResultCode 
```

然后在另一个Activity中，就可以得到这个对象，例如在onCreate中：

```
protected void onCreate(Bundle savedInstanceState) {
     Log.d(TAG, "onCreate");
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_next);
     Person p = (Person) getIntent().getSerializableExtra("person");
     // The same string as in first_activity
} 
```

毕竟，你可以对同一个对象做任何你想做的事情，如果你想回到第一个活动，请阅读*[从活动中获取结果](https://developer.android.com/training/basics/intents/result.html)*。

# ruby - 为什么在 ruby 构造函数/初始化方法中调用 super 两次？

> ID：14406251
> 
> 赞同：0
> 
> 时间：2013-01-18T19:30:48.447
> 
> 标签：ruby, dalli

我正在阅读[Dalli 的](https://github.com/mperham/dalli)源代码，我发现了这个......

```
module ActionDispatch
  module Session
    class DalliStore < AbstractStore
      def initialize(app, options = {})
        # Support old :expires option
        options[:expire_after] ||= options[:expires]

        super

        @default_options = { :namespace => 'rack:session' }.merge(@default_options)

        @pool = options[:cache] || begin
          Dalli::Client.new(
              @default_options[:memcache_server], @default_options)
        end
        @namespace = @default_options[:namespace]

        @raise_errors = !!@default_options[:raise_errors]

        super
      end

      .... rest of class definition 
```

令我印象深刻的是 super 在初始化期间被调用了两次。我以前从未见过这种红宝石成语。你为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:20:02.597

所以我去 repo 寻找`AbstractStore`这是 rails 动作包的一部分。没有初始化，所以没有行为可以保证这样的使用。`AbstractStore`虽然也继承自`Rack::Session::Abstract::ID`. 果然，现在我们有了它的实质：

```
def initialize(app, options={})
  @app = app
  @default_options = self.class::DEFAULT_OPTIONS.merge(options)
  @key = @default_options.delete(:key)
  @cookie_only = @default_options.delete(:cookie_only)
  initialize_sid
end 
```

看起来第一个初始化是设置这些实例变量。然后使用并添加它们，这并不奇怪：虽然最后一个超级......我会大胆猜测并说它不会做任何有用的事情并且是多余的。我查看了从 AbstractStore 继承的核心类，它们都没有使用多次调用`super`. 也许是一个错误[1]。在 github 上打开一个问题，看看它会导致什么。

[1][这似乎有些相关](https://rails.lighthouseapp.com/projects/8994/tickets/3094-patch-ignorable-codescall-super-twice-in-memcachestore)

**编辑：**我忽略了另一件事，超级在最后一行，因此是返回值。这实际上可能是一个更好的解释。

# android - ArrayAdapter 更新但未在 listView 中显示

> ID：14406254
> 
> 赞同：0
> 
> 时间：2013-01-18T19:30:51.207
> 
> 标签：android, android-listview

我对`ArrayAdapter`和有疑问`listView`。我正在将字符串添加到列表中`ArrayAdapter`，正如调试器向我展示的那样，它可以正常工作，但是我看不到任何添加到我的`listView`. 我尝试用它做的事情（基于类似的问题）：+将其添加到内部`runOnUiThread`，但这没有帮助或者我没有正确使用它+使视图无效+再次设置适配器+添加`values`和使用`adapter.notifyDataSetChanged（）我不知道我该怎么做才能让它工作

如果有帮助，这是我的代码：

```
public class RunnerApp extends Activity {

        private ListView listView;
    private ArrayList<String> values;
    private ArrayAdapter<String> adapter;
    private Intent newTable;
    private String newName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_runner_app);
        listView = (ListView) findViewById(R.id.mylist);
        values = new ArrayList<String>();
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values);
       listView.setAdapter(adapter);
        adapter.add("x");
        adapter.notifyDataSetChanged();
    }

    //handled by android:onClick in layout file
    public void addTable(View v){
        newTable = new Intent(this, AddTable.class);
        startActivityForResult(newTable, 1);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data){
        super.onActivityResult(requestCode, resultCode, data);
        if(requestCode == 1 && resultCode == Activity.RESULT_OK && data != null){
            data.getData();
            Log.d("add", "got intent");
            newName = data.getStringExtra("com.example.runnerapp.NAME");
            Log.d("add", "string " + newName);
            Runnable run = new Runnable(){
                public void run(){
                    if(newName != null) {
                        values.add(newName);
                        adapter.notifyDataSetChanged();
                    }
                }
            };
            runOnUiThread(run);
        }
    }

    @Override
    public void onResume(){
        super.onResume();
        setContentView(R.layout.activity_runner_app);
    }
}

public class AddTable extends Activity {

    public final static String EXTRA_NAME = "com.example.runnerapp.NAME";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_add_table);
    }

    //handled by android:onClick in layout file
    public void addThisTable(View v) {
        Intent addTable = new Intent();
        EditText editText = (EditText) findViewById(R.id.addTableField);
        String name = editText.getText().toString();
        addTable.putExtra(EXTRA_NAME, name);
        setResult(Activity.RESULT_OK, addTable);
        this.finish();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:16:27.310

您应该尝试`setContentView(...)`从头开始删除，`onResume()`因为它会从头开始完全重置您的视图。它真的应该只需要`onCreate()`

# php - 加载 .php 文件需要太多时间？

> ID：14406255
> 
> 赞同：0
> 
> 时间：2013-01-18T19:30:53.007
> 
> 标签：php, webserver

在我一直从事的项目中，我有`temp2.php`在页面加载时获取的文件。当我刷新页面时，`temp2.php`似乎没有被服务器获取。我`Firebug`在 NET 上进行了检查，发现正在加载`temp2.php`文件。这就是为什么我的图表（正在处理`temp2.php`）没有显示的原因。我对这个错误/异常感到困惑，因为这不会一直发生。我也没有注意到这到底是什么时候发生的。这是因为互联网连接速度慢还是其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:00:52.457

可能是存储它的网络服务器存在性能问题，或者是共享主机上的站点太多。您的代码也可能有问题，导致处理脚本中发生的任何事情时出现瓶颈。一些代码会有所帮助。

（想我会发布作为答案来得分......）

# java - webapp 上的网络质量指示器

> ID：14406256
> 
> 赞同：5
> 
> 时间：2013-01-18T19:30:55.893
> 
> 标签：java, javascript, html, networking

有没有一种方法可以在 Web 应用程序上指示客户端当前的网络质量（某种条形，类似于手机上的 n/w 质量条）？

我们的一个处理数据传输的网络应用程序由于与客户的网络问题而出现大多数传输失败，而客户显然对此一无所知。客户不断报告故障，而实际问题在于他们的 n/w 连接，我正在寻找一种方法，可以在他们使用应用程序时向他们指示相同（在我的 Web 应用程序中）。

我知道还有其他工具可以进行调查，但外行用户设置没有它们（至少我们的用户）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:46:41.830

一种方法是使用[`window.navigator.onLine`](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.onLine)例如：

```
if (navigator.onLine) {
  alert('online')
} else {
  alert('offline');
} 
```

或捕获更改：

```
window.addEventListener("offline", function(e) {
  alert("offline");
}, false);

window.addEventListener("online", function(e) {
  alert("online");
}, false); 
```

您可以取特定时间间隔的平均值，并开发一种算法来将连通性量化为 10%、50% 等......

您也可以只设置 AJAX 轮询并观察超时，但请注意不要过多地增加流量：

```
$.ajax({
  type: "GET",
  url: "yourserver.com",
  success: function(data){
    alert("Connection active!")
  }
  error: function(XMLHttpRequest, textStatus, errorThrown) {
    if(textStatus == 'timeout') {
       alert('Connection seems dead!');
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T01:43:08.427

根据您传输数据的方式、一次传输多少以及传输频率，这里有一些假设。

我将首先假设您正在发出 XHR 请求，因为这确实是可靠地衡量我们需要的指标的唯一方法。

至于多少，我希望你不是一次发送兆字节。这使得测量响应时间变得更加困难（因为网络条件在大请求的整个生命周期内可能会发生变化）。此外，如果用户使用某种代理，超大的请求可能会被代理抛出。假设小于 1 MB。

最后，如果您每 5 分钟只发送一次数据，我们显然不会有太多的性能测量数据可供使用。

话虽如此，我会通过测量每个请求的总请求时间并计算失败次数来解决这个问题。就像是：

```
var recentResults = [], history = 90000;
function sendData() {
    var start = Date.now(); // remember when we started this request
    $.post('/some/api', { some: 'data' }, function(r) {
        recentResults.push({start:start, end:Date.now() - start}); // record how long it took (ms)
    }).fail(function() {
        recentResults.push({start:start, end:null}); // record a failure
    });
}

setInterval(function() {
    var now = Date.now();
    if (recentResults.length > 0) while (now - recentResults[0].start > history) {
        recentResults.shift(); // prune old data
    }

    var sum;
    for (var i = 0, r; i < recentResults.length; r=recentResults[i++]) {
        if (r.end == null) sum += 50000;
        else sum += r.end;
    }

    var movingAverage = sum / recentResults.length;

    // use movingAverage to calculate the overall connection quality

}, 1000); 
```

您将不得不根据反复试验调整我在这里使用的几个值。

*   `history`是将请求保持在移动平均值中的时间长度（以毫秒为单位）。如果您经常提出请求，则可以将其关闭。如果您每分钟只发出一个请求，则可能需要增加它。
*   我任意将完全失败指定为相当于 50 秒的响应时间。发生故障的原因有很多，包括暂时的网络问题（例如 WiFi 信号差）和服务器错误（HTTP 500）。您可能希望根据实际场景中的测试来调整它。
*   我每秒对响应时间数据进行采样。您可以更频繁地执行此操作以获得更灵敏的信号计，但您显然会消耗更多的 CPU 周期来执行此操作。如果您的应用程序在移动设备上运行，请务必小心。

您必须进行实际测试以确定“好”与“差”的平均响应时间是什么样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:00:49.693

看看这个[http://www.igvita.com/2012/04/04/measuring-site-speed-with-navigation-timing/](http://www.igvita.com/2012/04/04/measuring-site-speed-with-navigation-timing/)

这提供了一个关于新的 W3c 导航计时接口的想法。Chrome/ffox/IE 已经有了

# php - 将 php 参数传递给 javascript 调用

> ID：14406258
> 
> 赞同：0
> 
> 时间：2013-01-18T19:31:00.647
> 
> 标签：php, javascript, jquery, nginx, rewrite

我有一种使用来自 js 的哈希的重定向，如下所示： [http://example.com/#info?id=1234](http://example.com/#info?id=1234) 它在后台加载主站点的同时将信息数据加载到fancybox。

现在我正在尝试编写一个 nginx 重写，所以我可以这样调用： [http](http://example.com/info/1234) ://example.com/info/1234 -> index.php?info=1234

有人可以指出我该怎么做，使用 php 上的信息将“1234”发送到 ajax 调用以尝试达到相同的结果吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:54:05.060

您可以使用自定义 404 页面从路径中解析出最后一个目录，确定它是否是有效的 id 并重定向。PHP 可以在没有任何 JS 的情况下做到这一点。我确信有充分的理由不这样做，但它应该在紧要关头起作用。

# javascript - Javascript ajax 竞争条件

> ID：14406259
> 
> 赞同：0
> 
> 时间：2013-01-18T19:31:01.947
> 
> 标签：javascript, race-condition

**当我通过 ajax 将下面的 html 存储到 div 中**时遇到问题

 **```
<script type="text/javascript" src="site.com/file.js"></script>
<script type="text/javascript">
//use file.js object, get an exception because it doesn't exist 
```

我通过在本地托管它来修复它（`/myjs/file.js`）。然而，这感觉就像一个黑客。我如何确保我先加载它然后执行？似乎 jquery.ready 不是解决方案，因为在我 ajax html 之前 dom 已经准备好。我该如何正确等待？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:34:03.247

你提到`jQuery.ready`，所以我猜你使用 jQuery。如果是这样，不要将`<script>`标签放在 , 的内容中`div`，使用[`jQuery.getScript`](http://api.jquery.com/jQuery.getScript/)，它会在脚本加载时给你一个回调。

如果由于某种原因您不能这样做，您可以进行轮询，例如在您想要使用以下内容的代码中`file.js`：

```
function doSomethingWithFileJS() {
    if (typeof anObjectProvidedByFileJS === "undefined") {
        setTimeout(doSomethingWithFileJS, 50);
        return;
    }

    // Here, you know file.js has been loaded
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:34:12.020

您应该能够通过执行以下操作来确保：

```
<script type="text/javascript" src="site.com/file.js" onload="myFunc()"></script>
<script type="text/javascript">
function myFunc() {
   //use file.js object here
}
</script> 
```

其中`onload`属性指定加载脚本后要执行的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:36:09.700

不是最好的方法，但你可以这样做：

```
function checkIfLoaded(){
   if(typeof somefunctioninfilejs == 'function'){
     // load other script here
   }
   else {
     // not loaded queue up a check
     setTimeout(checkIfLoaded, 300);
   }
} 
```**

# objective-c - 滚动时，tableviewcell 中的按钮未按预期显示/隐藏

> ID：14406260
> 
> 赞同：0
> 
> 时间：2013-01-18T19:31:07.567
> 
> 标签：objective-c, cocoa-touch, uitableview, ios6

我在情节提要中有一个 tableviewcell 设置为 Custom 的 tableview。我在每个单元格的更右侧有 1 个按钮（单元格中的按钮）。

加载每个单元格时，根据条件，此按钮应该显示或隐藏。但它没有按预期工作。当我向下滚动并再次向上滚动时，以前隐藏（条件正确）的按钮现在正在显示。

我对单元格中的图像执行相同的操作，即使在滚动时也可以正确加载图像。

这是我的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cell1";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    UIButton *btnCall = (UIButton *) [cell viewWithTag:5];
    UIImageView *imgIcon = (UIImageView *) [cell viewWithTag:6];
    [btnCall setHidden:TRUE];

    if (... some condition ...) {
        [btnCall setHidden:false];
        [imgIcon setImage:[UIImage imageNamed:@"icon1.png"]]; // load correctly
    } else {
        [btnCall setHidden:true]; // doesn't seem to work consistently.
        [imgIcon setImage:[UIImage imageNamed:@"icon2.png"]]; // load correctly
    }

    return cell;
} 
```

在我的故事板中，原型单元格中的这个按钮也设置为隐藏。

我已经阅读了很多关于这个问题的问题和答案。

*   一个是[UITableViewCell 中的 UIButton 子视图没有按预期隐藏](https://stackoverflow.com/questions/13951439/uibutton-subview-in-uitableviewcell-doesnt-hide-as-expected)。但我的已经是一个自定义单元格（在情节提要中设置）。
*   另一个：[iPhone TableViewCell - 添加和删除带有条件的按钮](https://stackoverflow.com/questions/6383305/iphone-tableviewcell-adding-and-removing-button-with-condition)。但这需要在我不使用的“if (cell == nil)”块中创建按钮。因为如果我使用，我的所有其他东西（标签、通过情节提要添加到自定义单元格的图像）都不会显示。而且我真的想使用情节提要，而不是通过“if（cell == nil）”块以编程方式添加项目。
*   和其他人......但到目前为止都没有工作。

我还有其他的东西，比如每个单元格中的图像。并且图像加载正确，即使向上/向下滚动也是如此。

有人可以帮忙吗？非常感谢！

****编辑1——问题解决了！！！****

我将我的单元格子类化，以便我的重置可以更合适。这是它的完成方式（我用图像替换了上面的按钮 - 将其保留为按钮也应该可以正常工作）：

```
 @implementation PSCellMyTableViewCell

    @synthesize imgView1 = _imgView1, imgView2 = _imgView2;

    - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
    {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        self.imgView1.image = nil;
        self.imgView2.image = nil;
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

cellForRowAtIndexPath 的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cell1";
    PSCellMyTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (... some condition ...) {
        [cell.imgView1 setImage:[UIImage imageNamed:@"icon-1.png"]];// no longer using tag
        [cell.imgView2 setImage:[UIImage imageNamed:@"icon-12.png"]]; // no longer using tag

    } else {
        [cell.imgView1 setImage:[UIImage imageNamed:@"icon-2.png"]];// no tag
        [cell.imgView2 setImage:[UIImage imageNamed:@"icon-22.png"]]; // no tag
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:43:15.437

我已经设法使用这种方法解决了我自己的问题：[http](http://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells) ://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells 。显然，我没有从所有的阅读/谷歌搜索中尝试足够的努力（我猜太累了）。所以我决定尝试根据提到的参考对我的单元格进行子类化。有用！（解决方案发布在我的原始帖子中）。

# android - 在 sqlite 中添加查询时间变量

> ID：14406263
> 
> 赞同：1
> 
> 时间：2013-01-18T19:31:14.227
> 
> 标签：android, sql, sqlite

我正在编译一个原始语句，我需要将先前的查询结果分配给一个变量并将其用作下一个查询的 id。不幸的是，我不记得如何在 SQL 中做到这一点。

这就是我得到的

```
01-18 18:22:22.443: E/AndroidRuntime(5801): android.database.sqlite.SQLiteException: near "AS": syntax error (code 1): , while compiling: SELECT _id,date,title,description, (SELECT title FROM discipline WHERE _id=gdid ) AS discipline_title FROM alert WHERE _id=(SELECT eaid FROM alert_to_discipline) AS gdid 
```

我怀疑 AS gdid 是使其成为变量的错误方法。我该怎么做？

这是格式更好的查询

```
SELECT _id,date,title,description,
    (SELECT title FROM discipline WHERE _id=gdid ) AS discipline_title
        FROM alert WHERE _id=(SELECT eaid FROM alert_to_discipline) AS gdid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:40:18.567

我也有过这样的经历。您不能在 SQLite 中使用临时变量。最好的方法是运行查询并将其分配给 java 声明的变量。然后将其传递给第二个查询。

# sql-server - 如何应用 STUFF() 以逗号分隔

> ID：14406266
> 
> 赞同：3
> 
> 时间：2013-01-18T19:31:21.290
> 
> 标签：sql-server, tsql

我读到这个：http: [//blog.sqlauthority.com/2012/09/14/sql-server-grouping-by-multiple-columns-to-single-column-as-a-string/](http://blog.sqlauthority.com/2012/09/14/sql-server-grouping-by-multiple-columns-to-single-column-as-a-string/)

我可以将此应用于我的一个查询：

```
SELECT t.TicketID, STUFF(
(SELECT ',' + tt.Tag
FROM TicketTag tt
WHERE tt.TicketID = t.TicketID
FOR XML PATH('')),1,1,'') AS CSV
FROM Ticket AS t
GROUP BY t.TicketID
GO 
```

这会导致如下所示：

```
TicketID  CSV
1         tsql, sqlserver, c++
2         hi, bye, no 
```

现在这行得通，因为我能够直接加入一个表......现在我想`STUFF()`再次申请以显示分配给它的 TicketID。

显示被分配工单的人的查询如下：

```
SELECT  l.Login
FROM Ticket t1
LEFT JOIN
    TicketAssignments tass
ON
    tass.TicketID=t1.TicketID
LEFT JOIN
    Login l 
ON
    l.LoginID = tass.LoginID 
```

但是，我缺少两个关键的东西：

1）我需要像在第一个示例中一样显示 TicketID（按 ticketID 分组） 2）我需要 STUFF() 登录名，以便它以逗号分隔

请坚持使用 STUFF() 我知道有时它可能不是最好的方法，但我只是想在我的代码中使用它。

## 编辑

3张桌子

```
Ticket 
------
TicketID 
```

* * *

```
TicketAssignments
-----------------
TicketID
LoginID 
```

* * *

```
Login
------
LoginID 
```

* * *

```
Sample data:

Ticket
------
1
2
3

TicketAssignments
------------------
1   25
1   26
2   25
3   26
3   27

Login
-----
25 Joe
26 Jon
27 Jason 
```

我想要的结果：

```
TicketID  Assignment
--------------------
    1, "Joe, Jon"
    2, "Joe"
    3, "Jon", "Jason" 
```

也就是说，Joe 和 Jon 被分配了工单 1，Joe 被分配了工单 2 Jon 和 Jason 被分配到工单 3

所以 STUFF() 只是将它们放在每个ticketid 的一行中。我知道这效率不高，我现在不要求优化......

如前所述，我必须获得票证分配的查询是：

SELECT l.Login FROM Ticket t1 LEFT JOIN TicketAssignments tass ON tass.TicketID=t1.TicketID LEFT JOIN Login l ON l.LoginID = tass.LoginID

**但是，我缺少 2 个关键的东西：1）我需要显示 TicketID，就像我在第一个示例中一样（按 t​​icketID 分组）2）我需要 STUFF() 登录名，以便它以逗号分隔**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T19:50:36.690

正如 Nathan 解释的那样，`STUFF()`实际上并没有执行任何连接，它只是删除了前导逗号（这更好，恕我直言，然后必须通过计算输出字符串的长度并连接来删除尾随逗号）：

```
SELECT t.TicketID, Assignment = STUFF(
(
  SELECT N', "' + l.Name + '"'
    FROM dbo.Logins AS l
    INNER JOIN dbo.TicketAssignments AS ta
      ON l.LoginID = ta.LoginID
    WHERE ta.TicketID = t.TicketID
    FOR XML PATH(''), 
    TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 2, N'')
FROM dbo.Tickets AS t
ORDER BY t.TicketID; 
```

输出：

| 票号 | 任务 |
| --- | --- |
| 1 | “乔”、“乔恩” |
| 2 | “乔” |
| 3 | “乔恩”、“杰森” |

*   示例[db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2019&fiddle=065a9cd02f4a8a966d2df4fe257f808f)

请注意，在 SQL Server 2017 及更高版本上，您可以使用`STRING_AGG()`，这会变得更容易一些：

```
SELECT t.TicketID, 
  Assignment = STRING_AGG(CONCAT('"', l.Name, '"'), ', ')
FROM dbo.Tickets AS t
INNER JOIN dbo.TicketAssignments AS ta
  ON t.TicketID = ta.TicketID
INNER JOIN dbo.Logins AS l
  ON ta.LoginID = l.LoginID
GROUP BY t.TicketID; 
```

*   更新[了 db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2019&fiddle=5b0d4614fc786b8f59f94938c530e030)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:51:39.857

`STUFF`只是删除了由于您连接标签的方式（或您请求的 login.name）而产生的前导逗号。该`FOR XML`子句实际上是在做连接的工作。

看这个例子：

```
declare @Ticket table (TicketId int);
insert into @Ticket
    select 1 union all select 2 union all select 3;

declare @TicketAssignments table (TicketId int, LoginId int)
insert into @TicketAssignments
    select 1,25 union all
    select 1,26 union all
    select 2,25 union all
    select 3,26 union all
    select 3,27;

declare @Login table (LoginId int, Name varchar(10));
insert into @Login
    select 25, 'Joe' union all
    select 26, 'Jon' union all
    select 27, 'Jason';

select  ticketId,
        p.n,
        stuff(p.n, 1, 1, '')
from    @Ticket t
cross
apply   (   select  ',' + l.Name
            from    @TicketAssignments ta
            join    @Login l on ta.LoginId = l.LoginId
            where   ta.TicketId = t.TicketId
            for xml path('')
        )p(n) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-01T05:25:58.560

以下示例显示了如何在两列上应用填充函数。我有 3 个按层次顺序排列的表。Job->storejob-> StorejobAssignment。层次结构中的表与外键相关联。表 Job 的主键 JobNo_pk 将作为外键出现在存储作业表中，即 Jobno_fk。但是 JObno_fk 在 StoreJobAssignment 表中不可用，因为它是分层顺序的。

```
Select Top 10 j.JobNo_pk,
Stuff((select ','+ convert(varchar,StoreJobNo_pk) from Storejob
  where j.JobNo_PK=StoreJob.JobNo_FK  for XML path ('') ),1,1,'') as StorejobNO_pk,

 Stuff((select ','+ convert(varchar,StoreJobAssignmentNo_pk) from StorejobAssignment inner join StoreJob on StoreJob.StoreJobNo_PK=StoreJobAssignment.StoreJobNo_FK
  where StoreJob.Storejobno_pk=StoreJobAssignment.StorejobNo_fk for XML path ('') ),1,1,'') as Storejobassignmnet_pk   

  from job j
  inner join storejob    on j.jobno_pk=StoreJob.jobno_fk 
   inner join StorejobAssignment   on StoreJob.StoreJobno_pk=StoreJobAssignment.Storejobno_fk 
   group by Jobno_pk 
```

[单击此处查看上述查询的输出](https://i.stack.imgur.com/hojUM.png)

# grails - Grails 中的连接错误

> ID：14406275
> 
> 赞同：0
> 
> 时间：2013-01-18T19:32:01.960
> 
> 标签：grails

运行 grail App 时出现以下错误。我已经尝试了各种方法，但错误并没有消失。

任何人都可以请帮忙。

```
`Server access Error: Connection refused url=http://grails.org/plugins/grails-mysql-connector-java/tags/RELEASE_5_1_16/mysql-connector-java-5.1.16.pom` 
```

**我的配置.groovy**

// 用于搜索合并到主配置中的配置文件的位置 // 配置文件可以是 Java 属性文件或 ConfigSlurper 脚本

```
// grails.config.locations = [ "classpath:${appName}-config.properties",
//                             "classpath:${appName}-config.groovy",
//                             "file:${userHome}/.grails/${appName}-config.properties",
//                             "file:${userHome}/.grails/${appName}-config.groovy"]

// if (System.properties["${appName}.config.location"]) 
   {
//   
     grails.config.locations << "file:" + System.properties["${appName}.config.location"]

// }
grails.project.groupId = appName // change this to alter the default package name and Maven publishing destination
grails.mime.file.extensions = true // enables the parsing of file extensions from URLs into the request format
grails.mime.use.accept.header = false
grails.mime.types = [ html: ['text/html','application/xhtml+xml'],
                      xml: ['text/xml', 'application/xml'],
                      text: 'text/plain',
                      js: 'text/javascript',
                      rss: 'application/rss+xml',
                      atom: 'application/atom+xml',
                      css: 'text/css',
                      csv: 'text/csv',
                      all: '*/*',
                      json: ['application/json','text/json'],
                      form: 'application/x-www-form-urlencoded',
                      multipartForm: 'multipart/form-data'
                    ]

// URL Mapping Cache Max Size, defaults to 5000
//grails.urlmapping.cache.maxsize = 1000

// What URL patterns should be processed by the resources plugin
grails.resources.adhoc.patterns = ['/images/*', '/css/*', '/js/*', '/plugins/*']

// The default codec used to encode data with ${}
grails.views.default.codec = "none" // none, html, base64
grails.views.gsp.encoding = "UTF-8"
grails.converters.encoding = "UTF-8"
// enable Sitemesh preprocessing of GSP pages
grails.views.gsp.sitemesh.preprocess = true
// scaffolding templates configuration
grails.scaffolding.templates.domainSuffix = 'Instance'

// Set to false to use the new Grails 1.2 JSONBuilder in the render method
grails.json.legacy.builder = false
// enabled native2ascii conversion of i18n properties files
grails.enable.native2ascii = true
// packages to include in Spring bean scanning
grails.spring.bean.packages = []
// whether to disable processing of multi part requests
grails.web.disable.multipart=false

// request parameters to mask when logging exceptions
grails.exceptionresolver.params.exclude = ['password']

// enable query caching by default
grails.hibernate.cache.queries = true

// set per-environment serverURL stem for creating absolute links
environments {
    development {
        grails.logging.jul.usebridge = true
    }
    production {
        grails.logging.jul.usebridge = false
        // TODO: grails.serverURL = "http://www.changeme.com"
    }
}

// log4j configuration
log4j = {
    // Example of changing the log pattern for the default console
    // appender:
    //
    //appenders {
    //    console name:'stdout', layout:pattern(conversionPattern: '%c{2} %m%n')
    //}

    error  'org.codehaus.groovy.grails.web.servlet',  //  controllers
           'org.codehaus.groovy.grails.web.pages', //  GSP
           'org.codehaus.groovy.grails.web.sitemesh', //  layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping', // URL mapping
           'org.codehaus.groovy.grails.commons', // core / classloading
           'org.codehaus.groovy.grails.plugins', // plugins
           'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'
}

// Added by the Mahout Recommender plugin:
mahout.recommender.mode = 'config'  // 'input', 'config' or 'class'
mahout.recommender.hasPreference = true
mahout.recommender.selected = 1 // 1\. user-based, 2\. item-based or 3\. slope-one
mahout.recommender.similarity = 'PearsonCorrelation' //'PearsonCorrelation', 'EuclideanDistance', 'LogLikelihood' or 'TanimotoCoefficient'
mahout.recommender.withWeighting = false
mahout.recommender.neighborhood = 2
mahout.recommender.data.model = 'mysql'
mahout.recommender.preference.table = 'preference'
mahout.recommender.preference.valueColumn = 'pref_value'

mahout.recommender.hasPreference = false
mahout.recommender.data.file = 'ratings.dat'
export GRAILS_OPTS="-XX:MaxPermSize=256m -Xmx1024M -server" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:57:09.540

请检查您的`"grails-app/conf/BuildConfig.groovy"`

我想你可能会不小心编辑它。看起来 msql-connector 放置在错误的位置。

```
dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.
    runtime 'mysql:mysql-connector-java:5.1.16'  // RIGHT PLACE
}

plugins {
    runtime ":hibernate:$grailsVersion"
    runtime ":jquery:1.7.1"
    runtime ":resources:1.1.5"

    build ":tomcat:$grailsVersion"
    //runtime ':mysql-connector-java:5.1.16' // WRONG PLACE, IF YOU SAW HERE.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:06:19.193

我发现我需要为 grails 设置代理

# telerik - Telerik RadGrid - 如何在插入时设置默认数据？

> ID：14406276
> 
> 赞同：2
> 
> 时间：2013-01-18T19:32:06.213
> 
> 标签：telerik, radgrid

当我单击添加记录按钮时，我希望我的列之一具有默认值。我如何在后面的代码中做到这一点？这是一个动态的日期，并且可以一直更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:33:32.900

如果列不是 a ，您可以使用列的属性`GridTemplateColumn`指定默认值，如下所示：`DefaultInsertValue`

```
<telerik:GridBoundColumn DefaultInsertValue="12/21/2012" DataType="System.DateTime" DataField="Column1" UniqueName="Column1"></telerik:GridBoundColumn> 
```

否则，如果是`GridTemplateColumn`，请查看以下 Telerik 文章：

[使用 InPlace 和 EditForms 模式插入值](http://www.telerik.com/help/aspnet-ajax/grid-inserting-values-inplace-and-editforms.html)

**更新**：

您还可以使用`ItemCommand`代码隐藏中的方法指定默认列值：

```
Protected Sub RadGrid1_ItemCommand(ByVal source As Object, ByVal e As Telerik.Web.UI.GridCommandEventArgs) Handles RadGrid1.ItemCommand
    If (e.CommandName = RadGrid.InitInsertCommandName) Then
        'cancel the default operation
        e.Canceled = True

        'Prepare an IDictionary with the predefined values
        Dim newValues As System.Collections.Specialized.ListDictionary = New System.Collections.Specialized.ListDictionary()
        newValues("Column1") = New DateTime(2013, 1, 22)
        newValues("Column2") = "hello"
        newValues("Column3") = Nothing

        'Insert the item and rebind
        e.Item.OwnerTableView.InsertItem(newValues)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:36:16.593

您可以拦截 ItemDataBound 事件，并将内容呈现给控制。

```
<telerik:RadGrid ID="RadGrid1" AutoGenerateColumns="false" 
    AllowSorting="True" runat="server" OnNeedDataSource="RadGrid1_NeedDataSource" 
    OnItemDataBound="RadGrid1_ItemDataBound">
    <MasterTableView DataKeyNames="ID" CommandItemDisplay="Top">
        <Columns>
            <telerik:GridBoundColumn DataField="ID" HeaderText="ID" 
                UniqueName="ID" />
            <telerik:GridBoundColumn DataField="Name" HeaderText="Name" 
                UniqueName="Name" />
        </Columns>
        <EditFormSettings ColumnNumber="1" EditFormType="Template">
            <FormTemplate>
                Name:<asp:TextBox runat="server" ID="NameTextBox"/>
            </FormTemplate>
        </EditFormSettings>
    </MasterTableView>
</telerik:RadGrid>

public class Customer
{
    public int ID { get; set; }
    public string Name { get; set; }
}

protected void RadGrid1_NeedDataSource(object sender, 
    GridNeedDataSourceEventArgs e)
{
    RadGrid1.DataSource = new List<Customer>
        {
            new Customer {ID = 1, Name = "John"},
            new Customer {ID = 2, Name = "Marry"},
            new Customer {ID = 3, Name = "Eric"}
        };
}

protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridEditFormItem && e.Item.IsInEditMode)
    {
        var item = e.Item as GridEditFormItem;

        var nameTextBox = item.FindControl("NameTextBox") as TextBox;

        // Insert mode
        if (e.Item.OwnerTableView.IsItemInserted)
        {
            nameTextBox.Text = "Please enter name";
        }
        else // Edit mode
        {

        }
    } 
```

![在此处输入图像描述](../Images/b7194341ff5886816d3e5acb8d175597.png)

# java - ignored Security annotations in spring mvc

> ID：14406281
> 
> 赞同：5
> 
> 时间：2013-01-18T19:32:13.393
> 
> 标签：java, spring, security, spring-mvc, annotations

I'm trying to configure spring secure annotations, I already managed to set spring security configuration in xml(configured by intercept-url elements), but now I'm want to use security annotations in my beans. But secured annotation is totaly ignored when try to access secured controller method without logging. Here is my controller bean:

```
package com.bill.controllers;

import org.springframework.security.access.annotation.Secured;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class MainController {

    @Secured({"ROLE_USER"})
    @RequestMapping("/index.html")
    public String main(ModelMap model) {
        model.addAttribute("test", "test");

        return "main";
    }
} 
```

and login controller:

```
package com.bill.controllers;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class LoginController {

    @RequestMapping("/login")
    public String login(ModelMap model) {
        return "login";
    }
} 
```

and configurations: web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>tests</display-name>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-servlet.xml,
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <context:component-scan base-package="com.bill" />

    <context:annotation-config />

    <!-- validation configuration -->
    <bean id="validator"
        class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />

    <mvc:annotation-driven validator="validator" />

    <!-- view configuration for thymeleaf -->
    <bean id="templateResolver"
        class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
        <property name="prefix" value="/WEB-INF/templates/" />
        <property name="suffix" value=".html" />
        <property name="templateMode" value="HTML5" />
        <property name="characterEncoding" value="UTF-8" />
        <property name="cacheable" value="false" />
    </bean>

    <bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
        <property name="templateResolver" ref="templateResolver" />
    </bean>

    <bean class="org.thymeleaf.spring3.view.ThymeleafViewResolver">
        <property name="templateEngine" ref="templateEngine" />
        <property name="characterEncoding" value="UTF-8" />
    </bean>

    <!-- messages configuration -->
    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages/messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>

    <!-- internalization configuration -->
    <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="language" />
    </bean>

    <bean
        class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping">
        <property name="interceptors">
            <list>
                <ref bean="localeChangeInterceptor" />
            </list>
        </property>
    </bean>

    <!-- datasource configuration for hibernate 4 -->
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/bill" />
        <property name="username" value="root" />
        <property name="password" value="****" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="com.bill" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

and spring-security.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http auto-config="true">
        <form-login login-page="/login" default-target-url="/index.html" authentication-failure-url="/login" />
        <logout logout-success-url="/index.html" />
        <anonymous granted-authority="ROLE_GUEST" username="Guest"/>
    </http>

    <authentication-manager>
        <authentication-provider>
            <password-encoder hash="sha-256"/>
            <jdbc-user-service data-source-ref="dataSource"
               users-by-username-query="
                  select LOGIN, PASSWORD, 'true' 
                  from USERS where LOGIN=?" 
               authorities-by-username-query="
                  select LOGIN, ROLE from USERS
                  where LOGIN=?" 
            />
        </authentication-provider>
    </authentication-manager>

    <global-method-security secured-annotations="enabled" />

</beans:beans> 
```

If it will be needed I can also paste here my pom.xml, but I think that this is poblem with my configuration(because this example without security works fine, and with security configured in xml it also works). I will be realy glad if someone can tell me where is my mistake.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T19:45:16.987

You have global method security enabled in the `spring-security.xml` which is processed by the root web application context.

The controllers reside inside the dispatcher servlet context and are unaffected by the bean postprocessors of the root web app context.

So you have to declare `<security:global-method-security secured-annotations="enabled" />` inside the dispatcher servlet context or use the web level spring security tags instead(which seems to be natural for the web pages).

See [Difference between applicationContext.xml and spring-servlet.xml in Spring Framework](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)

Technically the bean post processors(and therefore AOP tools too) work on per container basis - therefore the things like `@Secured` or `@Transactional` will only work in the same application context where the respective annotations - `<security:global-method-security ../>` / `<tx:annotation-driven/>` have been applied.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:46:51.530

Are you sure your spring-security.xml is being loaded, and if it is, that it's being loaded in the right place. Have a look at [this](http://static.springsource.org/spring-security/site/faq/faq.html#faq-method-security-in-web-context) for some hints.

# ant - 蚂蚁 javac 类路径引用不工作？

> ID：14406288
> 
> 赞同：1
> 
> 时间：2013-01-18T19:32:40.043
> 
> 标签：ant, classpath, javac, apache-commons-io

尽管所需的 jar 在类路径中，但`javac`我的目标中的任务失败了。`compile`谁能帮我弄清楚为什么会这样？

下面的错误是由于`IOUtils.lineIterator()`无法识别引起的。但是，**commons-io-1.3.1.jar**位于构建路径（在 中`${app.lib.dir}`）。因此，构建失败很奇怪。

```
<target name="compile">
    <mkdir dir="${classes.dir}" />
    <javac destdir="${classes.dir}" debug="true" classpathref="dependency.path"
        excludes="/../security/**" >
        <src path="${java.src.dir}" />
    </javac>
</target>

<path id="dependency.path">
    <fileset dir="${spring.lib.dir}" includes="*.jar" />
    <fileset dir="${spring.depends.dir}" includes="**/*.jar" />
    <fileset dir="${app.lib.dir}" includes="*.jar" />
    <fileset dir="${tomcat.dir}/.." includes="**/*.jar" />
</path> 
```

### 执行

```
ant -f build-dev.xml compile

Buildfile: C:\..\build-dev.xml compile:
    [mkdir] Created dir: C:\..\classes
    [javac] Compiling 348 source files to C:\..\classes
    [javac] C:\..\UploadUtil.java:132: cannot find symbol
    [javac] symbol  : method lineIterator(java.io.InputStream,java.lang.String)
    [javac] location: class org.apache.commons.io.IOUtils
    [javac]             Iterator<String> it = IOUtils.lineIterator(is, charSet);
    [javac]                                          ^
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] 1 error

BUILD FAILED
C:\..\build-dev.xml:54: Compile failed; see the compiler error output for details.

Total time: 11 seconds 
```

### 尝试的方法

1.  **令人惊讶的是， Eclipse**正在毫无问题地构建项目。我在项目构建路径上有相同的 jar 集。我也有从编译中排除的相同源目录。
2.  尝试在源文件夹上使用**javac**可执行文件，但不确定如何在源代码目录结构上使用 javac。
3.  我确定我拥有的 jar 版本有这个类`IOUtils`，因为 Eclipse 在 jar 的内容中显示了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T21:29:47.787

The most likely explanation is that the jar containing the class is not on the classpath.

I double-checked Maven Central, just in case there was a jar called "commons-io-1.3.1" that does not contain this class, but sadly no:

*   [http://search.maven.org/#search|ga|1|a%3A%22commons-io%22%20AND%20NOT%20fc%3A%22org.apache.commons.io.IOUtils%22](http://search.maven.org/#search|ga|1|a%3A%22commons-io%22%20AND%20NOT%20fc%3A%22org.apache.commons.io.IOUtils%22)

So I'd suggest is that you add the following diagnostic target into your build so that you can confirm that the jar is in fact on the classpath:

```
<target name="diagnostics">
    <pathconvert property="classpathProp" refid="dependency.path"/>

    <echo>Classpath is ${classpathProp}</echo>
</target> 
```

# wordpress - 尝试显示来自自定义帖子类型的帖子，特定的“自定义类别”

> ID：14406290
> 
> 赞同：0
> 
> 时间：2013-01-18T19:32:43.303
> 
> 标签：wordpress, custom-post-type

我一直在寻找并且无法找到可行的解决方案。这是示例：

我创建了一个名为“广告”的自定义帖子类型。目标是能够在广告下创建帖子并将它们显示在所需的模板中。我能够做到这一点，但我创建了 3 个自定义类别并且无法将其用于过滤。

我的代码是：

```
<?php query_posts('post_type=ads&posts_per_page=4&tag=home-above&orderby=rand'); ?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

      <?php if ( function_exists('has_post_thumbnail') && has_post_thumbnail($post->ID) ) {
      $thumbnail = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), full ); ?>
        <img class="has-tip tip-top" data-width="210" title="<?php the_field('hover_text'); ?>" src="<?php echo $thumbnail[0]; ?>" />

      <?php }else{ ?> 
      <img src="/DetroitSounds/wp-content/uploads/2013/01/youradhere.jpg" />
      <?php } ?> 

<?php endwhile; ?>  

<?php endif; wp_reset_query();?> 
```

自定义类别名称是“首页上方”（slug=home-page-above）、“首页下方”（slug=home=page-below）和内页（slug=inner-pages）

在上面的代码中，我有一个标签，它实际上达到了我想要的效果，但恐怕后端可用性对客户端来说并不那么直接。

如果我什至正确使用该分类法，我也有点困惑？

任何想法都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T13:59:11.847

```
$args = array( 'post_type' => 'ads',
               'posts_per_page'=>4,
               'tax_query' => array(
                      array(
                      'taxonomy' => 'type_taxonomy_name_here', //i don't know your taxonomy name
                      'field' => 'slug',
                      'terms' => 'home-page-above,home-page-below,inner-pages'
                      )
                )
            );
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
  the_title();
  echo '<div class="entry-content">';
  the_content();
  echo '</div>';
endwhile; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:14:08.257

尝试使用`category_name=your-category-slug`，将您的第一行代码重写为：

```
<?php query_posts('post_type=ads&posts_per_page=4&category_name=home-page-above&orderby=rand'); ?> 
```

# rad - Websphere 门户启动很慢

> ID：14406294
> 
> 赞同：1
> 
> 时间：2013-01-18T19:33:14.160
> 
> 标签：rad, websphere-portal

当我通过 RAD 启动 WebSphere 门户应用程序时，我看到有大量的 portlet 像这样启动：

```
[18/01/13 14:26:09:980 EST] 0000000f ApplicationMg A   WSVR0217I: Stopping application: PA_Banner_Ad
[18/01/13 14:26:10:637 EST] 0000000f ApplicationMg A   WSVR0220I: Application stopped: PA_Banner_Ad
[18/01/13 14:26:10:652 EST] 0000000f ApplicationMg A   WSVR0217I: Stopping application: PA_Bookmarks
[18/01/13 14:26:11:215 EST] 0000000f ApplicationMg A   WSVR0220I: Application stopped: PA_Bookmarks
[18/01/13 14:26:11:215 EST] 0000000f ApplicationMg A   WSVR0217I: Stopping application: PA_SQL_Query 
```

现在有很多这样的portlet。有没有办法加载最少数量的默认 portlet？因为这使得门户服务器启动非常非常缓慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:39:12.080

假设您使用的是 Portal Server 6.1 或更高版本，请启用 portlet 的延迟加载。

[http://www-01.ibm.com/support/docview.wss?uid=swg27015437](http://www-01.ibm.com/support/docview.wss?uid=swg27015437)

# html - 文本溢出在水平框方向的框显示中不起作用

> ID：14406297
> 
> 赞同：1
> 
> 时间：2013-01-18T19:33:33.817
> 
> 标签：html, css, qooxdoo

我正在使用框显示，但我无法让我的文本正确呈现省略号。现在文本刚刚溢出包含元素。

HTML：

```
<div class="outer hbox">
  <div class="hbox left-container">
    <div class="label no-wrap box-centered">Col1</div>
  </div>
  <h1 class="label no-wrap">really long title really long title really long title really long title really long title really long title really long title really long title really long title</h1>
</div> 
```

CSS：

```
.outer {
  width: 400px;
  border: 1px solid black;
}
.hbox {
  -moz-box-orient: horizontal;
  -webkit-box-orient: horizontal;
  box-orient: horizontal;
  display: -moz-box;
  display: -webkit-box;
  display: box;
}
.left-container {
  border: 1px solid red;
}
.no-wrap {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
h1 {
  border: 1px solid green;
} 
```

这里的例子：http: [//jsfiddle.net/bmclachlin/Sq7Xa/](http://jsfiddle.net/bmclachlin/Sq7Xa/)

我尝试将 h1 包装在 div 中，将 h1 更改为 div 等，但似乎没有任何效果。我知道我可能遗漏了一些明显的东西，有什么想法吗？

注意：此代码是从一个名为 qooxdoo 的 JavaScript 库生成的，因此我无法对结构进行太多更改。如果我愿意，我可以将 h1 更改为不同的元素以及将 h1 包装在 div 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:00:42.100

该`h1`标签被视为一行很长的文本，因为`no-wrap`这就是它需要很长时间的原因，因为文本和溢出只是无法应用于它。考虑以下示例：

```
.no-wrap {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  width: 100%;
} 
```

[http://jsfiddle.net/Sq7Xa/13/](http://jsfiddle.net/Sq7Xa/13/)

所以`h1`被迫占用父容器的全宽并溢出

UPD：更接近一点的解决方法是定义两个元素的实际宽度，对您的代码的小入侵可能看起来像[http://jsfiddle.net/Sq7Xa/15/](http://jsfiddle.net/Sq7Xa/15/)，请注意仍然有 2px 不一致，因为周围的边界这`h1`

如果您真的需要保留该边界，则有几种解决方法：

1.  一个使用`box-sizing: border-box;`属性到`h1` [http://caniuse.com/css3-boxsizing](http://caniuse.com/css3-boxsizing)

    ```
    h1 {
      box-sizing: border-box;
      border: 1px solid green;
      width: 80%;
    } 
    ```

2.  另一个需要另一个`div`进入`h1`示例代码[http://jsfiddle.net/Sq7Xa/18/](http://jsfiddle.net/Sq7Xa/18/)

但是，我觉得修改代码可以让事情变得更简单，尤其是`display: box;`在我看来，这有点额外。

# python - Python urlparse——提取没有子域的域名

> ID：14406300
> 
> 赞同：55
> 
> 时间：2013-01-18T19:33:44.840
> 
> 标签：python, parsing, url, urlparse

需要一种使用 Python urlparse 从 url 中提取没有子域的域名的方法。

例如，我想`"google.com"`从完整的 url中提取`"http://www.google.com"`.

我能想到的最接近的`urlparse`是`netloc`属性，但它包括子域，在本例中为`www.google.com`.

我知道可以编写一些自定义字符串操作来将 www.google.com 转换为 google.com，但我想避免在此任务中手动进行字符串转换或正则表达式。（这样做的原因是我对 url 形成规则不够熟悉，因此我确信我可以考虑编写自定义解析函数所需的每个边缘情况。）

或者，如果`urlparse`不能做我需要的，有没有人知道任何其他 Python url 解析库？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-18T19:38:35.500

您可能想查看[tldextract](http://pypi.python.org/pypi/tldextract)，这是一个旨在执行此类操作的库。

它使用公共后缀列表来尝试根据已知 gTLD 进行适当的拆分，但请注意，这只是一个蛮力列表，没有什么特别之处，因此它可能会过时（尽管希望它经过精心策划，以免）。

```
>>> import tldextract
>>> tldextract.extract('http://forums.news.cnn.com/')
ExtractResult(subdomain='forums.news', domain='cnn', suffix='com') 
```

所以在你的情况下：

```
>>> extracted = tldextract.extract('http://www.google.com')
>>> "{}.{}".format(extracted.domain, extracted.suffix)
"google.com" 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-03-06T14:59:52.120

这是一个更新，基于对更新答案的赏金请求

首先使用[tld](https://pypi.python.org/pypi/tld)包。包装说明：

> 从给定的 URL 中提取顶级域 (TLD)。TLD 名称列表取自 Mozilla [http://mxr.mozilla.org/mozilla/source/netwerk/dns/src/effective_tld_names.dat?raw=1](http://mxr.mozilla.org/mozilla/source/netwerk/dns/src/effective_tld_names.dat?raw=1)

```
from tld import get_tld
from tld.utils import update_tld_names
update_tld_names()

print get_tld("http://www.google.co.uk")
print get_tld("http://zap.co.it")
print get_tld("http://google.com")
print get_tld("http://mail.google.com")
print get_tld("http://mail.google.co.uk")
print get_tld("http://google.co.uk") 
```

这输出

```
google.co.uk
zap.co.it
google.com
google.com
google.co.uk
google.co.uk 
```

`co.uk`请注意，它通过离开and正确处理国家级 TLD `co.it`，但正确删除了`www`and的`mail`子域`.com`和`.co.uk`

`update_tld_names()`脚本开头的调用用于将 tld 名称与 Mozilla 的最新版本更新/同步。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-18T19:36:27.747

这**不是 URL 的标准分解**。

您不能依赖`www.`存在或可选。在很多情况下它不会。

因此，如果您确实想假设只有最后两个组件是相关的（这也不适用于英国，例如`www.google.co.uk`），那么您可以执行`split('.')[-2:]`.

或者，实际上更不容易出错，去掉`www.`前缀。

但无论哪种方式**，您都不能假设它`www.`是可选的，因为它不会每次都起作用！**

以下是域的常用后缀列表。您可以尝试保留后缀+一个组件。

[https://mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw=1](https://mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw=1)

但是您打算如何处理例如`first.last.name`域？假设所有具有相同姓氏的用户都是同一家公司？最初，您只能在那里获得三级域。到目前为止，您显然也可以达到第二级。所以因为`.name`没有一般规则。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-24T21:33:02.060

对于域名操作，你也可以使用[Dnspy](https://pypi.python.org/pypi/dnspy)（免责声明：我写了这个库）

它使用 Mozilla 公共后缀列表的新副本帮助提取各个级别的域（和域标签）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-18T19:37:10.803

使用 tldexport 工作正常，但在解析 blogspot.com 子域并造成混乱时显然有问题。如果您想继续使用该库，请确保实现 if 条件或其他内容以防止在子域中返回空字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-21T09:57:14.247

```
from tld import get_tld
from tld.utils import update_tld_names
update_tld_names()

result=get_tld('http://www.google.com')
print 'https://'+result 
```

输入：[http ://www.google.com](http://www.google.com)

结果：google.com

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-29T10:56:05.710

有多个 Python 模块将（曾经是 Mozilla）公共后缀列表封装在一个库中，其中*一些不需要*输入为 URL。尽管该问题专门询问 URL 规范化，但我的要求是只处理域名，因此我为此提供了一个切题的答案。

[publicsuffix2](https://pypi.python.org/pypi/publicsuffix2/)相对于[publicsuffixlist](https://pypi.python.org/pypi/publicsuffixlist)或[publicsuffix](https://pypi.python.org/pypi/publicsuffix)的相对优点尚不清楚，但它们似乎都提供了基本功能。

公共后缀2：

```
>>> import publicsuffix  # sic
>>> publicsuffix.PublicSuffixList().get_public_suffix('www.google.co.uk')
u'google.co.uk' 
```

*   据说对包装更友好的`publicsuffix`.

公共后缀列表：

```
>>> import publicsuffixlist
>>> publicsuffixlist.PublicSuffixList().privatesuffix('www.google.co.uk')
'google.co.uk' 
```

*   广告`idna`支持，但是我没有测试过。

公共后缀：

```
>>> import publicsuffix
>>> publicsuffix.PublicSuffixList(publicsuffix.fetch()).get_public_suffix('www.google.co.uk')
'google.co.uk' 
```

*   自己处理更新和缓存下载文件的要求有点复杂。

# php - 如何让按钮在 jQuery 确认对话框上执行操作？

> ID：14406309
> 
> 赞同：1
> 
> 时间：2013-01-18T19:34:20.540
> 
> 标签：php, javascript, jquery, ajax

我有一个 jQuery 对话框，当您单击图像时，对话框会打开，您必须确认是否要删除。是还是不是。

我用三个文件做到这一点：

主文件 index.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Aircrafts</title>
    <link rel="stylesheet" type="text/css" href="../../../lib/css/style.css">
    <link rel="stylesheet" href="../../../lib/css/flick/jquery.ui.all.css">
    <script src="../../../lib/js/jquery.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.button.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.core.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.widget.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.mouse.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.button.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.draggable.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.position.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.resizable.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.dialog.js"></script>

<script>
$(function() {
    $( "#loadingdialog" ).dialog({
        autoOpen: false,
        width: 300,
        height: 65
    });

    $("#loadingdialog").dialog('widget').find(".ui-dialog-titlebar").hide();
    $("#loadingdialog").dialog('widget').find(".ui-resizable-se").hide();

    $( "#confirmdialog" ).dialog({
        autoOpen: false
    });

    $("#confirmdialog").dialog('widget').find(".ui-resizable-se").hide();

});

    if (window.XMLHttpRequest)
            {
            ajax=new XMLHttpRequest();
            }
        else
            {
            ajax=new ActiveXObject("Microsoft.XMLHTTP");
            }

    function confirmdelete(str){

    var loading = $("#loadingdialog").dialog('open');
    var confirm = $("#confirmdialog");
        confirm.load("./confirm_dialog.php?icao="+str, function(){
        loading.dialog('close');
        confirm.dialog('open');
        $('#yes').blur();
        });
    }

    function remove(str){

    var loading = $("#loadingdialog").dialog('open');
        confirm.load("./delete_aircarft.php?icao="+str, function(){
        refreshTable(function(){loading.dialog('close');});
        refreshTable(function(){$('#result').fadeIn(); document.getElementById('result').innerHTML=ajax.responseText;});
        setTimeout(function() { $('#result').fadeOut() }, 5000);

        });
    }

    function close(){

    $("#confirmdialog").dialog('close');

    }
</script>
</head>
<body>

<div id="result"></div></br>

<div id="loadingdialog"><center><p><img src="../../../lib/images/loading.gif"></center></p></div>

<div id="confirmdialog"></div>

<img src="../../../lib/images/cross.png" onclick="confirmdelete('B737')">

</body>
</html> 
```

确认对话框.php：

```
<script>
    $("#yes")
        .button()
        .click(function(event) {
    });

    $("#no")
        .button()
        .click(function(event) {
    });
</script>

<h2><font face="century Gothic">Are you sure?</font><h2><hr size="1">

&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
<tr><td><input id="yes" type="submit" value="Yes" onclick="remove('<?php echo $_GET["icao"]; ?>')"></td>&nbsp&nbsp&nbsp<td><input id="no" type="submit" value="No" onclick="close()"/></td></tr> 
```

还有delete_aircraft.php（目前这个文件只显示了获得的ICAO，将来我会准备删除它，但这不是问题）：

```
<?php echo $_GET["icao"]; ?> 
```

问题是当对话框打开时，您可以单击是或否，但如果您单击是或否，则没有任何操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:41:21.163

为什么不使用 Dialog 的内置按钮？

```
$( "#confirmdialog" ).dialog({
  autoOpen: false,
  buttons: {
    "Yes": function() {
      // YOUR ACTION HERE //
      $( this ).dialog( "close" );
    },
    "No": function() {
      $( this ).dialog( "close" );
    }
  }
}); 
```

编辑：更新您的`remove`函数以加载带有按钮和所需变量的对话框：无需加载外部 PHP 文件。此外，在创建对话框时设置动画 - 不需要所有这些额外的处理程序。

```
$( "#confirmdialog" ).dialog({
  autoOpen: false,
  show: "fade",  // Fade In
  hide: "fade"   // Fade Out
});

function remove(str){

  // Set the button action.  str is available here
  $( "#confirmdialog" ).dialog("option", "buttons", {
    "Yes": function() {
      // YOUR ACTION HERE //
      // str has the value of your "icao" variable
      $( this ).dialog( "close" );
    },
    "No": function() {
      $( this ).dialog( "close" );
    }
  });

  // Open the dialog
  $( "#confirmdialog" ).dialog("open");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T19:37:48.947

那是因为你没有放任何东西在那里..

```
$("#yes")
        .button()
        .click(function(event) {
    // do something
    });

$("#no")
        .button()
        .click(function(event) {
    // do something
    }); 
```

# restify - Restify 使用 AJAX 进行跨域基本身份验证

> ID：14406311
> 
> 赞同：0
> 
> 时间：2013-01-18T19:34:27.797
> 
> 标签：restify

从我的 REST 客户端调用时，HTTP Basic Auth 运行良好。但是，使用 API 的应用程序是使用 Backbone 构建的。

我们尝试覆盖主干同步以传递授权标头，但它在选项调用中失败——据我所知，`preflight`调用是为了查看是否允许跨源调用。重要的是要注意这不是 Backbone 独有的，任何修改了标头的跨域 AJAX 调用都会发生这种情况。

**回复截图：** [http ://cl.ly/image/0j2v240A0p2f](http://cl.ly/image/0j2v240A0p2f)

我还尝试修改与 Restify 捆绑在一起的 fullResponse (full_response.js) 插件（通过添加`Authorization`到`ALLOW_HEADERS`数组。

```
var ALLOW_HEADERS = [
    'Accept',
    'Accept-Version',
    'Content-Length',
    'Content-MD5',
    'Content-Type',
    'Date',
    'X-Api-Version',
    'X-Response-Time',
    'Authorization'
].join(', '); 
```

这是能够投入生产之前剩下的为数不多的事情之一。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:57:54.687

最新版本的 restify 原生实现了 CORS ...因此您可以添加类似的内容（使用 CORS 时似乎需要 fullReponse：

```
shoorkServer.use(restify.CORS());
shoorkServer.use(restify.fullResponse()); 
```

如果您使用 Backbone 或 jquery，您应该像这样修改服务器端：

```
shoorkServer.use(restify.CORS( {credentials: true} ));
shoorkServer.use(restify.fullResponse()); 
```

并使用带有 jquery 的凭据：

```
$.ajaxSetup({
    xhrFields: {
       withCredentials: true
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:45:54.180

您需要在您的服务器上启用跨源资源共享：http: [//enable-cors.org/](http://enable-cors.org/)

# breeze - 如何在 Breeze 元数据中包含只读计算属性？

> ID：14406313
> 
> 赞同：2
> 
> 时间：2013-01-18T19:34:32.080
> 
> 标签：breeze

我有一个模型类，它有一个名为生日的属性，它是一个`DateTime?`属性。我还有一个只读的计算列，如下所示：

```
public int? RacingAge
{
  get
  {
    if (!Birthday.HasValue)
      return null;
    else
      return DateTime.Today.Year - Birthday.Value.Year;
   }
 } 
```

当我运行查询时，此值会在返回的 Json 中返回，但该属性不是元数据的一部分，因此不会被设置。

我需要做什么才能强制它包含在元数据中？

# powershell - 如何通过属性名称获取对象的属性值？

> ID：14406315
> 
> 赞同：168
> 
> 时间：2013-01-18T19:34:43.320
> 
> 标签：powershell

在 PowerShell 中，如何通过指定对象的名称（字符串）来获取对象的属性值？我想要以下内容：

```
$obj = get-something

# View the object's members:
$obj | gm

# I could retrieve a property by doing so:
write-host $obj.SomeProp

# But for many purposes, I would really want to:
write-host $obj | Get-PropertyByName "SomeProp" 
```

PowerShell中是否有类似于“Get-PropertyByName”的东西？

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-01-18T19:39:05.693

当然

```
write-host ($obj | Select -ExpandProperty "SomeProp") 
```

或者就此而言：

```
$obj."SomeProp" 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2014-03-17T22:02:29.780

扩展@aquinas：

```
Get-something | select -ExpandProperty PropertyName 
```

或者

```
Get-something | select -expand PropertyName 
```

或者

```
Get-something | select -exp PropertyName 
```

我为那些可能只是在寻找单行命令来获取一些信息并希望包含一个真实示例的人提出了这些建议。

在通过 PowerShell 管理 Office 365 时，我使用以下示例获取已添加到“BookInPolicy”列表中的所有用户/组：

```
Get-CalendarProcessing conferenceroom@domain.com | Select -expand BookInPolicy 
```

仅使用“Select BookInPolicy”就切断了几个成员，所以感谢您提供此信息！

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-01-15T16:00:09.080

您可以使用 cmdlet 按名称获取**属性**`Select-Object`，并指定您感兴趣的属性名称。请注意，这不仅仅是返回该属性的原始值；而是返回该属性的原始值。相反，你得到的东西仍然像一个对象。

```
[PS]> $property = (Get-Process)[0] | Select-Object -Property Name

[PS]> $property

Name
----
armsvc

[PS]> $property.GetType().FullName
System.Management.Automation.PSCustomObject 
```

为了使用该属性的**值**，即使只有一个属性，您仍然需要确定您所追求的属性：

```
[PS]> $property.Name
armsvc

[PS]> $property -eq "armsvc"
False

[PS]> $property.Name -eq "armsvc"
True

[PS]> $property.Name.GetType().FullName
System.String 
```

根据此处的其他答案，如果要在字符串中使用单个属性，则需要评估表达式（将括号括在其周围）并以美元符号 ($) 为前缀以将表达式动态声明为要插入的变量进入字符串：

```
[PS]> "The first process in the list is: $($property.Name)"
The first process in the list is: armsvc 
```

完全正确，其他人通过推荐cmdlet的`-ExpandProperty`参数来回答这个问题。`Select-Object`这通过返回指定属性的值绕过了一些令人头疼的问题，但是您将希望在不同的场景中使用不同的方法。

> `-ExpandProperty <String>`
> 
> 指定要选择的属性，并指示应尝试扩展该属性
> 
> [https://technet.microsoft.com/en-us/library/hh849895.aspx](https://technet.microsoft.com/en-us/library/hh849895.aspx)

```
[PS]> (Get-Process)[0] | Select-Object -ExpandProperty Name
armsvc 
```

[PowerShell](/questions/tagged/powershell "显示标记为“powershell”的问题") [变量](/questions/tagged/variables "显示标记为“变量”的问题")

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-01-15T14:35:25.613

试试这个 ：

```
$obj = @{
    SomeProp = "Hello"
}

Write-Host "Property Value is $($obj."SomeProp")" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-04-29T01:34:28.577

这是获取对象属性值的另一种方法：

```
write-host $(get-something).SomeProp 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-12T22:14:46.727

```
$com1 = new-object PSobject                                                         #Task1
$com2 = new-object PSobject                                                         #Task1
$com3 = new-object PSobject                                                         #Task1

$com1 | add-member noteproperty -name user -value jindpal                           #Task2
$com1 | add-member noteproperty -name code -value IT01                              #Task2
$com1 | add-member scriptmethod ver {[system.Environment]::oSVersion.Version}       #Task3

$com2 | add-member noteproperty -name user -value singh                             #Task2
$com2 | add-member noteproperty -name code -value IT02                              #Task2
$com2 | add-member scriptmethod ver {[system.Environment]::oSVersion.Version}       #Task3

$com3 | add-member noteproperty -name user -value dhanoa                             #Task2
$com3 | add-member noteproperty -name code -value IT03                               #Task2
$com3 | add-member scriptmethod ver {[system.Environment]::oSVersion.Version}        #Task3

$arr += $com1, $com2, $com3                                                          #Task4

write-host "windows version of computer1 is: "$com1.ver()                            #Task3
write-host "user name of computer1 is: "$com1.user                                   #Task6
write-host "code of computer1 is: "$com1,code                                        #Task5
write-host "windows version of computer2 is: "$com2.ver()                            #Task3
write-host "user name of computer2 is: "$com2.user                                   #Task6
write-host "windows version of computer3 is: "$com3.ver()                            #Task3
write-host "user name of computer3 is: "$com1.user                                   #Task6
write-host "code of computer3 is: "$com3,code                                        #Task5

read-host 
```

# stack - 静态分配内存一次还是动态分配更快？

> ID：14406318
> 
> 赞同：0
> 
> 时间：2013-01-18T19:34:46.097
> 
> 标签：stack, allocation, dynamic-memory-allocation, static-memory-allocation

我是机械工程专业的研究生。我的研究小组有一个用 C++ 编写的内部有限元代码。我注意到向量和数组的大量内存是静态分配的，例如：

在元素.h

```
// A vector to store a finite element residual vector in h file
static Real* sRe 
```

在 Element.C 中

```
if ( ! sIsResAndJacAllocated )
{
    UInt numElemDofs = this->GetNumDofs();
    // Residual storage
    sReXt         = new Real[numElemDofs*numElemDofs];
    sIsResAndJacAllocated = true;
} 
```

以这种方式，向量只为到达此函数的第一个元素分配一次，其余对象只是重复使用该内存空间。

第一个开始开发代码的人比 C++ 更了解 C，这就是为什么很多都是这样编写的。

在组中静态分配这些向量和数组的想法是，只分配一次这些大块内存并重复使用它会更快；与必须为每个有限元素或每次调用函数时（例如使用 alloca）分配相同的数组相比。这是真的？速度差别真的很大吗？

我们正试图就此得出结论，以决定是否应该保留静态内存分配或摆脱它。几个星期以来，我一直在寻找这个问题的答案，但没有运气。希望您的意见有助于得出结论。

谢谢。

埃尔南

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:49:52.823

首先，当使用“静态”这个词时，这会让 C++ 开发人员误以为您是指带有“静态”声明的变量。您的示例不是静态声明数组；它是通过“new”运算符在堆中创建的。我不知道这些数组有多大，但是创建一次存储（静态的，正如你所说的那样），这可能是个好主意。当然，这取决于每次调用函数时必须创建/销毁这些数组多少次（您的替代方案）。当然，在堆上不断创建/销毁对象会产生更多开销。这是否是性能问题很难说，因为我们不知道您的程序还做了什么。如果它花费 90% 的时间做其他处理（文件 i/o、大量计算等），那么也许这种内存分配不会成为一个重要因素。在不了解操作系统、编译器选项等的情况下，您始终可以双向编码并运行性能基准测试。

# javascript - HTMLCollection 和 NodeList

> ID：14406320
> 
> 赞同：0
> 
> 时间：2013-01-18T19:35:02.173
> 
> 标签：javascript

您好，我有一个问题，我试图抓取所有图像，以便循环浏览它们并在下面添加事件处理程序：

```
 addEventListener('dragstart', handleDragStart, false);
  addEventListener('dragenter', handleDragEnter, false);
  addEventListener('dragover', handleDragOver, false);
  addEventListener('dragleave', handleDragLeave, false); 
```

我有点困惑，因为我尝试过 getelementbyid 来获取所有图像通过 AJAX 动态填充的部分区域。现在就 querySelectorAll l() 而言，似乎没有抓住任何东西。我假设我只是用错了。也许它不响应标签。但我尝试使用 getElementsByTagName，它似乎抓住了所有东西并将其放入 HTMLCollection。然而 HTML 集合的长度是 0。是否有使用 Javascript（而不是 jquery）的最佳实践方法来将这些事件处理程序附加到每个 IMG？我在这里迷失了如何抓住然后操纵它们。.length 似乎不起作用，我不习惯 HTMLCollection，这似乎是我得到的。

```
var imagesContainer = document.getElementById("images");

var allImages = document.querySelectorAll('#images img');
console.log(allImages);
console.log(allImages.length);

var allImages2 = imagesContainer.getElementsByTagName("img");
console.log(allImages2);
console.log(allImages2.length); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:35:31.417

我确定 bfavaretto 是正确的。为了检查 dom 是否正在加载，我将 add 事件处理程序移动到一个地方，该处理程序将在 ajax 调用完成以加载图像后执行此操作（在 if 语句中检查 readyState 和 readyStatus）。我之前没有想到这一点，因为我个人误解了 DOM 是如何加载它的 HTMLCollection 和数组长度的，并认为它是在加载完所有内容后加载的。尽管它正确地抓取了所有图像，但没有加载 DOM 来抓取并根据我的理解完全构建长度。

# scala - 使用工厂作为函数文字实例化 scala 类型

> ID：14406321
> 
> 赞同：1
> 
> 时间：2013-01-18T19:35:05.603
> 
> 标签：scala

鉴于以下对先前在此处发布的问题的回答，我将如何更改 fac 函数以采用构造函数参数？

```
class BalanceActor[T <: Actor](val fac: () => T) extends Actor {
  val workers: Int = 10

  private lazy val actors = new Array[T](workers)

  override def start() = {
    for (i <- 0 to (workers - 1)) {
      actors(i) = fac() //use the factory method to instantiate a T
      actors(i).start
    }
    super.start()
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:40:29.823

对于一个`String`论点：

`class BalanceActor[T <: Actor](val fac: String => T) extends Actor ...`

对于一个`A`论点：

`class BalanceActor[A, T <: Actor](val fac: A => T) extends Actor ...`

# windows - bash：在1个脚本文件中同时在不同终端执行多个命令

> ID：14406325
> 
> 赞同：0
> 
> 时间：2013-01-18T19:35:10.170
> 
> 标签：windows, bash, terminal

我有一个 bash 脚本文件，其主要目的是（交叉）编译多个平台的二进制文件。我想要的是在不同的终端同时执行多个命令（所以同时启动）。需要明确的是，它们必须从同一个 (bash) .sh 文件启动（和关闭）。

我试过（就像在命令提示符下测试一样）： gnome-terminal --title "terminal 1" -x bash -c "ssh -t root@192.xyz 'echo 1'"

但没有工作；错误消息：“无法解析参数：无法打开显示：”当然安装了 gnome-terminal。

实际上我在（bash）sh 文件中想要的是：

（在主终端运行）：命令 A；命令 B；命令 C

同时：（在终端2运行）：命令D，命令E；命令 F（然后关闭终端）

同时（在终端3运行）：命令G，命令H；命令 I（然后关闭终端）

当终端 2 和 3 完成并关闭时：执行 .sh 文件的其余部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:47:16.977

您可以使用背景子shell，然后使用`wait`：

```
# A, B, C

(
    # D, E, F
) &

( 
    # G, H, I
) &

wait 
```

请注意，这会将所有输出发送到主脚本的`stdout`. 如果要单独保存子shell 的输出，请为每个子shell 使用`(stuff) > file.log &`或`(stuff) | tee file.log &`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:52:22.883

你的命令很好。它说“无法解析参数：无法打开显示：”的原因是因为没有设置 DISPLAY，所以 gnome-terminal 不知道在哪里打开一个窗口。您是否尝试从 ssh 或从 X 之外启动的 GNU 屏幕会话运行脚本？

如果您是从 ssh 运行的，则可以使用在您使用`ssh -X`ssh 的客户端上打开终端。如果您在屏幕上运行和/或想在框的第一个显示上打开 gnome-terminal，`export DISPLAY=:0`请在脚本的开头。

如果您想在服务器上的另一个显示器上打开它（例如 NX 或 VNC 会话），请在此处手动打开一个终端，`echo $DISPLAY`查看它是哪个显示器编号，然后在脚本中将 DISPLAY 设置为该值。

# java - JRadioButton 选择颜色

> ID：14406329
> 
> 赞同：2
> 
> 时间：2013-01-18T19:35:26.633
> 
> 标签：java, swing, radio-button, awt, jradiobutton

当我的 Java UI 程序中的任何单选按钮被选中时，选择会显示为一个*黑*点。我想把它变成绿色。我正在使用 Java Swing。我遵循了这个[SO Question](https://stackoverflow.com/questions/4607107/change-jcheckbox-jradiobutton-selection-color)的答案，但它对我不起作用。选择时它仍然显示一个黑点。

```
public class OptionFrame extends JFrame {

     public OptionFrame(){
            UIManager.put("RadioButton.focus", new ColorUIResource(Color.GREEN));
            SwingUtilities.updateComponentTreeUI(this);
     }
} 
```

我无法理解为什么上面的代码不起作用。任何建议都受到高度赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:07:19.603

> 我无法理解为什么上面的代码不起作用。

[正如这里](https://stackoverflow.com/a/14086162/230513)所讨论的，外观由外观和感觉相关的 UI 委托控制。代表可以随意渲染点；有些忽略默认值并委托给主机平台组件。没有编写自己的`ButtonUI`，替换`Icon`是下一个最好的事情。此[示例](https://stackoverflow.com/a/6036048/230513)说明了 的选定状态（`JToggleButton`即 的父级）的效果`JRadioButton`。`ColorIcon`，在[这里](https://stackoverflow.com/a/3072979/230513)看到的，在这种情况下也很方便，更多的例子在[这里](https://stackoverflow.com/q/6774987/230513)看到。

# dynamics-crm-2011 - 如何使对实体属性的更改自动导致另一个实体的更改？

> ID：14406331
> 
> 赞同：1
> 
> 时间：2013-01-18T19:35:38.537
> 
> 标签：dynamics-crm-2011, crm

我有一个名为*Events*（父实体）的实体，其中包含以下属性

1.  事件ID
2.  事件开始日期
3.  事件结束日期

*它与另一个名为ChildEvents*的实体具有 1-N 关系，该实体包含以下属性

1.  子事件ID
2.  事件 ID（查找）
3.  EventStartDate（只读）
4.  EventEndDate(只读)

我编写了一个 JavaScript 代码，它在*EventID*更新时自动填充*EventStartDate*和*EventEndDate*。

 *我的问题是这样的：

我有一个`EventID = "A"`with`EventStartDate = "today"`并且`EventEndDate = "tomo"` 这被添加到 a`ChildEventID = "C_A"`并保存。

我回到我的事件实体并将开始日期和结束日期更改`EventID = "A"`为其他内容并保存相同的内容。

现在，当我打开子事件记录时，`"C_A"`我看不到*NewEventStartDate*和*NewEventEndDate*正在自动更新。

我错过了什么吗？我必须为它编写代码吗？因为我认为它会自动更新。

注意：这两个实体都是自定义实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:30:42.970

我理解这一点：您想根据父实体中所做的更改来更新实体的子记录。如果我们假设这一点，您应该使用分布式工作流。[这个链接](http://crm2011distributewf.codeplex.com/)可以帮助你。这是一个直接的解决方案，您可以轻松导入和使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:09:58.687

你想让父母在父母的日期改变时更新它的孩子吗？然后你应该写一个插件（在父实体上）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T22:02:04.297

非常好的问题！您需要记住的是 JavaScript 只管理进程的客户端。这意味着，有点不正确但很容易理解，无论您使用 JS 做什么，都会模拟用户通过自己在 GUI 中导航可能导致的结果。

如果我的问题正确，您希望实体（子实体上的只读字段）中的数据在其他实体（父实体上的开始日期）更新时得到更新。

最强大和最可靠的方法是添加一个对消息*更新*（当然也对消息*create*）做出反应的插件，然后从那里进行神奇的更新。

这种方法的缺点是初学者的门槛可能非常非常陡峭。特别是如果你缺乏 C# 方面的经验，注册步骤/图像，配置和上传程序集等。（我第一次制作插件时，我设法 FUBAR 我们的 CRM 服务器，MVP 花了两天时间让它重新启动并运行。并且十多年来我一直在编写 C# 代码，哈哈。）

好处是一旦你让它工作起来，你几乎可以用 CRM 做任何事情。限制消失了。如果您打算与 CRM 合作，这就是您要走的路。这是一个艰难的方式，但它也是唯一的，严肃的方式，恕我直言。

如果您需要有关插件的指针 - 请查看博客。（当然，我的是最好的，呵呵。）继续问！*

# c# - 在我的示例中，继承发生了什么？而且，c# 中的正确术语是什么？

> ID：14406337
> 
> 赞同：5
> 
> 时间：2013-01-18T19:36:18.957
> 
> 标签：c#, oop

我正在学习 OOP，并且对下面的代码到底发生了什么有疑问。

我有一个经典的`Dog` `Animal`例子。`Dog`继承`Animal`.

```
public class Animal
{
    public string Name { get; set; }

    public virtual string Speak()
    {
        return "Animal Speak";
    }

    public string Hungry()
    {
        return this.Speak();
    }
}

public class Dog : Animal
{
    public override string Speak()
    {
        return "Dog Speak";
    }

    public string Fetch()
    {
        return "Fetch";
    }
} 
```

这两个问题都基于此作业：`Animal a = new Dog();`

1.  当我声明一个`Animal`并将其设置为`Dog`引用时实际发生了什么。有没有具体的术语？
2.  当我打电话`a.Hungry()`时，输出是“狗说话”。如果输出是“Dog Speak”，为什么我不能打电话`a.Fetch()`？这里发生的事情的术语是什么？

任何有关特定主题的帮助和进一步阅读将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:40:58.383

1.  这是一个“上流”。在 C# 中，存在从任何类型到其任何基本类型的隐式转换，因此您无需执行任何操作即可将 a`Dog`视为`Animal`. （感谢 Matt Burland 提醒我这是合适的术语。）
2.  因为变量的类型是`Animal`，因此您只能访问编译器*知道*可以访问的成员`Animal`，即`Speak`and `Hungry`。它不知道`Animal`是 a `Dog`，所以它不能调用`Fetch`。该变量需要是类型`Dog`才能调用`Fetch`它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T19:45:35.360

```
Animal a = new Dog(); 
```

正在上扬。您正在创建一个`Dog`对象并将其分配给父类的变量。这是允许的，但是...

```
a.Fetch(); 
```

不会工作。为什么，因为`Animal`没有一个名为 的方法`Fetch`，而且据编译器所知，`a`可以是 any `Animal`。如果你想打电话`Fetch`，你需要`a`转回一个`Dog`

```
Dog d = (Dog)a;
d.Fetch(); 
```

`a`但是请注意，如果不是 a ，这将导致错误`Dog`，因此通常您首先检查：

```
if (a is Dog) 
{
    Dog d = (Dog)a;
    d.Fetch();
} 
```

你打电话时

```
a.Hungry(); 
```

这是允许的，因为`Animal`有一个`Hungry`方法。`Hungry`调用的方法`Speak`，但由于`a`是 a`Dog`而不是 base `Animal`，它将调用该`Dog.Speak`方法（正如 Servy 在其他地方指出的那样，这是真正的多态性 - 调用特定方法时执行的实际代码的想法将根据实际情况而有所不同对象的类型）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T19:40:00.243

1.  您正在将一个类型的对象存储`Dog`在一个变量中，该变量将接受任何`Animal`. 这被称为[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming) *（实际上不太看Servy的评论）*
2.  您只能通过首先将对象投射到狗来调用 fetch

像这样：

```
Dog dog = (Dog)a;
dog.Fetch(); 
```

否则，据编译器所知，它可能是任何动物，并且并非所有动物都有方法`Fetch`。`InvalidCastError`另请注意，如果它实际上不是一个`Dog`对象，则演员会抛出一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T19:40:27.057

1.  `a`是一个`Animal`引用，它指向一个`Dog`对象。这是多态性的一种形式（亚型多态性）。

2.  你不能调用`a.Fetch`，因为`a`有类型`Animal`并且你的类`Fetch`中没有定义方法。`Animal`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T19:42:09.557

这个词是**多态性**

1.  因为您的动物恰好被实例化为 a `Dog`，它将执行所有`Dog`的方法。两者都有一个方法，`Animal`并且继承自. 的方法覆盖，所以这就是被执行的。`Dog``Speak``Dog``Hungry``Animal``Dog``speak``Animal's`

2.  您不能编写`a.Fetch`的原因是编译器在设计时不知道这一点。

例如

```
Animal a;

if(console.ReadLine() == "Dog")
{
    a = new Dog();
}
else
{
    a = new Animal();
}

a.Fetch(); 
```

在这一点上，当您打电话时，`a.Fetch`您不知道 a 是否是狗

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T19:43:18.123

如果你用狗创建动物，你只创建了一个动物，并且只有动物的属性。这有一个简单的原因。只是一个例子：

```
public class Animal
{
    public string Name { get; set; }

    public virtual string Speak()
    {
        return "Animal Speak";
    }

    public string Hungry()
    {
        return this.Speak();
    }
}

public class Dog : Animal
{
    public override string Speak()
    {
        return "Dog Speak";
    }

    public string Fetch()
    {
        return "Fetch";
    }
}

public class Cat: Animal
{
    public override string Speak()
    {
        return "Cat Speak";
    }

    public string Fetch()
    {
        return "Fetch";
    }
} 
```

所以如果你现在像这样创建一个 Insance：

```
Animal a = new Dog(); 
```

你知道你的动物会说话而且他饿了，这就是你需要知道的一切，你可以打电话，如果你现在改变这样`a.Speak()`，你的动物会返回buf：你也可以打电话，但它会返回别的东西.. . 相同的调用但不同的返回。当然，如果您确定 Animal 确实是 Dog，您可以将其强制转换回 Explicit 实现。`"Dog Speak"``a = new Cat()``a.Speak()`

```
var d= new Dog();
if(a is Dog)
d = a as Dog; 
```

d 现在是一只真正的 Dog，它可以做只有 Dog 才能做的所有事情，但你不能再将 d 指定为 Cat。因为它是狗而不是动物

[为什么 as 而不是 Cast？](http://blogs.msdn.com/b/ericlippert/archive/2009/10/08/what-s-the-difference-between-as-and-cast-operators.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T19:49:40.697

1.  当您声明一个`Animal`并将其设置为`dog`隐式转换时完成
2.  试试这段代码，看看使用`virtual`和不使用的效果。

：

```
public class Animal
{
    public string Name { get; set; }
    public string Speak()
    {
        return "Animal Speak";
    }
    public string Hungry()
    {
        return this.Speak();
    }
}

public class Dog : Animal
{
    public new string Speak()
    {
        return "Dog Speak";
    }
    public string Fetch()
    {
        return "Fetch";
    }
}

static void Main(string[] args)
{
    Animal a = new Dog();
    Console.WriteLine(a.Hungry());   //Animal Speak
    Console.ReadLine();
} 
```

# excel - 多个范围匹配尝试的范围连接中的 Excel VBA 类型不匹配

> ID：14406340
> 
> 赞同：0
> 
> 时间：2013-01-18T19:36:23.337
> 
> 标签：excel, match, vba

我正在尝试使用 Application.match 查找范围 A1:Z1 和 A2:Z2 中的值匹配的列。例如，第一行包含不同的水果名称，第二行包含颜色。所以，假设我正在寻找一个带有蓝色香蕉的列，这样的事情应该可以工作：

```
 mycolumn = Application.Match("Banana" & "Blue", Worksheet("Coloured_Fruit").Range(A1:Z1) & Worksheet("Coloured Fruit").Range(A2:Z2), 0) 
```

为了匹配以下数据表中的蓝色香蕉：

```
 A1:banana B1:apple C1:banana D1:orange
 A2:green  B2:blue  C2:blue   D2:green 
```

这应该返回 C，因为 C 列是代表蓝色香蕉的列。

但我得到类型不匹配。这些范围与进行匹配的代码位于不同的工作表上。当我只尝试匹配一行而不是两行时，这很好用。网络搜索表明上述行应该有效。

我试过在表达式上使用 Evaluate，但这也不起作用。

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:20:55.743

代码中的 MATCH 失败，因为“&”运算符仅适用于 VBA 中的字符串。在 Excel 工作表中，如果“&”作为数组公式的一部分输入，则可以连接范围。

对 MATCH 公式的修改似乎应该在 VBA 中工作，也会返回“类型不匹配”错误。这些包括通过将两个范围分配给单个范围变量 (Range("A1:Z1","A2:Z2")) 或使用 UNION 函数（ Union("A1:Z1","A2:Z2 ") ) 出于同样的目的。用“.Value”限定其中任何一个也无济于事。

以下代码可以解决问题：

```
 Sub matchit()

     Dim mycolumn As Long
     Dim oRng1 As Range, oRng2 As Range

     With ThisWorkbook.Sheets("Coloured_Fruit")

        Set oRng1 = .Range("A1:Z1")
        Set oRng2 = .Range("A2:Z2")

        .Names.Add Name:="nRng1", RefersTo:=oRng1
        .Names.Add Name:="nRng2", RefersTo:=oRng2

        mycolumn = Evaluate("IFERROR(MATCH(1,--(nRng1=""Banana"")*--(nRng2=""Blue""),0),0)")

        .Names("nRng1").Delete
        .Names("nRng2").Delete

     End With

  End Sub 
```

专注于 MATCH 表达式（并去掉 EVALUATE 函数所需的额外双引号），

*   **( nRng1 = "Banana" )**和**( nRng2 = "Blue" )**是命名范围内容和两个目标字符串的数组比较。

    每个都解析为一个布尔数组 {FALSE, FALSE, ..., TRUE, etc.}，在包含目标字符串的每个单元格范围内的相对位置中具有 TRUE。

*   双破折号，即**"--( nRng1 = "Banana" )**将每个布尔数组中的 FALSE 和 TRUE 值强制为零和一。

*   然后将这两个数组相乘**--( nRng1 = "Banana" ) * --( nRng2 = "Blue" )**，生成一个数组，其中“Banana”和“Blue”都存在的位置为 1，并且为零别处。

    请注意，使用这种方法，比较不必仅限于两个。

*   然后使用 MATCH 函数**MATCH( 1, --( nRng1 = "Banana" ) * --( nRng2 = "Blue" ), 0 )**来查找零和一数组中第一个 1 的相对位置.

    MATCH 公式中的最后一个 0 指定匹配是精确匹配。

*   由于如果没有找到匹配项， MATCH 将返回错误，因此 IFERROR 会捕获错误，并返回零。

*   最后，最终结果——匹配的列位置，如果找到一个，否则为 0——分配给**mycolumn**。

由于子例程返回单个值，您可能需要考虑将其重新转换为 VBA 函数。

# c++ - 与时间一起工作

> ID：14406341
> 
> 赞同：1
> 
> 时间：2013-01-18T19:36:24.543
> 
> 标签：c++, visual-c++, time

我开发了一个 C++ 应用程序`Hello`在 23:01:50打印

这是我的代码

```
#include<iostream>
#include<string>
#include <time.h>
#include <windows.h>
using namespace std;
int main ()
{
    time_t start = time (&start);
    cout<<ctime(&start);
    while(1)
    {
        time (&start);
        if( ctime(&start) == "Fri Jan 18 23:01:50 2013\n" )
            cout << "Hello";
        Sleep(500);
        cout << ctime(&start);

    }
} 
```

但输出是：

```
Fri Jan 18 23:01:49 2013
Fri Jan 18 23:01:49 2013
Fri Jan 18 23:01:50 2013
Fri Jan 18 23:01:50 2013
Fri Jan 18 23:01:51 2013
Fri Jan 18 23:01:51 2013 
```

为什么`Hello`不打印？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:40:17.087

在 C++ 中，等号运算符“==”不像您对 char 指针（这是您正在使用的）所期望的那样工作。它正在比较实际上指向内存中不同位置的指针。要比较字符串（这不是检查 BTW 的最佳方法），您需要使用字符串比较函数。

例如：

```
if (strcmp(ctime(&start), "Fri Jan 18 23:01:50 2013\n") == 0)
{
} 
```

有关更多信息，请参阅：[http ://www.cplusplus.com/reference/cstring/strcmp/](http://www.cplusplus.com/reference/cstring/strcmp/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T19:38:15.717

改为`==`改为`strcmp(ctime(...), "Fri Jan 18...") == 0`。您无法比较 c 字符串，`==`因为它比较的是地址而不是值。

```
if( strcmp(ctime(&start), "Fri Jan 18 23:01:50 2013\n") == 0 ) 
```

# c# - 将位图图像转换为字符串格式以通过网络（LAN）发送，反之亦然

> ID：14406342
> 
> 赞同：2
> 
> 时间：2013-01-18T19:36:26.613
> 
> 标签：c#, .net-remoting, remoteobject

我基本上是在 Visual Studio 2010 .NET 4.0 中开发一个软件，在其中我从一台 pc 捕获屏幕截图并通过网络将其发送到另一个。由于我不能直接发送位图，我必须将其转换为字符串。我做了很多互联网搜索，但找不到任何解决方案。:(

我在stackoverflow本身上找到了这段代码。但它不起作用。我试图打印字符串（从图像转换），但程序的行为就像该行不存在一样。我使用了 MessageBox.Show(String); 但甚至没有弹出一个消息框！有人可以帮忙吗？我被困住了！提前谢谢 :) (Y)

```
bitmapString = null;       // Conversion from image to string
MemoryStream memoryStream = new MemoryStream();
bmpScreenshot.Save(memoryStream, ImageFormat.Png);
byte[] bitmapBytes = memoryStream.GetBuffer();
bitmapString = Convert.ToBase64String(bitmapBytes,Base64FormattingOptions.InsertLineBreaks); // Conversion from image to string end

Image img = null;                           //Conversion from string to image
byte[] bitmapBytes = Convert.FromBase64String(rob);
MemoryStream memoryStream = new MemoryStream(bitmapBytes);
img = Image.FromStream(memoryStream);   //Conversion from string to image end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:39:29.443

尝试将其转换为字节数组：

```
public static byte[] ImageToByteArray(Image img)
{
    byte[] byteArray = new byte[0];
    using (MemoryStream stream = new MemoryStream())
    {
        img.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
        stream.Close();

        byteArray = stream.ToArray();
    }
    return byteArray;
} 
```

我相信您可以简单地将 Bitmap 对象转换为 Image 对象。所以`Image img = (Image)myBitmap;`- 然后将它传递给上面的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:41:41.907

您可以直接发送单个字节，但如果您真的想要一个字符串，您可以将其编码为一种名为[base64](http://en.wikipedia.org/wiki/Base64)的格式。这是用于对该格式进行[编码](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)和[解码](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)的 msdn 文档。您可以使用在他的答案中发布的代码@AdamPlocher 将图像转换为字节数组（我 +1'ed 因为他让我免于这样做;））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:41:08.923

为什么它需要是一个字符串？您使用什么方法通过网络发送它？网络服务？直接插座？

不管您如何发送它，最好的方法是将其转换为字节数组，然后通过网络传递该数组

如果您需要一些如何执行此操作的代码，请查看 SO 上的类似问题，例如[使用 C# 通过套接字发送和接收图像](https://stackoverflow.com/questions/749964/sending-and-receiving-an-image-over-sockets-with-c-sharp)

# python - Python日志记录 - 检查日志文件的位置？

> ID：14406347
> 
> 赞同：49
> 
> 时间：2013-01-18T19:36:45.800
> 
> 标签：python, linux, file, logging

知道 Python 日志语句的存储位置的方法是什么？

即如果我这样做：

```
import logging
log = logging.getLogger(__name__)
log.info('Test') 
```

我在哪里可以找到日志文件？另外，当我打电话时：

```
logging.getLogger(__name__) 
```

这是否与记录器的行为/保存方式有关？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-18T19:39:02.117

该`logging`模块使用附加到记录器的处理程序来决定消息最终存储或显示的方式、位置或什至。您也可以`logging`默认配置为写入文件。你真的应该阅读[文档](http://docs.python.org/2/library/logging.html)，但是如果你调用`logging.basicConfig(filename=log_file_name)`where`log_file_name`是你想要写入消息的文件的名称（请注意，你必须在`logging`调用其他任何内容之前执行此操作），然后所有消息都记录到所有记录器（除非稍后会进行一些进一步的重新配置）将被写在那里。请注意记录器设置的级别；如果内存可用，`info`则低于默认日志级别，因此您必须`level=logging.INFO`在参数中包含 以使`basicConfig`您的消息最终出现在文件中。

至于问题的另一部分，`logging.getLogger(some_string)`返回一个`Logger`对象，从根记录器插入到层次结构中的正确位置，名称为`some_string`. 不带参数调用，它返回根记录器。 `__name__`返回当前模块的名称，因此`logging.getLogger(__name__)`返回一个`Logger`名称设置为当前模块名称的对象。这是与 一起使用的常见模式`logging`，因为它使记录器结构反映代码的模块结构，这通常使记录消息在调试时更加有用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-07-11T06:33:51.133

要获取简单文件记录器的日志位置，请尝试

```
logging.getLoggerClass().root.handlers[0].baseFilename 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-11T17:29:41.647

要查找日志文件位置，请尝试`log`在您的环境中的 Python shell 中实例化您的对象并查看以下值：

`log.handlers[0].stream`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-02-15T15:43:54.657

对此有一些很好的答案，但最佳答案对我不起作用，因为我使用的是不同类型的文件处理程序，而 handler.stream 不提供路径，而是文件句柄，从中获取路径是有点不明显。这是我的解决方案：

```
import logging
from logging import FileHandler

# note, this will create a new logger if the name doesn't exist, 
# which will have no handlers attached (yet)
logger = logging.getLogger('<name>')

for h in logger.handlers:
    # check the handler is a file handler 
    # (rotating handler etc. inherit from this, so it will still work)
    # stream handlers write to stderr, so their filename is not useful to us
    if isinstance(h, FileHandler):
        # h.stream should be an open file handle, it's name is the path
        print(h.stream.name) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-02T16:49:15.633

很好的问题@zallarak。不幸的是，虽然它们很容易创建，`Loggers`但很难检查。这将获取所有`Handlers`a的文件名`logger`：

```
filenames = []
for handler in logger.handlers:
    try:
        filenames.append(handler.fh.name)
    except:
        pass 
```

该`try`块处理文件名查找失败时发生的异常。

# c# - 无法以编程方式显示设置的 Winforms 文本框值

> ID：14406352
> 
> 赞同：3
> 
> 时间：2013-01-18T19:37:21.723
> 
> 标签：c#, winforms, textbox, controls

**解决方案**

我现在对此很自责，但您会在下面的代码中注意到，我正在为 Form4 使用参数化构造函数。C# 中参数化构造函数的标准过程是`:this()`在声明之后使用（我认为，至少对于 Forms）。这首先调用未参数化/默认构造函数，其中包含`InitializeComponent()`设置表单及其控件。

`InitializeComponent()`如果您使用过，绝对*不*应该在参数化构造函数中`:this()`，因为它会使用“新”控件重新初始化您的表单。这会导致您的表单和控件处于模棱两可的状态，以及我得到的奇怪行为。

**原始问题**

我有一个表单，我希望控件（包括文本框）在第一个视图中具有初始值。这些值来自表单构建期间的一条 SQL 语句，因此我无法使用表单设计器。此表单的元素/控件也是从几乎相同的表单复制粘贴的，因为该表单是“添加”，而该表单是“编辑”

问题是这样的：使用调试器显示我成功地从 SQL 中获取了良好的数据，并且设置`textbox.Text`成功，但是当显示表单时，它并没有反映所做的更改。这里的答案：[https](https://stackoverflow.com/a/7830769/1655707) ://stackoverflow.com/a/7830769/1655707暗示可以简单地设置该值（大概在初始化或加载期间）。

我已经尝试在初始化期间、Load 事件和 Shown 事件中这样做，但这些都不起作用。打电话`Refresh()`也`Application.DoEvents()`无所作为。有什么我想念的吗？某些阻止此文本框正确更新/显示的事件？复制粘贴控件是否有意外的副作用？

我尝试并以这种方式设置的所有控件都不会显示更改后的值，但文本框是最简单的，因为它没有索引可以弄乱。

```
 public Form4(int collIDFromParent, string collNameFromParent): this()
    {
        InitializeComponent();

        retCollID = collIDFromParent;
        retCollName = collNameFromParent;

        //Initialize these here so they activate on first use0
        button1.DialogResult = DialogResult.None;
        button2.DialogResult = DialogResult.Cancel;

        //PopulateEditData goes first for potential SQL failure
        PopulateEditData();

        textBox6.Text = "TEST";
    }

    private void Form4_Load_1(object sender, EventArgs e)
    {
        textBox1.Text = "TEST";
    }

    private void Form4_Shown_1(object sender, EventArgs e)
    {
        textBox2.Text = "TEST";
    } 
```

是的，他们设置了不同的文本框，但它们都不起作用，所以差别不大。

一个典型的文本框更改处理程序。有人可能会认为它当前的编写方式可能会引发某种重置，但注释掉一行并不会改变我担心的行为。

```
 private void textBox6_TextChanged_2(object sender, EventArgs e)
    {
            retCollName = textBox6.Text;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:09:56.483

通过功能之间的简单更改（例如添加与编辑），表单的核心功能不会改变。您尝试处理的两个函数之间的唯一核心区别是一个新对象和一个现有对象。正因为如此，一个表单会比两个单独的表单要好得多。也省了很多工作，是OOP的核心之一。

我建议的另一件事是在创建表单之前检索数据。创建一个数据对象，其中包含您从数据库中检索的所有属性。为该数据类提供一个 Load 方法，该方法接受您要查找的记录的任何标识符。现在您已准备好迎接更轻松的时光。

为了示例，我将在这里制作一些默认按钮，您的体验可能会有所不同。:)

```
AddButton_Click(//default button click parameters) {
    Widget widget = new Widget();
    OpenWidgetForm(widget);
}

EditButton_Click(//default button click parameters) {
    Widget widget = new Widget();
    // You'll use the way you have now to determine which record to load,
    // and turn it to the id variable
    widget.Load(id);
    OpenWidgetForm(widget);
}

OpenWidgetForm(Widget widget) {
    frmWidget frm = new frmWidget(widget);
    frm.Show();
} 
```

该代码将采用任何可以将您带到“添加/编辑”表单的形式。

现在在您的添加/编辑表单中，您将像这样更改它：

```
private Widget _widget;

public frmWidget() {
    Widget widget = new Widget();
    _widget = widget;
    LoadWidget();
}

public frmWidget(Widget widget) {
    _widget = widget;
    LoadWidget();
}

public void LoadWidget() {
    // go through each of the properties of your object
    // and set the values to the Text properties of each Textbox.
    txtName.Text = _widget.Name;
} 
```

有了这个，你应该很高兴。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:12:43.890

我做了一个快速项目来测试这个功能。所有这三个选项都成功设置了 TextBox 的值。您在此处遇到的问题未在发布的代码中显示。之后有什么东西改变了 TextBox 的值，或者你引用了错误的 TextBoxes。我刚刚完成了与我们的应用程序类似的问题的调试。事实证明，我们不知何故有两组重叠的文本框（我们实际使用的文本框位于一组空文本框的下方）。

```
 public Form1()
    {
        InitializeComponent();

        textBox1.Text = "TEST";
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        textBox2.Text = "TEST";
    }

    private void Form1_Shown(object sender, EventArgs e)
    {
        textBox3.Text = "TEST";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:14:55.850

这可能是一个比这个问题所需的更简单的答案，但请确保您实际上正在调用`Controls.Add(textBox1)`. 我注意到到目前为止没有人提到这一点。首先签入 Designer 生成的代码。

如果您要动态添加控件，则必须自己调用它。

# c++ - 回声消除窗口 xp/vista/7

> ID：14406353
> 
> 赞同：0
> 
> 时间：2013-01-18T19:37:31.780
> 
> 标签：c++, windows, acoustics

使用 C++ 在 windows xp/vista/7 上执行 aec 计算的首选方法是什么？

是否有可以提供同步输入和输出样本的 API，以便我可以将它们传递给像 speex 这样的外部库？

或者这个嵌入式 API 本身执行 aec 计算，只返回结果，以便我可以对其进行编码并将其传输到远程站点。

xp/vista/7 的 aec 支持有什么不同吗？

用于 aec 计算的最佳外部库（免费与否）是什么？（在这种情况下，我需要操作系统同步输入/输出样本）

示例代码会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T00:45:31.590

在互联网上搜索“AEC DMO”。它会出现一些有用的 MSDN 链接在为 Vista/Win7 提供的 AEC 组件上找到一些有用的 MSDN 链接[，例如这个链接。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd940388%28v=vs.85%29.aspx)Vista 上提供了 DMO 示例应用程序，但您可能需要下载相关的 Windows SDK 才能获取该代码。

对于 XP，有[IDirectSoundFullDuplexCreate8](http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.reference.directsoundfullduplexcreate8%28v=vs.85%29.aspx)。几乎不能在 XP 上工作。在 Vista+ 上根本不起作用。

# javascript - 将内容加载到从中加载内容的 DIV 标记中

> ID：14406354
> 
> 赞同：0
> 
> 时间：2013-01-18T19:37:35.133
> 
> 标签：javascript, ajax, jquery, html

我有一个带有左侧面板和右侧内容 div 的网站。当我单击左侧面板中的任何链接时，我使用 Javascript Ajax 调用将内容加载到 div 标记（名为“内容”）中。

在我的情况下，加载到 div 标签中的视图也有链接，所以通常如果我点击它们，它们只会打开一个全新的页面。我希望它们也加载到调用它们的同一个 div 标签中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-23T06:20:34.627

如果您要在同一页面上打开新链接，那么您可以使用以下内容

```
$( "#target" ).click(function() {
var newurl="http://" + window.location["host"];
    window.location.href = newurl; // or simply window.location
})}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:42:22.887

假设您有一个 #left 和一个 #content 窗格，您可以执行以下操作：

```
$(document).on('click', '#left a, #content a', function()
{
   var href = $(this).attr('href');
   if(!href || href[0] != '/') return; // relative URLs only

   // Do your AJAX call here
}); 
```

通过使用这种 jquery 语法，您可以将文档和过滤器绑定到`#left a`，`#content a`即使将新锚点添加到 #left 或 #content div，它们仍将连接到该单击处理程序。此时，您定义逻辑以告诉它以 AJAX 调用的形式加载新内容，而不是转到新页面。我提供了演示逻辑来帮助您入门。

# apache - mod_auth_kerb 主体解析错误

> ID：14406355
> 
> 赞同：6
> 
> 时间：2013-01-18T19:37:39.783
> 
> 标签：apache, security, kerberos

我正在使用 mod_auth_kerb 和 Apache HTTPD 针对 Kerberos 服务器对网站用户进行身份验证。我在 Apache 错误日志中收到一条奇怪的错误消息。（请注意，出于安全原因，我在这篇文章中更改了主体，但格式保持不变）。打开 Apache 的调试级别输出使我能够获得更多信息日志：

```
[debug] src/mod_auth_kerb.c(1932): [client x.x.x.x] kerb_authenticate_user entered with user (NULL) and auth_type Kerberos
[debug] src/mod_auth_kerb.c(1277): [client x.x.x.x] Acquiring creds for HTTP/kerberos_server.example.com@REALM.EXAMPLE.COM
[debug] src/mod_auth_kerb.c(1470): [client x.x.x.x] Credentials cache FILE:/tmp/krb5cc_48 not found, create one
[error] [client x.x.x.x] Could not parse principal HTTP/kerberos_server.example.com@REALM.EXAMPLE.COM/server_hostname: Malformed representation of principal (-1765328250)
[debug] src/mod_auth_kerb.c(1598): [client x.x.x.x] Failed to obtain credentials for s4u2proxy
[debug] src/mod_auth_kerb.c(1137): [client x.x.x.x] GSS-API major_status:000d0000, minor_status:0000000d
[error] [client x.x.x.x] gss_acquire_cred() failed: Unspecified GSS failure. Minor code may provide more information (, Permission denied) 
```

我想问题出在主体末尾的“/server_hostname”上。在我的 Kerberos 密钥表文件中，主体被列为`HTTP/kerberos_server.example.com@EXAMPLE.COM`. 如何更改提交给 mod_auth_kerb 的主体？还是有另一种方法来协调这个解析错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T16:20:35.423

原来是文件系统权限问题。密钥表由 root:root 拥有，并且权限设置为仅所有者的读/写 (0600)。因此，Apache HTTPD 无法访问 keytab 文件。我仍然不知道 mod_auth_kerb 是如何提出上下文启动器主体的。但是，现在 Apache 可以读取密钥表，一切正常。

# php - 如何在电子邮件中包含字段

> ID：14406358
> 
> 赞同：-3
> 
> 时间：2013-01-18T19:37:48.547
> 
> 标签：php, email

我有以下用于发送邮件的代码：

```
$email_to = 'someone@somewhere.com';
$name = $_POST['name'];  
$email = $_POST['email'];
$phone = $_POST['phone'];
$subject = $_POST['subject'];
$message = $_POST['message'];

$headers = 'From: ' . $name . ' <' . $email_to . '>' . "\r\n" . 'Reply-To: ' . $email;
if(mail($email_to, $subject, $message, $headers)) {
    echo 'sent'; // sending this text to the ajax request telling it that the mail is sent..      
} else {
    echo 'failed'; // ... or this one to tell it that it wasn't sent    
} 
```

邮件发送正常，但我需要在消息中显示电话号码。我相信这很容易解决，我会全力以赴！当有人教我的时候，让我们结束吧！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:39:47.447

您需要将电话号码附加到消息字符串中。

```
$email_to = 'someone@somewhere.com';
$name = $_POST['name'];  
$email = $_POST['email'];
$phone = $_POST['phone'];
$subject = $_POST['subject'];
$message = $_POST['message'] . "\n\n" . $phone;

$headers = 'From: ' . $name . ' <' . $email_to . '>' . "\r\n" . 'Reply-To: ' . $email;
if(mail($email_to, $subject, $message, $headers)) {
    echo 'sent'; // sending this text to the ajax request telling it that the mail is sent..      
} else {
    echo 'failed'; // ... or this one to tell it that it wasn't sent    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:39:02.953

将电话号码放入`$message`变量中。就像是

```
$message = $_POST['message']."<br/><br/>Your phone number is: ".$phone; 
```

还要添加适当的标题以支持 HTML：

```
$headers .= "Content-Type: text/html\r\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:40:44.607

您需要将电话号码连接到消息才能发送。

```
$message = $_POST['message']."\n\n$phone"; 
```

您还应该查找防止电子邮件注入的功能，并在每个帖子值上运行 strip_tags 以防止对您的表单进行 XSS 攻击。

# ios - UIView transitionWithView 后如何运行代码？

> ID：14406360
> 
> 赞同：8
> 
> 时间：2013-01-18T19:37:51.543
> 
> 标签：ios, objective-c, uiview, uiviewanimation

我想在动画完成后运行一段代码，但编译器显示以下错误：“不兼容的块指针类型将'void (^)(void)'发送到'void (^)(BOOL)'类型的参数”

这是我的代码，我不确定我做错了什么，请帮助，谢谢。

```
[UIView transitionWithView:self.view duration:1.5
                   options:UIViewAnimationOptionTransitionFlipFromBottom //change to whatever animation you like
                animations:^ {
                    [self.view addSubview:myImageView1];
                    [self.view addSubview:myImageView2];
                }
                completion:^ {
                    NSLog(@"Animations completed.");
                    // do something...
                }]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T19:41:09.550

你只是有错误的块类型:) 它需要一个像下面这样的块。关键是`^(BOOL finished) {...}`

```
[UIView transitionWithView:self.view duration:1.5
                   options:UIViewAnimationOptionTransitionFlipFromBottom //change to whatever animation you like
                animations:^ {
                    [self.view addSubview:myImageView1];
                    [self.view addSubview:myImageView2];
                }
                completion:^(BOOL finished){
                    if (finished) {
                        // Successful
                    }
                    NSLog(@"Animations completed.");
                    // do something...
                }]; 
```

# python-2.7 - 如何在 python 中通过 Cython 和 iso_c_bindings 使用 fortran90 子例程

> ID：14406362
> 
> 赞同：2
> 
> 时间：2013-01-18T19:37:56.567
> 
> 标签：python-2.7, fortran90, f2py

直到最近，我一直在使用 IDL 来解决我的大部分计算问题。我最常用的例程之一是一些 fortran90 代码，用 C 语言包装并使用 CALL_EXTERNAL 函数从 IDL 调用（这些都不是我写的）。由于各种原因，我将大部分计算转移到 Python，但我还没有找到一个合并 fortran 代码的好方法。F2PY 似乎是最明显的方法，但实际上生成的模块似乎非常不稳定。

基本上我想知道是否有更好的方法来解决这个问题。似乎重新设计现有的 C 包装器和 Cython 以使用 Python 中的代码应该相对简单，尽管我不得不承认我完全不了解 C/Cython 并且对 python 很陌生，所以任何帮助将不胜感激.

作为参考，我在下面包含了现有的 C 包装器：

```
#include <stdio.h>

void bvls(int argc, void *argv[]) {

extern void bvls_(); 
int *n, *m, *nsetp, *index, *ierr;     
double **a, **b, **bnd, **w, **x;   
double *rnorm;

a =     (double **) argv[0];
m =     (int *)     argv[1];
n =     (int *)     argv[2];
b =     (double **) argv[3];
bnd =   (double **) argv[4];
x =     (double **) argv[5];
rnorm = (double *)  argv[6];
nsetp = (int *)     argv[7];
w =     (double **) argv[8];
index = (int *)     argv[9];
ierr =  (int *)     argv[10];

bvls_(a,m,n,b,bnd,x,rnorm,nsetp,w,index,ierr); 

} 
```

**编辑：** 在向其他人提到这一点后，他们建议也应该可以使用 fortran ISO_C_BINDINGS 模块直接与 Cython 交互，绕过对中间 C 包装器的需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T13:50:15.277

您当前使用的 C 包装器不适合暴露给 Python。您可能需要 Python 中的函数签名来反映 Fortran 签名，而不是现有 C 包装器的笨拙签名。

无论您是保留 C 包装器还是使 Fortran 函数 C 可与 ISO_C_BINDINGS 互操作，最终与 Cython 的交互都无关紧要。您只需要知道要公开的库中的 C 函数的签名。

无论哪种方式，这都是遵循 Cython[与外部 C 代码接口](http://docs.cython.org/src/userguide/external_C_code.html)的教程并让 Cython 知道您要公开的函数的签名的简单案例。假设您想镜像 Fortran 签名，它看起来像这样：

```
cdef extern from "bvls.h":
    void bvls(double* a, int m, int n, double* b, double* bnd, double* x,
              double rnorm, int nsetp, double* w, int index, int ierr) 
```

然后创建一个从 Python 调用的惯用函数就很简单了。您可能希望允许调用者为所有`double*`参数传入 NumPy 数组：

```
cimport numpy as np

def pybvls(a, int m, int n, b, bnd, x, double rnorm,
           int nsetp, w, int index, int ierr):
    cdef double *a_, *b_, *bnd_, *x_, *w_
    # Get the raw data pointers from NumPy arrays
    a_ = <double *>np.PyArray_DATA(a)
    b_ = <double *>np.PyArray_DATA(b)
    bnd_ = <double *>np.PyArray_DATA(bnd)
    x_ = <double *>np.PyArray_DATA(x)
    w_ = <double *>np.PyArray_DATA(w)
    bvls(a_, m, n, b_, bnd_, x_, rnorm, nsetp, w_, index, ierr) 
```

最后，您可能希望编写为`setup.py`文件以使用 distutils 为您构建扩展模块，如[Cython 文档中所述](http://docs.cython.org/src/userguide/source_files_and_compilation.html)。

# opengl - 简单的OpenGL程序错误

> ID：14406363
> 
> 赞同：0
> 
> 时间：2013-01-18T19:38:02.343
> 
> 标签：opengl

我最近开始通过 SuperBible 第五版学习 OpenGl，不幸的是在他们提供的第一个示例中被卡住了。

这是代码：

```
#include <GLTools.h>
#include <GLShaderManager.h>
#include <GL/glew.h>
#include <GL/glut.h>

GLShaderManager shaderManager;
GLBatch triangleBatch;
void ChangeSize(GLsizei w, GLsizei h);

void ChangeSize(int w, int h){
    glViewport(0,0,w,h);
}

void SetupRC(){
    //background
    glClearColor(0.0f, 0.0f, 1.0f, 1.0f);

    shaderManager.InitializeStockShaders();

    GLfloat vVerts[] = { -0.5f, 0.0f, 0.0f,
                          0.5f, 0.0f, 0.0f,
                          0.0f, 0.5f, 0.0f};

    triangleBatch.Begin(GL_TRIANGLES, 3);
    triangleBatch.CopyVertexData3f(vVerts);
    triangleBatch.End();

}

void RenderScene(void){

    glClear(GL_COLOR_BUFFER_BIT |GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);

    GLfloat vRed[] = {1.0f, 0.0f, 0.0f, 1.0f};
    shaderManager.UseStockShader(GLT_SHADER_IDENTITY, vRed);
    triangleBatch.Draw();

    glutSwapBuffers();
}

int main(int argc, char* argv[])
{
    //gltSetWorkingDirectory(argv[0]);
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH | GLUT_STENCIL);

    glutInitWindowSize(800,600);
    glutCreateWindow("Triangle");

    glutReshapeFunc(ChangeSize);
    //
    glutDisplayFunc(RenderScene);

    GLenum err=glewInit();

    if(GLEW_OK != err) {
        fprintf(stderr, "GLEW error: %s\n", glewGetErrorString(err));
        return 1;
    }

    SetupRC();

    glutMainLoop();
    return 0;
} 
```

这是错误：

[http://codepad.org/aFSEAJKT](http://codepad.org/aFSEAJKT)

我在评论的行尾显示了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:07:26.740

那么现在的错误是由于您没有链接到 glew 库。找到 glew.lib（如果你下载了二进制发行版，它应该带有标题）。编辑项目的属性，选择链接器选项，并添加一个额外的库目录。添加 glew lib 的位置（应称为 glew32.lib 或类似名称）。然后在展开链接器选项卡中，选择输入，并在附加依赖项的末尾添加包含扩展名的 lib 文件的名称。

# cuda - 在主机和 GPU 上添加 CUDA 的结果不同

> ID：14406364
> 
> 赞同：4
> 
> 时间：2013-01-18T19:38:07.357
> 
> 标签：cuda

我有一个函数，它可以拍摄彩色照片并返回它的灰色版本。如果我在主机上运行顺序代码，一切正常。如果我在设备上运行它，结果会略有不同（1000 中的一个像素与正确值相比是 +1 或 -1）。

我认为这与转换有关，但我不确定。这是我使用的代码：

```
 __global__ void rgb2gray_d (unsigned char *deviceImage, unsigned char *deviceResult, const int height, const int width){
    /* calculate the global thread id*/
    int threadsPerBlock  = blockDim.x * blockDim.y;
    int threadNumInBlock = threadIdx.x + blockDim.x * threadIdx.y;
    int blockNumInGrid   = blockIdx.x  + gridDim.x  * blockIdx.y;

    int globalThreadNum = blockNumInGrid * threadsPerBlock + threadNumInBlock;
    int i = globalThreadNum;

    float grayPix = 0.0f;
    float r = static_cast< float >(deviceImage[i]);
    float g = static_cast< float >(deviceImage[(width * height) + i]);
    float b = static_cast< float >(deviceImage[(2 * width * height) + i]);
    grayPix = (0.3f * r) + (0.59f * g) + (0.11f * b);

    deviceResult[i] = static_cast< unsigned char > (grayPix);
}

void rgb2gray(unsigned char *inputImage, unsigned char *grayImage, const int width, const int height, NSTimer &timer) {

    unsigned char *deviceImage;
    unsigned char *deviceResult;

    int initialBytes = width * height * 3;  
    int endBytes =  width * height * sizeof(unsigned char);

    unsigned char grayImageSeq[endBytes];

    cudaMalloc((void**) &deviceImage, initialBytes);
    cudaMalloc((void**) &deviceResult, endBytes);
    cudaMemset(deviceResult, 0, endBytes);
    cudaMemset(deviceImage, 0, initialBytes);

    cudaError_t err = cudaMemcpy(deviceImage, inputImage, initialBytes, cudaMemcpyHostToDevice);    

    // Convert the input image to grayscale 
    rgb2gray_d<<<width * height / 256, 256>>>(deviceImage, deviceResult, height, width);
    cudaDeviceSynchronize();

    cudaMemcpy(grayImage, deviceResult, endBytes, cudaMemcpyDeviceToHost);

    ////// Sequential
    for ( int y = 0; y < height; y++ ) {
             for ( int x = 0; x < width; x++ ) {
                   float grayPix = 0.0f;
                   float r = static_cast< float >(inputImage[(y * width) + x]);
                   float g = static_cast< float >(inputImage[(width * height) + (y * width) + x]);
                   float b = static_cast< float >(inputImage[(2 * width * height) + (y * width) + x]);

                   grayPix = (0.3f * r) + (0.59f * g) + (0.11f * b);
                   grayImageSeq[(y * width) + x] = static_cast< unsigned char > (grayPix);
              }
        }

    //compare sequential and cuda and print pixels that are wrong
    for (int i = 0; i < endBytes; i++)
    {
        if (grayImage[i] != grayImageSeq[i])
        cout << i << "-" << static_cast< unsigned int >(grayImage[i]) <<
                 " should be " << static_cast< unsigned int >(grayImageSeq[i]) << endl;
        }

    cudaFree(deviceImage);
    cudaFree(deviceResult);
} 
```

我提到我为初始图像分配宽度 * 高度 * 3，因为初始图像是 CImg。

我在 GeForce GTX 480 上工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T10:58:26.280

最后我找到了答案。CUDA 会自动融合单精度和双精度乘加。使用下面的文档[1](http://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf)，第 4.4 节，我设法修复它。而不是做

```
grayPix = (0.3f * r) + (0.59f * g) + (0.11f * b); 
```

我现在正在做

```
grayPix = __fadd_rn(__fadd_rn(__fmul_rn(0.3f, r),__fmul_rn(0.59f, g)), __fmul_rn(0.11f, b)); 
```

这将禁用乘法的合并并添加到融合的乘法加法指令中。

[NVIDIA GPU 的浮点和 IEEE 754 合规性](http://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:53:26.497

浮点数学可以在设备代码和主机代码中产生略微不同的结果。

为什么会出现这种情况有多种可能性。您必须考虑这两个函数是由两个不同的编译器编译成两个不同的二进制程序，在两个不同的浮点硬件实现上运行。

例如，如果浮点计算以不同的顺序执行，舍入误差可能会导致不同的结果。

此外，在 x86 架构 CPU 上使用 32 位（浮点）或 64 位（双精度）浮点表示运行浮点计算时，浮点数学由内部使用 80 位精度的 FPU 单元完成，结果为然后截断回 32 位浮点数据类型或 64 位双精度数据类型。

GPU 的 ALU 使用 32 位精度进行浮点数学运算（假设您使用的是浮点数据类型）。

[可以在这里](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)找到一篇讨论浮点表示和算术主题的优秀文章。

# scala - 将可选转换函数应用于可选值时出现 Scala 编译器错误

> ID：14406368
> 
> 赞同：0
> 
> 时间：2013-01-18T19:38:20.163
> 
> 标签：scala

我有一个 Scala 中各种类型的值列表——主要是字符串、整数、双精度值。其中一些值可能为空。我们可以认为这是一个`List[Option[AnyRef]]`. 对于此列表中的每个值，如果存在，我想生成一个包含括号之间值的字符串；如果它不存在，则只是一个空字符串。此外，在值插入括号之间之前，可能需要对其应用转换。例如，如果值为 an `Option[String]`，我可能想应用该`trim`函数。

我通过将数据结构视为可选值的映射与对该值进行操作并返回字符串的可选函数配对来解决此问题（我不知道如何在 Scala 中指定它，因为我认为 Map[Option [A], Option[(A) => String]] 是不正确的，因为它暗示每个选项键都是相同的类型）。到目前为止，这是我使用示例数据和函数编写的内容：

```
lazy val messageContext = Map(
  None -> None,
  Some("hello") -> None,
  Some(4) -> Some(negate _),
  None -> None
) map { t => wrapText(t._1, t._2)  } toList

private def wrapText[A](option: Option[A], transFn: Option[(A) => String]): String = option match {
  case Some(o) => " (%s)".format(transFn.getOrElse(stringIdentity _)(o))
  case _ => ""
}

private def stringIdentity[A](a: A) = a.toString

private def negate(n: Number) = n * -1 
```

但是，我遇到了编译器错误：

```
error: type mismatch;
 found   : Option[java.lang.Number => java.lang.String]
 required: Option[AnyVal{def getClass(): java.lang.Class[_ >: Double with Int <: AnyVal]} => String]
  ) map { t => wrapText(t._1, t._2)  } toList 
```

我的方法接近吗？使用 Scala 可以轻松实现这一点，还是我必须求助于一些 scalaz 魔法才能使其真正起作用？

谢谢。

编辑：上述输入的正确输出是这样的： `List[""," (hello)"," (-4)",""]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:19:04.253

不需要魔法。我不确定这是否是您想要的，但要重申

*   `None`在输入中意味着 `""`在输出中
*   `Some(v)`在输入中意味着`" (%s)".format(trans(v))`在输出中，其中`trans`是值的一些可选转换

前任：

```
val input = List(None, Some("hello"), Some(4), None)

def trans(v: Any) = v match {
   case num @ 4 => -num
   case _       => v  // identity
}

val output = input.map {
   case Some(v) => " (%s)".format(trans(v))
   case _       => ""
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:26:59.123

这里的第一个问题是 a`Map[A,B]`有两个用于整个映射的类型参数，而不是每个 的几个类型参数`tuple`。你想做的事情不能使用 a 来完成`Map`，因为它`Map`会将键和值的最常见祖先作为类型参数：

```
scala>  import StackOverflowTest

StackOverflowTest.messageContext
import StackOverflowTest

scala> res0: scala.collection.immutable.Map[Option[java.lang.Comparable[_ >: java.lang.Integer with java.lang.String <: java.lang.Comparable[_ >: java.lang.Integer with java.lang.String <: java.lang.Comparable[_ >: java.lang.Integer with java.lang.String <: java.io.Serializable] with java.io.Serializable] with java.io.Serializable] with java.io.Serializable],Option[java.lang.Integer => Int]] = Map(None -> None, Some(hello) -> None, Some(4) -> Some(<function1>))

scala> 
```

当您将不同类型的元组放入映射或序列中时，您会丢失有关每个元组的类型信息，并且只保留第一个公共父级。如果您需要一个能够保存元组映射的数据结构，其中每个元组`Tuple2[A,B]`都不同`A,B`，您需要一个更动态的结构，例如无形记录或 HList。

[https://github.com/milessabin/shapeless](https://github.com/milessabin/shapeless)

这里的第二个问题是Java中没有定义Number * 1的语义，您需要使用所需的数字子类型，例如java.lang.Integer。

第三个问题是您的 wrapText 需要一段`transFn: Option[(A) => String])`时间，您的否定输出值类型不是字符串（实际上没有为 java 类 Number 定义 *）。`Map`如果您尝试仅编译以下内容，请移除该部分并更正否定方法：

```
 private def wrapText[A](option: Option[A], transFn: Option[(A) => String]): String = option match {
    case Some(o) => " (%s)".format(transFn.getOrElse(stringIdentity _)(o))
    case _ => ""
  }

  private def stringIdentity[A](a: A) = a.toString

  private def negate(n: java.lang.Integer) = n * -1

  wrapText(Some(4),negate _ ) 
```

这不会编译错误：

```
error: type mismatch;
found   : Option[java.lang.Integer => Int]
required: Option[? => String]
wrapText(Some(4),Some(negate _) ) 
```

如果你最终纠正否定返回一个字符串，你将撞到最后一堵墙

```
error: type mismatch;
found   : Option[java.lang.Integer => java.lang.String]
required: Option[Int => String]
wrapText(Some(4),Option(negate _) ) 
```

这里的问题是，虽然 Scala 和 Java 执行自动装箱和拆箱，但它们不执行类型参数的自动转换： Option[Int=> String] 与 Option[java.lang.Integer=>String] 不是同一个类，所以你必须强制第一个选项的类型才能正确编译：

```
 wrapText(Some(4:java.lang.Integer),Some(negate _) ) 
```

# laravel - Laravel 付款处理

> ID：14406370
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:38:24.960
> 
> 标签：laravel, payment, braintree

我只是在想自己如何解决通过 laravel 接受信用卡的实现。我想要一个用户可以相互交互并相互购买东西的系统，所以我会成为“中间人”。那合法吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:16:18.793

阅读您的评论：

> 我只是想知道是否有一个最适合 laravel 的，因此我想要一个意见。

这个问题有点令人费解，因为 Laravel 是一个试图尽可能少地限制你的框架，因此可以很好地处理所有事情。因此，没有一种支付网关可以更好地与 Laravel 配合使用。

话虽如此，您可以通过使用已经编写的客户端库/包来节省一些工作。如果这是您的意图，您可以[在此页面上查找现有捆绑包。](http://bundles.laravel.com/search/tag/payment)

# java - gui 对象的继承或组合

> ID：14406373
> 
> 赞同：2
> 
> 时间：2013-01-18T19:38:37.343
> 
> 标签：java, inheritance, composition

我正在开发一个简单的游戏。我创建了一个`Maze`类，其中包含用于创建/修改/解决迷宫的方法和算法。我还创建了一个`GraphicalMaze`类，它应该只包含一个`paint`在`JPanel`.

在这一点上，我必须决定是否：

*   `GraphicalMaze`应该 extends `Maze`，`JPanel`作为成员变量（继承）

或者

*   `GraphicalMaze`应该扩展`JPanel`，`Maze`作为成员变量（组成）

每次我必须从“抽象”对象创建“gui”对象时，都会出现这个问题。我对您的意见很感兴趣，我想了解什么是“正确”的进行方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:48:47.240

如果存在的唯一原因`GraphicalMaze`是绘制`Maze`，则该方法应包含在`Maze`类中。我通常调用方法`draw`，但`paint`有效。

`JComponent`只有在要覆盖方法时才应该扩展 a 。否则，最好将其`JComponent`作为成员变量。

组合优于继承。

在您的特定情况下，我将扩展`JPanel`并覆盖该`paintComponent`方法以调用`paint`您的`Maze`类的方法。您必须将类的实例传递`Maze`给扩展`JPanel`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:49:38.040

这不是最容易回答或最客观的问题。有些人倾向于说在大多数情况下你应该更喜欢组合而不是继承。我想说，想想你的对象以及它们之间的***真正***关系。在这种情况下，请记住继承表示*is-a*关系，而组合表示*has-a*。

所以，问题变成*了*， GraphicalMaze 是迷宫吗？还是迷宫的*代表？*我认为是后者。这当然意味着您将使用组合而不是继承来表示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:15:49.547

我将您的`GraphicalMaze`对象视为显示迷宫的面板，并且我怀疑通过将其视为`JPanel`. 在这种情况下，我自己的解决方案是扩展`JPanel`但将新类称为`MazePanel`而不是`GraphicalMaze`.

话虽如此，如果您经常面临这个问题，那么尝试两种方式实现它并查看哪一种方式将您引导到更易于使用的应用程序结构可能是值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T19:48:20.313

我会选择第二个选项。原因是 GraphicalMaze 是一个修改显示的类，但 Maze 包含要显示的数据，因此 GraphicalMaze 应该与图形有更紧密的“连接”。

# html - apDiv vs Table vs Div 标签

> ID：14406381
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:38:58.613
> 
> 标签：html, css, dreamweaver

我是网页设计的新手。我听说使用表格创建网页布局不好。但我尝试了 Dreamweaver CONVERT/table to apDiv 中的选项

我的问题是：

这是设计网页布局的好方法吗？
使用 div 标签或 apDiv 更好吗？
有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:47:02.507

> 这是设计网页布局的好方法吗？

不，只有一种好方法。从未标记的内容开始。使用 HTML 元素和属性的适当语义手动标记它。使用 CSS 选择器将布局指令作为 CSS 规则绑定到这些元素和属性。

# jquery - 带有密码字段的 jQuery 表单验证

> ID：14406384
> 
> 赞同：0
> 
> 时间：2013-01-18T19:39:04.883
> 
> 标签：jquery, jquery-validate

我正在尝试验证我的表单，由于某种原因，即使我没有在密码字段的字段中输入任何值，它也总是验证为真。如果我将控件更改为文本，如果我没有在文本框中输入任何内容，则验证工作。下面是我的代码。我无法弄清楚我在这里做错了什么。

```
<form id="frmChangePassword" action="http://localhost/PatientAccount" method="post">
    <div class="row"><input type="password" id="txtPWD" name="txtPWD" placeholder="" style="" class="text focus" value=""></div>
    <div class="row"><input type="password" id="txtReEnterPWD" name="txtReEnterPWD" placeholder="" style="" class="text" value=""></div>
    <div class="row"><input type="Button" ID="btnChangePassword" Name="btnChangePassword" STYLE="" Class="btn-submit" VALUE="Change Password" onClick="javascript:ValidateResetPassword();"></div>
</form>

<script>
function ValidateResetPassword() {
    $("#frmChangePassword").validate({
        rules: {
            "txtPWD": { required:true },
            "txtReEnterPWD": { required:true }
        },
        messages: {
            "txtPWD": { required: "Please enter Password" },
            "txtReEnterPWD": {required: "Please re-enter password" }
        }
    });

    if ($("#frmChangePassword").valid()) {
        hashPassword();
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T16:45:36.760

你有一堆小问题。

1) 您不需要在提交按钮上使用内联 JavaScript 来调用 Validate 插件。`submitHandler`该插件通过其回调函数在内部处理该问题。

2) 提交按钮应该是`<input type="submit"`. 如果你需要它是别的东西，那将需要不同的代码。

3) 该`.validate()`函数只能用于在 DOM 准备好时“初始化”表单。您错误地将其包含在每次单击按钮时调用的另一个函数中。

4）由于`if valid`条件仅在页面加载时调用一次，并且由于表单在页面加载时始终无效，因此该`hashPassword()`函数目前从未调用过。如果您希望该函数在表单有效时发生，那么只需将其放在`submitHandler:`回调函数中。

```
$(document).ready(function() {

    $("#frmChangePassword").validate({
        rules: {
            "txtPWD": {
                required: true
            },
            "txtReEnterPWD": {
                required: true
            }
        },
        messages: {
            "txtPWD": {
                required: "Please enter Password"
            },
            "txtReEnterPWD": {
                required: "Please re-enter password"
            }
        },
        submitHandler: function (form) { 
            hashPassword();
            form.submit();
            // alert('valid form'); // for demo
            // return false; // for demo
        }
    });

}); 
```

**工作演示：**

[http://jsfiddle.net/zgwkR/](http://jsfiddle.net/zgwkR/)

**插件文档：**

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

**官方样本表格：**

[http://jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)

# android - 更改 AJAX 的 PhoneGap / Cordova 用户代理

> ID：14406393
> 
> 赞同：8
> 
> 时间：2013-01-18T19:39:43.963
> 
> 标签：android, jquery, cordova, user-agent

我正在使用 phonegap / cordova 开发 Android 应用程序。

该应用程序必须读取远程服务器上的文件。因此我使用 AJAX (jQuery)。问题是：远程服务器将所有连接从移动设备重定向到移动版本，这对我不起作用，所以我必须将用户代理更改为桌面浏览器。

我怎样才能做到这一点？我已经看到[了 iOS 的解决方案](https://stackoverflow.com/questions/10624259/change-phonegap-user-agent)。Android有可能发生这样的事情吗？

* * *

**编辑：** 我自己找到了一个解决方案：

只需添加

```
WebSettings w = this.appView.getSettings();      
w.setUserAgentString("Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/14.0.835.202 Safari/535.1"); 
```

到`/src/com/a/b/c.java`in`onCreate`方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-20T17:01:54.923

把它放在你的 onCreate 方法中：（在 super.init();)

```
super.appView.getSettings().setUserAgentString("Your own agent string"); 
```

这对我有用。

查看更多设置：http: [//developer.android.com/reference/android/webkit/WebSettings.html](http://developer.android.com/reference/android/webkit/WebSettings.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-15T20:48:41.127

如果您正在为允许更改用户代理或任何标题的cordova 寻找更强大的http 客户端，请尝试[https://github.com/aporat/cordova-plugin-fetch](https://github.com/aporat/cordova-plugin-fetch)。它包含经过良好测试的本机网络库（`AFNetworking 2`在 ios 和`OKHttp`android 上）。

它还遵循 window.fetch，因此您可以`cordovaFetch`在模拟器和设备上使用，同时在浏览器上使用`fetch.js`.

只需安装插件

`cordova plugin add https://github.com/aporat/cordova-plugin-fetch.git`

并在您发出的任何请求中包含用户代理标头。

```
cordovaFetch('/users.json', {
  method : 'GET',
  headers: {
   'User-Agent': 'your user agent'
 },
}) 
```

# javascript - 如何访问 iframe 中的元素

> ID：14406399
> 
> 赞同：0
> 
> 时间：2013-01-18T19:40:09.260
> 
> 标签：javascript, greasemonkey

> **可能重复：**
> [Javascript - 从 iFrame 中获取元素](https://stackoverflow.com/questions/1088544/javascript-get-element-from-within-an-iframe)

我正在尝试使用页面上的greasemonkey 选择选项。document.getElementById("q10") 返回 null。我确定这与 iframe 有关，但我不知道如何访问它。

这是加载 iframe 的位置。

```
 <td valign="top" height="88%" colspan="2">
    <iframe id="initialtextFrame" name="initialtextFrame" title="Survey Questions" frameborder="0" scrolling="auto" style="height: 100%; width: 100%"
        src= '/hc/64261160/?cmd=file&amp;file=preChatSurveyContent&amp;site=64261160&amp;sessionkey=H909985739716063515-5531034935655418229K8398902&amp;survey=Pre-Chat' 
    >This functionality requires frames.To read the LivePerson accessibility policy, please go to the <a href='http://www.liveperson.com/help/accessibility.asp'>Liveperson accessibility policy page</a>.<img src="/hcp/window3/common/trans.gif" width="10" alt="" /></iframe>
  </td> 
```

这是我试图在框架内选择的选择选项

```
<select tabindex="3" name="ude!1841972" id="q10" size="1">
    <option id="q10r0" value="" label="" selected='selected'>Select One</option>
    <option id="q10r1" value="Chat-Field Tech-Denver Metro" label="Chat-Field Tech-Denver Metro" >Chat-Field Tech-Denver Metro</option>
    <option id="q10r2" value="Chat-Field Tech-CO Springs-SLC, UT" label="Chat-Field Tech-CO Springs-SLC, UT" >Chat-Field Tech-CO Springs-SLC, UT</option>
    <option id="q10r3" value="Chat-Field Tech-Outstate CO-MT-UT-Wy" label="Chat-Field Tech-Outstate CO-MT-UT-Wy" >Chat-Field Tech-Outstate CO-MT-UT-Wy</option>
</select> 
```

尝试 document.getElementById("q10r3") 和 "q10" 都返回 null

# html - 如何使图例扩展字段集的整个宽度并保持内容填充？

> ID：14406402
> 
> 赞同：3
> 
> 时间：2013-01-18T19:40:17.867
> 
> 标签：html, css

我的目标是渲染带有边框的字段集，并且图例位于顶部并带有背景色。图例的背景颜色应扩展到字段集的整个宽度。

基于[Make a legend fill up the full width within the fieldset](https://stackoverflow.com/questions/6312799/make-a-legend-fill-up-the-full-width-within-the-fieldset)，我从以下 jsfiddle 开始：http: [//jsfiddle.net/pdgreen/wcYXX/0](http://jsfiddle.net/pdgreen/wcYXX/0)。

看起来不错，但是 fieldset 没有填充，所以表单元素离边框太近了。当我添加填充时，我留下了：http: [//jsfiddle.net/pdgreen/wcYXX/1/](http://jsfiddle.net/pdgreen/wcYXX/1/)。

内容看起来不错，但标题不再扩展字段集的宽度。

如果我`div`将[内容](http://jsfiddle.net/pdgreen/wcYXX/2/)用.`div`

有没有办法让它看起来像第三把小提琴，没​​有额外的`div`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:48:37.820

是的，通过在图例上用负边距抵消字段集的填充。像这样的东西：http: [//jsfiddle.net/wcYXX/3/](http://jsfiddle.net/wcYXX/3/)

我将字段集的边距设置为 -5px（与字段集的填充相同，但为负），然后添加 5px 填充以将文本放回它所属的位置。

这也意味着您不再需要在旧版浏览器中不太支持的边框框。

字段集 css 现在看起来像这样：

```
fieldset legend {
    background: #369;
    color: #FFF;
    font-weight: 700;
    text-align: left;
    white-space:nowrap;

    margin: -5px;
    padding: 5px;
    display: block;
    width: 100%;

} 
```

# ios - plist 以编程方式创建并尝试通过 Apple 的指南进行阅读，但未正确创建或阅读

> ID：14406412
> 
> 赞同：0
> 
> 时间：2013-01-18T19:41:01.967
> 
> 标签：ios, cocoa-touch, plist, nsdictionary

变量：

```
NSMutableDictionary *rootObj;
NSDictionary *innerDict;
NSString *name;
NSArray *scores; 
```

代码：

```
rootObj = [NSMutableDictionary dictionaryWithCapacity:2];

    scores = [NSArray arrayWithObjects:[NSNumber numberWithInt:6],
              [NSNumber numberWithFloat:4.6], [NSNumber numberWithLong:6.0000034], nil];
    name = @"George Washington";

    innerDict = [NSDictionary dictionaryWithObjects:
                 [NSArray arrayWithObjects: name, scores, nil]
                                            forKeys:[NSArray arrayWithObjects:@"Name", @"Scores", nil]];
    [rootObj setObject:innerDict forKey:@"Washington"];

    scores = [NSArray arrayWithObjects:[NSNumber numberWithInt:8],
              [NSNumber numberWithFloat:4.9],
              [NSNumber numberWithLong:9.003433], nil];
    name = @"Abraham Lincoln";

    innerDict = [NSDictionary dictionaryWithObjects:
                 [NSArray arrayWithObjects: name, scores, nil]
                                            forKeys:[NSArray arrayWithObjects:@"Name", @"Scores", nil]];
    [rootObj setObject:innerDict forKey:@"Lincoln"];

    id plist = [NSPropertyListSerialization dataFromPropertyList:(id)rootObj
                                                          format:NSPropertyListXMLFormat_v1_0 errorDescription:nil];

    // SERIALIZATION

    NSString *path = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];
    NSData *xmlData;
    NSString *error;

    xmlData = [NSPropertyListSerialization dataFromPropertyList:plist
                                                         format:NSPropertyListXMLFormat_v1_0
                                               errorDescription:&error];
    if(xmlData) {
        NSLog(@"No error creating XML data.");
        [xmlData writeToFile:path atomically:YES];
        NSFileManager *manger = [[NSFileManager alloc] init];
        NSLog(@"%@", [manger contentsAtPath:path]);
    }
    else {
        NSLog(@"error");
       // [error release];
    }

    NSMutableDictionary *myDictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
    NSLog(@"%@", myDictionary); 
```

输出是：

```
2013-01-18 14:33:50.066 PListTrials[11281:c07] No error creating XML data.
2013-01-18 14:33:50.067 PListTrials[11281:c07] (null)
2013-01-18 14:33:50.067 PListTrials[11281:c07] (null) 
```

myDictionary 如何为空？代码来自：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/CreatePropListProgram/CreatePropListProgram.html#//apple_ref/doc/uid/10000048i-CH5-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/CreatePropListProgram/CreatePropListProgram.html#//apple_ref/doc/uid/10000048i-CH5-SW1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:48:55.943

您不能在应用程序主包上​​编写。在文档包中执行

最初，路径中不存在您的 plist 文件“Data.plist”，因此您需要创建它。最好在要写入数据时检查文件是否存在。尝试以下操作：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"Data.plist"];
if ([fileManager fileExistsAtPath:path] == NO) {
    [fileManager createFileAtPath:path contents:YourContent attributes:nil];
}else {
    [Content writeToFile:path atomically:YES encoding:NSUTF8StringEncoding error:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:44:42.687

很简单：您不能写入应用程序包。更改`path`为可写的内容（例如 Documents 目录）。

**更新：**

还，

```
xmlData = [NSPropertyListSerialization dataFromPropertyList:plist
                                                     format:NSPropertyListXMLFormat_v1_0
                                           errorDescription:&error]; 
```

是多余的。`plist`已经是 XML 数据了。

# breeze - 您如何强制 Breeze 元数据生成的属性为驼峰式？

> ID：14406429
> 
> 赞同：3
> 
> 时间：2013-01-18T19:42:00.673
> 
> 标签：breeze

我想更改 Breeze 的序列化程序，以便我的 javascript 对象是驼峰式的。在文档中它说可以做到这一点，但说这是要解释的。

> 您可以更改格式化程序的配置 [待解释]，但如果您这样做，您有责任确保您的更改不会与 Breeze 的期望相冲突。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:30:40.343

最简单的就是简单地调用

```
breeze.NamingConvention.camelCase.setAsDefault(); 
```

在您的第一个查询之前（或在您创建您的第一个元数据存储之前）。

[这里](http://www.breezejs.com/sites/all/apidocs/classes/NamingConvention.html)有更多信息，[这里](http://www.breezejs.com/documentation/metadata#NamingConvention)和[这里](http://www.breezejs.com/sites/all/apidocs/classes/MetadataStore.html)

内置的**NamingConvention.camelCase**是一个非常简单的驼峰式大小写实现，因此您也可以编写自己的命名约定，如下所示：

```
var namingConv = new breeze.NamingConvention({
    serverPropertyNameToClient: function (serverPropertyName, prop) {
        if (prop && prop.isDataProperty && prop.dataType === DataType.Boolean) {
            return "is" + serverPropertyName;
        } else {
            return serverPropertyName.substr(0, 1).toLowerCase() + serverPropertyName.substr(1);
        }
    },
    clientPropertyNameToServer: function (clientPropertyName, prop) {
        if (prop && prop.isDataProperty && prop.dataType === DataType.Boolean) {
            return clientPropertyName.substr(2);
        } else {
            return clientPropertyName.substr(0, 1).toUpperCase() + clientPropertyName.substr(1);
        }
    }            
});
namingConv.setAsDefault(); 
```

# iphone - 如何获取可以播放 youtube 视频的已安装应用程序列表？

> ID：14406430
> 
> 赞同：0
> 
> 时间：2013-01-18T19:42:05.827
> 
> 标签：iphone, ios, ipad, ios6, youtube

如何获取可以播放 youtube 视频的已安装应用程序列表？我需要向用户展示该列表。我可以使用 UIDocumentInteractionController 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:43:52.653

不，你不能。Youtube 视频不是文件类型。

# sql - 是否有记录 sql 语句的首选方式？

> ID：14406431
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:42:07.093
> 
> 标签：sql, grails, logging, grails-orm

我想记录应用程序生成的 sql，并开始阅读有关 Grails 应用程序中的 sql 日志记录的信息。

我试图设置 logSql = true 设置，但这给了我一组不可读的 sql 和参数。（很多参数很难映射到sql语句）

是否有一种记录 sql 的首选方式，以便可以跟踪 sql 并查找性能瓶颈？例如应该使用 log4jdbc 吗？

欢迎所有提示和提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:55:44.980

在 grails 应用程序中监视 SQL 查询性能的一种简单方法是使用[JavaMelody 插件](http://grails.org/plugin/grails-melody)。Melody 跟踪每个查询的运行次数以及平均和最差运行时间。它还提供了一个简单的界面来检查有关您的应用程序的此统计信息和其他运行时统计信息。

不幸的是，grails 2.0 存在一些问题：[Grails Melody 插件从 grails 2.0 开始不再记录 SQL 调用](https://stackoverflow.com/questions/9809805/grails-melody-plugin-no-longer-logs-sql-calls-as-of-grails-2-0)

# c# - 在 IBM MQ 服务器中循环消息

> ID：14406445
> 
> 赞同：4
> 
> 时间：2013-01-18T19:42:54.133
> 
> 标签：c#, .net, ibm-mq

我的 MQ 服务器中有数百条消息（使用 MQ .NET）。

我正在尝试一一阅读，但是我在循环播放时遇到了问题。我没有任何可以在这方面使用的计数/长度属性。

mqQueue - MQ 队列 mqQMgr - MQ 队列管理器

```
 mqQueue = mqQMgr.AccessQueue(queueName, MQC.MQOO_INPUT_AS_Q_DEF + MQC.MQOO_BROWSE);
   mqQueue.Get(mqMsg, mqGetMsgOpts); 
   string readMessage = mqMsg.ReadString(mqMsg.MessageLength); 
```

我如何循环遍历队列中的所有消息，如果没有消息我想退出。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:51:05.620

查看使用 WMQ 代码安装的示例程序。默认情况下，这些将存在，`C:\Program Files (x86)\IBM\WebSphere MQ 7.5\tools\dotnet\samples\cs\base\`我认为你想要的是`SimpleGet.cs`.

您遇到的问题是您重复打开队列。这会将 rowse 指针重置为每个时间的队列头部。示例程序展示了如何打开队列一次，然后循环消息直到达到特定数量或直到队列为空，以先到者为准。

```
 // create connection
            Console.Write("Connecting to queue manager.. ");
            queueManager = new MQQueueManager(queueManagerName, properties);
            Console.WriteLine("done");

            // accessing queue
            Console.Write("Accessing queue " + queueName + ".. ");
            queue = queueManager.AccessQueue(queueName, MQC.MQOO_INPUT_AS_Q_DEF + MQC.MQOO_FAIL_IF_QUIESCING);
            Console.WriteLine("done");

            // getting messages continuously
            for (int i = 1; i <= numberOfMsgs; i++)
            {
                // creating a message object
                message = new MQMessage();

                try
                {
                    queue.Get(message);
                    Console.WriteLine("Message " + i + " got = " + message.ReadString(message.MessageLength));
                    message.ClearMessage();
                }
                catch (MQException mqe)
                {
                    if (mqe.ReasonCode == 2033)
                    {
                        Console.WriteLine("No message available");
                        break;
                    }
                    else
                    {
                        Console.WriteLine("MQException caught: {0} - {1}", mqe.ReasonCode, mqe.Message);
                        break;
                    }
                }
            } 
```

包含代码示例的 IBM 安装介质可作为[SupportPac MC75](http://ibm.co/SupptPacMC75)下载。如果出于某种原因您需要后级客户端，可以从 SupportPacs[主页](http://ibm.co/SupptPacs)获得它们。但是，请记住，在以后的版本中有很多工程设计，使用最新版本会更好。任何版本的 MQ 客户端都可以与任何版本的 QMgr 一起使用，但很明显，您获得的功能要么仅在客户端（例如 client.ini 文件），要么在服务器端，无论 QMgr 为您提供什么级别。换句话说，使用带有 v7.0 QMgr 的 V7.5 客户端可以正常工作，但它不会为您提供 CHLAUTH 规则，因为 v7.0 QMgr 没有这些规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:11:29.410

这是我正在寻找的行，将光标移动到下一条消息，以便我可以阅读下一条消息。

> mGetMsgOpts.Options = MQC.MQGMO_WAIT | MQC.MQGMO_BROWSE_NEXT；

MQGetMessage 选项：

```
queue.Get(message);
Console.WriteLine("Message " + i + " got = " + message.ReadString(message.MessageLength));
mGetMsgOpts.Options = MQC.MQGMO_WAIT | MQC.MQGMO_BROWSE_NEXT; 
```

# android - rhino + env.rhino.js Android 上的 StackOverflowError

> ID：14406446
> 
> 赞同：3
> 
> 时间：2013-01-18T19:42:54.963
> 
> 标签：android, rhino, stack-overflow, envjs

我阅读了其他人在 Android 上成功使用 env.rhino.js 的报告。我还让 rhino 在 Android 应用程序中正常工作并执行简单的脚本，在 Java 和 JavaScript 之间双向传递参数。但是，当我尝试使用 env.rhino.js 时，无论我找到和使用哪个版本的 envJ，也无论哪个 rhino（尝试过 rhino1_7R2、rhino1_7R5 和 rhino1_7R5pre），我都会收到 StackOverflowError。基于活动的类中的代码是：

```
public void envjsTest() {
    String envJs = convertAssetToString("env.rhino.js");
    Context cx = ContextFactory.getGlobal().enterContext();
    cx.setOptimizationLevel(-1);
    cx.setLanguageVersion(Context.VERSION_1_8);
    try {
        Scriptable scope = cx.initStandardObjects();
        cx.evaluateString(scope, envJs, "env.rhino.js", 1, null);
    } finally {
        Context.exit();
    }
} 
```

也尝试了不同的版本设置，没有任何帮助。我得到的堆栈跟踪是：

```
01-18 14:27:18.389: ERROR/AndroidRuntime(2447): FATAL EXCEPTION: main
    java.lang.StackOverflowError
    at org.mozilla.javascript.Decompiler.appendString(Decompiler.java:208)
    at org.mozilla.javascript.Decompiler.addName(Decompiler.java:121)
    at org.mozilla.javascript.IRFactory.transformName(IRFactory.java:811)
    at org.mozilla.javascript.IRFactory.transform(IRFactory.java:120)
    at org.mozilla.javascript.IRFactory.transformInfix(IRFactory.java:738)
    at org.mozilla.javascript.IRFactory.transform(IRFactory.java:161)
    at org.mozilla.javascript.IRFactory.transformInfix(IRFactory.java:738)
    at org.mozilla.javascript.IRFactory.transform(IRFactory.java:161)
    at org.mozilla.javascript.IRFactory.transformInfix(IRFactory.java:738)
    at org.mozilla.javascript.IRFactory.transform(IRFactory.java:161)
    at org.mozilla.javascript.IRFactory.transformInfix(IRFactory.java:740)
    at org.mozilla.javascript.IRFactory.transform(IRFactory.java:161)
    at org.mozilla.javascript.IRFactory.transformInfix(IRFactory.java:740)
    at org.mozilla.javascript.IRFactory.transform(IRFactory.java:161)
    at org.mozilla.javascript.IRFactory.transformInfix(IRFactory.java:740)
    at org.mozilla.javascript.IRFactory.transform(IRFactory.java:161)
    at org.mozilla.javascript.IRFactory.transfor ... 
```

这怎么可能解决？同样，一个类似的函数可以执行非常简单的 JavaScript 代码。而且，请不要告诉我改用 WebView 来执行 JavaScript 代码。我需要一个具有 JavaScript 功能的“无头浏览器”，可以从 Android 服务调用，在后台进行一些网页抓取，而用户则在屏幕上忙于其他事情。

格雷格

# php - PHPSESSID cookie - 它是否授予对同一服务器上不同网站的访问权限？

> ID：14406448
> 
> 赞同：0
> 
> 时间：2013-01-18T19:42:59.210
> 
> 标签：php, session, cookies

这是我想知道的一个场景。假设我有以下内容：

1.  运行以下网站的 php/apache 网络服务器：

    /var/www/version1ofmyapp/

    /var/www/version2ofmyapp/

2.  cookie 在用户的机器上启用。

3.  Web 应用程序在登录/注销时将数据写入会话

登录到 version1ofmysite（从而创建一个名为 PHPSESSID 的 cookie）是否可以让我访问 version2ofmysite？例如，我登录到站点的版本 1，然后将 URL 更改为版本 2，它只是让我进入，就好像我已经通过身份验证一样。我想更好地理解为什么会这样。

谢谢。

**编辑1：**

同域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:49:36.790

cookie 是为域定义的，并且可以为路径定义。因此，您可以限制 cookie 的发送。

如果您有一个在两个应用程序中使用的 sessionID 并使用相同的会话存储，您可以访问保存在会话中的信息。

因此，您登录的信息将用于两个应用程序。您可以更改会话的名称 (http://php.net/manual/en/function.session-name.php) 以防止这种情况发生，或者更改会话存储 (http://php.net/manual/ en/function.session-save-path.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:50:55.380

在您的 php.ini 文件中，您可以配置服务器以允许这样做：

```
session.cookie_domain = ".mydomain.com" 
```

这将允许子域访问 cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T19:53:17.123

cookie PHPSESSID 仅限于创建它的域，并且只会发送到该域或子域。如果您在同一台服务器上有多个域，则每个域都有不同的 PHPSESSID cookie。

如果您使用子域并希望在它们之间共享会话，则可以在调用 session_start() 之前使用 session_set_cookie_params($lifetime_in_seconds, '/', '.mydomain.com') 以便在所有子域之间共享相同的会话。

cookie 的范围是按主机名（误导性地称为域），然后是名称。只有当它们用于不同的域（主机）时，您才能拥有两个名为 PHPSESSID 的 cookie。单个域不能有两个名称相同的 cookie。如果您尝试这样做，则将其视为对已设置的更改。

# python - 在 Python 中迭代列表时修改列表的值？

> ID：14406449
> 
> 赞同：6
> 
> 时间：2013-01-18T19:43:14.333
> 
> 标签：python

例如：

```
def update_condition(self, type, params):
    for condition in self.conditions:
        condition_loaded = json.loads(condition)
        if condition_loaded['type'] == type:
            condition_loaded['params'] = params
            condition = json.dumps(condition_loaded) 
```

上面的代码什么都不做，因为条件不是引用。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T19:51:01.813

你可以使用`enumerate`：

```
def update_condition(self, type, params):
    for i,condition in enumerate(self.conditions):
        condition_loaded = json.loads(condition)
        if condition_loaded['type'] == type:
            condition_loaded['params'] = params
            self.conditions[i] = json.dumps(condition_loaded) 
```

但是，总的来说，使用辅助函数和列表推导，这些东西会更干净一些：

```
def helper(condition,type,params)
    loaded = json.loads(condition)
    if loaded['type'] == type:
       loaded['params'] = params
       return json.dumps(loaded)
    return condition

...

def update_condition(self, type, params):
    self.conditions = [helper(c,type,params) for c in self.conditions] 
```

应该注意的是，第二个解决方案不会更新列表 - 换句话说，如果您对此列表有其他引用，它们不会受到影响。如果需要，您可以使用切片分配非常轻松地进行替换：

```
def update_condition(self, type, params):
    self.conditions[:] = [helper(c,type,params) for c in self.conditions] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:45:38.100

您可以使用列表理解：

```
def update_single_condition(self, condition, type, params):
    condition_loaded = json.loads(condition)
    if condition_loaded['type'] == type:
        condition_loaded['params'] = params
    return json.dumps(condition_loaded)

def update_conditions(self, type, params): 
    self.conditions = [self.update_single_condition(c, type, params) for c in self.conditions] 
```

# orchardcms - 在 Orchard CMS 自定义表单中创建期间保留字段的顺序

> ID：14406454
> 
> 赞同：3
> 
> 时间：2013-01-18T19:43:23.800
> 
> 标签：orchardcms, orchardcms-1.6

我创建了一个[自定义表单](http://orchardcustomforms.codeplex.com/)，并以特定顺序添加字段。该表格就像一个调查问卷，其中下一个问题是其上一个问题的后续问题。

我尝试修改placement.info文件，但我只能修改每个控件类型的序列（日期时间之前的数字，文本之前的布尔值）......

我尝试使订单号相同，希望在创建时字段的“默认”排序将接管 - 不高兴。

```
<Place Fields_Input_Edit="Content:2.0"/>
<Place Fields_Input="Content:after"/>
<!-- Numeric -->
<Place Fields_Numeric_Edit="Content:2.0"/>
<Place Fields_Numeric="Content:after"/> 
```

所以我想下一步是使用形状设计器，检查“小部件”并覆盖它（Shape->Alternate-Create）？它会生成一个文件（例如 Widget-url-membership-online-application.cshtml ），我想我会从这个文件开始工作吗？

该文件的内容只是显示了这一点：

```
@Display(Model.Content) 
```

如何处理特定领域，以便我可以执行以下操作：

```
<label for="FirstName">@T("Your First Name")</label>
<input id="FirstName" class="text" name="FirstName" type="text" value="@Model.??????"/> 
```

一定有更简单的方法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T21:18:49.523

您可以使用内容类型编辑器中的 Edit Placement 按钮，或者...

您可以按照此处的说明定位特定字段：http: [//docs.orchardproject.net/Documentation/Understanding-placement-info#](http://docs.orchardproject.net/Documentation/Understanding-placement-info#) "Place"Element

例如，`<Place Fields_Common_Text-Occupation="Content:2"/>`

您还可以使用匹配标签来定位特定的内容类型或特定的 URL（请参阅我上面提到的同一主题）。

# ruby - 从特定目录运行 shell 命令

> ID：14406455
> 
> 赞同：0
> 
> 时间：2013-01-18T19:43:24.417
> 
> 标签：ruby, shell

Ruby 似乎`/bin/sh`用作 shell 解释器，它在 *nix 机器上不理解`/bin/bash`诸如`pushd`. 这就是`irb`告诉我的：

```
1.9.3-p327 :011 > `pushd /tmp; echo foo`
sh: 1: pushd: not found
=> "foo\n" 
```

在 OSX 上，`/bin/sh`是 bash 的别名，所以上面的代码片段在那里运行良好。有没有办法强制 *nix 机器上的 Ruby`/bin/bash`用于解释 shell 命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T20:04:38.427

在 Ruby 中使用 Bash 命令`pushd`是没有意义的，因为这些命令会影响 Bash 的 Bash 解释器的内部状态，并且当您使用反引号或从 Ruby 运行 shell 命令时`system`，它会创建一个新的子进程，运行该命令，然后**关闭**该子进程。

这意味着即使您以某种方式设法`pushd`从 Ruby 中作为 Bash 命令运行，会发生的情况是 Bash 子进程将启动，将目录推送到目录堆栈，然后退出。您对目录堆栈所做的更改将与所有其他子进程的数据一起被删除 - 下次您使用 shell 命令时，您将不会在该目录中。

您是在 Ruby 中编写脚本，而不是在 Bash 中 - 内部 Bash 命令在这里没有意义，因此您需要使用 Ruby 等效项。例如，不要写：

```
system 'pushd /tmp'
system 'touch file_in_tmp'
system 'popd' 
```

哪个行不通，你想做的是：

```
Dir.chdir '/tmp' do
    system 'touch file_in_tmp'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:02:43.593

*/bin/sh*在 ruby​​ 源代码中是硬编码的。所以没有办法改变默认的shell。您可以使用其他建议的方法之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:59:44.567

做

```
Dir.chdir("/bin") 
```

然后执行您的命令：

```
`pushd /tmp; echo foo` 
```

# jquery - 加载外部 html 然后执行脚本

> ID：14406461
> 
> 赞同：1
> 
> 时间：2013-01-18T19:43:58.427
> 
> 标签：jquery, ajax

首先，如果标题含糊不清，请原谅我，似乎想不出要问的正确问题。

无论如何，我正在尝试使用 ajax 加载函数使用 JQuery 加载外部 html，如下所示：

```
$("a").click(function(){
    $(".contentWrapper").load(pageURL+" .externalContent","ajax=true",function(){
    //some more code here
    });
}); 
```

它的作用（根据我的理解）是在从返回的 html 数据中解析它之后，从 pageURL 指向的页面加载具有类 .externalContent 的元素的内容。

我的问题是 .externalContent 在其原始页面中有一些与之关联的脚本。加载 .externalContent 后，我​​应该怎么做才能执行这些脚本。

简单地将脚本放在调用页面中是行不通的，因为当脚本在 document.ready 上被调用时，div 不存在，至少从我的理解来看是这样。

我也尝试将脚本放在 ajax 成功选项中，但我似乎无法让它工作。对不起，如果我没有多大意义，我整晚都在这。我是 JQuery 的新手，希望能得到任何帮助，包括更好的方法来编写这样的代码。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:54:48.700

这里可以使用 ajaxComplete 函数或委托函数

[http://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)

```
$(".contentWrapper").ajaxComplete(function(){
 //execute even handlers here
}); 
```

或者

jquery delegate 这对于选择器来说是通用的，即使在它加载了 ajax [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

```
$("table").delegate("td", "click", function() {
  $(this).toggleClass("chosen");
}); 
```

# mysql - SQL 多连接分组

> ID：14406470
> 
> 赞同：1
> 
> 时间：2013-01-18T19:44:37.960
> 
> 标签：mysql, sql, join, group-by, group-concat

我有三张桌子：

```
product:
    id
    name

product_image:
    product_id
    url

product_detail:
    product_id
    _key
    value 
```

我想做的就是在一个查询中获取有关特定产品的所有信息。我正在获取 group_concatenated 图像和详细信息，但分组有问题（我认为是这样）。有时我会得到双倍的图像。我的查询是：

```
 SELECT p.id, p.name,
GROUP_CONCAT(i.url ORDER BY i.id ASC SEPARATOR "{^sep^}") as imgs,
GROUP_CONCAT(d._key, "{^val^}", d.value ORDER BY d.id asc separator "{^sep^}") AS details
FROM product p
LEFT JOIN product_image i ON p.id = i.product_id
LEFT JOIN product_detail d ON p.id = d.product_id
WHERE p.id = ...
GROUP BY i.product_id, d.product_id 
ORDER BY p.id ASC LIMIT ...; 
```

而且，顺便说一句，我使用“{^sep^}”作为分隔符，以便稍后分解（在 php 中）结果。我想确定，该 url（和详细信息）不会以错误的方式展开（例如，如果我使用“，”作为分隔符，并且某些 url 还包含“，”）。这是一个好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:12:16.000

您应该按 p.id 和 p.name 分组。您还可以使用 DISTINCT：

```
SELECT p.id, p.name,
GROUP_CONCAT(i.url ORDER BY i.id ASC SEPARATOR "{^sep^}") as imgs,
GROUP_CONCAT(d._key, "{^val^}", d.value ORDER BY d.id asc separator "{^sep^}") AS details
FROM product p
LEFT JOIN product_image i ON p.id = i.product_id
LEFT JOIN product_detail d ON p.id = d.product_id
WHERE p.id = ...
GROUP BY p.id, p.name
ORDER BY p.id ASC LIMIT ...; 
```

或者

```
SELECT DISTINCT p.id, p.name,
GROUP_CONCAT(i.url ORDER BY i.id ASC SEPARATOR "{^sep^}") as imgs,
GROUP_CONCAT(d._key, "{^val^}", d.value ORDER BY d.id asc separator "{^sep^}") AS details
FROM product p
LEFT JOIN product_image i ON p.id = i.product_id
LEFT JOIN product_detail d ON p.id = d.product_id
WHERE p.id = ...
GROUP BY i.product_id, d.product_id 
ORDER BY p.id ASC LIMIT ...; 
```

# .net - 如何通过更改 SqlDataSource 中的 SelectCommand 字符串来更新 GridView

> ID：14406474
> 
> 赞同：0
> 
> 时间：2013-01-18T19:44:53.687
> 
> 标签：.net, mysql, gridview, sqldatasource, mysql-connector

好的 - 我认为这应该很简单/基本，但我浏览了许多有类似问题的帖子，但仍然不清楚如何做到这一点。

基本设置如下 - 我在页面上有一个名为“产品”的文本框，它会在文本更改时回发。

在页面加载中，我执行以下操作：

```
protected void Page_Load(object sender, EventArgs e)
{
   prods.SelectCommand = "SELECT id, pID, pName FROM prods WHERE (pID LIKE '%" + product.Text + "%')";
   prodsTable.DataBind();
} 
```

以上不使用新的 SelectCommand 值更新表。从其他一些帖子 - 我认为这可能与页面加载事件序列有关，并且可能不会发生表绑定？

顺便说一句，我也尝试使用参数（下面的代码）来做到这一点 - 这也不起作用。也许有一个简单的解决方法（与以编程方式更改上述内容相比？）

在此先感谢 - 我想让它以任何一种方式工作（以编程方式或参数方式）。

完整代码如下：

```
<asp:TextBox ID="product" runat="server" AutoPostBack="True"></asp:TextBox>

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
     DataKeyNames="id" DataSourceID="prods" AllowPaging="True" 
     AllowSorting="True" AutoGenerateEditButton="True">
     <Columns>
          <asp:BoundField DataField="pID" HeaderText="Product ID" ReadOnly="True" 
               SortExpression="pID" />
          <asp:BoundField DataField="pName" HeaderText="Product Name" 
                SortExpression="pName" />
     </Columns>
</asp:GridView>

<asp:SqlDataSource ProviderName="MySql.Data.MySqlClient" ID="prods" runat="server" 
     CancelSelectOnNullParameter="false" ConnectionString="<%$ mystring %>" 
     SelectCommand="SELECT id, pID, pName FROM prods WHERE (pID LIKE '%@productFilter%')">
     <SelectParameters>
          <asp:ControlParameter ControlID="product" DefaultValue="" 
               Name="productFilter" PropertyName="Text" Type="String" />
     </SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:42:30.400

尝试这个：`SelectCommand="SELECT id, pID, pName FROM prods WHERE pID LIKE '%' + @productFilter + '%'"`

# javascript - 根据父文件夹在文件夹中搜索特定文件类型

> ID：14406478
> 
> 赞同：2
> 
> 时间：2013-01-18T19:45:00.147
> 
> 标签：javascript, search, directory, file-type

我正在尝试设置一个系统来搜索特定文件类型，在本例中为 .aep，在随时间变化的文件夹中

例如，在名为 MER 的文件夹中是名为 Mermaid_v03 的文件夹，当此文件更新到另一个部门时，它将变为 Mermaid_v04，因此无法对地址进行硬编码。

所以父文件夹总是包含文件夹的前三个字母，其中包含我需要的大写字母 aep。我写了以下内容。

```
//Get the last folder name in the path
var netPath =Folder("//networkpath/MER")
var justName = charFileLoc.substring(charFileLoc.lastIndexOf("/")+1);

var FolderItems = netPath.getFiles();

for (x = 0; x < FolderItems.length; x++) {

//Search for aep
if (FolderItems[i].name.match(justName)) {

    alert("I see a folder that starts with "+justName);  
    var matchFolder = Folder(FolderItems[i]); 

         for (x = 0; x < matchFolder.length; x++) {

            //Search new folder for aep
            if (matchFolder[i].name.match(/\.(aep)$/)){

                alert("I see an aep file called "+matchFolder[i])
               }
            }
       } 
```

我不确定我哪里出错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:16:51.817

抱歉，我在此处添加 netPath var 时更改了它，以使其更易于理解。应该是这样的：

```
//Get the last folder name in the path
var charFileLoc =Folder("//networkpath/MER")
// Grab just the last folder name
var justName = charFileLoc.substring(charFileLoc.lastIndexOf("/")+1);

var FolderItems = charFileLoc.getFiles();

for (x = 0; x < FolderItems.length; x++) {

//Search for aep
if (FolderItems[i].name.match(justName)) {

    alert("I see a folder that starts with "+justName);  
    var matchFolder = Folder(FolderItems[i]); 

         for (x = 0; x < matchFolder.length; x++) {

            //Search new folder for aep
            if (matchFolder[i].name.match(/\.(aep)$/)){

                alert("I see an aep file called "+matchFolder[i])
               }
            }
       } 
```

我最大的问题是使用 justName 以不区分大小写的方式搜索文件夹的开头。目前我相信它正试图与 MER 完全匹配。此外，当我尝试检查 FolderItems 中列出的文件时，它们没有正确显示名称，它们都被命名为 ds_store

# java - 变量的值在远程进程中不会改变

> ID：14406486
> 
> 赞同：1
> 
> 时间：2013-01-18T19:45:16.967
> 
> 标签：java, android, process

所以，我有一个活动和一个服务。服务做了很多工作，挂起我的主应用程序的线程，所以我决定在远程进程中运行这个服务（：清单中的远程）。尽管服务在主进程中运行时一切正常，但在远程进程中发生了一些奇怪的事情。

在我的服务中 onCreate 方法结束时，我将 SERVICE_RUNNING 变量的值设置为*true*。Log.d 上面的一行确认，它的值确实是*true*。但是当我从我的活动中调用静态方法 isRunning()（它返回 SERVICE_RUNTIME 的值）时，它返回 false。这是我的代码：

服务：

```
public class PlayService extends Service {
    private static Boolean RUNNING = false;

    @Override
    public void onCreate() {
        super.onCreate();
        SERVICE_RUNNING = true;
        Log.d("ctw", "onCreate() " + SERVICE_RUNNING); // "onCreate() true" in logcat
    }

    public static Boolean isRunning()
    {
        Log.d("ctw", "isRunning() " + SERVICE_RUNNING);
        return SERVICE_RUNNING;
    }
} 
```

活动：

```
if(PlayService.isRunning())
{
    // executes when service is running and PlayService is not a remote process
} else {
    // executes always when PlayService is a remote process
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:50:57.483

您说您有单独的流程。所以每个进程都有自己的 PlayService 加载类和自己的 RUNNING 标志实例。您不能通过不同进程之间的静态变量共享数据。

在单独的线程中运行服务，而不是进程。

如果您真的想要不同的进程而不是使用 AIDL 与服务进行通信。

# backbone.js - 从 Backbone.js 中的模型执行 Ajax 请求是否正确？

> ID：14406487
> 
> 赞同：1
> 
> 时间：2013-01-18T19:45:18.493
> 
> 标签：backbone.js, backbone-routing

从 Backbone.js 中的“模型”执行 Ajax 请求是否正确？从“路由器”来看是否更正确？我不将 RESTful 用于 Backbone（出于其他原因）。当我说“做 Ajax 请求”时，我的意思是在模型中实现了 Ajax 功能。该函数可以在模型之外调用（并且是）。

我的 Web 应用程序不使用路由器（仅视图和模型）。当我在应用程序中导航时，我不想在浏览器中有 url 路由。会出现什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T20:26:49.100

您的路由器应该尽可能干净，所以绝对不存在。

在您的模型中，您定义模型的 URL。

在您看来，您只需调用 model.fetch()。

我使用（并看到）的最常见模式是这样做：

```
var MyApp.myModel = Backbone.Model.extend({
    url: '/someResourceUrl'
});

var MyApp.myView = Backbone.View.extend({
    initialize: function() {
        this.model.bind("change",this.render,this);
        this.model.fetch();
    },
    render: function() {
        alert('do awesome stuff here');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T03:37:47.060

将AJAX请求放在模型中是正确的，因为它是业务逻辑。这是根据一般 MVC 原则以及主干.js 文档：

> “如果您的应用程序需要从服务器、本地存储、cookie 等收集数据，那么模型就是应该发生的地方。事实上，模型是整个系统中唯一应该知道有关 XMLHttpRequest 的任何地方。您可能在模型层中有代码，可以为您加载代码并创建模型对象。” - [http://michaux.ca/articles/mvc-architecture-for-javascript-applications](http://michaux.ca/articles/mvc-architecture-for-javascript-applications)
> 
> “模型-视图-控制器 (MVC) 是一种软件架构模式，它将信息的表示与用户与它的交互分开。[1][2] 该模型由应用程序数据、业务规则、逻辑和功能组成。” - [http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)
> 
> “Backbone.Model – 就像 Rails 模型减去类方法。在业务逻辑中包装一行数据。” - [http://backbonejs.org/](http://backbonejs.org/)

# mysql - Node.js - mysql 查询超时

> ID：14406488
> 
> 赞同：5
> 
> 时间：2013-01-18T19:45:23.933
> 
> 标签：mysql, node.js

如何在 node.js 中为 mysql 查询设置超时？

```
/*...*/ 

var mysql = require("mysql");

/* ...*/ 

app.get("/", function(req, res) { 
     connection.query("SELECT ...", function(err, rows, fields) {
 /* I want this query to fail if the ^_ callback is not invoked within x seconds */

     });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:52:12.167

我建议你查一下这个链接：

[http://www.exratione.com/2013/01/nodejs-connections-will-end-close-and-otherwise-blow-up/](http://www.exratione.com/2013/01/nodejs-connections-will-end-close-and-otherwise-blow-up/)

但是该模块目前似乎没有任何支持。

# qt - QWebView 在 Windows 上不显示任何内容

> ID：14406489
> 
> 赞同：1
> 
> 时间：2013-01-18T19:45:26.310
> 
> 标签：qt, qtwebkit

我正在将 QT 应用程序从 linux 移植到 Windows。这是一个非常奇怪的过程，现在我遇到了一个我无法解决的问题。我已经编译了代码并且它运行了，但是我使用的是 QWebView，当在 linux 上它在 Windows 上正确显示页面（谷歌地图）时，我只看到白色背景。我读过也许我需要一些额外的图像库，但我不知道名字。有谁知道如何解决这个问题？

编辑：图像或 js 可能是这种情况 - 添加到页面显示的 html 输入类型 = 文本。我已经从 QTPATH/plugins/imageplugins 复制到 MyAp/imageformats 图像插件，但没有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:56:27.087

这应该有助于[http://www.qtcentre.org/threads/41333-QWebview-not-displaying-jpg-gif-png-images-on-another-machines](http://www.qtcentre.org/threads/41333-QWebview-not-displaying-jpg-gif-png-images-on-another-machines)

还有这个[http://doc.qt.digia.com/qt/deployment-plugins.html](http://doc.qt.digia.com/qt/deployment-plugins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:04:27.700

真正有帮助的是设置值为 1 的 QT_DEBUG_PLUGINS 环境变量并使用 qt 打开程序，在控制台中我可以看到我缺少 OpenSSl 库。安装这个库解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T12:41:42.087

我在 Windows/MinGW 应用程序上遇到了同样的问题。我在安装中捆绑了 2 个 dll，libeay32.dll 和 ssleay32.dll，之后 QWebView 能够发出 https:// 请求。

我从恰好安装在我的计算机上的 TortoiseSVN 安装中复制了这些 DLL。

# java - 查找字符串中的所有回文

> ID：14406490
> 
> 赞同：0
> 
> 时间：2013-01-18T19:45:31.767
> 
> 标签：java, algorithm

> **可能的重复：**
> [寻找回文的算法](https://stackoverflow.com/questions/2033903/algorithm-to-find-palindromes)

如何在字符串中找到所有回文，例如：

“AA BB AA TTT AA BB”

我知道如何在单个字符串中找到回文，如果我通过删除“”字符来合并这些字符串，我仍然可以找到回文......但如果我这样做，我如何重建原始单词......

或者是否有任何其他可能需要更少时间的方法......任何线索......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T20:07:21.487

编辑：我假设您要问的是：给定一串字符，我如何确定所有可能的回文子串？

您可以从单个字符开始构建，这些字符本身就是微不足道的回文，然后考虑所有长度为 2 的子字符串，然后是所有长度为 3 的子字符串。

幸运的是，回文具有递归关系，因此如果您删除了第一个和最后一个字母，您仍然必须有一个回文。因此，如果一个长度为 4 的字符串是回文串（如 ABBA），那么去掉第一个和最后一个字符的子串（'BB'）也一定是回文串。

考虑一个动态规划解决方案来计算任何给定的字符串，因为上面定义的递归关系满足 DP 的最佳子问题要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:13:48.653

问题实际上归结为查找所有子字符串。在您遍历字符串中的每个“单词”（AA、BB、AA、TTT 等）之后，您可以将每个单词视为单个字符，因此 map `AA->a`、`BB->b`等`TTT->t`，现在从您的示例中新“减少”字符串是`abatab`. 查找所有子串`abatab`并检查每个子串是否是回文，如果是，则可以通过在地图中查找单词来打印出原始字符串。一个例子是`aba -> AABBAA`。

如果你的单词不是全部由相同的字母组成，问题就会变得更有趣。如果你有`AB BA`. 在这种情况下`AB`和`BA`不是回文，但它们的串联是`ABBA`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:14:45.603

[SauceMaster 的回答](https://stackoverflow.com/questions/14406490/finding-all-palindromes-in-a-string/14406827#14406827)描述了如何解决回文问题。

我只想回答这个问题。

> 我知道如何在单个字符串中找到回文，如果我通过删除“”字符来合并这些字符串，我仍然可以找到回文......但如果我这样做了，我如何重建原始单词？

首先复制字符串。

# c# - 是否可以使用代码将项目添加到 C# 设置

> ID：14406494
> 
> 赞同：4
> 
> 时间：2013-01-18T19:45:41.330
> 
> 标签：c#, settings

我想在我的 C# 应用程序设置中添加一些变量，有没有办法用代码做到这一点。我可以通过去项目，然后 myApp 属性等来做到这一点，但我想在应用程序运行时添加设置，所以我应该通过代码来完成。或者我怎样才能将设置类型设置为类似的 LinkedList<>，以便向其中添加一些项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:50:48.520

这是我用来操作现有 AppSetting 的一些代码：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
config.AppSettings.Settings["PrinterID"].Value = "Some Value";
config.Save(ConfigurationSaveMode.Modified);
ConfigurationManager.RefreshSection("appSettings"); 
```

要添加新的 AppSetting，您可以将第二行更改为：

```
config.AppSettings.Settings.Add("PrinterID", "Some Value"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:47:38.953

您可以使用[ConfigurationManager.AppSettings](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)属性。`LinkedList`它使用[NameValueCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)结构而不是 a 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:04:03.487

只是一个提示：这样你不能（直接）添加变量，但你可以保存一个变量：

1 - 在设置中声明一个变量并将其范围设置为用户而不是应用程序；更改它的值，然后调用 Properties.Settings.Default.Save(); 但是这不会保存在正在执行的程序集中，而是会进入该应用程序的正确 AppData 文件夹。

2 - 要添加新值，您可以定义一个可序列化的键值集合（如@keyboardP 建议的 NameValueCollection 即）设置并在运行时更改它的值。

3 - （完全不同的方法：）您可以为此目的使用另一个单独的功能链（例如 xml、txt、ini 文件或您的本地或嵌入式数据库），因为无论如何您必须处理设置的并发读取Properties.Settings.Default 没有提供开箱即用的功能（尽管如果您的应用程序中有任何并行部件，情况就是如此）。

# c# - 访问对象属性时出错“在所选数据源上找不到名为 {PROPERTY_NAME} 的字段或属性”

> ID：14406499
> 
> 赞同：1
> 
> 时间：2013-01-18T19:46:04.670
> 
> 标签：c#, entity-framework, properties

将某些代码移至服务器时遇到问题。代码在我的本地机器上运行良好。我在本地机器上访问这个属性没有问题。但是，当我将它上传到我的开发服务器时，我收到了这个错误：

> 在所选数据源上找不到名为“CreatedBy.FullName”的字段或属性。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.HttpException：在所选数据源上找不到名为“CreatedBy.FullName”的字段或属性。源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [HttpException (0x80004005)：在所选数据源上找不到名为“CreatedBy.FullName”的字段或属性。] System.Web.UI.WebControls.BoundField.GetValue(Control controlContainer) +1788095 System.Web.UI .WebControls.BoundField.OnDataBindField(Object sender, EventArgs e) +67 System.Web.UI.Control.OnDataBinding(EventArgs e) +91 System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding) +92 System.Web.UI .Control.DataBind() +15 System.Web.UI.Control.DataBindChildren() +201 System.Web.UI.Control.DataBind(布尔 raiseOnDataBinding) +101 System.Web.UI.Control.DataBind() +15 系统.Web.UI.WebControls.GridView.CreateRow(Int32 rowIndex, Int32 dataSourceIndex, DataControlRowType rowType, DataControlRowState rowState, Boolean dataBind, Object dataItem,DataControlField[] 字段、TableRowCollection 行、PagedDataSource pagedDataSource) +166 System.Web.UI.WebControls.GridView.CreateChildControls(IEnumerable dataSource, Boolean dataBinding) +3098 System.Web.UI.WebControls.CompositeDataBoundControl.PerformDataBinding(IEnumerable data) +66 System.Web.UI.WebControls.GridView.PerformDataBinding（IEnumerable 数据）+14 System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback（IEnumerable 数据）+128 System.Web.UI.DataSourceView.Select（DataSourceSelectArguments 参数，DataSourceViewSelectCallback 回调） +33 System.Web.UI.WebControls.DataBoundControl.PerformSelect() +143 System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74 System.Web.UI.WebControls.GridView.DataBind() +4 System.Web .UI。WebControls.BaseDataBoundControl.EnsureDataBound() +66 System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() +75 System.Web.UI.Control.EnsureChildControls() +102 System.Web.UI.Control.PreRenderRecursiveInternal() +42 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+2496WebControls.CompositeDataBoundControl.CreateChildControls() +75 System.Web.UI.Control.EnsureChildControls() +102 System.Web.UI.Control.PreRenderRecursiveInternal() +42 System.Web.UI.Control.PreRenderRecursiveInternal() +175 系统。 Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）+2496WebControls.CompositeDataBoundControl.CreateChildControls() +75 System.Web.UI.Control.EnsureChildControls() +102 System.Web.UI.Control.PreRenderRecursiveInternal() +42 System.Web.UI.Control.PreRenderRecursiveInternal() +175 系统。 Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）+2496PreRenderRecursiveInternal() +42 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI. Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) + 2496PreRenderRecursiveInternal() +42 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI. Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) + 2496Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）+2496Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）+2496

这是 aspx 页面的样子（截图）：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="ObjectDataSource1" DataKeyNames="ApplicationID" CellPadding="4" ForeColor="#333333" GridLines="None">
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
        <Columns>
            <asp:CommandField ShowEditButton="True" ShowDeleteButton="True" />
            <asp:HyperLinkField DataNavigateUrlFields="applicationID" DataNavigateUrlFormatString="~/Admin/ManageRoles.aspx?applicationID={0}" Text="View App Roles" />
            <asp:HyperLinkField DataNavigateUrlFields="applicationID" DataNavigateUrlFormatString="~/Admin/ManageApplicationUsers.aspx?applicationID={0}" Text="View App Users" />
            <asp:BoundField DataField="ApplicationID" HeaderText="ApplicationID" ReadOnly="True" SortExpression="ApplicationID" />
            <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
            <asp:TemplateField HeaderText="Description" SortExpression="Description">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Description") %>' TextMode="MultiLine"></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("Description") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="CreatedBy.FullName" HeaderText="Created By" SortExpression="CreatedByID" ReadOnly="True" />
            <asp:BoundField DataField="CreatedDate" HeaderText="CreatedDate" ReadOnly="True" SortExpression="CreatedDate" />
            <asp:BoundField DataField="ModifiedBy.FullName" HeaderText="Modified By" SortExpression="ModifiedByID" NullDisplayText="&lt;i&gt;null&lt;/i&gt;" ReadOnly="True" />
            <asp:BoundField DataField="ModifiedDate" HeaderText="ModifiedDate" ReadOnly="True" SortExpression="ModifiedDate" NullDisplayText="&lt;i&gt;null&lt;/i&gt;" />
        </Columns>
<!-- SNIP: styling -->
</asp:GridView> 
```

* * *

**更新** 我已经通过使用一种解决方法来运行我的代码。如果我使用模板字段而不是绑定字段，它将运行。例如，我使用这个：

```
<asp:TemplateField HeaderText="Description" SortExpression="Description">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("CreatedBy.FullName") %>' TextMode="MultiLine"></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("CreatedBy.FullName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField> 
```

而不是这个：

```
<asp:BoundField DataField="CreatedBy.FullName" HeaderText="Created By" SortExpression="CreatedByID" ReadOnly="True" /> 
```

我很高兴它现在可以工作，但坦率地说，我也想知道问题所在！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:27:32.720

你的问题的答案是这样的：

A`BoundField`显示来自您`datasource`的**文本**的信息，并且`TemplateField`允许混合使用`HTML`,`WebControls`和`data-binding`语法。

# android - OpenGLES 2.0 中的 Android 垂直和水平滚动

> ID：14406502
> 
> 赞同：0
> 
> 时间：2013-01-18T19:46:19.520
> 
> 标签：android, scroll, opengl-es-2.0

谁能给我一个关于如何添加垂直和水平滚动直到缩放的 GLSurfaceview 末尾的示例。我尝试过使用 Matrix.Translate 和 Matrix.Rotate 与 0 度角，但都不起作用。

我用过的方法。在这里 dx 和 dy 是我从 onTouch 获得的滚动量乘以一个常数因子：

方式1：

@Override public void onDrawFrame(GL10 未使用) {

```
mOffset = mPositionX + mPositionY;

// Draw background color
GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

// Set the camera position (View matrix)
Matrix.setLookAtM(mVMatrix, 0, mOffset, mOffset, -3, mOffset, mOffset, 0f, 0.0f, 1.0f, 0.0f);

// Calculate the projection and view transformation
Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

mGraph.draw(mMVPMatrix);

mLine.draw(mMVPMatrix); 
```

}

方式2：

@Override public void onDrawFrame(GL10 未使用) {

```
mOffset = mPositionX + mPositionY;
Matrix.frustumM(mProjMatrix, 0, mSurfaceRatio * zoomFactor, -mSurfaceRatio * zoomFactor, -1 * (zoomFactor + mOffset), zoomFactor + mOffset, 3, 7);
// Draw background color
GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

// Set the camera position (View matrix)
Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0.0f, 1.0f, 0.0f);

// Calculate the projection and view transformation
Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

mGraph.draw(mMVPMatrix);

mLine.draw(mMVPMatrix); 
```

}

方式3：

@Override public void onDrawFrame(GL10 未使用) {

```
mOffset = mPositionX + mPositionY;
// Draw background color
GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

Matrix.rotateM(mRotationMatrix, 0, 0, 0, mOffset, 0);

Matrix.multiplyMM(mProjMatrix, 0, mProjMatrix, 0, mRotationMatrix, 0);

// Set the camera position (View matrix)
Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0.0f, 1.0f, 0.0f);

// Calculate the projection and view transformation
Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

mGraph.draw(mMVPMatrix);

mLine.draw(mMVPMatrix); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:51:02.280

事实证明，Android OpenGL 示例中的顶点着色器是错误的。它在文档中是正确的，但如果您下载示例，它的着色器代码错误。正如 tim 在以下链接中所建议的那样：

[使用 setLookAtM 方法的 Android OpenGL 怪异](https://stackoverflow.com/questions/11924020/android-opengl-weirdness-with-the-setlookatm-method)

# javascript - 使用正则表达式处理 Javascript 字符串

> ID：14406505
> 
> 赞同：1
> 
> 时间：2013-01-18T19:46:34.593
> 
> 标签：javascript, regex

我有一个这样的字符串

```
"#G=0&path=folder1" 
```

我想在“path=”之后找到一个部分，在这种情况下是文件夹 1，并将其替换为其他内容，因此字符串将如下所示：

```
"#G=0&path=file2" 
```

如何使用 Javascript 正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:48:29.117

一种可能的正则表达式解决方案：

```
"#G=0&path=folder1".replace(/(&?path=).*$/, "$1" + "file2"); 
```

或者你可以在没有正则表达式的情况下做到这一点：

```
str.substring(0, str.lastIndexOf("=") + 1) + "file2"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:49:52.713

例如，参见[Regular-Expressions.info](http://www.regular-expressions.info/)，[MDN replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)和[here](http://www.sttmedia.com/regular-expressions)，并自学正则表达式，它们非常有用。

```
var str = '#G=0&path=folder1';
var file = 'file2';

str = str.replace( /^(#G=0&path=).+$/, '$1' + file );

console.log( str );    // #G=0&path=file2 
```

# android - NPE关于从不同包装膨胀布局

> ID：14406510
> 
> 赞同：3
> 
> 时间：2013-01-18T19:46:58.390
> 
> 标签：android, nullpointerexception, layout-inflater

我从与我的（相同签名）不同的 apk（插件）扩展布局并将其嵌入到我的 Activity 类（核心）中。

```
XmlResourceParser freeLayoutRes = getLayoutResourceByResourceId(R.layout.freelayout);
View freeLayoutView = LayoutInflater.from(freeLayout.getContext()).inflate(freeLayoutRes, freeLayout); 
```

freeLayout 是可嵌入的 freelayoutres 的父级。getLayoutResourceByResourceId 方法是对核心包的调用，它由包管理器获取资源，如下所示：

`getPackageManager().getResourcesForApplication(pluginapp).getLayout(layoutId))`

这很好用，但有些用户向我报告了 NullPointerException：

```
java.lang.NullPointerException
        at android.view.LayoutInflater.inflate(LayoutInflater.java:435)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
        at .... 
```

我无法解释和重现错误发生的原因（和时间）。在我的测试设备和不同的模拟器上，到目前为止还没有出现这个问题。用户堆栈跟踪中也没有提示解决这个问题（不同的设备，不同的 Android 版本，在应用程序启动时，返回到 Activity 后）。

**编辑：**它似乎主要发生在 Amazon Kindle Fire 设备（Android 2.3.4 和 4.0.4）上

有人看出问题了吗？如果需要更多信息，请询问。

任何帮助和提示都会很棒，丹尼

# javascript - JavaScript：数组推送方法

> ID：14406513
> 
> 赞同：-4
> 
> 时间：2013-01-18T19:47:04.203
> 
> 标签：javascript

将文本视为数组变量，请解释下图所示的push方法语句：

```
var text = [];
text.push(document.getElementById('name').innerHTML || 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:56:53.260

诀窍是空字符串在这样的布尔测试中被评估为假。

例子 ：

```
var a = "" || 0;          // a is set to 0 because "" is empty and is false
var b = "non-empty" || 0  // b is set to "non-empty" because it's not an empty string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:53:14.200

如果 id='name' 的 dom 元素的 HTML 内容不为空，它将添加到文本数组，否则将添加 0

# php - 无法从 http 请求中解压/解压缩 zip 文件

> ID：14406516
> 
> 赞同：0
> 
> 时间：2013-01-18T19:47:18.673
> 
> 标签：php, ziparchive, error-code

我正在发出一个 http 请求，它将返回我所有的压缩文件。但是，在尝试打开 zip 文件后，它返回一个整数。

```
$zip = zip_open("http://this/returns/zip/file");

while($zipFile = zip_read($zip)) 
{ 
    echo "Filename: " . zip_entry_name($zipFile) . "<br>"; 
    echo "Compressed Size: " . zip_entry_compresedsize($zipFile) . "<br>"; 
    echo "Real Size: " . zip_entry_filesize($zilFile) . "<br><br>"; 
} 
```

这里有什么问题，如何解决？提前致谢。

编辑：代码是 11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:01:47.497

正如评论中提到的@crontab，`zip_open`在失败时返回错误代码，如[文档中所述](http://www.php.net/manual/en/function.zip-open.php)：

> 返回值
> 
> 返回资源句柄以供以后与 zip_read() 和 zip_close() 一起使用，或者如果文件名不存在或出现其他错误，则返回错误数。

您可以通过将其与[本手册页](http://www.php.net/manual/en/zip.constants.php)上预定义的错误常量（特别是以`ER_`.

该页面上有一条评论显示每个常量的字面值是什么，但我不知道它有多准确。

* * *

我刚刚看到您的编辑，您看到的错误代码是 integer `11`。该错误代码是`ZIPARCHIVE::ER_OPEN`，这意味着 PHP 无法打开该文件。

您应该检查以确保您使用的文件名是准确的，并且该文件可以被 PHP 读取。`is_readable`在尝试打开任何文件之前，您可以使用该功能进行检查。

请记住，仅仅因为*您*可以在系统上打开文件并不意味着 PHP 可以。用户之间的文件权限不同，PHP 很可能不在您的用户帐户下运行。

* * *

好的，我刚刚意识到您正在尝试通过 URL 打开此文件。我不确定是否`zip_open`可以打开远程文件，但是在我的机器上使用我确定存在的远程文件进行快速测试似乎表明它不能。`is_readable`同样无法处理远程文件。

在这种情况下，最好的办法是下载远程文件，然后调用`zip_open`新创建的本地文件：

```
copy($remote_filename, $local_filename);
$zip = zip_open($local_filename);
if (is_resource($zip) {
  // process archive
} else {
  // handle error conditions
} 
```

# css - CSS 悬停和 IE8 的问题

> ID：14406518
> 
> 赞同：1
> 
> 时间：2013-01-18T19:47:26.003
> 
> 标签：css

我在使用 IE 8 时遇到问题。
我在页面上有 2 个表格单元格，我不希望下面的“悬停”代码起作用（它们有文本而不是链接）。
单元格位于 div transbox 中，
我添加了上面的“stopcellhover”来完成此操作。
它在所有浏览器中都可以正常工作（因此没有悬停效果和不透明度保持并且文本可见），除了 IE 8。
如果我将鼠标悬停在 IE 8 中的 2 个单元格上，我会得到 #666666 背景颜色作为悬停并且文本是有时在那里，有时不在。
我知道有更好的方法可以做到这一点，任何帮助将不胜感激。

```
<style type="text/css">
td#nav {margin: 0 0 0 0;}
td.hover, td:hover { position: relative; z-index: 599; cursor: default; background:#1D1D34; }
td:hover > td { visibility: visible }
.stopcellhover:hover
{
background-color: #666666;
}
div.transbox
{
width:860px;
height:450px;
margin:50px 50px;
background-color:#666666;
opacity:.85;
filter:alpha(opacity=85);
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=85)";
filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=85);
-moz-opacity:.85; /* ff lt 1.5, netscape */
-moz-border-radius:10px;
border-radius:10px;
text-align:center;
}
</style> 
```

谢谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:00:39.617

你为什么首先`:hover`申请`td`？我认为您应该将其应用于`a`唯一。只需将它们显示为块以使它们填满整个`td`.

这样您就不需要开始为特殊情况覆盖您的 css 代码并将类添加到 td 以防止它们显示悬停效果。

旧版浏览器中的非标签（如）也`:hover`没有得到很好的支持。如果您确实设置了小提琴，我很乐意证明我的意思。`a``td`

# javascript - .text() 函数不会像我想要的那样显示 HTML 标签。我该如何解决？

> ID：14406533
> 
> 赞同：1
> 
> 时间：2013-01-18T19:48:32.110
> 
> 标签：javascript, jquery

我正在尝试限制在容器中显示 300 个字符并使用它

```
<script>
    $(function () {
        $('.shippingMessage').append($('#forQuickViewOnly'));
        var myDiv = $('#firstPara');
        myDiv.text(myDiv.text().substring(0, 300));
        $('.productdetailtopquickview .productdetailshopnowform').appendTo($('.infoHolder'));
    });
</script> 
```

**我试图展示`<ul><li><li></ul>`结构，但我得到了一个段落。**换句话说，列表格式正在被剥离。知道如何防止这种情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T19:50:40.527

您可能想使用[`.html()`](http://api.jquery.com/html/)而不是[`.text()`](http://api.jquery.com/text/)

# shell - 用于在子目录中执行 1000 多个二进制文件的 Shell 脚本

> ID：14406534
> 
> 赞同：1
> 
> 时间：2013-01-18T19:48:33.997
> 
> 标签：shell, subdirectory, binaries

我正在运行一个名为 - Open Posix testsuite 的测试实用程序，它包含 1000 多个测试。套件中包含一个脚本来运行这些我无法在我的目标机器上使用的测试。

然而，我可以运行一个 shell 脚本，但从来没有写过一个严肃的 shell 脚本——我需要一些帮助。

我的脚本要求：我需要从这些子目录中执行所有这些 1000 多个测试。结构有点像这样。主目录（脚本所在的位置）有 3 个子目录。这些子目录中的每一个都有 2-10 个子目录，并且不断深入。最后，这些目录中的大多数将至少有 2 个，也许最多有 40 个“.test”文件（每个子目录），它们是我需要执行的二进制文件。为了安全起见，我需要在执行前对“.test”文件执行 chmod 777。

这个答案可能会提供一些帮助 -[如何导航到 shell 脚本中的子目录](https://stackoverflow.com/questions/4264529/how-to-navigate-to-subdirectories-in-a-shell-script)

非常感谢！感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:28:08.573

这个怎么样

```
#!/bin/sh

find -type f | while read
do
  chmod 777 "$REPLY"
  "$REPLY"
done 
```

# php - 基于URL序列的PHP重定向页面？

> ID：14406537
> 
> 赞同：0
> 
> 时间：2013-01-18T19:48:46.423
> 
> 标签：php, html, redirect

我正在寻找一种方法，使用 PHP 将页面重定向到基于其序列的另一个 url，就像这样

```
http://example.com/re.php?=http://google.com 
```

该页面将重定向到**google.com**。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:50:36.610

网址会更像`http://example.com/re.php?url=http://google.com`

`re.php`看起来像：

```
header('Location: ' . $_GET['url']); 
```

只是一个指导方针。

# objective-c - 试图理解具有许多变量的objective-c中的Singleton概念

> ID：14406539
> 
> 赞同：1
> 
> 时间：2013-01-18T19:48:49.487
> 
> 标签：objective-c, oop, design-patterns, singleton

我试图理解 Objective-c 中的 Singleton 概念。

我发现的大多数示例只涉及一个变量。

对于如何调整示例以处理许多变量，例如返回 x、y、z 的加速度计值，我有点迷茫。

你能进一步指导我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T20:02:02.510

**单例**是指在应用程序的生命周期内只能存在一次的特殊对象。该对象可以根据需要具有尽可能多的变量和属性。

```
//  Singleton.h

@interface Singleton : NSObject

@property (readwrite) int propertyA;
@property (readwrite) int propertyB;
@property (readwrite) int propertyC;

+ (Singleton *)sharedInstance;

@end 
```

**单例**的关键是它只能创建一次。通常在 Objective-C 中，我们使用`@synchronized()`指令来确保它只被创建一次。我们把它放在一个方便的类方法中`sharedInstance`，并返回我们的**Singleton**。由于 Singleton 只是一个对象，它可以很容易地拥有多个属性、变量和方法。

// 单例.m

```
#import "Singleton.h"

@interface Singleton ()
{
    int variableA;
    int variableB;
    int variableC;
}
@end

@implementation Singleton

static Singleton *sharedInstance = nil;

+ (Singleton *)sharedInstance
{
    @synchronized(self) {
        if (sharedInstance == nil) {
            sharedInstance = [[Singleton alloc] init];
        }
    }
    return sharedInstance;
}

+ (id)allocWithZone:(NSZone *)zone {
    @synchronized(self) {
        if (sharedInstance == nil) {
            sharedInstance = [super allocWithZone:zone];
            return sharedInstance;
        }
    }
    return nil;
}

- (id)init {
    self = [super init];
    if (self) {
        // Inits
    }
    return self;
}

@end 
```

这不是创建**Singleton**的唯一方法。请记住，重要的部分是它只能创建一次。因此，在为 OSX 和 iOS 开发（例如`dispatch_once`.

**与单身人士交谈**

因此，假设您在其他地方有另一个对象与**Singleton**交谈。这可以在任何地方完成`#import "Singleton.h"`

```
- (void)someMethod
{
    // Setting properties
    int valueA = 5;
    [[Singleton sharedInstance] setPropertyA:valueA];

    // Reading properties
    int valueB = [[Singleton sharedInstance] propertyB];
} 
```

# c++ - 几个 C++ 向量问题

> ID：14406543
> 
> 赞同：1
> 
> 时间：2013-01-18T19:49:08.020
> 
> 标签：c++, string, pointers, vector

我正在尝试学习一些 c++，首先我创建了一些方法来处理控制台的输出和读取。我有两个主要问题，在代码中标记，操作/访问通过引用传入的字符串的 std::vector 中的值。

下面的方法接受一个问题（标准字符串）来询问用户和一个向量标准字符串，其中包含用户认为可接受的响应。为了学习，我还想访问向量中的字符串并更改其值。

```
std::string My_Namespace::My_Class::ask(std::string question, std::vector<std::string> *validInputs){
    bool val = false;
    std::string response;
    while(!val){
        //Ask and get a response
        response = ask(question);
        //Iterate through the acceptable responses looking for a match
        for(unsigned int i = 0; i < validInputs->size(); i++){
            if(response == validInputs->at(i)){
                ////1) Above condition always returns true/////
                val = true;
                break;
            }
        }
    }
//////////2) does not print anything//////////
println(validInputs->at(0)); //note the println method is just cout << param << "\n" << std::endl
//Really I want to manipulate its value (not the pointer the actual value)
//So I'd want something analogous to validInputs.set(index, newVal); from java
///////////////////////////////////////////
} 
```

几个额外的问题：

3）我在向量上使用 .at(index) 来获取值，但我已经读到应该使用 [] 来代替，但是我不确定它应该是什么样子（validInputs[i] 没有' t 编译）。

4）我假设由于不需要深拷贝，因此像上面那样传递指向向量的指针是一种很好的做法，有人可以验证吗？

5) 我听说 ++i 在循环中比 i++ 更好，是真的吗？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:56:10.990

3)在这种情况下，使用`at`and应该没有显着差异。`operator[]`请注意，您有一个指向向量的指针，而不是一个向量（也不是对向量的引用），因此您将不得不使用`(*validInputs)[i]`或`validInputs->operator[](i)`使用运算符重载。`validInputs->at(i)`如果您不想使用这些其他方法中的任何一种，则使用很好。（如果参数超出数组边界，该`at`方法将抛出异常，而当参数超出数组边界时，该`operator[]`方法具有未定义的行为。由于`operator[]`跳过边界检查，如果您知道*一个事实*，`i`它会更快在向量的范围内。如果不确定，请使用`at`并准备捕获异常。）

4）指针很好，但引用会更好。而且，如果您不修改方法中的向量，则最好使用对 const 向量的引用 ( `std::vector<std::string> const &`)。这可确保您不会被传递空指针（引用不能为空），同时还确保您不会意外修改向量。

5）通常是。 `i++`是后自增，表示必须复制原值，然后自`i`增，返回原值的副本。 `++i`递增`i`然后返回`i`，所以它通常更快，尤其是在处理复杂的迭代器时。编译器`unsigned int`应该足够聪明，可以意识到预增量会很好，但是`++i`如果您不需要`i`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T20:00:28.963

我会使用对 const 的引用，并且[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find). 请注意，我还通过引用获取字符串（否则它会被深度复制）：

```
std::string My_Class::
ask (const std::string& question, const std::vector<std::string>& validInputs)
{
    for (;;) {
        auto response = ask (question);
        auto i = std::find (validInputs.begin (), validInputs.end (), response);

        if (i != validInputs.end ()) {
             std::cout << *i << '\n'; // Prints the value found
             return *i;
        }
    }
} 
```

如果您不了解代码，请阅读迭代器。当然，如果您需要，请随时提出其他问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T20:01:09.717

我不打算讨论第 1 点和第 2 点，因为我们不知道您在做什么，我们甚至看不到`ask`and的代码`println`。

> 我在向量上使用 .at(index) 来获取值，但我读过应该使用 [] 来代替，但是我不确定它应该是什么样子（validInputs[i] 无法编译）。

下标访问和`at`成员函数是不同的东西。它们为您提供了相同的东西，即对索引元素的引用，但如果您传递越界索引，它们的行为会有所不同：`at`将引发异常，同时`[]`会调用未定义的行为（就像内置数组一样）。在指针上使用`[]`有点难看，`(*validInputs)[i]`但您确实应该尽可能避免使用指针。

> 我假设由于不需要深层复制，因此如上所述传递指向向量的指针是一种很好的做法，有人可以验证吗？

深拷贝是不必要的，但指针也是如此。你需要一个参考，`const`因为我认为你不应该修改那些：

```
ask(std::string const& question, std::vector<std::string> const& validInputs) 
```

> 我听说 ++i 在循环中比 i++ 更好，这是真的吗？为什么？

在一般情况下它是正确的。这两个操作不同，`++i`递增`i`并返回新值，同时`i++`递增`i`但返回递增前的值，需要临时保持并返回。对于`int`s 这几乎无关紧要，但对于潜在的胖迭代器，如果您不需要或不关心它的返回值，则预增量更有效，也是更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T20:00:13.927

要回答问题 1 和 2，我们可能需要更多信息，例如：您是如何初始化 validInputs 的？问的来源是什么？

3）首先取消引用指针，然后索引向量：

```
(*validInputs)[i] 
```

4）参考被认为是更好的风格。特别是代替从不为 NULL 的指针。

5）对于整数，没关系（除非您评估表达式的结果）。对于其他对象，使用重载的 ++ 运算符（例如迭代器）可能会更好地使用 ++i。但实际上，对于 ++ 运算符的内联定义，它可能会针对相同的代码进行优化。

# asp.net - 在 ASP .NET Web 表单中包含生产中的 Javascript/CSS 最小版本和完整的开发版本

> ID：14406544
> 
> 赞同：0
> 
> 时间：2013-01-18T19:49:09.420
> 
> 标签：asp.net

是否可以在 ASP .NET 中实现问题主题中指定的目标，例如使用现有控件（如 ScriptManager 或任何其他控件）？我正在使用 ASP .NET Web Forms 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:53:33.213

是的。您可以使用捆绑工具。如果您使用的不是最新版本的 .NET，则可以使用 nuget 包`bundler.net`来实现相同的目的。

[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification) 这是使用捆绑器的参考指南。

# tfs - 重命名文件夹后无法解决挂起的更改

> ID：14406549
> 
> 赞同：4
> 
> 时间：2013-01-18T19:49:34.190
> 
> 标签：tfs, visual-studio-2012

我在 Visual Studio 中正确重命名了一个文件夹（显示为移动），但在合并到父分支后，我现在遇到了许多无法解决的冲突。

它们显示在“解决冲突”窗口中，并带有说明“您有一个有冲突的未决更改”。对抗每一次冲突。

![在此处输入图像描述](../Images/d484e3b5425a917fc10661da88d43121.png)

如果我尝试通过使用服务器或本地版本来解决，它们会消失，但会在几秒钟后重新出现。

我已经`tf undo * /recursive`从父文件夹尝试过，但报告“没有要撤消的待处理更改”，我尝试删除整个文件夹和“获取特定版本..”并强制覆盖，但我所做的一切都无法摆脱这些冲突.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T14:35:31.410

在再次尝试合并之前，我最终删除了工作区并重新获取了最新代码，一切正常。我猜工作区中存在某种损坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-21T11:22:52.843

这对我有用：
1\. 退出 Visual Studio
2\. 打开命令窗口并导航到文件夹：“%localappdata%\Microsoft\Team Foundation\”
3\. 导航到每个版本的子文件夹并删除子文件夹“cache " 及其内容
4\. 重新启动 Visual Studio 并连接到 TFS。
5.撤消/获取最新版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-02T07:35:14.193

首先尝试撤消任何相关更改，回溯您在合并中执行的步骤。不要试图一次撤消所有更改。在您撤消相关更改之前，可能需要撤消相关更改。例如，如果您重命名/删除了文件或文件夹，那么撤消重命名可能会导致与其他文件夹或文件发生冲突，因此请先撤消这些依赖文件/焊料的合并，然后尝试撤消重命名/删除的文件。我发现，如果您尝试一次性进行重命名、编辑和合并，它会感到困惑，当您撤消它时，除非您先撤消冲突的更改，否则会出现冲突。

# c# - 进度条值被重置

> ID：14406555
> 
> 赞同：0
> 
> 时间：2013-01-18T19:49:56.423
> 
> 标签：c#, progress-bar

我有一个带有进度条的 Winform，它正在从`CopyFileEx`通话中更新。

我的回调函数（我认为这是问题）是

```
CopyFileCallbackAction myCallback(FileInfo source, FileInfo destination, object state, long totalFileSize, long totalBytesTransferred)
{
    double dProgress = ((double)totalBytesTransferred / byteCount) * 100.0;
    backupWorker.ReportProgress((int)dProgress);
    return CopyFileCallbackAction.Continue;
} 
```

我调用使用的功能`CopyFileEx`是（我认为`CopyFileEx`包装器与问题无关，所以我没有发布它）

```
FileRoutines.CopyFile(new FileInfo(source), new FileInfo(dest), CopyFileOptions.All, myCallback); 
```

`byteCount`是`long`要复制的所有文件的总大小。

如果我只复制一个文件，它可以完美运行，但是当我开始复制多个文件时问题就开始了。

每当复制一个文件时，进度条的值都会重置回 0，因此当所有内容都复制完毕时，显示的唯一进度是最后一个文件的百分比，所以如果文件的总和为 10MB，并且有 5 个 2MB文件，进度条只上升了五分之一。

我想我可以通过添加另一个静态变量来解决这个问题`totalBytesTransferred`，就像这样

```
public static long bytesCopied = 0;

CopyFileCallbackAction myCallback(FileInfo source, FileInfo destination, object state, long totalFileSize, long totalBytesTransferred)
{
    bytesCopied += totalBytesTransferred;
    double dProgress = ((double)bytesCopied / byteCount) * 100.0;
    backupWorker.ReportProgress((int)dProgress);
    return CopyFileCallbackAction.Continue;
} 
```

但我也得到了意想不到的结果。似乎正在传输的字节数远远超过总字节数。

我只能假设它与`myCallback`为每个文件使用新文件有关，但现在我真的被卡住了。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:53:45.547

通过针对简单案例进行测试来发现算法中的缺陷。假设一个文件有 4 个字节，每个字节都会报告进度。因此，您将在 1、2、3 和 4 处使用 totalBytesTransferred 获得 4 次回调。现在您将它们添加到 bytesCopied，因此您将总共添加 10 个字节。对于只有 4 个字节的文件。

显然这是错误的。您需要等到 CopyFileEx() 完成，*然后*将文件大小添加到 bytesCopied。这确实需要您跟踪所有文件大小，这是您想要避免并让您陷入困境的事情。

# mysql - mysql触发器用动态文件名写入文件

> ID：14406556
> 
> 赞同：0
> 
> 时间：2013-01-18T19:49:57.733
> 
> 标签：mysql, triggers, file-io

我有兴趣创建一个触发器，该触发器将在将 csv 导入表后写入文件。文件名包含时间戳，我的代码无法正常工作。这是我到目前为止所拥有的。

```
DELIMITER $$
CREATE TRIGGER peachtree_trigger
AFTER INSERT ON peachtree
FOR EACH ROW
BEGIN
SET @sql_text = CONCAT("SELECT * FROM peachtree 
INTO OUTFILE '/srv/samba/share/peachtree_",
DATE_FORMAT(NOW(), '%Y_%m_%D'), ".csv'");
PREPARE s1 FROM @sql_text;
EXECUTE s1;
DROP PREPARE s1;
END $$ DELIMITER ; 
```

set 语句在触发器之外工作正常。但是，当我执行上述代码集然后尝试 SHOW TRIGGERS IN test; 它返回一个空集。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:58:19.183

来自[http://dev.mysql.com/doc/refman/5.5/en/stored-program-restrictions.html](http://dev.mysql.com/doc/refman/5.5/en/stored-program-restrictions.html)

<剪辑>

SQL 准备语句（PREPARE、EXECUTE、DEALLOCATE PREPARE）可用于存储过程，但不能用于存储函数或触发器。因此，存储函数和触发器不能使用动态 SQL（您将语句构造为字符串然后执行它们）。

</snip>

# ruby-on-rails - 这段 Ruby 代码发生了什么？

> ID：14406558
> 
> 赞同：1
> 
> 时间：2013-01-18T19:50:01.347
> 
> 标签：ruby-on-rails, ruby, syntax

鉴于以下示例取自[此处](http://guides.rubyonrails.org/getting_started.html)：

```
class Post < ActiveRecord::Base
  attr_accessible :content, :name, :title

  validates :name,  :presence => true
  validates :title, :presence => true,
                    :length => { :minimum => 5 }
end 
```

我知道我们正在创建一个基于类的`ActiveRecord::Base`类。在下一行，发生了`attr_accessible :content, :name, :title`什么？我们是声明一个变量，创建一个方法，还是调用一个？表达方式是怎样的`:some_variable`？冒号是干什么用的？有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:52:12.247

[`attr_accessible`是一种方法](http://apidock.com/rails/ActiveModel/MassAssignmentSecurity/ClassMethods/attr_accessible)。

> [它] 指定可以通过批量分配设置的模型属性白名单。

它的参数是一个符号数组（`:`例如，业务`:content`是一个符号）。

该方法遍历表示为符号的属性列表，并将它们添加到可以批量分配的属性列表中。

大多数 Ruby 书籍都应该讨论过[符号](http://www.troubleshooters.com/codecorn/ruby/symbols.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:58:03.527

`attr_accessible`是从 ActiveRecord::Base 继承的方法。这是一个元方法，您可以将符号传递给它（应该命名为类的属性）。它所做的是使它们可访问，因此现在在另一个区域`posts.content`中，现在可用于其他方法。

`validates`在允许将它们保存到数据库之前确保某些属性。如果条件评估为假，则会引发错误。再次首先传递一个与属性同名的符号（在本例中`:name`），然后传入要检查的条件的哈希（在本例中为 `:presence => true'）is fa

# python - 防止运行 python 脚本的并发实例

> ID：14406562
> 
> 赞同：7
> 
> 时间：2013-01-18T19:50:09.980
> 
> 标签：python, cron, fcntl

> **可能重复：**
> [Python：程序的单个实例](https://stackoverflow.com/questions/380870/python-single-instance-of-program)

当一个作业的完成时间比启动器间隔长时，我需要防止一个 cron 作业运行并发实例。我正在尝试使用flock 概念来实现这一点，但是 fcntl 模块的行为并不符合我的预期。

谁能告诉我为什么这可以防止两个并发实例：

```
import sys
import time
import fcntl

file_path = '/var/lock/test.py'
file_handle = open(file_path, 'w')

try:
    fcntl.lockf(file_handle, fcntl.LOCK_EX | fcntl.LOCK_NB)
    print 'no other instance is running'
    for i in range(5):
        time.sleep(1)
        print i + 1

except IOError:
    print 'another instance is running exiting now'
    sys.exit(0) 
```

为什么这不起作用：

```
import sys
import time
import fcntl

def file_is_locked(file_path):
    file_handle = open(file_path, 'w')
    try:
        fcntl.lockf(file_handle, fcntl.LOCK_EX | fcntl.LOCK_NB)
        return False
    except IOError:
        return True

file_path = '/var/lock/test.py'

if file_is_locked(file_path):
    print 'another instance is running exiting now'
    sys.exit(0)
else:
    print 'no other instance is running'
    for i in range(5):
        time.sleep(1)
        print i + 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T20:08:27.717

我的拙见（尽管我可能完全错误）是`file_handle`函数的本地化（在第二种情况下），因此，一旦函数完成，它就会被破坏。

以下代码似乎按预期工作：

```
#!/usr/bin/env python
#http://stackoverflow.com/questions/14406562/prevent-running-concurrent-instances-of-a-python-script

import sys
import time
import fcntl

file_handle = None

def file_is_locked(file_path):
    global file_handle 
    file_handle= open(file_path, 'w')
    try:
        fcntl.lockf(file_handle, fcntl.LOCK_EX | fcntl.LOCK_NB)
        return False
    except IOError:
        return True

file_path = '/var/lock/test.py'

if file_is_locked(file_path):
    print 'another instance is running exiting now'
    sys.exit(0)
else:
    print 'no other instance is running'
    for i in range(5):
        time.sleep(1)
        print i + 1 
```

请注意，我唯一做的就是设置`file_handle`为全局变量（尽管我复制了整个代码以获得一个工作示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:55:42.743

正如我在@BorrajaX 的回答中的评论中提到的那样，由于看起来您无论如何都受 POSIX 约束，因此您可以尝试使用[名为 semaphore 的本机](https://stackoverflow.com/questions/2798727/named-semaphores-in-python)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T21:30:58.923

您可以改用`setlock`DJ Bernstein 的 daemontools 中的程序：

[http://cr.yp.to/daemontools/setlock.html](http://cr.yp.to/daemontools/setlock.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T19:54:33.247

最简单的方法是在脚本开头创建一个文件 /tmp/scriptlock 并在开始工作之前检查该文件是否存在。确保在处理结束时删除锁定文件。

# c# - 在 WPF 中使用 FrameworkElement.FindResource("myResource")

> ID：14406564
> 
> 赞同：0
> 
> 时间：2013-01-18T19:50:15.757
> 
> 标签：c#, wpf, user-interface

在 MVVM 之后，我有一个对象持续存在一个 UI 窗口，该对象是在 XAML 中定义的。该对象代表 ModelView，因此它包含可以修改模型的控件。我发现自己需要`FrameworkElement.FindResource("myResource")`每个用户控件。获取该对象实例的正确方法是什么？

XAML：

```
<p:MyModelView x:Key="modelView" /> 
```

代码隐藏：

```
//for every control I call:
public void SomeEventHandler(object _sender, EventArgs _someEventArgs) {
    MyModelView repeatedCode= this.FindResource("modelView")
    repeatedCode.DoSomeModificationRelatedToControl(args[] someArgs);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:36:21.383

如果您的 View 代码隐藏中有很多地方需要 ViewModel，请创建 ViewModel 并将其保存在代码隐藏中的变量中，而不是将其创建为 Xaml 中的资源。例如：

```
public partial class MainWindow : Window
{
    private MainViewModel _vm;

    public MainWindow()
    {
        InitializeComponent();

        _vm = new MainViewModel()
        {
            Name = "MyViewModel",
            ...
        };
        this.DataContext = _vm;
    } 
```

最后一行很重要 - 通过使 ViewModel 成为 View 的 DataContext，您可以像往常一样在 Xaml 中绑定到它。

现在，您的事件处理程序至少缩短一两行：

```
public void SomeEventHandler(object sender, EventArgs someEventArgs)
{
    _vm.DoSomeModificationRelatedToControl(someArgs);
} 
```

# spring - 是否可以在 spring 3 上运行 Mule 2.2.1？

> ID：14406566
> 
> 赞同：1
> 
> 时间：2013-01-18T19:50:24.723
> 
> 标签：spring, spring-security, mule, spring-3

我们有一个当前运行 spring 2.5.6 和 mule 2.2.1 的应用程序。我们决定继续升级应用程序以使用 Spring 3.2，我们还将 Spring Security 升级到 3.1。我了解 Mule 2.2.1 使用 spring 2.5.6 进行配置等等。我们将重构我们的代码并构建整个项目。然而，在部署应用程序并启动服务器后，我的服务器在大约 6 秒内启动，而不是正常的 30 秒，然后我注意到我的服务都没有加载。不幸的是，经过几天的调查，我找不到一切都失败的地方，因为包括 spring 和 mule 日志在内的任何日志中都没有错误。我的问题是有可能让这些一起玩，还是我应该忘记让它发挥作用。

我阅读了这篇文章[http://lifeinide.blogspot.com/2012/07/spring-3-and-mule-2-initialized-by.html](http://lifeinide.blogspot.com/2012/07/spring-3-and-mule-2-initialized-by.html)并按照这些说明进行操作，但仍然无法正常工作。Mule 说它启动得很好，没有任何错误，但我可以访问我的任何服务。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T05:58:36.850

感谢@genjosanzo 的指点。它帮助我们更好地挖掘了这个问题并最终使它发挥作用。

@mtanzania，我们也有类似的需求——需要让 Mule 2.2.1 与 Spring 3.2.x 版本一起工作。升级到 Mule 3 涉及重写 Mule 扩展，例如异常处理策略、RabbitMQ Mule 传输等。因此排除了升级到 Mule 3。为了完成这项工作，您需要从模块中重写/更新 3 个 java 文件：

```
groupId:org.mule.modules
artifactId:mule-module-spring-config
version:2.2.1 
```

实现来自：

```
groupId:org.mule.modules
artifactId:mule-module-spring-config
version:3.4.0 
```

更具体地说，您需要更新/升级这些类：MuleBeanDefinitionDocumentReader.java、MuleApplicationContext.java 和 SpringXmlConfigurationBuilder.java

使用这些更新版本，您可以继续创建 MuleContext，例如：

```
SpringXmlConfigurationBuilder springConfigBuilder = new   SpringXmlConfigurationBuilder(muleConfigPaths);
MuleContext context = new DefaultMuleContextFactory().createMuleContext(springConfigBuilder) 
```

修改后的实现在这里：[Trooper 中的 Mule](https://github.com/regunathb/Trooper/tree/master/serviceframework-seda/src/main/java/org/trpr/platform/seda/impl/mule/spring)和使用它的示例类在这里：[Trooper Mule 容器](https://github.com/regunathb/Trooper/blob/master/serviceframework-seda/src/main/java/org/trpr/platform/seda/impl/service/MuleServicesContainer.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:54:50.970

Mule 使用一些内部 spring API 来解析 mule 配置并创建对应的 bean。

出于这个原因，升级可能适用于 spring 3.0.x，但我很确定 spring 3.1.x 出现了问题（即引入[此代码](https://fisheye.codehaus.org/changelog/mule/?cs=23617)是为了保持向后兼容性）。

升级骡子怎么样？大多数 2.2.x 语法仍然受支持，并且在较新的 mule 版本中引入了许多新功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-03T14:49:22.823

FWIW，@regunathb 的上述回答是正确的。在这三个类中进行修补工作。但是，重要的是要注意，来自 mule-module-spring-config 的这些类的 3.4 版本**不会**按原样工作。您**必须**获取 @regunathb 在 GitHub 上发布的类的修改版本，否则您最终会遇到 3.4 和 2.2.1 之间的各种不兼容问题。

# python - 使用 Numpy 将数组分区为 N 个块

> ID：14406567
> 
> 赞同：85
> 
> 时间：2013-01-18T19:50:27.843
> 
> 标签：python, arrays, numpy, numpy-ndarray

有这个[你如何将列表分成大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python) 用于将数组拆分为块。无论如何，对于使用 Numpy 的巨型阵列，是否可以更有效地执行此操作？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-01-18T19:56:09.883

试试[`numpy.array_split`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array_split.html#numpy.array_split)。

从文档中：

```
>>> x = np.arange(8.0)
>>> np.array_split(x, 3)
    [array([ 0.,  1.,  2.]), array([ 3.,  4.,  5.]), array([ 6.,  7.])] 
```

与 相同[`numpy.split`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.split.html)，但如果组的长度不相等，则不会引发异常。

如果块数 > len(array) 你会得到嵌套在里面的空白数组，以解决这个问题 - 如果你的拆分数组保存在 中`a`，那么你可以通过以下方式删除空数组：

```
[x for x in a if x.size > 0] 
```

`a`如果您愿意，只需将其保存回来。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-18T20:01:21.333

只是一些使用[`array_split`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array_split.html#numpy.array_split),[`split`和`hsplit`的`vsplit`](http://docs.scipy.org/doc/numpy-1.3.x/reference/generated/numpy.split.html)例子：

```
n [9]: a = np.random.randint(0,10,[4,4])

In [10]: a
Out[10]: 
array([[2, 2, 7, 1],
       [5, 0, 3, 1],
       [2, 9, 8, 8],
       [5, 7, 7, 6]]) 
```

有关使用的一些示例`array_split`：
如果您将数组或列表作为第二个参数，您基本上会给出要“剪切”的索引（之前）

```
# split rows into 0|1 2|3
In [4]: np.array_split(a, [1,3])
Out[4]:                                                                                                                       
[array([[2, 2, 7, 1]]),                                                                                                       
 array([[5, 0, 3, 1],                                                                                                         
       [2, 9, 8, 8]]),                                                                                                        
 array([[5, 7, 7, 6]])]

# split columns into 0| 1 2 3
In [5]: np.array_split(a, [1], axis=1)                                                                                           
Out[5]:                                                                                                                       
[array([[2],                                                                                                                  
       [5],                                                                                                                   
       [2],                                                                                                                   
       [5]]),                                                                                                                 
 array([[2, 7, 1],                                                                                                            
       [0, 3, 1],
       [9, 8, 8],
       [7, 7, 6]])] 
```

一个整数作为第二个参数。指定**相等**块的数量：

```
In [6]: np.array_split(a, 2, axis=1)
Out[6]: 
[array([[2, 2],
       [5, 0],
       [2, 9],
       [5, 7]]),
 array([[7, 1],
       [3, 1],
       [8, 8],
       [7, 6]])] 
```

`split`工作方式相同，但如果无法进行相等拆分，则会引发异常

除了`array_split`您可以使用快捷方式`vsplit`和`hsplit`.
`vsplit`并且`hsplit`几乎不言自明：

```
In [11]: np.vsplit(a, 2)
Out[11]: 
[array([[2, 2, 7, 1],
       [5, 0, 3, 1]]),
 array([[2, 9, 8, 8],
       [5, 7, 7, 6]])]

In [12]: np.hsplit(a, 2)
Out[12]: 
[array([[2, 2],
       [5, 0],
       [2, 9],
       [5, 7]]),
 array([[7, 1],
       [3, 1],
       [8, 8],
       [7, 6]])] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-18T19:55:28.777

我相信您正在寻找[`numpy.split`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.split.html)或者可能[`numpy.array_split`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array_split.html#numpy.array_split)是否部分的数量不需要正确划分数组的大小。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-18T20:43:58.877

不是一个完整的答案，而是对其他（正确）答案的代码格式很好的长注释。如果您尝试以下操作，您将看到您得到的是原始数组的视图，而不是副本，并且您链接的问题中接受的答案并非如此。注意可能的副作用！

```
>>> x = np.arange(9.0)
>>> a,b,c = np.split(x, 3)
>>> a
array([ 0.,  1.,  2.])
>>> a[1] = 8
>>> a
array([ 0.,  8.,  2.])
>>> x
array([ 0.,  8.,  2.,  3.,  4.,  5.,  6.,  7.,  8.])
>>> def chunks(l, n):
...     """ Yield successive n-sized chunks from l.
...     """
...     for i in xrange(0, len(l), n):
...         yield l[i:i+n]
... 
>>> l = range(9)
>>> a,b,c = chunks(l, 3)
>>> a
[0, 1, 2]
>>> a[1] = 8
>>> a
[0, 8, 2]
>>> l
[0, 1, 2, 3, 4, 5, 6, 7, 8] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-13T07:20:20.987

这个怎么样？在这里，您使用您想要的长度拆分数组。

```
a = np.random.randint(0,10,[4,4])

a
Out[27]: 
array([[1, 5, 8, 7],
       [3, 2, 4, 0],
       [7, 7, 6, 2],
       [7, 4, 3, 0]])

a[0:2,:]
Out[28]: 
array([[1, 5, 8, 7],
       [3, 2, 4, 0]])

a[2:4,:]
Out[29]: 
array([[7, 7, 6, 2],
       [7, 4, 3, 0]]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-03T19:32:27.417

这可以使用`as_strided`numpy 来实现。我假设如果块大小不是总行数的一个因素，那么最后一批中的其余行将用零填充。

```
from numpy.lib.stride_tricks import as_strided
def batch_data(test, chunk_count):
  m,n = test.shape
  S = test.itemsize
  if not chunk_count:
    chunk_count = 1
  batch_size = m//chunk_count
# Batches which can be covered fully
  test_batches = as_strided(test, shape=(chunk_count, batch_size, n), strides=(batch_size*n*S,n*S,S)).copy()
  covered = chunk_count*batch_size
  if covered < m:
    rest = test[covered:,:]
    rm, rn = rest.shape
    mismatch = batch_size - rm
    last_batch = np.vstack((rest,np.zeros((mismatch,rn)))).reshape(1,-1,n)
    return np.vstack((test_batches,last_batch))
  return test_batches 
```

这是基于我的回答[https://stackoverflow.com/a/68238815/5462372](https://stackoverflow.com/a/68238815/5462372)。

# amazon-ec2 - ec2现货完整价格历史

> ID：14406579
> 
> 赞同：9
> 
> 时间：2013-01-18T19:50:53.477
> 
> 标签：amazon-ec2

我正在使用 API 获取 ec2 现货价格历史记录，但除了过去 90 天左右之外，我什么也得不到，也无法指定观察频率。有没有办法获得完整的现货价格历史，最好以分钟或每小时的频率？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T22:32:57.033

虽然没有为[DescribeSpotPriceHistory](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeSpotPriceHistory.html) API 操作明确记录，但至少在[AWS 管理控制台](http://aws.amazon.com/console/)（依次使用该 API）中提到了此限制，请参阅[查看现货价格历史记录](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-spot-instances-history.html)：

> 您可以根据实例类型、您希望实例运行的操作系统、时间段以及将在其中启动实例的可用区，查看 1 到 90 天的 Spot 价格历史记录。

*   因为自从这个 API 可用以来，任何人都可以检索和记录整个现货价格历史记录（毫无疑问，很多用户和研究人员已经这样做了；甚至 AWS 博客也列出了一些专门[的第三方 AWS 跟踪站点](http://aws.typepad.com/aws/2009/12/thirdparty-aws-tracking-sites.html)，但这些都是乍一看全部失效），这个限制无疑似乎有点武断，但从严格的操作角度来看肯定是务实的，即您拥有未来投标所需的所有信息（尤其是考虑到 AWS 只降低了价格）到目前为止，并且经常这样做，实际上让客户很高兴）。

同样，没有更改频率的选项，因此您需要使用客户端代码进行每小时聚合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-16T16:07:26.760

该网站对某些地区的 EC2 现货价格历史进行了重新采样，您可以直接从 Python 脚本通过简单的 API 访问它们：

[http://ec2-spot-prices.ai-mmo-games.de/](http://ec2-spot-prices.ai-mmo-games.de/)

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T16:33:40.510

AWS 仅提供 90 天的历史记录。并且数据是原始的，即没有按小时甚至分钟标准化。所以有时数据中存在漏洞。

一种方法是将数据吸入 ipython 笔记本并使用 pandas 优秀的时间序列工具按分钟或 5 分钟等重新采样。这是一个简短的教程：

[https://medium.com/cloud-upprising/the-data-science-of-aws-spot-pricing-8bed655caed2](https://medium.com/cloud-uprising/the-data-science-of-aws-spot-pricing-8bed655caed2)

以下是有关使用 pandas 进行时间序列重采样的更多详细信息：

[http://pandas.pydata.org/pandas-docs/stable/timeseries.html](http://pandas.pydata.org/pandas-docs/stable/timeseries.html)

希望有帮助...

# c# - C#——这两种方法之间的确切区别是什么？

> ID：14406587
> 
> 赞同：-3
> 
> 时间：2013-01-18T19:51:13.337
> 
> 标签：c#, methods

这*不是*一个家庭作业问题。

如果我要描述以下两种方法之间的确切区别以及它们在调用者中的使用，我会怎么做？

方法一：

```
public void WriteSpace(int numSpaces) {
        if (numSpaces <= 0) return;
        for (var x = 0; x < numSpaces; x++) {
            Response.Write(" ");
        }
    } 
```

方法二：

```
public String WriteSpaceReturn(int numSpaces) {
        var space = "";
        if (numSpaces <= 0) return space;
        for (var x = 0; x < numSpaces; x++) {
            space += " ";
        }
        return space;
    } 
```

呼叫者：

```
WriteSpace(4); //1
Response.Write(WriteSpaceReturn(4)); //2 
```

两者的最终结果是相同的。所以我清楚地意识到第一种方法不会向调用者返回值，而第二种方法会返回值，但除此之外，我还能如何描述这些？

第一种和第二种方法的原子性有区别吗？范围？阻塞？第一个方法在方法内部写入输出，而第二个方法让调用者这样做，是否有一个名称？如果这些正在写入大量数据，是否会首选其中一个？我怀疑既然第一个是`Response.Write`为每个角色打电话，它会更慢吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T19:54:40.477

性能方面的主要区别：代码的第二个版本在循环中使用字符串连接，效率低下。我*希望*这`Response.Write`会比这更有效率。

封装方面的主要区别：第二种形式是一种*纯方法*- 它没有副作用。这使得单独测试更容易，并且在这种特殊情况下更容易在多种情况下使用。

这并不是说第二个版本*更*适合纯粹，这取决于上下文。

（在这两种情况下，您都应该删除多余的检查`numSpaces`是否为非肯定。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:54:19.273

一个为你写的（第一个）

第二个返回第一个写入的字符串，需要您​​自己编写。或者，更重要的是，允许您对其执行任何有效的字符串相关操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:54:21.913

第一种方法将空格直接写入响应流

第二个创建一个包含空格的字符串。然后调用者必须将空格写入响应：`Response.Write(WriteSpaceReturn(4));`

后者是首选，因为它提供了更多的灵活性，但该功能可以完全替换为：

```
new String(' ', 4 ); 
```

导致

```
Response.Write(new String(' ', 4 )); 
```

阅读效率更高，方式更清晰。

# asp.net - 分配有数据的数据表后，Gridview有空数据？

> ID：14406594
> 
> 赞同：0
> 
> 时间：2013-01-18T19:52:03.847
> 
> 标签：asp.net, gridview

我有 DataTable 的数据。分配给 gridview ，但 gridview 在分配后有 0 行。

```
 Dim mKeywordSearch As New KeywordSearch
         Dim dtExcel As DataTable
         dtExcel = mKeywordSearch.DatabaseKeywordSearch(txtKeyword.Text)
         gvKeywordSearch.DataSource = dtExcel
         gvKeywordSearch.DataBind()
         Dim cnt As Integer = dtExcel.Rows.Count
         cnt = gvKeywordSearch.Rows.Count() 
```

.aspx 页面

```
<asp:GridView ID="gvKeywordSearch" runat="server" Width="100%" 
AutoGenerateColumns="false" Visible="true"></asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:55:37.607

根据需要将 GridView 更改为`AutoGenerateColumns="true"`或定义列`AutoGenerateColumns="false"`

```
<asp:GridView ID="gvKeywordSearch" runat="server" Width="100%" 
AutoGenerateColumns="true" Visible="true"></asp:GridView> 
```

或与`AutoGenerateColumns = "false"`

```
<asp:GridView ID="gvKeywordSearch" runat="server" Width="100%" 
    AutoGenerateColumns="false" Visible="true">
   <Columns>
      <asp:BoundField HeaderText="HeaderText1" DataField="FieldName1" ></asp:BoundField>
      <asp:BoundField HeaderText="HeaderText2" DataField="FieldName2" ></asp:BoundField>
      ...
   </Columns>
</asp:GridView> 
```

# z3 - Z3 寻找部分赋值的策略

> ID：14406598
> 
> 赞同：1
> 
> 时间：2013-01-18T19:52:15.007
> 
> 标签：z3

假设我有一个公式 F，其中包含变量 w、x、y、z。

Z3 是否有任何策略可以找到 F 的部分模型，但部分模型必须包含 y 和 z 的分配。（我不在乎 w 和 x。）

通过应用这种策略，Z3 查找部分模型所花费的时间比查找完整模型所花费的时间更少。

有这样的战术存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:00:23.227

没有内置的策略可以做到这一点。找到精确的“不在乎”的集合并不便宜。此外，如果`w`和`x`真的“不在乎”，那么它们应该不会对 Z3 的性能产生重大影响。

# jquery - Fullcalendar：如果存在事件，则在“dayClick”弹出窗口中

> ID：14406603
> 
> 赞同：0
> 
> 时间：2013-01-18T19:52:40.900
> 
> 标签：jquery, fullcalendar

我试图使这项工作的方式是“阻止一天”不可用和可用的想法。即使有事件，我怎样才能使一整天的块可点击？

如果我想阻止某天当前有事件，我希望在弹出窗口中看到该事件。

问题之一是当前激活“dayClick”的唯一方法是单击空白区域。但是如果你点击一个事件，它不会触发“dayClick”。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:42:21.147

当你点击一个事件（eventClick）时，dayClick 需要的数据是不可用的。我不知道如何钻取事件以到达 dayClick。即，我想不出一种方法来调用 $.trigger 来调用 dayClick。

您应该能够在 eventClick 回调中执行您需要的操作。创建单个事件时，将属性设置为可用或不可用。也许是这样的：

```
var events = [{
                 id: 1,
                 title: 'This is a blocked day',
                 start: 'Wed, 18 Oct 2009 08:00:00 EST',
                 color:'#fff',// red
                 blocked: true
             },
             {
                 id: 2,
                 title: 'This is an available day',
                 start: 'Thu, 19 Oct 2009 08:00:00 EST',
                 color: '#07A800', // green
                 blocked: false
             }];

$('#cal').fullcalendar({
    events: events,
    eventClick: function(calEvent, jsEvent, view) {
        if(calEvent.blocked == true) {// be sure to set a 'blocked' property in your event
            alert('This time is not available!');                
        } else {
            $('#newEventDialog').dialog('open');// open a dialog to save new event
        }
    }
}); 
```

# algorithm - 算法设计-用最少的测试人员识别酒窖中的单瓶

> ID：14406604
> 
> 赞同：8
> 
> 时间：2013-01-18T19:52:41.803
> 
> 标签：algorithm

这是为了在算法课程中获得额外的学分。问题说明

> 国王有N瓶酒窖，单瓶中毒。
> 毒药大约需要一个月才能起作用。国王希望在一个月内使用尽可能少的测试人员识别出准确的瓶子。

我的解决方案是

*   将`N`瓶子分成`M`多个批次并使用“M 测试仪”

    *   第一个测试者品尝第一批和最后一批

    *   第二个测试者品尝第一批和第二批。

    *   第三个测试者品尝了第二批和第三批。

    *   继续进行 M 批次，测试人员重叠批次。

*   当品尝到受污染葡萄酒的两名测试人员生病时，该批次已被确定。`M-2`测试人员从受污染的批次中给每个人留下一瓶味道，第三个生病的测试人员识别出受污染的瓶子。

然而，这个算法需要双倍的工作时间：一个月来识别受污染的批次，第二个月来识别受污染的瓶子。有没有更高效的算法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T05:11:16.380

我们可以`log2(N)`使用非常简洁的算法与测试人员一起完成。

让我用一个简单的例子来演示一下。假设`N = 1000`。

如果我们`0`通过标记瓶子`999`，那么每个瓶子都可以用一个唯一的二进制数表示，范围从`0000000000`（`0`十进制）到`111100111`（`999`十进制）。

声称：我们只需要 10 名测试人员就可以找到毒瓶。注意：`log2(N) = log2(1000) = 10`。

算法：对于第`M`th 瓶，我们首先得到 的 10 位二进制表示`M`。如果`i`二进制数的第 th 位是`1`，我们让第`i`th 测试者喝瓶子里的酒。注意：`0 < M <1000, 0 < i <10`。

考虑一个示例，其中`1st`, `4th`,`9th`测试人员已死亡，而其他测试人员在一个月后还活着。我们得出结论，`289th`瓶子是有毒的，因为`0100100001`它是十进制数的二进制表示`289`。

为什么`10`测试人员足以识别`1000`瓶子中的中毒者？

因为`10`最终测试人员每个人都死了还是活着，我们可以有一个总共的`1024`组合，每个组合都可以用来唯一地识别一个瓶子是否有毒`1024`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T19:57:37.243

这是一个经典的谜题，所以我不想立即给出答案，但这里有一个提示：假设你将酒瓶分成两组，每组包含一半的瓶子，然后让一个人测试每一半. 这会给你一种方法来缩小哪个瓶子中毒到一半的瓶子。

所以问题是——有没有办法想出许多不同的方法来将酒瓶分成两半并并行运行上述方法？作为提示，请考虑 N 的二进制表示。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T18:50:45.610

这是我的建议。这基本上来自并行算法。

1.  将瓶子分成 n/log2(n)。将每个部门称为要解决的子问题。
2.  将每个 log2(n) 测试人员分配给步骤 1 中的每个子问题。
3.  最后说一个测试员死了，假设我们还剩下 log2(n) 个瓶子和 log2(n) - 1 个测试员。
4.  每个测试员测试一瓶。还剩下一瓶。
5.  如果没有测试人员死亡（或者至少在最初几天出现症状……这是我的假设），那么我们就知道罪魁祸首是留下的瓶子。
6.  如果任何一名测试人员死亡（或至少表现出生病），那么我们就知道该测试人员测试过的瓶子是罪魁祸首。

这需要 log2(n) + 1 个月。由于 1 是一个常数，我们可以忽略它并且可以说它是 O(log2(n))。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-31T05:46:59.553

举个例子：

从 1 到 n 标记每个瓶子，并将每个瓶子视为二进制数。例如 11 瓶

```
00000001 
00000010 
00000011 
00000100 
00000101 
00000110 
00000111
00001000 
00001001 
00001010 
00001011 
```

现在，从右到左，首先从最右边位设置为“1”的每个瓶子中取一滴，然后放入第一个杯子中。其次，从第二位设置为“1”的每个瓶子中取一滴，然后放入第二个杯子中。
以类似的方式继续通过最高位。所以我们总共需要 4 个杯子和 4 个品尝者。

```
taster4 taster3 taster2 tester1
cup4     cup3    cup2     cup1 
```

我们现在将品尝者映射到杯子并将杯子映射到比特，因此将品尝者映射到比特命令品尝者喝。一个月后，你的一些品酒师会死掉。例如，品尝者 3 和品尝者 1 变为死状态，然后将相应的位设置为 1，将所有其他位设置为 0。生成的二进制数 `00000101`将识别毒瓶。品尝者的数量 f(n) = (int)(logn)+1 ，所以 f(n) 是 O(logn)

# python - 如何使本地运行的 GAE 开发服务器自动检测对模板的更改？

> ID：14406606
> 
> 赞同：1
> 
> 时间：2013-01-18T19:52:46.973
> 
> 标签：python, google-app-engine, mako

我注意到，每当我对我的一个 gae 项目 python 文件进行更改时，我的更改都会自动影响我在本地运行的开发服务器。但是，每当我对我的某个 Mako 模板进行更改时，谷歌应用程序引擎都不会自动检测到它，我必须手动重新启动本地开发服务器才能使更改生效。可以想象，这会使编辑 UI 元素变得乏味。有什么方法可以让我对模板进行 gae 自动检测更改？

# c - 程序不接受文件中的所有值

> ID：14406610
> 
> 赞同：1
> 
> 时间：2013-01-18T19:52:52.303
> 
> 标签：c

我昨天发布了一个关于我的代码的某个部分的问题。目的是基本上将 .dat 文件中的数据值扫描到数组中，打印这些值，同时计算文件中有多少值。

听起来很简单，但我的程序似乎只打印了一定数量的值。更具体地说，对于包含超过 300000 个值的数据文件，它只会打印最后的 20000 个，而不会打印其他任何内容。

所以我离开了它，完成了我剩下的代码，现在这是我必须排序的最后一部分。我做了一些更改并尝试现在实际打印输出 .dat 文件，这样我就可以看到我得到了什么。顺便说一句，代码在下面。

最初我认为这可能与我的数组的内存分配有关（出现分段错误？将整个代码放在一起时），所以我创建了一个外部函数来计算值的数量（有效）。

我现在唯一的问题是它仍然只选择打印 20000 个值，然后其余的都是 0。我在想也许它与类型有关，但它们都包含 7 dps 的科学计数法。以下是一些值的示例：

```
 8.4730000e+01   1.0024256e+01
   8.4740000e+01   8.2065599e+00
   8.4750000e+01   8.3354644e+00
   8.4760000e+01   8.3379525e+00
   8.4770000e+01   9.8741315e+00
   8.4780000e+01   9.0966478e+00
   8.4790000e+01   9.4760274e+00
   8.4800000e+01   7.1199807e+00
   8.4810000e+01   7.1990172e+00 
```

任何人都看到我要去哪里错了吗？对于这个冗长的问题，我很抱歉，它只是在最后一天左右一直困扰着我，无论我改变什么似乎都无济于事。任何类型的输入将不胜感激。

```
#include <stdio.h>
#include <stdlib.h>

int count(int);

const char df[]="data_file.dat";
const char of[]="output_file.dat";

int main(int argc, char *argv[])
{
    FILE *input, *output;
    int   i, N;
    float *array;

    N = count(i);

    input = fopen(df, "r");
    output = fopen(of, "w");

    array = (float*)malloc(N*sizeof(float));

    if((input != (FILE*) NULL) && (output != (FILE*) NULL))
    {
        for(i = 0; i < N; i++)
        {
            fscanf(input, "%e", &array[i]);
            fprintf(output, "%d %e\n", i, array[i]);
        }

        fclose(input);
        fclose(output);
    }
    else
        printf("Input file could not be opened\n");

    return(0);
}

int count(int i)
{
    FILE *input;
    input = fopen(df, "r");

    int N = 0;

    while (1)
    {
        i = fgetc(input);
        if (i == EOF)
            break;
        ++N;
    }

    fclose(input);

    return(N);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:06:36.063

您最大的问题是`count()`不计算浮点值；它计算文件中有多少个字符。然后，您尝试循环并调用`fscanf()`比文件中的值更多的次数。第一次，`fscanf()`找到一个浮点值并扫描它；但是一旦循环到达文件末尾，`fscanf()`将返回 EOF 状态。似乎有可能`fscanf()`将浮点值设置为`0.0`返回 EOF 时。

我建议您重写，以免尝试预先计算浮点值。编写一个循环，重复调用`fscanf()`直到它返回 EOF 结果，然后跳出循环并关闭文件。

PS 如果您要编写类似的函数`count()`，则应将文件名作为参数传递，而不是对其进行硬编码。并且您的版本`count()`采用整数参数，但忽略了该值；相反，只需在`count()`.

编辑：好的，这是一个完整的工作程序来解决这个问题。

```
#include <stdio.h>

int
main(int argc, char **argv)
{
    FILE *in_file, *out_file;
    unsigned int i;

    if (argc != 3)
    {
        fprintf(stderr, "Usage: this_program_name <input_file> <output_file>\n");
        return 1; // error exit with status 1
    }

    in_file = fopen(argv[1], "r");
    if (!in_file)
    {
        fprintf(stderr, "unable to open input file '%s'\n", argv[1]);
        return 1; // error exit with status 1
    }

    out_file = fopen(argv[2], "w");
    if (!out_file)
    {
        fprintf(stderr, "unable to open output file '%s'\n", argv[2]);
        return 1; // error exit with status 1
    }

    for (i = 0; ; ++i)
    {
        int result;
        float x;

        result = fscanf(in_file, "%e", &x);
        if (1 != result)
            break;

        fprintf(out_file, "%d %e\n", i, x);
    }

    return 0; // successful exit
} 
```

注意这个版本不需要分配大数组；它只需要一个临时浮点变量。也许您的程序需要存储所有浮点值。在这种情况下，编写一个`count()`使用类似于上述循环的循环的函数，用于`fscanf()`计算浮点值。

`fopen()`另请注意，该程序在调用和后检查错误`fscanf()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:13:57.783

您在内存 (N) 中分配的浮点数比您需要的要多得多，因为您的 N 是文件中的*字符*数，而不是文件中的值数。另外，您是如何确定文件中有 300000 个值的？

# ios-simulator - 如何在 iPhone 模拟器的 Web Inspector 中禁用 javascript 调试器？

> ID：14406620
> 
> 赞同：1
> 
> 时间：2013-01-18T19:53:39.603
> 
> 标签：ios-simulator, mobile-safari, mobile-website, web-inspector

我在桌面 Safari（版本 6.0.2 (7536.26.17)）（在开发菜单下）使用 Web Inspector 来调试 Mobile Safari 与 iOS 模拟器（版本 6.0 (358.4)）中的 Web 应用程序的交互。

目前，我想简单地监控 HTTP 请求；我对单步执行 javascript 代码不感兴趣。但是，即使没有设置断点，Web Inspector 仍会不断进入调试器。我必须反复单击“继续”按钮才能加载整个页面。

如何告诉 Web Inspector 不要调试 javascript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:09:43.927

设置在那里，我只是忽略了它。在左侧窗格的 Web Inspector 中，顶部有一堆图标。右边第二个是“断点”图标。点击那个。顶部有两个条目，“All Exceptions”和“All Uncaught Exceptions”。我启用了“所有例外”。禁用它解决了问题。

# ios - 带有 UINavigationController/UITableViewController 裁剪导航栏的弹出框

> ID：14406621
> 
> 赞同：0
> 
> 时间：2013-01-18T19:53:57.677
> 
> 标签：ios, ipad, uinavigationcontroller, uitableview, popover

我已经实现了一个 Popover，它由一个嵌入了 UITableViewController 的 UINavigationController 组成。当弹出框出现时，导航栏在顶部和侧面被裁剪。我尝试使用我在此处阅读的解决方案来强制大小 - 将其设置为 CGRectMake(0,0) 然后在 ViewWillAppear 和 ViewDidAppear 上设置为正确的大小，但它没有效果。UINavigationController 和 UITableViewController 在 Simulated Metrics 中具有自由形式的大小（尽管我尝试过 Inferred，但也无济于事）。我已经尝试将弹出框大小设置为显式大小，但仍然不行。它忽略了我所有让它看起来正确的尝试。

使用动态 TableView 使弹出框看起来不错的关键是什么？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:30:21.273

我已经解决了这个问题。我删除了 UITableViewController 在 UINavigationController 中的嵌入，而是将 UINavigationBar 添加到 UITableView 的标题中。视图现在正确显示，导航栏和按钮的大小正确。

# batch-file - 批量创建具有用户定义名称的文件夹

> ID：14406622
> 
> 赞同：1
> 
> 时间：2013-01-18T19:54:00.867
> 
> 标签：batch-file

我需要一个批处理代码，如果我输入一个数字“11”，然后输入一个文本“ss”，那么它应该创建一个文件夹名称为“ **11-ss** ”，在该文件夹中我需要 3 个文件夹，分别命名为 1、2、3。

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:07:56.603

```
mkdir %1-%2\1
mkdir %1-%2\2
mkdir %1-%2\3 
```

将此保存为批处理并调用它
`batchfile.bat 11 ss`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T22:19:17.547

```
@echo off
set /p number=enter the number:
set /p text=enter the text:
md %number%-%text%\1 %number%-%text%\3 %number%-%text%\1 
```

这是一个交互式解决方案...

# php - 实时摄像机流式传输（Red5、PHP）

> ID：14406625
> 
> 赞同：0
> 
> 时间：2013-01-18T19:54:07.767
> 
> 标签：php, live, red5, rtmp, amf

我正在创建实时摄像头流应用程序（php + red5）。我将拥有多个 red5 服务器，问题是我必须让所有聊天室和用户从所有服务器在线。我正在考虑3个方法。

1.  从每台服务器获取所有房间、用户在线并将其缓存 5 秒，因此不会在每个请求中检索数据。
2.  每次有人创建房间或进入房间时，都会从 red5 应用程序更新数据库。
3.  每次有人创建房间或进入房间时，都会从 red5 服务器调用 web rest 服务。（我认为这是最好的方法，因为我可以在任何我想要的地方存储数据，但我可能错了）

我对red5很陌生，这就是为什么我在选择最佳方法时寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:43:54.643

已经找到解决方案了。我创建了公开 red5 服务的自定义 HttpServlet。;)

# ios - 为什么不能在 UITableViewController 中更改按钮宽度

> ID：14406629
> 
> 赞同：1
> 
> 时间：2013-01-18T19:54:23.230
> 
> 标签：ios, objective-c, uibutton, uitableview

我在 tableview 控制器中添加了一个简单的按钮，我使用分组的 tableview 单元格，所以我希望按钮与单元格的宽度相同。

![在此处输入图像描述](../Images/249f0be24fe40b9baee4e3ce32235c70.png)

为简单起见，我在 IB、inspector 上打开了按钮的视图选项。我可以改变高度，但当我尝试改变它时，宽度变成 768。

![在此处输入图像描述](../Images/b2c0cc83d5c80093c21fc43b603a4c5e.png)

我不想使用`tableviewfooter`，因为在生成任何部分之前和之后我都需要按钮。如果我将按钮添加到视图按钮不会停留在表格视图行下方。

如何更改按钮的宽度？或者另一种方法在所有部分和表格视图的单元格下方添加按钮，当没有单元格或部分时也会出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:48:01.300

只需删除该按钮并将 a 拖放`uiview`到同一位置即可。一旦你有了你的`UIView`，你应该能够在`UIelements`里面添加什么`UIview`

![在此处输入图像描述](../Images/59a06552d3acee82398425b7d23856c3.png)

# ios - 这次崩溃意味着什么（iOS）？

> ID：14406638
> 
> 赞同：0
> 
> 时间：2013-01-18T19:54:47.047
> 
> 标签：ios, crash-log

当我提交我的应用程序时，Apple 抱怨崩溃（我的设备上没有发生）。（该应用程序同时使用 Cocos2d 和 Kamcord）。这是他们发给我的日志。有没有人知道发生了什么？

```
Incident Identifier: DF08231F-6870-4BA1-B676-FABB198B2C1D
CrashReporter Key:   aca1b4fd3ac58a223f67f43ce5c768e6e94616f0
Hardware Model:      xxx
Process:         Intro Maker [21098]
Path:            /var/mobile/Applications/58D16C18-20F2-4A98-ADA0-DDF7518F7704/Intro Maker.app/Intro Maker
Identifier:      Intro Maker
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-01-17 17:47:44.172 -0800
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x60000008
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x385b15b0 objc_msgSend + 16
1   Intro Maker                     0x000842b6 0x34000 + 328374
2   Intro Maker                     0x0006ec82 0x34000 + 240770
3   Intro Maker                     0x0006ef06 0x34000 + 241414
4   UIKit                           0x375f751e -[UIWindow _sendTouchesForEvent:] + 314
5   UIKit                           0x375e47fc -[UIApplication sendEvent:] + 376
6   UIKit                           0x375e4116 _UIApplicationHandleEvent + 6150
7   GraphicsServices                0x34d605a0 _PurpleEventCallback + 588
8   GraphicsServices                0x34d601ce PurpleEventCallback + 30
9   CoreFoundation                  0x318a9170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
10  CoreFoundation                  0x318a9112 __CFRunLoopDoSource1 + 134
11  CoreFoundation                  0x318a7f94 __CFRunLoopRun + 1380
12  CoreFoundation                  0x3181aeb8 CFRunLoopRunSpecific + 352
13  CoreFoundation                  0x3181ad44 CFRunLoopRunInMode + 100
14  GraphicsServices                0x34d5f2e6 GSEventRunModal + 70
15  UIKit                           0x376382f4 UIApplicationMain + 1116
16  Intro Maker                     0x0008204e 0x34000 + 319566
17  Intro Maker                     0x0003685c 0x34000 + 10332

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x307ee648 kevent64 + 24
1   libdispatch.dylib               0x3990a974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x3990a654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x307edeb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x307ee048 mach_msg + 36
2   CoreFoundation                  0x318a9040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x318a7d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x3181aeb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x3181ad44 CFRunLoopRunInMode + 100
6   WebCore                         0x32777a40 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3853730e _pthread_start + 306
8   libsystem_c.dylib               0x385371d4 thread_start + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x210addc0    r1: 0x0024f355      r2: 0x210afa60      r3: 0x00000000
    r4: 0x60000000    r5: 0x0024f355      r6: 0x210addc0      r7: 0x2fdcb688
    r8: 0x21072f40    r9: 0x00093cd5     r10: 0x42200000     r11: 0x0024cdc5
    ip: 0x385c21f1    sp: 0x2fdcb5d8      lr: 0x000842bb      pc: 0x385b15b0
  cpsr: 0x00000030 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T20:07:48.410

当您创建上传到 Apple 的 .ipa 文件时，您必须首先创建一个应用存档（一个 .xcarchive 文件夹）。如果该文件夹（及其内容）仍然存在于您的 Mac 上，并且您将崩溃报告拖到 Xcode Organizer 上，那么 Xcode*应该*象征着崩溃报告。这意味着第 1、2、3、16 和 17 帧中的每一帧都会向您显示源代码中的函数、文件名和行号。这可以帮助您找出问题所在。

`SIGSEGV`in的最常见原因`objc_msgSend`是通过悬空指针向释放的对象发送消息。

*如果*您遵循 Apple 的内存管理命名约定，则在您的应用程序上运行静态分析器可能会帮助您追踪不当的内存管理。从菜单栏中，选择产品 > 分析。

在启用僵尸的情况下运行您的应用程序也可以帮助您找出问题所在。您可以使用 Instruments 在模拟器上执行此操作；它有一个僵尸预设。要在设备上执行此操作，您必须编辑您的方案，转到“诊断”选项卡，然后打开“启用僵尸对象”复选框。

# android - 如何从 MediaPlayer 获取快照？

> ID：14406640
> 
> 赞同：1
> 
> 时间：2013-01-18T19:54:51.297
> 
> 标签：android, media-player, surfaceview

Android 应用程序有一个带有 SurfaceView 支架的 MediaPlayer。MediaPlayer 完美地流式传输视频。以下代码用于获取快照：

```
vSurfaceHostingMediaPlayer.setDrawingCacheEnabled(true);
Bimap bm = vSurfaceHostingMediaPlayer.getDrawingCache(false); 
```

其中 vSurfaceHostingMediaPlayer 是托管 MediaPlayer 的 SurfaceView。获得的位图具有正确的尺寸（即宽度和高度），但总是一致的黑色。

当将上述相同的代码应用于同一应用程序中的 ImageView 时，它可以完美运行。

获取 MediaPlayer 中播放的视频快照的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:17:25.853

像这样试试

```
View v = view.getRootView();
v.setDrawingCacheEnabled(true);
Bitmap b = v.getDrawingCache(); 
```

# java - 如何在java中显示上一条和下一条记录

> ID：14406643
> 
> 赞同：-3
> 
> 时间：2013-01-18T19:55:03.723
> 
> 标签：java, sql

> **可能重复：**
> [如何在 Java 中单击下一个按钮时显示下一个和上一个记录](https://stackoverflow.com/questions/14402734/how-to-display-next-and-previous-records-on-clicking-on-next-button-in-java)

我正在尝试将我的数据库中的记录显示到我在 JAVA 中的 gui 应用程序中。我试图运行下面的代码，但是我得到了不支持操作的异常，不知道它有什么问题。

```
 private void bt_previousActionPerformed(java.awt.event.ActionEvent evt) {
        if(evt.getSource()==bt_previous){

            DBUtil util = new DBUtil();
               try {
                    Connection con = util.getConnection();
                   PreparedStatement stmt = con.prepareStatement("SELECT [box_no],[weight],[note_state],[dm_state],[1],[2],[5],[10],[20],[50],[100],[500],[1000] FROM [CNV].[dbo].[soil_det] where rm_id=?");
                    ResultSet rs;
                    String rm = tf_rm_id.getText().trim();

                    stmt.setLong(1, Long.parseLong(rm));

                    rs = stmt.executeQuery();

                    rs.getArray(WIDTH);
                    char n = WIDTH;
                    int i;
                    for (i=0; i<n; i++) {
                        String a = rs.getString("weight");
                        txtboxwgt.setText(a);
                        String b = rs.getString("note_state");
                        cbnotstat.setSelectedItem(b);
                        String c = rs.getString("dm_state");
                        cbdmnstat.setSelectedItem(c);
                        txtboxno.setText(rs.getString("box_no"));
                        txtRe1.setText(rs.getString("1"));
                        txtRs2.setText(rs.getString("2"));
                        txtRs5.setText(rs.getString("5"));
                        txtRs10.setText(rs.getString("10"));
                        txtRs20.setText(rs.getString("20"));
                        txtRs50.setText(rs.getString("50"));
                        txtRs100.setText(rs.getString("100"));
                        txtRs500.setText(rs.getString("500"));
                        txtRs1000.setText(rs.getString("1000"));
                    }

               } catch (Exception e) {
                         JOptionPane.showMessageDialog(null, e.getMessage());
                     }
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:58:53.940

您需要在致电`ResultSet.next`后致电`executeQuery`：

```
while (rs.next()) {
... 
```

[PreparedStatement.executeQuery 示例](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/tjvpsxqu.htm)

# scala - Play 2.X ScalaRouting 布尔参数

> ID：14406645
> 
> 赞同：2
> 
> 时间：2013-01-18T19:55:12.130
> 
> 标签：scala, playframework-2.0

如何在路由定义中使用布尔值？

如果我用这种方式，

```
GET     /user/:userName   controllers.AppController.user(userName, registerDone:Boolean?=0) 
```

它抛出这个错误：

> ```
> [error]  found   : Int(0)
> [error]  required: Boolean 
> ```

如果我用这种方式，

```
GET     /user/:userName   controllers.AppController.user(userName, registerDone:Boolean?=false) 
```

它抛出这个错误：

> 错误请求：/user/aajjblack?registerDone=true，无法将参数 registerDone 解析为布尔值：应为 0 或 1

控制器：

```
public static Result user(final String userName, Boolean registerDone) {
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:40:38.193

`Int`改用...

```
GET  /user/:userName  controllers.AppController.user(userName, registerDone: Int?=0) 
```

行动：

```
public static Result user(final String userName, int registerDone) {
    if(registerDone == 0){
        return badRequest();
    }

    // do something with registered user...
    return ok();
} 
```

它是任何类型布尔值的最简单替换，因为您可以检查是否`registerDone`大于 0（并且它仍然保持类型安全）。

# javafx - 如何在 javafx 场景生成器中显示波斯语或阿拉伯语字符

> ID：14406646
> 
> 赞同：1
> 
> 时间：2013-01-18T19:55:14.207
> 
> 标签：javafx, arabic

我使用 javafx 场景构建器创建了一个 javafx 应用程序来设计其界面，当我尝试显示一些波斯语或阿拉伯语字符时，场景构建器以无序模式显示它，例如，当我将标签的文本更改为波斯语或阿拉伯语单词“اسم”时它以无序模式（从左到右）书写，例如“م س ا”（字符之间没有任何空格）。我想也许 javafx 场景构建器不支持波斯语或阿拉伯语，但我知道应该有某种方法，所以请帮助我如何去做。

注意：我只想通过双击控件来更改标签、按钮或其他控件的文本并更改其文本，所以我没有进行任何编码。

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-23T11:49:27.070

使用支持 RTL 的 JavaFX 版本，即 JavaFX 8（包含在 JDK8 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T06:38:09.007

我遇到了同样的问题，经过和我的朋友大量搜索后，我们使用 bdo 标签解决了这个问题。سلام 有关更多信息，请查看以下内容：

[http://www.robinlionheart.com/stds/html4/dir](http://www.robinlionheart.com/stds/html4/dir)

我们仍然有文本输入的问题，我希望有人能提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:43:11.453

> 我想也许 javafx 场景构建器不支持波斯语或阿拉伯语

是的，目前这是正确的。

在 JDK8 版本（目前计划于 2013 年 9 月发布）之前，JavaFX（以及基于 JavaFX 构建的 SceneBuilder）中不支持从右到左书写。

您可以使用[SceneBuilder 1.1 早期访问预览](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)，查看该功能是否已添加到后期开发版本中。但是，我认为当前的 SceneBuilder 1.1 预览版本中不支持 RTL。

> 但我知道应该有办法

在底层平台支持之前，我不相信这是可能的。

# slider - touchSlider“mouseTouch：true”选项不起作用

> ID：14406651
> 
> 赞同：2
> 
> 时间：2013-01-18T19:55:33.993
> 
> 标签：slider

我目前正在使用[touchSlider](http://touchslider.com/)处理滑块，并且它 mouseTouch 选项对我不起作用。滑块本身工作正常，但不是 mouseTouch 选项。我究竟做错了什么？

这是我的js：

```
$(document).ready(function() {
    $(".touchslider").touchSlider({ mouseTouch: true });
}); 
```

和html：

```
 <div class="touchslider">
            <div class="touchslider-viewport" style="width:500px; height: 375px;overflow:hidden; border: 1px solid #f00;"><div>
                <div class="touchslider-item"><img src="img/3540115854_5d302001da.jpg" width="500" height="354" /></div>
                <div class="touchslider-item"><img src="img/3542680555_ea43d85e0a.jpg" width="500" height="354" /></div>
                <div class="touchslider-item"><img src="img/3540231388_f8ec22b549.jpg" width="500" height="354" /></div>
                <div class="touchslider-item"><img src="img/3546828250_6f91b64ba7.jpg" width="500" height="354" /></div>
            </div></div>

            <div>
                <span class="touchslider-prev">←&lt;/span>
                <span class="touchslider-nav-item touchslider-nav-item-current">1</span>
                <span class="touchslider-nav-item">2</span>
                <span class="touchslider-nav-item">3</span>
                <span class="touchslider-nav-item">4</span>
                <span class="touchslider-next">→&lt;/span>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:22:44.260

**使用文件协议**通过我的本地文件系统访问 .html 时遇到同样的**问题**

 **```
file://pathtothehtml/touchslidertest.html 
```

**当我使用http**访问 .html 时**，不会出现**此问题

 **```
http://hostnametothehtml/touchslidertest.html 
```

我在 MacOS 上使用了 chrome、firefox 和 safari - 使用 http 解决了所有问题。

### 原因分析

浏览器使用与通过 http 收集的结果不同的文件协议处理收集的结果。

*小心：以下只是猜测，因为我没有发现任何关于任何常见浏览器如何处理文件协议的信息。*

也许浏览器支持文件协议的拖放。这种支持可能会覆盖浏览器中页面解释器的事件处理——这样图像上的拖动事件永远不会到达页面的 DOM 事件处理例程。****

# maven - 将带有 *.pom 文件的 maven 原型项目 jar 安装到本地 repo

> ID：14406652
> 
> 赞同：5
> 
> 时间：2013-01-18T19:55:35.743
> 
> 标签：maven, maven-3, maven-archetype

我对 maven 有点陌生，想知道如何将原型 jar 安装到我的本地仓库

我有一个目录 com.foo 包含以下文件：

```
maven_metadata_local.xml
[1.00.00-SNAPSHOT] 
```

其中包含这些文件

```
_maven.repository
   foo-archetype-1.00.00-SNAPSHOT.jar
   foo-archetype-1.00.00-SNAPSHOT.pom
   maven_metadata_local.xml 
```

根据我的阅读，我了解到有一种方法可以使用此原型构建模板项目，但首先我需要将其安装到我的本地存储库中，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T07:21:12.757

我设法做到了：

我所做的是打开`maven_metadata_local.xml`以获取 groupId、artifactId 和 version

从该目录运行此命令

```
mvn install:install-file                            
-Dfile=foo-archetype-1.00.00-SNAPSHOT.jar     \
-DgroupId=com.foo                             \
-DartifactId=foo-archetype                    \
-Dversion=1.00.00-SNAPSHOT                    \
-Dpackaging=jar                               \
-DgeneratePom=true 
```

一旦完成（`BUILD SUCCESS`）我在我的本地存储库中获得了构建转到我要从中创建项目的文件夹运行此命令

```
mvn archetype:generate                \
-DarchetypeGroupId=com.foo            \
-DarchetypeArtifactId=foo-archetype   \
-DarchetypeVersion=1.00.00-SNAPSHOT   \
-DgroupId=com.mycom                   \
-DartifactId=myApp                    \
-Dversion=myversion-SNAPSHOT 
```

在eclipse中我导入了一个现有的maven项目，右键单击项目-> maven->更新，我得到了完整的构建准备工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:20:42.980

将原型添加到本地存储库与添加任何其他依赖项没有什么不同。您可以简单地`mvn install`在其上运行命令。

# ruby-on-rails - Rails 3 适用于下一个即将到来的“事件”

> ID：14406655
> 
> 赞同：1
> 
> 时间：2013-01-18T19:55:39.540
> 
> 标签：ruby-on-rails, scope, rails-activerecord

尝试为此开发一个范围`:next`将返回下一个即将到来的“事件”（或其他），因为模型具有`end_at`：

这将带来所有即将发生的事件：

```
scope :upcoming, lambda { where("end_at >= ?", Date.today).order("start_at") } 
```

因此认为以下将返回该有序列表中的第一个事件：

```
scope :next,     lambda { where("end_at >= ?", Date.today).order("start_at").first } 
```

但相反，它返回所有事件！？！等同于`Event.all`。

无论如何，构建这个范围的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:19:17.700

假设您的`upcoming`范围实际上正在工作，您可以从`next`范围中调用它：

```
scope :next, lambda { upcoming.first } 
```

我不确定这是否真的有效，但我建议将其更改为类方法：

```
def self.next
  upcoming.first
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:20:39.597

您可以编写一个类方法并使用它来代替..

```
def self.next
    where("end at >= ?", Date.today).order("start_at").first
end 
```

# php - Apache/PHP 混淆目录名和脚本文件名？

> ID：14406658
> 
> 赞同：0
> 
> 时间：2013-01-18T19:56:05.407
> 
> 标签：php, apache, lamp, apache-config

为什么一个网址喜欢`http://192.168.1.116/wordpress/wp-content/themes/bktf/frameworks/back-end/theme-options/options/fields/font/field_font.js.php?ver=1358535557`

...结束服务`/wordpress/wp-content/themes/bktf/frameworks/back-end/theme-options.php/options/fields/font/field_font.js.php`（这也是 `$_SERVER['PHP_SELF'] 的内容）。

...在同一个父目录中同时具有目录名`theme-options`和文件名的情况下？`theme-options.php``back-end`

此外， 的内容`$_SERVER['SCRIPT_NAME']`是`/wordpress/wp-content/themes/bktf/frameworks/back-end/theme-options.php`。

为什么 Apache 或 PHP 模块会自动`.php`在目录名的末尾添加，只是因为有一个与 dir 相同的脚本？？？

***注意：**我在 Ubuntu 12LTS 服务器上使用 Apache 和 PHP 的默认配置，通过 tasksel 安装，然后使用[https://launchpad.net/~ondrej/+archive/php5](https://launchpad.net/~ondrej/+archive/php5) PPA 升级到 PHP 5.4，以及所有配置文件与默认值/示例基本相同 - 它是一个基本的 LAMP 服务器，旨在在 VM 中运行以用于开发目的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:07:24.747

`PHP_SELF`指的是服务器上正在运行的文件，而不是当前的 url。阅读 PHP $_SERVER 手册了解更多信息： http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

试试`$_SERVER['REQUEST_URI']`吧。这将在最后为您提供查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:10:46.463

`PHP_SELF`= 当前执行脚本的文件名，相对于文档根目录。 `SCRIPT_NAME`= 当前脚本的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T09:24:29.540

好的，我的问题有点令人困惑，所以我可以理解为什么每个人都回答了与我提出的问题不同的问题。

无论如何，在我的情况下发生的事情*是没有`theme-options`dir*（重命名并忘记了）并且 Apache 翻译了请求`/[...]/theme-options/[...]`，`/[...]/theme-options.php/[...]`因为有一个`theme-options.php` *script*。

我仍然不知道为什么带有所有默认配置的 Ubuntu LAMP 设置会做这种奇怪的路径杂耍，但我解决了我的直接问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:19:47.720

由于启用了 MultiViews 选项，Apache 将请求转换为具有扩展名的某些文件：[http ://httpd.apache.org/docs/2.2/mod/mod_negotiation.html#multiviews](http://httpd.apache.org/docs/2.2/mod/mod_negotiation.html#multiviews)

# jvm - Websphere 堆大小 4GB。内存会超过堆运行两个线程，每个线程并行消耗 3 GB 内存，还是 websphere 会暂停一个线程？

> ID：14406662
> 
> 赞同：-2
> 
> 时间：2013-01-18T19:56:09.673
> 
> 标签：jvm, websphere, heap-memory

抱歉含糊不清，但我只是想从高层次上理解 websphere 内存管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:52:40.000

This is really a question about JVM behavior. As far as I know, there are no JVMs that will block a thread waiting for another thread to finish if it is holding a large amount of memory. I expect both threads to continuously consume memory, and if both are able to allocate memory at the same rate, I would expect them both to get OutOfMemoryError as soon as their combined allocations exceed the max heap size.

# asp.net-mvc-4 - 使用 asp.net MVC4，如何让我的根 index.html 默认执行？

> ID：14406664
> 
> 赞同：6
> 
> 时间：2013-01-18T19:56:20.897
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing

对于我的大部分网站，我希望正常路由以 MVC 方式发生。但是，当应用程序首次启动时，我不希望路由转到 /Home/Index.cshtml。我希望它简单地转到 /Index.html

我当前的 RegisterRoutes 看起来像这样（并没有达到我的目标）

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("index.html");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-11T04:17:46.620

```
 public ActionResult Index() {
        string FilePath = Server.MapPath("~/index.html");
        // You can add other conditions also here
        if (System.IO.File.Exists(FilePath)) {
            return File(FilePath, "text/html");
        }
        return View();
    } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T08:23:50.367

我不知道您是否考虑到这一点，在根 web.config 中您应该设置：

```
<appSettings>
    <add key="webpages:Enabled" value="true" />
</appSettings> 
```

如果根目录中有 index.cshtml，则 RouteConfig.cs 中不需要任何其他内容（该文件当然只能包含 html 代码）。

但是，如果您只想提供（而不是处理）文件，例如 index.html，您还需要将此文件设置为项目中的起始页面，仅此而已，最简单的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T04:07:00.383

定义所有控制器的路由并删除默认根：

```
 name: "Default",
            url: "{controller}/{action}/{id}", 
```

新的默认值为 index.html。

# ruby-on-rails-3 - Rails ActiveRecord 范围与另一个范围“相反”，或者是“缺少”属性的用户

> ID：14406669
> 
> 赞同：8
> 
> 时间：2013-01-18T19:56:49.683
> 
> 标签：ruby-on-rails-3, activerecord, scope, named-scope

我有一个 user.rb 的模型，我在其中定义了一个范围`admins`，即通过权限表具有管理员角色的用户。

```
has_many :permissions
has_many :roles, :through => :permissions 
```

作用域是这样的：

```
scope :admins, joins(:permissions).merge(Permission.admin_permissions) 
```

我还想创建一个名为`non-admins`或类似的范围，即所有没有管理员角色的用户。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T12:49:53.837

如果你想要一个反向 SQL 查询，你必须自己手动完成。没有内置的 ActiveRecord 解决方案。

```
scope :admins, joins(:permissions).merge(Permission.where("permissions.admin = true"))
scope :non_admins, joins(:permissions).merge(Permission.where("permissions.admin = false")) 
```

如果作用域很多或者比较复杂，可以考虑通过 id 排除：

```
User.where("id not in (?)", User.admins.pluck(:id))

# or if you are already using admin records
admins = User.admins
User.where("id not in (?)", admins.map(&:id)) 
```

根据原始查询的行数和复杂性，这可能比以前的方式更慢或更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T20:17:46.363

一种简单的方法，对很多用户**来说性能不佳：**

```
admin_user_ids  = User.admins.map(&:id)
non_admin_users = User.all.reject { |u| admin_user_ids.include?(u.id) } 
```

# java - 异常开始前的 MySQL

> ID：14406673
> 
> 赞同：1
> 
> 时间：2013-01-18T19:56:59.563
> 
> 标签：java, mysql, jdbc

我收到一条错误消息，指出在结果集开始之前我遇到了异常。我正在尝试获取一个值（来自 MySQL 数据库的分数）并根据玩家分数将一个值添加到 Java 排名中。这是为了创建一个记分牌。

因此，如果玩家的分数低于当前分数，则以排名 1 发布。如果更高，程序将根据 MySQL 数据库中的下一个条目检查分数。我还没有实现一个功能来改变所有当前条目的排名以增加 1。

底线：我正在使用 MySQL 和 Java 创建记分牌。Java 程序根据输入创建一个分数条目，然后将其发送到 MySQL 数据库。

```
 System.out.println("Your score is: "+score*2+"  (A lower score is better.)");
      try {
   // create a java mysql database connection
   String myDriver = "com.mysql.jdbc.Driver";
   String myUrl = "jdbc:mysql://4.30.110.246:3306/apesbridge2013";
   String dbName = "apesbridge2013";
   String tbName = period + "period";
   Class.forName(myDriver);
   Connection conn = DriverManager.getConnection(myUrl, "user", CENSORED);
   next = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY);
   ResultSet resultSet = next.executeQuery("SELECT * FROM " + tbName);
   int cscore = resultSet.getInt("score");
   for(int sscore = score; sscore > cscore;){
       resultSet.next();
       cscore = resultSet.getInt("score");
       rank++;
   }

   stmt = conn.createStatement();
   stmt.executeUpdate("insert into " + dbName + "." + tbName + " " + "values(" + rank + ", '" + name + "', " + score + ")");
   stmt.close();
   conn.close();
 }
 catch (Exception e)
 {
   System.err.println("Got an exception! ");
   System.err.println(e.getMessage());
 }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:11:37.980

放在`resultSet.next();`您的 executeQuery 行的正下方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T20:15:36.730

正如@hd1 所述，您需要在调用`ResultSet.next()`后调用`executeQuery`：

```
while (resultSet.next()) {
... 
```

此外，更好地使用`PreparedStatement`而不是`java.sql.Statement`使用参数占位符来防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T20:42:43.733

你的 for 循环有问题；退出条件应该是当没有更多的行可以获取时。您的查询不能保证永远满足退出条件，您可能会尝试获取超过结果集的末尾。（即使您的 for 循环确实进入了，并且当 for 循环确实退出时，该循环派生的排名值是不确定的，它取决于数据库返回行的顺序。

我也没有看到对 resultSet.close() 或 next.close() 的任何调用。

这里有很多问题，很难知道从哪里开始。

* * *

但首先，让数据库通过查询将排名返回给您会更有效率：

```
"SELECT COUNT(1) AS rank FROM " + tbName + " WHERE score < " + score 
```

而不是拉回所有行，并比较每个分数。这很痛苦，而且一大堆代码只是噪音。这将使您能够专注于确实需要存在的代码。

一旦你开始工作，你需要确保你的语句不会受到 SQL 注入的攻击，而带有绑定变量的准备好的语句确实是实现这一目标的方法。

而且您确实需要确保`close()`对结果集、准备好的语句和连接上的方法进行调用。我们通常希望这些在 finally 块中。使用嵌套的 try/catch 块，其中的变量会立即初始化，如下所示：

```
try {
    Connection conn = DriverManager.getConnection(...

    try {
        stmt = conn.CreateStatement();

        String query = "SELECT COUNT(1) AS `rank` FROM " + tbName + " WHERE `score` < " + score ;

        try {
            ResultSet rs = stmt.executeQuery(query);
            while (rs.next()) {
               rank = rs.getInt("rank");
            }
        } finally {
            if (rs!=null) { rs.close() };
        }
    } finally {
        if (stmt!=null) { stmt.close() };
    }
} finally {
  if (conn!=null) { conn.close() };
} 
```

或者一个大的 try/catch 块也可以使用：

```
} finally {
   if (resultSet!=null) { resultSet.close() };
   if (next!=null) { next.close() };
   if (conn!=null) { conn.close() };
) 
```

关键是，确实需要调用 close 方法。

# c# - Microsoft.Build 网站文件的引擎输出

> ID：14406676
> 
> 赞同：1
> 
> 时间：2013-01-18T19:57:17.100
> 
> 标签：c#, asp.net, .net-4.0, msbuild, microsoft.build

我正在使用 Microsoft.Build 引擎从另一个应用程序编译网站，但在获取正确的可部署内容时遇到了问题。

如果我使用以下 MSBuild 命令，网站将正确构建。“Outdir”目录 (C:\output) 包含 bin 文件夹中所有 DLL 的副本，但没有 aspx 页面。“WebProjectOutputDir”目录 (C:\weboutput) 包含整个部署包（DLL、aspx 页面、CSS 等）的完整副本。

```
msbuild website.sln  /property:Outdir=C:\output\ /property:WebProjectOutputDir=c:\weboutput\ 
```

我尝试使用以下代码结构在上面重新创建此命令：

```
Dictionary<string, string> globalProperties = new Dictionary<string, string>();
BuildParameters buildParameters = new BuildParameters();
buildParameters.DetailedSummary = true;

globalProperties.Add("OutDir", @"C:\output\");
globalProperties.Add("Configuration", configuration);
globalProperties.Add("WebProjectOutputDir", @"C:\weboutput\");

BuildRequestData buildRequest = new BuildRequestData(solutionFileFullPath, globalProperties, null, new string[] { "Build" }, null);
BuildResult buildResult = BuildManager.DefaultBuildManager.Build(buildParameters, buildRequest); 
```

执行代码时，我会在“C:\output\”目录中获得构成网站的所有 DLL 的副本，就像上面一样，但在“WebProjectOutputDir”参数中指定的目录为空。是否有其他人使用过 Microsoft.Build 引擎来编译网站，如果是，您是如何获得可部署版本的代码的？

# javascript - 如何将外部 EventSource 作为 AngularJS 服务处理？

> ID：14406683
> 
> 赞同：1
> 
> 时间：2013-01-18T19:57:36.557
> 
> 标签：javascript, javascript-events, angularjs

我希望我的控制器能够订阅外部事件源，我通常会用以下方式定义：

```
var source = new EventSource('http://someURL.com/foo');
source.addEventListener('bar', handler, false); 
```

现在假设我正在使用的 API 只有一个正确的事件，但该事件会根据实际事件为您提供不同的字符串。所以我的处理程序看起来像：

```
var handler = function(data) {
   switch(data.cmd) {
       case 'alpha' : doSomething(); break;
       case 'beta' : doSomethingElse(); break;
       case 'cappa' : doAnotherThing(); break;
   }
} 
```

这很不幸，我知道，但这就是它的实施方式。我想要的是能够公开一个有意义的服务 API，所以在我的控制器中，我将能够单独订阅每种类型的事件，订阅一次，或重复订阅，以及取消订阅。

这有意义吗？使用 $q API 是否有更好的方法来做到这一点？如果不是，我将如何将异步事件映射到 AngularJS 服务 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T12:07:46.883

您可以为每种消息类型注册一个侦听器。

```
source.addEventListener('alpha', function(e) {
  doSomething();
}, false);

source.addEventListener('beta', function(e) {
  doSomethingElse();
}, false); 
```

# xslt-2.0 - xsl 插入计算元素

> ID：14406687
> 
> 赞同：2
> 
> 时间：2013-01-18T19:57:50.513
> 
> 标签：xslt-2.0

我对 XSLT 比较陌生，并且在一些应该相对简单的事情上遇到了重大问题。我已经在互联网上搜索了 2 天，但无法克服这个问题的最后一道障碍。

这是我要转换的 XML 的简单版本：

```
<Payment xmlns="http://www.xxxxxx.com/CIB/GIFTS/PaymentFileSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.xxxxxx.com/CIB/GIFTS/PaymentFileSchema.xsd ">
<Transaction>
    <POSellerName>DAF KNITWEARS LTD. (PG)</POSellerName>
    <PayeeName>883456789</PayeeName>
    <CurrencyCode>USD</CurrencyCode>
    <WTLCNumber>O0910122</WTLCNumber>
    <VendorAppNumber>6031</VendorAppNumber>
    <DocumentNumber>BEAI12000094</DocumentNumber>
    <PODetail>
        <PONumber>0887537</PONumber>
        <QuantityShipped>2550</QuantityShipped>
        <UnitOfMeasure>PCS</UnitOfMeasure>
        <CurrencyCode>USD</CurrencyCode>
        <AmountBilled>13226.37</AmountBilled>
    </PODetail>
    <PODetail>
        <PONumber>0887567</PONumber>
        <QuantityShipped>150</QuantityShipped>
        <UnitOfMeasure>PCS</UnitOfMeasure>
        <CurrencyCode>USD</CurrencyCode>
        <AmountBilled>873</AmountBilled>
    </PODetail>
  <ChargeBackDetail>
    <PONumber>0887567</PONumber>
    <CurrencyCode>USD</CurrencyCode>
    <ChargeBackAllocationAmount>-105</ChargeBackAllocationAmount>
    <ChargeBackReferenceNumber>CB0872364C</ChargeBackReferenceNumber>
    <UPC/>
  </ChargeBackDetail>
  <ChargeBackDetail>
    <PONumber>0872355</PONumber>
    <CurrencyCode>USD</CurrencyCode>
    <ChargeBackAllocationAmount>-105</ChargeBackAllocationAmount>
    <ChargeBackReferenceNumber>CB0872355A</ChargeBackReferenceNumber>
    <UPC/>
  </ChargeBackDetail>
</Transaction>
</Payment> 
```

`<PODetail>`我想在每个命名的末尾插入一个元素

```
<AmountPaid>. 
```

所以我处理每一个并在它们各自的元素中`<PODetail>`寻找具有相同值的 a。`<ChargeBackDetail>`如果找到，该元素将具有 /PODetail/Amountbilled - /ChargeBackDetail/ChargeBackAllocationAmount 的值，否则该值将等于 /PODetail/Amountbilled。下面是他想要的 PONumber 元素的结果。

```
 <PODetail>
    <PONumber>0887537</PONumber>
    <QuantityShipped>2550</QuantityShipped>
    <UnitOfMeasure>PCS</UnitOfMeasure>
    <CurrencyCode>USD</CurrencyCode>
    <AmountBilled>13226.37</AmountBilled>
    <AmountPaid>13226.37</AmountPaid>
</PODetail>
<PODetail>
    <PONumber>0887567</PONumber>
    <QuantityShipped>150</QuantityShipped>
    <UnitOfMeasure>PCS</UnitOfMeasure>
    <CurrencyCode>USD</CurrencyCode>
    <AmountBilled>873</AmountBilled>
    <AmountPaid>768</AmountPaid>
</PODetail> 
```

这是我的 XSLT：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
xmlns:pf="http://www.WellsFargo.com/CIB/GIFTS/TradeERP/PaymentFileSchema">

<xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="pf:PODetail">
 <xsl:copy>
 <xsl:apply-templates select="@* | node()"/>

<xsl:variable name="poNumber" select="pf:PONumber"/>
<xsl:variable name="poAmountBilled" select="number(pf:AmountBilled)"/>

<xsl:for-each select="//pf:Transaction/pf:ChargeBackDetail">
    <xsl:variable name="poNumber" select="pf:PODetail/pf:PONumber"/>
    <xsl:variable name="cbPONumber" select="./pf:ChargeBackDetail/pf:PONumber"/>
    <xsl:variable name="cbAmount" select="number(./pf:ChargeBackDetail/pf:ChargeBackAllocationAmount)"/>

        <xsl:if test='$poNumber = $cbPONumber'> 
            <AmountPaid><xsl:number value="$poAmountBilled - $cbAmount"/></AmountPaid>
        </xsl:if>

</xsl:for-each>

 <xsl:if test ="not(pf:AmountPaid)">
<AmountPaid><xsl:number value="$poAmountBilled"/> </AmountPaid> 
 </xsl:if> 

</xsl:copy>
</xsl:template>

 </xsl:stylesheet> 
```

任何帮助将不胜感激！

基因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:26:04.287

**这种转变**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:x="http://www.xxxxxx.com/CIB/GIFTS/PaymentFileSchema" exclude-result-prefixes="x">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="x:PODetail">
  <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
   <xsl:element name="AmountPaid"
                namespace="http://www.xxxxxx.com/CIB/GIFTS/PaymentFileSchema">
     <xsl:sequence select=
     "sum((x:AmountBilled,
          ../x:ChargeBackDetail[x:PONumber eq current()/x:PONumber]
                          /x:ChargeBackAllocationAmount))"/>
   </xsl:element>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Payment xmlns="http://www.xxxxxx.com/CIB/GIFTS/PaymentFileSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.xxxxxx.com/CIB/GIFTS/PaymentFileSchema.xsd ">
<Transaction>
    <POSellerName>DAF KNITWEARS LTD. (PG)</POSellerName>
    <PayeeName>883456789</PayeeName>
    <CurrencyCode>USD</CurrencyCode>
    <WTLCNumber>O0910122</WTLCNumber>
    <VendorAppNumber>6031</VendorAppNumber>
    <DocumentNumber>BEAI12000094</DocumentNumber>
    <PODetail>
        <PONumber>0887537</PONumber>
        <QuantityShipped>2550</QuantityShipped>
        <UnitOfMeasure>PCS</UnitOfMeasure>
        <CurrencyCode>USD</CurrencyCode>
        <AmountBilled>13226.37</AmountBilled>
    </PODetail>
    <PODetail>
        <PONumber>0887567</PONumber>
        <QuantityShipped>150</QuantityShipped>
        <UnitOfMeasure>PCS</UnitOfMeasure>
        <CurrencyCode>USD</CurrencyCode>
        <AmountBilled>873</AmountBilled>
    </PODetail>
  <ChargeBackDetail>
    <PONumber>0887567</PONumber>
    <CurrencyCode>USD</CurrencyCode>
    <ChargeBackAllocationAmount>-105</ChargeBackAllocationAmount>
    <ChargeBackReferenceNumber>CB0872364C</ChargeBackReferenceNumber>
    <UPC/>
  </ChargeBackDetail>
  <ChargeBackDetail>
    <PONumber>0872355</PONumber>
    <CurrencyCode>USD</CurrencyCode>
    <ChargeBackAllocationAmount>-105</ChargeBackAllocationAmount>
    <ChargeBackReferenceNumber>CB0872355A</ChargeBackReferenceNumber>
    <UPC/>
  </ChargeBackDetail>
</Transaction>
</Payment> 
```

**产生想要的正确结果：**

```
<Payment xmlns="http://www.xxxxxx.com/CIB/GIFTS/PaymentFileSchema"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.xxxxxx.com/CIB/GIFTS/PaymentFileSchema.xsd ">
   <Transaction>
      <POSellerName>DAF KNITWEARS LTD. (PG)</POSellerName>
      <PayeeName>883456789</PayeeName>
      <CurrencyCode>USD</CurrencyCode>
      <WTLCNumber>O0910122</WTLCNumber>
      <VendorAppNumber>6031</VendorAppNumber>
      <DocumentNumber>BEAI12000094</DocumentNumber>
      <PODetail>
        <PONumber>0887537</PONumber>
        <QuantityShipped>2550</QuantityShipped>
        <UnitOfMeasure>PCS</UnitOfMeasure>
        <CurrencyCode>USD</CurrencyCode>
        <AmountBilled>13226.37</AmountBilled>
         <AmountPaid>13226.37</AmountPaid>
      </PODetail>
      <PODetail>
        <PONumber>0887567</PONumber>
        <QuantityShipped>150</QuantityShipped>
        <UnitOfMeasure>PCS</UnitOfMeasure>
        <CurrencyCode>USD</CurrencyCode>
        <AmountBilled>873</AmountBilled>
         <AmountPaid>768</AmountPaid>
      </PODetail>
      <ChargeBackDetail>
         <PONumber>0887567</PONumber>
         <CurrencyCode>USD</CurrencyCode>
         <ChargeBackAllocationAmount>-105</ChargeBackAllocationAmount>
         <ChargeBackReferenceNumber>CB0872364C</ChargeBackReferenceNumber>
         <UPC/>
      </ChargeBackDetail>
      <ChargeBackDetail>
         <PONumber>0872355</PONumber>
         <CurrencyCode>USD</CurrencyCode>
         <ChargeBackAllocationAmount>-105</ChargeBackAllocationAmount>
         <ChargeBackReferenceNumber>CB0872355A</ChargeBackReferenceNumber>
         <UPC/>
      </ChargeBackDetail>
   </Transaction>
</Payment> 
```

# spring - 弹簧视图模板蒙皮

> ID：14406688
> 
> 赞同：-1
> 
> 时间：2013-01-18T19:57:57.920
> 
> 标签：spring, spring-mvc, themes, skinning

如何为 Spring MVC 应用程序实现基于 css 的模板皮肤。此外，是否可以在运行时更改 Spring MVC 文件的模板路径，以根据用户选择或调用的 url 加载完全不同的主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:05:28.477

看看[春季](http://viralpatel.net/blogs/spring-3-mvc-themes-tutorial-example/) [主题](http://www.devmanuals.com/tutorials/java/spring/spring3/mvc/Spring3-MVC-Themes.html)。此外，还有其他选择：

*   `<body>`例如，您可以更改类，并拥有不同的主题[，就像在 Dojo 中所做的那样](http://dojotoolkit.org/reference-guide/1.8/dijit/themes.html)。
*   您可以[加载样式表`alternate`](http://css-tricks.com/examples/AlternateStyleSheets/)并使用 JS 切换它们。

# ipad - 通过 30pin HDMI 在 iPad 上禁用第二个屏幕而不断开连接

> ID：14406689
> 
> 赞同：0
> 
> 时间：2013-01-18T19:58:00.703
> 
> 标签：ipad, screen, hdmi

iPad 会自动检测何时通过 30 针 HDMI 线缆连接到屏幕，并将其屏幕内容镜像到第二个屏幕。

是否可以在不断开电缆的情况下禁用第二个屏幕的镜像？我想要一个功能，可以在不断开电缆的情况下启用和禁用第二个屏幕。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:31:32.807

默认行为是按照您的说明进行镜像。您可以通过注册以接收屏幕事件警报来覆盖此设置。[请参阅iOS 多显示器编程指南](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/WindowAndScreenGuide/UsingExternalDisplay/UsingExternalDisplay.html)的文档。这将使您能够确定外部屏幕上是否显示以及显示的内容。

# javascript - 为什么这个正则表达式会导致无限循环？

> ID：14406690
> 
> 赞同：1
> 
> 时间：2013-01-18T19:58:02.460
> 
> 标签：javascript, regex

```
function listPlayers(subject){
    var players=[];

    var myregexp = /(\S*)(?:,\s|$)/g;
    var match = myregexp.exec(subject);
    while (match != null) {
         players.push(match[1]);
         match = myregexp.exec(subject);
    }
    return players;
} 
```

我要匹配的字符串是这样的`�r Henderson�r�f, Pedrin�r�f, �c~�lArthur�r�f, John�r�f`

我期望的输出是这样的数组`['Henderson�r�f', 'Pedrin�r�f', '�c~�lArthur�r�f', 'John�r�f']`

我不明白的是在正则表达式上一切似乎都很好。 ![在此处输入图像描述](../Images/2d7f379fbbf40225d9b205a57dc31b6e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T20:10:44.373

尝试将正则表达式更改为：

```
var myregexp = /(\S+)(?:,\s|$)/g; 
```

我认为循环可能是因为它在末尾反复匹配一个空字符串。

由于我认为您对获取零长度名称不感兴趣，因此通常这可能是一个更好的正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T17:22:40.907

只是出于兴趣，使用零宽度正向预测断言的一种可能更简单的方法：

```
function listPlayers( subject ) {
    return subject.match( /\S+(?=,\s|$)/g );
} 
```

# mobile - iOS 6 上的 FB.login() 不会将控制权返回给异步执行的脚本

> ID：14406692
> 
> 赞同：1
> 
> 时间：2013-01-18T19:58:07.607
> 
> 标签：mobile, login, ios6, facebook-javascript-sdk

我创建了 Facebook 错误 ID 517124631665353 来询问这个问题，但我不确定这是 Facebook 的 JS SDK 还是 iOS 6 附带的最新版本的移动 Safari 的错误。这只发生在运行的 iPhone 和 iPad 上iOS 6。

尝试以下每个 FB Rell 示例：

普通警报（）： [http ://www.fbrell.com/saved/5224cbd2585cdcd4faefd2de236e577c](http://www.fbrell.com/saved/5224cbd2585cdcd4faefd2de236e577c)

```
<button id="fb-login">Login & Permissions</button>

<script>
document.getElementById('fb-login').onclick = function() {
  var cb = function(response) {
    Log.info('FB.login callback', response);
    if (response.status === 'connected') {
      Log.info('User logged in');
    } else {
      Log.info('User is logged out');
    }
    alert('This fires on Mobile Safari, iOS 6.');
  };
  FB.login(cb, { scope: 'publish_actions' });
};
</script> 
```

setTimeout() 中的 alert()： [http ://www.fbrell.com/saved/9fee23e8553878748f8a3b840e8f0cb5](http://www.fbrell.com/saved/9fee23e8553878748f8a3b840e8f0cb5)

```
<button id="fb-login">Login & Permissions</button>

<script>
document.getElementById('fb-login').onclick = function() {
  var cb = function(response) {
    Log.info('FB.login callback', response);
    if (response.status === 'connected') {
      Log.info('User logged in');
    } else {
      Log.info('User is logged out');
    }
    setTimeout(function () {alert('This never fires on Mobile Safari, iOS 6.')}, 0);
  };
  FB.login(cb, { scope: 'publish_actions' });
};
</script> 
```

在运行 iOS 6 的 iPad 和 iPhone 上，setTimeout() 中的 alert() 不会触发。在 iPad 上，弹出窗口似乎在所有情况下都会自行关闭，但在 iPhone 中，弹出窗口不会关闭，只是有时用户会返回到原始页面。

我们最初在 www.expertflyer.com/mobile 上看到了这个问题，一旦 Facebook 登录完成，我们就会发送一个 AJAX 请求。我们发现当 AJAX 请求返回时应该执行的代码永远不会被执行。在 FB Rell 示例中使用 setTimeout() 调用更简单地显示了这一点，但共同点是在 Facebook 登录返回后不执行异步代码。这是以前工作的，我们没有对我们的代码进行任何更改，这在早期版本的 iOS 和 Android 上按预期工作。

# javascript - javascript从flot绑定函数访问类对象

> ID：14406694
> 
> 赞同：0
> 
> 时间：2013-01-18T19:58:11.053
> 
> 标签：javascript, flot

我有一个 javascript“类”，它有两种方法。在其中一种方法中，我正在尝试创建一个 flot plothover 绑定，该绑定可以访问我的类的属性和方法，在该类中进行绑定。我想弄清楚的是如何从绑定函数中访问类属性和方法。

```
var MyClass = 
{
  Property1 = null,
  ShowToolTip: function( x, y, text ) { ...stuff... },
  Render: function ( arg1, arg2 ) 
  {
     this.Property1 = "this works";
     $('#placeholder').bind('plothover', function (event, pos, item ) {
        this.Property1 = "non workie";         // need access to Property1
        this.ShowToolTip( 10, 10, "stuff" );   // need access to ShowToolTip
     }
  }
} 
```

显然，我不能使用“this”来查看 MyClass - 那么是否可以从绑定函数中访问和调用 MyClass 的属性和方法？

我可以有多个 MyClass 的克隆运行，所以我需要做的任何事情都必须在每个克隆的类中隔离。

感谢您的任何建议。科里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:01:43.643

您可以创建对以下内容的引用`this`：

```
Render: function ( arg1, arg2 ) 
      {
         this.Property1 = "this works";
         var that = this;
         $('#placeholder').bind('plothover', function (event, pos, item ) {
            that.Property1 = "non workie";         // need access to Property1
            that.ShowToolTip( 10, 10, "stuff" );   // need access to ShowToolTip
         }
      } 
```

# php - 更正 set_error_handler() 函数参考链接

> ID：14406696
> 
> 赞同：0
> 
> 时间：2013-01-18T19:58:17.553
> 
> 标签：php, error-handling, hyperlink, preg-replace

使用 PHP 的`set_error_handler()`函数，您可以让*可调用*函数接收一些参数，其中之一是错误字符串。这是我在测试中收到的示例错误字符串（我导致错误被抛出）：

```
parse_ini_file(/MyPath/App/Config/Database2.ini) [<a href='function.parse-ini-file'>function.parse-ini-file</a>]: failed to open stream: No such file or directory 
```

您会注意到它包含一个指向该`parse_ini_file()`函数的链接，该链接应指向以下内容：

[http://us1.php.net/manual/en/function.parse-ini-file.php](http://us1.php.net/manual/en/function.parse-ini-file.php)

我的问题是，将**http://us1.php.net/manual/en/**部分添加到该字符串中的路径的最简单方法是什么。是否有一个函数可以让我为此设置基本 URL，或者我是否必须手动将字符串替换为类似的东西`preg_replace()`？对我来说这似乎很奇怪，它只是文件名的默认点......除了文本操作之外，必须有一个标准程序来修复该链接。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:19:35.517

我最终使用了该`preg_replace()`解决方案，因为我没有收到任何答案。如果其他人试图做同样的事情，在你的错误处理函数中这样做：

```
function myErrorHandler($errno, $errstr, $errfile, $errline)
{
   $pattern = "/(.*)(href=')(.*)(')(.*)/i";
   $errstr = preg_replace($pattern, "$1target='_blank' $2http://us1.php.net/manual/en/$3$4$5", $errstr);
   echo($errstr);
} 
```

# c++ - 使用 C++ 从给定精确坐标的图像中裁剪矩形

> ID：14406698
> 
> 赞同：2
> 
> 时间：2013-01-18T19:58:26.497
> 
> 标签：c++, image

有没有办法使用 fread/fwrite 做到这一点？我从要裁剪的图像中获得了矩形的确切坐标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T20:00:56.390

大多数图像文件比像素数组更复杂。它们通常包含带有元数据的标头，并以某种方式压缩图像数据。

编辑它们通常是使用某种库完成的，例如[Magick++](http://www.imagemagick.org/script/magick++.php)。这些库包含用于

*   打开图像文件并读取图像数据
*   使用内置功能修改图像数据，例如裁剪、缩放等。
*   访问原始图像数据（通常显示为像素数组），以便程序员可以以库未提供的方式对其进行修改。
*   保存图像文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T20:03:29.583

我个人向​​你推荐 CImg，一个“用于图像处理的小型、开源、C++ 工具包”。您所要做的就是包含一个头文件，从[http://cimg.sourceforge.net/](http://cimg.sourceforge.net/)下载它，使用 CImg 库从文件中加载图像，然后使用该`crop`函数。

# javascript - 使用 Javascript 隐藏和显示下拉列表

> ID：14406708
> 
> 赞同：0
> 
> 时间：2013-01-18T19:59:05.090
> 
> 标签：javascript, internet-explorer, internet-explorer-9, devexpress

我使用 javascript 来隐藏和显示 dev express 组合框控件。

在页面加载中，我有以下代码来隐藏控件：

```
window.onload = function() { 
    document.getElementById('StateDropDown').style.display = 'none';
} 
```

当国家设置为美国时，我会显示美国各州的组合框。

```
if(s.GetText() == 'UNITED STATES') {
    document.getElementById('StateTextBox').style.display = 'none';
    document.getElementById('StateDropDown').style.display = 'block';
}
else {
    document.getElementById('StateDropDown').style.display = 'none';
    document.getElementById('StateTextBox').style.display = 'block';
}
e.processOnServer = false; 
```

问题是下拉菜单显示时的大小。即使我将 Country Combo Box 和 State Combo Box 设置为相同大小，但 State Combo Box 在屏幕上显示时会更短。这发生在 Internet Explorer 中。Chrome 正确呈现。

任何人都知道为什么 IE 会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:38:48.247

如果您使用的是 DevExpress 控件，建议使用以下方法订阅事件：

```
window.addEventListener("load", function() {}); 
```

或者

```
ASPxClientUtils.AttachEventToElement("load", function() {}); 
```

# sql - 在 SQL 中组合 2 个 Not Like 语句

> ID：14406709
> 
> 赞同：1
> 
> 时间：2013-01-18T19:59:07.740
> 
> 标签：sql

我有一个公式，其中我有一个区域列和一个区域列（一个区域由区域组成），在公式中我有一些代码可以将某些区域作为一个整体排除。但有些我只需要排除某些地区的几个地区，但不是全部。代码的 where 部分如下所示：在代码中，我想排除所有 100 区和 76 区，但对于 88 区，我只想排除 04 区，但是当我输入这样的代码时，它仍然排除了所有 88 .（此代码中没有 GROUP BY）

```
SELECT ID, Date, Class, Location, Training Number
FROM Table 1 INNER JOIN Table 2 ON Training Number     
WHERE (Region NOT LIKE '100') AND 
      (Region NOT LIKE '76') AND 
      (Region NOT LIKE '88') AND 
      (District NOT LIKE '04') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T20:04:21.430

我不确定您为什么使用`LIKE`运算符，您应该能够使用：

```
SELECT ID, Date, Class, Location, Training Number
FROM Table 1 
INNER JOIN Table 2 
  ON Training Number     
WHERE Region <> '100' 
  AND Region <> '76'
  AND 
  (
    Region <> '88' 
    OR District <> '04'
  ); 
```

或者您可以使用`NOT IN`：

```
SELECT ID, Date, Class, Location, Training Number
FROM Table 1 
INNER JOIN Table 2 
  ON Training Number     
WHERE 
(
  Region NOT IN ('100', '76')
)
AND 
(
  Region <> '88' 
  OR District <> '04'
) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/9fae0/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:06:14.177

怎么样：

```
SELECT ID, Date, Class, Location, Training Number
FROM Table 1 INNER JOIN Table 2 ON Training Number     
WHERE (Region <> '100') AND -- Region cannot be 100
      (Region <> '76') AND  -- Region cannot be 76
      (Region <> '88' OR District <> '04') -- Region cannot be 88 if District is 04 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:04:16.960

只需这样做：

```
where Region not in ('100', '76', '88') and district <> '04' 
```

你不需要为此使用`like`。

# ajax - CakePHP：在ajax之后渲染视图

> ID：14406710
> 
> 赞同：5
> 
> 时间：2013-01-18T19:59:18.573
> 
> 标签：ajax, cakephp, cakephp-2.0

我正在用 CakePHP 构建一个应用程序，我有一个 jquery 对话框窗口，每次用户打开它时，我都想执行一个 jquery 请求，该请求将使用请求的结果填充内容。我在 webroot/js 文件夹中有一个 js 文件，其中包含以下脚本：

```
$.ajax({                    
    url:'/projects/getAssets',
    type:"POST",                                        
    data:assetData,
    //dataType:'text',
    update: '#assetManagerContent'
}); 
```

在我的控制器文件（ProjectsController）中，我具有以下功能：

```
function getAssets($id = null) {
    // Fill select form field after Ajax request.
    if(!empty($this->data)){
        $this->set('assetsFilter',
        $this->Project->Asset->find('list',
            array(
                'conditions' => array(
                    'Asset.project_id' => '23'
                )
            )
        )
    );
    $this->render('elements/assets', 'ajax');
    }
} 
```

最后我有视图（元素/资产）：

```
<?php $assetsFilter = $this->requestAction('projects/getAssets'); ?>
  <?php foreach($assetsFilter as $assetFilter): ?>
    <div class="assetManager-asset">
        <div class="thumb"></div>
        <div class="label-name"><?php echo $assetFilter['AssetType']['type'] ?></div>
        <div class="label-date"><?php echo $assetFilter['Asset']['layer'] ?></div>
        <?php //echo $assetFilter['Asset']['id'] ?>
    </div>
   <?php endforeach; ?> 
```

当用户打开对话框时，会触发 ajax 请求，但 #assetManagerContent div 中似乎没有发生任何事情。

我希望有人能告诉我我做错了什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T20:09:11.463

据我所知，[jQuery ajax api](http://api.jquery.com/jQuery.ajax/)`update`中没有选项。相反，您应该添加成功回调并在那里填充数据：

```
$.ajax({                    
    url:'/projects/getAssets',
    type:"POST",                                        
    data:assetData,
    //dataType:'text',
    success: function(data) {
      $('#assetManagerContent').html(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T20:11:15.293

`update`正如 jeremyharris 已经指出的那样，没有-option 选项。

如果你只想用通过 AJAX 加载的 HTML 来填充元素，你也可以使用`$.load()`：

```
$('#assetManagerContent').load('/projects/getAssets', assetData); 
```

它基本上是相应调用的简写，如果参数存在`$.ajax()`，它将自动发出`POST`请求。`data`

见：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T10:33:56.627

为了让你的动作更快、更干净和可重用，你可以这样写。

```
 function getAssets($id = null) {
    // Fill select form field after Ajax request.
    if(!empty($this->data)){            
        return $this->Project->Asset->find('list',
                  array(
                     'conditions' => array(
                            'Asset.project_id' => '23'
                  )
               )
            );    
    }
} 
```

阿贾克斯

```
 $.ajax({                    
        url:'/projects/getAssets/'+id,
        type:"POST",
        success: function(data) {
          $('#assetManagerContent').html(data);
        }
    });
OR
$('#assetManagerContent').load('/projects/getAssets/'+id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-18T11:57:11.447

它可以工作，但以文本模式显示结果。例如

> ```
>  <form action="/amit/tour-writer/derivedItineraries/getHotelDetail/1230"
>  id="DerivedItineraryGetHotelDetailForm" method="post" accept-charset="utf-8">
> <div style="display:none;"><input type="hidden" name="_method" value="POST"/>
> </div>
> <div class="required"><label for="DerivedItineraryInclusion">Inclusion</label>
> <textarea name="data[DerivedItinerary][inclusion]" class="ckeditor" 
> required="required" style="width:200px;" cols="30" rows="6" 
> id="DerivedItineraryInclusion">Test data</textarea></div></td></tr>
> </form> 
> ```

# templates - templatetap 的可扩展性问题

> ID：14406712
> 
> 赞同：2
> 
> 时间：2013-01-18T19:59:24.703
> 
> 标签：templates, hadoop, elastic-map-reduce, cascading

我编写了一个级联 1.2 程序，它对传感器网络的数据进行以下处理：

1.  读取具有 3 列的 CSV 文件：毫秒时间戳、事件类型（传感器数据、电池电量、传感器电源状态）、事件正文
2.  将毫秒时间戳四舍五入到最接近的秒数，并在此值上进行 GroupBy
3.  GroupBy 事件类型
4.  使用以下模板将输出写入 templatetap：“{rounded timestamp}/{event type}/”

**如果日志数据量很小**（~300MB），我的程序运行良好，但如果我使用 EMR 集群上传感器网络产生的实际日志数据量（~200GB/天）运行它，reducer 会继续失败带有以下消息：**“任务尝​​试_201301160001_0003_r_00000X_0 未能报告状态 602 秒。杀戮！**

如果我在模板点击中将模板设为静态（如“输出”而不是“{rounded timestamp}/{event type}/”），则作业将**在 3 小时内完成而不会出现问题**。

因此，问题似乎出在模板点击中！

也许是无法处理这么多动态路径？（但我的理解是，它使用默认参数随时保持约 300 个打开/活动？）

除了路径模板本身，我没有将任何参数传递给模板抽头 - 所以所有其他参数都是默认的。

**我该怎么做才能使工作与“{rounded timestamp}/{event type}/”模板一起工作？**

# html - 使用多个外部样式表还是尽可能少？利弊

> ID：14406714
> 
> 赞同：3
> 
> 时间：2013-01-18T19:59:42.723
> 
> 标签：html, css, seo

我正在搜索 CSS 最佳实践，思考维护我的代码的最佳实践是什么，我读到了一些与我所学的几乎所有内容完全相反的东西，但它来自谷歌。我总是喜欢使用多个样式表。我发现维护代码更好，而且我的代码不会加载几个不会使用的 css 类。

谷歌开发者将我们引导至相反的方向：

> *将外部样式表组合到尽可能少的文件中可以减少 RTT 和下载其他资源的延迟。*

以下是在生产中组合 CSS 文件的一些经验法则，也是他们推荐的：

1.  将 CSS 分成 2 个文件：一个 CSS 文件包含启动时呈现页面所需的最少代码；和一个 CSS 文件，其中包含在页面加载完成之前不需要的代码。
2.  在自己的文件中提供很少访问的组件的 CSS。仅当用户请求该组件时才提供文件。
3.  对于不应缓存的 CSS，请考虑将其内联。
4.  不要使用 CSS 文件中的 CSS @import。

真的......当css不会被缓存时，谷歌推荐内联css？或尽可能使用较少的 css 文件？（当然我们不应该对每件事都使用 css，但我们总是读到有经验的网页设计师建议使用多个样式表，所以我真的很困惑（如果它不是来自谷歌，我会忽略，但作为是的，我考虑过询问stackoverflow的用户意见，因为我认为它对其他人也有帮助）。

PS：[你可以在这里找到我发布的信息的地址](https://developers.google.com/speed/docs/best-practices/rtt?hl=pt-BR#CombineExternalCSS)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:07:21.320

页面请求通常需要更长的时间然后加载一些额外的字节。这就是为什么谷歌建议他们做什么。这确实是 imo 的最佳实践，也是我所做的。

只是为了让您的代码井井有条，您应该考虑使用像 less (lesscss.org) 这样的 css 预处理器。这样，您可以将代码保存在单独的文件中，以便于开发。然后，您在 master less 中使用一堆 @import 语句，并将其编译为 css。那是您需要在页面中加载的唯一 css 文件。请确保@import .less 文件，而不是 .css 文件，因为后者仍会生成额外的页面请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:12:39.133

好吧，当您编写代码时，您可以将它们全部保存在单独的样式表中，然后您可以在最后将它们全部转储到一个样式表中。

它适用于移动用户，因此您的页面将减少服务器请求并加快速度。CSS sprites 是相同的想法，也有可用的图像压缩器。以及有关响应式设计的大量信息。

[http://www.speedawarenessmonth.com/15-things-for-making-your-site-faster-for-mobile-users/](http://www.speedawarenessmonth.com/15-things-for-making-your-site-faster-for-mobile-users/)

您可能正在寻找像 Less 或 Sass 这样的工具来简化它：阅读：[http ://coding.smashingmagazine.com/2010/12/06/using-the-less-css-preprocessor-for-smarter-style-sheets /](http://coding.smashingmagazine.com/2010/12/06/using-the-less-css-preprocessor-for-smarter-style-sheets/)

下载：[http ://crunchapp.net/](http://crunchapp.net/)

# magento - 在 Magento 中启用商店信用作为付款选项

> ID：14406715
> 
> 赞同：0
> 
> 时间：2013-01-18T19:59:44.030
> 
> 标签：magento, magento-1.7

我试图弄清楚如何启用商店信用作为 Magento 的付款方式。我已经在下面的链接中设置了设置，但是，商店信用没有显示为付款选项。

编辑： http: [//www.magentocommerce.com/knowledge-base/entry/customer-configuration-store-credit-options](http://www.magentocommerce.com/knowledge-base/entry/customer-configuration-store-credit-options)

任何想法都非常感谢！

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T11:15:41.873

您发布的链接包含有关“Magento Go”的信息。您可能正在使用社区版。商店积分仅在 Magento Go 或 Magento Enterprise Edition 中的 Magento 核心代码中可用。

要在社区版中使用此功能，您必须安装第 3 方扩展。

# html - 有谁知道这个 1 列下拉菜单的代码？我知道它的基本知识，我只是不知道。

> ID：14406719
> 
> 赞同：-15
> 
> 时间：2013-01-18T19:59:56.187
> 
> 标签：html, css

![落下](../Images/68fc6289a7e5e62c183d4a5188f7b359.png)

或在谷歌应用程序上看起来像这样..

![谷歌地图应用](../Images/b2effcd0d5f268426c26e5ca073bdf6b.png)

基本上，您单击菜单按钮，菜单会在单个列中下拉。我不想要 jquery 或 jave 脚本只是基本菜单...我稍后会添加图标。我还将菜单按钮放在标题的顶部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T21:06:37.623

You should try figuring it out out yourself before posting a question here. StackOverflow is about helping with programming questions, not doing programming homework for you. With that said, you're new and this is a pretty simple thing to do, so I decided to post a sliding CSS dropdown that I've made for you. It should be a good place to start.

On a desktop, the dropdown is activated by hovering. On iOS it's activated when you tap once.

[Here's a live preview.](http://jsfiddle.net/Wxs5n/)

# html

```
<ul id="nav">
  <li>
    <a href="#">Home</a>
  </li>
  <li>
    <a href="#">Music</a>
    <ul>
      <li><a href="#">New Tracks</a></li>
      <li><a href="#">Old Tunes</a></li>
      <li><a href="#">Downloads</a></li>
      <li><a href="#">Upcoming</a></li>
    </ul>
    </li>
  <li>
    <a href="#">Images</a>
    <ul>
      <li><a href="#">Gallery</a></li>
      <li><a href="#">Photobooth</a></li>
      <li><a href="#">Share</a></li>
      <li><a href="#">Upload</a></li>
    </ul>
  </li>
  <li>
    <a href="#">Video</a>
    <ul>
      <li><a href="#">Featured</a></li>
      <li><a href="#">Mini Clips</a></li>
      <li><a href="#">Favorites</a></li>
    </ul>
  </li>
  <li>
    <a href="#">Blog</a>
  </li>
  <li>
    <a href="">About</a>
    <ul>
      <li><a href="#">The Team</a></li>
      <li><a href="#">History</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </li>
</ul> 
```

# css

```
 ul { list-style: none; padding: 0; margin: 0;}

  /* Style */

  a {
    color: #000;
    display: block;
    font-size: 14px;
    text-decoration: none;
    font-family: 'Open Sans', serif;
  }
  nav {
    width: 100%;
    height: 45px;
  }
  #nav ul li:hover,
  #nav > li:hover {
    background: #2e98d5;
  }
  #nav ul > li:hover > a,
  #nav > li:hover > a {
    color: #fff;
  }
  #nav > li {
    float: left;
    position: relative;
  }
  #nav > li > a {
    padding: 13px 30px;
    height: 20px;
  }
  /************
  This transition is for iOS :hover doubleclick.
  http://www.nczonline.net/blog/2012/07/05/ios-has-a-hover-problem/
  ************/

  #nav > li:hover ul {
    visibility: visible;
    -webkit-transition-delay: 0s;
    -moz-transition-delay: 0s;
    -o-transition-delay: 0s;
    transition-delay: 0s;
  }
  #nav ul {
    top: 46px;
    width: 170px;
    position: absolute;
    background-color: #eee;
    z-index: 1;
    visibility: hidden;
    -webkit-transition-property: visibility;
    -moz-transition-property: visibility;
    -o-transition-property: visibility;
    transition-property: visibility;

    -webkit-transition-duration: 0s;
    -moz-transition-duration: 0s;
    -o-transition-duration: .0s;
    transition-duration: 0s;

    -webkit-transition-delay: .25s;
    -moz-transition-delay: .25s;
    -o-transition-delay: .25s;
    transition-delay: .25s;
  }

  /* The slide */
  #nav li li a {
    height: 0px;
    padding: 0px 30px;
    opacity: 0;
    -webkit-transition-property: height, padding, opacity;
    -moz-transition-property: height, padding, opacity;
    -o-transition-property: height, padding, opacity;
    transition-property: height, padding, opacity;

    -webkit-transition-duration: .25s, .25s, .08s;
    -moz-transition-duration: .25s, .25s, .08s;
    -o-transition-duration: .25s, .25s, .08s;
    transition-duration: .25s, .25s, .08s;

    -webkit-transition-delay: 0s, 0s, .05s;
    -moz-transition-delay: 0s, 0s, .05s;
    -o-transition-delay: 0s, 0s, .05s;
    transition-delay: 0s, 0s, .05s;
  }
  #nav li:hover li a {
    height: 20px;
    padding: 13px 30px;
    opacity: 1;
  } 
```

# perl - 无法通过包 Email::Sender 定位对象方法“new”

> ID：14406727
> 
> 赞同：0
> 
> 时间：2013-01-18T20:00:43.040
> 
> 标签：perl

在这方面有几个类似的线程，但似乎通常的罪魁祸首是该人忘记安装或`use`相关软件包。在这种情况下似乎并非如此。我仔细检查以确保[`Email::Sender`](https://metacpan.org/module/Email%3a%3aSender)已安装

```
cpan[1]> install Email::Sender
Going to read '/home/ajmills/.cpan/Metadata'
  Database was generated on Fri, 18 Jan 2013 07:07:06 GMT
Email::Sender is up to date (0.120002).

cpan[2]> 
```

我的简单程序：

```
use strict;
use warnings;
use Email::Sender;

my $mailer = Email::Sender->new( {
    mailer => 'SMTP::TLS',
    mailer_args => [
        Host => 'smtp.gmail.com',
        Port => 587,
        User => 'xxx@gmail.com',
        Password => 'xxx',
        Hello => 'xxx.org',
    ]
} ); 
```

然后运行它：

```
:~$ perl email.pl 
Can't locate object method "new" via package "Email::Sender" at email.pl line 5. 
```

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T20:04:38.057

不确定，但文档说要调用 Email::Sender::Transport::SMTP->new。

```
try {
    sendmail(
      $message,
      {
        from => $SMTP_ENVELOPE_FROM_ADDRESS,
        transport => Email::Sender::Transport::SMTP->new({
            host => $SMTP_HOSTNAME,
            port => $SMTP_PORT,
        })
      }
    );
  } catch {
      warn "sending failed: $_";
  }; 
```

[http://metacpan.org/pod/Email::Sender](http://metacpan.org/pod/Email::Sender)

# php - 如何获取当前请求

> ID：14406735
> 
> 赞同：-1
> 
> 时间：2013-01-18T20:01:37.463
> 
> 标签：php, zend-framework2

我尝试构造请求类会得到一个初始请求对象而不是当前请求对象，如何初始化当前请求内容？

```
$request = new \Zend\Http\Request;
echo $request->getUri()->toString(); //is empty 
```

ps 我不想使用 Zend Framework mvc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:35:55.900

如果您希望 Request 自行填充，请使用`\Zend\Http\PhpEnvironment\Request`，否则您将需要手动设置所有值。

# asp.net - 在 web.config 文件中查找根目录

> ID：14406737
> 
> 赞同：0
> 
> 时间：2013-01-18T20:01:44.080
> 
> 标签：asp.net, web-config

我试图找到我的 aspx 应用程序的根目录。该场景是用户试图登录到我的根目录的子文件夹。我希望他们被重定向到另一个文件夹内的登录页面。

我正在尝试在根 web.config 文件中处理此问题，但编译器正在查看用户尝试从中登录的子文件夹内部。

```
<authentication mode="Forms" >
      <forms loginUrl="~/auth/login.aspx" name="loginform">
      </forms>
    </authentication> 
```

是我要访问的目录，但它仍在 app 文件夹内部，而不是根目录。

这是我得到的

```
/Apps/subfolder/auth/login.aspx 
```

这就是我想要的

```
/Apps/auth/login.aspx 
```

请记住 /Apps/ 是根目录。

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:17:34.337

该值被代码中其他地方的值取代。可能是用户在发送登录之前尝试查看的页面所在的子目录中的 web.config。

# c# - 转换键值对 到 int[] 数组和 string[] 数组

> ID：14406738
> 
> 赞同：2
> 
> 时间：2013-01-18T20:01:44.460
> 
> 标签：c#, .net, multidimensional-array, jagged-arrays

```
KeyValuePair<int, string>[][] partitioned = SplitVals(tsRequests.ToArray()); 
```

不要太担心我使用的方法；可以说我得到了一个锯齿状的 KeyValuePairs 数组，它们被平均分成不同的数组。

```
foreach (KeyValuePair<int, string>[] pair in partitioned)
{
    foreach (KeyValuePair<int, string> k in pair)
    {
    }
} 
```

我需要知道如何有效地获取 int 数组中的整数，以及从键值对数组中获取单独字符串数组中的字符串。这样，两个索引在单独的数组中相互匹配。

例如，在我将其拆分为一个 int[] 数组和一个 string[] 数组后，

```
intarray[3] must match stringarray[3] just like it did in the keyvaluepair. 
```

假设我有一个带有 KVP 的锯齿状数组，例如：

```
 [1][]<1,"dog">, <2,"cat">
    [2][]<3,"mouse">,<4,"horse">,<5,"goat">
    [3][]<6,"cow"> 
```

我需要在每次迭代期间变成这个

```
 1\. 1,2 / "dog","cat"
    2\. 3,4,5 / "mouse", "horse", "goat"
    3\. 6 / "cow" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T20:08:04.337

```
int[] keys = partitioned.Select(pairs => pairs.Select(pair => pair.Key).ToArray())
    .ToArray();
string[] values = partitioned.Select(pairs => pairs.Select(pair => pair.Value).ToArray())
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:08:12.697

只是为了让你开始：

```
 var list = new List<KeyValuePair<int, int>>();
    var key = new int[list.Count];
    var values = new int[list.Count];
    for (int i=0; i < list.Count ;i++)
    {
        key[i] = list[i].Key;
        values[i] = list[i].Value;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:06:04.863

```
List<int> keys = new List<int>();
List<string> values = new List<string>();
foreach (KeyValuePair<int, string>[] pair in partitioned)
{
    foreach (KeyValuePair<int, string> k in pair)
    {
        keys.Add(k.Key);
        values.Add(k.Value);
    }
}
keyArray = keys.ToArray();
valueArray = values.ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T20:09:53.827

```
public static void ToArrays<K,V>(this IEnumerable<KeyValuePair<K,V>> pairs, 
    out K[] keys, out V[] values)
{
   var keyList = new List<K>();
   var valueList = new List<V>();
   foreach (KeyValuePair<K,V> pair in pairs)
   {
      keyList.Add(pair.Key);
      valueList.Add(pair.Value);
   }
   keys = keyList.ToArray();
   values = valueList.ToArray();
} 
```

因为您有一个锯齿状数组，所以您还需要将其展平以使用该函数：

```
public static IEnumerable<T> flatten(this T[][] items)
{
   foreach(T[] nested in items)
   {
      foreach(T item in nested)
      {
         yield return item;
      }
   }
} 
```

像这样把它们放在一起：

```
 MyKeyValuePairCollection = GetKeyValuePairJaggedArray();
 int[] keys;
 string[] values;
 MyKeyValuePairCollection.flatten().ToArrays(out keys, out values); 
```

# .htaccess - 编写 .htaccess 文件 301 重定向

> ID：14406748
> 
> 赞同：0
> 
> 时间：2013-01-18T20:02:23.837
> 
> 标签：.htaccess

比较我需要帮助编写我的.htaccess。我尝试了来自网络的多个不同的代码片段，但无济于事。从表面上看，我认为我想做的事情应该很简单。基本上我想 301 将我网站的目录/文件夹重定向到同一网站的主页。下面是我当前的 .htaccess 代码。如你看到的; 我试图这样做，但它不起作用。这是我的网站：[www.comparisim.co.uk](http://www.comparisim.co.uk/)

```
RewriteEngine On

RewriteBase /

   RewriteRule ^sim-only/* http://www.comparisim.co.uk/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:54:21.247

重定向的方法有很多种。这可能是最快的。

```
RedirectMatch 301 (.*/) http://www.comparisim.co.uk/ 
```

但是，我查看了您的网站，唯一被索引的页面是您的主页。我建议创建一个 404 页面。您还可以检查[htaccess redirect](http://www.htaccessredirect.info/)。他们可能有一个例子。

# database - 在sql ce wp7中选择前n

> ID：14406750
> 
> 赞同：0
> 
> 时间：2013-01-18T20:02:28.693
> 
> 标签：database, linq, windows-phone-7, sql-server-ce

我搜索了很多..但我无法在 Windows Phone 7 的 sql compact 版本上找到一个好的链接。

我想替换简单查询“从 xyztable 中选择顶部（n）”

在我的 wp7 中，我写了简单的查询“from o in hdc.messages.Take(22) where o.Msisdn == myMsisdn orderby o.MessageId select o);”

但我没有得到想要的输出..它适用于一些连续的内存。它给了我 19 行，但实际上有 25 行。

那么任何人都可以向我解释这种行为，并替换前 n 个查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:51:41.647

你在这里有一个“操作顺序”问题。这段代码：

```
from o in hdc.messages.Take(22) where o.Msisdn == myMsisdn select o 
```

首先获取 22 条消息，然后*从该子集中*`o.Msisdn == myMsisdn`选择与您的检查匹配的消息。这就解释了为什么你会得到 19 行。相反，您想选择所有位置`o.Msisdn == myMsisdn`，然后从中取 22。像这样的东西：

```
(from o in hdc.messages where o.Msisdn == myMsisdn select o).Take(22); 
```

# java - 如何在不使用 !important 的情况下覆盖 GWT 中的默认样式

> ID：14406751
> 
> 赞同：1
> 
> 时间：2013-01-18T20:02:30.893
> 
> 标签：java, html, css, gwt

GWT 模块带有一些令人讨厌的怪癖，其中之一是偏离了标准字体大小`16px`并声明它是`12px`。我试图为不同的元素和正文本身声明单独的字体大小，但它们总是被默认样式覆盖。

所以我决定使用`!important`来声明整个正文的默认字体大小。这行得通，问题是它也适用于它不应该的地方，比如`h2`元素。`h2`再次声明另一个font-size 属性`!important`并不会覆盖为`body`元素声明的那个，即使它应该。

那么有没有办法做到这一点？字体系列也有同样的问题，我不能不使用`!important`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:25:48.370

如果您需要自定义标准主题，您应该*分叉*它：复制/粘贴并适应您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:05:42.783

通常最好使用[css 特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)来覆盖样式。

只要您的附加规则比您尝试覆盖的规则具有更高的特异性，它就应该起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T07:10:55.880

您必须创建自己的 css 并覆盖standard.css，希望以下链接对您有所帮助

[GWT 主题样式覆盖了我的 css 样式](https://stackoverflow.com/questions/2322779/gwt-theme-style-overrides-my-css-style)

# java - MultipleOutputs vs SideEffectFile

> ID：14406765
> 
> 赞同：2
> 
> 时间：2013-01-18T20:03:26.557
> 
> 标签：java, hadoop, mapreduce

我想知道 MultipleOutputs vs FSDataOutputStream vs Task Side Effect File 用于创建不同输出文件的优势/差异？

一种。使用多个输出：

```
MultipleOutputs mos;

void configure()
{
    mos.new MultipleOutputs(conf);
}

reduce()
{
    mos.getCollector("desired_path", reporter).collect(new Text(key), new Text(val));
} 
```

湾。使用 FSDataOutputream，我们将输出写入文件系统中所需的路径，如下所示：

```
 void configure()
   {
       fs = FileSystem.get(conf);
   }

    void reduce()
   {

       Path op = "/custom_path";
   FSDataOutputStream dst = fs.create(op);
   dst.writeBytes(t+" "+uidi+" "+str_sizeval); 
   } 
```

C。使用任务副作用文件。在这里，我们使用上面的 FSDataOutputStream 将输出写入 FileOutputFormat.getWorkOutputPath() 返回的路径，而不是使用自定义的所需路径。

将所需输出写入输出路径以外的路径的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:55:54.563

a & c 或多或少是相同的东西，并且与 b 相比具有明显的优势，因为它们由输出提交者管理。

将 b 与推测执行结合使用意味着您要么会得到一个错误（两个东西试图写入同一个文件），要么可能会损坏结果。

a & c 没有这个问题，因为它们正在输出到 HDFS 上的临时任务尝试文件夹，当提交任务尝试时，其内容会移动到实际输出文件夹（因此您不会遇到推测执行的问题） .

a 也是比 c 更好的选择，因为它管理文件的唯一性 - 每个文件都用一个额外的任务 ID 命名（例如“desired_pa​​th-r-00000”）。如果你使用 c，并且有两个 reducer 写入相同的失败名称，最后一个提交的任务将覆盖第一个提交的任务的内容，否则你会得到一个错误（我不确定是哪个）。

所以简而言之，a 是最好的选择。

# delphi - Delphi 7 中的 Indy v9 - 当 ContentType 不是 text/plain 时如何提取 TIDMessagePart.Body 的可读文本部分

> ID：14406768
> 
> 赞同：1
> 
> 时间：2013-01-18T20:03:36.470
> 
> 标签：delphi, delphi-7, indy-9

我正在尝试提取类型为 TIDText 的 TIDMessagePart 对象的 Body.Text 属性的可读部分。类似于下面的代码。但是，如果 TIDText 消息部分的 ContentType 不是 text/plain，而是 text/html，这会用所有 HTML 标记填充 sBody。我只想要可读的文本，但看不到在版本 9 库中获取它的方法。我错过了什么吗？

var email: TIDMessage; sBody：字符串；

...

```
for j := 0 to Pred(email.MessageParts.Count) do
begin
if email.MessageParts.Items[j] is TIdText then
begin
    sBody := TIdText(email.MessageParts.Items[j]).Body.Text;
end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:52:47.660

您必须手动解析 HTML 以从中提取所需的纯文本。 `TIdMessage`只是一个数据的电子邮件容器，它不会为您解析正文内容，除了处理字符集转换。您必须自己解析内容。

# c# - 如何在 LinqPad 中转储（） Newtonsoft JObject？

> ID：14406769
> 
> 赞同：25
> 
> 时间：2013-01-18T20:03:40.143
> 
> 标签：c#, json, linqpad, json.net

在 LinqPad 中，尝试调用`.Dump()`Newtonsoft JSON.Net 会`JObject`产生异常：

> RuntimeBinderException：“Newtonsoft.Json.Linq.JObject”不包含“转储”的定义。

这适用于 LinqPad 中的几乎所有其他内容。我想找出一种方法来转储 Newtonsoft `JObject`，就像其他对象一样，显示属性名称、值等。

我已经想出了如何让它转储 JSON 字符串，但我希望看到一个对象得到输出，而不仅仅是一个文本字符串。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-03-16T13:34:48.710

对于任何想要从 JSON 字符串获得漂亮的 LINQPad 输出的人来说，反序列`ExpandoObject`化是一种有效的方法，并且可以递归地处理数据中可能存在的任何层次结构：

`JsonConvert.DeserializeObject<ExpandoObject>(myJSONString).Dump();`

将其扩展为涵盖实际问题，JObject 上的扩展方法可以解决问题：

```
public static class ExtMethods
{
    public static JObject DumpPretty(this JObject jo)
    {
        var jsonString = JsonConvert.SerializeObject(jo);
        JsonConvert.DeserializeObject<ExpandoObject>(jsonString).Dump();

        return jo;  // return input in the spirit of LINQPad's Dump() method.
    }
} 
```

不是最有效的方法，但为了在 LINQPad 中挖掘时快速使用，它可以解决问题。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-18T20:07:51.523

它是一个静态扩展方法，因此您可以将其称为静态方法：

```
LINQPad.Extensions.Dump(jObject); 
```

当（我认为）编译器由于某种原因无法绑定到扩展时，我看到某些类型会发生这种情况。

在 LinqPad 的网站上有一篇文章和一篇[关于](http://linqpad.uservoice.com/forums/18302-linqpad-feature-suggestions/suggestions/1126079-can-dump-work-on-dynamic-objects-)[使用](http://www.h3mm3.com/2011/03/how-to-dump-expandoobject-in-linqpad.html)对象`Dump()`的`dynamic`博客文章。

您可以尝试创建另一个 Dump() 扩展来检查属性`JObject`并创建一个*可以*`Dump`漂亮地编辑的 Dictionary。

像这样的东西：（完整的 WAG 基于 JObject 的定义）：

```
var values = jObject.Properties.ToDictionary(p=>p.Name, p=>p.Value);
values.Dump(); 
```

当然，您可以为嵌套对象添加递归等：

```
//Usage: GetProperties(jObject).Dump();
public static object GetProperties(object o)
{
    JObject j = o as JObject;
    if(j == null)
    {
        return o.ToString();
    }
    return j.Properties().ToDictionary(p=>p.Name,p=>GetProperties(p.Value));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-18T20:07:21.197

我的猜测是你正在做这样的事情：

```
dynamic foo = ...;
foo.Dump(); 
```

扩展方法（即`Dump`）不适用于动态类型。如果您使用：

```
object foo = ...;
foo.Dump(); 
```

那么我希望它会“工作”正常。不过，它可能无法满足您的实际需求 - 因为属性`JObject`不是动态提供的 JSON 属性。

（根据 D Stanley 的回答明确调用扩展方法也可以，但您可能会发现仍然将其作为扩展方法更方便。）

编辑：我强烈怀疑它`Dump`根本*不会*给你你想要的东西，因为它对 Json.NET 一无所知，并且可能不会以（比如说）调试器的方式处理动态对象。您可能最好编写自己的`Dump`方法来迭代 的属性`JObject`并递归地转储它们。如果您仍然希望找到开箱即用的东西，您可能应该查看[Json.NET 文档](http://james.newtonking.com/projects/json/help/)而不是查看 LINQPad，尽管我不知道您是否会找到任何东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-15T20:45:26.987

# 更新

最新版本的 LINQPad 会自动格式化 JSON.NET 对象`JObject`（类似于已接受答案中的 ExpandoObject）。

[![LINQPad 截图](../Images/3dc62d040553e20b5ffbade24c0e282c.png)](https://i.stack.imgur.com/z26eu.png)

# 原始答案

有一个专门为此目的编写[的可视化工具。](https://github.com/NMyVision/NMyVision.LinqPad.JsonVisualizer)

包括`NMyVision.LinqPad.JsonVisualizer`NuGet 包和调用`JsonVisualizer.DumpJson(jObject)`，将出现一个带有漂亮小树视图的选项卡。

[![JsonVisualizer 输出](../Images/ca5b8e9c2eda3a0662520e741186adc1.png)](https://i.stack.imgur.com/6Opdc.gif)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-18T21:43:49.870

这似乎很好地解决了这个问题：

```
dynamic dyn = ... // parse some JSON or whatever
((JObject)dyn).Properties().ToDictionary(p=>p.Name, p=>p.Value).Dump(); 
```

如果你有一个列表，这有效：

```
dynamic[] dyns = ...
dyns.Cast<JObject>().Select(o => o.Properties().ToDictionary(p => p.Name, p => p.Value)).Dump(); 
```

此外，如果您有 linqpad 程序，这也很方便：

```
static class JsonNetDumper {
  public static IEnumerable<IDictionary<string, object>> ToDumpable(this IEnumerable<object> rg) { 
    return rg.Cast<JObject>().Select(o => o.Properties().ToDictionary(p => p.Name, p => (object)p.Value));
  }
} 
```

您可以像这样使用它：

```
dynamic[] dyns = ...
dyns.ToDumpable().Dump(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-27T16:05:58.927

扩展[rdavisau 的想法](https://stackoverflow.com/a/22437520/859211)，我想出了这个：

```
public static class ExtMethods
{
    public static object Dumpable(this JToken t)
    {
        if(t is JObject)
        {
            var json = JsonConvert.SerializeObject(t);
            return JsonConvert.DeserializeObject<ExpandoObject>(json);
        }
        else if(t is JArray)
        {
            return (t as JArray).Select(Dumpable);
        }
        else if(t is JValue)
        {
            return t.ToString();
        }
        else if(t is JProperty)
        {
            var p = (t as JProperty);
            return new { Name=p.Name, Value=Dumpable(p.Value) };
        }
        else
        {
            throw new Exception("unexpected type: " + t.GetType().ToString());
        }
    }

    public static JToken DumpPretty(this JToken t)
    {
        t.Dumpable().Dump();
        return t;
    }
}

public static object Dumpable(JToken t)
{
    return t.Dumpable();
} 
```

这样，您还可以漂亮地打印不是 JObjects 的查询的数组和结果。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-25T17:24:38.083

`JObject`没有真正的属性，它是一堆`JArray`垃圾`JProperty`。[您可以按照先前答案](https://stackoverflow.com/a/14406840/1037948)的建议直接使用扩展方法，也可以将动态转换为`object`并转储。但是你最好将它转换回它的 JSON 表示`.ToString()`并转储它。

```
var data = JsonConvert.DeserializeObject(@"{...}");
LINQPad.Extensions.Dump(data); // gives JObject, JArray, etc
((object)data).Dump(); // gives JObject, JArray, etc
((string)data.ToString()).Dump(); // given the JSON string back again 
```

* * *

有点相关，我确实遇到了一个[`.DumpJson`方法](http://geekswithblogs.net/EltonStoneman/archive/2012/05/11/extension-method-for-outputting-formatted-json-in-linqpad.aspx)，它在转储时将普通对象*转换为*json。我提到它主要是因为它描述了如何编写自定义`Dump`扩展。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-14T15:07:02.503

使用 LINQPad 的新[`ToDump`](https://www.linqpad.net/CustomizingDump.aspx)功能，您可以直接`.Dump()`使用 Newtonsoft JSON.Net `JObject`。

将此代码段添加到 LINQPad 的`My Extensions`查询中

```
static Object ToDump(Object input)
{
    var json = input as JObject;
    if (json != null)
        return json.ToObject<ExpandoObject>();
    return input;
} 
```

您还需要添加对`Netwonsoft.Json`与主查询相同的引用

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-07-17T05:38:45.810

我今天刚刚用 JObject 尝试了这个，通过 Nuget 添加了 JSON.NET 库，我从 data.Dump() 中获取结构化数据（并且没有错误），其中数据是 JObject。

![在此处输入图像描述](../Images/a5e920a9592e7dcfc29e88af13f051d9.png)

# android - 我的应用程序不断崩溃

> ID：14406774
> 
> 赞同：0
> 
> 时间：2013-01-18T20:04:09.840
> 
> 标签：android

我正在使用 Eclipse。我的应用程序从 android 的列表视图中选择一个值，并且必须在另一个活动中显示该值，但它没有发生。

当我单击列表时，我得到错误活动已停止工作

我在所有应用程序中都遇到这样的错误

我根据本教程制作了另一个应用程序

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

我的代码包含两个活动：

MainActivity.java

```
package event.scheduler;
import android.os.Bundle;    
import android.util.Log;    
import android.view.View;    
import android.app.ListActivity;    
import android.content.Intent;    
import android.widget.ArrayAdapter;    
//import android.widget.Toast;    
import android.widget.ListView;    
public class MainActivity extends ListActivity {
public final static String EXTRA_MESSAGE = "event.scheduler.MESSAGE";

@Override
    protected void onCreate(Bundle savedInstanceState) {
    try
    {
    super.onCreate(savedInstanceState);
    String[] values = new String[]{"Conatus","Horizon","Orja","Phoniex"};
    ArrayAdapter <String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,values);
    setListAdapter(adapter);
}
    catch(RuntimeException e){
        Log.i("sdv","dsvg");
        }
    }           

@Override   
protected void onListItemClick(ListView l, View v, int position, long id) {
     try
        {

    String item = (String)getListAdapter().getItem(position);
   Intent intent = new Intent(this,Display.class);
   intent.putExtra(EXTRA_MESSAGE,item);
   startActivity(intent);
   }

catch(RuntimeException e)
{
    Log.i("log","view");
}
}          // Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show(); 

} 
```

显示.java

```
 package event.scheduler;

     import android.os.Bundle;
     import android.app.Activity;
     import android.app.ListActivity;
     import android.content.Intent;
     import android.util.Log;

     import android.widget.TextView;

     public class Display extends Activity {

TextView textview;
@Override
protected void onCreate(Bundle savedInstanceState) {
    //try
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display);
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    textview= (TextView)findViewById(R.id.your_texbox);
    textview.setTextSize(40);
    textview.setText(message);

    setContentView(textview);

    }
    //catch(RuntimeException e)
    {
    //  Log.i("sfs", "message");
        }
    } 
```

}

我的 xml 文件是

活动显示.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Display" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" /> 
```

activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ListView
    android:id="@+id/mylist"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    >
</ListView> 
```

我的清单文件是

```
 <?xml version="1.0" encoding="utf-8"?>
               <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="event.scheduler"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="event.scheduler.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="event.scheduler.Display"
        android:label="@string/title_activity_display" >
    </activity>
</application> 
```

我的日志猫是

```
01-20 14:49:01.171: D/AndroidRuntime(1278): Shutting down VM
01-20 14:49:01.181: W/dalvikvm(1278): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-20 14:49:01.301: E/AndroidRuntime(1278): FATAL EXCEPTION: main
01-20 14:49:01.301: E/AndroidRuntime(1278): java.lang.RuntimeException: Unable to start activity ComponentInfo{event.scheduler/event.scheduler.Display}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.os.Looper.loop(Looper.java:137)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at java.lang.reflect.Method.invokeNative(Native Method)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at java.lang.reflect.Method.invoke(Method.java:511)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at dalvik.system.NativeStart.main(Native Method)
01-20 14:49:01.301: E/AndroidRuntime(1278): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.view.ViewGroup.addViewInner(ViewGroup.java:3339)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.view.ViewGroup.addView(ViewGroup.java:3210)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.view.ViewGroup.addView(ViewGroup.java:3186)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:289)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:279)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.app.Activity.setContentView(Activity.java:1901)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at event.scheduler.Display.onCreate(Display.java:26)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.app.Activity.performCreate(Activity.java:5104)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-20 14:49:01.301: E/AndroidRuntime(1278):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-20 14:49:01.301: E/AndroidRuntime(1278):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:07:07.810

如日志：

> 您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView

`android:id="@android:id/list"`如果要扩展 ListActivity ，请将ListView id 更改为

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    >
</ListView> 
```

# javascript - 导航（突出显示）表格中的指定行

> ID：14406777
> 
> 赞同：1
> 
> 时间：2013-01-18T20:04:20.397
> 
> 标签：javascript, dom

我怎样才能开始创建一个特定的函数或构建到下面的现有代码，这将允许我转到（突出显示）表中的特定行。请注意，表头应始终是例外的，因此，在表头之后从“0”开始行计数。

IE。`function goToRow('3')`

这个函数将突出显示第 3 行

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#mstrTable {
     border: 1px solid black
}
#mstrTable td, th {
     border: 1px solid black
}

#mstrTable tr.normal td {
    color: black;
    background-color: white;
}
#mstrTable tr.highlighted td {
    color: white;
    background-color: gray;
}
</style>
</head>
<body>
  <table id="mstrTable">
     <thead>
      <tr>
        <th>File Number</th>
        <th>Date1</th>
        <th>Date2</th>
        <th>Status</th>
        <th>Num.</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>KABC</td>
        <td>09/12/2002</td>
        <td>09/12/2002</td>
        <td>Submitted</td>
        <td>0</td>

      </tr>
      <tr>
        <td>KCBS</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Approved</td>
        <td>1&nbsp;</td>
      </tr>

      <tr>
        <td>WFLA</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Submitted</td>
        <td>2</td>
      </tr>
      <tr>
        <td>WTSP</td>
        <td>09/15/2002</td>
        <td>09/15/2002</td>
        <td>In-Progress</td>
        <td>3</td>
      </tr>
    </tbody>
  </table>

<script type="text/javascript">

var table = document.getElementById("mstrTable");
var thead = table.getElementsByTagName("thead")[0];
var tbody = table.getElementsByTagName("tbody")[0];

tbody.onclick = function (e) {
   e = e || window.event;
   var td = e.target || e.srcElement; //assumes there are no other elements inside the td
   var row = td.parentNode;
    alert('Row is ' + (row.rowIndex - 1))
   if (this.lst&&this.lst!=row){
    this.lst.className='';
   }
   row.className = row.className==="highlighted" ? "" : "highlighted";
   this.lst=row;
}

thead.onclick = function (e) {
   e = e || window.event;
   var th = e.target || e.srcElement;  //assumes there are no other elements in the th
   alert(th.innerHTML);
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:24:42.710

[这](http://goo.gl/GUsZZ)是一个小例子，说明如何使用 jQuery 实现它。

# jquery - 如何在 DOM 加载后使用 jQuery 来防止表单上的默认行为？

> ID：14406779
> 
> 赞同：1
> 
> 时间：2013-01-18T20:04:21.647
> 
> 标签：jquery, html, forms

我正在使用 jQuery 加载表单：

```
<script type='text/javascript'>
    $(document).ready(function() {
            $('button').click(function(){
                $url="/quiz/" + $(this).attr('id');
                $.ajax({
                    url:$url,
                    success:function(data){
                        $('button').fadeOut('slow',function(){
                            $('.center').html(data).hide().fadeIn(600);
                        });

                    }
                });
            });

$(document).on('submit','form-inline', function(event){
        alert("Attempt");
        event.preventDefualt();
    });

</script> 
```

使用标记：

```
<form class="form-inline">
  <input type="text" class="input-xlarge" placeholder="Quiz Name">
  <button id="quiz-name" type="submit" class="btn btn-large">Next >></button>
</form> 
```

表单加载后，我想阻止表单提交。但我很难模仿这种行为。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T20:06:14.380

```
$(document).on('submit','form-inline', function(event){ 
```

应该指向一个类：

```
$(document).on('submit','.form-inline', function(event){ 
```

另外，你拼错了`.preventDefault`。

# silverlight - Silverlight 和内存

> ID：14406786
> 
> 赞同：2
> 
> 时间：2013-01-18T20:04:47.613
> 
> 标签：silverlight, memory

我们有一个存在内存问题的企业 Silverlight 应用程序（Silverlight 版本 5.1.10411.0）。

当 silverlight 应用程序在快速计算机（intel I7 和 >4 GB 内存）上运行时，内存使用量在 500 ~ 800mb 之间，但是当它在速度较慢的计算机（intel I5 或 I3 和 <4GB 内存）上运行时，似乎永远不会调用 GC并且内存使用量不断增加，直到系统崩溃。

我试图手动调用 GC，但它在速度较慢的计算机上不起作用。

我用 8 台不同的计算机进行了测试，但结果是相同的。

如果所有计算机的内存使用行为都相同，我可能会怀疑内存泄漏，但为什么它只发生在速度较慢的计算机上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:29:18.450

您是否使用 ClientHttp 并将 AllowWriteStreamBuffering 设置为 false？此功能存在大量错误，包括导致不受控制的内存泄漏（至少在 Mac 上）。否则，它可能是您的代码中的错误。在 C# 中很容易发生内存泄漏。只是不要释放引用（并且有许多涉及事件处理程序和其他事物的不可见引用的棘手案例）。GC 无能为力。但是，这并不能解释行为上的差异。

# web-config - 自定义错误关闭的 Dnn 错误仍未显示错误

> ID：14406789
> 
> 赞同：0
> 
> 时间：2013-01-18T20:04:50.750
> 
> 标签：web-config, dotnetnuke, custom-errors

**背景**：

我已经设置了一个 DNN 7.0 测试环境并构建了几个自定义模块。在我的第三个自定义模块上，我使用 Chris Hammond 的模板完成了设置，并按照模板提供的说明进行操作（我对之前的模块也这样做了，没有问题）。安装模块后，我的网站将无法运行。我在每一页上得到的只是 DotNetNuke 错误，没有其他信息。

**问题：**

显然我的模块安装出了点问题，但我完全无助于找出是什么。我得到的只是 DNN 提供的非描述性错误消息。我已将修改后的 Web 配置设置为以下内容：

```
<customErrors mode="Off" /> 
```

但我仍然收到一般的“DotNetNuke 错误”消息。我需要查看堆栈跟踪和任何其他信息以查看我的错误产生的位置。有没有另一种方法可以用 DNN 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:14:42.223

作为替代方案，我刚刚对 EventLog 表运行 SQL 命令。您可以从那里获取有关错误消息的整理信息，并且可以在 LogProperties 字段中找到堆栈跟踪和其他信息。

看来我的模块创建了[此处](http://www.dotnetnuke.com/Resources/Forums/forumid/111/threadid/317776/scope/posts.aspx)发现的臭名昭著的“DotNetNuke.UI.Skins.Skin.GetSkin(Me)”错误。不幸的是，我的情况似乎有所不同，因为唯一推荐的解决方案对我不起作用。看起来是时候进行另一次 DNN 擦除了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:16:36.560

检查 Desktopmodules 文件夹或其中是否有一个奇怪的虚拟目录。

我在测试中遇到了一些问题，IIS 会将其转换为虚拟目录并导致问题，但我无法随意重现。

另外，查看最新版本的 DNN7 模板

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T00:27:42.410

自从我开始使用新的 DNN 7 模板以来，我就遇到了同样的问题，这与我调试模块的方式有关。

以下解决了该问题：

*   删除桌面模块下的虚拟目录
*   重新启动 IIS

# php - 从 POST 中仅选择文本输入名称

> ID：14406791
> 
> 赞同：0
> 
> 时间：2013-01-18T20:04:51.697
> 
> 标签：php, html

> **可能重复：**
> [从 $_POST 表单数据 PHP 中删除提交按钮值](https://stackoverflow.com/questions/10784460/remove-submit-button-value-from-post-form-data-php)

我想回显文本输入的名称，但这也回显了提交输入名称，我该如何更改它以便只选择其中 type="text" 的输​​入？

```
<?php
      if(isset($_POST['submit'])){

       foreach( $_POST as $value){
       echo $value;
    } 
  }
?>
 <form action="ajax.html" method="POST">
    <input type="text" name="a">
    <input type="text" name="b">
    <input type="text" name="c">
    <input type="submit" name="submit">
 </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:08:37.617

POST 不知道数据是如何收集的。你可以这样做的唯一方法是这样的：

```
<?php
if (isset($_POST['submit']))
{
    foreach ($_POST as $key => $value)
    {
        if ($key != 'submit')
        {
            echo $value;
        }
    }
}
?>
<form action="ajax.html" method="POST">
    <input type="text" name="a">
    <input type="text" name="b">
    <input type="text" name="c">
    <input type="submit" name="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T20:08:21.710

只需省略提交按钮上的名称属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T20:09:02.810

您可以在 foreach 循环中包含 if 语句：

```
foreach($_POST as $value) {
    if ($value == "submit") {
        continue;
    }
    echo $value;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T20:14:47.873

```
foreach ($_POST as $name => $value)
{
    if ($name != "submit")
        echo $value."<br/>";
} 
```

# file - Love2d-尝试索引字段“文件系统”（零值）

> ID：14406792
> 
> 赞同：0
> 
> 时间：2013-01-18T20:05:03.313
> 
> 标签：file, indexing, lua, null

每当我尝试打开我的程序时，我都会收到错误消息。尝试索引字段“文件系统”（零值）有谁知道可能导致此问题的原因？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:00:17.220

确保您没有从 conf.lua 文件中排除该模块。如果是，请启用该模块或使用`include "love.filesystem"`

确保使用 love.filesystem，love2d 没有定义`filesystem`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:20:57.447

Love2d 没有`filesystem`我知道的全局对象。你想要`love.filesystem`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T14:18:06.763

确保您没有从 conf.lua 中排除任何相关模块。我对love.audio也有同样的问题。原来我在conf.lua中排除了love.sound！¬_¬ 让我头疼不已。

卧槽！

编辑：另外，请检查您是否使用过时版本的 Love2D 中的不正确语法。可以在[这里](https://love2d.org/wiki/love.filesystem "这里")检查。

# backbone.js - 在 IE8/9 中使用 Backbone 发出 CORS 请求

> ID：14406793
> 
> 赞同：2
> 
> 时间：2013-01-18T20:05:05.880
> 
> 标签：backbone.js, asp.net-web-api, cors

我正在编写一个将在 app.ourdomain.com/store 上运行的主干应用程序。

我想使用我们 API 中已经内置的 HTTP 身份验证访问 api.ourdomain.com/ourApi 上的数据。

现在，据我了解，`Access-Control-Allow-Origin: *`响应中需要一个 CORS 标头 ，以允许这种跨域支持。

但是，这在 IE8/9 中不起作用。我已经阅读了 SO 和其他地方，我可以简单地添加`$.support.cors = true;`，这将神奇地开始在 IE8/9 上工作。

在我深入这个项目之前，我希望有实践经验的人可以回答这个问题：

如果我们编写我们的 API 来处理飞行前的 OPTIONS 请求，允许跨域请求，将这个覆盖添加到`$.support`对象中，那么我们将获得对所有 HTTP 动词（包括 PUT/DELETE）的完全访问权限，以及身份验证的能力，并在 IE8/9 中包含自定义标头（就像我们在所有使用 XMLHttpRequest 的现代浏览器中所做的那样）？

[本文](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)`XDomainRequest`描述了IE8/9 用于此类请求的对象的限制/限制。我特别关心#3 & #5 哪个状态：

```
#3: No custom headers may be added to the request 
```

我们使用自定义标头来指示发出请求的 CustomerID

```
#5: No authentication or cookies will be sent with the request 
```

我们在初始请求中使用 HTTP 身份验证对用户进行身份验证，并在后续请求中使用原始请求期间返回的 access_token。

由于现在强制要求 IE8/9 支持，这是否意味着我不能使用 Backbone 向我们系统上的不同子域请求数据，而不做一些愚蠢的事情，比如在 subdomainA 上创建代理 API 来访问 subdomainB 上的数据？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:47:33.530

你的评估听起来是正确的。不幸的是，在 IE8/9 中使用 CORS 时，没有针对自定义标头、附加方法或 cookie 的解决方法（IE10 应该完全支持这些）。

代理服务器是一种选择。另一种选择是在远程域上托管一个 html 页面，将此 HTML 页面包含在调用页面的 iframe 中，然后用于`window.postMessage`在 iframe 和调用页面之间进行对话。由于 iframed 页面与 API 在同一个域中，因此它可以使用 XHR 发出同源请求，然后使用`window.postMessage`.

这种“iframe 代理”机制仍然需要对 subdomainB 进行一些黑客攻击，特别是托管 iframe 页面。然而它可能仍然比一个成熟的代理服务器更好，因为它是一个纯 HTML/JavaScript 的解决方案。请注意，IE8/9 仍然有一些[限制](http://caniuse.com/#search=postMessage)`postMessage`（尽管它们似乎不影响 iframe）。您可以在此处找到此“iframe 代理”机制的描述：

*   [http://softwareas.com/cross-domain-communication-with-iframes](http://softwareas.com/cross-domain-communication-with-iframes)
*   [http://ternarylabs.com/2011/03/27/secure-cross-domain-iframe-communication/](http://ternarylabs.com/2011/03/27/secure-cross-domain-iframe-communication/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T16:59:24.523

看起来这个问题已经回答了，但是遇到了它，我想我会为将来遇到这个问题的人添加这个。

总之，我遇到了这个确切的问题，并编写了一个库来替代 Backbone 的同步，它使用 XDomainRequest 对象在 IE7/8/9 中启用 CORS。

[https://github.com/victorquinn/Backbone.CrossDomain](https://github.com/victorquinn/Backbone.CrossDomain)

有了这个，你应该能够在 Backbone.js 之后包含它，进行跨域请求，来自 IE 的请求应该可以正常工作，而无需修改任何其余代码。

# java - 验证父的特定抽象构造函数被调用

> ID：14406797
> 
> 赞同：0
> 
> 时间：2013-01-18T20:05:14.350
> 
> 标签：java, junit, abstract-class, verification, jmockit

在代码库中，我具有以下结构：

```
abstract class Bar{

    public Bar(){
        ....
    }

    ....        

    public Bar(int x, int y){

    }

    ....
} 
```

`Bar`然后由 扩展`Foo`。

```
abstract class Foo extends Bar{

    public Foo(){
      super();

        ....
    }

    public Foo(int x){
      super(x,0);  // call parent's specific constructor
      ....
    }

    ....
} 
```

我尝试了以下无法编译的 jUnit 测试用例：

```
class FooTest{

    Foo _foo;

    @Test
    void testFooConstructor(){
        new Expectations(){
            Bar bar;
            {
                bar = new Bar(anyInt,0); // error, obviously Bar cannot be instantiated.
            }
        }

        _foo = new Foo(anyInt){ // empty implementation
            //Override any abstract methods
        }
    }

} 
```

我写了上面的方法，因为我看到了[这个 SO question](https://stackoverflow.com/questions/8060735/jmockit-how-to-expect-constructor-calls-to-mocked-objects)，但是抽象类可能没有被启动，因此它失败了。

此外，我还尝试过：

```
class FooTest{

    Foo _foo;

    @Test
    void testFooConstructor(){

        _foo = new Foo(anyInt){ // empty implementation
            //Override any abstract methods
        }

        new Expectations(){
            Bar bar;
            {
                invoke(bar,"Bar",anyInt,0); //Invocations.invoke
            }
        }

        invoke(_foo,"Foo",anyInt);
    }

} 
```

但是，我的测试结果是：

> java.lang.IllegalArgumentException：找不到兼容的方法：bar(int,int) at unit.src.com.test.FooTest$1.（行号）

我怎样才能达到预期的效果？有没有办法实现这个测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:10:26.247

子类必须始终调用超级构造函数，无论是隐式的（这也意味着，调用

```
super() 
```

在您的构造函数中是多余的）或显式（带参数）。如果您想对此进行测试，请测试可观察到的行为，即您可以测试的超级构造函数的调用会做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:19:48.810

这是一个不寻常的测试场景，但可以使用 JMockit 和`@Mock`抽象基类中的构造函数方法来完成：

```
public class FooTest
{
    @Test
    void verifyCallToSuperConstructor()
    {
        new MockUp<Bar>() {
            @Mock(invocations = 1) // verifies one call will occur
            void $init(int x, int y)
            {
                assertEquals(0, y);
            }
        };

        new Foo(123);
    }
} 
```

# android - 将操作栏夏洛克设置为底部

> ID：14406803
> 
> 赞同：-1
> 
> 时间：2013-01-18T20:05:55.020
> 
> 标签：android

我使用phonegap在android中创建了本机标签栏，但我无法移动到底部。

我想要我的问题的解决方案：

如何使用phonegap在android中将actionbarsherlock标签栏设置为底部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T21:27:15.850

> 如何使用phonegap在android中将actionbarsherlock标签栏设置为底部？

AFAIK，ActionBarSherlock 不支持此功能，更不用说您使用的任何插件了。它也违反了[Android 设计准则](http://developer.android.com/design/patterns/pure-android.html)。

# xml - 将类路径中的 XSL 文件传递 给 XSLT Transformer

> ID：14406804
> 
> 赞同：0
> 
> 时间：2013-01-18T20:05:58.530
> 
> 标签：xml, eclipse, xslt, classpath, mule

我正在尝试将位于类路径中的 XSL 文件传递​​给我的流程中的 Mule XSL-T 转换器。位它给了我错误。

```
<mule-xml:xslt-transformer
maxIdleTransformers="2" maxActiveTransformers="5"
xsl-file="classpath:xslt/Person_Extractor.xsl">
</mule-xml:xslt-transformer> 
```

下面给出的是当我尝试运行此应用程序时 Eclipse 控制台中显示的错误。

```
********************************************************************************

2013-01-18 15:00:00,596 ERROR [main] mule.MuleServer (MuleServer.java:474) - 
********************************************************************************
* A Fatal error has occurred while the server was running:                     *
* Unable to load resource classpath:xslt/Person_Extractor.xsl                  *
* (java.io.IOException)                                                        *
*                                                                              *
* The error is fatal, the system will shutdown                                 *
******************************************************************************** 
```

我尝试了所有不同的组合，比如

```
classpath:/xslt/Person_Extractor.xsl
classpath:\xslt\Person_Extractor.xsl 
```

但没有运气。

当我给出文件的完整物理路径时，它工作正常。

```
<mule-xml:xslt-transformer
maxIdleTransformers="2" maxActiveTransformers="5"
xsl-file="c:\EWS\MyMuleProj\src\main\resources\xslt\Person_Extractor.xsl">
</mule-xml:xslt-transformer> 
```

请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:10:35.747

文档说 xsl-file “可以是本地文件系统或类路径上的路径”，所以你试过没有`classpath:`, ie`xsl-file="xslt/Person_Extractor.xsl"`吗？

# css - 子 div 100% 高度拉伸父 div

> ID：14406812
> 
> 赞同：4
> 
> 时间：2013-01-18T20:06:32.427
> 
> 标签：css, html

我有一个非常简单的场景

父 Div（未指定高度）

子 div 有一些内容和高度设置为 100%。

现在这个子 div 强制它的父级拉伸到完整的浏览器窗口。

请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:09:35.200

在两者上设置位置。

```
#ParentDiv {
    position:relative;
    height:auto;
}

#ChildDiv {
    position:absolute;
    /* top/left/right force it to dimensions of parent, if needed */
    top:0;
    left:0;
    right:0;
    height:100%;
} 
```

父母将伸展以适应孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T04:28:44.323

```
#ParentDiv {
    position:relative;
    height:auto;
}
#ChildDiv {
    position:absolute;
    /* top/left/right force it to dimensions of parent, if needed */
    top:0;
    left:0;
    right:0;
    height:100%;
} 
```

您的 ParentDiv 高度是 AUTO ，因此孩子强制 Parent DIV 扩展到浏览器高度的 100%。从 Parenet DIV 中删除 auto。您的问题将得到解决。

# sql-server - 在 VB.NET 中使用 SQLXML

> ID：14406816
> 
> 赞同：-1
> 
> 时间：2013-01-18T20:06:48.287
> 
> 标签：sql-server, xml, vb.net, ado.net, sqlxml

我是 .NET 编程和 Visual Basic 的新手，我对此一无所知。我有下一个代码：

```
Public Class Form1
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

        Dim cnn As New SqlConnection("Server=adserver;uid=sa;pwd=1234;dat abase=empatic")
        Dim da As New SqlDataAdapter("select * from producte for xml path('producte'),     root('Productes')", cnn)
        Dim ds As New DataSet        
        da.Fill(ds)

        DataGridView1.DataSource = ds.Tables(0)
        Dim a As String = ds.Tables(0).ToString

    End Sub
End Class 
```

此代码的作用是连接到 SQL Server 并执行查询。此查询在 GridViewer 的单个 XML 行中生成。我的问题是：如何在 VB 中获取信息，向我展示 xml 形状而不是单行。

所有这一切的最终目的是VB连接到SQL Server并单击一个按钮程序向我显示我使用查询生成的xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:34:03.947

要以可导航的树格式查看 XML，您应该使用[TreeView 控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aspx)。为了设置数据源，您还需要将 XML 放入[TreeNodes](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.aspx)的集合中。下面是我如何做到这一点，通过制作[一个 XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)，然后使用转换函数来制作 TreeNode：

使用[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)将查询的输出选择到字符串变量中，然后您可以像这样填充 TreeView：

```
Try
  Dim xsd As XmlDocument = New XmlDocument()
  xsd.LoadXml(myXmlString)
  ConvertXmlNodeToTreeNode(xsd.FirstChild, myTreeView.Nodes)
  myTreeView.Nodes(0).ExpandAll() 'expand the root
Catch ex As Exception
  Throw New Exception("Failed to create XmlDocument", ex)
End Try 
```

转换功能：

```
Private Sub ConvertXmlNodeToTreeNode(ByVal xmlNode As XmlNode, ByVal treeNodes As TreeNodeCollection)
  Dim newTreeNode As TreeNode = treeNodes.Add(xmlNode.Name)

  Select Case xmlNode.NodeType
    Case XmlNodeType.ProcessingInstruction, XmlNodeType.XmlDeclaration
      newTreeNode.Text = "<?" + xmlNode.Name + " " +
      xmlNode.Value + "?>"
    Case XmlNodeType.Element
      newTreeNode.Text = "<" + xmlNode.Name + ">"
    Case XmlNodeType.Attribute
      newTreeNode.Text = "ATTRIBUTE: " + xmlNode.Name
    Case XmlNodeType.Text, XmlNodeType.CDATA
      newTreeNode.Text = xmlNode.Value
    Case XmlNodeType.Comment
      newTreeNode.Text = "<!--" + xmlNode.Value + "-->"
  End Select

  If Not IsNothing(xmlNode.Attributes) Then
    For Each attrib As XmlAttribute In xmlNode.Attributes
      ConvertXmlNodeToTreeNode(attrib, newTreeNode.Nodes)
    Next
  End If
  For Each childNode As XmlNode In xmlNode.ChildNodes
    ConvertXmlNodeToTreeNode(childNode, newTreeNode.Nodes)
  Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:22:18.290

您想要 XML 格式的数据吗？如果没有，只需`for xml path...`从 SQL 语句中删除 。例如，您可以这样做：

```
Dim da As New SqlDataAdapter("select * from producte", cnn) 
```

如果您确实希望它为 XML，那么您可以使用几种不同的选项来解析 XML。以下是最常见的选项：

*   [XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)
*   [xml文档](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)
*   [XmlTextReader](http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.aspx)
*   [XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

# java - Apache 丢失了实际的请求 URI

> ID：14406817
> 
> 赞同：0
> 
> 时间：2013-01-18T20:06:50.510
> 
> 标签：java, apache, tomcat6

我在tomcat之上配置了apche。

当我使用 apache mod_rewrite(proxy) 转发请求并将重写的请求转发到 tomcat 时，如何在 java 代码中转发请求之前获取实际的请求 URI？

例如：

实际网址：

[http://www.abc.com/xyz/pqr.shtml](http://www.abc.com/xyz/pqr.shtml)

使用 apache 重写网址：

RewriteCond %{HTTP_HOST} ^(.*).abc.com$ [NC]

RewriteRule ^/(. *)/(.* ).shtml$ /article/index.dot?reqURI=%{REQUEST_URI} [NC,P,L,QSA]

上面的请求是转发到 tomcat 的。

现在我如何在 Java 代码中获取“/xyz/pqr.shtml”，这是实际的请求 uri？

# windows - HeapCreate 和 HeapAlloc 混淆

> ID：14406818
> 
> 赞同：1
> 
> 时间：2013-01-18T20:06:51.090
> 
> 标签：windows, heap-memory, heapalloc

我正在做一个关于动态内存管理的项目。我对 HeapCreate 和 HeapAlloc 函数感到困惑。

对于 HeapCreate() 函数，我们可以创建一个堆，该函数将返回一个 HANDLE。我们可以初始化堆的大小。

假设 winHandle = HeapCreate(0, 2 * 1024, 0);

然后，我可以通过 HeapAlloc 函数在这个堆上进行分配。但我对堆的大小感到困惑。我试了一个例子，我在这个堆上调用了 HeapAlloc(winHandle, 0, 1024) 两次，所以总数是 2 * 1024。但是我仍然可以多次调用 HeapAlloc 而不会出错。

假设我调用 HeapAlloc(winHandle, 0, 1024) 三次。分配的总大小将是 3 * 1024。它大于堆大小 2 * 1024。但没有错误。

谁能帮我回答这个问题？

谢谢，

这是测试代码。

```
// create heap, and return a headle(id) for that heap
HANDLE winHandle = HeapCreate( 0, sizeof(Dog), sizeof(Dog) );

// allocate the heap header to that handle 
void* s = HeapAlloc( winHandle, 0, sizeof(Dog) );   
// check if the alloc is success or not
assert( 0 != s );
printf("%p \n", s);
// load the heap header data
Dog* heapHeader = new(s) Dog( 1, 2, 4);

// allocate the heap header to that handle 
void* ss = HeapAlloc( winHandle, 0, sizeof(Dog) );
// check if the alloc is success or not
assert( 0 != ss );
printf("%p \n", ss);
// load the heap header data
Dog* heapHeadder = new(ss) Dog( 1, 2, 4); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T20:12:26.930

您对 API 的使用略有不同：

```
HANDLE WINAPI HeapCreate(
    DWORD flOptions,
    SIZE_T dwInitialSize,
    SIZE_T dwMaximumSize ); 
```

请注意，此调用的第二个参数是堆的初始大小，而不是最大大小。当您将最大大小指定为 0 时，一旦您用尽了初始池，Windows 将尝试为堆提交新的内存页面。

**编辑**

请注意，Windows 会将给出的最大大小四舍五入到最接近系统页面大小的倍数。所以堆的实际大小可能比你要求的要大。此外，堆将使用其中的一些内存来进行自己的内部簿记。因此，您将无法进行等于堆大小的单个分配。

# iphone - 有没有办法禁用 Passbook 通行证上的链接？

> ID：14406821
> 
> 赞同：3
> 
> 时间：2013-01-18T20:07:06.830
> 
> 标签：iphone, ios, passbook

我正在处理 Passbook 的通行证，我们有一部分数据被链接为电话号码，但实际上是会员号码。有没有办法表明传球中的后场不应该作为电话号码链接？我很想禁用它，以便我们可以正确格式化我们的数据。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T09:13:23.247

从 6.0.1 开始，只有七位或更多位的数字被解析为电话号码： ![通过测试](../Images/d1a6d20512feda0f446ff26ca4a1a02e.png)

有了这些知识，我们可能会`\u200B`在每六位数字上附加一个零宽度空格 ( )： ![使固定](../Images/f06e4730c8014f17bb5910b20573c8c8.png)

它看起来很好。唯一的缺点是当用户复制它时空间会分割数字，例如谷歌搜索返回的结果`123456 789`就像`zero width space`是一个真实的空间一样`\u20`。

![在此处输入图像描述](../Images/e8344416136784b833702479df9a109e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T02:15:18.480

Apple 的数据检测算法非常激进，并且在大多数情况下做得很差，特别是对于非美国地址和电话号码。

您无法在 pass.json 中设置任何键来禁用数据检测。我们发现防止数字被转换的唯一方法是在它前面加上一个#。

# 也将在 pass 的背面呈现，但不会转换数字。

![截屏](../Images/d65bd3d203ba1e3e1d66dfc323f6f721.png)

# php - 如何使文件看起来像在服务器的根目录中

> ID：14406828
> 
> 赞同：0
> 
> 时间：2013-01-18T20:07:22.507
> 
> 标签：php, .htaccess, ftp, apache2

我有单独的域指向专用框上的单独文档根

我想授予对此文档根目录下的子文件夹 ftp-upload 的 FTP 访问权限。

正确的 FTP 配置不是这个问题的一部分

如果授权人将文件上传到 document_root/ftp-upload，则该文件应该可以通过 domain.com/file 而不是 domain.com/ftp-upload/file 访问

.htaccess 文件位于文档根目录中

我已经尝试了一些东西，但它们似乎不起作用。

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /
    ## check if the file exists in subfolder
    ##   ...and if found, stop and display it
    RewriteCond %{DOCUMENT_ROOT}/ftp-upload/$1 -f [OR]
    RewriteCond %{DOCUMENT_ROOT}/ftp-upload/$1 -d
    RewriteCond $1 !^$
    RewriteRule  (.*)  %{DOCUMENT_ROOT}/ftp-upload/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|images|robots\.txt|css|assets|ftp-upload)
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我也试过

```
RewriteCond  %{DOCUMENT_ROOT}/ftp-upload/${REQUEST_FILENAME} -f 
```

和

```
RewriteCond %{DOCUMENT_ROOT}/ftp-upload%{REQUEST_URI} -f 
```

这是一项正在进行中的工作，因此这不会是最终解决方案，但是很多人都要求此功能。如果可能的话，我宁愿不让他们访问文档根目录。

更新：看起来事情确实有效，当它想要......

如果我输入 domain.com/test.txt （仅存在于 ftp-upload 目录中），请求将转到 domain.com/index.php/test.txt 并为我提供主页

如果我输入 domain.com/ftp-upload/ 我会得到一个目录列表，包括 test.txt

如果我点击 test.txt 我会得到文件内容（这是“它有效！”）。如果我然后输入 domain.com/test.txt 我会再次显示文件内容...

我的头爆炸了……有什么想法吗？

解决了另一种方法，这里的答案在我的服务器上不起作用。

我现在构建的 CMS 有另一个用户组“SEO 优化”和一个上传部分。在该部分下，用户可以选择要将文件上传到他分配的哪个位置。如果上传文件夹中存在所请求的文件，则网站 index.php（控制器/路由器）将提供该文件。没有 .htaccess 编辑，因为我的服务器表现得很时髦..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T21:43:07.270

我理解的事实（如有错误请纠正我）

*   您有单独的域指向单独的文档根
*   您想授予 FTP 访问`ftp-upload`此文档根目录下的子文件夹的权限。
*   正确的 FTP 配置不是这个问题的一部分
*   如果授权人将文件上传到`document_root/ftp-upload`，则该文件应该可以通过`domain.com/file`而不是`domain.com/ftp-upload/file`
*   .htaccess 文件位于文档根目录中

对于上述事实，这是一个工作`.htaccess`文件。请注意我使用的文件夹名称是`ftp-upload`，你在你的问题中使用了几个不同的版本（,,, `ftp-upload`）`ftp_upload`确保`ftpupload`这在你的配置中是一致的

**.htaccess 在您的域文档根文件夹中**

```
RewriteEngine On
RewriteBase /
RewriteCond %{DOCUMENT_ROOT}/ftp-upload%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/ftp-upload%{REQUEST_URI} -d 
RewriteRule ^(.*)$  ftp-upload/$1       [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|images|robots\.txt|css|assets)
RewriteRule ^(.*)$  index.php/$1        [L] 
```

我所做的是检查子文件夹中是否存在请求的文件`/ftp-upload`。

棘手的是这`RewriteCond file -f`需要一个完整的路径。这就是为什么您通常会测试`%{REQUEST_FILENAME}%` 如果此条件为真（文件存在）只需将请求重写为`ftp-upload/filename`

这也适用于`ftp-folder`例如文件夹中的子文件夹`ftp-folder/test/image.png`将可以访问`/test/image.png`

第二部分只是您通常的“如果文件不存在，则重写到/index.php”

**编辑**

在旁注上

> OP 表示“这不起作用” - 好吧，谢谢你的尝试 - 在这个有用的评论之后我差点删除我的答案，但是在我投入这篇文章的工作之后，因为我验证了建议的解决方案可以完美运行，我决定喘口气，提供一些调试技巧。

这就是说，如果这对您不起作用：

*   确保您的“隐藏”上传文件夹实际上被调用`ftp-upload`，此外，Linux**区分大小写**
*   确保您的网络服务器配置为读取 .htaccess 文件：

    *   [虚拟主机配置中的AllowOverride](http://httpd.apache.org/docs/2.2/en/mod/core.html#allowoverride)指令。
    *   通常的价值是`AllowOverride All`
    *   您可以通过在您的 .htaccess 中添加一些无效的内容（例如`givemeanerror on`）来简单地对此进行测试，然后在您的网络浏览器中打开该页面。如果您的 .htaccess 文件被读取，您将在浏览器中收到 500 Internal Server 错误消息。如果您没有测试环境，可以在测试子文件夹中执行此操作
*   我在上面发布的配置应该替换放置在您（不在 ftp-upload 文件夹内）中的文件的**全部**内容，以便调试甚至删除包装器，一旦它工作就可以放回`.htaccess``DOCUMENT_ROOT``<IfModule>`

*   为了测试，将图像文件复制到您的 ftp-upload 文件夹中，假设`test.png`

*   如果您仍然无法在浏览器中访问[http://yourdomain.com/test.png](http://yourdomain.com/test.png)，我想查看此请求的响应标头
*   如果您不知道如何查看响应标头，请访问[http://www.webconfs.com/http-header-check.php](http://www.webconfs.com/http-header-check.php)，输入 URL`http://yourdomain.com/test.png`并复制结果

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:51:29.577

请检查我根据您的需要创建的这个空间[http://dev.wadakkir.org/test/](http://dev.wadakkir.org/test/)

这是前一个空间的结构：

*   [http://dev.wadakkir.org/](http://dev.wadakkir.org/)：我的文档根目录
*   [http://dev.wadakkir.org/test/](http://dev.wadakkir.org/test/)链接指向的地方
*   [http://dev.wadakkir.org/test/subF/](http://dev.wadakkir.org/test/subF/)一个包含许多文件的文件夹（在我的情况下只有两个文件存在）
*   浏览[http://dev.wadakkir.org/test/](http://dev.wadakkir.org/test/)时，您会看到 http://dev.wadakkir.org/test/subF/ 的内容，[您](http://dev.wadakkir.org/test/subF/)可以使用链接[http://dev.wadakkir 下载文件。 org/test/tst.txt](http://dev.wadakkir.org/test/tst.txt)

那是你需要的吗？

如果是这样，我可以使用以下 .htaccess 文件执行此行为

```
Options +Indexes
RewriteCond  %{REQUEST_URI} !^/test/subF/
RewriteRule ^(.*)$ /test/subF/$1 
```

在你的情况下，它应该是这样的：

```
Options +Indexes
RewriteCond  %{REQUEST_URI} !^/ftp-upload/
RewriteRule ^(.*)$ /ftp-upload/$1 
```

希望它有帮助，如果没有，我仍然可以再试一次:)

**更新**

正如我之前的评论中所建议的，以下是一个快速编写的网关，您可以查看[http://dev.wadakkir.org/test/](http://dev.wadakkir.org/test/)的执行示例（我会放一段时间）

以下是我使用的源代码：

*索引.php*

```
<?php

require_once 'gateway.php';

echo "<h1>Hello World!</h1>";
?>
Existing file names are:
<ul>
    <li>01_Content_Of_Test_Folder.png</li>
    <li>02_Content_Of_SubF_Folder.png</li>
    <li>2ndTst.txt</li>
    <li>tst.txt</li>
</ul> 
```

*网关.php*

```
<?php

if( !empty($_GET['cf']) ){
$filename = "./subF/".$_GET['cf'];
if( is_file( $filename ) )
    dwldFunction($filename);
else{
    // TODO change this to what ever you want
    die("File not found ($filename)");
    }
    exit(1);
}

function dwldFunction( $fName ) {
// detect mime type
$mime = getMime( $fName );

header('Pragma: public');   
header('Expires: 0');       
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Cache-Control: private',false);
header('Content-Type: '. $mime );
header('Content-Disposition: attachment; filename="'.basename($fName).'"');
header("Content-Length: " . filesize($fName));
header('Connection: close');

readfile( $fName );
}

function getMime( $fName ) {
    $r = pathinfo($fName);
    $m ;
    //TODO: 
    // complete the following list or use
    //$finfo = finfo_open(FILEINFO_MIME_TYPE);
    //finfo_file($finfo, $fName);
    //finfo_close($finfo);
    // @: http://php.net/manual/en/function.finfo-file.php
    switch ( $r['extension'] ){
        case "pdf":
            $m = "application/pdf";
            break;
        case "txt":
            $m = "text/plain";
            break;
        case "png":
                $m = "image/png";
            break;
    }
    return $m;
} 
```

*.htaccess*内容是：

```
Options +Indexes

RewriteCond %{REQUEST_URI} !^/test/subF/
RewriteCond %{REQUEST_URI} !index.php
RewriteCond %{REQUEST_URI} !subF
RewriteRule ^(.*)$ /test/index.php?cf=$1 
```

您可以从此[链接下载完整的源代码](http://dev.wadakkir.org/test/subF/full_source_code.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:55:23.527

所有这些答案对我来说似乎过于复杂

假设我们的目录结构如下

/home/user/www/ {web 根目录} /home/user/ftpuploadfolder/ {ftp 文件夹}

并且您希望该文件夹通过 apache 显示为 /home/user/www/folder

为什么不只创建一个符号链接？ln -s /home/user/ftpuploadfolder/ /home/user/www/publicfolder/

这样做，您可以对链接文件夹拥有不同的权限，例如 apache 只能访问公共文件夹（不是公共读/写等），而 ftp 只能访问您的 ftpuploadfolder

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:58:26.390

我会使用 PHP 文件来读取想要的文件（在本例中位于子文件夹中），然后将其输出给用户。但是，我认为您的解决方案可以在以下答案中找到：

[https://stackoverflow.com/a/1851873/1794894](https://stackoverflow.com/a/1851873/1794894)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T21:10:47.387

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^yourhost.com|^www.yourhost.com
RewriteCond %{REQUEST_URI} !^/new
RewriteRule ^(.*)$ new/$1 [L] 
```

这个意思

www.yourhost.com/new/

实际上是

www.yourhost.com

# opengl-es - eclipse中未定义的参考glBindVertexArrayOES、glGenVertexArraysOES、glDeleteVertexArraysOES

> ID：14406829
> 
> 赞同：4
> 
> 时间：2013-01-18T20:07:22.633
> 
> 标签：opengl-es, android-ndk

尝试使用 Android NDK 编译 C++ 代码，但这些错误不会消失

```
undefined reference to glBindVertexArrayOES
undefined reference to glGenVertexArraysOES
undefined reference to glDeleteVertexArraysOES 
```

在 .mk 文件中写道

```
LOCAL_LDLIBS := -lGLESv1_CM -ldl -llog -lz  -landroid -lEGL 
```

所有其他功能都完美找到，我是否需要声明任何东西才能使这些工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T11:40:34.630

此函数不在基本 opengl es 规范中，因此默认情况下未定义它们，而是作为扩展提供。

如果您使用的设备支持此扩展，您可以获取函数的物理地址并通过函数指针使用它。

它应该是这样的：

```
PFNGLGENVERTEXARRAYSOESPROC glGenVertexArraysOES;
PFNGLBINDVERTEXARRAYOESPROC glBindVertexArrayOES;
PFNGLDELETEVERTEXARRAYSOESPROC glDeleteVertexArraysOES;
PFNGLISVERTEXARRAYOESPROC glIsVertexArrayOES;

glGenVertexArraysOES = (PFNGLGENVERTEXARRAYSOESPROC)eglGetProcAddress ( "glGenVertexArraysOES" );
glBindVertexArrayOES = (PFNGLBINDVERTEXARRAYOESPROC)eglGetProcAddress ( "glBindVertexArrayOES" );
glDeleteVertexArraysOES = (PFNGLDELETEVERTEXARRAYSOESPROC)eglGetProcAddress ( "glDeleteVertexArraysOES" );
glIsVertexArrayOES = (PFNGLISVERTEXARRAYOESPROC)eglGetProcAddress ( "glIsVertexArrayOES" ); 
```

比你可以使用的功能。只是不要忘记此绑定发生在运行时，因此检查是否支持此功能是一个好主意。如果设备不支持，指针将为 0。

# android - 自动更正和限制的 StageText 问题

> ID：14406833
> 
> 赞同：1
> 
> 时间：2013-01-18T20:07:30.057
> 
> 标签：android, actionscript-3, air, autocorrect

我正在尝试在 Android AIR 应用程序中使用 StageText，如下所示：

```
var tf:StageText = new StageText();
tf.stage = stage;
tf.viewPort = new Rectangle(0, 0, stage.fullScreenWidth, 90); 
tf.text = "Test";
tf.editable = true;
tf.autoCorrect = false;
tf.fontSize = 50;
tf.color = 0xFF0000;
tf.maxChars = 12;
tf.restrict = "A-Za-z"; 
```

在 Android 设备上编辑此 StageText 时，一切都按预期工作，直到您点击删除按钮。到目前为止，不会显示自动更正建议，但是一旦按下删除按钮，自动更正建议就会开始显示。现在，您按下的下一个键将在光标位置插入自动更正的单词，而不是您按下的任何键（例如，如果您按“s”，如果这是自动更正的建议，它将插入“Son”）。

真正奇怪的是，这种行为只有在我在 StageText 上设置了 restrict 属性时才会发生——如果我注释掉了 restrict 行，那么所有的功能都完全符合我的预期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:56:40.773

从文档（[flash.text.StageText.restrict](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StageText.html#restrict)）：

> 注意：限制仅适用于用户输入；脚本可以在文本字段中插入任​​何字符。

由于限制不是 100% 可靠的，因此您可以在事件处理程序中`restrict`使用自己的逻辑 ( [RegExp](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/RegExp.html) )自己评估文本，而不是为文本字段的属性分配值。`CHANGE`这将使您可以完全控制用户在文本字段中输入的内容。

```
tf.addEventListener(Event.CHANGE, textFieldChangeEventHandler);

private function textFieldChangeEventHandler(event:Event):void
{
    trace(event.target.text);
    //Manage text
} 
```

# sql - 减去两个子查询

> ID：14406835
> 
> 赞同：4
> 
> 时间：2013-01-18T20:07:39.830
> 
> 标签：sql, sql-server, select, subquery

我有以下疑问。我想从 SUM 中减去数字，然后只返回结果不是 0 的数字。任何帮助将不胜感激。我也很想看看这是否可以在一个查询中完成。我用 HAVING 子句尝试了它，但它返回了错误的结果。使用 SQL Server 2008

```
 SELECT 
(
 SELECT station_id, SUM(tcl_missing + tcl_not_missing) as tcl_total
 FROM tcl_missing_summary 
 GROUP BY station_id
) as a 

(
 SELECT station_id, SUM(total) as total
 FROM tcl_breakdown_op
 WHERE tr_standard not like '%cru'
 GROUP BY station_id
) as b
 WHERE a.tcl_total - total <> 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T20:26:16.160

假设你有不止一个 stationID，

```
 SELECT station_id, tcl_total, total, a.tcl_total - total as diff
from (
 SELECT station_id, SUM(tcl_missing + tcl_not_missing) AS tcl_total
 FROM tcl_missing_summary 
 GROUP BY station_id
) AS a INNER JOIN

(
 SELECT station_id, SUM(total) AS total
 FROM tcl_breakdown_op
 WHERE tr_standard NOT LIKE '%cru'
 GROUP BY station_id
) AS b
ON a.stationid = b.stationid
 WHERE a.tcl_total - total <> 0 
```

也考虑一下

```
SELECT 
    station_id,
    SUM(tcl_missing + tcl_not_missing) AS sum_tcl_total,
    SUM(total) AS sum_total,
    SUM(tcl_missing + tcl_not_missing) - SUM(total) AS diff
FROM 
    tcl_missing_summary s INNER JOIN
    tcl_breakdown_op b ON
    s.station_id = b.station_id
WHERE
     tr_standard NOT LIKE '%cru'    
GROUP BY 
    station_id
HAVING
    SUM(tcl_missing + tcl_not_missing) <> SUM(total) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:11:04.247

试试这个

```
; WITH CTE1 AS 
(
SELECT station_id, SUM(tcl_missing + tcl_not_missing) as tcl_total
 FROM tcl_missing_summary 
 GROUP BY station_id
), CTE2 AS
(
SELECT station_id, SUM(total) as total
 FROM tcl_breakdown_op
 WHERE tr_standard not like '%cru'
 GROUP BY station_id
)

SELECT * FROM CTE1 a
LEFT OUTER JOIN CTE2 b ON a.station_id = b.station_id
WHERE a.tcl_total - isnull(b.total,0) <> 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:13:48.040

```
SELECT a.station_id AS station, a.tcl_total-b.total AS difference
(
 SELECT station_id, SUM(tcl_missing + tcl_not_missing) as tcl_total
 FROM tcl_missing_summary 
 GROUP BY station_id
) as a 
INNER JOIN
(
 SELECT station_id, SUM(total) as total
 FROM tcl_breakdown_op
 WHERE tr_standard not like '%cru'
 GROUP BY station_id
) as b ON a.station_id = b.station_id
 WHERE a.tcl_total - b.total <> 0 
```

如果您知道一个结果集可能没有站点的某些子集的数据，这也可以转换为外连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T20:16:24.417

我同意 rs 关于 CTE 方法的观点，因为嵌套选择恕我直言，在其中两个或三个之后变得讨厌。CTE 还一次按一组逻辑地显示您的数据。

但是，如果您必须使用嵌套选择，只需添加几行即可使其完整：

```
SELECT a.tcl_total
from 
(
 SELECT station_id, SUM(tcl_missing + tcl_not_missing) as tcl_total
 FROM tcl_missing_summary 
 GROUP BY station_id
) as a 
,
(
 SELECT station_id, SUM(total) as total
 FROM tcl_breakdown_op
 WHERE tr_standard not like '%cru'
 GROUP BY station_id
) as b
 WHERE a.tcl_total - b.total <> 0 
```

# wordpress - 自动从 ftp 服务器上传视频到 youtube

> ID：14406836
> 
> 赞同：1
> 
> 时间：2013-01-18T20:07:41.057
> 
> 标签：wordpress, youtube

我有 whm cpanel 服务器和存储在文件夹“abc”中的视频，通过 filezilla 上传。

反正有没有自动将它们上传到youtube？

更喜欢可以与wordpress集成的php解决方案

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:14:39.973

你应该通过 youtube 开发者 api，php 指南它有据可查，以提供你的答案 [https://developers.google.com/youtube/2.0/developers_guide_php](https://developers.google.com/youtube/2.0/developers_guide_php)

# activerecord - 使用 ActiveRecord 的 Elasticsearch、Tire 和嵌套字段

> ID：14406845
> 
> 赞同：0
> 
> 时间：2013-01-18T20:07:59.220
> 
> 标签：activerecord, elasticsearch, tire

请阅读我在[Elasticsearch、Tire 和 Nested queries/association with ActiveRecord下面的类似问题的答案](https://stackoverflow.com/questions/11692560/elasticsearch-tire-and-nested-queries-associations-with-activerecord)

假设我在上述问题中提供的 Book 模型中添加了以下字段：

`field :account_tags, type: Array # [{:account_id => 1, :tags => ["tag1", "tag2"], :acccount_id => 2, :tags => ["tag3", "tag4"] }]`

我现在想建立一个索引来搜索这些 account_ids 或标签。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:43:38.077

我已经解决了这个问题并且是直截了当的。我的映射看起来像

```
mapping do 
  ...  
  indexes :account_tags do
    indexes :account_id, :index => "not_analyzed"
    indexes :tags, :type => 'string', :analyzer => 'keyword'
  end
end 
```

我的 to_indexed_json 看起来像

```
def to_indexed_json
  {
    ...
    account_tags: account_tags
  }.to_json
end 
```

现在我可以通过搜索

```
@query = "account_id:#{account_id}"
@tags = tags

Book.tire.search :load => true do |search|
  search.query do |query|
    query.string @query
  end

  search.filter :terms, :tags => @tags
end 
```

这是我用来制作系统原型的一个简单的解决方案。

# php - 在 Yii 中使用常量和数组定义一个下拉列表

> ID：14406849
> 
> 赞同：1
> 
> 时间：2013-01-18T20:08:14.220
> 
> 标签：php, yii

我是 Yii 框架的新手。我正在学习“使用 Yii 和 PHP 进行 Web 应用程序开发”。本书定义了 CONSTANTS 并在一个数组中使用它来提供一个下拉列表。 **为什么？为什么有价值？以及它如何将数组定义中的新值归因于 CONSTANTS？**

这是代码：

```
class Issue extends CActiveRecord{
....

const TYPE_BUG=0;
const TYPE_FEATURE=1;
const TYPE_TASK=2;
public function getTypeOptions()
{
return array(
self::TYPE_BUG=>'Bug',
self::TYPE_FEATURE=>'Feature',
self::TYPE_TASK=>'Task',
);

....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T16:50:20.370

使用常量的替代方法是使用所谓的幻数，即“*在代码中直接使用数字*”。假设我们正在创建一个用户注册表单，并且我们想要限制用户名字段的最大字符数。我们可以这样做：

```
if (strlen($model->username) > 10){
    // username is too long
} 
```

那段代码基本上没有错。当您在多个地方使用相同的值时会出现问题，例如当用户更新他们的详细信息并更改他们的用户名时。您将再次进行相同的比较。

现在想象一下，由于某种原因，我们决定用户名现在可以是**12 个**字符长。您将不得不去查找代码中使用此值的所有位置并更新它们。虽然在我们的示例中，这并不是真正的问题，但想象一下在一个巨大的系统上执行此操作，该系统有数百个对该值的引用。您不能简单地找到值**10**并将其替换为**12**，因为这几乎肯定会破坏系统。所以你必须找到并解释这个值的每一次出现。

使用常量代替这个值可以节省大量时间，并使代码更易理解、更易于维护。例如：

```
const MAX_USERNAME_LENGTH = 10;

if (strlen($model->username) > MAX_USERNAME_LENGTH){
    // username is too long
} 
```

幻数的一个很好的定义是：

```
The term magic number also refers to the bad programming practice of using
numbers directly in source code without explanation. In most cases this makes
programs harder to read, understand, and maintain. Although most guides make an
exception for the numbers zero and one, it is a good idea to define all other
numbers in code as named constants. 
```

作为旁注，我是该书的技术审阅者之一（Web Application Development with Yii and PHP）

# ruby-on-rails - 如何在我的 Ruby on Rails 网站上设置反向 DNS？

> ID：14406851
> 
> 赞同：2
> 
> 时间：2013-01-18T20:08:27.203
> 
> 标签：ruby-on-rails, reverse-dns

提前感谢您在此问题上提供的任何帮助！

对于我的网站，用户应该在注册后收到一封激活电子邮件。有些电子邮件没有被接收，它们也不会进入垃圾邮件过滤器文件夹。

在查看了我的integral_mailer 日志后，我想我已经发现了问题所在。系统似乎拒绝了这些消息，因为没有反向 DNS 信息。

*   以下是康卡斯特在回复被拒绝的消息时所说的话：http: [//postmaster.comcast.net/smtp-error-codes.php#554](http://postmaster.comcast.net/smtp-error-codes.php#554)）
*   这是 AOL 不得不说的：http: [//postmaster.aol.com/Postmaster.Errors.php#421dnsnr](http://postmaster.aol.com/Postmaster.Errors.php#421dnsnr)
*   我查看了这篇文章，但无法设置自己的反向 DNS：[设置反向 DNS 记录](https://stackoverflow.com/questions/621601/setting-up-reverse-dns-records)

我对 RoR 有点陌生。您能指导我为我的邮件设置所需的反向 DNS 信息吗？

作为背景，这里是来自 user_mailer.rb 的详细信息：

```
class UserMailer < ActionMailer::Base
def signup_notification(user)
setup_email(user)
@subject    += 'Please activate your new account'
@body[:url]  = "http://website.com/activate/#{user.activation_code}"
end 
```

来自integral_mailer.rb：

```
module IntegralMailer
def perform_delivery_integral_mailer(mail)
destinations = mail.destinations
mail.ready_to_send

helo = smtp_settings[:helo] || "localhost.localdomain"

ActionMailer::Base::INTEGRAL_MAILER_SERVER.send_mail(helo, mail.from, destinations, mail.encoded)
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:13:31.023

该网站托管在 Joyent 上，但域名是通过 Go Daddy 获得的。Go Daddy 不做反向 DNS（即使网站是通过它托管的）。解决方案是联系 Joyent 并要求它设置反向 DNS。

[http://wiki.joyent.com/wiki/display/gen/DNS+Guide](http://wiki.joyent.com/wiki/display/gen/DNS+Guide)解释了如何通过 Joyent 设置反向 DNS。

一两天后，AOL、康卡斯特和其他公司开始接受来自该网站的电子邮件。

# asp.net-mvc-3 - 基于用户角色 ASP.NET MVC3 填充值的 Html.DropDownListFor 扩展方法

> ID：14406853
> 
> 赞同：0
> 
> 时间：2013-01-18T20:08:34.840
> 
> 标签：asp.net-mvc-3, razor

我正在探索与登录用户角色相关的 Asp.net MVC 中的 DropDownBox 的通用解决方案。以下是场景：

如果 UserRole 为 X，则 pagesA 上的 DropDown 必须有多个值。

如果 UserRole 为 Y，则 pagesA 上的下拉列表必须具有单个值，并且下拉列表必须为只读，默认为单个值。

值将由控制器通过 ViewBag 提供给视图

有人可以帮我解决这种情况的扩展方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:36:22.097

[这](http://aspnet.codeplex.com/releases/view/58781)是下载 MVC3 源代码的链接。您要查找的文件是 mvc3-rtm-sources\mvc3\src\SystemWebMvc\Mvc\Html\SelectExtensions.cs。该文件包含 DropDownList 和 DropDownList 的所有扩展方法。

您要查找的内容类似于以下内容：

```
[SuppressMessage("Microsoft.Design", "CA1006:DoNotNestGenericTypesInMemberSignatures", Justification = "This is an appropriate nesting of generic types")]
public static MvcHtmlString DropDownListForRoles<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> selectList, UserRole role, IDictionary<string, object> htmlAttributes) {
    if (role == 'X') {
        //edit the select list as necessary
    }
    else if (role == 'Y') {
        // have the single value
        // add the read-only attribute to htmlAttributes
    }
    return DropDownListHelper(htmlHelper, expression, selectList, htmlAttributes);
} 
```

这至少应该是您正在寻找的一个很好的起点。没有更多细节，我只能真正给你伪代码。但是，您应该能够从那里调整您需要的内容。

不要忘记检查它们对所有功能的不同覆盖。您可能认为现在不需要它们，但很高兴知道所有选项都在那里，以后应该会有所改变。像他们一样拥有它们，只是让这些方法返回您创建的方法，使用所有可能的参数调用该方法，并在必要时传入空值。

# jquery - 将jquery序列化数据加载到表单中

> ID：14406855
> 
> 赞同：2
> 
> 时间：2013-01-18T20:08:38.843
> 
> 标签：jquery, forms, serialization, populate

我想知道如果您已经序列化了表单，是否有一种简单的方法来填充表单？例如，如果我有`var form = $('#myform').serialize()`，我应该如何将该数据加载到表单中？是否有可用的 jquery 函数或者我应该手动设置表单中的所有值？

示例表格：

```
<form id="myform">
    <input type="text" name="first_name"/>
    <input type="text" name="last_name"/>
    <select name="gender">
        <option val=""></option>
        <option val="male">Male</option>
        <option val="female">Female</option>
    </select>
</form> 
```

因此，我正在寻找一种快速简便的方法来使用序列化数据重新填充相同的空白表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:06:26.587

尽管@Johan 的回答非常好，但到目前为止对我来说最好的解决方案是 formParams。我将表单转换为 json 对象`$('#myform').serializeArray()`，然后通过 ajax 将其发布到脚本，将其保存在数据库中。当我不得不重新填充表单时，我只是使用 ajax 请求来获取 json 存储的表单数据并将其与`$('#myForm').formParams()`.

我想知道为什么jquery没有在框架中实现这样的功能......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:16:44.793

使用下面的[代码片段](http://css-tricks.com/snippets/jquery/serialize-form-to-json/)，但将其更改为使用 id/class 而不是每个元素的 name 属性。

```
$.fn.serializeObject = function()
{
   var o = {};
   var a = this.serializeArray();
   $.each(a, function() {
       if (o[this.name]) {
           if (!o[this.name].push) {
               o[this.name] = [o[this.name]];
           }
           o[this.name].push(this.value || '');
       } else {
       o[this.name] = this.value || '';
       }
    });
   return o;
}; 
```

当您将表单数据保存在键值对中时，您可以简单地遍历对象数组并映射值。一些伪代码：

```
$.each(arr, function(k, v){
    $('#newform .' + key).val(v);
}); 
```

# java - SWT 未启用外壳

> ID：14406861
> 
> 赞同：0
> 
> 时间：2013-01-18T20:09:14.777
> 
> 标签：java, eclipse, swt

单击扩展平台首选项的 Eclipse 插件内的按钮时，我试图打开 DateTime 外壳。

这是按钮选择适配器的代码

```
 @Override
    public void widgetSelected(SelectionEvent e) {
           super.widgetSelected(e);
          Display display = Display.getCurrent();
          Shell ns = new Shell(display);
          ns.setLayout (new RowLayout ());
          final DateTime calendar = new DateTime (ns, SWT.CALENDAR);
          ns.pack();
          ns.open();
          ns.forceActive();
          ns.setEnabled(true);
          while (!ns.isDisposed()) {
              if (!display.readAndDispatch())
                display.sleep();
           }
    } 
```

正如您在下图中看到的那样，描述了 shell，但似乎未启用。确实不可能选择任何日期或关闭/调整它的大小。如您所见，三个按钮（红色、黄色和绿色）显示为灰色。我究竟做错了什么？

![在此处输入图像描述](../Images/dba668fcdcc18621b13fe6cd3e2e8afa.png)

**更新**

我试图得到这样的外壳：

```
 Display display = new Display();
  IWorkbench workbench    = PlatformUI.getWorkbench();
  IWorkbenchWindow window = workbench.getActiveWorkbenchWindow();
  Shell shell             = window.getShell(); 
```

但现在我明白了![在此处输入图像描述](../Images/2a3d084490e38e7059c42791b9ec16b6.png)

这实际上与我的意图相去甚远。我的目标是使用 DateTime 小部件显示一个新窗口

**更新**

我遵循 Gilbert 的建议并定义了我自己的 JFace 对话框。正如 Lars Vogel 在[http://www.vogella.com/articles/EclipseDialogs/article.html](http://www.vogella.com/articles/EclipseDialogs/article.html)中所述，我将它创建为 TitleAreaDialog 的扩展。它现在可以工作，但我还有一些需要改进的地方。

![在此处输入图像描述](../Images/ba03eb89c38007a53f406dcf75164d39.png)

我想隐藏标题的大标题并隐藏/删除帮助按钮。有没有办法做到这一点？我在扩展错误的课程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:22:28.660

既然您说您正在构建一个 Eclipse 插件，请尝试以下方法来获取 Shell。

```
IWorkbench workbench    = PlatformUI.getWorkbench();
IWorkbenchWindow window = workbench.getActiveWorkbenchWindow();
Shell shell             = window.getShell(); 
```

创建自己的 Shell 不是一个好主意，除非您在 Eclipse 之外构建 SWT 应用程序。

创建自己的 Display 不是一个好主意，除非您在 Eclipse 之外构建 SWT 应用程序。

我认为您正在寻找的是日历的对话框。您必须扩展 Eclipse Dialog 类来制作您自己的对话框。

# ruby - 如何 （？ ） 不同于 （？ :...) 在 Ruby 正则表达式 (Regex) 中？

> ID：14406871
> 
> 赞同：-2
> 
> 时间：2013-01-18T20:09:52.600
> 
> 标签：ruby, regex

下面提到的 Ruby 正则表达式 (Regex) 有何不同？

*   `(?imx)`和`(?-imx)`
*   `(?imx:..)`和`(?-imx:..)`

怎么`(?ix-ix: )`工作`Regex`？我找到了这个文档：

> *   `(?imx)`打开 i、m 或 x 选项。
> *   `(?-imx)`关闭 i、m 或 x 选项。
> *   `(?imx:..)`在括号内切换 i、m 或 x 选项。
> *   `(?-imx:..)`关闭括号内的 i、m 或 x 选项。
> *   `(?ix-ix: )`打开（或关闭）此非捕获组中的 i 和 x 选项。

但是在代码中它们将如何被使用，无法理解。那么，对于小代码有什么帮助来证明上面提到的差异吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:47:37.863

`(?x)`适用于*当前*括号集的末尾，或者整个正则表达式（如果它不在括号内）。 `(?x:...)`适用于括号*内的任何内容。*

所以，真的，这个：

```
(?x: ... ) 
```

只是写这个的更简单的方法：

```
(?:(?x) ... ) 
```

它的工作原理是这样的：

```
/red (?i) blue ( ( (?x) ( (?-i) green ) yellow ) purple )/
     ^^^^^^^^^^^^^^^^^^^^^             ^^^^^^^^^^^^^^^^^^^
     'i' is turned on here...          and here
                          ^^^^^^^^^^^^^
                          but 'i' is turned off here
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                    'x' is turned on here 
```

`(?s-m:...)`是另一个快捷方式：它`s` *打开*和`m` *关闭*。您也可以将其写为`(?:(?s)(?-m)...)`，但这很难阅读。

`(?ix-ix:...)``i`是一个非常糟糕的例子，因为打开和关闭`x` *都*没有任何意义。

* * *

例子：

这将匹配：

```
/one (?i)TWO THREE/.match 'one two three' 
```

这不会，因为该`i`标志仅适用于`()`：

```
/one ((?i)TWO) THREE/.match 'one two three' 
```

这也不会，并且与上面的相同，除了括号*不会*捕获：

```
/one (?i:TWO) THREE/.match 'one two three' 
```

但这些将匹配：

```
/one (?i:TWO THREE)/.match 'one two three'
/one (?i:TWO) three/.match 'one two three' 
```

# android - “MapFragment 无法解析为类型”即使我处于 API 级别 17

> ID：14406873
> 
> 赞同：6
> 
> 时间：2013-01-18T20:10:08.523
> 
> 标签：android, android-fragments, android-mapview, mapfragment

我刚开始使用 MapFragments，我可以让地图显示在我的活动中。我只是使用一个简单的 XML 布局，它按预期工作：

![在此处输入图像描述](../Images/101a91f665428abc40c6337ca6511a83.png)

现在，我需要在代码中获取 Fragment，以便开始与 Map 进行交互。这是我遇到问题的地方：

![在此处输入图像描述](../Images/1105111d5ca5a8a3777b8d9860a33502.png)

如您所见，MapFragment（或 getFragmentManager）无法解析为类型。我的目标是 Android 4，API 级别 17：

![在此处输入图像描述](../Images/98a5694379eefd3c34799e65a8e757f2.png)

您还可以看到我正在引用 Googke Play 库。

这是清单，只是为了清楚起见：

![在此处输入图像描述](../Images/b3ab74a0a02a5ffa737b10e8be5ccfae.png)

**所以，最大的问题是：为什么我不能解析 MapFragment？我错过了什么？**

附带说明： SupportMapFragment 似乎可以解决，但这不是我想要的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-18T23:24:26.683

要使用`MapFragment`，您需要附加到您的应用程序的 Android 库项目（正如您所拥有的）`import`和`com.google.android.gms.maps.MapFragment`. 根据您的评论，后半部分是问题所在。

> 通常，Eclipse 建议自己导入，所以我从来没想过手动导入。

我有时也遇到过这个问题，其中 -- 坚决拒绝添加导入。我一直无法想出一个可重现的场景，而且这种情况很少发生，我只是耸耸肩，手动添加它，然后继续做其他事情。我也不确定问题出在 Eclipse 上还是与导入解析器的任何 ADT 扩展有关。

另外，我在Android开发中长期不用Eclipse，`import`手动输入语句，所以我有点习惯了。

> 顺便说一句，你在这里回答了很多关于 SO 的问题，你还有时间做其他事情吗？;-)

我是一个快速打字员，在十几岁的时候用手动打字机打字。

（对于正在阅读本文的年轻人来说，“打字机”基本上是直接连接到打印机的键盘，而“手动打字机”是使用按键的机械动作将字母实际放在纸上的机器，并且因此没有电工作。另外，诚挚地邀请你离开我的草坪。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T03:45:13.400

手动添加import，import com.google.android.gms.maps.MapFragment；我也遇到了同样的问题，试了3天解决了，就这么简单

# javascript - 将 KML 输入映射到 Google 表单的时间过长。卡住。任何替代方案，解决方法？

> ID：14406874
> 
> 赞同：2
> 
> 时间：2013-01-18T20:10:22.063
> 
> 标签：javascript, google-maps, iframe, kml, google-fusion-tables

我的目标是让用户绘制路线，以便他们可以将其提交到网站。

在下面的 jsfiddle 中，用户可以绘制路线并在完成后双击。双击会弹出一个 Google 表单，其中包含预先填充了 KML 坐标的“位置”字段。用户可以提交它，一旦获得批准，它就会进入一个 Fusion Table 以便于显示。

这是[jsfiddle](http://jsfiddle.net/witold/X7YRK/2/)。和代码：

```
 //here is the variable with properly formatted KML 
  geolines=escape("<LineString><coordinates>")+poly.getPath().getArray().toString().replace(/([\s]+)/g, '')+escape("</coordinates></LineString>") ;

  //infowindow that should display a form with Location field pre-populated with geolines variable for easy submission.
infowindowv2 = new google.maps.InfoWindow({
        content: '<iframe width=600 height=300 scrolling=yes frameborder=no seamless src=https://docs.google.com/spreadsheet/embeddedform?formkey=dDN6WEJTMlNHT2VNMlZBOW1MZmI1Wnc6MQ&entry_0=Test1&entry_1='+ geolines +'&entry_2=test3%22 seamless></iframe>'
}); 
```

问题是，如果缩小并绘制更复杂的路线，KML 很快就会变得太大，我会收到以下错误：“ *413。这是一个错误。您的客户发出了一个太大的请求。这就是我们所知道的.* " 看[这里](http://pollster.net/test/googlemaps.png).

现在我对如何解决它感到震惊。

我喜欢地图/表格/融合表一起工作的方式，我想保留这种组合，但我不确定如何。

任何线索、想法、建议将不胜感激。谢谢你的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:09:31.760

该错误与作为 URL 查询字符串的一部分传递数据有关（限制为大约 2000 个字符：[不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)）。您需要将此信息作为表单发布的一部分传递，并将所有数据作为表单元素传递（即您的地理数据成为您发布到 URL 的表单“字段”）。没有办法像这样传递任意冗长的 URL。

**编辑**修复了我原来的帖子以使其有意义。

**更新**这篇文章似乎很相关，这只是将数据获取到 iframe 的问题：[从窗口将值传递给 iframe](https://stackoverflow.com/questions/536538/pass-value-to-iframe-from-a-window)

或者这个：[在 iframe 和父级之间传递 jquery 变量](https://stackoverflow.com/questions/4689145/pass-jquery-variables-between-iframe-and-parent)

基本上，从主窗口操作框架元素 - 我认为这应该适用于您的情况。如果你让它工作，你应该发布结果 jsfiddle - 整洁的工具。

# jquery - 如何从表中提取 JSON 并对另一个表中的 id 列表进行排序？

> ID：14406885
> 
> 赞同：0
> 
> 时间：2013-01-18T20:11:07.023
> 
> 标签：jquery, ruby-on-rails, jquery-ui, hash

我有一个显示不同优先级等级的 JSON 字符串，json 的键是其排名的数字，该键的值是优先级表中的优先级 ID。例如 {"1":2,"2":3,"3",1}

我将此 JSON 存储在 mysql 的 PRIORITY_RANKS 列中以供教练使用，我正在我的 rails 应用程序中的 COACHES/EDIT 页面上工作，我需要能够按照 JSON 字符串显示的顺序将优先级排序到列表中而不是它们在mysql中找到的顺序。

不知何故，我需要解析 JSON 字符串并相应地对优先级进行排序。我正在使用 jquery UI 来实现可排序功能。继承人列表的样本。如果您需要更多信息，请告诉我。我仍然只是一个新手lol的一点经验！

查看/编辑`

```
<td style="padding:20px;">
                        <label class="pc3">Drag to Rank Priorities for Coach</label>
                        <p class="priochecker">Uncheck to disable Priorities</p>
                        <div id="rightlist">
                            <input type="hidden" name="currentranks" id="currentranks"></input>
                            <ul id="sortable" style="list-style:none;">
                                <% @priorities.each do |x, count| %>
                                    <li class="digit"><input class="priobox" type="checkbox" id="<%= x.id %>" name="<%= x.name %>" value="<%= x.id %>" onclick="removeval(this,<%= x.id %>);" checked>
                                    <strong>Rank <span class='prilistid'></span> <%= x.name %></strong></li>
                                <% end %>   
                            </ul>
                        </div>
                        </td>
                    </tr>
                </table>
                </div>
                <input type="hidden" name="coach[priority_ranks]" id="hash" value="{'1':1,'2':2,'3':3}"></input>

COACHES_CONTROLLER

  def edit
    #@coach = @current_coach
    @locations = Location.find(:all, :order => "name")
    @levels = Level.find(:all, :order => "value")
    @coach = Coach.find(params[:id])
    @ranks = Array.new
    @current_site = @coach.sites
    @priority_ranks = @coach.priority_ranks
    @priorities = Priority.find(:all, :conditions => { :deleted => false })
    siteObj = Site.all

    @sites = {}

    @sites['All Sites'] = -1

    siteObj.each do |t|
      @sites[t.name] = t.id
    end
  end 
```

# git - Git：如何在不提交的情况下回到我的 MASTER？

> ID：14406888
> 
> 赞同：3
> 
> 时间：2013-01-18T20:11:35.760
> 
> 标签：git

我的`master`分支很乱。我应该在现在之前设置分支，但我刚刚意识到我为什么需要它们！

所以，我有一堆`master`我不想提交的更改，但是我在一个新的分支中有一些我想要提交的修补程序。

我怎样才能把所有这些东西放在`master`一边，然后从一个分支推出一个小修补程序？

基本上，我还没有准备好实时推送屏幕截图中的任何内容：

![Git 主分支概述](../Images/7c059b29b886f1f0462bf68651cb1a6f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T20:18:07.723

[`git stash`](http://kernel.org/pub/software/scm/git/docs/git-stash.html)

```
DESCRIPTION
       Use git stash when you want to record the current state of the working
       directory and the index, but want to go back to a clean working
       directory. The command saves your local modifications away and reverts
       the working directory to match the HEAD commit. 
```

然后你也可以

```
git stash list 
```

将显示您所做的所有藏匿处，并且

```
git stash clear 
```

如果您只想放弃隐藏的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-24T03:06:26.270

从 Git 2.5（2015 年 7 月）开始，您可以使用[git worktree](http://github.com/blog/2042-git-2-5-including-multiple-worktrees-and-triangular-workflows)：

```
git worktree add -b patch-1 ../patch-1 
```

这本质上只是创建一个分支，但它将新分支放入父 repo 旁边的新文件夹中。这很好，因为你可以在这个分支上工作，即使没有提交，然后切换回 master 并使用干净的工作目录。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T20:17:17.007

也许我误解了，但你不能把你的主人恢复到一个不那么麻烦的时间，然后提交你的修补程序更改。如果我理解你，那就是我会做的。

# c++ - 超类对子类对象的引用

> ID：14406889
> 
> 赞同：0
> 
> 时间：2013-01-18T20:11:37.523
> 
> 标签：c++, inheritance, point-cloud-library

我试图用我自己的版本覆盖一个类，然后创建一个对该类的超类引用，但我得到一个编译错误。这是我的代码结构

文件：RailExtractionInteractorStyle.h（这是我继承超类 PCLVisualizerInteractor 的子类）

```
#include<pcl/visualization/interactor_style.h>

class RailExtractionInteractorStyle : public pcl::visualization::PCLVisualizerInteractorStyle
{
public:
    RailExtractionInteractorStyle();
}; 
```

文件：RailExtractionInteractor.cpp：

```
#include "RailExtractionInteractorStyle.h"

RailExtractionInteractorStyle::RailExtractionInteractorStyle()
    : pcl::visualization::PCLVisualizerInteractorStyle()
{
    // just calling super constructor for now
} 
```

文件：CloudPointPicker.hpp（使用 RailExtractionInteractorStyle 类的任意类）

```
#include "RailExtractionInteractorStyle.h"

template <typename PointT>
class CloudPointPicker {

protected:

    PointCloudTConstPtr cloud_;
    boost::shared_ptr<pcl::visualization::PCLVisualizer> myview_;

    //attempting to write my own interactor
    RailExtractionInteractorStyle* mystyle_;

public:

    CloudPointPicker() {
        *mystyle_ = new RailExtractionInteractorStyle;

    } 
```

CloudPointPicker 构造函数中的语句给了我以下错误：

```
error: no match for ‘operator=’ in ‘*((CloudPointPicker<pcl::PointXYZ>*)this)->CloudPointPicker<pcl::PointXYZ>::mystyle_ = (operator new(480u), (<statement>, ((RailExtractionInteractorStyle*)<anonymous>)))’ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:31:33.657

You have to remove the * at the beginning of this line:

```
*mystyle_ = new RailExtractionInteractorStyle; 
```

The operator new apply to the pointer directly, you don't need to dereference it.

# php - Codeigniter regex_match 与钱

> ID：14406893
> 
> 赞同：0
> 
> 时间：2013-01-18T20:11:43.453
> 
> 标签：php, forms, codeigniter, validation

我正在使用代码点火器 form_validation 并且我想知道是否可以为文本框验证资金，例如允许 4 个数字，然后是句点，然后是 2 个数字。

这是我到目前为止得到的

```
regex_match[/^[0-9.]{0,7}+$/] 
```

它工作得很好，但我可以输入一个像 100.000 这样的数字，我能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:23:55.193

要完全按照您的要求进行匹配，可以这样做：

```
regex_match[/^\d{4}\.\d{2}$/] // allow 4 numbers only a period and then two numbers only 
```

如果要匹配最多 4 个数字，则允许 1.00、10.00、100.00 但小数点前不超过 4 个数字，然后使用：

```
regex_match[/^\d{1,4}\.\d{2}$/] 
```

# javascript - 带有地理坐标图的美国 Javascript 地图

> ID：14406894
> 
> 赞同：4
> 
> 时间：2013-01-18T20:11:44.403
> 
> 标签：javascript, maps, geocoding

我正在为美国的简单地图寻找一个开源或廉价的选项，以绘制地理点或用谷歌分析为交通所做的颜色填充各州。

我不想要任何花哨的东西，只想要一张带有状态的地图，并且能够为我正在构建的位置服务在其上变暗区域、状态或绘制点。

谷歌地图可以绘制标记，但我希望这很简单，功能少一点。其他流行的地图软件也功能丰富（Open Maps、MapQuest 等）。

![在此处输入图像描述](../Images/020a39454822ed63b583cf66fc0e6a19.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T20:34:06.200

我猜你正在寻找这样的东西：

[http://www.ravelrumba.com/code/demos/us-map-raphael/demo-animated.html](http://www.ravelrumba.com/code/demos/us-map-raphael/demo-animated.html)

这是美国的 Javascript 地图，带有翻转状态。它使用 Raphael 库。Github 代码还包括指向他用作源数据的 SVG 地图的链接，以及指向用于将 SVG 转换为适合 Raphael 使用的 JS 数据的工具的链接。

[Raphael 图书馆](http://raphaeljs.com/)本身在他们自己的澳大利亚网站上有一个类似的演示。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T21:23:12.923

另一种选择是这个名为[Geo](https://github.com/AppGeo/geo)的 jQuery 插件。不确定你想要它有多轻。

您还可以查看他们的文档[http://docs.jquerygeo.com/](http://docs.jquerygeo.com/)以了解复杂性的示例。

# r - 在 xaxis 和 yaxis 中绘制时间序列数据

> ID：14406896
> 
> 赞同：0
> 
> 时间：2013-01-18T20:11:53.517
> 
> 标签：r, ggplot2, time-series

```
x <- structure(list(Date = structure(c(15358, 15359, 15362, 15363, 
15364, 15365), class = "Date"), EndTime = structure(c(1327016747, 
1327166720, 1327361839, 1327446733, 1327533097, 1327619504), class = c("POSIXct", 
"POSIXt"), tzone = ""), ThresholdTime = structure(list(sec = c(0, 
0, 0, 0, 0, 0), min = c(0L, 0L, 0L, 0L, 0L, 0L), hour = c(9L, 
9L, 9L, 9L, 9L, 9L), mday = c(20L, 21L, 24L, 25L, 26L, 27L), 
    mon = c(0L, 0L, 0L, 0L, 0L, 0L), year = c(112L, 112L, 112L, 
    112L, 112L, 112L), wday = c(5L, 6L, 2L, 3L, 4L, 5L), yday = c(19L, 
    20L, 23L, 24L, 25L, 26L), isdst = c(0L, 0L, 0L, 0L, 0L, 0L
    )), .Names = c("sec", "min", "hour", "mday", "mon", "year", 
"wday", "yday", "isdst"), class = c("POSIXlt", "POSIXt"))), .Names = c("Date", 
"EndTime", "ThresholdTime"), row.names = c(NA, 6L), class = "data.frame") 
```

我希望能够创建一个图表，其中 xaxis 是 Date 并且 yaxis 是 the`EndTime`并绘制一个`geom_hline`using `ThresholdTime`。

我可以去掉 %H 和 % from`EndTime`把它放进去`yaxis`。基本上我试图显示哪些数据点`EndTime`违反了`ThresholdTime`.

我面临的问题是：

如果`Endtime<-c("2012-01-02 09:00:00")`我的阈值是`ThresholdTime`，`c("2012-01-01 08:00:00")`我将如何在图表上显示它。如果我从中取出`%H:%M`，`EndTime`它看起来不会像违反了`ThresholdTime`但实际上它违反了阈值。

对于解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T00:09:09.243

您的问题是小时和分钟本身并不能捕获您的所有信息，您还需要日期（或相对日期，至少）。或者换一种说法，你需要相对的时间。

```
x$end <- difftime(x$EndTime, as.POSIXct(x$Date), units="hours")
x$thresh <- difftime(x$ThresholdTime, as.POSIXct(x$Date), units="hours") 
```

ggplot 不直接处理 difftimes，所以只需转换为它们的等值数字，因为我们强制它是小时。然后它只是标签的一点格式，看起来像小时和分钟。

```
ggplot(x, aes(Date, as.numeric(end))) + 
  geom_point() +
  geom_hline(aes(yintercept=as.numeric(thresh))) +
  scale_y_continuous(labels=function(dt) {
    paste0(sprintf("%02d",floor(dt)),":",sprintf("%02d",floor(60*(dt-floor(dt)))))
  }) 
```

![在此处输入图像描述](../Images/e330627ad7d5e4c8ac96b1d5ea9740d1.png)

# maven - 用于发布 maven 插件的 Jenkins Bulk 或 Multi 触发器

> ID：14406897
> 
> 赞同：1
> 
> 时间：2013-01-18T20:12:01.140
> 
> 标签：maven, jenkins, release-management

我需要在 jenkins 中为多个项目批量触发 maven 发布插件。它们不相互依赖，其中一些具有模块。

在 jenkins 中，您可以一个一个地发布它们，但我正在寻找一种方法来一次触发所有这些，并可能用相同的发布号标记所有这些。

例如

```
Project A 
Project B 
... 
Project N

Maven Release (some select query) 
Next Snapshot version (1.1.0-SNAPSHOT)
Next release version (1.0.0) 
```

然后项目 A..N 将与单个构建触发器一起发布.. 有什么可用的吗？

我知道多插件和批量插件，但它们似乎没有构建 Maven 版本。

/谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:01:20.777

我在看以下一个..似乎有帮助.. [https://dev.c-ware.de/confluence/display/PUBLIC/Developing+a+Jenkins+Plugin+for+the+Maven+Release+Plugin](https://dev.c-ware.de/confluence/display/PUBLIC/Developing+a+Jenkins+Plugin+for+the+Maven+Release+Plugin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-13T16:12:39.820

根据[此答案，您](https://stackoverflow.com/a/51306175/329496)可以构建作业和参数列表，然后并行运行作业：

```
stage('testing') {
  def jobs = [:]

  [1,2,3,4,5].each{
    i -> jobs["Test${i}"] = {
        build job: 'Test', 
        parameters: [string(name: 'theparam', value: "${i}")],
        quietPeriod: 2
    }
  }
  parallel jobs
} 
```

它使用数字作为名称，但您可以使用任意名称。

您可以变得更复杂并将要发布的作业列表下载到文件中并运行文件中命名的作业：

```
stage ('download release spec') {
    dir('${WORKSPACE}') {
        sh 'curl -LO https://my.server.com/path/$MASTER_RELEASE/jobs.txt'
    }
}
stage('run jobs in spec') {
    dir('${WORKSPACE}') {
        // read our one line of jobs to run and split it into an array of jobs to run
        def fileData = readFile('jobs.txt')
        def names = fileData.tokenize( ',' )

        // short hand for creating an empty map
        def jobs = [:]

        // https://stackoverflow.com/a/51306175/329496
        names.each{
            i -> jobs["${i}"] = {
                println "parallel build job: $i"
                build job: "${i}"
            }
        }
        parallel jobs
    }
} 
```

第一个代码片段显示了如何将参数传递给构建。Groovy 有一些用于合并列表的隐藏功能，例如[转置](http://skepticalhumorist.blogspot.com/2015/06/expression-oriented-programming-in.html)，可以轻松地将“jobs.txt”和“params.txt”合并到一个列表中，您可以运行该列表`.each`以提取作业名称及其参数。您可以将一些 sed、awk 或 python 放入第一阶段，以计算结构化发布文档中的所有文件。这样，您的构建可以下载格式良好的发布文档并将其转换为一堆作业和发布参数以运行。

# ruby-on-rails - 未找到 HTML2HAML 命令

> ID：14406899
> 
> 赞同：3
> 
> 时间：2013-01-18T20:12:11.537
> 
> 标签：ruby-on-rails, haml

我已经安装了 gems`"haml"`和`"haml-rails"`. 现在我想使用该命令将我的 erb 文件转换为 haml：

```
find . -name '*erb' | \
xargs ruby -e 'ARGV.each { |i| puts "html2haml -r #{i} #{i.sub(/erb$/,"haml")}"}' | \
bash 
```

但它抛出了这个错误：

html2haml：找不到命令

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T01:10:25.630

`html2haml`被从`haml`宝石转移到它自己的宝石中。

您可以在此处找到有关它的更多信息：

[https://github.com/haml/html2haml](https://github.com/haml/html2haml)

# php - google plus api invalid_request

> ID：14406905
> 
> 赞同：1
> 
> 时间：2013-01-18T20:12:37.137
> 
> 标签：php, oauth, google-api, google-plus

在过去的几天里，我一直在努力解决这个问题。我已经阅读了所有论坛，但仍然没有解决方案。任何帮助表示赞赏。

我一直在尝试使用刷新代码。（我不想重复使用过期的访问代码）。我的代码基于[http://www.jensbits.com/demos/ga/app/ga_app_oauth2_refreshtoken.txt](http://www.jensbits.com/demos/ga/app/ga_app_oauth2_refreshtoken.txt)。

代码如下：

```
if (isset($_GET['code'])) {
    $accessToken = get_oauth2_token($_REQUEST['code'],"online"); //refresh_token not fetched 
```

}

***//注意如果我将上面的行替换为$client->authenticate()，然后是$client->getAccessToken()，程序正在运行。但后来我没有得到刷新代码***

下面我从链接粘贴函数

```
function get_oauth2_token3($grantCode, $grantType) {
$redirect_uri = "xxxx";

$oauth2token_url = "https://accounts.google.com/o/oauth2/token";
$clienttoken_post = array(
    "client_id" => GCLIENT_ID,
    "client_secret" => GCLIENT_SECRET);

if ($grantType === "online") {
    $clienttoken_post["code"] = $grantCode;
    $clienttoken_post["redirect_uri"] = $redirect_uri;
    $clienttoken_post["grant_type"] = "authorization_code";
}

if ($grantType === "offline") {
    $clienttoken_post["refresh_token"] = $grantCode;
    $clienttoken_post["grant_type"] = "refresh_token";
}

$curl = curl_init($oauth2token_url);

curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $clienttoken_post);
curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

$json_response = curl_exec($curl);
curl_close($curl);

echo '<pre>';
print_r($grantCode);
print_r($json_response);
print_r(json_decode($json_response));
echo '</pre>'; 
```

**这里没有刷新令牌**

```
$authObj = json_decode($json_response);

//if offline access requested and granted, get refresh token
if (isset($authObj->refresh_token)) {
    global $refreshToken; 
```

**没有刷新令牌** $refreshToken = $authObj->refresh_token; }

```
$accessToken = $authObj->access_token;
return $accessToken; 
```

}

**修改后的代码**

```
if ($grantType === "offline") {
    $clienttoken_post["grant_type"] = "authorization_code";
    $clienttoken_post["response_type"] = "code";

    $clienttoken_post["scope"] = "https://www.googleapis.com/auth/plus.me";
    $clienttoken_post["redirect_uri"] = $redirect_uri;
} 
```

**还将网址从** [https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token)更改为[https://accounts.google.com/o/oauth2/auth](https://accounts.google.com/o/oauth2/auth)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:51:38.137

您需要请求令牌以使用“离线”而不是“在线”，以便取回刷新令牌。

请参阅[https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)了解幕后情况的概述，这将有助于理解 OAuth 2 离线流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:28:51.527

好吧，我认为您的代码是正确的。请检查执行步骤以验证是否执行了正确的代码。

如果它不是最新的，也请尝试更新您的 SDK。当我遇到这个问题时，我更新了 SDK 并且它工作了......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-01T15:34:09.583

此消息的另一个可能原因是 CLIENT_ID 或 CLIENT_SECRET 不正确

# c++ - 静态数组，C++

> ID：14406906
> 
> 赞同：-1
> 
> 时间：2013-01-18T20:12:38.197
> 
> 标签：c++, static

编辑：对不起这个问题，真的不知道我在问什么。Stackoverflow 不允许我删除这个问题，哈哈。如果mod看到这个，请删除。

这是我遇到问题的代码的“最小化”版本：

```
class Texture {
};
class MyClass {
    static Texture Image;
};

int main() {
    vector<MyClass> Zombies; // The array Increases in the program
    MyClass Player;

    return 0;
} 
```

所以我的问题似乎是这两个对象使用相同的纹理，我知道这是如何`static`工作的，但我不知道如何制作一个只覆盖每个数组的静态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:19:27.590

如果我理解正确，您需要为整个 Zombies 阵列提供一个纹理，而为 Player 提供另一个纹理。

没有办法自动执行此操作 - 您的选择是让类的所有实例共享一个`static`成员，或者让每个对象包含自己的成员。

如果您单独分解纹理并让对象包含引用或指针，则可以通过这种方式共享纹理对象。您可以在每个对象的构造函数中初始化引用或指针。

# c# - 在 GridView 中为每条记录（行）组织在 2 个不同的行中的列

> ID：14406909
> 
> 赞同：0
> 
> 时间：2013-01-18T20:12:47.090
> 
> 标签：c#, asp.net, gridview

我有一个比网页还大的 Gridview。所以我不知道我是否可以创建一个网格视图，其中包含一组列在 1 行中，其余列在上述列之下。这将适用于每一行。这是在 ASP.Net 中使用 c#。

例如：FirstName LastName Address City State Phone 等在第一个员工的第一行然后在 gridview 的同一行中，我想显示他的家庭详细信息或一些东西。

下一位员工也是如此

真的有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:46:43.390

不是一个漂亮的答案，但你可以有两个`GridViews`，一个在上面，一个在下面。处理第一个的[OnSelectedIndexChanged](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanged.aspx)以`GridView`在第二个中显示详细信息`GridView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:53:34.097

使用样式属性，设置宽度和高度（而不是使用 asp.net 属性）并添加 css 属性溢出：自动；

基本上，它应该是这样的

```
<div style="width:1000px; height: 800px; overflow:autol;">
//gridview here
</div> 
```

这将确保，如果您的 gridview 大于设置的高度和宽度，则会制作一个滚动条。不是显示 gridview 的最佳方式，而是我知道的最好的方式来显示对于屏幕尺寸来说太大的 gridview。此外，它会更容易上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T10:11:36.787

使用中继器：D

为每条记录放置一个主 div

例如，如果您想在 1 行中有 2 条记录，请使用 50% 宽度（在现实世界中为 49%），如果您需要 3 条记录，请使用 32%

# sql-server-2008 - 在存储过程中创建和使用同义词

> ID：14406910
> 
> 赞同：0
> 
> 时间：2013-01-18T20:13:05.777
> 
> 标签：sql-server-2008, synonym

我正在创建一个将从一个数据库调用但需要访问其他数据库中的表的存储过程。我们为每个客户提供不同的数据库。我正在尝试根据参数动态创建同义词：

```
DECLARE @SQL varchar(150)
SET @SQL = 'CREATE SYNONYM synATClaimMatched FOR ' + ... <params> ...
EXEC @SQL 
```

但这会导致以下错误：

> 消息 2812，级别 16，状态 62，第 3 行
> 找不到存储过程 ''。”。

有谁知道我为什么会收到这个错误以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:18:01.623

您的问题实际上与同义词或存储过程无关，只是动态 SQL 的语法无效。

利用：

```
EXEC sp_executesql @sql;

-- or

EXEC(@sql); 
```

虽然我更喜欢第一个。原因如下：

*   [要改掉的坏习惯：使用 EXEC() 代替 sp_executesql](https://sqlblog.org/2011/09/17/bad-habits-to-kick-using-exec-instead-of-sp_executesql)

# java - 使用 mysql 更新时出错

> ID：14406912
> 
> 赞同：0
> 
> 时间：2013-01-18T20:13:27.163
> 
> 标签：java, mysql, sql

我在更新数据时遇到问题。我使用preparedstatement将值传递给它：

```
"UPDATE Employee SET  " + name + "  =  ?  WHERE Employee_ID  =  ?" 
```

这是一个例外，“ `you have an error in your sql syntax`”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:33:43.840

在您给定的查询中， + **name** + 似乎只是**变量**，然后它必须与基础**表中的****列名**匹配，因为我已经采用了**Employee**。如果该列不存在，那么它将引发异常。

 ****```
"UPDATE Employee SET col_name(table column name) = ? Where Employee_Id = ?" 
```****

# c# - 如何获取 C# [HTTPPOST] 数据？

> ID：14406913
> 
> 赞同：2
> 
> 时间：2013-01-18T20:13:41.143
> 
> 标签：c#, asp.net-mvc-3

我浏览了大约 20 分钟，但无法弄清楚这一点。 **如何获取发布到我的 URL 的数据**？

我需要 FormCollection 参数吗？

PHP 使用的 print_r() 或 vardump() 函数是否有很好的替代方法？或者我只是依赖调试器中的断点？

```
 [IsLogged]
    [HttpPost]
    public JsonResult SaveRecord(FormCollection formCollection)
    {
        var disease = Convert.ToString(formCollection.GetValue("disease"));
        var link = Convert.ToString(formCollection.GetValue("link"));

        disease = Server.HtmlEncode(disease);
        link = Server.HtmlEncode(link);

        string[] output = new string[] { disease, link };
        return Json(output);

    } 
```

-- 编辑：客户端代码 --

```
<form method="post" action="@Url.Action("SaveRecord", "Dashboard")">

<div class="control-group">
    <label class="control-label">Disease</label>
    <div class="controls">
        <textarea name="disease" placeholder="Insert the details of your disease."></textarea>
    </div>
</div>

<div class="control-group">
    <label class="control-label">Remedy Link</label>
    <div class="controls">
        <input type="text" name="link" placeholder="Provide the link to your remedy." />
    </div>
</div>

<div class="control-group">
    <div class="controls">
        <input type="submit" value="Create Record" class="btn btn-primary" />
    </div>
</div>

</form> 
```

Cliff Notes：我才刚接触 MVC3 几天，所以请善待 :) 这种语言比我习惯的语言要先进得多，但它非常好用。

**这是我的最终解决方案！**

## 我想要的只是没有这些模型的 POST，我在做手动 SQL 的东西，而不是实体。

```
 [IsLogged]
    [HttpPost]
    public JsonResult SaveRecord()
    {

        var disease = Convert.ToString(Request["disease"]);
        var link = Convert.ToString(Request["link"]);

        disease = Server.HtmlEncode(disease);
        link = Server.HtmlEncode(link);

        string[] output = new string[] { disease, link };
        return Json(output);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:28:44.033

使用带有模型的强类型视图：

```
@model YourModel 
```

并在您的操作中为您的模型添加一个参数：

```
public JsonResult SaveRecord(YourModel model) 
```

有关完整示例，请参见[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T20:36:42.037

我最近才问自己。

您需要的是`Request.Form`，但它只会显示变量名称，而不是值，因为它是 NameValueCollection。为了让它显示在 Json 输出中，您需要将其转换为 Dictionary。

## 我的代码

```
/// <summary>
/// Serializes object to JSON format
/// </summary>
/// <param name="input">Object</param>
/// <returns>JSON string</returns>
public static string SerializeObject(Object input, bool debug = true)
{
    string json = JsonConvert.SerializeObject(input, Formatting.Indented, new JsonSerializerSettings() { ReferenceLoopHandling = ReferenceLoopHandling.Ignore, MaxDepth = 2 });
    if (debug)
    {
        return "<pre>" + json + "</pre>"; // In order to preview in browser
    }

    return json;
}

/// <summary>
/// Serializes Request.Form (NameValueCollection) to JSON format
/// </summary>
/// <param name="input">NameValueCollection</param>
/// <returns>JSON string</returns>
public static string SerializePostRequest(NameValueCollection post)
{
    var dict = new Dictionary<string, string>();
    foreach (string key in post.Keys)
    {
        dict.Add(key, post[key]);
    }

    return SerializeObject(dict);
} 
```

## 用法

```
[HttpPost]
public JsonResult SaveRecord(FormCollection formCollection)
{
    // Same as print_r($_POST) in php
    return Content(SerializePostRequest(Request.Form));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T20:38:13.037

杰鲁梅尔是对的。您需要创建一个强类型视图和一个模型，其中包含与表单输入的 name 属性匹配的属性名称，其定义如下：

```
public class YourModel
{
   public string Disease { get; set; }

   public string Link { get; set; }
} 
```

完成此操作后，模型绑定器将根据值提供者提供的结果创建强类型模型。这是[一个包含更多信息的链接](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)。

值提供者只是对 RouteValueDictionary、Request.Form、Request.Files、Request.QueryString 等对象的包装。MVC 人员巧妙地将这些东西抽象出来，因此您不必直接处理它。模型绑定器接收这些值并使用它来填充您的模型。

# android - 从 listView 显示多个值

> ID：14406917
> 
> 赞同：0
> 
> 时间：2013-01-18T20:13:53.493
> 
> 标签：android, sqlite, android-listview, sharedpreferences

我正在尝试在[SQLite](http://en.wikipedia.org/wiki/SQLite)数据库中搜索并在 ListView 中显示结果，但我无法获得我想要的结果。它返回类似于 {1222233333,0909098886} 的东西，这不是我想要的。结果应该是这样的，在 listView 上彼此下方：

```
1222233333

0909098886 
```

以下代码在 DBAdapter 中。

```
public ArrayList<String> getMeterNUmber1(String Date) throws SQLException
{
    String[] whereArgs = new String[]{Date};

    Cursor mCursor = db.rawQuery("SELECT MeterNumber FROM " + SCAN_TABLE + " WHERE  Date = ?",whereArgs);

    ArrayList<String> results = new ArrayList<String>();
    while (mCursor.moveToNext()) {
        results.add(mCursor.getString(0));
    }

    return results;
} 
```

在这个类中，我使用 sharedPreferences 来存储结果并将其传递给下一个类，如下所示：

```
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
SharedPreferences.Editor editor = settings.edit();
editor.putString("Shareusername",dbUser.getMeterNUmber1(ss).toStrin());
editor.commit(); 
```

这就是我试图在 ListView 中显示结果的方式：

```
String sharedUsername;
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(this);
sharedUsername = settings .getString("Shareusername","null");

String [] value =  new String[] {sharedUsername};

listView = (ListView) findViewById(R.id.mylist);

pojoArrayList = new ArrayList<PojoClass>();
customerListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,value);
listView.setAdapter(customerListAdapter); 
```

如果我做错了什么，请帮助我。

日志

```
01-18 21:17:44.405: E/AndroidRuntime(4249): FATAL EXCEPTION: main
01-18 21:17:44.405: E/AndroidRuntime(4249): java.lang.RuntimeException: Unable to start activity ComponentInfo{scann.barcode.scan/scann.barcode.scan.Result}: java.lang.NullPointerException
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.os.Looper.loop(Looper.java:137)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at java.lang.reflect.Method.invokeNative(Native Method)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at java.lang.reflect.Method.invoke(Method.java:511)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at dalvik.system.NativeStart.main(Native Method)
01-18 21:17:44.405: E/AndroidRuntime(4249): Caused by: java.lang.NullPointerException
01-18 21:17:44.405: E/AndroidRuntime(4249):     at scann.barcode.scan.DBAdapter.getMeterNUmber1(DBAdapter.java:272)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at scann.barcode.scan.Result.onCreate(Result.java:58)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.app.Activity.performCreate(Activity.java:5104)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-18 21:17:44.405: E/AndroidRuntime(4249):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-18 21:17:44.405: E/AndroidRuntime(4249):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:23:32.240

您需要将检索`SharedPreferences`到的字符串拆分为字符串数组，以在 ListView 中显示为：

```
String[] value=sharedUsername.split(",");

// Your code here... 
```

无需存储`ArrayList`，`SharedPreferences`只需将日期存储在 SharedPreferences 中即可：

```
SharedPreferences settings =
    PreferenceManager.getDefaultSharedPreferences(
        getApplicationContext());
SharedPreferences.Editor editor = settings.edit();
editor.putString("datestr",ss);
editor.commit(); 
```

现在，当您想在 ListView 中显示数据时，使用日期从数据库中检索数据：

```
String sharedUsername;
SharedPreferences settings =
    PreferenceManager.getDefaultSharedPreferences(this);
shareddate = settings .getString("datestr","null");

ArrayList<String> sharedUsernamearr=null;
if(shareddate !=null){
   sharedUsernamearr=dbUser.getMeterNUmber1(shareddate);
}
else{
  // Do your code here
}

listView = (ListView) findViewById(R.id.mylist);

pojoArrayList = new ArrayList<PojoClass>();
if(sharedUsernamearr !=null){
    customerListAdapter = new ArrayAdapter<String>(this,
                                  android.R.layout.simple_list_item_1,
                                  sharedUsernamearr);
    listView.setAdapter(customerListAdapter);
}
else{
    // Add your code here....
} 
```

# c# - 使 WSHttpBinding 服务可从外部连接

> ID：14406918
> 
> 赞同：1
> 
> 时间：2013-01-18T20:13:53.703
> 
> 标签：c#, wcf, wshttpbinding

我使用 WSHttpBinding 创建了 WCF 服务：

```
ServiceHost svh = new ServiceHost(typeof(MyService));
var httpLocation = "http://" + address + ":4041";
svh.AddServiceEndpoint(typeof(IMyService), new WSHttpBinding(SecurityMode.None), httpLocation);
svh.Open(); 
```

我已经在系统中注册了

```
netsh http add urlacl url=http://+:4041/ user=username 
```

当我尝试从 localhost 连接到它时，该服务可以正常工作。

但是当我把它放在另一台电脑上时（地址='localhost'或地址='ip-of-the-machine'），连接失败，出现以下异常：

```
There was no endpoint listening at http://192.168.44.128:4041/ that could accept 
the message. This is often caused by an incorrect address or SOAP action. See 
InnerException, if present, for more details. 
```

内部异常：

```
A connection attempt failed because the connected party did not properly respond 
after a period of time, or established connection failed because connected host
has failed to respond 192.168.44.128:4041 
```

我尝试将服务添加到防火墙，但没有帮助。

这里有什么问题？

**更新**

以下是来自 的相关条目`netstat -ano`。第一个是 http 端点，不能从外部连接，第二个是 net.tcp 端点，可以正常工作：

```
TCP    [::]:4041              [::]:0                 LISTENING       4
TCP    192.168.44.128:9939    0.0.0.0:0              LISTENING       2120 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:22:47.237

在命令行提示符下使用“NETSTAT -ano”验证您的服务正在侦听指定端口。选中后，请尝试从客户端框中 PING 您的服务框 IP。如果两者都成功，您很可能正在查看防火墙和/或网络交换机配置问题。

# kendo-ui - kendo.mobile.min.js 做模板编辑功能吗？

> ID：14406921
> 
> 赞同：-1
> 
> 时间：2013-01-18T20:14:01.993
> 
> 标签：kendo-ui

努力确定哪些 kendo UI 小部件/功能可与 kendomobile 一起使用 :(

有没有人让这个例子在移动设备上工作，特别是 editTemplate 段？

[http://demos.kendoui.c​​om/web/listview/editing.html](http://demos.kendoui.com/web/listview/editing.html)

我当前的代码看起来像这样

```
<script src="kendo/js/jquery.min.js"></script>
    <script src="kendo/js/kendo.mobile.min.js"></script>
    <link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />

<script>
                var eventDetail =  $("#eventDetail").kendoMobileListView({
                dataSource: dataSource,
                template: kendo.template($("#eventDetail-template").html()),
                editTemplate: kendo.template($("#update_eventDetail-template").html())
            }).delegate(".k-edit-button", "click", function(e) {
                eventDetail.edit($(this).closest(".fields"));
                e.preventDefault();
            }).delegate(".k-delete-button", "click", function(e) {
                eventDetail.remove($(this).closest(".product-view"));
                e.preventDefault();
            }).delegate(".k-update-button", "click", function(e) {
                eventDetail.save();
                e.preventDefault();
            }).delegate(".k-cancel-button", "click", function(e) {
                eventDetail.cancel();
                e.preventDefault();
            }).data("kendoMobileListView");

            $("#eventDetail").kendoMobileListView({

                pageable: true,
                selectable: true,
                navigatable: true,
                editable: true

            });
</script> 
```

然后在我看来

```
 <input type="button" class="k-edit-button" id="eventEditButton" style="width:30%" data-role="button" data-min="true" value="Edit" /> 
```

但控制台抛出：

```
Uncaught TypeError: Object [object Object] has no method 'edit' 
```

我可以假设 kendo.mobile.min.js 没有编辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:02:03.920

*努力确定哪些 kendo UI 小部件/功能可与 kendomobile 配合使用*

所有框架功能，如模板、MVVM、DataSource、Validator 等，都可以与 KendoUI Mobile 配合使用。

*我可以假设 kendo.mobile.min.js 没有编辑吗？*

是的，Mobile ListView 没有像 Web ListView 那样的内置编辑功能（它们是两个不同的小部件）。如果您想在 Mobile ListView 中编辑数据，请考虑使用 MVVM 和 DataSource 的 API 方法。从[这里](http://www.kendoui.com/code-library/mobile/listview/listview---mvvm-crud-operations.aspx)您可以下载演示该方法的示例项目。

# php - 防止在 Codeigniter 中显示默认的 CSRF 错误页面

> ID：14406922
> 
> 赞同：5
> 
> 时间：2013-01-18T20:14:07.383
> 
> 标签：php, codeigniter, csrf

我不喜欢 CSRF 令牌过期时 CI 默认的行为方式。例如，当用户长时间显示登录表单并最终提交时，就会出现这个带有错误消息的丑陋空白页面。

我询问了解决这个问题的方法，有人告诉我扩展**Security**类，并覆盖它的**csrf_show_error()**方法，如下所示：

```
class MY_Security extends CI_Security {

    public function __construct()
    {
        parent::__construct();

    }

    public function csrf_show_error()
    {
        // comment out the default action
        // show_error('The action you have requested is not allowed.');

        // add redirect actions here
        // I'd like to use some helper function here like redirect()

    }

} 
```

问题是我不能，或者我不知道如何从这里访问库和帮助程序以执行重定向。我无法在此处使用**get_instance()**函数，因为我收到错误消息。那么，我还能做什么？或者有没有其他更好的选择来防止显示这个错误页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T22:37:56.280

像这样的核心类`CI_Security`在帮助程序和库之前实例化 - 无法像在 CI 应用程序中的其他地方那样利用这些功能。

您必须使用原生 PHP 函数来复制类中的功能，`header()`如果您只是想重定向到更漂亮的错误页面，这并不难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-17T15:22:43.087

一种方法是扩展`Security`类以重定向到同一页面。

CodeIgniter 用户指南 -[扩展核心类](https://ellislab.com/codeigniter/user-guide/general/core_classes.html)

[页面打开后如何处理过期的 CSRF 令牌的](http://www.johnkieken.com/how-to-handle-an-expired-csrf-token-after-a-page-is-left-open/)很好的解释

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-27T18:03:23.093

对于那些想要更改页面视图的人，您可以`error_general.php`在`/application/errors/error_general.php`. CodeIgniter 使用该文件来显示一般错误，例如 CSRF 错误。

问候 ：）。

# php - PHP 版本从 4.4 更新到 5.3.6 破坏了网站

> ID：14406925
> 
> 赞同：1
> 
> 时间：2013-01-18T20:14:21.143
> 
> 标签：php, migration, php4

不知何故，当将站点移动到较新的服务器时，php 代码损坏了。我们确实先用一个临时站点对其进行了测试，但它仍然坏了。

列表的所有动态链接都不再起作用。我有一个下一步按钮，除了更改 url 之外什么都不做。单击下一步时，它仍显示第 1 页，共 5 页。我确实知道有些事情是对的，因为在此页面的顶部，它获取记录数并从数据库中显示它。

我听说这段代码很旧，并且正在制作一个新站点，所以我需要做的就是修复错误。我不需要重新做整个页面，因为这会浪费时间。无论如何，他们将在接下来的几个月内取消它。

我更像是一个 .NET 开发人员，所以我什至不确定如何对 PHP 站点进行错误检查。这是被破坏的代码和定义这些变量的函数。

```
<?php
echo "<br>\n";
echo "<strong>";
if($page_num > 1) {
    $prev_page = $cur_page - 1;
    echo "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
    echo "<A HREF=\"$PHP_SELF?action=list_records&sort_order=$org_sort_order&order_by=$order_by&cur_page=$prev_page$search_link\">&lt;&lt; Previous</A>\n";
 }
if($page_num <  $total_num_page) {
    $next_page = $cur_page + 1;
    $last_page = $total_num_page - 1;
    echo "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
    echo "<A HREF=\"$PHP_SELF?action=list_records&sort_order=$org_sort_order&order_by=$order_by&cur_page=$next_page$search_link\">Next &gt;&gt;</A>";
 }
 echo "</strong>";
?>

function list_records() {global $tbl_units, $tbl_members;
global $unit_array, $location_array;
global $default_sort_order, $default_order_by, $records_per_page;
global $sort_order, $order_by, $cur_page, $search_db, $search_txt, $search_link;
global $PHP_SELF;

$query = "SELECT count(*) FROM $tbl_units 
                    INNER JOIN $tbl_members ON   $tbl_units.memberid = $tbl_members.username 
                    WHERE $tbl_members.status = 'Active' AND $tbl_units.status = 'Available' $search_db";
$result = mysql_query($query);
if(!$result) error_message(sql_error());

$query_data = mysql_fetch_row($result);
$total_num_user = $query_data[0];
$page_num = $cur_page + 1;
$total_num_page = $last_page_num 
              = ceil($total_num_user/$records_per_page);

if($total_num_user > 0) {
    echo "<CENTER><H3>$total_num_user unit(s) found. ";
    echo "Displaying the page $page_num out of $last_page_num.</H3></CENTER>\n";
} else {
    echo "<CENTER><div class='vacancy'>No vacancies at this time!</div></CENTER>\n";
}

if(!empty($search_txt)) echo $search_txt;

if(empty($order_by)) {
    $order_by_str = "ORDER BY $default_order_by";
    $order_by = $default_order_by;
}
else $order_by_str = "ORDER BY $order_by";

if(empty($sort_order)) {
    $sort_order_str = $org_sort_order = $default_sort_order;
    $hold_order = $sort_order;
    $sort_order = 'DESC';
}
else {
    $sort_order_str = $org_sort_order = $sort_order;
    $hold_order = $sort_order;
    if($sort_order == 'DESC') $sort_order = 'ASC';
    else $sort_order = 'DESC';
}

if(empty($cur_page)) {
    $cur_page = 0;
}

$limit_str = "LIMIT ". $cur_page * $records_per_page . ", $records_per_page";
$query = "SELECT $tbl_units.* FROM $tbl_units 
                    INNER JOIN $tbl_members ON $tbl_units.memberid = $tbl_members.username 
                    WHERE $tbl_members.status = 'Active' AND $tbl_units.status = 'Available' $search_db 
                    $order_by_str $sort_order_str $limit_str";
$result = mysql_query($query);   
if(!$result) error_message(sql_error()); 
```

如果有人可以帮助我弄清楚如何让我的链接正常工作，我将不胜感激！我在这里和那里尝试了几件事，但我无法让页面重定向到下一页结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:56:40.057

用你会理解的术语来表达：这就像将一个 .NET 1.0 站点放入一个 .NET 4.5 环境中。[可能更糟]

一些破坏它的东西：

1.  IIRC`$PHP_SELF`很久以前就被弃用了，`$_SERVER['PHP_SELF']`应该是等效的，但除非你喜欢 XSS 攻击，否则*不应该这样使用。*
2.  所有这些全局变量声明让我很难过。
3.  #2 中的所有内容和生成的 URL 让我相信这个脚本是用 . 创建的`register_globals = On`，这是非常不安全的，应该修复。[它`Off`至少从 5.0 开始默认，并且*永远不*应该打开。] 使用 $_GET 和/或 $_POST 超全局数组并***验证您的输入***。
4.  除了 mysql_* 函数正在被弃用之外，您使用它们的方式让您对 SQL 注入持开放态度。使用 mysqli 或 PDO 的参数化查询将帮助您避免这种情况。

修复这些问题将使页面正常工作，但实际上你应该让某人从头开始重写它。即使对于 PHP 4，这段代码也让我感到很困惑。

# php - 如何在 CodeIgniter 中执行“while fetch assoc”？

> ID：14406926
> 
> 赞同：5
> 
> 时间：2013-01-18T20:14:27.127
> 
> 标签：php, mysql, codeigniter

什么是等效的使代码点火器获取并写入所有变量...

这就是我通常会做的事情：

```
$get = mysql_query("SELECT * FROM aTable");

while($row = mysql_fetch_assoc) {
echo $row['someContent'];
} 
```

我将如何在 codeigniter 中执行此操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T20:20:18.820

运行查询后，使用其中一个`->query()`或“活动记录”类' `->get()`，使用该`result_array`方法。

```
$query = $this->db->query("SELECT * FROM aTable");

foreach($query->result_array() as $row){
    echo $row['someContent'];
} 
```

文档：[https ://www.codeigniter.com/user_guide/database/results.html](https://www.codeigniter.com/user_guide/database/results.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-12T12:08:55.493

在 CodeIgniter 3 中，对您的情况更好的方法是[unbuffered_row](https://www.codeigniter.com/user_guide/database/results.html?highlight=unbuffered_row#CI_DB_result::unbuffered_row)

```
$query = $this->db->query("SELECT * FROM aTable");

while($row = $this->db->unbuffered_row('array')) {
    echo $row['someContent'];
} 
```

**注意：**使用此方法从数据库中检索大型集合将比@Rocket Hazmat 版本更有效。这是因为数据是逐行检索的，同时`$query->result_array`将所有内容都存储在内存中。

# javascript - 如何控制来自不同js文件的多个ajax请求

> ID：14406932
> 
> 赞同：0
> 
> 时间：2013-01-18T20:15:15.793
> 
> 标签：javascript, jquery, ajax, request, joomla2.5

我正在使用 joomla 来制作一个组件和几个与之相关的模块。我有几个关于多个 ajax 请求的红色帖子。但是我没有找到任何关于来自不同 js 文件的 ajax 请求的帖子。我有一个模块，它以更简单的方式像 facebooks notificatins 一样工作。当页面被加载时，它会每隔预定的秒数发送一次请求，以控制用户是否有来自另一个人的新报价。如果它找到任何它会在通知按钮下方显示一个消息气泡。当用户单击按钮时，它会触发另一个请求，以将优惠拉到像 facebook 这样的 opend 小层中的列表中。我通过创建一个像 ajax 这样的全局变量来控制请求的排列，并用值 1 进行初始化。如果请求开始，那么 0 将分配给 var ajax。如果它返回成功，它会在每次请求之前再次返回 1，它会检查 var ajax 的值以启动。但是现在我需要创建另一个模块来刷新每个预定义秒的内容，以将新内容列表从数据库中带入。或者在组件中，我需要通过 ajax 为用户提供的收件箱和发件箱进行分页。如何控制所有这些。没有崩溃。我虽然在这里插入了一些代码，但是行非常多，除了我告诉过的之外，不会告诉任何事情。

我会感谢他/她提出我的问题。祝你有美好的一天。

* * *

```
 var checkInt = setInterval(checkUnreadeds,3000);
var ajax = 1;
function checkUnreadeds(){
    if(ajax == 1){
        $mc.ajax({
                    type: 'POST',
                    url:  'url-here',
                    data: 'task=getUnreadeds&tmpl=component&member='+$mc("#drapanelbutts").attr('member'),
                    success: function(data,status, xh) {            
                                var ex = data;                                              
                                ex = ex.split("|");
                                    if(ex[0] !=0){
                                        $mc("#offerCount").html(ex[0]).css('display','block');
                                    }
                                    if(ex[1] !=0){
                                        $mc("#messageCount").html(ex[1]).css('display','block');
                                    }   
                                ajax = 1;

                             }
        });
    }

} 
```

这是用于通知的代码表单模块，但我应该编写一些代码，这些代码应该重复更新模块内容的请求，在上面的某个时间间隔内，但如何防止请求崩溃。

# iphone - 在 iOS 应用程序和服务器之间交换实时数据

> ID：14406933
> 
> 赞同：-1
> 
> 时间：2013-01-18T20:15:21.530
> 
> 标签：iphone, ios, tcp, ip

如何在 iPhone 和主机之间实现双向 IP/TCP 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:07:28.497

TCP/IP 通信是双向通信。

是的：服务器必须是监听连接的那个，客户端必须重新建立连接以防连接丢失。

但是在连接期间，客户端可以将消息发送到服务器（在需要时），反之亦然。

为了保持连接处于活动状态（它可以在一段时间内处于非活动状态后被终止），您可以定期发送一些虚拟（keepalive）字符串：通常从客户端到服务器，但它可以反过来。

由于您已经知道如何在 iOS 客户端和服务器之间建立连接（它可以基于 PC 或其他），并且您知道如何从客户端发送字符串到服务器 - 您只需要实现服务器到客户端的通信。

究竟如何做到这一点取决于您在 iOS 和 PC 服务器中使用的套接字类型。

Cesare Rocchi 的一个很好的教程可以在这里找到：[如何创建基于套接字的 iPhone 应用程序和服务器](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

还有一个非常有用且有据可查的 Cocoa 套接字包装器，名为[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)，来自 Robbie Hanson 在 GitHub 上。

**编辑：**

在您的情况下，您通常会在一侧至少有一个基于套接字的客户端。客户端负责在连接丢失的情况下尝试重新建立连接（或第一次建立连接）。

另一方面，您有一个*侦听*器套接字 - 一个侦听新连接的套接字。对于每个新连接（来自客户端），它都会生成一个新套接字，然后您可以从那里处理两种方式的通信。所以客户端->服务器仅在建立连接期间是必需的。

# asp.net-mvc - 将@Html.DisplayFor 放入@Html.ActionLink

> ID：14406934
> 
> 赞同：5
> 
> 时间：2013-01-18T20:15:21.843
> 
> 标签：asp.net-mvc, razor, html.actionlink

在 asp.net mvc 中，我有一个名为 index 的视图，它将一个 html 表显示为网格。假设这是我的 html 表：

```
<table>
<tr>
    <th>
        Caption
    </th>
    <th></th>
</tr>
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.Caption)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.CityId }) |
        @Html.ActionLink("Details", "Details", new { id=item.CityId }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.CityId }) |
    </td>
</tr>
}
</table> 
```

现在我想`@Html.DisplayFor(modelItem => item.Caption)`输入`@Html.ActionLink("Edit", "Edit", new { id=item.CityId })`

但我从 mvc 给出一个错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T20:29:31.393

只需使用正确的方法重载，如下所示：

```
@Html.ActionLink(item.Caption, "Edit", "Edit", new { id=item.CityId }, null) 
```

# php - Google Groups - Zend API - 设置访问级别

> ID：14406938
> 
> 赞同：0
> 
> 时间：2013-01-18T20:15:27.600
> 
> 标签：php, zend-framework, google-groups

我正在关注的指南在这里 -> [http://framework.zend.com/manual/1.12/en/zend.gdata.gapps.html#zend.gdata.gapps.groups.creating](http://framework.zend.com/manual/1.12/en/zend.gdata.gapps.html#zend.gdata.gapps.groups.creating)。我正在尝试创建一个组并为其分配一个“访问级别”，但没有关于可接受值的文档。

这是我写的脚本：

```
<?php

// This should point to the exact path of the file being imported
require_once '/Users/myuser/Source/Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Gapps');

if (count($argv) == 1) {
    echo "Usage: ".$argv[0]." \"group id\" \"group name\" \"description\" \"email permission\"\n";
    die;
}

// Arguments passed in on the command line
$groupId = $argv[1];
$groupName = $argv[2];
$groupDesc = null;
if (count($argv) > 3) {
    $groupDesc = $argv[3];
}
$groupPermission = null;
if (count($argv) > 4) {
    $groupPermission = $argv[4];
}

// Set this to your gapps email/pass
$email = "test@domain.com";
$password = "foobar";
// Gapps domain
$domain = "domain.com";

$client = Zend_Gdata_ClientLogin::getHttpClient($email, $password, Zend_Gdata_Gapps::AUTH_SERVICE_NAME);
$gdata = new Zend_Gdata_Gapps($client, $domain);

$entry = $gdata->createGroup($groupId, $groupName, $groupDesc, $groupPermission);
?> 
```

Gapps.php文件中“createGroup”的描述如下：

```
/**
 * Create a new group.
 * @param string $groupId A unique identifier for the group
 * @param string $groupName The name of the group
 * @param string $description A description of the group
 * @param string $emailPermission The subscription permission of the group
 * @return Zend_Gdata_Gapps_GroupEntry The group entry as created on the server.
 * 
```

如果您在“角色和权限”下查看 Google Apps，则定义了 4 个访问级别：团队、仅公告、受限、自定义。我无法在 emailPermission 字段中发送成功将组设置为“自定义”以外的任何值的值。到目前为止，我可以发送“所有者”或“成员”，它选择“自定义”的访问级别，并在“向群组发送电子邮件”旁边选中“所有者”或“成员”。

有人熟悉这样做吗？仅供参考，您必须拥有超级管理员权限并启用配置 api 才能针对您的 gapps 域执行此脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T01:03:48.750

可接受的值为所有者、成员、域和任何人。请注意，由于此 API 调用与 Provisioning API 2.0 一起发布，Google Groups 获得了更细粒度的权限，其中一些权限可通过[Groups Settings API](https://developers.google.com/google-apps/groups-settings/)访问。如果您希望自定义群组权限，超出基本所有者、成员、域和任何人的默认设置，请使用群组设置 API。

# c - 为什么我的 while 循环不在 C 中重复？

> ID：14406941
> 
> 赞同：0
> 
> 时间：2013-01-18T20:15:39.443
> 
> 标签：c, loops, while-loop, cs50

我刚刚进入C，我遇到了一些麻烦。我花了很长时间弄清楚为什么这个 while 循环不会重复。我在 JavaScript 中做了同样的循环，它重复了正确的输出。[http://jsfiddle.net/rFghh/](http://jsfiddle.net/rFghh/)

如果我使用`while (cents >= 25)`，那么终端会打印起始硬币并挂起只是闪烁。如果我使用`<=25`（如下）它会打印一次迭代。关于我做错了什么有什么想法吗？

```
/**
 * Greedy, given a change amount, figures out the min number of coins needed
 */

#include <stdio.h>
#include <cs50.h>
#include <math.h>

int main(int argc, char const *argv[])
{
    // declare variables
    int cents = 0;
    int coins = 0;

    // ask user for amount of money, accepts a float value
    // convert input to cents and round to nearest int
    printf("O hai! ");
    do 
    {
        printf("How much change is owed? ");
        cents = round(100 * GetFloat());
    // if input is negative then ask again
    } while (cents <= 0);

    printf("Starting Cents: %d, coins are: %d\n", cents, coins);

    // Check if you can use a quarter
    while (cents <= 25);
    {
        printf("Cents before decrement: %d\n", cents);
        cents = cents - 25;
        printf("Cents after decrement: %d\n", cents);
        coins = coins + 1;
    }

    printf("FINAL Cents: %d, coins are: %d\n", cents, coins);

    return 0;
}

jharvard@appliance (~/cs50/Week_1/pset1): make greedy && ./greedy
clang -ggdb3 -O0 -std=c99 -Wall -Werror    greedy.c  -lcs50 -lm -o greedy
O hai! How much change is owed? 1.25
Starting Cents: 125, coins are: 0
Cents before decrement: 125
Cents after decrement: 100
FINAL Cents: 100, coins are: 1
jharvard@appliance (~/cs50/Week_1/pset1): 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T20:17:24.433

代码没有做你认为它做的事情。这一行：

```
while (cents <= 25);
{ ::: } 
```

相当于：

```
while (cents <= 25)
{
    ;
}
{ ::: } 
```

所以这将永远迭代执行一个永远不会改变的*空语句*`cents`。通过删除分号并重新评估您的逻辑来修复它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T20:17:11.327

`while`语句末尾有一个分号：-

```
while (cents <= 25);  <-- Here's the semi-colon. Remove it. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T20:27:04.183

您的季度支票需要修正。这实际上应该是一个单独的函数，但快速修复是：

```
while (cents >= 25)  //should be greater than or equal to and get rid of semicolon 
{
    printf("Cents before decrement: %d\n", cents);
    cents = cents - 25;
    printf("Cents after decrement: %d\n", cents);
    coins++;
} 
```

# vim - 根据目录设置 Vim 的 shiftwidth 和 tabstop

> ID：14406944
> 
> 赞同：13
> 
> 时间：2013-01-18T20:15:47.920
> 
> 标签：vim, coding-style

我有一个项目，我目前正在处理其中的编码标准是使用 2 个空格缩进。然而，在其他项目中，我使用 4 个空格缩进。

有没有一种简单的方法来告诉 vim 某个目录中的所有文件都应该有 2 个空格的制表位？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-18T20:31:09.257

使用`autocmd`与目录匹配的 并设置您需要的任何选项：

```
au BufRead,BufNewFile,BufEnter /path/to/dir/* setlocal ts=2 sts=2 sw=2 
```

这也适用于子目录中的文件。

正如 Ingo Karkat 指出的那样，这些命令应该使用`setlocal`而不是`set`特定于缓冲区。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T00:27:39.917

可敬的 Tim Pope 刚刚发布了一个名为[Sleuth](http://github.com/tpope/vim-sleuth)的插件，它根据当前文件中使用的内容（或者，令人难以置信的是，如果它是一个新缓冲区，则根据附近的文件）自动确定 shiftwidth 和 tabstop（以及其他缓冲区选项）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T20:30:35.690

如果您不担心这些项目目录异常的集中配置，`:autocmd`Nikita Kouevda 的解决方案简单而有效。另一方面，如果您希望将特定配置存储在项目中（并且不想通过模式将其嵌入所有文件中），您有以下两个选项：

如果你总是从项目根目录启动 Vim，内置的

```
:set exrc 
```

`.vimrc`允许从当前目录读取文件。您可以将`:set ts=2 sw=2 et`命令放在那里。

否则，您需要插件的帮助；vim.org 上有几个；我可以推荐[localrc 插件](http://www.vim.org/scripts/script.php?script_id=3393)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T21:29:31.200

Some time ago I wrote plugin exactly for these needs: [Vimprj](http://goo.gl/efUVT). This is a plugin for managing options for different projects.

One guy even wrote [nice article](http://goo.gl/87csV) about it.

Shortly: you need to create `.vimprj` file at the root of your project (or `.vimprj` directory with some `.vim` files), and every time you switch to this project, this file or directory `.vimprj` will be sourced.

Read plugin page for details, and feel free to ask me if you have any problems with this plugin.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-19T11:45:49.703

**embear/vim-localvimrc** [https://github.com/embear/vim-localvimrc](https://github.com/embear/vim-localvimrc)运行良好。

我创建了一个`.lvimrc`文件，其中包含：

```
setlocal noexpandtab
setlocal shiftwidth=8
setlocal tabstop=8 
```

对于包含. `autocmd FileType`_`.vimrc``.lvimrc`

插件源`.lvimrc`它在父目录中找到的每一个，根端优先，因此越深`.lvimrc`优先级越高。

**如果您控制源代码树， EditorConfig** [https://github.com/editorconfig/editorconfig-vim](https://github.com/editorconfig/editorconfig-vim)是一个很好的选择，因为它包含与编辑器无关的设置（和 Vim 实现），每个人都必须使用的设置。

# php - 如何将从数据库中检索到的链接名称传递到php中的另一个页面

> ID：14406950
> 
> 赞同：0
> 
> 时间：2013-01-18T20:16:12.540
> 
> 标签：php, mysql

我喜欢将`$row['name']`数据库中的值传递到另一个页面 show.php ... Hlp

```
<a href="show.php" name="<?php $ref=$row['name']; ?>">
<?php echo $row['id'];echo '.'.$row['name'];?>
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:21:47.643

好吧，如果您在while条件内，即

```
while ($row = mysql_fetch_array($result)) {

echo $row['username']; //outputs a username

echo '<a href="http:site.com/page.php?id='. $row['username']. '" >' .$row['username']. '</a>';
} 
```

或者只是您可以将获取的结果分配给一个变量并将其包含在这样的 url 中：

```
$username = $row['username'];

echo '<a href="http://www.site.com/page.php?id=' . $username. '">' . $username. '</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:22:12.827

```
<a href="show.php?ref=<?php echo $row['name']; ?>">
<?php echo $row['id'];echo '.'.$row['name'];?>
</a> 
```

在 show.php

```
echo $_GET['ref'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T20:25:52.617

```
echo '<a href="show.php?name='.$row['name'].'">'.$row['name'].'</a>'; 
```

从那里，在 show.php 上获取名称

```
$result = mysql_query("SELECT * FROM table WHERE name = " . $_GET['name']);
while($row = mysql_fetch_array($result)){
echo $row['name'];
// echo any fields you want to display
} 
```

这只是一个指导方针。您对 sql 注入持开放态度。

# vba - 检查属性是否可以设置为不同的值或只读

> ID：14406952
> 
> 赞同：0
> 
> 时间：2013-01-18T20:16:19.707
> 
> 标签：vba

有没有办法在 VBA 中确定对象的属性是否可以设置为不同的值？

比如检查属性是可写的还是不是只读的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:32:32.837

检查属性的最简单方法是在 VBA 编辑器中使用光标突出显示它，然后按 Shift + F2。这将在对象浏览器中显示它的定义，它会在那里告诉你它是否是只读的。

以下屏幕截图是该`workbook.worksheets.count`属性的。

![在此处输入图像描述](../Images/82b5f2b62e4575d0058f8fa427409bb7.png)

您可以通过暂停尝试设置属性的错误然后检查属性来在代码中检查只读。IE

```
iCountCheck = ThisWorkbook.Worksheets.Count
On Error Resume Next
ThisWorkbook.Worksheets.Count = 123   'Something that doesn't already equal iCountCheck
On Error Goto 0

If iCountCheck <> 123
   MsgBox "This is not read only"
Else
   MsgBox "This is read only"
End If 
```

# list - 如何在不使用TCL循环的情况下检查列表的所有元素是否是特定元素

> ID：14406960
> 
> 赞同：0
> 
> 时间：2013-01-18T20:17:04.010
> 
> 标签：list, search, tcl

我有一个清单 { Desg Desg Desg Desg Desg Desg}

我想看看列表中除了这些之外是否还有其他元素。我也不想运行一个循环。像 lcontain 这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T21:42:43.127

采用`expr {[lsearch ... -not $list $pattern] >= 0}`

# ruby-on-rails - Rails 2.3 - 在模型中处理 ActiveRecord::StatementInvalid

> ID：14406962
> 
> 赞同：0
> 
> 时间：2013-01-18T20:17:16.103
> 
> 标签：ruby-on-rails, ruby, callback, deadlock

我的 Rails 应用程序中的一个模型开始抛出 ActiveRecord::StatementInvalid 并显示以下消息：“Mysql::Error: Deadlock found when trying to get lock; try restarting transaction ...” 我一开始处理这个问题的方式是：

```
myModel.update/save/update_all 
```

我将它包装起来以捕获该异常，例如：

```
begin
  myModel.update_all(..) 
rescue Exception => e
  if e.message.include?("Deadlock")
    retry
  end
end 
```

这样做的问题是，我必须在有更新/保存的任何地方拯救这个异常，并且我必须小心重试会做两次事情，甚至更糟的是进入无限循环。我可以在模型级别的一个位置解决这个问题，例如在回调中吗？似乎 after_save 或 after_update 不会起作用，因为此时还没有抛出异常。我在 Rails 2.3.8 中，所以 after_commit 或 after_rollback 对我来说不是一个选项。有任何想法吗？谢谢！ps：我知道有一些方法可以避免或减少mysql出现死锁的机会，但我可以在死锁发生后重新启动事务，因为在我的情况下，死锁不会经常发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:25:17.907

也许您可以在 ApplicationController 中尝试“rescue_from”，如下所示：

```
class ApplicationController < ActionController::Base

    rescue_from ActiveRecord::StatementInvalid, :with => :my_custom_error_handler

    protected

    def my_custom_error_handler(exception)
      ...
    end
end 
```

但我不确定它是否会正确处理您的重试。值得一试。让我知道！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:08:30.803

我想我会用这个 gem 来解决死锁问题 [https://github.com/mperham/deadlock_retry](https://github.com/mperham/deadlock_retry)

# google-apps-script - 使用谷歌应用脚 本（可能还有驱动 API）上传带有 OCR 的 PDF

> ID：14406966
> 
> 赞同：1
> 
> 时间：2013-01-18T20:17:23.570
> 
> 标签：google-apps-script, google-drive-api, ocr

我正在使用 Google Apps 脚本从网络上传 pdf，但我想在自动执行 OCR 的同时上传它。到目前为止，我可以上传它，但我不知道如何对其进行 OCR。

```
 var link = "http://ilwu13.com/dispatches/" ;
  var date_str = "011813" ; //My code creates this based on today's date
  var link_end = "_DF.pdf" ;

  link = link + date_str + linkend ;

  var urlfetch = UrlFetchApp.fetch(link) ;
  var fileBlob = urlfetch.getBlob();
  var new_gdoc = DocsList.createFile(fileBlob) ; 
```

我知道这个问题已经在这篇文章中得到了回答，[https://developers.google.com/google-apps/documents-list/#uploading_documents_using_optical_character_recognition_ocr](https://developers.google.com/google-apps/documents-list/#uploading_documents_using_optical_character_recognition_ocr)，但是“Google Documents List API 已被正式弃用”发布后。

已弃用的 DocsList API 将工作到 2015 年，但我想要一个更稳定的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:57:25.827

这可以通过 Drive API 实现。看[`drive.files.insert`](https://developers.google.com/drive/v2/reference/files/insert)方法特别注意`ocr`和`ocrLanguage`参数。

# tdd - 如何使用 mstest 实现自动化？

> ID：14406969
> 
> 赞同：0
> 
> 时间：2013-01-18T20:17:32.300
> 
> 标签：tdd, mstest, extreme-programming

我真的很想使用 Visual Studio 2012实现***测试驱动的开发。***

我想使用[http://tfs.visualstudio.com](http://tfs.visualstudio.com)运行自动化单元测试，因为它们提供了一个构建服务器来运行我的测试。

当我上传我的代码时，所有测试都失败了，因为他们正在寻找我的数据库。

**测试自动化**的最佳实践是什么？

我应该使用 sql server compact 还是真正的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:58:40.540

我建议您查看**存储库设计模式**，以使您的测试独立于您的存储机制。这样您就可以在没有实际数据库的情况下运行测试。

存储库设计模式允许在存储机制之间轻松切换。这样，当您的代码部署在生产环境中时，您将能够使用真实的数据库，并且您将能够使用模拟或内存存储进行测试。我鼓励您查看 IoC 框架，以便在不同的存储库之间轻松切换。IoC（**控制反转或依赖反转**）是学习 TDD 时经常学习的一种技术，因为它使您的代码更易于测试。

这将有很多好处：

*   您的测试将运行得更快，因为您不需要连接到数据库

*   它们将更容易维护，因为您不必担心模式、在测试之间拆除数据库、创建测试数据......

*   存储库模式将允许您在代码中应用一些**关注点分离**（参见**单一职责原则**），因为我假设现在您的代码与 Sql Server 紧密耦合（因为没有数据库就无法运行测试） .

*   您将能够轻松更改存储机制。

TDD 的内在目标是鼓励良好的代码设计。我建议您查看**SOLID 原则**作为指南和**FIRST 原则**，以进行设计良好的单元测试。

# javascript - window.open 在地理定位成功回调中不起作用

> ID：14406970
> 
> 赞同：3
> 
> 时间：2013-01-18T20:17:34.690
> 
> 标签：javascript, google-chrome, popup

我在一个页面上有一个链接，该链接应该打开一个新选项卡，并在 Google 地图上显示从用户位置通过 HTML5 Geolocation 到 B 点的行车路线。我已经设置了一个 jsbin，说明我是如何尝试实现这一点的。这是链接：[JSBIN](http://jsbin.com/ikotir/2/)。

我想这与我尝试在回调中调用 window.open 有关吗？如果我在桌面上尝试代码，它会尝试打开一个新窗口，但我想要一个新标签。我已经尝试添加“_blank”，但它没有解决问题......而且这应该适用于用户可能运行 iOS 和 Mobile Safari 的响应式/移动布局，当然你不能打开一个弹出窗口那里...

提前致谢！

# events - jQuery off() 实现不起作用

> ID：14406971
> 
> 赞同：0
> 
> 时间：2013-01-18T20:17:35.063
> 
> 标签：events, event-handling, jquery

我在这里做错了什么？我阅读了文档，但我似乎无法弄清楚为什么这不能按预期工作。

```
 $(".img-edit-button").on("click", function () {
       if(self.elementMenuOpen === false){
           self.showImageMenu();
           self.elementMenuOpen = true;
       }else{
           self.hideImageMenu();
           self.elementMenuOpen = false;
       }
}); 
```

然后，我用`off()`

```
$(".img-edit-button").off(); 
```

但是即使在使用之后，事件似乎也加倍了，`.off()`我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T20:37:50.543

这直接来自[http://api.jquery.com/off/](http://api.jquery.com/off/) “off() 方法删除了附加到 .on() 的事件处理程序”。所以如果你在 off 被调用后绑定一个 click 事件，它们会继续被执行。我猜你是多次重新绑定到点击事件。

一种解决方案是将事件绑定到父级，**仅一次**，因此您不必每次从 dom 添加/删除相关元素时都重新绑定。我知道这可能会有一些性能问题，但是让你的父类尽可能深入 dom 将有助于解决这个问题。

```
$(".someparentclass").on('click','.img-edit-button',function(){}); 
```

或者，如果您想重新绑定，您可以使用以下内容：

```
$(".img-edit-button").off().on(function(){}); 
```

[http://jsfiddle.net/SEndX/3/](http://jsfiddle.net/SEndX/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:26:35.640

您可以尝试使用一些“切换”功能来显示和隐藏菜单。您可以在[此处](http://api.jquery.com/?s=toggle)找到选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T21:49:12.700

老但只是想有人可能仍然会遇到这个。如果你要取消它，那么如果没有分配任何内容，它就不起作用。它不会总是触发错误，但会阻止代码正确执行。在页面加载时，请确保在事件中添加空白。$('#selector').on(); 以任何方式为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T19:29:37.110

这为我修复了它，添加了空的 $(..).on(); 关于文档就绪方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-06T05:58:03.537

在某些情况下，您不想将事件直接绑定到元素。相反，您希望将其绑定到父元素，例如“body”。当您想要全局定义事件侦听器但该元素可能尚不存在时，这是必不可少的：

```
$("body").on("mouseenter", ".hover-item", function() {
    // do the thing
} 
```

这里的问题是，如果您尝试在其上运行`.off()`它`.hover-item`不起作用。或者，如果您尝试使用`.off()`on `body`， using`.children()`也不会做任何事情。

`.off()`我认为最好将事件绑定到特定的类名，而不是使用，当你想禁用这些事件时，删除类名：

```
$(".the-element").removeClass(".hover-item"); 
```

现在该特定元素将不再启用事件侦听器。但是，由于您在技术上定义了事件监听`body`器，如果您需要稍后再次启用悬停效果，您可以使用`addClass(".hover-item")`，一切都会正常工作。

现在，这仅适用于您为多个项目设置一个动画的情况。悬停事件就是一个很好的例子。例如，您可以将相同的事件应用于所有按钮，而不是将不同的悬停事件应用于不同的按钮。但是，如果您只想禁用某个特定按钮的悬停事件，那么这是可行的方法。

# mysql - DB 使用 perl 存在

> ID：14406977
> 
> 赞同：1
> 
> 时间：2013-01-18T20:18:16.523
> 
> 标签：mysql, perl, dbi

有没有办法使用 perl 检查 DB 是否存在？它是一个快速和简单的。但我仍然习惯 perl 和 DB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T20:35:31.830

DBI 模块是一种在 perl 中访问和操作数据库的流行方式。下面是一个使用 DBI 测试连接的简短示例：

```
use DBI;

$user = 'donny';
$pw = 'ppp';
$dsn = 'basetest';
$dbh = DBI->connect($dsn, $user, $pw) or die "Unable to connect: $DBI::errstr\n"; 
```

最后一行也可能更像：

```
$dbh = DBI->connect('dbi:Oracle:',$user.'@'.$password,$dbconnectstring); 
```

或类似的东西 - 只需编辑第一个参数是有意义的。

如您所见 - 如果找不到数据库，您将无法连接。

这是与 DBI 相关的文档：http: [//dbi.perl.org/docs/](http://dbi.perl.org/docs/)

旁注：另外，请注意您可以在 perl 脚本中访问 sqlplus - 或任何命令行。只需使用反引号。如果您的机器上有可用的工具，那么检查这种方式可能是值得的。

# python - Python - Tkinter - 我希望 Entry 中的 get() 值在函数中使用

> ID：14406979
> 
> 赞同：1
> 
> 时间：2013-01-18T20:18:53.043
> 
> 标签：python, tkinter, get, var, tkinter-entry

我无法从“条目”中检索变量，然后将变量输入到函数中。例如，我想检索作为变量“条目”的“NbF”。我在“set”中做了，我可以用“get”检索它，但是当我得到一个新的文本“entry”时，我没有得到新的值。

这是我的代码：

```
#!/usr/local/bin/python
# -*- coding:utf-8 -*-
from Tkinter import *
import tkFileDialog, tkMessageBox

application = Tk()
application.title("Application Drone - Analyse Vidéo")

def getFile(): 
        varName = tkFileDialog.askopenfilename().encode('utf-8')
        Name.set('Path : ' + varName)

def convert(nbFrame):
    print 'ffmpeg -i pathVideo -r '+nbFrame+' -f image2 "temp%4d.png"' 

def detect():
    pass

def analyse():
    pass

frame1 = Frame(application, bg="blue",   width=560, height=100)
frame1.pack(side=TOP, fill=X)

frame2 = Frame(application, bg="red",   width=560, height=100)
frame2.pack(side=TOP, fill=X)

frame3 = Frame(application, bg="green",   width=560, height=100)
frame3.pack(side=TOP, fill=X)

frame4 = Frame(application, bg="yellow",   width=560, height=100)
frame4.pack(side=TOP, fill=X)

frame5 = Frame(application, bg="grey",    width=560, height=100)
frame5.pack(side=BOTTOM, fill=BOTH, expand=1)

#frame 1
Name=StringVar()
lab1 = Label(frame1, text="Step 1 : Recup video").grid(row=0,column=0)
butt1 = Button(frame1,text="browse",command=getFile).grid(row=0,column=1)
nameVideo = Label(frame1, textvariable=Name).grid(row=1,column=0)

#frame 2
NbF = StringVar()
NbPictures=StringVar()
lab2 = Label(frame2, text="Step 2 : Convert video to images").grid(row=0,column=0)
ent2 = Entry(frame2, textvariable=NbF).grid(row=0,column=1)
# ent2.pack()
NbF.set('nb frame')
recup2 = NbF.get()
butt2 = Button(frame2,text="convert",command=lambda :convert(recup2)).grid(row=0,column=2)
nbP = Label(frame2, textvariable=NbPictures).grid(row=1,column=0)

#frame 3
NbS=StringVar()
lab3 = Label(frame3, text="Step 3 : Detect shape").grid(row=0,column=0)
butt3 = Button(frame3,text="detect",command=lambda :detect).grid(row=0,column=1)
numberShape = Label(frame3, textvariable=NbS).grid(row=1,column=0)

#frame 4
NbC=StringVar()
lab4 = Label(frame4, text="Step 4 : Analyse QrCode").grid(row=0,column=0)
butt4 = Button(frame4,text="analyse",command=lambda :analyse).grid(row=0,column=1)
numberCoord = Label(frame4, textvariable=NbC).grid(row=1,column=0)

#frame 5
lab5 = Label(frame5, text="Step 5 : Send coordonates").grid(row=0,column=0)
butt5 = Button(frame5,text="send",command=lambda :send).grid(row=0,column=1)

application.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:30:50.620

也许你的意思是：

```
butt2 = Button(frame2,text="convert",command=lambda :convert(NbF.get())).grid(row=0,column=2) 
```

这会延迟调用`NbF.get()`，直到实际按下按钮。与之前的代码一样，您在创建按钮之前调用`NbF.get()`，然后在按下按钮时将该值传递给函数。

* * *

附带说明一下，`butt2`在上面的代码中`None`，几乎可以肯定这不是您想要的。这样做的原因是因为`Widget.grid`总是返回`None`。我建议您不要在同一行创建小部件并将其打包/网格化——始终将其拆分为 2 行：

```
butt2 = Button(frame2,text="convert",command=lambda :convert(NbF.get()))
butt2.grid(row=0,column=2) 
```

# linq-to-xml - 使用 Linq to XML 选择单个值

> ID：14406980
> 
> 赞同：1
> 
> 时间：2013-01-18T20:18:54.440
> 
> 标签：linq-to-xml

我的大脑今天不工作。如何选择在下面的 xml 文件中只出现一次的“IDValue”？

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
 <result>
<Property>
  <PropertyID>
    <Identification>
      <IDValue>8361</IDValue>
      <OrganizationName>Lynd Company</OrganizationName>
    </Identification>
  </PropertyID>
</Property>
  </result>
</response> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:27:00.807

```
var doc = XDocument.Load("pathtoXml");
var value = doc.Descendants("IDValue").SingleOrDefault().Value; 
```

# groovy - 为什么当 Groovy JsonBuilder 尝试序列化 Expando 时会出现 StackoverflowError？

> ID：14406981
> 
> 赞同：4
> 
> 时间：2013-01-18T20:19:01.217
> 
> 标签：groovy, expando, jsonbuilder

当我尝试序列化 Expando 时，出现 StackoverflowError（未追溯到我的代码）。用 groovy shell 复制：

```
... groovy-2.0.6/bin/groovysh new groovy.json.JsonBuilder(new Expando(name:'hello')).toString()
FATAL: java.lang.StackOverflowError
java.lang.StackOverflowError
        at java.lang.Exception.<init>(Exception.java:77)
        at java.lang.reflect.InvocationTargetException.<init>(InvocationTargetException.java:54)
        at sun.reflect.GeneratedMethodAccessor13.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
... 
```

这应该有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T20:28:59.177

哇..这是一个错误。看起来它是在 1.8.8 引入的

适用于 1.8.6：

```
groovy-1.8.6/bin/groovysh new groovy.json.JsonBuilder(new Expando(name:'hello')).toString();

===> {"name":"hello"} 
```

1.8.8 的 StackoverflowError：

```
groovy-1.8.8/bin/groovysh new groovy.json.JsonBuilder(new Expando(name:'hello')).toString();
FATAL: java.lang.StackOverflowError
java.lang.StackOverflowError 
```

看起来在 2.1.0rc1 上有一个错误：[https ://issues.apache.org/jira/browse/GROOVY-5918](http://jira.codehaus.org/browse/GROOVY-5918)

# android - 媒体播放器如何看到其他用户使用 wifi

> ID：14406985
> 
> 赞同：0
> 
> 时间：2013-01-18T20:19:05.290
> 
> 标签：android, visual-studio-2010, wifi, windows-media-player

我想编写一个使用 wifi 识别用户的应用程序，就像 windows 媒体播放器使用 wifi 识别其他用户用户 WMP 一样，您可以访问他们的库。谁能告诉我我需要从哪里开始？谢谢

# android - android phonegap 插件启动导航应用程序

> ID：14406988
> 
> 赞同：0
> 
> 时间：2013-01-18T20:19:21.593
> 
> 标签：android, cordova

我以前从未使用过 java 开发，我正试图弄清楚如何通过 phonegap 插件通过 javascript 启动 Google Navigation 应用程序。

我正在尝试修改 phonegap 示例 java 类，但没有任何运气。这是课程。

appname/src/PhoneNavigator.java

```
package com.phonegap.plugin.phoneNavigator;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.Intent;
import android.net.Uri;

/**
 * This class echoes a string called from JavaScript.
 */
public class PhoneNavigator extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        if (action.equals("doNavigate")) {
            String message = args.getString(0); 
            this.doNavigate(message,callbackContext);
            return true;
        }
        return false;
    }

    private void doNavigate(String location, CallbackContext callbackContext) {
        if (location != null && location.length() > 0) { 
            callbackContext.success(location);
            Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("google.navigation:q=" + location)); 
            startActivity(i);
        } else {
            callbackContext.error("Expected one non-empty string argument.");
        }
    }

    private void startActivity(Intent i) {
        // TODO Auto-generated method stub

    }
} 
```

然后我有以下javascript函数

```
function doNavigate(str){

    str = encodeURIComponent(str);

    cordova.exec(function(winParam) { alert(winParam);}, function(error) { alert(error);}, "PhoneNavigator",
             "doNavigate", [str]);
} 
```

当我在我的应用程序中运行 javascript 函数时，我收到一条警告说“无效操作”。在我见过的所有示例中，它们都以“startAcitivity(i);”结尾。当我尝试这样做时，eclipse 告诉我我没有该方法可用。我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:37:40.407

想通了以下。

```
package com.phonegap.plugin.phoneNavigator;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.Intent;
import android.net.Uri;

/**
 * This class echoes a string called from JavaScript.
 */
public class PhoneNavigator extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        if (action.equals("doNavigate")) {
            String message = args.getString(0); 
            this.doNavigate(message,callbackContext);
            return true;
        }
        return false;
    }

    private void doNavigate(String location, CallbackContext callbackContext) {
        if (location != null && location.length() > 0) { 
            callbackContext.success(location);
            Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("google.navigation:q=" + location)); 
            this.cordova.getActivity().startActivity(i);
        } else {
            callbackContext.error("Expected one non-empty string argument.");
        }
    }

} 
```

# spring-mvc - NoClassDefFoundError: javax/servlet/AsyncListener

> ID：14406990
> 
> 赞同：0
> 
> 时间：2013-01-18T20:19:41.490
> 
> 标签：spring-mvc

我在运行spring应用程序时遇到了一些异常我不知道为什么会发生请帮帮我我已经在我的系统中导入了应用程序并尝试运行但是它显示了这个错误请帮我弄清楚

```
 java.lang.NoClassDefFoundError: javax/servlet/AsyncListener
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:620)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2854)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:159)
    at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:104)
    at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:87)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:233)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:622)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:634)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:591)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:648)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:511)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:452)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619) 
```

这是 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>EmployeeWebSpring</display-name>

    <!-- The front controller of this Spring Web application, responsible for 
        handling all application requests -->
    <servlet>
        <servlet-name>ds</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>

        <load-on-startup>1</load-on-startup>
    </servlet>
    <!-- Map all requests to the DispatcherServlet for handling -->
    <servlet-mapping>
        <servlet-name>ds</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.css</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.js</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.gif</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.jpg</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.png</url-pattern>
    </servlet-mapping>

</web-app> 
```

这是 ds-servlet.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/context 
                           http://www.springframework.org/schema/context/spring-context-3.2.xsd
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd">

    <context:annotation-config />

    <mvc:annotation-driven />

    <bean class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        id="dataSource">
        <property value="com.mysql.jdbc.Driver" name="driverClassName" />
        <property value="jdbc:mysql://192.168.25.30:3306/employee"
            name="url" />
        <property value="hr" name="username" />
        <property value="hr123" name="password" />
    </bean>
    <bean id="employeeDaoImpl" class="com.nousinfo.tutorial.employee.dao.impl.EmployeeDAOImpl">
        <property name="dataSource" ref="dataSource" />
    </bean>
    <bean id="departmentDaoImpl"
        class="com.nousinfo.tutorial.employee.dao.impl.DepartmentDAOImpl">
        <property name="dataSource" ref="dataSource" />
    </bean>
    <bean id="projectDaoImpl" class="com.nousinfo.tutorial.employee.dao.impl.ProjectDAOImpl">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="employeserviceImpl" class=" com.nousinfo.tutorial.service.impl.EmployeeServiceImpl">
        <property name="daoImpl" ref="employeeDaoImpl" />
    </bean>
    <bean id="departmentserviceImpl"
        class=" com.nousinfo.tutorial.service.impl.DepartmentServiceImpl">
        <property name="departmentDAOImpl" ref="departmentDaoImpl" />
    </bean>

    <bean id="projectserviceImpl" class=" com.nousinfo.tutorial.service.impl.ProjectServiceImpl">
        <property name="projectDAOImpl" ref="projectDaoImpl" />
    </bean>

    <bean id="mycontroller"
        class="com.nousinfo.tutorial.controllers.SearchEmployeeController">
        <property name="employeeServiceImpl" ref="employeserviceImpl"></property>
    </bean>
    <bean id="emplController" class="com.nousinfo.tutorial.controllers.EmployeeController">
        <property name="employeeServiceImpl" ref="employeserviceImpl" />
        <property name="projectServiceImpl" ref="projectserviceImpl" />

    </bean>
    <bean id="deaprtmentController" class="com.nousinfo.tutorial.controllers.DepartmentController">
        <property name="departmentServiceImpl" ref="departmentserviceImpl"></property>
    </bean>

    <bean id="deptCotrooler"
        class="com.nousinfo.tutorial.controllers.SearchDepartmentController">
        <property name="departmentServiceImpl" ref="departmentserviceImpl"></property>
    </bean>
    <bean id="projectController" class="com.nousinfo.tutorial.controllers.ProjectController">
        <property name="projectServiceImpl" ref="projectserviceImpl"></property>
    </bean>
    <bean id="projectSearchController"
        class="com.nousinfo.tutorial.controllers.SearchProjectController">
        <property name="projectServiceImpl" ref="projectserviceImpl"></property>
    </bean>

    <bean id="configurationLoader"
        class="org.springmodules.validation.bean.conf.loader.annotation.AnnotationBeanValidationConfigurationLoader" />
    <bean id="validator" class="org.springmodules.validation.bean.BeanValidator"
        p:configurationLoader-ref="configurationLoader" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver"
        p:prefix="/WEB-INF/" p:suffix=".jsp" />

    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="com/nousinfo/resources/messages" />
    </bean>
    <!-- Configure the multipart resolver -->
    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    </bean>

    <!-- configuring BeanNameViewResolver -->
    <!-- <bean class="org.springframework.web.servlet.view.BeanNameViewResolver"></bean> 
        configuring exception Resolver <bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"> 
        <property name="exceptionMappings"> <props> <prop key="org.springframework.dao.DAOException">dberrorView</prop> 
        <prop key="java.lang.NumberFormatException">notANumber</prop> </props> </property> 
        </bean> configuring views required to render the view for /search.spring 
        <bean name="successSingleEmp" class="org.springframework.web.servlet.view.JstlView"> 
        <property name="url" value="/WEB-INF/EmployeeDetail.jsp" /> </bean> <bean 
        name="successMultipleEmps" class="org.springframework.web.servlet.view.JstlView"> 
        <property name="url" value="/WEB-INF/EmployeeList.jsp" /> </bean> <bean name="dberrorView" 
        class="org.springframework.web.servlet.view.JstlView"> <property name="url" 
        value="/WEB-INF/DBError.jsp" /> </bean> <bean name="notANumber" class="org.springframework.web.servlet.view.JstlView"> 
        <property name="url" value="/WEB-INF/NotANumberError.jsp" /> </bean> CONFIGURING 
        THE MEASSAGE RESOURCES FOR THIS APPLICTION CONTEXT <bean id="messageSource" 
        class="org.springframework.context.support.ResourceBundleMessageSource"> 
        <property name="basename" value="/com/nousinfo/resources/ApplicationResources" 
        /> </bean> -->
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:31:51.153

您正在使用`2.5`servlet 规范，而[AsyncListener](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncListener.html)带有`3.0`servlet。

# java - OpenGL ES Android 中的深度缓冲问题

> ID：14406993
> 
> 赞同：1
> 
> 时间：2013-01-18T20:19:45.383
> 
> 标签：java, android, opengl-es

好的，所以我的深度缓冲区不起作用，因为当我在演示中移动时，它会改变显示的顶点，并使模型扭曲和“闪烁”。我的问题是，我做或不做任何可能导致这种影响的事情？

```
@Override
       public void onSurfaceCreated(GL10 gl, EGLConfig config) {
          gl.glClearColor(0.0f, 0.4f, 0.4f, 1.0f);  // Set color's clear-value to black
          /*Enable back face culling*/
          gl.glEnable(GL10.GL_CULL_FACE);
          gl.glCullFace(GL10.GL_BACK);
          gl.glFrontFace(GL10.GL_CCW);
          gl.glClearDepthf(1.0f);            // Set depth's clear-value to farthest
          gl.glEnable(GL10.GL_DEPTH_TEST);   // Enables depth-buffer for hidden surface removal
          gl.glDepthFunc(GL10.GL_LEQUAL);    // The type of depth testing to do
          gl.glDepthMask(true);
          gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);  // nice perspective view
          gl.glShadeModel(GL10.GL_SMOOTH);   // Enable smooth shading of color

          neroburst.model.loadTexture(gl, context);    // Load image into Texture (NEW)
          gl.glEnable(GL10.GL_TEXTURE_2D);  // Enable texture (NEW)
       }

       // Call back after onSurfaceCreated() or whenever the window's size changes
       @Override
       public void onSurfaceChanged(GL10 gl, int width, int height) {
          if (height == 0) height = 1;   // To prevent divide by zero
          float aspect = (float)width / height;

          // Set the viewport (display area) to cover the entire window
          gl.glViewport(0, 0, width, height);

          // Setup perspective projection, with aspect ratio matches viewport
          gl.glMatrixMode(GL10.GL_PROJECTION); // Select projection matrix
          gl.glLoadIdentity();                 // Reset projection matrix
          // Use perspective projection
          GLU.gluPerspective(gl, 45, aspect, 0.1f, 300.f);

          gl.glMatrixMode(GL10.GL_MODELVIEW);  // Select model-view matrix
          gl.glLoadIdentity();                 // Reset
       }

       // Call back to draw the current frame.
       @Override
       public void onDrawFrame(GL10 gl) {
          // Clear color and depth buffers using clear-value set earlier
          gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

          gl.glLoadIdentity();                 // Reset model-view matrix ( NEW )
           gl.glRotatef(neroburst.player.yaw, 0, 1, 0);
           gl.glTranslatef(-neroburst.player.pos.x, neroburst.player.pos.y, -neroburst.player.pos.z); 

          neroburst.model.draw(gl);
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:15:02.877

解决它。我起飞了

```
 gl.glEnable(GL10.GL_CULL_FACE);
  gl.glCullFace(GL10.GL_BACK);
  gl.glFrontFace(GL10.GL_CCW); 
```

将 gl.glHint 从最快更改为最佳，我的视角接近值从 0.1f 更改为 1。

还添加了禁用抖动

# ios6 - iOS - 通过inApp-purchase 将应用升级到完整版后更改应用名称

> ID：14406998
> 
> 赞同：0
> 
> 时间：2013-01-18T20:20:05.403
> 
> 标签：ios6, in-app-purchase

我想创建我的应用程序的精简版，并允许用户通过 inApp-purchase 升级到完整版。

当用户下载应用程序的免费版本时，它被命名为 lite。升级到完整版后是否有可能以编程方式更改名称？升级后显示 lite 是没有意义的，所以我想简单地将名称更改为 .

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:46:59.407

应用名称不能更改。几年前，我开始走同样的路。应用程序名称和与 Apple 的连接是捆绑包 ID，每个应用程序都是唯一的。而且，升级后更改默认应用程序图像可能是一个困难的提议。

我通过使用“精简版”版本的一组有限功能解决了这个问题，我将其作为免费下载提供。我有两种情况：1）购买功能“集”之一或 2）全面升级。如果用户只想要一个“集合”，他们就购买那个集合。如果用户想要“完整”版本，他们需要为升级付费。升级解锁所有功能。我通过 InApp Purchasing 检查“升级”或“购买”来做到这一点。升级后，我删除了“升级按钮”并解锁了所有功能。祝你好运。